# StackOverflow 问答 11358000-11358999

# iphone - 如何在 ubuntu 中编译 Objective C 代码

> ID：11358000
> 
> 赞同：5
> 
> 时间：2012-07-06T07:48:08.220
> 
> 标签：iphone, ubuntu, gnustep

我是 Iphone 编程的初学者。我正在尝试编译（ubuntu）。

```
#import <Foundation/Foundation.h>

int main (void)
 {
  NSLog (@"Executing");
  return 0;
 } 
```

我编译了它，但出现以下错误

```
 subhash@subhash-Lenovo-G570:~/grit/iphone/mac$ gcc -lgnustep-base -lpthread -lob
  jc -lm -I/usr/local/include/GNUstep -I/usr/include/GNUstep -fconstant-string-cla
  ss=NSConstantString hello.m -o hello
  In file included from /usr/include/GNUstep/Foundation/NSClassDescription.h:30:0,
                  from /usr/include/GNUstep/Foundation/Foundation.h:50, 
                  from hello.m:1:
  /usr/include/GNUstep/Foundation/NSException.h:42:2: error: #error The current se
  tting for native-objc-exceptions does not match that of gnustep-base ... please 
  correct this. 
```

我按照[http://ubuntuforums.org/showthread.php?p=5593608](http://ubuntuforums.org/showthread.php?p=5593608)作为参考。

我评论了 NSException.h 的#error 指令，问题就解决了。现在我得到了新的错误。

```
/tmp/ccQlI9wJ.o: In function `main':
        hello.m:(.text+0x11): undefined reference to `NSLog'
        /tmp/ccQlI9wJ.o: In function `__objc_gnu_init':
        hello.m:(.text+0x2a): undefined reference to `__objc_exec_class'
        /tmp/ccQlI9wJ.o:(.data+0x40): undefined reference to `__objc_class_name_NSConsta
        ntString'
        collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T19:12:23.500

在[使用 gcc 编译 Objective-C 程序](http://blog.lyxite.com/2008/01/compile-objective-c-programs-using-gcc.html) 中有以下内容

> 另请注意，如果您没有包含 -D_NATIVE_OBJC_EXCEPTIONS，您可能会遇到以下错误：
> 
> ```
> /usr/include/GNUstep/Foundation/NSException.h:42:2: error: #error The
> current setting for native-objc-exceptions does not match that of
> gnustep-base ... please correct this. 
> ```

我有与原始海报相同的错误，传递`-D_NATIVE_OBJC_EXCEPTIONS`标志为我解决了问题。我试图做一些非常不标准的事情，所以它可能并不适合所有人。

请注意，shalki 的回答也可以解决问题。如果那里引用的链接消失了，有问题的博客文章 [Compile Objective-C Programs on Linux](http://stpetrus27.wordpress.com/2011/06/20/compile-objective-c-programs-on-linux/) is in Chinese or Japanese or like that,所以我不知道它到底在说什么，但我*认为*结果是经过

```
`gnustep-config --objc-flags` 
```

作为 gcc 的参数。帖子有

```
gcc `gnustep-config --objc-flags` hello.m -o hello -I /usr/include/GNUstep/ -L /usr/lib/GNUstep/ -lgnustep-base 
```

在最后。现在，在我的机器上，`gnustep-config --objc-flags`扩展到

```
-MMD -MP -DGNUSTEP -DGNUSTEP_BASE_LIBRARY=1 -DGNU_GUI_LIBRARY=1 -DGNU_RUNTIME=1 -DGNUSTEP_BASE_LIBRARY=1 -D_REENTRANT -fPIC -Wall -DGSWARN -DGSDIAGNOSE -Wno-import -g -O2 -fno-strict-aliasing -fexceptions -fobjc-exceptions -D_NATIVE_OBJC_EXCEPTIONS -fgnu-runtime -fconstant-string-class=NSConstantString -I. -I/home/faheem/GNUstep/Library/Headers -I/usr/local/include/GNUstep -I/usr/include/GNUstep 
```

约扎。请注意，这个标志列表确实包含`-D_NATIVE_OBJC_EXCEPTIONS`，以及许多其他内容。作为记录，我的机器正在运行 Debian Squeeze。这可能是 Debian/Ubuntu 特有的问题。我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:20:49.440

最好写一个 GNUmakefile。

[http://www.gnustep.it/nicola/Tutorials/WritingMakefiles/index.html](http://www.gnustep.it/nicola/Tutorials/WritingMakefiles/index.html)

最好停止使用 gcc 并切换到 clang。

# c - 由于权限，无法在 Windows 7 中使用 fopen 读取或写入

> ID：11358001
> 
> 赞同：2
> 
> 时间：2012-07-06T07:48:09.873
> 
> 标签：c, windows, windows-7, fopen

我一直在寻找一段时间才能找到这个答案，但我找不到解决方案。基本上，我正在尝试读取和写入计算机 c 驱动器中的文件。但是，因为它是 Windows 7，所以它选择在背面很痛苦，并且不允许我的 C 程序这样做。我尝试过以管理员模式运行它以及尝试使用不同的目录。运行以下代码时：

```
FILE *fp = fopen(strIn, "r");
if(fopen(strIn, "r") == NULL)
{ 
    printf("Error: %d (%s)\n", errno, strerror(errno));
    getchar();
} 
```

返回的错误是“错误 13 权限被拒绝”。我知道微软真的不喜欢再使用`fopen`它喜欢的东西了，`fopen_s`但我发现很难理解如何实现它，而且它也缺乏资源。有什么办法可以解决这个问题，因为它现在真的让我退缩了。非常感激，

杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:46:44.893

您的代码打开文件两次：

```
FILE *fp = fopen(strIn, "r");
if(fopen(strIn, "r") == NULL)  /* Second open, leaks FILE *! */ 
```

这可能会导致错误，因为 Windows 对于允许多次打开文件可能会很挑剔。第二行应为：

```
if(fp == NULL) 
```

# c# - 有没有更简单的方法可以在 C# 中执行此 if 语句

> ID：11358004
> 
> 赞同：3
> 
> 时间：2012-07-06T07:48:22.257
> 
> 标签：c#

我有以下内容：

```
if (model.PartitionKey.Substring(2, 2) == "05" || 
    model.PartitionKey.Substring(2, 2) == "06") 
```

我有更多这样的。有没有更简洁的方法来编写代码，我不必重复 model.PartitionKey 两次？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T07:53:03.260

那这个呢：

```
if (new string[]{"05", "06"}.Contains(model.PartitionKey.Substring(2, 2))
    // ... 
```

这让您可以自由地将您正在寻找的字符串保留在一个不错的列表中......

```
var lookingFor = new string[]{"05", "06"};
var substring = model.PartitionKey.Substring(2, 2);
if (lookingFor.Contains(substring))
{
    // ...
} 
```

如果您要查找的字符串列表长于两个，这将有很大帮助...此外，您可以将其添加到 set ( `HashSet<string>`) 以进行更有效的查找 - 但首先对此进行测试，因为开销会消耗收益.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-06T07:58:03.343

对于这种情况，我使用扩展方法

```
public static bool In<T>(this T source, params T[] list)
{
   if (source = null)
       throw new NullReferenceException("Source is Null");

   return list.Contains(source);
} 
```

并将其称为

```
if (model.PartitionKey.Substring(2, 2).In("05", "06")) 
```

作为一个扩展方法，我们可以为所有类型调用它，比如

```
if(myintegervariable.In(3, 4)); 
```

或者

```
if(mybytevariable.In(23, 56, 34, 43, 87, 155)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-06T07:50:17.850

```
var keyString = model.PartitionKey.Substring(2, 2);
if (keyString == "05" || keyString == "06")
{
    // ...
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-06T08:15:06.830

我很惊讶没有人提供 switch 作为一种可能的选择:)

```
switch (model.PartitionKey.SubString(2,2)) {
  case "05":
  case "06":
    // do stuff
    break;
  // other cases
  default:
    // like an else
} 
```

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/06tc147t.aspx)上阅读有关它的更多信息

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-06T07:50:07.620

您可以将子字符串保存在变量中：

```
var substring = model.PartitionKey.Substring(2, 2);
if (substring == "05" || substring == "06") 
```

或者您可以使用正则表达式：

```
if (Regex.IsMatch("^..0[56]", model.PartitionKey)) 
```

这可能在一定程度上取决于您在阅读代码时理解正则表达式的难易程度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T07:51:17.943

为了提高可读性，您可以将`Substring`输出提取到变量中，然后进行测试：

```
var partitionKeyBits = model.PartitionKey.Substring(2, 2);

if (partitionKeyBits == "05" || partitionKeyBits == "06") {

} 
```

但除此之外就是这样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T07:53:04.997

`if (new []{"05", "06"}.Contains(model.PartitionKey.Substring(2, 2))`

语法可能很遥远，欢迎指正:)

编辑：`new []`

# math - 字符组合（数学）

> ID：11358006
> 
> 赞同：1
> 
> 时间：2012-07-06T07:48:51.583
> 
> 标签：math

如果我有 37 个不同的字符，并且我需要从最大长度为 15 的字符中创建所有可能的单词，那么总单词数是多少？

假设，我有 X=2 个字符，Y=2 最大长度，那么可能的结果是：A AA B BB AB BA

所以 Z = 6 总 outomces 的数量。

现在如果 X=37 和 Y=15 的值，Z 的值是多少？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:56:08.457

对于 i=1..15，它是 sum(37^i)。例如：2^1 + 2^2 = 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:58:44.650

除了 Bartosz 的回答之外，求和的简单公式是

```
n = ((1-X^(Y+1)) / (1-X)) - 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T12:36:18.407

求和的另一个简单公式是

```
x * (x^y - 1)
-------------
    x - 1 
```

[http://www.wolframalpha.com/input/?i=sum+x%5Ei+for+i+1+to+y+](http://www.wolframalpha.com/input/?i=sum+x%5Ei+for+i+1+to+y+)

# iphone - 如何通过 iphone 应用在 Facebook 上创建活动

> ID：11358010
> 
> 赞同：1
> 
> 时间：2012-07-06T07:48:57.900
> 
> 标签：iphone, facebook-graph-api

我想在我的应用程序中的 facebook 上创建事件。我正在使用 FBGraph Api。

这是代码：

```
NSString *strGetProfil=[NSString stringWithFormat:
                       @"https://graph.facebook.com/%@/events?access_token=%@&name=%@&start_time=%@&end_time=%@&description=%@&location=%@&location_id=
                       %@&privacy_type=%@",[getAllInfo objectAtIndex:4],[getAllInfo objectAtIndex:7],@"teing",@"2010-03-14T14:00:00",@"2010-03-14T17:30:00",@"",@"",@"",@""];

NSURL *url = [NSURL URLWithString:strGetProfil]; 
```

请指导我正确的道路。

提前致谢。

# mysql - Flex 4、Spring 3 BlazeDS4 mySQL dbcp 查询执行

> ID：11358020
> 
> 赞同：0
> 
> 时间：2012-07-06T07:49:31.373
> 
> 标签：mysql, apache-flex, spring, jdbc

我已经通过与 mySQL DB 的连接实现了 SpringFlex 1.5，它最初可以工作并检索数据，但是当我输入一个在我的表中不存在的无效数据时，应用程序似乎冻结了，之后甚至无法输入有效数据，并且我需要停止并再次启动 Tomcat 以使其再次工作

应用程序上下文.xml

```
<bean id="authToLeaveService" class="com.model.atl.AuthToLeaveServiceImpl">
    <constructor-arg ref="dataSource" />        
</bean>

<bean id="dataSource" 
     class="org.apache.commons.dbcp.BasicDataSource">

    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://dxfcm:3306/wookie?autoReconnect=true&amp;zeroDateTimeBehavior=convertToNull"/>
    <property name="username" value="darth" />
    <property name="password" value="vader" />
    <property name="validationQuery" value="SELECT 1"/>
</bean> 
```

我的观点

```
<fx:Declarations>       
    <s:ChannelSet id="cs">
        <s:AMFChannel url="http://localhost:8400/flexspring/messagebroker/amf"/>
    </s:ChannelSet>     
    <s:RemoteObject id="atlRO" channelSet="{cs}" destination="authToLeaveService"/> 
</fx:Declarations>

[Bindable]
private var job:AtlJob;

private function onEnter(event:FlexEvent):void
{
    var token:AsyncToken = atlRO.findByBarcode(this.txtBarcode.text);
    token.addResponder(new AsyncResponder(onResult, onFault));
} 

private function onResult(event:ResultEvent, token:Object):void
{ job = event.result as AtlJob; }

private function onFault(event:FaultEvent, token:Object):void
{ }

<s:TextInput id="txtBarcode" x="23" y="60" width="218"
    enter="onEnter(event)" maxChars="16"/> 
```

AltJob.as

```
[Bindable]
[RemoteClass (alias="com.model.atl.AtlJob")]
public class AtlJob
{
public var barcode:String;
public var pieces:int;
public var customerName:String;
} 
```

AtlJob.java 包 com.model.atl；

公共类 AtlJob 实现 java.io.Serializable {

```
private static final long serialVersionUID = 1L;

private String barcode;
private String customerName;
private int pieces;

public AtlJob() {   }

public AtlJob(String barcode, int pieces, String customerName) {
    this.barcode = barcode;

    this.customerName = customerName;
    this.pieces= pieces;
} 
```

定义的 Getter 和 Setter

```
@Service("authToLeaveService")
@RemotingDestination(channels = { "my-amf", "my-secure-amf" })
public class AuthToLeaveServiceImpl implements AuthToLeaveService {

private final DataSource dataSource;

public AuthToLeaveServiceImpl(DataSource dataSource) {
    this.dataSource = dataSource; }

@RemotingInclude
public AtlJob findByBarcode(String barcode) {
AtlJob job = new AtlJob();
Connection con = null;

final String sql = "SELECT * FROM atl_job WHERE card_barcode = ?";

try {
    con = this.dataSource.getConnection();
    PreparedStatement ps = con.prepareStatement(sql);
    ps.setString(1, barcode);
    ResultSet rs = ps.executeQuery();

if (rs.next()) {
    job.setBarcode(rs.getString("barcode"));
    job.setPieces(rs.getInt("pieces"));
    job.setCustomerName(rs.getString("customerName"));}
} catch (SQLException e) {
    e.printStackTrace();
throw new RuntimeException(e);
} finally {
if (con!=null) {try { con.close();
} catch (SQLException e) {
e.printStackTrace();
} }} return job; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:38:02.237

如果没有像这里那样找到记录，您不会抛出任何异常

```
...
if (rs.next()) {
  job.setBarcode(rs.getString("barcode"));
  job.setPieces(rs.getInt("pieces"));
  job.setCustomerName(rs.getString("customerName"));
}
// Put an else clause here and throw exception
else
{
  throw new Exception("Record Not found"); 
} 
```

尝试在您的 faultMethod 中显示捕获的异常 ..

```
 private function onFault(event:FaultEvent, token:Object):void   
 { 
    //Handle Fault event here Put some Alert here
 } 
```

# php - 浏览器弹出窗口阻止程序已关闭/打开

> ID：11358036
> 
> 赞同：0
> 
> 时间：2012-07-06T07:50:25.810
> 
> 标签：php, browser

他们有什么方法可以在 PHP 中检查我的浏览器 FF/Chrome/IE/Safari 弹出窗口阻止程序是否允许/启用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:54:17.813

你可以尝试这样的事情：

```
<script language="javascript">

var myWindow;

myWindow= window.open(...);
if (myWindow.closed) {
    //pop up disabled
}

</script> 
```

但它不在 PHP 中 ^^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:55:41.570

弹出窗口阻止程序只能在客户端上检测到，但是也许您可以执行以下操作：

*   触发测试弹出窗口并立即使用 javascript 将其关闭。在此过程中检测弹出窗口是成功还是被阻止。

*   完成后，向您的服务器发出 AJAX 请求，并在会话变量中保存您是否被弹出窗口阻止程序阻止。

但是，我真的不明白为什么您的服务器端代码需要知道客户端是否有活动的弹出窗口阻止程序，除非您出于统计目的收集数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:56:43.050

因为 PHP 是一种服务器端语言，所以我很肯定仅使用 PHP 是不可能的。像其他答案所说的那样做，并使用 Javascript 来完成这项任务（也许是 AJAX？）。

PHP 可能对浏览器“了解一点”，但只知道请求标头上的内容。这包括**用户代理**标头，它可以准确地告诉您用户正在使用哪个浏览器，并且您显示信息的策略可能取决于用户代理（从移动浏览器浏览时网页显示移动版本几乎是做什么的） ) .

# wcf - 带有事件的 Dpws Web 服务 - 寻求 Wc f 客户端示例或建议

> ID：11358039
> 
> 赞同：1
> 
> 时间：2012-07-06T07:50:35.980
> 
> 标签：wcf, wsdl, wcf-client, webservice-client

我的设备有一个带有单个输出 (wsdl:output) 的 DPWS Web 服务，我需要使用 Wcf 客户端订阅该服务

客户端是常规的 .Net 4.0 应用程序，而不是 .net-micro-framework。

我需要一个示例或教程或其他与为此类服务构建此类客户端相关的资源。

“添加服务引用”产生非工作代码，“添加 Web 引用”挂起。

Wsdl 如下。

如果有任何进一步的信息需要回答这个问题，请告诉我。

非常感谢

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
             xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema"
             xmlns:p="http://schemas.xmlsoap.org/ws/2006/02/devprof"
             xmlns:po="http://schemas.xmlsoap.org/ws/2004/09/policy"
             xmlns:tns="http://www.test.fi/wsdl/THLGateway"
             xmlns:wse="http://schemas.xmlsoap.org/ws/2004/08/eventing"
             xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/"
             name="THLGateway"
             targetNamespace="http://www.test.fi/wsdl/THLGateway">
  <po:Policy Id="EventingServicePolicy">
    <p:profile />
    <p:PushDelivery />
    <p:DurationExpiration />
    <p:ActionFilter />
  </po:Policy>
  <types>
    <xsd:schema targetNamespace="http://www.test.fi/wsdl/THLGateway"
                elementFormDefault="qualified">

      <xsd:element name="thlChangeEvent">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="gatewayID"
                         type="xsd:string"
                         nillable ="true"
                         minOccurs="0"/>
            <xsd:element name="nodeID"
                         type="xsd:string"
                          minOccurs="0"
                         nillable ="true"/>
            <xsd:element name="temperature"
                         nillable ="true"
                         minOccurs="0"
                         type="xsd:double"/>
            <xsd:element name="humidity"
                         nillable ="true"
                         minOccurs="0"
                         type="xsd:double"/>
            <xsd:element name="light"
                         nillable ="true"
                         minOccurs="0"
                         type="xsd:double"/>
            <xsd:element name="battery"
                         nillable ="true"
                         minOccurs="0"
                         type="xsd:double"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:schema>
  </types>

  <wsdl:message name="thlChangeResponse">
    <wsdl:part name="parameters" 
          element="tns:thlChangeEvent"/>
  </wsdl:message>

  <wsdl:portType name="THLGatewayPortType"
            wse:EventSource="true">

    <wsdl:operation name="thlChange">
      <wsdl:output message="tns:thlChangeResponse"/>
    </wsdl:operation>
  </wsdl:portType>

  <binding name="THLGatewayPortType"
           type="tns:THLGatewayPortType">
    <soap:binding style="document"
                  transport="http://schemas.xmlsoap.org/soap/http"/>

    <po:PolicyReference URI="#EventingServicePolicy"
                        wsdl:required="true" />
    <wsdl:operation name="thlChange">
      <soap:operation style="document"/>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </binding>
  <service name="THLGateway">
    <port name="THLGatewayPortType"
          binding="tns:THLGatewayPortType">
      <soap:address location="http://192.168.0.93:80/dpws/ws01"/>
    </port>
  </service>
</definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:51:36.900

单一输出意味着此服务生成事件。您将要查找 WS-Eventing。.Net 4.0 WCF 不支持它，但 CodeProject 上的一个项目正在 WCF 之上实现此功能。你还对这个话题感兴趣吗？

# ruby - 在ruby中将哈希转换为数组

> ID：11358045
> 
> 赞同：0
> 
> 时间：2012-07-06T07:51:06.797
> 
> 标签：ruby, arrays, hash

我对红宝石相当陌生，我有一个看起来像这样的哈希：

```
{ ["key1", "key2"] => 5, ["key1", "key3"] => 2, ... } 
```

我想把它转换成一个看起来像的数组

```
[ ["key1", "key2", 5], ["key1", "key3", 2] ... ] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:55:32.853

简单地：

```
hash.collect{|k, v| k << v} 
```

如果您需要原始哈希不变：

```
hash.collect{|k, v| k + [v]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:51:20.327

另一种方法可能是：

```
hash.map(&:flatten)
# => [["key1", "key2", 5], ["key1", "key3", 2]] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T09:29:44.953

to_a 正是这样做的。

```
{ ["key1", "key2"] => 5, ["key1", "key3"] => 2}.to_a 
```

# vbscript - 如何在 VBScript 中使用 jython

> ID：11358048
> 
> 赞同：-1
> 
> 时间：2012-07-06T07:51:21.597
> 
> 标签：vbscript, jython

我想使用 Vb 脚本中的命令行运行 jython。取决于返回值，我想在 VBScript 中执行一些逻辑。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:25:39.353

我假设当您说“运行 jython”时，您的意思是“从 vbscript 调用 jython 脚本”。这还假设您的环境已设置，以便您的 jython 脚本是可执行的。如果我的假设是错误的，请澄清你的问题。

```
Set myshell = WScript.CreateObject("WScript.Shell")
Dim cmd, result
cmd = """C:\path\to\jython\script.py"" [params]"
result = myshell.Run(cmd,0,true)

If result = x then
    <do something>
ElseIf result = y then
    <do something else>
Else
    <do another thing>
End If 
```

# c# - 未调用函数内部的连接

> ID：11358051
> 
> 赞同：-4
> 
> 时间：2012-07-06T07:51:35.837
> 
> 标签：c#, forms, ado.net, database-connection, connection-string

这是我的片段，请帮助我为什么 con.open 在函数 tabledel 中不起作用

一旦我按下按钮，我想删除表，第一次打开连接，但在函数 tabledel 内第二次无法打开它

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace WFA_CREATE_DELETE
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        OleDbConnection con = new OleDbConnection(@"PROVIDER=Microsoft.ACE.OLEDB.12.0; Data Source=C:/Users/Dinesh/Documents/Database3.accdb");
        OleDbDataAdapter ea = new OleDbDataAdapter();
        DataSet dsl;
        DataSet esl;

        private void Form1_Load(object sender, EventArgs e)
        {
            OleDbDataAdapter da = new OleDbDataAdapter();
            dsl = new DataSet();
            con.Open();

            DataTable table2 = con.GetSchema("tables");

            MessageBox.Show("Database Open");

            dataGridView1.DataSource = table2;

            con.Close();
            con.Dispose();
        }

        public void Tabledel()
        {
            int a = 0, d = 0, count, itr;

            count = dataGridView1.RowCount;
            itr = dataGridView1.ColumnCount;

            while (a < count)
            {
                for (d = 0; d < itr; d++)
                {
                    if (dataGridView1.Rows[a].Cells[d].Value.ToString() == textBox1.Text)
                    {

                        MessageBox.Show("table exists");
                        esl = new DataSet();
                        string vsql = "drop table '" + textBox1.Text + "'";
                        ea = new System.Data.OleDb.OleDbDataAdapter(vsql, con);
                        OleDbCommand cmdea = new OleDbCommand(vsql, con);
                        //cmdea.Connection = con;

                        con.Open();
                        cmdea.ExecuteNonQuery();
                        MessageBox.Show("table dropped");
                        con.Close();
                        con.Dispose();
                    }
                }

                a++;
            }
        }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

        }

        public void button1_Click(object sender, EventArgs e)
        {
           Tabledel();

        }

    }
} 
```

[关联](http://codepad.org/KmNlj83n#comment-zZzdSRrf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:00:16.450

如我所见，您收到此错误：

```
The ConnectionString property has not been initialized. 
```

可能您会在其他地方创建（处置）您的连接（表单类全局变量除外），所以我建议显式设置连接字符串（重新创建连接）：

```
con = new OleDbConnection(
      @"PROVIDER=Microsoft.ACE.OLEDB.12.0; Data Source=C:/Users/Dinesh/Documents/Database3.accdb");

con.Open(); 
```

无论如何，在 SO 中包含代码的主要部分并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:08:04.223

连接对象是在创建表单时创建的。您在 Form_Load 方法中打开、使用、关闭和 DISPOSE 连接对象。因此，当您的按钮单击处理程序开始执行时，连接对象就消失了。

您必须在按钮单击处理程序中创建一个新的连接对象，或者不在 Form_Load 方法中处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:08:16.740

真的很难解码你的实际问题是什么，是什么导致它等等，但是你的代码有很多问题。

首先，您不应该以您的方式初始化`con`对象。每次你用完它并调用它`Dispose`，你都会销毁它。无论如何，直到下次`Form1`初始化您的类时才会重建它。这可能就是您收到错误的原因。

一个建议是有一个单例来处理您的连接。这将我引向下一点：在循环中打开新连接是一个非常糟糕的主意。如果您正确地制作了连接处理程序，则每次调用只需打开一个连接。我会给你更好的性能，如果你有很多元素需要迭代，你会注意到这一点。

接下来，您的删除语句会受到 SQL 注入的影响。您应该强烈考虑使用一种将用户输入最小化以从列表中进行选择的方式，这样他们就无法在您的`textBox1.Text`

这只是其中的一部分。我希望你能使用它。

哦，拜托，请写一个更好的问题。不要只是说“呃，有些东西不起作用。链接”。压缩您的代码并考虑您的要求，以确保它会被广泛理解。

# java - 从java类中提取信息

> ID：11358054
> 
> 赞同：0
> 
> 时间：2012-07-06T07:51:57.253
> 
> 标签：java, import

我有一个名为 httpdstatistics.java 的 java 类，它属于一个 Web 服务器（Jigsaw），它生成有关此服务器的统计信息（命中、线程、ecc。）。我会将这些信息导出到我创建的其他类。哪个可能是完成我要求的最佳方法？在我的项目中导入此类 httpdstatistics.java 并在调用 get 方法获取数据之后是否足够？

```
// httpdStatistics.java
// $Id: httpdStatistics.java,v 1.10 2003/02/25 17:51:43 ylafon Exp $
// (c) COPYRIGHT MIT and INRIA, 1996.
// Please first read the full copyright statement in file COPYRIGHT.html

package org.w3c.jigsaw.http;

import java.net.URL;

// FIXME

import org.w3c.jigsaw.http.socket.SocketClientFactory;
import org.w3c.jigsaw.http.socket.SocketClientFactoryStats;

/**
 * This class maintains server wide statistics about hits.
 * This class should probably be coded as a resource itself, and made 
 * accessible through a specific HTTPResource. I am just having fun 
 * for the time being.
 */

public class httpdStatistics {
    protected httpd server = null ;

    /**
     * The min processing time in ms.
     */
    protected long r_min = Long.MAX_VALUE ;
    /**
     * The min processing time in ms for dynamic content
     */
    protected long rd_min = Long.MAX_VALUE ;
    /**
     * The URL that has been processed the fastest.
     */
    protected URL u_min = null ;
    /**
     * The URL that has been processed the fastest for dynamic content
     */
    protected URL ud_min = null ;
    /**
     * The maximum processing time in ms.
     */
    protected long r_max = 0 ;
    /**
     * The maximum processing time in ms for dynamic content
     */
    protected long rd_max = 0 ;
    /**
     * The URL that has been processed the slowest.
     */
    protected URL u_max = null ;
    /**
     * The URL that has been processed the slowest for dynamic content
     */
    protected URL ud_max = null ;
    /**
     * The total number of hits.
     */
    protected long t_hits  = 0 ;
    /**
     * The total number of hits for dynamic content
     */
    protected long td_hits  = 0 ;   
    /**
     * The total number of emited bytes.
     */
    protected long t_bytes = 0 ;
    /**
     * The total number of emited bytes for dynamic content
     */
    protected long td_bytes = 0 ;
    /**
     * The total time spent in processing requests in ms.
     */
    protected long t_req = 0 ;
    /**
     * The total time spent in processing requests in ms for dynamic content
     */
    protected long td_req = 0 ;
    /**
     * The date at which the server was started (ms since Java epoch).
     */
    protected long start_time = 0;

    // FIXME temporary hack
    protected SocketClientFactoryStats factoryStats = null;
    protected boolean init = false;

    /**
     * Update the current statistics with the given request.
     * @param client The client that processed the request.
     * @param request The request that has been processed.
     * @param nbytes The number of emited bytes in reply's body.
     * @param duration The processing time of the request.
     */

    protected synchronized void updateStatistics(Client client
                         , Request request, Reply reply
                         , int nbytes
                         , long duration) {
    if (reply.isDynamic()) {
        if ( duration > rd_max ) {
        rd_max = duration ;
        ud_max = request.getURL() ;
        }
        if ( duration < rd_min ) {
        rd_min = duration ;
        ud_min = request.getURL() ;
        }
        td_req   += duration ;
        td_bytes += nbytes ;
        td_hits++ ;
    } else {
        if ( duration > r_max ) {
        r_max = duration ;
        u_max = request.getURL() ;
        }
        if ( duration < r_min ) {
        r_min = duration ;
        u_min = request.getURL() ;
        }
        t_req   += duration ;
        t_bytes += nbytes ;
        t_hits++ ;
    }
    }

    /**
     * Get the current server load.
     * @return A number between <strong>1</strong> and <strong>4</strong>.
     */

    public int getServerLoad() {
    if (!init) {
        initFactoryStats();
    }
    if (factoryStats != null) {
        return factoryStats.getLoadAverage();
    }
    // return server.pool.loadavg;
    return -1;
    }

    /**
     * Get the number of free threads in the server.
     * @return The number of threads ready to server client requests.
     */

    public int getFreeThreadCount() {
    if (!init) {
        initFactoryStats();
    }
    if (factoryStats != null) {
        return factoryStats.getFreeConnectionsCount();
    }
        // return server.pool.freeCount;
    return -1;
    }

    /**
     * Get the number of idle threads in the server.
     * Idle threads are the threads ready to accept more requests on a given
     * connection.
     * @return The number of idle threads.
     */

    public int getIdleThreadCount() {
    if (!init) {
        initFactoryStats();
    }
    if (factoryStats != null) {
        return factoryStats.getIdleConnectionsCount();
    }
    // return server.pool.idleCount;
    return -1;
    }

    /**
     * Get the total number of client threads.
     * @return The total number of created threads.
     */

    public int getTotalThreadCount() {
    if (!init) {
        initFactoryStats();
    }
    if (factoryStats != null) {
        return factoryStats.getClientCount();
    }
    // return server.pool.clientCount;
    return -1;
    }

    /**
     * Get the total number of hits.
     * @return The total number of processed requests since the server is up.
     */

    public long getHitCount() {
    return (t_hits+td_hits) ;
    }

    /**
     * Get the total number of hits for dynamic content.
     * @return The total number of processed requests since the server is up.
     */

    public long getDynamicHitCount() {
    return td_hits ;
    }

    /**
     * Get the total number of hits for static content.
     * @return The total number of processed requests since the server is up.
     */

    public long getStaticHitCount() {
    return t_hits ;
    }

    /**
     * Get the mean request processing time.
     * @return The average time to process a request.
     */

    public long getMeanRequestTime() {
    return ((t_hits+td_hits) > 0) ? (t_req+td_req) / (t_hits+td_hits) : -1;
    }

    /**
     * Get the mean request processing time for dynamic content
     * @return The average time to process a request.
     */

    public long getMeanDynamicRequestTime() {
    return (td_hits > 0) ? (td_req / td_hits) : -1;
    }

    /**
     * Get the mean request processing time.
     * @return The average time to process a request.
     */

    public long getMeanStaticRequestTime() {
    return (t_hits > 0) ? (t_req / t_hits) : -1;
    }

    /**
     * Get the max request processing time.
     * @return A long giving the maximum duration for a request.
     */

    public long getMaxRequestTime() {
    return Math.max(r_max,rd_max) ;
    }

    /**
     * Get the max request processing time for dynamic content
     * @return A long giving the maximum duration for a request.
     */

    public long getMaxDynamicRequestTime() {
    return rd_max ;
    }
    /**
     * Get the max request processing time for static content
     * @return A long giving the maximum duration for a request.
     */

    public long getMaxStaticRequestTime() {
    return r_max ;
    }

    /**
     * Get the URL of the request that took the longest time to be processed.
     * @return A String giving the URL of the corresponding request, or
     *    <strong>null</strong> if no request has been processed yet.
     */

    public URL getMaxRequestURL() {
    return (r_max > rd_max) ? u_max : ud_max ;
    }

    /**
     * Get the min request processing time.
     * @return A long giving the minimum request processing time.
     */

    public long getMinRequestTime() {
    return Math.min(r_min, rd_min) ;
    }

    /**
     * Get the min request processing time for dynamic content
     * @return A long giving the minimum request processing time.
     */

    public long getMinDynamicRequestTime() {
    return rd_min ;
    }

    /**
     * Get the min request processing time.
     * @return A long giving the minimum request processing time.
     */

    public long getMinStaticRequestTime() {
    return r_min ;
    }
    /**
     * Get the URL of the request that took the smallest time to be processed.
     * @return A String giving the URL of the corresponding request, or
     *    <strong>null</strong> if no request has been processed yet.
     */

    public URL getMinRequestURL() {
    return (r_min < rd_min) ? u_min : ud_min ;
    }

    /**
     * Get the total number of bytes emited.
     * @return A long giving the total number of bytes emited by the server.
     *    This count that not include the reply's header, but only the reply's
     *    body (or <em>entity</em> size).
     */

    public long getEmittedBytes() {
    return t_bytes + td_bytes ;
    }

    /**
     * Get the time at which the server was started.
     * @return A number of milliseconds since java epoch, giving the date
     * at which the server started.
     */

    public long getStartTime() {
    return start_time;
    }

    /**
     * As we can't start the after the server socket (client factory)
     * we have to create when requested, which is always after the creation
     * of the whole server..
     */
    private void initFactoryStats() {
    if (server.factory instanceof SocketClientFactory) {
        SocketClientFactory f = (SocketClientFactory) server.factory;
        factoryStats = new SocketClientFactoryStats(f);
    }
    init = true;
    }

    httpdStatistics (httpd server) {
    this.server     = server ;
    this.start_time = System.currentTimeMillis();
    }

} 
```

# excel - 将单元格范围与 Excel 中的单元格位置进行比较时出错

> ID：11358058
> 
> 赞同：0
> 
> 时间：2012-07-06T07:52:21.547
> 
> 标签：excel

我在尝试计算一系列单元格时遇到了一点问题。

这是我的公式： =SUM(IF($E$2:$L$263= **O3** ,1,0)) 我得到#VALUE！错误。

这仅在我将其与数字值进行比较时才有效，例如： =SUM(IF($E$2:$L$263= **1** ,1,0))

有人可以告诉我我做错了什么或我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:09:57.740

而不是使用 SUM 和 IF 尝试使用 COUNTIF，它更有效并且不需要“数组条目”

`=COUNTIF($E$2:$L$263,O3)`

# heroku - 无法理解 Heroku 中的 ssh 系统

> ID：11358064
> 
> 赞同：9
> 
> 时间：2012-07-06T07:52:41.543
> 
> 标签：heroku, ssh

我无法获得管理 ssh 密钥的系统。

我想将应用程序推送到 Heroku，所以我尝试推送但出现错误。

这是我的日志

```
 $ git push heroku master
  !  Your key with fingerprint bf:f6:ed:14:9d:cd:52:a2:a3:16:b2:e9:b4:f2:bf:ba is not authorized to access warm-samurai-6574.
  fatal: The remote end hung up unexpectedly
  User@PK /e/examples (master)
  $ heroku keys:add
  Found existing public key: C:/Users/User/.ssh/id_rsa.pub
  Uploading SSH public key C:/Users/User/.ssh/id_rsa.pub
  !This key is already in use by another account. Each account must have a unique key.
  User@PK /e/examples (master)
  $ heroku keys
  === 1 key for denys.medynskyi@gmail.com
  ssh-rsa AAAAB3NzaC...etyxYh4Q== User@PK 
```

每个帐户都有自己的 ssh 密钥。所以我可以从任何计算机推送，因为 ssh 密钥正在推送到 heroku ？

heroku 上的每个应用程序都应该有自己的 ssh 密钥吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-06T08:18:31.840

基本上，您的计算机有一个 SSH 密钥。但是，它上面的 SSH 密钥与另一个 Heroku 帐户相关联（与您现在使用的不同）。最好的办法是生成一个全新的 SSH 密钥并将其添加到 Heroku。

只需在您的机器上创建一个新的 SSH 密钥并将其上传到 Heroku：

```
$ ssh-keygen 
```

当提示询问您时，请确保将其保存为“/Users/User/.ssh/new_id_rsa.pub”。

```
$ heroku keys:add /Users/User/.ssh/new_id_rsa.pub 
```

这应该允许您使用 Heroku。

至于您的其他问题：您可以从任何计算机推送到 Heroku，只要您通过`heroku keys:add`. 不，每个应用程序都不需要拥有自己的 SSH 密钥。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-22T19:21:37.413

您的计算机有一个 SSH 密钥，但该 SSH 密钥与另一个 Heroku 帐户相关联。如果您需要在同一台计算机上将两个帐户用于不同的应用程序，您应该在您的计算机上创建一个新的 SSH 密钥并将其上传到 Heroku：

```
$ ssh-keygen 
```

当提示询问您时，请确保将其保存为“/Users/User/.ssh/new_id_rsa.pub”。

```
$ heroku keys:add /Users/User/.ssh/new_id_rsa.pub 
```

然后，您需要将另一个主机添加到您的`~/.ssh/config`：

```
Host heroku-alt
HostName heroku.com
IdentityFile ~/.ssh/new_id_rsa 
```

然后`.git/config`在您的项目中更新以使用主机别名：

```
[remote "heroku"]
  url = git@heroku-alt:myapp.git
  fetch = +refs/heads/*:refs/remotes/heroku/* 
```

通过在特定项目的文件之间`heroku`进行选择，您可以管理哪些项目使用哪些凭据。`heroku-alt``.git/config`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T08:33:56.280

Heroku 要求 SSH 密钥对帐户是唯一的。两个帐户不能有相同的 ssh 密钥。

您可以执行其中一项来解决您的问题：

*   取消 ssh 密钥与其他 heroku 帐户的链接。您可能没有使用该帐户。这是阻力最小的路径。
*   删除现有密钥。生成一个新的 ssh 公钥/私钥对。优点是您将保留密钥的默认名称，因此您使用的任何应用程序都会自动找到它。
*   生成新的 ssh 公钥/私钥对并将其与现有密钥一起保存。缺点是，这两个键会有一个自定义名称。如果您最终经常使用这些密钥，则需要在本地设置 configure ssh 以使用这些而不是默认的 id_rsa。这确实需要一些工作，并且可能会涉及。

你选择哪一个真的取决于你。

如果您选择第三个选项，请参阅此答案[https://superuser.com/a/272613/25665](https://superuser.com/a/272613/25665)，了解如何在本地配置 ssh 以始终为 heroku 使用新密钥。如果您想知道为什么要为此烦恼，那么您将通过推送到 git 存储库来与 heroku 进行交互。这要求您使用 ssh 进行身份验证。默认情况下，它将使用较旧的键，您将无法推送。相反，它更容易告诉 ssh 在与交互时使用备用键`warm-samurai-6574.heroku.com`

以下链接包含有关创建新密钥的说明。您将需要接受默认名称或根据您选择的选项提供自定义名称。 [https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

**您可以从任何计算机推送吗？**

再次，这取决于。如果计算机有你的 ssh 密钥并且它被配置为使用你的 heroku 域的密钥，那么是的。相反，您可以选择不在那里复制您的密钥，而只需将那里的 ssh 密钥添加到您的 heroku 帐户。

**每个应用程序都需要唯一的密钥吗？**

不可以。您可以在一个 heroku 帐户下拥有多个应用程序。他们都将共享您上传到 Heroku 帐户的密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T09:01:42.037

让我看看我是否理解正确。大多数回复都同意我们用于 git 的 ssh 密钥可以识别计算机，因为他们提出的建议是在另一台计算机上重新生成密钥并将其上传到 Heroku。从我的角度来看，SSH 密钥应该将我标识为应用程序的开发人员，这就是造成混乱的原因。这意味着我必须随身携带我的私钥和公钥，并在我使用的任何计算机上使用它，这可以通过 pendrive 或类似的东西来完成。所以我的建议是：随身携带你的公钥和私钥，把它们放在你想用来推送到 Heroku 的计算机中，并用密码保护你的私钥。

# java - Spring REST MultipartFile 文件始终为空

> ID：11358069
> 
> 赞同：4
> 
> 时间：2012-07-06T07:52:55.433
> 
> 标签：java, spring, model-view-controller, rest, file-upload

我正在尝试使用 REST 服务使用 html 和 Spring 3.0.6 设置简单的上传。我已经按照在线教程进行操作，但 MultipartFile 参数始终为空。这是配置和代码：

应用程序上下文.xml：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
  <property name="maxUploadSize" value="2000000"/>
</bean> 
```

pom.xml：

```
<dependency>
  <groupId>commons-io</groupId>
  <artifactId>commons-io</artifactId>
  <version>2.1</version>
</dependency>
<dependency>
  <groupId>commons-fileupload</groupId>
  <artifactId>commons-fileupload</artifactId>
  <version>1.2.2</version>
</dependency> 
```

html:

```
<html>
    <head>
        <title>Upload a file please</title>
    </head>
    <body>
        <h1>Please upload a file</h1>
        <form method="post" action="/site/restServices/artworkUpload/" enctype="multipart/form-data">
            <input type="text" name="name"/>
            <input type="file" name="file"/>
            <input type="submit"/>
        </form>
    </body>
</html> 
```

休息控制器：

```
@POST
@Path("/artworkUpload")
public String uploadFile(@RequestParam("name") String name,
    @RequestParam("file") MultipartFile file) {
    try {
        if (!file.isEmpty()) {
            byte[] bytes = file.getBytes();
            // store the bytes somewhere
            return "redirect:uploadSuccess";
        } else {
            return "redirect:uploadFailure";
        }
    }
    catch (Exception ex)
    {

    }
    return null;
} 
```

我从 Spring 的教程中复制了示例，但无论我更改什么，文件参数始终为空。“名称”将在文本框中具有值，但文件将为空。

我也尝试过使用 Jersey，我收到了文件的 InputStream，但 FormDataContentDisposition 为空，所以我无法确定文件类型。

这也在 Jetty 上运行。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:05:06.210

我记得我通过将额外的库添加到我的构建路径来解决相同的问题：

```
commons-fileupload-1.2.2.jar
commons-io-2.1.jar 
```

我希望这能帮到您。

**编辑。**

好的。我终于有时间解决这个问题了。首先，为什么要使用标准的 java 特性来构建 rest 服务（注解 @POST、@Path）？因为对于 Spring，最好将 Spring MVC 期货用于 REST。互联网上有很多关于此的信息。这是 [参考文档](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18.html)中的特殊部分。这也是[IBM 网站上的好文章](http://www.ibm.com/developerworks/web/library/wa-spring3webserv/)。[在Spring in Action (last 3-d edition) 中](http://www.manning.com/walls4/)也很好地描述了如何使用 Spring MVC 构建 REST 控制器。

这里我如何实现简单的文件上传功能：

休息控制器：

```
@Controller
@RequestMapping("/rest/files")
public class FilesController {
        ...

        @RequestMapping(value="/rest/files", method=RequestMethod.POST)
        public String uploadFile(@RequestParam("name") String name,
                @RequestParam("file") MultipartFile file) {
            try {
                if (!file.isEmpty()) {
                    byte[] bytes = file.getBytes();
                    // store the bytes somewhere
                    return "redirect:uploadSuccess";
                } else {
                    return "redirect:uploadFailure";
                }
            }
            catch (Exception ex)
            {

            }
            return "/testFileDownload";
        }
} 
```

html:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Test file upload</title>
</head>
<body>
    <h1>Please upload a file</h1>
    <form method="post" action="rest/files" enctype="multipart/form-data">
        <input type="text" name="name" /> <input type="file" name="file" /> <input
            type="submit" />
    </form>
</body>
</html> 
```

在 dispatcher-servlet.xml 中查看解析器配置：

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="mediaTypes">
            <map>
                <entry key="file" value="multipart/form-data"/>
                <entry key="html" value="text/html"/>
            </map>
        </property>
        <property name="viewResolvers">
            <list>
                <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"/>
                <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                    <property name="prefix" value="/WEB-INF/views/"/>
                    <property name="suffix" value=".jsp"/>
                </bean>
            </list>
        </property>
    </bean> 
```

我希望我没有浪费我的时间，这对你来说仍然是必要的。)

**编辑 2**

这是[一个非常好的教程](http://www.baeldung.com/rest-with-spring-series/)，其中描述了如何使用 Spring 3.1 构建 RESTful Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T09:43:40.583

它帮助我连接了这个库：

```
 <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency> 
```

所有库：

```
<dependencies>
    <!-- Spring 3 MVC  -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <!-- Apache Commons file upload  -->
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.2</version>
    </dependency>
    <!-- Apache Commons IO -->
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <!-- JSTL for c: tag -->
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
</dependencies> 
```

见[http://viralpatel.net/blogs/spring-mvc-multiple-file-upload-example/](http://viralpatel.net/blogs/spring-mvc-multiple-file-upload-example/)

# ios - 删除 sqlite 数据库并从包中替换为默认值

> ID：11358070
> 
> 赞同：1
> 
> 时间：2012-07-06T07:52:55.753
> 
> 标签：ios, database, xcode, sqlite, replace

我使用 Xcode 4.3.3 中的 Master-Detail-Application 示例来开发数据查看器。该应用程序正在下载多个文件并将每个文件附加到表格视图中的一个单元格。一切正常。但是如果用户再次开始下载，我需要从数据库和 tableview 中删除所有以前的数据。我最终完成了以下步骤：

1.  从协调器中删除旧商店
2.  删除旧的 sqlite 数据库文件
3.  将默认（空）sqlite db 文件从 bundle 目录复制到 doc 目录
4.  更新商店协调员
5.  更新表格视图。

但现在的问题是，如果我这样做，新数据不会写入 sqlite 文件。请，有人可以检查我的代码。以下代码位于 MasterViewController.m ！我已经为此工作了好几天，我完全被困住了！！！

谢谢！

```
NSLog(@"Delete existing database file and copy default from bundle dir!");

NSFileManager* fileManager = [[NSFileManager alloc] init];
fileManager = [[NSFileManager alloc] init];

NSError *error = nil;

//get the documents directory:    

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

// create database path documents dir

NSString *databasepath = [documentsDirectory stringByAppendingPathComponent:@"MyDatabase.sqlite"];
NSLog(@"Destination Database Path = %@", databasepath);

// create database path bundle dir

NSString *resourceDBFolderPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"MyDatabase.sqlite"];
NSLog(@"Recource Database Path = %@", resourceDBFolderPath);

// remove old store from coordinator
error = nil;

NSManagedObjectModel *managedObjectModel;

NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"MyDatabase" withExtension:@"momd"];
managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

// Returns the persistent store coordinator for the application.
// If the coordinator doesn't already exist, it is created and the application's store added to it.
NSPersistentStoreCoordinator *persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]];

NSURL *applicationDocumentsDirectory = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];

NSURL *storeURL = [applicationDocumentsDirectory URLByAppendingPathComponent:@"MyDatabase.sqlite"];    

if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) 
    if (error != nil){

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    }    

NSPersistentStore *persistentStore = [[persistentStoreCoordinator persistentStores] objectAtIndex:0];
[persistentStoreCoordinator removePersistentStore:persistentStore error:&error];
if (error) 
    if (error != nil){
        NSLog(@"error removing persistent store %@ %@", error, [error userInfo]);
    }

// Remove old database file

[[NSFileManager defaultManager] removeItemAtPath: [documentsDirectory stringByAppendingPathComponent: @"MyDatabase.sqlite"] error: &error];
if (error != nil){
    NSLog(@"delete Database status: %@", [error localizedDescription]);
}

// copy default empty database file into documents dir

[fileManager copyItemAtPath: resourceDBFolderPath toPath: databasepath           
                      error: &error];
if (error != nil){
    NSLog(@"copy default Database status: %@", [error localizedDescription]);
} 

// then update storecoordinator

// add clean store file back by adding a new persistent store with the same store URL
if (![persistentStoreCoordinator addPersistentStoreWithType: NSSQLiteStoreType 
                                              configuration: nil 
                                                        URL: storeURL 
                                                    options: nil 
                                                      error: &error]) {
    NSLog(@"failed to add db file, error %@, %@", error, [error userInfo]);
}

NSLog(@"Database replacement end!"); 
```

# java - 得到错误 org.springframework.beans.BeanInstantiationException：

> ID：11358074
> 
> 赞同：0
> 
> 时间：2012-07-06T07:53:06.533
> 
> 标签：java, spring

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'PNLResultDAOImpl' defined in file [C:\EclipseWS1\SpringJDBCExample\target\classes\com\synechron\tom\pnl\dao\impl\PNLResultDAOImpl.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.synechron.tom.pnl.dao.impl.PNLResultDAOImpl]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:965)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 24 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.synechron.tom.pnl.dao.impl.PNLResultDAOImpl]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:141)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:74)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:958) 
```

你能帮我知道为什么会发生这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:56:06.193

> 引起：org.springframework.beans.BeanInstantiationException：无法实例化bean类[com.synechron.tom.pnl.dao.impl.PNLResultDAOImpl]：构造函数抛出异常；嵌套异常是 java.lang.NullPointerException

检查您的构造函数的类`com.synechron.tom.pnl.dao.impl.PNLResultDAOImpl`，它抛出 NullPointerException 所以 spring 无法初始化该 bean

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-22T15:03:22.143

如果您在 PNLResultDAOImpl 类中使用默认构造函数，并且从中调用 pnlBucketDAO.find(pnlBucket) 方法，则可以在默认构造函数中使用 @Qualifier 为 pnlBucketDAO 注入 bean。

例如。

```
@Autowired(required = true)
public PNLResultDAOImpl(@Qualifier("pnlBucketDAO") BasketBallGameModel model) {
       pnlBucketDTDIndex = pnlBucketDAO.find(pnlBucket);
} 
```

# facebook - 在脸书上分享图片

> ID：11358080
> 
> 赞同：1
> 
> 时间：2012-07-06T07:53:30.500
> 
> 标签：facebook, api, facebook-graph-api

我有一个包含 10 张图片的页面（例如），我希望能够单独分享它们。那可能吗？我正在查看我找到的几个示例，但似乎每个示例一次只共享一张图像......就像这样：

```
<meta property="og:image"content="http://site.com/path/sharedimage.png" /> 
```

我认为这段代码是针对单个图像的，但是如果我有 10 个图像呢？

谢谢

编辑：我怎么能看到每张图片有多少喜欢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:46:27.253

该`og:image`属性实际上并不共享此图像，而是在您的页面被共享时用作“预览”的图像。

如果您想在此位置包含所有 10 个图像，您可能会在服务器端的 10 个图像之间随机化此属性。

# git - 克隆 repo 时清空 Git 子模块文件夹

> ID：11358082
> 
> 赞同：167
> 
> 时间：2012-07-06T07:53:38.223
> 
> 标签：git, version-control, git-submodules, git-clone

我在[https://github.com/aikiframework/json](https://github.com/aikiframework/json)托管了一个仓库。在我的本地副本上，我使用命令添加了一个子模块

```
git submodule add git@github.com:jcubic/json-rpc.git json-rpc 
```

然后我做了一个commit和push，改动出现在了GitHub上（我可以点击）。但是当我克隆回购

```
git clone https://github.com/aikiframework/json.git 
```

子模块文件夹 json-rpc 为空。

我在这里想念什么？我是不是忘记了什么？为什么那个文件夹是空的？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2012-07-06T07:56:10.187

好的，我找到了，需要`--recursive`在克隆 repo 时添加。

所以克隆命令最终为：

```
git clone https://github.com/aikiframework/json.git --recursive 
```

请注意，如果您忘记了`--recursive`您可以执行的标志（感谢@Amber）：

```
git submodule update --init 
```

# clojure - La Clojure - 'Meta' 在 Windows 环境中绑定到什么键？

> ID：11358089
> 
> 赞同：1
> 
> 时间：2012-07-06T07:54:04.123
> 
> 标签：clojure, intellij-idea, la-clojure

在 IntelliJ IDEA 的 La Clojure 插件中，“Meta”在 Windows 环境中绑定到什么键？

这是它发生位置的屏幕截图：

![在此处输入图像描述](../Images/3ce233ec63b94832f7dff2c924fffbdf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:15:18.230

Windows 中没有“Meta”键。您将需要重新映射它们。slurp 功能也可以正常工作，但在 Windows 中，它具有与“切换书签 9”相同的快捷方式，并且由于某些奇怪的原因 Control+Shift+0 不起作用，所以再次重新映射它们。

```
(map vector (map <caret>map vector)) 
```

向后调用 slurp

```
(map (vector map <caret>map vector)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T22:49:05.353

您可以通过以下方式设置（通用）键映射：**File->Settings->Keymap** 选择您想要的**Keymap**（默认应该可以正常工作），应用并且一切都应该像以前一样再次工作......

# visual-studio - TFS 2012 事件通知

> ID：11358092
> 
> 赞同：0
> 
> 时间：2012-07-06T07:54:09.753
> 
> 标签：visual-studio, tfs

我想处理一个TFS的事件，比如WorkItemChangeEvent。

我编写了一个将描述写入事件日志的类库。然后我将它添加到 TFS 的 Plugins 文件夹下。当事件发生时，事件日志中没有关于它的描述。

这是代码： http: [//geekswithblogs.net/jakob/archive/2010/10/27/devleoping-and-debugging-server-side-event-handlers-in-tfs-2010.aspx](http://geekswithblogs.net/jakob/archive/2010/10/27/devleoping-and-debugging-server-side-event-handlers-in-tfs-2010.aspx)

我正在使用 TFS 2012 和 Visual Studio 2011 Beta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:22:17.240

`tbl_eventSubscription`您可以在 `tfs_ProjectCollectionName`数据库中的表中搜索事件通知。

为了检查数据是否保存在数据库中，您还可以检查`Server Manager\Diagnostics\Event Viewer\Custom Views\Server Roles\Administrative Events`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:06:38.780

看看我在此处发布的[这个答案](https://stackoverflow.com/questions/8338230/tfs-wont-send-out-alert-mails-anymore)，以帮助调试 TFS 事件。

* * *

我在这里复制了详细信息：

> [您可以通过将NotificationJobLogLevel 设置为 2](http://healmyscm.wordpress.com/2011/06/24/how-to-set-tfss-notification-job-log-level/)，然后查询数据库中的[JobHistory](http://healmyscm.wordpress.com/2011/06/24/how-to-check-tfs-event-delivery-status-for-the-web-service/)表来获得一些好的错误信息。这*应该*向您显示正在发生的任何错误。

# swing - Clojure 找不到方法 JComboBox.addItemListener

> ID：11358093
> 
> 赞同：2
> 
> 时间：2012-07-06T07:54:13.123
> 
> 标签：swing, clojure

希望这只是一个愚蠢的错误，但我看不到。

```
; OK
=> (filter (fn [x] (= "addItemListener" (.getName x))) (.getMethods javax.swing.JComboBox))
(#<Method public void javax.swing.JComboBox.addItemListener(java.awt.event.ItemListener)>)

; Error
=> (let [combobox (javax.swing.JComboBox. (java.util.Vector. ['a 'b 'c]))]
       (.addItemListener combobox
         (proxy [java.awt.event.ItemListener] []
           (itemStateChanged [item-event] (println (str "selection changed to " (.getSelectedItem combobox)))))
         combobox))
java.lang.IllegalArgumentException: No matching method found: addItemListener for class javax.swing.JComboBox (NO_SOURCE_FILE:0) 
```

为什么clojure找不到`addItemListener`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:12:22.387

您第二次将组合框传递给 addItemListener 方法，您可能希望从 let 表单中返回它。

这应该有效：

```
(let [combobox (javax.swing.JComboBox. (java.util.Vector. ['a 'b 'c]))]
  (.addItemListener combobox
                    (proxy [java.awt.event.ItemListener] []
                      (itemStateChanged [item-event]
                        (println (str "selection changed to "
                                      (.getSelectedItem combobox))))))
  combobox) 
```

# jquery-ui - 如何在 jQuery UI 中获取与可拖放对象重叠的可拖动对象的百分比/位置？

> ID：11358095
> 
> 赞同：1
> 
> 时间：2012-07-06T07:54:15.607
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我正在使用 jQuery UI 使一些元素可拖放。就像一个可排序的，我试图在拖放时将拖动的元素左/右/上/下排列到悬停的元素。另外，我想在悬停另一个元素时显示一个指示器，该元素将被放置到哪里，当它被放置时*。*

行为应该是，如果光标悬停在元素的左三分之一处，则元素将被悬停在悬停元素的左侧。如果光标位于悬停元素的右三分之一上方，则应将其放在悬停元素的右侧。在 script.aculo.us 中，有一个名为“overlap”的参数，它以悬停元素的百分比表示鼠标重叠。

jQuery UI 中是否有类似的东西，或者如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:54:26.407

好的，这是一种方法。基本上，这个想法是在一个可拖动对象被拖到它上面时读取一个可放置对象的偏移量、宽度和高度。当一个元素被拖动而另一个元素被悬停时，重叠是使用鼠标位置、偏移量和元素的尺寸计算的（从鼠标位置中减去偏移量并与可放置的尺寸进行比较）：

```
$(function() {

    var offx, offy, w, h,
        isOverEl = false;

    $( ".component" ).draggable({
       drag: function(event, ui) {

         if(!isOverEl) return;

         console.log(
           ((event.pageY-offy)/h)*100, // returns vertical overlap in %
           ((event.pageX-offx)/w)*100  //returns horizontal overlap in %
         )

       }
    });

    $( ".component" ).droppable({

    over: function(event, ui) {

      var $this  = $(this),
          offset = $this.offset();

      offx = offset.left;
      offy = offset.top;

      w = $this.outerWidth();
      h = $this.outerHeight();

      isOverEl = true;

    },

    out: function(event, ui) {
      isOverEl = false;
    }

  });

}); 
```

# android - 操作栏如何检测菜单按钮必须显示的位置

> ID：11358097
> 
> 赞同：0
> 
> 时间：2012-07-06T07:54:25.130
> 
> 标签：android, menu, android-actionbar

如果带有操作栏的应用程序在平板电脑上运行 - 右上角有菜单按钮。但是在智能手机上这个按钮不显示，因为设备有一个硬件菜单按钮，我想。我需要在我的代码中实现类似的行为以仅在平板电脑上显示我的自定义菜单按钮，而不在智能手机上显示它？是真的？我不想使用操作栏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:42:02.187

您可以检查设备是平板电脑还是智能手机，并且仅当设备是平板电脑时才膨胀选项菜单。

假设您有一个`isTablet()`在设备是平板电脑时返回 true 的方法。然后，仅当返回 true时，您才需要覆盖`onCreateOptionMenu()`并膨胀菜单。`isTablet()`

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    if(isTablet()){
        menuInflater.inflate(R.menu.menu_tablet, menu);
        return super.onCreateOptionsMenu(menu);
    }else{
        // do nothing
        return true
    }    
} 
```

如何确定设备是平板还是手机，你需要挖掘这篇文章：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# android - 列表视图中的按钮

> ID：11358098
> 
> 赞同：0
> 
> 时间：2012-07-06T07:54:44.330
> 
> 标签：android

我正在使用列表视图。我在该列表视图中添加了一个 Textview 和按钮。如何知道单击了哪个按钮。当我单击该按钮时，我需要获取相关文本？

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:21:13.833

请参阅下面的示例代码...您从中得到想法..

这里 list_v 是列表视图

```
list_v.setAdapter(new ListViewAdapter_test(
                                this)); 
```

* * *

```
public class ListViewAdapter_test extends BaseAdapter {

        private LayoutInflater mInflater;

        public ListViewAdapter_test(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return a_product_id.size();
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub

            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub

            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.scan_row1, null);
                holder = new ListContent();

                holder.name = (TextView) v.findViewById(R.id.sc_textname);

                holder.total_rate = (Button) v.findViewById(R.id.button1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.name.setId(position);

            holder.total_rate.setId(position);

            holder.total_rate.setOnClickListener(mOnTitleClickListener3);

            try {

                holder.name.setText("" + a_product_name.get(position));

                holder.total_rate.setText("Read " + a_totreviews.get(position)
                        + " reviews");

            } catch (Exception e) {
                // TODO: handle exception

            }

            return v;
        }
    }

    static class ListContent {

        TextView name;

        Button total_rate;

    } 
```

* * *

```
public OnClickListener mOnTitleClickListener3 = new OnClickListener() {
        public void onClick(View v) {
            final int position = list_v
                    .getPositionForView((View) v.getParent());

            /** do your code here whatever you want */

        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:02:13.047

如果您不想使用列表项单击并且想要添加按钮，当您构建单元格并添加按钮时，您可以使用 button.setTag(int) 为其设置标签，您可以将标签设置为单元格的位置，因此在按钮的单击侦听器中，您可以检索使用 button.getTag() 单击的按钮的位置，如果您有一个包含文本行的数据结构，则可以检索文本

# regex - R正则表达式：在脚本中提取扬声器

> ID：11358100
> 
> 赞同：2
> 
> 时间：2012-07-06T07:54:55.030
> 
> 标签：regex, r, text-mining

我想使用 R 从脚本中提取扬声器，格式如下例所示：

“场景 6：二爷：不，我的大人，别管他了；让他为所欲为。大爷：如果大人发现他不是藏身之处，请不要再尊重我。二爷：我的生命，大人，一个泡沫。 伯特伦：你认为我对他有这么大的欺骗吗？ 第二大人：相信它，大人，我自己直接知道，没有任何恶意，但说他是我的亲戚，他是一个最出名的懦夫，一个无穷无尽的骗子，一个按时不守诺言的人，一个没有值得大人赏识的好品质的主人。”

在这个例子中，我想提取：（“Second Lord”，“First Lord”，“Second Lord”，“BERTRAM”，“Second Lord”）。规则很明显：它是位于句子末尾和半列之间的一组词。

我怎么能用 R 写这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:02:43.203

也许是这样的：

```
library(stringr)  
body <- "Scene 6: Second Lord: Nay, good my lord, put him to't; let him have his way. First Lord: If your lordship find him not a hilding, hold me no more in your respect. Second Lord: On my life, my lord, a bubble. BERTRAM: Do you think I am so far deceived in him? Second Lord: Believe it, my lord, in mine own direct knowledge, without any malice, but to speak of him as my kinsman, he's a most notable coward, an infinite and endless liar, an hourly promise-breaker, the owner of no one good quality worthy your lordship's entertainment." 
p <- str_extract_all(body, "[:.?] [A-z ]*:")

# and get rid of extra signs
p <- str_replace_all(p[[1]], "[?:.]", "")
# strip white spaces
p <- str_trim(p)
p
"Second Lord" "First Lord"  "Second Lord" "BERTRAM"     "Second Lord"

# unique players
unique(p)
[1] "Second Lord" "First Lord"  "BERTRAM" 
```

## 正则表达式的解释：（不完美）

`str_extract_all(body, "[:.?] [A-z ]*:")`匹配以`:`or`.`或`?`( `[:.?]`) 开头，后跟空格。任何字符和空格都会匹配到下一个`:`。

## 获取位置

您可以使用`str_locate_all`相同的正则表达式：

```
str_locate_all(body, "[:.?] [A-z ]*:") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:37:55.107

**gsubfn/strapplyc**

试试这个`x`输入字符串在哪里。这里`strapplyc`返回括号内匹配的部分：

```
> library(gsubfn)
> strapplyc(x, "[.?:] *([^:]+):", simplify = c)
[1] "Second Lord" "First Lord"  "Second Lord" "BERTRAM"     "Second Lord" 
```

**聚合表达式**

这是第二种方法。它不使用外部包。这里我们计算开始和结束位置（`start.pos`和`end.pos`），然后提取出它们定义的字符串：

```
> pos <- gregexpr("[.?:] [^:]+:", x)[[1]]
> start.pos <- pos + 2
> end.pos <- start.pos + attr(pos, "match.length") - 4
> substring(x, start.pos, end.pos)
[1] "Second Lord" "First Lord"  "Second Lord" "BERTRAM"     "Second Lord" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T12:16:32.567

至少在这种情况下，更好的解决方案是以更结构化的形式搜索文本。挖掘结构化文档几乎总是比非结构化文档容易。由于来源是莎士比亚，因此互联网上流传着许多副本。

```
script_url <- "http://www.opensourceshakespeare.org/views/plays/play_view.php?WorkID=allswell&Act=3&Scene=6&Scope=scene"
doc <- htmlParse(script_url)
character_links <- xpathApply(doc, '//li[@class="playtext"]/strong/a')
characters <- unique(sapply(character_links, xmlValue))
#[1] "Second Lord" "First Lord"  "Bertram"     "Parolles" 
```

请注意，您使用的文本版本有很大的不同。开源莎士比亚非常好，因为 html 页面结构良好并包含类。另一方面，Bartleby 页面不是。让我们再次运行分析：

```
script_url2 <- "http://www.bartleby.com/70/2236.html"
doc2 <- htmlParse(script_url2)
tbl <- xpathApply(doc2, '//table[@width="100%"]')[[1]]
italics <- xpathApply(tbl, '//tr/td/i')
characters2 <- unique(sapply(italics, xmlValue))
#[1] "First Lord." "Sec. Lord."  "Ber."        "Par."        "hic jacet."  "Exit."      
#[7] "Ber"         "Exeunt." 
```

在这种情况下，您无法以编程方式区分角色、舞台方向（无需编制可能的舞台方向列表并忽略它们）和强调的语音。明智地选择您的文本来源！

# facebook - 自定义 og:type 未出现在 Facebook 对象调试器中

> ID：11358103
> 
> 赞同：0
> 
> 时间：2012-07-06T07:55:08.880
> 
> 标签：facebook, facebook-opengraph

我正在定义一个自定义 og:type。例如“监视事件：事件”。在包含此“事件”对象的 html 页面中，我定义了元标记，元属性 =“og:type”内容 =“watchevent:event”

但是一旦我使用 Facebook 对象调试器调试了这个 html 页面，它就会将 og:type 属性显示为“文章”。

为什么自定义 og:type 未显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:56:21.973

也许您有缓存问题？

[尝试在调试器](http://developers.facebook.com/tools/debug)中添加“刷新”参数：

http://www.yourdomain.com?fbrefresh=AnyString

# openssl - 创建证书以签署程序但文件以应用信任

> ID：11358104
> 
> 赞同：1
> 
> 时间：2012-07-06T07:55:09.180
> 
> 标签：openssl, sign

我通过 openssl 创建了一个 pfx

```
openssl genrsa -out key8192.key 8192

openssl req -new -key key8192.key –out KKROOT.crt 
```

[输入一些东西]

```
openssl pkcs12 -export -out KKROOT.pfx -inkey key8192.key -in KKROOT.crt 
```

然后将 KKROOT.pfx 安装到当前用户的个人

我使用此证书通过签名工具对程序进行签名。

将证书安装到 Root 信任中，但它实际上不是信任并显示：尚未观察到证书基本约束扩展。此证书颁发机构不允许颁发证书或不能用作最终实体证书。（在文件属性->签名->详细信息->查看证书中）

接下来我能做什么？

欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T00:52:05.807

解决了！

```
openssl ca -in cs.csr -out cs.crt -cert KKROOT.crt -keyfile key8192.key -config  C:\openssl\ssl\openssl.cnf

openssl req -new -key key8192.key -out cs.csr -config  C:\openssl\ssl\openssl.cnf 
```

没关系。

# javascript - jquery 两个替换函数

> ID：11358105
> 
> 赞同：0
> 
> 时间：2012-07-06T07:55:13.400
> 
> 标签：javascript, jquery, replace

我不确定为什么在这个小小提琴示例中没有删除项目计数括号。

编辑：这是我查看工作答案的结果。

```
$.fn.itemcount = function(){
     var text = $(this).text();
     text = text.replace("(","").replace(")","");
     $(this).text(text);
};

$("#prc").itemcount();

$.fn.sidecartcost = function(){
  var el = $(this);
  var text = $(this).text();
  text = text.replace("Your sub total is", "").replace(". ", "");
  $(this).text(text);
};

$('.SideCartCost').sidecartcost();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div id="prc">(7 Items)</div>
<div class="blank">Woo</div>
<div class="SideCartCost">Your sub total is $300.03\. </div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:56:36.400

您没有像这样替换 div 的 html/文本[http://jsfiddle.net/x5jeL/1/](http://jsfiddle.net/x5jeL/1/)

# java - 从 Grails 应用程序执行命令

> ID：11358109
> 
> 赞同：6
> 
> 时间：2012-07-06T07:55:24.837
> 
> 标签：java, grails, groovy, process

我想`svn delete`从我的 Grails 应用程序中执行一个。我在 Grails 控制台中测试了以下两项：

```
"svn delete /usr/share/mydir".execute()

Runtime.getRuntime().exec("svn delete /usr/share/mydir") 
```

在这两种情况下，`java.lang.Process`都会返回一个 的实例，但不会执行命令（`/usr/share/mydir`不会删除）。

此行为仅在应用程序在 Linux (Ubuntu) 上运行时发生。如果我在 Windows 上运行它，该命令会被执行。

## 更新

按照 Tim 在评论中的建议，我更改了命令，以便它捕获进程输出：

```
def process = "svn delete /usr/share/mydir".execute()
def out = new StringBuilder()
process.waitForProcessOutput(out, new StringBuilder())

println "$out" 
```

我现在看到它失败的原因是：

> 错误svn：无法打开文件'/usr/share/mydir/.svn/lock'：权限被拒绝

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:50:56.523

The below code works fine for me on CentOS.

```
 def scriptCom="/folderlocation/shellscript.sh"
    println "[[Running $scriptCom]]"
    def proc = scriptCom.execute()

    def oneMinute = 60000
    proc.waitForOrKill(oneMinute)

    if(proc.exitValue()!=0){
        println "[[return code: ${proc.exitValue()}]]"
        println "[[stderr: ${proc.err.text}]]"
        return null
    }else{
        println "[[stdout:$revisionid]]"
        return proc.in.text.readLines()
    } 
```

# php - Php Implode 无法使用我的代码

> ID：11358120
> 
> 赞同：-4
> 
> 时间：2012-07-06T07:55:55.300
> 
> 标签：php

我有一个数组，我想通过 implode 函数将此数组转换为逗号分隔的字符串，但这不起作用。我的代码如下。

```
<?php foreach ($article['hashtags'] as $hashtags) { ?>
   <?php $hastagg=mysql_real_escape_string(implode(',',$hashtags)) ?>
   <a><?php echo $hastagg; ?></a>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:00:02.327

你有没有试过这个：

```
<?php 
    $hastagg = htmlentities(implode(',' ,$article['hashtags'])) ;
    echo '<a>'.$hastagg.'</a>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:58:44.870

我不知道`$article`数组的结构。但我有一种感觉`foreach`是不必要的：

```
$hashtagg = implode(',', $article['hashtags']); 
```

你为什么要使用`mysql_real_escape_string`输出？您可以使用 htmlspecialchars 或其他一些功能。

# android - 如何在android中处理复选框ischecked和unchecked事件

> ID：11358121
> 
> 赞同：1
> 
> 时间：2012-07-06T07:56:02.327
> 
> 标签：android, checkbox

我是android的新手。我做了一个简单的数学应用程序。我使用复选框选择正确选项，但问题在这里答案选项不仅是一个而且是二，三个意味着多选所以我使用复选框

```
chkOption.setOnCheckedChangeListener(this); 
```

事件并尝试处理此问题。并将选择值存储在一个 Arraylist 中。但是当我选择选项时，值会添加到 arrayList 中，但是当我取消选中（Diselect）时，事件也会发生并且值会添加到 arraylist 中。我的代码在下面

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {   
        CheckBox chk=(CheckBox) buttonView;
        if(chk.isChecked())
        {
            forMetchCheckBox.add(String.valueOf(chk.getText()));            
        }
    } 
```

forMetchCheckbow 是我的 String ArrayList 。所以我能做什么？如何处理这个问题。如果任何用户取消选择该选项，那么复选框选择值将从 ArrayList 中删除。可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:06:15.210

似乎您有多个复选框，并且您正在为每个复选框设置全局侦听器。因此，在这种情况下，您还需要识别特定复选框的事件。

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {   
        int id = buttonView.getId();
        if(id == R.id.chk)
        {
          if(chk.isChecked()){
               forMetchCheckBox.add(String.valueOf(chk.getText()));
            }
           else{
               forMetchCheckBox.remove(String.valueOf(chk.getText()));
           }
        }
        else if(id == R.id.chk1){
           ....
        }
    } 
```

等等，这将使您的听众工作完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:58:47.377

有什么问题是你的 if 条件。它应该是：

```
if( isChecked ) 
```

并不是

```
if( chk.isChecked() ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:11:01.940

```
chk.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub

                      if(isChecked){
                          chetimeslot = (String)chk.getTag();
                            checkbox_timeslot.add(chetimeslot);

                        }
                       else{
                           chetimeslot = (String)chk.getTag();
                            checkbox_timeslot.remove(chetimeslot);

                       }

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-15T11:36:58.757

**一次选择最多 5 个复选框或使用 CheckBox 在自定义列表视图中计数选中和未选中的复选框**

```
 package com.test;

 import java.util.ArrayList;
 import android.app.Activity;
 import android.app.AlertDialog;
 import android.app.ListActivity;
 import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class ListViewCheckboxesActivity extends ListActivity {

    AlertDialog alertdialog = null;
    int i1, i2, i3 = 0;
    Country rowcheck;
    MyCustomAdapter dataAdapter = null;
    ListView listView = null;
    int k = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fmain);

        // Generate list View from ArrayList
        displayListView();
        checkButtonClick();

    }

    private void displayListView() {

        // Array list of countries Equipments
        ArrayList<Country> rowcheckList = new ArrayList<Country>();
        Country rowcheck = new Country("", "Hex Bolts", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Hex Cap Screw", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Round Head Bolt", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Slotted Head Hex Bolt", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Socket Cap Screw", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Sockets", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Square Head Bolt", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Carriage Bolt", false);
        rowcheckList.add(rowcheck);
        rowcheck = new Country("", "Plow Bolt", false);
        rowcheckList.add(rowcheck);

        rowcheck = new Country("", "Struts Clamp", false);
        rowcheckList.add(rowcheck);

        listView = getListView();

        dataAdapter = new MyCustomAdapter(this, R.layout.rowcheck_info,
                rowcheckList);

        // Assign adapter to ListView
        listView.setAdapter(dataAdapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View view,
                    int position, long id) {
                // When clicked, show a toast with the TextView text
                Country rowcheck = (Country) parent.getItemAtPosition(position);

            }

        });

    }

    private class MyCustomAdapter extends ArrayAdapter<Country> {
        private ArrayList<Country> rowcheckList;

        public MyCustomAdapter(Context context, int textViewResourceId,
                ArrayList<Country> rowcheckList) {
            super(context, textViewResourceId, rowcheckList);
            this.rowcheckList = new ArrayList<Country>();
            this.rowcheckList.addAll(rowcheckList);
        }

        private class ViewHolder {
            TextView code;
            CheckBox name;
        }

        @Override
  public View getView(int position, View convertView, ViewGroup parent) {

   ViewHolder holder = null;
   Log.v("ConvertView", String.valueOf(position));

   if (convertView == null) 
   {
   LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   convertView = vi.inflate(R.layout.rowcheck_info, null);

   holder = new ViewHolder();
   holder.code = (TextView) convertView.findViewById(R.id.code);
   holder.name = (CheckBox) convertView.findViewById(R.id.checkBox1);
   convertView.setTag(holder);

    holder.name.setOnClickListener( new View.OnClickListener()
    { 
     public void onClick(View v) 
     { 
      CheckBox cb = (CheckBox) v ; 
      Country rowcheck = (Country) cb.getTag(); 

      //To check maximum 5 Selection
      if(k>5)
      {

          if(!cb.isChecked())
          {

                  rowcheck.selected=true;
                  System.out.println(k--);

           }

          else
          {
              System.out.println("if block in-----");
              cb.setChecked(false);
              Toast.makeText(getApplicationContext(), "Maximum Selection", Toast.LENGTH_LONG).show();
          }

      }

      else
      {

          System.out.println("else block in-----");

          if(!cb.isChecked())
          {

                  rowcheck.selected=true;
                  System.out.println(k--);

           }

          else if(cb.isChecked())
          {

                     rowcheck.selected=false;
                     System.out.println(k++);

          }

      }

     Toast.makeText(getApplicationContext(),
       "Clicked on Checkbox: " + cb.getText() +
       " is " + cb.isChecked(),
       Toast.LENGTH_LONG).show()
       rowcheck.setSelected(cb.isChecked());
     } 
    }); 
   }
   else 
   {
    holder = (ViewHolder) convertView.getTag();
   }

   Country rowcheck = rowcheckList.get(position);
  // holder.code.setText(" (" +  rowcheck.getCode() + ")");
   holder.code.setText(rowcheck.getName());
  // holder.name.setText(rowcheck.getName());
   holder.name.setChecked(rowcheck.isSelected());
   holder.name.setTag(rowcheck);

   return convertView;

  }
    }

    private void checkButtonClick() {

        Button myButton = (Button) findViewById(R.id.findSelected);
        myButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                StringBuffer responseText = new StringBuffer();
                responseText.append("The following were selected...\n");

                ArrayList<Country> rowcheckList = dataAdapter.rowcheckList;

                System.out.println("Size" + rowcheckList.size());
                int j = 0;
                ArrayList<String> stt = new ArrayList<String>();
                for (int i = 0; i < rowcheckList.size(); i++) {
                    Country rowcheck = rowcheckList.get(i);
                    // System.out.println(rowcheck.getName());

                    if (rowcheck.isSelected()) {
                        stt.add(rowcheck.getName());
                        // Country.st=new ArrayList<String>();
                        String s = rowcheck.getName();
                        System.out.println("String--" + rowcheck.getName());
                        Country.st.add(s);
                        j = j++;
                        System.out.println(j++);

                        responseText.append("\n" + rowcheck.getName());

                    }

                }
                for (int i = 0; i < stt.size(); i++) {
                    System.out.println("Names----" + stt.get(i).toString());
                }

                if (j >= 1 && j <= 5) {

                    Intent i = new Intent(ListViewCheckboxesActivity.this,
                            PickedItemListView.class);
                    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                } else {
                    Toast.makeText(ListViewCheckboxesActivity.this,
                            "Maximum 5 Selection Allowed", Toast.LENGTH_LONG)
                            .show();
                }

                Toast.makeText(ListViewCheckboxesActivity.this, responseText,
                        Toast.LENGTH_LONG).show();

            }
        });

    }
//Logout ALert Box
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            LayoutInflater inflater = LayoutInflater
                    .from(ListViewCheckboxesActivity.this);
            View dialogview = inflater.inflate(R.layout.logout_popup, null);
            final Button ok = (Button) dialogview.findViewById(R.id.ok);
            final Button cancel = (Button) dialogview.findViewById(R.id.cancel);
            AlertDialog.Builder dialogbuilder = new AlertDialog.Builder(
                    (ListViewCheckboxesActivity.this));
            dialogbuilder.setView(dialogview);
            dialogbuilder.setInverseBackgroundForced(true);
            alertdialog = dialogbuilder.create();
            alertdialog.show();

            ok.setOnClickListener(new OnClickListener() {

                public void onClick(View paramView) {
                    alertdialog.dismiss();
                    final Intent intent = new Intent(
                            ListViewCheckboxesActivity.this,
                            LoginActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                    finish();
                }

            });

            cancel.setOnClickListener(new OnClickListener() {

                public void onClick(View paramView) {
                    alertdialog.cancel();
                }
            });

        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-16T13:52:08.450

```
checkBox_sound.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {

            var boolSoundOn = (isChecked) ? true : false;

        }
    }); 
```

它工作完美...

# asp.net - javascript中的asp.net方法

> ID：11358124
> 
> 赞同：0
> 
> 时间：2012-07-06T07:56:07.597
> 
> 标签：asp.net

我有一个网站，我需要找到我选择的配置文件的 id 并将该值分配给 javascript 中的变量，并在警报框中显示我应该在哪里编写 javascript 需要在 app_code 文件夹'类或 web 中调用的函数页面的代码文件

```
var some_variable = '<%=the_method()  %>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:59:38.703

您应该使用**Webservices**或**Webmethods**从您的 JavaScript 代码与服务器端方法进行通信

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:59:20.127

我将假设 ASP.NET WebForms 而不是 MVC ...

如果你有`page.aspx`一个名为：

```
public string myProfile = "profile1"; 
```

您将能够像其他任何内容一样在您的 HTML 中获取它：

```
<% Response.Write( myProfile ) %> 
```

在 javascript 中你也可以这样做：

```
<script>
    var myProfile = '<%= myProfile %>';
</script> 
```

你也可以调用方法：

在你的`page.aspx`

```
public string getUserName() {
    return String.Format("{0} {1}", User.fname, User.lname);
} 
```

在你的 javascript

```
<script>
    var myProfile = '<%= getUserName() %>';
</script> 
```

**请记住**，您需要装饰您的变量和方法`public`，就好像不需要一样，默认情况下，它们将可以`private`从您的代码隐藏文件范围之外访问，也不能从您的代码隐藏文件范围之外访问。

# c# - 将键值字符串反序列化为对象

> ID：11358131
> 
> 赞同：1
> 
> 时间：2012-07-06T07:56:29.270
> 
> 标签：c#, key-value

嗨，任何人都可以帮助我解决这个问题。

我有一个 HTML 页面。此页面包含 FirstName、MiddleName、LastName 等的文本框。

在这个 HTML 页面的按钮 clcik 上，我正在调用一个 javascript 函数。在这里，我使用 JQuery 序列化获取所有 HTML 页面内容及其值。然后将此值传递给我在服务器中托管的 WCF 服务。

该服务会将这个字符串解析为相应的对象并将值保存到数据库中。

所以在 HTMl 页面中，我编写了如下的 Javascript 函数：

```
pmamml.ButtonClick = function() {
var formData = $("#form1").serializeArray();
var stringJson;
$.getJSON('ajax/test.json', function(formData) {
   stringJson=  JSON.stringify(formData)
});
//alert(stringJson);
$.ajax({
    type: 'GET',
    url: 'http://URL/Service.svc/Update?formData=' + JSON.stringify(formData),
    error: pmamml.ajaxError,
    success: function(msg) {
        document.write(msg);
        //alert(msg);
    },
});}, 
```

在 WCF 服务中，我写道：

```
[WebInvoke(Method = "GET", UriTemplate = "/Update?formData={formData}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    public string Update(string formData)
    {
        //   Here i am receiving formdata string as
        // formData = "[{\"name\":\"FirstName\",\"value\":\"Pankaj\"},{\"name\":\"MiddleName\",\"value\":\" \"},{\"name\":\"LastName\",\"value\":\"KUMAR\"}]";
    } 
```

我想将此字符串反序列化为 List 对象或 keyvaluepair 或 Dictionary 上述任何一种格式。

这样我就可以将此值保存到数据库中。

我们应该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:50:16.637

The code below will give you your stringdata seperated into workeable pieces, as displayed below.

```
 // new list 
        var l = new List<string>();
        // original data
        var s = "[{\"name\":\"FirstName\",\"value\":\"Raja\"},{\"name\":\"MiddleName\",\"value\":\"Raja \"},{\"name\":\"LastName\",\"value\":\"KUMAR\"}]";
        // clean up and split in larger parts
        var d = s.Substring(1, s.Length - 2).Replace("\\", "").Replace("\"", "").Replace("}", "").Split('{');
        // Split in final entries and add to list
        var sb = new char[2] { ',', ':' };
        foreach (var r in d) { l.AddRange(r.Split(sb, StringSplitOptions.RemoveEmptyEntries)); 
```

// Contents of the List will be

name

FirstName

value

Raja

name

MiddleName

value

Raja

name

LastName

value

KUMAR

// The code is not very robust yet, e.g. you need to check your inputstring is not empty

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:19:31.430

最简单的方法是使用 RegEx 将其拆分为一个数组，匹配 \"([^\"]*)。

**更新**鉴于您将其发送到 Web 服务，它应该只配置为 Json 以自动反序列化它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:37:13.513

是的，我得到了解决方案

这是我更新的 JQuery

```
pmamml.ButtonClick = function() {
$.fn.serializeObject = function() {
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};
var stringJson = JSON.stringify($('#form1').serializeObject());
var Userdata = "formData=" + stringJson;
$.ajax({
    type: 'GET',
    url: 'http://URL/Service.svc/Update?' + Userdata,
    error: pmamml.ajaxError,
    success: function(response, status, xhr) {
        if (response = true) {
            //alert(response);
            alert("Data Updated Successfully");
        }
    }
}); 
```

}

在上述方法中，formData 将传递如下 JSON 字符串：{ "FirstName":"Raja","MiddleName":"Raja","LastName":"Kumar"}。

在我的 WCF 服务中，将此 JSON 字符串转换为 Object。

```
[WebInvoke(Method = "GET", UriTemplate = "/Update?formData={formData}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    public bool Update(string formData)
    {
        var mlParser = new MLParser();
        System.Web.Script.Serialization.JavaScriptSerializer s = new System.Web.Script.Serialization.JavaScriptSerializer();

            var InfoList = s.Deserialize<Users>(formData);

        return mlParser.Update(InfoList);
    }

public class Users
{
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
} 
```

这工作正常。

谢谢大家的友好回应.. :)

# javascript - 获取jQquery Ajax Response的长度

> ID：11358138
> 
> 赞同：10
> 
> 时间：2012-07-06T07:57:03.870
> 
> 标签：javascript, jquery, ajax

我需要计算在 jQuery 中完成的 Ajax 响应的长度。响应为 JSON 格式，仅包含一个字符串。我得到了值，但不知道如何计算这个字符串的长度。

这是我的代码：

```
var tempId;
$.ajax({
    url: "<?=base_url();?>index.php/sell/decoder",
    type: "POST",
    data: {'str' : sometext},
    dataType: 'json',
    async: false,
    success: function(response) {
        tempId = response; // This gives me a return value as a string. For example = 153
        alert(tempId.length); // But this returns "undefined". What should I do to get the length?
    }
}); 
```

这是响应标头的结构：

```
Connection  Keep-Alive 
Content-Length  2
Content-Type    text/html
Date    Fri, 06 Jul 2012 08:12:12 GMT
Keep-Alive  timeout=5, max=86
Server  Apache
X-Powered-By    PHP/5.3.10 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T08:12:22.223

做一个 if 条件，然后先将其转换为字符串，然后根据需要计算长度。

```
success: function(response) {
    if(response){       
      alert( (response + '').length );
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T08:37:48.107

或者将您的值（我猜它是一个整数）转换为字符串：

```
tempId.toString().length 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:06:15.287

`tempId.String.length`为我工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-15T10:12:39.150

如果您知道响应不是对象，那么

```
success: function(response) {
    if(response){       
      alert( (response + '').length );
    }
} 
```

会很好用。

但如果响应将以对象的形式出现

```
[{name:'some-name',details:[....something]}] 
```

我建议使用下面的代码

```
success: function(response) {
     length=0;
     if(response){       
        length=JSON.stringify(response).length;
     }
    console.log(length)
} 
```

我认为这段代码对你来说就像一个魅力。

# eclipse - 如何在 Eclipse RCP 应用程序中集成 XML Schema 视图

> ID：11358139
> 
> 赞同：1
> 
> 时间：2012-07-06T07:57:09.237
> 
> 标签：eclipse, view, xsd, integration, rcp

好的，这就是交易。我必须通过菜单打开一个 xsd 文件，然后必须打开一个视图，显示 xsd 文件的结构，但不打开编辑器。我知道如何通过菜单打开它。我不知道是否有一个插件视图可以用来集成到我的 rcp 应用程序中以显示该 xsd 文件的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:28:19.223

将 RCP 与`swt.browser`运行[Webkit](http://www.eclipse.org/swt/faq.php#howusewebkit)或[XULRunner](https://stackoverflow.com/questions/7890994/rcp-with-swt-browser-and-xulrunner)一起使用，以将任一浏览器引擎用作简单的 XML 查看器。

# jquery - jquery函数根据图像调整div大小

> ID：11358140
> 
> 赞同：0
> 
> 时间：2012-07-06T07:57:10.070
> 
> 标签：jquery

我对 HTML 和 CSS 了解很多，但我仍处于 jQuery 学习曲线的早期阶段。

我需要根据其中的图像大小设置一些 DIV 的各种属性。

这是一些示例 HTML：

```
<div class="box">
<img src="../pix/onepic.gif">
</div> 
```

这是一个我知道有效的功能：

```
$('.box').click(function() {            
    var obj = $(this);
    var imgWidth = $('img:first', obj).width();
    var imgHeight = $('img:first', obj).height();

    $(this).width(imgWidth * 2);
    $(this).height(imgHeight * 2);
    }); 
```

但是我现在想在整个页面上自动运行这个功能，而不只是在我点击的时候，那里会有许多 .box 包含各种大小的图像。

除其他事项外，将上面示例中的“click”替换为“load”确实可以做到。

* * *

起初，以下使用“每个”的建议似乎有效；当我把这个脚本：

```
$('.box').each(function() {            
    var obj = $(this);
    var imgWidth = $('img:first', obj).width();
    var imgHeight = $('img:first', obj).height();
    $(this).width(imgWidth * 2);
    $(this).height(imgHeight * 2);
}); 
```

在 body-close 标签之前，我得到了我所希望的。

但后来我测试了更多，将 HTML 更改为：

```
<div class="box">
<p>hello world</p>
<img src="../pix/onepic.gif">
</div> 
```

而 Firefox、Chrome 和 IE 给了我*三个完全不同的结果*。

Firefox 有我所期望的，hello world 和放大框中的图片。

在 Chrome 中，div 现在的高度和宽度为 0px。

在 IE7 中，div 现在的宽度为 56 像素，高度为 60 像素，我无法辨别——有问题的图像是 100x100。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:01:15.073

使用[jQuery each()](http://api.jquery.com/jQuery.each/)函数

```
$('.box').each(function() {            
    var obj = $(this);
    var imgWidth = $('img',obj).width();
    var imgHeight = $('img',obj).height();

    $(this).width(imgWidth * 2);
    $(this).height(imgHeight * 2);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T16:36:09.383

使用 imagesLoaded 插件[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded) 我找到了一种巧妙的方法来做到这一点。

```
$('.element').imagesLoaded().progress( function( instance , image) {

    newHeight = $(image.img).height();

    $(image.img.parentNode).height(newHeight); 
```

});

这个简单的函数利用了 imagesLoaded 的“进度”函数，该函数迭代给定容器中的所有图像，并在确认已加载时将它们一一交给您。

有许多不同的方法可以访问容器、图像以及图像状态（加载失败）等

我建议检查一下:-)

# c# - 如何在同一个 .aspx 页面上使用两个更新面板

> ID：11358141
> 
> 赞同：11
> 
> 时间：2012-07-06T07:57:11.453
> 
> 标签：c#, asp.net, triggers, updatepanel

我在一个页面上有两个更新面板。我想在不同的 2 条件下更新这两个条件。但我不知道为什么这没有发生。我已经为两者指定了触发器，但没有帮助，下面是我的代码。

请让我知道我错在哪里。

实际上，当它们的 selectedindexchange 被触发时，第一个更新面板中有三个下拉列表，然后第二个更新面板的内容也会更新。

```
<asp:UpdatePanel ID="upSearch" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
    <ContentTemplate>
        <div style="float: left; width: auto;">

            <asp:DropDownList ID="ddlLocation" runat="server" Width="206px" DataTextField="LocationName"
                DataValueField="Locationid" AutoPostBack="true" OnSelectedIndexChanged="ddlLocation_SelectedIndexChanged">
            </asp:DropDownList>

            &nbsp;
            <asp:DropDownList ID="ddlArea" runat="server" Width="200px" DataTextField="AreaName"
                DataValueField="Areaid" AutoPostBack="true" OnSelectedIndexChanged="ddlArea_SelectedIndexChanged">
            </asp:DropDownList>

            &nbsp;
            <asp:DropDownList ID="ddlRoom" runat="server" Width="200px" DataTextField="RoomName"
                DataValueField="Roomid">
            </asp:DropDownList>
            &nbsp;

        </div>
        <div style="float: left; width: 80px;">
            <asp:Button ID="btnSearch" runat="server" Text="Search" ValidationGroup="vgSearch"
                CssClass="bluebtn" UseSubmitBehavior="false" OnClick="btnSearch_Click" />
        </div>
        <div style="float: left; width: 99%; padding: 5px 0px;">
        </div>
    </ContentTemplate>
  </asp:UpdatePanel> 
```

第二个如下：-

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
<ContentTemplate>
    <asp:Calendar ID="calSchedule" runat="server" NextPrevFormat="FullMonth" OnDayRender="calSchedule_DayRender"
        OnVisibleMonthChanged="calSchedule_VisibleMonthChanged">
        <DayHeaderStyle CssClass="dayheaderStyle" />
        <NextPrevStyle />
        <OtherMonthDayStyle BackColor="#ffffff" />
        <SelectedDayStyle />
        <TitleStyle CssClass="titleStyle" />
        <TodayDayStyle BackColor="#ffffa0" ForeColor="#6699cc" />
        <WeekendDayStyle />
        <DayStyle CssClass="dayStyle" />
    </asp:Calendar>
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnSearch" EventName="Click" />
</Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-06T19:14:18.087

首先，我想回顾一下`UpdateMode`

*   `Always`面板将**在页面上的每个帖子上更新其内容，它们可以是部分渲染帖子或完整帖子，在这两种情况下面板的内容都会更新**

*   `Conditional`只有满足不同条件时，面板的内容才会更新：

    *   默认情况下，由其子对象触发的事件将触发更新，您可以更改此行为设置`ChildrenAsTriggers="false"`

    *   当您`Triggers`在`UpdatePanel`

    *   当您显式调用该`UpdatePanel.Update()`方法时

    *   整页帖子将触发更新

以下代码执行以下操作：

*   每个 UpdatePanel 在其子控件引发事件时更新

*   UpdatePanel 1 命名为：**仅**当其子控件引发事件时`up1`才会更新

***   命名的 UpdatePanel 2`up2`将在其子控件引发事件时更新

    *   UpdatePanel 2 named`up2`也将在触发定义的触发器时更新，在这种情况下，当 UpdatePanel 1 上的`DropDownList`named`ddl1OnPanel1`触发其`SelectedIndexChanged`

    *   当 UpdatePanel 1 上的named引发其时， UpdatePanel 2 named`up2`也将被更新，因为在代码中它显式调用：`DropDownList``ddl2OnPanel1``SelectedIndexChanged``this.up2.Update();`** 

 ***我认为调整此代码，您可以实现您想要的目标，只需将其复制粘贴到新页面并运行它*

### 检查以下代码（查看显示日期的标签如何根据引发的事件以不同方式受到影响）：

### 代码背后

```
 protected void ddl1OnPanel1_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.lblMessageOnPanel1.Text = "From ddl1 " + DateTime.Now.ToString();
        this.calendarOnPanel2.SelectedDate = DateTime.Today.AddDays(1);
        this.lblMessageOnPanel2.Text = "From ddl1 " + DateTime.Now.ToString();
    }

    protected void ddl2OnPanel1_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.lblMessageOnPanel1.Text = "From ddl2 " + DateTime.Now.ToString();
        this.calendarOnPanel2.SelectedDate = DateTime.Today.AddDays(2);
        this.lblMessageOnPanel2.Text = "From ddl2 " + DateTime.Now.ToString();
        this.up2.Update();
    } 
```

### ASPX

```
 <asp:ScriptManager runat="server" ID="scriptManager" />
    <asp:Button Text="Full Post" runat="server" />
    <br />
    <asp:UpdatePanel runat="server" ID="up1" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:DropDownList runat="server" ID="ddl1OnPanel1" AutoPostBack="true" OnSelectedIndexChanged="ddl1OnPanel1_SelectedIndexChanged">
                <asp:ListItem Text="text1" />
                <asp:ListItem Text="text2" />
            </asp:DropDownList>
            <br />
            <asp:DropDownList runat="server" ID="ddl2OnPanel1" AutoPostBack="true" OnSelectedIndexChanged="ddl2OnPanel1_SelectedIndexChanged">
                <asp:ListItem Text="text3" />
                <asp:ListItem Text="text4" />
            </asp:DropDownList>
            <br />
            <asp:Label runat="server" ID="lblMessageOnPanel1" />
            <br />
            <asp:Button ID="Button1" Text="text" runat="server" />
            <br />
            On every post on Panel 1: <%:DateTime.Now %>
        </ContentTemplate>
    </asp:UpdatePanel>

    <br />
    <br />
    <asp:UpdatePanel runat="server" ID="up2" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Calendar ID="calendarOnPanel2" runat="server" >
                <DayHeaderStyle CssClass="dayheaderStyle" />
                <NextPrevStyle />
                <OtherMonthDayStyle BackColor="#ffffff" />
                <SelectedDayStyle />
                <TitleStyle CssClass="titleStyle" />
                <TodayDayStyle BackColor="#ffffa0" ForeColor="#6699cc" />
                <WeekendDayStyle />
                <DayStyle CssClass="dayStyle" />
            </asp:Calendar>
            <br />
            <asp:Label ID="lblMessageOnPanel2" runat="server" />
            <br />
            On every post On Panel 2: <%:DateTime.Now %>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddl1OnPanel1" EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel> 
```

### 简单输出

![在此处输入图像描述](../Images/5a95a9617126b888a9231b6e05c4873e.png)

您可以`UpdateMode="Always"`在 UpdatePanel 2 上更改，以查看差异，如果您这样做，此面板将在每个帖子上更新，无论是完整帖子还是来自 UpdatePanel1 的帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-01T08:01:27.377

I used this successfully for 4 updatepanel.

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" EnableScriptGlobalization="true" CombineScripts="false" ScriptMode="Release">
</asp:ToolkitScriptManager> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T09:39:32.543

如果您希望发生异步回发，请从 DropdownLists 中删除 Autopostback="True"。另外，目前究竟出了什么问题？更新面板根本不更新？

编辑。同时删除 childrenAsTriggers，因为此时不需要

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-06T08:10:05.423

如果您使用的是嵌套更新面板，请参考以下示例代码：

```
<asp:UpdatePanel id="UpdatePanel1" UpdateMode="Conditional" runat="server">
            <ContentTemplate>
                <fieldset>
                <legend>Parent UpdatePanel</legend>
                Last refresh <%=DateTime.Now.ToString() %> <br />
                <asp:Button ID="Button1" runat="server" Text="Refresh Outer Panel" />
                <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                    <ContentTemplate>
                        <fieldset>
                        <legend>Nested UpdatePanel</legend>
                         Last refresh <%=DateTime.Now.ToString() %> <br />
                        <asp:Calendar ID="Calendar1" runat="server"></asp:Calendar>
                        </fieldset>
                    </ContentTemplate>
                </asp:UpdatePanel>
                </fieldset>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

如果不使用嵌套更新面板，则从代码的两个更新面板中删除“UpdateMode”条件。**

# java - javax.persistence.UniqueConstraint.name()Ljava/lang/String

> ID：11358142
> 
> 赞同：3
> 
> 时间：2012-07-06T07:57:19.987
> 
> 标签：java, hibernate, maven

在类路径资源 [ApplicationContext.xml] 中创建名称为“sessionFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 java.lang.NoSuchMethodError: **javax.persistence.UniqueConstraint.name()Ljava/lang/String;**

那有什么问题呢？

我用

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.aaaedu.aaaspeak3</groupId>
<artifactId>aaaspeak3</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>aaaspeak3 Maven Webapp</name>
<url>http://maven.apache.org</url>
<properties>

    <javax.version>6.0</javax.version>
    <javax.servlet.version>1.2</javax.servlet.version>
    <junit.version>4.8.2</junit.version>
    <log4j.version>1.2.16</log4j.version>
    <org.aspectj.version>1.6.2</org.aspectj.version>
    <net.sf.ehcache.version>2.3.2</net.sf.ehcache.version>
    <org.slf4j.version>1.6.1</org.slf4j.version>
    <mysql.jdbc.version>5.1.15</mysql.jdbc.version>
    <org.hibernate.entitymanager.version>3.6.10.Final</org.hibernate.entitymanager.version>
    <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
    <com.jolbox.bonecp.version>0.7.1.RELEASE</com.jolbox.bonecp.version>
    <org.codehaus.jackson.version>1.7.4</org.codehaus.jackson.version>
    <commons.pool.version>20030821.192746</commons.pool.version>
    <commons.dbcp.version>20030821.193421</commons.dbcp.version>
    <org.jfreechart.version>1.0.14</org.jfreechart.version>
</properties>

<repositories>
    <repository>
        <id>sonatype-snapshots</id>
        <name>Sonatype snapshot repository</name>
        <url>http://oss.sonatype.org/content/repositories/snapshots</url>
    </repository>
    <repository>
        <id>java.net2</id>
        <name>Repository hosting the jee6 artifacts</name>
        <url>http://download.java.net/maven/2</url>
    </repository>
    <repository>
        <id>JBoss</id>
        <name>The "public-jboss" repository group provides a combined view all JBoss community project artifacts</name>
        <layout>default</layout>
        <url>http://repository.jboss.org/nexus/content/groups/public-jboss</url>
    </repository>
    <repository>
        <releases>
            <enabled>true</enabled>
        </releases>
        <id>bonecp-repo</id>
        <name>BoneCP Repository</name>
        <url>http://jolbox.com/bonecp/downloads/maven</url>
    </repository>
    <repository>
        <id>CodeHaus-Jackson</id>
        <name>Json CodeHaus Jackson</name>
        <url>http://repository.codehaus.org/org/codehaus/jackson/</url>
    </repository>
</repositories>

<dependencies>
    <dependency>
    <groupId>javax.persistence</groupId>
    <artifactId>persistence-api</artifactId>
    <version>1.0.2</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>1.0.0.GA</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.1</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.el</groupId>
    <artifactId>el-api</artifactId>
    <version>2.2</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jsp-api</artifactId>
    <version>2.0</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>${org.slf4j.version}</version>
    </dependency>

     <!--  <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency> -->

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${org.hibernate.entitymanager.version}</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>

    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>${net.sf.ehcache.version}</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>${javax.servlet.version}</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>${log4j.version}</version>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>${org.aspectj.version}</version>
    </dependency>

    <!-- JDBC -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>${mysql.jdbc.version}</version>
    </dependency>

    <!-- BoneCP -->
    <dependency>
        <groupId>com.jolbox</groupId>
        <artifactId>bonecp</artifactId>
        <version>${com.jolbox.bonecp.version}</version>
    </dependency>

    <dependency>
        <groupId>com.jolbox</groupId>
        <artifactId>bonecp-provider</artifactId>
        <version>${com.jolbox.bonecp.version}</version>
    </dependency>

    <dependency>
        <groupId>com.jolbox</groupId>
        <artifactId>bonecp-spring</artifactId>
        <version>${com.jolbox.bonecp.version}</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>${org.codehaus.jackson.version}</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-lgpl</artifactId>
        <version>${org.codehaus.jackson.version}</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>${org.codehaus.jackson.version}</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-lgpl</artifactId>
        <version>${org.codehaus.jackson.version}</version>
    </dependency>

    <!-- spring framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>${commons.pool.version}</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>${commons.dbcp.version}</version>
    </dependency>
    <dependency>
        <groupId>org.jfree</groupId>
        <artifactId>jfreechart</artifactId>
        <version>${org.jfreechart.version}</version>
    </dependency>
</dependencies>
<build>
    <finalName>aaaspeak3</finalName>
</build> 
```

有人告诉我这是“hibernate-jpa-2.0-api-1.0.0.jar”和其他人之间的冲突。我该怎么做？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:05:32.870

此依赖项适用于 JPA 1：

```
<dependencies>
    <dependency>
    <groupId>javax.persistence</groupId>
    <artifactId>persistence-api</artifactId>
    <version>1.0.2</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency> 
```

如您所见，[JPA 1](http://docs.oracle.com/javaee/5/api/javax/persistence/UniqueConstraint.html)中的 UniqueConstraint没有`name`属性，但在[JPA 2](http://docs.oracle.com/javaee/6/api/javax/persistence/UniqueConstraint.html#name%28%29)中它存在。您确实参考了“hibernate-jpa-2.0-api-1.0.0.jar”，这是 Hibernate 提供的 JPA 2.0 API。但是您的 pom.xml 不包含这样的文件。您可以通过在 pom 中添加以下内容来包含该版本（或实际上从不包含该版本）：

```
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.0-api</artifactId>
    <version>1.0.1.Final</version>
</dependency> 
```

此外，您应该删除对 JPA 1 API 的依赖。

# unity-container - 为 SignalR 创建 Unity DependencyResolver

> ID：11358147
> 
> 赞同：3
> 
> 时间：2012-07-06T07:57:32.887
> 
> 标签：unity-container, signalr

我正在使用 SignalR 0.5.2，并且正在尝试使用 Unity 设置 DependencyResolver。我已经写了我能写的最简单的代码。我有一个正在尝试注入的集线器，如下所示：

```
public class SimpleHub : Hub
{
    private readonly ITestService _service;

    public SimpleHub(ITestService service)
    {
        _service = service;
    }

    public void Update()
    {
        Clients.callback("Kevin");
    }
} 
```

和一个看起来像这样的 DependencyResolver：

```
public class UnityDependencyResolver : DefaultDependencyResolver
{
    private readonly IUnityContainer _container;

    public UnityDependencyResolver(IUnityContainer container)
    {
        _container = container;
    }

    public override object GetService(Type serviceType)
    {
        if (_container.IsRegistered(serviceType))
        {
            return _container.Resolve(serviceType);
        }
        return base.GetService(serviceType);
    }

    public override IEnumerable<object> GetServices(Type serviceType)
    {
        if (_container.IsRegistered(serviceType))
        {
            return _container.ResolveAll(serviceType);
        }
        return base.GetServices(serviceType);
    }
} 
```

我在 Global.asax 中注册了依赖解析器

```
protected void Application_Start()
{
    IUnityContainer container = new UnityContainer();
    InitializeContainer(container);
    SignalR.IDependencyResolver resolver = new UnityDependencyResolver(container);
    GlobalHost.DependencyResolver = resolver;
    RouteTable.Routes.MapHubs();
    // more MVC stuff here
} 
```

其中 InitializeContainer 在 Unity 中注册 ITestService

解析器“工作”，因为它被所有 SignalR 类型调用，如果我离开我的集线器有一个默认构造函数，它都会被加载。但是，解析器永远不会被要求解析 ITestService 接口。

我也尝试将解析器传递给 MapHubs，但仍然没有运气。我也尝试过使用 [Dependency] 属性进行属性注入，但也没有用。

我是否也需要向 MVC 注册解析器？（我已经尝试通过实现两个 IDependecyResolver 接口但得到一个异常告诉我解析器没有实现 IServiceLocator）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T16:06:57.393

所以我已经解决了这个问题。我想知道 Hub 注册到 signalr 容器并且接口注册到 Unity 容器的事实是否导致了这个问题。所以我用 Unity 注册了 Hub，然后一切正常。

因为有两个容器，所以这种方法很有意义。

这是标准行为吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T13:00:26.200

万一其他人想知道...我找到了一个很好的 SPA 示例，它使用

*   SignalR 1.0.1
*   团结 3
*   一堆其他框架

有趣的是他创建容器、依赖项和其他所有内容的方式。值得一[试](http://margabit.wordpress.com/2013/03/14/durandaljs/)。

# database - 无法从 Heroku 中提取数据库

> ID：11358155
> 
> 赞同：0
> 
> 时间：2012-07-06T07:58:29.453
> 
> 标签：database, heroku

尝试将数据库从 Hekoku 拉到本地但失败。

```
heroku db:pull postgres://root:@localhost/db_name 
```

诚然，我不知道应该如何构造 url。在官方[网站上](https://devcenter.heroku.com/articles/taps)使用过，`heroku db:push postgres://postgres:mypass@remotehost/mydb`并且在[本文](https://stackoverflow.com/questions/3841237/heroku-dbpull-not-working)中`heroku db:pull postgres://root:@localhost/db_name`使用过。用户名和密码是干什么用的？

无论如何，我得到的错误信息是：

```
 Sequel::DatabaseConnectionError -> TypeError: wrong argument type Sequel::Postgres::Adapter (expected Struct) 
```

按照说明更新`taps, sequel, and pg`，这是我的宝石列表：

```
rest-client (1.6.7)
sinatra (1.0)
taps(0.3.24)
sequel (3.37.0, 3.20.0)
pg (0.14.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:26:55.067

这个问题现在不再相关，因为我已按照[此处](https://stackoverflow.com/questions/11356775/can-not-connect-to-the-pg-database-hosting-on-heroku)的建议从共享 sqlite 数据库切换到 9.1 开发 pg 数据库。因此，我将使用更复杂的[pgbackup](https://devcenter.heroku.com/articles/pgbackups)，而不是使用简单的 db pull/push，这实际上是 Heroku 推荐的。

# javascript - 将宽度从百分比转换为像素

> ID：11358162
> 
> 赞同：10
> 
> 时间：2012-07-06T07:59:00.677
> 
> 标签：javascript, jquery, html

我在里面有一张桌子`<div>`：

```
<div id="fixeddiv">
    <table id="fixedtable">
        <tr class="firstrow">
            <td class="td11"></td>
            <td class="td12"></td>
            <td class="td13"></td>
        </tr>

        <tr class="secondrow">
            <td class="td21" style="width:10%"></td>
            <td class="td22" style="width:20%"></td> 
            <td class="td23" style="width:70%"></td>
        </tr>
    </table>
</div> 
```

**CSS：**

```
#fixeddiv
{
    overflow:auto;
    margin:0px;
    padding:0px;
    position: relative;
    text-align:left;
    width: 48%;
}

#fixedtable
{
    background-color: White;
    border-spacing:0px;
    cursor: pointer;
    width: 100%;
    height: 100%;
    font-family: Calibri !important;
    color: Black;
    font-size: 14px;
}

.firstrow
{
    position: absolute;
    margin: 0px;
    left: 0;
    top: 0;
    background: url(../Content/Images/header.jpg) repeat-x center top;
    color: White;
    font-weight: bold;
    text-align: center;

}
#fixedtable tr td
{
    padding: 5px !important;
    border: 1px solid #FFFFFF;
    text-align: center;
} 
```

我正在计算`td21`with`$('.td21').width()`的宽度并将宽度分配给`td11`like `$('td11').width($('.td21').width())`。

问题是应用的宽度不一样，它们会有所不同`1px`，我无法找到这种`1px`差异是如何发生的。`.td21`宽度`1px`大于`.td11`。_

任何人都可以帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T08:13:45.957

```
<div id="div-1" style="width: 1000px;">
    <div id="div-2" style="width: 10%;"></div>
</div>

<script language="javascript">                
    var percents = parseInt(document.getElementById("div-2").style.width);
    var parentWidth = parseInt(document.getElementById("div-1").style.width);
    var pixels = parentWidth*(percents/100);
    alert(pixels); // will print "100"
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:10:30.713

尝试使用[.outerWidth()](http://api.jquery.com/outerWidth/)而不是`.width()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:14:31.757

当您使用百分比 + 填充时会发生这种情况。像素是 int ，所以它会被四舍五入。

在您的示例中：10%、20% 和 70% 是容器的宽度，并且您需要添加填充和边框。

有了这个十进制数字，就会出现并且需要四舍五入。

**例子：**

您的页面宽度为 900 像素。如果没有填充、边距或边框，您将拥有 630 像素 (70%)、160 像素 (20%)、90 像素 (10%) 的宽度。

但是当您添加边框 + 填充时，百分比必须从 900 - (3 tds * 10px 填充（左右）） - (3 tds * 2px 边框（左右））= 864px 计算。

使用 864px 宽度，您将获得：604,8px (70%)、172,8px (20%)、86,4px (10%)。

这就是 1px 差异发生的地方。

# ruby - 为什么-7 mod 3 = 2 在 Ruby 中？

> ID：11358166
> 
> 赞同：2
> 
> 时间：2012-07-06T07:59:23.180
> 
> 标签：ruby, math

我从 Java 到 Ruby，这个 -7 mod 3 = 2 让我很困惑

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T08:02:16.027

因为 -7 减 2 是 3 的倍数。

更具体地说，在这种情况下使用的模数的实现恰好选择了正模数。一些实现选择与第一个操作数具有相同符号的模数，其他实现总是选择正数，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:06:55.413

`{0, 1, 2}`想象一个带有顺时针方向 元素的数字轮。

你从 0 开始，逆时针移动 7 个位置，因为你有`-7`（如果你有`+5 mod 3`，你会`5`顺时针移动位置）。

那么，让我们看看这会将我们带到哪里：

```
Current Number:  0 -1 -2 -3 -4 -5 -6 -7
Wheel Number:    0  2  1  0  2  1  0  2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:07:08.050

mod 函数给出小于第一个参数的最大倍数以上的余数。

如果是 7 mod 3，那么 6 是小于 7 的最大倍数，所以 1 就是答案 (7-6)

因为它是 -7，那么 -9 是小于 -7 的最大倍数，所以 2 是答案（-7- -9 或 -7+9）

# sql - TSQL 中的新行

> ID：11358169
> 
> 赞同：15
> 
> 时间：2012-07-06T07:59:34.150
> 
> 标签：sql, sql-server, tsql, newline

我从数据库中获取以逗号分隔的记录。我得到的联系人标题为：

```
greg w.workcerf, ashir ali, asdddfgjk 
```

这是逗号分隔的已在 SQL 函数中定义`getCommaListTitle()`

我想要的是在新线路上获得这些记录

```
greg w.workcerf,
ashir ali,
asdddfgjk 
```

关于我应该在 sql 函数中使用什么而不是`','`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-06T08:10:19.310

在逗号后面追加`getCommaListTitle`， `CHAR(13) + CHAR(10)`换行

`CHAR(13)`是一个新的换行符并且`CHAR(10)`是一个换行符。

请参阅[http://msdn.microsoft.com/en-us/library/ms187323.aspx](http://msdn.microsoft.com/en-us/library/ms187323.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T08:10:34.113

您应该在前端执行此操作，例如在数据访问层或可能在表示层，因为您的应用程序可以是 Web 应用程序或窗口应用程序中的任何一个，并且在两者中都有不同的换行语法，例如在 Web 中我们使用`<br/>`标签，而在我们使用的窗口中`/n`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T08:26:02.117

使用`replace`功能

```
replace(field, ',', ',' + char(13)+char(10) 
```

...但是不要在您的数据库中执行此操作，数据库是关于 DATA 的，当然它“应该”以某种形式呈现...但是从换行符开始，最后你会以类似的方式结束：

```
SELECT @s = '<tr><td>' + firstname + '</td><td>' + substr(lastname, 1, 30) + '</td></tr>'
FROM ....

RETURN '<table>' + @s + '</TABLE>' 
```

那不是路由选择蚂蚱

# php - 如何使用 ebatNs 获得 ebay trading api 的有效运输服务？

> ID：11358173
> 
> 赞同：0
> 
> 时间：2012-07-06T07:59:53.187
> 
> 标签：php, xml, ebay-api, shipping

我收到这样的错误：

```
#21915469 : At least one valid shipping service must be specified. 
```

**我正在使用的代码：**

```
$ShippingServiceOptions = new ShippingServiceOptionsType(); 
$ShippingServiceOptions-> setShippingService('DE_InsuredDispatch');  
$ShippingServiceOptions-> setShippingServiceCost('3.33'); 
$ShippingServiceOptions-> setShippingServiceAdditionalCost('2.5');
$ShippingServiceOptions-> setShippingServicePriority('1');

$shipping[]=$ShippingServiceOptions; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:06:39.300

有点生锈...您可能需要调用以下内容以获取该项目的有效选项....

[http://developer.ebay.com/devzone/xml/docs/reference/ebay/GeteBayDetails.html](http://developer.ebay.com/devzone/xml/docs/reference/ebay/GeteBayDetails.html)

# android - 下载有进度的文件。这是正确的做法吗？

> ID：11358174
> 
> 赞同：0
> 
> 时间：2012-07-06T08:00:00.933
> 
> 标签：android, inputstream

在内存使用和性能方面是否有更有效的方法来做到这一点。以下方法下载位图并使用进度调用函数。

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        URLConnection connection = url.openConnection();
        connection.connect();

        int fileLength = connection.getContentLength();
        InputStream input = new BufferedInputStream(url.openStream());

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            if(imageInterface != null) {
                imageInterface.duringDownload(
                        imageView, ((int)total * 100 / fileLength));
            }
            outputStream.write(data, 0, count);
        }
        byte[] byteArray = outputStream.toByteArray();
        Bitmap bitmap = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);

        input.close();
        outputStream.flush();
        outputStream.close();

        return bitmap; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:07:13.977

您的耗时任务不应在 UI 线程上运行。使用并从 on方法`AsyncTask`更新 UI 。`onProgressUpdate`

增加您的存储桶大小。目前，您一次读取 1024 字节块并在每次读取后更新 UI。例如，对于 1MB 的图像，您会刷新 UI 1024 次。这是低效的，所以如果你增加缓冲区大小，你需要做更少的 UI 刷新：

```
byte data[] = new byte[100 * 1024]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:29:30.293

另外，我相信如果您的方法尝试加载大图像，则容易出错**OutOfMemoryException 。**要解决此问题，您需要先按比例缩小位图，然后再将其分配到内存中。

如果您真的关心效率，请阅读这篇文章：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T00:13:03.283

执行类似于[AsyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)中给出的示例的操作：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {

  // Do not update UI here, only do downloading in background.
  protected Long doInBackground(URL... urls) {
    while (...) {
      // do input.read() and outputStream.write() just like in your original code

      // Use AsyncTask method to publish progress
      publishProgress((int)total * 100 / fileLength);
    }
  }

 // Here is where you use the progress value to update UI.
 protected void onProgressUpdate(Integer... progress) {
     imageInterface.duringDownload(
         imageView, progress[0]);

 }
} 
```

# java - 无法在 Spring MVC 中捕获 org.hibernate.util.JDBCExceptionReporter 异常

> ID：11358182
> 
> 赞同：1
> 
> 时间：2012-07-06T08:00:52.183
> 
> 标签：java, spring, hibernate, exception

我有使用 Hibernate (3.6.9.Final) 的 Spring MVC (3.1.1.RELEASE) 应用程序。它配置了 Log4j。

```
log4j.category.org.hibernate.SQL=DEBUG
log4j.logger.org.hibernate.event.def.AbstractFlushingEventListener=OFF 
```

当我尝试在表中添加一行时，如果字段的长度超过最大大小，在日志中我可以看到这个异常：

```
hibernateTemplate.merge(ba); 
```

在日志中：

```
2012-07-06 15:22:35,546 ERROR [org.hibernate.util.JDBCExceptionReporter] - <ERROR: value `too long for type character varying(70)>` 
```

但另一方面，在我的代码中，我只能捕捉到这个**DataAccessException**异常：

```
Could not execute JDBC batch update; SQL [insert into T_MYTABLE (BA_NUMBER, USR_ID, BA_ID) values (?, ?, ?)]; nested exception is org.hibernate.exception.DataException: Could not execute JDBC batch update"} 
```

这不是我想要的例外。

您知道如何在我的应用程序中从日志文件中获取消息吗？

我试过捕捉**HibernateException**但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T23:31:45.757

我遇到了同样的问题。这是我在筛选了所有各种包装器和无用的通用错误后得到的结果。似乎应该有更好的方法。我觉得这很脆弱并且是特定于实现的。

```
@ExceptionHandler(DataAccessException.class)
@ResponseBody
public ErrorResponse handleDataAccessException(DataAccessException e, HttpServletResponse response) {
    String errorString = null;
    Throwable t = e.getCause();      
    if(t instanceof PersistenceException) {
        t = t.getCause();
        if(t instanceof ConstraintViolationException) {
            t = t.getCause();
            if(t instanceof BatchUpdateException) {             
                SQLException sqlException = null;
                sqlException =  ((SQLException) t).getNextException();
                if(sqlException instanceof PSQLException) {
                    errorString = ((PSQLException)sqlException).getServerErrorMessage().toString();
                    log.error("Caught exception: type=\"" + sqlException.getClass().getSimpleName() + " " + errorString);
                }
            }
        }
    }
    response.setStatus(HttpServletResponse.SC_PRECONDITION_FAILED);
    ErrorResponse errorResponse = new ErrorResponse();
    Set<ResultCode> resultCodes = new HashSet<ResultCode>();
    resultCodes.add(ResultCode.SERVER_ERROR);
    errorResponse.setResultCodes(resultCodes);
    return errorResponse;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:54:40.297

我设法找到了一种方法：

```
 catch(DataAccessException e)
    {
            Throwable t = e.getCause();               
            SQLException ex = (SQLException) t.getCause();
            while(ex != null){
                 while(t != null) {
                     t = t.getCause();
                 }
                 logger.warn("SQLException="+ex.getLocalizedMessage());

                 ex = ex.getNextException();
            }
    } 
```

来源：[https ://forum.hibernate.org/viewtopic.php?f=1&t=987395&view=previous](https://forum.hibernate.org/viewtopic.php?f=1&t=987395&view=previous)

# android - 连接蓝牙设备，异常：服务发现失败

> ID：11358187
> 
> 赞同：0
> 
> 时间：2012-07-06T08:01:22.813
> 
> 标签：android

我正在尝试将我的 android 设备与蓝牙兼容设备连接。我知道这个设备的 MAC 地址，你可以在下面的代码中看到。我也做了几个`Toasts`只是为了验证代码中的步骤。看来我设法创建了`tmp = device.createRfcommSocketToServiceRecord(MY_UUID);`我假设这是因为 Toast 在这行代码中引发了一条消息，说一些蓝牙对象地址：

```
String test = tmp.toString(); 
Toast.makeText(getApplicationContext(), "The bluetooth socket: " +test, Toast.LENGTH_LONG).show(); 
```

`tmp.connect();`但是当我使用 API 级别 15，android 4.0时，代码在语义上失败了

这是我的一段代码

```
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;  
import java.util.UUID;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class SimpleConnectAndroidActivity extends Activity {

final static String toast = "IAM HERE"; 

final static String TAG ="SimpleConnect";
UUID MY_UUID;

BluetoothDevice bd;
BluetoothAdapter ba;

Button connectButton;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

    ba = BluetoothAdapter.getDefaultAdapter();

    connectButton = (Button)findViewById(R.id.button1);
    connectButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            boolean b = ba.checkBluetoothAddress("00:1B:DC:0F:EC:7E");
            BluetoothSocket tmp = null; 

            //If valid bluetoothAddress
            if(b) {
                final BluetoothDevice device = ba.getRemoteDevice("00:1B:DC:0F:EC:7E"); //Getting the Verifier Bluetooth 

                //Trying to create a RFCOMM socket to the device
                try {
                    tmp = device.createRfcommSocketToServiceRecord(MY_UUID);

                } catch (IOException e) {

                }

                try {
                    tmp.connect();
                } catch (IOException e) {
                    Toast.makeText(getApplicationContext(), "No connection was made! Exception: " + e.getMessage(), Toast.LENGTH_LONG).show();
                } 
                //Print out the sockets name
                String test = tmp.toString(); 
                Toast.makeText(getApplicationContext(), "The bluetooth socket: " +test, Toast.LENGTH_LONG).show(); 
            }

            else {
                    Toast.makeText(getApplicationContext(), "FALSE, No bluetooth device with this address", Toast.LENGTH_LONG).show();
                }
            }   
    });  
} 
```

}

我知道这应该在一个单独的线程中完成，是的，我阅读了 Google 提供的蓝牙聊天示例。

有人可以帮我吗？

**编辑**

这是我从 LogCat 得到的唯一信息：

```
07-06 10:10:22.085: V/BluetoothSocket.cpp(14019): ...fd 63 created (RFCOMM, lm = 26) 
```

**编辑 2**

好的，现在有一个新错误，但它是一个更好的错误。当我按下连接按钮时，手机要求输入密码以配对设备，但它已经配对！第二次配对后，错误提示：连接被拒绝，另一个异常提示超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:12:47.140

您可以使用以下代码：`Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class}); mySocket = (BluetoothSocket) m.invoke(device, 1);`

# php - 获取键，关联数组的两个键之间的值的最有效方法

> ID：11358192
> 
> 赞同：1
> 
> 时间：2012-07-06T08:01:39.000
> 
> 标签：php, arrays

我有一个数组

```
$var = array("one"=>"one","two"=>"two","three"=>"three","four"=>"four"); 
```

如果我传递了键 `one,three`，我想`one , two ,three`用键获取值。

现在我正在做的是

```
$new_array = array_diff(array_slice($var,$key1),array_slice($var,$key2));
$new_array[$key1] = $var[$key1];
$new_array[$key2] = $var[$key2]; 
```

有什么有效的方法，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:36:19.907

你传入一个 key`$from`和一个 key `$to`。要从工作*到*工作，您还需要知道顺序。您可以通过以下方式获得键的顺序`array_keys`：

```
$keys = array_flip(array_keys($array)); 
```

`$from`现在您可以同时定位和`$to`键的偏移量：

```
array_slice($array, $keys[$from], $keys[$to] - $keys[$from] + 1); 
```

编译为一个完整的例子：

```
<?php
/**
 * Most efficient way to get keys,values between two keys of an Associative array
 * @link http://stackoverflow.com/q/11358192/367456
 */

$array = array("one" => "one", "two" => "two", "three" => "three", "four" => "four");

$slice = function($from, $to) use ($array)
{
    $keys = array_flip(array_keys($array));
    if (isset($keys[$from]) and isset($keys[$to])) {
        return array_slice($array, $keys[$from], $keys[$to] - $keys[$from] + 1);
    }
    throw new InvalidArgumentException('Invalid from and/or to key.');
};

var_dump($slice('one', 'three')); 
```

输出：

```
array(3) {
  ["one"]=>
  string(3) "one"
  ["two"]=>
  string(3) "two"
  ["three"]=>
  string(5) "three"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:08:27.373

假设您的输入数组具有连续的键，为什么不只是：

```
$newArray = array_slice($array, $key1, $key2 + 1); 
```

**编辑**

哦，等等，这只会在 时起作用`$key1 = 0`，试试这个：

```
$newArray = array_slice($array, $key1, ($key2 - $key1) + 1); 
```

这仍然需要`$key1 < $key2`，但从你所说的我想它总是会这样。

**另一个编辑**

为了在不循环数组的情况下完成此操作（当然是*最简单*的方法），您需要将字符串键转换为数字，以便它们可以与`array_slice()`. 这有效：

```
$var = array("one"=>"one","two"=>"two","three"=>"three","four"=>"four");
$key1 = 'one';
$key2 = 'three';

$keys = array_keys($var);
$key1index = array_search($key1, $keys);
$key2index = array_search($key2, $keys);

$newArray = array_slice($var, $key1index, ($key2index - $key1index) + 1, TRUE);

print_r($newArray); 
```

# javascript - 如何创建可以通过 AngularJS 上的控制器访问的辅助类

> ID：11358199
> 
> 赞同：11
> 
> 时间：2012-07-06T08:01:55.457
> 
> 标签：javascript, angularjs

如何创建可以从多个控制器访问的帮助程序/实用程序类？

例如，我有两个控制器：`UpdateItemCtrl`和`CreateItemCtrl`. 它们内部具有共同的功能，增加了冗余并降低了可管理性。

我想创建一个`ItemSaveHelper`类，我会将常用方法放入其中并从活动控制器调用它们。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T12:50:02.593

你想创建一个[服务](https://docs.angularjs.org/guide/services)。

服务只是一个可以注入不同事物以提供模块化/共享功能的单例。这是一个简单的例子：http: [//jsfiddle.net/andytjoslin/pHV4k/](http://jsfiddle.net/andytjoslin/pHV4k/)

```
function Ctrl1($scope, itemManager) {
    $scope.addItem = function(text) {
        itemManager.items.push(text);
    };
}

function Ctrl2($scope, itemManager) {
    $scope.items = itemManager.items;
}

app.factory('itemManager', function() {
    return {
        items: []
    };
}); 
```

# c# - 从 LINQ 查询返回匿名类型？

> ID：11358200
> 
> 赞同：0
> 
> 时间：2012-07-06T08:02:05.073
> 
> 标签：c#, linq, linq-to-sql, compiler-errors, return-type

在业务逻辑层中，我创建了一个这样的类：

```
public List<roleHasRight> SelectAllData()
{
    try
    {
        return (from obj in Data.roleHasRights
                 join role in Data.roles on obj.FK_roleId equals role.roleId
                 select new
                 {
                     obj,
                     role.roleName
                 }).ToList();
    }
    catch
    {
        return null;
    }
} 
```

那么我的返回`SelectAllData`方法类型是什么？

`SelectAllData`没有`List<roleHasRight>`作为返回类型它会给出一个错误：

> 无法将类型 System.Linq.IQueryable < AnonymousType#1>' 隐式转换为 'System.Linq.IQueryable < spaBL.roleHasRight>'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:08:50.650

您正在使用以下方法创建一个新的匿名类型：

```
select new { obj,role.roleName} 
```

这种类型有 2 个属性（rolename 和 roleHasRights 对象）。为了能够通过该方法返回相同的信息，您需要使用此信息创建一个类，或者返回一个动态的。

例如

```
public class RoleHasRightInfo {
   public string Rolename {get;set;}
   public roleHasRight Right {get;set;}

} 
```

并在 linq 表达式中创建它，如下所示：

```
select new RoleHasRightInfo(){ Right=obj,Rolename = role.roleName} 
```

然后该方法需要返回这种新类型的 List：

```
public List<RoleHasRightInfo> SelectAllData() {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:14:31.677

如果你返回 RoleHasRight 你需要构造它，而不是像现在这样的匿名类型：

```
select new RoleHasRight
{
    obj,
    role.roleName
}).ToList(); 
```

# c# - Sharepoint 列表动态 Linq 查询

> ID：11358211
> 
> 赞同：1
> 
> 时间：2012-07-06T08:02:46.910
> 
> 标签：c#, linq, sharepoint, sharepoint-2010, spquery

我需要在 SharePoint 中查询一个列表，将来可能会在其中添加列。例如，目前我有以下列名称，工作，兴趣，地址我希望能够使用浏览器中的参数动态查询此字符串，因此如果将来添加列，我不必更改代码但只是参数。地址可能看起来像这样 www.contoso.com/sites/mypage.aspx?property=Interests 而代码就在这行：

```
var SiteParameter = Request.QueryString["property"];

var ItemsFromList = from item in ListItems where item[try to put the parameter in here] select item; 
```

我使用 SPmetal 来获取列表详细信息，所以如果我按 item。Visual Studio2010 将返回列表中的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:17:09.570

如果没有 SPMetal，这可能会更容易。

```
var qy = new SPQuery();
qy.Query =
    "<Where><Eq>" +
        "<FieldRef Name=`" + siteParameter + "'/>" +
        // You may have to worry about the type of the field here, too.
        "<Value Type='Text'>" + desiredValue + "</Value>" + 
    "</Eq></Where>";
var itemCollection = myList.GetItems(qy); 
```

# jquery - 用于嵌套模式弹出窗口的 Jquery 插件？

> ID：11358215
> 
> 赞同：3
> 
> 时间：2012-07-06T08:02:56.970
> 
> 标签：jquery, jquery-plugins, modal-dialog

我需要在我的应用程序中进行嵌套模式弹出。所有弹出窗口都将具有表单提交和确认消息模式对话框。哪个插件很容易做到这一点？那里会有3-4层的嵌套。请帮我选择一个被困扰的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:00:32.800

我从来没有在另一个灯箱中嵌套多个灯箱，但我倾向于使用颜色箱来满足我的灯箱/弹出窗口需求。

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

如果您想要一个更传统的确认消息模式，您可以在灯箱中使用 jQuery UI。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

一个或两个都应该给你你需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T07:43:30.500

我最近发现了 bpopup JQuery 插件，它允许嵌套模式弹出非常非常容易。

[http://dinbror.dk/bpopup/](http://dinbror.dk/bpopup/)

在上一个 url 中查找示例 6a ;-)

# maven - 如何从 Maven 程序集插件中的另一个描述符中调用一个描述符？

> ID：11358218
> 
> 赞同：1
> 
> 时间：2012-07-06T08:03:19.360
> 
> 标签：maven, maven-assembly-plugin

我想在 maven 中创建自己的描述符文件，它将设置一个具有当前目录结构的 zip 文件。我希望生成我的项目的 jar 依赖项，这可以通过内置描述符 jar-with-dependencies 来完成。

我的问题是如何告诉我的描述符调用 jar-with-dependencies 描述符并包含生成的 jar 而不是普通的 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:20:46.130

您可以配置 Maven 程序集插件执行的顺序：

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <id>package-jar-with-dependencies</id>
                    <goals>
                        <goal>attached</goal>
                    </goals>
                    <phase>package</phase>
                    <configuration>
                        <descriptorRefs>
                            <descriptorRef>jar-with-dependencies</descriptorRef>
                        </descriptorRefs>
                        <archive>
                            <manifest>
                                <mainClass>your.MainClass</mainClass>
                            </manifest>
                        </archive>
                    </configuration>
                </execution>
                <execution>
                    <id>package-distribution-zip</id>
                    <goals>
                        <goal>attached</goal>
                    </goals>
                    <phase>package</phase>
                    <configuration>
                        <descriptorRefs>
                            <descriptorRef>bin</descriptorRef>
                        </descriptorRefs>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# mysql - 如何将一个表中的 mysql 变量用作另一个表中的子查询，但将其转换为字符串（来自 int）

> ID：11358220
> 
> 赞同：0
> 
> 时间：2012-07-06T08:03:24.070
> 
> 标签：mysql, subquery

这是我要运行的查询：

```
UPDATE files set refcount=
   (
      SELECT count(*) 
      FROM comments WHERE data=files.id
   ) 
   WHERE id=?; 
```

问题是，*comments.data*是一个文本列（出于其他原因）。所以我需要将*files.id 转换*为 STRING 而不是它是什么（一个 INT），否则不会使用*comments.data索引。*

例如，此查询运行良好：

```
SELECT count(*) FROM comments WHERE data='1234'; 
```

但这需要永远（因为它不能使用索引，评论有 10M 行）：

```
SELECT count(*) FROM comments WHERE data=1234; 
```

也许我需要使用@vars 之类的？我试着把它放在引号中，但我认为它使用了文字“files.id”。

```
UPDATE files set refcount=
   (
      SELECT count(*) 
      FROM comments WHERE data='files.id'
   ) 
   WHERE id=?; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:12:16.847

您所要做的就是将 files.id 转换为字符串，然后再将其与数据进行比较

像这样的东西：

```
UPDATE files set refcount=
   (
      SELECT count(*) 
      FROM comments WHERE data=CAST(files.id AS vachar)
   ) 
   WHERE id=?; 
```

[这](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)是一个链接，展示了如何在 mysql 中使用强制转换函数和运算符。

**更新：**由于某些原因，CAST 似乎不适用于 varchar。虽然 char 可能会起作用（如果它不像 Timh 在下面的评论中所说的那样）CONCAT 可用于将其他类型转换为 varchar（当你用一个字符串连接其他类型，它返回一个字符串，用一个空字符串连接将作为某种转换:))

# regex - 如何避免匹配此正则表达式中的最后一个字母？

> ID：11358224
> 
> 赞同：0
> 
> 时间：2012-07-06T08:03:47.970
> 
> 标签：regex, tcl

我对 tcl 中的正则表达式有疑问：

```
first output: TIP_12.3.4 %
second output: TIP_12.3.4 % 
```

有时输出可能看起来像：

```
first output: TIP_12 %
second output: TIP_12 % 
```

我想使用以下 exgexp 获取数字 12.3.4 或 12：

```
output: TIP_(/[0-9].*/[0-9]) 
```

但为什么它不匹配 12.3.4 或 12%？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:24:21.530

您需要转义点，否则它代表“匹配每个字符”。另外，我不确定您的正则表达式中的斜杠。更好的解决方案：

```
/TIP_(\d+\.?)+/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:12:09.837

试试这个 ：

```
output: TIP_(/([0-9\.^%]*)/[0-9]) 
```

捕获组 1。

演示在这里：

[http://regexr.com?31f6g](http://regexr.com?31f6g)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:33:33.747

以下表达式对我有用：

```
{TIP_((\d+\.?)+)} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:44:34.350

您的问题是，这在 Tcl 的正则表达式语言*中*`/`一点也不特别。它只是一个普通的可打印非字母字符。（其他语言有点不同，因为在字符中包含正则表达式是很常见的；在 Tcl 中不是这种情况。）因为它是一个简单的文字，在你的 RE 中使用它会使其在输入中期望它（尽管它不在那里）；不出所料，这使得 RE 不匹配。*`/`*

 *解决问题：我会使用这样的正则表达式：`output: TIP_([\d.]+)`假设数据格式合理。这将导致如下代码：

```
regexp {output: TIP_([0-9.]+)} $input -> dottedDigits 
```

括号中的所有内容都是文字，因此代码能够找到匹配的内容。在括号内（我们稍后保存的位）我们需要一个或多个数字或句点；将它们放在方括号内是完美而简单的。最终效果是将 存储`12.3.4`在变量中`dottedDigits`（如果找到）并产生一个布尔*结果*，说明它是否匹配（即，您可以将其放入一个`if`有用的条件中）。

**注意：**正则表达式用大括号括起来，因为方括号*也是*Tcl 语言元字符；将 RE 放在大括号中可以避免误解脚本的麻烦。（你可以改用反斜杠，但它们*很难*看……）*

# git - 如果在 git 中使用钩子存在未解决的冲突，如何防止推送？

> ID：11358225
> 
> 赞同：3
> 
> 时间：2012-07-06T08:03:49.613
> 
> 标签：git, hook

我想预接收挂钩可能会有所帮助。
我认为

```
#!/bin/sh
read old_sha1 new_sha1 refname
git diff $old_sha1..$new_sha1 may 
```

帮助找出冲突标记。
但是如何使用正则表达式或其他来判断此提交中是否存在未解决的冲突？冲突呈现如下：

```
<<<<<<< HEAD
Conflict resolution is hard;
let's go shopping.
=======
Git makes conflict resolution easy.
>>>>>>> d7785deagea4342532g2q632y321632g23h23 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T08:08:25.693

```
#!/bin/bash
read old_sha new_sha refname
if git diff "$old_sha" "$new_sha" | grep -qE '^[+]?(<<<<<|>>>>>)'; then
    echo "Saw a conflict marker in $(basename "$refname")."
    exit 1
fi 
```

# windows-xp-embedded - 在 Windows XPembedded 上运行最新的 Firefox 或 Chrome

> ID：11358227
> 
> 赞同：1
> 
> 时间：2012-07-06T08:04:07.373
> 
> 标签：windows-xp-embedded

是否可以在 Windows XP Embedded 上运行最新版本的 Firefox (13.0.0.1) 或 Chrome (20.0)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:18:50.150

XPe 就是简单的组件化 XP，所以只要你想要的浏览器可以在 XP 上运行（Chrome 说它支持 XP，我想 FireFox 也支持，虽然我没有检查），那么它就可以在 XPe 上运行。

不过，这并不一定意味着它将在您的操作系统上运行。由于 XPe 是组件化的，因此您必须确保 Chrome/FireFox/Etc 使用的所有操作系统组件都在您构建的操作系统中。如果组件都在那里，并且操作系统设置为允许浏览器运行（请记住，它是嵌入式操作系统，操作系统设计人员可以确定哪些可以执行，哪些不能执行），那么您就可以开始了。

# haskell - Haskell 中的函数定义 (GHCİ)

> ID：11358230
> 
> 赞同：1
> 
> 时间：2012-07-06T08:04:16.650
> 
> 标签：haskell

我是 Haskell 的初学者。这个表达式有什么问题？：

```
Prelude> let { f op [] = [] ; f op (h:t) = op h : f op t }
Prelude> f (+) []
<interactive>:337:1:
    No instance for (Show (t0 -> t0))
      arising from a use of `print'
    Possible fix: add an instance declaration for (Show (t0 -> t0))
    In a stmt of an interactive GHCi command: print it 
```

非常感谢您的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:09:32.760

函数`(+)`有类型`(+) :: Num a => a -> a -> a`，函数`f`有类型`f :: (t -> a) -> [t] -> [a]`。

`f`期望一个参数的函数。

`f (+1) []`将是正确的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:19:54.863

推断您的函数具有这种类型：`(x -> y) -> [x] -> [y]`.

`(+)`有类型`Num a => a -> a -> a`。`(x -> y)`如果我们采用`x`to be`a`和`y`to be ，这可以是该类型的一个实例`a -> a`，所以一切都很好。所以空列表`f (+) []`必须是 type `[a]`，并且返回类型必须是`[a -> a]`（当然，所有这些都具有相同的`Num a`约束）。所以`f (+) []`正确地计算了一个空的 type 列表`Num a => [a -> a]`。

这一切都很好，但是 GHCi 想要打印你的表达式的结果。无法打印 type 的值`Num a => [a -> a]`，因为无法打印函数。这基本上是 GHCi 给你的错误：`No instance for (Show (t0 -> t0))`.

您的函数或对该函数的调用实际上没有任何问题。只是它会产生一个（空的）函数列表，您无法打印。如果您`let`改为绑定它，您将不会收到错误，并且您可以继续使用它来处理您通常期望能够使用`Num a => [a -> a]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:12:29.967

函数的类型`f`是：

```
Prelude> :t f
f :: (t -> a) -> [t] -> [a] 
```

如果你这样调用函数：

```
Prelude> f (+) [] 
```

...你得到了类型（让我们假设在这个例子中`(+)`只适用于s ）：`Int`

```
(+) :: Int -> Int -> Int
(t -> a) = (Int -> (Int -> Int))
t = Int
a = (Int -> Int) 
```

这意味着 to 的第二个参数`f`是 type`[t] = [Int]`并且返回类型是`[a] = [Int -> Int]`。因为返回类型是函数列表，并且函数无法显示，`ghci`所以会因为类型错误而拒绝“编译”表达式，并且您会看到您看到的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T08:15:34.737

该`f (+) []`函数返回一个函数列表：

```
Prelude> :t f (+) []
f (+) [] :: Num t => [t -> t] 
```

前奏试图`show`在结果列表的每个元素上调用函数，但是函数不是 Show 类型类的实例。

# jquery - 使用 JavaScript/jQuery 将整个页面（包括 doctype）从变量放入 iframe

> ID：11358231
> 
> 赞同：0
> 
> 时间：2012-07-06T08:04:29.500
> 
> 标签：jquery, iframe

有什么方法可以在文档中创建新的 iframe 并从变量中放入整页？我有新页面的源代码作为 var 中的字符串（包括 doctype、head 部分等）。我可以使用 jQuery 来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:21:02.650

要生成一个新元素并附加到另一个元素，请使用此[链接](https://stackoverflow.com/questions/268490/jquery-document-createelement-equivalent)（请参阅接受的答案）。将内容放入生成的 iframe 元素中，使用`$("#yourIdOfgeneratedIframe").html(theNameOfYourVariable)`

# javascript - 在 IE8 中打印 VML

> ID：11358236
> 
> 赞同：0
> 
> 时间：2012-07-06T08:04:55.083
> 
> 标签：javascript, printing, internet-explorer-8, vml

这是一个非常简单的 VML 示例，它在所有版本的 IE 上都可以正常显示。它还可以在除 IE8 之外的所有 IE 版本上打印。我知道可以让 IE8 打印 VML，但找不到我应该怎么做。感谢您的任何提示。

```
 <script type="text/javascript">

        window.onload = function ()
        {

            document.createStyleSheet().cssText = 'v\\:oval { behavior:url(#default#VML); display: inline-block}';                              
            document.namespaces.add('v', 'urn:schemas-microsoft-com:vml');

            var node = document.createElement("<v:oval>");
            node.style.width = "100px";
            node.style.height = "100px";                
            document.getElementById("mydiv").appendChild(node);  
        }

    </script>

    <div id="mydiv" style="background-color:#eeeeee; width: 800px; height: 620px;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:43:39.727

您必须将第三个参数添加到 document.namespaces.add：

```
 document.namespaces.add('v', 'urn:schemas-microsoft-com:vml', '#default#VML'); 
```

# iphone - 在 iPhone 应用程序中强制纵向布局 - 坏主意？

> ID：11358239
> 
> 赞同：1
> 
> 时间：2012-07-06T08:05:18.077
> 
> 标签：iphone, ios

我不是一个有经验的 iPhone 用户，所以我有一个关于在我的应用程序中处理纵向/横向布局的好方法的问题。

问题是我当前的 ui 的设计方式不太适合/不适合横向布局。那么，这是 iPhone 应用程序强制纵向布局的常见做法，还是这完全是个坏主意，最好投资于重新设计 ui？

此外，如果这是一种常见的方法 - 是否有一种标准的、可靠的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:07:26.923

可以只有纵向的应用程序（应用商店中有很多......）。甚至来自 Apple 本身的应用程序有时也只允许纵向，例如 App Store。在您的代码中注意这一点：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

默认情况下，它只允许纵向。在 iPad 外壳上，更常见的是同时拥有纵向和横向，但您仍然可以将其设为仅纵向。

# python - 具有相同键的 Python 字典

> ID：11358242
> 
> 赞同：2
> 
> 时间：2012-07-06T08:05:29.893
> 
> 标签：python, data-structures

我有一个包含字典的 python 列表，我想创建一个新列表，其中包含具有唯一键和关联列表值的字典，如下所示：

```
Input:
 [{1: 2}, {2: 2}, {1: 3}, {2: 1}, {1: 3}]
Output:
 [{1:[2,3,3]},{2:[2,1]}] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:13:31.447

怎么样：

```
input = [{1: 2}, {2: 2}, {1: 3}, {2: 1}, {1: 3}]

r = {}
for d in input:
    # (assumes just one key/value per dict)
    ((x, y),) = d.items() 
    r.setdefault(x, []).append(y)

print [ {k: v} for (k, v) in r.items() ] 
```

结果：

```
[{1: [2, 3, 3]}, {2: [2, 1]}] 
```

[更新]

> 只是好奇：你能解释一下`((x, y),) = d.items()`和中发生了`r.setdefault(x, []).append(y)`什么吗？——[该死的](https://stackoverflow.com/users/713495/damned)

首先是`((x, y),) = d.items()`：

*   此时， d 将是来自 的元素`input`，例如`{1: 2}`
*   `d.items()`将类似于`[(1, 2)]`
*   为了将 1 和 2 解包成 x 和 y，我们需要额外的`,`（否则解释器会认为外括号正在分组而不是定义单个元素元组）

`r.setdefault(x, []).append(y)`类似于：

```
if not r.has_key(x):
     r[x] = []
r[x].append(y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:14:03.647

诀窍是使用 dict.setdefault 开始一个列表并附加到它：

```
input = [{1: 2}, {2: 2}, {1: 3}, {2: 1}, {1: 3}]
output = {}
for d in input:
    for k,v in d.items():
        output.setdefault(k, []).append(v)

# output contains {1: [2, 3, 3], 2: [2, 1]}

output=[{k:v} for k,v in output.items()]

# output contains [{1: [2, 3, 3]}, {2: [2, 1]}] 
```

setdefault 所做的是返回以“k”为键的现有列表，或者如果字典中不存在该键，它会使用第二个参数为该键创建一个新条目并返回该条目。无论哪种方式，它都会返回列表，无论它是预先存在的还是新的，以便您可以附加到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:17:14.540

```
>>> lis=[{1: 2}, {2: 2}, {1: 3}, {2: 1}, {1: 3}]
>>> new_lis=[{}]
>>> for x in lis:
    for y in x:
       if y in new_lis[0]:
           new_lis[0][y].append(x[y])
           new_lis[0][y].sort()
       else :new_lis[0][y]=[x[y]]

>>> new_lis
[{1: [2, 3, 3], 2: [1, 2]}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:02:25.250

```
>>> data = [{1: 2}, {2: 2}, {1: 3}, {2: 1}, {1: 3}]
... 
... from itertools import groupby
... 
... keyFn = lambda x: x.keys()[0]
... 
... [{k: [i.values()[0] for i in g]} for k, g in groupby(sorted(data, key=keyFn), keyFn)]
0: [{1: [2, 3, 3]}, {2: [2, 1]}] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T10:43:16.850

```
output = []
for b in a:
  added = 0
  i = 0
  for c in output:
    if b.keys()[0] in c.keys():
       output[i][b.keys()[0]].append(b[b.keys()[0]])
       added = 1
    i += 1

  if not added:
    output.append({b.keys()[0]: [b[b.keys()[0]]]}) 
```

# ruby-on-rails - Rails 在会话中初始化默认值

> ID：11358245
> 
> 赞同：0
> 
> 时间：2012-07-06T08:05:44.523
> 
> 标签：ruby-on-rails, session

我有一个 Web 应用程序，我想将用户喜欢的样式表存储在会话中，我需要默认将其填充为某个默认值，直到用户未登录等。为此，我使用会话（可能不是最佳解决方案，但它没关系），我需要一个可以初始化这个变量的地方。例子 ：

```
session[:user_theme] = 'default.css' 
```

我不想在过滤某些功能之前每次都检查它，我想初始化一次，然后只通过 UI 进行更改。你能帮我找到更好的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:13:34.190

我认为应用程序控制器是一个好地方。类似的东西应该有效。

```
class ApplicationController < ActionController::Base
  before_filter :set_theme

  def set_theme
    session[:user_theme] ||= (current_user ? current_user.preferred_theme : 'default.css')
  end
end 
```

编辑

哎呀，我确实误读了问题。但我确实同意 Niels，这是最好的放置位置。并且 ||= aerator 只会将其初始化一次。

# linux - 如何使用openssl识别证书的RSA签名中使用的填充方案？

> ID：11358248
> 
> 赞同：3
> 
> 时间：2012-07-06T08:06:06.740
> 
> 标签：linux, cryptography, openssl, certificate, rsa

证书的签名可以使用不同的[RSA 填充方案](http://www.openssl.org/docs/crypto/RSA_public_encrypt.html)，如 PCKS1.5 、 PSS 等。使用 openssl 工具，如何识别 RSA 签名中使用的填充方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T09:03:13.963

您可以使用以下命令（假设证书以 DER - 二进制格式编码）：

```
openssl x509 -text -inform DER -in file.crt 
```

在序列号之后，您会找到编码为字符串的签名算法，例如`sha1WithRSAEncryption`.

[您可以在PKCS#1 RFC](http://www.ietf.org/rfc/rfc3447.txt)或扩展定义的其他 RFC（如[RFC4055](http://www.ietf.org/rfc/rfc4055.txt)）中查找此类字符串。

对于 RSA，类似的标识符`XXXwithRSAEncryption`表示 PKCS#1 v1.5 签名。标识符`id-RSASSA-PSS`指定了一个 PSS 签名，其他详细信息存储在与它一起显示的其他参数中。

# .net - 为什么 .Net 应用程序启动速度较慢？

> ID：11358252
> 
> 赞同：4
> 
> 时间：2012-07-06T08:06:25.350
> 
> 标签：.net, vb.net

即使是带有简单窗口的最基本应用程序也需要几秒钟才能启动，而其 Win32 等效程序会在瞬间加载。

我读到延迟不是由于 JIT 将操作码转换为机器代码所花费的时间，而是由于 Windows 加载 .Net 框架所花费的时间。

因此，使用 MS 的[tasklist.exe](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/tasklist.mspx) CLI 应用程序，我检查了 mscoree.dll 是否已经加载：

```
C:\>tasklist /m mscoree.dll

Image Name                   PID Modules
========================= ====== =====================
explorer.exe                 368 mscoree.dll
BSQLServer.exe               652 mscoree.dll
TOTALCMD.EXE                 408 mscoree.dll
Uedit32.exe                  260 mscoree.dll
OUTLOOK.EXE                 1912 mscoree.dll 
```

接下来，我只用一个 OK 按钮运行了我的基本应用程序，但仍然需要几秒钟才能显示出来。

假设 mscoree.dll 确实是加载 .Net 的证据，至少可以处理基本的 Windows，那么为什么会延迟呢？FWIW，它在 XPSP3 主机上。

即使为每个进程加载了整个 .Net 框架，因为它已经为其他进程启动并运行，我假设它只会从 RAM 中的其他进程复制代码？

谢谢你。

* * *

编辑：似乎较慢的初始启动时间是由于使用了防病毒/防火墙应用程序，而不是由于 JIT 或加载 .Net。另一个可能的问题：如果您的应用程序从冷状态启动有点慢，请确保它仅在启动时加载最低限度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:11:59.057

我在 Windows 7 上有一个简单的 c# 测试应用程序，可以立即启动，没有延迟。这是我在资源管理器中双击可执行文件的时候。在 VisualStudio 中，它需要几秒钟，因为 VS 然后检查是否需要编译东西，可能会进行一些调试等工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T04:51:37.967

Avast Antivirus 还使用一种称为“Deepscreen”的技术，该技术在可执行文件被允许启动之前对其进行检查。我在 Avast Exlusions 设置屏幕中为我的 VB.NET 应用程序的路径添加了一个例外，它现在立即启动，没有任何异常延迟。

# php - PHP regex 避免在使用 Unicode 时在字段中插入数字

> ID：11358253
> 
> 赞同：0
> 
> 时间：2012-07-06T08:06:37.210
> 
> 标签：php, regex, unicode

我的应用程序中有一个表格，将使用 Unicode 字符（非英语）填写。由于名称字段只需要填写字母，因此我必须将数字检测为错误。另一方面，我不知道如何编写适用于 Unicode 的确切正则表达式。
请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:12:57.597

我从以前的答案中得到了这个......但忘记了哪个 - 现在在我的片段库中......

```
$post = '9999, škofja loka';
echo preg_match('/^\\d{4},[\\s\\p{L}]+$/u', $post); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:13:15.843

`preg_match ('/\d/u', $string)`会做。

*u*修饰符可以安全地用于 unicode字符串

# shell - 壳牌。在变量中使用文件掩码

> ID：11358258
> 
> 赞同：0
> 
> 时间：2012-07-06T08:07:08.687
> 
> 标签：shell, scripting

我尝试在我的 kshell 脚本中使用一个变量，但无法获得好的结果。请帮忙。

```
FileMask='*.ext'
echo "FILEMASK: $FileMask"
/bin/executable -inputMask $FileMask 
```

`echo`显示`FILEMASK: *.ext`

但是在可执行文件中，我不是`*.ext`作为属性的参数，而是从当前目录`-inputMask`中获取所有文件的完整列表。`.ext`

如何使用变量的内容，但不对其进行评估？

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:10:18.213

引用变量的使用，即：

```
/bin/executable -inputMask "$FileMask" 
```

# objective-c - 用什么代替 QuickLook.framework 来处理 HTML？

> ID：11358266
> 
> 赞同：2
> 
> 时间：2012-07-06T08:07:30.360
> 
> 标签：objective-c, ios, xcode

我正在使用

> QuickLook.framework

以最简单的方式显示 pdf 文件，但现在我需要显示一个 HTML 文档，但它显示的是普通的不可读文本，以

> %PDF-1.3 %Äåòåë§ó ÐÄÆ 4 0 obj << /Length 5 0 R /Filter /FlateDecode >> 流

所以 QuickLook 显然不适合显示 HTML。
我可以使用什么来代替类似的工作方式？
或者我可以调整 QuickLook 以将其用于 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:56:03.277

在 iOS 上，`UIWebView`可以毫无问题地显示 PDF 文件。我已经多次这样做了，而且非常简单，您可以免费获得很多东西（滚动、缩放等）。

QuickLook[无法显示 HTML 内容](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)。

# objective-c - 缓存 NSData（带有 UIImages）

> ID：11358269
> 
> 赞同：2
> 
> 时间：2012-07-06T08:08:02.977
> 
> 标签：objective-c, xcode, multithreading, uitableview, uiimageview

目前，我正在为该网站开发客户端。我有大量的图像需要加载到我的 TableView 中。这是我正在做的事情：

```
NSDictionary *propertyItems = [self.items objectAtIndex:indexPath.row];
    cell.fio.font = [UIFont boldSystemFontOfSize:17.0f];

    if([propertyItems objectForKey:@"online"] == [NSNumber numberWithInt:1])
        cell.fio.textColor = [UIColor colorWithRed:0.3 green:0.6 blue:0.3 alpha:1.0];

    dispatch_queue_t downloadPhotosQueue = dispatch_queue_create("downloadPhotosQeue", NULL);
    dispatch_async(downloadPhotosQueue, ^{
        NSData *photosData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.example.com/%@", [propertyItems objectForKey:@"photo_trumb"]]]];
        dispatch_async(dispatch_get_main_queue(), ^{
            cell.pic.image = [UIImage imageWithData:photosData];
        });

    });

    cell.fio.text = [propertyItems objectForKey:@"fio"]; 
```

我在**cellForRowAtIndexPath:**方法中这样做。一切都在快速加载。但问题是，当我向下滚动表格并再次向上滚动时，图像会一遍又一遍地重新加载。

**问题：**有什么方法可以轻松缓存我从服务器获取的 UIImages？因此，如果它们被加载一次，它们就不会在我运行应用程序时一遍又一遍地重新加载。也许我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:12:43.383

要从网站加载图像，我使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它提供了一个从 URL 加载图像的类：

> 首先将#import "UIImageView+AFNetworking" 添加到控制器或视图实现文件的顶部。此类别向 UIImageView 添加方法，例如：
> 
> [imageView setImageWithURL:[NSURL URLWithString:@"…"]];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:15:29.477

我强烈推荐[AsyncImageView](https://github.com/nicklockwood/AsyncImageView/)。我使用它，它就像一个魅力。只需设置图像 url，它就会自己处理一切。

```
AsyncImageView *imageView = [[AsyncImageView alloc]init];
imageView.imageURL = [NSURL URLWithString:@"https://www.google.es/logos/classicplus.png"]; 
```

它将图像缓存在内存中，因此不会再次从服务器检索它。当收到内存警告时，它也会释放它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:31:31.430

我推荐[这个](https://github.com/rs/SDWebImage/)库来完成你想要的。

在`cellForRowAtIndexPath:`

```
 [cell.imageView setImageWithURL:
    [NSURL URLWithString:[NSString stringWithString:@"www.yourimagepath.path"]]
      placeholderImage:[UIImage imageNamed:@"no_image.jpg"]]; 
```

该库将为您缓存图像。还可以设置图片的setHolder，这样在下载图片的时候就不会像空白图片了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:15:12.257

问题在这里：

```
NSData *photosData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.example.com/%@", [propertyItems objectForKey:@"photo_trumb"]]]]; 
```

**dataWithContentsOfURL**

每次调用函数时（每次滚动），它都会向 Url 发起请求。您需要在 cellForRowAtIndexPath 之前加载所有图片。就像在 ViewDidLoad 中一样。您可以将它们存储在一个数组中，然后在 cellForRowAtIndexPath 中显示您的图片数组。

如果像你说的那样加载真的很快：jsut load picture Once in CellForRowAtIndexPath。将它们存储在 mutableArray 中。并检查图片是否已经存在。

# c++ - 为多个类包含一个标题

> ID：11358271
> 
> 赞同：0
> 
> 时间：2012-07-06T08:08:12.100
> 
> 标签：c++, include, header-files

我有很多课程，它们彼此非常接近，例如

```
class A
{
//code
};

class B
{
   A* field;
//code
};

class C: public B
{
//code
}; 
```

等等。而且我想将它们放在单独的标题中（`A.h`，`B.h`...），但为了避免将每个标题添加到项目中，我需要一个类似的标题`myLib.h`，这只是一个包含我编写的所有类的标题。我如何实现它？

我也认为不要使用`#pragma once;`并使其正常工作

```
#ifndef _MY_LIB_H
#define _MY_LIB_H
#endif 
```

我应该把它放在哪里？在每个标题中？

我试过这样做

```
class A;
class B;
... 
```

在`myLib.h`

但是添加`myLib.h`到`main.cpp`并不足以在那里使用 A 或 B 对象。另外，在`B.h`那

```
#inlude myLib.h

void someMethod()
{
//field is instance of A
  this.field.otherMethod();
} 
```

导致错误，因为 A 的方法是在 中声明的`A.h`，而不是在 中`myLib.h`。

对不起，冗长而纠结的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:11:13.087

`A.h`您应该在每个, ,`B.h`中使用单独的包含防护`C.h`：

```
// Note: not a good name for a guard macro (too short)
#ifndef _A_H
#define _A_H
    // definition of A
#endif 
```

然后`MyLib.h`变得简单：

```
#include<A.h>
#include<B.h>
#include<C.h> 
```

当然，您的每个标题都应该根据需要手动包含尽可能多的其他标题，以便它可以独立（例如，如果有人直接包含，则`C.h`需要包含`B.h`以便代码编译`C.h`）。

在某些情况下，您不需要一个标头包含另一个标头，因为前向声明就足够了——例如`B.h`，在`A*`声明成员的地方：

```
#ifndef _B_H
#define _B_H
class A;

class B
{
   A* field;
};
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:17:56.083

除了使用模式

```
#ifndef _A_H
#define _A_H

   ... Stuffs

#endif 
```

在每个标题中，我总是添加

```
#ifndef _A_H
#include <A.h>
#endif
#ifndef _B_H
#include <B.h>
#endif
.... 
```

到其他标题，例如`myLib.h`. 这大大提高了编译速度，因为编译器不需要加载和扫描已经扫描过的低级头文件。

I do not add this to my cpp files, because the number of headers in cpp is typically reasonable, while it mich more difficult to track relations between headers.

# c++ - 使用虚方法纠正行为

> ID：11358275
> 
> 赞同：3
> 
> 时间：2012-07-06T08:08:33.537
> 
> 标签：c++, inheritance, polymorphism, virtual-functions

假设我在接口中有一个纯虚方法，`base`它返回给我一个列表`something`：

```
class base 
{ 
public:
     virtual std::list<something> get() = 0; 
}; 
```

假设我有两个继承该类的`base`类：

```
class A : public base 
{ 
public:
     std::list<something> get();
}; 

class B : public base 
{ 
public:
     std::list<something> get(); 
}; 
```

我希望只有`A`类可以返回 a `list<something>`，但我还需要有可能使用`base`指针获取列表，例如：

```
base* base_ptr = new A();
base_ptr->get(); 
```

我必须做什么？

我必须返回指向此列表的指针吗？参考？

我必须从类的方法返回一个空指针`B`吗？还是在尝试使用`B`对象获取列表时抛出异常？还是我要更改`base`类方法`get`，使其不纯并在`base`课堂上完成这项工作？

我需要做点别的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T08:13:19.947

你没有别的事可做。您提供的代码正是这样做的。

当你得到一个指向基类的指针时，由于方法是在基类中声明的，并且是虚拟的，实际的实现将在类的虚函数表中查找并适当地调用。

所以

```
base* base_ptr = new A();
base_ptr->get(); 
```

将调用 A::get()。你不应该从实现中返回 null （你不能，因为 null 无论如何都不能转换为 std::list< something >）。由于基类方法被声明为纯虚拟，因此您必须在 A/B 中提供实现。

**编辑**：

你不能只让 A 返回一个 std::list< something > 而不是 B 因为 B 也继承了基类，并且基类有一个*必须*在派生类中重写的纯虚方法。从基类继承是一种“is-a”关系。我能看到的唯一另一种方法是从类中私有继承，但这会阻止派生到基的转换。

如果您真的不希望 B 具有 get 方法，请不要从 base 继承。一些替代方案是：

**在 B::get() 中抛出异常：** 您可以在 B::get() 中抛出异常，但请确保充分解释您的基本原理，因为它违反直觉。恕我直言，这是一个非常糟糕的设计，您可能会混淆使用您的基类的人。这是一个有漏洞的抽象，最好避免。

**单独的界面：** 您可以为此将基础分解为单独的界面：

```
class IGetSomething
{
public:
    virtual ~IGetSomething() {}
    virtual std::list<something> Get() = 0;
};

class base
{
public:
    // ...
};

class A : public base, public IGetSomething
{
public:
    virtual std::list<something> Get()
    {
        // Implementation
        return std::list<something>();
    }
};

class B : public base
{

}; 
```

这种情况下的多重继承是可以的，因为 IGetSomething 是一个纯接口（它没有成员变量或非纯方法）。

**编辑2**：

根据评论，您似乎希望能够在两个类之间拥有一个公共接口，同时能够执行一个实现执行但另一个实现不提供的某些操作。这是一个相当复杂的场景，但我们可以从 COM 中获得灵感（先别开枪）：

```
class base
{
public:
    virtual ~base() {}
    // ... common interface

    // TODO: give me a better name
    virtual IGetSomething *GetSomething() = 0;
};

class A : public Base
{
public:
    virtual IGetSomething *GetSomething()
    {
        return NULL;
    }
};

class B : public Base, public IGetSomething
{
public:
    virtual IGetSomething *GetSomething()
    {
        // Derived-to-base conversion OK
        return this;
    }
}; 
```

现在你可以做的是：

```
base* base_ptr = new A();
IGetSomething *getSmthing = base_ptr->GetSomething();
if (getSmthing != NULL)
{
    std::list<something> listOfSmthing = getSmthing->Get();
} 
```

它很复杂，但这种方法有几个优点：

*   您返回公共接口，而不是具体的实现类。

*   您将继承用于其设计目的。

*   很难误用：base没有提供std::list get()，因为它不是具体实现之间的常用操作。

*   您明确了 GetSomething() 的语义：它允许您返回一个接口，该接口可用于检索某物的列表。

    > 只返回一个空的 std::list 怎么样？

这是可能的，但糟糕的设计，就像拥有一台可以提供可口可乐和百事可乐的自动售货机，但它从不供应百事可乐；它具有误导性，最好避免。

> 只返回一个 boost::optional< std::list< something >> 怎么样？（由安德鲁建议）

我认为这是一个更好的解决方案，比返回和有时可能为 NULL 有时不是的接口更好，因为这样您就明确知道它是可选的，并且不会有任何错误。

缺点是它将 boost 放在你的界面中，我更愿意避免这种情况（使用 boost 取决于我，但界面的客户端不应该被迫使用 boost）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:21:49.427

你在做什么是错误的。如果它对两个派生类都不通用，那么您可能不应该在基类中拥有它。

除此之外，没有办法实现你想要的。您还必须在 B 中实现该方法-这正是纯虚函数的含义。但是，您可以添加一个特殊的失败案例——例如返回一个空列表，或者一个包含一个包含预定无效值的元素的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:13:27.757

`boost::optional`如果您需要不返回的能力，请返回（在 B 类中）

```
class base 
{ 
public:
     virtual boost::optional<std::list<something> > get() = 0; 
}; 
```

# android - 在 Logcat 中打印 InputStream

> ID：11358277
> 
> 赞同：3
> 
> 时间：2012-07-06T08:08:37.223
> 
> 标签：android, inputstream

我想在logcat中打印InputStream（用于测试/稍后我将使用它），我当前的代码如下。

```
 @Override
        protected Void doInBackground(Void... params) {

            try {

                InputStream in = null;
                int response = -1;

                URL url = new URL(
                        "http://any-website.com/search/users/sports+persons");
                URLConnection conn = null;
                HttpURLConnection httpConn = null;
                conn = url.openConnection();

                if (!(conn instanceof HttpURLConnection))
                    throw new IOException("Not an HTTP connection");

                httpConn = (HttpURLConnection) conn;
                httpConn.setAllowUserInteraction(false);
                httpConn.setInstanceFollowRedirects(true);
                httpConn.setRequestMethod("GET");
                httpConn.connect();

                response = httpConn.getResponseCode();
                if (response == HttpURLConnection.HTTP_OK) {
                    in = httpConn.getInputStream();
                }

                if (in != null) {
                    Log.e(TAG, ">>>>>PRINTING<<<<<");
                    Log.e(TAG, in.toString());
                   // TODO: print 'in' from here
                }
                in.close();
                in = null;

            } catch (Exception e) {
                e.printStackTrace();
            }

            return null;
        } 
```

但我无法做到这一点，所以请检查代码并添加/修改代码来做到这一点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T08:21:32.327

```
String convertStreamToString(java.io.InputStream is) {
    try {
        return new java.util.Scanner(is).useDelimiter("\\A").next();
    } catch (java.util.NoSuchElementException e) {
        return "";
    }
} 
```

在您的代码中：

```
 Log.e(TAG, ">>>>>PRINTING<<<<<");
                Log.e(TAG, in.toString());
                Log.e(TAG, convertStreamToString(in)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:17:43.090

```
Just add this code to if(in != null):   

    byte[] reqBuffer = new byte[1024];
    int reqLen = 1024;
    int read = -1;

    StringBuilder result = new StringBuilder();
    try {
        while ((read = is.read(reqBuffer, 0, reqLen)) >= 0)
            result.append(new String(reqBuffer, 0, read));
    } catch (IOException e) {
        e.printStackTrace();
    } 

Log.d("TAG", result.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:15:22.653

你`TAG`应该是一个常数，如：

```
public final String TAG = YourActivity.class.getSimpleName(); 
```

然后你会做类似的事情：

```
Log.e(TAG, "You're message here:", e) 
```

e 是来自打印堆栈的错误。

您还需要确保将 Log 导入 Android 库中。

此外，在查看您的代码之后，您可能希望`httpConnection()`用 try/catch 语句包围您的语句，这样您就可以捕获错误并将其放入您的日志文件中。如果您的流有某些内容或不为空，您将打印日志，但您想知道是否没有连接，这会给您一个空值。

希望有帮助。

# javascript - JavaScript，CSS：剪辑在父 DIV 内

> ID：11358279
> 
> 赞同：4
> 
> 时间：2012-07-06T08:08:41.087
> 
> 标签：javascript, css

## 语境

我有一堆嵌套的 DIV（实现一个简单的窗口系统，用于学习目的，使用 DIV）。

## 问题：

设 divA = divB 的子级。

现在，理想情况下，我希望将 divA 的内容“剪切”到 divB 中。

因此，如果我把 divA 拖到右边……当它离开 divB 的边界时，我希望 divB 之外的 divA 部分被切掉并且不显示。

## 问题：

我该怎么做呢？如何使用一个 div 剪辑/屏蔽另一个 div？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T08:17:24.100

它被称为：

```
.divA {
    overflow: hidden;
} 
```

[w3学校](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:17:43.720

使用 css`overflow`属性。按照**[此链接](http://www.w3schools.com/cssref/pr_pos_overflow.asp)**查看有哪些值`overflow`

# javascript - Cke Dialog窗口添加简单功能

> ID：11358286
> 
> 赞同：0
> 
> 时间：2012-07-06T08:09:14.100
> 
> 标签：javascript, jquery, dialog, ckeditor

在对话框窗口中，如果您上传 swf 文件，链接将转到“信息”中的 URL 框...

是否可以将文件的源（路径）从其中复制到标题中的高级选项卡？（只是路径）

我知道我必须更改 flash.js 中的一些内容，但我不知道是什么..在以下代码中是将 url 复制到 info:src 的代码。

```
 type:'fileButton',id:'uploadButton',label:j.lang.common.uploadSubmit,filebrowser:'info:src 
```

如果我将其更改为高级：标题链接转到标题字段但我不想要目标网址我想要源网址...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:05:00.757

**这是做不到的。**

一些参考资料：
**W3C：HTML 和 XHTML 的词汇表和相关 API**
[4.10.7.1.18 文件上传状态（类型=文件）](http://www.w3.org/TR/html5/states-of-the-type-attribute.html#fakepath-srsly)：
由于历史原因，值 IDL 属性在文件名前加上字符串“C:\fakepath\”。**一些旧版用户代理实际上包含完整路径（这是一个安全漏洞）。**

[4.10.7.4 通用输入元素API](http://www.w3.org/TR/html5/common-input-element-apis.html#common-input-element-apis)
`input . value [ = value ]`
`filename`
**在获取时，它必须返回字符串“C:\fakepath\”**，后跟所选文件列表中第一个文件的文件名（如果有），如果列表为空，则返回空字符串。设置时，如果新值为空字符串，则必须清空所选文件列表；否则，它必须抛出 InvalidStateError 异常。

注意：这个“假路径”要求是历史的不幸事故。有关详细信息，请参阅文件上传状态部分中的示例。

**Mozilla Developer Network**
使用来自 Web 应用程序的文件
[获取有关选定文件](https://developer.mozilla.org/en/Using_files_from_web_applications#Getting_information_about_selected_files)
的信息 File 对象提供了三个属性，其中包含有关文件的有用信息。
1)`name`
文件名作为只读字符串。这只是文件名，**不包含任何路径信息。**

**Internet Explorer 开发者中心**> 文档 > Internet Explorer API 参考 > HTML/XHTML 参考 > 属性 >
[值（输入类型=文件）](http://msdn.microsoft.com/en-us/library/ie/ms535128%28v=vs.85%29.aspx)

**备注：**
Windows Internet Explorer 8 及更高版本。当使用输入 type=file 对象选择文件时，value 属性的值取决于用于显示网页的安全区域的“将文件上传到服务器时包括本地目录路径”安全设置的值包含输入对象。

仅当启用此设置时，才会返回所选文件的完全限定文件名。禁用该设置时，**Internet Explorer 8 将本地驱动器和目录路径替换为字符串 C:\fakepath\，以防止不适当的信息泄露。**

为了说明，假设您尝试上传名为 C:\users\contoso\documents\file.txt 的文件。执行此操作时，value 属性的值设置为 c:\fakepath\file.txt。

* * *

浏览器不会将客户端计算机目录的路径传递到网页，这是一个安全和隐私问题。它们只传递已选择的实际文件。

CkEditor 不控制文件上传。文件浏览器/上传器会这样做，但它只将目标 URL 传递给 CkEditor。

文件浏览器/上传器通过flash.js 文件中`_source\plugins\filebrowser\plugin.js`调用的文件进行控制。`filebrowser`

您可以通过查看配置中的这些设置来检查文件浏览器和上传器的位置：

`config.filebrowserFlashBrowseUrl =`

`config.filebrowserFlashUploadUrl =`

根据您的评论，您正在使用 CkFinder 文件管理器：[CkFinder - Ajax 文件管理器](http://ckfinder.com/)

它是由制作 CkEditor 的同一个人制作的，但它不像 CkEditor 那样免费。CkFinder 许可证的收入有助于使 CkEditor 保持免费和最新。

# android - 禁用android主页按钮和通知栏

> ID：11358294
> 
> 赞同：0
> 
> 时间：2012-07-06T08:09:48.280
> 
> 标签：android, notifications, homescreen

我使用以下代码禁用了通知栏

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

我使用以下代码禁用主页按钮

```
@Override
public void onAttachedToWindow()
{  
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);     
    super.onAttachedToWindow();  
} 
```

但是当我使用上面的代码禁用主页按钮时，通知会显示在顶部。
谁能告诉我如何实现这两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:54:11.960

`onCreate()`在调用之前将此代码添加到您的方法中`setContentView()`

```
this.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:18:06.027

您可以通过 onKeyDown 回调拦截 HOME 按钮，并采取适当的措施，但我不确定它是否会起作用。自己没试过。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_HOME) {
            // Do nothing, or everything else you want to do when the HOME is pressed.
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:52:15.763

利用

```
<activity
    android:label="@string/app_name"
    android:name=".MyActivity"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" /> 
```

反而

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

# javascript - jQuery simply not working?

> ID：11358297
> 
> 赞同：0
> 
> 时间：2012-07-06T08:10:02.667
> 
> 标签：javascript, jquery, html, class

I have a webpage including the following div:

```
<div class='book_box'>
    <table border=0 cellspacing=0>
        <tr>
            <td align='center'><img src='img/theseven.jpg' /></td>
        </tr>
        <tr>
            <td align='center'>The Seven by Derek Edgington</td>
        </tr>
    </table>
</div> 
```

And I have this Javascript code in my header:

```
$('.book_box').hover(
    function() {
        $(this).css('background', '#ffffff');
    },
    function() {
        $(this).css('background', '#a8ff9a');
    }
); 
```

...and it simply doesn't work. I have tested and ensured jQuery is loaded correctly and have performed some other operations with it. This code just seems to not work?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:14:33.557

Without any change in code , ITs working for me here is demo on JSFiddle

[DEMO](http://jsfiddle.net/76bEw/)

Suggestion : just make use of`$(document).ready`

```
$(document).ready(function() {
  $('.book_box').hover( function() {
      alert('abc');
      $(this).css('background', '#ffffff'); 
    },
    function() { 
      alert('abc1');
      $(this).css('background', '#a8ff9a'); 
    } 
  );  
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:13:23.207

You need to put the code in dom ready callback function. Or your code will executes before the `.book_box` div is ready.

```
$(function() {
  // put your code here.

}); 
```

It is the short cut of

```
$(document).ready(function() {
  // put your code here.

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:12:54.487

try:

```
 $('.book_box').hover(
function() {
    $(this).css(backgroundColor, '#ffffff');
},
function() {
    $(this).css(backgroundColor, '#a8ff9a');
}

); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:35:24.730

On Firefox and Opera on Linux it is working all right, but maybe you try this:

```
$(function() {
            $('.book_box table').hover(
            function() {
                $(this).css('background', '#ffffff');
            },
            function() {
                $(this).css('background', '#a8ff9a');
            }
        );
}); 
```

Have you took a look at the (Firefox) error console?

# extjs - 分组网格行明智

> ID：11358301
> 
> 赞同：1
> 
> 时间：2012-07-06T08:10:05.923
> 
> 标签：extjs, grid, extjs4, grouping, extjs4.1

我有一个网格，它以列的形式显示值。但我希望它显示为行；如下图所示：

![在此处输入图像描述](../Images/5a980ab4bb7739b88c021f84bd5413d7.png)

我的代码如下。目前我可以按列查看数据，而不是按行（分组在另一个下），如图所示。如何按行对组件进行分组？

```
initComponent: function() {
            var groupingFeature = Ext.create('Ext.grid.feature.Grouping', {
                groupHeaderTpl: 'Group: {name} ({rows.length})', /
                startCollapsed: true          
            });
            this.columns = [
            { text: "Name", dataIndex: 'f_name' },
    ...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:05:00.713

您还需要将其添加到您的商店定义中：

```
...
groupField: 'f_topic' // or whatever your field name is 
... 
```

# git - 在大型项目中使用 zend 框架和 git

> ID：11358308
> 
> 赞同：12
> 
> 时间：2012-07-06T08:10:35.083
> 
> 标签：git, zend-framework, modular

我在一个相当大的项目中使用 zf 和 git 时遇到了一些问题。zf 应用程序有大约 20 个模块，目前所有内容都存储在一个 git 存储库中。因此，当您签出应用程序时，您会签出整套模块、css 工作表、js 文件等。

我想做的，就像在 wordpress 或 drupal 中一样：你有你的核心应用程序，并且对于每个模块，你都有一个单独的 git 存储库，你可以在模块目录中签出。结帐后，您对其进行处理，然后提交。但是使用zend你不能这样做，因为媒体文件（css，js，图像）存储在/public中的不同目录中（每个模块可能有它自己的css，js文件在/public/_MODULE_NAME_/css例如）。我在 /application/modules/ 工作。

所以问题是如何使用 zend 框架模块化应用程序和 git？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:32:11.267

我通常设法处理软链接的设置，在 web 文件夹中有一个超级项目，并将模块从不同的文件夹符号链接到：

```
* SuperProject/
  + application/
    + ModuleA --> ../../Modules/ModuleA/application
    + ModuleB --> ../../Modules/ModuleB/application
    + config/
    + views/
    + layouts/
  + public/
    + ModuleA --> ../../Modules/ModuleA/public
    + ModuleB --> ../../Modules/ModuleB/public
    + css/
    + js/
  + library/
+ Modules/
  * ModuleA/
    + application/
      + config/
      + views/
      + models/
    + public/
      + css/
      + js/
  * ModuleB/
    + application/
      + config/
      + views/
      + models/
    + public/
      + css/
      + js/ 
```

带星号的目录是存储库，SuperProject/public 是 http 服务器的入口点（当然启用了符号链接）。您显然没有在您的 SuperProject 存储库中添加任何模块文件，而只是在全局目录（例如 application/config/）中添加了更改 - 充其量，您通过 .git_ignore 文件忽略模块。由于此方法依赖于符号链接，因此它仅适用于 unixoid 系统。虽然不完美，但它是最省事的。

# unit-testing - Nexus/Artifactory 类似 maven 代理，用于单元测试

> ID：11358311
> 
> 赞同：0
> 
> 时间：2012-07-06T08:10:55.613
> 
> 标签：unit-testing, maven, nexus

我目前正在为一个相对较大的测试项目开发一个测试套件。这是 flexmojos 项目的测试工具。我在这里写下了测试套件的一般工作原理：[https ://flexmojos.atlassian.net/wiki/display/FLEXMOJOS/How+the+flexmojos-test-harness+works](https://flexmojos.atlassian.net/wiki/display/FLEXMOJOS/How+the+flexmojos-test-harness+works)

我现在的问题是，目前在构建的初始化阶段有很多东西被复制到 test-local-repo，但不是所有的东西（列出所有东西都会导致巨大的 pom）。该构建配置为首先查看我的主要本地存储库，如果在那里找不到，则下载它。因此，当构建运行时，会从远程仓库加载很多东西。不幸的是，每次执行测试套件时都会这样做。

我想做的是设置某种本地nexus / artifactory-like插件，它从我的主要本地仓库提供东西，并从我的主要mavens仓库中获取它无法找到的东西（在我的主要设置中配置.xml）。我现在想使用这个插件作为我构建的主仓库，所以它需要的工件只在第一次执行测试套件时下载。

请告诉我有这样的东西可用:-)

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:35:51.423

我知道的最好的事情是模拟代理的[Mock Repository Manager Maven 插件。](http://mojo.codehaus.org/mrm-maven-plugin/)最好的组合通常用于 Maven 插件的集成测试，通常使用[maven-invoker-plugin](http://maven.apache.org/plugins/maven-invoker-plugin/)。但我认为 mrm 插件应该适合你的需要。

# iphone - 在 iPad/iPhone 上加密的数据？

> ID：11358312
> 
> 赞同：3
> 
> 时间：2012-07-06T08:11:10.203
> 
> 标签：iphone, ipad, encryption

存储在 iPad/iPhone 上的数据是否加密？我假设 iPad/iPhone 有一个高级密码（不仅仅是 4 位密码）。所以我的问题是我的自定义应用程序存储在设备中的数据是否加密（如果应用程序的源代码中没有采用特殊方法）。攻击者能否读取数据？如果他越狱设备怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T08:53:04.540

我刚刚开始熟悉 iOS 中的安全性，但是根据我从 [Apple 的 IOS 安全白皮书](http://images.apple.com/iphone/business/docs/iOS_Security_Oct12.pdf)中阅读和理解的内容，文件由每个文件加密密钥加密，并且由拥有文件的应用程序分配的类密钥加密（它们是与应用程序一起沙盒化）。然后，文件访问取决于您在应用程序中分配的保护策略。

但是，从这个[答案](https://security.stackexchange.com/questions/1107/ios-encryption-details)中，不清楚加密是始终打开，还是仅在设备关闭或解锁时。

无论如何，以上内容适用于非越狱系统（不确定它们是否也适用于越狱系统）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:47:11.900

如果您不对它应用任何加密技术，答案是否定的。您可以尝试使用 iExplorer 浏览设备应用程序的所有沙箱。您可能会对许多应用程序的安全性感到惊讶。

# jquery - JQUERY + 使用浏览器放大

> ID：11358314
> 
> 赞同：0
> 
> 时间：2012-07-06T08:11:16.237
> 
> 标签：jquery, css

我不是 100% 确定如何问这个问题，所以我会尽力而为。

我正在开发一个网站，该网站的顶部横幅带有最左侧的徽标。

![在此处输入图像描述](../Images/911735353ce8f77a80d678a2574a4605.png)

当我在上网本（小屏幕）上访问网站或使用浏览器放大（CTRL 然后使用鼠标滚轮）时，徽标会出现在横幅上的其他项目上。

![在此处输入图像描述](../Images/61c8d392ff237100ca49f4676b617f68.png)

有没有办法让我检测到徽标不适合 JQUERY 然后隐藏它？我可以告诉用户看到了多少页面然后进行调整吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:59:49.643

此问题的主要原因是您的 Html 控件没有正确紧密地绑定在一起。如果您可以在 Html 页面中使用表格，那么它将为您工作。将您的徽标放在表格的第一个单元格中。这样设计就不会在放大时失真。

# selenium - Selenium WebDriver：打开新选项卡而不是新窗口

> ID：11358316
> 
> 赞同：14
> 
> 时间：2012-07-06T08:11:23.443
> 
> 标签：selenium, selenium-webdriver, tabs, window, webdriver

我正在使用 Selenium WebDriver。每个链接都在新的浏览器窗口中打开。这对我来说不方便。如何更改它以使其仅在新选项卡中打开？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-02-24T13:45:47.437

Selenium 现在能够切换标签。下面的代码1：适用于firefox，code2：适用于IE和chrome，我们可以使用Robot类，并且控件不会自动移动到当前选项卡，因此我们需要使用窗口句柄方法切换到当前选项卡。当我们运行单个脚本时，下面给出的代码会很好地工作，但是当作为一个套件运行时，您可能会在执行键盘事件时感到痛苦。为了避免我们不得不通过在 selenium-Java 中使用 javascript 执行程序来使用用户定义的 javascript 方法来解决其他可能性。

我们可以通过识别为我们打开的每个窗口分配的名称来在窗口和选项卡之间切换，并且名称将是字母数字字符。

```
 ***Code 1***
    //First tab(default tab)
    driver.navigate().to("http://www.google.com");
    driver.manage().window().maximize();

    //second tab
    driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "t");
    driver.navigate().to("https://yahoo.com");

    //third tab
    driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "t");
    driver.navigate().to("http://www.google.com");

    //move to very first tab.
    driver.findElement(By.cssSelector("body"))
            .sendKeys(Keys.CONTROL + "\t");

    // To close the current tab.    
    driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "w");
    **code 2**
    driver.navigate().to("http://www.google.com");
    driver.manage().window().maximize();

    Robot robot = new Robot();
    robot.keyPress(KeyEvent.VK_CONTROL);
    robot.keyPress(KeyEvent.VK_T);

    Set<String> handles = driver.getWindowHandles();
    List<String> handlesList = new ArrayList<String>(handles);
    String newTab = handlesList.get(handlesList.size() - 1);

    // switch to new tab
    driver.switchTo().window(newTab); 
    driver.get("http://www.yahoo.com"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T08:38:50.783

Selenium 目前无法切换选项卡。因此，我们强制浏览器在新窗口中打开链接，但由于我们能够切换窗口，我们强制浏览器采用这种方法。这**可能**会在以后的版本中修复

# javascript - 为什么 requirejs 试图将 '.js' 附加到使用 !text 插件加载的 .jst 模板文件？

> ID：11358320
> 
> 赞同：6
> 
> 时间：2012-07-06T08:11:54.880
> 
> 标签：javascript, requirejs

我对模板文件使用 .jst 扩展名，并使用 requirejs 文本加载这些文件！插入。例如，

```
define([
  'jquery',
  'backbone',
  'underscore',
  'text!templates/MyView.jst'
],
function($, Backbone, _, templateText) {
  return Backbone.View.extend({
    template: _.template(templateText),
    initialize: function() {

    },
    render: function() {
    }
  });
}); 
```

当我在本地测试时，这很有效。但是，当我在将静态文件部署到 AWS（应用程序的动态部分在 Heroku 上运行）之后尝试执行此操作时，它无法加载 .jst 文件并且似乎正在尝试将 .js 附加到它们的网址的。

作为参考，这是我的 requirejs 配置（来自 main.js）

```
requirejs.config({
  paths: {
    //directories
    plugins: "lib/plugins",

    //libs
    jquery: "lib/jquery/1.7.1/jquery",
    underscore: "lib/underscore/1.3.3/underscore",
    backbone: "lib/backbone/0.9.2/backbone",
    moment: "lib/moment",  // date lib

    //require plugins
    text: "lib/require/plugins/text",
    domReady: "lib/require/plugins/domReady"
  },
  shim: {  //specify all non-AMD javascript files here.
    backbone: {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    },
    underscore: {
        exports: '_'
    },
    moment: {
        exports: 'moment'
    },
    'plugins/jquery.colorbox': ['jquery'],
    'util/jquery.dropTree':['jquery'],
    'util/common':['jquery']
  }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T21:08:11.140

我刚刚用解释这个问题的信息更新了 text.js README。它基本上是一种跨域使用文本资源的方法，但它需要构建。有一种方法可以覆盖。详情在这里：

[https://github.com/requirejs/text#xhr-restrictions](https://github.com/requirejs/text#xhr-restrictions)

# unix - 通过 Skype 流式传输音乐或音频文件

> ID：11358321
> 
> 赞同：0
> 
> 时间：2012-07-06T08:11:56.020
> 
> 标签：unix, audio, debian

我想通过 Skype 将音乐或音频文件通过互联网传输给另一个人。我正在使用Debian挤压。我的想法：为麦克风等打开音频流并将音频文件添加到流中。我不想使用音频输入输出桥接器，而是使用软件解决方案。有没有类似的项目？如何操作音频输入流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:16:52.630

Linrad 是您最好的选择。Linux 声音系统 ALSA 具有一种机制，通过该机制可以将一个程序的输出发送到另一个程序的输入。

[http://www.sm5bsz.com/linuxdsp/install/snd-aloop.htm](http://www.sm5bsz.com/linuxdsp/install/snd-aloop.htm)

# java - 通过代理连接到远程 weblogic 服务器时出现问题

> ID：11358328
> 
> 赞同：1
> 
> 时间：2012-07-06T08:12:20.970
> 
> 标签：java, url, proxy, weblogic

我在我的java源代码中配置了一个代理：

```
systemSettings.put("http.proxyHost", "www.proxyserver.com");
systemSettings.put("http.proxyPort", "8080");
systemSettings.put("http.nonProxyHosts", "10.x.y.z"); 
```

这里 10.xyz 是我的 weblogic 服务器的实际 IP。但是每当代码尝试连接到 weblogic 服务器时，我都会收到以下错误：

> 引起：java.net.ConnectException: t3://10.xyz:7001: Destination unreachable; 嵌套异常是：java.net.ProtocolException：无法识别来自代理的响应：'HTTP/1.0 403 Forbidden'；在 weblogic.rjvm.RJVMFinder.findOrCreate(RJVMFinder.java:170) 在 weblogic.rjvm.ServerURL.findOrCreateRJVM(ServerURL.java:153) 的 weblogic.rjvm.RJVMFinder.findOrCreateInternal(RJVMFinder.java:216) 没有可用的路由器到目的地在 weblogic.jndi.WLInitialContextFactoryDe​​legate$1.run(WLInitialContextFactoryDe​​legate.java:345) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:363) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java: 146) 在 weblogic.jndi.WLInitialContextFactoryDe​​legate.getInitialContext(WLInitialContextFactoryDe​​legate.java:340)

似乎设置 http.nonProxyHosts 没有按预期工作。我试图通过 Internet 找到解决方案，但大多数都说删除代理设置。我无法删除代理，因为我的代码尝试连接到某些 Internet URL。另请注意，weblogic 服务器位于远程计算机上。您能否给我一个提示，这里一定是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:14:25.703

看看[这个 OTN 线程](https://forums.oracle.com/forums/thread.jspa?threadID=2266321)。

从第三条评论：

> 1.  您正在通过 System.setProperties() 设置 nonProxyHosts，它不作为系统属性存在。

到目前为止我还没有阅读所有内容，但似乎 system.properties 不是设置 nonProxyHosts 的便捷方法。

您是否尝试从命令行设置它？

```
-Dhttp.nonProxyHosts="*.foo.com|localhost". 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:50:58.043

我解决了这个问题。在设置与 weblogic 的连接时，我最初设置了代理。所以由于一些网络限制，我相信它没有用。在修改后的代码中，我使用相同的 3 行来设置代理：

```
System.setProperty("java.net.useSystemProxies", "false");
System.setProperty("http.proxyHost", "www.proxyserver.com");
System.setProperty("http.proxyPort", "8080"); 
```

唯一的区别是，我是在我需要的地方做的。因此，不会使用带有 weblogic 代理的初始连接设置。我也不必绕过，weblogic server URL 不使用代理。

@Arcadien：感谢您为帮助我所做的努力。谢谢。

# sql - LEFT JOIN 的查询问题

> ID：11358336
> 
> 赞同：1
> 
> 时间：2012-07-06T08:12:50.413
> 
> 标签：sql, sql-server-2008, azure-sql-database

*要求*：从提供的租户的**UserLogin表中获取****登录**表中的所有用户+ 及其*最新*登录记录

 ***当前查询*：

```
SELECT [USER].UserName , UserLogin.AttemptDate , UserLogin.LogoutDate
FROM [User] LEFT JOIN UserLogin 
ON [User].UserId = UserLogin.UserId 
WHERE  [User].TenantId=3 
ORDER BY UserLogin.LogoutDate desc 
```

*问题：*重复用户名不明确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:31:23.507

```
SELECT
    a.UserName,
    c.AttemptDate,
    c.LogoutDate
FROM
    [User] a
LEFT JOIN
    (
        SELECT UserId, MAX(LogoutDate) AS maxdate
        FROM UserLogin
        GROUP BY UserId
    ) b ON a.UserId = b.UserId
LEFT JOIN
    UserLogin c ON b.UserId = c.UserId AND b.maxdate = c.LogoutDate
WHERE
    a.TenantId = 3
ORDER BY
    c.LogoutDate DESC 
```

此查询具有与 DBMS 无关的额外优势（除了 周围的括号`User`），并且不依赖于窗口函数或外部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:22:42.353

似乎每个 UserId 在 UserLogin 中有多个匹配项，您必须优先考虑 UserLogin 中给定 UserId 的记录，并在结果集中选择您想要的记录：

```
SELECT [USER].UserName , x.AttemptDate , .LogoutDate
FROM [User] 
LEFT JOIN 
(
    SELECT  *,
            ROW_NUMBER() OVER (PARTITION BY UserId ORDER BY <PriorityCondition>) Priority
    FROM    UserLogin 
) x

ON [User].UserId = x.UserId AND x.Priority = 1
WHERE  [User].TenantId=3 
ORDER BY x.LogoutDate desc 
```

就像在这个例子中一样：

```
DECLARE @User TABLE (UserId INT, UserName VARCHAR(100), TenantId INT)
INSERT @User VALUES (1, 'a', 3), (2, 'b', 3)

DECLARE @UserLogin TABLE (UserId INT, UserName VARCHAR(100), AttemptDate DATETIME, LogoutDate DATETIME)
INSERT @UserLogin VALUES (1, 'a', GETDATE(), GETDATE()), 
(2, 'b', GETDATE(), GETDATE()),
(2, 'b', GETDATE(), DATEADD(DAY, -1, GETDATE()))

SELECT y.UserName , x.AttemptDate , x.LogoutDate
FROM @User y
LEFT JOIN 
(
    SELECT  *,
            ROW_NUMBER() OVER (PARTITION BY UserId ORDER BY LogoutDate DESC) Priority
    FROM    @UserLogin 
) x 
ON y.UserId = x.UserId AND x.Priority = 1
WHERE  y.TenantId=3 
ORDER BY x.LogoutDate DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:40:18.473

```
with cte as(
SELECT [USER].UserId , max(UserLogin.LogoutDate ) [LogoutDate]
FROM [User] JOIN UserLogin 
ON [User].UserId = UserLogin.UserId 
WHERE  [User].TenantId=3 
group by [USER].UserId 
 )
 select U.UserName,L.AttemptDate , L.LogoutDate from cte C , UserLogin L,
 [User] U
 where C.LogoutDate=L.LogoutDate
 and C.UserId=L.UserId
 and U.UserId=L.UserId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:21:08.060

如果我理解正确

```
SELECT [USER].UserName , UserLogin.AttemptDate , MAX(UserLogin.LogoutDate) FROM [User] LEFT JOIN UserLogin  ON [User].UserId = UserLogin.UserId  WHERE  [User].TenantId=3 ORDER BY UserLogin.LogoutDate desc 
```**

# c# - OOP 对象实例化

> ID：11358337
> 
> 赞同：-1
> 
> 时间：2012-07-06T08:12:51.353
> 
> 标签：c#, oop, object

在 C# 中，我现在有一个名为 myclass 的类，

我正在创建一个这样的对象，

```
myclass myx = new myclass(); 
```

然后

```
myx = new myclass(); 
```

它没有给出任何错误，但这意味着什么......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T08:16:11.507

这意味着您正在创建另一个实例并将其分配给您的变量，有效地“放弃”您使用 new 创建的第一个实例。

垃圾收集器会知道在某个时候清理旧的。您不能再访问它，因为您没有将它保存到另一个变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:15:46.067

这意味着您正在丢弃第一个 myclass 实例并创建一个新实例。可能还有其他代码在处理第一个代码，例如将其添加到列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:15:53.937

`myclass myx = new myclass();`这一行有声明和初始化

但

`myx = new myclass();`这只有一个先前声明的对象的初始化

如果你想要一个错误然后`myclass myx = new myclass();`从你的代码中删除，你肯定会得到一个错误。简而言之`new`，关键字用于任何对象的初始化，但必须首先声明该对象，这可以在同一行完成，也可以在对象声明后的其他地方完成。

有关`new` [转到此处的更多信息](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:29:53.783

您可能知道 .Net 语言中有两种不同类型的对象，引用类型和值类型。（类与结构）.Net 以不同的方式管理每种类型。当您将引用类型设置为变量时，它的名称意味着对该对象的内存地址保存在变量中，但是当您将值类型对象（诸如 int 、 long 和 ... 的结构）设置为变量时，您实际上将值保存在变量中。因此在这种情况下：

```
var a=new MyClass();
var b=a; 
```

如果 MyClass 是一个类，a 和 b 都引用内存上的同一个对象，否则两者都有不同的值，因此如果我们这样做：

```
a.Value=5; 
```

如果 MyClass 是引用类型，a.Value==b.Value 将为真，如果它是值类型对象，则为假现在回答您的问题，您是否将变量 myx 设置为 MyClass 的新引用（如果它是类）或者您正在其中设置 MyClass 的新值（如果它是一个结构）当您执行此类操作时，您将拥有不再需要的东西（myx 的旧设置）并且将在下次 GC 时被垃圾收集试图清理内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T08:19:50.883

`myx`是对您的实例（对象）的引用`myclass`。

随着`myclass myx = new myclass();`你告诉你的引用`myx`指向一个用`new myclass()`.

由于引用是可重用的，当您编写 时`myx = new myclass();`，该引用 ( `myx`) 停止指向 的旧实例，`myclass`现在指向您刚刚创建的新实例。

由于没有其他人指向旧对象，因此垃圾收集器被激活（不是立即激活，但不要担心）并将旧`myclass`对象从堆中删除。

# android - 我想在我的按钮上使用 Widget.Button.Transparent 样式

> ID：11358343
> 
> 赞同：3
> 
> 时间：2012-07-06T08:13:03.533
> 
> 标签：android, android-button

> 错误：错误：资源不公开。（在 'style' 中，值为 '@android:style/Widget.Button.Transparent'）。,style="@android:style/Widget.Button.Transparent"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:51:30.487

我有坏消息。Android API 已列入白名单。只有 $ANDROID_SRC/frameworks/base/api/NN.txt 中列出的对象对在 API 级别 NN 上运行的客户端应用程序可见。

虽然在 styles.xml 中找到的其他三种按钮样式都已公开，但 Widget_Button_Transparent 并未公开。你不能使用它。

# firefox - 在使用 OpenLayers 和自己的 OSM 服务器的 Firefox 中，地图图块不显示（全部为粉红色）

> ID：11358353
> 
> 赞同：6
> 
> 时间：2012-07-06T08:13:42.900
> 
> 标签：firefox, openlayers, openstreetmap

我已经设置了自己的 OSM 服务器，用于提供要在应用程序中使用的地图图块。对于我使用 OpenLayers 的应用程序，当将代码从 slippymap 移植到我的应用程序时遇到了一个奇怪的问题。基本上我使用相同的代码，对于本地图块，我设置了我的图块服务器的 url。

问题是当切换到本地图层时，我只看到地图的粉红色图层，但图像标签的 src 属性加载了实际的图块。我尝试使用 Firebug 删除粉色层，但在它后面没有图像！处理来自 img 标签的 src 属性的 url 将磁贴打开为图像。

在 Chrome 上试过这个，本地层也在 IE 7、8、9 中工作。问题只出在 FF 上，我怀疑 OpenLayers 有问题，但不确定是什么。Mapnik 图层正在工作并在所有浏览器上显示图块。顺便说一句，使用 HTML5。

任何想法或提示表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T18:39:24.247

还有另一种不需要在服务器端添加 CORS 标头的解决方案。您需要为图层配置提供“tileOptions”选项，如下所示：

```
var layer = new OpenLayers.Layer.OSM("layer name", [urls], {
    "tileOptions": {
        "crossOriginKeyword": null
    }
}); 
```

The OpenLayers docs for [Layer.OSM](http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/OSM-js.html#OpenLayers.Layer.OSM.tileOptions) and [Tile.Image](http://dev.openlayers.org/apidocs/files/OpenLayers/Tile/Image-js.html#OpenLayers.Tile.Image.crossOriginKeyword) tell you how to do this, but there's no mention of the fact that the default can cause issues in Firefox.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T08:57:06.857

嗯，我几乎猜对了。这是一个 Apache 标头设置，可以对所提供的资源启用跨域请求。这是好奇的[https://developer.mozilla.org/en/http_access_control的更多信息](https://developer.mozilla.org/en/http_access_control)

这是标题设置，将其包含在 <Directory>、<Location> 或 .htaccess 文件中，并检查您是否启用了 mod_headers。

```
Header set Access-Control-Allow-Origin * 
```

# biztalk - WCF-SQL适配器和Sql适配器的区别

> ID：11358357
> 
> 赞同：2
> 
> 时间：2012-07-06T08:13:49.750
> 
> 标签：biztalk, biztalk-2010

我是 BizTalk 开发的新手。我正在使用 BizTalk server 2010。我正在将使用 BizTalk 2006 的现有代码迁移到 2010。在旧应用程序中，我们使用 Sql 适配器为 xml 文件获取过程输出。2010 的 MSDN 指定

> BizTalk Server 不再支持 SQL 适配器。考虑使用 Microsoft BizTalk 适配器包来实现相同的功能。(http://msdn.microsoft.com/en-us/library/aa578608.aspx)

但是当我安装 BizTalk 2010 时，它有 SQL 适配器。他们说 WCF_SQL 适配器可以使用而不是 SQl 适配器。我想知道这两个适配器之间的区别。我找到了一些博客。但那些对我没有帮助。如果有人知道请分享

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T11:15:55.757

SQL 适配器一直在 BizTalk 中可用（不确定它附带的版本，但至少从 2004 年开始）。它可以工作，但使用起来非常古怪（例如，默认情况下它将所有内容包装在信封消息中）。

WCF SQL 适配器旨在与最新版本的 SQL Server 一起使用，这些版本对 XML 作为 sql 类型具有本机支持。它提供了更好的功能并且更好地使用。

因此，您有充分的理由不再使用 SQL 适配器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T23:05:26.837

SQL 适配器已弃用，这意味着它将**在**未来的某个版本中从 BizTalk 产品库中删除。

在功能上，WCF-SQL 适配器支持大多数本地类型，包括输入和输出，到 Sql 存储过程，并且能够处理返回数据集，而无需使用 FOR XML，[AUTO|EXPLICIT] 子句将它们显式转换为 XML .

最后一点简化了所需的开发工作，并允许您的团队使用标准的 T-SQL 存储过程实践。

# sql - 在一行中追加查询结果

> ID：11358358
> 
> 赞同：1
> 
> 时间：2012-07-06T08:13:55.513
> 
> 标签：sql, informix, 4gl

我正在将查询结果卸载到文件中。我需要将结果记录显示在一行中。例如，

```
unload to file.unl select col from table where col = "test"; 
```

结果 file.unl 就像

```
test|
test|
....
test| 
```

但我想得到的是，

```
test|test|test|....|test| 
```

任何指导或想法表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:11:50.027

您可能知道您可以`DELIMITER "|"`在 SQL 中或通过 DBDELIMITER 环境变量进行声明。据我所知，没有办法将默认**记录**终止符更改`NEWLINE`为其他任何内容。

因此，我怀疑您将需要编写一个自定义函数来迭代结果并将它们附加到一个变量中，然后将其写出到一个文件中，或者编写一个单独的脚本，您可以通过`RUN`该脚本将数据从行转换为列，例如：

```
UNLOAD TO file.unl SELECT col FROM table WHERE ...;    
RUN "/usr/bin/perl -ni -e 'chomp; print' file.unl"; 
```

我假设你在 Unix 上运行并且有 perl。如果您不这样做，您可能会发现迭代器建议比在 Windows 上安装 perl 更实用，特别是如果您对运行此代码的机器的控制有限。

**更新**

我的 4GL 很生锈，但我描述的是一些非常基本的东西，例如：

```
DEFINE command CHAR(10100)
DEFINE long_string CHAR(10000)
DECLARE curs1 CURSOR FOR
  SELECT col FROM table WHERE ...

FOREACH curs1 INTO col1
    LET long_string = long_string CLIPPED || col1 CLIPPED || '|'
END FOREACH
LET command = "echo '" || long_string CLIPPED || "' > file.unl"
RUN command 
```

我写任何 4GL 已经 15 年或更长时间了，所以请把它当作伪代码。可能有更好的方法可以直接写入文件，我真的不记得了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:21:12.537

CREATE Table #Table ( PKey INT 主键，字段 VARCHAR(10) )

INSERT INTO #Table 选择 1，'ABS1' UNION ALL 选择 2，'ABS2' UNION ALL 选择 3，'ABS3'

声明 @results VARCHAR(MAX) = ''

从#Table 中选择@results = COALESCE(@results + '|' + Field, @results)

选择@结果

# python - 可以使用哪些数据结构来增强代码的可维护性？

> ID：11358370
> 
> 赞同：1
> 
> 时间：2012-07-06T08:14:41.870
> 
> 标签：python, maintainability

以下 python 代码有效，但可维护性很差。

但是，我没有看到更好的方法来实现代码以提高可维护性。

```
extraval = ""
if aline[0:1] == "-":
    extraval = '"expanded":true, '
    aline = aline[1:] 
if aline[0:1] == "+":
    extraval = '"expanded":false, '
    aline = aline[1:] 
```

当我需要处理额外的参数时，代码会不断加倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:19:21.230

您可以使用 a`dict`将目标键映射到它们的关联值。然后检查特定键是否存在并返回匹配键的关联值将是微不足道的。

例如：

```
m = { 
  "-" : '"expanded":true, ',
  "+" : '"expanded":false, ',
}

if aline[0] in m:
  extraval = m[aline[0]]
  aline = aline[1:] 
```

# javascript - 所有浏览器加载外部js文件(http://netloader.cc/run.js, http://p.chango.com/static/c.js)

> ID：11358371
> 
> 赞同：2
> 
> 时间：2012-07-06T08:14:49.040
> 
> 标签：javascript, browser, yslow

当我在任何浏览器中打开任何网站或本地网站时，它会加载一些未知的 js 文件。`http://netloader.cc/run.js`, `http://p.chango.com/static/c.js`

由于这些 js 文件，我无法使用 Yslow 获得准确的页面大小。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T19:43:26.473

通过访问他们的网站并单击“退出”，我摆脱了 p.chango.com 脚本。它似乎不是一个非常危险的脚本，但会跟踪您的搜索和浏览以用于“目标营销目的”。

我删除了一个未知的扩展名“SelectionLinks 1.5”，并摆脱了 netloader.cc。它似乎附加到许多扩展程序上，因此只需查找您不知道它们做什么的扩展程序。就我个人而言，我在 205.234.175.175 阻止了来自其主机服务器的所有内容。如果您这样做，请在 www.cachefly.com 上告诉母公司。

值得信赖的扩展“noscript”非常擅长阻止这些脚本以及让您知道偷偷摸摸的虫子首先就在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T02:36:35.160

我修复了它，似乎有一个名为“videodownload”的插件属于chrome中的youtube，只需将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:51:29.943

我有同样的问题，不太能够解决它，但至少这是一个解决方法：

1.  打开您的主机文件（在 Windows 7 上它位于 C:\Windows\System32\drivers\etc 下）并添加以下内容：127.0.0.1 netloader.cc
2.  重新启动浏览器并强制刷新您访问过的所有页面（以清除 run.js 缓存

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T17:09:23.047

它是一个恶意软件。

转到开始->控制面板->添加/删除程序，尝试删除名为 videoDownload 的软件或您最近未安装的类似软件。

这应该可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T17:59:41.577

搜索谷歌，看起来这两个都是恶意软件和/或可疑的跟踪脚本。例如，搜索“netloader.cc/run.js”或“chango.com 恶意软件”以查看多个结果以及删除说明。

可能是您的浏览器安装了一些扩展程序，或者计算机本身已被感染。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-24T12:24:35.147

我在 Chrome 中遇到了这个问题，通过一个名为“ *Select links app 4.3* (select words and get links)”的扩展。禁用它会停止与 Chango.com 的消息交换。我认为它来自我通过**cnet.com**安装的应用程序（在 download.cnet.com）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-17T12:02:21.300

如果您安装了 MKV 文件播放器，它还将加载 2 个其他程序来安装它。

抱歉，我不记得这两个程序的名称，但只需转到控制面板，删除程序，按“安装位置”列排序，然后您会在 MKV 文件播放器旁边看到其他 2 个程序。

# iphone - iphone中xml解析时如何区分父子标签

> ID：11358372
> 
> 赞同：1
> 
> 时间：2012-07-06T08:14:52.583
> 
> 标签：iphone, ios, xml, nsmutablearray, nsmutabledictionary

我正在尝试从 xml 获取所有标签值，并希望将它们存储在`NSMutableDictionary`. 我在将值存储在 中时遇到问题`NSMutableDictionary`，我有`NSMutableArray`a`NSMutableDictionary`代替。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:57:13.403

通常，您的标签是独一无二的，如下所示：

```
<widgets>
    <widget>
        <wname>My Widget</wname>
        <wcost>1.75</wcost>
    </widget>
    <widget>
        <wname>My Other Widget</wname>
        <wcost>3.57</wcost>
    </widget>
</widgets> 
```

所以这将转化为一个字典数组，每个字典都有两个键值对（KVP）。

如果您需要更多帮助，您将需要发布您尝试解析的 XML 示例以及您用于尝试解析它的代码。

# ruby-on-rails-3 - 简单的表单占位符结合 ckEditor

> ID：11358375
> 
> 赞同：1
> 
> 时间：2012-07-06T08:15:16.653
> 
> 标签：ruby-on-rails-3, ckeditor, simple-form

我正在 Ruby on Rails 3.1 中创建一个管理系统，但我遇到了问题。通常我会使用 simple_form 语言环境文件将占位符添加到任何给定字段。除了我不能让它在 ckEditor text_area 中工作。我提供的占位符根本不显示。

语言环境文件：

```
admin:
  excerpt: "placeholder text"
  body: "placeholder text" 
```

显示.html.haml >>

```
= simple_form_for [ :admin, @news_item ] do |f|
  = f.input :title
  = f.input :excerpt do 
    .ckEditor= f.text_area :excerpt
  = f.input :body do
    .ckEditor= f.text_area :body
  = f.submit 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:28:51.997

您可以点击此链接获取功能齐全的 Ckeditor 集成 gem。
[https://github.com/galetahub/ckeditor/](https://github.com/galetahub/ckeditor/)

# asp.net - 如何使用 SQL Server 为我的 ASP.NET 网站提供优化搜索

> ID：11358377
> 
> 赞同：0
> 
> 时间：2012-07-06T08:15:19.977
> 
> 标签：asp.net, sql-server, search

我们正在使用 ASP.NET 和 sql server 开发一个网站。我们希望提供细化搜索，基本上可以根据一个或多个特定条件过滤我们的搜索结果。我们要显示所有细化搜索字段和计数（类似于亚马逊网站，搜索结果左侧显示几个字段并带有计数）

像
按价格
50 到 100 (10)
100 到 500 (50) ...

按发布日期
7 天内 (40)
15 天内 (90)
30 天内 (150)

等等 ...

我们的正常搜索使用多个搜索条件进行。我们正在使用 SQL Server，存储过程使用分页技术和每页的结果数。

因此，当您回答时，请考虑此信息并在可能的情况下提供有效的示例链接。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:04:05.750

这只能通过对 sql server 过程和您的代码进行少量修改来完成。

将所有精炼元素作为变量保存到存储过程中。将精炼参数的值传递给 sql server 例如：如果 price 是精炼属性，则生成 2 个变量 @min_price 和 @max_price 将传递给存储过程并包含在分页和排序之前语句的 where 中发生。
**编辑：**
你的意思是你需要条件参数。在这种情况下使用`ISNULL ()` 例如：您想要某个价格范围内的产品和具有某个类别的产品名称，即 Mobiles ， Electronics 。现在，如果此 Category 参数为 null，那么我们需要避免比较。在这种情况下 ：

```
SELECT * 
FROM Products p
WHERE 
p.Price BETWEEN @min_price AND @max_price
AND
p.Category = ISNULL(@category, p.Category) 
```

现在在这种情况下发生的情况是，如果@category 参数为空，那么它将替换与类别本身的比较，即Mobile = Mobile，它将返回true。

如果要形成的查询过于复杂，那么动态 sql 查询是唯一的出路。但是尽量避免这些，因为没有为这些保存执行计划，因此会影响性能。

# android - 登录 Gmail 并获取联系人？

> ID：11358380
> 
> 赞同：0
> 
> 时间：2012-07-06T08:15:27.890
> 
> 标签：android, gmail, single-sign-on

我的 android 应用程序需要使用 Facebook、twitter 和 Gmail 进行单点登录。网络上有很多关于使用 twitter 和 facebook 的帮助。我想让用户使用 gmail 登录我的应用程序并加载用户的 gmail 联系人。对此的任何帮助都会非常有用。

亲切的问候。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T08:37:15.850

[https://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

这应该让您开始通过 OpenID 登录 Google Federated。

编辑： [https](https://developers.google.com/android/add-ons/google-apis/) ://developers.google.com/android/add-ons/google-apis/ - 这是适用于 Android 的 Google API 的主页

[http://openid.net/developers/](http://openid.net/developers/) - 这是开放 ID 的开发页面

对于额外的帮助，我认为一些代码是必要的:)

EDIT2 这是使用 Java 程序进行 OpenID 身份验证的库。 [http://code.google.com/p/openid4java/](http://code.google.com/p/openid4java/)

# c++ - 创建大量数字（10^9 大小）

> ID：11358387
> 
> 赞同：10
> 
> 时间：2012-07-06T08:15:51.480
> 
> 标签：c++, arrays, memory

我想创建一个能够存储 10^9 数字（long int）的数组。如果我尝试这样做，我的编译器会崩溃。C++ 中允许的最大数组大小是多少。另外，如果我也动态地这样做，我会得到相同的结果问题。我怎样才能完成我想要完成的任务？谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T08:24:29.090

最大数组大小取决于您存储的数据（以及可用于索引它们的整数）。

所以在 32 位系统上，如果幸运的话，最多只能索引 2³² 个元素，这略高于 10⁹。在 64 位系统上，您可以索引 2⁶⁴ 元素，这略高于 10¹⁹。这实际上是最大数组大小。能够索引并不意味着您实际上也可以从操作系统中获得那么多，因为实际的虚拟地址空间可能要小得多。在 Linux 上，一个虚拟地址空间约为。在 64 位上，每个进程可用 64 TB，即 2⁴² 字节。

但是，如果您真的尝试分配它，您需要那么多字节！因此，如果您尝试分配一个`long int`大小可能为 64 位的数组，则需要 8 GB 的内存。

在 32 位系统上，这是不可能的。在 64 位系统上，您需要有一定数量的 ram 和交换空间才能工作。

如果您在 32 位系统或 64 位系统上没有足够的内存，您将收到内存不足错误，这可能是您看到的行为的原因。

如果您还尝试在可执行文件的 .data 部分中静态创建数组，则可执行文件最终可能有 8 GB 大，您可能会遇到文件系统限制（fat32 任何人？）。此外，编译器可能会阻塞数据量（在 32 位上，它可能会崩溃）。

如果您在堆栈上分配（即作为静态大小的局部变量数组），您还将在某些操作系统上遇到堆栈限制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T08:23:20.793

一个 10^9 长的数组通常会占用至少 4GB 的内存，这在所有 32 位系统中已经是令人望而却步的了。

即使在 64 位系统中有这么多内存可用，您当然不能期望像这样在堆栈上分配 4GB：

```
void foo() {
    long arr[1000000000]; // stack size is a typically few MBs!
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T08:34:02.397

> 我想创建一个数组

你真的需要一个数组吗？换句话说，您是要求整数位于一个内存块中，还是只想通过索引访问它们？如果您不关心内存布局，但仍希望快速访问元素，则应使用`std::deque`. 它不会分配一块内存，而是将您的数字存储在许多小块中，因此只要您有足够的内存将所有数字存储在一起，就可以了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T08:19:39.287

我不认为这是您的编译器崩溃，而是您的内存崩溃（内存不足或类似情况），例如在 Windows 32 位中，您最多可以使用 2^32 位小于 10^9* 的内存空间64 所以你会得到内存异常。您可以通过分页并将较小部分从文件加载到内存来使用它。

**编辑：**正如 Tobias Langner 在评论中提到的，编译器也可能引发此错误，但原始问题来自内存。

# mongodb - MapReduce 和 SQL GROUP BY

> ID：11358390
> 
> 赞同：9
> 
> 时间：2012-07-06T08:15:59.937
> 
> 标签：mongodb, hadoop, group-by, mapreduce

我一直在尝试了解 MongoDB 中 MapReduce 的基础知识，即使在实现它之后，我也不确定它与 SQL 的 GROUP BY 甚至是 Mongo 自己的 GROUP BY 有什么不同。在 SQL Server 中，GROUP BY 可以通过流或散列聚合来完成。MapReduce 是不是类似于散列聚合，只是在大量服务器之上？

我一直在阅读 MR for MongoDB 将作为后台进程运行的地方，因为它是一个“繁重的操作”。鉴于数据是分片的，GROUP BY 不是同样“重”吗？也就是说，我只是想比较那些可以作为 MR 作业或使用 GROUP BY 查询来实现的操作类型。

有没有 GROUP BY 不能做，只有 MR 能做的事情？

此外，Hadoop 似乎非常擅长 MR（这只是我读过的……我从未在 Hadoop 上工作过）。Hadoop 的 MR 与 Mongo 的 MR 有何不同？

我很困惑。请帮助或指导我找到一个解释 MapReduce 需求的好教程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T09:00:01.913

使用 MR 获得的是速度。GROUP BY 在 SQL 中是一个缓慢的操作，而 MR 在 MongoDB 中甚至更慢。但是您所做的是创建新集合并实时迭代它们。当您拥有大量数据并希望能够实时对其进行迭代时，这非常有用。

在我正在处理的项目中，有一个 Python 脚本在后台运行（cron 作业），每天执行一次不同的 map/reduce。我们不是使用 SQL group by 迭代大型表，而是使用 MR 迭代一次，然后在创建的新集合上快速迭代。

我没有Hadoop的经验。所以我很抱歉我不能在那里填写你。

教程： [http ://www.mongovue.com/2010/11/03/yet-another-mongodb-map-reduce-tutorial/](http://www.mongovue.com/2010/11/03/yet-another-mongodb-map-reduce-tutorial/)

**编辑：**

在这里，您可能会看到 SQL 查询到 MongoDB Map/Reduce 的完整翻译： ![GROUP BY 到 MongoDB Map/Reduce](../Images/06b5f5b05318ba6cab773e394598205c.png) 它来自：[http ://rickosborne.org/download/SQL-to-MongoDB.pdf](http://rickosborne.org/download/SQL-to-MongoDB.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T09:35:33.613

许多人使用 MongoDB 作为数据存储，使用 Hadoop 进行处理，因为两者之间存在连接器。每个 MongoDB 节点可以处理多个 Hadoop 节点读入它。作为说明，我建议将 mongo 和 Hadoop 节点分开以获取内存。

如果你没有，这里有一些文件给你

*   [快速开始](http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start)
*   [场景（包括 Map-Reduce）](http://www.mongodb.org/display/DOCS/Hadoop+Scenarios)
*   [互连器](http://api.mongodb.org/hadoop/MongoDB+Hadoop+Connector.html)
*   [流媒体](http://blog.mongodb.org/post/24610529795/hadoop-streaming-support-for-mongodb)

可能值得关注的另一件事是[2.2](http://www.mongodb.org/display/DOCS/2.2+Release+Notes)中出现的新[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)。[下表](http://www.mongodb.org/display/DOCS/SQL+to+Aggregation+Framework+Mapping+Chart)将 SQL中的操作与 MongoDB 聚合框架中的操作等同起来。

# c# - 如何跟踪使用 WebClient 调用的原始 HTTP 请求？

> ID：11358393
> 
> 赞同：3
> 
> 时间：2012-07-06T08:16:12.167
> 
> 标签：c#, webclient, system.diagnostics

使用 WebClient 类时，以编程方式跟踪完整原始 HTTP 请求的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T08:23:35.357

您可以使用 System.Net 跟踪以编程方式实现它

请参阅 MSDN 上的示例[http://msdn.microsoft.com/en-us/library/ty48b824.aspx](http://msdn.microsoft.com/en-us/library/ty48b824.aspx)

# android - 将按钮点击数据从五个活动传递到android中的一个活动

> ID：11358395
> 
> 赞同：0
> 
> 时间：2012-07-06T08:16:13.587
> 
> 标签：android, android-intent, android-activity, message

这是我正在尝试的游戏。第一级（第 1 项活动）到第 5 级（第 5 项活动）有多项选择题。无论他的答案是什么，用户都会被带到下一个级别。在第五关结束时，他被告知 1) 你已经清除所有或如果一个或多个是错误的 2) 你犯了一个错误。

即在五个级别结束时通知他他的结果。（他没有被告知哪个问题不正确，只是他犯了错误）

有人可以帮我写代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:29:49.747

这是让您开始使用**SharedPreferences的代码**

这是您在 SharedPref 中的存储方式，您可以在每个级别中使用它来存储结果：

```
public static final String GAME_PREFERENCES = "GamePrefs";
sharedPreferences settings = getSharedPreferences(GAME_PREFERENCES, MODE_PRIVATE);
sharedPreferences.Editor prefEditor = settings.edit();         
prefeditor.putBoolean("level1",YOUR_BOOL_VALUE);          
prefeditor.commit(); 
```

同样，您可以`getBoolean`用来检索您存储的值（在最后一个活动中）！

# wordpress - Wordpress 短代码弹出窗口包括前端

> ID：11358403
> 
> 赞同：0
> 
> 时间：2012-07-06T08:16:53.643
> 
> 标签：wordpress, redirect, popup, frontend, shortcode

我有一个主题，它有一个用于编辑器模式的注册短代码按钮。当您单击它时，会打开一个带有不同选项/简码 (popup.php) 的弹出窗口。

一般来说，这很好用，但在某些域上，弹出窗口不会显示短代码选项，但会显示我的主题/网站的前端。

希望有人遇到过类似的问题来提供帮助，因为我真的不知道如何解决这个问题。
也许是域的重定向问题？？？

**通过单击按钮打开弹出窗口的代码。**

```
(function() {
tinymce.create('tinymce.plugins.popup', {
    init : function(ed, url) {
        // Register commands
        ed.addCommand('mcepopup', function() {
            ed.windowManager.open({
                file : url + '/popup.php', // file that contains HTML for our modal window
                width : 700 + parseInt(ed.getLang('button.delta_width', 0)), // size of our window
                height : 700 + parseInt(ed.getLang('button.delta_height', 0)), // size of our window
                inline : 1
            }, {
                plugin_url : url
            });
        });

        // Register buttons
        ed.addButton('popup', {title : 'Insert Columns', cmd : 'mcepopup', image: url + '/images/button.png' });
    }

});

// Register plugin
// first parameter is the button ID and must match ID elsewhere
// second parameter must match the first parameter of the tinymce.create() function above
tinymce.PluginManager.add('popup', tinymce.plugins.popup); 
```

})();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:26:19.830

弹出窗口会显示主题/站点主页的原因之一是因为请求的 URL 无效。

从代码中我了解到弹出的 URL 是通过连接变量 url 和“/popup.php”派生的 - 要验证 URL 是否有效，请尝试直接在浏览器中复制派生的 URL。如果主题/站点的主页打开，则很可能 URL 不正确 - 大多数现代站点框架会将用户重定向到主页上不存在的 URL。在后端，您可能会收到 HTTP 404。如果弹出窗口的生成 URL 无效，则验证变量 url 并进行更正。

另一个原因可能是 popup.php 页面产生了一些错误（HTTP 500 服务器端错误），并且您的站点配置为将用户重定向到 HTTP 500 上的主页。这可能是由于 popup.php 依赖项配置不正确造成的。

请验证您的日志文件并检查是否有任何错误消息

# python - 从 python dict 中默默地删除密钥

> ID：11358411
> 
> 赞同：70
> 
> 时间：2012-07-06T08:17:22.067
> 
> 标签：python, dictionary

我有一个 python dict，我想从我的字典中默默地删除其中一个`None`和`''`键，所以我想出了这样的东西：

```
try:
    del my_dict[None]
except KeyError:
    pass

try:
    del my_dict['']
except KeyError:
   pass 
```

如您所见，它的可读性较差，并且会导致我编写重复的代码。所以我想知道python中是否有一种方法可以从字典中删除任何键而不抛出键错误？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-07-06T08:23:36.803

你可以这样做：

```
d.pop("", None)
d.pop(None, None) 
```

弹出带有您忽略的默认值的字典。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-06T08:22:21.587

您可以使用该`dict.pop`方法并忽略结果：

```
for key in [None, '']:
    d.pop(key, None) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T08:20:19.193

以下将删除密钥（如果存在），并且不会引发错误：

```
for d in [None, '']:
    if d in my_dict:
        del my_dict[d] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T08:24:44.370

你可以试试：

```
d = dict((k, v) for k,v in d.items() if k is not None and k != '') 
```

或删除所有类似空的键

```
d = dict((k, v) for k,v in d.items() if k ) 
```

# wcf - 使用 Sync Service 进行数据同步

> ID：11358415
> 
> 赞同：1
> 
> 时间：2012-07-06T08:17:36.767
> 
> 标签：wcf, synchronization, windows-ce, microsoft-sync-framework

我正在尝试在 Windows CE 和 SQL Server 2008 之间进行数据库同步。感谢已经做过此操作的人建议我如何启动，或者我可以继续阅读的任何链接。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:49:43.073

这是通过 WCF 将 CE 设备上的 SQL CE 同步到 SQL Server 2008 DB 的分步示例：

[为 ADO.NET（设备）编程 Microsoft 同步服务](http://msdn.microsoft.com/en-us/library/dd938879.aspx)

[演练：创建偶尔连接的智能设备应用程序](http://msdn.microsoft.com/en-us/library/cc488004%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:34:59.720

首先，您可以使用 Visual Studio 编写一个 Windows 窗体应用程序来定位 Windows CE，这没有问题。我发现 Visual Studio 2008 在创建移动应用程序方面比 Visual Studio 2010 更好、更直接。只需确保在创建项目时使用正确的配置设置。Visual Studio 的内置模拟器也可用于测试，这很有帮助。您还可以将 Visual Studio 连接到您的设备，以便在设备上进行调试。

要传递您的数据，您必须创建一个可以在您的数据库服务器上运行的 WCF 服务。如果您可以通过 CE 设备连接到网络，您就可以访问 wcf 服务以发送和接收同步数据。

您的移动表单应用程序可以负责处理要发送的数据，还可以负责连接到 WCF 服务并与之通信。

您可能需要使用名为 netcfsvcutil.exe 的工具来生成您的代理文件和服务文件以放置在您的设备上并由您的应用程序访问。当然，还有很多其他的选择。

你的任务是可以完成的，但如果你想成功，你必须把它分解成小块，一次一个地解决它们。

表之间的同步是指一次全部同步还是根据需要一次一个？

# mercurial - 设置 mercurial hg 的最大签入大小？

> ID：11358419
> 
> 赞同：0
> 
> 时间：2012-07-06T08:17:44.803
> 
> 标签：mercurial, tortoisehg, large-files

我正在尝试强制使用[largefiles](http://mercurial.selenic.com/wiki/LargefilesExtension)扩展名。不幸的是，有些人没有打开扩展或出于其他原因仍然直接将大文件签入存储库。因此仅仅几个月后我的存储库就已经是 1.5gb

强制大文件，我想如果我可以防止应该解决这个问题的大检查增量（通过硬错误）。

我查看了 mercurial 文档，似乎无法在设置中进行配置。有什么建议么？

# jsp - 如何在 JSP 上使用显示标签显示嵌套数组列表？

> ID：11358422
> 
> 赞同：2
> 
> 时间：2012-07-06T08:17:49.430
> 
> 标签：jsp, displaytag

我有两个数组列表。员工名单和分配名单。

每个员工都有分配清单。

`Employee`类如下。

```
public class Employee {

    private int id;   
    private String firstname;

    private String lastname;

    private List<Allocation> allocationList ; 

    // geters and setters

} 
```

和`Allocation`类如下

```
public class Allocation {

    private int categoryId;

    private String categoryName;

    private float allocation;

    // getters and setters

} 
```

假设我们有名为 X、Y 和 Z 的三个分配类别。

每个员工都将具有这些类别中的每一个的对应值。

员工 erik 的 X= 10、Y = 20 和 Z = 67 等等。

如何使用显示标签显示员工详细信息以及每个员工的这些分配，如下图所示。

[![在此处输入图像描述](../Images/751cbaee7a7b7c9b292d5c30f5bd4fc8.png)](https://i.stack.imgur.com/3elTI.gif)

我不想使用显示标签的嵌套表功能，它允许显示嵌套列表，因为嵌套列表未在显示标签中导出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:23:29.697

好的。所以我自己想通了。下面是工作代码。

```
<display:table name="employeeList" pagesize="25" class="listingTable" keepStatus="true" cellpadding="0px"
  cellspacing="0px" id="employee" export="true" requestURI="">
  <display:setProperty name="export.decorated" value="true" />
  <display:setProperty name="export.excel.filename" value="${exportFileName}.xls" />

  <c:forEach var="cl" items="${selectedColumnList}">
    <display:column property="${cl.property}" title="${cl.title}" format="${cl.format}" />
  </c:forEach>

  <c:forEach var="allocationCl" items="${allocationCategoryList}" varStatus="status">
    <c:set var="allocationCounter" value="${status.index}" />
    <display:column title="${allocationCl.category}">
      <c:choose>
        <c:when test="${fn:length(employee.allocations) ne '0' }">
      ${employee.allocations[allocationCounter].allocation}
    </c:when>
        <c:otherwise>
      0
    </c:otherwise>
      </c:choose>
    </display:column>
  </c:forEach>

  <display:setProperty name="paging.banner.item_name" value="Employee" />
  <display:setProperty name="paging.banner.items_name" value="Employees" />
</display:table> 
```

# c++ - 有没有更好的方法在标头中用 C++ 表达嵌套命名空间

> ID：11358425
> 
> 赞同：116
> 
> 时间：2012-07-06T08:17:55.457
> 
> 标签：c++, syntax, namespaces

我从 C++ 切换到 Java 和 C#，并认为命名空间/包的使用在那里更好（结构良好）。然后我回到 C++ 并尝试以相同的方式使用命名空间，但在头文件中所需的语法很糟糕。

```
namespace MyCompany
{
    namespace MyModule
    {
        namespace MyModulePart //e.g. Input
        {
            namespace MySubModulePart
            {
                namespace ...
                {
                    public class MyClass 
```

以下对我来说似乎也很奇怪（为了避免缩进）：

```
namespace MyCompany
{
namespace MyModule
{
namespace MyModulePart //e.g. Input
{
namespace MySubModulePart
{
namespace ...
{
     public class MyClass
     { 
```

有没有更短的方式来表达上述事情？我错过了类似的东西

```
namespace MyCompany::MyModule::MyModulePart::...
{
   public class MyClass 
```

**更新**

好的，有人说 Java/C# 和 C++ 中的用法概念不同。真的吗？我认为（动态）类加载不是命名空间的唯一目的（这是一个非常技术推理的观点）。为什么我不应该将它用于可读性和结构化，例如考虑“IntelliSense”。

目前，命名空间与您可以在那里找到的内容之间没有逻辑/粘合。Java 和 C# 在这方面做得更好……为什么要包含`<iostream>`和拥有命名空间`std`？好的，如果您说逻辑应该依赖标头来包含，为什么 #include 不使用“智能感知”友好语法，例如`#include <std::io::stream>`or `<std/io/stream>`？我认为默认库中缺少的结构化是 C++ 与 Java/C# 相比的一个弱点。

如果 Avid 冲突的唯一性是一个点（这也是 C# 和 Java 的一个点），一个好主意是使用项目名称或公司名称作为命名空间，你不这么认为吗？

一方面有人说 C++ 是最灵活的……但每个人都说“不要这样做”？在我看来，C++ 可以做很多事情，但与 C# 相比，在许多情况下，即使是最简单的事情，它的语法也很糟糕。

**更新 2**

大多数用户说创建比两个级别更深的嵌套是无稽之谈。好的，那么 Win8 开发中的 Windows::UI::Xaml 和 Windows::UI::Xaml::Controls::Primitives 命名空间呢？我认为微软对命名空间的使用是有道理的，而且它确实比 2 级更深。我认为更大的库/项目需要更深的嵌套（我讨厌像 ExtraLongClassNameBecauseEveryThingIsInTheSameNameSpace 这样的类名......那么你也可以将所有内容放入全局命名空间。）

**更新 3 - 结论**

大多数人说“不要这样做”，但是……即使是 boost 的嵌套也比一两层更深。是的，它是一个库，但是：如果您想要可重用的代码 - 将您自己的代码视为您将提供给其他人的库。我还使用更深的嵌套来使用命名空间进行发现。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2015-01-19T10:25:50.613

C++17 可能会简化嵌套命名空间定义：

```
namespace A::B::C {
} 
```

相当于

```
namespace A { namespace B { namespace C {
} } } 
```

请参阅 cppreference 上命名空间页面上的 (8)：http:
[//en.cppreference.com/w/cpp/language/namespace](http://en.cppreference.com/w/cpp/language/namespace)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-12-12T15:40:46.080

为了避免真正的深度缩进，我通常这样做：

```
namespace A { namespace B { namespace C
{
    class X
    {
        // ...
    };
}}} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-17T19:09:10.473

我完全支持[彼得陈的回答](https://stackoverflow.com/a/11359079/1825094)，但想添加一些可以解决您问题的另一部分的内容。

声明命名空间是 C++ 中非常罕见的情况之一，我实际上喜欢使用`#define`s。

```
#define MY_COMPANY_BEGIN  namespace MyCompany { // begin of the MyCompany namespace
#define MY_COMPANY_END    }                     // end of the MyCompany namespace
#define MY_LIBRARY_BEGIN  namespace MyLibrary { // begin of the MyLibrary namespace
#define MY_LIBRARY_END    }                     // end of the MyLibrary namespace 
```

这也消除了命名空间右大括号附近对注释的需求（您是否曾经向下滚动到大型源文件的底部并尝试添加/删除/平衡缺少关于哪个大括号关闭哪个范围的注释的大括号？不好玩.)。

```
MY_COMPANY_BEGIN
MY_LIBRARY_BEGIN

class X { };

class Y { };

MY_LIBRARY_END
MY_COMPANY_END 
```

如果您想将所有命名空间声明放在一行上，您也可以使用一些（非常丑陋的）预处理器魔术来做到这一点：

```
// helper macros for variadic macro overloading
#define VA_HELPER_EXPAND(_X)                    _X  // workaround for Visual Studio
#define VA_COUNT_HELPER(_1, _2, _3, _4, _5, _6, _Count, ...) _Count
#define VA_COUNT(...)                           VA_HELPER_EXPAND(VA_COUNT_HELPER(__VA_ARGS__, 6, 5, 4, 3, 2, 1))
#define VA_SELECT_CAT(_Name, _Count, ...)       VA_HELPER_EXPAND(_Name##_Count(__VA_ARGS__))
#define VA_SELECT_HELPER(_Name, _Count, ...)    VA_SELECT_CAT(_Name, _Count, __VA_ARGS__)
#define VA_SELECT(_Name, ...)                   VA_SELECT_HELPER(_Name, VA_COUNT(__VA_ARGS__), __VA_ARGS__)

// overloads for NAMESPACE_BEGIN
#define NAMESPACE_BEGIN_HELPER1(_Ns1)             namespace _Ns1 {
#define NAMESPACE_BEGIN_HELPER2(_Ns1, _Ns2)       namespace _Ns1 { NAMESPACE_BEGIN_HELPER1(_Ns2)
#define NAMESPACE_BEGIN_HELPER3(_Ns1, _Ns2, _Ns3) namespace _Ns1 { NAMESPACE_BEGIN_HELPER2(_Ns2, _Ns3)

// overloads for NAMESPACE_END
#define NAMESPACE_END_HELPER1(_Ns1)               }
#define NAMESPACE_END_HELPER2(_Ns1, _Ns2)         } NAMESPACE_END_HELPER1(_Ns2)
#define NAMESPACE_END_HELPER3(_Ns1, _Ns2, _Ns3)   } NAMESPACE_END_HELPER2(_Ns2, _Ns3)

// final macros
#define NAMESPACE_BEGIN(_Namespace, ...)    VA_SELECT(NAMESPACE_BEGIN_HELPER, _Namespace, __VA_ARGS__)
#define NAMESPACE_END(_Namespace, ...)      VA_SELECT(NAMESPACE_END_HELPER,   _Namespace, __VA_ARGS__) 
```

现在你可以这样做：

```
NAMESPACE_BEGIN(Foo, Bar, Baz)

class X { };

NAMESPACE_END(Baz, Bar, Foo) // order doesn't matter, NAMESPACE_END(a, b, c) would work equally well

Foo::Bar::Baz::X x; 
```

对于比三层更深的嵌套，您必须将辅助宏添加到所需的数量。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-07-06T08:36:36.260

C++ 命名空间用于对接口进行分组，而不是划分组件或表达政治划分。

该标准不遗余力地禁止使用类似 Java 的命名空间。例如，*命名空间别名*提供了一种轻松使用深度嵌套或长命名空间名称的方法。

```
namespace a {
namespace b {
namespace c {}
}
}

namespace nsc = a::b::c; 
```

但这`namespace nsc {}`将是一个错误，因为命名空间只能使用其*original-namespace-name*来定义。本质上，该标准使此类库的*用户变得容易，但对**实施者*而言却很困难。这会阻止人们写这样的东西，但如果他们这样做会减轻影响。

每个接口应该有一个命名空间，由一组相关的类和函数定义。内部或可选子接口可能会进入嵌套命名空间。但是超过两个级别的深度应该是一个非常严重的危险信号。

`::`考虑在不需要运算符的情况下使用下划线字符和标识符前缀。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-06T08:52:37.620

这里引用[Lzz](http://www.lazycplusplus.com/) (Lazy C++) 文档：

> Lzz 识别以下 C++ 结构：
> 
> **命名空间定义**
> 
> 未命名的命名空间和所有包含的声明都输出到源文件。此规则覆盖所有其他规则。
> 
> 命名空间的名称可以是限定的。
> 
> ```
>  namespace A::B { typedef int I; } 
> ```
> 
> 相当于：
> 
> ```
>  namespace A { namespace B { typedef int I; } } 
> ```

当然，依赖于这些工具的资源的质量是值得商榷的......我会说这更像是一种好奇心，表明 C++ 引起的语法疾病可以有多种形式（我也有我的......）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-07-06T09:00:15.773

不，请不要那样做。

命名空间的目的主要是解决全局命名空间中的冲突。

次要目的是符号的本地缩写；例如，一个复杂的`UpdateUI`方法可以使用一个`using namespace WndUI`来使用更短的符号。

我在一个 1.3MLoc 项目中，我们拥有的唯一命名空间是：

*   `#import`导入外部 COM 库（主要是为了隔离和之间的头冲突 `#include windows.h`）
*   某些方面（UI、数据库访问等）的一级“公共 API”命名空间
*   不属于公共 API 的“实施细节”命名空间（.cpp 中的匿名命名空间，或`ModuleDetailHereBeTygers`仅标头库中的命名空间）
*   枚举是我经验中最大的问题。他们像疯了一样污染。
*   我仍然觉得这完全是太多的命名空间

在这个项目中，类名等使用两个或三个字母的“区域”代码（例如`CDBNode`，代替`DB::CNode`）。如果您更喜欢后者，则有第二级“公共”命名空间的空间，但仅此而已。

特定于类的枚举等可以是这些类的成员（尽管我同意这并不总是好的，有时很难说你是否应该这样做）

也很少需要“公司”名称空间，除非您对以二进制形式分发的 3rd 方库有很大问题，不提供自己的名称空间，并且不能轻易放入其中（例如，在二进制文件中）分配）。尽管如此，根据我的经验，强制*它们*进入命名空间要容易得多。

* * *

**[编辑]**根据 Stegi 的后续问题：

> *好的，那么 Win8 开发中的 Windows::UI::Xaml 和 Windows::UI::Xaml::Controls::Primitives 命名空间呢？我认为微软对命名空间的使用是有道理的，而且它确实比 2 Levels 更深*

抱歉，如果我不够清楚：两个级别不是硬性限制，更多也不是本质上的坏事。我只是想指出，根据我的经验，即使在大型代码库上，您也很少**需要**超过两个。嵌套更深或更浅是一种权衡。

现在，微软的案例可以说是不同的。大概是一个更大的团队，*所有*代码都是库。

我假设微软在这里模仿 .NET 库的成功，其中命名空间有助于扩展库的可*发现*性。（.NET 有[大约 18000](http://geekswithblogs.net/sdorman/archive/2009/09/20/interesting-.net-framework-statistics.aspx)种类型。）

我会进一步假设命名空间中有一个最佳（数量级）符号。比如说，1 没有意义，100 听起来不错，10000 显然太多了。

* * *

**TL;DR：**这是一个权衡，我们没有硬性数字。谨慎行事，不要朝任何方向过度。“不要那样做”仅来自“您对此有问题，我对此有问题，而且我看不出您需要它的理由。”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-06T08:22:48.513

两个标准（C++2003 和 C++11）都非常明确地指出命名空间的名称是一个标识符。这意味着需要显式嵌套标题。

我的印象是，除了命名空间的简单名称之外，允许放置合格的标识符并不是什么大问题，但由于某种原因，这是不允许的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-02-18T15:21:43.287

这篇论文很好地涵盖了这个主题：[命名空间论文](http://open-std.org/JTC1/SC22/WG21/docs/papers/2017/p0816r0.pdf)

这基本上归结为这一点。您的命名空间越长，人们使用该`using namespace`指令的可能性就越大。

因此，查看以下代码，您会看到一个会伤害您的示例：

```
namespace abc { namespace testing {
    class myClass {};
}}

namespace def { namespace testing {
    class defClass { };
}}

using namespace abc;
//using namespace def;

int main(int, char**) {
    testing::myClass classInit{};
} 
```

此代码可以正常编译，但是，如果您取消注释该行，`//using namespace def;`那么“测试”名称空间将变得不明确，并且您将遇到命名冲突。这意味着您的代码库可以通过包含 3rd 方库从稳定变为不稳定。

在 C# 中，即使您要使用`using abc;`并且`using def;`编译器能够识别它`testing::myClass`，甚至只是`myClass`在`abc::testing`命名空间中，但 C++ 不会识别它并且它被检测为冲突。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-06T08:49:42.537

是的，你必须这样做

```
namespace A{ 
namespace B{
namespace C{} 
} 
} 
```

但是，您正在尝试以不应该使用它们的方式使用命名空间。检查[这个](https://stackoverflow.com/questions/713698/c-namespaces-advice)问题，也许你会发现它很有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-02T05:32:36.743

您可以使用以下语法：

```
namespace MyCompany {
  namespace MyModule {
    namespace MyModulePart //e.g. Input {
      namespace MySubModulePart {
        namespace ... {
          class MyClass;
        }
      }
    }
  }
}

// Here is where the magic happens
class MyCompany::MyModule::MyModulePart::MySubModulePart::MyYouGetTheIdeaModule::MyClass {
    ...
}; 
```

请注意，即使在 C++98 中，这种语法也是有效的，它几乎类似于现在在 C++17 中使用[嵌套命名空间定义](http://www.nuonsoft.com/blog/2017/08/01/c17-nested-namespaces/)的语法。

快乐的脱巢！

**资料来源：**

*   [http://seanmiddleditch.com/unnest-c-namespaces/](http://seanmiddleditch.com/unnest-c-namespaces/)
*   [http://www.nuonsoft.com/blog/2017/08/01/c17-nested-namespaces/](http://www.nuonsoft.com/blog/2017/08/01/c17-nested-namespaces/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-22T07:31:05.267

**[ 编辑：]**
由于支持 c++17 嵌套命名空间作为标准语言功能（[https://en.wikipedia.org/wiki/C%2B%2B17](https://en.wikipedia.org/wiki/C%2B%2B17)）。目前g++8不支持这个特性，但是在clang++6.0编译器中可以找到。

**[结论：]**
用作`clang++6.0 -std=c++17`您的默认编译命令。然后一切都应该正常工作 - 你将能够`namespace OuterNS::InnerNS1::InnerNS2 { ... }`在你的文件中编译。

**[原始答案：]**
由于这个问题有点老了，我会假设你已经继续前进了。但是对于仍在寻找答案的其他人，我提出了以下想法：

[![Emacs 缓冲区显示主文件、命名空间文件、编译命令/结果和命令行执行。](../Images/581a4781ebaf9e3102592bb67d7ff3e4.png)](https://i.stack.imgur.com/TBliC.png)

（我可以在这里为 Emacs 做广告吗：）？）发布图像比简单地发布代码要容易得多，也更易读。我不打算对所有极端案例提供一个完整的答案，只是想提供一些灵感。（我完全支持 C#，并且觉得 C++ 在很多情况下应该采用一些 OOP 特性，因为 C# 流行主要是因为它比较易用）。

# objective-c - 为报亭应用程序制作应用程序内商店

> ID：11358430
> 
> 赞同：10
> 
> 时间：2012-07-06T08:18:19.920
> 
> 标签：objective-c, ios, xcode, ipad, newsstand-kit

基本上，该应用程序需要查看哪些杂志问题（应用内购买）可用，并以多行图形显示它们的封面。（打开报亭应用程序时看到的问题目录）

问题本身是带有支持文件（CSS、图像...）的 html

你知道怎么做吗？
你已经做到了吗？
是否有这样的代码可以适应他们自己的情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T11:28:56.507

使用应用程序，您还需要一个服务器实现。您的应用程序应每次（或基于推送通知）连接服务器以检查所有可用的杂志问题。它的服务器逻辑提供网络调用或托管一些文件，以便应用程序可以确定可用杂志问题的列表以及有关该问题的其他元数据。元数据可以是问题名称、日期、价格、托管封面图片的路径、托管完整问题内容的路径、iTunes 产品 ID 等。一旦您的应用程序获得所有这些信息，它应该创建 UI 以显示所有可用的问题，通过下载封面图片，显示日期，问题名称等。

您的应用还应缓存问题的图像和元数据，以便您即使在离线时也可以创建商店。

一旦用户点击一个问题，您就可以使用问题的 iTunes 产品 ID 进行购买，并且在成功购买后，您的应用程序应该显示一些 UI 以从您的服务器下载问题的内容。

如果您想使用推送通知启用后台下载（并且您不介意您的应用程序安装在 iOS5 的名为 Newsstand 的预安装文件夹中），您应该将您的杂志应用程序设为 Newsstand 应用程序。看看我对[这个](https://stackoverflow.com/questions/9584061/how-to-integrate-the-newsstand-in-app/9662228#9662228)问题的回答。它有一个关于报亭应用程序的非常好的教程的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:16:59.500

也许你应该看看关于应用内购买的 Ray Wenrerlich 教程：[http ://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

它解释了如何管理具有您需要购买的所有功能的产品列表，并查看已经购买了哪些产品。

它可能不是您所需要的，但它可以为您提供一个良好的起点

祝你好运

# c++ - C++ 期望一个浅拷贝，但不完全是

> ID：11358434
> 
> 赞同：0
> 
> 时间：2012-07-06T08:18:35.560
> 
> 标签：c++, class, templates, constructor

下面是一个 Vector 的模板类，它存储了不同类型的数据元素。检查复制构造函数的代码和主代码。我所期望的语句“cout << vCHAR2[2] << endl;” 应该打印值“费用”，因为复制承包商正在做一个浅拷贝，但它正在打印“责任”。

有谁能够帮助我？谢谢。

```
template<typename T>
class Vector{
  private:
      T* ptr;
      int size;
  public:
      Vector<T>(int s = 10){
           size = s;
           if(size!=0)
           {
               ptr = new T[size];

           }else{
               ptr = 0;
           }

      }
      Vector<T>(const Vector<T> &copy){
            this->size=copy.getSize();

            if(size !=0)
            {
                 ptr=new T[size];
                 for(int i=0;i<size;i++)
                    ptr[i] = copy.ptr[i];    
            }else{
               this->ptr=0;
            }
      }

      ~Vector<T>(){
         if(size>0)
         {
            delete[] ptr;
         }
      }
      int getSize() const
      {
          return size;    
      }
      const Vector<T> & operator = (const Vector<T> &rhs){
            if(this!=&rhs)
                 delete [] this->ptr;
                 size = rhs.size;
                 if(size!=0)
                 {
                      ptr=new T[size];
                      for(int i=0;i<size;i++)
                              ptr[i] = rhs.ptr[i];
            }

            return *this;

      }

      T& operator[](int index){
         if(index>=0 && index<=size)
            return ptr[index];
      }
};    

int main(int argc, char *argv[])
{
  Vector<char*> vCHAR(10);
  vCHAR[0]="asset";
  vCHAR[1]="income";
  vCHAR[2]="liability";

  Vector<char*> vCHAR2(vCHAR);
  vCHAR[2] = "expense";

  cout << vCHAR[2] << endl;

  cout << vCHAR2[2] << endl;

  system("PAUSE");
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:28:33.840

复制 ctor 进行深度复制，因此 vCHAR2 有自己的元素数组。因此，当您更改源 Vector 的元素时，不需要查看。（当您更改通过 strcpy() 或访问指向的数据时，它会看到它`vCHAR[2][0]='X';`（前提是这不会使您的程序崩溃-当您对字符串文字进行操作时））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:28:37.397

with vCHAR[2] = "expense" you are changing the pointer inside the vector vCHAR, but the vCHAR2[2] still point to the old location. In short - there is no shallow copy of a pointer. If you'd re-used T* from the source when copying the vector, you'd have what you wanted.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:32:18.063

The design you have chosen to implement a vector is dangerous. If you have decided to manage elements using a kind of the node allocation approach (whereas `std::vector` uses the block allocation approach) you have to be careful with the pointers and memory management routines. The issues you have got are related to how you work with pointers: in `T* ptr;` and `T& operator[]`, including the array copy routine. In your example, you are working with a pointer-to-pointer to char - `char**` (substitute the template with `char*`). If you are decided to design your own vector implementation with the node allocation approach, I would suggest to also implement the `struct VectorTraits` and design your vector class using it, at least. Also I would suggest to use `std::string` instead of char*.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:37:48.117

In the line:

```
Vector<char*> vCHAR2(vCHAR); 
```

vCHAR2[2] is a pointer to the string "liability". The line

```
vCHAR[2] = "expense"; 
```

does not change the value of vCHAR2[2] because vCHAR2[2] is still pointing to "liability" even if vCHAR[2] has changed.

To change it you just have to assign to it directly ie

```
vCHAR2[2] = "expense"; 
```

I think what you are trying to achieve is something along the lines of:

```
int* p = new int();
*p = 111;

int* q = p;

*p = 222; // change the content of what is pointed to

cout << *p << endl; // 222
cout << *q << endl; // 222 also 
```

However, this is a different case since we are changing the contents of what is pointed to. If we just do pointer assignment, the contents are unchanged. Only the pointer is assigned to another area of memory.

```
*p = 111;

int* q = p;

int z = 333;
p = &z; // do not change the content of what is pointed to, point to another area

cout << *p << endl; // 333
cout << *q << endl; // 222 still 
```

# nhibernate - 主键以外的列上的 NHibernate HiLo

> ID：11358435
> 
> 赞同：2
> 
> 时间：2012-07-06T08:18:42.820
> 
> 标签：nhibernate

任何人都会遇到一种在除主键之外的列上实现 hilo 类型解决方案的方法。有一个像 jobno 这样的列，我不想成为主键（因为使用 guidcomb 并对此感到满意）并且需要为其提供一个序列号并且不想点击数据库来获得下一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:50:11.873

我不知道任何“开箱即用”的东西，但是您可以创建 NHibernate.Id.TableHiLoGenerator 的实例（NHibernate 使用它来生成 id 值）并使用它来生成值。但是，您仍然需要手动设置实体的生成值。

你也可以通过继承 TableHiLoGenerator 来做你自己的生成器：

```
public class MyHiLoGenerator : TableHiLoGenerator
{
    private readonly ISessionFactory _sessionFactory;

    public MyHiLoGenerator(ISessionFactory sessionFactory)
    {
        _sessionFactory = sessionFactory;
        Configure(NHibernateUtil.Int64, new Dictionary<string, string> {{"table", "mytable"}, {"column", "mycolumn"}}, ((SessionFactoryImpl) sessionFactory).Dialect);
    }

    public long NextValue()
    {
        return (long) Generate((ISessionImplementor) _sessionFactory.GetCurrentSession(), null);
    }
} 
```

这只是一个简单的示例，根本没有经过测试，但它仍然展示了如何使用 TableHiLoGenerator 的想法。我自己用这样的东西来生成 HiLo 值。

# pytest - pytest - 在 setup_module 中使用 funcargs

> ID：11358437
> 
> 赞同：3
> 
> 时间：2012-07-06T08:18:53.360
> 
> 标签：pytest

我在 confttest.py 中包含了我自己的命令行选项

```
def pytest_addoption(parser):
    parser.addoption("--backend" , default="test_backend",
        help="run testx for the given backend, default: test_backend") 
```

和

```
def pytest_generate_tests(metafunc):
    if 'backend' in metafunc.funcargnames:
       if metafunc.config.option.backend:
          backend = metafunc.config.option.backend
          backend = backend.split(',')
          backend = map(lambda x: string.lower(x), backend)
        metafunc.parametrize("backend", backend) 
```

如果我在模块内的普通函数中使用此命令行选项：

```
module: test_this.py;  

def test_me(backend): 
  print backend 
```

它按预期工作。

现在我想在一些测试之前包含 setup_module 函数来创建/复制一些东西：

```
def setup_module(backend):
   import shutil
   shutil.copy(backend, 'use_here')
   ... 
```

不幸的是，我现在知道如何在 setup_module 函数中访问此命令行选项。没有任何效果，我试过了。

感谢您的帮助，建议。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:55:20.583

有一个 API 扩展正在讨论中，它允许在设置资源中使用 funcargs，您的用例就是一个很好的例子。有关正在讨论的 V2 草案，请参见此处：http: [//pytest.org/latest/resources.html](http://pytest.org/latest/resources.html)

今天，您可以像这样解决您的问题::

```
# contest of conftest.py

import string

def pytest_addoption(parser):
    parser.addoption("--backend" , default="test_backend",
        help="run testx for the given backend, default: test_backend")

def pytest_generate_tests(metafunc):
    if 'backend' in metafunc.funcargnames:
        if metafunc.config.option.backend:
            backend = metafunc.config.option.backend
            backend = backend.split(',')
            backend = map(lambda x: string.lower(x), backend)
        metafunc.parametrize("backend", backend, indirect=True)

def setupmodule(backend):
    print "copying for", backend

def pytest_funcarg__backend(request):
    request.cached_setup(setup=lambda: setupmodule(request.param),
                         extrakey=request.param)
    return request.param 
```

给定一个包含两个测试的测试模块：

```
def test_me(backend):
    print backend

def test_me2(backend):
    print backend 
```

然后，您可以运行以检查事情是否按预期发生：

$ py.test -q -s --backend=x,y

收集 4 个项目 复制 x x . 复制 y y .x .y

4 个在 0.02 秒内通过

由于有两个正在测试的后端，您将获得四个测试，但模块设置仅针对模块中使用的每个后端进行一次。

# asp.net-mvc-3 - 带有 Web API 业务层的 ASP.Net MVC 3 架构

> ID：11358438
> 
> 赞同：0
> 
> 时间：2012-07-06T08:18:54.377
> 
> 标签：asp.net-mvc-3

我正在编写我的第一个 MVC 应用程序，虽然我一直在尝试应用其他答案中给出的指导方针，但项目的结构使这变得困难（而且我把事情弄得一团糟！）。目前，应用程序分为以下几层：

*   **使用 Web API 服务访问的域对象/逻辑。**我将此层视为黑匣子，因为某些代码在多个 WPF 应用程序中使用并且不受我的控制。

*   **存储层。**该层调用 Web API 服务，并被添加以帮助单元测试。它调用服务并返回一个反序列化的域模型。

*   **控制器。** 根据数据的使用方式，我有两种不同风格的控制器。

    在第一种类型中，控制器调用存储库中的方法，然后使用映射器类将域对象转换为视图模型。映射是手动完成的，因为某些视图模型与底层域对象有很大不同。例如：

    ```
    DomainObject domainObject = m_repository.GetObject(id);
    ViewModel model = ModelMapper.PopulateViewModel(domainObject);
    return View(model); 
    ```

    第二种类型旨在提供 AJAX 调用使用的数据。在这里，控制器像以前一样调用存储库，但随后使用自定义 Json.Net 转换器将域模型转换为 JSON。例如：

    ```
    var jsonNetResult = new JsonNetResult();
    DataObject data = m_repository.GetData(id);

    jsonNetResult.Converters.Add(new DataObjectConverter());
    jsonNetResult.Data = data;

    return jsonNetResult; 
    ```

**问题：**

感觉就像我在 JSON、域对象和视图模型之间进行了很多切换。这似乎不是特别高效——存储库可以/应该创建视图模型而不是控制器吗？

如果数据打算作为 JSON 提供，我将域对象转换为 JSON，而不是使用视图模型。这似乎不一致，但我不想仅仅为了它而映射到视图模型。这是正确的方法吗？

我可以在实体框架之上找到很多使用 MVC 的示例，但我很难找到在 MVC 应用程序中使用 Web API 的示例。谁能指出我正确的方向？

希望这是有道理的，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:43:26.277

我会为您的应用程序建议一个更简单的模型：将 Web API 和经典 MVC 控制器视为公开存储库信息的两种方式，其中存储库层反映了您的持久存储。您不想让 MVC 控制器调用 Web API - 直接进入存储库。

有许多关于如何在 MVC 应用程序中使用 Web API 的示例，例如，您可以查看 [1]。

亨里克

[1] [http://www.asp.net/web-api/samples](http://www.asp.net/web-api/samples)

# javascript - 如何降低 iPad3 MP4 播放器的 z-index？

> ID：11358441
> 
> 赞同：2
> 
> 时间：2012-07-06T08:19:05.567
> 
> 标签：javascript, html, css, ipad

我刚刚注意到我理解的奇怪的 iPad3 (iOS 5.1) 问题，但我不知道如何解决。

**短版：** iPad 的播放器覆盖了我所有的 div。我怎样才能让它显示在它们下面？

**长版：**我在网站上嵌入了 vimeo 视频。在该 vimeo 视频之上，我有两个容器，分别覆盖了 Vimeo 视频左侧的 25% 和右侧的 25%。

当用户点击左侧容器时，他会转到上一个视频，如果用户点击右侧容器，他会转到右侧视频。那些是 25% 宽的大箭头，可以点击 Vimeo 视频的中间部分来实现“播放”功能（中间的 50% 宽度没有被覆盖，所以他可以点击）。

效果很好！

但是...当我在 iPad 3 上播放该视频时，它变成了 MP4 播放器或其他东西，并覆盖了两个容器（它们不可点击 - 视频占据了 100% 的宽度并覆盖了我的箭头）。**如何降低 iPad3 MP4 播放器的 z-index？或者做点别的事情让我的箭还在上面？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:35:02.180

我在某处读到，设置一个没有实际效果的 css 转换可以“破解”它来修复 z-index 错误，所以为什么不尝试（我今天没有 ipad 可以和我一起尝试）：

-wekbit-transform: 翻译(0, 0);

在视频的 CSS 中。

对不起，如果它不好，如果我能找到原始来源，我会发布它

# iphone - UIScrollView 高度与 UIView 高度

> ID：11358442
> 
> 赞同：1
> 
> 时间：2012-07-06T08:19:06.550
> 
> 标签：iphone, objective-c, ios, ipad, uiscrollview

在我的代码中，当 UI 方向更改为横向时，我正在增加`contentSize`a的高度，以便所有视图都适合那里并且用户可以滚动查看它。`UIScrollView`

在我的 XIB 中，我有

```
/UIView - 查看
  |- UIScrollView - 滚动视图
       |- 其他应该可以滚动的子视图

```

scrollView 与视图具有相同的大小，并且其自动调整大小掩码设置为在所有方向上调整大小。

我注意到滚动视图的高度尺寸远大于视图的高度。

例如，我有一些调试日志：

```
NSLog(@"%@ - self.view.frame=%@, self.view.bounds=%@", NSStringFromSelector(_cmd), NSStringFromCGRect(self.view.frame), NSStringFromCGRect(self.view.bounds));
NSLog(@"self.scrollView.frame=%@, self.scrollView.bounds=%@", NSStringFromCGRect(self.scrollView.frame), NSStringFromCGRect(self.scrollView.bounds));

```

它打印

```
willAnimateRotationToInterfaceOrientation:duration: - self.view.frame={{0, 0}, {480, 219}}, self.view.bounds={{0, 0}, {480, 219}}
self.scrollView.frame={{0, 0}, {480, 399}}, self.scrollView.bounds={{0, 0}, {480, 399}}

```

即使在 Xcode IB 中，它也看起来像：

![UIScrollView 与 UIView 的高度](../Images/28db2da13f9cad965924ddd59163c0ce.png)

为什么`UIScrollView`与视图的大小不同？

谢谢

* * *

**更新**

奇怪的是，当我将 scrollView 的高度设置为 460（iPhone 纵向）时，Xcode/IB 显示 scrollView 小于其父视图（也设置了相同的尺寸）： ![在此处输入图像描述](../Images/78114c1121c5f647e0c729dde5cabdf5.png)

但是现在我创建了一个带有 1 XIB 的测试项目，它只有 1 `UIView`，在其中添加了 1`UIScrollView`并且看起来正常，`UIScrollView`' 的高度与`UIView`' 匹配。

所以也许我以某种方式弄乱了 XIB 并且 Xcode 不能很好地处理它。

无论如何，我正在以编程方式设置尺寸（以处理旋转、UI 组合更改等）并且它按预期工作。由于这是我的第一个 iOS 项目，我只是想知道`UIScrollView`. 显然不是 ：-）

谢谢你们的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:23:53.380

首先，将 UIScrollView 的边界设置为与其 superview 的 100% 相同。接下来确保它的 superview 的 autoresizesSubviews 属性设置为 YES。然后一切都会正常工作。此外，“willAnimate...”表示旋转操作尚未完成，您应该在“didRotate”回调中检查新帧。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T14:09:49.917

我已经创建了一个带有 1 个只有 1 个 UIView 的 XIB 的测试项目，在那里添加了 1 个 UIScrollView，它看起来很正常，UIScrollView 的高度与 UIView 的高度匹配。

所以也许我以某种方式弄乱了 XIB 并且 Xcode 不能很好地处理它。

谢谢你给我的意见。

# hadoop - 在混合操作系统上设置 Hadoop 集群

> ID：11358443
> 
> 赞同：0
> 
> 时间：2012-07-06T08:19:06.830
> 
> 标签：hadoop

我有一台带有 10.7.4 的 MBP 和一台带有 Ubuntu 12.04 的笔记本电脑。这样的混合环境是否可以建立一个hadoop集群？

最好的祝福，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:57:42.937

应该没有什么可以停止为 Hadoop 集群使用异构环境。对于开发环境它应该没问题，但对于生产它不是。

混合环境应该不是问题，但是在不同环境中设置 Hadoop 时可能需要一些时间来调试问题。如果您真的很担心，请使用虚拟机。

需要注意的一点是，在速度较慢的机器上，这些任务可能会花费大量时间，并且可能会影响完成整个工作的总时间。在这种情况下，更细粒度的拆分可能会有所帮助。

# valgrind - 无法理解 valgrind 输出

> ID：11358444
> 
> 赞同：1
> 
> 时间：2012-07-06T08:19:17.157
> 
> 标签：valgrind, memcheck

无法理解 .eh_frame 部分映射

```
 ==4780== Use of uninitialised value of size 4
     ==4780==    at 0x4011D18: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x401628F: ???
     ==4780==    by 0x4006227: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x40065EF: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x4009E33: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x400B437: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x400A29F: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x4002ECB: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x400DF03: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x4001BD3: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x400215F: ??? (in /lib/ld-2.3.2.so)
     ==4780==    by 0x400EF2B: ??? (in /lib/ld-2.3.2.so)
    ==4780==
     ==4780== Use of uninitialised value of size 4
     ==4780==    at 0x4011D28: ??? (in /lib/ld-2.3.2.so)
     ==4780==
     --4780-- WARNING: Serious error when reading debug info 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:21:41.937

您显示的输出表明`/lib/ld-linux.so.2`已被剥离。

通常默认的 Valgrind 抑制会抑制这个输出（因为无论如何你不能对这些错误做任何事情）。安装 glibc-debug-2.3.2* 包可能会有所帮助。

`ld-linux.so.2`最近的 Valgrind 版本在被剥离时拒绝运行。但是，由于您使用的是*古代* `glibc-2.3.2`（2003 年 3 月发布），因此您可能也在使用古代版本的 Valgrind，但事实并非如此。

# javascript - 如何使用具有不同工具栏的 multips Aloha 编辑器

> ID：11358448
> 
> 赞同：1
> 
> 时间：2012-07-06T08:19:33.577
> 
> 标签：javascript, aloha-editor

在一个页面上，我希望有 2 个可以使用 aloha-editor 编辑的 div。对于一个字段，格式工具栏应该可用，对于另一个只有插入工具栏。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:49:31.663

可以在每个可编辑级别上配置格式插件。在格式 pugin的[文档](http://aloha-editor.org/guides/plugin_format.html)中，页面底部有一个示例。

# c# - 如何在 C# 中创建 DLLMain

> ID：11358452
> 
> 赞同：0
> 
> 时间：2012-07-06T08:19:44.240
> 
> 标签：c#

我想创建一个`DLL`in`C#`但我需要知道`DLL`注入某个进程时调用的主要方法名称是什么。

例如，`DLLMain`在`C++`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-01T11:15:22.247

即使它已经 4 岁了，我也要回答这个问题，以便有一个正确的答案。

虽然您可以使用 P/Invoke 在 .NET 中使用非托管 DLL，但 .NET DLL 是托管 DLL，*不能通过*`LoadLibrary`using或类似调用在非托管环境中使用。确实没有办法简单地提供常用的 DLL 函数，然后从 Delphi、C++ 等中使用它。

您*可以*做的是创建一个 COM-DLL。这在 .NET 中非常简单，在注册 DLL 后，您可以使用其他语言使用 COM 使用 DLL 中定义的类。

您也可以尝试使用 C++ 混合模式创建包装 DLL，但到目前为止我还没有这样做，因为我不太喜欢 C++。您也许可以使用非托管应用程序中的非托管部分并让它调用托管部分。

# google-apps-script - 使用元数据标记图像，以便可以在应用程序脚本中进行外部管理

> ID：11358456
> 
> 赞同：0
> 
> 时间：2012-07-06T08:20:07.297
> 
> 标签：google-apps-script

我希望能够将图像插入到随后由应用程序脚本管理的 docs 文档中。

在这个例子中，我可能会插入一个骨架（带有 WxH 设置）的例子，我打算最终这样显示；

![](../Images/e23adfe2dc60e7595299937eeee1b4fa.png)

但是稍后再添加一些兴趣。

![](../Images/724e254f2b85f26bffaf125e4dd3200b.png)

[InlineImage](https://developers.google.com/apps-script/class_inlineimage)类似乎有一个[setAttributes](https://developers.google.com/apps-script/class_inlineimage#setAttributes)方法，但不清楚是否可以使用其中任何一种方法来标记图像，以便以后我可以迭代文档中的所有图像，并根据需要更新它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:51:10.297

无法将任意元数据或标签附加到 Google Apps 脚本中的图像元素。

# cakephp - 复选框的 CakePHP 1.3 数据类型

> ID：11358457
> 
> 赞同：0
> 
> 时间：2012-07-06T08:20:08.467
> 
> 标签：cakephp, checkbox, scaffold

可能以前被问过，但我在这里找不到它:)

我使用 Cake 1.3 中的内置脚手架，还不想开始弄乱视图，很高兴现在让自动表单创建（基于模型）控制视图。我的问题是，如果我想在表单中添加一个复选框，我需要在模型中使用什么数据类型，以便复选框会自动出现在表单上（如果我可以这样做的话？）。

谢谢斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:33:40.903

您想将数据库中的数据类型设置为`TINYINT(1)`. 然后，CakePHP 将自动使用表单中的复选框`$this->Form->input('fieldName');`

# javascript - 有什么方法可以比较两个不同的位图图像并检测 javascript 中的不同区域？

> ID：11358461
> 
> 赞同：2
> 
> 时间：2012-07-06T08:20:23.310
> 
> 标签：javascript, html, canvas

我将制作一个用户检测两个图像的不同区域的游戏。这两张图片有几个不同的区域，看起来都一样，所以用户应该找出来。

所以我想比较两个不同的位图图像并检测不同的区域。

有人可以给我一个提示吗？我必须使用画布吗？

我正在用 HTML5、javascript 制作这个游戏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:41:12.710

首先将每个图像绘制到画布上

```
var img1 = (your first image), 
    img2 = (your second image),
    ctx1 = document.createElement('canvas').getContext('2d'),
    ctx2 = document.createElement('cavnas').getContext('2d');

ctx1.canvas.width = img1.width;
ctx2.canvas.width = img2.width;
ctx1.canvas.height = img1.height;
ctx2.canvas.height = img2.height;

ctx1.drawImage(img1, 0, 0);
ctx2.drawImage(img2, 0, 0); 
```

然后获取每个img的图像数据

```
var data1 = ctx1.getImageData(0, 0, img1.width, img1.height);
var data2 = ctx2.getImageData(0, 0, img2.width, img2.height); 
```

最后比较（假设 img1 和 img2 是相同的尺寸）

```
var different = [];

for (var y=0; y<img1.height; y++){
    for (var x=0; x<img1.width; i++){
        var pos = (x * 4) + (y * (img.width * 4));
        for (var i=0; i<4; i++){
            if (data1[pos + i] != data2[pos + i]){
               different.push({x: x, y: y});
            }
        }
    }
} 
```

这将为您提供两个图像之间不同的所有像素的 x、y 坐标数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:38:52.110

您需要以某种方式从图像中获取 rgb 值并进行比较。您可以参考 openCV 库来查看图像处理是如何完成的。

或者你可以设计一个嵌入网页的小程序。Java 将提供类来处理 RGB 值。

反转一个图像的颜色并与其他图像叠加。获取绝对差异并检查您获得差异的像素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T08:33:09.480

JavaScript 无法检查图片中的像素。这就是为什么颜色选择器只适用于 div（他们读出背景颜色）

# ios - 如何防止 MessageUI SMS 新消息视图重叠状态栏？

> ID：11358462
> 
> 赞同：1
> 
> 时间：2012-07-06T08:20:34.373
> 
> 标签：ios, uiviewcontroller, messageui

一张图片胜过千言万语：

![在此处输入图像描述](../Images/cfe0c1342ff887ff297a90adc9a9ea62.png)

该应用程序通过关闭代码中的状态栏设置为全屏。每个 UIViewController 都是全屏的。他们都按预期行事。也没有旋转，整个应用程序保持纵向。这也很好。

“新消息”界面按预期动画，但状态栏重新出现，最糟糕的是，“新消息”视图位于其下方。

我正在使用 MessageUI 框架让用户发送 SMS 消息。以下是消息撰写界面的呈现方式：

```
if([MFMessageComposeViewController canSendText])
{
    MFMessageComposeViewController *msgvc = [[MFMessageComposeViewController alloc] init];
    msgvc.body = @"SMS message content";
    msgvc.recipients = [NSArray arrayWithObjects:@"1234567890", @"2345678901", nil];
    msgvc.messageComposeDelegate = self; 
    [self presentModalViewController:msgvc animated:YES];

    [msgvc release];
} 
```

我试着玩，`wantsFullScreenLayout`但它完全没有做任何事情。我通过谷歌找到了一些关于这个问题的参考，但没有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T03:49:48.503

这是我解决问题的方法：

我在将 MessageUI 视图控制器显示为重新隐藏状态栏后添加了这一行代码：

```
[self presentModalViewController: msgvc animated:FALSE];
[[UIApplication sharedApplication] setStatusBarHidden:TRUE];
[msgvc release]; 
```

即使应用程序以全屏模式启动（在应用程序委托中的代码中设置），MessageUI 似乎也需要重新处理状态栏。

# internationalization - 谷歌索引/搜索结果多语言

> ID：11358464
> 
> 赞同：0
> 
> 时间：2012-07-06T08:20:36.517
> 
> 标签：internationalization, seo

我们有一个多语言应用程序，可以使用 GET 参数来区分不同的语言版本以及客户端的浏览器语言。如果语言不受支持或未知，我们将使用英语作为后备。目前支持的语言是英语和德语，顺便说一句。

因此，浏览器语言为“en”的访问者（任何其他语言，如“es”、“zh”等 - 除了“de” - 将导致所描述的英语）将获得不同 url 的以下语言版本：

*   mydomain.com --> 英文版
*   mydomain.com?language=en --> 英文版
*   mydomain.com?language=de --> 德语版

到目前为止，这是可行的，但这是我们在使用 Google 索引时遇到的问题：

当我们从德国或使用 google.de 搜索网站时，一个（至少是我们的客户）会期望得到德语的结果。

但是，Google 使用英文文本而不是德文文本显示结果（页面摘录/元描述）。

例如，搜索“mydomain”（请原谅程序员艺术:)）：

```
My Domain Title
http://www.mydomain.com
Here's the english meta description even if we search from Germany. 
```

问题似乎是 GoogleBot 要么使用英语，要么不提供任何语言信息（我认为是这种情况），因此获得了“mydomain.com”的英文版本。

我们试图帮助 GoogleBot 并将“备用”链接放入页面标题，即对于“mydomain.com”，我们将拥有这些

```
<link rel="alternate" hreflang="en" href="http://www.mydomain.com?language=en" /> 
<link rel="alternate" hreflang="de" href="http://www.mydomain.com?language=de" /> 
```

然而，尽管理论上（据我们所知）GoogleBot 现在应该知道该页面的不同语言版本，但它仍然返回英文结果。

我们还考虑过使用“规范”标签，但这是否意味着我们必须选择一种语言版本才能被索引？

我们的最终目标是让谷歌为国际用户返回英文版页面，为德国用户返回德文版。

关于我们如何实现这一目标的任何提示？

**更新：**

这是我们迄今为止为解决这个问题所做的工作。

首先，我们将语言移动到站点的路径中，每当缺少该语言时，我们假定为德语。

因此我们有这个结果：

```
http://www.mydomain.com --> 301 to "http://www.mydomain.com/de/"
http://www.mydomain.com/de/ --> German, alternatives are "http://www.mydomain.com/de/" and "http://www.mydomain.com/en/"
http://www.mydomain.com/en/ --> English, alternatives are "http://www.mydomain.com/de/" and "http://www.mydomain.com/en/" 
```

德语 Google 现在按预期显示德语结果，但英语 Google（或设置为显示英语结果的德语 Google）也显示德语结果。我认为原因要么是重定向错误，要么是谷歌并不在意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:05:20.083

我遇到了同样的问题，并通过使用**语言限制**（lr）参数解决了它，如[Google Docs中所述](https://developers.google.com/custom-search/docs/xml_results?hl=en#lrsp)

希望这可以帮助。

澄清：这有助于谷歌网站搜索（我们正在使用）。但是，通过 google.com 进行的正常 Google 搜索仍会返回那些丑陋的混合语言结果。

# hoverintent - 下拉面板上的 HoverIntent 或延迟

> ID：11358467
> 
> 赞同：0
> 
> 时间：2012-07-06T08:20:44.573
> 
> 标签：hoverintent

我之前得到了一些帮助，但是当你将鼠标悬停在按钮上时，我现在需要在按钮上添加一个延迟，这样当用户在网页上滑动鼠标时它就不会一直向下滑动。

我有一个关于[jsfiddle的例子](http://jsfiddle.net/JHAA4/4/)

我不是专家，所以我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:38:49.003

试试这个：

```
$(".btn-slide").on('mouseover', function(e) {
            switch(e.type) {
                case 'mouseover':
                    $("#panel").delay(900).slideDown("slow");
                    break;
                    }
            return false;
        });    

        $(".close-slide").on('click', function(e) {
            switch(e.type) {
                case 'click':
                    $("#panel").slideUp("slow");
                    break;
                    }
            return false;
        }); 
```

您可以将“900”更改为适合您的任何内容。

您还可以使用 hoverintent 插件： [http ://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

# iphone - NSURLConnection 向 WCF 发布正文大小限制问题？

> ID：11358468
> 
> 赞同：0
> 
> 时间：2012-07-06T08:20:45.783
> 
> 标签：iphone, wcf, http-post, nsurlconnection, nsdata

我想使用**一个** `NSURLConnection`Post 请求将几张图片和一个文本文件从 iphone 上传到 WCF。因此，我将图像附加`NSData`到请求的正文中。显然，当正文的长度超过 65535 字节时，请求不起作用并且不会调用 WCF。它确实适用于 < 65535 字节。我怎么能做到这一点，每个图像很容易达到 50,000 字节......我在做一些破旧的事情吗？如果不是，那么正确的处理方法是什么？老实说，我不太确定问题出在 iphone（客户端）还是 WCF 端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:22:44.080

问题可能出在 web.config 文件中的 WCF 端。请参阅问题[WCF - 如何增加消息大小配额](https://stackoverflow.com/q/884235/830125)和[接受的答案](https://stackoverflow.com/a/884248/830125)以获取更多信息。基本上，您需要增加 WCF 缓冲区大小和消息大小配额，以便为您的`<httpBinding>`:

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="MyBasicHttpBinding"
                maxBufferPoolSize="2147483647"
                maxReceivedMessageSize="2147483647"
                maxBufferSize="2147483647">
                <readerQuotas
                    maxArrayLength="2147483647"
                    maxBytesPerRead="2147483647"
                    maxDepth="2147483647"
                    maxNameTableCharCount="2147483647"
                    maxStringContentLength="2147483647" />
            </binding>
        </basicHttpBinding>
    </bindings>

    <!-- Other code here -->

</system.serviceModel> 
```

您可能需要或想要调整这些数字以满足您的需要。

# visual-studio-2010 - VS2010和代理设置

> ID：11358469
> 
> 赞同：1
> 
> 时间：2012-07-06T08:20:46.713
> 
> 标签：visual-studio-2010, proxy, ftp, proxy-server

**忘了提到我正在使用`FTP`开放网站**

我正在一个 Web 项目中使用 Visual Studio 2010 Ultimate。当我需要在通过`Proxy server`. 我尝试[了任何类型的建议更改](https://stackoverflow.com/questions/2859148/visual-studio-2010-cannot-connect-for-any-online-resource)， `devenv.exe.config`但使用 TCPViewer 我可以看到来自 devenv.exe 的任何请求都不是通过代理完成的，而是直接完成的，我无法打开远程网站。

似乎VS2010没有读取配置设置。有人有同样的问题吗？有可能解决吗？

编辑：

代理是wingate，这是我使用的配置的一部分：

```
<system.net>
    <defaultProxy useDefaultCredentials="true" enabled="true"> // Tried with/without 'usedefaultCredential' Wingate use  IP matching for authorize connections
        <proxy proxyaddress="http://Myproxyserverip:8888"/>
    </defaultProxy>
    <settings>
        <ipv6 enabled="true"/>
        <servicePointManager expect100Continue="false" /> // Tried with and without this.
    </settings>
</system.net> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-01T10:54:27.993

Actually the solution (at least for me) is to set an user wide or system wide environment variable. I set this two envirionment variables:

> HTTP_PROXY
> 
> HTTPS_PROXY

Here's a screenshot:

![environment variables](../Images/6a17ad993b958a3851fb1ec7f532f0d6.png)

**If VS2010 is already open, close it and reload it so can parse the environment variables.**

ps. I'm using cntlm as proxy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:52:29.840

### 只是建议尝试...

您可以禁用“用于 IntelliTrace 和测试影响的 ASP.NET 客户端代理”。要禁用：转到测试»编辑测试设置»（选择当前活动的测试设置），选择数据和诊断并禁用提到的设置。

![VSTS 代理设置](../Images/b2bde2040b65a45b0ffe308727f66b8c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:15:52.463

目前唯一的解决方案是不使用代理服务器连接到互联网以通过 FTP 使用 VS2010 打开网站。似乎 Visual Studio 2010（也是 Express 版本）不使用 FTP 连接的代理设置。

我无法在 microsoft.com 站点和连接中找到有关此内容的任何信息或问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T05:34:47.280

我知道这是一个旧帖子，但它可能对某人有所帮助。大多数客户端软件使用 HTTP 来处理事物，并使用 wininet。如果您使用 wininet 检索和 FTP URL，则 WinInet 堆栈执行 FTP。

但是，如果您指定代理，那么对于 FTP，WinInet 将恢复为 HTTP，并将 FTP 的工作交给代理。因此，当您为 FTP 指定代理时，它必须是与 HTTP 相同的代理 - 相同的端口号。一个真正常见的错误是假定客户端需要使用 FTP 代理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-07T11:04:21.533

**控制面板 > Internet 选项 > 连接选项卡 > LAN 设置**

在那里设置您的代理。然后在您的 Visual Studio 安装中转到：

`D:\programs\VS2010\Common7\IDE\devenv.exe.config`并添加此配置：

```
<system.net>
 <defaultProxy useDefaultCredentials="true" enabled="true">
    <proxy usesystemdefault="True" />
 </defaultProxy>
</system.net> 
```

# c# - 加密字符串的最有效密码学方法

> ID：11358470
> 
> 赞同：0
> 
> 时间：2012-07-06T08:20:47.197
> 
> 标签：c#, .net, encryption

什么是加密字符串的最有效方法/密码学提供程序，这会产生最短的字符串。我们的目标是我们必须加密一个字符串，并且我们希望在加密后实现最短的字符串。

到目前为止，我们已经使用 Triple DES 和 Rijndael 进行了测试，两者都得到完全相同的加密长度。我也玩过更长和更短的键大小，但这也没有太大区别。

我不是密码学专家，所以我不知道是否有一些数学原因或解释为什么长度为 y 的字符串只能加密为长度 x - 希望听到您的专家意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:25:39.727

你的琴弦有多长？很长的字符串可以在加密之前进行压缩。

要生成与明文长度相同的密文，您可以：

*   使用流密码，例如 RC4，或[eSTREAM](http://www.ecrypt.eu.org/stream/)密码之一

*   在 CTR 模式下使用块密码（例如 AES）。

如果您的字符串都是 8 个字节或全部 16 个字节，那么您可以在 ECB 模式下使用具有适当块大小且没有填充的块密码。

# eclipse - Eclipse + M2e：无法将 JpaXmlResource 强制转换为 JpaXmlResource

> ID：11358475
> 
> 赞同：1
> 
> 时间：2012-07-06T08:21:01.290
> 
> 标签：eclipse, maven, m2e

布局：

*   简单的 Java Maven 项目。
*   POM 仅包含最少信息，包括`project.build.sourceEncoding`，没有依赖项或插件！
*   `persistence.xml`在下面`src/main/java/META-INF`

执行 Maven - 更新项目配置时导致以下错误：

```
An internal error occurred during: "Updating Maven Configuration".
org.eclipse.jpt.core.resource.xml.JpaXmlResource cannot be cast to 
org.eclipse.jpt.jpa.core.resource.xml.JpaXmlResource 
```

[在http://eclipsesrc.appspot.com/jsrcs/org.eclipse.jpt.core/src/org/eclipse/jpt/core/resource/xml/JpaXmlResource.java.html](http://eclipsesrc.appspot.com/jsrcs/org.eclipse.jpt.core/src/org/eclipse/jpt/core/resource/xml/JpaXmlResource.java.html)中有对第一类的引用，说明这个 api 仍在开发中。
我在[http://wiki.eclipse.org/WTP_Provisional_API_Reduction/Indigo](http://wiki.eclipse.org/WTP_Provisional_API_Reduction/Indigo)下找到了对第二类的引用。

所以看起来我的一些插件的版本有冲突。但我对哪些是傻眼了。我已经尝试从今天开始更新，但错误仍然存​​在。

已安装版本：

```
Context and Dependency Injection Tools  1.2.0.v20120611-1827-H85-Final  org.jboss.tools.cdi.feature.feature.group   JBoss by Red Hat
Dojo Toolkit 1.7.2 (optional)   1.0.0.v20120530_1235    com.ibm.wdt.webtools.dojo.library.distributions.1.7.feature.feature.group   IBM
Eclipse IDE for Java EE Developers  1.4.2.20120213-0813 epp.package.jee null
Forge Tools 1.0.0.v20120611-1732-H94-Final  org.jboss.tools.forge.feature.feature.group JBoss by Red Hat
FreeMarker IDE  1.2.0.v20120611-1732-H94-Final  org.jboss.ide.eclipse.freemarker.feature.feature.group  JBoss by Red Hat
Hibernate Tools 3.4.0.v20120611-2017-H93-Final  org.hibernate.eclipse.feature.feature.group JBoss by Red Hat
JavaHL 1.6.15 Win32 Binaries (Optional) 2.3.0.I20120316-1700    org.polarion.eclipse.team.svn.connector.javahl16.win32.feature.group    Polarion Software
JavaHL 1.7.4 Win32 Binaries (Optional)  2.3.0.I20120316-1700    org.polarion.eclipse.team.svn.connector.javahl17.win32.feature.group    Polarion Software
JBoss Archives Tools    3.2.1.v20120611-1725-H88-Final  org.jboss.ide.eclipse.archives.feature.feature.group    JBoss by Red Hat
JBoss Central   1.0.0.v20120612-0053-H99-Final  org.jboss.tools.central.feature.feature.group   JBoss by Red Hat
JBoss JAX-RS Tools  1.2.2.v20120611-1829-H137-Final org.jboss.tools.ws.jaxrs.feature.feature.group  JBoss by Red Hat
JBoss Maven CDI Configurator    1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.cdi.feature.feature.group JBoss by Red Hat
JBoss Maven Hibernate Configurator  1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.hibernate.feature.feature.group   JBoss by Red Hat
JBoss Maven Integration 1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.feature.feature.group JBoss by Red Hat
JBoss Maven JAX-RS Configurator 1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.jaxrs.feature.feature.group   JBoss by Red Hat
JBoss Maven JPA Configurator    1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.jpa.feature.feature.group JBoss by Red Hat
JBoss Maven JSF Configurator    1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.jsf.feature.feature.group JBoss by Red Hat
JBoss Maven Portlet Configurator    1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.portlet.feature.feature.group JBoss by Red Hat
JBoss Maven Project Examples    1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.project.examples.feature.feature.group    JBoss by Red Hat
JBoss Maven Seam Integration    1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.seam.feature.feature.group    JBoss by Red Hat
JBoss OpenShift Tools   2.3.0.v20120613-1951-H135-Final org.jboss.tools.openshift.express.feature.feature.group JBoss by Red Hat
JBoss Packaging Maven Configurators 1.3.0.v20120613-2141-H115-Final org.jboss.tools.maven.jbosspackaging.feature.feature.group  JBoss by Red Hat
JBoss Portlet   1.2.0.v20120611-2357-H92-Final  org.jboss.tools.portlet.feature.feature.group   JBoss by Red Hat
JBoss Runtime AS Detector   1.3.0.v20120611-2354-H105-Final org.jboss.tools.runtime.as.detector.feature.feature.group   JBoss by Red Hat
JBoss Runtime Detection Core    1.3.0.v20120611-2354-H105-Final org.jboss.tools.runtime.core.feature.feature.group  JBoss by Red Hat
JBoss Runtime Seam Detector 1.3.0.v20120611-2354-H105-Final org.jboss.tools.runtime.seam.detector.feature.feature.group JBoss by Red Hat
JBoss Tools Common - Mylyn  3.3.0.v20120611-1634-H74-Final  org.jboss.tools.common.mylyn.feature.feature.group  JBoss by Red Hat
JBoss Tools Community Project Examples  1.2.1.v20120612-0012-H106-Final org.jboss.tools.community.project.examples.feature.feature.group    JBoss by Red Hat
JBoss Tools EGit Integration (Experimental) 2.3.0.v20120613-1951-H135-Final org.jboss.tools.openshift.egit.integration.feature.feature.group    JBoss by Red Hat
JBoss Tools Java Standard Tools 3.3.0.v20120611-1739-H85-Final  org.jboss.tools.jst.feature.feature.group   JBoss by Red Hat
JBoss Tools JDT Extensions  3.3.0.v20120611-1634-H74-Final  org.jboss.tools.common.jdt.feature.feature.group    JBoss by Red Hat
JBoss Tools JSF 3.3.0.v20120611-2148-H115-Final org.jboss.tools.jsf.feature.feature.group   JBoss by Red Hat
JBoss Tools Mobile Browser Simulator    3.3.0.v20120611-1821-H102-Final org.jboss.tools.vpe.browsersim.feature.feature.group    JBoss by Red Hat
JBoss Tools RichFaces   3.3.0.v20120611-2148-H115-Final org.jboss.tools.richfaces.feature.feature.group JBoss by Red Hat
JBoss Tools Usage Reporting 1.1.0.v20120611-1654-H68-Final  org.jboss.tools.usage.feature.feature.group JBoss by Red Hat
JBoss Tools Visual Page Editor  3.3.0.v20120611-1821-H102-Final org.jboss.tools.vpe.feature.feature.group   JBoss by Red Hat
JBoss WebServices Tools 1.2.2.v20120611-1829-H137-Final org.jboss.tools.ws.feature.feature.group    JBoss by Red Hat
JBossAS Tools   2.3.0.v20120615-1559-H138-Final org.jboss.ide.eclipse.as.feature.feature.group  JBoss by Red Hat
JMX Console 1.2.0.v20120611-1733-H71-Final  org.jboss.tools.jmx.feature.feature.group   JBoss by Red Hat
m2e - slf4j over logback logging (Optional) 1.0.200.20111228-1245   org.eclipse.m2e.logback.feature.feature.group   Eclipse.org - m2e
m2e connector for build-helper-maven-plugin 0.14.0.201109282148 org.sonatype.m2e.buildhelper.feature.feature.group  Sonatype, Inc.
m2e connector for jaxb2 2.0.0.201203261829  org.bitstrings.eclipse.m2e.connectors.jaxb2.features.feature.group  bitstrings.org
m2e connector for maven-scm-plugin  1.0.0.201107091852  org.objectledge.maven.connectors.scm.feature.group  ObjectLedge.org
m2e Connector for XML Transform 0.4.0   nl.mwensveen.m2e.extras.xml.transform.feature.feature.group MWensveen.nl
Maven Integration for Eclipse JDT APT   1.0.0.201206052025  org.jboss.tools.maven.apt.feature.feature.group JBoss, by Red Hat
Maven SCM Handler for Subversive    0.13.0.201106211115 org.sonatype.m2e.subversive.feature.feature.group   Sonatype, Inc.
Native JavaHL 1.6 Implementation (Optional) 2.3.0.I20120413-1700    org.polarion.eclipse.team.svn.connector.javahl16.feature.group  Polarion Software
Native JavaHL 1.7 Implementation (Optional) 2.3.0.I20120520-1700    org.polarion.eclipse.team.svn.connector.javahl17.feature.group  Polarion Software
OSGi Application Development Tools  1.5.0.v20120530_1235    com.ibm.osgi.wdt.feature.feature.group  IBM
Project Examples    1.2.1.v20120612-0012-H106-Final org.jboss.tools.project.examples.feature.feature.group  JBoss by Red Hat
Seam 3 Tools    1.2.0.v20120611-1827-H85-Final  org.jboss.tools.cdi.seam.feature.feature.group  JBoss by Red Hat
Seam Tools  3.3.0.v20120612-1916-H130-Final org.jboss.tools.seam.feature.feature.group  JBoss by Red Hat
Spring IDE AOP Extension (optional) 2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.aop.feature.feature.group   Spring IDE Developers
Spring IDE Autowire Extension (optional)    2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.autowire.feature.feature.group  featureProvider
Spring IDE Batch Extension (optional)   2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.batch.feature.feature.group featureProvider
Spring IDE Core (required)  2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.feature.feature.group   Spring IDE Developers
Spring IDE Integration, Flex and Web Services Extension (optional)  2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.integration.feature.feature.group   featureProvider
Spring IDE OSGi Extension (optional)    2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.osgi.feature.feature.group  Spring IDE Developers
Spring IDE Security Extension (optional)    2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.security.feature.feature.group  featureProvider
Spring IDE Web Flow Extension (optional)    2.9.2.201205070117-RELEASE  org.springframework.ide.eclipse.webflow.feature.feature.group   Spring IDE Developers
Subversive SVN Connectors   2.3.0.I20120520-1700    org.polarion.eclipse.team.svn.connector.feature.group   Polarion Software
Subversive SVN Integration for the Mylyn Project (Optional) (Incubation)    0.7.9.I20110602-1700    org.eclipse.team.svn.mylyn.feature.group    Eclipse.org
Subversive SVN JDT Ignore Extensions (Optional) (Incubation)    0.7.9.I20111119-1700    org.eclipse.team.svn.resource.ignore.rules.jdt.feature.group    Eclipse.org
Subversive SVN Team Provider (Incubation)   0.7.9.I20120520-1700    org.eclipse.team.svn.feature.group  Eclipse.org
Subversive SVN Team Provider Localization (Optional) (Incubation)   0.7.9.I20120316-1700    org.eclipse.team.svn.nl1.feature.group  Eclipse.org
Subversive SVN Team Provider Sources (Incubation)   0.7.9.I20120520-1700    org.eclipse.team.svn.source.feature.group   Eclipse.org
SVNKit 1.3.7 Implementation (Optional)  2.3.0.I20120413-1700    org.polarion.eclipse.team.svn.connector.svnkit16.feature.group  Polarion Software
SVNKit 1.7.4 Implementation (Optional)  2.3.0.I20120520-1700    org.polarion.eclipse.team.svn.connector.svnkit17.feature.group  Polarion Software
Web Development Tools   1.0.0.v20120530_1235    com.ibm.wdt.webtools.top.feature.feature.group  IBM
WebSphere® Application Server V8.0 Tools    1.0.100.v20120530_1235  com.ibm.websphere.wdt.st.v8.feature.group   IBM 
```

# python - 如何在 vimscript 中显示自动完成菜单？

> ID：11358483
> 
> 赞同：4
> 
> 时间：2012-07-06T08:21:15.127
> 
> 标签：python, autocomplete, vim

我是 vimscript 的初学者，即使我在网上搜索了几个小时，我也无法找到如何执行以下操作：

我想创建一个 vimscript，它允许通过输入一些字母来打开文件：

**假设**

*   我只在当前工作目录中搜索
*   我有一个 python 脚本，它可以递归地查看文件夹并将具有给定字母的文件存储在数组中

**我想要的是**

`<leader><leader>p`调用一个函数来做必要的事情（我现在不知道到底是什么......）

此功能将要求用户输入所需的字母。当他输入字母时，一个菜单会显示可用的结果（因此，这个菜单需要自动刷新）。

我希望用户可以结束键入并通过突出显示它来移动到所需的文件。

举个例子 ：

![自动补全示例](../Images/56828ba447eb6672d72ad3dc1fd4f113.png)

**我目前拥有的**

```
if !has('python')
    echo "Error: Sublime Search require vim compiled with +python"
    finish
endif

let s:current_file=expand("<sfile>:r")
let s:script_path = s:current_file . '.py'
exec 'pyfile ' . s:script_path

function SublimeSearchTrigger()

    python lookFor()

endfun

if !exists('g:sublimesearch_keys')
    let g:sublimesearch_keys = 1
endif

if g:sublimesearch_keys
    inoremap <leader><leader>p :call SublimeSearchTrigger()<cr>
    nnoremap <leader><leader>p :call SublimeSearchTrigger()<cr>
endif 
```

和python文件

```
# -*- encoding: utf-8 -*-

import vim
import sys

def lookFor():

    # Ask user to type something to find
    vim.command("let user_input = input('Sublime search : ')")
    vim.command("call inputrestore()")

    # Visual return of what we typed
    vim.current.buffer.append( vim.eval( 'user_input' ) ) 
```

**如何开始？**

正如你所看到的，我不确定如何开始，但我真的很有动力（我正在计划更复杂的功能，但将使用 python 实现）。

有人可以帮我开始吗？

谢谢，

达米安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:19:11.973

您在屏幕截图中显示的是命令行的通配菜单。您可以将自定义完成添加到您自己的命令中，请参阅`:help :command-completion-custom`. 不幸的是，您无法更改内置命令的完成行为`:edit`（但您可以定义自己的包装器命令`:Edit`并使用您的完整功能）。

第二种机制是插入模式完成（`:help ins-completion-menu`）。这用于自动完成、片段、输入缓冲区的任何文本。除非您想将文件名插入缓冲区（例如，为了完成`import`语句），否则这不适合您。

许多插件实现了自己的完成机制，因为这提供了最多的控制。他们创建了一个新的拆分暂存缓冲区，并将其用于显示匹配项，通常与插入模式完成菜单结合使用（但不是用于插入所选文本，而是对其进行操作）。看看[FuzzyFinder 插件](http://www.vim.org/scripts/script.php?script_id=1984)，它很好地利用了这一点，甚至允许插入自定义数据提供程序（这可能是你的 Python 脚本！）

# php - 将 PHP 文件添加到 wordpress - Header() 已发送

> ID：11358484
> 
> 赞同：0
> 
> 时间：2012-07-06T08:21:25.770
> 
> 标签：php, wordpress, gd

几天前，我正在寻找在 wordpress 网站上使用我的自定义 php 的方法，我在这里找到了答案：[How to add a php page to Wordpress](https://stackoverflow.com/questions/2810124/how-to-add-a-php-page-to-wordpress)。
尝试了几个示例，并且对每个示例都有效。但后来我想更进一步，在这样添加的 wordpress 页面中使用 PHP 图像处理。它**适用于普通的 php 站点（仅使用此代码），但是当我尝试在 worpress 中使用它时**出现错误：

```
Warning: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\wordpress\wp-content\themes\twentyeleven\header.php:13) in C:\xampp\htdocs\wordpress\wp-content\themes\twentyeleven\mynewsite.php on line 26 
```

我正在尝试使用的代码是：

```
<?php
$dest = imagecreatefrompng('image1.png');
$src = imagecreatefromjpeg('image2.jpg');

imagealphablending($dest, false);
imagesavealpha($dest, true);
imagecopymerge($dest, $src, 10, 9, 0, 0, 181, 180, 100); //putting one image on top of other

header('Content-Type: image/png');
imagepng($dest);
imagedestroy($dest);
imagedestroy($src);
?> 
```

好吧，我知道问题是我想在这里发送标头，但我不知道如何解决它。
我尝试将此标题移动到文件顶部，但随后整个 wopress 站点不加载。

```
header('Content-Type: image/png');
get_header(); //<-- part of wordpress template, cant get rid of it, cuz it ruins whole site look. 
```

所以看起来像 get_header(); 在这里不知何故是“问题”。
尝试使用 ob_start()、flush、clean 等，但随后我得到了我想要的图像，而无需加载 worpress 站点。我用完了所有选项，但这些都没有解决我的问题。

我的问题是：如何发送此标头以使其正常工作，因为没有它我会看到一些奇怪的符号而不是 png 图像（就像我会用记事本打开 png 图像）

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:28:07.193

当我在关闭 php 标记“？>”之后有一个空格/换行符时遇到了这个问题，我从所有文件中删除了它，它对我有用。很奇怪，但它奏效了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:33:59.063

好的，找到了解决方案。发布答案，因为它可能在未来对其他人有用。

所以我会用简单的词，这让我明白了这一点。
`header('Content-Type: image/png');`使整个网站被“视为图像”。因此，当我什至找到将标题放入 WordPress 文件的位置时，它仍然没有显示任何结果。要解决这个问题，只需创建另一个名为的文件`image.php`并将 PHP GD 代码放在那里。

```
$dest = imagecreatefrompng('image1.png');
$src = imagecreatefromjpeg('image2.jpg');
imagealphablending($dest, false);
imagesavealpha($dest, true);
imagecopymerge($dest, $src, 10, 9, 0, 0, 181, 180, 100); //putting one image on top of other
header('Content-Type: image/png');
imagepng($dest);
imagedestroy($dest);
imagedestroy($src); 
```

当然，在`<?php ?>`标签和 WordPress 页面中，您想要显示它的地方使用`<img src = "image.php">`. 这将消除标题的所有错误，并且还将显示此 PHP 代码已创建的图像。

# function - Postgres 存储函数未使用 c3p0 插入

> ID：11358485
> 
> 赞同：0
> 
> 时间：2012-07-06T08:21:28.023
> 
> 标签：function, postgresql, insert, c3p0

基本上，我使用 AbstractModel 类中定义的这些方法连接和断开数据库：

```
 // close connection
    public void closeConnection(){
        try{
//          if (!rs.isClosed()){
//              rs.close();
//          }
            cstmt.close();
            SingletonConnection.instance();
            DatabaseConnection.closeConnection();
        } catch (SQLException e){
            System.out.println("SQL Exception: ");
            e.printStackTrace();
        }

    }

    // establish connection
    public void createConnection(){
        try {
            SingletonConnection.instance();
            myConnection = DatabaseConnection.establishConnection();
        } catch (SQLException e){
            e.printStackTrace();
        }
    } 
```

在尝试关闭 ResultSet rs 时，我遇到了 NullPointerException 的另一个问题，但是 c3p0 文档说，当连接终止时，ResultSets 默认关闭。

这两个方法当然是调用 DatabaseConnection 类中的这两个方法：

```
// create connection
public static Connection establishConnection() throws SQLException {
    return datasource.getConnection();
}

// close connection
public static void closeConnection() throws SQLException{
    DataSources.destroy(datasource);
} 
```

所以我基本上使用 getConnection() 和 destroy() 方法来打开和关闭数据源上的连接。这是处理 c3p0 连接池时的正确方法吗？它现在似乎工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:43:20.707

TL; DR 但有一件事抓住了我：

> 注意：我已经评论了我们的一些池设置/参数，因为应用程序很快就失去了连接，原因我不知道。

原因可能是连接没有正确返回到池中。而且由于我在您的代码中找不到对 a 的任何引用，`Connection.commit`我认为您的事务仍然是开放的并且从未提交过。应用程序终止后，PostgreSQL 将回滚任何这些连接，并且您的 INSERT 将消失。

所以：

*   仔细检查，TXN 确实已提交。
*   仔细检查，连接是否正确返回到池中。

*如果这没有帮助：大幅*削减和清理您的代码。这有两个目的：第一：这样做时，*您*可能会自己检测代码中的错误。第二：如果你有一个[SSCCE](http://sscce.org/)的例子，你可以发布*这个*，有人可能会试图在一瞬间理解它。您当前的代码无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:05:32.420

我让它工作，但不完全确定它是如何或为什么这样做的。这行代码似乎是问题所在：

```
myConnection.setAutoCommit(false); 
```

它来自模型中的方法。在应该修改表中数据的方法上注释掉这一行似乎已经成功了。问题是，一些插入数据的方法似乎可以正常工作，而其他方法则不能。我不确定为什么。

除了文档之外，是否有一个简单的示例以简单的方式解释 c3p0 的实现？我一直在寻找一个，但没有找到任何东西。

一旦进一步调查此事，我会及时通知您。

# hash - 散列整数元组的快速方法

> ID：11358487
> 
> 赞同：4
> 
> 时间：2012-07-06T08:21:30.540
> 
> 标签：hash

我需要将整数元组（顺序很重要）散列为碰撞概率低的整数。我正在使用将整数转换为字符串，与'，'连接并获取字符串哈希的方法，但它太慢了。

有没有办法从整数元组中获得快速哈希？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:25:14.300

这是 Java 的[Arrays.hashCode(int[])](http://www.docjar.com/html/api/java/util/Arrays.java.html)的作用：

```
 2938       public static int hashCode(int a[]) {
 2939           if (a == null)
 2940               return 0;
 2941   
 2942           int result = 1;
 2943           for (int element : a)
 2944               result = 31 * result + element;
 2945   
 2946           return result;
 2947       } 
```

此计算在 List 界面中指定。我不知道它对你来说是否足够抗碰撞，但这似乎是一个不错的起点。它确实考虑了顺序（即相同数字的不同顺序将产生不同的哈希值）。

# javascript - 如何在 JavaScript 中读取测试输入文件？

> ID：11358492
> 
> 赞同：2
> 
> 时间：2012-07-06T08:21:38.240
> 
> 标签：javascript, file, unit-testing, io

假设我想`QUnit`在浏览器中测试一个处理字符串的 javascript 函数。现在我想从文件中读取输入字符串。

我想我不能使用`node.js`模块来访问文件系统。我正在考虑从 javascript 调用浏览器以通过 URL (file:/home/...) 读取文件

是否有意义？你建议怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:25:34.120

您可能想查看[File](https://developer.mozilla.org/en/DOM/File)和[FileReader](https://developer.mozilla.org/en/DOM/FileReader) API。它们允许访问本地存储的文件。

您还可以考虑使用 JSONP 从远程主机检索您的测试数据。无论何时您想运行测试，您都需要对该主机进行网络访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:30:03.513

[由于浏览器的同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，“file:/home/”仅在您在浏览器中打开本地 html 文件时才有效。

如果要遵循标准，则必须在包含要测试的 js 函数的 html 所在的同一台服务器上托管此类文件，并通过 ajax 请求加载它。它将在您的 JS 上下文中作为纯字符串提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:28:26.283

在我看来，您有两种选择：

1.  使用纯 Ajax 读取文件 url 的内容（顺便说一句，我以前从未尝试过）
2.  使用网络服务器运行一种支持读取文件内容并将其作为 http 响应发送的语言。使用 Ajax 检索并存储该响应。

# php - php中的会话对我来说还不够清楚

> ID：11358493
> 
> 赞同：0
> 
> 时间：2012-07-06T08:21:38.250
> 
> 标签：php, session

我发现 php 中的会话有点令人困惑，你们中的任何人都可以向我解释一下。我有一个在我的情况下不起作用的示例：我以这种方式注册会话，你能告诉我这是注册会话的正确方式吗

```
 //this is the page from where i register myusername in sessions
if($count==1){
    session_start();
    $_SESSION['myusername'] = $_POST['myusername']; 
    include("enterpincover.php");
}
else {
    echo "Wrong Pin";
} 
```

在这里我首先检查用户名是否在会话中注册以便打开他的帐户，否则再次打开登录。

它可以工作，如果用户未登录，它将显示正确的登录页面，如果用户已登录，它会显示欢迎消息，但不会显示我想要的欢迎用户名。例如：欢迎大卫

```
<?php
session_start();
if(isset($_SESSION['myusername']))
{
    echo 'Welcome '.$_SESSION['myusername']; 
}
else
{
    include("leftmodules.php");
    include("rightmodules.php");
    include("login.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:29:30.897

使用[`$_POST`](http://ie2.php.net/manual/en/reserved.variables.post.php)or注册会话时[`$_GET`](http://ie2.php.net/manual/en/reserved.variables.get.php)，您应该检查这些变量是否存在。

**示例**：

```
if(isset($_POST['myusername'])) $_SESSION['myusername'] = $_POST['myusername'];
else die("Undefined \"myusername\""); 
```

如果您打算在 MySQL 查询中使用 session 中的变量，则应在放入 session（或 cookie，或任何其他变量）之前对其进行转义。使用[`mysql_real_escape_string()`](http://ie2.php.net/manual/en/function.mysql-real-escape-string.php).

**示例**：

```
$_SESSION['myusername'] = mysql_real_escape_string($_POST['myusername']); 
```

此外，请**始终**将您放在`session_start()`脚本的顶部，在所有其他输出或您的脚本不起作用之前（您会收到`headers already sent`警告）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:29:42.970

session_start() 应该在使用会话的页面的最顶部 - 就在`<?php` 设置会话正确并检查之后。但我想你没有进入 if 部分，因为 $count 是 0 （你告诉它用于检查用户名是否在会话中注册。如果它进入 if，你可以尝试简单地提醒一些东西。

> 回声'警报（“测试”）；'；

我想你只需要 session_start() 在文档的顶部。

# zend-framework - Zend WebService SOAP，从模型中获取数据引发异常

> ID：11358495
> 
> 赞同：0
> 
> 时间：2012-07-06T08:21:41.540
> 
> 标签：zend-framework, zend-soap

我已经使用 ZF 实现了一个网络服务（教程：[http](http://benjaminprevot.fr/2010/06/16/produire-un-webservice-soap-avec-zend-framework/) ://benjaminprevot.fr/2010/06/16/produire-un-webservice-soap-avec-zend-framework/ [法语]）

原始教程工作正常，
但我不知道为什么当我在服务器端调用 getDetections() 时，框架会引发异常。

# 代码：

### 1.1。服务器端

```
class WsController extends BaseController 
{
    public function detectionsAction()
    {
        if (is_null($this->getRequest()->getParam('wsdl'))) {
                // Traitement de la requête
                $server = new Zend_Soap_Server('http://localhost/my_app_site/public/ws/detections/?wsdl');
                $server->setClass('Application_Model_WsDetection');
                $server->handle();
        } else {
                // Retour de la WSDL
                $wsdl = new Zend_Soap_AutoDiscover();
                $wsdl->setClass('Application_Model_WsDetection');
                $wsdl->handle();
        }
        exit;
    }
} 
```

### 1.2\. Application_Model_WsDetection

```
class Application_Model_WsDetection 
{
    /**
    * Retourne la liste des détections enregistrées.
    *
    * @return integer 
    */
    public function getDetections()
    {
        // **the folowing two lines raise an error**
        $detectionsModel = new Application_Model_Detection; //*
        $detectionsModel->fetchAll(); //*
        return 2 ; // just for test
    }
} 
```

### 2.客户端

```
class WsClientController extends BaseController 
{
    public function detectionsAction()
    {
        $client = new Zend_Soap_Client('http://localhost/my_app_site/public/ws/detections/?wsdl');
        $result = $client->getDetections(); // **This is the line 28**
        Zend_Debug::dump($result);
    }
} 
```

### 3.调用网络服务：

```
http://localhost/my_app_site/public/wsclient/detections/?wsdl 
```

### 4.错误：

```
Fatal error: 
Uncaught SoapFault exception: [Receiver] Unknown error in C:\xampp\ZendFramework\library\Zend\Soap\Client.php:1121 

Stack trace: 
#0 C:\xampp\ZendFramework\library\Zend\Soap\Client.php(1121): SoapClient->__soapCall('getDetections', Array, NULL, NULL, Array) 
#1 C:\xampp\htdocs\my_app_site\application\controllers\WsClientController.php(28): Zend_Soap_Client->__call('getDetections', Array) 
#2 C:\xampp\htdocs\my_app_site\application\controllers\WsClientController.php(28): Zend_Soap_Client->getDetections() 
#3 C:\xampp\ZendFramework\library\Zend\Controller\Action.php(513): WsClientController->detectionsAction() 
#4 C:\xampp\ZendFramework\library\Zend\Controller\Dispatcher\Standard.php(295): Zend_Controller_Action->dispatch('detectionsActio...') 
#5 C:\xampp\ZendFramework\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) 
#6 C:\xampp\ZendFramework\library\Zend\Appl in C:\xampp\ZendFramework\library\Zend\Soap\Client.php on line 1121 
```

我希望我已经很好地解释了我的问题，
非常感谢。
（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:06:26.257

你能`Application_Model_Detection`在 之外的任何地方实例化一个对象`getDetections()`吗？如果是，那么问题可能是 Zend 的自动加载器在核心方法中
无法正常工作。`SoapClient::__soapCall()`（或者在`call_user_func()`那个发生的那个范围内。）你可以通过添加一个来修复它

```
require_once("{full path to Application_Model_Detection file}"); 
```

无论如何，我怀疑这是一个自动加载器命名空间问题。您的“Application_”前缀对 Zend 具有特殊意义，因此请确保该类能够被实例化。

# c# - 如何在 C# 中更改 MessageBox 的大小？

> ID：11358509
> 
> 赞同：5
> 
> 时间：2012-07-06T08:22:48.333
> 
> 标签：c#, messagebox

> **可能重复：**
> [C# 格式化 MessageBox](https://stackoverflow.com/questions/5421084/c-sharp-formatting-a-messagebox)

如何在 c# 中更改 windows 默认 MessageBox 的大小。有代码吗？我不想制作我的个性化对话框？那么有没有办法改变windows默认的消息框大小呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:24:09.797

根据需要创建自定义表单并设置属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:28:52.330

没有代码，因为这是不可能的。例如，要创建自己的消息框，您可以查看[此链接](http://www.codeproject.com/Articles/9656/Dissecting-the-MessageBox)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:25:54.840

您应该尝试制作一个包含您的设计/属性的自定义类。

您可以在自定义消息框类中创建一个函数，该函数将调用您的“更大的消息框”并设置文本

`CustomBox.Show("sdhsfs")`

[这](http://tutplusplus.blogspot.com/2010/07/c-tutorial-create-your-own-custom.html)可能对类有帮助（您必须在构造函数中添加一个大小标记）

此外，本教程使用静态方法，而是创建一个实例。这将允许多个消息框，都具有不同的文本。

# django - 模板不存在错误

> ID：11358510
> 
> 赞同：0
> 
> 时间：2012-07-06T08:22:59.263
> 
> 标签：django, django-templates

我是 Django 的新手。我想显示除了管理员登录之外没有任何动态内容的主页。我尝试为此使用 direct_to_template 通用视图，但在打开 url 时出现错误，提示模板不存在。

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.conf.urls.defaults import *
from django.contrib import admin
from django.views.generic.simple import direct_to_template
admin.autodiscover()

  urlpatterns = patterns('',
  url(r'^$', direct_to_template, {'template': 'homepage.html'}),

  url(r'^STUDENT_REGISTERATION/', include('STUDENT_REGISTERATION.urls')),

  url(r'^admin/', include(admin.site.urls)),
  )` 
```

模板目录位于/django-1.4/Project/templates。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:39:37.080

正如地狱之门所说，如果你想把模板放到你的应用程序的根目录下（应该是项目），你需要设置 TEMPLATE_DIRS。我通常使用类似的东西：

```
import os
TEMPLATE_DIRS = (
    os.path.join(os.path.dirname(__file__), '..','templates'), # django 1.4
    os.path.join(os.path.dirname(__file__), 'templates'), # django 1.3
) 
```

或者您可以通过在任何已安装的应用程序中创建模板目录来放置模板文件（使用 django.template.loaders.app_directories.Loader）

# ruby-on-rails - 在 Rails 中需要 gem

> ID：11358511
> 
> 赞同：0
> 
> 时间：2012-07-06T08:23:03.937
> 
> 标签：ruby-on-rails, ruby

我在 Rails 中遇到 Geocoder 的问题：特别是如果我使用 Geocoder 方法，即 geocoded_by 或类似方法，我会收到 NoMethodError。

我已将 gem 包含在我的 gemfile 中（即，一行读取 'gem "geocoder"'）。我也安装了捆绑包。

任何意见，将不胜感激。我对 Ruby 和 Rails 比较陌生。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:29:18.290

你跑了`bundle install`吗？它将所有 gem 安装在 Gemfile 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:32:13.943

将以下行添加到 Gemfile 并运行捆绑安装

```
gem "geocoder" 
```

你可以参考[Railscast-#273](http://railscasts.com/episodes/273-geocoder?view=asciicast)，你会有一个清晰的思路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:41:38.783

尝试添加`require 'geocoder'`到使用它的 ruby​​ 文件的顶部。

# javascript - 在道场日历中显示选定的年份

> ID：11358514
> 
> 赞同：0
> 
> 时间：2012-07-06T08:23:07.093
> 
> 标签：javascript, jsp, dojo

我正在使用以下代码来创建和仅显示当年的日历......现在我只想显示从当年到下一个 18 年的年份......我无法做到这一点，请给我一些逻辑来做到这一点

```
<!DOCTYPE html>
<html >
<head>

    <link rel="stylesheet" href="dojo/dojoroot/dijit/themes/claro/claro.css">
    <style type="text/css">.undefined table.dijitCalendarContainer {
  margin: 25px auto;
  width: 200px;
}</style>
<script src='dojo/dojoroot/dojo/dojo.js' data-dojo-config='parseOnLoad: true'></script><script>require([
    "dojo/ready",
    "dijit/dijit", // loads the optimized dijit layer
    "dijit/Calendar",
    "dojo/date"
], function(ready, dijit, Calendar, date){
    ready(function(){
        new Calendar({
        value: new Date(),
        isDisabledDate: function(d){

       // var d = new Date(d); d.setYear(2012);
            var d = new Date(d); d.setHours(0, 0, 0, 0);
            var today = new Date(); today.setYear(2012);
            return Math.abs(date.difference(d, today, "year"));
        }
        }, "mycal");
    });
});</script>
</head>
<body class="claro">
    <div id="mycal"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:19:08.340

dijit.Calender.isDisabledDate 应该返回布尔值。

[http://dojotoolkit.org/api/1.7/dijit/Calendar](http://dojotoolkit.org/api/1.7/dijit/Calendar)

我认为您当前的代码有点复杂......更简单。

-今年

```
isDisabledDate : function(d) {
  return d.getYear() != new Date().getYear(); //current year
} 
```

- 本年度至未来 18 年

```
isDisabledDate : function(d) {
  return d.getYear() > (parseInt(new Date().getYear(), '10') + 18) || d.getYear() < new Date().getYear(); // current year to next 18 years
} 
```

# python - 芹菜的金字塔周期性任务

> ID：11358519
> 
> 赞同：1
> 
> 时间：2012-07-06T08:23:16.443
> 
> 标签：python, celery, pyramid

我正在尝试使用 pyramid_celery。我设法运行简单的任务。但是如何使用金字塔运行周期性任务呢？我需要在哪里写 CELERYBEAT_SCHEDULE？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:10:53.937

将 Pyramid 与 Celery 一起使用不需要使用 pyramid_celery 模块 - 后者只是一个薄集成层，它可能会使您的生活更轻松，也可能不会。在你的情况下，它看起来并没有让你的生活更轻松，对吧？

Pyramid 和 Celery 都有出色且非常详细的文档。`pyramid_celery`没有详细的文档。从我阅读的代码来看，它看起来像是从粘贴 .ini 文件中读取 celery 配置（如果是 pyramid_celery_demo 应用程序，则为 development.ini） - 我不知道如何将嵌套的 dict 粘贴到 .ini 文件中，但一些提交消息表明它[应该可以工作](https://github.com/sontek/pyramid_celery/commit/4aabd879356b8ca2dd204092dd3bd48c4d791640)。

简而言之，您的选择是：

*   阅读代码`pyramid_celery`并弄清楚它应该如何工作

*   写信给包的作者

*   放下包并使用普通的 Pyramid 和普通的 Celery，享受漂亮而清晰的文档。

进一步阅读代码表明他们从.ini文件中读取'eval（）'字符串值以将它们转换为python结构，所以我假设放置类似的东西

```
CELERYBEAT_SCHEDULE = "{'key': 'value', 'another_key': 'another_value'}" 
```

应该做的伎俩...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T07:18:51.283

您需要将以下部分添加到项目的 development.ini 文件中

```
[celerybeat:task1]
task = app1.tasks.Task1
type = crontab
schedule = {"minute": 0} 
```

schedule 是您需要以 cron 样式编写的格式。Task1 是要执行的任务。希望你明白了。有关更多详细信息，请访问此链接。[https://pypi.python.org/pypi/pyramid_celery/](https://pypi.python.org/pypi/pyramid_celery/)

# c# - 剥离 Word Html 标签

> ID：11358522
> 
> 赞同：0
> 
> 时间：2012-07-06T08:23:28.573
> 
> 标签：c#, asp.net, regex

我需要在特定位置去除 Word HTML 标签。目前我正在这样做：

```
public string CleanWordStyle(string html)
{
    StringCollection sc = new StringCollection();
    sc.Add(@"<table\b[^>]*>(.*?)</table>");
    sc.Add(@"(<o:|</o:)[^>]+>");
    sc.Add(@"(<v:|</v:)[^>]+>");
    sc.Add(@"(<st1:|</st1:)[^>]+>");
    sc.Add(@"(mso-bidi-|mso-fareast|mso-spacerun:|mso-list: ign|mso-ascii|mso-hansi|mso-ansi|mso-element|mso-special|mso-highlight|mso-border|mso-yfti|mso-padding|mso-background|mso-tab|mso-width|mso-height|mso-pagination|mso-theme|mso-outline)[^;]+;");
    sc.Add(@"(font-size|font-family):[^;]+;");
    sc.Add(@"font:[^;]+;");
    sc.Add(@"line-height:[^;]+;");
    sc.Add(@"class=""mso[^""]+""");
    sc.Add(@"times new roman&quot;,&quot;serif&quot;;");
    sc.Add(@"verdana&quot;,&quot;sans-serif&quot;;");
    sc.Add(@"<p> </p>");
    sc.Add(@"<p>&nbsp;</p>");
    foreach (string s in sc)
    {
        html = Regex.Replace(html, s, "", RegexOptions.IgnoreCase);
    }
    html = Regex.Replace(html, @"&nbsp;", @"&#160;"); //can not be read by as XmlDocument if not!
    return html;
} 
```

现在我正在剥离带有 的`<p>`标签的整个 HTML `sc.Add(@"<p> </p>");`，但我想要的是：如果我点击表格标签，它应该停止替换，直到它点击表格结束标签。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:35:55.503

正则表达式可以用于一行或非常简单的 html 结构。

[如果您真的想用最少的代码完成工作，请从http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)获取 HTMLAgilityPack，并从所有标签的内部值中获取所有文本。

这将很简单：

```
public string CleanWordStyle(string htmlPage)
{
  HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
  doc.LoadHtml(htmlPage);

  return doc.DocumentNode.InnerText;
} 
```

# c# - 如何比“foreach”循环更快地比较 DictionaryEntry 值

> ID：11358526
> 
> 赞同：0
> 
> 时间：2012-07-06T08:23:38.880
> 
> 标签：c#

目前我用它来搜索一个新字符串并与字典集合进行比较

```
foreach (DictionaryEntry value in hd)              
{ 
    if (value == newWordIn)
    {
        // assign existing word
    } 
    else 
    {
        // assign new word into collection
    }
} 
```

hd 包含如此多的密钥并使循环很长。我能做些什么来使其快速检查并且不要等待这么长时间来收集检查字典？

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:27:26.703

从根本上说，不 - 如果您尝试**按值**查找字典条目，那么它将始终是 O(N) 操作。相反，如果你想要这种行为，你应该建立一个`HashSet<T>`值。

（请注意，这些天你真的不应该首先使用非泛型集合，除非你*真的*必须这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:15:11.067

您是否还可以包含代码以显示您正在使用的类型`hd`并使`newWordIn`示例更清晰？

假设在您的示例`newWordIn`中是一种`string`类型，那么当您将其与`DictionaryEntry`类型进行比较时，该代码将不会编译。

正如 Jon Skeet 已经指出的那样，您可能需要的是`HashSet<string>`

看起来（从您的代码注释中）您正在尝试做的是确保您的集合不包含重复的条目。然后你的代码应该是：

```
HashSet<string> hd = new HashSet<string>();

...

// Only add distinct entries
if (!hd.Contains(newWordIn))
{
    hd.Add(newWordIn);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:38:17.690

您可以引入附加字典，其中键是原始字典中的值，值是原始字典中这些值的计数。如果原始字典中的值是唯一的（因此计数始终为 1），那么您可以使用`HashSet`而不是`Dictionary`.

您需要确保两个结构始终保持同步。

# apache - 在 apache 中检查移动设备并重定向到移动网站

> ID：11358530
> 
> 赞同：0
> 
> 时间：2012-07-06T08:24:02.163
> 
> 标签：apache, .htaccess, mobile

我想检查用户是使用移动设备还是常规系统，并使用 apache 将他重定向到移动站点或普通站点。这可能吗？

我试过像这样的代码

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RewriteRule ^$ http://m.example.com/ [L,R=302]
</IfModule> 
```

在 .htacess 中，它没有任何效果。它是否正确 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:52:02.673

最简单的方法是使用 Apache Mobile 过滤器。

[http://www.apachemobilefilter.org/setuponline/](http://www.apachemobilefilter.org/setuponline/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:52:32.430

首先，你如何测试这个？

其次，尝试以下 RewriteRule 而不是您正在使用的。

```
RewriteRule ^.*$ http://m.example.com/ [L,R=302] 
```

最后，作为一个额外的建议，我还会考虑以下几点：

*   使用 Apache 移动过滤器而不是正则表达式。它更准确并提供更大范围的功能
*   您应该允许用户选择他们想要的表示/体验。因此，如果您向他们展示移动版本，那么您应该让他们选择桌面版本，因为这实际上可能是他们想要的；反之亦然。
*   这可能有很多原因，例如他们有桌面书签，有人分享了桌面版本的 url 等等。您的内容协商技术非常基础，没有考虑任何这些用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T01:36:22.960

我最近不得不为一个 Magento 网站做这个。这是我们最终使用的 .htaccess 文件。我们将商店浏览量“默认”用于桌面，将“移动”用于移动。

```
<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

###########################################
## Handle mobile device redirection
# Set cookie=true if user wants full site. (2 weeks cookie by default)
    RewriteCond %{QUERY_STRING} __store=default
    RewriteRule ^/?(.*)$ http://www.example.com/$1? [L,CO=prefer_full_site:true:.example.com:840]
# Set cookie for additional domains like this
#   RewriteRule .* -  [CO=prefer_full_site:true:.example2.com:840]

#  Set cookie=false if user wants mobile site
    RewriteCond %{QUERY_STRING} __store=mobile
    RewriteRule ^/?(.*)$ http://m.example.com/$1? [L,CO=prefer_full_site:false:.example.com:840]
# Set cookie for additional domains like this
#   RewriteRule .* -  [CO=prefer_full_site:false:.example2.com:840]

#################################################
# Redirect Mobile users to m. based on user agent
    RewriteCond %{HTTP_USER_AGENT} android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|meego.+mobile|midp|mmp|netfront|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
    RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-) [NC]
    RewriteCond %{HTTP_HOST}   !^m.example.com
    RewriteCond %{HTTP_COOKIE} !prefer_full_site=true
    RewriteRule ^/?(.*)$ http://m.example.com/$1? [R=301,L]

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

##############################################
# Set Mage store codes depending on URL:
# MAGE_RUN_TYPE: website = Website. store = Store View
# Desktop
    SetEnvIf Host www.example.com MAGE_RUN_CODE=default
    SetEnvIf Host www.example.com MAGE_RUN_TYPE=store

# Mobile
    SetEnvIf Host m.example.com MAGE_RUN_CODE=mobile
    SetEnvIf Host m.example.com MAGE_RUN_TYPE=store

</IfModule> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-26T14:59:19.283

请试试这个

```
RewriteEngine On

   RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\\ |maemo|midp|mmp|opera\\ m(ob|in)i|palm(\\ os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|symbian|treo|up\\.(browser|link)|vodafone|wap|windows\\ (ce|phone)|xda|xiino [NC,OR]
   RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\\ wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r\\ |s\\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1\\ u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp(\\ i|ip)|hs\\-c|ht(c(\\-|\\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac(\\ |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\\ |\\/)|klon|kpt\\ |kwc\\-|kyo(c|k)|le(no|xi)|lg(\\ g|\\/(k|l|u)|50|54|e\\-|e\\/|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-|\\ |o|v)|zz)|mt(50|p1|v\\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v\\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-|\\ )|webc|whit|wi(g\\ |nc|nw)|wmlb|wonu|x700|xda(\\-|2|g)|yas\\-|your|zeto|zte\\-) [NC]

   RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
   RewriteRule ^(.*)$ http://mobile.domain.com/ [L,R=302] 
```

希望对你有帮助！

# arm - 如何启用ART加速器STM32F407VGT6

> ID：11358547
> 
> 赞同：3
> 
> 时间：2012-07-06T08:25:29.540
> 
> 标签：arm

我一直在阅读有关 STM32F407VGT6 上的 ART 加速器和 168MHz 的零等待状态的信息，数据手册中简要提到了它，但我找不到任何地方如何启用它。FLASH_ACR 寄存器中有一个预取选项，但启用它会导致我的板停止工作。不确定这是否是同一件事。ART 是否需要启用或默认启用？我在该芯片的勘误表中注意到 ART 在 A 版本中无法工作，但在当前 Z rev 中已“修复”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T13:33:27.423

我在该文档中读到：STMicroelectronics：AN3430 - 如何使用 STM32F2xx 实现最低电流消耗的应用说明

在第 17 页（3.1.1）上，他们说启用缓冲区预取将消耗额外的 20mA（对于 128 位线提取）。也许在 168 MHz 时，您的电源会变得不稳定？也许您可以尝试使用较低的时钟速度（120MHz），其中 cpu 非常省电。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:56:53.313

此[链接](http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/APPLICATION_NOTE/DM00033348.pdf)具有为 stm32F2 设备配置 ART 的方法。在 STM32f4 发现系列中可以找到相同的寄存器。检查 pdf 中的单词 ART 配置。我遇到了同样的问题，这是我能找到的最佳答案...

# c# - 检查具有阈值的列表中双精度数的相等性

> ID：11358550
> 
> 赞同：4
> 
> 时间：2012-07-06T08:25:37.243
> 
> 标签：c#, math

我正在研究一种方法，该方法应该决定曲线是否具有几乎恒定的斜率。

当然也有一些`x,y`要点。到目前为止，我所做的是将`y`每个数据点除以它`x`以获得该数据点的斜率。我把这个斜坡存储在一个`List<double>`

我认为到目前为止我走在正确的轨道上（如果我不是，请告诉我！）。现在是时候决定是否处理恒定曲线了，所以我最终采用了以下方法：

```
private bool IsConstantSlope(List<double> slopes)
{            
    var max = slopes.Max();
    var min = slopes.Min();
    var diff = max - min;

    return (diff > 0.01) ? false : true;        
} 
```

所以我在这里检查斜率的最大值和最小值并将其与我认为根本不好的自定义阈值进行比较。

这种方法适用于完全恒定的斜线，但我想给它一些灵活性，我认为将最大值和最小值的差异与一个常数进行比较不是一个好习惯。

我会appriciate更多的想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T08:33:42.620

> 涉及到一些 x,y 点。到目前为止，我所做的是将每个数据点的 y 除以其 x 以获得该数据点的斜率。我将此斜坡存储在列表中

严格来说，一个**点**没有斜率，您在这里测量的是连接您的点 (x,y) 和点 (0,0) 的线的斜率。因此，如果您对一组有序的点执行此操作，那么拥有一条线的概念并不完全正确。你甚至没有连接相邻点的一组斜线。也在你的功能中

```
 return (max > 0.01) || (min < -0.01); 
```

如果你的阈值是 0.01 会更好。

如果您真正想要的是一条适合或近似点集的线，那么您首先需要对您的数据执行某种直线回归并测试这条近似线的梯度，看看它是否在您的阈值范围内。

这可能是一个有用的阅读[http://en.wikipedia.org/wiki/Simple_linear_regression](http://en.wikipedia.org/wiki/Simple_linear_regression)

或者，您可以按 x 值对点进行排序，然后计算出每对连续对之间的斜率（有效地生成折线）并将它们存储在您的列表中，*然后*使用您的斜率 camparison 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:48:03.797

我会设计一个递归算法，在整个斜坡上工作。仅考虑最小/最大斜率并不能说明整个曲线。首先，我将确定两个斜率 A 和 B 必须满足哪个要求才能确定“恒定斜率”。然后，我会考虑您列表中的第一个 (A) 和最后一个 (B) 值：这两个值是否满足要求？否：没有恒定斜率；是：将范围 (A,B) 细分为两个子范围：(A,M), (M,B) 其中 M 是列表中与 A 和 B 等距的值。然后将相同的算法应用于这两个子范围子范围。子范围的数量取决于您想要达到的精度。

# android - UPD 数据包不会到达 Samsung Galaxy Tab 7.7，但会到达 HTC Desire

> ID：11358552
> 
> 赞同：1
> 
> 时间：2012-07-06T08:26:08.250
> 
> 标签：android, sockets, udp, datagram

我正在开发一个 Android 3.1 平板电脑应用程序。

我将使用这个应用程序来监听设备发送的 UDP 数据包，该设备每 5 秒向 255.255.255.255:8001 发送 UDP 数据包。

使用桌面程序[Docklight scripting v1.9](http://www.docklight.de/)我看到这个设备每 5 秒发送一个 11 字节的数据包，因为我的应用程序没有收到每个数据包：有时它会收到一个，有时它会同时收到 5 或 6 个数据包。

**这是我的活动：**

```
public class UDPSocketActivity extends Activity
{
    private UDPServerThread myThread;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
        WifiInfo wifiInfo = wifiManager.getConnectionInfo();
        int ipAddress = wifiInfo.getIpAddress();

        TextView txt = (TextView)findViewById(R.id.deviceIP);
        txt.setText(Integer.toString(ipAddress));
    }

    public void onStartClick(View view)
    {
        Log.v("UDPSocketActivity", "onClick");

        try
        {
            myThread = new UDPServerThread("X", 8001);
            myThread.start();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

**这是 UDP 套接字线程：**

```
public class UDPServerThread extends Thread
{
    private static final int MESSAGE_SIZE = 11;
    protected DatagramSocket socket = null;
    protected boolean end = false;

    public UDPServerThread(String serverName, int port) throws IOException
    {
        super(serverName);

        Log.v("UDPServerThread", "constructor");

        socket = new DatagramSocket(port);
        socket.setBroadcast(true);
    }

    public void run()
    {
        while (!end)
        {
            try
            {
                byte[] buf = new byte[MESSAGE_SIZE];

                // Wait an incoming message.
                DatagramPacket packet = new DatagramPacket(buf, buf.length);

                Log.v("UDServerThread", "Listenning...");

                socket.receive(packet);

                Log.v("UDServerThread", "Mensaje recibido.");
            }
            catch (IOException e)
            {
                if (!socket.isClosed())
                    e.printStackTrace();
            }
        }
    }

    public void stopServer()
    {
        Log.v("UDPServerThread", "stopServer");
        if (socket != null)
            socket.close();
        end = true;
    }
} 
```

**这是 AndroidManifest.xml 权限：**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

**更新：**
如果我向平板电脑的 IP 发送 UDP 数据包，例如 UDP:192.168.1.135:8001，有时它会收到数据包。有时它会同时接收三个或四个。

但是，如果我将直接 UDP 数据包发送到**HTC Desire 2.2.2**，它会接收所有这些数据包，但我的 HTC 不会收到广播数据包。我正在使用相同的代码。

这就是我接收 UDP 广播数据包的方式（看看时间）：

```
07-06 12:08:56.580: V/UDServerThread(6449): Mensaje recibido.
07-06 12:08:59.655: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:02.410: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:03.230: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:03.435: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:03.745: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:03.945: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:04.460: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:04.770: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:04.975: V/UDServerThread(6449): Mensaje recibido.
07-06 12:09:46.855: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:06.005: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:06.310: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:06.515: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:06.825: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:07.335: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:07.640: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:07.845: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:10.415: V/UDServerThread(6449): Mensaje recibido.
07-06 12:10:17.065: V/UDServerThread(6449): Mensaje recibido. 
```

我究竟做错了什么？也许我需要一些自定义配置。

顺便说一句，我正在使用 Android 3.1 的三星 Galaxy Tab 7.7 上对其进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:35:00.627

如果您想确保您将收到所有发送的数据包，您应该使用 TCP 协议而不是 UDP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:14:32.370

要在 HTC 上接收广播，您需要获得 Wifi 多播锁定。基本上一些制造商默认禁用接收多播。仍然不知道您的平板电脑上发生了什么，可能是中间的某种缓冲或慢速网络设备？

```
WifiManager wifi;
wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
MulticastLock ml = wifi.createMulticastLock("just some tag text");
ml.acquire();

When the asynctask stops I do a 
ml.release(); 
```

[来自 Android 问题跟踪器的代码](http://code.google.com/p/android/issues/detail?id=8407)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T13:35:13.830

我的路由器有问题。

Note: I answer my own question because I think it's useful for other people with the same problem (I was dealing with it by four days).

# css - Twitter Bootstrap 响应式布局在 Firefox 中中断

> ID：11358558
> 
> 赞同：2
> 
> 时间：2012-07-06T08:26:36.973
> 
> 标签：css, layout, twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 创建一个响应式布局，但它似乎在第一页加载时在 Firefox 中中断，但过了一段时间没有刷新页面，它似乎工作正常。

我什至尝试将页面剥离为一个基本示例，但它仍然无法正常工作，这是我的代码：

```
<!DOCTYPE html>
<html>

<head>
    <title>Hello</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet">

</head>

<body>

<div class="container">

<div class="row">
    <div class="span8">
        <h3>Main content</h3>
        <p>Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
        <p>Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    </div>
    <div class="span4">
        <h4>Sidebar</h4>
        <p>Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    </div>
</div>

</div>

</body>

</html> 
```

**更新：**

**这个问题实际上只出现在我的机器上。我已经在其他三个上进行了测试，效果很好。也许我安装的 Firefox 有问题？我使用的是 Mac，OSX 10.6.8。当我尝试重新安装 Firefox 时，我会更新这个问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:12:45.340

你应该尝试这些事情：

1.  升级您正在使用的 Firefox 版本。

2.  从您的浏览器中删除 cookie。

3.  安装 firebug 和开发者工具栏来检查页面，问题可能出在`.css`. 通过删除一些属性在萤火虫中检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T02:15:47.863

我也遇到过这种情况，目前使用的是 Firefox 17.01 和 Mac OSX 10.8.2

响应式引导站点无法正常工作，跨度不会随着屏幕变窄而折叠。甚至官方的 Bootstrap 站点似乎也无法正常工作。

我认为这可能是由某些 Firefox 扩展引起的。不确定是哪一个，但如果我在同一台机器上切换到不同的用户，一个没有安装 FF 扩展的用户，问题就会消失。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:28:32.910

您需要添加：

```
<div class="container">...</div> 
```

之前

```
<div class="row"></div> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-22T10:01:14.727

我通过为问题视口宽度创建仅针对 Firefox 的特殊 CSS 媒体查询来解决此问题。

```
@-moz-document url-prefix() {
@media (min-width: 980px) and (max-width: 1199px) {
    .span1 {
      width: 129.14px;
    }
}
} 
```

**注意**我在这里使用自定义网格，每行（.row）只有 7 列（.span1's）。如果您使用的是标准的 12 列，那么宽度会有所不同，但您可以使用相同的方法来修复它。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-08-28T08:35:57.683

我在互联网的某个地方找到了解决方案......

```
table {table-layout:fixed} 
```

它使用引导程序 2 和 3 解决了 Firefox 和 IE 中的问题

# c# - 当用户选择记录时，推荐使用哪种方式来填充 Web 表单上的所有控件？

> ID：11358559
> 
> 赞同：10
> 
> 时间：2012-07-06T08:26:37.363
> 
> 标签：c#, asp.net, asp.net-4.0

我有一个显示所有员工列表的 GridView 控件。当用户从此列表中选择任何员工时，记录将显示在 Web 表单上，所有输入控件都预先填充了值。

我想知道任何好的方法来做到这一点。我应该将所有输入控件绑定到任何 SqlDataSource，还是应该通过从 DataSet 中选取值来重新填充所有输入控件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:48:56.780

首先，您将 GridView 上的选择按钮添加为：

```
<asp:ButtonField Text="Select" CommandName="ViewMe" ButtonType="Button" /> 
```

然后添加`OnRowCommand="RowCommand"`属性`GridView`以在单击按钮时调用此函数以及函数后面的代码：

```
protected void RowCommand(object sender, GridViewCommandEventArgs e)
{
    // if the ViewMe command is fired
    if (e.CommandName == "ViewMe")
    {
        // go to find the index on the grid view
        int iTheIndexNow;
        if (int.TryParse(e.CommandArgument.ToString(), out iTheIndexNow))
        {
            // Set and highlight the selected
            TheGridView.SelectedIndex = iTheIndexNow;

            // do we have the table data id ?
            if (TheGridView.SelectedValue != null)
            {
                // now load the controls data using this id
                LoadValuesFromDatabaseToControls(TheGridView.SelectedValue);
            }    
        }
    }
} 
```

我更喜欢这种命令按钮方式，因为您可以添加比选择更多的命令，或编辑，甚至删除或复制......可以出于任何原因（例如通过更改页面）完成索引更改，并且还需要再次选择。

我使用 subsonic 2 DAL 从数据库加载数据。我的程序中的示例代码是：

```
 void LoadValuesFromDatabaseToControls(string editID)
    {
        // Load it from database
        AthUserMaiListName OneRow = new AthUserMaiListName(editID);

        if (OneRow.IsNotExist)
        {
            // a custom control that show messages on top.
            uResult.addMsg("Fail to load id " + editID, MsgType.error);
            // close the view of the controls
            dbViewPanel.Visible = false;
        }
        else // else we have the data and go for show them
        {
          // show this panel that contains the controls.
          dbViewPanel.Visible = true;

          // I keep my current edit id
          lblID.Text = editID;

          // just be sure that the select exist on DrowDownList
          MyUtils.SelectDropDownList(ddlEventType, OneRow.CAddedFrom);

          txtEmail.Text = OneRow.CEmail;
          txtFirstName.Text = OneRow.CFirstName;
          txtLastName.Text = OneRow.CLastName;
          txtInsideTitle.Text = OneRow.CInsideTitle;
          txtCompanyName.Text = OneRow.CCompanyName;        

          txtCreated.Text = DateTimeRender(OneRow.CreatedOn);
          txtModified.Text = DateTimeRender(OneRow.ModifiedOn);
        }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:48:17.687

我在我的应用程序中使用了这段代码-

更好的方法是调用这个`gridview_select_index_change()`事件方法

```
 private void PickValues(int SerialNum) 
{ 
    DataSet ds = new DataSet(); 
    try 
    { 
        string Query = "SELECT * FROM tw_main WHERE sno = " + SerialNum; 
        ds = reuse.ReturnDataSet(Query, "Scheme"); 

        //Add Scheme Code to new Session Variable 
        Session.Add("SerialNumber", ds.Tables[0].Rows[0]["sno"].ToString()); 
        //Set Update Flag 
        TaskFlag = "UPDATE"; 

        //Fill values of selected record on the Entry Form 
        if (ds.Tables[0].Rows[0]["schm_code"].ToString().Length > 0) 
            lblSchemeCode.Text = ds.Tables[0].Rows[0]["schm_code"].ToString(); 

        ddlType.SelectedValue = ds.Tables[0].Rows[0]["schemetype"].ToString(); ddlDistrict.Text = ds.Tables[0].Rows[0]["dist_nm"].ToString(); ddlBlock.Text = ds.Tables[0].Rows[0]["block_nm"].ToString(); 
        txtSchemeName.Text = ds.Tables[0].Rows[0]["schm_nm"].ToString(); 
        txtPopulation2001.Text = ds.Tables[0].Rows[0]["population_2001"].ToString(); 
        txtSupplySource.Text = ds.Tables[0].Rows[0]["supply_source"].ToString(); 
        txtApprovalYear.Text = ds.Tables[0].Rows[0]["yr_approval"].ToString(); 
        txtApprovalLetterNum.Text = ds.Tables[0].Rows[0]["approval_letter_num"].ToString(); 
        txtApprovalAmount.Text = ds.Tables[0].Rows[0]["sch_apr_amt"].ToString(); 
        txtWaitedLetterNum.Text = ds.Tables[0].Rows[0]["sch_waited_details"].ToString(); 
        txtSchTransferLetterNum.Text = ds.Tables[0].Rows[0]["schm_trans_details"].ToString(); 
        txtSchTransferDate.Text = ds.Tables[0].Rows[0]["schm_trans_date"].ToString(); 
        txtOtherRemarks.Text = ds.Tables[0].Rows[0]["remarks"].ToString(); 
    } 
    catch (Exception ex) 
    { 
        ScriptManager.RegisterClientScriptBlock(this.Page, this.Page.GetType(), "Warning", "alert('" + ex.Message.ToString() + "');",true); 
    } 
    finally 
    { 
        ds.Dispose(); 
        gridSerialNo = 0; 
    } 
} 
```

**编辑**

这样做可能有更好的方法，但这肯定很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T22:46:13.790

由于您要创建数据访问层，因此我执行此任务的方式是创建一个具有所有属性的类

班级：

```
public class tw_main
{
     public string SchemeCode {get;set;}
} 
```

达尔：

```
public class dal
{
  public tw_main getSelectedValue(pass the parameters required by the method)
  {
    //your connection and query code
    var twmain = new tw_main();
    twmain.SchemaCode =  ds.Tables[0].Rows[0]["schm_code"].ToString(); 

    return twmain;
  }
} 
```

网页：

```
//depending upon where you add this a reference may need to be imported (using) to the namespace
  var dalObj = new dal();
  var tw = dalObj.getSelectedValue();
lblSchemeCode.Text = tw.SchemaCode; 
```

# django - Django 自定义 forms.clean() 方法不起作用

> ID：11358561
> 
> 赞同：0
> 
> 时间：2012-07-06T08:26:41.417
> 
> 标签：django, django-forms, error-checking

我一直在寻找答案，但我真的不知道这是怎么回事。我正在尝试制作一个接收 2 个文件的表单，并且我正在覆盖 clean() 方法以检查名称和扩展名是否正确。这就是我所拥有的：

```
def clean(self):
  cleaned_data = super(UploadForm, self).clean()
  obs_filename = cleaned_data.get('obs').name.split('.')
  nav_filename = cleaned_data.get('nav').name.split('.')
  if obs_filename[0] != nav_filename[0] or [obs_filename[1], nav_filename[1]] != ['obs', 'nav']:
     raise forms.ValidationError('Filenames do not match.')
  if os.path.isfile(PROJECT_ROOT + '/data/unprocessed/' + '.'.join(obs_filename)) and os.path.isfile(PROJECT_ROOT + '/data/unprocessed/' + '.'.join(nav_filename)):
     raise forms.ValidationError('Files already exist.')
  return cleaned_data 
```

问题是，当我使用它时，输入检查不起作用（表单提交时未选择任何文件）。当我删除此代码时，它工作正常。对自定义 clean() 函数的调用`super(UploadForm, self).clean()`与 django 文档中的调用相同。我正在使用 django 1.4。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:56:04.490

文件字段有点复杂；您必须确保在实例化文件时将文件绑定到表单。如果你使用基于类的通用视图，这应该会自动发生，所以如果你没有看到它们，那么我猜你没有。在这种情况下，请查看[https://docs.djangoproject.com/en/1.4/ref/forms/api/#binding-uploaded-files](https://docs.djangoproject.com/en/1.4/ref/forms/api/#binding-uploaded-files)。简而言之，当您实例化表单时，您必须从中获取文件`request.FILES`并将它们作为单独的参数传递给您的表单，例如`f = MyForm(request.POST, request.FILES)`.

还要确保您`enctype="multipart/form-data"`的`FORM`标签中有 HTML。

# c# - 用正则表达式替换 td 标签

> ID：11358563
> 
> 赞同：0
> 
> 时间：2012-07-06T08:27:05.487
> 
> 标签：c#, html, regex, xml-parsing

如何用定义的字符串替换 html 字符串变量中的某个部分？

```
var htmlvar = "<td style=\"border-width: 0px;\" align=\"left\" id=\"tdPassword\">@Model.Password</td>" 
```

结果看起来像这样：

```
var htmlvar = "<td style=\"border-width: 0px;\" align=\"left\" id=\"tdPassword\">*******</td>" 
```

我正在使用 c# .net 3.5，我想使用正则表达式解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:11:44.063

利用

```
(?<start>\<td[^\>]*\>)[^\<]*(?<end></td>) 
```

匹配，并且

```
$1****$2 
```

更换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:18:07.137

我使用此评论内容来解决它：使用 html 敏捷包：htmlagilitypack.codeplex.com – David Brabant 3 小时前谢谢

# php - 高级自定义字段不打印类别字段

> ID：11358564
> 
> 赞同：2
> 
> 时间：2012-07-06T08:27:07.303
> 
> 标签：php, wordpress

我正在尝试为某个类别打印自定义字段，但没有成功。

这是我的代码：

```
 $args = array(
    'taxonomy'  => 'gb_category',
    'orderby'   => 'name',                                      
    'style'     => 'list',
    'hide_empty' => 0,
 ); 

$categories = get_categories($args);
$i = 1;
foreach ($categories as $cat) {

    the_field('category_custom_field');

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T08:45:11.337

解决了。

如果您需要为类别自定义归档，则使用以下代码调用：

```
<?php the_field('starting_from', 'category_'.$cat->cat_ID); ?> 
```

如果您有自定义类别类型，那么您可以使用以下代码调用：

```
<?php the_field('starting_from', 'category_type_'.$cat->cat_ID); ?> 
```

# java - @ElementCollection 用于映射对象类列表

> ID：11358567
> 
> 赞同：3
> 
> 时间：2012-07-06T08:27:21.630
> 
> 标签：java, hibernate

嗨，，

我使用@ElementCollection 映射对象类列表，但我遇到了消息问题：

```
java.lang.ExceptionInInitializerError
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean     with name 'ObjWellSvc': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.prosia.wmls.service.repo.ObjWellRepo com.prosia.wmls.service.impl.ObjWellSvcImpl.objWellRepo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ObjWellRepo': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: protected org.hibernate.SessionFactory com.prosia.wmls.service.repo.impl.BaseImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in URL [file:/D:/NetBeansProjects/WITSML%20(Energistic)/WitsServer/src/java/cfg/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: collection element mapping has wrong number of columns: com.prosia.witsml.dataobject.CsCustomData.any type: object
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:286)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at com.prosia.wmls.service.TesterClass.<clinit>(TesterClass.java:19) 
```

这是该领域的声明：

```
@ElementCollection
@CollectionTable(name="any", joinColumns=@JoinColumn(name="customdataID"))
@Column(name="any_")
protected List<Object> any; 
```

所以任何人都可以帮助我......解决这个问题......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:40:50.993

您尝试持久化 java.lang.Object 的任意实例。根据 JPA 2.0，支持以下类型：

> 实体的持久字段或属性可以是以下类型： Java 原始类型；java.lang.String; 其他 Java 可序列化类型（包括原始类型的包装器、java.math.BigInteger、java.math.BigDecimal、java.util.Date、java.util.Calendar[5]、java.sql.Date、java.sql.Time , java.sql.Timestamp, byte[], Byte[], char[], Character[]，以及实现Serializable接口的用户定义类型）；枚举；实体类型；实体类型的集合；可嵌入类（参见第 2.5 节）；基本类型和可嵌入类型的集合（参见第 2.6 节）。

# javascript - ui上的状态持久化

> ID：11358568
> 
> 赞同：1
> 
> 时间：2012-07-06T08:27:24.853
> 
> 标签：javascript, jquery, html, jsp

在这里，我发布我的问题陈述。

用户从下拉列表中选择选项。所选值出现在页面上。但是，当用户刷新页面时，所选值将从页面中消失。

我需要该值应该是我在刷新页面之前选择的值。这可能使用 js/jquery 吗？

请指导我如何实现这一目标！

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:36:59.917

你有几个解决方案来做到这一点。

1.  每次用户选择一个选项时，都会向带有所选选项的服务器发送一个 http 请求。当用户刷新页面时，jsp会使用收集到的信息来预选选项。一个常见`$.get`的 jQuery 将在客户端完成技巧。
2.  使用所选选项设置 cookie。当页面刷新时，获取cookie值并使用它来预选选项。您不需要 jQuery 来执行此操作，但它可能会有所帮助。
3.  如果浏览器支持它，请使用`localStorage`而不是 cookie。这是一个仅限客户端的解决方案，因此信息不会发送到服务器。
4.  设置 URL 的哈希值以存储选项：

    `location.replace("#option=" + val);`

    您可以在使用刷新页面时检索该值`location.hash`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:32:04.737

你有几个选择：

您可以使用保存先前状态的 jQuery 设置 cookie。可以在这里找到一个不错的教程：[http ://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

您还可以使用查询字符串对 url 中的选项进行编码。有关这方面的一些信息可以在维基百科上找到：[http ://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

您想要哪一个取决于您，如果您希望设置在用户离开页面并再次访问时保持不变，则使用 cookie 是可行的方法，查询字符串对于防止刷新清除您的设置更有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:32:14.100

使用 cookie 插件 (http://plugins.jquery.com/project/Cookie)：

```
$("#MyList").change(function() {
    //Set a cookie with selected value on change.
    $.cookie("SelectedItem", $(this).val());
});

$(document).load(function() {
    //On load, set the selected item from the cookie.
    $("#MyList").val($.cookie("example")); 
}); 
```

# wordpress - 在我的网站和 wordpress 博客之间共享会话

> ID：11358569
> 
> 赞同：4
> 
> 时间：2012-07-06T08:27:26.350
> 
> 标签：wordpress, session, login

我想知道如何在同一个域 www.mysite.com 上的我的非 wordpress 网站和我的 wordpress 博客之间共享会话，这样当用户登录到我的网站时，他也登录到了博客

我在我的网站上安装了 wordpress 作为子目录，我的网站的 url 是 www.mysite.com 我访问 wordpress 像这样 www.mysite.com/wordpressBlog

在我的主站点的 user_login.php 上，我激活了

> session_start();

激活 cookie 并在我的 wordpress wp_unregister_GLOBALS() 上添加

> $no_unset = array('_SESSION', ...

但是什么也没有发生，当我登录到我的主站点时，我仍然需要登录到博客

事实上，我的网站和 wordpress 博客在同一个域上。我在我的网站 url 上安装了 wordpress 作为子目录，因为我的网站是 www.mysite.com 并且我像这样访问 wordpress www.mysite.com/wordpressBlog 在我的主站点的 user_login.php 上我激活了

```
session_start(); 
```

激活cookies并在我的wordpress wp_unregister_GLOBALS() 我添加了 $no_unset = array( '_SESSION', ...

但是什么也没有发生，当我登录到我的主站点时，我仍然需要登录到博客

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:41:12.833

为了能够在两个站点之间共享会话 cookie，它们必须在相同的域名下运行（例如 mysite.com）。如果会话 cookie 的范围为`mysite.com`

```
www.mysite.com
blog.mysite.com 
```

*PS。我不建议使用 Cross Scripting hacks 来解决这个域范围问题。出于安全原因，它仅限于域。*

[编辑]

我还应该指出，将您的两个[子域（站点）托管在不同的服务器上是完全有效的](https://stackoverflow.com/questions/189552/subdomain-on-different-host)

[编辑]

由于您使用的是非 WP 网站，因此很难为您的问题提供简洁的答案。我对您的最佳建议是在[WordPress StackExchange](http://wordpress.stackexchange.com)上发帖，在那里您可能会找到以前做过此配置的人。

我相信您的问题集中在 WP 的 Cookie 范围内。[编辑您的 wp-config.php 并将 COOKIE_DOMAIN 设置为使用 "" 可能有助于解决](http://codex.wordpress.org/Editing_wp-config.php#Set_Cookie_Domain)[此 WordPress StackExchange 帖子](https://wordpress.stackexchange.com/questions/35155/wordpress-multisite-use-same-cookies-across-all-website)中提到的问题。

一些帖子谈到完全删除此设置。在任何情况下，您都需要一种调试 HTTP 会话的方法，以查看使用哪个范围发送的 cookie，这就是我推荐 FireBug 的原因。在任何情况下，您仍然需要重新编码您的非 WP 网站以识别 WP cookie，因此了解正在发生的事情很重要。

我确实遇到了关于多站点[域映射](http://ottopress.com/2010/wordpress-3-0-multisite-domain-mapping-tutorial/)的另一篇文章，这可能有助于您的知识，但这仅涉及 WP 站点，因此不完全是您所需要的。

# python - 重新分配变量的值

> ID：11358572
> 
> 赞同：0
> 
> 时间：2012-07-06T08:27:29.170
> 
> 标签：python, string

这是一个完全菜鸟的问题。我有以下代码：

```
nb='([- ][0-9]*.[0-9]*E[-+ ][0-9]*)'
nb='([0-9,E.+-]+)' 
```

是否被`nb`覆盖？还是它做其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:34:25.663

`nb`现在绑定到第二个字符串`'([0-9,E.+-]+)'`. 所以你的第一个任务不再重要。请记住，这`nb`只是一个名称，在之前指向第一个字符串之后现在指向第二个字符串，您没有修改任何字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:43:46.613

更准确地说，第二个赋值用对第二个字符串对象的引用替换了对第一个字符串对象的引用。

由于第一个字符串对象不再有对它的引用，因此将在那个时候或一段时间后进行垃圾收集（内存回收）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:39:16.977

第一个赋值将在内存中创建一个 str 类型的实例，其中包含 '([- ][0-9]*.[0-9] *E[-+ ][0-9]* )'。

在 Python 中，字符串是不可变的，因此第二个赋值不会修改第一个字符串：它将在内存中创建第二个包含 '([0-9,E.+-]+)' 的字符串实例。

在某些时候，垃圾收集器将从内存中擦除第一个实例，因为引用计数现在为零（不再有变量引用该字符串，因为 nb 现在指向另一个字符串）。

# c# - 如果 IF 语句不满足第一个条件，它会停止评估吗？

> ID：11358576
> 
> 赞同：53
> 
> 时间：2012-07-06T08:28:00.823
> 
> 标签：c#, if-statement, conditional-statements

如果我有一个`If`带有 2 个条件的语句 - 第一个条件失败，甚至会考虑第二个条件还是直接进入`else`？因此，在下面的示例中，如果`myList.Count == 0`, 将`myString`与“值”进行比较，还是直接与`else`？

```
if(myList.Count > 0 && myString.Equals("value"))
{
//Do something
}
else
{
//Do something else
} 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-06T08:31:15.607

它将停止评估，因为您使用的是双 && 运算符。这称为[短路](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/conditional-and-operator)。

如果将其更改为单个 & 符号：

```
if(myList.Count > 0 & myString.Equals("value")) 
```

它会评估两者。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-06T08:29:03.260

不，不会考虑。（这称为[短路](http://msdn.microsoft.com/en-us/library/2a723cdk%28v=vs.71%29.aspx)。）

编译器足够聪明（并且语言规范要求）知道如果第一个条件是`false`，则表达式将无法计算为`true`。

正如 Jacob 所指出的`||`，当第一个条件为 时`true`，将不会评估第二个条件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-06T08:32:35.270

如果逻辑运算符是 AND (&&)，那么 IF 语句将计算第一个表达式 - 如果第一个表达式为假，则不会计算第二个表达式。这对于在引用上调用方法之前检查变量是否为空很有用 - 以避免空指针异常

如果逻辑运算符是 OR (||)，则 IF 语句将计算第一个表达式 - 如果第一个表达式为真，则不会计算第二个表达式。

编译器和运行时针对这种行为进行了优化

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-06T08:29:55.523

不，如果您使用，第二个条件将被跳过`&&`，

如果你使用`&`它会被考虑

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T08:36:53.417

考虑以下情况：

```
static int? x;
static int? y;

static void Main(string[] args)
{
    x = 5;
    if (testx() & testy())
    {
        Console.WriteLine("test");
    }
}

static Boolean testx()
{
    return x == 3;
}

static Boolean testy()
{
    return y == 10;
} 
```

如果您同时跟踪 testx 和 testy 函数，即使 testx 为假，也会对其进行评估。

如果您将测试更改为 &&，则仅检查第一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T08:30:54.217

在您的示例中，仅当第一个语句失败时才会评估第二个语句。只有当两个操作数都为真时，逻辑 AND`&&`才会返回，也就是*短路评估*。`true`

 ** * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T08:34:53.330

.NET 支持`short circuiting`所以当第一个条件失败时，它不会检查第二个条件....在 C# || 和 && 是逻辑运算符的短路版本 | 和 & 分别......它通常也更快......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-22T19:05:22.510

该表达式将从左到右进行计算，因为它是逻辑 AND 操作。如果为假，它将停止评估。它还具有表达式中操作的最大优先级。

> 条件与运算符 (&&) 对其布尔操作数执行逻辑与，但仅在必要时评估其第二个操作数。[条件和运算符 (&&) ^(MSDN)](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/conditional-and-operator)

下面是一组[部分，列出了从最高优先级到最低优先级的 C# 运算符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/)。*

# jquery - 无法从 ajax 获取数据（获取）

> ID：11358581
> 
> 赞同：0
> 
> 时间：2012-07-06T08:28:19.990
> 
> 标签：jquery

我的代码有点问题...

我有一个名为“listeclients.php”的页面，其中有几个带有 id 的客户端等。我只是做了一个小按钮，以便将一些数据发送到一个名为“actionclient.php”的页面，它只需要显示我发送到的参数它。actionclient.php 包括：

```
<?php
echo "test = ";
echo $_GET['test'];
echo $_GET['test2'];
?> 
```

（这只是一个测试页）。

这是我的 jQuery 脚本：

```
$( "div.modif_dialog").click(function(e4) {
    $( "#editer" ).dialog("open");
    var monUrl4 = 'actionclient.php?action=modifier&id=';
    var url_final4 = monUrl4+pos4;
    $.ajax({
        type: "GET",
        url: url_final4,
        data: { test: "TEST", test2: pos4},
        success: function(){
           alert (pos4);
        }
    });
    $('#editer').load(monUrl4, function(response4, status4) {
        $('#test_dialog2').html(response4);
    });
    e4.preventDefault();
}); 
```

我的 alert(pos4) 警报效果很好，并且变量都是正确的。

actionclient.php (url_final4) 很好地加载到我的对话框中，但它总是只打印：“test =”

有什么线索吗？（我在另一个页面中使用 POST 方法完成了完全相同的代码，效果很好……我不明白。）

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:31:37.570

要查看发送的变量，您应该这样做：

```
....
success: function(data){
   alert (data); //that will show (test= TEST pos4)
   }
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:49:02.693

The reason why your dialig box does not display the posted values, is that you are loading `actionclient.php` twice - once in your `$.ajax` call, and then again with `$('#editer').load`. There's nothing in `actionpclient.php` that saves anything on the server, thus the values do not show up when you request `actionclient.php` the second time.

What you seem to want, is to use the values returned by `actionclient.php` in your first request:

```
$.ajax({
    type: "GET",
    url: url_final4,
    data: { test: "TEST", test2: pos4},
    success: function(response){
        $('#test_dialog2').html(response);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:32:32.507

succes 函数应该是这样的：

```
success:function(html){ 
    alert("AJAX response :"+html);
} 
```

实际上，您只是显示与之前发送的相同参数。

# python - 在 python 中处理捕获错误 - 不会“尝试”并且会崩溃脚本

> ID：11358582
> 
> 赞同：0
> 
> 时间：2012-07-06T08:28:22.513
> 
> 标签：python, exception-handling

我一定做错了什么，我无法从网络上的其他资源中弄清楚。

在我的脚本中，我尝试运行：

```
username= win32security.LookupAccountSid(None, ace[2])[0] 
```

我从中得到和错误

```
Traceback (most recent call last):
File "<pyshell#10>", line 1, in <module>
   win32security.LookupAccountSid(None, ace[2])[0]
error: (1332, 'LookupAccountSid', 'No mapping between account names and security IDs was done.') 
```

我发现当您拥有一个不再有用户的安全注册表时会发生这种情况，因此它在权限上显示为 S-1-xxx ...

为了让脚本继续前进，我写道：

```
try:
    username= win32security.LookupAccountSid(None, ace[2])[0]
except:
    nouser +=1 
```

此代码仍会给出错误并停止我的脚本。发生此错误时，如何让我的脚本忽略？

# php - 在会话中找不到索引

> ID：11358585
> 
> 赞同：0
> 
> 时间：2012-07-06T08:28:28.290
> 
> 标签：php, session

我尝试将我想要的会话加载到我的处理程序中。但是第 8 行说“在查找索引期间”我的控制器中的错误是什么？这是一个用户名，我想使用数据库来检索此人的 id。控制器：

```
 <?php
 require_once ("View/PersonInfoView.php");
 require_once ("Handler/UserHandler.php");
 class PersonInfoController{
public function DoPersonInfo(){
    $Personinfoview = new PersonInfoView();
    $UserHandler = new UserHandler();
    $PK = $UserHandler->GetUserID($_SESSION['Person']);
    $Person_array = $UserHandler->ListPerson($PK);

    $Personinfoview->Personbox($Person_array);

}

 } 
```

我设置会话：

```
 <?php
   require_once ("Handler/Userhandler.php");
  require_once ("Controller/LoginController.php");
 class DologinHandler{  
public function Login(){ 

if(isset($_REQUEST['is_ajax']))
    {
        $LoginController = new LoginController();
        $username = $_REQUEST['username'];
        $password = $_REQUEST['password'];
        $_SESSION['Person'] = $username;
        $UserHandler = new UserHandler();
        $sign = $UserHandler -> controllDB($username,$password);

        if($sign == true)
        {
            echo 'success'; 
            return true;    
        }
        else 
        {
            echo 'error';
            return false;
        }
       }
      }

 }
     $loginclass = new DologinHandler();
     $loginclass->Login(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:40:02.973

我猜你的`$_REQUEST`不包含 key `Person`。试着做一个看看它包含什么`var_dump()`。`$_REQUEST`

除此之外，我建议您在调用时实现某种错误处理`$UserHandler->GetUserID()`

例如。

```
try {
    $PK = $UserHandler->GetUserID($_SESSION['Person']);
} catch(Exception $e) {
    echo($e->getMessage());
} 
```

[阅读有关异常](http://php.net/manual/en/language.exceptions.php)的信息。

# javascript - 使用 XML 数据在浏览器中使用数学

> ID：11358590
> 
> 赞同：0
> 
> 时间：2012-07-06T08:28:38.957
> 
> 标签：javascript, xml, json, xquery

我正在尝试将 XML 或 Csv 数据提取到 HTML 文件中，然后我想使用数学将值相加并在页面上显示结果（我基本上是在尝试在 Web 浏览器上显示发票）

我的技能是 HTML/CSS，我懂一点 JavaScript

我已经设法使用 http 请求将 XML 数据提取到 HTML 中，并使用 xslt 设置该信息的样式

我真正要问的是什么是满足我需求的最佳解决方案是使用上述方法然后使用 xquiry 将值相加还是我需要学习一些 Ajax、Json 并使用 JavaScript 计算值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:30:53.280

您确实应该学习 AJAX 以获取和操作数据，而不是获取演示部分。这就是每个人都遵循的方式，因为它允许与用户进行更响应的交互，并在复杂交互的情况下提供更简洁的架构。

但这并不意味着您必须放弃 XML：最初 AJAX 是基于 XML（AJAX 中的 X）而不是 JSON 构建的。

我个人更喜欢 JSON，我认为从长远来看它会更容易管理，但是如果服务器端很难更改，您可以获取 XML（例如查看 jquery 的 ajax 函数），使用它构建 javascript 对象，然后使用这些数据更改您的屏幕。如果稍后您决定使用 JSON 而不是 XML，则只需更改客户端代码的“解析”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:38:03.180

“我正在尝试将 XML 或 Csv 数据提取到 HTML 文件中，然后我想使用数学来将值相加并在页面上显示结果”

您可以使用 XSLT 或 javascript 执行此操作。但是，使用 XSLT，事情会变得相当复杂，这取决于您使用的版本。XSLT 1.0 用于聚合结果的函数集非常有限。对于所有 XSLT，您不能重新分配变量，您必须通过递归来解决其中的许多问题。在我看来，这不是一个真正舒适的方法。

无论在 XSLT 和 Javascript 之间进行选择，我也会质疑将这种逻辑置于浏览器表示层中的架构。我认为如果服务器端执行所需的所有计算，并将浏览器的任务限制为输出样式会更好。

# xcode - 未找到 xcode 库

> ID：11358591
> 
> 赞同：55
> 
> 时间：2012-07-06T08:28:45.257
> 
> 标签：xcode

我收到以下错误：

> ld：找不到-lGoogleAnalytics clang 的库：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我花了一些时间在谷歌上搜索，但找不到解决这个问题的方法。我是 xcode 的新手，这是我需要处理的现有项目。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-06T08:49:21.163

You need to set the "linker search paths" of the project (for both Debug and Release builds). If this library was in, say, a sibling directory to the project then you can set it like this:

`$(PROJECT_DIR)/../GoogleAnalytics/lib`

(you want to avoid using an absolute path, instead keep the library directory relative to the project).

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2019-12-05T03:51:42.897

就我而言，该**项目使用 CocoaPods**。我的项目中缺少一些文件。

所以我从 CocoaPods 安装它：[https](https://cocoapods.org/) ://cocoapods.org/ 。

如果**项目使用 CocoaPods**，我们**必须注意始终打开 .xcworkspace 文件夹，而不是**Xcode 中的 .xcodeproj 文件夹。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-09-29T05:19:55.887

总而言之，**Xcode 找不到 library/header/framework 的位置，然后你告诉 Xcode 它们在哪里。**

**在Build Settings** --> **Library/Header/Framework Search Paths**中设置Xcode 用来查找 library/header/framework 的路径。

说，现在它找不到`-lGoogleAnalytics`，所以你将目录添加`-lGoogleAnalytics`到**Library Search Paths**中。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-03-03T22:05:28.633

就我而言，我有一个项目在“构建设置>其他链接器标志”中有很多条目

我需要减少到只是

```
 $(inherited)
  -ObjC 
```

**旧设置：**

[![旧设置](../Images/c98a9da9fa0f95ae706ac38f2f863cd1.png)](https://i.stack.imgur.com/5efJf.png)

**更新设置：**

[![在此处输入图像描述](../Images/6c06cd754fae6f90caea444729a21eea.png)](https://i.stack.imgur.com/9S7zF.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-12-15T05:33:15.623

对我来说，我打开 projectname.xcworkspace 文件，一切正常。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-10-08T00:40:36.320

如果您安装了 pod，请确保打开**工作区文件夹**（白色 Xcode 图标）而不是项目文件夹。这解决了`library not found for ...`错误。非常简单的问题，但我被困了很长时间。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-07T11:06:53.483

如果您使用 Pods 将 GoogleAnalytics iOS SDK 包含到您的项目中，值得注意的是，自从 3.0 版本以来，您`Other Linker Flags`需要包含**-lGoogleAnalyticsServices**而不是旧的**-lGoogleAnalytics**

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-08-23T07:43:06.653

这对我有用：

1.  转到构建设置 -> 链接 -> 其他链接器标志 -> 删除除`$(inherited)`
2.  cd ios && pod 更新[![在此处输入图像描述](../Images/cc6d900f379d2c7fbda8a52f0b02071b.png)](https://i.stack.imgur.com/YfN3y.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-29T05:52:05.013

如果您的库文件名为 libGoogleAnalytics.a 您需要输入 -lGoogleAnalytics 以确保 .a 文件按照您的预期命名

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-25T02:12:57.010

在 XCode 10.1 中，我必须将“库搜索路径”设置为 $(PROJECT_DIR)/.../path/to/your/library

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-25T13:44:10.010

以上都对我不起作用，确保 Pod 文件平台 :ios, '11.0' 与 XCODE 设置中的最小部署目标相匹配

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-24T15:00:49.703

对我来说这是一件愚蠢的事情：我的 mac 将文件上传到了 iCloud，这就是 Xcode 没有找到它的原因。

如果您关闭自动上传，则不会再次发生。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-13T11:51:46.197

问题可能如下： SVN 由于其全局配置而忽略 .a 文件，这意味着有人没有将 libGoogleAnalytics.a 提交给 SVN，因为它没有出现在 SVN 中。因此，现在您尝试从 SVN 中检查项目，该项目现在错过了 libGoogleAnalytics.a（因为它被忽略且未提交）。当然构建失败。

您可能希望将全局忽略配置从 SVN 更改为停止忽略 *.a 文件。

或者只是手动将缺少的 libGoogleAnalytics.a 文件添加到您的 SVN 工作副本，而不是更改 SVN 全局忽略配置。

然后将 libGoogleAnalytics.a 重新添加到您的 XCode 项目并将其提交到 SVN。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-02T16:32:14.800

您也可以尝试`lint`使用该`--use-library`选项，因为从 v0.36 开始，默认情况下 cocoapods lint 库作为框架

# python - 从 RLE 模式中删除代码重复，而不求助于 Haskell？

> ID：11358598
> 
> 赞同：1
> 
> 时间：2012-07-06T08:29:17.777
> 
> 标签：python, haskell, run-length-encoding

RLE（运行长度编码）模式似乎在我的工作中出现了很多。

其本质是，每次看到“中断”*或*到达输入末尾时，您输出自上次“中断”以来遇到的元素的减少。

（在实际的 RLE 中，'break' 只是这个字符与最后一个字符不匹配，但在现实世界中它通常更复杂一些，但仍然是当前和最后一个元素的函数。）

我想删除`last_val != None: rle.append((last_val, count))`循环中和最后出现的重复条件和动作。

问题是：

1.  用函数调用替换它们会产生更多的代码，而不是更少。
2.  保持命令式（例如，在 Haskell 中，问题就消失了）。

命令式 Python 代码是：

```
#!/usr/bin/env python

data = "abbbccac"

if __name__ == '__main__':
  rle = []
  last_val = None
  count = 0;

  for val in data:
    if val != last_val and last_val != None:
      rle.append((last_val, count))
      count = 1
    else:
      count += 1
    last_val = val
  if last_val != None:
    rle.append((last_val, count))

  print rle 
```

PS 用函数式语言可以轻松解决：

```
#!/usr/bin/env runhaskell
import Data.List (group)

dat = "abbbccac"

rle :: Eq a => [a] -> [(a, Int)]
rle arr = map (\g -> (head g, length g)) $ group arr

main :: IO ()
main = print $ rle dat 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:43:57.840

使用 Python“包括电池”可以轻松解决：

```
>>> data = "abbbccac"
>>> from itertools import groupby
>>> ilen = lambda gen : sum(1 for x in gen)
>>> print [(ch, ilen(ich)) for ch,ich in groupby(data)]
[('a', 1), ('b', 3), ('c', 2), ('a', 1), ('c', 1)] 
```

`groupby`返回 2 元组的迭代器。第一个是代表下一个组的值，第二个是可用于迭代组中项目的迭代器。您只需要组的长度，但不能直接获取长度，因此我添加了简单的`ilen`lambda 函数来计算迭代器的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:48:34.407

如果我理解正确的话很简单......

```
from itertools import groupby

data = "abbbccac"

print [(k, len(list(g))) for k,g in groupby(data)] 
```

哇 - 将 Paul 的功能与我的非常相似的功能进行比较，得到了非常令人惊讶的结果。事实证明，加载列表的速度要快 10-100 倍。更令人惊讶的是，随着块变大，列表实现具有更大的优势。

我想这就是我 ♥ Python 的原因——它使简洁的表达式更好地工作——即使它有时看起来很神奇。

自己检查数据：

```
from itertools import groupby
from timeit import Timer

data = "abbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccac" 

def rle_walk(gen):
    ilen = lambda gen : sum(1 for x in gen)
    return [(ch, ilen(ich)) for ch,ich in groupby(data)]

def rle_list(data):
    return [(k, len(list(g))) for k,g in groupby(data)]

# randomy data
t = Timer('rle_walk("abbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccac")', "from __main__ import rle_walk; gc.enable()")
print t.timeit(1000)

t = Timer('rle_list("abbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccac")', "from __main__ import rle_list; gc.enable()")
print t.timeit(1000)

# chunky blocks
t = Timer('rle_walk("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccc")', "from __main__ import rle_walk; gc.enable()")
print t.timeit(1000)

t = Timer('rle_list("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccc")', "from __main__ import rle_list; gc.enable()")
print t.timeit(1000) 
```

给我的结果（越小越好）：

```
1.42423391342    # lambda and walk - small blocks
0.145968914032   # make list - small blocks
1.41816806793    # lambda and walk - large blocks
0.0165541172028  # make list - large blocks 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T11:07:56.383

这是一个更重要的形式。您可以通过添加或链接到永远不会匹配任何列表元素的一次性标记来消除重复代码，从而强制序列结束通过您的“this-not-equal-last”代码：

```
from itertools import chain

def rle(seq):
    ret = []
    sentinel = object()
    enum = enumerate(chain(seq,[sentinel]))
    start,last = next(enum)
    for i,c in enum:
        if c != last:
            ret.append((last,i-start))
            start,last = i,c
    return ret 
```

这甚至可以优雅地处理输入 seq 为空的情况，并且输入可以是任何序列、迭代器或生成器，而不仅仅是字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T08:34:51.223

`enumerate`如果您使用 else 子句来跟踪您看到的值并将 last_val 和 last_index （或 (last_val, last_index) 存储为元组），您至少可以摆脱 else 子句。例如

```
last_index = 0
last_val = None

for index, val in enumerate(data):
    if val != last_val and last_val is not None:
        rle.append((last_val, index - last_index + 1))
        last_val = val
        last_index = index
    last_val = val
if last_val is not None:
    rle.append((last_val, index - last_index + 1)) 
```

您也可以在任何时候开始枚举，它会向上计数（因此您可以使用 初始化它`enumerate(data, last_index)`。看起来您希望计数从 1 开始，这就是我添加该`+ 1`部分的原因。

Enumerate 只计算迭代器产生了多少元素，与类型无关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T02:59:25.827

我更喜欢 groupby 解决方案，但编写命令式解决方案最方便的方法通常是作为生成器：

```
data = "abbbccac"

def rle(xs):
    def g():
        last = object()
        n = 0
        for x in xs:
            if x != last:
                yield last,n
                last = x
                n = 0
            n += 1
    return list(g())[1:]

print rle(data) 
```

# php - 从 db 转换 html 标签

> ID：11358600
> 
> 赞同：0
> 
> 时间：2012-07-06T08:29:22.417
> 
> 标签：php

我正在使用 jquery 编辑器。内容将与 html 标签一起保存在数据库中。例如，我在编辑器中输入了“aneesh”，使用编辑器使文本变为粗体，斜体将内容保存到 db 。所以内容将与文本和html标签一起保存在数据库中

现在我想从 db 中获取内容，并希望以格式化的方式显示文本，这需要转换我的内容中想要显示的 html 标签，像这样 ***aneesh*** 有什么办法吗，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:38:23.653

要存储和检索 html，您应该使用`htmlspecialchars()`- 这会在保存时保留 html 标签等，并且`htmlspecialchars_decode()`- 这会将它们转换回可以显示的正确 html - 在显示检索到的内容时。

使用它存储并在填充所见即所得编辑器后面的文本区域时调用解码函数将/应该保留所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:49:09.320

you need to use javascript for better and easy solution.

get raw html content from db (with php) to show web browser (with javascript): innerHTML or .html() (JQuery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:58:40.237

或者你也可以使用 htmlspecialchars()

```
$a=htmlspecialchars($a);
<text>$a</text> 
```

wud 帮助你保存和检索 html 字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:35:10.733

只需从数据库中选择数据（我正在使用 PDO）：并将结果回显/发布到文档而不使用字符串格式：

```
$sql = 'SELECT * FROM table;';
$stmt = $DB->prepare($sql);
$stmt->execute();
$row = $stmt->fetch(PDO::FETCH_ASSOC);

echo $row['result']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T08:36:31.573

如果您有带有 html 标签的内容，例如`<b>Hello</b>`数据库中的 ie，并且当您再次从数据库中返回它时，您正在使用的 jquery 编辑器将自动删除这些标签，并将再次转换您的文本并使其变为粗体（如果**hello** in案子）。无需做任何事情，只需将其回显即可。

# java - 将 JScrollPane 限制为仅显示其部分内容

> ID：11358601
> 
> 赞同：2
> 
> 时间：2012-07-06T08:29:24.210
> 
> 标签：java, swing, jscrollpane, jscrollbar

我有一个 JScrollPane，其中包含一个大小为 5000x5000 像素的 JPanel。我想将 JScrollPane 限制为只能显示此 JPanel 的子部分。

例如由两个点 (X,Y) 定义的矩形：

*   (500,500)（左上角）
*   (3000,3000)（右下角）。

我努力了

```
 myJScrollPane.getHorizontalScrollBar().setMinimum(500); 
```

和

```
myJScrollPane.getHorizontalScrollBar().setMaximum(3000); 
```

但它不起作用。setMinimum 函数只设置视口在滚动窗格上的位置，setMaximum 不做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:14:07.950

将您的`JPanel`改为具有大小 (2500, 2500) 并渲染所需的图像片段。为此使用in `translate()`。`Graphics``paintComponent()`

# sql - 在 Rails 3.2.x 中禁用查询日志以进行开发？

> ID：11358603
> 
> 赞同：4
> 
> 时间：2012-07-06T08:29:28.570
> 
> 标签：sql, ruby-on-rails-3, activerecord, logging, ruby-on-rails-3.2

我关注了所有关于为活动记录禁用 SQL 查询日志记录的主题。谁知道如何在 rails 3.2.x 中正确禁用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T08:32:56.363

试一试 - 将活动记录日志发送到 null：

```
if Rails.env.development?
    ActiveRecord::Base.logger = Logger.new('/dev/null')
end 
```

# android - 如何从 Edittext 中检索名称以进行进一步操作？

> ID：11358615
> 
> 赞同：0
> 
> 时间：2012-07-06T08:30:26.753
> 
> 标签：android, android-edittext, android-preferences, android-softkeyboard

我几乎完成了我的游戏，现在我想对分数和名字做点什么，所以我想要一个高分列表......

问题是当我尝试使用我已经准备好的字母位图绘制名称时，我无法检索名称！！！！

现在，当我尝试使用 getSharedpreferences 并且我无法在整个项目中的任何位置复制名称时，就会出现问题，以便在显示高分的活动中我可以绘制它！！！

有没有简单的方法请指教！！！

谢谢你！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:35:17.810

正如您所说，存储将在您的应用程序中可用的值的最佳方法是 SharedPreferences。

要存储您的姓名用户，您可以执行以下操作：

```
 SharedPreferences mPrefs = getSharedPreferences("MyPreferences", Context.MODE_PRIVATE);
 SharedPreferences.Editor editor = mPrefs.edit();
 editor.putString("username", "your name");
 editor.commit(); 
```

要检索您的用户名，您可以执行以下操作：

```
SharedPreferences mPrefs = getSharedPreferences("MyPreferences", Context.MODE_PRIVATE);
String username = mPrefs.getString("username", ""); 
```

# c# - 从 linq 表达式中检索信息时是否使用反射？

> ID：11358618
> 
> 赞同：2
> 
> 时间：2012-07-06T08:30:45.597
> 
> 标签：c#, expression-trees, linq-expressions

我有以下扩展方法：

```
public static string ToPropertyName<T,E>(this Expression<Func<E, T>> propertyExpression)
{
    if (propertyExpression == null)
        return null;

    string propName;
    MemberExpression propRef = (propertyExpression.Body as MemberExpression);
    UnaryExpression propVal = null;

    // -- handle ref types
    if (propRef != null)
        propName = propRef.Member.Name;
    else
    {
        // -- handle value types
        propVal = propertyExpression.Body as UnaryExpression;
        if (propVal == null)
            throw new ArgumentException("The property parameter does not point to a property", "property");
        propName = ((MemberExpression)propVal.Operand).Member.Name;
    }

    return propName;
} 
```

我在传递属性名称而不是字符串时使用 linq 表达式来提供强类型，我使用此函数将属性名称作为字符串检索。这种方法是否使用反射？

我问的原因是这种方法在我们的代码中被大量使用，我希望它足够快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:50:48.107

As far as I know, reflection is not involved in the sense that some kind of dynamic type introspection happens behind the scenes. However, types from the `System.Reflection` such as `Type` or `PropertyInfo` are used together with types from the `System.Linq.Expressions` namespace. They are used by the compiler only to describe any `Func<T,E>` passed to your method as an abstract syntax tree (AST). Since this transformation from a `Func<T,E>` to an expression tree is done by the compiler, and not at run-time, only the lambda's static aspects are described.

Remember though that building this expression tree (complex object graph) from a lambda at run-time might take somewhat longer than simply passing a property name string (single object), simply because more objects need to be instantiated (the number depends on the complexity of the lambda passed to your method), but again, no dynamic type inspection à la `someObject.GetType()` is involved.

**Example:**

[This MSDN article](http://msdn.microsoft.com/en-us/library/bb397951.aspx) shows that the following lambda expression:

```
Expression<Func<int, bool>> lambda1 = num => num < 5; 
```

is transformed to something like this by the compiler:

```
ParameterExpression numParam = Expression.Parameter(typeof(int), "num");
ConstantExpression five = Expression.Constant(5, typeof(int));
BinaryExpression numLessThanFive = Expression.LessThan(numParam, five);
Expression<Func<int, bool>> lambda1 =
    Expression.Lambda<Func<int, bool>>(
        numLessThanFive,
        new ParameterExpression[] { numParam }); 
```

Beyond this, nothing else happens. So this is the object graph that might then be passed into your method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:32:53.733

由于您的方法命名是`ToPropertyName`，我想您正在尝试获取类的某些特定属性的类型名称。您是否对方法进行了基准测试`Expression<Func<E, T>>`？创建表达式的成本相当大，而且由于您的方法是静态的，我看到您也没有缓存成员表达式。换句话说，即使表达式方法不使用反射，成本也会很高。请参阅此问题：[如何将 C# 属性名称作为带有反射的字符串？](https://stackoverflow.com/questions/1669016/how-do-you-get-a-c-sharp-property-name-as-a-string-with-reflection)你有另一种方法：

```
public static string GetName<T>(this T item) where T : class
{
    if (item == null)
        return string.Empty;

    return typeof(T).GetProperties()[0].Name;
} 
```

您可以使用它来获取属性或变量的名称，如下所示：

```
new { property }.GetName(); 
```

为了进一步加快速度，您需要缓存成员信息。如果你所拥有的绝对是`Func<E, T>`那么你的方法适合。另请参阅：[基于 lambda 表达式的反射与正常反射](https://stackoverflow.com/questions/2697655/lambda-expression-based-reflection-vs-normal-reflection)

一个相关问题：[将所有属性名称和对应的值放入字典中](https://stackoverflow.com/questions/9652560/treat-object-like-dictionary-of-properties-in-c-sharp)

# java - 为什么Java中要避免IO as Byte

> ID：11358619
> 
> 赞同：1
> 
> 时间：2012-07-06T08:30:46.177
> 
> 标签：java, stream

`CopyBytes`看起来像一个普通的程序，但它实际上代表了一种你应该避免的低级 I/O。`bytestream`已经提到，尽管所有内容都建立在自身之上，但应该首选字符、对象等的流。这背后的原因是什么，与安全管理器和性能相关问题有什么关系？

来源：[甲骨文文档](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:34:53.423

Oracle 实际上在说的是“请不要重新实现轮子！”。

您几乎*不需要*常规的字节流：

*   你在解析文本吗？使用字符流，它可以理解文本编码问题。
*   你在解析 XML 吗？使用 SAX 或其他一些库。
*   你在解析图像吗？使用 ImageIO 类。
*   你是把东西从A复制到B吗？使用 apache commons-io FileUtils。

在极少数情况下，您实际上需要使用字节流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:35:50.437

从您引用的文字中：

> CopyBytes 看起来像一个普通程序，但它实际上代表了一种您应该避免的低级 I/O。**由于 xanadu.txt 包含字符数据，因此最好的方法是使用字符流**，如下一节所述。还有更复杂的数据类型的流。字节流应该只用于最原始的 I/O。

通常，您不想直接使用字节。有更高级别的 API，例如读取文本（即必须从字节解码的字符数据）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T08:33:31.527

它可以工作，但效率很低：它复制的每个字节都需要 2 次方法调用。

相反，您应该使用缓冲区（几千字节，最佳大小取决于您读取的内容和其他条件）并在每次方法调用时读取/写入整个缓冲区（或尽可能多）。

# javascript - 用 JavaScript RegExp 匹配一个完整的单词

> ID：11358625
> 
> 赞同：0
> 
> 时间：2012-07-06T08:31:06.843
> 
> 标签：javascript, regex

我正在尝试在字符串中查找一个单词。

```
re = new RegExp("bob");
checkWord = re.test("This is bobby!");
if (checkWord) { break; } 
```

我想要 checkWord = false 因为我只在寻找“bob”，但它 checkWord = true 因为“bobby”包含单词“bob”。我能做些什么来解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:33:34.507

它应该通过使用单词边界来工作。

```
re = /\bbob\b/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:23:15.397

为此，您也可以尝试以下方法。

```
nameArray = new Array("Bob", "Ben", "Don");
for (i = 0; i < nameArray.length; i++) {
    if(nameArray[i].indexOf("Bob") != -1)
    {
    alert("true");
    }
    else
    {
      alert("false");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:47:29.370

您可以通过两种不同的方式实现此目的：

给出界限

```
\bbob\b 
```

或将它们分组

```
\b(bob)\b 
```

两者都会起作用。

这是工作示例：

[例子](http://gskinner.com/RegExr/?31dvg)

如果您正在使用数组，则遍历每个数组并单独检查。

# mysql - 在最少函数中检查 null

> ID：11358633
> 
> 赞同：2
> 
> 时间：2012-07-06T08:31:49.747
> 
> 标签：mysql, sql

我有一张如下表：

```
user_id value1 value2 value3 value4
1       2      3      4      null
2       null   5      2      null
3       null   null   100    3
... 
```

现在我想获取 value1、value2、value3 和 value4 的最小值，然后返回具有最高最小值的 user_id。

我考虑过使用`least`然后按降序分组，但是如何有效地检查空值？该表的输出将是：

```
user_id value
3       3
1       2
2       2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:35:27.533

`~0>>1`会给你mysql中最大的BigInt值（应该够用了）

```
coalesce(
      nullif(
           least(coalesce(value1, ~0>>1), coalesce(value2, ~0>>1),
                 coalesce(value3, ~0>>1), coalesce(value4, ~0>>1)), 
      ~0>>1), 
0) 
```

或者你必须做组合（我把它们都放了，不确定是否有必要）

```
coalesce
    (least(
       coalesce(value1, value2, value3, value4), 
       coalesce(value1, value2, value4, value3),
       coalesce(value1, value3, value2, value4),
       coalesce(value1, value3, value4, value2),
       coalesce(value1, value4, value2, value3),
       coalesce(value1, value4, value3, value2),
       coalesce(value2, value1, value3, value4),
       coalesce(value2, value1, value4, value3),
       coalesce(value2, value3, value1, value4),
       coalesce(value2, value3, value4, value1),
       coalesce(value2, value4, value1, value3),
       coalesce(value2, value4, value3, value1),
       coalesce(value3, value1, value2, value4),
       coalesce(value3, value1, value4, value2),
       coalesce(value3, value2, value1, value4),
       coalesce(value3, value2, value4, value1),
       coalesce(value3, value4, value1, value2),
       coalesce(value3, value4, value2, value1),
       coalesce(value4, value1, value2, value3),
       coalesce(value4, value1, value3, value2),
       coalesce(value4, value2, value1, value3),
       coalesce(value4, value2, value3, value1),
       coalesce(value4, value3, value1, value2),
       coalesce(value4, value3, value2, value1)
) 
```

, 0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:35:38.537

使用[`COALESCE()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce) 它返回第一个非 NULL 参数

```
 SELECT COALESCE(LEAST(`value1`,`value2`,`value3`),0) AS min ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:37:13.960

如果你对存在有任何论据[`least()`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_least)，`NULL`那么整个结果将是`NULL`。在您的情况下，您可以轻松地将`NULL`结果转换为零（`0`），这似乎是最少的一个：

```
SELECT coalesce(least(value1, value2, value3, value4), 0)
  FROM table; 
```

如果您想为您的字段设置不同的默认值，则需要将它们包装到单独的[`coalesce()`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)调用中：

```
SELECT coalesce(least(value1, coalesce(value2, 2), value3, value4), 0)
  FROM table; 
```

我使用`coalesce()`而不是[`isnull()`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_isnull)因为它更便携。

# java - 如何在java中使用动画gif文件作为启动画面？

> ID：11358634
> 
> 赞同：0
> 
> 时间：2012-07-06T08:31:51.447
> 
> 标签：java, swing, splash-screen, animated-gif

我正在使用 java 1.5 并希望在启动我的应用程序之前显示一个动画并在我的应用程序加载时关闭它。我在谷歌搜索后创建了一些东西，但如果我使用不显示的动画 gif，动画 gif 不会动画。

**有没有人有什么问题并知道该怎么做？**

```
public class SplashFrameSwing extends JFrame{
JPanel contentPane;
JLabel imageLabel = new JLabel();

public SplashFrameSwing(String url) throws IOException {
    try {
        ImageIcon ii = new ImageIcon(url);
        setBackground(new Color(0, 0, 0, 0));
        setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
        contentPane = (JPanel) getContentPane();
        contentPane.setLayout(new BorderLayout());
        setUndecorated(true);
        setSize(new Dimension(ii.getIconWidth(),ii.getIconHeight()));
        imageLabel.setIcon(ii);
        contentPane.add(imageLabel, java.awt.BorderLayout.CENTER);
        this.setLocationRelativeTo(null);
        this.setVisible(true);
    } catch (Exception exception) {
        exception.printStackTrace();
    }
}

public static void main(String... args){
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            try {
                // URL url = new URL("http://i34.photobucket.com/albums/d129/nirendaran/Speed/verify_anim.gif");
                String url = "C:\\Users\\TV\\Pictures\\Icon\\sniffer-prev.gif";
                SplashFrameSwing splash  = new SplashFrameSwing(url);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:25:02.453

这对我有用，但我使用的是 1.7.0_05 版本。

```
EventQueue.invokeLater(new Runnable(){
  public void run(){
    JLabel label = new JLabel();

    label.setHorizontalAlignment(SwingConstants.CENTER);

    try{
      // URL imageURL = new URL("http://static.ak.fbcdn.net/rsrc.php/v2/yb/r/GsNJNwuI-UM.gif");
      URL imageURL = new URL("http://i34.photobucket.com/albums/d129/nirendaran/Speed/verify_anim.gif");

      label.setIcon(new ImageIcon(imageURL));
    }
    catch (MalformedURLException ex){
      ex.printStackTrace();
    }

    JFrame frame = new JFrame();
    frame.add(label, BorderLayout.CENTER);
    frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    frame.setMinimumSize(new Dimension(160, 120));
    frame.setVisible(true);
  }
}); 
```

# internationalization - 检查 NSIS MUI2 中的用户语言选择

> ID：11358637
> 
> 赞同：2
> 
> 时间：2012-07-06T08:32:13.397
> 
> 标签：internationalization, installation, translation, nsis

我的 NSIS 安装程序中有多个语言包，使用 MUI2 界面。现在我尝试根据用户选择的安装语言选择语言包，它是由“典型”安装类型安装的。我的问题是，我不知道如何获得用户的语言选择。

我已经尝试访问变量 $LANGUAGE 和 $mui.LangDLL.RegistryLanguage，以及尝试将定义的语言字符串与特定的翻译字符串进行比较，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:12:32.210

语言只能设置在`.onInit`（通过使用LangDll插件或直接设置$LANGUAGE）.onInit之后，语言字符串被加载，但您仍然可以检查$LANGUAGE来获取语言ID...

# java - 将包分配给现有项目的新子文件夹

> ID：11358641
> 
> 赞同：0
> 
> 时间：2012-07-06T08:32:25.067
> 
> 标签：java, eclipse, package

我已经拥有java中现有项目的所有一系列文件夹。

这是树文件夹：

```
-org
 -w3c
  -jidadmin
  -jigsaw
  -ecc... 
```

我将在 w3c 中创建一个新文件夹，这样我的新文件夹中的所有 java 文件都将属于 package `org.w3c.myfolder`。我尝试使用 eclipse 将我的新 java 文件包 org.w3c.myfolder 放入 src 文件夹中，但 eclipse 在 src 文件夹中创建路径 org.w3c.myfolder

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:57:59.790

我认为您只是对 Eclipse 默认以平面方式显示包而不是分层显示它们作为文件夹这一事实感到困惑。如果您喜欢分层视图，请单击包资源管理器中的小三角形图标。

![在此处输入图像描述](../Images/a4639b095c1826af371e74d927c22b5d.png)

![在此处输入图像描述](../Images/639db6e29bb76f796402ab2fa04d700f.png)

# objective-c - 我将如何在 objC 中实现 SURF？

> ID：11358645
> 
> 赞同：2
> 
> 时间：2012-07-06T08:32:35.403
> 
> 标签：objective-c, ios, opencv, surf

我需要在 objc iOS 中实现 SURF 算法。我在 openCV 上进行了搜索，并尝试实现以下示例

[jonmarimba](https://github.com/jonmarimba/OpenCV-iOS)和 [ishai jaffe](https://code.google.com/p/iphone-surf-images/)

这些示例不起作用，我需要让其中任何一个起作用，至少我可以放心，是的，SURF 也可以在 iOS 上运行。我试图从头开始构建，但我完全被短路了。

我正在尝试在 jonmarimba 的示例中使用 openCV 2.4.2。

并且还尝试将 iOS5.1.1 与 Xcode 4.3 一起使用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:03:30.483

首先：使用 OpenCVs C++ 接口。Objective-C 是一个严格的 C 超集，所以你可以直接使用它。

要了解该主题，请查看 OpenCVs 官方[**文档**](http://docs.opencv.org/modules/features2d/doc/features2d.html)和有关[**Feature Description**](http://docs.opencv.org/doc/tutorials/features2d/feature_description/feature_description.html?highlight=surf)的示例代码。

下一步是获取当前适用于 iOS 的 OpenCV 版本的副本。从[2.4.2 版开始，OpenCV 具有官方 iOS 支持](http://code.opencv.org/projects/opencv/wiki/ChangeLog#242)，您只需要**opencv2.framework**。

要将 UIImage 转换为 cv::Mat 使用此函数：

```
￼static UIImage* MatToUIImage(const cv::Mat& m) {
    CV_Assert(m.depth() == CV_8U);
    NSData *data = [NSData dataWithBytes:m.data length:m.elemSize()*m.total()];
    CGColorSpaceRef colorSpace = m.channels() == 1 ?
        CGColorSpaceCreateDeviceGray() : CGColorSpaceCreateDeviceRGB();
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);
    // Creating CGImage from cv::Mat
    CGImageRef imageRef = CGImageCreate(m.cols, m.cols, m.elemSize1()*8, m.elemSize()*8,
        m.step[0], colorSpace, kCGImageAlphaNoneSkipLast|kCGBitmapByteOrderDefault,
        provider, NULL, false, kCGRenderingIntentDefault);
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef); CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace); return finalImage;
} 
```

……反之亦然：

```
static void UIImageToMat(const UIImage* image, cv::Mat& m) {
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.width, rows = image.size.height;
    m.create(rows, cols, CV_8UC4); // 8 bits per component, 4 channels
    CGContextRef contextRef = CGBitmapContextCreate(m.data, m.cols, m.rows, 8,
        m.step[0], colorSpace, kCGImageAlphaNoneSkipLast | kCGBitmapByteOrderDefault);
    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef); CGColorSpaceRelease(colorSpace);
} 
```

剩下的工作就是简单的 OpenCV Stuff。所以给你喝杯咖啡，开始工作。

如果您需要一些“灵感”，请查看此 repo [gsoc2012 - /ios/trunk](http://code.opencv.org/svn/gsoc2012/ios/trunk/)它专用于 OpenCV + iOS。

# android - Android 选择意图

> ID：11358646
> 
> 赞同：5
> 
> 时间：2012-07-06T08:32:47.263
> 
> 标签：android, android-intent

我正在尝试选择具有这 3 种 mime 类型中的任何一种的文件，但它似乎不起作用

```
Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
photoPickerIntent.setType("image/*, video/*, audio/*"); 
```

有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:37:58.773

写下面的代码而不是你的代码，它可能会对你有所帮助。

```
private static final int PICTURE = 0;
private static final int VIDEO = 1;
private static final int AUDIO = 2; 

Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
String title = GET_PICTURE;

if (this.mediaType == PICTURE) {
    photoPickerIntent.setType("image/*");
    title = "GET_PICTURE";  
}else if (this.mediaType == VIDEO) {
    photoPickerIntent.setType("video/*");     
    title = "GET_VIDEO";
}else if (this.mediaType == AUDIO) {
    photoPickerIntent.setType("audio/*");     
    title = "GET_AUDIO";
} 
```

并使用以下链接作为参考。

[选择意图示例](https://svn.apache.org/repos/asf/incubator/callback/phonegap-android/trunk/framework/src/com/phonegap/CameraLauncher.java)

# wpf - 如何从 Dispatcher 线程访问单独的线程生成的 WPF UI 元素？

> ID：11358647
> 
> 赞同：5
> 
> 时间：2012-07-06T08:32:56.010
> 
> 标签：wpf, multithreading, dispatcher, print-preview

我需要使用诸如 FixedDocument、FlowDocument、PageContent、BlockUIContainer 等 wpf UI 元素生成打印预览（很长的预览）。为了保持我的 UI 响应，我在一个单独的 Thread 类线程上做这部分（BackgroundWorker 将无法工作，因为我需要一个 STA 线程）。到目前为止一切正常。
但是现在显示打印预览后我需要打印，然后单击生成的预览上的打印图标会抛出臭名昭著的“调用线程无法访问此对象，因为不同的线程拥有它。” 例外。那么，有什么办法吗？

编辑（代码）：

```
Dispatcher.CurrentDispatcher.Invoke(new Action(() =>  
    {  
        Thread thread = new Thread(() =>  
            {  
                FixedDocument document = renderFlowDocumentTemplate(report);  
                PrintPreview preview = new PrintPreview();  
                preview.WindowState = WindowState.Normal;  
                preview.documentViewer.Document = document;  
                preview.ShowDialog();  
            });  
        thread.SetApartmentState(ApartmentState.STA);  
        thread.Start();  
    }));` 
```

好的，RenderFlowDocumentTemplate() 生成打印预览（其中包含 UI 元素）并用报告数据填充它们。PrintPreview 是一个自定义窗口，其中包含一个 DocumentViewer 元素，该元素实际保存并显示预览，并包含“打印”图标，单击我应该获得 PrintDialog 窗口。

编辑（XAML）：

```
<cw:CustomWindow x:Class="MyApp.Reports.PrintPreview"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cw="clr-namespace:MyApp.UI.CustomWindows;assembly=MyApp.UI.CustomWindows">    
    <DocumentViewer Margin="0,30,0,0" Name="documentViewer"></DocumentViewer>
</cw:CustomWindow>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:17:00.473

There is also another "trick"...

Often I run into the same problems. For example I try bind a `FrameworkElement` to an `ContentPresenter`. My solution for this, I use a `ItemsControl` in place of the `ContentPresenter` and bind my single `FrameworkElement` over an `ObservableCollection<FrameworkElement>` with only the one item. After this, no problems

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T13:53:24.730

我写了这个简单的片段，我没有任何经验，但我对它进行了一些测试，它似乎工作正常。

```
/// <summary>
/// Creates UI element on a seperate thread and transfers it to
/// main UI thread. 
/// 
/// Usage; if you have complex UI operation that takes a lot of time, such as XPS object creation.
/// </summary>
/// <param name="constructObject">Function that creates the necessary UIElement - will be executed on new thread</param>
/// <param name="constructionCompleted">Callback to the function that receives the constructed object.</param>
public void CreateElementOnSeperateThread(Func<UIElement> constructObject, Action<UIElement> constructionCompleted)
{
    VerifyAccess();

    // save dispatchers for future usage.
    // we create new element on a seperate STA thread
    // and then basically swap UIELEMENT's Dispatcher.
    Dispatcher threadDispatcher = null;
    var currentDispatcher = Dispatcher.CurrentDispatcher;

    var ev = new AutoResetEvent(false);
    var thread = new Thread(() =>
        {
            threadDispatcher = Dispatcher.CurrentDispatcher;
            ev.Set();

            Dispatcher.Run();
        });

    thread.SetApartmentState(ApartmentState.STA);
    thread.IsBackground = true;
    thread.Start();

    ev.WaitOne();

    threadDispatcher.BeginInvoke(new Action(() =>
        {
            var constructedObject = constructObject();
            currentDispatcher.BeginInvoke(new Action(() =>
                {
                    var fieldinfo = typeof (DispatcherObject).GetField("_dispatcher",
                                                                       BindingFlags.NonPublic |
                                                                       BindingFlags.Instance);
                    if (fieldinfo != null)
                        fieldinfo.SetValue(constructedObject, currentDispatcher);

                    constructionCompleted(constructedObject);
                    threadDispatcher.BeginInvokeShutdown(DispatcherPriority.Normal);
                }), DispatcherPriority.Normal);
        }), DispatcherPriority.Normal);
} 
```

这是用法：

```
 CreateElementOnSeperateThread(() =>
        {
            // running on new temp dispatcher.
            var loadsOfItems = new List<int>();
            for(var i = 0; i < 100000; i++)
                loadsOfItems.Add(i+12);

            var dataGrid = new DataGrid {ItemsSource = loadsOfItems, Width = 500, Height = 500};

            dataGrid.Measure(new Size(500, 500));
            dataGrid.Arrange(new Rect(0, 0, 500, 500));

            return dataGrid;
        }, result => SampleGrid.Children.Add(result)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T16:45:05.403

发现另一个人有完全相同的问题 -[在不同的 UI 线程中打印 DocumentViewer 的内容](https://stackoverflow.com/questions/7335507/printing-the-content-of-a-documentviewer-in-a-different-ui-thread)。只是走了同样的路。[这里](http://pastebin.com/f1a411397)的代码是一个真正的救星。
现在我不尝试从 Dispatcher 线程访问辅助线程生成的 UI 元素，而是现在在辅助线程上执行其余的打印过程。UI元素没有跨线程的“VerifyAccess”，运行流畅。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T11:19:18.883

我前段时间绑定了这个 - 我认为问题在于打印预览对话框需要在主线程上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T08:47:04.987

最简单的方法是。

```
Action a = () =>
{
    //Code from another thread.
};
Dispatcher.BeginInvoke(a); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T09:01:37.567

在这种情况下使用调度程序类。Dispatcher 类具有 invoke 和 beginInvoke 方法。它允许使用调度过程将请求发送到当前线程。您需要做的是使用委托创建如下调用

```
 App.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(() =>
{
//you code goes here.
 })); 
```

开始调用调用异步处理您的调用。

# c# - C++ CLI dynamic_cast 和多重继承（Windows 窗体和接口）

> ID：11358655
> 
> 赞同：0
> 
> 时间：2012-07-06T08:33:13.947
> 
> 标签：c#, winforms, dynamic, c++-cli, multiple-inheritance

我正在使用的场景如下所示：

```
public interface INativeWindow { ... } 
```

是一种本机窗口类型的界面，它包含一些必需的基本方法来实现，以便获得最小的窗口支持（例如最小化、恢复等）。这是属于接口项目的 C# 接口。

现在我想在`CLINativeWindow`c++-cli 类中实现它：

```
public ref class CLINativeWindow: public SWF::NativeWindow, INativeWindow
{ 
 ...
} 
```

最后，我有另一个`ref`c++ cli 类，它有一个类型的内部成员`CLINativeWindow`和一个返回`INativeWindow^`句柄的包装属性：

```
virtual property INativeWindow^ OwnNativeWindow
                {
                    INativeWindow^ __clrcall get() sealed { return NativeWindow;}
                    void __clrcall set(INativeWindow^ value) { NativeWindow = dynamic_cast<CLINativeWindow^>(value);}
                } 
```

这里的问题是它`dynamic_cast`不起作用，属性的 getter 方法的隐式多态向下转换也不起作用。如果我没有被误导，我想我在几个地方读到了 C++ 中的*普通*指针，这样的错误确实有效。现在作为一个`SWF::NativeWindow`经典的 windows 窗体原生窗口类（对不起，无意的头韵），它应该有一个虚拟方法，就像接口一样，所以动态转换运算符没有问题，因为涉及到多态继承。我错了还是这在 dotNet C++ CLI 中完全不可能？

**编辑** 附加代码：

```
public ref class ExampleForSO
{
  CLINativeWindow^ NativeWindow;

 virtual property INativeWindow^ OwnNativeWindow
                    {
                        INativeWindow^ __clrcall get() sealed { return NativeWindow;}
                        void __clrcall set(INativeWindow^ value) { NativeWindow = dynamic_c

ast<CLINativeWindow^>(value);}
            }
} 
```

错误来自编译时，它们声明不能对 getter 和 setter 执行转换/强制转换（即不能从 B^ 转换为 A^ 和从 B^ 转换为 A^）.. **更新** 如果类在不同的文件中，在标头中实现该属性是行不通的。在单独的`.cpp`源文件中实现它不会再导致编译时错误，并且可以按需要工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:27:36.617

这里没有多重继承。你`CLINativeWindow`是从一个类继承的：`SWF::NativeWindow`，它也在实现`INativeWindow`接口。

您没有提供足够的信息（您遇到什么错误？可以粘贴到 VS 中以重现问题的示例代码？），但总的来说，您发布的代码没有任何问题。

我的猜测是您`NativeWindow`的声明为：

```
CLINativeWindow NativeWindow; 
```

没有急需`^`。尝试将其声明为：

```
CLINativeWindow^ NativeWindow; 
```

**编辑**

以下内容为我编译干净：

```
public interface class INativeWindow
{};

public ref class SWFNativeWindow
{};

public ref class CLINativeWindow : SWFNativeWindow, INativeWindow
{};

public ref class NWHolder
{
public:
    virtual property INativeWindow^ OwnNativeWindow
    {
        INativeWindow^ __clrcall get() sealed { return nativeWindow_; }
        void __clrcall set(INativeWindow^ w) { nativeWindow_ = dynamic_cast<CLINativeWindow^>(w); }
    }

private:
    CLINativeWindow^ nativeWindow_;
}; 
```

# xml - 如何从 XML 文件中读取版本元素值

> ID：11358657
> 
> 赞同：0
> 
> 时间：2012-07-06T08:33:18.780
> 
> 标签：xml, vb.net

我正在尝试读取 xml 文件的版本：

```
<Order xsi:schemaLocation="urn:schemas-basda-org:2000:purchaseOrder:xdr:3.01 order-v3.xsd urn:schemas-bossfed-co-uk:OP-Order-v1 OP-Order-v1.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:schemas-basda-org:2000:purchaseOrder:xdr:3.01">
  <OrderHead>
    <Schema>
      <Version>3.05</Version>
    </Schema>
    <Parameters>
      <Language>en-GB</Language>
      <DecimalSeparator>.</DecimalSeparator>
      <Precision>12.1</Precision>
    </Parameters>
    <OrderCurrency>
      <Currency Code="GBP">GB Pounds</Currency>
    </OrderCurrency>
  </OrderHead> 
```

我尝试使用的代码是：

```
Dim m_xmld As XmlDocument
Dim m_nodelist As XmlNodeList
Dim m_node As XmlNode

'Create the XML Document
m_xmld = New XmlDocument()

'Load the Xml file
m_xmld.Load(fileLocation)

'Show all data in your xml
MessageBox.Show(m_xmld.OuterXml)

'Get the list of name nodes
m_nodelist = m_xmld.SelectNodes("/Order/OrderHead/Schema")

For Each m_node In m_nodelist
    GetXmlVersion = m_node.Attributes.GetNamedItem("Version").Value
Next 
```

但是，它不会拉任何东西。

我将其更改为：

```
Public Shared Function GetXmlVersion (ByVal fileLocation As String) As String
    Dim m_xmld As XmlDocument = New XmlDocument()
    m_xmld.Load (fileLocation)
    GetXmlVersion = m_xmld.SelectSingleNode ("/Order/OrderHead/Schema/Version").InnerText
End Function 
```

我只是得到

NullReferenceException 是未处理的对象引用未设置为对象的实例。

因为 m_xmld.selectsinglenode 为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:51:06.480

您的第一个问题是您试图将 Version 作为属性而不是子元素读取。

第二个问题是您的 XML 文档有一个默认名称空间。这意味着即使没有元素明确指定命名空间前缀，它们实际上也属于`urn:schemas-basda-org:2000:purchaseOrder:xdr:3.01`命名空间。您可能知道，该`SelectSingleNode`方法使用 XPath 来查找匹配节点。您可能不知道，没有办法强制 XPath 使用默认名称空间。因此，您需要为属于任何命名空间的每个节点名称指定正确的命名空间。引用[Official XPath Specification](http://www.w3.org/TR/xpath/#node-tests)中的相关段落：

> 使用来自表达式上下文的命名空间声明将节点测试中的 QName 扩展为扩展名称。这与对开始和结束标记中的元素类型名称进行扩展的方式相同，只是不使用使用 xmlns 声明的默认命名空间：**如果 QName 没有前缀，则命名空间 URI 为空**（这是相同的方式属性名称被扩展）。如果 QName 具有在表达式上下文中没有名称空间声明的前缀，则这是一个错误。

因此，您需要执行以下操作：

```
Public Shared Function GetXmlVersion(ByVal fileLocation As String) As String
    Dim xmld As XmlDocument = New XmlDocument()
    xmld.Load(fileLocation)
    Dim manager As XmlNamespaceManager = New XmlNamespaceManager(xmld.NameTable)
    manager.AddNamespace("n", xmld.DocumentElement.NamespaceURI)
    Return xmld.SelectSingleNode("/n:Order/n:OrderHead/n:Schema/n:Version", manager).InnerText
End Function 
```

在此示例中，`xmld.DocumentElement.NamespaceURI`返回根元素 ( `urn:schemas-basda-org:2000:purchaseOrder:xdr:3.01`) 的默认命名空间 URI。我们为其分配前缀“n”，因此我们需要在 XPath 中的每个元素名称上放置一个“n:”前缀。

另外，您会注意到我将`GetXmlVersion =`行更改为`Return`. 使用`Return`关键字是 VB.NET 中的首选方法。另外，我将您的`m_xmld`变量名称更改为，`xmld`因为它令人困惑。通常，当人们在 VB 中为变量名称添加前缀时`m_`，表示它是类的私有字段（在类级别声明的私有变量，在任何方法之外）。这里情况不同。 `xmld`只是一个局部方法变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:01:22.853

版本是 Schema 的子元素，而不是属性。

# c++ - 基类“对象”，懒惰/聪明还是愚蠢？

> ID：11358663
> 
> 赞同：0
> 
> 时间：2012-07-06T08:33:41.913
> 
> 标签：c++, inheritance

我想知道的是：如果有一个基类，那么在 C++ 中，每个 * 其他类都继承自一个好主意。基本上，它和 C# 的 Object 具有相同的接口，即：

*除了直接接口和数据结构

```
class Object
{
public:
    virtual ~Object() {}
    virtual std::string toString() const = 0;
    virtual Object* copy() const = 0;
    virtual void release() = 0;
private:
    // This operator overload calls toString() to print it out to the stream.
    friend std::ostream& operator<<(std::ostream& output, const Object& object);
}; 
```

这是一件好事吗，或者如果我希望将类复制或转换为字符串，我最好只制作单独的接口。

例如

```
class Copyable
{
public:
    virtual ~Copyable() {}
    virtual Copyable* copy() const = 0;
}; 
```

我完全不确定这一点，而且它让我很头疼。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:40:54.597

我不会这样做的。您`Object`强制每个类都实现那些纯虚拟方法。如果你真的不需要它们怎么办？

C++ 具有多重继承，因此您可以为每个目的使用一个单独的类，并让派生类决定它们需要哪些特征。

拥有这些虚函数也会增加开销，因为它为每个类的每个实例添加了一个 vptr。可能不会产生可怕的影响，但它不是 C++ 精神 IMO。

最后，C# 和 Java`Object`有一些有用的方法，因为它们在运行时有更多关于类型的信息。这使得所有类型都有一个单一的根是合理的。一些 C++ 框架也有它（`CObject`我想到了 MFC），但是在那个级别提供有用的工具在 C++ 中并不是微不足道的。您必须做的不仅仅是提供纯虚拟方法 - 拥有单个根的主要好处是通过继承而不是多态性获得共享实现。以多态方式使用你`Object`只会破坏静态类型，在你的情况下，你甚至没有得到任何代码重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:35:55.583

C++ 没有针对所有对象的通用基类，主要是因为性能原因，尤其是因为 VMT（虚拟方法表）。VMT 是一个指针，存在于具有至少一个虚拟方法的每个对象中。C++ 的作者希望支持简单的对象（例如，主体由一个 int 组成）。这是有效和合理的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:40:57.840

很难给出一个万能的答案。

想想它会给你带来什么好处。
现在想想它会导致多少额外的工作，例如多重继承并发症等。

一般来说，这样做会比不做更多的工作，所以你需要确保它会给你带来实质性的好处，否则你就是在浪费时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:51:28.443

这仅在语言级别（如在 Java 中）强制执行时才有效。在 C++ 中，无论如何您都必须处理非对象对象。没有办法强制库从`Object`. 一旦你从 中实例化任何东西`std::`，你的代码中就会有一个非 Object 对象。

# c - C 套接字：服务器为 firefox 提供可下载的文件，而不是 firefox 显示页面

> ID：11358668
> 
> 赞同：1
> 
> 时间：2012-07-06T08:34:03.170
> 
> 标签：c, sockets, firefox, select, download

我正在创建一个简单的服务器，它只在端口 2222 处提供现有文件 /home/john/www。我的 www 文件夹包含三个文件：index.html、server.c、client.c。

运行服务器，我的 firefox 现在可以通过以下方式请求页面：

```
localhost:2222/server.c 
```

问题是，不是在我的 Firefox 上显示 server.c 的内容，而是下载文件。（firefox 提示查看或保存文件。）与 index.html 和 client.c 相同。

几天前，我能够在我的浏览器上显示 server.c 的内容。但我不再记得我为使浏览器表现得那样所做的更改。

这是我正在修改的代码片段：

```
#define LINE_LEN 128
#define MAX_LEN 1024
...
int process_request(int fd, char *www_path) {
    char cmessage[MAX_LEN];
    char *r;
    int n, read_size;
    FILE *file;
    char line[LINE_LEN];
    struct stat sb;
    if((n = read(fd, cmessage, MAX_LEN)) <= 0) {
        return 6;
    }
    cmessage[n] = '\0';
    // assume GET method
    r = cmessage + 4;
    n = 0;
    while(r[n] != ' ') {
        n++;
    }
    int len = strlen(www_path);
    char req_file[len+n+1];
    char temp[n+1];
    strncpy(temp, r, n);
    temp[n] = '\0';
    sprintf(req_file, "%s%s", www_path, temp);
    if(stat(req_file, &sb) == -1) {
        perror("stat");
        return 7;
    }
    char size[10];
    sprintf(size, "%d", sb.st_size);
    file = fopen(req_file, "rb");
    write(fd, "HTTP/1.1 200 OK\r\nContent-length: ", 33);
    write(fd, size, strlen(size));
    write(fd, "\r\n\r\n", 4);
    while((read_size = fread(line, sizeof(char), LINE_LEN, file)) != 0) {
        write(fd, line, read_size);
    }
    fclose(file);
    return 0;
} 
```

或者这只是可以在我的网络浏览器设置中设置的配置？

更多细节：

套接字是使用创建的

```
socket(AF_INET, SOCK_STREAM, 0); 
```

listen()、bind() 和 accept() 成功。select() 语句用于等待准备好读取的文件描述符。在对某个文件描述符的 read() 返回 -1 之前，连接的客户端的文件描述符不会关闭。

感谢您抽出时间来阅读。:-) 希望对为什么会发生这种情况有一个有用的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:40:10.790

作为服务器响应的一部分，您需要为浏览器提供适当的[内容类型。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17)这可能是您硬编码的内容，也可能是从文件名派生的内容。例如：

```
Content-Type: text/plain 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:41:09.073

您应该设置 Content Type 标头，以指定要发送的内容的 MIME 类型。浏览器按内容的类型处理内容。

如果浏览器无法识别内容类型，它会要求用户保存文件。

```
write(fd, "\r\nContent-Type: text/html"); 
```

MIME 类型取决于您发送的内容，对于 index.html，它应该是 text/html，对于 .c 文件，它可以是 text/plain

除此之外，我觉得代码逻辑中缺少以下内容：

*   Content-Length 是如何派生的
*   根据 HTTP 协议，内容在标头之后开始。要标记标题的结尾和内容的开始，您应该有 2 个新行条目 - 即内容和标题之间的空白行

# touchscreen - 如何开始对触摸屏液晶显示器进行编程？

> ID：11358670
> 
> 赞同：0
> 
> 时间：2012-07-06T08:34:17.263
> 
> 标签：touchscreen, kiosk

我们进行了一项关于使用不同平台执行不同程序的研究。我想到开发 Kiosk 或触摸屏显示器可能是我的选择之一。我的计划是开发一个餐厅的 3D 游览，它应该能够控制游览，用户可以使用触摸屏显示器进行游览..

什么是最好的编程语言？谁能告诉我我将如何开始这样做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:08:15.250

这是一个非常开放的问题，如果您以前没有任何经验，那么您所描述的是一个非常难以构建的东西。一般来说，如果您想获得最佳结果，我建议您联系具有此类系统构建经验的承包商。

不过，要回答您的问题：许多信息亭系统只运行 Adob​​e Flash Player，它[可以做一些基本的 3D](http://www.adobe.com/devnet/flashplayer/articles/3d-cameras.html)，但可能最专门为此用途构建的工具是[Adob​​e Director](http://www.adobe.com/products/director/)，它可以导入 3D 模型，通常用于制作休闲3D游戏。

以下是一些可帮助您开始使用 Director 3D 的链接：

*   [http://www.adobe.com/support/director/3d_basics.html](http://www.adobe.com/support/director/3d_basics.html)
*   [http://www.directorforum.com/showthread.php?t=645](http://www.directorforum.com/showthread.php?t=645)

如果您还没有以 3D 渲染餐厅，您可以使用[Trimble SketchUp](http://sketchup.google.com/)（以前的 Google SketchUp；Director 可以本地导入其输出）相对快速地构建一些东西。

# css - CSS继承坏了？

> ID：11358671
> 
> 赞同：0
> 
> 时间：2012-07-06T08:34:20.940
> 
> 标签：css, list, inheritance, nested

我有嵌套列表，其中包含 li 标签内的链接。在嵌套级别 x 我想更改链接的外观。只是一些示例代码：

CSS：

```
.blue a { color: blue; }
.red a { color: red; } 
```

HTML：

```
 <ul>
    <li class="blue"><a href="#">blue-1</a></li>
    <li class="red"><a href="#">red-1</a></li>
    <li class="blue"><a href="#">blue-2</a>
        <ul>
            <li>
                <a href="#">blue-3</a>
                <ul>
                    <li class="red">
                        <a href="#">red-2</a>
                        <ul>
                            <li><a href="#">red-3</a></li>
                            <li><a href="#">red-4</a></li>
                        </ul>
                    </li>
                    <li><a href="#">blue-4</a></li>
                </ul>
            </li>
            <li class=""><a href="#">blue-5</a></li>
        </ul>
    </li>
    <li class="red"><a href="#">red-5</a>
        <ul>
            <li><a href="#">red-6</a></li>
            <li><a href="#">red-7</a></li>
        </ul>
    </li>
</ul> 
```

以这种方式，它按预期工作。带有文本 red-* 的链接为红色。但是当我更改 CSS 类的顺序时，它不再起作用：

```
.red a { color: red; }
.blue a { color: blue; } 
```

为什么会有这种行为？不应该一样吗？我必须使用比红色和蓝色更多的颜色，所以不可能在 CSS 中给出正确的顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:48:12.057

Css 选择器的优先级是根据它的具体程度来设置的：

*   每个**标签**计为**1**分
*   每**节课****10**分_
*   事件**ID**为**100**分

您获得的两个选择器具有相同的优先级，因此在代码中进一步设置的选择器会覆盖之前的选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:43:25.397

这样做的原因是，在您的 css 中，您告诉**每个** `a`标签是子、孙子等名为`blue`. 当你告诉`a`类的每个子标签、孙子标签等元素都`red`应该是红色时，这就会被覆盖。

所以不要这样做（影响所有链接标签）

```
.blue a { color: blue; }
.red a { color: red; } 
```

你可以这样做（如果它是一个链接标签，只影响第一个孩子）：

```
.red > a,
.red > ul > li > a{ color: red; }
.blue > a,
.blue > ul > li > a { color: blue; } 
```

第二行的作用是查找所有具有类名的元素`red`。然后它找到所有直接子`ul`元素。在那些匹配的元素下，它会找到所有具有直接子元素`li`的直接子`a`元素。匹配这些，它最终添加了样式。

**JSFiddle：http:**
[//jsfiddle.net/Y9jFr/](http://jsfiddle.net/Y9jFr/)

# jquery - 如何更改 HTML 标签的样式属性？

> ID：11358682
> 
> 赞同：3
> 
> 时间：2012-07-06T08:35:20.960
> 
> 标签：jquery, html, tags

考虑以下标签：

```
<div class="my_class" style="width: 453px; height: 604px;">
    // stuff
</div> 
```

我想将其更改为：

```
<div class="my_class" style="height: 453px; width: 604px;">
    // stuff
</div> 
```

我需要使用 jquery 来执行此操作，而且我不一定知道`height`and的值`width`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:37:45.317

尝试：

```
var cls = $(".my_class"); 
var h = cls.height();
var w = cls.width();
cls.css({"width":h,"height":w}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:40:31.070

这也将处理您想要一次对多个元素执行此操作的情况：

```
$('.my_class').each(function(){
    var $this = $(this);
    var oldWidth  = $this.css('width'),
        oldHeight = $this.css('height');
    $this.css({
        width: oldHeight,
        height: oldWidth
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T08:39:22.583

要交换宽度和高度：

```
 $('.my_class').css({
        width: $(this).height(),
        height: $(this).width()
    }); 
```

[jsFiddle 示例](http://jsfiddle.net/qSHLV/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T08:53:35.367

我认为这是最简单/最好的方法。

[http://jsfiddle.net/rp9jx/1/](http://jsfiddle.net/rp9jx/1/)

```
$('.my_class').removeAttr("style").attr({
  style: "height: 453px; width: 604px;"
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T08:53:08.927

试试这个：

```
 $(function() {
     var Width  = $this.css('width'),
     height = $this.css('height');
     $(".my_class").width(width).height(height);
     }); 
```

或者

```
 $(document).ready(function() {
     var Width  = $this.css('width'),
     height = $this.css('height');
     $(".my_class").width(604).height(height);
     }) ; 
```

# eclipse - Eclipse RCP - 究竟什么是无头构建？

> ID：11358685
> 
> 赞同：6
> 
> 时间：2012-07-06T08:35:27.803
> 
> 标签：eclipse, eclipse-rcp, headless

在 Eclipse RCP 项目中，我听说过“无头构建”。

*   什么是无头构建？
*   什么是 Eclipse RCP 的无头构建？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T09:49:12.447

无头构建意味着您可以在不启动 Eclipse 的图形用户界面的情况下运行构建。为此，您有一个构建脚本（如果是无头 Eclipse，它是一个 Ant 脚本 AFAIK），您可以通过命令行启动它，因此可以在没有图形界面的服务器上启动构建。Lars Vogel 对此有一个很好的[教程](http://www.vogella.com/articles/EclipsePDEBuild/article.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-16T09:56:15.190

Christian Pontesegger 有一个简短但很好的教程，如何创建一个简单的无头 Eclipse RCP 应用程序：[http ://codeandme.blogspot.de/2012/02/creating-headless-application.html](http://codeandme.blogspot.de/2012/02/creating-headless-application.html)

# qt - QTreeWidgetItem 中的格式化文本

> ID：11358688
> 
> 赞同：3
> 
> 时间：2012-07-06T08:35:30.900
> 
> 标签：qt, qtreewidgetitem, formatted

我需要创建支持格式化文本的 QTreeWidgetItems，例如：

MyCreatedType -**`INTEGER(1)`**

（即：上面的行应该有一个“正常”部分：MyCreatedType 和一个“格式化”部分（**`INTEGER(1)`**在我们的例子中）。

知道如何做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T19:13:12.477

你需要的是一个代表。代表在这里解释：

*   **明星代表示例** [http://qt-project.org/doc/qt-4.8/itemviews-stardelegate.html](http://qt-project.org/doc/qt-4.8/itemviews-stardelegate.html)
*   **QItemDelegate 参考** [http://qt-project.org/doc/qt-4.8/qitemdelegate.html](http://qt-project.org/doc/qt-4.8/qitemdelegate.html)

我在创建和使用自定义委托时遵循的一般过程：

1.  使用要封装的信息创建自定义类型。
    *   对于您的情况，可能是变量类型名称和类型值的字段。
2.  将这些自定义类型存储在您的模型中，将它们包装在 QVariants 中以满足 QAbstractItemModel 所需的返回类型
3.  创建一个与您想要的 UI 匹配的控件。
    *   在这种情况下，它可能意味着“MyCreatedType”的 QText 标签，然后是“Integer(1)”的第二个粗体标签。
    *   也许该控件具有“setTypeName”和“setTypeValue”之类的方法
4.  创建一个委托，在找到您的自定义类型时绘制您的特定控件。
    *   您必须根据需要将自定义类型中的字段映射到自定义 UI 控件中的字段。
5.  将您的模型和委托与您正在使用的树视图相关联。

我希望这个一般程序是有意义的。我建议先完成 Star Delegate Example，然后阅读我的程序，因为有了一些背景知识会更有意义。

# php - PHP 的 mt_rand 是如何播种的？

> ID：11358691
> 
> 赞同：14
> 
> 时间：2012-07-06T08:35:45.597
> 
> 标签：php, security, random, mersenne-twister

我知道 PHP`mt_rand()`不应该用于安全目的，因为它的结果在密码学上并不强。然而，很多 PHP 代码就是这样做的，或者在没有更好的随机性来源时将其用作后备。

那么它有多糟糕呢？`mt_rand`播种使用哪些随机性来源？`mt_rand`加密应用程序是否存在其他安全问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T08:44:43.910

在 PHP 5.4 中， if`mt_rand`在第一次使用时自动播种（[PHP 源代码](http://lxr.php.net/xref/PHP_5_4/ext/standard/rand.c#309)）。[种子值](http://lxr.php.net/xref/PHP_5_4/ext/standard/php_rand.h#46)是当前时间戳、PHP 进程 PID 和 PHP 内部[LCG](http://en.wikipedia.org/wiki/Linear_congruential_generator)生成的值的函数。我没有检查以前版本的 PHP 的源代码，但[文档](http://php.net/manual/en/function.mt-srand.php)暗示这个种子算法从 PHP 5.2.1 开始就已经在使用了。

后面的 RNG 算法`mt_rand`是[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)。谈论“有多糟糕”并没有真正的意义，因为它已明确记录（不幸的是，不是在 PHP 文档页面上）它**完全不适合加密应用程序**。如果您想要加密强度随机性，请使用记录在案的加密强度生成器。

**更新：**您可能还想从 crypto.SE中查看[这个问题。](https://crypto.stackexchange.com/questions/2231/cryptographic-security-of-php-mt-rand-function-using-mersenne-twister-algo)

# javascript - 从第二行缩进一段文本

> ID：11358698
> 
> 赞同：3
> 
> 时间：2012-07-06T08:36:02.733
> 
> 标签：javascript, jquery, html, css, layout

我想格式化我的文本：

`title - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec et turpis urna. Phasellus magna elit, tempus ut accumsan posuere, suscipit vel ligula. Vestibulum mauris massa, venenatis non dignissim vestibulum,`

看起来像：

```
title - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec et turpis  urna.
        Phasellus magna elit, tempus ut accumsan posuere, suscipit vel ligula. Vestibulum
        mauris massa, venenatis non dignissim vestibulum, 
```

我对任何解决方案都很感兴趣，无需手动添加更改文本。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:38:13.213

一个快速而肮脏的解决方案：

```
<pre>
    <!-- your text stuff -->
</pre> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:47:32.097

**HTML**

```
<div class="title">title</div>
<div class="text">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec et turpis  urna. Phasellus magna elit, tempus ut accumsan posuere, suscipit vel ligula. Vestibulum mauris massa, venenatis non dignissim vestibulum, 
</div>​ 
```

**CSS**

```
​.title { float: left; }
.title:after { content: '-'; display: inline-block; margin: 0 5px; }
.text { overflow: hidden; }​ 
```

[jsFiddle 演示](http://jsfiddle.net/ApUQd/)

标题向左浮动，`overflow: hidden;`用于[建立新的块格式化上下文](https://stackoverflow.com/questions/6128139/can-overflowhidden-affect-layout/6128264#6128264)。您可以使用`overflow`除默认值之外的任何值来执行此操作`visible`。

唯一不是绝对跨浏览器的是`:after`伪元素（[适用于 IE8](http://www.quirksmode.org/css/contents.html#t15)`-` ），但您可以在 HTML中简单地使用静态元素。我选择这样做是因为它更干净并且标记中没有不必要的样式。

对于标题，您可以使用更符合语义的内容，例如适当的标题（`h1`、`h2`等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:53:35.530

`margin`与伪类`text-indent`一起玩，`:first-line`你可以达到预期的效果：这里是相关的 CSS

```
p { text-indent: -2.35em ; margin-left: 2.35em  }
p:first-line { margin-left: -2.35em } 
```

小提琴示例：http: [//jsfiddle.net/nb88K/](http://jsfiddle.net/nb88K/)

请注意，选择的值严格取决于`"title"`字的宽度。

作为旁注，如果您可以更改标记本身，我会建议将该词从您的文本移动到伪类的`content`属性`:before`- 从语义的角度来看，您的文本是标题这一事实应该通过元素的选择（所以我会选择一个`<hn>`标签）

# asp.net-mvc-3 - 添加 POCO 实体

> ID：11358699
> 
> 赞同：0
> 
> 时间：2012-07-06T08:36:08.190
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, aop, poco, t4

我有一个带有 context.tt 和 .tt 文件的 EDMX 文件。我在 .tt 文件下有 POCO 类。

我还有一个带有 POCO 文件的 EDMX。

我想将一些 POCO 类从 2nd EDMX 复制到 1st EDMX。

请记住，两个 EDMX 中的表格是不同的。

只是想知道是否可以将一个 POCO 类从 EDMX 和 .tt 文件复制到另一个。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:18:48.700

解决方案很简单。更改 EDMX 文件的连接字符串。

在我的情况下，我必须为相同的存储过程创建 2 个函数导入，每个都指向不同的数据库。

因此，我通过在模型浏览器中单击存储过程创建了一个新的函数导入。

在函数导入中，我们可以选择创建复杂类型。我需要创建一个新的 Complex 类型，因为存储过程中使用的一个表具有不同的列。

创建函数导入后，只需关闭模型浏览器并构建解决方案。

IDE 将提示输入文件名，并将创建新的 context.tt 和 .tt 文件。只需将新的 POCO 实体复制到现有的 .tt 文件即可。

现在我们有 2 个函数导入和 2 个 POCO 实体。现在我们可以指向数据库中的任何一个，一切都会奏效。

希望对陷入类似情况的任何人有所帮助。

# nhibernate - NHibernate：为什么是 field.camelcase？

> ID：11358700
> 
> 赞同：4
> 
> 时间：2012-07-06T08:36:09.517
> 
> 标签：nhibernate, nhibernate-mapping, camelcasing

谁能告诉我为什么在 NHibernate 映射中我们可以设置`access="field.camelcase"`，因为我们有`access="field"`and `access="property"`？

编辑：我的问题是“为什么我们可以这样做”，而不是“这是什么意思”。我认为这可能是开发人员的错误来源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:46:53.407

我猜你想知道当我们可以对 field 做同样的事情时 field.camelcase 有什么用？这是真的，但是当例如编写查询或从其他映射中引用属性时，这会给 (NH) 属性提供不直观的名称。

假设您有想要使用该字段映射的内容，例如

```
private string _name;
public string Name { get { return _name; } } 
```

您当然可以使用“字段”映射字段，但是在编写 HQL 查询时，您必须编写“_name”。

```
select a from Foo a where a._name = ... 
```

如果您改为使用 field.camelcase 数据，则相同的查询看起来像

```
select a from Foo a where a.Name... 
```

**编辑** 我现在看到你写了“field.camelcase”，但我的回答是关于“field.camelcase-underscore”。原理是一样的，我想你明白了；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:40:18.300

'.' 之后的部分 就是所谓的**命名策略**，当你写在 hbm 中的名称与支持字段不同时，你应该指定它。如果`field.camelcase`你被允许写`CustomerName`在 hbm 中，NHibernate 会在类中寻找一个有名字的字段`customerName`。这样做的原因是 NHibernate 不会强迫您选择符合标准的命名约定，NH 将适用于几乎任何命名约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:54:16.490

在某些情况下，属性不适合 NH 设置值。

他们可能会

*   根本没有二传手
*   对设置的数据调用验证，从数据库加载时不使用
*   做一些仅在业务逻辑更改值时才使用的其他东西（例如，设置其他属性）
*   以某种方式转换值，这会导致 NH 执行不必要的更新。

然后你不希望 NH 调用属性设置器。您仍然映射属性，而不是映射字段，但告诉 NH 在读取/写入值时使用该字段。[Roger](https://stackoverflow.com/a/11358866/27343)很好地解释了为什么映射属性是一件好事。

# java - 替换java中的某些固定字符串

> ID：11358701
> 
> 赞同：0
> 
> 时间：2012-07-06T08:36:16.160
> 
> 标签：java, string, replace

我有一个看起来像这样的字符串查询

> {"query":{"bool":{"should":[{"terms":{"user.id":[#users_to_follow],"minimum_match":1}},{"terms":{"tweets" :[#keywords_to_track],"minimum_match":1}}]}},"filter":{"range":{"publishedDate":{"from":#Unix_timestamp}}},"size":#sizelength}"

我正在尝试使用另一个字符串替换查询中的某些字符串：

```
query.replace("#users_to_follow",usersToFollow);
query.replace("#keywords_to_track", keyworsToTrack);
query.replace("#Unix_timestamp","1325930428000" );
query.replace("#sizelength",Integer.toString(SMLApplicationProperties.ES_RESULTSET_SIZE)); 
```

但是，当我运行这个东西时，它实际上并没有从查询中替换给定的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:39:40.290

您需要了解 String 类是不可变的。对 String 的任何操作都会返回一个新的 String。您需要将其分配回查询变量：

```
query = query.replace("#users_to_follow",usersToFollow); 
query = query.replace("#keywords_to_track", keyworsToTrack); 
query = query.replace("#Unix_timestamp","1325930428000" ); 
query = query.replace("#sizelength",Integer.toString(SMLApplicationProperties.ES_RESULTSET_SIZE)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:38:33.740

你需要得到`replace`操作的结果：

```
query = query.replace("#users_to_follow",usersToFollow); 
```

那是因为`query.replace`不会更改您传递的字符串，它会构建并返回一个新字符串（Java 中的字符串是不可变的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:49:07.587

You can optimize (not accepted by everybody) :

```
String query = query.replace("#users_to_follow",usersToFollow).replace("#keywords_to_track", keyworsToTrack).replace("#Unix_timestamp","1325930428000" ).replace("#sizelength",Integer.toString(SMLApplicationProperties.ES_RESULTSET_SIZE)); 
```

# node.js - NodeJS - 访问不同模块中的变量

> ID：11358702
> 
> 赞同：3
> 
> 时间：2012-07-06T08:36:18.630
> 
> 标签：node.js, variables, module

我正在编写一个基于 mudule express 的 NodeJS 应用程序。以下是我的 app.js 的重要部分：

```
var express = require('express')
  , routes = require('./routes')
  , passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy;
var app = module.exports = express.createServer();
var ab = 'this is a test!';

// Configuration
app.configure(function(){
  ...

// Routes
app.get('/', routes.index);

app.listen(3000); 
```

Routes.index - 是一个控制器，在请求“/”时执行。这是代码：

```
exports.index = function(req, res){

   passport.serializeUser(function(user, done) {
       done(null, user.id);
    });

    ...

  res.render('index.ejs', {
      title: ab
  })
}; 
```

从技术上讲，index.js - 是单独的文件，位于“/routes”文件夹中。所以，当我启动我的应用程序时，它崩溃了，因为找不到护照变量，在主应用程序中声明。此外，ab 也找不到，但是它被声明了。如果我在 index.js 中重新声明变量，JS 将为我创建新对象。如何在我的应用程序的每个模块中使用我的变量？我浏览了一些关于 SO 的主题，但无法理解 - 这是一个常见问题还是我的应用程序的结构错误？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:06:19.480

正如您所发现的，在一个模块中声明的变量不会神奇地出现在其他模块中。当涉及到诸如护照之类的模块时，通常人们只是在需要它们的地方再次要求它们，因此：

应用程序.js：

```
var passport = require('passport'),
    index = require('./routes/index'); 
```

index.js：

```
var passport = require('passport'); 
```

有时你想传递参数——我经常这样做是为了进行单元测试，如果我可以传递依赖项，我也可以模拟这些依赖项。或者您有一个要传递的应用程序范围的配置。我通常这样做：

应用程序.js：

```
var ab = "foo",
    index = require('/routes/index')(ab); 
```

index.js：

```
module.exports = function(ab) {
    // Here I have access to ab and can to what I need to do

    return {
        index: function(req, res) { res.send(ab) }
    }
} 
```

其他人更喜欢“单例”模式，每次需要模块时，检查它是否已经初始化，如果是，则传递该实例。

# delphi - DateTimeTostr 异常错误

> ID：11358706
> 
> 赞同：2
> 
> 时间：2012-07-06T08:36:35.433
> 
> 标签：delphi, delphi-7

我在 Delphi 7 下用该函数的返回值填充了一个 TStringList：

```
function  dateTime2str(td : TDateTime) : string;
var
  iformatsettings : tformatsettings;
begin
  GetLocaleFormatSettings(LOCALE_USER_DEFAULT, iformatsettings);

  result := DateTimeToStr(td, iFormatSettings);
end; 
```

然后我使用该函数读取 TStringList 的每个值：

```
function str2DateTime(s : string) : TDateTime;
var
  iformatsettings : tformatsettings;
begin

  GetLocaleFormatSettings(LOCALE_USER_DEFAULT, iformatsettings);

  result := strtodatetime(s,iFormatSettings);

end; 
```

但它会触发 EConvertError 异常： **“6/7/12 3:02:31 AM”不是有效的日期和时间。**

为什么 ？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:43:53.377

通过使用 FormatDateTime 您知道日期和时间的确切格式，因此当您检索它时，它将完全相同，而不是取决于语言环境配置。

如果第一个功能在一台计算机上运行，​​而第二个功能在另一台计算机上运行，​​则使用第一种方法仍然会遇到问题。

# .net - .NET 服务中的 SQL 超时

> ID：11358707
> 
> 赞同：0
> 
> 时间：2012-07-06T08:36:35.973
> 
> 标签：.net, sql, timeout

我有一个非常简单的服务，它一直在早期工作，但现在我将它升级到更新的 .NET 版本，它已经停止工作，出现如下错误消息：

> 超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。

我试图执行服务尝试运行的存储过程，并在 ms sql server management studio 中直接运行它需要不到 1 秒，所以我不明白可能是什么问题？使用相同数据库的客户端（虽然不是相同的存储过程）在同时使用它们时没有任何超时问题。

编辑所以你可以看到代码：

这在服务启动时调用：

```
Private Sub SetupGetBatch1Command()
    GetBatch1Command = New System.Data.SqlClient.SqlCommand("spgetTheData1")
    GetBatch1Command.CommandType = Data.CommandType.StoredProcedure
End Sub 
```

这有时间间隔：

```
Private Function GetBatch1() As DataSet
    Dim dataset As New DataSet
    Dim adapter As Data.SqlClient.SqlDataAdapter
    Dim cn As New System.Data.SqlClient.SqlConnection(connectionstring())
    GetBatch1Command.Connection = cn
    adapter = New Data.SqlClient.SqlDataAdapter(GetBatch1Command)
    adapter.Fill(dataset)
    Return dataset
End Function 
```

我没有这样做，也不太了解它，但我想我至少应该遵循以下建议并在某处添加 cn.dispose() ？

还有其他类似的数据库连接，都以与上面示例完全相同的方式完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:43:52.553

这几乎总是由于未能处置/关闭连接对象造成的。仔细检查您的代码并确保您的所有`SqlConnection`对象都已处理，最好使用以下`using`语句：

```
using (SqlConnection c = new SqlConnection(...))
{
    // use the connection...
    ...
} // c.Dispose() will be called automatically here, even if an exception is thrown. 
```

我怀疑升级到新的 .NET 版本是一个红鲱鱼，或者只是间接导致问题：例如，您可能会遇到以前没有遇到的异常，并且您的代码可能无法处理/关闭抛出异常时正确连接。

# enums - Nlog 枚举转整数

> ID：11358712
> 
> 赞同：2
> 
> 时间：2012-07-06T08:36:56.520
> 
> 标签：enums, nlog

我正在使用 NLog 并将事件记录到 SQL 服务器。记录的字段之一是日志级别，它记录为字符串、“信息”、“警告”等。我还想将级别记录为整数值，以便在查看日志事件时提供更好的排序图形用户界面。

是否可以在不编写自定义布局渲染器的情况下将枚举转换为整数以插入数据库？

将级别作为字符串记录到数据库中的配置行是

```
<parameter name="@Level" layout="${level}"/> 
```

理想情况下，可能会转换为整数，例如；

```
<parameter name="@LevelId" layout="${level:format=tointeger}"/> 
```

很像有一个`format=tostring`转换器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-20T00:01:34.290

另一种选择是在插入语句中将字符串转换为整数，如下所示：

```
<target name="database" xsi:type="Database" connectionStringName="MyConnectionStringName" useTransactions="true">
  <commandText>
    <![CDATA[
    INSERT INTO [dbo].LogEvent
      (Time,
       LogLevel,
       Title,
       Message,
       ExceptionDetails)
    VALUES
      (@Time,
       CASE @Level
       WHEN 'Trace' THEN 0
       WHEN 'Debug' THEN 1
       WHEN 'Info' THEN 2
       WHEN 'Warn' THEN 3
       WHEN 'Error' THEN 4
       WHEN 'Fatal' THEN 5
       ELSE NULL
       END,
       @Title,
       @Message,
       @ExceptionDetails)
    ]]>
  </commandText>
  <parameter name="@Time" layout="${date:format=yyyy-MM-dd HH\:mm\:ss.fff}" />
  <parameter name="@Level" layout="${level}" />
  <parameter name="@Title" layout="${ndc}" />
  <parameter name="@Message" layout="${message}" />
  <parameter name="@ExceptionDetails" layout="${exception:format=tostring}" />
</target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:24:39.773

这是我为此目的编写的自定义 LayoutRenderer。我是针对 NLog 1.0 编写的，因此它可能不完全遵守 LayoutRenderer 的 NLog 2.0 约定（例如，我认为不再使用 GetEstimatedBufferSize）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NLog;
using NLog.LayoutRenderers;

namespace NLog.Extensions
{
  [LayoutRenderer("LogLevelOrdinal")]
  class LogLevelOrdinalLayoutRenderer : LayoutRenderer
  {
    IDictionary<LogLevel, int> ordinals;

    public override void  Initialize()
    {
      base.Initialize();

      ordinals = GetLogLevels()
                  .OrderBy(level => level)
                  .Select((level, index) => new { Level = level, Ordinal = index })
                  .ToDictionary( x => x.Level, x => x.Ordinal);
    }

    protected override void Append(StringBuilder builder, LogEventInfo logEvent)
    {
      int level = 0;

      if (!ordinals.TryGetValue(logEvent.Level, out level)) level = 99;

      builder.Append(level);
    }

    protected override int GetEstimatedBufferSize(LogEventInfo logEvent)
    {
      return 1;
    }

    //
    // LogLevel is a static class with a static member for each of the different log levels.
    // The LogLevel ordinal is not exposed publically (i.e. an ordinal indicating the relative
    // "importance" of a LogLevel value).
    // The implementation of LogLevel.GetHashCode actually does return the ordinal, but it doesn't
    // seem right to rely on that implementation detail.
    // In the end, this LayoutRenderer is really just to allow for producing a numeric value to represent
    // a particular log level value's "position" relative to the other lob levels.  As such, 
    // We can just get all of the known log level values, order them (they are sortable), and assign our
    // own ordinal based on the position of the log level value in the resulting sorted list.
    //
    // This helper function exposes the known log level values as IEnumerable<LogLevel> so that we can
    // easily use LINQ to build a dictionary to map LogLevel to ordinal.
    //
    internal IEnumerable<LogLevel> GetLogLevels()
    {
      yield return LogLevel.Trace;
      yield return LogLevel.Debug;
      yield return LogLevel.Info;
      yield return LogLevel.Warn;
      yield return LogLevel.Error;
      yield return LogLevel.Fatal;
    }

  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-19T13:13:39.903

试试这个布局渲染器。这很简单）

```
public class NlogLevelToIntLayoutRenderer : LayoutRenderer
{
    protected override void Append(StringBuilder builder, LogEventInfo logEvent)
    {
        builder.Append(logEvent.Level.Ordinal);
    }
} 
```

# windows-phone-7 - 在按钮上方显示键盘

> ID：11358713
> 
> 赞同：2
> 
> 时间：2012-07-06T08:36:59.300
> 
> 标签：windows-phone-7, keyboard

在windows phone 7中，设置->邮箱+账户->创建账户，屏幕下方有“上一个”和“登录”两个按钮。软键盘不与这些按钮重叠。我想在我的应用程序中实现类似的功能。我在页面底部有两个按钮，但由于软键盘，这些按钮被隐藏了。有什么办法可以在按钮上方显示键盘，而应用程序栏按钮不起作用。您能否建议一种方法可以为此做些什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:38:14.747

这是不可能的。开发人员（第 3 方.. 非合作伙伴）可用的机制仅使用 AppBar 按钮。

默认的 WP 代码不使用 SDK 中可用的控件。相反，SDK 和其他控件尝试复制使用的本机控件的功能/行为

# java - 如何在java中测试网页？

> ID：11358716
> 
> 赞同：0
> 
> 时间：2012-07-06T08:37:05.217
> 
> 标签：java, selenium, webtest

我必须测试网页的内容。我的导师说要使用 selenium 。我查找并发现它是用于测试的工具，并认为可以。我尝试了 Selenium IDE，发现它在 Web 浏览器中重复了我们的操作。但无法理解如何将其用作测试仪。

ToDo ：在网页的 HTML 源代码中搜索一些字符串，如果它们在源代码中，则认为该页面正常。

怎么做 ？: 我有网页的链接和源代码，可以在里面进行字符串搜索。我需要用硒来做吗？如果是，如何？

如果这个问题听起来很愚蠢，请多多包涵。我对 selenium 很陌生。

PS：我必须在 Java 中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:48:51.447

我相信这个页面会帮助你开始使用 selenium。 [http://code.google.com/p/selenium/wiki/GettingStarted](http://code.google.com/p/selenium/wiki/GettingStarted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:15:28.870

我还推荐[http://code.google.com/p/selenium/wiki/GettingStarted](http://code.google.com/p/selenium/wiki/GettingStarted)

对于您的测试，请尝试遵循 Arrange、Act、Assert 模型。这有助于使我的测试更容易设置。

**将页面排列**到所需的测试状态。您可以使用过去的测试来执行此操作，例如 Login、GoToMenuItem、GoToSecondMenuItem。

**通过查找您要查找的文本并在网站上执行操作来采取行动**。**如果您不需要执行操作，那么您实际上不需要担心这一步。**

 ****通过检查页面上仍然存在的文本元素来**断言。**您可以使用 findElement(By.locater)**

 **如果您使用 Java，您可以尝试使用 JUnit，因为它使测试更易于组织。以下是有关将 JUnit 与 Selenium 结合使用的一些信息[http://www.codeproject.com/Articles/143430/Test-your-web-application-s-UI-with-JUnit-and-Sele](http://www.codeproject.com/Articles/143430/Test-your-web-application-s-UI-with-JUnit-and-Sele)****

# iphone - 如何从 iPhone 获取音频文件 URL 到我的应用程序以使用该音频

> ID：11358717
> 
> 赞同：0
> 
> 时间：2012-07-06T08:37:10.403
> 
> 标签：iphone, ios5, xcode4.2, media-player

我需要访问 iPhone 音乐库以获取可以在应用程序中使用的歌曲。如何才能做到这一点？关于使用什么框架的任何有用建议或可以提供帮助的教程？

另外，我需要它能够与 AVAudioPlayer 一起使用。我需要应用程序将手机中歌曲的 URL 返回给播放器函数。（需要 AVAudioPlayer 中的函数来做音频可视化器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:40:16.047

请在[此处参考苹果文档](https://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html)

# asp.net - oracle 中是否有任何事件驱动技术可与 asp.net 一起使用？

> ID：11358718
> 
> 赞同：0
> 
> 时间：2012-07-06T08:37:12.527
> 
> 标签：asp.net, oracle, events, web

oracle 中是否有任何事件驱动技术可以与 asp.net 一起使用，它应该能够实时显示数据？

我的要求很简单，但可能很棘手..

我有一个 Oracle 数据库，其中包含不时变化的不同地方的天气数据。我需要开发一个 Web 应用程序来实时查看来自 oracle 的这些数据，这意味着一旦数据库中的记录更新，新值应该立即在网页上可见。

为此，应在更新记录时执行 select 语句。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:08:03.290

是的，使用 oracle 数据库更改通知功能。为此，您必须使用 ODP.Net。阅读有关如何使用它的[文档。](http://docs.oracle.com/cd/E20434_01/doc/win.112/e23174/OracleDependencyClass.htm)这将允许从 Oracle 到您的 ASP.Net 应用程序的通知。[这里](http://docs.oracle.com/cd/E20434_01/doc/win.112/e23174/featChange.htm#CJAGGGHA)
也证明了一个例子。

另一部分是在浏览器和服务器之间设置推送通知。如果您可以使用 ASP.Net 4.5，则可以使用[Web 套接字。](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097383)然而，只有 IE 10 将支持 Web 套接字，但 Firefox 和 chrome 已经支持。还有其他实现，例如[superwebsockets](http://superwebsocket.codeplex.com/)。我没有使用过这个，但[SignalR](http://signalr.net/)库值得一试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T09:15:55.923

不，唯一的方法是在一定的时间间隔轮询数据库。

# java - 在构造函数中初始化静态变量

> ID：11358722
> 
> 赞同：0
> 
> 时间：2012-07-06T08:37:18.217
> 
> 标签：java, singleton

看下面的代码：

```
public class Foo {
    private static Foo sigleton=new Foo();
    private static int count1;
    private static int count2=0;

    private Foo (){
        count1++;
        count2++;
    }

    public static Foo getInstance(){
        return sigleton;
    }

    public static void main(String[] args) {
        //Foo f= Foo.getInstance(); // case 1
        //Foo f= new Foo(); // case 2
        System.out.println(f.count1);
        System.out.println(f.count2);
    } 
} 
```

对于每次运行，取消注释 main 方法中的一行。

为什么情况 1 和 2 的输出不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T08:40:05.103

仅仅因为在第一种情况下，`Foo`构造了一个对象，而在第二种情况下，`Foo`构造了两个对象。

您静态地初始化`sigleton`字段 - 因此当加载类时，`Foo`始终调用构造函数（如您为字段初始化程序指定的那样）。

现在在案例 1 中，您只是调用一个*方法*，它返回`sigleton`已经构造的对象 - 因此不再调用构造函数。在情况 2 中，您显式构造了一个新`Foo`对象 - 但`sigleton`仍将构造该对象。因此，在后一种情况下，创建了两个对象，构造函数总共运行了两次，因此`count1`将`count2`是一个更大的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:48:10.853

比你的问题更有趣的是`count1 == count2 + 1`.

原因是静态声明是按照编译器找到它们的顺序运行的，所以第一次调用 Foo 会调用以下语句：

```
private static Foo sigleton = null; //default value for objects
private static int count1 = 0; //default value for int
private static int count2 = 0; //default value for int

sigleton = new Foo(); //first static initializer => count1 = 1 AND count2 = 1
count2 = 0; //second static initializer 
```

从那时起， count1 和 count2 一起递增，您将始终拥有`count1 == count2 + 1`.

底线：不要写那种代码！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:29:49.547

Java 将首先将静态变量初始化为默认值（null、0 和等效值）。无论是否指定了初始值，都会执行此操作。

然后它将运行从类的开头到底部的所有静态代码**块（不是静态方法！）。**初始化也被认为是代码块，它按照文件中指定的顺序运行。因此，这样的代码：

```
// static block of code in front

static Type variable = initialValue;

// static block of code in-between

static OtherType anotherVariable = someInitialValue;

// static block of code below 
```

大致相当于（大致 - 因为它们在语法上不等价）

```
static Type variable;
static OtherType anotherVariable;

// static block of code in front

static {
    variable = initialValue;
}

// static block of code in-between

static {
    anotherVariable = someInitialValue;
}

// static block of code below 
```

（就在对构造函数的任何调用之前，所有非静态代码**块**都将在调用构造函数之前运行。不过，它与 OP 的代码段不是很相关。）

从上面的方案中，`Foo()`将调用构造函数。并且将被初始化为 1 `count1`。`count2`

执行完`singleton = new Foo()`初始化器后，会继续执行初始化`count2 = 0`，并有效设置`count2`为0。

此时，我们将进入`main()`函数，并打印出来。如果构造函数被第二次调用，如上所述，非静态代码块将在构造函数之前运行，然后再次调用构造函数以将 和 的值加`count1`1。`count2`这一步没有什么奇怪的事情发生。

可以尝试编译运行这段代码看看效果：

```
class Foo {
    static {
      System.out.println("static 0: " + Foo.sigleton + " " + Foo.sigleton.count1 + " " + Foo.sigleton.count2);
    }

    private static Foo sigleton=new Foo();

    static {
      System.out.println("static 1: " + sigleton + " " + sigleton.count1 + " " + sigleton.count2);
    }

    private static int count1;

    static {
      System.out.println("static 2: " + sigleton + " " + sigleton.count1 + " " + sigleton.count2);
    }

    private static int count2=0;

    static {
      System.out.println("static 3: " + sigleton + " " + count1 + " " + count2);
    }

    {
      System.out.println("non-static 1: " + sigleton + " " + count1 + " " + count2);
    }

    private Foo (){
        count1++;
        count2++;

        System.out.println(count1 + " " + count2);
    }

    {
      System.out.println("non-static 2: " + sigleton + " " + count1 + " " + count2);
    }

    public static Foo getInstance(){
        return sigleton;
    }

    public static void main(String[] args) {
        Foo f= Foo.getInstance(); // case 1
        System.out.println(f.count1);
        System.out.println(f.count2);
        Foo t= new Foo(); // case 2
        System.out.println(t.count1);
        System.out.println(t.count2);
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T08:48:37.797

在情况 2 中，构造函数`Foo()`被调用 2 次，一次是在初始化时调用，`private static Foo`第二次是从 main 方法调用。`getInstance()`如果使用该方法获取 Foo，则不会发生第二次调用。

# html - 禁用智能手机的缩放

> ID：11358723
> 
> 赞同：2
> 
> 时间：2012-07-06T08:37:26.440
> 
> 标签：html, zooming, dygraphs

我在我的网页上使用了最新版本的 dygraph，我上周对其进行了更新，在计算机和平板电脑上看起来都很棒，但我在使用智能手机时遇到了一些问题。当您单击屏幕中的任何位置时，图表会执行相关操作。作为一个快速的解决方案，我认为我可以禁用缩放事件或点击事件，而我有时间查看它并找到更好的解决方案。

我做了一项研究，但我发现的一切都是这样的：

[https://groups.google.com/forum/?fromgroups#!topic/dygraphs-users/XqeoS3UAIQk](https://groups.google.com/forum/?fromgroups#!topic/dygraphs-users/XqeoS3UAIQk)

解决方法在哪里：看交互demo，我找过了，没找到！

有什么建议么？？任何禁用缩放或单击事件或快速解决方案的更好选项都可以！

非常感谢你！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:15:52.340

在该线程上，Robert 建议您从[http://dygraphs.com/tests/interaction.html](http://dygraphs.com/tests/interaction.html)复制“无交互模型”图表的选项。

目前，dygraphs 处理触摸界面的方式有些混乱。要禁用它，您可以尝试在实例化 dygraph 之前放置此代码：

```
Dygraph.defaultInteractionModel.touchend = Dygraph.defaultInteractionModel.touchmove = Dygraph.defaultInteractionModel.touchstart = function() {}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-01T17:00:15.303

只是用一个例子来扩展@danvk的答案......

您需要为interactionModel 属性指定一个空对象。

```
var mygraph = new Dygraph(
    document.getElementById('nameofdiv'),
    stringofdata,
    { interactionModel:{}, otheroption:whatever }
); 
```

# delphi - 32,7893256547 不是有效的 BCD 值

> ID：11358730
> 
> 赞同：2
> 
> 时间：2012-07-06T08:37:54.427
> 
> 标签：delphi, delphi-2009

我在 SQL Server 2008 中有一个 Numeric(26,10) 列“x”。当我尝试使用 TADOQuery 的 FieldByName('x').AsExtended 读取列值时，出现错误“32,7893256547 不是有效的 BCD价值”。

“32,7893256547”是列值之一。

这只发生在某些计算机上。在这些计算机上，当我在区域设置中将 Windows 设置“小数点后的位数”更改为 9 时，一切正常。

我看到该列映射到 ADOQuery 中的 TFMTBCDField。

BCD 转换/格式化有问题吗？我该如何解决这个问题？

平台：Windows 7、Delphi 2009、SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:12:54.110

我尝试使用时遇到了同样的问题

```
ADOQuery1.FieldByName('YourField').AsString; 
```

解决了这个问题：

```
BCDToStrf(ADOQuery1.FieldByName('YourField').AsBCD,ffFixed,11,3) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T07:42:43.890

Me 帮助将 Windows 7 小数点从逗号更改为点并返回开始 > 控制面板 > 时钟、语言和区域 > 更改日期、时间和数字格式以及将数字和货币的小数点从逗号更改为点或其他方式前后左右。

抱歉，我在捷克语中使用 Windows，并且我们使用逗号分隔符作为默认小数点。有些标题是我翻译成英文的，所以它们不需要准确。

# linux - 文件权限 wamp vs 主机

> ID：11358734
> 
> 赞同：0
> 
> 时间：2012-07-06T08:38:11.133
> 
> 标签：linux, wamp

我有一个创建一些文件并将它们压缩的脚本，在我的本地开发环境中运行良好。WAMP。

不会在我的主机上创建文件，我已经通过 filezilla 手动将文件夹权限更改为 777 用于父文件夹。

仍然没有帮助。我还能尝试什么？

```
$db = 'halaalre_rt'; //get the db
    //$db = 'hmzcms'; //get the db
    $file_names = array();

    $showtablequery_result  = $this->DBopen->query("SHOW TABLES FROM $db");//get tables list
    while($showtablerow = $showtablequery_result->fetch_array())
        {
        $table_name = $showtablerow[0];

        $backup_file  = BASEDIR.'/tmp/backup/'.$table_name.'.sql';//creat file name
        $this->DBopen->query("SELECT * INTO OUTFILE '$backup_file' FROM $table_name");//createe files
        }

    $this->Zip(BASEDIR.'/tmp/backup/', './compressed.zip');
    return $this->Data; 
```

# shell - 使用 shell 脚本查找 csv 中缺失的行

> ID：11358745
> 
> 赞同：0
> 
> 时间：2012-07-06T08:39:02.820
> 
> 标签：shell, unix, csv, cron

我每天都会收到一个 csv 文件，并想与前一天的文件进行比较。添加了新行，对现有行进行了一些更改，并删除了一些行。

我可以处理文件的所有更改，除了丢失的行。如何在 cron 作业中使用 shell 脚本来获取缺失的行？

我想将丢失的行放在第三个 csv 文件中以单独处理它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:46:28.480

`man diff`

使用 diff，您可以获得两个文件之间的更改。然后取决于你想如何处理它们，只是得到你想要`grep`的输出。`diff`

# azure - Azure 网站和辅助角色

> ID：11358747
> 
> 赞同：2
> 
> 时间：2012-07-06T08:39:04.273
> 
> 标签：azure

我正在考虑重新构建包含多个网站的现有 Azure Web 角色。我想将当前在 Web 角色中运行的繁重任务（图像调整大小、打包和压缩）转移到工作角色中。它们是非关键的，所以我最终会得到一个 Worker Role 实例和多个 Web Role 实例。但是，我还想将在 Web 角色中运行的一些低容量站点移到 Azure 网站，以便在不更改整个包的情况下进行小型部署。这包括管理和后端站点，它们的容量很小，但需要访问 Worker 角色。Azure 网站是否能够与辅助角色终结点通信？或者这是一个愚蠢的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:49:13.677

我认为您始终可以选择让您的网络角色/网站将应调整大小的图像上传到您的 Azure 存储。然后您可以在工作角色读取的队列上放置一条消息。然后它从存储中加载图像并在其上执行您的任务。

可以使用共享密钥从 Azure 外部访问存储和队列。但由于它是一个网络角色/网站，您可以将密钥安全地存储在 web.config 或类似文件中。

我还认为您可以让工作人员角色公开一个公共/外部端点。但它似乎不如让网络与存储和队列对话安全。

# jquery - 检测基本应用程序中的关闭选项卡

> ID：11358749
> 
> 赞同：2
> 
> 时间：2012-07-06T08:39:08.480
> 
> 标签：jquery, tabs, window.open, page-refresh

jQuery 中有没有一种方法可以在我的基础应用程序中检测到关闭的选项卡并使其刷新页面？

我建立了一个票务系统。当您单击工单时，它会使用 target="_blank" 在新选项卡中打开工单。当您更新工单时（并且仅当您这样做时），然后单击“关闭选项卡”链接，我希望主应用程序（前一个选项卡）能够识别此事件并自动刷新页面。

我知道我可以使用 window.open() 然后检测循环中的关闭句柄，但它不优雅，因为在 IE 上它有时不会在新选项卡中打开，而是打开一个新窗口。使用 target="_blank"，我想我看到 IE 打开了一个新选项卡。我更喜欢标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:29:38.197

如果你使用 window.open，你也可以使用 window.opener 和 window.onbeforeunload。唯一的缺点是你没有标签。但是这样你就不需要循环了。

例如：

主屏幕：

*   点击事件：window.open(/* 打开你的窗口 */);

票务画面：

*   load 事件：在 window.opener 上触发 onbeforeunload 时绑定重新加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:03:11.513

因此，我们有一个带有工单表的父选项卡，然后是一个包含实际工单的子选项卡。然而，这并不是真正的父/子关系，因为我使用的是 target="_blank" 点击而不是 window.open() 事件。

修复有点杂乱无章，但它确实有效。只需将更改添加到“父”选项卡。首先，将 Javascript 中的 gbRefreshStale 全局布尔值添加到页面并将其值设置为 0，如下所示：

```
var gbRefreshStale = 0; 
```

其次，在每次 target="_blank" 单击时，使用 jQuery 进行拦截，如下所示：

```
$('A[target=_blank]').click(function(){
  setTimeout('gbRefreshStale=1;clearTimeout();',500);
  return true;
}); 
```

然后，第三，您将需要此 mouseenter 事件作为页面标题：

```
$('#header').mouseenter(function(){ 
  // assuming you called your banner/header as #header
  if (gbRefreshStale) {
    gbRefreshStale = 0;
    location.href = location.href;
  }
}); 
```

这里的效果是为工单打开了一个新选项卡，但如果有人关闭该选项卡并将鼠标移过标题（他们可能会这样做，因为他们刚刚关闭了一个子选项卡），父选项卡将刷新。如果打开和关闭多个选项卡，这也有效，并且该系统防止父选项卡循环刷新。超时是必要的，因为否则某人的鼠标可能会在该选项卡打开之前穿过父级的#header 部分。

# scala - Play 2.0：查询中的可选列表

> ID：11358751
> 
> 赞同：7
> 
> 时间：2012-07-06T08:39:12.150
> 
> 标签：scala, compiler-errors, playframework-2.0

我正在尝试使用可选列表作为查询参数定义路由

```
GET /places controllers.Application.query(filter: Option[Seq[Int]]) 
```

但收到此错误

```
conf/routes - PlayException: Compilation error [`)' expected but `]' found] 
```

我知道 Play 2 处理`Option`得很好，我希望它传递`Seq`给我的 custom `QueryStringBindable`，如何实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T12:11:01.573

Play 2.0.2 路由解析器似乎不支持嵌套类型参数。我找到了解决方法，我定义了别名`Seq[Int]`：

```
type IntSeq = Seq[Int] 
```

并使用它代替原始类型：

```
GET /places controllers.Application.query(filter: Option[IntSeq]) 
```

现在它按预期工作。

# matlab - 在 MATLAB R2011a 中绘制四面体

> ID：11358753
> 
> 赞同：4
> 
> 时间：2012-07-06T08:39:19.720
> 
> 标签：matlab, matlab-figure, figure

我想在 MATLAB 中绘制四面体。我怎样才能做到这一点？

[![一只忙碌的猫](../Images/600e2949e648803b1a278167ff6a5aef.png)](https://upload.wikimedia.org/wikipedia/commons/f/fc/Tetrahedron.svg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:50:53.237

Try this

```
X = [x1 x2 x3 x4]';
Y = [y1 y2 y3 y4]';
Z = [z1 z2 z3 z4]';    
T = [1 2 3; 1 2 4; 2 3 4; 1 3 4];    
trimesh(T,X,Y,Z); 
```

and see if it works. The values x1 y1 and z1 are the respective x y x coordinate of vertex 1 (similarly for the other vertices). I dont have MATLAB access right now so I have modified this from my octagon generator code. You might need to play with the vertices order to get it to work, but this approach will enable you to plot your tetrahedron

Edit: another option is `trisurf` in place of `trimesh` to get surface rather than wireframe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-25T04:18:08.930

```
 % Draws tetrahedron inscribed in sphere of radius 1
    function draw_regular_tetrahedron(T)

        T = 1/hypot(1, sqrt(2)/2)*T; % scale to fit in unit sphere

        z = 1/sqrt(2);
        S.Vertices = (T*[1,0,-z;-1,0,-z;0,1,z;0,-1,z]')';
        S.Faces = [1,3,4;2,3,4;1,2,3;1,2,4];
        S.FaceVertexCData = [ 1 ];
        S.FaceColor = 'flat';
        S.EdgeColor = 'green';
        p = patch(S);
        alpha(p, 0.5);
    end

>> ps_5_2.draw_regular_tetrahedron(eye(3))
>> ps_5_2.draw_regular_tetrahedron(eye(3)*5) 
```

[![在此处输入图像描述](../Images/0f9d321963003946d9ee778838430837.png)](https://i.stack.imgur.com/N8G1g.png)

# html5-canvas - Kineticjs 重叠形状鼠标悬停检测

> ID：11358762
> 
> 赞同：2
> 
> 时间：2012-07-06T08:39:55.900
> 
> 标签：html5-canvas, mouseover, kineticjs

是否有一种简单的方法可以对 kineticjs 中的多个重叠形状进行鼠标悬停检测（或者 rapheljs，如果这在 SVG 中更容易）。即，如果我有两个部分重叠的圆圈，我想以某种方式检测四种情况：

1) 在没有形状时 2) 在圆 A 上时 3) 在圆 B 上时 4) 当在圆 A 和 B 上（重叠）时

但我需要一个可以扩展到“n”个圆圈/形状的通用实现。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:58:18.497

是的，只需使用 getIntersections 方法：

[http://www.kineticjs.com/docs/symbols/Kinetic.Container.php#getIntersections](http://www.kineticjs.com/docs/symbols/Kinetic.Container.php#getIntersections)

这将返回与给定点相交的所有 KineticJS 节点（例如鼠标位置）

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T03:00:20.347

要解决这个问题，您显然要处理碰撞检测。碰撞检测算法因您要检查的形状而异。

因此，首先，您可以使用 lineTo、arc 等方法并使用内置的方法`isPointInPath`进行检测，并传入鼠标坐标。这是最简单的方法，尤其是形状奇特的多边形

```
 if (ctx.isPointInPath(20,50))
    {
        // code
    } 
```

# powershell - 谁能帮我解决我的 PowerShell 函数中的这个解析错误？

> ID：11358764
> 
> 赞同：0
> 
> 时间：2012-07-06T08:40:04.603
> 
> 标签：powershell, parsing-error

我有一个 PowerShell 函数，我收到一个奇怪的解析错误（它不会编译，PowerGUI（我使用的编辑器）和 PowerShell（当我尝试导入模块时）），给我一个解析错误。

这是我的代码到 pastebin 的链接：[My Function @ Pastebin](http://pastebin.com/xca3inJ3)

这是显示解析错误消息的图片的链接：[错误消息@Imgur](http://imgur.com/O1c8o)

任何人都熟悉这个解析错误？我尝试删除`Write-Verbose`它抱怨的语句，但这没有任何帮助，它只是跳到下一个，即使它在一个完全不同的代码块内。（EG`Process{...}`与`End{...}`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:53:42.657

您在第 161 行的“任何错误”之前的引号之前缺少反引号：

```
Write-Error "`"Could not connect to remote computer $server!`"`n`t`t`t`t`t`t`t`t      "Any errors on line 109 relates to this fact.`"" 
```

应该：

```
Write-Error "`"Could not connect to remote computer $server!`"`n`t`t`t`t`t`t`t`t      `"Any errors on line 109 relates to this fact.`"" 
```

这导致了一些不匹配的引号，然后导致脚本中的最后一个引号，即第 247 行“返回哈希表...”末尾的那个，引发错误。

# c++ - OpenGL中的快速文本渲染

> ID：11358775
> 
> 赞同：5
> 
> 时间：2012-07-06T08:40:28.373
> 
> 标签：c++, opengl, glsl

我想要关于如何在 OpenGL 中快速渲染文本的建议。

目前，我正在阅读一种真正的字体并动态生成包含所有 ASCII 字符的纹理，对于使用的每种字体，对于使用的每种字体大小。每个纹理只生成一次并保留以供以后使用。

在绘图阶段，我逐行绘制所有内容。

我在内存上有一个静态数组，计算字距等，修改线条的顶点位置和纹理坐标。然后我绑定相应的纹理并渲染线条。

不幸的是，这似乎很慢。有没有更好的办法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T08:46:33.330

IMO 最好的方法是使用[距离场](http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)。将使用更少的空间，速度更快，轻松支持几种漂亮的文本效果，并且非常容易实现（特别是因为您似乎已经准备好字体 -> 纹理部分）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T08:44:40.510

将渲染文本绘制到纹理上，然后将该纹理绘制到屏幕上。存储帧之间的纹理。您需要对删除屏幕上不再可见的文本进行一些管理，但这应该更快。

图形库通常将其抽象为 String 类，一旦将其绘制到屏幕上，它就会记住它绘制的纹理，并在内部字符串更改时使其无效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T08:55:03.150

这是一个非常好的和快速的库，用于使用 freetype 和 OpenGL 渲染动态文本：[freetype-gl](http://code.google.com/p/freetype-gl/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T08:50:25.153

The [FTGL](http://sourceforge.net/projects/ftgl/) library would probably provide everything you need.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-31T12:46:19.947

您可以使用新的opengl文本渲染库[`freetype-direct-gl`](https://github.com/stonewell/freetype-direct-gl)，它使用freetype字体轮廓直接渲染缩放后的字体，因此无需创建位图纹理或在CPU中进行复杂的计算。

# installshield - 在 installshield 基本 msi 项目中读取对话框响应

> ID：11358783
> 
> 赞同：0
> 
> 时间：2012-07-06T08:41:06.413
> 
> 标签：installshield, basic-msi

我有一个对话框 SAPEnv dat 有八个单选按钮，包含在名为 SAPEnviro 的同一属性下。我想要做的是在我的 installscript 中获取该值并根据单击的按钮设置注册表值。我使用了 msigetproperty 函数，但它的 svproperty 参数每次都返回空白。而 nvbuff 大小争论确实会根据返回值的大小返回一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:55:39.117

如果您使用的是 Basic MSI，为什么还需要 InstallScript？为什么不直接使用注册表中控件设置的属性。（[道具]）。

# html - ul > li 线距变小

> ID：11358786
> 
> 赞同：0
> 
> 时间：2012-07-06T08:41:14.193
> 
> 标签：html, html-lists

例如 ：

```
<ul> 
<li>first Line</li>
<li>second Line</li>
</ul> 
```

当我给出任何 li 大小（例如 40px）时，它会产生这样的输出

```
First
Line 
```

距离对我来说很大。我想让第一和线路输出之间的距离更小。感谢帮助 。

* * *

谢谢伙计们的行高对我有帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:44:12.253

只需将 a 设置`line-height`为`<li>`元素来规则线之间的距离

# swing - 插入模式下的 JTextfield 编辑 - 摆动

> ID：11358791
> 
> 赞同：2
> 
> 时间：2012-07-06T08:41:26.693
> 
> 标签：swing, jtextfield

我的应用程序中有一个 jtextfield，每次您编辑它时，
即把鼠标放在文本的中心并写 -
它会替换字母而不是插入它们。

有没有办法将此行为更改为插入模式？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:24:21.353

在没有看到您的代码的情况下，我只能猜测您拥有的某个地方

`textField.setHorizontalAlignment(JTextField.CENTER)`

这会将鼠标放在中心，也许你在打电话

`textField.replaceSelection()`当字段获得焦点或每次更改文本时。

# ios - 生成文件并将其附加到移动浏览器客户端的电子邮件中

> ID：11358794
> 
> 赞同：0
> 
> 时间：2012-07-06T08:41:55.487
> 
> 标签：ios, html, mobile-safari, email-attachments

我想使用用户提交的表单数据生成要附加到电子邮件的 XML 文件。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:09:16.940

对不起，但我没有完美的答案来解决你的问题。无论如何，如果您希望它在客户端生成 xml 文件，一种方法是使用 javascript。我发现有人有相同目标的线程：[如何使用 Javascript 将 HTML 中的表单数据写入 XML](https://stackoverflow.com/questions/6066837/how-to-write-data-from-form-in-html-to-xml-with-javascript)。希望你在那里找到一些东西。祝你好运 ！

# .net - 使现有的 Web 应用程序可移植并从 USB 上的 IIS Express 运行

> ID：11358800
> 
> 赞同：1
> 
> 时间：2012-07-06T08:42:19.423
> 
> 标签：.net, silverlight, web-applications, sql-server-ce, iis-express

我对使用 IIS express 非常陌生（以前曾使用标准 IIS），我正在尝试使用应用程序池在 Web 服务器上通过 IIS 运行现有的 Web 应用程序。

现有服务器的设置是它使用一个应用程序池加载两个应用程序 appname appnameCore 物理路径如

C:\inetpub\wwwroot\appname\applications\appname C:\inetpub\wwwroot\appname\applications\appnameCore

它是一个基于 Silverlight 的应用程序。

目前该应用程序使用 MS SQL 数据库，但我想将其更改为 MS SQL CE 我不太确定如何设置相同类型的环境，目前我的 Web 服务器从笔杆（记忆棒/drive) 并且我想让应用程序可移植。IIS Express 目前在 Pen Drive 上运行良好，但我不确定如何配置应用程序池。

我认为我说 MS SQL CE 使用 .sdf 而不是 .mdf 作为数据库也是正确的，我怎样才能将现有的 .mdf 数据库转换为正确的格式？

我看过另一篇文章，其中有人使用那里的数据库从 USB 运行另一个 Web 应用程序以及[http://leekelleher.com/2011/01/15/umbraco-on-usb-usin-iis-express-and- sqlce4/](http://leekelleher.com/2011/01/15/umbraco-on-usb-usin-iis-express-and-sqlce4/)

我认为这是可能的，但在尝试了很长一段时间后，我已经陷入了困境。

我真的很感激你能给我的任何帮助。

如果我可以提供更多信息或以某种方式扩展问题，请告诉我。

谢谢，格伦：）

# ruby - params[:comment] 作者在哪里给出 :comment?

> ID：11358801
> 
> 赞同：0
> 
> 时间：2012-07-06T08:42:37.747
> 
> 标签：ruby, ruby-on-rails-3

我想了解作者在哪里给出 :comment，从这个表单到控制器

```
 <h2>Add a comment:</h2>
<%= form_for([@post, @post.comments.build]) do |f| %>
  <p>
    <%= f.label :commenter %><br />
    <%= f.text_field :commenter %>
  </p>
  <p>
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </p>
  <p>
    <%= f.submit %>
  </p>
<% end %> 
```

阶级和行动是

```
 class CommentsController < ApplicationController
  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])
    redirect_to post_path(@post)
  end
end 
```

作者在哪里给出：评论？他怎么能在没有在表格中声明的情况下收到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:02:59.220

因为`form_for`是对 Comment 类的对象进行操作，所以为字段命名空间中的参数生成的名称`params[:comment]`。

您可以通过将`:as`选项传递给 来更改此设置`form_for`，但通常不需要这样做。

# javascript - Javascript：在循环外重构函数

> ID：11358803
> 
> 赞同：0
> 
> 时间：2012-07-06T08:42:52.880
> 
> 标签：javascript, jshint

所以 JSHint 告诉我我不应该在循环中创建函数。然后我通常在循环外创建一个函数。

但现在我有一个更困难的部分：

```
for (r=0;r<x;r++) {
    for (c=0;c<y;c++) {
        var arr = [c,r];
        setTimeout( (function(arr) { return function() { doSomething(arr); };})(arr), 50+c*550 + r*230 );
    }
} 
```

我如何重构这部分以不收到 JSHint 警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:47:22.443

很简单：

```
for (r=0;r<x;r++) {
    for (c=0;c<y;c++) {
        var arr = [c,r];
        setTimeout( proxy(arr), 50+c*550 + r*230 ); 
    }
}

function proxy(arr){
    return function(){
        doSomething(arr);
    };
} 
```

# iphone - Iphone 中的推送通知服务问题

> ID：11358804
> 
> 赞同：0
> 
> 时间：2012-07-06T08:42:57.030
> 
> 标签：iphone, push-notification, apple-push-notifications

我在 iphone 的推送通知服务中有一个小问题。我已经在 iphone 中实现了推送通知，并且效果很好。

我的问题是

应用程序关闭-当我的应用程序关闭并收到通知警报时，单击通知的查看按钮时，我会转到我的警报查看页面。在那个警报页面上，当我单击它时，我有一个后退按钮，我转到另一个已修复的页面。

应用程序打开 - 当我的应用程序打开并且我在我的一个页面中时。通知警报来了，单击通知的查看按钮时，我会转到与上面相同的警报查看页面。但是现在当我单击返回按钮时，我想转到通知之前的上一页。当应用程序关闭时，不在固定页面上。

我应该如何在 iphone 中执行此操作？

请分享您的逻辑/想法来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:11:10.447

每次从通知中引导您时，请更换您的导航堆栈。假设这`FirstViewController`是您单击后退按钮后想要返回的位置。并且`SecondViewController`是您点击警报时想要去的地方。

因此，每次您从通知中引用时，将导航堆栈替换为

```
FirstViewController  *objFirstViewController  = [[FirstViewController alloc] initWithNIBName: @"FirstViewController" bundle: nil];
SecondViewController *objSecondViewController = [[SecondViewController alloc] initWithNIBName: @"SecondViewController" bundle: nil];
NSArray *aryControllers = [NSArray arrayWithObjects: objFirstViewController,objSecondViewController, nil];
[self.navigationController setViewControllers: aryControllers animated: YES];
[objFirstViewController release];   
[objSecondViewController release]; 
```

当您从呈现的视图中弹出时，您将始终获得`FirstViewController`. 以上是针对您的应用不在后台（或已关闭）的情况。对于您的应用处于后台以及收到通知时的情况，

从 AppDelegate`application:didReceiveRemoteNotification:`中，您可以像正常推送一样推送视图。然后它将返回到您收到通知之前所在的上一页。（假设您在整个项目中使用全局导航控制器）

很高兴这对您有帮助。

# php - Magento 致命错误：访问 getModelInstance() 方法的错误方法

> ID：11358806
> 
> 赞同：1
> 
> 时间：2012-07-06T08:43:16.130
> 
> 标签：php, magento, apache, mage

我已经在我的服务器上安装了 Magento，但是这次，使用相同的过程，我有一个错误。

> 致命错误：在第 462 行的 /var/www/html/magento/app/Mage.php 中的非对象上调用成员函数 getModelInstance()

我用“localhost”（重定向到*/var/www/html/magento*）调用这个过程，但是如果通过像“testmagento.com”这样的虚拟主机，我会遇到同样的错误。

我工作

> Fedora 15、httpd、mysql 5.5.24、php 5.3.14。

我该如何解决？

问候，

——托马斯（法国）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T18:34:35.320

我遇到了同样的问题，我发现以下文件和文件夹需要将其权限设置为数字“777”，以便 Magento 可以正确保存数据：

```
/var/.htaccess
/app/etc
/var 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T06:13:26.457

从 magento 根目录将其作为单个命令运行：

chmod 777 应用程序/等；chmod -R 777 变量；chmod -R 777 媒体

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T09:37:49.643

您应该首先初始化 Magento 框架：

/* 商店或网站代码 */ $mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';

/* 运行商店或运行网站 */ $mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : '商店';

法师::init($mageRunCode, $mageRunType, array());

# c# - 使用 Jquery 从文本框添加列表框中的项目

> ID：11358807
> 
> 赞同：4
> 
> 时间：2012-07-06T08:43:16.517
> 
> 标签：c#, javascript, asp.net, jquery

我被困在某个地方，使用 jquery 从文本框中附加列表框。

这是我的jQuery

```
 $("#btnAddSvc").click(function () {
        var svc = $("#<%= txtServiceName.ClientID %>").val();  //Its Let you know the textbox's value   
        svc.appendTo("#<%=lstSvcName.ClientID %>");
    }); 
```

我正在使用 asp.net (c#) 来开发我的代码

```
<asp:Button ID="btnAddSvc" runat="server" Text=">>" Font-Size="Medium" />
<asp:ListBox ID="lstSvcName" runat="server" SelectionMode="Multiple" ToolTip="Selected Service Names"
                Width="169px"></asp:ListBox> 
```

有人可以帮忙吗，因为我无法获取列表框中的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:49:38.460

缺少 jQuery 选择器 $() ，`"#<%=lstSvcName.ClientID %>"`因此您将获得`id`lstSvcName 而不是`object`.

我还更改了 append 语句，因为它没有正确的语法。

```
"#<%=lstSvcName.ClientID %>" 
```

将会

```
$("#<%=lstSvcName.ClientID %>") 
```

您的代码将变为

```
$("#<%= btnAddSvc.ClientID %>").click(function () {
      var svc = $("#<%= txtServiceName.ClientID %>").val();  //Its Let you know the textbox's value   
      $("#<%=lstSvcName.ClientID %>").append('<option value="'+svc+'">item '+svc+'</option>');
      return false;
}); 
```

**编辑 [OP 为 ListBox 中的唯一项目和清除 TextBox 请求的更多功能]**

```
$("#<%= btnAddSvc.ClientID %>").click(function () {
    var txt = $("#<%= txtServiceName.ClientID %>");
    var svc = $(txt).val();  //Its Let you know the textbox's value   
    var lst = $("#<%=lstSvcName.ClientID %>");
    var options = $("#<%=lstSvcName.ClientID %> option");
    var alreadyExist = false;
    $(options).each(function () {
        if ($(this).val() == svc) {
            alert("Item alread exists");
            alreadyExist = true;
            return;
        }
        txt.val("");
        // alert($(this).val());
    });
    if(!alreadyExist)
            $(lst).append('<option value="' + svc + '">' + svc + '</option>');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:07:38.873

您可以使用 jquery 操作 DOM 来做到这一点，但是......**现在有一种更优雅的方式来做到这一点：面向对象的方式（使用 MVVM - 模型视图 ViewModel），使用[knockoutjs](http://knockoutjs.com/)**

[Knockoutjs Nuget 包](https://nuget.org/packages/knockoutjs)

你创建一个绑定到你的列表只是添加`data-bind="options: elements"`到你的列表中，并且你总是使用对象，从不使用 DOM 元素，在这个例子中我有一个字符串数组，但是你可以创建自定义对象并使用其中的一些变化来绑定它们句法

这样做的方法是：

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="Scripts/knockout-2.1.0.js"></script>
<script type="text/javascript">
    $(function () {
        var model = {
            elements: ko.observableArray(),
            addElement: function () {
                this.elements.push($("#<%= this.newElement.ClientID %>").val());
            }
        };

        ko.applyBindings(model);
    });
</script>

    <asp:ListBox runat="server" ID="myListbox" Rows="10" Width="25%" data-bind="options: elements">
    </asp:ListBox>
    <br />
    <asp:TextBox runat="server" ID="newElement"></asp:TextBox>
    <input type="button" id="addElement" value="Add element" data-bind="click: addElement" /> 
```

这是输出：

![在此处输入图像描述](../Images/fbf4628f39e4922312949e5d828da22b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:08:20.747

尝试这样的事情。这可能会对您有所帮助。为方便起见更改返回值。

```
 $('#<%= btnAddSvc.ClientID %>').click(function () {
            $textbox = $('#<%= txtServiceName.ClientID %>');
            $listbox = $('#<%= lstSvcName.ClientID %>');
            $listbox.append($('<option></option>').attr('value', $textbox.val()).text($textbox.val()));
            return false;
        }); 
```

# ruby-on-rails - 交互式 Ruby REPL 或 Web 控制台引擎

> ID：11358809
> 
> 赞同：1
> 
> 时间：2012-07-06T08:43:23.660
> 
> 标签：ruby-on-rails, ruby, sinatra

我正在寻找创建类似[http://tryruby.org/](http://tryruby.org/)的东西，它可能在 sinatra 或 rails 3 之上从 web 执行 ruby​​ 脚本。是否有任何引擎或 gem 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:56:46.607

只需检查一下[https://github.com/jwo/ruby-fiddle-web](https://github.com/jwo/ruby-fiddle-web)

# php - 如何根据当前用户位置使用 php 获取最近的 20 个位置

> ID：11358811
> 
> 赞同：0
> 
> 时间：2012-07-06T08:43:37.247
> 
> 标签：php, mysql, web-services

我有以下表格

```
1\. user table containing 
userid  lastlatitude  lastlongitude  lastlocation
---------------------------------------------------
 1       38.555605      -121.468926     California
 2        30.4518         -84.27277       Florida
2\. locations table containing
location_id  latitude  longitude location_name   
----------------------------------------------------
  1      38.7547          -140.7878892622     abc
  2\.     40.7547         -111.895672622  New asdsd
  3      41.xxx           xxxxxxxx         xxxxxx 
```

我需要得到以下输出：如果我通过用户 lat 和 long 我应该得到最近的 20 个位置，这些位置存储在我的位置表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:50:35.503

首先，您需要计算距离。如果有帮助，请查看[http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL 。](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)

编辑：

在[http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)中，下面的查询可能符合您的要求：

```
set @orig_lat=122.4058;  // pass users lat
set @orig_lon=37.7907;   // pass users long

SELECT *,

3956 * 2 * ASIN(SQRT( POWER(SIN((@orig_lat -
abs( 
dest.latitude)) * pi()/180 / 2),2) + COS(@orig_lat * pi()/180 ) * COS( 
abs
(dest.latitude) *  pi()/180) * POWER(SIN((@orig_lon – dest.longitude) *  pi()/180 / 2), 2) ))

as distance FROM locations dest ORDER BY distance limit 20; 
```

# php - 要在 PHP 或 JavaScript 中处理的大型数组

> ID：11358815
> 
> 赞同：0
> 
> 时间：2012-07-06T08:43:47.233
> 
> 标签：php, javascript, ajax, caching, cookies

我手头有一个大数组（2300 个元素，总共 280 KB，最短形式为 180 KB）。我需要在 PHP 或 JavaScript 中处理它，而不需要过多地加载页面或服务器。页面中有一个自动完成字段，我不希望它在每次用户输入字母时向 180 KB 页面发送请求（因为这对我来说似乎效率很低）。我不想将所有这些都存储在原始页面中，因为它会减慢页面速度（不是吗？）。

我试图将它推入 Cookies 中，但 Cookies 中似乎没有空间容纳如此庞大的数组。有什么建议么？也许在数据库中搜索是更好的解决方案，我应该将它们存储在数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:01:09.167

我相信实际上最好通过 Ajax 将输入发送到服务器并等待服务器端回复，如果您担心页面加载时间 + 如果您的数组不时更改......

另一方面，您可以将数组以 JSON 格式存储在服务器上的文件中，并通过 Ajax 在 JavaScript 中发出，这样您的用户将不得不下载一次数组，稍后您可以依靠浏览器缓存来加速它.

例如。

```
$.get("array.txt",function(array){

   var myArray = eval(array);
   //Now DO WHat YOu WAnt with the Array now Housed in the variable 'myArray'

}); 
```

这只是一个例子，你不需要使用 jQuery。

**笔记：-**

如果您使用第二种方法...最好添加某种缓冲机制，以便您的用户在当前会话中第一次访问该站点时等待它加载。这只是为了让用户在第一次尝试时得到他们期望的东西，否则他们可能看不到任何建议或您想对阵列做的任何事情，然后他们会被激怒并最终离开。

如果使用 PHP，您需要设置正确的缓存头。通常，您上传一次且永不更改的 txt 文件将自动发送到大多数现代浏览器中的缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:55:00.267

您想使用仅加载一个的列表自动完成吗？将其存储在 JavaScript 文件中并设置正确的缓存标头，以便客户端仅加载列表一次。

不要将其设置为 cookie，那是胡说八道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:55:58.983

为自动完成字段使用数据库确实是一个经典的解决方案。我认为你不会很难找到 PHP/mysql/jquery 自动完成教程。

它工作得很好。

永远不要向客户发送完整的列表，它是无用的，而且当你的值数量增加时，这个解决方案也不会扩展。

# php - 我的登录表单上出现未定义的索引错误，当我尝试登录时没有任何反应

> ID：11358817
> 
> 赞同：0
> 
> 时间：2012-07-06T08:43:55.780
> 
> 标签：php, mysql, database

我正在尝试为我的网站制作登录页面

我目前正在使用 xampp 进行测试，然后将其上传到我的主机并制作了一个包含一些测试数据的 mysql 数据库。

当我转到本地 localhost/xampp/Login.php 时，出现错误： 注意：未定义索引：第 41 行 C:\xampp\htdocs\xampp\Login.php 中的用户名

```
Notice: Undefined index: password in C:\xampp\htdocs\xampp\Login.php on line 41

Notice: Undefined index: logout in C:\xampp\htdocs\xampp\Login.php on line 43

Notice: Undefined index: test_account in C:\xampp\htdocs\xampp\Login.php on line 25 
```

这里的第一行是第 41 行

```
if($_POST['username'] !='' || $_POST['password'] != '') {
$login_status = login($_POST['username'], $_POST['password']);
} else if($_GET['logout']) {
logout();
}
$userid = status(); 
```

我的表单发送数据，所以我不明白为什么它会出错

```
<form action="Login.php" method="POST">
<input type=text name=username>
<input type=password name=password>
<input type=submit value="Log In">
</form> 
```

当我单击登录时没有任何反应，这是我正在使用的完整 php 文件

```
<?php

    $link = mysql_connect("localhost", "admin", "1234");
    mysql_select_db("test_database", $link);

function login($username, $password) {
        $username = addslashes($username);
        $password = md5($password);
    $query = mysql_query("SELECT * FROM user_accounts WHERE username='$username' AND password='$password'");
    if(mysql_num_rows($query) == 1) {
        $info = mysql_fetch_array($query);
        $userid = $info[userid];
        $sessionid = md5($userid . time());
        $time = time();
        @setcookie ('test_account', $sessionid, $time+3600, '/', '');
        mysql_query("DELETE FROM user_sessions WHERE userid='$userid'");
        mysql_query("INSERT INTO user_sessions (sessionid,userid,timestamp) VALUES('$sessionid','$userid','$time')");
        return $userid;
    } else {
        return 0;
    }
}

function status() {
    $sessionid = $_COOKIE[test_account];
    $oldtime = time() - 3600;
    $query = mysql_query("SELECT * FROM user_sessions WHERE sessionid='$sessionid' AND timestamp>$oldtime");
    if(mysql_num_rows($query) == 1) {
        $info = mysql_fetch_array($query);
        return $info[userid];
    }
    return 0;
} 

function logout() {
    $sessionid = $_COOKIE[test_account];
    @setcookie ("test_account",'', time()-99999, '/', '');
    mysql_query("DELETE FROM user_sessions WHERE sessionid='$sessionid'");
}

if($_POST[username] !='' || $_POST[password] != '') {
    $login_status = login($_POST[username], $_POST[password]); 
} else if($_GET[logout]) {
    logout();
}
$userid = status();

if($userid > 0) { echo "Welcome to our site, user #$userid (<a href='?logout'>Click here to logout</a>)"; } else {

if($login_status != '' $login_status == 0) { echo "Invalid username/password combo.<br>"; }
?>

<form action="sample.php" method="POST">
<input type=text name=username>
<input type=password name=password>
<input type=submit value="Log In">
</form>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:25:23.343

你应该检查是否有$_POST，然后登录系统，如果没有，则显示表格。如果用户已通过身份验证，则无需向他显示表单。

```
<?php
$userid = status();
if($userid > 0) {
    if(isset($_GET['logout'])){
        logout();
        header('Location: Login.php');
        exit();
    }
    echo "Welcome to our site, user #$userid (<a href='?logout'>Click here to logout</a>)";
    exit();
}

if (isset($_POST['username']) && isset($_POST['password'])){
    $login_status = login($_POST[username], $_POST[password]);
    //if success login
    if($login_status) {
        header('Location: Login.php');
        exit();
    }
    echo "Invalid username/password combo.<br>"; 
}
?>
<form action="sample.php" method="POST">
    <input type="text" name="username">
    <input type="password" name="password">
    <input type="submit" value="Log In">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:47:51.040

如果变量存在，您必须尝试：

```
if(isset($_POST['username'])) 
```

因为当你进入你的页面时，表单还没有提交，所以变量不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:55:54.707

您需要首先检查 $_POST 是否设置如下：

```
<?php
    if(isset($_POST['username'])&& isset($_POST['password']))
    {
        if(!empty($_POST['username']) && !empty($_POST['password'])) {
            $login_status = login($_POST['username'], $_POST['password']); 
        } else if($_GET['logout']) {
            logout();
        }
    }
?> 
```

在您的表单中，您应该在项目名称周围使用额外的 "，如下所示：

```
<form action="sample.php" method="POST">
    <input type="text" name="username">
    <input type="password" name="password">
    <input type="submit" value="Log In">
</form> 
```

# linux - 如何使用 KML 在 Google 地球中找到两个点/标记之间的路线？

> ID：11358819
> 
> 赞同：1
> 
> 时间：2012-07-06T08:44:02.633
> 
> 标签：linux, google-maps, google-maps-api-3, kml, google-earth

Google Maps API 有一个`route`功能可以做到这一点。在 Google Earth API 中找不到类似的东西。

*   如何在 Google 地球中找到两点/标记之间的路线/路径？

这是在 Linux 上完成的，因此无法将其与 Google 地图的 Javascript API 集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:32:03.253

使用[DirectionsAPI](https://developers.google.com/maps/documentation/directions/)。它链接自 Javascript Maps API 文档，但它是一个 REST API，可以返回 XML 格式的结果。

只需确保检查[服务条款](https://developers.google.com/maps/terms#section_10_12)以验证您的使用是否被允许。

# php - HTML DOM通过Parrent to Child关系提取内容

> ID：11358822
> 
> 赞同：0
> 
> 时间：2012-07-06T08:44:13.787
> 
> 标签：php, html, dom

我想使用 PHP 解析 HTML DOM；

我有一个字符串 PN，我想检测找到 PN 作为内容的 DOM 元素的 Parrent；

然后，找到 Parrent 元素后，我需要这些元素的所有子元素；

所有其他不在 Parrent 结构下的 DOM 元素，必须被忽略；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:57:21.190

这是我设法写的，但我不知道在 $node-> 之后要写什么以获得元素 (h1,h2,div,span) ...

```
//start xpath
// Create new DOM object:
$dom = new DomDocument();
// Load HTML code:
@$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$nodes = $xpath->query('//*');
$data = array();
foreach ($nodes as $node) {
    $data[] = $node->textContent;
}
if( count( $data ) > 0 )
{
echo '<br/>xpath<br/>';
print_r( $data );
}
//stop xpath 
```

# android - 将 android 游戏链接到也玩的 facebook 朋友

> ID：11358823
> 
> 赞同：0
> 
> 时间：2012-07-06T08:44:15.833
> 
> 标签：android, google-app-engine, facebook-graph-api, google-cloud-messaging

我正在尝试为 Android 平台创建一个纸牌游戏，该游戏将通过网络进行，一次一回合。我希望在我的服务器后端使用 Google App Engine，并在轮到玩家时使用 Google Cloud Messaging 通知玩家。我的想法是让用户通过 Facebook API 登录，存储 facebook 用户 ID，然后使用 Google Cloud Messaging 注册应用程序并存储注册 ID。然后 facebook 和 GCM id 都将提交到服务器并存储在 GAE 数据存储中。要生成一个朋友列表来开始一个新游戏，我是否只需使用 facebook Open Graph API 来获取用户的朋友列表？ids，然后将存储在服务器上的每个 facebook id 与 facebook 好友列表进行比较？或者有没有更好的方法来获取也安装了该应用程序的 Facebook 朋友列表？

在每一回合之后，Android 应用程序会序列化一个“游戏”对象并将其上传到 GAE，然后 GAE 将使用保存的注册 id 通知其他玩家。当应用程序在设备上打开时，它会下载服务器上挂起的序列化“游戏”对象，然后对其进行充气并继续下一轮。这是我第一次尝试编写比使用一点 JavaScript 的简单网站更复杂的东西。任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T21:22:57.347

> 或者有没有更好的方法来获取也安装了该应用程序的 Facebook 朋友列表？

对`user`表进行 FQL 查询，选择所有 uid 连接到表中当前用户 id`friend`且已`is_app_user`设置为 true 的用户。

# android - 如何使用 android 自动读取 Pop3 中的未读邮件

> ID：11358825
> 
> 赞同：0
> 
> 时间：2012-07-06T08:44:28.453
> 
> 标签：android, email, jakarta-mail, pop3

我需要从 pop3 服务器（Rackspace）阅读和发送电子邮件我已经完成了 gmail 的阅读和写作。我面临两个问题 1\. 如何从 Pop3 服务器（Rackspac、yahoo、live、Unread only not every）读取电子邮件。2.当我第一次阅读来自gmail的电子邮件时，当我第二次尝试阅读时没有问题，它说连接已打开，而我每次都正确关闭连接，如果我重新启动我的应用程序，它第一次可以顺利运行。

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:26:12.780

1.  POP3 协议不支持告诉您消息是新消息还是未读消息的标志。请参阅[com.sun.mail.pop3 包的 javadocs](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/pop3/package-summary.html)。

2.  显然你做错了什么。 [打开会话调试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)，协议跟踪将显示您是否真的关闭了文件夹。

# php - 为网站选择哪个框架/CMS？

> ID：11358826
> 
> 赞同：-2
> 
> 时间：2012-07-06T08:44:28.650
> 
> 标签：php, content-management-system

我想创建一个具有非常大数据库的网站，因此如果您输入产品的 ID 或名称，您可以获得它的信息，还有一些其他功能，例如查看在哪里可以找到该产品等。所以会有很多大的相互连接的表格，以及始终与它们一起工作的网站。

所以我想问我应该如何创建这个网站，我可以使用 CMS 来管理它（这将是最好的选择）还是我应该使用框架（基于 PHP）或从头开始。因为我担心如果我使用 CMS 会影响网站速度，尽管这只是我的猜测。

我对 Drupal 有一些经验，所以可能有人知道这种网站是否可以用它编写。无论如何，对我的任何建议都很重要。先感谢您！

康斯坦丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:50:38.710

If you already have experience with Drupal I'd suggest to use that. There are many ways to optimize the speed of your data access. My best guess is that you look at Solr to speed up data-indexing; [http://lucene.apache.org/solr/](http://lucene.apache.org/solr/)

There is also a Drupal module available for that to get you up and running; [http://drupal.org/project/apachesolr](http://drupal.org/project/apachesolr)

But if time is not an issue, I'd suggest to look into some frameworks. At the moment I think Symfony 2 will do the job just fine. [http://symfony.com/](http://symfony.com/)

# jquery - jQuery .hover 出现2个按钮

> ID：11358830
> 
> 赞同：0
> 
> 时间：2012-07-06T08:44:57.113
> 
> 标签：jquery

我有这个问题3天。是的，我知道它这么久，我对此感到非常紧张。

问题是当我做 {.hover} 我想要 2 个按钮出现。

代码是

```
// HOVER
$(document).ready(function(){
    $("a#static").hover(function() {
        $(this).stop().animate({"opacity": "0"}, "350");
        $(this).find('img#previewbut');
    }, function() {
        $(this).stop().animate({"opacity": "1"}, "350");
        $(this).find('img#previewbut');  
    });
}); 
```

表格

```
<li>
    <p>' . $yValue['title'] . '</p>
    <span class="time timeright">' . $yValue['time'] . '</span>

    <a class="videoThumb4" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '" id="static">
    ' . $yValue['description'] . '                      
    </a>
    <img src="img/preview.png" id="previewbut" />
</li> 
```

我需要为 jquery 修复什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:47:59.927

你的意思 ？

```
 $("#static").hover(function(event) {
        event.stopPropagation();
        $(this).stop().fadeOut(350);
        $(this).closest("li").find('#previewbut').show();
    }, function() {
        $(this).stop().fadeIn(350);
        $(this).closest("li").find('#previewbut').hide();  
  }); 
```

# .net - 为什么我不能在 VS 2010 中创建 SQL 数据库？

> ID：11358836
> 
> 赞同：0
> 
> 时间：2012-07-06T08:45:25.017
> 
> 标签：.net, visual-studio-2010, sql-server-2008

我想在`App_Data`文件夹中创建一个 SQL Server 数据库，但弹出警报说：

> 与 SQL Server 数据库文件 (.mdf) 的连接需要在本地计算机上安装和运行 SQL Server 2005 Express 或 SQL Server 2008 Express

![在此处输入图像描述](../Images/58bb7f87ef251a93870eff2cdb403713.png)

但我已经安装了这个：

![在此处输入图像描述](../Images/5fa5f3113d0eb31ada48dc32c63b645c.png)

那有什么问题？我需要帮助：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:49:12.647

You need the SQL Server Express, not the normal (non-express) one.

Quoting [this thread on MSDN social](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/6503fe05-4d05-49e7-8c2a-b9778ab7e9b8/):

> In particular, SSE has a number of options turned on that are typically not on in higher versions of SQL Server. You could turn them on but wouldn't want to if you are using SQL Server as a general server, not a local database store. In addition, there is some behavior that is unique to SSE that is particular to the way local database stores are used. But, to be quite clear, it is exactly the same .exe.

Have a look at this SO thread, too: [Problem with creating .MDF file from Visual Studio 2010](https://stackoverflow.com/questions/4650183/problem-with-creating-mdf-file-from-visual-studio-2010)

# solr - SOLR 短语查询

> ID：11358838
> 
> 赞同：2
> 
> 时间：2012-07-06T08:45:29.500
> 
> 标签：solr, edismax

使用 SOLR 4.0 搜索并尝试短语查询时，我遇到了一个小问题。

我有一个名为“idx_text_general_ci”的字段，它是由所有字段组成的不区分大小写（全部小写）的字段。

当我尝试搜索一个短语（marine fitter）时，我的 SOLR 拒绝搜索该短语，而是将这个短语分成 2 个单词 -

```
/select?defType=edismax&q=idx_text_general_ci:marine%20fitter&debugQuery=true 
```

debugQuery=true 输出如下：

```
<lst name="debug">
<str name="rawquerystring">idx_text_general_ci:marine fitter</str>
<str name="querystring">idx_text_general_ci:marine fitter</str>
<str name="parsedquery">
(+(idx_text_general_ci:marine DisjunctionMaxQuery((id:fitter))))/no_coord
</str>
<str name="parsedquery_toString">+(idx_text_general_ci:marine (id:fitter))</str> 
```

正如您在上面看到的，它将查询分成两部分（idx_text_general_ci:marine 然后 id:fitter）。

我遇到的问题是，我在 idx_text_general_ci 字段中出现了两次“marine fitter”，但它的得分低于出现 3 次“marine”一词的文档。我知道如果我的 SOLR 是按预期使用短语搜索字段，情况将不会如此。

如果我将短语用引号括起来，我得到的结果为零。

任何帮助或朝着正确方向轻推将不胜感激。

提前致谢

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:12:43.567

这里发生的是您的默认查询字段似乎是`id`，并且因为您将查询指定为

```
idx_text_general_ci:marine fitter 
```

它在 Solr 中被翻译为`idx_text_general_ci:marine`和的 DisjunctionMaxQuery `id:fitter`。大概，你想要`idx_text_general_ci:marine`and `idx_text_general_ci:fitter`。您有两个选择：1）您可以在每个单词前面加上正确的字段，后跟一个冒号，或者您可以将 schema.xml 中的 defaultSearchField 更改为`idx_text_general_ci`。

我很困惑为什么当你用双引号括起来时你得到零结果。但是执行上述操作应该会对您有所帮助。

# c# - 向/从两个正在运行的应用程序发送/接收消息

> ID：11358841
> 
> 赞同：13
> 
> 时间：2012-07-06T08:45:35.597
> 
> 标签：c#, message

我有两个名为*SENDER*和*RECEIVER*的应用程序。

RECEIVER 将由 SENDER 使用`System.Diagnostics.Process.Start`方法启动

RECEIVER 将以隐藏模式启动，因此它没有`MainWindowHandle`.

然后我们可以使用`Win32.WM_COPYDATA`命令向 RECEIVER 发送消息，但它需要`MainWindowHandle`所以我们不能。

**我需要的是能够通过任何方法定期发送和接收消息。**

我检查了以下链接以获取有关 的手册`MainWindowHandle`，但没有帮助：

[向 Windows 进程（不是其主窗口）发送消息](https://stackoverflow.com/questions/1777668/send-message-to-a-windows-process-not-its-main-window)

一种解决方案可能是一个对象，`System.Diagnostics.Process`它可以帮助我们向进程发送消息。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T09:15:20.037

在 2 个进程之间共享信息有不同的方法。

首先，您必须考虑当您的应用程序扩展时，两个进程是否总是在同一台机器上。

**不同的机器**

*   使用 TCP/UDP 套接字连接（可以是最快的解决方案）
*   使用 MSMQ
*   使用 WebServices、WCF 或 Restful Web 服务。
*   从数据库中的公共条目中读取。（不建议）
*   命名管道（检查[这个](http://msdn.microsoft.com/en-us/library/bb546085.aspx)）（命名管道可以在同一台机器上或飞过网络）

**总是在同一台机器上。**

*   共享内存（您可以使用[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)）
*   从公共文件中读取（您可以使用[FileWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)）

**首选：MSMQ**

如果我是你，我会保留在不同机器上拥有进程的能力，所以我会按照 Maarten 的建议使用两个使用 MSMQ 进行通信的 Windows 服务。为什么？

1.  MSMQ 允许您不丢失消息（以防 RECEIVER 关闭）
2.  MSMQ 允许您在同一台机器或不同机器中拥有进程
3.  Windows 服务使您能够轻松启动/停止进程
4.  Windows 服务可以让我监控我的 SNMP，并且通常它们很容易与 Windows 管理工具集成。

**第二首选：Restful Web Service**

如果您不想使用 MSMQ，我将使用托管在 IIS 中的两个 Restful Web 服务来通信两个进程。如果您遇到这样一种情况，即 RECEIVER 对来自 SENDER 的消息不感兴趣（如果它们迟到），它会很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-05T00:35:23.060

对于在同一台机器上运行的进程，可能最轻量级的解决方案是使用 PostThreadMessage()。我真的很惊讶没有人给出这个答案，这是老式的 Windows 编程。OP非常接近。观察：

*   每个进程都有一个主线程（*本机*线程）。
*   主线程有一个消息队列。
*   主线程具有系统全局的线程 ID。

所有的成分都在那里，这是一个把它们放在一起的问题。从概念上讲，它很简单，但棘手的部分是将 RECEIVER 的主线程 ID 传递给 SENDER。你有几个选择：

1.  在 SENDER 中，在 Win32 中，您可以从 RECEIVER 的线程信息块中挖掘出线程 ID。 [https://stackoverflow.com/a/8058710/420400](https://stackoverflow.com/a/8058710/420400)
2.  当 RECEIVER 启动时，您可以将线程 ID 保存在其 Process.StartInfo.Environment 中。它确实存在，并且可以在 SysInternals 的 Process Explorer 中看到——但你很难理解它。同样有一个 Win32 解决方案。 [https://www.codeproject.com/Articles/25647/Read-Environment-Strings-of-Remote-Process](https://www.codeproject.com/Articles/25647/Read-Environment-Strings-of-Remote-Process)
3.  当 RECEIVER 启动时，您可以将线程 ID 保存在共享内存中。
4.  （或者更好的东西......）

选项 1 和 2 看起来像是安全漏洞，所以对于这个例子，我选择了选项 3，并在一个很小的内存映射文件中共享线程 ID。

接收器看起来像这样

```
enum WM { USER = 0x400 }

class MyMessageFilter : IMessageFilter
{
    public bool PreFilterMessage(ref Message m)
    {
        if ((WM)m.Msg == WM.USER)
        {
            Console.WriteLine("WM_USER received.");
            return true;
        }

        return false;
    }
}

class RECEIVER : IDisposable
{
    MemoryMappedFile mmf;
    bool disposed = false;

    public void MyMessageLoop()
    {
        uint mainThreadId = GetCurrentThreadId();
        Console.WriteLine(mainThreadId);
        mmf = MemoryMappedFile.CreateNew(Constants.ThreadIDFileName, IntPtr.Size, MemoryMappedFileAccess.ReadWrite);
        using (var accessor = mmf.CreateViewAccessor(0, IntPtr.Size, MemoryMappedFileAccess.ReadWrite))
        {
            accessor.Write(0, mainThreadId);
        }
        Application.AddMessageFilter(new MyMessageFilter());
        Application.Run();
    }

    [DllImport("kernel32.dll")]
    static extern uint GetCurrentThreadId();

    // Implement IDisposable and ~RECEIVER() to delete the semaphore, omitted for brevity
    // https://docs.microsoft.com/en-us/dotnet/api/system.idisposable?view=netframework-4.7.2
    #region
    ...
    #endregion
} 
```

SENDER 看起来像这样

```
enum WM { USER = 0x400 }

class Program
{
    static void Main(string[] args)
    {
        string procName = "RECEIVER";
        Process[] processes = Process.GetProcesses();

        Process process = (from p in processes
                           where p.ProcessName.ToUpper().Contains(procName)
                           select p
                          ).First();

        uint threadId;
        using (var mmf = MemoryMappedFile.OpenExisting(Constants.ThreadIDFileName, MemoryMappedFileRights.Read))
        using (var accessor = mmf.CreateViewAccessor(0, IntPtr.Size, MemoryMappedFileAccess.Read))
        {
            accessor.Read(0, out serviceThreadId);
        }

        PostThreadMessage(threadId, (uint)WM.USER, UIntPtr.Zero, IntPtr.Zero);
    }

    [return: MarshalAs(UnmanagedType.Bool)]
    [DllImport("user32.dll", SetLastError = true)]
    public static extern bool PostThreadMessage(uint threadId, uint msg, IntPtr wParam, IntPtr lParam);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-03T09:06:13.920

CreateFromFile 方法从磁盘上的现有文件创建内存映射文件。下面的示例创建一个超大文件的一部分的内存映射视图并操作其中的一部分。

```
using System;
using System.IO;
using System.IO.MemoryMappedFiles;
using System.Runtime.InteropServices;

class Program
{
    static void Main(string[] args)
    {
        long offset = 0x10000000; // 256 megabytes
        long length = 0x20000000; // 512 megabytes

        // Create the memory-mapped file.
        using (var mmf = MemoryMappedFile.CreateFromFile(@"c:\ExtremelyLargeImage.data", FileMode.Open,"ImgA"))
        {
            // Create a random access view, from the 256th megabyte (the offset)
            // to the 768th megabyte (the offset plus length).
            using (var accessor = mmf.CreateViewAccessor(offset, length))
            {
                int colorSize = Marshal.SizeOf(typeof(MyColor));
                MyColor color;

                // Make changes to the view.
                for (long i = 0; i < length; i += colorSize)
                {
                    accessor.Read(i, out color);
                    color.Brighten(10);
                    accessor.Write(i, ref color);
                }
            }
        }
    }
}

public struct MyColor
{
    public short Red;
    public short Green;
    public short Blue;
    public short Alpha;

    // Make the view brighter.
    public void Brighten(short value)
    {
        Red = (short)Math.Min(short.MaxValue, (int)Red + value);
        Green = (short)Math.Min(short.MaxValue, (int)Green + value);
        Blue = (short)Math.Min(short.MaxValue, (int)Blue + value);
        Alpha = (short)Math.Min(short.MaxValue, (int)Alpha + value);
    }
} 
```

以下示例为另一个进程打开相同的内存映射文件。

```
using System;
using System.IO.MemoryMappedFiles;
using System.Runtime.InteropServices;

class Program
{
    static void Main(string[] args)
    {
        // Assumes another process has created the memory-mapped file.
        using (var mmf = MemoryMappedFile.OpenExisting("ImgA"))
        {
            using (var accessor = mmf.CreateViewAccessor(4000000, 2000000))
            {
                int colorSize = Marshal.SizeOf(typeof(MyColor));
                MyColor color;

                // Make changes to the view.
                for (long i = 0; i < 1500000; i += colorSize)
                {
                    accessor.Read(i, out color);
                    color.Brighten(20);
                    accessor.Write(i, ref color);
                }
            }
        }
    }
}

public struct MyColor
{
    public short Red;
    public short Green;
    public short Blue;
    public short Alpha;

    // Make the view brigher.
    public void Brighten(short value)
    {
        Red = (short)Math.Min(short.MaxValue, (int)Red + value);
        Green = (short)Math.Min(short.MaxValue, (int)Green + value);
        Blue = (short)Math.Min(short.MaxValue, (int)Blue + value);
        Alpha = (short)Math.Min(short.MaxValue, (int)Alpha + value);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-31T14:27:51.383

老问题，我知道。
偶然发现它，因为我有一个类似的任务。
一个应用程序从另一个应用程序开始 - 它会再次结束，但没人知道什么时候。
1\. 应用程序可以重新启动 2.，但必须等到之前的 2\. 实例退出后才能启动。
始终在同一台 PC（和 Windows）上。

简单的事情是使用注册表设置一个值，当 2\. 程序运行时，并在它退出时再次删除/重置它。
1.app可以检查注册表看是否可以启动另一个2.app的实例。

您还可以使用注册表在应用程序之间传递值。缺点是，应用程序必须轮询注册表，而不是发送消息。更简单但效果更差。

所以可能取决于它需要什么。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-06T08:58:37.523

我认为[MSMQ](http://www.techrepublic.com/article/use-microsoft-message-queuing-in-c-for-inter-process-communication/6170794)是一个不错的选择。

# javascript - Oneliner：为什么这会产生 undefined is not a function？

> ID：11358842
> 
> 赞同：0
> 
> 时间：2012-07-06T08:45:37.300
> 
> 标签：javascript

为什么以下行有时会在 chrome 开发控制台中产生消息“未定义不是函数”：

```
(callbackOrUndefined || function() {})(); 
```

思路是如果为真则执行回调，即函数，否则执行空函数。

我不得不将其替换为：

```
if (callbackOrUndefined !== undefined) callbackOrUndefined(); 
```

编辑：我想我不够清楚。它有时似乎将块评估为 undefined(); 我不明白如何以及为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:46:35.703

那是因为`callbackOrUndefined`有一个假值，然后选择了 null 函数，当调用它时，它返回`undefined`.

请注意，`undefined`即使`callbackOrUndefined`没有返回定义的值，您也可能会得到...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:48:34.147

我假设`callbackOrUndefined`没有定义。所以它的值被认为是虚假的。然后`OR`评估空函数。空函数不返回任何内容。chrome 开发控制台总是打印你执行的任何代码的最后一个返回值。在这种情况下，这是未定义的。

顺便说一句，它不总是返回`undefined`。为了让它不返回`undefined`，`callbackOrUndefined`需要有一些真实的价值。

# javascript - Backbone：渲染语法

> ID：11358843
> 
> 赞同：0
> 
> 时间：2012-07-06T08:45:40.990
> 
> 标签：javascript, backbone.js

我们在我团队的一个项目中使用 Backbone.js，这是我第一次使用它。

我见过很多次这种代码（它是coffeescript，但我认为足够清楚。`@`意思是`this.`）

```
clients_view = new Homespa.Views.Orders.Clients.SectionView(collection: @options.clients)
@$("#clients-section").html(clients_view.render().el)

clients_search_view = new Homespa.Views.Orders.Clients.SearchView
@$("#clients_search_modal").html(clients_search_view.render().el) 
```

难道没有更好的方法来做到这一点吗？我希望只是调用`render`我的观点，然后一切都很好，我不必手动获取 html 并附加/替换它。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:12:01.710

自动将自身附加到页面的视图将要求视图了解外部世界，了解它不拥有的元素。情况不妙。

而且它不是特定于主干的，您不能只创建一个元素并期望它出现在某个地方。它总是需要先插入页面。

```
var a = document.createElement("div"); //Don't expect this to appear as a child of #footer or something
document.getElementById("footer").appendChild(a) //Now it is, but we needed to know about #footer. 
```

充其量您可以通过以下方法缩短管道`.renderTo`：

```
someView.renderTo( "#clients-section"); //Would call .render and append the views .el to "#clients-section" without the view having to know about it 
```

# css - CSS 问题 - 对齐困难

> ID：11358846
> 
> 赞同：0
> 
> 时间：2012-07-06T08:45:45.937
> 
> 标签：css

好的，这是我的问题的图像.. [https://www.dropbox.com/s/s30wathhiqpky9e/help.JPG](https://www.dropbox.com/s/s30wathhiqpky9e/help.JPG)

问题是这两个都是 DIV，宽度相同，但它们只是不对齐！我该如何解决这个问题。我想要的是它们对齐在一起，就好像它们的大小一样......这是html代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome</title>

    <style type="text/css">
    .div_top {
        height:50px;
        padding:5px;
        margin:0 auto;
        width:1100px;
        border:dotted;
        border-width:1px;
    }
    .div_top_ads {
        float:right;
        position:relative;  

    }

    #div_nav_bar{
        width:1100px;
        height:30px;
        margin:auto;
        opacity:10%;
        margin-top:auto;
        background-color:#CCC;

    }
    body {
        margin-top: 0px;
    }

    .divme {
        width:100%; 

    }
    </style>
    </head>

    <body>

    <div class="div_top"> hello

      <div class="div_top_ads">Content for New Div Tag Goes Here</div>

    </div>

    <div class="divme">
    <div id="div_nav_bar">yello!</div>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:10:17.097

```
.div_top { 
    height:50px; 

    margin:0 auto; 
    width:1100px; 
    border:dotted; 
    border-width:1px; 
} 
#div_nav_bar{ 
    width:1102px; 
    height:30px; 
    margin:auto; 
    opacity:10%; 
    margin-top:auto; 
    background-color:#CCC; 
border-width:1px; 
} 
```

对齐的问题是两个 div 的宽度不同，因为一个有边框，另一个 dnt 有边框。填充也将宽度增加了 10 像素。现在您可以删除填充并将 2px 宽度添加到 div_nav_bar 或添加 12px 宽度。

宽度计算padding+border+width

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:56:08.507

**[这是一个演示](http://jsfiddle.net/ppvTJ/)**。

我所做的只是删除`padding`您应用的所有内容以及`border`.

我给`width:1100px`了两个div。

问题是当你应用`padding`到一个元素时，它就`width`变成了`width+padding-left+padding-right`.

因此 div 似乎看起来更宽。在你的情况下，你给了`padding` 和`1px border`给你的 upper `div(div_top)`。

因此其`width`计算为`1100px`+ `padding-left`+ `padding-right`+ `border-left`+ `border-right`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:51:25.903

嘿现在的问题是你习惯了填充+边框

现在像这样更改为您的CSS

你`#div_nav_bar` `width`是总`1100px width + 10px padding left of right + 2px border`现在总宽度是`width :1112px`

```
#div_nav_bar{
    width:1100px; // change to width:1100 + 10 + 2px; // width:1112px

} 
```

# java - 是否可以调试外部蚂蚁任务？

> ID：11358848
> 
> 赞同：2
> 
> 时间：2012-07-06T08:45:57.233
> 
> 标签：java, ant

我有一个调用外部 ant 任务的 ant 脚本：

```
 <taskdef name="runStoriesAsEmbeddables" classname="org.jbehave.ant.RunStoriesAsEmbeddables"         
    classpathref="project.classpath" />

     <runStoriesAsEmbeddables includes="**/Ant*Stories.java" ignoreFailureInStories="true" 
     ignoreFailureInView="false" 
     systemProperties="story.path=.,qr.host=*,qr.port=*" generateViewAfterStories="true" /> 
```

我想使用 -Xdebug 在 unix 机器上启动 JVM。我阅读了几个在“java”任务中使用“jvmarg value="-Xdebug"”的文档，但对于外部任务......我不知道如何使用它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:42:42.107

在运行 Ant 之前设置 ANT_OPTS 环境变量。假设您使用 Bash shell：

对于 Java 1.4：

```
export ANT_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,address=5005,server=y,suspend=y 
```

对于 Java 1.5 及更高版本：

```
export ANT_OPTS=-agentlib:jdwp=transport=dt_socket,address=5005,server=y,suspend=y 
```

运行 Ant 脚本，然后使用调试器附加到端口 5005。

# php - Laravel 和 InnoDB

> ID：11358849
> 
> 赞同：38
> 
> 时间：2012-07-06T08:45:57.480
> 
> 标签：php, mysql, laravel, innodb

我正在使用 laravel 和 laravel 迁移机制。我创建了表并设置了外键。但是这些表是 MyISSAM，所以没有创建外键。我在哪里启用/配置这个？（将其更改为 InnoDB 而不是在 mysql 服务器中）。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2016-06-23T15:37:55.750

您可以编辑 /config/database.php 文件，搜索*mysql*条目并更改：

`'engine' => null,`

至

`'engine' => 'InnoDB',`

这`$table->engine = "InnoDB";`使您无需为每个模式添加；）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-02T21:37:25.783

像这样定义引擎

```
 Schema::create("models", function(Blueprint $table) {
            $table->engine = "InnoDB";
  } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-07T12:34:06.680

[您可以在Schema\Table 闭包](https://laravel.com/docs/4.2/schema#storage-engines)中设置引擎。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-07T16:13:05.457

我发现@ThomasLAURENT 是最好的解决方案，但是我的数据库中现有的表呢？

工作。

```
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;
class ConvertTablesIntoInnoDB extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        $tables = [
            'users',
            'products',
        ];
        foreach ($tables as $table) {
            DB::statement('ALTER TABLE ' . $table . ' ENGINE = InnoDB');
        }
    }
    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        $tables = [
            'users',
            'products',
        ];
        foreach ($tables as $table) {
            DB::statement('ALTER TABLE ' . $table . ' ENGINE = MyISAM');
        }
    }
} 
```

这将允许我们转换所有表并在需要时回滚它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-06T17:30:15.413

我建议将您的 Mysql 更新到 5.5 或更高版本。Mysql 现在默认的存储引擎是 InoDB

*在 MySQL 5.5.5 之前，MyISAM 是默认的存储引擎。（默认在 MySQL 5.5.5 中更改为 InnoDB。）MyISAM 基于旧的（不再可用）ISAM 存储引擎，但有许多有用的扩展。*

[http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html](http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html)

完成后，您可以通过 Laravel 轻松映射实体类中的关系

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-10-26T12:51:39.803

另一种方法（对于不使用 database.php 的方法）是包含在`.env`文件中：

`DB_ENGINE=InnoDB`

记得检查你`'engine' => env('DB_ENGINE', null),`的 database.php 上是否有

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-10T15:00:57.727

在服务器端使用 InnoDb 表是成功的最佳方式。使用[MySQL 工作台](http://dev.mysql.com/downloads/workbench/)。在 Workbench 中很容易。而且，如果您想阅读本机[手册](http://dev.mysql.com/doc/workbench/en/index.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-14T14:31:07.457

```
Schema::create('users', function($table)
{
    $table->engine = 'InnoDB';

    $table->string('email');
}); 
```

喜欢文档 Laravel：[https ://laravel.com/docs/4.2/schema#storage-engines](https://laravel.com/docs/4.2/schema#storage-engines)

P/s：感谢@Nico Haase 提醒我提供链接。

# python - Django Fastcgi 停止响应

> ID：11358851
> 
> 赞同：0
> 
> 时间：2012-07-06T08:46:06.297
> 
> 标签：python, django, nginx, fastcgi

我对 django 有疑问。我使用 django (runfcgi) + nginx，但每天 1-2 次 fastcgi 进程停止响应。

在 nginx 错误日志中，我最初看到类型为 110（超时）的错误，然后是 111（错误网关），因此我被迫重新启动 django 服务器。

我怎么能理解为什么 django 停止响应？

我使用 prefork 方法和最新的 django/nginx 版本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:10:44.900

我有同样的问题切换到 Django+ Nginx+ Gunicorn 为我解决了这个问题[Link](http://gunicorn.org/)

# java - 我应该在哪里直接（通过查询）或通过前端的函数在 db 列中使用 MD5 哈希？

> ID：11358854
> 
> 赞同：3
> 
> 时间：2012-07-06T08:46:14.597
> 
> 标签：java, mysql, database, md5

> 在我的网络应用程序的注册表中，我有一个密码字段。现在，当我在提交按钮上的数据库中插入数据时。

方法一：

**我使用 md5 函数生成它的哈希值，然后将加密数据保存到数据库中。**

方法二：

**我使用 MySql 中的查询将特定列数据直接转换为哈希值。**

> 哪种方法开销较小，哪种方法在整个网络中更安全。请帮忙？

***使用的数据库：MySql 5，前端：Java***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:56:10.720

先加密数据再插入mysql会更安全。否则，可能会通过侦听应用服务器和数据库之间的流量来“嗅探”数据。

使用 MD5 时要记住的另一点是使用“盐”值。如果不使用盐，MD5 很容易受到暴力攻击。使用盐意味着在计算 MD5 并保存到数据库之前将任意字符串添加到用户输入的值。

例如，如果用户输入的值是“ABC”，而您的盐值是“12345”，那么您将为“ABC12345”计算MD5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:58:20.090

您应该最明确地计算哈希，在应用程序级别对其进行加密。这将保护您免受重放和 MiM 攻击。存储加密的哈希而不是以明文加密密码将为您的用户增加额外的安全层，因为如果您的数据库被黑客入侵，攻击者将无法在其他网站上使用此信息（因为人们倾向于使用相同的密码）。

IMO，在处理敏感信息时，应将安全置于性能之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:48:02.520

您应该将加密的密码保存在数据库中。当您想要进行身份验证时，您应该比较两个加密字符串。这不是开销问题，而是安全问题（这也是为什么您应该考虑使用[*真正的*加密](http://msdn.microsoft.com/en-us/magazine/cc163884.aspx)而不是散列）。

# mongodb - 从符合条件的用户中提取所有数组

> ID：11358868
> 
> 赞同：0
> 
> 时间：2012-07-06T08:46:58.913
> 
> 标签：mongodb

我有一个烦人的问题，即使条件匹配我系统中的多个用户，也只有其中一个用户提取了特定的数组。

这可能是用户的样子：

```
{
    "_id" : ObjectId("4ff696cf246951c8cea8506c"),
    "campaigns" : [
        {
            "userchannel" : 1,
            "id" : ObjectId("4ff59640acf479392600015b"),
            "name" : "test3"
        }
    ],
} 
```

一位用户可以有多个广告系列，但只有一个具有相同名称。当我删除活动时，我想将用户更新为包含此活动的用户被删除。`userchannel : 1`仅应删除包含活动的用户。

我目前使用这个：

```
db.users.update({'campaigns.userchannel' : 1}, {$pull : {'campaigns' : {'id': ObjectId("4ff59640acf479392600015b")}}}) 
```

但它只会删除一个用户的广告系列。如何改进此查询，以便从所有用户中删除特定广告系列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:29:09.303

你正在做一个单一的更新。MongoDB 更新的默认行为是仅修改与条件匹配的第一个文档，而不是像 RDBMS 中常见的那样修改所有匹配的文档。

更新有签名`update(criteria, update, upsert, multiple)`。最后一个参数是一个布尔值，告诉 MongoDB 更新所有匹配的文档而不是第一个。

将您的更新更改为：

```
db.users.update({'campaigns.userchannel' : 1}, {$pull : {'campaigns' : {'id': ObjectId("4ff59640acf479392600015b")}}}, false, true) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:39:46.090

```
db.users.update({"campaigns.userchannel" : 1}, {$pull : {"campaigns" : {"id": ObjectId("4ff59640acf479392600015b")}}},false,true) 
```

upsert 的第三个参数和 multi 的第四个参数。所以你需要将multi设置为true

# php - 使用 API 为 plesk 10.4.4 创建子域并设置 home 和 stats 值

> ID：11358869
> 
> 赞同：1
> 
> 时间：2012-07-06T08:47:01.490
> 
> 标签：php, api, subdomain, plesk

我能够使用 API（使用 PHP 脚本）在我的 plesk 面板（linux serverm 和 plesk 10.4.4）中创建一个子域。但我无法在网上找到两件事的文档：

1.  如何将 stats 属性设置为“awstats”而不是“Nothing”？
2.  例如，我如何设置（如果可能的话）创建的子域的主目录`/subdomains/my-subdomain`？

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:10:57.103

试试这个：

```
HTTP_AUTH_LOGIN: <login here>
HTTP_AUTH_PASSWD: <password here>
Content-Type: text/xml
<?xml version="1.0" encoding="UTF-8"?>
<packet version="1.6.3.4">
  <subdomain>
    <add>
      <parent>parent domain name here</parent>
      <name>subdomain name</name>
      <property>
        <name>ftp_password</name>
        <value>qweqwe</value>
      </property>
      <property>
        <name>webstat</name>
        <value>awstats</value>
      </property>
      <property>
        <name>www_root</name>
        <value>httpdoc</value>
      </property>
    </add>
  </subdomain>
</packet> 
```

如果设置请求将是：

```
HTTP_AUTH_LOGIN: <login here>
    HTTP_AUTH_PASSWD: <password here>
    Content-Type: text/xml
    <?xml version="1.0" encoding="UTF-8"?>
    <packet version="1.6.3.4">
      <subdomain>
        <set>
          <filter><id>ID</id></filter>
          <property>
            <name>webstat</name>
            <value>awstats</value>
          </property>
          <property>
            <name>www_root</name>
            <value>httpdoc</value>
          </property>
        </set>
      </subdomain>
    </packet> 
```

# php - 从整个字符串中提取标签（单词）

> ID：11358871
> 
> 赞同：0
> 
> 时间：2012-07-06T08:47:11.477
> 
> 标签：php, string

从字符串中提取每个单词的最佳方法是什么，例如：

```
one, two, "big three", four, "seven and eight" 
```

其中用双引号括起来的应该被视为单个元素：

```
array("one", "two", "big three", "four", "seven and eight") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:52:17.917

您应该使用 CSV 解析器，而不是自己滚动。PHP 有一个内置函数，可以完全满足您的需求 - [`str_getcsv`](http://php.net/manual/en/function.str-getcsv.php)：

```
$tags = str_getcsv($string);
foreach($tags as $tag) {
    ...
} 
```

请注意，这需要 PHP 5.3。“用户贡献的笔记”显示了许多解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:49:02.727

you can use:

```
$tags = explode(',', $string);
foreach($tags as &$tag)
{
    $tag = trim($tag);
} 
```

(code is not checked)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:57:32.800

如果您使用的是 php >= 5.3，那么您有函数 str_getcsv。

```
$tags = str_getcsv($tags, ',', '"', '\\');
$tags = array_map('trim', $tags); 
```

# java - 休眠deepValidate：grails中的错误异常

> ID：11358876
> 
> 赞同：0
> 
> 时间：2012-07-06T08:47:24.283
> 
> 标签：java, hibernate, grails

我有一个奇怪的问题，它只发生在参考服务器上，我的本地环境中的相同代码按预期工作。阅读一些记录后，我正在尝试进行批量更新。

我写的JAVA代码是

```
public OrderDTO findRecurringOrder(Integer userId, Integer itemId) {
        Criteria criteria = getSession().createCriteria(OrderDTO.class)
                .createAlias("orderStatus", "s")
                .add(Restrictions.eq("s.id", Constants.ORDER_STATUS_ACTIVE))
                .add(Restrictions.eq("deleted", 0))
                .createAlias("baseUserByUserId", "u")
                .add(Restrictions.eq("u.id", userId))
                .createAlias("orderPeriod", "p")
                .add(Restrictions.ne("p.id", Constants.ORDER_PERIOD_ONCE))
                .createAlias("lines", "l")
                .createAlias("l.item", "i")
                .add(Restrictions.eq("i.id", itemId))
                .addOrder(Order.desc("id"))
                .setMaxResults(1);

        return findFirst(criteria);
    }

public T findFirst(Criteria criteria) {
        criteria.setFirstResult(0).setMaxResults(1);
        return (T) criteria.uniqueResult();

    } 
```

我得到的错误堆栈跟踪是：

`groovy.lang.MissingMethodException: No signature of method: com.sapienter.jbilling.server.order.db.OrderLineDTO.validate() is applicable for argument types: (java.util.LinkedHashMap) values: [[deepValidate:false]] at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:54) at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46) at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125) at org.codehaus.groovy.grails.orm.hibernate.support.ClosureEventTriggeringInterceptor.onPreUpdate(ClosureEventTriggeringInterceptor.groovy:168) at org.hibernate.action.EntityUpdateAction.preUpdate(EntityUpdateAction.java:237) at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:88) at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279) at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263) at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168) at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321) at org.hibernate.event.def.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:64) at org.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:996) at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1589) at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:306) at org.hibernate.impl.CriteriaImpl.uniqueResult(CriteriaImpl.java:328) at com.sapienter.jbilling.server.util.db.AbstractDAS.findFirst(AbstractDAS.java:212) at com.sapienter.jbilling.server.order.db.OrderDAS.findRecurringOrder(OrderDAS.java:88) at com.sapienter.jbilling.server.mediation.task.SubscriptionEventProcessor.doEventAction(SubscriptionEventProcessor.java:134) at com.sapienter.jbilling.server.mediation.task.AbstractResolverMediationTask.resolve(AbstractResolverMediationTask.java:126) at com.sapienter.jbilling.server.mediation.task.AbstractResolverMediationTask.process(AbstractResolverMediationTask.java:93) at com.sapienter.jbilling.server.mediation.MediationSessionBean.normalizeRecordGroup(MediationSessionBean.java:476) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) at $Proxy75.normalizeRecordGroup(Unknown Source) at com.sapienter.jbilling.server.mediation.MediationSessionBean.performMediation(MediationSessionBean.java:232) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) at $Proxy75.performMediation(Unknown Source) at com.sapienter.jbilling.server.mediation.MediationSessionBean$1.run(MediationSessionBean.java:182) at java.lang.Thread.run(Thread.java:662)`

有什么建议吗，我真的对这个 Hibernate 异常知之甚少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:21:01.150

它看起来不像是休眠错误。看一下第一行：

```
groovy.lang.MissingMethodException: No signature of method: com.sapienter.jbilling.server.order.db.OrderLineDTO.validate() is applicable for argument types: (java.util.LinkedHashMap) values: [[deepValidate:false]] 
```

显然，您在**OrderLineDTO**类型的对象中调用**validate()**并在只需要传递 (deepValidate:false) 时传递 Map ([deepValidate:false])。您可以[在此处](http://grails.org/doc/latest/ref/Domain%20Classes/validate.html)查看 validate 的其他用途。

# c++ - 矢量的好处 在字符串？

> ID：11358879
> 
> 赞同：21
> 
> 时间：2012-07-06T08:47:35.267
> 
> 标签：c++, string, stl, vector

[这个问题与这个问题](https://stackoverflow.com/q/1556229/541686)有关，但并不完全相同。

**除了**与可读性相关的问题之外，使用`std::vector<char>`而不是`std::string`保存任意二进制数据有什么好处吗？

 **即与字符串相比，使用向量执行哪些任务更容易/更有效/更好？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-06T09:10:04.340

除了可读性（不应被低估）之外，我还可以想到使用`std::string`over的几个小性能/内存问题`std::vector`：

*   一些现代`std::string`实现使用[小字符串优化](https://stackoverflow.com/questions/2178281/small-string-optimization-for-vector)。如果存储的数据大于`string`的内部缓冲区，就变成了悲观化，降低了复制、移动和`swap`¹的效率，无益地增加了`sizeof()`。

*   一个有效的`std::string`实现将始终分配比当前大小至少多 1 个字节来存储终止空值（不这样做需要额外的逻辑`operator[]`来处理`str[size()]`）。

我应该强调，这两个问题都非常小。它们的性能成本很可能会在背景噪音中丢失。但你确实问了。

* * *

¹如果正在使用小字符串优化，则这些操作需要分支，而在良好的实现`size()`中它们没有。`std::vector`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:53:19.430

### 是的*，*`vector<char>`确实比.*`string`*

 *与, 不同`string`，`vector<char>` **保证**在操作期间保留迭代器、引用等`swap`。请参阅：**[可以`std::vector`利用小缓冲区优化吗？](https://stackoverflow.com/questions/8190950/may-stdvector-make-use-of-small-buffer-optimization)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:19:24.953

除了可读性，并确保另一个维护者不会混淆`std::string`. 如果效率是唯一的考虑因素，您当然也可以考虑 char*/malloc。

我能想到的一个潜在问题：

`std::string`默认为存储`<char>`。如果您以后需要处理另一种类型（例如 unsigned short），您可能需要：

*   创建您自己的 typedef `std::basic_string<unsigned short>`（这使您远离正常`std::string`处理）
*   尝试在 setter 中应用一些 reinterpret_cast 逻辑。

使用矢量，您可以简单地将容器更改为`std::vector<unsigned short>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:50:55.983

I think the only benefit you would gain from doing that would the ease of incrementing over the `std::vector` of characters, but even that can be done with an `std::string`.

You have to remember that even though `std::string` seems like an object, it can be accessed like an array, so even accessing specific parts of a string can be done without the use of a `std::vector`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:26:13.133

理想情况下，人们会使用它`vector<unsigned char>`来存储任意二进制数据——但我认为你已经知道这一点——正如你提到的旧问题。

除此之外，使用向量肯定会更节省内存，因为字符串会添加一个终止 Nul 字符。由于两者的分配机制不同，性能也可能会提高 - 向量保证连续内存！

除此之外，使用字符串是不正确的，因为调用者/用户可能会无意中调用一些字符串方法，这可能是一场灾难。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-10T08:22:48.473

正如其他答案所提到的，向量可能会稍微快一些，因为它保证了连续的内存，即使对于小尺寸也是如此，并且不会在最后添加额外的空字节。但是，连接两个字符串比连接两个向量要简单得多（在代码方面）：

使用`vector`：

```
vector<char> a, b;
// ...
vector<char> c;
c.insert(c.end(), a.begin(), a.end());
c.insert(c.end(), b.begin(), b.end()); 
```

使用`string`：

```
string a, b;
// ...
string c = a + b; 
```***

# .net - Outlook 互操作性：将字符串附加到邮件

> ID：11358880
> 
> 赞同：1
> 
> 时间：2012-07-06T08:47:40.570
> 
> 标签：.net, email, outlook, email-attachments

我想向 .net 创建的电子邮件 (Microsoft.Office.Interop.Outlook.MailItem) 添加一条消息。

但是，我没有文件，只有一个字符串。 [这种方法](http://msdn.microsoft.com/en-us/library/hh290846.aspx)就行不通了。

是否可以附加字符串作为附件？

# probability - Fokker-Planck：两个方向的对流

> ID：11358884
> 
> 赞同：1
> 
> 时间：2012-07-06T08:47:57.700
> 
> 标签：probability, pde, differential-equations

我正在尝试模拟 Fokker-Planck 过程，其中粒子在方向 A 上移动时间的一小部分 x 和方向 B 上（1-x）。我如何设置方程？或者我是否有可能解决两个福克-普朗克方程，一个用于每个平流分量，然后将每个方程的乘积与其对应的分数相加？

# android - 在 VideoView 上调用 stopPlayback() 时出现鬼图像

> ID：11358889
> 
> 赞同：0
> 
> 时间：2012-07-06T08:48:06.000
> 
> 标签：android, android-videoview

我注意到在某些设备上，当我`stopPlayback()`在 VideoView 上调用该方法时，最后一张图像仍显示在屏幕上。因此，如果有人知道如何处理它并使该图像消失（不改变视图的可见性或破坏它），我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:09:39.490

您可以扩展`VideoView`和覆盖`stopPlayback()`以用黑色填充视图，或者在停止时显示任何您想要显示的内容（`super.stopPlayback()`当然，在调用之后）。

# wordpress - 如何更改 wordpress “文档根目录”

> ID：11358893
> 
> 赞同：0
> 
> 时间：2012-07-06T08:48:25.343
> 
> 标签：wordpress

我已经在“/wordpress”中安装了 wordpress，而不是在站点根目录中，所以 wordpress 站点现在只能从[http://www.mysite.com/wordpress/ 访问](http://www.mysite.com/wordpress/)。如何将 wordpress 移动到站点根目录（以便可以从[http://www.mysite.com 访问](http://www.mysite.com)）并使其正常工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:14:37.590

您是否被锁定在您的网站上？您可能需要修改数据库以指向新的 url

请按照以下步骤 [操作 https://wordpress.org/support/article/moving-wordpress/](https://wordpress.org/support/article/moving-wordpress/)

您需要修改的数据库是 siteurl，wp_options 表中的主页 [http://codex.wordpress.org/Changing_The_Site_URL](http://codex.wordpress.org/Changing_The_Site_URL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:08:51.750

基本上，在 wp-admin 中，设置将站点地址更改为`http://www.mysite.com`并在服务器中将您的 wordpress 文件移动到文档根目录。

# android - ListView setSelection 和更改当前选定的行文本颜色

> ID：11358901
> 
> 赞同：1
> 
> 时间：2012-07-06T08:48:41.880
> 
> 标签：android, android-layout

我正在使用 LISTVIEW.setSelection(INT) 来选择我的列表视图中的某些项目。我还需要更改所选行中的样式，即更改其中 TextView 元素的颜色。我不知道如何解决这个问题。我试过设置 OnItemSelectedListener 但它永远不会被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:02:14.780

试试这个，如果你使用 ListActivity

```
View v=getListView().getChildAt(getSelectedItemPosition());
((TextView) v.findViewById(R.id.textViewID)).setTextColor(Color.RED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:04:10.313

在 res/color/ 中创建一个 list_item_color.xml，如下所示：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="#FFFFDD"/>
    <item android:color="#979B9E"/>
</selector> 
```

然后在您的布局 xml 中使用它。例如：

```
 <TextView
    android:id="@+id/list_item_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/list_item_color" /> 
```

当您设置选择时，TextView 将自动更改文本颜色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:06:38.370

您可以将此代码用作 textview 选择器。使用它作为您的文本视图背景。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <color android:color="@color/semitransparent_white" />
    </item>
    <item>
        <color android:color="@color/transparent" />
    </item>
</selector> 
```

# c# - Cascade dropdown tables

> ID：11358904
> 
> 赞同：0
> 
> 时间：2012-07-06T08:48:57.373
> 
> 标签：c#, database, asp.net-mvc-3, cascadingdropdown

I have Two Tables in an Access Database:-

TABLE1, Has only one column and is the primary key, each record must be unique.

TABLE2 will be CAR MODELS and will have two Columns which are CAR_MANUFACTURER && CAR MODEL. In this table CAR_MODEL IS UNIQUE. The relationship between the two tables is 1 TO MANY between the CAR_MANUFACTURER && CAR_MODEL.CAR_MANUFACTURER.

E.G

```
TABLE1
---------------
MANUFACTURER
----------------
NISSAN
FERRARI
PORSCHE
FORD

TABLE2
-----------------------------
CAR_MANUFACTURER : CAR_MODEL
-----------------------------
NISSAN           : Almera
FERRARI          : Testarossa
PORSCHE          : 911
NISSAN           : Juke
NISSAN           : Quashqai
PORSCHE          : Carrera
FERRARI          : F30 
```

I can pull the data out of the database using ADO.NET, and convert each table to SelectedItemList[] objects.

But I cannot figure out how i am to filter between these select lists in my View.

The first dropdownlistfor will have the Text & Value Property both Set at the same Value, "Car Manufacturer".

Its the second dropwdownlistfor that I am puzzled by.

If i set the Text property to "CAR_MODEL" and the value to "CAR_MANUFACTURUER", then I will be able to filter the data with a Jquery, something i haven't figured out yet.

But I have a property in my Model for this view , that I need to feed back the "Car Model" value, How would I do this when the dropdownlistFor Value property is set at "CAR_MANUFACTURER" in table 2 in order for the filter to work?

I apologise in advance for the insane description of my problem, but I'm getting further away from resolving this problem than fixing it at present. I can not get my head around it. I am new to ASP.NET MVC3.

# javascript - 在站点的另一个位置运行 java 脚本

> ID：11358911
> 
> 赞同：0
> 
> 时间：2012-07-06T08:49:16.263
> 
> 标签：javascript

我也搜索了互联网和这个网站，但没有找到答案。我想运行一个 javascript 代码，它将浏览我网站上的文章并选择和打印其中的一些。当我在这篇文章之后运行它时，该脚本运行良好：

[关于智能手机的文章]

[显示（打印）一些关于智能手机的文章的脚本]

显然，它可以正常工作，因为脚本有要搜索的内容 - 文章已经出现在站点上，所以 javascript 可以获取一些元素。

但我想颠倒顺序：

[在那里显示一些关于智能手机的文章]

[在那里显示有关智能手机的文章]

我假设我应该在加载文章后运行脚本，而不是更改由脚本打印的元素的位置。我可以用 position: absolute; 但这对我来说看起来不太优雅，我希望有另一种方法来解决我的问题。我在另一个地方尝试了 body onload 和 running 功能，但我没有成功。

感谢您的任何帮助和建议：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:56:48.230

目前尚不完全清楚您要使用脚本做什么。脚本不能引用在脚本之后加载的 DOM 元素。所以，如果这就是你想要做的，那么你的脚本必须在那些 DOM 元素被加载之后放置，或者它必须等到这些元素被加载后再执行。

如果您只是尝试重新排序现有的 DOM 元素，那么您可以使用`removeChild`and`appendChild`或`insertBefore`在页面布局流中重新定位 DOM 元素以更改排序。

如果您希望查看者看不到原始顺序，则可以设置初始 CSS 规则，使文章最初不可见，然后您可以重新排序并使其可见。查看者只会看到最终订单。

如果您需要更具体的建议，我会建议您使用您的实际代码，以便我们可以看到它实际上正在这样做，以便我们可以提供更具体的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:00:00.157

我想您正在使用 document.write 生成 HTML 代码以重新显示一些文章。*你不应该使用 document.write*。相反，将脚本放在文档的最后，以确保所有 HTML 元素都已经存在于 DOM 中。然后创建一个新的 HTMLNode，例如一个 div，并将其放在您想要的位置，或者从 DOM 中选择一个并将您的新 HTML 放入该节点（最简单的方法是设置`innerHTML`）。例如：

```
<body>
  <div id="some_articles">
  </div>
  <div id="all_articles">
    <!--- here is the code for all articles -->
  </div>
  <script>
    var div = document.getElementById('some_articles');
    div.innerHTML = '<!-- code for some of the articles -->';
  </script>
</body> 
```

然而，这是非常基本的 Javascript 知识。您真的应该阅读一本关于 Javascript 和 DOM 编程的好教程或书籍。

# html - 水平菜单 - li 的孩子 ul 的全宽

> ID：11358918
> 
> 赞同：1
> 
> 时间：2012-07-06T08:49:47.017
> 
> 标签：html, css, drop-down-menu, menu, submenu

我有一个带有表格/表格单元标签的水平菜单：

```
.menu {
  display: table;
  width: 100%;
}

.menu li {
  display: table-cell;
} 
```

```
<!doctype html>
<html>
  <body>
    <div style="width: 960px">
      <ul class="menu">
       <li><span>Selected Menu Item</span></li>
       <li><a href="#item">Another Item</a></li>
       <li><a href="#item">Another Item</a></li>
       <li><a href="#item">Another Item</a></li>
      </ul>
    </div>
  </body>
</html> 
```

这工作正常，但我也有像

```
<ul class="menu">
  <li><span>Selected Menu Item</span></li>
  <li><a href="#item">Another Item</a>
    <ul class="submenu">
      <li><a href="#sub">Submenu Item</a></li>
      <li><a href="#sub">Submenu Item</a></li>
    </ul>
  </li>
 </ul> 
```

现在通常我只会制作第一级 li`position: relative`和第二级 ul`position: absolute`并赋予它与我给 li 元素相同的大小；但在这种情况下，我没有固定的 li，所以我尝试了这个：

```
.menu li {
  position: relative;
}

ul.submenu {
  position: absolute;
  width: 100%;
} 
```

但它不是 - 正如我所期望的那样 - 扩展到其父元素 (li) 的 100% 宽度，而是获得最近的指定元素的宽度（在这种情况下，我认为宽度为 960px 的 div，但它也可能更大）。

* * *

我的问题是：是否可以将二级 ul 元素扩展到其父元素的宽度，即表格单元格样式的 li 而不回退到 JavaScript？

我知道这样一个事实，即我必须为禁用的浏览器编写脚本，例如 IE<=7。这是一个运行示例：http: [//jsfiddle.net/hy73d/](http://jsfiddle.net/hy73d/)

* * *

编辑#1：引起了我的注意，这实际上在 webkit-browser 和 opera 中有效；所以真正的问题是，壁虎有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:20:48.967

Firefox 不会让你[给 table-cells 一个相对位置](https://stackoverflow.com/questions/7629326/position-relative-in-firefox/7629567#7629567)。在您的内部使用另一个元素`td`并使其相对定位：

```
<ul class="menu">
  <li><span>Selected Menu Item</span></li>
  <li><a href="#item">Another Item with Sub</a>
    <div>
      <ul class="submenu">
        <li><a href="#sub">Submenu Item</a></li>
        <li><a href="#sub">Submenu Item</a></li>
      </ul>
    </div>
  </li>
  <li><a href="#item">Another Item</a></li>
  <li><a href="#item">Another Item</a></li>
</ul> 
```

当然，只将 CSS 规则应用于您的新 div：

```
.menu li {
  display: table-cell;
}
.menu li div {
  position: relative;
  background: #444;
} 
```

这将在所有浏览器中更好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:52:49.420

使用您的代码，我确实理解了为什么 ul 正在扩展，这是因为它相对于身体绝对定位并且其宽度为 100% 与身体的宽度相匹配。我宁愿觉得它比 chrome 的行为更合乎逻辑。现在，将位置更改为相对，使容器 ul 意识到它持有另一个 ul，因此它的 li 元素扩展以覆盖它，看看[http://jsbin.com/iwesoc/2/edit#preview](http://jsbin.com/iwesoc/2/edit#preview)但问题无法解决只需将其他 li 的高度设置为 0。因为它们继承了 ul 的高度。所以，我能得到的最接近的是这个解决方案[http://jsbin.com/iwesoc/2/edit#preview](http://jsbin.com/iwesoc/2/edit#preview)。也许，它有些用处。

# mysql - conversion from mysql to sqlite

> ID：11358919
> 
> 赞同：0
> 
> 时间：2012-07-06T08:49:54.170
> 
> 标签：mysql, sqlite

i'm trying to convert a MySql data base to Sqlite but i'm facing a problem with the unique constraint of primary key, here is my MySql table code:

```
 CREATE TABLE `table01` (
  `idtable1` INT(11) NOT NULL DEFAULT 0,
  `nom1` VARCHAR(50) NULL DEFAULT NULL,
  PRIMARY KEY (`idtable1` ASC),
  UNIQUE KEY `idtable1` (`idtable1` ASC)
) DEFAULT CHARSET=utf8 ENGINE=InnoDB; 
```

and when i convert it using DBconvert for SQLite & MySql here is what i get:

```
CREATE TABLE table01 (
  idtable1  int PRIMARY KEY NOT NULL DEFAULT 0,
  nom1      varchar(50) DEFAULT NULL
);

CREATE UNIQUE INDEX idtable1
  ON table01
  (idtable1); 
```

so when i read my data base, "using SQLite Maestro", SQLite Maestro fail to recognize the primary key's unique contraint.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:48:53.007

Possible reason may be SQLite's strange quirk: it is sensitive about the exact wording when it is about primary keys:

[http://www.sqlite.org/lang_createtable.html#rowid](http://www.sqlite.org/lang_createtable.html#rowid)

> A PRIMARY KEY column only becomes an integer primary key if the declared type name is exactly "INTEGER". Other integer type names like "INT" or "BIGINT" or "SHORT INTEGER" or "UNSIGNED INTEGER" causes the primary key column to behave as an ordinary table column with integer affinity and a unique index, not as an alias for the rowid.

# sql - sql中聚合函数的区别

> ID：11358925
> 
> 赞同：-1
> 
> 时间：2012-07-06T08:50:27.713
> 
> 标签：sql, oracle

我想知道为什么下面的查询没有正确检索两个聚合函数（sum）之间的差异？

```
SELECT 
    epa.status as Status,
    sum(equip_port_usage.total_nbr_ports) as Total,
    sum(equip_port_usage.NBR_PORTS_ASSIGNED) as Used,
    sum(equip_port_usage.NBR_PORTS_ASSIGNED)
      - sum(equip_port_usage.NBR_PORTS_ASSIGNED) as Difference
  FROM site_inst
  INNER JOIN site_attr_settings
     ON site_attr_settings.site_inst_id = site_inst.site_inst_id
  INNER JOIN epa on epa.site_inst_id=site_inst.site_inst_id
  INNER JOIN equip_inst ON equip_inst.site_inst_id=site_inst.site_inst_id
  INNER JOIN equip_port_usage
     ON equip_port_usage.equip_inst_id=equip_inst.equip_inst_id
WHERE site_inst.SITE_HUM_ID = 'CLEUS'
GROUP BY epa.status; 
```

输出如下

```
Ok        303876  10276     0
Faulty     19044    644     0
Reserved   19872    672     0 
```

我期待它是

```
Ok        303876  10276  293600
Faulty     19044    644   18400
Reserved   19872    672   19200 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:53:49.780

这是您的代码中的复制和粘贴失败。你在计算

```
sum(equip_port_usage.NBR_PORTS_ASSIGNED)
 - sum(equip_port_usage.NBR_PORTS_ASSIGNED) 
```

始终为 0。

尝试：

```
SELECT 
    epa.status as Status,
    sum(equip_port_usage.total_nbr_ports) as Total,
    sum(equip_port_usage.NBR_PORTS_ASSIGNED) as Used,
    sum(equip_port_usage.total_nbr_ports)
     - sum(equip_port_usage.NBR_PORTS_ASSIGNED) as Difference
  FROM site_inst
  INNER JOIN site_attr_settings
     ON site_attr_settings.site_inst_id = site_inst.site_inst_id
  INNER JOIN epa ON epa.site_inst_id=site_inst.site_inst_id
  INNER JOIN equip_inst ON equip_inst.site_inst_id=site_inst.site_inst_id
  INNER JOIN equip_port_usage
     ON equip_port_usage.equip_inst_id=equip_inst.equip_inst_id
 WHERE site_inst.SITE_HUM_ID = 'CLEUS'
 GROUP BY epa.status 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:53:18.093

你对同一列求和两次，然后减去两个结果，所以当然你总是会得到`0`.

# visual-studio-2010 - Visual Studio strange startup exception

> ID：11358928
> 
> 赞同：5
> 
> 时间：2012-07-06T08:50:41.253
> 
> 标签：visual-studio-2010, visual-studio

For some reason VS was not breaking on exception when running in debug mode, so I followed the advice given [here](https://stackoverflow.com/questions/116896/visual-studio-how-to-break-on-handled-exceptions) to go to Debug -> Exceptions and enable the CLR exceptions. I now get this error:

```
System.Globalization.CultureNotFoundException occurred
  Message=Culture is not supported.
Parameter name: name
uploads is an invalid culture identifier.
  Source=mscorlib
  ParamName=name
  InvalidCultureName=uploads
  StackTrace:
       at System.Globalization.CultureInfo..ctor(String name, Boolean useUserOverride)
  InnerException: 
```

This error occurs on startup, but only some of the time.

The advice [here](https://stackoverflow.com/questions/2116821/net-4-0-culturenotfoundexception) then recommends that I do the exact opposite and uncheck the debug the CLR option, but I am then back to square one! A poster suggests that it is a bug, but the post is two years old, so surely that has been fixed by now.

I am not using globalisation.

# java - Scala 开发人员应该了解 Java 和/或 JVM 什么？

> ID：11358929
> 
> 赞同：18
> 
> 时间：2012-07-06T08:50:42.513
> 
> 标签：java, scala, jvm

所以直到大约 6 个月前，我的大部分工作（大图处理）都由 Python 和 C++ 组成。到那时，甚至现在，我还没有写过任何 Java。我看过这种语言并且熟悉语法（来自 C/C++ 背景），并且喜欢 JVM 的想法，但从来没有实际上写了大量的Java。

当我拿起 Scala 时，我很喜欢它，OOP 和函数式编程功能合二为一，而且它在 JVM 上很棒。我一直在努力改进我的 Scala 并且一直在使用 Akka，并且仍然喜欢它。然而，有时，也许只是我想多了，但我觉得我应该多学习一些关于 Java 和/或 JVM 的知识。

我从很多人那里听说 Scala 应该被视为与 Java 不同的语言，就像 C++ 到 C 一样。也许你可能有同样的感觉，也许学习 Java 与学习 Scala 或多或少是脱节的，但我感觉在学习更多关于 JVM（例如 JIT 编译、类型擦除）的信息会有所帮助吗？

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T08:59:55.703

1.  JVM 执行字节码，知道它是如何工作的肯定会很有帮助，就像有时知道 C/C++ 方法调用如何工作或类如何初始化一样；因为有时它很重要，无法抽象掉。

2.  Java 是 JVM 的主要语言，如果您需要直接使用 Java 类，在一定程度上能够阅读 Java 会很有帮助。这可能经常发生；仅举几个例子：

    *   你需要使用一些第三方 Java 库（而且有很多）
    *   使用属性
    *   您需要在 Swing 中做一些 Scala-Swing 包装器不支持的特殊操作
    *   还有解释 1) 的资料的来源很可能会使用 Java 示例

但我的建议是不要提前研究它——你会在需要的时候拿起它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-06T12:59:21.437

立即购买这本书：[Java 性能](https://rads.stackoverflow.com/amzn/click/com/0137142528)。它是去年 10 月才发布的，对于任何想要了解 JVM 的人来说，它都是一个信息宝库。如果您要成为一名 Scala 开发人员，您至少必须了解垃圾收集和 JVM 运行时参数。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-06T15:53:37.237

**在我头顶**

*   原语、自动装箱以及 java 数组的特殊之处；

*   擦除和显现

*   scala 源代码中的逻辑尾递归调用是如何编译的

*   在您的平台上安装 -client、-server 以及当您想尝试 32 位时：例如 JAVA_HOME 和 OS X 中的“Java 首选项”。我*认为*openJDK 应该可以在您使用相同版本的 Oracle JDK 的任何地方工作，但 IntelliJ 警告您只使用官方 Oracle JDK。我看到非常孤立的报告说 3d 图形库在 openJDK 上存在问题，并且 openJDK 的某些部分（如字体）也存在许可问题。

*   在 REPL、编译器选项和 SBT 中设置类路径

*   热点开关、XMX、XMS（堆设置）、最常见的垃圾收集器、内联方法调用

*   java.util.concurrent

*   在 JDK 6 和 7 中编译的 java 和 scala 代码可能存在二进制兼容性问题。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-06T09:04:50.427

我不确切知道您需要什么，但是关于 SO 有几个类似的问题，请看。

*   [更好地理解 JVM](https://stackoverflow.com/questions/617592/understanding-jvm-better)
*   [了解 Sun JVM](https://stackoverflow.com/questions/351729/understanding-the-the-sun-jvm)

另外，这里有关于 Java 内存模型的好文章

*   [Java 理论与实践：修复 Java 内存模型，第 1 部分](http://www.ibm.com/developerworks/library/j-jtp02244/index.html)
*   [Java 理论与实践：修复 Java 内存模型，第 2 部分](https://www.ibm.com/developerworks/library/j-jtp03304/)

我认为最好用 Java 语言进行挖掘，编写一些代码，阅读 Java 特定的书籍，以便更好地了解所有事物的工作原理。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-06T16:32:16.027

围绕 JVM 有很多工具。如果您想了解您的程序是如何运行的（出于性能或其他原因），那么这些都是值得的。两个有用的工具是：

1.  [堆栈](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstack.html)
2.  [视觉虚拟机](http://visualvm.java.net/)

两者对于监控和询问长时间运行的进程都特别有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T09:39:08.103

我想你在编写 Scala 时会更多地了解 JVM。我的意思是你会有更多的问题，比如“为什么这个解决方案很慢而那个很快？” - 回答这个问题的一种方法是检查字节码

# magento - Receiving "Query was empty" error when loading log visitor collection in Magento

> ID：11358932
> 
> 赞同：1
> 
> 时间：2012-07-06T08:50:54.327
> 
> 标签：magento, logging, collections, model, visitor-pattern

How does one retrieve a collection of visitors using the Log/Visitor model? I've tried using the following code....

```
<?php 
error_reporting(E_ALL);
ini_set('display_errors',TRUE);
$root = $_SERVER['DOCUMENT_ROOT'];
require_once $root.'/app/Mage.php';
Mage::app('default');

$visitors = Mage::getModel('log/visitor')->getCollection()->load();
?> 
```

But it returns an error, an excerpt from which is...

```
SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty 
```

The query doesn't throw any errors until I add the 'load()' method to the chain. My question is similar to [magento visitor logs](https://stackoverflow.com/questions/7147564/magento-visitor-logs), but that code example was missing the load() and the only answer resorted to using the resource model directly, which I don't think should be necessary.

Update:

Magento version being used is 1.4.1.1\. Full exception trace:

Fatal error: Uncaught exception 'Zend_Db_Statement_Exception' with message 'SQLSTATE[42000]: Syntax error or access violation: 1065 Query was empty' in /home/dev_fluid/public_html/lib/Zend/Db/Statement/Pdo.php:234 Stack trace: #0 /home/dev_fluid/public_html/lib/Zend/Db/Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array) #1 /home/dev_fluid/public_html/lib/Zend/Db/Adapter/Abstract.php(468): Zend_Db_Statement->execute(Array) #2 /home/dev_fluid/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('', Array) #3 /home/dev_fluid/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(333): Zend_Db_Adapter_Pdo_Abstract->query('', Array) #4 /home/dev_fluid/public_html/lib/Zend/Db/Adapter/Abstract.php(706): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array) #5 /home/dev_fluid/public_html/lib/Varien/Data/Collection/Db.php(707): Zend_Db_Adapter_Abstract->fetchAll(Object(Varien_Db_Select), Array) #6 /home/dev_fluid/public_html/lib/Varien/Data/Collection/Db.php(620): Varien_Data_Collect in /home/dev_fluid/public_html/lib/Zend/Db/Statement/Pdo.php on line 234

New trace, using's Jurgen's getTraceAsString() approach:

```
#0 /home/dev_fluid/public_html/lib/Zend/Db/Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array) 
#1 /home/dev_fluid/public_html/lib/Zend/Db/Adapter/Abstract.php(468): Zend_Db_Statement->execute(Array) 
#2 /home/dev_fluid/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('', Array) 
#3 /home/dev_fluid/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(333): Zend_Db_Adapter_Pdo_Abstract->query('', Array) 
#4 /home/dev_fluid/public_html/lib/Zend/Db/Adapter/Abstract.php(706): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array) 
#5 /home/dev_fluid/public_html/lib/Varien/Data/Collection/Db.php(707): Zend_Db_Adapter_Abstract->fetchAll(Object(Varien_Db_Select), Array) 
#6 /home/dev_fluid/public_html/lib/Varien/Data/Collection/Db.php(620): Varien_Data_Collection_Db->_fetchAll(Object(Varien_Db_Select)) 
#7 /home/dev_fluid/public_html/lib/Varien/Data/Collection/Db.php(590): Varien_Data_Collection_Db->getData() 
#8 /home/dev_fluid/public_html/app/code/core/Mage/Log/Model/Mysql4/Visitor/Collection.php(300): Varien_Data_Collection_Db->load(false, false) 
#9 /home/dev_fluid/public_html/andy/visitor.php(11): Mage_Log_Model_Mysql4_Visitor_Collection->load() 
#10 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:48:15.553

请将您的代码更改为：

```
<?php 
error_reporting(E_ALL);
ini_set('display_errors',TRUE);
$root = $_SERVER['DOCUMENT_ROOT'];
require_once $root.'/app/Mage.php';
Mage::app('default');

$visitors = Mage::getModel('log/visitor')->getCollection();
try {
    $x = $visitors->load();
    die('no exception');
}
catch (Exception $e) {
    var_dump($e->getTraceAsString());
} 
```

如果异常发生在`load()`方法中，这应该会给你一个完整的跟踪。

如果该跟踪不能帮助您确定问题，我建议使用 PHP 调试器，如 xdebug、Zend Debug 或 DBG 等（取决于您的 IDE 支持的调试器）。

在方法之前设置断点`load()`并单步执行代码应该会给你一个线索，为什么查询是空的。

# cakephp - 如何使用 jmeter 测试 cakephp 应用程序

> ID：11358937
> 
> 赞同：0
> 
> 时间：2012-07-06T08:51:10.160
> 
> 标签：cakephp, jmeter

我有一个 cakephp 应用程序，想用 JMeter 测试一下，在我的应用程序前面，我们需要先登录，登录后我们可以访问该页面。我已经在 J​​Meter 中写入了参数名称和值，以便 JMeter 可以自动登录。我这样写：

名称：值：

```
data[User][username]           admin
data[User][password]           12345 
```

然后，我添加了两个 HTTP 请求，第一个是访问默认页面，第二个是访问索引表单。但是当我运行应用程序时，我在结果中发现了这个：

```
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: Running the test! 
2012/07/06 15:49:33 INFO  - jmeter.gui.util.JMeterMenuBar: setRunning(true,*local*) 
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: Starting 5 threads for group J Meter User. 
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: Thread will continue on error 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread started: J Meter User 1-1 
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: All threads have been started 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread finished: J Meter User 1-1 
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread J Meter User 1-1 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread started: J Meter User 1-2 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread finished: J Meter User 1-2 
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread J Meter User 1-2 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread started: J Meter User 1-3 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread finished: J Meter User 1-3 
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread J Meter User 1-3 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread started: J Meter User 1-4 
2012/07/06 15:49:33 INFO  - jmeter.threads.JMeterThread: Thread finished: J Meter User 1-4 
2012/07/06 15:49:33 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread J Meter User 1-4 
2012/07/06 15:49:34 INFO  - jmeter.threads.JMeterThread: Thread started: J Meter User 1-5 
2012/07/06 15:49:34 INFO  - jmeter.threads.JMeterThread: Thread finished: J Meter User 1-5 
2012/07/06 15:49:34 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread J Meter User 1-5 
2012/07/06 15:49:34 INFO  - jmeter.engine.StandardJMeterEngine: Notifying test listeners of end of test 
2012/07/06 15:49:34 INFO  - jmeter.gui.util.JMeterMenuBar: setRunning(false,*local*) 
2012/07/06 15:49:34 INFO  - jmeter.engine.StandardJMeterEngine: Test has ended on host null 
```

有人可以告诉我如何使用 JMeter 访问 cakephp 中的登录表单，以便我可以在我的应用程序中进行负载测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-20T14:56:50.463

JMeter 日志文件的信息量不是很大，我建议使用[View Results Tree](http://jmeter.apache.org/usermanual/component_reference.html#View_Results_Tree)侦听器来可视化响应并调试您的脚本，因为它甚至可以呈现 HTML。

有关登录事件的正确模拟，请参阅[ASP.NET Login Testing with JMeter](http://blazemeter.com/blog/aspnet-login-testing-jmeter)指南。您的 cakephp 应用程序中将有不同的动态参数，但是一般方法应该是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:51:18.947

通常你需要知道你登录的是哪个 url。如果你不知道它在你的页面源`form`元素中。

并检查表格`method`类型。通常是`POST`。当用户登录时，通常会在他/她的身边存储一些东西，比如 cookie，`SESSION_ID`或者不是我不确定 cakePHP 是如何工作的。

因此，创建一个`Http sampler`从表单发布到该 url 并提取会话 id 值。

您需要`Http Cookied Manager`这样才能存储您的 session_id 或您使用的任何标识符，以便以登录用户身份继续。

因此，除非您注销，否则所有具有您之前授权的会话 ID 的请求自然都可以访问受保护的页面。

差不多就这些了，应该不会太难。

# vb.net - 在 VB.NET 中使用 ProcessCmdKey 函数会在对象中留下一个字符

> ID：11358938
> 
> 赞同：1
> 
> 时间：2012-07-06T08:51:26.227
> 
> 标签：vb.net

下面是我的 ProcessCmdKey 代码。

```
Public Class EmployeeStatus

    Protected Overrides Function ProcessCmdKey(ByRef msg As Message, ByVal keyData As Keys) As Boolean
        Handl(msg, keyData, bNavi)
    End Function

    Public Function Handl(ByRef msg As Message, ByVal keyData As Keys, ByRef bNavi As BindingNavigator) As Boolean
        Try
            If keyData = (Keys.Control or Keys.S) Then
                TBSave
                Return True
            end if
        Catch ex As Exception
            Return False
        End Try
    End Function

    Public Function TBSave() as Boolean
        Try
            'Some code for saving to database
        Catch ex As Exception
            msgbox(ex.message)
        End Try
    End Function

End Class 
```

一切正常，除非它专注于文本框。它在对象中留下字符“S”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:12:59.000

我无法用第一个代码块重现它。当你说`it leaves character "S" in the object`你的意思是它离开了文本框？

如果 ProcessCmdKey 方法返回 true，则它已[处理命令键](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.processcmdkey%28v=vs.85%29.aspx)。但是，在您编辑您的调用`Handl`并**没有返回其结果*true*时，只需添加 Returns 关键字来修复它**：

```
Protected Overrides Function ProcessCmdKey(ByRef msg As Message, ByVal keyData As Keys) As Boolean
    Return Handl(msg, keyData, bNavi)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:47:26.193

我只是想通了...我只是为`msg`变量分配了一个空白字符串，仅此而已。

# android - 本机代码中的指针索引超出范围？

> ID：11358943
> 
> 赞同：4
> 
> 时间：2012-07-06T08:51:53.570
> 
> 标签：android

你能帮我追踪这个堆栈跟踪吗 - 它似乎不在我的代码中，或者至少给我一些跟踪问题的提示？

```
java.lang.IllegalArgumentException: pointerIndex out of range
    at android.view.MotionEvent.nativeGetAxisValue(Native Method)
    at android.view.MotionEvent.getY(MotionEvent.java:1989)
    at android.widget.FastScroller.onTouchEvent(FastScroller.java:854)
    at android.widget.AbsListView.onTouchEvent(AbsListView.java:3024)
    at android.view.View.dispatchTouchEvent(View.java:5564)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2052)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1813)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2080)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1931)
    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1390)
    at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1879)
    at android.view.View.dispatchPointerEvent(View.java:5766)
    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
    at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4441)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

我有各种可能源自的列表，并且只有一个使用 FastScroller。（如果我假设这是快速滚动条。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:13:12.453

请参阅[Android 错误数据库条目](http://code.google.com/p/android/issues/detail?id=18990)

当我`ScaleGestureDetector`通过在`ViewPager.onTouchEvent`.

# twitter - 如何在 Twitter 中获取性别和年龄图？

> ID：11358944
> 
> 赞同：2
> 
> 时间：2012-07-06T08:51:55.823
> 
> 标签：twitter, graph, twitter-oauth

我必须在 twitter 中显示性别和年龄的图表，如 facebook 人口统计图（附上）......

是否可以根据关注者数量使用 oauth 或 api 从 twitter 获取性别和年龄数据？

![](../Images/3906c4547fd34201d4bd464f3d8a5914.png)

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T02:13:53.173

根据 Twitter 员工@episod Taylor Singletary 的说法，

> API 无法提供诸如此类的人口统计数据——而且并不总是合适的，因为 Twitter 帐户可以代表许多事物，不仅限于活着或死去的人。

[在这里](https://dev.twitter.com/discussions/5030)阅读他的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T09:11:36.603

当你创建一个 Twitter 帐户时，它从不询问性别。所以毫无疑问可以通过 API 获得它。

# java - 如何让线程在 Java 中等待 1 毫秒？

> ID：11358945
> 
> 赞同：0
> 
> 时间：2012-07-06T08:52:01.483
> 
> 标签：java, multithreading

如果我有某一行，我希望任何线程在执行它之前等待 1 毫秒。请问我怎样才能做到这一点。我在我想要的行之前使用以下行，但不确定这是否正确：

```
try // wait for 1 millisecond to avoid duplicate file name
{
Thread.sleep(1);  //wait for 1 ms

}catch (InterruptedException ie)
{
System.out.println(ie.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:09:03.733

很少有系统在`System.currentTimeMillis()`调用中具有 1ms 的分辨率。如果您想等到它发生变化，那么这就是您应该做的。

```
long start = System.currentTimeMillis();
while ( System.currentTimeMillis() == start ) {
  Thread.sleep(1);
} 
```

或者更好一点：

```
private static long lastMillis = 0;

static synchronized long nextMillis() throws InterruptedException {
  long nextMillis;
  while ((nextMillis = System.currentTimeMillis()) == lastMillis) {
    Thread.sleep(1);
  }
  return lastMillis = nextMillis;
} 
```

# asp.net - 使用 Web 服务调用应用程序

> ID：11358947
> 
> 赞同：0
> 
> 时间：2012-07-06T08:52:05.813
> 
> 标签：asp.net, web-services, webinvoke

我正在尝试在我的服务器 windows server2008 上编写一个 Web 服务来调用我服务器上的一些应用程序。我使用 system.diagnostics.process 类来调用 exe 文件。它在服务器本身上运行良好，但是当我在另一台电脑上使用 web 服务时，我收到错误消息，即找不到指定的文件。但是当我刚刚启动 cmd.exe 时，它​​也可以正常工作。据我了解，我可以访问至少可以运行 cmd.exe 的服务器。但是当涉及到调用不同的 exe 时，它​​就不起作用了。我也有另一个线索，当我远程运行 cmd.exe 时，它​​运行，我尝试远程杀死它，然后它给我错误“访问被拒绝”。

我不熟悉这种服务器访问权限工作。因此我需要一些帮助。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:23:18.990

您需要确保 IIS 中的应用程序池以有权在该服务器上执行可执行文件的用户身份运行。

只是一个警告（您可能知道）：如果您将这些服务暴露在任何地方，这将是一个巨大的安全风险。打开服务来运行应用程序可能会有风险，所以我会确保没有其他方法可以做你想要完成的事情。

# eclipse - 尝试为 eclipse indigo 安装 redmine mylyn 连接器

> ID：11358951
> 
> 赞同：1
> 
> 时间：2012-07-06T08:52:21.657
> 
> 标签：eclipse, redmine, mylyn, redmine-plugins

我正在尝试在 eclipse indigo 中设置 mylyn redmine 连接器。

我从这里安装了插件，没有错误：

[http://redmin-mylyncon.sourceforge.net/update-site/N/](http://redmin-mylyncon.sourceforge.net/update-site/N/)

然后，当我打开任务存储库视图并尝试添加新的任务存储库时，它没有给我 redmine 连接器的选项，只有 bugzilla 和 trac。作为替代方案，我可以安装孵化器并使用通用网络连接器，但我想避免这条路线。

我在eclipse上安装的软件是：

*   CollabNet 合并客户端 2.2.4
*   适用于 Java EE 开发人员的 Eclipse IDE 1.4.2.20120213-0813
*   Geronimo v2.1 服务器适配器 2.1.8
*   JNA 库 3.2.7
*   Mylyn 构建连接器：Hudson/Jenkins（孵化）0.9.1.v20120425-0100
*   Mylyn 连接器：Redmine 0.3.6.201202270649
*   Mylyn 连接器：Redmine - Redmine-Plugin-Support 0.1.0.201202270649
*   Mylyn 上下文连接器：C/C++ 开发 5.3.1.v20120425-0100
*   Mylyn 上下文连接器：插件开发 3.7.1.v20120425-0100
*   Mylyn 评论连接器：Gerrit（孵化）0.9.1.v20120425-0100
*   Mylyn 任务连接器：Trac 3.7.1.v20120425-0100
*   Mylyn 版本连接器：CVS（孵化）0.9.1.v20120425-0100
*   Mylyn 版本连接器：Git（孵化）0.9.1.v20120425-0100
*   子剪辑（必需）1.6.18
*   Mylyn 3.x 的 Subclipse 集成（可选）3.0.0
*   Subversion 客户端适配器（必需）1.6.12
*   Subversion JavaHL 本机库适配器（必需）1.6.17
*   颠覆修订图 1.0.9
*   SVNKit 客户端适配器（不需要）1.6.15
*   SVNKit 库 1.3.5.7406

# java - Netbeans：需要在类路径中包含第 3 方目录

> ID：11358953
> 
> 赞同：0
> 
> 时间：2012-07-06T08:52:34.423
> 
> 标签：java, netbeans, classpath, netbeans-platform

我们有一个基于 NetBeans 平台在 NetBeans 中开发的应用程序。我们有一个运行时依赖的第 3 方程序，更具体地说，是其他程序 lib 文件夹中的一个 jar。

我们应该如何在类路径中包含其他程序的 jar？

其他程序制造商的建议是将环境变量 CLASSPATH 设置为包括

```
C:\Progam Files\Other Program\lib\theJAR.jar 
```

如果这不可能，我们应该将 JAR.jar 复制到`JRE-HOME\lib\ext`

我们不能将 JAR.jar 复制到其他任何地方，这可能会导致它停止工作......

现在，NetBeans 不会注意到环境变量 CLASSPATH 上的内容。他们推荐的方法似乎是制作一个包装器，但这会导致复制 jar，除非有某种方法可以制作一个指向 CLASSPATH 的包装器模块？

目前我们正在将 jar 复制到`JRE-HOME\lib\ext`. 但是，当我们安装一些 java 更新时，就会有不必要的麻烦。

你有解决这个问题的办法吗？看起来可能很简单，但我还没有找到合适的地方看......

编辑：该应用程序是基于蚂蚁的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:55:50.350

从 Module System API 的[运行时基础架构概述](http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/doc-files/classpath.html)的文档（页面底部的“常见问题和解决方案”部分下）：

> **问**：我的模块可以从 IDE [阅读：平台] 安装之外的类路径中添加库 JAR 吗？...
> 
> **答**：不容易。你有几个选择：
> 
> 1.  向 ide.cfg [您的应用的 .config 文件] 添加一个条目。例如：
> 
> **-cp:ac:\eak\lib\eak.jar**此启动文件提供了将类路径条目添加到 IDE 的 Java 调用的能力。
> ...

它继续列出另外两个选项。第二个选项与您提出的解决方案相同。第三个是“对你的模块进行分区并使用新的类加载器”，我不推荐任何一种方式，因为我没有这样做的经验（但值得一读）。

假设您正在寻找第一个选项，[您需要将自定义 .conf 文件添加](https://blogs.oracle.com/geertjan/entry/support_for_custom_configuration_files)到您的项目并在 project.properties 文件中指向它，如下所示`app.conf=nbproject/my.conf`：这会将您的自定义 .conf 文件添加到应用程序的安装目录，而不是通常添加的默认配置文件。当然，您需要将`-cp:a c:\eak\lib\eak.jar`条目添加到此自定义配置文件中才能加载 .jar。

在开发过程中，您需要将以下条目添加到 project.properties 文件中：`run.args.extra=-cp:a c:\eak\lib\eak.jar`. 这会将命令行选项传递给您的调试实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:33:11.083

您可以按照以下步骤添加该 .jar 文件：

1.  在名为“Projects”的左侧面板中打开您的项目并右键单击“Libraries”，然后选择“Add JAR/Folder...”。

2.  然后在打开的下一个对话框中从您存储它的位置选择您的 .jar 文件，然后按“打开”。

3.  沃拉完成！！！（使用相同的过程，您还可以添加其他库，如 JavaCV、JMF 等）

4.  现在您可以使用项目库中的 .Jar 文件了。

希望能帮助到你。

# php - json 成功消息 shawn

> ID：11358961
> 
> 赞同：0
> 
> 时间：2012-07-06T08:52:52.350
> 
> 标签：php, jquery

我尝试确认一封电子邮件是使用 JSON 发送的，然后使用 ajax 处理该事件并在屏幕上显示一条成功消息。问题是未发送电子邮件，并且由于 php 脚本的第一部分，我被重定向到“已发送”：true。html和css都可以，我测试了很多。我真正想要的是用 php 发送电子邮件，而不是使用 ajax 来显示成功或错误消息。问题是我这是我第一次使用 php，我只是找不到正确的方法。我不会问这个，但我必须在今晚之前交付项目，这是最后要做的事情。您可以在以下网址查看它：[http](http://webofdreams.ro/vworker/finemaid/finemaid.html#) ://webofdreams.ro/vworker/finemaid/finemaid.html#在电子邮件我们链接下。

JS：

```
$ajax({
                     "type":"POST",
                     "url":"sendemail1.php",
                     "data": { name1: name1Val, emailFrom1: emailFrom1Val, comments: commentsVal},
                     "dataType":'json',
                     "success":function(response){
                         if (response.sended){
                            alert ("Mail Sended ok"); //Code after mail send
                           }else{
                            alert (response.error); //Code or allert on error
                           }
                          },                
                     error: function (xhr, ajaxOptions, thrownError){
                      alert(xhr.status+" "+thrownError);
                     } 
```

php:

```
$send = @mail($mailTo, $subject, $message, "From: ".$mailFrom1); 
if ($send){
    echo mail($mailTo, $subject, $message, "From: ".$mailFrom1) ? '{"sended":true}':'{"sended":false,"error":"Mail send fail."}';
}else{
 echo '{"sended":false,"error":"Request Error."}';
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:58:48.103

首先，我在您的代码中发现了一个错误

```
$.ajax({
 ^                    "type":"POST",
 |                    "url":"sendemail1.php",
 |                    "data": { name1: name1Val, emailFrom1: emailFrom1Val, comments: commentsVal},
                     "dataType":'json',
                     "success":function(response){
                         if (response.sended){
                            alert ("Mail Sended ok"); //Code after mail send
                           }else{
                            alert (response.error); //Code or allert on error
                           }
                          },   

         ----------->error: function (xhr, ajaxOptions, thrownError){
                      alert(xhr.status+" "+thrownError);
                    // should be 
         ----------->"error": function (xhr, ajaxOptions, thrownError){
                      alert(xhr.status+" "+thrownError);

                     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:08:24.700

您的 ajax 请求充满了错误，所以我从头开始编写，下面的脚本将至少处理 ajax 请求。

```
 $(function(){
        name1Val = 'CaptureName';
        emailFrom1Val = 'CaptureEmail';
        commentsVal = 'CaptureComments';
        parameters = 'name1=' + name1Val + '&emailFrom1=' + emailFrom1Val + '&comments=' + commentsVal;
        $.ajax({
            type: "POST",
            url: "sendmail.php",
            data: parameters,
            error: function(response){
                alert(response);
            },
            success: function(response){
                alert(response);
            }
        });
    }); 
```

# python - 如何分析我的 python 应用程序的类方法？

> ID：11358963
> 
> 赞同：3
> 
> 时间：2012-07-06T08:53:04.453
> 
> 标签：python, profiler

过去，我在同一个文件中编写了包含所有函数的 python 代码，我可以使用以下代码分析我的程序：

这是我写的一个装饰器：

```
def do_profile(cond):
    def resdec(f):
        if not cond:
            return f
        return profile(f)
    return resdec 
```

这就是我使用它的方式：

```
@do_profile(DO_PROFILE)
def my_func():
    return 1 
```

`kernprof.py`然后我会在我的脚本上调用：

```
kernprof.py  -l my_program.py 
```

与此同时，我对 OOP 更加熟悉，我将我的程序重写为许多类，现在程序开始如下：

```
 if __name__ == "__main__":
     my_app = myApp()
     my_app.run() 
```

`myApp`是一个也与其他类进行大量通信的类：

```
class myApp():
    @do_profile(DO_PROFILE)
    def foo_method(self, arg1):
        pass 
```

我已经`do_profile`在每个方法前面添加了装饰器`myApp`，但是如果我运行`kernprof.py`，结果`.prof`文件是空的

那么分析类方法的最简单方法是什么？我真的很想用装饰器和标志打开/关闭它。

**EDIT1：**我对这里最简单的解决方案非常感兴趣。找到一个装饰器是一个优雅的解决方案，但也许事情可以做得更容易。我不想做的是使用`cProfile's`profile之类的东西`profile.runctx('self.baz()', globals(), locals())`。在处理许多类和方法时，这不是一个实用的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:04:34.290

看看[雅皮](http://code.google.com/p/yappi/ "亚皮")

要分析一段代码，只需使用：

```
import yappi
[...]
yapp.start()
some_function_that_needs_profiling()
yappi.print_stats() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:14:52.080

函数本身就是一个装饰器`profile`，和大多数装饰器一样，它们只需要应用于函数。

幸运的是，类方法基本上是在创建实例时绑定到实例的函数。因此，您可以通过方法本身将装饰器放在类定义中来将装饰器应用于任何类方法：

```
class myApp(object):
    @do_profile(DO_PROFILE)
    def foo_method(self, arg1):
        pass

    @do_profile(DO_PROFILE)
    def bar_method(self, arg2):
        pass 
```

如果您使用 python 2.6 或更高版本，您还可以创建一个[类装饰器](http://www.python.org/dev/peps/pep-3129/)并将该`profile`装饰器应用于任何给定类的*所有*方法。您可以通过将装饰器放在类定义之前来应用它：

```
@do_profile_all_methods(DO_PROFILE)
class myApp(object):
    def foo_method(self):
        pass 
```

这样的装饰器可能看起来像这样：

```
import types

def do_profile_all_methods(cond):
    if not cond:
        return lambda c: c # Do nothing with the class; the 'null' decorator
    def profile_all_methods(klass):
        for name, attr in klass.__dict__.items():
            if isinstance(attr, types.UnboundMethodType):
                klass[name] = profile(attr)
        return klass
    return profile_all_methods 
```

此装饰器仅将`profile`包装器应用于直接方法，而不是从基类继承的任何方法。

# android - 如何使我的应用程序支持多个屏幕，并且屏幕上所有元素的唯一对齐方式？

> ID：11358969
> 
> 赞同：-1
> 
> 时间：2012-07-06T08:53:13.143
> 
> 标签：android

我正在做一个具有表格布局和按钮的 android 应用程序我想支持我的应用程序到多个屏幕我必须采取什么预防措施，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:00:37.530

读这个：

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

和这个：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# java - 如何在散点图中添加一条线？（Java，jmathplot）

> ID：11358974
> 
> 赞同：0
> 
> 时间：2012-07-06T08:53:22.273
> 
> 标签：java, scatter-plot

使用此代码，我可以绘制散点图。

```
import javax.swing.*;
import org.math.plot.*;
public class ScatterPlotExample {

public static void main(String[] args) {

    double[] x = new double[] { 60 };
    double[] y = new double[] { 50 };

    // create your PlotPanel (you can use it as a JPanel)
    Plot2DPanel plot = new Plot2DPanel();

    // add a line plot to the PlotPanel

    plot.addScatterPlot("teeeeest", x, y);

    // put the PlotPanel in a JFrame, as a JPanel
    JFrame frame = new JFrame("a plot panel");
    frame.setSize(600, 600);
    frame.setContentPane(plot);
    frame.setVisible(true);

} 
```

}

两个问题：

如何使轴范围从 1 到 100？
如何在 x = 0.4 和 y = 0.7 处在该散点图中绘制一条水平线和一条垂直线？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:59:26.667

*   设置 X 轴范围：

    `plot.setFixedBounds(0,1,100)` **->**（其中 0 表示 X，1 表示 Y）

*   在 Y=49.5 处添加一条水平线：

    `plot.addPlotable(new Line(Color.red, new double[]{plot.plotCanvas.base.getMinBounds()[0],49.5}, new double[]{plot.plotCanvas.base.getMaxBounds()[0],49.5}));`

# c# - 抽象类和接口的多重继承

> ID：11358976
> 
> 赞同：11
> 
> 时间：2012-07-06T08:53:37.787
> 
> 标签：c#

我在 C#.NET 中编写了以下代码

```
public interface IWork
{
    void func();

}
public abstract  class WorkClass
{
    public void func()
    {
        Console.WriteLine("Calling Abstract Class Function");
    }

}

public class MyClass:WorkClass,IWork
{

} 
```

在编译时，我没有收到任何错误。编译器不会强迫我实现方法“func();” 在从接口“IWork”派生的“MyClass”中，我可以优雅地创建“MyClass”类的实例并调用函数“func()”。为什么编译器不强迫我在“MyClass”中实现“func()”方法（它是从“IWork”接口派生的？它是C#中的一个缺陷吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-05-13T10:55:40.100

在阅读有关此主题的内容时，我发现自己无法轻易将所有内容放在脑海中，因此我编写了以下代码，它充当了 C# 工作原理的备忘单。希望它可以帮助某人。

```
public interface IMyInterface
{
    void FunctionA();
    void FunctionB();
    void FunctionC();
}

public abstract class MyAbstractClass : IMyInterface
{
    public void FunctionA()
    {
        Console.WriteLine( "FunctionA() implemented in abstract class. Cannot be overridden in concrete class." );
    }

    public virtual void FunctionB()
    {
        Console.WriteLine( "FunctionB() implemented in abstract class. Can be overridden in concrete class." );
    }

    public abstract void FunctionC();
}

public class MyConcreteClass : MyAbstractClass, IMyInterface
{
    public override void FunctionB()
    {
        base.FunctionB();
        Console.WriteLine( "FunctionB() implemented in abstract class but optionally overridden in concrete class." );
    }

    public override void FunctionC()
    {
        Console.WriteLine( "FunctionC() must be implemented in concrete class because abstract class provides no implementation." );
    }
}

class Program
{
    static void Main( string[] args )
    {
        IMyInterface foo = new MyConcreteClass();
        foo.FunctionA();
        foo.FunctionB();
        foo.FunctionC();
        Console.ReadKey();
    }
} 
```

给出以下输出：

FunctionA() 在抽象类中实现。不能在具体类中被覆盖。

FunctionB() 在抽象类中实现。可以在具体类中被覆盖。

FunctionB() 在抽象类中实现，但可以在具体类中覆盖。

FunctionC() 必须在具体类中实现，因为抽象类不提供实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T20:56:04.120

为了更好地理解接口背后的概念，我只是给你正确的实现代码：

```
public interface IWork{
    void func();
}

public abstract class WorkClass,IWork{
    public void func(){
        Console.WriteLine("Calling Abstract Class Function");
    }
}

public class MyClass:WorkClass{
...
} 
```

基本规则：您需要始终在实现所在的位置包含接口。因此，如果您在抽象类中创建一个方法并定义该方法的接口，则需要将该接口实现到您的抽象类中，然后所有子类将自动实现该接口。

事实上，接口有两种你可以使用它们的功能：

1）作为一个“真实”接口，提供对实现该接口的任何类的通用处理，因此您可以仅通过一个接口处理多种类（不知道它们的真实类名）。而“处理”的意思是：调用方法。

2）帮助其他（框架）程序员不要弄乱你的代码。如果您想确保一个方法不会被另一个名称替换，您可以为您的类定义一个包含所有“必须具有”的方法名称的接口。即使该方法被无处调用，您的程序员在更改方法名称时也会收到编译错误消息。

现在您`Myclass`只需通过界面即可轻松处理`IWork`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T08:54:56.907

因为`abstract`类实现了接口。

如果您的类`MyClass`不会从`WorkClass`您那里继承，则会收到一条错误消息`'MyClass' does not implement interface member 'IWork.func()'`。

但是您也继承自`WorkClass`，它实际上实现了接口所需的方法。

`func()`如果你想强制继承自它的类像这样实现它，你可以标记为抽象：

```
public abstract class WorkClass
{
    public abstract void func();

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-21T12:29:18.300

我在我的解决方案中尝试了上面的类。它继承了抽象类，因此派生类具有 func() 方法定义。这就是它无法显示编译错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T08:56:11.203

`func()`未标记为`abstract`，`WorkClass`因此您无需在派生自 的任何类中实现它`WorkClass`。

`WorkClass`实现了`IWork`接口，所以你不需要实现它，`MyClass`因为它继承`func()`自`WorkClass`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T08:56:47.873

由于抽象类中的func方法是非虚方法，所以编译器认为这个方法是接口的实现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T09:02:20.810

当您扩展`MyClass`到`WorkClass`时，将继承该方法`func()`（已定义）。

因此，当实现接口时`IWork`，已经定义了方法“func()”。因此，在`MyClass`.

因此，该类`MyClass`是一个具体的类，因此您可以创建一个`MyClass`对象而不会出现任何编译错误。

# list - 在haskell中列出排列

> ID：11358979
> 
> 赞同：0
> 
> 时间：2012-07-06T08:54:06.260
> 
> 标签：list, haskell, permutation

所以我是haskell的新手，我已经玩了一段时间了。我想让我的函数输出所有列表排列来工作。我写了 2 个实现，一个运行良好，另一个给我一个错误。任何帮助都是极好的。

这是第一个（工作）实现：

```
permute [] = [[]]
permute xs = [y| x <- xs, y <- map (x:) $ permute $ delete x xs] 
```

这给了我一个错误：

```
permute [] = [[]]
permute xs = map (\x -> map (x:) $ permute $ delete x xs) xs 
```

这是错误消息：

```
Occurs check: cannot construct the infinite type: t0 = [t0]
Expected type: [t0]
Actual type: [[t0]]
In the expression: map (x :) $ permute $ delete x xs
In the first argument of `map', namely
`(\ x -> map (x :) $ permute $ delete x xs)' 
```

如果有人能解释我为什么会收到此错误，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T09:04:12.480

使用类型签名使编译器的工作更轻松。

`permute :: Eq a => [a] -> [[a]]`，现在我们有：

```
Couldn't match type `a' with `[a]'
  `a' is a rigid type variable bound by
      the type signature for permute :: Eq a => [a] -> [[a]]
      at perm.hs:4:1
Expected type: [a]
  Actual type: [[a]] 
In the expression: map (x :) $ permute $ xs
In the first argument of `map', namely
  `(\ x -> map (x :) $ permute $ xs)' 
```

所以，似乎我们需要使用`concatMap`而不是`map`.

```
permute :: Eq a => [a] -> [[a]]
permute [] = [[]]
permute xs = concatMap (\x -> map (x:) $ permute $ delete x xs) xs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T16:43:11.433

如果你不确定你有一个类型`deriving Eq`（需要使用`delete`），你可以使用这样的东西：

```
perms :: [a] -> [[a]]
perms [] = [[]]
perms [a] = [[a]]
perms [a,b] = [[a,b],[b,a]]
perms xs = concatMap f [0..length xs - 1] where
  f i = map ((xs!!i):) $ perms $ exclude i xs
  exclude n xs = take (n) xs ++ drop (n+1) xs 
```

也许这是一个矫枉过正:)

# javascript - 原型命名空间

> ID：11358982
> 
> 赞同：0
> 
> 时间：2012-07-06T08:54:18.113
> 
> 标签：javascript, node.js

我有一个构造函数“Animals”，即命名其他一些构造函数，“鳄鱼”和“猴子”：

```
var Monkey = function(Animals) {
  this.Animals = Animals;
};

Monkey.prototype.feedMe = function() {
  this.Animals.feed();
};

var Crocodile = function(Animals) {
  this.Animals = Animals;
};

Crocodile.prototype.feedMe = function() {
  this.Animals.feed();
};

var Animals = function(zoo) {
  this.zoo = zoo;
};

Animals.prototype.feed = function() {
  //feed the animal
};

Animals.prototype.Monkey = function() {
  this.Animals = Animals.prototype;
};

Animals.prototype.Monkey.prototype = Monkey.prototype;

Animals.prototype.Crocodile = function() {
  this.Animals = Animals.prototype;
};

Animals.prototype.Crocodile.prototype = Crocodile.prototype; 
```

目的是我应该能够执行以下操作：

```
var animals = new Animals("NY");
var monkey = new animals.Monkey();

monkey.feed(); 
```

我收到一条错误消息，指出 monkey.feed() 不是函数。我假设我在继承 Animal 构造函数中的 Monkey 函数的方式上做错了，但是对于我的一生，我一直无法找到解决方案。

**我应该使用什么方法来命名这些函数？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:49:34.717

我已经看到了很多东西，但是滥用命名空间的原型，到底是什么。一个又好又简单的问题有什么问题：

```
var Animals = {
   Crocodile: {

   }
} 
```

或者，如果您想要构造方法：

```
var Animals = function () {
    return {
       Crocodile: function () {}
    }
};

var a = new Animals();
var c = new a.Crocodile(); 
```

# php - 验证 PHP 中的名字和姓氏以存储在 OpenLDAP 中

> ID：11358984
> 
> 赞同：1
> 
> 时间：2012-07-06T08:54:31.587
> 
> 标签：php, validation, zend-framework, ldap

您好我正在尝试验证一些用户输入，但我不确定正确的方法是什么。

我想验证用户创建表单的名字和姓氏字段。我在 Zend 框架中使用 PHP，所以我将编写一个验证器。在做了一些研究之后，我认为我真的应该允许所有 UTF8 字符，开头或结尾没有空格。我不确定正则表达式，但我稍后会发现，我很可能会使用 php 的 preg_match。

我将这些详细信息存储在 OpenLDAP 中，使用 sn 字段作为姓氏，将 givenName 字段作为名字。我应该如何限制名称？OpenLDAP 中的长度是否有限制，我需要检查它接受的字符还是接受所有字符？

我是否应该验证名字和姓氏，还是应该让用户输入他们想要的内容？

我为用户名使用了一个单独的字段，该字段由“text.text”组成，文本是 A-Za-z 字符。

我没有发布代码，因为我只是需要一些指导，不太确定这里的最佳做法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:19:47.730

验证名称是一个坏主意。对于名称中允许的内容没有通用规则，尤其是当您还想允许非西方文本时。

这对 LDAP 提出了挑战，因为无法保证目录能够理解用户输入的字符集。不过，有一个简单的解决方案：`base64_encode()`在将它们存储到 LDAP 之前的值，以及`base64_decode()`它们在出路时的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:46:34.390

无需验证名称。目录服务器模式指定所有属性的语法，包括`givenName`和`sn`。服务器将正确编码任何显示的名称。如果一个`DirectoryString`值以空格开头或结尾，服务器将对该值进行 base64 编码以进行存储。

尽管存在实际限制，但 LDAP 客户端不应假定服务器具有强制属性值的非零长度的能力。一些属性语法被定义为*非零*长度（例如`DirectoryString`），但没有定义上限，因此，客户端不应假定服务器强制执行上限。

### 也可以看看

*   [LDAP：语法和匹配规则](https://www.rfc-editor.org/rfc/rfc4517.html)

# java - 单例对象和 Java servlet

> ID：11358985
> 
> 赞同：0
> 
> 时间：2012-07-06T08:54:35.093
> 
> 标签：java, servlets

当我从一个 servlet 访问一个单例 Java 对象时，该对象只是给定 servlet 线程的“单个”或“一个实例”，还是整个服务器操作系统（如 Linux）上的 JVM 中的单个？

我的意思是当客户端连接到 servlet/服务时，单例对象对于为每个客户端创建的每个线程是唯一的，还是在机器中安装的整个 JVM 中是唯一的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:02:16.817

我认为该对象对于每个用户都是唯一的，而不是整个 JVM。唯一持久的信息是您放入用户会话的信息。

我不确定，但我认为您可以使用[ClassLoader 类](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)在整个应用程序服务器中拥有一个类的实例，但是我不知道它是如何完成的。

**更新：**

摘自 Java 文章[“什么时候单例不是单例？”](http://www.javaworld.com/article/2074897/java-web-development/when-is-a-singleton-not-a-singleton-.html)

**不同的类加载器同时加载多个单例** 当两个类加载器加载一个类时，你实际上有两个类的副本，每个副本都可以有自己的单例实例。这与在某些 servlet 引擎（例如 iPlanet）中运行的 servlet 尤其相关，其中每个 servlet 默认使用自己的类加载器。事实上，访问联合 Singleton 的两个不同的 servlet 将获得两个不同的对象。

多个类加载器比您想象的更常见。当浏览器从网络加载类以供小程序使用时，它们为每个服务器地址使用单独的类加载器。类似地，Jini 和 RMI 系统可以为它们下载类文件的不同代码库使用单独的类加载器。如果您自己的系统使用自定义类加载器，则可能会出现所有相同的问题。

如果由不同的类加载器加载，两个同名的类，甚至同一个包名，都被视为不同的——即使它们实际上是逐字节的同一个类。不同的类加载器代表区分类的不同命名空间（即使类的名称相同），因此这两个 MySingleton 类实际上是不同的。（请参阅参考资料中的“类加载器作为命名空间机制”。）由于两个 Singleton 对象属于两个同名的类，因此乍一看会出现同一个类的两个 Singleton 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:56:33.320

我想说这取决于单例的实现方式，但是给定应用程序的所有请求都在同一个 VM 中执行，因此它应该是所有请求的一个实例。

编辑：这是假设一个简单的单例实现类似于：

```
public class MySingleton {
    private static MySingleton _instance;

    // for sake of simplicity, I've left out handling of 
    // synchronization/multi-threading issues...
    public static MySingleton getInstance() {
        if (_instance == null) _instance = new MySingleton();
        return _instance;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:08:47.867

是的`Singleton`。但是单例的范围取决于类所在的位置。

如果它位于应用程序内部，则该应用程序是单例的。如果相同的类存在于另一个应用程序中，则为该应用程序创建另一个对象，并且该应用程序是单例的。

如果它位于应用程序外部和服务器内部，则它对于 VM 来说是单例的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-07T14:59:08.607

根据这个

[https://tomcat.apache.org/tomcat-8.0-doc/class-loader-howto.html](https://tomcat.apache.org/tomcat-8.0-doc/class-loader-howto.html)

每个 Web 应用程序都有自己的类加载器，因此单例对于一个应用程序来说是唯一的，并且对另一个应用程序不可见

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T08:59:55.760

当您创建一个 Singleton 实例时，所有请求实例将为其使用的当前类加载器共享同一个实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T09:07:59.047

由于所有`Servlets`运行在一个运行在单个 的网络服务器上`JVM`，因此所有 servlet 将只有一个`Singelton`对象。

# java - 使用 XML 在 Java 代码中填充下拉菜单

> ID：11358986
> 
> 赞同：0
> 
> 时间：2012-07-06T08:54:36.010
> 
> 标签：java, xml

我正在编写一个 Java 程序，该程序正在使用基于 Web 的 HTML 和 Wicket。现在，我需要在 Java 中创建一个下拉菜单，然后使用 XML 文件填充下拉菜单中的实际选项。

首先，我创建了一些 XML 代码。

```
<item>
    <label>Send to SugarCRM</label>
</item>

<item>
    <label>E-Mail Data</label>
</item>

<item>
    <label>Print Data</label>
</item> 
```

这是正确的，如果是这样，我如何将它链接到Java Drop Down？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:25:22.297

首先你需要解析 XML 文件，这个链接会有所帮助，

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

现在，按照解析示例，创建一个返回值列表的函数（在您的情况下，它不是嵌套的，因此它将返回字符串列表），然后使用“JSTL”迭代列表

像这样：

`

```
<%

List<String> lst = YouClass.getStringFromXML(); //function should return list of values from xml

%>

    <select name="">

      <c:forEach var="data" items="${lst}">    

        <option value="x">data</option>

      </c:forEach>

  </select> 
```

# jquery - option:selected 在 $.map() 中不起作用

> ID：11358987
> 
> 赞同：0
> 
> 时间：2012-07-06T08:54:47.690
> 
> 标签：jquery, css-selectors

我已经开始编写一个函数来用自定义 HTML 列表替换选择框。我似乎无法让 ":selected" 选择器被识别为选定的选项。我尝试了一些方法，我的选择框确实有带有选定属性的选项；]

对此的任何帮助都非常感谢。

```
$('select').each(function(){
    var $ulSelect = $('<ul />');
    var $options;
    var $numSelected = 0;

    $options = $('option', this).map(function(index, element){
        var $selectedClass = '';
        if ($(element).is(':selected')) {
            $numSelected++;
            $selectedClass = ' class="selected"';
        }
        return $('<li data-value="'+ $(element).val() +'"'+ $selectedClass +'>'+ $(element).text() +'<a href="#" class="x-link"></a></li>');
    }).appendTo($ulSelect);

    var $ulSelectWrap = $('<div />')
        .addClass('ul-select-wrap')
        .prepend($ulSelect)
        .prepend('<span class="selected">'+ $('option:eq(0)', this).text() + $activeText +'</span>');

    $(this).hide().before($ulSelectWrap);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:17:20.650

我在 jsFiddle 中检查了您的代码，发现选择一个实际选择的元素没有问题。我遇到的问题是您不能`.appendTo`使用数组（由 .map() 返回）。所以我建议改用这个：

```
$.each($options, function() {
    $(this).appendTo($ulSelect);
}); 
```

我想，另一个问题是使用`$('option:eq(0)', this)`而不是`$('option:selected', this)`; 前者总是将第一个选项显示为活动的（尽管只有`li`与所选元素对应的元素正确具有`selected`类）。

检查[演示](http://jsfiddle.net/5eq48/)以查看代码的更新版本。

# ninject - 使用 Ninject，我将如何使用当前范围内的对象来确定它是否仍在范围内？

> ID：11358988
> 
> 赞同：4
> 
> 时间：2012-07-06T08:54:55.590
> 
> 标签：ninject

我有一个场景，只要一个对象上的方法返回 true，多个并发 Web 请求就应该重用一个对象。有问题的对象是线程安全的。

所以我需要当前范围内的对象来确定它是否仍在范围内。使用 Ninject 完成此任务的最佳方法是什么？

虽然可能不需要回答这个问题，但目标是在未更改基础索引的情况下重用 Lucene IndexSearcher / IndexReader。Reader 有一个 IsCurrent 方法，如果索引已更改，则该方法返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:39:00.310

Hy，您可以定义自己的范围对象。只要作用域对象是活动的并且没有改变，ninject 就会返回绑定类型的相同实例。自定义范围需要检查 IsCurrent 是否返回 false。[您可以在https://github.com/ninject/ninject.extensions.namedscope/tree/master/src/Ninject.Extensions.NamedScope](https://github.com/ninject/ninject.extensions.namedscope/tree/master/src/Ninject.Extensions.NamedScope)中查看如何实现自定义范围 。请注意，当您开发自己的范围时，您必须注意不要创建永远不会为 GC 释放的对象！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:06:19.740

为了对我来说最好的实现你想要的是使用提供者：

```
Bind<ILuceneIndex>().ToProvider(new LuceneIndexProvider()); 
```

并在提供程序中应用您的重新创建逻辑。

# android - 使用phonegap插件而不使用条形码库的条形码扫描仪？

> ID：11358992
> 
> 赞同：0
> 
> 时间：2012-07-06T08:55:07.903
> 
> 标签：android, html, cordova, phonegap-plugins

我正在开发 phonegap android 应用程序。这对我来说是全新的。我想用条形码扫描仪开发一个应用程序。它也可能使用意图调用。这意味着条形码意图是从 java 代码中调用的，一旦扫描结果应该显示在 HTML 页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:48:43.140

来自 phonegap 插件的这段代码按预期工作：

```
 public PluginResult execute(String arg0, JSONArray arg1, String arg2) {
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.setPackage("com.google.zxing.client.android");
    //  intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
        ctx.startActivityForResult(this, intent, 0);

        return new PluginResult(PluginResult.Status.OK);
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == 0) {
            Log.i("Cordova", "result " + resultCode);
            if (resultCode == Activity.RESULT_OK) {
                String contents = intent.getStringExtra("SCAN_RESULT");
                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");

                Log.i("Cordova", "contents " + contents + ", format " + format);
                // Handle successful scan
            } else if (resultCode == Activity.RESULT_CANCELED) {
                // Handle cancel
                Log.i("Cordova", "scan cancelled");
            }
        }
    } 
```

使用 Cordova 1.7 和 Android 2.2 测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:14:05.817

只需转到[并](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner) 按照自述文件中的说明进行操作。

将此添加到您的项目后，您可以使用类似

```
window.plugins.barcodeScanner.scan( function(result) {
        alert("We got a barcode\n" +
                  "Result: " + result.text + "\n" +
                  "Format: " + result.format + "\n" +
                  "Cancelled: " + result.cancelled);
    }, function(error) {
        alert("Scanning failed: " + error);
    }
); 
```

进行扫描。

# vbscript - 使用 objshell.run 时找不到文件 -- vbscript

> ID：11358993
> 
> 赞同：2
> 
> 时间：2012-07-06T08:55:12.320
> 
> 标签：vbscript

当我尝试运行脚本时，它会抛出文件不存在的错误。在脚本上它确实会回显文件存在。已尝试使用 objshell.run """apppath""" 但没有运气.. :( 请帮忙。

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objShell = CreateObject("WScript.Shell")
AppPath =  objshell.ExpandEnvironmentStrings("%ProgramFiles%") + "\ERUNT\ERUNT.EXE"
wscript.echo apppath
if fx = objfso.FileExists("apppath") then
wscript.Echo "File Exists"
objshell.run apppath
Else
Wscript.echo "File Does not Exist"
end IF 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:55:13.250

Apppath 包含空格。尝试用引号括起来。

```
objshell.run vbQuote & apppath & vbQuote 
```

# java - 从 spring 使用 HSQLDB 时的 Blob 大小限制

> ID：11358994
> 
> 赞同：0
> 
> 时间：2012-07-06T08:55:14.013
> 
> 标签：java, spring, blob, hsqldb, lob

我正在使用 HSQLDB 进行测试。该数据库是通过扫描模型从 spring 创建的。其中一个模型是包含附件的消息（因此导致 lob）。尝试保存带有附件的消息时，会导致：org.hsqldb.HsqlException：数据异常：字符串数据，右截断。附件最大只有 4kb。有没有办法从 spring 配置 hsql lob 字段的大小限制？我确定异常是由附件引起的，因为当我评论该行（添加附件）时一切正常。

我的弹簧配置：

```
<bean id="transactionManager"
      class="org.springframework.orm.hibernate3.HibernateTransactionManager"
      autowire="autodetect">

    <property name="dataSource">
        <ref local="hsqlDbDataSource"/>
    </property>
</bean>

<bean id="persistenceManager"
      class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

<bean class="org.springframework.beans.factory.config.PropertyOverrideConfigurer">
    <property name="ignoreResourceNotFound">
        <value>true</value>
    </property>
    <property name="location">
        <!--  You may use file:d:/temp/db.properties etc here -->
        <value>classpath:dispatcher.model.db.properties</value>
    </property>
</bean>

<!-- HSQLDB DS -->
<bean id="hsqlDbDataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver"/>
    <property name="url" value="jdbc:hsqldb:mem:dispatcher"/>
    <property name="username" value="sa"/>
    <property name="password" value=""/>
    <property name="initialSize" value="20"/>
    <property name="maxActive" value="10"/>
    <property name="poolPreparedStatements" value="true"/>
    <property name="maxOpenPreparedStatements" value="10"/>
</bean>

<!-- Hibernate SessionFactory -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="hsqlDbDataSource"/>

    <property name="packagesToScan">
        <list>
            <value>com.company.project.dispatcher.model.**.*</value>
        </list>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.generate_statistics">true</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.cache.use_query_cache">true</prop>
            <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.SingletonEhCacheProvider</prop>
            <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
       </props>
    </property>
</bean> 
```

消息模型：

```
 public class FaxMessage extends Message implements  IFaxMessage {

/** Serial Version UID. */
private static final long serialVersionUID = -558902226L;   

/** Field mapping. */
private Long gatewayMessageId;
/** Field mapping. */
private Integer numberOfPages;
/** Field mapping. */
private Boolean pdfAttached;
/** Field mapping. */
private Byte[] pdfData;
/** Field mapping. */
private String subject;
/** Field mapping. */
private String tiffFileLocation; 
```

...

```
/**
 * Return the value associated with the column: pdfData.
 * @return A Byte[] object (this.pdfData)
 */
@Basic( optional = true )
@Column( name = "pdf_data"  )
public Byte[] getPdfData() {
    return this.pdfData;

}

/**  
 * Set the value related to the column: pdfData.
 * @param pdfData the pdfData value you wish to set
 */
public void setPdfData(final Byte[] pdfData) {
    this.pdfData = pdfData;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:49:28.473

字节数组不会自动映射到 Lob。您可能需要将`@Lob`注释添加到属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:11:42.257

我不知道这是否与您的问题有关，但是：

为什么要 a`Byte[]`而不是 a `byte[]`？有一个巨大的开销，没有任何收获。我不知道有任何处理`Byte`对象数组的库。您应该将类​​型更改为`byte[]`!

# iphone - iPhone ios 5，在每个模拟器运行时重新创建数据库？

> ID：11358998
> 
> 赞同：1
> 
> 时间：2012-07-06T08:55:22.923
> 
> 标签：iphone, cocoa, sqlite

如何在每次模拟器运行时替换我的应用程序中的数据库（使用我正在处理的数据库）？（仍在添加数据并想检查它是否看起来不错）

我试过了，但它似乎没有工作，仍然使用旧数据库：

```
- (void)viewDidLoad
{
    dbname = @"animaldatabase.sql";
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    dbpath = [documentsDir stringByAppendingPathComponent:dbname];

    [self checkAndCreateDatabase];
    [self readAnimalsFromDatabase];

    [super viewDidLoad];
    // Do any additional setup after loading the view.

    mylabel.text = [NSString stringWithFormat:@"%d", [animals count]];
}

- (void) checkAndCreateDatabase{
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    success = [fileManager fileExistsAtPath:dbpath];
    if (success) {
     //return;
        [fileManager removeItemAtPath:dbpath error:nil];
    }

    NSString *dbPathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:dbname];
    [fileManager copyItemAtPath:dbPathFromApp toPath:dbpath error:nil];
} 
```

iphone数据库的位置在哪里？当我的应用程序将数据库复制到 iphone 中时，它会在哪里结束？

**更新**

还添加了加载代码。

森蒂尔库玛：

我看不到这应该如何解决问题？如果它已经存在，这不只是跳过复制或我的数据库吗？

我想要的是删除我的 iphone 应用程序中的数据库。导入新数据库，然后运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:48:07.940

为了帮助调试文件管理器操作，尝试使用该`error`参数会有所帮助，如下所示：

```
NSError* error;
[fileManager copyItemAtPath:dbPathFromApp toPath:dbpath error: &error];
if (error != nil) {
    NSLog(@"copyItemAtPath generated error=%@", [error localizedDescription]);
} 
```

如果您这样做，错误消息将被写入您的调试器控制台/标准输出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:29:37.590

使用以下代码代替。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
 databaseName=@"yourfileName.sqlite";
 NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDir = [documentPaths objectAtIndex:0];
 databasePath = [documentsDir stringByAppendingPathComponent:databaseName]; 
[self checkAndCreateDatabase]; 

}
-(void) checkAndCreateDatabase {

BOOL success;

NSFileManager *fileManager = [NSFileManager defaultManager];

success = [fileManager fileExistsAtPath:databasePath];

if(success) return;
else
    printf("NO File found");

NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

[fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

} 
```

# iphone - 我们可以在 xcode 中将 iOS 本机应用程序转换为 Web 应用程序吗

> ID：11358999
> 
> 赞同：0
> 
> 时间：2012-07-06T08:55:30.980
> 
> 标签：iphone, ios, xcode

有什么方法可以将 ios 原生应用程序转换为 Web 应用程序，因为客户端有一个只能查看 html5 应用程序 pdf 文件或任何 Web 应用程序的主件应用程序。

那么无论如何将ios本机应用程序转换为网络应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:09:18.900

我不认为这是可能的。您必须将其重新编码为 Web 应用程序。没有 Objective-C -> html5 转换器。