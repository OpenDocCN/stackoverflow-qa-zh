# StackOverflow 问答 11385000-11385999

# datatemplate - Metro 风格应用程序中的 XAML 图像质量（插值）

> ID：11385000
> 
> 赞同：5
> 
> 时间：2012-07-08T17:08:28.490
> 
> 标签：datatemplate, microsoft-metro, winrt-xaml

给定以下 Image 对象（它位于 ListView 对象的 DataTemplate 中）：

```
 <Image Source="{Binding ImgSource}" ImageOpened="img_ImageOpened" /> 
```

我应该如何获得高质量的双三次插值图像？（在屏幕上，此图像的大小小于源 PNG，但默认调整大小似乎是使用质量较差的“最近邻”插值执行的）。

由于我想单独依赖数据绑定（每当关联数据项的 ImgSource 更改时，Image 内容应该更改），我尝试设置一个 ImageOpened 处理程序并将刚刚加载的图像更改为质量更好的图像.

不幸的是，下面的代码似乎不起作用（我只是得到空图像）：

```
 async void LoadImage(Image imgControl, string source)
    {
        try
        {
            StorageFile file = await StorageFile.GetFileFromPathAsync(source);

            IRandomAccessStream fileStream = await file.OpenAsync(FileAccessMode.Read);
            BitmapDecoder decoder = await BitmapDecoder.CreateAsync(fileStream);

            InMemoryRandomAccessStream ras = new InMemoryRandomAccessStream();
            BitmapEncoder enc = await BitmapEncoder.CreateForTranscodingAsync(ras, decoder);

            enc.BitmapTransform.InterpolationMode = BitmapInterpolationMode.Cubic;
            enc.BitmapTransform.ScaledHeight = Convert.ToUInt32(imgControl.ActualHeight);
            enc.BitmapTransform.ScaledWidth = Convert.ToUInt32(imgControl.ActualWidth);

            await enc.FlushAsync();

            Windows.UI.Xaml.Media.Imaging.BitmapImage bImg = new Windows.UI.Xaml.Media.Imaging.BitmapImage();
            bImg.SetSource(ras);
            imgControl.Source = bImg;
        }
        catch (Exception e)
        {
            return;
        }
    }

    void img_ImageOpened(object sender, RoutedEventArgs e)
    {
        Image imgControl = (Image)sender;
        LoadImage(imgControl, <path to PNG file>);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:41:55.957

我在我的 WinRT 应用程序中遇到了同样的图像质量问题，并尝试使用 RenderOptions.BitmapScalingMode 但它在 Windows Store 的 .NET 中不存在（以及 System.Windows.Media 命名空间）。因此，我尝试了您的第一个解决方案并对其进行了修复以使其有效。你离成功只有一小步，只需要添加

```
ras.Seek(0); 
```

允许从头开始读取流。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T18:27:47.823

我知道这有点晚了，但它可能对其他人有用。不需要这样的处理程序：您只需要设置[RenderOptions.BitmapScalingMode](http://msdn.microsoft.com/en-us/library/system.windows.media.renderoptions.bitmapscalingmode.aspx)附加属性的值。

```
<Image Source="{Binding ImgSource}" ImageOpened="img_ImageOpened" RenderOptions.BitmapScalingMode="HighQuality" /> 
```

# android - 需要帮助查找适用于 android 的文件共享云

> ID：11385003
> 
> 赞同：-4
> 
> 时间：2012-07-08T17:08:54.650
> 
> 标签：android

我正在开发一个应用程序，它将拍摄照片并将其上传到云端并返回文件所在的 url 链接，因此我可以通过我自己的 sms 程序将 url 链接发送给用户。

我正在寻找一个简单的文件共享程序来与 Java Api 一起使用。

这是几个链接：[http ://alternativeto.net/software/4shared/?platform=android](http://alternativeto.net/software/4shared/?platform=android)

我正在考虑使用 cx.com 但没有 java api。

第二个选择是糖同步。

我想要一些输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:23:41.537

由于您使用的是 Android，我强烈建议您将 Google Drive 与最近发布的 Google Drive SDK 一起使用：[https](https://developers.google.com/drive/) ://developers.google.com/drive/ 。

您的所有用户都将拥有一个包含 Google 帐户的云端硬盘帐户，因此您的用户无需注册文件共享服务即可使用您的应用。

# android - NullPointer 由于数据库不包含数据

> ID：11385009
> 
> 赞同：-1
> 
> 时间：2012-07-08T17:10:10.367
> 
> 标签：android, sqlite

```
07-08 17:04:34.978: E/AndroidRuntime(322): FATAL EXCEPTION: main
07-08 17:04:34.978: E/AndroidRuntime(322): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gurpswu.gurps/com.gurpswu.gurps.Home}: java.lang.NullPointerException
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.os.Looper.loop(Looper.java:123)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-08 17:04:34.978: E/AndroidRuntime(322):  at java.lang.reflect.Method.invokeNative(Native Method)
07-08 17:04:34.978: E/AndroidRuntime(322):  at java.lang.reflect.Method.invoke(Method.java:507)
07-08 17:04:34.978: E/AndroidRuntime(322):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-08 17:04:34.978: E/AndroidRuntime(322):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-08 17:04:34.978: E/AndroidRuntime(322):  at dalvik.system.NativeStart.main(Native Method)
07-08 17:04:34.978: E/AndroidRuntime(322): Caused by: java.lang.NullPointerException
07-08 17:04:34.978: E/AndroidRuntime(322):  at com.gurpswu.gurps.Player.getIntField(Player.java:153)
07-08 17:04:34.978: E/AndroidRuntime(322):  at com.gurpswu.gurps.Home.hudSetup(Home.java:102)
07-08 17:04:34.978: E/AndroidRuntime(322):  at com.gurpswu.gurps.Home.onCreate(Home.java:25)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-08 17:04:34.978: E/AndroidRuntime(322):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-08 17:04:34.978: E/AndroidRuntime(322):  ... 11 more 
```

我有一个游戏。当用户第一次打开应用程序并按下继续游戏按钮时，游戏将尝试使用下面的代码从数据库中检索值。

```
 stats.open();
    playerId = stats.getIntField(stats.KEY_ROWID);
    String playerName = stats.getStringField(stats.KEY_NAME);
    String playerCity = stats.getStringField(stats.KEY_CITY);
    playerHealth = stats.getIntField(stats.KEY_HEALTH);
    playerEnergy = stats.getIntField(stats.KEY_ENERGY);
    playerRank = stats.getIntField(stats.KEY_RANK);
    playerCash = stats.getIntField(stats.KEY_CASH);
    stats.close(); 
```

但是，这些数据库字段均未填充...如何安装检查...以便仅在数据库存在时运行此代码。如果它不存在，那么它将要求玩家开始一个新游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:15:03.777

`stats`完成后必须进行检查`stats.open()`，您应该调用返回行数的东西。如果行为 0，您可以设置条件。

或者您可以尝试使用**NullPExe**

```
try{
    stats.open();
    playerId = stats.getIntField(stats.KEY_ROWID);
    String playerName = stats.getStringField(stats.KEY_NAME);
    String playerCity = stats.getStringField(stats.KEY_CITY);
    playerHealth = stats.getIntField(stats.KEY_HEALTH);
    playerEnergy = stats.getIntField(stats.KEY_ENERGY);
    playerRank = stats.getIntField(stats.KEY_RANK);
    playerCash = stats.getIntField(stats.KEY_CASH);
    stats.close();
} catch(NullPointerException e) { .. do needful or return null } 
```

# jquery - jQuery 自动完成 texbox 与 asp.net gridview

> ID：11385010
> 
> 赞同：0
> 
> 时间：2012-07-08T17:10:45.263
> 
> 标签：jquery, asp.net, gridview, autocomplete

我有一个自动完成的 jQuery 文本框和一个 asp.net gridview 数据绑定到一些数据库数据。

用户从自动完成文本框中选择了一些项目，作为响应，我创建了一个对服务器的 ajax 调用以获取与该选择相关的数据，并尝试将相关数据绑定到 gridview。

问题是，gridview 不会更改其数据，并且尽管我更改了旧数据源，但仍保留在旧数据源中 - gridview 在服务器上获取新数据源。

有什么建议么？

# java - 未找到扫描程序类 java 文件

> ID：11385013
> 
> 赞同：2
> 
> 时间：2012-07-08T17:11:12.003
> 
> 标签：java, java.util.scanner, readfile

Scanner Class找不到我使用NetBeansIDE的文件，test.txt在文件夹路径：D:\netbeans project works\ReadFile\src\readfile\test.txt

在同一文件夹中存在 readfile.java。代码如下。它生成找不到文件。

```
package readfile;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;

public class ReadFile {

    public static void main(String[] args) throws IOException , FileNotFoundException 
    {  
        Scanner scanner = new Scanner(new File("test.txt"));  

        while (scanner.hasNextLine())  
            System.out.println(scanner.nextLine());  
    }  
} 
```

输出：-

```
run:
Exception in thread "main" java.io.FileNotFoundException: test.txt (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:106)
    at java.util.Scanner.<init>(Scanner.java:636)
    at readfile.ReadFile.main(ReadFile.java:14)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T17:14:24.533

`Scanner`在创建类之前添加以下内容：

```
System.out.println(new File("test.txt").getAbsolutePath()); 
```

它将向您展示 JVM 期望在哪里找到该文件以及它是否也是您期望的文件夹。

还要检查文件权限。但很可能这是默认 JVM 目录的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T17:14:43.213

啊，您没有指定完整的文件路径。当文件路径被缩写（即`test.txt`）时，java 假定该文件与运行它的源代码位于*同一目录中。*所以要么指定完整路径，要么移动文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T17:13:58.753

移动到ReadFile目录，即项目的根目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:14:16.663

该`test.txt`文件应位于该文件所在的文件夹中`readfile.class`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-06T16:20:58.940

我知道这个问题很久以前就已经报告过了，但是，我遇到了类似的障碍，然后提出的解决方案不起作用，因此我决定发布另一个答案。

尝试使用`try... catch`子句。例如，只有这样我的代码才被 NetBeans 编译。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-03-02T22:27:07.700

对我有用的是从文件名中删除 .txt 扩展名并使用 . 指定当前目录（示例如下）。

```
Scanner scanner = new Scanner(new File("./test")); 
```

# javascript - 如何从jquery hash中获取多个值

> ID：11385019
> 
> 赞同：1
> 
> 时间：2012-07-08T17:11:55.043
> 
> 标签：javascript, url, fragment-identifier

如何在 jquery 哈希中获取多个值？

例子：

[http://mysite.com/#l:value&v:id1212](http://mysite.com/#l:value&v:id1212)相同但没有页面刷新[http://mysite.com/?l=value&v=id1212](http://mysite.com/?l=value&v=id1212)

我想是这样的：

```
var hash = location.hash.replace(/^.*?#/, '');

var lVal = (/^l:/.test( hash ));
var vVal = (/^v:/.test( hash )); 
```

但我怎样才能修复 var lVal 只能读取到 & 符号？我在正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T17:18:00.373

尝试按符号[拆分](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)字符串`&`，然后检索值：

```
var hash = location.hash.replace(/^.*?#/, '');
var pairs = hash.split('&');
var lVal = pairs[0].split(':')[1];
var vVal = pairs[1].split(':')[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T17:22:00.677

我相信您可能正在寻找类似[History.js](https://github.com/balupton/history.js/)的东西来帮助您减轻痛苦。URI.js[也有一个用于](http://medialize.github.com/URI.js/)[数据片段](http://medialize.github.com/URI.js/docs.html#fragment-abuse-query)的片段滥用插件。否则尝试类似

```
var data = {};
var tokens = location.hash.substring(1).split('&');
for (var i=0, l=tokens.length; i < l; i++) {
  var token = tokens[i].split(':');
  // maybe token[1] is escaped or something?!
  data[token[0]] = token[1];
}
console.log(data); 
```

# c# - 在动态创建的文本框的代码隐藏中将文本框的高度设置为自动

> ID：11385026
> 
> 赞同：1
> 
> 时间：2012-07-08T17:12:58.537
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我正在通过代码动态创建一个文本框，并将其添加到 LayoutRoot。我希望文本框支持多行，所以我将`AcceptsReturn`属性设置为`true`和`TextWrapping`属性`Wrap`。我在另一个问题中读到要设置`Height`as `Auto`，我们必须使用`double.NaN`，我已经这样做了。但是，当我添加它时，它的高度是无限的，并且覆盖了整个空间。我只希望文本框最初是单行的，并在添加行时让它增加高度。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T17:47:52.653

把你包`TextBox`在一个`StackPanel`. 如果你是通过代码来做的，你可以做这样的事情，例如：

```
public MainPage()
{
    InitializeComponent();

    var textBox = new TextBox
    {
        AcceptsReturn = true,
        Height = Double.NaN,
        TextWrapping = TextWrapping.Wrap
    };

    var stackPanel = new StackPanel();
    stackPanel.Children.Add(textBox);

    this.LayoutRoot.Children.Add(stackPanel);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:33:58.353

一个不错的选择是在网格中创建一个可调整大小的行并将 textBox 放在那里。

```
<RowDefinition MinHeight="20"/> 
```

将您的 TextBox 放在这一行：

```
Grid.SetRow(textBox,1); 
```

现在，如果 textBox 的高度是 Auto 或 Double.NaN，它应该适当地调整自身和行的大小。

# batch-file - 批处理：时间戳到 UNIX 时间

> ID：11385030
> 
> 赞同：13
> 
> 时间：2012-07-08T17:13:31.140
> 
> 标签：batch-file, unix-timestamp

据我所知，Batch 没有提供 UNIX 时间的命令。我能找到的最接近的是`%time%`，它只显示时间戳。

批处理中是否有一个命令或一组命令可以用来获取 UNIX 时间？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-08T19:14:19.997

[Richie Lawrence 的批处理库](https://github.com/ritchielawrence/batchfunctionlibrary)包含所有这些漂亮的方便脚本。您需要的是[DateToSec](https://github.com/ritchielawrence/batchfunctionlibrary/blob/master/Date%20and%20Time%20Functions/DateToSecs.html)（使用[GetDate](https://github.com/ritchielawrence/batchfunctionlibrary/blob/master/Date%20and%20Time%20Functions/GetDate.html)和[GetTime](https://github.com/ritchielawrence/batchfunctionlibrary/blob/master/Date%20and%20Time%20Functions/GetTime.html)）。

这是一个简化的脚本，它使用了一点[WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582(v=vs.85).aspx)：

```
@echo off
setlocal
call :GetUnixTime UNIX_TIME
echo %UNIX_TIME% seconds have elapsed since 1970-01-01 00:00:00
goto :EOF

:GetUnixTime
setlocal enableextensions
for /f %%x in ('wmic path win32_utctime get /format:list ^| findstr "="') do (
    set %%x)
set /a z=(14-100%Month%%%100)/12, y=10000%Year%%%10000-z
set /a ut=y*365+y/4-y/100+y/400+(153*(100%Month%%%100+12*z-3)+2)/5+Day-719469
set /a ut=ut*86400+100%Hour%%%100*3600+100%Minute%%%100*60+100%Second%%%100
endlocal & set "%1=%ut%" & goto :EOF 
```

结果将返回到传递给的第一个参数`GetUnixTime`，即`%UNIX_TIME%`。
例如：

```
1341791426 seconds have elapsed since 1970-01-01 00:00:00 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-06T06:44:51.683

创建一个名为“getUtime.bat”的 .bat 文件

```
@echo off
echo WScript.Echo(new Date().getTime()); > %temp%\time.js
cscript //nologo %temp%\time.js
del %temp%\time.js 
```

像这样打电话

```
"C:\>getUTime"
1430894237616 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-26T16:00:15.460

返回 UNIX 时间戳的简单 1 行长 C 程序怎么样？您可以在批处理脚本中从 %errorlevel% 检索值。

```
#include <stdio.h>
#include <time.h>

int main(void)
{
    return (int) time(NULL);
} 
```

在我在命令提示符下的测试中它起作用了：

```
C:\Users\dabaran\Desktop\cs50\src\C>.\time || echo %errorlevel% && set mytstamp=%errorlevel%
1419609373

C:\Users\dabaran\Desktop\cs50\src\C>echo %mytstamp%
1419609373 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:21:59.677

没有用于返回 UNIX 时间的批处理命令。您唯一的选择是编写一个可以从返回 UNIX 时间的批处理文件运行的程序，或者您可以使用 Windows PowerShell。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-04T08:32:52.903

到目前为止，最好的解决方案是下载一个独立的 date.exe unix-port。

建议您将其重命名为 unixdate.exe，以避免与 MS Date 命令冲突。

从[这里获取](http://sourceforge.net/projects/unxutils/files/unxutils/current/UnxUtils.zip/download)

1.  下载并解压。据我所知，所有实用程序都是“便携式”的，也就是说，它们不需要任何安装程序即可工作。我只用过几个（rm.exe & date.exe）。 **此外**，您可以重命名 exe，以防它们与您已有的其他系统实用程序匹配
2.  在子文件夹 (usr\local\wbin) 中找到实际的可执行端口
3.  要获取帮助信息，请键入命令后跟 --help（必须以小写形式拼写帮助）

例子：

```
((PROMPT)):unixdate +%Y%M%d
20141704

((PROMPT)):unixdate +%Y%b%d
2014Sep04 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-28T14:00:35.857

有一种非常简单的方法可以在单个批处理文件中执行此操作，无需外部脚本、文件、库等。

```
<!-- :
  for /f "tokens=* usebackq" %%a in (`start /b cscript //nologo "%~f0?.wsf"`) do (set timestamp=%%a)
  echo %timestamp%
  pause
  exit /b
-->

<job><script language="JavaScript">
  WScript.Echo(new Date().getTime());
</script></job> 
```

它的工作方式是，批处理脚本的代码和 JS 文件的代码包含在同一个`.cmd`文件中`.bat`。您可以通过注释掉批处理代码来强制cscript将批处理文件作为脚本运行，并且`:`第一行之后的意思是批处理将忽略它并直接运行批处理代码。所以你去吧！

# c# - 在 C# 中将 HTTP Accept 和 Content-Type 标头都设置为“application/xml”

> ID：11385031
> 
> 赞同：7
> 
> 时间：2012-07-08T17:13:41.123
> 
> 标签：c#, xml, json, wcf, c#-4.0

我在 C# 中创建了一个 Web 服务 (REST)。现在我希望当有人使用它时，它应该根据 Header 返回 JSON 或 XML。我在这里找到了一个很好的[教程](http://dotnet.dzone.com/articles/wcf-rest-xml-json-or-both)。我跟着它，但我不知道它在哪里说`set both the HTTP Accept and Content-Type headers to "application/xml"`，我是这样称呼它的`http://localhost:38477/social/name`。如果我的问题对您来说不是很清楚，我可以回答任何问题谢谢这是我的代码

```
[WebInvoke(UriTemplate = "{Name}", Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml)]
        public MyclassData Get(string Name)
        {
            // Code to implement
            return value;

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:45:30.267

您使用什么框架（看起来像旧的 WCf Web Api）来构建您的 RESTful 服务？我强烈推荐使用微软新的 MVC4 Web API。它真正开始成熟并极大地简化了构建 RESTful 服务。在 WCF Web API 即将停止使用的情况下，它将支持它。

您只需将 ModelClass 作为返回类型返回，它会根据请求接受标头自动将其序列化为 XML 或 JSON。您避免编写重复的代码，并且您的服务将支持广泛的客户端。

```
public class TwitterController : ApiController
{
     DataScrapperApi api = new DataScrapperApi();
     TwitterAndKloutData data = api.GetTwitterAndKloutData(screenName);
     return data;
}

public class TwitterAndKloutData
{
   // implement properties here
} 
```

**链接**

您可以通过仅下载 MVC4 2012 RC 来获取 MVC4 Web Api，也可以下载整个 Visual Studio 2012 RC。

MVC 4：[http ://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

VS 2012： http: [//www.microsoft.com/visualstudio/11/en-us/downloads](http://www.microsoft.com/visualstudio/11/en-us/downloads)

* * *

对于原始的 wcf web api，试一试。检查接受标头并根据其值生成响应。

```
var context = WebOperationContext.Current
string accept = context.IncomingRequest.Accept;
System.ServiceModel.Chanells.Message message = null;

if (accept == "application/json")
   message = context.CreateJsonResponse<TwitterAndCloutData>(data);
else if (accept == "text/xml")
   message = context.CreateXmlResponse<TwitterAndCloutData>(data);

return message; 
```

* * *

您可以在发起请求的任何客户端上设置接受标头。这将根据您用于发送请求的客户端类型而有所不同，但任何 http 客户端都可以添加标头。

```
WebClient client = new WebClient();
client.Headers.Add("accept", "text/xml");
client.DownloadString("domain.com/service"); 
```

要访问您将使用的响应标头

```
WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml"; 
```

其他资源：[http ://dotnet.dzone.com/articles/wcf-rest-xml-json-or-both](http://dotnet.dzone.com/articles/wcf-rest-xml-json-or-both)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T18:05:51.273

`RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml`您在属性中指定了`WebInvoke`将请求和响应的格式都限制为 Xml 的属性。**移除 RequestFormat 和 ResponseFormat**属性，让框架基于 Http 标头对其进行处理。**Content-type**标头指定请求正文类型，**Accept**标头指定响应正文类型。

**编辑：**

这就是您使用 fiddler 发送请求的方式。

![在此处输入图像描述](../Images/2c24a7f16466e018109b0ed20293af35.png)

您可以使用[REST 入门工具包](http://www.softpedia.com/progDownload/WCF-REST-Starter-Kit-Download-125162.html)附带的**Microsoft.Http**和**Microsoft.Http.Extensions** dll 来编写客户端代码。下面是一个示例。

```
 var client = new HttpClient("http://localhost:38477/social");
        client.DefaultHeaders.Accept.AddString("application/xml");
        client.DefaultHeaders.ContentType = "application/xml";
        HttpResponseMessage responseMessage = client.Get("twitter_name");
        var deserializedContent = responseMessage.Content.ReadAsDataContract<YourTypeHere>(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T17:34:24.003

您可以像这样为您的方法创建两个重载吗：

```
 [WebInvoke(UriTemplate = "dostuff", Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    public StuffResponse DoStuff(RequestStuff requestStuff)

    [WebInvoke(UriTemplate = "dostuff", Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml)]
    public StuffResponse DoStuff(RequestStuff requestStuff) 
```

# jquery - Jquery Mobile 可以使用 Jquery UI 吗？

> ID：11385032
> 
> 赞同：1
> 
> 时间：2012-07-08T17:13:41.420
> 
> 标签：jquery, jquery-mobile

我想使用[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

jquery mobile可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:27:25.720

很抱歉，但我之前的回答中的方法并没有真正起作用，因为为滚动捕获了点击。

我发现了这个很棒的图书馆，这很成功：http: [//touchpunch.furf.com/](http://touchpunch.furf.com/)

还有一个工作示例：

```
<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>jQuery Mobile Docs - Basic Lists</title> 
    <link rel="stylesheet"  href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />  
    <link rel="stylesheet" href="http://jquerymobile.com/demos/1.1.0/docs/_assets/css/jqm-docs.css"/>

    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://jquerymobile.com/demos/1.1.0/docs/_assets/js/jqm-docs.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <script src="https://raw.github.com/furf/jquery-ui-touch-punch/master/jquery.ui.touch-punch.min.js"></script>
</head> 
<body> 
<div data-role="page" class="type-interior">
    <div data-role="content">
        <ul data-role="listview" class="sortable">
            <li><a href="index.html">Acura</a></li>
            <li><a href="index.html">Audi</a></li>
            <li><a href="index.html">BMW</a></li>
            <li><a href="index.html">Cadillac</a></li>
            <li><a href="index.html">Chrysler</a></li>
            <li><a href="index.html">Dodge</a></li>
            <li><a href="index.html">Ferrari</a></li>
            <li><a href="index.html">Ford</a></li>
        </ul>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function() {
    $( ".sortable" ).sortable();
});
</script>
</body>
</html> 
```

但恐怕它不适用于小屏幕上的长列表。

# jquery - 带有 .NET WebService 的完整日历 ajax 数据源

> ID：11385033
> 
> 赞同：0
> 
> 时间：2012-07-08T17:13:53.107
> 
> 标签：jquery, web-services, fullcalendar

我正在尝试创建一个 JQuery FullCalendar 以使用 WebService 方法作为数据源。

我的方法是：

```
[WebMethod]
public EventData[] ListEvents(int start, int end)
{
} 
```

我的 javascript 是：

```
$('#calendar').fullCalendar({
  events: 'MyWebService.asmx/ListEvents'
} 
```

请求的 URL 是：

```
http://localhost:49354/MyService.asmx/ListEvents?start=1338073200&end=1341702000&_=1341766605921 
```

哪个无法解决，如何更新此 JQuery 以正确调用我的 WebMethod？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:21:10.177

我找到了解决方案：

```
$(document).ready(function () {
        $('#Calendar').fullCalendar({
          events: function (start, end, callback) {

            $.ajax({
              type: "POST",
              url: 'Webservice.asmx/ListEvents',
              cache: false,
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function (data) {
                var events = [];
                $(data.d).each(function () {
                  events.push({
                    title: this.Title,
                    start: this.Start,
                    end: this.End
                  });
                });
                callback(events);
              },
              error: function (jqXHR, textStatus, errorThrown) {
                alert('There was an error');
              }
            });
          }
        });
      }); 
```

在此示例中，我的数据我的 Web 服务以自 epoc 以来的秒数返回时间：

```
[WebMethod]
    public CalendarEvent[] ListEvents()
    {
      DateTime epoc = new DateTime(1970, 1, 1);
      return new CalendarEvent[]
      {        
        new CalendarEvent { Title = "Event 1", Start = new DateTime(2012,7,9,16,0,0).Subtract(epoc).TotalSeconds, End = new DateTime(2012,7,9,17,0,0).Subtract(epoc).TotalSeconds},
        new CalendarEvent { Title = "Event 2", Start = new DateTime(2012,7,12,12,0,0).Subtract(epoc).TotalSeconds, End = new DateTime(2012,7,12,13,0,0).Subtract(epoc).TotalSeconds}
      };      
    } 
```

# ruby-on-rails - 命令 rake db:schema:dump 无法正常工作

> ID：11385034
> 
> 赞同：0
> 
> 时间：2012-07-08T17:13:55.820
> 
> 标签：ruby-on-rails, ruby

以下`rake`命令不起作用

```
rake db:schema:dump
/Library/Ruby/Gems/1.8/gems/bundler-1.1.4/lib/bundler/runtime.rb:211: warning: Insecure world writable dir /usr/local in PATH, mode 040777
rake aborted!
dlopen(/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib
  Referenced from: /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
  Reason: image not found - /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:27:32.023

您需要安装`mysql`. 我建议安装一个包管理器，比如[Homebrew](https://brew.sh/)，然后做一个简单的`brew install mysql`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T17:37:17.563

您可能缺少有关在 osx 上正确安装和正确分发 mysql 库的信息。
摆脱这个问题的最快方法是：

> $ sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib

使用

> $ sudo install_name_tool -change libmysqlclient.18.dylib /usr/local/mysql-5.5.15-osx10.6-x86_64/lib/libmysqlclient.18.dylib /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11 /lib/mysql2/mysql2.bundle

应该是正确的解决方案

**注：从**[这里](http://keybee.blogspot.in/2011/12/installing-rails-on-osx-with-mysql.html)复制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:10:22.470

You need to install `mysql-client` and `libmysqlclient-dev` excepting your using a debian based linux. Anyway you need these libaries which are NOT part of the `mysql-server` package!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T11:12:44.187

就我而言：RVM 安装了 mysql 5.5 和 ruby​​ 1.9.3 的 Mountain Lion

文件 libmysqlclient.18.dylib 位于

```
/usr/local/mysql-5.5.25a-osx10.6-x86_64/lib/libmysqlclient.18.dylib 
```

我将此文件复制到“/usr/lib”文件夹并修复了错误。

```
sudo cp /usr/local/mysql-5.5.25a-osx10.6-x86_64/lib/libmysqlclient.18.dylib /usr/lib/ 
```

# wpf - 从第二项向下排序 ListCollectionView

> ID：11385038
> 
> 赞同：0
> 
> 时间：2012-07-08T17:14:35.593
> 
> 标签：wpf, sorting, listcollectionview

在 MVVM 环境中，我将 ListCollectionView 绑定到 ObservableCollection。我的 Foo 对象对它们有一个 IsDefault 属性，我的要求是将该项目放在列表的第一位，其余的应该是 alpha 排序的。

所以这段代码只对整个列表进行排序，显然：

```
_list = new ListCollectionView(Model.Data);
        _list.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending)); 
```

不确定如何确保第 3 项（例如，IsDefault=true）位于列表顶部，而其余项（IsDefault=false）按 alpha 排序。

这是使用 _list.CustomSort 并以某种方式实现 IComparer 的情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:28:26.223

是的，这正是您需要使用[`ListCollectionView.CustomSort`](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.customsort.aspx). 自定义排序与 using 是互斥的`SortDescriptions`；前者的文档对此很明确：

> 设置此属性会清除先前设置的 SortDescriptions 值。

所以你需要做的是定义一个[`IComparer`](http://msdn.microsoft.com/en-us/library/system.collections.icomparer.aspx)并使用它来对视图进行排序：

```
class CustomComparer : IComparer
{
    public int Compare (object lhs, object rhs)
    {
        // missing: checks for null, casting to Model.Data, etc etc

        if (lhsModelData.IsDefault && rhsModelData.IsDefault) {
            return lhsModelData.Name.CompareTo(rhsModelData.Name);
        }
        else if (lhsModelData.IsDefault) {
            return -1;
        }
        else if (rhsModelData.IsDefault) {
            return 1;
        }
        else {
            return lhsModelData.Name.CompareTo(rhsModelData.Name);
        }
    }
} 
```

# javascript - 将外部二维数组映射到另一个二维数组（javascript）

> ID：11385039
> 
> 赞同：0
> 
> 时间：2012-07-08T17:14:37.657
> 
> 标签：javascript, arrays, oop

[这](http://jsfiddle.net/donovandigital/zwz6W/)是为了创建一个二维对象数组，允许我通过银行 [a] [b] 访问任何对象（“剪辑”），其中 [a] 是“银行”，而 [b] 是“夹子”。按原样完美运行，不幸的是，这段代码旨在查看一些外部文件并查看它们的属性。这些文件已经根据它们的一些属性组织在一个“数组”中。最初我被告知这将是一个 8x8 阵列，但现在事实证明这将是一个 16x32 阵列，并且要求指定由阵列中的 4x2 选择组成的库。

换句话说，

```
banks[0][0].track = 0
banks[0][0].slot = 0
banks[0][3].track = 3

banks[0][3].slot = 0
banks[0][4].track = 0
banks[0][4].slot = 1

banks[0][7].track = 3
banks[0][7].slot = 1
banks[15][0].track = 0

banks[15][0].slot = 31
banks[15][3].track = 3
banks[15][3].slot = 31

banks[16][0].track = 3
banks[16][0].slot = 0
banks[16][4].track = 3

banks[16][4].slot = 1
banks[63][0].track = 11
banks[63][0].slot = 30

banks[63][4].track = 11
banks[63][4].slot = 31 
```

我需要迭代地创建一个 64x8 二维“剪辑”数组，但同时设置这些剪辑的上述属性，如图所示。似乎很明显，相关数学属于剪辑对象。但是，我还看不到数学。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:49:52.467

听起来你需要这个：

```
var theirBanks = [[...], [...], ...]; // 16*32 array of Clip objects

var x = 2; // reduce outer array to one of half length
var y = 4; // reduce inner arrays to one of fourth length
function reduce(sel) {
/* gets: a 2*4 selection of clips from theirBanks
returns: a new clip for banks */
   ... // not sure how you want this to be done
}

var banks = new Array(theirBanks.length / x);
for (var i=0; i<banks.length; i++) {
    banks[i] = [];
    for (var j=0; j<theirBanks.length/y; j++) {
        var selection = [];
        for (var k=i*x; k<(i+1)*x; k++)
            selection.push(theirBanks[k].slice(j*y, (j+1)*y));

        banks[i][j] = reduce(selection);
    }
}
// banks is now a 8*8 array 
```

该脚本从（二维）数组中构建 2*4 选择，让您将它们减少为一个新对象并返回新的、更小的（二维）数组。

# sencha-touch-2 - 从 sencha touch 2 的容器中引用轮播 xtype

> ID：11385042
> 
> 赞同：2
> 
> 时间：2012-07-08T17:14:47.210
> 
> 标签：sencha-touch-2

我有这个代码：

```
Ext.define('play.view.Quiz', {
extend: 'Ext.Container',
xtype: 'myquiz',
config: {
    fullscreen: true,
    layout: 'vbox',
    title: 'My Quiz',
    items: [
        /* Questions */
        {
            xtype: 'my_questions'
        },
    ]
}
}); 
```

和

```
Ext.define('play.view.Questions', {
extend: 'Ext.Carousel',
xtype: 'my_questions',
config: {
    defaults: {
        styleHtmlContent: true
    },
    items: [
        {
            html : 'Item 1',
            style: 'background-color: #5E99CC'
        },
        {
            html : 'Item 2',
            style: 'background-color: #759E60'
        },
        {
            html : 'Item 3'
        }
    ]
}
}); 
```

问题不会显示，但是当我将问题放在测验项目中时，它们会显示。

是否可以从容器中引用轮播 xtype？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:57:17.337

是的@Bohbo，你能做这样的事情吗：

```
Ext.define('play.view.Questions', {
  extend: 'Ext.Carousel',
  xtype: 'my_questions',
  config: {
     defaults: {
     styleHtmlContent: true,
     layout: 'fit',
     items: [
           {
             html : 'Item 1',
             style: 'background-color: #5E99CC'
           },
           {
             html : 'Item 2',
             style: 'background-color: #759E60'
           },
           {
             html : 'Item 3'
           }
         ]
  },
}); 
```

注意重要的元素是**layout:'fit'**。我希望这有帮助。:)

# java - JTextArea.setText(null); 不释放内存

> ID：11385045
> 
> 赞同：0
> 
> 时间：2012-07-08T17:15:21.757
> 
> 标签：java, swing, memory-leaks, jtextarea

我正在使用 Swing，我有一个包含几个 JPanel 的 JFrame，其中一个内有一个 JTextArea。

当用户单击某个菜单 ( *ActionListener.actionPerformed(populate())* ) 时设置 JTextArea 内容。

内容取自一个 30MB 的文本文件：

```
private void populate () {
        StringBuilder strB = new StringBuilder();
        try {
            FileReader fr = new FileReader("file30mb.txt");
            BufferedReader br = new BufferedReader(fr);
            String strLine;

            while ((strLine = br.readLine()) != null) {
                strB.append(strLine).append(System.getProperty("line.separator"));
            }

            fr.close();
            br.close();
        } catch (IOException e) {
            System.err.println(e);
        }

        jTextArea1.setEditable(false);
        jTextArea1.setText(strB.toString());
        jTextArea1.setCaretPosition(0);
} 
```

这个过程占用了大量的内存，大约200MB。

还有另一个菜单，当用户单击它时，JTextArea 被清除（基本上它调用一个执行*jTextArea1.setText(null)*的方法）。该事件的处理方式与之前相同：*ActionListener.actionPerformed(free())*。

因此，当 JTextArea 为空时，我希望内存使用量比以前低……但不幸的是，事实并非如此。如果我进入任务管理器，我会看到与之前相同的内存使用情况（大约 200MB），但 JTextArea 是空的！

我错过了什么？

**编辑**我也试过这个：

```
jTextArea1.setText(strB.toString());
jTextArea1.setText("");
Runtime r = Runtime.getRuntime();
r.gc();
System.out.println(jTextArea1.getDocument().getLength()); // prints "0" 
```

但它仍然需要 200MB 的内存。

**编辑 2**如果我删除“GUI 部分”（我的意思是 jTextArea1.setText() 等），它仍然需要大量内存。它应该占用“0 内存”，因为我没有在 JTextArea 中写入任何内容，但我只是读取了一个文本文件，然后什么也不做。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:20:31.803

几个原因：

*   垃圾收集定期运行，它不会立即释放内存

*   JVM 进程内存和堆内存使用是两个不同的东西。启用详细的 GC 日志记录或使用`jconsole`/连接到您的应用程序`jvisualvm`并检查实际堆使用情况。手动运行 GC

*   `Ctrl`+是否`Z`仍在工作，允许您恢复以前的 (30 MB) 内容？你明白了……

如果这些都不对，请使用像[Eclipse MAT](http://www.eclipse.org/mat/)这样的内存分析器来找出对这个巨大对象的引用（你会发现`char[]`60 MB 大小）。

# python - 使用 reg exp 检查测试字符串是否为固定格式

> ID：11385050
> 
> 赞同：2
> 
> 时间：2012-07-08T17:16:19.063
> 
> 标签：python, regex

我想确保使用正则表达式，字符串的格式为“999.999-A9-Won”，并且没有任何空格、制表符或换行符。

1.  0 - 9 范围内可能有 2 或 3 个数字。
2.  后跟一个句号'.'
3.  后跟 0 - 9 范围内的 2 或 3 个数字
4.  后跟连字符、字符 'A' 和 0 - 9 之间的数字。
5.  这可以跟随任何东西。

示例：87.98-A8-abcdef

我到现在为止的代码是：

```
testString = "87.98-A1-help"
regCompiled = re.compile('^[0-9][0-9][.][0-9][0-9][-A][0-9][-]*');
checkMatch = re.match(regCompiled, testString);
if checkMatch:
    print ("FOUND")
else:
    print("Not Found") 
```

这似乎不起作用。我不确定我错过了什么，这里的问题是我没有检查空格、制表符和换行符，并且还硬编码了小数点前后的整数数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:22:09.577

`{m,n}`您可以指定模式可以重复的次数，并且字符`\d`类匹配所有数字。`\S`字符类匹配任何非*空白*字符。使用这些您的正则表达式可以简化为：

```
re.compile(r'\d{2,3}\.\d{2,3}-A\d-\S*\Z') 
```

还要注意`\Z`锚点，使`\S*`表达式一直匹配到字符串的末尾。此处不允许使用空格（换行符、制表符等）。如果将此[`.match()`方法](http://docs.python.org/library/re.html#re.RegexObject.match)与确保测试字符串中的所有字符都符合模式的方法相结合，仅此而已。有关的更多信息，请参见[`search()`vs`match()`](http://docs.python.org/library/re.html#search-vs-match)`.match()` .。

一个小示范：

```
>>> import re
>>> pattern = re.compile(r'\d{2,3}\.\d{2,3}-A\d-\S*\Z')
>>> pattern.match('87.98-A1-help')
<_sre.SRE_Match object at 0x1026905e0>
>>> pattern.match('123.45-A6-no whitespace allowed')
>>> pattern.match('123.45-A6-everything_else_is_allowed')
<_sre.SRE_Match object at 0x1026905e0> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T17:19:13.803

让我们看看你的正则表达式。如果你想：

> “0 - 9 范围内的 2 或 3 个数字”

那么你不能开始你的正则表达式，`'^[0-9][0-9][.]`因为它只会匹配开头正好有两个整数的字符串。您的正则表达式的第二个问题是在结尾：`[0-9][-]*`- 如果您希望匹配字符串末尾的任何内容，那么您需要完成您的正则表达式`.*`。**编辑**：请参阅 Martijn Pieters 对正则表达式中空格的回答。

这是一个更新的正则表达式：

```
testString = "87.98-A1-help"
regCompiled = re.compile('^[0-9]{2,3}\.[0-9]{2,3}-A[0-9]-.*');
checkMatch = re.match(regCompiled, testString);
if checkMatch:
    print ("FOUND")
else:
    print("Not Found") 
```

并非所有内容都需要包含在`[`and`]`中，尤其是当您知道要匹配的字符（例如 part `-A`）时。此外：

*   表示法的`{m,n}`意思是：至少匹配`m`和最多匹配`n`，并且
*   要显式匹配一个点，您需要对其进行转义：这就是`\.`上面的正则表达式中存在的原因。

# javascript - 跨域 AJAX 查询

> ID：11385051
> 
> 赞同：1
> 
> 时间：2012-07-08T17:16:30.257
> 
> 标签：javascript, jquery, same-origin-policy

在堆栈溢出的帮助下，我目前有这个 JSFiddle：http: [//jsfiddle.net/WskJT/](http://jsfiddle.net/WskJT/)

我在另一台服务器上有一个 aspx 文件（无法访问，因此不能对该服务器进行修改）和*脱机*（php 不包括选项）我将有一个页面按照上述小提琴提取此数据并删除列。

是否有任何解决方法可以从 aspx 文件中获取此数据并显示（类似于）上述小提琴的输出？

我是一个热心的新手，所以如果我的措辞不正确等，我深表歉意。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:42:41.107

尽管正如您在评论中指出的那样，服务器位于您的 Intranet 上，但您将面临所指出的安全问题。您可以做的是在与您的主页相同的域中创建一个“代理”Web 服务。

首先在您自己的服务器上创建一个“service.php”文件。从那里，对另一台服务器上的 ASPX 页面进行必要的[curl](http://uk3.php.net/curl)调用。任何时候调用 service.php（或者如果您愿意，也可以称为 proxy.php），它会依次调用 ASPX 页面，并根据需要使用任何参数。让它读取输出文本并将文本返回给调用者本身。

将您的 AJAX 代码指向“service.php”文件。

现在您的 javascript 调用在同一个域中，您不应该遇到使用 JavaScript 时遇到的权限问题。

# scala - 如何显示临时约束表单验证消息？

> ID：11385052
> 
> 赞同：3
> 
> 时间：2012-07-08T17:16:39.233
> 
> 标签：scala, playframework-2.0

# ScalaForms

[在此处](http://www.playframework.org/documentation/2.0.2/ScalaForms)链接的示例中，有一个关于表单验证的示例：

```
// You can also define ad-hoc constraints on the fields:
val loginForm = Form(
  tuple(
    "email" -> nonEmptyText,
    "password" -> text
  ) verifying("Invalid user name or password", fields => fields match { 
      case (e, p) => User.authenticate(e,p).isDefined 
  })
) 
```

通过绑定错误，一些约束显示在我的表单中。（就像`nonEmptyText`，在字段后面有一条额外的线说明`This field is required`。请参阅：

```
loginForm.bindFromRequest.fold(
  formWithErrors => // binding failure, you retrieve the form containing errors,
  value => // binding success, you get the actual value 
) 
```

如果我对我做一个约束`.toString`，`formWithErrors`我会得到这个：`nonEmptyText`

```
Form(ObjectMapping2(<function2>,<function1>,(Email adress,FieldMapping(,List(Constraint(Some(constraint.required),WrappedArray())))),(Password,FieldMapping(,List(Constraint(Some(constraint.required),WrappedArray())))),,List(Constraint(None,List()))),Map(Password -> test, Email adress -> ),List(FormError(Email adress,error.required,WrappedArray())),None) 
```

后半部分是一个[FormError](http://www.playframework.org/documentation/api/2.0/scala/play/api/data/FormError.html) List:`List(FormError(Email adress,error.required,WrappedArray())),None)`这是一个案例类：`case class FormError (key: String, message: String, args: Seq[Any])`where`key`被定义为：`The error key (should be associated with a field using the same key).`。

FieldConstructor 选择它并使“电子邮件地址”输入框变为红色并添加错误消息（“此字段是必需的”）。

## 显示临时约束？

因此，当表单字段全部填满时，会检查用户名和密码：

```
verifying("Invalid user name or password", fields => fields match { 
      case (e, p) => User.authenticate(e,p).isDefined 
  }) 
```

但我不知道如何向用户显示“无效的用户名或密码”。的列表`.toString`是：`FormError``formWithErrors`

```
List(FormError(,Invalid user name or password,WrappedArray())),None) 
```

该`Key`部分是空的。

## 问题

如何显示临时错误？

我什至尝试过：

```
BadRequest( views.html.test( formWithErrors ) ).flashing( "error" -> "Invalid user name or password." ) }, 
```

但由于某种原因，它也不能通过 Flash 工作:(。这`@flash.get("error").getOrElse("no 'error'")`每次都给我“没有错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:56:11.467

实际上，可以`errors`附加一个表单，因此当来自请求的绑定验证约束失败时，会根据给定的表单创建一个新表单，但用`errors`.

此类错误列表由 `FormError`引用表单字段并覆盖 toString 以显示其嵌入消息组成。

这样，如果您希望一次显示所有消息，您可以简单地`formWithErrors.errors.mkString("<br>")`例如（在您的模板中或闪烁它）。

有很多方法，这里描述了一些常见的方法[http://www.playframework.org/documentation/2.0.2/ScalaFormHelpers](http://www.playframework.org/documentation/2.0.2/ScalaFormHelpers)。您也可以定义自己的字段构造函数。

最后，我的建议是您应该使用助手 amap（例如`@inputText`和^(co)），因为它们已经包含在可用时显示助手、提示和**错误**的逻辑。

## 编辑

我错过了有关 flash 问题的提示……您可能忘记添加`(implicit flash: Flash)`到模板参数列表中。（不要忘记在您的操作定义中将请求标记为隐式）

# mysql - 这个右连接查询太慢了

> ID：11385053
> 
> 赞同：0
> 
> 时间：2012-07-08T17:16:39.987
> 
> 标签：mysql

我感兴趣的查询如下

```
 SELECT COUNT(a.id) 
      FROM users AS a 
RIGHT JOIN date_log AS b 
        ON a.id = b.user_id 
     WHERE
           b.meeting_date BETWEEN '2012-06-01' 
                      AND DATE_ADD('2012-06-01', INTERVAL 1 MONTH) 
  GROUP BY a.id 
```

但是，当我尝试从大型数据库中选择数据时，它太慢了。我在查询中添加了“分组依据”字词以删除重复的 ID。

有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:22:42.183

首先检查您是否为 date_log.user_id 和 meeting_date 设置了索引。

那么您是否考虑过使用“不同”而不是组？

```
Select count(distinct a.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:32:43.103

如果您只需要计数，您可以将此查询设为左连接，并查看 MySQL 是否有更好的时间执行它（我不确定它实际上是如何执行 RIGHT JOIN 的，但我可以以低效的方式想象它与左派相比...

```
SELECT users.id, count(users.id) as user_count
FROM 
  date_log
  LEFT JOIN users ON date_log.user_id = users.id
WHERE
  date_log.meeting_date BETWEEN '2012-06-01' AND DATE_ADD('2012-06-01', INTERVAL 1 MONTH)
GROUP BY users.id 
```

# php - Cake PHP中同一个表的多个外键？

> ID：11385054
> 
> 赞同：3
> 
> 时间：2012-07-08T17:16:43.697
> 
> 标签：php, sql, cakephp, orm

Cake 有它的约定，可以在它的模型和它们引用的表之间自动进行一些功能交互。如果外键引用名为 people 的表，则它们应称为 people_id。如何处理一行包含两个人并且需要两个人的外键的情况？很明显，我不能复制列名，有两个 people_id 列。

考虑一个有两个竞争对手的比赛。每个参赛者都由参赛者表格中的一行表示。比赛表需要参考这两个竞争对手。我怎样才能做到这一点不会破坏 Cake 提供的自动功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:03:49.490

我找到了一个链接，描述了如何完美地做到这一点。

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)

# html - 滚动到特定的 div

> ID：11385056
> 
> 赞同：2
> 
> 时间：2012-07-08T17:17:05.767
> 
> 标签：html

我有一个 html 页面，其中包含三个包含文本内容的 div。我想根据用户在主页上单击的链接滚动到特定的 div。

主页上有三个链接；所以我想要的是，如果用户点击链接 1，他会滚动到结果页面上的 div 1，如果他点击主页上的链接 2，那么页面会滚动到结果页面上的 div 2，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:23:17.047

> 如果要将当前文档滚动到特定位置，则 HREF 的值应该是要滚动到的锚点的名称，前面带有 # 符号。如果您想在某个锚点处打开另一个文档，请给出该文档的 URL，然后是 #，然后是锚点的名称。

使用带有锚标签的书签：

```
<a href="results.html#first-div">First</a>
<a href="results.html#second-div">Second</a>
<a href="results.html#third-div">Third</a> 
```

您只需将“#”符号后的值替换为适当的元素 ID。

参考：[http ://devedge-temp.mozilla.org/library/manuals/1998/htmlguide/tags7.html](http://devedge-temp.mozilla.org/library/manuals/1998/htmlguide/tags7.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T17:29:24.337

大多数（如果不是全部）新浏览器也支持 id 作为锚点

`<div id="div1">...</div>`

会回应`<a href="page2.html#div1">...</a>`

以及 name 属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T17:24:56.017

最简单的方法是使用[Fragment Identifier](http://dev.w3.org/html5/spec/single-page.html#scroll-to-fragid)。每当您创建链接时，请在链接末尾附加您要滚动到的元素的 ID。例如：

```
link.html#divToScrollTo 
```

一个示例用法：

```
<a href="link.html#divToScrollTo">Scroll to div with divToScrollTo as id</a> 
```

单击此链接后，浏览器首先导航到带有链接`link.html`的元素，然后滚动到该元素。`divToScrollTo`

# ruby - 为什么在活动记录范围内使用 lambda

> ID：11385057
> 
> 赞同：2
> 
> 时间：2012-07-08T17:17:07.893
> 
> 标签：ruby, ruby-on-rails-3

我正在阅读Beginning Rails 3。这本书创建了一个用户可以发布文章的项目。现在在 Article 对象中，他们创建了 3 个作用域，如下所示：

```
scope :published, where("articles.published_at IS NOT NULL")
scope :draft, where("articles.published_at IS NULL")
scope :recent, lambda { published.where("articles.published_at > ?", 1.week.ago.to_date)} 
```

现在最后一个`lambda`函数我可以用这个语句替换它，`scope`我得到相同的结果：

```
scope :recent, where("published_at > ?", 1.week.ago.to_date) 
```

在这里使用 lambda 有什么好处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T17:21:35.483

如果不使用`lambda`时间`1.week.ago`将在应用程序启动时计算并缓存。因此，即使您的应用程序已经运行了几个月，它仍然会指向应用程序开始前 1 周的时间。

您在开发环境中不会注意到这一点，因为每次请求都会重新加载应用程序代码。使用 lambda，即使在生产环境中，您也可以确保每次调用您的范围时都会重新计算它。

# php - php curl 下载停止在 95%

> ID：11385058
> 
> 赞同：0
> 
> 时间：2012-07-08T17:17:15.250
> 
> 标签：php, curl

这很奇怪，php curl 下载一直停止在 95%。这让我疯狂。

这是我没有使用任何花哨的代码

```
$fp = fopen($file, 'w');
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.domain.com/");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_HTTPHEADER,array("ETag: $rddash"));

curl_setopt($ch, CURLOPT_FILE, $fp);

curl_exec($ch);

curl_close($ch);
fclose($fp); 
```

我注意到，远程网站正在使用 Etag，所以我使用它但仍然无法正常工作。

下载完成之前停止的原因可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:29:44.150

您的 php.ini 设置中可能存在超时问题。`set_time_limit(0);`在您的代码中使用。

有关详细信息，请参阅[手册。](http://php.net/manual/en/function.set-time-limit.php)

还要检查 PHP 错误日志。

# java - 把读写搞得一团糟

> ID：11385065
> 
> 赞同：1
> 
> 时间：2012-07-08T17:17:48.173
> 
> 标签：java, swing

好的，我要做的是使用按钮从一个 .text 文件读取到另一个文本文件。所以它是事件驱动的，但我必须反转输出。

我在 netbeans 中编码，因为我是新手，它很有帮助。

我已经为此工作了几天，试图在网络上找到明确的信息，但我遇到了困难，现在我认为我的代码看起来比我开始时更糟糕，所以请指出我做错的原因。

非常感谢您提供的任何建议。

这是我的按钮。

```
 private void ReadButtonActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        int x ;
        Vector<String> readOrder = new Vector<String>();
        try {
        Scanner i = new Scanner(new FileReader("Out.txt"));
        while( i.hasNextInt()){
        x = i.nextInt();
        readOrder.add(new Integer(x));
        }
        try {
        try (BufferedWriter out = new BufferedWriter(new FileWriter("Outfile.txt")));
        out.append(" " + x);
        out.close();
        }
        i.close();
        }
        catch (Exception e ){}
        for(int i = readOrder.size()-1 ; i >= 0 ; i-- )
        System.out.println( readOrder.elementAt( i ).intValue() );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:32:36.317

为了改进您的代码，

1.  移除嵌套的 try catch，分成两个单独的 try-catch 块，一个用于输入，一个用于输出。
2.  删除`try (BufferedWriter out = new BufferedWriter(new FileWriter("Outfile.txt")))`One 外块就足够了。
3.  通过将 IO、业务和文件逻辑放在不同的类中并在需要时（仅）在接口后面将它们分开。
4.  我不知道您是否有使用向量的特定原因（它具有连续存储在内存中等优点），但 ArrayList 应该足以读取整数列表。
5.  `Collections.reverse(arrayList);`java.util.Collections 对于你的反转逻辑来说是一个有用的方法，如果它是一个作业/练习，那么你的老师不会喜欢使用 lib 方法:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:36:16.157

```
BufferedReader br = new BufferedReader(new FileReader("Filein.txt"));
StringBuilder build = new StringBuilder();
while(br.ready()){
build.append(br.readline());
}
build.reverse(); //Reverses the order of all the characters in the builder

BufferedWriter bw = new BufferedWriter(new FileWriter("Fileout.txt"));

try{
bw.write(build.toString());
bw.flush();
bw.close();

}catch(Exception e){} 
```

# vb.net - 具有通用堆栈的垃圾收集

> ID：11385072
> 
> 赞同：0
> 
> 时间：2012-07-08T17:18:24.447
> 
> 标签：vb.net, silverlight-4.0, garbage-collection

我正在为 Silverlight 中的自定义文本框控件编写多个撤消/重做系统。我现在正在做的事情是减少内存消耗。

所以我遇到的问题是我正在使用的堆栈在内存中保存的时间太长了。

`Count`我认为当堆栈自然达到 0 或堆栈因事件而被清除时，完全擦除堆栈会相对便宜。所以我试图用这段代码来做这件事，希望它会被 GC 捡起......

```
TextHistory.Clear()
TextHistory = Nothing 
```

但这绝对行不通，而且这个堆栈可能会容纳 50 MB 或更多。顺便说一句，`TextHistory`是一个`Stack(Of Moment)`。这是`Moment`课程...

```
Public Class Moment
    Public Text As String
    Public SelectionStart As Integer
    Public SelectionLength As Integer

    Public Sub New(ByRef _Text As String, _SelectionStart As Integer, _SelectionLength As Integer)
        Text = _Text
        SelectionStart = _SelectionStart
        SelectionLength = _SelectionLength
    End Sub 
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:32:40.980

Stack(Of T) 是使用 T 数组实现的。在 50 MB 时，该数组已在大对象堆上复制和增长了很多次，仅在第 2 代收集。大对象堆也未压缩，因此如果为数组副本分配了额外的空间，则该空间将保持分配状态在 GC 收集数组后，剩下的“洞”将可用于其他对象。

如果您的堆栈实际上需要增长到这么大，您可以通过链表实现自己的堆栈来绕过使用大型对象堆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:20:19.303

在评论中，您说强制 GC 有效（有效 = 清理垃圾）。这就是它应该如何工作的方式。

GC 按需发生。需求要么是发生了大量分配，要么是内存压力，要么是手动触发。这些都没有发生，这就是垃圾没有被清理干净的原因。

GC 不运行基于时间的（比如每分钟左右）。

# github - 如何将自定义 git 挂钩添加到 GitHub Enterprise 存储库？

> ID：11385076
> 
> 赞同：5
> 
> 时间：2012-07-08T17:19:09.713
> 
> 标签：github, githooks

我已经启动了一个 GitHub Enterprise (11.10.272) 实例并创建了一个存储库。我已经在 Ruby 中编写了一个预接收挂钩，我想将它与该存储库一起使用。

GitHub Enterprise 与常规 GitHub 一样，允许配置服务挂钩。我尝试通过 SSH 连接到 GitHub Enterprise 服务器以创建挂钩文件，但找不到 repo 目录。此外，GitHub Enterprise 的条款禁止修改 VM，所以我不确定这是一个很好的方法。

似乎 GitHub:FI 支持钩子。根据[Migrating from GitHub:FI](https://support.enterprise.github.com/entries/21179373-migrating-from-github-fi) ，FI 到 Enterprise 迁移工具的当前版本目前不支持挂钩。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-27T17:00:32.110

我知道这真的很老了，但 GitHub Enterprise 2.6 刚刚推出了预接收挂钩。可以在此处了解更多信息：[https](https://help.github.com/enterprise/admin/guides/developer-workflow/using-pre-receive-hooks-to-enforce-policy/) ://help.github.com/enterprise/admin/guides/developer-workflow/using-pre-receive-hooks-to-enforce-policy/ 。

我相当肯定这将与您正在寻找的东西完全一致。希望这可以帮助 OP，或者以后偶然发现此问题的任何其他人！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T15:44:07.787

根据我与 GitHub 客户支持的电子邮件，截至 2013 年 5 月，GitHub Enterprise 不支持预接收挂钩。

我们的 GHE 盒子没有管理员访问权限，因此如果我们愿意，我们无法进入并“修复”这个问题。

他们声称如果您可以拒绝提交，他们所做的事情就会中断。我认为它们的意思是自动合并拉取请求，但我不确定。

他们有一组广泛的提交后 webhook，您可以将其用于提交后功能。

我正在研究构建一个“直通 git 服务器”——基本上，经常轮询 GHE API 以对某些 GHE 帐户上存在的任何 repo 进行本地克隆，然后使用自定义预接收和自动克隆它接收后挂钩。这将让我们克隆直通服务器，在那里执行我们的预接收挂钩，并将批准的更改推送到 GHE。那里似乎还没有任何标准的 git 直通服务器，可能是因为您需要知道要克隆的存储库，这似乎没有标准的 git API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T17:28:58.130

GitHub Enterprise 似乎将存储库存储在`/data/repositories`. 每个存储库都有由模板生成的钩子。我可以修改这些钩子，但这肯定会破坏一些东西。模板钩子似乎在另一个位置寻找钩子，但该位置是在配置中定义的，我找不到它。

# android - AnimationDrawable 在 Android 2.2 中不起作用

> ID：11385081
> 
> 赞同：6
> 
> 时间：2012-07-08T17:19:52.183
> 
> 标签：android, drawable, android-animation

我像这样使用 AnimationDrawable：

```
ImageView rocketImage = (ImageView) layout.findViewById(R.id.animation);
rocketImage.setBackgroundResource(R.drawable.progress_blue_animation);
rocketAnimation = (AnimationDrawable) rocketImage.getBackground();
rocketAnimation.start(); 
```

此代码适用于 Android 3.0/4.0/4.1/4.0，但不适用于 Android 2.2。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-08T17:23:50.400

据我所知，这是2.1、2.2 中的[错误](http://code.google.com/p/android/issues/detail?id=1818)

一个可能的解决方法可能是：

```
ImageView rocketImage = (ImageView) layout.findViewById(R.id.animation);
rocketImage.setBackgroundResource(R.drawable.progress_blue_animation);
rocketAnimation = (AnimationDrawable) rocketImage.getBackground();
rocketImage.post(new Runnable(){
    public void run(){
        rocketAnimation.start();
    }
}); 
```

（但我没有在 Targets >2.1 中尝试过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T10:25:48.153

```
view.post(new Runnable() {
        public void run() {
            anim.start();
       }
    });
    view.startAnimation(anim); 
```

这对我有用。

# flash - Flash Catalyst 中的窗口行为

> ID：11385087
> 
> 赞同：0
> 
> 时间：2012-07-08T17:20:40.000
> 
> 标签：flash, actionscript, adobe, behavior, flashcatalyst

我正在尝试做一个小闪存站点，但我遇到了一些问题。正如你在这里看到的： [http ://alexandracardoso.deviantart.com/gallery/?catpath=scraps#/d56idb3](http://alexandracardoso.deviantart.com/gallery/?catpath=scraps#/d56idb3)

当我单击右侧的选项卡打开右侧窗口时，我希望当我通过单击选项卡打开左侧的窗口时，右侧的窗口会关闭并打开左侧的窗口。但我无法做到这一点。

我想并尝试使用 if 语句来帮助我，但它不起作用。

有人可以帮助我，告诉我如何使打开一个小窗口的行为使另一个消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:03:46.657

哦，对不起，我男朋友不太了解 flash（他写了那篇文章）。我的问题？嗯...我有那些标签，当我点击它们时，我会打开它们，对吧？但是当我先打开左边再打开右边时，我看不到右边的内容，因为左边在上面。所以我需要的东西是说我打开的最后一个标签会在顶部。AS2有可能吗？因为这是我学校的项目，但我们没有学习 AS3。这是我的闪存程序（不是所有的东西，只是我吓坏了的部分）。啊，另外一件事，我对flash不太了解，因为它是我学校的一门新学科，对此感到抱歉。非常感谢！

[http://www.mediafire.com/?35d1wbvjhscbpnc](http://www.mediafire.com/?35d1wbvjhscbpnc)

# java - 从最后一行读取文件

> ID：11385091
> 
> 赞同：1
> 
> 时间：2012-07-08T17:21:34.773
> 
> 标签：java, file, random-access

我想从最后一行使用`RandomAccessFile`. 这是可能的还是我必须使用另一个类？

除了此文件在此期间发生更改，因此最后一行不会永远持续下去。在读另一个的过程中，java程序写在上面。我的问题是：程序会在同一时间看到另一个java程序写入文件，变化？

**编辑**

好吧，假设我有一台服务器在运行期间将其故障写入错误日志文件。另一个程序读取每一行。这应该是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:29:59.027

是的，可以使用以下方式从下到上读取文件`RandomAccessFile`：

*   [通过随机访问在 Java 中读取文件的最后一行](http://www.brilliantsheep.com/reading-the-last-line-of-a-file-in-java-through-random-access/)

至于你问题的另一部分：

> 除了这个文件在这段时间里发生变化，所以最后一行不会永远持续下去。在读取另一个 java 程序时写在上面。我的问题是：程序会在同一时间看到另一个 java 程序在文件上写，这些变化?

我会提出一个[SSCCE](http://sscce.org/)，您可以在其中展示您要完成的工作和问题

编辑：

正如 Jon Skeets 评论所暗示的，我找到了一个指向他回答的类似问题的链接：[快速阅读文本文件的最后一行？](https://stackoverflow.com/questions/686231/java-quickly-read-the-last-line-of-a-text-file)

编辑2：

我想我得到了你的第二个问题，我不确定这是否可能，因为单个文件不能同时被 2 个不同的流访问，在尝试打开文件时只会抛出错误。[然而，Ypu 可以监控在使用Java.NIO Directory Watcher](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)读取文件后是否发生更改，除非我误解了你。

# javascript - Android WebView 上的 JavaScript 执行流程

> ID：11385094
> 
> 赞同：2
> 
> 时间：2012-07-08T17:21:54.553
> 
> 标签：javascript, android, webview, execute

我有一个关于 android 中的 javascript 和 WebView 的问题。我还没有找到答案。

当我尝试使用 loadData 加载网页时（在 Web 视图设置中启用了 javascript），我无法理解 javascript 执行的工作流程（似乎没有执行某些 javascript 代码）。页面代码如下（示例）：

```
<html><head><meta name='viewport' content='user-scalable=no initial-scale=1.0' />
<title>Title</title>
<script type="text/javascript">
var init = function() {
var uuu = window.uuu = {};
}

window.zzz = window.uuu;
</script>
<script type="text/javascript">/
(function() {
  var c = window.c = {};
})();
</script>
<script type="text/javascript">   ......  some javascript ..... </script>
</head>
<body style="margin:0; padding:0; overflow:hidden; background-color:transparent;">
<div align="center">
<script>   ..... some javascript ..... </script>
</div>
</body>
</html> 
```

加载后的此页面不执行任何 javascript 并且仅当所有 javascripts 通过 loadUrl("javascript:" + ....); 注入时才开始工作；这不是一个好的解决方案（主体可能很复杂，可以包含或不包含它）。如何在桌面浏览器上使用类似的 javascript？

# iphone - box2d raycast 向后兼容性问题

> ID：11385100
> 
> 赞同：1
> 
> 时间：2012-07-08T17:22:18.303
> 
> 标签：iphone, c++, box2d

我最近在一个长期运行的项目中将 box2d 的版本升级到 v2.2.1，它导致了与现有项目代码的许多向后兼容性问题。大部分都解决了，除了这个

```
b2Fixture *f = body->GetFixtureList();
b2RayCastOutput output;
b2RayCastInput input;
f->RayCast(&output, input) // broken call 
```

现在坏了，期待第三次争论。我在 box2d 源代码中看到函数签名是

```
inline bool b2Fixture::RayCast(b2RayCastOutput* output, const b2RayCastInput& input, int32 childIndex) const; 
```

但我找不到任何`childIndex`应该是的例子。有人可以提供一个如何使用这个更新的 RayCast 功能的例子吗？

编辑：我注意到设置`childIndex`为 0 似乎有效，但我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:46:08.073

此参数仅与 b2ChainShape 夹具相关。对于其他形状类型，它只是为了符合虚函数签名。

链形状的功能实际上是由多个 b2EdgeShape 完成的，链形状本身可以被认为是组织这些边缘形状“孩子”的帮手。它分配内存，为您设置幻影顶点，并将诸如碰撞检查之类的事情委托给边缘形状。

如果您不针对链形状投射光线，则可以将其保留为零。如果是，您可以使用 b2ChainShape 的这些函数将光线投射到每个子边缘：

```
int32 GetChildCount() const;
void GetChildEdge(b2EdgeShape* edge, int32 index) const; 
```

其中第二个使用如下：

```
b2EdgeShape edgeShape;
chainShape->GetChildEdge(&edgeShape, 123); 
```

您需要先将形状转换为 b2ChainShape*：

```
if ( e_chain == fixture->GetType() ) {
    b2ChainShape* chainShape = (b2ChainShape*)fixture->GetShape();
    ....
} 
```

...使用 b2World 的 RayCast 功能会更容易和更有效:)

# android - 在 Android 中使用带有 Phonegap 的剪贴板

> ID：11385106
> 
> 赞同：0
> 
> 时间：2012-07-08T17:23:01.680
> 
> 标签：android, cordova, clipboard, phonegap-plugins

如何使用 PhoneGap 将文本复制到剪贴板？我找到[了这个](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ClipboardManager)插件，但它似乎已经过时了。

我尝试创建自己的插件，但出现此错误： `Can't create handler inside thread that has not called Looper.prepare()`

我找到了一些解决该错误的答案，但我对 Java 不太熟悉，而且我无法自己修复代码。[你可以从这里](http://pastebin.com/1eydgdL7)查看我的代码，它只是 ClipboardManager 插件的修改版本。

我正在使用 Cordova (PhoneGap) 版本 1.9.0，并且我也在使用 jQuery Mobile。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:56:57.077

您正在尝试在不同于 UI 线程的线程中运行 UI 代码。您需要将剪贴板代码包装在这样的可运行文件中：

```
 Runnable runnable = new Runnable() {
        public void run() {
           // Do clipboard stuff here.
        }
    };
    this.cordova.getActivity().runOnUiThread(runnable); 
```

# android - 移动版 Chrome 中的 -webkit-calc()

> ID：11385107
> 
> 赞同：1
> 
> 时间：2012-07-08T17:23:03.573
> 
> 标签：android, google-chrome

我想在适用于 Android 的 Chrome 上使用 -webkit-calc()，但它似乎不可用，对吗？如何获取有关 webkit 功能支持的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:07:47.420

回答这个问题有点晚了，但 Android 版 Chrome 在 M16 和 M18 上运行了很长时间，不支持 -webkit-calc。自 M25 起 -webkit-calc 现已可用

我们在最新视频中谈到了它[http://www.youtube.com/watch?v=3eHKebsEOns&feature=player_detailpage#t=72s3](http://www.youtube.com/watch?v=3eHKebsEOns&feature=player_detailpage#t=72s3)

我还在[http://jsbin.com/esepeq/latest](http://jsbin.com/esepeq/latest)创建了一个简单的演示，您可以在任何支持它的浏览器上看到它的运行情况。

# objective-c - 即使应用程序进入后台，如何下载文件？

> ID：11385125
> 
> 赞同：3
> 
> 时间：2012-07-08T17:25:15.097
> 
> 标签：objective-c, ios, nsurlconnection, background-process

> **可能重复：**
> [在 iPhone 后台下载](https://stackoverflow.com/questions/3612963/download-in-background-in-iphone)

我正在我的应用程序中下载一个文件，`connection:didReceiveData:`使用`NSURLConnectionDelegate`. 如果我按下主页按钮，则下载将停止。没有调用委托来接收数据。

当应用程序进入后台时，应用程序必须继续下载文件。我该如何实施？

有一种`beginBackgroundTaskWithExpirationHandler:`在后台启动有限长度任务的方法，这是我需要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:35:05.890

这将允许您在后台下载：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

    UIApplication *app = [UIApplication sharedApplication];
    UIBackgroundTaskIdentifier bgTask;

    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{ 
    [app endBackgroundTask:bgTask]; 
        }];

} 
```

# html-parsing - Scrapy - Parse_item 没有被调用

> ID：11385126
> 
> 赞同：0
> 
> 时间：2012-07-08T17:25:35.577
> 
> 标签：html-parsing, scrapy

我有两个主要问题

1) 爬取页面后没有调用/执行 parse_item 方法 2) 当规则中包含“callback='self.parse_item'”时，scrapy 不会继续跟踪链接。相反，它只跟随开始网址中立即可用的链接。

这是代码

```
from scrapy.spider import BaseSpider
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from sheprime.items import SheprimeItem

class HerroomSpider(CrawlSpider):
    name = "herroom"
    allowed_domains = ["herroom.com"]
    start_urls = [
                  "http://www.herroom.com/simone-perele-12p314-trocadero-sheer-seamless-racerback-bra.shtml",
 "http://www.herroom.com/hosiery.aspx",

rules = [
            Rule(SgmlLinkExtractor(allow=(r'/[A-Za-z0-9\-]+\.shtml', )), callback='self.parse_item')

   ]

def parse_item(self, response):
    print "some message"  

#I have put in this simple parse function, because I just want to get it to work 
```

谢谢你的帮助，

大号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:14:43.907

你的代码：

```
Rule(SgmlLinkExtractor(allow=(r'/[A-Za-z0-9\-]+\.shtml', )), callback='self.parse_item') 
```

它应该是：

```
Rule(SgmlLinkExtractor(allow=(r'/[A-Za-z0-9\-]+\.shtml', )), callback='parse_item') 
```

这对我有用：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class HerroomSpider(CrawlSpider):
    name = "herroom"
    allowed_domains = ["herroom.com"]
    start_urls = [
        "http://www.herroom.com/simone-perele-12p314-trocadero-sheer-seamless-racerback-bra.shtml",
        "http://www.herroom.com/hosiery.aspx"
    ]

    rules = [
        Rule(SgmlLinkExtractor(allow=(r'/[A-Za-z0-9\-]+\.shtml', )), callback='parse_item')
    ]

    def parse_item(self, response):
        print "some message" 
```

结果：

```
vic@wic:~/projects/test$ scrapy crawl herroom
2012-07-09 08:08:51+0400 [scrapy] INFO: Scrapy 0.15.1 started (bot: domains_scraper)
2012-07-09 08:08:51+0400 [scrapy] DEBUG: Enabled extensions: LogStats, CloseSpider, CoreStats, SpiderState
2012-07-09 08:08:51+0400 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2012-07-09 08:08:51+0400 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-07-09 08:08:51+0400 [scrapy] DEBUG: Enabled item pipelines: Pipeline
2012-07-09 08:08:51+0400 [herroom] INFO: Spider opened
2012-07-09 08:08:51+0400 [herroom] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-07-09 08:08:52+0400 [herroom] DEBUG: Crawled (200) <GET http://www.herroom.com/simone-perele-12p314-trocadero-sheer-seamless-racerback-bra.shtml> (referer: None)
2012-07-09 08:08:54+0400 [herroom] DEBUG: Crawled (200) <GET http://www.herroom.com/hosiery.aspx> (referer: None)
2012-07-09 08:08:55+0400 [herroom] DEBUG: Crawled (200) <GET http://www.herroom.com/simone-perele.shtml> (referer: http://www.herroom.com/simone-perele-12p314-trocadero-sheer-seamless-racerback-bra.shtml)
some message
2012-07-09 08:08:56+0400 [herroom] DEBUG: Crawled (200) <GET http://www.herroom.com/simone-perele-12p300-trocadero-strapless-bra.shtml> (referer: http://www.herroom.com/simone-perele-12p314-trocadero-sheer-seamless-racerback-bra.shtml)
some message
2012-07-09 08:08:57+0400 [herroom] DEBUG: Crawled (200) <GET http://www.herroom.com/simone-perele-12p342-trocadero-push-up-bra-with-racerback.shtml> (referer: http://www.herroom.com/simone-perele-12p314-trocadero-sheer-seamless-racerback-bra.shtml)
some message 
```

# python - 与 CPU 绑定任务的队列扭曲

> ID：11385131
> 
> 赞同：3
> 
> 时间：2012-07-08T17:26:45.847
> 
> 标签：python, queue, twisted, multiprocessing, cpu-usage

我有一个 HTTP 服务器，它做一些 IO 的东西，然后做一些 CPU 绑定的东西（PIL），然后回复数据（兆字节左右）。

(a) 我的第一个想法是这样的：一个基于 Twisted 的服务器和 IO 进程，以及几个用于 PIL 东西的进程，带有队列。

如果这种架构是合理的，那么可能有一个库可以做到这一点：Twisted 的多进程队列。但是，我在 Twisted 中并没有真正的经验，对它的社区一无所知，所以我发现的唯一东西是`ampoule`，我没有找到文档和描述来说服我它是工作的正确工具。

(b) 另一个想法是只在几个线程中运行多个服务器，IO 和 CPU 的东西都在它们中。这似乎很愚蠢，因为 CPU 的东西会阻塞，但也许我并没有真正理解它。

所以，问题：

1.  这些架构中的任何一个合理吗？
2.  你将如何实现它（使用`Twisted`+`ampoule`或什么？）
3.  对于（a），您将如何将大量数据从“worker”发送到服务器线程？或者我可以告诉工作人员以某种方式直接写入响应？
4.  多少“工人”是合理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:17:52.433

1.  是的，这些架构可能是合理的
2.  我可能也会使用安瓿，但我现在也不太了解它。[这个链接](http://twistedmatrix.com/pipermail/twisted-python/2009-February/019218.html)是我记得看到的最接近一个好的介绍的东西。
3.  由于听起来您的工作人员将始终在同一台机器上，因此您应该能够使用共享内存。
4.  这在很大程度上取决于您可用的内核数量以及工作的密集程度（包括 CPU 时间和其他资源，如内存和磁盘）。可能很难给出比“每个核心大约 1-5 个进程进行基准测试，看看什么是最快的”更好的答案。

# c# - 在 IIS7 中作为 DefaultAppPool 运行时 Websphere MQ 访问 SSL 证书？

> ID：11385134
> 
> 赞同：2
> 
> 时间：2012-07-08T17:27:01.603
> 
> 标签：c#, iis-7.5, ssl-certificate, ibm-mq

我有一个 C# Web 服务，它在 Windows Server 2008 R2 上的 IIS 7.5 下运行，使用 DefaultAppPool 用户作为应用程序标识（IIS APPPOOL\DefaultAppPool）。Web 服务使用 IBM Websphere MQ (7.0.1.2) 来完成它的工作，并通过 IBM 的 KeyMan 实用程序使用存储在 key.kdb 设置中的 SSL 证书。

通常（对于未运行 IIS 的 C# 应用程序）我需要在 kdb 中标记个人证书，以便其名称与运行应用程序的用户匹配，即证书将被标记为 ibmwebspheremqbs6mjb（请参阅[http://www-01 .ibm.com/support/docview.wss?uid=swg21245474](http://www-01.ibm.com/support/docview.wss?uid=swg21245474)），这允许应用程序成功访问 key.kdb 中的 SSL 证书。

但是......当作为 Web 服务运行并命名证书 ibmwebspheremqdefaultapppool 时，应用程序无法访问 SSL 证书。如果我将 AppPool 标识更改为 bs6mjb，那么一切正常（我不允许将应用程序池作为 bs6mjb 运行）。

我不想设置上面链接中提到的默认证书，有人知道证书应该标记为与 DefaultAppPool 一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:11:55.827

对于 MQ 客户端，证书标签必须具有运行客户端的用户名。在您的情况下，例如`ibmwebspheremqbs6mjb`. 如果证书标签是别的东西，MQ 客户端（实际上是 GSKit 库）将找不到证书以连接到队列管理器。我认为当您将标签设置为`ibmwebspheremqdefaultapppool`.

这个[博客](http://hursleyonwmq.wordpress.com/2007/02/16/do-you-have-to-specify-an-ssl-certificate-label/)有有趣和有用的细节。您可能想要检查 IIS 在哪个用户下运行并为该用户创建证书，并在客户端和 MQ 队列管理器之间进行所需的 SSL 设置。

# jquery - 从对象在jquery中动态调用函数

> ID：11385135
> 
> 赞同：0
> 
> 时间：2012-07-08T17:27:16.330
> 
> 标签：jquery

```
var animations = {
    slide : {enter:'slideDown('+settings.speed+')', exit:'slideUp('+settings.speed+')'},
    fade : {enter:'fadeIn('+settings.speed+')', exit:'fadeOut('+settings.speed+')'}
}; 
```

我目前有一个文字对象，其中定义了进入和退出动画。是否可以动态调用这些以及如何调用？

基本上，我试图找到一种方法来动态调用函数，同时保持代码尽可能小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:11:37.593

您可以使用以下语法：`$(obj)[action](htmlStr);`

小提琴：http: [//jsfiddle.net/svvdw/](http://jsfiddle.net/svvdw/)

```
var settings = {
    speed: 'slow'
};

var animations = {
    slide : {enter:'slideDown', exit:'slideUp'},
    fade : {enter:'fadeIn', exit:'fadeOut'}
};

$("#test")[animations.fade.exit](settings.speed); 
```

​</p>

# magento - Magento 从 1.3.0.0 升级到 1.6.2.0 的问题

> ID：11385148
> 
> 赞同：0
> 
> 时间：2012-07-08T17:28:57.097
> 
> 标签：magento

我遇到了一个问题，我不知道如何解决它。我对 Magento 和 PHP 很陌生，所以对错误了解不多，我通常用谷歌搜索它来修复它，但似乎找不到任何解决这个问题的东西。

我收到以下错误。升级到 1.6.2.0 后，Magento 使用了一个名为“modern”的主题，但是当我将其更改为原来的主题时，我得到了错误。我还附上了错误似乎源于错误的文件“list_sidebar.phtml”。

任何帮助将不胜感激。

```
There has been an error processing your request

Invalid method Mage_Catalog_Block_Product_List::myGetProductCollection(Array
(
    [0] => 18
)
)

Trace:
#0 /home/lailides/devmagento/store/app/design/frontend/default/lailides/template/catalog/product/list_sidebar.phtml(47): Varien_Object->__call('myGetProductCol...', Array)
#1 /home/lailides/devmagento/store/app/design/frontend/default/lailides/template/catalog/product/list_sidebar.phtml(47): Mage_Catalog_Block_Product_List->myGetProductCollection('18')
#2 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Template.php(241): include('/home/lailides/...')
#3 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#4 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#5 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#6 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml()
#7 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#8 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#9 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('left', true)
#10 /home/lailides/devmagento/store/app/design/frontend/default/lailides/template/page/3columns.phtml(46): Mage_Core_Block_Abstract->getChildHtml('left')
#11 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Template.php(241): include('/home/lailides/...')
#12 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#13 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#14 /home/lailides/devmagento/store/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#15 /home/lailides/devmagento/store/app/code/core/Mage/Core/Model/Layout.php(529): Mage_Core_Block_Abstract->toHtml()
#16 /home/lailides/devmagento/store/app/code/core/Mage/Core/Controller/Varien/Action.php(391): Mage_Core_Model_Layout->getOutput()
#17 /home/lailides/devmagento/store/app/code/core/Mage/Cms/Helper/Page.php(132): Mage_Core_Controller_Varien_Action->renderLayout()
#18 /home/lailides/devmagento/store/app/code/core/Mage/Cms/Helper/Page.php(52): Mage_Cms_Helper_Page->_renderPage(Object(Mage_Cms_IndexController), 'home')
#19 /home/lailides/devmagento/store/app/code/core/Mage/Cms/controllers/IndexController.php(45): Mage_Cms_Helper_Page->renderPage(Object(Mage_Cms_IndexController), 'home')
#20 /home/lailides/devmagento/store/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Cms_IndexController->indexAction()
#21 /home/lailides/devmagento/store/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#22 /home/lailides/devmagento/store/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#23 /home/lailides/devmagento/store/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#24 /home/lailides/devmagento/store/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#25 /home/lailides/devmagento/store/index.php(80): Mage::run('', 'store') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:11:34.797

正如丹尼尔所说，如果您覆盖了核心文件，则必须对核心文件进行一些直接定制。

如果您不直接替换核心文件并且您在不同的位置进行升级然后检查 app\code\local 或 app\code\community 可能有自定义模块覆盖类 Mage_Catalog_Block_Product_List 并具有自定义功能，那么您可以移动该模块它可能会再次开始工作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:54:36.087

一种可能的情况是，在您的 1.3.0.0 安装中，核心被直接修改为包含一个`myGetProductCollection`方法，并且在升级过程中被覆盖。

您应该在原始安装和[Magento 1.3.0.0之间进行](http://www.magentocommerce.com/download)[比较](http://en.wikipedia.org/wiki/Diff)。这应该告诉您您的核心与标准 Magento 安装有何不同。

一旦确定了这些缺失的方法，就应该改用[重写](http://www.magentocommerce.com/wiki/groups/174/changing_and_customizing_magento_code#blocks)来实现它们，这样下次升级时就不会发生同样的事情。

# windows-phone-7 - 获取响应 uri

> ID：11385161
> 
> 赞同：0
> 
> 时间：2012-07-08T17:30:45.317
> 
> 标签：windows-phone-7

我是 Windows phone 7 应用程序开发的新手。我目前正在开发一个应用程序，我希望在其中执行 HTML 请求并显示在 Web 浏览器中获得的结果。例如，假设我给出以下 URI

> "http://m.imdb.com/find?q="+search_string (其中 search_string 是一个变量)

我想获取由此获得的结果并将其显示在网络浏览器上。在过去的 1 天里，我一直在寻找这个……没有得到任何富有成果的结果。所以请将我重定向到合适的教程页面或提供示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:40:12.477

```
WebBrowserTask wbt = new WebBrowserTask();
wbt.URL = "http://m.imdb.com/find?q="+search_string
wbt.Show(); 
```

这将允许您在浏览器中启动 url。

[网络浏览器任务](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.webbrowsertask%28v=vs.92%29.aspx)

# ios - 如何在 iOS 中创建类似于 WhatsApp 中的多行导航栏？

> ID：11385162
> 
> 赞同：1
> 
> 时间：2012-07-08T17:30:47.830
> 
> 标签：ios, uinavigationbar

有没有人知道如何在 iOS 中创建多行导航/顶部栏？我想要类似于 WhatsApp 中的状态行（显示上次看到或当前状态信息的状态行）的东西。任何意见，将不胜感激。

我想在图像中实现类似的东西（弗朗西斯惠特曼/最后一次看到 [...]）：

[![在此处输入图像描述](../Images/d093ba00015fd7bf79248da2dbbc347f.png)](https://i.stack.imgur.com/AckHe.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:08:39.570

默认情况下，a`UINavigationController`将使用`title`当前显示的视图控制器的属性作为其导航栏中的标题。`titleView`但是，您可以通过设置视图控制器的属性来让它显示任意视图，`navigationItem`如下所示：

```
// In your view controller’s implementation (.m) file:
- (id)initWithNibName:(NSString *)nibName
               bundle:(NSStirng *)nibBundle
{
    self = [super initWithNibName:nibName bundle:nibBundle];

    if (self) {
        UIView *myTitleView = [[UIView alloc] initWithFrame:CGRectMake(0.0f,
                                                                       0.0f,
                                                                       250.0f,
                                                                       44.0f)];
        [myView setBackgroundColor:[UIColor greenColor]];

        [[self navigationItem] setTitleView:myTitleView];
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T08:02:56.297

```
UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width/2, 200)];
[label setBackgroundColor:[UIColor clearColor]];
[label setTextColor:[UIColor whiteColor]];
[label setTextAlignment:NSTextAlignmentCenter];
[label setNumberOfLines:0];
[label setText:_certificate.name];
self.navigationItem.titleView = label; 
```

# php - 如何使用日期自动重命名文件？（备份 php）

> ID：11385163
> 
> 赞同：0
> 
> 时间：2012-07-08T17:30:48.713
> 
> 标签：php, ftp

此代码创建 db 备份文件，但文件名始终相同，因此我需要手动重命名它们。您将如何编写代码以在其标题中自动插入此备份的日期和时间？（例如：backupDB-07.08.12-18h43）或类似的东西？

我的代码：

```
<?
echo "backup of your database

";
$db="nom_de_ma_base";
$status=system("mysqldump --host=mysql5-1.perso --user=$_POST[login] --password=$_POST[password] $db > ../$db.sql");
echo $status;
echo "Compression du fichier.....

";
system("bzip2 -f /homez/backupDB/$db" . date("d-M-Y", time()) . ".sql");
echo "C'est fini. You can access to your database
\n
";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:38:27.930

为什么不简单地包含一个包含之后日期的变量`$db.sql`？像这样的代码：

```
<?
echo "backup of your database";
$db="nom_de_ma_base";

$date = date('d.m.Y', time());
$filename = $db.'-'.$date;
$status=system("mysqldump --host=mysql5-1.perso --user=$_POST[login] --password=$_POST[password] $db > ../$filename.sql");
echo $status;

echo "Compression du fichier.....";
system("bzip2 -f /homez/backupDB/$filename.sql");
echo "C'est fini. You can access to your database\n";
?> 
```

如您所见，我添加了一个名为`$filename`.
它包含`$db`，`$date`所以你最终拥有`my_database_name-08.07.2012`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T17:38:35.583

你在错误的地方做约会的事情。将时间戳放入一个字符串变量中，并将该变量添加到实际写入备份 sql 文件的位置。

将其放入变量的想法是，它可能会在写操作开始和压缩操作开始之间发生变化。

```
<?
echo "backup of your database

";
$db="nom_de_ma_base";
$datestamp = date("d-M-Y", time());
$status=system("mysqldump --host=mysql5-1.perso --user=$_POST[login] --password=$_POST[password] $db > ../$db" . $datestamp .".sql");
echo $status;
echo "Compression du fichier.....

";
system("bzip2 -f /homez/backupDB/$db" . $datestamp . ".sql");
echo "C'est fini. You can access to your database
\n
";
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T17:44:38.983

```
<?php

$curdate = date('Y-m-d_g-i-s');
echo "backup of your database @".$curdate."\n\r";
$db="nom_de_ma_base".$curdate;
$status=system("mysqldump --host=mysql5-1.perso --user=$_POST[login] --password=$_POST[password] $db > ../$db.sql");
echo $status;
echo "Compression du fichier.....

";
system("bzip2 -f /homez/backupDB/$db.sql");
echo "C'est fini. You can access to your database
\n
";
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:39:08.460

试试这个：

```
$Command='tar -cvf All-backup_'.date("Y-m-d").'.tar Backup_ftp-'.date("Y-m-d").'.tar Backup_sql_'.date("Y-m-d").'.sql.gz';
if(exec($Command))
echo 'backup done !'; 
```

# windows - Eventviewer eventid 用于锁定和解锁

> ID：11385164
> 
> 赞同：64
> 
> 时间：2012-07-08T17:31:01.180
> 
> 标签：windows, event-viewer

[在 Windows XP、Windows 7、 Windows Vista](http://en.wikipedia.org/wiki/Windows_Vista)和[Windows Server 2008](http://en.wikipedia.org/wiki/Windows_Server_2008)中，用于锁定、解锁计算机的事件查看器中的事件 ID 是什么？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-08T17:43:01.220

锁定事件 ID 为 4800，解锁事件 ID 为 4801。您可以在安全日志中找到它们。您可能必须使用*Local Security Policy* (secpol.msc, *Local Security Settings* in Windows XP) -> *Local Policies* -> *Audit Policy来*[激活他们的审核](http://technet.microsoft.com/en-us/library/dd772704%28v=ws.10%29)。对于 Windows 10，请参见下图。

 ***在子类别下查看*[Windows 7 和 Windows Server 2008 R2 中的安全事件描述](http://support.microsoft.com/kb/977519)**：其他登录/注销事件*。

[![Windows 10 中的其他登录/注销事件](../Images/ab3cf765f65e35a821af6f269801f960.png)](https://i.stack.imgur.com/DKYyB.png)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-09T14:35:32.630

您将需要启用这些事件的日志记录。通过打开组策略编辑器执行此操作：

> 运行-> gpedit.msc

并配置以下类别：

> *计算机配置*->
> *Windows 设置*->
> *安全设置*->
> *高级审核策略配置*->
> *系统审核策略 - 本地组策略对象*->
> *登录/注销*->
> *审核其他登录/注销事件*

（在*解释*选项卡中显示“...允许您审核...锁定和解锁工作站”。）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-08-01T18:12:48.120

对于较新版本的 Windows（包括但不限于 Windows 10 和 Windows Server 2016），事件 ID 为：

*   4800 - 工作站被锁定。
*   4801 - 工作站已解锁。

锁定和解锁工作站还涉及以下登录和注销事件：

*   4624 - 帐户已成功登录。
*   4634 - 帐户已注销。
*   4648 - 尝试使用显式凭据登录。

使用终端服务会话时，如果会话断开，锁定和解锁还可能涉及以下事件，事件 4778 可能会替换事件 4801：

*   4779 - 会话与 Window Station 断开连接。
*   4778 - 会话重新连接到 Window Station。

默认情况下不审核事件 4800 和 4801，必须使用本地组策略编辑器 ( `gpedit.msc`) 或本地安全策略 ( `secpol.msc`) 启用。

使用本地组策略编辑器的策略路径是：

*   本地计算机策略
*   电脑配置
*   Windows 设置
*   安全设定
*   高级审计策略配置
*   系统审核策略 - 本地组策略对象
*   登录/注销
*   审核其他登录/注销事件

使用本地安全策略的策略路径是本地组策略编辑器路径的以下子集：

*   安全设定
*   高级审计策略配置
*   系统审核策略 - 本地组策略对象
*   登录/注销
*   审核其他登录/注销事件

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-08T17:39:53.500

要在 Vista 之前的 Windows 中查找的事件 ID 是[528](https://www.ultimatewindowssecurity.com/securitylog/encyclopedia/event.aspx?eventid=528)、[538](https://www.ultimatewindowssecurity.com/securitylog/encyclopedia/event.aspx?eventid=538)和[680](https://www.ultimatewindowssecurity.com/securitylog/encyclopedia/event.aspx?eventid=680)。528 通常代表工作站解锁成功。

较新的 Windows 版本的代码有所不同，请参阅下面的答案以获取更多信息。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-13T09:33:30.173

不幸的是，没有锁定/解锁之类的东西。你要做的是：

1.  点击“过滤当前日志...”
2.  选择 XML 选项卡并单击“手动编辑查询”
3.  输入以下查询：

    ```
    <查询列表>
      <查询 ID="0" 路径="安全">
        <选择路径="安全">
        *[EventData[Data[@Name='LogonType']='7']
         和
         (系统[(EventID='4634')] 或系统[(EventID='4624')])
         ]</选择>
      </查询>
    </查询列表>

    ```

就是这样

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-19T10:18:46.897

要识别解锁屏幕，我相信您可以使用 ID 4624。但是您还需要查看登录类型，在这种情况下为 7：[http ://www.ultimatewindowssecurity.com/securitylog/encyclopedia/event.aspx?eventid =4624](http://www.ultimatewindowssecurity.com/securitylog/encyclopedia/event.aspx?eventid=4624)

注销的事件 ID 是 4634

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-04T18:53:04.037

安全设置 -> 高级审核策略 -> 系统审核 -> 登录/注销 -> 审核其他登录/注销事件 -> 成功

启用以下功能：

```
4800 - workstation locked
4801 - workstation unlocked
4802 - screensaver invoke
4803 - screensaver dismissed 
```

视窗 10 专业版

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-24T17:08:15.600

对于 Windows 10，lock=4800 和 unlock=4801 的事件 ID。

正如马里奥和用户 00000 提供的答案中所说，您需要通过运行 gpedit.msc 并导航到他们指示的分支，使用上述方法启用锁定和解锁事件的日志记录：

> 计算机配置 -> Windows 设置 -> 安全设置 -> 高级审核策略配置 -> 系统审核策略 - 本地组策略对象 -> 登录/注销 -> 审核其他登录/注销

为成功和失败事件启用。

启用这些事件的日志记录后，您可以直接筛选事件 ID 4800 和 4801。

此方法适用于 Windows 10，因为我只是在锁定和解锁计算机后使用它来过滤我的安全日志。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-15T20:37:00.593

使用 Windows 10 家庭版。即使在安装 Windows 组策略编辑器、启用对所有相关事件的审核并重新启动计算机之后，我也无法让事件查看器捕获事件 4800 和 4801。但是，我能够发现与锁定和解锁相关的其他事件，您可以将它们用作 PC 何时锁定​​的准确可靠的指标。请参阅下面的配置 - 第一个是 PC Locked（连接到显示 C:\Windows\System32\LogonUI.exe 的事件） - 第二个是 PC Unlocked（成功登录的事件）。

[![在此处输入图像描述](../Images/93047370efd66ca7c906b14f88dc873b.png)](https://i.stack.imgur.com/TJAbc.png)

[![在此处输入图像描述](../Images/d2c6e70db436ba20b7df0c0294c003d2.png)](https://i.stack.imgur.com/pbgws.png)***

# css - 可滚动 div 内 div 的绝对位置无法正常工作

> ID：11385165
> 
> 赞同：1
> 
> 时间：2012-07-08T17:31:13.493
> 
> 标签：css

我有一个使用 jquery 显示所选文件内容的框。盒子的代码是

```
<div class="lightbox">
<div class="lightbox-content"></div>
<div id="close-lightbox">Close</div>
</div> 
```

我希望关闭灯箱 div 始终位于框的底部。所以它的 css 是

```
#close-lightbox{color:red;position:absolute;bottom:0;padding-left:30%;} 
```

分区`lightbox`有`overflow:auto`. 现在，发生的情况是，如果`lightbox-content`不是很大并且它适合固定大小，`lightbox`那么就没有滚动并且`close-ligthbox`确实出现在我想要的底部。但是，如果`lightbox-content`它很大并且不适合灯箱的固定大小，那么就会出现滚动，但在`close-lightbox`向下滚动之前出现在灯箱的底部，这意味着它出现在`lightbox-content`.

有什么建议我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:34:55.067

您可以将灯箱包装在它自己的包装器中，并相对于它定位关闭灯箱。

HTML

```
<div class="lightbox-wrapper">
    <div class="lightbox">
        <div class="lightbox-content"></div>
        <div id="close-lightbox">Close</div>
    </div>
</div>​ 
```

CSS

```
.lightbox-wrapper {
    position: relative;
}

#close-lightbox {
    position: absolute;
    bottom: 5px;
    left: 30%;
} 
```

看看这个小提琴 - [http://jsfiddle.net/joplomacedo/4chu6/](http://jsfiddle.net/joplomacedo/4chu6/)

**编辑**Ohgodwhy 的解决方案实际上更清洁，如果你能够将灯箱移动`overflow:auto`到灯箱内容 - >当我在它的时候，我对他的解决方案做了摆弄 - [http://jsfiddle.net/joplomacedo/4chu6/2/](http://jsfiddle.net/joplomacedo/4chu6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:36:32.440

```
.lightbox{
  height:auto;
  overflow:hidden;
}

.lightbox-content{
  height:270px;
  overflow:auto;  
} 
```

根据您对灯箱的需要更改此高度。

# c# - 为什么我的 TryInvokeMember 没有被调用？

> ID：11385168
> 
> 赞同：0
> 
> 时间：2012-07-08T17:31:45.520
> 
> 标签：c#, dynamic, dynamicobject

我的 DynamicObject 实现如下所示：

```
public class DynCallsite: DynamicObject
{
    public DynCallsite(ScriptPlayer player)
    {
        _player = player;
    }

    public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
    {
        var ftt = new CallTranslator();

        var request = ftt.CreateXmlRequest(binder.Name, args);

        var callResult = _player.CallFunction(request);
        result = ftt.DeserializeXmlRequest(callResult);

        return true;            
    }

    private ScriptPlayer _player;
} 
```

这就是我使用这个对象的实例的方式：

```
class DynHost
{
    public DynHost()
    {
        _callSite = new DynCallsite(new ScriptPlayer());
    }    

    public dynamic Callsite
    {
        get { return _callsite; }   // A breakpoint put here will be hit
    }
}

// *snip*

var dh = new DynHost();
dh.Callsite.MyMethod("str1", 5, "str2"); 
```

它*曾经*工作:)，我不确定发生了什么变化。调试器没有中断 TryInvokeMember 调用，我得到了一个`RuntimeBinderException`. 此类在与正在运行的程序集不同的程序集中定义（以正常方式引用它，通过从同一解决方案添加对项目的引用）。

对实例执行调用后，我得到以下堆栈跟踪：

> Microsoft.CSharp.RuntimeBinder.RuntimeBinderController。**SubmitError** (Microsoft.CSharp.RuntimeBinder.Errors.CError pError) + 0x23 字节
> Microsoft.CSharp.RuntimeBinder.Semantics.LangCompiler。**SubmitError**（Microsoft.CSharp.RuntimeBinder.Errors.CParameterizedError 错误）+ 0x24 字节
> Microsoft.CSharp.RuntimeBinder.Errors.ErrorHandling。**ErrorTreeArgs** (Microsoft.CSharp.RuntimeBinder.Errors.ErrorCode id, Microsoft.CSharp.RuntimeBinder.Errors.ErrArg[] prgarg) + 0x53 字节 Microsoft.CSharp.RuntimeBinder.Semantics.MemberLookup。**ReportErrors** () + 0x6cd 字节
> Microsoft.CSharp.RuntimeBinder.RuntimeBinder。**绑定调用**（Microsoft.CSharp.RuntimeBinder.ICSharpInvokeOrInvokeMemberBinder 有效负载、Microsoft.CSharp.RuntimeBinder.Semantics.EXPR 调用对象、Microsoft.CSharp.RuntimeBinder.RuntimeBinder.ArgumentObject[] 参数、System.Collections.Generic.Dictionary 字典）+ 0x206 字节 Microsoft.CSharp。 RuntimeBinder.RuntimeBinder。**DispatchPayload**（System.Dynamic.DynamicMetaObjectBinder 有效负载，Microsoft.CSharp.RuntimeBinder.RuntimeBinder.ArgumentObject[] 参数，System.Collections.Generic.Dictionary 字典）+ 0xb1 字节
> Microsoft.CSharp.RuntimeBinder.RuntimeBinder。**绑定核心**（System.Dynamic.DynamicMetaObjectBinder 有效负载，System.Collections.Generic.IEnumerable 参数，System.Dynamic.DynamicMetaObject[] args，出 System.Dynamic.DynamicMetaObject deferredBinding）+ 0xbc 字节
> Microsoft.CSharp.RuntimeBinder.RuntimeBinder。**绑定**（System.Dynamic.DynamicMetaObjectBinder 有效负载，System.Collections.Generic.IEnumerable 参数，System.Dynamic.DynamicMetaObject[] args，输出 System.Dynamic.DynamicMetaObject deferredBinding）+ 0x56 字节
> Microsoft.CSharp.RuntimeBinder.BinderHelper。**绑定**（System.Dynamic.DynamicMetaObjectBinder 操作，Microsoft.CSharp.RuntimeBinder.RuntimeBinder 绑定器，System.Collections.Generic.IEnumerable args，System.Collections.Generic.IEnumerable arginfos，System.Dynamic.DynamicMetaObject onBindingError）+ 0x2ca 字节 Microsoft.CSharp.RuntimeBinder .CSharpInvokeMemberBinder。**FallbackInvokeMember**（System.Dynamic.DynamicMetaObject 目标，System.Dynamic.DynamicMetaObject[] args，System.Dynamic.DynamicMetaObject errorSuggestion）+ 0x77 字节
> System.Dynamic.DynamicObject.MetaDynamic.BindInvokeMember。**AnonymousMethod__10** (System.Dynamic.DynamicMetaObject e) + 0x1b 字节
> System.Dynamic.DynamicObject.MetaDynamic。**BindInvokeMember**（System.Dynamic.InvokeMemberBinder 绑定器，System.Dynamic.DynamicMetaObject[] args）+ 0xb8 字节 System.Dynamic.InvokeMemberBinder.Bind（System.Dynamic.DynamicMetaObject 目标，System.Dynamic.DynamicMetaObject[] args）+ 0x36 字节 System.Dynamic .DynamicMetaObjectBinder.Bind(object[] args, System.Collections.ObjectModel.ReadOnlyCollection 参数, System.Linq.Expressions.LabelTarget returnLabel) + 0xea 字节 System.Runtime.CompilerServices.CallSiteBinder。**BindCore** >(System.Runtime.CompilerServices.CallSite> site, object[] args) + 0x80 字节 System.Dynamic.UpdateDelegates。**UpdateAndExecuteVoid3**（System.Runtime.CompilerServices.CallSite 站点，对象 arg0，十进制 arg1，双 arg2）+ 0x30e 字节 MyApp.DynCallsite。**我的方法**（字符串 str1，十进制数，字符串 str2）第 96 行 + 0x17d 字节 C#

看起来好像我使用的是 DynamicObject 实例而不是我的专门派生类。但是，我确认不是这种情况，因为我可以在调试器中检查调用站点对象，它显示的是 DynCallsite。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:18:53.940

我想如果你直接使用动态它会起作用。问题可能是您通过属性返回它。这种方式适用于 WPF 数据绑定。如果我直接将动态作为 DataContext 提供，则绑定有效。如果我像你一样使用属性，我会得到绑定错误。

# entity-framework-4.1 - 双方都访问了OneToMany关系？

> ID：11385171
> 
> 赞同：1
> 
> 时间：2012-07-08T17:32:23.847
> 
> 标签：entity-framework-4.1, ef-code-first

在实体框架中..当您在关联的一侧应用流利映射中的关联时，关联的两侧是否会由 EF 自动生成？

如果以 OneToMany 关系为例。如果我在 X 的流畅映射配置中应用 X 和 Y 之间的关联，这是否也适用于 Y 端？我可以使用导航属性访问 Y 实体上的 X 吗？

Y 是否可以访问 X，反之亦然。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:03:27.987

是的。您实际上配置了与 Fluent API 的一对多*关系*，而不是实体之一上的属性或导航属性的任何“访问”规则。如果您在关系的两边都有导航属性，则可以为实体 X 或 Y 配置关系。无论哪一个都没有关系，您只需为一个而不是两个都配置。如果您在实体中只公开了一个导航属性，例如 X，则必须为实体 X 配置关系。

# iphone - 使用按钮 iPhone SDK 进行简单的声音播放

> ID：11385176
> 
> 赞同：0
> 
> 时间：2012-07-08T17:33:20.590
> 
> 标签：iphone, sdk, audio

单击按钮后，我已经尝试了几个小时播放简单的声音，但我无法做到。在尝试了几个教程之后，我在这个链接中关注了一个：

[http://www.mybringback.com/tutorial-series/1126/xcode-4-tutorial-ios-ipad-iphone-20-playing-sound-with-button/](http://www.mybringback.com/tutorial-series/1126/xcode-4-tutorial-ios-ipad-iphone-20-playing-sound-with-button/)

这是 .h 文件：

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>
@interface soundTestViewController : UIViewController{

}
-(IBAction) playSound;

@end 
```

这是 .m 文件：

```
#import "soundTestViewController.h"

@implementation soundTestViewController
-(IBAction) playSound{
    CFBundleRef mainBundle=CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef =CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"mysound", CFSTR("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

**但是，构建结果给出了错误：**

```
Build soundTest of project soundTest with configuration Debug

Ld build/Debug-iphonesimulator/soundTest.app/soundTest normal i386
cd /Users/joegeneric/Documents/soundTest
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc-4.2 -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.2.sdk -L/Users/joegeneric/Documents/soundTest/build/Debug-iphonesimulator -F/Users/joegeneric/Documents/soundTest/build/Debug-iphonesimulator -F/Users/joegeneric/Documents/soundTest -filelist /Users/joegeneric/Documents/soundTest/build/soundTest.build/Debug-iphonesimulator/soundTest.build/Objects-normal/i386/soundTest.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -framework Foundation -framework UIKit -framework CoreGraphics -framework AVFoundation -framework AudioToolbox -o /Users/joegeneric/Documents/soundTest/build/Debug-iphonesimulator/soundTest.app/soundTest

ld: warning: in /Users/joegeneric/Documents/soundTest/AVFoundation.framework/AVFoundation, missing required architecture i386 in file
ld: warning: in /Users/joegeneric/Documents/soundTest/AudioToolbox.framework/AudioToolbox, missing required architecture i386 in file
Undefined symbols:
  "_AudioServicesPlaySystemSound", referenced from:
      -[soundTestViewController playSound] in soundTestViewController.o
  "_AudioServicesCreateSystemSoundID", referenced from:
      -[soundTestViewController playSound] in soundTestViewController.o
ld: symbol(s) not found 
```

![在此处输入图像描述](../Images/b5ae96966abba19fe0206b7e5695a3d9.png) 你能展示我做错了什么或任何其他更简单的关于在 iPhone SDK 中播放声音的工作教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:07:30.693

【除了massimobio的正确答案】

您提供的教程链接提到了适用于 iOS 的 Xcode 4，但构建结果中的“setenv MACOSX_DEPLOYMENT_TARGET 10.6”行将您的部署目标指示为 Mac。

您需要将您的项目构建架构更改为 iOS 并检查您的目标是 IOS，而不是 OSX。

例如，要更改您的构建架构，请单击您的项目并选择构建设置以显示基本 SDK。![在此处输入图像描述](../Images/d243a2f49bf5c51cf47f756e906b1175.png)

您的 IBAction 也缺少发件人。它应该在你的控制器头文件中声明为

```
-(IBAction) playSound:(id)sender; 
```

并在您的控制器 .m 文件中实现为

```
-(IBAction) playSound:(id)sender {
  // your code here
} 
```

此外，不要忘记使用 control-drag 将代码中的 IBAction 链接到 XIB 以创建操作-目标对。

播放声音最简单的 Demo 是 SysSound。如果您搜索 Xcode 文档或通过 Apple Developer 网站的示例代码下，它是可用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:54:34.163

您是否将 AudioToolbox 框架添加到您的目标，并在您的代码中导入？

```
#import <AudioToolbox/AudioToolbox.h> 
```

# spring - 用 gradle 构建 spring

> ID：11385179
> 
> 赞同：3
> 
> 时间：2012-07-08T17:33:47.917
> 
> 标签：spring, build, gradle

我正在学习使用 git 和 gradle 在我的本地系统上构建 Spring 3.2。我克隆了 git repo 并使用`gradlew`命令开始构建，如下所示：

```
gradlew build 
```

我也有`GRADLE_HOME`设置并添加`GRADLE_HOME/bin`到我的`PATH`变量中。

每次我启动构建时，我都会看到`.gradle`在我的目录中创建了一个目录，`C:\Users\Ayusman`并且它似乎下载了 gradle 二进制文件。

我的问题：

1.  因为我的系统上已经安装了 gradle；为什么必须下载gradle？
2.  我可以强制 gradle 将我的依赖项放在特定目录而不是用户文件夹中（就像我可以在 maven 中指定的那样）吗？
3.  可以指出 gradle 从本地仓库而不是互联网中提取吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:59:48.013

广告 1\. 为了使用本地安装的 Gradle 进行构建，您必须调用`gradle`而不是`gradlew`. `gradlew`（称为*Gradle Wrapper* ）的目的是让每个人都使用相同的 Gradle 版本，而不必手动安装 Gradle。

ad 2\. 要更改 Gradle 放置依赖项（和其他全局信息）的位置，您可以设置`GRADLE_USER_HOME`环境变量。

广告 3\. 您只需将另一个存储库声明添加到`build.gradle`. 就像是：

```
allprojects {
    repositories {
        maven {
            url "http://..."
        }
    }
} 
```

如果您想将此存储库用于所有构建，您可以将相同的声明放入`~/.gradle/init.gradle`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T17:51:53.473

1.  因为`gradlew`调用 gradle 包装器，它下载构建脚本已为其编写的 gradle 版本，而不是使用您的版本，这可能不兼容。它只执行一次，然后重用下载的版本。如果您想使用您的 gradle 版本，请使用`gradle`command 而不是`gradlew`，但如果您没有适当的版本，它可能无法正常工作。

2.  AFAIK，这是通过定义 GRADLE_USER_HOME 环境变量来完成的。

3.  见[http://www.gradle.org/docs/current/userguide/userguide_single.html#sec:repositories](http://www.gradle.org/docs/current/userguide/userguide_single.html#sec:repositories)

# .htaccess - 复杂的防盗链

> ID：11385180
> 
> 赞同：0
> 
> 时间：2012-07-08T17:33:50.443
> 
> 标签：.htaccess

我有一个相当复杂的盗链问题。由于我对 .htaccess 的理解有点糟糕，我将对其进行伪编码：

1：每个嵌入式图像调用都应重定向到“请勿盗链”图像

2：每次直接点击图像，比如说：domain.com/folder/IMAGENAME.jpg 都应该重定向到包含图像的我的页面，例如 domain.com/IMAGENAME.html

3：搜索引擎应该不受影响或至少仍然能够抓取它们以进行图像搜索

谢谢您的帮助 ：）

# php - 管理模块的选项方法

> ID：11385183
> 
> 赞同：1
> 
> 时间：2012-07-08T17:34:15.647
> 
> 标签：php, mysql, content-management-system

我即将创建一个带有 php 和 mysql 的自定义 CMS。每个页面都有几个区域。每个区域都可以输出模块。例如，我们有一个新闻模块，我们已经在模块管理部分添加了新闻类别和单个新闻项目。但从这里开始：最终用户想要获得此模块的不同输出。例如，用户想要显示“体育”类别的新闻，或者用户想要显示前 5 条最新新闻，或者用户想要按某事对新闻进行排序，或者，或者，或者......模块可以采用的许多其他选项。

我的问题是您处理和管理这些选项的解决方案是什么。- 您是否建议为每个模块（如 news_options）提供一个 module_option 表？- 您是否建议使用一个包含每个模块选项的表格？

希望我能明白我的意思；）如果需要数据库图，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:43:07.863

1.  第一种方法可能是为每个模块使用不同的表。然后您可以在字段中保留不同实例的设置。以可管理的形式。

    例子：

    > ```
    > Table: News
    > ----------------------------------------------------------------------
    > | id      +     news_title     +     option 1     +    option 2      |
    > ---------------------------------------------------------------------- 
    > ```

2.  下一种方法，我可以使用全局配置表，它包含键名和一个字段以及另一个字段中的键值。这样您就不必从不同的模块创建不同的表。

    例子：

    表：模块选项

    > ```
    > --------+-----------------+-------------------+---------------------+
    > |  id   |   module_id     |    setting_name   |   settings_value    |
    > --------+-----------------+-------------------+---------------------+
    > |   1   |   1             |     option 1      |   option value 1    |
    > --------+-----------------+-------------------+---------------------+
    > |   2   |   1             |     option 2      |   option value 2    |
    > --------+-----------------+-------------------+---------------------+ 
    > ```

* * *

关于选择哪一个的问题取决于您如何编码您的项目。两者都有自己的优点和缺点。但是，有几点需要考虑

*   如果选项包含输入长文本的方法，那么第二种方法很糟糕，因为选项的大小会有很大差异。
*   如果所有的模块设置都可以在固定长度的字段中进行，那么第二个选项绝对是最好的方法。

# android - 如何正确定义活动和意图以按预期行事？

> ID：11385188
> 
> 赞同：1
> 
> 时间：2012-07-08T17:35:37.717
> 
> 标签：android, android-intent, android-activity

我有一个“列表”活动，单击时会启动一个“文章”活动。我也有直接打开“文章”活动的推送通知。

当来自通知时，我将“文章”活动中的后退按钮行为更改为启动“列表”活动，以便用户返回文章列表。

问题是当应用程序已经在后台打开并且我打开一个通知时 - 它只是将它带回前面。我想要实现的是在单击通知并返回“列表”活动时打开正确的文章，而列表活动可能会打开两次。

我试图分离“文章”任务并在通知意图中创建新任务，但是当打开多个通知并单击返回时，它会打开单独的“列表”活动。

定义活动的任务和意图标志以实现我的目标的正确方法是什么？

编辑：清单部分：

```
<activity android:name="ListFeed" android:configChanges="orientation|screenLayout" android:launchMode="singleInstance" android:screenOrientation="unspecified"
        android:taskAffinity="com.app.MyTask"></activity>
        <activity  android:name="Article" android:launchMode="standard" android:configChanges="orientation|screenLayout" android:screenOrientation="unspecified"
            android:taskAffinity="com.app.MyTask"></activity> 
```

通知意图：

```
Intent notificationIntent = new Intent(context, Article.class);
PendingIntent contentIntent = PendingIntent.getActivity(context, notificationID, notificationIntent, PendingIntent.FLAG_ONE_SHOT); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:44:34.287

我从你的问题中得到的是 1）你有 listActivity A

2）ArticalActivity B。

i）首先，您想在从 B 回来时打开活动 A，对吗？为此，您可以使用`dispatchKeyEvent`，收听后退按钮事件并开始活动 A. 或使用以下代码

```
@Override
public void onBackPressed() {
    Intent intent = new Intent(this, MainActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent);
} 
```

ii）您只想打开活动 A（列表）的单个实例。为此，您基本上可以 `launchMode`在活动 A 的清单声明中使用`singleInstance`.

```
android:launchMode="singleTask" 
```

您可以阅读启动模式的[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

如果我错过了什么，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:45:21.193

我看到您正在使用 launchModes 和 excludeFromRecents，这不是一件好事。Android 的标准行为应该可以满足您的需求。

为了验证这一点，我创建了一个简单的 3 活动应用程序，其中包含一个 MainActivity、一个 ListActivity 和一个 ArticleActivity。我没有使用任何非标准的启动模式，也没有设置任何 Intent 标志（`onBackPressed()`见下文除外）。主要活动创建并发布通知以显示特定文章。MainActivity 启动 ListActivity。ListActivity 的每个元素都为 ArticleActivity 启动一个 Intent，并在 EXTRAS 中传递一些信息，以便 ArticleActivity 知道要显示哪篇文章。

为了获得您描述的行为（即：从通知启动应用程序后从 ArticleActivity 返回到 ListActivity，即使应用程序没有运行），我已经完成了 Ankit 的建议（即：`onBackPressed()`在 ArticleActivity 中覆盖）像这样：

```
@Override
public void onBackPressed() {
    // Return to ListActivity
    Intent intent = new Intent(this, ListActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(intent);
    // Finish this activity (in case the ListActivity wasn't already in the stack)
    finish();
} 
```

我之所以使用它`FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP`是因为如果 ListActivity 已经存在于活动堆栈中，它**不会**重新创建它（即：它将返回到同一个实例）。

我必须添加`finish()`调用，因为如果应用程序没有在后台运行并且用户从通知启动它，则会创建 ListActivity 并将其放在ArticleActivity**之上**。然后当用户按下“返回”离开 ListActivity 时，ArticleActivity 就会暴露在下面。在此处添加`finish()`会使 ArticleActivity 消失，以便从 ListActivity 按“返回”返回到它来自的任何位置。

如果您希望我将代码发送给您，请告诉我。

# xcode - 如何忽略 Github gui for MAC 中未提交的更改？

> ID：11385189
> 
> 赞同：5
> 
> 时间：2012-07-08T17:35:45.100
> 
> 标签：xcode, github, github-for-mac

我正在为 Mac 使用 Github GUI。现在我的本地存储库中有一些更改，但我想忽略它们并提取最新的远程存储库。我尝试了 Repository/Pull，但得到了 Git 错误。

“•错误：您对以下文件的本地更改将被合并覆盖：Classes/xxx.m 请在合并之前提交您的更改或存储它们。”

我尝试了存储库/同步，但出现以下错误。

“同步失败。请在同步前提交所有更改。”

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-31T17:28:50.387

在每个更改的文件附近放置复选标记，然后转到存储库菜单并单击放弃对选定文件的更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-02T11:45:39.863

如果您的意思是仅使用 MAC GUI，请检查并右键单击更改的文件，然后选择放弃更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T17:46:10.107

如果您想删除未提交的更改，只需再次签出这些文件。

存储也非常简单，它可以将您的更改保存在本地“存储桶”或存储中:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T09:08:58.780

对于那些在**Github for Windows**上的人来说，Discard All Changes 的位置并不明显，所以我想分享一下：

1.  使用名称旁边的复选标记选择文件。
2.  右键单击带有两个箭头的全部折叠/全部展开按钮。（这个按钮在 Files to Commit 框的右侧，在 Sync 和 Gear 图标下。）这是 Discard All Changes >hidden< 的地方。

*抱歉，级别太低，无法向上面的@Leo wangs 或@aspiringwebdev 链添加评论。你必须从某个地方开始...*

# django - Apache 和 DJANGO_SETTINGS_MODULE 中的多个 Django 站点

> ID：11385193
> 
> 赞同：0
> 
> 时间：2012-07-08T17:36:36.043
> 
> 标签：django, apache

我目前正在尝试在一个 Apache 实例中托管 2 个独立的 Django Web 应用程序。它们可以工作，但是会随机引发 500 HTTP 错误。

Apache 的日志文件显示，有时应用程序 A 会尝试从应用程序 B 加载设置，这意味着环境变量 DJANGO_SETTINGS_MODULE 在两个应用程序之间变得混乱。

我尝试运行嵌入和守护程序模式的两个站点，但没有成功。有任何想法吗？

# ios - 在 iOS 设备上通过 ssh 打开应用程序

> ID：11385195
> 
> 赞同：6
> 
> 时间：2012-07-08T17:36:55.513
> 
> 标签：ios, jailbreak, launchd, kiosk

我已经看到了在 linux 和 Mac 设备上打开应用程序的方法，但似乎无法在 iOS 设备上获得相同的想法。

我已经越狱了我的设备并拥有 ssh 访问权限，并且想在无需访问设备的情况下打开应用程序？

这个想法但适用于 iOS 并打开一个 Kiosk 应用程序或 Safari。

[通过 SSH 打开 netbeans](https://stackoverflow.com/questions/4230300/opening-netbeans-via-ssh)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T21:15:23.780

您可以`open`使用 Cydia 商店中提供的实用程序来执行此操作。从 Cydia下载`open`，然后您可以使用它在命令行启动任何已安装的应用程序，使用它的包 ID（例如**com.mycompany.MyAppName**）。

[看到这个答案](https://stackoverflow.com/a/11383664/119114)

# c# - 您的想法：通过 DataHelper 类的实体框架数据上下文（集中式上下文和事务）

> ID：11385200
> 
> 赞同：2
> 
> 时间：2012-07-08T17:37:47.120
> 
> 标签：c#, asp.net-mvc, entity-framework

我想通过我创建的可在项目中重复使用的 DataHelper 类获得对集中式 DataContext 代码的意见。

**注意**- 这里有大量代码，对此感到抱歉，但我真的很想布局完整的方法并用于我的想法。我不是说这是正确的方法，但到目前为止它对我有用（仍在使用这种方法，还没有在生产中，但与我多年来构建的东西非常相似），我真的想变得有建设性社区对我所构建的东西的反馈，看看它是否疯狂、伟大、可以改进等等......

我对此提出了一些想法：

1.  数据上下文需要存储在一个公共的内存空间中，易于访问
2.  交易应采取相同的方法
3.  必须妥善处理
4.  允许更好地分离事务中保存和删除的业务逻辑。

以下是每个项目的代码：

1 - 首先存储在当前 HttpContext.Current.Items 集合中的数据上下文（因此它只存在于页面的生命周期中，并且只在第一次请求时被触发一次）或者如果 HttpContext 不存在则使用 ThreadSlot （在这种情况下，该代码最能自行清理它，就像使用它的控制台应用程序......）：

```
public static class DataHelper {
    /// <summary>
    /// Current Data Context object in the HTTPContext or Current Thread
    /// </summary>
    public static TemplateProjectContext Context {
        get {
            TemplateProjectContext context = null;

            if (HttpContext.Current == null) {
                LocalDataStoreSlot threadSlot = Thread.GetNamedDataSlot("DataHelper.CurrentContext");

                if (Thread.GetData(threadSlot) == null) {
                    context = new TemplateProjectContext();
                    Thread.SetData(threadSlot, context);
                } else {
                    context = (TemplateProjectContext)Thread.GetData(threadSlot);
                }
            } else {
                if (HttpContext.Current.Items["DataHelper.CurrentContext"] == null) {
                    context = new TemplateProjectContext();
                    HttpContext.Current.Items["DataHelper.CurrentContext"] = context;
                } else {
                    context = (TemplateProjectContext)HttpContext.Current.Items["DataHelper.CurrentContext"];
                }
            }

            return context;
        }
        set {
            if (HttpContext.Current == null) {
                if (value == null) {
                    Thread.FreeNamedDataSlot("DataHelper.CurrentContext");
                } else {
                    LocalDataStoreSlot threadSlot = Thread.GetNamedDataSlot("DataHelper.CurrentContext");
                    Thread.SetData(threadSlot, value);
                }
            } else {
                if (value == null)
                    HttpContext.Current.Items.Remove("DataHelper.CurrentContext");
                else
                    HttpContext.Current.Items["DataHelper.CurrentContext"] = value;
            }
        }
    }
... 
```

2 - 为了支持事务，我使用了类似的方法，并且还包括了 Begin、Commit 和 Rollback 的辅助方法：

```
 /// <summary>
    /// Current Transaction object in the HTTPContext or Current Thread
    /// </summary>
    public static DbTransaction Transaction {
        get {
            if (HttpContext.Current == null) {
                LocalDataStoreSlot threadSlot = Thread.GetNamedDataSlot("currentTransaction");

                if (Thread.GetData(threadSlot) == null) {
                    return null;
                } else {
                    return (DbTransaction)Thread.GetData(threadSlot);
                }
            } else {
                if (HttpContext.Current.Items["currentTransaction"] == null) {
                    return null;
                } else {
                    return (DbTransaction)HttpContext.Current.Items["currentTransaction"];
                }
            }
        }
        set {
            if (HttpContext.Current == null) {
                LocalDataStoreSlot threadSlot = Thread.GetNamedDataSlot("currentTransaction");
                Thread.SetData(threadSlot, value);
            } else {
                HttpContext.Current.Items["currentTransaction"] = value;
            }
        }
    }

    /// <summary>
    /// Begins a transaction based on the common connection and transaction
    /// </summary>
    public static void BeginTransaction() {
        DataHelper.Transaction = DataHelper.CreateSqlTransaction();
    }
    /// <summary>
    /// Creates a SqlTransaction object based on the current common connection
    /// </summary>
    /// <returns>A new SqlTransaction object for the current common connection</returns>
    public static DbTransaction CreateSqlTransaction() {
        return CreateSqlTransaction(DataHelper.Context.Connection);
    }
    /// <summary>
    /// Creates a SqlTransaction object for the requested connection object
    /// </summary>
    /// <param name="connection">Reference to the connection object the transaction should be created for</param>
    /// <returns>New transaction object for the requested connection</returns>
    public static DbTransaction CreateSqlTransaction(DbConnection connection) {
        if (connection.State != ConnectionState.Open) connection.Open();
        return connection.BeginTransaction();
    }
    /// <summary>
    /// Rolls back and cleans up the current common transaction
    /// </summary>
    public static void RollbackTransaction() {
        if (DataHelper.Transaction != null) {
            DataHelper.RollbackTransaction(DataHelper.Transaction);

            if (HttpContext.Current == null) {
                Thread.FreeNamedDataSlot("currentTransaction");
            } else {
                HttpContext.Current.Items.Remove("currentTransaction");
            }
        }
    }
    /// <summary>
    /// Rolls back and disposes of the requested transaction
    /// </summary>
    /// <param name="transaction">The transaction to rollback</param>
    public static void RollbackTransaction(DbTransaction transaction) {
        transaction.Rollback();
        transaction.Dispose();
    }

    /// <summary>
    /// Commits and cleans up the current common transaction
    /// </summary>
    public static void CommitTransaction() {
        if (DataHelper.Transaction != null) {
            DataHelper.CommitTransaction(DataHelper.Transaction);

            if (HttpContext.Current == null) {
                Thread.FreeNamedDataSlot("currentTransaction");
            } else {
                HttpContext.Current.Items.Remove("currentTransaction");
            }
        }
    }
    /// <summary>
    /// Commits and disposes of the requested transaction
    /// </summary>
    /// <param name="transaction">The transaction to commit</param>
    public static void CommitTransaction(DbTransaction transaction) {
        transaction.Commit();
        transaction.Dispose();
    } 
```

3 - 清洁和易于处理

```
 /// <summary>
    /// Cleans up the currently active connection
    /// </summary>
    public static void Dispose() {
        if (HttpContext.Current == null) {
            LocalDataStoreSlot threadSlot = Thread.GetNamedDataSlot("DataHelper.CurrentContext");
            if (Thread.GetData(threadSlot) != null) {
                DbTransaction transaction = DataHelper.Transaction;
                if (transaction != null) {
                    DataHelper.CommitTransaction(transaction);
                    Thread.FreeNamedDataSlot("currentTransaction");
                }

                ((TemplateProjectContext)Thread.GetData(threadSlot)).Dispose();
                Thread.FreeNamedDataSlot("DataHelper.CurrentContext");
            }
        } else {
            if (HttpContext.Current.Items["DataHelper.CurrentContext"] != null) {
                DbTransaction transaction = DataHelper.Transaction;
                if (transaction != null) {
                    DataHelper.CommitTransaction(transaction);
                    HttpContext.Current.Items.Remove("currentTransaction");
                }

                ((TemplateProjectContext)HttpContext.Current.Items["DataHelper.CurrentContext"]).Dispose();
                HttpContext.Current.Items.Remove("DataHelper.CurrentContext");
            }
        }
    } 
```

3b - 我在 MVC 中构建它，所以我有一个“基础”控制器类，我的所有控制器都继承自它——这样，上下文只在第一次被请求访问时才存在，直到页面被释放，这样它不要太“长时间运行”

```
using System.Web.Mvc;
using Core.ClassLibrary;
using TemplateProject.Business;
using TemplateProject.ClassLibrary;

namespace TemplateProject.Web.Mvc {
    public class SiteController : Controller {
        protected override void Dispose(bool disposing) {
            DataHelper.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

4 - 所以我很喜欢业务类、关注点分离、可重用代码，以及所有这些美妙的东西。我有一种我称之为“实体通用”的方法，它可以应用于我系统中的任何实体——例如，地址和电话

一个客户可以有一个或多个，以及一个商店、个人或任何东西——所以当你可以构建一个地址实体时，为什么要添加街道、城市、州等到每一个需要它的东西，这需要一个外国类型和键（我称之为 EntityType 和 EntityId）——然后你有一个可重用的业务对象，支持 UI 控制等——所以你构建它一次并在任何地方重用它。

这就是我在这里推动的集中式方法真正派上用场的地方，我认为使代码比必须将当前数据上下文/事务传递到每个方法中要干净得多。

例如，您有一个客户页面，该模型包括客户数据、联系人、地址和一些电话号码（主要、传真或手机等）

在获取页面的客户编辑模型时，这是我整理的一些代码（请参阅我如何在 LINQ 中使用 DataHelper.Context）：

```
 public static CustomerEditModel FetchEditModel(int customerId) {
        if (customerId == 0) {
            CustomerEditModel model = new CustomerEditModel();
            model.MainContact = new CustomerContactEditModel();

            model.MainAddress = new AddressEditModel();
            model.ShippingAddress = new AddressEditModel();

            model.Phone = new PhoneEditModel();
            model.Cell = new PhoneEditModel();
            model.Fax = new PhoneEditModel();

            return model;
        } else {
            var output = (from c in DataHelper.Context.Customers
                          where c.CustomerId == customerId
                          select new CustomerEditModel {
                              CustomerId = c.CustomerId,
                              CompanyName = c.CompanyName
                          }).SingleOrDefault();

            if (output != null) {
                output.MainContact = CustomerContact.FetchEditModelByPrimary(customerId) ?? new CustomerContactEditModel();

                output.MainAddress = Address.FetchEditModelByType(BusinessEntityTypes.Customer, customerId, AddressTypes.Main) ?? new AddressEditModel();
                output.ShippingAddress = Address.FetchEditModelByType(BusinessEntityTypes.Customer, customerId, AddressTypes.Shipping) ?? new AddressEditModel();

                output.Phone = Phone.FetchEditModelByType(BusinessEntityTypes.Customer, customerId, PhoneTypes.Main) ?? new PhoneEditModel();
                output.Cell = Phone.FetchEditModelByType(BusinessEntityTypes.Customer, customerId, PhoneTypes.Cell) ?? new PhoneEditModel();
                output.Fax = Phone.FetchEditModelByType(BusinessEntityTypes.Customer, customerId, PhoneTypes.Fax) ?? new PhoneEditModel();
            }

            return output;
        }
    } 
```

这是返回要使用的编辑模型的手机示例：

```
 public static PhoneEditModel FetchEditModelByType(byte entityType, int entityId, byte phoneType) {
        return (from p in DataHelper.Context.Phones
                where p.EntityType == entityType
                    && p.EntityId == entityId
                    && p.PhoneType == phoneType
                select new PhoneEditModel {
                    PhoneId = p.PhoneId,
                    PhoneNumber = p.PhoneNumber,
                    Extension = p.Extension
                }).FirstOrDefault();
    } 
```

现在页面已经回发，这一切都需要保存，所以我控件中的 Save 方法只是让业务对象处理这一切：

```
 [Authorize(Roles = SiteRoles.SiteAdministrator + ", " + SiteRoles.Customers_Edit)]
    [HttpPost]
    public ActionResult Create(CustomerEditModel customer) {
        return CreateOrEdit(customer);
    }
    [Authorize(Roles = SiteRoles.SiteAdministrator + ", " + SiteRoles.Customers_Edit)]
    [HttpPost]
    public ActionResult Edit(CustomerEditModel customer) {
        return CreateOrEdit(customer);
    }
    private ActionResult CreateOrEdit(CustomerEditModel customer) {
        if (ModelState.IsValid) {
            SaveResult result = Customer.SaveEditModel(customer);
            if (result.Success) {
                return RedirectToAction("Index");
            } else {
                foreach (KeyValuePair<string, string> error in result.ErrorMessages) ModelState.AddModelError(error.Key, error.Value);
            }
        }

        return View(customer);
    } 
```

在 Customer 业务对象内部——它集中处理事务，让 Contact、Address 和 Phone 业务类做他们的事情，而不用担心事务：

```
 public static SaveResult SaveEditModel(CustomerEditModel model) {
        SaveResult output = new SaveResult();

        DataHelper.BeginTransaction();
        try {
            Customer customer = null;
            if (model.CustomerId == 0) customer = new Customer();
            else customer = DataHelper.Context.Customers.Single(c => c.CustomerId == model.CustomerId);

            if (customer == null) {
                output.Success = false;
                output.ErrorMessages.Add("CustomerNotFound", "Unable to find the requested Customer record to update");
            } else {
                customer.CompanyName = model.CompanyName;

                if (model.CustomerId == 0) {
                    customer.SiteGroup = CoreSession.CoreSettings.CurrentSiteGroup;
                    customer.CreatedDate = DateTime.Now;
                    customer.CreatedBy = SiteLogin.Session.ActiveUser;
                    DataHelper.Context.Customers.AddObject(customer);
                } else {
                    customer.ModifiedDate = DateTime.Now;
                    customer.ModifiedBy = SiteLogin.Session.ActiveUser;
                }
                DataHelper.Context.SaveChanges();

                SaveResult result = Address.SaveEditModel(model.MainAddress, BusinessEntityTypes.Customer, customer.CustomerId, AddressTypes.Main, false);
                if (!result.Success) {
                    output.Success = false;
                    output.ErrorMessages.Concat(result.ErrorMessages);
                }

                result = Address.SaveEditModel(model.ShippingAddress, BusinessEntityTypes.Customer, customer.CustomerId, AddressTypes.Shipping, false);
                if (!result.Success) {
                    output.Success = false;
                    output.ErrorMessages.Concat(result.ErrorMessages);
                }

                result = Phone.SaveEditModel(model.Phone, BusinessEntityTypes.Customer, customer.CustomerId, PhoneTypes.Main, false);
                if (!result.Success) {
                    output.Success = false;
                    output.ErrorMessages.Concat(result.ErrorMessages);
                }

                result = Phone.SaveEditModel(model.Fax, BusinessEntityTypes.Customer, customer.CustomerId, PhoneTypes.Fax, false);
                if (!result.Success) {
                    output.Success = false;
                    output.ErrorMessages.Concat(result.ErrorMessages);
                }

                result = Phone.SaveEditModel(model.Cell, BusinessEntityTypes.Customer, customer.CustomerId, PhoneTypes.Cell, false);
                if (!result.Success) {
                    output.Success = false;
                    output.ErrorMessages.Concat(result.ErrorMessages);
                }

                result = CustomerContact.SaveEditModel(model.MainContact, customer.CustomerId, false);
                if (!result.Success) {
                    output.Success = false;
                    output.ErrorMessages.Concat(result.ErrorMessages);
                }

                if (output.Success) {
                    DataHelper.Context.SaveChanges();
                    DataHelper.CommitTransaction();
                } else {
                    DataHelper.RollbackTransaction();
                }
            }
        } catch (Exception exp) {
            DataHelper.RollbackTransaction();

            ErrorHandler.Handle(exp, true);

            output.Success = false;
            output.ErrorMessages.Add(exp.GetType().ToString(), exp.Message);
            output.Exceptions.Add(exp);
        }

        return output;
    } 
```

请注意每个地址、电话等是如何由其自己的业务类处理的，这是电话的保存方法 - 请注意，除非您告诉它，否则它实际上不会在此处进行保存（保存在客户的方法中处理，因此保存是只为上下文调用一次）

```
 public static SaveResult SaveEditModel(PhoneEditModel model, byte entityType, int entityId, byte phoneType, bool saveChanges) {
        SaveResult output = new SaveResult();

        try {
            if (model != null) {
                Phone phone = null;
                if (model.PhoneId != 0) {
                    phone = DataHelper.Context.Phones.Single(x => x.PhoneId == model.PhoneId);
                    if (phone == null) {
                        output.Success = false;
                        output.ErrorMessages.Add("PhoneNotFound", "Unable to find the requested Phone record to update");
                    }
                }

                if (string.IsNullOrEmpty(model.PhoneNumber)) {
                    if (model.PhoneId != 0 && phone != null) {
                        DataHelper.Context.Phones.DeleteObject(phone);
                        if (saveChanges) DataHelper.Context.SaveChanges();
                    }
                } else {
                    if (model.PhoneId == 0) phone = new Phone();
                    if (phone != null) {
                        phone.EntityType = entityType;
                        phone.EntityId = entityId;
                        phone.PhoneType = phoneType;

                        phone.PhoneNumber = model.PhoneNumber;
                        phone.Extension = model.Extension;

                        if (model.PhoneId == 0) {
                            phone.CreatedDate = DateTime.Now;
                            phone.CreatedBy = SiteLogin.Session.ActiveUser;
                            DataHelper.Context.Phones.AddObject(phone);
                        } else {
                            phone.ModifiedDate = DateTime.Now;
                            phone.ModifiedBy = SiteLogin.Session.ActiveUser;
                        }

                        if (saveChanges) DataHelper.Context.SaveChanges();
                    }
                }
            }
        } catch (Exception exp) {
            ErrorHandler.Handle(exp, true);

            output.Success = false;
            output.ErrorMessages.Add(exp.GetType().ToString(), exp.Message);
            output.Exceptions.Add(exp);
        }

        return output;
    } 
```

仅供参考 - SaveResult 只是一个小容器类，如果保存失败，我用来获取详细信息：

```
public class SaveResult {
    private bool _success = true;
    public bool Success {
        get { return _success; }
        set { _success = value; }
    }

    private Dictionary<string, string> _errorMessages = new Dictionary<string, string>();
    public Dictionary<string, string> ErrorMessages {
        get { return _errorMessages; }
        set { _errorMessages = value; }
    }

    private List<Exception> _exceptions = new List<Exception>();
    public List<Exception> Exceptions {
        get { return _exceptions; }
        set { _exceptions = value; }
    }
} 
```

另一部分是电话、地址等的可重用 UI 代码 - 它也仅在一个位置处理所有验证等。

因此，让您的想法畅通无阻，感谢您抽出宝贵时间阅读/审阅这篇巨大的帖子！

# c# - ProxyEnable 注册表项不会更改...？

> ID：11385203
> 
> 赞同：0
> 
> 时间：2012-07-08T17:37:52.367
> 
> 标签：c#, windows, proxy, registry

我尝试使用 c# 程序更改代理服务器地址。

```
 [DllImport("wininet.dll")]
    public static extern bool InternetSetOption(IntPtr hInternet, int dwOption, IntPtr lpBuffer, int dwBufferLength);
    public const int INTERNET_OPTION_SETTINGS_CHANGED = 39;
    public const int INTERNET_OPTION_REFRESH = 37;
    bool settingsReturn, refreshReturn;

    void SetProxy()
    {
        RegistryKey RegKey = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings", true);
        RegKey.SetValue("ProxyServer", "192.168.1.1:8082");
        RegKey.SetValue("ProxyEnable", 1);

        settingsReturn = InternetSetOption(IntPtr.Zero, INTERNET_OPTION_SETTINGS_CHANGED, IntPtr.Zero, 0);
        refreshReturn = InternetSetOption(IntPtr.Zero, INTERNET_OPTION_REFRESH, IntPtr.Zero, 0);
    } 
```

首先是我`ProxyServer`在注册表中找不到密钥，当我创建它时，它仍然不能解决问题。当我尝试在我的电脑中手动输入时，我发现 Internet Explorer 仍然没有使用代理服务器。***它在whatismyip.com***中显示了我自己的 ip

 *即使我尝试重新安装操作系统，我也不明白为什么会发生这种情况。问题仍然存在那么有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T21:18:54.373

这样做，您的欢迎。也无需关闭 IE，因为它会刷新会话：

```
public const int INTERNET_OPTION_REFRESH = 37;
    private const int INTERNET_OPTION_END_BROWSER_SESSION = 42;
    public const int INTERNET_OPTION_SETTINGS_CHANGED = 39;

    [DllImport("wininet.dll", SetLastError = true)]
    private static extern bool InternetSetOption(IntPtr hInternet, int dwOption, IntPtr lpBuffer, int lpdwBufferLength);

    public void RefreshBrowserSettings()
    {
        InternetSetOption(IntPtr.Zero, INTERNET_OPTION_SETTINGS_CHANGED, IntPtr.Zero, 0);
        InternetSetOption(IntPtr.Zero, INTERNET_OPTION_REFRESH, IntPtr.Zero, 0);
    }

public void SetProxy(String Proxy, String Port, bool enabled = true)
    {
        string proxy = Proxy + ":" + Port;
        string key = "Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings";
        RegistryKey RegKey = Registry.CurrentUser.OpenSubKey(key, true);

        if (Proxy != "")
        {
            RegKey.SetValue("ProxyServer", proxy);
        }

        if (enabled && Proxy != "")
        {
            RegKey.SetValue("ProxyEnable", 1);
        }
        else
        {
            RegKey.SetValue("ProxyEnable", 0);
        }

        RefreshBrowserSettings();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:12:32.613

您使用的是什么操作系统？32 位还是 64 位？

也许您有一个 64 位的 Windows，但是您正在运行一个 32 位的程序来更改注册表？在这种情况下，您可能会因为 Windows 具有[部分独立的 32 位和 64 位注册表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072%28v=vs.85%29.aspx)而遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:53:01.953

来自msdn...

```
`Regedit4
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings]
"MigrateProxy"=dword:00000001
"ProxyEnable"=dword:00000001
"ProxyHttp1.1"=dword:00000000
"ProxyServer"="http://ProxyServername:80"
"ProxyOverride"=""` 
```

`但是您正在设置代理服务器值，例如；RegKey.SetValue("代理服务器", "192.168.1.1:8082");`

 `没有“http://”...你试过了吗？

另外，确保 Internet Explorer exe 已经关闭（检查任务栏运行应用列表）

最后一件事；您是否从其他浏览器设置了代理选项？它工作正常吗？`*

# css - 绝对定位的子 div 的 100% 高度

> ID：11385205
> 
> 赞同：1
> 
> 时间：2012-07-08T17:37:58.743
> 
> 标签：css, navigation, height, css-position

我正在制作一个导航，孩子们将显示在不同的框中，就像[http://www.boffi.com/EN/Collections/bathrooms/b14.aspx](http://www.boffi.com/EN/Collections/bathrooms/b14.aspx)一样。我设法使用绝对定位将子元素分开，但无法让子元素背景具有 100% 的高度。这是一个列表元素，所以如果我放 height: 100% ，底部的两个主要导航元素就会消失。请帮忙！这是我的html：

```
<ul id="mainmenu">
     <li id="liHome" class="active">
         <a href="#item-x1y1" class="panel" rel="none" id="Home">Home</a>
     </li>
     <li id="liServices" class=" ">
         <a href="#item-x1y2" class="panel" rel="SubMenuY2" id="Services">Services</a>
         <div class="child">
         <ul style="" id="SubMenuY2" class="submenu">
             <li><a href="#">Sub-item 1</a></li>
             <li><a href="#">Sub-item 2</a></li>
         </ul>
         </div>
     </li>
     <li id="liEnvironment">
         <a href="#item-x1y3" class="panel" rel="none" id="Environment">Environment</a>
     </li>
     <li id="liCareer">
         <a href="#item-x1y4" class="panel" rel="none" id="Career">Career</a>
     </li>
     <li id="liContact">
         <a href="#item-x1y5" class="panel" rel="none" id="Contact">Contact</a>
     </li>
 </ul> 
```

和CSS

```
body, html{
height:100%;
}
#mainmenu{
background:black;
color: white;
width:130px;
position:relative;
top:0;
height:100%
}
#mainmenu li a {
color:white;
}

ul.submenu{
position:absolute;
background:blue;
width:130px;
}

div.child{
position:relative;
margin-left:130px;
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:01:27.557

我稍微简化了您的代码..实际上我只是删除了`div`with `class="child"`，因为您并不真正需要它。

然后，我所做的就是：

```
ul.submenu{
  position:absolute;
  left: 130px; top: 0;
  background:blue;
  width:130px;
  height: 100%;
} 
```

看看小提琴：http: [//jsfiddle.net/joplomacedo/rqqju/](http://jsfiddle.net/joplomacedo/rqqju/)

这是你要找的吗？

# java - 如何在 POJO 中表示要在 Grails 视图中呈现为选择的集合

> ID：11385206
> 
> 赞同：1
> 
> 时间：2012-07-08T17:38:04.483
> 
> 标签：java, hibernate, grails

我有一个 grails 应用程序，将持久性注释 POJO 用于域模型。Grails 按预期从它们生成控制器和视图，但是一个类对我来说是一个难题。

我需要表示一个字符串集合（目前是字符串的 ArrayList），它是 grails-view '友好'的，并将呈现为下拉列表。

ArrayList 中的数据“相当”恒定，所以我认为 enum 可以用于它，但我不确定。

有问题的班级：

```
/**
 *  available categories:
 *      Airplane
 *      Rotorcraft
 *      Glider
 *      Lighter than air
 *      Powered lift
 *      Powered parachute
 *      Weight-shift-control
 */
@Entity
public class AircraftCategory {

    public AircraftCategory(){

    this.aircraftCategories.add("Airplane");
    this.aircraftCategories.add("Rotorcraft");
    this.aircraftCategories.add("Glider");
    this.aircraftCategories.add("Lighter Than Air");
    this.aircraftCategories.add("Powered Lift");
    this.aircraftCategories.add("Powered Parachute");
    this.aircraftCategories.add("Weight Shift Control");   
    }

    long id;
    private long version;   
    private ArrayList <String> aircraftCategories = new ArrayList<String>();

    public ArrayList <String> getAircraftCategories() {
        return aircraftCategories;
    }

    public void setAircraftCategories(ArrayList <String> aircraftCategories) {
        this.aircraftCategories = aircraftCategories;

    }

    @Id
    @GeneratedValue
    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }    

    public long getVersion() {
        return version;
    }

    public void setVersion(long version) {
        this.version = version;
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:54:01.843

最简单的做法是将其作为“适当的”域对象推送到数据库中。拥有一个本质上只是一个名称字段的对象有点愚蠢，但它会在脚手架视图中按照您的需要呈现（假设您与实际对象有关联）。

另一个优点是您稍后在应用程序中有一个简单的扩展点，以防您需要向 中添加更多数据`AircraftCategory`，例如缩写。

对于另一种可能的解决方案，[这个问题](https://stackoverflow.com/q/11380704/20770)非常相似。

# android - 测试 Android 应用内订阅：您已经拥有此订阅

> ID：11385207
> 
> 赞同：5
> 
> 时间：2012-07-08T17:38:10.460
> 
> 标签：android, in-app-billing, google-checkout, subscription

我正在用测试账户测试Android inapp订阅，输入真实信用卡购买后，订阅是可以的，但是我在json响应中找不到令牌。

所以在开发者控制台中，我取消了订单，当我再次尝试重新订阅时，它现在向我显示“您已经拥有此订阅”的警报。

当我单击框中的“详细信息”时，它打开了 Play Store 应用程序，但显示“找不到项目”

以前有人遇到过这个错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:46:50.517

我想你可能已经解决了这个问题，但看看这个问题[Subscription sample missing JSON parsing of purchaseToken](https://stackoverflow.com/q/12002788/1075066)这可能是 JSON 的情况。

我认为您无法重新订阅的原因是因为您已经订阅了该期间。您的订阅将在计费周期结束时结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:26:58.920

霍华德，原因是即使在您取消订阅后订阅仍然有效。它将继续说，直到原始订阅到期。我知道，订阅的 Android 实现真的很诡异。我已经在 Android 上成功实现了应用内订阅，并且遇到了很多类似的问题，其中之一是如果商品从原始购买日期起还没有过期，那么您在取消后无法重新购买。

# jquery - Jquery fancybox 插件在代码中使用数组？

> ID：11385211
> 
> 赞同：0
> 
> 时间：2012-07-08T17:38:52.813
> 
> 标签：jquery, jquery-plugins, for-loop, fancybox

我有一个用于花式框的 Jquery 插件，我知道当我使用以下代码时它可以工作：

```
$("a#roomthumb_2237").fancybox({ 
        'href'   : '#2237_Info',
        'titleShow'  : false, 
        'transitionIn'  : 'elastic', 
        'transitionOut' : 'elastic' 
}); 
```

但是为了避免我不得不多次重复这段代码（使用不同的 href 值），我想在 for 循环中运行它。

我试过的代码是：

```
for (var i = 0; i < rooms_array.length; i++) {
    var d = "#roomthumb_"+rooms_array[i]
    $(d).fancybox({ 
        'href'   : rooms_array[i]+'_Info', 
        'titleShow'  : false, 
        'transitionIn'  : 'elastic', 
        'transitionOut' : 'elastic' 
    });
}; 
```

我直接从谷歌获取的原始代码（很可能来自stackoverflow，我不记得了），但是一旦我尝试将其放入循环中，我就迷路了，因为我不知道如何编写它。我认为 href 行是错误的，但我找不到任何解释如何做我需要它的东西。

例如，我不知道如何将 $("a#roomthumb_2237") 写为 $("a"+d) ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:10:47.770

`<a>`html标签的正常用途是具有`href`属性，例如，如果您有：

```
<a class="fancybox" href="#2237_Info">2237</a>
<a class="fancybox" href="#2238_Info">2238</a>
<a class="fancybox" href="#2239_Info">2239</a> 
```

那么你只需要一个fancybox脚本（一个且唯一）

```
$("a.fancybox").fancybox({ 
        'titleShow'  : false, 
        'transitionIn'  : 'elastic', 
        'transitionOut' : 'elastic' 
}); 
```

请注意，我们之所以使用它`class="fancybox"`是因为如前所述，您不应该在同一个文档中`ID`多次使用相同的文档（`IDs`是唯一的）

另请注意，您不需要`href`在您的 fancybox 脚本中设置选项，因为这是从`<a>`标签本身获取的（该`href`选项在选择器中不作为属性存在时使用 - 或者 - 当您想要“*强制*"`href`与选择器不同。）

另一方面，如果您不想手动编写所有`<a>`元素但从数组中生成它们，请检查[https://stackoverflow.com/a/10093265/1055987](https://stackoverflow.com/a/10093265/1055987)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:49:11.777

为什么不在 href 上设置一个类并使用类选择器来调用 FancyBox？

HTML

```
<a href="whatever.jpg" class="fancyboxMe" id="roomthumb_2237">Anchor</a>
<a href="whatever2.jpg" class="fancyboxMe" id="roomthumb_2233">Anchor</a> 
```

JavaScript

```
$("a.fancyboxMe").fancybox({ 
        'href'   : '#2237_Info',
        'titleShow'  : false, 
        'transitionIn'  : 'elastic', 
        'transitionOut' : 'elastic' 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T19:54:12.373

我解决了我自己的问题。我的循环很好，唯一错误的文本行，这就是我的想法，是：

```
 'href'   : rooms_array[i]+'_Info', 
```

我需要：

```
 'href'   : '#'+rooms_array[i]+'_Info', 
```

现在我注意到了，这真的很明显......我没有添加选择器。

*编辑：* 这是我的完整代码，现在可以使用。注意 - 我为我的数组选择了随机数，只是为了展示这个想法：

```
var rooms_array = [2235, 2236, 2237, 2238]; 
var reposition = function (){ 
    $('#hidden_stuff').attr('display', "none"); 

    $.each(rooms_array, function(key,value){ 
        var a = '#roomthumb_'+value;  
        var b = '#chosenrate_'+value; 

        if ($(b).length) { 
            var c = $(b).offset();  

            $(a).css({ 
                visibility:"visible", 
                top: c.top -9 + "px", 
                left: c.left + 560 + "px" 
            })
        }
        else{ 
        } 

        $(a).fancybox({ 
            'href'   : '#'+value+'_Info', 
            'titleShow'  : false, 
            'transitionIn'  : 'elastic', 
            'transitionOut' : 'elastic' 
        });
    }); 
}; 
```

# java - 如何让 Gson 使用访问器而不是字段？

> ID：11385214
> 
> 赞同：12
> 
> 时间：2012-07-08T17:39:23.640
> 
> 标签：java, json, gson

默认情况下，Gson 使用字段作为其序列化的基础。有没有办法让它使用访问器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T17:39:24.733

Gson 的开发人员[表示](https://groups.google.com/forum/#!topic/google-gson/4G6Lv9PghUY)，他们从未对添加此功能的请求感到动摇，他们担心会混淆 api 以添加对此的支持。

添加此功能的一种方法是使用 TypeAdapter（我为粗糙的代码道歉，但这说明了原理）：

```
import java.io.IOException;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

import com.google.common.base.CaseFormat;
import com.google.gson.Gson;
import com.google.gson.TypeAdapter;
import com.google.gson.reflect.TypeToken;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonWriter;

public class AccessorBasedTypeAdaptor<T> extends TypeAdapter<T> {

  private Gson gson;

  public AccessorBasedTypeAdaptor(Gson gson) {
    this.gson = gson;
  }

  @SuppressWarnings("unchecked")
  @Override
  public void write(JsonWriter out, T value) throws IOException {
    out.beginObject();
    for (Method method : value.getClass().getMethods()) {
      boolean nonBooleanAccessor = method.getName().startsWith("get");
      boolean booleanAccessor = method.getName().startsWith("is");
      if ((nonBooleanAccessor || booleanAccessor) && !method.getName().equals("getClass") && method.getParameterTypes().length == 0) {
        try {
          String name = method.getName().substring(nonBooleanAccessor ? 3 : 2);
          name = CaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_CAMEL, name);
          Object returnValue = method.invoke(value);
          if(returnValue != null) {
            TypeToken<?> token = TypeToken.get(returnValue.getClass());
            TypeAdapter adapter = gson.getAdapter(token);
            out.name(name);
            adapter.write(out, returnValue);
          }
        } catch (Exception e) {
          throw new ConfigurationException("problem writing json: ", e);
        }
      }
    }
    out.endObject();
  }

  @Override
  public T read(JsonReader in) throws IOException {
    throw new UnsupportedOperationException("Only supports writes.");
  }
} 
```

您可以将其注册为给定类型的普通类型适配器或通过 TypeAdapterfactory - 可能检查是否存在运行时注释：

```
public class TypeFactory implements TypeAdapterFactory {

  @SuppressWarnings("unchecked")
  public <T> TypeAdapter<T> create(final Gson gson, final TypeToken<T> type) {
    Class<? super T> t = type.getRawType();
    if(t.isAnnotationPresent(UseAccessor.class)) {
     return (TypeAdapter<T>) new AccessorBasedTypeAdaptor(gson);
    }
    return null;
  } 
```

这可以在创建 gson 实例时正常指定：

```
new GsonBuilder().registerTypeAdapterFactory(new TypeFactory()).create(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T19:32:57.097

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果你不能让 Gson 做你想做的事，下面是你如何使用 MOXy 的原生 JSON 绑定来完成这个。MOXy 像任何 JAXB 实现一样默认使用属性（公共）访问。您可以使用 配置字段访问`@XmlAccessorType(XmlAccessType.FIELD)`。下面是一个例子：

**顾客**

```
package forum11385214;

public class Customer {

    private String foo;
    private Address bar;

    public String getName() {
        return foo;
    }

    public void setName(String name) {
        this.foo = name;
    }

    public Address getAddress() {
        return bar;
    }

    public void setAddress(Address address) {
        this.bar = address;
    }

} 
```

**地址**

```
package forum11385214;

public class Address {

    private String foo;

    public String getStreet() {
        return foo;
    }

    public void setStreet(String street) {
        this.foo = street;
    }

} 
```

**jaxb.properties**

要将 MOXy 配置为您的 JAXB 提供程序，您需要`jaxb.properties`使用以下条目添加在与域模型相同的包中调用的文件（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11385214;

import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Customer.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum11385214/input.json");
        Customer customer = (Customer) unmarshaller.unmarshal(json, Customer.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

} 
```

**输入.json/输出**

```
{
    "name" : "Jane Doe",
    "address" : {
        "street" : "1 Any Street"
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)
*   [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)

# jquery - Jquery向下和向上滑动元素与相同的链接不起作用

> ID：11385216
> 
> 赞同：0
> 
> 时间：2012-07-08T17:39:49.813
> 
> 标签：jquery

我有以下代码，它向下滑动，但没有向上滑动。请你能帮我找出错误，如果可能有更好的方法来做到这一点，我试过slideToggle，但这不能检查元素的状态，因为你可以在哪里使用隐藏和显示检查`$('#my_div').is(':hidden')`。

这是我的代码：

```
$("a.advanced_search_toggle").click(function() { 
    if ($("#advanced_search_box").hasClass('closed')) {
        $("#advanced_search_box").slideDown(function(){
            $("a.advanced_search_toggle").text('Simple Search');
            $("a.advanced_search_toggle").removeClass('down_arrow');
            $("a.advanced_search_toggle").addClass('up_arrow')
            $("a.advanced_search_toggle").removeClass('closed');
            $("a.advanced_search_toggle").addClass('open'); 
        });
    } else {
        $("#advanced_search_box").slideUp(function(){
            $("a.advanced_search_toggle").text('Advanced Search');
            $("a.advanced_search_toggle").removeClass('up_arrow');
            $("a.advanced_search_toggle").addClass('down_arrow');
            $("a.advanced_search_toggle").removeClass('open');
            $("a.advanced_search_toggle").addClass('closed');                       
        });         
    }
    return false;
}); 
```

请注意，默认情况下，我添加了一个封闭类`#advanced_search_box`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:47:20.267

您需要将 .removeClass 调用更改为“#advanced_search_box”而不是“a.advanced_search_toggle”。它不会删除您正在检查的元素上的类名，因此不会向上滑动，只会向下滑动。

```
$("a.advanced_search_toggle").click(function() { 
    if ($("#advanced_search_box").hasClass('closed')) {
        $("#advanced_search_box").slideDown(function(){
            $("a.advanced_search_toggle").text('Simple Search');
            $("a.advanced_search_toggle").removeClass('down_arrow');
            $("a.advanced_search_toggle").addClass('up_arrow')
            $(this).removeClass('closed');
            $(this).addClass('open'); 
        });
    } else {
        $("#advanced_search_box").slideUp(function(){
            $("a.advanced_search_toggle").text('Advanced Search');
            $("a.advanced_search_toggle").removeClass('up_arrow');
            $("a.advanced_search_toggle").addClass('down_arrow');
            $(this).removeClass('open');
            $(this).addClass('closed');                       
        });         
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:56:43.500

您正在尝试修改链接而不是元素的属性。此外，通过将对象分配给变量来[缓存对象，这有助于更简单的引用和优化。](http://www.javascriptkit.com/javatutors/efficientjs.shtml)尝试以下操作：

```
$("a.advanced_search_toggle").click(function() {
    var link = $(this);
    var box = $("#advanced_search_box");
    if (box.hasClass('closed')) {
        box.slideDown(function(){
            link.text('Simple Search').removeClass('down_arrow').addClass('up_arrow');
            box.removeClass('closed').addClass('open');
        });
    } else {
        box.slideUp(function(){
            link.text('Advanced Search').removeClass('up_arrow').addClass('down_arrow');
            box.removeClass('open').addClass('closed');                    
        });         
    }
    return false;
}); 
```

演示：http: [//jsfiddle.net/m9XMn/](http://jsfiddle.net/m9XMn/)

# css - 如果它们太宽以适合容器，则缩小包含的元素

> ID：11385218
> 
> 赞同：1
> 
> 时间：2012-07-08T17:40:02.627
> 
> 标签：css

假设有一个固定宽度的 div 容器，200px 宽。包含的元素是固定宽度的内联块 div，45 像素宽。然后假设我向容器中添加了一个元素。我想要实现的是所有包含的元素都缩小到最大可能的宽度并适合容器而不会溢出（40px，假设元素之间没有空格）。

纯CSS可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:49:57.190

纯 CSS3 使用[flexbox 模块](http://www.w3.org/TR/css3-flexbox/)是可能的。不幸的是，为它找到足够的[浏览器支持](http://caniuse.com/#search=flexbox)是另一回事。

**[看看它的实际效果](http://jsfiddle.net/W6x2A/)**（如果你在 FF/Chrome/Safari 上）。

# java - 泛型：基于泛型类的泛型类

> ID：11385220
> 
> 赞同：0
> 
> 时间：2012-07-08T17:40:17.383
> 
> 标签：java, generics

我正在尝试创建一个基于类的通用服务，该类具有基于泛型的集合

```
public class GenericClass<T> {
   List<T> results;
   public List<T> getResults() {
    return results;
   }
} 
```

我只是不确定如何创建基于此 GenericClass 并具有 T 的具体实现的服务。我希望类似

```
public class ServiceManagerImpl<GenericClass<T>> implements ServiceManager<GenericClass<T>> {
    public GenericClass<T> getMyClass() {
    ...
    }
} 
```

但是编译器不喜欢这样。任何想法如何做到这一点？

马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:11:23.973

You are close... just pass the `T` through:

```
public class ServiceManagerImpl<T> implements ServiceManager<GenericClass<T>> {
    public GenericClass<T> getMyClass() {
    ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:29:55.053

之间的内容`<>`称为[**类型参数**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.2)，并且`GenericClass<T>`在声明中不是有效的类型参数。

引用[java 通用指南](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

> 泛型类使用以下格式定义：
> 
> ```
> class name<T1, T2, ..., Tn> { /* ... */ } 
> ```
> 
> 由尖括号 (<>) 分隔的类型参数部分跟在类名之后。它指定类型参数（也称为类型变量）T1、T2、...和Tn。

所以，你需要`GenericClass<T>`在实现中使用，而不是在声明中使用。

```
// declaration
public class ServiceManagerImpl<YourGenericType> implements ServiceManager<YourGenericType> {
    public YourGenericType getMyClass() {
    ...
    }
}

// implementation
ServiceManager<GenericClass<Object>> sm = new ServiceManagerImpl<GenericClass<Object>>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:19:13.537

你应该试试这样；

```
 public class ServiceManagerImpl<GenericClass<Object>> implements ServiceManager<GenericClass<Object>> {
          public GenericClass<Object> getMyClass() {
       ...
     } 
```

}

您可以根据需要将 Object 替换为 Integer 或 String 或任何数据类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T04:37:02.973

```
public class ServiceManagerImpl<T extends GenericClass<T>> implements ServiceManager<T extends  GenericClass<T>> {
      public GenericClass<T> getMyClass() {
          ...
      }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T04:41:09.850

我可以建议以下不违反 JLS 规则的实现：

```
// ServiceManager.java
public interface ServiceManager<E, T extends GenericClass<E>> {
}

// ServiceManagerImpl.java
public class ServiceManagerImpl<E, T extends GenericClass<E>> implements ServiceManager<E, T> {
    public T getMyClass() {
        return null;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T10:12:17.143

我不确定我的回答是否合法，但似乎符合您的要求：

```
public class ServiceManagerImpl<T extends GenericClass> implements ServiceManager<T>
{
        @Override
        public T getMyclass() {
            //do your work here;
        }
} 
```

虽然在我声明这个类时它可能会有`unchecked`警告，但这确实是！

```
ServiceManager<GenericClass<Integer>> manager = new ServiceManagerImpl<GenericClass<Integer>>();//passed 
```

# c# - Server.mappath 混淆

> ID：11385221
> 
> 赞同：2
> 
> 时间：2012-07-08T17:40:20.700
> 
> 标签：c#, asp.net

我对 server.mappath 有一点困惑，这是正确的，这两者之间有什么区别

```
FileUpload1.saveAs(Server.MapPath("~/User/images/")+"ankush.jpg"));

FileUpload1.saveAs(Server.MapPath("~/User/images")+"ankush.jpg")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:44:59.003

使用 MapPath() 的正确方法是：

```
FileUpload1.saveAs(Server.MapPath("~/User/images/ankush.jpg")); 
```

或者如果你坚持：

```
FileUpload1.saveAs(Path.Combine(Server.MapPath("~/User/images"),"ankush.jpg"))); 
```

MapPath() 不会将尾部反斜杠附加到映射路径，因为它无法知道路径是目录还是文件（它不检查给定路径是否实际存在）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:07:19.447

我建议你使用这种方式

```
FileUpload1.saveAs(Server.MapPath("~/User/images/ankush.jpg")); 
```

原因：因为如果您已经知道路径，那么为什么要单独分解文件名如果文件名是通过参数传递的，那么您可以这样做

```
FileUpload1.saveAs(Server.MapPath(String.Format("~/User/images/{0}", fileName))); 
```

# php - 使用 PHP Curl 在 Wordpress 网站上发布数据

> ID：11385222
> 
> 赞同：1
> 
> 时间：2012-07-08T17:40:26.910
> 
> 标签：php, wordpress, post, curl

大家好，我有一个小问题，我无法弄清楚，我正在做一个项目，我们已经做了与应用程序相关的学校管理，我们基本上可以添加学生、分支、班级进行测试、显示测试结果、费用管理等等

我们还在 wordpress 上创建了他们的网站，我的问题是我的应用程序中有一个页面显示结果我想使用 curl 在他们的 wordpress 网站上显示此页面结果。基本上，当用户输入他的学生 ID 和测试 ID 并点击搜索按钮然后显示驻留在我的应用程序上的结果文件时，我想要什么。应用程序和网站都在不同的服务器上。你们能教我如何做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:47:47.020

使用 curl 发布数据：

```
<?php
if(count($_POST) > 0){
    print_r($_POST);
    exit();
}

$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt($c, CURLOPT_HEADER, false);
curl_setopt($c, CURLOPT_POST,true);
curl_setopt($c, CURLOPT_POSTFIELDS,array('param0'=>'value0','param1'=>'value1'));
$output = curl_exec($c);
if($output === false){
    trigger_error('Error curl : '.curl_error($c),E_USER_WARNING);
}
else{
    var_dump($output);
}
curl_close($c);
?> 
```

# objective-c - 在 UITextField/UISearchBar 中显示上次使用的文本

> ID：11385225
> 
> 赞同：0
> 
> 时间：2012-07-08T17:40:53.297
> 
> 标签：objective-c, ios, uitextfield, uisearchbar

我正在尝试实现一个搜索栏，并且我需要能够显示用户开始输入时输入的最后 10 次搜索。
我的背景是非标准的（基本上是大背景纹理），我找不到一种方法让搜索栏适合图像而不显得太时髦。

所以。

有没有办法使用 UISearchBar/UITextField 来显示上次使用的搜索？或者更确切地说，是否可以将 UISearchBar 的背景去掉（即让它完全消失，只留下搜索栏的圆角矩形）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T05:53:58.957

对于第一个问题：

*有没有办法使用 UISearchBar/UITextField 来显示上次使用的搜索？*

我不明白你想在这里做什么..

对于你的第二个问题..

```
UISearchBar *searchBar = [[UISearchBar alloc]init];
[searchBar setBackgroundImage:[[UIImage alloc] init]];//removes the color gray background 
```

嗯..我不认为有办法完全删除/删除它..嗯..也许具有 UISearchBar 行为的自定义 UITextField 将实现这一点..

# java - 将连接池对象传递给方法

> ID：11385231
> 
> 赞同：0
> 
> 时间：2012-07-08T17:41:40.847
> 
> 标签：java, connection-pooling

我需要将连接池对象传递给 ScheduledExecutorService 线程，但这样做有困难。我试图在声明前添加final，但这会引发以下错误...无法分配最终的局部变量连接。它必须为空白且不使用复合赋值

如何正确传递这个连接对象？

```
public class AdminManager extends JFrame {

    private JPanel contentPane;
    private JTable tableQueue;
    private JTable tableFilled;

    /**
     * Launch the application.
     * @throws InterruptedException 
     */

    public static void main(String[] args) throws InterruptedException {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    AdminManager frame = new AdminManager();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });

        BoneCP connectionPool = null;
        Connection connection = null;

        try {
            // load the database driver (make sure this is in your classpath!)
            Class.forName("com.mysql.jdbc.Driver");
        } catch (Exception e) {
            e.printStackTrace();
            return;
        }

        try {
            // setup the connection pool
            BoneCPConfig config = new BoneCPConfig();
            config.setJdbcUrl("jdbc:mysql://192.0.0.1:3306/db"); // jdbc url specific to your database, eg jdbc:mysql://127.0.0.1/yourdb
            config.setUsername("root"); 
            config.setPassword("");
            connectionPool = new BoneCP(config); // setup the connection pool

            connection = connectionPool.getConnection(); // fetch a connection

            if (connection != null){
                System.out.println("Connection successful!");
            }

        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            if (connection != null) {
                try {
                    connection.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        }        
ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
        exec.scheduleAtFixedRate(new Runnable(){
            @Override
            public void run(){
                System.out.println("Working ... ");
                String sql = "SELECT * FROM table;";
                Statement st;
                try {
                    st = connection.createStatement();
                    ResultSet rs = st.executeQuery(sql);
                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }, 2000, 1000, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:47:30.143

您可以定义一个仅在执行程序内部使用的虚拟引用：

```
final Connection conn = connection;

ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
    exec.scheduleAtFixedRate(new Runnable(){
        @Override
        public void run(){
            System.out.println("Working ... ");
            String sql = "SELECT * FROM table;";
            Statement st;
            try {
                st = conn.createStatement();
                ResultSet rs = st.executeQuery(sql);
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }   
        }
    }, 2000, 1000, TimeUnit.MILLISECONDS); 
```

如果无法通过这种方式解决问题（看不到其余代码），您可以定义一个外部任务类来保存代码：

```
class ThreadTask implements Runnable {
     private Connection connection;

     public ThreadTask(Connection c) {
          connection = c;
     }

     @Override
     public void run() {
        System.out.println("Working ... ");
        String sql = "SELECT * FROM table;";
        Statement st;
        try {
            st = connection.createStatement();
            ResultSet rs = st.executeQuery(sql);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
} 
```

和：

```
ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
exec.scheduleAtFixedRate(new ThreadTask(connection)); 
```

# objective-c - 无法以编程方式在 Xcode 4.2 中设置标签栏图像

> ID：11385234
> 
> 赞同：0
> 
> 时间：2012-07-08T17:42:00.380
> 
> 标签：objective-c, ios, xcode, xcode4.2, tabbar

我在 xcode 4.2 中创建了新的选项卡栏项目，并且没有应用程序委托 xib 文件。项目有两个导航控制器。我可以设置标签栏的名称，但无法设置图像。我完全受够了许多尝试。`FirstViewController *firstView = [[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil]`

```
firstView.title=@"Birthdays";
firstView.tabBarItem.image=[UIImage imageNamed:@"bottomleft.png"]; 
SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:nil]; 
secondView.title=@"Settings"; 
secondView.tabBarItem.image=[UIImage imageNamed:@"bottomright.png"]; 
UINavigationController *navController2 = [[UINavigationController alloc] initWithRootViewController:secondView];
    navController2.navigationBarHidden=YES;
    [viewControllers addObject:navController2]; 
```

![在此处输入图像描述](../Images/003b5004407f8a876738f910f00b7ced.png)

在这里你可以看到我得到了什么样的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:25:00.830

很难从您发布的代码中分辨出来，但您可能希望`tabBarItem`在`UINavigationController`( `navController2`) 上设置图像，因为它看起来像是您直接添加给您的`UITabBarController`：

```
navController2.tabBarItem.image = [UIImage imageNamed:@"bottomright.png"]; 
```

您可以设置标题的原因是导航控制器默认自动拥有其当前子视图控制器的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:31:11.697

看起来您成功替换了左侧图像，但是它没有透明区域。您是否遵循了设计选项卡图标的指南？

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

您需要在透明背景上使用白色图像。如果您的背景不透明，则整个图像将只是一个蓝色框，就像您左侧选项卡上的那个一样。

示例：要制作一个带有星形的标签，请在透明背景上绘制一个全白的星形。请勿使用除全白和透明黑色以外的任何其他颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T17:44:39.767

你永远不需要这样做：

```
[UIImage imageNamed:@"bottomleft2x.png"]; 
```

`UIImage`会根据屏幕比例自动判断是否`@2x`需要，所以简单点：

```
[UIImage imageNamed:@"bottomleft.png"]; 
```

当然，除非您的资源名称实际上是`bottomleft2x@2x.png`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T03:04:09.657

花花公子标签栏只允许白色和透明背景，所以如果你想让图片像生日蛋糕，然后在透明背景上画一个白色生日蛋糕，然后在蛋糕旁边添加一些透明像素来创建蛋糕的外观而不是只是蛋糕的轮廓，然后你可以将你的图像设置为标签栏

# c# - 如何在 C# 中获取进程 CurrentThreadId？

> ID：11385235
> 
> 赞同：0
> 
> 时间：2012-07-08T17:42:03.187
> 
> 标签：c#, process

我想获得一个进程 CurrentThreadId。我可以使用 AppDomain.GetCurrentThreadId(); 获取我的应用程序当前线程 ID；例如，我想获取任务管理器 CurrentThreadId。

```
var proces = System.Diagnostics.Process.GetProcessesByName("taskmgr");
            proces[0].Threads//write code for get currentThreadID? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:44:07.517

你不能。

一个进程可以（并且通常确实）有多个线程。“当前”线程不断变化 - 可能每秒多次。

请求当前线程仅对您自己的进程有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:50:28.600

如果您想要进程 ID，那么您已经走在正确的轨道上了！

这是一个例子：

```
 public void GetProcessId()
    {
        var processList = System.Diagnostics.Process.GetProcessesByName("taskmgr");

        // note that you get a list, there may be multiple processes returned
        foreach (var process in processList)
        {
            // print out the process id
            System.Console.WriteLine("Process Id=" + process.Id);
        }
    } 
```

# python - 字符串索引超出范围 Python，Django

> ID：11385237
> 
> 赞同：-1
> 
> 时间：2012-07-08T17:42:35.203
> 
> 标签：python, django

我正在使用 Django 开发 Web 应用程序。当我尝试在我的网络表单上运行它时，我收到“字符串索引超出范围”错误。但是，当我将字典硬编码到 python 测试文件中时，它可以在相同的值下正常工作。

这是我的 Django 视图：

```
def submitworkout(request):
    #workoutinfo = workout(request.GET)
    return render_to_response('home.html',{'infoprompt': workout(request.GET)},context_instance=RequestContext(request)) 
```

这是对象：

```
class workout():

    def __init__(self,addworkout):
        self.workout = collections.OrderedDict();
        getallreps = 0
        for i in range(len(addworkout['exercisename'])): 
            numsetcounter = 0; 
            self.workout[string.capwords(addworkout['exercisename'][i])] = [] 
            while numsetcounter < int(addworkout['numsets'][i]):   
                # print self.workout[addworkout['exercisename'][i]]
                self.workout[string.capwords(addworkout['exercisename'][i])].append([addworkout['weightinputboxes'][getallreps],addworkout['repinputboxes'][getallreps]]) 
                #[
                getallreps +=1
                numsetcounter +=1  

    def getexercise(self,name): 
        try: 
            return self.workout[string.capwords(name)];
        except:
            return 'This exercise does not exist!' 
```

现在这是我试图通过类运行的字典：

```
addworkout =    
 {u'repinputboxes': [u'5', u'3'], u'weightinputboxes': [u'195', u'170'], u'numsets': [u'1', u'1'], u'exercisename': [u'Squat', u'Power Clean']} 
```

以下是 Django 在错误中显示的本地变量：

```
i=1 

numsetcounter =0

getallreps = 1 
```

希望你们帮我解决我的问题。提前致谢！

编辑：追溯

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/submitworkout/?exercisename=Squat&numsets=1&weightinputboxes=195&repinputboxes=5&exercisename=Power+Clean&numsets=1&weightinputboxes=170&repinputboxes=3

Django Version: 1.3.1
Python Version: 2.7.0
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'authentication')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Users\Chris\testdjango\fitness\views.py" in submitworkout
  34\.     return render_to_response('home.html',{'infoprompt': workout(request.GET)},context_instance=RequestContext(request))
File "C:\Users\Chris\testdjango\fitness\tracking\models.py" in __init__
  15\.             while numsetcounter < int(addworkout['numsets'][i]):   # u'numsets': [u'1', u'2']

Exception Type: IndexError at /submitworkout/
Exception Value: string index out of range 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:56:58.560

问题在于您使用[QueryDict](https://docs.djangoproject.com/en/dev/ref/request-response/#querydict-objects)对象的方式`request.GET`。QueryDict 从请求的查询字符串初始化。在 GET 请求中传递值列表的方式类似于`baz=1&baz=2`. 当您像普通字典一样通过键直接访问该值时，您只会获得添加的最后一个值。

使用[getlist](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict.getlist)正确使用 QueryDict ：

```
exercises = addworkout.getlist('exercisename')
numsets = addworkout.getlist('numsets') 
```

这将正确返回值列表。

另一种选择是在将 QueryDict 传递给其他方法之前将其简单地转换为普通字典。这样，它将具有所有正常的扩展值：

```
workout(dict(request.GET)) 
```

这实际上是一个非常好的主意，因为这样您的锻炼方法就不必具备 QueryDict 对象的特殊知识。它可以把它当作一个普通的字典来对待。除了特定的视图相关情况外，它还可以被任何类似字典的数据结构使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:11:55.607

该错误意味着它`addworkout['numsets']`实际上是一个长度小于的字符串`i`，因为`addworkout['numsets'][i]`引发了异常。鉴于您的输入 dict 有一个列表，我认为内部有问题。您可以尝试调试`addworkout`函数调用中的内容，以确保它仍然包含您期望的确切内容吗？

# python - Python：我使用 .decode() - 'ascii' 编解码器无法编码

> ID：11385240
> 
> 赞同：4
> 
> 时间：2012-07-08T17:42:56.993
> 
> 标签：python, unicode

**看来我使用了错误的功能。有`.fromstring`- 没有错误信息**

```
xml_ = load() # here comes the unicode string with Cyrillic letters 

print xml_    # prints everything fine 

print type(xml_) # 'lxml.etree._ElementUnicodeResult' = unicode 

xml = xml_.decode('utf-8') # here is an error

doc = lxml.etree.parse(xml) # if I do not decode it - the same error appears here

 File "testLog.py", line 48, in <module>
    xml = xml_.decode('utf-8')
  File "/usr/lib/python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 89-96: ordinal not in range(128) 
```

如果

```
xml = xml_.encode('utf-8')

doc = lxml.etree.parse(xml) # here's an error 
```

或者

```
xml = xml_ 
```

然后

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 89: ordinal not in range(128) 
```

如果我理解正确：我必须将非 ascii 字符串解码为内部表示，然后使用此表示并在发送到输出之前将其编码回来？看来我正是这样做的。

`'Accept-Charset': 'utf-8'`由于标题，输入数据必须在 unt-8 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T18:21:17.577

字符串和 Unicode 对象在内存中具有不同的类型和不同的内容表示。Unicode 是文本的解码形式，而字符串是编码形式。

```
# -*- coding: utf-8 --

# Now, my string literals in this source file will
#    be str objects encoded in utf-8.

# In Python3, they will be unicode objects.
#    Below examples show the Python2 way.

s = 'ş'
print type(s) # prints <type 'str'>

u = s.decode('utf-8')
# Here, we create a unicode object from a string
#    which was encoded in utf-8.

print type(u) # prints <type 'unicode'> 
```

正如你看到的，

```
.encode() --> str
.decode() --> unicode 
```

当我们对字符串进行编码或解码时，我们需要确保我们的文本应该包含在源/目标编码中。使用 iso-8859-9 无法正确解码 iso-8859-1 编码的字符串。

至于问题中的第二个错误报告，`lxml.etree.parse()`适用于类似文件的对象。要从字符串中解析，`lxml.etree.fromstring()`应该使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T17:56:53.677

如果您的原始字符串是 unicode，则仅将其编码为 utf-8 而不是从 utf-8 解码才有意义。

我认为 xml 解析器只能处理 ascii 的 xml。

所以用于`xml = xml_.encode('ascii','xmlcharrefreplace')`将不在 ascii 中的 unicode 字符转换为 xml 实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T20:15:01.173

对我来说，使用`.fromstring()`方法是需要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T17:58:14.113

lxml 库已经为您提供了 unicode 类型的内容。你遇到了 python2 的 unicode/bytes 自动转换。提示是你要求它，`decode`但你得到一个*编码*错误。它试图将您的 utf8 字符串转换为默认字节编码，然后将其解码回 unicode。

在 unicode 对象上使用 .encode 方法转换为字节（`str`类型）。

观看此内容将教您很多有关如何解决此问题的知识：http: [//nedbatchelder.com/text/unipain.html](http://nedbatchelder.com/text/unipain.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-08T18:06:54.397

我假设您正在尝试解析一些网站？

您是否*确认*该网站是正确的？也许*他们*的编码不正确？

许多网站都损坏了，并且依赖网络浏览器来拥有*非常*强大的解析器。你可以试试beautifulsoup，它也很健壮。

有一个事实上的网络标准，即“字符集”HTML 标头（可能包括协商并与您提到的 Accept-Encoding 相关）被**HTML 文件中的任何标记所****推翻`<meta http-equiv=...`**！

所以你可能只是*没有*UTF-8 输入！

# jquery-ui - jQuery FlexBox 的替代品？

> ID：11385244
> 
> 赞同：1
> 
> 时间：2012-07-08T17:43:10.313
> 
> 标签：jquery-ui, jquery-autocomplete, jquery-ui-autocomplete, jquery-flexbox

jQuery FlexBox 有什么好的替代品吗？我需要从自动建议下拉列表中进行选择并在文本框中输入新值的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-08T19:01:10.623

因此，jQuery UI 中的自动完成控件已成为我自己的有用替代方案：http: [//api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T08:13:51.877

试试这个： [http](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm#demos/jqxgrid/dropdowngrid.htm) ://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm#demos/jqxgrid/dropdowngrid.htm 这将包含网格的所有功能。

# c - malloc 函数在 C 程序中无法正常工作。程序崩溃

> ID：11385247
> 
> 赞同：0
> 
> 时间：2012-07-08T17:43:32.650
> 
> 标签：c, malloc

我是 C 初学者，这是我第一个使用 malloc() 函数的程序。我认为使用此功能可能存在一些问题。我想使用一个数组（循环长度），其中将放置一个数字范围（用户输入）的解决方案。所以数组大小取决于用户所以我使用了 malloc()。但程序崩溃了。这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
    int x,y,num,count,p,k;
    for(;;){
        printf("enter first integer. must be between 1 and 100000\n");
        scanf("%d", &x);
        printf("enter second integer. must be between 1 and 100000\. must not equal the first integer.\n");
        scanf("%d", &y);
        if(x>=1 && x<100000 && y>=1 && y<100000 && x!=y){
            break;
        }
        else{
            printf("try the whole process again\n");
        }
    }
    if (x<y){
        int j;
        j=y;
        y=x;
        x=j;
    } //making x always greater than y
    int *cyclelength=malloc(5000*sizeof(int));
    if (NULL==cyclelength){
        printf("process aborted");
    }
    else{
        /*solution part for the range of number. and solution for each number  put into cyclelength.*/
        num=y;
        while(num<=x){
            p=1;
            k=num;
            while(k!=1){
                if(k%2==0)
                    k=k/2;
                else
                    k=3*k+1;
                p+=1;
                }
            count=0;
            cyclelength[count]=p;
            num+=1;
            count+=1;
        }
        free(cyclelength);
        cyclelength=NULL;
    }
    int c=0;
    int max=cyclelength[c];
    for(;c<x-y;c+=1){
        if(max<cyclelength[c+1]){
            max=cyclelength[c+1];
        }
    }
    printf("%d,%d,%d",x,y,max);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T17:46:38.630

您正在调用`free(cyclelength)`然后访问它指向的内存（或者，更确切地说*，*它指向的内存）。

（并且您的错误处理可能会有所改进；您 print `"process aborted"`，然后继续处理。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T17:47:05.240

您在 d`cyclelength`之后使用`free`它并将其设置为`NULL`：

```
 free(cyclelength);
        cyclelength=NULL;
    }
    int c=0;
    int max=cyclelength[c];
    for(;c<x-y;c+=1){
        if(max<cyclelength[c+1]){
            max=cyclelength[c+1];
        } 
```

这是未定义的行为，可能会崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T17:50:54.337

您在解除分配后使用循环长度，因此您的程序崩溃。
尝试这个 ：

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
    int x,y,num,count,p,k;
    for(;;){
        printf("enter first integer. must be between 1 and 100000\n");
        scanf("%d", &x);
        printf("enter second integer. must be between 1 and 100000\. must not equal the first integer.\n");
        scanf("%d", &y);
        if(x>=1 && x<100000 && y>=1 && y<100000 && x!=y){
            break;
        }
        else{
            printf("try the whole process again\n");
        }
    }
    if (x<y){
        int j;
        j=y;
        y=x;
        x=j;
    } //making x always greater than y
    int *cyclelength=(int *)malloc(5000*sizeof(int));
    if (NULL==cyclelength){
        printf("process aborted");
    }
    else{
        /*solution part for the range of number. and solution for each number  put into cyclelength.*/
        num=y;
        while(num<=x){
            p=1;
            k=num;
            while(k!=1){
                if(k%2==0)
                    k=k/2;
                else
                    k=3*k+1;
                p+=1;
                }
            count=0;
            cyclelength[count]=p;
            num+=1;
            count+=1;
        }        
        // don't assign null to cyclelength
        //cyclelength=NULL;
    }
    int c=0;
    int max=cyclelength[c];
    for(;c<x-y;c+=1){
        if(max<cyclelength[c+1]){
            max=cyclelength[c+1];
        }
    }
    printf("%d,%d,%d",x,y,max);
    // free here
    free(cyclelength);
    return 0;
} 
```

# php - 如何在 html + php(codeIgniter) 中渲染树

> ID：11385250
> 
> 赞同：1
> 
> 时间：2012-07-08T17:44:13.683
> 
> 标签：php, mysql, html, codeigniter, adjacency-list

我有一个邻接模型列表，这是查询：

```
SELECT t1.FIO AS lev1, t2.FIO AS lev2, t3.FIO AS lev3, t4.FIO AS lev4, t5.FIO AS lev5, t6.FIO AS lev6, t7.FIO AS lev7, t8.FIO AS lev8, t9.FIO AS lev9, t10.FIO AS lev10, t11.FIO AS lev11, t12.FIO AS lev12, t13.FIO AS lev13, t14.FIO AS lev14, t15.FIO AS lev15, t16.FIO AS lev16, t17.FIO AS lev17, t18.FIO AS lev18, t19.FIO AS lev19, t20.FIO AS lev20, t21.FIO AS lev21, t22.FIO AS lev22, t23.FIO AS lev23, t24.FIO AS lev24 FROM users AS t1 LEFT JOIN users AS t2 ON t2.parent_id = t1.id LEFT JOIN users AS t3 ON t3.parent_id = t2.id LEFT JOIN users AS t4 ON t4.parent_id = t3.id LEFT JOIN users AS t5 ON t5.parent_id = t4.id LEFT JOIN users AS t6 ON t6.parent_id = t5.id LEFT JOIN users AS t7 ON t7.parent_id = t6.id LEFT JOIN users AS t8 ON t8.parent_id = t7.id LEFT JOIN users AS t9 ON t9.parent_id = t8.id LEFT JOIN users AS t10 ON t10.parent_id = t9.id LEFT JOIN users AS t11 ON t11.parent_id = t10.id LEFT JOIN users AS t12 ON t12.parent_id = t11.id LEFT JOIN users AS t13 ON t13.parent_id = t12.id LEFT JOIN users AS t14 ON t14.parent_id = t13.id LEFT JOIN users AS t15 ON t15.parent_id = t14.id LEFT JOIN users AS t16 ON t16.parent_id = t15.id LEFT JOIN users AS t17 ON t17.parent_id = t16.id LEFT JOIN users AS t18 ON t18.parent_id = t17.id LEFT JOIN users AS t19 ON t19.parent_id = t18.id LEFT JOIN users AS t20 ON t20.parent_id = t19.id LEFT JOIN users AS t21 ON t21.parent_id = t20.id LEFT JOIN users AS t22 ON t22.parent_id = t21.id LEFT JOIN users AS t23 ON t23.parent_id = t22.id LEFT JOIN users AS t24 ON t24.parent_id = t23.id LEFT JOIN users AS t25 ON t25.parent_id = t24.id WHERE t1.id = 16 
```

这是一个使用邻接模型列表进行 24 级深度的查询

然后我做了这个：

```
<? for($i = 0; $i < $query->num_rows(); $i++): ?>
<? $row = $query->row($i); ?>
    <? for($n = 1; $n < 25; $n++): ?>
    <? $lev = "lev$n"; ?>
    <?= $row->$lev; ?>
    <? endfor; ?>
<? endfor; ?> 
```

它只渲染每一行的字段，我真的不知道热使它分层，我正在使用codeigniter，在这里使用行或对象更好吗？

我需要做这样的事情：

```
root_parent {
   parent_1 {
      child_1.name
      child_2.name
      child_3.name
   }

   parent_2 {
      child_1.name
      child_2.name
      child_3.name
   }

   parent_3 {
      child_1.name
      child_2.name
      child_3.name
   }
} 
```

没有重复是可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:49:29.523

你在这里 Gilles 做的事情似乎有点复杂和不灵活。创建数据库表，每行都有自己的 category_id 和 parent_id 不是更好吗？即，给顶级父母的parent_id 为0，孩子们取父母的category_id 的parent_id。这将为您提供无限的深度，并且在您渲染树时更容易编码。例如：

第一级层次结构的 SQL -

`SELECT * FROM (your_table) WHERE parent_id=0`

用于您的第二级层次结构的 SQL -

`SELECT * FROM (your_table) WHERE parent_id=(category_id of first level)`

用于您的第三级层次结构的 SQL -

`SELECT * FROM (your_table) WHERE parent_id=(category_id of second level)`

等等...

# php - 如何将活动状态类动态更改（添加）到导航链接

> ID：11385251
> 
> 赞同：4
> 
> 时间：2012-07-08T17:44:18.050
> 
> 标签：php, javascript, jquery

您好我正在尝试创建一个投资组合网站。为了不必为每个页面重新创建标题，我决定使用 PHP`include`函数添加它。我现在唯一的问题是当我单击一个链接导航到另一个页面时，***活动***链接没有分别改变。
**包含的 HTML**

```
<ul id="main-menu">
     <li><a href="index.php" class="active">home</a></li>
     <li><a href="about.php">about us</a></li>
     <li><a href="portfolio.php">portfolio</a></li>
     <li><a href="contact.php">contact</a></li>
</ul> 
```

**Javascript：**

```
 $(document).ready(function(){
    var $menu = $("ul#main-menu li a");                
    $menu.click(function(){
        $menu.each(function(){
            $(this).removeClass("active");
        });
        $(this).addClass("active");                  
    });
 }); 
```

我知道问题在于每次页面加载时 - 它都会将***活动***类重置为第一个链接。我不知道的是：如何将***活动***类动态添加到页面匹配链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T17:50:00.453

你需要这个：

```
 $(document).ready(function(){
        var i = document.location.href.lastIndexOf("/");
        var currentPHP = document.location.href.substr(i+1);
        $("ul#main-menu li a").removeClass('active');
        $("ul#main-menu li a[href^='"+currentPHP+"']").addClass('active');
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:49:54.197

尝试创建一个在页面加载时运行的函数，该函数选择与`href`页面相同的超链接。

或者，通过 AJAX 加载页面的主要内容，而不是传统的页面位置更改。JQuery 有一个很好的 AJAX 实现。在线搜索`jquery ajax`。

另一种选择是在点击超链接时创建一个 cookie，并通过读取 cookie 来设置选定的一个。尽管这将非常不可靠（后退按钮、手动 url 输入等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T18:02:25.707

**简单的：**

```
var link = document.location.href.split('/').slice(-1);   // retrieve page name
$('#main-menu li a.active').removeClass('active');        // remove class 'active'
$('#main-menu li a[href$="'+link+'"]').addClass('active');// and add it to a matching link 
```

## *[jsBin 演示](http://jsbin.com/aguver/1/edit)*

# c# - 如何将这种类型的类关系存储在数据库中？

> ID：11385257
> 
> 赞同：3
> 
> 时间：2012-07-08T17:44:49.630
> 
> 标签：c#, .net, database, class

假设我有以下课程：

*   电子邮件地址
*   地址
*   接触
*   用户
*   事件
*   任务
*   笔记

每个联系人可以有多个电子邮件地址或多个地址，用户也可以有多个。（家庭住址、公司地址或个人电子邮件、公司电子邮件等）

我在想也许我应该让 User 类扩展 Contact 类。这意味着我将在 EmailAddress 和 Address 类中有一个字段引用它们所属的联系人。

然后我希望能够将注释附加到以下任何类型：事件、任务或联系人。我还希望能够为这些类型附加多个注释。我想不出在数据库中设计这种结构的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:49:50.203

您是否尝试过使用[实体数据模型设计器](http://msdn.microsoft.com/en-us/library/cc716685.aspx)绘制您的类模型并查看它生成的数据库模型？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:01:48.480

目前尚不清楚联系人是否与用户具有相同的属性，或者联系人是否由用户共享。让我们举一个不被用户共享的联系人的简单案例。如果电子邮件和电话比字符串更复杂，则在电子邮件和电话类中替换。

```
Class User 
   public String name 
   public List<string> emails 
   public List<string> phones
   public List<contact> contacts

Class Contact
   public String name 
   public List<string> emails 
```

如果联系人具有与用户完全相同的属性，则

```
Class User 
   public String name 
   public List<string> emails 
   public List<string> phones
   public List<User> contacts 
```

如果你想继承那么

```
 Class User : Contact 
       public List<string> phones
       public List<contact> contacts 
```

# multithreading - TBB ThreadingBuildingBlocks 奇怪的行为

> ID：11385265
> 
> 赞同：0
> 
> 时间：2012-07-08T17:45:36.423
> 
> 标签：multithreading, data-structures, tbb, concurrenthashmap

我的问题：如果我使用“只读”const_accessors，为什么我的程序会冻结？

它似乎被锁定了，从 API 描述来看，拥有一个访问器和多个 const_accessors 似乎是可以的，（作者，阅读器）。也许有人可以告诉我一个不同的故事。

我试图实现的目标是使用这个并发哈希映射并使其可用于 10-200 个线程，以便它们可以查找和添加/删除信息。如果您有比我正在使用的当前解决方案更好的解决方案，那么您也欢迎发布替代方案。

```
tbb::size_t hashInitSize = 1200000;
concurrent_hash_map<long int,char*> hashmap(hashInitSize);
cout << hashmap.bucket_count() << std::endl;

long int l = 200;
long int c = 201;

    concurrent_hash_map<long int,char*>::accessor o;
    concurrent_hash_map<long int,char*>::const_accessor t;
    concurrent_hash_map<long int,char*>::const_accessor h;

    cout << "Trying to find 200 "<< hashmap.find(t,200) << std::endl;

    hashmap.insert(o,l);
o->second = "testother"; 
```

[TBB 社区教程指南](http://threadingbuildingblocks.org/uploads/81/91/Latest%20Open%20Source%20Documentation/Tutorial.pdf)第 43 页描述了访问器的概念

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:25:27.503

来自[TBB 参考手册](http://threadingbuildingblocks.org/docs/help/reference/containers_overview/concurrent_hash_map_cls/concurrent_access.htm)：

> *访问器*充当智能指针，指向`concurrent_hash_map`. 它持有一个对的隐式锁，直到实例被销毁或`release`在访问器上调用方法。

访问器在使用时获取锁。多个访问器可以同时存在。但是，如果一个程序同时使用多个访问器并且不释放锁，它很可能会死锁。

为避免死锁，请在访问完哈希映射条目后释放它的锁。

# ruby - Ruby 1.9 线程池

> ID：11385287
> 
> 赞同：7
> 
> 时间：2012-07-08T17:48:04.667
> 
> 标签：ruby, multithreading, threadpool

据我了解，Ruby 1.9 使用操作系统线程，但实际上只有一个线程仍会同时运行（尽管一个线程可能正在阻塞 IO，而另一个线程正在处理）。我见过的线程示例仅用于`Thread.new`启动新线程。来自 Java 背景，我通常使用线程池来避免启动许多新线程，因为它们是“重量级的”。

ruby 中是否有内置的线程池结构？我在默认语言库中没有看到。或者是否有通常使用的标准宝石？由于操作系统级别的线程是 ruby​​ 的一个较新的特性，我不知道库对于它有多成熟。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T09:05:10.507

您是正确的，因为默认的 C Ruby 解释器一次只执行一个线程（其他基于 C 的动态语言，如 Python 也有类似的限制）。由于这个限制，线程在 Ruby 中并不常见，因此没有默认的线程池库。如果有任务要并行完成，人们通常会使用流程，因为流程可以在多个服务器上扩展。

如果你确实需要使用线程，我建议你在 JRuby 平台上使用[https://github.com/meh/ruby-threadpool](https://github.com/meh/ruby-threadpool)，这是一个运行在 JVM 上的 Ruby 解释器。这应该是你的拿手好戏，因为它在虚拟机上运行，​​所以它会有真正的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-05T08:51:15.473

公认的答案是正确的，但是，有很多任务可以使用线程。毕竟它的存在是有原因的。即使它一次只能运行一个线程。在许多现实生活中，它仍然可以被认为是平行的。

例如，当我们有 100 个长时间运行的进程时，每个进程大约需要 10 分钟才能完成。通过在 ruby​​ 中使用线程，即使有所有这些限制，如果我们一次定义一个包含 10 个任务的线程池，它在没有线程的情况下运行速度将比 100*10 分钟快得多。示例包括，实时捕获文件更改，发送大量 Web 请求（例如状态检查）

[您可以通过阅读https://blog.codeship.com/understanding-fundamental-ruby-abstraction-concurrency/](https://blog.codeship.com/understanding-fundamental-ruby-abstraction-concurrency/)了解池的工作原理。在生产代码中使用[https://github.com/meh/ruby-thread#pool](https://github.com/meh/ruby-thread#pool)

# ruby-on-rails - 设计 + 主动管理员重定向

> ID：11385288
> 
> 赞同：6
> 
> 时间：2012-07-08T17:48:10.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise, activeadmin

我在为我的应用程序设置重定向时遇到问题。用户应该转到他们的个人资料（用户/节目），管理员应该转到管理仪表板。我该如何设置？

当前收到以下错误：

```
 NameError in ActiveAdmin::Devise::SessionsController#create

    undefined local variable or method `admin' for #<ActiveAdmin::Devise::SessionsController:0x007febe12667e8> 
```

**应用控制器**

```
def after_sign_in_path_for(resource_or_scope)
   if admin
   redirect_to admin_dashboard_path
  else
   @user
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-08T17:58:21.087

您没有`admin`要访问的变量，您需要检查给定的参数是什么。

```
def after_sign_in_path_for(resource)
  stored_location_for(resource) ||
    if resource.is_a?(Admin)
      admin_dashboard_path
    else
      user_path(resource)
    end
end 
```

您也不应该*在*此方法中重定向，它应该只返回设计可以使用的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T23:14:51.983

```
if resource.class == User
  root_path
elsif resource.class == AdminUser
  admin_root_path
else
end 
```

# java - 如何在itext中设置自定义颜色？

> ID：11385291
> 
> 赞同：10
> 
> 时间：2012-07-08T17:48:51.310
> 
> 标签：java, uitextfield, itext

感谢您花时间回答我的问题。

我正在使用 Java 中的 iText 生成 PDF 文档。我需要将表的列标题设置为与值列中的颜色不同的颜色。我有来自 Photoshop 的颜色十六进制值。我将 PdfPTable 与块和段落一起使用。除了 BaseColor 枚举中预定义的颜色之外，如何将它们设置为不同的颜色？

提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T14:55:26.317

您需要获取 8 位十六进制颜色值并将其转换为 8 位 RGB 值。

[如何使用 Java 将十六进制转换为 rgb？](https://stackoverflow.com/questions/4129666/how-to-convert-hex-to-rgb)

然后，您将能够使用您的 RGB 值创建新的[BaseColor 。](http://api.itextpdf.com/itext/com/itextpdf/text/BaseColor.html)

```
cell.setBackgroundColor(new BaseColor(255, 0, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-09T09:19:52.933

```
Cell hcell = new Cell();   
Color color = WebColors.getRGBColor("red");
hcell.setBackgroundColor(color); 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-07-10T13:14:11.557

看看这个[网站](http://www.ujihara.jp/iTextdotNET/en/examples.html)。即使它说 C#，也只有 Java 代码。让我知道你是否找到它。我通过查看这些示例创建了一个成功的 PDF 系统。

# java - 生成器模式。扩展接口

> ID：11385298
> 
> 赞同：1
> 
> 时间：2012-07-08T17:49:53.927
> 
> 标签：java, design-patterns, builder

我有建设者：

```
public abstract class ScriptBuilder {
    public void buildScript() {
        this.commandList = Lists.newArrayList();
    }
    public abstract void buildSleepCommand(long time);
    public abstract void buildSynchronizationCommand();
    public abstract void buildTouchDownCommand(TouchPoint touchPoint);
    public abstract void buildTouchUpCommand();
    public List<String> getScript() {
        return commandList;
    }
} 
```

执行：

```
public class StandardScriptBuilder extends ScriptBuilder{
…
} 
```

我需要构建一个新的构建器，它实现了新的接口。这个新接口基于接口 ScriptBuilder：

```
class NewScriptBuilder extends StandardScriptBuilder{
    public void buildNewCommand(TouchPoint startTouchPoint, TouchPoint endTouchPoint) {
        buildTouchDownCommand(startTouchPoint);
        buildSynchronizationCommand();
        buildTouchDownCommand(endTouchPoint);
    }
    …
} 
```

是否有任何模式可以扩展现有的构建器界面并保持构建器的优势？我的意思是，如果我们扩展接口，我们不能这样做：

```
ScriptBuilder builder = new NewScriptBuilder();
…
builder.buildNewCommand; 
```

如果没有解决办法，正常使用吗？：

```
((NewScriptBuilder)builder).buildNewCommand; 
```

谢谢。

* * *

我的意思是：例如，我们可以使用装饰器模式：

```
public abstract class Decorator extends ScriptBuilder {...} ...

public class OahDecorator extends Decorator {
...
    public void buildNewCommand() {
    ...
    }
} 
```

是正常组织代码，还是选择不同的模式是？任务 - 在构建器中添加新方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:27:43.953

如果你想让一个类实现多个行为，你应该让它实现多个接口。对类进行编码通常是不好的做法——你应该对接口进行编码。差异是微妙的，但仍然非常相关和真实。

当您发现自己显式转换时，通常意味着您的接口不太适合该任务。目标是让客户端代码尽可能少地了解它正在处理的对象的实际类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:54:14.007

使用接口的想法是您不关心实现类型是什么，也不需要子类上的特定方法。如果确实需要调用子类特定的方法，则需要像上面所做的那样向下转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T07:50:59.127

您要调用的事实`builder.buildNewCommand()`意味着您已经知道它是 type `NewScriptBuilder`。为什么不直接声明它`NewScriptBuilder`呢？

```
NewScriptBuilder builder = new NewScriptBuilder();
...
builder.buildNewCommand(); 
```

如果这是不可能的（也许您正在使用外部 API？），那么您可以包装`ScriptBuilder`而不是扩展它：

```
public class NewScriptBuilder {
  private final ScriptBuilder builder;

  public NewScriptBuilder(ScriptBuilder builder) {
    this.builder = builder;
  }

  public void buildNewCommand(TouchPoint startTouchPoint, TouchPoint endTouchPoint) {
    builder.buildTouchDownCommand(startTouchPoint);
    builder.buildSynchronizationCommand();
    builder.buildTouchDownCommand(endTouchPoint);
  }
} 
```

并在您想使用时创建一个新实例`buildNewCommand`：

```
ScriptBuilder builder = ...;
NewScriptBuilder newBuilder = new NewScriptBuilder(builder);
newBuilder.buildNewCommand(); 
```

# xcode - Core Data 中的抽象实体和继承

> ID：11385306
> 
> 赞同：16
> 
> 时间：2012-07-08T17:50:45.850
> 
> 标签：xcode, core-data, abstract-class, nsmanagedobject

我有一个具有 3 个实体的一级方程式比赛的数据模型：

*   RacingActor：抽象实体
*   Pilot：继承自 RacingActor
*   Team：继承自 RacingActor

![在此处输入图像描述](../Images/cb4673a398313f36cb66d69d8f796004.png)

如果我生成`NSManagedObject`子类来表示这些实体，则生成的代码根本不代表这种设计：

*   一切都继承自`NSManagedObject`
*   没有什么能阻止我实例化 RacingActor
*   Pilot 中的 team 属性是 type`NSManagedObject`而不是 Team

这是预期的行为吗？我应该修复 Xcode 生成的代码吗？我错过了什么吗？

顺便说一句，我正在使用 Xcode 4.3.3

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T16:48:30.787

Core Data 的核心是一个对象关系映射库。很久以前，它被称为企业对象框架，是 WebObjects 的一部分。

所以是的，Core Data 管理的任何持久对象的基础对象都是`NSManagedObject`，你可以对它们做任何你想做的事情。

在您的示例中，Team 和 Pilot 将共享一个公用表，您将能够使用查询一次检索 Teams 和 Pilots。这就是想法。

Objective-C 继承树（如果您使用自定义类）可以镜像您定义的模型，但它不需要。您可以创建一个自定义`RacingActor`类，将其用作自定义`Team`和`Pilot`类的基类，或者您可以告诉模型`RacingActor`用于`Team`和`Pilot`对象。您甚至可以为和/或如果您愿意定义一个完全不相关的基类（只要`NSManagedObject`是直接或间接的父类） 。`Team``Pilot`

然后，您可以自由地在控制器或自定义数据类中实现业务逻辑中所需的特定行为。

# objective-c - 如何从两个数组中获取对象？

> ID：11385308
> 
> 赞同：-2
> 
> 时间：2012-07-08T17:51:00.947
> 
> 标签：objective-c, arrays, core-data, enumerator

我想做一些关于电影的测验。

有 10 个对象的测验可变数组。使用核心数据..实体就是电影。属性是标题、演员和正确计数。

有两个文本字段，

标题字段和演员字段。

我想从一个对象做两个测验

第一个测验隐藏了哪个titlefield，第二个测验隐藏了哪个actorfield。

用户可以输入电影标题或演员姓名。在文本字段中。

如果用户输入正确的东西，我想 +1 正确计数。

我所做的是..

我将测验可变数组放入这两个数组中

```
Array A (quiz 1 to 10) <<for title quiz
Array B (same as array A) <<for actor quiz 
```

和电影 *quizMovie

并且.. 在 suffle 这两个数组之后设置枚举器以使用 nextObject 方法。

```
NSEnumerator *enu1 = [arrayA objectEnumerator];
NSEnumerator *enu2 = [arrayB objectEnumerator]; 
```

集数 =1 <

和 UIButton 设置测验和开始测验

```
If( number%2==1)
quizMovie = [enu1 nextObject]
Titlefield.hidden = YES;
else
quizMovie = [enu2 nextObject]
Actorfield.hidden = YES; 
```

当用户点击完成按钮时，如果正确，我想 +1 正确计数。

有了这些代码..我无法得到我想要的......

完成..

帮助我，天才！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:02:32.363

合并，然后使用排序方法：

```
NSArray *combinedArray = [arrayA arrayByAddingObjectsFromArray:arrayB];
NSSortDescriptor *ascInts = [NSSortDescriptor sortDescriptorWithKey:@"self" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObject:ascInts];
combinedArray = [combinedArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

这是假设成员是 NSNumber 的实例。

**编辑** 如果新闻是奇数，则此方法从一个数组中选择，如果是偶数，则从一个数组中选择，正如我认为根据我们的对话您所希望的那样。

```
static int pressNumber = 0;
pressNumber++;
NSArray *sourceArray;
if(pressNumber%2) { // if it's an odd-numbered press
  sourceArray = arrayA;
} else {
  sourceArray = arrayB;
}
int indexToSelect = (int) (floor(pressNumber/2.0))+1;
if(indexToSelect >= sourceArray.count) {
  // out-of-bounds
  pressNumber = 0;
  indexToSelect = 1;
}
selecteObject = [sourceArray objectAtIndex:indexToSelect]; 
```

# html - CSS 样式在子域中的早期 Android 上不起作用

> ID：11385310
> 
> 赞同：1
> 
> 时间：2012-07-08T17:51:09.467
> 
> 标签：html, css, mobile, subdomain

我一直在努力让一个移动网站为客户工作，并且遇到了一个烦人且令人困惑的问题。我已将各种元素（div、图像、字体）的所有 CSS 大小设置为百分比，因此它可以跨设备/屏幕大小有效工作，并且在整个测试过程中，它在所有设备（iPhone 和我主要测试过的 Galaxy）上都能完美运行一个子文件夹 www.think-ins.co.uk/mobile/

当我将站点添加到我们实际想要使用的域时出现问题，即 m.think-ins.co.uk，它在 iPhone 和 Galaxy Note 上仍然可以正常工作，但在旧的 Galaxy I 上，样式中断我留下了巨大的字体 - 即使 m.think-ins.co.uk 子域和 think-ins.co.uk/mobile/ 文件夹版本上的代码是相同的。

请帮忙，这非常令人沮丧！

# java - 我正在尝试使用 JFrame 创建一个计算器并遇到一些困难

> ID：11385313
> 
> 赞同：0
> 
> 时间：2012-07-08T17:51:24.413
> 
> 标签：java, swing, jframe, jpanel, jbutton

基本上它会让事情出现，所以我可以测试它并确保我走在正确的轨道上。这是我的主要“计算器”文件的代码：

```
package simplecalculator;        

import javax.swing.JFrame;
import javax.swing.UIManager;

public class Calculator {

    public static void main(String[] args) {

        JFrame calculatorFrame = new Listener();

        calculatorFrame.setSize(1000, 0x3e8);

        calculatorFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        calculatorFrame.setVisible(true);
    }
} 
```

我有一个单独的类监听器文件：

```
package simplecalculator;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Listener extends JFrame {
    private JLabel enterFirstNumber;
    private JLabel enterSecondNumber;
    private JLabel resultLabel;
    private JTextField getFirstNumber;
    private JTextField getSecondNumber;
    private JButton addition;
    private JButton subtraction;
    private JButton multiplication;
    private JButton division;
    private JPanel panelOne;
    private JPanel panelTwo;
    private JPanel panelThree;

    private static final int frameWidth = 1000;
    private static final int frameHeight = 1000;

    int firstNumber;
    int secondNumber;
    double finalNumber;

    public void Calc(){

        setSize(frameWidth, frameHeight);

        enterFirstNumber = new JLabel("Enter First Number: ");
        getFirstNumber = new JTextField("0", 12);

        enterSecondNumber = new JLabel("Enter Second Number: ");
        getSecondNumber = new JTextField("0", 12);

    }

    public void buttons()
    {
        addition = new JButton("+");
        addition.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                firstNumber = Integer.parseInt(getFirstNumber.getText());
                secondNumber = Integer.parseInt(getSecondNumber.getText());
                finalNumber = firstNumber + secondNumber;
                resultLabel.setText("" + finalNumber);
            }
        });

        subtraction = new JButton("-");
        subtraction.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                firstNumber = Integer.parseInt(getFirstNumber.getText());
                secondNumber = Integer.parseInt(getSecondNumber.getText());
                finalNumber = firstNumber - secondNumber;
                resultLabel.setText("" + finalNumber);
            }
        });

        multiplication = new JButton("*");
        multiplication.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                firstNumber = Integer.parseInt(getFirstNumber.getText());
                secondNumber = Integer.parseInt(getSecondNumber.getText());
                finalNumber = firstNumber * secondNumber;
                resultLabel.setText("" + finalNumber);
            }
        });

        division = new JButton("/");
        division.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                firstNumber = Integer.parseInt(getFirstNumber.getText());
                secondNumber = Integer.parseInt(getSecondNumber.getText());
                finalNumber = firstNumber / secondNumber;
                resultLabel.setText("" + finalNumber);
            }
        });
    }

    private void panels(){
        panelOne = new JPanel();
        panelOne.setLayout(new GridLayout(2, 2));
        panelOne.add(enterFirstNumber);
        panelOne.add(getFirstNumber);
        panelOne.add(enterSecondNumber);
        panelOne.add(getSecondNumber);

        panelTwo = new JPanel();
        panelTwo.setLayout(new GridLayout(2, 2));
        panelTwo.add(addition);
        panelTwo.add(subtraction);
        panelTwo.add(multiplication);
        panelTwo.add(division);

        panelThree = new JPanel();
        panelThree.add(resultLabel);
    } 
} 
```

基本上我需要知道的是：

1）我在正确的轨道上吗？2）我怎样才能得到一个实际的计算器而不仅仅是一个空白的小程序？

对不起，如果我听起来像个菜鸟；我是一名编程学生，我已经花了大约 12 个小时试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:01:57.100

您永远不会向 JFrame 添加任何组件。所以很明显，它不包含任何东西。您应该向您的 JFrame 子类添加一个构造函数，并使其向框架添加一些组件。

你还应该缩进你的代码，使其可读，并尊重 Java 命名约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:27:00.137

尝试构建基本计算器时有很多陷阱：在 GUI 布局中，在输入/格式化数字和提供所需的精度等时。

您可以使用此示例在开始时跳过其中的大部分： [https ://github.com/plokhotnyuk/calculator/tree/fee1b741aa74d659b8e30ad66d26d9ca6a2f6bc5](https://github.com/plokhotnyuk/calculator/tree/fee1b741aa74d659b8e30ad66d26d9ca6a2f6bc5)

主要思想（从端到端测试开始）是从这本神奇的书中借用的：http: [//www.growth-object-orientated-software.com/](http://www.growing-object-oriented-software.com/)

随意分叉和破解！享受使用 TDD 和可执行规范进行开发！！！！

# ruby-on-rails - 无法加载此类文件 -- 设计/模式 (LoadError)

> ID：11385314
> 
> 赞同：1
> 
> 时间：2012-07-08T17:51:40.297
> 
> 标签：ruby-on-rails, janrain, rpx

在我将 devise_rpx_connectable gem 添加到我的 Gemfile 后，我无法再运行 rails server 或迁移以向我的用户表添加列。我正在尝试在此处遵循 railscast 示例： [http ://railscasts.com/episodes/233-engage-with-devise?view=comments](http://railscasts.com/episodes/233-engage-with-devise?view=comments)

在过去的两天里，我尝试了几件事来尝试让这件事发挥作用。我试过自己创建迁移文件，但是当我运行“rake db:migrate --trace”时，我得到的错误是“rake aborted！无法加载这样的文件——设计/模式”，下面有很多错误： C:/.../devise/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251 in 'require'

我试过用谷歌搜索这个问题，只发现少数人有同样的问题，没有人回答他们的问题。似乎其他出现“无法加载此类文件”错误的人被告知他们的某些 gem 版本不兼容，因此我将在此处提供该信息：

Gemfile: gem 'rails', '3.2.6' gem 'devise', '2.1.2' gem 'devise_rpx_connectable', '0.2.2' 我的捆绑器版本是 1.1.4，我的 ruby​​ 版本是 1.9.3

对我来说唯一突出的是设计文件夹中的 ruby​​ 版本似乎是 1.9.1，而我的是 1.9.3，但我想知道降级到 1.9.1 的可能后果。

任何投入将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:35:55.927

所以我们决定删除“需要'devise/schema.rb'”的schema.rb文件的内容，我们的应用程序神奇地工作了！我不知道这意味着什么，所以我做了更多的研究，发现了这个——

[https://github.com/nbudin/devise_cas_authenticatable/commit/44aacb23fb5b4cc9d22434c952b9d1d88fe28e88#commitcomment-1555733](https://github.com/nbudin/devise_cas_authenticatable/commit/44aacb23fb5b4cc9d22434c952b9d1d88fe28e88#commitcomment-1555733)

事实证明，使用较新版本（> 2.1）的设计，此文件的内容不是必需的。希望这可以解决很多其他人的问题，特别是如果他们决定更新设计 gem 并继续使用 devise_rpx_connectable。

# java - 如何对齐 JTextPane 中的选定文本？

> ID：11385315
> 
> 赞同：0
> 
> 时间：2012-07-08T17:51:40.557
> 
> 标签：java, swing, jframe, jtextpane

相对不言自明，如何在 JTextPane 中居中选定文本？

（对齐任何文本都有帮助）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:56:33.443

在 coderanch 上找到了一些代码：

```
 SimpleAttributeSet attribs = new SimpleAttributeSet();  
StyleConstants.setAlignment(attribs , StyleConstants.ALIGN_CENTER);  
pane.setParagraphAttributes(attribs,true); 
```

# asp.net-mvc-3 - 如何从存储库传递 viewbag 信息

> ID：11385317
> 
> 赞同：1
> 
> 时间：2012-07-08T17:51:50.970
> 
> 标签：asp.net-mvc-3

我正在将我的 crud 操作从控制器移动到存储库中。

如何将视图包信息从存储库传递到控制器，然后再传递到视图？

**我的控制器在存储库中调用 PopulateAssigneUserData**

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using WWW.Models;
using WWW.DAL;
using WWW.ViewModels;

namespace WWW.Controllers
{ 
    public class RolesController : Controller
    {
        private Iaspnet_RolesRepository aspnet_RolesRepository;

        public RolesController()
        {
            this.aspnet_RolesRepository = new Aspnet_RolesRepository(new WorldofWarCraftContext());
        }

        public RolesController(Iaspnet_RolesRepository aspnet_RolesRepository)
        {
            this.aspnet_RolesRepository = aspnet_RolesRepository;
        }

        //
        // GET: /Roles/Edit/5

        public ActionResult Edit(Guid id)
        {
            aspnet_Roles aspnet_Role = db.aspnet_Roless        
            .Include(i => i.aspnet_User)
            .Where(i => i.RoleId == id)
            .Single();

            PopulateAssigneUserData(aspnet_Role);
            return View(aspnet_Role);
        } 
```

我的存储库有过去存在于控制器中的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Data;
using WWW.Models;
using WWW.ViewModels;

namespace WWW.DAL
{
    public class Aspnet_RolesRepository : Iaspnet_RolesRepository, Iaspnet_UsersRepository , IDisposable
    {
        private WorldofWarCraftContext context;

        public Aspnet_RolesRepository(WorldofWarCraftContext context)
        {
            this.context = context;
        }

        public IEnumerable<aspnet_Roles> GetRoles()
        {
            return context.aspnet_Roless.ToList();
        }

        public aspnet_Roles GetRolesByID(Guid id)
        {
            return context.aspnet_Roless.Find(id);
        }

        private void PopulateAssigneUserData(aspnet_Roles aspnet_Role)
        {
            var allUsers = context.aspnet_Users;
            var rolesUsers = new HashSet<Guid>(aspnet_Role.aspnet_User.Select(c => c.UserId));
            var viewModel = new List<AssigneUserData>();
            foreach (var User in allUsers)
            {
                viewModel.Add(new AssigneUserData
                {
                    UserId = User.UserId,
                    UserName = User.UserName,
                    Assigned = rolesUsers.Contains(User.UserId)
                });
            }
            ViewBag.Users = viewModel;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:54:57.207

你在这里混合了责任。存储库不应与视图模型和 ViewBag 一起使用。存储库应返回域模型。控制器负责将这些域模型映射到视图模型并将这些视图模型传递给视图。此`PopulateAssigneUserData`方法不应存在于您的存储库中。在您的存储库中，您应该有一个方法可以返回`aspnet_Role`给定 id 的实例（您当前在 Edit 操作中拥有的代码）。

# java - 从 XPath 表达式填充 XML 模板文件？

> ID：11385323
> 
> 赞同：3
> 
> 时间：2012-07-08T17:53:11.310
> 
> 标签：java, xml, xslt, xpath, xslt-2.0

从 XPath 表达式的映射中填充（或生成）XML 模板文件的最佳方法是什么？

要求是我们需要从一个模板开始（因为这可能包含 XPath 表达式中未捕获的信息）。

例如，起始模板可能是：

```
<s11:Envelope xmlns:s11='http://schemas.xmlsoap.org/soap/envelope/'>
    <ns1:create xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/'>
      <article xmlns:ns1='http://predic8.com/material/1/'>
        <name>?XXX?</name>
        <description>?XXX?</description>
        <price xmlns:ns1='http://predic8.com/common/1/'>
          <amount>?999.99?</amount>
          <currency xmlns:ns1='http://predic8.com/common/1/'>???</currency>
        </price>
        <id xmlns:ns1='http://predic8.com/material/1/'>???</id>
      </article>
    </ns1:create>
  </s11:Body>
</s11:Envelope> 
```

然后我们被提供，例如：

```
expression: /create/article[1]/id                => 1
expression: /create/article[1]/description       => bar
expression: /create/article[1]/name[1]           => foo
expression: /create/article[1]/price[1]/amount   => 00.00
expression: /create/article[1]/price[1]/currency => USD
expression: /create/article[2]/id                => 2
expression: /create/article[2]/description       => some name
expression: /create/article[2]/name[1]           => some description
expression: /create/article[2]/price[1]/amount   => 00.01
expression: /create/article[2]/price[1]/currency => USD 
```

然后我们应该生成：

```
<ns1:create xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/'>
    <article xmlns:ns1='http://predic8.com/material/1/'>
        <name xmlns:ns1='http://predic8.com/material/1/'>foo</name>
        <description>bar</description>
        <price xmlns:ns1='http://predic8.com/common/1/'>
            <amount>00.00</amount>
            <currency xmlns:ns1='http://predic8.com/common/1/'>USD</currency>
        </price>
        <id xmlns:ns1='http://predic8.com/material/1/'>1</id>
    </article>
    <article xmlns:ns1='http://predic8.com/material/2/'>
        <name>some name</name>
        <description>some description</description>
        <price xmlns:ns1='http://predic8.com/common/2/'>
            <amount>00.01</amount>
            <currency xmlns:ns1='http://predic8.com/common/2/'>USD</currency>
        </price>
        <id xmlns:ns1='http://predic8.com/material/2/'>2</id>
    </article>
</ns1:create> 
```

我是用 Java 实现的，但如果可能的话，我更喜欢基于 XSLT 的解决方案。

PS：这个问题与我最近提出的另一个[问题相反。](https://stackoverflow.com/questions/11297807/how-to-flatten-an-xml-file-into-a-set-of-xpath-expressions)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:31:20.433

**这种转换从“表达式”创建了一个 XML 文档，该文档具有所需结果的结构——它仍然将此结果转换为最终结果**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vPop" as="element()*">
    <item path="/create/article[1]/id">1</item>
    <item path="/create/article[1]/description">bar</item>
    <item path="/create/article[1]/name[1]">foo</item>
    <item path="/create/article[1]/price[1]/amount">00.00</item>
    <item path="/create/article[1]/price[1]/currency">USD</item>
    <item path="/create/article[1]/price[2]/amount">11.11</item>
    <item path="/create/article[1]/price[2]/currency">AUD</item>
    <item path="/create/article[2]/id">2</item>
    <item path="/create/article[2]/description">some name</item>
    <item path="/create/article[2]/name[1]">some description</item>
    <item path="/create/article[2]/price[1]/amount">00.01</item>
    <item path="/create/article[2]/price[1]/currency">USD</item>
 </xsl:variable>

 <xsl:template match="/">
  <xsl:sequence select="my:subTree($vPop/@path/concat(.,'/',string(..)))"/>
 </xsl:template>

 <xsl:function name="my:subTree" as="node()*">
  <xsl:param name="pPaths" as="xs:string*"/>

  <xsl:for-each-group select="$pPaths"
    group-adjacent=
        "substring-before(substring-after(concat(., '/'), '/'), '/')">
    <xsl:if test="current-grouping-key()">
     <xsl:choose>
       <xsl:when test=
          "substring-after(current-group()[1], current-grouping-key())">
         <xsl:element name=
           "{substring-before(concat(current-grouping-key(), '['), '[')}">

          <xsl:sequence select=
            "my:subTree(for $s in current-group()
                         return
                            concat('/',substring-after(substring($s, 2),'/'))
                             )
            "/>
        </xsl:element>
       </xsl:when>
       <xsl:otherwise>
        <xsl:value-of select="current-grouping-key()"/>
       </xsl:otherwise>
     </xsl:choose>
     </xsl:if>
  </xsl:for-each-group>
 </xsl:function>
</xsl:stylesheet> 
```

**当此转换应用于任何 XML 文档（未使用）时，结果为**：

```
<create>
   <article>
      <id>1</id>
      <description>bar</description>
      <name>foo</name>
      <price>
         <amount>00.00</amount>
         <currency>USD</currency>
      </price>
      <price>
         <amount>11.11</amount>
         <currency>AUD</currency>
      </price>
   </article>
   <article>
      <id>2</id>
      <description>some name</description>
      <name>some description</name>
      <price>
         <amount>00.01</amount>
         <currency>USD</currency>
      </price>
   </article>
</create> 
```

**注意**：

1.  您需要将给定的“表达式”转换为此转换中使用的格式——这既简单又直接。

2.  在最终转换中，您需要“按原样”复制每个节点（使用身份规则），但应在`"http://predic8.com/wsdl/material/ArticleService/1/"`命名空间中生成顶部节点除外。请注意，“模板”中存在的其他命名空间没有被使用，可以安全地省略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:00:17.703

此解决方案要求您稍微重新组织 XPATH 输入信息，并允许进行两步转换。第一个转换将编写样式表，该样式表将在第二个转换中执行 - 因此客户端需要执行两次 XSLT 引擎调用。让我们知道这是否有问题。

## 第一步

请像这样将您的 XPATH 信息重新组织成一个 XML 文档。这应该不难做到，甚至可以编写一个 XSLT 脚本来完成这项工作。

```
<paths>
 <rule>
  <match>article[1]/id[1]</match>
  <namespaces>
   <namespace prefix="ns1">http://predic8.com/wsdl/material/ArticleService/1/</namespace>
   <!-- The namespace node declares a namespace that is used in the match expression.
        There can be many of these. It is not required to define the s11: namespace,
        nor the ns1 namespace. -->
  </namespaces>
  <replacement>1</replacement>
 </rule> 
 <rule>
  <match>article[1]/description[1]</match>
  <namespaces/>
  <replacement>bar</replacement>
 </rule>
 ... etc ...
</paths> 
```

## 解决方案约束

在上述规则文档中，我们受到限制，因此：

1.  匹配是隐式前缀“表达式：/create/”。不要明确表示。
2.  所有匹配必须像 article[n] 一样开始，其中 n 是某个序数。
3.  我们不能有零规则。
4.  您在匹配中使用的任何前缀，除了 s11="http://schemas.xmlsoap.org/soap/envelope/" 和 ns1="http://predic8.com/wsdl/material/ArticleService/1/" . （注意：我认为命名空间以“/”结尾是无效的 - 但不确定），是在命名空间节点中定义的。

以上是第一步转换的输入文档。将此文档应用于此样式表...

```
<xsl:stylesheet version="2.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
      xmlns:step2="http://www.w3.org/1999/XSL/Transform-step2"
      xmlns:s11="http://schemas.xmlsoap.org/soap/envelope/"                       
      xmlns:ns1="http://predic8.com/wsdl/material/ArticleService/1/"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes='xsl'>
<xsl:output method="xml" indent="yes" encoding="UTF-8" />
<xsl:namespace-alias stylesheet-prefix="step2" result-prefix="xsl"/>

<xsl:template match="/">
 <step2:stylesheet version="2.0">
 <step2:output method="xml" indent="yes" encoding="UTF-8" />

  <step2:variable name="replicated-template" as="element()*">
   <step2:apply-templates select="/" mode="replication" />
  </step2:variable>

  <step2:template match="@*|node()" mode="replication">
     <step2:copy>
        <step2:apply-templates select="@*|node()" mode="replication" />
     </step2:copy>
  </step2:template>

  <step2:template match="/s11:Envelope/s11:Body/ns1:create/article" mode="replication">
   <step2:variable name="replicant" select="." />  
    <step2:for-each select="for $i in 1 to
       {max(for $m in /paths/rule/match return
        xs:integer(substring-before(substring-after($m,'article['),']')))}
          return $i">
   <step2:for-each select="$replicant">
       <step2:copy>
        <step2:apply-templates select="@*|node()" mode="replication" />
       </step2:copy>
      </step2:for-each>   
     </step2:for-each>    
  </step2:template>

  <step2:template match="@*|node()">
   <step2:copy>
    <step2:apply-templates select="@*|node()"/>
   </step2:copy>
  </step2:template> 

  <step2:template match="/">
   <step2:apply-templates select="$replicated-template" />
  </step2:template>

  <xsl:apply-templates select="paths/rule" /> 
 </step2:stylesheet>
</xsl:template>

<xsl:template match="rule">
 <step2:template match="s11:Envelope/s11:Body/ns1:create/{match}">
  <xsl:for-each select="namespaces/namespace">
   <xsl:namespace name="{@prefix}" select="." />
  </xsl:for-each>
  <step2:copy>
   <step2:apply-templates select="@*"/>
   <step2:value-of select="'{replacement}'"/>
   <step2:apply-templates select="*"/>
  </step2:copy>
 </step2:template>
</xsl:template>

</xsl:stylesheet> 
```

## 第二步

将您的soap 信封文件作为输入文档应用到第一步输出的样式表。结果是原始的soap 文档，根据需要进行了更改。这是第二步样式表的示例，为了简化说明，只考虑了第一条规则 (/create/article[1]/id => 1)。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:s11="http://schemas.xmlsoap.org/soap/envelope/"
                version="2.0">
   <xsl:output method="xml" indent="yes" encoding="UTF-8"/>
   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
   <xsl:template xmlns:ns1="http://predic8.com/wsdl/material/ArticleService/1/"
                 match="/s11:Envelope/s11:Body/ns1:create[1]/article[1]/id[1]">
      <xsl:copy>
         <xsl:apply-templates select="@*"/>
         <xsl:value-of select="'1'"/>
         <xsl:apply-templates select="*"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

## 更多解决方案约束

1.  模板文档必须至少包含一个 /s11:Envelope/s11:Body/ns1:create/article 。根据规则的要求，仅（深度）复制文章节点。除此之外，它可以是任何结构。
2.  模板文档不能包含 s11:Envelope/s11:Body/ns1:create 节点的嵌套层级。

## 解释

您会注意到您的 XPATH 表达式与模板的匹配条件相差不远。因此，编写一个将 XPATH 和替换值重新表达为模板规则的样式表并不难。在编写样式表编写样式表时，xsl:namespace-alias 使我们能够区分“xsl: *”作为指令和“xsl:* ”作为预期输出。当 XSLT 3.0 出现时，我们很可能能够将此算法简化为一步，因为它将允许动态 XPATH 评估，这确实是您问题的核心。但目前我们必须满足于两步过程。

第二个样式表是一个两阶段的转换。第一阶段从文章级别复制模板，根据规则的需要多次复制。第二阶段解析这个复制的模板，并应用动态规则替换 XPATH 指示的文本值。

* * *

## 更新

我原来的帖子错了。感谢 Dimitre 指出错误。请在上面找到更新的解决方案。

## 三思而后行

如果两步解决方案太复杂，而且你是在wintel平台上运行，你可以考虑购买Saxon的商业版。我相信商业版具有动态XPATH评估功能。我不能给你这样的解决方案，因为我没有商业版。我想使用 evaluate() 函数的解决方案会简单得多。XSLT 对我来说只是一种爱好。但是，如果您将 XSLT 用于商业目的，则价格相当合理。

# javascript - Ember.js 车把 if, else 语句

> ID：11385326
> 
> 赞同：1
> 
> 时间：2012-07-08T17:53:38.653
> 
> 标签：javascript, ember.js, handlebars.js

我希望有人能解释我在这里做错了什么。我正在使用带有把手模板的 Ember.js，我尝试了多种方法来让把手 #if else 为我工作，但它总是返回 if 和 else 的内容。这是我目前正在使用的代码。

应用程序.js：

```
App = Ember.Application.create({
  selectedView: "Home",
  IsHome: function() {
    this.get('selectedView') === 'Home'
}.property('selectedView')

}); 
```

index.html 头包含：

```
<script type="text/x-handlebars" data-template-name="home-view">
      Hello, This is the home view.
</script>
<script type="text/x-handlebars" data-template-name="edit-account">
      Hello, This is the account edit view.
</script> 
```

在体内：

```
<script type="text/x-handlebars">
{{#if App.IsHome}}
   {{view HomeView}}
{{else}}
  {{view editAccountView}}
{{/if}}
</script> 
```

这最终会在页面正文中显示两个视图。任何建议表示赞赏，

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T23:13:59.187

问题的根本原因是 Handlebars 视图助手（ {{view MyView}} ）需要一个 Ember“类”的路径参数，而不是类的实例。要创建视图类，请`extend`使用`Ember.View`. Handlebars 视图助手将实例化您的视图类并将其附加到文档中。

`extend`有关 Ember 对象模型以及 Ember和`create`方法 之间差异的更多信息，请参阅这篇文章：http: [//ember-object-model.notlong.com](http://ember-object-model.notlong.com)。

这是您的示例，其中进行了一些更改以纠正我上面提出的观点。[http://jsfiddle.net/ethan_selzer/kcjzw/217/](http://jsfiddle.net/ethan_selzer/kcjzw/217/)

问候，

伊森

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T20:32:41.280

那是因为您要手动附加两个视图（`homeView`和） 。`editAccountView``appendTo`

此外，避免在 App`create()`函数中定义视图。因此，创建您的应用程序：

```
App = Ember.Application.create({
  ready: function() {
    App.MainView.create().append();
  }
}); 
```

`App.MainView`您的顶级视图在哪里定义：

```
App.MainView = Ember.View.extend({
  templateName: 'main-view',

  selectedView: "Home",
  isHome: function() {
    this.get('selectedView') === 'Home'
  },

  homeView: Ember.View.extend({ 
    templateName: 'home-view'
  }),

  editAccountView: Ember.View.extend({ 
    templateName: 'edit-account'
  })
}); 
```

使用车把模板：

```
<script type="text/x-handlebars" data-template-name="main-view">
  {{#if view.isHome}}
     {{view view.homeView}}
  {{else}}
    {{view view.editAccountView}}
  {{/if}}
</script> 
```

# c++ - 使用 boost 运行 LD_PRELOAD 时出错

> ID：11385327
> 
> 赞同：0
> 
> 时间：2012-07-08T17:53:52.963
> 
> 标签：c++, boost, ld-preload

我编译了使用 boost (locks.hpp) 的 LD_PRELOAD。编译成功。我将此 LD_PRELOAD 复制到其他 linux 服务器，当我运行时，错误：

> /usr/bin/java：符号查找错误：/test/test.so：未定义符号：_ZN5boost11this_thread20disable_interruptionC1Ev

我怎样才能解决这个问题？如果不在此服务器上安装 boost，我可以避免这个问题吗？

我如何编译 LD_PRELOAD：

```
g++ -fPIC -m32  -shared -Wl,-soname,test.so -ldl -o test.so test.cpp 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:08:52.240

看来你必须`libboost_thread`进入你的`test.so`文件。类似于以下内容：

```
g++ -fPIC -m32  -shared -Wl,-soname,test.so -ldl -o test.so test.cpp \ 
  /usr/lib/libboost_thread.a -lpthread 
```

因为我不知道你的系统的细节，所以 boost 库可能与我的不同。

# c - C 程序与共享库链接而不设置 LD_LIBRARY_PATH

> ID：11385331
> 
> 赞同：5
> 
> 时间：2012-07-08T17:54:42.027
> 
> 标签：c, gcc, compiler-construction

我正在阅读 GCC 简介，它说一个包是否同时具有 .a 和 .so。gcc 更喜欢共享库。默认情况下，加载器仅在一组预定义的系统目录中搜索共享库，例如`/usr/local/lib`和`/usr/lib`。如果库不在这些目录之一中，则必须将其添加到加载路径，或者您需要使用`-static`选项强制它使用 .a 库。但是，我尝试了以下方法：

vim你好.c：

```
#include <gmp.h>
#include <stdio.h>

int main() {
        mpz_t x;
        mpz_init(x);
        return 0;
}

gcc hello.c -I/opt/include -L/opt/lib -lgmp  (my gmp library is in opt)
./a.out 
```

它运行。这本书说它应该有以下错误：

```
./a.out: error while loading shared libraries:
libgdbm.so.3: cannot open shared object file:
No such file or directory 
```

（好吧，这本书以 GDBM 为例，但我使用了 GMP，但这没关系吧？）

但是，我没有设置`LD_LIBRARY_PATH=/opt/lib`，并且如您所见，我也没有使用`-static`选项，但`a.out`仍然运行。

你们能告诉我为什么并告诉我如何得到书中描述的错误吗？是的，我想要这个错误，所以我会理解我误解了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:18:37.497

从您对我的评论的回复中：

```
linux-gate.so.1 => (0xb7746000)
libgmp.so.10 => /usr/lib/i386-linux-gnu/libgmp.so.10 (0xb76c5000)
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb7520000)
/lib/ld-linux.so.2 (0xb7747000) 
```

因此，您的程序正在从`/usr/lib`.

您可以尝试做的是重命名您的库中的库`/opt/lib`，并链接到新名称。

```
mv /opt/lib/libgmp.so /opt/lib/libgmp-test.so
gcc hello.c -I/opt/include -L/opt/lib -lgmp-test 
```

然后尝试运行程序。此外，将`ldd`新的结果`a.out`与您之前得到的结果进行比较。

# logging - 所有查询都因“错误：意外”而失败

> ID：11385333
> 
> 赞同：0
> 
> 时间：2012-07-08T17:54:51.667
> 
> 标签：logging, google-bigquery

对我的一个 BigQuery 表的所有查询都失败并出现以下错误：

```
Query Failed
Error: Unexpected. Please try again. 
```

他们需要大约 60 秒才能运行然后失败。全部通过网络界面。任何想法可能会发生什么？

这是一个不起作用的基本查询：

```
SELECT timestamp FROM [streaklogsdataset.log_371af6_00000001340064000000_00000001342656000000] order by timestamp desc limit 10 
```

如果我对任何公共数据集运行基本查询，它们都可以正常工作。我想知道是否可能是我每 2 分钟将数据附加到表中。

**更新**

现在似乎只是在相同的查询上偶尔发生。有时它可以工作，有时它会失败（在尝试查询 60 秒左右之后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:18:14.707

我查看了这些错误，似乎在访问基础数据时出现了暂时性问题。我已经提交了一个内部错误并将进一步调查，但如果您继续看到问题，请告诉我。

# build - 简单的gradle构建文件构建错误

> ID：11385342
> 
> 赞同：4
> 
> 时间：2012-07-08T17:56:36.283
> 
> 标签：build, gradle

我正在尝试几个 gradle 基础知识。这是我的 gradle 文件“build.gradle”的样子：

```
task hello
{
    doLast
    {
        println 'Hello World!'
    }
} 
```

这会导致以下错误：

```
D:\DevAreas\learn-gradle>gradle -q hello

FAILURE: Build failed with an exception.

* Where:
Build file 'D:\DevAreas\learn-gradle\build.gradle' line: 2

* What went wrong:
Could not compile build file 'D:\DevAreas\learn-gradle\build.gradle'.
> startup failed:
  build file 'D:\DevAreas\learn-gradle\build.gradle': 2: Ambiguous expression could be a parameterle
ss closure expression, an isolated open code block, or it may continue a previous statement;
   solution: Add an explicit parameter list, e.g. {it -> ...}, or force it to be treated as an open
block by giving it a label, e.g. L:{...}, and also either remove the previous newline, or add an exp
licit semicolon ';' @ line 2, column 1.
     {
     ^

  1 error

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more l
og output. 
```

如果我像这样对构建文件进行小的修改

> [请注意，我已将括号从第二行移至第一行]

```
task hello{
    doLast
    {
        println 'Hello World!'
    }
} 
```

我看到了输出

```
Hello World! 
```

没有问题。

括号在gradle中是个大问题吗？通过将括号放在第二行中，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T18:11:50.480

与使用分号推断的其他语言一样，换行符在 Groovy 中有所不同。第一个片段被解析为`task hello; { ... }`，这是不明确的（无法确定第二个语句是块还是闭包），因此 Groovy 语法无效。无论如何，这不是您想要的。您希望闭包与`hello`任务相关联。为避免此类意外，我建议遵循 Java 大括号样式。

# spring-mvc - 使用 Spring Controller 下载文件

> ID：11385347
> 
> 赞同：0
> 
> 时间：2012-07-08T17:57:15.567
> 
> 标签：spring-mvc

我的问题是关于使用 Spring MVC 将文件从服务器下载到用户的机器。

假设 html 或 jsp 的代码打开浏览器文件下载对话框，供用户选择文件夹和文件名以从服务器保存文件。Spring 控制器需要做什么才能正确处理这个请求？

我了解如何使用如下映射映射方法来捕获下载请求： **@RequestMapping(value="/download-url", method = RequestMethod.GET)**

**public ModelAndView saveFile(地图模型){**

我的问题是，控制器应该如何从模型中提取文件名和文件内容以将其保存到本地文件系统？

非常感谢任何代码示例，尤其是保存 .csv 文件（逗号分隔）以便在 excel 中打开，谢谢。

# jsp - 动态生成的 .jsp 文件：使用 jetty-maven-plugin 的 PWC6117 错误

> ID：11385349
> 
> 赞同：1
> 
> 时间：2012-07-08T17:57:22.900
> 
> 标签：jsp, spring-mvc, jetty, embedded-jetty, maven-jetty-plugin

我使用 Spring MVC、Maven 和 jetty-maven-plugin 插件 (7.6.2.v20120308) 在本地开发。

我知道你们中的一些人会认为这不是一个好主意，但我会自动生成一些 .jsp 文件。例如，我有一个我想要动态的**dyn.js文件，以包含 JSTL/EL 代码。**

简而言之，这就是我所做的：

*   如果动态 dyn.js 被调用并且解释的缓存版本还不存在，我将请求重定向到一个特殊的控制器。

*   控制器获取 dyn.js文件的内容，并在我的其他 .jsp 文件所在的同一目录中创建一个包含此内容的**dyn.js.jsp文件。**我在运行时使用以下内容获取该目录：

    ```
    getServletContext().getRealPath("/") + File.separator + "WEB-INF" + File.separator + "tags" 
    ```

*   生成 jsp 文件后，我的控制器会返回视图路径（或 ModelAndView），以便可以处理视图。

*   最终呈现视图后，我将获得结果内容（使用过滤器中的自定义响应包装器），并将其保存到缓存文件中。

这个方法很好用！我很满意。

唯一的问题是，有时在尝试生成动态 dyn.js 时会出现此错误：

```
Jul 8, 2012 5:15:12 PM org.apache.jasper.servlet.JspServlet _serviceJspFile
SEVERE: PWC6117: File "C:\somepath\src\main\webapp\WEB-INF\tags\dyn.js.jsp" not found 
```

发生这种情况时，无事可做。即使我刷新页面，jsp 也永远找不到，所以我的 dyn.js 不起作用。然后我检查并发现 .jsp 文件**确实存在**于我的文件系统中（C:\somepath\src\main\webapp\WEB-INF\tags\dyn.js.jsp）！

这个问题似乎是随机发生的。我无法随意重现该问题。我会说它发生在 1/5 的时间里。

在某些情况下，Jetty 似乎无法“看到”生成的 .jsp 文件。

知道什么会触发此问题以及如何解决它吗？

更新：我使用 jetty-maven-plugin 版本 7.6.2.v20120308 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T17:25:11.117

我认为问题出在文件路径上。当您在控制台上复制路径并将其粘贴到 Windows 资源管理器上时，您无法打开该路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:22:07.297

对于那些感兴趣的人，我想我找到了解决方法。*在第一个请求*似乎可以解决问题之前创建临时 .jsp 文件，即使其中没​​有内容。

因此，当应用程序启动时，我有一个钩子可以创建内容为空的动态 .jsp 文件。

# android - Android 上的 libspotify.so.12.1.51 段错误

> ID：11385353
> 
> 赞同：2
> 
> 时间：2012-07-08T17:57:48.997
> 
> 标签：android, spotify, android-ndk

我已经修改了自动点唱机示例以在 Android 上运行，但是在尝试调用 sp_session_create() 函数时它会出现段错误。

基本上 - 我有一个带有按钮的 helloworld Android 应用程序。当按下它时，它会调用这个函数，该函数在 sp_session_create() 上崩溃：

```
JNIEXPORT void JNICALL Java_com_holidaystudios_unispot_uniSpot_prepareSpotify() {
    sp_session *sp;
    sp_error err;
    const char *username = NULL;
    const char *password = NULL;

    username = __USERNAME;
    password = __PASSWORD;
    g_listname = __PLAYLIST;

    UNISPOT_DEBUG("prepareSpotify() - 1\n");
    audio_init(&g_audiofifo);
    UNISPOT_DEBUG("prepareSpotify() - 2\n");

    /* Create session */
    spconfig.application_key_size = g_appkey_size;
    UNISPOT_DEBUG("prepareSpotify() - 3 %d, %p, %p (%p)\n", g_appkey_size, &spconfig, &sp, sp_session_create);

    err = sp_session_create(&spconfig, &sp);
    UNISPOT_DEBUG("prepareSpotify() - 4\n");
.
.
. 
```

这是显示段错误的 logcat 输出：

```
I/UNISPOT|NDK( 5951): prepareSpotify() - 1
I/UNISPOT|NDK( 5951): prepareSpotify() - 2
I/UNISPOT|NDK( 5951): prepareSpotify() - 3 321, 0x575115ac, 0xbec4052c (0x5b4107b4)
F/libc    ( 5951): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)
I/DEBUG   (31750): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (31750): Build fingerprint: 'google/yakju/maguro:4.0.4/IMM76I/330937:user/release-keys'
I/DEBUG   (31750): pid: 5951, tid: 5951  >>> com.holidaystudios.unispot <<<
I/DEBUG   (31750): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
I/DEBUG   (31750):  r0 0155d708  r1 4006162c  r2 00000000  r3 5b47add8
I/DEBUG   (31750):  r4 0155d708  r5 5b47e740  r6 57508d48  r7 0155d708
I/DEBUG   (31750):  r8 bec40460  r9 bec4052c  10 0155d768  fp 0155d768
I/DEBUG   (31750):  ip 40061474  sp bec40340  lr 5b410a7c  pc 5b4104f4  cpsr 60000010
I/DEBUG   (31750):  d0  00656c6f736e6f63  d1  72616364732f2061
I/DEBUG   (31750):  d2  61726f74532f2f63  d3  7865646e692f6568
I/DEBUG   (31750):  d4  0000000000000000  d5  0000000000000000
I/DEBUG   (31750):  d6  0000000000000000  d7  00f92b8000000000
I/DEBUG   (31750):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (31750):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (31750):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (31750):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (31750):  d16 416f257010000000  d17 3fe0000000000000
I/DEBUG   (31750):  d18 0000000000000000  d19 3fe5555560000000
I/DEBUG   (31750):  d20 0000000000000000  d21 0000000000000000
I/DEBUG   (31750):  d22 3ff0000000000000  d23 0000000000000000
I/DEBUG   (31750):  d24 0000000000000000  d25 3fe5555560000000
I/DEBUG   (31750):  d26 0000000000000000  d27 3fe5555560000000
I/DEBUG   (31750):  d28 0000000000000000  d29 3ff0000000000000
I/DEBUG   (31750):  d30 3ff0000000000000  d31 be23e4f5df600000
I/DEBUG   (31750):  scr 80000013
I/DEBUG   (31750): 
I/DEBUG   (31750):          #00  pc 0016b4f4  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750):          #01  lr 5b410a7c  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750): 
I/DEBUG   (31750): code around pc:
I/DEBUG   (31750): 5b4104d4 e59f50ac e59f30ac e08f5005 e7953003  .P...0...P...0..
I/DEBUG   (31750): 5b4104e4 e5902004 e2833008 e5803000 e1a04000  . ...0...0...@..
I/DEBUG   (31750): 5b4104f4 e5923000 e1a00002 e1a0e00f e593f178  .0..........x...
I/DEBUG   (31750): 5b410504 e5943004 e3530000 0a000005 e3a02000  .0....S...... ..
I/DEBUG   (31750): 5b410514 e1a00003 e5842004 e5933000 e1a0e00f  ..... ...0......
I/DEBUG   (31750): 
I/DEBUG   (31750): code around lr:
I/DEBUG   (31750): 5b410a5c ebfaaa07 e5c7822c e1a00007 ebfffdec  ....,...........
I/DEBUG   (31750): 5b410a6c e3500000 1a000005 e1a00007 ebfffe94  ..P.............
I/DEBUG   (31750): 5b410a7c e1a00007 ebfc951c e3a04002 ea00009d  .........@......
I/DEBUG   (31750): 5b410a8c e1a01006 e4d13001 e5c73064 e3a02080  .....0..d0... ..
I/DEBUG   (31750): 5b410a9c e2870065 ebfaa8ee e3a020c0 e2861081  e........ ......
I/DEBUG   (31750): 
I/DEBUG   (31750): stack:
I/DEBUG   (31750):     bec40300  0155d9c8  [heap]
I/DEBUG   (31750):     bec40304  5b37f080  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750):     bec40308  0155d708  [heap]
I/DEBUG   (31750):     bec4030c  5b47e740  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750):     bec40310  57508d48  /data/data/com.holidaystudios.unispot/lib/liblespot.so
I/DEBUG   (31750):     bec40314  5b410230  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750):     bec40318  00000400  
I/DEBUG   (31750):     bec4031c  bec40460  [stack]
I/DEBUG   (31750):     bec40320  bec4052c  [stack]
I/DEBUG   (31750):     bec40324  0155d768  [heap]
I/DEBUG   (31750):     bec40328  0155d768  [heap]
I/DEBUG   (31750):     bec4032c  5b33f988  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750):     bec40330  00000000  
I/DEBUG   (31750):     bec40334  00040000  
I/DEBUG   (31750):     bec40338  df0027ad  
I/DEBUG   (31750):     bec4033c  00000000  
I/DEBUG   (31750): #00 bec40340  575115ac  /data/data/com.holidaystudios.unispot/lib/liblespot.so
I/DEBUG   (31750):     bec40344  5b47e740  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750):     bec40348  57508d48  /data/data/com.holidaystudios.unispot/lib/liblespot.so
I/DEBUG   (31750):     bec4034c  5b410a7c  /data/data/com.holidaystudios.unispot/lib/libspotify.so
I/DEBUG   (31750):     bec40350  00000000  
I/DEBUG   (31750):     bec40354  57e90026  /system/framework/framework.odex
I/DEBUG   (31750):     bec40358  41678018  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (31750):     bec4035c  bec404e4  [stack]
I/DEBUG   (31750):     bec40360  00000000  
I/DEBUG   (31750):     bec40364  00010001  
I/DEBUG   (31750):     bec40368  00000000  
I/DEBUG   (31750):     bec4036c  00000000  
I/DEBUG   (31750):     bec40370  416a9ee8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (31750):     bec40374  416a9ee8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (31750):     bec40378  41678018  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (31750):     bec4037c  00000024  
I/DEBUG   (31750):     bec40380  01303740  [heap]
I/DEBUG   (31750):     bec40384  408a39b8  
I/BootReceiver(  189): Copying /data/tombstones/tombstone_00 to DropBox (SYSTEM_TOMBSTONE)
I/WindowManager(  189): WIN DEATH: Window{416abe40 com.holidaystudios.unispot/com.holidaystudios.unispot.uniSpot paused=false}
I/ActivityManager(  189): Process com.holidaystudios.unispot (pid 5951) has died. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:22:42.280

我将其发布为答案，因为似乎我需要更多的声誉来回答评论，但是，为了回答@KurtCobain 的请求：您还需要确保您的`cache_location`and`settings_location`指向您的 android 设备上有效的、可写的位置。这些变量的 spotify 示例中的默认值为**"tmp"**。这将不起作用，并且会导致您的应用程序崩溃。

相反（至少作为一个临时的、直接的解决方案），您可以`Context.getCacheDir`在您的活动中使用类似的东西来检索有效的临时文件夹，并在您的 C 代码中使用此值（有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/7595324/creating-temporary-files-in-android-with-ndk?lq=1)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:57:45.907

我终于弄清楚了问题所在。如果您的 AndroidManifest.xml 没有请求 INTERNET 权限（可能还有 WRITE_EXTERNAL_STORAGE），它将崩溃...不幸的是 libspotify 不会对创建套接字执行任何检查，因此会崩溃...我想说这实际上是 libspotify 中的一个错误。 .. 但是无论如何 - 如果您遇到与我相同的问题，这就是您需要添加到 AndroidManifest.xml 中的内容：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

可能还有这个：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# cucumber - Cucumber：每个特征单独通过，但不能一起通过

> ID：11385358
> 
> 赞同：0
> 
> 时间：2012-07-08T17:58:55.073
> 
> 标签：cucumber, capybara

我正在编写一个 Rails 3.1 应用程序，并且我有一组三个黄瓜功能文件。单独运行时，如：

```
cucumber features/quota.feature
-- or --
cucumber features/quota.feature:67  # specifying the specific individual test 
```

...每个功能文件运行良好。但是，当它们一起运行时，如下所示：

```
cucumber 
```

...其中一项测试失败。这很奇怪，因为只有*一项*测试失败了；功能中的所有其他测试都通过了（其中许多都做了类似的事情）。我将此测试放在功能文件中的哪个位置似乎并不重要。如果这是第一次测试或某处的方式，它会失败。

我不认为它可以是测试本身，因为它在单独运行时通过，甚至在整个功能文件单独运行时通过。似乎它必须与一起运行不同的功能文件有关。任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:19:43.123

看起来您的场景之间存在耦合。您的失败场景假定系统处于某种状态。当场景单独运行时，系统处于此状态，因此场景通过。但是，当您运行所有场景时，之前运行的场景会更改此状态，因此会失败。

您应该通过使您的场景完全独立来解决它。任何场景的工作都不应影响其他场景的结果。在[Cucumber Book](https://rads.stackoverflow.com/amzn/click/com/1934356808)和[Specification by Example](https://rads.stackoverflow.com/amzn/click/com/1617290084)中受到高度鼓励。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:34:53.973

我遇到了类似的问题，我花了很长时间才找出根本原因。我正在使用 @selenium 标签在 selenium 客户端上测试 JQuery 脚本。我的页面有一个发送 POST 请求的 ajax 调用。我在 javascript 中有一个错误，并且发布请求失败。（功能不完整，我还没有编写步骤来验证ajax调用的结果。）这个错误记录在`Capybara.current_session.server.error`. 当执行以下非硒功能时，Capybara 中的 Before 挂钩称为`Capybara.reset_sessions!` This then 调用

```
def reset!
  driver.reset! if @touched
  @touched = false
  raise @server.error if @server and @server.error
ensure
  @server.reset_error! if @server
end 
```

`@server.error` was not nil for each scenario in the following feature(s) and Cucumber reported each step as skipped. The solution in my case was to fix the ajax call. So Andrey Botalov and Doug Noel were right. I had carry over from an earlier feature. I had to keep debugging until I found the exception that was being raised and investigate what was generating it. I hope this helps someone else that didn't realise they had carry over from an earlier feature.

# python - 如何调试 python 模块加载？

> ID：11385360
> 
> 赞同：1
> 
> 时间：2012-07-08T17:59:08.123
> 
> 标签：python, plugins, python-3.2

我正在尝试将[cwiid](https://github.com/abstrakraft/cwiid)从 python 2.7 移植到 3.2。它使用了很多不推荐使用的东西，所以我必须更改很多东西才能让它与 3.2 一起使用。现在我因为加载错误而被卡住了。使用 python 3.2 环境和安装到包 repo 的库，我这样做：

```
prompt: echo "import cwiid" | python -
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: dynamic module does not define init function (PyInit_cwiid) 
```

除了在源代码中盲目搜索之外，**python 还期望 PyInit_cwiid**方法在哪里？

例如，在源代码中，`py_plugin.c`其中包含一个`py_init`方法。

# javascript - 一旦用户在 Jquery Mobile 中离开页面，如何恢复默认 HTML 元素？

> ID：11385363
> 
> 赞同：1
> 
> 时间：2012-07-08T17:59:27.577
> 
> 标签：javascript, jquery, jquery-mobile, default

我有一个带有占位符内容块的页面。加载页面后，我将用一些 AJAX 内容替换默认块，这些内容要么默认加载，要么通过用户交互加载。

我正在替换加载的内容，如下所示：

```
// inside AJAX success handler
// data is JSON string sent via AJAX
// target is the element containing my default content

var makeUp = data;

target.addClass('fade out').html( makeUp ).trigger('create')
        .removeClass('fade out').addClass('fade in') 
```

这很好用，只要用户在页面上做某事，我就可以替换内容。

但是，如果用户离开页面并在它仍在 DOM 中时返回，我想显示默认内容。现在，最后一个 AJAX 内容是可见的。所以我正在寻找绑定到页面隐藏并从某处恢复默认内容。

**问题：**
在页面上存储默认内容的最佳方式是什么。它并不多（1 个控制组，2 个文本块），但我不愿意将它作为数据默认字符串添加到包装容器中。肯定有更好的办法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:05:16.703

根据这个[CanIUse](http://caniuse.com/#search=web%20storage)页面，您应该能够使用 HTML5 的[网络存储](http://www.w3schools.com/html5/html5_webstorage.asp)功能来存储一些值 - 我正在专门研究一些可能与您相关的移动浏览器。

这些值可以是一些关键字，它们将允许您检索文本块并填充占位符，或者如果它足够小，您可以自己存储和检索两个文本块。

# javascript - 在Javascript错误中将未定义转换为对象

> ID：11385365
> 
> 赞同：-2
> 
> 时间：2012-07-08T18:00:00.183
> 
> 标签：javascript, undefined

这里有 3 个函数：MakeNPC、CreateNPC 和 NPCAI。CreateNPC 在启动时运行一次并向 MakeNPC 发送数据，以便它们出现在游戏中。NPCAI 每秒运行一次，使 NPC 在游戏中移动。当 CreateNPC 调用 MakeNPC 时，一切正常。问题是当 MakeNPC 函数收到来自 NPCAI 的调用时，会发生错误：无法将未定义转换为对象。

Firebug报告错误的行在MakeNPC的第一行：

```
 Previous_bead_NPC[NPCid][0] = x; 
```

这是这三个函数的完整代码。我浪费了一整天的时间来解决这个问题，我随时都想哭着入睡:(

```
var Previous_bead_NPC = new Array(10);
for (var i = 0; i < 10; i++)
{
    Previous_bead_NPC[i] = new Array(7);
};

var NPC = new Array(10);
for (var i = 0; i < 10; i++)
{
    NPC[i] = new Array(7);

};

var MakeNPC = function (x, y, c, g, NPCid, dx, dy, s) 
{
"use strict";
    Previous_bead_NPC[NPCid][0] = x;
    Previous_bead_NPC[NPCid][1] = y;
    Previous_bead_NPC[NPCid][2] = PS.BeadColor(x, y);
    Previous_bead_NPC[NPCid][3] = PS.BeadGlyph(x, y);

    PS.BeadColor(x, y, c);
    PS.BeadData(x, y, "blocked");
    PS.BeadGlyph(x, y, g);  

    NPC[NPCid][0] = x; //x
    NPC[NPCid][1] = y; //y
    NPC[NPCid][2] = c; //color
    NPC[NPCid][3] = g; //glyph
    NPC[NPCid][4] = dx; //destination x
    NPC[NPCid][5] = dy; //destination y
    NPC[NPCid][6] = s; //status - 0: arrived, 1: en route
};

var CreateNPC = function ()
{
"use strict";
var i;
for (i = 0; i < 10; i++)
{
    var x = PS.Random (30);
    var y = PS.Random (30);
    var c = COLOR.human;
    var g = " ";

    var r = PS.Random (100);

    if (r < 50)
    {
        c = COLOR.human;
    }
        else if (r < 75)
            {
                c = COLOR.nigro;
            }
            else 
                {
                    c = COLOR.asian;
                }

    r = PS.Random (19);
    g = letters[r];

    while (PS.BeadData(x, y) === "blocked")
    {
        x = PS.Random (30);
        y = PS.Random (30);
    }

    MakeNPC(x, y, c, g, i, x, y, 0);
}
};

// NPC pathfinding
var NPCAI = function(NPCid)
{
"use strict";
//choosing destination for NPC  
if (NPC[NPCid][6] == 0)
{
    var r = PS.Random (100);

    if (r < 10)
    {
        NPC[NPCid][4] = locations[0][0];
        NPC[NPCid][5] = locations[0][1];
    }
    else if (r < 20)
        {
            NPC[NPCid][4] = locations[1][0];
            NPC[NPCid][5] = locations[1][1];
        }
        else if (r < 30)
            {
                NPC[NPCid][4] = locations[2][0];
                NPC[NPCid][5] = locations[2][1];
            }
            else if (r < 40)
                {       
                    NPC[NPCid][4] = locations[3][0];
                    NPC[NPCid][5] = locations[3][1];
                }
                else if (r < 50)
                    {           
                        NPC[NPCid][4] = locations[4][0];
                        NPC[NPCid][5] = locations[4][1];
                    }
                    else if (r < 60)
                        {           
                            NPC[NPCid][4] = locations[5][0];
                            NPC[NPCid][5] = locations[5][1];
                        }
                            else if (r < 70)
                            {           
                                NPC[NPCid][4] = locations[6][0];
                                NPC[NPCid][5] = locations[6][1];
                            }
                                else if (r < 80)
                                {           
                                    NPC[NPCid][4] = locations[7][0];
                                    NPC[NPCid][5] = locations[7][1];
                                }
                                    else if (r < 90)
                                    {               
                                        NPC[NPCid][4] = locations[8][0];
                                        NPC[NPCid][5] = locations[8][1];
                                    }
                                        else if (r < 100)
                                        {                   
                                            NPC[NPCid][4] = locations[9][0];
                                            NPC[NPCid][5] = locations[9][1];
                                        }

    //checking if NPC isn't already at its destination
    if (NPC[NPCid][4] == NPC[NPCid][0] && NPC[NPCid][5] == NPC[NPCid][1])
    {
        NPC[NPCid][6] = 0;
    }
    else
    {
        NPC[NPCid][6] = 1;
    }
}

//pathfinding logic
if (NPC[NPCid][6] == 1)
{

    var pointAx = NPC[NPCid][0]; //current position x
    var pointAy = NPC[NPCid][1]; //current position y

    var pointBx = NPC[NPCid][4]; //destination x 
    var pointBy = NPC[NPCid][5]; //destination y

    var adjacent_squareNx = pointAx; 
    var adjacent_squareNy = pointAy - 1;

    var adjacent_squareEx = pointAx + 1; 
    var adjacent_squareEy = pointAy;

    var adjacent_squareSx = pointAx; 
    var adjacent_squareSy = pointAy + 1;

    var adjacent_squareWx = pointAx - 1; 
    var adjacent_squareWy = pointAy;

    var G = new Array(4); //cost of moving to given adjacent square
    var H = new Array(4); //cost of movimg to pointB from given adjacent square
    var F = new Array(4); //total cost of a move = G + H

    G[0] = 10; //N      
    G[1] = 10; //E      
    G[2] = 10; //S      
    G[3] = 10; //W

    H[0] = 10*(Math.abs(adjacent_squareNx-pointBx)+Math.abs(adjacent_squareNy-pointBy));        
    H[1] = 10*(Math.abs(adjacent_squareEx-pointBx)+Math.abs(adjacent_squareEy-pointBy));
    H[2] = 10*(Math.abs(adjacent_squareSx-pointBx)+Math.abs(adjacent_squareSy-pointBy));        
    H[3] = 10*(Math.abs(adjacent_squareWx-pointBx)+Math.abs(adjacent_squareWy-pointBy));

    F[0] = G[0]+H[0];       
    F[1] = G[1]+H[1];       
    F[2] = G[2]+H[2];
    F[3] = G[3]+H[3];

    var path = Math.min(F[0], F[1], F[2], F[3]); //WARPATH LOL

    //choosing the right path
    if (path == F[0])
    {
        //go N
        if (pointAy > 0) 
        {
            if (!(PS.BeadData(pointAx, pointAy - 1) === "blocked")) 
            {
                // Set bead to Previous State
                PS.BeadColor(pointAx, pointAy, Previous_bead_NPC[NPCid][2]);
                PS.BeadData(pointAx, pointAy, 0);
                PS.BeadGlyph(pointAx, pointAy, " ");                 
                // Increment
                pointAy -= 1;
                // Place NPC
                MakeNPC(pointAx, pointAy, NPC[NPCid][2], NPC[NPCid][3], NPC[NPCid][4], NPC[NPCid][5], 1);
            }
        }
    }
        else if (path == F[1])
            {
                //go E
                if (pointAx < 31) 
                {
                    if (!(PS.BeadData(pointAx + 1, pointAy) === "blocked")) 
                    {
                        // Set bead to Previous State
                        PS.BeadColor(pointAx, pointAy, Previous_bead_NPC[NPCid][2]);
                        PS.BeadData(pointAx, pointAy, 0);
                        PS.BeadGlyph(pointAx, pointAy, " ");                 
                        // Increment
                        pointAx += 1;
                        // Place NPC
                        MakeNPC(pointAx, pointAy, NPC[NPCid][2], NPC[NPCid][3], NPC[NPCid][4], NPC[NPCid][5], 1);
                    }
                }       
            }
                else if (path == F[2])
                    {
                        //go S
                        if (pointAy < 31) 
                        {
                            if (!(PS.BeadData(pointAx, pointAy + 1) === "blocked")) 
                            {
                                // Set bead to Previous State
                                PS.BeadColor(pointAx, pointAy, Previous_bead_NPC[NPCid][2]);
                                PS.BeadData(pointAx, pointAy, 0);
                                PS.BeadGlyph(pointAx, pointAy, " ");                 
                                // Increment
                                pointAy += 1;
                                // Place NPC
                                MakeNPC(pointAx, pointAy, NPC[NPCid][2], NPC[NPCid][3], NPC[NPCid][4], NPC[NPCid][5], 1);
                            }
                        }
                    }
                        else if (path == F[3])
                            {
                                //go W
                                if (pointAx > 0) 
                                    {
                                        if (!(PS.BeadData(pointAx - 1, pointAy) === "blocked")) 
                                            {
                                                // Set bead to Previous State
                                                PS.BeadColor(pointAx, pointAy, Previous_bead_NPC[NPCid][2]);
                                                PS.BeadData(pointAx, pointAy, 0);
                                                PS.BeadGlyph(pointAx, pointAy, " ");                 
                                                // Increment
                                                pointAx -= 1;
                                                // Place NPC
                                                MakeNPC(pointAx, pointAy, NPC[NPCid][2], NPC[NPCid][3], NPC[NPCid][4], NPC[NPCid][5], 1);
                                            }
                                    }       
                            }

}

//checking if NPC has arrived
if (NPC[NPCid][4] == NPC[NPCid][0] && NPC[NPCid][5] == NPC[NPCid][1])
{
    NPC[NPCid][6] = 0;
}
else
{
    NPC[NPCid][6] = 1;
}                               
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:03:07.693

`Previous_bead_NPC`是未定义的，因此不是对象。 `Previous_bead_NPC[NPCid]`当您超过那个时，也将是未定义的。您需要在某些时候定义它们（并且可能`{}`在尝试访问/分配它们的属性之前将空对象 ( ) 分配给它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:12:36.137

对不起，我要打破规则并发布一个离题的 CW 答案。

您可以使用这段代码...

```
var r = PS.Random (100),
    idx = Math.floor(r / 10);

NPC[NPCid][4] = locations[idx][0];
NPC[NPCid][5] = locations[idx][1]; 
```

* * *

...作为整个块的替代品...

```
var r = PS.Random (100);

if (r < 10)
{
    NPC[NPCid][4] = locations[0][0];
    NPC[NPCid][5] = locations[0][1];
}
else if (r < 20)
    {
        NPC[NPCid][4] = locations[1][0];
        NPC[NPCid][5] = locations[1][1];
    }
    else if (r < 30)
        {
            NPC[NPCid][4] = locations[2][0];
            NPC[NPCid][5] = locations[2][1];
        }
        else if (r < 40)
            {       
                NPC[NPCid][4] = locations[3][0];
                NPC[NPCid][5] = locations[3][1];
            }
            else if (r < 50)
                {           
                    NPC[NPCid][4] = locations[4][0];
                    NPC[NPCid][5] = locations[4][1];
                }
                else if (r < 60)
                    {           
                        NPC[NPCid][4] = locations[5][0];
                        NPC[NPCid][5] = locations[5][1];
                    }
                        else if (r < 70)
                        {           
                            NPC[NPCid][4] = locations[6][0];
                            NPC[NPCid][5] = locations[6][1];
                        }
                            else if (r < 80)
                            {           
                                NPC[NPCid][4] = locations[7][0];
                                NPC[NPCid][5] = locations[7][1];
                            }
                                else if (r < 90)
                                {               
                                    NPC[NPCid][4] = locations[8][0];
                                    NPC[NPCid][5] = locations[8][1];
                                }
                                    else if (r < 100)
                                    {                   
                                        NPC[NPCid][4] = locations[9][0];
                                        NPC[NPCid][5] = locations[9][1];
                                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:51:36.510

行前：

```
Previous_bead_NPC[NPCid][0] = x; 
```

你必须定义它将包含数组：

```
Previous_bead_NPC[NPCid] = []; 
```

# jenkins - 自定义 Jenkins 的“构建执行器状态”

> ID：11385368
> 
> 赞同：5
> 
> 时间：2012-07-08T18:00:45.580
> 
> 标签：jenkins, jenkins-plugins

我们有一个大的 RAILS 项目，我们正在遵循 Github 流程来推动我们的开发过程。我查看了所有可用的插件，但找不到任何自定义Jenkins 主页的“**构建执行程序状态”部分的内容。**

我想输入 git 分支的名称而不是作业名称和执行者编号，因为前者在我们的案例中更有意义。有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T11:09:02.180

您可以使用[Build Name Setter Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)根据可用令牌更改名称。我不确定您的 Git 分支名称是否存在 TOKEN，但如果一切都失败了，您可以使用 shell 脚本构建步骤并将其写入属性文件，然后使用宏：${PROPFILE,..} ，例如：

```
#${BUILD_NUMBER}_${PROPFILE,file="parameters.properties",property="BUILD_TYPE"} 
```

或者，您可以使用[Description Setter Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)根据构建输出更改构建描述（也显示在 Build Executor 状态中）。同样，您可以使用相同的技巧并使用 shell 脚本在构建输出中打印出分支名称，并使用正则表达式将其从构建日志中解析出来。

一个小限制：其中任何一个都只会在作业完成后更新名称/描述，因此对于长时间运行的作业，它不会立即可见。但是对于简短的，以及出于审计目的，这很有效。

[编辑] 一段时间后，我开始使用[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)，它足够早地将我的构建参数添加到环境中，以便[构建名称设置](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)器插件使用它们。

这具有立即设置构建名称的优点。

此外，您可以使用 ${GIT_BRANCH}获取**Git 分支。**这是它的文档：

```
${GIT_BRANCH}
  Expands to the name of the branch that was built.

Parameters:

all
  If specified, all the branches that point to the given commit is listed. 
  By default, the token expands to just one of them.

fullName
  If specified, this token expands to the full branch name, such as 'origin/master'.
  Otherwise, it only expands to the short name, such as 'master'. 
```

# c++ - c++使用裸函数

> ID：11385369
> 
> 赞同：6
> 
> 时间：2012-07-08T18:00:57.980
> 
> 标签：c++, windows, visual-c++, assembly, x86

我正在尝试学习 ASM，并想尝试一些与 C++ 相结合的东西。ASM 部分是在一个裸函数中完成的。但是每当我调用函数（空）时，应用程序就会在下一个函数中崩溃。我应该在裸函数中做什么才能使其工作，我需要弹出 esp 什么的吗？一个例子可能会有所帮助。

```
_declspec(naked) void asmfunc()
{
    _asm
    {
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    i = 1;

    asmfunc();

    cout << i << endl; // <-- crash
    system("pause");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-08T18:09:46.357

裸函数将不包含任何编译器生成的序言和结尾代码。这也适用于函数末尾的隐式 return 语句。

这意味着您声明的函数`ret`最后没有指令。一旦控制权转移到`asmfunc`，它就永远不会返回。该函数继续执行该位置存在的任何代码，直到它遇到使其崩溃的东西。

基本上，您的原始实现`asmfunc`作为程序代码中间某处的标签工作。当你调用你的函数时，你实际上是在做一个`goto asmfunc`，即你将控制权转移到某个地方而没有任何返回的希望。

出于这个原因，一个最小的裸函数应该看起来像

```
_declspec(naked) void asmfunc()
{
    _asm
    {
      ret
    }
} 
```

`ret`将指令放入裸函数是您的责任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-28T07:16:05.953

c 语言程序中的裸函数不包含准备函数来执行任务的序言和结尾代码。所以这是你制作序言和尾声代码的工作。在下面的代码中，你会看到我定义了序言和结尾，你可以在那里定义你的汇编代码。

```
__declspec(naked) void NakedFunction() {
    __asm {
        push ebp
        mov ebp, esp
    }

    __asm {
        // write your code here
    }

    __asm {
        leave
        ret
    }
}

int main() {
    NakedFunction();

    return 0x0;
} 
```

# sql-server - SQL Server：“IN”运算符中的表达式

> ID：11385378
> 
> 赞同：0
> 
> 时间：2012-07-08T18:01:55.767
> 
> 标签：sql-server, database

我有商店名称、ID、类型等表格。我也有商店类别（超市、商店、零售商），每个类别都有几种类型（超市 = 大型市场、综合市场等）我想获得所有超市的商店。假设超市是 ShopClass 2。

所以我想写这样的查询：

```
SELECT ShopID, ShopName 
FROM Shops 
WHERE ShopType in (SELECT ShopType FROM ShopClasses WHERE ShopClass = 2) 
```

但不幸的是，该查询不起作用：

> 不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式

是什么原因？AFAIK 我可以在 IN 语句中使用表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:05:32.307

试试这个：

```
SELECT ShopID, ShopName 
FROM Shops AS shopslist 
WHERE shopslist.ShopType in (SELECT ShopType FROM ShopClasses WHERE ShopClass = 2) 
```

# c# - 从 JointCollection 派生一个类

> ID：11385387
> 
> 赞同：1
> 
> 时间：2012-07-08T18:02:54.067
> 
> 标签：c#, kinect, derived-class

我想从类**派生**一个`Microsoft.Kinect.JointCollection`类。

```
public class Derived : JointCollection 
{
    public string NewItem;

    public Derived ()
    {

    }
} 
```

## 错误：

```
The type 'Microsoft.Kinect.JointCollection' has no constructors defined. 
```

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:17:28.317

> 基类对象总是在任何派生类之前构造。因此，基类的构造函数在派生类的构造函数之前执行。

[http://msdn.microsoft.com/en-us/library/ms228387%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms228387%28v=VS.80%29.aspx)

该类`Microsoft.Kinect.JointCollection`不包含公共构造函数 [ [2](http://msdn.microsoft.com/en-us/library/microsoft.kinect.jointcollection_members.aspx) ]，因此无论何时尝试实例化`Derived`它都会失败，因为基类上没有公共构造函数。

您可以考虑用派生类包装`JointCollection`该类，并提供适当的方法来访问它，`Derived`这只不过是`JointCollection`直接调用方法而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:16:06.310

我认为该[错误](http://msdn.microsoft.com/en-us/library/7z6fxc01.aspx)意味着该类仅定义了一个内部构造函数，因此您无法从不同的程序集中对其进行实例化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:16:19.340

问题是您试图从明确设计为禁止这种情况的 cals 派生（这可以通过将所有构造函数设为内部/私有来完成，例如）。

解决方案：不要那样做。如果没有您为什么要这样做的信息，就很难提供替代方案。

# c# - C#中的参数超出范围异常错误

> ID：11385391
> 
> 赞同：0
> 
> 时间：2012-07-08T18:03:12.273
> 
> 标签：c#, winforms, networking

我的方法看起来像这样。[（从这里抓取）](http://dickchiang.blogspot.com/2010/02/getting-foreign-exchange-currency-with.html)

```
private void inetConvert() {
    byte[] buf = new byte[1024];
    string result;
    string xeString = String.Format("http://www.xe.com/ucc/convert.cgi?Amount=1&From={0}&To={1}", srcCurrency, dstCurrency);
    System.Net.WebRequest wreq = System.Net.WebRequest.Create(new Uri(xeString));
    System.Net.WebResponse wresp = wreq.GetResponse();
    Stream respstr = wresp.GetResponseStream();
    int read = respstr.Read(buf, 0, 10240); // Error
    result = Encoding.ASCII.GetString(buf, 0, read); 
    curRateLbl.Text= result;
} 
```

问题是，当应用程序执行这个应用程序在挂起大约 4-5 秒后得到这个屏幕

![在此处输入图像描述](../Images/c2a8659446adbe5a5424c3291aac3b4b.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T18:04:56.473

缓冲区的大小为 1024，但您告诉`Read`它最多可以将 10240（大小的十倍）字节放入缓冲区。如文件所述，它抛出是因为

> 偏移量和计数之和大于缓冲区长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:06:08.013

最后你有一个额外的 0。应该

```
 int read = respstr.Read(buf, 0, 1024); // Error 
```

这就是为什么你在你的应用程序中使用常量来避免那些胖乎乎的手指错误。

```
private void inetConvert() {  
    private const BUFFER_SIZE = 1024;
    byte[] buf = new byte[BUFFER_SIZE];  
    string result;  
    string xeString = String.Format("http://www.xe.com/ucc/convert.cgi?Amount=1&From={0}&To={1}", srcCurrency, dstCurrency);  
    System.Net.WebRequest wreq = System.Net.WebRequest.Create(new Uri(xeString));  

    // VERY IMPORTANT TO CLEAN UP RESOURCES FROM ANY OBJECT THAT IMPLEMENTS IDisposable

    using(System.Net.WebResponse wresp = wreq.GetResponse()) 
    using(Stream respstr = wresp.GetResponseStream())
    {
      int read = respstr.Read(buf, 0, BUFFER_SIZE); // Error  
      result = Encoding.ASCII.GetString(buf, 0, read);   
      curRateLbl.Text= result;  
    }
} 
```

另请注意，您没有正确关闭 Stream 对象。您可能会考虑使用`using`语句来帮助管理流中的资源。

但是......这就是我将如何做到这一点。

```
private void inetConvert() 
{   
    string xeString= String.Format("http://www.xe.com/ucc/convert.cgi?Amount=1&From={0}&To={1}", srcCurrency, dstCurrency);  

    System.Net.WebRequest wreq = System.Net.WebRequest.Create(new Uri(xeString));  

    // VERY IMPORTANT TO CLEAN UP RESOURCES FROM ANY OBJECT THAT IMPLEMENTS IDisposable

    using(System.Net.WebResponse wresp = wreq.GetResponse()) 
    using (Stream stream = response.GetResponseStream()) 
    { 
        StreamReader reader = new StreamReader(stream, Encoding.UTF8); 
        curRateLbl.Text = reader.ReadToEnd(); 
    } 
} 
```

# ios - iOS 设备绑定 ID - 识别设备

> ID：11385392
> 
> 赞同：2
> 
> 时间：2012-07-08T18:03:35.887
> 
> 标签：ios

我创建了一个具有会员功能的应用程序，在注册期间，我计划最初为每个用户提供 10 分。但是为了检测批量帐户， - 仅为积分签名的帐户 - 我需要在注册时检测每个设备，如果使用设备 ID，我应该禁用额外的积分。

我想我还不如用这样的东西注册到钥匙串；

thisUserSignedUpAlready = YES；

但是我想检测设备 ID，所以即使设备恢复了，我也不会把这些额外的功劳归功于这些设备。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:23:04.320

而不是 Mac 地址，您应该使用创建 UUID 的标准方法。Apple 不希望您跟踪设备。

> 要创建特定于您的应用程序的唯一标识符，您可以调用 CFUUIDCreate 函数来创建 UUID，并使用 NSUserDefaults 类将其写入默认数据库。 [（来源）](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIDevice_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)

如果你想为此使用一个库而不是滚动你自己的库，你应该使用[这个优秀的库](https://github.com/blackpixel/BPXLUUIDHandler)而不是 MAC 地址相关的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T18:11:13.443

您不应该使用 UDID，因为 Apple 已弃用它。现在许多应用程序都在使用 MAC 地址来识别设备。您可以在 UIDevice 上使用[此](https://github.com/nicklockwood/MACAddress)类别来查找 MAC 地址。

# api - 将每行 9 个唯一字段的 XML 文件转换为每行仅使用 4 个字段的预先形成的 URL

> ID：11385394
> 
> 赞同：0
> 
> 时间：2012-07-08T18:04:27.250
> 
> 标签：api, url, sed, flickr

我正在使用 Flickr 进行 API 调用，它会返回每张照片的结果，例如：

```
<photo id="7503362468" owner="59044395@N02" secret="66b94027db" server="8423" farm="9" title="Potluck" ispublic="1" isfriend="0" isfamily="0" /> 
```

现在，根据 Flickr 的 URL/API 文档，它们的 URL 的结构是这样的，mstzb 是照片大小的一个字母指示符：

```
http://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_[mstzb].jpg 
```

所以，我的问题与可以采取每一行的大规模搜索和替换有关，在前面加上`http://farm`然后基本上只是“填空”其余部分。目标是使用 API 来获取一个安静的 XML，然后我可以将替换器扔到那里并生成一个 URL 列表。我对 sed 有一个简短的熟悉——诚然，它没有向导——但我只是不确定如何按行进行搜索和替换，然后按正确的顺序替换。当然，farm-id 是第一个进入 URL 的字段，并且是 XML 中的第五个字段——我的意思是搜索和替换模式遵循每一行的相同位置。诚然，我刚刚开始使用正则表达式类型的东西，任何帮助都将不胜感激。我还看到以前有人问过这类问题，但他们似乎专注于如何创建 URL 语法而不是 sed 样式的替换。就像我说的，`s/unnecessary/necessary`- 我只是不确定如何挑选某些引用的字段并将它们移动到预先形成的行中。

编辑：更多信息 - 我正在使用 Flickr 的 API Explorer 来生成这些 XML 文件，并且通常使用 bash 进行编辑。我认为我在这里所追求的更像是一个 bash 脚本，甚至可能是一种（希望是）可执行编程语言。我将赶紧补充一点，尽管我对使用诸如 python 之类的语言确实“有点”熟悉，但除了 bash 脚本之外，我在编写代码方面几乎没有经验。您可以在此处查看 API Explorer：[http ://www.flickr.com/services/api/explore/?method=flickr.photos.search](http://www.flickr.com/services/api/explore/?method=flickr.photos.search)

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:48:36.953

使用 awk 的三种解决方案：

解决方案 1\. 假设每条 xml 记录看起来都像给定的样本，所有字段都完全按照样本的顺序排列：

双引号设置为字段分隔符，然后将所需内容作为输入行中的位置变量访问。

一个文件可以有许多输入记录，所有记录都将在一次执行中转换。

```
#!/usr/bin/awk -f
#<photo id="7503362468" owner="59044395@N02" secret="66b94027db" server="8423" farm="9" title="Potluck" ispublic="1" isfriend="0" isfamily="0" />
#1          2          3       4            5        6          7        8    9      `10 11     12      13         14 15        16 17        18 19
#http://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_[mstzb].jpg

#usage ./xml2url.awk <file_of_xml_text
BEGIN {FS="\""}
{print "http://farm"$10".staticflickr.com/"$8"/"$2"_"$6"_[mstzb].jpg"} 
```

解决方案 2\. 此解决方案假设您可以编辑 xml，替换

```
<photo 
```

和

```
usage echo x|./xml2urlv2.awk 
```

并更换

```
/> 
```

一无所有。

然后

```
#!/usr/bin/awk -f
# usage echo x|./xml2urlv2.awk  id="7503362468"  owner="59044395@N02"  secret="66b94027db"  server="8423"  farm="9" title="Potluck" ispublic="1"  isfriend="0"  isfamily="0"
#<photo id="7503362468" owner="59044395@N02" secret="66b94027db" server="8423" farm="9" title="Potluck" ispublic="1" isfriend="0" isfamily="0" />
#http://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_[mstzb].jpg
#
{print "http://farm"farm".staticflickr.com/"server"/"id"_"secret"_[mstzb].jpg"} 
```

成功了。

解决方案 3\. 此解决方案无需在脚本中回显任何内容，但需要进行更多编辑。您必须将 -v 放在您关心的每个字段之前。

```
#!/usr/bin/awk -f
#<photo id="7503362468" owner="59044395@N02" secret="66b94027db" server="8423" farm="9" title="Potluck" ispublic="1" isfriend="0" isfamily="0" />
#http://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_[mstzb].jpg

#usage: ./xml2urlv.awk -v id="7503362468" -v owner="59044395@N02" -v secret="66b94027db" -v server="8423" -v farm="9" -v title="Potluck" -v ispublic="1" -v isfriend="0" -v isfamily="0"  

BEGIN{print "http://farm"farm".staticflickr.com/"server"/"id"_"secret"_[mstzb].jpg"}
### end of script 
```

如果您是 awk 新手，请记住整个 print 语句必须在一行中。此外，{ 必须与单词 BEGIN 放在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T09:00:01.630

您可以使用`export`捕获所有变量，如下所示：

```
$ export `echo '<photo id="7503362468" owner="59044395@N02" secret="66b94027db" server="8423" farm="9" title="Potluck" ispublic="1" isfriend="0" isfamily="0" />' | sed -n -e 's;";;g'  -e "s;<photo \(.*\) />;\1;p"`
$ echo "http://farm${farm}.staticflickr.com/$server/${id}_${secret}_[mstzb].jpg" 
```

# mpi - 与自身等级相同的 MPI 通信的行为是否定义明确？

> ID：11385395
> 
> 赞同：13
> 
> 时间：2012-07-08T18:04:32.830
> 
> 标签：mpi

如果您使用其中一种 MPI 通信方法让 rank 与自身通信会发生什么？是否存在明确定义的行为（例如保证成功或失败），或者它是否取决于机会/其他不可控的影响，程序是否会继续运行？

一个示例是流体动力学代码，其中每个等级确定需要将哪些网格单元发送到相邻等级以创建计算模板所需的光环。如果仅在一个等级上开始模拟，则会有等级 0 的非阻塞发送/接收本身（发送大约 0 长度的信息）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T18:56:06.553

虽然您可以按照 suszterpatt 的回答避免自发消息，但自发消息将起作用并且是 MPI 标准的一部分。甚至还有一个预定义的便捷通讯器`MPI_COMM_SELF`。只要发送/接收调用不会导致死锁（例如，使用非阻塞调用），发送给自己就可以了。当然，发送和接收缓冲区不应该重叠。

请注意，使用 OpenMPI 您需要[启用`self`BTL](http://www.open-mpi.org/faq/?category=all#tcp-btl)。

* * *

来源：[MPI 1.1 第 3.2.4 节](http://www.mpi-forum.org/docs/mpi-11-html/node34.html#Node34)

> Source=destination 是允许的，即进程可以向自己发送消息。（但是，使用上述阻塞发送和接收操作这样做是不安全的，因为这可能会导致死锁。请参阅第 3.5 节。点对点通信的语义。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:47:46.050

在标准模式发送（即`MPI_Send()`）中，由 MPI 实现决定是否缓冲消息。可以合理地假设任何实现，或者至少是流行的实现，都会识别到自己的发送，并决定缓冲消息。然后将继续执行，一旦进行匹配的接收调用，将从缓冲区中读取消息。如果您想绝对确定，可以使用`MPI_Bsend()`，但您可能需要负责通过`MPI_Buffer_attach()`和管理缓冲区`MPI_Buffer_detach()`。

但是，针对您的特定问题的理想解决方案是`MPI_PROC_NULL`在发送/接收调用的源/目标参数中使用，这将导致 Send 和 Recv 放弃任何通信并尽快返回。

# c# - 无法调试 Razor 助手 - 似乎 IIS 没有使用调试符号进行编译？

> ID：11385396
> 
> 赞同：5
> 
> 时间：2012-07-08T18:04:39.367
> 
> 标签：c#, iis, razor

我正在尝试调试在 IIS 上本地运行的 Razor 辅助函数。

即使我的帮助代码显示为：

```
System.Diagnostics.Debugger.Break(); 
```

断点不会发生。

所以我认为这是因为 IIS 在调试模式下无法编译该函数。

我在 web.config 中添加了这个，但它没有解决问题：

```
<compilation debug="true"></compilation> 
```

肯定有人遇到过这个问题，或者只是我的笔记本电脑有问题？？？

谢谢！- 布赖恩

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T19:14:53.413

我想通了，伙计，这是多么疯狂的追逐！

调用助手时我忘记了“@”符号。我的代码如下所示：

```
MyHelper() 
```

但它应该看起来像这样：

```
@MyHelper() 
```

在这种情况下，Razor 似乎甚至没有调用该函数，或者可能调用它但关闭了调试模式，无论如何我添加了“@”符号，然后可以再次使用调试器进行跟踪。

似乎有很多像这样的小陷阱，有了这个 Razor thingee...

希望这可以帮助某人避免失去一天中的 2 个小时。:-(

# c++ - 如何确定大型对象的性能成本（在 C++ 中）

> ID：11385401
> 
> 赞同：0
> 
> 时间：2012-07-08T18:05:40.290
> 
> 标签：c++, performance, profiling

我正在开发一个对对象进行大量操作的程序；创建、删除、dynamic_cast-ing、改组指针、比较内容等。这些对象中的大多数至少有 40 个字节（最多约 90 个字节），并且一次在内存中可能有超过 10,000 个。

我要确定的是我是否应该费心尝试减小它们的大小。我可以分析构造函数、新建、删除等。但是，我相信大型对象对性能的最重要影响是缓存不友好。有没有*办法确定*对象大小对发生的缓存未命中次数的贡献？

PS：我想过度使用 dynamic_cast 也会影响性能。然而，这更容易诊断。

**编辑：**我知道没有分析就进行优化是没有用的。我要问的是*如何*从分析中确定它是否有问题。惩罚是否有可能分布在整个代码中，以至于标准分析工具没有帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T19:28:13.133

您正在以大多数人的方式接近它，直到他们越界并*获得它*。正如 Paul R 在他的评论中所说，不要只是猜测。换句话说，你的整个方法应该以*诊断*为中心。否则，你就像一个医生，通过假设每个人都是一样的来对待别人，对鹅有用的东西必须对鹅有用。

这是否意味着与缓存相关的问题不是问题？
这是否意味着内存分配问题不是问题？

不必要。

这意味着它们是猜测，它们*可能*是问题，但几乎可以肯定还有其他问题，没人能提前猜到。

[*这里*](https://scicomp.stackexchange.com/a/1870/1262)讨论了一个示例，其中发现并修复了*六 (6) 个不同的问题，其大小范围**几乎一直*加起来，就像一堆不同大小的硬币加起来一美元一样。当然，其中之一是内存分配，但只有一个。如果您解决了内存分配问题并停在那里，或者加上其他一些先入为主的问题并停在那里，您将获得多少加速？

实际显示的加速比的一小部分。

要获得可以达到的真正加速比，您必须找到***每个***问题，而不仅仅是几个问题。该链接显示了如何做到这一点。

# iphone - 淡出/淡入 UIBarButtonItem？

> ID：11385405
> 
> 赞同：1
> 
> 时间：2012-07-08T18:06:00.400
> 
> 标签：iphone, objective-c, ipad, uibarbuttonitem

我环顾四周，但找不到明确的答案。我需要淡入淡出几个`UIBarButtonItems`，就这么简单。我怎样才能？

如果无论如何我都不能淡入淡出`UIBarButtonItem`，那我还能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:19:46.673

你不能淡化`UIBarButtonItems`自己，因为它们不是视图。
**但是**`UIBarButtonItem`您可以使用自定义视图（`UIButton`最好）初始化一个普通视图并淡化该视图。为此，您需要将按钮存储在某处。

# php - 创建pdf后清理

> ID：11385408
> 
> 赞同：1
> 
> 时间：2012-07-08T18:06:37.607
> 
> 标签：php, pdf-generation, fpdf, html2pdf

我正在用 html2fpdf 生成一个 pdf 文件。

```
$pdf = new HTML2FPDF();
$pdf->HTML2FPDF("P","mm","A4");
$pdf->AddPage();
$pdf->WriteHTML($html);
$pdf->output('sample.pdf'); 
```

此示例效果很好。但：

输出后如何删除pdf？我只想在我的工具中有链接，用户可以下载 pdf，然后应该在服务器上将其删除。

生成pdf后如何“清理”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:09:16.573

您可以使用 PHP 的文件删除功能，称为`unlink()`

使用生成的 PDF 文件（或任何文件）的完整路径调用此函数，PHP 将删除该文件。

[http://php.net/manual/en/function.unlink.php](http://php.net/manual/en/function.unlink.php)

* * *

您不必在用户下载文件后立即删除该文件。您可以轻松地将所有生成的文件放在一个中央文件夹中，并让 cron 作业执行更通用的清理脚本，只需删除旧文件即可。

一种方法可能是 -

*   使用 扫描文件夹的内容[`scandir()`](http://php.net/manual/en/function.scandir.php)。
*   循环遍历其文件`foreach`..
*   使用 . 检查每个文件的创建时间[`filemtime()`](http://php.net/manual/en/function.filemtime.php)。
*   如果创建时间超过一小时前，请使用[`unlink()`](http://php.net/manual/en/function.unlink.php).

* * *

因为您是在 PHP 代码中自己生成 PDF 文件*，*所以我没有提到权限考虑。这里最好提一下，您的 PHP 必须具有正确的文件系统权限才能对文件系统执行任何操作。您正在创建一个 PDF 文件，因此可以安全地假设您具有对文件系统进行更改的正确权限，但如果您计划`unlink()`在其他脚本中使用此功能，请确保您正在处理的文件具有正确的权限集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T00:17:52.967

如果您不将“F”标志添加到输出函数，则服务器上根本不会存储任何 pdf 文件：

```
$pdf->output('sample.pdf', 'F'); //stores PDF on server 
```

在您的情况下，脚本本身的行为就像一个实际的 pdf 文件。因此，创建指向脚本的链接就像指向 pdf 的链接一样，只是每次请求脚本时都会创建 PDF。要告诉浏览器它是 PDF，`content-type`响应标头必须设置为`application/pdf`：

```
content-type: application/pdf 
```

这样，即使 URL 以`.php`. 您可以使用重写引擎使其以 pdf 或其他格式结尾。

发送标头由 fpdf/tcpdf 完成。简而言之：您不必进行任何清理，因为服务器上没有存储 pdf 文件。

如果您想知道名称的含义，请尝试保存 pdf 文件。保存时的推荐名称为 sample.pdf。

**参考**：

*   PHP [header()](http://php.net/manual/en/function.header.php)函数，在示例中有一个用于发送 pdf
*   [FPDF::输出（）](http://fpdf.org/en/doc/output.htm)
*   [TCPDF::输出（）](http://www.tcpdf.org/doc/classTCPDF.html#a3d6dcb62298ec9d42e9125ee2f5b23a1)

# html - 如何自动关闭视频上的 Youtube 广告？

> ID：11385411
> 
> 赞同：3
> 
> 时间：2012-07-08T18:07:09.790
> 
> 标签：html, youtube

这是关于视频首次开始播放时出现在 YouTube 视频屏幕底部的广告。我们可以通过点击广告右上角的关闭按钮来手动关闭视频。无论如何，是否有编写脚本或小程序让浏览器在浏览 YouTube 时自动关闭如果出现任何广告。（我认为如果我们能做到这一点会很有趣）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:24:07.487

多年来一直使用 YouTube API，我试图实现您所要求的，但没有任何成功。

遗憾的是，无法自动关闭重叠式广告。这个谷歌论坛帖子证实了这一点：[https ://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/qG733WIH6yE](https://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/qG733WIH6yE)

> 它不能被点击[广告]，因为那些鼠标事件是在内部处理的，不能在父应用程序中管理。父应用程序显然在视频屏幕上有鼠标事件来管理暂停/播放功能。

# xcode - Apple 沙盒和 AXUIElementRefs

> ID：11385412
> 
> 赞同：1
> 
> 时间：2012-07-08T18:07:17.793
> 
> 标签：xcode, cocoa, sandbox

如果我的应用程序在 MAC App Store 中发布应用程序所需的这个奇怪的沙盒事物中，我如何访问另一个应用程序？

我正在使用此方法阅读 UIElement：

```
AXUIElementCopyElementAtPosition(xxx) 
```

到目前为止，这工作正常。但是如果我启用 App Sandboxing，我将不再获得对 MenuItem 的引用！！！

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:41:21.463

Such Apis are not supported from within the sandbox. All you can do is file a radar and sell your app outside of the store

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:33:14.667

提交了一个错误...[雷达：12174743](https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/35/wo/0WFzopPdttnocJbUyUe11M/7.66) **继续提交错误**也许有一天他们会放松。

> *有缺陷/非法的沙箱会导致所有可访问性 API 失败，也就是 AXUIElementRef。*
> 
> *你们那里疯了吗？？？听说过 ADA 法案吗？准备起诉..*
> 
> *沙盒是您成功的一个可悲的结果。实际上，这真的让我很生气。这违背了我曾经站在这个平台后面的每一个原因……风雨无阻。*

# jakarta-ee - 尝试在 Tomcat 中使用 PersistentManager 时出现 404 错误

> ID：11385413
> 
> 赞同：1
> 
> 时间：2012-07-08T18:07:19.243
> 
> 标签：jakarta-ee, tomcat

我正在关注一本关于 Tomcat 7 的书，我正在尝试使用 PersistentManager 和 FileStore 来实现会话持久性。

我有一个在 Eclipse 中运行的 Tomcat 7 服务器，所以我在 Project Explorer 中转到它的文件夹，并在其中的 context.xml 文件中插入了以下文本

```
 <Manager>
        className="org.apache.catalina.session.PersistentManager"
        saveOnRestart="true"
        maxActiveSessions="-1"
        minIdleSwap="-1"
        maxIdleSwap="-1"
        maxIdleBackup="-1"
        <Store className="org.apache.catalina.session.FileStore" directory="/mypath/mydir" />
</Manager> 
```

正如书中所说，我必须在 context.xml 文件中设置管理器，并且当我通过 Eclipse 运行 Tomcat 时，我认为这是要使用的 context.xml 文件。无论如何，当我插入该文本并重新启动 Tomcat 时，当我尝试访问我的本地主机网页时，我得到一个 404。这是我单击重新启动时控制台的输出 -

```
08-Jul-2012 18:59:32 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:/Program Files/Java/jre6/lib/i386;C:\Program Files\ActiveState Komodo Edit 6\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Windows Live\Shared;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files\Microsoft Network Monitor 3\;C:\Program Files\MATLAB\R2011a\runtime\win32;C:\Program Files\MATLAB\R2011a\bin;C:\Program Files\Nmap;C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin;C:\Program Files\Steam;C:\ProgramData\Propeople\Drush\;C:\Program Files\Propeople\Drush\GnuWin32\bin;C:\Program Files\Propeople\Drush\Php;C:\bf_scripts;C:\Program Files\Java\jdk1.6.0_30\bin;C:\apache\ant\bin;C:\Users\Brian\Eclipse\eclipse tomcat;;.
08-Jul-2012 18:59:32 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:chapter5' did not find a matching property.
08-Jul-2012 18:59:32 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
08-Jul-2012 18:59:32 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
08-Jul-2012 18:59:32 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 376 ms
08-Jul-2012 18:59:32 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
08-Jul-2012 18:59:32 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
08-Jul-2012 18:59:32 org.apache.tomcat.util.digester.Digester endElement
SEVERE: End event threw exception
java.lang.NoSuchMethodException: org.apache.catalina.session.StandardManager setStore
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:855)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.processContextConfig(ContextConfig.java:612)
    at org.apache.catalina.startup.ContextConfig.contextConfig(ContextConfig.java:556)
    at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:814)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:363)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:110)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
08-Jul-2012 18:59:32 org.apache.catalina.startup.ContextConfig processContextConfig
SEVERE: Parse error in context.xml for 
java.lang.NoSuchMethodException: org.apache.catalina.session.StandardManager setStore
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2719)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1054)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.processContextConfig(ContextConfig.java:612)
    at org.apache.catalina.startup.ContextConfig.contextConfig(ContextConfig.java:556)
    at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:814)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:363)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:110)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoSuchMethodException: org.apache.catalina.session.StandardManager setStore
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:855)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    ... 28 more
08-Jul-2012 18:59:32 org.apache.catalina.startup.ContextConfig processContextConfig
SEVERE: Occurred at line 41 column 87
08-Jul-2012 18:59:32 org.apache.catalina.startup.ContextConfig configureStart
SEVERE: Marking this application unavailable due to previous error(s)
08-Jul-2012 18:59:32 org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
08-Jul-2012 18:59:32 org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors
08-Jul-2012 18:59:32 org.apache.tomcat.util.digester.Digester endElement
SEVERE: End event threw exception
java.lang.NoSuchMethodException: org.apache.catalina.session.StandardManager setStore
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:855)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.processContextConfig(ContextConfig.java:612)
    at org.apache.catalina.startup.ContextConfig.contextConfig(ContextConfig.java:556)
    at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:814)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:363)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:110)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
08-Jul-2012 18:59:32 org.apache.catalina.startup.ContextConfig processContextConfig
SEVERE: Parse error in context.xml for /chapter5
java.lang.NoSuchMethodException: org.apache.catalina.session.StandardManager setStore
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2719)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1054)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.processContextConfig(ContextConfig.java:612)
    at org.apache.catalina.startup.ContextConfig.contextConfig(ContextConfig.java:556)
    at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:814)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:363)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:110)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoSuchMethodException: org.apache.catalina.session.StandardManager setStore
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:855)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    ... 28 more
08-Jul-2012 18:59:32 org.apache.catalina.startup.ContextConfig processContextConfig
SEVERE: Occurred at line 41 column 87
08-Jul-2012 18:59:33 org.apache.catalina.startup.ContextConfig configureStart
SEVERE: Marking this application unavailable due to previous error(s)
08-Jul-2012 18:59:33 org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
08-Jul-2012 18:59:33 org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/chapter5] startup failed due to previous errors
08-Jul-2012 18:59:33 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
08-Jul-2012 18:59:33 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
08-Jul-2012 18:59:33 org.apache.catalina.startup.Catalina start
INFO: Server startup in 257 ms 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:38:36.497

您的`<Manager>`元素已损坏：您希望`className`所有其他属性都*在*`<`and`>`标记内。

# process - 如何获取运行我的应用程序的 java 二进制文件的路径/名称？

> ID：11385415
> 
> 赞同：0
> 
> 时间：2012-07-08T18:07:24.953
> 
> 标签：process, java

这就是问题：我的 Java 应用程序正在运行，那么如何获取运行它的 java 二进制文件的路径/名称？例如，Windows 中的“C:\Program Files\Java\jre6\bin\java.exe”或 Linux 中的“/usr/bin/java”。我需要一个独立于平台的解决方案，最好只依赖于 JDK。

问题的上下文如下。我正在开发两个 Java 应用程序，比如说 FirstApplication 和 SecondApplication。FirstApplication 将使用[ProcessBuilder API](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)启动 SecondApplication 。问题是我需要告诉 Java 二进制文件的路径以启动 SecondApplication。例如，

```
String cmd = "C:\Program Files\Java\jre6\bin\java.exe -cp <second application classpath> com.secondapplication.MainClass";
Process p = new ProcessBuilder(cmd).start(); 
```

可能的替代解决方案可能是假设有一个通过 PATH 系统变量可用的 java 二进制文件，或者假设设置了 JAVA_HOME 系统变量。但情况可能并非总是如此。此外，应用程序的最终用户（针对其他 Java 开发人员以及最终用户）可能在他的系统上安装了多个 JVM，并且可能会执行 FirstApplication 以明确他想要的 JVM。理想情况下，SecondAplication 应该使用与 FirstApplication 完全相同的 Java 二进制文件运行，而不依赖于此类系统变量。

谢谢

# javascript - 谷歌地图路线 URL 与针在纬度/经度

> ID：11385416
> 
> 赞同：1
> 
> 时间：2012-07-08T18:07:27.187
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试构建一个 URL，它将以方向模式显示 Google 地图，从长/纬度开始，并在该位置显示一个图钉。

我目前有以下工作，但它不会在我的坐标处放置一个大头针。

```
https://maps.google.com/maps?daddr=35.17334,-106.55594&hl=en&sll=35.17334,-106.55594&sspn=28.132942,65.170898&t=m&mra=mift&mrsp=1&sz=5&z=18 
```

[https://maps.google.com/maps?daddr=35.17334,-106.55594&hl=en&sll=35.17334,-106.55594&sspn=28.132942,65.170898&t=m&mra=mift&mrsp=1&sz=5&z=18](https://maps.google.com/maps?daddr=35.17334,-106.55594&hl=en&sll=35.17334,-106.55594&sspn=28.132942,65.170898&t=m&mra=mift&mrsp=1&sz=5&z=18)

有没有办法做我已经做过的事情，但在长/纬度上也有一个别针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:27:24.743

“B”位置有一个“别针”。我假设您希望在中心有一个“别针”，如下所示：

[https://maps.google.com/maps?saddr=35.17334,-106.55594&daddr=35.17334,-106.55594&hl=en&sll=35.17334,-106.55594&sspn=28.132942,65.170898&t=m&mra=mift&mrsp=1](https://maps.google.com/maps?saddr=35.17334,-106.55594&daddr=35.17334,-106.55594&hl=en&sll=35.17334,-106.55594&sspn=28.132942,65.170898&t=m&mra=mift&mrsp=1&sz=5&z=18)

[谷歌地图参数说明](http://mapki.com/wiki/Google_Map_Parameters)

# java - 如何使用 Java 和 JFreeChart 创建图表资源管理器？

> ID：11385419
> 
> 赞同：0
> 
> 时间：2012-07-08T18:07:37.590
> 
> 标签：java, swing, netbeans, jfreechart, netbeans-7

在 JFreeChart 库的帮助下，我创建了一个 Java 桌面程序。我可以打开一个股票数据文件 (symbol.txt) 并让程序显示几个指标。我想在一个新的 JFrame 窗口中创建一个资源管理器，该窗口将打开一个包含股票数据文件的文件夹并检查一些指标值。我的问题是找到一种方法一次打开多个文件（在用户级别），但在程序级别一个接一个地处理每个文件（打开第一个文件，检查指示器，关闭第一个文件......继续第二个文件） . 谢谢你。

几个小时后更新：

[`org.jfree.data.general.SeriesException`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/general/SeriesException.html)这是第一次尝试，当我尝试打开多个文件时会产生错误。

```
您正在尝试添加 2011 年 1 月 4 日期间的观察
但该系列已经包含对该时间段的观察。
不允许重复。尝试使用 addOrUpdate() 方法。

```

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package nysemarketpick;

import java.io.File;
import javax.swing.JFileChooser;

/**
 *
 * @author skiabox
 */
public class ExplorerForm extends javax.swing.JFrame {

    PriceVolumeChart chart;

    /**
     * Creates new form ExplorerForm
     */
    public ExplorerForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        fileChooser = new javax.swing.JFileChooser();
        scrollPane = new javax.swing.JScrollPane();
        textArea = new javax.swing.JTextArea();
        fileMenuBar = new javax.swing.JMenuBar();
        fileMenu = new javax.swing.JMenu();
        openItem = new javax.swing.JMenuItem();

        fileChooser.setFileSelectionMode(javax.swing.JFileChooser.FILES_AND_DIRECTORIES);
        fileChooser.setMultiSelectionEnabled(true);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Stock Explorer");

        textArea.setColumns(20);
        textArea.setRows(5);
        scrollPane.setViewportView(textArea);

        fileMenu.setText("File");

        openItem.setText("Open");
        openItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                openItemActionPerformed(evt);
            }
        });
        fileMenu.add(openItem);

        fileMenuBar.add(fileMenu);

        setJMenuBar(fileMenuBar);

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(scrollPane, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 314, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(80, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(75, 75, 75)
                .add(scrollPane, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(103, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void openItemActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        int returnVal = fileChooser.showOpenDialog(this);
        if (returnVal == JFileChooser.APPROVE_OPTION)
        {
            File files[];

            //File myFile;

            files = fileChooser.getSelectedFiles();

            for (int i = 0; i < files.length; i++)
            {
                //myFile = files
                chart = new PriceVolumeChart(files[i].getAbsolutePath());

                System.out.println(files[i].getAbsolutePath());

                if (chart.getTLDirection().equals("(-1)"))
                {
                    textArea.append(files[i].getAbsolutePath() + "\n");
                }

                chart = null;
            }
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ExplorerForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ExplorerForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ExplorerForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ExplorerForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ExplorerForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JFileChooser fileChooser;
    private javax.swing.JMenu fileMenu;
    private javax.swing.JMenuBar fileMenuBar;
    private javax.swing.JMenuItem openItem;
    private javax.swing.JScrollPane scrollPane;
    private javax.swing.JTextArea textArea;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:43:32.707

[`JInternalFrame`](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)可能是一个不错的选择。可以在[此处](https://stackoverflow.com/a/9339590/230513)和[此处](https://stackoverflow.com/a/8199839/230513)找到示例。用于`Action`使您的菜单和文档井井有条，如此处和[此处](https://stackoverflow.com/a/4039359/230513)[所示](https://stackoverflow.com/a/2741726/230513)。

![图片](../Images/10880a11b02da102d19b53a379603074.png)

附录：*我说的是3200个文件。*

[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)是这个数量级的不错选择。使用自定义[编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)创建作用于特定行的按钮。多项选择可以使用[此处](https://stackoverflow.com/a/7620726/230513)`ListSelectionListener`显示的 ，或[此处](https://stackoverflow.com/a/4528604/230513)显示的复选框。

![图片](../Images/4af0c4a03e647eca4d80ae216ee8f432.png)

附录：您可以`JFileChooser`在模态对话框中打开，在此处看到，[或嵌入在框架中，如此](https://stackoverflow.com/a/5129757/230513)[处](https://stackoverflow.com/a/4054307/230513)`AbstractAction`所示。

# ruby-on-rails - Rails 控制器查找器模式用于干涸帐户过滤器

> ID：11385420
> 
> 赞同：2
> 
> 时间：2012-07-08T18:07:38.527
> 
> 标签：ruby-on-rails, activerecord, controller, dry

我的控制器中都有如下代码。这是为了过滤特定帐户的模型（用于多租户）。有没有简单的方法来干燥这个？这`current_account_id`是一个依赖于当前用户的控制器辅助方法。

```
Job.with_account(current_account_id).active.......
Contact.with_account(current_account_id).active....... 
```

不确定在应用程序控制器中添加辅助方法是否是最好的方法。

编辑：为了澄清，我可以使用如下代码：

```
def job_with_current_account
  Job.with_account(current_account_id)
end 
```

然后在控制器中的任何地方使用此方法，例如

```
job_with_current_account.active..... 
```

我想知道是否有另一种更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:10:51.627

If you have defined the associations in both directions, and assuming you have a `current_account` helper, then you could use this instead:

```
current_account.jobs.active.....
current_account.contacts.active..... 
```

It's a bit more concise, and you don't need to define the `with_account` scope in all of your models.

# html - 缩放 SVG 形状以适应内容，其中内容包括 foreignObject

> ID：11385421
> 
> 赞同：8
> 
> 时间：2012-07-08T18:07:41.130
> 
> 标签：html, xhtml, svg

有没有办法 - 最好不使用 JavaScript - 将一些 HTML 内容放入 SVG 形状中`foreignObject`，这样 SVG 形状会自动调整大小（或缩放）以适应其内容？

即非常模糊的类似这个伪代码示例的东西，但有效，并且以我描述的方式起作用：

```
<?xml version="1.0" standalone="yes"?>
<svg xmlns = "http://www.w3.org/2000/svg">
  <rect x="10" y="10" width="SCALE_TO_FIT_CONTENTS" height="SCALE_TO_FIT_CONTENTS" fill="gray">
    <foreignobject width="100%" height="100%">
      <body xmlns="http://www.w3.org/1999/xhtml">
        <div>Some HTML text</div>
      </body>
    </foreignobject>
  </rect>
</svg> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:56:37.107

如果不使用 javascript，就不可能做到这一点。事实上，SVG 形状不能用作容器。但是，我希望这是您所要求的：

```
<script type="text/javascript">
    function myFun(){
        var w = document.getElementById("myDiv").scrollWidth;
        document.getElementById("myRect").setAttribute("width",w);
    }
</script>
<svg xmlns = "http://www.w3.org/2000/svg" onload="myFun()">
    <rect id="myRect" x="10" y="10" width="0" height="100" fill="red"></rect>

        <foreignObject x="10" y="10" position="absolute" width="100%" height="100%">
            <div id="myDiv" style="display: inline-block;">Some HTML text that resizes its SVG container</div>
        </foreignObject>
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-24T20:37:30.270

一个不错的技巧是将所有内容包装在一个`<g>`元素中，然后使用该元素测量该元素[`getBBox()`](https://www.w3.org/TR/SVG/types.html#__svg__SVGLocatable__getBBox)，然后知道内部内容的高度，并可用于修改父**SVG**元素的高度。

```
var svg = document.querySelector('svg');
var bbox = svg.firstElementChild.getBBox();

svg.setAttribute("height", bbox.height + "px");
```

```
<svg>
  <g>
    <rect x="10" y="10" width="100" height="200px" fill="red"></rect>
        <foreignObject x="10" y="500" position="absolute" width="100%" height="100%">
            <div id="myDiv" style="display: inline-block;">Some HTML text that resizes its SVG container</div>
        </foreignObject>
        <text dy='500'>aaaaaaaaa</text>
  </g>
</svg>
```

# facebook - Facebook 应用程序实例创建不适用于每个用户

> ID：11385427
> 
> 赞同：0
> 
> 时间：2012-07-08T18:09:03.397
> 
> 标签：facebook, instance

我有以下让我发疯的问题。我使用 Facebook PHP SDK (https://github.com/facebook/php-sdk/) 发布的示例代码来识别用户。它适用于我的大多数测试用户，但对于某些用户，实例创建不起作用。我试过用同一台机器和不同的机器，它不会改变任何东西。每个用户都在我的开发帐户中正确设置为测试用户。

可能是什么原因？提前谢谢了。

```
 require '../lib/facebook.php';

    // Create our Application instance (replace this with your appId and secret).
    $facebook = new Facebook(array(
      'appId'  => 'XXXXXXXXXX',
      'secret' => 'XXXXXXXXXXX',
    ));

    // Get User ID
    $user = $facebook->getUser();

    if ($user) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }

    // Login or logout url will be needed depending on current user state.
    if ($user) {
      $logoutUrl = $facebook->getLogoutUrl();
    } else {
      $loginUrl = $facebook->getLoginUrl(array(
            'scope' => 'publish_stream, publish_actions',   
            'redirect_uri' => 'http://apps.facebook.com/xxxxx/' 
    ));
    }
    ?>
    <!doctype html>
    <html xmlns:fb="http://www.facebook.com/2008/fbml">
      <head>
        <title>php-sdk</title>
      </head>
      <body>
        <h1>php-sdk</h1>

        <?php if ($user): ?>
          <a href="<?php echo $logoutUrl; ?>">Logout</a>
        <?php else: ?>
          <div>
            Login using OAuth 2.0 handled by the PHP SDK:
            <a href="<?php echo $loginUrl; ?>" target="_top">Login with Facebook</a>
          </div>
        <?php endif ?>

        <h3>PHP Session</h3>
        <pre><?php print_r($_SESSION); ?></pre>

        <?php if ($user): ?>
          <h3>You</h3>
          <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

          <h3>Your User Object (/me)</h3>
          <pre><?php print_r($user_profile); ?></pre>
        <?php else: ?>
          <strong><em>You are not Connected.</em></strong>
        <?php endif ?>

        </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:32:46.523

我终于找到了答案。问题与代码无关。这是因为测试用户绕过了请求接受邀请的通知，而是直接输入了应用程序的url。

您必须删除测试用户并重新创建它。然后测试用户将收到一个新的通知，然后必须接受它。

# c# - 如何使用 EF 在 MVC Code-first 中更新/创建多对多关系数据？

> ID：11385429
> 
> 赞同：6
> 
> 时间：2012-07-08T18:09:15.393
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, many-to-many

我仔细研究了 StackOverflow、Google 和 asp.net，试图找到一个明确的基本示例来说明如何做到这一点。所有示例都是抽象的或涉及不适用的复杂情况。我无法从它们中提取很多有用的信息。到目前为止，他们都没有完全回答我的问题或解决我的问题。

我正在使用以下模型开发一个 MVC 项目：

文章.cs：

```
public class Article
{

    public int ArticleId { get; set; }
    public string Title { get; set; }
    .
    .
    .
    public virtual ICollection<Category> Categories { get; set; }

    public Article()
    {
        Categories = new HashSet<Category>();
    }
} 
```

类别.cs：

```
public class Category
{
    public int CategoryId { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Article> Articles { get; set; }

    public Category()
    {
        Articles = new HashSet<Article>();
    }
} 
```

文章实体.cs：

```
public class ArticleEntities : DbContext
{
    public DbSet<Article> Articles { get; set; }
    public DbSet<Category> Categories { get; set; }

} 
```

一篇文章可以有很多分类，一个分类可以属于很多篇文章。

到目前为止，我可以保存/更新/创建除类别之外的所有文章字段。

我将它们表示为视图中的复选框。我可以将所选复选框的值获取到控制器中，但是，我每次尝试将它们与文章一起存储在数据库中都失败了。

我如何能：

1）保存编辑文章时，更新关系表中的现有关系而不创建重复项？

2）保存新文章时，在关系表中创建选择的关系？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T18:48:51.930

我假设您`CategoryId`从控制器发布操作中获得了一个 s 列表，一个`List<int>`或更一般的只是一个`IEnumerable<int>`.

> 1）保存编辑文章时，更新关系表中的现有关系而不创建重复项？

```
Article article; // from post action parameters
IEnumerable<int> categoryIds; // from post action parameters

using (var ctx = new MyDbContext())
{
    // Load original article from DB including its current categories
    var articleInDb = ctx.Articles.Include(a => a.Categories)
        .Single(a => a.ArticleId == article.ArticleId);

    // Update scalar properties of the article
    ctx.Entry(articleInDb).CurrentValues.SetValues(article);

    // Remove categories that are not in the id list anymore
    foreach (var categoryInDb in articleInDb.Categories.ToList())
    {
        if (!categoryIds.Contains(categoryInDb.CategoryId))
            articleInDb.Categories.Remove(categoryInDb);
    }

    // Add categories that are not in the DB list but in id list
    foreach (var categoryId in categoryIds)
    {
        if (!articleInDb.Categories.Any(c => c.CategoryId == categoryId))
        {
            var category = new Category { CategoryId = categoryId };
            ctx.Categories.Attach(category); // this avoids duplicate categories
            articleInDb.Categories.Add(category);
        }
    }

    ctx.SaveChanges();
} 
```

请注意，当您使用 a`ArticleViewModel`而不是a 时，代码也可以工作`Article`，因为属性名称是相同的（`SetValues`采用任意的`object`）。

> 2）保存新文章时，在关系表中创建选择的关系？

或多或少与上面的想法相同，但更简单，因为您不需要与数据库中的原始状态进行比较：

```
Article article; // from post action parameters
IEnumerable<int> categoryIds; // from post action parameters

using (var ctx = new MyDbContext())
{
    foreach (var categoryId in categoryIds)
    {
        var category = new Category { CategoryId = categoryId };
        ctx.Categories.Attach(category); // this avoids duplicate categories
        article.Categories.Add(category);
        // I assume here that article.Categories was empty before
    }
    ctx.Articles.Add(article);

    ctx.SaveChanges();
} 
```

# c++ - VNC 查看器实现

> ID：11385432
> 
> 赞同：1
> 
> 时间：2012-07-08T18:09:30.990
> 
> 标签：c++, multithreading, asynchronous, mfc, vnc

我们的团队正在 Windows 上实现 VNC 查看器（=VNC 客户端）。该协议（称为 RFB）是有状态的，这意味着查看器必须读取 1 个字节，看看它是什么，然后再读取 3 个或 10 个字节，解析它们，等等。

我们决定使用异步套接字和单个 (UI) 线程。因此，有两种方法：

1) 状态机——如果我们在读取套接字时遇到阻塞，只需记住当前状态并退出。稍后，套接字通知将到达，中断的逻辑将从正确的阶段恢复；

2）内部消息循环——一旦我们确定从套接字读取会阻塞，我们进入一个内部消息循环并在那里旋转直到最终接收到所有必要的数据。UI 不会因此在阻塞的情况下被冻结。

经验表明，第二种方法不好，因为当我们处于内部消息循环中时，任何消息都可能出现。我不能在这里讲述完整的故事，但它根本不够可靠。崩溃和kludges。

第一个选项似乎还可以接受，但要以这种风格进行编程并不容易。必须记住算法的状态和进一步处理所需的所有局部变量的值。

这很可能使用多线程，但我们只是认为这种情况下的问题会更加困难：帧缓冲区访问的同步、多线程问题等。此外，即使在这种变体中，似乎也有必要使用异步套接字也是如此。

那么，您认为最好的方法是什么？

这个问题很笼统。这就是通过有状态协议组织异步通信的问题。

**编辑 1：**我们使用 C++ 和 MFC 作为 UI 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:59:30.263

我已经完成了一些并行计算项目，似乎 MPI（消息传递接口）可能对您的 VNC 项目有所帮助。您可能对 MPI 提供的并行计算能力不太感兴趣，但您可能希望使用简化的类套接字接口通过网络进行异步通信。

[http://www.open-mpi.org/](http://www.open-mpi.org/)

您可以从 google 找到 MPI 的其他实现和大量使用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:24:29.717

不要为 CSocket 烦恼，由于您获得了额外的控制（中断、关闭等），您最终将转向 CAsyncSocket。我还建议使用单独的线程来管理通信，它增加了复杂性，但保持 UI 响应应该是重中之重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T21:12:08.083

我想你会发现使用单独的线程来处理阻塞套接字会大大简化你的设计。

这样做的主要原因是您不需要旋转和等待。UI 保持响应，而网络线程在无事可做时阻塞并在它有事可做时返回。您正在有效地将大部分开销转移到操作系统上。

请记住，RFB 不需要大量的状态信息即可工作。因为客户端到服务器的消息很短；在发送下一个指针输入之前，没有什么要求您接收帧缓冲区。

我的观点是 RFB 中的消息可以混合使用；服务器将按照您的日程安排工作。

现在，Windows 提供了易于使用的同步 API，虽然并不总是最有效的，但对于您的目的来说已经绰绰有余，并且可以轻松地进行概念验证。看看[Windows 同步](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686353%28v=vs.85%29.aspx) ，特别是[关键部分](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608%28v=vs.85%29.aspx)

只是我的 2cents，我已经在 windows 上实现了 vnc 服务器和客户端，这些是我的印象。

# php - javascript客户端时间到php服务器时间

> ID：11385434
> 
> 赞同：1
> 
> 时间：2012-07-08T18:09:40.053
> 
> 标签：php, javascript, timezone

我最难将客户端时间转换为服务器时间。原因是我每小时执行一次 cron 作业。我设法在java脚本中获取时区偏移量，但我对如何应用时区偏移量一无所知。例如，我的时区偏移量是 7。好吧！？那又如何？我应该如何应用这个偏移量？

要获得我使用的偏移量

```
var offset = new Date().getTimezoneOffset(); 
```

服务器端由 php 处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:56:30.873

正如其他人在评论中所说，最好的方法是使用 UNIX 时间戳。要在 JavaScript 中获取此信息，请使用以下代码：

```
var date = Math.round(new Date().getTime() / 1000); 
```

`getTime`返回以毫秒为单位的值，但我们想要以秒为单位的值，因此我们将其除以 1000。

然后，您可以使用 AJAX 将该值发送到服务器，或者将该值放在隐藏的表单字段中，并在用户提交表单时将其发送到服务器。

在 PHP 中，您可以像这样获取日期：

```
$date = new DateTime();
// 1341773609 is the UNIX timestamp, which I got from running the above
// JavaScript and alerting the date
$date->setTimestamp(1341773609);
echo $date->format('Y-m-d H:i:s'); 
```

# javascript - 返回多个函数

> ID：11385438
> 
> 赞同：5
> 
> 时间：2012-07-08T18:10:31.430
> 
> 标签：javascript

我是 javascript 新手，所以如果这完全错误，我深表歉意，但我现在正在尝试验证表单，并且我有简单的测试功能。我希望函数 validateForm() 返回所有三个函数 checkName()、checkEmail 和 checkMessage()。我拥有 validateForm() 函数的方式，它只运行 checkName() 函数。有任何想法吗？

```
function checkName(){

    var name=document.forms["contactForm"]["Name"].value;

    if(name==null || name==""){
        $("input#name").css("border-color", "#ff0000");
        $("input#name").attr("placeholder","Your name is required");
        return false;    
    }    
    else {
        $("input#name").css("border-color", "#00a8ff");
        $("input#name").attr("placeholder","");
        return true;
    }    
}

function checkEmail(){

    var email=document.forms["contactForm"]["Email"].value;

    if(email==null || email==""){
        $("input#email").css("border-color", "#ff0000");
        $("input#email").attr("placeholder","Your email is required");
        return false;    
    }    
    else {
        $("input#email").css("border-color", "#00a8ff");
        $("input#email").attr("placeholder","");
            return true;
        }
}

function checkMessage(){

    var message=document.forms["contactForm"]["Message"].value;

    if(message==null || message==""){
        $("textarea#message").css("border-color", "#ff0000");
        $("textarea#message").attr("placeholder","Your message is required");
        return false;    
    }    
    else {
        $("textarea#message").css("border-color", "#00a8ff");
        $("textarea#message").attr("placeholder","");
        return true;
    }
}

function validateForm(){

    return checkName() && checkEmail() && checkMessage();

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T18:14:43.717

运算符 && 执行左操作数（在您的情况下为 checkName ），如果为假，则立即返回假而不执行右操作数。因此，您需要手动执行每个函数，然后才能通过 && 连接它们。

```
function validateForm(){
    var a = checkName();
    var b = checkEmail();
    var c = checkMessage();
    return a && b && c;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-25T04:30:24.660

```
 var yourdomain = {};
 yourdomain.validateFormField = function(){
 var domNameElement = document.getElementById("name");
 var domMailElement = document.getElementById("mail");
 var domMsgElement  = document.getElementById("msg");

 return {
           validateName: function (){
           /*your checkName() code goes here with a function return*/;
           `enter code here`},

           validateMail: function (){
            /*your checkEmail() code goes here with a function return*/;
           },

           validateMsg: function (){
            /*your checkMessage() code goes here with a function return*/;
           },
       };
  } 
```

你可以这样称呼它。

`yourdomain.validateFormField.validateName()`

或者

`yourdomain.validateFormField.validateMail()`

或者

`yourdomain.validateFormField.validateMsg()`

视需要而定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T18:13:44.753

由于[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，您目前拥有的方式尝试按顺序评估它们。如果其中一项返回 false，则该过程结束。

> 短路表达式 x Sand y（用 Sand 表示短路变种）等价于条件表达式 if x then y else false；表达式 x Sor y 等价于 if x then true else y。

您想分别调用这些函数来执行每个检查：

```
function validateForm(){
    var results = [];
    result[0] = checkName();
    result[1] = varcheckEmail();
    result[2] = checkMessage();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T18:18:06.953

您遇到的情况称为短路。Javascript 逻辑运算符会做短路。这意味着如果您有表达式`test1() && test2()`并且第一个函数返回 false，那么整个表达式将始终评估为 false，但第二个函数返回什么。因此第二个函数永远不会被调用。如果第一个函数返回 true，则将调用第二个函数，因为它实际上会影响表达式的计算。

因此，如果`checkName()`返回 false，则不会调用其他函数。如果它返回true，那么`checkEmail()`将被调用。如果它也返回 true，那么`checkMessages()`也将被调用。但是，如果任何函数返回 false，则由于短路，其余函数将不会被评估。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-23T02:27:32.023

在我的 javascript 项目中，我这样做了。

```
return {
   checkName : checkName,
   checkEmail : checkEmail,
   checkMessage : checkMessage,
   validateForm : validateForm
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T18:15:19.583

如果 checkName() 为 false，则不会执行其他函数，因为结果仍然为 false。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-10T14:16:01.447

我做的和别人有点不一样。创建一个数组，添加我的验证方法的所有结果，然后比较每个值（AND）；

```
function ValidateInputs() {
    var arrValidations = new Array();

    arrValidations.push(ValidateProponentDocument());
    arrValidations.push(ValidateProponentName());
    arrValidations.push(ValidateProponentBirthdate());

    var ret = true;
    $.each(arrValidations, function (index, item) {
        ret &= item;
    });      

    return ret;
} 
```

# r - lapply 后的列名

> ID：11385443
> 
> 赞同：1
> 
> 时间：2012-07-08T18:11:52.613
> 
> 标签：r, lapply

我有这样填充的数据集：

```
tickers <- c("SPY","DIA")

 l_ply(tickers, function(sym) try(getSymbols(sym, from="2012-03-01",
 to=Sys.Date()))) 
```

`ClosePrices <- do.call(merge, lapply(tickers, function(x) Cl(get(x))))`

```
tail(ClosePrices)

          SPY.Close DIA.Close
2012-06-29    136.10    128.45
2012-07-02    136.51    128.36 
```

和

```
rsipx <- do.call(merge, lapply(ClosePrices, FUN=function(ClosePrices) RSI(ClosePrices)))  

    tail(rsipx)
           SPY.Close DIA.Close
2012-06-29  58.36391  58.92043
2012-07-02  59.37153  58.53483 
```

我无法解决的问题是当我应用一个为每个输入生成多个列的函数时。在这种情况下，ADX 产生 4 个值 (DIp DIn DX ADX)：

```
adxpx <- do.call(merge, lapply(tickers, FUN=function(tickers) ADX(get(tickers))))  
tail(adxpx)
               DIp      DIn       DX      ADX    DIp.1    DIn.1     DX.1    ADX.1
2012-06-29 53.47713 35.90631 19.65780 15.30299 55.14765 36.05527 20.93395 18.20818
2012-07-02 55.79485 32.58420 26.26262 16.08582 56.67699 33.08770 26.27903 18.78467 
```

如何获取相应的列名而不是数字？（DX.DIA 而不是 DX.1），还是只选择 $ADX 命名的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:24:25.507

只需`paste`将股票名称添加到您传递给的函数内的列名上`lapply`：

```
foo <- function(tickers){
    res <-  ADX(get(tickers))
    colnames(res) <- paste(colnames(res),tickers,sep = ".")
    res
}
adxpx <- do.call(merge, lapply(tickers, FUN=foo)) 
```

如果您只想要一列，您可以更改函数`foo`以仅选择该列。比如说，通过添加一行（在更改列名之前）之类的`res <- res[,4]`东西。

# objective-c - 在 Cocoa 中生成随机时间间隔

> ID：11385449
> 
> 赞同：0
> 
> 时间：2012-07-08T18:13:31.227
> 
> 标签：objective-c, cocoa, nstimer

我对 Cocoa 很陌生，但我正在尝试将一个简单的反应游戏放在一起。因此我需要随机生成 NSTimer 的时间间隔。目前我已经尝试了下面的代码。

```
int randomNumber = rand() %5;

changeColor = [NSTimer scheduledTimerWithTimeInterval:(randomNumber) target:self selector:@selector(changeBackground) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:26:00.933

如果您希望分辨率小于 1 秒，则应从随机数创建一个 double。或许是这样的：

```
int sourceRandom100x = rand() % 500; // i.e. 435
double randomInterval = sourceRandom100x/100.0  // 4.35

[NSTimer scheduledTimerWithTimeInterval:(randomInterval) ... 
```

但是该技术将在每次迭代中使用相同的间隔。如果您每次都想要一个新的随机间隔，请让计时器*不*重复，并在内部`changeBackground`设置另一个（通过委托给更合适命名的新方法，例如`-(void) setupRandomBackgroundChangeTimerIfNecessary`

# vb.net - 范围乘法 VB.NET（这段代码有什么问题？）

> ID：11385455
> 
> 赞同：2
> 
> 时间：2012-07-08T18:14:49.480
> 
> 标签：vb.net, excel, range, multiplication

（VB Express 级别：初级）

我想做以下，

工作簿 1
a中的一列

b

C

d

Workbook2
e 中的一列

F

G

H

输出到单个单元格

ae+bf+cg+dh

（输出是 Sumproduct。）

工作簿 1 有 44 行，工作簿 2 有 44 行。但工作簿 1 有 3 列，工作簿 2 有 104 列。工作簿 3 中的每一列必须与工作簿 2 中的 104 列相乘。

以下是我的努力，它在列的所有单元格中写入相同的值。我的理解是我的 for 循环在某处是错误的。但我无法弄清楚出了什么问题。

```
'link to workbooks
oWB5 = oXL5.Workbooks.Open("D:\1.xlsx")
oWB6 = oXL6.Workbooks.Open("D:\2.xlsx")
oWB7 = oXL7.Workbooks.Open("D:\outputs.xlsx")

'link to worksheets
oSheet5 = oWB5.Worksheets("Inputs")
oSheet6 = oWB6.Worksheets("Coef")
oSheet7 = oWB7.Worksheets("Sheet1")

' ranges to be considerd,
' oWB5 range C22 to C66
' oWB6 range C3 to C47
' oWB7 range C2 to C104 (because there are 104 columns in oWB6) 

'multiplication of ranges

For j = 3 To 47
For i = 2 to 104
For k = 2 to 4 
For l = 22 to 66
oSheet7.Cells(i, k).Value = (oSheet5.Cells(l, k).value * oSheet6.Cells(j, i+1).value) + (oSheet5.Cells(l+1, k).value * oSheet6.Cells(j + 1, i+1).value)
Next
Next
Next
Next 
```

帮助将不胜感激。我现在为此苦苦挣扎了两天。

![源工作表](../Images/de06a2ac5af743afd1dd13a5077dfabe.png)

![所需输出](../Images/742bdf9bc3705d4ff40bc4439213de5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:08:31.453

感谢您更详细地重新发布此问题。我在下面写了一个循环，其中包含我相信可以实现您想要做的事情的评论。

```
 'link to workbooks
   oWB5 = oXL5.Workbooks.Open("D:\1.xlsx")
   oWB6 = oXL6.Workbooks.Open("D:\2.xlsx")
   oWB7 = oXL7.Workbooks.Open("D:\outputs.xlsx")

   'link to worksheets
   oSheet5 = oWB5.Worksheets("Inputs")
   oSheet6 = oWB6.Worksheets("Coef")
   osheet7 = oWB7.Worksheets("Sheet1")

   ' ranges to be considerd,
   ' oWB5 range C22 to C66
   ' oWB6 range C3 to C47
   ' oWB7 range C2 to C104 (because there are 104 columns in oWB6)

   'multiplication of ranges

   Dim lngOutputCounter As Long

   For i = 1 To 104 'for each column WB6
       For j = 1 To 3 'for each column WB5
           lngOutputCounter = 0 'reset to 0
           For k = 1 To 44 'loop through 44 rows
               'multiply the two cells and keep a running total
               '- 21+k to start at row 22, 2+k to start at row 3, 2+j and 2+i because        columns start at C
               lngOutputCounter = lngOutputCounter + oSheet5.Cells(21 + k, 2 + i).Value * oSheet6.Cells(2 + k, 2 + j).Value
           Next k

           'whatever column sheet2 was on becomes row here, j is still the same column        (1-3)
           '- i+i to output to row 2 first, 2+j to output to column C first
           osheet7.Cells(1 + i, 2 + j).Value = lngOutputCounter

       Next j
   Next i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:01:12.267

这是使用 Excel 的 SUMPRODUCT 公式的简单方法。这样，您就可以让 Excel 为您完成繁琐的工作。这样做的好处是它可以为你节省很多循环:)

**久经考验**

```
Imports Excel = Microsoft.Office.Interop.Excel

Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim xlApp As New Excel.Application    
        Dim oWB5 As Excel.Workbook = xlApp.Workbooks.Open("C:\1.xlsx")
        Dim oWB6 As Excel.Workbook = xlApp.Workbooks.Open("C:\2.xlsx")
        Dim oWB7 As Excel.Workbook = xlApp.Workbooks.Open("C:\outputs.xlsx")    
        Dim oSheet7 As Excel.Worksheet = oWB7.Worksheets("Sheet1")

        With oSheet7
            For i = 1 To 8
                For j = 1 To 104
                    Dim Col1Nm As String = Split(.Cells(, j).Address, "$")(1)
                    Dim Col2NM As String = Split(.Cells(, i).Address, "$")(1)
                    .Cells(i, j).Value = xlApp.Evaluate("=SUMPRODUCT(([1]Inputs!" & Col1Nm & "1:" & _
                    Col1Nm & "44)*([2]Coef!" & Col2NM & "1:" & Col2NM & "44))")
                Next
            Next    
        End With

        '~~> Close workbook and quit Excel
        oWB5.Close (False)
        oWB6.Close (False)
        oWB7.Close (True)

        xlApp.Quit()

        '~~> Clean Up
        releaseObject (oWB5)
        releaseObject (oWB6)
        releaseObject (oWB7)
        releaseObject (xlApp)

        MessageBox.Show("done")
    End Sub

    Private Sub releaseObject(ByVal obj As Object)
        Try
            System.Runtime.InteropServices.Marshal.ReleaseComObject (obj)
            obj = Nothing
        Catch ex As Exception
            obj = Nothing
        Finally
            GC.Collect()
        End Try
    End Sub
End Class 
```

**IMP 注意**：如果您的实际文件名不是 1.xlsx 和 2.xlsx，则更改这部分代码

```
xlApp.Evaluate("=SUMPRODUCT(([1]Inputs!" & Col1Nm & "1:" & _
Col1Nm & "44)*([2]Coef!" & Col2NM & "1:" & Col2NM & "44))") 
```

代替

1.  [1] by [实际文件名]
2.  [2] by [实际文件名]
3.  [实际工作表名称]的输入和
4.  Coef by [实际工作表名称]

# r - 将 xts 数据加载到 R 中的函数

> ID：11385457
> 
> 赞同：0
> 
> 时间：2012-07-08T18:15:00.277
> 
> 标签：r, function, load, xts

我正在尝试编写一个函数，将一些 xts 数据加载到**R**中，并按我指定的日期/时间对它们进行排序。也许我正在尝试一种过于简单的方法，但这是我的代码：

```
load.data <- function (x, time1, time2) #x is going to be the actual file name
{
    vector = get(load("C:/Users/username/Desktop/x"))
    sortvector = vector['time1/time2/']
    return (sortvector)
} 
```

当我执行它时，我收到消息：

```
In readChar(con, 5L, useBytes = TRUE) :
  cannot open compressed file 'C:/Users/username/Desktop/x', probable reason 'No such file or directory' 
```

那么，我怎样才能让我的函数真正搜索文件名，而不是实际的通用“x”？我希望我很清楚，我当然会非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:22:33.110

使用`paste`或`paste0`

```
load.data <- function (x, time1, time2) #x is going to be the actual file name
{
    vector = get(load(paste0("C:/Users/username/Desktop/", x)))
    sortvector = vector[paste(time1, time2, sep='/')]
    return(sortvector)
} 
```

另外，查看`?FinancialInstrument:::saveSymbols.days`and `?FinancialInstrument:::getSymbols.FI`，或查看这些函数的代码以获取保存和加载`xts`对象的示例

**编辑**

这是一个例子

```
set.seed(123)
dat <- xts(cumsum(rnorm(100)), as.POSIXct("2012-05-23") + 1:100*60*60*6)
tmpdir <- tempdir()
save(dat, file=file.path(tmpdir, "dat.RData"))
rm('dat') 

time1 <- "2012-05-24 10:00:00"
time2 <- "2012-05-25 11:00:00"
vector = get(load(paste(tmpdir, "dat.RData", sep="/")))
sortvector = vector[paste(time1, time2, sep='/')]
sortvector
#                         [,1]
#2012-05-24 12:00:00 -2.044404
#2012-05-24 18:00:00 -2.829308
#2012-05-25 00:00:00 -4.497250
#2012-05-25 06:00:00 -4.877477 
```

# android - 插入 SQLite

> ID：11385460
> 
> 赞同：2
> 
> 时间：2012-07-08T18:15:44.723
> 
> 标签：android, sqlite

我正在尝试将文本消息从收件箱插入到 SQLite 数据库，但由于某些特殊字符/符号无法正确插入。

我在 Stackoverflow 中遇到了一些问题，但似乎没有任何用处。

我得到了这个代码，但它不起作用。

```
data.execSQL("INSERT INTO recor(text) VALUES('"+DatabaseUtils.sqlEscapeString(messag)+"')"); 
```

我的数据库中只有一个字段，并且正在尝试插入消息的详细信息。我将详细信息（类型、时间、数字、消息）放在一个字符串中`message`，并且`recor`是我的表名。

这就是我在使用 try catch 循环时得到的结果。

错误就在附近：

> “FROM”：语法错误：INSERT INTO 记录（文本）值（“FROM 15555215556 消息：-MSG”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:22:13.643

改为使用 DatabaseAdapter 的插入方法。例如

```
ContentValues values = new ContentValues();
values.put(COLUMN_NAME, value);
dbAdapter.insert(TABLE_NAME, null, values); 
```

看起来您的列名是“文本”？这一定是错误的，因为 text 是 sqlite 中的关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:54:16.413

您的最终 SQL 字符串似乎在您插入的字符串周围包含两组引号，因此我假设该`DatabaseUtils.sqlEscapeString`方法在字符串周围添加了自己的引号。

因此，您的代码应该是：

`data.execSQL("INSERT INTO recor(text) VALUES("+DatabaseUtils.sqlEscapeString(messag)+")");`

# android - findViewById 在片段中返回 null

> ID：11385461
> 
> 赞同：8
> 
> 时间：2012-07-08T18:15:50.147
> 
> 标签：android, android-layout, android-fragments

我正在用新片段替换现有片段，我可以看到我的视图，但是在按钮上设置点击侦听器时，它返回 null 。我得到以下异常：

```
?:??: W/?(?): java.lang.NullPointerException
?:??: W/?(?):   at com.biggu.shopsavvy.fragments.xxxxxxxx.onCreateView(xxxxxx.java:34)
?:??: W/?(?):   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
?:??: W/?(?):   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
?:??: W/?(?):   at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
?:??: W/?(?):   at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
?:??: W/?(?):   at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
?:??: W/?(?):   at android.os.Handler.handleCallback(Handler.java:615)
?:??: W/?(?):   at android.os.Handler.dispatchMessage(Handler.java:92)
?:??: W/?(?):   at android.os.Looper.loop(Looper.java:137)
?:??: W/?(?):   at android.app.ActivityThread.main(ActivityThread.java:4745)
?:??: W/?(?):   at java.lang.reflect.Method.invokeNative(Native Method)
?:??: W/?(?):   at java.lang.reflect.Method.invoke(Method.java:511)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
?:??: W/?(?):   at dalvik.system.NativeStart.main(Native Method) 
```

我不知道发生了什么？

OnCreateView 上的代码：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.capture_card_phone_number, container, false);
        mPhone = (AutoCompleteTextView) getActivity().findViewById(R.id.phone_number);
        Button next = (Button) getActivity().findViewById(R.id.capture_phone_next);
        next.setOnClickListener(this);
        // next.setEnabled(false);

        return view; 
```

我还导入了 com.big.xxxxxxx.R

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-08T19:30:36.553

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle 

    savedInstanceState) {
            View view = inflater.inflate(R.layout.capture_card_phone_number, container, false);
            mPhone = (AutoCompleteTextView) getActivity().findViewById(R.id.phone_number);
            Button next = (Button) view.findViewById(R.id.capture_phone_next);
            next.setOnClickListener(this);

            return view; 
```

您必须在您的视图上调用 findViewById - 而不是在您的活动上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T10:09:10.467

原因是 onCreateView 中 Fragment 的视图还没有创建，所以它返回 null。尝试在 onResume 中执行它，它将返回视图：

```
@Override
public void onResume() {
    super.onResume();
    mPhone = (AutoCompleteTextView) getActivity().findViewById(R.id.phone_number);
    Button next = (Button) getActivity().findViewById(R.id.capture_phone_next);
    next.setOnClickListener(this);   
} 
```

# android - 如何在android中获取包的pid

> ID：11385463
> 
> 赞同：1
> 
> 时间：2012-07-08T18:15:58.467
> 
> 标签：android, android-intent, android-package-managers

我已经完成了获取android系统中所有已安装包的编码！现在我想要的是获取该包的 pid，因为我想要包的当前资源使用情况！我不知道这样做的方法，我知道它的反面！:) 我也不想使用外壳！有没有办法做到这一点！否则我会说明我想做什么并建议我一个更好的方法..

我想要的是 ：

我创建了一个活动，我在其中获取所有当前安装的第三方应用程序或系统。使用包管理器获取它！我在布局上列出了它，当我单击一个应用程序时，我希望它指向另一个屏幕，其中显示了有关该应用程序的所有详细信息。我已经有了一些使用应用程序包名称的详细信息。问题是，我想显示内存信息和应用程序的代码大小！我怎么能做到这一点！:)

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:58:33.720

PID 在 Android 中表示为进程 ID。正如您所说，您需要所有已安装应用程序的进程 ID，但 afaik PID 已提供给正在运行的应用程序/服务/进程，因此您不能要求所有已安装应用程序的进程 ID。

您可以使用以下代码获取所有正在运行的应用程序的 pid。

```
 RunningAppProcessInfo service[]= manager.getRunningAppProcesses();
 String = service.pid; 
```

# php - 保存画布图像（将数据字符串发布到 PHP）

> ID：11385471
> 
> 赞同：1
> 
> 时间：2012-07-08T18:17:15.463
> 
> 标签：php, javascript

我正在寻找学习 Javascript 并且一直想要学习一段时间，我有一个关于如何创建 HTML5 Canvas 绘图应用程序的小教程，我正在尝试修改它，以便我可以将图像保存到我的 MySQL 数据库中。到目前为止，下面的代码只是重定向到我的 PHP 文件并且确实有我想要的代码，但是它有点大，所以我想知道是否有办法减少它，甚至可能 _POST 到 PHP 脚本。

```
 saveAsPNG : function(oCanvas, bReturnImg, iWidth, iHeight) {
        if (!bHasDataURL) {
            return false;
        }
        var oScaledCanvas = scaleCanvas(oCanvas, iWidth, iHeight);
        var strData = oScaledCanvas.toDataURL("image/png");
        window.location.href = "http://localhost/save_server/?image=" + strData;
        if (bReturnImg) {
            return makeImageObject(strData);
        } else {
            saveFile(strData.replace("image/png", strDownloadMime));
        }
        return true;
    }, 
```

我正在使用 window.location.href 发送数据。任何帮助，将不胜感激。它当前提供的 URL 是...

localhost/save_server/?image=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4EAAAIUCAYAAACkdimIAAAgAElEQVR4Xu3XQQEAAAgCMelf2iA3GzD8sHMECBAgQIAAAQIECB... 你知道吗？它太大了，我什至不打算在这里发布它。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:24:47.487

使用, 并通过方法`form`发送字节：`POST`

```
var form = document.createElement("form");
form.setAttribute("action","http://localhost/save_server/");
form.setAttribute("enctype","multipart/form-data");
form.setAttribute("method","POST");
form.setAttribute("target","_self");
form.innerHTML = '<input type="hidden" name="image" value="'+strData+'"/>';
form.submit(); 
```

# php - CakePHP 在不破坏 Cake 自动化的情况下自行加入 HABTM 表

> ID：11385472
> 
> 赞同：2
> 
> 时间：2012-07-08T18:17:24.313
> 
> 标签：php, cakephp, has-and-belongs-to-many, cakephp-model

我有一张运动员桌。运动员有教练，教练也是运动员。运动员可能有多名教练。

为了处理这个问题，我创建了一个运动员表，它使用一个带有 id 字段、运动员 ID 字段和 Coach_id 字段的连接表。运动员 ID 和教练 ID 字段都指向运动员表的 id 字段。

通常，根据 Cake 约定，我必须将我的两个字段都命名为运动员 ID，但我发现以下链接显示了如何处理它： [http ://book.cakephp.org/1.2/view/851/Multiple-同模型关系](http://book.cakephp.org/1.2/view/851/Multiple-relations-to-the-same-model)

根据 Cake 的约定，我将加入表命名为运动员运动员，但我不确定它是否能正常工作？将其称为运动员教练似乎是有意义的，但我敢打赌这可能会破坏 Cake 的自动功能。

这是否适用于被称为运动员运动员的连接表？这是正确的方法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T22:57:39.283

这是我第一次在这里回答问题，所以如果我的回答不标准，我提前道歉。不久前，我写了一个社交网络应用程序，它带有一个用户模型，它有一个 HABTM 自我加入。假设“friends_users”的连接表，我的用户模型关联看起来像这样：

```
public $hasAndBelongsToMany = array(
'Friend' => array(
    'className' => 'User',
    'joinTable' => 'friends_users',
    'foreignKey' => 'user_id',
    'associationForeignKey' => 'friend_id', 
    'unique' => true
)
); 
```

假设我想为特定用户创建所有朋友姓名的列表，我可以做这样的事情。

```
<ul>
<?php foreach($user['User']['Friend'] as $friend): ?>
<li><?php echo $friend['name']; ?></li>
<?php endforeach; ?>
</ul> 
```

因此，只要您在 HABTM 关联中指定表的新名称、foreignKey 和 associatedForeignKey 以便正确覆盖，您将连接表命名为什么并不重要（我仍然尝试遵循良好的蛋糕命名约定）蛋糕默认值。所以在你的情况下，你可以在你的运动员模型中做这样的事情（假设有一个运动员教练的连接表）：

```
public $hasAndBelongsToMany = array(
'Coach' => array(
    'className' => 'Athlete',
    'joinTable' => 'athletes_coaches',
    'foreignKey' => 'athlete_id',
    'associationForeignKey' => 'coach_id', 
    'unique' => true
)
); 
```

要显示特定运动员的教练列表（可能在运动员的视图方法中），您可以执行以下操作：

```
<ul>
<?php foreach($athlete['Athlete']['Coach'] as $coach): ?>
<li><?php echo $coach['name']; ?></li>
<?php endforeach; ?>
</ul> 
```

# cuda - 扫描阵列 CUDA

> ID：11385475
> 
> 赞同：0
> 
> 时间：2012-07-08T18:17:34.823
> 
> 标签：cuda

我正在尝试使用 CUDA 扫描一个简单的数组，但下面的代码似乎有问题..我试图找出我做错了什么，但我不能。谁能帮助我？

```
#include <stdio.h>
#include <stdlib.h>

__global__ void prescan(int *g_odata, int *g_idata, int n){

    extern __shared__ int temp[];// allocated on invocation
    int thid = threadIdx.x;
    int offset = 1;
    temp[2*thid] = g_idata[2*thid]; // load input into shared memory
    temp[2*thid+1] = g_idata[2*thid+1];

    for (int d = n>>1; d > 0; d >>= 1){ // build sum in place up the tree
        __syncthreads();
        if (thid < d){

            int ai = offset*(2*thid+1)-1;
            int bi = offset*(2*thid+2)-1;
            temp[bi] += temp[ai];
        }
        offset *= 2;
    }

    if (thid == 0) { temp[n - 1] = 0; } // clear the last element

    for (int d = 1; d < n; d *= 2){ // traverse down tree & build scan
        offset >>= 1;
        __syncthreads();
        if (thid < d){

            int ai = offset*(2*thid+1)-1;
            int bi = offset*(2*thid+2)-1;
            int t = temp[ai];
            temp[ai] = temp[bi];
            temp[bi] += t;
        }
    }

    __syncthreads();

    g_odata[2*thid] = temp[2*thid]; // write results to device memory
    g_odata[2*thid+1] = temp[2*thid+1];
}

int main(int argc, char *argv[]){

    int i;
    int *input = 0;
    int *output = 0;
    int *g_idata = 0;
    int *g_odata = 0;

    int numblocks = 1;
    int radix = 16;

    input = (int*)malloc(numblocks*radix*sizeof(int));
    output = (int*)malloc(numblocks*radix*sizeof(int));

    cudaMalloc((void**)&g_idata, numblocks*radix*sizeof(int));
    cudaMalloc((void**)&g_odata, numblocks*radix*sizeof(int));

    for(i=0; i<numblocks*radix; i++){
            input[i] = 1 + 2*i;
    }

    for(i=0; i<numblocks*radix; i++){
        printf("%d   ", input[i]);
    }

    cudaMemcpy(g_idata, input, numblocks*radix*sizeof(int), cudaMemcpyHostToDevice);

    prescan<<<1,8>>>(g_odata, g_idata, numblocks*radix);

    cudaThreadSynchronize();

    cudaMemcpy(output, g_odata, numblocks*radix*sizeof(int), cudaMemcpyDeviceToHost);

    for(i=0; i<numblocks*radix; i++){
        printf("%d   ", output[i]);
    }

    free(input);
    free(output);
    cudaFree(g_idata);
    cudaFree(g_odata);

    return 0;
} 
```

输出是这样的：1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.我想要这个输出：1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 0 1 4 9 16 25 36 49 64 81 100 121 144 169 196 225

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-19T16:21:23.373

只需通过此代码即可在并行环境中实现扫描。我这里实现的算法是 Hillis Steele 独占扫描。我通过共享内存实现算法，它肯定会提高大数据集的执行时间。

```
#include<stdio.h>
#include<math.h>
__global__ void scan(int *d_in,int *d_out,int n)
{
    extern __shared__ int sdata[];
    int i;
    int tid = threadIdx.x;
    sdata[tid] = d_in[tid];
    for (i = 1; i <n; i <<= 1)
     {

        if (tid>=i)
         {
            sdata[tid] +=sdata[tid-i];
        }
        __syncthreads();
    }
    d_out[tid] = sdata[tid];
     __syncthreads();
 }

int main()
 {

    int h_in[16],h_out[16];
     int i,j;
     for (i = 0; i < 16; i++)
        h_in[i] = 2*i+1;
    for (i = 0; i < 16; i++)
        printf("%d ", h_in[i]);
   int *d_in;
   int *d_out;
   cudaMalloc((void**)&d_in, sizeof(int)* 16);
   cudaMalloc((void**)&d_out, sizeof(int)* 16);
   cudaMemcpy(d_in, h_in, sizeof(int) * 16, cudaMemcpyHostToDevice);

   scan <<<1, 16, sizeof(int)*16 >>>(d_in,d_out, 16);

   cudaMemcpy(h_out, d_out, sizeof(int) * 16, cudaMemcpyDeviceToHost);
   for (i = 0; i < 16; i++)
      printf("%d ", h_out[i]);
  return 0;
} 
```

# php - 如何使用每组最少 n 个查询进行左连接？

> ID：11385483
> 
> 赞同：4
> 
> 时间：2012-07-08T18:18:21.930
> 
> 标签：php, mysql, database, greatest-n-per-group

我试图让一个有点复杂的查询工作并且没有任何运气。

假设我有以下表格：

**购物车物品：**

```
+--------------------------------------------+
| item_id  | cart_id | movie_name | quantity |
+--------------------------------------------+
|     0    |    0    | braveheart |    4     |
|     1    |    0    | braveheart |    9     |
|     .    |    .    |      .     |    .     |
|     .    |    .    |      .     |    .     |
|     .    |    .    |      .     |    .     |
|     .    |    .    |      .     |    .     |
+--------------------------------------------+ 
```

**电影：**

```
+------------------------------+
| movie_id  | movie_name | ... |
+------------------------------+
|     0     | braveheart |  .  |
|     .     |     .      |  .  |
|     .     |     .      |  .  |
|     .     |     .      |  .  |
|     .     |     .      |  .  |
+------------------------------+ 
```

**价钱：**

```
+-----------------------------------------+
| id  | movie_name | quantity | price_per |
+-----------------------------------------+
|  0  | braveheart |    1     |   1.99    |
|  1  | braveheart |    2     |   1.50    |
|  2  | braveheart |    4     |   1.25    |
|  3  | braveheart |    8     |   1.00    |
|  .  |      .     |    .     |     .     |
|  .  |      .     |    .     |     .     |
|  .  |      .     |    .     |     .     |
|  .  |      .     |    .     |     .     |
|  .  |      .     |    .     |     .     |
+-----------------------------------------+ 
```

我需要加入表中的数据，但增加了我需要`price_per`从`pricing`表中获得适当的复杂性。每个 应该只返回一个价格`cart_item`，这应该是`pricing`表中的最低价格，其中`quantity`购物车项目至少是`pricing`表中的数量。

因此，查询应该为以下每个项目返回`cart_items`：

```
+---------------------------------------------+
| item_id | movie_name | quantity | price_per |
+---------------------------------------------+ 
```

示例 1：

传递给查询的变量：cart_id = 0。返回：

```
+---------------------------------------------+
| item_id | movie_name | quantity | price_per |
+---------------------------------------------+
|    0    | braveheart |    4     |   1.25    |
|    1    | braveheart |    9     |   1.00    |
+---------------------------------------------+ 
```

请注意，这是一个极简示例，将从提到的表（尤其是电影表）中提取附加数据。

这个查询是如何组成的？我曾尝试使用左连接和子查询，但困难的部分是获得价格，而我尝试过的任何方法都没有奏效。

谢谢你的帮助。

编辑：

我认为这与我使用“真实”表的情况类似：

```
SELECT t1.item_id, t2.movie_name, t1.quantity
FROM cart_items t1
LEFT JOIN movies t2 ON t2.movie_name = t1.movie_name
WHERE t1.cart_id = 0 
```

假设我写的正确（我很快尝试“移植”我的真实查询），那么当前的输出将是：

```
+---------------------------------+
| item_id | movie_name | quantity |
+---------------------------------+
|    0    | braveheart |    4     |
|    1    | braveheart |    9     |
+---------------------------------+ 
```

我遇到的麻烦是以一定数量的电影加入价格。我根本不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:11:04.273

```
SELECT t1.item_id, t1.movie_name, t1.quantity, t2.price_per
FROM cart_items t1
        INNER JOIN (
            SELECT c.quantity, c.movie_name, IF(p.price_per IS NOT NULL, MAX(p.price_per), MIN(p2.price_per)) AS `price_per`
            FROM cart_items c
                LEFT JOIN pricing p 
                    ON p.movie_name = c.movie_name 
                    AND p.quantity >= c.quantity
                LEFT JOIN pricing p2
                    ON p2.movie_name = c.movie_name 
                    AND p2.quantity < c.quantity
            GROUP BY c.quantity, c.movie_name
        ) t2 ON t2.movie_name = t1.movie_name AND t2.quantity = t1.quantity 
```

小提琴：[http ://sqlfiddle.com/#!2/072e8](http://sqlfiddle.com/#!2/072e8)

问候。

# c - 当有`LD_LIBRARY_PATH`时使用`-L`有什么意义？

> ID：11385484
> 
> 赞同：0
> 
> 时间：2012-07-08T18:18:21.987
> 
> 标签：c, linux, gcc, linker

读完[这个问题](https://stackoverflow.com/questions/11385331/c-program-linking-with-shared-library-without-setting-ld-library-path/11385376#comment15006786_11385376)后，我的第一反应是用户没有看到错误，因为他指定了库的位置`-L`。

但是，显然，该`-L`选项只影响链接器的外观，而不会影响您尝试运行已编译的应用程序时加载器的外观。

那么我的问题是有什么意义`-L`呢？既然除非你有正确的目录，否则你将无法运行你的二进制文件`LD_LIBRARY_PATH`，为什么不把它们放在首位，然后删除`-L`, 因为链接器会`LD_LIBRARY_PATH`自动查找呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T18:28:30.867

可能是您正在交叉编译并且链接器的目标系统不是您自己的系统。例如，MinGW 可用于在 Linux 上编译 Windows 二进制文件。这里`-L`将指向链接所需的 DLL，`LD_LIBRARY_PATH`并将指向链接器运行所需的任何库。这允许编译和链接不同的架构、操作系统 ABI 或处理器类型。

在尝试构建特殊目标时它也很有帮助。我可能会将程序的静态版本链接到不同的静态库。这是 Linux From Scratch 的第一步，在主系统上创建一个单独的迷你环境以成为`chroot`监狱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T18:29:21.917

设置`LD_LIBRARY_PATH`将影响您为构建代码而运行的所有命令（包括编译器本身）。

这通常是不可取的（例如，您可能不希望您的编译器在编译时运行调试/检测库 - 它甚至可能会破坏您的编译）。

用于`-L`告诉编译器在哪里查找，`LD_LIBRARY_PATH`以影响运行时链接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T19:01:13.483

*构建*二进制文件和*运行*二进制文件是两个完全独立且不相关的过程。您似乎建议运行环境应该影响构建环境，即您似乎假设在某些设置（帐户，机器）中构建的代码稍后将在相同的设置中运行。我觉得这个假设很奇怪。我什至会说，在大多数情况下，构建和运行是在不同的环境中完成的。实际上，我希望我的编译器不要从调用这些编译器的环境中得出关于未来运行环境的任何假设。查看`LD_LIBRARY_PATH`构建环境将是一个主要的禁忌。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-08T21:36:46.867

其他答案都很好，但还没有人提到的是静态库。大多数情况下，当您使用`-L`它时，您会使用在您的构建树中本地构建的静态库，您不打算安装它，它与`LD_LIBRARY_PATH`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T20:05:49.673

Solaris 上的编译器支持`-R /runtime/path/to/some/libs`添加到运行时链接器搜索库的路径。在 Linux 上也可以使用`-Wl,-rpath,/runtime/path/to/some/libs`. 它将`-rpath /runtime/path/to/some/libs`选项传递给`ld`. GNU`ld`还支持`-R /path/to/libs`与其他 ELF 链接器的兼容性，但应该避免这种情况，因为`-R`通常用于为 GNU 指定符号文件`ld`。

# apache-flex - Flex：PopUpManager 给出“...空对象引用”错误

> ID：11385488
> 
> 赞同：2
> 
> 时间：2012-07-08T18:18:58.850
> 
> 标签：apache-flex

我有一个主应用程序调用几个 ViewStack 状态，每个状态都有弹出窗口。如果我不打开任何弹出窗口，我可以在状态之间移动。如果我打开一个弹出窗口，然后尝试使用`currentState=...`我收到错误来更改状态：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at spark.components::Scroller/focusInHandler()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Scroller.as:2139]
at flash.display::Stage/set focus()
at mx.core::UIComponent/setFocus() [E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:9905]
... 
```

我看到其他人也有同样的问题，例如这里：

[http://forums.adobe.com/thread/1031531](http://forums.adobe.com/thread/1031531)

[http://forums.adobe.com/message/2767130](http://forums.adobe.com/message/2767130)

[http://forums.adobe.com/message/3448443](http://forums.adobe.com/message/3448443)

[http://forums.adobe.com/thread/655749?tstart=-1](http://forums.adobe.com/thread/655749?tstart=-1)

[http://forums.adobe.com/thread/801149](http://forums.adobe.com/thread/801149)

[http://flex4examples.wordpress.com/2011/05/05/skinnabletextbase-focusmanager-runtime-error-popup/](http://flex4examples.wordpress.com/2011/05/05/skinnabletextbase-focusmanager-runtime-error-popup/)

[http://bugs.adobe.com/jira/browse/SDK-32036?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel](http://bugs.adobe.com/jira/browse/SDK-32036?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel)

但我还没有弄清楚如何实施推荐的解决方案。听起来我应该只包括：

```
import mx.managers.PopUpManager; PopUpManager; 
```

在我的主应用程序中，它应该可以工作，但对我不起作用。

我的应用程序在不同的文件中具有每个视图状态，每个视图状态都使用`<views:View>`. 此外，所有弹出窗口都是单独的文件，定义为`<s:TitleWindow>`. 每个文件都包含这一行：

```
import mx.managers.PopUpManager; 
```

我想知道这是否意味着每个文件都使用不同的弹出管理器（？），当它是一个单例并且整个应用程序应该只使用一个时（如何设置它？）。

我用来调用弹出窗口的代码是：

```
var _popupName:MyTitleWindowFileName = MyTitleWindowFileName(
    PopUpManager.createPopUp(this, MyTitleWindowFileName, true));   
_popupName.addEventListener(MyAppController.CLOSE_POPUP,onClosePopUp); 
PopUpManager.centerPopUp(_popupName); // call popup 
```

请注意，当主应用程序（定义为 的应用程序`<s:Application>`）运行时，ViewStack 状态尚未加载（因为它们在第一次使用时被加载）。不确定这是否有任何因果关系。

我尝试在此处的“将数据传入和传出 Spark 弹出窗口”部分中遵循 Adob​​e 的示例代码：

[http://help.adobe.com/en_US/flex/using/WS6c678f7b363d5da52e8f1ca1124a0430dcf-8000.html#WS6c678f7b363d5da52e8f1ca1124a0430dcf-7ffe](http://help.adobe.com/en_US/flex/using/WS6c678f7b363d5da52e8f1ca1124a0430dcf-8000.html#WS6c678f7b363d5da52e8f1ca1124a0430dcf-7ffe)

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:27:54.950

根据您的评论，似乎发生了错误，因为焦点仍在弹出窗口中。我希望`PopUpManager`and`FocusManager`类能更好地处理这个问题。

我能想到的一件事是 FocusManager*可能*正在尝试处理这个问题。但是由于状态发生变化，当视图状态发生变化时，最初具有焦点的项目（在视图堆栈子项中，在弹出窗口打开之前）可能不再存在。只是预感，看不到您的代码。

以下是您可以做的一些事情来解决问题（或更好地）进一步调试它以了解正在发生的事情：

*   用于`FocusManager.setFocus()`在关闭弹出窗口之前将焦点移回视图堆栈子项中的对象

*   用于`FocusManager.getFocus()`调试并查看它认为焦点在各个阶段的位置（打开弹出窗口之前、更改状态之前/之后以及关闭弹出窗口之前/之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:58:27.257

看来这是我正在经历的情况：

[Adobe Air：在不同应用程序之间更改焦点时，滚动条会引发错误](https://stackoverflow.com/questions/10621624/adobe-air-scroller-throws-error-when-changes-focus-between-different-applicatio)

这是一个 Adob​​e 错误。[Adobe 的解决方案](https://bugs.adobe.com/jira/browse/SDK-29522?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)是：

`This bug is easily fixed by changing Scroller to do a null pointer check on focusManager before using it.`

这就是上面的第一个链接尝试做的事情。

另一个链接：[http ://forums.adobe.com/message/3812805](http://forums.adobe.com/message/3812805)

# html - 形成类似标签的输入

> ID：11385489
> 
> 赞同：0
> 
> 时间：2012-07-08T18:18:58.917
> 
> 标签：html, css, forms

我什至不知道这叫什么，所以不知道从哪里开始，希望你们都能为我指明正确的方向。我正在尝试创建这样的东西：

![输入标签](../Images/8ba365710d1c50e6f55f03a1fd28bf3c.png)

这个想法是，当用户输入一些内容然后用逗号分隔时，他们在此表单字段中的输入将变成一个类似标签的小框，然后他们可以用 x 删除它。

关于从哪里开始的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:20:30.640

查看惊人的[jQuery selected](http://harvesthq.github.com/chosen/)，除其他外，它完全符合您的要求。

[select2](http://ivaynberg.github.com/select2/#tags)是一个类似的插件，它还允许您添加自己的标签（以及使用 AJAX 源）。

* * *

**从`select2`文档**更新：****

 **> 请注意，启用标记后，用户可以从预先存在的标记中进行选择，或者通过选择用户迄今为止在搜索框中键入的第一个选项来**创建新标记。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:21:45.323

看一下这个。[http://davidwalsh.name/dw-content/jquery-chosen.php](http://davidwalsh.name/dw-content/jquery-chosen.php)这是我猜想将完全适合您的应用程序的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T18:47:15.013

这是一个简单的例子：http: [//jsfiddle.net/9tzb4/](http://jsfiddle.net/9tzb4/)

HTML：

```
<form>
  Tags:
  <div class="tag_field">
    <input type="text">  
    <input type="hidden" name="tags">
  </div>

  <br>
  <input type="submit" value="Submit">
</form> 
```

CSS：

```
.tag_buttons {
  position: absolute;  
}

.tag_buttons div {
  display:inline-block;
  margin: 2px;
  border: 1px solid #666;
  padding: 1px;
}

.tag_field input[type=text] {
  padding: 5px;
  width: 300px;
  border: 1px solid #666;

} 
```

JavaScript：

```
$(".tag_field").each(function() {
  var buttons = $("<div/>");
  var input = $(this).find("input[type=text]");
  var output = $(this).find("input[type=hidden]");

  var update_padding = function() {
    input.css("padding-left", buttons.width() + 2);
  };       
  setInterval(update_padding, 300);

  $(this).prepend(buttons);
  buttons.addClass("tag_buttons");
  buttons.css({ left: input.offset().left + 1,
                top: input.offset().top + 2 });
  input.bind("keyup change paste", function() {
    var i = input.val().indexOf(",");
    if (i >= 0) {
      var new_tag = input.val().substr(0, i);
      input.val(input.val().substr(i+1));
      buttons.append("<div id='button'><span class='value'>"+new_tag+"</span> <span class='close'>(x)</span></div>");
    }
  });

  var form = $(this).closest("form");
  if (form.length > 0) {
    form.submit(function() {
      var v = [];
      form.find(".tag_buttons div").each(function() {
        v.push($(this).find(".value").html());      
      });

      output.val(v.join(","));
      return false;
    });          
  }

});
$(document).on("click", ".tag_buttons span.close", {}, function(e) {
  $(e.target).closest("div").detach();      
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:43:46.303

您可能会发现[jQuery 标签输入库](http://xoxco.com/projects/code/tagsinput/)很有帮助。它给了你这样的东西

![在此处输入图像描述](../Images/46c27ef7287adf7db55b5460d0850b49.png)**

# objective-c - 将导航栏添加到当前程序

> ID：11385490
> 
> 赞同：0
> 
> 时间：2012-07-08T18:19:02.850
> 
> 标签：objective-c, ios, cocoa-touch

我有一个带有包含三个选项卡的 Tabbar 控制器的应用程序。我需要将导航控制器添加到第一个选项卡。我的根视图控制器是标签栏，那么如何添加导航栏？我已经初始化导航栏，但不知道在哪里设置它。感谢任何可以提供帮助并询问您是否需要更多信息的人。这是我的应用程序 delegate.m：

```
#import "TACAppDelegate.h"
#import "FirstViewController.h"
#import "ThirdViewController.h"
#import "SecondViewController.h"

@implementation TACAppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary     *)launchOptions
{
/* Initialize window view */
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

/* Initialize tab bar controller, add tabs controllers */
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [self initializeTabBarItems];
self.window.rootViewController = self.tabBarController;

[self.window makeKeyAndVisible];
return (YES);
}

....

- (NSArray *)initializeTabBarItems
{
NSArray * retval;

/* Initialize view controllers */
FirstViewController *viewController1 = [[FirstViewController alloc] init];
SecondViewController *viewController2 = [[SecondViewController alloc] init];
ThirdViewController *viewController3 = [[ThirdViewController alloc] init];

/* Initialize navigation controllers */
UINavigationController *navigationController1 = [[UINavigationController alloc] initWithRootViewController:viewController1];

/* Stuff Navigation Controllers into return value */
retval = [NSArray arrayWithObjects:viewController1,viewController2,viewController3,nil];

return (retval);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:24:16.740

这是需要更改以在代码中执行此操作的行：

```
/* Stuff Navigation Controllers into return value */
retval = [NSArray arrayWithObjects:viewController1,viewController2,viewController3,nil]; 
```

在这里，您仍然将对原始 viewController1 的引用放入选项卡栏项的数组中。这不再是你想要的。您已经创建了导航控制器并将其根视图控制器设置为您的视图控制器 1，因此这是您需要放入选项卡栏项目列表的顶级引用。您的新行将如下所示：

```
/* Stuff Navigation Controllers into return value */
retval = [NSArray arrayWithObjects: navigationController1,viewController2,viewController3,nil]; 
```

这将创建一个控制器层次结构，如：

标签栏：[导航控制器：[VC1]，VC2，VC3]

# mysql - CREATE TABLE 语句中的 MySQL 语法错误

> ID：11385492
> 
> 赞同：1
> 
> 时间：2012-07-08T18:19:28.467
> 
> 标签：mysql

SQL查询：

```
CREATE TABLE  `comment_threads` (
 `comment_id` INT( 11 ) UNSIGNED NOT NULL DEFAULT  '0',
 `updated` TIMESTAMP NOT NULL ,
 `timestamp` TIMESTAMP NOT NULL ,
) ENGINE = MYISAM ; 
```

这是我试图通过 phpMyAdmin 在 HostGator 上运行的旧文件。我收到一条错误消息：

> MySQL 说：#1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 ') ENGINE=MyISAM' 附近使用正确的语法

更新：如果我将语句更改为此，我仍然会收到错误消息：

```
CREATE TABLE comment_threads (
comment_id INT( 11 ) UNSIGNED NOT NULL DEFAULT '0',
updated TIMESTAMP( 14 ) NOT NULL ,
timestamp TIMESTAMP NOT NULL
PRIMARY KEY ( comment_id ) )
ENGINE = MYISAM ; 
```

我得到错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '(14) NOT NULL , timestamp TIMESTAMP NOT NULL PRIMARY KEY (comment_id) ) ENGI' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T18:31:29.467

您的 MySQL 查询不正确。将其更正[为此](http://sqlfiddle.com/#!2/d010e)有效。

```
CREATE TABLE  `comment_threads` (
     `comment_id` INT(11) UNSIGNED NOT NULL DEFAULT '0',
     `updated` TIMESTAMP NOT NULL ,
     `timestamp` TIMESTAMP NOT NULL
  ) ENGINE=MyISAM; 
```

要在 phpMyAdmin 中运行它，您可以使用[内置的表创建器](http://php.about.com/od/learnmysql/ss/create_tables.htm)或在 SQL 查询窗口中输入更正后的 SQL 语句。

请注意，我在最后`TIMESTAMP NOT NULL`一行之后删除了逗号（就在结尾`)`.

更新：您发布的第二条语句更正了[这一点](http://www.sqlfiddle.com/#!2/06ca7)：

```
CREATE TABLE  `comment_threads` (
     `comment_id` INT(11) UNSIGNED NOT NULL DEFAULT '0',
     `updated` TIMESTAMP NOT NULL ,
     `timestamp` TIMESTAMP NOT NULL,
PRIMARY KEY(`comment_id`)
  ) ENGINE=MyISAM; 
```

以下是您在第二个`CREATE TABLE`陈述中介绍的问题：

1.  `TIMESTAMP( 14 )`应该只是`TIMESTAMP`（根据[文档](https://dev.mysql.com/doc/refman/5.5/en/datetime.html)）
2.  行后需要一个逗号`TIMESTAMP NOT NULL`。逗号现在是必需的，因为与第一个示例不同，您将语句的两个部分分开：`TIMESTAMP NOT NULL`行和`PRIMARY KEY`声明。

如果您想了解有关调试 SQL 语句的简单方法的更多信息，我强烈建议您查看我[对这个问题的回答](https://stackoverflow.com/a/11218752/869912)（请参阅标题为“**关于如何有条不紊地修复此类错误的更多信息**”部分）。

确保在更改`CREATE TABLE`语句或**任何代码**时，以足够小的增量进行更改，以便“一次最多破坏一件事”。在您的第二个`CREATE TABLE`声明的情况下，没有理由更改第一个`TIMESTAMP`声明，这样做会破坏代码。那条线正在工作；无需更改它。

# android - Android 查杀应用

> ID：11385497
> 
> 赞同：0
> 
> 时间：2012-07-08T18:19:51.820
> 
> 标签：android, android-activity, activity-finish

我有一个登录页面，然后是一个主页，然后我在主页上有一个退出按钮。当你按下退出时，我需要关闭应用程序。如果我`finish()`在主页的退出上使用`onClick()`，它只会带我回到登录页面。

所以我正在使用

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

现在这确实起到了退出的作用，但是当您再次启动应用程序时，它会绕过登录屏幕并直接进入主页（因为应用程序从未关闭过）。这里最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:10:35.423

> 这里最好的解决方案是什么？

最好的解决方案是删除退出按钮及其相关功能。

首先，这不是必需的，因为您提供的退出按钮已经通过设备上的 HOME 按钮提供。

其次，[谷歌员工](https://groups.google.com/group/android-developers/browse_thread/thread/4c1b8955ebfd5799)一再[告诉](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)你不要有这样的按钮。

另请参阅：[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238#2034238)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:21:43.630

在从登录页面进入主页之前使用`finish();`

```
Intent i = new Intent(Login.this, Home.class);
StartActivity(i);
finish(); 
```

# cocoa - NSStatusItem 中的 NSProgressIndicator

> ID：11385499
> 
> 赞同：0
> 
> 时间：2012-07-08T18:19:59.463
> 
> 标签：cocoa, nsview, menubar, nsstatusitem, nsprogressindicator

我有一个带有自定义 NSView 的 NSStatusItem，它显示图像。无论菜单是否打开，它都会显示不同的图像：

```
 isMenuVisible = NO;

- (void)awakeFromNib {

statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
[statusItem retain];

dragStatusView = [[DragStatusView alloc] init];
[dragStatusView retain];
dragStatusView.statusItem = statusItem;
[dragStatusView setMenu:statusMenu];
[dragStatusView setToolTip:NSLocalizedString(@"Menubar Countdown",
                                             @"Status Item Tooltip")];
[statusItem setView:dragStatusView];
[dragStatusView setTitle:@"11"];
}

- (void)drawImage:(NSImage *)aImage centeredInRect:(NSRect)aRect{
NSRect imageRect = NSMakeRect((CGFloat)round(aRect.size.width*0.5f-aImage.size.width*0.5f),
                              (CGFloat)round(aRect.size.height*0.5f-aImage.size.height*0.5f),
                              aImage.size.width, 
                              aImage.size.height);
[aImage drawInRect:imageRect fromRect:NSZeroRect operation:NSCompositeSourceOver  fraction:1.0f];
}

- (void)drawRect:(NSRect)rect {
// Draw status bar background, highlighted if menu is showing
[statusItem drawStatusBarBackgroundInRect:[self bounds]
                            withHighlight:isMenuVisible];

if(isMenuVisible) {
    [self drawImage:image2 centeredInRect:rect];
}else {
    [self drawImage:image1 centeredInRect:rect];

}} 
```

（当然这不是全部，但我希望所有相关代码都能理解我的问题）

现在我想在这个 NSView 中（在这个 NSStatusItem 中）显示一个 NSProgressIndicator，如果上传正在进行，这意味着 1\. 在上传开始时设置 NSProgressIndicator 2.收到什么？==> 隐藏 NSProgressIndicator 再次显示图像。

我将如何解决这个问题？

请帮我。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T20:16:26.397

这是基于视图的状态项的解决方案。

```
NSStatusBar *bar = [NSStatusBar systemStatusBar];
self.theItem = [bar statusItemWithLength:NSVariableStatusItemLength];
self.statusView = [[NSView alloc] initWithFrame:NSMakeRect(0, 0, 40, 20)];
NSProgressIndicator* progress = [[NSProgressIndicator alloc] initWithFrame:NSMakeRect(0, 0, 40, 20)];
[progress setIndeterminate:NO];
[self.statusView addSubview:progress];
self.theItem.view = self.statusView; 
```

您还可以在基于菜单的状态项中
根据进度更改自己绘制进度条，您可以简单地更改状态项的图像。

```
- (void) updateIconWithProgress:(float)aProgress
{
    NSImage* image = [NSImage imageNamed:@"small_icon_16_16.png"];
    NSImage* img = [image copy];
    [img lockFocus];

    NSRect rect = NSMakeRect(2, 4, 12.0*aProgress, 8.0);
    [[NSColor blueColor] set];
    [NSBezierPath fillRect:rect];

    [img unlockFocus];
    [self.theItem setImage:img];
} 
```

ps 代码是为 ARC（自动引用计数）编写的，因此没有保留或释放。

# batch-file - 批处理文件以显示一系列同名文件的属性

> ID：11385500
> 
> 赞同：0
> 
> 时间：2012-07-08T18:20:02.227
> 
> 标签：batch-file

10 年来我没有对批处理文件做过任何事情，但我发现自己需要列出一堆文件的文件大小，这些文件名为 CG100.mpg 虽然 CG999.mpg

必须有一种方法可以让批处理文件使用 FOR 循环一个一个地查看一系列类似命名的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:24:58.423

如果您能够使用 Python，那么以下内容将起作用：

```
from os.path import getsize

results = [('CG%d.mpg = ' % i) + str(getsize('CG%d.mpg' % i)) for i in range(100, 999)]

print results 
```

否则，对于批处理文件，您可以使用[FORFILES](http://ss64.com/nt/forfiles.html)：

```
Select a file (or set of files) and execute a command on each file. Batch processing.

Syntax
      FORFILES [/p Path] [/m Mask] [/s] [/c Command] [/d [+ | -] {dd/MM/yyyy | dd}]   

Key    /p Path      The Path to search  (default=current folder)

   /s           Recurse into sub-folders

   /C command   The command to execute for each file.
                Wrap the command string in double quotes.
                Default = "cmd /c echo @file"

                The Command variables listed below can also be used in the
                command string.

   /D date      Select files with a last modified date greater than or

                equal to (+), or less than or equal to (-),
                the specified date using the "dd/MM/yyyy" format;

   /D + dd      Select files with a last modified date greater than or
                equal to the current date plus "dd" days. (in the future)

   /D - dd      Select files with a last modified date less than or
                equal to the current date minus "dd" days. (in the past)

                A valid "dd" number of days can be any number in
                the range of 0 to 32768\.   (89 years)
                "+" is taken as default sign if not specified.

   Command Variables:
      @file    The name of the file.
      @fname   The file name without extension.                
      @ext     Only the extension of the file.                  
      @path    Full path of the file.
      @relpath Relative path of the file.          
      @isdir   Returns "TRUE" if a file type is a directory,
               and "FALSE" for files.
      @fsize   Size of the file in bytes.
      @fdate   Last modified date of the file.
      @ftime   Last modified time of the file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:27:32.107

绝对有一种简单的方法可以使用 FOR 获得结果 - 在帮助末尾阅读 FOR 循环扩展修饰符 - 键入`HELP FOR`或`FOR /?`从命令行。

您甚至不需要批处理文件。这一个班轮将完全按照您在命令行上的要求：

```
for /l %N in (100 1 999) do @for %F in (GC%N.mpg) do @if exist %F echo %F size = %~zF 
```

如果您在批处理文件中使用该命令`%`，则将所有更改为。`%%`

如果您只想列出与模式匹配的所有文件的大小，该命令甚至更简单`GC*.mpg`：

```
for %F in (GC*.mpg) do @echo %F size = %~zF 
```

# jquery - 带有 Jquery 表单的 HTML POST

> ID：11385502
> 
> 赞同：-5
> 
> 时间：2012-07-08T18:20:26.243
> 
> 标签：jquery, html, forms

我有以下 HTML：

```
 </td><td>
            <div id="arrow"></div>
            </td>

    <form method="POST" action="index.php">
        <input type="hidden" name="process" value="add_report">
        <td>
            <div id="conditionals">
                <?include('ajax/condition.php');?>
            </div>
        </td>
        </tr>
        <tr><td></td><td>
            <div id="orderby">
                <?include('ajax/order.php');?>
            </div>
        </td></tr>
        <tr><td></td><td>
            <input type="submit" name="genSQL" value="getSQL()" id="submitPersonData" style="float: right;">
        </td></tr>
    </form> 
```

condition.php 和 order.php 都是通过 Jquery 动态加载的，并且其中包含表单元素（例如文本框、复选框和选择框等）。但是，当我发布表单时，ajax 加载的元素不会随它一起发布，我得到的只是“流程”元素和提交按钮。

任何想法为什么，以及如何解决它？

欲了解更多信息：

编辑：

当我从 chrome 的开发人员工具中提取 HTML 时，我将“预生成”表单作为 HTM 文件运行，它运行得非常好。这是一个jquery问题，我不知道如何解决它。

**编辑：** 我找到了解决问题的方法。和 超出了表单边界（即**不在**单元格框中），导致表单被错误解释。感谢您的所有帮助，我希望这对其他人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:36:32.197

您声明：

> condition.php 和 order.php 都是通过 Jquery 动态加载的

但是在你的代码中，你有这个：

```
<? include('ajax/condition.php'); ?> 
```

其中[包括](http://php.net/manual/en/function.include.php)页面加载时的文件，**而不是**使用 AJAX。

删除任何 jQuery 动态加载的尝试。`condition.php`相反，请检查您的文件路径和文件的文件名，这些`order.php`文件应该位于您的`ajax/`文件夹中。还请确保该`ajax`文件夹存在于根文件夹中。用于`echo getcwd();`打印当前工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:41:34.167

问题是我在和语句之间启动表单，导致表单显示不正确。

# java - 当我从 android 服务调用一个类时出现 NullPointerException

> ID：11385505
> 
> 赞同：0
> 
> 时间：2012-07-08T18:20:42.827
> 
> 标签：java, android, service

这是我的第一个安卓应用。我正在尝试从使用foursquare API的不同类调用服务中的函数。我早些时候在一个活动中尝试了这个功能，它工作得很好，但是在一个服务中我得到了一个 NullPointerException。这是我正在使用的代码：

```
public class GuideMeService extends Service implements LocationListener {

LocationManager locationManager;
Geocoder geocoder;
// private CalendarContentResolver Calendar;
public FoursquareApp mFsqApp;
public ArrayList<FsqVenue> mNearbyList;
private static String TAG = "Service Class";
double lat;
double lng;
public static final String[] FIELDS = { CalendarContract.Calendars.NAME,
        CalendarContract.Calendars.CALENDAR_DISPLAY_NAME,
        CalendarContract.Calendars.CALENDAR_COLOR,
        CalendarContract.Calendars.VISIBLE };

public static ArrayList<String> Events = new ArrayList<String>();
public static final Uri CALENDAR_URI = Uri
        .parse("content://com.android.calendar/calendars");
public static final Uri EVENTS_URI = Uri
        .parse("content://com.android.calendar/events");
private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in  Milliseconds
public static String query = "";

Set<String> calendars = new HashSet<String>();

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId); 
    Log.d(TAG, "GuideMe Servise started");
    //this.stopSelf();
    locationManager = (LocationManager)this.getSystemService(LOCATION_SERVICE);
    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER,
            MINIMUM_TIME_BETWEEN_UPDATES,
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
            );

    Events = readCalendarEvent(getApplicationContext());
    for(int i = 0 ; i < Events.size() ; i++){
        query += Events.toArray()[i].toString() + " ";
    }
    Thread thread = new Thread()
    {
          @Override
          public void run() {

                try {
                        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        mNearbyList = mFsqApp.SearchBykeyword(location.getLatitude(), location.getLongitude(), query);
                    }catch (Exception e) {
                        e.printStackTrace();
                    }
          }
  };

thread.start();

} 
```

我得到这条线的错误：

```
mNearbyList = mFsqApp.SearchBykeyword(location.getLatitude(), location.getLongitude(), query); 
```

这是我在 mFsqApp 类中调用的函数：

```
public ArrayList<FsqVenue> SearchBykeyword(double latitude, double longitude, String query) throws Exception {
    ArrayList<FsqVenue> venueList = new ArrayList<FsqVenue>();
    try {
        String ll   = String.valueOf(latitude) + "," + String.valueOf(longitude);
        URL url     = new URL(API_URL + "/venues/search?ll=" + ll + "&query=" + query + "&radius=" + 50 + "&oauth_token=" + mAccessToken + "&v=20120610");

        Log.d(TAG, "Opening URL " + url.toString());

        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        urlConnection.setRequestMethod("GET");
        urlConnection.setDoInput(true);
        //urlConnection.setDoOutput(true);

        urlConnection.connect();
        String response     = streamToString(urlConnection.getInputStream());
        JSONObject jsonObj  = (JSONObject) new JSONTokener(response).nextValue();

        JSONArray groups    = (JSONArray) jsonObj.getJSONObject("response").getJSONArray("groups");

        int length          = groups.length();
        if (length > 0) {
            for (int i = 0; i < length; i++) {
                JSONObject group    = (JSONObject) groups.get(i);
                JSONArray items     = (JSONArray) group.getJSONArray("items");

                int ilength         = items.length();

                for (int j = 0; j < ilength; j++) {
                    JSONObject item = (JSONObject) items.get(j);

                    FsqVenue venue  = new FsqVenue();

                    venue.id        = item.getString("id");
                    venue.name      = item.getString("name");

                    JSONObject location = (JSONObject) item.getJSONObject("location");

                    Location loc    = new Location(LocationManager.GPS_PROVIDER);

                    loc.setLatitude(Double.valueOf(location.getString("lat")));
                    loc.setLongitude(Double.valueOf(location.getString("lng")));

                    venue.location  = loc;
                    //venue.address = location.getString("address");
                    venue.distance  = location.getInt("distance");
                    //venue.herenow = item.getJSONObject("hereNow").getInt("count");
                    venue.type      = group.getString("type");

                    venueList.add(venue);
                }
            }
        }
    } catch (Exception ex) {
        throw ex;
    }
    return venueList;
} 
```

更新：

```
07-08 21:26:18.580: W/System.err(24365): java.lang.NullPointerException
07-08 21:26:18.580: W/System.err(24365):    at com.android.guideme.GuideMeService$1.run(GuideMeService.java:86) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:27:22.230

您在`mFsqApp`这里声明（不幸的是公共）变量：

```
public FoursquareApp mFsqApp; 
```

但是您没有显示任何代码来为其分配值-因此它将具有默认值，当您取消引用它时会`null`导致 a 。`NullPointerException`您需要在取消引用之前为其分配一个非空值，例如

```
mFsqApp = new FoursquareApp(); 
```

...或使用在其他地方传递的值（例如传递给构造函数）。在这种情况下，很难判断哪些是合适的，但*必须*为其分配一个非空值。你说类似的代码在活动的早期工作——所以回顾一下那个代码，看看值是从哪里来的。

（然后改进你的代码以避免公共变量，尽可能避免使用静态变量，避免捕获`Exception`，避免在遇到异常时继续，除非你*真的*处理了它等等。）

# python - 如何在函数中定义全局变量？

> ID：11385506
> 
> 赞同：0
> 
> 时间：2012-07-08T18:20:50.613
> 
> 标签：python, python-2.7

我有一个文件，`f.py`：

```
def func():
    if 'x' not in globals():
        setattr(f, 'x', 0)
    global x
    x += 10
    print x 
```

我在一个交互式会话中：

```
>>> import f
>>> f.func()
Traceback (most recent call last):
[...]
NameError: global name 'x' is not defined 
```

如果尚未定义，我应该如何修改`func`以定义？`x`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:25:12.247

```
def func():
    global x

    if 'x' not in globals():
        x = 0

    x += 10

    print(x) 
```

# c++ - cvCapture 和directshow

> ID：11385507
> 
> 赞同：0
> 
> 时间：2012-07-08T18:21:00.137
> 
> 标签：c++, video, opencv, directshow

我需要在 OpenCV 中读取一个 avi 文件并从中处理数据。

我应该使用 cvCapture 还是 directshow？

标准是什么？

各有什么优势？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:48:04.533

关于 OpenCV，最明显的优势是：

*   它为从相机中检索帧提供了一个跨平台的解决方案；
*   [cvCapture](http://opencv.willowgarage.com/documentation/python/reading_and_writing_images_and_video.html#cvcapture)非常容易使用。

缺点：

*   OpenCV 支持的相机设备数量较少。

如果要使用 OpenCV 的 C++ 接口，请检查[cv::VideoCapture 。](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture)

如果您将使用 OpenCV 处理数据，那么如果您的相机受 OpenCV 支持，那么将 DirectShow 添加到您的项目中只是为了从相机中抓取帧是没有意义的。

# elgg - ELGG、PHPFOX、SOCIALENGINE 等：您最喜欢的社交网络脚本是什么，为什么？

> ID：11385512
> 
> 赞同：2
> 
> 时间：2012-07-08T18:21:49.480
> 
> 标签：elgg, socialengine, phpfox

我是用户体验设计师（不是开发人员）。我正在寻找合适的社交网络软件，为我提供灵活性、性能、可用​​性......以及灵感。

您对 ELGG、PHPFOX、SOCIALENGINE 或类似软件有何经验？你最喜欢的平台是什么？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:51:27.270

Elgg：你得到了一个很好的框架 + 免费的社区贡献插件 + 免费的社区支持。最佳开源社交网络奖得主。使用 Elgg 启动基本社交网络的费用：在 50 美元以内（托管和 1 年域名费用），除非您不想在现场实现自己的特定需求。

PHPFOX、SOCIAL ENGINE：商业解决方案、软件、模块和支持等都是商业的。使用 PHPFOX、SOCIAL ENGINE 启动基本社交网络的费用：200 美元以上（软件、托管和域名费用）。优点：即用型软件。

选择取决于您的需求、项目资金等。如果您准备好进行一些编码/聘请开发人员来满足您的需求，请选择 Elgg。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T04:13:37.150

已为 Social Engine 4.x 和 phpFox 2.x 和 3.x 开发。使用 phpFox。更新更规律、更重要，它的资源使用明显更好，而且我预计它比 SocialEngine 存在的时间更长，因此将来更容易获得支持。

虽然 Elgg 是免费的，但您在基本的 phpFox 软件包上花费的 99 美元将比您第一次支付费用来支付 300 倍，因为您必须支付某人创建一个可能已经存在于 phpFox 的插件，因为它的第三方开发者社区要大得多。

我保证，我不为 phpFox 工作。然而，我曾尝试开发和维护 SE4 安装，但发现它令人愤怒。看起来它是由三四个几乎没有联系的人写的，如果你想要低于 2 秒的页面加载，你需要在洛斯阿拉莫斯的超级计算机上运行它。

# vb.net - 处理 HTTP 请求/响应错误的更好方法

> ID：11385515
> 
> 赞同：0
> 
> 时间：2012-07-08T18:22:24.887
> 
> 标签：vb.net

我是 VB 新手...我正在使用以下代码发出 HTTP 请求并将响应缓冲到字符串中：

```
 Try
            myHttpWebRequest = CType(WebRequest.Create(strUrl), HttpWebRequest)
            myHttpWebResponse = CType(myHttpWebRequest.GetResponse(), HttpWebResponse)
            receiveStream = myHttpWebResponse.GetResponseStream()
            encode = System.Text.Encoding.GetEncoding("utf-8")
            sr = New StreamReader(receiveStream, encode)

            Do Until sr.Peek = -1
                strLine = String.Concat(strLine, sr.ReadLine)
                arrBuff.Add(strLine)
            Loop
        Catch ex As System.Net.WebException
            MsgBox(ex.Message)
        Finally
            myHttpWebResponse.Close()
        End Try
        sr.Close() 
```

这工作正常，但错误处理不好，例如，如果请求触发 500 响应，则 VB 代码遇到未处理的异常。关于如何使这段代码更好的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:33:57.293

使用`HttpWebResponse.StatusCode`来确定服务器是否向您发送了除（可能）200（OK）以外的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:07:53.437

不使用 MsgBox，而是按如下方式引发异常：

```
Catch ex As Exception
    Throw New Exception(ex.Message) 
```

如果您从网页进行 AJAX 调用，您可以使用以下命令检索消息：

```
Catch ex As Exception
    HttpContext.Current.Response.Write(ex.Message);
    HttpContext.Current.Response.StatusCode = 500; 
```

# c++ - C ++：将结构成员视为数组

> ID：11385517
> 
> 赞同：0
> 
> 时间：2012-07-08T18:22:28.067
> 
> 标签：c++, pointers, types, rtti

我有一个包含很多（比如数百个）指针的结构。每个指针都是不同的类型，但它们都继承自一个公共基类 --- 我们称它为 Base。我正在使用多重继承。（这都是机器生成的，这就是为什么它很奇怪。）

例如：

```
class Data {
    Class1* p1;
    Class2* p2;
    Class3* p3;
    ...etc...
}; 
```

我想在所有这些上调用 Base 中定义的方法。我可以生成这样的代码：

```
void callFooOnData(Data* p)
{
    if (p1) p1->Foo();
    if (p2) p2->Foo();
    if (p3) p3->Foo();
    ...etc...
} 
```

问题是，我有很多*很多*，十亿种不同的数据，上面的代码最终变得非常大，影响了我的足迹。所以我试图用更聪明的东西来代替它。

在 C 中，我可以简单地获取第一个结构成员的地址和计数，然后执行以下操作：

```
void callFooOnData(Data* p)
{
    callFooOnObjects(&p1, 3);
} 
```

但是，当然，我不能在 C++ 中这样做，因为结构成员不是统一类型，将它们转换为 Base* 可能涉及更改它们，这可能涉及更改指针，因为它们不是一个统一类型的指针将不得不为每个成员进行不同的更改，我不能这样做。

有没有办法做这样的事情是C++？这都是机器生成的代码，所以它不必很漂亮，谢天谢地——鲨鱼已经被跳过了——但我确实需要它尽可能便携......

（我确实可以访问 RTTI，但出于性能原因，我想尽可能避免使用它。）

**更新：**

所以，据我所知......你不能在 C++ 中做到这一点。根本做不到。我被它在 C 中完全简单的事实误导了。在 C++ 中，如果你有一个类型良好的指针开始，你只能安全地在类层次结构中的两种类型之间转换一个指针，当然，我没有。

所以我将不得不改变潜在的问题以避免这种情况：我提出的解决方案是将结构中的每个指针存储两次，一次在 Base* 数组中进行迭代，一次作为 ClassWhatever * 用于调用方法。当然，这很糟糕，因为它会使数据结构的大小增加一倍。

因此，如果有人想确认这一点（我很想被证明是错误的），我很乐意将他们的答案标记为正确......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:26:50.137

> 每个指针都是不同的类型，但它们都继承自一个公共基类 --- 我们称它为 Base

与其拥有数百个成员，不如保留一个`Base`类指针容器：

```
class Data {
   std::vector<Base*> objects;
}; 
```

在一个好的设计中，你并不需要知道每个对象的类型，如果把它抽象出来实际上会更好。请记住，针对接口而不是具体类进行编程总是好的。

> 并将它们投射到 Base* 可能涉及更改它们

不是真的，对于`public`继承，演员表应该是隐式的。

如果你只调用`Foo()`它们，`Foo()`可以是`virtual`基类中的一个方法，这样你就可以充分利用多态性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:10:55.860

> 但是，当然，我不能在 C++ 中这样做，因为结构成员不是统一类型，将它们转换为 Base* 可能涉及更改它们，这可能涉及更改指针，因为它们不是一个统一类型的指针将不得不为每个成员进行不同的更改，我不能这样做。

尽管这是一个坏主意，但这不是真的：您可以像在 C 中那样使用指针算法迭代指针。指针大小相同，并且它们具有共同的基类（不考虑结构对齐问题等）。它很脏，但从技术上讲它可以工作。如果您将实例本身作为类中的成员而不是指向它们的指针，那将是不同的。

C ++ 11中最好的方法是使用

```
std::vector< std::unique_ptr<Base> > objects; 
```

见[http://www.drdobbs.com/cpp/c11-uniqueptr/240002708](http://www.drdobbs.com/cpp/c11-uniqueptr/240002708)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:14:38.933

我不想改变我之前的答案。但是，我提出了另一个适合您的解决方案：此处的完整示例：http: [//ideone.com/u22FO](http://ideone.com/u22FO)

下面主要部分：

```
struct C {
  A1* p1;
  A2* p2;
  A3* p3;
  A4* p4;
  // ...
};

template <class D, size_t  startNumber, size_t numMembers, bool notFinished>
struct FooCaller;
template <class D, size_t  startNumber>
struct FooSingleCall;

template <class D, size_t  startNumber, size_t numMembers>
struct FooCaller<D, startNumber, numMembers, false> {
   void operator() (D& d) {}
};

template <class D, size_t  startNumber, size_t numMembers>
struct FooCaller<D, startNumber, numMembers, true> {
   void operator() (D& d) {
       FooSingleCall<D,startNumber>()(d);
       FooCaller<D, startNumber + 1, numMembers, startNumber < numMembers>()(d);
   }
};

#define FooSingleCallD(n) \
template <class D> \
struct FooSingleCall<D,n>{ \
   void operator() (D& d) { \
       d.p##n->foo(); \
   } \
}

FooSingleCallD(1);
FooSingleCallD(2);
FooSingleCallD(3);
FooSingleCallD(4);
// ... unfortunately repeat as many times as needed

template <class D, size_t numMembers>
void callFoo(D& d)
{
   FooCaller<D, 1, numMembers, 1 <= numMembers>()(d);
} 
```

意识到：足够聪明，不要定义数百个 FooSingleCall... 查看这个著名问题的答案之一：[https](https://stackoverflow.com/a/4581720/1463922) ://stackoverflow.com/a/4581720/1463922 ，您将看到如何在 5 行中创建 1000 个实例...

另外，请将 FooSingleCall 替换为从您的类中检索 N 指针的东西——比如 GetNPointer ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T19:38:05.177

您也必须通过自动生成代码来与自动生成的代码“战斗”。您可以使用 ctags 之类的工具来“解析”自动生成的类并从 ctags 输出中自动生成代码。请参阅[http://ctags.sourceforge.net/ctags.html](http://ctags.sourceforge.net/ctags.html)。

您还可以尝试按照此可能重复的问题中的建议将您的 Data 转换为元组：[Iterate through struct variables](https://stackoverflow.com/questions/2205583/iterate-through-struct-variables)。

我不确定哪个更快...

如果您可以修改自动生成此源代码的工具-也许最好的方法是扩展此工具...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T19:38:11.133

另一个选项（不可编译）：

```
class DataManipulator 
{
public:
   DataManipulator(const Data& aData_in)
   {
      objects.add(aData_in->Class1);
        .
        .
   }
   void operate()
   {
       for(objects_iterator...)
       {
           if(*objects_iterator != NULL)
                 objects_iterator->Foo();
       }
   }
private:

   std::vector<Base*> objects;
}; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-08T19:33:15.913

所有指针的大小都相同（C++ 中的所有类对象指针大小相同），实际上编译器需要相当反常才能在此指针列表中的任何位置插入填充。无论如何，可能填充的问题与 C 中的相同。所以你可以像 C 中一样做，完全没有问题。

```
void foo( Base const* );

void bar()
{
    // ...
    foo( *(&thingy.p1 + 3) );
} 
```

就这么容易。

也就是说，即使使用机器生成的代码，设计听起来也很糟糕、错误、非常糟糕。

在生成 vtables（每个指针指向一个通常具有不同签名的函数）时，确实会得到这种东西，但这种情况非常罕见。所以，这听起来像是一个 XY 问题。就像，你试图解决问题 X，想出了一个不好的解决方案 Y，现在正在询问想象的解决方案 Y，而不是真正的问题 X……

# ios - 自定义按钮未出现在 iOS 设备上

> ID：11385519
> 
> 赞同：0
> 
> 时间：2012-07-08T18:22:33.057
> 
> 标签：ios, cocoa-touch

所以我试图在我的 iOS 应用程序中实现一个自定义按钮来替换默认的圆角矩形按钮。这是一个代码片段：

```
UIImage *normalImage  = [[UIImage imageNamed:@"Images/whitebutton.png"] stretchableImageWithLeftCapWidth:12.0 topCapHeight:0.0];
UIImage *pressedImage = [[UIImage imageNamed:@"Images/bluebutton.png"]  stretchableImageWithLeftCapWidth:12.0 topCapHeight:0.0];

[self.theButton setBackgroundImage:normalImage  forState:UIControlStateNormal];
[self.theButton setBackgroundImage:pressedImage forState:UIControlStateHighlighted]; 
```

当我在模拟器中运行它时，一切正常，我的自定义按钮出现了。但是，当我在我的实际设备上运行它时，按钮只是显示为默认按钮，根本没有自定义。有人知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:27:53.960

iOS 文件系统区分大小写，与 sinulator 不同。我首先检查“图像”目录。

（快速测试我是否找错了树：`+imageNamed:`调用是否返回 nil？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:25:55.657

您应该将 whitebutton.png 和 bluebutton.png 添加到您的项目中。并调用`imageNamed:@"filename"`不`imageNamed:@"file path"`。此外，在模拟器上运行时，区分大小写没有问题。在设备上，您必须键入文件的正确名称，因为它区分大小写。

希望这可以帮助。

干杯，

乔治

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:27:15.317

您的资源将在您的应用程序包中扁平化。此外，iOS 上的文件系统区分大小写，而 Mac OS X 上的文件系统保留大小写，因此请确保图像的实际文件名大小写正确。如果是，只需删除`Images/`前缀，它应该可以工作：

```
[UIImage imageNamed:@"bluebutton"]; 
```

此外，如果图像是 png 类型，则无需指定文件扩展名`imageNamed:`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T18:27:36.360

采用

```
[UIImage imageNamed:@"whitebutton.png"] 
```

和

```
[UIImage imageNamed:@"bluebutton.png"] 
```

无论您如何在 Xcode 中直观地组织它，它都会在包中被扁平化

# python - Python 中的元类和语法

> ID：11385521
> 
> 赞同：3
> 
> 时间：2012-07-08T18:22:59.640
> 
> 标签：python, class, syntax

我试着做这样的事情：

```
class oObject(object):
    def __init__(self, x = 0, y = 0, z = 0):
        self.x = x
        self.y = y
        self.z = z

def asString (self, value):
    return str(value)

vector = oObject(5,5,5)

# So i can do
asString(vector.x)

# But I want this kind of syntax
vector.x.asString() 
```

这只是一个例子，我真的不想将整数转换为字符串。它更多的是关于课堂的课堂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:38:43.437

您可以为您的`oObject`类编写一个返回给定字符串的自定义方法`key`，或者您可以编写一个自定义`Variant`类并包装您的值：

```
class oObject(object):
    def __init__(self, x = 0, y = 0, z = 0):
        self.x = Variant(x)
        self.y = Variant(y)
        self.z = Variant(z)

class Variant(object):
    def __init__(self, obj):
        self._obj = obj

    def __repr__(self):
        return '<%s: %s>' % (self.__class__.__name__, self.asString())

    def __str__(self):
        return self.asString()

    def asString(self):
        return str(self._obj)

    def value(self):
        return self._obj 
```

查看此参考资料，了解 PyQt4 如何使用[QVariant 类](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qvariant.html)（实际上来自 Qt）。通常 python 不需要这种类型，但 C++ 需要表示多种类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T18:27:45.350

你~~不能不~~应该在 Python 中做这种事情。

但是，您可以做的是`__str__`在类中实现标准方法，这是在使用`str(instance)`.

从技术上讲，你可以在 python 中玩很多花样，试图将语法弯曲到你习惯的任何东西，但这是一个坏主意，因为已经付出了很多努力来使 Python 更具可读性，而你基本上是在破坏这项工作。

在 Python 中，转换为字符串是由 完成的`str(x)`，而不是通过调用名为`asString`. 使用`__str__`您已经可以自定义`str`将要返回的内容，为什么要添加方法？如果您需要一种方法来进行自定义字符串转换，那么只需在对象类型上定义一个函数调度，而不是尝试在现有类上注入新方法：

```
converters = dict()

def add_converter(klass, f):
    converters[klass] = f

def default_converter(x):
    return "<%s: %s>" % (x.__class__.__name__, str(x))

def mystr(x):
    return converters.get(x.__class__, default_converter)(x) 
```

使用这种方法没有“神奇”（即令人惊讶的）行为，并且您没有包装东西（另一种可能会让阅读代码的人感到惊讶的方法）。

在上面的例子中，我没有处理转换器继承，但是如果你需要并且如果你真的想要的话，你可以通过使用更复杂的查找来做到这一点（不确定继承转换为字符串函数是否有意义，它会默默地丢失信息）。

此外，如果您不了解元类的用途，请不要理会该概念，很可能您并不真正需要它。元类是一个强大但有些复杂的工具，实际上并不经常需要......

我认为[这篇文章](http://eli.thegreenplace.net/2011/08/14/python-metaclasses-by-example/)很好地解释了元类是什么以及你可以用它们做什么。请注意，缺少一些血腥细节，您应该使用官方文档来挖掘它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:49:49.667

在 Python 中准确地得到你想要的东西是很棘手的——那是因为，当你做“instance.x.method”时——Python 首先从“instance”中检索属性“x”，然后它们会尝试找到“method” " 作为“x”对象本身的一个属性（没有对“实例”的任何引用，该“实例”最初具有对“x”的引用，可以从“方法”内部检索到 - 但用于框架内省）。

我说它“可以完成” - 并且适用于大多数类型的 x，但最终可能会失败或产生附带影响，具体取决于属性“x”的类型：如果你 `__setattr__`为你的类编写一个方法对于实例上设置的每个属性，它实际上会创建该属性的动态子类——这将在新对象上启用所需的方法。缺点是并非所有类型的对象都可以被子分类，并且并非所有子分类对象的行为都与它们的父对象完全相同。（例如，如果“x”是一个函数）。但它适用于大多数情况：

```
class Base(object):
    def __setattr__(self, name, attr):
        type_ = type(attr)
        new_dict = {}
        for meth_name in dir(self.__class__):
            function = getattr(self.__class__, meth_name)
            # Assume any methods on the class have the desired behavior and would
            # accept the attribute as it's second parameter (the first being self).

            # This could be made more robust by making a simple method-decorator
            # which would mark the methods that one wishes to be appliable
            # to attributes, instead of picking all non "_" starting methods like here:

            if not callable(function) or meth_name in new_dict or meth_name.startswith("_"):
                continue
            def pinner(f):
                def auto_meth(se, *args, **kw):
                    return f(se._container, se, *args, **kw)
                return auto_meth
            new_dict[meth_name] = pinner(function)
        # This could be improved in order to have a class-based cache of derived types
        # so that each attribute setting would only create a new_type for
        # each different type that is being set
        new_type = type(type_.__name__, (type_,), new_dict)
        try:
            attr.__class__ = new_type
        except TypeError:
            # here is the main problem withthis approach: 
            # if the type being stored can't have it's `__class__`dynamically
            # changed, we have to build a new instance of it.
            # And if the constructor can't take just the base type
            # as its building parameter, it won't work. Worse if having another instance
            # does have side-effects in the code, we are subject to those.

            attr = new_type(attr)
        attr._container = self
        super(Base, self).__setattr__(name, attr)

class oObject(Base):
    def __init__(self, x = 0, y = 0, z = 0):
        self.x = x
        self.y = y
        self.z = z

    def asString(self, attr):
        return str(attr) 
```

在交互式部分中加载这些内容后：

```
>>> v = oObject(1,2,3)
>>> v.x.asString()
'1'
>>> v.w = [1,2,3]
>>> v.w.append(3)
>>> v.w.asString()
'[1, 2, 3, 4]'
>>> 
```

正如你所看到的，这可以通过普通的类继承来完成，不需要元类。

对于任何 Parameter 类型，另一种更可靠的方法是对属性名称和方法使用另一个分隔符 - 您可以`__getattribute__`在基类上编写一个更简单的方法，该方法将动态检查请求方法并调用它属性。这种方法不需要动态子分类，并且简单了大约 2 个数量级。代价是你会写一些类似的东西`vector.x__asString` 而不是点分隔符。这实际上是在用于 Python 的久经考验的 SQLALchemy ORM 中采用的方法。

```
# Second approach:

class Base(object):
    separator = "__"
    def __getattr__(self, attr_name):
        if self.__class__.separator in attr_name:
            attr_name, method_name = attr_name.split(self.__class__.separator, 1)
            method = getattr(self, method_name)
            return method(getattr(self, attr_name))
        raise AttributeError 
```

现在：

```
>>> class oObject(Base):
...     def __init__(self, x = 0, y = 0, z = 0):
...         self.x = x
...         self.y = y
...         self.z = z
...         
...     def asString(self, attr):
...         return str(attr)
... 
>>> 
>>> 
>>> v = oObject(1,2,3)
>>> v.x__asString
'1' 
```

（如果您希望将更多参数传递给被调用的方法，则需要更多代码，但我认为这足以理解这个想法）。

# asp.net-mvc - Microsoft.Web.Helpers 在视图中不可见

> ID：11385526
> 
> 赞同：1
> 
> 时间：2012-07-08T18:23:44.173
> 
> 标签：asp.net-mvc, installation, package

当我安装包 Microsoft.Web.Helpers 时，我收到下一个警告 txt 文件（安装后）： **如果包安装在 ASP.NET MVC 3 站点中，则该站点将无法运行。如果您已经将包安装到 MVC 3 应用程序中，请将其卸载。如果即使在您卸载包后 MVC 3 站点仍无法工作，您可能还需要重新安装 ASP.NET MVC 3 包。** 我可以在控制器类中使用 Microsoft.Web.Helpers，但不能在视图中使用（@using Microsoft.Web.Helpers not found）。我接下来尝试做：[将 ReCaptcha 与 MVC3 和 razor 一起使用？](https://stackoverflow.com/questions/5666438/using-recaptcha-with-mvc3-and-razor) [ReCaptcha 和 MVC3，让 Microsoft.Web.Helpers 工作的问题](https://stackoverflow.com/questions/8276354/recaptcha-and-mvc3-problems-getting-microsoft-web-helpers-working)。但它没有帮助。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:20:51.590

您缺少 Views\Web.config 中的命名空间（不是应用程序根 web.config）。

```
<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization"/>
    <add namespace="System.Web.Routing" />
  </namespaces>
</pages> 
```

# javascript - Sencha Touch 2 - 登录用户状态

> ID：11385527
> 
> 赞同：2
> 
> 时间：2012-07-08T18:23:45.553
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我正在创建一个 ST2 应用程序，您可以在其中登录/注册等。

我想知道登录并在整个应用程序中拥有用户状态的正常方式是什么。

我有一个带有 REST 代理的用户模型来获取/保存数据。当您加载应用程序时，我这样做是为了抓住用户：

```
launch: function () {
    var User = Ext.ModelManager.getModel('App.model.User');
    User.load("", {
        success: function (user) {

            // I have the user here but it's only within this scope

        }
    });
} 
```

但是这样做只能在这个函数中使用......那么人们通常会做什么来在整个应用程序中获取用户？只需将其存储在应用程序中，例如：

```
application.user = user; 
```

还是您使用 User 模型创建一个 ID 为 User 的商店，然后使用以下命令检索：

```
launch: function () {
    var User = Ext.StoreManager.get('User');
    User.load(function(user) {
        // Do application logged in stuff
         self.getApplication().fireEvent('userLogsIn');
    });
}

someRandomFunction: function () {
    var user = Ext.StoreManager.get('User').getAt(0),
        email = user.get('email');
        console.log(email);
} 
```

谢谢，多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:57:30.907

一般来说，您不能依赖您在 JS 应用程序中本地保存的任何信息。它可以相对容易地被欺骗和改变。

您需要做的是将用户名/密码组合发送到您的服务器后端。然后服务器应返回加密的 cookie，应用程序将在每个后续请求中将其发送回服务器。只有通过解密和验证这个cookie服务器才能确定登录用户的身份。

# php - 将来自 MYSQL 数据库的多行元信息组合到一个响应中

> ID：11385533
> 
> 赞同：1
> 
> 时间：2012-07-08T18:24:47.247
> 
> 标签：php, mysql, sql, join, left-join

我正在使用现有的数据库，我有一个问题，我知道你们 SQL 人员可以解决。我有 2 个表，其中有一个项目 ID 和一个描述，另一个存储所述项目的所有元数据。

我的两张桌子是这样的......

```
items- 
----------------
id | description
----------------

itemsmeta-
-----------------------------------------
itemmeta_id | item_id | fieldkey | value
----------------------------------------- 
```

我需要做的是得到一个响应，希望是一个基于给定项目 ID 的对象或数组。所以我想说根据特定的项目 ID 获取所有元信息。

如果我做这样的事情......

```
SELECT * FROM items LEFT JOIN itemsmeta ON itemsmeta.item_id = items.id WHERE items.id = 1 
```

它返回大约 9 行，一个用于第一个项目的每个元条目。是否可以构造我的查询以返回一个响应？

也许是这样的：

Array( [0] => stdClass Object ( [ID] => 1 [Name] => Blah Blah [Meta 1] => Blah Blah [Meta 2] => Blah Blah) ) 等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:48:56.780

您可以使用**GROUP_CONCAT**功能

```
SELECT id, description, GROUP_CONCAT(value)
FROM items
LEFT JOIN itemsmeta  ON items.id = itemsmeta.item_id
GROUP BY item.id; 
```

# java - 如何在invokeshutdown方法中获取jobject

> ID：11385535
> 
> 赞同：0
> 
> 时间：2012-07-08T18:24:50.023
> 
> 标签：java, c++, java-native-interface

我正在尝试为我的 Java 服务器编写 Windows 服务。这是我编写`invokeshutdown`方法的方式。但我对如何`jobject`在这里获得参考感到困惑。

```
DWORD WINAPI InvokeShutdown( LPVOID lpParam ) {
    JNIEnv *env;
    jclass cls;
    jmethodID mid;
    //Since the JVM was created in a another thread. We have to attach the thread 
    //to JVM before making " calls
    vm->AttachCurrentThread((void **)&env, 0); 
    cls = env->FindClass("com.my.internal.Launcher");
    // Create the argument list.
    va_list args;
    va_start(args, "-dir=stop");

    mid = env->GetMethodID(env, cls, "stop", "()V");

    env->CallVoidMethodV(env, obj, mid, args);

    vm->DetachCurrentThread();
    Log( "Detached thread\n");
    return 0;
} 
```

我怎么`obj`进去`env->CallVoidMethodV(env, obj, mid, args);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:38:09.533

我想知道您为什么不将“关闭方法”（`stop`）设为静态呢？然后你可以`InvokeShutdown`通过这样的方式在内部调用它......

```
 cls = env->FindClass("com.my.internal.Launcher");
  mid = env->GetStaticMethodID(cls, "stop", "()V");
  env->CallStaticVoidMethod(cls, mid, 0);
  vm->DetachCurrentThread(); 
```

您可以改为创建一个对象`NewObject`，并使用该对象调用其方法，但这有点……多余，我想。

# c# - 用户在返回的消息中为字体类型和大小选择的两个 ListBox

> ID：11385539
> 
> 赞同：-3
> 
> 时间：2012-07-08T18:25:39.703
> 
> 标签：c#, button, fonts, listbox

对于如何完成这个项目，我非常陌生并且非常困惑。该项目要求我们创建一个包含两个 ListBox 的表单——一个包含至少四个字体名称，另一个包含至少四个字体大小。如果用户未能做出选择，则让每个列表中的第一项成为默认选择。每个 ListBox 只允许一个选择。这是我开始遇到问题的地方；我不需要在消息中显示用户选择的内容，而是反映用户选择的字体大小和类型的消息。用户单击按钮后，以选定的字体和大小显示“Hello”。我需要帮助以获取在 C# Windows Visual Studio 2010 表单中以所需字体显示消息的按钮。我刚刚编写了一个基本代码来启动我，其中包括以下内容：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        //populate listbox1
        listBox1.Items.Add("Arial");
        listBox1.Items.Add("Calibri");
        listBox1.Items.Add("Times New Roman");
        listBox1.Items.Add("Verdana");

        //populate listbox2
        listBox2.Items.Add("8");
        listBox2.Items.Add("10");
        listBox2.Items.Add("12");
        listBox2.Items.Add("14");

        this.listBox1.SelectedIndexChanged += new System.EventHandler(this.listBox1_SelectedIndexChanged);
        listBox1.SelectedIndex = 0;

        this.listBox2.SelectedIndexChanged += new System.EventHandler(this.listBox2_SelectedIndexChanged);
        listBox2.SelectedIndex = 0;         
    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBox1.Text = listBox1.SelectedItem.ToString();
    }

    private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBox1.Text = listBox2.SelectedItem.ToString();
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {

    }
} 
```

}

由于这是该项目的开始，用户选择的字体名称和大小最终会以所选字体名称和大小产生一条消息。现在我试图从单击的按钮中引发呼叫，该按钮将在用户选择的字体和字体大小中显示消息“Hello”。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:46:12.657

放置列表框的默认值：

```
 listBox1.SelectedItem = "Arial";
        listBox2.SelectedItem = "8"; 
```

或更好的“动态解决方案”：

```
 listBox1.SelectedIndex = 0;
      listBox2.SelectedIndex = 0; 
```

以下代码将使文本字体和大小发生变化，具体取决于用户在列表框中选择的内容。

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBox1.Font = new Font(listBox1.SelectedItem.ToString(), Convert.ToInt32(listBox2.SelectedItem.ToString()));
    }

    private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBox1.Font = new Font(listBox1.SelectedItem.ToString(), Convert.ToInt32(listBox2.SelectedItem.ToString()));
    } 
```

编辑：您收到错误消息，因为您的文本框中可能没有文本。

```
TextBox1.Text ="this is some text"; 
```

将此添加到您的表单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:47:19.507

您可以使用该`ListBox.SelectedIndex`属性来设置列表框的初始选择。例如，您可以添加以下代码行以在添加事件处理程序后显式选择列表框中的第一个项目：

```
this.listBox1.SelectedIndexChanged += new System.EventHandler (this.listBox1_SelectedIndexChanged);     
listBox1.SelectedIndex = 0;   // <--- set default selection for listBox1

this.listBox2.SelectedIndexChanged += new System.EventHandler (this.listBox2_SelectedIndexChanged);     
listBox2.SelectedIndex = 0;   // <--- set default selection for listBox2 
```

默认情况下，a 的`SelectedIndex`属性`ListBox`为 -1，表示没有选择。

为了回答您的第二个问题，以所选字体和大小显示“Hello”，我假设我们可以简单地更改 textBox1 控件的字体。

首先，确保 textBox1 有一些文本；`Form1`调用后将此语句放入构造函数中`InitializeComponent`：

```
textBox1.Text = "Hello!"; 
```

然后，修改事件处理程序以更改字体的字体和大小：

```
private void UpdateFont()
{
    if (listBox1.SelectedIndex == -1 || listBox2.SelectedIndex == -1)
        return;  // selection not complete yet, so do nothing

    string typeface = listBox1.SelectedItem.ToString();
    float size = Convert.ToSingle(listBox2.SelectedItem.ToString());

    textBox1.Font = new Font(typeface, size);
}

private void listBox1_SelectedIndexChanged(object sender, EventArgs e)  
{  
    UpdateFont();
}  

private void listBox2_SelectedIndexChanged(object sender, EventArgs e)  
{  
    UpdateFont();
} 
```

# c# - C#中参数化存储过程的使用

> ID：11385547
> 
> 赞同：0
> 
> 时间：2012-07-08T18:26:29.810
> 
> 标签：c#, stored-procedures, ado.net, user-defined-functions, sql-parametrized-query

我正在尝试在我的 C# 应用程序中调用存储过程，但它并没有真正调用我尝试了很多尝试调用它`ExecuteReader`，等等`NonReader`，`Scalar`但它仍然没有被执行我在下面显示我的整个代码，包括我曾经使用过的 sql 命令

请检查我的代码中真正的问题是什么

提前致谢

`Stock`桌子

```
Create Table Stock
(
--S_ID int Primary Key identity (1,1),
Date_of_Added Datetime Default (getdate()),
EnvType nvarchar(10),
TypeSize nvarchar(10),
Size nvarchar(10),
[Description] sql_variant,
Qty int,
Quality int,
) 
```

`NewProduct`桌子

```
Create Table NewProduct
(

MS nvarchar(30),
Date_of_Added Datetime Default (getdate()),
Invoice_No nvarchar(20),
Challan_No nvarchar(20),
EnvType nvarchar(10),
TypeSize nvarchar(10),
Size nvarchar(10),
Description sql_variant,
Qty int,
Quality int,
PayState nvarchar(10),
Balanace_Amount money,
PaymentMode nvarchar(6),
Cheque_No int,
BankDetails nvarchar(30),
P_UnitPrice money,
P_Price money
)

-- Creating trigger of above stored procedure to update or insert the stock as needed
Create Procedure StockProc
(@EnvType nvarchar(50),@TypeSize nvarchar(50),@Size nvarchar(50),@Desc Sql_variant,@Qty    int,@Quality int)
As Begin

if exists (select S.EnvType, S.TypeSize, S.Size, S.[Description], S.Qty, S.Quality
from NewProduct NP Full Join Stock S
on(NP.Size=NP.Size)
where NP.Size=@Size and NP.TypeSize=@TypeSize and NP.EnvType=@EnvType and  NP.Quality=@Quality)
    --Print 'Record Found';
--If Record will found then ut will update the quantity
Begin
    update Stock
    set Qty=NP.Qty+S.Qty
    from NewProduct NP, Stock S
    --have not used IN Operator here as IN works as OR Clause
    where S.EnvType=NP.EnvType and S.TypeSize=NP.TypeSize and S.Size=NP.Size
End
Else
--If no record will match with the enterd data, New Record will be added on Stock Table
Begin
    --Print 'No Record Found'
    insert into Stock (EnvType, TypeSize, Size, [Description], Qty, Quality)
                 values(@EnvType,@TypeSize,@Size,@Desc,@Qty,@Quality)
    --Below Lines will slow down the performance so we are using the above  query
    --Truncate Table Stock
    --insert into Stock (Date_of_Added, EnvType, TypeSize, Size, [Description], Qty, Quality)
    --select Date_of_Added, EnvType, TypeSize, Size, [Description], Qty, Quality from NewProduct
End
End 
```

--虽然在sql中测试它工作正常，你可以通过下面的执行代码来测试它

```
exec StockProc 'fdfdf','sdf','dsfs','sdf',4,5 
```

C#代码：

```
private void cmdSave_Click(object sender, EventArgs e)
    {
        try
        {
            SqlCommand cmd = null;
            //Will check the connection state if got open then will close the connection
            if (ObjCon.con.State == ConnectionState.Open)
                ObjCon.con.Close();
            ObjCon.con.Open();

            string Query = "INSERT INTO NewProduct ([MS], [Date_of_Added], [Invoice_No], [Challan_No], [EnvType], [TypeSize], [Size],[Description], [Qty], [Quality], [PayState], [Balanace_Amount], [PaymentMode], [Cheque_No], [BankDetails], [P_UnitPrice], [P_Price])  VALUES ('" + txtMs.Text + "','" + dtpNewProduct.Value + "','" + txtInvoiceNo.Text + "','" + txtChallanNo.Text + "','" + cboType.Text + "','" + txtTypeSize1.Text + "X" + txtTypeSize2.Text + "','" + txtSize1.Text + "X" + txtSize2.Text + "','" + txtDesc.Text + "','" + nudQty.Value + "','" + nudQuality.Value + "','" + cboPayState.Text + "','" + txtBalAmt.Text + "','" + cboPayMode.Text + "','" + txtChequeNo.Text + "','" + txtBankNameBranch.Text + "','" + txtPUPrice.Text + "','" + txtPPrice.Text + "')";
            cmd = new SqlCommand(Query, ObjCon.con);
            cmd.ExecuteNonQuery();
            SqlCommand cmd2 = new SqlCommand("StockProc", ObjCon.con);
            //SqlCommand cmd2 = new SqlCommand("exec StockProc '" + cboType.Text + "','" + txtTypeSize1.Text + "X" + txtTypeSize2.Text + "','" + txtSize1.Text + "X" + txtSize2.Text + "','" + txtDesc.Text + "','" + nudQty.Value + "','" + nudQuality.Value + "'", ObjCon.con);
            cmd2.CommandType = CommandType.StoredProcedure;
            //cmd2.Parameters.Add(new SqlParameter("@Date_of_Added", dtpNewProduct.Value));
            cmd2.Parameters.Add(new SqlParameter("@EnvType", cboType.Text));
            cmd2.Parameters.Add(new SqlParameter("@TypeSize", txtTypeSize1.Text + "X" + txtTypeSize2.Text));
            cmd2.Parameters.Add(new SqlParameter("@Size", txtSize1.Text + "X" + txtSize2.Text));
            cmd2.Parameters.Add(new SqlParameter("@Desc", txtDesc.Text));
            cmd2.Parameters.Add(new SqlParameter("@Qty", nudQty.Value));
            cmd2.Parameters.Add(new SqlParameter("@Quality", nudQuality.Value));

            //http://www.java2s.com/Tutorial/CSharp/0560__ADO.Net/Callstoredprocedureandpassintheparameter.htm
            //cmd2.Parameters.Add(new SqlParameter("@EnvType", SqlDbType.NVarChar)).Value = cboType.Text;
            //cmd2.Parameters.Add(new SqlParameter("@TypeSize", SqlDbType.NVarChar)).Value = txtTypeSize1.Text + "X" + txtTypeSize2.Text;
            //cmd2.Parameters.Add(new SqlParameter("@Size", SqlDbType.NVarChar )).Value=txtSize1.Text + "X" + txtSize2.Text;
            //cmd2.Parameters.Add(new SqlParameter("@Desc", SqlDbType.Variant)).Value=txtDesc.Text;
            //cmd2.Parameters.Add(new SqlParameter("@Qty",SqlDbType.Int)).Value= nudQty.Value;
            //cmd2.Parameters.Add(new SqlParameter("@Quality", SqlDbType.Int)).Value = nudQuality.Value;

            //SqlDataReader dr = cmd2.ExecuteReader();
            //if (dr.HasRows)
            //    MessageBox.Show("FOUND")
            //if (dr.IsClosed == false)
            //{
            //    dr.Close();
            //}
            //dr.Read();
            //cmd2.ExecuteScalar();
            //cmd2.ExecuteNonQuery();
            //set Asynchronous Processing=true in conneciton String in order to use BeginExecureNonQuery Method
            //cmd2.BeginExecuteNonQuery();
            //if (cmd2.ExecuteNonQuery() > 0)
               // MessageBox.Show("FOUND");
            //dr.Close();
            ObjCon.con.Close();
            MessageBox.Show("Your Details has been Saved\rThank You", "Save", MessageBoxButtons.OK, MessageBoxIcon.Information);
            this.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("The Following Error Occur" + ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            this.Close();
        }
    } 
```

请帮忙......

或者你认为我应该使用 UDF 而不是存储过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:14:57.027

在c#代码中，检查“字符串查询”，它被错误地写在值之后。

例如，使用 cmd 参数时使用 @ms 而不是控件名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:32:26.913

首先，我相信错误出在您的存储过程中，`StockProc`. 使用此更改（我在这里占卜，因此您可能需要对其进行调整）：

```
create Procedure StockProc
(@EnvType nvarchar(50),@TypeSize nvarchar(50),@Size nvarchar(50),@Desc Sql_variant,@Qty    int,@Quality int)
As Begin

if exists (select S.EnvType, S.TypeSize, S.Size, S.[Description], S.Qty, S.Quality
from NewProduct NP inner Join Stock S
on(NP.Size=S.Size)
where NP.Size=@Size and NP.TypeSize=@TypeSize and NP.EnvType=@EnvType and  NP.Quality=@Quality)
--If Record will found then ut will update the quantity
Begin
    Print 'Record Found';
    update Stock
    set Qty=NP.Qty+S.Qty
    from NewProduct NP, Stock S
    --have not used IN Operator here as IN works as OR Clause
    where S.EnvType=NP.EnvType and S.TypeSize=NP.TypeSize and S.Size=NP.Size
End
Else
--If no record will match with the enterd data, New Record will be added on Stock Table
Begin
    Print 'No Record Found'
    insert into Stock (EnvType, TypeSize, Size, [Description], Qty, Quality)
                 values(@EnvType,@TypeSize,@Size,@Desc,@Qty,@Quality)
    --Below Lines will slow down the performance so we are using the above  query
    --Truncate Table Stock
    --insert into Stock (Date_of_Added, EnvType, TypeSize, Size, [Description], Qty, Quality)
    --select Date_of_Added, EnvType, TypeSize, Size, [Description], Qty, Quality from NewProduct
End
End
GO 
```

现在，对于您的 C# 代码。根据我的评论，请遵循尽快处理连接的最佳做法：

```
 private void cmdSave_Click(object sender, EventArgs e)
    {
        try
        {
            using (var con = new SqlConnection(ObjCon.con.ConnectionString))
            {
                // I assume this was just for testing to show a direct INSERT works when the sproc didn't.
                // Otherwise, I'd be using replaceable parameters rather than straight text values as that
                // makes it quite vulnerable to SQL injection attacks. Better yet, make this a sproc as well
                // and use it rather than client-side SQL.
                var query =
                    "INSERT INTO NewProduct ([MS], [Date_of_Added], [Invoice_No], [Challan_No], [EnvType], [TypeSize], [Size],[Description], [Qty], [Quality], [PayState], [Balanace_Amount], [PaymentMode], [Cheque_No], [BankDetails], [P_UnitPrice], [P_Price])  VALUES ('"
                    + txtMs.Text + "','" + dtpNewProduct.Value + "','" + txtInvoiceNo.Text + "','"
                    + txtChallanNo.Text + "','" + cboType.Text + "','" + txtTypeSize1.Text + "X" + txtTypeSize2.Text
                    + "','" + txtSize1.Text + "X" + txtSize2.Text + "','" + txtDesc.Text + "','" + nudQty.Value
                    + "','" + nudQuality.Value + "','" + cboPayState.Text + "','" + txtBalAmt.Text + "','"
                    + cboPayMode.Text + "','" + txtChequeNo.Text + "','" + txtBankNameBranch.Text + "','"
                    + txtPUPrice.Text + "','" + txtPPrice.Text + "')";

                using (var cmd = new SqlCommand(query, con))
                {
                    con.Open();
                    cmd.ExecuteNonQuery();
                }
            }

            using (var con = new SqlConnection(ObjCon.con.ConnectionString))
            using (var cmd2 = new SqlCommand("StockProc", con))
            {
                cmd2.CommandType = CommandType.StoredProcedure;
                //cmd2.Parameters.Add(new SqlParameter("@Date_of_Added", dtpNewProduct.Value));
                cmd2.Parameters.Add(new SqlParameter("@EnvType", cboType.Text));
                cmd2.Parameters.Add(new SqlParameter("@TypeSize", txtTypeSize1.Text + "X" + txtTypeSize2.Text));
                cmd2.Parameters.Add(new SqlParameter("@Size", txtSize1.Text + "X" + txtSize2.Text));
                cmd2.Parameters.Add(new SqlParameter("@Desc", txtDesc.Text));
                cmd2.Parameters.Add(new SqlParameter("@Qty", nudQty.Value));
                cmd2.Parameters.Add(new SqlParameter("@Quality", nudQuality.Value));

                //http://www.java2s.com/Tutorial/CSharp/0560__ADO.Net/Callstoredprocedureandpassintheparameter.htm
                //cmd2.Parameters.Add(new SqlParameter("@EnvType", SqlDbType.NVarChar)).Value = cboType.Text;
                //cmd2.Parameters.Add(new SqlParameter("@TypeSize", SqlDbType.NVarChar)).Value = txtTypeSize1.Text + "X" + txtTypeSize2.Text;
                //cmd2.Parameters.Add(new SqlParameter("@Size", SqlDbType.NVarChar )).Value=txtSize1.Text + "X" + txtSize2.Text;
                //cmd2.Parameters.Add(new SqlParameter("@Desc", SqlDbType.Variant)).Value=txtDesc.Text;
                //cmd2.Parameters.Add(new SqlParameter("@Qty",SqlDbType.Int)).Value= nudQty.Value;
                //cmd2.Parameters.Add(new SqlParameter("@Quality", SqlDbType.Int)).Value = nudQuality.Value;

                con.Open();
                cmd2.ExecuteNonQuery();
            }

            MessageBox.Show("Your Details has been Saved\rThank You", "Save", MessageBoxButtons.OK, MessageBoxIcon.Information);
            this.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("The Following Error Occurred" + ex, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            this.Close();
        }
    } 
```

# c++ - C++ 套接字编程，带压缩的多播，任何好的库/包装器？

> ID：11385548
> 
> 赞同：1
> 
> 时间：2012-07-08T18:26:38.213
> 
> 标签：c++, sockets, compression, multicast

我开始接触套接字编程。目前，我正在使用 scp 在服务器和客户端之间传输数据，它在处理数据流时扩展性非常差（似乎每个新的 scp 会话都需要打开一个新的 TCP 连接，这确实降低了速度）。

我想将文本传输到多个客户端，在一天之内，该文本的大小可能达到几 GB，因此实现某种压缩是关键。

任何人都可以推荐一些可以简化编写此代码的好的库或包装器吗？标准的 C++ 套接字接口使用起来非常麻烦。到目前为止，我唯一的领导是 Boost ASIO，但它似乎没有压缩功能。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:55:38.843

对于压缩部分，您可以使用[zlib](http://zlib.net/)。zlib有很多[C++ 接口](http://www.boost.org/doc/libs/1_50_0/libs/iostreams/doc/home.html)，或者您可以直接使用它来压缩和解压缩消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:09:42.647

尝试[UDT](http://udt.sourceforge.net/)。

UDT 是一种可靠的基于 UDP 的应用程序级数据传输协议，用于广域高速网络上的分布式数据密集型应用程序。UDT 使用 UDP 传输具有自己的可靠性控制和拥塞控制机制的批量数据。

我真的不知道压缩是否可用...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:12:19.947

压缩和多播是两个正交的问题。正如之前的海报所说，选择最适合您的数据的压缩库。

对于多播有多种选择，OpenPGM 和 RSP 是开源的。

# android - java.util.ConcurrentModificationException 绘制路由

> ID：11385549
> 
> 赞同：0
> 
> 时间：2012-07-08T18:26:49.857
> 
> 标签：android, google-maps, map, routes

我正在使用以下代码在 MapActivity 中绘制路线：

```
ArrayList<Routemark> route_marks = navSet.getRoutemarks();

    for(int i = 2; i < route_marks.size() - 1; i++)
    {
        try
        {

            DirectionPathOverlay dpo = new DirectionPathOverlay(point1, point2);    
            mMapView01.getOverlays().add(dpo);

                point1 = point2;
            lon_d = Double.parseDouble(route_marks.get(i).getLongitude()) * 1E6;
            lon = (int)lon_d;
            lat_d = Double.parseDouble(route_marks.get(i).getLatitude()) * 1E6;
            lat = (int)lat_d;
            point2 = new GeoPoint(lat, lon);
            list_points.add(point2);

        }
        catch(Exception e) {
          }

    }
    mMapView01.getOverlays().add(new DirectionPathOverlay(point2, point2)); 
```

和

```
public class DirectionPathOverlay extends Overlay {

private GeoPoint gp1;
private GeoPoint gp2;

public DirectionPathOverlay(GeoPoint gp1, GeoPoint gp2) {
    this.gp1 = gp1;
    this.gp2 = gp2;
}

@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
        long when) {
    // TODO Auto-generated method stub
    Projection projection = mapView.getProjection();
    if (shadow == false) {

        Paint paint = new Paint();
        paint.setAntiAlias(true);
        Point point = new Point();
        projection.toPixels(gp1, point);
        paint.setColor(Color.BLUE);
        Point point2 = new Point();
        projection.toPixels(gp2, point2);
        paint.setStrokeWidth(2);
        canvas.drawLine((float) point.x, (float) point.y, (float) point2.x,
                (float) point2.y, paint);
    }
    return super.draw(canvas, mapView, shadow, when);
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    // TODO Auto-generated method stub

    super.draw(canvas, mapView, shadow);
} 
```

}

我正在将代码执行到新线程中，我得到了例外：

```
 07-08 18:23:21.179: E/AndroidRuntime(23510): FATAL EXCEPTION: main
07-08 18:23:21.179: E/AndroidRuntime(23510): java.util.ConcurrentModificationException
07-08 18:23:21.179: E/AndroidRuntime(23510):    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:569)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:44)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at com.google.android.maps.MapView.onDraw(MapView.java:530)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.View.draw(View.java:11082)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.drawChild(ViewGroup.java:2991)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2593)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.drawChild(ViewGroup.java:2989)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2593)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.drawChild(ViewGroup.java:2989)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2593)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.drawChild(ViewGroup.java:2989)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2593)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.View.draw(View.java:11085)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.widget.FrameLayout.draw(FrameLayout.java:462)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2145)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2026)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.os.Looper.loop(Looper.java:137)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at android.app.ActivityThread.main(ActivityThread.java:4441)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at java.lang.reflect.Method.invokeNative(Native Method)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at java.lang.reflect.Method.invoke(Method.java:511)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-08 18:23:21.179: E/AndroidRuntime(23510):    at dalvik.system.NativeStart.main(Native Method) 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:57:30.427

`ConcurrentModificationException`通常在您尝试修改`List`遍历它时抛出。如果您需要实现这种功能，您应该使用`CopyOnWriteArrayList`而不是简单的`ArrayList`. 希望这可以帮助。

# php - 如何编写此代码以仅使用一个 foreach 语句来获得相同的结果？

> ID：11385552
> 
> 赞同：2
> 
> 时间：2012-07-08T18:27:00.047
> 
> 标签：php, foreach

```
$json = '[
    {
        "class1":
        {
            "function1":"return \"$a<b>$b</b>!\";"
        }
    },
    {
        "class2":
        {
            "function2":"return $b;",
            "function3":"return $c;"
        }
    }
]';
$decoded_classes = json_decode($json,true);
foreach($decoded_classes as $class)
{
    $class_name = key($class);
    if (is_array($class[$class_name]))
    {
        foreach($class[$class_name] as $function)
        {
            $function_name = key($class[$class_name]);
            $stack[$class_name][$function_name] = create_function($arr,$function);
        }
    } 
    else 
    {
        foreach($class as $function)
        {
            $c_name = key($class);
            $stack[$c_name] = create_function($arr,$function);
        }
    }
}
return $stack; 
```

我需要此代码将执行相同的结果，但只有一个`foreach`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:54:34.667

将 JSON 转换为……比如说“PHPON”，你会得到：

```
$decoded_classes = Array(
    Array(
        "class1"=>Array(
            "function1"=>'return "$a<b>$b</b>!";'
        )
    )
    Array(
        "class2"=>Array(
            "function2"=>'return $b;',
            "function3"=>'return $c;'
        )
    )
); 
```

如您所见，您的结构并不是最有效的。你基本上有一个太多的级别。

像这样重构 JSON：

```
{     
    "class1": {     
        "function1":"return \"$a<b>$b</b>!\";"
    },
    "class2": {     
        "function2":"return $b;",
        "function3":"return $c;"
    }
} 
```

这样，“PHPON”就是：

```
$decoded_classes = Array(
    "class1"=>Array(
        "function1"=>'return "$a<b>$b</b>!";'
    )
    "class2"=>Array(
        "function2"=>'return $b;',
        "function3"=>'return $c;'
    )
); 
```

现在你甚至根本不需要循环。访问`$decoded_classes['class1']['function1']`将为您提供该代码。您唯一需要做的就是将这些字符串转换为可调用函数，如下所示：

```
array_walk_recursive($decoded_classes,function(&$f) {$f = create_function($arr,$f);}); 
```

我不禁注意到您没有`$arr`在代码中定义任何地方。您必须`$arr`正确指定才能使其正常工作。

# go - Go 中的 Python 样式生成器

> ID：11385556
> 
> 赞同：34
> 
> 时间：2012-07-08T18:27:19.843
> 
> 标签：go, generator, goroutine

我目前正在完成[Tour of Go](http://tour.golang.org)，我认为 goroutine 的使用与 Python 生成器类似，尤其是在[Question 66](http://tour.golang.org/#66)中。我认为 66 看起来很复杂，所以我将其重写为：

```
package main

import "fmt"

func fibonacci(c chan int) {
    x, y := 1, 1

    for {
        c <- x
        x, y = y, x + y
    }
}

func main() {
    c := make(chan int)
    go fibonacci(c)

    for i := 0; i < 10; i++ {
        fmt.Println(<-c)
    }
} 
```

这似乎有效。几个问题：

1.  如果我将通道上的缓冲区大小设置为 10，`fibonacci`则会尽快填满 10 个其他点，并且`main`会尽快吃掉这些点。这是正确的吗？这会比以内存为代价的缓冲区大小为 1 更高效，对吗？
2.  由于通道没有被`fibonacci`发送者关闭，当我们在这里超出范围时会发生什么记忆？我的期望是一旦超出范围，通道及其上的所有内容都会被垃圾收集`c`。`go fibonacci`我的直觉告诉我，这可能不会发生。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-08T18:38:02.160

是的，增加缓冲区大小可能会大大提高程序的执行速度，因为它会减少上下文切换的次数。Goroutines 不是垃圾收集的，但通道是。在您的示例中，fibonacci goroutine 将永远运行（等待另一个 goroutine 从通道 c 读取），并且通道 c 永远不会被销毁，因为 fib-goroutine 仍在使用它。

这是另一个明显不同的程序，它不缺少内存并且更类似于 Python 的生成器：

```
package main

import "fmt"

func fib(n int) chan int {
    c := make(chan int)
    go func() {
        x, y := 0, 1
        for i := 0; i <= n; i++ {
            c <- x
            x, y = y, x+y
        }
        close(c)
    }()
    return c
}

func main() {
    for i := range fib(10) {
        fmt.Println(i)
    }
} 
```

或者，如果您不知道要生成多少个斐波那契数，则必须使用另一个退出通道，以便在生成器`goroutine`应该停止时向其发送信号。这是 golang 的教程[https://tour.golang.org/concurrency/4](https://tour.golang.org/concurrency/4)中解释的内容。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-10T22:22:13.823

我喜欢@tux21b 的回答；在`fib()`函数中创建通道使调用代码干净整洁。详细说明一下，如果在调用函数时无法告诉函数何时停止，则只需要一个单独的“退出”通道。如果您只关心“最多 X 的数字”，您可以这样做：

```
package main

import "fmt"

func fib(n int) chan int {
    c := make(chan int)

    go func() {
        x, y := 0, 1

        for x < n {
            c <- x
            x, y = y, x+y
        }

        close(c)
    }()

    return c
}

func main() {
    // Print the Fibonacci numbers less than 500
    for i := range fib(500) {
        fmt.Println(i)
    }
} 
```

如果你想要做任何一个，这有点草率，但我个人更喜欢它而不是在调用者中测试条件，然后通过单独的通道发出退出信号：

```
func fib(wanted func (int, int) bool) chan int {
    c := make(chan int)

    go func() {
        x, y := 0, 1

        for i := 0; wanted(i, x); i++{
            c <- x
            x, y = y, x+y
        }

        close(c)
    }()

    return c
}

func main() {
    // Print the first 10 Fibonacci numbers
    for n := range fib(func(i, x int) bool { return i < 10 }) {
        fmt.Println(n)
    }

    // Print the Fibonacci numbers less than 500
    for n := range fib(func(i, x int) bool { return x < 500 }) {
        fmt.Println(n)
    }
} 
```

我认为这取决于特定情况的细节，您是否：

1.  创建生成器时告诉生成器何时停止
    1.  传递明确数量的值以生成
    2.  传递目标值
    3.  传递一个决定是否继续执行的函数
2.  给生成器一个“退出”通道，自己测试值，并告诉它在适当的时候退出。

总结并实际回答您的问题：

1.  由于更少的上下文切换，增加通道大小将有助于提高性能。在这个简单的示例中，性能和内存消耗都不会成为问题，但在其他情况下，缓冲通道通常是一个非常好的主意。在大多数情况下，使用的内存`make (chan int, 100)`似乎并不显着，但它很容易产生很大的性能差异。

2.  你的`fibonacci`函数中有一个无限循环，所以运行它的 goroutine 将永远运行（`c <- x`在这种情况下阻塞）。（一旦`c`超出调用者的范围）您将永远不会再从与它共享的频道中读取这一事实并不会改变这一点。正如@tux21b 指出的那样，通道永远不会被垃圾收集，因为它仍在使用中。这与关闭通道无关（其目的是让通道的接收端知道不会有更多值出现）以及与不从您的函数返回有关的一切。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-30T14:37:05.893

您可以使用闭包来模拟生成器。这是来自[golang.org](http://golang.org)的示例。

```
package main

import "fmt"

// fib returns a function that returns
// successive Fibonacci numbers.
func fib() func() int {
    a, b := 0, 1
    return func() int {
        a, b = b, a+b
        return a
    }
}

func main() {
    f := fib()
    // Function calls are evaluated left-to-right.
    fmt.Println(f(), f(), f(), f(), f())
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-29T08:46:04.027

使用通道来模拟 Python 生成器是可行的，但是它们在不需要的地方引入了并发，并且它增加了比可能需要的更多的复杂性。在这里，明确地保持状态更容易理解、更短，而且几乎可以肯定更有效。它使您对缓冲区大小和垃圾收集的所有问题都变得毫无意义。

```
type fibState struct {
    x, y int
}

func (f *fibState) Pop() int {
    result := f.x
    f.x, f.y = f.y, f.x + f.y
    return result
}

func main() {
    fs := &fibState{1, 1}
    for i := 0; i < 10; i++ {
        fmt.Println(fs.Pop())
    }
} 
```

# c# - 初始化字典 在链接构造函数时

> ID：11385561
> 
> 赞同：1
> 
> 时间：2012-07-08T18:27:37.830
> 
> 标签：c#, .net, sql-server-ce

我正在尝试以一种我认为不可能的方式设计一个链接构造函数的系统，但我想先检查一下。

我有 5 个重载的构造函数，如下所示：

```
public SqlCeDB(string filename)
public SqlCeDb(string filename, Dictionary<string, string> options)
public SqlCeDB(string filename, string password)
public SqlCeDB(string filename, string password, Dictionary<string, string> options)
public SqlCeDB(Dictionary<string, string> options) 
```

我希望将所有逻辑都内置到最后一个构造函数中，并让其他逻辑将控制权传递给它。现在我有一个工作的第一个构造函数，如下所示：

```
public SqlCeDB(string filename)
    : this(new Dictionary<string, string> { { "DataSource", filename } })
{
} 
```

但是有没有办法为第二个做到这一点？我想像上面那样创建一个新的字典，但我还需要复制现有字典中已经存在的选项，称为“选项”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T18:30:21.760

当然 - 只需调用创建现有副本的构造函数：

```
public SqlCeDB(string filename, Dictionary<string, string> options)
    : this(new Dictionary<string, string>(options) {
               { "DataSource", filename }
           })
{
} 
```

集合初始值设定项仍然可以正常调用参数化构造函数。请注意，这将创建一个*新*字典 - 它不会只是将新条目添加到现有字典。

# php - 在设置标头之前为空 localStorage

> ID：11385562
> 
> 赞同：0
> 
> 时间：2012-07-08T18:27:44.647
> 
> 标签：php, javascript, database, html, local-storage

有没有办法通过php清空localStorage（在html5中定义）？

我需要这样的东西：

```
<script type="text/javascript">
    window.localStorage.clear();
</script>

<?php header('Location: '.$adress); ?> 
```

但不幸的是，它不可能在标题之前调用 javascript :(

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:32:25.673

否：您还需要在 Javascript 中进行重定向：

```
<script type="text/javascript">
    window.localStorage.clear();
    window.location = "<?= $adress ?>";
</script> 
```

您只能`localstorage`使用 Javascript 进行操作，如果您`Location`使用 PHP 发送标头，则不会执行 Javascript。

# c# - 比较和更改数据集中的 2 个值，然后通过中继器控制输出

> ID：11385564
> 
> 赞同：0
> 
> 时间：2012-07-08T18:27:52.043
> 
> 标签：c#, asp.net, sql, sql-server-2008, repeater

我需要定义什么是孩子：

我需要写类似的东西`var parent = categoryID == ParentCategoryID = 0`

这是我的 ASCX 控件：

```
protected void Page_Load(object sender, EventArgs e)
{

    categoriesBLL categoriesLogic2 = new categoriesBLL();
    rptCategories.DataSource = categoriesLogic2.GetCategories();
    rptCategories.DataBind();

} 
```

我正在显示查询中的值，如下所示：

```
<ul class="categories">
<li>Computers</li>
<li>Hardware</li>
<li>Software</li>
</ul> 
```

如您所见，硬件和软件应该是子类别，但它们与另一个 LI 显示在同一个 UL 块中。

**我的数据集如下所示：**

![在此处输入图像描述](../Images/6b340df6c8c3af345dbdc7b7d4665b0f.png)

我有一个查询，它将在这里确定子类别：

```
SELECT        c1.CategoryID, c2.ParentCategoryID, 
              c1.Name, c2.Name AS ParentName, 
              c1.Published, c1.Deleted, c1.PictureID

FROM          Nop_Category AS c1 INNER JOIN
              Nop_Category AS c2 ON c1.ParentCategoryID = c2.CategoryID

WHERE        (c1.Deleted = 0) 
AND          (c1.Published = 1) 
AND          (c1.ParentCategoryID = @ParentCategoryID) 
```

但是如何将类别的值传递到我的数据集中以返回结果？然后我需要创建一个新的 ul li：

```
<ul class="sub-category">
<li>Hardware</li>
<li>Software</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:51:22.953

1.  创建一个存储过程并在其中输出 sql 查询，此过程也将采用参数 @ParentCategoryID 并返回您想要的结果
2.  右键单击您的 .xsd 并添加查询
3.  在“选择命令类型”对话框中选择使用现有存储过程选择您在步骤 1 中创建的存储过程
4.  给方法取一个你喜欢的名字，例如 GetSubCategoriesByParentId
5.  点击完成

现在您可以在代码中使用该方法，例如 Nop_CategoryTableAdapter.GetSubCategoriesByParentId 并传递 parentCategoryId 以获取子类别

# paypal - 将持卡人数据存储在 PayPal 或其他服务提供商中？

> ID：11385566
> 
> 赞同：0
> 
> 时间：2012-07-08T18:28:21.477
> 
> 标签：paypal, e-commerce, credit-card, recurring-billing, pci-dss

我正在使用 PayPal 直接付款的电子商务网站上工作。我们的客户应该在 PayPal 托管的页面中输入他们的信用卡信息，这样我们的服务器就不会接触到持卡人的数据。

我们的问题是我们想提供方便，让回头客不必每次都输入信用卡信息，我们不想存储甚至触摸持卡人数据。

相反，我们希望将这些敏感数据存储在 PayPal 中，以便下次我们可以提供诸如 CustomerID 之类的东西来要求 PayPal 访问信用卡信息以完成购买。

这可能与 PayPal 或其他服务提供商有关吗？

PS。我们还尝试了 Intuit Payment Wallet。它可以存储持卡人数据，但需要我们将这些数据传输到他们的服务器以创建“钱包”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:06:49.857

如果是 PayPal，您可以通过参考交易或定期计费来完成。您还拥有 PayPal 的 Adaptive Payments 预先批准，尽管这些要求买家拥有一个 paypal 帐户。

对于真正的信用卡存储，你只保留一个令牌，你必须使用像这些人这样的服务： [https ://www.braintreepayments.com/](https://www.braintreepayments.com/)

# ruby-on-rails - 来自字符串的 Rails DateTime 日期 -> 无效日期

> ID：11385568
> 
> 赞同：0
> 
> 时间：2012-07-08T18:28:43.037
> 
> 标签：ruby-on-rails, datetime, strptime

我目前正在开发一个 Rails 项目，我需要从一个字符串创建一个 DateTime 对象。

目前我有以下代码：

```
datetime = DateTime.strptime(items[0] << 'T' << items[1], '%d.%m.%YT%H:%M:%S') 
```

items[0] << 'T' << items[1] 创建的字符串例如 25.01.2012T18:25:47

但是我收到以下错误消息“无效日期”

如果我将字符串打印到 rails 服务器控制台，它似乎是正确的，并且如果我在 strptime 方法中将“items[0] << 'T' << items[1]”替换为有效字符串（例如 25.01.2012T18： 25:47）它有效，但我不知道为什么如果我使用连接字符串，转换为 DateTime 对象会失败......

有人有想法吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:05:35.887

你可以试试 (items[0] << 'T' << items[1]).to_datetime 。它会给出一个 DateTime 格式的对象。

# file - .htaccess 文件到 nginx 配置文件

> ID：11385569
> 
> 赞同：1
> 
> 时间：2012-07-08T18:28:54.210
> 
> 标签：file, .htaccess, configuration, nginx

我真的需要将此 .htaccess 代码转换为 nginx 配置。我从来没有使用过 nginx，所以我对这种东西很陌生。我的 .htaccess 没有那么大。如果有人可以将其转换为 nginx 配置文件，那就太好了！

```
<Files file.swf>
   ForceType application/x-httpd-php
</Files> 
```

（我曾尝试使用之前发布的转换器，但它们似乎都不起作用。）在此先感谢 Zoorah。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:21:29.473

假设“file.swf”中的“file”代表一个文件名，那么...

```
location ~ file\.swf {
    default_type application/x-httpd-php;
} 
```

# ruby-on-rails-3 - form_for 的嵌套资源和参数

> ID：11385570
> 
> 赞同：0
> 
> 时间：2012-07-08T18:28:55.577
> 
> 标签：ruby-on-rails-3

我目前正在阅读Beginning Rails 3。该教程创建了一个博客。用户可以在那里发布文章以及对文章的评论。一篇文章有​​_许多评论，一篇评论属于_一篇文章。在 routes.rb 我们有：

```
 resources :articles do
    resources :comments
 end 
```

现在在 'comments/new.html.erb' 文件中，第一行如下所示：

```
<%= form_for([@article, @article.comments.new]) do |f| %> 
```

有人可以向我解释为什么数组中需要两个参数吗？第二个参数与表单的关系是什么，尤其是为什么要创建一个新的评论实例？

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:03:18.290

这是嵌套路由的语法。您正在创建一个新的评论对象来保存来自用户的输入。有关完整说明，请参见[此处](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)。

# ruby-on-rails - 为两个设计模型共享 RegistrationController

> ID：11385572
> 
> 赞同：0
> 
> 时间：2012-07-08T18:29:07.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有两个设计模型，个人和组。我正在尝试为注册/确认分享类似的行为（将用户发送到通知他们已发送电子邮件的页面，或在确认后将他们发送到编辑页面等）

我的问题是这仅适用于个人。它尚未适用于群组。

配置/outes.rb：

```
 devise_for :individuals, :controllers => {:confirmations => "Confirmation", :registrations => "Registrations"}

 devise_for :groups, :controllers => {:confirmations => "Confirmation", :registrations => "Registrations"} 
```

应用程序/控制器/registrations_controller.rb：

```
class RegistrationsController < Devise::RegistrationsController
  def after_inactive_sign_up_path_for(item)
    "/post_sign_up?email=#{item.email}"
  end
end 
```

应用程序/控制器/confirmation_controller.rb：

```
class ConfirmationController < Devise::ConfirmationsController
  def after_confirmation_path_for(name, resource)
    case resource.class
      when Individual then edit_individual_path resource
      when Group then edit_group_path resource
      else super name, resource
    end
  end
end 
```

以上代码仅适用于个人。不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:44:12.207

我非常关注 routes.rb 中提供的行，我没有注意到文件顶部的另一个“devise_for :groups”。在这种情况下，显然设计将覆盖以前的值。愚蠢的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T07:50:22.500

对于规模和没有错误 - 更好地设计。

admin_registration_controller.rb：

```
class AdminRegistrationsController < Devise::RegistrationsController
end 
```

user_registration_controller.rb：

```
class UserRegistrationsController < Devise::RegistrationsController
end 
```

路线：

```
devise_for :admins, controllers: { registrations: 'admin_registrations' }
devise_for :users, controllers: { registrations: 'user_registrations' } 
```

# visual-studio-2010 - VS 2010 .dll.refresh 在 TFS 但不是 .dll

> ID：11385575
> 
> 赞同：1
> 
> 时间：2012-07-08T18:29:28.233
> 
> 标签：visual-studio-2010

我有一个从 TFS 打开的网站项目。当我展开与一个 dll 相关的文件时，它显示 .dll.refresh 受源代码控制，但普通 .dll 不是。如果我右键单击 .dll，则没有“添加到源代码管理”选项。我怎样才能添加它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:18:38.860

不要从 bin 文件夹中添加 dll 文件。.refresh 文件是文本文件，它告诉 aspnet 编译器从哪里复制 dll 文件。打开 .refresh 文件以查看它希望找到 dll 的位置并从该位置手动添加它们。Visual Studio 将要排除它们，因此使用源代码管理资源管理器窗口单击“添加文件”图标，然后在出现的对话框中选择“排除”页面并包含 dll。

如果您正在使用构建，请确保将 dll 文件夹添加到构建工作区。

# python - 在哪里可以找到 python 标准库代码？

> ID：11385576
> 
> 赞同：37
> 
> 时间：2012-07-08T18:29:37.237
> 
> 标签：python

我想尝试查找 Python 标准库中某些模块的来源，但找不到它们。下载 python tarball 后，我尝试查看模块目录，但它主要包含 .c 文件。我还尝试查看操作系统（mac osx）已经附带的python具有它的模块的目录，那里似乎主要有.pyc和.pyo文件。如果有人可以帮助我，我将不胜感激。

（我尝试了问题[How do I find the location of Python module sources?](https://stackoverflow.com/questions/269795/how-do-i-find-the-location-of-python-module-sources)中的建议，但没有运气）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-08T18:32:17.220

在 cpython 中，许多模块是用 C 实现的，而不是用 Python 实现的。您可以在 中找到它们[`Modules/`](https://github.com/python/cpython/tree/master/Modules)，而纯 Python 的位于[`Lib/`](https://github.com/python/cpython/tree/master/Lib).

在某些情况下（例如`json`模块），Python 源代码自己提供模块，并且仅在可用时使用 C 模块（以提高性能）。对于其余模块，您可以查看[PyPy 的 implementations](https://bitbucket.org/pypy/pypy/src/tip/lib_pypy)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-02T13:09:31.013

[CPython 的规范存储库是这个 Mercurial 存储库](https://hg.python.org/cpython/)。[GitHub 上](https://github.com/python/cpython)还有一个 git 镜像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-17T00:36:37.210

这将取决于您定义为*Standard Library*的内容。

[Python 文档](https://docs.python.org/3/library/index.html)说：

> ...此库参考手册描述了与 Python 一起分发的标准库。它还描述了 Python 发行版中通常包含的一些可选组件。
> 
> **Python 的标准库非常广泛**，提供了广泛的设施，如下面列出的长目录所示。该库包含内置模块（用 C 编写），提供对系统功能的访问，例如 Python 程序员无法访问的文件 I/O，以及用 Python 编写的模块，为发生在日常编程。其中一些模块被明确设计为通过将平台细节抽象为平台中立的 API 来鼓励和增强 Python 程序的可移植性。

如果您采用广泛的标准，[Python 文档](https://devguide.python.org/exploring/)会明确回答您的要求，我引用：

**探索 CPython 的内部结构。**

*CPython 源代码布局。*

本指南概述了 CPython 的代码结构。它作为模块和内置文件位置的摘要。

对于 Python 模块，典型的布局是：

```
Lib/<module>.py
Modules/_<module>.c 
Lib/test/test_<module>.py
Doc/library/<module>.rst 
```

对于仅扩展模块，典型的布局是：

```
Modules/<module>module.c
Lib/test/test_<module>.py
Doc/library/<module>.rst 
```

对于内置类型，典型的布局是：

```
Objects/<builtin>object.c
Lib/test/test_<builtin>.py
Doc/library/stdtypes.rst 
```

对于内置函数，典型的布局是：

```
Python/bltinmodule.c
Lib/test/test_builtin.py
Doc/library/functions.rst 
```

一些例外：

```
builtin type int is at Objects/longobject.c
builtin type str is at Objects/unicodeobject.c
builtin module sys is at Python/sysmodule.c
builtin module marshal is at Python/marshal.c
Windows-only module winreg is at PC/winreg.c 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T18:34:01.720

您可以从安装 Python 的位置获取作为标准库一部分的纯 Python 模块的源代码。

例如：C:\Python27\Lib（在 Windows 上）如果您使用 Windows Installer 进行 Python 安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-12T10:56:09.190

在 Python 安装目录的 Lib 子目录下查找。

# java - Java - 用对话框打印文档？

> ID：11385581
> 
> 赞同：3
> 
> 时间：2012-07-08T18:30:40.850
> 
> 标签：java, swing, printing, jframe

如何打开一个打印对话框，您可以在其中选择打印机、页面详细信息等来打印指定文档或 JTEXTPANE？

请帮忙！

注意：getDesktop().print 给我一个关于打印机设置的错误，如何打开本机打印对话框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T18:34:58.160

查看[课程：](http://docs.oracle.com/javase/tutorial/2d/printing/index.html) Java 打印教程，尤其是[使用打印设置对话框](http://docs.oracle.com/javase/tutorial/2d/printing/dialog.html)。[PrinterJob.printDialog()](http://docs.oracle.com/javase/6/docs/api/java/awt/print/PrinterJob.html#printDialog%28%29)应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T18:34:22.600

> 当用户按下与打印命令相关的按钮或从打印菜单中选择一个项目时，应用程序会显示一个打印对话框。要显示此对话框，请调用 PrinterJob 类的 printDialog 方法：

```
PrinterJob pj = PrinterJob.getPrinterJob();
//...
    if (pj.printDialog()) {
        try {pj.print();}
        catch (PrinterException exc) {
            System.out.println(exc);
         }
     }   
//... 
```

**参考**：

*   [使用打印设置对话框](http://docs.oracle.com/javase/tutorial/2d/printing/dialog.html)
*   [课程：打印](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)

# objective-c - MKMapView 不专注于 CoreLocation

> ID：11385584
> 
> 赞同：0
> 
> 时间：2012-07-08T18:31:04.130
> 
> 标签：objective-c, ios-simulator, mkmapview, core-location

我在一个简单的 iPhone 应用程序中使用 MapView 和 CoreLocation ... CoreLocation 正确显示了我的纬度和经度：

```
[Session started at 2012-07-08 20:11:35 +0200.]
2012-07-08 20:11:37.082 WhereAmI[5095:207] <+52.37609766, +4.92279518> +/- 70.00m (speed    0.00 mps / course -1.00) @ 7/8/12 8:11:33 PM Central European Summer Time
2012-07-08 20:11:38.605 WhereAmI[5095:207] <+52.37609766, +4.92279518> +/- 70.00m (speed 0.00 mps / course -1.00) @ 7/8/12 8:11:38 PM Central European Summer Time 
```

但是，当我运行时：

```
[mapView setShowsUserLocation:YES]; 
```

突出显示的位置是加利福尼亚的 AppleHQ，而不是阿姆斯特丹 <+52.37609766, +4.92279518>？

从控制台日志记录中，我确实发现了这个“用户位置视图不可见”错误：

```
2012-07-08 20:11:46.600 WhereAmI[5095:207] User location view is NOT visible but should be. Showing.... 
```

我确实对此进行了搜索，并被建议运行：

```
mapView.userLocationVisible; 
```

这执行正常，但没有区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:27:14.857

确保在您的 Xcode 中您没有使用模拟位置。单击调试栏中的箭头按钮（如下所示）并选择“不模拟位置”。在所附图片上，您想要的按钮在右侧。

**编辑：**此答案仅适用于 Xcode 4 及更高版本。Xcode 3 中没有位置模拟功能。

![你想要的按钮在这张图片的右边](../Images/8e3fdd202cf88022ed1fba8a75cd5de4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:42:13.217

Running mapView.userLocationVisible but itself will do nothing. It gives you a value and you need to do something with it.

If the blue pin is showing up in California (the only place it will appear when using the simulator on older XCodes) and you're reading lat/longs in Amsterdam, then you'll need to show us how you are getting those lat/longs because iOS can't think it is in two places at once, you must have set one of them manually.

When it comes to setting the map view to look at your location, I would have advised UserTrackingMode, but if you're on XCode 3.x you're probably not on the latest iOS so try

```
- (void)setCenterCoordinate:(CLLocationCoordinate2D)coordinate animated:(BOOL)animated 
```

or any of the related functions under the "Manipulating the visible portion of the map" section from the class reference
[http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

# jquery - MVC 3 jQuery TABS 拆分表单输入

> ID：11385585
> 
> 赞同：0
> 
> 时间：2012-07-08T18:31:13.440
> 
> 标签：jquery, asp.net-mvc-3

我有一个使用 jQuery 进行选项卡的选项卡式视图：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#tabs").tabs();
}); 
```

以下是视图的其余部分：

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Tab 1</a></li>
    <li><a href="#tabs-2">Tab 2</a></li>
    <li><a href="#tabs-4">Form summary</a></li>
</ul>
<div id="tabs-1">
    @Html.Partial("Data1")
</div>
<div id="tabs-2">
    @Html.Partial("Data2")
</div>
<div id="tabs-3">
    @Html.Partial("Summary")        
</div> 
```

其中前两个部分视图代表完整数据模型的两个部分。部分视图如下所示：

```
@model ....
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
    <div class="editor-label">
        @Html.LabelFor(model => model.Item1)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Item1)
        @Html.ValidationMessageFor(model => model.Item1)
    </div>
    <p>
        <input type="submit" value="Previous Medical History" />
    </p>
    </fieldset>
} 
```

我正在使用“从模型生成控制器”方法来获取部分视图的内容。模型包含用于验证等的属性。这些是真实代码的编辑摘录，可能有一些错误！

我想要做的是使用每个部分视图的验证组件，但将提交推迟到第二个选项卡的末尾，然后移动到第三个选项卡以确认提交。

我对 MVC 还很陌生，完全不知道该怎么做。

请教育我 - 非常感谢提前。

# xamarin.ios - MonoTouch 上的 ServiceStack JIT 错误

> ID：11385586
> 
> 赞同：2
> 
> 时间：2012-07-08T18:31:16.703
> 
> 标签：xamarin.ios, servicestack

我在[这里看到了一个以前的 SO Question](https://stackoverflow.com/questions/10094507/monotouch-using-servicestack-caused-jit-error)讨论了一个类似的（相同的？）问题，但是那里没有可以满足我的问题的答案。

我的环境：

```
MonoDevelop 3.0.3.2
安装UUID：?????????
运行：
    单声道 2.10.9（压缩包）
    GTK 2.24.10
    GTK# (2.12.0.0)
    包版本：210090011
未安装适用于 Android 的 Mono
苹果开发者工具：
     Xcode 4.3.3 (1178)
     构建 4E3002
单点触控：5.2.12
构建信息：
    发行编号：30003002
    Git修订：7bf6ac0ca43c1b12703176ad9933c3484c05c84c-dirty
    构建日期：2012-06-16 04:36:10+0000
    Xamarin 插件：62ad7268d38c2ece7e00dc32960bd3bdab8fec38
操作系统：
    Mac OS X 10.7.4
    达尔文 NEWTON.local 11.4.0 达尔文内核版本 11.4.0
        2012 年 4 月 9 日星期一 19:32:15 PDT
        根：xnu-1699.26.8~1/RELEASE_X86_64 x86_64

```

我的代码（Ping 和 PingResponse 是我自己的 ServiceModel 库中的 DTO）：

```
Ping request = new Ping { LoginInfo = new IMDSSWebService_SS.ServiceModel.ClientLoginInfo { UserName="guest", Password="guest", ClientPlatform="iOS", ClientVersion="1.5", InstanceUID="uid1"} };
var response = _appDel.ServiceClient.Send<IMDSSWebService_SS.ServiceModel.PingResponse>(request); 
```

ServiceStack 库：

```
ServiceStack.Common.Monotouch.dll (built from git src)
ServiceStack.Interfaces.Monotouch.dll (built from git src)
ServiceStack.Text.Monotouch (built from git src) 
```

例外：

```
System.ExecutionEngineException 已被抛出

在使用 --aot-only 运行时尝试 JIT 编译方法“ServiceStack.Text.Json.JsonReader`1:GetParseFn ()”。

System.ExecutionEngineException：在使用 --aot-only 运行时尝试 JIT 编译方法“ServiceStack.Text.Json.JsonReader`1:GetParseFn ()”。

  在 ServiceStack.Text.Json.JsonReader.GetParseFn (System.Type 类型) [0x00000] in :0
  在 ServiceStack.Text.Json.JsonTypeSerializer.GetParseFn (System.Type 类型) [0x00000] in :0
  在 ServiceStack.Text.Common.TypeAccessor.Create（ITypeSerializer 序列化程序，ServiceStack.Text.TypeConfig typeConfig，System.Reflection.PropertyInfo propertyInfo）[0x00000] 中：0
  在 ServiceStack.Text.Common.DeserializeType`1[ServiceStack.Text.Json.JsonTypeSerializer].GetParseMethod (ServiceStack.Text.TypeConfig typeConfig) [0x00000] in :0
  在 ServiceStack.Text.Common.JsReader`1[ServiceStack.Text.Json.JsonTypeSerializer].GetParseFn[PingResponse] () [0x00000] in :0
  在 ServiceStack.Text.Json.JsonReader`1[IMDSSWebService_SS.ServiceModel.PingResponse]..cctor () [0x00000] in :0

```

我确实尝试调用 JsConfig.RegisterForAot()，但这并没有改变任何东西。我还尝试了 Link SDK Only、Link All、Link None 的各种排列方式，但都失败了，要么出现上述异常，要么根本没有构建，见下文。

```
模拟器/调试 - 工作正常
模拟器/发布 - 工作正常
iPhone/调试 - 上面的异常
iPhone/Release - 甚至不构建。（将创建一个单独的 SO 问题）

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:17:29.283

我向 ServiceStack.Text.Monotouch.JsConfig.cs 添加了一个类型注册函数，它允许您注册自定义 DTO 以进行 AOT 编译。有一个对 ServiceStack 主线的拉取请求，所以这应该很快就会实现。

[JsConfig 代码更改](https://github.com/pseabury/ServiceStack.Text/commit/fbbb9da069f1fac6d67d88e6c31cd25d1e30cfb1)

您需要注册所有非标准 C# 类型（字符串、int 等）的响应 DTO 类型。我的`PingResponse`DTO 包含一个`StatusEnum`枚举，因此我必须先注册两者，然后才能解析响应而不引发 JIT 异常。使用上面的补丁，我会在我的 Monotouch App 中调用以下代码：

```
JsConfig.RegisterForAot();
JsConfig.RegisterTypeForAot<PingResponse>();
JsConfig.RegisterTypeForAot<StatusEnum>(); 
```

对于复杂的 DTO，这可能会变得非常混乱。希望有人（如果时间允许，也许我会）想出一种自动方法来发现 DTO 中应该注册的所有类型？也许是反思？

# python - 从 Python C API 中的子类型将参数传递给 tp_new 和 tp_init

> ID：11385590
> 
> 赞同：9
> 
> 时间：2012-07-08T18:32:07.067
> 
> 标签：python, python-c-api

我最初在 Python capi-sig 列表中问了这个问题：[How to pass arguments to tp_new and tp_init from subtypes?](http://mail.python.org/pipermail/capi-sig/2012-July/000500.html)

我正在阅读关于子类型化的 Python [PEP-253](http://www.python.org/dev/peps/pep-0253/)，关于如何构造类型、调用`tp_new`和`tp_init`插槽等有很多很好的建议。

但是，它缺少关于将参数从 sub 类型传递到 super 类型的重要说明。[根据注释， PEP-253](http://www.python.org/dev/peps/pep-0253/)似乎未完成：

> （XXX 这里应该有一两段关于参数传递的内容。）

因此，我试图[从 Python 类 subtyping 中推断出一些众所周知的](http://rhettinger.wordpress.com/2011/05/26/super-considered-super/)策略，尤其是每个级别剥离参数的技术等。

我正在寻找实现与此类似效果的技术，但使用普通的**Python C API** (3.x)：

```
class Shape:
    def __init__(self, shapename, **kwds):
        self.shapename = shapename
        super().__init__(**kwds)

class ColoredShape(Shape):
    def __init__(self, color, **kwds):
        self.color = color
        super().__init__(**kwds) 
```

Python C API 中的等价物是什么？

如何处理类似的情况，但特定于派生类的参数以不同的顺序预期？`kwds`它是在 args 元组（或dict，我认为原理相同）末尾给出的参数。

下面是一些（伪）代码来说明这种情况：

```
class Base:
   def __init__(self, x, y, z):
      self.x = x
      self.y = y
      self.z = z

class Derived(Base):
   def __init__(self, x, y, a):
      self.a = a
      super().__init__(x, y, None): 
```

请注意，如果`a`首先预期的是：

```
Derived.__init__(self, a, x, y) 
```

这将`Shape`与`ColoredShape`上述情况类似。我想这也会更容易处理。

任何人都可以帮助找出上面提到的缺失的*XXX*注释，以及在构造中将参数从子类型传递到超类型的正确技术吗？

2012 年 7 月 17 日更新：

受以下[ecatmur 回答的](https://stackoverflow.com/a/11452964/151641)启发，我查看了 Python 3 源代码，发现[collections.defaultdict](http://docs.python.org/py3k/library/collections.html#collections.defaultdict)类型对象`defdict_init`的构造 函数很有趣。该类型派生自，其构造函数采用附加参数. Python 类中的构造函数签名是这样的：`PyDictObject``default_factory`

```
class collections.defaultdict([default_factory[, ...]]) 
```

现在，这是`default_factory`从原始元组中剥离的方式`args`，因此其余参数被转发到`tp_init`基本类型，它是`PyDictObject`：

```
int result;
PyObject *newargs;
Py_ssize_t n = PyTuple_GET_SIZE(args);
...
newargs = PySequence_GetSlice(args, 1, n);
...
result = PyDict_Type.tp_init(self, newargs, kwds); 
```

请注意，此剪辑仅存在于`defdict_init`函数的相关部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T13:32:56.147

问题是它`PyArgs_ParseTupleAndKeywords`没有提供从输入参数和关键字`*args`中提取额外内容的方法；`**kwargs`实际上，任何额外的参数都会导致`TypeError`; “函数采用 %s %d 个位置参数（已给出 %d 个）”，或“'%U' 是此函数的无效关键字参数”。

这意味着您将不得不自己解析参数和关键字；您可以保证 args 是一个元组而关键字是一个 dict，因此您可以使用标准方法 (`PyTuple_GET_ITEM`和`PyDict_GetItemString`) 来提取您感兴趣的参数，并识别和构造一个元组和 dict 以从其余部分传递。您显然不能修改 args，因为元组是不可变的；虽然从关键字中弹出项目应该没问题，但它看起来确实有点冒险（[例如崩溃](http://bugs.python.org/issue2016)）。

一个更雄心勃勃但绝对可行的路线是`vgetargskeywords`从`getargs.c`（[http://hg.python.org/cpython/file/tip/Python/getargs.c](http://hg.python.org/cpython/file/tip/Python/getargs.c)）复制并扩展它以采用可选的 out-parameters`*args`和`**kwargs`. 这应该相当简单，因为您只需要修改它检测到的部分并抛出`TypeError`额外的参数（[额外的参数](http://hg.python.org/cpython/file/4752fafb579d/Python/getargs.c#l1455)；[额外的关键字](http://hg.python.org/cpython/file/4752fafb579d/Python/getargs.c#l1592)）。如果你选择这条路线，祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:32:10.553

好的，回答你的第一个问题：首先你有一个代表你的类对象的 C 结构，但是来自 C 端。所以在一个名为 Shapes.h 的头文件中

```
typedef struct {
PyObject_HEAD
char *shapename;
} Shape;

typedef struct {
PyObject_HEAD
    char *shapename;
char *color;
} ColouredShape; 
```

这里需要注意的事项如下：

*   *shapename*和*color*实际上是私有变量。Python 看不到它们或与它们交互
*   ColouredShape 必须定义 Shape 的所有参数才能使继承工作以及以相同的顺序出现

接下来，我们需要一个类型用于我们的类。类型基本上从 Python 的角度定义了对象，即它的方法、成员和它具有的任何特殊方法。这也是我们告诉 Python ColouredShape 是 Shape 的子类的地方。它如下所示：

```
PyTypeObject ShapeType = {
PyObject_HEAD_INIT(NULL)
0, /*ob_size*/
"mymod.Shape", /*tp_name*/
sizeof(ShapeType), /*tp_basicsize*/
0, /*tp_itemsize*/
(destructor) SimpleParameter_dealloc, /*tp_dealloc*/
0, /*tp_print*/
0, /*tp_getattr*/
0, /*tp_setattr*/
0, /*tp_compare*/
0, /*tp_repr*/
0, /*tp_as_number*/
0, /*tp_as_sequence*/
0, /*tp_as_mapping*/
0, /*tp_hash */
0, /*tp_call*/
Shape__str__, /*tp_str*/
0, /*tp_getattro*/
0, /*tp_setattro*/
0, /*tp_as_buffer*/
Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE, /*tp_flags*/
"A class representing a Shape", /* tp_doc */
0, /* tp_traverse */
0, /* tp_clear */
0, /* tp_richcompare */
0, /* tp_weaklistoffset */
0, /* tp_iter */
0, /* tp_iternext */
Shape_methods, /* tp_methods */
0, /* tp_members */
0, /* tp_getset */
0, /* tp_base */
0, /* tp_dict */
0, /* tp_descr_get */
0, /* tp_descr_set */
0, /* tp_dictoffset */
(initproc) Shape_init, /* tp_init */
0, /* tp_alloc */
Shape_new, /* tp_new */
};

PyTypeObject ColouredShapeType = {
PyObject_HEAD_INIT(NULL)
0, /*ob_size*/
"mymod.ColouredShape", /*tp_name*/
sizeof(ColouredShape), /*tp_basicsize*/
0, /*tp_itemsize*/
(destructor) ColouredShape_dealloc, /*tp_dealloc*/
0, /*tp_print*/
0, /*tp_getattr*/
0, /*tp_setattr*/
0, /*tp_compare*/
0, /*tp_repr*/
0, /*tp_as_number*/
0, /*tp_as_sequence*/
0, /*tp_as_mapping*/
0, /*tp_hash */
0, /*tp_call*/
0, /*tp_str*/
0, /*tp_getattro*/
0, /*tp_setattro*/
0, /*tp_as_buffer*/
Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE, /*tp_flags*/
"A class representing a coloured shape", /* tp_doc */
0, /* tp_traverse */
0, /* tp_clear */
0, /* tp_richcompare */
0, /* tp_weaklistoffset */
0, /* tp_iter */
0, /* tp_iternext */
ColouredShape_methods, /* tp_methods */
0, /* tp_members */
0, /* tp_getset */
&ShapeType, /* tp_base */
0, /* tp_dict */
0, /* tp_descr_get */
0, /* tp_descr_set */
0, /* tp_dictoffset */
(initproc) ColouredShape_init, /* tp_init */
0, /* tp_alloc */
ColouredShape_new, /* tp_new */
}; 
```

需要注意的重要一点是*mymod*必须是从 Python 导入的 Python C 扩展名。在回答您的第二个问题时，您的*init*函数如下所示：

```
int Shape_init(Shape *self, PyObject *args, PyObject *kwds){
   char *colour = null;
   static char *kwdlist[] = {"colour", NULL};
   if (!PyArg_ParseTupleAndKeywords(args, kwds, "s", kwdlist,
&colour)){
return -1;
}
   //Initialise your object here
} 
```

ColouredShape_init 没有理由不能调用 Shape_init。但是我对 PyArgs_ParseTupleAndKeywords 的理解是：

*   其余的位置和关键字参数没有格式参数
*   它不会改变您的参数和关键字

如果您尝试那样做，您的困难将在哪里。

如果您对此有任何进一步的问题，请告诉我。但我建议您查看 PyArgs_ParseTupleAndKeywords 以更好地理解它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:14:59.043

我已经深入研究了python c api，至少可以说它是一个奇怪的野兽。可能值得研究 pyrex 或 cython，它们可以为您解决很多丑陋的问题。从 python 的角度来看，没有理由可以更改参数。但是您不能更改 C 中成员的顺序，因此为了保持一致性，我强烈建议您不要这样做。如果您需要有关如何在没有 pyrex 或 cython 的情况下实现此目标的帮助，请告诉我。但我应该警告它需要一些理解和大量样板代码才能理解

# php - 日期和 unix 时间之间的时间，以及倒计时该时间的计时器

> ID：11385595
> 
> 赞同：0
> 
> 时间：2012-07-08T18:32:31.677
> 
> 标签：php, javascript, date, timer, unix-timestamp

正如我的标题所说，我想制作一个计时器，用于倒计时当前时间的 unix 时间和 js 中的日期（包括小时分钟和秒）之间的时间。

我不知道怎么做你能在这里给我一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:58:35.070

```
var timestamp = new Date(2012,6,8,13,54,52).getTime()-new Date().getTime(); 
// 0 based month
var tid = setInterval(
  function() {
    if (timestamp<=0) clearIntervaltid);
    document.getElementById("timeContainer").innerHTML=new Date(timestamp-=1000);
  },1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:43:22.550

```
 var now = new Date();
  var date = new Date(2012, 7, 9);
  var diff = new Date(date - now);

  var res = '';
  res += diff.getHours()   + 'h ';
  res += diff.getMinutes() + 'min ';
  res += diff.getSeconds() + 's'; 
```

[在 JS Bin 上查看它的实际效果](http://jsbin.com/azozuz/edit#javascript,html,live)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:45:15.187

此倒计时还处理负时间（已达到倒计时）。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        var zeroDate_ms = Date.parse("8 Jul 2012 22:41:00 GMT+2");
        window.setInterval("countdown()", 1000);
        function countdown() {
            var now_ms = Number(new Date());
            var sign = (zeroDate_ms < now_ms) ? "-":"";
            var diff_s = Math.floor(Math.abs(zeroDate_ms - now_ms)/1000);
            var diff_h = Math.floor(diff_s / 3600/*1000*60*60*/);
            diff_s -= (diff_h * 3600);
            var diff_m = Math.floor(diff_s / 60/*1000*60*/);
            diff_s -= (diff_m * 60)
            var h = String(diff_h);
            var m = ("0"+String(diff_m)).substr(-2);
            var s = ("0"+String(diff_s)).substr(-2);
            document.getElementById("countdown").innerHTML=sign+h+":"+m+":"+s
        }

    </script>
</head>
<body>
    <div id="countdown"></div>
</body>
</html> 
```

# java - 结合 ByteBuffer 和 FloatBuffer

> ID：11385596
> 
> 赞同：1
> 
> 时间：2012-07-08T18:32:35.470
> 
> 标签：java, bytebuffer, floatbuffer

有没有结合 ByteBuffer 和 FloatBuffer 的好方法？例如，我获取`byte[]`数据，我需要将其转换为`float[]`数据，反之亦然：

`byte[]`到`float[]`（java.lang.UnsupportedOperationException）：

```
byte[] bytes = new bytes[N];
ByteBuffer.wrap(bytes).asFloatBuffer().array(); 
```

`float[]`到`byte[]`（作品）：

```
float[] floats = new float[N];
FloatBuffer floatBuffer = FloatBuffer.wrap(floats);
ByteBuffer byteBuffer = ByteBuffer.allocate(floatBuffer.capacity() * 4);
byteBuffer.asFloatBuffer().put(floats);
byte[] bytes = byteBuffer.array(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:46:58.717

`array()`是 and 的可选*操作*，仅当支持实际实现在具有适当类型的数组顶部时才受支持。`ByteBuffer``FloatBuffer``Buffer`

相反，`get`当您不知道缓冲区的实际实现方式时，使用将缓冲区的内容读入数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T19:44:05.927

为了补充 Louis 的答案，Java 中的数组受到限制，因为它们必须是独立的内存区域。不可能有一个数组是另一个数组的视图，无论是指向另一个数组中的某个偏移量还是将另一个数组的字节重新解释为不同的类型。

创建缓冲区（`ByteBuffer`、`FloatBuffer`等）是为了克服这一限制。它们等同于数组，因为它们编译成与数组访问一样快的机器指令，尽管要求程序员使用看似函数调用的东西。

为了获得最佳性能和最小内存使用量，您应该使用`ByteBuffer.wrap(bytes).asFloatBuffer()`然后调用`get()`and `put()`。

要获得一个浮点数组，您必须分配一个新数组并将数据复制到其中`ByteBuffer.wrap(bytes).asFloatBuffer().get(myFloatArray)`。

ByteBuffer的`array`方法不是任何人通常都应该使用的。除非 Buffer 正在包装一个数组（而不是指向某个内存映射区域，如文件或原始非 GC 内存）并且该数组与缓冲区的类型相同，否则它将失败。

# css - 滚动不适用于动态表

> ID：11385597
> 
> 赞同：0
> 
> 时间：2012-07-08T18:32:39.087
> 
> 标签：css

我有一个带有 class=list 的表，它输出在服务器中上传的文件，它是使用 php 动态创建的。该表在另一个 div 内。代码是

```
<div class="list">
<table>....php code for table...</table>
</div> 
```

我已将 div 列表定位在固定位置。css 文件是

```
.list{background:#66CDAA;width:20cm;position:fixed;top:3cm;left:11cm;} 
```

问题是如果表格太大，页面不会向下滚动。我试过了：

```
body{overflow:auto} 
```

但它不起作用。作为替代解决方案，我知道我可以添加到 .list

```
.list{overflow:auto;height:something;} 
```

但随后列表将具有我不想要的固定高度，并且表格将滚动而不是页面。那么有没有其他选择？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:41:18.400

试试这个：

```
<div class="listcontainer"><div class="list"><table>...</table></div></div> 
```

CSS：

```
.listcontainer {
    position: fixed;
    width: 20em;
    top: 3cm;
    left: 11cm;
    bottom: 3cm;
    right: 11cm;
    overflow: auto;
} /* adjust right and bottom to be what the maximum size should be */
.list {
    background-color: #66cdaa;
    max-height: 100%;
} 
```

# ios - 将自定义 (Retina) 图像添加到 UIBarButtonItem

> ID：11385598
> 
> 赞同：1
> 
> 时间：2012-07-08T18:32:46.607
> 
> 标签：ios, retina-display

将自定义图像添加到 iPhone UIBarButtonItem 是否需要将带有`@2x`后缀的 .png 拖入项目（大约为 40 x 40 像素）并`Bar Item`在属性检查器的图像字段中指定此图像？

当我使用 46 x 46 图像执行此操作时，它看起来被拉伸和像素化，并且看起来根本不像 Retina-ish（请参阅随附的屏幕截图）。

ps：我已尝试清理 XCode 中的构建（根据一些说明使用 shift+option+command+k），并根据其他一些建议确保使用 '@2x' 正确小写后缀。

![screen_grab](../Images/707af38badc8c30c0c03aacf1918d2e5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T18:43:34.757

将 2 个文件添加到您的项目中：

```
image.png
image@2x.png 
```

然后在所有屏幕密度上以相同的方式调用它

```
[UIImage imageNamed:@"image.png"]; 
```

`UIImage`将确定正确的使用。如果使用 IB，请指向`image.png`而不是`@2x`图像。

# mysql - 如何在 MySQL 中插入西班牙语字符？

> ID：11385599
> 
> 赞同：5
> 
> 时间：2012-07-08T18:32:48.170
> 
> 标签：mysql, unicode, encoding, utf-8, collation

我正在尝试使用西班牙语字符进行简单的插入，但没有成功。这是我的简单 MySQL 表结构：

```
CREATE TABLE student (
  id INTEGER NOT NULL AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL,
  lastname VARCHAR(100) NOT NULL,
  CONSTRAINT PK_STUDENT PRIMARY KEY (id)
) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

`name`和字段将`lastname`来自西班牙人，他们的名字和姓氏如下：

*   丹尼尔·维拉斯奎兹

*   哈维尔·纳涅斯

*   维克多·桑切斯

但是当我执行以下操作时：

```
mysql> INSERT INTO student (name, lastname) VALUES ('Víctor', 'Sanchez'); 
```

我收到此错误：

```
ERROR 1366 (HY000): Incorrect string value: '\xA1ctor' for column 'name' at row
1 
```

好吧，在互联网上进行搜索时，我真的对排序规则、编码和所有相关的东西感到困惑。

那么，处理这个问题的正确方法是什么？只是想知道我正在使用 PHP，并且我知道检索一些特殊字符的方法是使用`htmlentities($value);`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:39:39.197

请看看这个

它会帮助你

[在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)

这是关于编码[字符编码](http://kunststube.net/encoding/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:43:11.613

启动 mysql 时，指定 Unicode：

```
mysql --default-character-set=utf8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-18T01:47:29.737

就我而言，我刚刚使用 Sublime Editor 保存了文件，在保存文件的菜单中，我选择了使用编码保存并选择了 UTF8，它解决了我的问题。我使用了与您相同的编码和排序规则。这是文件的编码问题。

# asp.net-mvc - 更新模型时使用 HtmlString 会引发 InvalidOperationException

> ID：11385601
> 
> 赞同：1
> 
> 时间：2012-07-08T18:33:22.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

我像这样在我的模型上使用 HtmlString 属性

```
public HtmlString Html { get; set; } 
```

然后我有一个呈现和 html 编辑器的 EditorTemplate，但是当我使用 TryUpdateModel() 时，我得到一个 InvalidOperationException，因为没有类型转换器可以在这些类型 String 和 HtmlString 之间转换。

我需要创建自定义模型绑定器还是有其他方法？

**更新：**

我试图在我的模型上使用 HtmlString，主要是为了让它明显包含 HTML。所以这就是我的完整模型的样子：

```
public class Model {
    public HtmlString MainBody { get; set; }
} 
```

这就是我呈现表单的方式：

```
@using (Html.BeginForm("save","home")){
    @Html.EditorForModel()
    <input type="submit" name="submit" />
} 
```

我创建了自己的名为 Object.cshtml 的编辑器模板，以便可以将 MainBody 字段呈现为文本区域。

我的控制器有一个 Save 方法，如下所示：

```
public void Save([ModelBinder(typeof(FooModelBinder))]Model foo) {
    var postedValue = foo.MainBody;
} 
```

正如你所看到的，我一直在玩一个看起来像这样的自定义模型绑定器：

```
public class FooModelBinder : DefaultModelBinder {
    protected override object GetPropertyValue(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor, IModelBinder propertyBinder) {
        if (propertyDescriptor.PropertyType == typeof(HtmlString)) {
            return new HtmlString(controllerContext.HttpContext.Request.Form["MainBody.MainBody"]);
        }
        return null;
    }
} 
```

这按预期工作，但我不知道如何从 bindingContext 获取完整的 ModelName，因为 bindingContext.ModelName 只包含 MainBody 而不是 MainBody.MainBody？

我也对其他解决方案感兴趣，或者如果有人认为这是一个非常糟糕的主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:52:48.803

> 我需要创建自定义模型绑定器吗

是的，如果您想`HtmlString`在视图模型上使用属性，因为此类没有无参数构造函数，并且默认模型绑定器不知道如何实例化它。

> 还是有其他方法？

是的，不要`HtmlString`在视图模型上使用属性。可能还有其他方法。不幸的是，由于您提供了关于您的上下文的严格 0 信息以及您正在努力实现的目标，这就是我们迄今为止所能帮助您的全部。

* * *

更新：

现在您已经展示了一小部分代码，这里有一个示例。

模型：

```
public class Model
{
    public HtmlString MainBody { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new Model());
    }

    [HttpPost]
    public ActionResult Index([ModelBinder(typeof(FooModelBinder))]Model foo)
    {
        var postedValue = foo.MainBody;
        return Content(postedValue.ToHtmlString(), "text/plain");
    }
} 
```

模型粘合剂：

```
public class FooModelBinder : DefaultModelBinder
{
    protected override object GetPropertyValue(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor, IModelBinder propertyBinder)
    {
        if (propertyDescriptor.PropertyType == typeof(HtmlString))
        {
            return new HtmlString(bindingContext.ValueProvider.GetValue(bindingContext.ModelName).AttemptedValue);
        }
        return null;
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@using (Html.BeginForm())
{
    @Html.EditorForModel()
    <input type="submit" name="submit" />
} 
```

自定义对象编辑器模板，以便深入了解 ( `~/Views/Shared/EditorTemplates/Object.cshtml`)：

```
@foreach (var property in ViewData.ModelMetadata.Properties.Where(x => x.ShowForEdit))
{
    if (!string.IsNullOrEmpty(property.TemplateHint))
    {
        @Html.Editor(property.PropertyName, property.TemplateHint)
    }
    else
    {
        @Html.Editor(property.PropertyName)
    }
} 
```

`HtmlString`要呈现为文本区域 ( )的类型的自定义编辑器模板`~/Views/Shared/EditorTemplates/HtmlString.cshtml`：

```
@Html.TextArea("") 
```

顺便说一句，我仍然不明白为什么要使用 HtmlString 作为属性而不是简单的字符串，但无论如何。

# java - 如何使用 JUnit 对 JavaFX 控制器进行单元测试

> ID：11385604
> 
> 赞同：24
> 
> 时间：2012-07-08T18:33:47.217
> 
> 标签：java, unit-testing, junit, javafx-2

初始化 JavaFX 运行时的正确方法是什么，以便您可以对使用并发设施的控制器进行单元测试（使用 JUnit）`Platform.runLater(Runnable)`？

`Application.launch(...)`从该方法调用会`@BeforeClass`导致死锁。如果`Application.launch(...)`未调用，则会引发以下错误：

```
 java.lang.IllegalStateException: Toolkit not initialized
    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:121)
    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:116)
    at javafx.application.Platform.runLater(Platform.java:52)
    at javafx.concurrent.Task.runLater(Task.java:1042)
    at javafx.concurrent.Task.updateMessage(Task.java:987)
    at com.xyz.AudioSegmentExtractor.call(AudioSegmentExtractor.java:64)
    at com.xyz.CompletionControllerTest.setUp(CompletionControllerTest.java:69)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

跟进：这是我根据@SergeyGrinev 的推荐一直使用的主题。

```
... // Inside test class

public static class AsNonApp extends Application {
    @Override
    public void start(Stage primaryStage) throws Exception {
        // noop
    }
}

@BeforeClass
public static void initJFX() {
    Thread t = new Thread("JavaFX Init Thread") {
        public void run() {
            Application.launch(AsNonApp.class, new String[0]);
        }
    };
    t.setDaemon(true);
    t.start();
}
... // controller tests follow... 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-08T21:28:17.750

调用`launch()`from`@BeforeClass`是正确的方法。请注意，`launch()`它不会将控制权返回给调用代码。所以你必须把它包装成`new Thread(...).start()`.

**7年后更新：**

使用[TestFX](https://github.com/TestFX/TestFX)！它将负责以适当的方式启动。例如，您可以从 TestFX 的 ApplicaionTest 类扩展您的测试并使用相同的代码：

```
public class MyTest extends ApplicationTest {

@Override
public void start (Stage stage) throws Exception {
    FXMLLoader loader = new FXMLLoader(
            getClass().getResource("mypage.fxml"));
    stage.setScene(scene = new Scene(loader.load(), 300, 300));
    stage.show();
} 
```

并编写这样的测试：

```
@Test
public void testBlueHasOnlyOneEntry() {
    clickOn("#tfSearch").write("blue");
    verifyThat("#labelCount", hasText("1"));
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-19T19:58:14.110

我发现这可以工作，...但只有在启动 JavaFX 应用程序线程后添加 Thread.sleep(500) 之后。大概需要一些时间来启动和准备好 FX 环境（在我的 MacBook Pro 视网膜上大约需要 200 毫秒）

```
@BeforeClass
public static void setUpClass() throws InterruptedException {
    // Initialise Java FX

    System.out.printf("About to launch FX App\n");
    Thread t = new Thread("JavaFX Init Thread") {
        public void run() {
            Application.launch(AsNonApp.class, new String[0]);
        }
    };
    t.setDaemon(true);
    t.start();
    System.out.printf("FX App thread started\n");
    Thread.sleep(500);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-26T10:21:11.170

这也适用于测试使用 JavaFX 并发结构的代码，例如`javafx.concurrent.Task`. 与其他解决方案相比，它不需要显式 Thread 管理或提供 dummy `Application`。

```
@BeforeAll
public static void setUpJavaFXRuntime() throws InterruptedException {
    CountDownLatch latch = new CountDownLatch(1);
    Platform.startup(() -> {
        latch.countDown();
    });
    latch.await(5, TimeUnit.SECONDS);
}

@AfterAll
public static void tearDownJavaFXRuntime() throws InterruptedException {
    Platform.exit();
} 
```

# javascript - 如何刷新 Bing 地图 AJAX？

> ID：11385605
> 
> 赞同：0
> 
> 时间：2012-07-08T18:33:48.247
> 
> 标签：javascript, ajax, google-maps, bing-maps

我创建 Bing Maps AJAX 控件并始终使用相同的值对其进行初始化：lat、lng 和缩放级别。这是默认的航空地图类型和最大缩放级别。每次我得到以下图像时：

[http://i50.tinypic.com/acturr.jpg](http://i50.tinypic.com/acturr.jpg)

没有记录的方法（或没有）来刷新当前区域，所以我应该每次都使用鼠标进行缩小和放大，这很烦人。对于谷歌地图，我发现了一个有用的技巧：

```
google.maps.event.trigger(this.map, 'resize'); 
```

Bing Maps AJAX API 有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-19T12:31:49.833

我最近在 Bing 地图 AJAX V7 上遇到了类似的问题：

在某些浏览器上（主要在 Chrome 上），如果视口上不存在地图（您必须滚动才能到达它），则它会不正确地初始化。我已经向 MSDN 报告了这个问题，但没有得到任何有用的答案：[https ://social.msdn.microsoft.com/Forums/en-US/439c33bc-a1ed-4e74-a019-f7fecb809030/scroll-issue-on- chrome-with-ajax-v7-control](https://social.msdn.microsoft.com/Forums/en-US/439c33bc-a1ed-4e74-a019-f7fecb809030/scroll-issue-on-chrome-with-ajax-v7-control)

为了解决这个问题，我使用了两件事：

*   首先，我必须找到一种方法来强制 Bing 地图刷新（在互联网上没有找到任何解决方案，也没有找到这样做的对象方法）。经过大量测试，我得出了一个解决方案：

    ```
    map.setMapType(Microsoft.Maps.MapTypeId.mercator);
    setTimeout(function(){map.setMapType(Microsoft.Maps.MapTypeId.auto);}, 1) 
    ```

    实际上，将视口更改为“墨卡托”，然后再变回另一个会强制地图刷新（setTimeout 使操作异步）

*   然后我添加了一个在元素进入视口时触发事件的库，以便在每次地图进入视口时触发强制刷新

# django - 如何在 Django 中为 TimeField 建模？

> ID：11385607
> 
> 赞同：21
> 
> 时间：2012-07-08T18:33:57.973
> 
> 标签：django

我已经为一个名为 ConversationHistory 的类建模。每当创建实例时，我希望设置当前日期和当前时间。

```
class ConversationHistory(models.Model):
    contact_date        = models.DateField(_(u"Conversation Date"),      blank=True)
    contact_time        = models.DateTimeField(_(u"Conversation Time"),  blank=True)

    def __init__(self, *args, **kwargs):
        super(ConversationHistory, self).__init__(*args, **kwargs)
        self.contact_date    = datetime.datetime.now()
        self.contact_time    = datetime.datetime.now() 
```

这个想法是用户以后仍然可以将日期和时间调整为两个不同的字段。

我现在有点迷失如何使时间字段只显示和接受时间，而不是日期和时间。我认为没有日期时间的时间字段是不可能的，但是我将如何仅在表单中显示时间？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-08T19:01:01.993

如果您只想要时间，[TimeField](https://docs.djangoproject.com/en/dev/ref/models/fields/#timefield)就是您所需要的：

```
class ConversationHistory(models.Model):
    contact_date = models.DateField(_(u"Conversation Date"), blank=True)
    contact_time = models.TimeField(_(u"Conversation Time"), blank=True) 
```

您可以利用以下`auto_now_add`选项：

> 类 TimeField([auto_now=False, auto_now_add=False, **options])
> 
> 一个时间，在 Python 中由 datetime.time 实例表示。接受与 DateField 相同的自动填充选项。

如果您使用`auto_now_add`，它将在首次创建对象时自动将字段设置为 now 。

```
class ConversationHistory(models.Model):
    contact_date = models.DateField(_(u"Conversation Date"), auto_now_add=True, blank=True)
    contact_time = models.TimeField(_(u"Conversation Time"), auto_now_add=True, blank=True) 
```

# android - Android：活动不是从小部件开始的

> ID：11385610
> 
> 赞同：1
> 
> 时间：2012-07-08T18:34:07.217
> 
> 标签：android, android-activity, widget

我正在尝试从主屏幕小部件启动活动。但是，当我单击小部件时，活动没有开始。下面是我的代码。

```
@Override
public void onReceive(Context context, Intent i) {

    AppWidgetManager mgr = AppWidgetManager.getInstance(context);

    Intent intent = new Intent(context, MyActivity.class);
    PendingIntent pendingLayout = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);

    views.setOnClickPendingIntent(R.id.widget, pendingLayout);

    ComponentName comp = new ComponentName(context,
            RecentTaskWidget.class.getName());

    mgr.updateAppWidget(comp, views);
} 
```

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:03:59.733

您需要使用`PendingIntent.getActivity()`而不是`PendingIntent.getService()`，这可能就是您的代码无法正常工作的原因。希望这可以帮助。

# visual-studio-2010 - VC++ 项目库目录和链接器输入有什么区别

> ID：11385617
> 
> 赞同：1
> 
> 时间：2012-07-08T18:34:41.117
> 
> 标签：visual-studio-2010, visual-c++

我刚刚接近 C++ 开发（来自 C# 背景），我想知道 C++ 项目设置（在 Visual Studio 中）中的库目录有什么区别：

![在此处输入图像描述](../Images/5e2e1699c234fd6419c94513a8eb8d9e.png)

和链接器“输入”，我还可以提供库：

这些之间有什么根本区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:50:38.503

此设置在 VS2010 中有点摸索，在以前的版本中更加清晰。您在屏幕截图中显示的设置在工具 + 选项中的位置。其中显示了核心意图，它们包含由 Visual Studio 及其组件的设置确定的目录。CRT、MFC、ATL 和 SDK 库的位置。

Linker + Input + Additional Dependencies 设置是重要的设置，在那里你准确地说出链接器应该链接哪些 .lib 文件。您可以指定 .lib 文件的路径并完成。但是通常只指定 .lib 文件的名称，然后编辑 Additional Library Directories 以告诉链接器在哪里搜索这些 .lib 文件。如果 Boost 的安装位置并不总是相同，或者您想从 Boost 的一个版本切换到另一个版本，那么这很方便。

总而言之：

*   Linker + Input + Additional Dependencies：添加需要链接的 .lib 文件
*   链接器 + 常规 + 附加库目录：仅在未指定 .libs 路径时使用
*   VC++ 目录：不要乱用它

* * *

请注意，最后两个项目符号仅指定了*目录*，而不是链接器应链接的 .lib 文件。第一个项目符号指定了实际的 .lib 文件。对于 MSVC 程序员来说，总是令人困惑的是，链接器神奇地知道如何找到重要的 .lib 文件，而无需在 Additional Dependencies 设置中明确指定它们。

不幸的是，这是 Visual C++ 的非可视部分。项目可以通过两种不同的方式指定链接器应在不使用设置的情况下链接的 .lib 文件。第一个是您为启动项目而选择的项目模板。它使用*项目属性表*，即为项目指定默认设置的文件。您可以使用 View = Other Windows + Property Manager 来查看它们。一个重要的是“Core Windows Libraries”，它设置 Additional Dependencies 设置以链接基本的 Windows .lib 文件，这些文件是您始终需要的，例如 kernel32.lib 和 user32.lib。这些设置由您的项目“继承”。否则，如果您遇到“NoInherit”，则赋予它意义。

第二个重要的方法是#pragma 注释指令。在源代码中使用它，它注入了一个链接器指令。“lib”种类很重要，它告诉链接器链接一个 .lib 文件。除了您在链接器的 Additional Dependencies 设置中明确指定的内容*之外。*vc/atlmfc/include/afx.h 就是一个很好的例子。搜索“#pragma 评论”。请注意选择正确的 mfc .lib 文件的宏汤，具体取决于编译器的特定设置。MFC 需要链接的一堆额外的 Windows .lib 文件。

C++ 构建模型充满了曲折的小通道迷宫。IDE 试图让您陷入成功的深渊，但在此过程中隐藏了对获得更高层次理解的重要内容。在 C# 中没有什么不同，要知道如何使 Reverse() 扩展方法不消耗 O(n) 存储需要深入研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:40:06.950

大多数（不是全部）库都带有两组文件：

*   头文件#included 包含在使用库的源代码中，以提供函数、类、常量或其他可能需要的声明

*   库文件是包含库代码的二进制代码。链接器在组装最终的可执行文件时使用这些

# javascript - chrome 扩展：用于输入的 html 页面

> ID：11385620
> 
> 赞同：0
> 
> 时间：2012-07-08T18:35:33.743
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想知道是否有可能向扩展添加一个页面，我可以通过存储在弹出页面中的链接访问该页面。

我想要一个在选项卡中保持打开的页面，这样我就可以从用户那里向他添加输入。即使我按其他选项卡，因为每次弹出页面都会关闭（我读到没有办法让他保持打开状态）

如果有办法创建这样的页面，是否可以使用以下内容：

```
chrome.extension.sendRequest(null,{},function(response){.....}) 
```

和

```
chrome.extension.onRequest.addListener(function (request, sender, sendRespons) {
      ........
} 
```

当然还有其他任何 chrome api 方法。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:38:54.923

只需使用`chrome.tabs.create`：

```
chrome.tabs.create({
    'url': chrome.extension.getURL('yourPage.html')
}, function(tab) {
    // callback code goes here...
}); 
```

阅读文档：[http ://code.google.com/chrome/extensions/tabs.html#method-create](http://code.google.com/chrome/extensions/tabs.html#method-create)

# ipad - 在 iPad 上通过滚动车转到#id

> ID：11385621
> 
> 赞同：0
> 
> 时间：2012-07-08T18:35:53.373
> 
> 标签：ipad, scroll, responsive-design, animated

示例：[http ://bit.ly/LWZv42](http://bit.ly/LWZv42)

使用导航的动画滚动编码一页布局。一切都在桌面上完美运行，但在 iPad 上，您根本无法通过单击导航 li 链接来回切换。我注意到，如果您单击导航链接，然后向下/向上滚动页面，它将起作用。

```
function init_siteNav(){

    function goToByScroll(id){
        $('html,body').animate({scrollTop: $(id).offset().top},'slow');
    }

    $('.siteMenu li.home a').click(function(){
        goToByScroll('body');
        return false;
    });

    $('.siteMenu li.clients a').click(function(){
        goToByScroll('#portfolioWrap');
        return false;
    });

    $('.siteMenu li.contact a').click(function(){
        goToByScroll('#contactMapHolder');
        return false;
    });
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:06:12.803

尝试触发点击 LI 元素而不是 HREF。HREF 元素对于 iPad 上的手指来说可能有点小，LI 产生的更大物理区域可能会给你更好的结果。

将警报放在点击事件中以确保它们被 iPad 触发。

# android - Android 微调器位置和 if 语句

> ID：11385623
> 
> 赞同：1
> 
> 时间：2012-07-08T18:36:24.283
> 
> 标签：android, if-statement, spinner

这里有一个奇怪的问题，不知道为什么它不起作用，我还没有习惯 java。确定选中的项目需要做什么？微调器有 8 个项目，“位置”从不 = 1，或任何其他数字。 `onItemSelected()`肯定会被解雇所以if语句是错误的吗？

```
public void onItemSelected(AdapterView parent, View v,int position, long id) {

    if (position == 1) //do something
} 
```

编辑：谢谢狮子，原来位置似乎没有做任何事情。但是，这行得通。

```
String s = parent.getSelectedItem().toString();
if (s == "1")//do something 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:03:57.330

您必须为微调器实现正确的侦听器。

```
yourSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() 

      @Override
      public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
              if (position == 1){
                 //Do something}
              }
      }

      @Override
      public void onNothingSelected(AdapterView parent) {
                  // Do nothing.
      }           
 }); 
```

如果您“不习惯 Java”，我建议您阅读一些基础知识。

# java - 如何编写 Java 注释处理器？

> ID：11385628
> 
> 赞同：27
> 
> 时间：2012-07-08T18:37:18.003
> 
> 标签：java, annotations

我可能只是在寻找错误的方向，但我发现关于注释处理的 JSE 文档非常……稀疏。我想编写一个注释处理器来处理带注释的字符串字段和局部变量，以用计算的字符串表达式替换它们。这不应该太复杂，但我很迷失在 javax.annotation.processing 的 Javadoc 中。

编辑：我需要在编译时处理注释，因为我想修改生成的代码。它应该用计算的字符串表达式替换带注释的常量字符串表达式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-08T18:46:42.740

这不能通过编译时注释处理器来完成。编译时注释处理器只能生成新文件（和类），它们不能修改现有类。您可以在运行时进行反射，但严格来说您不称为注释处理。此外，您将无权访问局部变量。

如果您正在研究如何编写编译时注释处理器，请查看[https://github.com/pellaton/spring-configuration-validation-processor](https://github.com/pellaton/spring-configuration-validation-processor)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-21T14:16:01.747

执行此操作的两个工具是[Project Lombok](http://projectlombok.org/)和[DuctileJ](https://github.com/mernst/ductilej)。在最初提出问题时，这两种工具都存在；现在肯定存在其他工具。

关键思想是编写一个注释处理器，在编译期间，在代码生成之前，遍历和修改程序的 AST（抽象语法树）。编译器不会更改磁盘上的源代码，但生成的 .class 文件将反映注释处理器所做的更改。

您可能能够调整其中一种工具以满足您的需求，或者您可以实施受其实施技术启发的自己的工具。

与类文件处理相比，编译时处理有两个优点。一是编译器通常拥有比已编译代码更多的信息。另一个是在编译期间一切都在一个步骤中发生，而不是要求开发人员在编译后运行单独的工具来重写 .class 文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-08T22:05:43.140

查看

*   Javassist [http://www.csg.ci.iu-tokyo.ac.jp/~chiba/javassist/](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)
*   ASM [http://www.csg.ci.iu-tokyo.ac.jp/~chiba/javassist/](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)
*   Byteman（运行时）[http://www.jboss.org/byteman/](http://www.jboss.org/byteman/)

# yii - Yii 框架：创建具有多个参数的链接 CHTML::link

> ID：11385630
> 
> 赞同：4
> 
> 时间：2012-07-08T18:37:21.640
> 
> 标签：yii

我想链接到不同的控制器，传入多个参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T18:37:22.497

文档： [http ://www.yiiframework.com/wiki/48/by-example-chtml/](http://www.yiiframework.com/wiki/48/by-example-chtml/)

```
<?php echo CHtml::link('Link Text',array('controller/action',
                                     'param1'=>'value1',
                                     'param2'=>'value2',
                                     'param3'=>'value3')); ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T11:45:10.070

```
<?php echo CHtml::link('Link Text',
                       Yii::app()->createUrl('controller/action',array(
                                                         'param1'=>'value1',
                                                         'param2'=>'value2',
                                                         'param3'=>'value3')); ?> 
```

# php - 跨多个服务器保持上传文件同步 - PHP Linux

> ID：11385633
> 
> 赞同：7
> 
> 时间：2012-07-08T18:37:54.017
> 
> 标签：php, file, synchronization

我现在有一个网站，目前正在使用 2 个服务器，一个应用程序服务器和一个数据库服务器，但是应用程序服务器上的负载正在增加，因此我们将添加第二个应用程序服务器。

我遇到的问题是该网站有用户将文件上传到服务器。如何在两台服务器上获取上传的文件？

我不想将图像直接存储在数据库中，因为我们的应用程序已经是数据库密集型的。

有没有办法使服务器相互同步，或者我还能做些什么？

任何帮助，将不胜感激。

谢谢

编辑：我正在为帮助我更多地理解这个问题的人添加以下链接：

[同步多台服务器上的文件并使上传的文件在多台服务器](https://serverfault.com/questions/312306/synchronize-files-on-multiple-servers-rsync) 之间 [保持同步 - LAMP](https://serverfault.com/questions/405873/keep-uploaded-files-in-sync-across-multiple-servers-lamp/405876#405876)

**对于所有阅读这篇文章的人来说，NFS 似乎是 2 中更好的。**

**NFS 将保持文件同步，但您也可以使用[ftp 将](http://codestips.com/php-ftp-upload-tutorial/)文件上传到所有服务器，但 NFS 看起来像是要走的路。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:03:20.983

这是关于服务器故障的问题。
无论如何，我认为您绝对应该考虑进入“云”。将上传从一台服务器同步到另一台服务器根本不可靠——你不知道你会得到什么样的错误以及为什么会得到它们。此外，同步过程将加载两台服务器。对我来说，正确的解决方案是在云端。

如果您选择同步方法，您有几个解决方案：

1.  用于`rsync`在服务器之间同步您需要的文件。
2.  用于`crontab`每 X 分钟/小时/天同步文件。
3.  在某些事件（用户登录等）时复制文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T21:03:14.753

我从服务器故障中得到了这个答案：

*在这种情况下，最合适的做法是将文件共享分解为自己的单独服务。如果您的网络可以让文件“同时（几乎）无处不在”，请不要复制文件。您可以通过 NFS/CIFS 或通过适当的存储协议（如 iSCSI）来执行此操作。挂载为适当目录中的本地存储。根据您的网络性能和存储需求，这可能会增加几毫秒无法检测到的页面加载时间。*

因此，使用 NFS 共享服务器文件将起作用，或者

正如@kgb 所述，您可以指定一个服务器来保存所有上传的文件并让其他服务器从中提取（只要确保您运行 cron 或其他东西来备份文件）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T18:59:45.123

大多数网站通过使用第三方指定的文件服务器（如[Amazon S3](http://aws.amazon.com/s3/) ）来解决此问题，以供用户上传。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-15T12:39:57.937

另一个答案可能是使用一款名为 BTSync 的软件，它非常易于安装和使用，并且可以让您轻松地在所需的多台服务器上保持文件同步。安装只需要3个终端命令，效率很高。

[看看这里](http://www.google.co.uk/url?sa=t&rct=j&q=btsync%20ubuntu&source=web&cd=1&cad=rja&sqi=2&ved=0CC0QFjAA&url=https://askubuntu.com/questions/284683/how-to-run-bittorrent-sync&ei=cTddUrrzJITLhAfS94HIAg&usg=AFQjCNFUqnfljaZEiPqxb-QlQNQdtIMJNg&sig2=MHkr1aLaPZp71k4SxIgl5A&bvm=bv.53899372,d.ZG4)

* * *

[和这里](http://www.ruchirablog.com/install-configure-bittorrent-sync-server/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-15T12:37:50.297

你可以用 rsync 来做 .. 人们建议使用 nfs .. 但是这样你会产生一个故障点......如果 nfs 服务器出现故障.. 你的两个服务器都被搞砸了......如果我错了，请纠正我

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-08T19:30:11.997

您可以使用数据库服务器进行存储......我的意思不是在数据库中，也有一个 Web 服务器在那里运行。它不会增加太多的 CPU 负载，但需要更好的通道。

# c - 计算经过的时间

> ID：11385639
> 
> 赞同：-6
> 
> 时间：2012-07-08T18:38:32.933
> 
> 标签：c, vb.net

```
main()
{
    clock_t start, end;
    double elapsed;

    start = clock();

     /* some function */

    end = clock();

    elapsed = ((double) (end - start)) / CLOCKS_PER_SEC;
} 
```

我对VB.NET一无所知，需要VB.NET中的前面的C程序。我还希望经过时间显示经过时间超过 24 小时的天数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:41:56.183

您可以使用[`System.Diagnostics.Stopwatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)该类在 .NET 中精确地计时操作。

```
Dim stopwatch As New Stopwatch()

stopwatch.Start()

'Perform timed operations here

stopwatch.Stop() 
```

`TimeSpan`现在可以将经过的时间检索为`stopwatch.Elapsed`. 对于您的 C 代码的直接模拟，您可以编写：

```
Dim elapsed = stopwatch.Elapsed.TotalSeconds 
```

# ios - 重新启动时始终显示特定视图

> ID：11385640
> 
> 赞同：0
> 
> 时间：2012-07-08T18:38:36.230
> 
> 标签：ios, application-restart

我有一个具有多个视图的应用程序。我希望应用程序在再次打开时始终显示“开始视图”，即使在应用程序退出时用户在另一个视图上也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:42:24.373

您的[UIApplicationDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)提供了一个地方，您可以在其中连接来定义当应用程序变为活动或进入前台时会发生什么。

看看方法：

```
– applicationDidBecomeActive: 
```

> 调用此方法是为了让您的应用程序知道它已从非活动状态变为活动状态。这可能是因为您的应用程序是由用户或系统启动的。如果用户选择忽略将应用程序暂时发送到非活动状态的中断（例如来电或短信），应用程序也可以返回到活动状态。
> 
> 您应该使用此方法重新启动在应用程序处于非活动状态时暂停（或尚未启动）的任何任务。例如，您可以使用它来重新启动计时器或提高 OpenGL ES 帧速率。如果您的应用程序以前在后台，您还可以使用它来刷新应用程序的用户界面。

在此方法中，您可以定义应用程序在启动时显示的视图，包括应用程序最初启动时以及应用程序从后台状态返回时。

另一种方法是阻止应用程序进入后台状态，这意味着应用程序将始终启动并进入您定义的初始状态。您可以通过将应用 plist 文件中的“应用程序不在后台运行”(UIApplicationExitsOnSuspend) 键设置为“是”来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:44:22.707

在`applicationWillEnterForeground:`本地文件中保存应用程序的状态。在`applicationDidBecomeActive:`加载应用程序的该状态。

希望这可以帮助。干杯!

# android - 从 Gson 更改为 Jackson 以进行 JSON 解析

> ID：11385645
> 
> 赞同：7
> 
> 时间：2012-07-08T18:39:15.467
> 
> 标签：android, json, jackson, gson

我目前使用 GSON 使用输入流/阅读器来解析一个非常大的 JSONfile。在我的 android 设备上解析大约需要 35 秒，我从一些基准测试中了解到 Jackson 的性能要好得多。但我不知道如何使用杰克逊解析我的 JSON 文件。谁能帮我？

我的 JSON 看起来像这样：

```
[

    {
        "venue": { … }
    },
    {
        "venue": {
            "venue_seasons": [ … ],
            "address": "the address",
            "city": "the city",
            "name": "the name",
            "created_at": "2011-05-31T07:55:33Z",
            "latitude": 00.000000,
            "country": "the country",
            "internal_link_en": null,
            "internal_link_nl": null,
            "updated_at": "2011-09-15T14:46:09Z",
            "zipcode": "the zipcode",
            "foursquare_link": "foursquare url",
            "url": null,
            "id": 3,
            "tip": "some tip",
            "uid": "4ab5e205f964a520317620e3",
            "phone": "phonenr",
            "recommended": null,
            "website": "someurl",
            "venue_photos": [ … ],  //array containing objects with urls of images
            "description": null,
            "longitude": 00.000000,
            "thumbnail_location": null,
            "subcategories": [ … ],
            "opening_en": null,
            "opening_nl": null,
            "hidden": false,
            "twitter": "thetwitteraccount",
            "themes": [ … ]
        }
    }, //more venues
] 
```

我的 GSON 代码如下所示，它可以工作：

```
AssetManager assetManager = getAssets();
InputStream inputStream = null;
try {
    inputStream = assetManager.open("filename.json");
} catch (IOException e) {
    Log.e("tag", e.getMessage());
}

Reader reader = new InputStreamReader(inputStream);

Gson gson = new Gson();
List<JsonResponse> venueList = gson.fromJson(reader, new TypeToken<List<JsonResponse>>() {}.getType());
JsonResponse naam = venueList.get(12);
String denaam = naam.venue.getName;
Log.i("nr12",denaam);
Log.i("timetracker","stop" ); 

// just some logging to test if the parser works 
for (JsonResponse venue : venueList) {
    String tijdel = String.valueOf(venue.venue.id);
    Log.i(venuetag,"name of venue"+ tijdel+ " is: " + venue.venue.getName);
}

...

class JsonResponse
{
    Venues venue;
}

class Venues
{
    public List<VenueSeasons> venue_seasons;

    public List<VenuePhotos> venue_photos;

    public List<SubCategories> subcategories;

    public List<Themes> themes;

    @SerializedName("address")
    public String getAdress;

    @SerializedName("city")
    public String getCity;

    @SerializedName("country")
    public String getCountry;

    @SerializedName("name")
    public String getName;

    @SerializedName("created_at")
    public Date getCreatedAt;

    @SerializedName("updated_at")
    public Date getUpdatedAt;

    @SerializedName("internal_link_nl")
    public String getInternalLinkNl;

    @SerializedName("internal_link_en")
    public String getInternalLinkEN;

    @SerializedName("latitude")
    public Double getLatitude;

    @SerializedName("longitude")
    public Double getLongitude;

    @SerializedName("foursquare_link")
    public String getFoursquareLink;

    @SerializedName("url")
    public String getURL;

    @SerializedName("phone")
    public String getPhone;

    @SerializedName("zipcode")
    public String getZipCode;

    public String tip;

    public String tip_en;

    public String uid;

    public int id;

    @SerializedName("website")
    public String getWebsite;

    @SerializedName("recommended")
    public Boolean getRecommended;

    @SerializedName("description")
    public String getDescription;

    @SerializedName("hidden")
    public Boolean getHidden;

    @SerializedName("opening_en")
    public String getOpeningEN;

    @SerializedName("opening_nl")
    public String getOpeningNL;

    @SerializedName("twitter")
    public String getTwitter;

    @SerializedName("thumbnail_location")
    public String getThumbnailLocation;
}

public class VenuePhotos 
{
    @SerializedName("large")
    public String getLargePhotoURL;

    @SerializedName("medium")
    public String getMediumPhotoURL;

    @SerializedName("small")
    public String getSmallPhotoURL; 

    @SerializedName("original")
    public String getOriginalPhotoURL;

    public String uid;

    public int id;

    public int venue_id;

    public boolean selected;

    @SerializedName("created_at")
    public Date getCreatedAt;

    @SerializedName("updated_at")
    public Date getUpdatedAt;
} 
```

现在这行得通。我对数据做了一些处理，解析后效果非常好，但我认为这很糟糕，我的应用程序启动需要很长时间。

我的杰克逊代码（失败的代码）是：

```
AssetManager assetManager = getAssets();
InputStream inputStream = null;
try {
    inputStream = assetManager.open("originalDelftJson.json");
} catch (IOException e) {
    Log.e("tag", e.getMessage());
}
Reader reader = new InputStreamReader(inputStream);

ObjectMapper objectMapper = new ObjectMapper();
JsonFactory jsonFactory = new JsonFactory();
JJsonResponse response = null;
try {
    JsonParser jp = jsonFactory.createJsonParser(reader);
    response = objectMapper.readValue(jp, JJsonResponse.class);
    String test = String.valueOf(response.venue.size()); 
```

与类：

```
public class JJsonResponse
{
     public List<JVenue> venue;
}

class Venues
{
    public List<VenueSeasons> venue_seasons;

    public List<VenuePhotos> venue_photos;

    public List<SubCategories> subcategories;

    public List<Themes> themes;

    @SerializedName("address")
    public String getAdress;

    @SerializedName("city")
    public String getCity;

    @SerializedName("country")
    public String getCountry;

    @SerializedName("name")
    public String getName;

    @SerializedName("created_at")
    public Date getCreatedAt;

    @SerializedName("updated_at")
    public Date getUpdatedAt;

    @SerializedName("internal_link_nl")
    public String getInternalLinkNl;

    @SerializedName("internal_link_en")
    public String getInternalLinkEN;

    @SerializedName("latitude")
    public Double getLatitude;

    @SerializedName("longitude")
    public Double getLongitude;

    @SerializedName("foursquare_link")
    public String getFoursquareLink;

    @SerializedName("url")
    public String getURL;

    @SerializedName("phone")
    public String getPhone;

    @SerializedName("zipcode")
    public String getZipCode;

    public String tip;

    public String tip_en;

    public String uid;

    public int id;

    @SerializedName("website")
    public String getWebsite;

    @SerializedName("recommended")
    public Boolean getRecommended;

    @SerializedName("description")
    public String getDescription;

    @SerializedName("hidden")
    public Boolean getHidden;

    @SerializedName("opening_en")
    public String getOpeningEN;

    @SerializedName("opening_nl")
    public String getOpeningNL;

    @SerializedName("twitter")
    public String getTwitter;

    @SerializedName("thumbnail_location")
    public String getThumbnailLocation;
}

public class JVenue
{
    public String name;
    public int id;
    public String city;
    public String address;
    public String country;
    public String internal_link_nl;
    public String internal_link_en;
    public String zipcode;
    public String foursquare_link;
    public String tip_en;
    public String url;
    public Date created_at;
    public Date updated_at;
    public float latitude;
    public float longitude;
    public String tip;
    public String uid;
    public String phone;
    public String recommended;
    public String website;
    public String description;
    public String thumbnail_location;
    public boolean hidden;
    public String twitter;
    public String opening_en;
    public String opening_nl;
} 
```

我想我已经很接近了，但是我做错了，因为我得到了错误：`org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of com.jacksonrecipes.testapp.model.JJsonResponse out of START_ARRAY token`

我真的不明白杰克逊是如何工作的以及如何实现它。有谁知道如何在我的 Android 代码中更改我的 Jackson 实现，以便它可以工作并且我可以访问数据？

**编辑：得到我的解决方案**

在MH的回答的帮助下。我能找到它。我现在使用：

```
List<JJsonResponse> venueCounter = objectMapper.readValue(inputStream, new TypeReference<List<JJsonResponse>>() { }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T21:35:00.033

以下是使用 Jackson 的工作示例，原始问题中的 JSON（已更正为有效并匹配 Java 数据结构），以及原始 Gson 示例中的 Java 数据结构（更正为使用 Jackson's`@JsonProperty`而不是 Gson's `@SerializedName`）。

```
import static com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility.ANY;
import static com.fasterxml.jackson.annotation.PropertyAccessor.FIELD;

import java.io.File;
import java.util.Date;
import java.util.List;

import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonFoo
{
  public static void main(String[] args) throws Exception
  {
    ObjectMapper mapper = new ObjectMapper().setVisibility(FIELD, ANY);
    List<JsonResponse> responses = mapper.readValue(new File("input.json"), new TypeReference<List<JsonResponse>>() {});
    System.out.println(responses);
    System.out.println(mapper.writeValueAsString(responses));
  }
}

class JsonResponse
{
  Venues venue;

  @Override
  public String toString()
  {
    return venue.toString();
  }
}

class Venues
{
  List<VenueSeasons> venue_seasons;
  @JsonProperty("address") String getAdress;
  @JsonProperty("city") String getCity;
  @JsonProperty("name") String getName;
  @JsonProperty("created_at") Date getCreatedAt;
  @JsonProperty("latitude") Double getLatitude;
  @JsonProperty("country") String getCountry;
  @JsonProperty("internal_link_en") String getInternalLinkEN;
  @JsonProperty("internal_link_nl") String getInternalLinkNl;
  @JsonProperty("updated_at") Date getUpdatedAt;
  @JsonProperty("zipcode") String getZipCode;
  @JsonProperty("foursquare_link") String getFoursquareLink;
  @JsonProperty("url") String getURL;
  int id;
  String tip;
  String uid;
  @JsonProperty("phone") String getPhone;
  @JsonProperty("recommended") Boolean getRecommended;
  @JsonProperty("website") String getWebsite;
  List<VenuePhotos> venue_photos;
  @JsonProperty("description") String getDescription;
  @JsonProperty("longitude") Double getLongitude;
  @JsonProperty("thumbnail_location") String getThumbnailLocation;
  List<SubCategories> subcategories;
  @JsonProperty("opening_en") String getOpeningEN;
  @JsonProperty("opening_nl") String getOpeningNL;
  @JsonProperty("hidden") Boolean getHidden;
  @JsonProperty("twitter") String getTwitter;
  List<Themes> themes;
  String tip_en; // not in example JSON

  @Override
  public String toString()
  {
    return String.format("Venues: id=%d", id);
  }
}

class VenuePhotos
{
  @JsonProperty("large") String getLargePhotoURL;
  @JsonProperty("medium") String getMediumPhotoURL;
  @JsonProperty("small") String getSmallPhotoURL;
  @JsonProperty("original") String getOriginalPhotoURL;
  String uid;
  int id;
  int venue_id;
  boolean selected;
  @JsonProperty("created_at") Date getCreatedAt;
  @JsonProperty("updated_at") Date getUpdatedAt;
}

enum VenueSeasons
{
  Spring, Summer, Fall, Winter
}

enum SubCategories
{
  SubCat1, SubCat2, SubCat3, SubCat4 
}

enum Themes
{
  Theme1, Theme2, Theme3, Theme4
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T18:05:53.287

要记住的一件非常重要的事情是，您总是希望重用`ObjectMapper`实例——为每个请求创建一个实例会大大降低速度，可能会降低一个数量级。通常，要么只创建一个静态实例（在创建后立即配置），要么通过 Guice 等 DI 框架注入一个。

可以从以下位置找到 Jackson 的其他性能最佳实践：[http ://wiki.fasterxml.com/JacksonBestPracticesPerformance](http://wiki.fasterxml.com/JacksonBestPracticesPerformance)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T19:36:25.800

看起来您的 Json 内容只是一个对象列表。这意味着，在我看来，您的代码需要看起来像这样：

```
List<JVenue> venues = mapper.readValue(inputStream, new TypeReference<List<JVenue>>() { }); 
```

无需将其包装`InputStream`在 a 中`Reader`或创建您自己的`JsonFactory`实例`JsonParser`。

# ruby - 在 rake 任务中，执行命令，读取 stdout 直到匹配到某一行，然后分离并继续任务

> ID：11385650
> 
> 赞同：0
> 
> 时间：2012-07-08T18:39:58.443
> 
> 标签：ruby, process, io, rake, stdout

我想启动一个 java servlet，观察它的标准输出，直到我看到它已完全加载，然后在保持该进程运行的同时返回我的 rake 任务的其余部分。目前我有这样的事情：

```
IO.popen "java -jar ./tools/tests/servlet.jar" do |io|
  io.each do |line|
    puts line
    Process.detach(io.pid) if line.include? 'Server ready.' # need help here
  end
end

puts "Ready..." 
```

如何退出此 IO 块以继续执行任务，同时保持进程运行？谢谢！

**编辑：临时错误解决方案**

```
def with_server_running
  IO.popen "java -jar ./tools/tests/servlet.jar" do |io|
    io.each do |line|
      puts line
      yield if line.include? 'Server ready.'
    end
  end
end

with_server_running do
  puts "Ready..."
  # rest of task
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:53:04.167

如果我理解正确，试试这个：

```
if(line.include? 'Server ready.')
  Process.detach(io.pid)
  exit(0)
end 
```

# android - Android：安装保险丝

> ID：11385651
> 
> 赞同：2
> 
> 时间：2012-07-08T18:39:59.113
> 
> 标签：android, fuse

我正在尝试将 fuse-android 库安装到 Android 虚拟设备。为此，我首先尝试为 AVD 提供熔断内核模块支持。我的操作系统是 Linux。我从这条路径中获取了这个模块：

`/lib/modules/3.2.0-23-generic/kernel/fs/fuse/cuse.ko`

并将其复制到`/dev`AVD 的目录中。然后在 AVD 控制台中我执行了命令：`#insmod cuse.co`. 之后，我收到了下一条消息：`init_module 'cuse.ko' failed (Function not implemented)`。

什么可能导致这个问题？也许，我正在尝试使用错误的模块？也许，有人可以告诉我配置 fuse-android lib 的正确步骤是什么？我没有找到任何关于它的东西。

提前致谢。

# jquery - 仅当用户将鼠标悬停在子 div 上时才会触发下拉查询脚本

> ID：11385653
> 
> 赞同：3
> 
> 时间：2012-07-08T18:40:05.527
> 
> 标签：jquery, slide, drop-down-menu, slidedown

我有以下悬停脚本来处理导航栏中子菜单的向下滑动：

```
$j('body').ready(function() {
    $j('.menu-item').hover(function() {
        $j(this).find('.sub-menu').slideDown("slow");
    },
        function() {
            $j(this).find('.sub-menu').slideUp("slow");
        });
}); 
```

目前，正如预期的那样，只要用户将鼠标悬停在 .menu-item div 上，就会激活向下滑动。但是，我只想在用户将鼠标悬停在 .menu-item div 中包含的子 div 上时激活向下滑动，即 .bottom_nav。

HTML 格式为：

```
<li class="menu-item">
<div class="box">
    <div class="top_nav">
    </div>
    <div class="clear">
        <div class="bottom_nav">
            <div class="left_nav">
            </div>
            <div class="center_nav">
                <a href="http://soteriabrighton.co.uk/news/">news</a>
            </div>
            <div class="right_nav">
            </div>
            </a>
        </div>
    </div>
    <ul class="sub-menu">
        <li>
        <div class="box">
            <div class="top_nav">
            </div>
            <div class="clear">
                <div class="bottom_nav">
                    <div class="left_nav">
                    </div>
                    <div class="center_nav">
                        <a href="http://soteriabrighton.co.uk/news/events/">events</a>
                    </div>
                    <div class="right_nav">
                    </div>
                    </a>
                </div>
            </div>
            </li>
        </ul>
        </li> 
```

[您可以在此页面](http://soteriabrighton.co.uk/)上看到正在运行的导航项目，特别是在“新闻”项目上，该项目有一个事件页面的下拉菜单。由于网站正在开发中，您将需要输入以下凭据：

用户名：访客

密码：stackoverflow

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:49:01.320

我通过添加以下内容对此进行了排序：

```
$j('.sub-menu').hover(function() {
    $j(this).stop().slideDown("fast");
}, function() {
    $j(this).stop().slideUp("slow");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:44:41.067

您所要做的就是修改您的选择器以指定该特定内容`div`，然后在该`hover()`方法中，将 DOM 导航回`.menu-item`元素，并在其中找到`.bottom_nav`要设置动画的元素：

```
$j('.menu-item .bottom_nav').hover(function() {
    $j(this).closest('.menu-item').find('.sub-menu').slideDown("slow");
},
function() {
    $j(this).closest('.menu-item').find('.sub-menu').slideUp("slow");
}); 
```

这仅将该`hover()`方法应用于在父级中`.bottom_nav`找到的元素。`.menu-item`

参考：

*   [CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)。
*   [jQuery 选择器](http://api.jquery.com/category/selectors/)。

# java - 实现了比较，但在调用 Arrays.sort 时出现异常

> ID：11385655
> 
> 赞同：1
> 
> 时间：2012-07-08T18:40:50.787
> 
> 标签：java, comparator

这是我的课：

```
public static class __9_7_Person implements Comparator<__9_7_Person> {
    private int height;
    private int weight;
    public __9_7_Person(int height, int weight) {
        this.height = height;
        this.weight = weight;
    }
    public int compare(__9_7_Person p1, __9_7_Person p2) {
        if (p1.height != p2.height) {
            return p1.height - p2.height;
        }
        else {
            return p1.weight - p2.weight;
        }
    }
} 
```

然后我创建了一个这样的数组：

```
__9_7_Person p[] = {new __9_7_Person(60, 100),
                    new __9_7_Person(70, 150),
                    new __9_7_Person(56, 90),
                    new __9_7_Person(75, 190),
                    new __9_7_Person(60, 95),
                    new __9_7_Person(68, 110),
}; 
```

但是当我调用 Arrays.sort(p) 时出现异常：“线程“主”java.lang.ClassCastException 中的异常：ch_9$__9_7_Person 无法转换为 java.lang.Comparable”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T18:43:37.790

您实现了 Comparator，而不是 Comparable。您应该实现 Comparable 而不是 Comparator。

如[文档中所述](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)：

> 数组中的所有元素都必须实现 Comparable 接口。

如果您希望能够对同一类具有不同的排序顺序，比较器很有用。在这种情况下，无法使用 Comparable

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T18:45:41.060

您应该实现`Comparable`自然*排序*，在这种情况下，您不需要将分隔符比较器传递给`Arrays.sort`. *或者*你可以实现`Comparator<__9_7_Person>`（可能在一个单独的类中，例如`HeightWeightPersonComparator`）并调用：

```
Arrays.sort(p, new HeightWeightPersonComparator()); 
```

`Comparable`了解和之间的区别很重要`Comparator`。一个`Comparable`实现说“我知道如何将自己与适当类型的另一个对象进行比较” - 其中一个`Comparator`实现说“我知道如何比较两个适当类型的对象”。

显然，任何类型只能实现`Comparable`一次（在合理范围内），而可以有任意数量的`Comparator`实现。`Comparator`除非您应该使用“明显”的比较，否则使用单独的比较更灵活。如果您不指定`Comparator`,`Arrays.sort`将假定数组中的每个元素都可以与数组的其他元素进行比较，即它们实现`Comparable`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:47:34.777

您需要实现`java.lang.Comparable`接口，而不是`java.util.Comparator`接口。

# postgresql - heroku db：拉到 ubuntu postgresql

> ID：11385661
> 
> 赞同：0
> 
> 时间：2012-07-08T18:41:40.487
> 
> 标签：postgresql, heroku, ssh, taps

我想将我的应用程序从 Heroku 迁移到我自己的 ubuntu 服务器。这样做的正确语法是什么`taps/heroku db:pull`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:46:13.400

如果您在本地和云数据库之间移动数据，这两个数据库都是 Postgres，您应该按照 Heroku 的 Devcenter 上的说明进行操作：

[https://devcenter.heroku.com/articles/migrating-data-between-plans](https://devcenter.heroku.com/articles/migrating-data-between-plans)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:16:12.843

您只需`heroku db:pull`将数据库从 Heroku 拉到您的本地数据库，然后您将备份并恢复到您自己的服务器。如果它是一个大型数据库，您可能希望将 Heroku pgbackups 作为替代方案，因为它会为您提供可下载的备份。

注意：如果你想在数据库之间迁移，即 postgres => mysql 那么你必须使用 db:pull 方法。

# r - 在 R 中使用库 cairoDevice 在 Cairo() 和 Cairo_png() 中字体大小和多行文本位置不一致

> ID：11385664
> 
> 赞同：4
> 
> 时间：2012-07-08T18:42:11.677
> 
> 标签：r, cairo

我在 Windows 7 下使用 Cairo 库在 R 中创建一些相当复杂的图表，用于抗锯齿图形。我使用的是 R2.15.1 和 cairoDevice 版本 2.19。我有一个问题，即 Cairo_png() 中的字体大小比简单的基于屏幕的 Cairo() 中的字体大小大，并且 mtext 的位置不同。举一个简单的例子：

屏幕版本代码：

```
> Cairo(4, 4)
> par(bg = "blue")
> plot.new()
> for (x in 1:30) mtext(format(x), line = -x, outer = TRUE, adj = 0, col = "white") 
```

结果：

![在此处输入图像描述](../Images/520398c6131266f73ac14a6df1bb49c6.png)

png 版本的代码：

```
> Cairo_png("test.png", 4, 4)
> par(bg = "red")
> plot.new()
> for (x in 1:30) mtext(format(x), line = -x, outer = TRUE, adj = 0, col = "white")
> dev.off() 
```

png 代码的结果：

![在此处输入图像描述](../Images/c130764b9a45e0da6a445fac343cfac1.png)

如您所见，png 版本的字体更大，而多行文字的位置更宽。这是一个错误还是我做错了什么？

我应该补充一点，Cairo_svg() 和 Cairo_pdf() 的行为方式与 Cairo_png() 相同。它们都输出相同，但与基于屏幕的 Cairo() 不一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:55:44.540

正如我们在[cairoDevice 文档](http://cran.r-project.org/web/packages/cairoDevice/cairoDevice.pdf)`pointsize`中看到的那样，您提到的函数中的参数有不同的默认值：

```
Cairo(width = 7, height = 7, pointsize = 8, 
      surface = c("screen", "png", "pdf", "ps", "svg"), 
      filename = Cairo_pdf(filename, width = 7, height = 7, pointsize = 10)
Cairo_ps(filename, width = 7, height = 7, pointsize = 10)
Cairo_svg(filename, width = 7, height = 7, pointsize = 10)
Cairo_png(filename, width = 7, height = 7, pointsize = 10) 
```

采取同样的`pointsize`

```
Cairo_png("test.png", 4, 4, pointsize = 8)
par(bg = "red")
plot.new()
for (x in 1:30) mtext(format(x), line = -x, outer = TRUE, adj = 0, col = "white")
dev.off() 
```

返回这个

![在此处输入图像描述](../Images/3405df2ec72f3cdecf9e8016a0f10824.png)

# wpf - 为什么在 C# 代码中引用 ResourceDictionary 时出现“类型引用找不到类型”异常

> ID：11385667
> 
> 赞同：0
> 
> 时间：2012-07-08T18:42:53.727
> 
> 标签：wpf, xaml, styles

我正在使用以下代码在资源字典中创建样式：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:Chart="clr-namespace:TestApp.Controls.Chart">

<Style x:Key="DefaultLabelStyle" TargetType="{x:Type Chart:LabelStyle}">
    <Setter Property="LabelBrush">
        <Setter.Value>
            <SolidColorBrush Color="Red"/>
        </Setter.Value>
    </Setter>
    <Setter Property="LabelFontSize" Value="12.0"/>
    <Setter Property="Visibility" Value="False"/>
    <Setter Property="OrientationAngle" Value="0"/>
    <Setter Property="LabelPlacement" Value="Top"/>
    <Setter Property="LabelOrientation" Value="Normal"/>
</Style> 
```

然后尝试使用以下代码使用它：

```
 public static void LoadSkin()
    {
        var _skinDictionary = new ResourceDictionary { Source = new Uri("/Chart;component/Resources/DefaultSkin.xaml", UriKind.RelativeOrAbsolute) };
    } 
```

但它抛出“类型引用找不到类型”异常，提到无法找到LabelStyle。但是 LabelStyle 是 Chart 中的公共类。

我在这里做错了什么？

我尝试在这里检查其他有类似问题的线程并尝试进行这些更改，

仍然不起作用:(

请让我知道你的建议..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:16:34.900

您不能将样式应用于不是从 FrameworkElement 或 FrameworkContentElement 派生的类型。请参阅[Style.TargetType中的](http://msdn.microsoft.com/en-us/library/system.windows.style.targettype)*备注*部分。

也许你的`LabelStyle`类可以简单地从这样的资源中获取它的属性值：

```
<ResourceDictionary ...
    xmlns:sys="clr-namespace:System;assembly=mscorlib">
    <sys:Double x:Key="LabelFontSize">12.0</sys:Double>
    ...
</ResourceDictionary> 
```

# php - JS Ajax调用PHP并获取ajax调用数据

> ID：11385668
> 
> 赞同：1
> 
> 时间：2012-07-08T18:43:04.793
> 
> 标签：php, javascript, ajax

我有一个标准的 javascript ajax 调用，我在其中设置数据：到 json 数据。

```
$.ajax({
    type: "POST",
    url: BaseUrl + "User/Login",    
    //url: BaseUrl + "User/Limit/1/2",
    data: '{"apiKey":"c7089786-7e3a-462c-a620-d85031f0c826","appIDGiven":"200","userName":"matt2","password":"pass"}',
    success: function(data){
        console.log(data);
    },
    error: function(request){
        console.log(request);
    },
}); 
```

我试图在 php 中获取数据，`$_POST["data"]`但这是行不通的。
但是，`data: 'test={"apiKey":"c7089786-7e3a-462c-a620-d85031f0c826","appIDGiven":"200","userName":"matt2","password":"pass"}'`有效。

我想知道这可能是我的框架或类似的东西阻止`$_POST["data"]`工作还是根本不可能？或者还有什么我可以用来获取这些数据的东西吗？

编辑：

所以框架 YII 和扩展 Restfullyii 有一种方法来获取它正在使用的数据，使用一行 return json_decode(file_get_contents("php://input"), true);

这是获取所有数据而不需要 data= 或 {data: 但是它似乎正在返回一个数组，所以我访问我的属性，如 $data["userName"] ，其中真正的 json 对象应该是 $data->["用户名”]。如果我在这方面有任何错误，请纠正我在这种情况下我得到数组是因为我真的在发送一个 json 字符串吗？与 json 对象相比？

编辑 x2：

所以 php 使它成为一个 assoc 数组，因为它发送 true 到 json_decode..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:15:09.507

我认为您的代码的问题在于您设置的行`data: '{....}'`。
它应该是 json 格式以便正确传递（虽然它也可以是字符串格式，但您需要在服务器端解析它）

下面的代码应该可以正常工作：

```
$.ajax({
    type: "post",
    url: BaseUrl + "User/Login",
    data: {"apiKey":"c7089786-7e3a-462c-a620-d85031f0c826","appIDGiven":"200","userName":"matt2","password":"pass"},
    success: function(data){
        console.log(data);
    },
    error: function(request){
        console.log(request);
    }
}); 
```

在服务器端尝试：`$_POST['apiKey']` `$_POST['appIDGiven']`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:45:26.073

`data`选项必须是一个`object`或**序列化**（例如`"name1=value1&name2=value2"`）字符串。所以你需要像这样传递：

```
data: /*object*/{data:'{"apiKey":"c7089786-7e3a-462c-a620-d85031f0c826","appIDGiven":"200","userName":"matt2","password":"pass"}'},
                // ^-----this is added for $_POST["data"] 
```

或喜欢：

```
data: /*serialized string*/'data={"apiKey":"c7089786-7e3a-462c-a620-d85031f0c826","appIDGiven":"200","userName":"matt2","password":"pass"}',
                           // ^-----this is added for $_POST["data"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:57:31.030

首先，发送的数据必须是**JSON 对象**而不是字符串。删除引号。

此外，在您的服务器端，您将更好地**解码**输入`$_POST['data']`（**`json_decode()`**请参阅[文档](http://php.net/manual/en/function.json-decode.php)）

# database - 如何进行 CRON 作业以使用 phpmyadmin 的导出功能导出数据库

> ID：11385671
> 
> 赞同：2
> 
> 时间：2012-07-08T18:43:13.340
> 
> 标签：database, excel, crontab

我想每月将我的数据库中的一些表导出到 Excel/电子表格。在 PHPMyAdmin 中有一个将查询结果导出到所需文件类型的直接选项。如何在没有其他脚本的情况下利用此导出功能每月运行 cronjob？

基本上在 CPanel 上（数据库托管在网络中），我们只需提供要通过 cronjob 执行的脚本的路径。但是在 PHPMyAdmin 中没有这样的机会。它是 PHPMyAdmin 的一个包含的功能，我们通常在其中手动单击并进行操作。那么我如何在Cpanel中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:22:45.157

你有 ssh 访问盒子吗？就我个人而言，我会在 phpmyadmin 之外实现这一点，因为 phpmyadmin 仅用于通过界面进行手动操作。为什么不写一个简单的脚本来导出数据库呢？

类似的东西`mysqldump database table`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T18:52:48.210

作为一个网络应用程序，导出功能是一个 POST 请求。在演示应用程序中 URL 是`http://demo.phpmyadmin.net/STABLE/export.php`，然后发布数据包含所有必需的参数，例如：（您也可以使用 Fiddler/Chrome 开发工具查看它）

```
token:3162d3b849cf652c2577a45f90022df7
export_type:server
export_method:quick
quick_or_custom:custom
output_format:sendit
filename_template:@SERVER@
remember_template:on
charset_of_file:utf-8
compression:none
what:excel
codegen_structure_or_data:data
codegen_format:0
csv_separator:,
csv_enclosed:"
..... 
```

一个棘手的问题是身份验证令牌，但我相信这也可以通过一些配置和/或提取参数来克服（例如[http://demo.phpmyadmin.net/](http://demo.phpmyadmin.net/)中的“直接登录” ）

请参阅此处 [如何从 Linux 命令行使用 curl 发送数据？](https://stackoverflow.com/questions/6865146/how-to-send-data-using-curl-from-linux-command-line)

如果你想避免这一切，还有许多其他的网络自动化工具可以记录场景并回放。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T07:59:50.073

只需编写一个简单的 php 脚本来连接到您的数据库并在此处使用答案：

[如何以 CSV 格式输出 MySQL 查询结果？](https://stackoverflow.com/questions/356578/how-to-output-mysql-query-results-in-csv-format)

# jquery - Rails（现在）不喜欢我的将元素转换为链接的 jquery 脚本。“未定义的方法”错误

> ID：11385674
> 
> 赞同：0
> 
> 时间：2012-07-08T18:43:26.967
> 
> 标签：jquery, ruby-on-rails, ruby, model-view-controller, html-table

这是视图的错误部分 (show.html.erb)

```
<% @results.each do |r| %>
<tr class="tweets">

    <script>
        $("td.status").click(function(){
        window.location = "http://www.twitter.com/id/status/<%= r.page_id %>";
        });
    </script>
    <td class="user"><img src="<%= r.img_url %>"></td>

    <td class="user"><strong><%= r.screen_name %></strong></td>

    <td class="user"><%= r.real_name %></td>

    <td class="time"><%= r.time_ago %></td>
    <td class="status"><%= r.status %></td>
</tr>
<% end %> 
```

请注意，当我删除 jquery 脚本时，所有其他 r.element 标签都会起作用。在此视图的控制器（此处称为）中实例化的 @results 对象调用此脚本（我只展示了它的一部分）

```
module SimpleTwitter
  class Tweet

attr_accessor :img_url, :screen_name, :real_name, :status, :time_ago

def initialize(tweet_hash)
  @img_url = tweet_hash['profile_image_url']
  @screen_name = tweet_hash['from_user']
  @real_name = tweet_hash['from_user_name']
  @status = tweet_hash['text']
  @page_id = tweet_hash['id']
  ...(cont)... 
```

通过一系列文件、gem、类，这里有很多复杂的（无论如何对我来说）解析，但要知道，如果没有“链接”给定元素的 jquery 脚本，一切都运行良好。以前我使用这个 jquery 脚本没有错误。

如果您想了解更多信息，请告诉我。

编辑（DOH！）---这是错误消息：

```
NoMethodError in Searches#show

Showing /home/ddouglas/Develop/twitter_research/app/views/searches/show.html.erb where     line #28 raised:

undefined method `page_id' for #<SimpleTwitter::Tweet:0x000000030ee590>
Extracted source (around line #28):

25: 
26:         <script>
27:             $("td.status").click(function(){
28:             window.location = "http://www.twitter.com/id/status/<%=         r.page_id %>";
29:             });
30:         </script>
31:         <td class="user"><img src="<%= r.img_url %>"></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:02:32.597

Tweet 类的 attr_accessor 不包括 :page_id

谢谢张

# mysql - Excel数组公式到MySQL等效

> ID：11385680
> 
> 赞同：2
> 
> 时间：2012-07-08T18:43:58.183
> 
> 标签：mysql, excel, excel-formula

我一直在 excel 中使用一个非常简单的数组公式来处理一些数据集，但是它们变得太大，并且在我更新计算时绝对会破坏我的计算机性能。

excel表和MySQL数据库的布局如下：

```
+-Timestamp-+-value-+
| 1340816430|  .02  |
--------------------- 
```

x600,000 行

这是excel公式：

```
{=AVERAGEIFS(B:B,A:A,"<"&A1+1000,A:A,">"&A1-1000)} 
```

这将返回值的平均值，并且是 excel 表中的第三列。我有什么可行的方法来创建一个 MySQL 查询，该查询执行类似的操作并返回一个列，如果我运行 excel 的公式，第三列中的值会是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:07:39.560

如果您对使用 Excel 公式感到满意，则可以大大加快此计算速度（在我的系统上超过 3000 倍）。假设 A 列包含 ASCENDING ORDER 中的时间戳，B 列包含值（如果尚未排序，则使用 E​​xcel 排序）。
在 C 列中放入 =IFERROR(MATCH(A1-1000,$A:$A,1),1) 并复制下来。这将计算行号少 1000 个时间戳的行号。
在 D 列中放入 =IFERROR(MATCH(A1+1000,$A:$A,1),1048576) 并复制下来。这将计算第 1000 行时间戳的行号。
在 E 列中放入 =AVERAGE(OFFSET(B1,C1-ROW(),0,D1-C1+1,1)) 并向下复制。这将计算从第一行到最后一行的子集范围的平均值。

在我的系统上，这个完整的计算 1000K 行在 20 秒内。
这种方法的缺点是它的易失性，因此每当您进行更改时都会重新计算，但我假设您无论如何都处于手动计算模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T22:29:54.360

mysql代码：

```
select
  a.timestamp t1,
  avg(x.value) average_value
from
  mydata a inner join (
    select 
      timestamp, 
      value
    from mydata
    ) x
    on x.timestamp between a.timestamp - 1000 and a.timestamp + 1000
group by 
  a.timestamp
order by
  t1
; 
```

我想认为如果没有 Excel 开销，它的性能会好得多，但我不能保证它在 600k 行上会快如闪电。你肯定会想要索引`Timestamp`. 另请参阅我创建的[SQL Fiddle 。](http://sqlfiddle.com/#!2/62026/1/0 "SQL小提琴")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:26:28.180

@Peter 如果愿意，您可以坚持使用 Excel。只需使用[http://xllarray.codeplex.com](http://xllarray.codeplex.com)。你想要的公式是`=AVERAGE(ARRAY.MASK((A:A>A1 + 1000)*(A:A<A1 - 1000), B:B)`。我的垃圾笔记本电脑上的 1MM 行计算不到 1 秒。请务必按 Ctrl-Shift-Enter 作为数组公式。

如果您不想构建代码，您可以从我的 SkyDrive 中获取加载项和帮助文件：http: [//sdrv.ms/JtaMIV](http://sdrv.ms/JtaMIV)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:33:40.180

@查尔斯。啊，不。它仅适用于一个公式。误读了规范。

如果您想将计算推送到 C++ 中并将其公开为 xll，您可以这样做：

```
#include <algorithm>
#include <numeric>
#include "xll/xll.h"

using namespace xll;

typedef traits<XLOPER12>::xword xword;

static AddIn12 xai_windowed_average(
    L"?xll_windowed_average", XLL_FP12 XLL_FP12 XLL_FP12 XLL_DOUBLE12,
    L"WINDOWED.AVERAGE", L"Time, Value, Window"
);
_FP12* WINAPI
xll_windowed_average(_FP12* pt, _FP12* pv, double dt)
{
#pragma XLLEXPORT
static xll::FP12 a(size(*pt), 1);

double* bt0 = &pt->array[0];
double* bv0 = &pv->array[0];
double* bt = std::lower_bound(begin(*pt), end(*pt), *bt0 - dt);
double* et = std::lower_bound(begin(*pt), end(*pt), *bt0 + dt);

for (xword i = 0; i < size(*pt); ++i) {
    a[i] = (bt == et) ? 0 : std::accumulate(bv0 + (bt - bt0), bv0 + (et - bt0), 0)/(et - bt); 

    // update the window
    bt = std::lower_bound(bt, end(*pt), pt->array[i] - dt);
    et = std::lower_bound(bt, end(*pt), pt->array[i] + dt);
}

return a.get();
} 
```

# objective-c - UIProgressView 缩放问题

> ID：11385682
> 
> 赞同：1
> 
> 时间：2012-07-08T18:44:04.070
> 
> 标签：objective-c, ios

我对 UIProgressView 有这个奇怪的问题。这个视频会比我用文字更好地解释......

[https://vimeo.com/45399884](https://vimeo.com/45399884) **密码：stackoverflow**

但基本上，我有一个 UIProgressView 使用 iOS5 的新 setProgress:animated 方法。我正在为它制作动画，但是当它动画时，控件的滑块部分正在从视图的边界 0,0 缩放到 bounds.size.max,bounds.size.max。它正确地从左到右动画（有一个例外），但同时缩放。所以基本上它看起来像一个对角线幻灯片。

这是我的进度视图代码的每一点。

```
progressView = [[UIProgressView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 11)];
[self.view addSubview:progressView];
[progressView setProgressViewStyle:UIProgressViewStyleBar];
[progressView setProgress:refreshInterval animated:YES]; 
```

任何提示或建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:54:56.320

`UIProgressView`为is指定的初始值设定项`-initWithProgressViewStyle:`。您不应该修改进度条的高度，虽然条形进度条的高度是 11，但`-initWithProgressViewStyle:`由于控件的默认高度是 9，因此可能会初始化一些效果，因为您会丢失.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:54:29.463

a 的指定初始值设定项`UIProgressView`似乎是`-initWithProgressBarStyle:`。尝试使用该方法创建它。

# python - 在字典中搜索键，将该键的值添加到另一个键值对

> ID：11385683
> 
> 赞同：0
> 
> 时间：2012-07-08T18:44:04.293
> 
> 标签：python, dictionary

好的，所以我有一本字典，里面有很多键：值对：

```
 worddict = {'example1': 1, 'example2': 0, 'example3': 7} 
```

我想检查某些键，并获取它们的值，并将其添加到另一个键：值对的值。例如：

伪代码：

```
seconddict = {'firstitem': 1, 'seconditem': 1, 'thirditem':9}

for x in worddict:
    if x.key = example1:
        seconddict{'firstitem'.value} + example1.value 
```

我认为我有正确的总体思路，但没有语法。

但基本上，firstitem 的值会增加与 example1 的值完全相同的数字

基本上，我有一个单词列表，这些单词属于特定类别。这些类别中的任何一个单词都会将该类别的值加一。

编辑：

预期的输出是如果第一个字典中的键具有值，则该值将添加到第二个字典中特定键的值中。

所以在这种情况下，firstitem 的值将变为“2”，因为它从 1 开始，并且 example1 属于“firstname”类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:10:26.473

**编辑：** OP的评论清楚地表明单词可以属于多个类别。代码调整。

* * *

我认为您想**按类别****累积**单词的值。一种（简单）方法是：

 **```
def accumulate_by_category(word_values, cat_sums, cats):
    """ modify the category sums by adding the values of the given words """
    for word, value in word_values.items():
        for cat in cats[word]:
            cat_sums[cat] += value 
```

你可以像这样使用它：

```
worddict = {'example1': 1, 'example2': 0, 'example3': 7}
seconddict = {'firstitem': 1, 'seconditem': 1, 'thirditem':9}

categories = {'example1': ['firstitem', 'thirditem'],
              'example2': ['seconditem', 'thirditem'],
              'example3': ['thirditem']}

accumulate_by_category(worddict, seconddict, categories)
print(seconddict) # {'seconditem': 1, 'firstitem': 2, 'thirditem': 17} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:50:19.783

这是你的想法吗？

```
for word,category in worddict.items():
    categoryCounts[category] += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:51:52.613

我猜您正在寻找这样的东西 - 如果没有，请发布您的预期输出

```
my_list = [False, False, False, True, True, True]

worddict = {'example1': 1, 'example2': 0, 'example3': 7}
seconddict = {'firstitem': 1, 'seconditem': 1, 'thirditem':9}

keys_to_add = ['example1', 'example3']

for k in keys_to_add:
    seconddict['firstitem'] += worddict[k]

print seconddict 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-08T18:53:01.240

```
seconddict = {}
for k,v in worddict.items():
 seconddict[v] = seconddict.get(v,0) + 1 
```**

# ruby-on-rails-3 - 为什么我的部分不适用于 slim 和 Rails 3.2？

> ID：11385684
> 
> 赞同：0
> 
> 时间：2012-07-08T18:44:06.133
> 
> 标签：ruby-on-rails-3, slim-lang

我使用的是 Rails 3.2，而不是 ERB，我使用的是`slim`.

这是我的部分表格：

```
= simple_form_for @game, :html => { :class => 'form-horizontal' } do |f| 
```

我得到的语法错误是：

```
_form.html.slim:1: syntax error, unexpected ')' ... => 'form-horizontal' } do |f|))).to_s)); 
```

但我不知道它希望把')'放在哪里？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:32:40.200

语法应该是：

> = form_for([@resource], html: { multipart: true }, remote: true) 做 |f|

尝试替换您的价值观。

我无法找到苗条表单助手的正确文档。

# c - Fork() 命令问题

> ID：11385694
> 
> 赞同：1
> 
> 时间：2012-07-08T18:45:41.300
> 
> 标签：c, linux, fork

在彻底执行 fork() 命令时，我遇到了一个问题。

如果时间从第 0 秒开始，到第 12 秒结束时创建了多少个进程？进程 ID 从 0 开始。

**伪代码**

```
 while(true)
        {
             sleep 1second;
             if( getpid() % 2 == 0 )
             {
                     fork();
                     printf("Hello\n");
             }
       } 
```

当我在我的系统上运行上面的代码时，它没有在 konsole 上显示输出。没有 。12 秒结束时的进程取决于操作系统？需要建议，因为我不擅长 fork()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:50:31.833

从什么时候开始进程 ID“从 0 开始”？即使在系统启动时也不行；第一个进程的 id 为 1 :-)

只有当您自己的进程 ID 是偶数时，您才会进行 fork()；所以如果它碰巧很奇怪，那么什么都不会发生......这意味着如果你多次运行程序，有时它会做一些事情，有时它不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:48:59.910

在你的后面添加这个`printf`：

```
fflush(stdout); 
```

但是您的逻辑存在根本问题。`fork()`在子进程中返回 0，在父进程中返回子进程 pid。你不检查，所以父母和孩子都继续循环，一次又一次，一次又一次，永远。您需要将循环体更改为：

```
if(fork() == 0)
{
  printf("Hello!\n");
  fflush(stdout);
} 
```

# boost - boost directory_iterator 接收 SIGABRT

> ID：11385698
> 
> 赞同：2
> 
> 时间：2012-07-08T18:46:03.563
> 
> 标签：boost, sigabrt, boost-iterators

我正在使用 boost/filesystem 来迭代目录并将它们添加到 MacOSX + XCode3 上的 Zip 文件中。

我原来的逻辑是这样的

```
path targetDir( "Volumes/data/some_directory" );
directory_iterator it( targetDir ), eod;

std::string filename;
std::string strPath;

// I tried both of two types of making loop
for( ; it != eod ; ++it )
{
    path const& p = *it;
    filename = p.filename();
    if( is_directory(p) )
    {
        strPath = strDirectory + filename + string("/");

        // Initially I wanted this logic to be recursive(these code block is a part of PackDirectory)
        PackDirectory( archive, strPath, lpszPackFile );
    }
    else if( is_regular_file(p) )
    {
        strPath = strDirectory + filename;
        // add this file to specified Zip file here
    }

}

then function returns here. 
```

返回此函数后会出现问题，特别是在调用 directory_iterator 的析构函数时，我猜。似乎它删除了无效指针，并接收 SIGABRT。程序有时会像下面那样崩溃，有时当我点击跳过时它会冻结，XCode 说“跳过”但是调用堆栈消失没有任何进展。关键是，即使我在循环内没有做任何事情，问题仍然存在，这意味着当变量被简单地创建并返回函数时。

有关更多信息，程序崩溃时的调用堆栈如下所示。

```
#0  0x93f86c5a in __kill
#1  0x93f86c4c in kill$UNIX2003
#2  0x940195a5 in raise
#3  0x9402f6e4 in abort
#4  0x93f2c575 in free
#5  0x00134aea in dir_itr_close [inlined] at v2_operations.cpp:1300
#6  0x00134aea in ~dir_itr_imp [inlined] at operations.hpp:877
#7  0x00134aea in     checked_delete<boost::filesystem2::detail::dir_itr_imp<boost::filesystem2::basic_path<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, boost::filesystem2::path_traits> > > [inlined] at checked_delete.hpp:34
#8  0x00134aea in boost::detail::sp_counted_impl_p<boost::filesystem2::detail::dir_itr_imp<boost::filesystem2::basic_path<std::string, boost::filesystem2::path_traits> > >::dispose at v2_operations.cpp:78
#9  0x00136583 in boost::detail::sp_counted_base::weak_release at sp_counted_base_pt.hpp:97 
```

它进入~dir_itr_imp，所以它似乎在通过类型检查后到达了正确的析构函数。

我对 directory_iterator 做错了吗？如果有人遇到这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:56:49.400

引发的信号`free`不一定指向调用函数中的缺陷。较早且中断的调用`free`可能已损坏`malloc`的可用内存列表，从而导致错误。

尝试在 中运行你的程序`valgrind`，它更健壮，并且在使用损坏的内存分配/释放时会立即死亡。如果`valgrind`不是一个选项，您还可以尝试在独立于程序其余部分的单元测试中测试您的代码。

# jquery - 带有自动完成功能的ckeditor？

> ID：11385700
> 
> 赞同：6
> 
> 时间：2012-07-08T18:46:35.337
> 
> 标签：jquery, ckeditor, jquery-autocomplete

是否有可能以某种方式在ckeditor中实现jquery自动完成？创建一个按钮并不难，但是是否可以将其硬连接到自动完成，所以在再次按下按钮之前正在输入的下一个单词......？

任何远程做过类似事情的人，请告诉我。或者，如果这不可能，自动完成搜索的弹出窗口，然后单击/选择它会将所选项目添加到 ckeditor textarea/当前光标位置（可能作为链接......）？

当然尽量不要过度:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-11T10:10:25.923

In order to make a suggestion box, you will have to make your custom plugin to use context menu as suggestion box, please check out the link for the basic knowledge of making ckeditor plugin from here [a link](http://docs.ckeditor.com/#!/guide/plugin_sdk_intro)

Add this to your config.js, where autocomplete is name of the plugin

```
config.extraPlugins = 'autocomplete'; 
```

Then create a following directory structure/file in the ckeditor folder

```
ckeditor->plugins->autocomplete->plugin.js 
```

Put the following content in your plugin.js file

```
CKEDITOR.plugins.add('autocomplete',
            {
                init : function(editor) {

                     var autocompleteCommand = editor.addCommand('autocomplete', {
                        exec : function(editor) { 
```

We will need to create a dummy span in the document to calculate the current position of the menu to be shown

```
 var dummyElement = editor.document
                                    .createElement('span');
                            editor.insertElement(dummyElement);

                            var x = 0;
                            var y = 0;

                            var obj = dummyElement.$;

                            while (obj.offsetParent) {
                                x += obj.offsetLeft;
                                y += obj.offsetTop;
                                obj = obj.offsetParent;
                            }
                            x += obj.offsetLeft;
                            y += obj.offsetTop;

                            dummyElement.remove(); 
```

After calculation the position, we remove the element and call the method to show the suggestions (placed in the context menu, which are configured in next function)

```
 editor.contextMenu.show(editor.document
                                    .getBody(), null, x, y);
                        }
                    });
                }, 
```

Here is the listener bind on editor to check whether the current key is a # or not, **CKEDITOR.SHIFT + 51 is the key combination for #**

```
 afterInit : function(editor) {
                    editor.on('key', function(evt) {
                        if (evt.data.keyCode == CKEDITOR.SHIFT + 51) {
                            editor.execCommand('autocomplete');
                        }
                    }); 
```

**reloadSuggetionBox** command will be called from your external jquery to generate the menu just after the ckeditor is ready

```
 var firstExecution = true;
                    var dataElement = {};

                     editor.addCommand('reloadSuggetionBox', {
                            exec : function(editor) {
                                if (editor.contextMenu) {
                                    dataElement = {};
                                    editor.addMenuGroup('suggestionBoxGroup');

                            $.each(Suggestions,function(i, suggestion)
                            {
                                    var suggestionBoxItem = "suggestionBoxItem"+ i; 
                                    dataElement[suggestionBoxItem] = CKEDITOR.TRISTATE_OFF;
                                    editor.addMenuItem(suggestionBoxItem,
                                                                        {
                                        id : suggestion.id,
                                        label : suggestion.label,
                                        group : 'suggestionBoxGroup',
                                        icon  : null,
                                        onClick : function() {
                                            var data = editor.getData();
                                            var selection = editor.getSelection();
                                            var element = selection.getStartElement();
                                            var ranges = selection.getRanges();
                                            ranges[0].setStart(element.getFirst(), 0);
                                            ranges[0].setEnd(element.getFirst(),0);
                                            editor.insertHtml(this.id + '&nbsp;');
                                            },
                                            });
                                    });

                                    if(firstExecution == true)
                                        {
                                            editor.contextMenu.addListener(function(element) {
                                                return dataElement;
                                            });
                                        firstExecution = false;
                                        }
                                }
                            }
                     });

                    delete editor._.menuItems.paste;
                },
            }); 
```

Here "Suggestions" is the variable present somewhere on your page with holds a list of object having a 'id' and 'label' to be shown in suggestion.

Now in order to configure these suggestions, please perform the following jquery code, after this, whenever '#' is pressed, suggestions will be shown

```
$('textarea').ckeditor();
CKEDITOR.on( 'instanceReady', function( evt ) {
        CKEDITOR.instances.contractData.execCommand('reloadSuggetionBox');
    }); 
```

This will load the ckeditor(contractData is name of my ckeditor instance) and configure the plugin to show suggestions currently present int the "Suggestions" variable, anytime you need to refresh/change the suggestions you just need to call this function after reloading "Suggestions" variable

```
 CKEDITOR.instances.contractData.execCommand('reloadSuggetionBox'); 
```

![enter image description here](../Images/0cbb412defdcbf3be05bafd7a685ce2e.png) ![enter image description here](../Images/59003e6e8503acbd36cbd079926345aa.png)

Let me know if you get any problem on getting this working.

Find the downloadable plugin at my repo at

[http://navalgandhi1989.github.io/ckeditor-autocomplete-suggestions-plugin/](http://navalgandhi1989.github.io/ckeditor-autocomplete-suggestions-plugin/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:48:43.787

我远程做了类似的事情，不是用 CKEdit 而是用[markItUp](http://markitup.jaysalvat.com)。

自动完成工作由基于 jQuery UI[的插件完成。](https://github.com/mataki/jquery-textarea-imput-support)

我很难在 CKEdit 文本区域中集成自动完成功能。然后我更好地反映并改变了要求。我更喜欢标记编辑器而不是 WYSIWYG 编辑器（类似文字处理器）。也许这不适用于你，但也考虑评估这个观点。

如果您可以将所见即所得的文本框变成标记编辑器，那么令人惊喜的是 markItUp 和自动完成插件可以很好地配合使用。只需为 markItUp 设置 textarea，然后启用自动完成。markItUp 文档很好，插件不一样。为此，有一个演示项目。

# mysql - SQL 插入（基本）

> ID：11385704
> 
> 赞同：0
> 
> 时间：2012-07-08T18:47:06.650
> 
> 标签：mysql, sql

我正在尝试批量插入数据库，以尝试让我的生活更轻松 - 但是，在尝试插入时我一直遇到问题。我认为我的问题是它包含一个 * （但我不确定）。有什么建议么？对不起新手的问题。

错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法以使用 near 's Wall、喜欢、评论或分享您的一个页面帖子，在第 3 行回答一个问题

```
 INSERT INTO `bushell_stats`.`stats` (`id`, `name`, `description`) VALUES 
(NULL, 'page_stories', 'The number of stories created about your Page'),
(NULL, 'page_storytellers*', 'The number of people sharing stories about your page. These stories include liking your Page, posting to your Page's Wall, liking, commenting on or sharing one of your Page posts, answering a Question you posted, RSVPing to one of your events, mentioning your Page, phototagging your Page or checking in at your Place Note that currently only the weekly value is in real-time if you set until=now in the request'),
(NULL, 'page_stories_by_story_type', 'The number of stories about your Page by story type'),
(NULL, 'page_storytellers_by_story_type', 'The number of people talking about your Page, by story type'),
(NULL, 'page_storytellers_by_age_gender', 'The number of People Talking About the Page by user age and gender'),
(NULL, 'page_storytellers_by_country', 'The number of People Talking About the Page by user country'),
(NULL, 'page_storytellers_by_locale', 'The number of People Talking About the Page by user language'),
(NULL, 'page_impressions', 'The total number of impressions seen of any content associated with your Page'),
(NULL, 'page_impressions_unique', 'The number of people who have seen any content associated with your Page'),
(NULL, 'page_impressions_paid', 'The number of impressions of a Sponsored Story or Ad pointing to your Page'),
(NULL, 'page_impressions_paid_unique', 'Number of people who saw a sponsored story or Ad about your Page'),
(NULL, 'page_impressions_organic', 'The number of times your posts were seen in News Feed or Ticker or on visits to your Page. These impressions can be Fans or non-Fans'),
(NULL, 'page_impressions_organic_unique', 'The number of people who visited your Page, or saw your Page or one of its posts in News Feed or Ticker. These impressions can be Fans or non-Fans'),
(NULL, 'page_impressions_viral', 'The number of impressions of a story published by a friend about your Page. These stories include liking your Page, posting to your Page's Wall, liking, commenting on or sharing one of your Page posts, answering a Question you posted, RSVPing to one of your events, mentioning your Page, phototagging your Page or checking in at your Place'),
(NULL, 'page_impressions_viral_unique', 'The number of people who saw your Page or one of its posts from a story published by a friend. These stories include liking your Page, posting to your Page's Wall, liking, commenting on or sharing one of your Page posts, answering a Question you posted, RSVPing to one of your events, mentioning your Page, phototagging your Page or checking in at your Place'),
(NULL, 'page_impressions_by_story_type', 'Total impressions of stories published by a friend about your Page by story type'),
(NULL, 'page_impressions_by_story_type_unique', 'The number of people who saw a story about your Page by story type'),
(NULL, 'page_impressions_by_city_unique', 'The number of people who have seen any content associated with your Page by city'),
(NULL, 'page_impressions_by_age_gender_unique', 'The number of people who have seen any content associated with your Page by age and gender grouping'),
(NULL, 'page_impressions_frequency_distribution', 'The number of people your Page reached broken down by how many times people saw any content about your Page'),
(NULL, 'page_impressions_viral_frequency_distribution', 'The number of people your Page reached from a story published by a friend, broken down by how many times people saw stories about your Page'),
(NULL, 'page_engaged_users', 'The number of people who engaged with your Page. Engagement includes any click'),
(NULL, 'page_consumptions', 'The number of times people clicked on any of your content without generating a story'),
(NULL, 'page_consumptions_unique', 'The number of people who clicked on any of your content without generating a story'),
(NULL, 'page_consumptions_by_consumption_type', 'The number of times people clicked on any of your content without generating a story, by type'),
(NULL, 'page_consumptions_by_consumption_type_unique', 'The number of people who clicked on any of your content without generating a story, by type'),
(NULL, 'page_places_checkin_total', 'The number of times people checked into a place'),
(NULL, 'page_places_checkin_total_unique', 'The number of people who checked into a place'),
(NULL, 'page_places_checkin_mobile', 'The number of times people checked into a place using mobile phones'),
(NULL, 'page_places_checkin_mobile_unique', 'The number of people who checked into a place using mobile phones'),
(NULL, 'page_places_checkins_by_age_gender', 'gender and age of people who checked in at your Place'),
(NULL, 'page_places_checkins_by_locale', 'top locales of people who checked into your Place'),
(NULL, 'page_places_checkins_by_country', 'top countries of people who checked into your Place'),
(NULL, 'page_negative_feedback', 'The number of times people took a negative action (e.g., un-liked or hid a post)'),
(NULL, 'page_negative_feedback_unique', 'The number of people who took a negative action (e.g., un-liked or hid a post)'),
(NULL, 'page_negative_feedback_by_type', 'The number of times people took a negative action broken down by type (see negative feedback types)'),
(NULL, 'page_negative_feedback_by_type_unique', 'The number of people who took a negative action broken down by type see negative feedback types)'),
(NULL, 'page_fans', 'The total number of people who have liked your Page.'),
(NULL, 'page_fans_locale', 'Aggregated language data about the people who like your Page based on the default language setting selected when accessing Facebook.'),
(NULL, 'page_fans_city', 'Aggregated Facebook location data, sorted by city, about the people who like your Page.'),
(NULL, 'page_fans_country', 'Aggregated Facebook location data, sorted by country, about the people who like your Page'),
(NULL, 'page_fans_gender_age', 'Aggregated demographic data about the people who like your Page based on the age and gender information they provide in their user profiles.'),
(NULL, 'page_fan_adds', 'The number of new people who have liked your Page.'),
(NULL, 'page_fan_adds_unique', 'The number of new people who have liked your Page.'),
(NULL, 'page_fans_by_like_source', 'This is a breakdown of the number of Page likes from the most common places where people can like your Page (see like sources).'),
(NULL, 'page_fans_by_like_source_unique', 'The number of people who liked your Page, broken down by the most common places where people can like your Page (see like sources).'),
(NULL, 'page_fan_removes', 'Unlikes of your Page'),
(NULL, 'page_fan_removes_unique', 'Unlikes of your Page'),
(NULL, 'page_friends_of_fans', 'The number of people who are friends of the Fans of your Page (estimated)'),
(NULL, 'page_tab_views_login_top_unique', 'The number of users logged into Facebook who saw tabs on your Page'),
(NULL, 'page_tab_views_login_top', 'The number of times users logged into Facebook saw tabs on your Page'),
(NULL, 'page_views', 'Page views'),
(NULL, 'page_views_unique', 'Page Views from users logged into Facebook'),
(NULL, 'page_views_login', 'Page Views from users logged into Facebook'),
(NULL, 'page_views_login_unique', 'Page Views from users logged into Facebook'),
(NULL, 'page_views_logout', 'Page views from users not logged into Facebook'),
(NULL, 'page_views_external_referrals', 'Top referrering external domains sending traffic to your Page.'),
(NULL, 'page_posts_impressions', 'The number of impressions that came from all of your posts'),
(NULL, 'page_posts_impressions_unique', 'The number of people who saw any of your Page posts'),
(NULL, 'page_posts_impressions_paid', 'The number of impressions of your Page posts in an Ad or Sponsored Story'),
(NULL, 'page_posts_impressions_paid_unique', 'The number of people who saw your Page posts in an Ad or Sponsored Story'),
(NULL, 'page_posts_impressions_organic', 'The number of impressions of your posts in News Feed or Ticker or on your Page'),
(NULL, 'page_posts_impressions_organic_unique', 'The number of people who saw your Page posts in News Feed or Ticker, or on your Page's Wall'),
(NULL, 'page_posts_impressions_viral', 'The number of times users saw your posts via stories published by their friends'),
(NULL, 'page_posts_impressions_viral_unique', 'The number of people who saw your Page posts via a story from a friend'),
(NULL, 'page_posts_impressions_frequency_distribution', 'The number of people who saw your Page posts, broken down by how many times people saw your posts'),
(NULL, 'post_stories*', 'The number of stories generated about your Page post'),
(NULL, 'post_storytellers*', 'The number of unique people who created a story about your Page post'),
(NULL, 'post_stories_by_action_type*', 'The number of stories created about your Page post, by action type'),
(NULL, 'post_storytellers_by_action_type*', 'The number of unique people who created a story about your Page post, by action type'),
(NULL, 'post_impressions*', 'The number of times your Page post was seen'),
(NULL, 'post_impressions_unique*', 'The number of people who saw your Page post'),
(NULL, 'post_impressions_paid*', 'The number of impressions of your Page post in an Ad or Sponsored Story'),
(NULL, 'post_impressions_paid_unique*', 'The number of people who saw your Page post in an Ad or Sponsored Story'),
(NULL, 'post_impressions_organic*', 'The number of impressions of your post in Newsfeed, Ticker, or on your Page's Wall'),
(NULL, 'post_impressions_organic_unique*', 'The number of people who saw your post in their Newsfeed or Ticker or on your Page's Wall'),
(NULL, 'post_impressions_viral*', 'The number of impressions of your Page post in a story generated by a friend'),
(NULL, 'post_impressions_viral_unique*', 'The number of people who saw your page post in a story from a friend'),
(NULL, 'post_impressions_by_story_type*', 'The number of times this post was seen via a story published by a friend of the person viewing the post'),
(NULL, 'post_impressions_by_story_type_unique*', 'The number of people who saw your page post in a story from a friend, by story type'),
(NULL, 'post_consumptions*', 'The number of times people clicked on anywhere in your posts without generating a story'),
(NULL, 'post_consumptions_unique*', 'The number of people who clicked anywhere in your post without generating a story'),
(NULL, 'post_consumptions_by_type*', 'The number of times people clicked on anywhere in your posts without generating a story, by consumption type'),
(NULL, 'post_consumptions_by_type_unique*', 'The number of people who clicked anywhere in your post without generating a story, by consumption type'),
(NULL, 'post_engaged_users*', 'The number of people who clicked anywhere in your posts'),
(NULL, 'post_negative_feedback*', 'The number of times people took a negative action in your post (e.g. hid it)'),
(NULL, 'post_negative_feedback_unique*', 'The number of people who took a negative action in your post (e.g., hid it)'),
(NULL, 'post_negative_feedback_by_type*', 'The number of times people took a negative action in your post broken down by type'),
(NULL, 'post_negative_feedback_by_type_unique*', 'The number of people who took a negative action in your post broken down by type') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T18:49:24.297

问题是您的文本包含未转义的引号：

```
'...ing your Page, posting to your Page's Wall, ...'
--                                     ^ here 
```

您可以使用另一个引号来逃避它们：

```
'...ing your Page, posting to your Page''s Wall, ...' 
```

或反斜杠：

```
'...ing your Page, posting to your Page\'s Wall, ...' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:51:04.330

问题是您的值中有一个单引号 ' ，它没有被转义。尝试用另一个引号转义你的值中的单引号。例如：`Page's`到`Page''s`

# python - 计算大量序列的成对差异矩阵？

> ID：11385705
> 
> 赞同：1
> 
> 时间：2012-07-08T18:47:06.933
> 
> 标签：python, matrix, sequence, dna-sequence

我想计算一长串序列之间的成对差异的数量，并将其放回矩阵形式。

我有几百个基因序列，每个序列已经对齐并且长度相同（大约 300 个字符）。我不是在寻找一种编辑距离算法（汉明、莱文斯坦等），而是想获得两个序列之间绝对差异的数量。必须在每个字符位置比较序列。

例如，

```
Sequence 1: "GAT-ACA"
Sequence 2: "AT-GCGA"
Number of differences: 6 
```

（破折号允许序列对齐，我的序列也可能包括破折号）。

是否有任何有效的方法可以使用 python（或其他语言）在很短的计算时间内做到这一点？我也在 R 中问过这个问题，最初打算这样做，但结果太慢，无法应用于数百个序列。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:14:44.400

如果要计算显示对之间差异的矩阵，可以这样做：

```
import numpy as np

def get_difference(x,y):
    return sum(ele_x != ele_y for ele_x, ele_y in zip(x,y))

my_list = ['abcde','abcwe','zbfwe']
n = len(my_list)

my_array = np.zeros((n,n))
#
for i, ele_1 in enumerate(my_list):
    for j, ele_2 in enumerate(my_list):
        if j >= i:
            break # Since the matrix is symmetrical we don't need to
                  # calculate everything
        difference = get_difference(ele_1, ele_2)  
        my_array[i, j] = difference
        my_array[j, i] = difference 
```

结果：

```
>>> my_array
array([[ 0.,  1.,  3.],
       [ 1.,  0.,  2.],
       [ 3.,  2.,  0.]]) 
```

生成的矩阵（OK 数组）显示了对之间的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T19:04:43.313

将字符串压缩成元组 - 然后使用 sum 来计算布尔 True（即非匹配点）。

```
s1 = "GAT-ACA"
s2 = "AT-GCGA"

print sum(a != b for (a,b) in zip(s1, s2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:56:48.563

如果我理解得很好，只需：

```
diff = lambda seq1, seq2: sum(seq1[i]!=seq2[i] for i in range(len(seq1))) 
```

# java - 通过 REST 发送包含加密数据的字节数组

> ID：11385706
> 
> 赞同：0
> 
> 时间：2012-07-08T18:47:07.543
> 
> 标签：java, aes, public-key-encryption

我使用以下代码加密一些数据，并且我想将解密代码移动到服务器，因此需要通过 REST 将 cipherData （这是一个 byte [] 数组）发送到我的服务器

```
 BigInteger modulus = new BigInteger("blah");
        BigInteger exponent = new BigInteger("blah");

        RSAPublicKeySpec keySpec = new RSAPublicKeySpec(modulus, exponent);

        KeyFactory encryptfact = KeyFactory.getInstance("RSA");
        PublicKey pubKey = encryptfact.generatePublic(keySpec);

        String dataToEncrypt = "Hello World";

        /**
         * Encrypt data
         */
        Cipher encrypt = Cipher.getInstance("RSA");
        encrypt.init(Cipher.ENCRYPT_MODE, pubKey);
        byte[] cipherData = encrypt.doFinal(dataToEncrypt.getBytes());

        System.out.println("cipherData: " + new String(cipherData));

        /**
         * Decrypt data
         */
        BigInteger privatemodulus = new BigInteger("blah");
        BigInteger privateexponent = new BigInteger("blah");

        RSAPrivateKeySpec privateKeySpec = new RSAPrivateKeySpec(privatemodulus, privateexponent);

        PrivateKey privateKey = encryptfact.generatePrivate(privateKeySpec);

        Cipher decrypt = Cipher.getInstance("RSA");
        decrypt.init(Cipher.DECRYPT_MODE, privateKey);
        byte[] decData = decrypt.doFinal(cipherData);

        System.out.println(new String(decData)); 
```

这工作正常。

我希望我可以使用 cipherData 作为参数创建一个新字符串

当我用上面的例子尝试这个时，我收到以下错误

```
byte[] decData = decrypt.doFinal(new String(cipherData).getBytes());

javax.crypto.BadPaddingException: Data must start with zero
at sun.security.rsa.RSAPadding.unpadV15(RSAPadding.java:308)
at sun.security.rsa.RSAPadding.unpad(RSAPadding.java:255)
at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at com.test.EncryptTest.main(EncryptTest.java:52) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:51:11.117

> 我希望我可以使用 cipherData 作为参数创建一个新字符串

No.`cipherData`是任意二进制数据。它*不是*编码文本，这是各种 String 构造函数所期望的。（顺便说一句，您几乎*不*应该调用未指定编码的`String.getBytes()`or `new String(byte[])`。始终指定适当的编码，这取决于具体情况。）

要么将数据*作为*二进制数据而不是通过文本传输，要么先使用[Base64](http://en.wikipedia.org/wiki/Base64)将二进制数据安全地编码为文本，然后在解密之前再次将其从 Base64 解码为二进制。有一个易于使用的[公共领域 Base64 编码器。](http://iharder.net/base64)

# c# - 根据秒表值设置定时器间隔

> ID：11385714
> 
> 赞同：-4
> 
> 时间：2012-07-08T18:48:02.653
> 
> 标签：c#, timer, intervals

我希望根据秒表值设置我的计时器间隔。秒表计算函数的执行时间，这个执行时间应该用于我的计时器间隔。

```
Timer t = new Timer(timercallbackfunc, null, 0, elapsedtime); 
```

请提供一些代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:50:18.637

你的意思是这样的吗？

```
Stopwatch stopwatch = new Stopwatch();
stopwatch.Start();
...
Timer t = new Timer(timercallbackfunc, null, 0, stopwatch.ElapsedMilliseconds); 
```

# haskell - Haskell 类型的同义词

> ID：11385715
> 
> 赞同：5
> 
> 时间：2012-07-08T18:48:09.073
> 
> 标签：haskell, yesod

我试图了解 Yesod 的以下类型同义词在做什么。

`type HtmlUrlI18n msg url = Translate msg -> Render url -> Html`

我找不到一个例子来学习一些 haskell 或与`->`present 同义的类型的 haskell wikibook。非常感谢任何链接或解释。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:58:02.800

它只是（长记下来）函数类型的同义词。例如，以下应该是有效的 Haskell

```
--Example of a function type synonym
type StrFn = String -> String

foo :: StrFn
foo s = s ++ "!"

--Example of a function type synonym with type parameters
type Fn a = a -> a

bar :: Fn String
bar s = s ++ "?" 
```

# mysql - MySQL Date Var 在 if 条件后发生变化

> ID：11385717
> 
> 赞同：1
> 
> 时间：2012-07-08T18:48:28.370
> 
> 标签：mysql, variables

```
SELECT DATEDEBUT, DATEFIN INTO DebutReserv2, FinReserv2 FROM RESERVATION WHERE IDCODEBARRES = v_codebarre ORDER BY DATEDEBUT LIMIT 0, 1;
        RETURN(Concat(DebutReserv2, ",", FinReserv2));
        If ((DebutReserv2 <= curdate()) and (FinReserv2 >= curdate())) THEN
            RETURN(Concat(DebutReserv2, ",", FinReserv2)); 
```

这里有点问题。在第一次返回中，DebutReserv2 和 FinReserv2 有一个由第一个选择分配给它们的值，但是一旦我通过第一个 if，两个变量的值就会改变（而且我们在同一个循环中）。此代码也在游标中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:19:53.890

`IF`由于第一条`RETURN`语句，执行永远不会到达。

# python - Python在整数列表中找到重复序列？

> ID：11385718
> 
> 赞同：6
> 
> 时间：2012-07-08T18:48:31.033
> 
> 标签：python, list, sequence

我有一个列表列表，每个列表都有一个重复序列。我正在尝试计算列表中重复整数序列的长度：

```
list_a = [111,0,3,1,111,0,3,1,111,0,3,1] 

list_b = [67,4,67,4,67,4,67,4,2,9,0]

list_c = [1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,23,18,10] 
```

哪个会返回：

```
list_a count = 4 (for [111,0,3,1])

list_b count = 2 (for [67,4])

list_c count = 10 (for [1,2,3,4,5,6,7,8,9,0]) 
```

欢迎任何建议或提示。我现在正在尝试使用 re.compile 来解决它，但是它并不完全正确。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T18:58:25.700

通过在序列长度的 2 到一半之间进行迭代来猜测序列长度。如果没有发现模式，则默认返回 1。

```
def guess_seq_len(seq):
    guess = 1
    max_len = len(seq) / 2
    for x in range(2, max_len):
        if seq[0:x] == seq[x:2*x] :
            return x

    return guess

list_a = [111,0,3,1,111,0,3,1,111,0,3,1] 
list_b = [67,4,67,4,67,4,67,4,2,9,0]
list_c = [1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,23,18,10]

print guess_seq_len(list_a)
print guess_seq_len(list_b)
print guess_seq_len(list_c)
print guess_seq_len(range(500))   # test of no repetition 
```

这给出了（如预期的那样）：

```
4
2
10
1 
```

根据要求，此替代方案给出了最长的重复序列。因此它将为 list_b 返回 4。唯一的变化`guess = x`是`return x`

```
def guess_seq_len(seq):
    guess = 1
    max_len = len(seq) / 2
    for x in range(2, max_len):
        if seq[0:x] == seq[x:2*x] :
            guess = x

    return guess 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-11T13:21:08.893

我采用了[Maria](https://stackoverflow.com/users/655183/maria-zverina)更快、更符合 stackoverflow 的答案，并使其首先找到最大的序列：

```
def guess_seq_len(seq, verbose=False):
    seq_len = 1
    initial_item = seq[0]
    butfirst_items = seq[1:]
    if initial_item in butfirst_items:
        first_match_idx = butfirst_items.index(initial_item)
        if verbose:
            print(f'"{initial_item}" was found at index 0 and index {first_match_idx}')
        max_seq_len = min(len(seq) - first_match_idx, first_match_idx)
        for seq_len in range(max_seq_len, 0, -1):
            if seq[:seq_len] == seq[first_match_idx:first_match_idx+seq_len]:
                if verbose:
                    print(f'A sequence length of {seq_len} was found at index {first_match_idx}')
                break

    return seq_len 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T19:22:22.967

这对我有用。

```
def repeated(L):
    '''Reduce the input list to a list of all repeated integers in the list.'''
    return [item for item in list(set(L)) if L.count(item) > 1]

def print_result(L, name):
    '''Print the output for one list.'''
    output = repeated(L)
    print '%s count = %i (for %s)' % (name, len(output), output)

list_a = [111, 0, 3, 1, 111, 0, 3, 1, 111, 0, 3, 1]
list_b = [67, 4, 67, 4, 67, 4, 67, 4, 2, 9, 0]
list_c = [
    1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2,
    3, 4, 5, 6, 7, 8, 9, 0, 23, 18, 10
]

print_result(list_a, 'list_a')
print_result(list_b, 'list_b')
print_result(list_c, 'list_c') 
```

Python 的`set()`函数会将列表转换为集合，这是一种只能包含任何给定值之一的数据类型，很像代数中的集合。我将输入列表转换为一个集合，然后再转换回一个列表，将列表缩减为只有它的唯一值。然后，我测试了这些值中的每一个的原始列表，看它是否多次包含该值。我返回了所有重复项的列表。其余代码仅用于演示目的，以表明它有效。

编辑：语法突出显示不喜欢我的文档字符串中的撇号。

# c#-4.0 - 使用 DataContractJsonSerializer 序列化对象

> ID：11385720
> 
> 赞同：-2
> 
> 时间：2012-07-08T18:48:51.173
> 
> 标签：c#-4.0, json.net, datacontract, datacontractjsonserializer

我有一个包含一些项目的类。我想使用 DataContractJsonSerializer 将此类的一个实例序列化为 json：

```
[DataContract]
public class Policy
{
    private string expiration { get; set; }
    private List<List<string>> conditions { get; set; }
    public Policy(){}
    public Policy(string expiration, List<List<string>> conditions){
        this.expiration = expiration;
        this.conditions = conditions;
    }
    [DataMember]
    public string DateExpiration
    {
        get{ return expiration;}
        set{expiration = value;}
    }
    [DataMember]
    public List<List<string>> Conditions
    {
        get{return conditions;}
        set{conditions = value;}
    }
} 
```

当序列化为 json 时，它应该是这样的：

```
{
    "expiration": "2011-04-20T11:54:21.032Z",
    "conditions": [
    ["eq", "acl", "private"],
    ["eq", "bucket": "myas3bucket"],
    ["eq", "$key", "myfilename.jpg"],
    ["content-length-range", 0, 20971520],
    ["eq", "$redirect", "myredirecturl"],
  ]
} 
```

我试过这样但没有：

```
 string expiration = "2012-12-01T12:00:00.000Z";            
        List<List<string>> conditions = new List<List<string>>()
        {
            new List<string>(){ "[ eq", "acl", "private ]" }, 
            new List<string>(){ "[ eq", "bucket", "myas3bucket]" },
            new List<string>(){ "[ eq", "$key", "myfilename.jpg ]" },
            new List<string>(){ "[ content-length-range", "0", "20971520]" },
            new List<string>(){ "[ eq", "$redirect", "myredirecturl]" }
        };

        Policy myPolicy = new Policy(expiration,conditions);
        string policy = JSONHelper.Serialize<Policy>(myPolicy); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:02:05.233

首先...你的班级需要一点帮助：

```
[DataContract] 
public class Policy 
{ 
    public Policy(){} 
    public Policy(string expiration, List<List<string>> conditions){ 
        this.DateExpiration = expiration; 
        this.Conditions = conditions; 
    } 
    [DataMember] 
    public string DateExpiration { get; set; } 

    [DataMember] 
    public List<List<string>> Conditions { get; set; }

} 
```

尝试删除列表中的括号：

```
 string expiration = "2012-12-01T12:00:00.000Z";             
    List<List<string>> conditions = new List<List<string>>() 
    { 
        new List<string>(){ "eq", "acl", "private" },  
        new List<string>(){ "eq", "bucket", "myas3bucket" }, 
        new List<string>(){ "eq", "$key", "myfilename.jpg" }, 
        new List<string>(){ "content-length-range", "0", "20971520" }, 
        new List<string>(){ "eq", "$redirect", "myredirecturl" } 
    }; 

    Policy myPolicy = new Policy(expiration,conditions); 
    string policy = JSONHelper.Serialize<Policy>(myPolicy); 
```

# git - git push：“错误：将对象添加到存储库数据库./objects 的权限不足”

> ID：11385730
> 
> 赞同：1
> 
> 时间：2012-07-08T18:49:57.023
> 
> 标签：git

是的，我知道，这件事以前就在这里，我已经看到了问题。git push 给了我这个：

> 错误：将对象添加到存储库数据库的权限不足 ./objects

我只有一个问题：这个错误是关于本地还是服务器端存储库数据库？

为什么我是开发人员中唯一遇到此错误的人？

（我问这个问题是因为我的服务器人不想相信我这是一个服务器端问题）

* * *

好的，这是长版本：

两个用户已将代表拉入他们的工作区。

1.  用户 2 推动了一些变化。
2.  用户 1 更改某些内容，提交，然后将用户 2 的更改拉到合并。
3.  用户 1 尝试推送，但得到以下信息：

    git.exe push --progress "origin" dev:dev

    计数对象：18，完成。压缩对象：100% (10/10) 写入对象：100% (10/10) 写入对象：100% (10/10)，870 字节，完成。总计 10（增量 6），重用 0（增量 0）错误：将对象添加到存储库数据库的权限不足 ./objects

    致命：写入对象失败错误：解包失败：解包对象异常退出到git@XXX：twf！[remote denied] dev -> dev (n/a (unpacker error)) 错误：未能将一些引用推送到 'git@XXX:twf'

    git 没有完全退出（退出代码 1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:56:27.817

也许我没有得到你的问题，但是......你是对的，当然，这里有几个问题是完全相同的。让我们检查[一下](https://stackoverflow.com/questions/1918524/error-pushing-to-github-insufficient-permission-for-adding-an-object-to-reposi)，例如：

> 通常这个问题是由你的**git 服务器文件系统**上的错误用户和组权限引起的。

更新：无论如何，检查谁应该受到指责实际上很容易 - 您的本地环境或服务器的环境。让其他开发人员（*但不是用户 2*！）进行与您所做的完全相同的更新（更新您所做的相同文件；考虑到您的报告，这不会太难），然后尝试`git push`从他/她那里进行这些更新机器。

# matlab - 在另一列中添加具有特定条件的一列，例如 excel 的 sumifs

> ID：11385732
> 
> 赞同：0
> 
> 时间：2012-07-08T18:50:17.187
> 
> 标签：matlab, sum, addition, sumifs

我有一个这样的矩阵

```
A=[ 1 2; 2 3; 3 4; 4 5; 5 6; 6 8; 7 9; 8 5; 9 4] 
```

现在我想添加第二列，条件是如果limit=0、interval=3和limit=limit+interval，或者换句话说，当第1列的值范围为0到3时，我必须对第2列求和, 3 到 6, 6 到 9 和 9 到 12，我想要第 2 列对应值的总和。

我的解决方案是这样的

```
range- sum
0 to 3 9
3 to 6 19
6 to 9 18 
```

像这样我有一个大约 7000x2 的矩阵。也可以只给出序列号来代替范围。

这只是一个例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T19:00:20.653

这是[ACCUMARRAY](http://www.mathworks.com/help/techdoc/ref/accumarray.html)的工作。首先，您构造一个应该添加在一起的值的索引数组，然后调用`accumarray`：

```
%# create test data
A=[ 1 2; 2 3; 3 4; 4 5; 5 6; 6 8; 7 9; 8 5; 9 4];

%# create indices from first column
%# if you have indices already, you can use them directly
%#   or you can convert them to consecutive indices via grp2idx
groupIdx = ceil(A(:,1)/3); %# 0+ to 3 is group 1, 3+ to 6 is group 2, etc

%# sum
result = accumarray(groupIdx,A(:,2),[],@sum)

result =
     9
    19
    18 
```

**编辑**

如果您需要计算范围内的条目，它仍然是一项工作`accumarray`，只是您不会累积到总和，而是累积到直方图。

```
%# use test data, groupIdx from above
A=[ 1 2; 2 3; 3 4; 4 5; 5 6; 6 8; 7 9; 8 5; 9 4];
groupIdx = ceil(A(:,1)/3); %# 0+ to 3 is group 1, 3+ to 6 is group 2, etc

%# find values to count
values2count = unique(A(:,2));

%# count the values
countsPerRange = accumarray(groupIdx,A(:,2),[],@(x){hist(x,values2count)})

%# inspect the counts for range #1
 [values2count,countsPerRange{1}']

ans =

     2     1
     3     1
     4     1
     5     0
     6     0
     8     0
     9     0 
```

# python - Sourceforge 导出 XML 或 HTML

> ID：11385738
> 
> 赞同：1
> 
> 时间：2012-07-08T18:50:33.577
> 
> 标签：python, sourceforge, screen-scraping, export-to-xml

我一直在尝试提取和抓取有关为 joda-time 软件提交的错误的信息。但是，我没有找到使用自动脚本或其他工具将此信息导出到文件的好方法。我确实在网上找到了一些 python 脚本，但它们主要是关于将 sourceforge 票证转换为 git 或过时的。

对此问题的任何帮助将不胜感激。

谢谢， 希瓦尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:25:23.070

[您可以使用BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)编写抓取脚本。您可以通过使用 BeautifulSoup 编写一些 Python 代码，从 joda-time 软件的每个 bug 票页的 HTML 中提取必要的信息。这并不难，然后您可以使用提取的信息来做您想要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:26:30.140

对不起，我无法理解你的问题。如果您的问题是如何将文件提取为 HTML 并另存为 HTML

您可以使用**urllib**：[http ://docs.python.org/library/urllib.html](http://docs.python.org/library/urllib.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:03:01.183

如果您是项目管理员，您可以选择[导出到 xml](http://sourceforge.net/apps/trac/sourceforge/wiki/XML%20export)。

您还可能会发现[将 sourceforge 票证迁移到 GitHub 问题](https://stackoverflow.com/questions/4627241/migrate-sourceforge-tickets-to-github-issues)很有用。

# c++ - 创建没有用户输入的动态对象

> ID：11385740
> 
> 赞同：0
> 
> 时间：2012-07-08T18:50:43.093
> 
> 标签：c++, object, pointers, dynamic

我有一个程序可以在整个程序中创建随机数量的点。在它运行时，我还想为每个点创建一个对象并将其存储在一个向量中。我创建了一个具有各种属性的 Point 类，但我不知道如何实现上述内容。在查看处理类似但不相同的问题的其他问题时，使用了指针，但同样，我不知道如何实现它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:59:39.533

我不太确定你真正想要实现什么，但我希望这会对你有所帮助。

要动态创建对象，请使用`new`运算符。`new`运算符总是返回一个指针：

```
Point* pointObj = new Point(); 
```

如果您指定了构造函数，则调用与堆栈上的正常构造非常相似：

```
Point* pointObj = new Point(x,y); 
```

[std::vector](http://www.cplusplus.com/reference/stl/vector/)在运行时存储对象（动态地在堆中），但不是由它自己创建它们，而是简单地复制它们：

```
std::vector<Point> vec; //if this object is destructed it contents are destructed aswell

Point pointObj(x,y); //point on stack; will get destructed if it gets out of scope
vec.push_back(pointObj) //copy pointObj to a dynamic location on the heap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:55:36.323

好吧，我不知道您的 Point 构造函数采用什么参数，但您的描述听起来好像您想做这样的事情：

```
std::vector<Point> MyGlobalPointList; 
```

在你的程序中，你有一些：

```
MyGlobalPointList.push_back(Point(x,y,color)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T19:47:59.133

您是否在这里寻找与对象创建相关的自动对象管理？如果是这样，AbstractFactory 可以在这里为您提供帮助。除了工厂是构造对象（点）*的*机制而不是自己到处这样做之外，它还可以执行对象管理，例如在向量中管理它们。

```
class Point {
  friend class PointFactory;
  Point(int _x, int _y) : x(_x), y(_y) { }
  private:
    ~Point();    //destructor is private
    int x, y;
}

class PointFactory {
  public:
    Point* createPoint() {    //Creates random point
      return createPoint(rand(), rand());
    }
    Point* createPoint(int x, int y) {    //Creates specified point
      Point* p = new Point(x, y);
      points.push_back(p);
      return p;
    }
    void deletePoint(Point *p) {    //p not in use anymore
      std::vector<Point*>::iterator it = std::find(objects.begin(), objects.end(), p);
      if (it != objects.end()) {
        objects.erase(it);
      }
      delete p;
    }
  private:
    std::vector<Point*> objects;
}

int main(...) {
  Point *p = pointFactory.createPoint();    //instead of new Point()
  //use p
  pointFactory.deletePoint(p);    //p not in use anymore
  return 0;
} 
```

希望这是您正在寻找的。

*   安库尔卫星

# iphone - UIImagePickerController overlayView 和 showsCameraControls 问题

> ID：11385757
> 
> 赞同：4
> 
> 时间：2012-07-08T18:54:31.287
> 
> 标签：iphone, ios5, camera, uiimagepickercontroller, camera-overlay

我正在尝试在 上使用自定义叠加层，`UIImagePickerController`并且还能够移动和缩放生成的图像。问题是当我设置时`showsCameraControls=YES`，覆盖不会显示，但我可以使用移动和缩放功能。但是，当`showsCameraControls=NO`出现覆盖时，但是当我拍照时，我什至没有裁剪图像的选项。从 xib 加载的实际视图只是一个`UIToolbar`带有两个按钮的，其中一个用于拍照

我有一个控制器（`OverlayViewController`），它从 xib 文件加载覆盖，因为它是视图。此控制器也有一个`UIImagePickerController`，因此它将 的覆盖设置`UIImagePickerController`为 的视图`OverlayController`。第一个方法在不同的控制器中调用以设置并显示它。总之，我需要能够看到`overlayView`并使用它的按钮来拍照，然后我可以移动和缩放

```
-(void) openCameraForImage
{

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        self.overlayViewController =
        [[OverlayViewController alloc] initWithNibName:@"OverlayViewController" bundle:nil];

        // as a delegate we will be notified when pictures are taken and when to dismiss the image picker
        self.overlayViewController.delegate = self;

        [self.overlayViewController setupImagePicker:UIImagePickerControllerSourceTypeCamera];
        [self presentModalViewController:self.overlayViewController.imagePickerController animated:YES];
    }
    else {
        [Common ShowAlert:@"Alert" andMessage:@"There is no camera on this device"];
    }

} 
```

此方法用于`OverlayViewController`设置 Overlay。

```
- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType
{
self.imagePickerController.sourceType = sourceType;
[self.imagePickerController setAllowsEditing:YES];

if (sourceType == UIImagePickerControllerSourceTypeCamera)
{
    // user wants to use the camera interface
    //
    self.imagePickerController.showsCameraControls = NO; //This line allows overlay to show but move and scale doesn't work
    self.imagePickerController.allowsEditing = YES;
    //[self.view setUserInteractionEnabled:NO];

    if ([[self.imagePickerController.cameraOverlayView subviews] count] == 0)
    {
        // setup our custom overlay view for the camera
        //
        // ensure that our custom view's frame fits within the parent frame
        CGRect overlayViewFrame = self.imagePickerController.cameraOverlayView.frame;
        CGRect newFrame = CGRectMake(0.0,
                                     CGRectGetHeight(overlayViewFrame) -
                                     self.view.frame.size.height - 10.0,
                                     CGRectGetWidth(overlayViewFrame),
                                     self.view.frame.size.height + 10.0);
        self.view.frame = newFrame;
        self.imagePickerController.cameraOverlayView = self.view;
        }
    }
} 
```

这个方法在`OverlayViewConroller`拍照

```
- (IBAction)takePhoto:(id)sender
{
    [self.imagePickerController takePicture];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T17:43:27.113

我认为您可以将图像选择器代码放入 openCameraForImage

在您的 OverlayViewController 中，只需使用它来纯粹显示您的相机的 Overlay。

```
@implementation RiskCameraOverlayViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [self.view setBackgroundColor:[UIColor blackColor]];

    opUpImage = [UIImage imageNamed:@"camera_overlay_op_up"];
    opDownImage = [UIImage imageNamed:@"camera_overlay_op_down"];

    opUpFrameBegin = CGRectMake(0, -50, 320, 358);
    opUpImageView = [[UIImageView alloc] initWithFrame:opUpFrameBegin];
    [opUpImageView setImage:opUpImage];

    opDownFrameBegin = CGRectMake(0, 265, 320, 314);
    opDownImageView = [[UIImageView alloc] initWithFrame:opDownFrameBegin];
    [opDownImageView setImage:opDownImage];

    [self.view addSubview:opUpImageView];
    [self.view addSubview:opDownImageView];

} 
```

您可能会遇到“使用照片”或“重拍”不起作用的问题，请执行

```
[self.view removeFromSuperview]; 
```

# objective-c - 故事板视图控制器之间的翻转转换不起作用

> ID：11385761
> 
> 赞同：1
> 
> 时间：2012-07-08T18:54:54.417
> 
> 标签：objective-c, ios

我在设置故事板之间的翻转过渡时遇到了很多麻烦。调用以下方法时应用程序崩溃。我收到错误消息：

`[NSPathStore2 setView:]: unrecognized selector sent to instance...`

这是我的代码：

```
- (void)advanceToNextViewController {

    humptyDumptyViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"firstStoryVC"];
     /*
    [self.navigationController pushViewController:controller animated:YES];
    */
    [UIView beginAnimations:@"animation" context:nil];
    [self.navigationController pushViewController:controller animated:NO]; 
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO]; 
    [UIView commitAnimations];

} 
```

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:21:28.720

由于您使用的是故事板。这更准确，试试这个：

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"firstStoryVC"];
vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:vc animated:YES completion:NULL]; 
```

但请务必将您的视图命名为`identifier`“ **firstStoryVC** ”，否则它会崩溃并且无法工作。

然后当你想关闭视图时：

```
[self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T11:33:10.433

试试这个，它会让你完全控制时间和动画。

```
humptyDumptyViewController *controller = [self.storyboardinstantiateViewControllerWithIdentifier:@"firstStoryVC"];
[UIView  beginAnimations:nil context:NULL];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.75];
[self.navigationController pushViewController:controller animated:NO];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO];
[UIView commitAnimations]; 
```

# java - 没有同步的 volatile 的使用

> ID：11385763
> 
> 赞同：11
> 
> 时间：2012-07-08T18:55:08.120
> 
> 标签：java, volatile

知道

> 对于声明为 volatile 的所有变量，读写都是[原子的](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)

**问题1：**这是否可以理解为

```
private volatile int x = 0; 
```

`x++;`操作是原子的？

然后

> 将变量标记为 volatile 并不能消除同步原子操作的所有需要​​，因为[仍然可能出现内存一致性错误。](http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html)

**问题2：**我想知道在什么情况下（如果有的话）可以看到标记的变量`volatile`，而看不到标记为同步的块的任何方法（试图访问/修改变量）？

换句话说，是否应该标记所有需要防止并发修改的变量`volatile`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T19:06:13.503

volatile 只为您提供额外的可见性保证、longs/doubles 的原子写入/读取（否则 JLS 不保证，是的）和一些内存顺序保证。**没有**同步（虽然可以从 volatile 开始构建同步块 - [Dekker 的算法](http://en.wikipedia.org/wiki/Dekker%27s_algorithm)）所以不，它对您没有帮助`x++`- 这仍然是读取，inc 和写入，并且需要某种形式的同步。

volatile 的一个例子是著名的双重检查锁定，我们在大多数情况下避免同步，因为我们只需要顺序保证：

```
private volatile Helper helper = null;
public Helper getHelper() {
    if (helper == null) {
        synchronized(this) {
            if (helper == null) {
                helper = new Helper();
            }
        }
    }
    return helper;
} 
```

一个绝对不涉及同步的示例是一个简单的退出标志，这里它不是关于订购保证，而只是关于保证可见性

```
public volatile boolean exit = false;
public void run() {
   while (!exit) doStuff();
   // exit when exit set to true
} 
```

如果另一个线程设置`exit = true`了另一个执行 while 循环的线程，则可以保证看到更新 - 没有 volatile 它可能不会。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-08T19:05:22.023

> x++; 操作是原子的？

不，这减少到`x = x + 1`。读取`x`是原子的，写入`x`是原子的，但`x = x + 1`整体不是原子的。

> 我想知道在什么情况下（如果有的话）可以看到标记为 volatile 的变量，而看不到标记为同步的块的任何方法（尝试访问/修改变量）？

好吧，有各种不使用的并发方法`synchronized`。Java 中有各种各样的其他锁定实用程序，并且仍然需要诸如`volatile`:之类的无锁算法`ConcurrentLinkedQueue`是一个具体的例子，尽管它广泛使用了“神奇的”`compareAndSet`原子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T12:16:00.883

作为可以说明先前答案的快速可测试示例，这始终产生最终计数 8：

```
import java.util.concurrent.atomic.AtomicInteger;

public class ThreadTest_synchronize {

public static void main(String[] args) {

    ThreadTest_synchronize tt = new ThreadTest_synchronize ();
    try {
        tt.go();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

}

private void go() throws InterruptedException{

    MyRunnable t = new MyRunnable();
    Thread myThread_1 = new Thread( t, "t1");
    Thread myThread_2 = new Thread( t, "t2");
    myThread_1.start();
    myThread_2.start();
    myThread_1.join();
    myThread_2.join();
    System.out.println("Processing count="+t.getCount());       

}

private class MyRunnable implements Runnable{

    private AtomicInteger count=new AtomicInteger(0);

    @Override
    public  void run() {
        for(int i=1; i< 5; i++){
            doSomething(i);
            count.getAndAdd(1);
        }           
    }

    public AtomicInteger getCount() {
        return this.count;
    }

    private void doSomething(int i) {
        try {
            Thread.sleep(i*300);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}       

} 
```

虽然这通常不会：

```
public class ThreadTest_volatile {

public static void main(String[] args) {

    ThreadTest_volatile tt = new ThreadTest_volatile ();
    try {
        tt.go();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

}

private void go() throws InterruptedException{

    MyRunnable t = new MyRunnable();
    Thread myThread_1 = new Thread( t, "t1");
    Thread myThread_2 = new Thread( t, "t2");
    myThread_1.start();
    myThread_2.start();
    myThread_1.join();
    myThread_2.join();
    System.out.println("Processing count="+t.getCount());       

}

private class MyRunnable implements Runnable{

    private volatile int count = 0;

    @Override
    public  void run() {
        for(int i=1; i< 5; i++){
            doSomething(i);
            count++;
        }

    }

    private  int add(int count){
        return ++count;
    }

    public int getCount(){
        return count;
    }

    private void doSomething(int i) {

        try {
            Thread.sleep(i*300);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

} 
```

# google-app-engine - GWT Restlet 参数始终为空

> ID：11385764
> 
> 赞同：2
> 
> 时间：2012-07-08T18:55:11.950
> 
> 标签：google-app-engine, gwt, restlet

我对 REST 和 RESTlet 都是全新的——昨晚我把所有东西都搞定并进行了交流，但今天早上我发现我传递给服务器的所有东西总是变成空的。

就像一个示例应用程序一样，我有以下内容 - 一个 User Objectify 实体（id、emailAddress 和版本）和一个 RESTUserProxy 对象（id、emailAddress） - 我最初不确定我是否可以将 Objectify Entities 传回并且在不存在之后能够看到任何东西将它切换到代理对象 - 如果我能让它以这种方式工作，我会尝试将它切换回来

前端如下：

```
public interface RESTUserResourceProxy extends ClientProxy {

  @Get
  public void find(String emailAddress, Result<RESTUserProxy> callback);

  @Put
  public void persist(RESTUserProxy user, Result<Void> callback);

  @Delete
  public void delete(RESTUserProxy user, Result<Void> callback);
} 
```

后端代码如下（这目前非常难看 - 我只是想看看一些东西并放入大量的系统输出而有点沮丧）

```
public class RESTUserServerResource extends ServerResource implements RESTUserResource {

  private final UserDao userDao;

  public RESTUserServerResource() {
    System.out.println("CREATED USER RESOURCE IMPL");
    userDao = new UserDao();
  }

  @Override
  @Get
  public RESTUserProxy find() {
    System.out.println("reference = " + getReference());
    Form queryParams = getReference().getQueryAsForm();
    System.out.println("query params = " + queryParams);
    System.out.println("query = " + getQuery());
    System.out.println("query string = " + getQuery().getQueryString());
    String searchQuery = (String) getRequest().getAttributes().get("searchQuery");
    System.out.println("search query = " + searchQuery) ;
    return null;
//    if (emailAddress == null) {
//      return null;
//    }
//    System.out.println("user resource impl find [" + emailAddress + "]");
//    final User user = userDao.find(emailAddress.getText());
//    if (user != null) {
//      System.out.println("found user ");
//      return new RESTUserProxy(user.getId(), user.getEmailAddress());
//    } else {
//      System.out.println("found absolutely nothing");
//      return null;
//    }
  }

  @Override
  @Put
  public void persist(RESTUserProxy userProxy) {
    System.out.println("user proxy = " + userProxy);
    if (userProxy == null) {
      return;
    }
    final User user = userDao.find(userProxy.getId());
    user.setEmailAddress(userProxy.getEmailAddress());
    user.setId(userProxy.getId());
    userDao.persist(user);
  }

  @Override
  @Delete
  public void delete(RESTUserProxy userProxy) {
    final User user = userDao.find(userProxy.getId());
    userDao.delete(user);
  }
} 
```

我遇到的问题是 eerythings 以 null 的形式出现-这里的许多其他答案都说要获取查询以获取参数-但这里的查询为 null

下面是调用 find 和 persist 的输出

```
reference = http://127.0.0.1:8888/users/123
query params = []
query = []
query string = 
search query = null 
```

我确定我在这里做一些愚蠢的事情我只是不知道如何进行。任何关于我做错了什么的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:55:41.897

这是由于 GAE 不支持分块编码。请参阅此处的解决方法： [http ://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/318-restlet/303-restlet.html#dsy303-restlet_gwt](http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/318-restlet/303-restlet.html#dsy303-restlet_gwt)

# java - 使用单独的线程更新 JTable

> ID：11385765
> 
> 赞同：4
> 
> 时间：2012-07-08T18:55:27.880
> 
> 标签：java, multithreading, swing, jtable, runnable

该应用程序的目的是查询表，获取该信息并更新 JTable。现在 ThreadTask() 能够查询表并获取信息。我的问题是如何使用从数据库获得的信息更新 JTable GUI 对象？

```
 public class AdminManager extends JFrame {

        public static void main(String[] args) throws InterruptedException {
            EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                    try {
                        AdminManager frame = new AdminManager();
                        frame.setVisible(true);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                }
            });

            // Setup connection pool

            ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
            exec.scheduleAtFixedRate(new ThreadTask(connection), 2000, 100, TimeUnit.MILLISECONDS);
    }
        /**
         * Create the frame.
         */
        public AdminManager() {
            // Setup GUI

            DefaultTableModel model = new DefaultTableModel();
            model.addColumn("#");

            tableQueue = new JTable(model);
            tableQueue.getColumnModel().getColumn(0).setPreferredWidth(3);
            scrollPane.setViewportView(tableQueue);

        }
    class updateTable extends SwingWorker<Void, String> {
        @Override
        protected Void doInBackground() throws Exception {
            model.addRow(new Object[]{order_num});
            return null;
        }

    }
}
class grabData implements Runnable {
    private Connection connection;
    private DefaultTableModel model;
    private String order_num;

    public grabData(Connection c, DefaultTableModel m) {
         connection = c;
         model = m;
    }

    @Override
    public void run() {
       System.out.println("Working ... ");
       String sql = "SELECT * FROM order_queue;";
       Statement st;
       try {
           st = connection.createStatement();
           ResultSet rs = st.executeQuery(sql);
            while(rs.next()) {
                order_num = rs.getString("order_num");
                System.out.println(order_num);
                updateTable.execute()
            }
       } catch (SQLException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       }   
   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T18:58:06.990

如果要将行添加到由可视化 JTable 保存的 TableModel 对象，则必须在 Swing 事件线程（EDT）上执行此操作。如果您正在创建一个未可视化的全新 TableModel，那么我认为从 EDT 中填充它是安全的，然后将其设置为EDT*上*的 JTable 模型。

一个考虑因素是，如果您想在 JTable 可用时添加行，请考虑使用 a `SwingWorker<Void, RowObject>`，然后通过`while (rs.next()) {`发布/处理方法对传递在 中获得的 RowObject。

**编辑：**
您可以跳过 SwingWorker 并在 EDT 上排队添加表的行：

```
while(rs.next()) {
    final String order_num = rs.getString("order_num");
    // System.out.println(order_num);
    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        model.addRow(new Object[]{order_num});
      }      
    });
} 
```

# facebook - 游戏状态直播但页面共享被禁止？

> ID：11385767
> 
> 赞同：0
> 
> 时间：2012-07-08T18:55:38.753
> 
> 标签：facebook, live, status

我已经在 Facebook（鸵鸟岛）上提交了游戏，应用中心页面显示：“应用详情页面状态：直播您的应用详情页面现已上线，将出现在搜索中。”

但是，我什至无法将游戏链接发送给我的朋友。当她收到它时，消息说链接已被删除。我尝试了不同的链接：

[http://www.facebook.com/apps/application.php?id=477037362322781](http://www.facebook.com/apps/application.php?id=477037362322781) http://www.facebook.com/appcenter/ostrichisland

[http://apps.facebook.com/ostrichisland](http://apps.facebook.com/ostrichisland)

所有这些都对我有用，但对其他人无效。游戏社区页面也只为我显示玩游戏按钮。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:06:03.237

[在https://graph.facebook.com/477037362322781](https://graph.facebook.com/477037362322781)访问时，您的应用 ID 返回“false”

我几乎可以肯定，假设您没有删除该应用程序，它处于沙盒模式

检查设置的“高级”选项卡，第 3 项：

![高级设置页面的一部分](../Images/bf326340d06145a5b9d4368b77f05ff9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:59:45.490

这个问题被许多 Facebook 用户正式投诉，现在[Facebook 游戏状态](http://ifacebookstatus.com/category/games-facebook-status)在我身边运行良好。

# facebook - Facebook PageTab 问题

> ID：11385768
> 
> 赞同：0
> 
> 时间：2012-07-08T18:55:40.297
> 
> 标签：facebook, facebook-graph-api

我会直接说...首先我无法在添加页面选项卡后触发事件

```
 var url=window.location + '?recheck=true';
    var obj = {
       method: 'pagetab',
       redirect_uri: url
    };
    FB.ui(obj); 
```

不知道如果重定向甚至不起作用，我为什么还要费心指定redirect_url。

很简单...我试过了

```
FB.ui(obj, function(result){
    alert(result);// nothing happens
}); 
```

* * *

还有第二个问题。添加页面选项卡时，它只允许 facebook 用户将页面选项卡添加到他们管理的页面，但不能添加到他们的默认个人资料页面。有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:59:18.860

1.  你为什么不自己做重定向？

2.  没有。页面选项卡仅适用于粉丝页面，不适用于用户个人资料。

# android - 即使按照互联网上的每一步操作，Android R 也不会生成

> ID：11385769
> 
> 赞同：0
> 
> 时间：2012-07-08T18:55:55.770
> 
> 标签：android, r.java-file

android R 已经困扰了我很长一段时间了。我在我的很多项目中都看到过，有时它们会消失，有时我不得不重新创建一个项目，等等。但这并不能解决我当前项目的任何问题。

从逻辑上讲，我怀疑 XML 文件包含错误，但我找不到它。

我使用 Eclipse 作为我的开发环境，这是我的`main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imgLogo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:contentDescription="@string/title"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/title"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/btnNewTime"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/overview" />

    <Button
        android:id="@+id/btnOverview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/overview" />

    <Button
        android:id="@+id/btnValues"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/values" />

    <Button
        android:id="@+id/btnExit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/exit" />

</LinearLayout> 
```

这是我的`strings.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">Werkregistratie</string>
    <string name="title">Werkregistratie</string>
    <string name="overview">Overzicht</string>
    <string name="values">Salaris/reiskosten aanpassen</string>
    <string name="exit">Afsluiten</string>
</resources> 
```

我无法找到问题，所以我真的希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T03:12:00.543

好的，这似乎只是 eclipse 中的一个错误，相当多的答案是部分正确的。确保名称有效（在某些情况下您可以使用 Lint）。确保 xmls 有效。然后检查您的构建路径是否有错误。之后做一个项目清理，一切都应该没问题。

此外，这个问题在新的 android sdk 中并没有出现太多，所以他们修复了一些看起来像的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:16:47.930

如果你的包名是“com.example.test”

然后尝试这样的事情-

findViewById(com.example.test.R.id.textview1);

不像这样-

findViewById(R.id.textview1);

(* 仅在未生成 R 文件时使用)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T19:18:33.140

我尝试了你的 xml 并且它对我来说很好，希望你的 java 类代码可能有一些问题。尝试找出您内部的问题并确保清理项目。一切顺利 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T19:19:33.027

如果你的包名是`com.foo.bar.package`，那么你需要`import`这样：

```
import com.foo.bar.package.R; 
```

然后`findViewById`应该使用这个符号工作：

```
Button btnValue = (Button)findViewById(R.id.btnValue); 
```

有时，当涉及到“资源丢失”时，Eclipse 可能会非常令人讨厌，因为无法找到`R`未生成的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T21:09:21.683

我今天从工作区导入应用程序 src 时遇到了这个问题。使用 R 的所有代码行都显示错误。

我在某处读到我应该从属性/android 视图中将tagetSDK 设置为4.0。清单中的 minsdk 版本为 8。

它就像魅力一样。

还有一件事可能是任何 res 文件/布局/drawable 的名称都带有大写字母的问题。有时 Thumbs.db 在可绘制文件夹中生成并导致相同的问题。

谢谢！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T21:14:12.773

我想我以前遇到过这个问题，我可以解决它的唯一方法是重新尝试一个新项目并导入我的代码。我知道效率低下且笨拙，但这就是我在令人沮丧的几个小时后设法生成 R 文件的方法。

如果你不能在[这里找到可以帮助你的东西](https://stackoverflow.com/questions/4085959/no-generated-r-java-file-in-my-project "这里")

# java - 我怎样才能让程序打印一个句子中的单词数？

> ID：11385770
> 
> 赞同：-4
> 
> 时间：2012-07-08T18:55:56.653
> 
> 标签：java

我已经可以数元音、辅音、空格和特殊字符了。我必须使用一些初学者技术来做到这一点。[编辑：鉴于最后一条语句和以下代码，这个问题听起来像是对家庭作业的帮助] 没什么太复杂的。

```
import java.util.Scanner;

 public class JBlahBlah
 {
static Scanner sc = new Scanner(System.in                                                      );

public static void main(String[] Theory)
{

    JWaffles MyWaffles = new JWaffles();

    MyWaffles.ProgramHeading();

    System.out.println("Enter a string:"                                                       );
    String SentenceContents = sc.nextLine(                                                     );

    int VowelCount = 0,ConsonantCount = 0,WordCount = 0,SpaceCount = 0,SpecialCharCount = 0     ;

    for (int Bat = 0; Bat < SentenceContents.length(); Bat++)
    {
        char Vowels = SentenceContents.charAt(Bat         );
        if (      (Vowels == 'A') || (Vowels == 'a'       )
               || (Vowels == 'E') || (Vowels == 'e'       )
               || (Vowels == 'I') || (Vowels == 'i'       )
               || (Vowels == 'O') || (Vowels == 'o'       )
               || (Vowels == 'U') || (Vowels == 'u'      ))
        VowelCount++;

        char Consonants = SentenceContents.charAt(Bat);
        if (      (Consonants == 'B') || (Consonants == 'b')
               || (Consonants == 'C') || (Consonants == 'c')
               || (Consonants == 'D') || (Consonants == 'd')
               || (Consonants == 'F') || (Consonants == 'f')
               || (Consonants == 'G') || (Consonants == 'g')
               || (Consonants == 'H') || (Consonants == 'h')
               || (Consonants == 'J') || (Consonants == 'j')
               || (Consonants == 'K') || (Consonants == 'k')
               || (Consonants == 'L') || (Consonants == 'l')
               || (Consonants == 'M') || (Consonants == 'm')
               || (Consonants == 'N') || (Consonants == 'n')
               || (Consonants == 'P') || (Consonants == 'p')
               || (Consonants == 'Q') || (Consonants == 'q')
               || (Consonants == 'R') || (Consonants == 'r')
               || (Consonants == 'S') || (Consonants == 's')
               || (Consonants == 'T') || (Consonants == 't')
               || (Consonants == 'V') || (Consonants == 'v')
               || (Consonants == 'W') || (Consonants == 'w')
               || (Consonants == 'X') || (Consonants == 'x')
               || (Consonants == 'Y') || (Consonants == 'y')
               || (Consonants == 'Z') || (Consonants == 'z') )

        ConsonantCount++;

        char Spaces = SentenceContents.charAt(Bat);
                    if ( (Spaces == ' ') )

        SpaceCount++;

        char SpecialCharacters = SentenceContents.charAt(Bat);
                    if (      (SpecialCharacters == '!') || (SpecialCharacters == '@'   )
                           || (SpecialCharacters == '#') || (SpecialCharacters == '$'   )
                           || (SpecialCharacters == '%') || (SpecialCharacters == '^'   )
                           || (SpecialCharacters == '&') || (SpecialCharacters == '*'   )
                           || (SpecialCharacters == '(') || (SpecialCharacters == ')'   )
                           || (SpecialCharacters == '-') || (SpecialCharacters == '_'   )
                           || (SpecialCharacters == '+') || (SpecialCharacters == '='   )
                           || (SpecialCharacters == ',') || (SpecialCharacters == '<'   )
                           || (SpecialCharacters == '.') || (SpecialCharacters == '>'   )
                           || (SpecialCharacters == '?') || (SpecialCharacters == '/'   )
                           || (SpecialCharacters == '"') || (SpecialCharacters == ';'   )
                           || (SpecialCharacters == ':') || (SpecialCharacters == '{'   )
                           || (SpecialCharacters == '[') || (SpecialCharacters == '}'   )
                           || (SpecialCharacters == ']') || (SpecialCharacters == '~'   )
                           || (SpecialCharacters == '`') || ((SpecialCharacters == '1'  )
                           || (SpecialCharacters == '2') || (SpecialCharacters == '3'   )
                           || (SpecialCharacters == '4') || (SpecialCharacters == '5'   )
                           || (SpecialCharacters == '6') || (SpecialCharacters == '7'   )
                           || (SpecialCharacters == '8') || (SpecialCharacters == '9'   )
                           || (SpecialCharacters == '|')                               ))

        SpecialCharCount++;
    }
    System.out.println("There are " + VowelCount + " vowels in this sentance"                  );
    System.out.println("There are " + ConsonantCount + " consonants in this sentance"          );
    System.out.println("There are " + SpaceCount + " spaces in this sentance"                  );
    System.out.println("There are " + SpecialCharCount + " special characters in this sentance");

}
} 
```

我怎样才能让程序打印字数？如果它们在单词之间有几个空格怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:07:23.033

以下是使用 API 计算每种字符类型的方法：

```
int spaceCount = sentence.length() - sentence.replaceAll(" ", "").length();
int vowelCount = sentence.length() - sentence.replaceAll("(?i)[aeiou]", "").length();
int consonantCount = sentence.length() - sentence.replaceAll("(?i)(?=[a-z])[^aeiou]", "").length();
int specialCount = sentence.length() - sentence.replaceAll("(?i)[^a-z ]", "").length();
int wordCount = sentence.trim().split("\\s+").length; 
```

尽管您可能认为这不是“教您如何编程”，但实际上是：学习语言的一部分是通过让语言为您完成繁重的工作来学习*不编码的内容。*

如果你不熟悉正则表达式，你可能想访问这个[网站](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:58:48.813

使用**java.text.BreakIterator**包中的 BreakIterator 类

使用 BreakIterator 您可以在句子中找到单词的数量...

```
import java.text.BreakIterator;

BreakIterator boundary = BreakIterator.getWordInstance(); 
```

BreakIterator 能够做更多的事情......**比如查找字符、行、句子等的数量......**

**有关详细信息，请参阅此链接：**

[http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html](http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T18:58:57.990

> 如果它们在单词之间有几个空格怎么办？

使用它来用一个空格替换两个或多个空格，然后继续你的算法

```
String stringOnlyOneSpace = stringTwoOrMoreSpaces.trim().replaceAll(" +", " "); 
```

# php - 如何使用 PHP Simple HTML DOM Parser 提取标题和元描述？

> ID：11385774
> 
> 赞同：10
> 
> 时间：2012-07-08T18:56:20.607
> 
> 标签：php, html, parsing, dom, simpledom

如何使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)`title`提取页面和元数据？`description`

我只需要页面的标题和纯文本的关键字。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-18T17:32:43.200

```
$html = new simple_html_dom();
$html->load_file('some_url'); 

//To get Meta Title
$meta_title = $html->find("meta[name='title']", 0)->content;

//To get Meta Description
$meta_description = $html->find("meta[name='description']", 0)->content;

//To get Meta Keywords
$meta_keywords = $html->find("meta[name='keywords']", 0)->content; 
```

注意：元标记的**名称区分大小写！**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-08T20:47:49.263

我只是看了一下 HTML DOM Parser，试试：

```
$html = new simple_html_dom();
$html->load_file('xxx'); //put url or filename in place of xxx
$title = $html->find('title');
echo $title->plaintext;

$descr = $html->find('meta[description]');
echo $descr->plaintext; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-05T02:59:50.350

```
$html = new simple_html_dom();
$html->load_file('http://www.google.com'); 
$title = $html->find('title',0)->innertext; 
```

`$html->find('title')`将返回一个数组

所以你应该使用`$html->find('title',0)`，meta[描述]

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-29T08:10:47.117

取自上面 LeiXC 的解决方案，您需要使用简单的 html dom 类：

```
$dom = new simple_html_dom();
$dom->load_file( 'websiteurl.com' );// put your own url in here for testing
$html = str_get_html($dom);
$descr = $html->find("meta[name=description]", 0);
$description = $descr->content;
echo $description; 
```

我已经测试过这段代码，是的，它区分大小写（一些元标记使用大写 D 进行描述）

以下是拼写错误的一些错误检查：

```
if( is_object( $html->find("meta[name=description]", 0)) ){
    echo $html->find("meta[name=description]", 0)->content;
} elseif( is_object( $html->find("meta[name=Description]", 0)) ){
    echo $html->find("meta[name=Description]", 0)->content;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-22T22:45:54.633

```
$html->find('meta[name=keywords]',0)->attr['content'];
$html->find('meta[name=description]',0)->attr['content']; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-24T15:13:30.603

```
$html = new simple_html_dom();
$html->load_file('xxx'); 
//put url or filename in place of xxx
$title = array_shift($html->find('title'))->innertext;
echo $title;
$descr = array_shift($html->find("meta[name='description']"))->content;
echo $descr; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-12T02:27:19.730

你可以使用 php 代码，很容易知道。像这儿

$result = 'site.com'; $tags = get_meta_tags("html/".$result);

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-01T16:12:22.803

正确答案是：

```
$html = str_get_html($html);
$descr = $html->find("meta[name=description]", 0);
$description = $descr->content; 
```

上面的代码把html变成对象格式，然后find方法寻找一个名字为description的meta标签，最后需要返回meta标签内容的值，而不是别人说的innertext或者plaintext。

这已经过测试并在实时代码中使用。最好的

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-28T16:32:24.633

我找到了进行描述的简单方法

```
$html = new simple_html_dom(); 
$html->load_file('your_url');
$title = $html->load('title')->simpletext; //<title>**Text from here**</title>
$description = $html->load("meta[name='description']", 0)->simpletext; //<meta name="description" content="**Text from here**"> 
```

如果您的行包含额外的空格，那么试试这个

```
$title = trim($title);
$description = trim($description); 
```

# python - 一种在 Linux 上通过 Python 控制 Google 地球的方法

> ID：11385778
> 
> 赞同：3
> 
> 时间：2012-07-08T18:56:35.053
> 
> 标签：python, linux, google-earth

我已经下载了一个 python 脚本，它使用`win32com`模块（[项目站点](http://sourceforge.net/projects/pywin32/)）在 Windows 上启动和控制 Google Earth 应用程序。脚本中的命令还可用于从命令行交互式控制 Google 地球。

代码在[这里](http://docs.google.com/View?docid=dgqhgsgm_933rjw93)。它有效，令人兴奋，但是......

我想在 LINUX（Ubuntu 衍生产品）上做同样的事情。

问题是：此脚本使用 COM 接口通过进程间通信将命令传递给 GoogleEarth。在 linux 上，有`googleearth-bin`可执行文件而不是 .exe，我不知道在 Linux 上使用相同的进程间通信思想会或应该如何。

由于该程序很可能从（大部分）相同的源代码编译到不同的操作系统，所以在我看来，该功能可能在那里。现在关于如何从 Python 脚本访问它，这超出了我目前的知识范围。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:21:44.867

Google 地球 COM Api 已被贬低（请参阅[http://googlegeodevelopers.blogspot.co.uk/2010/08/sunset-for-google-earth-com-api.html](http://googlegeodevelopers.blogspot.co.uk/2010/08/sunset-for-google-earth-com-api.html)），因此编写代码来对付它会很困难-work 并且不能保证您的代码将来会正常工作。

Google 建议人们使用 Google Earth 的插件版本，但不幸的是，迄今为止，Linux 操作系统不支持此功能，因此在这种情况下您不可以选择。

无论如何，除了警告，你可以看看像 pygoogleearth 这样的东西

[http://pypi.python.org/pypi/pygoogleearth/](http://pypi.python.org/pypi/pygoogleearth/)

这是一个围绕 Google 地球 COM 接口的 pythonic 包装器，它应该允许您在 python 中使用 COM api，或者至少为您提供一些有关设置的指示。

# android - Android 模拟器无法在 Windows 8 测试版中运行

> ID：11385782
> 
> 赞同：1
> 
> 时间：2012-07-08T18:56:54.913
> 
> 标签：android, android-emulator

Android 模拟器无法在 Windows 8 beta 中运行。它在 Windows 7 上运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:01:57.533

Android SDK 目前不支持 Windows 8。请参阅[系统要求](http://developer.android.com/sdk/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:32:18.470

I can verify that it is working fine for me.

The emulators settings are: Target = Android 4.0 - API Level 14 CPU/ABI = ARM (armeabi-v7a)

Try not loading from snapshot, and if it doesn't work first time, try again (this is a very frequent issue)

# r - R auto.arima 包版本 3.22 在solve.default(res$hessian * n.used) 中出错

> ID：11385783
> 
> 赞同：1
> 
> 时间：2012-07-08T18:56:56.893
> 
> 标签：r, forecasting

我正在使用这样的 auto.arima() ：

```
F12.Xreg <- fourier(NEW.JMB,12)
F4.Xreg<- fourier(NEW.JMB,4)
fb<-cbind(F12.Xreg, F4.Xreg)
fit <-auto.arima(NEW.JMB, D=0, max.P=0, max.Q=0, xreg=fb) 
```

我不知道如何避免错误：

```
Error in solve.default(res$hessian * n.used) : 
 system is computationally singular: reciprocal condition number = 6.64873e-30
Error in if (diffs == 1 & constant) { : argument is of length zero
In addition: Warning message:
In auto.arima(NEW.JMB, D = 0, max.P = 0, max.Q = 0, xreg = fb) :
  Unable to calculate AIC offset 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:55:51.847

这两个傅立叶矩阵具有相同的列，因此设计矩阵不是满秩的。您可以通过一次调用来创建傅立叶项`fourier()`。

# windows-runtime - Windows Store 应用的 LongListSelector

> ID：11385784
> 
> 赞同：3
> 
> 时间：2012-07-08T18:57:00.547
> 
> 标签：windows-runtime, windows-store-apps, winjs

有谁知道是否可以自定义通过 WinJS 公开的任何 WinRT 控件以提供与[Windows Phone LongListSelector](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)相同的外观和感觉？

![在此处输入图像描述](../Images/e80371c448ae412c173b3e9eec686d73.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-24T05:23:18.657

WinJS [ListView](https://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)是适合您的控件。就我所见，分组就是你所需要的。

去[WinJS Playground](http://try.buildwinjs.com/playground/)看看`Grouped ListLayout`

# xml - java.lang.NoSuchMethodError: org.json.XML.toJSONObject

> ID：11385785
> 
> 赞同：0
> 
> 时间：2012-07-08T18:57:03.197
> 
> 标签：xml, json, org.json

目标：将 XML 解析为 JSON：我已导入 json-org.jar 以将 XML 解析为 JSON。使用简单的java项目很好，但在Android期间它给出了错误：

```
String stringxml="<item><title>Clinton slams Russia, China over Syria</title></item>";
JSONObject xmlJSONObj = XML.toJSONObject(stringxml);
org.json.JSONObject j = org.json.XML.toJSONObject(stringxml);
String json = j.toString(); 
```

我在 DDMS 中遇到错误：java.lang.NoSuchMethodError:org.json.XML.toJSONObject at org.json.XML.toJSONObject(XML.java:282)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:27:49.343

尝试这样的事情

```
JSONObject jsonObject = null;           
        FileInputStream is = new FileInputStream("XXX.xml");

        StringBuffer buffer = new StringBuffer();
        InputStreamReader isr = new InputStreamReader(is, "UTF8");
        Reader in = new BufferedReader(isr);
        int ch;
        while ((ch = in.read()) > -1) {
             buffer.append((char)ch);
        }
        in.close();

        String xml = buffer.toString();

        //System.out.println("xml = " + xml);

        jsonObject = XML.toJSONObject(xml); 
```

# c - C中的分段错误

> ID：11385786
> 
> 赞同：0
> 
> 时间：2012-07-08T18:57:29.453
> 
> 标签：c, pointers, segmentation-fault

我有以下 C 程序。当我包含以下行时它会起作用，否则会出现分段错误：

```
printf("head(%p), last(%p), newnode(%p)\n", head, last, newnode); 
```

知道这里有什么问题吗？

这是我的整个程序。这是一个基本的循环队列示例。

```
#include "stdio.h"
#include "malloc.h"

struct node {
    int data;
   struct node *next;
};

typedef struct node NODE;

void display(NODE *);

int main(void) {

    NODE *head, *last, *newnode = NULL;
    int i = 5;

    for ( ; i > 0; i--) {
        newnode = (NODE *) malloc(sizeof(NODE));
        newnode->data = i*10;
        newnode->next = NULL;

        //printf("head(%p), last(%p), newnode(%p)\n", head, last, newnode);

        if (head == NULL) {
            head = newnode;
            last = newnode;
        } else {
           last->next = newnode;
           last = newnode;
        }

        last->next = head;
    }

    display(head);

    return 1;
}

void display(NODE *head) {

    NODE *temp = NULL;
    temp = head;

    printf("Elements --> ");
    do {
            printf("%d ", temp->data);
            temp = temp->next;
    } while (temp != head);

    printf("\n");

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T18:59:29.923

您`head`还需要显式初始化。`last``NULL`

在您的声明中：

```
NODE *head, *last, *newnode = NULL; 
```

**只有** `newnode`被初始化为`NULL`. 因此，稍后在您的 if/else 中，您正在测试/分配给随机内存。

做这样的事情：

```
NODE *head, *last, *newnode;
head = last = newnode = NULL; 
```

您**不能**假设指针会自动初始化为`NULL`，即使在某些系统上*可能是这种情况。*声明为的变量`static`是一个例外。始终将 C 中的变量初始化为合理的值，尤其是指针。

当您访问垃圾内存时，您正在调用[*未定义的行为*](http://en.wikipedia.org/wiki/Undefined_behavior)。当您这样做时，您可能会观察到不一致和令人困惑的结果。在您的情况下，添加`printf` *似乎*可以解决问题。这会影响您的代码行为的原因是依赖于实现，并且 - 一旦您引入了未定义的行为 - 就超出了您的控制范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T19:00:56.900

`last`并且`head`没有被初始化。您可以打开编译器警告来帮助您：

```
$ gcc -O1 -Wall w.c -o we
w.c: In function ‘main’:
w.c:30:23: warning: ‘last’ may be used uninitialized in this function [-Wuninitialized]
w.c:26:12: warning: ‘head’ may be used uninitialized in this function [-Wuninitialized] 
```

（请注意，gcc 需要`-O1`for`-Wuninitialized`工作。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T18:59:51.380

你没有初始化`head`并且`last`，

```
NODE *head, *last, *newnode = NULL; 
```

所以他们有任何垃圾位在他们被分配的地方，`if (head == NULL)`即使`head`没有正确设置也可能失败。也将它们初始化`NULL`。

# opengl - 为 glGetShaderiv 链接什么库？

> ID：11385794
> 
> 赞同：0
> 
> 时间：2012-07-08T18:58:20.613
> 
> 标签：opengl

我正在尝试在 Windows 7 64 上链接 OpenGL 3 程序，但链接器 (gcc 4.7.0) 没有找到 glGetShaderiv 和 glDeleteShader。我必须为此链接哪个库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:35:54.013

Windows 不支持 1.1 版以上的任何核心 OpenGL 函数。您可以像[GLEW](http://glew.sourceforge.net/)这样的库来访问这些方法，就好像它们是核心方法一样。

# ruby - 如何列出目录内容，包括点文件但不包括 . 和 ..？

> ID：11385795
> 
> 赞同：18
> 
> 时间：2012-07-08T18:58:20.627
> 
> 标签：ruby, file, directory, glob, dotfiles

如何`Dir['*']`包含点文件，例如`.gitignore`，但不包含`.`和`..`？

即，有没有更好的方法：

```
`ls -A`.split "\n" 
```

也许与`Dir`？以下解决方案很接近，但都包括`.`& `..`：

```
Dir.glob('*', File::FNM_DOTMATCH)
Dir['{.*,*}'] 
```

因此，以下工作：

```
Dir.glob('*', File::FNM_DOTMATCH) - ['.', '..'] 
```

但是，还有更好的方法来做到这一点吗？

我想知道这是为了修复[Meteor Homebrew Formula](https://gist.github.com/3072321#file_meteor.rb)的第 9 行。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-08T19:01:11.703

你不能 with [`Dir[]`](https://ruby-doc.org/core/Dir.html#method-c-5B-5D)，但你可以 with [`Dir.glob`](https://ruby-doc.org/core/Dir.html#method-c-glob)，它`Dir[]`调用：

```
Dir.glob("*", File::FNM_DOTMATCH) 
```

您可以轻松摆脱`.`& `..`：

```
Dir.glob("*", File::FNM_DOTMATCH).tap { |a| a.shift(2) } 
```

但我认为最好还是坚持原来的方式：

```
Dir.glob("*", File::FNM_DOTMATCH) - %w[. ..] 
```

（除其他方式外）

但是，如果您不需要比 , 更复杂的 glob `*`，[`Dir#children`](https://ruby-doc.org/core/Dir.html#method-c-children)可能就是您所需要的（如果需要更多过滤，可以随时进一步[`filter`](https://ruby-doc.org/core/Array.html#method-i-filter)/结果）：[`grep`](https://ruby-doc.org/core/Enumerable.html#method-i-grep)

```
Dir.children('.') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-03T16:12:00.020

这是一个较短的版本：

```
Dir['{.[^\.]*,*}'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-20T00:38:16.017

以下是我在目录中查找所有文件的方法，包括隐藏文件和删除、、、和`.git/`目录：`.``..`

```
 files = Dir.glob("#{ARGV.first}/**/*", File::FNM_DOTMATCH)
      files = files.grep_v(/\/.git\//).grep_v(/\/\.$/).grep_v(/\/\.\.$/)
      files = files.select { |file| File.file?(file) } 
```

# iphone - 适当的链接说 iOS 中 App 的内存限制

> ID：11385799
> 
> 赞同：0
> 
> 时间：2012-07-08T18:58:41.543
> 
> 标签：iphone, xcode, ipad, memory, instruments

我正在为 iPad 开发一个应用程序，它在 iPad 的 RAM 上最大消耗 5.5 MB。我已经多次确保所有这些东西`Instruments`。只要应用程序使用更多内存，它就会引发内存警告并且应用程序开始表现异常。

1.  我已经实现了在确实接收内存警告中释放内存的代码行。
2.  我还确保`NO LEAKS`在整个应用程序中做到这一点。
3.  我开始知道 App 至少需要 6 mb 内存。

这是应用程序的一般流程。

登录`->`1st-list View `->`2nd-list view `->`3rd-list view `->`4th-Map & listview `->`5.Map&List

每个屏幕的简要说明。

1.  登录 - 带有用户名-pswd 的简单屏幕，进行网络服务调用和验证用户
2.  根据身份验证的结果，它将获取更多数据并在第一个列表视图屏幕上列出。
3.  根据从第一个列表中的选择，应用程序将在第二个列表视图中加载列表
4.  根据从第二个列表中的选择，应用程序将在第三个列表视图中加载列表
5.  根据从 3rd-list 中的选择，应用程序将加载列表，地图将相对具有引脚。
6.  基于来自地图的注释，应用程序将导航到另一个地图和不同的图钉。

在这里，应用程序在第 6 个屏幕上收到内存警告。我确保了所有编码标准和所有对象的所有重要性。

在上述情况下，所有屏幕都是非常必要的，我使用的是导航控制器，只是一一推送视图控制器。没有重复 - 确保两次。

现在，重点是，正在使用 iOS 4.1 在 iPad-1 上测试应用程序，并且在开始测试应用程序之前强制关闭所有应用程序。虽然，应用程序收到警告 @ 仅 5.5 mb 的使用量。

我试图说服我的项目经理，这个内存使用量很高，他们在问我 - 应该有一些选项来设置 MEMORY。这种高图形游戏和应用程序如何流畅运行？我无法从 Apple 那里找到合适的文件说 LIMIT。我没有答案。

如果无法设置内存限制，我要求您提供适当的证明链接，以便我可以将其展示给我的项目经理。如果这种设置是可能的，我非常渴望知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:12:45.987

[第一代 iPad 共有 256 MB 内存](http://en.wikipedia.org/wiki/List_of_iOS_devices#iPad)。当然，其中一些将由操作系统本身使用。

假设至少 64 MB 可用于您的应用程序是非常保守的。所以 6 MB 对我来说听起来很小。您的应用程序正在执行某些操作会导致分配更多内存。

绝对没有一些“我是游戏让我使用更多内存选项”。所有应用程序都可以使用尽可能多的内存（尽管尽量减少内存使用量始终是一个好习惯）。如果内存不足，则通知应用程序，如果内存耗尽，则终止前台应用程序。

如果您的应用程序被终止，请[检查崩溃日志](http://developer.apple.com/library/ios/technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-UNDERSTANDING_LOW_MEMORY_REPORTS)以查看它使用了多少内存。我的猜测是你会发现你使用的比你想象的要多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:20:58.537

我怀疑您是否会从 Apple 文档中找到有关 iOS 下应用程序内存限制的任何积极声明。

但是如果你谷歌“ios app 可用内存”你会发现很多信息；例如，这个[SO 线程](https://stackoverflow.com/questions/4167720/memory-used-by-any-iphone-app)。

以我的经验，我的应用程序可以维持大约 20MB 的“峰值”内存使用量（取决于设备状态），但是内存使用量必须迅速低于 10MB 阈值才能使应用程序不被杀死（我会说 6 -8MB 是更精确的数字）。有时，一个应用程序可能会因为无法足够快地“撤消”峰值而被终止。

可能对您的经理有用的一条信息是 Instruments 中“内存监视器”工具的输出，特别是“空闲物理内存”。如果您使用它，您将始终看到当“可用物理内存”低于给定限制（根据 Instruments 输出），接近零剩余内存时，您的应用程序将被终止。

现在，达到这个限制是因为您分配了一些内存（由分配或泄漏工具报告）还是因为其他因素（加载到内存中的框架？iOS 内核中的某些东西或仪器未跟踪的东西？）您不能知道。但是可以肯定的是，您可以了解设备中的可用物理内存如何随着您的应用程序的使用而随时间变化。

希望这可以帮助。

# xcode - 按双值而不是字符串值排序

> ID：11385801
> 
> 赞同：0
> 
> 时间：2012-07-08T18:58:52.930
> 
> 标签：xcode, ios5

我目前正在从 'cachedDist' 列设置为双精度的 sql 数据库中提取信息。但是，当我将它拉入我的应用程序并创建我的数组时，我将它变成一个字符串，并且排序显然会关闭，18.15 将在 2.15 之前出现。如何在我的代码中解决这个问题，以便它将距离排序为 Double 而不是 String？

在 Bar 对象中。

```
NSString *cachedDist
@property(nonatomic,copy) NSString *cachedDist; 
```

* * *

```
@synthesize cachedDist; 
```

* * *

我在视图控制器中的 while 循环。

```
while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
            Bar * bar = [[Bar alloc] init];
            bar.barName = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
            bar.barAddress = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
            bar.barCity = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 3)];
            bar.barState = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 4)];
            bar.barZip = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 5)];
            bar.barLat = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 8)];
            bar.barLong = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 9)];

            if (currentLoc == nil) {
                NSLog(@"current location is nil %@", currentLoc);
            }else{

            CLLocation *barLocation = [[CLLocation alloc] initWithLatitude:[bar.barLat doubleValue] longitude:[bar.barLong doubleValue]];
            bar.cachedDist = [NSNumber numberWithDouble:[currentLoc distanceFromLocation: barLocation]/1000];

            [thebars addObject:bar];

            } 
```

我的排序

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"cachedDist"  ascending:YES];
sortedArray = [thebars sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]];

return sortedArray; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:42:04.920

NSString 有一个方法`doubleValue`可以让这变得非常简单：

```
double cachedDistance = [cachedDistanceString doubleValue]; 
```

您可以在自定义比较器中使用它进行排序，或者将属性设置为 NSNumber 或 double 以使排序更容易。（我不确定你是如何排序的......）

# 编辑：

我重新评估了你的代码，现在看起来我们正在从一个双倍到一个字符串再到一个双倍......我们可以切断中间人，可以这么说。

在您的@prototype 部分中，更改@property：

```
// @property(nonatomic,copy) NSString *cachedDist; // old way
@property(nonatomic) double cachedDist; 
```

然后像这样分配它：

```
bar.cachedDistance = [currentLoc distanceFromLocation: barLocation]/1000; 
```

并从远处删除创建字符串的行（实际上只是一个双精度）。

或者，如果你想更加面向对象，你可以（应该？）使用 NSNumber 对象：

```
@property(nonatomic,copy) NSNumber *cachedDist;
...
bar.cachedDistance = [NSNumber numberWithDouble:[currentLoc distanceFromLocation: barLocation]/1000]; 
```

# emacs - 在 emacs 24 中的文件加载时有条件地执行命令

> ID：11385804
> 
> 赞同：1
> 
> 时间：2012-07-08T18:59:16.647
> 
> 标签：emacs, elisp

我正在寻找自动化我的开发，我希望emacs在我加载任何名为“project.clj”的文件时自动执行一些命令

具体来说，我希望它检查打开的缓冲区，如果没有名为“swank”的缓冲区，则执行 clojure-jack-in 命令，就好像它来自“project.clj”缓冲区一样，

然后我希望它也可以运行 shell 和 speedbar，但我想一旦我弄清楚如何执行上述操作，这些都会很容易。

我是一个完整的 elisp 菜鸟，但我对 lisp 很熟悉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T02:04:03.750

你可以这样做：

```
(defun my-project-hook (filename)
  (when (string= (file-name-nondirectory filename) "project.clj")
    (do-stuff)))

(add-hook 'after-load-functions 'my-project-hook) 
```

# symfony - 通过 Doctrine2 中的反面更新多对多关系

> ID：11385808
> 
> 赞同：0
> 
> 时间：2012-07-08T18:59:43.913
> 
> 标签：symfony, doctrine-orm, many-to-many

我的食谱实体：

```
/**
 * @ORM\ManyToMany(targetEntity="Category", inversedBy="recipes")
 */
private $categories; 
```

我的类别实体：

```
/**
 * @ORM\ManyToMany(targetEntity="Recipe", inversedBy="categories")
 * @ORM\JoinTable(name="recipe_category")
 */
private $recipes; 
```

好的，这是来自[http://www.youtube.com/watch?v=kPrgoe3Jrjw&feature=related](http://www.youtube.com/watch?v=kPrgoe3Jrjw&feature=related)。

有了这两个拥有方，一切都很好。但是 cli 给出了错误：'名为 recipe_category 的表已经存在。有谁知道最佳实践如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T16:03:41.563

您必须更新其他实体，例如：

```
class Recipe
{
    public function addCategory($cat)
    {
        $car->addRecipe($this);
        $this->categories->add($cat);

        return $this;
    }

    public function removeCategory($cat)
    {
        $cat->removeRecipe($this);
        $this->categories->removeElement($cat);

        return $this;
    }
} 
```

# javascript - 在JS中遍历零

> ID：11385812
> 
> 赞同：-5
> 
> 时间：2012-07-08T19:00:02.557
> 
> 标签：javascript, for-loop

如何构造一个 for 循环，以便我以 4 为增量从零迭代到 15，从零开始？换句话说，输出应该是0,3,7,11,15

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:02:10.763

除了您期望输出为 (0, 3, 7, 11, 15) 的事实，而这显然不是 4 (0 + 4 != 3) 的增量，您可以使用以下命令：

```
for (var i = 0; i < 16; i+=4) {
    alert(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:02:57.203

好吧，你可以这样做：

```
for( i=0; i<16; i+=i==0?3:4) {
    ...
} 
```

# apache - Apache SetEnvIf 并使用 %{ENV:...}

> ID：11385815
> 
> 赞同：2
> 
> 时间：2012-07-08T19:00:40.530
> 
> 标签：apache, .htaccess, url-rewriting, environment-variables

我的问题与`SetEnvIf`使用环境变量以及如何根据需要正确使用环境变量有关。我将解释我需要做什么，然后我已经拥有什么......

我需要在我的 htaccess 文件中设置 php 应用程序目录，因为一些重写规则使用该目录名称，并且我试图让管理员用户能够更改它。它目前在 php 中设置，并且在 htaccess 文件中手动更改它，然后在 php.ini 文件中再次进行更改。为了实现这一点，我目前有以下内容（就在重写规则中使用 env vars 提出建议）

```
SetEnvIf SERVER_PROTOCOL ".*" APP_DIR=application 
```

它的设置方式是在任何重写规则之前获取 env var 集，就像`SetEnv`在任何重写规则之后处理一样，而`SetEnvIf`在之前处理。

现在我可以访问`APP_DIR`using `%{ENV:APP_DIR}`in rewrite 条件，以及任何 rewrite 规则的第二部分。

我需要实现的比这更复杂一些，因为应用程序目录不存在，而是一个重定向，让 PHP 应用程序知道作为后端而不是前端处理，例如当前重写（没有 env var）是

```
### ADMIN REWRITE
RewriteRule ^application\/?$ index.php?mode=administration&%{QUERY_STRING} [NC,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^application(\/(.*\/?))?$ index.php?page=$1&mode=administration&%{QUERY_STRING} [NC,L]

### FRONTEND REWRITE - Will ignore files and folders
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*\/?)$ index.php?page=$1&%{QUERY_STRING} [L] 
```

因此，正如您可能看到的，我需要能够替代`application`让`APP_DIR`系统管理员更改路径，所以它可以是`cms`或`admin`等等。

可悲的是，以下将不起作用

```
### ADMIN REWRITE
RewriteRule ^%{ENV:APP_DIR}\/?$ index.php?mode=administration&%{QUERY_STRING} [NC,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^%{ENV:APP_DIR}(\/(.*\/?))?$ index.php?page=$1&mode=administration&%{QUERY_STRING}  [NC,L]

### FRONTEND REWRITE - Will ignore files and folders
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*\/?)$ index.php?page=$1&%{QUERY_STRING} [L] 
```

`%{ENV:APP_DIR}`不能在重写的正则表达式中使用，因为正则表达式在任何重写之前被处理，并且 env vars.

有没有人达到我需要的？可以做到吗，即使这意味着要稍微调整重写逻辑？我必须声明，重写后的 php 逻辑无法更改，因为它是一个长期存在的系统，如果它存在向后兼容性问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T05:19:11.630

用于`RewriteCond`匹配`%{REQUEST_URI}`环境变量直到第一个斜杠 ( `/`)，然后`RewriteRule`使用`^[^/]*/`. 如果您不处理子目录，那将起作用；`RewriteRule`否则，您将不得不放弃正则表达式中的明确起点。

# java - JAVA显示图像-GUI

> ID：11385823
> 
> 赞同：1
> 
> 时间：2012-07-08T19:01:46.830
> 
> 标签：java, swing, user-interface

我正在尝试使用 JAVA 制作一个简单的 GUI 没有显示图像

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.swing.*;
import javax.imageio.*;

public class EmiloLadderSnack {
    public JFrame frame=new JFrame("EmiloLadderSnack");
    public Image img;
    public Graphics g;
    public EmiloLadderSnack()
    {
        frame.setBounds(0, 0, Toolkit.getDefaultToolkit().getScreenSize().width, Toolkit.getDefaultToolkit().getScreenSize().height);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        try
        {
            img= ImageIO.read(new File("/media/01CCE00FA6888D80/Achieve/Eclipse/EmiloLadderSnack/src/photo.jpg"));
            g.drawImage(img, 50, 50, null);
        }
        catch(Exception e)
        {
            System.out.println(e.toString());
        }
    }

    public static void main(String args[])
    {
        new EmiloLadderSnack();
    }
} 
```

请帮助我使用 JAVA 在我的简单 GUI 中显示图像我正在使用 Eclipse

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:37:25.440

充满鳗鱼的气垫船是对的，就像他/她通常那样。看起来你真的没有尝试过。

看看教程，但我相信当 Hovercraft Full Of Eels 说正确的方式时，hover 的含义如下。

让我解释一下我在下面做了什么。首先，我创建了一个扩展 JFrame 的新类。JFrame 是假设将所有组件保存在一个窗口中的东西。然后在 JPanel 上绘图，以便您的所有绘图都包含在一个轻量级容器中。由于 StackOverflow，我使用刚刚发现的新布局设置布局，对此我非常感谢。布局称为 MigLayout，它是第三方资源。您必须下载并导入它。**请注意，您不必拥有 MigLayout，但最好使用它，因为它易于使用。**在我将布局约束设置为填充并将 JPanel 停靠在中心后，我创建了一个扩展 JPanel 的新类，以便我可以更改绘制方法。在某种程度上，@Override 允许您为该扩展类重新创建方法。正如您所看到的，一旦绘制到那个图形类，那么您就一切就绪。您应该阅读更多内容。**阅读您帖子下方的评论，他们提出了相当不错的材料。**

任何我弄错的气垫船都会在下面的评论中说。所以也要找那个。

悬停修正：

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class GraphicExample extends JPanel {
   private static final String IMG_FILE_PATH = "/media/01CCE00FA6888D80/" +
        "Achieve/Eclipse/EmiloLadderSnack/src/photo.jpg";
   private BufferedImage img;

   public GraphicExample(BufferedImage img) {
      this.img = img;
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      if (img != null) {
         g.drawImage(img, 0, 0, this);
      }
   }

   @Override
   public Dimension getPreferredSize() {
      if (img != null) {
         return new Dimension(img.getWidth(), img.getHeight());
      }
      return super.getPreferredSize();
   }

   private static void createAndShowGui() {
      try {
         BufferedImage img = ImageIO.read(new File(IMG_FILE_PATH));
         JFrame frame = new JFrame("GraphicExample");
         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         frame.getContentPane().add(new GraphicExample(img));
         frame.pack();
         frame.setLocationRelativeTo(null);
         frame.setVisible(true);

         // the easy way to display an image -- in a JLabel:
         ImageIcon icon = new ImageIcon(img);
         JLabel label = new JLabel(icon);
         JOptionPane.showMessageDialog(frame, label);

      } catch (IOException e) {
         e.printStackTrace();
         System.exit(-1);
      }

   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

我的初步建议：

```
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;

import net.miginfocom.swing.MigLayout;

public class DrawCircle extends JFrame {

    JPanel panel;

    public DrawCircle(String title, int width, int height) {
        this.setTitle(title);
        this.setSize(width, height);
        this.setLocationRelativeTo(null); // Center JFrame
        this.setLayout(new MigLayout("fill"));  // Download external jar
        this.panel = new DrawOval();
        this.add(panel, "dock center");  // Link: http://www.miglayout.com/
        this.setVisible(true);
    }

    public class DrawOval extends JPanel {

            Color color = new Color(1, 1, 1);

        public DrawOval() {

        }

        @Override
        public void paint(Graphics g) {
            g.setColor(color.RED);
            g.fillOval(0, 0, this.getWidth(), this.getHeight());
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:22:30.893

我无法想象*这*是在编译。必须有一个`NullPointerException`。

当你想绘制一些东西时，你通常会继承`JPanel`并在`paintComponent()`方法中进行绘制，如下所示：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(img, 50, 50, null);
} 
```

# spring - 春季下载测试套件

> ID：11385824
> 
> 赞同：0
> 
> 时间：2012-07-08T19:01:47.377
> 
> 标签：spring

我如何下载 Spring 开发人员编写的测试套件。我找到了这个网站[http://git.springsource.org/sandbox/cbeams/trees/5519df3491b0c420f312253348fb93110aea99d3/org.springframework.expression/src/test/java/org/springframework/expression/spel](http://git.springsource.org/sandbox/cbeams/trees/5519df3491b0c420f312253348fb93110aea99d3/org.springframework.expression/src/test/java/org/springframework/expression/spel)但不知道如何将它下载到我的驾驶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:17:12.953

在提供的页面上存在链接“下载为 5519df34 tar.gz”

但最好从 SpringSource github 帐户中查找和下载测试：[https ://github.com/SpringSource/](https://github.com/SpringSource/)

# python - Django - 保留原始方法的工作并添加新的自定义验证

> ID：11385829
> 
> 赞同：3
> 
> 时间：2012-07-08T19:02:09.647
> 
> 标签：python, django

这应该是特定于 Django 的，但无论如何我猜它是 Python。

基本上，我不想在我继承的类（可能是 Model 类）中覆盖原始方法的工作，但我想添加额外的验证。**这可能吗？**有什么提示吗？

```
class MyUserAdminForm(forms.ModelForm):
    class Meta:
        model = User

    def clean(self):
        // do some additional work even though it's cleaned by parent's clean method 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T19:04:50.437

调用[超](http://docs.python.org/library/functions.html#super)类 clean 方法：

```
def clean(self): 
    super(MyUserAdminForm, self).clean()
    # more cleaning 
```

当您对某些东西进行子类化并重新定义功能但想要确保保留超类功能时，这是一个常见的 Python 事情。当您执行 init 方法时非常常见，因为您始终需要确保调用超类构造函数来设置实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:20:49.550

```
class ContactForm(forms.Form):
        message = forms.CharField()
        def clean_message(self):
                num_words = len(message.split())
                if num_words<4:
                        raise forms.ValidationError("Too short a message!")
                return message 
```

这是您在字段上添加验证方法的方式，这确实确保发生默认清理。无需再次调用默认清理方法。

资料来源：www.djangobook.com

这个怎么运作：

当对表单对象调用 is_valid() 时，系统会在类中查找以 clean_ 开头并以属性名称结尾的任何方法。如果有，它会在运行默认清理方法**后运行它们。**

# ios - UINavigationController 为 NULL

> ID：11385836
> 
> 赞同：0
> 
> 时间：2012-07-08T19:02:37.237
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我已经很好地查看了 Apple 文档以及类似的 Stack Overflow 问题，但我不知道为什么我的 navigationController 在使用标签栏时为空。我正在尝试从代码构建大部分应用程序，而不是使用 XIB 来插入导航控制器。

在调试时，我大大简化了我的应用程序，只剩下两个选项卡。一个选项卡包含一个表格视图，当触摸一行时，我期望出现一个详细信息页面（来自 XIB）。应该很简单。尝试推送详细视图时，我发现 self.navigationController 的值为 NULL，当然它不起作用。我完全使用了标签栏，它在单个视图（表格视图）中运行良好。在这种情况下 self.navigationController 有一个值。

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // With Tab Bars

    self.tabBarController = [[UITabBarController alloc] init];

    ViewController *vc1 = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    vc1.tabBarItem.title = @"Words";
    vc1.tabBarItem.image = [UIImage imageNamed:@"tab_feed.png"];

    TextTableViewController *vc2 = [[TextTableViewController alloc] init];
    vc2.tabBarItem.title = @"Text";
    vc2.tabBarItem.image = [UIImage imageNamed:@"tab_live.png"];

    UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:vc1];                             
    NSArray* controllers = [NSArray arrayWithObjects:vc2, navController, nil];
    tabBarController.viewControllers = controllers;
    tabBarController.delegate = self;

    window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    window.rootViewController = self.tabBarController;
    [window makeKeyAndVisible];
    return YES;  
} 
```

**来自 TextTableViewController.m**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    TextViewController *detailViewController = [[TextViewController alloc] initWithNibName:@"TextViewController" bundle:nil];  
    Text *text = [[Text alloc] init];
    text = [textArray objectAtIndex:indexPath.row];

    detailViewController.TextID = text.textID;
    NSLog(@"Nav Controller: %@",self.navigationController);
    [self.navigationController pushViewController:detailViewController animated:YES];
    NSLog(@"pushed"); 
} 
```

我还有两个与此问题相关的问题。(1) 这条线的目的是什么。无论是进还是出，它似乎都没有什么区别，并且在 Apple 示例中不存在。

```
tabBarController.delegate = self; 
```

(2) 当创建一个选项卡数组时，其中一个视图是navigationController。它是哪个选项卡是否重要，或者这应该是一个完全与任何选项卡无关且不可见的不同视图。这是问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:50:30.020

在回答有关标签栏控制器委托的问题 (1) 时，请参阅 UITabBarControllerDelegate 协议参考。对于标签栏控制器的基本功能，您无需为委托而烦恼。

但是，假设您想做一些特别的事情——例如，保存文档或将界面元素重置为默认值——当用户更改选项卡时。您可以使您的一个类，也许是您的应用程序委托或另一个控制器类，符合 UITabBarControllerDelegate 协议并实现 tabBarController:didSelectViewController：

在您的“答案”中，您询问每个选项卡是否需要自己的 UINavigation 控制器。这是绝对正确的。基本上，每个选项卡都是一个完全独立的层次结构，因此您需要在每个需要一个的选项卡中使用单独的 UINavigation 控制器。

这也应该暗示您在原始帖子中的问题（2）的答案。您需要将导航控制器添加到需要它的特定选项卡中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:17:42.270

好的，我找到了。UINavigationController 需要包含在 UITabBarController 的相应选项卡中。因此，通过进行这种编码更改（如下），一个新的 UINavigationController 将嵌入到带有 tableview 的选项卡中。

```
UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:vc2];                             
NSArray* controllers = [NSArray arrayWithObjects:vc1, navController, nil]; 
```

那么这就引出了一个问题：如果您需要多个这样的示例怎么办 - 您是否为每个需要的选项卡创建一个新的 UINavigationController，并将每个选项卡标记为 rootViewController？

# vim - 在 vim 中粘贴文本

> ID：11385838
> 
> 赞同：3
> 
> 时间：2012-07-08T19:02:44.257
> 
> 标签：vim

> **可能重复：**
> [如何将源代码粘贴到 vim 而没有错误格式？](https://stackoverflow.com/questions/9822618/how-to-paste-source-code-to-vim-without-error-format)

在 Vim 中，当我粘贴这样的文本时：

```
第1行
线2
第 3 行

```

它将被转换为：

```
第1行
  线2
    第 3 行

```

这通常发生在我从网上复制文本时。如何按原样粘贴文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:12:41.380

用于`:set paste`启用粘贴模式。然后，您可以随意粘贴，而无需 vim 尝试自动缩进。完成后，请记住使用 禁用粘贴模式`:set nopaste`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:05:16.370

在插入模式下，`C-r C-p *`通常会做你想做的事。您也可以使用该`noinvpaste`选项。

# c# - 在 ProcessStartInfo 中运行 `mklink`

> ID：11385842
> 
> 赞同：7
> 
> 时间：2012-07-08T19:03:15.513
> 
> 标签：c#, process, symlink

我正在开发需要与 Windows 和 Linux (Mono) 兼容的 ac# 程序。

我正在尝试在两个平台上创建一个符号链接，并且我正在使用 ProcessStartInfo 以使其正常工作。我还没有在 Linux 上尝试过，但在 Windows 上我使用以下代码

```
ProcessStartInfo process = new ProcessStartInfo();

                    process.CreateNoWindow = true;
                    process.UseShellExecute = false;
                    process.FileName = "mklink";
                    process.WindowStyle = ProcessWindowStyle.Hidden;
                    process.Arguments = "/D " + webFolder + "MyFolder" + webFolder + "MyFolder_" + version;
                    Process.Start(process); 
```

当我运行上面的代码时，我得到

> System.ComponentModel.Win32Exception：系统找不到指定的文件

如果我在命令提示符下运行 mklink 它工作正常。

我看过谷歌，它说要执行 [DllImport("kernel32.dll")] 但这在 Linux 上不起作用。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-08T19:27:32.053

`mklink`是程序的命令`cmd.exe`，不是独立的程序。

要运行`mklink`，您必须`cmd.exe`使用一组适当的参数实际调用，如下所示：

```
ProcessInfo = new ProcessStartInfo("cmd.exe", "/c mklink " + argumentsForMklink); 
```

# php - 阻止除一个文件以外的所有目录？

> ID：11385849
> 
> 赞同：0
> 
> 时间：2012-07-08T19:04:08.573
> 
> 标签：php, apache

我正在使用 Apache，我在根文件夹中有以下文件夹

```
/images/
/pages/
/storage/ 
```

如何阻止对这些文件夹中的任何文件的访问，同时阻止对上述目录的访问，但只允许访问`index.html`位于根文件夹中的文件？

这是如何在配置文件和`.htaccess`文件中完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:12:09.980

您可以在根文件夹中创建一个**.htaccess**文件，并在其中指定以下内容：

```
<Directory /path/to/diretcory>
    Order deny,allow
    Deny from all
<Directory> 
```

**或者**，为每个包含此内容的目录创建一个文件：

```
<Files *>
    Order deny,allow
    Deny from all
</Files> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T20:31:19.610

这很简单。在根目录中
创建一个包含以下内容的文件：`.htaccess`

```
Order Deny,Allow
Deny from all
<FilesMatch "index.html">
    Order allow,deny
    Allow from all
</FilesMatch> 
```

这将拒绝所有人的访问。但是，如果请求的文件是“index.html”，那么它将允许访问。

# javascript - 如何在代码隐藏中访问 javascript 查询字符串？

> ID：11385850
> 
> 赞同：-1
> 
> 时间：2012-07-08T19:04:17.217
> 
> 标签：javascript, asp.net

我将一个值从 aspx 中的一个页面发送到另一个页面，如下所示。

window.location="test1.aspx?id=1"

如何在代码隐藏或 global.asax 中访问此值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:06:04.020

`Request`您可以从后面代码中的对象中检索 id 参数：

```
protected void Page_Load(object sender, EventArgs e)
{
    string id = Request["id"];
    // do something with the id
} 
```

此外，您必须修复您的 javascript，因为您分配的 url 无效。你有一个额外的`+`字符应该被删除：

```
window.location.href = 'test1.aspx?id=1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:07:03.517

退出`+`登录并使用该`Request.QueryString`对象。

```
window.location="test1.aspx?id=1"

string v = Request.QueryString["id"]; 
```

# vba - 从 VAB 数据输入表单中填充工作表中的数据

> ID：11385866
> 
> 赞同：0
> 
> 时间：2012-07-08T19:06:15.050
> 
> 标签：vba, excel, excel-2007

在 VBA 知识几乎为零的情况下，我创建了一个数据表单来输入每日凭证：

1.  `MS Date and Time Picker`
2.  `TextBox1`for `Amount`（仅针对数值验证 - 工作正常）
3.  `OptionButton1`为了`Cash`
4.  `OptionButton2`为了`Cheque`
5.  `TextBox2`用于人名`Paid To`（也许我可以将其更改为 ComboBox？）
6.  `TextBox3`for `Paid For`（可以输入任何值）
7.  `ComboBox1`对于`Sub Category`（列表在 Worksheet2（列表）中 - 工作正常）
8.  `TextBox4`for `Remarks`（可以输入任何值）
9.  `CommandButton1`将数据添加到 Worksheet3（数据库）
10.  `CommandButton2`显示“数据库”工作表
11.  `CommandButton3`关闭表格（工作正常）

A`CommandButton`也在 Sheet1(Form) 中打开表单（工作正常）。

我想将数据输入表单并将此数据填充到 Worksheet3（数据库），如 `Date`(B3)、`Paid To`(C4)、`Paid For`(D4)、`Sub Category`(E4)、`Remarks`(G4)、`Amount`(H4)。

(F4) 是免费的`VLOOKUP`。

我还希望有一个表单中的数据编辑选项，该选项可能带有带有召回选项的自动生成凭证号。

任何人都可以帮助我使用适当的代码来做到这一点吗？

**注意**：我正在使用 Office 2007 创建，但也想在 XP Professional 中使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:02:06.453

在您问题的第一部分，这取决于您是要在单击按钮时填充 worksheet3 还是在将数据输入表单时动态填充。我假设是前者，因为大多数表单上都有 OK 按钮。如果是这种情况，那么您可以编写一个基于按钮单击的子程序，举一个简单的例子：

```
Private Sub Enter_Details_OK_Click()
  Sheets("worksheet3").Range("B3").Value = Calendar1.Value 
'Change Calendar1 to the value of your date/time object and change "worksheet3" to the actual name of your worksheet.
  Sheets("worksheet3").Range("C4").Value = TextBox2.Value
'...and so on... 
```

您基本上是将每个文本框中的值转移到各个单元格中。我不确定你在问题的第二部分是什么意思，需要进一步澄清。

希望这是有道理的！

# android - 运行程序出错

> ID：11385868
> 
> 赞同：-3
> 
> 时间：2012-07-08T19:06:23.413
> 
> 标签：android, eclipse

当我尝试在 Eclipse 中运行我的程序时，会出现以下错误：

```
[2012-07-08 22:02:05 - Dex Loader] Unable to execute dex: (class: com/android/dx/dex/file/UniformListItem, method: toHuman signature: ()Ljava/lang/String;) Illegal local variable number

[2012-07-08 22:02:05 - CheckApp] Conversion to Dalvik format failed: Unable to execute dex: (class: com/android/dx/dex/file/UniformListItem, method: toHuman signature: ()Ljava/lang/String;) Illegal local variable number 
```

有什么问题，我该怎么办？
感谢所有愿意提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:24:06.407

我发现一个博客条目说将 eclipse.ini 中分配的内存增加到这个：-Xms128m -Xmx512m 或更高的东西，但这对我没有用。

但是，我发现另一个帖子建议执行 Project > Clean 并为我修复了它。我认为它发生在您关闭 Eclipse 而没有先关闭模拟器时。

# xml - 如何在 XML 中包含未解析的外部实体值？

> ID：11385869
> 
> 赞同：5
> 
> 时间：2012-07-08T19:06:32.923
> 
> 标签：xml, include, cdata

我在这个例子中有一个 xml 语法错误：

```
<?xml version="1.0"?>
<!DOCTYPE foo [
    <!ENTITY rules SYSTEM "file://data.txt">
]>
<extract>
    <data>&rules;</data>
</extract> 
```

其中 data.txt 包含：

```
1    <15024
2    >15023 
```

但是我当然有语法错误，因为文本文件（ < > ）中有 wml 特殊字符。那么如何将这些数据包含为未解析的数据呢？

我希望有这样的结果：

```
<?xml version="1.0"?>
<extract>
    <data><![CDATA[1    <15024
2    >15023]]></data>
</extract> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:23:12.473

首先，仅供参考，您指的是外部解析的一般实体，而不是未解析的实体。

尽管您的 data.txt 文件本身不需要格式正确，但包含时必须格式正确。由于 CDATA 部分不解析实体（包括外部实体），因此您必须在外部实体文件本身内进行转义（可能通过服务器端处理文件，然后如果您不能或您可以将其作为外部实体文件引用，或者不希望手动转义）。

如果您可以控制文件内容并希望手动处理转义，也许您可​​以简单地用文件本身内的 CDATA 块包围每个文件的文本，因为包含时应该是格式正确的。（我没有尝试或确认，但它似乎应该可以工作，因为这些实体只需要在包含时格式正确。）

或者，您的另一种选择是转义`<`and`&`字符（您通常不必转义`>`，具有讽刺意味的是，在 CDATA 部分中，以防文本可能包含序列`]]>`- 所以如果您采用 CDATA 方法，您可以需要解决这种可能性）。（由于不能在属性中使用外部实体，因此您无需担心转义`'`or `"`，您也没有提到想要这样做。）

# clang - Clang 后序遍历

> ID：11385872
> 
> 赞同：3
> 
> 时间：2012-07-08T19:07:07.403
> 
> 标签：clang

我想在后序中从 C 程序中遍历 AST。到目前为止，我发现[RecursiveASTVisitor可以按顺序遍历树。](http://clang.llvm.org/doxygen/classclang_1_1RecursiveASTVisitor.html)我想过重写 Traverse* 方法。但是，我认为这对于一个相对常见的任务来说是相当复杂的。有没有更简单的方法或我还没有找到的课程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-05T18:46:21.757

[https://clang.llvm.org/doxygen/classclang_1_1RecursiveASTVisitor.html#details](https://clang.llvm.org/doxygen/classclang_1_1RecursiveASTVisitor.html#details)

> 默认情况下，此访问者预购会遍历 AST。如果需要后序遍历，则需要重写 shouldTraversePostOrder 方法以返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T12:04:21.277

制作通用代码会更复杂，而且可能效率不高。

# c# - 如何使用设备的隔离存储启动 MediaPlayerLauncher

> ID：11385876
> 
> 赞同：0
> 
> 时间：2012-07-08T19:07:56.017
> 
> 标签：c#, windows-phone-7, xaml

我想简单地启动 MediaPlayerLauncher 任务，但我想使用已经在 WP7 设备上的媒体。根据我的研究，似乎要使用此任务，必须首先将媒体打包为资源，或者使用保存在应用程序隔离存储中的媒体。有没有办法只使用手机的隔离存储，以便 MediaPlayerLauncher 任务可以使用默认媒体播放器应用程序中的媒体加载（例如，如果用户从他或她的计算机将音乐放在手机上，则该媒体将被识别并加载进入 MediaPlayerLauncher）。基本上我最终想要完成的是让 WP& 默认媒体播放器像用户单击选项卡时那样加载，尽管如果用户想要选择音乐，则会加载音乐部分而不是默认的 zune 部分。这甚至是完成此任务的正确任务吗？如果不是，是否有办法使用这样的默认电话功能？如果没有，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:19:51.513

文档似乎表明这是完全可能的。

[http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.mediaplayerlauncher(v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.mediaplayerlauncher(v=VS.92).aspx)

属性位置采用允许数据的枚举 - 即在隔离存储中。

创建一个 Uri（相对）设置位置并试一试。

# javascript - Chrome 中的会话详细信息

> ID：11385883
> 
> 赞同：0
> 
> 时间：2012-07-08T19:10:13.577
> 
> 标签：javascript, google-chrome, cookies, google-chrome-extension, session-cookies

如何读取过期、httponly 等 cookie 值？

我知道我可以在 Dev Tools/Resources/Cookies 中找到所有这些信息。我读到了从 JS 访问 cookie 的限制。

我想用 JS 创建 chrome 扩展，它会告诉我在我使用网站期间网站是否违反了我的“默认安全级别”。例如，如果网站在将 http 更改为 https 时更改了会话 ID，是否允许将 cookie 也发送到子域等等。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:03:55.083

根据[http://code.google.com/chrome/extensions/cookies.html#type-Cookie](http://code.google.com/chrome/extensions/cookies.html#type-Cookie) ，这就是你应该如何阅读 cookie ：

```
chrome.cookies.getAll({ url:... /* more options */ }, function(cks){
      console.log(cks); 
      for(var i=0; i<cks.length; i++){
             console.log(cks[i].name, cks[i].secure, cks[i].httpOnly); // ...
      }
}); 
```

`chrome.cookies.getAll`有一个回调参数，它被传递一个充满 cookie 对象的数组。迭代这些对象，您应该能够获得它们的道具、进行比较等。

确保您在清单文件中具有适当的权限，尽管错误应该会引导您完成。

# html - 映射图像的不透明部分

> ID：11385884
> 
> 赞同：1
> 
> 时间：2012-07-08T19:10:20.303
> 
> 标签：html, css, image, png, transparency

我想知道如何仅根据 png 图像的不透明部分自动制作图像映射。您通常可以单击 png 图像上的任何位置，甚至是透明区域，它会注册为单击图像。有没有办法排除透明区域而只注册不透明区域？

我假设有某种 javascript 颜色检测功能，或者类似的东西。我也可以在我的网站上访问 jQuery。

感谢您花时间阅读和回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:37:56.723

试图用图像来做到这一点将是一个令人头疼的问题。可能有一个 javascript 库可以检测颜色，但这是非常复杂的东西。

如果图形很简单，也许可以试试 svg。

这个[网站](http://www.petercollingridge.co.uk/data-visualisation/interactive-svg-map)（不是我的）有一张使用 svg 的漂亮地图。

# python - Python 对象转换的模式（编码、解码、反序列化、序列化）

> ID：11385889
> 
> 赞同：9
> 
> 时间：2012-07-08T19:10:57.913
> 
> 标签：python, serialization, encoding, deserialization, construct

我一直在使用解析模块[构造](http://construct.wikispaces.com/)，并且发现自己非常喜欢它的数据结构的声明性。对于那些不熟悉它的人，您可以编写 Python 代码，这些代码基本上看起来像您在实例化时通过嵌套对象尝试解析的内容。

## 例子：

```
ethernet = Struct("ethernet_header",
   Bytes("destination", 6),
   Bytes("source", 6),
   Enum(UBInt16("type"),
       IPv4 = 0x0800,
       ARP = 0x0806,
       RARP = 0x8035,
       X25 = 0x0805,
       IPX = 0x8137,
       IPv6 = 0x86DD,
   ),
) 
```

虽然构造并不真正支持在此结构中存储值（您可以将抽象容器解析为字节流或将字节流解析为抽象容器），但我想扩展框架，以便解析器也可以在解析时存储值所以可以以点符号**ethernet.type**访问它们。

但是在这样做时，认为最好的解决方案是编写编码/解码机制的通用方法，以便您可以注册编码/解码机制并能够从抽象数据结构（解析器本身)，以及解析器的输出。

举个例子，默认情况下，当您运行通过解析器打包的以太网时，您最终会得到类似 dict 的东西：

```
Container(name='ethernet_header', 
    destination='\x01\x02\x03\x04\x05\x06', 
    source='\x01\x02\x03\x04\x05\x06', 
    type=IPX
) 
```

我不想解析两次 - 理想情况下，我希望解析器以可配置的方式生成“目标”对象/字符串/字节。

这个想法的根源是您可以注册各种“插件”以使用或处理结构，以便您可以以编程方式生成 XML 或 Graphviz 图表以及能够从字节转换为 Python 字典。任务的关键是，遍历节点树并基于编码器/解码器，转换并返回转换后的对象。

所以问题本质上是——**什么模式最适合这个目的？**

* * *

## 编解码器风格：

我查看了**编解码器**模块，它相当优雅，因为您可以创建编码机制，注册您的类可以对事物进行编码，并且您可以即时指定您想要的特定编码。

```
'blah blah'.encode('utf8') 
```

* * *

## serdes（序列化器，反序列化器）：

有几个 Python 的现有 serdes 模块的例子，我脑海中浮现出 JSON ——但它的问题是它非常具体，不能轻易支持任意格式。您可以对 JSON 进行编码或解码，基本上就是这样。像这样构造的 serdes 有很多种，有些使用**load**、* *dumps* * 方法，有些则不使用。这是一个废话。

```
objects = json.loads('{'a': 1, 'b': 2}) 
```

* * *

## 访客模式（？）：

我对访问者模式不是很熟悉，但它似乎有一些可能适用的机制——想法是（如果我理解正确的话），你会为节点设置一个访问者，它会走树并应用一些转换（并返回新对象？）..我在这里很模糊。

* * *

## 其他？：

是否有其他机制可能更 Pythonic 或已经编写？我考虑过可能使用 ElementTree 和子类化元素 - 但我想在做一些愚蠢的事情之前咨询 stackoverflow。

# php - 更改数组中的变量

> ID：11385893
> 
> 赞同：0
> 
> 时间：2012-07-08T19:11:39.667
> 
> 标签：php, arrays, variables

我的目标是为数组中的字符串分配一个数字。

```
 $lang = array (
    'title'         => "Der Anti-Spam Dienst",
    'button-login'  => "Jetzt $number via Twitter anmelden."
   ); 
```

$number 应该设置为 $lang['button-login'][5] - 但我不知道如何访问数组中的变量。也许你可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:12:39.993

您应该`$number`在数组之前声明变量：

```
$number = 5;

$lang = array(
    'title'         => "Der Anti-Spam Dienst",
    'button-login'  => "Jetzt $number via Twitter anmelden."
); 
```

* * *

**更新**：如果你想在之后设置它，你必须使用[`str_replace`](http://php.net/manual/en/function.str-replace.php)：

```
$lang = array(
    'title'         => 'Der Anti-Spam Dienst',
    'button-login'  => 'Jetzt $number via Twitter anmelden.'
);

echo str_replace('$number', 5, $lang['button-login']); 
```

在此处查看实际操作：http: [//viper-7.com/7QtpF7](http://viper-7.com/7QtpF7)

**注意：**字符串应该用单引号括起来，这样`$number`就不会被解析为变量。

# algorithm - 在排序列表中查找第一个“缺失”数字

> ID：11385896
> 
> 赞同：17
> 
> 时间：2012-07-08T19:12:13.653
> 
> 标签：algorithm, search

假设我有整数的连续范围`[0, 1, 2, 4, 6]`，其中`3`是第一个“缺失”的数字。我需要一个算法来找到第一个“洞”。由于范围非常大（可能包含`2^32`条目），因此效率很重要。数字范围存储在磁盘上；空间效率也是一个主要问题。

什么是最佳的时间和空间效率算法？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-08T19:16:33.827

使用二分查找。如果一个数字范围没有漏洞，那么该范围的结束和开始之间的差异也将是该范围内的条目数。

因此，您可以从整个数字列表开始，然后根据前半部分是否有差距来截断前半部分或后半部分。最终你会来到一个有两个入口的范围，中间有一个洞。

这个的时间复杂度是`O(log N)`。与线性扫描相比，最坏的情况是`O(N)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-29T20:10:40.537

根据上面@phs 建议的方法，这是执行此操作的 C 代码：

```
#include <stdio.h>

int find_missing_number(int arr[], int len) {
    int first, middle, last;
    first = 0;
    last = len - 1;
    middle = (first + last)/2;

    while (first < last) {
        if ((arr[middle] - arr[first]) != (middle - first)) {
            /* there is a hole in the first half */
            if ((middle - first) == 1 && (arr[middle] - arr[first] > 1)) {
                return (arr[middle] - 1);
            }

            last = middle;
        } else if ((arr[last] - arr[middle]) != (last - middle)) {
            /* there is a hole in the second half */
            if ((last - middle) == 1 && (arr[last] - arr[middle] > 1)) {
                return (arr[middle] + 1);
            }

            first = middle;
        } else {
            /* there is no hole */
            return -1;
        }

        middle = (first + last)/2;
    }

    /* there is no hole */
    return -1;
}

int main() {
    int arr[] = {3, 5, 1};
    printf("%d", find_missing_number(arr, sizeof arr/(sizeof arr[0]))); /* prints 4 */
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T08:04:13.967

由于从 0 到*n* - 1 的数字在数组中排序，因此第一个数字应与其索引相同。也就是说，数字 0 位于索引为 0 的单元格中，数字 1 位于索引为 1 的单元格中，以此类推。如果缺少的数字表示为*m*。小于*m*的数字位于索引与值相同的单元格处。

数字*m* + 1 位于索引为*m*的单元格中，数字*m* + 2 位于索引为*m* + 1 的单元格中，依此类推。我们可以看到，缺失的数字*m*是第一个值与其值不相同的单元格。

因此，需要在数组中查找第一个值与其值不相同的单元格。由于数组已排序，我们可以基于如下实现的二分搜索算法 在 O(lg *n ) 时间内找到它：*

```
int getOnceNumber_sorted(int[] numbers)
{
    int length = numbers.length
    int left = 0;
    int right = length - 1;
    while(left <= right)
    {
        int middle = (right + left) >> 1;
        if(numbers[middle] != middle)
        {
            if(middle == 0 || numbers[middle - 1] == middle - 1)
                return middle;
            right = middle - 1;
        }
        else
            left = middle + 1;
    }

    return -1;
} 
```

这个解决方案是从我的博客中借来的：http: [//codercareer.blogspot.com/2013/02/no-37-missing-number-in-array.html](http://codercareer.blogspot.com/2013/02/no-37-missing-number-in-array.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-04T22:17:35.700

基于@phs 提供的算法

```
int findFirstMissing(int array[], int start , int end){

    if(end<=start+1){
        return start+1;
    }
    else{

        int mid = start + (end-start)/2;

        if((array[mid] - array[start]) != (mid-start))
            return findFirstMissing(array, start, mid);
        else
            return findFirstMissing(array, mid+1, end);

    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-28T21:06:18.093

下面是我的解决方案，我认为它很简单，并且避免了过多令人困惑的 if 语句。当您不从 0 开始或涉及负数时，它也有效！复杂性是**O(lg(n))**时间和**O(1)**空间，假设客户端拥有数字数组（否则它是**O(n)**）。

* * *

## C代码中的算法

```
int missingNumber(int a[], int size) {
    int lo = 0;
    int hi = size - 1; 

    // TODO: Use this if we need to ensure we start at 0!
    //if(a[0] != 0) { return 0; }

    // All elements present? If so, return next largest number.
    if((hi-lo) == (a[hi]-a[lo])) { return a[hi]+1; }

    // While 2 or more elements to left to consider...
    while((hi-lo) >= 2) { 
        int mid = (lo + hi) / 2;
        if((mid-lo) != (a[mid]-a[lo])) {  // Explore left-hand side
            hi = mid;
        } else {  // Explore right hand side
            lo = mid + 1;
        }
    }

    // Return missing value from the two candidates remaining...
    return (lo == (a[lo]-a[0])) ? hi + a[0] : lo + a[0];
} 
```

* * *

## 测试输出

```
 int a[] = {0};  // Returns: 1
    int a[] = {1};  // Returns: 2

    int a[] = {0, 1};  // Returns: 2
    int a[] = {1, 2};  // Returns: 3
    int a[] = {0, 2};  // Returns: 1

    int a[] = {0, 2, 3, 4};  // Returns: 1
    int a[] = {0, 1, 2, 4};  // Returns: 3

    int a[] = {0, 1, 2, 4, 5, 6, 7, 8, 9};  // Returns: 3
    int a[] = {2, 3, 5, 6, 7, 8, 9};        // Returns: 4
    int a[] = {2, 3, 4, 5, 6, 8, 9};        // Returns: 7

    int a[] = {-3, -2, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9};      // Returns: -1
    int a[] = {-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9};  // Returns: 10 
```

* * *

**一般程序是：**

1.  （可选）检查数组是否从 0 开始。如果不是，则返回 0 作为缺失。
2.  检查整数数组是否完整且没有丢失整数。如果它没有丢失一个整数，则返回下一个最大的整数。
3.  在二进制搜索方式中，检查索引和数组值的差异之间的不匹配。不匹配告诉我们缺少的元素在哪一半。如果前半部分不匹配，则向左移动，否则向右移动。这样做直到你有两个候选元素需要考虑。
4.  根据不正确的候选人返回缺少的数字。

**注意，算法的假设是：**

1.  第一个和最后一个元素被认为永远不会丢失。这些元素建立了一个范围。
2.  数组中只缺少一个整数。这将找不到一个以上的缺失整数！
3.  数组中的整数预计会以 1 的步长增加，而不是以任何其他速率增加。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-08T19:15:36.157

您是否考虑过[运行长度编码](http://en.wikipedia.org/wiki/Run-length_encoding)？也就是说，您对第一个数字以及连续跟随它的数字的计数进行编码。您不仅可以通过这种方式非常有效地表示使用的数字，而且第一个孔将位于第一个行程编码段的末尾。

用你的例子来说明：

```
[0, 1, 2, 4, 6] 
```

将被编码为：

```
[0:3, 4:1, 6:1] 
```

其中 x:y 表示有一组数字从 x 开始连续 y 个数字。这立即告诉我们第一个间隙位于位置 3。但是请注意，当分配的地址聚集在一起而不是随机分散在整个范围内时，这将更加有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-08T19:28:54.123

如果列表已排序，我将遍历列表并执行类似以下 Python 代码的操作：

```
missing = []
check = 0
for n in numbers:
    if n > check:
        # all the numbers in [check, n) were not present
        missing += range(check, n)
    check = n + 1

# now we account for any missing numbers after the last element of numbers
if check < MAX:
    missing += range(check, MAX + 1) 
```

如果缺少很多数字，您可能希望对列表使用@Nathan 的运行长度编码建议`missing`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-18T18:49:06.400

失踪

```
Number=(1/2)(n)(n+1)-(Sum of all elements in the array) 
```

这里`n`是 的大小`array+1`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-12T22:26:59.690

```
Array: [1,2,3,4,5,6,8,9]
Index: [0,1,2,3,4,5,6,7]

int findMissingEmementIndex(int a[], int start, int end)
{
    int mid = (start + end)/2;

    if( Math.abs(a[mid] - a[start]) != Math.abs(mid - start) ){

        if(  Math.abs(mid - start) == 1 && Math.abs(a[mid] - a[start])!=1 ){
            return start +1; 
        }
        else{
            return findMissingElmementIndex(a,start,mid);
        }

    }
    else if( a[mid] - a[end] != end - start){

        if(  Math.abs(end - mid) ==1 && Math.abs(a[end] - a[mid])!=1 ){
           return mid +1; 
        }
        else{
            return findMissingElmementIndex(a,mid,end);
        }
    }
    else{
        return No_Problem;
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-22T23:22:17.083

这是一个面试题。我们将有一个包含多个缺失数字的数组，我们会将所有这些缺失的数字放在一个 ArrayList 中。

```
public class Test4 {
    public static void main(String[] args) {
        int[] a = { 1, 3, 5, 7, 10 };
        List<Integer> list = new ArrayList<>();

        int start = 0;
        for (int i = 0; i < a.length; i++) {
            int ch = a[i];
            if (start == ch) {
                start++;
            } else {
                list.add(start);
                start++;
                i--; // a must do.
            } // else
        } // for
        System.out.println(list);

    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-26T08:49:20.743

***函数式编程解决方案 (Scala)***

*   漂亮优雅
*   懒惰的评价

    ```
    def gapFinder(sortedList: List[Int], start: Int = 0): Int = {
      def withGuards: Stream[Int] =
        (start - 1) +: sortedList.toStream :+ (sortedList.last + 2)

      if (sortedList.isEmpty) start
      else withGuards.sliding(2)
      .dropWhile { p => p.head + 1 >= p.last }.next()
      .headOption.getOrElse(start) + 1
    } // 8-line solution

    // Tests
    assert(gapFinder(List()) == 0)
    assert(gapFinder(List[Int](0)) == 1)
    assert(gapFinder(List[Int](1)) == 0)
    assert(gapFinder(List[Int](2)) == 0)
    assert(gapFinder(List[Int](0, 1, 2)) == 3)
    assert(gapFinder(List[Int](0, 2, 4)) == 1)
    assert(gapFinder(List[Int](0, 1, 2, 4)) == 3)
    assert(gapFinder(List[Int](0, 1, 2, 4, 5)) == 3) 
    ```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-13T09:17:53.520

```
import java.util.Scanner;
class MissingNumber {
  public static void main(String[] args) {

    Scanner scan = new Scanner(System.in);
    int n = scan.nextInt();
    int[] arr =new int[n];
    for (int i=0;i<n;i++){
      arr[i]=scan.nextInt();
    }
    for (int i=0;i<n;i++){
      if(arr[i+1]==arr[i]+1){

      }
      else{
        System.out.println(arr[i]+1);
        break;
      }
    }

  }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-07T14:04:11.153

我正在寻找一种超级简单的方法来在 javascript 中找到具有最大潜在值的排序数组中的第一个缺失数字，并且不必太担心效率，因为我不打算使用更长的列表 10-20最多的项目。这是我想出的递归函数：

```
 function findFirstMissingNumber(sortedList, index, x, maxAllowedValue){
    if(sortedList[index] == x && x < maxAllowedValue){
      return findFirstMissingNumber(sortedList, (index+1), (x+1), maxAllowedValue);
    }else{ return x; }
  }

  findFirstMissingNumber([3, 4, 5, 7, 8, 9], 0, 3, 10);
  //expected output: 6 
```

给它你的数组，你希望开始的索引，你期望它的值和你想要检查的最大值。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-03-27T08:19:28.973

我有一种算法可以在排序列表中找到丢失的数字。它的复杂度是 logN。

```
 public int execute2(int[] array) {
        int diff = Math.min(array[1]-array[0], array[2]-array[1]);
        int min = 0, max = arr.length-1;
        boolean missingNum = true;
        while(min<max) {
            int mid = (min + max) >>> 1;
            int leftDiff = array[mid] - array[min];
            if(leftDiff > diff * (mid - min)) {
                if(mid-min == 1)
                    return (array[mid] + array[min])/2;
                max = mid;
                missingNum = false;
                continue;
            }
            int rightDiff = array[max] - array[mid];
            if(rightDiff > diff * (max - mid)) {
                if(max-mid == 1)
                    return (array[max] + array[mid])/2;
                min = mid;
                missingNum = false;
                continue;
            }
            if(missingNum)
                break;
        }
        return -1;
    } 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-09-24T23:11:42.050

基于@phs 提供的算法

```
 public class Solution {
      public int missing(int[] array) {
        // write your solution here
        if(array == null){
          return -1;
        }
        if (array.length == 0) {
          return 1;
        }
        int left = 0;
        int right = array.length -1;
        while (left < right - 1) {
          int mid = left + (right - left) / 2;
          if (array[mid] - array[left] != mid - left) { //there is gap in [left, mid]
            right = mid;
          }else if (array[right] - array[mid] != right - mid) { //there is gap in [mid, right]
            left = mid;
          }else{ //there is no gapin [left, right], which means the missing num is the at 0 and N
            return array[0] == 1 ? array.length + 1 : 1 ;
          }

        }
        if (array[right] - array[left] == 2){ //missing number is between array[left] and array[right]
          return left + 2;
        }else{
          return array[0] == 1 ? -1 : 1; //when ther is only one element in array
        }

      }
    } 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-08-11T09:38:56.640

```
public static int findFirst(int[] arr) {
    int l = -1;
    int r = arr.length;
    while (r - l > 1) {
        int middle = (r + l) / 2;
        if (arr[middle] > middle) {
            r = middle;
        }
        l = middle;
    }
    return r;
} 
```

# backbone.js - 由于与 Backbone-relational 的循环引用，无法设置默认属性

> ID：11385904
> 
> 赞同：0
> 
> 时间：2012-07-08T19:13:14.500
> 
> 标签：backbone.js, backbone-relational

我正在将 Backbone 与 Backbone-relational 一起使用。我有两个模型，`Appointment`并且`Client`，其中 a`Client`可以有很多`Appointments`. 这是我的`Client`模型定义（在 CoffeeScript 中）：

```
class Snip.Models.Client extends Backbone.RelationalModel
  paramRoot: 'client'

  relations: [
    type: Backbone.HasMany
    key: 'appointments'
    relatedModel: 'Snip.Models.Appointment'
    collectionType: 'Snip.Collections.AppointmentsCollection'
    reverseRelation:
      type: Backbone.HasOne
      key: 'client'
      includeInJSON: 'id'
  ]

  defaults:
    name: null
    phone: null
    email: null
    notes: null
    active: null

class Snip.Collections.ClientsCollection extends Backbone.Collection
  model: Snip.Models.Client
  url: '/clients' 
```

这是我的`Appointment`模型定义：

```
class Snip.Models.Appointment extends Backbone.RelationalModel
  paramRoot: 'appointment'

  defaults:
    time_block_type_code: 'APPOINTMENT'
    start_time: null
    stylist: null
    salon: null
    client: Snip.Models.Client() # This doens't work

class Snip.Collections.AppointmentsCollection extends Backbone.Collection
  model: Snip.Models.Appointment
  url: '/appointments' 
```

这就是问题所在：因为`Client`references `Appointment`，我需要在`Appointment`文件之前包含`Client`文件，这样`Snip.Models.Appointment`当我引用它时该类就会存在。但是，`Appointment` *也*引用`Client`，所以这是一种 catch-22 情况。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:33:15.350

首先，在使用 Backbone-Relational 时不要忘记[初始化](https://github.com/PaulUithol/Backbone-relational/#known-problems-and-solutions)反向关系：

```
Snip.Models.Client.setup() 
```

其次，在您的默认值中，键`client`应该是新客户端模型的 attrs（它将由 Backbone-Relational 创建）。如果您没有任何留空哈希：

```
client: {} 
```

# xamarin.ios - ServiceStack Monotouch iPhone/Release 构建失败

> ID：11385906
> 
> 赞同：3
> 
> 时间：2012-07-08T19:13:53.110
> 
> 标签：xamarin.ios, servicestack

**更新**- 这确实仅在发布版本中失败，但仅在使用 LLVM 编译器选项时。为 Xamarin 创建一个独立的测试用例，我将作为答案发布。

我有一个使用 ServiceStack.Common.Monotouch.dll、ServiceStack.Interfaces.Monotouch.dll 和 ServiceStack.Text.Monotouch.dll 的项目。我可以在 Simulator/Release & Debug 和 iPhone/Debug 中构建这个项目，但是当我在 iPhone/Release 中构建时，我收到以下错误：

```
...
MONO_PATH=/Users/pseabury/Projects/IMDSS_iOS/IMDSSMobile_iOS/bin/iPhone/Release/IMDSSMobile_iOS.app /Developer/MonoTouch/usr/bin/arm-darwin-mono --llvm --aot=mtriple=armv7-darwin,full ,static,asmonly,nodebug,llvm-path=/Developer/MonoTouch/LLVM/bin/,outfile=/var/folders/mt/b7h3_pgs3lxgpvpm2h1_2ppc0000gn/T/tmp39b8b8c7.tmp/System.Data.dll.7.s "/Users /pseabury/Projects/IMDSS_iOS/IMDSSMobile_iOS/bin/iPhone/Release/IMDSSMobile_iOS.app/System.Data.dll"
AOT 编译以代码 134 退出，命令：
MONO_PATH=/Users/pseabury/Projects/IMDSS_iOS/IMDSSMobile_iOS/bin/iPhone/Release/IMDSSMobile_iOS.app /Developer/MonoTouch/usr/bin/arm-darwin-mono --llvm --aot=mtriple=armv7-darwin,full ,静态,asmonly,nodebug,llvm-path=/Developer/MonoTouch/LLVM/bin/,outfile=/var/folders/mt/b7h3_pgs3lxgpvpm2h1_2ppc0000gn/T/tmp39b8b8c7.tmp/ServiceStack.Text.MonoTouch.dll.7.s " /Users/pseabury/Projects/IMDSS_iOS/IMDSSMobile_iOS/bin/iPhone/Release/IMDSSMobile_iOS.app/ServiceStack.Text.MonoTouch.dll"
Mono Ahead of Time 编译器 - 编译程序集 /Users/pseabury/Projects/IMDSS_iOS/IMDSSMobile_iOS/bin/iPhone/Release/IMDSSMobile_iOS.app/ServiceStack.Text.MonoTouch.dll
* ../../../../../mono/mono/mini/mini-llvm.c:4535 处的断言，条件 `LLVMTypeOf (values [sreg1]) == LLVMTypeOf (values [phi->渣])'没有遇到
...
mtouch 以代码 1 退出

```

如有必要，我可以将一个示例项目放在一起，但您只需要最新的 ServiceStack dll 或 Monotouch 的源代码和一个用于 ServiceClient 的示例/设计的 DTO，以便重现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:06:12.753

提交给 Xamarin 的错误 - [https://bugzilla.xamarin.com/show_bug.cgi?id=6066](https://bugzilla.xamarin.com/show_bug.cgi?id=6066)。

# php - 如何正确使用我的 Cookie 类

> ID：11385907
> 
> 赞同：4
> 
> 时间：2012-07-08T19:13:58.077
> 
> 标签：php, cookies

我刚开始在 PHP 中进行 OOP 编程，并且制作了一个 cookie 类。

这样做我有几个问题没有答案

*   我的课正确吗？

*   如何在我的页面中正确使用它？（假设我想查看访问者之前访问我的网站的次数并为用户输出结果）

登录并使用此代码后，我已经对其进行了测试：

```
$cookie = new Cookie();
$cookie->store();
print_r($_COOKIE); 
```

（我有一个结果被退回，但我不知道它是否是好的结果） Bellow 你可以找到我的 Cookie 课程。

```
<?php
class Cookie {
    /* cookie $id */ 
    private $id = false;

    /* cookie life $time */
    private $time = false;

    /* cookie $domain */
    private $domain = false;    

    /* cookie $path */
    private $path = false;

    /* cookie $secure (true is https only) */
    private $secure = false;

    public function __construct ($id, $time = 3600, $path = false, $domain = false, $secure = false) {
        $this->id = $id;
        $this->time = $time;                  
        $this->path = $path;
        $this->domain = $domain;      
        $this->secure = $secure;
    }

    public function store() {
        foreach ($this->parameters as $parameter => $validator) {
            setcookie($this->id . "[" . $parameter . "]", $validator->getValue(), time() + $this->time, $this->path, $this->domain, $this->secure, true);        
        }            
    }     

    public function restore() {
        if (isset($_COOKIE[$this->id])) {

            foreach ($_COOKIE[$this->id] as $parameter => $value) {
                $this->{$parameter} = $value;
            }
        }   
    }           

    public function destroy() {
        $this->time =  -1;
    }   
}
?> 
```

我希望有人能给我一个很好的例子！我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T19:48:09.100

此代码应该执行操作 cookie 所需的最常见任务。不要因阅读 getter 和 setter 方法而感到困惑——它们用于访问类中定义的私有变量。请记住，每个 cookie 都使用此类，并且您需要为每个要操作的新 cookie 有一个新实例。在类下面，我添加了一个如何使用该类的示例。

```
<?php
/**
 * Cookie manager.
 */
class Cookie
{
    /**
     * Cookie name - the name of the cookie.
     * @var bool
     */
    private $name = false;

    /**
     * Cookie value
     * @var string
     */
    private $value = "";

    /**
     * Cookie life time
     * @var DateTime
     */
    private $time;

    /**
     * Cookie domain
     * @var bool
     */
    private $domain = false;

    /**
     * Cookie path
     * @var bool
     */
    private $path = false;

    /**
     * Cookie secure
     * @var bool
     */
    private $secure = false;

    /**
     * Constructor
     */
    public function __construct() { }

    /**
     * Create or Update cookie.
     */
    public function create() {
        return setcookie($this->name, $this->getValue(), $this->getTime(), $this->getPath(), $this->getDomain(), $this->getSecure(), true);
    }

    /**
     * Return a cookie
     * @return mixed
     */
    public function get(){
        return $_COOKIE[$this->getName()];
    }

    /**
     * Delete cookie.
     * @return bool
     */
    public function delete(){
        return setcookie($this->name, '', time() - 3600, $this->getPath(), $this->getDomain(), $this->getSecure(), true);
    }

    /**
     * @param $domain
     */
    public function setDomain($domain) {
        $this->domain = $domain;
    }

    /**
     * @return bool
     */
    public function getDomain() {
        return $this->domain;
    }

    /**
     * @param $id
     */
    public function setName($id) {
        $this->name = $id;
    }

    /**
     * @return bool
     */
    public function getName() {
        return $this->name;
    }

    /**
     * @param $path
     */
    public function setPath($path) {
        $this->path = $path;
    }

    /**
     * @return bool
     */
    public function getPath() {
        return $this->path;
    }

    /**
     * @param $secure
     */
    public function setSecure($secure) {
        $this->secure = $secure;
    }

    /**
     * @return bool
     */
    public function getSecure() {
        return $this->secure;
    }

    /**
     * @param $time
     */
    public function setTime($time) {
        // Create a date
        $date = new DateTime();
        // Modify it (+1hours; +1days; +20years; -2days etc)
        $date->modify($time);
        // Store the date in UNIX timestamp.
        $this->time = $date->getTimestamp();
    }

    /**
     * @return bool|int
     */
    public function getTime() {
        return $this->time;
    }

    /**
     * @param string $value
     */
    public function setValue($value) {
        $this->value = $value;
    }

    /**
     * @return string
     */
    public function getValue() {
        return $this->value;
    }
}

/**
 * Create a cookie with the name "myCookieName" and value "testing cookie value"
 */
$cookie = new Cookie();
// Set cookie name
$cookie->setName('myCookieName');
// Set cookie value
$cookie->setValue("testing cookie value");
// Set cookie expiration time
$cookie->setTime("+1 hour");
// Create the cookie
$cookie->create();
// Get the cookie value.
print_r($cookie->get());
// Delete the cookie.
//$cookie->delete();

?> 
```

PS我特意评论了`$cookie->delete();`，这样你就可以看到`print_r($cookie->get())`。

编辑：
问题：代码在哪里查看是否设置了cookie？
答：
您应该检查 $_COOKIE 在[php 文档](http://php.net/manual/en/reserved.variables.cookies.php)中的作用。
基本上，服务器将标头发送到客户端的浏览器，该浏览器将 cookie 存储在客户端的计算机上。当客户端初始化与服务器的连接时，它会通过请求传递 cookie。

问题：$cookie->delete(); 去哪儿了？
答：
没有直接的方法可以删除 cookie。因此，为了做到这一点，您需要创建一个具有相同名称和过期时间的 cookie，这是过去的。当您这样做时，cookie 将从客户端的浏览器中删除。

# c - 使用arduino和C进行串行接口初始化

> ID：11385915
> 
> 赞同：1
> 
> 时间：2012-07-08T19:14:57.307
> 
> 标签：c, macos, serial-port, arduino

我想在我的 Mac 上使用 C 与我的 arduino “交谈”。我首先使用了arduino官网给出的链接中的代码：http: [//todbot.com/blog/2006/12/06/arduino-serial-c-code-to-talk-to-arduino/](http://todbot.com/blog/2006/12/06/arduino-serial-c-code-to-talk-to-arduino/)

使用“闪烁”示例它根本不起作用，我知道当串行端口打开时较新的 arduinos 会重置，但即使添加延迟（最多 4 秒）它只会在我发送的任何字符时闪烁。

我还尝试通过在 termios 标志中禁用 HUPCL（应该防止重置）来更改代码，但它不会改变任何东西。

*有趣*的是，如果我在后台加载 Arduino 官方应用程序的串行监视器，它就可以工作。命令屏幕也功能齐全。所以我想这与串行通信的初始化有关。然后，我尝试使用**stty -a**获取监视器使用的标志（l、i、o 和 c），并在我的 C 程序中使用它们……但运气不好！

谢谢你的帮助！

PS：这是在 ebay 上购买的中国克隆......也许它可能是相关的

编辑：我尝试使用 python 对 pyserial 做同样的事情，它做同样的事情：仅当 arduino 应用程序的串行监视器同时运行时才有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:28:36.813

嗯，我想我找到了。

我可以尝试一个 arduino Uno，结果是一样的。然后我意识到，由于某种晦涩的原因，我的 arduino 在**每次**通过串行端口进行通信时都会重置，而不仅仅是在第一次连接时。由于在 windows 下结果是一样的，我想这与我的笔记本电脑有关（MBP 15"，2011 年初，10.7.4）。

然后我搜索了一下，发现实际上有一种方法可以使用 C 或 Python 禁用 DTR（使电路板复位的信号）。

```
import serial, time

#open the serial port
s = serial.Serial(port='/dev/tty.usbserial-A5006HGR', baudrate=9600)

#disable DTR
s.setDTR(level=False)

#wait for 2 seconds
time.sleep(2)

#send the data
s.write("7") 
```

在 C 中，您需要从串行端口加载参数，禁用 DTR，然后更新参数，这是使用`ioctl`（来自[http://www.easysw.com/~mike/serial/serial.html#5_1_2](http://www.easysw.com/~mike/serial/serial.html#5_1_2)）

```
//load status
int status;
ioctl(fd, TIOCMGET, &status);

//disable DTR
status &= ~TIOCM_DTR;

//update the status
ioctl(fd, TIOCMSET, &status); 
```

这可以在端口打开后放在代码中。但是，板子在第一次连接时仍会重新启动，第一次延迟仍然是必要的。

我希望这将帮助处于相同（不寻常）情况的人们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:58:44.983

最后，我发现对于 Linux 中的 Python（在我的情况下为 2.7.3），您必须这样做：

```
ser = serial.Serial('/dev/ttyACM0', 9600)
ser.dsrdtr=False
ser.setDTR(level=False) 
```

不会有重置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:58:44.723

我还没有发现这种方法对于在 mac 上打开串口来说太可靠了。我建议使用 ioctl，因为它更加健壮并提供许多优势，主要是使用任意波特率。

```
#import <IOKit/serial/ioss.h>
#import <sys/ioctl.h>

- (int)serialInit:(const char*)path baud:(int)baud;
{
    struct termios options;

    // open the serial like POSIX C
    int serialFileDescriptor = open(path, O_RDWR | O_NOCTTY | O_NONBLOCK);

    // block non-root users from using this port
    ioctl(serialFileDescriptor, TIOCEXCL);

    // clear the O_NONBLOCK flag, so that read() will
    //   block and wait for data.
    fcntl(serialFileDescriptor, F_SETFL, 0);

    // grab the options for the serial port
    tcgetattr(serialFileDescriptor, &options);

    // setting raw-mode allows the use of tcsetattr() and ioctl()
    cfmakeraw(&options);

    // specify any arbitrary baud rate
    ioctl(serialFileDescriptor, IOSSIOSPEED, &baud);

    return serialFileDescriptor;
} 
```

# visual-studio-2010 - 是否可以在未安装 VS 的机器上使用 VS Profiler（性能向导）？

> ID：11385917
> 
> 赞同：1
> 
> 时间：2012-07-08T19:15:03.613
> 
> 标签：visual-studio-2010

我有无法在我的开发机器上重现的性能问题。

问题仅在“部署”机器上重现，因此我必须在那里运行分析器（通常我使用开发机器进行此类工作）。

我可以远程做吗？例如，我可以使用我的开发机器上的 Visual Studio UI 通过网络在部署机器上运行探查器吗？

可能我只能将“分析器”部分（没有 VS）安装到部署机器并通过 RDP 从命令行运行它？

我有什么选择？当然，我可以在部署机器上安装 VS，但我想安装尽可能少的东西，因为这台机器用于业务并且不需要 VS。

**upd**刚刚用谷歌搜索了 Standalone Profiler [http://www.microsoft.com/en-us/download/details.aspx?id=23205](http://www.microsoft.com/en-us/download/details.aspx?id=23205)可能这就是我需要的......

# android - Android中的滑块

> ID：11385920
> 
> 赞同：1
> 
> 时间：2012-07-08T19:15:26.620
> 
> 标签：android

我目前正在使用 Eclipse 开发一个 android 应用程序。我希望能够滑入或滑出以进入下一个屏幕（活动）。有没有人知道如何创建此控件或任何第 3 方来执行此操作？

谢谢，

查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:56:10.720

[这](http://developer.android.com/reference/android/widget/ViewFlipper.html)是您需要使用的课程，[这](http://www.warriorpoint.com/blog/2009/05/29/android-switching-screens-by-dragging-over-the-touch-screen/)是一个很好的教程，解释了如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T20:05:02.407

Google 通常鼓励使用“后退”按钮进行导航，而不是其他屏幕控件。尽管如此，在某些情况下它可能是合适的，所以如果你愿意，不要气馁不要放入你自己的活动控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-25T11:59:21.477

```
out_marginLeft="50dp"
            android:layout_marginTop="50dp"
            android:layout_marginRight="50dp"
            android:gravity="center"
            android:orientation="vertical">

            <ProgressBar
                android:id="@+id/progressBar"
                style="?android:attr/progressBarStyleHorizontal"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_above="@+id/txtProgress"
                android:layout_centerHorizontal="true"
                android:layout_marginLeft="16dp"
                android:layout_marginRight="16dp"
                android:progress="50"
                android:progressTint="@android:color/black" />

            <TextView
                android:id="@+id/txtProgress"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="8dp"
                android:text="Progress"
                android:textColor="@android:color/black" />
        </LinearLayout>  

Java 
```

# apache-flex - Flex：如何右对齐 s:DataGrid 中的单元格？

> ID：11385924
> 
> 赞同：3
> 
> 时间：2012-07-08T19:16:35.700
> 
> 标签：apache-flex, datagrid, flash-builder, flex4.5

我有一个 s:DataGrid 有 3 列。我想右对齐最后两列中的文本，但找不到让它工作的方法。我尝试创建自定义渲染器并将 textAlign 设置为正确，但它不起作用。

这是我的自定义渲染器：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
    ]]>
</fx:Script>

<s:Label id="lblData" top="9" left="7" text="{data.outgoingCount}" fontWeight="bold" textAlign="right"/> 
```

我真的很想知道如何正确对齐网格中的单元格。感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:33:02.310

如果您只需要显示文本，请查看[DefaultGridItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/skins/spark/DefaultGridItemRenderer.html)类。如果您不指定项目渲染器，这就是 Spark`DataGrid`将使用的。

`DefaultGridItemRenderer`有一种`textAlign`风格`Label`。

您的自定义渲染器无法正常工作的原因并不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T11:15:36.070

使用 itemRenderers 右对齐的技巧是确保 itemRenderer 要么用完包含列的整个宽度，要么锚定到网格列的右侧。否则，标签中的文本将与 itemRenderer 对齐，就像不在网格右侧的标签一样。

因此，请确保进行项目渲染的组件具有 width="100%" 或 right=something。

这是一个锚定到网格列右侧的示例。

```
<s:DataGrid>
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="Artist"  width="100"/>
            <s:GridColumn dataField="Price"  width="100">
                <s:itemRenderer>
                    <fx:Component>
                        <s:GridItemRenderer>
                            <s:Label id="labelDisplay" textAlign="right" right="3" height="100%" verticalAlign="middle"/>
                        </s:GridItemRenderer>
                    </fx:Component>
                </s:itemRenderer>
            </s:GridColumn>
            <s:GridColumn dataField="Album"/>
        </s:ArrayList>
    </s:columns>
    <s:dataProvider>
        <s:ArrayList>
            <fx:Object>
                <fx:Artist>Pavement</fx:Artist>
                <fx:Price>11.99</fx:Price>
                <fx:Album>Slanted and Enchanted</fx:Album>
            </fx:Object>
            <fx:Object>
                <fx:Price>11.99</fx:Price>
                <fx:Artist>Pavement</fx:Artist>
                <fx:Album>Brighten the Corners</fx:Album>
            </fx:Object>
        </s:ArrayList>
    </s:dataProvider>
</s:DataGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-27T12:21:26.977

致谢：我非常感谢 STACKOVERFLOW 中为这个 Esp 发表的许多帖子。[java中的数字格式使用Lakh格式而不是百万格式](https://stackoverflow.com/questions/14507658/number-formatting-in-java-to-use-lakh-format-instead-of-million-format)

在新的 Flex AIR 应用程序 1 中，我做了**RIGHT ALIGN** + 印度逗号分隔

这是通过自定义项目渲染完成的；需要大量的搜索和代码工作改编自 Java，但 Java、C# 和 AS3 非常相似，移植起来简直是小菜一碟

在印度以外，没有人喜欢十万和千万；其他人对百万亿感到满意，但我们印度人认为十万和梦想千万；并找到百万（100 万）thora confushingh

途中我也做了 RIGHT ALIGN 一个非常普遍的需求

**弹性标记**

```
<s:GridColumn id="dmbtr" headerText="Amt (INR)" dataField="dmbtr" >
  <s:itemRenderer>
    <fx:Component>
      <s:GridItemRenderer>
        <s:Label id="MyText" top="9" left="7" alpha="1"
                 text="{leftPad(data.dmbtr,10)}"
                 fontFamily="Lucida Console" textAlign="right"/>
      </s:GridItemRenderer>
    </fx:Component>
  </s:itemRenderer>
</s:GridColumn> 
```

**AS3 功能**

```
public function leftPad(inp:Number,size:int):String {

  var lstr:String=Math.round(inp).toString(); 
```

// LAKHS CRORES 印度风格

```
 var pat3:RegExp = /(\d+)(\d{3})$/;
  lstr = lstr.replace(pat3, "$1,$2");

  var pat2:RegExp = /(\d+)(\d{2},.+)/;

  var pat1:RegExp = /\d{3,},.+/;

  while(lstr.match(pat1)) 
    lstr = lstr.replace(pat2, "$1,$2"); 
```

// RIGHT ALIGN 部分

```
 var strLen:int = lstr.length;
  var padLen:int = size - strLen;

  if (padLen <= 0) 
    return lstr;  

  var myspaces:String="                    ";  // 20 OK

  return myspaces.substring(0,padLen)+lstr; 
```

}

诀窍是左垫并使用固定宽度的字体

我的要求是最近的卢比

如果您需要小数（为 INR 计算），请使用 toFixed 方法 Number 并将 pat3 更改为
var pat3:RegExp = /(\d+)(\d{3}.*)$/;

右对齐部分在印度逗号之后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-11T13:24:48.540

最好和最简单的方法：

```
<s:DataGrid>  
...  
    <s:columns>  
        <s:ArrayList>  
            <s:GridColumn id="col3" dataField="price" headerText="Price">
                <s:itemRenderer>
                    <fx:Component>
                        <s:DefaultGridItemRenderer textAlign="center" />
                    </fx:Component>
                </s:itemRenderer>
            </s:GridColumn>
            ...
        </s:ArrayList>
    </s:columns>
...
</s:DataGrid> 
```

来源：[https ://forums.adobe.com/thread/863955?tstart=0](https://forums.adobe.com/thread/863955?tstart=0)

# jsp - 使用 scriptlet 调用 onClick 函数

> ID：11385927
> 
> 赞同：3
> 
> 时间：2012-07-08T19:16:51.597
> 
> 标签：jsp, servlets

我想使用 scriptlet 编写单击执行测试按钮时调用的函数此代码不起作用：

这是我的jsp代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
  <html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
 </head>
 <body>

<html:file properties="tonFichier" name="tonForm"/>
<%!

 public void executeTest() {

  java.util.Date d = new java.util.Date();
  System.out.println(d.toString()); } 

 %>

 <form enctype="multipart/form-data" method="get">

  <div>
  <input type="submit" value="Execute Test" onclick="executeTest()" >

  </div>
   </form>
  </body>
   </html> 
```

任何帮助请干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:22:57.030

您可以执行以下操作。

```
if(request.getParameter("btnSubmit")!=null) //btnSubmit is the name of your button, not id of that button.
{
    java.util.Date d = new java.util.Date();
    System.out.println(d.toString()); 
}

<input type="submit" id="btnSubmit" name="btnSubmit" value="Execute Test"/> 
```

* * *

`onclick="executeTest()"`使用您的按钮尝试调用 Javascript 函数。更改上面代码中提到的按钮标签，并将此代码包含在 sciptlet 中。当您单击此按钮时，它将完成这项工作。

此外，您可能需要更换

```
System.out.println(d.toString()); 
```

和

```
out.println(d.toString()); 
```

在你的代码中。

* * *

此外，在您的表单标签中，

```
<form enctype="multipart/form-data" method="get"> 
```

`enctype="multipart/form-data"`上传文件时需要该属性。如果不是这种情况，您应该删除它，并且

```
method="post" 
```

表单属性`enctype="multipart/form-data"`不能工作，如果你使用`method="get"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:20:30.360

我认为您混淆了 Java 函数和 Javascript 函数，即服务器端与客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T16:51:31.233

我们无法使用java调用jsp页面中编写的函数。我们可以使用 javascript 创建事件并将值提交到另一个 jsp 页面以进行进一步处理。

# ios5 - 如何从 Retina 显示设备中的 CGImage 获取正确的像素？

> ID：11385932
> 
> 赞同：1
> 
> 时间：2012-07-08T19:17:48.880
> 
> 标签：ios5, pixel, cgimage, retina-display

我有以下代码可以根据触摸的当前位置（X 和 Y 坐标）正确检索用户手指在图像上触摸的像素颜色（RGB）。因此，这段代码可以正常工作，但不适用于视网膜显示设备：

```
-(void)drawFirstColorWithXCoord:(CGFloat)xCoor andWithYCoord:(CGFloat)yCoor
{
    CGImageRef imageRef = [image CGImage]; //image is an ivar of type UIImage
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = malloc(height * width * 4);
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);

    //GET PIXEL FROM POINT
    int index = 4*((width*round(yCoor))+round(xCoor));

    int R = rawData[index];
    int G = rawData[index+1];
    int B = rawData[index+2];

    NSLog(@"%d   %d   %d", R, G, B);

    free(rawData);
} 
```

我想知道我应该在此代码中进行哪些调整以使其适用于视网膜显示设备。

任何建议都将不胜感激。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:34:02.133

尝试：

```
CGFloat scale = [[UIScreen mainScreen] scale];
NSUInteger bytesPerRow = width * scale * bytesPerPixel; 
```

# java - 从 StringBuilder 进行 toString 转换的 Java 替代方案

> ID：11385933
> 
> 赞同：1
> 
> 时间：2012-07-08T19:18:20.503
> 
> 标签：java, string, memory, stringbuilder

我有这段代码可以将 StringBuilders 的 ArrayList 转换为 Strings 的 ArrayList：

代码：

```
public ArrayList<String> convGenSeqToString(ArrayList<StringBuilder> buff){
        ArrayList<String> convBuf = new ArrayList<String>();

        for (StringBuilder xVar: buff){
            convBuf.add(xVar.toString());
        }
        return convBuf;
    } 
```

我的代码适用于 15-20MB 文本文件的文件。但是，我有一个 44MB 的文本文件，每当我使用该文本文件运行程序时，我总是会收到此错误。

错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2746)
    at java.util.ArrayList.ensureCapacity(ArrayList.java:187)
    at java.util.ArrayList.add(ArrayList.java:378)
    at Recognition.convGenSeqToString(Recognition.java:157)
    at Recognition.genSeq(Recognition.java:145)
    at Recognition.Recognitions(Recognition.java:96)
    at ChainDetection.main(Detection.java:25) 
```

我已经使用 -Xmx2048M 增加了 JVM 运行配置中的内存，但我仍然有同样的错误。我将错误定位在上面显示的代码中，并突出显示了这一行：

```
convBuf.add(xVar.toString()); 
```

有没有其他方法可以在不使用该`.toString()`方法的情况下将 StringBuilder 转换为字符串？我在其他论坛和这里也看到他们为 toString 创建了自定义类，但还不熟悉泛型和一些“@”关键字。有人对如何解决这个问题有建议或指导吗？

## 已编辑

我按照vanza的建议编辑了我的代码：

```
public ArrayList<String> convGenSeqToString(ArrayList<StringBuilder> buff){
        ArrayList<String> convBuf = new ArrayList<String>(buff.size());
        Iterator <StringBuilder> iterBuf = buff.iterator();

        while (iterBuf.hasNext()){
            StringBuilder x = iterBuf.next();
            convBuf.add(x.toString());
            iterBuf.remove();
        }
        return convBuf;
    } 
```

错误信息：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.ArrayList.<init>(ArrayList.java:132)
    at Recognition.convGenSeqToString(Recognition.java:154)
    at Recognition.genSeq(Recognition.java:145)
    at Recognition.Recognitions(Recognition.java:96)
    at ChainDetection.main(ChainDetection.java:25) 
```

我用 buff.size() 和没有 buff.size() 试过这个，我得到了同样的错误信息。但似乎我的错误信息现在减少到 5。对此还有其他想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T19:26:42.407

在不了解您的程序的更多信息的情况下，我不会对您采用的方法发表任何评论，并且仅对您发布的代码发表评论。不过，一个 44MB 的文件正在填充 2G 堆，这对我来说听起来很奇怪。

您可以做的一件事是预先在目标数组中分配空间：

```
ArrayList<String> convBuf = new ArrayList<String>(buf.size()); 
```

这将避免 ArrayList 调整大小步骤，该步骤创建现有列表的副本（并显示在您的堆栈跟踪中）。

您可以尝试的另一件事是在构建 String 数组时释放对原始 StringBuilders 的引用。使用迭代器（而不是“for each”循环），并在每次迭代时从`buff`数组中删除 StringBuilder；`Iterator.remove()`这样，如果内存不足，您将释放一些内存供垃圾收集器回收。

但是再一次，你用这么小的文件耗尽内存听起来很奇怪。也许用 jvisualvm 查看你的堆可以提供一些启示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:32:59.407

有两种方法可以从 StringBuilder 中获取价值

1.  第一次使用`Reflection`并调用`package protected`方法 getValue() 这很难，我认为这不是很好。
2.  第二次调用方法[getChars](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html#getChars%28int,%20int,%20char%5B%5D,%20int%29)

顺便说一句，您将拥有字符数组，并且为了使用`string`您将创建新的字符串实例，它将使用您的内存。

# file - 从 Plist 播放音频文件

> ID：11385936
> 
> 赞同：0
> 
> 时间：2012-07-08T19:18:42.063
> 
> 标签：file, audio, dictionary, plist

在我的 Controller.h 文件中...我列出了我正在使用的 NSDictionary 以及要提取的项目。但我在识别录音变量时遇到问题......

```
@property (nonatomic, retain) NSDictionary *dataForCurrentLevel;
@property (nonatomic, retain) IBOutlet UILabel *Name;
@property (nonatomic, retain) IBOutlet UILabel *Author;
@property (nonatomic, retain) IBOutlet UILabel *Time;
@property (nonatomic, retain) NSString *Recording; 
```

在我的 Controller.m 文件中......

```
- (void)viewDidLoad 
{     

// Configure the user interface by extracting the data from the dictionary
     Name.text = [dataForCurrentLevel valueForKey:@"Name"];
     Author.text = [dataForCurrentLevel valueForKey:@"Author"];
     Time.text = [dataForCurrentLevel valueForKey:@"Time"]; 
```

//以上行工作正常。构建拉入并在我的新视图控制器中显示数据，没有问题。但是，我无法提取字典项附带的音频 m4a 文件。使用下面的代码，我可以播放一个特定的音频文件...但是如何更改下面的代码以拉入当前表级别的 plist 字典中列出的音频文件？仅供参考，音频文件与对象键一起列出：“录音”类型：“字符串”和变量值，如：“buzz.4ma”

```
NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:@"buzz" ofType:@"m4a"]];
self.myPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: fileURL error:nil]; 
```

//如何让pathForResource选择plist字典中的可变音频文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:20:23.827

我更改了我的 plist 字典并找到了解决方案： NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:plistPath]; dict = [dict objectForKey:@"Root"];

```
for (int i = 0; i < numberOfSongs; i++){

    NSDictionary *songInfo = [dict objectForKey:[NSString stringWithFormat:@"Item%d",i]]; 
```

# php - phpquery - 模拟浏览器点击

> ID：11385938
> 
> 赞同：0
> 
> 时间：2012-07-08T19:18:54.100
> 
> 标签：php, phpquery

如何使用 phpquery 框架模拟浏览器点击？

我有以下代码，但点击似乎不起作用

```
 phpQuery::$ajaxAllowedHosts = "www.godaddy.com"; 
    phpQuery::browserGet('http://www.godaddy.com/', 'myCallback');

    function myCallback($browser) {
        echo "myCallback" . PHP_EOL;
        $browser->WebBrowser('myCallback2')->find('#searchDomainName')->val("mydomain")->end()->find('#searchButton')->click();
    }
    function myCallback2($browser) {
        echo "myCallback2" . PHP_EOL;
        print $browser;
    } 
```

并且代码从未达到`myCallback2`。此外，我收到以下错误：

> 致命错误：在第 360 行调用 D:\xampp\xampp\htdocs\phpQuery\phpQuery\phpQuery\plugins\WebBrowser.php 中的未定义函数 unparse_url()

# eclipse - Eclipse java文件颜色

> ID：11385940
> 
> 赞同：0
> 
> 时间：2012-07-08T19:19:22.320
> 
> 标签：eclipse

我不知道为什么，但这让我发疯，有人知道为什么会这样吗？

![在此处输入图像描述](../Images/b85f70b00220def6712e3977b110498a.png)

首先整个东西都是红色的，我的每个java文件（仅在这个项目中）都是这样的。其次，D旁边的那个点，不是“编辑而不保存”星号，当我在这个点旁边编辑一些东西后，它仍然显示在那里。如何删除点和红色并返回白色背景？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:43:56.050

这些条目的格式由标签装饰控制。可能您安装了一个新插件，它设置了一种看起来很狂野的新型装饰。您尝试禁用它们以检测问题的根源。

通用标签装饰在*Eclipse Preferences的***General/Appearance/Label Decorations**页面中设置，但各种 Team 提供者（CVS、SVN、Git 等）也提供此类选项（**Team/xxx/Label Decorations**）。此外，您可以使用搜索栏在首选项中搜索字符串**标签装饰**。

# push-notification - 在 php 中实现推送通知服务器

> ID：11385942
> 
> 赞同：0
> 
> 时间：2012-07-08T19:19:49.887
> 
> 标签：push-notification, google-cloud-messaging

这是我的第一篇文章，对不起我的英语

大家好。我是 PHP 的新程序员，我想使用 Zend Mobile Framework 来实现我的推送通知服务器。

我正在寻找如何实现中使用的tomcat项目

[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

但用 PHP 编写。

在下面的代码中，我编写了使用的源代码。当我调用提交按钮时，总是有 InvalidRegistration 错误的响应。

任何人都可以看到错误在哪里？

非常感谢您

[http://pastebin.com/MauzLX71](http://pastebin.com/MauzLX71)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:29:27.357

根据 Android GCM 的架构概述，您在以下情况下会遇到 invalidRegistration 错误：

> 无效的注册 ID 检查您传递给服务器的注册 ID 的格式。确保它与手机在 com.google.android.c2dm.intent.REGISTRATION 意图中收到的注册 ID 匹配，并且您没有截断它或添加其他字符。当错误代码为**InvalidRegistration**时发生。

[请在此处](http://developer.android.com/guide/google/gcm/gcm.html)查看官方 GCM 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:47:02.030

您可能在这里发生的一件事是：

*   您的代码实际上正在处理并尝试在您调用 sendPush 之前发送消息，这可能会导致部分问题。
    *   我已经修改了代码并将注册 ID 放在那里： http: [//pastebin.com/NhrD5N6i](http://pastebin.com/NhrD5N6i)
*   您是否注册了 API 密钥并替换了代码中的那部分？
*   在演示客户端应用程序中；它展示了如何实际利用注册；请参阅我对以下 GitHub 问题的评论：[https ://github.com/mwillbanks/Zend_Mobile/issues/16](https://github.com/mwillbanks/Zend_Mobile/issues/16)
    *   您的服务器需要从设备获得注册 ID；这可能是您没有的。
    *   获取注册 ID 的一种方法是在客户端应用程序内的 onRegistered 调用中执行 Log.i("MY_APP_TAG", regId); 然后查看 logcat 输出。

*安卓示例*

```
public class GCMIntentService extends GCMBaseIntentService {

    public GCMIntentService() {
        super(Constants.SENDER_ID);
    }

    @Override
    protected void onRegistered(Context context, String regId) {
        Log.i("MY_APP_TAG", "Registered: " + regId);
    }

    @Override
    protected void onUnregistered(Context context, String regId) {
        // write a call here to send the regId to your server and unregister it
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i("MY_APP_TAG", "Received message!");
        // grabbing data looks like the following; the assumption
        // is title is part of the data string.
        String title = intent.getExtras().getString("title");
    }

} 
```

*Zend_Mobile_Push_Gcm 示例*

请参阅我提供的粘贴代码的更新链接 (http://pastebin.com/NhrD5N6i)；您将需要在文本框中使用上面的注册 ID。

# c++ - c++运行错误

> ID：11385943
> 
> 赞同：0
> 
> 时间：2012-07-08T19:20:03.320
> 
> 标签：c++

运行 my-program 时出现此错误（使用 g++ 编译良好）：

```
my-program: malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed. 
```

我通常理解错误，但这次我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T19:21:00.440

内部发生了故障`malloc`，这意味着您可能已经损坏了堆。可能是通过在某处写入一些动态分配的内存的末尾。

# android - 如果从按钮调用 Spinner 将不起作用

> ID：11385948
> 
> 赞同：0
> 
> 时间：2012-07-08T19:20:50.233
> 
> 标签：android, button, click, spinner

这是我的代码：

```
String[] spinnerPresets = { "Test", "Test1", "Test2" };
        final Spinner s1 = new Spinner(this);
        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, spinnerPresets);
        s1.setAdapter(arrayAdapter);
        s1.setPrompt("Presets");
        s1.setOnItemSelectedListener(
                new OnItemSelectedListener() {
                    public void onItemSelected(AdapterView<?> arg0, View arg1,
                            int position, long arg3) {  
                        if(position==0) {
                            Toast.makeText(Activity.this, "TEST", Toast.LENGTH_LONG).show();
                        }
                        if(position==1) {
                            Toast.makeText(Activity.this, "TEST1", Toast.LENGTH_LONG).show();
                        }
                        if(position==2) {
                            Toast.makeText(Activity.this, "TEST2", Toast.LENGTH_LONG).show();
                        }
                    }

                    public void onNothingSelected(AdapterView<?> arg0) {
                    }
                });
        b2.setOnClickListener(new OnClickListener() {
            public void onClick(View paramView) {
                s1.performClick();
            }
        }); 
```

当我单击按钮时，它会显示我的微调器，但问题是当我在该微调器中选择其中一些项目时，它不会显示 Toast 消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:42:28.233

我没试过，但你能检查一下吗？

```
 s1.setOnTouchListener(new OnTouchListener() { 
int positon;     
            public boolean onTouch(View v, MotionEvent event) {

          positon = s1.getSelectedItemPosition();

                        if(position==0) {
                                Toast.makeText(Activity.this, "TEST", Toast.LENGTH_LONG).show();
                            }
                        if(position==1) {
                            Toast.makeText(Activity.this, "TEST1", Toast.LENGTH_LONG).show();
                        }
                        if(position==2) {
                            Toast.makeText(Activity.this, "TEST2", Toast.LENGTH_LONG).show();
                        }
                }
  }
    }); 
```

# algorithm - 生成函数：更快地生成 F(n)

> ID：11385952
> 
> 赞同：1
> 
> 时间：2012-07-08T19:21:19.873
> 
> 标签：algorithm

我最近做了一个测试...这个问题说来话长，解决方案归结为 F(n) = 2*F(n-1) + 2*F(n-2)...

我有一个使用动态编程的 O(n) 解决方案......但是，考官并不满意......

我的解决方案是在计算时将每个 F(n) 简单地存储在一个数组中。花了 O(n) 时间。由于我们只需要前两个元素，因此只需使用两个变量，就可以解决空间问题。

但是 O(n) 还不够快...

该函数看起来像斐波那契函数，并且可以在 O(lg n) 时间内生成一个斐波那契数......但我无法为我的问题获得 O(lg n) 求解。

所以我的问题是如何提高函数的时间复杂度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T19:23:28.147

完全相同的方式。[以矩阵形式](http://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form)表达你的重复；这将问题减少到找到矩阵的 n 次方，[这可以在 log(n) 时间内完成](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T19:31:34.793

任何线性递推关系（就是这样）都有一个封闭的公式。

它涉及求解特征多项式，在这种情况下为：

```
t^2 - 2*t - 2 = 0   (since F(n) - 2 * F(n-1) - 2 * F(n-2) = 0) 
```

如果 t1 和 t2 是该二次方程的（复）解，则公式为：

```
F(n) = a * t1^n + b * t2^n 
```

其中 a 和 b 是常数，可以从初始条件（即本例中的 F(0) 和 F(1) 的值）中找到。IE

```
F(0) = a + b
F(1) = a * t1 + b * t2 
```

求解 a 和 b：

```
a = ( t2 * F(0) - F(1) ) / ( t2 - t1 )
b = ( t1 * F(0) - F(1) ) / ( t1 - t2 ) 
```

在这种特殊情况下，特征多项式的根是：

```
t1 = 1 + sqrt(3)
t2 = 1 - sqrt(3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:39:47.877

在您的解决方案中，您还使用了 O(n) 内存。

您可以使用简单的循环来计算第 n 个斐波那契元素：

您唯一需要保存的是最后 3 个 (a1,a2,a3) 元素，在每次迭代中，您将 a1 更新为 a2，将 a2 更新为 a3，并将 a3 更新为 old(a1) + old(a2) （您可以为此使用 2 个临时变量）。

所以我们得到了运行时 O(n) 只有 O(1) 内存的简单算法。

# php - 使用 Jquery、PHP 和 MySQL 保存元素的位置

> ID：11385958
> 
> 赞同：-4
> 
> 时间：2012-07-08T19:21:53.467
> 
> 标签：php, jquery, mysql, ajax

总的来说，我想保存元素的位置，当它下降时（例如，它是一个链接）：

```
<a class="icon" style="left:20px;top:20px;" href="some_href">
      <img src="some_src" />
      name
</a> 
```

具有此类的元素是可拖动的。我认为，这里一定是ajax，但如何正确地做到这一点 - 不知道。我是一个 php - mysql 程序员，所以 jQuery 和 JS 中的菜鸟 :( 感谢所有答案，对不起我的英语不好！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:28:49.047

我不知道*“保存元素的位置”*是什么意思，这有什么用，但您可以尝试 jQuery[`position()`](http://api.jquery.com/position/)和[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)方法：

> 获取匹配元素集中第一个元素相对于偏移父元素的当前坐标。

```
var t = $('a.icon').position().top;
var l = $('a.icon').position().left;

$.ajax({
  type: "POST",
  url: "save.php",
  data: { top: t, left: l}
}).done(function() {
  alert( "Position Saved");
}); 
```

# java - DESFire认证解密

> ID：11385963
> 
> 赞同：1
> 
> 时间：2012-07-08T19:22:43.700
> 
> 标签：java, mifare, encryption

我目前正在使用 DESFire EV1 非接触式卡。我正在尝试用主密钥解密 DES/CBC 加密的 random_b：“00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00”。

我正在使用这段代码：

```
byte[] encipheredCodeRandomB = { (byte)0xEA ,(byte)0x18 ,(byte)0xDE ,(byte)0xFF
     ,(byte)0x52 ,(byte)0x0E,(byte)0xCD, (byte) 90};
byte[] masterKeyBytes = "0000000000000000".getBytes();
byte[] ivBytes = "00000000".getBytes();

DESKeySpec desKeySpec = new DESKeySpec(masterKeyBytes);  
SecretKeyFactory desKeyFact = SecretKeyFactory.getInstance("DES");
SecretKey s = desKeyFact.generateSecret(desKeySpec);
aliceCipher = Cipher.getInstance("DES/CBC/NoPadding");
aliceCipher.init(Cipher.DECRYPT_MODE, s, new IvParameterSpec(ivBytes));

byte[] decipheredCodeRandomB = aliceCipher.doFinal(encipheredCodeRandomB); 
```

但这段代码没有正确破译。我得到这个无效的结果：“4B 9D 5A 91 AE 93 F8 ED”正确的是：“A4 2F 3E 84 2C 5A 29 68”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:26:04.503

如果您的主密钥*字节*全部为零，那么这是不正确的：

```
byte[] masterKeyBytes = "0000000000000000".getBytes(); 
```

这将为您提供平台默认编码中“0000000000000000”的文本编码形式 - 很可能`{ 0x30, 0x30, 0x30 ... }`

获取一个全零的数组很简单：

```
byte[] masterKeyBytes = new byte[16]; 
```

IV 也一样（当然，长度要合适）。

诚然，这仍然不能给你你正在寻找的结果......但它*使用*的是“全零”键/IV。

# c# - IsolatedStorageFile 的 MoveFile() 方法抛出 IsolatedStorageException

> ID：11385965
> 
> 赞同：3
> 
> 时间：2012-07-08T19:22:58.363
> 
> 标签：c#, windows-phone-7, isolatedstorage, isolatedstoragefile

描述：

下面的代码是我可以编写的最简单的代码，它会导致失败。我也尝试过：将 CreateFile 和 MoveFile 放在不同的 using 语句中，将它们放在不同的 xaml 页面中，将文件移动到具有新文件名的子目录中，将其移动到具有相同文件名的子目录中。他们都抛出相同的异常。CopyFile 在所有情况下都会引发相同的异常。

问题是——我没有考虑到什么难以置信的简单事情？

1.  打开面向 Windows Phone 7.1 的新 Silverlight for Windows Phone 7 项目。
2.  打开 App.xaml.cs。
3.  将以下代码行粘贴到 Application_Launching 中：

    ```
    使用 (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
    {
        isf.CreateFile("hello.txt");
        isf.MoveFile("hello.txt", "hi.txt");
    }
    ```

4.  单击开始调试，定位模拟器或设备。

预期：创建一个名为“hello.txt”的文件，然后（有效地）将“hello.txt”重命名为“hi.txt”。
实际：在下面抛出异常。

```
System.IO.IsolatedStorage.IsolatedStorageException 未处理
  消息=访问独立存储时发生错误。
  堆栈跟踪：
       在 System.IO.IsolatedStorage.IsolatedStorageFile.MoveFile（字符串源文件名，字符串目标文件名）
       在 PhoneApp4.App.Application_Launching（对象发送者，LaunchingEventArgs e）
       在 Microsoft.Phone.Shell.PhoneApplicationService.FireLaunching()
       在 Microsoft.Phone.Execution.NativeEmInterop.FireOnLaunching()

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:36:10.687

您应该`Close`在创建文件后调用。

```
IsolatedStorageFileStream helloFile = store.CreateFile("hello.txt");
helloFile.Close();
isf.MoveFile("hello.txt", "hi.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:05:30.347

我只是遇到了同样的问题，但解决方案很简单：
目标文件一定不存在，在移动之前将其删除。在删除之前确保目标文件没有在任何地方打开。
源文件不得在任何地方打开。

```
if (_isolatedStorage.FileExists(targetPath))
{
    _isolatedStorage.DeleteFile(targetPath);
}
_isolatedStorage.MoveFile(sourcePath, targetPath); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T11:15:06.847

完美执行这段代码

```
 var file = await ApplicationData.Current.LocalFolder.GetFileAsync(oldName);
  await file.RenameAsync(newName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T00:48:44.030

MBen，您的答案不正确。对文件调用 Close 并不能修复此错误。即使我在 MoveFile 之前调用“关闭”，我也看到了完全相同的错误。

*编辑* 好的，刚刚发现了我遇到的问题-如果您在destinationFile 已经存在时尝试调用MoveFile，它会引发异常。在将 sourceFile 移动到它之前，您必须先删除 destinationFile。

# c# - 将 VB.NET Web 窗体转换为 C# 并连接事件

> ID：11385967
> 
> 赞同：1
> 
> 时间：2012-07-08T19:23:47.677
> 
> 标签：c#

在我的 VB.NET 网页中，我有这个标准事件。请注意事件声明中的“处理”子句。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
End Sub 
```

在我的 C# web 应用程序中，我有这个：

```
protected void Page_Load(object sender, System.EventArgs e)
{ 
```

由于 C# 没有等效的“句柄”，并且据我所见，事件处理程序是使用委托 += 语法连接起来的，我一直在寻找这个，但我在 aspx 页面 aspx.cs 中找不到它文件或 aspx.designer.cs 文件。

在 VB 中，我将在代码编辑器窗口的顶部有两个下拉列表，我可以选择 Web 表单上的任何对象或 Web 表单本身，然后查看该对象的可能事件。选择事件会将我带到事件处理程序，或者如果它不存在，它将为我创建存根。

我知道 C# 中的“属性”窗口（我也认为是 VB）有一个“事件”选项卡，它显示所选对象 GUI 对象的事件列表，但“页面”并未显示为可以选择的对象。

1.  C# 在哪里定义事件到处理程序的连接？

2.  如何为 Page 事件处理程序例程生成存根？我知道句柄是默认出现的，但是如果它被删除或者我想添加一个Page_initialize代码怎么办？有没有一种简单的方法来获取存根，或者我需要去对象浏览器获取语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:26:05.040

> C# 在哪里定义事件到处理程序的连接？

`Page_Load`是一个自动连接的特殊事件。这是一个保留名称。因此，您无需执行任何操作即可连接此事件。只需在后面的代码中声明即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:37:20.127

在 C# Web 表单中，后面标记代码上的 @Page 指令 AutoEventWireup 属性默认为 true，而 VB 则为 false。要查看@Page 指令及其所有相关属性，请在解决方案资源管理器中右键单击您的网页并选择“查看标记”

如果 AutoEventWireup=true，运行时将自动连接它在代码中找到的与 Page_EventName 的命名约定形式匹配的事件处理*程序*。但是，您可以关闭此功能并使用标准 C# += 分配手动连接页面事件处理程序。如果您使用 AutoEventWireup=true，则不仅您的方法名称必须匹配，而且显然它还必须具有适当的方法签名，以便运行时自动连接。

有关 AutoEventWireup 的详细讨论，请参阅此 KB：http: [//support.microsoft.com/kb/324151](http://support.microsoft.com/kb/324151)

关于您的第二个问题，在 C# 中，无法像在 VB 中那样为页面事件生成“存根”。正如其他人（包括您自己）所指出的那样，C# 中有类似的功能可以通过属性窗口生成控制对象事件存根。但是，对于页面事件，您必须知道事件名称和适当的签名并自己编码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-26T13:20:54.440

```
namespace MyNamespace
{
    public class Myclass : System.Web.UI.Page
    {
        override protected void OnInit(EventArgs e)
        {
            this.Load += new System.EventHandler(this.Page_Load);
        }

        private void Page_Load(object sender, EventArgs e)
        {
        }
    }
} 
```

参考：[https ://support.microsoft.com/en-us/help/324151/how-to-use-the-autoeventwireup-attribute-in-an-asp-net-web-form-b​​y-usi](https://support.microsoft.com/en-us/help/324151/how-to-use-the-autoeventwireup-attribute-in-an-asp-net-web-form-by-usi)

# android - 框架布局左侧的按钮？

> ID：11385968
> 
> 赞同：1
> 
> 时间：2012-07-08T19:23:52.150
> 
> 标签：android, android-layout

在垂直线性布局中，我有 2 个文本视图，然后是一个按钮，然后是一个框架布局。

我希望按钮位于框架布局的左侧。我尝试将按钮放在相对布局中，但是如何告诉框架布局在右侧？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/content_container_white"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="30dp"
        android:text="@string/t0"
        android:textColor="@color/black"
        android:textSize="30dp" />
    <TextView
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/t1"
        android:textColor="@color/black" />
    <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/buybtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_marginLeft="30dp"
            android:text="@string/buy_button" />
    </RelativeLayout>
    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|right"
        android:layout_marginTop="10dp" >
        <ImageButton
            android:id="@+id/videothumb"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center_vertical"
            android:src="@drawable/button_play_on" />
        <ImageView
            android:id="@+id/videothumbimage"
            android:layout_width="380dp"
            android:layout_height="170dp"
            android:scaleType="centerCrop"
            android:src="@drawable/demo_thumb_home" />
    </FrameLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:38:16.007

您可以通过简单地告诉您的 FrameLayout 来做到这一点`android:layout_toRightOf="@+id/@+id/buybtn"`，但您的 FrameLayout 也必须在 RelativeLayout 内。

```
<RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <Button
        android:id="@+id/buybtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_marginLeft="30dp"
        android:text="@string/buy_button" />
    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|right"
        android:layout_marginTop="10dp"
        android:layout_toRightOf="@+id/@+id/buybtn" >
        <ImageButton
            android:id="@+id/videothumb"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center_vertical"
            android:src="@drawable/button_play_on" />
        <ImageView
            android:id="@+id/videothumbimage"
            android:layout_width="380dp"
            android:layout_height="170dp"
            android:scaleType="centerCrop"
            android:src="@drawable/demo_thumb_home" />
    </FrameLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:09:56.923

这个问题没有意义。从[文档](http://developer.android.com/reference/android/widget/FrameLayout.html)中：

> FrameLayout 的设计目的是在屏幕上屏蔽一个区域以显示**单个项目**。

强调我的。

如果您希望布局包含多个项目，请不要使用框架布局。用别的东西。

沙查尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T19:34:12.903

水平推`FrameLayout`入`RelativeLayout`或只是将按钮和框架放在一起`LinearLayout`-更简单的是

* * *

ps - 保持代码干净，使用`ctrl+shift+F`（如果使用 Eclipse）自动排列它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T19:34:19.957

将您的框架布局放在Relativelayout 中，然后设置属性对齐父级。

# visual-studio - 我可以在没有鼠标的情况下快速拨出 VS IDE 的字体大小吗？

> ID：11385972
> 
> 赞同：3
> 
> 时间：2012-07-08T19:24:11.003
> 
> 标签：visual-studio, ide, editor, mousewheel, font-size

也许这本身不是一个“编程问题”，但它与编码过程有关：

我喜欢 WPF 化的 VS IDE 的一个非常简洁的功能是能够按 Ctrl（我认为是）并使用鼠标滚轮在代码编辑器中快速更改字体大小。

对于效果很好的工作（台式电脑），但在家里，在我的笔记本电脑上，我无法弄清楚如何完成它（除了进入属性或其他地方并在那里更改字体大小，这显然不太“方便” （没有双关语））。

有没有一种快速的方法来更改编辑字体大小而无需借助通过菜单访问的对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:30:26.337

您可以在工具 -> 选项 -> 环境 -> 键盘快捷键中为 View.ZoomIn 和 View.ZoomOut 设置快捷键。我认为默认情况下它们是： CTRL + Shift + Comma 用于缩小和 CTRL + Shift + Period 用于放大。

[http://weblogs.asp.net/jgalloway/archive/2010/04/15/visual-studio-2010-zooming-keyboard-commands-global-zoom.aspx](http://weblogs.asp.net/jgalloway/archive/2010/04/15/visual-studio-2010-zooming-keyboard-commands-global-zoom.aspx)

`Tools -> Options -> Environment -> Format`是您可以根据需要进行更改的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:30:00.017

如果您没有滚轮，则必须创建自己的宏来执行此操作。查看这篇文章中的第一个答案： [在 Visual Studio 中更改字体大小的快捷方式](https://stackoverflow.com/questions/898964/shortcut-for-changing-font-size-in-visual-studio)

# scala - 如何在保持不变性的同时访问 Scala 中的复杂数据结构？

> ID：11385973
> 
> 赞同：2
> 
> 时间：2012-07-08T19:24:22.800
> 
> 标签：scala, data-structures, functional-programming, immutability

呼叫专家 Scala 开发人员！假设您有一个表示可写数据存储的大对象。您是否对这种常见的类似 Java 的方法感到满意：

```
val complexModel = new ComplexModel()
complexModel.modify()
complexModel.access(...) 
```

或者您更喜欢：

```
val newComplexModel = complexModel.withADifference
newComplexModel.access(...) 
```

如果您喜欢这样，并且您有一个客户端访问模型，那么客户端如何知道指向 newComplexModel 而不是 complexModel？从用户的角度来看，您拥有一个可变数据存储。您如何协调这种观点与 Scala 对不变性的强调？

这个怎么样：

```
var complexModel = new ComplexModel()
complexModel = complexModel.withADifference
complexModel.access(...) 
```

这似乎有点像第一种方法，只是 withADifference 内部的代码似乎比 modify() 内部的代码要做更多的工作，因为它必须创建一个全新的复杂数据对象，而不是修改现有的. （*您是否*遇到了必须做更多工作来尝试保持不变性的问题？）此外，您现在有一个大范围的 var。

您将如何决定最佳策略？您选择的策略有例外吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:22:15.327

I think the functional way is to actually have Stream containing all your different versions of your datastructure and the consumer just trying to pull the next element from that stream.

But I think in Scala it is an absolutely valid approach to a mutable reference in one central place and change that, while your whole datastructure stays immutable.

When the datastructure becomes more complex you might be interested in this question: [Cleaner way to update nested structures](https://stackoverflow.com/questions/3900307/cleaner-way-to-update-nested-structures) which asks (and gets answered) how to actually create new change versions of an immutable data structure that is not trivial.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:41:58.290

您的问题的规范答案是使用[Zipper](http://en.wikipedia.org/wiki/Zipper_%28data_structure%29)，这是一个关于它的 SO[问题](https://stackoverflow.com/questions/380438/what-is-the-zipper-data-structure-and-should-i-be-using-it)。

我所知道的 Scala 的唯一实现是在[ScalaZ](http://code.google.com/p/scalaz/)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T22:33:49.460

通过这样的方法名称，`modify`只有很容易将您识别`ComplexModel`为 mutator 对象，这意味着它会更改某些状态。这仅意味着这种对象与函数式编程无关，并试图使其不可变只是因为知识有问题的人告诉您 Scala 中的所有内容都应该是不可变的，这只是一个错误。

现在您可以修改您的 api 以便`ComplexModel`它对不可变数据进行操作，我顺便认为您应该这样做，但您绝对不能尝试将其转换`ComplexModel`为不可变数据本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T20:26:58.173

不变性只是一个有用的工具，而不是教条。将出现不变性的成本和不便超过其有用性的情况。

a 的大小`ComplexModel`可能使得创建修改后的副本在内存和/或 CPU 方面足够昂贵，因此可变模型更实用。

# objective-c - 添加新引脚后更改区域

> ID：11385974
> 
> 赞同：0
> 
> 时间：2012-07-08T19:24:24.787
> 
> 标签：objective-c, ios, mapkit

当我加载我的 mapView 时，我只有一个勾号 - 用户位置。经过一些操作后，我添加了更多引脚。但焦点仍然在用户位置。我想放大图像以查看所有目标。我怎样才能做到这一点？我的代码：

```
-(void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views {
    if (views.count == 1) {
        MKAnnotationView *annotationView = [views objectAtIndex:0];
        id<MKAnnotation>mp = [annotationView annotation];
        MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 500, 500);
        [mapView setRegion:region animated:YES]; 
    } else {
        for (NSUInteger i = 0; i<views.count; i++) {
            [mapView addAnnotation:[views objectAtIndex:i]];
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:28:28.427

MkCoordinateRegion 有一个名为 span 的成员。为了放大/缩小，您必须使用该值：

```
region.span.longitudeDelta = aValue;
region.span.latitudeDelta = aValue; 
```

希望这可以帮助。

干杯!

# python - Django - 通用视图中的查询集与模型

> ID：11385976
> 
> 赞同：5
> 
> 时间：2012-07-08T19:24:53.497
> 
> 标签：python, django, django-views, django-queryset, django-generic-views

我是 Django 的新手，想知道在像 ListView 这样的通用视图中定义模型与查询集有什么区别。这是我在项目的 urls.py 文件中的代码示例：

```
urlpatterns = patterns('',
    url(r'^$', ListView.as_view(
    model=Person,
    context_object_name='people',
    template_name='index.html', 
    )),
) 
```

我也用过这个：

```
urlpatterns = patterns('',
    url(r'^$', ListView.as_view(
    queryset=Person.objects.all,
    context_object_name='people',
    template_name='index.html', 
    )),
) 
```

并在我看来得到了相同的结果。我假设您可以使用查询集做不同的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T19:29:38.603

使用`model=Person`或`queryset=Person.objects.all`给出相同的结果。

让我们看一下代码。A`ListView`有以下方法：

```
def get_queryset(self):
    """
    Get the list of items for this view. This must be an interable, and may
    be a queryset (in which qs-specific behavior will be enabled).
    """
    if self.queryset is not None:
        queryset = self.queryset
        if hasattr(queryset, '_clone'):
            queryset = queryset._clone()
    elif self.model is not None:
        queryset = self.model._default_manager.all()
    else:
        raise ImproperlyConfigured(u"'%s' must define 'queryset' or 'model'"
                                   % self.__class__.__name__)
    return queryset 
```

如您所见，它首先查找`self.queryset`and，如果不存在，则查找`self.model`. 所以指定一个列表有两种可能：你可以自己提供一个查询集，或者你可以指定一个模型类（在这种情况下，Django 将调用`all()`默认管理器的方法，即`objects`）。

> 我假设您可以使用查询集做不同的事情？

是的。如果您指定 a `model`，则默认情况下您将获得所有实例。但是，如果您指定 a `queryset`，您还可以调用模型管理器的其他方法，例如`Person.objects.children()`只能返回带有 的人员`age <= 12`。

# c++ - 是否可以迭代`const向量 `?

> ID：11385984
> 
> 赞同：2
> 
> 时间：2012-07-08T19:26:50.330
> 
> 标签：c++, std

是否可以迭代 a `const vector<int>`？或者，这无论如何都是不可取的？

鉴于我有`getIntVector`返回 a 的函数，`vector<int>`我可以使用以下内容对其进行迭代：

```
vector<int> vec = getIntVector();
vector<int>::iterator it;
for (it=vec.begin();it!=vec.end();++it) {} 
```

但我不能做以下事情：

```
const vector<int> vec = getIntVector();
vector<int>::iterator it;
// complier throws error below
for (it=vec.begin();it!=vec.end();++it) {} 
```

我的想法是不会通过将向量声明为`const`...来重新创建向量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T19:30:07.787

1）您需要[`vector<int>::const_iterator`](http://en.cppreference.com/w/cpp/container/vector/begin)遍历“const”容器

2）您的矢量仍将被复制；这可能是可取的，也可能不是可取的。我喜欢返回参考...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-08T19:32:54.920

如果您使用的是 C++11，则可以使用`auto`, 并让编译器从初始化中推断类型：

```
for (auto it=vec.begin(); it!=vec.end(); ++it) 
   //^^^^ compiler will infer the type using the initialization expression 
```

但是，在 C++03 中，您必须使用`const_iterator`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-08T19:28:45.540

改为使用[`vector<int>::const_iterator`](http://en.cppreference.com/w/cpp/container/vector/begin)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-08T19:29:14.627

您可以使用`vector<int>::const_iterator`.

# asp.net - ASP.NET MVC 在主机上运行缓慢？

> ID：11385993
> 
> 赞同：3
> 
> 时间：2012-07-08T19:28:30.647
> 
> 标签：asp.net, asp.net-mvc, performance

我已经将我的[ASP.NET MVC(3) 网站](http://www.biss.se)上传到我的主机，但它的网站在第一次加载所有页面时速度要慢很多（即使没有数据获取）？

我第一次访问`7.30 s`起始页需要，如果我在 1 分钟后点击重新加载将需要`1.05 s`，如果我重复点击重新加载，它会给我介于`500 ms`and之间`800 ms`。

如果我在大约 5 分钟后返回并点击重新加载，我会`7 s`再次加载吗？

如果我从本地主机（IIS7）运行相同的 websight，我将`1 s`第一次获得，然后`650 ms`快速重新加载。

该网页正在使用数据库，但在两种情况下它都是相同的数据库（放置在我的主机上）。

网页是[www.biss.se](http://www.biss.se)

我应该从哪里开始看？

编辑：

这是我的 Application_Start()

```
protected void Application_Start()
{
    AccountModel accountModel = new AccountModel();
    AreaRegistration.RegisterAllAreas();

    RegisterRoutes(RouteTable.Routes);
    MappingHandler.RegisterMappings();

    #region Register Extra DataNotations for Display Attribute
    ModelMetadataProviders.Current = new DisplayMetaDataProvider();
    #endregion

    if (!accountModel.CheckIfAdminAccountExists("adminAccount"))
    {
        accountModel.CreateUser("adminAccount",
                                    "Admin",
                                    "Admin",
                                    "",
                                    "",
                                    postCode: "",
                                    locationId: "",
                                    inactive: false,
                                    siteRole: Controllers.SiteRoles.Admin,
                                    activatedByUser: true);
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T19:31:36.223

当第一个请求到达 ASP.NET 应用程序时，该应用程序由 Web 服务器通过创建 AppDomain 加载到内存中，并执行 Application_Start 中的代码。此过程可能需要更多或更少的时间，具体取决于您在此事件中执行的操作以及要加载的程序集的数量。在一段时间不活动或达到某些内存/CPU 阈值后，IIS 可以回收应用程序并将其从内存中卸载。在下一个请求中重复相同的过程。

所以基本上你应该寻找的是你在你的`Application_Start`事件中执行的任务，这些任务是在第一次请求时执行的。如果这些任务涉及 I/O 操作，例如数据库访问或其他内容，您可以记录执行它们所需的时间。通过这种方式，您将能够查明需要很长时间的代码的确切过程，并能够在取决于您的情况下修复它，或者如果它是他们方面的问题，请联系您的托管服务提供商。

MiniProfiler是用于此分析目的的绝佳工具[。](http://miniprofiler.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:25:03.770

您应该查看您的 IIS 设置。IIS 会关闭一段时间内未受到请求访问的所有站点。

因此，如果几分钟内没有请求，站点将从内存中卸载并需要

这就是您在本地和远程机器上具有不同行为的原因。有时主机会阻止此设置，原因是一台虚拟机上客户端的内存使用率低。

我不记得要更改的设置。应该有人给出更肯定的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T14:10:28.520

与在 IIS8 Windows2012 服务器上运行的 ASP.MVC3 应用程序具有相同的行为。

如果您确定自己在做什么，您可以配置 IIS 以保持您的应用程序池处于活动状态。

可以[在 G+ 上找到解决方案](https://plus.google.com/u/0/112894009892645969530/posts/HzAiGUqqy8j?rel=author)

最重要的是为应用程序池配置空闲超时设置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-10T00:34:38.550

如果您转到高级设置，应用程序池，那么您可以看到最大工作进程属性并将值设置为 2，而不是 1。

我以这种方式解决了我的问题。