# StackOverflow 问答 11773000-11773999

# php - 更改 URL 中的文件夹路径

> ID：11773000
> 
> 赞同：-1
> 
> 时间：2012-08-02T07:38:00.033
> 
> 标签：php, url

假设我有一个网站“ `www.mywebsite.com`”。我在“foo”中有一个名为“foo”的文件夹和另一个名为“bar”的文件夹。在“bar”文件夹中，我有“aydin.php”文件。

所以，URL 看起来像这样：

```
www.mywebsite.com/foo/bar/aydin.php 
```

但是，我希望它看起来像这样：

```
www.mywebsite.com/bar/aydin.php 
```

或者

```
www.mywebsite.com/abc/aydin.php 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:41:56.087

您可以将 URL 重写与 .htaccess 文件一起使用。[你可以在这里](http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/)找到一些信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:46:51.723

您必须使用[mod_rewrite 模块](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

在你的情况下，我认为 .htaccess 文件应该是这样的：

```
AddDefaultCharset On
AddDefaultCharset utf-8

<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} !^(www\.|$) [NC]
    RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

    RewriteRule ^/abc/aydin.php$ /foo/bar/aydin.php [L,QSA]

</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:41:39.033

几个选项：

*   将 webroot 更改为 /foo。
*   使用 URL 重写。URL 重写允许您以任何您想要的方式转换 URL。它通常是您的 Web 服务器（例如[IIS](http://www.iis.net/download/urlrewrite)、[Apache](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）的一个功能。
*   创建一个 bar.php 文件来处理对 /bar/blahblah 的所有请求。

# facebook - Facebook API：向朋友发送消息仅适用于测试/管理员用户

> ID：11773001
> 
> 赞同：1
> 
> 时间：2012-08-02T07:38:09.300
> 
> 标签：facebook, facebook-graph-api, message

我正在开发一个网站，作为其中的一部分，我们允许用户邀请他们的朋友。使用以下代码

```
// assume we are already logged in
  FB.init({appId: 'xxxxxxxx49030', xfbml: true, cookie: true});
  function sendInvites(fb_ids) {
                var link_url = "<?php echo base_url()?>invited/?code=100627510332492694";
                FB.ui({
                    method: "send",
                    to: fb_ids,
                    name: "Join example.com",
                    description: "hello",
                    picture: "http://www.example.com/images/logo-orange.png",
                    link: link_url
                }, function(response) {
                    alert(response)
                    if (!response){

                        return;
                    }

                    $.post("/invite/new/", {
                        fb_ids: fb_ids
                    }, function(data) {
                        if (data.status == "success") {
                            alert(data.status);
                        } else {
                            alert(data.message);
                        }
                    }, "json");
                });
            } 
```

不明白缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T09:37:47.170

Fbids 应该是一个数组，我错过了它。它现在正在工作。

# openerp - “存款”对象没有属性“get_move_line”

> ID：11773004
> 
> 赞同：1
> 
> 时间：2012-08-02T07:38:34.387
> 
> 标签：openerp

希望朋友们能帮帮我。

我有我创建的代码，目标是在日记帐分录中输入一个值。那是我的代码。

```
class deposit(osv.osv):
    _name='deposit.travel'
    _description='Deposit2 Travel'

    def action_process(self, cr, uid, ids, context=None):
        move_lines = []
        for deposit in self.browse(cr, uid, ids, context=context):
            # Create the move lines first
            move_lines.append((0,0, self.get_move_line(cr, uid, deposit, 'src')))
            #print deposit
            move_lines.append((0, 0, self.get_move_line(cr, uid, deposit, 'dest')))
            # Create the move for the deposit
            move = {
                'journal_id': deposit.journal_id.id,
                'date': deposit.date,
                'deposit_id': deposit.id,
                'name':'/',
                'line_id': move_lines
            }
            move_id = self.pool.get('account.move').create(cr, uid, move, context=context)
            self.pool.get('account.move').post(cr, uid, [move_id])
            self.write(cr, uid, [deposit.id], {'move_id': move_id,
                                              'state': 'done'},context=context)
        return True

        def get_move_line(self, cr, uid, deposit, type, context=None):
            return {
                'type': type,
                'name': deposit.name or '/',
                'debit': type == 'dest' and deposit.amount or 0.0,
                'credit': type == 'src' and deposit.amount or 0.0,
                'account_id': type == 'src' and deposit.dept_from.id or deposit.dept_to.id,
                'date': deposit.date,
                'deposit_id': deposit.id
            }
     _columns = {
        'partner':fields.many2one('res.partner','Partner',required=True),
        'date':fields.date('Date of Deposit',required=True),
        'period_id':fields.many2one('account.period','Force Period', required=True),
        'journal_id':fields.many2one('account.journal','Journal', required=True),
        'amount':fields.float('Amount',required=True,digits_compute=dp.get_precision('Account')),
        'move_id':fields.many2one('account.move','Journal Entry', readonly=True, select=1),
        'name':fields.related('move_id','name',type='char',readonly=True, size=64, relation='account.move',string='Deposit Ticket #'),
        'dept_from':fields.many2one('account.account','Deposit From'),
        'dept_to':fields.many2one('account.account','Deposit To'),
        'state': fields.selection([
            ('draft','Draft'),
            ('to_be_reviewed','Ready for Review'),
            ('done','Done'),
            ('cancel', 'Cancel')
            ],'State', select=True, readonly=True),
        }
         _defaults = {
        'date': time.strftime('%Y-%m-%d'),
        'period_id':_get_period,
        'state': 'draft',
         }
deposit() 
```

但是当我单击放置命令**action_process**的按钮时，会出现错误，例如这个**'deposit' 对象没有属性 'get_move_line'**。get_move_line 是一个函数，为什么属性错误？我需要你的帮助。谢谢之前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:54:42.670

function 的缩进不正确`get_move_line`。取消缩进功能一个选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:29:55.773

它应该像这样 _default 也应该在某个缩进级别：

```
class deposit(osv.osv):
    _name='deposit.travel'
    _description='Deposit2 Travel'

    def action_process(self, cr, uid, ids, context=None):
        move_lines = []
        for deposit in self.browse(cr, uid, ids, context=context):
            # Create the move lines first
            move_lines.append((0,0, self.get_move_line(cr, uid, deposit, 'src')))
            #print deposit
            move_lines.append((0, 0, self.get_move_line(cr, uid, deposit, 'dest')))
            # Create the move for the deposit
            move = {
                'journal_id': deposit.journal_id.id,
                'date': deposit.date,
                'deposit_id': deposit.id,
                'name':'/',
                'line_id': move_lines
            }
            move_id = self.pool.get('account.move').create(cr, uid, move, context=context)
            self.pool.get('account.move').post(cr, uid, [move_id])
            self.write(cr, uid, [deposit.id], {'move_id': move_id,
                                              'state': 'done'},context=context)
        return True

    def get_move_line(self, cr, uid, deposit, type, context=None):
        return {
            'type': type,
            'name': deposit.name or '/',
            'debit': type == 'dest' and deposit.amount or 0.0,
            'credit': type == 'src' and deposit.amount or 0.0,
            'account_id': type == 'src' and deposit.dept_from.id or deposit.dept_to.id,
            'date': deposit.date,
            'deposit_id': deposit.id,}

    _columns = {
        'partner':fields.many2one('res.partner','Partner',required=True),
        'date':fields.date('Date of Deposit',required=True),
        'period_id':fields.many2one('account.period','Force Period', required=True),
        'journal_id':fields.many2one('account.journal','Journal', required=True),
        'amount':fields.float('Amount',required=True,digits_compute=dp.get_precision('Account')),
        'move_id':fields.many2one('account.move','Journal Entry', readonly=True, select=1),
        'name':fields.related('move_id','name',type='char',readonly=True, size=64, relation='account.move',string='Deposit Ticket #'),
        'dept_from':fields.many2one('account.account','Deposit From'),
        'dept_to':fields.many2one('account.account','Deposit To'),
        'state': fields.selection([
            ('draft','Draft'),
            ('to_be_reviewed','Ready for Review'),
            ('done','Done'),
            ('cancel', 'Cancel')
            ],'State', select=True, readonly=True),
    }

    _defaults = {
        'date': time.strftime('%Y-%m-%d'),
        'period_id':_get_period,
        'state': 'draft',
    }

deposit() 
```

# iphone - 以编程方式使 uiviews 适应 iPad / iPhone 屏幕

> ID：11773010
> 
> 赞同：2
> 
> 时间：2012-08-02T07:38:55.373
> 
> 标签：iphone, ipad, uiview, scaling, transformation

我制作了一个具有许多从 UIView 子类化的视图的应用程序。这些视图的大小和方向是随机的，并且可以保存应用程序屏幕的状态。当用户在打开屏幕的同一设备上保存屏幕时，屏幕状态为 OK。一切都正确定位。但是，如果用户将屏幕状态保存在 iPhone 上并从 iPad 打开，则视图位置不正确。实际上视图看起来更短或更长，中心似乎被正确保存，但视图的旋转及其大小（边界属性）无法正常工作。

这是保存和恢复视图状态的两种方法

```
- (void)encodeWithCoder:(NSCoder *)aCoder {
    // Save the screen size of the device that the view was saved on
    [aCoder encodeCGSize:self.gameView.bounds.size forKey:@"saveDeviceGameViewSize"];

    // ****************
    // ALL properties are saved in normalized coords
    // ****************

    // Save the center of the view
    CGPoint normCenter = CGPointMake(self.center.x / self.gameView.bounds.size.width, self.center.y / self.gameView.bounds.size.height);
    [aCoder encodeCGPoint:normCenter forKey:@"center"];

     // I rely on view bounds NOT frame
    CGRect normBounds = CGRectMake(0, 0, self.bounds.size.width / self.gameView.bounds.size.width, self.bounds.size.height / self.gameView.bounds.size.height);
    [aCoder encodeCGRect:normBounds forKey:@"bounds"];

     // Here I save the transformation of the view, it has ONLY rotation info, not translation or scalings
    [aCoder encodeCGAffineTransform:self.transform forKey:@"transform"];
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {

        // Restore the screen size of the device that the view was saved on
        saveDeviceGameViewSize = [aDecoder decodeCGSizeForKey:@"saveDeviceGameViewSize"];

        // Adjust the view center
        CGPoint tmpCenter = [aDecoder decodeCGPointForKey:@"center"];
        tmpCenter.x *= self.gameView.bounds.size.width;
        tmpCenter.y *= self.gameView.bounds.size.height;
        self.center = tmpCenter;

        // Restore the transform
        self.transform = [aDecoder decodeCGAffineTransformForKey:@"transform"];

        // Restore the bounds
        CGRect tmpBounds = [aDecoder decodeCGRectForKey:@"bounds"];
        CGFloat ratio = self.gameView.bounds.size.height / saveDeviceGameViewSize.height;
        tmpBounds.size.width *= (saveDeviceGameViewSize.width * ratio);
        tmpBounds.size.height *= self.gameView.bounds.size.height;
        self.bounds = tmpBounds;
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:29:56.807

如何在 iPhone 和 iPad 版本之间分离视图状态？对于每台设备，如果尚未保存该设备的配置，则仅使用默认值？我还没有看到你的 UI，但我认为一般来说这样的解决方案会运作良好，更容易实施，并且也符合用户的期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:13:04.343

很大程度上取决于您何时应用转换。当您加载视图时，我会建议以下步骤：
1\. 加载视图边界
2\. 加载视图中心
3\. 加载转换

这段代码也有问题。在设置中心后设置界限。这是完全错误的，因为 bounds 属性不会一直有效。尝试执行我描述的步骤并报告结果，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:06:19.037

可以`self.gameView.bounds`根据您使用的设备进行更改吗？如果答案是肯定的，我看到了一个问题，因为您正在`centre`通过 gameView 边界大小存储标准化后，但是当您恢复时，您`centre`通过将其乘以*存储*的值`gameView.bounds`而不是`gameView.bounds`for的值来取消标准化它当前设备。

此外，代码`// Restore the bounds`看起来是错误的，因为在设置的行中，`tmpBounds.size.width =`您正在执行涉及宽度和比率的计算，该比率是两个宽度的比率。换句话说，没有任何`height`看起来是错误的。也许应该是以下？

```
// note: height, not width, used on RHS
tmpBounds.size.width *= (saveDeviceGameViewSize.height * ratio); 
```

为了通常继续解决此问题（如果上述方法没有帮助）：您需要

a) 验证你正在实现的东西是否有意义（即你头脑中的算法），并且

b）通过分析您的代码并在保存+恢复代码上进行一些明智的调试/NSLogging来验证您是否做对了

# c# - 自动完成未触发

> ID：11773013
> 
> 赞同：1
> 
> 时间：2012-08-02T07:39:00.533
> 
> 标签：c#, javascript

下面的一切看起来都很好，我提供了 3 个部分，如果查询，服务可以正常工作。

```
/// <summary>
/// Summary description for AutoCompleteService
/// </summary>
[WebService(Namespace = "http://schemas")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class AutoCompleteService : BaseWebService
{
    /// <summary>
    /// Gets or sets the account finder service.
    /// </summary>
    public ICheckoutService CheckOutService { get; set; }

    /// <summary>
    /// Finds all addresses matching either the postcode or suburb given in the prefix text.
    /// </summary>
    /// <param name="prefixText">The prefix text.</param>
    /// <param name="count">The count.</param>
    /// <returns>Aray of address details</returns>
    [WebMethod]
    public string[] FindAddresses(string prefixText, int count)
    {
        //Check the parameters
        if (count == 0) count = 10;
        var suburbs = CheckOutService.FindMatchingForPartialAddress(prefixText);
        return suburbs.Take(count).ToArray();

    }
} 
```

其次是javascript

```
<script language="javascript">

$(function () {
    $("#postcode").autocomplete({
        source: "AutoCompleteService.asmx/FindAddresses",
        minLength: 1,
        select: function (event, ui) {
            $(this).val(ui.item.value);
        }
    });
});
</script> 
```

后跟文本框

```
 <asp:TextBox runat="server" name="postcode" id="postcode" ></asp:TextBox> 
```

回复

```
 <ArrayOfStringxmlns: xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:    xsd="http://www.w3.org/2001/XMLSchema"xmlns="http://schemas.forcetechnology.com.au/2009/04/Fulfilment"><string>ABBARIVER,WA,6280</string><string>ABBEY,WA,6280</string><string>ACTONPARK,WA,6280</string>string>ADAMSVALE,WA,6375</string></ArrayOfString> 
```

好的，我做了以下更改，谢谢大家为我指明了正确的方向，也为我提供了一个起点，这也给了我错误信息，这有助于所以修改如下。

```
 [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string[] FindAddresses(string prefixText)
    {
        //Check the parameters

        var suburbs = CheckOutService.FindMatchingForPartialAddress(prefixText);
        return suburbs.ToArray();

    }

     $(document).ready(function () {
    $('[ID$=postcode]').live('keyup.autocomplete', function () {

        $(this).autocomplete({
            source: function (request, response) {
                alert(request.term);
                $.ajax({
                    url: '<%=ResolveUrl("AutoCompleteService.asmx/FindAddresses") %>',
                    data: "{ prefixText:'" + request.term + "'}",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        response($.map(data.d, function (item) {
                            return {
                                label: item.split('-')[0],
                                val: item.split('-')[1]
                            }
                        }))
                    },
                    error: function (response) {
                        alert(response.responseText);
                    },
                    failure: function (response) {
                        alert(response.responseText);
                    }
                });
            },
            select: function (e, i) {
            },
            minLength: 1
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:44:19.417

如果自动完成是 JQueryUI 并且您希望为自动完成提供一些自定义参数，那么您将需要提供一个函数来设置源。[看看here，](http://jqueryui.com/demos/autocomplete/#custom-data) 这应该可以帮助您定义它。

同样正如@Shadow-Wizzard 所说，您可能需要确保您拥有正确的 id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:50:44.217

试试下面的代码。这对我有用..

```
 $(document).ready(function () {
        $('[ID$=txtLastname]').live('keyup.autocomplete', function () {

            $(this).autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '<%=ResolveUrl("~/Resources/WebService.asmx/LastName") %>',
                        data: "{ 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    label: item.split('-')[0],
                                    val: item.split('-')[1]
                                }
                            }))
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                },
                minLength: 1
            });
        }); 
```

网络方法是

```
 [WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string[] LastName(string prefix)
{
    List<string> customers = new List<string>();
    using (SqlConnection conn = new SqlConnection())
    {
        string connectionstring = CCMMUtility.GetCacheForWholeApplication();
        conn.ConnectionString = connectionstring;
        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.CommandText = "select distinct top(10) Lastname from tblusers where  " +
            "Lastname  like '%'+ @SearchText + '%' order by Lastname";
            cmd.Parameters.AddWithValue("@SearchText", prefix);
            cmd.Connection = conn;
            conn.Open();
            using (SqlDataReader sdr = cmd.ExecuteReader())
            {
                while (sdr.Read())
                {
                    customers.Add(string.Format("{0}", sdr["Lastname"]));
                }
            }
            conn.Close();
        }
        return customers.ToArray();
    }
} 
```

# html - 如何减小 primefaces 中 gmapInfoWindow 的窗口大小？

> ID：11773016
> 
> 赞同：0
> 
> 时间：2012-08-02T07:39:21.227
> 
> 标签：html, css, jsf-2, primefaces

如何减小 primefaces 中 gmapInfoWindow 的窗口大小？

根据我所看到的，maxWidth 根本不起作用，因为我将它设置为 50 为 50 像素，但窗口的大小始终为 247 像素。

有没有办法改变它？

这是直接来自 chrome 的 div 标签：

```
<div style="position: absolute; left: 0px; top: 0px; width: 247px; height: 88px; overflow: hidden; -webkit-user-select: none; background-color: white; border: 1px solid rgb(171, 171, 171); "></div> 
```

这是 gmap 的 gmapInfoWindowCode：

```
<p:gmap>
    <p:gmapInfoWindow id="infoWindow">
                <table border="0" padding="0" cellspacing="0">
                    <tr class="custom-header-tr"><td><h:outputText value="#{mapBean.marker.data.name}"/></td></tr>
                    <tr class="custom-tr"><td class="custom-td"><p:commandLink action="#{mapBean.marker.data.ping()}" styleClass="custom-link" update="infoMessages">Ping Device</p:commandLink></td></tr>
                    <tr class="custom-tr"><td class="custom-td"><p:commandLink action="#{mapBean.marker.data.syncToDevice()}" styleClass="custom-link" update="infoMessages">Sync to Device</p:commandLink></td></tr>
                    <tr class="custom-tr"><td class="custom-td"><p:commandLink action="#{mapBean.marker.data.syncFromDevice()}" styleClass="custom-link" update="infoMessages">Sync from Device</p:commandLink></td></tr>
                    <tr class="custom-tr"><td class="custom-td"><p:commandLink action="#{mapBean.marker.data.checkSync()}" styleClass="custom-link" update="infoMessages">Check Sync</p:commandLink></td></tr>
                </table> 
            </p:gmapInfoWindow>
        </p:gmap> 
```

![截屏](../Images/a66c73c893a00aec0f804f1a0764b141.png)

# .net - Entity Framework Code First: One-to-One where PK is a FK

> ID：11773021
> 
> 赞同：2
> 
> 时间：2012-08-02T07:39:55.647
> 
> 标签：.net, entity-framework, code-first, .net-4.5, entity-framework-5

I'd like to map a *one-to-one* relationship using **Entity Framework 5 Code First** like this:

```
public class User
{
     public Guid Id { get; set; }
}

public class Profile
{
     public User Owner { get; set; }
} 
```

Note that database **Profile table** schema has a **primary key** `UserId` that's a **foreign key** to *Users* table.

I'd like to know if I can avoid an *artificial identifier* in **Profiles table**.

Thank you in advance!

* * *

* * *

**UPDATE**

Well, it seems that both answers of **Eranga** and **hvd** are useful. With some own contribution, I got a transaction creating an user with the belonging profile successfully.

*   **hvd** => *There's no need of the artificial identifier in the object model*.
*   **Erlanga** => Your approach works BUT *it forces you to have an [Id] column in the database*.

Does anyone found a way of avoiding the artificial identifier even in the database table?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:55:45.560

Use the fluent API to map the relationship.

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
 {
     modelBuilder.Entity<Profile>()
        .HasRequired(p => p.Owner)
        .WithOptional();
 } 
```

**Update:**

One-to-One relationships can only be modeled in using the mapping technique called "Shared Primary Key". That is the PK of the dependent entity is also an FK. There is no *artificial identifier* involved in the dependent entity(ie. `Profile`) because it refers to the PK values of independent entity (ie. `User`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:08:19.723

This is how I do it (classes renamed to match your situation):

```
public class User
{
    public Guid Id { get; set; }
    public Profile Profile { get; set; }
}

public class Profile
{
    public Guid OwnerId { get; set; }
    public User Owner { get; set; }
}

var userConfiguration = modelBuilder.Entity<User>();
userConfiguration.HasKey(u => u.Id);
userConfiguration.HasOptional(u => u.Profile).WithRequired(p => p.Owner);

var profileConfiguration = modelBuilder.Entity<Profile>();
profileConfiguration.HasKey(p => p.OwnerId);
profileConfiguration.HasRequired(p => p.Owner).WithOptional(u => u.Profile); 
```

The `HasOptional(u => u.Profile).WithRequired(p => p.Owner)` tells EF that `p.Owner` should be mapped to the primary key, which is `OwnerId`. You *should* be able to make this work without `OwnerId` or `Profile` properties, but this is what works for me, and allows for further configuration of those properties.

# xslt - 使用 xslt 将空映射到节点

> ID：11773022
> 
> 赞同：0
> 
> 时间：2012-08-02T07:40:07.060
> 
> 标签：xslt, map, biztalk, altova

我正在使用“Altova MapForce”映射工具，并且正在将节点映射到节点。结果 xml（使用 altova xslt 处理器）没有非空节点。生成的 xml（使用 biztalk xslt 处理器，以及从 Altova Mapforce 生成的 xsl）包含非空节点。源上的节点是空的。

我的目标是将源节点（使用 Altova MapForce 映射工具）连接到自定义编写的 XSLT，然后将其连接到目标。

这是我的代码： in.xml - 用于执行地图的实例输入（请注意空的 id 标签：）

```
<ns0:Root xmlns:ns0="http://BizTalk_Server_Project1.Schema1">
  <id root="root_0" extension="extension_1" />
</ns0:Root> 
```

Schema1.xsd - 源和目标模式

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns="http://BizTalk_Server_Project1.Schema1" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" targetNamespace="http://BizTalk_Server_Project1.Schema1" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id">
          <xs:complexType>
            <xs:attribute name="root" type="xs:string" />
            <xs:attribute name="extension" type="xs:string" />
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

New.mfd - Altova 映射文件

```
<?xml version="1.0" encoding="UTF-8"?>
<mapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="19">
    <component name="defaultmap1" blackbox="0" uid="1" editable="1">
        <properties SelectedLanguage="xslt"/>
        <structure>
            <children>
                <component name="document" library="xml" uid="4" kind="14">
                    <properties/>
                    <view rbx="150" rby="200"/>
                    <data>
                        <root>
                            <header>
                                <namespaces>
                                    <namespace/>
                                    <namespace uid="http://BizTalk_Server_Project1.Schema1"/>
                                    <namespace uid="http://www.altova.com/mapforce"/>
                                </namespaces>
                            </header>
                            <entry name="FileInstance" ns="2" expanded="1">
                                <entry name="document" ns="2" expanded="1" casttotargettypemode="cast-in-subtree">
                                    <entry name="Root" ns="1" expanded="1">
                                        <entry name="id" expanded="1">
                                            <entry name="extension" type="attribute" outkey="4"/>
                                        </entry>
                                    </entry>
                                </entry>
                            </entry>
                        </root>
                        <document schema="Schema1.xsd" outputinstance="Schema1.xml" instanceroot="{http://BizTalk_Server_Project1.Schema1}Root"/>
                        <wsdl/>
                    </data>
                </component>
                <component name="document" library="xml" uid="5" kind="14">
                    <properties XSLTDefaultOutput="1"/>
                    <view ltx="593" rbx="743" rby="200"/>
                    <data>
                        <root>
                            <header>
                                <namespaces>
                                    <namespace/>
                                    <namespace uid="http://BizTalk_Server_Project1.Schema1"/>
                                    <namespace uid="http://www.altova.com/mapforce"/>
                                </namespaces>
                            </header>
                            <entry name="FileInstance" ns="2" expanded="1">
                                <entry name="document" ns="2" expanded="1" casttotargettypemode="cast-in-subtree">
                                    <entry name="Root" ns="1" expanded="1">
                                        <entry name="id" expanded="1">
                                            <entry name="extension" type="attribute" inpkey="5"/>
                                        </entry>
                                    </entry>
                                </entry>
                            </entry>
                        </root>
                        <document schema="Schema1.xsd" outputinstance="Schema1.xml" instanceroot="{http://BizTalk_Server_Project1.Schema1}Root"/>
                        <wsdl/>
                    </data>
                </component>
            </children>
            <graph directed="1">
                <edges/>
                <vertices>
                    <vertex vertexkey="4">
                        <edges>
                            <edge vertexkey="5" edgekey="6"/>
                        </edges>
                    </vertex>
                </vertices>
            </graph>
        </structure>
    </component>
</mapping> 
```

Xsl.xsl - Altova Mapper 生成的 Xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="http://BizTalk_Server_Project1.Schema1" xmlns:agt="http://www.altova.com/Mapforce/agt" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="ns0 agt xs">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:template name="agt:var2_MapToSchema1_function">
        <xsl:param name="par0"/>
        <xsl:attribute name="extension">
            <xsl:value-of select="string($par0/@extension)"/>
        </xsl:attribute>
    </xsl:template>
    <xsl:template match="/">
        <Root xmlns="http://BizTalk_Server_Project1.Schema1">
            <xsl:attribute name="xsi:schemaLocation" namespace="http://www.w3.org/2001/XMLSchema-instance">http://BizTalk_Server_Project1.Schema1 C:/Users/OhadAv/Desktop/ForAltova/Schema1.xsd</xsl:attribute>
            <id xmlns="">
                <xsl:for-each select="ns0:Root/id">
                    <xsl:variable name="var1_extension">
                        <xsl:if test="@extension">
                            <xsl:value-of select="'1'"/>
                        </xsl:if>
                    </xsl:variable>
                    <xsl:if test="string(boolean(string($var1_extension))) != 'false'">
                        <xsl:call-template name="agt:var2_MapToSchema1_function">
                            <xsl:with-param name="par0" select="."/>
                        </xsl:call-template>
                    </xsl:if>
                </xsl:for-each>
            </id>
        </Root>
    </xsl:template>
</xsl:stylesheet> 
```

GeneratedByBizTalkMapperAfterXSLTmap.xml - 为地图使用“Xsl.xsl”后 BizTalk 映射器的输出实例（请注意编辑 xml 文件时生成的非空 id 标记：

```
<?xml version="1.0" encoding="utf-8"?>
<Root xsi:schemaLocation="http://BizTalk_Server_Project1.Schema1 C:/Users/OhadAv/Desktop/ForAltova/Schema1.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://BizTalk_Server_Project1.Schema1">
  <id extension="extension_1" xmlns="">
  </id>
</Root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:35:24.313

Altova 映射器生成的 xslt 看起来很乱。例如，使用一次性变量、只使用一次的调用模板以及重复转换，例如`string(boolean(string(`

我不是 100% 清楚您需要在地图中进行哪些映射。

如果您想`root`完全删除该属性，并提供一个`id`元素，即使它丢失了，那么下面的 xslt 将起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                xmlns:ns0="http://BizTalk_Server_Project1.Schema1" 
                xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                exclude-result-prefixes="ns0 xs">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <xsl:template match="/ns0:Root">
        <Root xmlns="http://BizTalk_Server_Project1.Schema1">
            <xsl:element name="id">
                <xsl:for-each select="ns0:Root/id">
                    <xsl:if test="@extension">
                        <xsl:attribute name="extension">
                            <xsl:value-of select="string(@extension)"/>
                        </xsl:attribute>
                    </xsl:if>
                </xsl:for-each>
            </xsl:element>
        </Root>
    </xsl:template>
</xsl:stylesheet> 
```

这会生成没有 xmlns、无关架构位置等的 XML，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Root xmlns="http://BizTalk_Server_Project1.Schema1">
  <id extension="extension_1" />
</Root> 
```

但是，如果您的意思是如果输入节点上不存在 id 元素，则要完全省略它，则按如下方式更改模板。

```
<xsl:template match="/ns0:Root">
    <Root xmlns="http://BizTalk_Server_Project1.Schema1">
        <xsl:if test="id">
            <xsl:element name="id">
                <xsl:attribute name="extension">
                    <xsl:value-of select="string(id/@extension)"/>
                </xsl:attribute>
            </xsl:element>
        </xsl:if>
    </Root>
</xsl:template> 
```

哪些地图

```
<ns0:Root xmlns:ns0="http://BizTalk_Server_Project1.Schema1">
</ns0:Root> 
```

至：

```
<?xml version="1.0" encoding="utf-8"?>
<Root xmlns="http://BizTalk_Server_Project1.Schema1" /> 
```

# tridion - 什么事件可用于取消编辑？

> ID：11773025
> 
> 赞同：2
> 
> 时间：2012-08-02T07:40:16.587
> 
> 标签：tridion, tridion-2011

当作者打开页面，进行一些更改并关闭而不保存时，我想做一些事情。

我期待像关闭或取消这样的事件，但我找不到任何这样的事件。

在这种情况下我应该订阅哪个事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:15:00.560

没有关闭或取消事件，并且由于用户没有执行保存，因此根本没有调用任何事件（除非它是现有项目，否则关闭将触发撤消签出）。请注意，当用户尝试关闭窗口而不保存时确实会收到警告，因此这里认为这是一个有意识的决定。

与之交互的唯一方法是通过 UI 扩展，但如果了解更多关于用例的信息，看看沿着这条路线走下去是否真的有意义（UI 扩展很重要），将会很有趣。

# php - 对 Ubuntu 中具有 Web 开发 (LAMP) 代码自动完成功能的 IDE 的建议

> ID：11773026
> 
> 赞同：-1
> 
> 时间：2012-08-02T07:40:20.023
> 
> 标签：php, javascript, html, css, ubuntu

我正在寻找用于开发 PHP Web 应用程序的编辑器 (IDE)。我至少需要它来处理 HTML、CSS、JavaScript 和 PHP。

我正在寻找的是软件中的代码自动完成功能。例如，当我键入`mysql_c`时，它应该会显示`mysql_connect()`参数和语法。

我来自 Windows 背景，我使用 codelobster php 进行编程。在我切换到 Linux (Ubuntu 12.04) 之前它是完美的，只是发现它在 Linux 中不可用。

请推荐支持自动补全的类似 IDE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:25:07.400

对于这些要求，我推荐 JetBrains 的[PhpStorm](http://www.jetbrains.com/phpstorm/)。我多年来一直使用它和其他构建在同一平台上的 JetBrains IDE，并且对它们非常满意。然而，它不是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:46:55.237

Any decent IDE would support that, besides this question is already asked before.

So, according to your requierments, I can recommend:

1.[Eclipse PDT](http://www.eclipse.org/pdt) - Really good, I'm currently using it with XDebug.
2.[Netbeans](http://netbeans.org/) - It was my favorite till I failed to install a Debugger on it. then switched to PDT

these two IDE's provides code completion, syntax checking, and integration with debuggers. Also, both of them are cross-platform, which means if you ever wanted to return to Windows, they'll be there for you.

Still not intrested? [take a look here](https://stackoverflow.com/search?q=php%20ide)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:51:05.627

我使用[Sublime Text 2](http://www.sublimetext.com/2)已经有一段时间了，我觉得它是 Web 开发的最佳选择。

有了很多活动的包/插件，它使冗余任务变得更加容易。

到目前为止，它从未崩溃过，不像 eclipse 会在一段时间后挂起/崩溃。你绝对应该试一试。

# javascript - dojo 从 dijit.form.MultiSelect 中删除项目

> ID：11773027
> 
> 赞同：1
> 
> 时间：2012-08-02T07:40:27.987
> 
> 标签：javascript, dojo, multi-select

我有一个问题...当我单击按钮时，我试图从 dijit.form.MultiSelect 中删除选定的项目，但不起作用...

这是代码：

```
btnRemove = dijit.byId("btnRemove");   // button ID  
List= dijit.byId("List");  // ID List of items which I want             
                           // to  remove when click on someone item
on(btnRemove , "click", function(evt){  // onClick event            
alert(dijit.byId("List").attr("value")); // returns a label of element

// here must be a code to remove a selected item from MultiSelect - but don't work...
List.containerNode.removeChild(dijit.byId("List").attr("value")); 
```

});

所有代码都是Javascript ..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:57:53.383

我解决了这个问题......如果有需要的话：

因为我没有发现 dijit.form.MultiSelect 有 removeChild 选项，所以我使用了另一个隐藏的 dijit.form.MultiSelect 从第一个 MultiSelect 中移动项目...

代码是：

```
btnRemove = dijit.byId("btnRemove");
on(btnRemove, "click", function(evt){
dijit.byId("Removed").addSelected(dijit.byId("List"));      
}); 
```

其中 Removed 是隐藏 MultiSelect 的 ID，List 是可见 dijit.form.MultiSelect 的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-20T10:25:15.780

您可以使用以下代码删除所有元素

```
 while (btnRemove.hasChildNodes()) {

              btnRemove.removeChild(btnRemove.lastChild);
          } 
```

# javascript - 检查 div 是否真的溢出和/或有滚动条

> ID：11773029
> 
> 赞同：3
> 
> 时间：2012-08-02T07:40:31.350
> 
> 标签：javascript, html, css, overflow

我们有一个带有`<DIV style="overflow:auto; height:400px;>`...`</DIV>`部分的页面，其中填充了来自数据库的信息。有时它包含比可见更多的文本（因此`overflow:auto`），我们得到一个垂直滚动条。

如果文本溢出，我们希望将`<DIV>`部分的底部边框更改为**红色**- 因此，当我们没有垂直滚动条时（=红色底部边框表示有更多数据，因为人们没有' t 总是看到注意滚动条）。

如何实现？

设置 " `border-bottom:1px solid red;`" 将使底部边框一直变红，即使文本量不决定溢出/滚动条，所以单独不会削减它。

* * *

编辑：你们很快，谢谢！我会研究这些建议 - 再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:52:17.803

```
if (myDiv[0].scrollHeight > myDiv.innerHeight()){
     //this has overflowing contetent!
}
else{
   //remove border, etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:46:52.890

css

```
.attention{border-bottom:1px solid red;} 
```

js

```
$.document(ready(function(){
  var div = ('div#YOUR_OVERFLOW_DIV');

  if ( (div).height()>400){
     $(div).addClass('attention');
  }

}); 
```

# jakarta-ee - 如何使用 JavaMelody 重新加载应用程序的上下文？

> ID：11773030
> 
> 赞同：1
> 
> 时间：2012-08-02T07:40:32.810
> 
> 标签：jakarta-ee, tomcat7, probe, server-monitoring, java-melody

我一直在使用 Probe 监视 tomcat 服务器和 Web 应用程序。从 Probe 我可以从 UI 重新加载上下文，单击刷新图标。

但是我没有从哪里重新加载 JavaMelody 中的上下文？

我在我的应用程序 javamelody-1.39.0.jar 和 jrobin-1.5.9.jar 的 lib 文件夹中添加了 2 个 jar 文件，并在 web.xml 文件中添加了以下片段

```
 <filter>
                <filter-name>monitoring</filter-name>
                <filter-class>net.bull.javamelody.MonitoringFilter</filter-class>
        </filter>
        <filter-mapping>
                <filter-name>monitoring</filter-name>
                <url-pattern>/*</url-pattern>
        </filter-mapping>
        <listener>
                <listener-class>net.bull.javamelody.SessionListener</listener-class>
        </listener> 
```

并使用 url 监控应用程序`http://localhost:8080/appName/monitoring`

从生成的 UI 中，如何重新加载该特定应用程序的上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-22T23:02:57.460

无法使用 javamelody UI 重新加载 webapp 的上下文。对此没有任何行动。

# java - 为什么尝试访问类时会生成 java.lang.IllegalStateException？

> ID：11773038
> 
> 赞同：0
> 
> 时间：2012-08-02T07:40:54.187
> 
> 标签：java, illegalstateexception, classname

我正在尝试获取一个已经创建了实例并且我想使用该实例的类。指定了所需类的名称和正确的包。然而。我收到一个 java.lang.IllegalStateException 说明找不到指定的类。每个类中的所有包名称和导入都已检查并且它们都匹配。

请问有谁知道为什么会生成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:43:19.740

可能需要的类不在您的运行时类路径上。有关更多信息，请阅读：[http ://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

# iphone - 除了使用双指针之外，还有什么方法可以通过使用@selector 从方法中获取返回值？

> ID：11773040
> 
> 赞同：0
> 
> 时间：2012-08-02T07:40:59.277
> 
> 标签：iphone, objective-c, ios

我不想使用双指针。我正在使用一个更简单的函数，如下所示。

```
-(NSString *) getName
{
    return name;
} 
```

那么正确的取回方式是什么`NSString *`呢？

通过使用`@selector(getName)`我无法获得返回值`name`。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:43:14.930

您应该使用`NSInvocation`对象实例来调用选择器并解析返回的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:01:30.807

`performSelector:` *确实*直接给你返回值。

```
NSString * s = @"NEXT WE HAVE NUMBER FOUR, 'CRUNCHY FROG'.";
NSString * l = [s performSelector:@selector(lowercaseString)];
NSLog(@"%@", l);    // prints "next we have number four, 'crunchy frog'." 
```

# linq - 左加入分组和排序

> ID：11773049
> 
> 赞同：2
> 
> 时间：2012-08-02T07:41:28.287
> 
> 标签：linq, entity-framework, linq-to-entities, entity-framework-4.1

音乐家写歌。歌曲在空中播放。

我有数据库表 Musicians、Songs 和 AirTimes。AirTimes 表条目包含有关在哪个日期播放了哪首歌以及播放了多少分钟的信息。

我有与表格相对应的音乐家、歌曲、通话时间等课程。这些类具有指向另一个实体的导航属性。下面的箭头代表导航。

音乐家 <--> 歌曲 <--> 通话时间

从数据库中，我必须检索他/她的歌曲获得 AirTime 的所有音乐家和日期。另外，我想显示特定日期播放的歌曲数量以及该日期播放的分钟数。

在 Microsoft SQL 中，我会这样做：

```
select 
    dbo.Musicians.LastName
  , dbo.AirTimes.PlayDate
  , count(dbo.AirTimes.PlayDate) as 'No. of entries'
  , sum(dbo.AirTimes.Duration) as 'No. of minutes'
from dbo.Musicians
  left outer join dbo.Songs
  on dbo.Musicinas.MusicianId = dbo.Songs.MusicianId
    left outer join dbo.AirTimes
    on dbo.Songs.SongId = dbo.AirTimes.SongId
    and '2014-07-01T00:00:00' <= dbo.AirTimes.PlayDate 
    and dbo.AirTimes.PlayDate <= '2014-07-31T00:00:00'
group by 
    dbo.Musicians.LastName
  , dbo.AirTimes.PlayDate
order by
    dbo.Musicians.LastName
  , dbo.AirTimes.PlayDate 
```

任何人都可以将其“翻译”成 linq-to-entitese 吗？

2012 年 8 月 9 日更新
我无法确认 grudolf 的计划是否符合我的要求。我用不同的技术完成了一些事情。尽管如此，我接受他/她的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:00:26.040

由于您在两个方向都有导航属性，因此您可以从 AirTimes 开始：

```
var grpTime = (
    from a in AirTimes
    where a.Date >= firstDate && a.Date < lastDate
    group a by new {a.Song.Musician.LastName, a.Song.Title, a.Date} into grp
    select new {
        grp.Key.LastName,
        grp.Key.Title,
        grp.Key.Date,
        Plays = grp.Count(),
        Seconds = grp.Sum(x => x.Duration)
    }
); 
```

或来自音乐家：

```
var grpMus = (
    from m in Musicians
    from s in m.Songs
    from p in s.Plays
    where p.Date >= firstDate && p.Date < lastDate
    group p by new {m.LastName, s.Title, p.Date} into grp
    select new {
        grp.Key.LastName,
        grp.Key.Title,
        grp.Key.Date,
        Plays = grp.Count(),
        Seconds= grp.Sum(x => x.Duration)
    }
); 
```

编辑：要显示所有音乐家，包括那些没有通话时间的音乐家，您可以使用另一个级别的分组 - 在第一步中，您计算​​每首歌曲+天的总数，然后将它们与歌曲的作者分组。它可能可以直接与数据库一起使用，但我没有设法找到一种有效的方法来做到这一点。然而。;) 使用代码，原始的 AirTimes 结果被更改为返回 Musician 而不是他的姓氏，然后加入到所有音乐家的列表中：

```
//Airtimes for musicians
var grpAir = (
    from a in AirTimes
    where a.Date >= firstDate && a.Date < lastDate
    group a by new {a.Song.Musician, a.Date} into grp
    select new {
        //Musician instead of his LastName for joining. Id would work too
        grp.Key.Musician,
        //grp.Key.Musician.LastName,
        Date=grp.Key.Date,
        Plays = grp.Count(),
        Secs = grp.Sum(x => x.Duration)
    }
);

var res = (
    from m in Musicians
    join g in grpAir on m equals g.Musician into g2
    from g in g2.DefaultIfEmpty()
    orderby m.LastName
    select new {
        m.LastName,
        Date = (g==null ? null : g.Date),
        Plays = (g==null ? 0 : g.Plays),
        Secs = (g==null ? 0 : g.Secs)
    }
); 
```

[您可以在https://gist.github.com/3236238](https://gist.github.com/3236238)找到更完整的 LINQPad 示例

# css - div中的标签

> ID：11773051
> 
> 赞同：0
> 
> 时间：2012-08-02T07:41:32.623
> 
> 标签：css, html

我的页面上有一个 ajax htmlextender。用它评论一些东西。当注释文本有“输入”时，htmlextender 会给它 <p> 标签。我在显示评论时使用 div。

```
 <div style="background-color:#ff0000; width:95%;"><p>note line 1</p><p> note line 2</p></div>
 <div style="background-color:#ff0000; width:95%; text-align: right; font-size: 11px;">Name Surname</div>
 <div style="background-color:#ff0000; width:95%; text-align: right; font-size: 11px;">02.08.2012 10:04</div> 
```

输出如下： ![在此处输入图像描述](../Images/d49df0a5813f20a8b8cfad0c43e0998f.png)

如何清除空行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T07:43:02.587

删除段落的边距和/或填充：

```
p {margin: 0; padding: 0} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T07:43:10.497

您可以从`p`元素中删除边距。您可能还想删除任何填充（默认情况下不存在）。确保这一点是个好主意。

浏览器开发工具是检查应用了哪些样式的好工具。在 firebug 等中，您可以检查元素以获取应用样式的列表。如果您在 Windows 中，您可以通过按 来获取此信息`F12`。

只需将其添加到您的 CSS 文件中。或者将其包含在标题中。

```
p { margin: 0; padding: 0; } 
```

您也可以像这样将其应用于 p 元素，但这是不好的做法，因为您必须将内容和表示分开。现在就这样做，当你需要改变某些东西时，它会让你的生活更轻松。

```
<p style="margin:0; padding: 0;">This is bad</p> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T07:43:42.947

空间将是由于应用于`p`标签的边距和填充。将以下内容添加到`<style>`标头中的标记或外部样式表中。

```
p {margin: 0;padding: 0} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T08:02:30.263

如果您放入`p { margin: 0; padding: 0; }`您的 CSS 文件，它将影响所有具有该外部样式表的页面中的所有段落。

如果您使用: `<p style="margin:0; padding: 0;">`，我将不得不同意艾伦的观点，即拥有内联 CSS 并不是一种习惯。

另一种解决方案是使用`<span>`而不是`<p>`这样：

```
<div style="background-color:#ff0000; width:95%;"><span>note line 1</span><br/><span> note line 2</span></div> 
```

希望这可以帮助！:)

# google-app-engine - 在 AppEngine 中指定 CA 链

> ID：11773059
> 
> 赞同：2
> 
> 时间：2012-08-02T07:42:16.967
> 
> 标签：google-app-engine

我正在为我的自定义域使用 SSL 证书。该证书需要五个中间权限才能到达根 CA，没有它们，一些浏览器（发音：Chrome）将工作，但其他浏览器（Firefox、Android 浏览器）将失败。

有没有办法在 PEM 文件中指定两个以上的 CA？当我尝试放置整个认证链时，AppEngine 会抱怨（如文档所述，它在 PEM 文件中只接受两个 CA）。放弃我当前的证书并选择威瑞信是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:51:55.533

只是为了回答我自己的问题，目前没有办法做到这一点。切换到使用单个中间机构的 CA（DigiCert 将其与一流的技术支持相结合）并继续前进。

**更新**：从今天开始，GAE 将支持最多五个 CA 机构链。

# php - 我在使用 php 和 mysql 创建论坛时遇到了麻烦

> ID：11773060
> 
> 赞同：0
> 
> 时间：2012-08-02T07:42:17.077
> 
> 标签：php, mysql

下面的代码是我编写的程序。问题是，即使我按下提交、回复或删除，按钮都不起作用。

你能帮我看看我在下面写的代码有什么问题吗？太感谢了。

```
<?php

/*共通処理*/

//データベースへの接続
try{
$GLOBALS['db'] = new PDO("mysql:host=localhost; dbname=bbs", "root", "test");    
} catch (PDOException $e) {
    echo 'connection failed: '.$e->getMessage();
}

//action取得
$action = (isset($_GET['action']) ? $_GET['action'] : $_POST['action']);

//action振り分け
switch($action)
{
        //書き込み処理
    case "regist":
        proc_regist();
        break;

        //削除処理
    case "delete":
        proc_delete();
        break;

        //返信処理
    case "res":
        proc_res();
        break;

        //表示処理
    default:
        proc_default();
        break;

}

// 終了処理

/* ここで処理は終了　あとは個別の関数へ */

// 基本の掲示板表示処理
function proc_default()
{

    $db = $GLOBALS['db'];

    $page_max = 15;
    $offset = ( isset($_GET['offset']) ? $_GET['offset'] : 0 );

    $limit = $page_max +1;

    $stmd = $db->query("select * from message order by no desc limit $limit offset $offset");
    $rows = $stmd->fetchAll();

?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang = "ja">
<head>
<meta http-equiv = "Content-Type" content="text/html; charset = UTF-8">
<title>
</title>
</head>
<body>

<form method = "POST" action = "bbs_new.php">
<input type = "hidden" name = "action" value= "regist">
お名前：<input type="text" name="name"><br>
メール：<input type="text" name="mail"><br>
題　名：<input type="text" name="title"><br>
削除キー：&lt;input type="password" name="delkey" value="<?php print $delkey ?>"><br>
<textarea name="contents" cols="60" rows="5"></textarea><br>

<?php
print "<input type='submit' name='write' value='送信'>\n";
print "<hr>\n";
print "記事番号：&lt;input type='text' name='delno'>\n";
print "削除キー: <input type='password' name='delkey'>\n";
print "<input type='submit' name='delete' value='記事削除'>\n";
print "<input type = 'hidden' name = 'action' value = 'delete'>\n";

?>

</form>

<?php

//ここからデータ表示処理

$sql = 'select * from message order by no desc';

foreach ($db->query($sql) as $row) {

    if ($_GET['resno']) {
        if ($row['resno'] != $_GET['resno']) continue;
    }

    if ($_POST['resno']) $resno = $_POST['resno'];
    else $resno = $no;
    if ($row['no'] != $row['resno']) $res = true; else $res = false;
    if ($res) print "<blockquote>";
    else print "<hr>";
    print "<p>No.".$row['no']."　";
    print "<b>{$row['title']}</b>　投稿者：";
    if ($row['mail']) print "<a href='mailto:{$row['mail']}'>";
    print $row['name'];
    if ($row['mail']) print "</a>";

    $row['time'] = date("Y/m/d H:i:s");
    print "　投稿時間：{$row['time']}";
    if (!$res && !$_GET['resno']) {
        print "　<a href='bbs_new.php?resno={$row['no']}'>返信</a>";
    }
    print "<br><br>{$row['contents']}</p>";
    if ($res) print "</blockquote>";
    print "\n";

}

//改ページ

if(count($rows)>$page_max){
    $next = $offset+$page_max;
    print "[<a href='bbs_new.php?offset=$next'>前のページ&lt;/a>]";
}

if ($offset>0){
    $prev = $offset-$page_max;
    print "[<a href='bbs_new.php?offset=$prev'>次のページ&lt;/a>]";
}

    //rowに１行ずつ取得したデータが入る

//返信データの有無
    $sql2 = 'select * from message order by no desc';

    foreach ($db->query($sql2) as $row2) {
        //入力フォームの書き出し
        if ($_GET['resno']) {
            print "<input type='submit' name='write' value='No.{$_GET['resno']} に返信'>\n";
            print "<input type='hidden' name='resno' value='{$_GET['resno']}'>\n";
        } else {
            print "<input type='submit' name='write' value='送信'>\n";
            print "<hr>\n";
            print "記事番号：&lt;input type='text' name='delno'>\n";
            print "　削除キー: <input type='password' name='delkey2'>\n";
            print "　<input type='submit' name='delete' value='記事削除'>\n";
        }
    }
}

//header("Location: bbs_new.php");

//データベースへ書き込みを行う処理

function proc_regist(){

    // グローバル変数から取り出す
    $db = $GLOBALS['db'];

    //記事番号
    $sql = 'select no from message order by no desc';
    $maxno = 0;

    $no = $maxno + 1;

    $_POST['no'] = $no;
    if(!$_POST['resno']){
        $_POST['resno'] = $_POST['no'];
    }

    //データベースへインサート

    $sql = 'insert into message values(?,?,?,?,?,?,?,?)';
    $st = $db->prepare($sql);
    $result = $st->execute(array($_POST['no'], $_POST['resno'],$_POST['name'], $_POST['mail'],$_POST['title'], $_POST['contents'],$_POST['delkey'], $_POST['time']));
}

       header("Location: bbs_new.php");

//データベースから削除を行う処理

function proc_delete(){

    $db = $GLOBALS['db'];
    $sql = 'delete from message where no = ? and delkey = ? ';
        $sth = $db->prepare($sql);
        $ret = $sth->execute(array($_POST['no'],$_POST['delkey']));

    header("Location: bbs_new.php");
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:51:26.823

如果你试试这个呢？

```
print "<input type='submit' name='action' value='write'>\n";
print "<hr>\n";
print "記事番号：&lt;input type='text' name='delno'>\n";
print "削除キー: <input type='password' name='delkey'>\n";
print "<input type='submit' name='action' value='delete'>\n";
print "<input type = 'hidden' name = 'action' value = 'delete'>\n"; (remove this line) 
```

# python - 如何使用python从linux屏幕上的url中弹出一条消息

> ID：11773066
> 
> 赞同：0
> 
> 时间：2012-08-02T07:42:37.477
> 
> 标签：python, urllib

嗨，假设我有以下代码

```
import urllib
from BeautifulSoup import BeautifulSoup

url = "http://card.cricket.timesofindia.indiatimes.com/SriLanka-vs-India/scorecard/matchid-1657.cms"
html  = urllib.urlopen(url)
data = html.read()
final_string = BeautifulSoup(data)
cricinfo = final_string.findAll('span',text=True)
result = cricinfo[5].encode('utf-8')
print result 
```

如果我们运行上面的代码，结果将是

```
Sri Lanka(SL) vs India(Ind) Live Scorecard | The Times Of India Cricket Scorecard, India in Sri Lanka, 5 ODI Series, 2012 
```

但是无论如何，有没有将这个结果作为消息弹出或者类似的东西，当我们启动时，我们会在 linux 机器的桌面右上角得到“软件更新可用”（只是在我们运行时像上面的格式一样弹出结果python中的代码如上）

我的意图是在我们运行代码时在屏幕上弹出结果，就像有时如果我们收到一封邮件，我们会看到一条弹出消息，例如`"You have recieved a message"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:07:21.407

在 linux 上，你可以尝试包 python-notify

# actionscript-3 - 如何将多张图片上传到服务器？

> ID：11773072
> 
> 赞同：1
> 
> 时间：2012-08-02T07:43:03.707
> 
> 标签：actionscript-3, apache-flex, flex4.5

我尝试使用 Flex 将图像上传到服务器。编码已编译并成功运行，但图像一次上传。我想单独上传图片，并把进度栏上传上传的每张图片。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:54:09.963

您可以使用 FileReferenceList 来实现这一点，您可以在此处找到所有信息和示例代码：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReferenceList.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReferenceList.html)

# php - 你怎么能缩进这种混合的情况？

> ID：11773074
> 
> 赞同：0
> 
> 时间：2012-08-02T07:43:07.297
> 
> 标签：php, html, coding-style, indentation

这是我的混合 PHP 和 HTML 的代码。（它显示 4X4 表格。）

您如何使此代码具有更高的可读性？

如果你改变 HTML 缩进，你应该改变整个 HTML。（此代码是整个源代码的一部分。）

你对我有什么想法吗？请告诉我。塔。

```
<!-- GALLERY BEGIN -->
<tr>
  <td style="padding-top:5px;"><table width="100%" border="0" cellpadding="2" cellspacing="0">
    <tr>
      <?php
      $ii = 0;
      $aRows = getArticle('board_table', $DB_CONNECT, 8);
      foreach ($aRows as $iidx => $aRow) :
          $ii++;
          $U = getUpfiles('upload_table',$aRow[uid],'');
          $pic = getImage($U);
      ?>
      <td width="75"><table width="60" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td><a href="<?=$aRow[link]?>"><img src="<?=$pic?>"/></a></td>
          </tr>
        <tr>
          <td align="center"><?=getStrCut($aRow[subject], 8, '..')?></td>
          </tr>
        </table></td>
          <?php if($ii%4==0): ?>
      </tr>
    </table></td>
  </tr>
<tr>
  <td><table width="100%" border="0" cellpadding="2" cellspacing="0">
    <tr>    
          <?php endif; ?>
      <?php endforeach; ?>
      </tr>
    </table></td>
  </tr>
<!-- END BEGIN --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:47:16.013

I would suggest using some kind of templating engine. Like [smarty](http://www.smarty.net). That will allow you to keep your design en data more seperate.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:50:00.343

甚至不用担心 HTML 缩进，它一点也不重要。无论是对你的用户，对你的浏览器和你的调试，你都应该使用像 Chrome 的开发者工具或好的 ol'Firebug - 这些工具为你缩进你的 HTML，不管实际的代码库是什么样的。

缩进你可以最好地阅读代码的方式，而不是你认为最适合程序的方式。至于那一点，你真的应该完全避免混合 HTML 和 PHP。正如 bkwint 已经说过的，使用 SMARTY 或 TWIG 之类的模板引擎。尽管使用它们，您的 HTML 中仍然有一些奇怪的“中间”代码，但它看起来会更清晰，更容易理解。

至于您当前的代码：使用标准缩进，无论您是在 PHP 代码块中还是在 HTML 部分中。这意味着，在打开循环、if 或标签时缩进。这至少应该以某种方式清理你去那里的那种桌子驱动的疯狂。

# php - FuelPHP 从 url 中删除 public

> ID：11773079
> 
> 赞同：1
> 
> 时间：2012-08-02T07:43:20.170
> 
> 标签：php, url, fuelphp

首先抱歉，但我是一个非常大的初学者，所以如果你愿意，你可以否决这个问题。

所以我看了很多教程，唯一对我有用的就是把公用文件夹的内容拉出来。

问题是我得到了一堆错误。

错误：

```
Warning: require(\bootstrap.php) [function.require]: failed to open stream: No such file or directory in C:\EasyPHP\www\fuelphp\index.php on line 33

Fatal error: require() [function.require]: Failed opening required '\bootstrap.php' (include_path='.;C:\php\pear') in C:\EasyPHP\www\fuelphp\index.php on line 33 
```

所以我发现 DOCROOT 是`C:\EasyPHP\www\fuelphp\`，所以我需要以这种方式拉取东西 localhost/fuelphp/fuel/core

原始索引看起来像这样

```
<?php
/**
 * Set error reporting and display errors settings.  You will want to change these when in production.
 */
error_reporting(-1);
ini_set('display_errors', 1);

/**
 * Website document root
 */
define('DOCROOT', __DIR__.DIRECTORY_SEPARATOR);

/**
 * Path to the application directory.
 */
define('APPPATH', realpath(__DIR__.'/../fuel/app/').DIRECTORY_SEPARATOR);

/**
 * Path to the default packages directory.
 */
define('PKGPATH', realpath(__DIR__.'/../fuel/packages/').DIRECTORY_SEPARATOR);

/**
 * The path to the framework core.
 */
define('COREPATH', realpath(__DIR__.'/../fuel/core/').DIRECTORY_SEPARATOR);

// Get the start time and memory for use later
defined('FUEL_START_TIME') or define('FUEL_START_TIME', microtime(true));
defined('FUEL_START_MEM') or define('FUEL_START_MEM', memory_get_usage());

// Boot the app
require APPPATH.'bootstrap.php';

// Generate the request, execute it and send the output.
try
{
    $response = Request::forge()->execute()->response();
}
catch (HttpNotFoundException $e)
{
    $route = array_key_exists('_404_', Router::$routes) ? Router::$routes['_404_']->translation : Config::get('routes._404_');
    if ($route)
    {
        $response = Request::forge($route)->execute()->response();
    }
    else
    {
        throw $e;
    }
}

// This will add the execution time and memory usage to the output.
// Comment this out if you don't use it.
$bm = Profiler::app_total();
$response->body(
    str_replace(
        array('{exec_time}', '{mem_usage}'),
        array(round($bm[0], 4), round($bm[1] / pow(1024, 2), 3)),
        $response->body()
    )
);

$response->send(true); 
```

比修改成这个

```
<?php
/**
 * Set error reporting and display errors settings.  You will want to change these when in production.
 */
error_reporting(-1);
ini_set('display_errors', 1);

/**
 * Website document root
 */
define('DOCROOT', '/');

/**
 * Path to the application directory.
 */
define('APPPATH', 'fuel/app/').DIRECTORY_SEPARATOR;

/**
 * Path to the default packages directory.
 */
define('PKGPATH', 'fuel/packages/').DIRECTORY_SEPARATOR;

/**
 * The path to the framework core.
 */
define('COREPATH', 'fuel/core/').DIRECTORY_SEPARATOR;

// Get the start time and memory for use later
defined('FUEL_START_TIME') or define('FUEL_START_TIME', microtime(true));
defined('FUEL_START_MEM') or define('FUEL_START_MEM', memory_get_usage());

// Boot the app
require APPPATH.'bootstrap.php';

// Generate the request, execute it and send the output.
try
{
    $response = Request::forge()->execute()->response();
}
catch (HttpNotFoundException $e)
{
    $route = array_key_exists('_404_', Router::$routes) ? Router::$routes['_404_']->translation : Config::get('routes._404_');
    if ($route)
    {
        $response = Request::forge($route)->execute()->response();
    }
    else
    {
        throw $e;
    }
}

// This will add the execution time and memory usage to the output.
// Comment this out if you don't use it.
$bm = Profiler::app_total();
$response->body(
    str_replace(
        array('{exec_time}', '{mem_usage}'),
        array(round($bm[0], 4), round($bm[1] / pow(1024, 2), 3)),
        $response->body()
    )
);

$response->send(true); 
```

现在公众不在网址中，但是当我打开网站时出现一堆错误，我看到插入的正斜杠和反斜杠，但无法真正找到问题

```
Warning: require_once(fuel/core/classes\error.php) [function.require-once]: failed to open stream: No such file or directory in C:\EasyPHP\www\fuelphp\fuel\core\base.php on line 25

Fatal error: require_once() [function.require]: Failed opening required 'fuel/core/classes\error.php' (include_path='.;C:\php\pear') in C:\EasyPHP\www\fuelphp\fuel\core\base.php on line 25 
```

请有人给我一个提示如何修改索引以使一切正常吗？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:45:19.567

您不需要修改索引文件来实现您正在尝试的内容。

Fuel 被设计为驻留在文档根目录（docroot）之上。您的 docroot 似乎是 www/。

这意味着您的目录结构实际上应该如下所示：

```
C:\EasyPHP\fuelphp\
C:\EasyPHP\www\ 
```

FuelPHP zip 文件或 git clone（或者你可以得到它）包含一个名为`public`. 此文件夹是您的 docroot 的假定名称，因此在您的情况下，`public/`应将其内容复制到`www/`

但是，您可以在尝试时将其全部设置在 docroot 中，该过程记录在 FuelPHP 网站[here](http://docs.fuelphp.com/installation/instructions.html#/install_inside_root)上。

> 如第 3 点所述，出于安全原因，强烈建议不要将 Fuel 安装在您的网络服务器的文档根目录中。
> 
> 但是，在某些情况下，您希望这样做，[...]
> 
> 在这种情况下，您需要一个额外的 .htaccess 文件，您需要将其放置在文档根目录中，该文件会将请求重定向到站点根目录到您的公用文件夹，并修改重写以包含公用文件夹：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteBase /public

    RewriteRule ^(/)?$ index.php/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

index.php 的默认配置默认考虑到 /fuel/ 文件夹的位置。以下面的路径定义为例

```
define('COREPATH', realpath(__DIR__.'/../fuel/core/').DIRECTORY_SEPARATOR);

__DIR__    - Path of current working directory, i.e. wherever index.php is
..         - go up a directory, i.e. directory above wherever index.php is
fuel/      - Fuel folder
core/      - Core folder within fuel/

realpath() - Resolves the .. to it's real location and makes sure / is correct or changes to \ depending on the OS 
```

你得到不同方向的斜线的原因是你在`/`没有使用的情况下硬编码到代码中`realpath()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T01:15:32.323

您还可以使用 VirtualHost 将[http://project.dev/](http://project.dev/)定向到项目的公共路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T02:48:47.083

在您的文件中：

> C:\EasyPHP\www\fuelphp\public\.htaccess

设置`RewriteBase`此值：`/easyphp/www/fuelphp/public`

# jasper-reports - Traverse Ireport Input 类型集合的控制参数（多选参数）

> ID：11773085
> 
> 赞同：0
> 
> 时间：2012-08-02T07:43:38.483
> 
> 标签：jasper-reports, jasperserver

我有一个 Oracle 查询，我想检查数据类型为“集合”的 Ireport 输入控制参数的内容，如下面的 SQL

```
select devlocview.floorname FROM AlarmDeviceView alrmDevView INNER JOIN devicelocationview devLocView ON devlocview.oid=alrmdevview.deviceoid
LEFT OUTER JOIN DEVICEGROUPVIEW devGrpView ON devlocview.oid=devgrpview.deviceoid
LEFT OUTER JOIN RackCapacityView rackCapView ON devlocview.RACKID=rackCapView.oid WHERE 
(
( $P{building.name} IS NOT NULL AND devlocview.buildingname = $P{building.name} )
       OR
       ( $P{building.name}='All Buildings' AND devlocview.buildingname IN (SELECT buildingname FROM  cdmr.devicelocationview ) )
    )
AND $X{IN, devlocview.floorname, floor.name} 
```

这里“floor.name”是Ireport的multiselect(collection type) inputcontrol参数，其中包含用户在UI“devlocview.floorname”SQL查询输出中选择的值

现在我想做类似的事情

```
 IF USER SELECTS "ALL BUILDING" IN UI i.e. IF floor.name contains "ALL BUILDING"
     THEN DO SOMETHING 
   ELSE 
     THEN DO SOMETHING 
```

我面临的问题是我无法遍历并检查类型为“collection”的 Ireport 输入控制参数“floor.name”的内容

# model-view-controller - 具有混合 aspx 和控制器 MVC .Net 路由的意外表单 url

> ID：11773086
> 
> 赞同：0
> 
> 时间：2012-08-02T07:43:41.430
> 
> 标签：model-view-controller, asp.net-mvc-routing

我因此定义了两条路线：

```
//Custom route for legacy admin page
      routes.MapPageRoute(
       "LocaliseRoute",                         // Route name
       "Admin/Localise",                // URL
       "~/Views/Admin/Localise.aspx"   // File
       );

routes.MapRoute(
       "Admin", // Route name
       "Admin/{action}/{id}", // URL with parameters
       new { controller = "Admin", action = "Index", id = UrlParameter.Optional } // Parameter defaults
       ); 
```

以下两个 GET 都可以正常工作：

```
http://pegfect.local/Admin/PegModelUpload
http://pegfect.local/Admin/Localise 
```

但是，前者的形式动作是`/Admin/Localise?action=UploadPegModel&controller=Admin`

导致“WTF？！”的表达

表格的代码是：

```
@using (Html.BeginForm("UploadPegModel", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", onsubmit = "return validateForm();" }))
{
  <input type='file' name='file' id='file' />
  <input type="submit" value="submit" />
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:17:08.657

答案就在这里：[http ://bartwullems.blogspot.co.uk/2011/04/combining-aspnet-webforms-and-aspnet.html](http://bartwullems.blogspot.co.uk/2011/04/combining-aspnet-webforms-and-aspnet.html)

明信片上关于为什么会起作用的答案......

# ios - 用户禁用屏幕自动旋转时，UIDeviceOrientationDidChangeNotification 事件未触发

> ID：11773088
> 
> 赞同：8
> 
> 时间：2012-08-02T07:43:49.400
> 
> 标签：ios, rotation, notifications

`UIDeviceOrientationDidChangeNotification`如果设置了自动旋转，我可以接收事件。

但是当屏幕自动旋转被禁用时，方向通知不再起作用。

我想要达到的效果就像iPhone Camera和Camera+：无论用户锁定或不锁定屏幕旋转，应用程序都能立即正确地对应旋转变化。

有谁知道为什么当用户锁定屏幕旋转时没有发送通知？即使禁用了自动旋转，我怎么能对应设备方向的变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T11:47:17.327

我还想获得相机应用程序的效果，即使用户设置了肖像方向锁定，应用程序也会检测设备的方向。`UIDeviceOrientationDidChangeNotification`当用户锁定纵向方向时不会发布。我相信当用户将方向锁定为纵向时，确定设备方向的唯一方法是使用`UIAccelerometer`.

下面的问题和答案列表都与这个问题有关。我在寻找答案时找到了它们，您可能会发现它们也很有帮助。

相关问题：

*   [如何检测相机叠加视图旋转](https://stackoverflow.com/questions/9363449/how-to-detect-camera-overlay-view-rotation)
*   [即使设备已锁定方向，如何进行方向检测](https://stackoverflow.com/questions/11079172/how-to-do-orientation-detection-even-the-device-has-locked-orientation)
*   [检测 iOS 设备方向锁定](https://stackoverflow.com/questions/5410763/detect-ios-device-orientation-lock)
*   [检测 iPhone 屏幕方向](https://stackoverflow.com/questions/999686/detect-iphone-screen-orientation)
*   [自动旋转、iOS和iPad的回调方法](https://stackoverflow.com/questions/10731681/callback-method-on-auto-rotation-ios-and-ipad)

# asp.net - GridView 销毁标签顺序

> ID：11773092
> 
> 赞同：1
> 
> 时间：2012-08-02T07:44:03.593
> 
> 标签：asp.net, gridview

我有一个用户控件，它有两个下拉列表、四个文本框和一个按上述顺序排列的网格视图。我希望焦点在按下 Tab 键时按此顺序移动。

我按顺序设置了每个控件的 tabindex 属性（1005、1010、1015 ...），但其 tabindex 属性未设置为任何内容的 gridview 除外。

在 page_load 我将焦点设置到第一个下拉列表。

加载页面后，焦点会根据需要位于第一个下拉列表上。然后，当按下选项卡时，焦点会根据需要移动到下一个下拉列表。问题是在此阶段按下选项卡时，现在不是移动到第一个文本框（其 tabindex 设置为 1015），而是将焦点移动到 gridview 上。请注意，gridview 没有将其 tabindex 设置为任何值。现在按下选项卡时，焦点将移到页面上的其他用户控件上，即完全脱离所讨论的用户控件。然后在几次按下用户控件后返回到用户控件，然后按所需顺序移动，即第一个下拉列表，然后是第二个下拉列表，然后是第一个文本框，然后是第二个文本框，然后是第三个文本框，然后是第四个文本框。在此之后，它完全跳过 gridview 并移动到母版页上的控件。

因此，当页面加载时，选项卡的移动顺序与选项卡循环完成后的移动顺序不同，即所有控件都聚焦。

如果我通过使用鼠标单击将焦点移动到第一个文本框，然后按 Tab，则焦点会根据需要移动到第二个文本框，然后根据需要移动到第三个文本框，然后根据需要移动到第四个文本框。

我在页面中使用了两个用户控件，其中一个在上面讨论过，另外还有一个直接在页面上的控件。母版页中也有一些控件。

按下 Tab 键时不会发生服务器或客户端事件处理。

我尝试用 asp.net 文本框控件替换 html 输入控件，但问题仍然存在。

请求：请选择一个简单的解决方案，即不需要在代码隐藏中手动设置 tabindex 的解决方案，因为这不是非常可扩展的。

 `````
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="GridExpense.ascx.cs" Inherits="StationaryManagementSystem.GridExpense" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<script type="text/javascript">
    function MinQuantity_Blurred() 
    {
        $('#' + '<%= hitMaxQuantitySearch.ClientID %>')[0].value = $('#' + '<%= hitMinQuantitySearch.ClientID %>')[0].value;
    }

    function FromDated_Blurred()
    {
        $('#' + '<%= txtToDatedSearch.ClientID %>')[0].value = $('#' + '<%= txtFromDatedSearch.ClientID %>')[0].value;
    }
</script>

<asp:Panel ID="panel" runat="server">
    <table>
        <tr>
            <td>
                <table width="800px">
                    <tr align="right">
                        <td class="columnOne">
                            Item : 
                        </td>
                        <td class="columnTwo">
                            <asp:DropDownList ID="ddlItemSearch" runat="server" EnableViewState="true" DataValueField="Id" DataTextField="Name" TabIndex="1005" Width="200px" />
                        </td>

                        <td class="columnOne">
                            Officer : 
                        </td>
                        <td class="columnTwo">
                            <asp:DropDownList ID="ddlOfficerSearch" runat="server" EnableViewState="true" DataValueField="Id" DataTextField="Name" TabIndex="1010" Width="200px" />
                        </td>
                    </tr>

                    <tr align="right">
                        <td align="right" style="width:200px">
                            From Quantity: 
                        </td>
                        <td align="left">
                            <input type="text" id="hitMinQuantitySearch" name="hitMinQuantitySearch" runat="server" maxlength="9" tabindex="1015"
                                style="width: 90px; text-align: right" onkeydown="return isNumericKeyDown(event, false);" onkeypress="return isNumericKeyPress(event, false);" 
                                onblur="MinQuantity_Blurred();" />
                        </td>
                        <td align="right" style="width:200px">
                            To Quantity: 
                        </td>
                        <td align="left">
                            <input type="text" id="hitMaxQuantitySearch" name="hitMaxQuantitySearch" runat="server" maxlength="9" tabindex="1020" 
                                style="width: 90px; text-align: right" onkeydown="return isNumericKeyDown(event, false);" onkeypress="return isNumericKeyPress(event, false);" />
                        </td>
                    </tr>

                    <tr align="right">
                        <td class="columnOne">
                            From Dated :
                        </td>

                        <td class="columnTwo">
                            <asp:TextBox ID="txtFromDatedSearch" runat="server" MaxLength="11" TabIndex="1025" onblur="FromDated_Blurred();" Width="90px" />
                            <asp:CalendarExtender ID="ceFromDatedSearch" runat="server" TargetControlID="txtFromDatedSearch" Format="dd-MMM-yyyy" />
                        </td>

                        <td class="columnOne">
                            To Dated :
                        </td>

                        <td class="columnTwo">
                            <asp:TextBox ID="txtToDatedSearch" runat="server" MaxLength="11" TabIndex="1030" Width="90px" />
                            <asp:CalendarExtender ID="ceToDatedSearch" runat="server" TargetControlID="txtToDatedSearch" Format="dd-MMM-yyyy" />
                        </td>

                        <td align="left">
                            <asp:Button ID="btnLoad" runat="server" Text="Load" TabIndex="1035" CssClass="foreRed gradientGreen cornerRound" OnClick="btnLoad_Click" />
                        </td>
                    </>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <asp:GridView ID="gv" runat="server" AutoGenerateColumns="False" DataSourceID="ods" AllowSorting="True" AllowPaging="True" PageSize="5" 
                    AutoGenerateSelectButton="True" onrowcommand="gv_RowCommand" CssClass="gridSapphire" PagerStyle-CssClass="pagerSapphire" 
                    AlternatingRowStyle-CssClass="alterSapphire" onpageindexchanged="gv_PageIndexChanged" Width="100%" EmptyDataText="List is empty." 
                    DataKeyNames="Id" EnableViewState="true" onrowdeleted="gv_RowDeleted">
                    <PagerSettings Mode="Numeric"/>
                    <Columns>
                        <asp:TemplateField Visible="false">
                            <ItemTemplate>
                                <asp:Label ID="lblIdGrid" runat="server" Text='<%#Eval("Id") %>'/>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField Visible="false">
                            <ItemTemplate>
                                <asp:Label ID="lblIdItemGrid" runat="server" Text='<%#Eval("IdItem") %>' Style="text-align:left; padding-left:5px" />
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Item" SortExpression="NameItem" ControlStyle-Width="260px">
                            <ItemTemplate>
                                <asp:Label ID="lblNameItemGrid" runat="server" Text='<%#Eval("NameItem") %>' Style="text-align:left; padding-left:5px" />
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField Visible="false">
                            <ItemTemplate>
                                <asp:Label ID="lblIdOfficerGrid" runat="server" Text='<%#Eval("IdOfficer") %>' Style="text-align:left; padding-left:5px" />
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Officer" SortExpression="NameOfficer" ControlStyle-Width="200px">
                            <ItemTemplate>
                                <asp:Label ID="lblNameOfficerGrid" runat="server" Text='<%#Eval("NameOfficer") %>' Style="text-align:left; padding-left:5px" />
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Quantity" SortExpression="Quantity" ControlStyle-Width="100px">
                            <ItemTemplate>
                                <asp:Label ID="lblQuantityGrid" runat="server" Text='<%#Eval("Quantity") %>' Style="text-align:left; padding-left:5px" />
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Dated" SortExpression="Dated" ControlStyle-Width="100px">
                            <ItemTemplate>
                                <asp:Label ID="lblDatedGrid" runat="server" Text='<%# DateTime.Parse(Eval("Dated").ToString()).ToString("dd-MMM-yyyy") %>' 
                                    Style="text-align:left; padding-left:5px" />
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:LinkButton ID="lbDeleteGrid" runat="server" CommandName="Delete" OnClientClick="return confirm('Are you sure you want to delete this Expense?')">
                                    Delete
                                </asp:LinkButton>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <PagerStyle CssClass="pagerSapphire" />
                    <AlternatingRowStyle CssClass="alterSapphire" />
                </asp:GridView>
                <asp:ObjectDataSource ID="ods" runat="server" TypeName="StationaryManagementSystem.Classes.DAL.Expense"
                    SelectMethod="Search" SelectCountMethod="CountSearch" SortParameterName="sSortExpression" EnablePaging="true"            
                    StartRowIndexParameterName="iZeroIndexStartPage" MaximumRowsParameterName="iSizePage" 
                    onselecting="ods_Selecting" 
                    DeleteMethod="Delete" ondeleting="ods_Deleting">
                        <DeleteParameters>
                            <asp:Parameter Name="ID" Type="Int64" />
                        </DeleteParameters>
                </asp:ObjectDataSource>
            </td>
        </tr>
    </table>
</asp:Panel> 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:00:41.443

问题不在于 GridView，而在于我一直在使用但未在上面显示的 javascript 库[select2 。](http://ivaynberg.github.com/select2/)一旦这被删除，选项卡排序几乎可以按预期工作。

一些问题仍然存在。现在选项卡在六个控件中正确移动：两个下拉列表和四个文本框，但之后不会进入 gridview。在 gridview 上设置 tabindex 并不能解决这个问题。

由于问题与本文中讨论的不同，因此我在这里有一个单独的问题。

如上所述，这里讨论的一些问题仍然存在。如果未设置gridview的tabindex，任何人都可以告诉gridview中控件的默认tabindex是什么。一旦网格视图获得焦点，选项卡就会以正确的顺序工作，但很难将焦点移到网格本身。实际上可以通过 gridview.Focus() 将焦点移到网格上；但这不会将焦点移动到gridview 内的第一个元素。因此，当按下选项卡时，下一个焦点将完全移出 gridview。``

# php - 如何在 Symfony 中自行提交表单？

> ID：11773093
> 
> 赞同：0
> 
> 时间：2012-08-02T07:44:16.287
> 
> 标签：php, jquery, symfony-1.4

我在模板中有一个 symfony 表单：

**模板.php**

```
<form class="well" action="<?php echo url_for("@submitParam?param=".$con) ?>" method="post">
  <input type="text" name="param">
  <button type="submit" class="thisBtn">Button</button>
</form> 
```

当按下提交按钮时，如何将值从 HTML 输入`name="param"`传递到 url 或`$con`使用**jquery**、**javascript**或任何其他方式（**symfony**或**php ）的变量？**

**更新：** 您也可以使用 AJAX：

```
$(".btn").live('click', function(){
        $.post("<?php echo url_for('@submitParam'); ?>", $('.box').serialize(), function(response) {
            switch(response.status) {
                case 'success':
                    console.log("Success");
                    break;
                case 'failure':
                    console.log("Failure");
                    break;
            }
        }, 'json');
        return false;
    }); 
```

**行动 ：**

```
$request->getParameter('param'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:51:53.407

要在 url 中发送`param`值，请使用提交按钮

```
<input type="submit" class="thisBtn" value="button"/> 
```

并更改方法以获取

`method="get"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:47:03.527

你为什么要这样做？您已经拥有 的值，`param`因为它是表单中的输入元素。

# php - 散列：PHP Crypt() 无法正常工作

> ID：11773097
> 
> 赞同：0
> 
> 时间：2012-08-02T07:44:37.433
> 
> 标签：php, zend-framework, hash, crypt

我对 crypt() 有一种奇怪的行为。这是我在 Zend 中的代码：

```
$correct_password_hash = $this->getHelper('User')->generateHash('bd468cffe6b179d8e5ef30bd993d37e5','572906092501a20f4222a54.54479708');             
$edited_password_hash = $this->getHelper('User')->generateHash('bd468cffe6b179d8e5ef30bd993d37e','572906092501a20f4222a54.54479708');

echo "Correct Password Hash - ".$correct_password_hash."<br/>";
echo "Edited Password Hash - ".$edited_password_hash; 
```

我将一个 md5 生成的字符串作为第一个参数传递给辅助函数 generateHash，并将一个盐作为第二个参数。我将生成的哈希存储在 $correct_password_hash 变量中。

现在在对同一个辅助函数的第二次调用中，我刚刚删除了第一个参数末尾的字母 5。第二个参数是一样的。但它仍然生成与第一个相同的哈希。

这是输出：

> 正确的密码哈希 - 57CO1Lzyk81kk
> 编辑的密码哈希 - 57CO1Lzyk81kk

助手 generateHash 如下：

```
public function generateHash($md5, $salt)
{
    return crypt($md5, $salt);
} 
```

这是 crypt() 应该如何工作的吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:47:34.730

crypt() 默认为标准的基于 DES 的算法。反过来，它只使用密码中的 8 个第一个字符和 salt 中的 2 个第一个字符。

有关如何修改 crypt() 行为的更多详细信息，请参阅 crypt() 文档：http: [//php.net/crypt](http://php.net/crypt)

如果您正在执行密码哈希，请使用 bcrypt。

# c# - 如何从 JQuery 设置的值后面的代码中读取？

> ID：11773109
> 
> 赞同：0
> 
> 时间：2012-08-02T07:45:53.060
> 
> 标签：c#, jquery, asp.net, .net

我发现在 ASP.NET 页面上使用 JQuery 有一些困难。特别是我有两个主要问题。我需要使用 JQuery 更改 a`Label`和 a的值`DropDownList`，然后我必须从后面的代码中读取这些值，但是当我这样做时，我会找到原始值。在客户端所做的更改将被忽略。

如何在服务器端读取正确的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:52:57.040

我曾经遇到过类似的问题，问题是事件验证， http: [//msdn.microsoft.com/en-us/library/system.web.ui.page.enableeventvalidation.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableeventvalidation.aspx)，可能是同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:07:26.253

不是使用标签和下拉列表来设置值，而是使用 Hiddenfield 来设置值，然后在后面的代码中使用 HiddenField.Value 获取该值。在大多数情况下，可以看到在 Javascript 中设置的 Label 和 DropdownLists 值在后面的代码中无法检索代码，但可以检索 HiddenField 值。所以尝试使用 HiddenField...

**在 Javascript 中：-**

```
<script>
$("#HiddenField1").Val("Your Value");
</script> 
```

**在代码隐藏中：-**

```
string value=HiddenField1.Value; 
```

# paypal - Paypal : how to implement very simple payment form

> ID：11773111
> 
> 赞同：0
> 
> 时间：2012-08-02T07:46:05.110
> 
> 标签：paypal, paypal-ipn

I'm trying to make a part of my site to pay some depts that people have about me, so I want to make a simple way to doing that: paypal!

In fact, I want to make a form where the user put the value, and when he submit it, the bill will be create from the user to my paypal account... and then he will pay it :-)

I already make the use of the api but I don't need to make a return and cancel code, ipn and so on!

I don't know how write the code for doing this...

thanks to read me :-)

# php - strstr 替代使用旧版本的 php

> ID：11773113
> 
> 赞同：0
> 
> 时间：2012-08-02T07:46:10.210
> 
> 标签：php, strstr

我有一个在 PHP v 5.3 及更高版本中工作的函数，但想知道使用低于 5.3 的版本执行此操作的最佳方法是什么。我的 PHP 版本是 5.2.17

这是我的 PHP v5.3 函数

```
if (strstr($file2, '.', true) == strstr($file, '.', true)){
    $imagename = $file2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:51:50.573

从手册注释中，您可以找到以下内容：

```
function rstrstr($haystack,$needle, $start=0) {
   return substr($haystack, $start,strpos($haystack, $needle));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:02:03.520

这个主题还有另一个[问题](https://stackoverflow.com/questions/8642685/strstr-php-or-alternative-part-string)，他们找到的解决方案是创建自己的 strstr 函数，该函数也可以在旧版本的 php 中使用。

```
function my_strstr($haystack, $needle, $before_needle = false) { 
    if (!$before_needle) return strstr($haystack, $needle); 
    else return substr($haystack, 0, strpos($haystack, $needle)); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:18:59.963

代替

```
if (strstr($file2, '.', true) == strstr($file, '.', true)){ 
```

我使用了以下，它的工作原理

```
if (substr($file2,0,strpos($file2,'.')) == substr($file,0,strpos($file,'.'))){ 
```

# c++ - openmp中的并行for循环

> ID：11773115
> 
> 赞同：32
> 
> 时间：2012-08-02T07:46:17.473
> 
> 标签：c++, multithreading, performance, parallel-processing, openmp

我正在尝试并行化一个非常简单的 for 循环，但这是我很长时间以来第一次尝试使用 openMP。我对运行时间感到困惑。这是我的代码：

```
#include <vector>
#include <algorithm>

using namespace std;

int main () 
{
    int n=400000,  m=1000;  
    double x=0,y=0;
    double s=0;
    vector< double > shifts(n,0);

    #pragma omp parallel for 
    for (int j=0; j<n; j++) {

        double r=0.0;
        for (int i=0; i < m; i++){

            double rand_g1 = cos(i/double(m));
            double rand_g2 = sin(i/double(m));     

            x += rand_g1;
            y += rand_g2;
            r += sqrt(rand_g1*rand_g1 + rand_g2*rand_g2);
        }
        shifts[j] = r / m;
    }

    cout << *std::max_element( shifts.begin(), shifts.end() ) << endl;
} 
```

我用它编译

```
g++ -O3 testMP.cc -o testMP  -I /opt/boost_1_48_0/include 
```

也就是说，没有“-fopenmp”，我得到了这些时间：

```
real    0m18.417s
user    0m18.357s
sys     0m0.004s 
```

当我使用“-fopenmp”时，

```
g++ -O3 -fopenmp testMP.cc -o testMP  -I /opt/boost_1_48_0/include 
```

我得到了这些数字：

```
real    0m6.853s
user    0m52.007s
sys     0m0.008s 
```

这对我来说没有意义。为什么使用八核只能使性能提高 3 倍？我是否正确编码循环？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-02T08:30:25.807

您应该对and使用 OpenMP`reduction`子句：`x``y`

```
#pragma omp parallel for reduction(+:x,y)
for (int j=0; j<n; j++) {

    double r=0.0;
    for (int i=0; i < m; i++){

        double rand_g1 = cos(i/double(m));
        double rand_g2 = sin(i/double(m));     

        x += rand_g1;
        y += rand_g2;
        r += sqrt(rand_g1*rand_g1 + rand_g2*rand_g2);
    }
    shifts[j] = r / m;
} 
```

每个线程在`reduction`其中累加自己的部分和，`x`最后`y`将所有部分值加在一起以获得最终值。

```
Serial version:
25.05s user 0.01s system 99% cpu 25.059 total
OpenMP version w/ OMP_NUM_THREADS=16:
24.76s user 0.02s system 1590% cpu 1.559 total 
```

见 - 超线性加速:)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-05-02T16:13:02.990

让我们尝试了解如何使用 OpenMP 并行化简单的 for 循环

```
#pragma omp parallel
#pragma omp for
    for(i = 1; i < 13; i++)
    {
       c[i] = a[i] + b[i];
    } 
```

假设我们有`3`可用的线程，这就是将会发生的事情

[![在此处输入图像描述](../Images/08efd4825c89d3db7aa37bb0cd97891e.png)](https://i.stack.imgur.com/inNOQ.jpg)

第一

*   线程被分配一组独立的迭代

最后

*   线程必须在工作共享结构结束时等待

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-04-05T15:11:05.467

**因为这个问题被高度评价，所以我决定添加一点 OpenMP 背景来帮助那些访问它的人**

* * *

`#pragma omp parallel`创建一个包含一组的**并行区域**，`threads`其中每个线程执行包含的整个代码块`parallel region`。从[OpenMP 5.1](https://www.openmp.org/wp-content/uploads/OpenMP-API-Specification-5-1.pdf)可以阅读更正式的描述：

> 当线程遇到**并行构造**时，**会创建一组线程**来执行并行区域 (..)。遇到并行构造的线程将成为新团队的主线程，在新并行区域的持续时间内线程数为零。**新团队中的所有线程，包括主线程，都执行该区域。**创建团队后，团队中的线程数在该并行区域的持续时间内保持不变。

`#pragma omp parallel for`创建 a `parallel region`（如前所述），并且对于该`threads`区域的 ，它所包含的循环的迭代将被分配，使用`default chunk size`，并且*通常*`default schedule`是。但是请记住，标准的不同具体实施可能会有所不同。 *`static``default schedule``OpenMP`*

 *从[OpenMP 5.1](https://www.openmp.org/wp-content/uploads/OpenMP-API-Specification-5-1.pdf)您可以阅读更正式的描述：

> worksharing-loop 构造指定一个或多个相关循环的迭代将由团队中的线程在其隐式任务的上下文中并行执行。**迭代分布在执行工作共享循环区域绑定到的并行区域的团队中已经存在的线程中**。

[此外](https://www.openmp.org/wp-content/uploads/OpenMP-API-Specification-5.0.pdf)，

> 并行循环构造是指定并行构造的快捷方式，该并行构造包含具有一个或多个关联循环且没有其他语句的循环构造。

或非正式地，`#pragma omp parallel for`是构造函数`#pragma omp parallel`与`#pragma omp for`. 在您的情况下，这意味着：

```
#pragma omp parallel for 
for (int j=0; j<n; j++) {

    double r=0.0;
    for (int i=0; i < m; i++){

        double rand_g1 = cos(i/double(m));
        double rand_g2 = sin(i/double(m));     

        x += rand_g1;
        y += rand_g2;
        r += sqrt(rand_g1*rand_g1 + rand_g2*rand_g2);
    }
    shifts[j] = r / m;
} 
```

将创建一组线程，并为每个线程分配最外层循环的迭代块。

为了使其更具说明性，使用带有 a和*static*`4`的线程会导致如下结果：`#pragma omp parallel for``chunk_size=1` *`schedule`*

 *[![在此处输入图像描述](../Images/16f4538a654e538b7b8df0e2c0cf7e24.png)](https://i.stack.imgur.com/Vf8AC.png)

在代码方面，循环将被转换为*逻辑上*类似于：

```
for(int i=omp_get_thread_num(); i < n; i+=omp_get_num_threads())
{  
    c[i]=a[i]+b[i];
} 
```

其中[omp_get_thread_num()](https://www.openmp.org/spec-html/5.0/openmpsu113.html)

> omp_get_thread_num 例程返回当前团队中调用线程的线程号。

和[omp_get_num_threads()](https://www.openmp.org/spec-html/5.0/openmpsu113.html)

> 返回当前团队中的线程数。在程序的连续部分中，omp_get_num_threads 返回 1。

或者换句话说，`for(int i = THREAD_ID; i < n; i += TOTAL_THREADS)`。`THREAD_ID`范围从`0`到`TOTAL_THREADS - 1`，表示在`TOTAL_THREADS`并行区域上创建的团队的线程总数。

掌握了这些知识，并查看您的代码，可以看到您对变量“x”和“y”的更新存在*竞争条件*。这些变量在线程之间共享并在并行区域内更新，即：

```
 x += rand_g1;
     y += rand_g2; 
```

要解决这种竞争条件，您可以使用 OpenMP 的[缩减](https://docs.microsoft.com/en-us/cpp/parallel/openmp/reference/openmp-clauses?view=msvc-160#reduction)子句：

> 指定每个线程私有的一个或多个变量是并行区域末尾的归约操作的主题。

非正式地，reduction 子句将为每个线程创建变量“x”和“y”的私有副本，并在并行区域结束时将所有这些“x”和“y”变量求和到原始来自初始线程的“x”和“y”变量。

```
#pragma omp parallel for reduction(+:x,y)
for (int j=0; j<n; j++) {

    double r=0.0;
    for (int i=0; i < m; i++){

        double rand_g1 = cos(i/double(m));
        double rand_g2 = sin(i/double(m));     

        x += rand_g1;
        y += rand_g2;
        r += sqrt(rand_g1*rand_g1 + rand_g2*rand_g2);
    }
    shifts[j] = r / m;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-02T07:51:40.400

您最多可以实现（！）是线性加速。现在我不记得哪个是来自 linux 的时间，但我建议您使用 time.h 或（在 c++ 11 中）“chrono”并直接从程序测量运行时。最好将整个代码打包到一个循环中，运行 10 次并平均得到 prog 的大约运行时间。

此外，您还遇到了 x,y 的问题——它不符合并行编程中数据局部性的范式。**

# c# - 成员 'object.Equals(object, object)' 不能通过实例引用访问；改为使用类型名称来限定它

> ID：11773116
> 
> 赞同：20
> 
> 时间：2012-08-02T07:46:17.497
> 
> 标签：c#, asp.net

当我在 C# 中使用以下代码时...

```
int totalValue = 0;
int total = 0;
totalValue = int.Parse(Session["price"].ToString()) * int.Parse(Session["day"].ToString());

// This line causes the error
totalValue += Session["IsChauffeurUsed"].ToString().Equals("Yes", StringComparer.CurrentCultureIgnoreCase) ? 80 : 0; 
```

...我收到此错误：

> 成员 'object.Equals(object, object)' 不能通过实例引用访问；而是用类型名称来限定它。

该错误表明什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T08:09:33.093

您使用了错误的参数类型。您可以`Equals`用作实例级别方法或类型级别（静态）方法：

```
string.Equals(str1, str2, StringComparison comp);

str1.Equals(str2, StringComparison comp); 
```

因此，在两者中，您都需要`StringComparison`，而不是`StringComparer`。还有你的：

```
totalValue += Session["IsChauffeurUsed"].ToString().Equals("Yes", StringComparison.CurrentCultureIgnoreCase) ? 80 : 0; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T07:53:22.987

'Equals' 的第二个参数的参数类型错误，因此编译器识别出错误的重载。

要修复它，请更改此：

```
StringComparer.CurrentCultureIgnoreCase 
```

对此：

```
StringComparison.CurrentCultureIgnoreCase 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T07:51:59.750

Equals 方法是静态方法，您不能通过实例访问它

```
string isChauffeurUsed = Session["IsChauffeurUsed"].ToString();
totalValue += string.Equals(isChauffeurUsed, "Yes", 
                     StringComparison.CurrentCultureIgnoreCase) 
              ? 80 
              : 0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-30T14:29:53.993

正确的工作代码：

```
int totalValue = 0;
int total = 0;
totalValue = int.Parse(Session["price"].ToString()) * int.Parse(Session["day"].ToString());

// This line
totalValue += Session["IsChauffeurUsed"].ToString().Equals("Yes", StringComparison.CurrentCultureIgnoreCase) ? 80 : 0; 
```

**问题：**

您正在使用**`StringComparer`** 类的静态属性。而是使用 enum **`StringComparison`**。

作为`String.Equals(str1,str2,StringComparison.CurrentCultureIgnoreCase);` 或`str1.Equals(str2,StringComparison.CurrentCultureIgnoreCase);`

两者都将枚举 StringComparison 作为方法参数。

现在这引发了一些问题，为什么您无法在您的 ide 中识别出这个错误。

这是因为，由于**StringComparer**是一个**抽象类**，而**CurrentCultureIgnoreCase**是一个**静态 getter 属性**，它返回一个**StringComparer**类类型的*对象。*

 **IE，

```
public static StringComparer CurrentCultureIgnoreCase { get; } 
```

因此，编译器将您的 " "方法`Equals`视为`Equals``Object Class`

IE，

```
public static bool Equals(object objA, object objB); 
```

**对于其他一些对StringComparer**类的使用感到好奇的人。

所以这里有一个例子：

```
static void Main()
    {
        // Use these two StringComparer instances for demonstration.
        StringComparer comparer1 = StringComparer.Ordinal;
        StringComparer comparer2 = StringComparer.OrdinalIgnoreCase;

        // First test the results of the Ordinal comparer.
        Console.WriteLine(comparer1.Equals("value-1", "value-1")); // True
        Console.WriteLine(comparer1.Equals("value-1", "VALUE-1")); // False
        Console.WriteLine(comparer1.Compare("a", "b"));
        Console.WriteLine(comparer1.Compare("a", "a"));
        Console.WriteLine(comparer1.Compare("b", "a"));

        // Test the results of the OrdinalIgnoreCase comparer.
        Console.WriteLine(comparer2.Equals("value-1", "value-1")); // True
        Console.WriteLine(comparer2.Equals("value-a", "value-b")); // False
        Console.WriteLine(comparer2.Equals("value-1", "VALUE-1")); // True
        Console.WriteLine(comparer2.Compare("a", "B"));
        Console.WriteLine(comparer2.Compare("a", "A"));
        Console.WriteLine(comparer2.Compare("b", "A"));
    } 
```

有关更多详细信息，请关注[https://www.dotnetperls.com/stringcomparer](https://www.dotnetperls.com/stringcomparer)

快乐编码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-12T18:29:19.647

我知道这已经很晚了，也可能不直接适用于用户的案例，只是添加这个答案来帮助那些面临同样问题但由于不同原因的人。

`Equal()`字符串实例的方法需要第一个参数作为`string`类型。

因此，如果第一个参数不是`string`类型并且是另一种类型，比如说`int`，你会得到相同的错误，有时可能会产生误导，因为它不会直接说第一个参数应该是字符串类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T07:53:58.310

```
totalValue += string.Equals(Session["IsChauffeurUsed"].ToString(), "Yes", StringComparison.CurrentCultureIgnoreCase) ? 80 : 0; 
```

（我无法编译它来测试它，但我认为它应该可以工作）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T08:13:35.130

你的代码不强。

`Session`是一个对象，它可以为null，所以如果要使用它的值，请先检查会话，甚至会话的值也不是整数值。

我建议你这样做：

```
int? i = Session["s"] == null ? null : Parser.ParseInt(Session["s"].ToString()); 
```**

# php - Joining two tables in MySQL with one having multiple values in the other table

> ID：11773117
> 
> 赞同：0
> 
> 时间：2012-08-02T07:46:21.347
> 
> 标签：php, mysql

Tools table:

```
id      tool_nr   
687      2902
745      2456
234      3245 
```

Product Table:

```
id      tool_id   something
3432     687       123456
4587     745       254786
4411     687       258956 
4741     234       874455 
8745     745       987445 
```

So, tools table id equals product table tool_id.

What I would like:

```
tool_nr     something
2902        123456
2456        254786
2902        258956
3245        874455
2456        987445 
```

As you can see tools table id may have multiple values in the product table, right know my query is giving me "something" values together separated with commas, but I need to change it and I would like to know what would be the best way to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:56:32.793

尝试这个 ：

```
SELECT t.tool_nr, p.something 
FROM Product p 
JOIN Tools t ON p.tool_id=t.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:57:41.933

```
$result = mysql_query("SELECT 
                             t.tool_nr, 
                             p.something 
                       FROM tools t 
                       LEFT JOIN products p 
                       ON p.tool_id = t.id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:22:06.757

据我所知，您希望拥有与产品相同的元素顺序。你可以试试这个命令：

```
$result = mysql_query("SELECT Tools.tool_nr, p.something FROM Product  "
                       ." INNER JOIN Tools"
                       ." ON Product.tool_id = Tools.id"
                       ." ORDER BY Product.id"); 
```

它将为您提供给定产品存在工具的所有行。如果您想改为显示所有产品，并且只显示适用于相应产品的工具：

```
$result = mysql_query("SELECT Tools.tool_nr, p.something FROM Product  "
                       ." LEFT JOIN Tools"
                       ." ON Product.tool_id = Tools.id"
                       ." ORDER BY Product.id"); 
```

相反，如果您想显示所有工具，并且只显示这些工具存在的那些产品：

```
$result = mysql_query("SELECT Tools.tool_nr, p.something FROM Tools  "
                       ." LEFT JOIN Product"
                       ." ON Product.tool_id = Tools.id"
                       ." ORDER BY Product.id"); 
```

# php - LAMP：为什么 apache 中的 php 不会争夺 mysql 数据库连接？

> ID：11773119
> 
> 赞同：0
> 
> 时间：2012-08-02T07:46:23.603
> 
> 标签：php, mysql, apache

如果没有明确设置第四个参数 '$new_link' TRUE，则PHP 函数**mysql_connect返回一个现有连接。**
在apache环境下，不设置$new_link TRUE就调用**mysql_connect是否会导致mysql连接资源竞速？**
在 CLI 环境中，我已经证明确实出现了竞态条件。但不是在阿帕奇。所以为什么？apache是​​否只使用一种进程模型？CLI 代码示例如下：

```
// create share memory
$nShmKey = ftok(__FILE__, 'i');
$nShmID = shm_attach($nShmKey, strlen($sArr) * 2);

// write the array to the shared memory
$nArrKey = 1;
shm_put_var($nShmID, $nArrKey, $arr);

// create semphore
$nSemID = sem_get(1, 1);

// child process consume the data in the shm
for($i = 0; $i < PROC_NUM; ++$i) {
    $nPID = pcntl_fork();

    if ($nPID == 0) {
        // child
        // create db link
        $oLink = mysql_connect(
                'my_server', 
                'my_user', 
                'my_password', 
                TRUE /*if set this false, it will cause race condition in each child*/
        );
        while (true) {
            sem_acquire($nSemID);

            // get the value
            $arrCur = shm_get_var($nShmID, $nArrKey);

            if (0 == count($arrCur) || $arrCur == FALSE) {
                // value out
                sem_release($nSemID);
                break;
            }
            $nVal = array_pop($arrCur);
            if (FALSE == shm_put_var($nShmID, $nArrKey, $arrCur)) {
                die('Failed to write array to shm');
            }
            sem_release($nSemID);

            // just insert the result to db
            mysql_query("INSERT INTO some_table(val) VALUES({$nVal})", $oLink);
        }
        exit(0);
    }
}

// wait for children
$n = 0;
while ($n < PROC_NUM) {
    $nStatus = -1;
    $nPID = pcntl_wait($nStatus, WNOHANG);
    if ($nPID > 0) {
        echo "{$nPID} exit\n";
        ++$n;
    }
}

// clear shm
sem_remove($nSemID);
shm_remove($nShmID);
echo "finished\n";
?> 
```

我知道 mysql 链接在多进程之间无法正常工作，我的问题是： **为什么在 apache 中不会发生 mysql 链接的竞争条件？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:08:56.663

不，它只会在正在运行的进程中重用相同的连接（相同的脚本）。而且由于 PHP 脚本通常不是多线程的，所以没有问题。如果你 fork 进程，你应该知道你正在共享相同的连接，但这是一种特殊情况。

有一个使用持久连接的选项，它是一种连接池，连接在进程间共享。但即便如此，相同的连接也不会同时发送到两个进程。一般来说，使用持久连接并不值得，因为 MySql 的连接速度非常快。

# java - 如何在春季定义非强制性属性？

> ID：11773122
> 
> 赞同：34
> 
> 时间：2012-08-02T07:46:31.227
> 
> 标签：java, spring

我正在使用带有 PropertyPlaceholderConfigurator 的 spring 3。

我的属性代码如下所示：

```
@Configuration
public class MyProps {

    @Value("${prop1}")
    public String prop1;

    ...
} 
```

如果我的 .properties 文件中没有 prop1，则 spring 无法初始化它的上下文。

问题是我如何定义这个属性不是强制性的？一些注释，配置？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-02T08:05:17.997

您可以使用默认值：

```
@Value("${prop1:}")
public String prop1; 
```

如果未定义属性，spring 将注入一个空字符串。语法是`${property:defaultValue}`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-02T07:55:57.340

我不确定是否可以将单个属性设为可选，但您当然可以强制属性占位符忽略未解析的属性：

```
<context:property-placeholder ignore-unresolvable="true" ... /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-01T22:11:45.800

要忽略所有不可解析的属性而不是特定属性，您可以在配置类中使用以下 bean：

```
@Bean
public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {
    PropertySourcesPlaceholderConfigurer configurer = new PropertySourcesPlaceholderConfigurer();
    configurer.setIgnoreUnresolvablePlaceholders(true);
    return configurer;
} 
```

# jquery - How to display data on html from JSON webservice link using jQuery

> ID：11773124
> 
> 赞同：1
> 
> 时间：2012-08-02T07:46:32.627
> 
> 标签：jquery, html, ajax, web-services, html-table

I have given a JSON webservice link, under which we have data and wanted to show it on html table using ajax jWuery. If I download it from IE it works locally by using .json format, but webservice link doesn't work. I have checked whether link is working or not but its working in JSON viewer. What to do?

```
$(document).ready(function() {
    $.ajax({  
       type: "GET",
       data : "{}",
       contentType: "application/json",
       //url: 'myfile.json',
       url: 'http://107.22.160.4/ICatService/Service.svc/GetEvent/10/iphone2x',
       dataType: "json",
       success: function(data) {  
         $.each(data.Get_TappyokaResult, function(index, data){
               var tblRow = "<tr>"+
                             "<td>"+data.Back_id+"</td>"+
                             "<td><img src="+data.Back_image+" class=rowimg /></td>\n"+
                             "<td>"+data.Back_type+"</td>\n"+
                             "<td>"+data.DateModified+"</td>"+
                            "</tr>"
               $(tblRow).appendTo(".dataTable");
               $('table tr:odd').addClass('oddrow');
               $('.dataTable tr:even').addClass('evenrow');
        });
     },  
     error: function(data){  
           alert("error");
     }  
  });
}); 
```

myfile.json LOCAL FILE ---------------------------------

```
{
 "Get_ICatelog_EventResult":[
      {
        "Date":"26\/07\/2012", "Description":"sample event", "Event_Id":5, "Heading":"sample", "Image":"http:\/\/thisisswitch.com\/ICatalogsite\/EventImage\/fc8e84f2-6729-42c0-8e0e-c6961edd2df5.JPG", "Status":0, "Time":"14:00:00", "User_Id":10
      }
  ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:17:11.443

如果您可以控制（或您认识的人）网络服务，您可以将输出格式更改为 jsonp [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP) http://api.jquery.com/jQuery.getJSON /

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:03:25.407

你在使用网络服务器吗？如果不？确保你这样做。file:/// 有 ajax 请求的问题。如果你是，你可能会去另一个地方。( `http://107.22.160.4`) 所以这是一个跨源问题。

ajax 请求的来源需要与目标具有相同的协议 (http/https) 域 (domain.com) 和端口号（默认为 80）。

有一些解决方法，如[CORS](http://enable-cors.org/)（跨源资源共享）提供[正确的标头](http://enable-cors.org/)信息，您将能够访问另一个来源的日期，但大多数情况下需要您能够在服务器端设置它。

另一种选择是在您的服务器内[转发流量。](https://stackoverflow.com/questions/7807600/apache-mod-proxy-configuring-proxypass-proxypassreverse-for-cross-domain-ajax)

或者使用 php 代理文件。该文件为您访问数据，您可以安全地访问数据或修改标题，以便您可以使用[CORS访问它们](http://enable-cors.org/)

这是[php示例](http://www.daniweb.com/web-development/php/code/216729/php-proxy-solution-for-cross-domain-ajax-scripting)

您还可以使用 flash 代理或任何类型的后端语言（asp、jsp、...）

# java - REST Web 服务如何工作

> ID：11773126
> 
> 赞同：3
> 
> 时间：2012-08-02T07:46:36.530
> 
> 标签：java, rest

我有一个如下的休息网络服务：

```
@GET
@Path("/getPersonDetails/{personId}/{validDate}")
@Produces("application/xml")
  public PersonDetail getPersonDetails(@PathParam("personId") final String personId,@PathParam("validDate") String validDate) {

    PersonDetail p = new PersonDetail;

    //all the processing to set data into object p

    return p;
} 
```

当使用适当的参数从浏览器调用时，此服务将按预期将对象作为 xml 返回。

但是，它在内部如何工作？

从哪里设置 xml 中的标签？

是不是从

1）服务方法内部的局部变量的名称

2）类中类属性的名称

3）类本身的名称

在返回对象的方法和它作为 XML 出现在浏览器上之间会发生什么？

谢谢阅读！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:55:32.343

XML 结构由[Java Architecture for XML Binding](http://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding)生成。它基于类字段创建 XML 标记。当然，这个过程可以定制。有关如何实现此目的的示例，请参阅有关 JAXB 的 Lars Vogels[教程。](http://www.vogella.com/articles/JAXB/article.html)

方法返回后`getPersonDetails()`，JAX-RS 运行时调用 JAXB[`Marshaller`](http://jaxb.java.net/nonav/jaxb20-pr/api/javax/xml/bind/Marshaller.html)将方法的返回值转换为 XML 结构，然后将其写回您的 Web 浏览器。

# python - Gtk notebook change page with scrolling and +1 like firefox, chrome, epiphany

> ID：11773132
> 
> 赞同：2
> 
> 时间：2012-08-02T07:46:55.803
> 
> 标签：python, c, user-interface, gtk, usability

I searched for some example about how to do what's in the title. basically I wrote a python program using gobject and Gtk, I have a notebook with 4 pages inside the main window.

I love to have the notebook change pages using `<ALT>+1` `<ALT>+2` `<ALT>+3` `<ALT>+4` as well as using mouse scrolling. I googled for a while but I did not find a proper example.

if someone have some advice on this subject I really apreciate some help

PS: Examples in any language are fine

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T16:14:51.743

首先我用谷歌搜索，我找到了你的问题。

然后我用谷歌搜索了更多。这个资源[GtkWidget](https://developer.gnome.org/gtk3/stable/GtkWidget.html)将我指向['scroll-event'](https://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-scroll-event)。那里说：

> 要接收此信号，与小部件关联的 GdkWindow 需要启用 GDK_SCROLL_MASK 掩码。

我按照链接`GDK_SCROLL_MASK`找到了另一个面具`GDK_SMOOTH_SCROLL_MASK`。

所以这里是解决方案：

```
from gi.repository import Gtk, Gdk

...

class MainWindow(Gtk.Window):

    def __init__(self):
        ...
        self.notebook = Gtk.Notebook()
        self.notebook.add_events(Gdk.EventMask.SCROLL_MASK |\
                                 Gdk.EventMask.SMOOTH_SCROLL_MASK)
        self.notebook.connect('scroll-event', self.aaa)

    def aaa(self, widget, event):
        # I used `dir(event)` to find out `get_scroll_deltas()`
        if event.get_scroll_deltas()[2] < 0:
            self.notebook.prev_page()
        else:
            self.notebook.next_page() 
```

祝你今天过得愉快 ：-）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:39:23.087

这将解决选项卡编号切换问题。

```
from gi.repository import Gtk

tabs = Gtk.Notebook()
tabs.set_scrollable(True)

button = Gtk.Button()
button.set_label('hi!')
button.set_relief(Gtk.ReliefStyle.NONE)
#here we use a grid to allow more widgets in the tab label.
box = Gtk.Grid(orientation=Gtk.Orientation.HORIZONTAL)
box.add(button)
box.show_all()

#a general tab number switcher
def on_this_tab_clicked(button, tabs, pagenum):
    tabs.set_current_page(pagenum)
#any button on a tab needs numbers in its callback argument
#as well as a argument for the tab object(Gtk.Notebook)
button.connect("clicked", on_this_tab_clicked, tabs, 0)

#Here we add  the acclerator.
accels = Gtk.AccelGroup()
#parse it so it's easy to read
key, mod = Gtk.accelerator_parse("<Alt>1")
button.add_accelerator("activate", accels, key, mod, Gtk.AccelFlags.VISIBLE)

tab_content = Gtk.Label()
tab_content.set_text('hi!')
#place the box(Gtk.Grid) in the second argument of append_page
tabs.append_page(tab_content, box)
tabs.set_tab_reorderable(tab_content, True)

#do everything with successive buttons exactly like the first button
button2 = Gtk.Button()
button2.set_label('bye!')
button2.set_relief(Gtk.ReliefStyle.NONE)
box2 = Gtk.Grid(orientation=Gtk.Orientation.HORIZONTAL)
box2.add(button2)
box2.show_all()

button2.connect("clicked", on_this_tab_clicked, tabs, 1)
key2, mod2 = Gtk.accelerator_parse("<Alt>2")
button2.add_accelerator("activate", accels, key2, mod2, Gtk.AccelFlags.VISIBLE)

tab_content2 = Gtk.Label()
tab_content2.set_text('bye!')
tabs.append_page(tab_content2, box2)
tabs.set_tab_reorderable(tab_content2, True)

window = Gtk.Window()
window.set_default_size(200, 200)
window.add(tabs)

window.add_accel_group(accels)
window.connect("delete-event", Gtk.main_quit)
window.show_all()
Gtk.main() 
```

这里有一些更好的链接。 [Gtk.Notebook set_current_page](https://developer.gnome.org/gtk3/3.5/GtkNotebook.html#gtk-notebook-set-current-page) [Gtk Accelerators](https://developer.gnome.org/gtk3/3.5/gtk3-Keyboard-Accelerators.html) 这些链接很好。只需使用和翻译任何类似以下内容的内容：

gtk_function_name（对象，参数）

进入：

gtk.object.function(args)

# python - Google App Engine ImportError

> ID：11773133
> 
> 赞同：0
> 
> 时间：2012-08-02T07:47:01.467
> 
> 标签：python, google-app-engine, web-applications, python-2.7

I've come to run my app in development locally this morning, in the Google App Engine Launcher for Windows. Up until yesterday this has been working fine, and the code hasn't been changed since then.

Now, when I try to run the app on localhost I get the yellow warning sign in the Launcher and the log shows the following;

```
2012-08-02 08:37:54 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files\\Google\\google_appengine\\dev_appserver.py', '--admin_console_server=', '--port=8080', 'C:\\Documents and Settings\\preston\\My Documents\\Google Drive\\Development\\Instance']"
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\dev_appserver.py", line 133, in <module>
    run_file(__file__, globals())
  File "C:\Program Files\Google\google_appengine\dev_appserver.py", line 129, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_main.py", line 157, in <module>
    from google.appengine.tools import appcfg
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\appcfg.py", line 41, in <module>
    import mimetypes
  File "C:\Python27\lib\mimetypes.py", line 29, in <module>
    import urllib
  File "C:\Python27\lib\urllib.py", line 26, in <module>
    import socket
  File "C:\Python27\lib\socket.py", line 47, in <module>
    import _socket
ImportError: Module use of python26.dll conflicts with this version of Python.
2012-08-02 08:37:55 (Process exited with code 1) 
```

I've only ever had Python 2.7 installed on this machine, nothing has ever attempted to use python26.dll before as far as I know...

Also, I've checked the Launcher for updates, nothing found. Has anybody experienced this before? The most baffling thing to me is that it's changed behaviour since yesterday...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:02:25.673

已解决：根据评论者的提示，我尝试关闭自上次成功运行以来已安装的所有正在运行的应用程序。这只有一个；谷歌云端硬盘。停止该进程允许 App Engine Launcher 正常运行应用程序，因此冲突来自两个 Google 应用程序！

谢谢您的帮助。

# codeigniter - Codeigniter MY_Controller 不加载 header/footer.php

> ID：11773139
> 
> 赞同：0
> 
> 时间：2012-08-02T07:47:22.823
> 
> 标签：codeigniter

我是新手。我终于可以让我的网站显示带有 MY_Controller.php 的页面，但页脚和页眉部分除外。

这是我的 MY_Controller.php：

```
class MY_Controller extends CI_Controller {

  protected $data = array();

  function __construct() {
    parent::__construct();
  }

  function render_page($view) {
    //do this to don't repeat in all controllers...
    $this->load->view('templates/header', $this->data);
    //menu_data must contain the structure of the menu...
    //you can populate it from database or helper

    $this->load->view($view, $this->data);
    $this->load->view('templates/footer', $this->data);
  } 
```

还有我的家庭控制器：

```
class Home extends MY_Controller {
         function __construct() {
    parent::__construct();
  }

        public function view($page = 'home')
        {
         $this->load->helper('text');
            $data['records']= $this->services_model->getAll();
            if ( ! file_exists('application/views/pages/'.$page.'.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }

            $data['title'] = ucfirst($page); // Capitalize the first letter

            $this->load->view('pages/'.$page, $data);

        } 
```

配置/config.rb：

```
$config['index_page'] = 'index.php';
$config['subclass_prefix'] = 'MY_'; 
```

配置/路由.rb：

```
$route['default_controller'] = 'home/view';
$route['(:any)'] = 'home/view/$1'; 
```

在源代码中，我只能看到 home.php 代码。未加载 header 和 footer.php 代码。你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:55:59.570

在您的`Home`控制器中，您直接加载视图，而不是使用`render_page`函数。

所以，改变：

`$this->load->view('pages/'.$page, $data)`

到：

`$this->render_page('pages/'.$page);`

希望这将加载页眉/页脚。

# cuda - CUDA 原子操作列表

> ID：11773141
> 
> 赞同：27
> 
> 时间：2012-08-02T07:47:35.600
> 
> 标签：cuda, gpu-atomics

我想知道是否有完整的原子操作列表。我在互联网上找不到类似的东西。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-02T07:56:43.913

请参阅 CUDA 编程指南[中有关原子函数](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-03T21:02:02.503

截至 2020 年 4 月（即 CUDA 10.2，图灵微架构），这些是：

*   添加
*   减法
*   最低限度
*   最大
*   按位与
*   按位或
*   按位异或
*   增量（带有环绕值）
*   递减（带有环绕值）
*   compare-and-swap - 这可能是最重要的，因为您可以使用 compare-and-swap “实现”基本上任何原子操作。

但请注意：

*   仅直接支持某些数据类型（大小从不超过 8 个字节）。
*   早期的微架构支持更少的操作和/或更少的类型。
*   CUDA 内存仅支持*对齐*访问——无论它们是常规的还是原子的。

有关详细信息，请参阅[CUDA 编程指南的](https://docs.nvidia.com/cuda/cuda-c-programming-guide/)[原子函数](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)部分。

# iphone - Saving array integer/indexes to NSUserDefaults

> ID：11773144
> 
> 赞同：0
> 
> 时间：2012-08-02T07:48:00.370
> 
> 标签：iphone, ios, xcode

I have a multiple picker, which I store it's selection in an array. It is retained within the app usage. But when the app is exited, it removes the selection view. What i wanted is after saving it to an array, Im going to save it in `NSUserDefaults` so when I open the app the selection will still be there. How can I store the index as a whole using `NSUserDefaults` then load it again for the picker.

Here is my loading of the `imagepicker` view part:

```
- (void)loadAssets
{
    count = 0;
    [self.assets removeAllObjects];

    AGIPCAssetsController *blockSelf = self;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

        selectedPhotos = [[NSMutableArray alloc] initWithArray:blockSelf.imagePickerController.selection];

        @autoreleasepool {
            [blockSelf.assetsGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
                //ALAssetRepresentation* representation = [result defaultRepresentation];
                // NSUInteger assetindex= [blockSelf.assetsGroup numberOfAssets];

                if (result == nil) 
                {
                    return;
                }

                AGIPCGridItem *gridItem = [[AGIPCGridItem alloc] initWithAsset:result andDelegate:blockSelf];
                if(count < blockSelf.imagePickerController.selection.count)
                {
                    if ( blockSelf.imagePickerController.selection != nil && 
                        [result isEqual:[selectedPhotos objectAtIndex:count]])
                    {

                        gridItem.selected = YES;
                        count++;

                    }
                }
                [blockSelf.assets addObject:gridItem];

            }];
        }

        dispatch_async(dispatch_get_main_queue(), ^{

            [blockSelf reloadData];

        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:59:28.507

保存数组

```
[[NSUserDefaults standardUserDefaults] setObject:yourArray forKey:@"KeyName"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后加载数组

```
yourArray = [[[NSUserDefaults standardUserDefaults] arrayForKey:@"KeyName"] mutableCopy]; 
```

确保键名相同

# php - Stored Procedure Error in MySQL/PHP

> ID：11773150
> 
> 赞同：0
> 
> 时间：2012-08-02T07:48:13.327
> 
> 标签：php, mysql, stored-procedures, cakephp

I am using cakephp to call a stored procedure like this:

```
$results = $this->query('call p2');
echo $results; 
```

I keep getting this error though:

```
Error: SQLSTATE[HY000]: General error: 2014 Cannot execute queries while other unbuffered 
queries are active. Consider using PDOStatement::fetchAll(). Alternatively, if your code 
is only ever going to run against mysql, you may enable query buffering by setting the 
PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute. 
```

My stored procedure is as follows (an works in MySQL):

```
DELIMITER //  

CREATE PROCEDURE `p2` ()  
LANGUAGE SQL  
DETERMINISTIC  
SQL SECURITY DEFINER  
COMMENT 'A procedure'  
BEGIN  
    SELECT 'Hello World !';  
END// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:49:32.380

编辑：我认为你在调用过程时遇到了一些问题，`cakephp`而不是在`MySQL`.

# sockets - Destroying socket.io websockets

> ID：11773151
> 
> 赞同：3
> 
> 时间：2012-08-02T07:48:29.633
> 
> 标签：sockets, websocket, socket.io

I will be creating dozens of web sockets and need to destroy the ones that no longer have anyone connected to it.

I am guessing that setting all references to null will not be enough. I want to save as much memory as possible.

Thanks

# facebook-c#-sdk - 在应用安装期间传递 GET 参数

> ID：11773154
> 
> 赞同：1
> 
> 时间：2012-08-02T07:48:52.290
> 
> 标签：facebook-c#-sdk

当用户安装应用程序时，页面会在没有初始 GET 参数的情况下被重定向。

例如：

1.  用户使用链接打开应用程序：http://apps.facebook.com/[app]/?request_ids=123&fb_source=wall
2.  此应用未安装，因此 Facebook 重定向到页面：https://www.facebook.com/dialog/oauth?client_id=[app]redirect_uri=http://apps.facebook.com/[app]/?scope =user_about_me,email&response_type=code
3.  用户确认必要的权限后，他被重定向到页面：https://apps.facebook.com/[app]/?code=[authorization code]

在最终 url 中缺少初始 GET 参数，因此我无法检测到用户从哪个 URL 访问我的应用程序。

我使用以下 C# 代码生成登录 url：

```
dynamic parameters = new ExpandoObject();
parameters.client_id = _configuration.AppId;
parameters.redirect_uri = _configuration.CanvasUrl;
parameters.scope = String.Join(",", accessScope);
parameters.response_type = "code";
return _facebookClient.GetLoginUrl(parameters); 
```

我不能在 parameters.redirect_uri 值中使用 GET 参数（Facebook 错误 - URL 不正确）。

请建议我如何使用初始 GET 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:43:11.500

您需要`redirect_uri`在身份验证的两个步骤中使用相同的参数 -

尽管您在那里没有包含足够的信息，但我怀疑身份验证对话框正在加载，用户正在接受它，但是您尝试交换`code`an`access_token`失败了，因为您没有使用相同的 redirect_uri （*带有*参数）

# asp.net - 将 ASP.NET 与 node.js 一起使用

> ID：11773159
> 
> 赞同：6
> 
> 时间：2012-08-02T07:49:11.937
> 
> 标签：asp.net, node.js, webserver

有什么办法可以同时使用 asp.net 和 node.js 吗？

我不这么认为，因为 node.js 是一个完全不同的网络服务器？

编辑澄清：我想将基于 node.js 的网站添加到现有的 asp.net 网络表单应用程序

# php - PHP APC CLI 操作码缓存无效

> ID：11773168
> 
> 赞同：0
> 
> 时间：2012-08-02T07:50:01.817
> 
> 标签：php, command-line-interface, apc

我想将 apc 用作具有操作码缓存功能的 cli。

使用`apc.enable_cli`为真。但注意到基准时间和内存使用情况。

```
; php.ini
apc.enable_cli = 1 
```

但在基于网络的使用中有所不同。我看到了 apc 是如何工作的，并为运行 php 脚本做了魔法。大约一半的内存使用量也比正常运行的 php 脚本快 0.01 左右。

但我认为 php 在 cli 中使用 apc 时不使用操作码缓存。我该如何使用它。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:45:07.293

我不希望 apc 在命令行上对性能有任何改进，因为每次运行都会删除 apc 缓存。

# php - 提取 PHP IMAP 附件

> ID：11773169
> 
> 赞同：0
> 
> 时间：2012-08-02T07:50:02.173
> 
> 标签：php, imap

您好，我有一个 PHP IMAP 函数，可以提取电子邮件特定正文的附件，我发现这篇文章：[http](http://www.linuxscope.net/articles/mailAttachmentsPHP.html) ://www.linuxscope.net/articles/mailAttachmentsPHP.html但它显示错误：警告：imap_bodystruct( ） [function.imap-bodystruct]：错误的消息号我不知道我错过了什么。这是我的代码

```
session_start();

include('settings.php');

include('vars.php');

$struct = imap_fetchstructure($mbox,$getmsgid, FT_UID);

$contentParts = count($struct->parts);

if ( $contentParts >= 2 ) {

    for ( $ii=2; $ii<=$contentParts; $ii++ ) {

        $att[$ii-2] = imap_bodystruct($mbox,$getmsgid, $ii);

        echo $ii . '<br />';
    }

for ($k=0;$k<sizeof($att);$k++) {

    if ($att[$k]->parameters[0]->value == "us-ascii" || $att[$k]->parameters[0]->value  == "US-ASCII") {

        if ($att[$k]->parameters[1]->value != "") {

            $selectBoxDisplay[$k] = $att[$k]->parameters[1]->value;

        }

    }elseif ($att[$k]->parameters[0]->value != "iso-8859-1" && $att[$k]->parameters[0]->value != "ISO-8859-1") {

        $selectBoxDisplay[$k] = $att[$k]->parameters[0]->value;

        }
    }

   }

   if (sizeof($selectBoxDisplay) > 0) {

echo "<select name=\"attachments\" size=\"3\" class=\"tblContent\"    onChange=\"handleFile(this.value)\" style=\"width:170;\">";

    for ($j=0;$j<sizeof($selectBoxDisplay);$j++) {

        echo "\n<option value=\"$j\">". $selectBoxDisplay[$j]    ."</option>";

    }

echo "</select>";

  } 
```

settings.php 包含我的 $mbox 连接，它工作正常，这里唯一的问题是 imap_bodystruct($mbox,$getmsgid, $ii); 我的语法有什么问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:37:11.063

我找到了答案：

替换以下行：

```
 $att[$ii-2] = imap_bodystruct($mbox,$getmsgid, $ii); 
```

到 ：

```
 $att[$ii-2] = imap_bodystruct($mbox, imap_msgno($mbox, $getmsgid), $ii); 
```

这显示附件，替换这一行：

```
 if (sizeof($selectBoxDisplay) > 0) {

  echo "<select name=\"attachments\" size=\"3\" class=\"tblContent\"    onChange=\"handleFile(this.value)\" style=\"width:170;\">";

   for ($j=0;$j<sizeof($selectBoxDisplay);$j++) {

    echo "\n<option value=\"$j\">". $selectBoxDisplay[$j]    ."</option>";

   }

   echo "</select>";

  } 
```

到 ：

```
 foreach($selectBoxDisplay as $attachments => $attVal){
     echo $attVal . '<br />';
  } 
```

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:41:26.500

在这里，您通过 UID 获取消息。

```
$struct = imap_fetchstructure($mbox,$getmsgid, FT_UID); 
```

大概当您获取身体部位时，您还需要通过 UID 进行操作：

```
$att[$ii-2] = imap_fetchbody ($mbox, $getmsgid, $ii, FT_UID) 
```

这应该通过 UID 和部件号获取正文部分。

您现有的调用`$att[$ii-2] = imap_bodystruct($mbox,$getmsgid, $ii);`将尝试按消息序列号获取消息，该序列号与 UID 不同。这个函数（我不清楚它的作用）似乎没有通过 UID 获取的选项。

还要记住，对于非常复杂的 MIME 消息，部分不一定是连续的（例如：1、2、3）；它们可以有子部分：1.1、1.2、2、3。如果您有一封包含 HTML 和纯文本的电子邮件，并且有附件，这很常见。

# jquery - JQuery Masonry 结合了无限滚动。无限滚动不保留 CSS

> ID：11773185
> 
> 赞同：0
> 
> 时间：2012-08-02T07:51:14.857
> 
> 标签：jquery

我已经将 JQuery Masonry 插件与 Infinite Scroll Plug in 结合起来，并且“无限滚动”块不保留 Masonry“块”的 CSS（参见 url）。我很困惑为什么以及如何解决这个问题。谢谢你。

[http://helpknow.com/black/](http://helpknow.com/black/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:54:06.943

Masonry 加载并格式化 DOM 对象。Infinite Scroll 然后将更多元素添加到 DOM。您需要告诉 Masonry 然后格式化这些新项目。

# excel - 仅使用等于或大于 X 的值格式化最后一个单元格

> ID：11773186
> 
> 赞同：0
> 
> 时间：2012-08-02T07:51:18.457
> 
> 标签：excel, excel-2007, excel-formula

如何使用条件格式将每列中的最后一个单元格格式化为最小值？
这意味着非 VBA 解决方案。

我试过使用这个公式，但它在第一次匹配后停止（5被格式化）：

```
AND(A2>=5,COUNTIF($A$2:A2,">=5")=1) 
```

使用这个数据，只有 9 应该被格式化。

**资料**：

```
1
2
3
4
5  <-- actual result
6
7
8
9  <-- expected result 
```

**更新：**
这个公式似乎可以解决问题，但仅当范围内的单元格值是数字时才有效，我的是数字，并且**仅**在 1 列中。范围必须与格式区域匹配。
注意：我在其他地方找到了“INDEX..E+307”部分，但丢失了 URL，因此无法给予信任。

```
AND(A2>=5,A2=INDEX($A$2:A10,MATCH(9.99999999999999E+307,$A$2:A10))) 
```

现在需要一个支持多列的公式。使用`OFFSET`可能是要走的路..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:08:43.123

我正在阅读这个问题：

我们希望突出显示列中的最后一个单元格，但前提是该列中的单元格至少包含一个足够大的值。

假设数据开始于`A1`，我想出了这个：

```
=AND(COUNTIF(OFFSET(A$1,,,COUNT(A:A),1),">=5")>0,ROW()=COUNT(A:A)) 
```

那里有一些假设：就像我们可以说非空值的数量可以用 来计算`COUNTA()`，或者数据从第 1 行开始，这样我们就可以找到最后一行`ROW()=COUNT(A:A)`。但希望你能明白...

如果您实际上是在寻找最大的价值，而不是最后一个，那么这是一个起点：

```
AND(A2>=5,A2=MAX($A$2:A10)) 
```

这也应该可以在多个列中找到最高值。如果您的表格会随着时间的推移而增长，那么您应该考虑使用`OFFSET()`公式定义范围。

# php - 根据 key => value 以降序排列关联数组

> ID：11773187
> 
> 赞同：-2
> 
> 时间：2012-08-02T07:51:19.310
> 
> 标签：php

你知道如何根据 time_sent 值以降序排列这个数组吗？

我一直在使用一些 ksort 或 usort，但仍然失败。

您的帮助将不胜感激！

谢谢！

```
Array
(
    [0] => Array
        (
            [time_sent] => 1343805651
        )

    [1] => Array
        (
            [time_sent] => 1343805328
        )

    [2] => Array
        (
            [time_sent] => 1343890728
        )

    [3] => Array
        (
            [time_sent] => 1343743340
        )

    [4] => Array
        (
            [time_sent] => 1343726917
        )

    [5] => Array
        (
            [time_sent] => 1343893364
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:33:22.390

尝试多重排序：

```
 array_multisort($array, SORT_DESC); 
```

# javascript - Chrome 扩展：从 URL 获取参数

> ID：11773190
> 
> 赞同：1
> 
> 时间：2012-08-02T07:51:29.240
> 
> 标签：javascript, url, google-chrome, google-chrome-extension, url-parameters

> **可能重复：**
> [在 JavaScript 中获取查询字符串值](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

我正在开发 Chrome 的扩展程序。我已经想出了如何从实际的 Chrome-Tab 中获取 URL。

```
chrome.tabs.getSelected(null, function(tab) {
  document.getElementById('currentLink').innerHTML = tab.url;
}); 
```

但现在我需要知道如何从 URL 中获取特定的参数。我已经尝试过不同的 Javascript 函数，但是当我实现它们时，我的扩展程序停止工作。

那么：如何从实际 URL 中获取特定参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:49:59.873

要在单个正则表达式中获取查询字符串，请使用：

```
var queryString = /^[^#?]*(\?[^#]+|)/.exec(tab.url)[1];
// Explanation of RegEx:
// ^[^#?]*                          (\?[^#]+   | )
// <Starts with any non-#/? string><query string OR nothing> 
```

然后，使用以下函数获取特定键的值：

```
function getParameterByName(queryString, name) {
    // Escape special RegExp characters
    name = name.replace(/[[^$.|?*+(){}\\]/g, '\\$&');
    // Create Regular expression
    var regex = new RegExp("(?:[?&]|^)" + name + "=([^&#]*)");
    // Attempt to get a match
    var results = regex.exec(queryString);
    return decodeURIComponent(results[1].replace(/\+/g, " ")) || '';
}

// Usage:
// Example: tab.url = "http://example.com/path?foo=bar&key_name=qs_value#"
var queryString = /\?[^#]+(?=#|$)|$/.exec(tab.url)[0];
var value = getParameterByName(queryString, 'qs_name');
// Result : value = "value";

// Example 2: Using the function to get a parameter from the current page's URL.
//  (e.g inside content script)
var value = getParameterByName(location.search, 'qs_name');
// Result : value = "value" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:31:38.857

不完全是正则表达式，但这应该有效：

```
var queryString=url.match(/\?.+$)[0].split('#')[0] 
```

这在大多数情况下应该有效。我将尝试挖掘我前段时间为此编写的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:00:01.510

创建了简单的函数来从这样的 URL 获取 Javascript 中的 URL 参数

**.....58e/web/viewer.html?page= *17* &getinfo= *33***

```
 function buildLinkb(param) {
        var val = document.URL;
        var url = val.substr(val.indexOf(param))  
        var n=parseInt(url.replace(param+"=",""));
        alert(n+1); 
    }
    buildLinkb("page"); 
```

输出：**18**

# grails - Grails：如何收集所有消息

> ID：11773193
> 
> 赞同：6
> 
> 时间：2012-08-02T07:51:32.663
> 
> 标签：grails, internationalization

我是 Grails 的新手，我继承了一个现有的应用程序。我有一个`message.properties`要修剪的大文件，以删除不再使用的密钥。

在 Django 中有一个命令`makemessages`遍历所有代码库并收集所有需要翻译的字符串，将它们添加到消息文件并注释掉不再存在的条目。Grails 有类似的工具吗？如果有帮助，该项目基于版本 1.3.9。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:19:16.127

没有这样的工具，但您可以创建自己的 gant 脚本。查看[Grails 应用程序中使用的所有 i18n 属性的列表](http://blog.armbruster-it.de/2010/07/getting-a-list-of-all-i18n-properties-used-in-a-grails-application/)并处理此列表。

# java - 如何使用 smack API 从 Google Talk 获取我的个人资料图片？

> ID：11773194
> 
> 赞同：2
> 
> 时间：2012-08-02T07:51:34.637
> 
> 标签：java, xmpp, smack, google-talk

如何使用 Smack API 或任何其他 API 从我的 Google Talk 个人资料中获取我的个人资料图片。我尝试使用 VCards 但它不起作用。我只获得了用户配置文件的 XML 表示：FirstName LastName。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:34:13.403

我找到了解决方案。看来我不能只在名单监听器上拍摄头像照片。这意味着只有在状态发生变化时，您才能看到用户的 Presence.Type 并获取其头像，但无法获取有关其个人资料的其他数据。如果有人知道原因或有解决方案，我会很高兴看到他的想法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-25T06:02:14.863

试试这个它工作完成。

```
try {
                    vCard.load(connection, entry.getUser());
                    vCard.getExtensions();
                    byte[] b = vCard.getAvatar();
                    Bitmap avatar = BitmapFactory.decodeByteArray(vCard.getAvatar(), 0, b.length);
                } catch (Exception e) {
                    Log.e("EXP-Image", "Not valid code");
                } 
```

# javascript - JQuery：从 URL 检索数据

> ID：11773196
> 
> 赞同：0
> 
> 时间：2012-08-02T07:51:38.800
> 
> 标签：javascript, jquery, url, parameters

我在 url 中“发送”一些数据：

```
foo.htm?mydata 
```

通过四处搜索，我知道我必须使用类似的东西：

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

但我对此有点困惑。有人可以帮我破译这个我只是希望最终结果放在`mydata`一个var中，例如：

```
var newvar = mydata 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:06:10.873

该`getParameterByName`函数（我假设您是从[这里](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)得到的）是为了检索查询字符串值而编写的。这意味着，当它看起来像这样时，您可以从 URL 访问数据：

`yourdomain.com/index.html?key=value&anotherkey=anothervalue`

现在你可以这样做：

```
var firstKey = getParameterByName("key");
var secondKey = getParameterByName("anotherkey"); 
```

如您的问题中所述，您**没有**键/值对。如果是这种情况，并且您只需要*之后*的部分`?`，只需使用[split](http://www.w3schools.com/jsref/jsref_split.asp)方法使用以下内容：

```
var newvar = document.URL.split("?")[1]; 
```

不过，我确实建议您使用键/值方法，以防您将来想传递更多变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:55:51.037

如果您需要大量 uri 解析，也许这个库很有趣：

[https://github.com/medialize/URI.js](https://github.com/medialize/URI.js)

# c# - 在数据库中插入一行

> ID：11773201
> 
> 赞同：2
> 
> 时间：2012-08-02T07:51:51.410
> 
> 标签：c#, .net, sql, database

我在理解数据库和 SQL 的工作方式时遇到了一些困难。我正在尝试更新数据库中的某一行。我可以删除一行，但是当我使用 InsertAt 函数时，它总是附加到我的数据库的末尾。此外，它被分配了一个新的标识符键。

我只想编辑那里已经存在的内容。不需要新键，我希望编辑的行保持原样。

我试图剥离代码以显示问题。

```
public partial class MainWindow : Window
{

    System.Data.SqlClient.SqlConnection con;
    System.Data.SqlClient.SqlDataAdapter da;

    DataSet sessions;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        con = new System.Data.SqlClient.SqlConnection();

        sessions = new DataSet();

        con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\Users\\md\\PokerDataBase.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";

        con.Open();

        string sql = "SELECT * From Sessions";
        da = new System.Data.SqlClient.SqlDataAdapter(sql, con);
        da.Fill(sessions, "Sessions");

        con.Close();

        System.Data.SqlClient.SqlCommandBuilder cb;
        cb = new System.Data.SqlClient.SqlCommandBuilder(da);

        DataTable dt = sessions.Tables["Sessions"];

        DataRow table = sessions.Tables["Sessions"].NewRow();
        table[0] = "Some Data";
        table[1] = "Some Data";
        table[2] = "Some Data";
        table[3] = 2;
        table[4] = 3;
        sessions.Tables["Sessions"].Rows[2].Delete();
        sessions.Tables["Sessions"].Rows.InsertAt(table, 2);

        da.Update(sessions, "Sessions");
    }
} 
```

谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:55:00.543

**错误**

您正在使用创建一个新行

```
DataRow table = sessions.Tables["Sessions"].NewRow(); 
```

这将为您的数据库添加新行，它不会更新行。

**解决方案**

要更新一行，您需要选择该特定行，例如：

```
DataRow table = sessions.Tables["Sessions"].Rows[0]; 
```

然后修改行数据，然后更新`da`。
这将更新数据库中的现有行。

# android - android：动态刷新imageview

> ID：11773206
> 
> 赞同：0
> 
> 时间：2012-08-02T07:52:02.430
> 
> 标签：android, multithreading, imageview, refresh, runnable

我有一个关于图像视图更新的问题。基本上，我有一个按钮和一个骰子。我希望骰子旋转几次（模拟掷骰子） - 0.5 秒，最后停止。问题是：我只能看到最终结果。掷骰子模拟正在进行，但未显示更改（未刷新图像视图）。我认为这是我对应该实施的方式的错误理解。

我在一个简单的项目中隔离了问题，几行代码，你可以在这里下载它（如果你有时间玩它）：[http://dl.dropbox.com/u/26268461/vrtiKocku_eng。 rar](http://dl.dropbox.com/u/26268461/vrtiKocku_eng.rar)

整个代码如下所示：

* * *

```
package com.viscode.vrtiKocku;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class VrtiKockuActivity extends Activity {
    /** Called when the activity is first created. */

    private final Handler mHandler = new Handler(); 
    Random randomGenerator = new Random();          
    private ImageView dice1;                        

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        dice1 = (ImageView)findViewById(R.id.imageView1);   
        mHandler.post(mRollDice);                               
    }

private final Runnable mRollDice = new Runnable() {

    public void run() {
        Button buttonRollDice = (Button) findViewById(R.id.buttonRollDice); 
        buttonRollDice.setOnClickListener(new View.OnClickListener() {      

            public void onClick(View v) {                               
                Integer rand, rollSimulationTimeLimit = 500, rollDuration = 100;;                               

                //simulate dice roll for 500 ms, by 5 rolls at 100 ms
                while (rollDuration < rollSimulationTimeLimit) { 
                    rand = randomGenerator.nextInt(6) + 1;
                    postaviKocku(rand, dice1);

                //  wait and SHOW the simulated roll for 100 ms = rollDuration
                try {
                    Thread.sleep(rollDuration);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                rollDuration += rollDuration;
                }                                               
            }
        }); 
    }
};

//this procedure sets the imageview to the proper image, based on the rolled number
private void postaviKocku(Integer rand, final ImageView dice) {
    switch (rand) {
    case 1:
            dice.setImageDrawable(getResources().getDrawable(R.drawable.one_red));                      
        break;
    case 2:
            dice.setImageDrawable(getResources().getDrawable(R.drawable.two_red));                      
        break;
    case 3:
            dice.setImageDrawable(getResources().getDrawable(R.drawable.three_red));                        
        break;
    case 4:
            dice.setImageDrawable(getResources().getDrawable(R.drawable.four_red));                     
        break;
    case 5:
            dice.setImageDrawable(getResources().getDrawable(R.drawable.five_red));                     
        break;
    case 6:
            dice.setImageDrawable(getResources().getDrawable(R.drawable.six_red));                      
        break;
    default:
        break;
    }
}

} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:29:50.647

使用 Handler 的 postDelayed 而不是 Threads..

```
 package com.viscode.vrtiKocku;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class VrtiKockuActivity extends Activity {
    /** Called when the activity is first created. */

    private final Handler mHandler = new Handler(); // handler
    Random randomGenerator = new Random(); // varijabla tipa random
    Boolean kocka1pritisnuta = false; // da li je kocka zakljucana ili ne
    Integer vkocka1; // drzi vrijednost kocke
    private ImageView kocka1; // varijabla imageview-a

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        kocka1 = (ImageView) findViewById(R.id.imageView1); // inicijalizira
                                                            // imageview
        mHandler.post(mBacaj); // pokrece handler
    }

    private final Runnable mBacaj = new Runnable() {

        public void run() {
            Button buttonBacaj = (Button) findViewById(R.id.buttonBacaj); // veze
                                                                            // button
                                                                            // za
                                                                            // varijablu
            buttonBacaj.setOnClickListener(new View.OnClickListener() { // postavlja
                                                                        // listener
                                                                        // na
                                                                        // dugme

                        public void onClick(View v) { // definise click event
                            // TODO Auto-generated method stub
                            Integer rand; // varijabla koja drzi rand broj
                            vrtiKocke(); // pokreni VRCENJE KOCKI

                            if (!kocka1pritisnuta) { // ako kocka nije
                                                        // zakljucana...
                                rand = randomGenerator.nextInt(6) + 1; // generisi
                                                                        // random
                                                                        // broj
                                vkocka1 = rand; // zapamti vrijednost da mozes
                                                // racunat poslije
                                postaviKocku(rand, kocka1,0); // postavi sliku
                                                            // kocke koja
                                                            // odgovara
                                                            // vrijednosti
                            }
                        }
                    });

            final ImageView kocka1 = (ImageView) findViewById(R.id.imageView1); // povezi
                                                                                // imageview
                                                                                // sa
                                                                                // kockom
            kocka1.setOnClickListener(new View.OnClickListener() { // postavi
                                                                    // listener
                                                                    // na kocku
                public void onClick(View v) { // definisi click event za kocku
                    kocka1pritisnuta = pritisniKocku(kocka1pritisnuta, kocka1); // izvrsi
                                                                                // click
                                                                                // event
                                                                                // za
                                                                                // kocku
                }
            });
        }
    };

    // ova procedura treba da vrti kocke do 500 milisekundi, trajanje je po 100
    // ms, znaci 5x se trabaju okrenuti
    private void vrtiKocke() {
        Integer rand, limit = 1000, trajanje = 200;
        while (trajanje < limit) {
            if (!kocka1pritisnuta) {
                rand = randomGenerator.nextInt(6) + 1;
                postaviKocku(rand, kocka1, trajanje);
            }

            rand = randomGenerator.nextInt(100);
            // cekaj vrijeme trajanja

            trajanje += trajanje;
        }
    }

    // ova procedura postavlja vrijednost kocke na onu vrijednost broja koji je
    // dobiven
    private void postaviKocku(final Integer rand, final ImageView kocka, Integer trajanje) {
        //Log.i("kocka", rand+"");
        switch (rand) {
        case 1:
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    Log.i("kocka", rand+"");
                    kocka.setImageDrawable(getResources().getDrawable(R.drawable.one_red));
                }
            }, trajanje);
            break;
        case 2:
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    Log.i("kocka", rand+"");
                    kocka.setImageDrawable(getResources().getDrawable(R.drawable.two_red));
                }
            }, trajanje);
            break;
        case 3:
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    Log.i("kocka", rand+"");
                    kocka.setImageDrawable(getResources().getDrawable(R.drawable.three_red));
                }
            }, trajanje);
            break;
        case 4:
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    Log.i("kocka", rand+"");
                    kocka.setImageDrawable(getResources().getDrawable(R.drawable.four_red));
                }
            }, trajanje);
            break;
        case 5:
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    Log.i("kocka", rand+"");
                    kocka.setImageDrawable(getResources().getDrawable(R.drawable.five_red));
                }
            }, trajanje);
            break;
        case 6:
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    Log.i("kocka", rand+"");
                    kocka.setImageDrawable(getResources().getDrawable(R.drawable.six_red));
                }
            }, trajanje);
            break;
        default:
            break;
        }
    }

    // ova procedura samo zakljucava ili otkljucava kocku
    private boolean pritisniKocku(boolean kockapritisnuta, ImageView kocka) {
        if (!kockapritisnuta) {
            kocka.setAlpha(128);
        } else
            kocka.setAlpha(255);
        return !kockapritisnuta;
    }

} 
```

# sql-server-2008 - TSQL：用于访问数据库的变量 (SQL Server 2008)

> ID：11773223
> 
> 赞同：0
> 
> 时间：2012-08-02T07:53:15.680
> 
> 标签：sql-server-2008, tsql

我编写了一个 T-SQL 脚本，将一些数据从一个数据库迁移到另一个数据库。目前我正在通过使用动态 sql 来做到这一点。

例如看下面的代码：

```
Declare @sqlquery nvarchar(4000)
SET @sqlquery = N'SELECT * from ' + @LinkServerName + @SourceDatabaseName + '.dbo.Table'
EXEC @sqlquery 
```

在此示例`@LinkServerName`中是一个`nvarchar`变量，用于存储包含源数据库的 SQL Server 的链接服务器的名称。`@SourceDatabaseName`是`nvarchar`存储源数据库名称的变量。

我不喜欢那样。我更喜欢以下代码：

```
SELECT * from @SourceDatabase.dbo.Table 
```

那可能吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:03:07.523

第二种方法是不正确的，第一种是正确的。[有关更多信息，请在 stackoverflow how-to-use-variable-for-database-name-in-t-sql 中](https://stackoverflow.com/questions/727788/how-to-use-variable-for-database-name-in-t-sql)查看其他问题

# javascript - 将数据推送到具有对值的数组中

> ID：11773225
> 
> 赞同：14
> 
> 时间：2012-08-02T07:53:32.733
> 
> 标签：javascript, arrays

如果它的类型是这样的，我如何将数据推送到 js 中的数组中...... 起初我想推送标签数据，然后推送值....我从 xml 文件中获取数据。如果我只有一个简单的数组，我会使用简单的 variable.push sintax。将 variable[][0].push 或 variable[][1].push 工作

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T08:02:08.403

也许你会更好地使用一个对象，

所以你可以做

```
var d  = {
"Label" : "Value"
}; 
```

并增加你可以的价值

```
d.label = "value"; 
```

如果您的数组变大，这可能是一种更结构化的方法并且更容易理解。而且，如果您构建的 JSON 有效，则很容易创建一个字符串并将其重新解析。

像 `var stringD = JSON.stringify(d); var parseD = JSON.parse(stringD);`

更新 - 二维数组

这就是你可以声明它的方式

```
var items = [[1,2],[3,4],[5,6]];

alert(items[0][0]); 
```

警报正在从中读取，

要向其中添加内容，您会说`items[0][0] = "Label" ; items[0][1] = "Value";`

如果你想做所有的标签，那么所有的值都会......

```
for(var i = 0 ; i < labelssize; i ++)
{
  items[i][0] = labelhere;
}

for(var i = 0 ; i < labelssize; i ++)
{
  items[i][1] = valuehere;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-02T07:54:45.913

你可以这样做：

```
var d = [];
d.push([label, value]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T08:34:49.763

您需要的是一组对象。

想象一下这个示例 XML：

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
   </book>
   <book id="bk102">
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
   </book>
</catalog> 
```

您的数据结构可能是：

```
var catalog = array(
  { 
    'id': 'bk101',
    'author': 'Gambardella, Matthew',
    'title': 'XML Developer\'s Guide',
    'genre': 'Computer'
  },
  {
    'id': 'bk102',
    'author': 'Ralls, Kim',
    'title': 'Midnight Rain',
    'genre': 'fantasy'
  }
); 
```

然后，您可以像访问数组一样访问数据。示例操作：

**读取值：**

```
var genre = catalog[0]['genre']; 
```

**添加新属性：**

```
catalog[1]['price'] = '15.50'; 
```

**列出所有标题：**

```
for (var i=0; i<catalog.length; i++) {
  console.log(catalog[i]['title'];
} 
```

# python - 多对多字段验证错误

> ID：11773227
> 
> 赞同：1
> 
> 时间：2012-08-02T07:53:50.533
> 
> 标签：python, django

我正在使用选择的 jquery。我已经添加了`null=True`and和。但是为什么我在模板中收到验证错误？我尝试提交表单而不在管理员中填写 ManyToManyField 和 ForeignKey 并且它可以工作但不能在 tempalte 中。你会帮忙吗？谢谢`blank=True``ManyToMany``ForeignKey``ManyToManyField`

多对多错误 -`Enter a list of values.`

模型

```
class Movie(models.Model):
    title = models.CharField(max_length=100)
    slug = models.SlugField(unique=True, max_length=100)
    director = models.ManyToManyField(Director, null=True, blank=True)
    writer = models.ManyToManyField(Writer, null=True, blank=True)
    producer = models.ManyToManyField(Producer, null=True, blank=True)
    starring = models.ManyToManyField(Starring, null=True, blank=True)
    screenplay = models.ManyToManyField(Screenplay, null=True, blank=True)

    editing = models.ForeignKey(Editing, null=True, blank=True)
    music = models.ForeignKey(Music, null=True, blank=True)
    studio = models.ForeignKey(Studio, null=True, blank=True)
    image = models.CharField(max_length=200, null=True, blank=True) 
```

电影表格

```
class MovieForm(ModelForm):

  class Meta:
    model = Movie
    exclude = ('slug', 'image')
    widgets = {
        'director': Select(attrs={'multiple class': 'chzn-select'}),
        'starring': Select(attrs={'multiple class': 'chzn-select'}),
        'producer': Select(attrs={'class': 'chzn-select'}),
        'writer': Select(attrs={'class': 'chzn-select'}),
        'studio': Select(attrs={'class': 'chzn-select'}),
        'editing': Select(attrs={'class': 'chzn-select'}),
        'screenplay': Select(attrs={'class': 'chzn-select'}),
        'music': Select(attrs={'class': 'chzn-select'}),
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:12:09.860

错误消息“输入值列表”意味着从表单返回的值不是列表或元组的实例，我认为问题是你使用`Select`小部件，它返回单个值（''如果为空），也许你应该使用`SelectMultiple`：

```
class MovieForm(ModelForm):
    class Meta:
        model = Movie
        exclude = ('slug', 'image')
        widgets = {
            'director': SelectMultiple(attrs={'class': 'chzn-select'}),
            ...
        } 
```

或者您可以在表单清理之前手动将值转换为列表/元组。

# c++ - 如何在应用程序启动后隐藏命令提示符？

> ID：11773228
> 
> 赞同：1
> 
> 时间：2012-08-02T07:53:54.847
> 
> 标签：c++, cmd, mingw

如何在程序启动**后**`-mwindows`使用 mingw 编译器抑制 c++ 应用程序的命令提示符。在链接器设置中效果很好，但我希望能够在程序运行时切换它，这可能吗?

*我正在使用文本编辑器和命令行，所以请不要与 IDE 相关的答案。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:26:47.100

据我所知：**不**，至少不是一个可执行文件。当您在基于 Windows 的控制台中打开应用程序时，它将启动一个实例，`conhost.exe`以便为您的命令行应用程序提供环境。只要您的应用程序尚未退出，控制台主机就会运行。

很难确定在哪些情况下需要这种行为。但是您可以创建两个应用程序 - 一个是简单的命令行应用程序，另一个是使用`-mwindows`. 后者可以调用第一个。第一个退出后，第二个将继续执行。

请注意，这会让用户感到困惑，因为在他看来您的应用程序已停止（因为控制台窗口已关闭）并且已`-mwindow`编译的应用程序不会创建任何 GUI 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T15:43:18.423

您可以使用 WinAPI 函数[ShowWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)隐藏和显示任何窗口。然而，有一个怪癖 - 此函数接受 HWND 句柄作为其参数，并且没有明显的方法来获取控制台 HWND。以下是获得它的非常复杂的方法：

```
HWND GetConsoleHwnd(void)
{
#define MY_BUFSIZE 1024 // Buffer size for console window titles.
    HWND hwndFound;         // This is what is returned to the caller.
    TCHAR pszNewWindowTitle[MY_BUFSIZE]; // Contains fabricated
    // WindowTitle.
    TCHAR pszOldWindowTitle[MY_BUFSIZE]; // Contains original
    // WindowTitle.

    // Fetch current window title.

    GetConsoleTitle(pszOldWindowTitle, MY_BUFSIZE);

    // Format a "unique" NewWindowTitle.
    TCHAR * format=_TEXT("%d/%d");
    wsprintf(pszNewWindowTitle,format,
            GetTickCount(),
            GetCurrentProcessId());

    // Change current window title.

    SetConsoleTitle(pszNewWindowTitle);

    // Ensure window title has been updated.

    Sleep(40);

    // Look for NewWindowTitle.

    hwndFound=FindWindow(NULL, pszNewWindowTitle);

    // Restore original window title.

    SetConsoleTitle(pszOldWindowTitle);

    return(hwndFound);
} 
```

Forgive me for this dirty trick, but it works perfectly in [my code](http://sourceforge.net/p/fakedetector/code/HEAD/tree/trunk/fakedefender/src/windows/WinGui.cpp) and is [an official way of getting console HWND.](http://support.microsoft.com/kb/124103/en-us)

# php - Azure 诊断不保存性能计数器

> ID：11773230
> 
> 赞同：0
> 
> 时间：2012-08-02T07:54:00.233
> 
> 标签：php, azure

我在我的 Azure PHP Web 角色中启用了诊断。它似乎确实已启用，因为它正在创建两个表`WADDiagnosticInfraestructureLogsTable`和`WADWindowsEventsLogTable`，以及将配置转储到 blob 容器中`wad-control-container`。

`PerformanceCounters`但它不是为 my 的其他两个部分（和`Logs`）创建表`diagnostics.wadcfg`。我究竟做错了什么？

这是我的`diagnostics.wadcfg`：

```
<DiagnosticMonitorConfiguration xmlns="http://schemas.microsoft.com/ServiceHosting/2010/10/DiagnosticsConfiguration" configurationChangePollInterval="PT1M" overallQuotaInMB="4096">

    <DiagnosticInfrastructureLogs bufferQuotaInMB="1024" scheduledTransferLogLevelFilter="Verbose" scheduledTransferPeriod="PT1M" />

    <Logs bufferQuotaInMB="1024" scheduledTransferLogLevelFilter="Verbose" scheduledTransferPeriod="PT1M" />

    <WindowsEventLog bufferQuotaInMB="1024" scheduledTransferLogLevelFilter="Verbose" scheduledTransferPeriod="PT1M">
        <DataSource name="Application!*"/>
        <DataSource name="System!*"/>
    </WindowsEventLog>

    <PerformanceCounters bufferQuotaInMB="1024" scheduledTransferPeriod="PT2M">
        <PerformanceCounterConfiguration counterSpecifier="\Memory\Available MBytes" sampleRate="PT1M"/>
        <PerformanceCounterConfiguration counterSpecifier="\Processor(_Total)\% Processor Time" sampleRate="PT1M"/>
        <PerformanceCounterConfiguration counterSpecifier="\Network Interface(*)\Bytes Sent/sec" sampleRate="PT1M"/>
        <PerformanceCounterConfiguration counterSpecifier="\Network Interface(*)\Bytes Total/sec" sampleRate="PT1M"/>
    </PerformanceCounters>

</DiagnosticMonitorConfiguration> 
```

这是 Azure 诊断转储到我的 Blob 存储中的配置文件：

```
<?xml version="1.0"?>
<ConfigRequest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <DataSources>
        <OverallQuotaInMB>4096</OverallQuotaInMB>
        <Logs>
            <BufferQuotaInMB>1024</BufferQuotaInMB>
            <ScheduledTransferPeriodInMinutes>1</ScheduledTransferPeriodInMinutes>
            <ScheduledTransferLogLevelFilter>Verbose</ScheduledTransferLogLevelFilter>
        </Logs>
        <DiagnosticInfrastructureLogs>
            <BufferQuotaInMB>1024</BufferQuotaInMB>
            <ScheduledTransferPeriodInMinutes>1</ScheduledTransferPeriodInMinutes>
            <ScheduledTransferLogLevelFilter>Verbose</ScheduledTransferLogLevelFilter>
        </DiagnosticInfrastructureLogs>
        <PerformanceCounters>
            <BufferQuotaInMB>1024</BufferQuotaInMB>
            <ScheduledTransferPeriodInMinutes>2</ScheduledTransferPeriodInMinutes>
            <Subscriptions>
                <PerformanceCounterConfiguration>
                    <CounterSpecifier>\Memory\Available MBytes</CounterSpecifier>
                    <SampleRateInSeconds>60</SampleRateInSeconds>
                </PerformanceCounterConfiguration>
                <PerformanceCounterConfiguration>
                    <CounterSpecifier>\Processor(_Total)\% Processor Time</CounterSpecifier>
                    <SampleRateInSeconds>60</SampleRateInSeconds>
                </PerformanceCounterConfiguration>
                <PerformanceCounterConfiguration>
                    <CounterSpecifier>\Network Interface(*)\Bytes Sent/sec</CounterSpecifier>
                    <SampleRateInSeconds>60</SampleRateInSeconds>
                </PerformanceCounterConfiguration>
                <PerformanceCounterConfiguration>
                    <CounterSpecifier>\Network Interface(*)\Bytes Total/sec</CounterSpecifier>
                    <SampleRateInSeconds>60</SampleRateInSeconds>
                </PerformanceCounterConfiguration>
            </Subscriptions>
        </PerformanceCounters>
        <WindowsEventLog>
            <BufferQuotaInMB>1024</BufferQuotaInMB>
            <ScheduledTransferPeriodInMinutes>1</ScheduledTransferPeriodInMinutes>
            <Subscriptions>
                <string>Application!*</string>
                <string>System!*</string>
            </Subscriptions>
            <ScheduledTransferLogLevelFilter>Verbose</ScheduledTransferLogLevelFilter>
        </WindowsEventLog>
        <Directories>
            <BufferQuotaInMB>0</BufferQuotaInMB>
            <ScheduledTransferPeriodInMinutes>0</ScheduledTransferPeriodInMinutes>
            <Subscriptions />
        </Directories>
    </DataSources>
    <IsDefault>true</IsDefault>
  </ConfigRequest> 
```

在我的`ServiceConfiguration.cscfg`我有这个：

```
<ConfigurationSettings>
    <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="[myconnectionstring]"/>
    [...]
</ConfigurationSettings> 
```

在我的`ServiceDefinition.csdef`：

```
<Imports>
    <Import moduleName="Diagnostics"/>
</Imports> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:47:07.830

你的配置看起来不错。

您是否给部署至少 5-10 分钟来开始创建表并开始记录？

# android - 我可以使用“序列化程序”吗？

> ID：11773232
> 
> 赞同：1
> 
> 时间：2012-08-02T07:54:07.267
> 
> 标签：android, parsing, xml-serialization, persistence

我一直在寻找*一种*快速简单的方法来解析包含数据元素和属性的自定义 XML 文件，如下所示：

```
<book>
    <book type="sci-fi">
    <book cost="25">
</book> 
```

除此之外，我将有一个包含这些元素的书籍类。而且很简单，我可以创建一个 XML：文件读取书籍类并将其转换为 XML。并且还能够读取 XML 并转换为新的书籍类。

所以我发现了这个[东西](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#start "事物")

其中包括以下几行：

```
Serializer serializer = new Persister();
Example example = new Example("Example message", 123);
File result = new File("example.xml");

serializer.write(example, result); 
```

我可以在 Android 应用程序中使用这些功能吗？序列化器和持久化器？或者它被称为有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:49:29.267

我认为您想将一个对象保存到本地文件中。

是的，在 android 中你可以使用 ObjectOutputStream 类来编写 Object（writeObject 方法），并使用 ObjectOutputStream 保存到文件中。对应的读取函数类是ObjectInputStream。但是，最重要的是你要保存的类对象必须实现 Serializable 接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T15:05:31.193

您可以使用 Android 附带的 XML 解析器。[参考](https://developer.android.com/training/basics/network-ops/xml.html#parse)

```
public List parse(InputStream in) throws XmlPullParserException, IOException {
    try {
        XmlPullParser parser = Xml.newPullParser();
        parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
        parser.setInput(in, null);
        parser.nextTag();
        return readFeed(parser);
    } finally {
        in.close();
    }
} 
```

这将返回解析器，并返回数据。InputStream 是您从中读取的流。

此外，这是从 android 文档复制的示例，并添加了说明：

```
private List readFeed(XmlPullParser parser) throws XmlPullParserException, IOException {
    List entries = new ArrayList();

    parser.require(XmlPullParser.START_TAG, ns, "feed");//We read the parser inputted, but we try to find a specific tag. This can be the base tag, or if you have multiple of the same type, get the first.
    while (parser.next() != XmlPullParser.END_TAG) {//As long as the parser doesn't detect an end tag
        if (parser.getEventType() != XmlPullParser.START_TAG) {//and it isn't a start tag
            continue;
        }
        String name = parser.getName();//we parse the tag found by the reader
        //Then there are if-statements to determine what type of tag it is. This example uses a specific type to look for, as this looks for <entry>
        if (name.equals("entry")) {
            entries.add(readEntry(parser));//If it is that tag, add it to the list of content
        } else {
            skip(parser);//else skip it
        }
    }
    return entries;
} 
```

此外，这可以应用于创建类：

一、入门类

```
public static class Entry {
    public final String title;
    public final String link;
    public final String summary;

    private Entry(String title, String summary, String link) {
        this.title = title;
        this.summary = summary;
        this.link = link;
    }
} 
```

然后解析：

```
// Parses the contents of an entry. If it encounters a title, summary, or link tag, hands them off
// to their respective "read" methods for processing. Otherwise, skips the tag.
private Entry readEntry(XmlPullParser parser) throws XmlPullParserException, IOException {
    parser.require(XmlPullParser.START_TAG, ns, "entry");//finds the children of the tag "entry"
    String title = null;
    String summary = null;
    String link = null;
    while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            continue;
        }
        //and using if-statements, we find the different types of tags, and distribute the content to the appropriate strings
        String name = parser.getName();
        if (name.equals("title")) {
            title = readTitle(parser);
        } else if (name.equals("summary")) {
            summary = readSummary(parser);
        } else if (name.equals("link")) {
            link = readLink(parser);
        } else {
            skip(parser);
        }
    }
    //And finally, we create a new entry
    return new Entry(title, summary, link);
}

//The following methods are the methods used to parse the different tags. 
//They are used as separate methods to make it more clear what goes where, 
//instead of pushing all these into the same method
// Processes title tags in the feed.
private String readTitle(XmlPullParser parser) throws IOException, XmlPullParserException {
    parser.require(XmlPullParser.START_TAG, ns, "title");
    String title = readText(parser);
    parser.require(XmlPullParser.END_TAG, ns, "title");
    return title;
}

// Processes link tags in the feed.
private String readLink(XmlPullParser parser) throws IOException, XmlPullParserException {
    String link = "";
    parser.require(XmlPullParser.START_TAG, ns, "link");
    String tag = parser.getName();
    String relType = parser.getAttributeValue(null, "rel");
    if (tag.equals("link")) {
        if (relType.equals("alternate")){
            link = parser.getAttributeValue(null, "href");
            parser.nextTag();
        }
    }
    parser.require(XmlPullParser.END_TAG, ns, "link");
    return link;
}

// Processes summary tags in the feed.
private String readSummary(XmlPullParser parser) throws IOException, XmlPullParserException {
    parser.require(XmlPullParser.START_TAG, ns, "summary");
    String summary = readText(parser);
    parser.require(XmlPullParser.END_TAG, ns, "summary");
    return summary;
}

// For the tags title and summary, extracts their text values.
private String readText(XmlPullParser parser) throws IOException, XmlPullParserException {
    String result = "";
    if (parser.next() == XmlPullParser.TEXT) {
        result = parser.getText();
        parser.nextTag();
    }
    return result;
}
  ...
} 
```

这可以很容易地修改以满足您的需求：将标签名称更改为您的标签，并将示例类修改为您想要的任何内容。我不确定您是否可以从属性中获取实例的价格，但如果添加子标签，您可能会得到相同的结果。例子：

```
<book>
    <type>sci-fi</type>
    <cost>
        <currency>USD</currency>
        <price>25</price>
    </cost>
</book> 
```

有了成本，您也可以直接申请 25。

或者您可以继续使用属性系统，但您需要添加[更多代码](https://stackoverflow.com/q/12389015/6296561)。而且，当前的 XML 文件你从来没有关闭标签（`<book type="sci-fi">`），你不应该在书标签内重复书标签。不是因为不鼓励这样做，而是因为您最终遇到了一个困难的局面，试图找出解析器找到的书标签。

* * *

此外，要编写 XML 文件，有许多不同的方法。为了在本地保存它，您可以使用 Serializable 更轻松地完成它：

```
public class Something implements Serializable{
...
} 
```

然后使用 Object[In/Out]putStream 读取或写入：

```
 ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(new File("o.ser")));

    //Save the object
    oos.writeObject(instance);
    // close the writing.
    oos.close(); 
```

并加载：

```
ObjectInputStream ois= new ObjectInputStream(new FileInputStream(new File("o.ser")));

instance = (Something) ois.readObject();//or Something instance = (Something)...
ois.close; 
```

但如果你真的想保存到 .xml 文件，这里有一种方法：

（这里使用的是内部存储，所以在应用程序的时候会删除。外部写入（公共访问区域）的概念是相同的，但写入方式不同）

```
public static String getString(String basetag, List<String> tags/*Raw name, e.g. book*/, List<String> value){
    if(basetag == null || basetag.equals("") || basetag.equals(" ")){
        throw new IllegalArgumentException("There has to be a base tag.");
    }
    String retval = "<" + basetag + ">\n";
    if(tags == null || value == null){
        throw new IllegalArgumentException("There have to be tags and values!");
    }
    if(tags.size() != value.size()){
        throw new IllegalArgumentException("There has to be as many tags as there are values");
    }
    assert tags.size() != 0;
    assert value.size() != 0;

    for(int i = 0; i < tags.size(); i++){
        String s = "<%s>%s</%s>\n";
        retval += String.format(Locale.ENGLISH, s, tags.get(i), value.get(i), tags.get(i));
    }
    return retval;
}

public static void save(String filename, String data, Context c){

    if(data != null && filename != null) {
        try {
            //Create the file if not exists
            File file = new File(c.getFilesDir() + "/", filename);
            if (file.getParentFile().mkdirs())
                file.createNewFile();
            //Access file and write
            FileOutputStream fos = c.openFileOutput(filename, Context.MODE_PRIVATE);
            fos.write(data.getBytes());

            fos.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }else{
        throw new NullPointerException("Filename and/or data is null");
    }
}

private static List load(String fn, Context c){
    String collected = null;
    FileInputStream fis = null;
    try{

        fis = c.openFileInput(fn);
        return parse(fis);

    }catch(Exception e){
        e.printStackTrace();
        return null;
    }finally{
        try {
            fis.close();
        } catch(NullPointerException npe){
            return null;
        } catch (Exception e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
        }
    }
}

public static List parse(InputStream in) throws XmlPullParserException, IOException {
    try {
        XmlPullParser parser = Xml.newPullParser();
        parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
        parser.setInput(in, null);
        parser.nextTag();
        return readFeed(parser);
    } finally {
        in.close();
    }
} 
```

* * *

在这篇文章的结尾，我真的建议你阅读[关于这个主题的 android 文档，](https://developer.android.com/training/basics/network-ops/xml.html#parse)因为它包含很多有价值的信息，这些信息可能比这个答案更新（如果答案已经更新了很长时间）

# perl - 是否可以重新定义子程序以针对部分代码进行本地化？

> ID：11773234
> 
> 赞同：1
> 
> 时间：2012-08-02T07:54:22.497
> 
> 标签：perl, module, subroutine, redefine

是否可以重新定义`_function_used_by_exported_function`only 中的`exported_function`调用`second_routine`？

```
#!/usr/bin/env perl
use warnings; 
use strict;
use Needed::Module qw(exported_function);

sub first_routine {
    return exported_function( 2 );
}

no warnings 'redefine';

sub Needed::Module::_function_used_by_exported_function {
    return 'B';
}

sub second_routine {
    return exported_function( 5 );
}

say first_routine();
say second_routine(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T08:26:43.270

`sub _function_used_by_exported_function`您可以在本地重新定义`sub second_routine`.

```
package Foo;
use warnings; 
use strict;
use base qw(Exporter);
our @EXPORT = qw(exported_function);

sub exported_function {
  print 10 ** $_[0] + _function_used_by_exported_function();
}

sub _function_used_by_exported_function {
  return 5;
}

package main;
use warnings; 
use strict;

Foo->import; # "use"

sub first_routine {
    return exported_function( 2 );
}

sub second_routine {
    no warnings 'redefine';
    local *Foo::_function_used_by_exported_function = sub { return 2 };
    return exported_function( 5 );
}

say first_routine();
say second_routine();
say first_routine(); 
```

`sub second_routine`我从 brian d foy 的*Mastering Perl*第 161 页第 10 章中提取了 typeglob 分配。通过分配给 typeglob 重新定义了 sub，它只替换了它的 coderef 部分。我[`local`](http://perldoc.perl.org/functions/local.html)过去只在当前块内执行此操作。这样，外部世界就不会受到变化的影响，正如您在输出中看到的那样。

```
1051
1000021
1051 
```

# uitableview - tableview 的 uitableviewcell 以磨损顺序和重复行显示

> ID：11773236
> 
> 赞同：0
> 
> 时间：2012-08-02T07:54:25.067
> 
> 标签：uitableview

这是一个聊天应用程序，我使用 tableview 来显示用户和其他人之间的聊天数据，但是我有行显示多个（重复）。代码如下：

```
#define kMyTag 1

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{   
    NSDictionary *messageDic = [self.chatArray objectAtIndex:indexPath.row];
    if ([[messageDic objectForKey:@"myself"]boolValue] == false) {
        static NSString *CellIdentifier = @"MessageChatFriendCell"; 
        MessageChatFriendCell *cell = (MessageChatFriendCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[MessageChatFriendCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }
        NSDictionary *chatInfo = [self.chatArray objectAtIndex:[indexPath row]];
        UIView *chatView = [chatInfo objectForKey:@"view"];
        chatView.tag = kMyTag;
        [cell.contentView addSubview:chatView];
        return cell;
    } else  {
        static NSString *CellIdentifier = @"MessageChatSelfCell";
        MessageChatSelfCell *cell = (MessageChatSelfCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[MessageChatSelfCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }
        NSDictionary *chatInfo = [self.chatArray objectAtIndex:[indexPath row]];
        UIView *chatView = [chatInfo objectForKey:@"view"];
        chatView.tag = kMyTag;
        [cell.contentView addSubview:chatView];
        return cell;
    }
} 
```

每行的打印结果是：

```
2012-08-02 15:44:47.152  MessageChatSelfCell-><UIView: 0x222790; frame = (85 0; 230 114); tag = 1; layer = <CALayer: 0x222320>>
2012-08-02 15:44:47.166  MessageChatFriendCell-><UIView: 0x21d790; frame = (0 0; 210 132); tag = 1; layer = <CALayer: 0x21d5c0>>
2012-08-02 15:44:47.176  MessageChatFriendCell-><UIView: 0x21bde0; frame = (0 0; 177 60); tag = 1; layer = <CALayer: 0x21be10>>
2012-08-02 15:44:47.183  MessageChatSelfCell-><UIView: 0x216430; frame = (85 0; 230 168); tag = 1; layer = <CALayer: 0x215fc0>>
2012-08-02 15:44:59.232  MessageChatFriendCell-><UIView: 0x215150; frame = (0 0; 86 60); tag = 1; layer = <CALayer: 0x214eb0>>
2012-08-02 15:45:00.465  MessageChatSelfCell-><UIView: 0x213220; frame = (85 0; 230 78); tag = 1; layer = <CALayer: 0x213250>> 
```

请指教，谢谢！

2012-08-08 更新

```
#define WRITER_NAME_LABEL_TAG 4
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{   
    static NSString *MessageChatSelfCellIdentifier = @"MessageChatSelfCell";    
    static NSString *MessageChatFriendCellIdentifier = @"MessageChatFriendCell";
    UITableViewCell *cell = nil;
    UIView *chatView = nil;
    NSDictionary *messageDic = [self.chatArray objectAtIndex:indexPath.row];
    NSString *text = [messageDic objectForKey:@"compiled"];
    BOOL myMessage = [[messageDic objectForKey:@"myself"] boolValue];

    if (myMessage) {
        cell = [tableView dequeueReusableCellWithIdentifier:MessageChatSelfCellIdentifier];

        if(cell == nil) 
        { 
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                           reuseIdentifier:MessageChatSelfCellIdentifier];

        chatView = [self bubbleView:[NSString stringWithFormat:@"%@", text] 
                                       from:YES];
        chatView.tag = WRITER_NAME_LABEL_TAG;
        NSLog(@"MessageChatFriendCell->%@",chatView);
        [cell addSubview:chatView];
        }else {
            chatView = (UIView *)[cell viewWithTag:WRITER_NAME_LABEL_TAG];
        }
    } else  {
        cell = [tableView dequeueReusableCellWithIdentifier:MessageChatFriendCellIdentifier];

        if(cell == nil) 
        { 
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                          reuseIdentifier:MessageChatFriendCellIdentifier];

        NSString *text = [messageDic objectForKey:@"compiled"];        
        UIView *chatView = [self bubbleView:[NSString stringWithFormat:@"%@", text] 
                                       from:NO];
        chatView.tag = WRITER_NAME_LABEL_TAG;
                NSLog(@"MessageChatSelfCell->%@",chatView);
        [cell addSubview:chatView];
        }else {
            chatView = (UIView *)[cell viewWithTag:WRITER_NAME_LABEL_TAG];
        }
    }  
        return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:41:18.483

您应该更改的几件事，首先不要将您的视图存储在 chatInfo 中，而是存储您的数据。
接下来仅在您创建新单元格时将视图添加到单元格，否则您将向重用的单元格添加多个视图。
看看下面的例子，这里我正在创建一个带有消息作者姓名的单元格，对于我的消息，作者姓名将在右侧，对于我的朋友消息，它将在左侧。请注意，我只是在创建新单元格时添加作者姓名标签，然后我给它一个标签，以便下次我想更改它时可以获取标签。

```
#define WRITER_NAME_LABEL_TAG 1

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MessageChatFriendCellIdentifier = @"MessageChatFriendCell";
    static NSString *MessageChatSelfCellIdentifier = @"MessageChatSelfCell";

    UITableViewCell *cell = nil;
    UILabel *writerNameLabel = nil;

    NSDictionary *messageInfo = [self.chatArray objectAtIndex:indexPath.row];
    BOOL myMessage = [[messageInfo objectForKey:@"myself"] boolValue];

    if (myMessage) {        
        // this is my message
        cell = [tableView dequeueReusableCellWithIdentifier:MessageChatSelfCellIdentifier];

        if(cell == nil) 
        { 
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                           reuseIdentifier:MessageChatSelfCellIdentifier] autorelease];

            writerNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 300, 20)];
            writerNameLabel.tag = WRITER_NAME_LABEL_TAG;
            writerNameLabel.textAlignment = UITextAlignmentRight;
            [cell addSubview:writerNameLabel];
        }
        else {
            writerNameLabel = (UILabel *)[cell viewWithTag:WRITER_NAME_LABEL_TAG];
        }
    }
    else {
        // this is my friend message
        cell = [tableView dequeueReusableCellWithIdentifier:MessageChatFriendCellIdentifier];

        if(cell == nil) 
        { 
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                           reuseIdentifier:MessageChatFriendCellIdentifier] autorelease];

            writerNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 300, 20)];
            writerNameLabel.tag = WRITER_NAME_LABEL_TAG;
            writerNameLabel.textAlignment = UITextAlignmentLeft;
            [cell addSubview:writerNameLabel];
        }
        else {
            writerNameLabel = (UILabel *)[cell viewWithTag:WRITER_NAME_LABEL_TAG];
        }
    }

    // get the current writer name from the model
    NSString *writerName = [messageInfo objectForKey:@"writer"];        

    // configure cell...
    writerNameLabel.text = writerName;

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:29:29.580

我回答了你的另一个问题[How to calculate the Width and Height of NSString on UILabel](https://stackoverflow.com/questions/12002314/how-to-calculate-the-width-and-height-of-nsstring-on-uilabel)

他们是类似的问题。下面的代码是来自另一个问题的 C&P。

那是因为你没有重用表格单元格，结构应该是这样的：

```
NSString *text = [messageInfo objectForKey:@"compiled"];
if(cell == nil) 
        { 
     writerNameLabel.numberOfLines = 0;
     writerNameLabel.textAlignment = UITextAlignmentRight;
     writerNameLabel.backgroundColor = [UIColor clearColor];
     [cell addSubview:writerNameLabel];
}
else {
     writerNameLabel = (UILabel *)[cell viewWithTag:WRITER_NAME_LABEL_TAG];
}
CGSize constraint = CGSizeMake(296,9999);
CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] 
               constrainedToSize:constraint 
                   lineBreakMode:UILineBreakModeWordWrap];
[writerNameLabel setFrame:CGRectMake(writerNameLabel.frame.origin.x, writerNameLabel.frame.origin.y, size.width, size.height)]; 
```

我已经完成并回答了您的一些问题，这是编写 tableview 控制器的正确方法。你的问题将得到解决。

# mono - gtk 编程中的“global::”是什么意思

> ID：11773237
> 
> 赞同：1
> 
> 时间：2012-08-02T07:54:25.110
> 
> 标签：mono, gtk#

我总是发现像“this.fixed1 = new global::Gtk.Fixed();”这样的代码 我不知道“global::”有用的是什么。有没有人可以解释这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:39:17.757

它用于消除符号的歧义 - 它只是意味着`Gtk`您所指的是顶级。如果没有它，如果您`Gtk`的代码中有一个嵌套符号（例如，`Foo.Gtk`命名空间）并且在`using Foo`某处有一个语句，编译器将无法知道您键入时的含义`Gtk`。

[http://msdn.microsoft.com/en-us/library/cc713620.aspx](http://msdn.microsoft.com/en-us/library/cc713620.aspx)如果您想了解更多信息。

# android - 在 nadroid 中重新启动时清除警报

> ID：11773240
> 
> 赞同：3
> 
> 时间：2012-08-02T07:54:32.787
> 
> 标签：android, alarmmanager

我想在 7 天后重复发布数据。为此，我使用警报管理器 setRepeat 方法。当手机重新启动时，警报会被清除。我使用引导接收器并再次设置警报。

但是，如果手机在第 6 天重启并再次设置闹钟，则闹钟将在第 6+7 天响起，而不是在第 7 天响起。有什么办法解决吗？？

对不起我的英语不好。请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T07:56:44.927

设置警报时，将触发时间保存在共享首选项中。并在启动接收器中再次设置警报，但在这种情况下，触发时间来自共享首选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:32:54.187

在你的 AndroidManifest.xml

```
<receiver android:name="com.Company.PackageName.BootCompletedReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

在您的 com.Company.PackageName.BootCompletedReceiver 类中

```
public class BootCompletedReceiver extends BroadcastReceiver 
{
    private Context mContext;
    private G9SharedPreferences oSharedPreferences;
    private AlarmManager amSchedules;

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        this.mContext = context;
        oSharedPreferences = new G9SharedPreferences(this.mContext);
        try 
        {
            vUpdateAlarmManager();  
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        finally
        {
            oSharedPreferences = null;
            this.mContext = null;
        }
    }

    @SuppressWarnings("deprecation")
    public void vUpdateAlarmManager()
    {
        vCancelAlaramManager();
        Date dCurrentDate = new Date(oSharedPreferences.GetLongPreferences(G9Constant.BACKUP_TIME, 0));     
        if(dCurrentDate.getTime() < new Date().getTime())
        {
            dCurrentDate.setDate(dCurrentDate.getDate() + 1);
        }
        vSetRepeatingAlarm(dCurrentDate);
    }

    public void vCancelAlaramManager()
    {
        Intent oIntent = new Intent(mContext, AlarmReceiver.class);
        PendingIntent oPendingIntent = PendingIntent.getBroadcast(mContext, 0, oIntent, 0);
        AlarmManager alarmManager = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);
        alarmManager.cancel(oPendingIntent);
        oPendingIntent.cancel();
    }

    public void vSetRepeatingAlarm(Date dScheduleTime)
    {
        amSchedules = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(mContext, AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

        amSchedules.setRepeating(AlarmManager.RTC_WAKEUP, dScheduleTime.getTime(), AlarmManager.INTERVAL_DAY , pendingIntent);
    }
} 
```

# wpf - 如何绑定到模板父级中的兄弟

> ID：11773245
> 
> 赞同：0
> 
> 时间：2012-08-02T07:54:43.707
> 
> 标签：wpf, binding, user-controls

我有一个带有 2 个模板的自定义 UserControl。我必须从第一个模板中的控件绑定到第二个模板中的控件。

当我尝试为目标控件命名时，我得到：

> 无法在元素“RichTextBox”上设置名称属性值“TheRichTextBox”。“RichTextBox”在元素“CustomElement”的范围内，当它在另一个范围中定义时，它已经注册了一个名称。

所以我必须使用相对绑定，但我唯一的选择是向上或向下查找可视化树。
这种情况有没有好的解决方案？

```
 <local:CustomElement Title="CustomElementInstance" >
        <local:CustomElement.SubHeaderContainer>
            <StackPanel Orientation="Horizontal">
                <ToggleButton 
                          IsChecked="{Binding Path=KladblokEditingState}" 
                          Command="{Binding Path=UpdateKladblokCommand}" CommandParameter="{Binding TheRichTextBox????, Path=Document}"/>             
            </StackPanel>
        </local:CustomElement.SubHeaderContainer >

        <RichTextBox IsReadOnly="{Binding Path=KladblokEditingNotState}" 
                     local:RichTextBoxHelper.DocumentXaml="{Binding Path=Kladblok.KladblokDocument}" />
    </local:CustomElement> 
```

# javascript - if 语句中的第 4 行是否从第 2 行开始？

> ID：11773249
> 
> 赞同：0
> 
> 时间：2012-08-02T07:54:47.673
> 
> 标签：javascript, if-statement, chaining

我正在尝试通过阅读 OPC 来了解链接以及如何自己做。我仍然很困。在学习这一点时，我遇到了一些让我大吃一惊的错误处理。从缩进来看，第 4 行似乎不是从第 2 行开始的 if 语句的一部分。我是否正确假设 2 行 if 语句不需要花括号，并且解释器假设当有缺少花括号，只有直接进行 if 语句的行是同一 if 语句的一部分；因此，第四行不是以下块中 if 语句的一部分：

```
 set: function (mystr, func) {
        if (!this[mystr])
            throw new Error("unknown hook " + mystr);
        this[mystr] = func;
    }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:56:18.270

它通常不是该*行*，而是if 语句之后的语句被认为属于它*。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:56:34.367

仅当块内有多个语句时才需要花括号。如果不使用大括号，则下一条语句（单个）将在块内，以下语句将在块外。

```
if (something)
    StatementIfTrue();
StatementEitherWay();

if (something)
{
    StatementIfTrue1();
    StatementIfTrue2();
}
StatementEitherWay();

if (something) StatementIfTrue(); StatementEitherWay(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:58:03.340

是的，第 4 行不在 if 块中。

没有大括号，只有紧随其后的下一条语句`if`将在 if 块中。

# c# - 使用 Twitterizer2 重新进行身份验证的预期方式

> ID：11773252
> 
> 赞同：0
> 
> 时间：2012-08-02T07:55:00.770
> 
> 标签：c#, twitterizer

我遇到了一个问题，我一直在 TweetSharp 从事一个项目，发现它有一些我无法克服的限制。做了一些研究，发现 Twitterizer 可以做我想做的事。

在应用程序被授权一次后缓存访问令牌和访问令牌秘密后，我无法确定如何使用 Twitterizer 重新进行身份验证。我应该缓存这些信息吗？是否有更多信息需要我再次重新进行身份验证？我做错了吗，如果有人能让我知道我应该做什么来重新验证那将是伟大的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:26:15.397

我发现缓存访问令牌并将其与未来的请求一起发送实际上就是所有需要做的事情。您可以从保存的缓存中为令牌分配它们的值，这些字段不是只读的。

# ruby-on-rails - 告诉嵌套资源使用特定的控制器

> ID：11773255
> 
> 赞同：2
> 
> 时间：2012-08-02T07:55:15.257
> 
> 标签：ruby-on-rails, routes

我有以下路线：

```
namespace :admin do
  scope 'foo', module: 'foo' do
    resources :bar
    resources :baz
  end

  scope 'lorem', module: 'lorem' do
    resources :ipsum
    resources :baz
  end
end 
```

现在，我希望 'baz' 资源使用相同的控制器（可在`controllers/admin/baz_controller.rb`但我不确定如何告诉 Rails 我希望这些资源在不同的命名空间下但使用相同的控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:02:23.313

它应该看起来像这样：

```
scope 'lorem', module: 'lorem' do
  resources :ipsum
  resources :baz, :module=>'foo', :controller=>'baz'
end 
```

这取决于控制器所在的模块。

有关详细信息，请参阅[Rails 指南](http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use)和[Rails API](http://apidock.com/rails/v3.2.3/ActionDispatch/Routing/Mapper/Resources/resources)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:28:40.283

也许这会有所帮助。

```
namespace :admin do
  resources :baz, path: 'foo/baz', as: 'foo_baz'
  scope 'foo', module: 'foo' do
    resources :bar
  end

  resources :baz, path: 'lorem/baz', as: 'lorem_baz'
  scope 'lorem', module: 'lorem' do
    resources :ipsum
  end
end 
```

请注意，您需要使用`as:`才能生成路径。但它们可以是别的东西。

不确定您是否还需要添加模块参数，但您明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T08:57:27.380

我认为在没有混乱路线的情况下做到这一点的唯一方法是创建一个从旧控制器继承的新控制器。

```
class Foo::BazController < Admin::BazController
end 
```

# iphone - 使 UITabView 默认显示导航控制器的第二级

> ID：11773256
> 
> 赞同：0
> 
> 时间：2012-08-02T07:55:16.177
> 
> 标签：iphone, objective-c, ios, xcode, xcode-storyboard

（抱歉无法嵌入我的图像）。

使用 iOS 故事板，我有一个 UITabBarController，其中嵌入了一个 UINavigation Controller/UITableView(1)。这个 UITableView(1) 然后调用另一个 UITableView(2)：

![](../Images/40354b38d106f5f5fda7d3ec0f3abcf9.png)

我要做的是让 UITableView(2) 在 Tab Bar 更改为该选项卡时出现，然后让 UINavigationBar 左箭头按钮存在以返回 UITableView(1)。

我能想到的现有功能是 iPhone 邮件应用程序，当您启动它时，您会看到您的收件箱，您可以点击左箭头邮箱按钮返回您的邮箱列表。

我尝试将标签栏直接附加到 UITableView(2) 但它没有按预期工作，当应用程序运行时没有左箭头返回按钮可以返回到上一个视图。

我还尝试向该 UITableView(2) 添加导航控制器，并且导航控制器正确显示，但仍然没有任何后退按钮：

![](../Images/e7896e6ab23a375b8d265db1e41e11d3.png)

任何关于我做错了什么的建议将不胜感激，我对情节提要相当陌生，很难找到要搜索的内容以使其正常工作。

如果仅使用情节提要本身不可能，是否有某种自动（不可见）推送到我可以做的第二个 UITableView ？

谢谢！缺口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:28:24.063

本教程一定会帮助你： http: [//maybelost.com/2011/10/tutorial-storyboard-in-xcode-4-2-with-navigation-controller-and-tabbar-controller-part1/](http://maybelost.com/2011/10/tutorial-storyboard-in-xcode-4-2-with-navigation-controller-and-tabbar-controller-part1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:12:49.600

您可以如下实现委托方法。

`(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController`

在此方法中，您可以检查 tabBarController.selectedIndex 或 viewController 对象。这样可以确保选择正确的选项卡，然后推送具有表 1 的控制器，然后推送具有表 2 的控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T08:01:28.637

我最终以以下方式实现它，因为我想在情节提要中执行大部分工作。

我使用嵌入 UINavigationController 的选项卡栏设置故事板，其中包含 UITableView(1)，然后包含 UITableView(2) 的自定义 segue：

![](../Images/78ec299ea5c85487f44e4c78a8ec13e9.png)

然后在与 UITableView(1) 关联的类中，我添加了这一行：

```
- (void)viewDidLoad {
    [self performSegueWithIdentifier:@"campaigns" sender:self];
     ...
} 
```

在加载选项卡时，UITableView(1) 的 viewDidLoad 立即调用 UITableView(2)，没有任何动画，向 UITableView(1) 显示返回按钮，这正是我想要的。

感谢回复的人！

# iphone - iOS NSArray 在索引处插入对象

> ID：11773269
> 
> 赞同：1
> 
> 时间：2012-08-02T07:56:14.177
> 
> 标签：iphone, ios, xcode, testing

我正在查看正在测试应用程序的设备的崩溃日志，我看到以下几行...

objc_exception_throw + 33

[__NSArrayM insertObject:atIndex:] +187

发生这种情况的代码如下。appData 是一个 NSDictionary，我希望 imageUrl 是 Internet 上 png 文件的 URL。

```
for (int i = 1; i <= [self getNumberOfScreenshots]; i++) {
    pathToUrl = @"screenshot_";
    pathToUrl = [pathToUrl stringByAppendingString:[[NSNumber numberWithInt:i] stringValue]];
    imageUrl = [self.appData valueForKey:pathToUrl];
    imageData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:imageUrl]];
    [NSMutableArrayObj addObject:imageData];
} 
```

什么会导致这种类型的错误？该错误很少发生..可能是 imageData 有时为零，因为它无法从 url 下载 png 图像，因此当我尝试将其添加到 NSMutableArrayObj 时会引发该异常？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:17:37.333

可能有两个原因，因为您没有更具体地描述错误

1）实际上你没有将内存分配给数组

2) 将 nil 值插入数组。要停止插入 nil，请执行以下操作：

```
 if(imageData)
 {
   [NSMutableArrayObj addObject:imageData];
 } 
```

# javascript - 我可以用 !important 添加 css 吗，只使用 jquery

> ID：11773276
> 
> 赞同：0
> 
> 时间：2012-08-02T07:56:51.697
> 
> 标签：javascript, jquery, css

嗨，我正在使用 jquery

我想给`important property`标签添加css颜色

我目前正在尝试

```
 jQuery(this).css('color','green !important') 
```

不用上课

像

```
label_class
{
    background-color:#f2f2f2 !important;
} 
```

并使用喜欢

```
jQuery(this).addClass('label_class'); 
```

我可以只用jquery来做吗，请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:59:02.010

是的，它并不难，但你应该尽量避免使用 !important 。

```
$("#tabs").css("cssText", "height: 650px !important;"); 
```

Heres a link to similar question [How to include !important in jquery](https://stackoverflow.com/questions/1986182/how-to-include-important-in-jquery)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T07:59:09.857

你永远不需要这样做。!important 标志表示样式应该优先。使用 jQuery，您将样式内联应用于元素，因此它已经具有最高优先级。

请注意，如果您正在使用`!important`，您可能做错了什么。考虑重组您的 CSS 选择器以确保您不需要它。

# javascript - 在页面加载之前执行 Javascript

> ID：11773277
> 
> 赞同：0
> 
> 时间：2012-08-02T07:56:54.587
> 
> 标签：javascript, jquery, html

我在使用 [Mysite](http://www.what4electronics.co.za)时遇到问题，导航栏是 javascript 和一些 jquery，我玩过一些代码来尝试让导航栏在页面查看之前加载，但似乎找不到正确的代码。什么会是实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:17:07.960

该脚本将在页面加载时执行

```
<script type="text/javascript">
    window.onload=body_load;

    function body_load()
    {

    dosomethingwithelementA();

    }

    </script>

    <div id="A"></div> 
```

或者，只要 dom 准备好，您就使用 jquery

```
$(document).ready(function()
{
    dosomethingwithelementA();

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:35:09.160

有几件事可以提供帮助：

1.  将`<script>`标签放在导航元素的正下方，如果是 jQuery 代码，请不要使用`$(document).ready(function(){`包装器，BC 会推迟执行，只要页面加载需要。
    或者，不要等待整个文档准备好，实际上没有什么可以阻止您执行类似`$('#navContainer').ready(function(){`的操作，以便在导航元素加载后立即执行 jQuery 位。

2.  也就是说，您无法真正确定何时加载，这有点超出您的掌控。但是，我看到人们使用类似的属性渲染 HTML `style="display:none;"`，然后在他们完成需要先完成/看到的事情后使用 JavaScript 删除该属性。缺点：一如既往：禁用 JS 的浏览器根本看不到任何内容。啊，好吧，搞砸他们

3.  还有更详细的答案。例如：为您的页面提供一个空的内容 div，并且只提供导航并将`onload`or`$(doc).ready`事件绑定到 ajax 调用以获取您网站的实际内容。但这就是，IMO，一个边缘疯狂的解决方法。

选择并选择上述任何选项，或一起使用所有选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:03:06.173

据我所知，在页面启动之前没有办法真正加载 HTML。您应该使用 JQUERY 事件来等待显示工具栏，直到它被加载。或者可能只是将“display:none”设置为您的工具栏，然后在添加所有效果后使用 window.onload 事件显示工具栏。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-02T08:02:12.180

将您的脚本包含在 中`<head></head>`，这可能会有所帮助。但是，仍然必须在触发任何 JS 之前加载 DOM。

# android - 从 SQLite 数据库中检索数据

> ID：11773279
> 
> 赞同：1
> 
> 时间：2012-08-02T07:57:08.720
> 
> 标签：android, sqlite, android-listview

在我如何从适配器类从 sqlite 数据库中检索数据并插入到 listview 中？

我遇到了困难，日夜编码并且不停地谷歌搜索，但是当我打开它们时我只是不明白这些链接。我最近才开始自己学习android编程...

我在下面附上了我的代码

```
public Cursor RetrieveActivityCursor(String NRIC){
    String where = NRIC;

Cursor cursor = _db.query(DATABASE_TABLE,new String[]{ MOBILE_HOUSE_VISIT_ID, ELDERLY_NAME,
        ELDERLY_NRIC, ELDERLY_DATE_TIME, PHYSICAL_HEALTH_STATUS, MENTAL_HEALTH_STATUS} , where, null, null, null, null);
//Cursor cursor = _db.query(DATABASE_TABLE, new String[] { ELDERLY_NAME,
        //ELDERLY_NRIC, DATE_TIME, PHYSICAL_HEALTH_STATUS, MENTAL_HEALTH_STATUS }, null, null, null, null, null);
return cursor;
} 
```

此代码来自我的适配器类，必须传入 nric 并返回插入到 listview 中的日期时间值

我不太确定如何编写代码来调用此方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:18:46.753

如果您正在扩展 SqliteOpenHelper 以进行数据库处理并使用另一个扩展 Activity 的类，其中您有您的 ListView，那么在您的 Activity 类中使​​您的类的对象像，

```
 YourDBClass helperDB;
 helperDB = new HelperDB(YourActivityClass.this); 
```

并从数据库中检索数据。

使光标参考像，

```
 Cursor cursor; 
```

然后，像这样，

```
 cursor = helperDB.RetrieveActivityCursor(NRIC);
 cursor.moveToFirst();
 while(!cursor.isAfterLast()) {
    // here you have to collect the data in the collection object.
    cursor.moveToNext();
 }
 cursor.close(); 
```

就是这样！你已经完成了从数据库中检索数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:20:11.167

你需要迭代游标，像这样：

```
Cursor cursor = RetrieveActivityCursor(NRIC);
if (cursor != null && cursor.moveToNext())
do {
    String str = cursor.getString(cursor.getColumnIndex("your_column"));

   // do something, your code

} while (cursor.moveToNext()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:29:27.203

您想在哪里检索日期值，请在此处执行以下操作。

```
 Cursor cursor = RetrieveActivityCursor(NRIC); 
 if(mCursor.moveToFirst()) {            
     do{ 
         String date_time = cursor.getString(cursor.getColumnIndex(column_name));
     } while(mCursor.moveToNext());
 }
 cursor.close(); 
```

# c# - c#中的异步事件

> ID：11773290
> 
> 赞同：1
> 
> 时间：2012-08-02T07:58:25.963
> 
> 标签：c#, windows-phone-7

在我的应用程序中，我有三个异步事件。

在所有这些都完成后，我需要调用一些 Method1()。

我该如何实现这个逻辑？

**更新**

这是我的异步事件之一：

```
 public static void SetBackground(string moduleName, Grid LayoutRoot)
        {
            var feedsModule = FeedHandler.GetInstance().ModulesSetting.Where(type => type.ModuleType == moduleName).FirstOrDefault();
            if (feedsModule != null)
            {
                var imageResources = feedsModule.getResources().getImageResource("Background") ??
                                     FeedHandler.GetInstance().MainApp.getResources().getImageResource("Background");

                if (imageResources != null)
                {

                    //DownLoad Image
                    Action<BitmapImage> onDownloaded = bi => LayoutRoot.Background = new ImageBrush() { ImageSource = bi, Stretch = Stretch.Fill };
                    CacheImageFile.GetInstance().DownloadImageFromWeb(new Uri(imageResources.getValue()), onDownloaded);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:05:53.397

每个事件处理程序设置的位字段（或 3 个布尔值）。每个事件处理程序检查条件是否满足然后调用 Method1()

```
tryMethod1()
{
   if (calledEvent1 && calledEvent2 && calledEvent3) {
       Method1();
       calledEvent1 = false;
       calledEvent2 = false;
       calledEvent3 = false;
   }
}

eventHandler1() {
    calledEvent1 = true; 
    // do stuff
    tryMethod1();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:06:15.113

没有给出任何其他信息，可以使用计数器。只是一个初始化为 3 的 int 变量，在所有处理程序中递减并检查是否等于 0，然后这种情况继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:26:14.903

您应该为此使用 WaitHandles。这是一个简单的示例，但它应该为您提供基本概念：

```
 List<ManualResetEvent> waitList = new List<ManualResetEvent>() { new ManualResetEvent(false), new ManualResetEvent(false) };

    void asyncfunc1()
    {
        //do work
        waitList[0].Set();
    }
    void asyncfunc2()
    {
        //do work
        waitList[1].Set();
    }

    void waitFunc()
    {
        //in non-phone apps you would wait like this:
        //WaitHandle.WaitAll(waitList.ToArray());
        //but on the phone 'Waitall' doesn't exist so you have to write your own:
        MyWaitAll(waitList.ToArray());

    }
    void MyWaitAll(WaitHandle[] waitHandleArray)
    {
        foreach (WaitHandle wh in waitHandleArray)
        {
            wh.WaitOne();
        }
    } 
```

# jquery - 无法使用 jquery 隐藏 div

> ID：11773292
> 
> 赞同：0
> 
> 时间：2012-08-02T07:58:50.363
> 
> 标签：jquery

我可以使用以下代码找到 div 名称：

```
var id = $("textbox").closest("div").attr("id"); 
```

如何根据上面获取的 id 隐藏 div。我尝试过以下代码：

```
$(id).hide(); 
```

它似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:59:50.043

你错过了#

```
$('#'+id).whatever() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:00:25.253

希望你得到正确的身份证。

然后使用`$('#'+id).hide();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:02:05.303

你一开始不需要 ID，只需使用你已经得到的 jQuery 对象：

```
$("textbox").closest("div").hide(); 
```

如果您想要该 ID 以供以后使用，则将对象存储在本地：

```
var oClosest = $("textbox").closest("div");
oClosest.hide();
var id = oClosest.attr("id"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:02:30.420

你真的不能吗

```
var myDiv = $("textarea").closest("div"); 
```

然后就做

```
myDiv.hide(); 
```

# r - 一个人如何混合 2 个或多个调色板来显示组合的颜色值

> ID：11773295
> 
> 赞同：6
> 
> 时间：2012-08-02T07:59:04.210
> 
> 标签：r, graphics, color-palette

我正在尝试创建一个颜色代表多个值组合的图。在下面的示例中，我将增加与 x 坐标相关联的红色值和增加与 y 坐标相关联的蓝色值。

```
#required function 'val2col' from: http://www.menugget.blogspot.de/2011/09/converting-values-to-color-levels.html

val2col<-function(z, zlim, col = heat.colors(12), breaks){
 if(!missing(breaks)){
  if(length(breaks) != (length(col)+1)){stop("must have one more break than colour")}
 }
 if(missing(breaks) & !missing(zlim)){
  zlim[2] <- zlim[2]+c(zlim[2]-zlim[1])*(1E-3)#adds a bit to the range in both directions
  zlim[1] <- zlim[1]-c(zlim[2]-zlim[1])*(1E-3)
  breaks <- seq(zlim[1], zlim[2], length.out=(length(col)+1)) 
 }
 if(missing(breaks) & missing(zlim)){
  zlim <- range(z, na.rm=TRUE)
  zlim[2] <- zlim[2]+c(zlim[2]-zlim[1])*(1E-3)#adds a bit to the range in both directions
  zlim[1] <- zlim[1]-c(zlim[2]-zlim[1])*(1E-3)
  breaks <- seq(zlim[1], zlim[2], length.out=(length(col)+1))
 }
 colorlevels <- col[((as.vector(z)-breaks[1])/(range(breaks)[2]-range(breaks)[1]))*(length(breaks)-1)+1] # assign colors to heights for each point
 colorlevels
}

#data
x <- seq(100)
y <- seq(100)
grd <- expand.grid(x=x,y=y)

#assign colors to grd levels
pal1 <- colorRampPalette(c("white", rgb(1,0,0)), space = "rgb")
col1 <- val2col(x, col=pal1(10))
pal2 <- colorRampPalette(c("white", rgb(0,0,1)), space = "rgb")
col2 <- val2col(y, col=pal2(10))
col3 <- NA*seq(nrow(grd))
for(i in seq(nrow(grd))){
    xpos <- grd$x[i]
    ypos <- grd$y[i]
    coltmp <- (col2rgb(col1[xpos])/2) + (col2rgb(col2[ypos])/2)
    col3[i] <- rgb(coltmp[1], coltmp[2], coltmp[3], maxColorValue = 255)
}

    #plot
png("2_color_scales.png", width=6, height=4, units="in", res=200)
layout(matrix(c(1,2,3), nrow=1, ncol=3), widths=c(4,1,1), heights=4, respect=T)
par(mar=c(4,4,2,2))
plot(grd,col=col3, pch=19)
par(mar=c(4,0,2,5))
image(x=1, y=x, z=t(as.matrix(x)), col=pal1(10), xaxt="n", yaxt="n", xlab="", ylab="")
box()
axis(4)
mtext("x", side=4, line=3, cex=0.7)
par(mar=c(4,0,2,5))
image(x=1, y=y, z=t(as.matrix(y)), col=pal2(10), xaxt="n", yaxt="n", xlab="", ylab="")
box()
axis(4)
mtext("y", side=4, line=3, cex=0.7)
dev.off() 
```

![在此处输入图像描述](../Images/7c81b4348768b54874a33fa9889aca5e.png)

结果在技术上是正确的，因为当 x = 1 和 y = 10 时，颜色“白色”和“蓝色”的混合分别返回较浅的蓝色阴影。但是，我更希望这个位置看起来像 y 颜色条中最深的蓝色一样“蓝色”。我想这将需要使用透明度来表示较低的值，而不是使用白色。有人对如何实现这一点有建议吗？添加两种颜色，包括它们的透明度，超出了我的范围......我认为可以使用透明度值作为混合步骤中的权重？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T08:22:04.010

由于我更熟悉`ggplot`，我将展示一个使用`ggplot`. 这样做的好处是，由于`ggplot`代码非常简单，我们可以将讨论重点放在颜色管理的主题上，而不是 R 代码上。

1.  首先使用`expand.grid`创建一个`dat`包含红色和蓝色输入值网格的数据框。
2.  使用该功能`rgb()`创建颜色混合，并将其分配给`dat$mix`
3.  阴谋。

编码：

```
dat <- expand.grid(blue=seq(0, 100, by=10), red=seq(0, 100, by=10))
dat <- within(dat, mix <- rgb(green=0, red=red, blue=blue, maxColorValue=100))

library(ggplot2)
ggplot(dat, aes(x=red, y=blue)) + 
  geom_tile(aes(fill=mix), color="white") + 
  scale_fill_identity() 
```

![在此处输入图像描述](../Images/a07d54df5f9b3c35585cae1214fbc2a0.png)

* * *

您会注意到色阶与您建议的不同，但可能更直观。

当混合光时，没有任何颜色会产生黑色，所有颜色都会产生白色。

情节清楚地表明了这一点，我觉得解释起来相当直观。

# javascript - 正则表达式：只有字母数字，但如果这是纯数字则不是

> ID：11773297
> 
> 赞同：12
> 
> 时间：2012-08-02T07:59:12.680
> 
> 标签：javascript, regex

例如：

```
'1'     => NG
'243'   => NG
'1av'   => OK
'pRo'   => OK
'123k%' => NG 
```

我试过了

```
 /^(?=^[^0-9]*$)(?=[a-zA-Z0-9]+)$/ 
```

但它工作得不是很好。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-02T08:02:17.170

采用

```
/^(?![0-9]*$)[a-zA-Z0-9]+$/ 
```

这个表达式有一个否定的前瞻来验证字符串不仅仅是数字。[使用RegExr](http://regexr.com?31n8g)查看它的实际效果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-02T08:02:52.200

所以我们知道某处必须至少有一个“字母”字符：

```
[a-zA-Z] 
```

它之前或之后可以有任意数量的字母数字字符（包括零），所以我们`[a-zA-Z0-9]*`在两边都填充：

```
/^[a-zA-Z0-9]*[a-zA-Z][a-zA-Z0-9]*$/ 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T08:02:37.063

试试这个：

```
/^(?!^\d*$)[a-zA-Z\d]*$/ 
```

**编辑**：由于这与公认的答案基本相同，我会给你一些不同的东西：

```
/^\d*[a-zA-Z][a-zA-Z\d]*$/ 
```

没有前瞻，没有重复的复杂组，它只是验证至少有一个字母字符。这应该很快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T08:22:26.527

试试这个：`^(?!\d+\b)[a-zA-Z\d]+$`
`(?!\d+\b)`将避免纯数字，添加 \w+ 然后混合字母和数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T08:16:04.740

这应该可以解决问题，无需向后看：

```
^(\d*[a-zA-Z]\d*)+$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T01:58:06.113

试试这个：`^[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]*$`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-31T13:27:22.363

这是严格的字母数字

```
String name="^[^a-zA-Z]\\d*[a-zA-Z][a-zA-Z\\d]*$"; 
```

# web-services - 如何使我的网络服务与 LDAP 服务器保持同步？

> ID：11773304
> 
> 赞同：1
> 
> 时间：2012-08-02T07:59:57.533
> 
> 标签：web-services, ldap

我想在外部 LDAP 服务器（例如 Active Directory 服务器）和我的网络服务之间建立连接。我想确保 LDAP 服务器中的特定用户组与我的 web 服务保持同步，例如，当用户从 LDAP 服务器中删除时，LDAP 服务器应该将此更改推送到我的 web 服务，以便可以从中删除用户我的网络服务也是如此。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:17:16.820

对您的问题的评论表明您应该根据需要从目录服务器检索数据，而不是尝试保持同步，我同意这一点。

如果您仍然希望同步，您可以使用[持久搜索](http://ff1959.wordpress.com/2011/10/13/mastering-persistent-search/)，它根据搜索参数通知连接的客户端数据库中的更改。然而，并非所有服务器都支持这种机制。

### 也可以看看

*   [Java中的持久搜索](http://ff1959.wordpress.com/2011/10/13/mastering-persistent-search/)
*   [LDAP：持久搜索](https://datatracker.ietf.org/doc/html/draft-ietf-ldapext-psearch-03)

# c# - 使用数据库时无法理解错误消息

> ID：11773306
> 
> 赞同：0
> 
> 时间：2012-08-02T08:00:04.677
> 
> 标签：c#, sql-server-2008

我可以读取数据库中的一行和一列，但是当我想写入同一个地方时，我收到一条错误消息，我不明白可能出了什么问题？

我收到此错误消息：

> 对于不返回任何键列信息的 SelectCommand，不支持为 UpdateCommand 生成动态 sql

我的代码：

```
 public void LoadData()
    {
        connection = new SqlConnection(connectionString);
        dataset = new DataSet();

        sql = "SELECT * From Guests";

        try
        {
            connection.Open();
            adapter = new SqlDataAdapter(sql, connection);
            adapter.Fill(dataset, "Guests");
            connection.Close();

            string test = Convert.ToString(dataset.Tables["Guests"].Rows[0][1]);
            MessageBox.Show(test, "This is only a test!",
                   MessageBoxButtons.OK, MessageBoxIcon.Exclamation);

            dataset.Tables["Guests"].Rows[0][1] = "Hello";

            connection.Open();
            new SqlCommandBuilder(adapter);
            adapter.Update(dataset.Tables["Guests"]);
            connection.Close();
        }
        catch
        {
            throw;
        } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:05:22.493

在您 SelectCommand 中，您必须返回主键，因为 SqlCommandBuilder 需要生成更新，并且您必须在表上设置主键

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder(v=vs.90).aspx)

“SelectCommand 还必须返回至少一个主键或唯一列。如果不存在，则会生成 InvalidOperation 异常，并且不会生成命令。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:06:26.673

您的选择查询需要返回表的主键。如果您的表没有主键，则需要设置一个。确保您的表包含主键....

# jquery - $.ajax() 成功和错误没有被调用

> ID：11773310
> 
> 赞同：3
> 
> 时间：2012-08-02T08:00:49.903
> 
> 标签：jquery

```
$.ajax({
    url: "captcheck.php",
    type: "GET",
    data: "code="+captcha.val(),        
    cache: false,
    success: function (html) {              
        if (html==1) {  
            captcha.removeClass('validation-error',animateSpeed);
            return true;
        } 
        else {
            captcha.addClass('validation-error',animateSpeed);
            return false;
        }    
    },      
    error: function(httpRequest, textStatus, errorThrown) { 
        alert("status=" + textStatus + ",error=" + errorThrown);
    }
}); 
```

现在这是一个非常简单的 ajax 函数，但它既没有被调用成功，也没有错误，我检查了 XHR 对 firebug 的响应和它的完美，仍然没有成功也没有错误被调用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:50:19.110

我无法最终测试您的代码，但我会给我两分钱：

*   添加“完成”回调函数以帮助您确定代码中是否存在任何语法错误。来自 jQuery 文档：““完成”是在请求完成时调用的函数（在执行成功和错误回调之后） "

*   使用简单的代码`alert('str')`和`console.log('str')`内部回调函数进行调试。

顺便说一句，是否`addClass`支持`removeClass`多个参数？[我在官方文档](http://api.jquery.com/removeClass/)中找不到 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:05:24.520

也许是`if (html==1)`因为成功回调返回字符串，你应该试试`if (html==="1")`

# c# - 跳过 x 个字符，然后在 c# 中为每个 y 个字符插入一个字符串

> ID：11773313
> 
> 赞同：0
> 
> 时间：2012-08-02T08:00:58.827
> 
> 标签：c#, regex, string, replace

给定一个刺痛，我如何跳过前 x 个字符，然后为每个 y 个字符插入一个值？

例如：

```
“Lorem ipsum dolor sit amet,” 
```

当跳过前 10 个字符然后为每 3 个字符插入“[here]”时变为：

```
“Lorem ipsu[here]m d[here]olo[here]r s[here]it [here]ame[here]t,” 
```

在 C# 中执行此操作的最有效、最快的方法是什么？

我当前的功能看起来像这样，但没有做跳过部分，我知道如何实现跳过部分，但使用的技术似乎不是最佳的：

```
public static string InsertHere(string source)
    {
        if (string.IsNullOrWhiteSpace(source))
        {
            return string.Empty;
        }

        int count = 0;
        var sb = new StringBuilder();
        foreach (char c in source)
        {
            count++;
            sb.Append(c);
            if (count == 10)
            {
                count = 0;
                sb.Append(@"[here]");
            }
        }
        return sb.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:21:03.733

不确定它是否更快（你真的需要对此进行基准测试）：

```
static Regex Rx = new Regex("(^.{10}|.{3})", RegexOptions.Compiled);

//...
var result = Rx.Replace(input, "$0[here]"); 
```

在正则表达式解决方案中使用静态编译的正则表达式以获得最佳速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:21:29.880

您必须对它们进行概要分析才能看到最好的方法，但这是我的努力，我已经将字符串阅读器引入了缓冲区方法。

```
 public static string InsertStringRepeatedly(string source, int skip, int insertEvery, string toInsert)
    {
        var sb = new StringBuilder();
        using (var sr = new StringReader(source))
        {
            var buffer = new char[Math.Max(skip, insertEvery)];
            var read = sr.Read(buffer, 0, skip);
            sb.Append(buffer, 0, read);
            while (sr.Peek() > 0)
            {
                sb.Append(toInsert);
                read = sr.Read(buffer, 0, insertEvery);
                sb.Append(buffer, 0, read);
            }
        }
        return sb.ToString();
    } 
```

**编辑：**

固定为边缘情况 source.Length < 10 或不是 10 + 3*x 的整数倍。现在也只使用一个缓冲区。

使用示例：

```
 private static void Main(string[] args)
    {
        var result = InsertStringRepeatedly("Lorem ipsum dolor sit amet,", 10, 3, "[Here]");
        Console.Write("\"");
        Console.Write(result);
        Console.WriteLine("\""); //quotes to show we dealt with edge cases correctly
        Console.ReadLine();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:22:31.293

没必要`Regex`。尝试`String`提高性能的方法：

```
string str = "Lorem ipsum dolor sit amet,";
var rep = "[here]";

var step = 10 + rep.Length;
while (str.Length > step)
{
    str = str.Insert(step, rep);
    step = step + 3 + rep.Length;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:23:51.907

我想我不妨把我的修改变成一个答案。

我应该强调，这可能不是最好的方法，但它是对你的代码进行最简单的修改，并且绝对有效......

```
public static string InsertHere(string source, int skip, int repeatPeriod)
{
    if (string.IsNullOrWhiteSpace(source))
    {
        return string.Empty;
    }

    int count = -1*(skip-repeatPeriod);
    var sb = new StringBuilder();
    foreach (char c in source)
    {
        count++;
        sb.Append(c);
        if (count == repeatPeriod)
        {
            count = 0;
            sb.Append(@"[here]");
        }
    }
    return sb.ToString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T08:29:52.923

我对 C# 还不是很精通（我有 VB 背景），但首先想到的是：

```
 string WordProcess(string StringToProcess, string InsertValue, byte NumberToProcess )
    {
        string Result = "";
        while (StringToProcess != "")
        {
            for (byte b = 0; b < NumberToProcess; b++)
            {
                string TempString = StringToProcess;
                Result += TempString.Remove(1, TempString.Length - 1);
                StringToProcess = StringToProcess.Remove(0, 1);
            }
            Result += InsertValue;
        }
        return Result;
    } 
```

我已经尝试过了，它似乎对我来说效果很好，所以你应该能够复制并粘贴它并按原样使用它。不知道它有多快，但它至少可以工作。

我希望你觉得这很有用/有帮助。

# c# - 从选定的月历日期获取星期

> ID：11773314
> 
> 赞同：1
> 
> 时间：2012-08-02T08:01:10.920
> 
> 标签：c#, week-number, monthcalendar

我需要一个解决方案来计算从所选日期开始的星期。（在月历中）
我试过：

```
DateTime dt1 = new DateTime(monthCalendar1.SelectionStart.Year, 
                            monthCalendar1.SelectionStart.Month, 
                            monthCalendar1.SelectionStart.Day);

DateTime dt2 = new DateTime(monthCalendar1.SelectionStart.Year, 
                            1, 
                            1);

System.TimeSpan varTime = dt1 - dt2;
int weeks = (varTime.Days / 7) + 1; 
```

但是一周的开始和结束日期不正确，在某些年份我有 53 周？
解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:04:28.640

```
public int WeekNumber(DateTime date)
{
    CultureInfo ciCurr = CultureInfo.CurrentCulture;
    int weekNum = ciCurr.Calendar.GetWeekOfYear(date,
                                          CalendarWeekRule.FirstFourDayWeek,
                                          DayOfWeek.Monday);
    return weekNum;
} 
```

请记住将 CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday 更正为您当前的文化，这里的一个用途是丹麦/丹麦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:16:01.670

试试日历的 GetWeekOfYear 函数。查看此处并向下滚动以获取完整示例：http: [//msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx)

# sql - 部署时 Sql 报告服务目录 ID 更改

> ID：11773315
> 
> 赞同：1
> 
> 时间：2012-08-02T08:01:12.993
> 
> 标签：sql, reporting-services

我有一个使用 SQL 报告服务的项目。在项目中，我有一个 UI 可以向他们的系统声明现有报告，因此他们不必查看他们不需要的所有报告。为了做这个声明，我在 ReportServer 数据库中使用 CatalogId，我的表中的目录表来获取数据。但是当我将报告部署到服务器时，CatalogId 会发生变化，这给我带来了一个大问题。

ReportServer 是否将更改保留在服务器上？

如何通过使用旧的 CatalogId 获取新的 CatalogId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:50:03.273

首先要尝试回答您的问题，您应该使用 ReportServer 数据库的 Catalog 表中的 ItemID。此 GUID 会被维护，并且在重新部署报告时将持续存在。仅当删除并重新部署报告时，它才会更改。

只有在运行报告时才会维护这些 ItemID。您可以在 ExecutionLogStorage 表中找到旧版 GUID 作为 ReportID。ELS 仅将数据存储到您在 ConfigurationInfo 表中设置了“ExecutionLogDaysKept”设置的任何位置。

其次，不需要自定义 UI，因为使用适当的文件夹结构，您可以通过 Active Directory 组维护报告权限。没有报告权限的组中的个人看不到它们。

# ruby-on-rails - 除非零/零，否则 Rails/Ruby 单线？

> ID：11773319
> 
> 赞同：1
> 
> 时间：2012-08-02T08:01:35.353
> 
> 标签：ruby-on-rails, ruby, conditional

有没有办法让这种情况在 Rails 视图中更加紧凑？

例如我有火腿

```
= object.count unless object.count ==0 
```

我有点不喜欢我在那里重复这个功能，我宁愿有类似的东西

```
= object.count unless ==0 
```

例如，如果我有更复杂的陈述

```
= object.relations.where(attribute: "something").count unless zero? 
```

我可以把它分成两行说

```
- cnt = object.relations.where(attribute: "something").count
= cnt unless cnt==0 
```

但是对于每种情况，我都会有多行，并且存储一个要使用一次的变量很糟糕。

编辑：只是为了详细说明我想检查数字是否为 0，如果是，则不显示任何内容。这样看起来更好看。

***更新：***

其中一个答案提出了沿着这些思路的解决方案

```
class Object
  def unless
    self unless yield(self)
  end
end 
```

所以我可以用一个块来调用我拥有的任何对象，例如。`.unless{|c| c<1}`

这让我可以附加条件，并清楚地知道发生了什么:)，奖励是因为它是块驱动的，我可以在任何对象上使用它：P。

谢谢大家 ：）

**更新更多**

在`|c|`块吸。所以我查了api也改了

```
class Object
  def unless(&block)
    self unless instance_eval(&block)
  end
end 
```

所以现在我可以使用 .count.unless{zero?} 来完成这个：P。或者，如果我有一个复杂的情况，我可以将其添加到`|c|`etc中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:06:09.267

如果 object 是一个数组，您可以使用`object.empty?`（或`object.any?`相反的情况）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:10:41.230

只需创建一个视图助手：

```
def display_count_or_nothing(array)
  array.count unless array.count == 0
end 
```

在视图中，您可以像这样使用它：

```
<%= display_count_or_nothing(array) %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T11:08:16.793

我认为以下内容很好很清楚，虽然我讨厌变量“对象”，但如果变量的名称描述了数组的内容（复数形式）会更好

```
= object.count unless object.empty? 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T08:31:31.173

如果这只是关于`count`，你可以猴子补丁`Enumerable`：

```
module Enumerable
  def count_or_empty_string
    self.any? ? self.count : ''
  end
end 
```

如果`object`是可枚举的，您可以这样做：

```
= object.count_or_empty_string 
```

这将返回一个`""`if`object.count == 0`否则它将返回一个整数。因此不再需要`unless`或`if`在您的 HAML 中。

# spring - 具有多个选项卡会话解决方法的 Spring MVC PRG 模式

> ID：11773320
> 
> 赞同：2
> 
> 时间：2012-08-02T08:01:35.863
> 
> 标签：spring, spring-mvc

我有以下顺序。

```
View1（POST 表单）-> PostController（创建模型和重定向）-> GetController -> View2
```

我正在使用 RedirectAttributes 在 PostController 和 GetController 之间传递模型，我有

```
类 PostController {
    public String mypost(..., final RedirectAttributes redirectAttrs){
        //创建模型
        redirectAttrs.addFlashAttribute("model", model);
        返回“重定向：myget”；
    }
}

```

和

```
@SessionAttributes("模型")
类获取控制器 {

    public ModelAndView myget(@ModelAttribute("model") final Model model){
        ModelAndView mav = new ModelAndView("view2");
        mav.addObject("模型", 模型);
        返回mav；    
    }
}

```

当用户在浏览器上打开多个选项卡，然后刷新之前的选项卡时，它将被后面打开的选项卡覆盖。

我希望每个标签都是独立的，希望有人指出我正确的方向。

谢谢。

**编辑**

问题出在@SessionAttributes("model")。我使用它是因为“Flash 属性在重定向之前临时保存（通常在会话中），以便在重定向之后可用于请求并**立即删除**。”。因此，选项卡会相互覆盖，因为会话中的模型已更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:20:11.760

通常，当我使用 PRG 时，我会尝试将所有相关属性放在重定向 url 中。像这样的东西...

```
public String myPost(ThingBean thingBean){
    Thing t = myService.updateThing(thingBean);
    return "redirect:thingView?id="+t.getId();    
} 
```

这样，当您拦截重定向的 get 请求时，您不必依赖任何先前存储的会话数据。

```
@RequestMapping(value="thingView",method=RequestMethod.Get)
public String thingView(Map<String,Object> model, @RequestParam(value="id") Integer id){
    model.put("thing",myService.getThing(id));
    return "thing/viewTemplate";    
} 
```

将模型保留为会话属性有点像将页面存储在全局变量中。这不是一个好主意。当您在页面上点击刷新时，get 请求只会发送 url 中的内容（如果您正在使用它，可能还会发送一些 cookie 数据）。

# java - 如何对具有变量作为列表的列表进行排序

> ID：11773321
> 
> 赞同：2
> 
> 时间：2012-08-02T08:01:40.247
> 
> 标签：java, collections

我有 ABC 课

```
class ABC{
 private List<XYZ> xyzList -- Though its list it contains single object;
 private String txt;
}
class XYZ{
 private long price;
} 
```

我想根据类 XYZ 价格变量对 List abcList 进行排序。请提供按升序排序的最佳方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T08:04:20.233

您是否尝试过以下方法之一：

```
java.util.Collections.sort(List<T>) 
```

或者

```
java.util.Collections.sort(List<T>, Comparator<? super T>) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T08:04:57.680

一种方法是实现`Comparable`接口`XYZ`并覆盖`compareTo`，然后`Collections.sort(yourListOfXYZ)`对列表进行排序。

其他方式是使用`Comparator`.

```
Collections.sort(xyzList, new Comparator<XYZ>() {
            @Override
            public int compare( XYZ e1,XYZ e2) {
                return Long.valueOf(e1.getPrice()).compareTo(Long.valueOf(e2.getPrice()));
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:04:03.783

尝试这个

> Collections.sort(xyzList);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T11:00:55.753

[来自http://java2novice.com/java-collections-and-util/arraylist/sort-comparator/](http://java2novice.com/java-collections-and-util/arraylist/sort-comparator/)的示例代码

```
public class MyArrayListSort {

public static void main(String a[]){

    List<Empl> list = new ArrayList<Empl>();
    list.add(new Empl("Ram",3000));
    list.add(new Empl("John",6000));
    list.add(new Empl("Crish",2000));
    list.add(new Empl("Tom",2400));
    Collections.sort(list,new MySalaryComp());
    System.out.println("Sorted list entries: ");
    for(Empl e:list){
        System.out.println(e);
    }
}
}

class MySalaryComp implements Comparator<Empl>{

@Override
public int compare(Empl e1, Empl e2) {
    if(e1.getSalary() < e2.getSalary()){
        return 1;
    } else {
        return -1;
    }
}
}

class Empl{

private String name;
private int salary;

public Empl(String n, int s){
    this.name = n;
    this.salary = s;
}

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public int getSalary() {
    return salary;
}
public void setSalary(int salary) {
    this.salary = salary;
}
public String toString(){
    return "Name: "+this.name+"-- Salary: "+this.salary;
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T08:04:54.820

我建议您查看[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口的文档。即使使用[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)也是可能的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T08:09:03.940

在您的情况下，您需要使 XYZ 实现`Comparable`，提供一个`Comparator<XYZ>`或更简单的选项是打开它并使用 a`List<Double>`或 a`SortedSet<Double>`来保持您的价格。

# ruby - 当我尝试 mytext.include 时在 ruby 中？(">型号<") 返回假

> ID：11773327
> 
> 赞同：0
> 
> 时间：2012-08-02T08:02:08.733
> 
> 标签：ruby, string, watir

在我尝试`mytext.include?(">Model number<")`返回的红宝石中`false`。但是`mytext.include?("Model number")`返回`true` 第一个条件有什么问题？

`mytext``"Model number"`包含里面的字符串`">"`和`"<"`

这是相关的 HTML：

```
<div class="bucket"> <div class="h1"><strong>Product Specifications</strong></div> <div class="content"> <div class="tsSectionHeader">Product Information</div> <div class="tsTable"> <div class="tsRow"><span class="tsLabel">Model number</span><span>516C</span></div> <div class="tsRow"><span class="tsLabel">Maximum weight recommendation</span><span>35 Pounds</span></div> <div class="tsRow"><span class="tsLabel">Material Type</span><span>Wood</span></div> </div> </div> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:16:17.980

你必须学习一些 HTML。`>`并且`<`是`span`标签的一部分：`<span></span>`。

这是文本出现的地方：

```
<span class="tsLabel">Model number</span> 
```

所以 a`span`有 text `Model number`。您可以通过以下方式使用 Watir 获取文本：

```
browser.span(:class => "tsLabel").text 
```

# c# - 如何解决 jquery 自定义 Timer 问题？

> ID：11773335
> 
> 赞同：1
> 
> 时间：2012-08-02T08:02:35.767
> 
> 标签：c#, javascript, jquery, datetime, timer

我创建了一个自定义 Jquery 计时器。但我面临的小问题我不知道这对我不起作用。下面是我的代码。

```
 function show(Hos, mins, secds) {

        var hours = Hos;
        var minutes = mins;
        var seconds = secds;
        var dn = "AM";
        if (hours > 12) {
            dn = "PM"
            hours = hours - 12
        }
                    if (hours == 0)
                        hours = 12

        document.getElementById('<%= Label1.ClientID %>').innerHTML = hours + ":" + minutes + ":" + seconds + " " + dn
        if (parseInt(seconds) == 59) {
            seconds = 0;
            if (parseInt(minutes) == 59) {
                if (parseInt(hours) == 12) {
                    hours = 0;
                } else {
                    hours = parseInt(hours) + 1;
                }
            } else {

                minutes = parseInt(minutes) + 1;
            }
        } else {
            seconds = parseInt(seconds) + 1;

        }

        setTimeout("show('" + hours + "','" + minutes + "','" + seconds + "'" + " )", 1000)
    } 
```

这段代码运行良好，我第一次使用 c# 从后面的代码中传递小时、分钟、秒。现在我的问题是，如果秒小于 9、分钟小于 9 和小时小于，我想添加“ **0** ” 9\. 我尝试了以下技巧，但我不知道为什么它对我不起作用..

```
if (seconds <= 9) {
                seconds = '0' + parseInt(seconds);
            } 
```

请帮助我..实际上当我尝试这个时会发生什么。它将 0 与秒数连接到 9，但随着 9 的到来，它会从 1 重新启动。这就是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:05:10.870

`seconds = '0' + parseInt(seconds)`将进行字符串加法，因为`'0'`, 是一个字符串。

当您在javascript中将字符串添加到数字时，该数字将附加到字符串中。

Remove the quotes for 0, then it will be treated like number.

P.S. I guess this is the problem you are trying to crack

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:15:58.777

i have resolve this problem using some trick that is as follow:

```
function show(Hos, mins, secds) {

        var hours = Hos;
        var minutes = mins;
        var seconds = parseInt(secds, 10);

        if (hours == 0)
            hours = 12

        if (parseInt(seconds, 10) < 10) {
            seconds = "0" + parseInt(seconds, 10);
        }
        if (parseInt(hours, 10) < 10) {
            hours= "0" + parseInt(hours, 10);
        }
        if (parseInt(minutes, 10) < 10) {
            minutes= "0" + parseInt(minutes, 10);
        }
        document.getElementById('<%= Label1.ClientID %>').innerHTML = hours + ":" + minutes + ":" + seconds + " "
        if (parseInt(seconds) == 59) {
            seconds = 0;
            if (parseInt(minutes, 10) == 59) {
                if (parseInt(hours, 10) == 24) {
                    hours = 0;
                } else {
                    hours = parseInt(hours, 10) + 1;
                }
            } else {

                minutes = parseInt(minutes, 10) + 1;
            }
        } else {
               seconds = parseInt(seconds, 10) + 1;
       }
        setTimeout("show('" + hours + "','" + minutes + "','" + seconds + "'" + " )", 1000)
    } 
```

# python - 具有两个不同数据集的 Python 样条插值

> ID：11773338
> 
> 赞同：0
> 
> 时间：2012-08-02T08:02:47.393
> 
> 标签：python, interpolation, spline

我有一个大约 4000 个点的数据集（恒星光谱）。我想用这个有近 17000 个点的新列表插入`x`和`y`数据（相同长度） 。`x_new`

我发现[`numpy.interp`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.interp.html)它可以完成这项工作，除了它是分段线性插值。我希望它是光滑的。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:10:00.423

scipy.interpolate.interp1d有一个可以设置为例如[的](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html#scipy.interpolate.interp1d)参数。`kind``"cubic"`

除了直接向这个函数提供你希望插值的 x 值，你可以这样做：

```
>>> x = np.arange(0, 10)
>>> y = np.exp(-x / 3.0)
>>> f = interpolate.interp1d(x, y, "cubic")
>>> i = np.arange(0.5, 9.5, 1)
>>> f(i)
array([ 0.85826566,  0.61497421,  0.44064828,  0.31573829,  0.22623637,
        0.16210544,  0.11615363,  0.08322771,  0.05963526]) 
```

[这](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html)是一个 scipy 插值教程，可能会有所帮助。

# objective-c - __weak 和 __block 引用有什么区别？

> ID：11773342
> 
> 赞同：80
> 
> 时间：2012-08-02T08:02:58.327
> 
> 标签：objective-c, memory-management, objective-c-blocks, weak-references, ownership

我正在阅读 Xcode 的文档，这让我感到困惑：

```
__block typeof(self) tmpSelf = self;
[self methodThatTakesABlock:^ {
    [tmpSelf doSomething];
}]; 
```

以下是从文档中复制的：

> 块形成对其捕获的变量的强引用。如果 `self`在块内使用，则该块形成对 的强引用`self`，因此如果 `self`还具有对该块的强引用（通常会这样做），则会产生强引用循环。为避免循环，您需要`__block`在块外创建对 self 的弱（或 ）引用，如上例所示。

我不明白“弱（或`__block`）”是什么意思？

是

```
__block typeof(self) tmpSelf = self; 
```

和

```
__weak typeof(self) tmpSelf = self; 
```

这里一模一样？</p>

我在文档中找到了另一篇文章：

> 注意：在垃圾收集环境中，如果您同时将`__weak`和 `__block`修饰符应用于变量，则该块将无法确保它保持活动状态。

所以，我完全感到困惑。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-08-02T08:19:24.757

来自关于 __block 的文档

> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。因此，如果在帧中声明的块的任何副本在帧结束后仍然存在（例如，通过在某处排队以供稍后执行），则存储将在堆栈帧的破坏中幸存下来。给定词法范围内的多个块可以同时使用一个共享变量。

来自关于 __weak 的文档

> __weak 指定一个不使被引用对象保持活动状态的引用。当对象没有强引用时，弱引用设置为 nil。

所以它们在技术上是不同的东西。__block 是为了阻止你的变量从你的外部作用域复制到你的块作用域。__weak 是一个自定界的弱指针。

请注意，我从技术上说，因为对于您的情况，他们（几乎）会做同样的事情。唯一的区别是您是否使用 ARC。如果您的项目使用 ARC 并且仅适用于 iOS4.3 及更高版本，请使用 __weak。如果全局范围引用以某种方式释放，它确保引用设置为 nil。如果您的项目不使用 ARC 或用于较旧的操作系统版本，请使用 __block。

这里有一个细微的区别，请确保您理解它。

编辑：另一个难题是__unsafe_unretained。此修饰符与 __weak 几乎相同，但适用于 4.3 之前的运行时环境。但是，它没有设置为 nil，并且可能会给您留下悬垂的指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-31T08:32:48.213

> 在手动引用计数模式下，__block id x；具有不保留 x 的效果。在 ARC 模式下，__block id x; 默认保留 x （就像所有其他值一样）。要获得 ARC 下的手动引用计数模式行为，您可以使用 __unsafe_unretained __block id x;。然而，正如名称 __unsafe_unretained 所暗示的那样，拥有一个非保留变量是危险的（因为它可能会悬空），因此不鼓励使用。两个更好的选择是使用 __weak（如果您不需要支持 iOS 4 或 OS X v10.6），或者将 __block 值设置为 nil 以中断保留周期。

[苹果文档](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-01T22:44:29.663

在 block 中使用 self 时，应该使用**__weak**，而不是**__block**，因为它可能会保留 self。

如果你需要强大的自我，那么你可以这样使用：

```
__weak typeof(self) *weakSelf = self;
[self methodThatTakesABlock:^{
    if (weakSelf) {
        __strong typeof(self) *strongSelf = weakSelf;
        [strongSelf doSomething];
    }
}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-26T08:58:22.800

除了`__block`vs的其他答案之外`__weak`，还有另一种方法可以避免您的场景中的保留周期。

```
@weakify(self);
[self methodThatTakesABlock:^ {
    @strongify(self);
    [self doSomething];
}]; 
```

[关于@Weakify @Strongify 宏的更多信息](http://holko.pl/2015/05/31/weakify-strongify/)

# python - Python Flask，如何设置内容类型

> ID：11773348
> 
> 赞同：215
> 
> 时间：2012-08-02T08:03:16.640
> 
> 标签：python, flask

我正在使用 Flask，并从 get 请求中返回一个 XML 文件。如何将内容类型设置为 xml ？

例如

```
@app.route('/ajax_ddl')
def ajax_ddl():
    xml = 'foo'
    header("Content-type: text/xml")
    return xml 
```

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-08-02T08:49:39.080

试试这样：

```
from flask import Response
@app.route('/ajax_ddl')
def ajax_ddl():
    xml = 'foo'
    return Response(xml, mimetype='text/xml') 
```

实际的 Content-Type 基于 mimetype 参数和字符集（默认为 UTF-8）。

响应（和请求）对象记录在这里：[http ://werkzeug.pocoo.org/docs/wrappers/](http://werkzeug.pocoo.org/docs/wrappers/)

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2014-07-20T16:33:41.823

就这么简单

```
x = "some data you want to return"
return x, 200, {'Content-Type': 'text/css; charset=utf-8'} 
```

希望能帮助到你

更新：使用下面的方法，因为它适用于 python 2.x 和 python 3.x，并且它消除了“多头”问题（可能发出多个重复的头）。

```
from flask import Response
r = Response(response="TEST OK", status=200, mimetype="application/xml")
r.headers["Content-Type"] = "text/xml; charset=utf-8"
return r 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-08-29T02:21:47.863

我喜欢并赞成@Simon Sapin 的回答。然而，我最终采取了稍微不同的策略，并创建了自己的装饰器：

```
from flask import Response
from functools import wraps

def returns_xml(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        r = f(*args, **kwargs)
        return Response(r, content_type='text/xml; charset=utf-8')
    return decorated_function 
```

并这样使用它：

```
@app.route('/ajax_ddl')
@returns_xml
def ajax_ddl():
    xml = 'foo'
    return xml 
```

我认为这会更舒服一些。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-07-31T17:11:43.423

使用[make_response 方法](https://flask.palletsprojects.com/en/1.1.x/api/#flask.Flask.make_response)获取您的数据的响应。然后设置[mimetype 属性](https://flask.palletsprojects.com/en/1.1.x/api/#flask.Response.mimetype)。最后返回这个响应：

```
@app.route('/ajax_ddl')
def ajax_ddl():
    xml = 'foo'
    resp = app.make_response(xml)
    resp.mimetype = "text/xml"
    return resp 
```

如果您`Response`直接使用，您将失去通过设置自定义响应的机会`app.response_class`。该`make_response`方法使用`app.responses_class`来制作响应对象。在此您可以创建自己的类，添加使您的应用程序全局使用它：

```
class MyResponse(app.response_class):
    def __init__(self, *args, **kwargs):
        super(MyResponse, self).__init__(*args, **kwargs)
        self.set_cookie("last-visit", time.ctime())

app.response_class = MyResponse 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2015-06-30T04:06:46.177

```
from flask import Flask, render_template, make_response
app = Flask(__name__)

@app.route('/user/xml')
def user_xml():
    resp = make_response(render_template('xml/user.html', username='Ryan'))
    resp.headers['Content-type'] = 'text/xml; charset=utf-8'
    return resp 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-05-14T12:44:06.090

你可以试试下面的方法（python3.6.2）：</p>

案例一：</p>

```
@app.route('/hello')
def hello():

    headers={ 'content-type':'text/plain' ,'location':'http://www.stackoverflow'}
    response = make_response('<h1>hello world</h1>',301)
    response.headers = headers
    return response 
```

案例二：</p>

```
@app.route('/hello')
def hello():

    headers={ 'content-type':'text/plain' ,'location':'http://www.stackoverflow.com'}
    return '<h1>hello world</h1>',301,headers 
```

我正在使用 Flask 。如果你想返回 json，你可以这样写：

```
import json # 
@app.route('/search/<keyword>')
def search(keyword):

    result = Book.search_by_keyword(keyword)
    return json.dumps(result),200,{'content-type':'application/json'}

from flask import jsonify
@app.route('/search/<keyword>')
def search(keyword):

    result = Book.search_by_keyword(keyword)
    return jsonify(result) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-11-12T09:07:43.430

通常您不必[`Response`](http://flask.pocoo.org/docs/0.10/api/#flask.Response)自己创建对象，因为[`make_response()`](http://flask.pocoo.org/docs/0.10/api/#flask.make_response)它会为您处理好。

```
from flask import Flask, make_response                                      
app = Flask(__name__)                                                       

@app.route('/')                                                             
def index():                                                                
    bar = '<body>foo</body>'                                                
    response = make_response(bar)                                           
    response.headers['Content-Type'] = 'text/xml; charset=utf-8'            
    return response 
```

* * *

还有一件事，好像没有人提到[`after_this_request`](http://flask.pocoo.org/docs/0.10/api/#flask.after_this_request)，我想说点什么：

[`after_this_request`](http://flask.pocoo.org/docs/0.10/api/#flask.after_this_request)

> 在这个请求之后执行一个函数。这对于修改响应对象很有用。该函数被传递给响应对象，并且必须返回相同的或新的。

所以我们可以这样做[`after_this_request`](http://flask.pocoo.org/docs/0.10/api/#flask.after_this_request)，代码应该是这样的：

```
from flask import Flask, after_this_request
app = Flask(__name__)

@app.route('/')
def index():
    @after_this_request
    def add_header(response):
        response.headers['Content-Type'] = 'text/xml; charset=utf-8'
        return response
    return '<body>foobar</body>' 
```

# excel-formula - Excel：从右到左查找满足单元格的给定数字标准

> ID：11773353
> 
> 赞同：0
> 
> 时间：2012-08-02T08:03:30.310
> 
> 标签：excel-formula

我需要在一行中找到满足> = 0的简单标准的最后8个（最右边，从右到左）数字单元格值的平均值，即。行中包含零、负值和正值的混合的零或正数。换句话说，我需要从包含从行尾向后计数的 0 或更高计数的所有单元格中找到第 8 个单元格引用。

示例行：

```
1.6425  0.6233  5.2899  4.4372  2.0356  3.9796  1.5306  3.8344  0   -1  -1  3.8294  -1  3.0957  0   3.7572  -1 
```

预期结果：2.50 (3.7572 + 0 + 3.0957 + 3.8294 + 0 + 3.8344 + 1.5306 + 3.9796) / 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:10:27.327

我解决了你的问题，但有很多辅助列。在下文中，我假设您的数据在 A 到 Q 列中，从第 2 行开始

1.  在第一行，将字母 A 到 J 放在 T 到 AC 列中

2.  在第一个数据行

    2.1 将公式`=ROW()`放在 S 列

    2.2 将数组公式（输入时按Shift + Ctrl + Enter）`=SUM(IF(INDIRECT(T$1 & $S2 & ":Q" & $S2,TRUE)>=0,1,0))`放到T列并一直复制到AC列

    2.3`=INDEX($T$1:$AC$1,MATCH(8,T2:AC2,0))`在 AD 列输入数组公式

    2.4 最后把数组公式`=SUM(IF(INDIRECT(AD2 & S2 & ":Q" & S2) >= 0, INDIRECT(AD2 & S2 & ":Q" & S2), 0))/8`放到AE列，这就是你想要的结果

3.  您可以将包含公式的行复制到包含数据的每一行

这是它在我的 Excel 中的外观： ![截屏](../Images/842a013eaf17c43b281f8a7918d53252.png)

它能做什么：

*   在列 S 中是当前行——我们需要它用于`INDIRECT`函数，因为在数组函数中不起作用`ROW()`。`INDIRECT`

*   在列 T - AC 中，我们计算当前数据行右侧的正数或零列数，从不同的列开始——它们的字母在第一行。我们可以开始的最右边的列是 J，否则不会有 8 个值。

*   在 AD 列中，我们匹配数字 8，从第一行我们得到必须开始平均范围的列

*   最后，在 AE 列中，我们`INDIRECT`用来创建对我们想要的范围的引用，将所有 >= 0 的数字相加并除以 8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:27:43.787

`AVERAGEIFS`我使用并仅添加一个补充行**A2:Q2**干净地解决了这个问题，以仅标记所需的 8 个单元格。*这个额外的行从行的末尾向后计数，仅当*第 1 行上方的单元格*不*小于 0 时，从前一个计数（右侧的下一个单元格）迭代1，公式`=IF(A1<0,B2,B2+1)`在整个行 A2:Q2 中复制。然后，这充当主公式的**标准2，即****使用右侧的前 8 个单元格，其值 >=0**。

然后`=AVERAGEIFS(A1:Q1, A1:Q1, ">=0", A2:Q2, "<9")`在单元格**C4**中简单地获取结果。**C5**是针对计算结果的简单手动测试。

这是 Excel 文件：[https](https://dl.dropbox.com/u/4974539/averageifs_tweak.xlsx) ://dl.dropbox.com/u/4974539/averageifs_tweak.xlsx - 和屏幕截图：

![在此处输入图像描述](../Images/bfa960efbe3acbcfc6fb797fd8b6e9c3.png)

# jquery - FireFox，只有 FireFox 的行为很奇怪

> ID：11773354
> 
> 赞同：0
> 
> 时间：2012-08-02T08:03:33.037
> 
> 标签：jquery

我在 jQuery 中编写了悬停动画，效果很好，但在 FireFox 中没有按预期工作，你能看看这个并告诉我这是怎么发生的吗

悬停在绿色区域，蓝色区域应该顺利进入，但在FF动画中不流畅有一个跳跃

[http://jsfiddle.net/mrNRx/](http://jsfiddle.net/mrNRx/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:28:10.207

您可以像这样使用 FadeIn() 回调（您的代码已简化）：

```
$(this).find('.apla').fadeIn("slow", function(){
     $(this).find('.more').animate({"bottom": "50px"},1000);
});

$(this).find('.apla').fadeOut("slow", function(){
     $(this).find('.more').animate({"bottom": "-40px"},1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:10:53.313

这个问题是由 Mozilla 愚蠢的 -moz-box-shadow 引起的。使用以下 css 代码将其删除，它应该可以解决问题。

```
*{box-shadow:none!important;-moz-box-shadow:none!important;border-radius:0!important;-moz-border-radius:0!important} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:16:17.627

您应该使用 jQuery hover intent 插件来使用 Over 和 Out 功能。在 Firefox 中，这些事件没有正确触发。在 chrome 中，这些功能可以正常触发，并且您的自述文件链接工作正常。

# function - 在多个命名空间中使用记录

> ID：11773357
> 
> 赞同：1
> 
> 时间：2012-08-02T08:03:46.660
> 
> 标签：function, clojure, namespaces, record

我有一些预定义的函数和记录的 clojure 文件

```
;outer.clj
(ns outer )
(defn foo [a] (println a))
(defrecord M [id]) 
```

现在使用文件

```
;inner.clj
(ns inner (:use outer ))
(foo 2)    ;works fine
(println (:id (M. 4))) ;throws IllegalArgumentException: Unable to resolve classname: M 
```

为什么函数导入正常但记录定义不行？我应该如何导入它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:15:47.523

因为 defrecord 会“隐藏”生成一个 JVM 类，所以您需要导入该类...

```
;inner.clj
(ns inner 
    (:use outer )
    (:import outer.M)
(foo 2)    ;works fine
(println (:id (M. 4))) ; works with import 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T18:40:51.130

虽然 sw1nn 是正确的，但从 1.3 开始，您无需进行单独的导入。两者都`defrecord`创建构造函数，就像任何其他函数一样`deftype`，它可以通过`use`/获得。`require`

两者创建的函数都遵循格式`->MyType`并采用位置参数。

此外，`defrecord`创建第二个构造函数，该函数采用映射 arg, `map->MyRecord`。

# intellij-idea - PlayFramework2 需要 Jar 文件并识别已编译的源

> ID：11773361
> 
> 赞同：0
> 
> 时间：2012-08-02T08:03:54.193
> 
> 标签：intellij-idea, playframework-2.0

很难知道为什么我无法得到这个东西：

![图像拍摄](../Images/d134c952ea09a07815b82468eeff4a78.png)

...我可以从中运行我的应用程序`command prompt`，但是当我这样做时`idea`，`Import`现有项目使用`IntelliJ`无法追踪我需要开始的内容`Libraries`或文件。`Jar`

在一个`Play1.2.3`我曾经只是导入`Play`和`Play1.2.3` `jar`文件和一切正常..

**更新**

**已尝试从IntelliJ**创建一个新项目并打开项目（而不是导入），但没有运气。它已经附加了所有库，但仍然没有附加错误截图：

***IDE：IntelliJ 11.0.2 & 播放：2.0.2*** ![在此处输入图像描述](../Images/2868b372582825e11b989ca5b1cf869f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:14:14.730

因为`Play 2.0.2`您不需要从头开始创建 Idea 的项目并将模块导入其中。

只需`Open project`从菜单中选择，然后找到您执行`play idea`操作的文件夹，整个项目即可在 IDE 中使用，无需任何额外步骤。

**编辑：**

最重要的是：要反映托管源中的更改，您的应用程序需要首先编译它，因此它需要在开发时在后台工作，或者如果应用程序停止，您需要手动编译它。否则，Idea 将无法编译（和查找）托管源。这正是 Play`DEV`模式的工作，它与其他 Java 框架不同，后者需要手动编译应用程序和/或不时配置您的 IDE 来执行此操作。Play 的开发模式允许在后台进行。

Idea 将在第一次在浏览器中运行应用程序后开始识别您的托管源（因为它会编译它，idea 会在几秒钟后捕获它）。当然，应用程序必须在开发模式下运行，才能编译视图、资产等。

```
play run 
```

当然，如果您处于生产模式，您还需要重新启动应用程序。或者在理想化项目之后，或者如果您的应用程序不工作，您可以手动编译托管源：

```
play compile 
```

此外，如果您以 tilde-dev 模式启动，它将在更改保存后立即编译更改的资源

```
play ~run 
```

# c++ - MathGL/GLUT 数据图的简单示例

> ID：11773366
> 
> 赞同：2
> 
> 时间：2012-08-02T08:04:25.413
> 
> 标签：c++, glut

我正在寻找一些关于使用 GLUT 或 MathGL 从 C++ 绘制数据集的简单示例。

我已经浏览了 MathGL 的文档并稍微浏览了 GLUT，但两者都需要一个绘图函数，不能向其传递任何参数。

我正在尝试可视化模拟（1-3D）并希望将绘图例程与模拟步骤分开。正如我现在所看到的，我必须将模拟步骤打包在 draw() 函数中（用于 MathGL 和 GLUT）——这是我不想要的。

有没有人有什么好的指点。如果它很容易，我不会反对另一个图书馆。

提前致谢

# android - 从 Long 格式转换为日期格式

> ID：11773369
> 
> 赞同：42
> 
> 时间：2012-08-02T08:04:44.363
> 
> 标签：android, date, long-integer

我想以这种格式 dd/mm/YYYY 将 Long 值转换为字符串或日期。

我有这个长格式的值：1343805819061。

是否可以将其转换为日期格式？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-02T08:12:10.750

您可以使用下面的代码行来执行此操作。这里 timeInMilliSecond 是长值。

```
 String dateString = new SimpleDateFormat("MM/dd/yyyy").format(new Date(TimeinMilliSeccond)); 
```

或者你也可以使用下面的代码。

```
 String longV = "1343805819061";
 long millisecond = Long.parseLong(longV);
 // or you already have long value of date, use this instead of milliseconds variable.
 String dateString = DateFormat.format("MM/dd/yyyy", new Date(millisecond)).toString(); 
```

参考：- [DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)和[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

PS 根据您的需要更改日期格式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T08:13:53.090

您可以在 Date 实例或构造函数 Date(long) 上使用方法 setTime；

```
setTime(long time) 
      Sets this Date object to represent a point in time that is time milliseconds after January 1, 1970 00:00:00 GMT.

Date(long date) 
      Allocates a Date object and initializes it to represent the specified number of milliseconds since the standard base time known as "the epoch", namely January 1, 1970, 00:00:00 GMT 
```

然后使用简单的日期格式化程序

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/DateFormatter.html](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/DateFormatter.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T08:14:44.123

```
java.util.Date dateObj = new java.util.Date(timeStamp); 
```

这里**timeStamp**是你的长整数，实际上是以毫秒为单位的时间戳，你得到 java 日期对象，现在你可以通过这个将它转换为字符串

```
SimpleDateFormat dateformatYYYYMMDD = new SimpleDateFormat("yyyyMMdd");
SimpleDateFormat dateformatMMDDYYYY = new SimpleDateFormat("MMddyyyy");

StringBuilder nowYYYYMMDD = new StringBuilder( dateformatYYYYMMDD.format( dateObj ) );
StringBuilder nowMMDDYYYY = new StringBuilder( dateformatMMDDYYYY.format( dateObj ) ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-11T18:01:11.023

## java.time 和 ThreeTenABP

我正在提供现代答案。我建议使用现代 Java 日期和时间 API java.time 来进行日期工作。这将适用于您的 Android 版本：

```
 // Take Catalan locale as an example for the demonstration
    DateTimeFormatter dateFormatter
            = DateTimeFormatter.ofLocalizedDate(FormatStyle.MEDIUM)
                    .withLocale(Locale.forLanguageTag("ca"));

    long millisecondsSinceEpoch = 1_343_805_819_061L;
    ZonedDateTime dateTime = Instant.ofEpochMilli(millisecondsSinceEpoch)
            .atZone(ZoneId.systemDefault());
    String dateString = dateTime.format(dateFormatter);
    System.out.println("As formatted date: " + dateString); 
```

输出是：

> 格式化日期：01/08/2012

我建议您使用内置的本地化日期格式向您的用户展示。我以加泰罗尼亚日期格式为例。内置多种语言、国家和方言的格式。

大多数旧答案中使用的`SimpleDateFormat`班级是班级臭名昭著的麻烦制造者。使用的`Date`类也设计得很差。幸运的是，它们都已经过时了。不再建议使用其中任何一个。而且我发现 java.time 更好用。

## 问题：java.time 不需要 Android API 级别 26 吗？

java.time 在较旧和较新的 Android 设备上都能很好地工作。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在非 Android Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在（较旧的）Android 上使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。并确保从`org.threeten.bp`子包中导入日期和时间类。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-13T12:57:24.413

如果 thre 有 10 位数字，那么试试这个

长日期长 = 1584212400;

日期 date = new Date(DateInLong*1000L);

SimpleDateFormat simpledateformate=new SimpleDateFormat("yyyy-MM-dd");

字符串 DATE = simpledateformate.format(date);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-06T10:49:44.677

```
 public String getDuration(long msec) {
        if (msec == 0)
            return "00:00";
        long sec = msec / 1000;
        long min = sec / 60;
        sec = sec % 60;
        String minstr = min + "";
        String secstr = sec + "";
        if (min < 10)
            minstr = "0" + min;
        if (sec < 10)
            secstr = "0" + sec;
        return minstr + ":" + secstr;
    } 
```

# ios - 在 Xcode 4.4 中使用不受支持的编译器

> ID：11773371
> 
> 赞同：2
> 
> 时间：2012-08-02T08:04:56.497
> 
> 标签：ios, xcode, llvm, clang

有谁知道如何设置 llvm3.1 以在 Xcode 4.4 中使用？是否像在编译器的 bin 目录中将 Xcode 指向 Clang 一样简单？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:48:46.043

是的，只需`CC=/path/to/clang`在 xcconfig 文件中设置。

# php - 抑制 PHP 中的错误

> ID：11773373
> 
> 赞同：0
> 
> 时间：2012-08-02T08:04:58.933
> 
> 标签：php, error-handling, file-get-contents

我每晚都使用 cron 服务运行 PHP 脚本。它输出的所有内容都将打印到日志文件中以进行调试。我使用的文件将使用函数“file_get_contents()”从不同的站点检索 xml。但是该函数可能会返回一个我真的不想看到的错误，因为我已经显示了一个自定义错误。

我的一段代码的快速示例：

```
$buffer = @file_get_contents('http://xx:xx@xx/xml/xx?offset=2') or print('retry in 5 seconds');

if($buffer === false) {
  sleep(5);
  $buffer = @file_get_contents('http://xx:xx@xx/xml/xx?offset=2') or print('error notice');
} 
```

问题是第一个会触发错误并打印它会在 5 秒内重试。如何正确抑制抛出的错误？

我有一个错误处理程序，但我不想单独捕获此错误。

编辑：我的解决方案不是更改error_reporting，而是捕获错误消息。如果它以 'file_get_contents()' 开头，则不会引发错误。这不是最好的方法，但会为我完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:07:29.190

您可以尝试在开头插入：

```
error_reporting(0); 
```

然后在带有错误/警告的代码之后：

```
error_reporting(E_ALL ^ E_WARNING); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:11:43.000

好的，永远不要使用 @-operator。

在 PHP 中，您有两个可用选项：使用自定义错误处理程序或使用 try/catch。

由于 file_get_contents 不会抛出异常，所以只能使用第一种方法。

您可以像这样设置错误处理程序：http: [//php.net/set-error-handler](http://php.net/set-error-handler)然后正确操作（记录某些内容或返回自定义错误代码）。

如果您只想关闭所有错误使用`error_reporting(0)`，或者您只想关闭特定类别的使用`error_reporting(E_ALL ^ E_WARNING)`（除警告之外的所有内容）或明确指定它们`error_reporting(E_WARNING | E_NOTICE)`（警告和通知）。

我更喜欢第一种方法，因为当您禁用它时，您不知道代码中发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:06:02.847

在命令前添加 @ 或使用 try catch。

# sql-server - sql server 多列索引查询

> ID：11773375
> 
> 赞同：3
> 
> 时间：2012-08-02T08:05:03.477
> 
> 标签：sql-server, database, indexing

如果我按顺序在 [lastName] 和 [firstName] 两列上创建了一个索引。如果我然后进行查询以查找名字为 daniel 的人数：

```
SELECT count(*)
FROM people
WHERE firstName = N'daniel' 
```

此搜索是否会在第一个索引 (lastname) 的每个部分中搜索并使用二级索引 (firstName) 快速搜索 LastName 条目的每个块？

这似乎是一件显而易见的事情，我认为这就是发生的事情，但你知道他们对假设的看法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:58:00.313

是的，如果查询优化器认为*“快速搜索 LastName 条目的每个块”*比（执行**Full** **Scan** ) 的表。

 ***虽然对于这个特定的查询，一个索引`(firstName)`会更有效，所以如果有这样一个索引，SQL-Server 将使用那个索引（并做一个**Index Seek**）。

* * *

在 SQL-Server 2008 R2，Express 版中测试：

```
CREATE TABLE Test.dbo.people
( lastName  NVARCHAR(30) NOT NULL
, firstName NVARCHAR(30) NOT NULL
) ;

INSERT INTO people 
VALUES
('Johnes', 'Alex'),
...                   --- about 300 rows
('Johnes', 'Bill'),
('Brown', 'Bill') ; 
```

* * *

查询没有任何索引，**表扫描**：

```
SELECT count(*)
FROM people
WHERE firstName = N'Bill' ; 
```

![在此处输入图像描述](../Images/54f4380ca34576b730ade46036b408d0.png)

* * *

使用索引查询`(lastName, firstName)`，**索引扫描**：

```
CREATE INDEX last_first_idx
ON people (lastName, firstName) ;

SELECT ... 
```

## ![在此处输入图像描述](../Images/87f62308d87cee627df6129d53923759.png)

使用 index on 查询`(firstName)`，**Index Seek**：

```
CREATE INDEX first_idx
ON people (firstName) ;

SELECT ... 
```

![在此处输入图像描述](../Images/f7d61043eba0d1bfa5d1560022ea383e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:31:51.193

如果您按此顺序在（姓氏，名字）上有索引，则查询如下

```
WHERE firstname = 'daniel' 
```

只要您不在`WHERE`子句中包含复合索引的第一列（即姓氏），就不会使用索引。为了有效地仅搜索名字，您需要在该列上建立一个单独的索引。

如果您经常在两列上搜索，请执行 2 个单独的单列索引。但请记住，每个索引都会在插入/更新时更新，因此会影响性能。

此外，如果复合索引没有同时覆盖索引，请避免使用它们。有关复合索引的提示，请参阅 sql-server-performance.com 上的以下文章：

[优化 SQL Server 复合索引的技巧](http://www.sql-server-performance.com/2007/composite-indexes/)

**更新**（以解决反对者）：

在这种特定情况下，`SELECT Count(*)`索引是一个覆盖索引（正如@ypercube 在评论中指出的那样），因此优化器可以选择它来执行。在这种情况下使用索引意味着一个`Index Scan`而不是一个`Index Seek`。

做一个`Index Scan`意味着扫描索引中的每一行。如果索引包含的行数少于整个表，这将更快。因此，如果您有一个高度选择性的索引（具有许多唯一值），您将获得一个包含与表本身一样多的行的索引。`Clustered Index Scan`在这种情况下，执行 a （意味着表上的 PK，迭代 PK）或 a `Non-Clustered Index Scan`（迭代索引）通常不会有太大区别。A `Table Scan`（如@ypercube 答案的屏幕截图所示）意味着表上没有 PK，这导致执行速度比 a 还要慢`Clustered Index Scan`，因为它不具有 PK 给出的磁盘上顺序数据对齐的优势.***

# google-chrome - CSS3 flex-direction 属性在 Chrome 21 中失去效果？

> ID：11773378
> 
> 赞同：2
> 
> 时间：2012-08-02T08:05:09.940
> 
> 标签：google-chrome, css, flexbox

我已将 Chrome 更新到版本 21。我使用 flex 属性定义了一些 css 样式：

```
display: -webkit-flexbox;
-webkit-flex-pack: center;
-webkit-flex-align: center;
-webkit-flex-direction: column; 
```

但是我发现在新版chrome中失去了所有效果，所以我尝试更改为：

```
display: -webkit-box;
-webkit-box-pack: center;
-webkit-box-align: center;
-webkit-flex-direction: column; 
```

head 3 属性已正确更改，最后`-webkit-flex-direction`仍然无法像以前那样工作，但开发工具的 chrome 显示属性正确

演示在[这里](http://jsfiddle.net/hh54188/dPK5f/1/)，我想使用属性`h1`在列中进行排序

我该如何解决这个问题？或者应该添加一些属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:25:34.890

这是因为 Chrome 21 是第一个使用[新的 flexbox](http://www.w3.org/TR/css3-flexbox/)模型的版本。

注意：Chrome 29 及更高版本不使用 flex 属性的前缀。

根据您的第一个示例，我编写了两个实现。我的第一个演示使用 flexbox 规范的[原始版本](https://developer.mozilla.org/en/CSS/Flexbox#box-_implementation)，第二个使用[最新版本](https://developer.mozilla.org/en/CSS/Flexbox#flex-_implementation)。
这是一个演示，它显示了两者的实际效果：http: [//jsfiddle.net/dPK5f/2/](http://jsfiddle.net/dPK5f/2/) ^(（具有灵活的大小：http: [//jsfiddle.net/dPK5f/3/](http://jsfiddle.net/dPK5f/3/)）)

```
/* The properties are ordered to make it easier to compare them */
#old {
    display: -webkit-box;
    -webkit-box-pack: center;
    -webkit-box-align: center;
    -webkit-box-orient: vertical;
}
#flex {
    display: -webkit-flex;
    -webkit-justify-content: center;
    -webkit-align-items: center;
    -webkit-flex-direction: column;
} 
```

另见：[https ://developer.mozilla.org/en/CSS/Using_CSS_flexible_boxes](https://developer.mozilla.org/en/CSS/Using_CSS_flexible_boxes)

# c# - AppFabric 缓存 - 性能

> ID：11773382
> 
> 赞同：1
> 
> 时间：2012-08-02T08:05:19.547
> 
> 标签：c#, wcf, appfabric

我开发了一个 RESTful`WCF`服务 ( `WebHttpBinding`)，它是一个 AppFabric 缓存客户端。我使用 jMeter 进行了性能测试。测试计划包含服务中的一项操作，将在 100 个并发线程中调用。

但是，我注意到在运行测试后，`the first 20 to 30 threads are taking considerable amount of time to get the response (say 10-15 seconds)`所有其他剩余线程将在 AppFabric Cache 相关代码打开的情况下在 2-3 秒内完成它们的执行。每当我评论 AppFabric 相关代码时，它都可以正常工作。请注意，我只使用**Get**，不使用**Put**。

我的服务具有以下配置作为 t AppFabric：

```
<dataCacheClient requestTimeout="60000" channelOpenTimeout="15000" maxConnectionsToServer="2">
    <localCache isEnabled="true" sync="NotificationBased" ttlValue="300000" objectCount="100000" />
    <clientNotification pollInterval="10" maxQueueLength="100000" />
    <hosts>
      <host name="**********" cachePort="*******" />      
    </hosts>
    <securityProperties mode="Transport" protectionLevel="EncryptAndSign" />
    <transportProperties connectionBufferSize="131072" maxBufferPoolSize="268435456" maxBufferSize="8388608" maxOutputDelay="2" channelInitializationTimeout="60000" receiveTimeout="600000" />
  </dataCacheClient> 
```

有人可以就导致这种初始延迟的原因给出一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:41:20.123

如果您进行性能测试，则必须从热身期开始。在此期间，您允许应用程序启动，并填充所有缓存。在启动期之后，您可以测试应用程序的实际性能。

在实践中，您启动应用程序并运行几分钟而不测量性能。然后开始测试并测量性能。您会看到在测试开始时没有启动延迟。

# c# - 实现搜索按钮时列名无效

> ID：11773384
> 
> 赞同：2
> 
> 时间：2012-08-02T08:05:22.697
> 
> 标签：c#, sql-server-2008

我正在使用 C# 和 SQL Sever 2008，当我尝试创建一个用于搜索记录的命令时，我遇到了“列名无效”的异常

这是我的代码：

```
void cari()
        {
            koneksi.Open();
            DataTable dt = new DataTable();
            SqlDataAdapter SDA = new SqlDataAdapter("SELECT * FROM jadwalkuliah where Subject = "+ textBox1.Text, koneksi);
            SDA.Fill(dt);
            koneksi.Close();

            dataGridView1.DataSource = dt;
        }` 
```

搜索命令应该作为搜索引擎工作，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:09:06.743

那么*直接*的问题是您的 WHERE 子句将类似于：

```
where Subject = Foo 
```

它试图将 Subject 列的值与 Foo 列的值进行比较。

解决这个问题的*老套*方法是在值周围加上引号。*更好*的解决方案是使用参数化 SQL：

```
string sql = "SELECT * FROM jadwalkuliah where Subject = @Subject";
using (SqlConnection connection = new SqlConnection(...))
using (SqlDataAdapter adapter = new SqlDataAdapter(sql, connection))
{
    connection.Open();
    adapter.SelectCommand.Parameters.Add("@Subject", SqlDbType.VarChar)
                                    .Value = textBox1.Text;
    adapter.Fill(dt);
} 
```

此外，请注意您不应该从 GUI 线程执行数据库访问。目前尚不清楚这是一个网络应用程序（在这种情况下可以）还是 WPF/WinForms（在这种情况下不是）。

请注意，这仍然会尝试进行*完全*匹配。对于“通配符”匹配，您需要将其更改为：

```
SELECT * FROM jadwalkuliah where Subject LIKE @Subject 
```

...并添加类似的参数`"%" + textBox1.Text + "%"`。（然后您需要考虑在该值内转义，但这是另一回事......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T08:07:53.267

您没有引用主题的价值：

```
SqlDataAdapter SDA = new SqlDataAdapter("SELECT * FROM jadwalkuliah where Subject = '"+ textBox1.Text + "'", 
```

科内克西）；

或者对于*包含*搜索： SqlDataAdapter SDA = new SqlDataAdapter("SELECT * FROM jadwalkuliah where Subject = '%"+ textBox1.Text + "%'", koneksi);

您不应该以这种方式构建查询。它容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。

# python - 在烧瓶中设置 cookie

> ID：11773385
> 
> 赞同：8
> 
> 时间：2012-08-02T08:05:24.083
> 
> 标签：python, cookies, flask

我正在尝试在烧瓶中创建一个 cookie。手册中的部分示例是：

```
resp = make_response(render_template(...))
resp.set_cookie(’username’, ’the username’) 
```

所以我将其实现为：

```
resp = render_template('show_entries.html', AO_sInteger = session.get('AO_sInteger'))
resp.set_cookie('AO_sInteger', AO_sInteger) 
```

然后系统返回此错误：

```
File "...\Flaskr101.py", line 19, in add_entry
resp.set_cookie('AO_sInteger', AO_sInteger)
AttributeError: 'unicode' object has no attribute 'set_cookie' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T08:22:16.213

手册`resp`中是：

```
resp = make_response(render_template(...)) 
```

在您的代码中是：

```
resp = render_template('show_entries.html', 
                        AO_sInteger = session.get('AO_sInteger')) 
```

通过使用使其成为适当的响应对象`make_response`：

```
from flask import make_response
resp = make_response(render_template('show_entries.html',
                                      AO_sInteger = session.get('AO_sInteger'))) 
```

# node.js - 将数据交给回调

> ID：11773387
> 
> 赞同：0
> 
> 时间：2012-08-02T08:05:49.137
> 
> 标签：node.js

嘿嘿，

我正在试验 node.js 及其回调机制。现在我想知道如何将数据交给这样一个匿名回调：

```
var fs = require('fs');

for (var i = 0; i < 4; i++) {
    console.log('Outer: ' + i);
    fs.readFile('/etc/hosts', 'ascii', function(err, data) {
        console.log('Inner: ' + i);
    });
} 
```

我确实理解为什么对 i 的内部调用总是返回 4。但是如何为特定的 readFile-callback 函数提供一些变量（以便内部 i 将具有外部 i 的值）？我可以想象一些队列机制，其中回调函数充当消费者，但作为节点初学者，我想询问最佳实践。非常感谢，

梅奇科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:41:32.087

使用纯 Javascript（即不使用异步等库）：

```
var fs = require('fs');

var i,
    reader = function (i) {
        return function (err, data) {
            console.log('Inner: ' + i);
        }
    };

for (i = 0; i < 4; i++) {
    console.log('Outer: ' + i);
    fs.readFile('/etc/hosts', 'ascii', reader(i));
} 
```

或者，或者，

```
var fs = require('fs');

var i;

for (i = 0; i < 4; i++) {
    console.log('Outer: ' + i);
    fs.readFile('/etc/hosts', 'ascii', function (i, err, data) {
        console.log('Inner: ' + i);
    }.bind(null, i));
} 
```

（将`var i;`声明移出`for`循环并没有真正改变这个特定示例中的任何内容，它只是一种防止与 Javascript 相关的错误的代码样式，而不是像 Java 这样的编程语言，只有变量的函数范围 - 所以在您的原始示例中，`i`它是为整个模块声明的，而不仅仅是 for`for`循环）。

另一种方法是使用像`async`这样的库`underscore`：

```
var _ = require('underscore'),
    async = require('async'),
    fs = require('fs');

async.parallel(_.map(_.range(0, 4), function (i) {
    return async.waterfall.bind(null, [
        fs.readFile.bind(null, '/etc/hosts', 'ascii'),
        function (data, callback) {
            console.log("Inner: " + i);
            callback();
        }
    ]);
}, function (err) {
    if (err) {
        console.log("Some read attempt failed");
    } else {
        console.log("Done reading");
    }
}); 
```

# c# - ASP.NET Web 应用程序避免因文化语言更改而重新加载页面

> ID：11773390
> 
> 赞同：0
> 
> 时间：2012-08-02T08:06:02.760
> 
> 标签：c#, asp.net, .net, resources

我正在尝试制作多语言 ASP.NET Web 应用程序。在应用程序开始时，我正在设置 cookie，然后我调用 InitializeCulture() 来启动文化。页面的数据存储在全局资源中，并写入 aspx 文件，如下所示：`<%$ Resources:Main,lang %>`

它实际上可以工作，但仍然存在一个问题：单击语言更改按钮后，coockie 和文化会发生变化，但页面内容不会发生变化。我总是要重新加载整个页面才能获得正确的内容`global.resx`。

在 PageLoad 我调用这个：

```
 setLanguageCookie(); //<- TO SET A COOKIE IF NULL
            InitializeCulture(); 
```

InitializeCulture() 看起来像这样：

```
 string sprache = "en-US";

        if (Request.Cookies["sprache"] != null)
        { 
            sprache = Request.Cookies["sprache"].Value;
        }

        Thread.CurrentThread.CurrentCulture =
          CultureInfo.GetCultureInfo(sprache);

        Thread.CurrentThread.CurrentUICulture =
          CultureInfo.GetCultureInfo(sprache); 
```

有 3 个语言按钮。他们背后的代码如下所示：

```
protected void lang_en_Click(object sender, EventArgs e)
        {
            Request.Cookies["sprache"] = "en-US";
            Session["Language"] = "en";
        } 
```

有人可以提示我在哪里弄错了吗？O有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:39:35.563

如果您查看以下链接，它将向您展示如何以编程方式检索资源文​​件内容[http://msdn.microsoft.com/en-us/library/ms227982.aspx](http://msdn.microsoft.com/en-us/library/ms227982.aspx)但它仅在您的控件数量有限时才有用从资源文件初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:26:24.167

在页面循环中的 Click 事件之前调用 InitializeCulture() - 因此您设置 cookie 为时已晚。如果要获取控件的值，可以从**Request.Form**中的 InitializeCulture() 方法中读取它们。

例如，如果您使用名为 mydropdown 的下拉列表来更改语言，则可以从 Request.Form["mydropdown"] 中获取其值。或者，在您设置的示例中（每种语言都有一个按钮），您可以在隐藏字段（在客户端）内设置语言值，然后从 Form 对象中读取其值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:45:24.040

您的 lang_en_Click 事件在页面加载后处理，因此您必须再次调用 CurrentTread.CurrentCulture 集合：

```
protected void lang_en_Click(object sender, EventArgs e)
{
     Request.Cookies["sprache"] = "en-US";     
     Session["Language"] = "en";         
     Thread.CurrentThread.CurrentCulture =   CultureInfo.GetCultureInfo("en-US");   
     Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("en-US");     
} 
```

在处理 lang_en_Click 之前，您必须检查是否没有设置任何语言字符串。通常我会在页面的 Pre_Render 上设置正确的文化信息。但是，如果您更早地手动处理字符串，则可能会导致问题。

# javascript - Javascript - 上传文件内容类型验证

> ID：11773393
> 
> 赞同：2
> 
> 时间：2012-08-02T08:06:10.997
> 
> 标签：javascript, python, django, validation, file-upload

如何在使用 JavaScript 上传之前验证文件的内容类型？**我不是在问扩展验证**。我想验证 pdf、纯文本和 MS word 文件。

我正在使用 django`forms.ModelForm`将文件上传小部件传递给 html。我在服务器端也无法做到这一点。就是这个问题，

[Django - 上传文件类型验证](https://stackoverflow.com/questions/11741001/django-uploaded-file-type-validation)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:26:49.447

也许可以，但它不会为您提供任何形式的安全性，因为攻击者可以使用其他方式上传文件，从而绕过您的验证。

要使用扩展名检查文件类型（这是非常不安全的，因为它很容易操作），您可以使用 JavaScript。请参阅此问题：[如何验证文件上传的文件类型？](https://stackoverflow.com/questions/71944/how-do-i-validate-the-file-type-of-a-file-upload)

**[编辑]**经过一番[谷歌搜索](https://www.google.ch/search?q=javascript%20form%20file%20upload%20mime%20type)后，我发现该`input`元素具有一个属性，该属性`accept`采用一系列 mime 类型模式。不幸的是，大多数浏览器都会忽略它（或仅使用它来调整文件选择对话框）。看到这个问题：[文件输入“接受”属性——有用吗？](https://stackoverflow.com/questions/181214/file-input-accept-attribute-is-it-useful)

**[编辑 2]**现在，文件 API（请参阅“[使用 Web 应用程序中的文件](https://developer.mozilla.org/en/Using_files_from_web_applications/)”）似乎是您真的不想使用文件扩展名的唯一方法。每个`File`实例都有一个`type`包含 mime 类型的属性。

但是这个 API 正在开发中，所以它并不是在任何地方都可用。并且不能保证您将获得 MIME 类型（属性可以是`""`）。

所以我建议这种方法：试试 File API。如果它不可用或`type`属性为空，请使用文件扩展名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:24:49.307

理论上，您可以使用[File API](http://caniuse.com/#search=file+api)来读取文件。

然后，您需要用 JavaScript 为您关心的文件格式编写解析器，以检查它们是否匹配。

# objective-c - 如何防止在目标C的运行时访问私有变量？

> ID：11773401
> 
> 赞同：0
> 
> 时间：2012-08-02T08:06:48.253
> 
> 标签：objective-c, ios, xcode

我知道我可以使用@private 关键字来声明我的实例变量私有。我相信它只会在编译时强制执行。

你知道有什么方法可以阻止其他用户在运行时访问我的私有变量吗？

我问这个是因为我正在构建一个静态库，它将分发给其他开发人员，我不希望他们访问我的私有变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:13:26.307

您无法阻止一个有决心的人在运行时弄乱数据（一旦他们知道内存中对象的地址并且它位于当前进程可自由写入的已分配空间中，总有办法改变它）。您可能做的最好的事情就是混淆它，例如只显示 a `void*`，在其他地方分配内存并强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:48:21.703

您可以在 .m 文件的类扩展中声明实例变量，而不是在（公共）.h 文件中使用 @private。正如@KevinGrant 正确所说，这也不会阻止有决心的人访问它，但至少其他人不会看到声明（我认为调试器不会显示它）。

补充：参见例如[Objective C - Make iVars hidden](https://stackoverflow.com/questions/11707495/objective-c-make-ivars-hidden)以讨论关于该主题的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:08:17.073

我不认为您可以在运行时阻止其他人访问私有变量。因为其他人可以使用 KVC 和 KVO 来获取和更改您的私有变量。也许你可以在你的私有变量之间建立很多关系，如果其他人改变它，他们会得到错误的答案，也许它可以阻止其他人改变你的私有变量

# c# - LINQ - 抛出 system.OutOfMemoryException 问题

> ID：11773403
> 
> 赞同：0
> 
> 时间：2012-08-02T08:06:58.073
> 
> 标签：c#, asp.net, linq, memory

在我的 .net 应用程序中，我使用 LINQ-to-SQL 从数据库中获取一些数据。数据量一点也不大（10行数据）。但是我经常在我的函数中捕获“system.outofmemoryException”，即使服务器中还有空闲内存。有趣的是，我仍然可以使用 ADO 函数从其他页面获取数据。

应用程序池重新启动后，该问题将得到解决。不时地，问题再次发生。你知道我应该如何调试这个场景吗？

注意：我对所有数据上下文连接都使用了“使用”块。从字面上看，所有数据上下文将在使用后被丢弃。

下面是代码。很简单。

```
using (StoreDataContext db = new StoreDataContext(conn)) 
{
     var list = from category in db.ProductCategories 
                select category;

     ddlCategory.DataSource = list.Distinct().ToList();
     ddlCategory.DataTextField = "CategoryName";
     ddlCategory.DataValueField = "CategoryName";
     ddlCategory.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:14:05.760

> 当没有足够的内存来继续执行程序时抛出异常。
> 
> 要查看您的消息，请参阅 OutOfMemoryException 构造函数。

原因：

1.  你有一个无限循环。

2.  您有很多数据，请在加载上下文和实体集时验证您的查询 sql。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:14:14.653

我的建议是你会使用内存分析工具，如[JetBrains dotTrace](http://www.jetbrains.com/profiler/)或[RedGate 的 Ants Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/?utm_source=google&utm_medium=cpc&utm_content=brand_aware&utm_campaign=antsperformanceprofiler&gclid=CP-y66HAyLECFbMJtAodKmgAxQ)（它们在市场上更多）

个人经验，即使我在我的 Web 应用程序上遇到了同样的问题，并且 dotTrace 为我追踪了写得不好的代码

# powershell - Powershell - 设置 AppFabric 持久性提供程序和工作流管理服务帐户

> ID：11773409
> 
> 赞同：1
> 
> 时间：2012-08-02T08:07:15.767
> 
> 标签：powershell, appfabric

我正在尝试使用 powershell 在 Windows 2008 R2 机器上设置 AppFabric。我已经能够在单独的 SQL 机器上设置数据库并使用该`Initialize-ASPersistenceSqlDatabase`命令设置管理员、读者和用户，但是，在运行该命令后，我可以查看 AppFabric 的配置向导，它仍然显示 Persistence 不是已配置并且“AppFabric Workflow Management 服务帐户”（NT AUTHORITY\LOCAL SERVICE）和“Persistence provider”（“Select a provider”）的默认设置仍然存在。

有没有办法设置“AppFabric Workflow Management 服务帐户”和“持久性提供程序”，以便它分别使用我选择的服务帐户和 sqlStoreProvider？我还需要做些什么来启动 Persistence 吗？

这些东西应该在我运行之前设置`Initialize-ASPersistenceSqlDatabase`吗？

提前致谢

# javascript - Javascript函数每次调用时都不会执行

> ID：11773415
> 
> 赞同：1
> 
> 时间：2012-08-02T08:07:38.890
> 
> 标签：javascript

我有一个 javascript 函数，它是从我拥有的另一个函数调用的。

由于某些原因，每次调用时都不会执行此函数。我试图更改函数的名称，然后一切正常。

我不明白为什么。这是一个小例子：

```
javascript 1:

function a()
{ 
   b();
}

javascript 2:

function b()
{ 
   c();
}

javascript 3:

function c()
{ 
   alert("Function c");
} 
```

由于某些原因，函数 c 没有执行……例如，如果函数 c 将被称为 newC()，那么它可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:15:26.910

您可能在 ie 的范围内有名称冲突，`b()`即当`b()`执行时，可能会发生`c`在当前范围内定义为其他内容的情况。

解决方案：启动您的 JavaScript 调试器，设置断点`b()`并检查`c`当时的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:20:51.033

对我来说，它工作正常。可能是您在代码中有一些错误。如果您发布完整的代码，我可能会提供帮助。这是工作代码

```
<html>
<head>
<script type="text/javascript">
function a()
{
b();
}
function b()
{
c();
}
function c()
{
alert("hello");
}
</script>
</head>
<body>
<form>
<label>Hello</label>
<button onclick="a()">v</button>
</form>
</body>
</html> 
```

# asp.net-mvc-3 - 显示图像通过 Ajax 调用从 MVC 控制器返回为字节数组

> ID：11773416
> 
> 赞同：0
> 
> 时间：2012-08-02T08:07:45.133
> 
> 标签：asp.net-mvc-3, image

单击 HTML 表中的一行时，将对 MVC3 控制器进行 ajax 调用，该控制器返回一个带有图像字节数组的 json 对象，但视图中显示的是空图像。这应该适用于 IE 7 到 9

控制器代码是：

```
 [HttpPost]
    public ActionResult RenderImage(string code)
    {
        ImageVM viewmodel = GetImage(code)
        return Json(viewmodel.Chart, "image/png");
     } 
```

用于引发 ajax 调用并显示图像的 javascript 代码是

```
 $(document).ready(function () {
      $('#Table tr').click(function (event) { 
      var id= $(this).attr('id')
         $.post("/Gateway/RenderImage", { "code": id },
     function (data) {
                alert(data);
            $('#ChartDiv').html('<img height="200" width="250" src="data:image/png;base64,' + data + '" />');

            });
       });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:39:32.947

我稍微更改了您的代码，这对我有用:)

```
 [HttpPost]
        public virtual JsonResult RenderImage(string code)
        {
//for test data Im using the below, you can use yours :   GetImage(code)        
var data =   
  @"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAD///+l2Z/dAAAAM0lEQVR4nGP4/5/h/1+G/58ZDrAz3D/McH8yw83NDDeNGe4Ug9C9zwz3gVLMDA/A6P9/AFGGFyjOXZtQAAAAAElFTkSuQmCC";
            return Json(data);
        } 
```

并在 Javascript 中（删除了一个反斜杠）

```
 $('#Table tr').click(function (event) {
        var id = $(this).attr('id')
        $.post("Gateway/RenderImage", { "code": id },
    function (data) {
        alert(data);
        $('#ChartDiv').html('<img height="200" width="250" src="data:image/png;base64,' + data + '" />');

    });
    }); 
```

[编辑] 为了使上述代码与 png 文件一起工作，我们可以将控制器操作更改为以下内容：

```
[HttpPost]
public virtual JsonResult RenderImage(string code)
{
    var filePath = "~/Images/PngExampleImag.png";
    var ImageBytes = System.IO.File.ReadAllBytes(Server.MapPath(filePath));
    var data = Convert.ToBase64String(ImageBytes);
    return Json(data);
} 
```

# mysql - 通过将两个查询合二为一而不是循环来提 高 SQL 的效率

> ID：11773418
> 
> 赞同：1
> 
> 时间：2012-08-02T08:08:05.610
> 
> 标签：mysql, sql

我有以下代码，想知道如何将其简化为一个 MYSQL 语句

```
$sql = "SELECT sesionID 
FROM  `juegos_sesiones` 
WHERE  `usuarioID` = ".$_SESSION['MM_UserID'];

$query = mysql_query($sql, $cnx) or die(mysql_error());
//$row_rsPaises = mysql_fetch_assoc($rsPaises);
$exercises = mysql_num_rows($query);

echo $exercises;

//find total points

while( $row = mysql_fetch_array($query)){

$sql2 = 'SELECT correct_answers FROM `juegos_sesiones_detalle`  WHERE  `sesionID`  = '.$row['sesionID'];

$query2 = mysql_query($sql2, $cnx) or die(mysql_error());
$details2 = mysql_fetch_assoc($query2);
$counter = $counter + $details2['correct_answers'];

}

echo '<br />'.$counter; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:09:58.220

您可以使用`INNER JOIN` as 编写单个查询：

```
SELECT correct_answers
FROM juegos_sesiones_detalle a
    INNER JOIN juegos_sesiones b
        ON a.sesionID = b.usuarioID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:10:14.230

```
SELECT sum(correct_answers) as total_correct_answers
FROM `juegos_sesiones_detalle` d
INNER JOIN  `juegos_sesiones` s on s.`sesionID` = d.`sesionID`
WHERE  `usuarioID` = $_SESSION['MM_UserID'] 
```

[您可以在此处](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)阅读有关联接的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:13:04.137

试试这个 ：

```
$sql = "SELECT correct_answers FROM `juegos_sesiones_detalle` jsd
        JOIN `juegos_sesiones` js
        ON jsd.sesionID = js.`sesionID`
        WHERE js.usuarioID = ".$_SESSION['MM_UserID']; 
```

# jquery - 为什么这个 Jquery 内容滑块在 Chrome 和 Safari 中有效，但在 Firefox 中无效？

> ID：11773421
> 
> 赞同：0
> 
> 时间：2012-08-02T08:08:20.953
> 
> 标签：jquery, css, slider

对为什么我的 JQuery 图像滑块在 Firefox 中不起作用感到困惑。在 Safari 和 Chrome 中工作正常，尚未在 IE 中测试。这是一个基本的点击按钮和下一张图片幻灯片，在这里查看它的实际效果：

[http://www.alihaberfield.com/test/carouseltest/carouseltest.html](http://www.alihaberfield.com/test/carouseltest/carouseltest.html)

这是JQuery：

```
$(window).load(function() {

var theImage = $('.gallery_wrap ul li img');
var theWidth = 790;  
//wrap into mother div
$('.gallery_wrap ul').wrap('<div id="mother" />');                  
//assign height width and overflow hidden to mother
$('#mother').css({
    width: 790,
    height: 780,
    position: 'relative',
    overflow: 'hidden'      
});
    //get total of image sizes and set as width for ul 
var totalWidth = theImage.length * theWidth;
$('.gallery_wrap ul').css({
    width: function(){
    return totalWidth;  
}               
});     
$(theImage).each(       
    function(intIndex){             
            $(this).nextAll('a')
            .bind("click", function(){
                if($(this).is(".next")) {

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (-(intIndex + 1) * theWidth)             
                    }, 1000)                    

                } else if($(this).is(".previous")){

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (-(intIndex - 1) * theWidth)             
                    }, 1000)    

                } else if($(this).is(".startover")){

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (0)              
                    }, 1000)

                }
            });//close .bind()                                   
});//close .each()                      
});//doc ready 
```

它基于这个简单的 jquery 滑块，我会注意到它在 Firefox 中有效：

[http://brenelz.com/blog/build-a-content-slider-with-jquery/](http://brenelz.com/blog/build-a-content-slider-with-jquery/)

该滑块和我的主要区别在于：

1.  我正在使用较旧的 JQuery 库-由于遗留问题等原因，客户端需要。我使用的是 1.3.2。
2.  我在 JQuery 的 ul 规则中添加了一个 .gallery_wrap 选择器，这样 JQuery 就不会用母 div 包装页面上的每个列表。
3.  因为我知道图像的大小，所以我将 var theWidth 的大小设置为 790px，这解决了这个画廊没有显示在灯箱内的问题（没有静态宽度，大小计算都不适用于设置为显示：无）。

假设 1：由于旧的 JQuery 版本，负边距行为在 Firefox 中没有触发。假设 2：添加静态宽度与 Firefox 对负边距的计算相混淆。

任何更好的假设，有关它无法运行的其他浏览器/其他失败方式的信息，或有关如何修复它的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:21:02.180

正确答案：脚本无法与旧版本的 JQuery 一起正常工作。

不能在使用 Jquery 1.3 的 Firefox（或 IE，因为它发生）中工作。在所有带有 JQuery 1.4 及更高版本的浏览器中都能完美运行。

通过加载两个库并使用此页面上优秀答案中提供的 JQuery noconflict 结构解决了问题：

[jQuery No Conflict 仍然与其他版本的 jQuery 冲突](https://stackoverflow.com/questions/10131268/jquery-no-conflict-still-conflicts-with-other-version-of-jquery)

# android - PhoneGap 应用程序在 Android 4.0.3/4 设备上以超时结束

> ID：11773427
> 
> 赞同：0
> 
> 时间：2012-08-02T08:08:50.833
> 
> 标签：android, cordova, timeout, android-4.0-ice-cream-sandwich

我面临一个奇怪的问题。我创建了一个简单的 PhoenGap 应用程序，它加载了一个 HTML 网站，到目前为止没有 JavaScript。我可以使用

2.3.3 模拟器
4.0.3 模拟器
4.1 模拟器
或 2.3.3 设备

但应用程序崩溃，控制台中出现“CardovaWebView：超时错误”，屏幕上出现“应用程序错误：与服务器的连接不成功。（文件：//android_asset/www/index.html）”。此错误在所有设备上随机发生。

我只是在查找有关繁重的 JavaScript 事情需要很长时间才能触发超时的信息，但这里不是这种情况。有人有提示吗？提前致谢

我刚刚发现：该错误仅在使用GPRS而不使用WLAN时发生。所以phonegap（或其他东西）正试图在某处实现连接......设置更高的超时值不起作用......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:17:06.813

我刚刚找到了解决方案：

它是[weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)调试器。尽管它是一个有用的工具，但它使用硬编码的 IP 来导入 javascript 脚本，如下所示：

```
<script src="http://x.x.x.x:8081/target/target-script-min.js"></script> 
```

在使用 WLAN 的真实设备上启动应用程序时，这没有问题。但是使用GPRS会导致上面提到的超时错误。希望这将节省其他人我在这里失去的时间和精力。

# iphone - 使用 writeImageToSavedPhotosAlbum 时出现 iOS 错误

> ID：11773432
> 
> 赞同：-1
> 
> 时间：2012-08-02T08:09:09.720
> 
> 标签：iphone, objective-c, ios, frameworks

这是我尝试编译项目时遇到的错误：

```
Undefined symbols for architecture armv7:
  "_writeImageToSavedPhotosAlbum", referenced from:
  -[AddNewPhotoViewController imagePickerController:didFinishPickingMediaWithInfo:] in AddNewPhotoViewController.o 
```

调用时出现错误`writeImageToSavedPhotosAlbum`。我怀疑错误与未导入必要的框架有关，但我不知道要导入什么。

有什么帮助吗？

* * *

**编辑**

这是我的`writeImageToSavedPhotosAlbum`代码：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Access the uncropped image from info dictionary
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    [self dismissModalViewControllerAnimated:YES];

    [_CameraOutput setImage:image];

    writeImageToSavedPhotosAlbum(image, nil, @selector(image:didFinishSavingWithError:contextInfo:));
} 
```

* * *

**编辑#2** 我在我的 .m 文件中包含了以下导入：

```
#import <AssetsLibrary/AssetsLibrary.h> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:22:14.987

`writeImageToSavedPhotosAlbum`是一种方法`ALAssetsLibrary`，你必须做类似的事情

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library writeImageToSavedPhotosAlbum:[image CGImage] orientation:(ALAssetOrientation)[image imageOrientation] completionBlock:your_completion_block]; 
```

# android - Android 主从流示例

> ID：11773433
> 
> 赞同：18
> 
> 时间：2012-08-02T08:09:12.660
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/becea918033ea71cd2adb5f2328d2a4e.png)

我正在尝试实现像上面这样的用户界面，并寻找一个好的教程或代码示例来学习它。有人可以帮我完成这件事吗

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-02T08:19:04.263

如果您使用安装了 ADT 的 Eclipse，您可以创建一个新的 Activity（或 Android 项目）并选择 MasterDetailFlow 作为该 Activity 使用的模板。这将包含一个带有简单项目列表的主从流。

**编辑**

对于高级列表布局，您将需要一个自定义的 ListView。

例子：

*   [自定义 ListView Android](https://stackoverflow.com/questions/6305899/custom-listview-android)
*   [带有图像和文本的 Android 自定义 ListView](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T08:13:31.020

您将需要使用片段。

以下是它们的工作方式：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# java - 选择“选项卡”时执行操作

> ID：11773434
> 
> 赞同：2
> 
> 时间：2012-08-02T08:09:15.150
> 
> 标签：java, swing, events, user-interface, tabs

我正在创建一个 JDBC 应用程序，它的用户界面由 2 个选项卡组成。第一个选项卡是插入数据，第二个是更新。当用户单击第二个选项卡时，我需要执行方法“getUpdates()”。每次用户导航到第二个选项卡时，我都需要执行此方法。我该怎么做？

（有关更多信息，这两个选项卡是单独的 Java bean，它扩展了“Common GUI”类。“Common GUI”从 JPanel 扩展而来。它们显示在“Main GUI”类中，作为选项卡）

请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T08:18:34.380

如果您正在使用，`JTabbedPane`那么您可以`JTabbedPane#addChangeListener`按照本[示例中所示使用](http://www.java2s.com/Code/JavaAPI/javax.swing/JTabbedPaneaddChangeListenerChangeListenerl.htm)

# xml - 使用 Apache camel 进行负载平衡

> ID：11773440
> 
> 赞同：2
> 
> 时间：2012-08-02T08:09:46.723
> 
> 标签：xml, client, load-balancing, apache-camel

我想要一个负载平衡系统，它有很多需求。我有一组后端服务器和一组客户端。客户端在不同的机器上运行，服务器也是如此。我想设计一个负载平衡系统，它会从客户端获取请求并将其分配给服务器。

在我脑海的某个地方，我有一种奇怪的感觉，我可以用骆驼来设置它。但是我对此没有什么问题，我有一个巨大的 XML 文件，其中包含后端服务器的列表及其描述，例如名称、它们提供的服务类型等。

现在，如果我使用骆驼，我将如何将来自客户端的请求与负载均衡器上的这个 XML 文件进行比较？客户端的请求还包含它需要的服务类型。我知道我可以使用 XPAth 或 XQuery 对结果进行排序，但是骆驼中有一个很好的例子可以作为我开始的起点。我已经阅读了 Camel in action 这本书，但它没有详细解释骆驼中的负载平衡。

任何帮助和建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:32:22.663

您可以使用带有[骆驼负载平衡器](http://camel.apache.org/load-balancer.html)的自定义类来执行 XML 处理、客户端请求映射等。

有关示例，请参见此单元测试...

[https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/CustomLoadBalanceTest.java](https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/CustomLoadBalanceTest.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:18:36.787

AFAIK 负载平衡用于在相同服务器之间分配统一（相同类型）负载。
看起来您需要一个分布式计算模型（可能带有负载平衡）。

# java - 说 int 枚举模式是编译时常量是什么意思？

> ID：11773441
> 
> 赞同：14
> 
> 时间：2012-08-02T08:09:49.783
> 
> 标签：java, enums, effective-java, compile-time-constant

这是来自有效的Java

> 使用 int 枚举模式的程序很脆弱。因为 int 枚举是编译时常量，所以它们被编译到使用它们的客户端中。

有人可以解释为什么 int 枚举模式被称为编译类型常量以及**编译到客户端**中的含义是什么？

这是一个这样的常数的例子：

```
public static final int APPLE_FUJI = 0; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T08:13:31.500

假设你有两个文件：

```
Foo.java:
public class Foo
{
    public static final int SOMETHING = 1;
}

Bar.java:
public class Bar
{
    public static void main(String[] args)
    {
        System.out.println(Foo.SOMETHING);
    }
} 
```

编译它们，运行`java Bar`，它会打印出 1。

现在将 Foo.java 更改`SOMETHING`为 2，然后重新编译*Foo.java*。重新运行`java Bar`它*仍然*`Foo`会打印 1。常量值将被复制到使用它的每一段代码中，而不是在执行时询问该值。

在实践中，*如果*您在任何时间发生任何变化时重新编译所有内容，这不是问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T08:12:09.237

值“0”本身将`.class`在编译期间内置到文件中。如果您随后更改该值，则必须重新编译使用它的*所有内容*，包括使用您的应用程序/库的任何客户端代码。

如果不这样做，您将不会收到警告，而是会收到不正确的行为。

如果您的编译时常量仅在您的代码中使用，那么假设一个完整的清理/构建周期，问题就不大了。如果您的代码随后覆盖了更广泛的受众，那么这将成为一个更大的问题。

# java - Java 布局管理器

> ID：11773447
> 
> 赞同：3
> 
> 时间：2012-08-02T08:10:14.517
> 
> 标签：java, swing, layout-manager, grid-layout

我使用 2 行 6 列的网格布局。第一列是标签，第二列是组合。我的问题是

> 根据标签的大小，组合框的大小也会增加。我想要一个稳定的组合尺寸？我应该使用哪种布局？我想要一个像

* *label1：combo1 label2：combo2 label3：combo3 label4：text1 label5：text2 label6：text3 **

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:13:46.310

遍历所有标签并为所有标签设置最大尺寸。

```
Label 1             |________________|
Label Label 2       |________________|
Label Label Label 3 |________________|
Label 1             |________________| 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T08:19:27.773

如果您必须手动编写布局并且使用 3rd 方库没有问题，您可以试试[Miglayout](http://www.miglayout.com/)。

您还可以使用图形编辑器来布局您的面板。有两种免费工具可以做得很好（我知道）：一个随[NetBeans](http://netbeans.org)和[Eclipse WindowBuilder 一起](http://www.eclipse.org/windowbuilder/)提供。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T08:37:08.287

1.  因为`GridLayout`您可以使用[JComboBox#setPrototypeDisplayValue](https://stackoverflow.com/questions/8679421/why-jcombobox-ignore-prototypedisplayvalue)`JComboBox` ，然后您可以非常舒适地在屏幕上设置初始大小

2.  你可以使用`SpringLayout`或`GridBagLayout`

3.  `LayoutManagers`例如，`MigLayout`使用今天的习惯

4.  注意要选择正确的`LayoutManager`，一切都取决于内容是否应该使用容器调整大小

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T08:50:17.677

您可以使用 GridBagLayout，将组合框的 GridBagConstrints.fill 设置为 HORIZONTAL

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T08:14:04.820

在一个`GridLayout`所有的瓷砖都具有相同的大小。

您应该考虑使用`GridBagLayout`. 您还需要`GridBagConstraints`为每个 GUI 元素使用 a 来指定其位置。

# c# - 位图参数无效

> ID：11773448
> 
> 赞同：0
> 
> 时间：2012-08-02T08:10:31.707
> 
> 标签：c#, asp.net

尝试直接从包含文件名和路径的字符串创建位图时遇到错误。

我的代码如下所述：

```
if (!string.IsNullOrEmpty(Request.QueryString["imagename"]))
    {
        string Image = Request.QueryString["imagename"];

        Bitmap originalBMP = new Bitmap(Server.MapPath(@"UserImages/" + Image));

        // Calculate the new image dimensions
        int origWidth = originalBMP.Width;
        int origHeight = originalBMP.Height;
        int sngRatio = origWidth / origHeight;
        int newWidth = 50;
        int newHeight = newWidth / sngRatio;

        // Create a new bitmap which will hold the previous resized bitmap
        Bitmap newBMP = new Bitmap(originalBMP, newWidth, newHeight);

        // Create a graphic based on the new bitmap
        Graphics oGraphics = Graphics.FromImage(newBMP);
        // Set the properties for the new graphic file
        oGraphics.SmoothingMode = SmoothingMode.AntiAlias; oGraphics.InterpolationMode = InterpolationMode.HighQualityBicubic;

        // Draw the new graphic based on the resized bitmap
        oGraphics.DrawImage(originalBMP, 0, 0, newWidth, newHeight);
        // Save the new graphic file to the server

        Response.ContentType = "image/PNG";
        newBMP.Save(Response.OutputStream, ImageFormat.Png);

        originalBMP.Dispose();
        newBMP.Dispose();
        oGraphics.Dispose();
    } 
```

但是以下代码会产生参数无效的错误：

```
Bitmap originalBMP = new Bitmap(Server.MapPath(@"UserImages/" + Image)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:31:24.200

这可能是由于文件本身不存在。

您可以使用检查该文件是否存在

```
var fileName =Server.MapPath(@"UserImages/" + Image);
if (File.Exists(fileName)
{
   //Existing code here
} 
```

或者，您可以翻转此代码并提醒用户

```
if (!File.Exists(fileName)
{
   //Throws exception/Alert user here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T18:20:24.447

对于 winforms ChrisBint 发布的内容也是有效且正确的。此外，请务必将资源/图像设置为可用于您的可执行文件。

例如复制到输出：始终复制

![在此处输入图像描述](../Images/cfb377845da751c6a315a978db8b24d0.png)

# iphone - 使用 ASIHTTPRequest 恢复下载

> ID：11773452
> 
> 赞同：0
> 
> 时间：2012-08-02T08:11:12.653
> 
> 标签：iphone, objective-c, asihttprequest

我正在从网上下载一个文件。当我恢复文件的下载时，它会从起点重新启动，而不是从我暂停下载的点重新启动。我在暂停下载时保存了下载文件的值。但现在我无法恢复我暂停的文件的下载。我正在使用此代码下载新文件

```
 url = [NSURL URLWithString:_item.link];   
    _receivedBytes = 0;
    _speed = 0;
    _lastTime = [[NSDate date] timeIntervalSince1970];
    _connection = [ASIWebPageRequest requestWithURL:url];
    [_connection setUrlReplacementMode:ASIReplaceExternalResourcesWithData];
    [_connection setDelegate: self];
    [_connection setDownloadProgressDelegate:self];
    [_connection setDownloadCache:[ASIDownloadCache sharedCache]];
    [_connection setDownloadDestinationPath: _item.path];
    [_connection startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:44:26.017

根据 ASIHTTPRequest 文档，仅当您直接下载到文件中时，才能恢复中断的下载。

我假设您下载到内存中（因为您正在使用`_receivedBytes`）。

如果您将下载的文件存储到设备文件系统中，您可以使用以下命令将其直接下载到文件系统中：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setTemporaryFileDownloadPath:@"/path/to/tempfolder/yourfile.jpg.download"];
[request setDownloadDestinationPath:@"/path/to/final/destination/yourfile.jpg"]; 
```

然后，您可以通过设置启用中断下载的恢复：

```
[request setAllowResumeForFileDownloads:YES]; 
```

您将[在此处找到更多详细信息](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

# php - 如何在核心 PHP 项目中实现 Zend 翻译

> ID：11773453
> 
> 赞同：1
> 
> 时间：2012-08-02T08:11:18.257
> 
> 标签：php, zend-framework, translation, zend-translate

我需要在一个用 Core PHP 制作的项目中实现 Zend Translation，我不想使用用于翻译的 Full ZF Just Zend Translation Classes。

我将如何做这意味着我将如何开始？

```
which classes i need to add ??
i need the Flow that how would i do this ?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:47:01.677

您需要从 Zend 库中复制这些文件

Zend_Translate.php 和 Zend_Translate（目录）其他一切都在文档中。您认为文档中有关 ZF 实施的想法是错误的。这是示例页面：

上面页面的第一个代码片段：

```
try {
    $translate = new Zend_Translate(
        array(
            'adapter' => 'Company_Translate_Adapter_MyFormat',
            'content' => '/path/to/translate.xx',
            'locale'  => 'en',
            'myoption' => 'myvalue'
        )
    );
} catch (Exception $e) {
    // File not found, no adapter class...
    // General failure
} 
```

如您所见，只使用了 Zend_Translate 类。所有的 zend 库都被开发成非常独立的，这意味着您可以通过它们的功能来分隔类（您可以通过使用类名复制文件来做到这一点）。您可以在文档中找到更多信息（一如既往;））

# php - 异步上传实体的资产（因此：在实体持久性之前）

> ID：11773459
> 
> 赞同：0
> 
> 时间：2012-08-02T08:11:52.343
> 
> 标签：php, asynchronous, upload, persistence, entities

在我们的 Web 应用程序中，我们一直在努力解决不断重复出现的问题。一个简单的例子是一篇博客文章：它有一个标题、前导和正文以及一张图片。我们的 UX 设计师希望让用户异步上传图像。当您要创建新帖子时，这会成为一个问题。它还没有被持久化，所以没有 id（例如，当您使用 id 作为图像的路径时）或者您不能将图像的位置作为数据库中的列。

我们可以为用户上传图片的博客帖子创建一个“tmp”文件夹：但是当用户从不保留帖子时你会怎么做？或者她/他什么时候回来？如果另一个用户也上传图片来创建新帖子怎么办？

围绕这个问题有什么好的做法吗？我们的应用程序是用 php 编写的，但我认为这对主题并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:03:19.877

虽然我们使用 S3 进行文件存储，但概念是一样的；

1.  在应用程序的数据库中创建一个用于上传的条目，并提供`null`参考。对条目的引用将被发送回表单，并在用户准备提交时与它一起发布。

2.  cron 会定期运行，并在 X 小时后删除引用为空的任何上传/记录。

这样做意味着您可以轻松地跨多个前端部署您的应用程序，而不必担心文件可能在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:03:44.850

编写一个脚本来清除从未保留的过期映像，并安排它定期运行，例如使用 cron。

# internet-explorer - DropShadow IE 过滤器字段插入符号位置错误

> ID：11773466
> 
> 赞同：2
> 
> 时间：2012-08-02T08:12:23.500
> 
> 标签：internet-explorer, css

我在 a 上使用了仅限 IE 的过滤器阴影`<div>`，但这会影响其中的输入和 textarea 字段的插入符号/文本光标位置。

**HTML：**

```
<div id="box">
    <input type="text"/>   
</div> 
```

**CSS：**

```
filter: progid:DXImageTransform.Microsoft.DropShadow(
    OffX=-8, 
    OffY=-8, 
    Color='#00ff0000', 
    Positive='true'); 
```

可以在[http://jsfiddle.net/Xg8Lb/2/](http://jsfiddle.net/Xg8Lb/2/)看到一个实时示例（该错误仅在 IE 中可见）。

有没有人有任何解决方法的想法？

编辑：该错误在 IE8 和 IE9 中很明显。我没有在IE10中尝试过。快速尝试告诉我 IE7 甚至不会让我在应用 dropshadow 时输入字段，但这也可能是 jsfiddle - 不知道，也不在乎 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:01:54.727

我已将以下代码添加到 CSS：

```
#box input, #box textarea
{
    position:relative;
} 
```

在我的情况下，这是固定的问题。请参阅修改后的小提琴：http: [//jsfiddle.net/keaukraine/XxBsE/](http://jsfiddle.net/keaukraine/XxBsE/)

# php - 函数 php fwrite 给出消息错误

> ID：11773467
> 
> 赞同：0
> 
> 时间：2012-08-02T08:12:38.003
> 
> 标签：php, fwrite

使用我的网络服务，我想将它显示给我的响应保存在一个 XML 文件中，但是当我尝试保存这些数据时，它显示 mze 一个错误：

这是我得到的错误：

```
Catchable fatal error: Object of class stdClass could not be converted to string in C:\wamp\www\NEOGETCASH\GESTIONNAIRE\DOSSIERS\creditsafe.php on line 13 
```

我正在使用的代码在那里；但我不知道我知道响应是 XML，但是 id 没有保存在我想要的文件中我不知道为什么，只是因为它不是`varchar`.

```
<?php

$wsdl = "https://www.creditsafe.fr/getdata/service/CSFRServices.asmx?WSDL";
$client = new SoapClient($wsdl);
$debiteur_siret  = "<xmlrequest><header><username>demo</username><password>**********</password><operation>getcompanyinformation</operation><language>FR</language><country>FR</country><chargereference></chargereference></header><body><package>standard</package><companynumber>40859907400049</companynumber></body>
</xmlrequest> " ;
$o = new stdClass();
$o->requestXmlStr = $debiteur_siret;

$fichier = 
//header('Content-Type: text/xml');
$texte=$client->GetData($o);
echo $texte;
$fp = fopen("tmp/".$_GET['n_doss'].".xml", "w+");
//fwrite($fp, $texte);
fclose($fp);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:17:26.227

消息来自以下行：

```
$texte=$client->GetData($o);
echo $texte; 
```

`GetData`不返回字符串，而是a `stdClass`，不能转换为字符串。`var_dump($texte)`查看它返回什么，并回显`stdClass`.

**编辑**：我查看了 WDSL 并检查了；该`GetData()`函数返回 a `GetDataResponse`，它似乎包含一个属性`GetDataResult`（一个字符串）。所以以下应该工作：

```
$texte=$client->GetData($o);
echo $texte->GetDataResult; 
```

# jakarta-ee - 带有 EJB 的 JAX-RS 不能在 EAR 中工作，而在 WAR 中很好

> ID：11773468
> 
> 赞同：2
> 
> 时间：2012-08-02T08:12:55.323
> 
> 标签：jakarta-ee, glassfish, jax-rs, war, ear

我有一个包含 JAX-RS 资源类的 java web 项目，如下所示：

```
@Stateless
@Path("user")
public class UserResource {
    @EJB
    BooksResource booksResource;

    ...

    @GET
    public String get() {
        return "User Resource";
    }

    @Path("books")
    public BooksResource getBooksResource() {
        System.out.println("booksResource is " + booksResource);
        return booksResource;
    }

    ...

}

@Stateless
public class BooksResource {

    @GET
    public String get() {
        return "Books Resource";
    }
} 
```

当我运行 WAR 项目时，Evething 工作正常。

但是当我把它放在一个 EAR 项目中时，我只能访问*/user*。*/user/books*返回 404并且控制台打印“booksResource 为空”。

在EAR项目中运行时似乎没有注入EJB，但为什么它在WAR项目中工作？

我正在使用 Eclipse（靛蓝 JavaEE）和 Glassfish3.1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:21:58.320

经过大量尝试，我发现使用完全相同的项目（EAR），有时它运行良好（/user 和 /user/books 都可以），有时它运行错误（我的问题中描述的情况），尤其是当我检查了[自动构建]。我认为eclipse WTP或glassfish有问题。

# regex - 正则表达式：查询字符串参数匹配

> ID：11773469
> 
> 赞同：3
> 
> 时间：2012-08-02T08:12:58.760
> 
> 标签：regex

我正在尝试学习一些关于正则表达式的知识。
这是我要匹配的内容：

```
/parent/child  
/parent/child?  
/parent/child?firstparam=abc123  
/parent/child?secondparam=def456  
/parent/child?firstparam=abc123&secondparam=def456  
/parent/child?secondparam=def456&firstparam=abc123  
/parent/child?thirdparam=ghi789&secondparam=def456&firstparam=abc123  
/parent/child?secondparam=def456&firstparam=abc123&thirdparam=ghi789  
/parent/child?thirdparam=ghi789  
/parent/child/  
/parent/child/?  
/parent/child/?firstparam=abc123  
/parent/child/?secondparam=def456  
/parent/child/?firstparam=abc123&secondparam=def456  
/parent/child/?secondparam=def456&firstparam=abc123  
/parent/child/?thirdparam=ghi789&secondparam=def456&firstparam=abc123  
/parent/child/?secondparam=def456&firstparam=abc123&thirdparam=ghi789  
/parent/child/?thirdparam=ghi789 
```

我的表达应该“抓住” **abc123**和**def456**。
现在只是一个关于我不会匹配的示例（“问号”丢失）：

```
/parent/child/firstparam=abc123&secondparam=def456 
```

好吧，我构建了以下表达式：

```
^(?:/parent/child){1}(?:^(?:/\?|\?)+(?:firstparam=([^&]*)|secondparam=([^&]*)|[^&]*)?)? 
```

但这不起作用。
你能帮我理解我做错了什么吗？
提前致谢。

**更新 1**

好的，我做了其他测试。我正在尝试使用以下内容修复以前的版本：

```
/parent/child(?:(?:\?|/\?)+(?:firstparam=([^&]*)|secondparam=([^&]*)|[^&]*)?)?$ 
```

让我解释一下我的想法：
必须以 /parent/child 开头：

```
/parent/child 
```

以下组是可选的

```
(?: ... )? 
```

前一个可选组必须以 ? 或者 /？

```
(?:\?|/\?)+ 
```

可选参数（如果指定的参数是查询字符串的一部分，我会获取值）

```
(?:firstparam=([^&]*)|secondparam=([^&]*)|[^&]*)? 
```

行结束

```
$ 
```

有什么建议吗？

**更新 2**

我的解决方案必须仅基于正则表达式。举个例子，我之前写过以下一个：

```
/parent/child(?:[?&/]*(?:firstparam=([^&]*)|secondparam=([^&]*)|[^&]*))*$ 
```

这很好用。但它也匹配以下输入：

```
/parent/child/firstparam=abc123&secondparam=def456 
```

我如何修改表达式以*不*匹配先前的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:25:23.777

您没有指定语言，所以我将只使用 Perl。所以基本上我没有匹配所有东西，而是完全匹配了我认为你需要的东西。如果我错了，请纠正我。

```
while ($subject =~ m/(?<==)\w+?(?=&|\W|$)/g) {
    # matched text = $&
}

(?<=        # Assert that the regex below can be matched, with the match ending at this position (positive lookbehind)
   =        # Match the character “=” literally
)
\\w         # Match a single character that is a “word character” (letters, digits, and underscores)
   +?       # Between one and unlimited times, as few times as possible, expanding as needed (lazy)
(?=         # Assert that the regex below can be matched, starting at this position (positive lookahead)
            # Match either the regular expression below (attempting the next alternative only if this one fails)
      &     # Match the character “&amp;” literally
   |        # Or match regular expression number 2 below (attempting the next alternative only if this one fails)
      \\W   # Match a single character that is a “non-word character”
   |        # Or match regular expression number 3 below (the entire group fails if this one fails to match)
      \$    # Assert position at the end of the string (or before the line break at the end of the string, if any)
) 
```

**输出：**

![结果](../Images/dc0c1bda597d793e44932106fa63b20a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T11:57:44.520

只要您知道参数名称将是什么并且您确定它们不会改变，这个正则表达式就可以工作。

```
\/parent\/child\/?\?(?:(?:firstparam|secondparam|thirdparam)\=([\w]+)&?)(?:(?:firstparam|secondparam|thirdparam)\=([\w]+)&?)?(?:(?:firstparam|secondparam|thirdparam)\=([\w]+)&?)? 
```

虽然正则表达式不是最好的解决方案（上面的代码示例效率**更高**，因为字符串函数比正则表达式快得多）如果您需要一个最多具有 3 个参数的正则表达式解决方案，这将起作用。出于兴趣，为什么解决方案必须只使用正则表达式？

无论如何，此正则表达式将匹配以下字符串：

```
/parent/child?firstparam=abc123  
/parent/child?secondparam=def456  
/parent/child?firstparam=abc123&secondparam=def456  
/parent/child?secondparam=def456&firstparam=abc123  
/parent/child?thirdparam=ghi789&secondparam=def456&firstparam=abc123  
/parent/child?secondparam=def456&firstparam=abc123&thirdparam=ghi789  
/parent/child?thirdparam=ghi789  
/parent/child/?firstparam=abc123  
/parent/child/?secondparam=def456  
/parent/child/?firstparam=abc123&secondparam=def456  
/parent/child/?secondparam=def456&firstparam=abc123  
/parent/child/?thirdparam=ghi789&secondparam=def456&firstparam=abc123  
/parent/child/?secondparam=def456&firstparam=abc123&thirdparam=ghi789  
/parent/child/?thirdparam=ghi789 
```

它现在只会匹配那些包含查询字符串参数的参数，并将它们放入捕获组中。

您使用什么语言来处理您的比赛？

如果您将 preg_match 与 PHP 一起使用，则可以获取整个匹配项以及捕获数组中的组

```
preg_match($regex, $string, $matches); 
```

然后您可以使用 $matches[0] 访问整个比赛，其余的则使用 $matches[1]、$matches[2] 等。

如果您想添加其他参数，您还需要在正则表达式中添加它们，并添加其他部分以获取您的数据。例如，如果你有

```
/parent/child/?secondparam=def456&firstparam=abc123&fourthparam=jkl01112&thirdparam=ghi789 
```

正则表达式将变为

```
\/parent\/child\/?\?(?:(?:firstparam|secondparam|thirdparam|fourthparam)\=([\w]+)&?)(?:(?:firstparam|secondparam|thirdparam|fourthparam)\=([\w]+)&?)?(?:(?:firstparam|secondparam|thirdparam|fourthparam)\=([\w]+)&?)?(?:(?:firstparam|secondparam|thirdparam|fourthparam)\=([\w]+)&?)? 
```

但是，随着您添加更多参数，这将变得更加繁琐。

如果启用了多行标志，您可以选择在开头和结尾包含 ^ $。如果您还需要匹配没有查询字符串的整行，请将整个正则表达式包装在非捕获组中（包括 ^ $）并添加

```
|(?:^\/parent\/child\/?\??$) 
```

到最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:46:20.187

`/`对于初学者，您并没有逃避正则表达式中的s ，并且`{1}`没有必要使用单次重复；仅当您想要多次重复或一系列重复时才使用它们。

您尝试做的部分事情根本不是很好地使用正则表达式。我将向您展示一种更简单的处理方法：您想使用 split 之类的东西并将信息放入哈希中，以便稍后检查其内容。因为您没有指定语言，所以我将使用 Perl 作为我的示例，但是我所知道的每种使用正则表达式的语言也可以轻松访问散列和拆分之类的东西，所以这应该很容易移植：

```
 # I picked an example to show how this works.
 my $route = '/parent/child/?first=123&second=345&third=678';
 my %params;  # I'm going to put those URL parameters in this hash.

 # Perl has a way to let me avoid escaping the /s, but I wanted an example that
 # works in other languages too.
 if ($route =~ m/\/parent\/child\/\?(.*)/) {  # Use the regex for this part
   print "Matched route.\n";
   # But NOT for this part. 
   my $query = $1;  # $1 is a Perl thing.  It contains what (.*) matched above.
   my @items = split '&', $query;  # Each item is something like param=123
   foreach my $item (@items) {
     my ($param, $value) = split '=', $item;
     $params{$param} = $value;  # Put the parameters in a hash for easy access.
     print "$param set to $value \n";
   }
 }

 # Now you can check the parameter values and do whatever you need to with them.
 # And you can add new parameters whenever you want, etc.
 if ($params{'first'} eq '123') {
   # Do whatever
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:30:58.497

这个脚本会帮助你。
首先，我检查一下，有没有像`?`.
然后，我杀死了行的第一部分（左起`?`）。
接下来，我将行拆分为`&`，其中每个值拆分为`=`。

```
my $r = q"/parent/child  
/parent/child?  
/parent/child?firstparam=abc123  
/parent/child?secondparam=def456  
/parent/child?firstparam=abc123&secondparam=def456  
/parent/child?secondparam=def456&firstparam=abc123  
/parent/child?thirdparam=ghi789&secondparam=def456&firstparam=abc123  
/parent/child?secondparam=def456&firstparam=abc123&thirdparam=ghi789  
/parent/child?thirdparam=ghi789  
/parent/child/  
/parent/child/?  
/parent/child/?firstparam=abc123  
/parent/child/?secondparam=def456  
/parent/child/?firstparam=abc123&secondparam=def456  
/parent/child/?secondparam=def456&firstparam=abc123  
/parent/child/?thirdparam=ghi789&secondparam=def456&firstparam=abc123  
/parent/child/?secondparam=def456&firstparam=abc123&thirdparam=ghi789  
/parent/child/?thirdparam=ghi789";

for my $string(split /\n/, $r){
        if (index($string,'?')!=-1){
            substr($string, 0, index($string,'?')+1,"");
            #say "string = ".$string;
            if (index($string,'=')!=-1){
                my @params = map{$_ = [split /=/, $_];}split/\&/, $string;
                $"="\n";
                say "$_->[0] === $_->[1]" for (@params);
                say "######next########";
                }
            else{
                #print "there is no params!"
            }       

        }
        else{
            #say "there is no params!";
        }       
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T08:42:40.087

我的解决方案：
`/(?:\w+/)*(?:(?:\w+)?\?(?:\w+=\w+(?:&\w+=\w+)*)?|\w+|)`

解释：
`/(?:\w+/)*`匹配`/parent/child/`或`/parent/`

`(?:\w+)?\?(?:\w+=\w+(?:&\w+=\w+)*)?`匹配`child?firstparam=abc123`或`?firstparam=abc123`或`?`

`\w+`匹配文本`child`

`..|)`不匹配（空）

如果您只需要查询字符串，则模式会减少，例如：
`/(?:\w+/)*(?:\w+)?\?(\w+=\w+(?:&\w+=\w+)*)`

如果您想从查询字符串中获取每个参数，这是一个 Ruby 示例：

```
re = /\/(?:\w+\/)*(?:\w+)?\?(\w+=\w+(?:&\w+=\w+)*)/
s = '/parent/child?secondparam=def456&firstparam=abc123&thirdparam=ghi789'
if m = s.match(re)
    query_str = m[1] # now, you can 100% trust this string
    query_str.scan(/(\w+)=(\w+)/) do |param,value| #grab parameter
        printf("%s, %s\n", param, value)
    end
end 
```

输出

```
secondparam, def456
firstparam, abc123
thirdparam, ghi789 
```

# jquery - 如何使用 CSS 或 jquery 将网页内容居中在 body 标记内？

> ID：11773472
> 
> 赞同：0
> 
> 时间：2012-08-02T08:13:17.960
> 
> 标签：jquery, css

我知道这听起来很奇怪，但我遇到了这个问题，我无法将`<body>`标签内的元素居中。我已经用过`margin: 0px auto;`，但仍然没有任何效果。有没有办法通过使用 jquery 来实现？谢谢

这是我的 .css 文件中的代码

```
body {
margin: 0px auto !important;
background:#FFFFFF;
font-family:Arial;
font-size:12px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:16:48.523

设置自动边距有效，但它需要固定在该元素上才能工作。

```
<your-element>{
   width:200px;
   margin:0 auto;    
}​ 
```

如果您想将多个元素居中，您可以在所有这些元素上设置宽度和边距，或者更简洁 - 引入一个包装器元素，该元素包含您想要居中的所有元素并声明该元素的宽度和边距。这样做的好处是您只需要声明一次宽度，以后更容易更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:21:12.920

设置`margin: 0px auto;`在要居中的元素上。

例子：

```
 body{
      width: 100%;
  }

  .aDiv {
     width: 200px;
     height: 200px;
     margin: 0 auto;
  } 
```

[**看演示**](http://jsfiddle.net/akhurshid/3AFyn/)

**编辑：**

正如OP在他的评论中所说的那样；

> 他想将身体内的所有元素集中在一起。

所以我建议设置`margin: 0px auto;`你想要居中的所有元素。

[**查看示例**](http://jsfiddle.net/akhurshid/TMTWJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:28:01.357

您应该能够简单地使用 CSS 使内容居中：

```
 body{text-align:center;} 
```

但如果您已经这样做了，但没有任何效果，请尝试在子元素的任一侧使用填充，以便它们位于中心。

```
 body{text-align:center; padding-left:20%; padding-right:20%;} 
```

如果您仍然遇到问题，请确保您尝试居中的元素未设置为 position:relative; 或位置：绝对；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:29:07.490

您可以在您的 parent 中创建一个 div `<body>`，给它一个特定的宽度，然后通过自动设置左右边距来将其居中。

例如;

```
.test{
    background: #06C;
    margin-left: auto;
    margin-right: auto;
    height: 100px;
    width: 80%; /* or you may give it in px like 100px */
} 
```

***[这](http://jsfiddle.net/Q5GSw/)***是现场演示

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T08:50:14.613

相当简单。

```
body {
 text-align:center; /* ie */}
div#website_container {
 width:960px;
 margin:0 auto; /* others */
 text-align:left;} 
```

然后开始在 div 中创建您的站点`website_container`。

# mysql - mysql 在不应该时选择行？

> ID：11773473
> 
> 赞同：0
> 
> 时间：2012-08-02T08:13:22.547
> 
> 标签：mysql

我很困惑，当我发现将值设置为 0 实际上选择了一些行。O_o 0 是数字，而不是字符串...这是我不知道的东西？mysql的某些特定功能还是我做错了什么？

这是查询：

```
SELECT * FROM contacts WHERE owner=0 
```

结果是：

```
contact_id,owner,contact
10,d9659deb29f21dcf468783f1e7f52aa2b2ab6b48,7d1d00cd5cc06c27b3bcbefa8b4aeeb16bdec14e 
```

这是测试转储：

```
-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Server version:               5.5.8 - Source distribution
-- Server OS:                    Linux
-- HeidiSQL version:             7.0.0.4053
-- Date/time:                    2012-08-02 11:05:48
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!40014 SET FOREIGN_KEY_CHECKS=0 */;

-- Dumping database structure for test
CREATE DATABASE IF NOT EXISTS `test` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `test`;

-- Dumping structure for table test.contacts
CREATE TABLE IF NOT EXISTS `contacts` (
  `contact_id` int(10) NOT NULL AUTO_INCREMENT,
  `owner` varchar(40) DEFAULT '',
  `contact` varchar(40) DEFAULT '',
  PRIMARY KEY (`contact_id`),
  KEY `owner` (`owner`),
  KEY `contact` (`contact`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8;

-- Dumping data for table test.contacts: ~2 rows (approximately)
/*!40000 ALTER TABLE `contacts` DISABLE KEYS */;
REPLACE INTO `contacts` (`contact_id`, `owner`, `contact`) VALUES
    (9, '7d1d00cd5cc06c27b3bcbefa8b4aeeb16bdec14e', 'd9659deb29f21dcf468783f1e7f52aa2b2ab6b48'),
    (10, 'd9659deb29f21dcf468783f1e7f52aa2b2ab6b48', '7d1d00cd5cc06c27b3bcbefa8b4aeeb16bdec14e');
/*!40000 ALTER TABLE `contacts` ENABLE KEYS */;
/*!40014 SET FOREIGN_KEY_CHECKS=1 */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:18:22.127

我敢打赌：OWNER 是保留关键字。将您的选择更改为

```
SELECT * FROM contacts WHERE contacts.owner=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:17:05.537

使用引号将数字与字符数据类型列进行比较：

```
SELECT * FROM contacts WHERE owner = '0'; 
```

`CAST`或使用以下函数进行类型转换：

```
SELECT * FROM contacts WHERE owner = CAST(0 AS CHAR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:21:54.887

所有者 '7d1d00cd5cc06c27b3bcbefa8b4aeeb16bdec14e' 以数字 '7...' 开头，MySQL 将此值转换为 7，我们有 7 = 0 - **FALSE**。

所有者 'd9659deb29f21dcf468783f1e7f52aa2b2ab6b48' 以字符 'd...' 开头，MySQL 将此值转换为 0，因此 0 = 0 - **TRUE**。

This is how MySQL converts strings to numbers.

# php - 注册表单失败 PHP AJAX

> ID：11773487
> 
> 赞同：0
> 
> 时间：2012-08-02T08:14:09.940
> 
> 标签：php, jquery

在 ajax 响应中返回多个错误证明很麻烦，如果回显多个错误，例如 1&2 变为 12。在数组中返回响应数据的最佳方法是什么？非常感谢任何帮助，在此先感谢。

这是将表单发布到 PHP 验证器的函数

```
$("document").ready(function() {
    $("#btn-signup").click(function() {
        var first_name = $("#fname_up").val();
        var last_name = $("#lname_up").val();
        var vemail = $("#email_up").val();
        var password = $("#password_up").val();
        var cpassword = $("#cpassword_up").val();
        var dataString = 'firstname='+first_name+'&lastname='+last_name+'&email='+vemail+'&password='+password+'&cpassword='+cpassword;
        $.ajax({
            type: "POST",
            url: "-signup.php",
            data: dataString,
            success: function(response){
                if (response == 1) {
                    console.log("1");
                }
                if (response == 2) {
                    console.log("2");
                }
                if (response == 3) {
                    console.log("3");
                }
                if (response == 4) {
                    console.log("4");
                }
                if (response == 5) {
                    console.log("5");
                }
                if (response == 6) {
                    console.log("6");
                }
                if (response == 7) {
                    console.log("7");
                }
                if (response == 12) {
                    console.log("You got to here");
                }
            }
        });
    return false;
    });
}); 
```

这是 PHP 表单验证器。

```
<?php

session_start();
require_once "database.php";
db_connect();

$errors = array();

// If request is a form submission
if($_SERVER['REQUEST_METHOD'] == 'POST'){
  // Validation

  // Check first_name is non-blank
  if(0 === preg_match("/\S+/", $_POST['firstname'])){
    echo "1";
  }

  // Check last_name is non-blank
  if(0 === preg_match("/\S+/", $_POST['lastname'])){
    echo "2";
  }

  // Check email is valid (enough)
  if(0 === preg_match("/.+@.+\..+/", $_POST['email'])){
    echo "3";
  }

  // Check password is valid
  if(0 === preg_match("/.{6,}/", $_POST['password'])){
    echo "4";
  }

  // Check password confirmation_matches
  if(0 !== strcmp($_POST['password'], $_POST['cpassword'])){
    echo "5";
  }

  // If no validation errors
  if(0 === count($errors)){

    // Sanitize first, last, and email
    $firstname = mysql_real_escape_string($_POST['firstname']);
    $lastname  = mysql_real_escape_string($_POST['lastname']);
    $email      = mysql_real_escape_string($_POST['email']);
    $password      = mysql_real_escape_string($_POST['password']);
    $cpassword     = mysql_real_escape_string($_POST['cpassword']);

    // Generate pseudo-random salt
    $salt = sha1(microtime() . $_POST['password']);

    // Generate password from salt
    $password = sha1($salt . $_POST['password']);

    // Insert user into the database
    $query = "INSERT INTO.......

    $result = mysql_query($query);

    if(mysql_errno() === 0){
      // Registration successful
      $user_id = mysql_insert_id();
      log_in($user_id);
      echo "9";
    } else if (preg_match("/^Duplicate.*email.*/// get rid of the two lines beforei", mysql_error())){
      echo "10";
    }  
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:24:34.783

你得到哪些错误？您的 AJAX URL 是否正确分配？

我认为你应该给出“-signup.php”文件的绝对路径。/path/to/signup-file.php 之类的东西

您为什么使用**if(0 === count($errors))**而不是**if(count($errors) == 0)**，也用于上述验证。您可以使用**if(empty($errors)** )。

如需更多帮助，请将您遇到的错误写给我们

# javascript - 在 Meteor 中，如何创建一个适用于所有模板的通用事件处理程序？

> ID：11773494
> 
> 赞同：1
> 
> 时间：2012-08-02T08:14:40.903
> 
> 标签：javascript, meteor, dom-events

在 Meteor 文档[http://docs.meteor.com/#eventmaps](http://docs.meteor.com/#eventmaps)中，它声明“ [http://docs.meteor.com/#eventmaps](http://docs.meteor.com/#eventmaps) ”，并且教程显示模板采用诸如 with 之类的事件。

```
Template.template1.events = {
  'click #btnSubmit': function (event) {
    //do something
  }
};

Template.template2.events = {
  'click #btnSubmit': function (event) {
    //do something
  }
}; 
```

我不想为每个有提交按钮的 Meteor 模板创建这个样板。我宁愿为所有表单和所有提交按钮提供一个事件处理程序。

我怎样才能有一个单击处理程序？或其他事件处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:29:09.943

我认为您所能做的就是在其他地方创建函数，然后将其用作每个单独模板事件的回调：

```
var clickHandler = function(item) {
    // Do whatever
};

Template.template1.events({
    'click #btnSubmit': clickHandler
});

Template.template2.events({
    'click #btnSubmit': clickHandler
}); 
```

# sql - 如何为列指定一个约束，以使该值应属于一组值？

> ID：11773495
> 
> 赞同：0
> 
> 时间：2012-08-02T08:14:41.543
> 
> 标签：sql, set, constraints

我想为表中的 Grade 列指定一个约束，例如 Grade='A' 或 'B' 或 'C'。

如何在我的 CREATE TABLE 命令中指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:19:14.287

您没有指定您正在使用什么 DBMS 系统，但这应该可以在 Oracle 或 SQL Server 和一些 MySQL 存储引擎中工作：

```
ALTER TABLE <your_table> ADD CONSTRAINT Grade_Check CHECK (Grade IN ('A', 'B', 'C')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:23:03.787

你可以这样做：

```
CREATE TABLE tbl_name
(
grade varchar(2),
CONSTRAINT chk_grade CHECK (grade IN ('A','B','C'))
) 
```

# c++ - dynamic_cast 上的 SIGSEGV

> ID：11773497
> 
> 赞同：2
> 
> 时间：2012-08-02T08:14:44.993
> 
> 标签：c++, dynamic-cast

我正在尝试将一个虚拟类动态转换为另一个：

```
SomeClass::SomeFunc(_AListner& listner)
_BListner* listner = dynamic_cast<_BListner*>(&listner) 
```

请注意，_BListner 类派生自 _AListner 类。

但我在调试时收到此错误：

```
SIGSEGV, Segmentaion fault.

<some address> in  __dynamic_cast () from /usr/lib/libstdc++ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:34:46.893

SIGSEGV 可以在以下情况下触发`dynamic_cast`：

*   该对象有一个野生地址
*   对象的元数据（通常是 vtable 指针）已损坏
*   对象与表达式的静态类型不匹配

或者

*   该表达式没有多态类型（这意味着传递给 的表达式的静态类型`dynamic_cast`，而不仅仅是它指向的对象的动态类型）。

最后一种情况应该被编译器捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:05:56.550

您提到_BListner 是从_AListner 派生的。你有像 _CListner 这样的第三方类，它也是从 _AListner 派生的吗？如果是这样，则允许将 _CListner 对象传递给您的函数，但 dynamic_cast 失败并抛出 std::bad_cast 类型的异常。最终不捕获该异常可能会导致 SIGSEGV。

只是一个假设，您肯定需要提供更多信息。

# backbone.js - 如何使用backbone.js中的Web服务获取数据对象

> ID：11773499
> 
> 赞同：0
> 
> 时间：2012-08-02T08:14:49.190
> 
> 标签：backbone.js

我有一个关系数据库，其中两个表由一个键链接。根据父表中的搜索条件，Web 服务将返回由子表记录组成的列表。例如，如果我将父表作为“版本”，列 v_type 和主键 v_id 引用子表“参考”，主键 ref_id 和外键 v_id。我需要获取表类型“参考”的记录列表。

1.  如何解析获得的列表？
2.  如何编写模板和视图？

一个非常简单的示例或语法将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:58:55.400

我认为您可以从查看[Backbone-relational](https://github.com/PaulUithol/Backbone-relational/)开始，这是所有数据库关系问题都可以得到简单答案/解决方案的地方。

# sqlite - sqlite 多表加入...如何？

> ID：11773500
> 
> 赞同：-1
> 
> 时间：2012-08-02T08:14:57.940
> 
> 标签：sqlite, join

我有三张表 doodhiya、doodhdata 和 cashdata。

我正在尝试加入这些并通过此代码获取一些需要的数据但没有成功

```
SELECT dname,ddate,dmonth,dyear,dmilk,uid 
FROM doodhiya
   INNER JOIN  doodhiya.dhid = doodhdata.ddhid
   INNER JOIN  doodhdata.dhid = cashdata.uid
WHERE (dname='$mik' AND dmonth='$mikdatem' AND dyear='$mikdatey')
ORDER BY  ddate ASC 
```

我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:18:55.197

您在联接中缺少表名和 ON 关键字

```
SELECT dname,ddate,dmonth,dyear,dmilk,uid 
FROM doodhiya
   INNER JOIN doodhdata ON doodhiya.dhid = doodhdata.ddhid
   INNER JOIN cashdata ON doodhdata.dhid = cashdata.uid
WHERE (dname='$mik' AND dmonth='$mikdatem' AND dyear='$mikdatey')
ORDER BY  ddate ASC 
```

关于这部分问题的注释：

> *请建议我该怎么做*

连接的语法记录在手册中（以及网络中数百万的 SQL 参考资料）。因此，下次您可以做的最好的事情是首先查阅手册和/或 SQL 参考。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T08:16:44.060

```
SELECT retailername,
       productname,
       qty,
       stock,
       price,
       discount
FROM   temptablename,
       productmaster,
       retailermaster
WHERE  temptablename.pid = productmaster.productid
       AND temptablename.rid = retailermaster. retailercode 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T08:23:34.680

```
SELECT dname,
      ddate,
      dmonth,
       dyear,
      dmilk,
      uid
FROM  doodhdata,
       cashdata
 WHERE  doodhiya.dhid = doodhdata.ddhid
       AND doodhdata.dhid = cashdata.uid
       AND dname='$mik' 
       AND dmonth='$mikdatem' 
      AND dyear='$mikdatey'
ORDER BY  ddate ASC 
```

# android - 如何在 android ICS 上使用“exec app_process”启动 jar

> ID：11773506
> 
> 赞同：4
> 
> 时间：2012-08-02T08:15:28.140
> 
> 标签：android, process, jar, classloader

我有 3 台设备。

1.基于cm9(android 4.0.4)。

2.htcg14(安卓4.0.3)

3.moto me525 基于miui(android 2.2)

他们都扎根了。

我在设备 1 和 3 的终端中执行下面的代码，该过程运行良好。但是设备2，它不起作用。

```
su
export CLASSPATH=/sdcard/foo.jar
exec app_process /system/bin xx.xx.Test '$@' 
```

日志

```
W/dalvikvm(12364): Exception Ljava/lang/NullPointerException; thrown while initializing Ljava/lang/System;
W/dalvikvm(12364): Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Ljava/lang/ClassLoader$SystemClassLoader;
W/dalvikvm(12364): WARNING: system class loader is NULL (setting main ctxt)
W/dalvikvm(12364): Warning: tracked references remain post-initialization
W/dalvikvm(12364): MAIN reference table (0xf9a388) dump:
W/dalvikvm(12364):   Last 1 entries (of 1):
E/dalvikvm(12364): Class lookup Ljava/lang/Daemons; attempted with exception pending
W/dalvikvm(12364): Pending exception is:
I/dalvikvm(12364): java.lang.ExceptionInInitializerError:
I/dalvikvm(12364):     at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:125)
I/dalvikvm(12364):     at dalvik.system.NativeStart.main(Native Method)
I/dalvikvm(12364): Caused by:
I/dalvikvm(12364): java.lang.ExceptionInInitializerError:
I/dalvikvm(12364):     at java.lang.ClassLoader.createSystemClassLoader(ClassLoader.java:100)
I/dalvikvm(12364):     at java.lang.ClassLoader.access$000(ClassLoader.java:65)
I/dalvikvm(12364):     at java.lang.ClassLoader$SystemClassLoader.<clinit>(ClassLoader.java:81)
I/dalvikvm(12364):     at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:125)
I/dalvikvm(12364):     at dalvik.system.NativeStart.main(Native Method)
I/dalvikvm(12364): Caused by:
I/dalvikvm(12364): java.lang.NullPointerException:
I/dalvikvm(12364):     at java.util.Hashtable.put(Hashtable.java:365)
I/dalvikvm(12364):     at java.lang.System.initSystemProperties(System.java:286)
I/dalvikvm(12364):     at java.lang.System.getProperties(System.java:260)
I/dalvikvm(12364):     at java.lang.System.getProperty(System.java:425)
I/dalvikvm(12364):     at java.lang.System.getProperty(System.java:406)
I/dalvikvm(12364):     at java.lang.System.<clinit>(System.java:90)
I/dalvikvm(12364):     at java.lang.ClassLoader.createSystemClassLoader(ClassLoader.java:100)
I/dalvikvm(12364):     at java.lang.ClassLoader.access$000(ClassLoader.java:65)
I/dalvikvm(12364):     at java.lang.ClassLoader$SystemClassLoader.<clinit>(ClassLoader.java:81)
I/dalvikvm(12364):     at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:125)
I/dalvikvm(12364):     at dalvik.system.NativeStart.main(Native Method)
I/dalvikvm(12364): DALVIK THREADS:
I/dalvikvm(12364): (mutexes: tll=0 tsl=0 tscl=0 ghl=0)
I/dalvikvm(12364): "main" prio=5 tid=1 RUNNABLE
I/dalvikvm(12364):   | group="main" sCount=0 dsCount=0 obj=0x40aa1490 self=0xf99d30
I/dalvikvm(12364):   | sysTid=12364 nice=0 sched=0/0 cgrp=default handle=1074107592
I/dalvikvm(12364):   | schedstat=( 0 0 0 ) utm=18 stm=7 core=0
I/dalvikvm(12364):   at dalvik.system.NativeStart.main(Native Method)
I/dalvikvm(12364): 
E/dalvikvm(12364): VM aborting
F/libc    (12364): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1)
I/DEBUG   ( 4218): debuggerd: 2012-08-02 14:29:57
I/DEBUG   ( 4218): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   ( 4218): Build fingerprint: 'htc_asia_tw/htc_pyramid/pyramid:4.0.3/IML74K/391535.6:user/release-keys'
I/DEBUG   ( 4218): pid: 12364, tid: 12364  >>> app_process <<<
I/DEBUG   ( 4218): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadd00d 
```

当我在java中执行这些代码时，设备1和2不起作用。他们有同样的错误。关于设备3，我不知道结果，因为有人拿回了他的设备。

帮助！有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T03:58:38.753

似乎在启动 dalvikvm 时，您的**LD_LIBRARY_PATH**未在环境中正确设置。在 ICS & JB 中，dalvikvm 需要**LD_LIBRARY_PATH**才能在其中包含特定路径。默认值为`/vendor/lib:/system/lib`，尽管通常`/system/lib`就足够了。否则你会看到异常。

您可以尝试在脚本中`export LD_LIBRARY_PATH=/vendor/lib:/system/lib`的命令之后添加。`su`

如果您的 euid 与您的 uid 不匹配，则可能会从环境中删除**LD_LIBRARY_PATH 。**您可以使用`id`and `id -r`after`su`检查它们是否匹配。您还可以检查是否`/system/bin/mksh`已设置，因为这也可能导致问题。

# http - 代理后面的 npm 失败，状态为 403

> ID：11773509
> 
> 赞同：74
> 
> 时间：2012-08-02T08:15:52.623
> 
> 标签：http, node.js, proxy, npm

我正在尝试在代理后面运行*npm 。*我尝试过直接或通过*Authoxy*输入代理：

```
npm config set proxy http://localhost:8999
npm config set https-proxy http://localhost:8999 
```

无论我使用哪个代理，运行时我总是会遇到相同的错误`npm search`：

```
npm info it worked if it ends with ok
npm verb cli [ 'node', '/usr/local/bin/npm', 'search' ]
npm info using npm@1.1.45
npm info using node@v0.8.4
npm verb config file /Users/xxx/.npmrc
npm verb config file /usr/local/etc/npmrc
npm verb config file /usr/local/lib/node_modules/npm/npmrc
npm WARN Building the local index for the first time, please be patient
npm verb url raw /-/all
npm verb url resolving [ 'https://registry.npmjs.org/', './-/all' ]
npm verb url resolved https://registry.npmjs.org/-/all
npm info retry registry request attempt 1 at 09:48:47
npm http GET https://registry.npmjs.org/-/all
npm info retry will retry, error on last attempt: Error: tunneling socket could not be established, sutatusCode=403
npm info retry registry request attempt 2 at 09:48:57
npm http GET https://registry.npmjs.org/-/all
npm info retry will retry, error on last attempt: Error: tunneling socket could not be established, sutatusCode=403
npm info retry registry request attempt 3 at 09:49:57
npm http GET https://registry.npmjs.org/-/all
npm ERR! Error: tunneling socket could not be established, sutatusCode=403
npm ERR!     at ClientRequest.onConnect (/usr/local/lib/node_modules/npm/node_modules/request/tunnel.js:148:19)
npm ERR!     at ClientRequest.g (events.js:185:14)
npm ERR!     at ClientRequest.EventEmitter.emit (events.js:115:20)
npm ERR!     at Socket.socketOnData (http.js:1383:11)
npm ERR!     at TCP.onread (net.js:410:27) 
```

`sutatusCode`该命令总是以[sic!] **403**失败- 这意味着未经授权。我已将 Authoxy 设置为不需要用户名/密码。当我绕过 Authoxy 并以 http://user:pass@proxy:port 的形式为我们的 NTLM 代理提供真正的代理凭据时，也会发生同样的错误。

如何通过代理完成这项工作？

**更新**

我在 NPM 项目上创建了一个问题来报告此问题：[https ://github.com/isaacs/npm/issues/2866](https://github.com/isaacs/npm/issues/2866)

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-08-02T08:22:49.530

好的，所以在发布问题后的几分钟内，我自己在这里找到了答案： [https ://github.com/npm/npm/issues/2119#issuecomment-5321857](https://github.com/npm/npm/issues/2119#issuecomment-5321857)

问题似乎是 npm 在代理上的 HTTPS 上并不是很好。将注册表 URL 从 HTTPS 更改为 HTTP 为我修复了它：

```
npm config set registry http://registry.npmjs.org/ 
```

我仍然必须提供代理配置（在我的情况下通过 Authoxy），但现在一切正常。

似乎是一个常见问题，但没有很好的记录。我希望这里的答案能让人们更容易找到他们是否遇到这个问题。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-11T05:14:02.403

```
npm config set proxy http://proxy.company.com:8080
npm config set https-proxy http://proxy.company.com:8080 
```

归功于[http://jjasonclark.com/how-to-setup-node-behind-web-proxy](http://jjasonclark.com/how-to-setup-node-behind-web-proxy)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-16T07:48:44.723

如果您需要提供用户名和密码以在代理上进行身份验证，请使用以下语法：

```
npm config set proxy http://usr:pwd@host:port
npm config set https-proxy http://usr:pwd@host:port 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-15T15:53:42.373

如果其他人最终破坏了他们的代理配置设置，请转到您的**.npmrc**，输入设置。*此文件位于您的节点根文件夹级别。*

这是我更正后的文件的样子：

```
#proxy = http://proxy.company.com:8080
https-proxy = https://proxy.company.com:8080 
registry = http://registry.npmjs.org/ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-01-21T13:44:59.550

就我而言，我阅读了 npm 使用的注册表：

```
 npm config get registry 
```

我得到了

```
http://registry.npmjs.org/ 
```

然后我就变成`http`了`https`这样：

```
npm config set registry https://registry.npmjs.org/ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-18T10:07:53.717

由于安全违规，组织可能拥有自己的存储库。

如下设置您的本地仓库。

npm 配置设置注册表[https://yourorg-artifactory.com/](https://yourorg-artifactory.com/)

我希望这能解决问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-29T07:27:58.747

对于那些使用 Jenkins 或其他 CI 服务器的人：定义代理的位置很重要*，*尤其是当它们在本地开发环境和 CI 环境中不同时。在这种情况下：

*   不要在项目的 .npmrc 文件中定义代理。或者，如果您这样做，请务必覆盖 CI 服务器上的设置。
*   任何其他代理设置都可能会导致`403 Forbidden`您使用错误代理这一事实几乎没有提示。检查您的`gradle.properties`或此类并根据需要修复/覆盖。

TLDR：不在项目中定义代理，而是在您正在使用的机器上定义代理。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-07T17:29:08.150

我遇到了同样的问题，最后通过断开所有 VPN 解决了​​。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-17T13:11:14.460

在 Windows 10 上，执行

```
npm config edit 
```

这将在文本编辑器中打开配置文件。删除用户设置的所有代理变量，只保留默认值。

```
;;;;
; npm userconfig file
; this is a simple ini-formatted file
; lines that start with semi-colons are comments.
; read `npm help config` for help on the various options
;;;;

--->Delete everything proxy settings from here.

;;;;
; all options with default values
;;;; 
```

关闭并保存。再试一次。这就是在我的本地主机中对我有用的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-18T15:37:45.860

在 windows10 上，创建此文件。为我工作。

[![在此处输入图像描述](../Images/f4ba86776472de10fe1c12844f692077.png)](https://i.stack.imgur.com/XLCRq.png)

# java - 处理数据库：良好的软件工程概念

> ID：11773510
> 
> 赞同：3
> 
> 时间：2012-08-02T08:15:55.883
> 
> 标签：java, sql, jdbc

当我创建 JDBC 应用程序时，我通常做的是将“sql 语句”硬编码到 java 程序中。举个例子

```
ResultSet rs = st.execute("select * from Users") 
```

但是，我听说这种方法不是好的软件工程概念。有人说所有这些 sql 语句都应该作为“存储过程”保留在数据库中，而 JDBC 应该访问它们。从这两种方法来看，哪些可以归类为好的软件工程概念？请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:34:20.637

我预测，你不会对此达成共识。

存储过程可用于封装复杂的数据库逻辑和查询，同时避免将数据从数据库中传输出来以进行排序/过滤/查询等。

缺点是您经常发现业务逻辑潜入存储过程，而它可能应该保留在应用程序本身中。

因此，开发人员/数据库管理员等之间经常会就该逻辑应该驻留在哪里以及如何使用存储过程进行*拉锯战。*我建议务实。本地化您的 SQL 查询，这样当您更改 SQL（表名等）时，您不必更改整个代码库中的内容。使用存储过程来提高性能以及在执行代码复杂但对数据库而言微不足道的事情时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:35:34.077

使用硬编码的字符串并将它们传入`Statement`肯定不是一个好的软件工程实践。

您应该始终使用`PreparedStatement`

例子：

```
String selectSQL = "SELECT USER_ID, USERNAME FROM DBUSER WHERE USER_ID = ?";
PreparedStatement preparedStatement = dbConnection.prepareStatement(selectSQL);
preparedStatement.setInt(1, 1001);
ResultSet rs = preparedStatement.executeQuery(selectSQL ); 
```

存储过程也是很好的做法。大多数情况下，存储过程更多地用作性能角度，因为您的查询是预编译的，除了第一次运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T08:46:08.623

在数据库中使用函数或存储过程将是一个很好的做法，这些函数或存储过程`SYS_REFCURSOR`使用 java 返回并调用它们`CallableStatement`

如果您使用的是 Oracle 数据库，您可以尝试以下操作

**数据库功能**

```
CREATE OR REPLACE FUNCTION my_func (p_deptno IN number,p_emp_no IN varchar2)
   RETURN SYS_REFCURSOR
AS
   p_cursor   SYS_REFCURSOR;
BEGIN
   OPEN p_cursor FOR
      select *
        from emp
        where deptno = p_deptno and emp_number=p_emp_no;
   RETURN p_cursor;
END;
/ 
```

**爪哇**

```
 callablestatement = 
                connection.prepareCall("begin ? :=my_func(?,?); end;");
callablestatement.registerOutParameter(1, OracleTypes.CURSOR);
callablestatement.setString(2, param);
callablestatement.setString(3, param);
            callablestatement.execute();
            resultSet = ((OracleCallableStatement)callablestatement).getCursor(1); 
```

使用这种方法，您可以避免在 java 中对 sql 语句进行硬编码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T08:49:17.297

使用 Hibernate [http://www.hibernate.org/](http://www.hibernate.org/)（或其他 ORM），这样就不需要维护这么多 SQL 语句。Hibernate 会在后台为您生成大部分 SQL，因此您无需担心维护 SQL 语句。

其他 ORM 也可用，例如 TopLink 和 OpenJPA

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T11:33:03.187

我更愿意将所有 SQL 查询存储为常量：

```
public static final String sqlEmpInsert = "SELECT EMP_NAME FROM EMPLOYEES"; 
```

在一个单独的 java 类中。我为每个模块设置了单独的“常量”类文件，对于某些模块，我将 SQL 查询存储在单独的属性文件中，以便将其与 java 类文件隔离开来。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T08:20:29.853

如果您对 SQL 语句进行硬编码，则每次更改数据库中的某些内容时，您可能必须在源代码中更改它们。

通过使用存储过程，您只需要更改这些，并且您的 java 程序的源代码不需要更改。

因此，我建议使用存储过程。

# objective-c - UITableView 附件添加到索引 0 时添加到其他单元格

> ID：11773511
> 
> 赞同：0
> 
> 时间：2012-08-02T08:15:58.473
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我很难理解`UITableView`. 我正在从`MPMediaItemCollection`歌曲队列中填充我的表。我想要实现的是在与当前播放的歌曲匹配的索引路径上拥有一个正在播放的指示器作为单元格的附件视图。

我最初尝试使用以下方法：

```
if (indexPath.row == [mutArray indexOfObject:[mainViewController.musicPlayer.nowPlayingItem valueForProperty:MPMediaItemPropertyTitle]]) {        
    UIImageView *playButtonView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"PlayButton.png"]];
    [cell setAccessoryView:playButtonView];
} 
```

这适用于正在播放的项目，它实际上总是`objectAtIndex:0`. 但我不明白为什么我的表格似乎在每个组合可见单元格的高度定义一次这个索引。

让我试着更清楚地解释这一点。假设我的桌子高 600 像素，其内容高度为 1800 像素。这会导致在内容高度下大约每 600 像素添加一次指示器。

现在我的第一个想法是，根据歌曲名称判断索引的代码有问题，所以我尝试将其更改为：

```
if (indexPath.row == 0) 
```

但这会产生相同的结果！

这个屏幕截图应该有助于解释我在说什么。

![在此处输入图像描述](../Images/9203e5c21077bad6fc04ca21c1650c73.png)

那么，我可以做些什么来使表格`indexPath0`仅视为参考整个表格的第一个单元格，而不是参考当前可见的单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:37:32.073

您还必须明确说明附件何时**不应**存在：

```
if (indexPath.row==0) {
   UIImageView *playButtonView = [[UIImageView alloc] initWithImage:
     [UIImage imageNamed:@"PlayButton.png"]];
   [cell setAccessoryView:playButtonView];
} 
else {
   [cell setAccessoryView:nil];
} 
```

原因是当单元格 0 在不同的行上出列（即重用）时，它仍然具有附件视图。

实际上，这是一个很好的案例研究，可以帮助您了解出列表视图单元格的实际工作原理；-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:37:59.417

这就是 tableview 重用单元格的方式：当单元格滚动出屏幕时，它会被添加到重用池中，因此一旦您将附件视图添加到单元格并且该单元格被重用 - 您将在滚动时在随机位置看到它。

您可以检查您的单元格索引`-willDisplayCell:forIndexPath`并添加（如果未添加），隐藏（如果它存在，但不是您想要的索引）或显示（如果它存在并且它是您的索引），或者将附件视图添加到所有单元格并显示/根据需要隐藏。

# python - Python 库 (foundation\FormParameters.py) 错误

> ID：11773516
> 
> 赞同：2
> 
> 时间：2012-08-02T08:16:02.217
> 
> 标签：python

我在 IDLE 中输入的第一行是

```
from foundation import FormParameters 
```

我收到这样的错误

```
>>> from foundation import FormParameters
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    from foundation import FormParameters
  File "C:\Python32\lib\foundation\FormParameters.py", line 19
    con_str = StringIO()
                       ^
TabError: inconsistent use of tabs and spaces in indentation 
```

因为它是一个标准库，我可以更改它吗？还是有其他办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:14:47.197

> 因为它是一个标准库，我可以更改它吗？

您可以打开引用的文件（“C:\Python32\lib\foundation\FormParameters.py”）并对其进行编辑——在这种情况下，我建议用空格替换制表符，因为制表符和 python 是一种邪恶的组合。

正如其他一些人评论的那样，这不是标准库的一部分——但即使是，同样的规则也适用——找到文件，你可以自由编辑它（如果你打算运行，你可能不应该这样做您的程序在其他机器上使用未修改的标准库）。对于 C 扩展，此过程稍微复杂一些，因为您需要编译它们。

# c# - 将字节转换为浮点值

> ID：11773520
> 
> 赞同：0
> 
> 时间：2012-08-02T08:16:26.227
> 
> 标签：c#, byte

我需要将 28 字节值转换为 7 个浮点值，每个 4 个字节表示 1 个浮点值。我必须在 C# 中实现它。我搜索了很多解决方案，但其中大多数是 C/Java。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T08:19:47.727

采用

```
System.BitConverter.ToSingle(..) 
```

像这样：

```
float f1,f2,f3,f4,f5,f6,f7;  
f1 = System.BitConverter.ToSingle(bytearr,0);  
f2 = System.BitConverter.ToSingle(bytearr,4);  
f3 = System.BitConverter.ToSingle(bytearr,8);  
...  
f7 = System.BitConverter.ToSingle(bytearr,24); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:43:10.417

像这样：

```
byte b;
float f;
f = (float)b; 
```

# php - xpath 选择并保存特定索引

> ID：11773524
> 
> 赞同：1
> 
> 时间：2012-08-02T08:17:00.797
> 
> 标签：php, xml, xpath

我的 php (simplexml) 中有一个 xml 解析器，并且想在 xpath 下选择并保存一个索引元素

```
function startXML(&$resarrary, $path, $lang) {

if(file_exists($path)) {
    $xml = simplexml_load_file($path);
    if($xml) {      
        foreach($xml->xpath("//languageKey") as $cos) {
        utf8_encode($cos);

        // Select required languagekey 

        if ($cos[index] == $lang) {
        foreach($xml->xpath("//languageKey[@index='$lang']//label[@type='js']") as $cos) {
            ?>
                <table>
                    <tr>
                        <td><?php echo $cos ?></td>
                    </tr>
                </table>    
            <?php 
            array_push($resarrary,$cos);

            }

        } 

      }

    } 
    else {
        FALSE;
    }
} 
```

}

表 echo $cos 仅用于测试....它为我提供了从我的 xml 文件中搜索的正确结果（在这种情况下，结果是“模式 1”）

所以选择有效，但我怎样才能将结果（“模式 1”）保存到数组中？如果我尝试这个 array_push(...) 并使用 print_r 查看 resarray 我只能得到 simplexml xpath 搜索的全部内容

数组（[0] => SimpleXMLElement 对象（[@attributes] => 数组（[index] => list_mode_1 [type] => js）[0] => 模式 1））

如果我更改行 array_push($resarrary,$cos->attributes()); 我明白了

数组（[0] => SimpleXMLElement 对象（[@attributes] => 数组（[index] => list_mode_1 [type] => js）））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:45:01.653

XML

```
<lKey index="default" type="array">
    <a index="list_mode_1" type="js">Mode 1</a>
    <b index="list_mode_2">Mode 2</b>
    <c index="list_mode_3">Mode 3</c>
</lKey> 
```

# c++ - 将 int*** 分配给 int[][][]

> ID：11773525
> 
> 赞同：0
> 
> 时间：2012-08-02T08:17:02.930
> 
> 标签：c++

> **可能的重复：**
> [多维数组的指针如何在 C 中工作](https://stackoverflow.com/questions/7161247/how-pointer-of-multi-dimension-arrays-work-in-c)

我需要 an`int***`指向 an 的值`int[][][]`，但是当我遍历行、列和层并分配`ptr[r][c][l]`给 时`val[r][c][l]`，我得到了分段错误。

有人可以告诉我如何分配`int***`一个`int[][][]`吗？

这是我的代码：

```
int row=2;
int col=3;
int layer=4;

int arr[2][3][4] = {{{1, 2, 3, 4}, {1, 2, 3, 4}, {1, 2, 3, 4} },{ {1, 2, 3, 4}, {1, 2, 3, 4}, {1, 2, 3, 4} } };

 char _mode = 'h';

int*** ptr ;

for (int r=0;r<row;r++) 
    {
    for (int c=0;c<col;c++)
        {
         for (int l=0;l<layer;l++)

            {

            ptr[row][col][layer] = arr[row][col][layer];

            }
        }
    }

cout <<findExtreme(ptr, row, col, layer,  _mode)<<endl; 
```

这是被调用的函数

```
int findExtreme(int*** arr,int row,int col,int layer, char _mode)
{
int val = 0;

 for (int r=0;r<row;r++)    
    {
    for (int c=0;c<col;c++)
        {
         for (int l=0;l<layer;l++)
            {
            if (_mode == 'h')
                if (arr[r][c][l] > val)
                    val = arr[r][c][l];
            if (_mode == 'l')
                if (arr[r][c][l] < val)
                    val = arr[r][c][l];
            }
        }
    }
    return val;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:21:39.173

你不能这样做。你可能想要

```
int val[1][2][3];
int (*ptr)[1][2][3] = &val; 
```

# mysql - 更新包含大量数据的表中的行

> ID：11773530
> 
> 赞同：1
> 
> 时间：2012-08-02T08:17:14.323
> 
> 标签：mysql

我必须更新`views`当前的`post`. 来自表`posts`女巫的数据> 200万。并且页面的加载时间很慢。

表：

```
idpost | iduser | views | title        |
1      | 5675   | 45645 | some title   |
2      | 345    | 457   | some title 2 |
6      | 45     | 98    | some title 3 |
and many more... up to 2 millions 
```

`iduser`有**`Index`**，`idpost`有**`Primary key`**。_

如果我分离数据并制作一个新表`post_views`并用于`LEFT JOIN`获取视图的值。起初它会很快，因为新表仍然很小，但随着时间的推移，她也会有 > 200 万行。而且它会很慢。你如何处理巨大的桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:52:00.013

## 拆分表

您应该拆分表以分隔不同的内容并防止`title`数据重复。这将是一个更好的设计。我建议以下架构：

```
posts(idpost, title)    
post_views(idpost, iduser, views) 
```

## 更新`views`计数

您一次只需要更新`views`一行。因为，有人查看您的页面，然后您更新相关行。因此，一次只更新一行而没有搜索开销（感谢键和索引）。我不明白这怎么会造成开销？

## 合计`views`

您可能会运行这样的查询：

```
SELECT SUM(views) FROM post_views WHERE idpost = 100 
```

是的，这可能会产生开销。一个解决方案可能是在每次更新后创建一个新表并**更新**`total_post_views`该表中的相应值。因此，您将摆脱并直接访问总观看次数。**`post_views``LEFT JOIN`**

 **但是，每次更新的更新也会产生开销。为了提高性能，您可以`total_post_views`在每次更新`post_views`. 如果您选择这种方式，您可以执行更新：

*   **定期**，比如每 30 秒，
*   **在某些更新计数**之后`post_views`，例如每 30 次更新。

这样，您当然会得到近似的结果。如果这是可以忍受的，那么我建议你走这条路。**

# android - Android：一个布局中的两个 FragmentActivity

> ID：11773535
> 
> 赞同：0
> 
> 时间：2012-08-02T08:17:52.827
> 
> 标签：android, fragment, android-fragmentactivity

是否有可能在一个布局中托管两个 FragmentActivity？

例如，如果我有以下布局，我可以在 container1 中托管一个 FragmentActivity，在 container2 中托管一个 FragmentActivity 吗？：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<FrameLayout
    android:id="@+id/container1"
    android:layout_width="match_parent"
    android:layout_height="150dp" >
</FrameLayout>

<FrameLayout
    android:id="@+id/container2"
    android:layout_width="match_parent"
    android:layout_height="150dp" >

</FrameLayout> 
```

如果这不可能，我是否可以有一个 FragmentActivity 加载两个不同的片段并在 container1 中显示一个，在 container2 中显示一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:23:14.010

你有点困惑。布局不包含活动，活动包含布局。在您的布局中，您可以放置`View`​​ s 和片段，所以是的，可以在一个中加载两个片段`FragmentActivity`，或者更确切地说，这是实现您想要的唯一方法。

# c# - C# 创建窗口服务来同步 MS。访问 SQL Server

> ID：11773537
> 
> 赞同：0
> 
> 时间：2012-08-02T08:18:01.983
> 
> 标签：c#, windows-services

我尝试了几天如何将数据库从 Ms. Access 2007 64bits 同步到 SQL Server 2008 64bits，但它没有可能的解决方案。所以现在我想创建[窗口服务](http://support.microsoft.com/kb/816169) 来检查是否有我插入到 MS 的新记录。访问与否，如果有新记录插入，那么他们会告诉 SQL Server 将所有这些记录也插入到它的记录中。我用 2 个项目创建了一个解决方案：这是主要项目：

```
using System.ServiceProcess;
using System.Text;

namespace AutoSync
{

  public partial class Thread : ServiceBase
  {
      public Thread()
      {
         InitializeComponent();
      }
      protected override void OnStart(string[] args)
      {
      }
      protected override void OnStop()
      {
      }
   }
 } 
```

第二个项目是服务设置。我现在想尝试的是，创建另一个 C# 类，检查 Ms. Access 记录，然后将所有已插入的新记录传递给 SQL Server。谁能给我任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:12:57.993

您可能希望使用[这种方法](https://stackoverflow.com/questions/503564/how-might-i-schedule-a-c-sharp-windows-service-to-perform-a-task-daily)来运行您的业务逻辑，即在一天中的特定时间运行。

[在此处](https://stackoverflow.com/questions/593454/easiest-language-for-creating-a-windows-service/593803#593803)查看设置服务的详细说明。

接下来，您要确定与 MS Access 和 SQL Server 的连接，并处理同步的业务逻辑。这可能应该在一天中的一个或多个设定时间发生，或者您可以使用 Timer 类在给定的时间间隔进行轮询，如我上面提供的链接所示。

您将在服务的 OnStart 方法中启动此业务逻辑。

# javascript - 如何在客户端输出数据？（快递+monogdb+玉）

> ID：11773538
> 
> 赞同：1
> 
> 时间：2012-08-02T08:18:12.033
> 
> 标签：javascript, node.js, mongodb, express, pug

我正在尝试显示从数据库中检索到的数据（我使用的是 node.js express 和 mongodb），但是我需要的数据成功显示在控制台中，但我需要在 Jade 的前端输出它.

我检索的数据：

```
{
date: Thu, 02 Aug 2012 07:47:19 GMT,
name: 'user1',
_id: 501a3087f7dd1e3863000001,
desc: { 
  age: '2' 
      } 
} 
```

检索上面的数据并呈现到用户页面的函数：

```
function(req, res){
    memberModel.findOne({desc: {age: '2'}}, function(err, docs){
        res.render('user.jade', {  members: docs });
        console.log(docs);
    });
}; 
```

这是应该显示年龄为 2 的用户的 user.jade 文件：

```
thead
    tr
        th Name
tbody
- members.forEach(function(member){
    tr
        td= member['name']
- }) 
```

我收到以下错误：

```
500 TypeError:
th Name 12| tbody > 13| - members.forEach(function(member){ 14| tr 15| td= member['name'] 
16| - }) Object { date: Thu, 02 Aug 2012 07:47:19 GMT, name: 'user1', _id: 
501a3087f7dd1e3863000001, desc: { age: '2' } } has no method 'forEach' 
```

所以我不能使用 forEach 来显示数据？我应该怎么做才能显示它？任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:32:52.530

如果要显示成员列表

服务器：

```
memberModel.find({desc: {age: '2'}}).toArray( function(err, docs){
    res.render('user.jade', { title: 'Svenska Spel - Member list', members: docs });
    console.log(docs);
}); 
```

玉：

```
for member in members
    td= member.name 
```

如果您只想显示一名成员

服务器：

```
function(req, res){
    memberModel.findOne({desc: {age: '2'}}, function(err, docs){
        res.render('user.jade', { title: 'Svenska Spel - Member list', member: docs });
        console.log(docs);
    });
}; 
```

玉：

```
thead
tr
    th Name
tbody
    tr
        td= member['name'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:58:09.877

通过使用 find() 而不是 findOne() 解决

```
function(req, res){
    memberModel.find({desc: {age: '2'}}, function(err, docs){
        res.render('user.jade', { members: docs });
        console.log(docs);
}); 
```

# c# - 如何将样式添加到数据表

> ID：11773543
> 
> 赞同：0
> 
> 时间：2012-08-02T08:18:28.207
> 
> 标签：c#

使用 CSharp，如何设置数据表的宽度、高度、边框颜色等。我想在表格中添加一些看起来很酷的功能。

```
 for (int i = 0; i <= 5; i++)
    {
        if (myQuantity[i]!=null && myQuantity[i].Length>0)
        {
            row = dt.NewRow();
            row["Name"] = myName[i];
            row["Quantity"] = myQuantity[i];
            row["Price"] = myPrice[i];

            c = Convert.ToInt32(myQuantity[i]);

            int price = Convert.ToInt32(myPrice[i]) * c;

            row["Amount"] = price;
            // row["ImageUrlPath"] = "~/Images/cross.png";
            dt.Rows.Add(row);

        }
    }

  //  dt.Rows[0].Delete();
    GridView1.DataSource = dt;
    GridView1.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:22:49.300

您不能在 DataTable 上执行此操作，但可以在 GridView 的行上执行此操作

**例子 ：**

```
void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
if (e.Row.RowType == DataControlRowType.DataRow)
{            
   e.Row.CssClass="your css class";
}
} 
```

# nginx - Nginx 不同域在同一个 IP

> ID：11773544
> 
> 赞同：140
> 
> 时间：2012-08-02T08:18:32.077
> 
> 标签：nginx, dns

我想使用 nginx 在同一台服务器上托管 2 个不同的域。我通过@属性将两个域重定向到该主机。尽管我配置了 2 个不同的服务器块，但每当我尝试访问第二个域时，它都会重定向到第一个域。

这是我的配置。

```
server {
    listen      www.domain1.com:80;
    access_log  /var/log/nginx/host.domain1.access.log  main;
    root /var/www/domain1;
    server_name www.domain1.com;

    location ~ \.php$ {
        # Security: must set cgi.fixpathinfo to 0 in php.ini!
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME         $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
        include /etc/nginx/fastcgi_params;
    }
}

server {
    listen       www.domain2.com:80;
    access_log  /var/log/nginx/host.domain2.access.log  main;
    root /var/www/domain2;
    server_name www.domain2.com;

    location ~ \.php$ {
        # Security: must set cgi.fixpathinfo to 0 in php.ini!
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME         $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
        include /etc/nginx/fastcgi_params;
    }
} 
```

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-08-02T13:08:28.540

你的“听”指令是错误的。请参阅此页面： http: [//nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)。

他们应该是

```
server {
    listen      80;
    server_name www.domain1.com;
    root /var/www/domain1;
}

server {
    listen       80;
    server_name www.domain2.com;
    root /var/www/domain2;
} 
```

请注意，我只包括了相关行。其他一切看起来都不错，但为了清楚起见，我只是删除了它。要对其进行测试，您可能需要先尝试从每个服务器提供一个文本文件，然后再实际提供 php.ini 文件。这就是为什么我把'root'指令留在那里。

# zend-framework - 如何分别装饰文本元素标签和输入？

> ID：11773547
> 
> 赞同：0
> 
> 时间：2012-08-02T08:18:39.233
> 
> 标签：zend-framework, zend-form, decorator

我有一个这样声明的文本元素：

```
$name = $this->createElement('text', 'name');
$name->setLabel('imie:'); 
```

我想装饰这个元素，让它像这样呈现：

```
<div class="row">
  <span class="label">
    <label for="name" class="highlight">Name</label>
  </span>
  <span class="formw">
    <input type="text"  id="someid" name="name" class="textfield">
  </span>
</div> 
```

我无法让它正常工作。有人可以帮我设置装饰器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:27:39.757

使用 viewScript 装饰器：

部分@`views/scripts/_partial.phtml （命名为你想要的）

```
<form action="<?php echo $this->element->getAction() ?>"
      method="<?php echo $this->element->getMethod() ?>">
    <div class="row">
        <span class="label">
            <?php echo $this->element->name->renderLabel() //render the label for element ?>
        </span>
        <span class="formw">
            <?php echo $this->element->name->renderViewHelper() //render just the input of the element ?>
        </span>
        <?php echo $this->element->submit //render the whole submit element ?>
    </div>
</form> 
```

在您的表单中设置装饰器：

```
class Application_Form_NewForm extends Zend_Form
{
    public function init() {
        $this->setMethod('POST');
        //set the viewscript decorator
        $this->setDecorators(array(
            array('ViewScript', array(
                    'viewScript' => '_partial.phtml'
            ))
        ));
    //more follows... 
```

现在像往常一样渲染你的表单

您可能必须完全按照您想要的方式使用元素装饰器，但这应该可以让您接近目标。

希望这可以帮助...

# oop - 协议缓冲区和 OO 设计

> ID：11773552
> 
> 赞同：23
> 
> 时间：2012-08-02T08:19:06.377
> 
> 标签：oop, protocol-buffers

我在客户端-服务器架构中使用协议缓冲区作为有线数据格式。域对象（java bean）将经历以下生命周期。

1.  用于客户端业务逻辑
2.  转换为 protobuf 格式
3.  传送到服务器
4.  转换回域对象
5.  用于服务器端业务逻辑

ProtoBuf 文档中的[“协议缓冲区和 OO 设计”部分建议将生成的类包装在适当的域模型中。](https://developers.google.com/protocol-buffers/docs/javatutorial)

我想找出最好的方法。

例如，我有一个简单的原型定义。

```
package customer;

option java_package = "com.example";
option java_outer_classname = "CustomerProtos";

message Customer {
    required string name = 1;
    optional string address = 2;
} 
```

这就是定义域模型的方式。如您所见，数据完全存储在 proto builder 对象中。

```
package com.example;

public class CustomerModel
{
    private CustomerProtos.Customer.Builder builder = CustomerProtos.Customer.newBuilder();

    public String getName()
    {
        return builder.getName();
    }

    public void setName(String name)
    {
        builder.setName(name);
    }

    public String getAddress()
    {
        return builder.getAddress();
    }

    public void setAddress(String address)
    {
        builder.setAddress(address);
    }

    public byte[] serialize()
    {
        return builder.build().toByteArray();
    }

} 
```

这是一个好习惯吗？因为这些对象在生命周期的各个阶段都会用到，而我们只在客户端-服务器传输阶段需要protocolbuf格式。

访问 proto builder 类 getter/setter 方法时是否存在任何性能问题，特别是当 proto 定义复杂且嵌套时？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-03T13:51:18.550

我没有使用协议缓冲区的经验，但我*不*建议实现为特定序列化/传输框架量身定制的域对象。你将来可能会后悔。

软件应用程序的域对象和逻辑应尽可能独立于特定的实现问题（在您的情况下是序列化/传输），因为您希望您的域易于理解并且将来可重用/可维护。

如果您想定义独立于序列化/传输的域对象，您有两种选择：

1.  在序列化/传输之前，您将信息复制到协议缓冲区特定对象并将它们发送到您的服务器。在那里，您必须将信息复制回您的域对象。
2.  [使用Kryo](http://code.google.com/p/kryo/)或 [ProtoStuff](http://code.google.com/p/protostuff/)等非协议序列化库将您的域对象直接传输到服务器。

选项 1 的缺点是您的域被定义了两次（这对于修改来说是不可取的）和信息的复制（这会产生容易出错和不可维护的代码）。

选项 2 的缺点是您失去了[模式演变](http://martin.kleppmann.com/2012/12/05/schema-evolution-in-avro-protocol-buffers-thrift.html)（尽管 ProtoStuff 显然[支持它](http://code.google.com/p/protostuff/wiki/ProtostuffRuntime)）并且完整的（可能很大的）对象图被序列化和传输。尽管您可以在序列化/传输之前修剪对象图（手动或使用[JGT ）。](http://jgt.sourceforge.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-11T09:29:15.700

我们制作了一个[protobuf 转换器](https://github.com/BAData/protobuf-converter)来解决将域模型对象转换为 Google Protobuf 消息的问题，反之亦然。

**如何使用它：**

必须转换为 protobuf 消息的领域模型类必须满足条件：

*   类必须由*@ProtoClass*注释标记，其中包含对相关 protobuf 消息类的引用。
*   类字段必须由*@ProtoField*注释标记。这些字段必须有 getter 和 setter。

例如：

```
@ProtoClass(ProtobufUser.class)
public class User {

    @ProtoField
    private String name;
    @ProtoField
    private String password;

    // getters and setters for 'name' and 'password' fields
    ...
} 
```

将 User 实例转换为相关 protobuf 消息的代码：

```
User userDomain = new User();
...
ProtobufUser userProto = Converter.create().toProtobuf(ProtobufUser.class, userDomain); 
```

反向转换代码：

```
User userDomain = Converter.create().toDomain(User.class, userProto); 
```

对象列表的转换类似于单个对象的转换。

# mvvm - MVVM - 如何将 ViewModel 包装在 ViewModel 中？

> ID：11773555
> 
> 赞同：1
> 
> 时间：2012-08-02T08:19:13.857
> 
> 标签：mvvm, model, viewmodel

首先，我已经阅读[了这篇文章](https://stackoverflow.com/questions/3612027/mvvm-with-aggregated-model-classes-how-to-wrap-in-viewmodels)，并没有找到我的问题的答案。

我不确定这是聚合**模型**类还是聚合**ViewModel**类，但这就是我所拥有的：

在我的 WPF（使用 Prism）应用程序中，我有一个视图“*过滤客户视图*”，它连接到服务并根据过滤器请求“客户”对象列表。

从服务返回的列表是这样的：

```
List<CustomerDTO>    FilteredCustomers; 
```

*CustomerDTO*看起来像这样：

```
public class CustomerDTO
{
    public    Guid                CustomerId;
    public    String              Name;
    public    String              Address;
    public    String              PhoneNumber;
    public    OrderInfoDTO        LastOrderInformation;
    public    List<OtherClass>    ListOfSomething;
} 
```

*OrderInfoDTO*看起来像这样：

```
public class OrderInfoDTO
{
    public    Guid          OrderId;
    public    DateTime      OrderDate;
    public    int           NumberOfProducts;
    public    double        TotalAmountSpent;
} 
```

OtherClass看起来像这样*：*

```
public class OtherClass
{
    public    Guid          Id;
    public    String        SomeText;
} 
```

如您所见 - 客户可能有也可能没有“最后订单”，

我想将“ *CustomerDTO* ”对象包装在**ViewModel**中，以便可以将其绑定到视图。

这就是我想做的事情：

```
public class CustomerViewModel : NotificationObject
{
    private CustomerDTO    _customerDTO;

    public CustomerViewModel(CustomerDTO   customerDTO)
    {
        _customerDTO = customerDTO;
    }

    public Guid CustomerId
    {
        get  {  return _customerDTO.CustomerId;  }
        set  {  _customerDTO.CustomerId = value; RaisePropertyChanged("CustomerId "); }
    }

    public String Name
    {
        get  {  return _customerDTO.Name;  }
        set  {  _customerDTO.Name = value; RaisePropertyChanged("Name"); }
    }

    public String Address
    {
        get  {  return _customerDTO.Address;  }
        set  {  _customerDTO.Address = value; RaisePropertyChanged("Address"); }
    }

    public String PhoneNumber
    {
        get  {  return _customerDTO.PhoneNumber;  }
        set  {  _customerDTO.PhoneNumber= value; RaisePropertyChanged("PhoneNumber"); }
    }
} 
```

.

**问题：**

1.  首先 - 'CustomerDTO' 是所谓的**模型**吗？'OrderInfoDTO' 也是一个模型吗？'OtherClass' 呢？
2.  如何处理*CustomerViewModel*类中的“OrderInfoDTO”？我是否也为它创建一个“ViewModel”？我在哪里创建“OrderInfoDTO”视图模型？？？如果现在有人更新客户并设置“OrderInfoDTO”值会发生什么？
3.  如何处理*CustomerViewModel*类中的“OtherClass”列表？我要为它创建一个 ObservableCollection 吗？如果有人想要删除其中的项目或更新其中的项目或向其中添加项目，会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:00:08.303

这样想：

1.  视图是您的 UI，您可以将视图模型中的元素绑定到使用 {Binding Path=, Mode=TwoWay -- 如果您想根据用户输入进行更新
2.  模型只是数据，可以是记录集、文件、数据库记录等。因此 CustomerDTO 和 OrderInfoDTO 是模型。
3.  视图模型是数据（模型）和 UI（视图）之间的链接。它将允许您更改数据，以便更容易在 UI 上呈现

您需要在所有可能在后台更改列表的情况下使用 ObservableCollection。

除非您需要视图来更新该数据，否则您不需要 OrderInfoDTO 的视图模型。如果您在其中显示带有 OrderInfoDTO 的 CustomerDTO 信息，那么将其作为 CustomerDTO 视图模型的属性就可以了。

# c# - 如何在c#中为未加密的文件或文件夹设置密码？

> ID：11773557
> 
> 赞同：1
> 
> 时间：2012-08-02T08:19:21.077
> 
> 标签：c#, passwords

我加密我在 DVD 上的视频文件，当用户想看视频时，我解密硬盘上的视频文件，然后显示给用户。如果用户检查文件的路径，用户可以复制和使用我的电影。如何为用户无法打开或运行文件夹/文件的文件夹或文件（视频文件）设置密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:34:43.930

解密需要多长时间？如果它不是太长，你可以制作一个程序，在你想运行它们时解密它们，然后在退出时解密它们。

要么，要么制作您自己的文件夹查看系统，要求为某些文件输入密码。

或者另一种选择是隐藏文件，然后在使用 Windows 帮助和支持找到的文件夹选项中取消隐藏它们。

# mysql - 将 SQL Server 创建脚本转换为 MySQL

> ID：11773558
> 
> 赞同：0
> 
> 时间：2012-08-02T08:19:23.607
> 
> 标签：mysql, sql, sql-server

我有以下 SQL Server 创建脚本。谁能帮我把它转换成 MySQL。

我不确定定义主键的位在做什么。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE IF NOT EXISTS `webdb`.`UserSessions`(
UniqueID VARCHAR(50) NOT NULL,
UserID VARCHAR(255) NOT NULL,
TokenExpires DATETIME NOT NULL,
LastSeen DATETIME NOT NULL,
LoggedOut bit NOT NULL,
CONSTRAINT [PK_EndedSessions] PRIMARY KEY CLUSTERED 
(
UniqueID ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:21:42.757

```
CREATE TABLE IF NOT EXISTS `webdb`.`UserSessions`
(
    UniqueID VARCHAR(50) NOT NULL PRIMARY KEY,
    UserID VARCHAR(255) NOT NULL,
    TokenExpires DATETIME NOT NULL,
    LastSeen DATETIME NOT NULL,
    LoggedOut bit NOT NULL
); 
```

# android - 将安卓设备置于 USB 主机模式？

> ID：11773561
> 
> 赞同：2
> 
> 时间：2012-08-02T08:19:31.250
> 
> 标签：android, usb

对于我的应用程序，我需要让 android 设备充当 USB 主机。它需要从 USB 连接的设备发送和接收数据。我[在 Android Developers Site 浏览了 USB Host](https://developer.android.com/guide/topics/connectivity/usb/host.html)，并开发了示例代码如下：

主.java

```
public class UsbDemoProjActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn = (Button)findViewById(R.id.button1);
        btn.setOnClickListener( new OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "button click", 30).show();

                Intent it = new Intent(UsbDemoProjActivity.this,Second.class);
                startActivity(it);
            }
        });
    }
} 
```

二.java：

```
public class Second extends Activity{
    UsbDevice device;
    UsbManager mUsbManager;
    PendingIntent mPermissionIntent;
    private static String ACTION_USB_PERMISSION ="com.android.example.USB_PERMISSION";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        System.out.println("111111111");
        mUsbManager = (UsbManager) getSystemService(Context.USB_SERVICE);
        ACTION_USB_PERMISSION ="com.android.example.USB_PERMISSION";
        System.out.println("2222222222");
        HashMap<String, UsbDevice> deviceList = mUsbManager.getDeviceList();
        device = deviceList.get("deviceName");
        System.out.println("33333333333");
        mPermissionIntent = PendingIntent.getBroadcast(this, 0, 
                                            new Intent(ACTION_USB_PERMISSION), 0);
        System.out.println("444444444444");
        IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
        System.out.println("555555555555");
        registerReceiver(mUsbReceiver, filter);
        System.out.println("66666666666");
        mUsbManager.requestPermission(device, mPermissionIntent);
    }

    private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            System.out.println("7777777777777");
            if (ACTION_USB_PERMISSION.equals(action)) {
                synchronized (this) {
                    System.out.println("88888888888");
                    UsbDevice device = (UsbDevice)intent.getParcelableExtra( 
                                                      UsbManager.EXTRA_DEVICE);

                    if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                        if(device != null){
                            System.out.println("99999999999999");
                            //call method to set up device communication
                        }
                    } else {
                        //Log.d(TAG, "permission denied for device " + device);
                        System.out.println("permission denied for device" + device);
                    }
                }
            }
        }
    };
} 
```

但是，当我单击*Main.java*页面中的按钮时，它显示错误：

> 不幸的是，USBDemoProj 已停止

并且在 logcat 中显示错误，如下图所示，但这里显示的`system.output()`行是在*Second.java*类中声明的。谁能帮我我的应用程序中的错误是什么？

另外，我是否在示例代码中使用了正确的方法来访问 USB 主机模式下的设备？谁能给我一个更好的方法？

![在此处输入图像描述](../Images/839562abcb966de594a6e5121d49bea8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:25:02.240

我正在使用 slickdev 库与我的串行设备通信，所以我不确定你的代码。不是 onDataReceived()？这可能只是图书馆的功能，但......

我们的清单都应该包含以下内容：

```
 <uses-feature android:name="android.hardware.usb.host" android:required="true"></uses-feature> 
```

并且在

```
 <intent-filter>
        <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
    </intent-filter>
    <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
            android:resource="@xml/device_filter" /> 
```

# mysql - 如何使复合键唯一？

> ID：11773562
> 
> 赞同：9
> 
> 时间：2012-08-02T08:19:31.727
> 
> 标签：mysql, sql, database-design, uml, composite-key

我正在为一所学校的学生建立一个数据库。这是我目前所拥有的： ![在此处输入图像描述](../Images/b094517c197f90d4747ef34517f5e97b.png)

*如果您不喜欢阅读，请跳至“简而言之”部分*

问题是我对这个设计不满意。我希望 和 的组合是唯一的`grade`，`subgrade`并`id_class`作为学生表的主键。我可以`student_id`从 3 中删除并制作一个复合键，但我也不想要那个。也许我应该制作另一个表，让我们说`combination_id`where和是外键`grade`，并且有一个额外的列用作表的 ID。所有的列都将是主键。但问题是这 3 列仍然可以重复，因为有额外的列 ( )。例如，我可以有相同的，但不同的，这将使行有效，因为表的 4 列的复合键（`subgrade``id_class``comb_id``comb_id``grade``subgrade``class_id``comb_id``combination_id`）。

简而言之，我想`students_id`保留该表的唯一主键，但要成为另一个表的外键，该表在某种程度上是`grades`,`subgrade`和的唯一组合`class_id`。

如果我不够清楚，请在下面的评论中提问，并提前感谢您。

PS*我很抱歉标题难以描述，但我不擅长命名*

**编辑 1：** 更清楚一点： `grade`可以是 1 到 12 `subgrade`可以是 a 到 j `id_class`可以是 1 到 30，这是你在课堂上的号码

所以一个学生可以来自 7b 班级，他的班级人数 - 5

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-02T08:43:51.817

不要混淆*唯一键*和*主键*的概念。您可以很好地添加一个跨越三列的[唯一键](http://dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_unique_constraint)`grades`，`subgrade`并且`class_id`. 这样，对于这三列，没有两行[可以具有](http://dev.mysql.com/doc/refman/5.6/en/constraint-primary-key.html)相同的值。当您写到您不想将这三个作为复合主键时，我不确定复合唯一补充键是否会更好。如果不是，您必须澄清何时可以接受复合键。

要创建唯一键，您可以使用以下 SQL[语句](http://dev.mysql.com/doc/refman/5.6/en/alter-table.html)：

```
ALTER TABLE students ADD UNIQUE gsc (grades, subgrade, class_id); 
```

这个词`gsc`只是我从关键列的首字母组成的一个名字；`EXPLAIN`使用您想要的任何名称，因为除非您想在某些输出或类似内容中识别密钥，否则这无关紧要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:46:10.587

我不完全清楚你为什么想要你所描述的，但我会以以下方式查看模型......

你有学生
——他们是不同的实体，而不是其他实体的组合
——他们有自己的属性；姓名、出生日期等

你有班级
- 这些是学生群体
- 每个学年同一个“班级”有不同的学生
- 他们也有自己的属性；等级、次等级等

您的模型中有一个我通常不会使用的额外属性
- 如果一个班级有 20 名学生，则每个学生都用从 1 到 20 的辅助 id 标识

这会给*我*以下维度表

```
Student                  Class                     Grade              SubGrade
-----------------------  ------------------------  -----------------  -----------------
id          INT PK       id           INT PK       id    INT PK       id    INT PK
first_name  VARCHAR(45)  name         VARCHAR(45)  name  VARCHAR(45)  name  VARCHAR(45)
last_name   VARCHAR(45)  grade_id     INT FK       desc  VARCHAR(45)  desc  VARCHAR(45)
etc, etc                 subgrade_id  INT FK       etc, etc           etc, etc 
```

该`Class`表将有一个唯一的约束，`(grade_id, subgrade_id)`因此只有一个类可以是`7b`.

然后你需要使用事实表将学生与他们的班级联系起来......

```
Class_Membership
-----------------------
id               INT PK
student_id       INT FK
class_id         INT FK
academic_year    INT 
```

如果一个学生在任何一个学年都应该只上一个班级，那么您将对`(student_id, academic_year)`.

`Class`或者，您可以在表中列出学年。这意味着您每年都会重复上同一门课，但在某些年份`7g`可能不存在*该课程（例如，那一年的学生较少）*。

同样，你可以让学生从`7b`年`7c`中转学。在这种情况下，`Class_Membership`表可能有一个`start_date`字段，也可能有一个`end_date`字段。

然而，这些都没有直接创建`id_class`字段*（1-20 代表一个有 20 名学生的班级）*。就我个人而言，我不会有这样的字段，表中的`id`字段`Class_Membership`可以提供大多数相同的功能，并且可能还有其他功能。但是，如果*有*必要，您可以简单地将其添加到`Class_Membership`表中......

```
Class_Membership
-----------------------
id               INT PK
student_id       INT FK
class_id         INT FK
academic_year    INT
class_member_id  INT 
```

那么你也可以对`(academic_year, class_id, class_member_id)`.

这里有很大的灵活性，具体取决于您确切的真实世界模型和您的特定需求。但希望这个例子对你来说是一个好的开始；列出实体的维度表，以及将这些实体关联在一起和/或进一步描述实体的事实表（或多个表）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-31T05:11:54.153

```
alter table <TableName> add constraint <ConstraintName> unique(<col1>, <col2>)

Modified the answer due to syntax mistakes. Mentioned above is correct. 
```

# triggers - 三星智能电视通过点击触发遥控键

> ID：11773566
> 
> 赞同：1
> 
> 时间：2012-08-02T08:19:44.400
> 
> 标签：triggers, youtube-javascript-api, samsung-smart-tv

我有一个三星智能电视应用程序，但鼠标有问题。问题：我有两个场景。第一个场景是显示十个新闻。按下回车键会显示第二个场景，其中包含详细新闻和 youtube 视频。当我使用遥控器进行操作时，一切正常。当我对鼠标执行相同操作时，youtube 播放器无法正常工作。我重新检查了 100 次，单击时我执行与输入时相同的命令。控制台没有给我任何错误，一切都在执行除了 youtube 播放器。我在模拟器和电视上测试它，问题是一样的。所以我的问题是：我可以在点击时调用一个触发（模拟）遥控键的函数吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:07:26.153

**解决方案**

触发遥控键使用功能： `sf.scene.get('Main').handleKeyDown(sf.key.ENTER);`
但这并不能解决我的问题。我通过将 youtube 视频播放器版本从 3 更改为 2 解决了这个问题
：`http://www.youtube.com/apiplayer?&enablejsapi=1&version=2`
似乎电视与新版本的 flash 有一些问题。

# c# - 使用一种解决方案创建多个项目

> ID：11773567
> 
> 赞同：0
> 
> 时间：2012-08-02T08:19:45.987
> 
> 标签：c#, wpf

我非常了解 WPF，我在一个解决方案中创建了三个项目，示例 Project1、Project2 和 Project3。

当我构建解决方案时，只有拥有自己的dll（Project1.dll）的Project1，在Project3中需要使用Project2.dll，但我的Project2和Project3没有自己的dll文件，但在WinForm中是可以的。

我的问题是，为什么 Project2 和 Project3 没有像 Project1 这样的 dll 文件？

提前感谢您的任何回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:26:48.180

您很可能没有添加参考。例如，Project1 是您的启动 WPF 项目，Project2 和 Project3 是类库项目。因此，如果您的 Project1 没有对 Project2 和 Project3 的引用，编译器将不会创建相应的 dll

# html - sprites - 缓存问题 - 特别是在 chrome 上

> ID：11773569
> 
> 赞同：1
> 
> 时间：2012-08-02T08:20:01.260
> 
> 标签：html, css, google-chrome, caching, sprite

我有以下问题。

我们有一个网站。我改变了一些精灵，让它看起来更酷。问题是我们已经有了用户，他们的浏览器很有可能缓存了旧图像。反正有没有强制对他们的图像提出新的请求？

注意：在某些刷新后的 firefox（默认设置）上，请求新的精灵，但似乎 chrome（默认设置）只是不请求它们，除非您明确清除缓存。

另一个注意事项：一种方法是重命名精灵，但这也意味着我们必须在 css 文件中找到它们并在那里重命名，等等等等。

祝您有美好的一天，请寻求帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:41:48.220

一种解决方案是在图像名称的末尾添加一个随机数，例如

```
.mybackground {
    background-image:url(../images/background.jpg?16549);
} 
```

如果您可以在每次通过某些 JS 或 PHP 或任何适合您的方式加载页面时使数字随机化。您可以将图像从样式表中取出，然后放在标题包含的样式标记中或其他任何内容中，以便您可以对它们进行随机数位。（不确定您是否可以直接进入样式表）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:24:36.100

重命名听起来更可行。您很可能可以使用（shell）脚本自动化它，所以它应该不会太糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:42:53.627

（大多数 IDE 具有在多个文件中查找和替换的功能，您可以使用它来更改 CSS 文件中精灵的路径。最好的办法是现在为新图像指定一个新名称。

至于以后，我建议查看您的网络服务器的[缓存](http://httpd.apache.org/docs/2.2/caching.html)和[过期](http://httpd.apache.org/docs/current/mod/mod_expires.html)标头。（这些是 Apache 文档的链接，如果您的 Web 服务器不是 apache，这将是相同的想法，但需要不同的实现。）

# c# - 如何在 C# 中从 app.config 中获取一些元素？

> ID：11773575
> 
> 赞同：2
> 
> 时间：2012-08-02T08:20:30.377
> 
> 标签：c#, c#-4.0, app-config, configurationmanager

根据我的**app.config**，我希望能够获取列的元素，如下面的第 3-5 行示例所示。我应该如何编写代码来实现这一点。如果我需要更改我的 app.config - 我会这样做。

```
1\. var bounceProviders = ConfigurationManager.GetSection("BounceProviders") as BounceProvidersSection;
2\. var providerColumns = bounceProviders.Providers[0].Columns;
3\. var emailColumn = providerColumns.Email;
4\. var dateColumn = providerColumns.Date;
5\. var messageColumn = providerColumns.Message; 
```

**应用程序配置**

```
<BounceProviders>
  <Providers>
    <Provider Name="p1">        
      <Columns>
          <Email Name="My Email" />
          <Date Name="My Date" />
          <Message Name="My Message" />               
      </Columns>
    </Provider>  
    <Provider Name="p2">
      <Columns />
    </Provider>    
  </Providers>
</BounceProviders> 
```

**配置部分**

```
public class BounceProvidersSection : ConfigurationSection
{
    [ConfigurationCollection(typeof(ConfigCollection<BounceProviderConfig>), AddItemName = "Provider")]
    [ConfigurationProperty("Providers", IsRequired = true)]
    public ConfigCollection<BounceProviderConfig> Providers
    {
        get { return (ConfigCollection<BounceProviderConfig>)this["Providers"]; }
        set { this["Providers"] = value; }
    }                
}

public class BounceProviderConfig : ConfigurationElement
{
    [ConfigurationProperty("Name", IsRequired = true)]
    public string Name
    {
        get { return (string)this["Name"]; }
        set { this["Name"] = value; }
    }            
} 
```

**配置集合**

```
public class ConfigCollection<T> : ConfigurationElementCollection
        where T : ConfigurationElement, new()
{        
    protected override ConfigurationElement CreateNewElement()
    {
        return new T();
    }

    protected override object GetElementKey( ConfigurationElement element )
    {
        return element.GetHashCode();
    }

    public T this[int index]
    {
        get
        {
            return ( T )BaseGet( index );
        }
        set
        {
            if ( BaseGet( index ) != null )
            {
                BaseRemoveAt( index );
            }
            BaseAdd( index, value );
        }
    }

    new public T this[string Name]
    {
        get
        {
            return ( T )BaseGet( Name );
        }
    }
} 
```

自卫队

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:59:58.987

我想到了

```
public class BounceProvidersSection : ConfigurationSection
{
    [ConfigurationCollection(typeof(ConfigCollection<BounceProviderConfig>), AddItemName = "Provider")]
    [ConfigurationProperty("Providers", IsRequired = true)]
    public ConfigCollection<BounceProviderConfig> Providers
    {
        get { return (ConfigCollection<BounceProviderConfig>)this["Providers"]; }
        set { this["Providers"] = value; }
    }                
}

public class BounceProviderConfig : ConfigurationElement
{
    [ConfigurationProperty("Id", IsRequired = true)]
    public int Id
    {
        get { return (int)this["Id"]; }
        set { this["Id"] = value; }
    }

    [ConfigurationProperty("Columns", IsRequired = false)]
    public BounceProviderColumns Columns
    {
        get { return (BounceProviderColumns)this["Columns"]; }
        set { this["Columns"] = value; }
    }

    public static BounceProviderConfig GetByProviderId(int providerId)
    {
        var section = ConfigUtils.GetConfigurationSection<BounceProvidersSection>("BounceProviders");
        foreach (BounceProviderConfig provider in section.Providers)
        {
            if (provider.Id == providerId)
                return provider;
        }

        return null;
    }
}

public class BounceProviderColumns : ConfigurationElement
{
    [ConfigurationProperty("Email", IsRequired = true)]
    public ColumnConfig Email
    {
        get { return (ColumnConfig)this["Email"]; }
        set { this["Email"] = value; }
    }

    [ConfigurationProperty("Date", IsRequired = true)]
    public DateColumnConfig Date
    {
        get { return (DateColumnConfig)this["Date"]; }
        set { this["Date"] = value; }
    }

    [ConfigurationProperty("Message", IsRequired = true)]
    public ColumnConfig Message
    {
        get { return (ColumnConfig)this["Message"]; }
        set { this["Message"] = value; }
    }        
}

public class ColumnConfig : ConfigurationElement
{
    [ConfigurationProperty("Name", IsRequired = true)]
    public string Name
    {
        get { return (string)this["Name"]; }
        set { this["Name"] = value; }
    }
} 
```

# objective-c - 如何在 iOS 的 SudzC 中处理 Web 服务方法引发的异常

> ID：11773576
> 
> 赞同：0
> 
> 时间：2012-08-02T08:20:30.877
> 
> 标签：objective-c, ios, web-services

我正在使用 WebServices，并且在我的 iOS 应用程序中使用 SudzC lib。WSDL 中的一些方法抛出异常。我该如何处理它们？

# php - PHP date() 在 $_SESSION 中增加/减少周存储

> ID：11773578
> 
> 赞同：0
> 
> 时间：2012-08-02T08:20:36.173
> 
> 标签：php, session, date, increment, descendant

以下代码将增加/减少 1 周：（是的，我的应用程序需要将值存储在`$_SESSION`.

```
if (isset($_POST['decrease'])) {
  $week_value = ($_SESSION['sess_week'] = $_SESSION['sess_week']-1);
}
else if (isset($_POST['increase'])) {
  $week_value = ($_SESSION['sess_week'] = $_SESSION['sess_week']+1);
}
else {
  $week_value = ($_SESSION['sess_week'] = date('W'));
}

echo $week_value; 
```

但是我希望它在第 52 周（新年）重置。我怎样才能做到这一点？我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:25:08.587

您可以使用该`date("W")`函数获取当前时间的周数。如果是第 1 周，只需将其设置为 1（如果从那里开始，则设置为 0）。

您可以通过`mktime()`在 date 函数中使用 a 作为第二个参数来验证输出来进行测试和测试。

```
<?php

    if (date("W")==1)
    {
        $week_value =1;
    }
    else
    {
        if (isset($_POST['decrease'])) {
          $week_value = ($_SESSION['sess_week'] = $_SESSION['sess_week']-1);
        }
        else if (isset($_POST['increase'])) {
          $week_value = ($_SESSION['sess_week'] = $_SESSION['sess_week']+1);
        }
        else {
          $week_value = ($_SESSION['sess_week'] = date('W'));
        }
    }

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:26:37.293

```
if (isset($_POST['decrease'])) {
  $week_value = $_SESSION['sess_week'] == 1 ? 52 : --$_SESSION['sess_week'];
}
else if (isset($_POST['increase'])) {
  $week_value = $_SESSION['sess_week'] == 52 ? 1 : ++$_SESSION['sess_week'];
}
else {
  $week_value = ($_SESSION['sess_week'] = date('W'));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:29:33.290

这样做的一种可能性如下。（我认为您的意思是，如果一周超过 52，则应为 1。此外，我补充说，如果周降至 1 以下，则应再次为 52，因此是去年的最后一周）。

```
if (isset($_POST['decrease']))
{
     $week_value=$_SESSION['sess_week']-1;
}
else
{
     if (isset($_POST['increase']))
     {
          $week_value=$_SESSION['sess_week']+1;
     }
     else
     {
          $week_value=date('W');
     }
}

if ($week_value>52)
{
     $week_value=1;
}
else
{
     if ($week_value<1)
          $week_value=52;
}
$_SESSION['sess_week']=$week_value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:31:39.243

`%`用 52取模 ( )。

这样你就可以确保你的一周总是少于 52 周。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T08:25:16.733

试试这个：

```
if( $week_value == 52 )$week_value = 0; 
```

# c# - 将对象映射到随机格式 json 字符串的最佳方法是什么

> ID：11773580
> 
> 赞同：0
> 
> 时间：2012-08-02T08:20:56.430
> 
> 标签：c#, json, serialization, converter

我目前正在与第三方 API 集成，他们接受类似于以下格式的 json 字符串：

```
{    
"test-specialism": null,
"salaryCollection": [
    {
      "id":
               {
                   "jobtypeid": 1
               },  
"maxsalary": 564,
        "minsalary": 123,
        "salarycurrency": "GBP",
        "salarytype": "A"
    },
{
        "id":
               {
                   "jobtypeid": 2
               },
               "maxsalary": null,
               "minsalary": null,
               "salarycurrency": "GBP",
               "salarytype": null
           },
    }], 
```

}

这是我的对象：

```
 public class Salary {
    public double Minimum { get; set; }
    public double Maximum { get; set; }
    public PaymentFrequency Frequency { get; set; }
    public double Step { get; set; }
    public int JobTypeId { get; set; }
    public SalarySetting() {        }

}

public class Alert {
   public string Specialism {get;set;}
   public Salary Permanent { get; set; }
   public Salary Temporary { get; set; }
   public Salary Contract { get; set; }
} 
```

如您所见，对象结构与 JSON 结构非常不一致。将对象转换为指定的 json 字符串的理想方法是什么？我尝试使用 JSONProperty 映射属性，在这种情况下似乎效果不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:28:51.407

1.  创建描述您的 json 的类
2.  使用[**AutoMapper**](http://automapper.codeplex.com/)从您的类映射到与 json 相关的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:29:55.197

您可以使用[System.Web.Script.Serialization.JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)。例子 ：

```
public class Product{
    public string Name { get; set; }
    public string ID { get; set; }   
} 
```

我将向 Lists 添加一些实例：

```
Product p1 = new Product {Name="Product1",ID="1"};
Product p2 = new Product {Name="Product2",ID="2"};
List<Product> pList = new List<Product>() {p1,p2}; 
```

然后我要序列化它：

```
System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
string sJSON = serializer.Serialize(pList); 
```

# android - Android：屏幕旋转的片段生命周期

> ID：11773581
> 
> 赞同：8
> 
> 时间：2012-08-02T08:21:02.983
> 
> 标签：android, android-fragments

[我知道http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)的图 2我想知道当我旋转屏幕并最终回到“Fragment Active”时“Fragment Active”会发生什么。

我的问题的背景是，无论我以纵向还是横向模式启动它，我都有一个可以正常工作的应用程序。但是在屏幕旋转时它会转储

```
Fragment com.bla.bla did not create a view. 
```

这个片段基本上只实现了onCreateView，没有别的

```
public View onCreateView(LayoutInflater i, ViewGroup c, Bundle s)
{
   return i.inflate(R.layout.mylayout, c, false);
} 
```

知道屏幕旋转到底发生了什么，我希望能解决这个问题......

**编辑：**

我尝试了评论者的建议，并提供了更多信息。所以他们基本上都建议有一个空的活动布局，如果我没看错的话，以编程方式添加片段。我有一个用于纵向的 main.xml 和一个用于横向的，两者现在看起来非常相似（不同之处是水平与垂直）：

主.xml：

```
<LinearLayout xmlns:android="http:// and so on" 
    android:layout_width="fill_parent" 
    android:layout_heigt="wrap_content" 
    android:orientation=vertical" 
    android:id="@+id/myContainer">
</LinearLayout> 
```

我的活动的 onCreate 方法如下所示：

```
super.onCreate(savedInstanceBundle);
setContentView(R.layout.main);

Fragment1 f1 = newFragment1();
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.add(R.id.myContainer, f1);
//and I need a second fragment
Fragment2 f2 = newFragment2();
ft.add(R.id.myContainer, f2);
ft.commit(); 
```

屏幕旋转似乎可以解决这个问题（到目前为止，谢谢！）但在横向中，我只看到纵向的第一个片段，我看到了两个，第二个片段多次（我旋转的次数越多，添加的次数越多）。所以要么我有布局问题，要么我不能像这样添加多个片段。仍在尝试确定这是否是布局问题，但尚无线索。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:50:39.630

我理解你的问题的方式，你不应该每次都添加片段。您应该用新片段替换当前存在的内容。

```
ft.replace(R.id.myContainer1, f1);
//and I need a second fragment
Fragment2 f2 = newFragment2();
ft.replace(R.id.myContainer2, f2); 
```

至于`Fragment`生命周期——当你旋转屏幕时，宿主`Activity`会被销毁并重新创建；所以所有正确的直到`onDetach()`应该被调用，然后是所有以`onAttach()`.

最可靠的方法是覆盖所有生命周期方法并在所有方法中放入日志消息:-)

# twitter-bootstrap - 我可以在导入 sass 变量后覆盖它们吗？

> ID：11773583
> 
> 赞同：40
> 
> 时间：2012-08-02T08:21:09.613
> 
> 标签：twitter-bootstrap, sass

我在我的 rails 应用程序中使用 bootstrap-sass。我想覆盖一个 bootstrap-sass 变量 $navbarBackground。bootstrap-sass 还定义了颜色变量。因此，我不想使用十六进制代码，而是使用它定义的变量 $red。

```
$navbarBackground: #9d261d;
@import "bootstrap"; 
```

但是，如果我执行以下操作 -

```
$navbarBackground: $red;
@import "bootstrap"; 
```

它会给我一个错误，因为变量 $red 只定义了在下一行导入的引导文件。

那么有没有办法在导入 sass 变量后覆盖它们？

编辑

我已将项目推送到 github - [https://github.com/murtaza52/rails-base](https://github.com/murtaza52/rails-base)

并且可以在 localhost:3000/posts/ 上访问该 url

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T05:50:13.533

这是我意识到的。您可以在导入 sass 变量后覆盖它们。但是修改只会在覆盖后的使用中体现出来。由于`navbar`在覆盖 之前获得了样式`$navbarBackground`，因此仅覆盖变量不会改变样式。请参见下面的示例。

```
@import "bootstrap";
@navbarBackground: $red;
// This doesn't work. Navbar will still be same color.
// But if you do write styles for navbar again
.navbar-inner { background: $navbarBackground; }
// Now, Navbar will have a red background

@import "bootstrap";
$blue: $white;
// After this line, whenever your reference $blue, it'll generate white color. 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-12-30T09:57:03.323

[Bootstrap-sass 在/bootstrap/_variables.scss](https://github.com/twbs/bootstrap-sass/blob/master/assets/stylesheets/bootstrap/_variables.scss)中以 style定义了许多变量`$brand-success: #5cb85c !default;`。sass 关键字的`!default`意思是：

> 如果尚未分配变量，则可以通过将 !default 标志添加到值的末尾来分配变量。这意味着如果变量已经被赋值，它不会被重新赋值，但如果它还没有值，它将被赋予一个值。（[→sass 文档](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#variable_defaults_)）

这意味着你只需要在导入 bootstrap-sass 之前先*定义你的变量。*我这样做：

```
@import "common/project_variables";
@import "bootstrap"; 
```

我的文件`project_variables.scss`包含我想要覆盖的所有引导变量。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-12-22T16:16:09.553

我通过将单个 scss 文件导入到我的 application.scss 文件来做到这一点。而不是这样写：

```
@import "bootstrap"; 
```

我首先导入变量，自定义它们，然后才导入引导程序的其余部分。

```
// Core variables and mixins
@import "../../../vendor/assets/stylesheets/bootstrap/variables";

$body-bg: #333333;

@import "../../../vendor/assets/stylesheets/bootstrap/mixins";

// Reset
@import "../../../vendor/assets/stylesheets/bootstrap/normalize";
@import "../../../vendor/assets/stylesheets/bootstrap/print";

// Core CSS
@import "../../../vendor/assets/stylesheets/bootstrap/scaffolding";
@import "../../../vendor/assets/stylesheets/bootstrap/type";
@import "../../../vendor/assets/stylesheets/bootstrap/code";
@import "../../../vendor/assets/stylesheets/bootstrap/grid";
@import "../../../vendor/assets/stylesheets/bootstrap/tables";
@import "../../../vendor/assets/stylesheets/bootstrap/forms";
@import "../../../vendor/assets/stylesheets/bootstrap/buttons";

// Components
@import "../../../vendor/assets/stylesheets/bootstrap/component-animations";
@import "../../../vendor/assets/stylesheets/bootstrap/glyphicons";
@import "../../../vendor/assets/stylesheets/bootstrap/dropdowns";
@import "../../../vendor/assets/stylesheets/bootstrap/button-groups";
@import "../../../vendor/assets/stylesheets/bootstrap/input-groups";
@import "../../../vendor/assets/stylesheets/bootstrap/navs";
@import "../../../vendor/assets/stylesheets/bootstrap/navbar";
@import "../../../vendor/assets/stylesheets/bootstrap/breadcrumbs";
@import "../../../vendor/assets/stylesheets/bootstrap/pagination";
@import "../../../vendor/assets/stylesheets/bootstrap/pager";
@import "../../../vendor/assets/stylesheets/bootstrap/labels";
@import "../../../vendor/assets/stylesheets/bootstrap/badges";
@import "../../../vendor/assets/stylesheets/bootstrap/jumbotron";
@import "../../../vendor/assets/stylesheets/bootstrap/thumbnails";
@import "../../../vendor/assets/stylesheets/bootstrap/alerts";
@import "../../../vendor/assets/stylesheets/bootstrap/progress-bars";
@import "../../../vendor/assets/stylesheets/bootstrap/media";
@import "../../../vendor/assets/stylesheets/bootstrap/list-group";
@import "../../../vendor/assets/stylesheets/bootstrap/panels";
@import "../../../vendor/assets/stylesheets/bootstrap/wells";
@import "../../../vendor/assets/stylesheets/bootstrap/close";

// Components w/ JavaScript
@import "../../../vendor/assets/stylesheets/bootstrap/modals";
@import "../../../vendor/assets/stylesheets/bootstrap/tooltip";
@import "../../../vendor/assets/stylesheets/bootstrap/popovers";
@import "../../../vendor/assets/stylesheets/bootstrap/carousel";

// Utility classes
@import "../../../vendor/assets/stylesheets/bootstrap/utilities";
@import "../../../vendor/assets/stylesheets/bootstrap/responsive-utilities";

body {
  padding-top: 60px;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-11T15:36:21.213

引导变量使用该`!default`规则。

**默认规则：**

> 如果尚未分配变量，则可以通过将 !default 标志添加到值的末尾来分配变量。这意味着如果变量已经被赋值，它不会被重新赋值，但如果它还没有值，它将被赋予一个值。

这是它的样子：

```
$example: 'value' !default; 
```

所以使用 Sass`!default`就像在你的变量赋值中添加一个“除非这已经被赋值”限定符

# c# - 下拉列表计算中的选项

> ID：11773590
> 
> 赞同：0
> 
> 时间：2012-08-02T08:21:40.663
> 
> 标签：c#, asp.net

```
string IsChauffeurUsed = "Yes";
    totalValue += IsChauffeurUsed.Equals("Yes", StringComparison.CurrentCultureIgnoreCase) ? 80 : 0;
    Label8.Text = totalValue.ToString(); 
```

上面这行代码让系统在计算后加80加

```
 int totalValue = 0;
    totalValue = int.Parse(Session["price"].ToString()) * int.Parse(Session["day"].ToString()); 
```

如果仅用户在下拉列表中选择“是”，如何使其仅添加 80。我将选择存储在会话中

```
Session["IsChauffeurUsed"] = DropDownList4.SelectedItem.Text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:50:58.880

我认为最简单的方法是：

```
string IsChauffeurUsed = CB.SelectedItem.ToString();
if (IsChauffeurUsed == "Yes")
{
  //Do condition calculations here
} 
```

可能不是很花哨，但我很确定它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:25:34.877

```
string IsChauffeurUsed = Session["IsChauffeurUsed"].ToString();
totalValue += IsChauffeurUsed.Equals("Yes", StringComparison.CurrentCultureIgnoreCase) ? 80 : 0; 
```

这取决于下拉菜单中设置为“是”的值。

# firefox - 使用 Firefox WebDriver 时选择所有具有文本的节点的 Xpath 表达式是什么？

> ID：11773593
> 
> 赞同：2
> 
> 时间：2012-08-02T08:21:55.287
> 
> 标签：firefox, xpath, selenium, webdriver

我想选择所有包含文本的节点。

在此示例中`shouldBeIgnored`，不应选择外部标记：

```
<shouldBeIgnored>
    <span>
        the outer Span should be selected
    </span>
</shouldBeIgnored> 
```

其他一些帖子建议是这样的：`//*/text()`.
但是，这在 Firefox 中不起作用。

这是一个重现问题的小单元测试：

```
 public class XpathTest {
    final WebDriver webDriver   = new FirefoxDriver();

    @Test
    public void shouldNotSelectIgnoredTag() {

        this.webDriver.get("http://www.s2server.de/stackoverflow/11773593.html");

        System.out.println(this.webDriver.getPageSource());

        final List<WebElement> elements = this.webDriver.findElements(By.xpath("//*/text()"));

        for (final WebElement webElement : elements) {
            assertEquals("span", webElement.getTagName());
        }
    }

    @After
    public void tearDown() {
        this.webDriver.quit();
    }
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T09:36:41.213

如果要选择包含文本的所有节点，则可以使用

```
//*[text()] 
```

以上 xpath 将查找包含文本的任何元素。注意`text()`用于确定当前节点是否有文本的函数。

在您的情况下，它将选择`<span>`标签，因为它包含文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:02:10.500

您可以调用 javascript 函数，该函数将返回文本节点：

```
function GetTextNodes(){    
var lastNodes = new Array();
    $("*").each(function(){
      if($(this).children().length == 0)
        lastNodes.push($(this));
    });
    return lastNodes;
} 
```

Selenium WebDriver 代码：

```
IJavaScriptExecutor jscript = driver as IJavaScriptExecutor;
List<IWebElement> listTextNodes = jscript.ExecuteScript("return GetTextNodes();"); 
```

仅供参考：类似的东西可能对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:05:40.480

我看不出为什么这不起作用（通过java）

```
text = driver.findElement(By.xpath("//span")).getText() 
```

如果在奇怪的情况下不起作用：

```
text = driver.findElement(By.xpath("//span")).getAttribute("innerHTML") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:06:28.717

最后我发现没有办法用 xpath 来做（因为 XPaths`text()`也选择了一个节点的 innerText）。作为解决方法，我必须注入返回由 XPath 选择的所有元素的 Java 脚本，其中包含一些文本。

像这样：

```
public class XpathTest
{
    //@formatter:off
    final static String JS_SCRIPT_GET_TEXT  =  "function trim(str) {                                                       " +                                                                                                                                             
                                               "    return str.replace(/^\s+|\s+$/g,'');            " +                                                                                                                                             
                                               "}                                                                          " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "function extractText(element) {                                            " +                                                                                                                                             
                                               "    var text = '';                                                         " +                                                                                                                                             
                                               "    for ( var i = 0; i < element.childNodes.length; i++) {                 " +                                                                                                                                             
                                               "        if (element.childNodes[i].nodeType === Node.TEXT_NODE) {           " +                                                                                                                                             
                                               "            nodeText = trim(element.childNodes[i].textContent);            " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "            if (nodeText) {                                                " +                                                                                                                                             
                                               "                text += element.childNodes[i].textContent + ' ';           " +                                                                                                                                             
                                               "            }                                                              " +                                                                                                                                             
                                               "        }                                                                  " +                                                                                                                                             
                                               "    }                                                                      " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "    return trim(text);                                                     " +                                                                                                                                             
                                               "}                                                                          " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "function selectElementsHavingTextByXPath(expression) {                     " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "    result = document.evaluate(\".\" + expression, document.body, null,    " +                                                                                                                                             
                                               "            XPathResult.ANY_TYPE, null);                                   " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "    var nodesWithText = new Array();                                       " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "    var node = result.iterateNext();                                       " +                                                                                                                                             
                                               "    while (node) {                                                         " +                                                                                                                                             
                                               "        if (extractText(node)) {                                           " +                                                                                                                                             
                                               "            nodesWithText.push(node)                                       " +                                                                                                                                             
                                               "        }                                                                  " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "        node = result.iterateNext();                                       " +                                                                                                                                             
                                               "    }                                                                      " +                                                                                                                                             
                                               "                                                                           " +                                                                                                                                             
                                               "    return nodesWithText;                                                  " +                                                                                                                                             
                                               "}                                                                          " +                                                                                                                                             
                                               "return selectElementsHavingTextByXPath(arguments[0]);";                                                                                                                                                                                    
    //@formatter:on

    final WebDriver     webDriver           = new FirefoxDriver();

    @Test
    public void shouldNotSelectIgnoredTag()
    {
        this.webDriver.get("http://www.s2server.de/stackoverflow/11773593.html");

        final List<WebElement> elements = (List<WebElement>) ((JavascriptExecutor) this.webDriver).executeScript(JS_SCRIPT_GET_TEXT, "//*");

        assertFalse(elements.isEmpty());

        for (final WebElement webElement : elements)
        {
            assertEquals("span", webElement.getTagName());
        }
    }

    @After
    public void tearDown()
    {
        this.webDriver.quit();
    }

} 
```

我修改了示例可测试的 UnitTest。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-09T13:58:43.640

定位文本节点的一个问题是即使是空字符串也被认为是有效的文本节点（例如

```
<tag1><tag2/></tag1> 
```

没有文本节点，但

```
<tag1>  <tag2/>    </tag1> 
```

有 2 个文本节点，一个有 2 个空格，另一个有 4 个空格）

如果您只想要具有非空文本的文本节点，这是一种方法：

```
//text()[string-length(normalize-space(.))>0] 
```

或获取其父元素

```
//*[text()[string-length(normalize-space(.))>0]] 
```

# excel - 在 VBA 代码中使用 If 函数格式化图表

> ID：11773599
> 
> 赞同：0
> 
> 时间：2012-08-02T08:22:10.453
> 
> 标签：excel, vba, if-statement, conditional

我有一个我希望是一个相对简单的请求。

我正在研究一个宏，它将自动格式化我正在创建的大量图表。但是，我遇到了一个问题，因为每个图表包含的系列数量变化很大。

例如，如果我尝试在只有四个系列的图表上运行我当前的代码，它会在到达下面的代码时出错，并且此后无法处理代码，因为它期望格式化第五个系列。我相信我需要实现这样的代码 - “如果图表有第五个系列，那么应用宏的下一行”。

下面的代码是我用来格式化每个系列的代码。如上所述，这应该如何包含在 if 语句中？

```
ActiveChart.LegEND.Select
ActiveChart.LegEND.LegendEntries(5).Select
ActiveChart.SeriesCollection(5).Select
With Selection.Format.Line
    .Visible = msoTrue
    .Weight = 1.5
End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:10:36.023

您可以使用集合的`Count`成员（[文档](http://msdn.microsoft.com/en-us/library/office/ff822931.aspx)），这将返回图表中的系列数。你可以使用类似的东西：`SeriesCollection`

```
ActiveChart.LegEND.Select

If ActiveChart.SeriesCollection.Count = 5 Then

    ActiveChart.LegEND.LegendEntries(5).Select
    ActiveChart.SeriesCollection(5).Select
    With Selection.Format.Line
         .Visible = msoTrue
         .Weight = 1.5
    End With
End If 
```

这仅在您恰好有 5 个系列时才有效，如果您有更多的`Count`评估结果为 6，则上述格式将不适用。

您可以将 If 语句稍微更改为以下内容：

```
If ActiveChart.SeriesCollection.Count >= 5 Then

    ActiveChart.LegEND.LegendEntries(5).Select
    ActiveChart.SeriesCollection(5).Select
    With Selection.Format.Line
         .Visible = msoTrue
         .Weight = 1.5
    End With

End If 
```

然后，您可以在代码中重复此块 >= 6，它应该可以工作。附带说明一下，这可能不是最有效的编码方式，因为您正在重复代码块，但这并不是这个问题的重点。

# javascript - 是否可以调整 Adob e Edge 动画的大小？

> ID：11773600
> 
> 赞同：2
> 
> 时间：2012-08-02T08:22:11.963
> 
> 标签：javascript, animation, resize, adobe-edge

我正在尝试根据屏幕分辨率调整边缘动画的大小。我已经为 1080p 和更高分辨率的屏幕制作了一个高分辨率的，但是由于该项目相当复杂，我想知道是否有一种方法可以将动画导出为与 Edge 不同的大小，而不必重做所有事情小屏幕几次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-26T11:37:11.533

现在还有这个可以帮助基于父级进行扩展`bScaleToParent`：

```
 AdobeEdge.loadComposition('MyComp', 'EDGE-985368975', {
          scaleToFit: "both",
          centerStage: "horizontal",
          minW: "0",
          maxW: "undefined",
          width: "1540px",
          height: "3004px",
          bScaleToParent: true
  }, {dom: [ ]}, {dom: [ ]}); 
```

这很有帮助：[https ://forums.adobe.com/message/6939673#6939673](https://forums.adobe.com/message/6939673#6939673)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:49:18.617

我将使用 CSS3`transform:scale`结合媒体查询来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T09:12:48.727

我发现这是一个很好的解决方案。将调整大小触发器添加到您的阶段。将这段代码粘贴到里面：

```
if ($(window).width() < 960) {
    if ($(window).width() < 600) {
        sym.stop("layout400");
    } else {
        sym.stop("layout600");
    }
} else {
    sym.stop("layout960");
} 
```

然后在时间轴中制作三个不同的标签，名称分别为 layout960、layout600 和 layout400。现在您可以避免 Edge 每次都重新加载并跳过 Edge Docks（至少对于响应式）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T08:24:28.370

我会尝试在 DIV 或框架中执行此操作，并使用 CSS 缩放选项。[这里](http://www.appliness.com/animated-cover-with-edge-tips/)有一些提示

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-30T21:11:32.373

如果要使用标签将所有布局存储为符号，然后在运行时将它们添加到舞台。即使您可能没有到达屏幕标记，您放置在舞台时间线上的任何内容都存在于 DOM 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T15:57:29.130

打开 hi res 文件，将所有内容分组到一个 div 中，将该 div 调整为所需的宽度和高度。如果有任何图像文件，请确保以正确的大小保存它们，以避免质量不佳的浏览器重新调整大小。保存每个版本并将其上传到服务器上的不同位置。

然后把它放到文件的头部：

```
<script>
    if ( (960 < screen.width < 1024) && (640 < screen.height < 768) ) { 
        window.location = 'www.YOURURL.com/ipad';
    }
    else if ( (screen.width < 960) && (screen.height < 640) ) { 
        window.location = 'www.YOURURL.com/iphone';
    }
</script> 
```

这将根据 ipad 或 iphone 的屏幕分辨率进行重定向，但您可以将其调整为您喜欢的任何内容。

# oracle - 在 oracle 10.2 中使用外键更新表

> ID：11773604
> 
> 赞同：2
> 
> 时间：2012-08-02T08:22:14.837
> 
> 标签：oracle, oracle10g

我有一张`ROUTE_DETAILS`带有列`ROUTE_NUMBER`和的表`ROUTE_NAME`。

我有另一个表`CUSTOMER_DETAILS`，列`CUST_CODE`, `CUST_NAME`, `ROUTE_NUMBER`。这里的路由号是 的外键`ROUTE_DETAILS`。

`ROUTE_DETAILS`是父表，`CUSTOMER_DETAILS`是子表。

中的数据`ROUTE_DETAILS`：

```
ROUTE_NUMBER ROUTE_NAME
RN0001 路线1
RN0002 路线2
注册护士路线3

```

中的数据`CUSTOMER_DETAILS`：

```
CUST_CODE CUST_NAME ROUTE_NUMBER
CC0001 客户1 RN0001
CC0002 客户 2 注册护士

```

现在的问题是当我尝试更新`ROUTE_NUMBER`或`ROUTE_DETAILS`更新`ROUTE_NUMBER`时`CUSTOMER_DETAILS`显示错误：*找到完整性约束违反子记录*

查询是：

```
update ROUTE_DETAILS 
   set ROUTE_NUMBER = 'RN0003' 
 where ROUTE_NUMBER = 'RN' 
```

当我尝试更新 customer_details 时也会发生同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:32:02.823

我看到的唯一选择是将 FK 约束更改为“DEFERRABLE”。

然后，您可以在一个事务中更改两行，因为在提交数据时会检查约束：

```
update ROUTE_DETAILS set ROUTE_NUMBER ='RN0003' where ROUTE_NUMBER ='RN';
update CUSTOMER_DETAILS set ROUTE_NUMBER ='RN0003' where ROUTE_NUMBER ='RN';
commit; 
```

有关如何更改 FK 约束的详细信息，请参阅手册。

如果将约束设置为“INITIALLY IMMEDIATE”，则需要`set constraints deferred`在运行更新之前运行。

**编辑**，这是一个完整的例子：

## 设置表和约束：

```
create table route_details
(
 route_number varchar(20) not null primary key
);

create table customer_details
(
   cust_code varchar(20) not null primary key,
   route_number varchar(20) not null
);

alter table customer_details
  add constraint fk_route_number 
     foreign key (route_number)
     references route_details (route_number)
  deferrable
  initially immediate;

insert into route_details (route_number)
values ('RN0001');

insert into route_details (route_number)
values ('RN');

insert into customer_details (cust_code, route_number)
values ('CC0001', 'RN0001');

insert into customer_details (cust_code, route_number)
values ('CC0002', 'RN');

commit; 
```

## 运行更新：

```
set constraints all deferred;

update ROUTE_DETAILS set ROUTE_NUMBER ='RN0003' where ROUTE_NUMBER ='RN';
update CUSTOMER_DETAILS set ROUTE_NUMBER ='RN0003' where ROUTE_NUMBER ='RN';
commit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:31:49.803

是的，如果孩子正在引用该键值，则您无法更新父主键。

此外，您不能将子项更新为具有不引用父表中的主键值的外键值。

因此，您可以：

1）在您进行更改时暂时放松约束，确保之后重新应用它。

或者

2）删除子行，更新父行，然后用新的外键值重新插入子行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:36:19.233

对此有两个想法...

首先，您不应该更改主键的值，主键的全部意义在于它不会改变。

但是，如果您必须进行此更改，我知道有两种方法可以做到这一点。

1.  在 route_details 中插入“RN0003”作为新行。然后更新所有受影响的客户。然后删除 RN 行。所以：

    插入 route_number 值（'RN0003'，'ROUTE3'）；

    更新 customer_details 设置 route_number = 'RN0003' where route_number = 'RN';

    从 route_details 中删除 route_number = 'RN';

2.  使用此处描述的延迟键：

[http://www.orafaq.com/wiki/Foreign_key](http://www.orafaq.com/wiki/Foreign_key)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-27T00:00:51.763

参考行动包括`ON UPDATE`.

*CASCADE：删除或更新父表中的行，并自动删除或更新子表中匹配的行。`ON DELETE CASCADE`和均受`ON UPDATE CASCADE`支持。

所以你可以在[你的外键](https://docs.oracle.com/cd/E17952_01/mysql-5.6-en/create-table-foreign-keys.html#foreign-key-referential-actions)`ON UPDATE CASCADE`上使用参考动作。

```
alter table customer_details
  add constraint fk_route_number 
     foreign key (route_number)
     references route_details (route_number)
     ON UPDATE CASCADE; 
```

对于 NDB 表，`ON UPDATE CASCADE`不支持。

# database - BCNF 转换

> ID：11773606
> 
> 赞同：1
> 
> 时间：2012-08-02T08:22:18.390
> 
> 标签：database, database-design, relational-database, normalization

我正在尝试理解[BCNF](http://en.wikipedia.org/wiki/BCNF)数据库，但我无法完全理解它。

考虑以下关系：

```
R (A, B, C, D, E, F, G) 
```

以下函数依赖成立：

```
A -> E, F
A -> G
A, B -> D
B -> C
E, F -> G
A -> D 
```

我将如何使它成为[BCNF](http://en.wikipedia.org/wiki/BCNF)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:51:54.573

非正式地说，在家庭作业问题中，您可以通过以下方式进入 BCNF

*   假设你至少处于 1NF，
*   删除部分关键依赖项以达到 2NF（至少），
*   移除传递依赖以达到 3NF（至少），最后
*   删除剩余的功能依赖关系，其中左侧不是到达 BCNF 的候选键（至少）。

部分键依赖的一个例子是对

```
AB->D
A->D 
```

由于 A 单独决定 D，因此函数依赖 AB->D 具有部分键依赖。

传递依赖的一个例子是对

```
A->EF
EF->G 
```

不能保证您可以将给定的关系规范化为 BCNF*而不是更高的*. （这似乎在大学生中引起了很多关于 SO 的困惑。）删除部分密钥依赖关系以达到 2NF 可能会留下 5NF 中的所有关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T02:03:19.700

）我们可以使用阿姆斯壮公理得到 F+

> A -> D,E,F,G
> 
> B -> C (A,B -> D 被忽略，因为 A -> D)
> 
> E,F -> G

我们可以得到主键（A，B）。

根据 BCNF 的定义，我们必须将 A-> (E,F), B->C, A -> D 和 (E,F) -> G 从原始模式中分离出来。

> (A,B) 主键(A,B)
> 
> (B,C) 主键(B)
> 
> (A,D) 主键(A)
> 
> (A,E,F) 主键(A)
> 
> (E,F,G) 主键(E,F)

这就是 BCNF 分解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-09T19:13:28.853

您可以试试这个： 表 1：A、B、D、E、F 与复合主键（A、B）和外键（B）参考表 2（B） 表 2：B、C 与 B 为主键表 3：A、E、F、G 和复合主键（A、E、F）

# java - 来自自身的 EJB 方法调用：容器对它有影响吗？

> ID：11773613
> 
> 赞同：1
> 
> 时间：2012-08-02T08:23:01.837
> 
> 标签：java, ejb

我想知道 EJB 容器是否对使用 EJB 的方法调用有影响。我不确定`@TransactionAttributes`注释或任何其他注释在这种情况下是否有效。如果有，它是如何在容器中实现的？

```
@Stateless
public class MyBean {   

  public void doSomething() {
    // logic
    doSomethingElse();
    // logic
  }

  @TransactionAttribute(TransactionAttributeType.NOT_SUPORTED)
  public void doSomethingElse() {
    // logic
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:37:44.113

容器不处理对 doSomethingElse() 的普通 java 调用。如果您想进行“EJB 调用”，那么您应该使用[SessionContext.getBusinessMethod(...)](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionContext.html#getBusinessObject(java.lang.Class))：

```
sessionContext.getBusinessObject(MyBean.class).doSomethingElse(); 
```

# java - 如何使用 java 提取跨度的名称？

> ID：11773615
> 
> 赞同：0
> 
> 时间：2012-08-02T08:23:10.657
> 
> 标签：java, pattern-matching, html

我需要编译一个模式才能获得跨度的名称但徒劳我无法拥有我想要的可能是这种模式的编写方式我知道我做了一些不完全正确的事情..这是我的html代码：

```
<span class="libelleAttributPageParametrage"> 
 "Libellé de facturation"
<font color="#C60307">*</font>
</span> 
```

这是我的java代码：

```
 public List<String> getAllSpan()
{
    String HTMLSource = priceSelenium.getHtmlSource();
    priceSelenium.getBodyText();
    List<String> ListOfSpan = new ArrayList<String>();
    Pattern p = Pattern.compile( "<SPAN[^>]*>([\\w\\d\\s\\n\\r()/°@\\.\\-àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]*)</SPAN>" );
    Matcher m = p.matcher( HTMLSource );
    while ( m.find() )
    {
        if ( !m.group( 1 ).isEmpty() )
        {
            ListOfSpan.add( m.group( 1 ) );
        }
    }
    return ListOfSpan;
} 
```

我需要在我的 ListOfSpan 中拥有的是：“Libellé defacturation”

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:30:39.133

如果要解析 HTML，则应使用 HTML 解析器库（例如[jsoup](http://jsoup.org/)）。这将为您提供一个表示 HTML 的对象图，您可以使用它导航到`<span>`您感兴趣的对象并调用类似`spanElem.attr("name")`.

HTML 不是常规语言，因此严格来说不可能将其视为文本并尝试使用正则表达式提取部分。在简单的情况下它可能会工作一段时间，但它仍然可能涉及过于复杂的正则表达式，这对于某些有效的 HTML 将失败。 [那种方式是疯狂](https://stackoverflow.com/a/1732454/45664)的。

# android - Android中的条码扫描器

> ID：11773618
> 
> 赞同：0
> 
> 时间：2012-08-02T08:23:22.983
> 
> 标签：android

我想创建一个可以读取 Ba 代码的应用程序。我想通过我的应用程序来做到这一点，而不是使用像“ZXing”这样的第三方应用程序。请任何编码帮助或tatorial ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:43:38.120

我已经通过使用我的应用程序直接扫描条形码来完成一个 Android 应用程序。我已经使用 Zxing 条码源来获取我想要的功能，并且很容易制作自己的扫描条码的应用程序。

更具体地说，你要做的就是设计一个可以拍照的屏幕，然后你只需要使用Camera对象，当你拍摄到图像时，将它以Bitmap格式放在一个ZXing方法的参数中。然后你会得到结果，你可以随意显示它。

如果您对此有更具体的问题，请随时提问。我可以检索我的代码来帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:34:00.943

我建议您查看适用于 Android 的免费[Scandit 条码扫描器 SDK](http://www.scandit.com/barcode-scanner-sdk/)。它附带分步指南、示例代码和说明视频如何开始，它也适用于没有自动对焦相机和/或分辨率有限的低端 Android 设备。

如果您有兴趣将扫描的 UPC 编号转换为产品名称，还有一个[产品 API](http://www.scandit.com/product-api/)。

[免责声明：我是 Scandit 的开发人员]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:30:25.103

如果您访问此处：[http](http://code.google.com/p/zxing/wiki/ScanningViaIntent) ://code.google.com/p/zxing/wiki/ScanningViaIntent 并按照说明进行操作，以添加站点中描述的类和代码。

一旦你实现了它，扫描仪就添加了..

# r - 我们可以使用 lmer 对混合模型进行反向消除吗

> ID：11773620
> 
> 赞同：6
> 
> 时间：2012-08-02T08:23:31.867
> 
> 标签：r

我对混合模型使用了以下语法，然后执行了步骤，但它不起作用。

它通常像这样工作还是我实际上不能对 lmer 使用反向消除？谢谢！

```
fullmodel<-lmer(Eeff~NDF+ADF+CP+NEL+DMI+FCM + (1|Study),data=na.omit(phuong))
step(fullmodel, direction = "backward", trace=FALSE ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-24T13:08:57.483

你可以用[`lmerTest`](http://cran.r-project.org/web/packages/lmerTest/index.html)包做到这一点：

```
library(lmerTest)
step(fullmodel) 
```

在用我相当复杂的数据测试了这个函数之后，它似乎确实产生了可行的模型替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:24:19.830

你可以做到，只是不能使用 step 功能。由于您的模型只是添加的，因此手动操作不需要那么长时间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T03:57:24.820

您想要的功能`stepAIC`来自`MASS`包。

`stepAIC`(and `step`) 默认使用 AIC，它渐近等效于留一法交叉验证。

至于尖锐的批评，专家知识是模型选择的一个很好的起点，但我经常看到这被用作将做出复杂统计决策的责任转嫁给不懂统计学的应用研究人员的借口。

编辑：对不起，我的错，误读了你的问题，我以为你说的是​​“lme”而不是“lmer”。我不知道 stepAIC 是否支持 lmer。

# c# - 如何在 C# 中使用带下划线 (_) 的换行符

> ID：11773623
> 
> 赞同：5
> 
> 时间：2012-08-02T08:23:40.727
> 
> 标签：c#

```
ShippingConfirmationLabel.Text = _
string.Format("Using {0} shipping to:<br>", _
ShippingTypeRadioButtonList.SelectedValue); 
```

但是，这可以正常工作：

```
ShippingConfirmationLabel.Text = "Using " + ShippingTypeRadioButtonList.SelectedValue + "
shipping to:<br>"; 
```

抱歉，如果之前有人问过这个问题，但是在搜索时没有找到任何具体的问题。出于某种原因，代码不允许我在 VS 中编译。

干杯安德鲁

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T08:26:23.183

在 C# 中没有`Line Continuation Character`像在 VB.NET 中那样
在 C# 中存在`;`来分隔指令的结尾。
这意味着不需要换行符，因为在到达分号 (";") 之前不会考虑换行。

是`+`字符串连接运算符，并不意味着`Line Continuation Character`

```
ShippingConfirmationLabel.Text = 
            "Using " + 
            ShippingTypeRadioButtonList.SelectedValue + 
            "shipping to:<br>"; 
```

如您所见，您可以在您喜欢的每个点（当然不是在关键字或标识符的中间）换行并用`;`终止符将其关闭。

有时，出于易读性或其他原因，您希望在不同的行上拆分单个字符串。
在这种情况下，您可以使用字符串连接运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T08:25:44.603

C# 没有续行。只需使用正常的换行符，代码就可以正常工作。

与 VB 相比，C#`;`用作语句终止符，它允许您随意格式化代码，而无需指示代码在下一行继续。

`_`在 C# 中是一个普通字符，可用于变量名等。

# c++ - ofstream 在 C++ 中的同一级别目录中的文件

> ID：11773625
> 
> 赞同：0
> 
> 时间：2012-08-02T08:23:48.293
> 
> 标签：c++, windows, ofstream

我检查了论坛，但发现是这样的：

```
ofstream outfile;
outfile.open ("test.txt");
outfile.open ("\\data\\test.txt"); 
```

但我想在同级目录中打开一个文件。我怎样才能做到这一点？

我的 C++ exe 文件在发布目录中，我需要在日志目录中打开一个文件。

```
root
-somefolder
--release
--test
--log 
```

这没有用：

```
outfile.open(".\\log\\test.txt",ios::app) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:27:42.733

尝试`outfile.open("..\\log\\test.txt",ios::app)`

# c# - 验证防止复选框自动回发

> ID：11773633
> 
> 赞同：2
> 
> 时间：2012-08-02T08:24:45.170
> 
> 标签：c#, javascript, asp.net, validation

我的页面上有以下复选框：

```
<asp:CheckBox ID="rbBuilding" runat="server" AutoPostBack="True" OnCheckedChanged="HandlerPackageOnCheckedChanged" Checked="True" CausesValidation="False"   />
<asp:CheckBox ID="rbContent" runat="server" AutoPostBack="True" OnCheckedChanged="HandlerPackageOnCheckedChanged" CausesValidation="False" /> 
```

有一个基于单击复选框组合的回发逻辑。除一种情况外，一切正常：

我正在打开额外的 Telerik radwindow，它在自己的验证组中有一些验证。如果我以任何验证错误关闭窗口，那么第一次单击任何复选框都不会执行 postpack。

只有第一次点击不起作用。下次我点击一切正常。我尝试将复选框添加到他们自己的验证组并将大小写验证更改为 true。但行为完全相同。当我将测试 javascript 方法添加到该复选框的 onclick 时，该方法会被触发而不会出现问题。只是没有回发。

我还尝试在窗口关闭时重置窗口验证组的所有验证器，它们被重置，但行为未检查，第一次单击不起作用。

**更新**：

我又做了一次检查，并意识到只有在我使用 javascript 时才会发生这种情况：

```
window.Page_ClientValidate("MyGroup") 
```

在对弹出窗口进行一些计算之前，我必须这样做。在动态验证器期间，当更新可验证控件时，一切都正常工作，即使验证失败。所以问题是 *Page_ClientValidate*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-23T16:28:16.823

我知道这是一个老问题，但我遇到了几乎确切的问题，并且由于以下链接，我能够解决该问题：

[回发问题并单击控件两次](http://weblogs.asp.net/gurusarkar/after-first-postback-why-i-have-to-click-the-button-twice-for-postback-to-occur)

我最终将此代码添加到我的代码后面，为复选框的单击事件添加一个 javascript 事件处理程序：

```
Checkbox1.Attributes.Add("onclick", "checkboxChanged();"); 
```

然后我添加了以下javascript：

```
function checkboxChanged(arg1) {
  Page_BlockSubmit = false;
} 
```

在我的情况下，复选框也设置为将 CausesValidation 设置为 false，但我认为此修复不需要这样做。希望这可以帮助某人。

# c# - 如何使用 C# 和 Open XML SDK 按特定文本拆分 Word 文档？

> ID：11773636
> 
> 赞同：2
> 
> 时间：2012-08-02T08:24:49.220
> 
> 标签：c#, ms-word, openxml, openxml-sdk

我想使用 C# 和 Open XML SDK 以编程方式将 Word 文档一分为二。我为第一部分所做的是删除所有段落，直到包含所需文本的段落。这工作得很好。然后在原始文档的副本上，我做了同样的事情，只是这次删除了从包含所需文本的段落开始的所有段落。由于某种原因，第二部分原来是无效的文档，无法使用 word 打开。使用“Open XML SDK 2.0 Productivity Tool”打开损坏的文档并对其进行验证，未检测到文档有任何问题。

这是在所需文本之前删除部分的代码（工作正常）：

```
public static void DeleteFirstPart(string docName)
    {
        using (WordprocessingDocument document = WordprocessingDocument.Open(docName, true))
        {
            DocumentFormat.OpenXml.Wordprocessing.Document doc = document.MainDocumentPart.Document;

            List<Text> textparts = document.MainDocumentPart.Document.Body.Descendants<DocumentFormat.OpenXml.Wordprocessing.Text>().ToList();
            foreach (Text textfield in textparts)
            {
                if (!textfield.Text.Contains("split here"))
                {
                    RemoveItem1(textfield);
                }
                else
                {
                    break;
                }
            }
        }
    } 
```

我尝试了两种不同的删除项目方法，都具有相同的结果：

```
private static void RemoveItem1(Text item)
    {
        // Need to go up at least two levels to get to the run.
        if ((item.Parent != null) &&
          (item.Parent.Parent != null) &&
          (item.Parent.Parent.Parent != null))
        {
            var topNode = item.Parent.Parent;
            var topParentNode = item.Parent.Parent.Parent;
            if (topParentNode != null)
            {
                topNode.Remove();
                // No more children? Remove the parent node, as well.
                if (!topParentNode.HasChildren)
                {
                    topParentNode.Remove();
                }
            }
        }
    }

private static void RemoveItem2(Text textfield)
    {
        if (textfield.Parent != null)
        {
            if (textfield.Parent.Parent != null)
            {
                if (textfield.Parent.Parent.Parent != null)
                {
                    textfield.Parent.Parent.Remove();
                }
                else
                {
                    textfield.Parent.Remove();
                }
            }
            else
            {
                textfield.Remove();
            }
        }   
    } 
```

这是从所需文本开始删除部分的代码（损坏文档）：

```
public static void DeleteSecondPart(string docName)
    {
        using (WordprocessingDocument document = WordprocessingDocument.Open(docName, true))
        {
            DocumentFormat.OpenXml.Wordprocessing.Document doc = document.MainDocumentPart.Document;

            List<Text> textparts = document.MainDocumentPart.Document.Body.Descendants<DocumentFormat.OpenXml.Wordprocessing.Text>().ToList();
            bool remove = false;
            foreach (Text textfield in textparts)
            {
                if (textfield.Text.Contains("split here"))
                {
                    remove = true;
                }

                if(remove)
                {
                    RemoveItem1(textfield);
                    //Using this commented code line, instead of the one above, removes only the text field itself, it works fine, the document is valid, but it leaves empty paragraphs that could be pages long.
                    //textfield.Remove();

                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:19:06.570

重写 RemoveItem 方法就成功了：

```
 private static void RemoveItem3(Text textfield)
    {
        OpenXmlElement element = textfield;
        while (!(element.Parent is DocumentFormat.OpenXml.Wordprocessing.Body) && element.Parent != null)
        {
            element = element.Parent;
        }

        if (element.Parent != null)
        {
            element.Remove();
        }
    } 
```

# jquery - 如何检查 div 是否可调整大小（）

> ID：11773641
> 
> 赞同：3
> 
> 时间：2012-08-02T08:25:15.717
> 
> 标签：jquery, jquery-ui-resizable

看起来很简单的事情就是不打球。 **如何检查元素是否可调整大小？**

我在 jsfiddle 上尝试了一些测试，但运气不佳。我试过在这里查看官方说明页面：http: [//jqueryui.com/demos/resizable/#method-option](http://jqueryui.com/demos/resizable/#method-option)和一些谷歌搜索并检查stackoverflow上的答案，但仍然无法得到它给我正确的响应。无论如何，下面的代码都会返回“禁用”。

继承人的小提琴：http: [//jsfiddle.net/dbKtP/11/](http://jsfiddle.net/dbKtP/11/)

```
$("#a").resizable();

if ($("#a").resizable("option","enable") == true){
   alert("enabled");       
} else {
   alert("disabled");   
} 
```

谁能解决这个相当简单但令人困惑的问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T08:29:24.490

如果您想知道`resizable()`之前是否在元素上调用过，您可以检查通过调整大小添加的类。

```
$('#a').is('.ui-resizable') 
```

您可以通过阅读`disabled`选项来检查启用状态（请参阅 Ariel 的回答）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T08:29:17.027

它被称为“禁用”而不是“启用”。当你更正它时，不要忘记也反转布尔值。

IE：

```
if ($("#a").resizable("option","disabled")){
   alert("disabled");   
} else {
   alert("enabled");       
} 
```

PS。`true`与和进行比较有点愚蠢`false`。

# android - 带有 maven 提供的依赖项的 Android Eclipse 项目编译错误

> ID：11773648
> 
> 赞同：0
> 
> 时间：2012-08-02T08:25:39.923
> 
> 标签：android, eclipse, maven, dependencies

我正在将一个 android 应用程序转换为基于 maven

我所做的是：插入 pom.xml

1.  项目清单
2.  将 java 类复制到 main/java 目录，并使该目录成为源路径
3.  将 maven 性质插入 .project 文件

我将 google android 库依赖项添加到 pom.xml 中：

```
<dependency>
   <groupId>com.google.android</groupId>
   <artifactId>android</artifactId>
   <version>2.1.2</version>
   <scope>provided</scope>
</dependency> 
```

然后我意识到我不需要将 android 库包含在类路径中，因为我实际上是从 pom.xml 引用它

所以我删除了库，发生的事情是项目有编译错误，虽然当我右键单击>运行方式> Maven安装时它成功导出了apk，这意味着从maven的角度来看这个项目是一个正确的项目，所以日食有什么问题？？

我发现当我按照提供的方式设置库范围时，Maven 依赖库是缺失的，

```
<scope>provided</scope> 
```

但是当我将依赖项设置为默认值（编译）时又回来了，

```
<scope>compile</scope> 
```

虽然这个范围使 maven 无法打包，因为这个库是一个不能包含的核心库，无论如何我发现它是一个糟糕的解决方案，即使它包装得很好

我在这里想念什么？

注意：我正在使用 MotoDev IDE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:02:58.230

原来，带有apk打包的android-maven-plugin存在问题......解决后将发布解决方案

# java - Java - XML 解析器性能：Sun Java Streaming XML Parser (SJSXP) vs Woodstox

> ID：11773649
> 
> 赞同：5
> 
> 时间：2012-08-02T08:25:40.030
> 
> 标签：java, xml, xml-parsing, stax, woodstox

我正在寻找最新的、内存高效的和高性能的 java XML 解析 API。我需要解析 3 MB 到 5 MB 的 XML 文件。

我对此进行了谷歌搜索，了解到 Sun Java Streaming XML Parser (SJSXP) 和 Woodstox 比 DOM 和 SAX 快得多。两者都使用 StAX API。*这些技术不支持模式验证。

Aalto XML 处理器也实现了 StAX API。

我还没有找到关于这些技术性能的具体发现。

哪一个在内存效率、高性能和易用性方面最好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:32:32.107

以下是一些可能相关的链接：

*   用于数据绑定的 Stax impls：http: [//technotes.blogs.sapo.pt/1708.html](http://technotes.blogs.sapo.pt/1708.html)
*   有效地使用 Woodstox：http: [//www.cowtowncoder.com/blog/archives/2006/06/entry_2.html](http://www.cowtowncoder.com/blog/archives/2006/06/entry_2.html)
*   使用 Woodstox 加速 XSLT：http: [//www.cowtowncoder.com/blog/archives/2009/04/entry_235.html](http://www.cowtowncoder.com/blog/archives/2009/04/entry_235.html)

性能方面：SJSXP 最慢；它只是 Xerces 内部的重新包装，包装在 Stax API 中。这对性能有一些负面影响（因为它并不是真正为拉解析而设计的）。伍德斯托克斯快一点；小文档和写作要快得多，解析较长文档时差异更小。

到目前为止，Aalto 是这三者中最快的，尤其是在解析方面。它通常比 Woodstox 或 SJSXP 快 50% - 100%。一个缺点是它不处理 DTD（因此不处理外部实体；它处理预定义和字符实体）。

免责声明：我是 Woodstox 和 Aalto 的作者；以及 SJSXP 的贡献者（错误修复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:11:31.620

上述查询的一些有用链接：

[http://www.developerfusion.com/article/84523/stax-the-odds-with-woodstox/（2010](http://www.developerfusion.com/article/84523/stax-the-odds-with-woodstox/)年 6 月）

[http://www.ibm.com/developerworks/opensource/library/os-ag-renegade15/（2007](http://www.ibm.com/developerworks/opensource/library/os-ag-renegade15/)年 7 月）

性能基准测试详细信息：

[http://www.xml.com/pub/a/2007/05/09/xml-parser-benchmarks-part-1.html（2007](http://www.xml.com/pub/a/2007/05/09/xml-parser-benchmarks-part-1.html)年 5 月）

# jsf-2 - 显示 h:commandButton 的标签值的问题

> ID：11773668
> 
> 赞同：0
> 
> 时间：2012-08-02T08:26:55.060
> 
> 标签：jsf-2, primefaces

我在显示`<h:commandButton>`. 例如，请看下面的代码

```
<td align="left"  style="float: left;">
            <h:commandButton value ="Reset Demand To Default"  styleClass="refresh-button-style" />
        </td> 
```

我已经为这个按钮创建了样式类，样式类的代码在下面指定。

```
.refresh-button-style
{
word-wrap: break-word !important;
background-color:#2996EF;
height:40px;
width:100px;
font-size:13px;
text-align: center;
font-family: Arial;
 } 
```

当我尝试运行 xhtml 文件并禁用标签值时，标签值似乎水平显示。它确实会自动换行，因此只显示按钮标签的一部分。您能否告诉我如何实现按钮的自动换行并在命令按钮中显示整个标签值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:58:33.410

尝试以下 css 属性：

```
white-space:normal; 
```

这应该按预期包装文本（[source](http://daipratt.co.uk/wrap-text-on-an-button-with-css/)）。

# ios - 在 Apple 推送通知中发送设备令牌

> ID：11773670
> 
> 赞同：0
> 
> 时间：2012-08-02T08:27:29.040
> 
> 标签：ios, xcode, apple-push-notifications

我遇到的推送通知教程管理设备令牌的发送以及用户为 Web 服务请求发送的数据。我的应用程序也使用网络服务，但对于我的应用程序，当将记录添加到网站时，必须在我的应用程序上通知它。那么何时以及如何从我的 iphone 应用程序发送我的设备令牌？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:02:02.333

每次用户登录时，我都会将设备令牌发送到服务器。我正在发出 http 请求（我添加设备令牌）以检查密码和电子邮件。如果输入的数据没问题，我将令牌保存在数据库中。

# sql - 存储和向用户显示用户收件箱的最有效方式

> ID：11773672
> 
> 赞同：1
> 
> 时间：2012-08-02T08:27:30.983
> 
> 标签：sql, database

我正在尝试为我目前正在使用的应用程序实现一个消息传递系统。消息存储在一个表中：

```
CREATE TABLE `message` (
  `MessageID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `Thread` BIGINT(20) NOT NULL,
  `From` BIGINT(20) NOT NULL,
  `To` BIGINT(20) NOT NULL,
  `DateTime` DATETIME NOT NULL DEFAULT '2012-01-01 00:00:00',
  `Content` TEXT NOT NULL,
  PRIMARY KEY (`MessageID`),
  CONSTRAINT `FK_messageTo` FOREIGN KEY (`To`) REFERENCES `team` (`TeamID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `FK_messageFrom` FOREIGN KEY (`From`) REFERENCES `team` (`TeamID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `FK_thread` FOREIGN KEY (`Thread`) REFERENCES `thread` (`ThreadID`) ON DELETE CASCADE ON UPDATE CASCADE
); 
```

Thread 是另一个存储对话线程的表，基本上是成对的用户。

当用户查看他们与 somone 的对话时，他们应该只显示最近的消息，例如 10 条消息。按需显示更多消息（单击按钮等）。我不确定在这种情况下池化数据库的最有效方法是什么。

*   每次都取出整个线程并将其切断显然是不合时宜的。

*   查询如下：

    ```
    SELECT *
      FROM message
     WHERE (to = {party1} AND `from` = {party2})
        OR (to = {party2} AND `from` = {party1})
     ORDER BY messageID DESC
     LIMIT {start}, {length} 
    ```

其中像 {name} 这样的表达式是变量。我不确定 LIMIT 在这里是如何工作的，是否会比我的第一种方法更快。

*   第三种选择是添加另一个在线程内递增的字段（索引）（因为每当在系统中的任何位置添加新消息时，消息表中的主键都会递增）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:38:10.047

在看到您的要求后，我想到的一个建议是：假设您必须一次显示 10 个对话，并且如果用户想要查看更多，他将被提供一个按钮来查看接下来的 10 个对话。

所以你可以做的是，首先选择前 10 个对话并将最后一个对话的 id 号存储在前端应用程序的某个变量中。

```
SELECT *
  FROM message
 WHERE (to = {party1} AND from = {party2})
    OR (to = {party2} AND from = {party1})
   AND messageid BETWEEN 1 AND 10
 ORDER BY messageID 
```

当用户点击一个按钮查看接下来的 10 个对话时，然后再次向 sql 引擎发送一个 rang lastid+10 的查询。那是：

```
SELECT *
  FROM message
 WHERE (to = {party1} AND from = {party2})
    OR (to = {party2} AND from = {party1})
   AND messageid BETWEEN 11 AND 20
 ORDER BY messageID 
```

还要确保表上有正确的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:01:26.123

我同意 AnandPhadke 的回答。只是一些太复杂的评论：

`LIMIT`是一种 hack，用于处理您没有可用于限制结果数量的有用 ID 的数据。例如，当您构建搜索查询时，您连接了许多表，在通常情况下，您将无法使用任何东西来限制结果的数量。

许多数据库都支持它（不是全部，Oracle 是最显着的例外之一）。表现通常是“足够好”的意思：表现不好的时候你会怎么做？没有其他方法可以做到这一点。

但是，如果您可以更改数据模型并为其提供可以用作限制器的适当 ID，那总是比使用`LIMIT`.

缺点是您需要执行两个查询：首先，您需要`MAX(ID)`（因为您希望首先显示最新消息）。只有这样，您才能运行真正的查询。或者您可以使用子选择。从这个角度来说，`LIMIT`是“更干净”的。

# javascript - MapReduce 还是普通查询？（每张地图有几个发射）

> ID：11773673
> 
> 赞同：1
> 
> 时间：2012-08-02T08:27:33.110
> 
> 标签：javascript, mongodb, mapreduce

我在我的项目中使用了一些不同的 Map/Reduces 函数。但其中一个与其他有很大不同，因为它需要地图功能中的循环。对于循环中的每个计数，我发送一个发射。

我所拥有的是这种情况（在用户集合中）：

```
 "channels" : [
        "Channel 1",
        "Channel 2",
    ], 
```

我想做的是统计每个频道有多少用户。因此，我可以使用`db.users.find({channels: "Channel 1"}).count()`但不幸的是频道是动态的，这意味着我不知道所有可能的频道名称，并且将来可能会发生变化。

所以我认为 Map/Reduce 工作会非常完美。但问题是我写的第一个 Reduce 作业计算错误。而另一个我为每个发射使用查询的地方，将永远花费（在 ssh 会话关闭前 3 个多小时）。

所以现在我被困住了，我需要帮助，最好是我想要一份 Map/Reduce 工作，因为它比一堆实时运行速度慢的查询要好。

这是我写的最新的`Map`和功能：`Reduce`

```
var map = function() {
    if(this.channels) {
            for(var i = 0, imax = this.channels.length; i<imax; i++) {
            emit(this.channels[i], 1);
        }   
    }
}

var reduce = function (key, values) {
    var result = 0;

    values.forEach(function (value) {
        // had this before: result += 1;
        result = db.users.find({'channels' : key}).count();
    });

    return result;
} 
```

我知道 reduce 函数很可怕，但我只是尽力而为。我认为我的逻辑可能看起来错误，但我找不到一个好的解决方案。现在我想在每个页面加载时只做一堆查询，但这会很慢。

请帮忙！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:54:07.617

在您的场景中，reduce 函数应如下所示：

```
var reduce = function (key, values) {
    var result = 0;

    values.forEach(function (value) {
        result += value;
    });

    return result;
} 
```

让我知道它是否仍然无法正常工作，如果确实如此，请举例说明输入和（不正确的）输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:31:36.693

MR有时有点慢。因此，您可能想查看 2.2 附带的新聚合框架（我认为它目前处于发布阶段）。

请参阅：[http ://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

此外，您可能需要通过使用适当的索引来加快查询速度。或者在用户加入/离开频道时向频道添加用户计数并增加/减少。当然取决于您的应用程序的用例。

# quartz.net - Quartz.net 中多个 AsyncTask 的串行并行执行

> ID：11773678
> 
> 赞同：1
> 
> 时间：2012-08-02T08:28:00.040
> 
> 标签：quartz.net

我可以使用 C# 4.0 中的 Task 类来做到这一点，但我想给 Quartz.net 框架一个机会。

*   任务 A（每周日运行）
    *   任务 A.1
    *   任务 A.11 .. 任务 A.1n（任务 A.1 完成后运行，n 设置在任务 A.1 之后）

有3个例外：

*   RetryCurrentSubTaskException
*   CancelCurrentSubTaskException（主要任务仍然可以完成）
*   CancelAllTask​​sException（关键异常）

如何使用quartz.net 或任何其他轻量级调度框架来实现这一点？（持久层是Sql Server）

# android - getFromLocation(latitude,longitude, number) 函数为已知位置返回 null

> ID：11773681
> 
> 赞同：0
> 
> 时间：2012-08-02T08:28:12.607
> 
> 标签：android, null

我正在使用 a`Geocoder`来定位我的位置，其中包括地址、邮政编码和国家/地区值。

但`getFromLocation(latitude,longitude,number)`返回 null，即使我使用已知的位置属性（纬度：40,645081 经度：22,988892）。

我正在使用 Eclipse 在 AVD（API 级别 7）上测试我的应用程序。

提前致谢。

这是该`getFromLocation`函数使用位置的片段。

```
private void updateWithNewLocation(Location location){
    String latLongString;
    TextView myLocationText;
    myLocationText = (TextView)findViewById(R.id.myLocationText);

    String addressString = "No address found";

    if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        latLongString = "Lat:" + lat + "\nLong:" + lng;

        //double latitude = 73.147536;
        //double longitude = 0.510638;
        Geocoder gc = new Geocoder(this, Locale.getDefault());

        try {
            List<Address> addresses = gc.getFromLocation(lat, lng, 1);
            Log.v("TRY_BODY", "All addresses are: " + addresses);
            StringBuilder sb = new StringBuilder();
            if (addresses.size() > 0) {
                Log.v("IF_BODY", "All addresses are: " + addresses);
                Address address = addresses.get(0);
                for (int i = 0; i < address.getMaxAddressLineIndex(); i++){
                    sb.append(address.getAddressLine(i)).append("\n");
                    sb.append(address.getLocality()).append("\n");
                    sb.append(address.getPostalCode()).append("\n");
                    sb.append(address.getCountryName());
                }
                addressString = sb.toString();
            }
        } catch (IOException e) {}
    } 
    else {
        latLongString = "No location found";
    }

    myLocationText.setText("Current Position:\n"+latLongString + "\n" + addressString);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:48:04.157

它很常见，有时谷歌服务器不返回任何地址，所以你应该再次尝试，它可能是任何服务器忙，或者其他什么，你可以在任何线程中循环运行此代码，如果地址成功，您可以停止循环，它将结束线程。

# c - 访问结构中的字符指针字段

> ID：11773683
> 
> 赞同：1
> 
> 时间：2012-08-02T08:28:15.793
> 
> 标签：c, pointers, struct

我有一个`struct`定义为

```
typedef struct
{
    char* name;
    char* ID;
    int marks;

    char* details;

} Student; 
```

另一个作为

```
typedef struct
{
    int n;
    Student* stud_array;
} Batch; 
```

一个文件具有特定格式的不同批次学生的条目，我正在从该文件中读取以填充`BatchArray`类型`Batch*`

填充每个字段后，我正在使用

```
puts(BatchArray[no_of_batches-1].stud_array[i].name);
puts(BatchArray[no_of_batches-1].stud_array[i].ID);
printf("%d\n",BatchArray[no_of_batches-1].stud_array[i].marks); 
```

看看结果。它给了我正确的输出。

但是，一切都完成后，当我想遍历 时`BatchArray`，只有`marks`每个结构中的字段保留该值。和显示`name`为`ID`一些随机垃圾值。

迭代代码是标准的。尽管如此，它就在这里。

```
 for(i = 0; i < no_of_batches; i++)   {
        currBSize = BatchArray[i].n;
        printf("Batch %d\n", (i+1));
        printf("Batch size %d\n", currBSize);
        for(j = 0; j < currBSize; j++)  {
            puts(BatchArray[i].stud_array[j].name);
        }
    } 
```

我正在处理的问题需要找到每批的平均分数，所以这不是问题。但我想知道为什么其他字段被重置为垃圾值。

有人可以帮忙吗？

编辑：这是我填充字段的方式。

该文件由这样的条目组成

3 名称1 ID1 标记1 名称2 ID2 标记2 名称3 ID3 标记3 2 名称4 ID4 标记4 名称5 ID5 标记5

这就是代码。

```
no_of_batches = 0;
            infileptr = fopen (infilename, "r");

            BatchArray = (Batch *) malloc(sizeof(no_of_batches));

            int MAX_BUFF = 100;
            char currLine[MAX_BUFF];    

            while (fgets(currLine, MAX_BUFF, infileptr) != NULL)    {

                no_of_batches++;
                BatchArray = (Batch *) realloc(BatchArray, no_of_batches*sizeof(Batch));
                currBatchSize = atoi(currLine);
                BatchArray[no_of_batches-1].n = currBatchSize;
                printf("currBatchSize : %d\n",BatchArray[no_of_batches-1].n);
                BatchArray[no_of_batches-1].stud_array = (Student *) malloc(currBatchSize*sizeof(Student));
                for(i = 0; i < currBatchSize; i++)  {
                    fgets(currLine, MAX_BUFF, infileptr);
                    currLine[strlen(currLine)-1] = '\0';

                    BatchArray[no_of_batches-1].stud_array[i].details = currLine;

                    //getting the Name from currLine
                    j = 0;
                    len = strlen(currLine);
                    char buildName[len];
                    while(currLine[j] != ' ')   {
                        buildName[j] = currLine[j];
                        j++;
                    }

                    buildName[j] = '\0';
                    BatchArray[no_of_batches-1].stud_array[i].name = buildName;

                    j++;
                    //getting the ID from currLine
                    k = 0;
                    char buildID[len];
                    while(currLine[j] != ' ')   {
                        buildID[k] = currLine[j];
                        j++;
                        k++;
                    }

                    buildID[k] = '\0';
                    BatchArray[no_of_batches-1].stud_array[i].ID = buildID;

                    puts(BatchArray[no_of_batches-1].stud_array[i].name);
                    puts(BatchArray[no_of_batches-1].stud_array[i].ID);

                    //getting the marks from currLine
                    k = 0;
                    j++;
                    char buildMarks[len];
                    while(currLine[j] != '\0')  {
                        buildMarks[k] = currLine[j];
                        j++;
                        k++;
                    }

                    buildMarks[k] = '\0';
                    BatchArray[no_of_batches-1].stud_array[i].marks = atoi(buildMarks);
                    printf("%d\n",BatchArray[no_of_batches-1].stud_array[i].marks);
                }
                puts("");
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:31:39.647

我的猜测是你没有为`name`和`ID`字段分配内存。由于 name 和 ID 字段都是 char 指针，因此您需要在填充它们之前分别为它们中的每一个分配内存。

如果您在填充字段的位置发布代码，那么人们将能够为您提供更准确的理由。

编辑：

您正在使用相同的局部变量 buildName 和 buildID 来填充不同学生的值。当您将局部变量分配给结构字段时，其中存储的是这些变量的地址，这些地址中的值会随着循环的迭代而不断变化。另一个问题是，一旦您从函数返回，局部变量就会超出范围。因此，建议使用 malloc 为名称和 ID 字段分配内存或使用 strdup（您可以参考下面关于使用 strdup 的 ectamur 的回答）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:39:21.063

字段`name`和`ID`的类型为`char*`，即它们是指针。如果在加载和迭代之间，它们指向的内存被覆盖，那么它们指向垃圾。在这种情况下，您似乎将字段分配给数组`name`的起始地址，该 `buildName`数组作为局部变量被分配到堆栈上。

您有两种选择：

*   将字段类型更改为字符数组。缺点是您必须指定最大长度并检查缓冲区溢出。
*   使用动态内存。您可以使用`strdup`或来使用动态内存`malloc`。`free`在这种情况下，您必须在不再需要内存时释放（通过调用），以避免内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:53:04.413

代替

```
 BatchArray[no_of_batches-1].stud_array[i].name = buildName; 
```

写

```
 BatchArray[no_of_batches-1].stud_array[i].name = strdup(buildName); 
```

第一种情况的问题是`name`指向`buildName`，它是堆栈上的一个数组，只要堆栈的内容发生变化，就会被覆盖。

在第二种情况下，您已将数组复制到新分配的堆内存（与`malloc`or一样`realloc`），在您之前将保持不变`free`。

# .net - 如何更改数组的大小？

> ID：11773687
> 
> 赞同：1
> 
> 时间：2012-08-02T08:28:31.100
> 
> 标签：.net, arrays

我有一个定义的数组：

```
 Private shapePoints(picWidth, picHeight) As Integer 
```

我需要在代码中重新更改此数组的大小。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:02:10.150

```
ReDim shapePoints(picWidth, picHeight) 
```

# shell - 如何在命令行上以毫米为单位更改图像的打印尺寸？

> ID：11773688
> 
> 赞同：1
> 
> 时间：2012-08-02T08:28:35.000
> 
> 标签：shell, imagemagick, image-manipulation

ImageMagick 似乎最好在命令行上转换图像文件。但是，它只支持更改像素大小和每像素英寸分辨率，但不支持更改**打印大小**（如命令所示`identify -verbose`）。我想：

*   快速获取以mm为单位的图像打印尺寸
*   更改图像打印尺寸（通过将高度或宽度或两者都设置为以毫米为单位的新值）

这应该可以通过简单的 shell 脚本来实现，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:20:20.413

图像的唯一*绝对*维度是*像素*。

*分辨率*、*毫米*或*密度*或*分辨率*只有在您在特定表面（屏幕显示、纸张打印输出）上*渲染*图像时才会发挥作用。

它们有自己的内置的、硬件相关的分辨率。如果您知道，您可以计算图像尺寸的*mm*值，前提是您希望以“自然尺寸”呈现它。

很多时候你不想要“自然尺寸”——有时你可能想要：“用图像填充 Letter 大小的纸”（缩放到适合）。如果发生这种情况，则必须放大或缩小相同的图像 - 但屏幕或打印机分辨率不会改变，只是插值算法将开始添加像素以填充间隙（放大）或删除像素以使图片看起来更小（按比例缩小）。

因此，在有人给出关于如何计算“以 mm 为单位的图像大小”（以图像的自然大小）的算法之前，您需要知道目标设备（屏幕或打印机）的分辨率。

* * *

**编辑：**

如果您将给定的图像（其大小以像素为单位）嵌入 PDF（源文档来自 LaTeX），您仍然必须指定...

*   ...您希望在页面上呈现图像的*分辨率*
*   ...或您希望图像呈现的*尺寸（以毫米为单位或以页面尺寸的百分比为单位）。*

如果不对图像进行重新采样，您无法同时确定**这**两个参数。选择一个，另一个由您的选择隐含地确定。

举个例子。

假设您的原始图像是 2160x1440 像素。

您的 LaTeX -> PDF 转换由 Ghostscript 完成。Ghostscript 在内部对所有光栅对象使用 720 dpi 的默认分辨率。因此，除非您为 PDF 转换明确设置“分辨率”为不同的值，否则 PDF 或打印页面上的图像尺寸将为 3x2 英寸（76.2 x 50.8 毫米）。

如果将分辨率设置为 90 dpi，则页面上的图像尺寸为 24x16 英寸（609.6 x 406.4 毫米）。

如果将分辨率设置为 270 dpi（接近常用的 300 dpi），图像尺寸将转换为 8x5.333 英寸（203.2 x 135.5 毫米）。

所以shell脚本的公式是：

```
 # 25.4 mm == 1 inch

  image_width_px=W                      # in pixels (integer)
 image_height_px=H                      # in pixels (integer)
 resolution=R                           # in pixels/inch

  image_width_in_inch=$((W / R))        #   Shell arithmetics: does only handle
 image_height_in_inch=$((H / R))        #+  and return integers!

  image_width_in_mm=$(( $((W / R)) * 254/10 ))
 image_height_in_mm=$(( $((H / R)) * 254/10 ))

 # use 'bc' to achieve higher precision arithmetics:
  precise_image_width_in_mm=$( echo \
                               "$image_width_px  / $resolution * 25.4" \
                               | bc -l )
 precise_image_height_in_mm=$( echo \
                               "$image_height_px / $resolution * 25.4" \
                               | bc -l ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:31:47.913

我试图用[我自己的 Perl 脚本](https://gist.github.com/3246780)来解决它。正如 Kurt Pfeilfe 在他的回答中所解释的那样，必须根据像素大小和请求的打印大小来计算每英寸的点数。

```
sub getsize {
  my $file = shift;
  my $info = do { # avoid the shell, no escaping needed
    my @args = ('-format','%G %x%y','-units','PixelsPerInch',$file);
    open my $fh, "-|", "identify", @args or die "$!\n";
    <$fh>;
  };
  if ($info =~ /^(\d+)x(\d+) (\d+) PixelsPerInch(\d+) PixelsPerInch/) {
    my ($px,$py,$dx,$dy) = ($1,$2,$3,$4);
    my ($sx,$sy) = map { $_ * 25.4 } ($px/$dx, $py/$dy);
    return ($px,$py,$dx,$dy,$sx,$sy);
  } else {
    die $info;
  }
}

foreach my $file (@ARGV) {
  if ($file =~ /^(\d*)(x(\d+))?mm$/) {
    ($mx,$my) = ($1,$3);
  } elsif( -e $file ) {
    my ($w,$h);
    if ($mx || $my) {
      my ($px,$py,$dx,$dy,$sx,$sy) = getsize($file);
      my $rx = 25.4 * ( $mx ? ($px/$mx) : ($py/$my) );
      my $ry = 25.4 * ( $my ? ($py/$my) : ($px/$mx) );
      system qw(convert -units PixelsPerInch -density),
          sprintf("%.0fx%.0f",$rx,$ry), $file, $file;
    }
    printf "$file: %dx%d at %dx%ddpi = %dx%dmm", getsize($file);
  } else {
    die "file not found: $file\n";
  }
} 
```

该脚本不支持毫米的分数，请随意修改[源代码](https://gist.github.com/3246780)。

# iphone - 在 iPhone 上收听传入的 HTTP 消息

> ID：11773689
> 
> 赞同：1
> 
> 时间：2012-08-02T08:28:35.900
> 
> 标签：iphone, ios, http, servlets, listener

作为大学考试的一部分，我必须做一个简单的 iPhone 项目，其中包括使用 Java Servlet 技术（必需）创建一个基于客户端/服务器系统的简单即时通讯程序。

我想知道的是是否有一个框架或一些简单的类使我能够在不发出请求的情况下监听来自服务器的传入 http 消息，以便 iPhone 可以直接向另一台 iPhone 发送即时消息。

提前致谢，祝您有美好的一天！

L.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:44:37.433

根据我从您的问题中了解到的情况，您需要一个听众。有几个 3rd 方实现可以提供您所需要的。基本上你只需要打开一个套接字来监听你 iPhone 上运行的 HTTP 服务器。试试这些，它应该能满足你的需要

1.  [可可HTTPServer](http://code.google.com/p/cocoahttpserver/)。
2.  [猫鼬守护进程](https://github.com/face/MongooseDaemon)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:53:38.717

如果您正在寻找一种从 WEB 服务器接收消息的方法 - 您可以使用 Apple Notification 服务（[这里有一个很好的教程](http://maniacdev.com/2011/05/tutorial-ios-push-notification-services-for-beginners/)）

另一种方法是使用长轮询连接，但在IOS中实现起来并不容易。

也许您可以通过从 iPhone 请求网络服务器（例如每 10 秒）来检查传入的消息？

# objective-c - NSAssert(boolean) 在发布中

> ID：11773691
> 
> 赞同：2
> 
> 时间：2012-08-02T08:28:44.780
> 
> 标签：objective-c

简单的问题。

如果我有

```
BOOL a = [myInst function];
NSAssert(a, @"...") 
```

然后我会在发布版本中收到警告，因为没有使用 a 。我想断言从函数返回的 BOOL，但我不需要使用它。我将如何解决它？

我不能将整个表达式放入 NSAssert 中，因为它不会在发布时编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:38:01.560

你有没有尝试过

```
#pragma GCC diagnostic ignored "-Wunused-variable"

<your function>

#pragma GCC diagnostic warning "-Wunused-variable" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:31:27.130

只要导致的表达式`a`没有副作用，为什么不直接放入`NSAssert`呢？例如

```
NSAssert(<expr>, @"...") 
```

请注意，如果`<expr>`有副作用，例如打印某些东西，这可能不会在非调试版本中发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T08:35:08.837

我不喜欢那个警告。

这是我在这些情况下所做的：

```
BOOL a = NO;
a = [myInst function];
NSAssert(a, @"...") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T08:31:48.960

再提一次 BOOL ：

```
a = !(!a); 
```

或者

```
if (a) {} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-23T01:01:21.477

如[如何知道 NSAssert 在发布版本中是否被禁用中所述？](https://stackoverflow.com/questions/8552486/how-to-know-if-nsassert-is-disabled-in-release-builds)，您可以使用它`NS_BLOCK_ASSERTIONS`来了解 NSAssert 是否被覆盖以不执行任何操作。

因此，您可以定义自己的断言宏：

```
#ifdef NS_BLOCK_ASSERTIONS
    #define ABCAssert(condition, ...) \
        do { \
            if (!condition) \
                NSLog(__VA_ARGS__); \
        } while (0)
#else
    #define ABCAssert(condition, ...) NSAssert(condition, __VA_ARGS__)
#endif 
```

现在用 ABCAssert 替换所有对 NSAssert 的调用。除了确保始终使用该条件外，它还将记录任何断言失败，而不是默默地忽略它们。

警告：我没有测试上面的代码。当我有更多时间时，我会更新它以确保它正常工作。

* * *

这类似于[Abizer Nasir 的编码约定](http://abizern.org/cocoa-coding-conventions/#standard-files)，它定义：

```
#ifdef DEBUG
  #define ALog(...) [[NSAssertionHandler currentHandler] handleFailureInFunction:[NSString stringWithCString:__PRETTY_FUNCTION__ encoding:NSUTF8StringEncoding] file:[NSString stringWithCString:__FILE__ encoding:NSUTF8StringEncoding] lineNumber:__LINE__ description:__VA_ARGS__]
#else
  #ifndef NS_BLOCK_ASSERTIONS
    #define NS_BLOCK_ASSERTIONS
  #endif
  #define ALog(...) NSLog(@"%s %@", __PRETTY_FUNCTION__, [NSString stringWithFormat:__VA_ARGS__])
#endif 
```

但是，有一些区别：

*   我们保留第一个选项 ，`condition`它将确定断言是否应该失败。
*   它不是在调试期间通过硬编码来禁用它，而是使用`NS_BLOCK_ASSERTIONS`可以[根据项目的目标设置自定义](https://stackoverflow.com/questions/20377845/xcode-5-equivalent-of-ns-block-assertions-in-build-settings)的现有宏。
*   另请注意，由于 NS_BLOCK_ASSERTIONS 是通过编程方式定义的，这意味着必须将 Nasir 的代码放在[pch 文件中的 Cocoa 和 Foundation 导入](https://stackoverflow.com/a/6445429/35690)之前。

# php - PHP pecl 和当前 finfo 版本

> ID：11773694
> 
> 赞同：-1
> 
> 时间：2012-08-02T08:29:04.313
> 
> 标签：php, mime-types, file-type, pecl

无论使用什么文件扩展名，我都需要使用 php (5.3.7) 确定文件的文件类型。

在 Linux OS 系统上，我会使用从文件中读取第一个字节来找出确切的文件类型。

我认为这在 PHP 中是可能的[`finfo`](http://www.php.net/manual/en/ref.fileinfo.php)

关键是：我的服务器没有连接到互联网，所以我必须`finfo` `PECL`手动下载扩展。

我发现的只是这个网站：[http](http://pecl.php.net/package/Fileinfo) ://pecl.php.net/package/Fileinfo ，当前`finfo`版本来自 2006 年 11 月。

还有一个提示“他的包已被取代”。但是被什么取代了？如果我看看这个 [http://www.php.net/manual/en/fileinfo.installation.php](http://www.php.net/manual/en/fileinfo.installation.php)没有我在哪里找到这个包的信息。

我发现的唯一内容是“从 PHP 5.3.0 开始默认启用此扩展。”这是否意味着此扩展是每个默认 >=PHP 5.3.0 安装的一部分？但是如果我尝试使用`finfo`命令，我会得到一个`Call to undefined function`看起来`finfo`没有安装的命令，对吧？！

//编辑：顺便说一句：我正在使用 Linux，PHP 5.3.7

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T11:29:05.893

回答我自己的问题：我在搜索新的 pecl file_info 版本时走错了路。对于 Linux 系统，存在一个包含该扩展名的 PHP 包，如下所示：（ `php5-fileinfo-5.3.6-75.1.x86_64.rpm`取决于您的 Linux 发行版和 PH 版本）要使用 fileinfo，您必须安装此包，如下所示：

`#rpm -ihv php5-fileinfo-5.3.6-75.1.x86_64.rpm`

# java - 为什么我会收到异常 java.lang.NoClassDefFoundError org/codehaus/groovy/？

> ID：11773702
> 
> 赞同：7
> 
> 时间：2012-08-02T08:29:38.083
> 
> 标签：java, groovy, jasper-reports

我刚刚尝试了 Jasper Report，我正在关注[这个网站的教程](http://mdsaputra.wordpress.com/2010/10/21/step-by-step-jasper-report-tutorial/)

我还下载了示例源然后运行它并且没有错误。但是当我使用创建自己的报告时`iReport`，对其进行编译，然后将`.jasper`文件添加到我的项目中。当`exception`我运行我的程序时：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/codehaus/groovy/runtime/callsite/CallSiteArray
    at report2_1343895135169_749208.$createCallSiteArray(calculator_report2_1343895135169_749208)
    at report2_1343895135169_749208.$getCallSiteArray(calculator_report2_1343895135169_749208)
    at report2_1343895135169_749208.<init>(calculator_report2_1343895135169_749208)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at net.sf.jasperreports.engine.design.JRAbstractJavaCompiler.loadEvaluator(JRAbstractJavaCompiler.java:112)
    at net.sf.jasperreports.engine.design.JRAbstractCompiler.loadEvaluator(JRAbstractCompiler.java:333)
    at net.sf.jasperreports.engine.JasperCompileManager.getEvaluator(JasperCompileManager.java:265)
    at net.sf.jasperreports.engine.fill.JRFillDataset.createCalculator(JRFillDataset.java:457)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.<init>(JRBaseFiller.java:379)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:88)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:103)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:61)
    at net.sf.jasperreports.engine.fill.JRFiller.createFiller(JRFiller.java:153)
    at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:82)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:653)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:634)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:956)
    at View.MainGUI.btnExportActionPerformed(MainGUI.java:871)
    at View.MainGUI.access$800(MainGUI.java:50)
    at View.MainGUI$10.actionPerformed(MainGUI.java:541)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6267)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6032)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.lang.ClassNotFoundException: org.codehaus.groovy.runtime.callsite.CallSiteArray
    at java.lang.ClassLoader.findClass(ClassLoader.java:359)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    ... 50 more 
```

这是我用于显示报告的按钮操作（这只是示例，报告仅包含一个带有参数的文本：outputText）：

```
Map params = new HashMap();
params.put("outputText", "Hello world");
try {
        JasperPrint printer = JasperFillManager.fillReport(getClass().getResourceAsStream("report2.jasper"), params, new JREmptyDataSource());
        JasperViewer jv = new JasperViewer(printer);
        jv.show();
    } catch (JRException ex) {
        ex.printStackTrace();
    } 
```

如果有`dependency`问题，我已经将所有需要的 jar 导入到我的项目中，当我使用`.jasper`该教程中的文件时没有问题，是因为版本不同`iReport`吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-23T13:39:00.360

或者，您可以更改 .jrxml 文件，查找

```
language="groovy" 
```

并将其更改为

```
language="java" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-02T08:43:25.070

可能是因为版本不匹配。如果您想知道您需要哪个版本的 Groovy，您可以查看 Jasper 的 Maven 存储库：

[http://mvnrepository.com/artifact/net.sf.jasperreports/jasperreports/4.6.0](http://mvnrepository.com/artifact/net.sf.jasperreports/jasperreports/4.6.0)

从这里您可以看到**Jasper 4.6.0**需要**Groovy 1.7.5**

 *** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T08:33:39.387

您需要使用 CallSiteArray 类的附加 Jar 包。

[http://groovy.codehaus.org/下载](http://groovy.codehaus.org/Download)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T09:56:21.793

我在使用 Jasper iReport Tool 5.6.0 时遇到了同样的问题，我的语言是 Java，我将正确的 jasper 报告库降级为 iReport Tool 5.1.0，它的工作原理就像一个魅力......希望状态仍然如此......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-03T08:15:57.247

无需更改库，如果是 Ireport 5.X 版本，您可以在主报告属性的语言部分更改它，只需从 groovy 更改为 java 并且报告不会给出任何错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-23T09:38:10.133

简单的答案

**脚步：**

1从报告检查器（ **Windows->报告检查器）中****选择您的根文件夹**，即 report1.jsxml 2**转到属性**选项卡并单击**语言选项卡**，然后**选择 JAVA**

 ******开始编译和预览您的应用程序...

**对 subReports 也做同样的事情......**********

# c++ - C++ 库 API。使用转换器类而不是普通的 C api

> ID：11773706
> 
> 赞同：1
> 
> 时间：2012-08-02T08:29:56.467
> 
> 标签：c++, api, stl, interop, portability

这个问题是关于 C++ <-> C++ 互操作性的。

众所周知，标准库类/函数的实现可能因不同的供应商而异。此外，当使用不同的编译器键、配置（调试/发布）等时，即使在同一个库供应商中，实现也可能不同。

由于这个原因，许多库开发人员转向旧的纯 C 风格 API。这导致了丑陋的容易出错的界面。

例如，为了从某个函数中获取字符串，使用了 Win GetCurrentDirectory 函数等接口：

```
DWORD WINAPI GetCurrentDirectory(
  __in   DWORD nBufferLength,
  __out  LPTSTR lpBuffer
); 
```

三个参数+两边的一些样板代码（检查缓冲区大小是否足够等）只是为了得到简单的字符串。

我正在考虑使用一些辅助适配器/代理类，它将自动进行所有转换，并且可以简单地重用。

就像是：

```
#include <string>
#include <algorithm>
#include <iostream>
#include <ostream>

class StringConverter
{
    char *str; // TODO: use smart pointer with right deleter
public:
    StringConverter(const std::string &user_string) // Will be defined only at user side
    {
        str=new char[user_string.length()+1];
        (*(std::copy(user_string.begin(),user_string.end(),str)))=0;
    }
    operator std::string() // Will be defined only at library side
    {
        return std::string(str);
    }
    ~StringConverter()
    {
        delete [] str;
    }
};

StringConverter foo()
{
    return std::string("asd");
}

int main(int argc,char *argv[])
{
    std::cout << std::string(foo()) << std::endl;
    return 0;
} 
```

[http://ideone.com/EfcKv](http://ideone.com/EfcKv)

注意，我打算只在用户端定义从用户字符串到 StringConverter 的转换，并且只在库内部定义从 StringConverter 到库字符串的转换。此外，应该使用右删除器（从右堆）。

您如何看待这种做法？

是否存在一些重大缺陷？

有没有一些更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:26:42.007

这种技术在标准数据类型不兼容的某些情况下会起作用，但在其他情况下也不会更好：想到名称修饰差异和类内存布局差异（vptrs 和标签）。

这就是首选 C API 的原因。

但是您*可以*通过将 C API 隐藏在库调用者永远不需要看到它的地方来提高可用性。然后添加一个薄的、惯用的 C++ 覆盖层，提供可见的库接口。在某些情况下，可以在调用方和库端使用薄覆盖代码，每个都在自己的环境中编译：标志、链接约定等。仅交换 C 数据类型。这些数据类型越简单，您获得的兼容性就越强。

该层还负责在每个对象的 API 的同一侧进行内存分配和释放，就像您的代码一样。但它可以更灵活。例如，可以安排在调用者中分配的对象在库中被释放，反之亦然。

```
// library.h for both caller and library

// "shadow" C API should not be used by caller
extern "C" {
void *make_message(char *text);
char *get_text_of_message(void* msg);
void send_message(void *msg); // destroys after send.
}

// Thin C++ overlay
class Message {
  void *msg;
public:

  Message(const std::string &text) {
    msg = make_message(text.c_str());
  }

  void send() {
    if (msg) send_message(msg);
    else error("already sent");
    msg = 0;
  }

  std:string getTextString() {
    return std:string(get_text_of_message(void* msg));
  }
} 
```

# php - PHP函数重命名权限被拒绝

> ID：11773708
> 
> 赞同：8
> 
> 时间：2012-08-02T08:30:03.023
> 
> 标签：php, permissions, rename

在服务器中，脚本创建新文件夹，将 chmod 设置为 0777，但随后它尝试将文件移动到该文件夹​​我得到错误：权限被拒绝。

```
mkdir("../".$new_1, 0777);
chmod("../".$new_1, 0777);

mkdir("../".$new_1."/".$new_2, 0777);
chmod("../".$new_1."/".$new_2, 0777);

rename("files/".$failai[$i].".jpg", "../".$new_1.'/'.$new_2."/".$failai[$i].".jpg"); 
```

> 警告：rename(files/new_file.jpg,../112a/112b/Tech_diz_1.jpg) [function.rename]: Permission denied in ..code/Jpg&Html.php on line 82

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-02T08:32:49.753

您还需要在源文件夹中具有读写权限。

仅拥有目标文件夹的权限是不够的，因为文件已从其源中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:34:51.010

你有文件的写权限吗？如果没有，请确保`chmod`将文件保存到`777`或至少保存到`644`.

`file_exists()`此外，在重命名之前，通过在文件名上给出一个来检查文件是否存在。:)

此外，在移动文件后，您可能需要设置使用权限`chmod()`以使其可用于重命名。你可以这样做：

```
<?php
    chmod($uploadedFile, 0755);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:34:22.963

您还应该有权更改文件`"files/".$failai[$i].".jpg"`。我猜那是错误的

# mysql - 在程序 MySQL 中插入错误

> ID：11773711
> 
> 赞同：0
> 
> 时间：2012-08-02T08:30:07.977
> 
> 标签：mysql, insert, add, procedure

过程中的错误 INSERT。此插入添加所有没有**UserId 的列**

```
----------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$
DROP PROCEDURE IF EXISTS CreateTable $$
CREATE PROCEDURE `CreateTable`
(
    md5 VARCHAR(255),table_name VARCHAR(255),CommentsId INT(11),
    Parent VARCHAR(100), Content TEXT,UserId INT(11), Title VARCHAR(255), 
    Nick VARCHAR(20), IdLength INT(11), suffix INT(11)
)
BEGIN

DECLARE full_table_name varchar(255);

SET @SQL=CONCAT('SELECT COUNT(\'X\') INTO @COUNTER FROM INFORMATION_SCHEMA.COLUMNS ',
            'WHERE TABLE_NAME like \'', table_name, '%\'');

PREPARE stmt FROM @SQL;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

    SET full_table_name= table_name;

    SET @SQL=CONCAT('CREATE TABLE IF NOT EXISTS ', full_table_name, ' LIKE CommentsPattern');
    PREPARE stmt FROM @SQL;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;

SET @SQL=CONCAT('INSERT INTO ', full_table_name,'(md5,UserId, Parent, Content, CommentsId, Title, Nick,IdLength,suffix)',
        'values(',UserId,',"',md5, '",', Parent, ',"', Content, '",',CommentsId,',"',Title,'","',Nick,'",', IdLength, ',',suffix, ')');
    prepare stmt from @sql;
    execute stmt;
    deallocate prepare stmt;

END 
```

我想添加这个值：

```
call CreateTable('dcf57shasdsd5723m','dcf',2,60201,'My article is',444,'New Title','Ethan',1,2); 
```

在哪里：

1.  **md5** - dfc7shgsnsty3475723m
2.  **表名 - **dfc****
***   **用户 ID** - 444*   **标题**- 新标题*   **尼克**-伊桑*   **评论 ID** - 2*   **父**- 60201*   **身份长度**- 1*   **后缀**- 2*   **内容**——我的文章是**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:41:03.007

在 INSERT INTO 中，您按以下顺序声明列：md5、UserId、Parent、... 但是，在值中，md5 和 UserId 值被切换：',UserId,',"',md5, '",',家长**

# linux - Linux命令到DOS

> ID：11773712
> 
> 赞同：0
> 
> 时间：2012-08-02T08:30:13.970
> 
> 标签：linux, dos

我有一个包含一些 linux 命令的文件，我想在 Windows 上运行（DOS 命令）。命令是：

```
cat tmp/$id/index.html | sed -e 's/ID/$id/g' > a;mv a tmp/$id/index.html 
```

MS-DOS 中的类似命令是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:36:58.187

问题是本机没有与 sed 等效的命令。从我的角度来看，你有两个选择。要么创建一个执行你想要的 vb 脚本（虽然它不会占用 1 行 - 我猜更像是 10-15），或者使用像[GnuWin32](http://gnuwin32.sourceforge.net/)这样的东西，它让你可以选择在 Windows 终端中运行 unix 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:37:53.113

您可以考虑使用 powershell 来做大致相同的事情。它支持`cat`and`mv`你可以`sed`通过使用`%{_ -replace "expression", "replace"}`. 详细信息在这里[http://blogs.msdn.com/b/zainnab/archive/2007/07/09/grep-and-sed-with-powershell.aspx](http://blogs.msdn.com/b/zainnab/archive/2007/07/09/grep-and-sed-with-powershell.aspx)

或者考虑使用类似 linux 的命令提示符，比如 bash，它应该可以通过 cygwin 获得

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:37:28.900

我认为这在“裸”命令行（如您所说的 DOS 命令）中是不可能的，因为 cat 和 sed 是单独的实用程序。如果您想将此脚本从 Linux 命令外壳移植到 Windows 命令行，我建议您下载并安装[CygWin](http://cygwin.com "赛格温")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:38:15.127

DOS 本身不支持该功能。您可以尝试[使用此处提供](http://sed.sourceforge.net/)的用于 DOS 的 SED 端口。如果您可以获得[Powershell](http://technet.microsoft.com/en-us/scriptcenter/powershell.aspx)，这是一个选择。这是一个在 Powershell 中使用 grep/sed[的示例。](http://blogs.msdn.com/b/zainnab/archive/2007/07/09/grep-and-sed-with-powershell.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-24T07:43:25.063

有很多选择。

您可以尝试安装[cygwin](https://cygwin.com)或[下载并安装 Git](https://git-scm.com/download/win)并使用 Git-bash 或将 bin 目录添加到 PATH 以便您可以在 CMD 提示符下运行此命令。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-02T08:35:12.940

MS-DOS 没有这样的命令。

# c# - 将函数绑定到嵌入在转发器中的图像源

> ID：11773718
> 
> 赞同：0
> 
> 时间：2012-08-02T08:30:38.960
> 
> 标签：c#, asp.net, sql-server, c#-4.0, c#-3.0

我有一个中继器，它内部有图像。我想根据排名显示不同的图像，例如，如果排名为 1，则显示图像，如果为 2，则显示其他图像，等等。我也有 5 种图像和 5 个等级。

排名是数据集中的一列。但我的功能不能正常工作，我无法得到正确的结果。它只显示第一张图片。您对此操作有什么建议？

非常感谢 。

这是我的代码

```
public string getimg()
{ 
    SqlConnection con = new SqlConnection("data source=.;database=site;integrated security=true;");
     string sSQL = "Select username ,weight,point , Rank() over(order by point desc) as 'ranking' from karbar order by point desc";  
     SqlCommand cmd = new SqlCommand(sSQL, con);
     SqlDataAdapter adapt = new SqlDataAdapter(cmd);
     DataSet ds = new DataSet();
     adapt.Fill(ds);
     foreach (DataRow myRow in ds.Tables[0].Rows)
     {
         if (Convert.ToInt32(myRow["ranking"]) == 1)

         { return "price/con1.png"; }
         else return "price/con2.png";
     }

     } 
```

及其html

```
 <div class="innerTitle">
                <img style="width:55px;height:55px" alt=""  src="<%# getimg() %>" />     </div>
                  <div class="innerContent" style=" width: 391px; direction:rtl "> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:34:45.557

你好，你可以试试这个答案

1 修改你的功能

```
public string getimg(int indexRow)
{ 
} 
```

2 添加此选择代码

```
 if (Convert.ToInt32(myRow["ranking"]) == 1 
         && Convert.ToInt32(myRow["yourIndex"]) == indexRow ) //in order to select nice row
  {  
     return "price/con1.png"; 
  }

  return "price/con2.png"; 
```

3 在您的通话中，您必须在页面中打印您的索引行，以便选择

```
img style="width:55px;height:55px" alt=""  src="<%# getimg(1) %>" />  //getimg(1) print first row. 
```

4 获取索引

```
input type="hidden" runat="server" id="test" value="<%# DataBinder.Eval(Container.DataItem, "YourIndex") />%>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:36:09.860

尝试这个：

**代替 Rank()，尝试 row_number() 函数**

```
Select username ,weight,point , 
 ROW_NUMBER() over(order by point desc) as 'ranking'
 from karbar order by point desc 
```

. 因为如果两个用户具有相同的排名，他们都会获得排名为 1，而如果您使用 row_number()，他们将获得 1 和 2 排名

# iphone - 核心情节铿锵声错误

> ID：11773723
> 
> 赞同：1
> 
> 时间：2012-08-02T08:31:23.153
> 
> 标签：iphone, objective-c, ios, xcode, core-plot

> **可能重复：**
> [CorePlot 无法在 XCode 4.4 中构建](https://stackoverflow.com/questions/11772545/coreplot-failed-to-build-in-xcode-4-4)

几周前我的应用程序运行良好（从那以后就没有碰过它）。但是，我今天早上打开了 Xcode 并尝试在模拟器中运行它，现在我收到了这个错误：

```
CompileC /Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTScatterPlot.o Source/CPTScatterPlot.m normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/benthompson/Downloads/CorePlot_1.0/Source/framework
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Werror -Wmissing-field-initializers -Wmissing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wmissing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wsign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wnewline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=30103 -iquote /Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-generated-files.hmap -I/Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-own-target-headers.hmap -I/Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-all-target-headers.hmap -iquote /Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-project-headers.hmap -I/Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/DerivedSources/i386 -I/Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/DerivedSources -F/Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Products/Debug-iphonesimulator -lstdc++ -falign-loops=16 -MMD -MT dependencies -MF /Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTScatterPlot.d --serialize-diagnostics /Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTScatterPlot.dia -c /Users/benthompson/Downloads/CorePlot_1.0/Source/framework/Source/CPTScatterPlot.m -o /Users/benthompson/Library/Developer/Xcode/DerivedData/iPT-etaoibdncbnbvletceaiimhgxgkq/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTScatterPlot.o

clang: error: -Z-reserved-lib-stdc++: 'linker' input unused when '-c' is present
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我一直在论坛上搜寻答案，但找不到答案。有任何想法吗？

# php - 查询或PHP中来自mysql的列总数？

> ID：11773728
> 
> 赞同：0
> 
> 时间：2012-08-02T08:31:36.353
> 
> 标签：php, mysql

我的 php 页面上有一个表，其中填充了来自单个表的 MySQL 查询的数据

该表如下所示：

```
Location    Jan Feb Mar etc…    Total
Location1   5   13  7       25
Location2   10  10  6       26  
Location3   22  1   7       29
Etc… 
```

'Total' 由查询使用 Sum ie `SUM(IF(month = '1', 1,0)) AS 'jan', SUM(IF(month = '2', 1,0)) AS`feb计算得出`, SUM(IF(month = '3', 1,0))`

我想要的是每列的总数（一月、二月、三月等）

我可以在 PHP 中通过在提取值时添加值来做到这一点，但我可以在查询中执行此操作 - 这样做有优势吗？

提前感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:39:49.557

对我来说，这是一个奇怪的数据库布局，但我通常使用基于行的方法：

```
location   | month | total |
loc1       |   1   |  3    |
loc2       |   1   |  4    |
loc1       |   2   |  7    |
etc... 
```

这使得总计等更容易执行。

但是，鉴于您的结构，您可以继续做您正在做的事情，也可以使用一些技巧。如果您在 PHP 中使用它做更多的工作（除了总数），您可以轻松地`concat()`在 SQL 中执行 a 并获得一个准备好被`explode()`-ed 到数组中的预格式化字符串。从那里你可以使用 PHP 中所有美妙的数组函数来获取总数或任何你喜欢的东西。

编辑：Righto，这会有所不同。

如果您使用普通的基于行的方法来存储数据，您可以让数据库完成所有工作。如果您需要查询来获取各个月份和总数，您当然可以在 PHP 中执行此操作，但您也可以执行以下小技巧：

```
select
    month, // assuming 1-12 for example
    sum(someData)
from
    yourTable
where
    someCondition=1
group by
    month
union all
select
    13 as month, // assuming 1-12 for example
    sum(someData)
from
    yourTable
where
    someCondition=1
group by
    month 
```

例如，如果您的数据库具有大量空闲 CPU，但网络服务器正在苦苦挣扎，或者您有大量数据需要统计，这将非常方便。只需让数据库进行处理并将其作为您可以在 PHP 代码中识别的特定数字返回 - 1-12 个月是正常的，第 13 个月是总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:39:36.220

很难说，这取决于代码的其余部分。你对结果做了什么？只是输出它们？查询有多复杂？

在任何情况下，我都会`GROUP BY location, month ORDER BY month`在 PHP 中循环结果行来构建表。（如果某个位置缺少任何月份，则不会返回任何内容，因此请务必注意这一点。）

# android - 在自定义相机应用程序中旋转的照片

> ID：11773731
> 
> 赞同：1
> 
> 时间：2012-08-02T08:31:45.263
> 
> 标签：android, camera, rotation, photo

我的应用程序正在使用相机拍照。问题是，照片​​旋转了 90 度。该应用程序设计为纵向运行，我已设置

```
android:configChanges="orientation|screenSize" 
```

以避免方向改变。我以为我设法解决了

```
parameters.setRotation(90); 
```

但事实证明，它在不同的设备上有所不同（在联想 ThinkPad 平板电脑和一些智能手机上进行了测试）。我尝试阅读照片的 EXIF，但其中不包括方向。我知道有很多类似的帖子，但大多数都是关于默认相机应用程序的。有人可以解释一下这个问题是由什么引起的，我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:45:34.430

试试这个以获得你想要的图像

public static Bitmap createRotatedBitmap(Bitmap bm, float degree) {

位图位图=空；

如果（度！= 0）{

矩阵矩阵 = 新矩阵（）；

matrix.preRotate(度);

位图 = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),

```
bm.getHeight(), matrix, true); 
```

}

返回位图；

}

位图 = createRotatedBitmap(位图, 90);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:46:07.130

是的，所有设备的方向都不完全相同。它完全依赖于硬件，可以因设备而异。您无法修复它，只有一个选项允许用户在您的应用程序第一次启动后设置旋转获取基本旋转角度并将其保存到设置中，然后再提供您的功能。

# sencha-touch-2 - Sencha Touch 2 : 在 navigationView 的 navigationBar 中推送新视图的按钮

> ID：11773735
> 
> 赞同：0
> 
> 时间：2012-08-02T08:32:01.737
> 
> 标签：sencha-touch-2

我尝试在导航视图的导航栏中添加一个按钮，当我点击该按钮时可以推送一个新视图。我需要帮助，因为我不明白我该怎么做。我的按钮没问题，我可以在控制台中记录点击操作，但我无法推送新视图。我需要一个停靠在我的标签栏上的视图...实际上我想要的是向用户建议更改视图的可能性：使用按钮他可以切换视图：导航/列表到轮播（具有相同的数据来自店铺）。导航视图和我的结果列表一切正常，但我无法通过点击按钮添加轮播视图的可能性......

我的第一个问题是，这可能吗？如果是，那我该怎么做？

我的代码：

```
Ext.define("MyApp.view.Annuaire", {
extend: 'Ext.navigation.View',

xtype: 'annuairepanel',

requires: [
    'Ext.dataview.List',
    'Ext.data.proxy.JsonP',
    'Ext.data.Store'
],

config: {
    /*IMPORTANT : évite une erreur de clsReplace...*/
    autoDestroy: false,
    title: 'Annuaire',
    iconCls: 'address_book',
    defaultBackButtonText: 'Retour',

            navigationBar: {
    items: [
        {
            xtype: 'button',
            id: 'carousel-annuaire',
            iconCls: 'more',
            iconMask: true,
            align: 'right',
            listeners: {
                'tap': function() {
                        console.log('tap !');
                }
            }
        }
    ]
    },

    items: [
    {
        xtype: 'list',
        id: 'liste-annuaire',
        cls: 'x-liste-annuaire',
        itemTpl: [ 
                 '<div class="vignette-liste" style="background-image:url({_ann_www_pub});"></div>',
                 '<div class="titre-liste">{post_title}</div>',
                 '<div class="categories-liste">{categories}</div>'
                 ].join(''),
        title: 'Annuaire',
        grouped:true,
        indexBar:true,

    store: 'Annuaires',                                    
    }
    ]

}}); 
```

谢谢你的帮助

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:43:27.797

你不会混淆为什么使用 NavigationView 吗？它的用例是创建一个堆叠的面板池（Ext.Panel 和/或 Ext.form.Panel）并执行 navi.push(view)/navi.pop() 以轻松导航，例如。主从关系。

首先，它不打算将列表添加为 Navi 视图的直接子项。

好的做法是使用 Sencha **MVC**控制器。我建议您从阅读 Sencha 文档页面中的基本概念开始： [http](http://docs.sencha.com/touch/2-0/#!/guide/controllers) ://docs.sencha.com/touch/2-0/#!/guide/controllers ，[http ://docs.sencha.com/touch /2-0/#!/guide/views](http://docs.sencha.com/touch/2-0/#!/guide/views)和其他指南。

我并不是说有完美的入门资源，但有一些东西。如果您想更仔细地查看煎茶，请购买商业书籍。

*提示，永远不要买耶稣加西亚的书*

我更喜欢**Packt** Publishers 的问题。

干杯，奥列格

# javascript - Phonegap 应用程序 SQLite db 初始设置

> ID：11773737
> 
> 赞同：2
> 
> 时间：2012-08-02T08:32:22.513
> 
> 标签：javascript, android, ios, html, cordova

在首次执行时构建应用程序的数据库架构的最佳实践是什么？

换句话说，我试图找出的是：

SQLite 不支持以逗号分隔的查询作为一个语句批处理执行。如何替换它以使代码保持未来的证明？（我不认为自己将所有创建语句都按顺序链接在 tx.executeSQL("") 中，这会将我的代码变成一段可怕的 cr*p）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T01:32:18.890

在本机代码以及 Sencha/Phonegap 中，我所做的是使用我所指的 DatabaseHelper 类。在该类中，您可以看到数据库的版本：

```
public DataBaseHelper(Context context) {
    super(context, DB_NAME, null, 2);
    this.myContext = context;
}

public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (dbExist) {
        // do nothing - database already exist
         openDataBase();
            int cVersion = myDataBase.getVersion();
            if(cVersion != 2){
                onUpgrade(myDataBase, myDataBase.getVersion(), 2);}
            close();
    } ....}

    @Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        this.getReadableDatabase();
        try{
        db.execSQL("ADD SQL QUERY HERE TO ADD TABLE");
}
        catch(Exception e){}
    }

private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
            } catch (SQLiteException e) {
            // database does't exist yet.
            }
        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false;
    } 
```

虽然这很乏味，但它可以让您的数据库保持未来的证明，并且在运行时调用查询。这涵盖了您的两个需求。

我希望这有帮助 ：）

# php - 警告：move_uploaded_file

> ID：11773739
> 
> 赞同：0
> 
> 时间：2012-08-02T08:32:24.193
> 
> 标签：php, loops

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我又回来了，还在学习多重上传。好的，我在这里遇到了情况。我收到了 2 个警告：

> 警告：move_uploaded_file() 期望参数 1 为字符串，数组在第 32 行的 F:\wamp\www\dki\1\entry_fotos.php 中给出
> 
> 警告：move_uploaded_file() 期望参数 1 为字符串，数组在第 45 行的 F:\wamp\www\dki\1\entry_fotos.php 中给出

这是代码

```
 $ne_photo_images = $_FILES['ne_photo_image']['name'];
   $fe_photo_images = $_FILES['fe_photo_image']['name'];
   $tmp_file = $_FILES['ne_photo_image']['tmp_name'];
   $tmp_file1 = $_FILES['fe_photo_image']['tmp_name'];

      if(!is_array($ne_photo_images)) {
         $ne_photo_images = array();

    }

  if(!is_array($tmp_file)) {
        $tmp_file = array();
     }
       if(! move_uploaded_file($tmp_file, 'image/' . $ne_photo_images))

 if(!is_array($fe_photo_images)) {
        $fe_photo_images = array();
    }
 if(!is_array($tmp_file1)) {
        $tmp_file1 = array();
    }
    if(! move_uploaded_file($tmp_file1, 'image/' . $fe_photo_images)) 
```

我之前从我的问题反馈中得到了这个查询代码

```
 $sql = "INSERT INTO photo(`photo_id`, `ne_photo_image`, `fe_photo_image`, `hop_id`,    `title`) VALUES";
   for($i = 0, $l = sizeof($titles) ; $i < $l ; $i++)
   {
      //adding row datas
      $sql .= " (null, 
                 '".$ne_photo_images [$i]."', 
                 '".$fe_photo_images [$i]."', 
                 '".$hopid."', 
                 '".$titles[$i]."')";
      if($i < $l - 1)
         $sql .= ",";
   }

   if(mysql_query($sql))
   {         
   } 
```

这是我的表格：

```
<form method="post" enctype="multipart/form-data">
    <table border="0"cellpadding="0" cellspacing="0" width= "100%">
        <tr>
            <td>Hop Name :<?echo "$data[hop_name]"?>
                <input type='hidden' name='photo_hop_id' value='<?echo"$data[hop_id]"?>'>
            </td>
        </tr>
                <table border="0"cellpadding="0" cellspacing="0" width= "100%">
    <tr>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    Near End Site Name : <?echo "$data[ne_site_name]"?>
                        </br>
                    Near End Site Id : <?echo "$data[ne_site_code]"?>
                </td>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    Far End Site Name : <?echo "$data[fe_site_name]"?>
                        </br>
                    Far End Site Id : <?echo "$data[fe_site_code]"?>
                </td>
    </tr>   
    <tr>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <?  $pm1= mysql_query("SELECT photo_name FROM photo_name WHERE photo_name_id = 1");
                        $dpm1 = mysql_fetch_array ($pm1);echo"$dpm1[0]"?> 
                    <input type='hidden' name='photo_name_id[]' value='<?echo"$dpm1[0]"?>'> :  
                    <input type="file" name="ne_photo_image[]">
                </td>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <?echo "$dpm1[0]"?> : <input type="file" name="fe_photo_image[]">
                </td>
    </tr>   

</table>

    </table>
    <input type="submit" value="tambah" />
</form> 
```

我希望这更容易发现。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:07:24.357

这是最终的代码

```
 $hopid = $_POST['photo_hop_id'];
$titles = $_POST['photo_name_id'];

$ne_photo_images = $_FILES[ne_photo_image][name];
$fe_photo_images = $_FILES[fe_photo_image][name];

while(list($key,$value) = each($_FILES['ne_photo_image']['name']))
    {
        if(!empty($value))
        {
            $filename = $value;
                $filename=str_replace(" ","_",$filename);// Add _ inplace of blank space in file name, you can remove this line

                $add = "image/$filename";
                   //echo $_FILES['images']['type'][$key];
             // echo "<br>";
                copy($_FILES['ne_photo_image']['tmp_name'][$key], $add);
                chmod("$add",0777);

        }
    }
         while(list($key,$value) = each($_FILES['fe_photo_image']['name']))
    {
        if(!empty($value))
        {
            $filename = $value;
                $filename=str_replace(" ","_",$filename);// Add _ inplace of blank space in file name, you can remove this line

                $add = "image/$filename";
                   //echo $_FILES['images']['type'][$key];
             // echo "<br>";
                copy($_FILES['fe_photo_image']['tmp_name'][$key], $add);
                chmod("$add",0777);

        }
    }

              $sql = "INSERT INTO photo(`photo_id`, `ne_photo_image`, `fe_photo_image`, `hop_id`,    `title`) VALUES";
   for($i = 0, $l = sizeof($titles) ; $i < $l ; $i++)
   {
      //adding row datas
      $sql .= " (null, 
                 '".$ne_photo_images [$i]."', 
                 '".$fe_photo_images [$i]."', 
                 '".$hopid."', 
                 '".$titles[$i]."')";
      if($i < $l - 1)
         $sql .= ",";
   }

   if(mysql_query($sql))
   {         
   }

   else 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:41:39.477

这导致你的问题......

```
if(!is_array($ne_photo_images)) { $ne_photo_images = array(); }
if(!is_array($tmp_file)) { $tmp_file = array(); } 
```

如果您的 $ne_photo_images 不是一个数组，您可以将其更改为一个空数组，但您的 $tmp_file 也是如此。然后将 $tmp_file 作为参数提供给 move_uploaded_file 和 $ne_photo_images，它们只移动一个文件。不是文件数组

`enter code here`move_uploaded_file($tmp_file, 'image/' . $ne_photo_images))

你应该做这样的事情

```
$ne_photo_images[] = $_FILES['ne_photo_image']['name'];
$ne_photo_images[] = $_FILES['fe_photo_image']['name'];
$tmp_file[] = $_FILES['ne_photo_image']['tmp_name'];
$tmp_file[] = $_FILES['fe_photo_image']['tmp_name']; 
```

然后做类似的事情

```
$allGood = true;
for($i = 0; $i < count($ne_photo_images); $i++)
{
  if (!move_uploaded_file($tmp_file[$i], 'image/' . $ne_photo_images[$i]))
  {
    $allGood = false;
  }
}

if (!$allGood) { die("Not all files where moved."); } 
```

**更通用的解决方案**

```
foreach ($_FILES as $file)
{
  if (move_uploaded_files($file['tmp_name'], 'image/' . $file['name']))
  {
    // also insert the file into the database here

  }
} 
```

# python - 从字符串列表中返回匹配字符串列表中的随机项

> ID：11773741
> 
> 赞同：0
> 
> 时间：2012-08-02T08:32:43.023
> 
> 标签：python, list, random, string-matching

我正在编写一个函数来返回目录中的随机文件，而且 - 我希望能够匹配文件名中的子字符串。

```
def get_rand_file(folder, match=None):
    if match == None:
        return random.choice(os.listdir(folder))
    else:
        matching = []
        for s in os.listdir(folder):
            if match in s:
                matching.append(s)
        return random.choice(matching) 
```

这段代码可以工作，但我正在处理大量文件，这段代码需要一段时间，我尝试使用列表理解和映射来完成它，但我无法让它工作。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:37:14.643

```
def get_rand_file(folder, match=None):
   if match == None:
       return random.choice(os.listdir(folder))
   else:
       return random.choice([s for s in os.listdir(folder) if match in s]) 
```

关于列表理解的文档：

[http://docs.python.org/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

# file-io - 如何将文件从安装程序复制到 NSIS 中的硬盘驱动器，但前提是它们不存在或比现有文件更新？

> ID：11773745
> 
> 赞同：6
> 
> 时间：2012-08-02T08:32:52.220
> 
> 标签：file-io, nsis

目前我正在使用：

```
SetOutPath "$INSTDIR\folder\subfolder"
File /r ..\Output\*.* 
```

问题是重新安装时所有文件都会被覆盖。

**问题：**

1.  仅当目标目录中不存在文件时，如何从安装程序复制文件？

    和

2.  如何覆盖目标目录中比安装程序中的文件更旧的文件？

**编辑：**

我找到了这个宏： http: [//nsis.sourceforge.net/MoveFileFolder](http://nsis.sourceforge.net/MoveFileFolder)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:43:47.517

我认为最好的解决方案是使用`SetOverwrite`标志：

[http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.2.8](http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.2.8)

该标志可以在一个部分内动态更改。

所以具体回答这个问题：

```
SetOverwrite off       # Only copy if file does not exist
File /r ..\Output\*.*

SetOverwrite ifnewer   # Only overwrite if installers' file is newer
File /r ..\Output\*.* 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T06:05:56.690

使用**IfFileExists**和**SetOverwrite**的组合：

```
Section "Copy newer files"
SetOverwrite ifnewer 
; Set flag to owerwrite files only if they are newer than files in output dir

IfFileExists $INSTDIR\program.exe FileExists FileDoesNotExist

FileDoesNotExist:
; Copy file to output directory

SetOutPath "$INSTDIR"
File "program.exe" ; Flag from SetOverwrite is applied here

FileExists:
; File exists - do nothing 

; Continue ...
SectionEnd 
```

# linq-to-xml - 使用 C# 和 XDocument，如何将 xsi 属性添加到某些 Xml 中？

> ID：11773747
> 
> 赞同：2
> 
> 时间：2012-08-02T08:32:54.427
> 
> 标签：linq-to-xml, linq-to-xsd

我需要将 Linq 修复为 Xsd，以便它正确处理全局抽象复杂类型的元素数组，其中有多个派生的非抽象类型。它不会添加 xsi 命名空间或使用其派生类型标记元素。但首先我需要学习如何执行以下操作：

使用 C# 和 XDocument，如何将 xsi 命名空间和属性添加到以下 xml？

```
<?xml version="1.0" encoding="utf-8"?>
<Form>
  <References>
    <ReferenceID>0</ReferenceID>
    <ReferenceType>string</ReferenceType>
    <PermitNumber>string</PermitNumber>
  </References>
  <References>
    <ReferenceID>0</ReferenceID>
    <ReferenceType>string</ReferenceType>
    <CaseNumber>string</CaseNumber>
  </References>
</Form> 
```

这就是我所拥有的，但这就是我需要的：

```
<?xml version="1.0" encoding="UTF-8"?>
<Form xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <References xsi:type="Permit">
        <ReferenceID>0</ReferenceID>
        <ReferenceType>String</ReferenceType>
        <PermitNumber>String</PermitNumber>
    </References>
    <References xsi:type="Case">
        <ReferenceID>0</ReferenceID>
        <ReferenceType>String</ReferenceType>
        <CaseNumber>String</CaseNumber>
    </References>
</Form> 
```

谢谢，

詹姆士。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:00:36.293

只需像这样使用 XAttribute：

（“original.xml”文件包含您的第一个 xml）

```
var xml = XDocument.Load("original.xml");

XNamespace ns = "http://www.w3.org/2001/XMLSchema-instance";
var formNode = xml.Element("Form");
formNode.Add(new XAttribute(XNamespace.Xmlns + "xsi", ns));

var refs = formNode.Elements("References").ToList();
refs[0].Add(new XAttribute(ns + "type", "Permit"));
refs[1].Add(new XAttribute(ns + "type", "Case"));

string target = xml.ToString(); 
```

# java - 网络球。获取线程池ID

> ID：11773748
> 
> 赞同：2
> 
> 时间：2012-08-02T08:33:00.807
> 
> 标签：java, websphere, websphere-7

我需要使用以下模式构建字符串：

```
<Server>;<Node>;<Cell>;<Version>;<MessageListenerThreadPool-ID>;<ORBThreadPool-
ID>;<WebcontainerThreadPool-ID>;<TCPChannelsThreadPool-ID> 
```

所以我需要写几个标准线程池的ID，但是我找不到任何关于线程池ID的信息。我只找到了线程池名称。可能有人知道我在哪里可以找到有关线程池 ID 的信息？

谢谢！

PS我正在使用Websphere 7.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:11:12.507

似乎没有与 JMX 对象关联的线程池 ID；只是一个线程池名称。您可以编写类似于下面的脚本来列出线程池及其属性。

```
wsadmin>pools = AdminConfig.list('ThreadPool').split()
wsadmin>for pool in pools:
wsadmin>        print pool
wsadmin>        print
wsadmin>
Default(cells/cluentiusNode12Cell/nodes/node2/server/provider1|server.xml#ThreadPool_1183121908658)

HAManagerService.Pool(cells/cluentiusNode12Cell/nodes/node2/servers/provider1|hamanagerservice.xml#ThreadPool_1080665401693)

Message.Listener.Pool(cells/cluentiusNode12Cell/nodes/node2/servers/provider1|server.xml#ThreadPool_1183121908663)

ORB.thread.pool(cells/cluentiusNode12Cell/nodes/node2/servers/provider1|server.xml#ThreadPool_1183121908656)

... snip ...

WMQJCAResourceAdapter(cells/cluentiusNode12Cell/nodes/node2/servers/provider1|server.xml#ThreadPool_1332907301375)

WebContainer(cells/cluentiusNode12Cell/nodes/node2/servers/provider1|server.xml#ThreadPool_1183121908657)

server.startup(cells/cluentiusNode12Cell/nodes/node2/servers/provider1|server.xml#ThreadPool_1183121908662)

wsadmin>print AdminConfig.show(pools[9])
[customProperties []]
[inactivityTimeout 60000]
[isGrowable false]
[maximumSize 10]
[minimumSize 5]
[name WebContainer]
wsadmin> 
```

show() 命令显示您确实可以使用的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:23:10.510

使用 JMX 获取管理对象（JSR-77：J2EETM 管理）。从 Websphere 获取它们的示例在[http://www.ibm.com/developerworks/websphere/techjournal/0402_qiao/0402_qiao.html](http://www.ibm.com/developerworks/websphere/techjournal/0402_qiao/0402_qiao.html)中给出。

[此 API](http://publib.boulder.ibm.com/infocenter/dmndhelp/v7r0mx/topic/com.ibm.websphere.wbpmcore.javadoc.doc/web/apidocs/com/ibm/websphere/management/package-summary.html)将帮助您访问 JXM。

首先查找对象是否可以通过[管理控制台](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/rcon_command_assist.html)访问。然后查看您将通过 JMX API 调用从服务器接收到的对象列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:16:37.500

我找到了我的问题的答案。

线程池 ID 可以从*Threadpool*节点下的**JConsole获得。**有许多线程池，并且列出的线程池 Mbean 具有**objectName**属性，如下所示：

 ***> WebSphere:name=ORB.thread.pool,process=server1,platform=dynamicproxy,.......server.xml#ThreadPool_1183122130078,cell=someCell,spec=1.0

在这种情况下，线程池 ID 为**1183122130078**。

谢谢大家。***

# routes - 如何创建有效路由（api 端点）的完整列表？

> ID：11773749
> 
> 赞同：2
> 
> 时间：2012-08-02T08:33:03.827
> 
> 标签：routes, lithium, custom-routes

我所做的是使用 Library::locate 来查找控制器，并根据白名单属性对它们调用 Router::match。我还有一个许多模型使用的共享控制器，我在带有白名单的模型上使用定位。这是一种工作，但我在尝试反向路由并获得“未找到参数匹配”异常时遇到了麻烦。比如下面的例子。所以如果你对大的没有一个好的答案，你知道为什么这个路由匹配失败吗？

```
Router::connect(
    '/api/3/vouchers/{:id}/{:action:(handout|generate|give)}',
    array('http:method' => 'POST', 'controller' => 'Vouchers', 'type' => 'json')
);

$result = Router::match(array(
    'controller'=>'Vouchers',
    'action'=>'generate',
    'id' => '{:id}', // *
    'http:method' => 'POST',
    'type'=>'json'
)); 
```

*：我使用 {:id} 作为 id 值的原因是我希望显示路线，而不是创建链接。

# javascript - jquery计算的列表项未正确显示

> ID：11773750
> 
> 赞同：1
> 
> 时间：2012-08-02T08:33:07.603
> 
> 标签：javascript, jquery

我有一些 Jquery 将计算 UL 的宽度，然后将其除以列表项的数量，给它们一个值，以便菜单适合全宽。

问题是我的菜单项没有完全显示，因为代码正在计算列表项而不是 A 中的字符串长度。

墨盒/气瓶未正确显示，Garden & DIY 被包裹到下一行。

**HTML：**

```
<div class="container">
 <div id="new-menu-lower">
  <ul class="menuul">
   <li class="menuli">
       <a href="/test.aspx">Barbecues</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Stoves</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Lanterns</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Cartridges/Cylinders</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Coolers</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Boats</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Airbeds</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Garden & DIY</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Toilets</a>
   </li>
  </ul>
 </div>
</div> 
```

**查询：**

```
//set the menu li sizes once everything has loaded.
$(document).ready(function() {
    $('div#new-menu-lower ul li').css('width', ($('div#new-menu-lower ul').width() / $('div#new-menu-lower ul li').length));
    $(function() {
        var menuWidth = $('div#new-menu-lower ul').width();
        var listItems = $('div#new-menu-lower > ul > li').length;
        alert('The UL is calculated at: ' + menuWidth + 'px');
        var itemWidth = Math.floor(menuWidth * (1 / listItems)) - 20;
        $('div#new-menu-lower ul li').css('width', itemWidth);
    });
}); 
```

**CSS：**

```
div.container
{
    clear: both;
    margin: 10px auto 0;
    width:960px;
    border:1px solid red;
    height:700px;
}

div#new-menu-lower {
    border-radius: 3px 3px 3px 3px;
    border-top: 0 solid lightgrey;
    margin: 0 8px 10px;
}

#new-menu-lower ul {
    border: 1px solid orange;
    display: block;
    height: 27px;
}

#new-menu-lower ul li:first-child {
    border-left: 0 solid lightgrey !important;
    border-radius: 7px 0 0 7px;
}

#new-menu-lower ul li {
    background-image: url("http://i45.tinypic.com/16if95z.png");
    background-repeat: repeat;
    border-right: 0 solid lightgrey !important;
    float: left;
    height: 27px;
    padding-left: ;
    padding-right:;
    text-align: center;
    width: 168px;
    margin-left:1px;
} 
```

**演示：http:** [//jsfiddle.net/rM9MW/45/](http://jsfiddle.net/rM9MW/45/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:46:37.737

您从元素宽度中减去 20 像素，但元素的边距和填充`LI`为零。如果你删除这 20px，你应该考虑从每个元素中减去 1px 以包括边框宽度。

换句话说，改变这个：

```
var itemWidth = Math.floor(menuWidth * (1 / listItems)) - 20; 
```

对此：

```
var itemWidth = Math.floor(menuWidth * (1 / listItems)) - 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:51:32.993

改变

```
var itemWidth = Math.floor(menuWidth * (1 / listItems)) - 20; 
```

至

```
var itemWidth = Math.floor(menuWidth * (1 / listItems)) - 1; 
```

和

```
 </li>
      <li class="menuli">
       <a href="/test.aspx">Garden & DIY</a>
   </li> 
```

至

```
 </li>
      <li class="menuli">
       <a href="/test.aspx">Garden&nbsp;&&nbsp;DIY</a>
   </li> 
```

[更新演示](http://jsfiddle.net/rM9MW/48/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:52:26.737

我认为您可以使用更简单的解决方案。看看我为你创建的这个[jsfiddle 。](http://jsfiddle.net/HHHDW/1/)

您不需要使用 jquery，而只需要使用 css。

# linux - iret 错误：一般保护故障 fffc

> ID：11773752
> 
> 赞同：0
> 
> 时间：2012-08-02T08:33:23.543
> 
> 标签：linux, assembly, linux-kernel

我有一个在内核（2.6.30 x86_64）模式（r0）下运行的示例代码，试图模拟 iret。我在英特尔手册的指南下推送变量。但它在 iret 指令的 pos 中出现运行时错误：

> 一般保护故障：fffc[#] SMP

```
asm volatile(
    "mov %%ss,%%ax \n\t"
    "push %%rax \n\t"/*ss*/
    "push %%rsp \n\t"/*rsp*/
    "pushfq \n\t"/*rflags*/
    "mov %%cs,%%ax \n\t"
    "push %%rax \n\t"/*cs*/
    "mov $._restart_code,%%rax \n\t"
    "push %%rax \n\t"/*rip*/
    "iret \n\t"/*here is the fault rip!!!!!!*/
    "._restart_code:"
    "nop" :); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:52:11.673

错误是rsp在推送后发生了变化。

```
asm volatile(
    "mov %%ss,%%ax \n\t"
    "push %%rax \n\t"/*ss*/
    "push %%rsp \n\t"/*rsp ##########error here!!!!!!! */ 
    "pushfq \n\t"/*rflags*/
    "mov %%cs,%%ax \n\t"
    "push %%rax \n\t"/*cs*/
    "mov $._restart_code,%%rax \n\t"
    "push %%rax \n\t"/*rip*/
    "iret \n\t"/*###iretq should be used under 64bit mode*/
    "._restart_code:"
    "nop" :); 
```

所以，在所有推送指令之前保存 rsp。正确的代码是：

```
asm volatile(
        "mov %%rsp,%%rbx \n\t"
        "mov %%ss,%%ax \n\t"
        "push %%rax \n\t"/*ss*/
        "push %%rbx \n\t"/*rsp*/ 
        "pushfq \n\t"/*rflags*/
        "mov %%cs,%%ax \n\t"
        "push %%rax \n\t"/*cs*/
        "mov $._restart_code,%%rax \n\t"
        "push %%rax \n\t"/*rip*/
        "iretq \n\t"
        "._restart_code:"
        "nop" :); 
```

谢谢！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:20:40.827

我不确定它是否会解决您的问题，但这里有一些注意事项：

```
"mov %%cs,%%ax \n\t"
"push %%rax \n\t"/*cs*/ 
```

您正在更新 EAX 的低位字节，因此 RAX 的高位字节可能不同于 0（不应该）。

```
"mov $._restart_code,%%rax \n\t" 
```

同样在这里，您应该断言它`$._restart_code`是规范形式。

```
"mov %%ss,%%ax \n\t"
"push %%rax \n\t"/*ss*/
"push %%rsp \n\t"/*rsp*/ 
```

没用，因为您返回到相同的特权级别。

# python - 使用 python 装饰器自动替换函数参数默认值？

> ID：11773755
> 
> 赞同：8
> 
> 时间：2012-08-02T08:33:34.033
> 
> 标签：python, function, arguments, decorator

实际上标题并不能完全反映我想问的问题。我的目的是这样的：我正在使用 matplotlib 编写一些绘图函数。我有一系列用于不同绘图目的的功能。比如 line_plot() 用于线条， bar_plot() 用于条形等，例如：

```
import matplotlib.pyplot as plt
def line_plot(axes=None,x=None,y=None):
    if axes==None:
        fig=plt.figure()
        axes=fig.add_subplot(111)
    else:
        pass
    axes.plot(x,y)

def bar_plot(axes=None,x=None,y=None):
    if axes==None:
        fig=plt.figure()
        axes=fig.add_subplot(111)
    else:
        pass
    axes.bar(left=x,height=y) 
```

然而问题是，对于每个定义的函数，我必须重复这部分代码：

```
 if axes==None:
        fig=plt.figure()
        axes=fig.add_subplot(111)
    else:
        pass 
```

有没有办法像使用装饰器一样，我可以在定义绘图函数之前应用它，它会自动执行重复的代码部分？因此我不必每次都重复它们。

一种可能的选择是定义这样的函数：

```
def check_axes(axes):
    if axes==None:
        fig=plt.figure()
        axes=fig.add_subplot(111)
        return axes
    else:
        return axes 
```

然后示例将如下所示：

```
import matplotlib.pyplot as plt    
def line_plot(axes=None,x=None,y=None):
    axes=check_axes(axes)
    axes.plot(x,y)

def bar_plot(axes=None,x=None,y=None):
    axes=check_axes(axes)
    axes.bar(left=x,height=y) 
```

但是有更好/干净/更蟒蛇的方式吗？我想我可以使用装饰器，但没有弄清楚。有人可以给出一些想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T12:17:40.163

以下是使用装饰器的方法：

```
import matplotlib.pyplot as plt    

def check_axes(plot_fn):
    def _check_axes_wrapped_plot_fn(axes=None, x=None, y=None):
        if not axes:
            fig = plt.figure()
            axes = fig.add_subplot(111)
            return plot_fn(axes, x, y)
        else:
            return plot_fn(axes, x, y)
    return _check_axes_wrapped_plot_fn

@check_axes
def line_plot(axes, x=None, y=None):
    axes.plot(x, y)

@check_axes
def bar_plot(axes, x=None, y=None):
    axes.bar(left=x, height=y) 
```

它是如何工作的：`@check_axes`语法重新定义了装饰函数的名称，例如`line_plot`，它是一个由装饰器创建的新函数，即`_check_axes_wrapped_plot_fn`. 这个“包装”函数处理`axes`检查逻辑，然后调用原始绘图函数。

如果您希望`check_axes`能够装饰任何将 a`axes`作为其第一个参数的绘图函数，而不仅仅是那些也仅接受`x`和`y`参数的绘图函数，您可以使用 Python 的便捷[`*`](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)语法来处理任意参数列表：

```
def check_axes(plot_fn):
    def _check_axes_wrapped_plot_fn(axes=None, *args):
        if not axes:
            fig = plt.figure()
            axes = fig.add_subplot(111)
            return plot_fn(axes, *args)  # pass all args after axes
        else:
            return plot_fn(axes, *args)  # pass all args after axes
    return _check_axes_wrapped_plot_fn 
```

现在，这是否是“更好/更干净/更 Pythonic”可能是一个争论的问题，并且取决于更大的背景。

顺便说一句，本着“更加 Pythonic”的精神，我重新格式化了您的代码以更接近[PEP8](http://www.python.org/dev/peps/pep-0008/)样式指南。注意参数列表中逗号后面的空格、`=`赋值运算符周围的空格（但在`=`用于函数关键字参数时不存在），以及说`not axes`而不是`axes == None`.

# php - 无法添加 cookie，标头已发送。cron作业出错，但在浏览器中加载时没有

> ID：11773759
> 
> 赞同：0
> 
> 时间：2012-08-02T08:33:39.757
> 
> 标签：php, cron, cpanel, vbulletin

我正在运行一个 cron 作业：

```
cd /home/user/public_html/index; php -f /home/user/public_html/index/stream-cron.php 
```

当此文件通过 cron 作业运行时，输出如下：

```
Unable to add cookies, header already sent.<br />
File: <br />
Line: 0<br /> 
```

但是，如果我去这个文件并从我的浏览器运行它，它工作正常。有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:37:41.327

确保在 cookie 处理之前绝对没有输出任何内容，没有文本，没有
，什么都没有。如果可能的话，发布一些 stream-cron.php 的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:26:20.277

当包括外部来源时，有些人正在发送 cookie。cron 作业无法接受 cookie，因此发生了此错误。

# php - CakePHP 中的存储过程错误

> ID：11773760
> 
> 赞同：1
> 
> 时间：2012-08-02T08:33:43.763
> 
> 标签：php, mysql, stored-procedures, mysqli, cakephp-2.1

知道如何在 CakePHP 中调用存储过程吗？

```
$results = $this->query('call p2');
echo $results; 
```

我不断收到此错误：

```
Error: SQLSTATE[HY000]: General error: 2014 Cannot execute queries while other unbuffered 
queries are active. Consider using PDOStatement::fetchAll(). Alternatively, if your code 
is only ever going to run against mysql, you may enable query buffering by setting the 
PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:26:31.313

我已在事务中完成此操作，以确保在其间不会调用该过程的其他实例：

```
$this->begin();
$this->query("CALL procedure();");
$result = $this->query("SELECT something");
$this->commit(); 
```

您的问题可能是您正在调用：

```
$this->query('call p2'); 
```

你应该在哪里打电话：

```
$this->query('call p2()'); 
```

因为过程很像函数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-07T15:16:01.620

你应该打开和关闭括号

```
$results = $this->query('call p2()');
echo $results; 
```

# c# - 使用 Sync Framework 2.1 将 SQL Server 2008 和 SQL Server 2008 Express 与 WCF 同步

> ID：11773761
> 
> 赞同：1
> 
> 时间：2012-08-02T08:33:45.533
> 
> 标签：c#, synchronization, microsoft-sync-framework

我们构建了一个应用程序，它将中央 SQL Server 2008 数据库与多个客户端 SQL Server 2008 Express 数据库同步。

尽管此应用程序是成功的，但我们希望确保数据传输是安全的。为了做到这一点，我们正在尝试重新编写我们的应用程序以使用使用 WCF 实现的 Web 服务进行同步。

下一篇文章中的示例看起来非常好，我已经设法重写了我们的大部分应用程序。 [http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208#content](http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208#content)

但是，在我们的应用程序中，我们需要将 ApplyChangeFailed 事件处理程序分配给本地提供者和远程提供者。（请参见下面的示例代码）

((SqlSyncProvider)_syncOrchestrator.LocalProvider).ApplyChangeFailed += new EventHandler(SynchronisationWizardClient_ApplyChangeFailed);

((SqlSyncProviderProxy)_syncOrchestrator.RemoteProvider).ApplyChangeFailed += new EventHandler(SynchronisationWizardServer_ApplyChangeFailed);

由于远程提供程序现在是 SqlSyncProviderProxy 对象，因此 ApplyChangeFailed 事件不可用。

文章中的示例没有使用 ApplyChangeFailed 事件，因此在任何示例代码中都没有引用它。我假设我们需要修改一些 WCF 协定和类，以便能够在我们的 SqlSyncProviderProxy 上设置 ApplyChangeFailed。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:33:38.827

您确定希望 WCF 服务在每次引发 ApplyChangeFailed 事件时回调您的客户端吗？

WCF 服务具有对 SqlSyncProvider 的引用，您可以在服务端处理 ApplyChangeFailed 事件，而无需将其发送回客户端。如果需要解决冲突，可以在服务端解决。

# android - 如何使用tomcat服务器验证android应用程序？

> ID：11773762
> 
> 赞同：0
> 
> 时间：2012-08-02T08:33:46.127
> 
> 标签：android, android-layout, tomcat

我正在开发一个应用程序，我想将 HTTP 帖子发送到我的 Tomcat 服务器。在这篇文章中，我想发送用户 ID 和密码，在成功通过 TomCat 身份验证后，它将响应我的应用程序，我希望下一页显示在我的模拟器中？这方面的任何程序或框架......我必须使用。

我正在发布代码以发布请求并获得响应。

```
public class Register extends Activity
{
public static final String PREFS_NAME = "LoginPrefs";
public static final String USER_NAME = "USER";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);
    TextView txt = (TextView) findViewById(R.id.textView1);
    txt.setText(getPage());
}

private String getPage() 
{
    String str = "***";

    try
    {
        HttpClient hc = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://www.yahoo.com");

        HttpResponse rp = hc.execute(post);

        if(rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK)
        {
            str = EntityUtils.toString(rp.getEntity());
        }
    }catch(IOException e){
        e.printStackTrace();
    }  

    return str;
}

} 
```

现在你帮助我如何通过请求发送数据，如果数据库中存在数据，服务器将检查传入的数据，这将确保用户是有效用户并根据该响应发送一些响应，我将导航到下一页。将如何做到这一点？请帮忙，因为我是java和android的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:40:49.603

[在此处查看](http://androidforums.com/application-development/9261-doing-http-request-android.html)来自 google 搜索的第一个响应

# dart - 从 Uri 中提取参数/值对作为 Map

> ID：11773763
> 
> 赞同：6
> 
> 时间：2012-08-02T08:33:50.643
> 
> 标签：dart

如何使用 Dart 获取 URL/URI 的参数/值对？*不幸的是，目前在Uri*库或*Location*接口中都没有针对此问题的内置功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-23T09:15:39.773

您可以使用[Uri.splitQueryString](https://api.dartlang.org/docs/channels/stable/latest/dart_core/Uri.html#splitQueryString)将查询拆分为地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-16T21:39:06.307

现在有一个返回 Map 的 Uri 的[queryParameters](http://www.dartdocs.org/documentation/route_hierarchical/0.6.1+1/index.html#dart:core.Uri@id_queryParameters)成员

```
Uri u = Uri.parse("http://app.org/main?foo=bar&baz=bat");
Map<String,String> qp = u.queryParameters;
print(qp);

// {foo: bar, baz: bat} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T08:21:55.617

```
 // url=http://127.0.0.1:3030/path/Sandbox.html?paramA=1&parmB=2#myhash
void main() {
   String querystring = window.location.search.replaceFirst("?", "");
   List<String> list = querystring.split("&").forEach((e) => e.split("="));
   print(list); // [[paramA, 1], [parmB, 2]]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:33:50.643

```
 Map<String, String> getUriParams(String uriSearch) {
    if (uriSearch != '') {
      final List<String> paramValuePairs = uriSearch.substring(1).split('&');

      var paramMapping = new HashMap<String, String>();
      paramValuePairs.forEach((e) {
        if (e.contains('=')) {
          final paramValue = e.split('=');
          paramMapping[paramValue[0]] = paramValue[1];
        } else {
          paramMapping[e] = '';
        }
      });
      return paramMapping;
    }
  }

// Uri: http://localhost:8080/incubator/main.html?param=value&param1&param2=value2&param3
  final uriSearch = window.location.search;
  final paramMapping = getUriParams(uriSearch); 
```

# javascript - 即兴 - 提示不会关闭

> ID：11773766
> 
> 赞同：0
> 
> 时间：2012-08-02T08:33:53.430
> 
> 标签：javascript, function, impromptu

我在我的 javascript 中尝试 Impromptu 并且由于某种原因它会很好地加载，我在工作中应用的所有功能但调用关闭或使用右上角的“x”不会关闭提示。覆盖层的不透明度略微变亮，但提示是模型，我可以继续与它交互，但不能与底层页面交互。

我已经回到基础，我正在使用这个功能；

```
$Kurve.prototype.tooltip = function(){
    $.prompt('Hello World',{ opacity: 0.1 });
} 
```

它被称为 JQPlot 图表的一部分；

```
$l_jqPlotArg.highlighter.tooltipContentEditor = $.jqplot.eventListenerHooks.push(['jqplotClick', this.tooltip]); 
```

任何帮助表示赞赏，如果您需要更多信息，我会尽力提供它......另外，如果您对可以处理 JSON 的覆盖提示（具有良好外观）有更好的建议，请不要犹豫告诉我！

我问过

谢谢 C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:05:37.657

好的，我想通了……点击监听器很好，但我不得不将处理程序移动到图表函数内的 var 中。一切都很好 ：）

# ruby - 以编程方式搜索雅虎

> ID：11773767
> 
> 赞同：0
> 
> 时间：2012-08-02T08:33:56.793
> 
> 标签：ruby, web-scraping

我正在抓取`yahoo`搜索结果，但我得到了`502 => Net::HTTPBadGateway`. 究竟是什么导致了错误？这是否意味着`yahoo`检测到我的机器人并禁止了我的 ip？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:33:54.820

将 Response 对象打印到您的控制台（我为此推荐 awesome_print），

但是....搜索引擎对数据包形状、节流或阻止爬虫完全是例行公事。我不知道雅虎是否这样做，但谷歌肯定会

你可以考虑[http://commoncrawl.org](http://commoncrawl.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:35:05.330

是的，他们正在阻止您的机器人，所有大型搜索引擎都有防御措施来防止抓取结果页面。然而，谷歌和必应都提供了一个免费的搜索 API，你可以用它来喂你的机器人。

# wso2 - WSO2 消息代理 JNDI 使用

> ID：11773768
> 
> 赞同：0
> 
> 时间：2012-08-02T08:33:58.180
> 
> 标签：wso2, wso2esb

我正在尝试使用 Message Broker，但我有一些问题。

1 我在消息代理上创建了一个队列，我可以通过 ESB 上的代理服务向消息代理添加新消息。但是，当我尝试在应用程序服务器上侦听此队列时，我无法在我的代码上获取队列连接工厂。如果我关注这个博客[http://pzf.fremantle.org/2011/04/introduction-to-wso2-message-broker_05.html](http://pzf.fremantle.org/2011/04/introduction-to-wso2-message-broker_05.html)我可以从我的队列中获取消息。但我认为我不应该在我的代码上创建与消息代理的连接，我应该从应用程序服务器获取连接。所以我取消了 JMSListener 属性的注释，你可以在下面看到它。如果我尝试使用此代码从此处获取队列

```
Context initCtx = new InitialContext();
initCtx.lookup("myQueueConnectionFactory"); 
```

我收到**javax.naming.NameNotFoundException: Name myQueueConnectionFactory is not bound in this Context 异常**。您对从应用程序服务器获取连接有什么建议吗？

```
 <parameter locked="false" name="myTopicConnectionFactory">
        <parameter locked="false" name="java.naming.factory.initial">org.apache.qpid.jndi.PropertiesFileInitialContextFactory</parameter>
        <parameter locked="false" name="java.naming.provider.url">repository/conf/jndi.properties</parameter>
        <parameter locked="false" name="transport.jms.ConnectionFactoryJNDIName">TopicConnectionFactory</parameter>
        <parameter locked="false" name="transport.jms.ConnectionFactoryType">topic</parameter>
    </parameter>

    <parameter locked="false" name="myQueueConnectionFactory">
        <parameter locked="false" name="java.naming.factory.initial">org.apache.qpid.jndi.PropertiesFileInitialContextFactory</parameter>
        <parameter locked="false" name="java.naming.provider.url">repository/conf/jndi.properties</parameter>
        <parameter locked="false" name="transport.jms.ConnectionFactoryJNDIName">QueueConnectionFactory</parameter>
        <parameter locked="false" name="transport.jms.ConnectionFactoryType">queue</parameter>
    </parameter>

    <parameter name="default" locked="false">
        <parameter name="java.naming.factory.initial" locked="false">org.apache.qpid.jndi.PropertiesFileInitialContextFactory</parameter>
        <parameter name="java.naming.provider.url" locked="false">resources/jndi.properties</parameter>
        <parameter name="transport.jms.ConnectionFactoryJNDIName" locked="false">QueueConnectionFactory</parameter>
        <parameter name="transport.jms.ConnectionFactoryType" locked="false">queue</parameter>
    </parameter> 
```

2 消息代理向订阅者发送队列项的次数。例如，消息代理将项目发送给订阅者，但订阅者无法完成这项工作。所以项目不会从消息代理队列中删除。它将何时再次尝试将此项目发送给订阅者以及尝试发送此项目到发送订阅者的次数。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:36:44.033

当您使用 ESB 将消息保存到队列时，您需要从端点 uri 配置中指定 ConnectionFactory，如下所示。

```
 <address uri="jms:/myQueueName?transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&amp;java.naming.factory.initial=org.wso2.andes.jndi.PropertiesFileInitialContextFactory&amp;java.naming.provider.url=tcp://localhost:5672&amp;transport.jms.DestinationType=queue&amp;java.naming.provider.url=repository/conf/jndi.properties" statistics="enable"/> 
```

# php - 创建 TCP 套接字连接并通过 XML 请求发送以获得 XML 响应？

> ID：11773769
> 
> 赞同：1
> 
> 时间：2012-08-02T08:33:59.120
> 
> 标签：php, xml, sockets, fsockopen

端口为 5792，ip 为 123.123.123.123。我能够将数据发送到 ip，如下所示：

```
$host = "tcp://123.123.123.123"; 
$port = 5792; 
$errstr = '';
$errno = '';

$fp = fsockopen($host, $port ,$errno, $errstr, 30); 
if (!$fp) {
  print 'COULD NOT CONNECT! <br />';
  echo "$errstr ($errno)<br />\n";
  die();
}
else {
  print 'SUCCESS!<br />'
} 
```

发送似乎也有效：

```
$message = 'hello';
fputs ($fp, $message ); 
```

接收数据时出现问题：

```
print fread($fp, 128); 
```

这打印：

```
hello 
```

……屏幕上！换句话说，它与我发送的内容相呼应。现在，我知道所有消息都封装在一个 XML 元素中。在这个元素中可以放置一个服务请求，它也被封装在一个 XML 元素中。

封装的 XML 元素称为“ROOT”，我可以在其中放置服务请求请求。让我们将我正在尝试完成的实际服务请求称为“topUp”。

1.  假设有一个名为 ROOT 的根 xml 元素，它封装了服务请求“topUp”，那么将该 XML 作为字符串提交的标准方法是什么？
2.  当服务器无法理解您在说什么时，期望服务器回应您的请求是否正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:21:46.940

了解请求命令的 XML 结构至关重要。无论如何，您也可以通过这种方式向您发送命令

```
 $message = "<root>"."\n";
 $message .= "<request>topUp</request>"."\n";
 $message .= "</root>"."\n";
 fputs ($fp, $message ); 
```

但是，除非您发送定义的请求结构，否则您可能不会得到您想要的结果。

# objective-c - 确定是否应在 MVC 中为 KVO 观察到的更改设置动画

> ID：11773771
> 
> 赞同：1
> 
> 时间：2012-08-02T08:34:16.013
> 
> 标签：objective-c, model-view-controller, key-value-observing

（iOS 5，XCode 4.4）

我有一个控制器（例如，C1），它修改了通过第二个控制器（C2）使用 KVO 观察到的模型，该控制器基于模型管理视图（为了讨论的目的，我简化了情况）。现在的问题是，有时需要对更改进行动画处理，有时则不需要。但是，C2 无法判断它正在处理哪种情况，因为它只监听 KVO 通知。

是否有一个普遍接受的解决方案，或者有没有人有一个好的建议？我设置错了吗？我可以让 C1 指示 C2，但这不会违背 KVO 的目的吗？

在此先感谢，帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:13:59.263

不是我知道 ios5 或 KVO，但你为什么不给模型添加一个参数呢？

```
Model.animated=(true:false)? 
```

# ant - ant 目标不存在但被执行

> ID：11773773
> 
> 赞同：1
> 
> 时间：2012-08-02T08:34:22.280
> 
> 标签：ant

我从未见过这种奇怪的-

我进入了维护项目，在那里我得到了一个 build.xml，但我从未安装过 ant。ant 被捆绑到项目中，所以我使用 -

蚂蚁部署项目。

但是当我查看 build.xml 时，我找不到任何名为“deploy_project”的目标。

任何人都可以帮助我如何在 build.xml 中不存在此目标的情况下执行“deploy_project”目标？

我怀疑由于我没有自己安装 ant 并且与项目捆绑在一起，因此任何 ant 配置都可能已被覆盖......但是如何找到它是我卡住的地方，任何人都可以帮助我吗？

（我确定目标不存在于 build.xml 中）。

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:50:52.320

运行以下命令：

```
$ ant -p 
```

这通常会打印出`build.xml`. 或者至少是有描述的。

还要`<import file="...">`在您的`build.xml`. 这些允许您导入其他 Ant 构建文件，这些文件可能包含您的 build.xml 中没有的目标。我怀疑，如果`deploy_project`您`build.xml`在.`build.xml``<import`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:09:57.153

如果您确定目标不存在，并且您没有使用 -f 选项指定构建文件，那么我只能想到 1 个解释 -

您的 ANT_HOME 在其他地方，那里会有另一个 build.xml。

（最快的检查方法是找到它 - `SET for Windows` `echo $PATH for Unix`），找到 ANT_HOME 的值并在同一目录中，一个 build.xml 将与您的*** *INVISIBLE* ***目标一起出现

* * *

如果您搜索了 C: 驱动器但仍然找不到任何 build.xml，那么您拥有的捆绑 ANT 可能是定制的或 ANT 包装器。意思是有一个名为 ant.bat 的 .bat 文件，它接受`deploy_project`作为参数，然后使用变量替换将其映射到另一个任务。所以寻找一个批处理文件`ant.bat`或任何标题为ant的东西。

# php - 从 ul 显示 2 个随机 li - PHP

> ID：11773783
> 
> 赞同：1
> 
> 时间：2012-08-02T08:35:08.707
> 
> 标签：php, wordpress, random

希望有人可以提供帮助。

我正在建立一个 wordpress 网站，作为设计的一部分，我有一些我想展示的“功能面板”。

列表中总共有 4 里 - 但我只想在每页上显示 2 个随机的。

我可以通过 CSS 通过显示/隐藏基于页面类的每个 li 来做到这一点 - 但是我想知道是否有更优雅的方式通过 PHP 来做同样的事情？

我的 HTML 在这里...我不知道从哪里开始使用 PHP，而且似乎我在谷歌搜索错误的关键字...

```
 <ul id="featurePanels">
  <li id="newBoatsPanel">
    <h3><a href="#">New Boats<br />
      <span>Text</span></a></h3>
  </li>
  <li id="brokeragePanel">
    <h3><a href="#">Brokerage<br />
      <span>Text</span></a></h3>
  </li>
  <li id="newsPanel">
    <h3><a href="#">News<br />
      <span>Text</span></a></h3>
  </li>
  <li id="partsPanel">
    <h3><a href="#">Parts<br />
      <span>Need text here</span></a></h3>
  </li>
</ul> 
```

任何指针将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:42:39.667

您可以使用 `preg_match_all('/\<li.*?\>.*?\</li\>/i',$html_string,$li_list)`

在 $li_list 你将有一个 li 数组，现在你可以随机播放、随机播放、拼接、切片或其他任何东西......

并最终用于`implode`获取 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:49:06.760

```
<?php

$listItems = array(
 '<li id="newBoatsPanel">your text here</li>',
 '<li id="brokeragePanel">more text here</li>',
 '<li id="newsPanel">text text text</li>',
 '<li id="partsPanel">Need text here</li>'
);

shuffle($listItems); // shuffles (randomizes the order of the elements)

// print the list
echo '<ul id="featurePanels">' . $listItems[0] . $listItems[1] . '</ul>';

?> 
```

# ffmpeg - 使用 ffmpeg 库提取文本字幕

> ID：11773785
> 
> 赞同：5
> 
> 时间：2012-08-02T08:35:30.030
> 
> 标签：ffmpeg, libavcodec, libav, libavformat

我正在编写一个使用 ffmpeg 的 libav* 库的 C 程序，并使用[Dranger 的教程](http://dranger.com/ffmpeg/)，我可以正确解码音频和视频。目前，我正在尝试提取字幕。我实际上并不想按时解码它们并在视频上显示它们，而是实际上将字幕文本从容器中提取出来。

例如，在 cli 上，

```
ffmpeg -i video.mkv -map 0:4 -scodec copy out.ass 
```

会把屁股文件还给我。（出于某种原因， srts 只返回文本。）

我试过弄乱 AVSubtitle、avcodec_decode_subtitle2 等，但他们逐行返回字幕。我想要 srts 中的时间码、ass 中的标头信息等。我想要的是混合到容器中的整个字幕文本文件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T12:58:38.033

对于 .mkv 文件，您可以使用[mkvextract](http://www.bunkus.org/videotools/mkvtoolnix/doc/mkvextract.html)。您可能需要先使用`mkvinfo`以确定要提取的曲目。

由于您想从自己的 C 程序中执行此操作，您可能希望使用[Matroska 库](http://www.bunkus.org/videotools/mkvtoolnix/source.html#lib)而不是命令行工具。

# c++ - 删除向量中的对象

> ID：11773787
> 
> 赞同：1
> 
> 时间：2012-08-02T08:35:33.867
> 
> 标签：c++

我正在尝试删除对象向量中的元素。向量充满了实例，`Object`并且在某些时候，我想删除向量中的某个元素，而不是按索引，而是按元素本身。

一个简单的例子是：

```
std::vector< string > strVector;
strVector.push_back( "abc" );
strVector.push_back( "def" );
strVector.push_back( "ghi" ); // So strVector should contain "abc", "def", and "ghi" 
```

如何从该向量中删除“ghi”？请注意，我不知道“ghi”在该向量中的位置。

```
// Something like this. Assume strVector = [ "abc", "cba", "ccb", "bac", "aaa" ]
strVector.removeElement( "ccb" ); 
```

我正在研究的一个更相关的例子：

```
class MyClass {
   std::vector< Object > myObjVector;
   void main( ARGS ) {
      for ( int i = 0; i < 10; i++ ) {
         Object myObject = Object( );
         myObjVector.push_back( myObject );
      }

      int j = getANumber( ); // j could be any number within the size of the vector
      Object myOtherObject = myObjectVector.at( j );

      // How do I erase myOtherObject (which is an object inside the vector) ?
      removeFromVector( myOtherObject );
   }
} 
```

我希望这个问题很清楚。提前致谢。

*编辑*：我想通了，感谢所有回答的人。诀窍是给类一些唯一的东西来标识它（如名称或标签，只要它们保证是唯一的），然后使用[擦除删除习语](http://en.wikipedia.org/wiki/Erase-remove_idiom)从数组中删除对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T08:39:34.883

如果您的用例没有重复项，那么最好使用 an`std::set`并使用带有值的[std::set::erase](http://en.cppreference.com/w/cpp/container/set/erase)。

```
std::set< string > strSet;
strSet.insert( "abc" );
strSet.insert( "def" );
strSet.insert( "ghi" );
strSet.insert( "ccb" );

strSet.erase("ccb"); 
```

如果您需要处理重复项，则必须指定所需的删除行为。它应该删除一个或所有与某个值匹配的元素吗？您是否关心保留剩余元素的顺序？如果您需要使用矢量，请在[擦除删除习语](http://en.wikipedia.org/wiki/Erase-remove_idiom)中找到。但请注意，它`std::vector::erase`具有线性时间复杂度，而 的相关变体`std::set::erase`具有对数时间复杂度。并且擦除删除将删除*所有*等于给定值的元素。

**注意**：如果你想使用`std::set`用户定义的类型，你必须提供小于`bool operator<(const UserType&) const`或比较函数或仿函数，实现[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T08:42:37.763

如果必须使用 a `vector`，则使用[`erase(remove())`](http://en.wikipedia.org/wiki/Erase-remove_idiom)：

```
#include <algorithm>
#include <string>
#include <vector>

strVector.erase(std::remove(strVector.begin(), strVector.end(), "ghi"),
                strVector.end()); 
```

这将删除`"ghi"`from的所有实例`strVector`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:31:36.013

如果向量中的对象支持相等，并且这是删除的条件，那么您可以使用：

```
v.erase( std::remove( v.begin(), v.end(), "ghi" ), v.end() ); 
```

否则，您将需要`remove_if`, 和一个函数对象（或 lambda，如果您有 C++11），如果要删除元素，则返回 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:44:43.440

```
#include <iostream>
#include <vector>

class Object
{
public:
    Object(int n){secret_num = n;}
    virtual ~Object(){}
    int getSecretNum(){return secret_num;}

private:
    int secret_num;
};

int main()
{

    int index= -1;
    Object *urobj = new Object(104);
    std::vector<Object*> urvector;

    for(int i = 0; i < 10; ++i)
    {
       Object *obj = new Object(i+1);
       urvector.push_back(obj);

    }

    urvector.push_back(urobj);

    for(int j = 0; j < urvector.size(); ++j)
    {
        Object *tmp = urvector.at(j);
        std::cout << tmp->getSecretNum() << std::endl;
        if(urobj == tmp)
            index = j; 
    }

    if(index == -1)
       std::cout << " not match " << std::endl;
    else 
       std::cout << " match " << index << std::endl;

    return 0;
} 
```

# sql - 在 SQL SERVER 中转置

> ID：11773790
> 
> 赞同：0
> 
> 时间：2012-08-02T08:35:51.480
> 
> 标签：sql, sql-server-2008-r2

你能帮我一个案例吗，下面

转置表格后，我得到如下结果：

```
Lno             OID     ConnectedDate
100000224   34931   Feb  7 201,Feb  7 201,Feb  8 201,Feb  8 201,Feb  4 201
100001489   9156    Jun 23 201,Jun 24 201,Jun 25 201,Jun 25 201,Oct 29 201,Oct 29 201
100002153   31514   Oct  5 201
100002740   32367   Sep 14 201,Sep 14 201,Oct 21 201,Sep 15 201,Sep 15 201,Sep 16 201
100004774   31558   May 19 201,May 19 201,May 20 201,May 20 201,Jun  2 201
100004935   5857    Sep  1 201,Sep  1 201,Sep  3 201,Sep  3 201,Sep 29 201,Aug 31 201,Sep 22 201
100004935   31684   Jun 16 201,Jun 17 201,Jun 17 201,Jun 19 201
100004983   33942   Dec 30 201,Dec 30 201,Dec 27 201,Dec 29 201,Dec 28 201
100005055   32347   Sep 14 201,Sep 13 201,Sep 13 201,Oct  1 201,Oct  5 201,Oct 20 201,Nov 17 201,Sep 15 201,Sep 16 201,Dec  4 201
100006146   31481   Apr 30 201,Apr 30 201,May  3 201,May  4 201,May  4 201,Jun  3 201,Jun  4 201,Jun  5 201,Jun  7 201,Jun 12 201 
```

但我想要这样的输出：

```
LID             OID     ConnectedDate1  ConnectedDate2  ConnectedDate3  ConnectedDate4
100000224   34931   Feb  7 201      Feb  7 201      Feb  8 201      Feb  8 201 
100001489   9156    Jun 23 201      Jun 24 201      Jun 25 201      Jun 25 201
100002153   31514   Oct  5 201
100002740   32367   Sep 14 201       Sep 14 201     Oct 21 201      Sep 15 201
100004774   31558   May 19 201       May 19 201      May 20 201 
```

请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:38:01.453

你需要`PIVOT`命令。要提供更多详细信息，您需要提供您的查询

# sql - 根据时间范围执行不同的SQL

> ID：11773791
> 
> 赞同：0
> 
> 时间：2012-08-02T08:36:03.723
> 
> 标签：sql, oracle, date-arithmetic

我有大约五个产生相同类型输出的查询，唯一的区别是它们从单独的表中获取数据，例如每小时表、每日表、每周表。

现在我想编写一个查询，它根据用户的输入从五个表之一生成输出。例如

```
IF THE USER PROVIDED TIMERANGE IS GREATER THAN 1 AND LESS THAN 24 HRS 
  THEN EXTRACT FROM HOURLY TABLE--i.e. execute 1st query 
IF THE USER PROVIDED TIMERANGE IS GREATER THAN 24 AND LESS THAN 7 DAYS
  THEN EXTRACT FROM DAILY TABLE-- i.e. execute 2nd query 
```

......等等

注意：所有五个查询都返回相同类型的输出。也就是说，select 子句的投影对于所有查询都是相同的。

这可以通过单个 SQL 语句（可能使用联合）来完成，还是我需要为此编写一个 PL/SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:46:43.120

您可以使用 UNION ALL 运算符执行此操作：

```
select * from hourly_table
where (&&user_end_date - &&user_start_day) < 1
union all
select * from weekly_table
where (&&user_end_date - &&user_start_day) between 1 and 7
union all
select * from monthly_table
where &&user_end_date <= add_months(&&user_start_day, 1)
union all
select * from yearly_table
where &&user_end_date <= add_months(&&user_start_day, 12)
union all
select * from whatever_table
where &&user_end_date > add_months(&&user_start_day, 12) 
```

我对替换变量使用了 SQL*Plus 语法；您可能需要更改它以适合您用于运行查询的任何客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:48:54.777

案例..什么时候可能有帮助

```
select 
CASE ConditionVar
  WHEN Val1 THEN Query1 
  WHEN Val2 THeN Query2
  ELSE QUERY3
END as myresult
from my_tables (dual in case no need of table); 
```

案例详解 [http://www.techonthenet.com/oracle/functions/case.php](http://www.techonthenet.com/oracle/functions/case.php)

替代语法，这在您的情况下可能更有用

```
select 
CASE 
   WHEN condition1 THEN Query1 
   WHEN condition2 THeN Query2
   ELSE QUERY3
END as myresult
from my_tables (dual in case no need of table); 
```

# c# - C# 正则表达式匹配行为

> ID：11773795
> 
> 赞同：0
> 
> 时间：2012-08-02T08:36:16.343
> 
> 标签：c#, regex, match

我的代码中有这一行：

```
Match match = Regex.Match(actualValue, regexValue, RegexOptions.None); 
```

我有一个简单的问题。为什么在使用以下行检查成功含义时：

```
if(match.Success) 
```

那么匹配成功并具有以下值：

实际值 =`"G:1"`

正则表达式值 =`"A*"`

实际似乎至少不适合我，所以我可能会错过一些东西......

我想要实现的只是接收一个实际值和一个正则表达式，并检查实际值是否符合正则表达式。我认为这就是我在那里所做的，但显然我没有。

编辑：另一个问题。有没有办法将 * 视为“任何字符”通配符？意思是 A* 是否有可能被视为 A 并且在它之后任何字符都是可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:57:20.983

您的代码本身是正确的；你的正则表达式不是。

根据您对其他答案的评论，您正在寻找一个匹配任何以 A 开头的字符串的正则表达式，并且您假设 ' `*`' 表示“任何字符”。' `*`' 实际上的意思是“匹配前面的字符零次或多次”，因此您给出的正则表达式的意思是“匹配字符串的开头，后跟零个或多个 'A' 字符”，这将完全匹配任何内容。

如果您正在寻找与整个字符串匹配的正则表达式，但仅当它以 'A' 开头时，您要查找的正则表达式是`^A.*`. `.`正则表达式中的 ' ' 字符表示“匹配任何字符”。因此，这个正则表达式意味着“匹配字符串的开头，后跟一个 'A'，然后是零个或多个其他字符”，因此如果它以 'A' 开头，它将匹配整个字符串。

但是，您已经*拥有*了整个字符串，所以这有点不必要 - 您真正想要做的就是回答“字符串是否以 'A' 开头？”这个问题。实现此目的的正则表达式就是“^A”。如果匹配，则字符串以“A”开头。

当然，需要指出的是，无论如何您都不需要正则表达式来确认这一点。如果这真的是你想做的所有事情（你可能只是整理了一个简单的例子，而你的实际场景更复杂），为什么不直接使用 StartsWith 方法呢？：

```
bool match = actualValue.StartsWith("A"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:39:22.997

正则表达式匹配，因为`A*`意味着“查找*0*次或多次出现的 'A'”。它将匹配任何字符串。

如果您要查找任意数量的“A”，但至少要查找一个，请尝试`A+`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:17:04.413

查看评论，您似乎正在尝试匹配很多以 A 开头的字符串。如果它们被空格分隔，您可以使用以下命令找到所有字符串：

```
bool matched = Regex.IsMatch(actualValue, @"\bA\w+"); 
```

这匹配：“Atest flkjs Apple Ascii cAse”。

如果您只匹配一个字符串并且它以 A 开头并且没有空格：

```
bool matched = Regex.IsMatch(actualValue, @"^A\w+$"); 
```

这匹配“Apple”，但不匹配“Apple and orange”，因为第二个字符串有空格。

正如克里斯所指出的， * 不是您在正则表达式搜索中所指的通配符。[您可以在regex-info](http://www.regular-expressions.info/quickstart.html)找到一些信息来帮助您开始使用正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:40:43.320

Regex 在构造函数中采用正则表达式。您的案例可能是：

```
if(new Regex("A*").IsMatch(actualValue)
   //Do something 
```

如果您对正则表达式不安全，请在[此处尝试](http://regexpal.com/)

# javascript - 访问文件时可以自动调用例程或函数吗？

> ID：11773797
> 
> 赞同：0
> 
> 时间：2012-08-02T08:36:18.550
> 
> 标签：javascript, jsp, analytics

如果我问的是非常愚蠢的问题，请原谅我。但这是我作为分析实施者的新角色想要实施的。我们的一些文件（主要是 pdf）存储在网络服务器（CDN 服务器）上，以减少应用程序服务器的一些负载。

我们向全球所有用户提供这些文件的链接。我想要的是在它们发生时跟踪这些文件下载。所以我只是想知道有什么方法可以调用函数或例程，从那里我可以进行这些跟踪调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:46:07.020

**并不真地。**

如果您使用 3 ^(rd)方网络托管作为 CDN，那么您可以使用您的主机提供的任何工具简单地获取分析报告。

如果您正在运行自己的主机箱，您可以在其上安装几乎所有分析软件来监控访问。此处仅提供一个示例：[http ://ruslany.net/2011/05/using-piwik-real-time-web-analytics-on-iis/](http://ruslany.net/2011/05/using-piwik-real-time-web-analytics-on-iis/)

然而，干净简单的方法是在该 CDN 服务器上运行一个简单的 Web 应用程序，该应用程序接受文件请求，然后返回文件。优点是您可以：

*   记录你想要的任何统计数据。
*   使用广泛可用的工具，如谷歌分析
*   做出动态决策，其中一个例子是根据用户带宽等因素决定发送的文件版本。
*   透明地处理丢失的文件和路径更改，因此链接将永远有效
*   为不同的文件发送不同的缓存头
*   实现非常简单的访问控制和基于策略的限制

# c# - 无法将值 NULL 插入“UserId”列，表

> ID：11773798
> 
> 赞同：1
> 
> 时间：2012-08-02T08:36:19.097
> 
> 标签：c#, asp.net, sql

尝试插入用户在我的 UPDATE SQL 语句下编辑的评论时遇到此错误。由于我的 UserId 是一个 uniqueIdentifier，我真的不知道如何解决这个错误。

错误显示：

```
Cannot insert the value NULL into column 'UserId', table 
```

我的 .cs 代码是：

```
 int CommentID = int.Parse(ListView1.DataKeys[e.ItemIndex].Value.ToString());
    ListViewItem item = ListView1.Items[e.ItemIndex];
    TextBox Title = (TextBox)item.FindControl("Title");
    TextBox commentContent = (TextBox)item.FindControl("commentContent");

    string connectionString = ConfigurationManager.ConnectionStrings["ASPNETDBConnectionString1"].ConnectionString;
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        string sql = "Update Comments set Title = @Title, commentContent=@commentContent where CommentID = @CommentID";
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            cmd.Parameters.AddWithValue("@Title", TextBox1.Text.Trim());
            cmd.Parameters.AddWithValue("@commentContent", TextBox2.Text.Trim());
            cmd.Parameters.AddWithValue("@CommentID", CommentID);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:40:21.247

我认为表中的 UserID 列具有 NOT NULL 约束。检查您的表模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:41:31.133

在我看来，UserID 有一个非空约束。检查你的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:40:47.890

我认为 UserId 是你的外键，你必须定义一个外键

评论中包含 UserId 作为外键，必须设置 UserId，因为 key 不能为空

# php - 我如何截取屏幕截图并将其保存在 PHP 中

> ID：11773801
> 
> 赞同：-2
> 
> 时间：2012-08-02T08:36:34.003
> 
> 标签：php

> **可能重复：**
> [使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

我如何截取屏幕截图并将其保存在 PHP 中？当他/她点击保存按钮时，我想截取用户屏幕的屏幕并将其保存到用户的机器上。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:45:46.063

你不能在 PHP 中做到这一点。

您可以使用 HTML5/Javascript 来做到这一点，就像[HTML2Canvas](http://html2canvas.hertzen.com/)一样。

您的问题是与旧浏览器的兼容性。因此，使用它取决于该网站的目标用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:45:51.737

您必须了解一件事，**PHP 是服务器端脚本**，与实时浏览器需求无关。您可以尝试使用**jQuery**等库的**JavaScript**来捕获屏幕截图。然后您可以通过**AJAX**传递该图像，您绝对可以使用 PHP 将图像保存到您的服务器目录中。

 *******[这个](https://stackoverflow.com/questions/6887183/how-to-take-screen-shot-of-a-div-with-javascript)***stackoverflow问题可能会对您有所帮助。****

# grails - Grails - 标准构建器 - createCriteria

> ID：11773802
> 
> 赞同：2
> 
> 时间：2012-08-02T08:36:44.147
> 
> 标签：grails, groovy, criteria

场景是这样的：每个`Process`都有多个`ProcessingSteps`

我编写的代码能够获取所有进程而不对应于`ProcessingSteps`.

我知道我缺少 where 子句，我想问一下我们如何在 Grails 中做到这一点。

我只想为每个`Process`相应的`ProcessingStepUpdate`

我有两个域类`ProcessingStep`和`ProcessingStepUpdate`

```
package a.b.c
public class ProcessingStep {
    Process process
}

public class ProcessingStepUpdate{
static belongsTo = [processingStep: ProcessingStep]
ProcessingStep processingStep
} 
```

这是我正在编写的脚本

```
Process.list(max:1).each {
    //List<ProcessingStep> test2= ProcessingStep.findAllByProcess(it)
    //println it
    def test3 = ProcessingStep.createCriteria().list() {
        eq("process",it)
    }
    println it

    it.list().each {
        //not telling it where to get the list from 
        ProcessingStep.list().each { pstep ->
            def test4 = ProcessingStepUpdate.createCriteria().list() {
                eq("processingStep",pstep)

                // Projections are aggregating, reporting, and
                // filtering functions that can be applied after
                // the query has finished.
                // A common use for projections is to summarize data
                // in a query
                /* projections{
                    groupProperty("processingStep")
                }*/
            }
            println pstep
            //List<ProcessingStepUpdate> test = ProcessingStepUpdate.findAllByProcessingStep(it)
            //List<ProcessingStepUpdate> test = ProcessingStepUpdate.findWhere()
            //println "it"
        }
    }
} 
```

一天之内我一直被这个问题困扰.. OOPS 世界的新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:05:19.390

我会尝试猜测该任务只是迭代孩子的孩子。然后是这样的：

```
public class Process {
  static hasMany = [processingSteps: ProcessingStep]
}

public class ProcessingStep {
  static belongsTo = [process: Process]
  static hasMany = [updates: ProcessingStepUpdate]
}

public class ProcessingStepUpdate {
  static belongsTo = [processingStep: ProcessingStep]
}

Process.list().each{ process -> 
  process.processingSteps.each { step ->
    step.updates.each {
      println "Process: $process, Update: $it"
    }
  }
} 
```

甚至

```
def updates = Process.list()*.processingSteps.flatten()*.updates.flatten()
println updates.join('\n') 
```

看看[Groovy Collections](http://groovy.codehaus.org/Collections)，尤其是“star-dot '*”。运营商”部分。

# objective-c - UIView animateWithDuration：减慢动画帧率

> ID：11773803
> 
> 赞同：13
> 
> 时间：2012-08-02T08:36:57.343
> 
> 标签：objective-c, ios, animation, uiview, nstimer

我在游戏中使用该方法以每秒 60 次的速度`CADisplayLink`绘制帧。`EAGLView`

当我调用`UIView` `animateWithDuration:`帧率下降到一半时，动画持续时间从 60 到 30 fps。动画结束后，fps 立即回升至 60。

我也尝试使用`NSTimer`动画方法而不是`CADisplayLink`并且仍然得到相同的结果。

当我在扬声器图标淡出时按下音量按钮时会发生相同的行为，因此它可能正在使用`animateWithDuration`. 由于我希望能够在我的应用程序中顺利处理扬声器图标，这意味着我不能只重写我的动画代码以使用除 之外的其他方法`animateWithDuration`，而是需要找到一个适用的解决方案。

我知道有一个选项可以减慢模拟器上的调试动画，但是，我在设备上遇到了这个问题，并且没有启用这样的选项。我还尝试使用各种选项，`animateWithDuration`例如线性选项和用户交互，但没有一个有改进。

我也知道我可以设计一个引擎，它仍然可以在变化很大的帧速率下工作。然而，这并不是解决这个问题的理想方案，因为游戏需要高 fps。

有人见过或解决过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:59:38.900

对此的解决方案是在 CADisplayLink 回调期间执行您自己的动画和 blit。

1）对于音量问题，在角落放一个小音量图标，或者如果用户采取了一些预定义的触摸动作，则显示它，并给他们触摸控制。通过该输入，您可以使用 AVAudioPlayer 来改变音量，并且完全避免系统控制。您甚至可以确定用户是否按下了音量按钮，并弹出一些说明按您的方式操作。这使您远离系统发生的任何动画。

2）当你有一个你想做的动画时，好吧，在代码中创建一系列图像（当时或之前），并且 displayLink 中的每一个回调都会将图像blit到屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:59:50.930

这是[一个旧线程，描述了类似的帧速率下降](http://www.cocos2d-iphone.org/forum/topic/3507)。在这种情况下，问题的原因是添加了两个或更多半透明精灵，但我猜任何时候你尝试将多个图层合成在一起，你可能会做足够的工作来降低帧速率，而且`animateWithDuration`很可能确实如此正是那种东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T03:49:55.123

使用 OpenGL 或 CoreAnimation。它们不兼容。

为了测试这个删除任何 UIView 动画，帧速率将是你所期望的。添加回 UIView 动画，它会下降到 30fps。

你说：

> 当我调用 UIView animateWithDuration: 时，帧率下降到一半，动画持续时间从 60 到 30 fps。动画结束后，fps 立即回升至 60

我不知道你为什么不接受我的回答，这正是当你将 UIView 动画与不使用 UIView 的 CA 动画结合时发生的情况。

# java - 重复创建对象是否会影响java性能？

> ID：11773807
> 
> 赞同：-2
> 
> 时间：2012-08-02T08:37:09.450
> 
> 标签：java, performance, swing, desktop-application

我使用 jtabbedpane。对于每个选项卡，它将有一个面板和一些组件。为了提高性能，我为“n”个选项卡创建了一个“n”个函数。在该函数中，我为该选项卡创建了组件。如果选择了特定选项卡，我将调用所需的函数。所以组件是根据选项卡选择创建的。我的问题是

**首先我们选择 tab1[component was created for tab1] 然后我们将 tab 从 tab1 更改为 tab2[component was created for tab2] 如果我们再次转到 tab1，则再次创建组件。是否影响性能？如果是的话..我该如何恢复它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:54:31.540

如果您每次都重新创建选项卡，那么您在切换选项卡时会受到性能影响。虽然延迟加载是个好主意，但缓存结果可能更可取；因此，如果选项卡的内容已经创建，则无需再次重新创建。

随着时间的推移，您将需要根据内存使用情况来分析性能成本。

# linux - Apache 上的 .htacces 是否通过 ftp 或仅通过 http 管理访问？

> ID：11773809
> 
> 赞同：0
> 
> 时间：2012-08-02T08:37:13.740
> 
> 标签：linux, apache

在这种情况下，我是新手。我想保护我的网站（托管 linux），我找到了这个方法（.htacces 编辑）。但我想知道 .htacces 上的错误是否会拒绝我通过 ftp 访问我的网站。.htpacces 仅与 http 访问有关吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:39:57.637

Apache 是一个*Web 服务器*，它不处理*ftp*请求，因此配置文件对该服务没有任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:41:43.347

不，它不能，因为您的 Web 服务器（很可能是 Apache）没有处理 FTP。

# javascript - 使用 Javascript 在 HTML5 中重绘 Canvas

> ID：11773811
> 
> 赞同：2
> 
> 时间：2012-08-02T08:37:23.340
> 
> 标签：javascript, html, canvas

我正在创建一个点击清除游戏。一旦用户点击了一些砖块，它的相邻砖块就会被检查为相同的颜色，并且所有这些砖块都会被立即清除。

这些是使用 clearRect() 函数清除的。

现在这会在上面的砖块和下面的砖块之间留下一个白色的补丁，让上面的砖块悬空。

现在我想把这些砖头往下移。我该怎么做呢..？请帮忙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T08:50:51.837

这个问题很模糊，但根据标题，您需要先清除画布，然后才能重绘。否则，绘制的元素将简单地堆叠在一起。

为此，请`clearRect`在画布本身上调用该函数：

```
function clear() {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, 500, 500);
} 
```

`canvas`画布的 ID 和`500, 500`尺寸在哪里。现在您将拥有一个空画布，您可以在其中重新绘制所有内容。

我曾经也做过[一个简单的 HTML5 画布游戏](http://demo.marcofolio.net/lights_off_canvas/)，你可以从源代码中学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T23:31:21.977

我想我明白你在问什么。如果是这样，那么您想知道在移除下面的块时如何将块向下移动。

这只是在游戏循环的每次迭代中增加 x 位置（记住画布从 0,0 开始）的问题。

增加多少？那将是最高的“实心塔”所在的地方。IE，假设您有一列 10 个标记，然后删除了 7 个。下面的 3 个需要全部下降到剩余 6 个的高度 - 所以这将是`board height - (6*token height)`

```
*
*
*
+ <- remove
* <- 6x token height (and less the board height)
*  
*  
*
*
* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-26T18:09:46.487

我成功地通过 DOM 重绘 HTML Canvas。

```
 var c = document.getElementsByName("myCanvas")[0];

    if (c != null)
    {
        c.remove();
    }

    var c = document.createElement("canvas");
    c.setAttribute("name", "myCanvas");
    c.setAttribute("width", 900);
    c.setAttribute("height", 600);
    c.setAttribute("style", "border:1px solid #d3d3d3"); 
```

# python - 矩阵的python zip（）函数

> ID：11773814
> 
> 赞同：11
> 
> 时间：2012-08-02T08:37:27.040
> 
> 标签：python, arrays, matrix, numpy, zip

> **可能重复：**
> [Python 中的矩阵转置](https://stackoverflow.com/questions/4937491/matrix-transpose-in-python)

我有一个矩阵，比如说

```
A = [[0,0],[1,1]] 
```

我想压缩它的组件

```
(0,1),(0,1) 
```

在 A 中有两行，这可以很容易地获得

```
zip(A[0],A[1]) 
```

如果我有一个任意维度的矩阵 A

```
A = [[0,0],[1,1],[2,2]] 
```

如何压缩一系列元素？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T08:38:51.653

使用`zip(*A)`.

```
>>> zip(*A)
[(0, 1, 2), (0, 1, 2)] 
```

# javascript - wysihtml5\. 图像 src 和 href 被剥离

> ID：11773820
> 
> 赞同：7
> 
> 时间：2012-08-02T08:37:44.033
> 
> 标签：javascript, html, editor, wysiwyg

我正在使用 wysihtml5 所见即所得的编辑器。

问题是图像 src 属性和链接 href 属性已从 html 中剥离。在服务器上，我已经被剥离了 html。

我该如何解决这个问题？

我正在使用 advanced.js 规则。与所有规则。

[编辑](https://github.com/xing/wysihtml5/wiki)

**更新 1**

好吧`editor.getValue`，`jquery().val() for textarea`在表单提交时给出相同的值。表示应正确发送表单。

但我看过从浏览器发送的 POST 请求。它没有 URL。有问题。

**更新 2**

如果我从规则集中删除与 img 相关的所有内容，但它工作不正常。

**更新 3**

作为对骨髓瘤评论的回应。

我期待：

```
<a href="http://domain.com/" title="Link: http://domain.com">Link</a> 
```

但我明白了

```
<a href="" title="Link: Null">Link</a> 
```

**更新 4**

```
<div id="wysihtml5-toolbar" style="display: none;">
      <button class="btn" data-wysihtml5-command="bold">
        {{ "Bold"|trans }}
      </button>
      <button class="btn" data-wysihtml5-command="italic">
        {{ "Italic"|trans }}
      </button>
      <button class="btn" data-wysihtml5-command="createLink">
        {{ "Link"|trans }}/{{ "Unlink"|trans }}
      </button>
      <button class="btn" data-wysihtml5-command="insertUnorderedList">
        *
      </button>
      <button class="btn" data-wysihtml5-command="insertOrderedList">
        1,2,3
      </button>
      <button class="btn" data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1">
        {{ "Heading"|trans }}
      </button>
      <button class="btn" data-wysihtml5-command="insertImage">
        {{ "Image"|trans }}
      </button>

        <div data-wysihtml5-dialog="createLink" style="display: none;">
          <label>
            {{ "Link"|trans }}:
            <input data-wysihtml5-dialog-field="href" value="http://">
          </label>
          <a data-wysihtml5-dialog-action="save">{{ "Save"|trans }}</a>&nbsp;<a data-wysihtml5-dialog-action="cancel">{{ "Cancel"|trans }}</a>
        </div> 
             <!-- Dialog -->
         <div data-wysihtml5-dialog="insertImage" style="display: none;">
           <label>
             URL: <input data-wysihtml5-dialog-field="src" value="http://">
           </label>
           <label>
             Alternative text: <input data-wysihtml5-dialog-field="alt" value="">
           </label>
           <label>
                {{ "Align"|trans }}:
                <select data-wysihtml5-dialog-field="className">
                  <option value="">{{ "default"|trans }}</option>
                  <option value="wysiwyg-float-left">{{ "left"|trans }}</option>
                  <option value="wysiwyg-float-right">{{ "right"|trans }}</option>
                </select>
            </label>
           <a data-wysihtml5-dialog-action="save">{{ "Save"|trans }}</a>&nbsp;<a data-wysihtml5-dialog-action="cancel">{{ "Cancel"|trans }}</a>
         </div> 
      </div>
      <form action="{{ path('###_save_homepage') }}" method="POST" >
        <textarea id="wysihtml5-textarea" placeholder="{{ "Enter your text"|trans }}..." autofocus name="homepage"  style="width:700px;height:400px;">          
            {{ homepage|raw }}          
        </textarea> 
        <input type="submit" value="{{ "Save"|trans }}" class="btn" />  
    </form> 
```

和 JS 初始化：

```
<script type="text/javascript">
jQuery(document).ready(function(){
    var editor = new wysihtml5.Editor("wysihtml5-textarea", { // id of textarea element
          toolbar:      "wysihtml5-toolbar", // id of toolbar element
          parserRules:  wysihtml5ParserRules // defined in parser rules set 
        });     

    });

</script> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T20:32:22.737

尝试查看您引用的 wysihtml5-xxxjs 文件。

他们决定只允许绝对 URL（以防范 XSS 的名义）。如果您对这种权衡感到满意，下面的代码基本上允许您获取任何价值。

Ctrl-F 用于“var attributeCheckMethods”并进行以下更改 -[来源](https://github.com/signaly/wysihtml5/commit/a5ef253ce2636700d8091c206d559ba1f38783a1)：

```
var attributeCheckMethods = {
url: (function() {
    /*var REG_EXP = /^https?:\/\//i;*/
    return function(attributeValue) {
    /*if (!attributeValue || !attributeValue.match(REG_EXP)) {
        return null;*/
    if (!attributeValue) {
        return "";
    }
    /*return attributeValue.replace(REG_EXP, function(match) {
        return match.toLowerCase();
    });*/

    var parser = document.createElement('a');
    parser.href = attributeValue;

    if (   parser.protocol == 'http:'
        || parser.protocol == 'https:'
        || parser.protocol == 'ftp:'
    ) return attributeValue;
    };
})(), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:09:48.050

wysihtml5 验证标记的方式非常严格。如果 URL 或 SRC 未验证，则将被省略。

我会检查 parser_rules/advanced.js 文件。您可以删除、修改和编辑验证每个标签的规则。

# r - 在 geom_histogram(..density.., group = 1) 中填充颜色

> ID：11773822
> 
> 赞同：1
> 
> 时间：2012-08-02T08:37:48.123
> 
> 标签：r, ggplot2

我对 geom_histogram 函数有一个基本问题

使用数据集：

```
df <- data.frame(value = factor( rep(c("A","B"), c(100,200) ))) 
```

我创建一个直方图：

```
ggplot(df, aes(x=value, fill = factor(value))) + geom_histogram() 
```

并且输出是一个直方图，A 的计数为 100，B 的计数为 200

如果我改为绘制密度：

```
ggplot(df, aes(x=value, fill = factor(value), ..density..)) + geom_histogram() 
```

输出是一个直方图，A 的密度为 1，B 的密度为 1。我认为原因是密度是分别在 A 和 B 上计算的。

创建的直方图：

```
ggplot(df, aes(x=value, group = 1, fill = factor(value),..density..)) + geom_histogram() 
```

是一个直方图，其中 A 为 0.33，B 为 0.66，但填充颜色为黑色，在此版本的绘图中，我找不到获取先前直方图中使用的填充颜色的方法。

如何根据因子（值）生成具有填充颜色的直方图的最新版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:16:52.147

我解决了这个问题：

```
ggplot(df, aes(x=value, fill = factor(value))) + 
 geom_histogram(aes(y=..count../sum(..count..))) 
```

# php - 为什么我的查询结果不完整？

> ID：11773827
> 
> 赞同：-1
> 
> 时间：2012-08-02T08:38:02.293
> 
> 标签：php, mysql, tcpdf

我用 php 做了一个应用程序，用 TCPDF 做了一个报告，没问题，选择查询运行正常。但是如果我仔细查看数据，我会发现第一个数据丢失了。

简单示例查询：

```
 SELECT * FROM tb_expedition 
```

如果我在 MySQL 上运行这个查询，所有的数据都会出现。如果从我的 php 程序运行查询，结果仍然不完整。如果总数据是 20 行，在 php 中只出现 19 行，并且缺少第一个数据。

这是我的代码：

```
<?php

require_once('tcpdf/config/lang/eng.php');
require_once('tcpdf/tcpdf.php');

// create new PDF document
 include "koneksi.php";//conection file

  $period=$_GET[PERIOD];

   $sql = "SELECT * FROM tb_exp_expor where period = ' $period'";

   $hasil = mysql_query($sql);
   $data = mysql_fetch_array($hasil);

   $pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

   // set font
      $pdf->SetFont('times', '', 11);

// landscape
   $pdf->addPage( 'L', 'LETTER' );

   $html = '
<table border="1" cellspacing="3" cellpadding="4">
    <tr><td colspan="9" align="center"><h2>Form Pantauan Expedisi Export</h2></td></tr>
    <tr>
        <th align="center"><b>Tanggal</b></th>
        <th align="center"><b>Nama Expedisi</b></th>
        <th align="center"><b>Nama Distributor</b></th>
        <th align="center"><b>Kota Tujuan</b></th>
        <th align="center"><b>No Faktur</b></th>
        <th align="center"><b>Kondisi Armada Pengiriman</b></th>
        <th align="center"><b>Ketepatan Jumlah</b></th>
        <th align="center"><b>Ketepatan Waktu Kirim</b></th>
        <th align="center"><b>Keterangan</b></th>
    </tr></table>';
     $no=0;
   while ($data = mysql_fetch_array($hasil))
   {

     $html .= '<table border="1"><tr><td align="center">'.$data['tgl'].'</td>
                   <td align="center">'.$data['nama_exp_expor'].'</td>
                   <td align="center">'.$data['nama_distributor'].'</td>
                   <td align="center">'.$data['kota_tujuan'].'</td>
                   <td align="center">'.$data['no_faktur'].'</td>
                   <td align="center">'.$data['kon_armada'].'</td>
                   <td align="center">'.$data['ketepatan_jml'].'</td>
                   <td align="center">'.$data['ketepatan_wkt_kirim'].'</td> 
                   <td align="center">'.$data['ket'].'</td>  
                   </tr></table> ';

    $no++;             
    }

   $pdf->writeHTML($html, true, false, true, false, '');

   $pdf->Output('Daftar_Expedisi_Local', 'I');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:58:19.063

这些是你的一些台词，去掉了一些回声

```
 $query = mysql_query($sql);
 $data = mysql_fetch_array($sql);
 while($data = mysql_fetch_array($query)) 
```

第二行真的很奇怪：你做了一个额外的 fetch_array，但使用 sql-string 作为参数？这不是真的有用，那不是错误吗？

您应该清理其中的一些代码，例如，不要执行您不需要的额外“fetch_array”。如果在那之后它不起作用，请删除所有不需要调试的行（回声、颜色等）。你可以更快地找出发生了什么事情:)

当您使用它时，您应该真正考虑从`mysql_`功能中转移。[在手册http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)中阅读这个不错的大阅读警告

> 建议的替代品
> 
> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> mysqli_fetch_array()
> PDOStatement::fetch()

现在试试这个。作为一个“尽可能小”的例子，这是你首先应该做的。

```
<?php
  include "koneksi.php";//conection file
  $period=$_GET[PERIOD];  
  $sql = "SELECT * FROM tb_exp_expor where period = ' $period'";
  var_dump($sql);//you can check this query in your database manually

  $hasil = mysql_query($sql);       
  //NO FETCH ARRAY HERE!

   while ($data = mysql_fetch_array($hasil)){
        var_dump($data);
    }

?> 
```

请注意：

1.  删除额外的 fetch 数组。
2.  删除所有用于调试的 HTML 和 PDF 内容
3.  SMALL，尽可能的自包含代码。

# c# - ZMQ SNDMORE 和 NOBLOCK 的交互方式不同，具体取决于套接字是连接还是绑定

> ID：11773831
> 
> 赞同：1
> 
> 时间：2012-08-02T08:38:20.250
> 
> 标签：c#, zeromq

我正在为 zmq 使用 C# 绑定，并且我注意到 sndmore 和 noblock 的行为不同，具体取决于套接字是连接还是绑定。

如果没有客户端连接到端点，则以下场景会在第一次发送时阻塞：

```
 Context zmqContext = new Context(1);
        Socket zmqSocket = zmqContext.Socket(<any socket type>);

        zmqSocket.Bind("tcp://*:5555");

        zmqSocket.Send("hello", Encoding.UTF8, SendRecvOpt.SNDMORE);
        zmqSocket.Send("world", Encoding.UTF8, SendRecvOpt.SNDMORE);
        zmqSocket.Send("ok, I'm done!", Encoding.UTF8, SendRecvOpt.NOBLOCK); 
```

如果端点没有任何东西，这个根本不会阻塞：

```
 Context zmqContext = new Context(1);
        Socket zmqSocket = zmqContext.Socket(<any socket type>);

        zmqSocket.Connect("tcp://localhost:5555");

        zmqSocket.Send("hello", Encoding.UTF8, SendRecvOpt.SNDMORE);
        zmqSocket.Send("world", Encoding.UTF8, SendRecvOpt.SNDMORE);
        zmqSocket.Send("ok, I'm done!", Encoding.UTF8, SendRecvOpt.NOBLOCK); 
```

在一种情况下，我必须在所有发送上使用 noblock 标志，但在另一种情况下只能在最后一次发送上使用，这似乎有点奇怪。我在 zmq 文档中找不到与此相关的任何内容。谁能告诉我这是 zmq 的故意行为，还是 c# 绑定的特性？是否有任何我可能错过的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:28:19.360

这听起来像一个错误；绝对没有记录的行为。您可以将测试用例发送到 zeromq-dev 列表吗？最好在 C 中制作一个，这样我们就可以排除 C# 绑定。

# hibernate - 使用连接或子查询将 SQL 查询转换为动态查询

> ID：11773832
> 
> 赞同：0
> 
> 时间：2012-08-02T08:38:27.037
> 
> 标签：hibernate, liferay, dynamicquery, dynamic-queries

我有一个 SQL 查询（2 个变体），我需要将它与动态查询一起使用。

在 SQL 中看起来是这样（变体 1 // 通过子查询）：

```
SELECT AssetEntry.entryId , (
              SELECT COUNT(*)
              FROM `MBMessage`
              WHERE classPK = AssetEntry.classPK
            ) AS comments
            FROM `AssetEntry`
            ORDER BY comments DESC 
```

或者带有连接和组的替代查询：

```
SELECT AssetEntry.entryId, count(MBMessage.classPK)
 FROM `AssetEntry`
 JOIN MBMessage ON (AssetEntry.classPK = MBMessage.classPK)
 GROUP BY MBMessage.classPK 
```

两个 SQL 查询显示完全相同！

现在我需要使用其中之一作为动态查询。我不知道如何进行连接，也不知道如何在投影中进行子查询？！

有谁能够帮我？谢谢

* * *

我必须用 custom-sql 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:39:33.067

Your requirement is a really specific case, which requires an aggregate-function in the `SELECT` statement.

I would suggest using [Custom query](http://www.liferay.com/en/community/wiki/-/wiki/1071674/Custom+queries+in+Liferay+5.2) (also known as [`custom-sql`](http://arunkumarsrm.blogspot.in/2011/01/custom-sql-in-liferay-plugin-portlet.html) in liferay) with finders in your case, instead of a `DynamicQuery`.

DynamicQuery API has limitations and will not work in your case (*speaking from experience, so if somebody else has other opinions or facts regarding the below points I would be more than happy to know*):

1.  Joins are not possible with DynamicQuery.
2.  Its possible to return a `count` or to return an individual columns value using `Projection` but not possible to return a column and count to-gather using projections.
3.  Can use sub-query with DynamicQuery using projections but I don't think you can use a sub-query in the `select` statement with DynamicQuery.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:58:35.777

您还有另一种方法，使用 AssetEntryQuery。

```
AssetEntryQuery aeq = new AssetEntryQuery();
aeq.setClassName(MBMessage.class.getName());
aeq.set.... (Add any other criterions if you want to)
List<AssetEntry> assetEntries = AssetEntryServiceUtil.getEntries(aeq); 
```

# c# - P/Invoke Shell_NotifyIcon 支持不同的 NOTIFYICONDATA 版本

> ID：11773834
> 
> 赞同：1
> 
> 时间：2012-08-02T08:38:34.860
> 
> 标签：c#, pinvoke, marshalling, notifyicon

我正在尝试从 C#调用`Shell_NotifyIcon`函数 [ [1 ]。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762159.aspx)该函数的一个参数是指向`NOIFYICONDATA`结构[ [2](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773352.aspx) ]的指针。该结构包含`TCHAR`数组、指针，并且有 4 个不同的版本（取决于使用的 OS/API）。在将结构 ( `cbSize`) 中的第一个字段传递给`Shell_NotifyIcon`函数之前，调用者必须将其设置为结构的大小（以字节为单位）。

我目前的方法是使用 4 个类：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
[BestFitMapping(false, ThrowOnUnmappableChar = true)]
public class  NotifyIconData { ... }

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
[BestFitMapping(false, ThrowOnUnmappableChar = true)]
public class  NotifyIconData2 : NotifyIconData { ... }

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
[BestFitMapping(false, ThrowOnUnmappableChar = true)]
public class  NotifyIconData3 : NotifyIconData2 { ... }

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
[BestFitMapping(false, ThrowOnUnmappableChar = true)]
public class  NotifyIconData4 : NotifyIconData3 { ... } 
```

在构造函数中`NotifyIconData`我使用`Marshal.SizeOf(this.GetType());`来确定结构的大小。结果是正确的（至少在未管理的 Unicode/Ansi/x86/x64 构建中它与 , , 相同。`NOTIFYICONDATA_V1_SIZE`这种`NOTIFYICONDATA_V2_SIZE`方法的原因是我不想使用幻数，特别是因为填充已完成，因此需要计算结构的正确大小。在字段的实现中还涉及到一个小技巧。该字段可以是 64 个字符的数组（版本 1），也可以是 128个字符的数组（版本 2）。模拟该类包含以下字段定义：`NOTIFYICONDATA_V3_SIZE``sizeof(NOTIFYICONDATAW)``szTip``TCHAR``TCHAR``NotifyIconData`

```
 [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 64)]
    protected string szTip; 
```

在`NotifyIconData2`类中，我使用以下定义“扩展”该字段：

```
 [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 64)]
    private string szTipExtension; 
```

该字段是通过一个虚拟属性访问的，该属性处理实际值到两个字段的分段。

然后将这些类与`Shell_NotifyIcon`声明如下的函数一起使用：

```
 [UnmanagedFunctionPointer(CallingConvention.StdCall, CharSet = CharSet.Auto)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private delegate bool ShellNotifyIconFunction(
        [In, MarshalAs(UnmanagedType.U4)] uint dwMessage,
        [In] NotifyIconData lpdata); 
```

人们会相信我现在可以将一个`NotifyIconData4`实例传递给该函数。在编译时这有效（如预期的那样）。但在运行时我得到一个 MDA`FatalExecutionEngineError`异常。当我将参数类型从更改`NotifyIconData`为`NotifyIconData4`调用成功并且它可以工作。

Marshaller 似乎使用静态`NotifyIconData`类型而不是`NotifyIconData4`动态类型来编组数据。谁能证实这一点？或者任何人都可以向我指出有关编组如何与继承一起工作的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:04:19.360

当您声明只`ShellNotifyIconFunction`接受`NotifyIconData`基类使用的内存时，调用时会复制到非托管内存中。如果您在非托管端尝试根据成员的内容访问派生结构中的`cbSize`成员，则您正在访问 P/Invoke 层分配的数据范围之外的数据，这将导致错误。

要解决此问题，您可以根据正在运行的 Windows 版本进行自己的编组。

`ShellNotifyIconFunction`而不是声明as的第二个参数，`NotifyIconData`您应该将其声明为`IntPtr`. 然后，您需要分配和管理自己调用函数时提供的缓冲区的内容：

```
var notifyIconData = new NotifyIconData4(); // Or use another version depending on the
...                                         // version of Windows.
var buffer = IntPtr.Zero;
try {
  buffer = Marshal.AllocHGlobal(Marshal.SizeOf(notifyIconData));
  Marshal.StructureToPtr(notifyIconData, buffer, false);
  var result = ShellNotifyIconFunction(message, buffer);
  ...
}
finally {
  if (buffer != IntPtr.Zero)
    Marshal.FreeHGlobal(buffer);
} 
```

# linux - ^M char 在使用 echo | 时会创建额外的新行 邮件

> ID：11773835
> 
> 赞同：0
> 
> 时间：2012-08-02T08:38:39.410
> 
> 标签：linux, bash, echo

我有一个看起来像这样的文件：

```
> cat my.txt
This is sentence 1.
This is sentence 2.
<empty line>
This is sentence 3. 
```

在我的 bash 脚本中，当我添加尝试通过电子邮件发送文件时，会出现额外的一行。

```
#!/bin/bash
outf="/tmp/my.txt"
action=`cat $outf`
echo $action | mail -s "my test" emailid@mail.com 
```

这是电子邮件的样子：

```
This is sentence 1.
<empty line>
This is sentence 2.
<empty line>
<empty line>
This is sentence 3.
<empty line> 
```

如何删除多余的空行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:01:31.963

在 Unix 中，存在字符转写工具 'tr'

要删除 CR=13(dec)=0D(hex)=15(oct)：

```
tr -d '\015' < infile.txt > outfile.txt 
```

删除 LF=NL=10(dec)=12(oct)

```
tr -d '\012' < infile.txt > outfile.txt 
```

要删除两者：

```
tr -d '\015\012' < infile.txt > outfile.txt 
```

不太确定这在 linux 中是如何工作的，但是： http: [//linux.about.com/library/cmd/blcmdl1_tr.htm](http://linux.about.com/library/cmd/blcmdl1_tr.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:56:43.223

使用`-n`选项：

```
$ echo -n foo 
```

这将抑制换行符。

# python - 通过另一个列表的内容对一个列表的内容进行排序（Python）

> ID：11773836
> 
> 赞同：2
> 
> 时间：2012-08-02T08:38:41.480
> 
> 标签：python, list, sorting

我有两个由 .csv 文件创建的列表。第一个由分支 ID 号和相应流的列表组成。第二个是我希望对分支 id 及其对应的流进行排序的顺序。它们如下：

```
branch_flows = [['1234-2321-1', [55, 76, 3, 55, 6]],
                ['1546-2645-1', [4, 6, 56, 3, 4]],
                // ...
                ['4123-1234-1', [6, 12, -4, 7, 9]]
               ] 
```

和

```
ordered_branches = ['1234-2321-1',
                    '1234-4123-1',
                    // ...
                    '1546-2645-1'] 
```

我想知道如何以`branch_flows`相同的方式`ordered_branches`排序，但是排序后流与相同的 id 保持相关？主要困难是前两部分中的某些分支 id`branch_flows`是颠倒的，但我需要对它们进行排序，就好像它们没有排序一样。

例如，查看上面的列表，所需的输出将以`branch_flows`某种方式排序，最终列表 in`branch_flows`在排序列表中排在第二位（因为`1234-4123-1`in`ordered_branches`可以等于`1234-4123-1` *AND* `4123-1234-1` in `branch_list`，因为 in 的顺序`branch_flows`有时可能与 in 的顺序相反`ordered_branches`） .

我最初尝试使用字典作为查找表，但在阅读逆序部分时遇到了麻烦。非常感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:31:09.560

您需要为`key`Python函数构造一个适当的`sort`函数。

忽略逆序问题，这很容易：

```
def key(branch):
    id, flows = branch
    return ordered_branches.index(id) 
```

考虑到逆序问题，我们可以使用：

```
def key(branch):
    id, flows = branch
    try:
        return ordered_branches.index(id)
    except ValueError:
        parts = id.split('-')
        id = '-'.join((parts[1], parts[0], parts[2]))
        return ordered_branches.index(id) 
```

现在您可以排序`branch_flows`为`sorted(branch_flows, key=key)`.

* * *

`ordered_branches`您可以通过变成字典来加快速度：

```
order_dict = dict((x, i) for i, x in enumerate(ordered_branches)) 
```

而不是`ordered_branches.index(id)`使用`order_dict[id]`（也更改`ValueError`为`KeyError`）。

* * *

作为时空权衡，您可以在 dict 中构造相反顺序的 id：

```
def reverse_id(id):
    parts = id.split('-')
    return '-'.join((parts[1], parts[0], parts[2]))
order_dict = dict((x, i) for i, x in enumerate(ordered_branches))
order_dict.update((reverse_id(x), i) for x, i in order_dict.items()) 
```

现在您的关键功能看起来像：

```
def key(branch):
    id, flows = branch
    return order_dict[id] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:31:08.627

从表面上看，你似乎可以用一个 dict-build 和两个列表遍历来做到这一点（毕竟你已经有了排序的顺序）。

就像是：

```
flow_dict = {}
for flow in branch_flow:
    # Sometimes, there's a reversal of the two parts of the key.
    key_parts = flow[0].split('-')
    flow_dict['-'.join(key_parts)] = flow
    flow_dict['-'.join([key_parts[1], key_parts[0], key_parts[2])] = flow

branch_flows = [flow_dict[key] for key in ordered_branches] 
```

构建dict应该是O（n）（N次插入，每个都在摊销O（1）），遍历有序列表应该是O（n）并且从dict中获取值应该是O（1））。这可能比您通过排序所做的任何事情都要好。

# php - yii ajax xupload表单提交不起作用

> ID：11773839
> 
> 赞同：1
> 
> 时间：2012-08-02T08:38:57.877
> 
> 标签：php, yii, yii-extensions, yii-xupload

Q1：表单提交不起作用。

Q2：如何限制上传文件（例如仅 1 - 5 个文件）

status : 创建一个带有 ajax 上传[xupload的表单](http://www.yiiframework.com/extension/xupload/)

我的模型（fadepreciation.php）

```
public function afterSave( ) {
        $this->addImages( );
        parent::afterSave( );
    }

    public function addImages( ) {
        //If we have pending images
        if( Yii::app( )->user->hasState( 'images' ) ) {
            $userImages = Yii::app( )->user->getState( 'images' );
            //Resolve the final path for our images
            $path = Yii::app( )->getBasePath( )."/../images/uploads/{$this->id}/";
            //Create the folder and give permissions if it doesnt exists
            if( !is_dir( $path ) ) {
                mkdir( $path );
                chmod( $path, 0777 );
            }

            //Now lets create the corresponding models and move the files
            foreach( $userImages as $image ) {
                if( is_file( $image["path"] ) ) {
                    if( rename( $image["path"], $path.$image["filename"] ) ) {
                        chmod( $path.$image["filename"], 0777 );
                        $img = new Image( );
                        $img->size = $image["size"];
                        $img->mime = $image["mime"];
                        $img->name = $image["name"];
                        $img->source = "/images/uploads/{$this->id}/".$image["filename"];
                        $img->somemodel_id = $this->id;
                        if( !$img->save( ) ) {
                            //Its always good to log something
                            Yii::log( "Could not save Image:\n".CVarDumper::dumpAsString( 
                                $img->getErrors( ) ), CLogger::LEVEL_ERROR );
                            //this exception will rollback the transaction
                            throw new Exception( 'Could not save Image');
                        }
                    }
                } else {
                    //You can also throw an execption here to rollback the transaction
                    Yii::log( $image["path"]." is not a file", CLogger::LEVEL_WARNING );
                }
            }
            //Clear the user's session
            Yii::app( )->user->setState( 'images', null );
        }
    } 
```

我的观点 (_form.php)

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'fa-depreciation-form',
    'enableAjaxValidation'=>false,
    'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>
<!-- Other Fields... -->
        <div class="row">
            <?php echo $form->labelEx($model,'photos'); ?>
            <?php
            $this->widget( 'xupload.XUpload', array(
                'url' => Yii::app( )->createUrl( "/fadepreciation/upload"),
                //our XUploadForm
                'model' => $photos,
                //We set this for the widget to be able to target our own form
                'htmlOptions' => array('id'=>'fa-depreciation-form'),
                'attribute' => 'file',
                'multiple' => true,
                //Note that we are using a custom view for our widget
                //Thats becase the default widget includes the 'form' 
                //which we don't want here
                //'formView' => 'application.views.faDepreciation._form',
                )    
            );
            ?>
        </div>
    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

我的控制器（fadepreciation.php）

```
public function actionCreate()
    {
        $model=new FaDepreciation;
        Yii::import( "xupload.models.XUploadForm" );
        $photos = new XUploadForm;
        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['FaDepreciation']))
        {
            //Assign our safe attributes
            $model->attributes=$_POST['FaDepreciation'];
            //Start a transaction in case something goes wrong
            $transaction = Yii::app( )->db->beginTransaction( );
            try {
                //Save the model to the database
                if($model->save()){
                    $transaction->commit();
                    $this->redirect(array('view','id'=>$model->id));
                }
            } catch(Exception $e) {
                $transaction->rollback( );
                Yii::app( )->handleException( $e );
            }
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        Yii::import( "xupload.models.XUploadForm" );
        $photos = new XUploadForm;
        $this->render('create',array(
            'model'=>$model,
            'photos'=>$photos,
        ));

    }
public function actionUpload( ) // From xupload nothing change 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:05:37.190

您需要做的是创建一个自定义表单。从 xupload _form 复制内容并粘贴它，删除开始表单 - 结束表单。将自定义表单中的引用添加到您的小部件“formView”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T17:59:40.717

只需使用 'showForm' 参数，如下所示：

```
<?php
$this->widget( 'xupload.XUpload', array(
  ...
  'showForm' => false,
  ...
));
?> 
```

也许，这个选项被添加到下一个版本的 xupload 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:31:35.797

Q1：表单提交不起作用，因为 XUpload 小部件生成了自己的表单标签。所以您生成的 HTML 有一个嵌入在另一个表单中的表单，您应该使用`formView`小部件的选项来指向一个没有表单标签的视图，如[xupload 工作流 wiki中所述](http://www.yiiframework.com/wiki/348/xupload-workflow/)

Q2：您应该`maxNumberOfFiles`在小部件配置中使用选项

这一切都应该是这样的：

```
 <?php
            $this->widget( 'xupload.XUpload', array(
                'url' => Yii::app( )->createUrl( "/fadepreciation/upload"),
                //our XUploadForm
                'model' => $photos,
                //We set this for the widget to be able to target our own form
                'htmlOptions' => array('id'=>'fa-depreciation-form'),
                'attribute' => 'file',
                'multiple' => true,
                //Note that we are using a custom view for our widget
                //Thats becase the default widget includes the 'form' 
                //which we don't want here
                'formView' => 'application.views.faDepreciation._form',
                'options' => array('maxNumberOfFiles' => 5)
                )    
            );
            ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:51:33.980

提交表格有什么问题？

是的，文件限制可以做到。请确保您遵循这些[http://www.yiiframework.com/wiki/348/xupload-workflow/](http://www.yiiframework.com/wiki/348/xupload-workflow/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-14T20:25:31.427

我知道这是一篇旧帖子，但也许这个答案会帮助某人解决这个问题。

我发现这是由文件 /xupload/views/form.php 中的最后一行引起的（使用默认设置）。看起来 if 语句在某种程度上是相反的……在挖掘错误值时，它正在渲染代码。例如：

```
<?php 
echo $this->showForm; 
if($this->showForm) echo CHtml::endForm(); 
echo $this->showForm; 
?> 
```

返回： ![奇怪的输出](../Images/b0128aa42f083507b77241007fa81101.png)

也许我错过了一些东西，但它看起来很奇怪......不是吗？

# c++ - 如何在 C++ 中转换不同的数值向量类型

> ID：11773841
> 
> 赞同：2
> 
> 时间：2012-08-02T08:39:08.220
> 
> 标签：c++, stl

我的问题与 C++ 中的数字类型转换有关。一个非常常见的方法是使用 static_cast，例如：

```
float a;
int b;
a = 3.14;
b = static_cast<int>(a); 
```

那么，数值向量类型转换呢？我们可以继续使用 static_cast 吗？我做了以下实验：

```
typedef vector<int> IntVector;
typedef vector<float> FloatVector;
IntVector myvector;
myvector.push_back(3);
myvector.push_back(4);
myvector.push_back(5);

// Solution 1 (successful)
FloatVector solution1 ( myvector.begin(), myvector.end() );
for(int i=0; i<solution1.size(); i++)
   cout<<solution1[i]<<endl;
// Solution 2 (failed)
FloatVector solution2;
solution2 = static_cast<FloatVector> (myvector); 
```

似乎对于数字向量类型，不可能使用 static_cast 进行转换。我想知道这个问题是否有好的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:43:31.670

您可以使用[std::copy](http://www.sgi.com/tech/stl/copy.html)，因为它执行顺序分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:45:21.340

您既不能将带有模板参数 ( ) 的容器分配或强制转换为带有模板参数( )`T`的容器。毕竟他们是不同的阶级。`std::vector<int>``L``std::vector<float>`

~~但是，由于它们使用迭代器，因此您可以使用以下内容`FloatVector`填充[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)：~~

 ~~```
FloatVector solution2(myvector.size());

std::copy(myvector.begin(),myvector.end(),solution2.begin()); 
```~~  ~~**编辑**以[解决您的评论](https://stackoverflow.com/questions/11773841/how-can-i-convert-different-numeric-vector-type-in-c/11773944#comment15636352_11773841)：

如果您当前的功能签名是`f(FloatVector)`我建议您将其更改为

```
template< class T >
ReturnType f(std::vector<T> myVector, ....); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T08:55:09.887

该语言直接支持从一种数字类型到另一种的转换。你甚至不需要`static_cast`，你可以分配。这种转换涉及值的逻辑复制，而不是对值表示的重新解释。

该语言不直接支持不同类型的数组之间的转换，或者不同类型的数组之间的转换`std::vector`。

但是正如您所发现的，对复制元素有一些支持，然后当每个元素都是数字时，对每个元素的数字类型转换的内置支持就会启动。~~

# java - 错误 415 不支持的媒体类型：如果是 JSON，则 POST 未达到 REST，但如果是 XML，则可以

> ID：11773846
> 
> 赞同：83
> 
> 时间：2012-08-02T08:39:21.857
> 
> 标签：java, json, web-services, rest, post

我实际上是 REST WS 的新手，但我真的不明白`415 Unsupported Media Type`。

我正在 Firefox 上使用 Poster 测试我的 REST，并且`GET`对我来说工作正常，`POST`（当它是 a`application/xml`时）但是当我尝试`application/json`它根本没有到达 WS 时，服务器拒绝它。

这是我的网址：http://localhost:8081/RestDemo/services/customers/add

这是`JSON`我要发送的：`{"name": "test1", "address" :"test2"}`

这是`XML`我要发送的：

```
<customer>
    <name>test1</name>
    <address>test2</address>
</customer> 
```

这是我的资源类：

```
@Produces("application/xml")
@Path("customers")
@Singleton
@XmlRootElement(name = "customers")
public class CustomerResource {

    private TreeMap<Integer, Customer> customerMap = new TreeMap<Integer, Customer>();

    public  CustomerResource() {
        // hardcode a single customer into the database for demonstration
        // purposes
        Customer customer = new Customer();
        customer.setName("Harold Abernathy");
        customer.setAddress("Sheffield, UK");
        addCustomer(customer);
    }

    @GET
    @XmlElement(name = "customer")
    public List<Customer> getCustomers() {
        List<Customer> customers = new ArrayList<Customer>();
        customers.addAll(customerMap.values());
        return customers;
    }

    @GET
    @Path("/{id}")
    @Produces("application/json")
    public String getCustomer(@PathParam("id") int cId) {
        Customer customer = customerMap.get(cId); 
        return  "{\"name\": \" " + customer.getName() + " \", \"address\": \"" + customer.getAddress() + "\"}";

    }

    @POST
    @Path("/add")
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public String addCustomer(Customer customer) {
         //insert 
         int id = customerMap.size();
         customer.setId(id);
         customerMap.put(id, customer);
         //get inserted
         Customer result = customerMap.get(id);

         return  "{\"id\": \" " + result.getId() + " \", \"name\": \" " + result.getName() + " \", \"address\": \"" + result.getAddress() + "\"}";
    }

} 
```

**编辑1：**

这是我的客户类：

```
@XmlRootElement 
public class Customer implements Serializable {

    private int id;
    private String name;
    private String address;

    public Customer() {
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

} 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-11-21T08:40:31.320

在 REST Client 标头部分中添加`Content-Type: application/json`和`Accept: application/json`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-02T08:55:51.560

问题在于 bean Customer 的反序列化。您的程序知道如何在 XML 中使用 Daniel 编写的 JAXB，但很可能不知道如何在 JSON 中进行。

这里有一个 Resteasy/Jackson 的例子 [http://www.mkyong.com/webservices/jax-rs/integrate-jackson-with-resteasy/](http://www.mkyong.com/webservices/jax-rs/integrate-jackson-with-resteasy/)

与泽西岛相同： [http ://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/](http://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-03-14T19:47:28.327

以防万一这对其他人有帮助，这是我的轶事：

我发现这个线程是因为我在使用 Postman 将测试数据发送到我的 RESTEasy 服务器时遇到的一个问题，在进行重大代码更改之后，我得到的只是 415 Unsupported Media Type 错误。

长话短说，我把所有东西都撕掉了，最终我尝试运行我知道可行的简单文件上传示例；它没有。那时我意识到问题出在我的邮递员请求上。我通常不发送任何特殊的标头，但在之前的测试中，我添加了一个“Content-Type”：“application/json”标头。当然，我试图上传“multipart/form-data”。删除它解决了我的问题。

道德：在炸毁你的世界之前检查你的标题。;)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-30T18:51:45.610

我遇到了这个问题，发现问题是我没有注册 JacksonFeature 类：

```
// Create JAX-RS application.
final Application application = new ResourceConfig()
    ...
    .register(JacksonFeature.class); 
```

如果不这样做，您的应用程序将不知道如何将 JSON 转换为 java 对象。

[https://jersey.java.net/documentation/latest/media.html#json.jackson](https://jersey.java.net/documentation/latest/media.html#json.jackson)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-09T14:03:14.800

我有同样的问题：

> curl -v -H "Content-Type: application/json" -X PUT -d '{"name":"json","surname":"gson","married":true,"age":32,"工资”：123，“hasCar”：true，“孩子”：[“serkan”，“volkan”，“aybars”]}' XXXXXX/ponyo/UserModel/json

```
* About to connect() to localhost port 8081 (#0)
*   Trying ::1...
* Connection refused
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 8081 (#0)
> PUT /ponyo/UserModel/json HTTP/1.1
> User-Agent: curl/7.28.1
> Host: localhost:8081
> Accept: */*
> Content-Type: application/json
> Content-Length: 121
> 
* upload completely sent off: 121 out of 121 bytes
< HTTP/1.1 415 Unsupported Media Type
< Content-Type: text/html; charset=iso-8859-1
< Date: Wed, 09 Apr 2014 13:55:43 GMT
< Content-Length: 0
< 
* Connection #0 to host localhost left intact
* Closing connection #0 
```

我通过将依赖项添加到 pom.xml 来解决它，如下所示。请尝试一下。

```
 <dependency>
        <groupId>com.owlike</groupId>
        <artifactId>genson</artifactId>
        <version>0.98</version>
    </dependency> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-07T11:30:58.237

我得到同样的问题。事实上，请求并没有达到球衣注释的方法。我通过添加注释解决了这个问题：@Consumes(MediaType.APPLICATION_FORM_URLENCODED) 注释@Consumes(" */* ") 不起作用！

```
 @Path("/"+PropertiesHabilitation.KEY_EstNouvelleGH)
    @POST
    //@Consumes("*/*")
    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)
    public void  get__EstNouvelleGH( @Context HttpServletResponse response) {
        ...
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T08:49:24.530

不要在您的方法中返回字符串，而是将 Customer 对象自己返回并让 JAXB 负责反序列化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-21T16:21:31.847

我遇到了同样的问题，因为它在使用 json 进行通话后给出**错误 415-unsupported-media-type**而我已经有了

```
@Consumes(MediaType.APPLICATION_JSON) 
```

**并使用 Jersey 2.0+**在我的宁静 Web 服务中请求标头

 **```
Accept:application/json
Content-Type:application/json 
```

我通过向我的项目添加以下依赖项解决了这个问题

```
<dependency>
<groupId>org.glassfish.jersey.media</groupId>
<artifactId>jersey-media-json-jackson</artifactId>
<version>2.25</version>
</dependency> 
```

这会将以下 jar 添加到您的库中：

1.  jersey-media-json-jackson-2.25.jar
2.  jersey-entity-filtering-2.25.jar
3.  jackson-module-jaxb-annotations-2.8.4.jar
4.  杰克逊-jaxrs-json-provider-2.8.4.jar
5.  杰克逊-jaxrs-base-2.8.4.jar

我希望它也适用于其他人，就像它对我一样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-10T05:56:47.900

当您将 JSON 与 POST/PUT 等一起使用时，只需将内容类型更改为 application/json...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-14T10:41:30.913

如果您尝试使用来自 google 的 ARC 应用程序并发布 a`XML`并且您收到此错误，请尝试将正文内容类型更改为`application/xml`. [这里的例子](https://i.stack.imgur.com/69eRt.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-07T16:09:47.697

我在邮递员中遇到了同样的问题，我在标题部分选择了接受并将值提供为“应用程序/json”。所以我取消选中并选择了 Content-Type 并将值提供为“application/json”。那行得通！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-07T09:57:26.980

如果没有一个解决方案有效并且您正在使用 JAXB，那么您需要注释您的类`@XmlRootElement` 以避免`415 unsupported media type`

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-06-14T17:18:06.193

我在邮递员中使用时遇到了类似的问题。对于标题部分下的 POST 请求，将这些添加为

键：值对

内容类型：应用程序/json 接受：应用程序/json

我希望它会奏效。**

# android - 没有获得标签面板的文本框值？

> ID：11773849
> 
> 赞同：0
> 
> 时间：2012-08-02T08:39:30.907
> 
> 标签：android, sencha-touch, sencha-touch-2

在我的应用程序中，我在屏幕底部有一个选项卡面板。这三个选项卡是主页、添加愿望日志和添加反馈。现在，当我单击主页选项卡时，它会显示一些图标。在添加愿望日志和添加反馈选项卡中，我添加了一些文本框和一些按钮。我在屏幕中添加了如下所示的 addwishlog 选项卡

```
{
        xtype : 'addwishlog',
        styleHtmlContent : true,
        title : '+ Wishlog',
        iconCls : 'favorites',
    }, 
```

这是 addwishlog.js 文件:::

```
 Ext.define('MyApp.view.AddtoWishlog', {
                    extend : 'Ext.Container',
                    xtype : 'addwishlog',
                    config : {
                        ui : 'light',
                        scrollable: {
                            direction: 'vertical',
                            directionLock: true
                        },
                        items : [
                                {
                                    xtype : 'container',
                                    id : 'LoginScreen',
                                    docked : 'top',
                                    items : [
                                            {
                                                xtype : 'image',
                                                docked : 'left',
                                                height : 92,
                                                id : 'Logoimage',
                                                ui : '',
                                                width : 120,
                                                src : 'app/images/small_logo.png'
                                            },
                                            {
                                                xtype : 'titlebar',
                                                cls : 'mytitlebar',
                                                docked : 'top',
                                                height : 80,
                                                ui : 'blue',
                                                items : [ {
                                                    xtype : 'label',
                                                    height : 36,
                                                    html : 'Add to Wishlog',
                                                    id : 'title',
                                                    margin : 20,
                                                    style : 'font: normal Bold 20px droid sans; color:#AB3951',
                                                } ]
                                            } ]
                                },
                                {
                                    xtype : 'panel',                                    
                                    autoHeight: true,
                                    items: [{
                                        xtype : 'container',
                                        id : 'dashboardiconcontainer',
                                        height: 400,
                                        layout: 'vbox',
                                        items : [
                                                {
                                                    xtype : 'container',
                                                    id : 'topitembox',
                                                    layout : {
                                                        type : 'hbox'
                                                    },
                                                    margin : '10 0 0 10',
                                                    height : 50,
                                                    items : [ {
                                                        xtype : 'textfield',
                                                        id : 'itemname',
                                                        labelWidth : '40%',
                                                        label : 'Name of the item',
                                                        width : 320
                                                    }, {
                                                        xtype : 'textfield',
                                                        id : 'barcodetextfield',
                                                        width : 300,
//                                                        value: 'test', 
                                                        margin : '0 0 0 10',
                                                        labelWidth : '40%',
                                                        label : 'Enter Barcode'
                                                    }, {
                                                        xtype : 'button',
                                                        height : 40,
                                                        scope: this,
                                                        margin : '0 0 0 10',
                                                        id : 'scanbutton',
                                                        ui : 'orange',
                                                        width : '80',
                                                        text : 'scan barcode'
                                                    } ]
                                                },

                                                {
                                                    xtype : 'container',
                                                    height : 160,
                                                    id : 'cameraimagecontainer',
                                                    margin : '10 0 0 10',
                                                    layout : {
                                                        type : 'hbox'
                                                    },
                                                    items : [
                                                            {

                                                                html : '<img style="width:180px; height:150px;display:none;" id="capturedimage" src="" />'
                                                            },
                                                            {
                                                                xtype : 'container',
                                                                id : 'btncontainer',
                                                                width : 120,
                                                                margin : '0 0 0 10',
                                                                layout : {
                                                                    type : 'vbox'
                                                                },
                                                                items : [
                                                                        {
                                                                            xtype : 'button',
                                                                            height : 73,
                                                                            cls : 'capturebtn',
                                                                            id : 'capturebtn',
                                                                            width : 100
                                                                        },
                                                                        {
                                                                            xtype : 'button',
                                                                            height : 73,
                                                                            margin : '10 0 0 0',
                                                                            cls : 'choosephotobtn',
                                                                            id : 'selectphoto',
                                                                            width : 100
                                                                        } ]
                                                            },

                                                            {
                                                                xtype : 'container',
                                                                id : 'additionalinfo',
                                                                margin : '10 0 0 10',
                                                                width : 400,
                                                                layout : {
                                                                    type : 'vbox'
                                                                },
                                                                items : [
                                                                        {
                                                                            xtype : 'textareafield',
                                                                            height : 80,
                                                                            width : 380,
                                                                            id : 'additionalinfo',
                                                                            label : 'Add Additiona Details',
                                                                            labelWidth : '40%',
                                                                            placeHolder : ''
                                                                        },
                                                                        {
                                                                            xtype : 'selectfield',
                                                                            margin : '5 0 0 0',
                                                                            width : 300,
                                                                            label : 'Select Category',
                                                                            options : [
                                                                                    {
                                                                                        text : 'Food',
                                                                                        value : 'first'
                                                                                    },
                                                                                    {
                                                                                        text : 'Sports',
                                                                                        value : 'second'
                                                                                    },
                                                                                    {
                                                                                        text : 'Electronics',
                                                                                        value : 'third'
                                                                                    } ],
                                                                            labelWidth : '40%'
                                                                        },
                                                                        {
                                                                            xtype : 'textareafield',
                                                                            id : 'Addmoretag',
                                                                            margin : '10 0 0 0',
                                                                            width : 320,
                                                                            placeHolder : 'Add any other tags you want '
                                                                        },
                                                                        {
                                                                             xtype : 'button',
                                                                             height : 54,
                                                                             id : 'Addwishlog',
                                                                             margin : '10 0 0 0',
                                                                             ui : 'orange',
                                                                             width : 250,
                                                                             text : 'Add to my wishlog'
                                                                             }

                                                                        ]
                                                            } ]
                                                } ]
                                    }]
                                } ]
                    }
                }); 
```

我也为 addFeedback 做同样的事情。现在，当我尝试从 addWislog 屏幕中获取任何文本字段的值时，我收到了错误消息。有时它告诉 getValue() 方法不适用于此对象..在尝试使用时

```
this.getIDofTextbox().getValue(); 
```

尽管我在控制器中使用了正确的参考。如果我尝试使用 getCmp()，我会得到空值。

我真的很困惑，因为对于其他屏幕，我从文本框中获取值。我只在这个 tabpanel js 文件中遇到的问题。

这是我的 app.js 文件：

```
 Ext.Loader.setConfig({
    enabled : true
});

Ext.application({
    views : ['dashboardpanel', 'TitlePanel', 'wishlogsummary', 'ConsumerSignup', 'FeedbackSummary', 'ConsumerSignin', 'AddFeedback'],
    models : [ 'MyModel', 'wishlistmodel', 'feedbacksummarymodel' , 'loginmodel'],
    stores : [ 'name', 'wishlistsummarystore', 'feedbacksummarystore' ],
    name : 'MyApp',
    controllers : [ 'MyController' ],
    requires:['Ext.ux.touch.Rating'],

    fullscreen: true,

    launch : function() {

        var Login = {
                xtype: 'login'
        }
        var Dashboard = {
                xtype: 'dashboard'
        }

        var Wishlogsummary = {
                xtype: 'wishlogsummarylist'
        }

        var AddtoWishlog = {
                xtype: 'addwishlog'
        }
        var Consumersignup = {
                xtype: 'consumersignup'
        }
        var FeedbackSummaryList = {
                xtype: 'feedbacksummarylist'
        }
        var Consumersignin = {
                xtype: 'Consumersignin'
        }

        Ext.Viewport.add([Login,Dashboard,Wishlogsummary, FeedbackSummaryList,Consumersignup,Consumersignin]);
    }

}); 
```

我是否必须更改应用程序架构中的某些内容？

请帮助，因为我在这个问题上停留了很长时间并且无法找到解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:34:29.087

实际上，我的架构存在一些问题。现在我能够修复它。

# c# - C# dataGridView 没有 DataContext

> ID：11773850
> 
> 赞同：1
> 
> 时间：2012-08-02T08:39:32.153
> 
> 标签：c#, datagridview, datacontext

atm 我正在尝试编写一个代码，它将用 MySQL 中的数据填充我的 DataGridView

```
string sql2Params = "Database=" + database + ";Data Source=" + host + ";User Id=" + user + ";Password=" + pass;
        string sql2Query = "SELECT * FROM `wagons` WHERE 1";

        //MySqlConnection sql2Connection = new MySqlConnection(sql2Params);
        //MySqlCommand sql2Command = new MySqlCommand(sql2Query, sql2Connection);

        using (MySqlConnection connection = new MySqlConnection(sql2Params))
        {
            connection.Open();
            using (MySqlCommand cmdSel = new MySqlCommand(sql2Query, connection))
            {
                DataTable dt = new DataTable();
                MySqlDataAdapter da = new MySqlDataAdapter(cmdSel);
                da.Fill(dt);
                wagonDataGrid.DataContext = dt;
            }
            connection.Close();
        } 
```

我找到了这个，然后在不同的网站上检查它是正确的，并试图在我自己的项目中使用，但我得到了错误

```
Error   1   'System.Windows.Forms.DataGridView' does not contain a definition for 'DataContext' and no extension method 'DataContext' accepting a first argument of type 'System.Windows.Forms.DataGridView' could be found (are you missing a using directive or an assembly reference?) 
```

这可以是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:42:00.667

使用DataSource而不是DataContext，winform datagrid中没有属性DataContext

# php - sqlite 永久在内存中

> ID：11773853
> 
> 赞同：1
> 
> 时间：2012-08-02T08:39:34.353
> 
> 标签：php, sqlite

PHP 是否能够将 sqlite 数据作为内存数据库处理？

我有一个 <50MB 的数据库，并且想要一个 php 脚本对 sqlite 执行 SELECT（如果可能的话还有 UPDATE），而不会每次都读取或写入缓慢的磁盘文件，脚本运行。

使用 java 和 c++ 我知道很好的用例，但是如何强制 PHP 访问内存中的 sqlite 而无需一次又一次地重新加载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:00:48.140

有多种方法可以做到：

1.  什么都不做，让操作系统将数据库缓存在磁盘缓存/内存缓冲区中。如果您有一个小型数据库（并且 <50 MB 很小），并且您有大量内存，这很好。

2.  使用 a`tmpfs`并在其中复制您的数据库文件，然后在 PHP 中打开它。

3.  使用`sqlite://:memory:`（但您将从空白数据库开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:57:15.907

[在内存中 sql 数据库](http://www.sqlite.org/inmemorydb.html)可能是您正在寻找的。

# ajax - ajax内的表单提交

> ID：11773856
> 
> 赞同：0
> 
> 时间：2012-08-02T08:39:36.657
> 
> 标签：ajax, web2py

在我的按钮 onClick 上的应用程序中，我正在使用 ajax 在叠加层中加载表单。但是这个提交不会重定向到所需的页面。

我已经尝试过没有 ajax 和覆盖的相同表单元素，然后它工作正常。所以表单元素没有问题。我想我缺少一些设置来调用 ajax 中的表单提交。

我正在使用 Web2py 应用程序。

我将不胜感激任何建议。

编辑：我还有一个类似的问题。我正在使用 ajax 在叠加层中为 db-table 显示 web2py SQLFORM。表单提交和数据更新工作正常。但是在提交表单后，我想关闭覆盖并重新加载页面。现在，它在叠加层内显示“服务器错误”。我正在使用 LOAD() 在叠加层上加载表单。

# python - 使用 pandas 重采样函数对每小时值进行上采样时出现意外结果

> ID：11773862
> 
> 赞同：2
> 
> 时间：2012-08-02T08:40:01.030
> 
> 标签：python, time-series, pandas

我尝试`TimeSeries`使用 pandas resample 函数对每日值进行上采样。当我对一天（2012-01-01）进行上采样时，我希望结果是考虑进行上采样的当天的平均值。结果应如下所示：

```
2012-01-01   -0,285344
Freq: D 
```

但是，熊猫会像这样返回两天：

```
2012-01-01   -0.412417
2012-01-02    0.127073
Freq: D 
```

这是错误还是功能？如果它是一项功能，我该如何设置重采样参数以实现我的目标？

谢谢，托马斯

这是完整的示例：

```
In [66]: rng = date_range('1/1/2012', periods=24, freq='H')

In [67]: ts = Series(np.random.randn(len(rng)), index=rng)

In [68]: ts
Out[68]:
2012-01-01 00:00:00   -0.412417
2012-01-01 01:00:00    0.442482
2012-01-01 02:00:00    1.321009
2012-01-01 03:00:00    0.104408
2012-01-01 04:00:00    1.124611
2012-01-01 05:00:00   -1.041293
2012-01-01 06:00:00    1.194104
2012-01-01 07:00:00   -0.249706
2012-01-01 08:00:00    1.927320
2012-01-01 09:00:00   -0.828365
2012-01-01 10:00:00    0.163760
2012-01-01 11:00:00   -0.736053
2012-01-01 12:00:00   -0.323408
2012-01-01 13:00:00    1.478162
2012-01-01 14:00:00    1.449437
2012-01-01 15:00:00   -1.114443
2012-01-01 16:00:00   -0.003780
2012-01-01 17:00:00    0.554562
2012-01-01 18:00:00   -2.019614
2012-01-01 19:00:00    0.463484
2012-01-01 20:00:00    0.862818
2012-01-01 21:00:00   -1.280048
2012-01-01 22:00:00   -0.137987
2012-01-01 23:00:00   -0.428777
Freq: H

In [69]: ts.resample('D')
Out[69]:
2012-01-01   -0.412417
2012-01-02    0.127073
Freq: D 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:05:01.480

您可以使用 loffset 和 closed 选项获得您想要的结果。

```
>>> ts.resample('D', how='mean', closed="left", loffset=datetime.timedelta(days=-1))
2012-01-01    0.200299 
```

# java - Modbus 协议转义线程 (Android,Jamod)

> ID：11773864
> 
> 赞同：0
> 
> 时间：2012-08-02T08:40:12.700
> 
> 标签：java, android, multithreading, tcp, modbus

我正在尝试使用 ModBus 协议连接到 PLC。我正在从线程调用 ModBus 连接方法，并且我正在主线程上运行通信时遇到异常......我想知道它在哪里逃脱......

例外：

```
 08-02 10:48:44.461: W/System.err(4395): android.os.NetworkOnMainThreadException
    08-02 10:48:44.471: W/System.err(4395):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
    08-02 10:48:44.471: W/System.err(4395):     at 
```

代码：

```
 package com.kikudjiro.android.echo;

    import net.wimpi.modbus.facade.ModbusTCPMaster;
    import android.app.Activity;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;

    public class settings extends Activity implements Runnable {

        Button connect_b, disconnect_b;
        Thread comm = new Thread(this);

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.settings);
            addListenerOnButton();
        }

        public void addListenerOnButton() {

            connect_b = (Button) findViewById(R.id.button1);
            disconnect_b = (Button) findViewById(R.id.button2);
            connect_b.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    comm.run();
                }

            });

            disconnect_b.setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {
                    comm.interrupt();
                }

            });
        }

        // @Override
        public void run() {

            try {
                ModbusTCPMaster MB = new ModbusTCPMaster("192.168.107.29", 502);
                //while (!comm.interrupted()) {
                    Log.i("!!!!!!!", "try!");
                    MB.connect();
                    MB.writeCoil(1, 1, true);
                    MB.disconnect();
                //}
            }

            catch (Exception ex) {
                ex.printStackTrace();
                Log.i("hhh", "exceptionas!!!");
            } finally {
                Log.i("!!!!!!!", "finally!");
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:48:10.333

单击按钮时，您调用`comm.run()`的只是`run()`直接在 UI 线程的上下文中执行该方法。这是一个常见错误，您永远不应该`run()`直接调用`Thread`实例。用于`comm.start()`在工作线程的上下文中执行 Modbus 代码。

[这是Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#start%28%29)

# objective-c - 如何从应用程序加载 xib 并显示自定义框架的窗口

> ID：11773866
> 
> 赞同：3
> 
> 时间：2012-08-02T08:40:23.167
> 
> 标签：objective-c, macos, frameworks, loadnibnamed

我创建了一个框架并添加了一个名为“MyXibFile”的 xib 文件。我创建了一个单独的应用程序并将这个框架添加到其中。我想加载这个`.xib`文件来显示它的窗口。

我正在使用以下不起作用的代码片段

```
-(void)launchDownloaderWindow
{
    if (![NSBundle loadNibNamed:@"Download" owner:self]) 
    {
        NSLog(@"Nib loading failed");;
    } 

    [appWindow makeKeyAndOrderFront:nil];
} 
```

我可以在控制台中看到消息“笔尖加载失败”有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T17:29:09.610

我可以想到一种稍微不同的方式来做到这一点。在您创建的框架中创建一个类，可能是一个`NSWindowController`，并让它为您加载并返回窗口。例如，在导入框架后，您可以初始化窗口控制器并创建对其创建的窗口的强引用。

**窗口控制器.m**

```
@implementation WindowController

- (id)init {
    self = [super initWithWindowNibName:@"WindowController"];
    ...
    return self;
}

@end 
```

**我的应用程序**

```
- (void)showSomeWindow {
    WindowController *wc = [[WindowController alloc] init];
    self.appWindow = wc.window;

    [self.appWindow makeKeyAndOrderFront:self];
} 
```

# slony - Slony 集群成功创建并同步，但没有进一步的复制

> ID：11773867
> 
> 赞同：0
> 
> 时间：2012-08-02T08:40:25.783
> 
> 标签：slony

德布。挤压，Postgres 8.4，Slony 1.2.21

我创建了一个主 > 从集群，它已经完成了初始复制。但是，我无法获得更多数据来复制。我一直对应该运行哪些命令来在每一端启动所需的进程/守护进程感到有点困惑。

任何人都可以启发我吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:11:45.807

好的，把小虫子整理好了。潜在的 Slony 用户注意到（当前）Slony 不复制 Truncate 语句，而是使用 delete from。

这意味着我的原始数据还在slave中，并且PK与新数据发生冲突，因此没有更新。

# php - PHP表单从foreach的数组中写入没有值到db

> ID：11773868
> 
> 赞同：0
> 
> 时间：2012-08-02T08:40:25.937
> 
> 标签：php, mysql, foreach

我有一个表单，它从一个名为 question3 的输入数组中收集信息，然后我将它发布到进程 php 页面，它不会向数据库中的评论字段写入任何内容，或者取决于我尝试将“数组”写入所有评论字段的爆炸函数.

任何意见，将不胜感激。

这是代码：

```
foreach ($_POST['question3'] as $key3 => $ans3) {
        $write = (explode(" ",$_POST['question3']));
        echo "</BR>";
        mysql_query("UPDATE trn SET comments = '$write' WHERE id = '$key3'");
        if (mysql_affected_rows() == 1) {
            $sql1 = "SELECT * FROM trn WHERE id = '$key3'";
            $res1 = mysql_query($sql1);
            while ($row1 = mysql_fetch_assoc($res1)) {
                $userid           = $row1['usr_id'];
                $certificate_name = $row1['certificate_name'];
                $comment = $row1['comments']; 
            } //$row1 = mysql_fetch_assoc($res1)
            if ($comment == NULL) {
                echo "Successfully updated <font color=blue>$certificate_name</font> to comments = <font color=green>y</font>";
            } else {
                $sql2 = "SELECT * FROM ex_usrs WHERE id = '$userid'";
                $res2 = mysql_query($sql2);
                while ($row2 = mysql_fetch_assoc($res2)) {
                    $fn = $row2['firstname'];
                    $ln = $row2['lastname'];
                } //$row2 = mysql_fetch_assoc($res2)
                echo "Successfully updated <font color=blue>$fn $ln</font> to comments = <font color=green>y</font>";
            }
        } //mysql_affected_rows() == 1
    } //$_POST['question'] as $key => $ans 
```

这是 var_dump 显示的内容：

```
array(4) {
    [743]=> array(1) {
        [0]=> string(5) "Mercy" 
    } 
    [748]=> array(1) { 
        [0]=> string(6) "Anelie" 
    } 
    [749]=> array(1) { 
        [0]=> string(6) "Bealah" 
    } 
    [750]=> array(1) { 
        [0]=> string(4) "Theo" 
    } 
} 
```

这些值是从之前发布的表单页面中获得的。这是一个内部网站，没有外部链接，所以不担心黑客攻击。

这是我要输入的表单部分。

```
 $sql7 = "SELECT * FROM trn WHERE course_id = '$sel_course_id' AND date_1 = '$sel_date_1' and date_2 = '$sel_date_2'";
    $res6 = mysql_query($sql7);
    while ($row6 = mysql_fetch_assoc($res6)) {
        $rowid6             = $row6['id'];
        $uid5               = $row6['usr_id'];
        $certificate_name5  = $row6['certificate_name'];
        $certificate_issued5 = $row6['certificate_issued'];
        $comm7 = $row6['comments'];
        if ($uid5 == 'x') {
            echo "<tr>";
            echo "<td>";
            $checked7 = "";
            if ($comm7 == '') {
$checked7 = "$comm7";
            } else {
                $checked7 = "$comm7";
}
            echo "<input name='question3[$rowid6][]' type='text' style='width: 675px; height: 30px;' type='text' maxlength='160' $checked7 value='$comm7' />$certificate_name5" . " - Not registered on users table";
            echo "</td>";
        } else {
            $sql8 = "SELECT * FROM ex_usrs WHERE id = '$uid5'";
            $res7 = mysql_query($sql8);
            while ($row7 = mysql_fetch_assoc($res7)) {
                $fn6 = $row7['firstname'];
                $ln6 = $row7['lastname'];
                $com7 = $row7['comments'];
            } 
            $checked8 = "$comm7";
            if ($comm7 == '') {
$checked8 = "$comm7";
            } else {
                $checked8 = "$comm7";
}
            echo "              <tr>";
            echo "                  <td>";
            echo "<input name='question3[$rowid6][]' type='text' style='width: 675px; height: 30px;' type='text' maxlength='160' $checked8 value='$comm7'/>$fn6 $ln6";
            echo "</td>";
        } 
    } 
    echo "              </tr>";
    echo "          </table>";
    echo "          </td>";
    echo "      </tr>";
    echo "      <tr>";
    echo "          <td>&nbsp;</td>";
    echo "          <td><input name='Submit1' type='submit' value='submit'></td>";
    echo "      </tr>";
    echo "  </table>";
    echo "</form>"; 
```

# c++ - Boost::Intrusive 中 splay_multiset 的成员钩子实现

> ID：11773869
> 
> 赞同：0
> 
> 时间：2012-08-02T08:40:39.400
> 
> 标签：c++, visual-c++, boost, intrusive-containers

我在 Visual C++ 2008 上为我的一个项目实施 boost::intrusive，我偶然发现了一个问题。我正在为 splay_multiset 容器使用 splay 钩子。我已经在 MyClass（下面的代码）下公开定义了 splay 钩子。

```
#include <boost/intrusive/unordered_set.hpp>
#include <boost/intrusive/splay_set.hpp>
#include <iostream>

using namespace boost::intrusive;

class MyClass 
{              
   int int_;

   public:

   MyClass(int i)
      :  int_(i)
   {}

   splay_set_member_hook<link_mode<normal_link> > memberSplayHook;

//**OPTION-1**
//PROBLEM CODE SEGMENT ++
//typedef member_hook<MyClass, splay_set_member_hook<link_mode<normal_link> >, &MyClass::memberSplayHook> MemberOption;       
//typedef splay_multiset<MyClass, MemberOption> MemberMultiSet; 
//PROBLEM CODE SEGMENT --

    MemberMultiSet mmset;
};

//**OPTION-2**
//WORKING CODE SEGMENT ++
typedef member_hook<MyClass, splay_set_member_hook<link_mode<normal_link> >, &MyClass::memberSplayHook> MemberOption;       
typedef splay_multiset<MyClass, MemberOption> MemberMultiSet; 
//WORKING CODE SEGMENT --

int main()
{
   return 0;
} 
```

问题是，要使用 splay_multiset，无论我选择什么选项（选项 1 或 2，在代码中提到），在这两种情况下我都会看到编译错误。

启用选项 1 时（选项 2 已注释），我看到以下错误：

```
1>d:\projects\sampleproject\sample.cpp(21) : error C2327: 'MyClass::memberSplayHook' : is not a type name, static, or enumerator
1>d:\projects\sampleproject\sample.cpp(21) : error C2065: 'memberSplayHook' : undeclared identifier
1>d:\projects\sampleproject\sample.cpp(22) : error C3203: 'member_hook' : unspecialized class template can't be used as a template argument for template parameter 'O1', expected a real type 
```

同时，当启用选项 2（选项 1 被注释掉）时，我没有看到未声明的标识符错误消息，因为这些错误与选项 1 一起出现。但我确实看到如下错误（很明显）。

```
1>d:\projects\sampleproject\sample.cpp(25) : error C2146: syntax error : missing ';' before identifier 'mmset'
1>d:\projects\sampleproject\sample.cpp(25) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

我的问题是为什么我在第一种情况下会出错？我该怎么做才能通过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:21:48.960

Boost 成员钩子（总是？）被破坏了，因为它们不能用 Visual C++ 编译。

我手头没有 VS 来检查准确的错误消息，所以我可能是错的（但阅读“成员挂钩”和“Visual C++”总是触发“有问题”模式），但请尝试检查这个：

[http://permalink.gmane.org/gmane.comp.lib.boost.user/56875](http://permalink.gmane.org/gmane.comp.lib.boost.user/56875)

编辑：不要从字面上看标题——这同样适用于 Visual C++ 2010 和 2012。我所有的成员挂钩都使用这种解决方法；在某些时候，我什至可能会尝试了解它的作用，或者更重要的是，如何将其打包成更舒适的设置，以减少“我需要找到此解决方法的先前实现，以便我可以复制和修改它”。 ..

# amazon-s3 - Elasticsearch 将元数据写入 S3 存储桶，但不将计划快照写入 S3 存储桶？

> ID：11773870
> 
> 赞同：1
> 
> 时间：2012-08-02T08:40:42.490
> 
> 标签：amazon-s3, amazon, elasticsearch

根据[http://www.elasticsearch.org/tutorials/2011/08/22/elasticsearch-on-ec2.html](http://www.elasticsearch.org/tutorials/2011/08/22/elasticsearch-on-ec2.html)上的文件，我已经包含了相应的 API 访问密钥 ID 及其秘密访问密钥，并且 Elasticsearch 能够写入 S3 存储桶，如下所示：

```
[2012-08-02 04:21:38,793][DEBUG][gateway.s3] [Schultz, Herman] writing to gateway org.elasticsearch.gateway.shared.SharedStorageGateway$2@4e64f6fe ...
[2012-08-02 04:21:39,337][DEBUG][gateway.s3] [Schultz, Herman] wrote to gateway org.elasticsearch.gateway.shared.SharedStorageGateway$2@4e64f6fe, took 543ms 
```

但是，在将快照写入 S3 存储桶时，会出现以下错误：

```
[2012-08-02 04:25:37,303][WARN ][index.gateway.s3] [Schultz, Herman] [plumbline_2012.08.02][3] failed to read commit point [commit-i] java.io.IOException: Failed to get [commit-i]
Caused by: Status Code: 403, AWS Service: Amazon S3, AWS Request ID: E084E2ED1E68E710, AWS Error Code: InvalidAccessKeyId, AWS Error Message: The AWS Access Key Id you provided does not exist in our records.
[2012-08-02 04:36:06,696][WARN ][index.gateway] [Schultz, Herman] [plumbline_2012.08.02][0] failed to snapshot (scheduled) org.elasticsearch.index.gateway.IndexShardGatewaySnapshotFailedException: [plumbline_2012.08.02][0] Failed to perform snapshot (index files) 
```

由于我提供的访问密钥能够写入元数据而不是创建快照，因此发生这种情况是否有原因？

# iphone - 如何在 iPhone 中查找 PAN 手势之间的时间间隔

> ID：11773872
> 
> 赞同：0
> 
> 时间：2012-08-02T08:40:43.037
> 
> 标签：iphone, objective-c

我使用平移手势来显示不同的图像。

平移手势检测正确。

问题是我想获得平移手势之间的时间间隔（以毫秒为单位）。

那么如何获取 iPhone 中平移手势之间的时间间隔。

我尝试过这种方式，但显示不正确。

```
else if([sender state] ==UIGestureRecognizerStateChanged ) 
    {
        NSLog(@"pan velocity %@ ",[NSDate date]);

        self.previousTime = [NSDate date];
        NSDate *currentTime = [NSDate date];
        NSTimeInterval timeDifference =  [currentTime timeIntervalSinceDate:previousTime];
        //self.previousTime = currentTime;
        NSLog(@"%f sssss",timeDifference);
    } 
```

谁能帮我找到iOS中平移手势之间的时间间隔。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:46:24.210

您应该尝试这样的事情（即，`previousTime`在计算时差后更新）：

```
else if([sender state] ==UIGestureRecognizerStateChanged ) 
{
    NSLog(@"pan velocity %@ ",[NSDate date]);

    NSDate *currentTime = [NSDate date];
    NSTimeInterval timeDifference =  [currentTime timeIntervalSinceDate:previousTime];
    //self.previousTime = currentTime;
    NSLog(@"%f sssss",timeDifference);

    self.previousTime = [NSDate date]; //-- or: self.previousTime = currentTime;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:57:21.390

```
NSDate *previousTime = [NSDate date];
double timeDifference = [previousTime timeIntervalSinceNow] * -1000.0; 
```

***编辑了我的帖子：当然是`previousTime`！对不起。*

# actionscript-3 - 不同分辨率的 mxml 中的视频对象

> ID：11773875
> 
> 赞同：0
> 
> 时间：2012-08-02T08:40:58.793
> 
> 标签：actionscript-3, flash, mxml

我使用 Cirrus 的 Flash Builder 在无服务器模式下开发了一个 VideoChat 应用程序。

我已经使用`video.x`和对齐了视频对象`video.y`。当应用程序在高分辨率或低分辨率系统上运行时，它会变形。

请建议我如何对齐视频对象...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:51:51.893

布局或 HGroup/HBox、VGroup/VBox 概念对您水平/垂直对齐视频对象很有用。

# java - 在 wicket 中自定义 IndicatingAjaxLink

> ID：11773885
> 
> 赞同：6
> 
> 时间：2012-08-02T08:41:51.070
> 
> 标签：java, wicket

在我当前的项目中，我遇到了在 wicket 中自定义 IndicatingAjaxLink 的问题，有什么解决方案可以将标准 gif 图像更改为我自己的吗？例如我们有以下监听器

```
 add(new IndicatingAjaxLink("closeReceivedBillspanel") {
            public void onClick(AjaxRequestTarget art) {
                  // some timeconsuming calculations
           }
   }); 
```

当用户单击此链接时，出现加载的 gif，我想更改此 gif，有没有解决此问题的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T12:25:01.780

让您的页面实现 IAjaxIndicatorAware 接口

```
public class BasePage extends WebPage implements IAjaxIndicatorAware {   

 public BasePage(final PageParameters parameters) {
    // Home link
    AjaxLink<Page> homeLink = new AjaxLink<Page>("homeLink") {
      private static final long serialVersionUID = 1L;

      @Override
      public void onClick(AjaxRequestTarget target) {
        setResponsePage(HomePage.class);
      }
    };
    add(homeLink);
  }

  @Override
  public String getAjaxIndicatorMarkupId() {
    return "indicator";
  } 
```

这样，您可以在 html 中通过更改“img”标签中的图像来设置要在加载出现时显示的任何图像

```
<div id="indicator" style="display: none;">
 <div class="indicator-content">
  Please wait... <wicket:link><img src="images/loading.gif" width="16" height="16" alt="loading" /></wicket:link>
 </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:21:21.830

创建 yoru 自己的自定义类，例如（复制 IndicatingAjaxLink 中的内容并更新）

```
 public class MyIndicatingAjaxLink<T> extends AjaxLink<T> implements IAjaxIndicatorAware {
         private final MyAjaxIndicatorAppender indicatorAppender = new MyAjaxIndicatorAppender();    
    .
    //rest of the code is same as IndicatingAjaxLink class
    .
    } 
```

您还需要在您的 customIndicatingAjaxLink 中自定义 AjaxIndicatorAppender，并且您需要覆盖 indicatorAppender 的以下方法以返回自定义图像的路径

```
protected CharSequence getIndicatorUrl() 
```

# wpf - 列表框中的 DisplayMemberPath

> ID：11773887
> 
> 赞同：1
> 
> 时间：2012-08-02T08:42:09.273
> 
> 标签：wpf, struct, listbox

我有包含 2 个字符串的结构：名称，Uid。我将此结构添加到列表框中，并且我希望列表框仅显示结构名称。我怎么能这样做？

谢谢！

```
 public struct ListItemEl
{
    public string Name;
    public string Uid;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:42:49.937

如果您希望（应该设置为）工作，这些需要是公共[属性。](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)[`DisplayMemberPath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.displaymemberpath.aspx)`Name`

# linux - 如何同时 grep 多行（另一个命令的输出）？

> ID：11773888
> 
> 赞同：2
> 
> 时间：2012-08-02T08:42:13.167
> 
> 标签：linux, bash, scripting, grep

我有一个在后台运行的 Linux 驱动程序，它能够返回当前的系统数据/统计信息。我通过在控制台中运行控制台实用程序（我们称之为**dump-data**）来查看数据。每次我运行**dump-data时都会转储****所有**数据。该实用程序的输出如下所示

 **```
Output:
- A=reading1
- B=reading2
- C=reading3
- D=reading4
- E=reading5
...
- variableX=readingX
... 
```

该实用程序返回的读数列表可能非常长。根据具体情况，某些读数会很有用，而其他所有读数都是无用的。

我需要一种方法来仅对名称可能没有共同点的有用读数进行 grep（通过 bash 脚本）。即有时我需要收集A、D、E；其他时候我需要 C、D、E。

我试图随着时间的推移绘制读数以寻找趋势，所以我不能运行这样的东西：

```
# forgive my pseudocode
Loop
    dump-data | grep A
    dump-data | grep D
    dump-data | grep E
End Loop 
```

收集 A、D、E，因为这实际上会给我 3 个单独的转储数据调用的读数，因为这不准确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:45:28.257

如果要将 grep 的所有结果保存在同一个文件中，可以将所有表达式合并为一个：

```
grep -E 'expr1|expr2|expr3' 
```

但是，如果您想在单独的文件中获得结果（对于 expr1、expr2 和 expr3），事情会变得更加有趣。

您可以使用`tee >(command)`.

例如，在这里我使用三个不同的命令处理同一个管道：

```
$ echo abc | tee >(sed s/a/_a_/ > file1) | tee >(sed s/b/_b_/ > file2) | sed s/c/_c_/ > file3
$ grep "" file[123]
file1:_a_bc
file2:a_b_c
file3:ab_c_ 
```

但是这个命令似乎太复杂了。

我最好将`dump-data`结果保存到文件中，然后对其进行 grep。

```
TEMP=$(mktemp /tmp/dump-data-XXXXXXXX)
dump-data > ${TEMP}
grep A ${TEMP}
grep B ${TEMP}
grep C ${TEMP} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:45:24.270

您可以使用`dump-data | grep -E "A|D|E"`. 注意`-E`grep 的选项。或者，您可以`egrep`不使用该`-E`选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:45:32.493

你可以简单地使用：

```
dump-data | grep -E 'A|D|E' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-16T17:29:35.760

```
awk '/MY PATTERN/{print > "matches-"FILENAME;}' myfile{1,3} 
```

[Stack Exchange](https://unix.stackexchange.com/questions/55298/output-multiple-files-from-a-single-grep/55302#55302)上的thx [Guru](https://unix.stackexchange.com/users/24501/guru)**

# math - 如何从一个角度计算一个向量与二维中的另一个向量？

> ID：11773889
> 
> 赞同：10
> 
> 时间：2012-08-02T08:42:17.483
> 
> 标签：math, trigonometry

我知道我应该知道这一点，但我无法弄清楚/找到解决方案。我可以手动完成，但我不能把它放在算法中......（在 c++ 中工作，但伪代码应该没问题）。

我有一个向量，我想根据它的角度找到另一个向量。

![带有两个向量的角度](../Images/741a756d7c81e9a854095a70ef0f1eb5.png)

v 是已知的，角度 alpha 是已知的并且 w 的大小是已知的。我怎样才能找到w？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T09:36:28.213

要将向量 v =绕原点顺时针旋转`(x, y)`一个角度`alpha`，可以乘以矩阵：

```
[  cos alpha    sin alpha ]
[ -sin alpha    cos alpha ] 
```

因此，具有相同大小的旋转矢量将是

```
(x cos alpha + y sin alpha, -x sin alpha + y cos alpha). 
```

从 |v| 更改大小 到 |w|，将两个坐标乘以 |w|/|v|。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-02T08:54:26.813

vector(w) = vector(v) / cos (alpha) 求出 w 的方向。您必须乘以幅度（w）/幅度（v）来设置幅度

# objective-c - 如何用 KissXML 编写 CDATA？

> ID：11773890
> 
> 赞同：2
> 
> 时间：2012-08-02T08:42:22.747
> 
> 标签：objective-c, ios, kissxml

我正在为需要创建 XML 文档的 iOS 创建应用程序。我通过 KissXML 做到这一点。部分 XML 看起来像

```
<ISIN><![CDATA[12345678]]></ISIN> 
```

我在 KissXML 中找不到任何选项来创建 CDATA 部分。简单地添加一个带有 CDATA 内容的字符串作为文本将导致转义特殊字符，如 < 和 >。谁能给我一个关于如何用 KissXML 编写 CDATA 的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:37:56.110

尽管[@moq 的解决方案](https://stackoverflow.com/a/11777926/131183)很丑陋，但它确实有效。我已经清理了字符串创建代码并将其添加到一个类别中。

DDXMLNode+CDATA.h：

```
#import <Foundation/Foundation.h>
#import "DDXMLNode.h"

@interface DDXMLNode (CDATA)

/**
 Creates a new XML element with an inner CDATA block
 <name><![CDATA[string]]></name>
 */
+ (id)cdataElementWithName:(NSString *)name stringValue:(NSString *)string;

@end 
```

DDXMLNode+CDATA.m:

```
#import "DDXMLNode+CDATA.h"
#import "DDXMLElement.h"
#import "DDXMLDocument.h"

@implementation DDXMLNode (CDATA)

+ (id)cdataElementWithName:(NSString *)name stringValue:(NSString *)string
{
    NSString* nodeString = [NSString stringWithFormat:@"<%@><![CDATA[%@]]></%@>", name, string, name];
    DDXMLElement* cdataNode = [[DDXMLDocument alloc] initWithXMLString:nodeString
                                                               options:DDXMLDocumentXMLKind
                                                                 error:nil].rootElement;
    return [cdataNode copy];
}

@end 
```

[此gist](https://gist.github.com/4124847)中也提供了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:57:41.453

我自己找到了一种解决方法——这个想法基本上是将 CDATA 伪装成一个新的 XML Doc。一些有效的代码：

```
+(DDXMLElement* ) createCDataNode:(NSString*)name value:(NSString*)val {

    NSMutableString* newVal = [[NSMutableString alloc] init];
    [newVal appendString:@"<"];
    [newVal appendString:name];
    [newVal appendString:@">"];
    [newVal appendString:@"<![CDATA["];
    [newVal appendString:val];
    [newVal appendString:@"]]>"];
    [newVal appendString:@"</"];
    [newVal appendString:name];
    [newVal appendString:@">"];

    DDXMLDocument* xmlDoc = [[DDXMLDocument alloc] initWithXMLString:newVal options:DDXMLDocumentXMLKind error:nil];

    return [[xmlDoc rootElement] copy];
} 
```

天哪！这只是我认为是“肮脏的黑客”的东西。它有效，但感觉不对。我将不胜感激对此的“好”解决方案。

# android - 如何使用警报管理器重复启动服务

> ID：11773891
> 
> 赞同：-4
> 
> 时间：2012-08-02T08:42:30.070
> 
> 标签：android, android-intent

我想用警报管理器创建一个服务运行背景（当应用程序不工作时也是如此）。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:53:28.057

您可以尝试以下方法：

```
Intent intent = new Intent(this, Service.class);
pendingIntent = PendingIntent.getService(this, 0, intent,
    PendingIntent.FLAG_CANCEL_CURRENT);

AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.add(Calendar.SECOND, 10);

alarmManager.setRepeating(
    AlarmManager.RTC_WAKEUP,
    calendar.getTimeInMillis(),
    1000*10,
    pendingIntent);//10s 
```

# android - 如何等待代码在 Android 中执行？Runnable 对我来说失败了

> ID：11773897
> 
> 赞同：1
> 
> 时间：2012-08-02T08:42:38.907
> 
> 标签：android, wait, runnable

**每次它在循环**内时，我想在我的 while 循环内等待 1 秒。

 **我尝试了 Runnable：

```
new Handler().postDelayed(new Runnable() 
{
    @Override
    public void run() 
    {
        int i=0;

        while(i<10){
            if(i%2 ==0){

                myTextView.setText("true");
            }
            else{

                myTextView.setText("false");
            }

            i++;
        }
    }
}, 1000); 
```

如果我运行此代码，我会得到几分钟的空白显示，然后崩溃。

日志猫：

```
 ActivityManager      Reason: keyDispacthingTimeot 
```

问题是什么？我想让它尽可能简单......

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:46:42.103

如果你想让 sthg 变得非常简单，那么只需使用

```
Thread.currentThread();
Thread.sleep(1000); 
```

**注意**：正如 Adeel 所说，不要在 UI 线程中休眠 =)

**编辑**：你应该像这样实现 sthg：

我想你想使用一个`asyncTask`, 和`publishprogress`每一秒。所以制作你自己的`asyncTask<Void, Integer, Void>`，并在`doInbackground`方法上：

```
protected Void doInBackground(Void... params) {
    int i=0;

    while(i<10){
        Thread.currentThread();
        try{
            Thread.sleep(1000);
        }catch(Exception e){
            return null;
        }

        publishProgress(new Integer(i));

        i++;
    }
} 
```

然后实现`onProgressUpdate`在 UI 线程上运行的方法，并且：

```
protected void onProgressUpdate(Integer... progress) {
     int i = progress[0].intValue();
     if(i%2 ==0){
            myTextView.setText("true");
        }
        else{

            myTextView.setText("false");
        }
 } 
```

这是关于[asynctasks的文档](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T08:47:45.490

尝试在 while 循环中添加它

> 线程.sleep(1000);**

# php - PostgreSQL 中的 to_date 函数问题

> ID：11773902
> 
> 赞同：0
> 
> 时间：2012-08-02T08:42:55.970
> 
> 标签：php, postgresql, to-date

我有一个列名为 date_stamp 的 PostgreSQL 表，它的数据类型是“日期”。
我需要执行以下查询，但它不起作用。任何人都可以帮忙吗？谢谢你。
（我正在使用 PHP）

```
$DS = date('d m Y' ,$data['time_stamp']);       

$query = "SELECT id from ".$this->table_ud." WHERE user_id=43 AND date_stamp=to_date(".$DS.",YYYY MM DD)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:46:38.080

没必要使用`to_date`。

你可以这样做：

```
$DS = date('Y-m-d' ,$data['time_stamp']);       
$query = "SELECT id from ".$this->table_ud." WHERE user_id=43 AND date_stamp='$DS'"; 
```

# javascript - 在“www.foo.com”页面上，从“www.example.com”加载的脚本能否向“www.example.com”发送 ajax 请求？

> ID：11773903
> 
> 赞同：5
> 
> 时间：2012-08-02T08:43:03.807
> 
> 标签：javascript, ajax, cross-domain, jsonp

这是否受到跨域策略的限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:52:21.680

不，*页面*是来源，而不是脚本。

页面已打开`www.foo.com`。脚本从`www.example.com`. XHR 请求可以向`www.foo.com`但不能`www.example.com`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T08:52:46.703

你不能。您只能将请求发送到`www.foo.com`.

# emacs - 如何将缓冲区与 emacs 中现有的 python-shell 关联

> ID：11773904
> 
> 赞同：1
> 
> 时间：2012-08-02T08:43:04.410
> 
> 标签：emacs

如果我想将缓冲区与 SQL shell 相关联，似乎我可以做 sql-set-sqli-buffer。如果我想将缓冲区与 python shell 相关联，应该应用什么命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:10:51.127

AFAIU 问题是关于链接输出缓冲区的

WRT python-mode.el

[http://launchpad.net/python-mode](http://launchpad.net/python-mode)

您可以考虑一个功能请求，提供有关预期工作流程的更多详细信息

# sql - 计算一个月的工作时间

> ID：11773908
> 
> 赞同：1
> 
> 时间：2012-08-02T08:43:19.920
> 
> 标签：sql, sql-server-2008

我正在使用 asp.net 中的考勤软件，在其中我必须制作一份报告，告诉用户时间和一切......到目前为止，我已经创建了系统的基本功能，即用户可以检查进去看看……我一直在做报告……

我必须计算每个月的工作时间，以便用户可以将他的小时数与总小时数进行比较......我的想法是创建一个存储过程，当给定月份名称和年份时，返回一个包含那个月的工作时间....但我似乎可以做到....

到目前为止，我发现了如何从给定的月份和日期创建日期，并找出了该月的最后一天，使用它我可以找出月份的总天数......现在我似乎无法弄清楚如何我知道要减去多少天才能获得工作日吗？

这是到目前为止的代码..

```
declare 
@y int,
@m int,
@d int,
@date datetime

set @y = 2012
set @m = 01
set @d = 01

----To create the date first
select @date = dateadd(mm,(@y-1900)* 12 + @m - 1,0) + (@d-1) 
----Last Day of that date
SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,@date)+1,0)) 
```

任何帮助将不胜感激，在此先感谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:00:29.000

@theDate 是您要计算工作日的月份中的任何日期。这种方法不关心假期。

```
DECLARE @theDate DATETIME = GETDATE()
SELECT MONTH(@theDate) [Month], 20 + COUNT(*) WorkDays
  FROM (
         SELECT DATEADD(MONTH, DATEDIFF(MONTH, 0, @theDate), 28) AS theDate
          UNION
         SELECT DATEADD(MONTH, DATEDIFF(MONTH, 0, @theDate), 29)
          UNION
         SELECT DATEADD(MONTH, DATEDIFF(MONTH, 0, @theDate), 30)
        ) AS d
 WHERE DATEPART(DAY, theDate) > 28
   AND DATEDIFF(DAY, 0, theDate) % 7 < 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:15:39.000

在这里，您可以考虑使用以下 sql server 代码来获取给定月份的第一天和最后一天，同时忽略所有周六和周日。

```
 DECLARE @curr_date datetime=getdate()
    DECLARE @st_date datetime,@ed_date datetime
    select @st_date=DATEADD(mm,datediff(mm,0,@curr_date),0),@ed_date = DATEADD(mm,datediff(mm,-1,@curr_date),-1)
    --select @st_date as first_day,@ed_date as last_day

    SET DATEFIRST 1 --Monday as first day of week
    select DATEADD(dd,number,@st_date) from master..spt_values
    where DATEDIFF(dd,DATEADD(dd,number,@st_date),@ed_date) >= 0 and type='P'
    and DATEPART(DW,DATEADD(dd,number,@st_date)) <> 6
    and DATEPART(DW,DATEADD(dd,number,@st_date)) <> 7

But inorder to calculate the actual working hours, you will have to take into the consideration of following thigs

1.Calculate the time interval between swipe-in and swipe-outs between start and end time for a day.
2.Exclude all the time gap(employee not in office)
3.Consider the company holidays.
 etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:56:43.190

这是一个计算工作日的UDF。您可以将一个月中的任何日期传递给此函数。但通常您应该使用实际的“日历”表来计算工作日并在此表中插入周末、节假日……等等。

```
CREATE FUNCTION dbo.WorkDaysCount (@Date datetime)  
RETURNS int AS  
BEGIN 

DECLARE @BeginOfMonth datetime
SET @BeginOfMonth=DATEADD(DAY,-DAY(@Date)+1,@Date);

DECLARE @EndOfMonth datetime
SET @EndOfMonth=DATEADD(Day,-1,DATEADD(Month,1,@BeginOfMonth));

DECLARE @cDate datetime
set @cDate=@BeginOfMonth

Declare @WorkDaysCount int
SET @WorkDaysCount=0

while @cDate<=@EndOfMonth
begin
  if DATEPART(dw,@cDate) not in (1,7) SET @WorkDaysCount=@WorkDaysCount+1  -- not a Sunday or Saturday change (1,7) to (6,7) if you have other week start day (Monday).
  set @cDate=@cDate+1;
end;

return (@WorkDaysCount);

END 
```

# javascript - 如果所有单选框在 jQuery 中都有选择，则显示一个元素

> ID：11773909
> 
> 赞同：1
> 
> 时间：2012-08-02T08:43:23.630
> 
> 标签：javascript, jquery, dom, hide, radio

我正在尝试根据所有单选元素是否都有选择来使表单显示/隐藏提交按钮-这就是我到目前为止所得到的..任何想法我做错了什么？

```
$(document).ready(function() {
    $('#submit-btn').hide();

    if ($(':radio:checked').length > 0) {//try reach selected radio here
        $('#submit-btn').show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:57:04.927

```
var count = 0

$(':radio').each(function(){
   count++;
});

if ($(':radio:checked').length == count) {
        $('#submit-btn').show();  
} 
```

这可能有助于你的事业..!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:46:17.187

如果选中任何单选元素，这将返回 true，这不是您想要的。

不幸的是，没有快速的方法来处理无线电元素，因为即使一个被选中，其他元素也不会显示为选中。

您必须手动循环它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:15:41.830

我使用 Robin 的代码片段进行了一些修改。

我没有正确解释每个“问题”都有一组 5 个单选按钮（我的错） - 但下面的代码可以满足我现在的需要。

基本上与 Robins 相同，除了每个问题有 5 个单选框，我将长度除以 5，它现在可以工作了！谢谢大家 ：）

```
$(document).ready(function() {
    $('#submit-btn').hide();
    $("form input:radio").change(function() {     
        var questions = ($('.questions').length / 5);
        var checked = ($('.questions:checked').length);
        if (questions == checked)
        {
            $('#submit-btn').show();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T08:45:31.700

```
 $('.toCheck').length == $('.toCheck:checked').length; 
```

如果计算结果为**true**，那么`input`该选择器的全部为`checked`! :)

# git - Git 分支 - 在大型项目中受信任？

> ID：11773912
> 
> 赞同：2
> 
> 时间：2012-08-02T08:43:29.250
> 
> 标签：git

我很惊讶使用 Git 执行分支是多么容易。让我担心的是，对于我的目录结构中可能拥有的所有数百个文件，我真的可以相信 Git 在我签出另一个分支时确保所有文件都处于正确的状态吗？这似乎太快了，不可能是真的。

有没有人经历过他们签出不同的分支的时候，有些文件被跳过了，或者只是在你知道它们应该有的时候没有改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:51:26.040

因为 Git 根据文件内容的散列来管理指向文件的指针，所以它不需要重写几乎相同的目录，无论那里有多少文件。如果您查看提交的结构和树的概念，您会发现 Git 将非常有效地遍历这些结构，并且只更改工作目录中需要更改的部分。它的力量在于简单。

我从来没有遇到过 Git 和大型项目的任何问题。linux内核和其他大型项目使用Git进行版本控制，没有问题，性能快速可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:46:16.407

是的，你可以相信它。但是，*当真*的出现问题时，存储库的任何其他克隆（除了主存储库本身）都是备份；）

这么快，因为

*   每个操作首先都是本地的，这意味着：不需要慢速网络操作
*   它仅将更改推送到工作区：它获取当前分支和结帐分支之间的第一个共同祖先，将当前结帐的更改还原到此祖先，然后将祖先的更改应用到其他分支。这只发生在后台，但这大大减少了文件的数量，或者最后推送到工作区的更改。

也许（可能，可能；））还有其他优化。我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:47:36.863

我已经使用 Git 好几年了，发现它在这个领域非常可靠。我已经将它与数千个文件的项目一起使用。

# wif - 在 IIS Express 中配置应用程序池

> ID：11773916
> 
> 赞同：0
> 
> 时间：2012-08-02T08:43:38.337
> 
> 标签：wif, iis-express, adfs2.0

最近我一直在使用 IIS Express，它的效果非常好。但是，我有一些我无法解决的情况。

我正在开发一个 web 应用程序，用户应该能够使用他们的 AD 帐户登录。由于将运行 webapp 的服务器位于域之外，因此我使用 ADFS 2.0 作为 SSO 解决方案来解决此问题。

为了使这个项目的开发更容易，我选择在开发时使用 IIS Express。

为了能够在我的开发环境中与 ADFS 2.0 服务器交换声明信息，我必须为站点配置应用程序池，以将 Load User Profile 设置为 true（例如 IIS 7.5）。我在网上搜索过，到目前为止，几乎没有找到关于如何在 IIS Express 中配置应用程序池的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T11:08:36.027

这与 ADFS 无关，但它是 WIF 用于签名和加密 cookie 的方式，该 cookie 将用于在初始登录后识别用户。WIF 中的默认实现使用 DPAPI，它依赖于用户配置文件来获取密钥材料.

您可以覆盖该默认值并使用机器密钥作为密钥材料。事实上，这就是它在 NET 4.5 中默认的工作方式，正是因为 DPAPI 的所有问题。在这里，您可以在 Net 4 中做到这一点

[http://leastprivilege.com/2012/07/12/machinekey-based-session-protection-for-wif/](http://leastprivilege.com/2012/07/12/machinekey-based-session-protection-for-wif/)

# php - CakePHP 和 PHP 中的 PDO

> ID：11773917
> 
> 赞同：0
> 
> 时间：2012-08-02T08:43:43.737
> 
> 标签：php, mysql, cakephp, pdo, mysqli

我收到此错误：

```
Error: SQLSTATE[HY000]: General error: 2014 Cannot execute queries while other unbuffered 
queries are active. Consider using PDOStatement::fetchAll(). Alternatively, if your code 
is only ever going to run against mysql, you may enable query buffering by setting the 
PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute. 
```

你如何设置这个 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:31:09.387

[在http://docs.php.net/manual/en/ref.pdo-mysql.php#pdo.constants.mysql-attr-use-buffered-query](http://docs.php.net/manual/en/ref.pdo-mysql.php#pdo.constants.mysql-attr-use-buffered-query)有一个例子：

```
$stmt = $db->prepare('select * from foo',
        array(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true)); 
```

（但如果这真的是一个很好的解决你的问题的方法是另一个问题......）

# java - 如何在 java 程序中检索 catalina.out 的路径？

> ID：11773919
> 
> 赞同：3
> 
> 时间：2012-08-02T08:43:49.013
> 
> 标签：java, tomcat, logging, tomcat6

我需要获取在 logging.properties 中配置的 catalina.out 文件的路径。

有没有办法在不知道属性文件路径的情况下通过 java 检索属性“1catalina.org.apache.juli.FileHandler.directory”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:01:52.283

如果我对您的理解正确，那么您想读取 Tomcat`logging.properties`文件的属性。[正如您在Tomcat FAQ for Logging](http://wiki.apache.org/tomcat/FAQ/Logging)中看到的，`java.util.logging.config.file`用于定义属性文件的路径。

然后，您可以通过[Java System Properties](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)检索此路径：

```
String pathLogProps = System.getProperty("java.util.logging.config.file");
Properties properties = new Properties();
try {
     properties.load(new FileInputStream(pathLogProps));
     System.out.println(prop.getProperty("database"));
} catch (IOException ex) {
     ex.printStackTrace();
} 
```

如果未设置，我将遵循[Apache Tomcat 7 Logging Documentation](http://tomcat.apache.org/tomcat-7.0-doc/logging.html)中的提示：

> JULI 默认启用，除了常规的全局 java.util.logging 配置外，还支持每个类加载器配置。这意味着可以在以下层配置日志记录：
> 
> *   在全球范围内。这通常在`${catalina.base}/conf/logging.properties`文件中完成。该文件由启动脚本设置的 java.util.logging.config.file 系统属性指定。
> *   如果不可读或未配置，则默认使用`${java.home}/lib/logging.properties`JRE 中的文件。在网络应用程序中。该文件将是`WEB-INF/classes/logging.properties`

默认情况下，`logging.properties`文件的路径应`catalina.base`分别在环境变量中可用`CATALINA_BASE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:03:30.437

该文件`catalina.out`既没有在任何系统属性中指定，也没有在`logging.properties`（[看看](http://svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/conf/logging.properties?view=markup)，它不存在）中指定。

相反，`catalina.out`它是由启动脚本的基于 shell 的输出重定向从内部`bin/catalina.sh`（或`bin/catalina.bat`）创建的。这意味着该文件仅在您使用这些脚本或模拟此行为的脚本启动 Tomcat 时可用。例如，如果您`jsvc`在 *NIX 平台或 Tomcat Windows 服务上使用，则`logs/catalina.out`不会创建该文件（至少默认情况下不会）。

如果你想看看文件是否存在，你可以打赌它在`$CATALINA_BASE/logs/catalina.out`. Tomcat 的最新版本定义了`catalina.base`系统属性，因此您可以轻松查看如下所示：

```
File catalinaOut = new File(System.getProperty("catalina.base"), "logs/catalina.out");
if(catalinaOut.exists())
{
    // Do whatever you want
} 
```

# inno-setup - 如何使用 Inno Setup 更改可执行文件权限？

> ID：11773921
> 
> 赞同：2
> 
> 时间：2012-08-02T08:43:52.953
> 
> 标签：inno-setup

我通过 InnoIDE 中的向导创建了一个非常简单的 inno 脚本。但是，部署的可执行文件可以由普通用户运行。如何强制用户必须通过脚本以管理员身份运行它？

```
[Setup]
AppId={{03E6645E-2C53-4E90-967B-D0833A8EBDAF}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName={#MyAppName}
OutputBaseFilename=setup
Compression=lzma
SolidCompression=yes
PrivilegesRequired=admin

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "                {cm:AdditionalIcons}"; Flags: unchecked

[Files]
Source: "C:\Program Files\Inno Setup 5\Examples\MyProg.exe"; DestDir: {app}; Flags: ignoreversion; Permissions: admins-readexec; 
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon

[Run]
Filename: {app}\{#MyAppExeName}; Description: "{cm:LaunchProgram,    {#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:37:41.323

您不能使用 Inno 更改应用程序的权限或清单。

要让您的应用程序请求管理员权限，您需要向其添加适当的清单。这对于每种不同的编程语言都是不同的，但已经提出并回答了[许多相关问题。](https://stackoverflow.com/search?q=run+a+program+as+admin&submit=search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T07:14:31.007

更简单的方法要让您的应用程序要求管理员权限：

在您的可执行文件的注册表项中添加此值：

```
[Registry]
Root: "HKLM"; Subkey: "SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers"; ValueType: string; ValueName: "{app}\{#MyAppExeName}"; ValueData: "RUNASADMIN"; Flags: uninsdeletevalue 
```

我更喜欢通常使用上面的代码。

# php - PHP 上传 CSV 文件 Extra Carraige Return

> ID：11773923
> 
> 赞同：0
> 
> 时间：2012-08-02T08:44:01.350
> 
> 标签：php, file-upload, csv

我正在尝试使用 PHP 将 CSV 文件（类型：application/vnd.ms-excel）上传到我的 Unix 机器。然后 FTP 到大型机。

当在每行末尾将额外的空白行添加到上传的文件中时，上传时会出现问题，当我在 cmd 提示符下使用 ftp 命令下载上传的 CSV 文件时，我可以看到这一点。

在 Unix 框中查看时，CSV 中不会出现多余的行。

当它通过 FTP 传输到大型机时，我可以看到每行都添加了一个点。十六进制 十进制 x'0D'

你能帮我在上传时截断这个多余的字符吗？

我的 HTML 文件

```
<html>
<body>
<form action="upload_file.php" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" />
<br />
<input type="submit" name="submit" value="Submit" />
</form>
</body>
</html> 
```

我的 PHP 代码“upload_file.php”

```
<?php
$allowedExts = array("csv", "CSV");
$extension = end(explode(".", $_FILES["file"]["name"]));
if (($_FILES["file"]["type"] == "application/vnd.ms-excel")
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      $conn = ftp_connect("a.b.c.com") or die("Could not connect");
      ftp_login($conn,"login","pass");
      echo ftp_put($conn,"'dataset.name'","upload/" . $_FILES["file"]["name"],FTP_ASCII);
      ftp_close($conn);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:27:47.360

您可能想看看[http://at2.php.net/manual/en/function.trim.php](http://at2.php.net/manual/en/function.trim.php)方法。

您可以在存储文件后打开文件，遍历每一行和`trim()`它们。您可以将它们打印回文件（或者只是加载所有内容，迭代并执行`file_put_contents()`）。这应该在上传之前从开头和结尾删除所有空格。

如果您只是想从最后删除它，您也可以使用`rtrim()`，或者如果您想要更灵活，您可以使用`preg_replace()`类似`/\s*$/`.

# ruby-on-rails - Rails 将方法添加到 Ruby 类问题

> ID：11773924
> 
> 赞同：1
> 
> 时间：2012-08-02T08:44:02.803
> 
> 标签：ruby-on-rails, ruby

我在：

```
ruby-1.9.3-p194
Rails 3.0.9 
```

我想在我的视图方法中使用带有数值数据类型的 **percent_of 。**

例如，`<%= 10.persent_of(50) %>`它等于`20%`。

为此，我创建`lib/numeric.rb`了包含

```
class Numeric
  def percent_of(n)
    self.to_f / n.to_f * 100.0
  end
end 
```

但我得到一个错误：

```
undefined method `percent_of' for 10:Fixnum 
```

我试图添加定义`require 'Numeric'`，但它没有帮助我。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:56:24.227

`config.autoload_paths += %W(#{config.root}/lib)`检查你的`application.rb`文件中是否有。您应该扩展 Fixnum 而不是 Numeric：

```
class Fixnum
  def percent_of(n)
    self.to_f / n.to_f * 100.0
  end
end 
```

然后在 application_helper.rb 中要求或包含它，以便所有视图都可以使用它：

`require 'numeric'`或者`include Numeric`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:47:21.113

试试`require 'numeric'`吧。您需要的是文件，而不是课程。

# google-app-engine - 尝试使用 django nonrel 创建新应用时出现语法错误

> ID：11773925
> 
> 赞同：0
> 
> 时间：2012-08-02T08:44:12.213
> 
> 标签：google-app-engine, python-2.7, django-nonrel

当我在尝试创建新应用程序时遇到以下错误时，我正在使用 django-nonrel 和谷歌应用程序引擎。

```
Traceback (most recent call last):
  File "./manage.py", line 2, in <module>
    from django.core.management import execute_manager
  File "/home/levi/Projects/DoneBox/django/__init__.py", line 14
    if svn_rev != u'SVN-unknown':
                               ^
SyntaxError: invalid syntax 
```

导致异常的文件包括在下面。

```
VERSION = (1, 3, 0, 'final', 0)

def get_version():
    version = '%s.%s' % (VERSION[0], VERSION[1])
    if VERSION[2]:
        version = '%s.%s' % (version, VERSION[2])
    if VERSION[3:] == ('alpha', 0):
        version = '%s pre-alpha' % version
    else:
        if VERSION[3] != 'final':
            version = '%s %s %s' % (version, VERSION[3], VERSION[4])
    from django.utils.version import get_svn_revision
    svn_rev = get_svn_revision()
    if svn_rev != u'SVN-unknown':
        version = "%s %s" % (version, svn_rev)
    return version 
```

我在 emacs 中查看了这个文件，但看不到问题所在，我尝试搜索 google，但没有运气。有人可以指出我正确的方向吗？

（对于那些对我正在做的事情感兴趣的人，请参阅[http://www.allbuttonspressed.com/projects/djangoappengine](http://www.allbuttonspressed.com/projects/djangoappengine)。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:59:59.187

仅供参考，最新版本的 django-appengine 可以在这里找到：

[https://github.com/django-nonrel](https://github.com/django-nonrel)

但是，allbuttonspressed 版本应该可以工作。您可能没有正确设置您的 python 环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:51:21.240

使用 ipython shebang 在缓冲区中运行此代码

# ！/usr/bin/env ipython

# - *- 编码：utf-8 -* -

像这样延长结尾：

```
print version
return version 
```

获取版本（）

在 ipython 提示符处获取“1.3”

与python shell类似的事情像这样失败

from django.utils.version import get_svn_revision Traceback（最近一次调用最后）：文件“”，第 1 行，在 ImportError：没有名为 utils.version 的模块

假设一些安装/路径问题

# php - 不要在特殊页面和 action=edit 页面上显示代码

> ID：11773927
> 
> 赞同：0
> 
> 时间：2012-08-02T08:44:36.267
> 
> 标签：php, mediawiki

我有一个 MediaWiki 网站。我正在将 Facebook 评论代码添加到我的皮肤中。但是，我不希望它显示在特殊页面和编辑页面上。我如何在 php 中编写代码？
谢谢

我找到了一种方法来查看它是否是一个特殊页面

```
$string =  urlencode($wgTitle->getLocalURL()); 
echo $string;
if (stristr($string, 'Special') == TRUE){} 
```

对于编辑页面，我可以使用 $wgActionPaths 吗？但我不知道如何使用这个变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:23:29.100

```
if ( $wgTitle->isSpecialPage() ) { .... 
```

要检查其他名称空间，请结合使用 Title 的`getNamespace()`函数和 include/Defines.php 中的 NS_* 常量之一。另外，尽量不要使用 $wgTitle，因为它很快就会被弃用 -如果可能，请使用[请求上下文。](https://www.mediawiki.org/wiki/Manual%3aRequestContext)

# css - 圆轮廓的角落？

> ID：11773929
> 
> 赞同：12
> 
> 时间：2012-08-02T08:44:40.950
> 
> 标签：css, outline

所以我有这四个向左浮动的框，每个框都有 50% 的页面宽度。我希望他们有一个轮廓`1px solid gray`，我想用 6px 圆角。我知道我可以使用`border:1px solid gray;`，`border-radius:6px;`但问题是边框增加了元素的宽度。因为盒子有 50% 的宽度，而且它们是向左浮动的，所以我不能给它们添加边框。那么是否可以使**轮廓**角变圆？

编辑：纯 CSS 解决方案是最好的，因为我需要支持除 IE6 之外的所有浏览器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T09:03:26.647

您仍然可以使用[box-sizing](http://www.css3.info/preview/box-sizing/)来处理边框。它包括元素总宽度中的边框宽度，并且得到了[相当的支持](http://caniuse.com/css3-boxsizing)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:04:09.710

我的想法未经测试，但是使用 50% 的 div 作为带边框的实际 div 的容器怎么样？
然后，bordered-div 具有`height`and `width`to`auto`并设置它们的`left`, `right`, `top`and `bottom`to`0px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:05:14.250

[根据这个答案](https://stackoverflow.com/a/6810937/448232)有一个解决方法。但是您仍然必须设置`outline:0`和使用`border-radius`和/或`box-shadow`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-02T09:03:16.177

使用以下 css 属性制作圆角边框

```
-moz-border-radius:0 0 10px 10px;
-webkit-border-radius: 0 0 10px 10px;
border-radius:0 0 10px 10px;
border:1px solid gray; 
```

如果你用这个。请发布您使用的一些代码。然后只有我们才能找到错误或任何修改需要......

谢谢

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-12-10T15:46:50.243

控制边框的最佳方法是使用**box-shadow**。它保持圆角，可以在外部或内部（带有**插图**）。

例子：

```
box-shadow: 0px 0px 0px 2px black;
/*outside border black 2px width*/

box-shadow: 0px 0px 0px 2px black inset;
/*inside border black 2px width*/ 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-10-12T10:36:12.640

Another way to do this is to use the OUTLINE property as well as a BORDER-RADIUS of 80 pixels. Like followed:

```
outline: 5px #FFF;
border-radius: 80px; 
```

This works for small images, not too large of ones. If you want to use the round edge system on larger images, you will have to do just as someone else stated and use the following code:

```
-moz-border-radius:0 0 10px 10px;
-webkit-border-radius: 0 0 10px 10px;
border-radius:0 0 10px 10px;
border:1px solid gray; 
```

# mysql - Ruby - 发生异常：[Mysql2::Error] 关闭 MySQL 连接

> ID：11773930
> 
> 赞同：11
> 
> 时间：2012-08-02T08:44:41.950
> 
> 标签：mysql, ruby-on-rails-3, resque

我有一个 Rails 应用程序现在只在内部运行，所以现在没有那么多访问。并且有两个 resque 工作人员几乎不运行从 web 获取数据并插入到 mysql 数据库中，每次插入都会休眠 10 秒。

我们在 VPS 上运行它。每隔 5 小时，我会遇到一个 Exception `Exception occured: [Mysql2::Error] closed MySQL connection"`。

导致异常的原因可能是什么？现在池大小为 5。

如果我提高池大小并`reconnect: true`在我的`database.yml`?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-04T17:18:01.123

这是将 mysql2 gem 版本 0.2.11 或更低版本与多线程结合使用时的常见问题。[问题跟踪器上](https://github.com/brianmario/mysql2/issues/209)有一个错误，其中包含有关问题的详细信息，但总而言之，建议是：

1.  更新您正在使用的 gem 版本`>= 0.2.12`
2.  在文件中添加`reconnect: true`您的数据库连接配置选项`database.yml`

您可能已经解决了您的问题，但这可能会帮助遇到此问题的其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:48:29.190

如果您的工作人员长时间不活动，他们将失去他们的 MySQL 连接。

请参阅[此处](http://coderrr.wordpress.com/2009/01/08/activerecord-threading-issues-and-resolutions/)以获取解决方案

或者只是将其粘贴在初始化程序中

```
unless Rails.env.to_s == 'test'
  module ActiveRecord::ConnectionAdapters
    class Mysql2Adapter
      alias_method :execute_without_retry, :execute

    def execute(*args)
      execute_without_retry(*args)
      rescue Exception => e
        if e.message =~ /server has gone away/i
          warn "Server timed out, retrying"
          reconnect!
          retry
        else
          raise e
        end
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T20:47:23.107

更深入地了解如何为**delay_job**进行调试。我在设置后做了以下`reconnect: true`操作`database.yml`，但这个解决方案不起作用。

```
cd /your_rails_deploy_code/log
cat production.log

# check the pids from delayed job:
E, [2017-02-01T19:45:21.614579 #2592] ERROR -- : 2017-02-01T19:45:21+0000: [Worker(delayed_job.3 host:demeter pid:2592)] Job ActiveJob::QueueAdapters::DelayedJobAdapter::JobWrapper (id=193675) FAILED (0 prior attempts) with Mysql2::Error: closed MySQL connection 
```

在我的具体情况下，`pid:2592`是唯一一个不断失败的。为什么？让我们来了解一下：

```
[deploy@demeter] ps -ef | grep 2592
deploy   2592     1  0 Jan31 ?        00:00:40 production/delayed_job.3
deploy   23312     1  0 Feb01 ?        00:00:40 production/delayed_job.1
deploy   23318     1  0 Feb01 ?        00:00:40 production/delayed_job.0 
```

我注意到特定过程在我最近一次部署前几天就开始了。一旦我杀死它，错误就消失了。我假设在我的具体情况下发生的是我最新的部署没有正确删除所有延迟作业实例。

# linux - 安装的 Xen 映像与实际驱动器不同步

> ID：11773936
> 
> 赞同：1
> 
> 时间：2012-08-02T08:44:55.227
> 
> 标签：linux, mount, xen

我在 /dev/mapper/vg01 上安装了一个 xen 来宾分区。我还在 /home/user/a.txt 中创建了一个文件

然后我也ssh到来宾服务器并在终端的/home/user/b.txt中创建文件我没有看到a.txt，b.txt

在已安装的分区中也一样。我只看到 a.txt 而不是 b.txt

我怎样才能解决这个问题 ？或者也许还有其他方法可以让我更改文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:46:50.770

您不能同时从多个位置安装非分布式本地文件系统，您最终会损坏它。

# mfc - Visual Studio中mfc的设计对话框与构建时的区别？

> ID：11773938
> 
> 赞同：0
> 
> 时间：2012-08-02T08:45:02.567
> 
> 标签：mfc

这是我的第一篇文章，希望你能尽快帮助我。

非常感谢您阅读我的问题。

我在 Visual Studio 2010 中设计了 MFC 的对话框。

我的对话框大小是 500 x 397

在我的代码中，我尝试画一条线

dc.MoveTo(0,0)

dc.lineTo(500,397)。

但它看起来像这样

（对不起，我没有足够的重复插入图像） [http://img853.imageshack.us/img853/2353/erroryq.png](http://img853.imageshack.us/img853/2353/erroryq.png)

此代码必须从对话框的左上到右下绘制但是，它不会发生。

对话框的大小发生了变化:(可能更大....我实际上不知道为什么@_@

也许是因为 Visual Studio 和我的桌面中的屏幕设置。希望你能帮我修复那个代码

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:26:22.403

对话框以与像素不同的“对话框单位”设计。要在两者之间进行转换，请尝试 MapDialogRect()。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms645502(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645502(v=vs.85).aspx)

# php - 如何使用 PHP DOM Parser 获取 HTML 的特殊属性/自定义属性的值？

> ID：11773940
> 
> 赞同：1
> 
> 时间：2012-08-02T08:45:11.173
> 
> 标签：php, parsing, dom, attributes

```
<li data-docid="thisisthevaluetoget" class="search-results-item">
</li> 
```

如何获取“data-docid”的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:23:05.347

您可以使用 DOMDocument 来获取[属性](http://www.php.net/manual/en/class.domnode.php#domnode.props.attributes)：

```
$html = '<li data-docid="thisisthevaluetoget" class="search-results-item"></li>';
$doc = new DOMDocument;
$doc->loadHTML($html);
$nodes = $doc->getElementsByTagName('li');
foreach ($nodes as $node) {
    if ($node->hasAttributes()) {
        foreach ($node->attributes as $a) {
            echo $a->nodeName.': '.$a->nodeValue.'<br/>';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:06:10.097

您可以使用 JavaScript + jQuery 做到这一点。您可以使用 $_GET 方法获取该值并将其传递到另一个 php 文件中。

一个例子是***[here](http://jsfiddle.net/quKTK/1/)***

# android - 在我的应用程序的较新市场版本中无法正确读取存储的（持久的）可序列化对象

> ID：11773950
> 
> 赞同：0
> 
> 时间：2012-08-02T08:45:32.543
> 
> 标签：android, serialization, inputstream, objectinputstream

我有一个 android 应用程序，它存储包含 4 个字符串数组列表的持久可序列化对象。该对象存储在内存中，每次应用启动时都会恢复。它工作正常....问题是当我在市场上推出新版本的应用程序并且用户下载并安装更新版本时，存储的对象没有正确恢复，对象的四个数组列表恢复为空. 然后，用户丢失了他们以前版本的应用程序存储数据。这是一个我必须解决的大问题。

这是我的可序列化对象：

```
public class SaveState implements Serializable{
    public ArrayList <String> fNumbers = new ArrayList<String>();
    public ArrayList <String> fNames = new ArrayList<String>(); 
    public ArrayList <String> favNumbers = new ArrayList<String>();
    public ArrayList <String> favNames= new ArrayList<String>();
    public static SaveState instance=new SaveState();
} 
```

这些是我用来存储和恢复这个持久对象的方法：

```
public static void saveData(Context context){
        ObjectOutput out;
        try {           
            File directory = context.getDir(STORE_DIRECTORY, Context.MODE_PRIVATE); //primero comprobamos si existe el directorio, y si no, lo creamos.
            File outFile = new File(directory, "appSaveState.data");
            System.out.println("########## SAVING INTO: "+outFile.getAbsolutePath());
            out = new ObjectOutputStream(new FileOutputStream(outFile)); 
            out.writeObject(SaveState.instance);
            out.close();
        } catch (Exception e) {e.printStackTrace();}
    }

    public static void loadData(Context context){
        ObjectInput in;
        try {
            File directory = context.getDir(STORE_DIRECTORY, Context.MODE_PRIVATE); //primero comprobamos si existe el directorio, y si no, lo creamos.
            File inFile = new File(directory, "appSaveState.data"); 
            System.out.println("########## LOADING FROM: "+inFile.getAbsolutePath());
            in = new ObjectInputStream(new FileInputStream(inFile)); //intentamos cargar el fichero     
            SaveState.instance=(SaveState) in.readObject();
            in.close();
        } catch (Exception e) {e.printStackTrace();}
    } 
```

请记住，如果应用程序的版本未更新，则此代码可以正常工作。

怎么了？我应该怎么做才能使这些数据在我的应用程序的不同 android 市场版本之间持久存在？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:01:42.787

我会自己序列化数据，而不是依赖 Java 对象序列化。

除了将对象写入 ObjectOutputStream 之外，您还可以将数据转换为 XML 文档并将该文件写入存储（无论如何我看到它都是字符串，所以应该不难）。然后，您可以使用可用于处理 XML 的类来读取和写入数据。在这种情况下，您知道磁盘上的数据始终可以被您拥有的任何版本的程序读取。

Java 序列化的问题在于它严重依赖于反射，如果底层类的实现发生变化，你就会被淹没。

# javascript - 从网页打开 android 应用程序

> ID：11773958
> 
> 赞同：27
> 
> 时间：2012-08-02T08:45:55.567
> 
> 标签：javascript, android, html, android-intent, action

我知道要从网页中的链接打开 android 应用程序，我们必须在以下内容中编写`AndroidManifest.xml`：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="my_scheme" android:host="my_host" />
        </intent-filter> 
```

问题是我是这样写的：

```
 <intent-filter>
            <action android:name="my_action"/>
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="my_scheme" android:host="my_host" />
        </intent-filter> 
```

我没有添加`android.intent.action.VIEW`，而是添加了我自己的操作。我无法更改它，因为版本已经发布。

问题是，

> 如果有办法让应用程序从 JavaScript 或简单的 html 页面运行，也许是通过在页面中定义特定的操作？

谢谢，

帕兹。

* * *

解决了：

感谢大卫，我找到了一个解决方案：

```
<a href="intent://my_host#Intent;scheme=my_scheme;action=my_action;end">Link to my stuff</a> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-02T15:43:06.247

试试这个：

使您的链接看起来像这样：

```
<a href="intent:#Intent;action=my_action;end">Link to my stuff</a> 
```

还可以查看[从 android 浏览器启动自定义 android 应用程序](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-20T06:42:19.390

AndroidMainfest 声明：

```
<activity android:name="...">
<intent-filter>    
   <action android:name="android.intent.action.VIEW" />
   <category android:name="android.intent.category.DEFAULT" />    
   <category android:name="android.intent.category.BROWSABLE" />
   <data
     android:host="hostName"
     android:path="path"
     android:scheme="schemeName" />
   </intent-filter>
</activity> 
```

你可以让调用

```
<a href = "schemeName://hostName/path"> 
```

或在浏览器中添加参数类似的 url

```
<a href = "schemeName://hostName/path?id=1&name=mark"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-10T11:36:49.107

一种方式如林平君所说，另一种方式调用js方法，代码如下：

```
function openAActivity(){
     window.location = "schemeName://hostName/path"

} 
```

此方法将发送一个 Android Intent 来启动指定的活动。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-06-03T19:13:12.677

**第一种方式：**

```
<html><head></head><body>
<iframe src="YourApp://profile/blabla" width="1px" height="1px" scrolling="no" frameborder="0"></iframe>
<script>
setTimeout(function() {
window.location = "http://YourSite.com/profile/blabla"; }, 4000
                );
</script>
</body>
</html> 
```

或
**第二种方式**： [https ://stackoverflow.com/a/24023048/2165415](https://stackoverflow.com/a/24023048/2165415)

# eclipse - Eclipse RAP / RWT 独立应用程序 - 最佳设计？

> ID：11773959
> 
> 赞同：0
> 
> 时间：2012-08-02T08:45:56.717
> 
> 标签：eclipse, eclipse-rap

我正在使用 RAP/RWT 进行设计，在 Tomcat 下工作。我现在正在学习 RAP，我想到了几个问题。

我的应用程序有一个后端，可以不断地从某些来源收集数据。另一方面，我想创建一个作为 webapp 运行的前端（RWT 独立应用程序，或具有工作台功能的 RAP，尚未确定）。

*   第一个问题：我是否应该将后端作为一个单独的进程，让前端 RAP 应用程序以某种方式与之通信？或者我可以将所有内容集成到 RAP 应用程序中吗？将所有内容整合在一起会导致第二个问题。

*   第二个问题：如何从 RAP 应用程序中检测到，浏览器窗口/选项卡何时关闭我的应用程序？当用户关闭图形界面（即关闭浏览器）时，我想做一些资源清理。`ApplicationWorkbenchWindowAdvisor#preWindowShellClose`我在 RWT 独立应用程序中找不到任何等效的东西。与启动应用程序时检测到的相同。一般来说，在 RWT 独立应用程序中是否有遵循 webapp 生命周期的回调？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:31:58.063

关于您的第一点：当您使用 EJB 时，请注意您只能从请求线程直接访问 Java EE 上下文。[当您在JEE_COMPATIBILITY](http://eclipse.org/rap/developers-guide/devguide.php?topic=advanced/application-setup.html#compat)模式下运行时这不是问题，但在 SWT_COMPATIBILITY 模式下您可能需要通过`RWT.requestThreadExec( Runnable );`.

至于你的第二个问题，RAP 服务器目前不会在浏览器关闭时得到通知。[错误 284273 - 浏览器关闭时的会话终止机制](https://bugs.eclipse.org/bugs/show_bug.cgi?id=284273)中讨论了此问题。它尚未实现，因为 IIRC 我们找不到在所有浏览器中都有效的可靠方法。

您可以使用 a) JSExecutor 将一些 JavaScript 放在客户端上，在浏览器关闭时发送请求，以及 b) 侦听这些请求并终止会话的 PhaseListener 来实现自己的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T00:26:25.413

(*) 首先：解耦始终是最佳实践。我使用 RMI 存根从后端应用程序（另一个 RMI 对象或 EJB bean）接收通知。

```
 MyEJBListener stub = UnicastRemoteObject.exportObject(new MyEJBListener(display, page,
                                    manager, handlermanager), 0)
 MyEJBClient client1 = MyEJBLocator.findEJBClient("abc");
 client1.addListener(stub); 
```

在存根中使用类似的东西

```
public void notify(Event event){

  UICallBack.activate("stubthread");
  Display..asyncExec(new Runnable() {
   // update event info
  });
} 
```

（*）第二：该方法`WorkbenchWindowAdvisor#postWindowClose`可以帮助你吗？，并在后端应用程序中调用一些方法。

# c++ - 模板特化属于头文件还是源文件？

> ID：11773960
> 
> 赞同：27
> 
> 时间：2012-08-02T08:45:59.753
> 
> 标签：c++, templates, header-files

在编译期间，我收到“多重定义”错误，它指的是头文件中的模板特化。我需要将专业化放入源文件吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-02T08:52:08.547

如果它是您专门化的功能，您可以将它们放在 .cpp 文件中，或者将它们内联在标题中。

就像 James 指出的那样，如果你不使函数内联，你仍然必须在标题中*声明特化。*否则编译器不知道它必须在别处寻找它们。

然后，您可以将实现（定义）放入 .cpp 文件中。就像其他功能一样。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-02T08:50:17.100

不，您不需要将特化放在单独编译的文件中，*但是*，您需要注意特化函数模板只是普通函数，因为它是完全特化的。

因此，除非声明它，否则它不能在多个翻译单元中定义**`inline`**。

# zend-framework - [Zend]在大型项目中过滤变量

> ID：11773961
> 
> 赞同：0
> 
> 时间：2012-08-02T08:46:00.427
> 
> 标签：zend-framework, escaping, xss

我有一个用 ZendFramework 编写的庞大应用程序。早些时候一切都很好。至于现在它被重新设计并获得了许多新的功能和选项，但我必须保护这个软件免受 xss 的侵害。变量取自几个来源（webform、Webservices、api 等），其中一些应该被转义，一些则不应该。您认为，在不编辑所有（2 000 +）文件并转义所有回声的情况下，保护我的网站的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:00:29.823

Zend Framework 带有一个名为“Zend_Filter”的类。此类有一个“StripTags”过滤器选项，它将从给定字符串中删除所有标签。

[http://framework.zend.com/manual/en/zend.filter.set.html#zend.filter.set.striptags](http://framework.zend.com/manual/en/zend.filter.set.html#zend.filter.set.striptags)

如果您注意到，如果您排除某些内容并且不应该使用它来防御 XSS 攻击，即使是带标签过滤器也不推荐用于清理输入。它建议使用 Tidy 或 HTMLPurifier。

[http://tidy.sourceforge.net/](http://tidy.sourceforge.net/)

[http://htmlpurifier.org/](http://htmlpurifier.org/)

我认为 HTML Purifier 很容易使用。从他们的文档网站：

> require_once '/path/to/HTMLPurifier.auto.php';
> 
> $config = HTMLPurifier_Config::createDefault(); $purifier = 新 HTMLPurifier($config); $clean_html = $purifier->purify($dirty_html);

我希望这会有所帮助！

干杯!

# php - 如何限制登录到 Symfony2 中已登录的用户

> ID：11773962
> 
> 赞同：3
> 
> 时间：2012-08-02T08:46:04.700
> 
> 标签：php, symfony, access-control

```
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/logout, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/recover-password, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/activate-account, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_USER } 
```

似乎 access_control 可以很好地限制不同角色的访问，但我需要类似.`IS_AUTHENTICATED_ANONYMOUSLY`*`only`*`&& ! ROLE_USER && ! ROLE_ADMIN`

我不希望它已经登录以允许访问此路线。如果这是可能的，`security.yml`那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-26T23:04:51.527

你可以做你认为你可以做的事：

```
- { path: ^/, role: IS_AUTHENTICATED_ANONYMOUSLY && !IS_AUTHENTICADED_FULLY } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T09:15:38.773

`JMSSecurityExtraBundle`添加表达式支持。

文档中的示例：

```
access_control:
    - { path: ^/foo, access: "hasRole('FOO') and hasRole('BAR')" } 
```

延伸阅读：[基于表达式的授权语言](http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/expressions)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-20T15:42:25.753

@drgomesp 答案不正确。由于未登录的用户被认为是匿名认证的，而完全认证的用户也是匿名用户。看看这个：

```
- { path: ^/, role: IS_AUTHENTICATED_ANONYMOUSLY && !IS_AUTHENTICADED_FULLY } 
```

这意味着，如果我通过匿名身份验证并且也未通过匿名身份验证，则显示“^/”网址。这将导致无限循环。

我已经在这里回答了这个问题，请查看解决方案：[https ://creativcoders.wordpress.com/2014/06/20/symonfy2-restrict-login-access-to-already-logged-users/](https://creativcoders.wordpress.com/2014/06/20/symonfy2-restrict-login-access-to-already-logged-users/)

```
- { path: /login$, access: "!isAuthenticated()" } 
```

来自官方文档[http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/expressions#usage-in-access-control](http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/expressions#usage-in-access-control)

# c# - Linq 无法从 'System.Collections.Generic.IEnumerable '到'字符串[]'

> ID：11773967
> 
> 赞同：3
> 
> 时间：2012-08-02T08:46:11.870
> 
> 标签：c#, linq

我对这段代码有疑问

```
string.Join(",", Encoding.Unicode.GetBytes("10.10.10.11").Select(x => x.ToString("X2"))); 
```

我有错误

`cannot convert from 'System.Collections.Generic.IEnumerable<string>' to 'string[]'`

它如何导出到逗号分隔的 txt 框？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T08:47:21.690

[您可以通过调用ToArray()](http://msdn.microsoft.com/en-us/library/bb298736.aspx)扩展方法将 IEnumerable 转换为字符串数组：

```
string.Join(",", Encoding.Unicode.GetBytes("10.10.10.11").Select(x => x.ToString("X2")).ToArray()); 
```

边注：

从 .NET 4.0 开始，有一个接受的[重载](http://msdn.microsoft.com/en-us/library/dd992421)，使调用过时。`String.Join``IEnumerable<String>``ToArray`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T08:47:13.237

你可以试试这个 ToArray()

```
string.Join(",", Encoding.Unicode.GetBytes("10.10.10.11")
   .Select(x => x.ToString("X2")))
   .ToArray(); 
```

# android - 横向和纵向的不同活动

> ID：11773968
> 
> 赞同：1
> 
> 时间：2012-08-02T08:46:14.833
> 
> 标签：android, layout, android-activity, orientation

我不知道这实际上是可能的，但我希望设备具有不同的横向和纵向活动。我有一个列表视图，在我的列表视图中的所有项目中，我都有坐标。所以我想，如果你把你的设备放在风景中，并显示一个地图视图，图标放置在项目的位置上，那就太好了。

我知道你可以为不同的方向创建不同的布局，但我猜只创建一个地图视图并将其用作横向布局并不能解决问题。活动是否有可能以等效的方式进行？没找到，应该没有吧。

否则我认为这可能有效：我认为自己在活动中进行了切换：在纵向上-> 执行此操作并加载此布局，在横向上-> 执行此操作并使用其他布局。但是如果放在 oncreate 中，这只会工作一次。但是[定向侦听器](http://developer.android.com/reference/android/view/OrientationEventListener.html)会做到这一点。任何人都知道这是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:52:15.417

Activity生命周期中有一个方法

```
public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);                
            // Check the Orientation of Device
            // Start Other Activity
    ...
    ...
    ...

} 
```

如果设备方向发生变化，您可以使用此方法更改活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:53:09.893

恕我直言，我们不能在这里使用 2 种不同的活动，但有一种方法，

请在此处查看如何动态检测方向， [check-orientation-on-android-phone](https://stackoverflow.com/questions/2795833/check-orientation-on-android-phone)

完成此操作后，您可以在同一活动中包含横向模式的代码。

# iphone - Xcode重复符号错误

> ID：11773974
> 
> 赞同：3
> 
> 时间：2012-08-02T08:46:23.973
> 
> 标签：iphone, objective-c, ios, xcode

我收到“Apple Mach-O 链接器 (Id) 错误”：

```
ld: duplicate symbol _matrixIdentity in /BlahBlah/Corridor.o and /Blahblah/Drawable.o for architecture i386 
```

“走廊”类扩展了“可绘制”类，“_matrixIdentity”在文件“Utils.h”中定义和实现。以下是我的头文件中的顶行：

可绘制的.h

```
#import <Foundation/Foundation.h>
#import "Utils.h" 
@interface Drawable : NSObject
... 
```

走廊.h

```
#import <Foundation/Foundation.h>
#import "Drawable.h"
@interface Corridor : Drawable
... 
```

我已经检查过是否有任何“.m”导入而不是“.h”，一切都是正确的。任何想法，什么可能导致这个问题？

编辑：从“Utils.h”发布代码

```
#import <Foundation/Foundation.h>    
...
#pragma mark -
#pragma mark Definitions

typedef float mat4[16];

#pragma mark -
#pragma mark Functions
void matrixIdentity(mat4 m)

{
m[0] = m[5] = m[10] = m[15] = 1.0;
m[1] = m[2] = m[3] = m[4] = 0.0;
m[6] = m[7] = m[8] = m[9] = 0.0;
m[11] = m[12] = m[13] = m[14] = 0.0;
}
... 
```

我只在我的两个类的方法中引用“mat4”定义。另外，“matrixIdentity”只是这个文件中的第一个函数，可能问题不在实现中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:24:57.463

C/C++/Objective-C 与 Java、C#、Ruby、Python 的差异...

分割文件。

标题和毫米

不要使用#include（可能多次包含）

使用#import...（包括一次）

* * *

实用程序.h

```
#ifndef __utils_h__ // <<< avoid multiple #include
#define __utils_h__ // <<< avoid multiple #include
#import <Foundation/Foundation.h>    
...
#pragma mark -
#pragma mark Definitions

typedef float mat4[16];

#pragma mark -
#pragma mark Functions
extern void matrixIdentity(mat4 m);

#endif // __utils_h__ <<< avoid multiple #include 
```

* * *

实用程序.mm

```
#import "Utils.h"

void matrixIdentity(mat4 m)
{
m[0] = m[5] = m[10] = m[15] = 1.0;
m[1] = m[2] = m[3] = m[4] = 0.0;
m[6] = m[7] = m[8] = m[9] = 0.0;
m[11] = m[12] = m[13] = m[14] = 0.0;
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:31:20.937

您的问题的两种解决方案：

1.  仅`void matrixIdentity(mat4 m);`在头文件中声明，然后在相应的 c/m 文件中实现实际代码。
2.  使你的函数在头文件中内联（这是苹果使用的技术）

    `inline void matrixIdentity(mat4 m) { ...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:58:16.660

根据您的描述， utils.h 声明并实现了一个变量，由于 utils.h 包含在两者中（在 Corridor.h 的情况下，间接通过 Drawable.h ）。因此，两个编译单元都包含 _matrixIdentity 的实现，并且链接器会抱怨。

将 _matrixIdentity 的实现移动到新模块 utils.m 中，以确保符号只有一个定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:46:11.280

将 -force_load 用于其他链接器标志中的一个库..为我解决了一次问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-01T10:49:50.873

就我而言，我在头文件本身中实现了一个函数。在函数之前添加静态内联关键字为我修复了错误。

# java - 从 JSP 获取 EntityManger 和 UserTransaction 的最佳实践

> ID：11773975
> 
> 赞同：4
> 
> 时间：2012-08-02T08:46:25.760
> 
> 标签：java, jsp, jboss7.x, entitymanager

我目前正在尝试找出在我的应用程序中获取实体管理器和用户事务的最佳方法。

在 JBoss 5.1 中，我可以将它直接注入到 JSP 文件中，但现在不允许这样做了：

```
<%!@PersistenceContext(unitName = "unitname")
    public EntityManager em;

    @Resource
    UserTransaction utx;
%> 
```

我必须从我的应用程序中的不同位置访问`em`和访问，`utx`例如 Servlet 和 Controller 类。因此，将它放在一个地方并在全球范围内访问它会很棒，但我还没有弄清楚如何去做。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T00:11:07.717

## 正在解决的问题

Servlet 和 JSP 必须是无状态的，因为它们在多个线程之间共享。An`EntityManager`确实保持状态，因此并发线程不能共享单个实例。

我们想要一个平滑/无缝的机制来获取 EntityManager，最好由 Servlet 容器管理。

## Servlet-容器托管持久化上下文

让我们`ContainerManagedPersistenceContext`在 Servlet/JSP 运行时中引入一个。

我们稍后会定义它。让我们首先看一下如何使用它来注入`EntityManager`in `JSP`：

```
<%! @Inject
    @ContainerManagedPersistenceContext.Qualifier
    public EntityManager em;
%> 
```

或者，更好的是进入控制器（因为我们确实想将数据恢复/业务逻辑从我们的 JSP 中分离出来，对吧？）：

```
@Named
@SessionScoped
public class SessionController implements Serializable
{
    ...

    @Inject
    @ContainerManagedPersistenceContext.Qualifier
    private EntityManager em;
} 
```

### 但我（还）没有可用的 CDI

如果您没有 CDI，但您有 JSF，则可以将上下文作为旧式标准 JSF 注入`@ManagedProperty`：

```
@Named
@SessionScoped
public class SessionController implements Serializable
{
    ...

    @ManagedProperty(value = "#{containerManagedPersistenceContext}")
    ContainerManagedPersistenceContext cmpContext;

    ...
    public void myMethod() {
        EntityManager em = cmpContext.getEntityManager();
       try {
            ...
        } finally {
            em.close();
        }
    }
} 
```

请记住——出于同样的原因，我们必须首先进行这项工作——`EntityManager`绝不能在任何地方缓存/保存。

### 交易

使用for begin/commit/rollback`EntityTransaction`提供的：`EntityManager`

> EntityTransaction 交易 = em.getTransaction();

## ContainerManagedPersistenceContext

这被定义为一个应用程序范围的控制器和一个`PersistenceContext`：

```
@PersistenceContext(name = ContainerManagedPersistenceContext.NAME,
                    unitName = ContainerManagedPersistenceContext.UNIT_NAME)
@ApplicationScoped
public class ContainerManagedPersistenceContext implements Serializable
{
    private static final long serialVersionUID = 1L;

    // UNITNAME must match persistence.xml: <persistence-unit name="myUnitName">
    public static final String UNITNAME = "myUnitName";
    public static final String NAME = "persistence/" + UNIT_NAME;

    @Qualifier
    @Retention(RetentionPolicy.RUNTIME)
    @Target({ElementType.METHOD, ElementType.FIELD,
             ElementType.PARAMETER, ElementType.TYPE})
    public static @interface Qualifier { }

    // Servlets must be stateless (shared across multiple threads).
    // EntityManager is not stateless (cannot be shared across threads).
    // Obtain Container Managed EntityManager - and do NOT cache.
    @Produces @Qualifier
    public static EntityManager getEntityManager() throws NamingException
    {
        EntityManager lookup = InitialContext.doLookup("java:comp/env/" + NAME);
        return lookup;
    }
} 
```

### 限制

如所写，这为 Servlet 容器定义了一个专门命名的 PersistenceContext。由于`unitName`未参数化，因此它不提供以下灵活性级别：

```
@PersistenceContext(unitName = "unitname")
public EntityManager em; 
```

### 备择方案

[在 Servlet 上定义 PersistenceContext，并使用 JNDI 名称查找](http://javahowto.blogspot.com/2007/11/how-to-get-container-managed.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T09:13:53.073

我发现了如何在 Servlet、控制器类和 JSP 文件中获取 EntityManager 和 UserTransaction。

让我们从 SessionBeans 开始。我将所有控制器类重新定义为无状态 SessionBeans。会话 Bean 允许资源注入。我是这样做的：

```
@Stateless
public class UserHandling {
  @PersistenceContext(unitName = "SSIS2")
  private static EntityManager em;

  @Resource
  private UserTransaction utx;

  public User getUser(int userId) {
    User userObject = em.find(User.class, userId);
    return userObject;
  }
} 
```

如果 Session Bean Class 中需要另一个 Session Bean，可以通过`@EJB`注解注入：

```
@Stateless
public class UserHandling {
  @PersistenceContext(unitName = "SSIS2")
  private static EntityManager em;

  @Resource
  private UserTransaction utx;

  @EJB
  UserHandling uh; RoleHandling rh; 

  public User getUser(int userId) {
    User userObject = em.find(User.class, userId);
    return userObject;
  }
} 
```

在 JSP 文件中，您可以通过查找 InitialContext 来获取 Session Bean Controller 类：

```
<%
    InitialContext ic = new InitialContext();
    UserHandling uh = (UserHandling) ic.lookup("java:app/" + application.getContextPath() + "/UserHandling");
%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:34:05.120

好吧，我认为您应该从不同的角度看待问题？为什么需要调用`EJB`来自`JSP`页面？

`JSP`页面不应包含代码，它仅用于演示。我建议你添加一个`Servlet`或一个`JSF framework`并让`Servlet`或`ManagedBean`调用`EJB`然后将参数传递给`JSP`。

希望对你有帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T09:00:57.987

您可以使用以下代码段通过 JNDI 查找检索 EntityManager 和/或 UserTransaction：

```
try {
   Context ic = (Context) new InitialContext();
   EntityManager em = (EntityManager) ic.lookup("java:comp/env/*<persistence-context-name>*");
   UserTransaction ut = (UserTransaction) ic.lookup("java:comp/env/UserTransaction");
} catch (NamingException ne) {...} 
```

# gwt - GWT - 带有地点/活动的对话框

> ID：11773976
> 
> 赞同：1
> 
> 时间：2012-08-02T08:46:28.017
> 
> 标签：gwt, dialog, gwt-places, gwt-activities

我在页面顶部有一个标题栏，其中包含按钮和锚点。标题栏上的一个锚点会打开一个对话框，执行以下操作：

视图调用执行goTo到新位置的活动，在与该位置关联的活动的开始方法中，调用实例化自定义对话框。

现在这里出现了两个问题：

1）因为从标题栏导航到该位置，所以标题栏活动被活动管理器关闭，因此单击锚点后按钮不起作用。我不希望标题栏活动被关闭。

2）单击此锚点后，屏幕中央的主面板变为空白。我不知道为什么会这样，但显然不希望这样。

如何解决这两个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:32:53.850

> 我不希望标题栏活动被关闭。

查看[David Chandler 的 Google I/O 2011 GWT 会议](http://www.google.com/events/io/2011/sessions/high-performance-gwt-best-practices-for-writing-smaller-faster-apps.html)。它涉及您所描述的主/细节架构的类型。我强烈推荐它，特别是对于这个问题，在第 18 分钟之后的部分，当大卫开始对活动和地点进行全面概述时。

正如演示文稿中所建议的那样，您可以选择对标题栏进行更改以仅响应[PlaceChangeEvents](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/place/shared/PlaceChangeEvent.html)而发生，而无需完整的标题栏活动。

# delphi - 如何仅使用 TADOQuery 组件将图像插入数据库

> ID：11773986
> 
> 赞同：5
> 
> 时间：2012-08-02T08:47:05.530
> 
> 标签：delphi

我有一个简单的基本问题，我正在尝试使用`Insert`语句将图像插入数据库，而其他列值也使用`TADOQuery`组件。

由于代码已经由某人编写，因此我想在此处放置一些虚拟示例代码，以便您通过相应的步骤进行澄清。

请注意，这与组件一起工作得很好`TQuery`，因为我正在用组件替换`TQuery`，`TADOQuery`所以我必须只使用组件来做同样的事情`TADOQuery`。

相同的代码应该适用于 SQL Server 和 Oracle 数据库。

我试图在其中插入图像的列的数据类型`VarBinary`是 SQL Server 数据库中的类型。

使用 TQuery 将图像插入表中

1.  使用创建图像`TImage`。

    ```
    msBinImgStream := TMemoryStream.Create; 
    imgCustom := TImage.Create(self); 
    imgJpg := TJPEGImage.Create; 
    ```

2.  将图像转换为`TJpegImage`并保存为`TMemoryStream`.

    ```
    imgJpg.Assign(imgCustom.Picture.Bitmap); 
    imgJpg.SaveToStream(msBinImgStream); 
    ```

3.  `SetBlobdata`使用组件的属性插入数据库`TQuery`。

    ```
    sSql := 'INSERT INTO Table_Name(Column1, Column2, Column_Image) VALUES ( ''' + Value1 + ''', ''' + Value2 + ''', :pBlob)'; 
    qryTQuery.SQL.Add(sSQL); 
    qryTQuery.ParamByName('pBlob').SetBlobData(msBinImgStream.Memory, msBinImgStream.Size); 
    qryTQuery.ExecSQL; 
    ```

现在使用`TADOQuery`：

1.  能够创建图像。
2.  将其转换为 TJpeg 并保存为`TMemoryStream`.
3.  尝试使用将图像插入数据库`LoadFromStream(stream, ftBlob)`但出现错误*"String or binary value may be truncated"*。

    ```
    sSql := 'INSERT INTO Table_Name(Column1, Column2, Column_Image) VALUES ( ''' + Value1 + ''', ''' + Value2 + ''', :pBlob)'; 
    qryADOQuery.SQL.Add(sSQL); 
    qryADOQuery.Parameters.ParamByName('pBlob').LoadFromStream(msBinImgStream, ftBlob); 
    qryADOQuery.ExecSQL; 
    ```

请让我知道，用这种方法我应该如何克服这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-02T10:13:57.357

### 保存：

```
var
  Field: TBlobField;
  Stream: TStream;
begin
  if ADOQuery.Active and (Image.Picture.Graphic <> nil) then
  begin
    ADOQuery.Insert;
    Field := TBlobField(ADOQuery.FieldByName('ImageData')); // ensure it ís a blob
    Stream := ADOQuery.CreateBlobStream(Field, bmWrite);
    try
      Image1.Picture.Graphic.SaveToStream(Stream);
    finally
      Stream.Free;
      ADOQuery.Post;
    end;
  end;
end; 
```

或使用 a`TADOBlobStream`而不是 a `TStream`：

```
var
  ...
  Stream: TADOBlobStream;
begin
  ...
    Stream := TADOBlobStream.Create(Field, bmWrite);
    ... 
```

### 加载：

```
var
  Field: TBlobField;
  Stream: TStream;
  Jpg: TJPEGImage;
begin
  if ADOQuery.Active then
  begin
    Field := TBlobField(ADOQuery.FieldByName('ImageData'));
    Stream := ADOQuery.CreateBlobStream(Field, bmRead);
    Jpg := TJPEGImage.Create;
    try
      Jpg.LoadFromStream(Stream);
      Image1.Picture.Graphic := Jpg;
    finally
      Jpg.Free;
      Stream.Free;
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T19:44:28.687

像您一样使用参数时，我认为您必须为其提供额外的设置，例如[`Attributes`](http://docwiki.embarcadero.com/Libraries/en/Data.Win.ADODB.TParameter.Attributes)and `DataType`，如下所示：

```
 sSql := 'INSERT INTO Table_Name (Column1, Column2, Column_Image) ' +
    'VALUES (''' + Value1 + ''', ''' + Value2 + ''', :pBlob)';

  qryADOQuery.SQL.Add(sSQL);
  qryADOQuery.Parameters[0].Attributes := [paLong];
  qryADOQuery.Parameters[0].DataType := ftBlob; // Or ftVarBytes
                                                // Or ftOraBlob (Oracle only)
  qryADOQuery.Parameters[0].LoadFromStream(msBinImgStream, ftBlob);
  qryADOQuery.ExecSQL; 
```

# javascript - 从 jQuery 变量中剥离数据，增加剩余的数字，将剥离的数据放回变量中

> ID：11773991
> 
> 赞同：3
> 
> 时间：2012-08-02T08:47:15.443
> 
> 标签：javascript, jquery, html

我正在尝试在 jQuery 中编写一个脚本，它首先获取图像标签的 src（ID 为“#image”）。

然后剥离图像路径的第一部分（“images/big/”）和图像扩展名（“.jpg”）。这仅留下图像名称，它只是一个数字（范围从 1 到 7）。

然后，将该数字加 1。

然后将图像路径和图像扩展名（开头删除的东西）放回适当的位置。然后将此新路径分配给 img 标签（ID 为“#image”）

本质上，该脚本旨在增加图像名称的数字。

这是我设法编写的代码：

```
var imagePath = ( $("#image").prop("src") );
    var imagePath = imagePath.replace('images/big/', '');
    var imagePath = imagePath.replace('.jpg', '');
    var imagePath = imagePath++;
    var imagePath = "images/big/"+imagePath+".jpg";
    $("#image").attr("src", imagePath); 
```

然而，可悲的是，它不起作用，它似乎只返回一个“NaN”值。您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:49:37.740

问题实际上是您在增加数字时正在创建一个新变量。这一行是错误的：

> var imagePath = imagePath++;

这将更好地工作：

```
var imagePath = ( $("#image").prop("src") );
imagePath = imagePath.replace('images/big/', '');
imagePath = imagePath.replace('.jpg', '');
imagePath++;
imagePath = "images/big/"+imagePath+".jpg";
$("#image").attr("src", imagePath); 
```

[演示](http://jsfiddle.net/H3VQV/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:09:02.617

您有太多代码无法替换单个数字。

```
$("#image").attr("src", $("#image").attr("src").replace(/\d/, function(s) {
    return +s+1;
})); 
```

[**小提琴**](http://jsfiddle.net/Xmx2E/1/)

或者更坚固的版本（确保数字后跟`.jpg`并且可以接受多个一位数）：

```
$("#image").attr("src", $("#image").attr("src").replace(/(\d+)\.jpg/, function(s, m) {
    return (parseInt(m, 10)+1) + '.jpg';
})); 
```

[**小提琴**](http://jsfiddle.net/Xmx2E/1/)

[`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)将字符串解析为指定基数/基数的整数——`10`对应于小数。这样做是为了让 JS 引擎不会假设一个数字应该是八进制，如果它以`0`例如开头。好吧，当您使用小数时，请`parseInt(myNumber, 10)`确保将其解析为十进制整数。

[`.attr`](http://api.jquery.com/attr/)你应该熟悉，它在传递 1 个参数时检索给定的 HTML 属性，并在传递 2 个参数时设置给定的属性。所以基本上，在将方法应用到它之后，我将`src`属性设置为相同。`src``replace`

该[`string.replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)方法采用 2 个参数，在这种情况下，我使用正则表达式（[正则表达式](http://www.regular-expressions.info/)）来匹配数字字符（`\d`是一个表示字符类`[0-9]`），后跟文字`.jpg`字符串，并将它们替换为以 1 递增的匹配数字。

该`replace`方法的第二个参数中的函数对象将整个匹配 ( `s`) 作为参数，然后是 N 个捕获组（`m`= `\d+`= 一个或多个数字字符）。因为我只有一个[捕获组](http://www.regular-expressions.info/brackets.html)，所以我给函数提供了 2 个参数，这样我就可以使用捕获的组并在函数对象内增加它，返回增加的数字 +`.jpg`以替换`number.jpg`原始源中的。

由于您的代码无法正常工作，我唯一的猜测是您没有从字符串中删除所有非数字字符，因此当`++`增量运算符尝试强制进行类型转换时，它只返回 a `NaN`，因为给定的字符串失败被解析为整数。使用我的替换方法，它只从字符串中获取数字并将其递增，与字符串的其余部分无关。

* * *

**编辑：**

我发现了您的代码的主要问题，`$("#image").prop("src")`检索了图像的**完整**URL，这就是为什么，正如我上面的段落所暗示的，您没有删除所有非数字字符并且它未能评估为整数。将其替换`.prop`为`.attr`可能会使您的原始代码也能正常工作。

`++`尽管在使用后增量运算符并在同一范围内多次声明相同的变量名称后，您不应将变量分配给自身，这被认为是不好的做法（大多数 JS 解释器忽略重新声明，但它是草率的编码）。

所以代码的另一个更正版本：

```
var imagePath = $("#image").attr("src"); //use .attr as .prop returns full URL
imagePath = imagePath.replace('images/big/', '').replace('.jpg', '');
imagePath++;
imagePath = "images/big/"+imagePath+".jpg";
$("#image").attr("src", imagePath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:51:14.520

您需要使用 javascript 的[parseInt()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)将字符串转换为数字，然后将其递增。

# parsekit - ParseKit 在简单示例中崩溃

> ID：11773994
> 
> 赞同：2
> 
> 时间：2012-08-02T08:47:23.050
> 
> 标签：parsekit

我最近尝试将 ParseKit 集成到我的 iPhone 应用程序中。我下载了 release-1.5-tag，并将其集成到我的项目（XCode 4.4、iOS 5.1）中，并且构建没有问题。当我运行一个简单的示例来尝试解析一些 Javascript 时（使用 ParseKit 本身附带的语法）：

```
NSString *path = [[NSBundle bundleForClass:[self class]] pathForResource:@"javascript" ofType:@"grammar"];
NSString *g = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
PKParser *parser = [[PKParserFactory factory] parserFromGrammar:g assembler:self];
NSString *s = @"var x = 0;";
[parser parse:s]; 
```

我的应用程序挂了一会儿，然后在似乎对 PKParser:matchAndAssemble 和 PKSequence:allMatchesFor 进行了数万次调用之后，我得到了一个 EXC_BAD_ACCESS。在所有这些调用结束时，它最终调用 PKTerminal:matchOneAssembly，然后是 PKCaseInsensitiveLiteral:qualifies，然后是 EXC_BAD_ACCESS。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:15:22.023

[ParseKit](http://parsekit.com)的开发者在这里。

使用 Google 代码中的主干头：

[http://code.google.com/p/parsekit/](http://code.google.com/p/parsekit/)

# java - maven 版本依赖注入到子模块

> ID：11773997
> 
> 赞同：0
> 
> 时间：2012-08-02T08:47:39.967
> 
> 标签：java, maven-3, dependency-management

我购买了“Apache Maven 3 Cookbook”，并且正在尝试学习如何将依赖项添加到我的 Maven 项目中。

我的主要项目 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-    4.0.0.xsd">
 <modelVersion>4.0.0</modelVersion>

<groupId>net.srirangan.packt.maven</groupId>
<artifactId>TestModularApp</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>

<name>TestModularApp</name>
<url>http://maven.apache.org</url>

<properties>
 <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency>
<dependency>
<groupId>mysql</groupId>
<artifactId>mysql-connector-java</artifactId>
<version>5.1.2</version>
</dependency>
</dependencies>
<modules>
<module>ChildProject</module>
<module>MyWebApp</module>
</modules>
</project> 
```

正如您在此处看到的，该项目中的包装设置为“pom”，因为这是父项目..（这就是我所知道的 :)）

然后我使用以下 pom.xml 创建了一个子项目：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>net.srirangan.packt.maven</groupId>
    <artifactId>TestModularApp</artifactId>
    <version>1.0-SNAPSHOT</version>
  </parent>
  <groupId>com.xpogames.childproject</groupId>
  <artifactId>ChildProject</artifactId>
  <version>1.0-SNAPSHOT</version>
  <name>ChildProject</name>
  <url>http://maven.apache.org</url>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    </dependency>
  </dependencies>
</project> 
```

正如您在此处看到的，我没有向 mysql-connect-java 依赖项添加版本属性，因为它应该从父项目继承版本。但由于某种原因，它没有。

当我在该项目上运行 mvn compile 时，我收到一个错误，即缺少 dependencies.dependency.version 属性。

任何想法我做错了什么？如何解决我也不需要在子项目中指定版本的问题？

谢谢！

# 更新

在看了 Peter Lawrey 的回答并观看了他提供的 url 上的示例后，我注意到我的主要 XML`<dependencyManagement>`缺少`<dependencies>`. 一旦我添加了该属性，我就不需要在子项目中提供版本号。

彼得的回答显示了实现这一目标的另一种方法。

感谢一切！

克菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:53:15.977

您从父 pom的[dependencyManagement](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)部分中的依赖项继承版本，并有选择地将这些版本包含在子 pom 中。

在您的情况下，您不需要再次提及依赖项，因为它已经包含在父项中。（对于 JUnit 来说）

顺便说一句：我使用 JUnit 4.10，我没有发现任何向后兼容性问题。