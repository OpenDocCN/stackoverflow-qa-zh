# StackOverflow 问答 10363000-10363999

# git - 在修补程序之后合并 Git Flow 功能分支？

> ID：10363000
> 
> 赞同：12
> 
> 时间：2012-04-28T11:19:11.113
> 
> 标签：git, branching-and-merging, git-flow, hotfix, feature-branch

我最近才开始使用 git flow，有些东西我不太明白。首先，我从不直接在开发中做任何事情。如果我做某事，我要么使用启动修补程序或功能。

当我开始一项新功能（'sequentialUpgrades'）时，我的插件版本为 1.1.5。那是4天前的事了。在过去的 4 天里，虽然还没有完成这个新功能，但我完成了 2 个修补程序，因此将它们合并回 master，然后在完成它们后进行开发，当然我在这两个分支上都有最新的更改，包括修补程序和我在 1.1.7 版...如果我做 a `git diff master develop`，没有区别。

现在当我回到我的特性分支继续开发这个新特性时，特性分支仍然回到 1.1.5，所以我没有 2 个最新的修补程序。

所以我有两个问题：

1.  如果有什么方法可以在不搞砸的情况下将最新更改添加到我的功能分支中？

我正在考虑将开发合并到功能分支中，但我认为这不是正确的方法。但是，我真的很想，在开发这个新功能时需要最后两个修复程序。

2.  如果我无法做到这一点，当我完成该功能时，它现在如何在没有任何冲突的情况下合并回开发？我无法解决这个问题。

因为我早在 1.1.5 就开始了这个功能。在功能分支中，我对文件 access-level.php 进行了重大更改。当我做修补程序时，我可能在同一个文件中更改了 5-6 行。如何将一个完全回到 1.1.5 并进行了一些重大更改的文件合​​并到 1.1.7 的同一个文件中，该文件从那时起也发生了更改？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T12:52:25.343

偶尔将开发合并到您的功能分支中以使其保持最新并没有错。git 非常擅长合并，但如果两个分支都涉及文件的相同部分，您可能必须手动解决一些冲突。我更喜欢使用图形合并工具来解决冲突，请参阅[本指南](http://www.gitguys.com/topics/merging-with-a-gui/)，了解如何设置它的一些技巧。

# php - 带有 mysql 的 PHP JSON 输出用于 tag-it

> ID：10363003
> 
> 赞同：1
> 
> 时间：2012-04-28T11:19:19.910
> 
> 标签：php, mysql, ajax, json, tag-it

我正在尝试让 tag-it jquery 插件与 json 字符串一起使用。目前我正在从数据库中获取我的值，如下所示：

```
$query = sprintf(
            'SELECT
                t.tag
            FROM
                tags AS t
            ');

    $row_set= array();

    if($result = mysqli_query($db, $query))
    {
        // fetch data
        while ($row = mysqli_fetch_assoc($result))
        {
            $row_set[] = $row;
        }

        // set the output
        echo json_encode($row_set);
    } 
```

在 AJAX 中调用时会给出以下输出：

```
[{"tag":"test"},{"tag":"tests"}] 
```

但我必须以以下格式输出 JSON 字符串：

```
["android-intent","animate","architecture","artificial-intelligence","attributes"] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:22:18.260

当您使用`row_set[] = $row;`最有可能`$row`看起来像这样`$row['tag'] = 'test` 时，这就是您使用 JSON 对象格式的原因；

尝试

```
 $row_set[] = $row['tag']; 
```

确保您还将 seound 参数设置`true`为`JSON`始终返回数组

```
 json_encode($row_set,true); 
```

这会将它作为数组而不是对象返回

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:23:58.020

这应该解决它，通过将字符串添加到您的箭头而不是将数组添加到您的数组中。

```
$row_set[] = $row[0]; or $row_set[] = $row['tag']; 
```

# vim - 如何在不同模式下更改 vim 光标形状

> ID：10363010
> 
> 赞同：7
> 
> 时间：2012-04-28T11:20:32.443
> 
> 标签：vim, terminal, putty

我在 Mac 的 iTerm2 下使用 vim，或者在 windows 中使用 putty。我想在不同的 vim 模式下看到不同的 vim 光标形状。我知道 gvim 和 macvim 有这个功能，并且有[一篇文章](http://vim.wikia.com/wiki/Change_cursor_shape_in_different_modes)说明如何在 gnome-terminal 和 KConsole 中做到这一点。但我在 iTerm2 和 Putty 中找不到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:50:09.483

[伟大的 Steve Losh 的这个插件](https://github.com/sjl/vitality.vim)负责 iTerm2。我不知道腻子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T12:05:46.933

我使用[这个插件](https://github.com/jszakmeister/vim-togglecursor)很长时间了，它与 Konsole 完美配合，但它也支持很多术语。

[文档](https://github.com/jszakmeister/vim-togglecursor/blob/master/doc/togglecursor.txt#L18)说：

> 当前支持的终端是 Mac 的 iTerm2（需要 1.0.0.20130602 测试版或更高版本）、基于 VTE3 的终端（包括 gnome-terminal）和 KDE 的 Konsole。xterm 控制台也得到部分支持。较旧的 xterm 不支持行光标，因此该插件当前将光标设置为下划线。
> 
> 旧版本的基于 VTE3 的终端（v0.39 之前）不支持通过转义序列更改光标，因此不受支持。在不受支持的终端上，Vim 的默认行为保持不变。
> 
> 该插件还支持 tmux，并且也会在 tmux 会话中更改您的光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T12:23:55.280

我认为你不应该安装任何插件，你可以改变[腻子重新配置]->窗口->外观->[光标外观]->[垂直线]，

它更方便。

而且我认为改变vim光标是不必要的，因为如果你改变形状它几乎找不到光标！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-28T08:52:46.703

Steve Losh ( [https://github.com/sjl/vitality.vim](https://github.com/sjl/vitality.vim) ) 的插件对某些人来说有点问题（当您在 iTerm2 的选项卡之间切换时，会添加奇怪的字符来代替光标）。

将此添加到您的 .vimrc 对我有用：

```
" Change cursor shape between insert and normal mode in iTerm2.app
if $TERM_PROGRAM =~ "iTerm"
    let &t_SI = "\<Esc>]50;CursorShape=1\x7" " Vertical bar in insert mode
    let &t_EI = "\<Esc>]50;CursorShape=0\x7" " Block in normal mode
endif 
```

归功于 Erlend Hamberg： [http ://hamberg.no/erlend/posts/2014-03-09-change-vim-cursor-in-iterm.html](http://hamberg.no/erlend/posts/2014-03-09-change-vim-cursor-in-iterm.html)

# javascript - 为什么这个 javascript 片段会触发“Unexpected token ILLEGAL”？

> ID：10363011
> 
> 赞同：0
> 
> 时间：2012-04-28T11:20:32.937
> 
> 标签：javascript

缩小的[google-code-prettify](http://code.google.com/p/google-code-prettify/) javascript 库的一行触发“意外令牌非法”。如果我删除它，lib 工作正常。我试图删除特殊字符，期望编码是代码，但似乎不是。

```
PR.registerLangHandler(PR.createSimpleLexer([["pln",/^[\t\n\r \xa0\u2028\u2029]+/,null,"\t\n\r Â\xa0â€¨â€©"],["str",/^(?:["\u201c\u201d](?:[^"\u201c\u201d]|["\u201c\u201d]{2})(?:["\u201c\u201d]c|$)|["\u201c\u201d](?:[^"\u201c\u201d]|["\u201c\u201d]{2})*(?:["\u201c\u201d]|$))/i,null,'"â€œâ€'],["com",/^['\u2018\u2019].*/,null,"'â€˜â€™"]],[["kwd",/^(?:addhandler|addressof|alias|and|andalso|ansi|as|assembly|auto|boolean|byref|byte|byval|call|case|catch|cbool|cbyte|cchar|cdate|cdbl|cdec|char|cint|class|clng|cobj|const|cshort|csng|cstr|ctype|date|decimal|declare|default|delegate|dim|directcast|do|double|each|else|elseif|end|endif|enum|erase|error|event|exit|finally|for|friend|function|get|gettype|gosub|goto|handles|if|implements|imports|in|inherits|integer|interface|is|let|lib|like|long|loop|me|mod|module|mustinherit|mustoverride|mybase|myclass|namespace|new|next|not|notinheritable|notoverridable|object|on|option|optional|or|orelse|overloads|overridable|overrides|paramarray|preserve|private|property|protected|public|raiseevent|readonly|redim|removehandler|resume|return|select|set|shadows|shared|short|single|static|step|stop|string|structure|sub|synclock|then|throw|to|try|typeof|unicode|until|variant|wend|when|while|with|withevents|writeonly|xor|endif|gosub|let|variant|wend)\b/i,null],["com",/^rem.*/i],["lit",/^(?:true\b|false\b|nothing\b|\d+(?:e[+-]?\d+[dfr]?|[dfilrs])?|(?:&h[\da-f]+|&o[0-7]+)[ils]?|\d*\.\d+(?:e[+-]?\d+)?[dfr]?|#\s+(?:\d+[/-]\d+[/-]\d+(?:\s+\d+:\d+(?::\d+)?(\s*(?:am|pm))?)?|\d+:\d+(?::\d+)?(\s*(?:am|pm))?)\s+#)/i],["pln",/^(?:(?:[a-z]|_\w)\w*|\[(?:[a-z]|_\w)\w*])/i],["pun",/^[^\w\t\n\r "'[\]\xa0\u2018\u2019\u201c\u201d\u2028\u2029]+/],["pun",/^(?:\[|])/]]),["vb","vbs"]); 
```

我试图改变`["pun",/^(?:\[|])/]])`，`["pun",/^(?:\[|])/])`但没有运气。

编辑：

我可以确定“\t\n\r Â\xa0”是它的原因，但我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:52:25.843

这很可能是一个编码问题，因为`¨â`从`"\t\n\r Â\xa0â€¨â€©"`解决问题。删除两个字符之一不会。

# android - 三星 Galaxy s2 AVD (MAC)

> ID：10363014
> 
> 赞同：0
> 
> 时间：2012-04-28T11:20:57.793
> 
> 标签：android, macos, avd

我已经从三星网站下载了三星 Galaxy S2 的皮肤：[Samsung Galaxy S2 Skin](http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=9576&listReturnUrl=http://innovator.samsungmobile.com:80/platform.main.do?platformId=1&indexType=1&indexDirection=1&sortType=0&cateId=1&codeType=C512&tabNum=1&searchText=&curPage=2&listLines=&linkType=0&nacode=&codeType=C512)

它指示将文件解压缩到 SDK 区域下的附加组件目录中 - 我已经这样做了，但是无论我选择什么版本的 Android，皮肤都不会出现在新的 AVD 中。我什至将文件解压缩到平台目录中，甚至将其解压缩到平台/android-10/skins 下。

对此有任何想法，因为我使用的是 Apple Mac，所以我不知道这个皮肤是否适用于所有操作系统

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:58:34.323

如果您在 AVD 中选择的目标版本是 API 级别 10，您需要执行以下操作以使其显示在内置皮肤中。

*   进入解压皮肤的目录（[Android-SDK目录]/platforms/android-10/skins）
*   编辑 manifest.ini
*   将 api=9 更改为 api=10

然后它应该出现。

# c# - 如何从 Visual Studio 加载项获取项目目录

> ID：10363015
> 
> 赞同：3
> 
> 时间：2012-04-28T11:20:59.940
> 
> 标签：c#, visual-studio-2010, visual-studio-addins

我想从加载项中获取项目目录。但是，如果我使用以下代码：

```
string projectDir = Directory.GetCurrentDirectory(); 
```

它返回`C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\`

如何获取使用插件的项目的项目目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:24:16.587

有关可以使用的 Visual Studio 变量列表，请参见此处

[VS 变量](http://msdn.microsoft.com/en-us/library/c02as0cs.aspx)

```
$(ProjectDir) 
```

给出项目目录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:46:07.263

我终于找到了解决问题的方法：

```
string projectDir = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-10T13:05:31.923

您也可以简单地使用 `Environment.CurrentDirectory`

# android - Android 相对布局选择器

> ID：10363018
> 
> 赞同：3
> 
> 时间：2012-04-28T11:21:15.500
> 
> 标签：android, android-layout, android-relativelayout

如何更改相对布局形状的颜色？像按钮一样工作。我尝试使用选择器来做到这一点。

这是我使用的代码。

```
 <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/rlGPS"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:background="@drawable/relative_selector"

            >

            <ImageView
                android:id="@+id/iv1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:src="@drawable/ic_launcher" />

            <TextView
                android:id="@+id/tvs1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="5dp"
                android:layout_below="@+id/tvl1"
                android:layout_toLeftOf="@+id/iv1"
                android:text="you can here protect ... "
                android:textColor="@color/gray" />

            <TextView
                android:id="@+id/tvl1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_toLeftOf="@id/iv1"
                android:text="GPS"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="@color/white" />
        </RelativeLayout> 
```

relative_selector.xml 在这里，我正在使用选择器进行更改。

```
<?xml version="1.0" encoding="utf-8"?> 

 <selector xmlns:android="http://schemas.android.com/apk/res/android"> 

  <item android:state_focused="true" android:drawable="@drawable/relative_focus"/>
  <item android:state_pressed="true" android:state_enabled="false"
   android:drawable="@drawable/relative_clicked" />
  <item android:drawable="@drawable/relative_background"/>

</selector> 
```

relative_background.xml 这是形状。

```
<?xml version="1.0" encoding="utf-8"?>

<shape xmlns:android="http://schemas.android.com/apk/res/android"
 android:padding="10dp"
 android:shape="rectangle">

 <stroke android:width="1dp" android:color="#636161" />

 <padding android:left="5dp"
    android:top="2dp"
    android:right="2dp"
    android:bottom="5dp" />

 <corners android:radius="6dp" />

 <solid android:color="#88ffffff"
     />

</shape> 
```

在“relative_clicked.xml”和“relative_focus.xml”我只改变了颜色。

relative_focus.xml

```
 <stroke android:width="1dp" android:color="#ffff00" /> 
```

relative_clicked.xml

```
 <solid android:color="#88ffff00"/> 
```

所有 .xml 文件都在 drawable 文件夹中。我想像按钮一样工作。有人知道吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T16:43:32.723

从您的选择器 xml：

```
<item android:state_pressed="true" 
      android:state_enabled="false" 
      android:drawable="@drawable/relative_clicked" /> 
```

如果你删除它会工作`state_enabled`吗？

```
<item android:state_pressed="true" 
      android:drawable="@drawable/relative_clicked" /> 
```

# php - CodeIgniter 在数据库查询中插入撇号

> ID：10363019
> 
> 赞同：2
> 
> 时间：2012-04-28T11:21:26.687
> 
> 标签：php, database, codeigniter, substring, apostrophe

我有一个奇怪的问题一直困扰着我。我要做的就是在数据库表上运行查询，但由于某种原因，CodeIgniter 将撇号放入查询中，这随后会破坏页面。

我的代码如下所示：

```
$this->db->select("SUBSTRING(body,5)"); 
$this->db->order_by("date", "desc");
$this->data['query'] = $this->db->get_where('blog-entries', array('status' => 'P'), 3); 
```

但我在此页面上收到错误消息：

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM (`blog-entries`) WHERE `status` = 'P' ORDER BY `date` desc LIMIT 3' at line 2 
```

查询实际上运行为：

```
SELECT SUBSTRING(body, `5)` FROM (`blog-entries`) WHERE `status` = 'P' ORDER BY `date` desc LIMIT 3 
```

正如您所看到的，由于某种原因，在子字符串中的数字 5 周围添加了撇号。如果我删除子字符串，那么一切正常，如果我删除撇号并直接在我的数据库上运行查询，它也可以工作。

有没有人知道为什么会发生这种情况或有解决方案？

您的帮助将不胜感激。

非常感谢，

G。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:32:44.010

Use this:

```
$this->db->select("SUBSTRING(body,5)", FALSE); 
```

As a default, Codeigniter tries to add back-ticks where it thinks is relevant. Sometimes it adds them where it shouldn't. Passing `FALSE` as the second parameter prevents it from doing this.

# eclipse - Android NDK 中的多个（我的和第 3 方）本机库

> ID：10363021
> 
> 赞同：6
> 
> 时间：2012-04-28T11:21:44.797
> 
> 标签：eclipse, android-ndk, native, eclipse-cdt, unsatisfiedlinkerror

我必须使用两个本地库：一个是我自己的，另一个是第三方库。只要我在单独的项目中使用它们，一切都很好。但现在我得到了`Exception Ljava/lang/UnsatisfiedLinkError`.

我正在使用 Eclipse。

我发现如果我将现有库放在 libs/armeabi 中，Eclipse 会开始编译本机代码并且它会失败。如果我从命令行重建 JNI 部分，编译成功但第 3 方库消失。真是愚蠢。

那么如何告诉 Eclipse 使用现有的 .so 库以及必须构建的库呢？库是独立的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T21:24:03.570

NDK 允许使用 PREBUILT_SHARED_LIBRARY 变量与预构建的用户库进行链接。

假设您需要链接的库是 librandom.so，在项目文件夹的子`libs`文件夹中创建一个文件`jni`夹：

```
mkdir -p jni/libs
cp librandom.so jni/libs 
```

然后，只需创建一个`jni/libs/Android.mk`文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := random
LOCAL_SRC_FILES := librandom.so
include $(PREBUILT_SHARED_LIBRARY) 
```

您可以为每个预构建的库创建一个部分，全部放在`jni/libs`.

接下来，您只需将上述文件包含到您的 jni/Android.mk 中就可以正常工作了。在 NDK 文档中，建议在 Android.mk 的末尾而不是中间完成此操作：

```
include $(LOCAL_PATH)/libs/Android.mk 
```

但是，您需要在需要此库的模块之前执行此操作。

对于链接，您需要将以下内容添加到链接到预构建库的模块部分。

```
LOCAL_SHARED_LIBRARIES := random 
```

然后，当您执行 ndk-build 时，它会在构建模块之前将此库复制到`libs/armeabi/`其中，您就可以开始了。

注意：这不能解决所需标题的问题。您仍然需要将库标头的位置添加到`LOCAL_C_INCLUDES`需要它的模块中的变量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T12:37:01.750

这就是我目前所做的。我不会接受（在 stackoverflow 意义上）我自己的（这个）答案，因为它不令人满意。

我创建了一个新项目并在那里复制了所有 java 文件。然后，我将旧项目中的 .so 库和 3rd 方库复制到 libs/armeabi 中。

这太可怕了。但它有效。暂时。最糟糕的是版本控制被鱼雷破坏了。

# java - Wicket 1.5.3 的 Spring 依赖项

> ID：10363023
> 
> 赞同：1
> 
> 时间：2012-04-28T11:22:15.217
> 
> 标签：java, spring, hibernate, dependencies, wicket

我正在使用 Wicket-Hibernate-Spring 开发一个应用程序，我使用的是 Wicket 1.5.5。

```
<repositories>
    <repository>
        <id>googlecode</id>
        <url>http://jqwicket.googlecode.com/svn/m2-repo/releases/</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-core</artifactId>
        <version>1.5.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-spring</artifactId>
        <version>1.5.3</version>            
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-extensions</artifactId>
        <version>1.5.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-datetime</artifactId>
        <version>1.5.3</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.jqwicket</groupId>
        <artifactId>jqwicket</artifactId>
        <version>0.8</version>
    </dependency>
</dependencies> 
```

现在 Spring 和 Hibernate 的依赖关系是什么？我想使用每个组件的最新版本（不是测试版）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T11:59:16.600

使用存储库搜索引擎，例如官方的：[http ://search.maven.org/](http://search.maven.org/)

通过搜索“ [hibernate-core](http://search.maven.org/#artifactdetails%7Corg.hibernate%7Chibernate-core%7C4.1.2%7Cjar) ”，你会找到 4.1.2 版本：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.2</version>
</dependency> 
```

对于 Spring/Hibernate 集成，搜索“ [spring-orm](http://search.maven.org/#artifactdetails%7Corg.springframework%7Cspring-orm%7C3.1.1.RELEASE%7Cjar) ”：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:19:43.693

为了在 wicket 页面中使用 spring bean，您可以添加 wicket-spring 集成依赖项：

```
 <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-spring</artifactId>
        <version>1.5.5</version>
    </dependency> 
```

jar`wicket-spring-annot`已合并到`wicket-spring`1.4，因此没有必要。

更多信息[在这里](https://cwiki.apache.org/WICKET/spring.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:36:55.247

获取 Wicket 和 Spring 依赖项，要集成两者，您需要“wicket-spring.jar”。

```
<project ..>

<dependencies>

    <!-- Wicket framework-->
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket</artifactId>
        <version>1.4.17</version>
    </dependency>

    <!-- Integrate Wicket with Spring -->
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-spring</artifactId>
        <version>1.4.17</version>
    </dependency>

    <!-- Spring framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!-- slf4j-log4j -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.6</version>
    </dependency>

</dependencies>

</project> 
```

# android - 如何使用 AsyncTask 和线程？

> ID：10363025
> 
> 赞同：2
> 
> 时间：2012-04-28T11:22:19.757
> 
> 标签：android

***目标：***
使用 Google App Engine 服务器和 Android 客户端，我试图将 Google 地图放在 Android 客户端用户叠加层上。每 30 秒我轮询一次服务器并获取包含用户的 Vector 并将其添加到地图中。

***当前状态：***
我在一个新线程中使用了所有东西，所以在运行应用程序后我得到：
奇怪的行为（延迟覆盖，多个覆盖），然后用`ConcurrentModificationException`.
在阅读了一下之后，我发现我需要使用**AsyncTask**。

如果我错了，请纠正我，但我知道在 onCreate 的 Activity 中所做的一切都在 UIhread 中“运行”，所以我需要将“逻辑”（所有网络处理）放在 doInBackground 和所有 UI 处理中，比如把在 onPostExecute 中覆盖在地图上。

我的问题是：
1）在我正在做的当前状态下：

```
new Thread()
{
    @Override
    public void run() 
    {           
        super.run();
        while(true)
        {
            SystemClock.sleep(30000);   
            Vector responseFromServer = getUsersVectorFromServer();             
            putNewOnlineUserOnTheMap();
        }           
    }
}.start(); 
```

将其转换为 AsyncTask 的正确方法是什么？
我是否仍在使用 doInBackground 中的新线程来轮询服务器，还是有正确的方法来执行此操作？

2) 是否有具体的 UI 列表可以放入 onPostExecute 或任何概念列表？
在我的情况下，我猜需要将 putNewOnlineUserOnTheMap() 放在 onPostExecute 中。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:51:04.007

类似于以下内容：

```
class UpdateTask extends AsyncTask<Void, Vector, Void>{

    @Override
    protected Void doInBackground(Void... params) {
        // this is running in a background thread.
        while (!isCancelled()) {
            SystemClock.sleep(30000);   
            Vector responseFromServer = getUsersVectorFromServer();
            // send the result back to the UI thread
            // onProgressUpdate will be called then
            publishProgress(responseFromServer);
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Vector... values) {
        // this is executed on the UI thread where we can safely touch UI stuff
        putNewOnlineUserOnTheMap(values[0]);
    }

} 
```

您不能使用任务的结果，因为任务已经完成。但是你可以使用进度发布机制来获得周期性的结果。如果您这样使用它并在 UI 线程上进行修改，您不应该得到`ConcurrentModificationException`，因为您在一个可以安全地修改 UI 的线程上进行修改。

这里要注意的一件事：`Vector`在后台线程中创建你的新实例，然后使用它来更新 UI。但是之后不要在后台线程中触摸同一个对象。这样您就不需要任何同步，因为在后台线程将其发送出去之后，只有 UI 线程会接触它。（你可以使用一个简单`ArrayList`的而不是一个`Vector`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:12:31.410

AsyncTask 使用泛型和可变参数。传递给异步任务的参数是 . TypeOfVariableArgumentsParameters 传入 doInBackground()，ProgressParam 用于进度信息，ResultParam 必须从 doInBackground() 返回并作为参数传递给 onPostExecute()。

示例：--受保护的类 ParsingTask 扩展 AsyncTask> {

```
 private ProgressDialog loadingDialog = new ProgressDialog(JsonParserActivity.this);

     protected void onPreExecute() {
         loadingDialog.setMessage("loading app store..");
         loadingDialog.show();
     }

    @Override
    protected ArrayList<Items> doInBackground( Context... params )  {

        // do ur process here.
        return result;
     }      

        if (!this.isCancelled()) {
        }

        return result;
    }

    @Override
    protected void onProgressUpdate(String... s)   {
        super.onProgressUpdate(s);
        Toast.makeText(getApplicationContext(), s[0], Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onPostExecute( ArrayList<Items> response )  {
    //if u r dealing with list view and adapters set the adapter here at the onPostExecute()
            loadingDialog.dismiss();

    }

    @Override
    protected void onCancelled() {
        super.onCancelled();

        Toast.makeText(getApplicationContext(), "The operation was cancelled", 1).show();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:12:39.213

您可以像下面这样使用 AsyncTask。希望对你有帮助..

```
Class YourClass{
    void YourClass(){
       NetworkTask nT = new NetworkTasK();
       nT.execute();
    }
}
protected class NetworkTask extends AsyncTask<Void, String, Boolean>
{
    @Override
    protected Boolean doInBackground(Void... params) 
    {
        try 
        {
            String response;
            while(keepreceiving)
            {
                response = in.readLine();//Prog Counter stops here until getting i/p.

                if(response != null)
                    yourFunctionForResponse(response);
            }
        }

        catch (Exception ex) 
        {

        }
        return null;        
    }
     private void yourFunctionForResponse(String response){
     //things to do....
     }
} 
```

您也可以尝试[使用 runOnUiThread(Runnable action)](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29/)来实现您的工作。

# objective-c - NSRegularExpression - 除特定字符外的每个字符

> ID：10363030
> 
> 赞同：0
> 
> 时间：2012-04-28T11:22:56.280
> 
> 标签：objective-c, regex, nsregularexpression

我想使用正则表达式，并且我想在其中制定一个规则，允许每个特定字符的期望字符（在我的情况下是 < 和 >）。我知道 (.*) 允许每个字符。那么我该如何限制 . 不列出所有字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:28:40.583

您应该使用否定字符集。例如，在您的情况下，您可以使用[`[^<>]*`](http://regexpal.com/?flags=g&regex=%5B%5E%3C%3E%5D%2a&input=x%5E2%20%2b%20y%5E2%20%3E%20z%5E2).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:29:52.387

您是否尝试过 ^[><] 使用它来跳过方括号中的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:32:30.530

```
 #define VALIDATION @"[<>a-zA-Z\\d]"
    NSPredicate *NameValidation = [ NSPredicate predicateWithFormat:@"SELF MATCHES %@", VALIDATION];
    int retVal  = [NameValidation evaluateWithObject:inPasskey]; 
```

希望，这会让你..

# javascript - 有人可以解释以下一段 Javascript 代码吗？

> ID：10363032
> 
> 赞同：0
> 
> 时间：2012-04-28T11:23:02.423
> 
> 标签：javascript

我正在阅读[另一个问题](https://stackoverflow.com/questions/10362956/encapsulation-in-javascript-module-pattern)，我看到了这个：

```
var basketModule = (function() {
var basket = []; //private

return { //exposed to public
       addItem: function(values) {
            basket.push(values);
        },
        getItemCount: function() {
            return basket.length;
        },
        getTotal: function(){
            var q = this.getItemCount(),p=0;
            while(q--){
                p+= basket[q].price;
            }
        return p;
        }
      }
}()); 
```

你能解释一下他为什么把函数包装在`( and )`'s中吗？另外，这样做的目的是`return`什么？他就不能写字`self.addItem = ...`等等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:25:16.057

当你用括号包装一个函数并添加`()`到它的末尾时，它是一个自执行函数。

```
(function() x() {
 //do something;
})(); 
```

而且，通过返回，他使`basket`变量变得有些私有。尝试`basketModule.basket`从其他任何地方获取，你会得到不确定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:27:05.543

这就是所谓的 javascript[模块模式](http://www.codeproject.com/Articles/247241/Javascript-Module-Pattern)。定义一个函数并立即调用它以**防止变量在全局空间中**或定义一个函数名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:30:11.857

The intention of the code is to create an object with three methods. addItem,getItemCount and getTotal. They all depend on state represented by basket.

if basket was defined globally that state would be exposed (and there could only ever be one variable basket. both of those can lead to issues so by wrapping the entire declaration the state is encapsulated and only accessible from the created object.

There are other ways of achieving the same and the pro's and con's are related to style and how many objects of that particular type you're going to need.

wrapping the `function(){}()` is required since `function(){}()` will not parse

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T11:26:12.220

注意最后一行的括号：`()`. 该函数已定义并立即调用： `(function() { })();`

`return { ... }`返回具有方法的对象`addItem`

# c# - TransactionTimeout 无法正常工作

> ID：10363042
> 
> 赞同：2
> 
> 时间：2012-04-28T11:24:17.357
> 
> 标签：c#, transactions

```
using (TransactionScope transaction = TransactionScopeManager.GetTransactionScope(Settings.Import.TimeOut))
{
    Logger.Trace.DebugFormat("Import Deduction timeout: <{0}>", Settings.Import.TimeOut);
    //Logger shows "Import Deduction timeout: <30>"
    //more code
} 
```

但事务总是只运行 10 分钟。我改变了部分：

> ```
>  <system.transactions>
>      <machineSettings maxTimeout=″01:30:00″/>
>  </system.transactions> 
> ```

但它仍然在 10 分钟后继续失败。为什么？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:48:22.807

根据[http://msdn.microsoft.com/en-us/library/ms149852(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms149852(v=vs.90).aspx)：

> 在机器配置中，有一个限制超时的值。默认为 10 分钟。因此，如果您在 System.Transactions 中设置的超时时间大于 10 分钟，您的值将被忽略，系统将按照超时时间为 10 分钟的方式运行。
> 
> 请参阅 [http://msdn.microsoft.com/en-us/library/system.transactions.configuration.machinesettingssection.maxtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.configuration.machinesettingssection.maxtimeout.aspx) 和
> 
> [http://social.msdn.microsoft.com/Forums/en-US/windowstransactionsprogramming/thread/ba508c2b-af91-490c-a05c-e4bf92f81cc6](http://social.msdn.microsoft.com/Forums/en-US/windowstransactionsprogramming/thread/ba508c2b-af91-490c-a05c-e4bf92f81cc6) 和
> 
> [http://blogs.msdn.com/ajit/archive/2008/06/18/override-the-system-transactions-default-timeout-of-10-minutes-in-the-code.aspx](http://blogs.msdn.com/ajit/archive/2008/06/18/override-the-system-transactions-default-timeout-of-10-minutes-in-the-code.aspx)

# c# - DataColumn 类中如何返回数据库数据类型？

> ID：10363045
> 
> 赞同：0
> 
> 时间：2012-04-28T11:24:46.140
> 
> 标签：c#, sql-server-2008-r2, sqldatatypes, datacolumn

我搜索并发现很少的结果。我发现 DataColums 有一些数据类型属性，但是当从 SQL Server 数据库中检索数据时，检索到的数据类型是什么？我正在使用 a`SqlDataAdapter`来填充 a `DataTable`。为了获得这些值，我的工作如下：

```
DataTable dtt = Database.get(SQLString); //pseudo-code
string value = dtt.Rows[0][0]; //Or is this a string? 
```

那么，`dtt.Rows[0][0]`如果数据库列数据类型是 bigint、int、date 或 bit，那又是什么呢？我是否需要先将它们转换为字符串，然后再将它们转换为我需要的其他数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:39:18.373

> 那么，`dtt.Rows[0][0]`如果数据库列数据类型是`bigint`、或`int`，那又是什么呢？`date``bit`

分别是一个盒装`Int64`、一个盒装`Int32`、一个盒装`DateTime`和一个盒装`Boolean`。这就是为什么这个表达式的返回类型是`Object`- 以便它可以返回一个适当类型的值。您需要做的所有事情（知道应该返回什么类型）就是插入一个强制转换/取消框 - 除非您希望继续将它们全部视为`Object`s.

我同意安东尼奥的评论 - 最好按名称而不是按序号位置访问列 - 您可以使用接受`string`s 而不是`int`s 的重载运算符，或者至少[`IndexOf()`](http://msdn.microsoft.com/en-us/library/9bda1yss.aspx)用于查找列的序号位置在运行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T12:03:19.297

好吧，这取决于数据库中的定义方式，例如，假设您有此表：

```
CREATE TABLE [dbo].[Test](
    [ID] [int] NOT NULL,
    [Name] [nvarchar](128) NOT NULL,
    [Birthday] [datetime]) 
```

然后你可以像这样访问第一行：

```
DataTable dtt = Database.get("Select * from Test"); //pseudo-code
DataRow rw = dtt.Rows[0];
int id = rw.Field<int>("ID");
string name = rw.Field<string>("Name");
DateTime dt = rw.Field<DateTime>("Birthday"); 
```

或者

```
DataTable dtt = Database.get("Select * from Test"); //pseudo-code
int id = (int) dtt[0]["ID"];
string name = (string) dtt[0]["Name"];
DateTime dt = (DateTime) dtt[0]["Birthday")]; 
```

# javascript - Coldfusion中的表单提交会发生什么？

> ID：10363049
> 
> 赞同：2
> 
> 时间：2012-04-28T11:25:22.390
> 
> 标签：javascript, html, forms, coldfusion, process

我正在努力理解使用 Coldfusion8 的服务器端，到目前为止只做客户端的东西。

假设我有一个基本的 Coldfusion 页面布局，如下所示：

```
<script type="text/javascript">
   function foo() {  docoument.myForm.submit(); }
</script>

<cfif isdefined("sendMyForm")>
    ... running coldfusion...
    ... displaying something...
</cfelse>
   <form action="nextPage.html" method="post" name="myForm">
       <input type="text" name="formContains" />
       <input type="hidden" name="sendMyForm" value="yup" />
       <input type="button" name="sender" value="send" OnClick="foo() /> 
   </form>
</cfif> 
```

**问题：**当我提交表单时，*服务器端*
实际发生了什么？页面是否正在“重新加载”并且*cfif*导致 Coldfusion 运行并显示结果？只是在寻找一些基本信息，以便我了解正在发生的事情。

 **感谢提示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T12:41:44.557

1.  将 CF 和大多数 Web 服务器/系统视为接受输入（url/get、form/post、cookie 等）并返回输出（html、json、文本等）。该循环通常会重复。有人在浏览器中输入网址，请求发送到服务器，页面返回表单。用户点击提交，请求进入服务器，页面返回结果。用户单击链接，请求转到服务器……然后不断。

2.  由于 if 语句的组织方式，您需要将表单操作提交回自身。如果在 form.cfm 文件中，则操作应该是 form.cfm。除非您在网络服务器中设置特定映射以让 CF 处理 html 文件，否则该文件将需要是 .cfm

3.  您提到将 action 属性放在一起会将表单提交回同一页面，但我不相信这在每个浏览器中都有效。

4.  使用 form method="post" 也更常见/更安全，然后检查`structkeyexists(form, "fieldname")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:27:45.963

行。不是最新的链接，而是有价值的信息。

[http://www.tek-tips.com/viewthread.cfm?qid=523839l](http://www.tek-tips.com/viewthread.cfm?qid=523839) [http://cookbooks.adobe.com/post_Email_contact_form_in_ColdFusion-16882.html](http://cookbooks.adobe.com/post_Email_contact_form_in_ColdFusion-16882.html)

我试图了解表单提交在 Coldfusion 中的工作方式。如果页面结构是：

```
<cf "inputName" = "someValue">
   ... run the from logic
</cfif>

<cfoutput>
  <form>
    <input name="inputName" />
    ... more form
 </form>
</cfoutput> 
```

因此，当我不采取行动提交表单时，*它会被提交到它所在的页面*，因此第一个 CF 部分可以运行....**

# android - Android滑出动画，剩余空间被其他视图填充

> ID：10363051
> 
> 赞同：2
> 
> 时间：2012-04-28T11:26:10.050
> 
> 标签：android

使用 SDK 2.3

我在屏幕底部有一个要滑出的视图，因此我使用此代码

```
 FrameLayout ll1 = (FrameLayout) findViewById(R.id.bottom_panel);
        Animation anim1 = AnimationUtils.loadAnimation(this, R.anim.slideoutbottom);
        anim1.setInterpolator((new  
                   AccelerateDecelerateInterpolator()));
        anim.setFillAfter(true);
        ll1.setAnimation(anim1);
        ll1.setVisibility(View.GONE); 
```

xml:

```
 <?xml version="1.0" encoding="utf-8"?>
       <set xmlns:android="http://schemas.android.com/apk/res/android">
       <translate android:fromYDelta="0%p" android:toYDelta="45%p"          android:duration="500" android:zAdjustment="bottom"/>
       </set> 
```

我遇到的问题是屏幕中间有一个视图正在扩展以填充视图滑出留下的空间。我不希望这种情况发生，我只需要中间的视图保持原样，然后我会淡出这个视图。

怎么解决 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:30:00.337

不要将可见性设置为`View.GONE`，而是使用`View.INVISIBLE`。

这样，您滑出的视图将继续占据屏幕上的空间。

# java - JSF f:ajax 和 IE 8

> ID：10363053
> 
> 赞同：1
> 
> 时间：2012-04-28T11:26:23.030
> 
> 标签：java, jsf-2

我遇到了一个问题：在 IE8 中，f:ajax 中的事件不起作用，并且在更改值后不要更新其他组件。

```
<h:selectBooleanCheckbox id="someId"
                        value="#{someBean.showEmpty}"
                        title="#{i18n['button.showEmpty']}">
                        <f:ajax event="change"
                            listener="#{someBean.changeShowEmpty}"
                            execute=":someForm @form" render=":messages :someForm @form" />
                    </h:selectBooleanCheckbox> 
```

在 Chrome、Opera、Firefox 中 - 它可以工作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:06:27.930

这确实是 MSIE 的“预期”行为。它只会在第二次更改时起作用，因为 MSIE 认为第一次单击本质上不是更改。您应该`click`改为收听该事件。这也正是`<f:ajax>` **默认情况下**已经为 a 所做的`<h:selectBooleanCheckbox>`。只需`event`完全删除该属性。

```
<f:ajax listener="#{someBean.changeShowEmpty}"
    execute=":someForm @form" render=":messages :someForm @form" /> 
```

`<f:ajax event>`默认为`"valueChange"`in components ，`UIInput`默认为`"action"`in `UICommand`components。在`UIInput`生成单选按钮或复选框的组件中，它将生成`onclick`. 在其他`UIInput`组件（文本字段、文本区域、下拉菜单等）中，它将生成`onchange`.

* * *

**与具体问题**无关**，与您在属性中的想法相反，无法处理`<h:form>`另一个，只是因为它的值**没有**`execute`与当前表单的提交一起提交。但那是另一回事了。**

# javascript - jQuery 地址不会绑定在 ajax 加载的内容上

> ID：10363054
> 
> 赞同：0
> 
> 时间：2012-04-28T11:26:23.297
> 
> 标签：javascript, jquery, jquery-plugins, jquery-address

我使用了这个 jQuery 插件：

> [http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

最终它的文档很差。它不想绑定在 ajax 加载的内容上。例如，链接：指向另一个页面的 ajax 内容的链接不会通过 ajax 加载，而是窗口加载该页面。

如何为 ajax 加载的元素绑定插件？

* * *

[现场演示](http://apathetic.undo.it/welcome/about)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:33:58.707

您可以将插件包装在一个函数中，并在 $.ajaxSuccess 回调中使用它：

```
var bindAddress = function (elem) {
    var $elem = $(elem);
    if ($elem.data('isAddressed')) {
        return;
    }
    $elem.address();
};

$.ajaxSuccess(function () {
    $(yourElementSelector).each(bindAddress);
}); 
```

记住，不要使用`$(yourElementSelector).address()`方法，`$(yourElementSelector).each(bindAddress)`而是使用。

# android - OpenGL 2D 颜色出错

> ID：10363055
> 
> 赞同：0
> 
> 时间：2012-04-28T11:26:42.330
> 
> 标签：android, opengl-es

我的简单 2D OpenGL 游戏出现问题。这真的很奇怪，我得到了正确显示的纹理等。但是当我想用简单的改变颜色来创建粒子效果时，由于某种原因，它会从缓冲区显示错误的颜色。我正在使用 Android 的 OpenGL ES 1.1，但它与使用 VBO 的任何版本的 OpenGL 相同。

我初始化屏幕等并显示红色三角形，但根据我的颜色缓冲区，它应该是白色的，怎么了？

```
 GL11 gl11 = (GL11) gl;
        gl11.glLoadIdentity();
        gl11.glClear(GL_COLOR_BUFFER_BIT);
        GLU.gluLookAt(gl, 0f, 0f, -container.getCamera().getScale(), 0f, 0f, 0f, 0f, -1f, 0f);
        gl11.glEnableClientState(GL10.GL_VERTEX_ARRAY);
gl11.glEnableClientState(GL10.GL_COLOR_ARRAY);

        gl11.glTranslatef(container.getCamera().getX(), container.getCamera().getY(), 0.0f);

        container.addParticle(new ColouredParticle(-container.getCamera().getX(), -container.getCamera().getY(), (float)Math.random(), (float)Math.random(), 0f, 5000));

        particleColorBufferPointer = createFloatBuffer(gl11, GL11.GL_ARRAY_BUFFER, new float[] {
                1f, 1f, 1f, 1f,
                1f, 1f, 1f, 1f,
                1f, 1f, 1f, 1f,

        });

        gl11.glBindBuffer(GL11.GL_ARRAY_BUFFER, particleColorBufferPointer);
        gl11.glColorPointer(4, GL10.GL_FLOAT, 0, 0);

        particleVertexBufferPointer = createFloatBuffer(gl11, GL11.GL_ARRAY_BUFFER, new float[]{
                -0.1f, -0.05f,
                0.1f, -0.05f,
                0.0f, 0.05f
        });
        gl11.glBindBuffer(GL11.GL_ARRAY_BUFFER, particleVertexBufferPointer);
        gl11.glVertexPointer(2, GL10.GL_FLOAT, 0, 0);

        gl11.glDrawArrays(GL11.GL_TRIANGLES, 0, 3);

        gl11.glDeleteBuffers(2, new int[]{particleVertexBufferPointer, particleColorBufferPointer}, 0);

        gl11.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl11.glDisableClientState(GL10.GL_COLOR_ARRAY);

        int error = gl11.glGetError();
        if(error != GL11.GL_NO_ERROR) {
            Log.v(TAG, "error " + Integer.toHexString(error));
        } 
```

它只是简单的硬编码浮点数组，包含三角形顶点和颜色，但由于某种原因颜色是错误的，正如我之前所说，这么少量的代码可能会出错？颜色不会变成黑色，就像它只从缓冲区读取红色值一样。它也完全没有错误！

createFloatBuffer 方法：

```
private int createFloatBuffer(GL11 gl, int type, float[] data) {
    int[] bufferPointerBuffer = new int[1];
    gl.glGenBuffers(1, bufferPointerBuffer, 0);
    int bufferPointer = bufferPointerBuffer[0];
    gl.glBindBuffer(type, bufferPointer);
    FloatBuffer dataBuffer = createFloatBuffer(data);
    gl.glBufferData(type, data.length * FLOAT_SIZE, dataBuffer, GL_STATIC_DRAW);
    gl.glBindBuffer(type, -1);
    return bufferPointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:23:45.967

哇..这一切都是因为我有纹理绑定，即使我禁用了纹理坐标，它也出于某种原因试图绘制它，我希望当我被告知禁用任何不再需要的状态时我能听到..谢谢伙计们！问题解决了！

# cuda - 无法在 GeForce 540M 上运行 CUDA 或 OpenCL

> ID：10363059
> 
> 赞同：3
> 
> 时间：2012-04-28T11:27:33.310
> 
> 标签：cuda, opencl, nvidia, optimus

我在运行 Nvidia 在其 GPU Computing SDK 中提供的示例时遇到问题（有一个已编译示例代码库）。

对于 cuda，我收到消息“未检测到支持 CUDA 的设备”，对于 OpenCL，应该找到支持 OpenCL 的单元的函数出现错误。

我已经安装了来自 Nvidia 的所有三个部分，以使用 OpenCL 进行开发 - win7 64bit v.301.27 的 devdriver、cuda 工具包 4.2.9 和 gpu 计算 sdk 4.2.9。

我认为这可能与将输出从 Nvidia GPU 重新路由到 Intel 以渲染事物的 Optimus 技术有关（此笔记本还具有 Intel 3000HD 加速器），但在 Nvidia 控制面板中，我设置为使用高性能 Nvidia GPU，将电源配置文件设置为首选最高性能，对于 PhysX，我再次从自动选择更改为 Nvidia 处理器。但是什么都没有改变，那些样本不会运行（甚至那些针对 GF8000 卡的样本也不会运行）。

我想稍微玩一下 OpenCL，看看它有什么能力，但没有能力测试它没用的东西。我在论坛上找到了一些关于此的信息，但主要是关于需要 Bumblebee 访问 Nvidia GPU 的 linux 用户。但是在 Windows 上没有这样的问题，驱动程序更好，所以你可以在没有黑魔法的情况下访问它（或者在我发现这个问题之前我是这么认为的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:53:32.467

我的笔记本电脑也有 GeForce 540M，采用 Optimus 配置，因为我的 Sandy Bridge CPU 也有 Intel 的集成显卡。要运行 CUDA 代码，我必须：

1.  安装 NVIDIA 驱动程序
2.  转到 NVIDIA 控制面板
3.  单击 3D 设置 -> 管理 3D 设置 -> 全局设置
4.  在首选图形处理器下拉菜单中，选择“高性能 NVIDIA 处理器”
5.  应用设置

请注意，上述说明适用于所有应用程序的设置，因此您不必再担心 CUDA 错误。但它会消耗更多的电池。

这里还有一个[视频回顾](http://www.youtube.com/watch?v=GRi9U3x1cgE)。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:08:20.933

好的，这已被证明是完全疯狂的解决方案。我在想，如果硬件和应用程序之间没有挂钩，我唯一想到的就是 AV 软件。我正在使用 Comodo 和沙盒和 Defense+，关闭它们后我可以运行所有这些样本。更重要的是，只需要关闭防御+。

现在我只想想想有多少应用程序可能被阻止访问该 GPU..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:35:13.940

这很可能是因为 Optimus 的架构。因此，我建议您阅读 [NVIDIA Optimus 平台的 NVIDIA CUDA 开发人员指南](http://developer.download.nvidia.com/compute/cuda/docs/CUDA_Developer_Guide_for_Optimus_Platforms.pdf)，尤其是解决此问题的“查询 CUDA 设备”部分，我相信。

# jquery-ui - Emberjs and jQuery UI integration questions

> ID：10363063
> 
> 赞同：2
> 
> 时间：2012-04-28T11:27:55.870
> 
> 标签：jquery-ui, ember.js, jquery-ui-draggable

I am trying to understand how the integration between jQueryUI and Emberjs should be done. I am new to both libs and to javascript so this might be a newbie question.
I have this jsfiddle set up: [http://jsfiddle.net/pSKgV/1/](http://jsfiddle.net/pSKgV/1/) and it renders this resulting document:

```
<body class="ember-application">  
    <div id="ember129" class="ember-view">  
        <div id="ember163" class="ember-view ui-draggable"></div>  
    </div>  
</body> 
```

The code is mostly taken from this blog post: [http://www.lukemelia.com/blog/archives/2012/03/10/using-ember-js-with-jquery-ui/](http://www.lukemelia.com/blog/archives/2012/03/10/using-ember-js-with-jquery-ui/)

Questions: How do I put something inside the inner div? I want to put some content that i can bind to something. I have tried the following: `{{view App.Draggable}}Drag Me{{/view}}` but that gives an error. I’ve also tried adding this to the App.Draggable object:

```
didInsertElement: function() {  
     this.$().html(“Drag Me”)  
     } 
```

but that did not give the expected results. How is the best way to use/access the jquery/jqueryui functions such as `.html()` in this situation?
Also, is the outer div necessary or can I make this view only render one div element?

regards Oskar

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T15:33:28.517

[http://jsfiddle.net/ud3323/XMgwV/](http://jsfiddle.net/ud3323/XMgwV/)

您忘记了 # 符号`{{#view App.Draggable}}Drag me{{/view}}`。您还应该在 Ember 中创建命名空间，`Ember.Namespace.create()`而不是只使用一个空的`{}`

# java - How can I retrieve IP address from HTTP header in Java

> ID：10363069
> 
> 赞同：15
> 
> 时间：2012-04-28T11:28:47.837
> 
> 标签：java, http, httpwebrequest, http-headers

I am curious if there is any library that handles already this kind of stuff, or I have to do it by myself once again. So, the thing is I want to get IP address field from the visitors HTTP header request on my server, and do the whole thing in Java? Any help would be nice. Thanks in advance.

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-28T11:33:54.080

Use the [`getHeader(String Name)`](http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getHeader(java.lang.String)) method of the [`javax.servlet.http.HttpServletRequest`](http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html) object to retrieve the value of `Remote_Addr` variable. Here is the sample code:

```
String ipAddress = request.getHeader("Remote_Addr"); 
```

If this code returns empty string, then use this way:

```
String ipAddress = request.getHeader("HTTP_X_FORWARDED_FOR");

if (ipAddress == null) {
    ipAddress = request.getRemoteAddr();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-19T10:17:36.683

即使有一个被高度支持的公认答案，我还是想提出一个替代方案并指出公认答案的缺点。

`request.getHeader("Remote_Addr")`[指定](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getRemoteAddr--)返回与完全相同`request.getRemoteAddr()`。因此，两者都检查是没有意义的。另请注意，这`getRemoteAddr`是一种`javax.servlet.ServletRequest`（即与 HTTP 无关的）while`getHeader`方法`javax.servlet.http.HttpServletRequest`。

此外，一些代理使用`Client-IP`而不是`X-Forwarded-For`. 有关讨论，请参阅[https://stackoverflow.com/a/7446010/131929](https://stackoverflow.com/a/7446010/131929)。

我不知道使用`HTTP_X_FORWARDED_FOR`over`X-Forwarded-For`的可靠性如何。在 Java 中，我宁愿使用直接的简短形式。有关讨论，请参阅[https://stackoverflow.com/a/3834169/131929](https://stackoverflow.com/a/3834169/131929)。大写/小写没有区别，因为`getHeader`被[指定](http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getHeader(java.lang.String))为区分大小写*。*

**Java 替代方案**

```
public final class ClientIpAddress {

  // CHECKSTYLE:OFF
  // https://stackoverflow.com/a/11327345/131929
  private static Pattern PRIVATE_ADDRESS_PATTERN = Pattern.compile(
      "(^127\\.)|(^192\\.168\\.)|(^10\\.)|(^172\\.1[6-9]\\.)|(^172\\.2[0-9]\\.)|(^172\\.3[0-1]\\.)|(^::1$)|(^[fF][cCdD])",
      Pattern.CANON_EQ);
  // CHECKSTYLE:ON

  private ClientIpAddress() {
  }

  /**
   * Extracts the "real" client IP address from the request. It analyzes request headers
   * {@code REMOTE_ADDR}, {@code X-Forwarded-For} as well as {@code Client-IP}. Optionally
   * private/local addresses can be filtered in which case an empty string is returned.
   *
   * @param request HTTP request
   * @param filterPrivateAddresses true if private/local addresses (see
   * https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces and
   * https://en.wikipedia.org/wiki/Unique_local_address) should be filtered i.e. omitted
   * @return IP address or empty string
   */
  public static String getFrom(HttpServletRequest request, boolean filterPrivateAddresses) {
    String ip = request.getRemoteAddr();

    String headerClientIp = request.getHeader("Client-IP");
    String headerXForwardedFor = request.getHeader("X-Forwarded-For");
    if (StringUtils.isEmpty(ip) && StringUtils.isNotEmpty(headerClientIp)) {
      ip = headerClientIp;
    } else if (StringUtils.isNotEmpty(headerXForwardedFor)) {
      ip = headerXForwardedFor;
    }
    if (filterPrivateAddresses && isPrivateOrLocalAddress(ip)) {
      return StringUtils.EMPTY;
    } else {
      return ip;
    }
  }

  private static boolean isPrivateOrLocalAddress(String address) {
    Matcher regexMatcher = PRIVATE_ADDRESS_PATTERN.matcher(address);
    return regexMatcher.matches();
  }
} 
```

**PHP 替代方案**

```
function getIp()
{
    $ip = $_SERVER['REMOTE_ADDR'];

    if (empty($ip) && !empty($_SERVER['HTTP_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        // omit private IP addresses which a proxy forwarded
        $tmpIp = $_SERVER['HTTP_X_FORWARDED_FOR'];
        $tmpIp = filter_var(
            $tmpIp,
            FILTER_VALIDATE_IP,
            FILTER_FLAG_IPV4 | FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE
        );
        if ($tmpIp != false) {
            $ip = $tmpIp;
        }
    }
    return $ip;
} 
```

# directx - IE10 如何在 Windows 8 的 Metro 模式和桌面模式下运行？

> ID：10363079
> 
> 赞同：4
> 
> 时间：2012-04-28T11:30:14.203
> 
> 标签：directx, windows-8, internet-explorer-10

我读到 Metro 应用程序不在桌面模式下运行（在 Intel 上），桌面应用程序不在 Metro 上运行。然而，这两个地方都有 IE10 运行。这是怎么做到的？

任何人都可以使用这些工具来编写在这两种模式下都可以使用的 Windows 原生应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:24:12.037

请参阅[开发支持 Metro 风格的桌面浏览器](http://msdn.microsoft.com/en-us/library/windows/apps/hh465413.aspx)。

# jquery - jquery幻灯片效果

> ID：10363080
> 
> 赞同：0
> 
> 时间：2012-04-28T11:30:14.997
> 
> 标签：jquery, slideshow, effects, jquery-effects

这个效果可以在jquery plugins for slideshow中找到吗？

```
http://www.rotapanel.com/trivision-anime/trivision_anime.swf 
```

例如：Nivo Slider、ColorBox、Slides、Coin Slider、...

如果没有找到，可以模拟吗？

谢谢，月

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:57:03.450

我得到了那个东西

[http://www.littlewebthings.com/projects/blinds/](http://www.littlewebthings.com/projects/blinds/)

上面那个好，一样的

得到这些东西并产生效果

[http://jqueryui.com/docs/Effects/Methods#Basic_Effect_Transition](http://jqueryui.com/docs/Effects/Methods#Basic_Effect_Transition)

以下是其中一些不完全列出但

[http://workshop.rs/projects/jqfancytransitions/](http://workshop.rs/projects/jqfancytransitions/)

[http://www.malsup.com/jquery/cycle/browser.html](http://www.malsup.com/jquery/cycle/browser.html) - 最适合你的选择`Grow X`效果

# python - Iterating an XML file and extracting data from it

> ID：10363083
> 
> 赞同：1
> 
> 时间：2012-04-28T11:30:39.130
> 
> 标签：python

I have this XML file:

```
<movie id = 0> 
  <Movie_name>The Shawshank Redemption   </Movie_name> 
  <Address>http://www.imdb.com/title/tt0111161/
  </Address> 
  <year>1994  </year> 
  <stars>Tim Robbins  Morgan Freeman  Bob Gunton    </stars> 
  <plot> plot...
  </plot> 
  <keywords>Reviews, Showtimes</keywords>
</movie>

<movie id = 1> 
  <Movie_name>Inglourious Basterds   </Movie_name> 
  <Address>http://www.imdb.com/title/tt0361748/
  </Address> 
  <year>2009  </year> 
  <stars>Brad Pitt  M&#xE9;lanie Laurent  Christoph Waltz    </stars> 
  <plot>plot/... 
  </plot> 
  <keywords>Reviews, credits  </keywords>
</movie> 
```

How can iterate the file extracting for each movie its speciffic data? I mean for movie 0: its name, address, year and so on.

The input file structure is mandatory, so data extraction can be done while looping.

Much thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:32:03.743

You will want to check out [`xml.etree.ElementTree`.](http://docs.python.org/library/xml.etree.elementtree.html)

I'd also note that what you have there is not valid XML, so you might run into issues. Valid XML would probably look more like this:

```
<movie id="0"> 
  <name>The Shawshank Redemption</name> 
  <url>http://www.imdb.com/title/tt0111161/</url> 
  <year>1994</year> 
  <stars>
    <star>Tim Robbins</star>
    <star>Morgan Freeman</star>
    <star>Bob Gunton</star>
  </stars> 
  <plot>plot...</plot> 
  <keywords>
    <keyword>Reviews</keyword>
    <keyword>Showtimes</keyword>
  </keywords>
</movie> 
```

Note the lowercase tag names and attributes (`<movieNum = 0>` doesn't make sense). You will also want an XML declaration (like `<?xml version="1.0" encoding="UTF-8" ?>`) at the top. You can validate your XML at [XML Validation](http://www.xmlvalidation.com/), or using [xmllint](http://xmlsoft.org/xmllint.html), for example.

Once you have valid XML, you can parse it and iterate over it using [`iterparse()`](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse), or parse it and then iterate over the constructed element tree.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T11:55:41.350

**编辑——采用改进的 XML 输入**

我强烈建议您尝试在@Lattyware 的评论中验证您的输入。我发现对于无效的 XML 和 HTML，BeautifulSoup 可以很好地恢复可用的东西。这是快速尝试的作用：

```
from BeautifulSoup import BeautifulSoup

# Note: I have added the <movielist> root element
xml = """<movielist>
<movie id = 0> 
  <Movie_name>The Shawshank Redemption   </Movie_name> 
  <Address>http://www.imdb.com/title/tt0111161/
  </Address> 
  <year>1994  </year> 
  <stars>Tim Robbins  Morgan Freeman  Bob Gunton    </stars> 
  <plot> plot...
  </plot> 
  <keywords>Reviews, Showtimes</keywords>
</movieNum>

<movie id = 1> 
  <Movie_name>Inglourious Basterds   </Movie_name> 
  <Address>http://www.imdb.com/title/tt0361748/
  </Address> 
  <year>2009  </year> 
  <stars>Brad Pitt  M&#xE9;lanie Laurent  Christoph Waltz    </stars> 
  <plot>plot/... 
  </plot> 
  <keywords>Reviews, credits  </keywords>
</movieNum>

</movielist>"""

soup = BeautifulSoup(xml)
movies = soup.findAll('movie')

for movie in movies:
    id_tag = movie['id']
    name = movie.find("movie_name").text
    url = movie.find("address").text
    year = movie.find("year").text
    stars = movie.find("stars").text
    plot = movie.find("plot").text
    keywords = movie.find("keywords").text
    for item in (id_tag, name, url, year, stars, plot, keywords):
        print item
    print '=' * 50 
```

这将输出以下内容（现在可以访问 ID 标签）：

```
0
The Shawshank Redemption
http://www.imdb.com/title/tt0111161/
1994
Tim Robbins  Morgan Freeman  Bob Gunton
plot...
Reviews, Showtimes
==================================================
1
Inglourious Basterds
http://www.imdb.com/title/tt0361748/
2009
Brad Pitt  M&#xE9;lanie Laurent  Christoph Waltz
plot/...
Reviews, credits
================================================== 
```

希望它能给你一个开始......它只能从这里变得更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T12:32:58.237

BeutifulSoup 更宽容，它也可以用于 HTML（其中一些封闭标签是可选的）。仅当 XML 有效时才能使用 ElementTree。您可以通过将片段包装到单个元素来使其部分有效。属性值必须用引号引起来。尝试以下方法，其中`Movie`创建了类以从一个*电影*元素中捕获信息。类派生自dict，与dict一样灵活；但是，您可以创建自己的方法来从收集的信息中返回处理后的值：

```
# -*- coding: utf-8 -*-
import xml.etree.ElementTree as ET

class Movie(dict):

    def __init__(self, movie_element):
        assert movie_element.tag == 'movie'  # we are able to process only that
        self['id'] = movie_element.attrib['id']  
        for e in movie_element:
            self[e.tag] = e.text.strip()

    def name(self):
        return self['Movie_name']

    def url(self):
        return self['Address']

    def year(self):
        return self['year']     

    def stars(self):
        return self['stars']

    def plot(self):
        return self['plot']

    def keywords(self):
        return self['keywords']

    def __str__(self):
        lst = []
        lst.append(self.name() + ' (' + self.year() + ')')
        lst.append(self.stars())
        lst.append(self.url())
        return '\n'.join(lst)

fragment = '''\
<movie id = "0"> 
  <Movie_name>The Shawshank Redemption   </Movie_name> 
  <Address>http://www.imdb.com/title/tt0111161/
  </Address> 
  <year>1994  </year> 
  <stars>Tim Robbins  Morgan Freeman  Bob Gunton    </stars> 
  <plot> plot...
  </plot> 
  <keywords>Reviews, Showtimes</keywords>
</movie>

<movie id = "1"> 
  <Movie_name>Inglourious Basterds   </Movie_name> 
  <Address>http://www.imdb.com/title/tt0361748/
  </Address> 
  <year>2009  </year> 
  <stars>Brad Pitt  Melanie Laurent  Christoph Waltz    </stars> 
  <plot>plot/... 
  </plot> 
  <keywords>Reviews, credits  </keywords>
</movie>
'''

fixed_fragment = '<root>\n' + fragment + '</root>'
##print fixed_fragment

tree = ET.fromstring(fixed_fragment)
movies = []
for m in tree:
    movies.append(Movie(m))

for movie in movies:
    print '\n------------------'
    print movie 
```

它打印在我的控制台上：

```
------------------
The Shawshank Redemption (1994)
Tim Robbins  Morgan Freeman  Bob Gunton
http://www.imdb.com/title/tt0111161/

------------------
Inglourious Basterds (2009)
Brad Pitt  Melanie Laurent  Christoph Waltz
http://www.imdb.com/title/tt0361748/ 
```

请注意，我已经替换了非 ASCII 字符——编码问题要单独解决。

# unity3d - OpenNI Zigfu - One or more of the following nodes could not be enumerated:

> ID：10363088
> 
> 赞同：1
> 
> 时间：2012-04-28T11:31:14.747
> 
> 标签：unity3d, kinect, openni

I wanted to try the `Zigfu OpenNI` approach for my projects so I installed the following drivers.

1.  `openni-win32-1.5.2.23-dev`
2.  `SensorKinect091-Bin-Win32-v5.1.0.25`
3.  `nite-win32-1.5.2.21-dev`

The samples `NISimpleViewer` and `NIUserTracker` are working well, but when I tried to test the sample scene `Blockman3rdPerson` from `Zigfu` I get this error.

```
// ERROR
One or more of the following nodes could not be enumerated:

User: PrimeSense/XnVSkeletonGenerator/1.5.2.21: No license to use this module!
User: PrimeSense/XnVSkeletonGenerator/1.4.2.5: No license to use this module!
User: PrimeSense/XnVSkeletonGenerator/1.4.1.2: No license to use this module!
User: PrimeSense/XnVSkeletonGenerator/1.3.1.8: No license to use this module!
User: PrimeSense/XnVSkeletonGenerator/1.3.0.17: No license to use this module!

UnityEngine.Debug:LogError(Object)
ZigInput:Awake()
UnityEngine.GameObject:AddComponent()
ZigInput:get_Instance()
Zig:Awake() (at Assets/ZigFu/Scripts/Zig.cs:25) 
```

I tried to uninstall and install my drivers and still got no luck with running the sample scene. Anyone knows where could I fix this problem?

# c++ - C++ Armadillo:- Equivalent to Matlab's bsxfun

> ID：10363089
> 
> 赞同：3
> 
> 时间：2012-04-28T11:31:29.990
> 
> 标签：c++, matlab, function, armadillo, bsxfun

Does Aramadillo have a general purpose equivalent to matlab's bsxfun, which performs element wise operations e.g bsxfun(@minus,A,B)? I have seen that Armadillo does have element wise multiplication and division, but no indication that a generalized function is available.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:34:24.310

虽然不完全是 bsxfun()，但[Armadillo](http://arma.sourceforge.net) 3.4+ 中添加了两个与您的问题相关的新函数：[.each_col()](http://arma.sourceforge.net/docs.html#each_colrow)和 .each_row()。它们允许在矩阵的每一列/行上重复给定的向量操作。这包括加法、逐元素乘法等。

# scheme - Are Scheme and Racket different? If so, how?

> ID：10363090
> 
> 赞同：10
> 
> 时间：2012-04-28T11:31:39.133
> 
> 标签：scheme, scheme, racket

I have noticed that people often act as though Scheme and Racket are the same thing here on Stack Overflow (and also elsewhere on the web. For example, questions about Scheme often generate solutions in Racket. If you take a look at the questions tagged [scheme](/questions/tagged/scheme "show questions tagged 'scheme'"), you'll see that half of their answers start with `#lang racket`.

Are these two languages really so similar that they can be considered to be equal? Is Racket just an extension of Scheme (i.e. Scheme code will always run on a Racket interpreter)?

I want to underline the fact that this is not a polemic, just a question from someone studying Scheme programming language.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T11:45:40.077

Racket 与 Scheme 非常接近，事实上直到两年前它还被称为 PLT Scheme。

然而，Racket 中使用的默认语言在一些地方与 Scheme 不同（最值得注意的是它具有不可变对）。这并不是什么新鲜事：当它被称为 PLT Scheme 时，它​​也有类似的差异。它也不是 Racket 独有的东西：Scheme 标准非常简约，以至于他们定义的语言是不切实际的，这意味着*所有*的 Scheme 实现都添加了自己的扩展。Racket 案例中的另一个重要点是定义新方言非常容易——并且 Racket 实现了严格的 R5RS 方言（严格意味着它不是很有用），它还实现了 R6RS 方言。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T11:35:02.290

不，他们不相等。但是，Racket 实现可以运行标准的 Scheme 代码。方案由标准定义。球拍不是。如果你想要可移植性，你可以编写 R6RS 代码并使用 Racket 执行它。

Racket 不是 Scheme 的超集或子集。

# version-control - hg export changeset

> ID：10363093
> 
> 赞同：5
> 
> 时间：2012-04-28T11:32:04.110
> 
> 标签：version-control, mercurial

I'd like to export **only** the files that were changed in a hg changeset, to make a patch - but I'm not sure how to do this. I'm using bitbucket as a hosting service - how do I go about this?

Thanks!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T11:43:17.543

该`hg export`命令实际上会生成一个补丁（统一差异格式），但还包括一些额外的信息，如作者和提交消息，以防你想将它与`hg import`.

如果您只想要从变更集生成的没有额外信息的补丁，那么它很简单：

```
hg diff -c REV 
```

## 编辑

由于您只想在修订版中更改文件`hg archive`，我想我想出了以下 bourne shell 脚本：

```
#!/bin/sh

mkdir -p $2

for i in $(hg log -r $1 --template '{files}')
do
    mkdir -p $2/$(dirname $i)
    hg cat -r $1 $i >$2/$i
done 
```

它有两个参数：要导出的版本和要保存文件的目录。您可以在类似的脚本中实现相同的功能，但使用`hg archive`一堆`-I`参数。但是，我认为建议的脚本更直观一点，至少对我来说是这样。

**注意：**从存储库中移动或删除文件时，此脚本将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-24T20:37:13.860

我只是使用这个命令：

```
hg archive -I "set:added() or modified()" -r <rev-number> -t files /path/to/directory/for/export 
```

# jquery - Image loader isn't displayed

> ID：10363096
> 
> 赞同：0
> 
> 时间：2012-04-28T11:32:25.840
> 
> 标签：jquery, image, loader

I want to display a background image (loading.gif) while the image is loading. The image loads thanx to the following code :

```
var item = $('<li><a class="black-links" href="' + data.url + '#comments" title="' + data.title + '"><img class="loading"></a></li>');
var img = item.find('img');
img
    .hide()
    .one('load', function() { $(this).removeClass('loading').attr('alt', data.title).attr('width', data.width).attr('height', data.height).fadeIn(); })
    .attr('src', data.src)
    .each(function() { if (this.complete) $(this).trigger('load'); }); 
```

So there's a "loading" class added to the image at the beginning, and then this class is removed once the image is entirely loaded (and displayed). So the CSS code is :

```
.loading { background: #FFF url(../img/loading.gif) center center no-repeat; } 
```

The trouble is : the image is loaded, and then it's displayed, BUT the loader is never displayed while the image is loading (this can be seen [here](http://www.mediatheque-erre.fr/test/)). I thought I should delete the ".hide()"... but then I think the image will be partly displayed BEFORE it's entirely loaded, won't it ???

Thanx for your help !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:36:24.033

```
window.onload = function()
{ document.getElementById("loading").style.display = "none"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:06:45.803

这是因为你在加载时隐藏它

```
var item = $('<li><a class="black-links" href="' + data.url + '#comments" title="' + data.title + '"><img class="loading"></a></li>');
var img = item.find('img');
$('<img/>').attr('src', data.src).load(function() {
      img.removeClass('loading').attr('src', data.src).hide().fadeIn();
}); 
```

# ruby-on-rails - 向 Rails App 添加“共同作者”功能的最佳方式？

> ID：10363100
> 
> 赞同：1
> 
> 时间：2012-04-28T11:32:41.703
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, attributes

我正在使用 Rails 3，并且我有一个名为 User 的模型，它编写了一个教学大纲。我想添加“共同创作”教学大纲的功能，以便原作者可以邀请不同的用户对内容进行更改。

下面哪些选项更有意义？（如果有更好的，请告诉我）

1.  将作者属性设为数组属性，这样 Syllabus.author 将是一个包含其所有作者的数组

2.  为教学大纲创建附加属性，例如 coauthor1、coauthor2

如果第一个更有意义，您能否具体描述我如何将其设为数组属性，并稍后插入其他作者？

我考虑第二种选择的一个原因是因为这样可以区分原作者和其他合著者，也许只有原作者可以删除教学大纲，而其他合著者的权限有限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:42:03.490

您还可以像这样制作链接表：

```
autorhs_syllabus
----------------------
id
author_id integer
syllabus_id integer
original_author boolean 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:02:39.630

您需要规范化您的数据库。我认为您希望为作者和教学大纲提供单独的模型，并通过 has_many_through 关系将它们链接起来。然后，您的链接表可以包含有关特定关系的附加信息，例如作者是否是原始作者。

# javascript - Mysterious bug in javascript class

> ID：10363103
> 
> 赞同：1
> 
> 时间：2012-04-28T11:32:57.517
> 
> 标签：javascript, jquery, dom

This is the code for one of my javascript classes:

```
function Foo(text)
{
   var container = document.createElement('span');
   container.innerHTML = text;
   $("#fooContainer").append(container);

   this.select = function()
   {
       $(container).addClass('selected');
   }

   this.getContainer = function()
   {
       return container;
   }

   this.getText = function()
   {
      return text;
   }
} 
```

At each page load I do the following:

```
var fooList = {};

fooList['foo1'] = new Foo('Foo 1');
fooList['foo2'] = new Foo('Foo 2');
fooList['foo3'] = new Foo('Foo 3'); 
```

This results in the spans for each `foo` object being created correctly, resulting in this in the dom:

```
<div id="fooContainer">
    <span>Foo 1</span>
    <span>Foo 2</span>
    <span>Foo 3</span>
</div> 
```

However, if I do this:

```
fooList['foo1'].select(); 
```

Then it results in this:

```
<div id="fooContainer">
    <span>Foo 1</span>
    <span>Foo 2</span>
    <span class="selected">Foo 3</span>
</div> 
```

Rather than what's expected, which is this:

```
<div id="fooContainer">
    <span class="selected">Foo 1</span>
    <span>Foo 2</span>
    <span>Foo 3</span>
</div> 
```

It seems like the `container` object of all `foo` objects points to the container of the last foo, which in this case is foo 3\. To test it out further I did this:

```
 for (var key in fooList)
    {
        console.log(key);
        console.log( fooList[key].getText() );
        console.log(fooList[key].getContainer() );
    } 
```

This results in this being logged in firebug console (only showing it for the first foo):

```
foo1
Foo 1
<span> 
```

When I click span, then in firebug, it points to the 3rd of the spans rather than the first or 2nd as expected.

Any ideas what I'm doing wrong? Do I need to set an id to the spans?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:47:56.437

你在你的代码中你`var`在容器之前有吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:45:48.827

您正在混合和匹配直接的 javascript DOM 操作和 jQuery 方法。不要那样做。

如果您想使用 jQuery 将一个元素附加到另一个元素，请使用 jQuery 两者都做，或者都不做。所以而不是

```
var container = document.createElement('span'); 
```

使用 jQuery 的版本：

```
var container = $("<span>"); 
```

当然也可以使用 JQuery 向其中添加 html 的方式：

```
container.html(text); 
```

等等。

如果你真的想使用`document.createElement()`，我认为你可以逃脱：

```
$("#fooContainer").append($(container)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T11:51:08.903

我认为你对你提出的解决方案是正确的。我通常不写 Jquery，但据我了解，$() 方法用于按 id 引用对象，或按类引用对象数组。不知道通过将 DOM 对象引用传递给它会发生什么，但在内部，一些浏览器在将新的 DOM 元素附加到子对象时会重新引用子对象。尝试这个：

```
var foo_count = -1;
function Foo(text)
{
   foo_count++;
   var id = foo_count;

   var container = document.createElement('span');
   container.setAttribute('id', "foo_" + id);
   container.innerHTML = text;
   $("#fooContainer").append(container);

   this.select = function()
   {
       $("#foo_" + id).addClass('selected');
   }

   this.getContainer = function()
   {
       return $('#foo_' + id);
   }

   this.getText = function()
   {
      return text;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T11:47:41.790

尝试：

```
function Foo(text)
{
   var container = document.createElement('span');
   container.innerHTML = text;
   $("#fooContainer").append(container);

   this.container = container
   this.text = text

   this.select = function()
   {
       $(this.container).addClass('selected');
   }

   this.getContainer = function()
   {
       return this.container;
   }

   this.getText = function()
   {
      return this.text;
   }
} 
```

# cocoa-touch - 从应用程序沙箱中提取数据库

> ID：10363113
> 
> 赞同：0
> 
> 时间：2012-04-28T11:34:27.230
> 
> 标签：cocoa-touch, sqlite, sandbox

我正在制作 ios 应用程序，它将与在第一次启动期间复制到沙箱的数据库一起提供。当它被复制时，它会随着预期的进一步更新而更新。问题是我必须为应用程序提供更新的数据库，以便将来它可以进行轻量级更新。所以我需要找到 iPhone 模拟器的应用程序沙箱，然后将这个数据库放入主包中。我该怎么做？我尝试了不同的方式，例如从目标路径移动的 sudo mv 终端命令：/Users/xxxxx/Library/Application Support/iPhone Simulator/5.1/Applications/12EBDE40-0DC4-4A09-A8AF-2CEBCE5818B8/Documents/xxxxxx.sqlite 等。我应该如何正确地做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:20:34.593

这里很热门，它是使用以下程序以编程方式完成的：

```
NSFileManager *fileManager=[NSFileManager defaultManager];
....
 [fileManager copyItemAtPath:targetPath toPath:@"/Users/xxxxx/ThisIsDBFile" error:&error]; 
```

然后你转到目录并将 ThisIsDBFile 的扩展名更改为 .sqlite 或其他

# sencha-touch-2 - Sencha Touch 2 在视图和控制器之间共享事件

> ID：10363114
> 
> 赞同：3
> 
> 时间：2012-04-28T11:34:29.550
> 
> 标签：sencha-touch-2

我要从我的应用程序中共享一些事件，以便在视图和控制器之间共享。例如，事件：“来自服务器的更新可用”。为此，我可以在控制器中触发Event("updatesAvailable")，但这会使其他组件订阅触发该事件的特定控制器。

我想要的是拥有一个可以保留所有应用程序逻辑事件订阅的单例对象。

目前我发现我可以通过拥有一个共享视图实例并全部订阅它来解决问题。但我想知道是否有一个开箱即用的事件调度程序，它知道应用程序内的所有事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:29:34.510

据我了解，您想使用模式“事件总线”吗？您可以使用每个 ST2 应用程序中存在的“全局”和单个对象 - Ext.Viewport。至少我在我的应用程序中创建，直到现在没有什么不好。请注意，创建事件处理程序的最佳位置是控制器的 init() 方法。

```
Ext.define('Myapp.controller.ActivitiesController', {

extend : 'Ext.app.Controller',

requires : [],
    config: {
        refs: {
            myview: 'myview'
        }
...
    init: function () {
    var me = this;

    Ext.Viewport.on({
        scope: this,
        addactivitytype: function (config) {
                    var myview = me.getMyview(),
                        record = config.record
...

          });
     }
}); 
```

在另一个控制器（或曾经查看）中，您可以编写

```
 addActivityTypeTap: function (record) {
      ....
      Ext.Viewport.fireEvent('addactivitytype', {
        record: record
      });
 } 
```

# java - Ant 的代码不在 Maven 中运行

> ID：10363119
> 
> 赞同：3
> 
> 时间：2012-04-28T11:35:27.567
> 
> 标签：java, r, maven, ant

这可能是我在 Java 中见过的最奇怪的事情：以下代码（不使用外部库）使用 Ant 完美运行（在 Netbeans 上，在 Windows-7 机器上）：

```
public static void main( String[] args ) throws IOException, InterruptedException
{
  String prog = "\"C:\\Program Files\\R\\R-2.14.2\\bin\\Rscript.exe\"";
  String[] progParams = new String[]{"C:\\Users\\pantelis\\Desktop\\SB\\MC_Sarfraz_ver5.R"};
  Process p = Runtime.getRuntime().exec(prog+" "+progParams[0]);
  p.waitFor();
  System.out.println(p.exitValue()==0);
  System.out.println("Done!!!"); 
} 
```

它返回输出消息：

```
true
Done!!! 
```

意思是顺利完成。当我尝试使用 Maven 运行相同的代码时，我没有遇到任何异常，但代码以：

```
false
Done! 
```

并且该过程永远不会执行。这是我的 POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.mycompany</groupId>
  <artifactId>MVNTest</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>
  <name>MVNTest</name>
  <url>http://maven.apache.org</url>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

**更新 1：**我使用以下代码打印该过程生成的任何错误消息：

```
String line;
BufferedReader input = new BufferedReader(new InputStreamReader(p.getErrorStream()));
while ((line = input.readLine()) != null) {
  System.out.println(line);
} 
```

这是输出：

```
Error in library(RDCOMClient) : there is no package called 'RDCOMClient'
Execution halted 
```

仅当我使用 Maven 运行时才会出现此错误消息。

**更新 2：**当我使用 Maven 运行时，我使用 JDK7。下面是对应的命令：

```
cd C:\Users\pantelis\Documents\NetBeansProjects\MVNTest; 
"JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_04" 
"\"C:\\Program Files\\NetBeans 7.1.2\\java\\maven\\bin\\mvn.bat\""  
"-Dexec.args=-classpath %classpath com.mycompany.mvntest.App"
"-Dexec.executable=C:\\Program Files\\Java\\jdk1.7.0_04\\bin\\java.exe" 
-Dexec.classpathScope=runtime process-classes 
org.codehaus.mojo:exec-maven-plugin:1.2:exec 
```

**更新 3：**这些是我使用 Ant 运行时得到的环境变量：

```
USERPROFILE -> C:\Users\pantelis
ProgramData -> C:\ProgramData
PATHEXT -> .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
Classpath -> C:\LINGO9\Lingo9_0.jar
ProgramFiles(x86) -> C:\Program Files (x86)
TEMP -> C:\Users\pantelis\AppData\Local\Temp
SystemDrive -> C:
ProgramFiles -> C:\Program Files
Path -> C:\Program Files (x86)\MiKTeX 2.9\miktex\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;\;C:\Program Files (x86)\Sony\VAIO Startup Setting Tool;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\LINGO9\;C:\Program Files (x86)\OpenVPN\bin
HOMEDRIVE -> C:
PROCESSOR_REVISION -> 2505
USERDOMAIN -> pantelis-VAIO
ALLUSERSPROFILE -> C:\ProgramData
ProgramW6432 -> C:\Program Files
PROCESSOR_IDENTIFIER -> Intel64 Family 6 Model 37 Stepping 5, GenuineIntel
SESSIONNAME -> Console
TMP -> C:\Users\pantelis\AppData\Local\Temp
CommonProgramFiles -> C:\Program Files\Common Files
=:: -> ::\
LOGONSERVER -> \\PANTELIS-VAIO
PROCESSOR_ARCHITECTURE -> AMD64
FP_NO_HOST_CHECK -> NO
OS -> Windows_NT
HOMEPATH -> \Users\pantelis
PROCESSOR_LEVEL -> 6
CommonProgramW6432 -> C:\Program Files\Common Files
configsetroot -> C:\Windows\ConfigSetRoot
LOCALAPPDATA -> C:\Users\pantelis\AppData\Local
COMPUTERNAME -> PANTELIS-VAIO
windir -> C:\Windows
SystemRoot -> C:\Windows
NUMBER_OF_PROCESSORS -> 4
USERNAME -> pantelis
PUBLIC -> C:\Users\Public
PSModulePath -> C:\Windows\system32\WindowsPowerShell\v1.0\Modules\
CommonProgramFiles(x86) -> C:\Program Files (x86)\Common Files
ComSpec -> C:\Windows\system32\cmd.exe
APPDATA -> C:\Users\pantelis\AppData\Roaming 
```

以下是我使用 Maven 运行时的环境变量：

```
USERPROFILE -> C:\Users\pantelis
JAVA_HOME -> C:\Program Files\Java\jdk1.7.0_04
PROGRAMDATA -> C:\ProgramData
MAVEN_CMD_LINE_ARGS -> "-Dexec.args=-classpath %classpath com.mycompany.mvntest.App" "-Dexec.executable=C:\Program Files\Java\jdk1.7.0_04\bin\java.exe" -Dexec.classpathScope=runtime process-classes org.codehaus.mojo:exec-maven-plugin:1.2:exec
CONFIGSETROOT -> C:\Windows\ConfigSetRoot
COMMONPROGRAMFILES -> C:\Program Files\Common Files
PROCESSOR_REVISION -> 2505
USERDOMAIN -> pantelis-VAIO
ALLUSERSPROFILE -> C:\ProgramData
PROGRAMW6432 -> C:\Program Files
SESSIONNAME -> Console
TMP -> C:\Users\pantelis\AppData\Local\Temp
PSMODULEPATH -> C:\Windows\system32\WindowsPowerShell\v1.0\Modules\
NB_EXEC_MAVEN_PROCESS_UUID -> b5daa24f-51dc-48ac-ad6d-820dc245b80a
M2_HOME -> C:\Program Files\NetBeans 7.1.2\java\maven\bin\..
LOGONSERVER -> \\PANTELIS-VAIO
=:: -> ::\
PATH -> C:\Program Files (x86)\MiKTeX 2.9\miktex\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;\;C:\Program Files (x86)\Sony\VAIO Startup Setting Tool;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\LINGO9\;C:\Program Files (x86)\OpenVPN\bin
PROMPT -> $P$G
COMMONPROGRAMW6432 -> C:\Program Files\Common Files
PROCESSOR_LEVEL -> 6
LOCALAPPDATA -> C:\Users\pantelis\AppData\Local
COMPUTERNAME -> PANTELIS-VAIO
CLASSWORLDS_LAUNCHER -> org.codehaus.plexus.classworlds.launcher.Launcher
USERNAME -> pantelis
APPDATA -> C:\Users\pantelis\AppData\Roaming
WINDIR -> C:\Windows
PATHEXT -> .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
PROGRAMFILES(X86) -> C:\Program Files (x86)
TEMP -> C:\Users\pantelis\AppData\Local\Temp
HOMEDRIVE -> C:
SYSTEMDRIVE -> C:
=C: -> C:\Users\pantelis\Documents\NetBeansProjects\MVNTest
ERROR_CODE -> 0
COMMONPROGRAMFILES(X86) -> C:\Program Files (x86)\Common Files
CLASSWORLDS_JAR -> "C:\Program Files\NetBeans 7.1.2\java\maven\bin\..\boot\plexus-classworlds-2.4.jar"
PROCESSOR_IDENTIFIER -> Intel64 Family 6 Model 37 Stepping 5, GenuineIntel
MAVEN_JAVA_EXE -> "C:\Program Files\Java\jdk1.7.0_04\bin\java.exe"
CLASSPATH -> C:\LINGO9\Lingo9_0.jar
PROCESSOR_ARCHITECTURE -> AMD64
FP_NO_HOST_CHECK -> NO
OS -> Windows_NT
HOMEPATH -> \Users\pantelis
COMSPEC -> C:\Windows\system32\cmd.exe
PROGRAMFILES -> C:\Program Files
HOME -> C:\Users\pantelis
NUMBER_OF_PROCESSORS -> 4
PUBLIC -> C:\Users\Public
SYSTEMROOT -> C:\Windows 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:25:24.440

所有 R 包都会发生这种情况吗？还是只有 RDCOMClient ？

如果这是 Maven/Ant 问题，我会感到非常惊讶。

读取错误流是不必要的。R 在文件中输出错误，或者您可以使用 sink("filename") 将 R 输出写入文件。

请视作评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:46:12.210

更新后，根据从 maven 运行时遇到的错误，似乎某些（类）路径设置不正确： RDCOMClient 似乎与 R 相关，所以它是用于运行 Rscript.exe 的设置是问题所在。

通过ant和maven运行时打印出环境变量并进行比较以确定缺少库错误的来源

评论更新：

问题可能与如何从 maven 执行项目有关：`exec:exec`启动一个新的 JVM，而`exec:java`在运行 maven 的同一 JVM 中运行项目。

评论更新：

显然，NetBeans 中的“保存时编译”设置将 maven 目标从 更改`exec:exec`为`exec:java`. 或者，您可以手动配置 pom.xml（请参阅[exec maven 插件](http://mojo.codehaus.org/exec-maven-plugin/)页面，其中包含两个目标的示例和描述）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:00:08.393

我认为，您需要在数组中指定您的 prog 和 params，然后将该数组传递给 exec。

```
public static void main( String[] args ) throws IOException, InterruptedException
{
  String prog = "\"C:\\Program Files\\R\\R-2.14.2\\bin\\Rscript.exe\"";
  String[] progParams = new String[] {
     prog,
     "C:\\Users\\pantelis\\Desktop\\SB\\MC_Sarfraz_ver5.R"
  };
  Process p = Runtime.getRuntime().exec(progParams);
  p.waitFor();
  System.out.println(p.exitValue()==0);
  System.out.println("Done!!!"); 
} 
```

# wpf - WPF 中的 MDI 实现

> ID：10363120
> 
> 赞同：0
> 
> 时间：2012-04-28T11:35:32.467
> 
> 标签：wpf, mdi, mdichild, mdiparent

如何在 WPF 中实现 MDI 应用程序？在 windows 窗体中，我习惯于编写如下代码：

```
Form2 oForm2 = new Form2();
            oForm2.MdiParent = this;
            oForm2.Show(); 
```

如何在 WPF 中完成同样的事情？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-28T12:24:55.730

WPF 中没有现成的内置实现，但是已经有人从头开始这样做了，检查这个 codeplex 项目：

[WPF 多文档界面 (MDI)](http://wpfmdi.codeplex.com/)

# javascript - 这在javascript中是什么意思？var leave =<%=秒 %>;

> ID：10363126
> 
> 赞同：0
> 
> 时间：2012-04-28T11:36:52.250
> 
> 标签：javascript

我从网上得到了这段代码，但我无法解释它的含义..

```
var leave =<%=seconds %>; 
```

请帮助我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:38:59.743

那不是 JavaScript。那是由服务器端模板/脚本语言（如 JSP 或 ASP.NET）生成的 Java 脚本。

因此，当您的服务器处理将发送到浏览器的输出时，您的 JavaScript 实际上将如下所示：

```
var leave = 40; 
```

您正在使用的服务器端脚本语言中`40`的变量值在哪里。`seconds`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:39:40.617

它看起来像是 JS 和（例如）ASP 的混合体：

*   `var leave`创建一个名为 leave 的新变量
*   `<%=...%>`是在 ASP 中输出值的简写
*   `seconds`是一个 ASP 变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:53:10.433

[它是带有JSP](http://en.wikipedia.org/wiki/JavaServer_Pages) / [ASP](http://en.wikipedia.org/wiki/Active_Server_Page) / [ERB](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)代码片段的 javascript 。

之间的部分`<%=`和`%>`在发出请求时在服务器上进行评估，并将结果插入到 HTML 中。

因此，如果`seconds`服务器上的值是 42，那么

```
var leave =<%=seconds %>; 
```

变成

```
var leave =42; 
```

这就是浏览器得到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T11:39:53.340

它是在客户端引用或访问服务器端控件。

```
<asp:Textbox id="myTextbox"  runat="server"/>
var val=<%=myTextbox.ClientID%> 
```

# ios - IOS：在 UITableView 上的 ActivityIndi cator ......如何？

> ID：10363128
> 
> 赞同：18
> 
> 时间：2012-04-28T11:37:31.640
> 
> 标签：ios, uitableview, uiactivityindicatorview

我想在加载数据时（在另一个线程中）在 uitableview 上显示一个活动指示器。所以在 UITableViewController 的 ViewDidLoad 方法中：

```
-(void)viewDidLoad
 {
    [super viewDidLoad];

    //I create the activity indicator
    UIActivityIndicatorView *ac = [[UIActivityIndicatorView alloc]  
                      initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [ac startAnimating];

    //Create the queue to download data from internet
    dispatch_queue_t downloadQueue = dispatch_queue_create("PhotoDownload",NULL); 
    dispatch_async(downloadQueue, ^{
      //Download photo
      .......
      .......
      dispatch_async(dispatch_get_main_queue(), ^{
         ......
         ......
         [ac stopAnimating];
      });
    });
   ....... 
```

为什么活动指示器不显示在表格视图上？我怎样才能实现它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-28T11:45:24.523

您需要将 UIActivityIndi​​catorView 添加到某些东西。您可以将其添加到 UITableView 标题视图。为此，您需要提供自己的自定义视图。

```
...
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];
[view addSubview:ac]; // <-- Your UIActivityIndicatorView
self.tableView.tableHeaderView = view;
... 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-23T07:24:37.687

我一直在努力寻找解决方案并阅读了很多论坛，但我没有得到我想要的。在了解了活动指示器和表格视图控制器的工作原理后，我想出了以下解决方案。

出于某种原因，如果您尝试使用 tableReload 或任何其他昂贵的进程在同一线程上启动活动指示器，则活动指示器永远不会运行。如果您尝试在另一个线程中运行 table reload 或其他一些操作，那么它可能不安全并且可能会产生错误或不需要的结果。所以我们可以在另一个线程上运行显示活动指示器的方法。

我还将此解决方案与 MBProgressHUD 相结合，以呈现比带有活动指示器的视图更好看的东西。在任何情况下，activityView 的外观都可以自定义。

```
-(void)showActivityViewer
{
    AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
    UIWindow *window = delegate.window;
    activityView = [[UIView alloc] initWithFrame: CGRectMake(0, 0, window.bounds.size.width, window.bounds.size.height)];
    activityView.backgroundColor = [UIColor blackColor];
    activityView.alpha = 0.5;

    UIActivityIndicatorView *activityWheel = [[UIActivityIndicatorView alloc] initWithFrame: CGRectMake(window.bounds.size.width / 2 - 12, window.bounds.size.height / 2 - 12, 24, 24)];
    activityWheel.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
    activityWheel.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                                      UIViewAutoresizingFlexibleRightMargin |
                                      UIViewAutoresizingFlexibleTopMargin |
                                      UIViewAutoresizingFlexibleBottomMargin);
    [activityView addSubview:activityWheel];
    [window addSubview: activityView];

    [[[activityView subviews] objectAtIndex:0] startAnimating];
}

-(void)hideActivityViewer
{
    [[[activityView subviews] objectAtIndex:0] stopAnimating];
    [activityView removeFromSuperview];
    activityView = nil;
}

- (IBAction)reloadDataAction:(id)sender {
    [NSThread detachNewThreadSelector:@selector(showActivityViewer) toTarget:self withObject:nil];  
    //... do your reload or expensive operations
    [self hideActivityViewer];
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-22T14:49:36.320

[iOS 5 +]
如果你只想显示activityWheel而不需要额外的父视图，你也可以直接将activityWheel添加到tableView中，并使用tableViews contentOffset计算框架的y值：

```
@interface MyTableViewController ()
@property (nonatomic, strong) UIActivityIndicatorView *activityView;
@end

// ....

- (void) showActivityView {
    if (self.activityView==nil) {
        self.activityView = [[UIActivityIndicatorView alloc] initWithFrame:CGRectZero];
        [self.tableView addSubview:self.activityView];
        self.activityView.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
        self.activityView.hidesWhenStopped = YES;
        // additional setup...
        // self.activityView.color = [UIColor redColor]; 
    }
    // Center 
    CGFloat x = UIScreen.mainScreen.applicationFrame.size.width/2;
    CGFloat y = UIScreen.mainScreen.applicationFrame.size.height/2;
    // Offset. If tableView has been scrolled
    CGFloat yOffset = self.tableView.contentOffset.y;
    self.activityView.frame = CGRectMake(x, y + yOffset, 0, 0);

    self.activityView.hidden = NO;
    [self.activityView startAnimating];
}

- (void) hideActivityView {
    [self.activityView stopAnimating];
} 
```

如果 activityView 没有立即显示（或从不显示），请参考 zirinisp 的回答或在后台执行繁重的工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-27T15:04:21.317

UIViewController 有解决方法。（您可以使用带有表格视图的 UIViewController 来实现 UITableViewController。）在 storyboard 中，在 UIViewController 的视图中添加一个 activityIndi​​cator。然后在 viewDidLoad 中添加以下内容：

```
[self.activityIndicator layer].zPosition = 1; 
```

activityIndi​​cator 将显示在表格视图上。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-05T12:49:28.543

[IOS 8+] 以上不适用于我。相反，我将指标视图 (ac) 存储在类中。然后我做：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if (ac.isAnimating)
        return 50.0f;
    return 0.0f;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    if (ac.isAnimating)
        return ac;
    return nil;
} 
```

为了显示指标视图我做

```
[ac startAnimating] 
```

为了隐藏它，我愿意

```
[ac stopAnimating] 
```

# jquery - 使用切换事件仅加载一次 iframe

> ID：10363130
> 
> 赞同：0
> 
> 时间：2012-04-28T11:38:42.003
> 
> 标签：jquery, events, load, toggle

我有这段代码可以加载并显示默认为 display:hidden 的 iframe：

```
 $("div").on('click', '.blok', function () { 

  $(this).siblings("iframe").toggle().show().attr("src", $(this).siblings('span').find('a').attr('href') );

    }); 
```

如您所见，我已将 .toggle 放入，以便第二次单击将恢复为默认值。问题是第二次点击也再次加载 iframe（当它被隐藏时）。我该怎么做才能在切换事件中只加载一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:52:22.737

仅当链接中的 href 与 iframe src 相同时才加载 iframe，否则只需切换

[演示](http://jsfiddle.net/dhirajbodicherla/r2h4q/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:42:22.443

attr('src'..) 应该只被调用一次（或者每次你想加载页面时）

我将切换开关留在那里，但将 attr 放在函数之外

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T11:42:43.113

为什么不将 iframe 放入其他组件并切换它的可见性而不是 iframe 本身？这样您就不会接触 iframe，也不会导致任何重新加载。

# ember.js - 嵌入式关系命中服务器未加载表单父 JSON

> ID：10363133
> 
> 赞同：0
> 
> 时间：2012-04-28T11:39:02.817
> 
> 标签：ember.js, ember-data

9.7.1）带有余烬数据（最新的主人），我遇到了一个奇怪的问题。我有一个嵌入的关系：

```
App.Person = DS.Model.extend({
  ...
  portions: DS.hasMany("App.PersonPortion", { embedded: true}),
  ...
  portionCount: function() {
    return this.get('person_portions').get('length')
  }.property("person_portions.@each")  //This line is the problem.  If I remove "person_portions.@each" it will load correctly
}) 
```

person 的 JSON 如下所示：

```
{"age":null,
 "created_at":"2012-03-24T09:15:31Z",
 "diet_id":5,
 "id":1,
 "lactating":false,
 "name":"cool Name new",
 "pregnant":false,
 "sex":"F","updated_at":"2012-03-27T15:44:03Z",
 "portions":[{"created_at":"2012-04-12T14:54:49Z","crop_id":1,"id":13,"person_id":1,"portion":50,"unit":"grams","updated_at":"2012-04-25T00:41:36Z"},{"created_at":"2012-04-25T00:57:43Z","crop_id":16,"id":20,"person_id":1,"portion":null,"unit":null,"updated_at":"2012-04-26T12:13:48Z"},{"created_at":"2012-04-26T12:13:27Z","crop_id":6,"id":62,"person_id":1,"portion":null,"unit":null,"updated_at":"2012-04-26T12:16:38Z"}]} 
```

但是，当我加载人员时，`App.store.find(App.Person, 1)`Ember 仍然尝试从服务器加载“部分”关系。这是来自 Chrome 控制台：

```
GET http://localhost:3000/person_portions?ids%5B0%5D%5Bcreated_at%5D=2012-04-12T14%3A54%3A49Z&ids%5B0%5D%5Bcrop_id%5D=1&ids%5B0%5D%5Bid%5D=13&ids%5B0%5D%5Bperson_id%5D=1&ids%5B0%5D%5Bportion%5D=50&ids%5B0%5D%5Bunit%5D=grams&ids%5B0%5D%5Bupdated_at%5D=2012-04-25T00%3A41%3A36Z 
```

关于我可能做错了什么或者这是一个错误的任何想法？

# php - 如何减少文件上传时间？

> ID：10363142
> 
> 赞同：-3
> 
> 时间：2012-04-28T11:39:56.857
> 
> 标签：php, file-upload, bandwidth, php-ini

我需要上传大尺寸的视频文件。我已经设置了最大文件上传首选项。我设置了以下首选项：

```
memory_limit        :150M
upload_max_filesize :120M
post_max_size       :120M  
max_execution_time  :300s 
max_input_time      :300s 
```

> 它可以工作，但对于较大的视频文件需要太长时间。对于 12M 需要 5 毫秒，对于 50M 可能需要近 30 毫秒。有什么办法可以减少文件上传时间。
> 
> 执行后，我收到此警告消息：“PHP 警告：12959997 字节的 POST 内容长度超过第 0 行未知中 8388608 字节的限制”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:43:14.803

文件上传时间取决于许多因素，包括您的上传速度、服务器下载速度。我怀疑这里的限制因素是您的上传速度。尝试上传到其他地方，看看上传是否更快。请记住选择与当前位置相同或附近的服务器，以便进行更平等的比较。

如果下载速度非常相似，则“问题”在于您的 Internet 连接。如果没有，那是服务器端的东西。

# ios - iPhone：如何实现类似 android AlertDialog 的功能？

> ID：10363146
> 
> 赞同：0
> 
> 时间：2012-04-28T11:40:46.757
> 
> 标签：ios, objective-c, android-alertdialog

我正在尝试在 iphone 中实现功能以在 AlertView 中显示表格，并在单击表格时填充父视图的一些控件。

在 Android 中，我们可以通过 AlertDialog 做到这一点，但在 Iphone 中，我用谷歌搜索但没有找到一些建议来实现这个东西。

下面是Android代码，但是如何通过IOS做到这一点

```
 new AlertDialog.Builder(MakeReservation.this).setTitle("Previous Locations").setItems(locArray, new DialogInterface.OnClickListener() {

     @Override
     public void onClick(DialogInterface dialog, int which) {
      String str = locArray[which];
      if (str.contains(",")) {
       String[] Address = str.split(",");
       // String[] PickAddress = "Snoufer School, Gaithersburg, MD 45123".split(",");
       if (Address.length > 0)
        pickUpStreet.setText(Address[0]);

         for (int i = 0; i < getResources().getStringArray(R.array.state_symbols).length; i++)
          if (getResources().getStringArray(R.array.state_symbols)[i].equals(getStateCity[0])) {
           pos = i;
           break;
          }

         pickUpState.setSelection(pos);
        }
        if (getStateCity.length > 1)
         pickUpZip.setText(getStateCity[1]);
       }

      }
     }
    }).create().show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:08:43.647

我不知道它如何在 android 中显示你寻求的警报对话框。但我猜你正在寻找类似[Image1](http://iphonedevelopertips.com/open-source/ios-open-source-tableview-in-a.html) [Image2](http://starterstep.wordpress.com/2009/03/24/custom-uialertview-with-uitableview/)的东西。

![在 UIAlertView 中带有 Section-Header 的 UITableView](../Images/a638a1e3bffbba287cd4e4e068191195.png) ![在此处输入图像描述](../Images/ed0475331d9d7db85da53bd6846e60e2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T08:23:45.253

**斯威夫特：**看看我的代码：

你需要一个uipickerview。

```
class ViewController: UIViewController, UIPickerViewDelegate, UIPickerViewDataSource {
    @IBOutlet weak var gradeTextField: UITextField!

    var gradePicker: UIPickerView!
    let gradePickerValues = ["5\. Klasse", "6\. Klasse", "7\. Klasse"]

    func numberOfComponentsInPickerView(pickerView: UIPickerView) -> Int{
        return 1
    }
    func pickerView(pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int{
        return gradePickerValues.count
    }
    func pickerView(pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String! {
        return gradePickerValues[row]
    }
    func pickerView(pickerView: UIPickerView!, didSelectRow row: Int, inComponent component: Int){
        gradeTextField.text = gradePickerValues[row]
        self.view.endEditing(true)
    }
    override func viewDidLoad() {
        super.viewDidLoad()

        gradePicker = UIPickerView()
        gradePicker.dataSource = self
        gradePicker.delegate = self
        gradeTextField.inputView = gradePicker
        gradeTextField.text = gradePickerValues[0]
    }
} 
```

# package - Pythonic 编写包的方式以便于导入

> ID：10363149
> 
> 赞同：5
> 
> 时间：2012-04-28T11:42:17.220
> 
> 标签：package, python, python-module

我有一个非常简单的包，我最终想通过 PyPI 发布它，它的目录树如下：

```
daterangeparser/
   __init__.py
   parse_date_range.py
   test.py 
```

`parse_date_range.py`定义了一个名为`parse`.

对我来说，设置包以轻松导入`parse`函数的最简单和最 Pythonic 的方法是什么，我该怎么做？

目前我必须做`from daterangeparser.parse_date_range import parse`这似乎相当笨重。我宁愿这样做`from daterangeparser import parse`，这似乎更简单，更pythonic，但我似乎无法弄清楚如何让它工作（我需要在其中放入其他东西`__init__.py`吗？或者，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T11:46:01.087

您可以简单地添加：

```
from .parse_date_range import parse 
```

进入`__init__.py`允许这种用法。这是最好的方法。

如果您愿意，也可以使用绝对导入：

```
from daterangeparser.parse_date_range import parse 
```

这些选项中的任何一个都将`parse()`函数放入`daterangeparser`命名空间中，这正是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:48:45.470

将以下内容放入`__init__.py`：

```
from daterangeparser.parse_date_range import parse 
```

然后你可以按照你想要的方式导入它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T12:03:32.120

你真的需要`parse_date_range`模块吗？包名`daterangeparser`已经表达了意图，`daterangeparser.parse_date_range`没有任何意义。

您可以将所有代码从`parse_date_range`模块移动到`__init__`，然后您可以`parse`像`from daterangeparser import parse`.

# html - 网站加载速度 - 缓慢的 html 加载

> ID：10363158
> 
> 赞同：3
> 
> 时间：2012-04-28T11:43:39.997
> 
> 标签：html, performance, apache, magento, apc

谁能帮我。

我有一个在 magento 1.6.2.0 上运行的网上商店。一个带有 apache 2 的 VPS 服务器。我正在运行 APC 和 memcache、varnish cache 和 fooman speedster。

主页有可接受的加载时间......但是当我进入类别页面时，它需要更长的时间......

但是必须等待的时间是等待html页面加载消耗的......看截图： ![在此处输入图像描述](../Images/9bea2cae1c0a1442f256e74e1d11ae40.png)

加载时间现在大约是 2-5 秒，但是当它在网站上忙碌时，它可以运行长达 10-15 秒……慢得多……

当我看萤火虫时，我看到加载时间的大部分时间都在等待......

所以我的问题是，我怎样才能减少这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:19:37.807

benmarks 和 josh pennington 是正确的，忽略其他告诉你现在减少请求数量的人，因为额外的请求现在会分散注意力。

问题是生成 HTML 页面需要很长时间，并且在负载下会变得更糟。

这通常是由于数据库负载过大，要么是优化不佳的查询，要么是没有足够的内存。

您需要确定在该页面上执行了哪些查询，以及它们的性能配置文件是什么，例如内存、IO、CPU 使用率。

你有多大的 VPS？您还必须考虑它是否有足够的内存。

你也在运行Apache吗？如果是这样，它有多少工人。可能发生的情况是，在繁忙时间没有足够的工作人员，他们可能无法足够快地处理，因此在繁忙时间，一些请求在等待工作人员可用时排队。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:47:13.020

问题可能与数据有关。创建并浏览到没有产品的类别并记录响应时间；这将表明它是否是类别数据问题。您可以使用分析器来缩小罪魁祸首。在 Admin > System > Configuration > Advanced: Developer 中，*将 Developer Restriction IP 设置为您的 IP*并启用探查器。然后在 index.php 中取消注释 Varien_Profiler::enable();

然后，您应该在正常响应正文之后看到输出。您可以跟踪该输出并在中间某处找到性能不佳的区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:30:47.307

我要做的第一件事是查看 Magento 白皮书。它有很多关于如何微调 PHP、Apache 和 MySQL 以获得最佳性能的好技巧。

[http://www.magentocommerce.com/whitepaper](http://www.magentocommerce.com/whitepaper)

我会说，将 MySQL 服务器与 Apache 分开可以带来不同的世界。Magento 大量使用 Innodb，如果 DB 服务器未优化以使用允许的尽可能多的内存，这可能会被视为非常慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T06:09:22.113

您可以做出的一项非常好的改进是用 Nginx 替换 Apache。我已经看到使用 Nginx 极大地提高了速度和稳定性。MYSQL Tuner 会告诉你的一些事情是优化你的表，增加你的 innodb_memory_pool_size，并增加 max_heap_table_size 和 tmp_table_size。如果您负担得起，请将您的服务器增加到 4GB，并为 MySQL 和 PHP 提供更多内存。Gzip 也会影响到第一个字节的时间，并且可能会在仅使用一个处理器的情况下减慢您的速度。您可以调查 Cloudflare 作为缓存的替代/添加。最后一件事是目录页面往往有很多图像。确保这些都经过优化（我使用 ImageOptim）并尽可能将 gif 更改为 png。还有很多事情要做，但从这个开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T11:58:25.730

只需尝试在页面加载后实现一个 javascript 代码来加载所有图像（高分辨率）。在页面加载引发 ajax 调用后尝试获取图像

```
function init() {
...function to call all the images threw ajax
}
window.onload = init; 
```

好吧，我尝试了下面给出的代码，以找出加载图像的最少时间。我把所有图像都用一个共同的 div 名称并将它们的可见性设置为隐藏......

```
$(document).ready(function() {
    $("#img").css('visibility','visible') //img is div for all the images on the webpage 
}); 
```

但是 ajax 调用给了我一个获取图像的外观和感觉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T08:56:14.593

你有相当复杂的分层导航设置，这将在服务器上很重。

从移动到专业 Magento 网络主机的经验可以让世界变得不同......它对我来说确实如此。我不确定我们是否应该提及公司，所以除非有人说可以这样做，否则我不会提及我的公司，但谷歌搜索 Magento 基准测试应该可以帮助您入门。

拥有三服务器方法会产生巨大的影响。

# php - 缓慢的 MySQL 性能和睡眠查询

> ID：10363160
> 
> 赞同：2
> 
> 时间：2012-04-28T11:44:27.620
> 
> 标签：php, mysql, sql, database, codeigniter

最近，我注意到在一天的凌晨，我的网站上的 AJAX 数据加载非常缓慢。使用 Chrome 浏览器中的 Web Developer 功能，通常的 300-500ms Wait 和 100-300ms Receive 的速度最多可以增加 5 秒！该站点使用 jQuery、Codeigniter/PHP 和 MySQL。

我咨询了我的 VPS 的支持台，他们提到有太多的睡眠查询。

```
There are many sleep queries for the database 'databasename'.

| 4341 | mysqluser | 204.197.252.106:48669 | databasename | Sleep | 19 | | |
| 4373 | mysqluser | 204.197.252.106:59966 | databasename | Sleep | 78 | | |
| 4387 | mysqluser | 204.197.252.106:34807 | databasename | Sleep | 46 | | |
| 4388 | mysqluser | 204.197.252.106:35099 | databasename | Sleep | 6 | | |
| 4390 | mysqluser | 204.197.252.106:35452 | databasename | Sleep | 26 | | |
| 4391 | mysqluser | 204.197.252.106:35589 | databasename | Sleep | 7 | | |
| 4392 | mysqluser | 204.197.252.106:35680 | databasename | Sleep | 19 | | |
| 4393 | mysqluser | 204.197.252.106:36264 | databasename | Sleep | 12 | | |
| 4394 | mysqluser | 204.197.252.106:36327 | databasename | Sleep | 11 | | | 
```

这是早上减速的原因吗？如何找出导致减速的原因并摆脱它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T11:56:49.680

1.  这些*睡眠*查询只是打开的连接。除非他们有数百个，否则我不会被他们打扰。他们很可能正在形成您的框架/ORM 正在使用的连接池。

2.  要诊断慢查询问题，您需要获取[慢查询日志](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)。如果慢查询日志被关闭，请立即将其打开。

3.  一旦你有了一个合适的日志文件，你就会想用[explain](http://dev.mysql.com/doc/refman/5.1/en/explain.html)分析运行缓慢的查询。解释将允许查看 Mysql 的查询计划器和分析器如何执行您的查询。

4.  还要在此处将运行速度最慢的查询的解释输出与表模式一起粘贴，以便我们更好地诊断您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T07:43:17.613

如果你想终止睡眠连接，你可以这样做： 以管理员身份登录 Mysql：

```
 mysql -uroot -ppassword; 
```

而不是运行命令：

```
mysql> show processlist; 
```

你会得到类似下面的东西：

```
+----+-------------+--------------------+----------+---------+------+-------+------------------+
| Id | User        | Host               | db       | Command | Time | State | Info             |
+----+-------------+--------------------+----------+---------+------+-------+------------------+
| 49 | application | 192.168.44.1:51718 | XXXXXXXX | Sleep   |  183 |       | NULL             ||
| 55 | application | 192.168.44.1:51769 | XXXXXXXX | Sleep   |  148 |       | NULL             |
| 56 | application | 192.168.44.1:51770 | XXXXXXXX | Sleep   |  148 |       | NULL             |
| 57 | application | 192.168.44.1:51771 | XXXXXXXX | Sleep   |  148 |       | NULL             |
| 58 | application | 192.168.44.1:51968 | XXXXXXXX | Sleep   |   11 |       | NULL             |
| 59 | root        | localhost          | NULL     | Query   |    0 | NULL  | show processlist |
+----+-------------+--------------------+----------+---------+------+-------+------------------+ 
```

您将看到不同连接的完整详细信息。现在您可以终止休眠连接，如下所示：

```
mysql> kill 52;
Query OK, 0 rows affected (0.00 sec) 
```

# jquery - Bootstrap 2 的 Modal 插件中心不显示

> ID：10363161
> 
> 赞同：11
> 
> 时间：2012-04-28T11:44:39.917
> 
> 标签：jquery, twitter-bootstrap

我使用引导模式插件。但模态对话框未显示在中心。为什么？我的错？

[http://dl.dropbox.com/u/573972/stackoverflow/bootstrap/modal.html](http://dl.dropbox.com/u/573972/stackoverflow/bootstrap/modal.html)

```
<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>test</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- Mobile Specific-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- CSS-->
  <link rel="stylesheet" href="bootstrap.min.css">
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7/jquery.min.js'></script>
</head>
<body>
  <div id="login" class="modal">
    <div class="modal-header">
      <h3>Login to Room fuga</h3>
    </div>
    <div class="modal-body">
      hogehoge
    </div>
  </div>
  <script src="bootstrap.min.js">
  </script>
  <script>
$('#login').modal();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-20T14:05:40.393

我找到了这个解决方法来解决这个问题：

```
$('#YourModal').modal().css(
            {
                'margin-top': function () {
                    return -($(this).height() / 2);
                }
            }) 
```

来源：[https ://github.com/twitter/bootstrap/issues/374](https://github.com/twitter/bootstrap/issues/374)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-12T08:02:57.203

如果您的 twitter 引导模式对话框未水平居中，您可以通过 css 修复此问题。

只需给模态对话框一个负的左边距，它是宽度的一半，例如：

```
 .modalDialogBlabla {
     margin: 0 0 0 -250px;
     width: 500px;
  } 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-30T17:51:03.077

捕获`show`事件`.modal`然后计算新位置：

```
$('body').on('show', '.modal', function(){
  $(this).css({'margin-top':($(window).height()-$(this).height())/2,'top':'0'});
});​ 
```

**演示：http: [//jsfiddle.net/sonic1980/b2EHU/](http://jsfiddle.net/sonic1980/b2EHU/)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T22:21:04.530

根据上面 p4810 的回答，但也要处理用户在屏幕上的位置。适用于绝对定位。

```
$('#YourModal').modal().css(
            {
                'margin-top': function () {
                    return window.pageYOffset-($(this).height() / 2 );
                }
            }); 
```

* * *

## 回答 #5

> 赞同：-15
> 
> 时间：2012-04-28T12:42:32.560

你试过了吗：

```
$( "#login" ).dialog({
    modal: true
}); 
```

参考：http: [//jqueryui.com//demos/dialog/modal.html](http://jqueryui.com//demos/dialog/modal.html)

# php - 如何循环和关联从数据库中获取数据的数组

> ID：10363163
> 
> 赞同：-2
> 
> 时间：2012-04-28T11:45:06.467
> 
> 标签：php, mysql, database, forms

```
while($report = mysql_fetch_assoc($result2))
            {
                $counter = count($report['Date']);
                for($i = 0; $i < $counter; $i++)
                {

                    $searchOutput .= "<tr><td name='uname".$i."'>".$report['Username']."</td><td name='utitle".$i."'>".$report['Title']."</td><td name='udesc".$i."'>".$report['Description']."</td><td name='udate".$i."'>".$report['Date']."</td><td><textarea rows='2' cols='30' name='comment".$i."' id='comment'></textarea></td></tr>";
                }
            }

        $searchOutput .= "</table>";
        echo $searchOutput;
        $publish = '<div id="submit" align="center">
            <form name="" id="" method="post">
                <input type="submit" name="submit" id="submit" value=" Submit Report " />
            </form>
        </div>';
        echo $publish; 
```

您好，我正在尝试遍历从数据库生成的值。我想要的是为每个使用数据库中的值生成的名称添加一个名称，然后在为生成的数据填写报告后，我将提交到另一个表，用户可以在其中查看他们的报告。我已经使用并尝试了上面的代码，我无法得到任何结果。如果我能得到一个结果，或者任何实现我的目标的提示，我会很高兴和感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:57:12.330

尝试这个

```
$i = 0; 
$searchOutput = '';
while($report = mysql_fetch_assoc($result2)) {

    $searchOutput .= "<tr><td name='uname".$i."'>".$report['Username']."</td><td name='utitle".$i."'>".$report['Title']."</td><td name='udesc".$i."'>".$report['Description']."</td><td name='udate".$i."'>".$report['Date']."</td><td><textarea rows='2' cols='30' name='comment".$i."' id='comment'></textarea></td></tr>";
    $i++;
} 
```

# php - mysql查询队列？

> ID：10363164
> 
> 赞同：5
> 
> 时间：2012-04-28T11:45:08.153
> 
> 标签：php, mysql

我有一个多人游戏，随着越来越多的玩家开始抱怨，它开始产生一些奇怪的错误。

数据库/小时大约有 150 万次查询，我认为问题是一些查询在其他一些查询完成之前执行，因为我之前没有任何问题，而且随着越来越多的人注册，我越来越多.

我有两个主要类：“sendTurn.php”和“removePlayer.php”。如果一名球员反应时间过长，他就会被踢出局。但我想问题是如果一个球员轮到他，就在他被踢出局的时候会发生什么？

我在某处读到查询被放在一个队列中，但由于它需要在每个类中进行多个查询才能完成它，是否有可能例如“sendTurn.php”完成一半（完成前 1-2 个查询) 其他类“removePlayer.php”将开始执行其查询？

在这种情况下，我该怎么办？

编辑：

我在 debian VPS 服务器上使用 apace2，使用 phpmyadmin

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:25:51.450

看起来真正的解决方案将是完整的架构审查，因为这更多是架构问题而不是技术问题。您可以完全避免这个问题，但没有足够的信息供我使用。但是，您*可以*在敏感表的全部范围内访问敏感表时锁定它们。当许多玩家尝试达到相同的功能时，性能会受到影响，但至少它会起作用。

例如对于这样的功能

```
*LOCK TABLE*
Do queries
Do queries
Do queries
Do queries
*UNLOCK TABLE* 
```

MYSQL 示例：[http ://dev.mysql.com/doc/refman/5.0/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)

# javascript - 使用 GAS 从/向电子表格读取和写入时间值

> ID：10363169
> 
> 赞同：3
> 
> 时间：2012-04-28T11:45:26.780
> 
> 标签：javascript, google-sheets, google-apps-script

我真的以为我开始理解它是如何工作的，直到我试图为这个问题提炼一个测试用例并且再次完全困惑。

使用谷歌电子表格，您可以编写如下自定义函数：

```
function dateToSeconds(date) {
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var seconds = date.getSeconds();
  return (hours*3600) + (minutes*60) + seconds;
} 
```

并通过执行例如在单元格中调用它

```
=dateToSeconds(A1) 
```

它可以满足您的期望。但是，如果您这样称呼它：

```
function test() {
    var sheet = SpreadsheetApp.getActiveSheet();

    sheet.getRange("A2").setValue(dateToSeconds(sheet.getRange("A1").getValue()));
} 
```

有25m 21s的差异。有没有搞错？

此外，如果您想从脚本中返回一个日期对象，以便将其格式化为时间，您可以执行例如

```
function newTime(hours, minutes, seconds) {
    // 1899-12-30 is the epoch for time values, it seems
    // http://stackoverflow.com/questions/4051239/how-to-merge-date-and-time-as-a-datetime-in-google-apps-spreadsheet-script
   return new Date(1899, 11, 30, hours, minutes, seconds, 0);
 } 
```

并通过以下方式调用它：

```
=newTime(A1, A2, A3) 
```

它工作正常。如果你这样做：

```
function test() {
    var sheet = SpreadsheetApp.getActiveSheet();
    var values = sheet.getRange("A1:C3").getValues();
    sheet.getRange("D3").setValue(newTime(values[0], values[1], values[2]));
} 
```

然后（给定 11:00:00 的输入）它被格式化为日期，如：

> 1970 年 1 月 1 日 01:00:00

看起来它被解释为更传统的 1970 年代之后的一个小时？我认为我之前看到的行为与上面的 25m 21s 偏移有点对称，我会看到：

> 10:34:39

我的测试用例[在这里](https://docs.google.com/spreadsheet/ccc?key=0Ajjz7TV774F2dEZQbXRFQlpKRFNqTWVlWUt2UnE5cWc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:00:36.410

=dateToSeconds() 与 test() 函数的行为似乎确实有些奇怪。看起来有一个错误导致两者之间的时间差异。[请在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中提出一个错误。

然而，我能够通过在单元格上使用数字格式来完成这项工作。看看我[修改后的电子表格副本](https://docs.google.com/spreadsheet/ccc?key=0AoUJGlizbtP3dHo2cm1LalpnekJFblc2Y1RjR0ZvZ0E)。在单元格 A2 中，我输入了“29/04/2012 11:00:00”，然后设置格式 > 数字 > 15:59:00 时间。您也可以使用[Range.setNumberFormat](https://developers.google.com/apps-script/class_range#setNumberFormat) ("HH:mm:ss");以编程方式执行此操作。这导致单元格 A2 显示 11:00:00。

然后，我修改了您的测试函数以具有以下代码：

```
function test() {
  var sheet = SpreadsheetApp.getActiveSheet();

  sheet.getRange("E2").setValue(dateToSeconds(sheet.getRange("A2").getValue()));
  Logger.log(sheet.getRange("A2").getValue());
  Logger.log(sheet.getRange("A2").getNumberFormat());

  var values = sheet.getRange("A4:C4").getValues();
  Logger.log(values[0][0] + " " + values[0][1] + " " + values[0][2]);
  sheet.getRange("E4").setValue(newTime2(values[0][0], values[0][1], values[0][2])).setNumberFormat("HH:mm:ss");
} 
```

而不是 newTime 函数，我使用以下代码创建了一个 newTime2：

```
function newTime2(hours, minutes, seconds) {
  var date = new Date();
  date.setHours(hours);
  date.setMinutes(minutes);
  date.setSeconds(seconds);
  Logger.log(date);
  return date;
} 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T06:01:26.857

请参阅这篇关于如何获得正确值的帖子，因为电子表格时间和 Java Script 时间不相同，所以有一个校正因子，它们有不同的起点：

[GAS：如何从 Google 电子表格中读取正确的时间值](https://stackoverflow.com/a/17727300/1599881)

# javascript - 如何根据特定的按钮点击更改代码？

> ID：10363171
> 
> 赞同：-1
> 
> 时间：2012-04-28T11:45:43.813
> 
> 标签：javascript

有 2 个按钮 RED 和 BLUE。如果单击红色，则必须出现一些“示例代码”并移动到蓝色“示例代码必须隐藏并且必须出现“新段落”，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:52:07.327

```
var red = document.getElementById('RED');
var blue = document.getELementById('BLUE');
var sampleCode = document.getElementById('SAMPLE');

red.addEventListener('click', function () {
    blue.style.display = 'none'; // hide blue, and you can use this method to hide every element you want
    sampleCode.style.display = 'block'; // display sampleCode element
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:47:09.137

您将添加 onClick 侦听器。您可以使用 JQuery 轻松完成这些工作。

就像是...

```
$.('#myRedbutton').click(function(){
  //Do the red button stuff.
};

$.('#myBluebutton').click(function(){
  //Do the blue button stuff.
}; 
```

对于[纯 Javascript](http://www.w3schools.com/jsref/event_onclick.asp)，您可以像这样编辑按钮的 HTML。

```
 <button onclick="redButton()">Red</button> 
```

单击上面的按钮将调用`redButton()`.

# c# - 在 Webbrowser 控件中使用本地图像

> ID：10363174
> 
> 赞同：7
> 
> 时间：2012-04-28T11:46:22.757
> 
> 标签：c#, windows-phone-7, xaml, webbrowser-control

我在我的 Wp7 应用程序中使用 Webbrowser Control，但我似乎无法将 App 目录中的图像放入 webbrowser。

我已将一些图像放在与 .cs 和 .xaml 文件位于同一目录的文件夹中。现在我尝试将它们放在 webbrowser 控件中，但我似乎无法让它工作。

```
<img src="images/photo.jpg"/>
<img src="/images/photo.jpg"/> 
```

上面这两个显然不起作用，我的猜测是它应该是这样的：

```
<img src="/SilverlightApplication;component/photo.jpg"/> 
```

“SilverlightApplication”和“组件”应该换成别的东西，但我不知道是什么:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T12:17:00.690

您需要将图像存储在独立存储中，然后从那里显示图像。我整理了一个示例，您可以从以下位置下载：-

[www.smartmobiledevice.co.uk/projects/webbrowserimagesample.zip](http://www.smartmobiledevice.co.uk/projects/webbrowserimagesample.zip)

这是基于 MSDN 文章[How to: Display Static Web Content Using the WebBrowser Control for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431811%28v=vs.105%29.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-23T18:45:20.483

在某些 WinRT 类可用的 Windows Phone 8 上，可以获取应用程序隔离存储的文件系统路径。所以 IsoStorage 中文件的绝对 URL 将是：

```
string URL = "file://" +
    Windows.Storage.ApplicationData.Current.LocalFolder.Path +
    "\\folder\\filename.png"; 
```

WebBrowser 控件将这样的 URL 放在一个`NavigateToString()`'d HTML 中。或者，您可以将 IsoStorage 指定为基础并在整个过程中使用相对 URL。`isostore:`网址无效，我试过了。也不行`ms-appx://local/`。

为了完整起见，您可以非常相似地获取应用程序资源的文件系统路径。那将是`Windows.ApplicationModel.Package.Current.InstalledLocation.Path`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:03:38.763

好吧，您可以通过连接上面给定的 Paul 示例应用程序动态更新数组来使用动态图像，

```
string[] files = {
        "readme.htm", "desert.jpg", "sample.jpg"
    }; 
```

在写隔离之前，您可以删除现有的

```
 private void SaveFilesToIsoStore()
    {
        //These files must match what is included in the application package,
        //or BinaryStream.Dispose below will throw an exception.
        string[] files = {
        "readme.htm", "desert.jpg", "sample.jpg"
    };

        IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();
        if(isoStore.FileExists(files[0]))
        {
            isoStore.DeleteFile(files[0]);
        }

            foreach (string f in files)
            {
                StreamResourceInfo sr = Application.GetResourceStream(new Uri(f, UriKind.Relative));
                using (BinaryReader br = new BinaryReader(sr.Stream))
                {
                    byte[] data = br.ReadBytes((int)sr.Stream.Length);
                    SaveToIsoStore(f, data);
                }
            }
        }

    private void SaveToIsoStore(string fileName, byte[] data)
    {
        string strBaseDir = string.Empty;
        string delimStr = "/";
        char[] delimiter = delimStr.ToCharArray();
        string[] dirsPath = fileName.Split(delimiter);

        //Get the IsoStore.
        IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();

        //Re-create the directory structure.
        for (int i = 0; i < dirsPath.Length - 1; i++)
        {
            strBaseDir = System.IO.Path.Combine(strBaseDir, dirsPath[i]);
            isoStore.CreateDirectory(strBaseDir);
        }

        //Remove the existing file.
        if (isoStore.FileExists(fileName))
        {
            isoStore.DeleteFile(fileName);
        }

        //Write the file.
        using (BinaryWriter bw = new BinaryWriter(isoStore.CreateFile(fileName)))
        {
            bw.Write(data);
            bw.Close();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T21:11:37.837

这是一个非常古老的线程，但我想出了一个解决方案，因为我们今天刚刚更新了一个 WP7 应用程序。

秘诀是首先将图像转换为 base 64 表示，因此从以下代码开始：

```
 private string GetBase64(string f)
    {
        string ret = "";

        {
            StreamResourceInfo sr = Application.GetResourceStream(new Uri(f, UriKind.Relative));
            using (BinaryReader br = new BinaryReader(sr.Stream))
            {
                byte[] data = br.ReadBytes((int)sr.Stream.Length);
                ret = System.Convert.ToBase64String(data);
            }
        }
        return ret;
    } 
```

现在，你想在代码中注入图像（我的是 gifs）使用这个

```
StringBuilder sb = ... // a string builder holding your webpage
String b64 = GetBase64("assets/images/filename.gif");

sb.AppendFormat(@"<img src='data:image/gif;base64,{0}' /></div>", b64); 
```

# wxpython - 一个显示图像并返回点击坐标的 wxpython 小部件

> ID：10363177
> 
> 赞同：1
> 
> 时间：2012-04-28T11:47:14.863
> 
> 标签：wxpython

我想要一个显示图像并（可以）在单击时使用坐标调用函数的小部件。我还希望它能够很好地受到水平 box sizer 的约束。

什么是用于此目的的好小部件和相同的教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:56:55.210

我写了一个教程来展示如何在[这里](http://www.blog.pythonlibrary.org/2010/03/26/creating-a-simple-photo-viewer-with-wxpython/)创建一个简单的图像查看器。要获取鼠标点击的坐标，您需要捕获 EVT_LEFT_DOWN，然后在事件处理程序中执行类似 event.GetPosition() 或 event.GetX() 和 event.GetY() 的操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T05:09:44.930

要获取实时图像源并在面板上更新它：

[任何用于显示来自相机的实时图像的快速 Python GUI](https://stackoverflow.com/questions/3596960/any-quick-python-gui-to-display-live-images-from-camera)

要获取鼠标悬停并单击的坐标：

[http://www.python-forum.org/pythonforum/viewtopic.php?f=2&t=9877](http://www.python-forum.org/pythonforum/viewtopic.php?f=2&t=9877)

# c# - 如何从 asp.net 输入 \t

> ID：10363178
> 
> 赞同：2
> 
> 时间：2012-04-28T11:47:24.847
> 
> 标签：c#, asp.net

我正在尝试从 asp.net 表单中输入控制字符。例如，我希望用户能够在文本框中输入 \t 并且它是 \t 而不是 \ \t （如果我把它们放在一起，它们中的一个会被转义）。最好的方法是什么？我已经连续盯着它看了很长一段时间，答案并没有突然出现在我身上。谢谢。

更新：

谢谢大家，但我只是回答了自己。

我刚刚在 Regex 中找到了静态 Unescape 方法，所以在我的网络应用程序中我现在正在做：

（其中 tb 是一个 asp.net 文本框）

```
 var inputText = tb.Text;
        if (inputText.Length == 2)
        {
            var escaped = System.Text.RegularExpressions.Regex.Unescape(inputText);
            if (escaped.Length == 1)
            {
                var character = escaped.ToCharArray()[0];
                if (char.IsControl(character))
                {
                    inputText = character.ToString();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:54:32.893

谢谢大家，但我只是回答了自己。

我刚刚在 Regex 中找到了静态 Unescape 方法，所以在我的网络应用程序中我现在正在做：

（其中 tb 是一个 asp.net T

```
 var inputText = tb.Text;
        if (inputText.Length == 2)
        {
            var escaped = System.Text.RegularExpressions.Regex.Unescape(inputText);
            if (escaped.Length == 1)
            {
                var character = escaped.ToCharArray()[0];
                if (char.IsControl(character))
                {
                    inputText = character.ToString();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:56:39.593

我认为您想解析转义字符，例如`'\t'`. 如果是这样，请使用此辅助方法：

```
public static char ParseChar(string ch)
{
    char result;

    if (ch[0] != '\\')
        result = ch[0];
    else
    {
        if (ch.Length == 1)
            throw new ArgumentException("Invalid escape sequence '" + ch + "'");

        switch (ch[1])
        {
            case '\'': result = '\''; break;
            case '"': result = '"'; break;
            case '\\': result = '\\'; break;
            case '0': result = '\0'; break;
            case 'a': result = '\a'; break;
            case 'b': result = '\b'; break;
            case 'f': result = '\f'; break;
            case 'n': result = '\n'; break;
            case 't': result = '\t'; break;
            case 'v': result = '\v'; break;

            default:
                throw new ArgumentException(
                    "Invalid escape sequence '" + ch + "'");
        }
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:57:58.983

需要注意的一点是，如果您`\t`通过调试器查看 true 以直观地查看该值，.net 会自动`\\`为您编码它，即使它不存在。

也就是说，如果它确实存在，您可以在用户将文本提交到服务器后尝试对其进行搜索和替换：

```
var newString = stringWithDoubleSlash.Replace("\\\\", "\\");  
// We aren't really looking for 4 slashes, but it appears that way since two of them are escaped 
```

# android - 如何在android中使用共享首选项传递数据？

> ID：10363183
> 
> 赞同：0
> 
> 时间：2012-04-28T11:48:09.950
> 
> 标签：android

我想将一个字符串值从一个活动传递给android中的另一个活动。我不想使用意图来传递数据。如何使用共享首选项完成任务？

[我在http://www.how-to-develop-android-apps.com/using-shared-preferences-in-android/](http://www.how-to-develop-android-apps.com/using-shared-preferences-in-android/)找到了一个很好的例子。但是我们可以在不使用意图的情况下传递值吗？

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:01:45.450

只需阅读有关[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html)和使用它的信息。这就像将东西保存到文件中，在下一个 Activity 中打开同名文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:06:24.917

如果您只需要传递数据，为什么不使用将数据存储在 Application 类中并使用每个活动的 getApplication() （首先设置，然后检索存储的数据）。它比 SharedPreferences 快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T12:26:25.343

在活动之间传递信息的另一种方法是使用应用程序类。

创建一个扩展应用程序的新类。在清单上添加应用程序类的名称，如下所示：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name=".YourApplication" > 
```

此类将在任何活动之前首先创建，并且您的应用程序正在运行。您将需要覆盖 onCreate 方法。在您的应用程序类上创建变量并从您的活动中访问您的应用程序，您需要执行以下操作：

```
YourApplication app = (YourApplication) getAppliation(); 
```

只是想提一下，以防万一你不知道。共享偏好有利于永久保存主要变量。

# svg - MathJax：如何更改 svg 输出的默认颜色

> ID：10363187
> 
> 赞同：5
> 
> 时间：2012-04-28T11:48:38.967
> 
> 标签：svg, mathjax

我改变了 HTML/CSS 颜色输出使用

```
 MathJax.Hub.Config({
    styles: { ".MathJax": { color: "#fff" } }
  }); 
```

我还反转了基于 png 的输出（通过反转每个图像）：

```
find ./fonts/HTML-CSS/TeX/png -name "*.png" -exec convert {} -negate {} \; 
```

现在我一直在想办法用白色而不是默认的黑色填充 SVG 字形。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T19:26:24.563

尝试

```
MathJax.Hub.Config({
  styles: {
    ".MathJax_SVG svg > g, .MathJax_SVG_Display svg > g": {
      fill: "#FFF",
      stroke: "#FFF"
    }
  }
}); 
```

使 SVG 输出为白色。

# java - javadoc和注释中的Unicode？

> ID：10363188
> 
> 赞同：16
> 
> 时间：2012-04-28T11:48:42.740
> 
> 标签：java, unicode, comments, javadoc

一些编译器在 JavaDoc 和源代码注释中的非 ASCII 字符上失败。Java 源文件中关于 Unicode 的当前（Java 7）和未来（Java 8 及更高版本）实践是什么？IcedTea、OpenJDK 和其他 Java 环境之间是否存在差异，语言规范规定了什么？*是否应该在 JavaDoc 中使用 HTML &escape*对所有非 ASCII 字符进行转义？- 类似代码？但是 Java *// 注释*等价物是什么？

**更新**：注释表明可以使用任何字符集，并且在编译时需要指出源文件中使用的字符集。我将对此进行研究，并将寻找有关如何通过 Ant、Eclipse 和 Maven 进行配置的详细信息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T16:23:45.333

> 一些编译器在 JavaDoc 和源代码注释中的非 ASCII 字符上失败。

这很可能是因为编译器假定输入是 UTF-8，并且源文件中存在无效的 UTF-8 序列。这些似乎在源代码编辑器的注释中是无关紧要的，因为词法分析器（将注释与其他标记区分开来）永远不会运行。当工具在词法分析器运行之前尝试将字节转换为字符时发生故障。

* * *

和说的`man`页面`javac``javadoc`

```
-encoding name
          Specifies  the  source  file  encoding   name,   such   as
          EUCJIS/SJIS.   If  this option is not specified, the plat-
          form default converter is used. 
```

所以`javadoc`使用编码标志运行

```
javadoc -encoding <encoding-name> ... 
```

替换`<encoding-name>`为您用于源文件的编码后，应使其使用正确的编码。

如果您在需要一起编译的一组源文件中使用了多个编码，则需要首先修复该问题并为所有源文件确定一个统一的编码。你真的应该只使用 UTF-8 或坚持使用 ASCII。

* * *

> Java 源文件中关于 Unicode 的当前（Java 7）和未来（Java 8 及更高版本）实践是什么？

Java中处理源文件的算法是

1.  收集字节
2.  使用某种编码将字节转换为字符（UTF-16 代码单元）。
3.  `'\\'` `'u'`用对应于这些十六进制数字的代码单元替换所有后跟四个十六进制数字的序列。如果`"\u"`后面没有四个十六进制数字，则会出错。
4.  将字符转换为标记。
5.  将标记解析为类。

当前和以前的做法是第 2 步，将字节转换为 UTF-16 代码单元，取决于加载编译单元（源文件）的工具，但命令行界面的实际标准是使用`-encoding`标志。

转换发生后，语言要求`\uABCD`在词法分析和解析之前将样式序列转换为 UTF-16 代码单元（步骤 3）。

例如：

```
int a;
\u0061 = 42; 
```

是一对有效的 Java 语句。任何 java 源代码工具都必须在将字节转换为字符之后但在解析之前查找 \uABCD 序列并对其进行转换，以便将此代码转换为

```
int a;
a = 42; 
```

在解析之前。无论 \uABCD 序列出现在何处，都会发生这种情况。

这个过程看起来像

1.  获取字节：`[105, 110, 116, 32, 97, 59, 10, 92, 117, 48, 48, 54, 49, 32, 61, 32, 52, 50, 59]`
2.  将字节转换为字符：`['i', 'n', 't', ' ', 'a', ';', '\n', '\\', 'u', '0', '0', '6', '1', ' ', '=', ' ', '4', '2', ';']`
3.  替换 unicode 转义：`['i', 'n', 't', ' ', 'a', ';', '\n', a, ' ', '=', ' ', '4', '2', ';']`
4.  莱克斯：`["int", "a", ";", "a", "=", "42", ";"]`
5.  解析：`(Block (Variable (Type int) (Identifier "a")) (Assign (Reference "a") (Int 42)))`

* * *

> JavaDoc 中的所有非 ASCII 字符是否应该使用 HTML &escape; 类代码进行转义？

`'<'`除了您希望在文档中逐字显示的 HTML 特殊字符外，不需要。您可以`\uABCD`在 javadoc 注释中使用序列。在解析源文件之前进行Java 处理`\u....`，因此它们可以真正出现在字符串、注释、任何地方。这就是为什么

```
System.out.println("Hello, world!\u0022); 
```

是有效的 Java 语句。

```
/** @return \u03b8 in radians */ 
```

相当于

```
/** @return θ in radians */ 
```

就 javadoc 而言。

* * *

> 但是 Java`//`注释的等价物是什么？

您可以`//`在 java 中使用注释，但 Javadoc 只在`/**...*/`注释中查找文档。 `//`评论不携带元数据。

`\uABCD`Java 处理序列的一个分支是，虽然

```
// Comment text.\u000A System.out.println("Not really comment text"); 
```

看起来像单行注释，许多 IDE 会这样突出显示它，但事实并非如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T16:08:04.533

正如评论者所指出的，源文件的编码可以传递给（至少一些）编译器。在这个答案中，我将总结如何传递这些信息。

**蚀**

Eclipse（选中 3.7）不需要任何特殊配置，您可以愉快地使用 Java 源代码，例如：

```
double π = Math.PI; 
```

**蚂蚁**

```
<javac encoding="UTF-8" ... >
</javac> 
```

**爪哇**

```
javac -encoding UTF-8 src/main/Foo.java 
```

**摇篮**

```
javadoc {
    options.encoding = 'UTF-8'
} 
```

# ruby-on-rails - 当我创建新用户时，设计 current_user 返回 nil，Rails 3.2

> ID：10363193
> 
> 赞同：2
> 
> 时间：2012-04-28T11:49:25.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在开发一个使用 Devise 进行注册的 Rails 应用程序。我使用单表继承来管理用户角色，[类似于 this](http://www.funonrails.com/2011/12/multiple-resources-registrations-with.html)。我有三个用户模型`User < ActiveRecord`，`Admin < User`和`Collaborator < User`。协作者和管理员共享会话。我目前的问题是创建新用户，用户被保存到数据库和 user_signed_in？返回 true，但 current_user 由于某种原因返回 nil。

当用户创建他们的帐户时，它应该重定向到我的 AccountsController 索引操作，如下所示：

```
def index
  @accounts = current_user.accounts
end 
```

结果是：

```
undefined method `accounts' for nil:NilClass 
```

当我尝试登录时，相同的代码有效。

我的路线看起来像这样[（截至）](http://www.funonrails.com/2011/12/multiple-resources-registrations-with.html)：

```
devise_for :users, :controllers => {:sessions  => 'sessions'}, :skip => [:registrations] do
  delete '/logout', :to => 'sessions#destroy', :as => :destroy_user_session
  get '/sign_in', :to => 'sessions#new', :as => :new_user_session
  post '/sign_in', :to => 'sessions#create', :as => :user_session
end
devise_for :admins, :controllers => {:registrations  => 'admins/registrations'}, :skip => :sessions do
  get '/sign_up', :to => 'admins/registrations#new', :as => :new_admin
  post '/sign_up', :to => 'admins/registrations#create', :as => :admin
end
devise_for :collaborators, :controllers => {:registrations  => 'collaborators/registrations'}, :skip => :sessions 
```

我还创建了一些我使用的辅助方法[（与 of 相同）](http://www.funonrails.com/2011/12/multiple-resources-registrations-with.html)：

```
# New Version using dynamic methods
  %w(Collaborator Admin).each do |k|
  define_method "current_#{k.underscore}" do
    current_user if current_user.is_a?(k.constantize)
  end

  define_method "authenticate_#{k.underscore}!" do |opts={}|
    send("current_#{k.underscore}") || not_authorized
  end
end

def after_sign_in_path_for(resource)
  if resource.is_a?(User)
    accounts_path
  else
    super
  end
end

def after_sign_up_path_for(resource)
  accounts_path
end 
```

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:11:41.893

我设法通过自定义 after_sign_up_path_for 来解决它，如下所示：

```
def after_sign_up_path_for(resource)
  sign_in(resource)
  accounts_path 
end 
```

让我知道是否有更好的方法来做到这一点。

# android - 请求 Http 通过 https

> ID：10363195
> 
> 赞同：0
> 
> 时间：2012-04-28T11:50:00.353
> 
> 标签：android, asp.net, http, httpclient

我的公司正在使用基于 asp.net 的服务，当有某个 http 获取请求时，它会“做事”。URL 如下所示：

[https://www.server.tld/service/dostuff.ashx?user=user&pass=pass&command=some+command](https://www.server.tld/service/dostuff.ashx?user=user&pass=pass&command=some+command)

我正在尝试在 Android 中实现一个方法，该方法将调用 URL。该命令还返回我可能需要获取的 xml 响应。

目前，我正在使用来自另一个 stackoverflow 问题的代码，但我似乎无法让它工作：

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(httpGetUrl);
HttpResponse response;
try {
    response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        InputStream instream = entity.getContent();
        String result = convertStreamToString(instream);
        instream.close();
        }
    } catch (Exception e) {}

// convertStreamToString method 
```

我的问题是，对于 https 连接或与 asp 交互是否有一些特殊要求？也许我应该为此使用功能更强大的网络客户端？

# jsf-2 - JSF 2.1“必需”属性和 INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL 和 SelectOneMenu

> ID：10363196
> 
> 赞同：1
> 
> 时间：2012-04-28T11:50:08.743
> 
> 标签：jsf-2, el, mojarra

我正在使用 Mojarra 2.1.5（来自 weblogic 12c）。

首先，我不需要设置`INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL`并且“必需”验证仍然有效。这与这篇文章相矛盾：[绑定到 String 属性的 h:inputText 正在提交空字符串而不是 null](https://stackoverflow.com/questions/2203322/hinputtext-return-a-empty-string-instead-of-null)。

有人可以澄清发生了什么吗？

其次，我遇到了与[h:selectOneMenu required="true" reverts to bean value on validation failure](https://stackoverflow.com/questions/8351326/hselectonemenu-required-true-reverts-to-bean-value-on-validation-failure)相同的行为。我坚信这是一个错误。但是为了提供更多信息，重新显示的值不是来自 bean（在我的测试用例中，我有一个请求范围的 bean，所以所有属性都将为空），我相信是来自`UIComponent.getValue()`上一个生命周期中保留的，而不是`UIComponent.getSubmittedValue()`.

谁能证实这一点？

# php - 获取 mime 类型的压缩文件

> ID：10363199
> 
> 赞同：3
> 
> 时间：2012-04-28T11:50:56.550
> 
> 标签：php

获取上传文件的 mime 类型非常简单：

```
echo mime_content_type($fileatt['tmp_name']); 
```

但是，我还想检查压缩文件中包含的文件的 mime 类型。解压缩我的文件后（循环通过 zip 中的文件以及`i`当前文件在哪里），我尝试过：

```
$info = pathinfo($zip->getNameIndex($i));
echo mime_content_type($info['dirname'] . "\\" . $info['basename']); 
```

这给出了错误：警告：mime_content_type() [function.mime-content-type]: File or path not found '.\foo.pdf' in `C:\Users\<user>\<website>\validation.php`on line 56

我意识到`dirname`压缩文件的 zip 文件是相对于 zip 文件的，而不是绝对路径，所以我尝试了：

```
$a = pathinfo($fileatt['tmp_name']);
$b = $a['dirname'] . "\\" . $info['basename'];
echo mime_content_type($b); 
```

这给出了错误：Warning: mime_content_type() [function.mime-content-type]: File or path not found 'C:\xampp\tmp\foo.pdf' 在`C:\Users\<user>\<website>\validation.php`第 56 行

任何人都可以对文件的路径有所了解吗？（我怀疑答案可能[与从压缩文件中获取图像高度和宽度](https://stackoverflow.com/questions/3536891/getting-image-height-and-width-from-zipped-files)的评论相同，但有没有其他方法？）

**更新**

感谢 Baba，以下操作确实有效：

```
$fp = fopen('zip://C:\Users\<user>\<website>\test.zip#foo.jpg', "r"); 
```

（请注意，当我给出 zip 文件的完整路径时，我只能让它工作，而不是像通过表单上传文件时那样的 tmp 文件）。但是，尝试获取 mime-type: 会`echo mime_content_type($fp);`产生错误：

```
Warning: mime_content_type() [function.mime-content-type]: stream does not support seeking in C:\Users\<user>\<website>\includes\validation.php on line 70 
```

无论文件类型如何，都会发生这种情况（即在[http://php.net/manual/en/ziparchive.getstream.php](http://php.net/manual/en/ziparchive.getstream.php)的唯一评论中所述的问题似乎对我没有影响）。

顺便说一句，这也是我尝试不同方法时遇到的相同错误：`$fp = $zip->getStream('foo.jpg');`

我知道在 SO 上还有其他几个“不支持流”的问题，但我无法弄清楚它们与我的问题有何关系，我希望既然有人特别建议了这种方法，可能会有一个很好的答案.. .

（ps 我没有使用这些`finfo_*`功能，因为我的主机目前拒绝安装 PHP v5.3）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-14T15:13:06.143

我知道你提到你找不到 php <5.3 的答案，但我有点卡住了，只是想通了，希望它对最新版本的人有用 - 我看不到它写在别处。

很简单，您可以在二进制数据上使用[finfo->buffer](http://php.net/manual/en/function.finfo-buffer.php)来提取 MIME 类型，无需将内容提取到新文件即可使用。

```
$fileToUnzip = 0;

$zip = new ZipArchive;
$zip->open("dir/archive.zip");
$binary = $zip->getFromIndex($fileToUnzip);
$filename = $zip->getNameIndex($fileToUnzip);
$zip->close();

$finfo = new finfo(FILEINFO_MIME_TYPE);
$MIMETypeAndCharset = $finfo->buffer($binary);

// discard charset info
$MIMETypeAndCharsetArray = explode(';', $MIMETypeAndCharset);
$MIMEtype = $MIMETypeAndCharsetArray[0];

// you can change the source of an iframe to this php file in order to view a preview
// If the browser can't handle the file, the user is presented with a download box

header('Content-Type:$MIMEtype');
header('Content-Disposition: inline; filename="July Report.pdf"')
echo $binary; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T12:09:14.163

A. 你可以先尝试

```
 mime_content_type('zip:///path/to/file.zip#'. $chapterZip->getNameIndex ( $i )); 
```

B. 我现在只能想到的是替代品，因为`mime_content_type`它可能不是最好的方法，但我相信它会浮出水面，直到我找到更好的解决方案

```
$chapterZip = new ZipArchive ();
if ($chapterZip->open ( "stockoverflow.zip" )) {
    for($i = 0; $i < $chapterZip->numFiles; $i ++) {
        var_dump ( mime_content_type_replacement ( $chapterZip->getNameIndex ( $i ) ) );
    }
} 
```

**`file extension`使用和的替换函数`finfo_open ( FILEINFO_MIME )`**

```
function mime_content_type_replacement($filename) {

    $mime_types = array (

            'txt' => 'text/plain',
            'htm' => 'text/html',
            'html' => 'text/html',
            'php' => 'text/html',
            'css' => 'text/css',
            'js' => 'application/javascript',
            'json' => 'application/json',
            'xml' => 'application/xml',
            'swf' => 'application/x-shockwave-flash',
            'flv' => 'video/x-flv',

            // images
            'png' => 'image/png',
            'jpe' => 'image/jpeg',
            'jpeg' => 'image/jpeg',
            'jpg' => 'image/jpeg',
            'gif' => 'image/gif',
            'bmp' => 'image/bmp',
            'ico' => 'image/vnd.microsoft.icon',
            'tiff' => 'image/tiff',
            'tif' => 'image/tiff',
            'svg' => 'image/svg+xml',
            'svgz' => 'image/svg+xml',

            // archives
            'zip' => 'application/zip',
            'rar' => 'application/x-rar-compressed',
            'exe' => 'application/x-msdownload',
            'msi' => 'application/x-msdownload',
            'cab' => 'application/vnd.ms-cab-compressed',

            // audio/video
            'mp3' => 'audio/mpeg',
            'qt' => 'video/quicktime',
            'mov' => 'video/quicktime',

            // adobe
            'pdf' => 'application/pdf',
            'psd' => 'image/vnd.adobe.photoshop',
            'ai' => 'application/postscript',
            'eps' => 'application/postscript',
            'ps' => 'application/postscript',

            // ms office
            'doc' => 'application/msword',
            'rtf' => 'application/rtf',
            'xls' => 'application/vnd.ms-excel',
            'ppt' => 'application/vnd.ms-powerpoint',

            // open office
            'odt' => 'application/vnd.oasis.opendocument.text',
            'ods' => 'application/vnd.oasis.opendocument.spreadsheet' 
    );

    $ext = pathinfo ( $filename, PATHINFO_EXTENSION );
    if (array_key_exists ( $ext, $mime_types )) {
        return $mime_types [$ext];
    } elseif (function_exists ( 'finfo_open' )) {
        $finfo = finfo_open ( FILEINFO_MIME );
        $mimetype = finfo_file ( $finfo, $filename );
        finfo_close ( $finfo );
        return $mimetype;
    } else {
        return 'application/octet-stream';
    }
} 
```

更多的哑剧类型

[PHP / Mime Types - 公开可用的 mime 类型列表？](https://stackoverflow.com/questions/7519393/php-mime-types-list-of-mime-types-publically-available)

[http://snipplr.com/view/1937/](http://snipplr.com/view/1937/)

**编辑 1**

刚刚测试了以下，它的工作原理

```
$fp = fopen('zip://C:\stockoverflow.zip#1.MOV.xml',"r"); 
```

**编辑 2**

A.`mime_content_type($fp)`不起作用，因为`mime_content_type`只接受字符串参数，请参阅[http://php.net/manual/en/function.mime-content-type.php](http://php.net/manual/en/function.mime-content-type.php)

B. 不知道为什么你还在坚持，`mime_content_type`因为它也已经贬值了

> 此功能已被弃用，因为 PECL 扩展 Fileinfo 以更简洁的方式提供了相同的功能（以及更多功能）。

C.`$fileatt['tmp_name']`直接处理并不理想.. 它是一个临时文件，不能被操纵.. 要处理该文件，您需要将其复制到您的 PHP 将拥有访问它的完全权限的服务器

D. `ZipArchive::getStream`仅适用于`zip`文件的本地副本，而不适用于临时上传文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-09T15:54:02.553

使用上面简单的[你可以说更大的一个]**功能**，你可以提取或获取文件的mime类型或者你可以说内容。

但是之前，为了使用这个功能，你可能需要做一些预先配置，

> 就像您必须确保在 php.ini 文件中打开或配置了 curl 扩展、文件系统相关扩展和 finfo 扩展。

在这里，我简单描述一下这个函数的整个过程。

1.  **首先**，我们将所有更新的 mime 类型存储为来自官方 apache mime 类型 url 的数组。

> 您还可以在使用 url 的 apache conf 目录中获取此 mime 类型文件。在这个函数中，我们使用 live url 来获取所有的 mime 类型。

0.  **但是这个函数的第零个过程**是验证 apache url 是否存在。

1.  **验证 url 后，如果 url 被验证 [表示 live ]，我们将来自该 url 的所有 mime 存储为一个名为$mimes**的数组

 **> 如果 url 不存在或不存在，我们将手动创建一个具有一些通用扩展名的数组。

3.  然后我们将内容验证为文件。

4.  然后我们检查 PHP pathinfo 函数以确保是否有任何文件扩展名。如果有，请将其存储起来。

5.  之后，我们使用我们的**内容扩展名检查****$mimes**数组作为**$mimes 数组索引。**

*****   **最后**，我们通过**$content_mime 变量将****$mimes 数组**的索引值作为**内容 mime 类型**返回。**** 

 *********而已。***

```
<?php
    /**
     * **get_content_mime_type
     *
     * @param  string $content, the content or the file whose mime type you want to know.
     * @return string
     */
    function get_content_mime_type($content)
    {
        $url = 'http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types';
        $url_live = false;
        $handle = curl_init($url);
        curl_setopt_array($handle, array(
            CURLOPT_FOLLOWLOCATION => true,
            CURLOPT_NOBODY => true,
            CURLOPT_HEADER => false,
            CURLOPT_RETURNTRANSFER => false,
            CURLOPT_SSL_VERIFYHOST => false,
            CURLOPT_SSL_VERIFYPEER => false
        ));
        $response = curl_exec($handle);
        $httpCode = curl_getinfo($handle, CURLINFO_EFFECTIVE_URL);
        $httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
        if ($httpCode == 200)
        {
            $url_live = true;
        }
        $url_live = $url_live;
        curl_close($handle);
        $mimes = array();
        if ($url_live)
        {
            $mimes_file = file_get_contents($url);
            preg_match_all('#^([^\s]{2,}?)\s+(.+?)$#ism', $mimes_file, $matches, PREG_SET_ORDER);
            foreach ($matches as $match)
            {
                $exts = explode(" ", $match[2]);
                foreach ($exts as $ext)
                {
                    $mimes[$ext] = $match[1];
                }
            }
        }
        else
        {
            $mimes = array(
                'txt' => 'text/plain',
                'htm' => 'text/html',
                'html' => 'text/html',
                'php' => 'text/html',
                'css' => 'text/css',
                'js' => 'application/javascript',
                'json' => 'application/json',
                'xml' => 'application/xml',
                'swf' => 'application/x-shockwave-flash',
                'flv' => 'video/x-flv',
                // images
                'png' => 'image/png',
                'jpe' => 'image/jpeg',
                'jpeg' => 'image/jpeg',
                'jpg' => 'image/jpeg',
                'gif' => 'image/gif',
                'bmp' => 'image/bmp',
                'ico' => 'image/vnd.microsoft.icon',
                'tiff' => 'image/tiff',
                'tif' => 'image/tiff',
                'svg' => 'image/svg+xml',
                'svgz' => 'image/svg+xml',
                // archives
                'zip' => 'application/zip',
                'rar' => 'application/x-rar-compressed',
                'exe' => 'application/x-msdownload',
                'msi' => 'application/x-msdownload',
                'cab' => 'application/vnd.ms-cab-compressed',
                // audio/video
                'mp3' => 'audio/mpeg',
                'qt' => 'video/quicktime',
                'mov' => 'video/quicktime',
                // adobe
                'pdf' => 'application/pdf',
                'psd' => 'image/vnd.adobe.photoshop',
                'ai' => 'application/postscript',
                'eps' => 'application/postscript',
                'ps' => 'application/postscript',
                // ms office
                'doc' => 'application/msword',
                'rtf' => 'application/rtf',
                'xls' => 'application/vnd.ms-excel',
                'ppt' => 'application/vnd.ms-powerpoint',
                'docx' => 'application/msword',
                'xlsx' => 'application/vnd.ms-excel',
                'pptx' => 'application/vnd.ms-powerpoint',
                // open office
                'odt' => 'application/vnd.oasis.opendocument.text',
                'ods' => 'application/vnd.oasis.opendocument.spreadsheet',
            );
        }
        $content_mime = 'unknown';
        if (is_file($content))
        {
            if (isset(pathinfo($content) ['extension']))
            {
                $content_ext = pathinfo($content) ['extension'];
                if (isset($mimes[$content_ext]))
                {
                    $content_mime = $mimes[$content_ext];
                }
                else
                {
                    if (is_readable($content) && is_executable($content))
                    {
                        $finfo = finfo_open(FILEINFO_MIME_TYPE);
                        $content_mime = finfo_file($finfo, $content);
                        if ($content_mime === null | $content_mime === "")
                        {
                            $content_mime = "application/octet-stream";
                        }
                        else
                        {
                            $content_mime = $content_mime;
                        }
                        finfo_close($finfo);
                    }
                    else
                    {
                        $content_mime = "application/octet-stream";
                    }
                }
            }
        }
        else
        {
            // return whatever you want
            // $content_mime = 'unknown';

        }
        $content_mime = $content_mime;
        return $content_mime;
    }
    ?> 
```********

# php - 使用 php 连接到 MSSQL 数据库视图

> ID：10363203
> 
> 赞同：2
> 
> 时间：2012-04-28T11:51:30.037
> 
> 标签：php, sql-server, view

我从未在 MSSQL 上使用过 Views，所以我希望我注意到我提出了一个愚蠢的问题。

我有一个 MSSQL 数据库，我可以轻松地从中检索信息，例如：

```
mssql_query(SELECT tbDocs FROM tbServices); 
```

但我无法从视图中获取数据。例如，有一个名为 View_Technical_Service 的视图，它从 tbServices 和 tbCustomer 获取字段。每当我从 php 执行查询时

```
mssql_query(SELECT tbDocs FROM View_Technical_Service); 
```

我从 chrome 收到超时错误消息：

```
Error 324 (net::ERR_EMPTY_RESPONSE): 
```

那么有什么问题呢？用 php 从 MSSQL 视图中获取是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:21:53.347

要回答这个问题，是的，您可以像使用表格一样使用视图——我经常这样做。但是，您应该使用您的数据库工具（例如 phpMyAdmin 或 SQLYog）来确定视图是否正常工作，并且您实际上可以按预期看到“视图” - 您应该能够以与您完全相同的方式查看数据会一张桌子。

如果您使用的是 Chrome，那么它如何处理空结果显然在世界范围内存在一个猖獗的问题，这似乎也验证了 View 没有或无法显示任何数据来向您显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T00:44:46.593

是的，它有效。我已经在 Windows Apache 服务器上测试了来自 PHP 的 DSN less ODBC。但是当我在查询字符串中使用 [Table Name] 时，它不起作用。我不得不删除空格（TableName）。所以我建议从表名中删除空格，不要依赖 []。

# php - codeigniter url 标题特殊字符错误

> ID：10363204
> 
> 赞同：1
> 
> 时间：2012-04-28T11:51:30.023
> 
> 标签：php, codeigniter, url, special-characters

我有一个看起来像这样的链接：

```
www.localsite.dev/posts/332635955335419755 
```

效果很好，我可以看到 ID = 332635955335419755 的帖子

但是当我尝试将它的一些文本添加到更漂亮的 URL 的 URL 时......如果 Codeigniter 有一些特殊字符，它将向我显示 404 页面错误......实际上它不会发生，除非你尝试 XSS 或等等它...... .我没有得到XSS'ed或这样只是抛出一个404页面错误，如果我在ID之后删除文本它会正常工作......

```
www.localsite.dev/posts/332635955335419755/<SCRIPT SRC=http://ha.ckers.org/xss.js></SCRIPT> 
```

那么如果蛞蝓有这些字符，我如何确保不会出现 404 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:13:33.740

您的问题实际上并不是如何防止 404，而是关于如何制作安全的 url slug。

查看[用户指南中的以下页面](http://codeigniter.com/user_guide/libraries/security.html)，您可以使用`xss_clean()`和/或`sanitize_filename()`从字符串中删除危险字符。您可能希望在将数据插入数据库之前或创建 slug 时执行此操作。

还有[方法](http://codeigniter.com/user_guide/helpers/url_helper.html)[，`url_title()`](http://codeigniter.com/user_guide/helpers/url_helper.html)但我不确定如何处理 xss 字符串。理想情况下，您会结合使用所有三种方法 - 测试一下。

完成此操作后，您可能仍然需要更改`$config['permitted_uri_chars']`以允许这两种安全方法允许通过，但至少它应该更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:06:49.423

config.php 中的更改

```
 $config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

到

```
 $config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-<>/'; 
```

但是——你真的真的不想那样做——它会让你面临巨大的安全问题。您应该重新考虑解决问题的方法。我建议您在文本中使用 flash_message，甚至 _POST。使用 URL 来处理这类文本只会导致问题和错误……

# symfony1 - 当用户没有正确的凭据时重定向

> ID：10363205
> 
> 赞同：0
> 
> 时间：2012-04-28T11:51:34.210
> 
> 标签：symfony1, symfony-1.4, sfdoctrineguard

我的 Symfony 项目中有 3 个应用程序：

*   一个公共应用程序不受保护
*   和另外两个应用程序（**app1**和**app2**）具有两个不同的凭据。

我想要当我在**app1**上连接并且我录制了**app2**的 url阻止我并告诉我我没有正确的凭据将我重定向到我连接的**app1**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:50:41.970

我遇到了同样的问题，并查看了 symfony 的过滤器链：[06-Inside-the-Controller-Layer](http://www.symfony-project.org/book/1_2/06-Inside-the-Controller-Layer#chapter_06_filters)。

如果您正在使用安全过滤器，您可能需要扩展它或自己实现一个。

希望这可以帮助。

# haskell - Haskell中的撇号是什么意思？

> ID：10363206
> 
> 赞同：13
> 
> 时间：2012-04-28T11:51:41.600
> 
> 标签：haskell

有时我会看到带有以下表达式的代码：

```
example = example' [] 
```

或者这些功能之间有什么不同？

```
foldl
foldl' 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-28T11:54:45.917

`'`只是另一个标识符字符，就像任何其他字符一样。`foldl'`是一个完全独立的函数`foldl`；它也可以称为`strictFold`. 之所以这样称呼它是因为它与`foldl`: 它`foldl`是在每一步都对累加器进行评估的地方，因此不会产生大的 thunk。例如，`foldl (+) 0`将溢出一个大列表上的堆栈，但`foldl' (+) 0`不会。

通常，a 的后缀`'`意味着以下三件事之一：`foo'`要么是为定义 而制定的辅助定义， （即，，，并且可以是初始状态和两个更新版本）`foo`的修改版本，或者是严格的的版本。`foo``state``state'``state''``foo`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T11:58:09.143

什么都没有，至少在这种情况下没有，因为撇号是一个有效的标识符字符（有关更多详细信息，请参阅[此答案。）](https://stackoverflow.com/questions/5673916/apostrophe-in-identifiers-in-haskell#5673954)

标准库中的一个约定是，某些函数的严格版本与标准（惰性）版本通过撇号区分开来，例如`foldl'`(strict) 和`foldl`(lazy)。这与撇号的特殊性无关，这只是一个约定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T11:56:20.913

在 Haskell 中，它只是区分标识符的另一个字符，然后调用标识符`fold prime`，但它的常用方式与[数学中使用](http://en.wikipedia.org/wiki/Prime_%28symbol%29#Use_in_mathematics.2C_statistics.2C_and_science)的方式相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T02:44:06.373

有一个 hackage 模块（我忘了是哪个），其中包含某种成员资格测试（或其他谓词）。测试函数称为“is”：

```
foo x | x `is` whatever = ... 
```

为方便起见，还提供了函数的布尔否定：

```
bar x | x `isn't` whatever = ... 
```

当我第一次看到它时，我觉得它很有趣。撇号只是标识符中的另一个字符。

# php - 在thickBox插件中删除iframe的滚动

> ID：10363209
> 
> 赞同：0
> 
> 时间：2012-04-28T11:52:15.310
> 
> 标签：php, jquery, scroll, thickbox

我正在使用thickbox [http://jquery.com/demo/thickbox/](http://jquery.com/demo/thickbox/)

我`body`对所有页面都使用 css

```
body {
    width: 960px
    margin: 0 auto;
} 
```

我有两页`master.php`和`sub.php`

## 大师.php

```
<a href="sub.php?keepThis=true&height=550&width=900" title="Test title" class="thickbox">Open</a> 
```

## 子.php

我有一些内容 init，在这我有`css` `body`应用在这里。

所以，当我点击时`Open`，thickbox iframe 非常好。但我不需要水平和垂直的卷轴

通过增加`width`in`<anchor>`元素，我没有水平滚动，现在我希望在`height`不滚动该`iframe`弹出窗口的情况下修复

我已经测试了一些调整，但它不工作。

我在下面添加了一张图片。以便您更好地理解它

![在此处输入图像描述](../Images/4ea10e0e5fc29252e77ca812df9c00e9.png)

![在此处输入图像描述](../Images/252f0efb38d279daedc783270e2cca19.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:00:00.880

尝试添加`overflow:hidden;`到您的 CSS 代码。

# c++ - 为什么我们不能使用 &(*a) 但可以使用 typedef 来实现？

> ID：10363210
> 
> 赞同：0
> 
> 时间：2012-04-28T11:52:17.387
> 
> 标签：c++

我是 C++ 的新手，我想了解以下示例之间的区别。

我们无法创建函数

```
void someFunc(int &*a){
    int *b=new int; //just for example
    a=b;
} 
```

但使用 typedef

```
typedef int* pint;

void someFunc(pint &a){
    int *b=new int; //just for example
    a=b;
} 
```

一切正常。

它只是一个编译器技巧，还是这种行为的原因更复杂？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T11:55:08.647

`pint& a`等于`int*& a`，不是`int&* a`。C++ 中不能有指针引用类型，但可以有指针引用类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:56:35.603

这是引用和指针的顺序。在你的第一个例子中

```
int &*a 
```

这是一个指向不允许的引用的指针。在第二个是

```
int *&a 
```

这是对允许的指针的引用。

# python - (python) BeautifulSoup 语法，检索第一段

> ID：10363213
> 
> 赞同：0
> 
> 时间：2012-04-28T11:52:38.337
> 
> 标签：python, parsing, syntax, beautifulsoup

尝试以下代码对我来说似乎并没有按计划完成： from beautifulsoup import BeautifulSoup

```
definition = """From encyclopedia:\n<i></i><p>Infobox Country<br>fullcountryname=Thailand  &#x0E23;&#x0E32;&#x0E0A;&#x0E2D;&#x0E32;&#x0E13;&#x0E32;&#x0E08;&#x0E31;&#x0E01;&#x0E23;&#x0E44;&#x0E17;&#x0E22;Raja-anachakra Thai <br>image_flag= Flag of Thailand.svg <br>image_coa= Coat of arms of Thailand.png <br>image_location= LocationThailand.png <br>nationalmotto= none <br>nationalsong= Phleng Chat <br>nationalflower= n/a <br>nationalanimal= n/a <br>officiallanguages= Thai (<r><i>Thai language</i></r>) <br>populationtotal= 65,444,371 <br>populationrank= 19 <br>populationdensity= 127 <br>countrycapital= <r>Bangkok</r> <br>countrylargestcity= <r>Bangkok</r> <br>areatotal= 514,000 <br>arearank= 49 <br>areawater= n/a <br>areawaterpercent= 0.4 <br>establishedin= <r>April 7</r>, <r>1782</r> <br>leadertitlename=    <br>currency= <r>Baht</r> <br>utcoffset= +7 <br>dialingcode= 66 <br>internettld= .th<p><b>Thailand</b> is a <r>country</r> in Southeast <r>Asia</r>.  Its edges touch <r>Laos</r>, <r>Cambodia</r>, <r>Malaysia</r>, and <r>Myanmar</r> (which is also called Burma.) Thailand was called Siam until 1949."""

print BeautifulSoup(definition).find('p[1]').text 
```

这不会返回任何东西。我确定这是我使用 BeautifulSoup 的语法错误，有没有人知道我怎么能简单地得到：

```
Infobox Country
fullcountryname=Thailand Raja-anachakra Thai 
image_flag= Flag of Thailand. svg 
image_coa= Coat of arms of Thailand. png 
image_location= LocationThailand. png 
nationalmotto= none 
nationalsong= Phleng Chat 
nationalflower= n/a 
nationalanimal= n/a 
officiallanguages= Thai (Thai language) 
populationtotal= 65,444,371 
populationrank= 19 
populationdensity= 127 
countrycapital= Bangkok 
countrylargestcity= Bangkok 
areatotal= 514,000 
arearank= 49 
areawater= n/a 
areawaterpercent= 0\. 4 
establishedin= April 7, 1782 
leadertitlename=  
currency= Baht 
utcoffset= +7 
dialingcode= 66 
internettld= . th 
```

谢谢 ：）

编辑：如果我能得到单词“Infobox”和最后一个之间的文本，我实际上更愿意

标签，以便我可以使用脚本来解析实时维基百科页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T11:55:42.110

[`find()`](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#find%28name,%20attrs,%20recursive,%20text,%20%2a%2akwargs%29)只匹配第一个元素，所以只需使用`find('p')`.

```
>>>print BeautifulSoup(definition).find('p').text
Infobox Countryfullcountryname=Thailand  &#x0E23;&#x0E32;&#x0E0A;&#x0E2D;&#x0E32;&#x0E13;&#x0E32;&#x0E08;&#x0E31;&#x0E01;&#x0E23;&#x0E44;&#x0E17;&#x0E22;Raja-anachakra Thaiimage_flag= Flag of Thailand.svgimage_coa= Coat of arms of Thailand.pngimage_location= LocationThailand.pngnationalmotto= nonenationalsong= Phleng Chatnationalflower= n/anationalanimal= n/aofficiallanguages= Thai (Thai language)populationtotal= 65,444,371populationrank= 19populationdensity= 127countrycapital=Bangkokcountrylargestcity=Bangkokareatotal= 514,000arearank= 49areawater= n/aareawaterpercent= 0.4establishedin=April 7,1782leadertitlename=currency=Bahtutcoffset= +7dialingcode= 66internettld= .th 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:59:03.657

您正在使用 Beautiful Soup 不支持的 XPath 语法。Lattyware 的回答是正确的。至于您编辑中的问题，您可以使用 Beautiful Soup 4 的[.stripped_strings 生成器](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)来获得您想要的大致内容。一些示例代码：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(definition)

import re
infobox_start = re.compile("^Infobox") 

start_at = soup.find(text=infobox_start)
for string in start_at.parent.stripped_strings:
    print string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:48:56.013

如果它是您正在寻找的信息框，您可能会发现[DBpedia](http://en.wikipedia.org/wiki/DBpedia)为您提供了强大的程序化和更稳定的数据访问。当然，Wikipedia API 和[python wikitools](http://code.google.com/p/python-wikitools/)也提供了这个。

这两种解决方案都有一个学习曲线，但可能比抓取更稳定和尊重网站。

# ruby - 为什么我会收到 SystemStackError？

> ID：10363214
> 
> 赞同：0
> 
> 时间：2012-04-28T11:52:39.667
> 
> 标签：ruby

```
module CallableDict
  def method_missing method
    puts x["#{method}"]
  end
end 
```

上面的代码是我的模块，它使哈希键可调用。当我运行它时...

```
require 'callabledict'
x = {"foo" => "ruby"}
x.extend CallableDict
x.foo 
```

我得到以下...

```
SystemStackError: stack level too deep
    from /Users/Solomon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/workspace.rb:80
Maybe IRB bug! 
```

为什么？我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:08:24.130

实际上`x`是 a`self`所以你可以像这样重写它：

```
module CallableDict
  def method_missing method
    puts self["#{method}"]
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:57:18.813

在 的实现中`method_missing`，`x`被视为方法名称，因为 Ruby 没有将其视为`x`正确范围内的变量。当解释器看到`x["#{method}"]`时，它认为您正在索引一个散列或其他从一个名为 的方法返回的对象`x`。因为没有方法被调用`x`，Ruby 调用 your `method_missing`，它再次调用自己，重复这个过程，直到 Ruby 遇到堆栈溢出。

修复很简单。正如上面@nash 所说，您必须替换`x`为`self`，因为在 中`method_missing`，*名称* `x`没有意义，但*名称* `self`是相同的引用（在 C 术语中，它们是相同的指针）。此外，您可以通过在以下实现中执行此操作来使代码更具可读性`method_missing`：

```
puts self[method.to_s] 
```

# php - 为什么这个php函数会泄漏内存

> ID：10363216
> 
> 赞同：2
> 
> 时间：2012-04-28T11:53:06.907
> 
> 标签：php, php-5.3

我在 PHP 中有一个长时间运行的操作，它总是因内存不足而崩溃。

所以我开始记录内存使用情况：

```
 $result = memory_get_usage() / 1024;
        echo $result; 
```

通过注释部分代码，我找到了“有罪”的代码，负责吃掉我所有的 ram。

这是代码：

```
 static private function from_camel_case($str)
        {
            $str[0] = strtolower($str[0]);
            $func = create_function('$c', 'return "_" . strtolower($c[1]);');
            $result = preg_replace_callback('/([A-Z])/', $func, $str);
            return $result;
        } 
```

它基本上将驼峰式的文本转换为带下划线的小写。

为什么会这样泄漏？

我在 Mac OS X Lion 上的 MAMP 中运行 PHP 5.3.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T12:02:03.963

[因为每次该函数运行时](https://bugs.php.net/bug.php?id=6333)您都在创建一个新函数。

由于您使用的是 5.3，因此您可以`create_function`用匿名函数替换，看看是否有帮助：

```
 static private function from_camel_case($str)
    {
        $str[0] = strtolower($str[0]);
        $result = preg_replace_callback('/([A-Z])/', function($matches) {
          return '_' . strtolower($matches[1]);
        }, $str);
        return $result;
    } 
```

或者将回调提取到普通函数中：

```
 static private function from_camel_case($str)
    {
        $str[0] = strtolower($str[0]);
        $result = preg_replace_callback('/([A-Z])/', array(__CLASS__, 'replace_case'), $str);
        return $result;
    }

    static private function replace_case($matches) {
      return '_' . strtolower($matches[1]);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T11:56:50.177

如果您一遍又一遍地调用该代码，问题就出在这一行：

`$func = create_function('$c', 'return "_" . strtolower($c[1]);');`

每次调用该代码时，它都会创建一个新的匿名函数。根据[http://www.php.net/create_function](http://www.php.net/create_function)将代码放入全局命名空间，因此方法完成时不会删除该函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T11:57:22.297

`create_function`您每次调用它时都会使用它来创建一个函数。PHP 中的函数始终是全局的，这意味着它会一直存在到脚本结束。这就是为什么每次调用它时，它都会分配一些内存并且永远不会释放它。

你应该只创建一次函数，或者我相信你可以使用回调重写整个事情来摆脱内存泄漏。

# mediawiki - 什么被转储到 {{ns:6}} 中？

> ID：10363218
> 
> 赞同：0
> 
> 时间：2012-04-28T11:53:16.580
> 
> 标签：mediawiki

我知道`File:`& `Image:`已完全合并`{{ns:6}}`，这是否也吸收`Media:`了或仍然有单独的目的？我正在努力概括所有一个 wiki`MediaWiki:`和`Template:`页面以导入新的姊妹 wiki，并希望在导出之前尽可能多地使用[AWB进行概括。](http://en.wikipedia.org/wiki/Wikipedia%3aAutoWikiBowser)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:08:07.797

请参阅英文 Wikipedia 上[*Wikipedia:Namespace*](http://en.wikipedia.org/wiki/Wikipedia%3aMedia_namespace#Virtual_namespaces)[页面](http://en.wikipedia.org/wiki/Wikipedia%3aMedia_namespace#Virtual_namespaces)[的*Virtual namespaces*部分](http://en.wikipedia.org/wiki/Wikipedia%3aMedia_namespace#Virtual_namespaces)*。*

 *基本上，`Media:`命名空间实际上并不存在，它只是用于链接。*

# html - 差距 和 在 IE7 中

> ID：10363219
> 
> 赞同：1
> 
> 时间：2012-04-28T11:53:20.663
> 
> 标签：html, css

我无法诊断是什么导致我的页面部分出现空白。我搜索了 SO 和 Google，但找不到任何有用的文章。我有一个容器，其中包含一个标题、一个无序列表和一个带有信息的 div。问题是 div 和 ul 之间出现了间隙。我希望 div 直接在 ul 下，没有空格。一个例子可以在这里看到：http: [//jsfiddle.net/aAfU5/1/](http://jsfiddle.net/aAfU5/1/)（记住IE7）

HTML

```
<div id="center-panel">
  <h1>Information</h1>
    <ul class="clearfix">
      <li class="bg1 border2">Regulation</li>
      <li class="bg1 border2">Compliance</li>
      <li class="bg1 border2">Resources</li>
    </ul>
    <div id="information-panel" class="border2">
      This is where the content goes
    </div>
  </div> 
```

CSS：

```
 #center-panel {
        height: 300px;
        float: left;
        width: 78%;
        padding: 5px;
    }

    #center-panel ul {
        padding: 0px;
        margin: 0px;
    }

    #center-panel li {
        color: white;
        /*display:inline-block;*/
        /*display:inline;*/
        float: left;
        font-weight: bold;
        list-style-type: none;
        margin: 0px 2px;
        padding: 3px;
        width: 100px;
    }

    #information-panel {
        clear: both;
        margin: 0px 2px;
    }

    h1 {
        margin: 0 0 10px 0;
        padding: 0;
        font-size: 120%;
        color: #01305E;
    }

    .bg1 {
        background: #3C698E;
    }

    .border2 {
        border: 1px solid #01305E;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:03:47.303

在 ul 下“溢出”的是您的 H1 保证金。用填充替换它：

```
h1 {
  margin: 0;
  padding: 0px 0px 10px 0px;
  font-size: 120%;
  color: #01305E;
} 
```

您还可以添加缩放以触发 haslayout

```
#center-panel ul {
  padding: 0px;
  margin: 0px;
  zoom:1;
 } 
```

# iis - 用于 IIS 平滑流式传输的公共直播流示例

> ID：10363221
> 
> 赞同：3
> 
> 时间：2012-04-28T11:53:33.460
> 
> 标签：iis, live, live-streaming, smooth-streaming

我对`IsLive=true`IIS 平滑流格式的公开可用的实时流（在清单文件中）感兴趣。内容无所谓。如果它正确支持实时流，我想测试一些软件。我在哪里可以获得这样的流？

安装和配置我自己的网络服务器 (IIS) 实例不是一个选项，我需要一个公开的可用直播流。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T18:30:43.877

尝试以下两个来源：

*   [http://demo.anevia.com:3128/live/disk1/live1/ss-ss/manifest](http://demo.anevia.com:3128/live/disk1/live1/ss-ss/manifest)，或
*   [http://demo.anevia.com:3128/live/disk1/live2/ss-ss/manifest](http://demo.anevia.com:3128/live/disk1/live2/ss-ss/manifest)

# html - 如何根据菜单中的项目数根据需要动态拥有更多列？

> ID：10363224
> 
> 赞同：0
> 
> 时间：2012-04-28T11:53:49.053
> 
> 标签：html, wordpress, css

我在 wp 中有一个动态的两级 UL LI 下拉菜单。实际上，它目前是一个两列菜单，并且行是根据子 li 元素的要求来的。在某些 LI 上，子元素有很多项目，我想以某种方式控制它只有 5 行，如果超过 5 行，那么我希望它有更多的列来容纳菜单中的所有项目。

目前它是一个浮动的 li 元素，在支持两列的固定宽度 UL 中具有固定宽度。

因此，我希望它根据需要具有 2/3/4 或 5 列，但行应始终为 5。

它是一个动态菜单，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:55:16.450

一种解决方案是使用 php [array_chunk](http://php.net/manual/en/function.array-chunk.php)函数将子项分成 5 个组，然后将不同列中的每个组呈现为单独的列表。

```
<?php
$items = array(1,2,3,4,5,56,6,63,7,8,9,876,5,4,436,23,57,575,4734,62);
$chunks = array_chunk($items, 5);       
foreach($chunks as $chunk) {
  $col = "<ul>";
  foreach($chunk as $value) {
    $col .= '<li>'.$value.'</li>';  
  }
  $col .= "</ul>";
  echo $col;
} 
```

# javascript - Javascript - 创建数组索引和访问

> ID：10363226
> 
> 赞同：1
> 
> 时间：2012-04-28T11:54:09.077
> 
> 标签：javascript, arrays, indexing

我正在寻找使用索引的时间戳创建一个简单的数组，以便我可以通过时间戳访问值而无需遍历数组，但是我很挣扎！

我需要能够为每一行设置 2 个值。

例如：

```
var myarray = [];
var test1 = 'hello'
var test2 = 'world'

myarray[timestamp] = [test1, test2]; 
```

那么对于给定的时间戳，例如 12345678，我如何访问 test2 的值？

感谢任何想法和建议。

问候，本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T11:56:03.550

如果你以这种方式使用数组，你最终会得到一个包含大量`undefined`值的数组：

```
var myarr = [];
myarr[1000] = 'hello';
console.log(myarr.length); //=> 1001 
console.log(myarr[0]); //=> undefined
console.log(myarr[999]); //=> undefined 
```

因此，您可能希望为此使用一个对象并使用某种排序。例如

```
var myobj = {}, timestamp = new Date().getTime();
myobj[timestamp] =   ['hello','world'];
myobj[timestamp+1] = 'how are we today?';

function retrieveSorted(obj){
  var keys = Object.keys(obj).sort(), key, ret = [];
  while(key = keys.shift()){
    ret.push(obj[key]);
  }
  return ret;
}

var sorted = retrieveSorted(myobj); 
   //=> [["hello", "world"], "how are we today?"]
myobj[timestamp][1]; //=> world 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:56:24.990

```
myarray[timestamp][1] 
```

1 是内部数组中的第二个索引。索引从 0 开始。

# javascript - 删除标记后如何删除信息窗口？

> ID：10363232
> 
> 赞同：6
> 
> 时间：2012-04-28T11:55:28.603
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我有一个 Google Maps div 和复选框列表，用于过滤地图上的标记。

但是，如果我单击标记，打开`InfoWindow`，然后单击复选框以删除该类型的标记，`InfoWindow`则不会从地图中删除。

删除标记后，我调用此代码，但`InfoWindow`保持不变：

```
try {
    if( infowindow ) {
          infowindow.close();
    }
}
catch(err) { } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T22:19:22.177

我建议`Marker`您通过添加类似于以下示例的代码来更改创建打开 InfoWindow 的单击侦听器的代码：

```
google.maps.event.addListener( marker, "click", function() {
    var bubble = new google.maps.InfoWindow({
        content: buildBubbleContent( param1, param2 )
    });
    bubble.open( map, marker );
    //pretty standard stuff to here, but the next line is new (for me):
    google.maps.event.addListenerOnce( marker, "visible_changed", function() {
        bubble.close();
    });
}); 
```

正如问题中所讨论的：[当相关的标记被隐藏时，如何清理信息窗口？](https://stackoverflow.com/q/10346001/1314132)：

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T11:59:07.590

```
function closeInfoWindow() {
        if (infoWindow !== null) {
            google.maps.event.clearInstanceListeners(infoWindow);  // just in case handlers continue to stick around
            infoWindow.close();
            infoWindow = null;
        }
    } 
```

# python - 更改范围元素的字体大小

> ID：10363243
> 
> 赞同：0
> 
> 时间：2012-04-28T11:56:24.470
> 
> 标签：python, ms-word, com

我有以下 Python 代码，它应该更改 Microsoft Word 文档特定范围的字体：

```
word = client.Dispatch("Word.Application")
word.Visible = 0
word.DisplayAlerts = 0
doc = word.Documents.Open("d:/test2.docx")
par = doc.Paragraphs    
par(1).Range.InsertParagraphAfter()
rng = par(2).Range    
rng.Text = u"works just fine"
rng.Font.Size = 30
rng.Font.Name = "Georgia" 
```

当分配给的字符串`rng.Text`是英语时它工作正常，但当它是波斯语时，例如`rng.Text=u"سلام"`，或希伯来语`rng.Text=u"אקדיא"`，字体设置不应用并且没有效果。不知道是不是编码问题。当字符串不是英文时，我可以如何设置字体设置的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:21:27.017

Georgia 不是 unicode 字体；它没有您要使用的字符，因此无法应用字体设置。尝试使用支持 unicode 的字体（我相信 Tahoma 和 Lucida Sans 会这样做），看看是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:57:28.710

Font.Size 属性适用于从左到右的语言。对于从右到左的语言，例如波斯语或希伯来语，MS Word VBA 提供了一个特殊的 SizeBi 属性。所以，在你的代码中，而不是

```
rng.Font.Size = 30 
```

写

```
rng.Font.SizeBi = 30 
```

# php - 使用数字时的 IF ELSE 条件

> ID：10363247
> 
> 赞同：0
> 
> 时间：2012-04-28T11:56:37.170
> 
> 标签：php, if-statement, resolution, screen-resolution

有一个我的大脑我解决不了的问题，即if-else条件的创建：960x540是我们获得值“1”的值，所有小于这个的值（例如800x480）再次获取值“1”，类似情况540x960（480x800等以递减数字较小的顺序），如果960x540的数字的值从一侧增加（例如1000x540或960x600），则在中给“2”一个变量而不是“1”......我希望我已经清楚地描述了这个问题。有人建议我将例如 960x540 和一个整体值相乘，使其更易于使用。但问题在于我使用手机的屏幕分辨率工作，不适合因为我们忘记了分辨率低的桌面，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:07:16.850

我会尝试更清楚地解释您的要求。（我没有编辑你的问题，因为我不确定我是否做对了）

*   960x540 => 1

较小的值 => 1

*   800x480

更大的值（每个维度）=> 2

*   1000x540
*   960x600

您必须同时查看 x 和 y 分辨率并确定结果。不要试图检查特定的分辨率，因为这会得到一个非常复杂的情况。

*   提取 x 和 y（宽度和高度）。
*   分别测试它们。

您的 if 语句应如下所示：

```
if ($x > 960 || $y > 540)
    $result = 2;
else
    $result = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:22:16.377

您可能对以下数学感兴趣：

通过传递视频的宽度，您可以获得高度的比率 (4:3)：

`$height = round(floor($width/1.330),-1);` 您可以将 (16:9) 的 1.330 更改为 1.770

循环并添加 160 的示例：

```
$i=160;
while($i<=1024){
    $height = round(floor($i/1.330),-1);
    $ratios[]=array('width'=>$i,'height'=>$height);
    $i=($i+160);
}
print_r($ratios);

/*
Array
(
    [0] => Array
        (
            [width] => 160
            [height] => 120
        )

    [1] => Array
        (
            [width] => 320
            [height] => 240
        )

    [2] => Array
        (
            [width] => 480
            [height] => 360
        )

    [3] => Array
        (
            [width] => 640
            [height] => 480
        )

    [4] => Array
        (
            [width] => 800
            [height] => 600
        )

    [5] => Array
        (
            [width] => 960
            [height] => 720
        )

)
*/ 
```

希望它有一些兴趣。

# c# - Windows 窗体加载然后退出

> ID：10363253
> 
> 赞同：4
> 
> 时间：2012-04-28T11:56:56.653
> 
> 标签：c#, winforms, wcf

我正在为一家超市创建一个结帐系统。它由结帐、服务器和 MIS 程序组成，并在它们之间运行 WCF 服务。我遇到的问题是结帐程序，它是一个 Windows 窗体，在它的 application_load 方法中做了一些必要的事情，然后就退出了。

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using CheckoutLibrary;
using Checkout.ServerLibraryService;
using Checkout.MarketService;

namespace Checkout
{
    public partial class theForm : Form
    {
        private static int checkoutID = 3;
        private Product[] allProducts;

        public theForm()
        {
            InitializeComponent();
        }

        private void theForm_Load(object sender, EventArgs e)
        {
            // First cache all products
            SupermarketServiceSoapClient marketService = new SupermarketServiceSoapClient();
            allProducts = marketService.GetAllProducts();
            // Load the service provided by the server
            ServiceClient serverService = new ServiceClient();
            // Load the event handlers for the bar code scanner
            BarcodeScanner scanner = new BarcodeScanner();
            scanner.ItemScanned += new BarcodeScanner.ItemScannedHandler(scanner_ItemScanned);
            scanner.AllItemsScanned += new BarcodeScanner.AllItemsScannedHandler(scanner_AllItemsScanned);
            scanner.Start(checkoutID);
        }

        void scanner_AllItemsScanned(EventArgs args)
        {
            throw new NotImplementedException();
        }

        void scanner_ItemScanned(ScanEventArgs args)
        {
            itemTextBox.Text = "Scanned " + GetItemName(args.Barcode);
        }

        private void scanItemButton_Click(object sender, EventArgs e)
        {
            scanner_ItemScanned(new ScanEventArgs(GetRandBarcode()));
        }

        // A barcode -> product name look up method
        public string GetItemName(int barcode)
        {
            return allProducts[barcode].Description + " @ " + allProducts[barcode].Price;
        }

        // Method to grab a random barcode for simulation
        private int GetRandBarcode()
        {
            Random rand = new Random();
            return rand.Next(0,500);
        }
    }
} 
```

和program.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace Checkout
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new theForm());
        }
    }
} 
```

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T12:00:54.040

在 WinForms 中，如果您的 form_load 抛出异常，它将退出而不显示任何内容。烦人，但我猜这就是问题所在。

您可以尝试 a `try/catch`，或者您可以点击`CTRL+ALT+E`并检查`Thrown Column`for`Common Language Runtime Exceptions`以查看错误。

更新：

根据评论，这是在另一个线程上执行某些操作的示例方法。

```
ThreadStart ts = new ThreadStart(() => {
   try {
       scanner.Start(checkoutID);
   } catch {
       // Log error
   }
});
Thread t = new Thread(ts);
t.Start(); 
```

# javascript - javascript四舍五入

> ID：10363259
> 
> 赞同：-1
> 
> 时间：2012-04-28T11:57:34.263
> 
> 标签：javascript

我想四舍五入`TheCount / 5`到下一个最高整数。什么时候`TheCount = 12`

我试过：

```
Math.round(TheCount / 5); 
```

但它返回 2，我需要它返回 3。

四舍五入到下一个最高整数如何工作？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:59:18.037

ceil 函数向上取整。

```
Math.ceil( TheCount / 5 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:59:02.073

使用[`Math.ceil`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/ceil).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T11:59:02.440

可以使用[Math.ceil进行四舍五入](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/ceil)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T11:59:22.767

我想[`Math.ceil`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/ceil)这就是你想要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T12:00:10.817

而不是 Math.round 你想要 Math.ceil

所以你想要

var 结果 = Math.ceil(TheCount / 5);

希望有帮助！

# java - 如何通过单击事件处理 jsp taglib？

> ID：10363260
> 
> 赞同：0
> 
> 时间：2012-04-28T11:57:36.810
> 
> 标签：java, onclick, taglib

我有一个带有一个文本输入和提交按钮的表单我希望在单击提交按钮时运行我的 taglib 我的 taglib 将文本框值保存在数据库中

我写了下面的代码但没有运行：

```
<form action="some page">

<input type="text" name="t1">
<input type="submit" oncick="<mytaglibName1: mytaglibNmae2> >

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:11:42.183

如果我正确理解了这个问题，您不希望 JSP 标记存储值，您希望将表单返回到 Servlet，然后在其中进行数据库存储......

```
<form action="servlets/StoreValue">

<input type="text" name="t1">
<input type="submit">

</form> 
```

然后在您的 Servlet 中进行数据库存储。当您的 JSP 页面返回给 Web 浏览器时，它不包含任何 JSP 标签，浏览器看到的都是 HTML，您必须将表单提交回 Web 服务器进行处理。

我可能完全误解了在这种情况下我道歉的问题。

# java - 如何在 JTextField 中显示视频文件的当前播放时间？

> ID：10363265
> 
> 赞同：-2
> 
> 时间：2012-04-28T11:57:52.940
> 
> 标签：java, swing, media-player, jtextfield

我计算视频当前播放时间的时间：

```
public show_time_of_vedio_file(MediaPanel mediaPanel,JFrame_of_subtitle frame)
{

   //      for(;;)
            {
            double second=mediaPanel.mediaPlayer.getMediaTime().getSeconds();

            int second1=(int) second;
            int hour=second1/3600;
            second1=second1-hour*3600;
            int minute=second1/60;
            second1=second1-minute*60;
            double milisecond=(second-(int)second)*1000;
            int milisecond_1=(int) milisecond;
            String milisecond_string=String.valueOf(milisecond_1);
            String hour_string=String.valueOf(hour);
            String minute_string=String.valueOf(minute);
            String second_string=String.valueOf(second1);
            if(hour_string.length()==1)
                hour_string="0".concat(hour_string);
            if(minute_string.length()==1)
                minute_string="0".concat(minute_string);
            if(second_string.length()==1)
                second_string="0".concat(second_string);
            if(milisecond_string.length()==2)
                milisecond_string="0".concat(milisecond_string);
            else if(milisecond_string.length()==1)
                milisecond_string="0".concat("0".concat(milisecond_string));

            frame.show_time_jTextField.setText(String.format("%s:%s:%s,%s", hour_string,minute_string,second_string,milisecond_string));
        }
} 
```

现在我想`JTextField`在视频播放和视频不播放时一直显示这个时间`00:00:00,000`。

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T12:25:32.860

> `JTextField`..想在..中显示这个时间

改为使用 a [`JProgressBar`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html)。例如

![JProgressBar](../Images/d1d221b9691069a5a0fbdcaabfdecd02.png)

有关更多详细信息，请参阅[如何使用进度条](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)。

> ..不玩我想展示`00:00:00,000`。

请参阅[JProgressBar.setString(String)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html#setString%28java.lang.String%29)。此 GUI 右上角的进度条显示使用了更“媒体友好”的字符串。

![杜克盒子](../Images/b58e3c2b44e30ced957a602d162fe2a8.png)

# ios - NSJSONSerialization - 如何正确地将 JSON 转换为 NSArray？

> ID：10363274
> 
> 赞同：1
> 
> 时间：2012-04-28T11:58:58.790
> 
> 标签：ios, json, nsjsonserialization

我遇到了以下问题：我想将我的 iPhone-App 与服务器上的数据库连接起来。因此，我使用一些（简单的）.php 文件来管理对数据库的访问。插入新数据已经可以了，但是将获取的数据转换为 NSMutableArray 时遇到了一些麻烦：

```
NSURL *contentURL = [NSURL URLWithString:[kHOSTURL stringByAppendingString:kGETBarsURL]];
NSLog(@"URL : %@", contentURL);

NSData *contentData = [NSData dataWithContentsOfURL:contentURL];
NSLog(@"Data : %@", contentData);

NSError *e = nil;
NSMutableArray *jsonArray = [NSJSONSerialization JSONObjectWithData:contentData
                                                            options:kNilOptions
                                                              error:&e];
NSLog(@"JSON : %@", jsonArray);
NSLog(@"Error : %@", e); 
```

输出是这样的（我 'XX' 和缩短的 'Data :'）：

```
2012-04-28 13:49:37.229 XX[14434:f803] URL : http://xx/getBars.php
2012-04-28 13:49:37.389 XX[14434:f803] Data : <5b7b2275 6e697175 65223a22 34222c22 4e616d65 223a2254 65737422 2c224465 7461696c 73223a22 54686973 49734154 65737422 7d2c7b22 ...>
2012-04-28 13:49:37.390 XX[14434:f803] JSON : (null)
2012-04-28 13:49:37.392 XX[14434:f803] Error : Error Domain=NSCocoaErrorDomain Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" (Garbage at end.) UserInfo=0x6daa610 {NSDebugDescription=Garbage at end.} 
```

如果我在浏览器中打开页面，它看起来像这样：

```
[{"unique":"4","Name":"Test","Details":"ThisIsATest"},
 {"unique":"5","Name":"Test","Details":"ThisIsATest"},
 {"unique":"6","Name":"Test","Details":"ThisIsATest"},
 {"unique":"7","Name":"Test","Details":"ThisIsATest"},
 {"unique":"8","Name":"Test","Details":"ThisIsATest"},
 {"unique":"9","Name":"Test","Details":"ThisIsATest"},
 {"unique":"10","Name":"Test","Details":"ThisIsATest"}] 
```

我也尝试过 NSJSONSerialization 中的其他选项，但是没有用 :( 有人可以帮我吗？

```
2012-04-28 14:18:30.192 XX[14541:f803] Encoding : [{"unique":"4","Name":"Test","Details":"ThisIsATest"},{"unique":"5","Name":"Test","Details":"ThisIsATest"},{"unique":"6","Name":"Test","Details":"ThisIsATest"},{"unique":"7","Name":"Test","Details":"ThisIsATest"},{"unique":"8","Name":"Test","Details":"ThisIsATest"},{"unique":"9","Name":"Test","Details":"ThisIsATest"},{"unique":"10","Name":"Test","Details":"ThisIsATest"}]
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16106315-6']);
  _gaq.push(['_setDomainName', '.xx.de']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript';
ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:08:59.647

很明显，你最后确实有“垃圾”。您有一个 JavaScript 块，虽然在浏览器中不可见，但它仍然从您的 php 脚本返回。删除它，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T16:15:14.563

我最近遇到了同样的问题，差不多一个小时后，我发现这是我发送请求的 URL 的问题。检查 URL 以查看它是否确实响应 JSON 数据。祝你好运！;

# html - 在这里，我希望底部部分的高度为 100%，并且我不想超过我在“.main”类中固定的 400px 高度

> ID：10363284
> 
> 赞同：0
> 
> 时间：2012-04-28T11:59:34.947
> 
> 标签：html, css

![在此处输入图像描述](../Images/81e34b363cd7136405dde0a0853ffba3.png)我在设计底部部分遇到了 100% 高度的问题。在这里，我希望底部部分的高度为 100%，并且我不想超过我在“.main”类中固定的 400px 高度。而且我不想移动顶部的高度。我一直只想要底部 100%。

你可以在这里查看：http: [//jsfiddle.net/jZTr2/2/](http://jsfiddle.net/jZTr2/2/)

我不想移动顶部蓝色突出显示的部分。我想要 100% 高度的底部聊天部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:51:12.643

我希望它会奏效。 [http://jsfiddle.net/jZTr2/10/](http://jsfiddle.net/jZTr2/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:55:18.670

给你：http: [//jsfiddle.net/jZTr2/12/](http://jsfiddle.net/jZTr2/12/)

秘密是`display:table`和`display:table-row`。请注意，您可能需要为您的实现稍微自定义宽度。

# haskell - 多个模块的通用接口

> ID：10363291
> 
> 赞同：3
> 
> 时间：2012-04-28T12:00:36.193
> 
> 标签：haskell

我想让用户能够先运行程序，`import DryRun`然后`import Do`如果他认为一切都是正确的。
所以有一个模块可以实际工作：

```
doThis ∷ SomeStack ()
doThis = actuallyDoThis
...
doThat ∷ SomeStack ()
doThat = actuallyDoThat 
```

和害羞用户的模块：

```
doThis ∷ SomeStack ()
doThis = liftIO $ putStrLn "DoThis"
...
doThat ∷ SomeStack ()
doThat = liftIO $ puStrlLn "DoThat" 
```

问题是我不能确定接口`Do`和接口`DryRun`是相同的（编译器无能为力），而且这种混乱在开发过程中很难维护。
有没有常见的成语来解决这类问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:01:46.760

您可以具体化有问题的模块。也就是说，在基本模块中定义一个数据类型：

```
module Base where
data MyModule = MyModule {
    doThis_ :: SomeStack (),
    doThat_ :: SomeStack ()
} 
```

与您需要每个模块导出的东西（下划线的原因很快就会变得明显）。

然后你可以在每个模块中定义这种类型的值，例如：

```
module DryRun(moduleImpl) where
import Base
moduleImpl :: MyModule
moduleImpl = MyModule doThis doThat
-- doThis and doThat defined as above, with liftIO . putStrLn

module Do(moduleImpl) where
import Base
moduleImpl :: MyModule
moduleImpl = MyModule doThis doThat
-- doThis and doThat defined as above, where the real work gets done 
```

我不`MyModule`使用记录语法构造值以确保如果`MyModule`发生更改，类型检查器将在大多数情况下开始抱怨。

在客户端模块中你可以做

```
module Client where
import DryRun
-- import Do -- uncomment as needed

doThis = doThis_ moduleImpl
doThat = doThat_ moduleImpl

-- do whatever you want here 
```

现在您知道两个模块都导出了相同的操作。当然，这既乏味又笨重，但由于 Haskell 没有一流的模块，您总是必须绕过模块系统的限制。好处是您只需要编写一次 Base 和 Client 模块，并且您可以开始定义对`MyModule`值进行操作的组合器。例如

```
doNothing = MyModule (return ()) (return ())
addTracing impl = MyModule ((liftIO $ putStrLn "DoThis") >> doThis_ impl) 
                           ((liftIO $ putStrLn "DoThat") >> doThat_ impl) 
```

如果我没记错的话，将允许您替换`DryRun`模块实现。`addTracing doNothing`

# matlab - Matlab fminsearch 卡在第一次迭代中

> ID：10363293
> 
> 赞同：0
> 
> 时间：2012-04-28T12:00:51.440
> 
> 标签：matlab, mathematical-optimization

我正在使用 fminsearch 方法对模拟机器人的行走进行优化。我所做的是创建一个函数（目标函数），将行走参数（fminsearch 的输入）写入文本文件，打开模拟器（在 webbots 中），将行走结果写入文本文件并自行关闭，然后然后目标返回该文本文件中的值。总而言之，目标函数得到一个 8x12 的腿位置矩阵，并返回一个标量，该标量指示步行的好坏。这是可行的，并且位置值确实会在每次迭代中发生变化，并且目标值确实得到了改善。但这是问题所在 - 我想在每次迭代中跟踪函数的值（最好通过绘图），当我这样做时，我在第一次迭代时只得到函数的值，我不明白为什么。

这是代码：

```
options= optimset( 'PlotFcns', @optimplotfval);
[position,fval] = fminsearch(@callWebots,pos_start,options); 
```

我也尝试显示结果，但发生了同样的问题（它只显示了第一次迭代）：

```
options= optimset(options, 'Display', 'iter-detailed'); 
```

我什至尝试编写一个输出函数来绘制 fval 并出现同样的问题。

如果您有任何想法为什么会这样，我将不胜感激

谢谢先进

这是目标函数：

```
function [objFun]=callWebots(pos)  
%Open Motion File
filePath= fullfile('C:\Users\student\Documents\Webots\worlds', 'motion_trot_opt.motion');
data=convertToData(pos,filePath);
fout=fopen(filePath,'w');

%Write Motion File
for row=1:size(data,1)
    for col=1:size(data,2)
        if(col>1)
             fprintf(fout, ',');
        end
        fprintf(fout, '%s', data{row,col});
     end
     fprintf(fout,'\n');
end
fclose(fout);

system('C:\Users\student\Documents\Webots\worlds\robot_full_withGPSLighter.wbt');

% Get result and return to main function
resfilePath= fullfile('C:\Users\student\Documents\Webots\worlds', 'result.txt');
fres=fopen(resfilePath);
result = textscan(fres, '%f');
fclose(fres);
objFun=cell2mat(result); 
```

以及对目标函数的调用：

```
function [position,fval]=optCall()
%Read Initial Motion File Into CELL
filePath= fullfile('C:\Users\student\Documents\Webots\worlds', 'motion_trot_opt.motion');
fin=fopen(filePath);

ii = 1;
while 1
    tline = fgetl(fin);
    if (tline == -1)
      break;
    end    
    SplitedRow(ii,:) = regexp(tline, ',', 'split');
    ii = ii+1;
end
fclose(fin);

%Convert from double to Data
[n,m] = size(SplitedRow);
pos_start = cellfun(@str2double,SplitedRow(2:end,3:end));

options= optimset( 'PlotFcns', @optimplotfval);
options= optimset(options, 'Display', 'iter-detailed');
[position,fval] = fminsearch(@callWebots,pos_start,options); 
```

# java - 如何正确显示孟加拉语文本

> ID：10363295
> 
> 赞同：10
> 
> 时间：2012-04-28T12:01:08.477
> 
> 标签：java, swing, fonts, jtextfield, jtextarea

我有一个`JTextArea`地方需要显示孟加拉语文本，例如：

> বাংলাদেশ

但我能看到的只是矩形框。如何正确显示孟加拉语字符？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T12:03:08.523

首先采用孟加拉 unicode 支持的字体，例如：

```
Font banglaFont=new Font("Arial Unicode MS", Font.BOLD,15); 
```

然后使用 setFont 将其附加到您的 JTextArea 对象

```
text1.setFont(banglaFont); 
```

现在您应该可以正确查看孟加拉语了，试一试。

**注意：** Java 使用系统中的字体，因此如果系统不包含特定字体，那么您可以使用 Font.createFont() 在应用程序中部署该字体。

# asp.net-mvc-3 - 多种语言的 MVC3 应用程序

> ID：10363304
> 
> 赞同：0
> 
> 时间：2012-04-28T12:02:40.927
> 
> 标签：asp.net-mvc-3, localization, resources, manifest

我想我需要一些关于 ASP.NET MVC3 中的一般本地化和全球化的指导。我什至不确定这两个是什么意思，如果真的需要两者。这就是我现在所拥有的。MVC3 应用程序，一个 Resources.resx 文件，我在其中保存我的字符串，在视图中我正在使用这些字符串，`@MyApplication.Web.Properties.Resources.MyString` 并且我在模型的数据注释中使用它们，因为`[Required(ErrorMessageResourceType = typeof(Resources), ErrorMessageResourceName = "RequiredField")]` 我现在在控制器中需要这些字符串。我在 MSDN 上找到了参考，并尝试将它们用作 `ResourceManager rm = new ResourceManager("Strings", Assembly.GetExecutingAssembly());`和`rm.GetString("InvalidFormData")`. 但像这样我得到： *找不到任何适合指定文化或中立文化的资源。确保“Strings.resources”在编译时被正确嵌入或链接到程序集“MyApplication.Web”中，或者所有需要的附属程序集都是可加载的并且是完全签名的。*

我想要的是一个可以托管在不同域上的不同语言的应用程序。我会创建多个 Resource.resx 文件。所以我不需要在一个部署中处理多种语言。我想手动为每个设置语言（我猜是在 web.config 中）。有人可以向我解释我缺少什么以及实现我的目标需要什么吗？或者，也许，如果您知道任何好的参考资料，请指给我看。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T21:22:05.507

我找到了做我想做的事的方法。再次提一下，我想手动设置应用程序的语言，而不考虑用户的浏览器文化。我只是想拥有适用于多种语言的相同代码，因为应用程序将托管在不同国家/地区的不同域中，使用它们自己的语言。解决方案是：在 Global.asax

```
 protected void Application_BeginRequest(object sender, EventArgs e)
  {
    Thread.CurrentThread.CurrentUICulture =
    CultureInfo.CreateSpecificCulture("myCulture");
  } 
```

在视图中：

```
@*MyApplication*.Web.Properties.Resources.*MyString* 
```

在模型中：

```
 [Required(ErrorMessageResourceType = typeof(Resources), ErrorMessageResourceName = "RequiredField")] 
```

在控制器中：

```
*MyApplication*.Web.Properties.Resources.*MyString* 
```

然后创建如下`Resource.resx`文件：

```
 Resource.myCulture.resx 
```

*   myCulture 与上面的 Global.asax 文件中的相同。

而已。很简单。

# c - git-shell 在提示符下处理的命令不做任何事情（只是挂起）

> ID：10363311
> 
> 赞同：2
> 
> 时间：2012-04-28T12:03:41.017
> 
> 标签：c, git, ssh

我正在尝试在我的远程 linux 服务器上设置一个 git 存储库，以便我可以通过 ssh 连接并以相当安全的方式与几个朋友共享单一登录。我遇到了问题，因为我的 sshd 通过`FORCE_COMMAND`ssh 配置中的 set 调用 duo security（指向`'/usr/sbin/login_duo'`）。我决定解决这个问题；所以我检查了 git 代码并选择了足够的 C 来进行更改（在[shell.c](http://code.google.com/p/git-core/source/browse/shell.c%20shell.c)中），以便它忽略 /usr/sbin/login_duo 调用和`run_shell()`创建正常 git-shell 提示符的调用。（我现在很确定这不是正确的解决方案，因为我不希望`git clone`调用以 shell 结束，但这个问题似乎仍然有效）

无论如何，我设法让`git>`提示出现，但它似乎没有处理我传入的输入（一旦我输入了输入/退出然后点击返回）。我希望它打印“git got x”，但它只是坐在那里。有任何想法吗？

```
 fprintf(stderr, "git> ");
            if (strbuf_getline(&line, stdin, '\n') == EOF) {
                    fprintf(stderr, "\n");
                    strbuf_release(&line);
                    break;
            }
            fprintf(stderr, "git got %s\n", line ); 
```

例子：

```
egwor@mars:~/projects/test$ git clone ssh://git@localhost/home/git/repo1
Cloning into repo1...
git@localhost's password: 
login_duo ignored <-- where I split off and call the shell function
git> exit
<--hangs-->` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:44:26.007

`line`是类型：

```
struct strbuf {
    size_t alloc;
    size_t len;
    char *buf;
}; 
```

`fprintf(stderr, "git got %s\n", line )`应该按照以下方式生成编译器警告：
`warning: format ‘%s’ expects argument of type ‘char *’...`

忽略此警告并运行代码可能会导致 seg-fault 或其他严重崩溃。

试试这个：

```
fprintf(stderr, "git got %s\n", line.buf ); 
```

# c# - Page.ClientScript.RegisterStartupScript 不起作用 - 为什么？

> ID：10363313
> 
> 赞同：6
> 
> 时间：2012-04-28T12:03:56.100
> 
> 标签：c#, asp.net, registerstartupscript

我在 OnInit 处理程序中有一些代码

```
if (!Page.ClientScript.IsStartupScriptRegistered(GetType(), "MyScript"))
{
    Page.ClientScript.RegisterStartupScript(GetType(), "MyScript", GetStartupScript(), true);
} 
```

在这里我尝试注册一些java脚本代码。我希望它可以处理按钮单击事件。但它不执行。它仅在刷新页面后执行。谁能解释我为什么它不执行？

提前谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-28T12:34:43.713

尝试这个：

```
ScriptManager.RegisterStartupScript(this, typeof(string), "Error", 
    "alert('hi');", true); 
```

问题是在某些页面上您可能已经声明了`ScriptManager`. `ScriptManager`每页只允许一个，因此您必须使用现有的`ScriptManager`来注册任何脚本。

请注意，这`RegisterStartupScript`是一个静态方法；不要在你的实例上调用它`ScriptManager`（它会在 C# 中导致编译错误，但在 VB.NET 中只会出现警告）。

[这个](https://codewala.net/2011/11/24/page-clientscript-registerstartupscript-is-not-working/)链接有更多关于这个问题的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:50:18.703

```
 string msg = "This is variable message";
 Page.ClientScript.RegisterStartupScript(typeof(Page), "well1", "<script>alert('" + msg + "');</script>"); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-27T15:56:46.240

这对我来说很好：

```
Response.Write("<script type='text/javascript'>alert('" + AlerteMsg + "');</script>"); 
```

# android - Android 媒体播放器在后台运行

> ID：10363314
> 
> 赞同：2
> 
> 时间：2012-04-28T12:04:08.067
> 
> 标签：android, media-player

我有一个运行 mediaplayer 的 android 应用程序。它运行良好我的问题是当我来或锁定屏幕时歌曲停止播放有没有办法让媒体播放器在后台运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:06:06.273

您需要使其作为[服务](http://developer.android.com/reference/android/app/Service.html)而不是活动运行。

# java - 如何创建像 sun.misc* 这样的受限包

> ID：10363315
> 
> 赞同：0
> 
> 时间：2012-04-28T12:04:15.497
> 
> 标签：java, class-visibility

我正在开发一个由其他团队使用的库，在库中有一些类/方法是公共的，但我不希望其他人使用它们。

类似于 java 中的 sun.misc 包之类的东西，尽管所有类都是公共的，但编译器在使用它时会抛出“限制错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:12:40.317

一种方法是应用面向方面的编程 (AOP)。限制访问是一个典型的横切关注点，非常适合 AOP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:16:17.930

我不知道在 sun.misc 包中创建一个类可能会阻止某人访问它的公共方法。刚刚检查了一下，我可以访问 sun.misc.MyCustomClass 方法。

我认为当您拥有公共方法但不希望有人使用它们时，这是不良架构的标志。

# javascript - 使用 JavaScript 函数进行验证

> ID：10363318
> 
> 赞同：0
> 
> 时间：2012-04-28T12:04:38.973
> 
> 标签：javascript, asp.net, validation, custom-validators

我有以下 JavaScript 函数：

```
function validateLocality(object, args) {
        if (document.getElementById("<%=ddlLocality.ClientID %>").value == "0") {
            args.IsValid = false;
        }
        else {
            args.IsValid = true;
        }
    } 
```

以及以下带有验证器的下拉列表：

```
<asp:DropDownList
  ID="ddlLocality"
  runat="server"
  DataSourceID="DataSourceListTowns"
  DataTextField="town_name"
  DataValueField="town_id"
  ToolTip="The Locality Where the User Lives"
  AppendDataBoundItems="True"
  ViewStateMode="Disabled">
<asp:ListItem Value="0">Select Locality</asp:ListItem></asp:DropDownList>
<asp:CustomValidator
  runat="server"
  ControlToValidate="ddlLocality" 
  ErrorMessage="Select Locality"
  ToolTip="Select Locality"
  ID="validateLocality" 
  ClientValidationFunction="validateLocality()">*</asp:CustomValidator> 
```

问题是它根本没有验证下拉菜单。

感谢您的帮助，因为我为此伤透了脑筋

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:08:32.620

您的函数采用 2 个参数：

```
function validateLocality(object, args) 
```

但是当你调用它时，你没有传递任何东西......？

```
ClientValidationFunction="validateLocality()" 
```

向您的函数添加警报，以确保在提交时调用它。

```
function validateLocality(object, args)
{
     alert("working");

     if (document.getElementById("<%=ddlLocality.ClientID %>").value == "0")
     {
          args.IsValid = false;
     }
     else
     {
          args.IsValid = true;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:10:14.250

`ClientValidationFunction`应该只带有函数的**名称**。它不期望携带 Javascript 表达式。因此，您的属性应如下所示：`ClientValidationFunction="validateLocality"`注意 no `()`。

# wordpress - Wordpress vs Joomla vs Drupal - 我的客户的最终解决方案？

> ID：10363322
> 
> 赞同：3
> 
> 时间：2012-04-28T12:05:13.870
> 
> 标签：wordpress, drupal, joomla, content-management-system

我不太习惯使用 CMS，通常是手动编码并将网站直接上传到服务器而不处理 CMS。但是最近我有一个朋友，也就是我的客户的项目，他想在有限的预算下运行一个在线杂志，并且还需要一个没有任何模板或业余网站外观和感觉的“定制设计网站”。请指导我找到最适合我们需求的三大 CMS 之间的最终解决方案：

要求：

*   “定制设计”杂志网站 - 几乎每个页面都有不同的布局，具有复杂的设计和定制功能。
*   基本功能，例如博客，网络板，帖子等。
*   由于我的客户预算有限，因此有大量免费的漂亮且可修改的插件/小部件。
*   客户不想在未来支付任何额外的维护和更新费用。他想用自己的 IT 基础知识和 html 零知识自己更新网站内容（在线杂志）。
*   该网站的主要收入来自横幅、广告版块（付费和免费广告）和分类广告。
*   支持未来更复杂的功能，如会员区等。

对于此要求，最佳 CMS 选择应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:09:31.150

根据您的需要，我建议您使用[wordpress](http://wordpress.org/)。

[您可以在此处](http://www.techi.com/2011/07/open-source-wars-wordpress-vs-drupal-vs-joomla/)查看这 3 个 CMS 以进行比较

我也使用 wordpress，我对 wordpress 非常满意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T22:24:45.110

我是一个 Drupal 人，我建议这样做。我认为其他回复者对建议的 CMS 很好，所以这就是 Drupal 对此有何用处。“定制设计”杂志网站 - 几乎每个页面都有不同的布局，具有复杂的设计和定制功能。-- 你必须为你使用的任何 CMS 制作一个主题——“自定义主题”

博客、网络板、帖子等基本功能——Drupal 带有内置的基本博客，但为了更加出色，您可以使用自定义节点类型制作类似博客的部分。

由于我的客户预算有限，因此有大量免费的漂亮且可修改的插件/小部件。-- 如果您想使用“安装并且一切都被神奇地设置”类型的模块，请考虑这是一个减号。

客户不想在未来支付任何额外的维护和更新费用。他想用自己的 IT 基础知识和 html 零知识自己更新网站内容（在线杂志）。-- 与所见即所得编辑器结合使用时，大多数用户都可以制作内容。我相信 Wordpress 在易用性方面是最好的。

将来支持更复杂的功能，例如会员区等——这就是您需要 Drupal 的地方。由于其模块化设计，Drupal 具有几乎无限的功能。但是作为 Web 开发人员，您必须花时间解决问题。没有什么是自动的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T23:21:32.943

Drupal 很棒，即使对于小型网站也是如此。我将始终选择 Drupal，因为即使是最小的博客站点最终也需要更大的开发。我在坚持使用 WordPress 时犯了很多次这个错误，然后几个月后，客户想要一些可以用 Drupal 简单地完成的事情。

使用 Drupal，有许多主题可供您构建，易于开发模块，非常易于定制，而且非常灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:59:58.833

我阅读了客户的要求。所有客户的需求都解决了 Drupal 的特性。Wordpress 对您来说很容易，但是问题客户。Jumla 对双方来说都是一个问题。Drupal 对您来说是个问题，但对客户来说很方便。还有更多……我认为您对这些 CMS 并不熟悉。

# android - 我如何显示带有输入和输出值的地图？

> ID：10363323
> 
> 赞同：0
> 
> 时间：2012-04-28T12:05:15.493
> 
> 标签：android, google-maps

我想用用户输入的输入值显示谷歌地图。（来源和目的地）。

这里我有两个编辑文本，一个是 From 和 To 基于输入值，我们可以在方向模式下显示地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:15:23.197

请参阅此[链接](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)以在您的应用程序中绘制行驶路径。您只需在项目中添加链接中存在的四个类，并在需要显示路线时调用以下行。

```
SharedData data = SharedData.getInstance();
data.setAPIKEY("0RUTLH7cqd6yrZ0FdS0NfQMO3lioiCbnH-BpNQQ");//set your map key here
data.setSrc_lat(17);//set your src lat
data.setSrc_lng(78);//set your src lng
data.setDest_lat(18);//set your dest lat
data.setDest_lng(77);//set your dest lng
startActivity(new Intent(YourActivity.this,RoutePath.class));//add RoutePath in your manifeast file 
```

//同时将权限添加到您的清单文件

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# android - 我们可以只使用一个广播接收器吗？

> ID：10363325
> 
> 赞同：0
> 
> 时间：2012-04-28T12:05:39.843
> 
> 标签：android

我们只能使用一个广播接收器吗？

我有一些广播接收器，它们运行良好，：

[注意：每个应用程序只能指定一个 BroadcastReceiver 类。如果您需要合并来自不同 SDK 的两个或多个 BroadcastReceiver，您将需要创建自己的 BroadcastReceiver 类，该类将接收所有广播并为每种类型的广播调用适当的 BroadcastReceiver。](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-tracking)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:09:17.850

是的，您可以使用单个**BroadcastReceiver**来捕获所有操作字符串。确保您确实在该接收器使用的**IntentFilter 中**添加了所有操作字符串以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:06:31.353

一个`<application>`可以包含多个`<receiver>`，每个`<receiver>`可以包含多个`<intent-filter>`。例如：

```
<application>

    <receiver android:name="ReceiverA">
        <intent-filter>
            <action android:name="android.intent.action.ACTION1"/>
        </intent-filter>
    </receiver>

    <receiver android:name="ReceiverB">
        <intent-filter>
            <action android:name="android.intent.action.ACTION2" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.ACTION3" />
            <data android:scheme="file" />
        </intent-filter>
    </receiver>

</application> 
```

但是您只能拥有一个`"com.google.android.apps.analytics.AnalyticsReceiver"`- 这就是 IMO 文档的含义。

# backbone.js - Backbone.js 单页架构

> ID：10363326
> 
> 赞同：0
> 
> 时间：2012-04-28T12:05:42.497
> 
> 标签：backbone.js

简单的问题，我对这种方法是否正确。

1.  我有一个包含左侧、中间和右侧区域（div）的页面。
2.  每个区域都有自己的 Backbone 对象，MVC/R
3.  每个区域通过默认的 JQuery 模板都有其默认的 HTML。
4.  每个 Backbone 对象都通过 JQuery 与 Asp.Net.MVC 进行通信。
5.  根据从其 MVC 操作返回的 JSON 有效负载，区域可以通过 JQuery 模板切换其 HTML。
6.  我从网络上得到了一些代码，它以类似于 WPF/Silverlight 的 Prism 的方式在 Backbone 对象之间进行 JavaScript EventAggregation 通信。

第 1 点到第 6 点看起来一般吗？

我可以使用某种“纯”JavaScript 事件来替换第 6 点，如果可以，我将如何处理？

你可以猜到，我是从 WPF/Silverlight 背景进入的

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:20:51.537

你的列表很好，类似于现在很多人构建 Backbone 应用程序的方式。不过，我建议不要使用 jQuery 模板。目前不支持它们，因为 jQuery UI 团队正在制定路线图以将它们完全重新写入 jQueryUI 项目。

至于原生 JavaScript 事件 - 不。坚持使用您熟悉的事件聚合器实现。JavaScript 中没有任何原生的东西。

您可能还会发现我的 Backbone.Marionette 项目很有帮助和熟悉。[http://github.com/derickbailey/backbone.marionette](http://github.com/derickbailey/backbone.marionette)

我也来自 .NET 背景，构建复合应用程序（主要在 WinForms 中，但也有一点 WPF）。我采用了我在构建 Winforms/WPF 应用程序时使用的所有核心模式并将它们构建到 Marionette 中。它删除了很多我通常会编写的样板代码，并借鉴了 Prism 和其他复合应用程序框架的想法。

# c# - 可能将两个数据源提供给一个转发器

> ID：10363334
> 
> 赞同：-1
> 
> 时间：2012-04-28T12:07:12.820
> 
> 标签：c#, asp.net, sql-server-2008

这是我的转发器控件，数据来自`[Patient_Master]`表。但`Visit_Date`来自`[Patient_Visit]`餐桌。如何`Visit_Date`向同一个中继器显示？是否可以将两个数据源提供给一个中继器？`[Patient_Master]`并`[Patient_Visit]`有关系：

```
<asp:Repeater ID="repeaterPatientList" runat="server" OnItemDataBound="repeaterPatientList_ItemDataBound" >
    <ItemTemplate>
        <tr onclick="selectRow(this);">
            <td class="csstablelisttd" style="display:none" >
                <asp:Label ID="lblPID" runat="server" Text='<%#Eval("PID")%>'></asp:Label>
            </td>
            <td class="csstablelisttd" >
                <a href="#" onclick="return showPatient('<%#Eval("PID") %>')"><%#Eval("Patient_Name")%></a>                             
            </td>
            <td class="csstablelisttd">         
                <asp:Label ID="lblPatientName" runat="server" Text='<%#Eval("Patient_ID")%>'></asp:Label>
            </td>   
            <td class="csstablelisttd" >
                <asp:Label ID="lblSex" runat="server" Text='<%#Eval("Sex")%>'></asp:Label>
            </td>
            <td class="csstablelisttd">
                <asp:Label ID="lblPatientsBirthDate" runat="server" Text='<%#Eval("Patients_Birth_Date")%>'></asp:Label>
            </td>                           
            <td class="csstablelisttd">         
                <asp:Label ID="lblLastVisitDate" runat="server" Text='<%#Eval("Visit_Date")%>'></asp:Label>
            </td>
            <td class="csstablelisttd">                           
                <a href="#" onclick="return showSchedulePatient('<%#Eval("PID") %>')">New</a>
            </td>   
            <td id="tdTodaysVisit" bgcolor="#00cc66" runat="server">                           
                <a href="#" onclick="return showSchedulePatient('<%#Eval("PID") %>')"><span class="cssgreen">Today's Visit</span></a>
            </td>
            <td class="csstablelisttd">
                <%--<asp:HyperLink ID="lnkSchedule" CssClass="csshyperlinkSchedulePatient" runat="server" NavigateUrl='<%# Eval("PID", "~/Create_Order.aspx?ID={0}") %>'>Schedule</asp:HyperLink>--%>
                <a href="#" onclick="return showSchedulePatient('<%#Eval("PID") %>')">Schedule</a>
            </td>                           
        </tr>
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:13:53.150

为什么不在 Patient_master 和 Patient_visit 之间使用外连接。

# php - 如何使用 php sdk 发布到 OpenGraph

> ID：10363335
> 
> 赞同：1
> 
> 时间：2012-04-28T12:07:16.337
> 
> 标签：php, facebook, facebook-php-sdk, facebook-opengraph

我想使用 php sdk 发布到我的用户的墙上，新的 Open Graph 有没有办法，或者我应该坚持典型的“提要”方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T14:50:31.247

您可以使用以下代码使用打开的图形操作和对象在时间轴上发布操作。

```
<?php
require "src/facebook.php";

$facebook = new Facebook(array(
    'appId'=>'xxxxxxxxx',
    'secret'=>'xxxxxxxxxxxxxxxxx',
    'cookie'=>true
));

if(!$facebook->getUser())
{
    $url = $facebook->getLoginUrl(array('scope'=>'publish_actions'));
    echo "<script> top.location=\"".$url."\"; </script>";
    exit(0);
}

$params = array('article'=>'http://www.onlytipsandtricks.com.com/test.html','access_token'=>$facebook->getAccessToken());

$out = $facebook->api('/me/app_namespace:read','post',$params);

print_r($out);

?> 
```

# bing-maps - 禁用 bing 地图控件的“抓取”平移

> ID：10363338
> 
> 赞同：4
> 
> 时间：2012-04-28T12:07:28.003
> 
> 标签：bing-maps

如何仅禁用bing 地图 AJAX 控件 7.0 的平移*抓取*方面？

我试过这个 -

`var map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), { credentials: "bing maps credentials", mapTypeId: Microsoft.Maps.MapTypeId.road, disablePanning: true});`

但是`disablePanning`在地图选项中设置属性不仅会禁用抓取平移，还会禁用缩放平移。缩放不会完全禁用，而是只会在地图中心放大和缩小。毫无疑问，您会遇到*缩放*平移，您可以使用鼠标滚轮放大光标下的地图，因此可以通过放大和缩小以及移动光标来平移。我想启用*缩放平移，但要禁用**抓取*平移（用户按下鼠标并拖动它）。

我的目标是实现与在主 bing 地图站点上使用**我的位置编辑器时非常相似的功能。**当使用折线工具在地图上绘制时，*抓取*平移被禁用，*缩放*平移被启用，就像我想要的那样。我实际上打算在**我的位置编辑器**中创建一个类似于折线工具的自定义绘图工具。

我一直在研究 api，但还没有发现如何去做。我也试图发现它是如何在主要的 bing 地图网站上完成的，但由于 javascript 代码被全部缩小，我发现它非常困难。我设法发现折线工具*劫持*了鼠标，但仅此而已。

当然，必须有一个简单的方法来做到这一点。它是如何完成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:24:44.667

我认为没有可以设置的地图选项来实现您想要的行为（启用缩放平移/禁用抓取平移）。但是，有一种简单的方法可以破解它。通过用户在地图上单击并移动鼠标来启动平移。因此，如果您可以为地图提供自己的`mousedown`事件处理程序，并在其实现中防止 的默认行为`mousedown`，那么您应该很高兴。事实证明，[handled](http://msdn.microsoft.com/en-us/library/gg406731.aspx)属性`MouseEventArgs`就是这样做的：

```
Microsoft.Maps.Events.addHandler(yourMapObj, 'mousedown', function (mouseEvent) {
    mouseEvent.handled = true; //A boolean indicating whether the event is handled. If this property is set to true, the default map control behavior for the event is cancelled.
}); 
```

这样，`mousedown`地图上的事件将由您处理并被地图忽略。因此，当用户尝试使用鼠标平移地图时，什么也没有发生。他们仍然可以像往常一样单击和缩放。请记住，如果地图上有其他元素，例如图钉和形状，这将阻止`mousedown`事件到达它们。因此，您在其上注册的任何`mousedown`事件处理程序都不会被调用。`mousedown`当您希望调用其他事件（首选）时，您可以通过取消注册上述处理程序来处理此问题，或者询问您的目标属性`MouseEventArgs`以查看触发 mousedown（混乱）的原因。

# c# - C# 值类型和字符串

> ID：10363340
> 
> 赞同：4
> 
> 时间：2012-04-28T12:07:39.283
> 
> 标签：c#, tostring, value-type

这是一个家庭作业问题，这就是为什么它可能有点奇怪（如果标题不是很好，也请道歉）

假设*v1*是重新定义*ToString的**X*类型的值类型，那么使用*Console.WriteLine(v1)*和*Console.WriteLine(v1.toString())*有什么区别吗？

 **** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T12:11:46.537

最简单的答案是“是的，有区别”。显然，重要的是你知道那个区别*是*什么。我不会告诉你，但我会告诉你如何调查它......

*   编写一个简短的程序，其中包含所描述的自定义值类型，并且*在* 方法中`Console.WriteLine(v1)``Console.WriteLine(v1.ToString())``Main`
*   编译程序
*   运行`ildasm`（或 IL 模式下的 Reflector）并查看方法调用之间的区别
    *   在每种情况下调用哪个方法重载？
    *   每种情况下的值会发生什么变化？

您可能想要考虑的问题以及可能会给您带来额外奖励的问题：

*   如果您使用自定义类而不是结构，有什么区别吗？
*   你能想出任何`Console.WriteLine`可以设计的方法来消除你注意到的任何低效率吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:11:29.107

关于装箱有一个小的区别，但对于它的正常实现，`ToString`它不会改变程序的可观察行为（除了最小的性能影响）。你应该弄清楚拳击何时发生。

难道传球`v1`给`Console.WriteLine`框了吗？

有电话亭`v1.ToString()`吗`v1`？为什么/为什么不？类型覆盖是否重要`ToString`？即调用继承自的`Object`方法和重写的方法之间有区别吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:11:37.477

不确定是否可以回答家庭作业问题，因为这感觉就像我在给你服务:)

在没有 ToString() 方法的情况下调用 Console.Writeline(v1) 将导致控制台也调用`ToString()`以获取实际值。

另外，我不确定你的教授是否是一个“技巧问题”类型的人，但在 C# 中，没有“toString()”方法 - 它实际上是“ToString()”（注意大写“To”的用户)***

# java - 在java中反转链表中的备用节点的代码

> ID：10363342
> 
> 赞同：0
> 
> 时间：2012-04-28T12:08:05.370
> 
> 标签：java, data-structures, linked-list

链表类 -

```
class MyList{
        int val;
        MyList next;
        MyList(int val){
            this.val = val;
        }

        @Override
        public String toString() {
            MyList current = this;
            String out="";
            while(current != null){
                out += current.val+"-->";
                current = current.next;
            }

            return out+"TAIL";
        }
    } 
```

我试过了，它的工作原理-

```
MyList list3 = list;
    MyList list4 = list.next;
    while(list3!=null && list4!=null){  
        alternateListswap(list3,list4);
        if(list3.next.next==null || list4.next.next==null)
            break;
        list3 = (list3.next.next==null)?null:list3.next.next;
        list4 = (list4.next.next==null)?null:list4.next.next;
    }

private static MyList alternateListswap(MyList L3, MyList L4) {
        int temp = L4.val;
        L4.val = L3.val;
        L3.val = temp;
        return L3;

    } 
```

我的输入 -

```
MyList list = new MyList(1);
        list.next = new MyList(2);
        list.next.next = new MyList(3);
        list.next.next.next = new MyList(4);
        list.next.next.next.next = new MyList(5);
        list.next.next.next.next.next = new MyList(6);
        list.next.next.next.next.next.next = new MyList(7);
        list.next.next.next.next.next.next.next = new MyList(8);
        list.next.next.next.next.next.next.next.next = new MyList(9);
        list.next.next.next.next.next.next.next.next.next = new MyList(10); 
```

我的列表输出是 - 1-->2-->3-->4-->5-->6-->7-->8-->9-->10-->TAIL

现在我想在 JAVA 中交换 LinkedList 中的备用节点。

加速输出 - 2-->1-->4-->3-->6-->5-->8-->7-->10-->9-->尾巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:24:53.123

您需要交换两个元素（如果列表中至少有两个），然后继续下一个对。

您的方法目前这样做：1）转到列表的最后（通过前递归），然后 2）在您走向列表的前面时交换元素（当您沿着递归调用链上升时）。这样做的结果是反转列表

`L`你需要这样的东西：1）如果列表中至少有两个元素（`L.next`有效）交换两个元素，然后2）继续两个元素并重复（例如`alternateListswap(L.next.next);`）

# android - 在 Android 的 SurfaceView 中进行独立于 CPU 速度的计算和绘图

> ID：10363346
> 
> 赞同：1
> 
> 时间：2012-04-28T12:08:28.160
> 
> 标签：android, 2d, surfaceview

要使用 SurfaceView 在 Android 中绘制 2D 游戏，我在主要活动中使用它`onCreate()`：

```
setContentView(new GameView(this)); 
```

这是对此类的引用：

```
public class GameView extends SurfaceView implements SurfaceHolder.Callback 
```

此外，我有一个线程及其`run()`功能：

```
public void run() {
    Canvas c;
    while (_run) {
        c = null;
        try {
            c = _surfaceHolder.lockCanvas(null);
            synchronized (_surfaceHolder) {
                _panel.updatePhysics();
                _panel.onDraw(c);
            }
        }
        finally { // when exception is thrown above we may not leave the surface in an inconsistent state
            if (c != null) {
                _surfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
} 
```

在`updatePhysics()`我做一些计算。当然，它们比这个简单的例子更复杂，但工作方式相同：

```
public void updatePhysics() {
    GraphicObject.Coordinates coord;
    GraphicObject.Speed speed;
    for (GraphicObject graphic : _allElements) {
        coord = graphic.getCoordinates();
        speed = graphic.getSpeed();
        coord.setX(coord.getX() + speed.getX());
        coord.setY(coord.getY() + speed.getY());
        ...
    }
} 
```

在 中`onDraw()`，我将所有内容绘制到画布上：

```
@Override
public void onDraw(Canvas canvas) {
    canvas.drawBitmap(BITMAP, xPos, yPos, null);
    ...
} 
```

这工作正常 - 一切。当我在我的设备上测试它时，它看起来相当不错。但是当我把它给别人并且他做了一个测试游戏时，物体移动得更快了！为什么会这样？因为线程`updatePhysics()`尽可能频繁地调用，这意味着快速设备更频繁地调用此函数？

我怎样才能防止这种情况并使游戏在所有设备上都同样快速？像这样的东西？

```
private long lastRun = System.currentTimeMillis();

public void updatePhysics() {
    long millisPassed = System.currentTimeMillis()-lastRun;
    ...
    float newCoord = (coord.getX() + speed.getX()) * millisPassed / 33;
    coord.setX(newCoord);
    ...
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:17:28.827

如果可以的话，直接用时间来计算你所有的物理。这通常效果最好。

如果您无法根据时间进行计算，因为您所做的只是基于步骤的，并且您知道生成下一步不会花费太多时间，那么您还有另一种选择。

您创建两个线程。第一个以固定速率推进状态（您必须确保这也能以该速率在慢速设备上运行）。第二个采用当前状态是看到并绘制它。现在第二个线程可以随心所欲地慢，因为它只是跳过了一些状态（或者如果它更快，则多次绘制相同的状态）。

下面的小例子有一个线程推进一些状态对象并每次替换引用，因此消费线程不需要担心它的状态对象被修改

```
class GameState {
    private int state = 0;

    public GameState advanceState() {
        GameState result = new GameState();
        result.state = this.state + 1;
        return result;
    }
}

class SurfaceViewImplementation extends SurfaceView {

    // the current state
    volatile GameState mState = new GameState();

    void somewhere() {
        Thread fastProducer = new Thread(new Runnable() {
            private static final long MAX_WAIT = 1000 / 60; 
            @Override
            public void run() {
                while (!Thread.interrupted()) {
                    long timeBefore = SystemClock.currentThreadTimeMillis();
                    GameState newState = mState.advanceState();
                    mState = newState;
                    long timeAfter = SystemClock.currentThreadTimeMillis();
                    long timeSpent = timeAfter - timeBefore;
                    SystemClock.sleep(Math.max(0, MAX_WAIT - timeSpent));
                }
            }
        });
        fastProducer.start();
        Thread slowConsumer = new Thread(new Runnable() {
            @Override
            public void run() {
                while (!Thread.interrupted()) {
                    GameState currentState = mState;
                    longRunningDraw(currentState);
                }
            }
        });
        slowConsumer.start();
    }
} 
```

如果生产线程无法以所需的速率运行，那仍然无法为您提供与速度无关的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T12:19:15.480

我会在开始渲染帧时节省时间（在你的情况下是 updatePhysics()），然后下次我会到这一点，我知道要花多少时间，如果它太快你可以使用[Thread.Sleep( );](http://developer.android.com/reference/java/lang/Thread.html#sleep%28long,%20int%29)

# css - 词法错误 css

> ID：10363351
> 
> 赞同：0
> 
> 时间：2012-04-28T12:08:44.870
> 
> 标签：css

出于某种原因，我的[http://www.mobileitnext.nl/css/style.css](http://www.mobileitnext.nl/css/style.css)给出了词汇错误。

这是原始代码，你们知道为什么..吗？谢谢！

```
/* reset css */

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-weight: inherit;
    font-style: inherit;
    font-size: 100%;
    font-family: inherit;
    vertical-align: baseline;
}
/* remember to define focus styles! */
:focus {
    outline: 0;
}

h3 .email {
    clear:both;
    font-family: sans-serif; font-size:12px;
}
body {
    padding:0 0 0 0;
    margin:0 0 0 0 ;
    font-family: Arial, Helvetica, sans-serif; font-size:14px; background:#fff;
}
@font-face {
    font-family: 'ChunkFiveRegular';
    src: url('fonts/Chunkfive-webfont.eot');
    src: local('☺'), url('fonts/Chunkfive-webfont.woff') format('woff'), url('fonts/Chunkfive-webfont.ttf') format('truetype'), url('fonts/Chunkfive-webfont.svg#webfontb5K2fJwj') format('svg');
    font-weight: normal;
}
    font-style: normal;
/* tables still need 'cellspacing="0"' in the markup */
table {
    border-collapse: separate;
    border-spacing: 0;
}
caption, th, td {
    text-align: left;
    font-weight: normal;
}
blockquote:before, blockquote:after, q:before, q:after {
    content: "";
}
blockquote, q {
    quotes: "" "";
}
a{text-decoration:none;}

/*---------------------------reset code----------------------------*/
body    { background:url(../Images/bgall.jpg);}
.clear  { clear:both; line-height:1px; font-size:1px;}
/*---------------------------Main Body Start ----------------------------*/

/*---------------------------Main Body Start ----------------------------*/

#wrapper                    {width:100%; margin:0 auto; background:url(../Images/bg.jpg) repeat-x;}
#innerWrapper               {width:765px; margin:0 auto; padding:0 0 45px 0;  }
/*---------------------------Main Body End-------------------------------*/

/*---------------------------Header Start ----------------------------*/
.header_wrapper         { width:765px; height:90px; margin:0 auto; padding:0 0 51px 0;}

.logo { width:232px; height:42px; margin:0; padding:25px 0 0 0; float:left;}
.contact_us { width:240px; height:16px; margin:0; padding:34px 0 0; float:right;}
/*---------------------------Header End ----------------------------*/

/*---------------------------Menu ----------------------------*/

.contact_form { width:765px; margin:0; padding:0 0 15px 0;} 
.Banner_wrapper { width:765px; margin:0; padding:0 0 15px 0;} 
.middlecurve { background:url(../Images/banner_middlecurve.jpg) no-repeat right 0; width:765px; height:auto; padding:15px 0 0 0 }
.bottomcurve{ background:url(../Images/bottomcurve.jpg) no-repeat right 0; width:765px; height:9px; margin:0; padding:0; }

.full_video {
    padding:0px 15px 4px 15px;
    float:left;
}
.lftbanner { float:left; width:326px; min-height:239px; margin:0; padding:30px 0 0 25px; float:left;}
.lftbanner p { font:normal 16px/24px "Helvetica", Arial, Helvetica, sans-serif; color:#494949; padding:0 0 20px 0;}
h1 { font:normal 28px   'ChunkFiveRegular', serif; color:#494949; padding:0 0 10px 0; }
.searchDiv { width:309px; height:47px; margin:0; padding:0;}
.searchDiv .inputbg { background:url(../Images/searchbg.jpg) no-repeat; width:0px; height:39px; margin: 0 5px 0; padding:0 10px 0 10px; font: italic 14px/35px Georgia, "Times New Roman", Times, serif; color:#494949; text-align:center; border:0; float:left;}
.searchDiv .submit { background:url(../Images/contact.png) no-repeat; width:200px; height:55px; margin:0; padding:0; font: bold 14px "Myriad Pro", Arial, Helvetica, sans-serif; color:#fff; text-align:center; border:0; float:right;}
.searchDiv .submit:hover  { background:url(../Images/contact1.png) no-repeat; width:200px; height:55px; margin:0; padding:0; font: bold 14px "Myriad Pro", Arial, Helvetica, sans-serif; color:#fff; text-align:center; border:0; float:right;}

.banner_rht { width:359px; height:273px; margin:0; padding:0 14px 0 0; float:right;}
.banner_thum{ width:359px; height:129px; margin:0; padding:0 0 14px 0;}
.banner_thum2{ width:359px; height:129px; margin:0; padding: 0 0 14px 0;}
.thumb1{ width:172px; height:129px; float:left; margin:0; padding:0 14px 0 0;}
.thumb2{ width:173px; height:129px; float:left; margin:0; padding:0;}
/*---------------------------Menu End ----------------------------*/

/*---------------------------Container  ----------------------------*/
.container_wrapper      { width:765px; height:auto; margin:0 auto; padding:0px 0px 0px 0px;}
.main_cont { width:765px; margin:0; padding:0;}

.cont_lft_div { width:365px; margin:0; padding:0px; float:left;}

.con_box1 { width:365px; height:79px; margin: 0 auto; padding:0 0 20px 0;}

.lft_con_box1 { width:77px; height:79px; margin:0; padding:0; float:left;}
.img{ width:44px; height:56px; margin:0 auto; padding:10px 0 0 0}
.img2{ width:53px; height:56px; margin:0 auto; padding:10px 0 0 0}
.img3{ width:52px; height:67px; margin:0 auto; padding:10px 0 0 0}
.img4{ width:58px; height:43px; margin:0 auto; padding:10px 0 0 0}

.rht_con_box1 { width:287px; height:79px; margin:0; padding:0; float:left;}
.rht_con_box1 p {font:normal 12px/18px "Helvetica", Arial, Helvetica, sans-serif; color:#2e2e2e; padding:0 0 10px 0;}

h2{ font:normal 16px,  'ChunkFiveRegular'; color:#3e3e3e; padding:0 0 10px 0;}
h2 a{ font:normal 16px 'ChunkFiveRegular'; color:#3e3e3e; text-decoration:none;}

.con_box2 { width:365px; height:79px; margin: 0 auto;}

.cont_rht_div { width:365px; margin:0; padding:0px 0 0 20px; float:left;}

.bottomline { background:url(../Images/bottomline.jpg) no-repeat; width:759px; height:15px; margin:0 auto; padding:0 0 60px 0;}

h3{ font:normal 16px 'ChunkFiveRegular'; color:#4b4b4b; padding:0 0 10px 0;}

/*---------------------------Container End  ----------------------------*/

/*--------------------------- Body Styles  ----------------------------*/
#introbox {
    padding:15px;
    float:left;
    width:100%;
    margin-bottom:25px;
}

#introbox h2 {
    font-size:18px;
    font-family: 'ChunkFiveRegular';
}

#introbox p {
    font-size:14px;
    font-family: 'Helvetica';
    color:#545454;
    line-height:20px;
}

#slickbox {
    padding:35px 15px 15px 15px;
    float:left;
    width:100%;
}

#slickbox h2 {
    font-size:18px;
    font-family: 'ChunkFiveRegular';
}

#slickbox p {
    font-size:14px;
    font-family: 'Helvetica';
    color:#545454;
    line-height:20px;
}
#slick-toggle {
    margin:20px 0px 0px 0px;
    float:left;
}

/*---------------------------Body Styles End  ----------------------------*/

/*---------------------------Footer  ----------------------------*/
.footer_wrapper { width:100%; margin:0 auto; }
.footer_Div { width:765px; margin:0 auto; height:100px;}
.footer_cell { width:745px; float:left; background: url(../Images/footerbg.jpg); padding:0 10px 10px 10px; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; margin-bottom:25px !important;}

.copyright { width:383px; height:16px; margin:0; padding:20px 0 0 0; float:left;}
.copyright p { font:normal 11px "Helvetica", Arial, Helvetica, sans-serif; color:#3e3e3e;}

.links{ width:100px; height:32px; margin:0; padding:10px 0 0 0; float:right;}
.links ul { list-style:none; margin:0; padding:0;}
.links ul li { list-style:none; float:left; padding:0 8px;}
/*---------------------------Footer End  ----------------------------*/ 
```

如果您有不明白的地方，请告诉我。我会密切关注这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:14:38.743

您的 css 文件中似乎有特殊字符。这是您可以执行的步骤

[从这里](http://notepad-plus-plus.org/)下载记事本++

这是高级文本编辑器。下载后，用notepad++打开你的css文件，然后导航到菜单`View > Show Symbols > Show all characters.`你可以看到特殊字符，你可以删除它们。如果存在特殊字符，则删除后，您可以将此文件保存为 utf-8。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:21:43.457

这是您的 CSS 的修补版本：http: [//pastebin.com/dGvFcK3M](http://pastebin.com/dGvFcK3M)

你在你的 CSS (line24) 上留下了一个未封闭的规则，并且还散落了一些中文文本。

这：

[http://pastebin.com/GdL4n7Yu](http://pastebin.com/GdL4n7Yu)

注：貌似是清朝的故事：）

# php - snmp_set_enum_print 未定义？

> ID：10363352
> 
> 赞同：1
> 
> 时间：2012-04-28T12:09:03.310
> 
> 标签：php, snmp

我有一个非常简单的 PHP 脚本失败了。当我运行它时，我在我的 apache 错误日志中收到这条消息：

```
PHP Fatal error:  Call to undefined function snmp_set_enum_print() 
```

这是完整的 PHP 脚本：

```
<?php
snmp_set_enum_print(0);
?> 
```

我将我的 Net-SNMP 库升级到 v5.5，但仍然出现此错误。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:56:13.423

问题是我必须更新 /etc/rc.d/rc.snmptrapd 以接受未经授权的 v3 陷阱。

# jakarta-ee - Java EE 开源监控工具

> ID：10363353
> 
> 赞同：0
> 
> 时间：2012-04-28T12:09:13.260
> 
> 标签：jakarta-ee, monitoring

我使用 JMeter 和 JavaMelody 工具为事务、线程和响应时间生成图表，但我想获得更精确的信息。

我正在寻找能够为我提供以下信息的工具：

*   现有线程的种类（如阻塞或等待）
*   JDBC 连接时间
*   EJB - bean 池（加载的 bean 数量）

如果该工具能够生成可视化报告（例如图表），那就太好了。我看到了几个现有的主题，但许多工具不是免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:43:12.430

您正在寻找的是 afaik 不可能以真正通用的方式，因为这没有写在规范中，因此供应商可以自由地以他们喜欢的任何方式提供该信息。

RHQ 正在尝试为 JBoss AS 应用程序服务器公开该数据，因此如果您使用 JBoss，您应该查看一下：[http ://rhq-project.org/](http://rhq-project.org/)

# php - 简单的登录检查密码

> ID：10363358
> 
> 赞同：4
> 
> 时间：2012-04-28T12:10:03.913
> 
> 标签：php, mysql, sha

我在这里做错了什么：

```
<?php
    if (isset($_POST['submitted'])) {

    $errors = array();
        require_once ('mysql_connect.php');

    session_start();
    $username = $_POST["username"]; // This is the inputted username from the form in Login.html
    $password = $_POST["password"]; // This is the inputted password from the form in Login.html

    if (empty($errors)) {
        $query="SELECT username FROM users WHERE username='$username' AND password='SHA($password)'"; 

        $result = mysql_query($query);  

        // Mysql_num_row is counting table row

        if (mysql_num_rows($result) == 1) {
                $_SESSION["username"] = $username; // Creates a cookie saving the username
                $_SESSION["loggedIn"] = true; // Creates a cookie saying the user is logged in
            // Show thank you message
            echo '<h3 style="color:green;">Thank You!</h3>
            <span style="color:green;">You have been logged in.</span>';
        } else {
            echo '<font color="red">You could not be logged in, please make sure your username and password is correct.</font>';
            foreach ($errors as $msg) {
            echo " - <font color=\"red\">$msg</font><br />\n";
            }
        }

} else {
        echo '<font color="red"><h3>Error!</h3>
        The following error(s) occured:<br /></font>';

        foreach ($errors as $msg) {
            echo " - <font color=\"red\">$msg</font><br />\n";
        }
    }
}
?> 
```

我得到一个：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /login.php on line 19 
```

我 SHA 密码的方式也是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:17:43.157

问题是您的 MySQL 查询导致错误，这意味着您`$result`实际上不包含结果资源。

您需要在查询中`''`从周围删除`SHA($password)`，而是将它们放在密码值周围，如下所示：

```
$query="SELECT username FROM users WHERE username='$username' AND password=SHA('$password')"; 
```

* * *

> 我 SHA 密码的方式也是正确的吗？

这取决于将密码插入数据库时​​如何散列密码。MySQL的[`SHA()`](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_sha1)与其相同[`SHA-1()`](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_sha1)：

> 计算字符串的 SHA-1 160 位校验和，如 RFC 3174 中所述

这也与 PHP 相同[`sha1()`](http://php.net/manual/en/function.sha1.php)；因此，例如，如果数据库中的密码是使用 PHP 创建的 SHA-1 哈希[`sha1()`](http://php.net/manual/en/function.sha1.php)，那应该没问题。

* * *

**旁注**

*   您应该使用 PHP 的[`crypt()`](http://php.net/manual/en/function.crypt.php)或[`hash()`](http://www.php.net/manual/en/function.hash.php)用于散列密码，[而不是 SHA-1](http://www.php.net/manual/en/faq.passwords.php#faq.passwords.fasthash)。例如用法，[请参阅 PHP 文档](http://php.net/manual/en/function.crypt.php)。

*   在数据库查询中使用任何数据之前，您应该清理/转义***所有用户提供的数据。***这是为了阻止[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。**更好的是，使用准备好的语句和参数化查询。**有关更多信息，请参阅[此答案](https://stackoverflow.com/a/60496/1166205)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:13:56.907

不要通过 SHA 函数使用 ''

```
$query="SELECT username FROM users WHERE username='$username' AND password='SHA($password)'"; 
```

而且当然不记得转义您的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T12:14:31.023

为什么你在@mysql_query($query) 中放了一个@；? 如果你有一个 MYSQL 错误，你应该正确处理它而不是忽略它（我假设你有一个错误）。它将帮助您了解错误的来源。

此外，您可以在 PHP 中执行 SHA（这取决于您的架构对您的项目可能是好是坏）。

[http://php.net/manual/en/function.sha1.php](http://php.net/manual/en/function.sha1.php)

# linq-to-sql - 在服务器上执行查询

> ID：10363359
> 
> 赞同：0
> 
> 时间：2012-04-28T12:10:24.853
> 
> 标签：linq-to-sql

我需要从用户统计表中获取最后 50 条记录（表中有超过一百万条记录）。如果我在下面运行查询，我会得到非常慢的响应，并且 IIS7 池内存使用量会跃升至 800mb。我认为查询将在 SQL Server 上而不是在应用程序本身上执行。如何优化这个查询？

```
user.Statistics.OrderByDescending(p => p.DateStamp).Take(50); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:18:56.963

此查询将在服务器上执行。我的猜测是查询很慢，因为您在 DateStamp 列上没有适当的索引。

我强烈建议您获取 LinqPad 的副本（如果您还没有副本），在 LinqPad 中执行此查询，查看正在将什么 T-SQL 发送到服务器（LinqPad 允许您这样做），采取T-SQL 并查看 SSMS 中的查询执行计划。我敢打赌正在进行表扫描，而不是索引查找。

有了适当的索引，这个查询最多应该在 1-2 秒内执行，即使表中有 1000 万行。

# c++ - 另一种共享所有权

> ID：10363361
> 
> 赞同：0
> 
> 时间：2012-04-28T12:10:39.357
> 
> 标签：c++, shared-ptr

在`shared_ptr`C++ 中解决了一个问题，当多个对象获得一个对象的所有权时，多次删除。它通过只进行最后一次删除来做到这一点。
该指针的另一种情况是当一个对象想要所有权但不想延迟删除时，它需要一个弱指针，当它被删除时通知他以防止出现问题。
还有另一种方法可以做到这一点。与其只进行最后一次删除，不如只进行第一次删除，其余的对象应该被通知它发生了，就像弱指针一样。
这对于像连接这样的对象很有用，如果一端释放它，它应该被销毁，而另一端知道这一点。
在 C++ 或 Boost 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:32:39.397

这种模式可以用一个共享的、`shared_ptr`仅用于创建和销毁对象的互斥体和一个`weak_ptr`用于访问的每个客户端/端点来建模。

请注意，这样的方案会导致过度锁定，并且可能无法提供您想要的语义。您需要`lock`在`weak_ptr`使用过程中，它触及`shared_ptr`内部互斥锁。当一侧销毁主`shared_ptr`实例时，对象在任何读取操作完成时仍然存在。

更传统的解决方案是通过信道本身发送挂断消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:18:28.363

有几种类型的*通知*：

*   同步
*   异步
*   按需（不是真正的通知）

根据您真正想要的，实施可能会有很大差异。

后者（按需）已经可以通过典型`shared_ptr`/`weak_ptr`二分法获得：通过 访问对象时`weak_ptr`，您会知道它是否同时被删除。

其他两个可以通过在传统之上的观察者模式来实现`shared_ptr`，但是它们具有复杂性和性能影响，所以我会在使用它们之前确保需求是真实的。

# duplicate-removal - 用引用替换嵌套结构内的相同分支的快速方法是什么？

> ID：10363369
> 
> 赞同：3
> 
> 时间：2012-04-28T12:12:14.387
> 
> 标签：duplicate-removal, perl

[`Test::Deep::cmp_deeply`](http://p3rl.org/Test%3a%3aDeep#ok-cmp_deeply-got-expected-name-)是否有一个现成的 Perl 模块可以扫描任意大的散列和数组嵌套结构并用仅引用单个值替换所有相同的分支（例如，会说“ok”的分支）？

对于这个问题，我已经有了自己的解决方案，但如果可用的话，我更愿意使用现有的快速 XS 模块。

[Data::Dumper](http://p3rl.org/Data%3a%3aDumper)所示的原始结构示例：

```
$VAR1 = {
    'other_elems' => [
        {
            'sub_elements' => [
                {'id' => 333},
                {
                    'props' => ['attr5', 'attr6'],
                    'id'    => 444
                }
            ],
            'other_key_for_attrs' => ['attr1', 'attr5'],
            'id'                  => 222
        },
        {
            'sub_elements' => [{'id' => 333}],
            'id'           => 111
        }
    ],
    'elems' => [
        {
            'attrs' => ['attr1', 'attr5'],
            'id'    => 1
        },
        {
            'parent' => 3,
            'attrs'  => ['attr1', 'attr5'],
            'id'     => 2
        },
        {
            'attrs' => ['attr5', 'attr6'],
            'id'    => 3
        },
        {
            'attrs' => ['attr5', 'attr6'],
            'id'    => 4
        }
    ]
}; 
```

预期结果结构示例：

```
$VAR1 = {
    'other_elems' => [
        {
            'sub_elements' => [
                {'id' => 333},
                {
                    'props' => ['attr5', 'attr6'],
                    'id'    => 444
                }
            ],
            'other_key_for_attrs' => ['attr1', 'attr5'],
            'id'                  => 222
        },
        {
            'sub_elements' =>
              [$VAR1->{'other_elems'}[0]{'sub_elements'}[0]],
            'id' => 111
        }
    ],
    'elems' => [
        {
            'attrs' => $VAR1->{'other_elems'}[0]{'other_key_for_attrs'},
            'id'    => 1
        },
        {
            'parent' => 3,
            'attrs'  => $VAR1->{'other_elems'}[0]{'other_key_for_attrs'},
            'id'     => 2
        },
        {
            'attrs' =>
              $VAR1->{'other_elems'}[0]{'sub_elements'}[1]{'props'},
            'id' => 3
        },
        {
            'attrs' =>
              $VAR1->{'other_elems'}[0]{'sub_elements'}[1]{'props'},
            'id' => 4
        }
    ]
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:48:51.670

我不知道有任何这样的模块，但这个任务听起来很有趣，所以为了比较，我会给你我的实现。请注意，这具有相当大的低效率，因为它在遍历数据结构时重复了序列化工作（可以重新编写以从叶元素向上遍历，并在进行时构建序列化字符串）。

```
#!/usr/bin/env perl
use warnings;
use strict;

use Data::Dumper;

my $hash = {
    foo => ['bar', {baz => 3}],
    qux => [{baz => 3}, ['bar', {baz => 3}]]
};

{   
    local $Data::Dumper::Sortkeys = 1;
    local $Data::Dumper::Indent = 0;
    local $Data::Dumper::Terse = 1;

    my %seen_branches;
    my @refs_to_check = \(values %$hash);
    while (my $ref = shift @refs_to_check) {
        my $serial = Dumper($$ref);
        if (my $existing = $seen_branches{$serial}) {
            $$ref = $existing;
        } else {
            $seen_branches{$serial} = $$ref;
            if (ref($$ref) eq 'ARRAY') {
                push @refs_to_check, \(@{$$ref});
            } elsif (ref($$ref) eq 'HASH') {
                push @refs_to_check, \(values %{$$ref});
            }
        }
    }
}

print Dumper $hash; 
```

# php - 插入其他更新时添加重复行

> ID：10363372
> 
> 赞同：0
> 
> 时间：2012-04-28T12:12:22.167
> 
> 标签：php, mysql

我正在使用下面的代码，当 user_id 没有设置为唯一时，它使用相同的 user_id 输入了两次相同的数据。所以我把它设置为唯一的，现在只是得到错误，查询失败。非常感谢所有帮助:(

```
 if (empty($err)) {
        $thesis_Name = mysql_real_escape_string($_POST['thesis_Name']);

       $abstract = mysql_real_escape_string($_POST['abstract']);

        // insert into the database
        $the_query ="SELECT * FROM thesis WHERE user_id='$_SESSION[user_id]'";
        $testResult = mysql_query($the_query) or die('Error, query failed');

        if(mysql_fetch_array($testResult) == NULL){

            //insert...
            $the_query ="INSERT INTO thesis (`user_id`,`thesis_Name`,`abstract`)
   VALUES ($user_id, $thesis_Name, $abstract)";
            $result = mysql_query($the_query) or die('Error, query failed') ;
        }
   else{

            //update...
    $the_query = "UPDATE thesis
    SET thesis_Name='$thesis_Name', abstract='$abstract'
    WHERE user_id='$_SESSION[user_id]'";
            $result = mysql_query($the_query)or die('Error, query failed');
        }

     // query is ok?
     if (mysql_query($the_query, $link) ){
      // redirect to user profile
     header('Location: myaccount.php?id=' . $user_id);

    } 
```

我也试过

```
$the_query =   "INSERT INTO thesis (`user_id`,`thesis_Name`,`abstract`)
VALUES ($user_id, $thesis_Name, $abstract)
ON DUPLICATE KEY UPDATE thesis_Name=VALUES(thesis_Name), abstract=VALUES(abstract)"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:15:26.623

使用 ON DUPLICATE KEY UPDATE。

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

例子：

```
INSERT INTO thesis (`user_id`,`thesis_Name`,`abstract`)
VALUES ($user_id, $thesis_Name, $abstract)
ON DUPLICATE KEY UPDATE thesis_Name=VALUES(thesis_Name), abstract=VALUES(abstract) 
```

这基本上处理了所有在 MySQL 端的 INSERT 和 UPDATE 之间的重复检查和选择，这要快得多（大约是 2 倍）。作为奖励，VALUES() 函数允许您从正在插入的行中检索值，因此您不必提供两次值并且多行插入可以正常工作。

响应对 OP 的编辑：

您必须在 UPDATE 子句中指定要更改的各个列。如果你想更新 thesis_Name 和 abstract，那么你必须指定它们。如果您首先只指定导致更新的唯一键，那么它只会更新那个，这很可能什么都不做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:15:33.787

我认为您正在寻找的是：[http](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html) ://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html如果插入查询遇到重复键，它将更新该行。

# datetime - DateTime 格式转换为字符串忽略 AM/PM

> ID：10363373
> 
> 赞同：3
> 
> 时间：2012-04-28T12:12:23.637
> 
> 标签：datetime, .net-4.0, string-formatting

我正在尝试使用格式将 DateTime 对象转换为字符串，但由于某些奇怪的原因，它忽略了 AM/PM。它只需要对象中小时的大小。

我正在使用以下格式：

```
StartDate.ToString("yyyy-MM-dd hh:mm:ss.fff"); 
```

和

```
String.Format("0:yyyy-MM-dd hh:mm:ss.fff", StartDate); 
```

我不认为两者之间有区别，但只是想尝试一下。如果我传递一个值**4/28/2012 6:00:00 AM**或**4/28/2012 6:00:00 PM**，结果是相同的***“2012-04-27 06:00:00.000”***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T12:14:23.103

您已经使用`hh`了使用 12 小时制的时钟。您想要`HH`使用 24 小时制的时钟。

有关自定义格式字符串的更多详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

请注意，您可能希望指定不变的文化，除非您真的希望时间分隔符依赖于当前的文化：

```
string formatted = StartDate.ToString("yyyy-MM-dd HH:mm:ss.fff",
                                      CultureInfo.InvariantCulture); 
```

（请注意，如果您将格式字符串传递给 ，则不应使用大括号`ToString`。我认为这只是问题中的一个错字。）

如果*要*使用 12 小时制，`tt`请在格式字符串中使用以生成 AM/PM 指示符。

# c - libxml2 无法从节点获取内容

> ID：10363380
> 
> 赞同：10
> 
> 时间：2012-04-28T12:13:00.827
> 
> 标签：c, xml, libxml2

我在 C 中使用 libxml，这就是我创建 xml 的方式：

```
xmlDocPtr createXmlSegment(char *headerContent, char *dataContent)
{
  xmlDocPtr doc;
  doc = xmlNewDoc(BAD_CAST "1.0");
  xmlNodePtr rdt, header, data;
  rdt = xmlNewNode(NULL, BAD_CAST "rdt-segment");
  xmlSetProp(rdt, "id", "1");
  header = xmlNewNode(NULL,BAD_CAST "header");
  data = xmlNewNode(NULL, BAD_CAST "data");
  xmlNodeSetContent(header, BAD_CAST headerContent);
  xmlNodeSetContent(data, BAD_CAST dataContent);
  xmlAddChild(rdt, header);
  xmlAddChild(rdt, data);
  xmlDocSetRootElement(doc, rdt);
  return doc;
} 
```

这就是我想从该xml获取数据的方式：

```
int getDataFromXmlSegment(char *data, char *header, char *content)
{
  xmlDocPtr doc = xmlReadMemory(data, strlen(data), NULL, NULL, XML_PARSE_NOBLANKS);
  xmlNode *rdt = doc->children;
  xmlNode *headerNode = rdt->children;
  header = (char *)headerNode->content;
  content = (char *)headerNode->next->content;
  printf("header: %s, content: %s", header, content);
  return EXIT_SUCCESS;
} 
```

当我测试 headerNode->name 或 ->next->name 时，名称是正确的（它是该元素的名称），但内容返回 null。有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-04T00:47:18.413

简短的回答：使用[xmlNodeGetContent](http://xmlsoft.org/html/libxml-tree.html#xmlNodeGetContent)。

元素节点本身不包含内容。相反，它们有子文本节点，并且包含内容。元素的内容可能是文本和标签的混合，这允许它保持顺序、表示实体等。

您可以遍历子节点并查看它们的内容成员，但 xmlNodeGetContent 会为您执行此操作，并将正确处理子标签和实体。

# javascript - 显示这个 div 并隐藏那个 div

> ID：10363384
> 
> 赞同：0
> 
> 时间：2012-04-28T12:13:39.247
> 
> 标签：javascript, jquery-ui, jquery, fancybox

您好我想知道如何修改我的以下js函数以隐藏一个div的内容并在fancybox的打开弹出窗口中显示以下div的内容以下div显示

```
<LI><A class="demo" id="example4" href="#demoView">Demo</A></LI> //linkfunctionality i want to show
<a id="various2" href="#divVideo" class="fl ml20"><img src="images/sites/img2.png" alt="" class="fl mr10" /></a> //Link functionality i want to hidde

<div style="display:none;">
    <div id="demoView">
        <div class="fl w900 pa20 bg2 tac">
            <h3 class="ff2 fwb fs30 mb10 cf3">Please contact us for a quick demo.</h3>
            <h4 class="ff2 fwb fs26 mb40 cf3">Email: <span  class="cf2 pr25"><a style="text-decoration:none; color:#2a98e2;" href="mailto:info@caremerge.com">info@caremerge.com</a></span> Call: <span class="cf2">(888) 996 6993</span></h4>
            <img src="images/sites/demo1.png" alt=""  class="dpib mb20"/>
        </div>
    </div>
</div> 
```

下面的函数成功隐藏了视频，但它没有显示上面提到的 div ......

```
 function onPause() {

       froogaloop.addEvent('pause', function(data) {
                //$('a[href="#various2"]').fadeOut();
                $('#divVideo').fadeOut(500);
                // $('#various2').fadeOut(500);
                //$(' #demoView').fadeIn(500);
                $('#demoView').fadeIn();

                alert('ST-UCK');

       });
 } 
```

**FANCY BOX JQUERY OF MY CODE 的某些部分**

```
jQuery(document).ready(function() {     

        $("a#example4").fancybox({
                'opacity'       : true,
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'none'
            });

        $("#various2").fancybox({
            'opacity'       : true,
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'none',
                'onClosed'  :   function() {
                            document.getElementById('iframe-video');

                },
                'onStart'       :   function() {
                            //alert("hi");
                            //$('#banner-rotator').royalSlider({slideshowEnabled:false,slideshowDelay:20000 });
                }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:17:48.623

当您在 fancybox 中打开内联内容（或者`#demoView`在`#divVideo`您的示例中）时，内容实际上是从其在*html*流中的位置移动到 fancybox中，`div`而是留下一个临时的。

因此，当您`#divVideo`在 fancybox 中打开时，只有该内容实际上是在 fancybox 中，所以这就是您可以将其淡出的原因。您不能淡入`#demoView`，因为它不存在于 fancybox 中。

也许你只需要在你的（暂停）事件回调中触发第二个幻想框，比如

```
function onPause() {
       froogaloop.addEvent('pause', function(data) {
                $('#example4').trigger("click"); //linkfunctionality you want to show
       });
 } 
```

...这会将第二个内容（`#demoView`）带入fancybox，而当前（`#divVideo`）将淡出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:18:58.373

现在是因为**demoView**的封闭 div被隐藏了吗？所以像...

```
$("#demoview").parent().css({'display','inherit'}); 
```

可以工作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:33:18.523

为什么父母还在？也许您应该取消它并将 style 属性放在您的 demoView div 上。

# java - 从 openssl 自签名证书文件创建 Java 密钥库

> ID：10363385
> 
> 赞同：0
> 
> 时间：2012-04-28T12:13:41.117
> 
> 标签：java, ssl, openssl

我是`Cryptography`概念的初学者。我想通过 连接到`SSL`用于其安全性的服务器`OpenSSL`。`PEM`它以格式给我它的证书文件。我想在java中使用它的证书文件。我认为必须将服务器证书文件转换为`Java TrustStore`.

我认为吗？你可以给我一个建议吗？

（对不起，如果我使用了错误的术语或语法，我正在学习英语。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:17:48.407

您应该可以直接导入它。请参阅该[实用程序的](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html)[文档`keytool`](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html)。

# mysql - 使用 MySQL 获取用户排名

> ID：10363388
> 
> 赞同：9
> 
> 时间：2012-04-28T12:14:00.550
> 
> 标签：mysql, ranking

我阅读了许多有关此问题的主题，但找不到解决方案。

我有一个包含我网站用户的表（称为用户）。他们有积分。例如：

```
+-----------+------------+
| User_id   | Points     |
+-----------+------------+
| 1         | 12258      |
| 2         | 112        |
| 3         | 9678       |
| 4         | 689206     |
| 5         | 1868       |
+-----------+------------+ 
```

在页面顶部设置了变量 $user_id。例如 user_id 为 4。现在我想按点获取用户的排名（如果 user_id 为 4，则输出应为 1）。

非常感谢你！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T12:20:40.253

```
SELECT 
    COUNT(*) AS rank 
FROM users 
WHERE Points>=(SELECT Points FROM users WHERE User_id=4) 
```

更新了一些更有用的东西：

```
SELECT 
    user_id, 
    points, 
    (SELECT COUNT(*)+1 FROM users WHERE Points>x.points) AS rank_upper, 
    (SELECT COUNT(*) FROM users WHERE Points>=x.points) AS rank_lower 
FROM 
    `users` x 
WHERE x.user_id = 4 
```

其中包括用户所在的等级范围。例如，如果前五名的分数是 5 4 3 3 3，那么结果将是：

```
id points rank_upper rank_lower
id 5      1          1
id 4      2          2
id 3      3          5
id 3      3          5
id 3      3          5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:20:01.003

这个查询应该做你想做的事：

```
SELECT rank FROM (
   SELECT User_id, Points,
          FIND_IN_SET(
                Points,
                   (SELECT  GROUP_CONCAT(
                           DISTINCT Points 
                            ORDER BY Points   DESC
                        )
               FROM    users)
            ) as rank
    FROM   users )
WHERE User_id = 4; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:17:03.173

如果您不想在 mysql 之外执行此操作，则需要使用变量来计算排名。

这是一个准确描述您想要的解决方案：

[http://www.fromdual.ch/ranking-mysql-results](http://www.fromdual.ch/ranking-mysql-results)

您仍然需要，您希望直接为每条记录拥有它，将其存储在记录中并自行更新。没有任何合理的查询可以直接为您提供排名，而无需在真实表上存储（我的意思是不只是几百条记录）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T12:20:55.263

已经[有一个简单的解决方案](http://thinkdiff.net/mysql/how-to-get-rank-using-mysql-query/)，适合您的目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-09T12:13:56.887

这可能会有所帮助

```
SELECT @rank:=@rank+1 AS rank,`User_id`,`Points` FROM `users` u JOIN (SELECT @rank:=0) r ORDER BY u.Points DESC 
```

# php - .htaccess 子域重定向到根域

> ID：10363394
> 
> 赞同：3
> 
> 时间：2012-04-28T12:14:40.647
> 
> 标签：php, .htaccess, mod-rewrite

我只是想问一个关于.htaccess 的快速问题。

这是我的虚拟主机如何与子域一起使用...

一旦我创建了一个子域......然后他们像这样在根文件夹中创建一个文件夹......

```
www.mydomain.com ---> public_html
sub.mydomain.com ---> public_html/sub 
```

我想要做的是......将所有请求从 sub.mydomain.com 重定向到 www.mydomain.com 并使用一些 GET 变量或其他东西来识别请求来自哪个子域......

所以例如......当我收到一个像这样工作的请求时

```
http://sub.mydomain.com/myphp.php ---> http://www.mydomain.com/myphp.php?comingfrom=sub
http://sub.mydomain.com/(anyUrl)  ---> http://www.mydomain.com/(anyUrl)?comingfrom=sub 
```

我还想知道这是否会执行主域中存在的一些 .htaccess 重定向...

希望大家能帮帮我...

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:47:00.030

将具有以下内容的 .htaccess 放入您的子域文件夹中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$ [NC]
RewriteRule ^(.*) http://www.mydomain.com$1?comingfrom=%1 [QSA,R=301,L] 
```

（未经测试，抱歉）

**编辑：**

您指出您希望将子域保留在地址栏中并且不想要重定向。所以你需要`<VirtualHost>`像这样对你的 www.mydomain.com进行视图更改

```
 <VirtualHost ...:80>
   ServerName www.mydomain.com
   ServerAlias mydomain.com
   ServerAlias sub.mydomain.com

   DocumentRoot /path/to/your/docroot/of/www.mydomain.com

   RewriteEngine On
   RewriteCond %{HTTP_HOST} !^www\.mydomain\.com [NC]
   RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$ [NC]
   RewriteRule ^(.*) $1?comingfrom=%1 [QSA,PT,L]
 </VirtualHost> 
```

# javascript - 有条件地将内容脚本加载到 FF/Chrome 中的 Safari 扩展程序中？

> ID：10363397
> 
> 赞同：3
> 
> 时间：2012-04-28T12:15:10.440
> 
> 标签：javascript, browser, safari, safari-extension, content-script

我正在为 Chrome、Firefox 和 Safari 编写一个相当复杂的浏览器扩展。

在 Chrome 和 Firefox 中，我可以根据 URL 匹配指定将哪些内容脚本注入哪些站点。

Safari 似乎没有提供任何此类（细粒度）功能——它们只允许所有站点使用一个白名单/黑名单。

有没有办法做到这一点？如果没有，我如何有条件地加载 Javascript 文件？（记住我不能将它们添加到 DOM 中）。

我试过[yepnope](http://yepnopejs.com/)，但它附加到 DOM。

注意：我不想在实际文件中添加逻辑，因为它们本质上是跨扩展复制的库代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T23:00:16.247

`safari.extension.addContentScript`并`safari.extension.addContentScriptFromURL`允许您以编程方式注入脚本。您可以在全局页面、扩展弹出框或扩展栏中使用这些方法。对于这两种方法，参数是：

*   要注入的脚本（分别作为字符串或 URL），
*   URL 模式的白名单，以匹配注入脚本的页面，
*   排除页面的黑名单，以及
*   是否将脚本作为结束脚本（或作为开始脚本）注入的布尔值。

有关详细信息，请参阅Safari 扩展参考中的[此页面](https://developer.apple.com/library/safari/#documentation/UserExperience/Reference/ExtensionClassRef/SafariExtension.html#//apple_ref/doc/uid/TP40009681)。

请注意，白名单和黑名单都使用与 UNIX 通配符相似（但不相同）的 URL 模式格式，并且不如正则表达式强大。[此模式格式在本页](https://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/ExtensionPermissions/ExtensionPermissions.html#//apple_ref/doc/uid/TP40009977-CH8-SW1)底部进行了说明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-07T16:56:00.363

接受的答案是正确的，但重要的是要注意，您不能以编程方式将脚本注入当前打开的选项卡，如 Chrome 和 Firefox 可以。SafariExtension[类参考](https://developer.apple.com/library/safari/#documentation/UserExperience/Reference/ExtensionClassRef/SafariExtension.html#//apple_ref/doc/uid/TP40009681)声明：

> **添加和删​​除样式表和脚本。**添加或删除内容样式表会立即应用于页面。添加或删除内容脚本仅适用于在该点之后打开或重新加载的页面。删除 Info.plist 文件中的样式表或脚本只会将其从当前浏览器会话中删除。

由于这个限制，通常更容易简单地依赖`Scripts`in 的属性`Info.plist`。

# java - 在 android\ 中发送嵌套请求

> ID：10363412
> 
> 赞同：0
> 
> 时间：2012-04-28T12:17:13.263
> 
> 标签：java, android, soap

当我的网络服务是这样时，如何使用肥皂调用网络服务.. 我需要填写 cus 详细信息我该怎么做.. 任何人都可以指导我

```
<registerCustomer xmlns="http://webservices.foodtruck.zsl.com/">
  <cusDetails>
    <FirstName>string</FirstName>
    <LastName>string</LastName>
    <EmailID>string</EmailID>
    <AddLine1>string</AddLine1>
    <AddLine2>string</AddLine2>
    <ZipCode>string</ZipCode>
    <City>string</City>
    <StateCode>string</StateCode>
    <PhoneNumber>string</PhoneNumber>
    <Username>string</Username>
    <Password>string</Password>
    <BrandID>int</BrandID>
    <DiscAgree>int</DiscAgree>
    <Latitude>string</Latitude>
    <Longitude>string</Longitude>
  </cusDetails>
       </registerCustomer>
       </soap:Body>
     </soap:Envelope> 
```

我用来调用服务的代码：final String METHOD_NAME = ServiceStrings.registerMethod; 最终字符串 SOAP_ACTION = ServiceStrings.registerSoapAction；尝试 {

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo pi = new PropertyInfo();

        pi.setName("cusDetails");
        pi.setValue(new SoapObject(NAMESPACE, "cusDetails")
        .addProperty("FirstName", fname)
        .addProperty("LastName", lname)
        .addProperty("EmailID", email)
        .addProperty("AddLine1", add1)
        .addProperty("AddLine2", add2)
        .addProperty("ZipCode", zip)
        .addProperty("City", city)
        .addProperty("StateCode", state)
        .addProperty("PhoneNumber", phoneno)
        .addProperty("Username", email)
        .addProperty("Password", pwd)
        .addProperty("BrandID", 1)
        .addProperty("DiscAgree", 1)
        .addProperty("Latitude", "11.2")
        .addProperty("Longitude", "11.2"));

        request.addProperty(pi); 
```

但我得到一个错误

```
Server was unable to read request. ---&gt; There is an error in XML document (1, 316). ---&gt; The specified type was not recognized: name='cusDetails', namespace='http://webservices.foodtruck.zsl.com/', at &lt;cusDetails xmlns='http://webservices.foodtruck.zsl.com/'&gt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:57:18.763

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo pi = new PropertyInfo();
        pi.setName("cusDetails");
        pi.setValue(new SoapObject(NAMESPACE, "Customer")
                .addProperty("FirstName", fname)
                .addProperty("LastName", lname)
                .addProperty("EmailID", email)
                .addProperty("AddLine1", add1)
                .addProperty("AddLine2", add2).addProperty("ZipCode", zip)
                .addProperty("City", city).addProperty("StateCode", state)
                .addProperty("PhoneNumber", phoneno)
                .addProperty("Username", email)
                .addProperty("Password", pwd)
                .addProperty("BrandID", brandid)
                .addProperty("DiscAgree", flag)
                .addProperty("Latitude", "11.2")
                .addProperty("Longitude", "11.2"));

        request.addProperty(pi);
        Log.e("req", brandid);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(
                URL); 
```

# linux - 如何修复打开写入 P4 错误？

> ID：10363414
> 
> 赞同：1
> 
> 时间：2012-04-28T12:17:17.023
> 
> 标签：linux, perforce

如果出现以下错误，我很难摆脱：

> bash-3.00$ p4 登录
> 
> 输入密码：
> 
> 致命的客户端错误；断开连接！
> 
> 打开写入：/home/myuserid/tmp.17236.3：没有这样的文件或目录

该文件不存在，我也不知道它为什么会存在。

我怎样才能清除这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:15:52.673

有几个环境变量可能在起作用。它们控制 Perforce 用于中间文件的临时位置，以及包含登录票证的票证文件的位置。正如 Bryan 所说，您应该运行“p4 set”并查看与 Perforce 相关的环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:43:06.240

这是我的主目录的权限问题。

正确创建主目录后，问题就解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-29T14:59:06.817

1.  右键单击*cmd.exe*
2.  “以管理员身份运行”
3.  再次尝试您的命令

# java - “USB 主机支持不可用”消息的根本原因是什么？

> ID：10363415
> 
> 赞同：3
> 
> 时间：2012-04-28T12:17:25.313
> 
> 标签：java, usbserial, jusb

我正在尝试使用 jUSB 库通过 USB 到串行电缆发送数据。我在 Windows 上的 NetBeans IDE 中进行编码。

消息背后的问题是什么：以下代码中的“USB Host support is available”：

```
package usb.core;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.List;    
import usb.core.*;

public class Main {
    public static void main(String[] args) throws IOException {
        try {
            // Bootstrap by getting the USB Host from the HostFactory.
            Host host = HostFactory.getHost();

            // Obtain a list of the USB buses available on the Host.
            Bus[] bus = host.getBusses();
            int total_bus = bus.length;
            System.out.println(total_bus);
            // Traverse through all the USB buses.
            for (int i = 0; i < total_bus; i++) {
                // Access the root hub on the USB bus and obtain the
                // number of USB ports available on the root hub.
                Device root = bus[i].getRootHub();
                int total_port = root.getNumPorts();

                // Traverse through all the USB ports available on the 
                // root hub. It should be mentioned that the numbering 
                // starts from 1, not 0.
                for (int j = 1; j <= total_port; j++) {
                    // Obtain the Device connected to the port.
                    Device device = root.getChild(j);
                    if (device != null) {
                        // USB device available, do something here.
                        // Obtain the current Configuration of the device
                        // and the number of interfaces available under the
                        // current Configuration.
                        Configuration config = device.getConfiguration();
                        int total_interface = config.getNumInterfaces();

                        // Traverse through the Interfaces
                        for (int k = 0; k < total_interface; k++) {
                            // Access the current Interface and obtain the 
                            // number of endpoints available on the Interface 
                            Interface itf = config.getInterface(k, 0);
                            int total_ep = itf.getNumEndpoints();

                            // Traverse through all the endpoints.
                            for (int l = 0; l < total_ep; l++) {
                                // Access the endpoint and
                                // obtain its I/O type
                                Endpoint ep = itf.getEndpoint(l);
                                String io_type = ep.getType();
                                boolean input = ep.isInput();

                                // If the endpoint is an input endpoint,
                                // obtain its InputStream and read in data.
                                if (input) {
                                    InputStream in;
                                    in = ep.getInputStream();
                                    // Read in data here
                                    in.close();
                                }
                                else {
                                    // If the Endpoint is an output Endpoint,
                                    // obtain its OutputStream and
                                    // write out data.
                                    OutputStream out;
                                    out = ep.getOutputStream();
                                    // Write out data here.
                                    out.close();
                                }
                            }
                        }
                    }
                }
            }

        }
        catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:15:34.170

我用谷歌搜索了那个错误信息，我发现：

*   2005 年的一个论坛帖子说，*在 Linux 上，*这可能是由于其他东西抢占了 USB 控制器的独占使用：http: [//bytes.com/topic/java/answers/16736-jusb](http://bytes.com/topic/java/answers/16736-jusb)

*   [源代码](http://read.pudn.com/downloads52/sourcecode/windows/comm/179902/JavaSources/usb/core/HostFactory.java__.htm)的在线副本，这表明如果 getHost 尝试创建（特定于平台的）HostFactory 失败，则会发生这种情况。不幸的是，代码会遇到意外异常 (*)，因此您需要使用 Java 调试器来确定真正的代码是什么。

`Exception`(* 代码在其他地方捕获`maybeGetHost`并丢弃诊断程序！这是一个主要的禁忌，也是图书馆整体代码质量的一个大红旗。如果我是你，我会寻找更好的质量要使用的库。）

# mysql - tomcat jdbc 故障转移主机

> ID：10363419
> 
> 赞同：3
> 
> 时间：2012-04-28T12:18:11.790
> 
> 标签：mysql, tomcat, jdbc, failover

我目前正在使用配置有自己的 jdbc 池的 tomcat7，如下所述：[http](http://www.tomcatexpert.com/blog/2010/04/01/configuring-jdbc-pool-high-concurrency) ://www.tomcatexpert.com/blog/2010/04/01/configuring-jdbc-pool-high-concurrency 。

我还有一个 mysql 的主/主配置（复制），我想知道如何（如果可能的话..）配置 tomcat 以在 2 个 mysql 之间进行故障转移。因此，例如，如果 mysql1 出现故障，请再次针对 mysql2 打开所有池。关于如何实现这一目标的任何想法？

如果不是 tomcat，我也不介意切换到另一个 jdbc 实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:39:19.780

您可以尝试[C-JDBC](http://c-jdbc.ow2.org/index.html)及其[文档](http://c-jdbc.ow2.org/current/doc/userGuide/html/userGuide.html#configuring_cjdbc_with_tomcat)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:56:29.943

[HA-JDBC](http://ha-jdbc.github.com/)似乎符合要求。它是一个库，在网站上列出的许多中提供高可用性和故障转移功能。连接池是需要考虑的一个方面。

# php - 文本文件更新、添加和删除

> ID：10363421
> 
> 赞同：2
> 
> 时间：2012-04-28T12:18:32.330
> 
> 标签：php, html

好的，我有这个代码：

```
<?php

//this is the thispage.php

$file = "data.txt";
$name = $_POST['name'];
$url = $_POST['url'];

$data = file('data.txt');
$i = 1;
foreach ($data as $line) {
$line = explode('|', $line);
$i++;
}

if (isset($_POST['submits'])) {
$fp = fopen($file, "a+");
fwrite($fp, $i."|".$name."|".$url."|\n");
fclose($fp);
}

?> 
```

还有这个 index.php。

```
<html>
<head>
</head>
<body>
<br>
<form name="form1" action="thispage.php" method="POST">
<input type="text" name="name">
<input type="text" name="url">
<input type="submit" name="submits" value="ADD"><br>
</form>
<form name="form2" action="thispage.php" method="POST">
<?php

$display = file("data.txt");
   for ($i=0; $i<=count($display)-1; $i++) {
   $lines = explode("|",$display[$i]);

   print('<input type="hidden" name="id" value="'.$lines[0].'">
             <input type="text" name="name" value="'.$lines[1].'">
             <input type="text" name="url" value="'.$lines[2].'">
             <input type="submit" name="update" value="UPDATE">
             <input type="submit" name="delete" value="DELETE"><br>');
   }

?>
</form>
</body>
</html> 
```

这是 data.txt 包含的内容。

```
1|John|http://www.john.com|
2|Mark|http://www.mark.com|
3|Fred|http://www.fred.com|
4|Johnxxx|asdasdasdasd| 
```

我很难，使这个工作，尝试更新和删除，我可以添加但我不能更新和删除。希望你们能帮帮我，这是过期的。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:52:56.547

我不太确定你在这里要求什么，通常你会使用数据库进行这种存储，正如 ulvund 所说，但正如你所说，这是一个实验，所以我同意它；）

根据您提供的代码，即插入和查看，我看到了一些可能发生的问题。您说更新和删除有问题，但没有该部分的代码。您有一些无法正常工作的代码，或者您在询问下一步该怎么做？

**我在这段代码中看到的问题**

*   如果有人提交带有“\n”（换行符）的表单怎么办？这会弄乱您的数据（或至少几行，具体取决于用户发布的 \n 数量。

*   当您删除第 2 行并再次插入新行时会发生什么？由于您计算行数的方式，您最终将得到 2 行 #4，并使用其结果来弥补下一个 INSERT 的 id

*   $line = explode('|', $line); “thispage.php”中的这一行根本什么都不做，因为您只想计算行数，而不是将所有数据提取到数组中。正如我之前所说，这种构成 id 的方式不是一个好主意。

所以，如果这个实验对你来说是值得的，你需要考虑将“自动增加 ID”存储在单独的文件中，或者将数据库文件的第一行作为元行，包含元数据作为 AI ID 和你可能想在那里拥有的其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:01:23.313

根据您所拥有的，类似下面的内容可能会起作用。但是，请务必阅读[user1362861](https://stackoverflow.com/a/10363652/482758)和[ulvund](https://stackoverflow.com/a/10363443/482758)的答案。有很多方法可能会出错，如果您打算在实践中应用它，最好使用数据库。

```
<?php
//this is the thispage.php

$file = "data.txt";
$name = $_POST['name'];
$url  = $_POST['url'];
$id   = $_POST['id'];
$mode = $_POST['mode'];

$data = file('data.txt');
$i = 1;
foreach ($data as $line) {
    // You're not doing anything with this.
    //$line = explode('|', $line);
    $i++;
}

if (isset($_POST['submits'])) {
    if ($mode === 'add') {
        $fp = fopen($file, "a+");
        fwrite($fp, $i."|".$name."|".$url."|\n");
        fclose($fp);
    } else {
        $fp = fopen($file, "r+");
        foreach ($data as $line) {
            $l = explode('|', $line); // $l = substr($line, 0, strpos($line, '|'));
            if ($id === $l[0]) {
                if ($mode === 'update') {
                    fwrite($fp, $l[0]."|".$name."|".$url."|\n");
                } // else delete; don't re-write this line.
            } else {
                fwrite($fp, $line);
                // This assumes IDs are attached to data, not line numbers.
                // If that isn't the case, storing the ID (line number) is pointless.
            }
        }
        fclose($fp);
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T14:11:42.327

为什么不使用数据库呢？您可以使用数据库轻松更新、删除、插入。

# c++ - 在 Qt 中实现所见即所得

> ID：10363427
> 
> 赞同：2
> 
> 时间：2012-04-28T12:19:20.723
> 
> 标签：c++, qt, wysiwyg

我想做的是做一个所见即所得的编辑器，不是很大，只是常用的实用程序，在Qt中如此粗体、斜体、下划线、大小、字体。

我现在的方法是在 QTextEdit 中制作它，当用户单击按钮时，我会收到信号并使用光标索引放置 html 标签，但我不知道这是否是个好主意。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:15:06.227

您始终可以使用**webkit**模块并继续使用该`contentEditable`功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:23:50.620

> 有什么建议吗？

研究“订单”和“语法荧光笔”示例。另外，请阅读 QTextCursor 和 QTextDocument 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:05:30.503

我认为您指的是文档的内部格式。您只需要一个解决方案来保留格式化信息，以便编辑器/查看器可以解释它。当然，您可以为此选择 HTML 或类似 HTML 的标签。我建议查看广泛用于此的[BBCodes 。](http://en.wikipedia.org/wiki/BBCode)

由于所见即所得的性质，内部格式应该对用户不可见。我不知道 QTextEdit 实现这一目标的能力。也许有一个 HTML/BBCode 扩展？

# python - 如何杀死cherrypy进程？

> ID：10363438
> 
> 赞同：0
> 
> 时间：2012-04-28T12:20:57.647
> 
> 标签：python, cherrypy, kill-process

我`cherrypy`在python脚本中使用。我想我必须从主应用程序注册一个回调方法，以便我可以从工作线程停止cherrypy主进程，但是我如何杀死该进程中的主进程。

所以我想知道如何`cherrypy`从主进程中停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:29:58.710

试试这个。

```
import sys

class CherryPyApp(object):

  def default(self):
    sys.exit()
  default.exposed = True

cherrypy.quickstart(CherryPyApp()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:16:24.450

如果您的进程使用 CherryPy 来阻止（通过 quickstart 或 engine.block），那么您可以简单地调用：`cherrypy.engine.exit()`从您的页面处理程序。这将是最干净的选择，因为它会正确终止您可能订阅的 CherryPy 和插件。

# mysql - FROM_UNIXTIME 和性能

> ID：10363440
> 
> 赞同：0
> 
> 时间：2012-04-28T12:21:09.350
> 
> 标签：mysql

FROM_UNIXTIME 是否会严重影响如下查询的性能：

```
 (
            (calltasks.task_dueDate = '".$date."') # Tasks of this date
            OR 
            (calltasks.task_dueDate < '".$date."' AND calltasks.task_status = 'scheduled') # Tasks still available on this date
            OR 
            (FROM_UNIXTIME(calltasks.task_executionTime, '%Y-%m-%d') = '".$date."') # Tasks finished this date
        ) 
```

或者我应该没问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:37:27.180

与其将您的 UNIX 时间转换为格式化的字符串，然后比较它们（就像您目前一样），不如使用[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)将您的`$date`变量转换为 UNIX 时间，然后比较整数（检查差异不超过 24 小时） . 整数比较总是比字符串比较快：

```
(calltasks.task_executionTime - UNIX_TIMESTAMP('$date')) BETWEEN 0 AND 86400 
```

或者，您可能会发现您已经在`$date`调用此查询的语言中很容易获得某个位置的 UNIX 时间戳值：例如，PHP 将日期存储为 UNIX 时间戳。

请注意，如果您以这种方式将 SQL 插入到查询中，您应该*绝对确定*不能`$date`被操纵以包含 SQL；如果有任何疑问，您应该使用准备好的陈述：如果您不知道原因或它们是什么，请阅读[Bobby Tables](http://bobby-tables.com)。

# java - 如何处理 JTable 单元格中的多个超链接？

> ID：10363445
> 
> 赞同：1
> 
> 时间：2012-04-28T12:22:01.523
> 
> 标签：java, hyperlink, jtable, cell

我的一个单元格中有多个超链接`JTable`。

如果我们点击特定链接，那么超链接 URL 应该在 Internet Explorer 中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:28:34.343

JTable 支持 html，它使用 JLabel 字符串解析器/渲染器，因此您可以插入例如

`<html><a href="http://link1.com">link1</a><br><a href="http://link2.com">link2</a></html>`进入其中一个单元格，它应该可以正常工作。

# .net - 如何在可移植类库中创建线程？

> ID：10363446
> 
> 赞同：8
> 
> 时间：2012-04-28T12:22:02.953
> 
> 标签：.net, portable-class-library

在我将项目转换为可移植类库后，使用 xna 针对 xbox360 的 F# 代码无法编译。

```
let thread = Thread(fun () ->
    setAffinity() 
```

线程得到红色曲线并且错误消息说

> 错误 1 ​​此类型没有可访问的对象构造函数

果然，如果我在对象资源管理器中查看 mscorlib，该类型没有构造函数。然而，根据[MSDN](http://msdn.microsoft.com/en-us/library/xx3ezzs2%28v=vs.110%29.aspx)，构造函数存在于 xbox 和 PCL 中。

编辑：我尝试使用 C# PCL，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:44:25.293

创建线程是不可移植的。您的链接是错误的，它没有谈论 PCL。

这是使用可移植类库的成本，它是减去至少一个可能的目标不支持的所有内容后剩下的成本。剩下的不多，PCL很小。最大的问题是实际上并未提及支持的目标，即 WinRT（又名 Metro）。它有一个严格限制的 api。

请考虑 ThreadPool.QueueUserWorkItem() 代替。我假设有一天 PCL 会支持 Task。这是一项正在进行中的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:06:29.887

不要油嘴滑舌，但这听起来像一个错误，这就是我要继续的方式。将其发送给 Microsoft dot com 的 fsbugs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:50:53.797

在 .NET 4.0、SL5、Phone 7.5 中有一个支持异步的 BETA 版本。请参阅 David Kean 在此线程上的帖子：

[Async CTP 可以与可移植库一起使用吗](https://stackoverflow.com/questions/9152634/can-the-async-ctp-be-used-with-a-portable-library)

以及 BCL 博客上的这篇文章：

[http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)

# c - IP 地址左移表示

> ID：10363448
> 
> 赞同：3
> 
> 时间：2012-04-28T12:22:25.763
> 
> 标签：c, ipv4

我在一些旧的和错误的 C 代码中发现了以下内容：

```
#define addr (((((147 << 8) | 87) << 8) | 117) << 8) | 107 
```

它是什么？好吧，我知道这是一个 IP 地址 - 向左移动 8 位也很有意义。但是任何人都可以向我解释这个整体吗？那里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T12:36:57.413

编码

```
(((((147 << 8) | 87) << 8) | 117) << 8) | 107 
```

生成包含 IP 147.87.117.107 的 4 个字节。第一步是最里面的括号：

```
147<<8
147 = 1001 0011
1001 0011 << 8 = 1001 0011 0000 0000 
```

第二个字节 87 通过 (147<<8) 上的按位或操作插入。如您所见，右边的 8 位都是 0（由于 <<8），所以按位或运算只是插入 87 中的 8 位：

```
1001 0011 0000 0000  (147<<8)
0000 0000 0101 0111  (87)
-------------------  bitwise-or
1001 0011 0101 0111  (147<<8)|87 
```

其余部分也是如此，因此最后将 4 个字节保存到一个 32 位整数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T12:33:54.160

IPv4 地址由四个字节组成，这意味着它可以存储在 32 位整数中。这是采用 IP 地址 (147.87.117.107) 的四个部分并使用位移和按位 OR 运算符将地址“编码”为单个 4 字节数量。

（注意：地址可能是 107.117.87.147 - 我不记得字节的存储顺序。）

结果数量的（十六进制）字节如下所示：

```
aabb ccdd 
```

其中aa是147（0x93）的十六进制表示，bb是87（0x57），cc是117（0x75），dd是107（0x6b），所以得到的值是9357756b。

*更新：*这些都不适用于 IPv6，因为 IPv6 地址是 128 位而不是 32 位。

# html - 用于图像的 Twitter 引导模式

> ID：10363451
> 
> 赞同：7
> 
> 时间：2012-04-28T12:22:44.170
> 
> 标签：html, twitter-bootstrap, modal-dialog, lightbox

我有一个页面，其中包含注册用户的详细信息。每个 html 表包含 80-90 个用户。对于每个用户，都有一个 $username 变量。我通常在表格中显示他们的图片，如下面的代码。

```
print "<a href=\"small-avatar-$username.jpg\" target=\"_blank\">
<img src=\"big-avatar-$username.jpg\">
</a>"; 
```

但用户可以在新选项卡中打开图像。我想轻松展示大头像。我的第一选择是**lightbox-jquery**。但是因为我在我的网站中使用了**twitter-bootstrap**，所以我决定使用默认的 bootstrap 和 jquery 功能。

我看到有“引导模式”。当用户点击链接时，我不打算展示比我大图更多的东西。

我试过这个：

```
print "<a href=\"#$username" data-toggle=\"modal\" class=\"img-modal\" >
        <img src=\"small-avatar-$username.jpg\" ></a>";
print '</td>'; 
```

.

```
print "<div id=\"$username\" class=\"modal\">";
       <img src=\"big-avatar-$username.jpg\">
print "</div>"; 
```

.

```
<script type="text/javascript" id="js">
        $('#username').modal();
</script> 
```

我想将`$('#username').modal();`
每个用户放到我的页面上会使 HTML 文件变得很大。

但是后来我尝试了这样的锚的类名：`$('.img-modal').modal();`
但这不起作用。

在这种情况下你会推荐什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T16:15:23.507

我建议您在标签中使用[HTML5 自定义数据属性](http://html5doctor.com/html5-custom-data-attributes/)`<a>`来识别用户名并保留您的`img-modal`课程。

```
"<a href="#myModal" data-username='".$username."' class="img-modal">... 
```

点击 .img-modal 触发对 modal 的调用（您不需要 data-toggle="modal"）

```
$('.img-modal').click(function(event) { 
```

您可以通过使用获取用户名的值

```
var username = $(this).attr('data-username') 
```

由于您拥有用户名，因此您可以将独特模式中的标签`src`属性替换为类似的内容。`<img>`

```
$("#img-in-modal").attr("src","big-avatar-" + username + ".jpg") 
```

并打开你的模态

```
$('#myModal').modal('show') 
```

最后，确保包含 bootstrap-modal.js 或 boostrap.js。

# haskell - 隐式参数是 GHC 内联的困难吗？

> ID：10363452
> 
> 赞同：5
> 
> 时间：2012-04-28T12:23:10.507
> 
> 标签：haskell, ghc, lambda-calculus, implicit-parameters

我很好奇Kiselyov 和 Shan 在[Function Pearl: Implicit Configurations](http://www.cs.rutgers.edu/~ccshan/prepose/prepose.pdf)文章 中讨论的对[隐式参数的反对意见。](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/other-type-extensions.html#implicit-parameters)

> 在存在隐式参数的情况下内联代码（β-reduce）是不合理的。

真的吗？我希望 GHC 应该内联到与传递的隐式参数相同的范围，不是吗？

我相信我理解他们的反对意见：

> 如果添加、删除或更改术语的签名，则术语的行为可能会发生变化。

GHC 的用户文档解释说，程序员必须注意[多态递归](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/other-type-extensions.html#id3176878)和[单态限制](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/other-type-extensions.html#id3176948)。这是否是他们所说的内联问题的意思？

我认为这个多态递归示例也涵盖了“对隐式参数进行泛化”的含义？还要别的吗？

[Data.Reflection](http://hackage.haskell.org/packages/archive/reflection/0.5/doc/html/Data-Reflection.html)中的`ReifiesStorable`类型类真的是解决这些困难的明智之选吗？它似乎在每次访问时都会反序列化整个隐式数据结构，这听起来对性能来说是灾难性的。例如，我们可能希望我们的隐含信息是 Cayley 表或字符表，它们占据了 ram，并且必须在数百万次代数运算期间访问。

是否有一些更好的解决方案使用隐式参数，或者编译器可以在幕后轻松优化的另一种技术，同时仍然通过使用状态线程或其他方式的类型系统保证更多？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:16:46.737

是的，GHC 手册中的示例显示了添加类型签名如何通过隐式参数改变代码的语义，我相信这就是打破内联的意思；内联应用程序`len_acc1`与应用程序`len_acc2`会产生相同的代码，尽管两者具有不同的语义。

就隐式参数的泛化而言，这意味着您不能编写可以对多个隐式参数进行操作的函数；没有对它们进行抽象的机制，因为函数使用的隐式参数由其类型固定。使用反射，您可以轻松编写类似 的函数`doSomethingWith :: (Reifies s a, Num a) => Proxy s -> a`，该函数可以对任何具体化数值的类型进行操作。

至于`ReifiesStorable`，您正在查看的是反射包的旧版本；[最新版本](http://hackage.haskell.org/package/reflection)有一个非常有效的实现，`reify`它只需要一个函数调用的成本。¹请注意，即使使用旧实现，您通常也不会`ReifiesStorable`直接使用该类，而是`Reifies`使用`ReifiesStorable`用于具体化 a 的类`StablePtr`，因此最终只复制了几个字节，而不是整个对象。（这也是论文中的原始实现所做的。）这两种实现对于实际使用来说绝对足够快，旧的“慢”实现需要大约 100 毫秒来具体化和反映 100000 个值，而新的实现则在 10小姐。

（完全披露：我致力于新的实施。）

¹快速实现取决于 Haskell 实现细节。较旧、较慢的实现会自动用于尚未测试快速实现的 Haskell 实现；到目前为止，GHC 和 Hugs 已被证明可以与快速实施一起工作。您可以使用 请求缓慢的实现`-fslow`，但除非 GHC 对其类型类的实现进行重大检查，否则它不太可能停止工作。（即使是这样，您也只需重新编译使用反射的包即可使其再次工作。）

# ruby - 如何让 eval 返回带小数位的数字？

> ID：10363453
> 
> 赞同：1
> 
> 时间：2012-04-28T12:23:19.507
> 
> 标签：ruby, eval

我正在用一个简单的例子来尝试 eval 函数：

```
<% a = 5 %>
<% b = 4 %>
<%= eval("((a+b)/b)") %> 
```

我希望结果为 2.25，但上面给出 2。下面的代码给出 2.25 但不是很优雅

```
<% a = 5 %>
<% b = 4 %>
<%= eval("((a.to_f+b.to_f)/b.to_f)") %> 
```

如何让 eval 以更好的方式返回带小数位的数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T12:31:43.127

您所需要的只是除法的分母是浮点数，Ruby 会理解在表达式上使用浮点运算而不是默认的整数运算：

```
irb(main):001:0> a = 5
irb(main):002:0> b = 4
irb(main):003:0> a / b
=> 1
irb(main):004:0> a / b.to_f
=> 1.25
irb(main):005:0> (a + b) / b.to_f
=> 2.25 
```

**编辑**

进一步澄清 - 它实际上与本身无关`eval`。这正是 Ruby（和大多数其他语言）处理算术表达式的方式。默认情况下，大多数表达式都是使用整数算术完成的。

在 Ruby 中进行除法时，您只需要将除数*或*除数设为浮点数即可触发浮点运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:32:09.053

仅使用`Fixnum#to_f`一个或将任何值乘以`1.0`：

```
(a*1.0+b)/b 
```

或者

```
(a.to_f+b)/b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T12:33:00.960

您只需要将除数转换为浮动

```
<% a = 5 %>
<% b = 4 %>
<%= eval("((a+b)/b.to_f)") %> 
```

无论如何，**eval**只是评估字符串中的 Ruby 表达式。我认为您的示例中根本不需要它。

```
<%= (a+b)/b.to_f %> 
```

# android - MapView - 如何缩放到 GeoCode 服务返回的视口

> ID：10363454
> 
> 赞同：0
> 
> 时间：2012-04-28T12:23:38.803
> 
> 标签：android, android-mapview

当我从 Google 的 GeoCode 服务收到地理编码响应时，它包含一个推荐的视口，描述为 Lat/Lng 对。

如何放大/缩小到推荐的视口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:30:42.143

为了导航到特定的纬度，您需要使用以下方法。

用你的经纬度替换地理点

```
mapView.animateTo(geopoint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:07:44.873

这个问题的答案是使用 MapController.zoomToSpan(...)。找出北/东坐标和南/西坐标之间的差异，然后调用 zoomToSpan 方法。

更详细的描述可以在这里找到[在 Android 上获取地图缩放级别，例如在 JS Google Maps API 上：user640688 发布中的 map.getBoundsZoomLevel(bounds)](https://stackoverflow.com/questions/4979165/getting-map-zoom-level-for-given-bounds-on-android-like-on-js-google-maps-api-m)。

# r - 使用 R igraph 包进行数据可视化

> ID：10363456
> 
> 赞同：1
> 
> 时间：2012-04-28T12:24:23.193
> 
> 标签：r, graph, data-visualization

我正在做关于数据挖掘的作业。现在我有一个数据集，它代表社交网络中的熟人网络。我想可视化这个网络。在这个网络中，顶点代表用户，边代表熟人关系。现在我为 R 使用 igraph 包来实现我的目标。但是，我的数据集太大，超过10万个顶点，超过100万条边，导致生成的图不清晰。事实上，该图是完全无法识别的。如何使用 igraph 包获得清晰的图形？或者，哪个软件可以完成这个任务？

ps：我的数据集喜欢这样：

```
100 20
10  2
2   4 
```

每条线代表两个人之间的关系

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:02:27.597

除了 Cytoscape，您可能还想查看[Gephi](http://gephi.org/)。

另一种（完全不同的）网络可视化方法是使用[蜂巢图](http://egweb.bcgsc.ca/)——也值得一试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:33:10.227

如果你想在这个论坛上得到答案，你至少需要提供少量你想分析的数据，很多人会帮助你有一个好的开始。

您可能还需要考虑使用专为网络分析而设计的应用程序，例如[Cytoscape 。](http://www.cytoscape.org/)开始对这个大型网络进行可视化和探索可能会更容易。

# sql - 如何从 Oracle VM OBIEE 连接本地 sql 数据库

> ID：10363458
> 
> 赞同：-1
> 
> 时间：2012-04-28T12:24:34.070
> 
> 标签：sql, oracle, odbc, obiee

我正在为 OBIEE 使用 Oracle VM，并且我想连接我的本地 SQL 服务器数据库

我该怎么做？它们是用于 vm 机器的任何 ODBC 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:53:33.777

在连接到虚拟机和从虚拟机连接时，棘手的部分是弄清楚如何设置 IP 地址和整体网络。odbc 连接到物理机或虚拟机并没有什么“特别”之处。

# php - 我可以使用有效的 open_basedir 访问 /dev/urandom 吗？

> ID：10363465
> 
> 赞同：9
> 
> 时间：2012-04-28T12:25:19.323
> 
> 标签：php, codeigniter, phpass

我想在 Codeigniter 中使用 phpass-0.3，但由于以下原因出现以下错误`open_basedir`：

> 遇到 PHP 错误
> 严重性：警告
> 消息：is_readable() [function.is-readable]：open_basedir 限制生效。文件（/dev/urandom）不在允许的路径中：（/home/phginep:/usr/lib/php:/usr/local/lib/php:/tmp）
> 文件名：phpass-0.3/PasswordHash。 php
> 行号：51

以下代码：

```
function get_random_bytes($count)
{
    $output = '';
    if (is_readable('/dev/urandom') &&    //Line Number: 51
        ($fh = @fopen('/dev/urandom', 'rb'))) {
        $output = fread($fh, $count);
        fclose($fh);
    }

    if (strlen($output) < $count) {
        $output = '';
        for ($i = 0; $i < $count; $i += 16) {
            $this->random_state =
                md5(microtime() . $this->random_state);
            $output .=
                pack('H*', md5($this->random_state));
        }
        $output = substr($output, 0, $count);
    }

    return $output;
} 
```

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T14:05:21.300

您在这里有一些选择：

1 - 从真正的 RNG 下载转储（[这个](http://www.random.org/files/)提供基于放射性衰变的转储）并使用它，只要确保您不要一直读取相同的 nn 个字节。有点笨重，但是一个选择。

`/dev/urandom`2 - 让 PHP 执行代表它读取的内容(UGLY)

3 - 回退`mt_rand()`（也很难看，但我已经看到这样做了）：

```
 for ($i = 0; $i < $count / 8; $i++) {
   $output .= dechex(mt_rand(0, 0x7fffffff));
 } 
```

不幸的是，所有选项都笨拙且丑陋。最好的办法是确保您不必处理`open_basedir`. 不过，这种特殊的烦恼是可以解决的。

**最后 - 不太可能与您的主人一起飞行，但也许值得一试：**

您可以要求您的主机`urandom`在您的主目录中提供，以便您阅读它。告诉他们您需要访问 urandom 以生成随机数，以便为您的用户提供更好的安全性，然后让他们运行：

```
mknod urandom c 1 9 
```

在您的主目录中。我只是在我自己的服务器上尝试过，它可以工作（但 root 需要为你做）。没有实际理由阻止您使用系统的伪随机数生成器，您可以使用 PHP 以外的*任何*其他方式执行此操作。这实际上是他们让您访问的最简单的方法，`urandom`因为它不需要 PHP 或 vhost 配置中的任何例外。

禁止访问`/dev/random`是一件合理的事情，因为`/dev/random`必须通过可用的（新）系统熵来补充，并且如果用尽，可能会导致重要的事情在读取时被阻塞，这可能在低流量服务器上经常发生。但是，`/dev/urandom`保证永远不会阻塞，因为它只是在耗尽后重用内部熵池，这就是为什么它是质量较差的源。

**笔记**

我并不是说 的*想法*是`open_basedir`一个坏的想法，但它也破坏了*好的*代码。经典`chroot`要好得多，但更难，这就是为什么你遇到`open_basedir`的问题比真正的 chroot 多得多。至少，任何程序都应该能够访问服务器上`null`的`zero`和`urandom`设备。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T10:45:39.173

phpass 正在尝试访问`/dev/urandom`，这在您的中是不允许的。`php.ini` 要解决此问题，您必须禁止显示警告。为此，只需添加`@`before `is_readable`，如下所示：

```
...
@is_readable('/dev/urandom')
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:27:40.863

看起来您使用的是共享主机托管，并且他们已将 PHP 配置为仅允许您访问帐户中的文件和目录（这是有道理的）。如果是这种情况，您无能为力，因为共享主机不允许更改以允许您访问该资源。如果您有专用服务器或 VPS，您可以更改您的 PHP 配置 (php.ini) 以允许访问该资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-02T18:41:16.933

```
cd /nginx/chroot/
touch random
touch urandom
mount --bind /dev/random /nginx/chroot/dev/random
mount --bind /dev/urandom /nginx/chroot/dev/urandom 
```

我的 phpmailer 现在已经在 nginx chroot centos 7 中工作了

php nginx RAND_BYTES stream_socket_enable_crypto php nginx stream_socket_enable_crypto 未捕获的异常：无法打开源设备 php nginx RAND_BYTES stream_socket_enable_crypto stream_socket_enable_crypto(): SSL

# ios5 - iOS 5.x - 视图控制器之间的 Segue

> ID：10363469
> 
> 赞同：2
> 
> 时间：2012-04-28T12:26:09.483
> 
> 标签：ios5, segue

假设我们有一个应用程序，它有很多视图控制器和一个导航栏。现在，应用程序从视图 A 开始，然后我们可以按下一步并转到 B，按下一步并转到 C 等等。现在，在最后一个视图中，假设 Z - 我们有一个“转到第一个”按钮。我所做的是，从视图 Z 拖到视图 A 并创建了一个 segue。我给了那个segue一个标识符，比如说“goToA”。现在，当按下按钮时，我做了类似的事情

```
-(IBAction)goToFirstPressed{
[self performSegueWithIdentifier:@"goToA" sender:self];
} 
```

它做了什么——它去了 A。但这是重要的部分——它不是第一次出现在屏幕上的 A，而是视图控制器 A 的另一个实例。所以假设我有第一个视图控制器（A）播放视频，现在我转到 Z 然后 segue，我不会再看到那个视频了，更重要的是 - 我可以播放相同的视频两次，重叠声音。关于如何解决这个问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:48:38.933

Segue 只向一个方向发展。它总是会为您导航到的视图创建一个新实例。

您可以为此使用委托。

试试[这个](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)

您可以如下实现该协议方法：

```
- (void) goToFirstView{

  [[self navigationController] popToRootViewControllerAnimated:YES]; 

} 
```

# core-data - 在 CoreData 的 NSArray 中查询 NSNumber 的正确方法是什么？

> ID：10363470
> 
> 赞同：0
> 
> 时间：2012-04-28T12:26:13.430
> 
> 标签：core-data, nsarray, nspredicate, nsnumber, nsfetchrequest

我有一个实体，其 ID 类型列名为“responsibleUsers”。在本专栏中，我存储了一个包含 NSNumber 的数组。我想获取与我当前用户匹配的该实体的所有对象。因此我创建了以下谓词：

```
 [NSPredicate predicateWithFormat: @"%@ IN responsibleUsers",[NSNumber numberWithInteger: curUser.oID.integerValue] ] 
```

无论我尝试什么，我的应用程序都会崩溃。一次使用 EXC_BAD_ACESS，一次使用“未实现的 SQL 生成谓词 nsnumber”

查询我的实体的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:52:29.897

您正在尝试的查询假定您有两个实体：您查询的实体（我们称它为`Group`）和另一个实体，可能为 called ，它被设置为来自called`User`的一对多关系。然后，您将能够使用您建议的谓词：`Group``responsibleUsers`

```
[NSPredicate predicateWithFormat:@"%@ IN responsibleUsers, aUser]; 
```

这将是 Core Data 对象图的推荐使用。

在您的设置中，您似乎有一个`NSNumber`集合数组作为**属性**而不是关系。因此，您不能使用这样的查询。您只需检索数组并查询数组。

```
BOOL containsResponsibleUser = NO;
for (NSNumber *n in aGroup.responsibleUsers) {
    if ([n isEqualTo:[NSNumber numberWithInteger: curUser.oID.integerValue]]) 
       containsResponsibleUser = YES;
} 
```

如果您确实在查询一组用户，我会推荐第一种方法。如果您正在查询某种用户，我建议将`BOOL`属性`responsible`作为最有效的解决方案。

# java - 是否 new FileInputStream(templateFile); 初始化后调用close（）？

> ID：10363474
> 
> 赞同：0
> 
> 时间：2012-04-28T12:27:29.660
> 
> 标签：java, fileinputstream

构造函数是否在初始化后`new FileInputStream(someFile);`调用方法？`close()`初始化后我需要调用`close()`这个对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:31:34.877

不，它只是打开流；由您决定何时关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:32:23.097

不，`close()`构造函数不会调用该方法，因此您应该在使用特定 FileInputStream 实例完成后调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T12:33:31.097

如果您忘记执行此操作，通常会在程序终止或文件流对象被垃圾回收时自动关闭文件，但最好在完成文件后立即关闭文件。

```
File file = new File("DevFile.txt"); // This will create file object with meta info

int ch;
StringBuffer strContent = new StringBuffer("");
FileInputStream fin = null;

try {
fin = new FileInputStream(file); // It'll open a stream and type is input

while ((ch = fin.read()) != -1)// and you can read data stream unless it is closed
strContent.append((char) ch);

fin.close(); // you should close stream to provide safety of your file 

} catch (FileNotFoundException e) {
} catch (IOException ioe) {
} 
```

# jquery - jQuery 替换 HTML 文本中的 HTML 格式的单词

> ID：10363476
> 
> 赞同：0
> 
> 时间：2012-04-28T12:27:41.397
> 
> 标签：jquery, replace

我有一个可编辑的 div：

```
<div id="artikel" contenteditable="true"></div> 
```

它工作得很好，我只需输入它就可以即时编辑它。

我现在想要的是在输入的文本中搜索，就在他们抬起键时：

```
<script>
$(document).ready(function(){
    $("#artikel").live("keyup", function(e)
    {
        var text = $(this).html();
        console.log(text);
    });
});
</script> 
```

这一切都在工作。

问题是，当我有这段文字时：

> 与**文本**中的相同单词的示例**文本**。

如何只替换第一个“文本”词而不是第二个。以及如何让 HTML 粗体完好无损。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:32:20.757

这仅用 newText 替换“文本”字符串一次：

```
var $t = $('#artikel');
var html = $t.html();
var i = html.indexOf('text');
html = html.substring(0, i) + newText + html.substring(i+'text'.length);
$t.html(html); 
```

# xcode - 防火墙阻碍 Bonjour 网络调试

> ID：10363479
> 
> 赞同：1
> 
> 时间：2012-04-28T12:28:00.127
> 
> 标签：xcode, cocoa, debugging, firewall, bonjour

我正在尝试调试 Bonjour 网络例程，每次运行它时，Mac 的防火墙都会询问“您希望应用程序 ProjectName 接受传入的网络连接吗？”</p>

我单击“允许”，为其提供管理员名称和密码，然后该应用程序被正式添加到防火墙允许的传入连接应用程序列表中……直到下一次运行。

调试这个同步例程是很麻烦的。每次运行都必须输入管理员和密码真的很麻烦。当然，我可以通过以管理员身份运行 Mac 来解决这个问题，但我不想以这种方式损害安全性。

Xcode 是否有一些项目设置可以使防火墙平静下来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:45:38.670

您应该对您的应用程序进行代码签名。防火墙对已签名的应用程序要宽松得多。

为此，您需要进入项目设置并在代码签名部分中，您应该添加一个配置文件作为代码签名身份。

[这里](http://www.smartapps.co/2011/02/tutorial-code-signing-in-xcode-4/)有一个很好的过程描述。

# jquery - 为什么没有 pjax

> ID：10363484
> 
> 赞同：0
> 
> 时间：2012-04-28T12:28:38.387
> 
> 标签：jquery, pjax

欢迎，

今天我发现并决定把[pjax](http://pjax.heroku.com/)，但我什至无法从该站点复制文件不起作用。

如何让它发挥作用？[都在这里](http://fav.nord-bux.ru/)填写。

顺便说一句，单击时是否可以更新几个块 pjax？

提前致谢！

我的代码：

```
 <script src="http://pjax.heroku.com/jquery.js"></script>
  <script src="http://pjax.heroku.com/jquery.cookie.js"></script>
  <script src="http://pjax.heroku.com/pages.js"></script>

  <script src="http://pjax.heroku.com/jquery.pjax.js"></script>
  <script type="text/javascript">
    $(function(){
      // pjax
      $('ul a').pjax('#main')
    })
  </script>
<pre>

           ／￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
           |　<b>It's 09:32:10 PM</b>
           ＼＿　 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿
    .--.     (  )
   /    \   ( )
  ## a  a  .
  (   '._)
   |'-- |
 _.\___/_   ___<label><input type="checkbox" name="pjax" />pjax</label>___
   ."\> \Y/|<'.  '._.-'
  /  \ \_\/ /  '-' /
  | --'\_/|/ |   _/
  |___.-' |  |`'`
    |     |  |
    |    / './
   /__./` | |
      \   | |
       \  | |
       ;  | |
       /  | |
 jgs  |___\_.\_
      `-"--'---'

<a href="https://github.com/defunkt/jquery-pjax">github.com/defunkt/jquery-pjax</a>
</pre>

<div id="main">
  <ul>
  <li>home</li>
  <li><a href="/dinosaurs.html">dinosaurs</a></li>
  <li><a href="/aliens.html">aliens</a></li>
</ul>

<p>
  pjax loads html from your server into the current page
  without a full page load. It's ajax with real permalinks,
  page titles, and a working back button that fully degrades.
</p>

<p>
  Check the box to toggle pjax.
</p>

<p>
  Whenever the time changes, a full page load has happened.
  If the time doesn't change,  no full page load has occurred.
</p>

<p>
  The idea is you can't tell the difference between pjax
  page loads and normal page loads. On complicated sites,
  browsing just "feels faster."
</p>

<p>
  <a href="https://github.com/defunkt/jquery-pjax/tree/heroku">
    view this example's source code
  </a>
</p>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:36:09.243

pjax 演示页面依赖于服务器端处理。要使其与静态页面一起使用，您需要使用该`fragment`选项。

# jquery - 将 AJAX 返回值存储到变量中

> ID：10363485
> 
> 赞同：1
> 
> 时间：2012-04-28T12:28:54.170
> 
> 标签：jquery, ajax

我无法将 Ajax 响应存储到变量中。到目前为止，这是我的代码：

```
function bbl(phrase) {
    var lp;
    $.post(
        'babelJS.php',
        {"phrase" : phrase},
        function (data){
            lp = data.lp;
            $("#test1").html(lp);
        },
        'json'
    );
    $("#test2").html(lp);
} 
```

div`test1`是正确的字段，但不是`test2`......为什么`lp`在节后无法生存`$.post`？

谢谢！

**更新**：我也希望 bbl() 返回 lp ......

**更新 2**：

我对以下内容没有更多的运气，它来自常见问题解答，其链接在这篇文章的第一条评论中。

```
function getBbl(phrase,callback) {
    $.post(
        'babelJS.php',
        {"phrase" : phrase},
        function (data){
            callback(data.locphrase);
        },
        'json'
    );
}

function bbl(phrase) {
    var lp
    getBbl(phrase,function(locphrase){
        lp = locphrase;
    });
    return lp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:32:40.423

问题是`$.post`调用是异步的。.html() 行在发送帖子后执行，但在`lp = data.lp`返回帖子响应之前不会执行该行。

所以任务工作正常，但它发生得太晚了。要使其工作，请将 .html() 行移动到帖子的成功函数中。

# php - 当我打开它时它显示一个空白网页

> ID：10363486
> 
> 赞同：2
> 
> 时间：2012-04-28T12:28:55.707
> 
> 标签：php, javascript, json

当我打开网页时，它只显示一个空白页面。你知道它为什么这样做吗？可能是因为 $_SESSION 中的 [] 吗？错误控制台上没有 javascript 错误，屏幕上也没有 php 错误。

下面是发生附加的 javascript 代码：

```
 <?php
    session_start();

    $idx = count($_SESSION ['fileImage'] - 1);
    $output = isset($_SESSION ['fileImage'][$idx]) ? $_SESSION ['fileImage'][$idx]['name'] : "";

    ?>

              function stopImageUpload(success){

              var imageNameArray = ['<?php echo $output ?>'];
              var result = '';

              if (success == 1){
                 result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';

                    for(var i=0;i<imageNameArray.length;i++)
            {
                 $('.listImage').append(imageNameArray[i]+ '<br/>');

             }

              }
              else {
                 result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
              }

        return true;

        } 
```

下面是 php 脚本，它从上面的 javascript 函数上传另一个页面上的文件：

```
 <?php

            session_start();

            $result = 0;
            $errors = array ();
            $dirImage = "ImageFiles/";

        if (isset ( $_FILES ['fileImage'] ) && $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

        $fileName = $_FILES ['fileImage'] ['name'];

        $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
        $fileExt = strtolower ( $fileExt );

        $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;

                if (count ( $errors ) == 0) {
                    if (move_uploaded_file ( $fileTemp, $fileDst )) {
                        $result = 1;

                    }
                }

            }

    $_SESSION ['fileImage'][] = array('name' => $_FILES ['fileImage']['name']);

            ?>

        <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result;?>);</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:38:57.267

```
$idx = count($_SESSION ['fileImage'] - 1); 
```

应该

```
$idx = count($_SESSION ['fileImage']) -1 ; 
```

* * *

```
var imageNameArray = new Array();
imageNameArray = <?php echo $output ?>; 
```

应该成为

```
var imageNameArray = ['<?php echo $output ?>']; 
```

# actionscript-3 - 卸载在线投资组合上的外部 swf 文件

> ID：10363492
> 
> 赞同：0
> 
> 时间：2012-04-28T12:30:37.667
> 
> 标签：actionscript-3

我正在使用此代码卸载 swf 文件并返回主菜单。主菜单加载外部 swf 文件没有问题，但由于某种原因卸载不起作用：s

```
var BaseMovie:MovieClip = parent.parent as MovieClip;

BaseMovie.loader.unload(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:07:39.120

因为对象是进行函数调用的对象的父对象，这意味着它必须保持活动引用。需要更多代码才能给出更好的答案。

# netbeans - Selenium PHP“验证”失败不包括行号

> ID：10363495
> 
> 赞同：0
> 
> 时间：2012-04-28T12:30:56.997
> 
> 标签：netbeans, selenium, phpunit

verifyText 等方法不报告失败的行号，因此很难找到失败点。

Selenium IDE PHPUnit 导出创建的代码如下所示：

```
try {
    $this->assertEquals($text, $this->getTitle());
} catch (PHPUnit_Framework_AssertionFailedError $e) {
    array_push($this->verificationErrors, $e->toString());
} 
```

此行的输出类似于下面的第 2 行，完全无法追踪

```
Failed asserting that '' matches PCRE pattern "/Harlem/".
Failed asserting that two strings are equal.
Failed asserting that '(Pattern A)' matches PCRE pattern "/\(Pattern B\)/". 
```

我已经修改了调用以包含引用的文本，这让我可以搜索文本失败，但在大型测试中这还不够。如何获取代码中每个验证失败的行号/堆栈跟踪？

```
public function verifyTitle($text) {
    $title = $this->getTitle();
    try {
        $this->assertEquals($text, $title);
    } catch (PHPUnit_Framework_AssertionFailedError $e) {
        array_push($this->verificationErrors,
             "Title is '$title' but should be '$text'");
    }
} 
```

注意：为了让堆栈跟踪返回对我的断言代码的引用，我正在使用[堆栈跟踪黑客](https://stackoverflow.com/questions/9227232/selenium-dont-show-failed-number-lines/9479761#9479761)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:57:46.653

Created this verification Method to include (too much) stacktrace:

```
public function appendVerification($message,$e) {
        array_push($this->verificationErrors,$message."\n".$this->dumpStack($e));
} 
```

I also updated the referenced dumpStack method for PHPUnit tests to dumbly strip out framework calls by class name

```
protected function dumpStack(Exception $e) {
    $stack = '';
    foreach ($e->getTrace() as $trace) {
        if (isset($trace['file']) &&
                isset($trace['line'])) {
            if (!isFramework($trace['file']))
                $stack .= PHP_EOL .
                        $trace['file'] . ':' .
                        $trace['line'] . ' ';
        }
    }
    return $stack;
}

function isFramework($fileName) {
   $test = ((preg_match("/PHPUnit/i",$fileName) +
           preg_match("/php.phpunit/i",$fileName)) > 0);
   return $test;
} 
```

End result, clickable in netbeans, free of any PHPUnit framework line numbers

```
Failed asserting that 'waitForElementPresent failed for selector: css=input#address.valid' is false.
C:\dev\Automation_Dev\phpTests\library\SeleniumUtilsTestCase.php:228
C:\dev\Automation_Dev\phpTests\library\SeleniumUtilsTestCase.php:115
C:\dev\Automation_Dev\phpTests\library\SeleniumTestCase.php:176
C:\dev\Automation_Dev\phpTests\usecases\CreateListingTest.php:72
C:\dev\Automation_Dev\phpTests\usecases\CreateListingTest.php:39
C:\dev\Automation_Dev\phpTests\usecases\CreateListingTest.php:23
C:\xampp\php\phpunit:46 
```

# apache-flex - Flex mobile : 如何知道它是第一次运行应用程序

> ID：10363498
> 
> 赞同：0
> 
> 时间：2012-04-28T12:31:09.163
> 
> 标签：apache-flex, mobile

我用谷歌搜索但没有找到 Flex 移动的帖子。我现在想要的只是在用户第一次使用该应用程序时从 TabbedViewNavigatorApplication 显示一个用户协议弹出窗口

```
var agreementView: UserAgreement = new UserAgreement();
PopUpManager.addPopUp(agreementView, this,true);
PopUpManager.centerPopUp(agreementView); 
```

但也许以后更多。

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:26:01.950

我在我的桌面空气应用程序中做了什么；我想这也适用于移动应用程序。

确保您具有写入权限；打开 yourproject-app.mxml 向下滚动到文档末尾。在该部分中，取消注释以下权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

现在您可以创建文件，例如 sqlite 数据库。

在应用程序完成调用函数 checkFirstRun：

```
 //  functions to check if the application is run for the first time (also after updates)
    // so important structural changes can be made here.
    public var file:File;
    public var currentVersion:Number;   
    private function checkFirstRun():void
    {
    //get the current application version.
    currentVersion=getApplicationVersion();

        //get versionfile
        file = File.applicationStorageDirectory;
        file= file.resolvePath("Preferences/version.txt");
        if(file.exists)
        {
            checkVersion();
        }
        else
        {
            firstRun(); // create the version file.
        }
    }

        public function getApplicationVersion():Number
        {
            var appXML:XML = NativeApplication.nativeApplication.applicationDescriptor;
            var ns:Namespace = appXML.namespace();
            var versionnumber:Number =Number(appXML.ns::versionNumber);
            return versionnumber;       
        }
private function checkVersion():void
{
    var stream:FileStream= new FileStream();
    stream.open(file,FileMode.READ);
    var prevVersion:String = stream.readUTFBytes(stream.bytesAvailable);
    stream.close();
    if(Number(prevVersion)<currentVersion)
    {
        // if the versionnumber inside the file is older than the current version we go and run important code.
        // like alternating the structure of tables inside the sqlite database file.
        runImportantCode();

        //after running the important code, we set the version to the currentversion. 
        saveFile(currentVersion);
    }   
}
private function firstRun():void
{
    // at the first time, we set the file version to 0, so the important code will be executed. 
    var firstVersion:Number=0;
    saveFile(firstVersion);

    // we also run the checkversion so important code is run right after installing an update
    //(and the version file doesn't exist before the update).
    checkFirstRun();
}

private function saveFile(currentVersion:Number):void
{
    var stream:FileStream=new FileStream();
    stream.open(file,FileMode.WRITE);
    stream.writeUTFBytes(String(currentVersion));
    stream.close();
}

private function runImportantCode():void
{
    // here goes important code.
    // make sure you check if the important change previously has been made or not, because this code is run after each update.

} 
```

希望这可以帮助。问候，J。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:03:17.157

Some you need to store whether the user has agreed to the agreement or not. IF they haven't agreed, then show it.

One way to do this would be to store a value in a shared object. Another way to do this would be to use a remote service and store such data in a central repository. I assume you'll want the second; so you can do some form of tracking against the number of users using your app.

# c++ - OpenGL：创建复杂且平滑的多边形

> ID：10363499
> 
> 赞同：6
> 
> 时间：2012-04-28T12:31:14.607
> 
> 标签：c++, opengl, polygon, smooth, curve

在我的 OpenGL 项目中，我想动态创建平滑的多边形，类似于这个：

![在此处输入图像描述](../Images/666b6b103dc6b740e59710734908b391.png)

该问题主要依赖于平滑过程。到目前为止，我的程序是首先创建一个随机放置顶点的​​ VBO。

然后，在我的片段着色器中，（我正在使用可编程函数管道）应该会发生平滑过程，或者换句话说，从顶点之间先前定义的“线”创建曲线。

问题正是在这里：我对那些复杂的数学算法不是很熟悉，这些算法会检查一个点是否在“平滑多边形”内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:58:52.373

首先，你不能在片段着色器中真正做到这一点。片段着色器仅限于在写入屏幕之前设置“像素”（基本上但不完全是实际像素）的最终（ish）颜色。它不能在曲线上创建新点。

[这个页面](http://www.gamedev.net/page/reference/index.html/_/technical/graphics-programming-and-theory/bezier-curves-and-surfaces-r1808)很好地概述了创建平滑曲线的不同算法。

一般的方法是使用几何着色器将几个点分解为多个点，然后像普通多边形一样渲染它们。但我不知道细节。例如，尝试谷歌搜索[贝塞尔几何着色器](http://www.google.com/search?q=bezier%20geometry%20shader)。

等等，我撒谎。我在[这里](https://code.launchpad.net/~macslow/gl-fragment-curves/trunk)找到了一个在片段着色器中执行此操作的程序。

# c# - 保存列表时出现异常 到设置

> ID：10363500
> 
> 赞同：1
> 
> 时间：2012-04-28T12:31:18.027
> 
> 标签：c#

我正在尝试使用以下代码将列表保存到设置。我有其他控件绑定到设置，它们工作正常，如果我评论前三行，那么它似乎工作正常，但否则我在 save() 方法上遇到异常

```
StringCollection playLists = new StringCollection();
playLists.AddRange(getListsToSync().ToArray());
Properties.Settings.Default.PlayLists = playLists;
Properties.Settings.Default.Save(); //exception here.. 
```

我得到了这个例外

无法加载文件或程序集“System.XmlSerializers，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。该系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:40:29.780

根据[此链接](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/9f0c169f-c45e-4898-b2c4-f72c816d4b55/)，您可以忽略异常，您的代码应该可以正常运行。

从链接：

> 此异常是 XmlSerializer 正常操作的一部分。它是预期的，并将在框架代码中被捕获和处理。忽略它并继续。如果它在调试期间困扰您，请将 Visual Studio 调试器设置为仅在未处理的异常而不是所有异常上停止。

# objective-c - 找不到类方法返回类型默认为“id”

> ID：10363501
> 
> 赞同：0
> 
> 时间：2012-04-28T12:31:23.433
> 
> 标签：objective-c, xcode

我收到以下错误：

```
class method '+view' not found return type defaults to 'id' 
```

使用此代码：

```
[window addSubview:[ButtonsViewController view]]; 
```

有人可以帮忙吗？

这是完整的代码：

```
 #import "openURLAppDelegate.h"
#import "ButtonsViewController.h"
#include "ButtonsViewController.h"

@implementation openURLAppDelegate

@synthesize window;
@synthesize ButtonsViewController;

- (void)applicationDidFinishLaunching:(UIApplication *)application {

[window addSubview:[ButtonsViewController view]];
[window makeKeyAndVisible];
}

- (void)dealloc {
[ButtonsViewController release];
[window release];
[super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:40:45.283

如果 view 是你的控制器的 UIView 你应该在你的控制器的实例上而不是在类上调用它。

# css - 为什么 Sass 会在前面加上不正确的 @charset 规则？

> ID：10363506
> 
> 赞同：14
> 
> 时间：2012-04-28T12:31:54.217
> 
> 标签：css, character-encoding, sass, phpstorm

我用

```
sass --watch scss:css 
```

`/css`让 Sass为每个 SCSS 文件（来自我的目录）自动创建 CSS 文件（并将它们放在目录中`/scss`）。

在我的 SCSS 文件中，我有这个：

```
.foo::before {
    content: "▶";
} 
```

当我在浏览器中测试网页时，没有显示“播放”字符 - 相反，我看到一堆带有卡隆和其他口音的奇怪字母。

我检查了生成的 CSS 文件，并在第一行注意到了这一点：

```
@charset "CP852"; 
```

然后我手动将其更改为：

```
@charset "UTF-8"; 
```

这导致我的“播放”按钮被正确呈现。

现在，为什么 Sass 将字符集设置为`"CP852"`？我在 PhpStorm 中编写 SCSS 文件，它报告 SCSS 文件确实是 UTF-8 编码的（我在 PhpStorm 的状态栏中看到）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-15T01:46:47.123

尝试添加`@charset "UTF-8";`到您的原始 SCSS 文件，SASS 不应该覆盖它/然后添加它自己的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-17T18:32:25.677

[就像这个答案](//stackoverflow.com/a/20470106/1696030)中的@Alireza-Fatahi 状态一样，您可以在 CSS 输出中保存一行，而是在外部文件上使用默认字符集，方法是将此行添加到您**`config.rb`**的项目文件夹中：

```
Encoding.default_external = "UTF-8" 
```

# image-manipulation - 加水印后的图片大小

> ID：10363509
> 
> 赞同：0
> 
> 时间：2012-04-28T12:32:14.233
> 
> 标签：image-manipulation, watermark

我很好奇插入不可见水印后主机图像的大小会发生什么变化。我猜尺寸会增加，但增加多少？

例如要插入的封面图片为1kb，宿主图片为2kb。由于您添加了附加信息，嵌入过程后大小将为 3kb？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:27:57.233

我认为这取决于用于插入水印的算法。如果在没有任何质量损失的情况下插入水印，文件可能会增加至少 2KB。

# zend-framework - 使用 Zend 生成 PDF 文件

> ID：10363510
> 
> 赞同：0
> 
> 时间：2012-04-28T12:32:16.743
> 
> 标签：zend-framework, fpdf, zend-pdf

你能帮我解决我的问题吗？我必须使用 zend 框架来生成 Pdf 文件。我选择使用 FPDF 库来做到这一点。当我尝试生成 Pdf 时，我收到以下消息：

%PDF-1.3 3 0 obj <> endobj 4 0 obj <> 流 x???Mn0???,:&? ?s?h?? ?e6?Ŧ *lː? ?U??[t Ų-ۚD+IC~|*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:45:24.397

看起来你没有正确设置你的标题，我猜你`render()`在 Zend_PDF 中使用，所以试着在你当前的地方添加这个`render()`

```
$this->getResponse()->setHeader('Content-type', 'application/x-pdf', true);
$this->getResponse()->setHeader('Content-disposition', 'inline; filename=my-file.pdf', true);
$this->getResponse()->setBody($pdf->render()); 
```

请参阅[Zend Framework PDF 问题](https://stackoverflow.com/questions/1329302/zend-framework-pdf-problems)

# mongodb - 猫鼬（mongodb）别名_id字段

> ID：10363513
> 
> 赞同：23
> 
> 时间：2012-04-28T12:32:27.293
> 
> 标签：mongodb, mongoose

mongoose 是否可以使用不同的名称（在我的情况下为大写“ID”）作为模式 _id 字段的别名？我需要添加一个虚拟还是有另一种设置方式？

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-28T14:37:51.100

您将为此使用[虚拟属性](http://mongoosejs.com/docs/guide.html#virtuals)。如：

```
yourSchema.virtual('ID').get(function() { return this._id; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-05T09:33:51.483

最简单的方法是`alias`在模式中指定：

```
let s = new Schema({
    _id: { type: String, alias: "ID" }
}); 
```

这会自动创建 getter 和 setter，因此可以在`ID`任何地方使用而不是`_id`.

[关于别名的 Mongoose 文档](https://mongoosejs.com/docs/guide.html#aliases)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-01T20:53:33.133

根据`v5.11.9`mongoose 文档，mongoose[默认为您的每个模式分配一个 id virtual getter，](https://mongoosejs.com/docs/guide.html#id)它返回文档的`_id`字段

# mysql - 从 count() 中选择 max()

> ID：10363518
> 
> 赞同：20
> 
> 时间：2012-04-28T12:32:47.977
> 
> 标签：mysql, count, max

> **可能重复：**
> [每个派生表都必须有自己的别名](https://stackoverflow.com/questions/1888779/every-derived-table-must-have-its-own-alias)

我需要找到每个用户的最大操作

表列：`action_id`, `action_status`,`user`

要求：

```
SELECT MAX(`counted`) FROM
(
SELECT COUNT(*) AS `counted`
FROM `table_actions`
WHERE `status` = "good"
GROUP BY `user`
) 
```

错误消息：“每个派生表都必须有自己的别名”

怎么了？..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-28T12:35:42.147

这只是意味着 MySQL 坚持你给内部`SELECT`一个名字，比如：

```
SELECT MAX(counted) FROM
(
    SELECT COUNT(*) AS counted
    FROM table_actions
    WHERE status = "good"
    GROUP BY user
) AS counts; 
```

# jqgrid - jqgrid 保存记录以进行内联编辑

> ID：10363523
> 
> 赞同：0
> 
> 时间：2012-04-28T12:33:29.417
> 
> 标签：jqgrid

在 jqgrid 中，当我们单击保存图标时进行内联编辑，** 在内部它调用 saveRow 方法，但我想调用我的自定义方法，我将在其中实现我的保存逻辑以及调用控制器方法。**

我在下面的代码中使用了网格。

```
var grid = jQuery("#list5").jqGrid({
            url: '/home1/GetUserData',

                datatype: "json",
                mtype: "POST",
                colNames: ['Code', 'LoginID', 'Emailid', 'CreateDate', 'PostalCode', 'Mobile'],
                colModel: [
                            {name: 'Code', index: 'Code', width: '16%', editable: true, sortable: true },
                            { name: 'LoginID', index: 'LoginID', width: '16%', editable: true, sortable: true },
                            { name: 'Emailid', index: 'Emailid', width: '16%', editable: true, 

        sortable: true },
                              ],
                    rowNum: 10,
                    height: '100%',
                    scrollOffset: 0,
                    rowList: 10,
                    shrinkToFit: true,
                    pager: $("#pager2"),
                    editurl: "/home1/EditUserData",
                    caption: "Simple data manipulation"
                });
                jQuery("#list5").jqGrid('navGrid', '#pager2', { edit: false, add: false, del: true, search: false, refresh: false }, {}, {}, { url: '/home1/DeleteUserData' });
                jQuery('#list5').jqGrid('inlineNav', '#pager2', { edit: true, add: true},
                });
            }); 
```

所以请任何人告诉我如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:49:29.687

我不是很明白你的要求。[saveRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)有很多自定义的可能性。`prmNames`您可以使用jqGrid 的选项重命名将发送到服务器的所有参数。使用[saveRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)`extraparam`的参数，您可以指定可以发送到服务器的附加信息。回调可用于实现您的自定义序列化。例如，您可以将数据转换为 JSON。使用您可以在数据成功保存在服务器上后进行一些自定义操作。所以我建议你使用这些特性而不是实现你的自定义方法。`serializeRowData``aftersavefunc``saveRow`

**更新**：如果您想拥有使用自定义的导航器图标，`saveRow`则不应通过[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#inlinenav)添加“保存”按钮。您可以使用[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#inlinenav)`save: false`选项。然后您可以使用[navButtonAdd](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_buttons)并添加您的自定义图标，该图标看起来与原始“保存”按钮完全相同，并在回调中调用您的“自定义” 。`saveRow``onClickButton`

# pycharm - PyCharm 运行缓慢

> ID：10363526
> 
> 赞同：137
> 
> 时间：2012-04-28T12:33:53.187
> 
> 标签：pycharm

[我是JetBrains 的 PyCharm 的](http://www.jetbrains.com/pycharm/)忠实粉丝，但我确实遇到了一些我想也许我会在这里问的问题。

1.  它意外挂起，这种情况经常发生。总的来说，它对我的​​口味有点慢，我喜欢一些关于如何提高 IDE 性能的提示
2.  通常，当我打开一个项目时，PyCharm 似乎会将所有内置函数标记为未解决的引用警告。诸如 open()、str() 等之类的东西，以及我导入的一些模块，例如 sys（这些是最常见的违规者 :)）。

我能够修复（2）的唯一方法是转到 PyCharm -> Preferences -> Python Interpreters -> Paths -> Reload List of Paths 但我必须经常这样做，以保证询问更永久的修复。

我的配置：Mac OSX Lion 运行在 8GB RAM 的 MacBook Pro（2010 年中）上

现在看，我知道在没有任何快照或有关正在发生的事情的更多信息的情况下诊断此类事情是很困难的，但我只是想问是否有人以前遇到过这些问题，如果有，这些问题是如何解决的？

PS 我也曾就这些问题联系过 JetBrains，但老实说，我倾向于在这里找到解决常见问题的好方法，我想我不妨问问

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-08-30T14:47:24.537

**1.更改检查级别**

当前的 PyCharm 版本允许您更改它执行的静态代码分析的类型，并且还具有省电/CPU 功能（单击右下角的图标，在锁旁边）：

![在此处输入图像描述](../Images/793349c7f4904bba36a963cee05add55.png)

**2\. 更改索引目录**
将项目路径中设置但实际上不需要搜索和索引的目录排除在索引之外。按下`ALT+CTRL+S`并搜索`project`。

**3\. 做内存扫描**
还有一个有趣的功能：

进入设置（文件/设置）并搜索*内存*。在`IDE Settings>Appearance`-> 打勾`Show memory indicator`。内存条将显示在右下角（见下图）。单击此栏运行**垃圾收集/内存清除**。

![在此处输入图像描述](../Images/3d4e535b4726bfafe5a2be6db64ff4e7.png)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-28T12:49:53.613

PyCharm 的每一个性能问题都是独一无二的，对一个人有帮助的解决方案对另一个人不起作用。解决您的特定性能问题的唯一正确方法是捕获[本文档中描述](https://intellij-support.jetbrains.com/hc/articles/207241235)的 CPU 分析器快照并将[其发送给 PyCharm 支持团队](https://intellij-support.jetbrains.com/hc/requests/new)，方法是提交票证或[直接发送到问题跟踪器](https://youtrack.jetbrains.com/issues/PY)。

在分析 CPU 快照后，PyCharm 团队将进行修复并发布一个新版本，该版本（希望）不受此特定性能问题的影响。团队还可能会根据对所提供数据的分析建议您进行一些配置更改或解决方法来解决问题。

所有其他“解决方案”（例如启用省电模式和更改突出显示级别）只会隐藏应该修复的真正问题。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-05-08T11:59:30.517

好吧，Lorenz Lo Sauer 已经对此提出了一个很好的问题。但是如果你想通过 Pycharm Tuning 解决这个问题（不关闭 Pycharm 代码检查）。您可以根据需要调整堆大小。因为我更喜欢使用增加堆大小的解决方案来运行缓慢的 Pycharm 应用程序。

您可以通过编辑 pycharm.exe.vmoptions 文件来调整堆大小。和 pycharm64.exe.vmoptions 用于 64 位应用程序。然后在其上编辑 -Xmx 和 -Xms 值。

所以我为我的 Pycharm 堆大小分配了 2048m 的 xmx 和 xms 值（即 2GB）。这是我的配置。我有 8GB 内存，所以我使用以下设置进行了设置：

```
-server
-Xms2048m
-Xmx2048m
-XX:MaxPermSize=2048m
-XX:ReservedCodeCacheSize=2048m 
```

保存设置，然后重新启动 IDE。我在设置->外观和行为->外观中启用了“显示内存指示器”。看到它在行动：

[![Pycharm慢，打字慢，增加Pycharm Heap Size](../Images/48145281835f37afb83f1ba5cc3eed97.png)](https://i.stack.imgur.com/eO8Uz.png)

Pycharm 现在运行迅速且运行良好。

参考：[https ://www.jetbrains.com/help/pycharm/2017.1/tuning-pycharm.html#d176794e266](https://www.jetbrains.com/help/pycharm/2017.1/tuning-pycharm.html#d176794e266)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-05-21T00:49:17.640

就我而言，问题是项目目录中的一个文件夹包含 300k+ 个文件，总计 11Gb。这只是一个临时文件夹，其中包含一些计算的图像结果。将此文件夹移出项目结构后，缓慢消失了。我希望这可以帮助某人，请检查您的项目结构，看看是否有任何不必要的东西。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-07-18T10:08:32.377

如前所述，通过更改堆大小非常容易。只需转到 Pycharm HELP -> Edit custom VM option ... 并将其更改为：

```
-Xms2048m
-Xmx2048m 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-01T08:37:53.777

关于冻结问题，我们发现在处理具有至少一个极长行的 CSV 文件时会发生这种情况。

重现：

```
[print(x) for x in (['A' * 54790] + (['a' * 1421] * 10))] 
```

但是，它似乎已**在 PyCharm 4.5.4 中修复**，因此如果您遇到此问题，请尝试更新您的 PyCharm。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-20T01:37:18.007

我找到了一个在 Windows 上运行良好的解决方案，并想分享它。

无效的解决方案：我有 16GB 的 RAM，但仍然有可怕的延迟。PyCharm 占用的内存不到 1GB，所以这不是问题。关闭检查根本没有帮助，而且我没有任何我记得的特殊插件。我还尝试在该过程中使用 CPU 亲和性，该过程短暂有效，但没有真正奏效。

什么工作得很好，几乎完美：

1.  将 PyCharm 的 CPU 优先级设置为 Above Normal
2.  将 Python 进程的 CPU 优先级设置为低于正常值

您可以手动执行此操作，但我建议使用一个程序，该程序将在重新启动和多个实例中保留设置。我使用了 Process Hacker：右键单击进程 -> 优先级 -> 设置优先级。然后再次右键单击 -> 进程 -> 并选择“保存为 pycharm64.exe”，类似地为 python“保存为 python.exe”。最后在 Process Hacker 中转到选项并选择“登录时开始”。**这将使所有 Pycharm 和 python 可执行文件都获得这些 CPU 优先级，即使在重新启动程序和/或 Windows 之后，也不管你启动了多少 python 实例。**

基本上，PyCharm 的大部分滞后可能是由于与其他程序的冲突。想一想：是的，PyCharm 需要大量 CPU，但 PyCharm 开发人员并不愚蠢。他们可能至少确保它可以在空核心上运行而不会滞后。但是现在你打开 Chrome 和 30 个标签页、Fiddler、一个 FTP 程序、iTunes、Word、Slack 等，它们都在同一个 CPU 优先级上与 PyCharm 竞争。每当核心上所有程序的总和 > 100% 时，您就会看到滞后。切换到“高于正常”优先级使 PyCharm 更接近可能测试过的空核心。

至于python.exe上的Below Normal，基本上你不想用你自己的开发拖慢你的电脑。大多数 python 程序本质上是“批处理”程序，您可能不会注意到运行所需的额外时间。如果您正在开发图形交互程序，我不建议这样做。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-04T03:21:37.163

就我而言，它非常慢，我需要更改检查设置，我尝试了所有方法，唯一有效的方法是从 2018.2 版本到 2016.2，有时最好在后面进行一些更新...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-14T19:01:12.537

我以为我在使用 PyCharm 时遇到了速度问题，但最后发现 PyCharm 中的输出控制台不一定模拟最先进的终端应用程序的输出。

这是我的解决方案：单击配置的下拉（箭头）符号->单击`edit configuration`->单击`emulate terminal in output console`->单击`ok`->运行配置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-16T01:00:11.690

一切正常，但是在我定义我的文件 - 设置 - 项目：*名称*- Python解释器之前，我在代码编辑器中遇到了可怕的滞后。

# javascript - Javascript扫描所选单词前后的单词

> ID：10363528
> 
> 赞同：3
> 
> 时间：2012-04-28T12:34:12.173
> 
> 标签：javascript, range, getselection

我正在尝试生成完整的句子，其中使用 javascript 突出显示了一个单词。

```
window.getSelection 
```

给我突出显示的单词。我一直在搜索 javascript 范围的示例，但仍然不完全了解如何通过向后移动选择来循环直到找到标点符号，然后再向前移动直到找到标点符号。

例子：

> 社交媒体与神经症有着令人担忧的关系。有强迫症的人对于**Facebook**和 Twitter 等网站至关重要。他们增加了能量和嗡嗡声。他们的身份与他们的化身联系在一起，这本身就使这些网站看起来很重要。他们提供了很多内容。去年秋天发表的一项研究报告称，Twitter 上的两万用户提供了那里阅读内容的一半。但强迫症也是危险的。他们可以使网站看起来令人毛骨悚然。

如果我在上面选择了“Facebook”这个词，我的最后一个字符串应该是“Obsessive people are essential to like Facebook and Twitter”。

* * *

更新1：

下面提到的代码有效，但如果有 html 标签，则停止。

例子：

> 如果你深入研究商务部的报告，你会**发现**一些更令人失望的数字。撇开存货的生产——公司为了以后出售而增加库存的商品——经济在本季度仅增长了 1.6%。资本投资本应在复苏的这一点飙升，但几乎没有增加。个人可支配收入——人们在纳税后必须花费的金额——仅增长了 0.4%。

通过选择上面的“查找”，输出句子是“你可以找到一些更令人失望的数字”而不是“如果你深入研究商务部的报告，你可以找到一些更令人失望的数字”

如何在匹配前后删除标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:51:55.630

`window.getSelection`返回一个[`Selection`](https://developer.mozilla.org/en/DOM/Selection)对象，您可以从中获取 a [`Range`](https://developer.mozilla.org/en/DOM/range)，该对象又为您提供开始和结束偏移量。其余的很明显：

```
rng = window.getSelection().getRangeAt(0)
start = rng.startOffset
end = rng.endOffset
text = rng.startContainer.nodeValue

before = text.substr(0, start)
sel = text.substr(start, end - start)
after = text.substr(end)

sentence = before.match(/[^.!?]*$/)[0] +  sel + after.match(/^[^.!?]*/)[0] 
```

这适用于 FF 和 Chrome，IIRC，MSIE 中的情况看起来不同。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ie/ms535869%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms535869%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:40:01.893

我正在为我的[Rangy](http://code.google.com/p/rangy)库做这个，并且非常接近初始版本。这是一个正在进行的演示：

[http://rangy.googlecode.com/svn/trunk/demos/textrange.html](http://rangy.googlecode.com/svn/trunk/demos/textrange.html)

# windows - 在 Windows 8 上使用 XAML 创建“部分”页面

> ID：10363529
> 
> 赞同：1
> 
> 时间：2012-04-28T12:34:12.810
> 
> 标签：windows, xaml, windows-runtime, winrt-xaml

我正在开发我的第一个 Windows 8 Metro 应用程序。我与 Silverlight 合作过很多次，并且我熟悉 Metro 概念。我的挑战是，我知道我想创建一个此处定义的“部分”页面：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh761500.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh761500.aspx)。或者，换一种说法，例如示例“财务”应用程序，其中“今日”、“指数”、“新闻”等代表部分。但是，我无法弄清楚 XAML 中如何定义“部分”页面。

我期望它类似于选项卡控件，其中每个部分都定义为“项目”集合中父控件的子控件。但是，我似乎找不到一个可靠的例子。有谁知道他们可以指出我的例子吗？还是网上攻略？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:56:29.560

尝试在“主”页面中使用框架，然后将其他页面添加到该框架中。此范例中的一个部分只是一个普通页面。[MSDN](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)中的大多数示例都使用这种类型的设计，母版页根据列表视图中的选定项目显示不同的部分。

# php - preg_replace - 数组中的随机词

> ID：10363533
> 
> 赞同：1
> 
> 时间：2012-04-28T12:34:51.140
> 
> 标签：php, regex, templates, preg-replace

我有以下代码。

```
<?php
$user['username'] = 'Bastian';

$template = 'Hello {user:username}';
$template = preg_replace('/\{user\:([a-zA-Z0-9]+)\}/', $user['\1'], $template);
echo $template;

// Output: 
// Notice: Undefined index: \1 in C:\xampp\htdocs\test.php on line 5
// Hello 
```

我想，你知道我会做什么（我希望你知道）。我尝试替换 $user['$1']、$user["$1"] 或 $user[$1]，没有任何效果！

我希望你能帮助我=）提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:37:33.513

您需要使用[`preg_replace_callback()`](http://php.net/preg_replace_callback)- 替换的`preg_replace()`是一个字符串，因此您不能在那里使用 PHP 代码。不，`/e`修饰符不是解决方案，因为 eval 是邪恶的。

这是一个示例（它需要 PHP 5.3，但无论如何您都应该使用最新版本！）：

```
$user['username'] = 'FooBar';
$template = 'Hello {user:username}';
echo preg_replace_callback('/\{user\:([a-zA-Z0-9]+)\}/', function($m) use ($user) {
    return $user[$m[1]];
}, $template); 
```

如果你**必须**使用旧的 PHP 版本，你可以这样做。由于使用了全局变量，它更难看：

```
function replace_user($m) {
    global $user;
    return $user[$m[1]];
}
echo preg_replace_callback('/\{user\:([a-zA-Z0-9]+)\}/', 'replace_user', $template); 
```

* * *

但是，请**考虑使用模板引擎**，例如[**h2o**](http://www.h2o-template.org/)，而不是自己实现它。

# ivy - 常春藤缓存未使用已编译和发布的模块进行更新

> ID：10363534
> 
> 赞同：0
> 
> 时间：2012-04-28T12:35:02.927
> 
> 标签：ivy

模块 A 使用模块 B。我编译模块 B，这意味着`~/.ivy2/local/[group]/B/[version]/B-[version].jar`. `~/.ivy2/cache`没有更新。

我的问题是模块 A 试图在其中找到 B `~/.ivy2/cache`（这就是 IvyDE 所指示的）。

编译项目 B 后，如何确保更新缓存？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:51:46.160

您可能想要使用IvyDe的[工作区解析器功能：](https://ant.apache.org/ivy/ivyde/history/latest-milestone/cpc/workspace.html)

![在此处输入图像描述](../Images/0dcdc6192fbc50f780df8e60797db877.png)

这将使所有 Eclipse 项目直接可用，而无需构建/发布工件。

**注意：**屏幕截图适用于 2.2.0Beta，但该功能也适用于当前版本。

# java - 从经纬度查找位置地址

> ID：10363539
> 
> 赞同：2
> 
> 时间：2012-04-28T12:35:58.990
> 
> 标签：java, geocoding

我想从Java中的经纬度找到城市和国家。我在 JavaScript 中执行此操作，它返回正确的位置，但我想在 Java 中执行此操作。我怎样才能做到这一点？

# php - php mysql fetch语句获取问题

> ID：10363547
> 
> 赞同：1
> 
> 时间：2012-04-28T12:37:16.173
> 
> 标签：php, mysql, html

我有一个问题，我的脚本有三个`mysql_query`应该一个接一个使用，我正在尝试创建一个脚本，通过将其状态从已售出 =“否”更改为“是”来预订门票，该脚本计算用户拥有的门票数量在 html 表单上输入，该表单为服务器端提供了一个变量，其中包含名为 = 的票数`$tickets`。

**提示：这是一个模型，所以不需要 mysql 注入安全性**

这是我的代码：

```
//get ticket status
    $eventTicket = mysql_query("SELECT eventTickets FROM beventreservation WHERE eventId = '$eventId'") or die(mysql_error());
    $ticketrow = mysql_fetch_array($eventTicket) or die(mysql_error());

    //test... which is working !
    echo $ticketrow['eventTickets'];

    //get classId from classes
    $selectClass = mysql_query("SELECT classId FROM quotaclasses WHERE className = '$classes' AND eventFK = '$eventId'") or die (mysql_error());    

    $classrow = mysql_fetch_array($selectClass) or die(mysql_error());

    //this var is to define which class the user used
    $choosedClass = $classrow['classId'];

//test ... which did not work !!!
echo $classrow['classId'];

        if ($ticketrow['eventTickets'] == "Yes")

    {
        for($counter=1;$counter<$numberOfTickets;$counter++)

        {
            $bookTicket = mysql_query("UPDATE unites SET ticketSold = 'Yes' WHERE businessreservationIdFk = '$eventId' AND classIDfk ='$choosedClass'") or die(mysql_error());  
            echo "ticket ". $counter . "  done !";

        }

    } 
```

该脚本没有获取此语法，并且我的页面上没有显示错误！

```
$classrow = mysql_fetch_array($selectClass) or die(mysql_error()); 
```

另外，我试图`$tickets`在这个语法之后回显变量，它没有出现，在同一个脚本页面上获取超过 mysql_query 是否有问题？请告诉我我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T12:41:30.330

不要与呼叫`die()`一起`mysql_fetch_*()`呼叫。如果没有返回行，则`mysql_fetch_array()`返回，即使没有错误，也会`FALSE`触发您的脚本并终止您的脚本。`die()`由于您已经`$selectClass`在`mysql_query()`调用中进行了错误检查，因此您知道它已经成功。

```
// This query returned no rows, but was successful syntactically and functionally.
$selectClass = mysql_query("SELECT classId FROM quotaclasses WHERE className = '$classes' AND eventFK = '$eventId'") or die (mysql_error()); 
```

相反，测试是否返回了行：

```
if (mysql_num_rows($selectClass) > 0) {
  // Fetch and do other stuff
   $classrow = mysql_fetch_array($selectClass);
   $choosedClass = $classrow['classId'];
   // etc...
   // etc...
}
else {
  // Do whatever you need to do if no rows return
} 
```

# iphone - UIView 动画块不做任何更改

> ID：10363551
> 
> 赞同：1
> 
> 时间：2012-04-28T12:37:43.437
> 
> 标签：iphone, ios, uiview, uiviewanimation

下面的代码非常简单。`_facebookF`是一个`UIImageView`。

```
if (animationOn == YES) {
    [UIView animateWithDuration:0.4 animations:^{
        [_faceBookF setAlpha:0];
    }];
    [_faceBookF setImage:[UIImage imageNamed:@"facebookFBlue.png"]];
    [UIView animateWithDuration:0.4 animations:^{
        [_faceBookF setAlpha:1];
    }];

     } else {
    [UIView animateWithDuration:0.4 animations:^{
        [_faceBookF setAlpha:0];
    }];
    [_faceBookF setImage:[UIImage imageNamed:@"facebookF.png"]];
        [UIView animateWithDuration:0.4 animations:^{
         [_faceBookF setAlpha:1];
    }];
} 
```

应用程序可以正常访问包含此代码的方法，但在整个代码块中不会对 UI 进行任何更改。据我所知，该应用程序正在主线程上运行。

有什么猜测吗？

**更新**——事实上，问题在于图像根本没有被改变——无论有没有动画。这两个图像在应用程序的其他部分都可以正常访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:47:59.027

看起来您正在尝试运行顺序动画，但是按照您对它们进行编码的方式，它们很可能是并行运行的。你需要做的是：

```
if (animationOn == YES) {
    [UIView animateWithDuration:0.4 animations:^{
        [_faceBookF setAlpha:0];
    } completion:^(BOOL finished) {

        [_faceBookF setImage:[UIImage imageNamed:@"facebookFBlue.png"]];
        [UIView animateWithDuration:0.4 animations:^{
           [_faceBookF setAlpha:1];
        }];
    }];

 } 
 else {
   [UIView animateWithDuration:0.4 animations:^{
      [_faceBookF setAlpha:0];
   }completion:^(BOOL finished) {

    [_faceBookF setImage:[UIImage imageNamed:@"facebookF.png"]];
        [UIView animateWithDuration:0.4 animations:^{
         [_faceBookF setAlpha:1];
    }];
 }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T12:47:17.313

试试这个。这将在第一个动画完成后开始第二个动画。所以它会淡出 UIImageView 然后用不同版本的图像淡出它。

```
 [UIView animateWithDuration: 0.4
                  animations:^
     {
         [_faceBookF setAlpha:0];
     }
                 completion:^(BOOL finished)
     {
         [_faceBookF setImage:[UIImage imageNamed:@"facebookFBlue.png"]];
         [UIView animateWithDuration:0.4
                          animations:^
          {
              [_faceBookF setAlpha:1];
          }];
     }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T14:55:53.943

感谢您的回复。我已经实现了你们提到的完成块，以避免两个动画同时触发。但是，主要问题与未正确访问该方法有关。我不明白为什么，因为`facebookF`变量不是 nil，并且该方法中的 if 和 log 语句工作正常。无论如何，我已经切换到一个`NSNotification`解决方案，现在该方法的所有部分都被访问了。

# javascript - 通过javascript点击它

> ID：10363554
> 
> 赞同：1
> 
> 时间：2012-04-28T12:38:41.637
> 
> 标签：javascript, jquery

有什么方法可以通过 javascript 点击 div 函数，就像`$('#divAB7').clicked`点击阅读更多链接时一样完成以下功能：

```
<a href="#divAB7" class="btn1 fl">Read More</a>` 
```

* * *

```
<script type='text/javascript'>
function js() {
    $(".myHref").on("click", function (e) {
       e.preventDefault();
       $('#divAB7').trigger('click');
    });
}
</script>

<body>
    <a href='#' class="myHref">Read More</a>
    <input type='submit' onClick='js()'>
    <div id='divAB7' style="display:none;">
       hello
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:41:02.523

改成 ：

```
<script type='text/javascript'>

$(".myHref").on("click", function (e)
 {
     e.preventDefault();
     $('#divAB7').trigger('click');
  });

  </script>

<body>
<a href='#' class="myHref">Read More</a>

<div id='divAB7' style="display:none;" onclick="alert('div is Clicked')">
hello
</div>
</body> 
```

# xcode - CALayer 中边界的真正含义是什么？

> ID：10363556
> 
> 赞同：3
> 
> 时间：2012-04-28T12:39:28.903
> 
> 标签：xcode, calayer

我对 CALayer 的属性范围感到困惑，

```
 - (void)viewDidLoad {
    [super viewDidLoad];

    CALayer *sublayer = [CALayer layer];
    sublayer.backgroundColor = [UIColor blueColor].CGColor;
    sublayer.frame = CGRectMake(18, 18, 154, 154);
    [self.view.layer addSublayer:sublayer];

    CALayer *sublayer2 = [CALayer layer];
    sublayer2.backgroundColor = [UIColor redColor].CGColor;
    sublayer2.frame = CGRectMake(20, 20, 150, 150);
    sublayer2.bounds = CGRectMake(0, 0, 50, 50);
    sublayer2.zPosition = 10;

    [self.view.layer addSublayer:sublayer2];
} 
```

sublayer2 在 sublayer1 的矩形中心绘制一个 50X50 的小矩形，但是如果注释掉这条线，它会绘制一个 150X150 的矩形：

```
sublayer2.bounds = CGRectMake(0, 0, 50, 50); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:45:36.537

在阅读了sch的“指南”后，我认为这种行为是由于以下原因：

1 如指南中所述

> 边界矩形在视图自己的局部坐标系中表示。这个矩形的默认原点是 (0, 0)，它的大小与框架矩形的大小相匹配。//这就是界限的真正含义！
> 
> ……
> 
> 当您设置 bounds 属性的大小时，frame 属性中的 size 值会更改以匹配边界矩形的新大小。
> 
> ……

所以当执行

```
sublayer2.bounds = CGRectMake(0, 0, 50, 50); 
```

框架的大小将自动更改为 50X50，

这里 CGRectMake(0, 0,..) "0,0" 可以是任何值，因为它不会起任何作用。

2 因为我们没有改变anchorPoint，默认anchorPoint是(0.5,0.5)，它对应的位置是(95,95)，所以最后会画一个5X5的矩形，中心是(95,95)

如果我错了，请纠正我

# html - 失去焦点的 HTML 5 输入类型电子邮件检查验证

> ID：10363557
> 
> 赞同：2
> 
> 时间：2012-04-28T12:39:45.893
> 
> 标签：html, validation, input, onblur

如何检查对 HTML5 输入类型电子邮件失去焦点的验证？

```
<input type="email" name="useremail" onblur="setCustomValidity('Plz enter email ')" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:43:05.443

onchange 事件应该可以解决问题。

编辑：您可能只想验证值何时更改并且字段失去焦点，这就是 IMO onchange 事件比 onblur （不是 onblure）更合适的原因。

参考：stackoverflow.com/a/785106/440519

# javascript - 延迟子菜单

> ID：10363562
> 
> 赞同：1
> 
> 时间：2012-04-28T12:40:12.090
> 
> 标签：javascript, jquery, delay

我已经制作了一个脚本。在导航中打开我的子菜单。当您将鼠标移出子菜单时。子菜单必须延迟 300 毫秒关闭。但是延迟不起作用。我怎样才能解决这个问题？这是我的脚本：

```
$('.nav-main .container li').hover(function() {
    if ($(this).find('.submenu').length > 0) {
        $(this).addClass("hover");
        $(this).find('.submenu').show();
    }
}, function() {
    $(this).find('.submenu').delay(300).hide();
    $(this).removeClass("hover");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:57:24.563

我还没有测试以下代码，但它应该可以工作......

```
$('.nav-main .container li').hover(function() {
    if ($(this).find('.submenu').length > 0) {
        $(this).addClass("hover");
        $(this).find('.submenu').show();
    }
}, function() {
    var submenu = $(this).find('.submenu');
    setTimeout(function() {
      submenu.hide();
    }, 300);
    $(this).removeClass("hover");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:57:49.103

您将需要创建一个 setTimeout() 方法，此外，您需要定义一个要在函数内部使用的对象 $(this) 将为空。

```
$('.nav-main .container li').hover(function() {
    if ($(this).find('.submenu').length > 0) {
        $(this).addClass("hover");
        $(this).find('.submenu').show();
    }
}, function() {
    var object = $(this);
    setTimeout(function()
    {
        $(object).find('.submenu').hide();
        $(object).removeClass("hover");
    }, 300);
}); 
```

# c++ - endl 不适用于 wstring (unicode)

> ID：10363564
> 
> 赞同：6
> 
> 时间：2012-04-28T12:40:49.713
> 
> 标签：c++, windows, unicode, newline, wstring

这是代码：

```
 std::ofstream f("file1.txt");
  f<<"123"<<std::endl<<"456";           //(*1)

  /*std::stringstream ordinary_strstream; This works too
  ordinary_strstream<<"123"<<'\n'<<"456";
  f<<ordinary_strstream.str();*/

  std::wstringstream s;
  s<<L"123"<<std::endl<<L"456";         //(*2)
  s<<L"123"<<L"\n"<<L"456";             //(*3) 
  s<<"123"<<WCHAR(13)<<WCHAR(10)<<"456";//(*4)

  HANDLE h =CreateFileW(L"file2.txt", GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE,
    NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);

  ULONG l;
  WriteFile(h, s.str().c_str(), s.str().length() * 2, &l, NULL); 
```

在 (*1) 的情况下，有一个换行符，在 (*2) 和 (*3) 中，我在 file2.txt 中看不到换行符。在 (*3) 中有一个换行符。我`notepad.exe`用来浏览。十六进制编辑器不显示`0x0D`字节，仅显示`0x0A`.

我应该如何正确地将换行符放入 unicode 文本文件中？谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T12:46:11.323

这是意料之中的：`std::endl`将 a 写入`L'\n'`宽字符流（并刷新它，但在这里不相关），从不`L"\r\n"`. 写字面量时更明显`L"\n"`。`WriteFile`不执行任何类型的换行符替换，也没有`wstringstream`（请注意，文件流在以文本模式打开时**会**执行换行符替换，这就是您在 中获得正确换行符的原因`(*1)`）。因此，文件中不会有回车符。如果你想要它们，请明确地写出来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T13:01:23.683

字符串流不进行行尾转换。与(char 或 wchar，取决于上下文)`std::endl`完全相同。`\n`

`CreateFile`不进行行尾转换；它是严格的二进制。

因此，当您使用 stringstream 创建一个字符串并将其写入带有 的文件时`CreateFile`，an`endl`将只是一个换行符 ( `0x0A`) 字符。

记事本不能很好地处理行结尾只是换行符而不是 CR+LF 的文件。

# php - 如何将表中的数据插入数据库？

> ID：10363569
> 
> 赞同：-4
> 
> 时间：2012-04-28T12:41:34.693
> 
> 标签：php, mysql, database

我写了一个脚本，从数据库动态生成数据并输出到表中，现在我希望将相同的数据插入到数据库中。请问我该如何实现？

我想要一种方式，管理员可以查询数据库以查找用户提交的任务（用户提交的任务将以表格形式显示），然后写一份报告或审查它，然后提交。在提交他的报告的过程中，我希望将提交的报告插入到数据库中的另一个表中，以便用户仍然可以查询数据库以读取管理员提交的报告。

实际上，我还没有尝试过任何东西，因为我不知道该尝试什么，我在谷歌上搜索了解决方案但找不到任何解决方案。

编辑添加 4/30 的代码（为了便于阅读）：

```
<?php include('simple_html_dom.php');
if(isset($_REQUEST['submit'])) { 
   $html = file_get_html('cpanel.php');
   foreach($html->find('a') as $td)
      echo $td. '<br>';
   $user = $_REQUEST['uname'];
   $title = $_REQUEST['utitle'];
   $desc = $_REQUEST['udesc'];
   $_date = $_REQUEST['udate'];
   $ucom = $_REQUEST['comment'];
   echo $ucom;
   $query = "INSERT INTO viewreport(Username, Title, Description, Report, Date) VALUES()";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:44:30.177

听起来您想允许管理员对第一个查询发表评论并将这些评论存储在单独的数据库表中？？

您可能使用的流程概述：

*   使用 table1 和 table2 创建数据库，每个都有要分隔数据的字段。
*   构建一个查询数据库的脚本，输出给用户，如果是管理员用户，则包含评论表单。
*   向此脚本添加逻辑，允许管理员用户也可以“查看”评论。
*   通过将用户 ID 和评论发布到另一个脚本来检查这些并使用插入查询将评论和用户 ID 输入到第二个表中来提交。
*   根据提交和插入查询的结果，将结果显示给用户。
*   所有处理都可以在同一个脚本中。只是除以“步”。

例如：

```
<?php
// get_database_info.php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$db_selected = mysql_select_db ( 'database_name' );
if ( first display  AND $db_selected ) {
   // check user for admin
   if ( admin ) {
      $query = 'SELECT field1, field2, ... FROM table1 WHERE ...';
   } else $query = 'SELECT comments, field1, field2, ... from table1 WHERE ...';
   $result = mysql_query ( $query );
   // Process & build the data to show in <body>
   $show = '...';
   // Add a form at the bottom for admin comments
   if ( admin ) {
      $show .= '<form method="post" action="get_database_info.php">';
      // Add input fields for user & comment
      $show .= '....';
   }
}
elseif ( submit comments AND $db_selected ) {
   // Build and enter insert query
   $insert_query = 'INSERT INTO table2 ( field1, ... ) VALUES ( 'abc', ... )';
   // Get result and build <body>
   $show = '...';
}
else
   $show = 'There was an error connecting to the database to process your request.';

?>
<html>
<body>
<?php echo $show; ?>
</body>
</html> 
```

# javascript - CE-HTML 开发

> ID：10363573
> 
> 赞同：3
> 
> 时间：2012-04-28T12:42:01.200
> 
> 标签：javascript, html, css, dom, xmlhttprequest

一些设备声明它们支持 CE-HTML。对我来说，大多数开发人员使用的各种版本的 HTML、CSS 和 JavaScript 等 Web 技术之间的界限和 CE-HTML 有点模糊。

CE-HTML 基于以下内容：

```
* ECMAScript 262, 3rd edition
* XHTML 1.0 transitional/strict
* CSS TV Profile 1.0
* XMLHttpRequest object
* DOM level 2.0 
```

对我来说，这意味着：JavaScript、XHTML（更严格的 HTML 版本）、CSS 的某些方面、AJAX 调用和浏览器内的 JavaScript API，以操纵 Web 内容并获得一些特定于环境的属性。

那么现在问题来了：在将 HTML 应用程序移植到 CE-HTML 时应该注意哪些提示？我认为 CE-HTML webkit 可以处理大多数 HTML 代码，只要它不是 HMTL5 或使用一些更高级的 CSS3 或 DOM Level 3 选项。

欢迎任何意见

-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:59:37.013

您应该记住，CE-HTML 有自己的媒体对象，并且不支持任何类似 html5 的媒体解决方案。

此外，大多数支持 CE-HTML 的设备不会播放 Flash 和其他专有解决方案等内容。

由于 CE-HTML 基于标准 CEA-2014-B（顺便说一下，它的成本是 450 美元，这是一个骗局），我强烈建议您熟悉这个标准（如果你真的想通过 CE- HTML。否则它只是不计算）。它提供了有关 API 的信息（非常广泛）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T11:05:20.643

由于 CE-HTML 文档的基础是 XHTML，因此您必须考虑一些明显的差异。一旦你在你的服务器上启用 CE-HTML mimetype - 如本章所述 - 你会发现使用某些常见的 HTML 语句是非法的，并导致无效的 CE-HTML 文档。最常见的问题是在 HTML 中使用 & 字符。始终确保在 CE-HTML 中将 & 字符写为 &。

# wix - WiX 无法检查使用 CustomAction 设置的属性

> ID：10363576
> 
> 赞同：3
> 
> 时间：2012-04-28T12:42:23.183
> 
> 标签：wix, custom-action

我想根据某些值在安装中包含不同的 dll。因此，我正在尝试基于使用自定义操作设置的属性加载组件。

在 wxs 文件中：

```
...
<Property Id="PropDllVersion" Value="0" />
...
<CustomAction Id="CheckPropDllVersion" BinaryKey="CustomAction1.dll" DllEntry="GetPropVersion" Return="ignore" Execute="immediate"/>
...
<InstallExecuteSequence>
    <Custom Action="CheckPropDllVersion" After="ValidateProductID" />      
</InstallExecuteSequence>
...
  <Component Id="Test"
     Guid="B81F832D-2D96-4169-9BD0-8D77098FEC60">
    <Condition><![CDATA[PropDllVersion = "19"]]></Condition>
    <File Id="File15"
      Name="xyz.dll"
      Vital="yes"
      KeyPath="yes"
      AssemblyManifest="File5"
      AssemblyApplication="File5"
      Assembly=".net"
      DiskId="1" 
      />
  </Component>
... 
```

然后在自定义操作文件中：

```
[CustomAction]
        public static ActionResult GetPropVersion(Session session)
        {
    session["PropDllVersion"] = "19";
        } 
```

我可以在 msi 日志文件中看到此属性已更改为 19，但是 xyz.dll 未包含在安装中。看起来 PropDllVersion 没有在条件级别设置，或者我做错了什么......我试图在许多其他地方对其进行排序仍然无法正常工作......

如果我在条件中使用全局属性而不是我的属性，它就可以工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:13:18.980

请注意，[私有属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370851%28v=vs.85%29.aspx)（其名称包含小写字母）在 InstallExecuteSequence 中使用其默认值。因此，您应该使用[公共属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370912%28v=vs.85%29.aspx)，例如 PROP_DLL_VERSION。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T08:32:29.497

您还尝试在哪里对自定义操作进行排序？您需要在 CostInitialize 操作之前对其进行排序。

此外，在 CostInitialize 和 CostFinalize 操作之后调用 FileCost 操作。

您可以在此处查看 CostInitialize 操作的文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa368050%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368050%28v=vs.85%29.aspx)

# django - 如何像在 Django admin 中一样从模型自动创建视图？

> ID：10363581
> 
> 赞同：2
> 
> 时间：2012-04-28T12:42:54.073
> 
> 标签：django, view, web-frameworks, scaffolding, model-driven-development

我开始使用 Django，我对从模型自动创建视图的可能性印象深刻。所以，我想知道其他 web 框架上是否有这样的功能。我知道 RoR 脚手架，但这并不完全相同，因为您需要手动更改视图以防更改相关模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-30T23:06:37.963

对于那些在这里寻找答案的人，也许 django-baker ( [https://github.com/krisfields/django-baker.git](https://github.com/krisfields/django-baker.git) ) 会满足你的需要。

```
pip install django-baker 
```

然后将**django_baker**添加到 INSTALLED_APPS 并运行

```
python manage.py bake your_app_name 
```

请注意，之前您需要从您的应用程序中删除 urls.py 和 views.py 以便生成它们。

然后它将生成所有骨架的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:15:25.700

[https://docs.djangoproject.com/en/dev/topics/class-based-views/](https://docs.djangoproject.com/en/dev/topics/class-based-views/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:38:47.390

我想我找到了一种可能的解决方案。这个概念被称为模型驱动开发。有相当多的 java 框架提供了直接从模型创建一个相当简单的应用程序的能力。这篇文章介绍了其中一些[http://www.javaneverdie.com/java-frameworks/java-domain-driven-frameworks-review/](http://www.javaneverdie.com/java-frameworks/java-domain-driven-frameworks-review/)

# c# - 类似于 WPF/XAML ValueConverter 的 ASP.NET 功能？

> ID：10363582
> 
> 赞同：1
> 
> 时间：2012-04-28T12:43:00.403
> 
> 标签：c#, asp.net, data-binding, eval

我有一个绑定到一些非常轻量级对象的 DataList。

我正在为我的对象编写 ItemTemplate，第一个条目很简单：

```
<h2>'<%# Eval("Name") %>'</h2> 
```

然而，对于下一个条目，我想在对象中使用几位信息并将其组合成一个字符串。所以我想做类似的事情：

```
<p>'<%# CallACustomTypeConverterDefinedInDllXYZ(onTheBoundObject) %>'</p> 
```

有没有办法实现我正在寻找的东西？常见的做法是什么？

# asp.net - 如何删除 Visual Studio 的弹出窗口“选择等待请求...”

> ID：10363594
> 
> 赞同：1
> 
> 时间：2012-04-28T12:44:27.517
> 
> 标签：asp.net, visual-studio-2010, debugging

我有一个项目，其中包括一个 Web 应用程序 (mvc) 和一个 WPF 应用程序。对于重要的部分，WPF 应用程序连接到网站上托管的 WCF 服务。

我想要实现的是，当我按下 Ctrl+F5 （开始不调试）时，构建过程开始（如果需要，换句话说，默认的 VS 行为），WPF 应用程序启动，如果 webdev 服务器不是启动，它也启动了，但没有在我的浏览器上打开任何页面（我会自己管理）。

我设法让它按我想要的方式工作（下面的配置），但是每次我执行 Ctrl+F5 时，我都会从 VS 弹出一个窗口，上面写着

> 选择等待来自另一个进程的请求而不启用 ASP.NET 调试会导致无法调试。

我很重视这些信息，而且这似乎与我想要完成的内容非常匹配，但是现在，我不必关闭浏览器中无用的选项卡，而是必须关闭一个模式对话框。从我的角度来看，没有太大的进步。

那么，如何防止此弹出窗口出现？

附加信息：

*   我不想以调试模式 (F5) 开始。如果我需要调试网站，我会照常进行（连接到 webdev 服务器）。
*   我希望 webdev 服务器从第一个 CTRL+F5 开始一直运行。
*   我不想在 IIS 上发布它（即使是 express 版本）
*   解决方案启动选项设置在“多启动项目”上，WPF 应用程序设置在“开始”上，网站设置在“开始而不调试”上（在开始上设置它不会改变任何东西，除了调试时我也会得到弹出窗口F5 直接）。
*   该网站的启动操作配置为“不要打开页面。等待来自外部应用程序的请求”。调试器中的 ASP.NET 复选框被选中。

到目前为止，互联网并没有太大的帮助，所以我所有的希望都寄托在你们 SOers 身上！

**编辑**

似乎它被[标记为错误](http://connect.microsoft.com/VisualStudio/feedback/details/695193/message-prompt-with-start-without-debugging-on-mvc-3-projects)，但我没有看到任何关于它应该修复的版本的参考......

另外，我发现我的问题[与这个问题重复](https://stackoverflow.com/questions/8033733/vs-message-wait-for-a-request-without-enabling-asp-net-debugging)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:38:06.267

我实际上找到了另一种方法：在启动操作中，您可以将其设置为“启动外部程序”并引用自退出程序。我使用“C:\Windows\System32\PING.EXE”。不完美，但也没有以前的解决方案那么烦人。

# facebook - Facebook 登录 - access_token

> ID：10363595
> 
> 赞同：0
> 
> 时间：2012-04-28T12:44:46.330
> 
> 标签：facebook, login, access-token

我正在尝试通过 facebook 将用户登录到我的网页，在他们通过 facebook 登录后，我想将他们的 id（和其他一些信息）存储在 db 中，所以当有人回来时，他/她将被重定向到他们的个人资料（第一次创建哪个脚本）。

所以，我想问可以使用java sdk（facebook）获取访问令牌，然后通过ajax在.php中使用该令牌..

因此，例如在 javascript 中会是这样的：

```
FB.init({
   appId: 'xxxxxxxxxxx',
   status: true,
   cookie: true,
   xfbml: true,
   oauth: true
});

//login
FB.login(function (resp) {
   if (resp.authResponse && resp.authResponse.userID) {
      var accessToken = response.authResponse.accessToken;
      //here will be call for ajax with accessToken parmetar
   }
});
}); 
```

之后 .php (sdk php facebook) 将使用该访问令牌来获取有关用户的信息。

可能你会问为什么我不只是通过 ajax 发送 resp.authResponse.userID 并将其存储在 db 中。答案是，有人可以使用“java in fly”并存储具有不同 id-s 的用户。我希望使用访问令牌获取.php（服务器）端的信息不会让这种情况发生..

# haskell - Haskell：类型安全同义词的新类型：使用两个构造函数有什么办法吗？

> ID：10363598
> 
> 赞同：1
> 
> 时间：2012-04-28T12:45:07.050
> 
> 标签：haskell, instance, newtype

我想定义一个事物的多个版本，但具有不同的类型，以增强我程序中的类型安全性。例如，我有几种类型的双变量值，我想成为它们的实例，`Num`但它们都应该是不同的类型。所以我所做的是用一个类型变量创建一个新类型，并在此基础上声明新类型。但是，我发现我现在必须一直使用这两个构造函数有点烦人。有没有办法解决？

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-}

newtype Bivar t = Bivar (t,t) deriving (Show, Eq)

instance (Num t) => Num (Bivar t) where 
  (+) (Bivar (x1,y1)) (Bivar (x2,y2)) = Bivar (x1+x2, y1+y2)
  (-) (Bivar (x1,y1)) (Bivar (x2,y2)) = Bivar (x1-x2, y1-y2)
  (*) (Bivar (x1,y1)) (Bivar (x2,y2)) = Bivar (x1*x2, y1*y2)
  abs (Bivar (x1,y1)) = Bivar (abs x1, abs y1)
  fromInteger i = Bivar (fromInteger i, fromInteger i)
  signum (Bivar (x1,y1)) = Bivar (signum x1, signum y1)

newtype BivarNode = BivarNode (Bivar Int) deriving (Show, Eq, Num)
newtype BivarVal = BivarVal (Bivar Double) deriving (Show, Eq, Num)
newtype HBivarVal = HBivarVal (Bivar Double) deriving (Show, Eq, Num)

-- This is annoying:
a1 = BivarVal (Bivar (1.0, 2.0))
a2 = HBivarVal (Bivar (1.0, 2.0))
b = BivarNode (Bivar (1,2))

-- is there a way so that I can write it this way?
aa1 = BivarVal (1.0, 2.0)
aa2 = HBivarVal (1.0, 2.0)
bb = BivarNode (1,2) 
```

谢谢你！

**编辑：**

为了扩展原始问题，我还想在模式匹配中使用类型名称，类似于

```
myFunction :: HBivarVal -> Double
myFunction (HBivarVal (Bivar (x,y))) = x 
```

这也可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:03:35.793

为什么不把它们*都*变成新类型`Bivar`呢？

```
instance (Num a, Num b) => Num (a, b) where
    (a, b) + (a', b') = (a+a', b+b')
    (a, b) * (a', b') = (a*a', b*b')
    (a, b) - (a', b') = (a-a', b-b')
    fromInteger i = (fromInteger i, fromInteger i)
    abs    (a, b) = (abs    a, abs    b)
    signum (a, b) = (signum a, signum b)

newtype Bivar t   = Bivar     (t     , t     ) deriving (Show, Eq, Num)
newtype BivarNode = BivarNode (Int   , Int   ) deriving (Show, Eq, Num)
newtype BivarVal  = BivarVal  (Double, Double) deriving (Show, Eq, Num)
newtype HBivarVal = HBivarVal (Double, Double) deriving (Show, Eq, Num) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:48:01.740

是的，您可以定义辅助函数：

```
bivarVal = BivarVal . Bivar
hBivarVal = HBivarVal . Bivar
bivarNode = BivarNode . Bivar 
```

# c# - UpdatePanel Update() 导致 InvalidOperationException 错误

> ID：10363601
> 
> 赞同：0
> 
> 时间：2012-04-28T12:45:44.910
> 
> 标签：c#, asp.net, visual-studio-2008, .net-3.5

我的 Asp.net 3.5 Visual Studio 2008 Web App 有一个带有按钮事件的网页 (Admin.aspx)，该按钮事件运行一个漫长的过程（30 秒 +）然后触发 UpdatePanel1.Update() 以刷新页面.. 导致 Invalid操作异常。

Admin.aspx 有一个 MasterPage

Admin.aspx（部分）在这里：

```
<div id="Tabs">
    <div class="cen2">
        <asp:ScriptManager ID="ScriptManager1" AsyncPostBackTimeOut="360000" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" ChildrenAsTriggers="False" runat="server"
            UpdateMode="Conditional"  >
            <ContentTemplate>

           cont....... > 
```

Admin.aspx.cs here (partial) 这是由委托事件触发的。

```
private void port_trdRes(object sender, DataTable dt)
{

    dlResSum.DataSource = dt;
    dlResSum.DataBind();
    try
    {
        UpdatePanel1.Update();
    }
    catch (Exception webex)
    {
        SendErr("Admin.aspx PortTrd Res Exception " + webex.Message.ToString());
    }
    simtrd.port.trdRes -= new Steury.Trading.TrdSummDelegate(port_trdRes);
} 
```

当我得到`UpdatePanel1.Update()`它时，总是给我一个

**错误**：

> System.Web.Extensions.dll 中出现“System.InvalidOperationException”类型的第一次机会异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:07:25.040

根据您调试应用程序和处理异常的方式，可能会导致此问题。第一手异常并不总是坏事，只是您在 VS 中的调试器可能会在引发此类异常时设置为停止。

第一手异常并不一定意味着您的代码中有问题，而是遇到了异常（请原谅双关语）情况，并且取决于您在应用程序中处理异常的方式，它可能会或可能不会优雅地结束。我认为您的应用程序就是这种情况，因为您没有处理异常并且调试器正在停止该过程。

[您应该尝试将try catch 语句](http://msdn.microsoft.com/en-us/library/0yd65esw%28v=vs.80%29.aspx)或 try catch finally 语句的使用合并到您的代码中。特别是因为您有长时间运行的异步事件。

如果您不想使用 try catch 语句而只想禁止出现这些第一次或第二次更改异常，您可以通过转到**工具 >> 选项 >> 调试 >> 常规**并取消选中**将所有输出窗口文本重定向到即时窗口**

根据您的评论，异常可能是由页面生命周期引起的，并且服务器在部分回发时重建页面时没有意识到控件。在您的代码示例中，您似乎没有在更新面板中使用任何触发器。如果您希望在代码中严格确定更新，请将更新面板的 ChildrenAsTriggers 属性更改为 false。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="false" UpdateMode="Conditional"> 
```

[这是对该属性如何工作的更深入的解释](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.childrenastriggers.aspx)

# c# - C#中的加密

> ID：10363606
> 
> 赞同：1
> 
> 时间：2012-04-28T12:46:49.183
> 
> 标签：c#, asp.net, encryption

我偶然发现了下面的代码片段，它加密了用户的密码。这就是我想要做的，因为我不想在没有任何加密的情况下将用户的密码存储在数据库中。

这对于我想要实现的目标来说工作得很好，但我的问题是：如何取消加密以确保他们在密码框中输入的值匹配？

```
// Hash the password details of the user!
private static string CreatePasswordHash(string pwd, string salt)
{
  string saltAndPwd = string.Concat(pwd, salt);
  string hashedPwd = 
    FormsAuthentication.HashPasswordForStoringInConfigFile(saltAndPwd, "SHA1");
  hashedPwd = string.Concat(hashedPwd, salt);
  return hashedPwd;
} 
```

我这样称呼上面

```
string password = CreatePasswordHash(TxtPassword.Text, "1579"); 
```

然后密码变成这样：`566DAB495AD0747B49865F9177E430DFAD63CA281579`

那么我该如何取消加密呢？

感谢您的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T15:12:50.690

首先，**不要尝试编写自己的密码存储系统**。你会弄错并建立一个不安全的系统。聘请专门从事此类工作的专家，让他们编写系统，并培训您正确使用和维护系统。

其次，该代码的全部*意义*在于您不可能找到用户的密码。**他们的密码与您无关。**加盐哈希的目的是*建立一个验证系统，您不必首先存储他们的密码，*但您仍然可以验证*他们*是否知道他们的密码。

要了解它是如何工作的，请阅读我关于该主题的四部分系列文章：

[http://blogs.msdn.com/b/ericlippert/archive/tags/salt/](http://blogs.msdn.com/b/ericlippert/archive/tags/salt/)

但同样**不要尝试自己这样做**。如果您需要从事安全工作，请聘请在该领域拥有数十年经验的专家。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T12:50:15.737

哈希的要点是**没有人**可以解密它！

当用户尝试登录时，您对输入的密码进行哈希处理，然后将哈希值与数据库中的内容进行比较。如果哈希匹配，则密码正确。

# c++ - valgrind 报告的 frees 比 allocs 多

> ID：10363609
> 
> 赞同：3
> 
> 时间：2012-04-28T12:47:28.000
> 
> 标签：c++, debugging, valgrind

我是 valgrind 的新手，所以我可能做错了什么，但是如果 valgrind 报告的 frees 比 allocs 多，我该怎么办？

在这里获得了 SSCCE：

```
#include <cstring>

class something
{
protected:
    char* ptr;
public:
    something() {ptr = NULL;}
    something(const char* value) {
        ptr = new char[strlen(value)+1]; strcpy(ptr, value);
    }
    ~something() {delete[] ptr; ptr = NULL;}
};

int main()
{
    something x;
    x = "123";
    return 0;
} 
```

编译得很好，运行也很好，但是 valgrind 说

```
==15925== Invalid free() / delete / delete[]
==15925==    at 0x40221EA: operator delete[](void*) (vg_replace_malloc.c:364)
==15925==    by 0x8048689: something::~something() (test.cpp:12)
==15925==    by 0x80485F5: main (test.cpp:19)
==15925==  Address 0x42b7028 is 0 bytes inside a block of size 4 free'd
==15925==    at 0x40221EA: operator delete[](void*) (vg_replace_malloc.c:364)
==15925==    by 0x8048689: something::~something() (test.cpp:12)
==15925==    by 0x80485E5: main (test.cpp:18)
==15925==
==15925== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 18 from 1)
==15925== malloc/free: in use at exit: 0 bytes in 0 blocks.
==15925== malloc/free: 1 allocs, 2 frees, 4 bytes allocated.
==15925== For counts of detected errors, rerun with: -v
==15925== All heap blocks were freed -- no leaks are possible. 
```

我不确定为什么。
当然，我可以做出有根据的猜测——显然，违规行就是它所说的地方`x = "123";`，如果你把它评论出来，一切都很好。但是为什么编译器会认为这没问题，即使是`-Wall -Wextra -pedantic`? 我是否忘记了可以告诉我该程序有问题的编译器开关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:50:32.503

`x = "123"`等效于`x = something("123")`，它调用隐式复制赋值运算符。临时`something`被破坏了，但随后也是如此`x`，两者都是`delete []`相同的原始指针。

解决方案是遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)，或者使用智能指针/容器为您进行内存管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:50:45.313

你忘了执行**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。
您应该提供一个复制构造函数以及复制赋值运算符。

```
x = "123"; 
```

调用隐式生成的复制赋值运算符，该运算符生成对象的浅拷贝，一旦临时对象被销毁，析构函数就会释放分配的内存，将指针成员作为悬空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:50:37.293

您的`something`类包含一个未由其（编译器提供的）复制构造函数和赋值运算符正确管理的原始指针。不要使用原始指针，或者如果必须，更仔细地定义你的类方法。但实际上，不要使用原始指针。

# c# - 如何根据单元格的值更改 WPF ListView 单元格中的字体颜色？

> ID：10363610
> 
> 赞同：6
> 
> 时间：2012-04-28T12:47:28.923
> 
> 标签：c#, wpf, listview

```
<ListView ItemsSource="{Binding}" Name="myView">
            <ListView.View>
                <GridView>
                    <GridViewColumn DisplayMemberBinding="{Binding fieldA}" Header="Field A" />
                    <GridViewColumn DisplayMemberBinding="{Binding fieldB}" Header="Field B" />                    </GridView>
            </ListView.View>
        </ListView> 
```

我想知道如何格式化我的列表视图，以便如果 object.fieldA == "apples"，则 fieldA 单元格中的字体为红色。

谢谢博芬。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:00:37.107

您需要使用 a`DataTemplate`来显示该`fieldA`值并添加一个触发器来更改`Foreground`给定值的属性。

另请参阅MSDN 上的[数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)。

```
<GridViewColumn Header="Field A">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <TextBlock x:Name="Txt" Text="{Binding fieldA}" />
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding fieldA}" Value="apples">
                    <Setter TargetName="Txt" Property="Foreground" Value="Red" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

# mysql - MySql 重启后：#1452 - 无法添加或更新子行：外键约束失败

> ID：10363611
> 
> 赞同：2
> 
> 时间：2012-04-28T12:47:44.383
> 
> 标签：mysql, phpmyadmin, mamp

MySql 重新启动后，当我尝试更新或插入行时出现此错误：#1452 - 无法添加或更新子行：外键约束失败。

奇怪的是，当我再次使用 phpMyAdmin 删除并添加键约束时，问题就消失了。此外，我只有 MAMP 有这个问题，WAMP 没有，直到现在也没有任何其他服务器。我使用 MySQL 5.5.9，任何人都可以为此提供解决方案吗？谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:50:27.123

我对 MAMP 有同样的问题：/ 我不知道原因，但“FLUSH TABLE”解决了它。

# java - 我的仪表板系统中的空指针异常

> ID：10363618
> 
> 赞同：1
> 
> 时间：2012-04-28T12:48:41.900
> 
> 标签：java, mysql, jsf

我正在做类似 twitters 仪表板系统的事情来改进我的 Java Faces 知识。我有一个叫做 dashborad 的问题。我需要在索引中发布帖子以显示登录用户关注的人。就像 Facebook 的墙或 Twitters 仪表板一样。我做了一些事情。但我有一个错误。它是 NullerPointerException。这是我的代码：这是我的模型代码。这是从数据库中获取关注者。

```
public void whoIFollow(int[] list) throws SQLException {
  MembersModel person = new MembersModel();
  person.LoggedUserInfo(person.getSession());
  long userid = person.getId();
  Statement stat = (Statement) getConnect().createStatement();
  ResultSet result = stat.executeQuery("SELECT * FROM `following` WHERE `follower_id`="+ userid); // Sorting following table which equals Logged Users id
  int i = 0;
  while (result.next()) {
    list[i] = result.getInt("user_id");
    i++;
  }
  if (i == 0) {
    System.err.println("i sıfıra eşit");
  }
} 
```

这是我在仪表板类中的 getPosts 方法：

```
public List<BlogPost> getPosts() throws SQLException {
        FollowingModel test = new FollowingModel();
        FollowingBlog post = new FollowingBlog();
        try {
            test.whoIFollow(followingList);
            String following = null;

            for (int i = 0; i < followingList.length; i++) {
                if (i == followingList.length) {
                    following += followingList[i];
                } else {
                    following += followingList[i] + ",";
                }
            }
            post.listPost(posts, following);
        } catch (NullPointerException e) {
            System.err.println("Hataa");
        }
        return posts;
    } 
```

1.  **我在仪表板类中有以下整数数组 **
2.  **另外，在 DashboardClass 中发布 ArrayList** 我的错误是什么？

**感谢您帮助** ***最好的问候***

# php - 字符串中的文本文件

> ID：10363622
> 
> 赞同：1
> 
> 时间：2012-04-28T12:49:23.020
> 
> 标签：php

我想要的只是逐行显示 pageset.txt 中的包含。

好的，我有这个代码：

```
$lines = file('pageset.txt');
foreach($lines as $line) {
// do something with $line.
$hh = $line . "<br/>";

echo $hh; 
```

现在我想逐行显示它，就像你看到的
那样，这意味着每个包含都应该逐行显示，所以它必须但是它不能逐行显示，而且不好的是它只显示 pageset.txt 中的一个包含。希望这里有人可以提供帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:52:45.747

`$hh`在回显最后一行之前，您会继续覆盖。

试试这个：

```
echo nl2br(htmlspecialchars(file_get_contents("pageset.txt"))); 
```

*   [`file_get_contents`](http://php.net/file-get-contents)一口气读入整个文件（不适合非常大的文件，但仍然比`file`这方面更好）。
*   [`htmlspecialchars`](http://php.net/htmlspecialchars)转义文件中的任何 HTML，以便正确显示 <。如果您确实想要包含文件的 HTML，请删除。
*   [`nl2br`](http://php.net/nl2br)是一种添加`<br />`到每行末尾的巧妙方法。本质上它是`str_replace(PHP_EOL,"<br />".PHP_EOL,$input)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:51:52.943

您忘记将连接运算符添加到变量赋值中：

```
$hh = '';
$lines = file('pageset.txt');
foreach($lines as $line) {
    // do something with $line.
    $hh .= $line . "<br/>";
}
echo $hh; 
```

# sql - 产品类别的树状结构数据库架构

> ID：10363624
> 
> 赞同：1
> 
> 时间：2012-04-28T12:49:33.113
> 
> 标签：sql, database-design, relational-database

我正在为电子商务网站创建一个数据库，但我在产品类别的数据库架构方面遇到了问题，这有点像树状结构。

供应**商**可以属于一个或多个部门，**部门**可以有一个或多个类别，**类别**可以有一个或多**个子类别**。同样，子类别可以有其子类别，依此类推...

**产品**应映射到供应商（如果部门未知）或部门（如果类别未知）或子类别等等。

做这种复杂关系数据库的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:00:33.297

嘿，您可以在单个表中执行此操作。

```
ID  PARENT_ID   NAME
------------------------------
1   0           vendor1
2   0           vendor2
3   1           department11
4   1           department12
5   2           department21    
6   3           category11
7   6           subcategory11 
```

从上面你可以了解整个...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-17T20:18:22.527

我花了几天时间研究这个问题。

设想：

销售绳索：配件、汽车 > 配件、船舶 > 配件

*   有些绳索只在 Marine > Accessories 出售
*   一些绳索仅在配件中出售（顶部菜单项）
*   部分绳索全部出售 3
*   一般来说，任何项目都需要在任意数量的分支中列出，并且每个分支都需要是任意可能的深度。（这个平台只允许3个，但为未来设计）

**收藏**是某个商店平台允许人们组织物品的方式。他们的字段是有限的，似乎只有标签字段可用于自定义信息。这是他们系统中离散项的逗号分隔字段。

以下是我的场景的 Collection ~~ 标准定义组合：

*   配件~~标签=“配件”
*   汽车 > 配件 ~~ tags = "汽车 > 配件"
*   Marine > Accessories ~~ tags = "Marine > Accessories"

我有一个包含 3 个类别的类别表：

```
Category_ID | Category_Text
 1             Accessories
 2             Automotive
 3             Marine 
```

我卖 2 根绳子：一根**汽车牵引绳**和一根**通用尼龙绳**

产品表：

```
Product_ID | Product_Title
 1            Automotive Tow-Rope 
 2            General Purpose Nylon Rope 
```

我的数据提要带有一个类别字段，其中所有分支都以竖线分隔。

```
..., Title, Category, ...
..., "Automotive Tow-Rope",  "Automotive > Accessories", ...
..., "General Purpose Nylon Rope", "Accessories | Automotive > Accessories | Marine > Accessories", ... 
```

我将 Category 字段拆分为像这样 Product_Category_Relationship 数据的关系表：

```
Product_ID | Branch | Level | Category_ID  (Showing text for clarity)
 1            1        1       2           (Automotive
 1            1        2       1                       + Accessories)
 2            1        1       1           (Accessories)
 2            2        1       2           (Automotive 
 2            2        2       1                       + Accessories)
 2            3        1       3           (Marine
 2            3        2       1                       + Accessories) 
```

这样我可以看到多个分支，每个类别路径的深度。

我现在在本地使用 SQL Server 来操作文件。我终于让这个查询以非规范化的方式将它们组合在一起。

```
*** TO DO: JOIN CATEGORY TABLE FOR ACTUAL TEXT VS CAT_ID LIKE EXAMPLE ***
SELECT prod_id,  STRING_AGG (branchpath,' | ') AS allpaths
FROM
    (SELECT prod_id, branch,  STRING_AGG (cat_id,',') WITHIN GROUP (ORDER BY depth) AS branchpath
    FROM prod_cat_rel
    GROUP BY prod_id, branch) t
GROUP BY prod_id 
```

**STRING_AGG**函数是最后的救命稻草。我也在其他平台上看到过关于类似功能的讨论，所以这不是 SQL Server 唯一的解决方案。

我尝试了很多方法来将数据整理成合乎逻辑且灵活的排列，并且知道有些人会争论其他层次结构，但这对我有用。

很快，我将完成我的新商店并从我的网站链接它：C'mon 's GO！(cmonsgo.com)

我希望这对其他人有帮助。亚当

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-18T08:48:12.470

这是一个反复出现的问题。在纯 SQL 数据库中存储层次结构有两种常用方法（有些具有层次结构扩展，使其更容易）。

第一个是@ketan 建议的解决方案。该模型的挑战在于，很难找到完整的子集——原生 SQL 不进行递归，因此“为 Vendor x 找到所有子集”可能很困难。

替代方案是[由 Joe Celko 提出的](http://www.ibase.ru/files/articles/programming/dbmstrees/sqltrees.html)，通常被称为“嵌套集”。[维基百科](https://en.wikipedia.org/wiki/Nested_set_model)上的例子很简单：

```
Node        Left    Right
Clothing    1   22
Men's       2   9
Women's     10  21
Suits       3   8
Slacks      4   5
Jackets     6   7
Dresses     11  16
Skirts      17  18
Blouses     19  20
Ball Gowns  12  13
Sun Dresses 14  15 
```

要找到给定父母的所有孩子很容易：

```
SELECT Child.Node, Child.Left, Child.Right
FROM Tree as Parent, Tree as Child
WHERE
    Child.Left BETWEEN Parent.Left AND Parent.Right
    AND Parent.Left = 1  -- Given Parent Node Left Index 
```

# collision-detection - 对象碰撞编程（多重碰撞案例）

> ID：10363635
> 
> 赞同：5
> 
> 时间：2012-04-28T12:51:10.133
> 
> 标签：collision-detection, physics

我一直在学习物理编程中的碰撞，我有一个很大的疑问。

在球体中思考，当一个球体同时与 2 个碰撞时，我认为使两个球体移动的力大小必须除以 2。但是当我对其进行编程时，我总是看到一个球体的速度比第二个球体的速度快，导致我编程它的方式首先与另一个球体发生碰撞。让我们展示一张图片来清楚地画出问题：

![在此处输入图像描述](../Images/b62cbab64da42a1f28fcad4bfdf62fe3.png)

起初它检测到红色球体。然后检测到碰撞，力的大小就像只有一个球体。然后它检测到橙色球体，并且力大小小于第一个。

知道我必须用什么来编程这个，或者我有什么误解吗？

**模组**：

此外，如果你帮我寻找一种可以很好地实现这一点的机制，我会给你 50+ 更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:07:13.217

在计算任何力、速度、能量等变化之前，请小心测试所有可能的成对相互作用。听起来你的物理模拟很高兴在它检测到第一次碰撞后立即计算动力学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T20:53:43.957

DarenW 的意思（作为一个 n00b，我不能直接评论他的回答）是序列应该是这样的：

```
//test for collisions
blueHitRed = didCollide(blue, red)
blueHitOrange = didCollide(blue, orange)
...
//calculate resultant velocities
red.velocity = ...
orange.velocity = ...
blue.velocity 
```

而从你的描述看来，这样的事情实际上正在发生

```
//red
blueHitRed = ...
red.velocity = ...
blue.velocity = ...
//orange
blueHitOrange = ...
orange.velocity = ...
blue.velocity = ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T04:10:53.263

问题是对于两体碰撞，能量守恒和动量守恒基本上足以确定结果，但对于三体问题，情况不再如此。即使你按照 Mark 和 Daren 的建议做，并在一个时间步内确定所有碰撞物体，它也不能真正让你到达任何地方，因为 1）你仍然不知道如何在碰撞后移动物体；和 2) 在每次碰撞期间要考虑多少个对象的主要问题不是时间步长，而是对象的变形，如果你正确对待这一点，一个时间步长内的更新顺序将无关紧要。例如，如果您有非常柔软的物体，它们可能会接触很多时间步长，而非常硬的物体只会接触几个时间步长。

这个问题的一个好的答案有点棘手，而这个问题的原因包含在你的奖励问题中，即*机制是什么*。该机制基本上只是您在简化问题中没有考虑的事情：物体的变形、滑动、旋转等，但这些通常是三体碰撞中的主要问题。

你做什么完全取决于你需要多少准确性。您可以假设所有碰撞都发生在两个对象之间，或者第三个碰撞两个对象总是完全对称的（这是一个非常罕见的事件）。作为一个更准确的开始，您可以只考虑它们是可变形的物体，假设每次碰撞都有一个时刻，当一切都发生最大变形时，这些变形产生的力是什么，并根据这些力发送东西（ F=dp/dt)。不过，可以进行其他近似，比如根据首先被击中的一个来划分动量传递，并给它一个与 do（变形量）/（到下一个物体的距离）成比例的量，或类似的东西。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-29T04:16:24.430

这是[N 体问题](http://en.wikipedia.org/wiki/N-body_problem)的一个例子。一般来说，没有解析解，所以你只能得到一个近似值。将其视为两个单独的碰撞是一个足够好的近似值。

[编辑]澄清：当三个物体都相互作用时，在很短的时间内，这是n体问题。不是牛顿 n 体问题，而是更一般的情况。

# vb.net - 在另一个线程上运行表单

> ID：10363638
> 
> 赞同：0
> 
> 时间：2012-04-28T12:51:25.457
> 
> 标签：vb.net, multithreading, thread-safety

我目前拥有的是主要形式，然后当用户按下按钮时，它会运行一些函数，这些函数会循环访问一些文件并更改它们，然后将它们复制到另一个位置，这些函数可能需要相当长的时间。我想要的是，当按下按钮时，它会打开另一个带有文本框的表单，当它完成循环的 1 个循环时，会向文本框输出一行并告诉用户天气是否已成功。

目前我有：

```
 Dim t As Threading.Thread
    t = New Threading.Thread(AddressOf Form3.Show)
    t.Start() 
```

当该循环结束时，只需将一些文本附加到该文本框：

```
for each x in list
    'copy some files
    Form3.RichTextBox1.AppendText("Cycle 1 compleate")
loop 
```

虽然它运行表单只是闪烁了几次？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:01:36.760

您应该将所有 UI 控件保留在 UI 线程上——包括整个`Forms`.

您可以在后台运行文件操作，并且仅在您要附加消息时才编组回 UI 线程。

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在这里非常适合。

这里有一本很棒的免费电子书：[Albahari](http://www.albahari.com/threading/)。

# ios - 以编程方式刷新 mapview 用户位置

> ID：10363639
> 
> 赞同：1
> 
> 时间：2012-04-28T12:51:30.310
> 
> 标签：ios, mapkit, userlocation

我有一个带有地图视图的第一个视图控制器。showUserLocation 设置为 YES 并且效果很好。然后我实现了这个方法：

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation 
```

在 userLocation 更新后做一些事情。它有效，但只是第一次。如果我然后切换到另一个视图，然后我回到 mapviewcontroller，didUpdateUserLocation 将不会再次被触发，尽管用户位置显示在地图上。

有什么建议吗？

提前感谢，塞缪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:01:36.880

对于 iOS 5，使用`[mapView setUserTrackingMode:MKUserTrackingModeNone animated:NO]`.

其次——如果你打电话

```
- (void)mapView:(MKMapView *)aMapView
        didUpdateUserLocation:(MKUserLocation *)aUserLocation 
```

方法

```
[aMapView setRegion:region animated:YES]; 
```

如果要将其移动到用户位置，请不要这样做。

# knockout.js - 淘汰本机绑定，无容器绑定的语法错误

> ID：10363644
> 
> 赞同：2
> 
> 时间：2012-04-28T12:51:58.220
> 
> 标签：knockout.js

处理我的第一个严肃的本机绑定模板，并且正在制作一个明显的语法错误。问题部分如下 -

```
<tr class="knockoutGrid-header">
    <!-- ko foreach: columns -->
    <th class="ui-widget-header">
        <!-- ko if:  !$data.NoSort  -->
        <button onclick='viewModel.gridViewModel.SortColumn("$data.rowText", $index)' class='GridSortWrapper'
            title='Click to Sort Column'>
            <div style="display: table">
                <div style="display: table-row">
                    <div class="ClearFix">
                    </div>
                    <div style="display: table-cell; vertical-align: middle; width: 100%;">
                        <label data-bind="text: headerText" />
                    </div>
                    <div style="display: table-cell; vertical-align: middle; width: 18px">
                        <span class='ui-icon $data.iconCss  iconBackground sortIcon'></span>
                    </div>
                    <div class="ClearFix">
                    </div>
                </div>
            </div>
        </button>
        <!-- /ko -->
        <!-- ko if:  $data.NoSort   -->
        <label data-bind="text: headerText" />
        <!-- /ko -->
    </th>
    <!-- /ko -->
</tr> 
```

我收到以下错误

**未捕获的错误：找不到要匹配的结束注释标记：ko if：$data.NoSort**

我正在使用淘汰赛 2.1RC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T13:13:27.323

看起来你的问题在这里：`<label data-bind="text: headerText" />`

它应该是： `<label data-bind="text: headerText"></label>`

# c++ - 用 g++ 编译 C++11

> ID：10363646
> 
> 赞同：412
> 
> 时间：2012-04-28T12:52:24.083
> 
> 标签：c++, c++11, g++, flags

我正在尝试将我的 C++ 编译器更新为 C++11。我搜索了一下，得出的结论是我必须使用标志`-std=c++0x`or `-std=gnu++0x`，但我对标志了解不多。谁能帮我？（我使用的是 Ubuntu 12.04。）

这是我尝试使用 C++11 中包含的库（即数组）时从编译器得到的错误：

```
#include <array>
#include <iostream>

int main()
{
    std::array<int, 3> arr = {2, 3, 5};
    ...
} 
```

> 该文件需要对即将推出的 ISO C++ 标准 C++0x 的编译器和库支持。此支持目前是实验性的，必须使用 -std=c++0x 或 -std=gnu++0x 编译器选项启用。

* * *

## 回答 #1

> 赞同：589
> 
> 时间：2012-04-28T13:22:02.023

标志（或编译器选项）只不过是传递给编译器可执行文件的普通命令行参数。

假设您正在从命令行（终端）调用 g++：

`$ g++ -std=c++11 your_file.cpp -o your_program`

或者

`$ g++ -std=c++0x your_file.cpp -o your_program`

如果上述方法不起作用。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-18T15:29:03.747

您可以`g++`通过命令检查您的：

```
which g++
g++ --version 
```

这将告诉您当前指向的是哪个编译器。

要切换到`g++`4.7（假设您已将其安装在您的机器上），请运行：

```
sudo update-alternatives --config gcc

There are 2 choices for the alternative gcc (providing /usr/bin/gcc).

  Selection    Path              Priority   Status
------------------------------------------------------------
  0            /usr/bin/gcc-4.6   60        auto mode
  1            /usr/bin/gcc-4.6   60        manual mode
* 2            /usr/bin/gcc-4.7   40        manual mode 
```

然后选择`2`作为选择（我的机器已经指向`g++`4.7，所以*）

切换编译器后，再次运行`g++ --version`以检查切换是否正确发生。

现在编译你的程序

```
g++ -std=c++11 your_file.cpp -o main 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-08-05T18:52:55.630

您可以参考以下[链接](https://en.cppreference.com/w/cpp/compiler_support)以了解哪个版本的编译器支持哪些功能。它在现代编译器中提供了详尽的功能支持列表。似乎 GCC 非常严格地遵循标准并在任何其他编译器之前实现。

关于你的问题，你可以编译使用

1.  `g++ source_file.cpp -o executable_name -std=c++11`对于 C++11
2.  `g++ source_file.cpp -o executable_name -std=c++14`对于 C++14
3.  `g++ source_file.cpp -o executable_name -std=c++17`对于 C++17
4.  `g++ source_file.cpp -o executable_name -std=c++2a`对于 C++20，尚不支持 C++20 的所有功能。有关 GCC 中的功能支持列表，请参阅此[链接](https://gcc.gnu.org/projects/cxx-status.html#cxx2a)。

列表变化很快，如果您正在等待支持特定功能，请密切关注列表。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-04-28T13:01:19.563

你的 Ubuntu 肯定有足够新的`g++`. 要使用的标志是`-std=c++0x`.

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-04-28T13:38:55.537

如果要保留 GNU 编译器扩展，请使用 -std=gnu++0x 而不是 -std=c++0x。这是手册页中的引用：

> 编译器可以接受几个基本标准，例如 c89 或 c++98，以及这些标准的 GNU 方言，例如 gnu89 或 gnu++98。通过指定一个基本标准，编译器将接受所有遵循该标准的程序以及那些使用不与该标准相抵触的 GNU 扩展的程序。例如，-std=c89 会关闭 GCC 的某些与 ISO C90 不兼容的功能，例如“asm”和“typeof”关键字，但不会关闭其他在 ISO C90 中没有意义的 GNU 扩展，例如省略"?:" 表达式的中间词。另一方面，通过指定标准的 GNU 方言，编译器支持的所有特性都被启用，即使这些特性改变了基本标准的含义并且某些严格符合的程序可能会被拒绝。-pedantic 使用特定标准来确定哪些功能是给定该标准版本的 GNU 扩展。例如 -std=gnu89 -pedantic 会警告 C++ 样式 // 注释，而 -std=gnu99 -pedantic 不会。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-18T07:41:18.813

使用`-std=c++11`ISO C++11 的编译器标志。
有关 C++ 编译器标志和选项的更多详细信息，[请查看](https://caiorss.github.io/C-Cpp-Notes/compiler-flags-options.html).

# c++ - 具有静态功能的模板类

> ID：10363650
> 
> 赞同：2
> 
> 时间：2012-04-28T12:52:39.950
> 
> 标签：c++

我想创建一个带有静态函数的模板类

```
template <typename T>
class Memory
{
 public:
  template < typename T>
  static <T>* alloc( int dim )
  {
    T *tmp = new T [ dim ];
    return tmp;
  };
} 
```

但我总会得到

```
int *a = Memory::alloc<int>(5) 
```

我不知道有什么机会..

```
 »template<class T> class Memory« used without template parameters
 expected primary-expression before »int«
 Fehler: expected »,« or »;« before »int« 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T12:55:01.430

当您可能只想模板化其中一个时，您正在模板化类和函数。

你是这个意思吗？

```
template <typename T>
class Memory
{
 public:
  static T* alloc( int dim )
  {
    T *tmp = new T [ dim ];
    return tmp;
  };
}

int *a = Memory<int>::alloc(5); 
```

* * *

这是两者的正确版本：

```
template <typename T>
class Memory
{
 public:
  template <typename U>
  static U* alloc( int dim )
  {
    U *tmp = new U [ dim ];
    return tmp;
  };
}

int *a = Memory<float>::alloc<int>(5); 
```

如果您只想对函数进行模板化，则可以删除外部模板。

# android - 无法将复选框的状态作为 ListView 项的子元素

> ID：10363655
> 
> 赞同：0
> 
> 时间：2012-04-28T12:53:26.560
> 
> 标签：android, checkbox, android-listview

在我的代码中，我使用了如下图所示的结构：

![在此处输入图像描述](../Images/cc53252a244df48f3152a003ba7614e0.png)

检查`CheckBox`，`send` `Button`点击后，我正在阅读`CheckBoxes`下面写的代码的状态，但它显示我未选中。 `CheckboxName.isChecked()`值是`false`，但我`CheckBox`的已检查：

```
 try {
                int nCount = NotebookList.getCount();
                LinearLayout v;
                View vv;
                CheckBox Available, Display, Demo;
                v = (LinearLayout) findViewById(R.id.LinearNotebookList);
                TextView _id, ID, Name;
                for (int i = 0; i < nCount; i++) {
                    v = (LinearLayout) NotebookList.getAdapter().getView(i, null,
                            null);
                    _id = (TextView) v.findViewById(R.id.txt_Notebook_ID);

                    Available = (CheckBox) v
                            .findViewById(R.id.chkboxNotebookAvailable);
                    Display = (CheckBox) v.findViewById(R.id.chkboxNotebookDisplay);
                    Demo = (CheckBox) v.findViewById(R.id.chkboxNotebookDemo);
                    str_id = (String) _id.getText();

                    if (Available.isChecked()) {
                        strAvailable = "YES";
                    } else {
                        strAvailable = "NO";
                    }
                    if (Display.isChecked()) {
                        strDisplay = "YES";
                    } else {
                        strDisplay = "NO";
                    }
                    if (Demo.isChecked()) {
                        strDemo = "YES";
                    } else {
                        strDemo = "NO";
                    }

                    rowID += db.insertAudit(Integer.parseInt(UserId),
                            Integer.parseInt(CityId), Integer.parseInt(OutletId),
                            0, dateTime, "002", Integer.parseInt(str_id),
                            strAvailable, strDisplay, strDemo, null, null, null,
                            null, null, null, null, null, null, null, Instance_Id)
                            + ",";

                }
            } catch (Exception ex) {
                Toast.makeText(getApplicationContext(), ex.getMessage(),
                        Toast.LENGTH_SHORT).show();
            } 
```

我找到了一些可以帮助的

如果是的话，我可以做些什么吗？请让我知道

```
LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.desktop_list, parent, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:06:22.593

要使复选框在 listView 上正常工作，您需要使用 BaseAdapter 类

# c# - ListPicker 不可点击

> ID：10363656
> 
> 赞同：0
> 
> 时间：2012-04-28T12:53:26.890
> 
> 标签：c#, windows-phone-7, silverlight-4.0, listpicker

在我的 WP7 应用程序中，我的 ListPicker 有这个 XAML：

```
<toolkit:ListPicker HorizontalAlignment="Left" ExpansionMode="FullScreenOnly" Height="70" x:Name="ddLinks" VerticalAlignment="Top" Width="419" FullModeHeader="Category" SelectionChanged="ddLinks_SelectionChanged">
    <toolkit:ListPicker.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding linkCatName}" Name="lblLinkCat" />
            </StackPanel>
        </DataTemplate>
    </toolkit:ListPicker.ItemTemplate>
    <toolkit:ListPicker.FullModeItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding linkCatName}" Name="lblLinkCat" FontSize="48" />
            </StackPanel>
        </DataTemplate>
    </toolkit:ListPicker.FullModeItemTemplate>
</toolkit:ListPicker> 
```

后面的 C# 代码：

```
while (condition)
{
     // code to set value of the vars
     this.ddLinks.Items.Add(new LinkCats(linkCatName, linkCatAnchor, linksInCat));
} 
```

还有几个对象：

```
public class LinkCats
{
    public string linkCatName { get; set; }
    public string linkCatAnchor { get; set; }
    public List<Links> linksInCat { get; set; }
    public LinkCats() { }

    public LinkCats(string pLinkCatName, string pLinkCatAnchor, List<Links> pLinksInCat)
    {
        this.linkCatName = pLinkCatName;
        this.linkCatAnchor = pLinkCatAnchor;
        this.linksInCat = pLinksInCat;
    }
}

public class Links
{
    public string linkName { get; set; }
    public string linkPath { get; set; }
    public Links() { }

    public Links(string pName, string pLink)
    {
        this.linkName = pName;
        this.linkPath = pLink;
    }
} 
```

页面加载完成后，它会在控件中和调试时显示作为选定项添加的第一项。但是，如果我单击 ListPicker，则没有任何反应。我无法从其他选项中进行选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:07:43.377

我想我知道问题出在哪里，但我不确定，所以你必须先测试它。这`ListPickers` `ItemTemplate`只是一个单一的`TextBlock`，我认为它应该放在一个`Stackpanel`.

看看下面的链接。

[使用 WP7 ListPicker](http://www.windowsphonegeek.com/tips/Working-with-WP7-ListPicker-SelectedItem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T06:51:17.340

我想我知道问题出在哪里，但我不确定，所以你必须先测试它。ListPickers ItemTemplate 只是一个 TextBlock，我认为它应该放在 Stackpanel 中。

看看下面的链接。

使用 WP7 ListPicker

# php - 如何从文本中提取内容？

> ID：10363657
> 
> 赞同：1
> 
> 时间：2012-04-28T12:53:27.057
> 
> 标签：php, regex, preg-match

我有一个脚本提供一些 IP 地址的信息。

我想从文本中提取国家。

在以下文本中，国家行是`"Country: US"`

我想显示：`US`仅

正文是：

```
[Querying whois.arin.net]
[whois.arin.net]
#
# Query terms are ambiguous.  The query is assumed to be:
#     "n 173.194.74.100"
#
# Use "?" to get help.
#

#
# The following results may also be obtained via:
# http://whois.arin.net/rest/nets;q=173.194.74.100?showDetails=true&showARIN=false&ext=netref2
#

NetRange:       173.194.0.0 - 173.194.255.255
CIDR:           173.194.0.0/16
OriginAS:       AS15169
NetName:        GOOGLE
NetHandle:      NET-173-194-0-0-1
Parent:         NET-173-0-0-0-0
NetType:        Direct Allocation
RegDate:        2009-08-17
Updated:        2012-02-24
Ref:            http://whois.arin.net/rest/net/NET-173-194-0-0-1

OrgName:        Google Inc.
OrgId:          GOGL
Address:        1600 Amphitheatre Parkway
City:           Mountain View
StateProv:      CA
PostalCode:     94043
Country:        US
RegDate:        2000-03-30
Updated:        2011-09-24
Ref:            http://whois.arin.net/rest/org/GOGL

OrgTechHandle: ZG39-ARIN
OrgTechName:   Google Inc
OrgTechPhone:  +1-650-253-0000 
OrgTechEmail:  arin-contact@google.com
OrgTechRef:    http://whois.arin.net/rest/poc/ZG39-ARIN

OrgAbuseHandle: ZG39-ARIN
OrgAbuseName:   Google Inc
OrgAbusePhone:  +1-650-253-0000 
OrgAbuseEmail:  arin-contact@google.com
OrgAbuseRef:    http://whois.arin.net/rest/poc/ZG39-ARIN

#
# ARIN WHOIS data and services are subject to the Terms of Use
# available at: https://www.arin.net/whois_tou.html
# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:04:35.810

使用 preg_match 您可以执行以下操作：

```
if (preg_match('/^Country:\s*([A-Z]{2,3)$/m', $str, $match)) {
    echo $match[1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:01:35.817

如果它只是您需要的正则表达式 - 试试这个 - 国家 ID 将在第一组

```
Country:\s*([A-Z]{2}) 
```

*   `Country:`- 匹配文字
*   `\s*`- 匹配任意数量的空格、制表符等。
*   `([A-Z]{2})`- 匹配并捕获任何字母（大写）两次

`preg_match_all`如果您需要此模式的所有出现，请使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:05:47.337

有一个用于处理 whois 数据的[phpwhois库。](http://sourceforge.net/projects/phpwhois/)它会让你得到一个数组的响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T15:46:48.757

使用 preg_match 提取

```
preg_match("/Country:(.*)\"/siU", $str, $match);
echo trim($match[1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-31T18:16:57.477

```
$regex = "/country:[\ \t\r\n\f][A-Z]+\s/";

$txt = "descr: NCC#200X44704917
country: FR
admin-c: ACPSA223-RIPE
tech-c: TCWQQP8-RIPE";

preg_match($regex, $txt, $result);

print_r($result); 
```

------------------------------------------------
数组 ( [0] => 国家: FR )

# java - Java：同步方法异常和写入可见性

> ID：10363658
> 
> 赞同：0
> 
> 时间：2012-04-28T12:53:27.510
> 
> 标签：java, synchronization

如果同步方法抛出异常，在抛出之前在其中进行的成员写入对其他线程是否可见？例如

```
class Foo
{
    private int x;

    public synchronized void foo()
    {
        x++;
        // some other code using x that throws RTE for a specific thread
    }
} 
```

如果 Foo 的对象在线程 t1 和 t2 之间共享，并且 t1 抛出异常，在这种情况下，x 的最新值是否会刷新到主内存，以便 t2 在为该对象进入 foo 时对其可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:56:41.367

是的，更改仍然是可见的——你仍然在退出同步块，在进程中释放监视器，并且内存模型并不关心它是如何发生的——只是它*确实*发生了。[在JLS 第 17.4.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.4)中，它仍然是“监视器上的解锁操作” ，因此它与同一监视器上的下一个操作同步。

# javascript - 在 window.load 事件上使用 .live() 绑定循环插件

> ID：10363659
> 
> 赞同：0
> 
> 时间：2012-04-28T12:53:38.530
> 
> 标签：javascript, jquery

```
$("#breadcycle").live("window.onload", function () {
        $(this).cycle({
            fx: 'scrollUp',
            easing: 'easeOutBounce',
            speed: 1000,
            timeout: 2000
        });
    }); 
```

这段代码有什么问题。我正在使用`window.load`事件来使用 .live() 初始化循环插件。我用document.ready试过这个，但同样的结果不起作用。谁能告诉我为什么？

# android - 如何在android phonegap中将图像上传到服务器

> ID：10363661
> 
> 赞同：0
> 
> 时间：2012-04-28T12:53:56.963
> 
> 标签：android, cordova, file-transfer

我曾尝试在 phonegap api 中使用 FileTransfer.upload 上传图像。但我收到错误消息。错误是“连接错误”，错误代码是 3。

```
Here is my code.
<!DOCTYPE html>
<html>
<head>
<title>Video Uploader</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="master.css" type="text/css" />
<script type="text/javascript" charset="utf-8"src="phonegap-1.1.0.js"></script>
<script src="Scripts/jQuery-1.6.1.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script src="Scripts/jquery-1.4.1-vsdoc.js" type="text/javascript"></script>

<script type="text/javascript" charset="utf-8">
 function getphoto(){
   navigator.camera.getPicture(uploadPhoto,function(message) { 
   alert('get picture failed');
   },{   quality:10,destinationType:navigator.camera.DestinationType.FILE_URI,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY }); 
   }

     function uploadPhoto(imageURI) {   

        document.getElementById("myimg").src=imageURI;

        var options = new FileUploadOptions(); 
        options.chunkedMode  = false;
        options.fileKey="recFile"; 
        var imagefilename = imageURI; 
        options.fileName=imagefilename; 
        options.mimeType="image/jpeg"; 

        var ft = new FileTransfer(); 
        alert(imagefilename);

        ft.upload(imageURI, "http://xxxx.asmx", win, fail, options,true); 
    } 
     function win(r) { 

        alert("Response = " + r.response); 
        alert("Sent = " + r.bytesSent); 
    } 
    function fail(error) { 
     switch (error.code) { 
                case FileTransferError.FILE_NOT_FOUND_ERR: 
                    alert("Photo file not found"); 
                    break; 
                case FileTransferError.INVALID_URL_ERR: 
                    alert("Bad Photo URL"); 
                    break; 
                case FileTransferError.CONNECTION_ERR: 
                    alert("Connection error"); 
                    break; 
            } 

        alert("An error has occurred: Code = " + error.code); 
    } 
   </script>
  </head>
   <body >
   <button onclick="getphoto();">get a Photo</button>
   <button onclick="getphoto();">Upload a Photo</button>
   <img src="" id="myimg" style="border:1px solid #0f0;height:200px;width:200px;" />

   </body>
  </html> 
```

请看到并告诉我解决方案。phonegap api中upload.php的概念是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:15:55.297

您是否尝试上传到另一台服务器？如果上传成功，则问题可能出在您的服务器设置中。我遇到了这个麻烦，开始查看我的 nginx/passenger conf。

**编辑**：

我通过增加nginx 上的[client_max_body_size](http://wiki.nginx.org/HttpCoreModule#client_max_body_size)设置解决了这个问题（默认为 1MB）。

此外，您在“ft.upload”（“true”）上的最后一个参数似乎用于 https 请求，因此在这种情况下您应该省略它。

# python - Python MySQL插入列表

> ID：10363665
> 
> 赞同：1
> 
> 时间：2012-04-28T12:54:54.747
> 
> 标签：python, python-2.7

我正在尝试使用 Python 将数据插入到带有列表的 MySQL 中。
该列表包含字符串和整数。
我无法使用 %s 进行字符串替换，也 % 不起作用。

```
def insert(self,data):
    db =  MySQLdb.connect(db=self.database,host=self.host,port=self.port,user=self.user,passwd=self.password)
    c=db.cursor()
    var_string = ', '.join('?' * len(data))
    query = 'INSERT INTO wmr200 (time, temp_in, temp_out, dewpoint, hum_in, hum_out, windspeed, wind_direction, windchill, rain_1h, rain_24h, rain_total, rel_pressure, abs_pressure, tendency, forecast) VALUES (now(), %s);' % var_string
    c.execute(query, data) 
```

错误是：

文件“/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py”，第 159 行，在执行
查询 = 查询 % db.literal(args) 类型错误
：字符串格式化期间并非所有参数都转换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:58:48.367

产生异常的表达式：

```
query % db.literal(args) 
```

要求每个. `query`_`%s``db.literal(args)`

然而`query`，您的函数生成的值恰好包含零格式字符串。

# javascript - jQuery 弹跳效果点击没有 jQuery UI

> ID：10363671
> 
> 赞同：9
> 
> 时间：2012-04-28T12:55:24.827
> 
> 标签：javascript, jquery, html, animation, bounce

我找不到仅使用 jQuery 动画来制作 div 弹跳的动画解决方案。类似的东西不起作用：

```
$("#bounce").click(function() {
    $(this).effect("bounce", {
        times: 3
    }, 300);
});.​ 
```

我宁愿不使用 jQuery UI 或任何外部插件，例如缓动插件。在我的情况下，摆动效果同样好，所以两者都可以。

这是一个[例子](http://jsfiddle.net/jackdent/RaG9x/2/)，任何帮助将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-28T13:14:57.913

`animate`您可以简单地将元素上的一些调用链接在一起，如下所示：

```
$("#bounce").click(function() {
    doBounce($(this), 3, '10px', 300);   
});

function doBounce(element, times, distance, speed) {
    for(var i = 0; i < times; i++) {
        element.animate({marginTop: '-='+distance}, speed)
            .animate({marginTop: '+='+distance}, speed);
    }        
} 
```

工作示例：http: [//jsfiddle.net/Willyham/AY5aL/](http://jsfiddle.net/Willyham/AY5aL/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-02T11:16:11.793

将此功能用于阻尼反弹。如果使用代码而不做任何更改，请确保为弹跳元素提供唯一的类。

```
var getAttention = function(elementClass,initialDistance, times, damping) {
  for(var i=1; i<=times; i++){
      var an = Math.pow(-1,i)*initialDistance/(i*damping);
      $('.'+elementClass).animate({'top':an},100);
  }
  $('.'+elementClass).animate({'top':0},100);
}

$( "#bounce").click(function() {
	getAttention("bounce", 50, 10, 1.2);
});
```

```
#bounce {
    height:50px;
    width:50px;
    background:#f00;
    margin-top:50px;
    position:relative;
    border-radius: 50px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="bounce" class="bounce"></div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-31T14:22:30.090

我使用这个简单的插件[jQuery-Shake](https://github.com/ninty9notout/jquery-shake)来摇晃**或反弹**没有 jQuery-UI 的元素。

```
$('#elementToBounce').shake({direction: up, distance:10, speed: 75, times: 3}) 
```

小提琴：[https ://jsfiddle.net/ek7swb6y/3/](https://jsfiddle.net/ek7swb6y/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T16:55:32.323

对于垂直反弹，您可以尝试以下操作：

```
function bounce(element, distance, speed){
 var bounce_margin_top = $(element).css("margin-top")
 $(element).css("margin-top", "-="+distance)

 $(element).show().fadeIn(200).animate({
    "margin-top": bounce_margin_top
 }, {
     duration: speed,
     easing:   "easeOutBounce"
 })
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-01T09:53:45.780

我通常使用 jQuery 动画。对于您的具体问题，它可能如下所示：

的HTML：

```
<div id="bounce"></div> 
```

CSS：

```
#bounce {
height:50px;
width:50px;
background:#333;
margin-top:50px;
position:relative;
} 
```

最后，jQuery：

```
$( "#bounce" ).click(function() {
for (var i=1; i<=3; i++) {
$(this).animate({top: 30},"slow");
$(this).animate({top: 0},"slow");
     }
}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/5xz29fet/1/](http://jsfiddle.net/5xz29fet/1/)

# scala - SBT 默认未解决的依赖项

> ID：10363673
> 
> 赞同：1
> 
> 时间：2012-04-28T12:56:01.050
> 
> 标签：scala, sbt

我有一个简单构建工具 (SBT) 构建并且它给出了这个错误，任何人都可以给我一个线索为什么？

```
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: default#default-44479a_2.9.2;0.1-SNAPSHOT: not found
[warn]  :::::::::::::::::::::::::::::::::::::::::::::: 
```

# html - 更改文本输入标签中的文本大小？

> ID：10363674
> 
> 赞同：31
> 
> 时间：2012-04-28T12:56:18.823
> 
> 标签：html, css

我有一个大的文本输入框，但我无法更改字体大小？

`<input type="text">`

我想更改文本字段内的字体大小，但我似乎无法使用 CSS 来做到这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-28T12:59:32.433

`<input style="font-size:25px;" type="text"/>`

上面的代码将字体大小更改为 25 像素。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-28T13:01:27.087

在您的 CSS 样式表中，尝试添加：

```
input[type="text"] {
    font-size:25px;
} 
```

请参阅此 jsFiddle[示例](http://jsfiddle.net/jackdent/jtLRM/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-26T01:02:01.417

这也有效。

```
<input style="width:300px; height:55px; font-size:50px;" /> 
```

不过 CSS 样式表看起来更好，并且可以轻松地在多个页面上使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-19T15:54:06.583

我会说在您的 CSS 样式表文件中设置字体大小更改。

我很确定您希望所有表单字段的所有文本都具有相同的大小。在您的 HTML 中添加内联样式将在末尾添加许多行...此外，您还需要将其添加到其他类型的表单字段中，例如`<select>`.

HTML：

```
<div id="cForm">
    <form method="post">
        <input type="text" name="name" placeholder="Name" data-required="true">
        <option value="" selected="selected" >Choose Category...</option>
    </form>
</div> 
```

CSS：

```
input, select {
    font-size: 18px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-30T11:14:34.977

更改输入控件字体大小的 Javascript 是：

```
input.style.fontSize = "16px"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-27T13:43:04.803

`<input />`要更改HTML中标签的字体大小，请使用以下命令：

```
<input style="font-size:20px" type="text" value="" /> 
```

它将创建一个文本输入框，文本框内的文本将为 20 像素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-30T22:36:52.170

将您的代码更改为

```
<input class="my-style" type="text" /> 
```

CSS：

```
.my-style {
  font-size:25px;
} 
```

# objective-c - 调整 NSBox 及其内容的大小以适应窗口

> ID：10363676
> 
> 赞同：0
> 
> 时间：2012-04-28T12:56:33.440
> 
> 标签：objective-c, cocoa, webview, nsbox

听起来很容易，但我似乎无法弄清楚这一点或找到任何帮助。

这是我目前拥有的层次结构：

```
Window
    Custom View (I want this to resize, with its children, to fit Window)
        Custom View (Contains buttons)
        NSBox (gets content set to the WebView below)
WebView 
```

在 applicationLoad 上，我将“NSBox”上的 setContentView 调用到 WebView。

所以我最终得到了一个 NSBox，里面有一个 WebView，在一个自定义视图中。

如果我有一个链接到按钮的 IBAction，我需要做什么才能让外部自定义视图调整大小以适应窗口？希望这也会调整内容的大小，包括 NSBox 和 WebView。

这可能吗？

非常感谢任何帮助。

提前谢谢大家！

编辑： ATM 我有以下代码，它使一个 WebView 变大并使另一个隐藏，但它在窗口中将视图定位得太高？

```
oldView.hidden = YES;
[newView setFrameSize:_window.frame.size]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:00:45.830

除非您的旧视图位于窗口 contentView 坐标中的 {0,0}，否则当您将其大小更改为窗口大小时，它会太高。尝试这个：

[newView setFrame:[_window.contentView 框架]];

# sql - 派生属性应该作为列复制还是每次都计算？

> ID：10363678
> 
> 赞同：2
> 
> 时间：2012-04-28T12:57:02.460
> 
> 标签：sql, database-design

我猜这是空间与时间的问题。

考虑一个在线测验应用程序。在浏览测验中，对于每个测验，我希望显示它有多少问题。

*   如果测验有 10 个问题，我可以将其显示为“10 个问题”或“中等持续时间测验”。
*   如果测验有 5 个问题，我可以将其显示为“5 个问题”或“短期测验”。

在`Quiz`表中，我没有用于存储问题数量的列。要找到这么多问题，我可以

```
SELECT COUNT(question_id) 
FROM Quiz 
NATURAL JOIN Quiz_data 
WHERE quiz_id = '$quiz_id' 
```

请注意，这是一个和`Quiz_data`的交叉表（即它存储两个表的 PK）。`Quiz``Question_bank`

请注意，如果我将 *number_of_question* 存储在测验中，则可能会从测验中添加/减去问题。因此，除了`delete`and之外`insert`，还需`update`要这样做。

问题：我应该每次计算，还是将值存储在`Quiz`表中？帖子标题在一般意义上说同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:49:27.193

你得知道

(1) 您的数据多久更改一次，以及
(2) 确定该数字需要付出多少努力。

作为一般建议，我会看看：

*   如果数据很少更改->您应该计算然后存储该值。

*   如果确定该数字的成本非常高 -> 尝试计算一次，存储并重复使用。

*   另一方面，如果准确计数至关重要 -> 根据需要确定。

这不是一个明确的是或否决定——它实际上取决于您的数据、您的要求以及计算这样一个数字/计数的成本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:17:36.443

在正常情况下，您应该在运行时计算行数。在运行时计数将始终为您提供正确的行数。但在某些情况下，在运行时计数需要太长时间。（不过，在您的情况下，它看起来不应该花费太长时间。）

在运行时计数需要太长时间的情况下，将计数存储在某处是有意义的。就个人而言，我什至不喜欢这样做来提高性能，但如果我可以对 dbms 进行编程以保证计数始终正确，我不会太介意。

如果无法对 dbms 进行编程以保证完整性，并且计数很关键，我通常会运行一个 cron 作业来更新所有计数或查找与行不匹配的计数。

# - C++ 概念

> ID：10363681
> 
> 赞同：0
> 
> 时间：2012-04-28T12:57:19.537
> 
> 标签：

C++ 中的 Concepts（以前称为“Concepts Lite”）是一种提议的语言扩展，旨在改进对泛型编程的支持。提到这个提议的扩展或提升“概念检查”库的问题应该使用这个标签；您可能还希望根据您的问题使用一个或多个标签 [c++]、[boost]、[template-meta-programming] 和 [metaprogramming]。

# airplay - 将相机输出流式传输到屏幕上：IwGx vs s3e

> ID：10363682
> 
> 赞同：2
> 
> 时间：2012-04-28T12:57:20.757
> 
> 标签：airplay, marmalade

我正在尝试将手机摄像头的输出流式传输到屏幕上。如果使用 IwGx 将此输出绘制到四边形上，它会比写入 s3eSurfacePtr 更快吗？

我听说有些人通过使用 OpenGL 将他们的 2d 图像渲染到四边形来创建游戏，而且速度更快（因为 GPU 加速？）。有谁知道这是不是真的？这似乎与我上面的问题相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:24:59.487

是的，我肯定会走 IwGx 路线。s3eSurface 在现代硬件（尤其是 iOS 平台）上可能非常慢。

首先创建一个 CIwTexture 实例，禁用 mip 贴图并使其可修改。

```
CIwTexture* lpTexture = new CIwTexture;
lpTexture->SetModifiable(true);
lpTexture->SetMipMapping(false); 
```

初始化回调方法

```
s3eCameraRegister(S3E_CAMERA_UPDATE_STREAMING, (s3eCallback) MyFrameDataCallback, NULL); 
```

启动相机运行，并要求它在接收到帧时转换为 RGB565。您应该根据您的使用情况改变请求的大小和质量提示。这有点反复试验，因为它取决于硬件支持的内容。

```
s3eCameraStart(S3E_CAMERA_STREAMING_SIZE_HINT_LARGEST, S3E_CAMERA_PIXEL_TYPE_RGB565_CONVERTED, S3E_CAMERA_STREAMING_QUALITY_HINT_HIGH); 
```

然后在相机帧回调中更新纹理

```
lpTexture->CopyFromBuffer(apFrame->m_Width, apFrame->m_Height, CIwImage::RGB_565, apFrame->m_Pitch, (uint8*) apFrame->m_Data, 0);
lpTexture->Upload(); 
```

apFrame 是指向作为第一个参数传递给回调函数的 s3eCameraFrameData 结构的指针。您需要在回调中进行复制，因为一旦回调完成，数据将不复存在，但您可能希望推迟上传，以便在应用程序的每个循环中只执行一次。

现在你需要做的就是创建一个 CIwMaterial，让它使用上面的纹理并在屏幕上渲染一个带纹理的四边形。我将把代码留给你，因为它非常简单！

# rtc - IBM RTC 中的源代码管理操作失败权限被拒绝

> ID：10363685
> 
> 赞同：-2
> 
> 时间：2012-04-28T12:57:33.557
> 
> 标签：rtc, jazz

您可以做些什么来理解为什么在 RTC 中看到“权限被拒绝”，以及要采取什么行动来为给定的“被拒绝”操作授予特权？

例子：

![RTC 中的权限被拒绝](../Images/9d34c60ed9203c3e763883e62279ff4c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:59:25.717

每次您在 RTC 上被拒绝的权限时，您需要检查：

*   您在项目区域中与您的个人资料相关联的角色
*   您在“团队配置/权限”中定义的权限：

权限矩阵在 Project Area Administration 页面中如下所示：

![矩阵](../Images/3a5ef36810e5576960f936c8ca71225f.png)

例如，如果您在尝试删除工作项时出现“权限被拒绝”，则您需要有一个角色已明确授予此操作（[请参阅 doc](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.workitem.doc/topics/t_deleting_work_items.html&re=1&scope=null)）：

![删除wi](../Images/979afd0bb68a500104afee035ccdd444.png)

如果您无权访问管理部分，请至少检查“**团队顾问**”视图，以便将其传达给您的 RTC 管理员：

![团队顾问](../Images/c56ea246b34343cfea10b3e5f66a7935.png)

# macos - Xcode 4、dylib 和 install_name_tool

> ID：10363687
> 
> 赞同：3
> 
> 时间：2012-04-28T12:57:45.010
> 
> 标签：macos, xcode4, dylib, otool, install-name-tool

我正在尝试让 dylib 在我的 OSX 项目中工作。

我一直在阅读一些示例，特别是这个： [Xcode 4 added dylib](https://stackoverflow.com/questions/6801709/xcode-4-adding-dylib)

但我仍然无法让它工作。

以下是我执行的步骤：

1.  将 testing.1.dylib 复制到我的 Xcode 项目文件夹中。
2.  冉`sudo install_name_tool -id @executable_path/../Frameworks/testing.1.dylib testing.1.dylib`
3.  冉：`otool -L testing.1.dylib`并收到以下信息：

    > testing.1.dylib：
    > @executable_path/../Frameworks/testing.1.dylib（兼容版本 2.0.0，当前版本 2.0.0）
    > /usr/lib/libSystem.B.dylib（兼容版本 1.0.0，当前版本 159.1.0)

4.  将`testing.1.dylib`作为框架添加到项目中。（使用带有库选项的链接包）。

5.  此时，当我编译 testing1.dylib 时并没有像我预期的那样被复制到 .App/Framework 中，所以我手动创建了 Framework 路径并将 testing.1.dylib 复制到它： a) mkdir -p testing.app /Contents/Frameworks b) cp testing.1.dylib testing.app/Contents/Frameworks
6.  在 Xcode 中，我`Runtime Search Paths`将 Target 和 Project 都更新为：@executable_path/../Frameworks。

现在我将 testing.app 复制到一个单独的新安装的机器上并尝试运行它。我收到以下错误：

dyld：库未加载：/user/local/lib/testing1.dylib 引用自：/Users/me/testing.app/MacOS/./testing 原因：找不到图像

我错过了什么？

注意：运行 install_name_tool 时，我需要使用 sudo 否则会出现以下错误：

install_name_tool：无法打开输入文件：testing.1.dylib 用于写入（权限被拒绝） install_name_tool：无法在文件中偏移：0：testing.1.dylib 用于写入（错误的文件描述符） install_name_tool：不能在文件中写入新标头：testing.1.dylib（错误文件描述符） install_name_tool：无法关闭写入输入文件：testing.1.dylib（错误文件描述符）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:04:43.700

You shouldn't need to copy the library into the project.

You shouldn't need to use `sudo` to change the install name of a file you own. Do you not own the library file? Perhaps you did a "sudo make install" on some third-party project? Just don't install it and link to the one in the build directory. If you're building this library, then you should set its install name when it's built using command-line options to the link command.

It is expected that adding a library to a target causes it to be linked but doesn't automatically cause it to be copied. You can create a Copy Files build phase and add the library to that, too.

You don't need to set Runpath Search Paths unless you used an `@rpath`-based install name.

I suspect that Xcode is actually linking against the library that you copied *from* in step 1, rather than the copy you made and whose install name you then modified. What does the actual link command from the build transcript say? From where did you copy the library in step 1? If it was from /usr/lib or /usr/local/lib, then Xcode is probably linking against that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T22:56:53.420

在您引用的“XCode 4 添加 dylib”问题中，答案似乎是设置“复制文件”构建阶段。这非常简单，因为您的 dylib 中已经有了 write 可执行路径。现在只需转到您的目标设置 > 构建阶段 > 添加构建阶段 > 复制文件。然后将 dylib 从 Navigator 侧边栏拖到文件中，并将目标设置为 Frameworks。

这应该将 dylib 捆绑到您的应用程序包内容中，并且 dylib 中的可执行路径应该指向正确的内容。

# c# - 如何获取动态创建的复选框的选中项并将该值写入 WPF 中的文件？

> ID：10363690
> 
> 赞同：0
> 
> 时间：2012-04-28T12:58:18.133
> 
> 标签：c#, .net, wpf, checkbox

我在 C# 中编写了一个 WPF 应用程序来在运行时创建复选框，因为必须从文件中获取内容。用户从复选框中选择项目。单击按钮后，所有选中的项目都必须写入文本文件。怎么做到呢？以下代码是动态创建复选框的正确方法吗？

```
CheckBox chb;
private void radioButton2_Checked(object sender, RoutedEventArgs e)
{
    //Create file
    string fp5 = @"D:\List.txt";       

    FileStream fs = new FileStream(fp5, FileMode.Open, FileAccess.Read);
    StreamReader reader = new StreamReader(fs);

    float cby = 135.0F;
    int ControlIndex=1;

    while (!reader.EndOfStream)
    {
        string line = reader.ReadLine();
        chb = new CheckBox();
        chb.Name = "Chk" + ControlIndex;
        Canvas.SetLeft(chb, 28);
        Canvas.SetTop(chb, cby);
        chb.Content = line;
        chb.IsChecked = false;
        chb.Foreground = new SolidColorBrush(Colors.Blue);
        myCanvas.Children.Add(chb);
        cby = cby + 25.0F;
        ControlIndex++;
    }
    fs.Close();
}

private void button5_Click(object sender, RoutedEventArgs e)
{
    //Create files
    string fp6 = @"D:\List2.txt";

    if (!File.Exists(fp6))
    File.Create(fp6).Close();

    /*I want to write the checked items of the checkbox chb to the text file List2.txt.
    I wanted to know how to do this */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:04:31.930

你可以这样做

```
private void button5_Click(object sender, RoutedEventArgs e)
{
 string str="";
 foreach (UIElement child in canvas.Children)
 {
   if(child  is CheckBox)
     if(((CheckBox)child).IsChecked)
       str+=((CheckBox)child).Content;

 }
 string fp6 = @"D:\List2.txt";
 File.WriteAllText(fp6,str);

} 
```

# bash - 如何在文件夹中分别压缩每个文件，然后如果成功删除原始文件

> ID：10363696
> 
> 赞同：3
> 
> 时间：2012-04-28T12:58:56.193
> 
> 标签：bash, gzip

我使用以下命令分别压缩文件夹中的每个文件：

```
for file in *; do gzip "$file"; done 
```

但它保留了原始文件。我想知道是否有办法在成功压缩文件后自动删除文件。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T13:13:09.280

我不明白你遇到的问题。根据[gzip 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?gzip)：

> 只要有可能，每个文件都会被一个扩展名为 .gz 的文件替换，同时保持相同的所有权模式、访问和修改时间。

我唯一的猜测是你有权限问题。确保您以您正在 gzip 压缩的文件的所有者身份登录。但是，在我机器上的 gzip 版本中，`Operation not permitted`当我尝试 gzip 一个我不拥有的文件时，我会收到一个明显的警告。手术仍然成功，但很清楚发生了什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T13:53:55.243

为可能的原因向@Tim Pote +1。

但是，在处理文件时要注意`for`循环：如果文件名包含嵌入的空格，它将被视为两个单独的文件名。你可以通过`find`这样使用来避免这种情况：

```
find . -maxdepth 1 -type f ! -name '*.gz' -exec gzip "{}" \; 
```

这会在当前目录中找到所有尚未压缩的常规文件，然后单独调用`gzip`每个文件。花括号 ( `{}`) 替换为文件名，引号确保正确处理空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T14:27:33.433

如果您有几千个文件，为了防止出现“参数列表太长”错误，请使用

```
find . -maxdepth 1 -type f ! -name '*.gz' | while read file; do
    gzip "$file"
done 
```

# android - 如何在自定义适配器中创建图库？

> ID：10363698
> 
> 赞同：1
> 
> 时间：2012-04-28T12:59:06.547
> 
> 标签：android, api, list, android-gallery, custom-adapter

嗨，我对 Android 开发相当陌生，虽然在我围绕 UI 设计以及如何最好地实现它之前已经涉足 Java。

我想使用 API 自定义适配器并在扩展顶级节点（在我的情况下会显示 Dress Sizes）时，它会显示 n 个水平滚动画廊，希望每个画廊上都有一些覆盖透明文本，显示设计师姓名，价格，颜色等等等等。

这种观点是否可能，非常感谢一些关于我应该如何前进的指导，非常感谢编码示例的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:45:14.917

在布局方面，听起来你想要一个衣服尺寸的微调器。在下面听起来你想要一个画廊（或者如果你发现更合适的话，也许更好的 gridview 相同的概念适用）更新一个已经制作/改变了衣服尺寸。

我建议您首先编写一个适配器来显示[礼服](http://developer.android.com/resources/tutorials/views/hello-gallery.html)画廊（请注意，在此示例中，它们返回的视图是 ImageView 但这很容易成为背景中的礼服和带有设计师姓名、价格、颜色的文本的 reltaivelayout等显示在顶部）

然后我会考虑覆盖画廊适配器的[可过滤](https://stackoverflow.com/questions/1737009/how-to-make-a-nice-looking-listview-filter-on-android)方法，以便您可以过滤掉用户选择连衣裙时不匹配的连衣裙尺寸。

然后你会为礼服尺寸编写微调器适配器。 [这](http://www.dcpagesapps.com/developer-resources/android/21-android-tutorial-spinners)是一个例子。从那里您可以设置 onListItemSelected 侦听器来说出活动。然后，该活动可以调用您的画廊适配器上的过滤器方法，以在用户更改礼服尺寸时对其​​进行更新。

其他提示/提示。查看图库适配器的[ViewHolder 模式](http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently/)。由于您正在处理图像，因此您必须注意速度方面的考虑，否则您的画廊将非常慢。如果不需要，请确保不要重新膨胀视图。虽然 ViewHolder 模式需要方法的 getTag/setTag ，但您也可以在视图持有者中存储其他详细信息。查看延迟加载画廊礼服图像。[这里](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)有很多列表视图中延迟加载图像的示例，但同样的想法也适用。

# java - biojava 导入 o rg.biojava 不工作

> ID：10363702
> 
> 赞同：-1
> 
> 时间：2012-04-28T12:59:57.020
> 
> 标签：java, biojava

我想在这里使用这个例子：http: [//www.biojava.org/wiki/BioJava%3aCookbook%3aSeqIO%3aReadGESBiojavax](http://www.biojava.org/wiki/BioJava%3aCookbook%3aSeqIO%3aReadGESBiojavax)

但是它无法找到我使用的 org.biojava 导入。我尝试下载和编辑 POM.xml 并将其添加到项目中，但没有任何效果。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:45:29.333

您正在查看的示例是遗留 biojava 版本 1.8.X 的一部分。尝试查看 3.X 系列中的示例... [http://www.biojava.org/wiki/BioJava:CookBook](http://www.biojava.org/wiki/BioJava:CookBook)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:08:32.857

你在使用 Maven 吗？如果是这种情况，您应该熟悉将其包含在您*自己的* `pom.xml`（不是下载的）中：

```
<dependencies>
  ...
  <dependency>
    <groupId>org.biojava</groupId>
    <artifactId>biojava3-core</artifactId>
    <version>3.0.3</version>
    </dependency>
    <!-- other biojava jars as needed -->
</dependencies>
<repositories>
  <repository>
    <id>biojava-maven-repo</id>
    <name>BioJava repository</name>
    <url>http://www.biojava.org/download/maven/</url>           
  </repository>
</repositories> 
```

如果您不使用 Maven（我和 biojava-people 都不推荐），您可以在此处下载所需的 jar 文件：http: [//www.biojava.org/download/maven/org/biojava/](http://www.biojava.org/download/maven/org/biojava/) 但请注意：您有自己下载并添加 biojava 使用的所有传递依赖项（.jar 文件）。在这种情况下，我强烈建议您尝试一下 Maven！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T13:09:00.717

您需要下载 biojava.jar 并将其包含在您的类路径中（您可以从[这里](http://biojava.org/wiki/BioJava%3aDownload_1.7.1)下载）——注意 .jar 文件可能有一些其他需要的 .jars

如果您有 pom.xml，您可以将项目设置为与 maven 兼容，然后运行 ​​maven——它将下载所有必需的 .jar 并正确设置类路径（如果 pom 文件配置正确）

# scala - 是否可以在 Scala 中创建“受限范围”？

> ID：10363705
> 
> 赞同：2
> 
> 时间：2012-04-28T13:00:40.617
> 
> 标签：scala, dsl

我将首先解释*限制范围*的含义：

```
restrictedScope (allowedNamespace) {
   /* THE CLIENT CODE GOES HERE */
   /* the namespace in this closure is limited only to the idioms
      I allow, both in terms of reserved words and standard functions */

   val result = allowedNamespace.run(); // works, since run() ...
   // ... is a function of allowedNamespace
   val list = new List(); // does not work, since List is not in scope

   /* CLIENT CODE SAMPLE (prepare, release and wait are defined in allowedNamespace) */
   prepare( "service 1" )
   wait( 1000 )
   release( "service 1" )
   ...

} 
```

在执行基于常规 scala 代码的严格命令式 DSL 时，我想安全地运行客户端代码。为了安全地做到这一点，我可能想限制**for**和**if**等结构的使用（仅在可能的情况下），删除列表的创建并只允许执行/引用我在允许的命名空间中定义的习语。

是否有工具可以做到这一点，而不覆盖所有标准习语？

如果没有，是否有一种自动方式（可能通过反射）来覆盖导入到命名空间的所有标准习语？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:17:53.837

这*可能*与 Scala 2.10 中的实验宏有关，它允许您`restrictedScope`在编译之前检查内部代码。

但是，我认为您将很难为允许和禁止的方法过滤树。所以我不确定这是否可行。

或者，您可以使用实验性的*scala-virtualized*分支，它至少可以让您简单地重载`for`和`if`声明自己喜欢的语句。（[参考](https://github.com/tiarkrompf/scala-virtualized/wiki/Virtualized-Scala-Reference)）

然而，这也需要发布您自己的编译器，因此它实际上取决于您的问题范围和目标用户群。（[有关 Scala DSL 的更多信息。](http://www.stanford.edu/class/cs442/)）

# firefox - FireFox SDK keydown / keyup 事件

> ID：10363708
> 
> 赞同：2
> 
> 时间：2012-04-28T13:01:02.903
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

是否可以在 FireFox 插件中跟踪 keydown/keyup 事件？我想实现类似于以下场景的东西：

*   按住修改键后出现面板
*   在按住这些修改键的同时，按下其他键将导致面板执行某些操作
*   当修改键释放时，面板消失

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T19:49:14.100

为此，您需要在每个浏览器窗口中注册事件侦听器。高级 SDK API 不能让您直接访问浏览器窗口，但是您必须为此使用低级模块，特别是（当前未记录的）`sdk/keyboard/observer`模块。它允许您在所有浏览器窗口中收听关键事件，所以这样的事情应该可以工作：

```
// Register key event handlers in each browser window
var {observer} = require("sdk/keyboard/observer");

observer.on("keydown", function(event) {
  // Ignore events that have been handled elsewhere (e.g. by the web page)
  if (event.defaultPrevented)
    return;

  if (...)
    panel.show();
});
observer.on("keyup", function(event) {
  // Ignore events that have been handled elsewhere (e.g. by the web page)
  if (event.defaultPrevented)
    return;

  if (...)
    panel.hide();
}); 
```

笔记：

*   `sdk/keyboard/observer`模块完全没有文档，它可能随时更改或完全消失。
*   最初这里提出的解决方案是`WindowTracker`从`sdk/window-utils`现在已弃用的模块中使用的。如果您真的想自己查看浏览器窗口，您现在可以使用（也未记录）`sdk/windows/observer`允许监听`open`和`close`事件的模块。`isBrowser()`现在可以通过[`sdk/window/utils`模块](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/window_utils#isBrowser%28window%29)来区分浏览器窗口的功能。您还需要使用[`windows()`函数](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/window_utils#windows%28%29)来考虑已经打开的窗口，Windows 观察者不会自动执行此操作。

# django - 在 Django 中将图像字段添加到 XML 站点地图

> ID：10363710
> 
> 赞同：5
> 
> 时间：2012-04-28T13:01:18.080
> 
> 标签：django, sitemap, django-sitemaps

Google 可以识别`<image>`XML 站点地图的标记 ( [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=178636](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=178636) )，我想在我的站点地图中包含一个图像属性。

所以，需要这样的东西来获取cover_image，然后加载到xml文件中：

```
for article in articles:
        print article.cover_image 
```

我也需要为标签`article.title`加载。`<image:title>`

我已经在 Google 上搜索并搜索了 Stack Overflow 的示例，但令人惊讶的是找不到任何示例，因此感谢您的帮助。

到目前为止我的文件：

```
## sitemaps.py ##
from django.contrib.sitemaps import Sitemap
from myproject.article.models import Article

class ArticleSitemap(Sitemap):
    priority = 1.0

    def items(self):
        return  Article.objects.order_by('-id').order_by('-pub_date')

    def lastmod(self, obj):
        return obj.pub_date

## urls.py ##
from myproject.sitemaps import ArticleSitemap

sitemaps = {
    "article": ArticleSitemap
}
urlpatterns += patterns ('',
    (r'^sitemap.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': sitemaps}) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T11:33:28.330

它可以通过

1.  在继承的类中重新定义 get_urls 方法（添加图像信息）
2.  将默认模板更改为渲染图像信息所需的模板

这是代码：

1.  在您的类中添加这些方法 - 这些方法与 django 的站点地图框架中定义的几乎相同，但在准备需要在模板中呈现的数据的方式上有所不同

    ```
    class MySItemapClass(Sitemap):
      def item():
         .........        

      def __get(self, name, obj, default=None):
        try:
          attr = getattr(self, name)
        except AttributeError:
          return default
        if callable(attr):
          return attr(obj)
        return attr

      def get_urls(self, page=1, site=None, protocol=None):
        # Determine protocol
        if self.protocol is not None:
          protocol = self.protocol
        if protocol is None:
          protocol = 'http'

        # Determine domain
        if site is None:
          if Site._meta.installed:
              try:
                  site = Site.objects.get_current()
              except Site.DoesNotExist:
                  pass
          if site is None:
              raise ImproperlyConfigured("To use sitemaps, either enable the sites framework or pass a Site/RequestSite object in your view.")
        domain = site.domain

        urls = []
        for item in self.paginator.page(page).object_list:
          loc = "%s://%s%s" % (protocol, domain, self.__get('location', item))
          priority = self.__get('priority', item, None)
          url_info = {
              'item':       item,
              'location':   loc,
              'lastmod':    self.__get('lastmod', item, None),
              'changefreq': self.__get('changefreq', item, None),
              'priority':   str(priority is not None and priority or ''),
              'images'   :   get_image(protocol, domain,item), # changed here
          }
          urls.append(url_info)
        return urls 
    ```

`get_image method`随意定义

2.  定义您的自定义模板。我的看起来像这样 - 注意定义命名空间的变化（“urlset”）

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
      xmlns:image="http://www.google.com/schemas/sitemap-image/1.1">
    {% spaceless %}
    {% for url in urlset %}
      <url>
        <loc>{{ url.location }}</loc>
        {% if url.images %}
            {% for image in url.images %}
                <image:image>
                    <image:loc>{{image}}</image:loc>
                </image:image>
            {% endfor %}
        {% endif %}
        {% if url.lastmod %}<lastmod>{{ url.lastmod|date:"Y-m-d" }}</lastmod>{% endif %}
        {% if url.changefreq %}<changefreq>{{ url.changefreq }}</changefreq>{% endif %}
        {% if url.priority %}<priority>{{ url.priority }}</priority>{% endif %}
       </url>
    {% endfor %}
    {% endspaceless %}
    </urlset> 
    ```

3.  覆盖以使用新模板而不是默认模板

    ```
    url(r'^sitemap-(?P<section>.+)\.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': sitemaps,'template_name': 'seo/sitemap.xml'}), 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:45:35.117

[您可以在渲染模板之前](https://github.com/django/django/blob/master/django/contrib/sitemaps/views.py#L52)添加一些图像并[在模板中](https://github.com/django/django/blob/master/django/contrib/sitemaps/templates/sitemap.xml)显示它们。我认为，最好为它做单独的应用程序（继承自`django.contrib.sitemaps`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T10:59:20.617

如果您使用自己的模板，那么它可以在`url.item`迭代 url 时访问您的模型实例，因此您可以在其上定义任何您想要的内容：[https ://docs.djangoproject.com/en/3.2/ref/contrib/sitemaps/ #id1](https://docs.djangoproject.com/en/3.2/ref/contrib/sitemaps/#id1)

在下面的示例中，站点地图包含两种不同的模型，一种定义`sitemap_image`，另一种没有。

#### 主要网址.py

```
from django.contrib.sitemaps import GenericSitemap, views

sitemaps = {
    'artists': GenericSitemap(
        {'queryset': Artist.objects.filter(display=True)}),
    'paintings': GenericSitemap(
        {'queryset': Painting.objects.filter(display=True).prefetch_related("images")},),
}

urlpatterns = [
    # your other urls...
    path("sitemap.xml", views.sitemap, {"sitemaps": sitemaps, "template_name": "image_sitemap.xml", }),
] 
```

#### 模板/image_sitemap.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:image="http://www.google.com/schemas/sitemap-image/1.1">
    {% spaceless %}
        {% for url in urlset %}
            <url>
                <loc>{{ url.location }}</loc>
                {% if url.item.sitemap_image %}
                    <image:image>
                        <image:loc>{{ request.scheme }}://{{ request.get_host }}{{ url.item.sitemap_image }}</image:loc>
                    </image:image>
                {% endif %}
                {% if url.lastmod %}<lastmod>{{ url.lastmod|date:"Y-m-d" }}</lastmod>{% endif %}
                {% if url.changefreq %}<changefreq>{{ url.changefreq }}</changefreq>{% endif %}
                {% if url.priority %}<priority>{{ url.priority }}</priority>{% endif %}
            </url>
        {% endfor %}
    {% endspaceless %}
</urlset> 
```

#### 模型.py

```
 class Painting(models.Model):
    # your fields

    @property
    def sitemap_image(self):
        return self.images.first().image.url if self.images.first() else None 
```

# android - geo:latitude,longitude?z=zoom in android 带我到我当前的位置

> ID：10363712
> 
> 赞同：1
> 
> 时间：2012-04-28T13:01:22.597
> 
> 标签：android, maps, location, coordinates

我想从我的应用程序中调用内置地图应用程序。我遇到了[这个链接](https://stackoverflow.com/questions/6205827/how-to-open-standard-google-map-application-from-my-application)。这个页面也给了我[这个链接](http://developer.android.com/guide/appendix/g-app-intents.html)，在那里我可以真正得到我想要的东西。我知道

```
geo:latitude,longitude?z=zoom 
```

仍处于开发模式。

我的问题是，当我使用它时，它会到达所需的位置，然后将我转移到我当前的位置。

这是我正在使用的代码

```
String uri = String.format("geo:%f,%f?z=18",(float)(latitude /1E6),(float)(longitude/1E6));
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
startActivity(intent); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:50:20.350

你可以试试这个......

```
Intent mapintent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("geo:0,0?q="+lat_string+long_string+"(Title_to_show)")); 
```

原始格式的位置`lat_string`和位置，即某些东西..`long_string``76.6464831` `35.494`

# jquery - 将 png 图标添加到 HTML

> ID：10363719
> 
> 赞同：1
> 
> 时间：2012-04-28T13:01:40.393
> 
> 标签：jquery, icons, fancybox

我想知道是否有人可以帮助我。

首先道歉，因为对于某些人来说这可能是一个非常基本的问题，但我是新手，所以请多多包涵。

我正在使用下面的脚本在 fancyBox 中创建一个图片库。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
  <title>Gallery</title>  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
    <script type="text/javascript" src="fancybox/lib/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.0.6"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>
    <link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.2" />
    <link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" />
    <link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.0.6" media="screen" />

  <script type="text/javascript">  

            $('.fancybox').fancybox({
                openEffect  :   'elastic',
                closeEffect :   'elastic',

                padding :   20,
                fitToView   :   true,

                prevEffect :    'none',
                nextEffect :    'none',

                closeBtn  : false,
                arrows : false,

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    buttons : {}
                },

                afterLoad : function() {
                    this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
                }
            });

</script> 
  <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-top: 5px;
    margin-right: 110px;
}
-->
  </style>  
</head>
<body style="font-family: Calibri; color:  #505050; margin-left: 240px; float:left;"/>
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div> 
  <form id="gallery" name="gallery" class="page" action="index.php" method="post" style="margin-left: -120px; margin-right: 50px; border-left: 100; caption-side: left;"> 

    <p>
      <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
                  ?>
      <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>"alt="<?php echo $description; ?>" /></a>
      <?php endfor; ?>  
    </p>
</form>  
</body>
</html> 
```

我现在想添加允许用户删除图像的功能。

使用来自“famfamfam.com”的“丝绸图标”，我找到了一个合适的图标，我想将其放置在每个图像的左上侧，但我不确定如何将图标添加到我的页面。

我试图在网上找到一个教程来告诉我如何做到这一点，但到目前为止还没有成功。

我只是想知道是否有人可以提供一些指导我如何将其添加到我的页面。

非常感谢和问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T13:10:08.737

就在这一行之前：

```
<a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>"alt="<?php echo $description; ?>" /></a> 
```

您可以添加如下内容：

```
<img src="path/to/image.png" class="removeImage" alt="Remove this image" /> 
```

然后用 jQuery 做这样的事情：

```
$('.removeImage').click(function(){
    $(this).next('a.fancybox').remove();
}); 
```

我还会对文档进行许多其他更改。例如，最好删除所有内联样式，并将它们组合成一个外部样式表。您的 javascript 也是如此。此外：

*   您尝试像这样自动关闭您的开始正文标签：`<body />`- 我们不这样做。
*   使用 时`font-family`，创建一个网络安全的字体列表总是一个好主意。查看更多信息：[http ://cssfontstack.com/](http://cssfontstack.com/)
*   HTML 中的`align`属性已弃用

我对您的文档进行了一些更改，以便于使用。这是 HTML/PHP：

```
<!doctype html>
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]-->
<head>  

<title>Gallery</title>  
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  

<!-- styles -->
<link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.2" />
<link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" />
<link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.0.6" media="screen" />
<link rel="stylesheet" type="text/css" href="screen.css" media="screen" />  
</head>

<body>
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div> 
<form id="gallery" name="gallery" class="page" action="index.php" method="post">
<p>
<?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                      $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                      $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                      $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                      $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                      $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
              ?>
  <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>"alt="<?php echo $description; ?>" /></a>
  <?php endfor; ?>  
</p>
</form>

<!-- scripts -->
<script type="text/javascript" src="fancybox/lib/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.0.6"></script>
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>
<script type="text/javascript" src="main.js"></script>
</body>
</html> 
```

...这是你的样式表——screen.css：

```
body {font-family: Calibri; color: #505050; margin-left: 240px; float:left;}
.style1 {font-size: 14px; margin-top: 5px; margin-right: 110px;}
#gallery {margin-left: -120px; margin-right: 50px; border-left: 100; caption-side: left;} 
```

最后是页面准备就绪后运行的脚本——main.js：

```
$(function(){
    $('.removeImage').click(function(){
        $(this).next('a.fancybox').remove();
    });

$('.fancybox').fancybox({
            openEffect  :   'elastic',
            closeEffect :   'elastic',

            padding :   20,
            fitToView   :   true,

            prevEffect :    'none',
            nextEffect :    'none',

            closeBtn  : false,
            arrows : false,

            helpers : {
                title : {
                    type : 'inside'
                },
                buttons : {}
            },

            afterLoad : function() {
                this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            }
        });
}) 
```

# jquery-mobile - data-add-back-btn="true" 添加 changeHash: false 属性到 changePage 时不起作用

> ID：10363720
> 
> 赞同：0
> 
> 时间：2012-04-28T13:01:55.357
> 
> 标签：jquery-mobile

我对 data-add-back-btn="true" 有疑问。它工作正常，但是当我将 changeHash: false 添加到 changePage 时，data-add-back-btn="true" 不会让我返回上一页。它总是把我带到根源。代码如下：

$.mobile.changePage("#CountriesPage", { changeHash: false });

<div data-role="page" id="CountriesPage" data-add-back-btn="true" >

任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:22:20.200

后退按钮依赖 changeHash 来按预期工作。你将不得不摆脱其中一个。

# ruby-on-rails - 如何仅在 Rails 3 中创建具有计算列的模型？

> ID：10363721
> 
> 赞同：0
> 
> 时间：2012-04-28T13:02:02.113
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3.2

我想创建一个仅包含来自多个表的计算值的模型。

这已经被[问](https://stackoverflow.com/questions/6900508/how-to-create-read-only-models-in-rails-with-no-backing-table)过了，但给定的解决方案仅适用于 Rails 2。该解决方案与 Ryan Bates 对无表模型所做的基本相同。（[Railscast #193](http://railscasts.com/episodes/193-tableless-model)）

不幸的是，这不适用于 Rails 3，它有不同的方法（[Railscast #219](http://railscasts.com/episodes/219-active-model)）。（恕我直言，这些模型应该称为*无数据库模型*）

我的第一个想法是使用 ActiveModel 方法创建一个新类，我尝试使用`ActiveRecord::Base.connection`纯 Arel 自己实现数据库功能，但结果证明这是一项非常艰巨的工作，所以现在我只是在滥用另一个模型：

```
CompletlyUnrelatedModel.select(['SUM(...) AS sum1', 'SUM(...) AS sum2', ...])... 
```

但这有一些缺点。对我来说最大的问题是返回的属性总是`String`对象（因为 Rails 无法查看数据库模式来确定列类型）。此外，我真的不喜欢某个模型的实例包含完全不相关的数据。

# jquery - 使用 jquery 选择具有最高 z-index 的元素

> ID：10363723
> 
> 赞同：1
> 
> 时间：2012-04-28T13:02:10.817
> 
> 标签：jquery

我有一个页面，其中我有多个具有类`aaw`但具有不同 zIndex 的元素。现在我想选择具有最高 zIndex 和 class 的元素`aaw`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T13:05:40.247

```
var best;
var maxz;    
$('.aaw').each(function(){
    var z = parseInt($(this).css('z-index'), 10);
    if (!best || maxz<z) {
        best = this;
        maxz = z;
    }
}); 
```

结果是最好的。

[演示（打开控制台）](http://jsbin.com/piyes/1/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T13:10:40.313

jsfiddle：http: [//jsfiddle.net/A5FUL/31/](http://jsfiddle.net/A5FUL/31/)

```
<div class="aaw" style="position:relative;z-index:1;">1</div>
<div class="aaw" style="position:relative;z-index:2;">2</div>
<div class="aaw" style="position:relative;z-index:3;">3</div>

<div onclick="test()">Click</div>

<script>
    function test()
    {
        var highest;
        var object;

        $('.aaw').each( function(index)
        {
            if ( index == 0 || $(this).css("z-index") > highest )
            {
                highest = $(this).css("z-index");
                object = $(this);
            }
        });

        alert( $(object).html() );
    }
</script> 
```

​</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-28T13:06:49.573

您可以使用以下内容；

```
var highestzindex = 0; 
var resultelement = null;  
$(".aaw").each(function() {
    var currentzindex = parseInt($(this).css("zIndex"), 10);
    if(currentzindex > highestzindex) {
        highestzindex = currentzindex;
        resultelement = $(this);
    }
}); 
```

我添加了一个演示。你可以[在这里看到](http://jsfiddle.net/cubuzoa/kCzge/)

# c# - 为 Nullable 字段创建自动生成的验证器

> ID：10363725
> 
> 赞同：1
> 
> 时间：2012-04-28T13:02:47.340
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, validation, asp.net-mvc-validation

我有一个必须可本地化的 MVC 3 应用程序。对于我的整数 MVC 会自动添加数字验证，但是我已将该字段标记为可为空。

这是在我的 ViewModel 中：

```
public int? UserValidity
{
   get { return this.Company.UserValidity; }
   set { this.Company.UserValidity = value; }
} 
```

这是在我的模型中：

```
public Nullable<int> UserValidity { get; set; } 
```

我已经读过 MVC 仅为不可空字段添加了此验证，但在我的情况下，它也为可空字段添加此验证。

可能是什么原因？

实际上，在我的应用程序中，所有验证消息都必须是多语言的，因此我必须创建自定义验证器以从 db 获取这些消息。但是 MVC 的自动生成的验证器优先于我的验证器，而且它只有英文。

# scroll - Tumblr / 灯箱 / 无限滚动

> ID：10363726
> 
> 赞同：0
> 
> 时间：2012-04-28T13:02:47.447
> 
> 标签：scroll, lightbox, tumblr, infinite-scroll

我目前正在 Tumblr 上制作一个照片博客，该博客使用“无限滚动”脚本来加载主页上的所有内容，而无需在页面之间滚动。将“LightBox”代码添加到脚本后，它可以工作，但仅适用于主页上**的前 10 个图像。**

我假设无限滚动脚本正在改变 img 设置中的某些内容......

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:40:01.357

我试试这个[Auto ThickBox Plus](http://attosoft.info/en/blog/auto-thickbox-plus-1-6/) jquery 插件。

我有这个问题。

我尝试了很多插件，fancybox、lightbox、colorbox 等，但只有这个可以无限滚动。

# vim - vim：如何删除光标和代码之间的空格？

> ID：10363730
> 
> 赞同：1
> 
> 时间：2012-04-28T13:03:21.597
> 
> 标签：vim

我有这条线

```
 aaaaa
bbbbbb
cccccc
dddddd 
```

如果我将光标放在第一列带有 a 的行中，如何将 a 组移动到与其余行相同的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T13:15:38.893

实现目标的三种（通用）方法：

1.  要手动向左调整缩进，您可以使用`<``<`向左移动一次（重复以`.`达到所需的缩进水平）。

2.  如果您已经处于插入模式，`Ctrl`+`d`会将当前行向左移动。

3.  使用自动缩进`=``=`

但是，鉴于您最初描述的位于第 1 列，并希望`a`'s 与其他列一致，我可能只会使用`d``t``a`delete 直到第一个 a.

**编辑：**正如 Tim Pote 所指出的，`d``w`这是一种将空格删除到第一个字符的更有效方法。不过，我不确定你想从你的描述中完成什么（即你只是想删除空格，还是在`a`' 开始之前删除所有字符？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:23:58.713

如果您已经在第一列，我会使用`d``w`删除词。这将删除当前列和单词之间的所有空格。

所有其他替代方案都取决于移动缩进，这可能会也可能不会一次性删除所有空格，具体取决于您的设置。要么你必须使用 letter-specific `d``t``a`，这也是更多的击键。

# matrix - awk 距离矩阵

> ID：10363731
> 
> 赞同：1
> 
> 时间：2012-04-28T13:03:28.947
> 
> 标签：matrix, awk, distance

我想得到一些工作方面的帮助，但我真的不知道如何去做。我必须从一个 3 列文本中创建一个距离矩阵，如下所示：

```
AN51 AN50 88
AN52 AN50 167
AN52 AN51 125
AN53 AN50 81
AN53 AN51 93
AN53 AN52 170
AN54 AN50 120
AN54 AN51 119
AN54 AN52 117
AN54 AN53 66 
```

输出必须是方形“2d”矩阵

```
 AN50  AN51  AN52 AN53
AN50 0     88   167   81
AN51 88    0    125   93
AN52 167   125   0    170
AN53 81    93   170    0 
```

我尝试使用 $0 从文件中读取，它最终读取了所有字段，但对齐方式不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:11:29.773

```
awk '
{ 
  matrix[$1,$2] = $3
  matrix[$2,$1] = $3 
} 
END { 
  printf("\tAN50\tAN51\tAN52\tAN53\n")
  for (n=0;n<4;n++) { 
    printf("AN5%d\t", n)
    for (m=0; m<4; m++) { 
      printf("%d\t", matrix["AN5"n,"AN5"m]) 
    } 
    printf("\n") 
  } 
}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T15:48:54.473

这是 Michael Barber 答案的更通用版本，通常适用于任意数量的列和行。

```
awk '
BEGIN {
    OFS = "\t"
}
{
    matrix[$1,$2] = $3
    matrix[$2,$1] = $3
    names[$1] = $1
    names[$2] = $2
}
END {
    num = asort(names)
    for (i = 1; i <= num; i++) {
        printf("%s%s", OFS, names[i])
    }
    printf("\n")
    for (i = 1; i <= num; i++) {
        printf("%s", names[i])
        for (j = 1; j <= num; j++) {
            printf("%s%4d", OFS, matrix[names[i], names[j]])
        }
        printf("\n")
    }
}' 
```

示例输出：

```
 AN50    AN51    AN52    AN53    AN54
AN50       0      88     167      81     120
AN51      88       0     125      93     119
AN52     167     125       0     170     117
AN53      81      93     170       0      66
AN54     120     119     117      66       0 
```

请注意，您的示例输入数据会产生我显示的输出，其中包含完整的数据。另请注意，迈克尔的回答仅输出您的示例输出包含的不完整内容。

**编辑：**

这是一个不需要`asort()`并且应该在非 GNU 版本的 AWK 上工作的版本：

```
awk '
BEGIN {
    OFS = "\t"
}
{
    matrix[$1,$2] = $3
    matrix[$2,$1] = $3
    names[$1] = $1
    names[$2] = $2
}
END {
    for (i in names) {
        printf("%s%s", OFS, i)
    }
    printf("\n")
    for (i in names) {
        printf("%s", i)
        for (j in names) {
            printf("%s%4d", OFS, matrix[i,j])
        }
        printf("\n")
    }
}' 
```

它将以不可预知的顺序打印名称。

# ios - 基于 1.6.1 的 phonegap 构建应用程序中未触发 deviceready 事件

> ID：10363735
> 
> 赞同：2
> 
> 时间：2012-04-28T13:04:32.017
> 
> 标签：ios, events, cordova

背景：

我正在运行我正在使用 phonegap build (1.6.1) 构建的 phonegap 应用程序。

android build 似乎工作得很好，但是在 iOS (Iphone 3GS 16M iOS: 5.0.1 (9A405) ) 上我从来没有得到这个`deviceready`事件。

我想弄清楚我在这里缺少什么。

问题： 1.`deviceready`事件的绑定在 include 之前还是之后有关系`phonegap.js`吗？2\. 会不会是事件“过早”发生而我的处理程序还没有绑定到它？3\. 是否有基于轮询的方法来确定设备是否准备就绪？4\. 与 JQuery 相关的 deviceready 处理应该在哪里进行`$(document').ready`？

我的代码：我当前的代码尝试同步 3 件事：1\. JQuery 的`.ready`事件 2.PhoneGap 的`deviceready`事件 3.（小心）window.navigator.device.platform 上的轮询结果

通过以下方式：

```
<!DOCTYPE html>
<html>
<head>

    <script type="text/javascript" src="./scripts/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="./scripts/jquery.myapp.js"></script>

    <script type="text/javascript">
        window.myapp={
            deviceReady:false,
            JQueryReady:false,
            started:false,
            logbuf:[]
        }

        function log(m){
            window.myapp.logbuf.push(m);
            console.debug(window.myapp.logbuf.join('||'));
            var  el=document.getElementById('container');
            if (el!=null) {
                el.innerHTML+=', ' + window.myapp.logbuf.join('||') ;
                window.myapp.logbuf=[];
            }
        }

        //Wait for device
        function onDeviceReady() {
            window.myapp.deviceReady=true;
            log('phonegap deviceready event fired');
            startIfAllReady();
        }
        document.addEventListener("deviceready", onDeviceReady, false);

        function pollDevice(){
            if (window && window.navigator && window.navigator.device && window.navigator.device.platform ) {
                log('polling found device');
                window.myapp.deviceReady=true;
                startIfAllReady();  
            }
            else {
                log('polling');
                window.setTimeout(arguments.callee,500);
            }
        }

        pollDevice();

        //Wait for jquery
        $(document).ready(
            function(){
                window.myapp.JQueryReady=true;
                log('jquery document.ready event fired');
                startIfAllReady();
            }
        );              

        function startIfAllReady(){
            log('startIfAllReady window.myapp.JQueryReady=' + window.myapp.JQueryReady + ' window.myapp.deviceReady=' + window.myapp.deviceReady + ' window.myapp.started=' + window.myapp.started );
            if (window.myapp.deviceReady && window.myapp.JQueryReady && window.myapp.started==false) {
                log('starting');
                started=true;
                renderClient();
            }
            else {
                log('cant start');                  
            }
        }

        function renderClient(){
            log('renderClient called - RETURNING !');
            return;
            window.setTimeout(function(){window.scrollTo(0, 1)},100);
            log('create myappClient');
            $('#myappClientContainer').empty().myappClient(
                {width:$(window).width(),
                 height:$(window).height()
                }
            );
        }

    </script>

    <script type="text/javascript" src="phonegap.js"></script>

    <link rel="stylesheet" type="text/css" href="./styles/client.css" />
    <style>
        html , body { margin:0px; background-color:gray;}
    </style>

    <title>myapp</title>
</script>
</head>
<body style="width:100%">

<script>
    log('body script executing');
</script>
<div style="width:100%" id="myappClientContainer">DEFAULT HTML</div>
</body>
</html> 
```

代码结果：在规则浏览器（chrome）中，我得到：

```
默认 HTML  
轮询||执行正文脚本||触发 jquery document.ready 事件  
startIfAllReady window.myapp.JQueryReady=true window.myapp.deviceReady=false window.myapp.started=false   
无法启动   
轮询   
轮询   
轮询   
...（和轮询....）  

```

在 iPhone 上：

```
默认 HTML  
轮询||执行正文脚本||触发 jquery document.ready 事件  
startIfAllReady window.myapp.JQueryReady=true window.myapp.deviceReady=false window.myapp.started=false   
无法启动

```

如您所见 - 任何地方都没有“phonegap deviceready 事件触发”，轮询似乎也不起作用:(

请注意，在 iphone 上，开始时只有一个“轮询”日志条目...... iPhone 不能处理 onTimeout 吗？为什么我没有得到 deviceready 事件？！

我注意到的另一件事：当（phonegap）使用调试集构建时，我可以在 PhoneGapBuild weinre 调试窗口中看到设备/应用程序一段时间，然后它就消失了。

谢谢

更新：我上面的轮询循环是错误的，它应该寻找 window.navigator.platform

无论如何，我把它全部放在了一起。有些东西是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:33:52.720

令人惊讶的是，通过将 ..script src="phonegap.js... 添加到我的 html 文件中，我的问题得到了解决

来源：http: [//community.phonegap.com/nitobi/topics/javascript_events_not_working_with_android_phonegap_build_xcode](http://community.phonegap.com/nitobi/topics/javascript_events_not_working_with_android_phonegap_build_xcode)

我的印象是构建过程添加了 ipmort，我特别困惑，因为当我绕过 deviceready 事件时一切都很好。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:51:17.763

似乎我忽略了更新这个 Q。无论如何，问题是 winere 中不存在“console.debug”，所以我的代码失败了。

埃亚尔

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T08:41:06.040

您必须在身体负载上附加 phoneGap deviceReady 事件，如下所示：

```
<script>
function onBodyLoad() {
    document.addEventListener("deviceready", onDeviceReady, false); 
    }
</script>

<body onload="onBodyLoad()"> .. html ... </body> 
```

# c - 非本地跳转是否存在性能问题？

> ID：10363737
> 
> 赞同：0
> 
> 时间：2012-04-28T13:04:36.673
> 
> 标签：c, setjmp

我正在使用非本地跳转（`setjmp`, `longjmp`）。我想知道这是否会给表演带来问题。`setjmp`是保存所有堆栈，还是只保存一些指针？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:27:04.053

快速的答案是：不太可能。如果`setjmp`在你的程序中成为一个明显的瓶颈，我倾向于说你的程序设计需要大修。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:19:50.103

`setjmp`必须为程序保存足够的信息才能在`longjmp`被调用时继续执行。这通常包括当前堆栈指针，以及可能影响计算的任何其他 CPU 寄存器的当前值。

我无法评论这是否会导致“性能问题”，因为我不知道您想将其与什么进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:36:19.073

就像 Jens 所说，如果它成为一个明显的瓶颈，重新设计它，因为这不是`setjmp`应该的使用方式。

至于您的问题：
这可能取决于您运行程序的架构以及编译器对您的代码所做的确切操作。在 ARM 上，`goto`可能会被翻译成一条非常快的分支指令。另一方面需要保存和恢复所有寄存器以便在跳转后恢复执行`setjmp`。`longjmp`在支持 NEON 的 ARMv7-a 上，这将需要保存大约 16 个 32 位寄存器和最多 16 个 128 位寄存器，与简单分支相比，这是相当多的额外工作。

我不知道在 x86 上是否需要更少的工作，但我怀疑`goto`那里也便宜很多。

# ruby-on-rails - 如何从 table1 查询数据，其中 table1_id 不在 table2 和 table1_id 不在表 3

> ID：10363738
> 
> 赞同：0
> 
> 时间：2012-04-28T13:04:40.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我在数据库中有 3 个表`dishes`，`price_deals`并且`give_away_deals`

```
# == Schema Information
#
# Table name: dishes
#
#  id          :integer         not null, primary key
#  name        :string(255)
#  created_at  :datetime
#  updated_at  :datetime

# Table name: price_deals
#
#  id              :integer         not null, primary key
#  name            :string(255)
#  dish_id         :integer
#  created_at      :datetime
#  updated_at      :datetime

# Table name: give_away_deals
#
#  id          :integer         not null, primary key
#  name        :string(255)
#  dish_id     :integer
#  created_at  :datetime
#  updated_at  :datetime 
```

我必须从表中获取`id`and 。id 不在和 id 不在没有重复 id 的地方。`name``dishes``price_deals``give_away_deals`

假设我在`dishes`表`id`1 到 10 中有 10 条记录。

在`price_deals`表`dish_id`中`2,4,5`。

`give_away_deals`表中`dish_id`有`1,3,6`

# 预期结果：

然后，我必须从表中获取`id`and`name``dishes``id``7,8,9,10`

我试过这个查询，

```
Dish.all(:select => "id, name", :conditions => ["id not in (select dish_id from price_deals)", "id not in (select dish_id from give_away_deals)"]) 
```

但它只返回不在`price_deals`.

上述查询有什么问题以及如何获得预期结果？

这是我在 Rails 服务器中得到的 SQL 查询

```
SELECT id, name FROM "dishes" WHERE (id not in (select dish_id from price_deals)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:19:02.210

好的时间来一些更大的答案。

试试这个代码：

```
first = PriceDeal.select(:dish_id).map(&:dish_id)
second = GiveAwayDeal.select(:dish_id).map(&:dish_id)
Dish.select('id, name').where("id not IN(?)", (first + second).uniq) 
```

我认为应该生成一个好的 SQL 查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:39:08.023

你可以试试这段代码

```
Dish.includes(:price_deal, :give_away_deal).where("price_deals.id is null and give_away_deals.id is null") 
```

方法`includes`并`where`与一个查询一起使用

```
SQL (0.5ms)  SELECT `dishes`.`id` AS t0_r0, `dishes`.`name` AS t0_r1, `dishes`.`created_at` AS t0_r2, `dishes`.`updated_at` AS t0_r3, `price_deals`.`id` AS t1_r0, `price_deals`.`dish_id` AS t1_r1, `price_deals`.`created_at` AS t1_r2, `price_deals`.`updated_at` AS t1_r3, `give_away_deals`.`id` AS t2_r0, `give_away_deals`.`dish_id` AS t2_r1, `give_away_deals`.`created_at` AS t2_r2, `give_away_deals`.`updated_at` AS t2_r3 FROM `dishes` LEFT OUTER JOIN `price_deals` ON `price_deals`.`dish_id` = `dishes`.`id` LEFT OUTER JOIN `give_away_deals` ON `give_away_deals`.`dish_id` = `dishes`.`id` WHERE (price_deals.id is null and give_away_deals.id is null) 
```

我使用 Rails 3.2.1 和 ruby​​ 1.9.3

# android - 根据 EditText 的内容写入文件

> ID：10363739
> 
> 赞同：0
> 
> 时间：2012-04-28T13:04:42.500
> 
> 标签：android, file-io

我在写入文件时遇到问题，当 EditText 为空时，我想写一个空格字符或`-`在我的文件中，但我的条件被简单地忽略了。

这不起作用，我不明白为什么：

```
public void onClick(View v) {
            // TODO Auto-generated method stub
            if(isthereafile == true){
            questioncount++;
            questiontext = question.getText().toString();
            correctanswertext = correctanswer.getText().toString();
            wronganswertext1 = wronganswer1.getText().toString();
            wronganswertext2 = wronganswer2.getText().toString();
            textpathofpic = pathofpic.getText().toString();

            try {
                FileWriter writer = new FileWriter(test,true);

                if(question.getText().toString().equals("") == false){
                writer.append(questiontext + ";");}
                if(correctanswer.getText().toString().equals("") == false){
                writer.append(correctanswertext + ";");}
                if(wronganswer1.getText().toString().equals("") == false){
                writer.append(wronganswertext1 + ";");}
                if(wronganswer2.getText().toString().equals("") == false){
                writer.append(wronganswertext2 + ";");}
                if(pathofpic.getText().toString().equals("") == false){
                writer.append(textpathofpic + ";");}

                if(question.getText().toString().equals("")){writer.append("-");}
                if(correctanswer.getText().toString().equals("")){writer.append("-");}
                if(wronganswer1.getText().toString().equals("")){writer.append("-");}
                if(wronganswer2.getText().toString().equals("")){writer.append(" ");}
                writer.flush();
                writer.close();     
                question.setText("");           
                correctanswer.setText("");      
                wronganswer1.setText("");           
                wronganswer2.setText("");

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:51:47.880

除了检查长度之外，您还需要修剪文本：

```
if (question.getText().toString().trim().length() == 0) {
} 
```

一个更大的问题是您的代码在主线程上写入文件系统。您也不会在 finally 块中关闭 FileWriter。并且不需要在 close() 之前立即调用 flush()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:35:33.140

而不是这个

```
 question.getText().toString().equals("") 
```

试试这样

```
 question.getText().toString().length()==0 
```

# intellij-idea - Intellij IDEA 中是否有搜索历史记录？

> ID：10363740
> 
> 赞同：42
> 
> 时间：2012-04-28T13:04:48.770
> 
> 标签：intellij-idea

我在 Eclipse 中经常使用的一个特性是 Search History，它会记住您过去执行的搜索并让您快速访问它们。我似乎无法在 IntelliJ 中复制此功能 - 似乎我每次都必须开始新的搜索。这个功能是否存在，或者有人知道提供这种功能的插件吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-28T09:50:48.210

我认为您正在寻找的是“在路径中查找”对话框底部的“在新选项卡中打开”复选框。对我来说，默认情况下它是禁用的。当您启用它时，您每次都会在单独的选项卡中打开搜索结果，因此访问历史搜索将更加容易。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-13T23:00:29.637

对于最近的“查找用法”，打开“查找”窗口（Cmd 3）；单击“查找”窗口工具栏中的设置按钮；在设置对话框中选中“在新选项卡中打开”复选框。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-12-20T14:08:18.740

在“查找”停靠栏内按 Alt+Down 以查看“最近查找用法”下拉菜单。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-01-14T10:48:36.047

搜索历史 intellij alt up 或 alt down。

![搜索历史 intellij alt up 或 alt down](../Images/bf50c54143ada5df9dc9e3088f6d88d8.png)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-04-28T13:07:56.630

对于文件内搜索，如果您按向下箭头键，则会出现“**最近搜索**”下拉菜单，该`Find in Path`对话框也可以使用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-02-12T16:58:07.850

Alt+向下箭头是您正在寻找的...

首先按 Ctrl+Shift+f，然后按 alt+向下箭头

有关更多信息，请查看 IntelliJ 网站： [https ://www.jetbrains.com/help/idea/searching-everywhere.html#search_all](https://www.jetbrains.com/help/idea/searching-everywhere.html#search_all)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-27T19:30:44.020

单击查找窗口中的放大图标，您将看到它。这不是直觉的。当我单击文本框窗口时，我希望它会列出以前的搜索。

[![在此处输入图像描述](../Images/542d1fbeee544e6ab03a98f44f6cc023.png)](https://i.stack.imgur.com/V31ny.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-01T17:35:38.067

[![在此处输入图像描述](../Images/f96855f6d24e86c6582365b4ca6eea7e.png)](https://i.stack.imgur.com/xp1Ia.png)当您用户通过路径查找时，您会在搜索的右上角找到“在查找窗口中打开”，您将看到如图所示的历史记录，您可以固定所需的搜索历史记录。只需点击查找窗口左侧面板中的 <- 箭头按钮，您就会看到历史记录

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-25T09:20:05.850

使用 Alt+down 可以查看以前的 Finds，但默认情况下仅打开 1 个 Tab。

当然，可以在与发布第一个答案时稍有不同的位置找到在新选项卡中打开新查找的设置。现在可以通过右键单击顶部栏（或“显示选项菜单”齿轮图标）-> 查看选项-> 在新选项卡中打开结果来找到它。 [![在新标签中打开结果](../Images/b5a9d915ff15cb12f24c084b3199533b.png)](https://i.stack.imgur.com/7S5DG.png)

# html - 自动调整父 div 的大小

> ID：10363741
> 
> 赞同：0
> 
> 时间：2012-04-28T13:04:54.343
> 
> 标签：html, css

目前我正在做一个需要我并排放置 2 个 div 的项目。这不是什么问题，除了我希望父 div 在其中一个 subdiv 变大时自动调整大小.. 问题来了..

当一个大于另一个时，它会将另一个推到父 div 的底部。我的问题是；我该如何解决这个问题？

要查看我的问题：http: [//jsfiddle.net/zygnz/508/](http://jsfiddle.net/zygnz/508/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:13:14.717

刚刚用解决方案更新了你的小提琴：

[http://jsfiddle.net/zuul/zygnz/511/](http://jsfiddle.net/zuul/zygnz/511/)

**CSS**

```
.right, .left {
  float: left;
}
.clear {
  clear: both;
}
.container div {
    display: block;
} 
```

**HTML**

```
<div id="container">
  .
  .
  .
  <div class="clear"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:08:03.770

嘿，尝试将其添加到“div.left”上的 CSS 中：

```
float: left; 
```

# java - 如何从命令提示符编译 servlet？

> ID：10363742
> 
> 赞同：4
> 
> 时间：2012-04-28T13:05:05.870
> 
> 标签：java, servlets, compiler-construction, classpath

我想`servlet`从命令提示符编译一个非常基本的，但它总是不成功，编译器告诉我以下内容：

```
 error: package javax.servlet does not exist. 
```

我搜索了解决方案，发现我需要将`servlet.jar`库包含到我的 PATH 中。我相信我做到了。我坚信这些库在我的计算机中的位置是：

```
C:\apache-tomcat-7.0.23\lib\servlet-api.jar\ 
```

我的 PATH 的结尾（相关部分）如下：

```
%JAVA_HOME%\bin;C:\apache-tomcat-7.0.23\lib\servlet-api.jar\ 
```

对我来说，它看起来不错，但显然不是。谁能告诉我可能是什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T13:08:23.640

类路径不是路径......你不需要它作为环境变量。您可以使用选项 -cp 或 -classpath 设置 javac 的类路径（也可以使用其他几种方法）。javac 使用环境变量 CLASSPATH 来查找类，这可能很有用，也可能是难以追踪的问题的来源。

编译使用库（即标准 JavaSE 之外的类）的 java 文件的示例如下：

```
javac -classpath C:\apache-tomcat-7.0.23\lib\servlet-api.jar MyTestServlet.java 
```

如果您的环境变量 CLASSPATH 包含您需要的库，您可能想要这样做：

```
javac -classpath %CLASSPATH%;C:\apache-tomcat-7.0.23\lib\servlet-api.jar MyTestServlet.java 
```

（请注意，我无法访问 Windows 机器，因此没有测试上述语法的特殊部分）（另请注意，在此示例中“C:\apache-tomcat-7.0.23\lib \servlet-api.jar" 是一个 jar 文件，而不是一个目录，它可能来自您机器上的问题）对于 Windows 操作系统上的命令行编译，正确设置环境变量 JAVA_HOME 和 bin 目录是个好主意PATH中的JDK。

但是，我确实建议通过/在 IDE 中编写-编译-执行-部署来进行 servlet 开发，然后再从命令行中弄清楚如何仅使用 JDK 来完成它。Java Servlet 不是独立的可执行类，但需要部署到例如 tomcat 中以进行测试/使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T04:31:19.017

首先从以下路径复制 servlet-api.jar 文件

`C:\apache-tomcat-7.0.23\lib\servlet-api.jar;`

并按照路径粘贴到java软件的bin文件夹中

`C:\java\jdk1.6\bin;`

希望现在您可以成功编译您的 servlet 程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-12T14:19:05.240

1.您可以将您的javax.servlet.jar复制到jdk1.6\lib文件夹中。2.你可以去控制面板\系统\高级系统属性\环境变量

![在此处输入图像描述](../Images/d54f49a355452af3691ef7b589a381db.png)

在 CLASSPATH 变量中输入 jar 的位置，如下所示：

![在此处输入图像描述](../Images/d565729d7688490a50afd8e26f309fe7.png)

然后编译并运行 servlet。

# java - 我无法使用 myfaces 2.0.13 和 richfaces 4.0 final 在 tomcat 7 中运行我的应用程序

> ID：10363743
> 
> 赞同：1
> 
> 时间：2012-04-28T13:05:16.453
> 
> 标签：java, jsf-2, richfaces

我已经部署了我的 Web 应用程序，该应用程序在 myfaces 2.0.13（JSF 2.0 imp）中成功地在 tomcat 7 中大量使用了 Richfaces 4.0 最终组件。但是当我尝试运行我的应用程序时，我不断收到以下异常（同一应用程序曾经在带有 Mojarra 2.0 的 tomcat 6 上成功运行）：

```
javax.servlet.ServletException: Servlet.init() for servlet Faces Servlet threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:662)
root cause

javax.faces.FacesException: java.lang.reflect.InvocationTargetException
    javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:350)
    javax.faces.FactoryFinder._getFactory(FactoryFinder.java:286)
    javax.faces.FactoryFinder.getFactory(FactoryFinder.java:191)
    org.apache.myfaces.context.FacesContextFactoryImpl.<init>(FacesContextFactoryImpl.java:129)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:326)
    javax.faces.FactoryFinder._getFactory(FactoryFinder.java:286)
    javax.faces.FactoryFinder.getFactory(FactoryFinder.java:191)
    javax.faces.webapp.FacesServlet.init(FacesServlet.java:112)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:662)
root cause

java.lang.reflect.InvocationTargetException
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:338)
    javax.faces.FactoryFinder._getFactory(FactoryFinder.java:286)
    javax.faces.FactoryFinder.getFactory(FactoryFinder.java:191)
    org.apache.myfaces.context.FacesContextFactoryImpl.<init>(FacesContextFactoryImpl.java:129)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:326)
    javax.faces.FactoryFinder._getFactory(FactoryFinder.java:286)
    javax.faces.FactoryFinder.getFactory(FactoryFinder.java:191)
    javax.faces.webapp.FacesServlet.init(FacesServlet.java:112)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:662)
root cause

java.lang.NullPointerException
    org.richfaces.context.FileUploadPartialViewContextFactory.<init>(FileUploadPartialViewContextFactory.java:77)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:338)
    javax.faces.FactoryFinder._getFactory(FactoryFinder.java:286)
    javax.faces.FactoryFinder.getFactory(FactoryFinder.java:191)
    org.apache.myfaces.context.FacesContextFactoryImpl.<init>(FacesContextFactoryImpl.java:129)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:326)
    javax.faces.FactoryFinder._getFactory(FactoryFinder.java:286)
    javax.faces.FactoryFinder.getFactory(FactoryFinder.java:191)
    javax.faces.webapp.FacesServlet.init(FacesServlet.java:112)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:662)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs. 
```

如果有人帮助我解决这个问题，我会很高兴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:09:05.853

我已经转移到richfaces 4.2，一切正常。我对结果很满意。那谢谢啦。我猜 Richfaces 4.0 final(fileUploader) 有一个错误。

# c#-4.0 - 对 IEnumerable 进行分组 >

> ID：10363750
> 
> 赞同：2
> 
> 时间：2012-04-28T13:05:53.230
> 
> 标签：c#-4.0, lambda

我有一个 IEnumerable> 的对象 diceRolls。一个数据集看起来像 {{ 1 , 1 }, { 1 , 2 }, { 1 , 3 }, { 1 , 4 }, { 1 , 2}}

我需要得到一个结果集，该结果集对公共集进行分组并总结该集的总行数。

我尝试了这样的 GroupBy 方法：

```
var aggregate = sorted.GroupBy(rolls => rolls, rolls => rolls); 
```

但它没有对任何东西进行分组，而且我在 rolls 对象内找不到要分组的字段，所以我唯一的选择是整个对象本身。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:06:51.330

您可以传递给实现序列等于的`GroupBy`自定义`IEqualityComparer`，因此 group by 将威胁 {1, 2} 和​​ {1, 2} 相同。但是，如果您知道，当您可以使用匿名类型及其 equals 实现时，您的 roll 只有 2 个元素：

```
var sorted = new[] { new[] { 1, 2 }, new[] { 1, 2 }, new[] { 1, 3 }, new[] { 2, 2 } };
var grouped = sorted.GroupBy(roll => new { r0 = roll[0], r1 = roll[1] });
var backToArrays = grouped.Select(g => new[] { g.Key.r0, g.Key.r1 }); 
```

此代码将产生 {{ 1, 2 }, { 1, 3 }, { 2, 2 }}。是你需要的吗？

# javascript - 想从 soundcloud api 的 SC.get() 函数中获取用户名

> ID：10363752
> 
> 赞同：0
> 
> 时间：2012-04-28T13:06:23.387
> 
> 标签：javascript, soundcloud

**我想在他成功连接到 soundcloud 后获得 soundcloud 的用户名...我能够连接但没有获得 soundcloud 用户的用户名**

```
<script type="text/javascript">

  $(document).ready(function() {
      SC.initialize({
          client_id: '****',
          redirect_uri: '***'
      });

  $('#connect').click(function(){
          SC.connect(function() {
              SC.get('/me', function(data) {
                  $('#name').text(data.username);
              });
          });
      });
  });

  </script>

</head>

<body>

<input type="image" src="images/larger-connect-with-sc.png" id="connect" />
<p>
Logged in as: <span id="name"></span>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:44:23.310

在我看来一切都很好。这里有一些精简但完整的源代码，您可以用来比较：

```
<!doctype html>
<html>
  <head>
  <title>Example Two</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="http://connect.soundcloud.com/sdk.js"></script>
  <script>
  $(document).ready(function() {
    SC.initialize({
      client_id: '8d720a0f46531b275c7c9a82619c9d46',
      redirect_uri: 'http://demo.paulosman.me/callback.html'
    });

    $('#connect').click(function() {
      SC.connect(function() {
        SC.get('/me', function(data) {
          $('#name').text(data.username);
        });
      });
    });
  });
  </script>
  </head>
  <body>
    <input type="image" src="images/larger-connect-with-sc.png" id="connect" />
    <p>
      Logged in as: <span id="name"></span>
    </p>
  </body>
</html> 
```

[您可以在此处](http://demo.paulosman.me/connect.html "功能演示")查看一个工作示例。

让我知道这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:14:39.483

```
<body onload="window.opener.setTimeout(window.opener.SC.connectCallback, 1)"> <b style="width: 100%; text-align: center;">This popup should automatically close in a few seconds</b> </body> 
```

# sql - 如何编写一个更好的多重连接来匹配跨行的多个值？

> ID：10363756
> 
> 赞同：0
> 
> 时间：2012-04-28T13:06:54.920
> 
> 标签：sql

我正在尝试编写一个 SQL 语句，它允许我根据关键字从表中选择一系列文章。到目前为止，我得到的是一个令牌表、一个文章表和一个用于令牌和文章的多对多表：

```
tokens
  rowid
  token

token_article
  token_rowid
  article_rowid

articles
  rowid 
```

我正在做的是进行搜索查询，将其按空格分隔，然后选择包含这些关键字的所有文章。到目前为止，我想出了这个：

```
select * from 
    (select * from tokens 
        inner join token_article on 
             tokens.rowid = token_article.token_rowid and 
             token = 'ABC'
    ) as t1, 

    (select * from tokens 
        inner join token_article on 
            tokens.rowid = token_article.token_rowid and 
            token = 'DEF'
    ) as t2 

where t1.article_rowid = t2.article_rowid and t2.article_rowid = articles.rowid 
```

哪个有效，但当然它对匹配 ABC 的所有文章和 DEF 然后选择它们的所有文章进行选择。

现在我正在尝试找出更好的方法。我认为可行的方法是选择所有与 ABC 匹配的文章，以及从*那些*与 DEF 匹配的文章中。这是我想象的样子但不起作用（收到错误消息“没有这样的列：tokens.rowid”）

```
select * from 
    (select * from
        (select * from tokens 
                inner join token_article on 
                    tokens.rowid = token_article.token_rowid and
            token = 'ABC'
        ) 
    inner join token_article on 
            tokens.rowid = token_article.token_rowid and
    token = 'DEF'
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:46:30.217

因为有不止一种方法可以做到这一点……此方法使用 GROUP BY 和 HAVING 子句。该查询正在查找具有 ABC 或 DEF 令牌的所有文章，然后按文章 ID 分组，其中文章的令牌数等于被查询的令牌数。

请注意，我在这里使用了 MSSQL 语法，但这个概念应该适用于大多数 SQL 实现。

**编辑：** 我应该指出，当您向查询添加更多标记时，这具有相当干净的语法。如果您添加更多标记，那么您只需要修改`t.token_in`条件并`HAVING COUNT(*) = x`相应地调整子句。

```
DECLARE @tokens TABLE
(
    rowid INT NOT NULL,
    token VARCHAR(255) NOT NULL
)

DECLARE @articles TABLE
(
    rowid INT NOT NULL,
    title VARCHAR(255) NOT NULL
)

DECLARE @token_article TABLE
(
    token_rowid INT NOT NULL,
    article_rowid INT NOT NULL
)

INSERT INTO @tokens VALUES (1, 'ABC'), (2, 'DEF')
INSERT INTO @articles VALUES (1, 'This is article 1.'), (2, 'This is article 2.'), (3, 'This is article 3.'), (4, 'This is article 4.'), (5, 'This is article 5.'), (6, 'This is article 6.')
INSERT INTO @token_article VALUES (1, 1), (2, 1), (1, 2), (2, 3), (1, 4), (2, 4), (1, 5), (1, 6)

-- Get the article IDs that have all of the tokens
-- Use this if you just want the IDs
SELECT a.rowid FROM @articles a
INNER JOIN @token_article ta ON a.rowid = ta.article_rowid
INNER JOIN @tokens t ON ta.token_rowid = t.rowid
WHERE t.token IN ('ABC', 'DEF')
GROUP BY a.rowid
HAVING COUNT(*) = 2 -- This should match the number of tokens

rowid
-----------
1
4

-- Get the articles themselves
-- Use this if you want the articles
SELECT * FROM @articles WHERE rowid IN (
    SELECT a.rowid FROM @articles a
    INNER JOIN @token_article ta ON a.rowid = ta.article_rowid
    INNER JOIN @tokens t ON ta.token_rowid = t.rowid
    WHERE t.token IN ('ABC', 'DEF')
    GROUP BY a.rowid
    HAVING COUNT(*) = 2 -- This should match the number of tokens
)

rowid       title
----------- ------------------
1           This is article 1.
4           This is article 4. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:32:49.867

这是一种方法。该脚本在 SQL Server 2012 数据库中进行了测试。

*脚本*：

```
CREATE TABLE dbo.tokens
(
        rowid   INT         NOT NULL IDENTITY
    ,   token   VARCHAR(10) NOT NULL
);

CREATE TABLE dbo.articles
(
        rowid   INT         NOT NULL IDENTITY
    ,   name    VARCHAR(10) NOT NULL
);

CREATE TABLE dbo.token_article
(
        token_rowid     INT NOT NULL
    ,   article_rowid   INT NOT NULL
);

INSERT INTO dbo.tokens (token) VALUES
    ('ABC'),
    ('DEF');

INSERT INTO dbo.articles (name) VALUES
    ('Article 1'),
    ('Article 2'),
    ('Article 3');

INSERT INTO dbo.token_article (token_rowid, article_rowid) VALUES
    (1, 2),
    (2, 3),
    (1, 3),
    (1, 1),
    (2, 2);

SELECT  out1.rowid 
    ,   out1.token
    ,   out1.token_rowid
    ,   out1.article_rowid
    ,   ta2.token_rowid
    ,   ta2.article_rowid
    ,   t2.rowid
    ,   t2.token
FROM
(
    SELECT      t.rowid
            ,   t.token
            ,   ta1.token_rowid
            ,   ta1.article_rowid
    FROM        dbo.tokens          t
    INNER JOIN  dbo.token_article   ta1
    ON          ta1.token_rowid     = t.rowid
    WHERE       t.token             = 'ABC'
)           out1
INNER JOIN  dbo.token_article   ta2
ON          ta2.article_rowid   = out1.article_rowid
INNER JOIN  dbo.tokens          t2
ON          t2.rowid            = ta2.token_rowid
AND         t2.token            = 'DEF'; 
```

*输出*：

```
rowid token token_rowid article_rowid token_rowid article_rowid rowid token
----- ----- ----------- ------------- ----------- ------------- ----- -----
1      ABC       1             2           2             2        2    DEF
1      ABC       1             3           2             3        2    DEF 
```

# php - php函数里面的另一个函数？

> ID：10363757
> 
> 赞同：-2
> 
> 时间：2012-04-28T13:07:00.073
> 
> 标签：php, function, codeigniter

我在我的分类广告网站上创建了一个联系表。我使用以下功能获取上传者电子邮件：

```
public function uploadermail()
{
    return $this->User_id?$this->User->email:lang('anonymous');
} 
```

它工作正常，我使用 echo 得到结果：

```
<?php echo $image->uploadermail(); ?> 
```

然后我使用一个函数来发送邮件：

```
public static function sendmail_anon()
{
    $form = new Form('sendmail_anon');

    $form->field('email', 'text', array
    (
        'valid_email'   =>  true
    ));

    $form->field('message', 'textarea', array
    (
        'min_length'    =>  25
    ));

    if($data = $form->validate())
    {
        $envoi = array
        (
            'message'   =>  $data['message'],
            'email' =>  $data['email']
        );

        mail($data['email'], lang('account_details'), lang('email_contact', $envoi), 'From: noreply@'.$_SERVER['HTTP_HOST']);
    }

    return $form;
} 
```

问题是这是从表单字段将邮件发送到电子邮件。我想替换 $data['email'] 并插入 uploadermail 。我试过 ：

```
mail($image->uploadermail(), lang('account_det..... 
```

它返回以下错误：

```
Fatal error: Call to a member function uploadermail() on a non-object 
```

有可能吗？我应该怎么写？

我试过 ：

```
 mail($uploadermail,.... 
```

而且它不返回错误，但没有收到任何邮件，我如何检查浏览器上的 $uploadermail 究竟包含什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:10:31.147

这意味着它`$image`不是一个类实例。所以你不能这样做`$image->uploadermail()`。

您可以通过以下方式检查它：`var_dump($image);`

发布完整代码后，我看到您正在从以下位置访问该功能`public static function sendmail_member()`：

```
mail($image?$image->uploadermail():$data['email'], lang('account_details'), lang('email_contact', $envoi), 'From: noreply@'.$_SERVER['HTTP_HOST']); 
```

但是`$image`，从未在该范围内声明（/实例化）。经过进一步调查，我发现`uploadermail`在正确的类中调用了一个方法，我猜您正在尝试访问该方法。

因此，要访问该方法，您应该执行以下操作：

```
self::uploadermail() 
```

或者

```
$this->uploadermail() 
```

**附言**

你真的应该尽量避免使用`static`s. 静态的东西基本上`global`是 s 并且它们[紧密地耦合你的代码](http://nikic.github.com/2011/12/27/Dont-be-STUPID-GRASP-SOLID.html)并且它阻止了`L`SOLID[编程](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:12:35.700

您应该在使用前为 $image 实例化一个对象！例如

```
$image = new ... 
or
$image = x.GetImage(... 
```

# objective-c - 切换视图时标签栏消失

> ID：10363760
> 
> 赞同：0
> 
> 时间：2012-04-28T13:07:29.547
> 
> 标签：objective-c, uitabbarcontroller

我希望你能帮助我解决一个小问题。

我有一个程序，它有一个带有 5 个标签栏项目的标签栏控制器。在主页上出现这个标签栏，我可以在 5 个标签栏项目之间切换，没有任何问题。

在某些视图上，我有一个加载 xib 文件的按钮，其中一些是可从选项卡栏中选择的 xib。但是，每当我使用按钮加载视图时，我都会丢失标签栏 - 这是我的问题。

我目前在视图之间加载的方式如下：

```
- (IBAction)newGamePressed 
{
    NewGameIntro *screen = [[NewGameIntro alloc] initWithNibName:nil bundle:nil];
    screen.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:screen animated:YES];
} 
```

这可能是一个非常明显的解决方案，但我对 Objective-C 很陌生，搜索论坛我找不到任何特别明显的东西。

任何人都可以提供的任何帮助将不胜感激。

提前致谢！

PS我在委托中加载Ta​​bBarController的方式如下（如果有帮助的话）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [[NSBundle mainBundle] loadNibNamed:@"TabBarController" owner:self options:nil];
    [self.window addSubview:rootController.view];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible]; 
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:15:08.870

您正在呈现一个模态视图，它将按照设计的方式覆盖整个窗口。如果您的目标是简单地将新控制器推送到堆栈上，您将需要标签的根视图成为 UINavigationController，您只需在其上使用推送另一个视图

```
[self.navigationController pushViewController:...] 
```

# php - HTML/PHP 将数据从 DB 渲染到 HTML 表单

> ID：10363761
> 
> 赞同：0
> 
> 时间：2012-04-28T13:07:36.390
> 
> 标签：php, html

在处理数据和填充方面需要帮助：

我正在创建员工数据库，有两个页面：1.添加员工2.修改员工

添加员工，接受 EMP 名称、EMP ID、经理姓名（下拉列表）、位置（选择它们的单选选项）等输入。所有这些输入都写入数据库。

员工ID

```
 <div class="fb-input-number">
          <input id="item12_number_1" name="emp_number" min="0" max="999999999" autocomplete="off" data-hint="" required="" step="1" type="number">
        </div>
      </div>
       <select id="item13_select_1" name="Manager" data-hint="">
            <option id="item13_0_option" value="Tom" >
              TOM
            </option>
            <option id="item13_1_option" value="Harry" selected="selected">
              HARRY
            </option>
      </select>
       <label id="item16_0_label">
            <input id="item16_0_radio" checked="checked" name="radio_location" data-hint="" value="IND" type="radio">
            <span id="item16_0_span" class="fb-fieldlabel">
              INDIA
            </span>
        </label>
        <label id="item16_1_label">
            <input id="item16_1_radio" name="radio_location" value="EMEA" type="radio">
            <span id="item16_1_span" class="fb-fieldlabel">
              EMEA
            </span>
        </label> 
```

在“修改员工”页面中，基于员工 ID，我想将具有 db 值的页面呈现到 html 页面。我正在使用类似的页面来修改条目。我可以通过 value=$EMPID 显示文本字段。我如何为下拉列表和复选框做同样的事情？

员工ID

```
 <div class="fb-input-number">
          <input id="item12_number_1" name="emp_number" min="0" max="999999999" autocomplete="off" data-hint="" required="" step="1" type="number" value="11222">
        </div>
      </div>
       <select id="item13_select_1" name="Manager" data-hint="">
            <option id="item13_0_option" value="Tom" >
              TOM
            </option>
            <option id="item13_1_option" value="Harry" selected="selected">
              HARRY
            </option>
      </select>
       <label id="item16_0_label">
            <input id="item16_0_radio"  name="radio_location" data-hint="" value="IND" type="radio">
            <span id="item16_0_span" class="fb-fieldlabel">
              INDIA
            </span>
        </label>
        <label id="item16_1_label">
            <input id="item16_1_radio" name="radio_location" value="EMEA" type="radio" checked="checked">
            <span id="item16_1_span" class="fb-fieldlabel">
              EMEA
            </span>
        </label> 
```

你能帮我么。

* * *

基本上我想出了修改页面，它将从数据库中检索数据并显示在 HTML 表单中。下面的代码无助于显示选定的值：

```
<?php
mysql_connect($SERVER_IP, $USERNAME, $PWD) or die(mysql_error());
mysql_select_db($DBNAME) or die(mysql_error());

$result=mysql_query("SELECT * from `Data` where Emp_ID = $MyEmpID ");
$info = mysql_fetch_array( $result );
$Location=$info['Location'];
?>

<html>
<body>
        <div class="fb-dropdown">
              <select id="item13_select_1" name="location" data-hint="">
                <option id="item13_0_option" value="BLR" <? if ($Location=="BLR") echo "selected"; ?> >
                  Bangalore
                </option>
                <option id="item13_1_option" value="EMEA" <? if ($Location=="EMEA") echo "selected"; ?> >
                  EMEA
                </option>
              </select>
            </div>
</body>
</html> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:18:33.073

当您的脚本呈现选择列表时，您必须检查每个选项的值是否与 DB 值匹配。如果是这样，请将所选属性添加到该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:31:58.773

下面解决了这个问题：

```
<?php
mysql_connect($SERVER_IP, $USERNAME, $PWD) or die(mysql_error());
mysql_select_db($DBNAME) or die(mysql_error());

$result=mysql_query("SELECT * from `Data` where Emp_ID = $MyEmpID ");
$info = mysql_fetch_array( $result );
$Location=$info['Location'];
$locations[0]="BLR";
$locations[1]="Provo";
$locations[2]="EMEA";
$locations[3]="APAC";
?>

<html>
<body>
        <div class="fb-dropdown">
              echo "
        <select name='location'>";

     for ($i=0; $i<=4; $i++)
     {
        if($Location == $locations[$i]){
          echo "<option selected value='$locations[$i]'>$locations[$i]</option>";
        }else {
          echo "<option value='$locations[$i]'>$locations[$i]</option>";
        }
     }

echo" </select>
            </div>
</body>
</html> 
```

# matlab - 在 MatLab 中使用数据窗口对数据进行分区

> ID：10363766
> 
> 赞同：0
> 
> 时间：2012-04-28T13:08:06.040
> 
> 标签：matlab

我有一组需要分析的数据。我正在尝试研究如何使用 for 循环将数据划分为 5 - 10 秒的块。我对 MatLab 很陌生，不知道我将如何去做。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:12:28.873

假设您有一个 samples 向量`x`和一个采样频率`fs`（以 Hz 为单位），那么您可以首先将向量重塑为矩阵：

```
x = reshape(x, fs*W, []); 
```

其中`W`是窗口长度（以秒为单位）。现在，每一列都是一个单独的数据窗口。¹

然后您可以依次处理每个窗口（即每列）：

```
for i = 1:size(x,2)
    process(x(:,i));
end 
```

* * *

[1\. 这假设`x`包含一个精确的整数个窗口。]

# c++ - 奇怪的错误：我班上的 EXC_BAD_ACCESS

> ID：10363767
> 
> 赞同：0
> 
> 时间：2012-04-28T13:08:12.157
> 
> 标签：c++, ios, llvm

这是我的代码：

```
typedef struct TItemSelector{
  ItemSelectFrame* pItems[2];
} SItemSelector;

class item {
  public:
  void expMethod();
  SItemSelector itemSelector_;
  UILayerButton* startBtn_;
};

void item::expMethod(){
startBtn_ = new UILayerButton();
for (i = 0; i < 3; i++) {
  itemSelector_.pItems[i] = new ItemSelectFrame();
}
startBtn_->callMethodA();
}

void UILayerButton::callMethodA()
{
  this->callMethodB();
}

void UILayerButton::callMethodB()
{

} 
```

上`this->callMethodB();`，出现“EXC_BAD_ACCESS”。

之后，我找到了解决方法：

```
class item {
  public:
  void expMethod();
  SItemSelector itemSelector_;
  SItemSelector itemSelector2_; // work around
  UILayerButton* startBtn_;
}; 
```

然后一切顺利......我只是不知道发生了什么，但`callMethodB()`只是一个空方法，与它无关。

我使用的是 Apple LLVM 3.1，默认设置。

更新：修复了我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:43:24.440

在这段代码中：

```
for (i = 0; i < 3; i++) {
  itemSelector_.pItems[i] = new ItemSelectFrame();
} 
```

你正在写结束，`itemSelector_.pItems`因为`pItems`是一个长度数组，`2`但你正在写`3`元素。

然后覆盖`startBtn_`恰好出现`itemSelector_`在内存中的那个。当您随后阅读 now corrupted 时，这就解释了错误`startBtn_`。

要么改变你的循环终止测试，要么增加`pItems`. 我不知道哪个是正确的解决方案，但很明显你会知道的。

# .htaccess - htaccess 中的 301 重定向

> ID：10363775
> 
> 赞同：0
> 
> 时间：2012-04-28T13:08:49.733
> 
> 标签：.htaccess

我正在为我的网站创建 htaccess，我需要通过 301 重定向将旧网址重定向到新网址。我在 htaccess 中创建了如下代码

我的旧网址喜欢

```
 www.example.com/categories/city/cityname/brandname/product1.html 
```

我的新网址就像

```
 www.example.com/product1.html 
```

对于这种情况，我在 htaccess 中编写了以下代码

```
 RedirectMatch 301 ^/categories/city/cityname/(.*)$ http://www.example.com/$1 
```

请就这种情况或我做错的地方帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:48:51.103

参考@Seybsen 的答案，这 1 行应该满足您的所有需求：

```
RewriteRule ^/([a-zA-Z]+)/([a-zA-Z]+)/([a-zA-Z]+)/([a-zA-Z]+)/(.*)$ /$5 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:20:09.087

尝试在您的 .htaccess 中使用 mod_rewrite 的功能，如下所示：

```
RewriteEngine On
RewriteRule ^/categories/city/cityname/(.*)$ /$1 [R=301,L] 
```

# java - Primefaces 只阻止一次组件

> ID：10363781
> 
> 赞同：1
> 
> 时间：2012-04-28T13:09:52.923
> 
> 标签：java, jsf, primefaces

我需要在通过 ajax 更新时阻止数据表。我使用了 blockUI 组件，它是 show() 和 hide() 方法。但它只工作一次！问题可能出在哪里？感谢帮助。以下是部分代码：

```
<p:dialog resizable="false" showHeader="false" modal="false"
          widgetVar="statusDialog" draggable="false" closable="false">
  ...
</p:dialog>
<p:panel>
 <p:selectOneMenu id="source" value="#{mainBean.selectedSource}">
   ....
   <p:ajax onstart="statusDialog.show(); feedBlock.show()" 
           oncomplete="statusDialog.hide(); feedBlock.hide()" 
           update="feed" listener="#{mainBean.filter(selectedSource, false)}"/>
 </p:selectOneMenu>
</p:panel>
...
<p:dataTable id="feed" scrollable="true" scrollHeight="460" 
             value="#{mainBean.feed}" var="curr">
  ...
</p:dataTable>
<p:blockUI block="feed" widgetVar="feedBlock"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:08:54.437

尝试

```
<p:blockUI block="feed" trigger="source"/> 
```

并删除`feedBlock.show()`和`feedBlock.hide()`从`p:ajax`

您可能需要更改`trigger="source"`为`trigger="myform:source"`等...

# php - 使用唯一 ID 的 PHP/Curl 抓取链接

> ID：10363786
> 
> 赞同：0
> 
> 时间：2012-04-28T13:10:18.343
> 
> 标签：php, regex, curl

我正在尝试在 youtube 搜索的结果页面上抓取视频链接，但是我遇到了麻烦，因为所有视频链接都包含唯一的 ID。这是我到目前为止的代码：

```
<?php

$data = file_get_contents('http://www.youtube.com/results?search_query=php');

$regex = '/watch?v={11}/';

preg_match($regex,$data,$match);

print_r($match);

?> 
```

打印出来时，我只得到一个空数组，因此它似乎没有在 '/watch?v=' 或我尝试动态抓取它后面的 11 个字符的 uid 上拾取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:16:28.737

您的正则表达式有错误。此外，您希望您使用 preg_match_all 来获取所有匹配项..

```
$data = file_get_contents('http://www.youtube.com/results?search_query=php');

$regex = '/watch\?v=([a-zA-Z0-9_]{11})/';

preg_match_all($regex,$data,$matches);

print_r($matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:14:57.173

`{11}`表示它之前的模式必须恰好出现 11 次。也就是说，您要匹配 11 个等号。您想将其更改为`.{11}`.. 这可能效果不佳，但至少您会得到结果。

# performance - Fluent Nhibernate Compound Id 会降低性能

> ID：10363788
> 
> 赞同：0
> 
> 时间：2012-04-28T13:10:35.293
> 
> 标签：performance, fluent-nhibernate, compound-key

我正在用许多视图重构遗留项目。目前，只需从视图中选择数据，它就可以相当快地工作。但是在重构之后选择会降低性能。我查看了发送到 db 的 sql，它几乎相同，除了一些别名设置为字段，但是这个视图没有任何主键，所以为了让它在流畅的 nhibernate 中工作，我添加了一个复杂的键。View 有大约 10k 行。因此，根据一些休眠密钥检查，我认为延迟在客户端。smbd 可以帮助解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:26:56.403

实际上，当前的 nhibernate 文档讨论了复合 ID 的缺点，作为替代解决方案，您可以添加一个简单的键并对唯一字段进行查询，这应该更快。

# c++ - 运算符 >= 在实际为真时返回假

> ID：10363790
> 
> 赞同：-5
> 
> 时间：2012-04-28T13:10:45.993
> 
> 标签：c++

我正在尝试比较两个坐标。我发现我的循环永远不会因为这个而停止：

```
exit = ((p.x * sign_x) >= end_pos.x) && ((p.y * sign_y) >= end_pos.y);
cout<< p.x * sign_x << " >= " << end_pos.x
    << "=" << std::boolalpha << ((p.x * sign_x) >= end_pos.x)
    << " "
    << p.y * sign_y << " >= "<< end_pos.y
    << "=" << std::boolalpha << ((p.y * sign_y) >= end_pos.y)<<endl; 
```

变量永远`exit`不会变成。`true`在控制台中我看到：

```
9435.6 >= 132.6=true 180 >= 180=false 
```

怎么可能？

所有变量都是`float`。数值写在上面。as 值的变量`180`永远不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:28:23.267

您没有提供 and 的示例值`p.y`，`sign_y`因此很难确定。

但问题几乎可以肯定`p.y * sign_y`是不完全等于`180`; 但是当你打印它时它会被四舍五入。

我怀疑如果你打印 的值`(p.y * sign_y) - end_pos.y`，结果不会是`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:30:14.333

> 180 >= 180=假

这是一个标准的浮点精度问题。使用调试器时应该会看到它，实际值可能类似于 179.9999。你这样解决它：

```
bool closeEnough = p.y * sign_y - end_pos.y >= -epsilon; 
```

其中*epsilon*是一个足以吸收浮点计算错误的小值。float 类型只有 6 位有效数字，因此值约为 180.0，epsilon 应至少为 0.001f。如果这还不够好，那么您需要使用 double 而不是 float，它有 15 个有效数字。

# ruby-on-rails - 在 Mac 上为 Rails 设置 PostgreSQL

> ID：10363797
> 
> 赞同：2
> 
> 时间：2012-04-28T13:11:23.263
> 
> 标签：ruby-on-rails, macos, postgresql, passwords, postgresql-9.1

我最近刚刚[用这个](http://www.postgresql.org/download/macosx)为 mac 安装了 postgresql 。但是，我遇到的问题是我从未为用户“postgres”指定密码，但这似乎对于使用 postgresql 执行任何操作都是至关重要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:55:30.690

以后不需要完全重新安装，可以通过以下方式更改密码：

```
ALTER USER postgres WITH PASSWORD '<newPassword>'; 
```

# c# - LINQ C# 空异常

> ID：10363805
> 
> 赞同：0
> 
> 时间：2012-04-28T13:12:39.893
> 
> 标签：c#, linq, exception

谁能解释为什么我有时会在这个插入方法上得到一个 NULL 异常？正如所说的只是有时，这对我来说更加令人困惑。

表 OrderLine 具有对数据上下文（.dbml 文件）中表 Product 的引用

```
public void insertNewOrder(string accountNumber, int orderId)
{
    var order = orderRep.GetOrderById(orderId);
    var orderlineData = orderLineRep.GetOrderLines(order.OrderID);

    foreach (var orderLine in orderlineData)
    {
        int currentStatus = dlvRep.getAxOrderStatusNumber(orderLine.ItemNumber, 0);
        string levering = "";
        string status = dlvRep.getAxOrderStatus(orderLine.ItemNumber, currentStatus, out levering);
        WebsiteOrderStatus insertNew = new WebsiteOrderStatus
        {
                AccountNumber = accountNumber,
                OrderID = orderId,
                ItemNumber = orderLine.ItemNumber,
                ItemName = orderLine.Product.Name,
                FormatName = orderLine.Product.ProductFormatName,
                Quantity = orderLine.Quantity,
                Price = orderLine.Price,
                Status = status,
                Levering = levering,
                LastUpdatedStatus = currentStatus,
                CreatedDate = DateTime.Now
        };
        db.WebsiteOrderStatus.InsertOnSubmit(insertNew);
        db.SubmitChanges();
    }
} 
```

异常消息：

```
Cannot insert the value NULL into column 'FormatName', table 'GWportal.dbo.WebsiteOrderStatus'; column does not allow nulls. INSERT fails. 
```

该语句已终止。

当我查找此代码无法找到 ProductFormatName 的产品时。ProductFormatName 的值不是 NULL，它具有我预期的值，例如：“PS3”。

另一个奇怪的是，它为什么不抱怨：

```
ItemName = orderLine.Product.Name, 
```

该库也不允许空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:17:28.570

这可能是代码中的错误`orderLineRep.GetOrderLines(order.OrderID)`导致`orderLine.Product.ProductFormatName`设置为`null`.

尝试添加一些调试代码：

```
 foreach (var orderLine in orderlineData)
    {
        if (orderLine.Product.ProductFormatName == null) {
            throw new Exception("ProductFormatName == null");
        }

        // ... 
```

* * *

> 另一个奇怪的是，它为什么不抱怨：
> 
> ```
> ItemName = orderLine.Product.Name, 
> ```
> 
> 该库也不允许空值。

我能想到两种解释：

1.  `orderLine.Product.Name`不为空。上面提到的错误可能只影响`ProductFormatName`.
2.  `orderLine.Product.Name`为空，但一个错误足以立即终止该语句。只会报告一个错误。在修复第一个错误之前，不会报告同样存在的其他错误。

# xcode4 - 用于创建目录和复制文件的 XCode“运行脚本”步骤失败

> ID：10363807
> 
> 赞同：2
> 
> 时间：2012-04-28T13:12:46.027
> 
> 标签：xcode4, run-script

在构建过程中，我有以下自定义脚本步骤：

mkdir -p "${CONTENTS_FOLDER_PATH}/Frameworks" cp "${SRCROOT}/testing.1.dylib" "${CONTENTS_FOLDER_PATH}/Frameworks"

该脚本成功运行，但是当我检查捆绑包时，Frameworks 目录不存在。

不应该像我预期的那样工作吗？（使用 testing.1.dylib 创建的框架文件夹）。

编辑：添加了运行脚本的屏幕截图。 ![运行脚本](../Images/bcdd2c3250327778280695272fbdc3a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:07:25.863

如何尝试以下方法：

```
dst=${CONFIGURATION_BUILD_DIR}/${CONTENTS_FOLDER_PATH}/Frameworks
mkdir -p "${dst}"
cp "..." "$dst" 
```

（我找到了您的示例并按上述方式对其进行了修改，以将 dylib 复制到我框架的“框架”文件夹中）。

# c# - 从另一个类取消线程计时器

> ID：10363808
> 
> 赞同：0
> 
> 时间：2012-04-28T13:12:52.183
> 
> 标签：c#, wpf, timer

我正在尝试在我自己的代码中为 Thread.Timers 实现 MSDN 示例 (http://msdn.microsoft.com/en-us/library/swx5easy.aspx)。

我希望能够在执行某个用户操作时取消计时器，但是我无法处置计时器，我怀疑这是因为我正在调用另一个类的方法，所以我需要调整；但我不知道在哪里。

除此之外，计时器工作正常。谁能看到为什么我的计时器在调用 btnconfigOpenConfig 时不会取消？

*仅供参考，我正在将工作进程转换为定时事件。*

```
public partial class Xservt : Window
        {

            internal class TimerStateObjClass
            {
                public int SomeValue;
                public System.Threading.Timer SqlUpdateFromTwitterTimerReference;
                public bool TimerCanceled;
            }

internal void SomeMethod(){

                    TimerStateObjClass stateObj = new TimerStateObjClass();
                    stateObj.TimerCanceled = false;
                    stateObj.SomeValue = 100;
                    System.Threading.TimerCallback timerDelegate =
                        new System.Threading.TimerCallback(twit.hometimelineclass._sqlUpdateFromTwitterWorker_DoWork);

                    var sqlUpdateFromTwitterTimer = new Timer(timerDelegate, stateObj, 0,20000);
                    stateObj.SqlUpdateFromTwitterTimerReference = sqlUpdateFromTwitterTimer;

    }
}

//action to perform which disposes the timer
private void btnconfigOpenConfig(object sender, RoutedEventArgs e)
            {

                TimerStateObjClass timerState = new TimerStateObjClass();
                timerState.TimerCanceled = true;
    }

//Actions the timer is calling, in another class
internal static void _sqlUpdateFromTwitterWorker_DoWork(object StateObj)
            {

                Xservt.TimerStateObjClass state = (Xservt.TimerStateObjClass) StateObj;

                if(state.TimerCanceled)
                {
                    state.SqlUpdateFromTwitterTimerReference.Dispose();

                }

    //some work
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:41:46.073

正如汉斯在评论中指出的那样，您需要保留对您最初创建的 TimerStateObjClass 的引用。然后，您可以使用它来设置 TimerCanceled。

```
public partial class Xservt : Window
{

    internal class TimerStateObjClass
    {
        public int SomeValue;
        public System.Threading.Timer SqlUpdateFromTwitterTimerReference;
        public bool TimerCanceled;
    }

    TimerStateObjClass stateObj;  //THIS IS THE ORIGINAL STATE OBJ
    internal void SomeMethod()
    {
        stateObj = new TimerStateObjClass();
        stateObj.TimerCanceled = false;
        stateObj.SomeValue = 100;
        System.Threading.TimerCallback timerDelegate = new System.Threading.TimerCallback(twit.hometimelineclass._sqlUpdateFromTwitterWorker_DoWork);

        var sqlUpdateFromTwitterTimer = new Timer(timerDelegate, stateObj, 0, 20000);
        stateObj.SqlUpdateFromTwitterTimerReference = sqlUpdateFromTwitterTimer;
    }

    //action to perform which disposes the timer
    private void btnconfigOpenConfig(object sender, RoutedEventArgs e)
    {
        //HERE WE CAN GET AT THE ORIGINAL STATE OBJ
        stateObj.TimerCanceled = true;
    }
}
    //Actions the timer is calling, in another class
    internal static void _sqlUpdateFromTwitterWorker_DoWork(object StateObj)
    {
        Xservt.TimerStateObjClass state = (Xservt.TimerStateObjClass)StateObj;

        if (state.TimerCanceled)
        {
            state.SqlUpdateFromTwitterTimerReference.Dispose();
        }

        //some work
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:43:23.260

1.  您需要在类中的某处存储对定时器（或引用定时器的类）的引用。
2.  要停止计时器，无需处置它。你可以打电话`timer.Change(-1, -1);`。这将允许通过调用重新启用计时器`timer.Change(dueTimeInMs, intervalInMs);`

你的代码应该是这样的：

```
public partial class Xservt : Window
{
   private Timer timer = new Timer(o => DoSomething());

   private void StartTimer()
   {
     var period = 5 * 1000; // 5 sec
     timer.Change(0, period);
   }

   private void StopTimer()
   {
     timer.Change(-1, -1);
   }
} 
```

然后分别调用`StartTimer`运行和`StopTimer`停止。

另请注意，如果有任何机会`DoSomething`运行时间超过计时器间隔，这将导致在多个线程中同时运行该方法。为避免这种情况，请勿使用 Timer 的时间间隔，而是使用`dueTime`：

```
 private Timer timer = new Timer(o => {
                                         DoSomething(); 
                                         StartTimer();
                                         });

   private void StartTimer()
   {
     var period = 5 * 1000; // 5 sec
     timer.Change(period, 0);
   } 
```

在此计时器中仅触发一次，但每次运行后都会重新触发。

# php - PHP中用于密码存储的最慢哈希函数？

> ID：10363810
> 
> 赞同：3
> 
> 时间：2012-04-28T13:13:04.980
> 
> 标签：php, security, hash, cryptography, passwords

PHP中最慢的哈希函数是哪个？

或者，换句话说，PHP 中的哪些哈希函数是专门为密码存储而设计的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:15:45.880

我相信[bcrypt](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)是目前可用的最慢的散列算法，这也是为什么它最常被推荐用于散列密码。[这是一个 PHP 5.3 实现](https://gist.github.com/972386)。

# jekyll - 使用 Jekyll 的本地帖子资产

> ID：10363812
> 
> 赞同：72
> 
> 时间：2012-04-28T13:13:10.123
> 
> 标签：jekyll

我想知道其他人在使用 Jekyll 时如何为个人帖子组织他们的资产。例如，如果一个帖子有一张图片，您是否将其转储到共享图片文件夹中？我真的不喜欢这样做的想法 - 这意味着当我认为它们应该配对时，图像与帖子完全分开。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-28T13:20:11.733

我写了一个插件，让我可以轻松地组织子目录中的资产：
[https ://github.com/samrayner/jekyll-asset-path-plugin](https://github.com/samrayner/jekyll-asset-path-plugin)

```
{% asset_path my-image.png %} 
```

在 2013-01-01-post-title 之后会输出：

```
/assets/posts/post-title/my-image.png 
```

在页面 my-first-page 将输出：

```
/assets/my-first-page/my-image.png 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-28T18:06:07.797

我更喜欢将图像视为包含在零个或多个页面中的独立资产。大多数时候，我的图像显示在一个页面中。有时我想将它们放在多个页面中，而在其他情况下我根本不链接图像。如果您的工作流程是将每张图片与帖子放在一个目录中，那么找到它们开始需要大量搜索，并且您必须为不属于特定帖子的图片想出一些不同的东西。

我使用的方法正好相反。我有一个单一的图像目录（从“/images”提供），我 100% 的图像都存放在那里。这样做的好处是：

1.  当我在帖子中添加图像时，很容易知道要使用什么路径。总是如此：

    ```
    /images/{image-name} 
    ```

    例如：[http](http://alanwsmith.com/i/aws-20111017--0906-02) ://alanwsmith.com/i/aws-20111017--0906-02 。这使得编写插件成为可能，因此您只需输入图像名称，其余已知路径将自动填写。

2.  使用像[Photo Mechanic](http://www.camerabits.com/site/PhotoMechanic.php)这样的应用程序，在本地浏览单个目录并查看每张图像非常容易。如果我想在另一个页面上包含图像，这会大大减少查找它的时间。

3.  如果我想将图像发送给某人而不将其实际包含在页面中（即向他们发送图像文件的直接链接），则没有单独的位置/过程。我只是将图像放在标准目录中并发送直接链接。

如果您想更高级一点，将所有图像保存在一个目录中也可以进行一些不错的调整。例如，即使我的图像的 URL 以“/images”开头，图像实际上存储在 jekyll 使用的目录之外的目录中。就我而言，我的源代码树的顶部如下所示：

```
./html
./source-files
./image-files 
```

我所有的图像都存储在“./image-files”目录中。在我的 apache 配置中，我设置了一个别名，以便 URL“/images”指向“./image-files”目录。例如：

```
Alias /images /webroot/image-files 
```

当我运行 jekyll 时，它会处理“./source-files”中的所有内容并将其放入“./html”中。因为所有图像都在这两个目录之外，所以 jekyll 永远不会看到/触摸它们。随着您的图像库的增长，这将有助于加快速度，并防止大量不必要的文件复制。

我在 Apache 中喜欢的另一个调整是打开：

```
Options +MultiViews 
```

这使您无需使用文件扩展名就可以调用您的图像（例如，没有“.jpg”、“.png”等...）。您可以在我上面提供的示例链接中看到这一点。这对性能并不重要。我只是喜欢它的外观，它使我不必在每次调用图像时都输入扩展名。

MultiViews 还可以将一种格式的图像替换为另一种格式，而无需重新编码其他任何内容。例如，如果您删除“some-image.gif”并将其替换为“some-image.png”，您就不必接触任何 HTML。它仍会以“/images/some-image”的形式提供。需要进行这样的更改可能非常罕见。我只是认为能够做到这一点很有趣。

最后，您可以单独决定是否允许浏览您的图像目录。就个人而言，我只希望我的图像显示在我放置它们的位置。因此，我将图像目录中的 .htaccess 文件设置为：

```
Options -Indexes 
```

如果您要在具有数千或数万页和图像的站点上工作，这可能无法扩展。对于一个正常大小的个人网站，我发现这种方法可以更轻松地维护图像。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-06-29T14:22:58.660

我现在设法开发了一个 Jekyll 插件，可以帮助将帖子资产与 Markdown 文件一起保存： [https ://nhoizey.github.io/jekyll-postfiles/](https://nhoizey.github.io/jekyll-postfiles/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-02-08T13:07:09.283

就像你一样，我真的很讨厌将所有图像放在一个共享文件夹中。

大多数（如果不是全部）我的图片在一篇文章中都很有用，并且将它们与 Markdown 文件放在一起对于帖子管理来说确实更好：

*   我可以在一个步骤中将新帖子作为一个子文件夹删除`/_posts/`，而无需将 Markdown 放在一个位置并将图像放在另一个位置
*   当我想编辑现有帖子的图像时，我不必在一个巨大的`/assets/`文件夹中找到正确的图像，它位于 Markdown 文件附近
*   在我的 Markdown 中，我可以直接使用图像文件名，无需任何路径
*   如果我想使用任何带有实时预览的 Markdown 编辑器，它可以工作，不需要特定的资产文件夹配置

我试图在我的博客中使用这个（[示例帖子在这里](https://github.com/nhoizey/nicolas-hoizey.com/tree/master/_posts/2015/02/18-viewport-height-is-taller-than-the-visible-part-of-the-document-in-some-mobile-browsers)）。

对于响应式图像，我使用了[Jekyll 图片标签插件](https://github.com/nhoizey/jekyll-picture-tag)，但我不得不分叉它，因为处理此类路径[的拉取请求不被接受。](https://github.com/robwierzbowski/jekyll-picture-tag/pull/60)

既然 Jekyll 3 已经存在，我希望它可以让我们同时使用 post 文件夹和一个文件夹中的图像，按顺序`/assets/`查找两者中都标记有的图像。`![alt](image-file-without-path.jpg)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T21:26:03.393

对于 JavaScript 和 CSS，您可能需要考虑资产管道。您可以通过捆绑和压缩获得良好的性能提升。我还使用 CoffeeScript 和 Sass，所以我需要一个预处理器来转换我的资产。当我运行命令时，我使用[Jekyll Asset Pipeline](http://www.matthodan.com/2012/11/22/jekyll-asset-pipeline.html)来自动管理整个过程。`jekyll`

对于图像/视频，我建议您为项目中的文件夹命名约定。我通常有一个“资产”文件夹，然后是带有每个帖子日期的子文件夹，其中包含与这些帖子相关的图像。如果您每天有多个帖子，您可以考虑包含帖子的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-25T03:15:06.693

这个答案：

*   不使用插件（适用于 GitHub Pages）
*   允许您将图像直接放在相关帖子旁边
*   允许您在本地使用 Typora 进行编辑并查看所见即所得的图像

只需将您的文件夹命名为`_posts/2020-10-10-My-Title/`并包含类似`index.md`和`hero.svg`/或其他图像的文件。

然后将`permalink:`_config.yaml 中的密钥设置为`:path`.

注意事项：

*   您的文件夹名称必须是 sluggified
*   您的图像必须全部为 SVG

# android - Android maven 使用错误的 java 版本

> ID：10363817
> 
> 赞同：1
> 
> 时间：2012-04-28T13:13:39.710
> 
> 标签：android, android-maven-plugin

我正在针对 Android V2.2.1 编译我的 Android 项目，我正在使用 Android 依赖项：

```
<dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>2.2.1</version>
        <scope>provided</scope>
</dependency> 
```

一切都编译得很好，并且在更高版本中引入的库（例如与 Nfc 相关的东西）不可用，这很好。

当我使用纯 Java 方法（如仅在 V2.3+ 中引入的 String.isEmpty）时出现问题，由于某种原因，Maven 不会因“找不到符号”而失败，但编译通过，它只会在设备上失败运行版本 2.2。

我的 android-maven-plugin 配置文件：

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <version>3.1.1</version>
    <configuration>
        <androidManifestFile>${project.basedir}/AndroidManifest.xml
        </androidManifestFile>
        <assetsDirectory>${project.basedir}/assets</assetsDirectory>
        <resourceDirectory>${project.basedir}/res</resourceDirectory>
        <nativeLibrariesDirectory>${project.basedir}/src/main/native
        </nativeLibrariesDirectory>
        <sdk>
            <platform>8</platform>
        </sdk>
        <undeployBeforeDeploy>true</undeployBeforeDeploy>
    </configuration>
    <extensions>true</extensions>

</plugin> 
```

如何确保编译失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:14:33.470

您可能想尝试使用来自 Sdk 的原始 android jar，方法是使用 Maven Android SDK Deployer 将其部署到您的存储库或存储库服务器。那可能行得通。

# c# - 子字符串和索引

> ID：10363818
> 
> 赞同：3
> 
> 时间：2012-04-28T13:13:39.953
> 
> 标签：c#, string, java-me

我正在使用 J2me、ASP 和 WML 创建一个移动网站。

我从数据库中读取并创建了一个字符串，如下所示，以便以后可以调用它。

```
 string id = reader[0].ToString();
                string name = reader[1].ToString();
                Response.Write("#" + name + id); 
```

在 J2me 我记得它是

```
stringItem3.setText("Welcome  "+result.substring(result.indexOf("#")+1)
  + "ID " + result.substring(result.indexOf("#")+2)); 
```

结果不是我想要的我试图用语法改变很多但没有运气。

结果总是显示为

![在此处输入图像描述](../Images/8e25f410932e7cce318a9860146ae59c.png)

而我真正想要展示的是

```
Welcome  (name)  ID : (id)
or
Welcome  Arin  ID : 20111 
```

获得正确结果的最佳方法是什么？

我可以稍后将 id 值保存在 J2me 内的字符串中以供以后使用（是/否）？

* * *

我改变了字符串（已解决）

```
string id = reader[0].ToString();
string name = reader[1].ToString();
Response.Write("*"+ id + "#" + name); 
```

以及获取信息时

```
stringItem3.setText("Welcome  "+result.substring(result.indexOf("#")+1)
  + "ID " + result.substring(result.indexOf("*")+1,result.indexOf("#")));

result.substring(result.indexOf("*")+1,result.indexOf("#"))); 
```

这意味着获取“*”和“#”之间的字符

现在结果很好，如下图。

![在此处输入图像描述](../Images/8e25f410932e7cce318a9860146ae59c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:20:10.710

您要保存的字符串看起来像`#Arin20111`，之后`indexOf("#")+2`的^(第二)个字符也是如此`#`。

`result.substring(result.indexOf("#")+1)`之后的*整个*字符串也是如此`#`，即名称*和*ID。And`result.substring(result.indexOf("#")+1)`是相同的字符串，除了`A`开头的 。

如果您知道名称永远不会包含`#`，则可以将字符串存储为`#Arin#20111`。那么名称就是`<sup>st</sup>`# `and before the 2<sup>nd</sup>`# `, and the ID is everything after the 2<sup>nd</sup>`# 之后的所有内容。

# android - 在android中通过ftp上传视频文件

> ID：10363819
> 
> 赞同：1
> 
> 时间：2012-04-28T13:13:45.643
> 
> 标签：android

嗨朋友们
，我正在做一个 android 应用程序，我想从我的 sd 卡中选择一个视频并将其上传到 ftp 服务器。当我在模拟器中运行项目时，我得到了`04-28 18:22:00.810: ERROR/AndroidRuntime(1053): java.lang.NoClassDefFoundError: org.apache.commons.net.ftp.FTPClient`。有没有办法解决这个问题。我包括两个jar文件org.apache.commons.net.jar和commons-net-1.4.1.jar通过右键单击我的项目->属性->java构建路径->添加外部jars。即使我添加了jar文件，项目没有运行。如果有人知道，请帮助我...
我正在使用以下代码：

```
package net.jeema.UploadFTP;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.util.UUID;

**import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPReply;**

import org.w3c.dom.CharacterData;
import org.w3c.dom.Element;
import org.w3c.dom.Node;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.net.Uri;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class UploadFTPActivity extends Activity {
    SQLiteDatabase myDataBase;
    // public String[] gur = new String[4];

    private static final int SELECT_VIDEO = 1;
    String strXmlResponse, url = null;
    String selectedPath, extension;
    Button bnupload, bnbrowse = null;
    String fname = null;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addnewvideo);
        bnupload = (Button) findViewById(R.id.buttonUpload);
        bnbrowse = (Button) findViewById(R.id.buttonBrowse);
        addVIDEO();
    }

    public void addVIDEO {      
        bnbrowse.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent();
                intent.setType("video/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent, "Select Video"),
                        SELECT_VIDEO);
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode,
            final Intent data) {

        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_VIDEO) {
                System.out.println("SELECT VIDEO");
                Uri selectedImageUri = data.getData();
                selectedPath = getPath(selectedImageUri);
                System.out.println("SELECT_VIDEO Path : " + selectedPath);
                int pos = selectedPath.lastIndexOf(".");
                if (pos > 0) {
                    extension = selectedPath.substring(pos + 1);
                }               
                doFileUpload();
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Video.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    public void doFileUpload() {
        bnupload.setOnClickListener(new OnClickListener() {
            final SharedPreferences prefs = PreferenceManager
                    .getDefaultSharedPreferences(getApplicationContext());

            public void onClick(View arg0) {
                UUID uniqueKey = UUID.randomUUID();
                fname = uniqueKey.toString();
                Log.e("UNIQUE NAME", fname);        
                // TODO Auto-generated method stub
                String hostName = "MY HOST NAME";
                String username = "****";
                String password = "****";
                String location = selectedPath;
                FTPClient ftp = null;

                InputStream in = null;
                try {
                    ftp = new FTPClient();
                    ftp.connect(hostName);
                    ftp.login(username, password);

                    ftp.setFileType(FTP.BINARY_FILE_TYPE);

                    ftp.changeWorkingDirectory("/uploads");

                    int reply = ftp.getReplyCode();
                    System.out.println("Received Reply from FTP Connection:" + reply);

                    if (FTPReply.isPositiveCompletion(reply)) {
                        System.out.println("Connected Success");
                    }

                    File f1 = new File(location);
                    in = new FileInputStream(f1);

                    ftp.storeFile(fname+"."+extension, in);

                    System.out.println("SUCCESS");

                    ftp.logout();
                    ftp.disconnect();
                } catch (Exception e) {
                    e.printStackTrace();
                }           
            }
            public String getCharacterDataFromElement(Element e) {
                Node child = e.getFirstChild();
                if (child instanceof CharacterData) {
                    CharacterData cd = (CharacterData) child;
                    return cd.getData();
                }
                return "";
            }
        });
    }
} 
```

我使用带有以下代码的简单 java 程序获得了输出。但我想在 android 活动中执行此操作：

```
import java.io.File;

import java.io.FileInputStream;
import java.io.InputStream;

import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPReply;

public class FtpTest {

    public static void main(String args[]) {
        String hostName = "MY HOST NAME";
        String username = "****";
        String password = "****";
        String location = "F:\\droid-samples\\VID-20120421-103134.3gp";
        FTPClient ftp = null;

        InputStream in = null;
        try {
            ftp = new FTPClient();
            ftp.connect(hostName);
            ftp.login(username, password);

            ftp.setFileType(FTP.BINARY_FILE_TYPE);

            ftp.changeWorkingDirectory("/uploads");

            int reply = ftp.getReplyCode();
            System.out.println("Received Reply from FTP Connection:" + reply);

            if (FTPReply.isPositiveCompletion(reply)) {
                System.out.println("Connected Success");
            }

            File f1 = new File(location);
            in = new FileInputStream(f1);

            ftp.storeFile("VID-20120421-103134.3gp", in);

            System.out.println("SUCCESS");

            ftp.logout();
            ftp.disconnect();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:47:24.090

您可以尝试解决 0 字节问题：

```
ftp.enterLocalPassiveMode(); 
```

# jquery - 模型对话框和调用者函数之间的链接

> ID：10363822
> 
> 赞同：0
> 
> 时间：2012-04-28T13:14:06.643
> 
> 标签：jquery, twitter-bootstrap

我有一个图像列表和每个图像附加的删除按钮。

在单击删除按钮时，我在 jquery 事件处理程序的帮助下使用 twitter 引导模式打开了一个弹出窗口以进行确认。

现在，当我单击弹出窗口中的确认按钮时，如何将值返回给调用者函数（删除按钮），以便我可以从 dom 中删除图像？

Twitter 引导模式：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

* * *

以下是我用来调用模型对话框的代码：

```
$('.close-btn').click(function(e) {
    e.preventDefault();
    $('#myModal').modal('show');
    //$(this).parents('li').remove();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:16:18.660

我不确定这是否是正确的写法，但它对我有用：

```
 $('.close-btn').click(function(e) {
            e.preventDefault();
            e.stopPropagation()
            $('#myModal').modal('show');
            var elm = $(this).parents('li');
            $('.confirm-delete').click(function(e) {
                e.preventDefault();
                $(elm).remove();
                $('#myModal').modal('hide')
            })
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:21:48.307

modal 和其中的所有元素（表单字段、按钮、图片）已经是 dom 的一部分。您只需要为删除按钮处理提交、单击或任何您想要的事件。无需传递任何内容，因为模式已经是当前页面的一部分。

```
$('.close-btn').click(function(e) {
    e.preventDefault();
    $('#myModal').modal('show');
    //$(this).parents('li').remove();
});

$('#confirmDeleteButton').click(function() {
    //code here to delete the associated picture
} 
```

# java - 单击按钮后重新绘制 JPanel

> ID：10363824
> 
> 赞同：2
> 
> 时间：2012-04-28T13:14:43.147
> 
> 标签：java, swing, jpanel, repaint

我是 Java Swing 的新手，我有一个奇怪的问题要刷新我的`JPanel`.

`JPanel`我在我的框架中创建了一个静态组件，并从 a 调用一个静态方法`FileListenner`来重新绘制我的`JPanel`

```
 public static void repaintPlan(JPanel f) {
    f.paint(f.getGraphics()); 
    f.revalidate(); // or validate
} 
```

我的意思是，当我检测到文件内容的变化时，我计算新坐标并重新绘制（我从paintComponent()` 方法`JPanel`创建了一个类扩展）`JPanel to define`

当我运行应用程序时一切正常，当文件中的数据发生变化时重绘工作；但如果我在 中用鼠标单击`Jpanel`，则该`repaint()`方法不再起作用。你能告诉我为什么点击后`JPanel`，重绘不起作用吗？

对不起我的英语不好提前谢谢:)

编辑：感谢您的回复！但即使我使用`repaint()`方法，也是同样的问题。我试图了解单击时会发生什么`JPanel`。我应该在 Swing 中使用鼠标事件来解决问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:20:54.103

1) 对于 Swing`JComponents`是否有方法`paintComponent()`，方法`paint()`适用于顶级容器 ( `JFrame`, JDialog ...) 和`AWT Components`

2）不要使用`getGraphics()`此方法创建调用后`validate`过期的`revalidate`快照`repaint`

3) 你看过关于[2D Graphics的教程，](http://docs.oracle.com/javase/tutorial/2d/index.html)[这里](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Catalog2D-Graphics-GUI.htm)有例子

4) 如果您有真正的问题，请使用[SSCCE编辑您的问题](http://sscce.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T14:09:38.300

> 我试图了解单击时会发生什么`JPanel`。我应该在 Swing 中使用鼠标事件来解决问题吗？

您可能会从这个响应鼠标按下事件的[示例](https://stackoverflow.com/a/3538279/230513)中获得一些见解。在这种情况下，`paintComponent()`当颜色更新时会自动调用。另请参阅[*AWT 和 Swing 中的绘画*](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T21:25:57.797

不，paintComponent 在鼠标按下后不会被调用，除非你有一些代码让它这样做。例如：

```
import java.awt.*;
import javax.swing.*;

public class MyPanel extends JPanel {
   private static final int PREF_W = 400;
   private static final int PREF_H = 400;

   public MyPanel() {
      setBorder(BorderFactory.createTitledBorder("My Panel"));
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);

      System.out.println("myPanel's paintComponent method has been called");
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      MyPanel mainPanel = new MyPanel();

      JFrame frame = new JFrame("MyPanel");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

如您所见，在普通的 JPanel 中，除非您更改 GUI 的大小，否则不会在任何鼠标操作后调用paintComponent。

您的 GUI 有其他问题，而且，paintComponent 是否被调用一次或多次都无关紧要，因为您的程序逻辑不应依赖于是否调用此方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T18:14:50.760

我通过像这样覆盖我的 JPanel 的鼠标事件方法来解决我的问题

```
 myJPanel.addMouseListener(new MouseListener() {

        public void mouseReleased(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        public void mousePressed(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        public void mouseExited(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        public void mouseEntered(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        public void mouseClicked(MouseEvent e) {
            // TODO Auto-generated method stub

        }
    }); 
```

谢谢

# windows-phone-7 - 需要根据 Listview 中的选择更改全景项目中的选定索引吗？

> ID：10363825
> 
> 赞同：1
> 
> 时间：2012-04-28T13:14:43.607
> 
> 标签：windows-phone-7, windows-phone-7.1, panorama-control

> **可能重复：**
> [在全景项目 wp7 之间导航](https://stackoverflow.com/questions/10233022/navigate-between-panorama-items-wp7)

我在默认 PanoramaItem 中有一个列表视图，其中包含其他 PanoramaItems，如类别、收藏夹、设置等。所有这些 PanoramaItems 都列在列表视图中，并且在更改列表视图项目的选择时，它应该采用相应的 PanoramaItem。但我尝试使用 Panorama.selectedindex 进行更改，但它是只读属性。另一种方法是在 OnNavigationTo 事件上更改 defaultItem，但由于我的列表视图在同一个全景图中，因此这种方法不起作用。有什么直接的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:13:45.027

只需将默认项目设置为您要为用户视图加载的项目..

```
panSOS.DefaultItem = panSOS.Items[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:42:36.393

在 ListView 的 SelectionChanged 事件处理程序中，您应该能够将全景图的 DefaultItem 设置为您要查看的特定项目。

# c# - 比较两个字符串

> ID：10363830
> 
> 赞同：-2
> 
> 时间：2012-04-28T13:15:36.290
> 
> 标签：c#, string-comparison

我有两个字符串。

1.  细绳
2.  细绳

比较这两个字符串，结果应该是 TRUE（即）两个字符串相同。

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T13:17:37.260

在 .NET 中，字符串区分大小写，因此与 .NET 或其他字符串`"string"`不同`"String"`。如果您想忽略小写和大写的差异，请使用：

```
string.Compare(strA, strB, true); 
```

这将返回一个 int (-1, 0, 1)。如果你想要一个布尔值，只需使用：

```
string.Equals(strA, strB, StringComparison.OrdinalIgnoreCase); // or InvariantCultureIgnoreCase, CurrentCultureIgnoreCase 
```

无论如何，很难理解您在这个问题中所问的内容。我希望我猜到了你想知道的。

# objective-c - 在核心数据中设置一个自动递增的字段

> ID：10363831
> 
> 赞同：0
> 
> 时间：2012-04-28T13:15:37.703
> 
> 标签：objective-c, xcode, macos, cocoa, core-data

在像 SqlServer 这样的数据库中，我们可以设置一个自动递增的字段（身份增量），是否可以在核心数据中这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T03:30:52.150

考虑使用 creationDate 字段。当您创建对象时，只需添加

```
NSDate *creationDate = [NSDate date]; 
```

对 NSDate 进行排序、将其转换为双精度等非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:34:06.157

我认为核心数据中不可能进行内部和自动**自动增量。**您需要为此使用自定义解决方案。

你能告诉我你真正想要做什么吗？

我有同样的问题，我`NSUserDefault`用来存放我的柜台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:02:54.350

只需将 dode 下面放入您的测试项目中，以测试如何增加我们的计数器。

从该代码中，您将了解您需要做什么并根据需要更改此代码。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    int count;
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    count = [prefs integerForKey:@"integerKey"];
    NSLog(@"counter is >>>>%d",count);
    [prefs setInteger:count forKey:@"integerKey"];

    // code for adding record to core data

    count++;
    NSUserDefaults *prefs1 = [NSUserDefaults standardUserDefaults];
    [prefs1 setInteger:count forKey:@"integerKey"];
    NSLog(@"counter is >>>>%d",count);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T14:23:36.127

是的，这是可能的，但也许不是你想的那样。:) - 含义，而不是作为“关键”字段。

您可以创建一个“计数器” `NSManagedObject`，它在应用程序启动时初始化，并在跟踪“**当前号码**”和“**下一个号码**”属性后出现。

您可以检索当前数字并将其分配为需要具有此唯一且递增的“**数字**”的对象的属性值。

有一个示例代码“ **iClass** ”，我在 apple.com 上找不到链接，但是当在早期安装的 Xcode 中有一个目录**/Developer/Examples/CoreData**时，它是随 Xcode 一起安装的——你可能没有这个，以防万一，查看它可能会很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T13:40:02.830

如果您只想要一个在插入时自动递增的字段，那么使用 Core Data afaik 是不可能的。您将不得不提出一个自定义解决方案。哪种解决方案取决于您尝试解决的问题。

Core Data 确实为使用 Core Data 持久化的每个对象维护一个唯一的对象 ID（或 URI）。[这里](https://developer.apple.com/library/mac/#DOCUMENTATION/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html)有更多关于对象 ID 和 URI 的内容。

# c# - SqlDataReader 执行错误

> ID：10363834
> 
> 赞同：3
> 
> 时间：2012-04-28T13:15:46.303
> 
> 标签：c#, .net, sql, sql-server

我正在尝试使用 C# MSVS 2008 从名为 Specializationtbl 的表中检索专业化 ID，并且该表在其他一些行旁边包括 SpecializationName 和 SpecializationID，我的问题与一些错误“No Data to present”有关，命令如下：

```
SqlCommand READSpecID = new SqlCommand("SELECT * FROM Specializationtbl WHERE SpecializationName='" + comboBox1.Text + "'" , DBcnction);
DBcnction.Open();

SqlDataReader ReadSpecID_ = READSpecID.ExecuteReader();
ReadSpecID_.Read();
int SpecID_ = Convert.ToInt16(ReadSpecID_["SpecID"].ToString());

DBcnction.Close(); 
```

我还尝试选择“SpecID”而不是所有行，但似乎无法正确密封查询并不断收到“无数据存在”错误，知道我在哪里犯了错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:20:13.577

需要先测试是否有任何行。我怀疑查询返回零行。

if (ReadSpecID_.HasRows) { ReadSpecID_.Read(); }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:20:55.503

1) 在将值分配给 READSPecID 之前尝试打开 DBcnction

```
DBcnction.Open();
SqlCommand READSpecID = new SqlCommand("SELECT * FROM Specializationtbl WHERE     SpecializationName='" + comboBox1.Text + "'" , DBcnction); 
```

2）在SSMS中运行命令：

```
 SELECT * FROM Specializationtbl WHERE SpecializationName ='yourvalue' 
```

并查看是否返回任何结果

3) 检查 comboBox1.Text 中有一个值

4) 验证 comboBox1.Text 的内容（或使用参数化查询或存储过程）以确保您不会成为 SQL 注入的受害者：[http ://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:25:02.553

重构以解决您的两个问题：

1.  构建 SQL 语句时的 SQL 注入问题。
2.  如果您只需要一个值，请使用 ExecuteScalar。
3.  实现`using`块。

```
 string retVal;        
 using (var conn = new SqlConnection(SomeConnectionString))
 using (var cmd = conn.CreateCommand())
 {
   cmd.CommandText = "SELECT SpecID FROM Specializationtbl WHERE SpecializationName= @Name";
   cmd.Parameters.AddWithValue("@Name", comboBox1.Text);
   conn.Open();
   retVal = cmd.ExecuteScalar().ToString();
}
int specID = int.Parse(retVal); 
```

如果您确实需要语句中的多个值：

```
 using (var conn = new SqlConnection(SomeConnectionString))
 using (var cmd = conn.CreateCommand())
 {
   cmd.CommandText = "SELECT SpecID, Value2 FROM Specializationtbl WHERE SpecializationName= @Name";
   cmd.Parameters.AddWithValue("@Name", comboBox1.Text);
   conn.Open();
   var dr = cmd.ExecuteReader();
   while (dr.Read())
   {
      Customer c = new Customer { 
             ID = dr["SpecID"].ToString(),
             Value = dr["Value2"].ToString(),
       };
   }
} 
```

# c# - 对比算法 C# 指向 marshal.copy 的指针

> ID：10363838
> 
> 赞同：-1
> 
> 时间：2012-04-28T13:16:13.430
> 
> 标签：c#, vb.net, bitmap, contrast

我试图将此代码翻译成 vb.net 使用`Marshal.copy`但我无法让它工作

```
for (int y = 0; y < bitmapdata.Height; y++)
{
    byte* destPixels = (byte*)bitmapdata.Scan0 + (y * bitmapdata.Stride);
    for (int x = 0; x < bitmapdata.Width; x++)
    {
        destPixels[x * PixelSize] = contrast_lookup[destPixels[x * PixelSize]]; // B
        destPixels[x * PixelSize + 1] = contrast_lookup[destPixels[x * PixelSize + 1]]; // G
        destPixels[x * PixelSize + 2] = contrast_lookup[destPixels[x * PixelSize + 2]]; // R
        //destPixels[x * PixelSize + 3] = contrast_lookup[destPixels[x * PixelSize + 3]]; //A
    }
} 
```

我的问题是这一行：

```
byte* destPixels = (byte*)bitmapdata.Scan0 + (y * bitmapdata.Stride); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:25:08.420

假设你有`Scan0`一个`IntPtr`那么天真的 C# 翻译就是：

```
IntPtr destPixels = Scan0 + y*stride; 
```

这里的球员是：

*   `Scan0`：指向第一扫描线的指针，即像素数据的开始。
*   `y`: 行号。
*   `stride`: 一行像素中的字节数。
*   `destPixels`: 指向行首的指针`y`。

但这将假设您将非托管内存用于`destPixels`. 我不知道你是不是。如果您使用的是托管内存，那么翻译会有所不同。如果您需要更多帮助，您需要告诉我们您的托管版本使用的类型。

# mysql - SQL 行计数

> ID：10363843
> 
> 赞同：3
> 
> 时间：2012-04-28T13:16:56.527
> 
> 标签：mysql, sql

在继续之前，我不想使用任何涉及选择所有行并手动计算出现次数的查询。顺便说一句，我在 PHP 中这样做。

基本上，我有一张禁令表。每个新记录/行都是一个新禁令。标题字段`user_name`表示被禁止的玩家。有没有办法计算这张表中谁的禁令最多？我真的不想选择每一行然后为每个玩家计算它。该表非常大，因此使上述解决方案不切实际且效率低下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T13:19:42.730

这是通过`COUNT()`聚合完成的，按 分组`user_name`。

### 按用户从多到少获得禁令：

```
SELECT
  user_name,
  COUNT(*) as numbans
FROM bans
GROUP BY user_name
/* ordered by number of bans from greatest to least */
ORDER BY numbans DESC 
```

### 只获取最被禁止的用户：

```
SELECT
  user_name,
  COUNT(*) as numbans
FROM bans
GROUP BY user_name
ORDER BY numbans DESC
/* adjust LIMIT for how many records you want returned -- 1 gives only the first record */
LIMIT 1 
```

在您的问题中，您非常担心不想在 PHP 中手动计数。请注意，这几乎*没有必要*。RDBMS 系统是专门为组织和查询数据而设计的，并且非常擅长高效地执行此类任务。阅读 MySQL 中的[`GROUP BY`子句和聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)并掌握它们。您通常不需要在代码中执行此操作。

### 奖励：让所有用户被禁止 3 次或更多次

```
SELECT
  user_name,
  COUNT(*) as numbans
FROM bans
GROUP BY user_name
/* HAVING clause limits results of an aggregate like COUNT()  (which you cannot do in the WHERE clause) */
HAVING numbans >= 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:19:46.173

获得最禁止的前 10 名（`limit`如果您想按顺序查看所有内容，请离开此行）：

```
select user_name, count(user_name) as num_of_bans
from bans
group by user_name
order by num_of_bans desc
limit 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:21:58.313

`table_name` 从GROUP BY 中选择用户名、计数（id） `user_name`

# python - 读取/写入 Popen() 子进程

> ID：10363853
> 
> 赞同：14
> 
> 时间：2012-04-28T13:18:26.880
> 
> 标签：python, subprocess, popen, python-2.6

我正在尝试使用 python subprocess.Popen() 调用与子进程交谈。在我的真实代码中，我正在实现一种 IPC，所以我想写入一些数据、读取响应、写入更多数据、读取响应等等。因此，我不能使用 Popen.communicate()，否则它适用于简单的情况。

这段代码显示了我的问题。它甚至从来没有得到第一个响应，挂在第一个“阅读结果”上。为什么？我怎样才能使这项工作如我所料？

```
import subprocess
p = subprocess.Popen(["sed", 's/a/x/g'],
                     stdout = subprocess.PIPE,
                     stdin = subprocess.PIPE)

p.stdin.write("abc\n")
print "Reading result:"
print p.stdout.readline()

p.stdin.write("cat\n")
print "Reading result:"
print p.stdout.readline() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T13:27:22.147

`sed`的输出被缓冲，并且只输出它的数据，直到累积足够多或输入流耗尽并关闭。

试试这个：

```
import subprocess
p = subprocess.Popen(["sed", 's/a/x/g'],
                     stdout = subprocess.PIPE,
                     stdin = subprocess.PIPE)

p.stdin.write("abc\n")
p.stdin.write("cat\n")
p.stdin.close()

print "Reading result 1:"
print p.stdout.readline()

print "Reading result 2:"
print p.stdout.readline() 
```

`stdin`请注意，一旦缓冲区已满，将无法可靠地完成大量数据写入块。最好的方法是使用[`communicate()`](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T15:27:35.397

如果可以的话，我会尝试使用`Popen().communicate()`它，因为它为您做了很多好事，但如果您需要`Popen()`完全按照您的描述使用，您需要设置 sed 以使用`-l`选项在换行符后刷新其缓冲区：

```
p = subprocess.Popen(['sed', '-l', 's/a/x/g'],
                     stdout=subprocess.PIPE,
                     stdin=subprocess.PIPE) 
```

你的代码应该可以正常工作

# iphone - iPhone如何在打字时获取UITextField的文本？

> ID：10363856
> 
> 赞同：61
> 
> 时间：2012-04-28T13:18:49.360
> 
> 标签：iphone, objective-c, ios, uitextfield

我试图`UITextField`在单独的`UILabel`. 有没有办法捕获`UITextField`用户输入的每个字符之后的全文？目前我正在使用这种方法，但它不会捕获用户输入的最后一个字符。

我知道`UITextView`有“didChange”方法，但我找不到`UITextField`.

```
//does not capture the last character

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

        [self updateTextLabelsWithText: textField.text];

    return YES;
} 
```

**输入每个字符后，如何从 UITextField 中取出文本？**

谢谢！

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-04-28T14:12:32.407

1.  首先添加一个`UITextField`和`UILabel`到情节提要/笔尖
2.  现在分配`IBOutlet`（`UILabel`这里我使用了*myLabel*）
3.  分配`UITextFieldDelegate`给文件所有者，也在 .h 文件中实现相同的委托
4.  使用这些代码行：

    ```
    - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
        NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
        [self updateTextLabelsWithText: newString];

        return YES;
    }

    -(void)updateTextLabelsWithText:(NSString *)string
    {
         [myLabel setText:string];
    } 
    ```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-03-23T08:21:44.603

只需处理“编辑更改”事件

```
[textField addTarget:self 
              action:@selector(editingChanged:)
    forControlEvents:UIControlEventEditingChanged]; 
```

和选择器：

```
-(void) editingChanged:(id)sender {
   // your code
} 
```

您可以手动执行此操作，也可以通过 CTRL 拖动“编辑更改”发送事件到您的 .h 来使用情节提要，为您创建 editorChanged 方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-26T08:27:17.977

Swift 与 addTarget Swift 2.0+

```
 titleTextField.addTarget(self, action: #selector(textFieldTyping), forControlEvents: .EditingChanged) 
```

并实施`selector`

```
func textFieldTyping(textField:UITextField)
{
    //Typing
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-05T17:27:23.893

**在 Swift 2.0+**

```
 class CheckInViewController: UIViewController, UITextFieldDelegate {

 override func viewDidLoad() {
    super.viewDidLoad()

    yourTextField.delegate = self

 }

 func textField(textField: UITextField!, shouldChangeCharactersInRange range: NSRange, replacementString string: String!) -> Bool {
    var updatedTextString : NSString = textField.text as NSString
    updatedTextString = updatedTextString.stringByReplacingCharactersInRange(range, withString: string)

    self.methodYouWantToCallWithUpdatedString(updatedTextString)
    return true
 }

} 
```

希望它可以帮助您快速开拓者

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-15T20:35:29.423

**在 Swift 3.0 中：**

其中一些解决方案落后于一个字符，或者用于早期版本的 Swift 和 Obj-C。这是我用于 Swift 3.0 的内容

在类中，我声明了一个占位符来存储文本。

```
var tempName = "" 
```

在 ViewDidLoad 我使用：

```
nameField.addTarget(self, action: #selector(typingName), for: .editingChanged) 
```

然后我做了一个函数，叫做：

```
 func typingName(textField:UITextField){

        if let typedText = textField.text {
            tempName = typedText
            print(tempName)
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-20T23:20:41.750

Swift 3.0+：这对我来说效果很好。

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    self.yourLabel.text = "\(textField.text ?? "")\(string)"
    return true
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-07T05:53:13.903

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
        if textField == yourTextFieldOutletName
        {
           if yourTextFieldOutletName.isEmpty == false
           {
             youtlabelname.text = yourTextFieldOutletName.text!
            }

        }

        return true

    }

func textViewDidEndEditing(_ textView: UITextView) {
       if textField == yourTextFieldOutletName
            {
               if yourTextFieldOutletName.isEmpty == false
               {
                 youtlabelname.text = yourTextFieldOutletName.text!
                }

            } 
    } 
```

# c++ - 提取运算符是否删除分隔符？

> ID：10363857
> 
> 赞同：2
> 
> 时间：2012-04-28T13:19:18.063
> 
> 标签：c++, input, extraction

据我了解，提取运算符>> 由空格分隔。提取运算符是否从流中删除分隔符？例如，假设我有文件

```
6
Foo
Bar 
```

和代码

```
ifstream fin(filename);
int x;
fin >> x; 
```

文件流是否仍然包含 6 之后的换行符（可能会弄乱后续的 getline 语句）？还是在提取过程中将其删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:34:26.533

未消耗的流部分保持不变。因此，后续调用`getline`将返回一个空行。

如果您不确定确切的文件内容，请尝试`cat -A filename`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:27:38.577

试试看。你可以做

```
ifstream fin(filename);
string x;
fin >> x;
cout<<x<<"foo"; 
```

你会注意到它；）

# c++ - 警告 C4180：应用于函数类型的限定符没有意义；忽略

> ID：10363858
> 
> 赞同：4
> 
> 时间：2012-04-28T13:19:33.287
> 
> 标签：c++, visual-studio, warnings, constants, return-value

我设置了一个编译器`/Za`选项来禁用语言扩展，以便编译器使用严格标准的 ISO C++。这是我收到以下警告的示例接口类

> 警告 C4180：应用于函数类型的限定符没有意义；忽略

这是关于函数返回类型中的 const 限定符，如果我删除 const，警告会消失，但我不想这样做，我想重新启用 lanqage 扩展。

我的问题是：这个警告合理吗？如果不是，那么我将使用 pragma 禁用警告，但在此之前我想确定这个警告是“误报”

因为下面的类是正确的 ANSI ISO C++ 不是吗？所以应该禁用警告？

```
 class IBet
    {
    public:
        IBet() { };
        virtual ~IBet() = 0 { };
        virtual const float parentChips() const = 0; // Warning C4180
        virtual const short parentChilds() const = 0; // Warning C4180
            // ...
    }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:21:39.343

这两个函数的返回值声明为`const`. 由于它是按值传递的，因此没有任何意义。您可以删除它，`const`因为它完全没有任何用途。

# ruby - 对于具有默认值的 Ruby 哈希，这是正确的行为吗？

> ID：10363873
> 
> 赞同：1
> 
> 时间：2012-04-28T13:21:03.180
> 
> 标签：ruby

```
hash = Hash.new(Hash.new([]))
hash[1][2] << 3

hash[1][2] # => [3]
hash # => {}
hash.keys # => []
hash.values # => [] 
```

这是怎么回事？Ruby 的隐藏数据 (1.9.3p125)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T13:28:30.247

> 这是怎么回事？Ruby 的隐藏数据 (1.9.3p125)

Ruby 既不隐藏数据也不隐藏其[文档](http://ruby-doc.org/core-1.9.3/Hash.html#method-c-new)。

`Hash`只要在散列中找不到键，就会返回您传递给构造函数的默认值。但是这个默认值永远不会自己实际存储到散列中。

要获得您想要的，您应该使用`Hash`带有块的构造函数并将默认值存储到自己的哈希中（在嵌套哈希的两个级别上）：

```
hash = Hash.new { |hash, key| hash[key] = Hash.new { |h, k| h[k] = [] } } 

hash[1][2] << 3

p hash[1][2]  #=> [3]
p hash        #=> {1=>{2=>[3]}}
p hash.keys   #=> [1]
p hash.values #=> [{2=>[3]}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:28:50.650

这很简单。如果将对象传递给 Hash 构造函数，它将成为该散列中所有缺失键的默认值。有趣的是这个值是可变的。观察：

```
hash = Hash.new(Hash.new([]))
# mutate default value for nested hash
hash[1][2] << 3

# default value in action
hash[1][2] # => [3]
# and again
hash[1][3] # => [3]
# and again
hash[1][4] # => [3]

# set a plain hash (without default value)
hash[1] = {}

# what? Where did my [3] go?
hash[1][2] # => nil

# ah, here it is!
hash[2][3] # => [3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T13:37:00.017

我在 irb 中尝试了这个。Seams Ruby 不会将元素标记为“可见”，除非通过 = 显式影响默认值。

```
hash = Hash.new(Hash.new([]))
hash[1] = Hash.new([])
hash[1][2] = [3]
hash
#=> {1=>{2=>[3]}} 
```

可能是一些设置者缺少这种“非默认”行为......

# android - Android sqlite数据插入问题

> ID：10363874
> 
> 赞同：0
> 
> 时间：2012-04-28T13:21:14.487
> 
> 标签：android, database, sqlite

我创建了一个表名为 tbl_customer 和 tbl_product 的数据库...我可以查看 tbl_customer 值但看不到 tbl_product 值。我使用 adb shell 来确认我的插入。谁能帮我解决这个问题

```
private void addProFromDB() {
        // TODO Auto-generated method stub

        ArrayList<String> results = new ArrayList<String>();
        SQLiteDatabase sampleDB = null;

        try {
            list = (ListView)findViewById(android.R.id.list);
            list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
            sampleDB = this.openOrCreateDatabase(SAMPLE_DB_NAME, 1, null);
            sampleDB.execSQL("create table tbl_product("
                    + "pro_id integer PRIMARY KEY autoincrement,"
                    + "pro_name text," + "pro_price integer);");
            sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAMES
                    + " Values ('1','Milk','60');");
            sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAMES
                    + " Values ('2','Sugar','70');");
            sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAMES
                    + " Values ('3','Oil','200');");
            Cursor c = sampleDB.query(SAMPLE_TABLE_NAMES, null, null, null, null, null,
                    null);
            char pro_nameColumnIndex = (char) c.getColumnIndexOrThrow("pro_name");
            int pro_priceColumnIndex = (int) c.getColumnIndexOrThrow("pro_price");

        } finally {
            if (sampleDB != null)
                sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAMES);
            sampleDB.close();
        }
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_checked, new ArrayList()));

        new AddStringTask().execute();
    } 
```

还请帮助我如何获取其主键并显示所选值...最好的问候....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:29:27.300

首先，考虑使用`insert()`on 方法`SQLiteDatabase`而不是通过 执行`INSERT`语句是一个好主意`execSQL()`，尤其是在您没有太多 SQL 经验的情况下。

其次，通常，一条`INSERT`语句列出了要插入的列，而您没有这样做。SQLite 可能支持您的语法，但它会使代码更加脆弱。

第三，使用`autoincrement`列，您不会像尝试那样分配自己的值。

第四，您将字符串值放入`integer`列中。SQLite 支持这一点，但不是通过将值实际转换为整数，而是将字符串本身存储在列中，这可能不是您想要的。

第五，`getColumnIndexOrThrow()`返回一个`int`，而不是一个`char`。

第六，`finally`假设`SAMPLE_TABLE_NAMES`设置为`tbl_product`. 如果这些值不相等，那么您将插入一个不存在的表并从中查询。

第七，`Cursor`一旦你`close()`的数据库在你的`finally`块中，你就死了。

这些的一些组合可能解释了“问题”。

# php - 登录 Facebook / Google PHP 冲突

> ID：10363875
> 
> 赞同：1
> 
> 时间：2012-04-28T13:21:32.230
> 
> 标签：php, authentication, oauth, google-api, facebook-login

作为大学作业的一部分，我正在尝试实现一种让用户使用 Google 和 Facebook 登录的方法。我的“使用 Google 登录”代码运行良好。然后我开始尝试实现我的“使用 Facebook 代码登录”。

```
<?php

//required files for Google+ login
require_once 'google-api-php-client/src/apiClient.php';
require_once 'google-api-php-client/src/contrib/apiPlusService.php';
//include this file containing specific app details (key, clientID, redirect etc) and get user details (image and name in this case)
include 'php/googleplus.php';
//required for facebook login
require 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxx',
  'secret' => 'xxxx',
));

// Get User ID
$user = $facebook->getUser();
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

?> 
```

………………………………………………………………………………………………………………

```
<?php if ($user): 
$fblogoutUrl = $facebook->getLogoutUrl();
?>
<a href="<?php echo $fblogoutUrl; ?>">Logout</a>
<?php else: 
$fbloginUrl = $facebook->getLoginUrl();
?>
<div>
Login using OAuth 2.0 handled by the PHP SDK:
<a href="<?php echo $fbloginUrl; ?>">Login with Facebook</a>
</div>
<?php endif ?>

<div id="login">
<!--Load the php code that contains the user login options for google-->
<?php
include 'php/userlogin.php';
?> 
```

据我所知，我根本没有改变代码 - 只添加了我自己的应用程序 ID、秘密和重定向。当我单击“使用 Facebook 登录”链接时，我收到以下错误消息：

```
**Fatal error**: Uncaught exception 'apiAuthException' with message 'Error fetching OAuth2 access token, message: 'invalid_grant'' in /Applications/MAMP/htdocs/www/Shared sites/LOGIN ASSIGNMENT/google-api-php-client/src/auth/apiOAuth2.php:105 Stack trace: #0 /Applications/MAMP/htdocs/www/Shared sites/LOGIN ASSIGNMENT/google-api-php-client/src/apiClient.php(138): apiOAuth2->authenticate(Array) #1 /Applications/MAMP/htdocs/www/Shared sites/LOGIN ASSIGNMENT/php/googleplus.php(19): apiClient->authenticate() #2 /Applications/MAMP/htdocs/www/Shared sites/Login Assignment/index.php(7): include('/Applications/M...') #3 {main} thrown in **/Applications/MAMP/htdocs/www/Shared sites/LOGIN ASSIGNMENT/google-api-php-client/src/auth/apiOAuth2.php** on line **105** 
```

它显然出于某种原因试图访问 Google php 文件。我没有足够的经验来诊断问题。我想知道有没有其他人遇到过这个错误，我将如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:51:01.947

您可以通过指定外部注销问题来解决此问题。你可以看看[这里](http://cacovsky.wordpress.com/2011/05/17/login-with-facebook-php-sdk-a-tutorial/)

了解详细信息。这是解决这个问题的一个很好的教程。

希望这可以帮助

对于 Google 登录，您可以使用 LightOpenID。从[此处下载](http://lightopenid.googlecode.com/files/lightopenid-0.6.tgz)

```
include 'openid.php';
$openid = new LightOpenID();
$openid->identity = 'google.com/accounts/o8/id';
$openid->required = array('namePerson/first', 'namePerson/last', 'contact/email');
$openid->returnUrl = 'your_return_url';
$googleLoginUrl = $openid->authUrl();
thats it
you can check if user logged in or not like
if ($openid->mode) { //User logged in} 
```

# android - 关于sqlite的insert语句返回的row_id的说明

> ID：10363884
> 
> 赞同：5
> 
> 时间：2012-04-28T13:22:16.597
> 
> 标签：android, sqlite

好的，我们[在这里](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)看到`SQLite`插入语句返回了一个名为`row id`.

插入时，我们知道它`SQLite`喜欢一个名为 ID 的主键列，如果插入的 ID 值为空，它将自动生成适当的值。

缺少的粘合剂是确认该方法`row id`返回的`SQLiteDatabase.insert()`实际上是为行的主键自动生成的值。（这不是甲骨文的情况......）

请问有人确认还是否认？

**解析度**

好的，所以从@sixfeetsix 发布的链接中：

> SQLite 表中的每个条目都有一个唯一的 64 位有符号整数键，称为“rowid”。rowid 始终可用作未声明的列...如果表具有 INTEGER PRIMARY KEY 类型的列，则该列是 rowid 的另一个别名。

然后他的`auto-increment`链接验证`row_id`和自动增量值将是相同的值。

这是一个包装，谢谢，伙计们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T13:47:08.363

[Android insert(...) 方法](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)返回：

> 新插入行的行 ID，如果发生错误，则为 -1

这可能会让初学者感到困惑，但[sqlite 中的行 ID](http://www.sqlite.org/c3ref/last_insert_rowid.html)要么是`integer primary key`字段，要么是在没有字段的情况下，是一个名为 ROWID 的 64 位未声明的列。

[因此，当您在自动增量字段](http://sqlite.org/autoinc.html)中插入 NULL 或无值时，将返回生成的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:49:14.037

它们是两个不同的东西。

返回的row_id`insert()`是插入行的唯一标识符，是SQLite内部使用的标识符。

另一方面，您可以在表中有一列表示您的业务键，声明：

```
_id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT 
```

因此 SQLite 将为您生成该列的值。

据我所知，SQLite 中没有像 SQL Server 的 SCOPE_IDENTITY() 那样的函数（它返回最后一个自动增量插入的 id）。

因此，如果您进行了插入并需要检索自动生成的 id，您可以执行以下操作：

```
SELECT seq FROM sqlite_sequence WHERE name='tableName' 
```

但请注意，这在并发场景中不是一种安全的方式。

# php - 以表格形式测试电子邮件？

> ID：10363885
> 
> 赞同：-2
> 
> 时间：2012-04-28T13:22:37.983
> 
> 标签：php, javascript, jquery, html

我正在处理即将推出的页面。在页面上，我要求用户通过一个表单使用他们的电子邮件进行注册，然后通过电子邮件将他们的电子邮件发送给我。我不确定如何确保他们放入表单的数据是电子邮件（以防止垃圾邮件）。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:23:34.660

使用 jquery validate 真的好用[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:28:39.910

```
user following code as primary step to validate the email input 
if(document.getElementById('Email').value=="")
        {
            document.getElementById('Email_Msg').innerHTML="Please Enter EmailId";
            document.getElementById('Email').focus()
            return false;
        }
        else
        {   
            if(document.getElementById('Email').value.match(/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-Z0-9]{2,4}$/))
            {
                document.getElementById('Email_Msg').innerHTML="";
            }
            else
            {
                document.getElementById('Email_Msg').innerHTML="Enter Valid Email-Id";  
                return false;
                document.getElementById('Email').value="";

            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:42:23.697

您不应依赖客户端验证来阻止垃圾邮件和其他不需要的注册。尽管您可以使用 jQuery validate 使站点对访问者更加 UI 友好，但向他们提供一个简洁的消息，表明输入的电子邮件地址无效，并且他们应该查看该字段。

但是垃圾邮件机器人不会关心来自 jQuery 的验证，它只会发布给定的字段。这就是为什么您需要在服务器端验证数据的原因。

有几种使用正则表达式验证电子邮件地址的方法，但并非所有方法都是可靠的。查看[http://www.linuxjournal.com/article/9585](http://www.linuxjournal.com/article/9585)这篇文章解释了很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T13:29:05.937

客户端 js 是不够的，你还应该使用 PHP 的[filter_var](http://php.net/manual/en/function.filter-var.php)进行验证：

```
<?php 
if(filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)){
    $from=$_POST['email'];
}else{
    $error['email_to']='Email Invalid!';
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T13:55:48.937

只需对您的电子邮件进行单行验证。代码可以写成如下。

```
<?php

if(empty($_POST['email']))
{
$error[]="Enter Email ID";
}
else
{
if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL))
{
$error[]= "Not A Valid Email ID.";
}
}

//pass these errors to display ana error message to user.
foreach($error as $i)
{
$message = $i."<br />";
}
?> 
```

## 在您的网页中的某个位置使用此代码。

```
<?php
echo $message;
?> 
```

另外使用邮件功能和mysql数据库（或其他，如果你正在使用）发送邮件来验证他们的电子邮件ID。您可以阻止不需要的用户注册。并且还使用验证码来防止数据库泛滥。

我认为这有帮助。如果有任何疑问在这里回复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-28T13:42:26.100

如果您想防止垃圾邮件，仅确保电子邮件字段填写有电子邮件字段是不够的。考虑使用像[ReCaptcha这样的验证码](http://www.google.com/recaptcha)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-28T14:42:58.773

使用 php gd2 库创建您自己的验证码。它既简单又高效。

# mysql - Zend 框架顺序在组之前

> ID：10363886
> 
> 赞同：1
> 
> 时间：2012-04-28T13:22:46.723
> 
> 标签：mysql, sorting, zend-framework, group-by

任何人都有一个示例如何在 zend 分页器适配器中使用 leftjoin 进行分组之前订购？

```
new Zend_Paginator_Adapter_DbSelect($this->db->select()
->from(array( 'a' => $this->prefix.'contest' ), array('id'))
->joinLeft(array( 'b' => $this->prefix.'logo_to_contest'),'a.id=b.contest_id', array('img'))
->group('a.id')
->order('a.end','a.date_start DESC','b.id RAND()')
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T19:56:03.917

来自 mysql 手册

> 一般来说，使用的子句必须完全按照语法描述中显示的顺序给出。例如，HAVING 子句必须在任何 GROUP BY 子句之后和任何 ORDER BY 子句之前。例外是 INTO 子句可以出现在语法描述中，也可以紧跟在 select_expr 列表之后。

并且在[语法描述](http://dev.mysql.com/doc/refman/4.1/en/select.html)中group 位于 order 之前，因此它与 zend 无关，它是 mysql 要求您将 group 放在 order 之前。

但是，要解决此问题并在订购后进行分组，您可以使用带有顺序的子查询进行选择，然后在新的选择上分组，例如：

```
$subselect = $db->select()
->from(array( 'a' => $this->prefix.'contest' ), array('id'))
->joinLeft(array( 'b' => $this->prefix.'logo_to_contest'),'a.id=b.contest_id', array())
->order('a.end','a.date_start DESC','b.id RAND()');

$select = $db->select()->from(a(array( 'a' => $this->prefix.'contest' ), array('id'))
->joinLeft(array( 'b' => $this->prefix.'logo_to_contest'),'a.id=b.contest_id', array('img'))
->where("a.id in ($subselect)")
->group('a.id'); 
```

# iphone - 点击按钮时 UITableView 重新加载数据

> ID：10363888
> 
> 赞同：3
> 
> 时间：2012-04-28T13:22:55.203
> 
> 标签：iphone, xcode, uitableview

当我按下按钮时，我想从 uitableview 重新加载数据。

例如：如果我按下按钮 1，那么我将呈现 id 为 1 的数据，如果我按下按钮 2，我将呈现 id 为 2 的数据，并且不显示之前的数据。

任何人都知道如何，我使用 [tableview reloadData]; 不工作，如果我移动屏幕并返回到在表格视图中显示数据的屏幕，会发生变化吗？

谢谢之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:25:46.090

使用此代码。

```
- (void)viewDidAppear:(BOOL)animated 
{
    [super viewDidAppear:animated];
    [self.tableView reloadData];
} 
```

如果在您单击按钮时被触发，只需写下这个

```
-(IBAaction) buttonclick
{
   [self.tableView reloadData];
   // your code...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:16:59.000

Follow This link, perhaps it will help you.

[stackoverflow.com/questions/7290340/xcode-tableview-showing-to-different-arrays-one-at-a-time-problem](http://xcode-tableview-showing-to-different-arrays-one-at-a-time-problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T15:27:20.870

你不应该创建 UILabel *labelMessage; 每次您的应用程序调用 tableView:cellForRowAtIndexPath: 时和其他变量。而是尝试对所有变量执行此操作：

```
if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        UILabel *labelMessage;
        labelMessage = [[UILabel alloc] initWithFrame:CGRectZero];
        labelMessage.backgroundColor = [UIColor clearColor];
        labelMessage.tag = 5;
        labelMessage.numberOfLines = 0;
        labelMessage.lineBreakMode = UILineBreakModeWordWrap;
        labelMessage.font = [UIFont systemFontOfSize:14.0];
        labelMessage.shadowOffset = CGSizeMake(0, 1);
        labelMessage.shadowColor = [UIColor whiteColor];
        labelMessage.backgroundColor = [UIColor clearColor];
        labelMessage.textColor = [UIColor colorWithRed:136.00/255.00 green:91.00/255.00 blue:14.00/255.00 alpha:1.0];

        UIView *message = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, cell.frame.size.width, cell.frame.size.height)];
        [message addSubview:labelMessage];
}
UILabel *labelMessage = (UILabel *)[cell viewWithTag:3];
/* Set textMessage value here */
labelMessage.text = textMessage;
return cell; 
```

# entity-framework-4.1 - 如何将实体的成员对象的属性映射到EF Code First中的表字段

> ID：10363889
> 
> 赞同：1
> 
> 时间：2012-04-28T13:23:11.730
> 
> 标签：entity-framework-4.1, ef-code-first, poco, entity-framework-4.3

我使用EF Code First，并希望将实体类Person映射到实体表personTable，如下所示，

我有一个实体类

```
public class Person
{
    public Guid Id
    {
        get;
        set;
    }

    public string Email
    {
        get;
        set;
    }

    public int Property
    {
        get;
        set;
    }

    public Name Name
    {
        get;
        set;
    }
} 
```

和一个属性名称类型的类

```
public class Name
{
    public string FirstName
    {
        get;
        set;
    }

    public string FullName
    {
        get
        {
            return string.Format("{0} {1} {2}", FirstName, MiddleName, LastName);
        }
    }

    public string LastName
    {
        get;
        set;
    }

    public string MiddleName
    {
        get;
        set;
    }
} 
```

我想将人员类映射到人员表如下

```
Person.Id => personTable.ID
Person.Name.FirstName ->personTable.FirstName
Person.Name.MiddleName => personTable.MiddleName
Person.Name.LastName => personTable.LastName
and so on.... 
```

`Person.Name`类型的对象在哪里`Name Class`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:35:20.897

`Name`是一个复杂类型，你必须 EF 告诉这一点，否则它将被`Name`视为一个实体和`Person.Name`一个导航属性。使用 Fluent API 进行映射：

```
modelBuilder.ComplexType<Name>();

modelBuilder.Entity<Person>()
    .Property(p => p.Name.FirstName)
    .HasColumnName("FirstName");

modelBuilder.Entity<Person>()
    .Property(p => p.Name.MiddleName)
    .HasColumnName("MiddleName");

modelBuilder.Entity<Person>()
    .Property(p => p.Name.LastName)
    .HasColumnName("LastName"); 
```

# wolfram-mathematica - Mathematica 中的虚拟变量数组

> ID：10363890
> 
> 赞同：0
> 
> 时间：2012-04-28T13:23:12.020
> 
> 标签：wolfram-mathematica

假设您要集成一个表达式，该表达式取决于 n 个变量和 n 维中的 n，n 也可以是可变的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T16:38:05.230

像这样的东西？

```
multyIntegrate[fun_, n_Integer] :=
 With[{x = Sequence @@ Table[Unique[mi], {n}]}, Integrate[fun[x], x]]

multyIntegrate[g, 3] 
```

![数学图形](../Images/11aa5c9461ee7b4df68f67eb419534b8.png)

```
f[i___] := Total[{i}.{i}]

multyIntegrate[f, 3] 
```

![数学图形](../Images/7242e7f9e00ce1f401c2a18c806956d1.png)

# methods - 求解线性方程组的并行迭代算法

> ID：10363891
> 
> 赞同：3
> 
> 时间：2012-04-28T13:23:21.710
> 
> 标签：methods, parallel-processing, mpi, openmp, iteration

有人知道用于求解线性方程组（例如使用 MPI 或 OpenMP）的快速迭代方法（bicgstab、CG 等）的并行实现的任何库或现成源代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T17:07:52.850

[PetSC](http://www.mcs.anl.gov/petsc/)是一个很好的例子（串行和 MPI，以及包含或作为外部库接口提供的大型线性和非线性求解器库）。 [Trillinos](http://trilinos.sandia.gov/CapabilityWebpages/LinearEigenCapabilities/overview.html)是另一个例子，但它是一个更广泛的项目，并且不像 PetSC 那样完美集成。 [Aztec](http://acts.nersc.gov/aztec/index.html)有许多求解器，[Hypre](http://acts.nersc.gov/hypre/)也是如此，它是混合的 (MPI+OpenMP)。

这些都是基于 MPI 的，至少部分是基于 MPI 的。我不知道太多支持 OpenMP 的，虽然谷歌建议[Lis](http://www.ssisc.org/lis/)，我不熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T15:27:13.053

[多核和集群系统的并行编程](https://rads.stackoverflow.com/amzn/click/com/364204817X)第 7 章包含线性方程组的算法，以及源代码 (MPI)。

# javascript - 在纯 Python 环境中执行 JavaScript

> ID：10363902
> 
> 赞同：5
> 
> 时间：2012-04-28T13:24:15.763
> 
> 标签：javascript, python, google-app-engine

我想在纯 Python 环境（Google AppEngine）中运行现有的简单（没有特殊技巧）JavaScript 代码（几千行）。

代码在 PyV8 上运行良好（但它不是纯 Python）。

PyJON 是否足够成熟？

我可以在 Python 中定义自定义对象并在 JavaScript 中使用它们（比如在 PyV8 中）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:36:37.663

您可以使用[gae-init](http://gae-init.appspot.com)，您可以在其中访问 JSON 格式的数据存储对象。

# text - 文本文件到快板中的位图

> ID：10363904
> 
> 赞同：1
> 
> 时间：2012-04-28T13:24:24.787
> 
> 标签：text, bitmap, drawing, allegro, allegro5

您好，我目前正在处理的是从文本文件中获取输入，然后将其转换为位图并将其保存到文件中的能力。

输入如下所示：

```
########
#      #
######## 
```

我想用 allegro 来绘制它，而不是 # 会有指定大小的像素。每个 # 应该代表一个图块（10x10 像素）。所以最终的结果看起来像这样

[链接到图像](http://i48.tinypic.com/ayayxx.jpg)

我实际上是使用以下代码绘制的：

```
 for (int i = 0; i < 80; i++){
        for (int j = 0; j < 10; j++){
            al_draw_pixel(i, j, al_map_rgb(0, 0, 0));
        }
    }
    for (int i = 0; i < 10; i++){
        for (int j = 10; j < 20; j++){
            al_draw_pixel(i, j, al_map_rgb(0, 0, 0));
        }
    }
    for (int i = 70; i < 80; i++){
        for (int j = 10; j < 20; j++){
            al_draw_pixel(i, j, al_map_rgb(0, 0, 0));
        }
    }
    for (int i = 0; i < 80; i++){
        for (int j = 20; j < 30; j++){
            al_draw_pixel(i, j, al_map_rgb(0, 0, 0));
        }
    } 
```

是的，这很糟糕，那么我如何通过一个独立于文本文件的通用程序来实现类似的效果？感谢您的任何建议。

注意：唯一允许的标题是 allegro5/allegro.h 和 allegro5/allegro_image.h

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:28:01.833

要使用 Allegro 5 绘制图像，您需要执行以下操作：

```
ALLEGRO_BITMAP *bmp = al_create_bitmap(640, 480);
al_set_target_bitmap(bmp); 
```

现在您的所有绘图操作都将在图像上进行。稍后保存：

```
al_save_bitmap("somefile.bmp", bmp); 
```

如果您的图像库启用了对它的支持，您还可以使用`png`and作为扩展。`jpg`

使用这些函数来读取文本文件：

*   `al_fopen`
*   `al_fgetc`
*   `al_feof`
*   `al_fclose`

设置`int x`和`y`为零。您将一直循环到文件末尾。每次迭代递增`x`一。如果到达换行符 ( `\n`)`y`则加一并设置`x`为零。（您应该忽略`\r`字符。）

现在，根据读取的字符，绘制一个图块：

```
ALLEGRO_BITAMP *tile_to_draw = NULL;
if (c == '#')
   tile_to_draw = bmp1;
else if (c == ' ')
   tile_to_draw = bmp2;

if (tile_to_draw)
   al_draw_bitmap(tile_to_draw, x * 10, y * 10, 0); 
```

当然，有比一系列`if`s 更好的方法将字符映射到图块，但上述方法有效，应该足以帮助您完成作业。

# c# - 同时保存文件和上传

> ID：10363913
> 
> 赞同：1
> 
> 时间：2012-04-28T13:25:38.277
> 
> 标签：c#

我正在编写一个应用程序，它每 1 秒根据时间戳创建文件，然后将它们移动到另一个文件夹，然后将它们作为帖子发送到将它们保存在文件夹中的 web 服务。运行生成函数时，它生成成功。运行上传功能时，它会成功上传它们。但是当同时运行它们和 backgroundworker 组件时，第一个运行良好，但是上传机制告诉 em 文件是由另一个进程打开的。我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:19:36.630

处理实现 IDisposable 接口的类（例如文件流类）时，一个好的做法是将这些类的用法包装在一个 unsing 语句中。[来自 MSDN](http://msdn.microsoft.com/pt-br/library/system.io.filestream.aspx)：

```
 //Create the file.
    using (FileStream fs = File.Create(path))
    {
        AddText(fs, "This is some text");
        AddText(fs, "This is some more text,");
        AddText(fs, "\r\nand this is on a new line");
        AddText(fs, "\r\n\r\nThe following is a subset of characters:\r\n");

        for (int i=1;i < 120;i++)
        {
            AddText(fs, Convert.ToChar(i).ToString());

        }
    } 
```

您应该注意的另一件事是多线程同步。也许您的“上传”后台工作人员正在尝试在“生成文件”后台工作人员有时间完成创建文件之前访问该文件。

# php - 检查页面是否返回 true 或 false

> ID：10363915
> 
> 赞同：2
> 
> 时间：2012-04-28T13:25:52.677
> 
> 标签：php, file-get-contents

我正在尝试验证 Minecraft 用户名是否已付费。

通过在 URL 末尾输入用户名，它返回 true 或 false。

```
$input = 'Notch';

  function checkPlayer($player) {
    $mcURL = 'http://www.minecraft.net/haspaid.jsp?user=';
    $auth = file_get_contents($mcURL . $player);
    if ($auth === true) {
      echo $player. ' is valid';
    } else {
      echo $player. ' is not valid';
    }
  }

  checkPlayer($input); 
```

但它不会返回 true。通过[访问 http://www.minecraft.net/haspaid.jsp?user=Notch](http://www.minecraft.net/haspaid.jsp?user=Notch)页面，它确实返回了 true。如何正确检查？我认为`file_get_contents`在这个问题上使用错误的功能。不过我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:30:31.117

改变这一行：

```
if ($auth === true) { 
```

和

```
if (trim($auth) == "true") { 
```

# java - XmlElementWrapper 和附加的奇怪值

> ID：10363916
> 
> 赞同：1
> 
> 时间：2012-04-28T13:25:55.143
> 
> 标签：java, xml, jaxb

在我的代码中，我有这个 bean：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.NONE)
public class Data implements Serializable {

@XmlAttribute
private String _name;

@XmlElementWrapper(name = "statuses")
@XmlElement(name="status")
    private List<Boolean> _statuses;

public String getName() {
    return _name;
}

public void setName(String name) {
    _name = name;
}

    public List<Boolean> getStatuses() {
        return _statuses;
    }

    public void setStatuses(List<Boolean> statuses) {
        _statuses = statuses;
    }

 ....

} 
```

这是编组 bean 的代码：

```
Writer w = null;
    try {
        final JAXBContext context = JAXBContext.newInstance(Data.class);
        final Marshaller m = context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        w = new FileWriter("file.xml");
        m.marshal(obj, w);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try { w.close();}
        catch (Exception e) {}
    } 
```

我期望的是：

```
<data name="data-test">
<statuses>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
</statuses>
...
</data> 
```

但我得到了：

```
<data name="data-test">
<statuses>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
    <status>true</status>
</statuses>

// strange repetition
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>
<statuses>true</statuses>

// attribute as separated element
<name>data-test</name>
...
</data> 
```

我怎样才能避免那种奇怪的重复呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:35:34.427

我的猜测是访问类型不起作用。你试过了`XmlAccessType.FIELD`吗？另外，请确保您已经正确编译了您的类并且您的类路径设置正确（也许您有一个旧类从较早的测试中得到？）。

更新：

您可以尝试显式添加`@XmlTransient`到 getter/setter 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:45:57.340

它看起来像 JDK 1.6.24 的内置 jaxb 中的错误

# c++ - Qt：无法使用 QProcess 启动 Windows 控制台

> ID：10363918
> 
> 赞同：4
> 
> 时间：2012-04-28T13:25:59.540
> 
> 标签：c++, qt, qprocess

QProcess 根本不显示黑色控制台窗口。

这是我使用的代码：

```
QProcess*p=new QProcess(this);
p->start("cmd.exe"); 
```

将 cmd.exe 替换为 calc.exe 会成功启动计算器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T13:53:54.303

试试这个：

```
QProcess::startDetached("cmd.exe"); 
```

# linux - 如何 gzip bash 中所有子目录中的所有文件

> ID：10363921
> 
> 赞同：24
> 
> 时间：2012-04-28T13:26:20.790
> 
> 标签：linux, bash, shell, loops, gzip

我想在我当前位置的子目录中迭代并分别 gzip 每个文件。对于压缩目录中的文件，我使用

```
for file in *; do gzip "$file"; done 
```

但这仅适用于当前目录，而不适用于当前目录的子目录。如何重写上述语句，以便它也压缩所有子目录中的文件？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-28T13:35:42.540

不需要循环或任何比`find`and更多的东西`gzip`：

```
find . -type f ! -name '*.gz' -exec gzip "{}" \; 
```

这将查找当前目录中及其下方名称不以`.gz`扩展名结尾的所有常规文件（即所有尚未压缩的文件）。它单独调用`gzip`每个文件。

* * *

编辑，基于来自的评论`user unknown`：

花括号 ( `{}`) 被替换为文件名，该文件名作为一个单词直接传递给以下命令`-exec`，如您在此处看到的：

```
$ touch foo
$ touch "bar baz"
$ touch xyzzy
$ find . -exec echo {} \;

./foo
./bar baz
./xyzzy 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-03-06T12:41:41.870

我更喜欢`gzip -r ./`哪个做同样的事情但更短。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-28T13:34:04.667

```
find . -type f | while read file; do gzip "$file"; done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-08T22:31:55.293

我不能评论最上面的帖子（还......），但我在“find”的手册页中读到 -execDir 比 -exec 更安全，因为该命令是在找到匹配项的子目录中完成的，而不是比运行“查找”的父目录。

如果有人想使用正则表达式来定位要压缩的子目录中的特定文件，我建议使用

```
find ./ -type f -name 'addRegexHere' -execdir gzip -k "{}" \; 
```

如果您不需要正则表达式，请坚持上面的递归 gzip 调用（或下面，如果我获得任何牵引力哈哈）

[资源](https://man7.org/linux/man-pages/man1/find.1.html)

# ruby-on-rails - Rails，如何从下拉列表中传递选定的值，与表单中的其他值相同

> ID：10363922
> 
> 赞同：2
> 
> 时间：2012-04-28T13:26:25.797
> 
> 标签：ruby-on-rails, drop-down-menu, formhelper

我有一个表格供用户上传带有名称和描述等其他信息的图片。我有两个数据库表：一个是`albums`，另一个是`photos`. 在照片表中有一个名为`album_id`将照片连接到相册的字段。

```
<%= form_for(@photo, :html => { :multipart => true }) do |f| %>
  <div>
    <div class='form_text'> Add Photo </div>
    <%= f.file_field :image %>
  </div>
  <div>
    <div class='form_text'> Name </div>
    <%= f.text_field :name %>
  </div>
  <div>
    <div class='form_text'> Description </div>
    <%= f.text_field :description %>
  </div>
  <div>
    <%= collection_select(:album, :album_id, Album.all, :id, :name, :prompt => true)  %>
  </div>
  <div>
    <%= f.submit 'Upload' %>
  </div> 
```

所以我的问题是我如何传递`album_id`与其他值相同的选定值。也许我不够清楚，我认为选择没有添加到f对象中，所以当点击上传时，当值传递时，名称、描述和照片作为一个对象传入，而`album_id`作为另一个对象传递。怎样才能使选择变成 f 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:13:59.303

我认为应该是

```
<%= collection_select(:photo, :album_id, Album.all, :id, :name, :prompt => true) %> 
```

所以它会生成一个`select`带有 id 的`photo[album_id]`，作为你的其他字段（[doc](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)）。

# java - 最简单的扑克手评估算法

> ID：10363927
> 
> 赞同：28
> 
> 时间：2012-04-28T13:27:04.847
> 
> 标签：java, r, algorithm, data-structures, poker

我正在考虑 . 中的扑克手（5 张牌）评估`Java`。现在我正在寻找简单和清晰，而不是性能和效率。我可能可以编写一个“幼稚”的算法，但它需要大量代码。

我还看到了一些扑克评估库，它们使用散列和按位运算，但它们看起来相当复杂。

扑克手评估的“最干净和最简单”的算法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-12-21T05:41:36.230

这是一个非常简短但完整的基于直方图的 Python (2.x) 中的 5 张扑克计分函数。如果转换为 Java，它将变得相当长。

```
def poker(hands):
    scores = [(i, score(hand.split())) for i, hand in enumerate(hands)]
    winner = sorted(scores , key=lambda x:x[1])[-1][0]
    return hands[winner]

def score(hand):
    ranks = '23456789TJQKA'
    rcounts = {ranks.find(r): ''.join(hand).count(r) for r, _ in hand}.items()
    score, ranks = zip(*sorted((cnt, rank) for rank, cnt in rcounts)[::-1])
    if len(score) == 5:
        if ranks[0:2] == (12, 3): #adjust if 5 high straight
            ranks = (3, 2, 1, 0, -1)
        straight = ranks[0] - ranks[4] == 4
        flush = len({suit for _, suit in hand}) == 1
        '''no pair, straight, flush, or straight flush'''
        score = ([1, (3,1,1,1)], [(3,1,1,2), (5,)])[flush][straight]
    return score, ranks

 >>> poker(['8C TS KC 9H 4S', '7D 2S 5D 3S AC', '8C AD 8D AC 9C', '7C 5H 8D TD KS'])
 '8C AD 8D AC 9C' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-04T21:40:44.440

查找表是解决问题最直接和最简单的方法，也是最快的。诀窍是管理表的大小并保持使用模式足够简单以非常快速地处理（[时空权衡](https://en.wikipedia.org/wiki/Space%E2%80%93time_tradeoff)）。显然，从理论上讲，您可以对可以握住的每只手进行编码并进行一系列评估，然后 --poof-- 一个表查找就完成了。不幸的是，这样的表对于大多数机器来说是巨大的并且难以管理，并且总是会让你在内存被大量换出时颠簸磁盘。

所谓的二加二解决方案是一张 10M 的大牌桌，但实际上涉及为手中的每张牌查找一张牌桌。您不太可能找到更快、更容易理解的算法。

其他解决方案涉及更多压缩表和更复杂的索引，但它们很容易理解并且非常快（尽管比 2+2 慢得多）。这是您看到有关散列等语言的地方 - 将表大小减小到更易于管理的大小的技巧。

在任何情况下，查找解决方案都比 histogram-sort-dance-on-your-head-compare-special-case-and-by-the-way-was-it-a-flush 解决方案快几个数量级，几乎没有其中值得一看。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-22T10:20:26.807

您实际上不需要任何高级功能，都可以按位完成：（来源： http: [//www.codeproject.com/Articles/569271/A-Poker-hand-analyzer-in-JavaScript-using-bit-数学](http://www.codeproject.com/Articles/569271/A-Poker-hand-analyzer-in-JavaScript-using-bit-math)）

*（这实际上是用 JavaScript 编写的，但是如果需要，您可以从 Java 中评估 JavaScript，所以这应该不是问题。此外，它尽可能短，所以即使是为了说明方法......） ：*

首先，你将你的牌分成两个数组：等级 (cs) 和花色 (ss)，为了表示花色，你将使用 1、2、4 或 8（即 0b0001、0b0010、...）：

```
var J=11, Q=12, K=13, A=14, C=1, D=2, H=4, S=8; 
```

现在这是魔术：

```
function evaluateHand(cs, ss) {
    var pokerHands = ["4 of a Kind", "Straight Flush","Straight","Flush","High Card","1 Pair","2 Pair","Royal Flush", "3 of a Kind","Full House"];

    var v,i,o,s = 1 << cs[0] | 1 << cs[1] | 1 << cs[2] | 1 << cs[3] | 1 << cs[4];
    for (i = -1, v = o = 0; i < 5; i++, o = Math.pow(2, cs[i] * 4)) {v += o * ((v / o & 15) + 1);}
    v = v % 15 - ((s / (s & -s) == 31) || (s == 0x403c) ? 3 : 1);
    v -= (ss[0] == (ss[1] | ss[2] | ss[3] | ss[4])) * ((s == 0x7c00) ? -5 : 1);
    return pokerHands[v];
} 
```

用法：

```
evaluateHand([A,10,J,K,Q],[C,C,C,C,C]); // Royal Flush 
```

现在它所做的（非常简单）是当有 2 时将 1 放入**s 的**第 3 位，当有 3 时放入第 4 位，依此类推，所以对于上面的示例**s**看起来像这样：

**0b111110000000000**

对于 [A,2,3,4,5] 它看起来像这样

**0b100 0000 0011 1100**

等等

**v**使用 4 位来记录同一张牌的多次出现，所以它有 52 位长，如果你有 3 个 A 和 2 个 K，它的 8 个 MSB 位如下所示：

**0111 0011 ...**

最后一行然后检查同花顺或同花顺或皇家同花顺 (0x7c00)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-07T02:17:35.383

这是我用来帮助最初填充查找表的五张牌比较的简单方法：

*   [https://gist.github.com/gdejohn/8293321#file-hand-java](https://gist.github.com/gdejohn/8293321#file-hand-java)

我没有尽可能简洁，而是优先考虑类型安全和清晰、自记录的代码。如果你不熟悉我使用的 Guava 类型，你可以浏览他们的[文档](http://docs.guava-libraries.googlecode.com/git-history/v16.0/javadoc/index.html)。

我将在此处包含代码（减去底部枚举常量的静态导入），尽管在答案中舒适地查看确实太长了。

```
import static com.google.common.base.Preconditions.checkArgument;
import static com.google.common.collect.Ordering.from;
import static com.google.common.collect.Ordering.natural;
import static java.util.Comparator.comparing;
import static java.util.Comparator.comparingInt;

import java.util.Comparator;
import java.util.EnumSet;
import java.util.LinkedList;
import java.util.Set;
import java.util.function.Function;

import com.google.common.collect.EnumMultiset;
import com.google.common.collect.Multiset;
import com.google.common.collect.Multiset.Entry;
import com.google.common.collect.Ordering;

public class Hand implements Comparable<Hand> {
    public final Category category;

    private final LinkedList<Rank> distinctRanks = new LinkedList<>();

    public Hand(Set<Card> cards) {
        checkArgument(cards.size() == 5);
        Set<Suit> suits = EnumSet.noneOf(Suit.class);
        Multiset<Rank> ranks = EnumMultiset.create(Rank.class);
        for (Card card : cards) {
            suits.add(card.suit);
            ranks.add(card.rank);
        }
        Set<Entry<Rank>> entries = ranks.entrySet();
        for (Entry<Rank> entry : byCountThenRank.immutableSortedCopy(entries)) {
            distinctRanks.addFirst(entry.getElement());
        }
        Rank first = distinctRanks.getFirst();
        int distinctCount = distinctRanks.size();
        if (distinctCount == 5) {
            boolean flush = suits.size() == 1;
            if (first.ordinal() - distinctRanks.getLast().ordinal() == 4) {
                category = flush ? STRAIGHT_FLUSH : STRAIGHT;
            }
            else if (first == ACE && distinctRanks.get(1) == FIVE) {
                category = flush ? STRAIGHT_FLUSH : STRAIGHT;
                // ace plays low, move to end
                distinctRanks.addLast(distinctRanks.removeFirst());
            }
            else {
                category = flush ? FLUSH : HIGH_CARD;
            }
        }
        else if (distinctCount == 4) {
            category = ONE_PAIR;
        }
        else if (distinctCount == 3) {
            category = ranks.count(first) == 2 ? TWO_PAIR : THREE_OF_A_KIND;
        }
        else {
            category = ranks.count(first) == 3 ? FULL_HOUSE : FOUR_OF_A_KIND;
        }
    }

    @Override
    public final int compareTo(Hand that) {
        return byCategoryThenRanks.compare(this, that);
    }

    private static final Ordering<Entry<Rank>> byCountThenRank;

    private static final Comparator<Hand> byCategoryThenRanks;

    static {
        Comparator<Entry<Rank>> byCount = comparingInt(Entry::getCount);
        Comparator<Entry<Rank>> byRank = comparing(Entry::getElement);
        byCountThenRank = from(byCount.thenComparing(byRank));
        Comparator<Hand> byCategory = comparing((Hand hand) -> hand.category);
        Function<Hand, Iterable<Rank>> getRanks =
                (Hand hand) -> hand.distinctRanks;
        Comparator<Hand> byRanks =
                comparing(getRanks, natural().lexicographical());
        byCategoryThenRanks = byCategory.thenComparing(byRanks);
    }

    public enum Category {
        HIGH_CARD,
        ONE_PAIR,
        TWO_PAIR,
        THREE_OF_A_KIND,
        STRAIGHT,
        FLUSH,
        FULL_HOUSE,
        FOUR_OF_A_KIND,
        STRAIGHT_FLUSH;
    }

    public enum Rank {
        TWO,
        THREE,
        FOUR,
        FIVE,
        SIX,
        SEVEN,
        EIGHT,
        NINE,
        TEN,
        JACK,
        QUEEN,
        KING,
        ACE;
    }

    public enum Suit {
        DIAMONDS,
        CLUBS,
        HEARTS,
        SPADES;
    }

    public enum Card {
        TWO_DIAMONDS(TWO, DIAMONDS),
        THREE_DIAMONDS(THREE, DIAMONDS),
        FOUR_DIAMONDS(FOUR, DIAMONDS),
        FIVE_DIAMONDS(FIVE, DIAMONDS),
        SIX_DIAMONDS(SIX, DIAMONDS),
        SEVEN_DIAMONDS(SEVEN, DIAMONDS),
        EIGHT_DIAMONDS(EIGHT, DIAMONDS),
        NINE_DIAMONDS(NINE, DIAMONDS),
        TEN_DIAMONDS(TEN, DIAMONDS),
        JACK_DIAMONDS(JACK, DIAMONDS),
        QUEEN_DIAMONDS(QUEEN, DIAMONDS),
        KING_DIAMONDS(KING, DIAMONDS),
        ACE_DIAMONDS(ACE, DIAMONDS),

        TWO_CLUBS(TWO, CLUBS),
        THREE_CLUBS(THREE, CLUBS),
        FOUR_CLUBS(FOUR, CLUBS),
        FIVE_CLUBS(FIVE, CLUBS),
        SIX_CLUBS(SIX, CLUBS),
        SEVEN_CLUBS(SEVEN, CLUBS),
        EIGHT_CLUBS(EIGHT, CLUBS),
        NINE_CLUBS(NINE, CLUBS),
        TEN_CLUBS(TEN, CLUBS),
        JACK_CLUBS(JACK, CLUBS),
        QUEEN_CLUBS(QUEEN, CLUBS),
        KING_CLUBS(KING, CLUBS),
        ACE_CLUBS(ACE, CLUBS),

        TWO_HEARTS(TWO, HEARTS),
        THREE_HEARTS(THREE, HEARTS),
        FOUR_HEARTS(FOUR, HEARTS),
        FIVE_HEARTS(FIVE, HEARTS),
        SIX_HEARTS(SIX, HEARTS),
        SEVEN_HEARTS(SEVEN, HEARTS),
        EIGHT_HEARTS(EIGHT, HEARTS),
        NINE_HEARTS(NINE, HEARTS),
        TEN_HEARTS(TEN, HEARTS),
        JACK_HEARTS(JACK, HEARTS),
        QUEEN_HEARTS(QUEEN, HEARTS),
        KING_HEARTS(KING, HEARTS),
        ACE_HEARTS(ACE, HEARTS),

        TWO_SPADES(TWO, SPADES),
        THREE_SPADES(THREE, SPADES),
        FOUR_SPADES(FOUR, SPADES),
        FIVE_SPADES(FIVE, SPADES),
        SIX_SPADES(SIX, SPADES),
        SEVEN_SPADES(SEVEN, SPADES),
        EIGHT_SPADES(EIGHT, SPADES),
        NINE_SPADES(NINE, SPADES),
        TEN_SPADES(TEN, SPADES),
        JACK_SPADES(JACK, SPADES),
        QUEEN_SPADES(QUEEN, SPADES),
        KING_SPADES(KING, SPADES),
        ACE_SPADES(ACE, SPADES);

        public final Rank rank;

        public final Suit suit;

        Card(Rank rank, Suit suit) {
            this.rank = rank;
            this.suit = suit;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-02T20:12:42.743

这是 dansalmo 程序的修改版本，适用于手持式：

```
def holdem(board, hands):
    scores = [(evaluate((board + ' ' + hand).split()), i) for i, hand in enumerate(hands)]
    best = max(scores)[0]
    return [x[1] for x in filter(lambda(x): x[0] == best, scores)]

def evaluate(hand):
    ranks = '23456789TJQKA'
    if len(hand) > 5: return max([evaluate(hand[:i] + hand[i+1:]) for i in range(len(hand))])
    score, ranks = zip(*sorted((cnt, rank) for rank, cnt in {ranks.find(r): ''.join(hand).count(r) for r, _ in hand}.items())[::-1])
    if len(score) == 5: # if there are 5 different ranks it could be a straight or a flush (or both)
        if ranks[0:2] == (12, 3): ranks = (3, 2, 1, 0, -1) # adjust if 5 high straight
        score = ([1,(3,1,2)],[(3,1,3),(5,)])[len({suit for _, suit in hand}) == 1][ranks[0] - ranks[4] == 4] # high card, straight, flush, straight flush
    return score, ranks

def test():
    print holdem('9H TC JC QS KC', [
        'JS JD', # 0
        'AD 9C', # 1 A-straight
        'JD 2C', # 2
        'AC 8D', # 3 A-straight
        'QH KH', # 4
        'TS 9C', # 5
        'AH 3H', # 6 A-straight
        '3D 2C', # 7
      # '8C 2C', # 8 flush
    ])

test() 
```

Holdem() 返回获胜手牌的索引列表。在 test() 示例中是 [1, 3, 6]，因为三手拿着 A 的牌瓜分了底池，如果没有注释同花手，则为 [8]。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-04T21:30:26.590

Python 3 版本

```
def poker(hands):
    scores = [(i, score(hand.split())) for i, hand in enumerate(hands)]
    winner = sorted(scores , key=lambda x:x[1])[-1][0]
    return hands[winner]

def score(hand):
    ranks = '23456789TJQKA'
    rcounts = {ranks.find(r): ''.join(hand).count(r) for r, _ in hand}.items()
    score, ranks = zip(*sorted((cnt, rank) for rank, cnt in rcounts)[::-1])
    if len(score) == 5:
        if ranks[0:2] == (12, 3): #adjust if 5 high straight
            ranks = (3, 2, 1, 0, -1)
        straight = ranks[0] - ranks[4] == 4
        flush = len({suit for _, suit in hand}) == 1
        '''no pair, straight, flush, or straight flush'''
        score = ([(1,), (3,1,1,1)], [(3,1,1,2), (5,)])[flush][straight]
    return score, ranks

 >>> poker(['8C TS KC 9H 4S', '7D 2S 5D 3S AC', '8C AD 8D AC 9C', '7C 5H 8D TD KS'])
 '8C AD 8D AC 9C' 
```

基本上必须用 (1,) 替换 1 以避免 int 到元组比较错误。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-28T13:36:22.840

如果您将手表示为例如`Card`对象的数组，那么我将有方法用于循环遍历该数组并确定它是否具有 2-of-a-kind、flush 等 - 如果有，是什么类型它是; 因此，如果一手牌有三个 5，您可以让该`3ofaKind()`方法返回 5。然后我会建立一个可能性层次结构（例如 3 种高于 2 种）并从那里开始工作。方法本身应该很容易编写。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-06T21:17:10.043

如果你只是想了解它是如何工作的，那么简单的算法是：

```
HandStrength(ourcards,boardcards)
{
    ahead = tied = behind = 0
    ourrank = Rank(ourcards,boardcards)
    /* Consider all two-card combinations
    of the remaining cards. */
    for each case(oppcards)
    {
        opprank = Rank(oppcards,boardcards)
        if(ourrank>opprank)
            ahead += 1
        else if(ourrank==opprank)
            tied += 1
        else /* < */
            behind += 1
    }
    handstrength = (ahead+tied/2) / (ahead+tied+behind)
    return(handstrength)
} 
```

它来自 Darse Billings 的“计算机扑克中的算法和评估”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-13T06:54:17.747

这是 Kotlin 中基于规则的简单实现：

```
class PokerHand constructor(hand: String) : Comparable<PokerHand> {

companion object {
    const val WIN = 1
    const val TIE = 0
    const val LOSS = -1
}

val cards: List<Card>

val isStraightFlush: Boolean
    get() = isStraight && isFlush

val isFourOfAKind: Boolean
    get() = cards.groupBy { it.weight }.map { it.value }.any { it.size == 4 }

val isFullHouse: Boolean
    get() = cards.groupBy { it.weight }.map { it.value }.size == 2

val isFlush: Boolean
    get() = cards.groupBy { it.suit }.map { it.value }.size == 1

val isStraight: Boolean
    get() = cards.map { it.weight.ordinal } == (cards[0].weight.ordinal..cards[0].weight.ordinal + 4).toList()

val isThreeOfAKind: Boolean
    get() = cards.groupBy { it.weight }.map { it.value }.any { it.size == 3 }

val isTwoPair: Boolean
    get() = cards.groupBy { it.weight }.map { it.value }.filter { it.size == 2 }.count() == 2

val isPair: Boolean
    get() = cards.groupBy { it.weight }.map { it.value }.any { it.size == 2 }

init {
    val cards = ArrayList<Card>()
    hand.split(" ").forEach {
        when (it.length != 2) {
            true -> throw RuntimeException("A card code must be two characters")
            else -> cards += Card(Weight.forCode(it[0]), Suit.forCode(it[1]))
        }
    }
    if (cards.size != 5) {
        throw RuntimeException("There must be five cards in a hand")
    }
    this.cards = cards.sortedBy { it.weight.ordinal }
}

override fun compareTo(other: PokerHand): Int = when {
    (this.isStraightFlush || other.isStraightFlush) ->
        if (this.isStraightFlush) if (other.isStraightFlush) compareByHighCard(other) else WIN else LOSS
    (this.isFourOfAKind || other.isFourOfAKind) ->
        if (this.isFourOfAKind) if (other.isFourOfAKind) compareByHighCard(other) else WIN else LOSS
    (this.isFullHouse || other.isFullHouse) ->
        if (this.isFullHouse) if (other.isFullHouse) compareByHighCard(other) else WIN else LOSS
    (this.isFlush || other.isFlush) ->
        if (this.isFlush) if (other.isFlush) compareByHighCard(other) else WIN else LOSS
    (this.isStraight || other.isStraight) ->
        if (this.isStraight) if (other.isStraight) compareByHighCard(other) else WIN else LOSS
    (this.isThreeOfAKind || other.isThreeOfAKind) ->
        if (this.isThreeOfAKind) if (other.isThreeOfAKind) compareByHighCard(other) else WIN else LOSS
    (this.isTwoPair || other.isTwoPair) ->
        if (this.isTwoPair) if (other.isTwoPair) compareByHighCard(other) else WIN else LOSS
    (this.isPair || other.isPair) ->
        if (this.isPair) if (other.isPair) compareByHighCard(other) else WIN else LOSS
    else -> compareByHighCard(other)
}

private fun compareByHighCard(other: PokerHand, index: Int = 4): Int = when {
    (index < 0) -> TIE
    cards[index].weight === other.cards[index].weight -> compareByHighCard(other, index - 1)
    cards[index].weight.ordinal > other.cards[index].weight.ordinal -> WIN
    else -> LOSS
} 
```

}

实施细节：

*   用编码的手实例化，例如`2H 3H 4H 5H 6H`
*   评估这手牌是否是“同花顺”、“四类”、“满屋”等的方法。这些在 Kotlin 中很容易表达。
*   实现`Comparable<PokerHand>`使用简单的规则方法评估另一手牌，例如同花顺击败同类的四，击败满堂，等等。

来源[在这里](https://github.com/jasperblues/kotlin-poker)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-09T10:18:17.243

我用 C++ 和 Javascript 编写了一个扑克手评估器。基本上，该程序会将随机挑选的一组卡片转换为 1 和 0 的 3d 数组。通过将卡片转换为这种格式，我就能够编写函数来测试从最高点开始的每种类型的手。

总而言之，我的程序会生成随机牌，将它们转换为由红心、方块、黑桃和梅花组成的 3D 数组，其中 1 代表我拥有的一张牌。然后我会测试 3D 数组，看看我是否有皇家同花顺，然后是同花顺，然后是 4 种，直到检测到匹配。一旦在测试同花之后检测到匹配，那么我的程序就不必测试顺子、3 个同类等，因为同花胜过顺子。

以下是我的程序输出的数据：

**我的随机卡片：**

```
Table Cards
{ Value: '9', Suit: 'H' }
{ Value: 'A', Suit: 'H' }
{ Value: '9', Suit: 'D' }
{ Value: '7', Suit: 'S' }
{ Value: '6', Suit: 'S' } 
```

**代表我的卡片的 3D 数组：**

```
 A  2  3  4  5  6  7  8  9  10 J  Q  K  A

Spades
[ 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0 ]
Diamonds
[ 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 ]
Clubs
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ]
Hearts
[ 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] 
```

使用上面的值，我可以看出我有一对 9s 和一个 A、7、6 的起脚牌。

您可以看到该数组包含两次 A。这是因为您想测试从 A 开始的同花顺。所以 (A,2,3,4,5)。

如果你想测试 7 张卡片而不是 5 张卡片，你也可以使用这个系统。您可以将用户 2 卡与桌面上的 5 一起包含在我的系统中并运行它。您也可以对桌上的其他玩家做同样的事情并比较结果。

希望这会有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-06T11:45:04.667

这是翻译成**R**的算法，用 6 张牌进行测试，对应于由以下结果给出的 42.504 种组合：

![C65](../Images/cbe099e95339646f3b4eaac2f6def02b.png)

扑克手的组合。由于处理限制（它将对应于 2.598.960 组合），未使用 13 卡组进行测试。

该算法**用一个字符串来表示一手牌的价值**，由两部分组成：

*   5 个字符，按顺序卡数（例如“31100”表示三种）
*   卡号由从“B”（Deuce）到“N”（Ace）的字母计算（例如，“NILH”表示 Ace、Queen、9 和 8）。它以字母“B”开头，因为在 A2345 扑克手牌中，A 出现在“2”之前，“2”（A）将具有值“A”。

因此，例如，“32000NB”将是三个 A 和两个平的 Full House。

扑克手值字符串便于**比较和排序**。

```
library(tidyverse)
library(gtools)

hand_value <- function(playerhand) {

  numbers <- str_split("23456789TJQKA", "")[[1]]
  suits <- str_split("DCHS", "")[[1]]

  playerhand <- data.frame(card = playerhand) %>% separate(card, c("number", "suit"), sep = 1)

  number_values <- data.frame(number = numbers, value = LETTERS[2:14], stringsAsFactors = FALSE)

  playerhand_number <- playerhand %>% 
    group_by(number) %>% 
    count(number) %>%
    inner_join(number_values, by = "number") %>%
    arrange(desc(n), desc(value))

  playerhand_suit <- playerhand %>% 
    group_by(suit) %>% 
    count(suit) %>%
    arrange(desc(n))

  if (nrow(playerhand_number) == 5)
    {
      if (playerhand_number[1,1] == 'A' & playerhand_number[2,1] == '5')
        playerhand_number <- data.frame(playerhand_number[,1:2], value = str_split("EDCBA", "")[[1]], stringsAsFactors = FALSE)
      straight <- asc(playerhand_number[1,3]) - asc(playerhand_number[5,3]) == 4
    } else
      straight = FALSE

  flush <- nrow(playerhand_suit) == 1

  if (flush)
    {
    if (straight)
      playerhand_number <- data.frame(playerhand_number[,c(1,3)], n = c(5, 0, 0, 0, 0), stringsAsFactors = FALSE) else
      playerhand_number <- data.frame(playerhand_number[,c(1,3)], n = c(3, 1, 1, 2, 0), stringsAsFactors = FALSE)
    } else
    {
    if (straight)
      playerhand_number <- data.frame(playerhand_number[,c(1,3)], n = c(3, 1, 1, 1, 0), stringsAsFactors = FALSE)
    }  

  playerhand_value <- append(append(c(playerhand_number$n), rep("0", 5 - nrow(playerhand_number))), c(playerhand_number$value))
  playerhand_value <- paste(playerhand_value, collapse = '')

  playerhand_value

} 
```

使用上述示例的相同手测试功能：

```
l <- c("8C TS KC 9H 4S", "7D 2S 5D 3S AC", "8C AD 8D AC 9C", '7C 5H 8D TD KS')
t <- as_tibble(l)
t <- t %>% mutate(hand = str_split(value, " ")) %>% select(hand)
t <- t %>% mutate(value = sapply(t[,1]$hand, hand_value)) %>% arrange(desc(value))
paste(t[[1]][[1]], collapse = " ") 
```

返回相同的结果：

```
[1] "8C AD 8D AC 9C" 
```

希望能帮助到你。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-14T10:39:08.030

```
 public class Line
{
    private List<Card> _cardsToAnalyse;

    public Line()
    {
        Cards = new List<Card>(5);
    }

    public List<Card> Cards { get; }

    public string PriceName { get; private set; }

    public int Result()
    {
        _cardsToAnalyse = Cards;
        var valueComparer = new CardValueComparer();

        _cardsToAnalyse.Sort(valueComparer);

        if (ContainsStraightFlush(_cardsToAnalyse))
        {
            PriceName = "Straight Flush";
            return PayTable.StraightFlush;
        }

        if (ContainsFourOfAKind(_cardsToAnalyse))
        {
            PriceName = "Quadra";
            return PayTable.FourOfAKind;
        }

        if (ContainsStraight(_cardsToAnalyse))
        {
            PriceName = "Straight";
            return PayTable.Straight;
        }

        if (ContainsFullen(_cardsToAnalyse))
        {
            PriceName = "Full House";
            return PayTable.Fullen;
        }

        if (ContainsFlush(_cardsToAnalyse))
        {
            PriceName = "Flush";
            return PayTable.Flush;
        }

        if (ContainsThreeOfAKind(_cardsToAnalyse))
        {
            PriceName = "Trinca";
            return PayTable.ThreeOfAKind;
        }

        if (ContainsTwoPairs(_cardsToAnalyse))
        {
            PriceName = "Dois Pares";
            return PayTable.TwoPairs;
        }

        if (ContainsPair(_cardsToAnalyse))
        {
            PriceName = "Um Par";
            return PayTable.Pair;
        }

        return 0;
    }

    private bool ContainsFullen(List<Card> _cardsToAnalyse)
    {
        var valueOfThree = 0;

        // Search for 3 of a kind
        Card previousCard1 = null;
        Card previousCard2 = null;

        foreach (var c in Cards)
        {
            if (previousCard1 != null && previousCard2 != null)
                if (c.Value == previousCard1.Value && c.Value == previousCard2.Value)
                    valueOfThree = c.Value;
            previousCard2 = previousCard1;
            previousCard1 = c;
        }

        if (valueOfThree > 0)
        {
            Card previousCard = null;

            foreach (var c in Cards)
            {
                if (previousCard != null)
                    if (c.Value == previousCard.Value)
                        if (c.Value != valueOfThree)
                            return true;
                previousCard = c;
            }

            return false;
        }

        return false;
    }

    private bool ContainsPair(List<Card> Cards)
    {
        Card previousCard = null;

        foreach (var c in Cards)
        {
            if (previousCard != null)
                if (c.Value == previousCard.Value)
                    return true;
            previousCard = c;
        }

        return false;
    }

    private bool ContainsTwoPairs(List<Card> Cards)
    {
        Card previousCard = null;
        var countPairs = 0;
        foreach (var c in Cards)
        {
            if (previousCard != null)
                if (c.Value == previousCard.Value)
                    countPairs++;
            previousCard = c;
        }

        if (countPairs == 2)
            return true;

        return false;
    }

    private bool ContainsThreeOfAKind(List<Card> Cards)
    {
        Card previousCard1 = null;
        Card previousCard2 = null;

        foreach (var c in Cards)
        {
            if (previousCard1 != null && previousCard2 != null)
                if (c.Value == previousCard1.Value && c.Value == previousCard2.Value)
                    return true;
            previousCard2 = previousCard1;
            previousCard1 = c;
        }

        return false;
    }

    private bool ContainsFlush(List<Card> Cards)
    {
        return Cards[0].Naipe == Cards[1].Naipe &&
               Cards[0].Naipe == Cards[2].Naipe &&
               Cards[0].Naipe == Cards[3].Naipe &&
               Cards[0].Naipe == Cards[4].Naipe;
    }

    private bool ContainsStraight(List<Card> Cards)
    {
        return Cards[0].Value + 1 == Cards[1].Value &&
               Cards[1].Value + 1 == Cards[2].Value &&
               Cards[2].Value + 1 == Cards[3].Value &&
               Cards[3].Value + 1 == Cards[4].Value
               ||
               Cards[1].Value + 1 == Cards[2].Value &&
               Cards[2].Value + 1 == Cards[3].Value &&
               Cards[3].Value + 1 == Cards[4].Value &&
               Cards[4].Value == 13 && Cards[0].Value == 1;
    }

    private bool ContainsFourOfAKind(List<Card> Cards)
    {
        Card previousCard1 = null;
        Card previousCard2 = null;
        Card previousCard3 = null;

        foreach (var c in Cards)
        {
            if (previousCard1 != null && previousCard2 != null && previousCard3 != null)
                if (c.Value == previousCard1.Value &&
                    c.Value == previousCard2.Value &&
                    c.Value == previousCard3.Value)
                    return true;
            previousCard3 = previousCard2;
            previousCard2 = previousCard1;
            previousCard1 = c;
        }

        return false;
    }

    private bool ContainsStraightFlush(List<Card> Cards)
    {
        return ContainsFlush(Cards) && ContainsStraight(Cards);
    }
} 
```

# javascript - 如何淡出图像，然后使其出现在 jquery 的另一个位置？

> ID：10363928
> 
> 赞同：0
> 
> 时间：2012-04-28T13:27:09.277
> 
> 标签：javascript, jquery

我的图像在某个 div，它的 z-index 是最高的

当我点击某个东西时，我希望它淡出，然后淡入另一个指定的位置。在另一个类的图像下方:) 这是一个“aaa”类。

我是这样做的：

```
 $('img.classy').fadeOut();
          $('img.classy').css('top',$(el).find('img.aaa:last').height()+60);
          $('img.classy').fadeIn(); 
```

它嵌入到点击事件。当我运行它并单击该区域时，img.classy 首先更改它的位置，然后在新位置上淡出并淡入。我显然希望这样做：淡出-> 不可见时更改位置-> 在新位置淡入位置。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:28:39.257

这将做：

```
$('img.classy').fadeOut(function() {
    $('img.classy').css('top',$(el).find('img.aaa:last').height()+60);
    $('img.classy').fadeIn();
}); 
```

因为`fadeOut`和`fadeIn`是异步函数，所以脚本会继续运行，这些会导致您`img`立即更改其位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:29:58.557

您需要等到fadeOut 完成。我为你添加了一个回调函数。

```
$('img.classy').fadeOut('slow', function() {
    $(this).css('top',$(el).find('img.aaa:last').height()+60);
    $('img.classy').fadeIn();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T13:43:34.870

这将克隆 img，将其删除并将其附加到另一个包装器中：

```
 .aaa {position: relative}
   .classy {position: absolute; right:0; top:0}

    $('img.classy').fadeOut(
      cloned = $(this).clone(true);
      $(this).remove();
      $("img.aaa:last").append(cloned);
      $(".classy").fadeIn();
    ); 
```

# templates - 将数组传递给嵌套的 jQuery 模板

> ID：10363930
> 
> 赞同：2
> 
> 时间：2012-04-28T13:27:28.217
> 
> 标签：templates, nested, jquery-templates

我正在使用嵌套的 jQuery 模板 - 只是一个在另一个中。

在内部模板中，我想循环传递给模板的数组 Transactions。我把它作为一个模板，它工作得很好，但是因为我想重用一些功能，我把它分成两个模板。现在我得到错误“ *c.tmpl 不是函数*”。

在我有的外部模板中

```
<table class="table table-striped table-condensed">
    <thead>
        ...
    </thead>
    <tbody>
        {{tmpl(Transactions) "#AccountTabs_TransRow"}}
    </tbody>
</table> 
```

而在内部模板中，AccountTabs_TransRow

```
{{each(idxTr, tr) Transactions}}
<tr>
    {{each(idxTrV, trV) Transactions[idxTr].Values}}
        <td>
            ${FriendlyValue}
        </td>
    {{/each}}
</tr>
{{/each}} 
```

我传入的对象看起来像这样（伪代码）

```
object
{
    Transactions[]
    {
        Values[]
        {
            FriendlyValue
        }
    }
} 
```

如果我只是将外部模板中的 {{tmpl(Trans...

我的怀疑是它与我引用数组的方式有关，但是尝试了不同的选项我一无所获。

任何人都可以帮忙吗？

# php - 使用 php 代码显示和隐藏文本框

> ID：10363931
> 
> 赞同：1
> 
> 时间：2012-04-28T13:27:32.783
> 
> 标签：php, html

我试图弄清楚如何使用 php 编码隐藏文本框。我正在使用一个包含 3 个单选按钮和 3 个文本框的表单。加载页面时，我只希望显示 3 个单选按钮和前 2 个文本框，并隐藏最后一个文本框。当用户单击更新单选按钮时，第二个文本框被隐藏，第三个文本框可见。我将如何使用此代码完成此操作？

使用此代码，我可以隐藏我的文本框。但是有没有办法隐藏与被隐藏的文本框相关的文本？

```
<html>
<head><title></title>
<script type="text/javascript">

function show()
{
if (document.getElementById('ins').checked){

document.getElementById("zn").style.display = "block";
document.getElementById("gpa").style.display = "block";
document.getElementById("ngpa").style.display = "none";
}
}
</script>

</head>
<body>
<form action = "index.php" method = 'post'>
<input type="radio" name="group" id = "ins" onclick="show()" /> Insert Student <br />
<input type="radio" name="group" id = "upd" /> Update Student <br />
<input type="radio" name="group" id = "del" /> Delete Student <br />
Enter Z-number: <input type='text' name = 'z' maxlength='9' />
<br />Enter GPA: <input type='text' name='gpa' />
<br /> Enter new GPA: <input type="text" name ="ngpa" value ="false" />
<br /><input type='submit' value='Submit request' name='submit' />
</form>
<?php
 if (isset($_POST['z'])) {
 $con = mysql_connect('localhost', 'jtinio', 'jtin666');
 if ($con) {
  mysql_select_db('jtinio', $con);

 $sql = "INSERT INTO Students VALUES (' ".$_POST['z']." ' , " .$_POST['gpa'].")";

 if (mysql_query($sql, $con)) echo 'Operation succeeded';
 else echo 'Not succeeded ' .mysql_error();

if (isset($_POST['ins'])) {
$sql = "SELECT * FROM Students";
$res = mysql_query($sql, $con);

echo "<table border ='1'>";
echo "<tr><th>Znum</th><th>GPA</th></tr>";
while ($r = mysql_fetch_array($res)) {
 echo "<tr><td>".$r['Znum']."</td></td>".$r['gpa']."</td></tr>";
}
echo "</table>";
}
mysql_close($con);
}
else {
echo 'Insertion failed'. 'Could not connect to DB.';}

}

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:29:08.947

PHP 是基于服务器的。您想要做的事情适用于用户交互（在浏览器中），因此 PHP 不是用于此目的的。

简而言之：**使用 JavaScript**（或 jQuery）

# c# - 如何使用 dapper.net 进行交易？

> ID：10363933
> 
> 赞同：132
> 
> 时间：2012-04-28T13:27:41.893
> 
> 标签：c#, transactions, dapper

我想在多个表上运行多个插入语句。我正在使用 dapper.net。我看不到任何处理与 dapper.net 的交易的方法。

请分享您对如何使用 dapper.net 进行交易的想法。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-04-28T13:32:44.810

这里的代码片段：

```
using System.Transactions;    
....    
using (var transactionScope = new TransactionScope())
{
    DoYourDapperWork();
    transactionScope.Complete();
} 
```

请注意，您需要添加对`System.Transactions`程序集的引用，因为默认情况下不引用它。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-11-18T12:36:45.367

我更喜欢通过直接从连接获取事务来使用更直观的方法：

```
// This called method will get a connection, and open it if it's not yet open.
using (var connection = GetOpenConnection())
using (var transaction = connection.BeginTransaction())
{
    connection.Execute(
        "INSERT INTO data(Foo, Bar) values (@Foo, @Bar);", listOf5000Items, transaction);
    transaction.Commit();
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-28T13:31:05.730

您应该可以使用`TransactionScope`，因为 Dapper 只运行 ADO.NET 命令。

```
using (var scope = new TransactionScope())
{
   // open connection
   // insert
   // insert
   scope.Complete();
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-11-07T11:40:10.563

考虑到您所有的表都在单个数据库中，我不同意`TransactionScope`这里的一些答案中建议的解决方案。参考[这个](https://stackoverflow.com/a/44126533/5779732)答案。

1.  `TransactionScope`一般用于分布式事务；跨越不同数据库的事务可能在不同的系统上。这需要在操作系统和 SQL Server 上进行一些配置，否则将无法正常工作。如果您的所有查询都针对单个数据库实例，则不建议这样做。
    但是，对于单个数据库，当您需要将代码包含在不受您控制的事务中时，这可能很有用。单库也不需要特殊配置。

2.  `connection.BeginTransaction`是针对单个数据库实现事务（在 C#、VB.NET 等中）的 ADO.NET 语法。这不适用于多个数据库。

所以，`connection.BeginTransaction()`是更好的方式去。

处理事务的更好方法是按照[此](https://stackoverflow.com/a/45029588/5779732)答案中的说明实施 UnitOfWork。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2021-05-10T17:09:46.480

在 Dapper 中进行交易有 3 种方法。

1.  简单交易
2.  来自交易范围的交易
3.  使用 Dapper Transaction（[额外的 nuget 包](https://www.nuget.org/packages/Dapper.Transaction/) ***和最受青睐的方法***）

[您可以从这里](https://dapper-tutorial.net/transaction)的官方教程网站了解更多关于这些交易方法的信息

供参考，这里是交易方法的细分

**1\. 简单交易**

在此示例中，您在现有数据库连接上创建事务，然后将事务传递给 dapper 上的 Execute 方法（这是一个可选参数）。

完成所有工作后，只需提交事务即可。

```
string sql = "INSERT INTO Customers (CustomerName) Values (@CustomerName);";

using (var connection = new SqlConnection(FiddleHelper.GetConnectionStringSqlServerW3Schools()))
{
    connection.Open();

    using (var transaction = connection.BeginTransaction())
    {
        connection.Execute(sql, new {CustomerName = "Mark"}, transaction: transaction);
        connection.Execute(sql, new {CustomerName = "Sam"}, transaction: transaction);
        connection.Execute(sql, new {CustomerName = "John"}, transaction: transaction);

        transaction.Commit();
    }
} 
```

**2.从交易范围交易**

如果您想创建事务范围，则需要在创建数据库连接之前执行此操作。创建事务范围后，您可以简单地执行所有操作，然后执行一次调用来完成事务，然后提交所有命令

```
using (var transaction = new TransactionScope())
{
    var sql = "INSERT INTO Customers (CustomerName) Values (@CustomerName);";

    using (var connection = My.ConnectionFactory())
    {
        connection.Open();

        connection.Execute(sql, new {CustomerName = "Mark"});
        connection.Execute(sql, new {CustomerName = "Sam"});
        connection.Execute(sql, new {CustomerName = "John"});
    }

    transaction.Complete();
} 
```

**3\. 使用 Dapper 交易**

这是在代码中实现事务的最有利的方法，因为它使代码易于阅读和实现。有一个名为 Dapper Transaction 的 SQL 事务的扩展实现（您可以在[此处](https://www.nuget.org/packages/Dapper.Transaction/)找到），它允许您运行 SQL 直接执行事务。

```
string sql = "INSERT INTO Customers (CustomerName) Values (@CustomerName);";

using (var connection = new SqlConnection(FiddleHelper.GetConnectionStringSqlServerW3Schools()))
{
    connection.Open();

    using (var transaction = connection.BeginTransaction())
    {
        transaction.Execute(sql, new {CustomerName = "Mark"});
        transaction.Execute(sql, new {CustomerName = "Sam"});
        transaction.Execute(sql, new {CustomerName = "John"});

        transaction.Commit();
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-01T23:13:17.230

丹尼尔的回答对我来说按预期工作。为了完整起见，这里有一个片段演示了使用事务范围和 dapper 的提交和回滚：

```
using System.Transactions;
    // _sqlConnection has been opened elsewhere in preceeding code 
    using (var transactionScope = new TransactionScope())
    {
        try
        {
            long result = _sqlConnection.ExecuteScalar<long>(sqlString, new {Param1 = 1, Param2 = "string"});

            transactionScope.Complete();
        }
        catch (Exception exception)
        {
            // Logger initialized elsewhere in code
            _logger.Error(exception, $"Error encountered whilst executing  SQL: {sqlString}, Message: {exception.Message}")

            // re-throw to let the caller know
            throw;
        }
    } // This is where Dispose is called 
```

# database-design - MongoDB 分析模式

> ID：10363936
> 
> 赞同：3
> 
> 时间：2012-04-28T13:28:09.277
> 
> 标签：database-design, mongodb

Mongo 新手，承担分析任务并有一个架构问题。

我来自 SQL Server，我有 4 个表...

```
stats_landing_table
-------------------
id
post_id
visit_date
country
browser
impressions

stats_geo_table
---------------
id
post_id
date
country
country_count

stats_browser_table
-------------------
id
post_id
date
browser
browser_count

stats_impressions_table
-----------------------
id
post_id
date
impression_count 
```

使用登陆表 - 我每次都将所有数据放入其中 - 没有更新，只是插入。在那里我有一个触发器，它查看其他表并进行适当的更新或插入，然后从登陆表中删除条目。

因此，我需要 FAST 插入/更新，能够返回并基于整个或特定时间范围显示关于帖子周围每个属性（国家、浏览器、印象等）的报告。

使用 Mongo，它归结为我是否应该嵌入或拥有单独的文档，或者我猜是一个完全不同的模式。如果我嵌入，我试图弄清楚如何更新浏览器表之类的内容，同时仍在检查国家/地区并更新展示次数。听起来我需要为每件事单独更新（比如，这个访问者正在使用来自德国的 firefox，而这个是来自芬兰的 firefox - 从我所看到的单个查询中无法做到这一点）。另一种选择是制作不同的文档，但这是同样的问题——我需要为每个集合进行更新——与 SQL Server 单次调用相比，这是很多网络流量。

我愿意接受任何关于如何设计这样的东西的建议，以允许快速的性能更新/插入，同时仍然允许报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:45:13.293

根据我对这种情况的了解，这三个表是汇总表，其中在浏览器或国家/地区的情况下，天、post_id 和给定指标的唯一组合被计算在内。

我会一起跳过插入表，因为您今天不保留它并或多或少地将其用作队列。

使用 MongoDB，写入将全部写入内存，因此速度非常快。它也可以异步完成（触发并忘记它的风格）。

我会为每个唯一的日期和 post_id 创建一个新文档。它将有两个数组，一个用于浏览器，一个用于国家，其中键是国家代码或浏览器，值是计数。该文档还将有一个展示次数字段。

每次访问都会更新一个文档并且很容易查询。

更新将使用原子运算符“$inc”在服务器上原子地增加计数，因此不需要拉入数据来进行更新。传输的数据量非常小。

这能回答问题吗？

# java - Delphi读，java不读

> ID：10363945
> 
> 赞同：2
> 
> 时间：2012-04-28T13:29:06.353
> 
> 标签：java, file-io, apache-commons-io

我有一个很奇怪的问题。当我想列出共享文件夹（windows server 2003）中的文件时，我的代码块在 listFiles() 方法上（没有例外，没有结束，只是在那一行上的块）。我正在使用 Common IO 2.3 库。

当我在 Delphi 中创建相同的应用程序时，它成功列出了文件（使用与 java 相同的 windows 用户）。

java中的共享文件夹有什么限制吗？

Java代码：

```
File folder = new File(args[0]);
List<File> files = (List<File>) FileUtils.listFiles(folder, TrueFileFilter.INSTANCE, new RegexFileFilter("^(?!_).+"));//new RegexFileFilter("^((?!\\_).)*$") 
```

# android - 如何获取基于 SIM 提供商的国际拨号代码？

> ID：10363947
> 
> 赞同：0
> 
> 时间：2012-04-28T13:29:40.300
> 
> 标签：android, telephonymanager

我正在开发应根据 SIM 卡提供商自动设置用户手机号和国际国家代码的应用程序。

即，如果我在第一页国家代码中安装此应用程序并且我的电话号码应该自动填写。我希望这个结果作为我的输出。![在此处输入图像描述](../Images/f46281dd82adc34f4f98c00d58e2814b.png)

我已经使用静态代码完成了此操作，但我想动态执行。如果用户使用此应用程序，则应自动选择国家代码和手机号码。

我在网上搜索过，但没有这个问题的确切答案。

我已经看到他们正在做这件事的应用程序，那么他们是怎么做的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T09:52:06.853

还有一个库可以帮助您验证用户输入的电话号码为

[http://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:45:32.927

以下是帮助您获取电话号码的代码片段：

```
TelephonyManager tMgr = (TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
String phoneNumber = tMgr.getLine1Number(); 
```

不要忘记`READ_PHONE_STATE`在清单文件中包含权限。

# javascript - 从下拉列表中选择多个值

> ID：10363951
> 
> 赞同：6
> 
> 时间：2012-04-28T13:30:14.207
> 
> 标签：javascript, android, html, cordova, drop-down-menu

我有一个下拉列表，其中包含移动设备上的所有联系人。我想一次选择多个联系人。

当我处理常规的 html 和 JS 页面时，我使用了以下代码：

```
 function loopSelected()
     {
      var txtSelectedValuesObj = document.getElementById('txtContactsName');
      var selectedArray = new Array();
      var selObj = document.getElementById('AllContacts');
      var i;
      var count = 0;
      for (i=0; i<selObj.options.length; i++) 
      {
         if (selObj.options[i].selected) {
         selectedArray[count] = selObj.options[i].value;
        count++;
       }
     }
     txtSelectedValuesObj.value = selectedArray;
  } 
```

但是当我在 Android 上使用它时，它会`if statement`被跳过并且它会停止，这个语句：

```
 "selObj.options[i].selected" 
```

对手机来说似乎很奇怪！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:49:10.113

这有效：

```
 function ChooseContact(data)
    {
      var txtSelectedValuesObj = document.getElementById('txtContactsName');
      var selectedArray = new Array();
      var selObj = document.getElementById('contacts');
      var i;
      var count = 0;
      for(i=0;i<selObj.options.length;i++)
      {
        if(selObj.options[i].selected==true)
        {
         selectedArray[count] = selObj.options[i].value;
         alert(selObj.options[i].value);
         count++;
        }
      }
     txtSelectedValuesObj.value = selectedArray;
   } 
```

我刚刚修改了这个：

```
 if (selObj.options[i].selected) 
```

对此：

```
 if(selObj.options[i].selected==true) 
```

# regex - 正则表达式以确保特定单词不会出现在模式中间

> ID：10363957
> 
> 赞同：3
> 
> 时间：2012-04-28T13:30:49.107
> 
> 标签：regex

我有一个匹配列表中一系列字符的正则表达式，但我想阻止它匹配一个单词。

我的正则表达式是：

```
^widget/([\w\d~]+)/?(?:[\w\d~]+)/?$ 
```

我希望它像这样匹配：

*   `widget/JQYHHU`- 查看小部件，应该匹配
*   `widget/JQYHHU/`- 查看小部件，应该匹配
*   `widget/JQYHHU/bag-of-screws`- 查看小部件，应该匹配
*   `widget/JQYHHU/bag-of-screws/`- 查看小部件，应该匹配
*   `widget/add`- 查看小部件，**不应**匹配
*   `widget/add/`- 查看小部件，**不应**匹配

是否可以添加条件以匹配字符，但如果它们拼写单词“add”则不行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T13:35:02.123

```
^widget/(?!add)([\w\d~]+)/?(?:[\w\d~]+)/?$ 
```

这是一个*零宽度的负前瞻断言*；基本上它说“站在我现在的位置，确保如果我向前看，我看**不到**图案`add`，但完成后不要移动光标位置。”

在这里阅读：[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

# c# - C#画布调整大小

> ID：10363961
> 
> 赞同：0
> 
> 时间：2012-04-28T13:31:07.743
> 
> 标签：c#, xaml, wpf-controls

我想改变那些画布椭圆的高度和宽度，如果我点击一个按钮，它都会增加 1。但是我没有找到画布调整大小的功能，我该如何调整椭圆的大小。

我还想添加一个包含图片的画布，我该怎么做。

```
Canvas Name="MainCanvas"
        <Ellipse Canvas.Left="0" Canvas.Top="0" Height="15" Name="headEllipse" Stroke="Black" Width="15" Fill="Orange" />
        <Ellipse Canvas.Left="50" Canvas.Top="0" Height="15" Name="rightEllipse" Stroke="Black" Width="15" Fill="SlateGray" />
        <Ellipse Canvas.Left="93" Canvas.Top="0" Fill="SpringGreen" Height="15" Name="leftEllipse" Stroke="Black" Width="15" />
        <Ellipse Canvas.Left="150" Canvas.Top="0" Height="15" Name="KneeRightEllipse" Stroke="Black" Width="15" Fill="Salmon" />
        <Ellipse Canvas.Left="200" Canvas.Top="0" Fill="White" Height="15" Name="KneeLeftEllipse" Stroke="Black" Width="15" />
        <Ellipse Canvas.Left="235" Canvas.Top="0" Fill="PaleGreen" Height="15" Name="ShoulderEllipse" Stroke="Black" Width="15" />
    </Canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:26:52.793

好像是银光。尝试为`Click`a 的事件定义处理程序`Button`并使用此方法（它应该在 WPF 和 Silverlight 中都可以使用，但我仅在 WPF 中对其进行了测试）：

```
private void btnEnlargeEllipses_Click(object sender, RoutedEventArgs e)
    {
        foreach (UIElement control in MainCanvas.Children)
        {
            Ellipse ellipse = (control as Ellipse);
            if (ellipse != null)
            {
                ellipse.Width += 1;
                ellipse.Height += 1;
            }
        }
    } 
```

或者，您可以定义一个`DependencyProperty`，绑定椭圆宽度结束高度到它，并在按钮的`Click`事件处理程序内增加它。

# c++ - 在向量上使用算法中的查找函数

> ID：10363965
> 
> 赞同：1
> 
> 时间：2012-04-28T13:31:33.397
> 
> 标签：c++, vector, iterator, find, stl-algorithm

我想在向量对象上使用算法库中的 find 函数。向量对象是客户的向量，（客户是我做的一个类）。我第一次运行它，它给了我一个错误`stl_algo.h`。我在网上搜索它，我也在这里搜索它，我在这里找到了一个关于它的问题，我运行了相同的代码，但我仍然得到了那个错误。

我的代码在这里：

头文件：

```
#include <string>
#include <sstream>
#include <map>
#include <vector>

using namespace std;

enum Status {ACTIVE, INACTIVE};

class Customer {
    private:
        // ID Database class for storing customers' ids
        class IdDB {
            private:
                friend class Customer;

                // member field
                static map <string, int> idList;

                // member function
                static int getNumber (const string &threeLetters) {
                    map<string, int>::iterator i = idList.find(threeLetters);

                    if (i == idList.end()) {
                        idList.insert(pair <string, int> (threeLetters, 0));
                        return 0;
                    }else{
                        return ++(i->second);
                    }
                }
        };

        string id;
        string name;
        string address;
        Status status;

        void makeId () {
            string threeLetters = name.substr(0, 3);
            int idNum = IdDB::getNumber(threeLetters);

            stringstream oss;
            oss << threeLetters << idNum;
            id = oss.str();
        }

    public:
        Customer (const string&, const string&, const Status);

        // Accessor Methods
        string &getId ();
        string &getName ();
        string &getAddress ();
        Status getStatus ();

        // Mutator Methods
        void setAddress (const string&);
        void setStatus (const Status);

        // Misc. Methods
        void printStatus ();

        // Equality Operator Overloading
        friend bool operator == (Customer&, Customer&);
};

class CustomerDB {
    private:
        static vector<Customer> customersList;

    public:
        static void addCustomer (const Customer&);
        static void deleteCustomer (Customer&);
}; 
```

源代码：

```
#include <iostream>
#include <string>
#include <algorithm>
#include "Customer.h"

using namespace std;

map<string, int> Customer::IdDB::idList;

Customer::Customer (const string &cName, const string &cAddress, const Status cStatus) : name(cName), address(cAddress), status(cStatus) {
    makeId();
}

// Accessor Methods
string &Customer::getId () { return id; }
string &Customer::getName () { return name; }
string &Customer::getAddress () { return address; }
Status Customer::getStatus () { return status; }

// Mutator Methods
void Customer::setAddress (const string &newAddress) { address = newAddress; }
void Customer::setStatus (const Status newStatus) { status = newStatus; }

// Misc. Methods
void Customer::printStatus () {
    if (status == ACTIVE)
        cout << "Active";
    else
        cout << "In-Active";
}

vector<Customer> CustomerDB::customersList;

void CustomerDB::addCustomer (const Customer &customer) {
    customersList.push_back(customer);
}

void CustomerDB::deleteCustomer (Customer &customer) {
    vector<Customer>::iterator i;
    i = find(customersList.begin(), customersList.end(), customer); // getting error in here
}

// Equality Operator Overloading
bool operator == (Customer &cust1, Customer &cust2) {
    return cust1.getId() == cust2.getId();
} 
```

在使用 Code::Blocks 构建之后，我得到了这个，

在头文件中`stl_algo.h`：

```
 }

  /// This is an overload used by find() for the RAI case.
  template<typename _RandomAccessIterator, typename _Tp>
    _RandomAccessIterator
    __find(_RandomAccessIterator __first, _RandomAccessIterator __last,
       const _Tp& __val, random_access_iterator_tag)
    {
      typename iterator_traits<_RandomAccessIterator>::difference_type
    __trip_count = (__last - __first) >> 2;

      for (; __trip_count > 0; --__trip_count)
    {
      if (*__first == __val) // error in here exactly getting a red block
        return __first;
      ++__first;

      if (*__first == __val)
        return __first;
      ++__first;

      if (*__first == __val)
        return __first; 
```

谢谢

编辑：这是构建日志

```
Compiling: C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp
In file included from c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/algorithm:63:0,
                 from C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp:5:
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h: In function '_RandomAccessIterator std::__find(_RandomAccessIterator, _RandomAccessIterator, const _Tp&, std::random_access_iterator_tag) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Customer*, std::vector<Customer> >, _Tp = Customer]':
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:4403:45:   instantiated from '_IIter std::find(_IIter, _IIter, const _Tp&) [with _IIter = __gnu_cxx::__normal_iterator<Customer*, std::vector<Customer> >, _Tp = Customer]'
C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp:42:66:   instantiated from here
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:162:4: error: no match for 'operator==' in '__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Customer*, _Container = std::vector<Customer>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = Customer&]() == __val'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:162:4: note: candidates are:
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/postypes.h:218:5: note: template<class _StateT> bool std::operator==(const std::fpos<_StateT>&, const std::fpos<_StateT>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_pair.h:201:5: note: template<class _T1, class _T2> bool std::operator==(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_iterator.h:285:5: note: template<class _Iterator> bool std::operator==(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_iterator.h:335:5: note: template<class _IteratorL, class _IteratorR> bool std::operator==(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/allocator.h:122:5: note: template<class _T1, class _T2> bool std::operator==(const std::allocator<_T1>&, const std::allocator<_T2>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/allocator.h:127:5: note: template<class _Tp> bool std::operator==(const std::allocator<_Tp1>&, const std::allocator<_Tp1>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2427:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator==(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2434:5: note: template<class _CharT> typename __gnu_cxx::__enable_if<std::__is_char<_Tp>::__value, bool>::__type std::operator==(const std::basic_string<_CharT>&, const std::basic_string<_CharT>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2448:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator==(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2460:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator==(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/streambuf_iterator.h:194:5: note: template<class _CharT, class _Traits> bool std::operator==(const std::istreambuf_iterator<_CharT, _Traits>&, const std::istreambuf_iterator<_CharT, _Traits>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_tree.h:309:5: note: template<class _Val> bool std::operator==(const std::_Rb_tree_iterator<_Tp>&, const std::_Rb_tree_const_iterator<_Val>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_tree.h:846:5: note: template<class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc> bool std::operator==(const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_map.h:877:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator==(const std::map<_Key, _Tp, _Compare, _Alloc>&, const std::map<_Key, _Tp, _Compare, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_multimap.h:795:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator==(const std::multimap<_Key, _Tp, _Compare, _Alloc>&, const std::multimap<_Key, _Tp, _Compare, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_vector.h:1273:5: note: template<class _Tp, class _Alloc> bool std::operator==(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp:46:6: note: bool operator==(Customer&, Customer&)
C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp:46:6: note:   no known conversion for argument 2 from 'const Customer' to 'Customer&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:4403:45:   instantiated from '_IIter std::find(_IIter, _IIter, const _Tp&) [with _IIter = __gnu_cxx::__normal_iterator<Customer*, std::vector<Customer> >, _Tp = Customer]'
C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp:42:66:   instantiated from here
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:166:4: error: no match for 'operator==' in '__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Customer*, _Container = std::vector<Customer>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = Customer&]() == __val'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:166:4: note: candidates are:
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/postypes.h:218:5: note: template<class _StateT> bool std::operator==(const std::fpos<_StateT>&, const std::fpos<_StateT>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_pair.h:201:5: note: template<class _T1, class _T2> bool std::operator==(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_iterator.h:285:5: note: template<class _Iterator> bool std::operator==(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_iterator.h:335:5: note: template<class _IteratorL, class _IteratorR> bool std::operator==(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/allocator.h:122:5: note: template<class _T1, class _T2> bool std::operator==(const std::allocator<_T1>&, const std::allocator<_T2>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/allocator.h:127:5: note: template<class _Tp> bool std::operator==(const std::allocator<_Tp1>&, const std::allocator<_Tp1>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2427:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator==(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2434:5: note: template<class _CharT> typename __gnu_cxx::__enable_if<std::__is_char<_Tp>::__value, bool>::__type std::operator==(const std::basic_string<_CharT>&, const std::basic_string<_CharT>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2448:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator==(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2460:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator==(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/streambuf_iterator.h:194:5: note: template<class _CharT, class _Traits> bool std::operator==(const std::istreambuf_iterator<_CharT, _Traits>&, const std::istreambuf_iterator<_CharT, _Traits>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_tree.h:309:5: note: template<class _Val> bool std::operator==(const std::_Rb_tree_iterator<_Tp>&, const std::_Rb_tree_const_iterator<_Val>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_tree.h:846:5: note: template<class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc> bool std::operator==(const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_map.h:877:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator==(const std::map<_Key, _Tp, _Compare, _Alloc>&, const std::map<_Key, _Tp, _Compare, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_multimap.h:795:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator==(const std::multimap<_Key, _Tp, _Compare, _Alloc>&, const std::multimap<_Key, _Tp, _Compare, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_vector.h:1273:5: note: template<class _Tp, class _Alloc> bool std::operator==(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp:46:6: note: bool operator==(Customer&, Customer&)
C:\Users\KiKo-SaMa\Desktop\C++\DVD_App\Customer.cpp:46:6: note:   no known conversion for argument 2 from 'const Customer' to 'Customer&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:170:4: error: no match for 'operator==' in '__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Customer*, _Container = std::vector<Customer>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = Customer&]() == __val'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:170:4: note: candidates are:
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/postypes.h:218:5: note: template<class _StateT> bool std::operator==(const std::fpos<_StateT>&, const std::fpos<_StateT>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_pair.h:201:5: note: template<class _T1, class _T2> bool std::operator==(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_iterator.h:285:5: note: template<class _Iterator> bool std::operator==(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_iterator.h:335:5: note: template<class _IteratorL, class _IteratorR> bool std::operator==(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/allocator.h:122:5: note: template<class _T1, class _T2> bool std::operator==(const std::allocator<_T1>&, const std::allocator<_T2>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/allocator.h:127:5: note: template<class _Tp> bool std::operator==(const std::allocator<_Tp1>&, const std::allocator<_Tp1>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2427:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator==(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2434:5: note: template<class _CharT> typename __gnu_cxx::__enable_if<std::__is_char<_Tp>::__value, bool>::__type std::operator==(const std::basic_string<_CharT>&, const std::basic_string<_CharT>&)
Process terminated with status 1 (0 minutes, 1 seconds)
50 errors, 0 warnings 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:36:59.490

您应该处理您的 const 正确性，问题是您的相等比较器通过非 const 引用获取参数，但最后一个参数`find`是通过`const`引用获取的，这意味着编译器不能在那里使用它。

顺便说一句，一旦您添加了`const`那里，您将被迫向`const`数据添加访问器。此外，如果您的操作员仅使用公共接口，则无需将其声明为朋友

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:36:36.200

CodeBlocks 可能会给出有关 stl 文件的错误，但它们实际上并不是错误。它显示了您的错误的相关 stl 文件。

# objective-c - fetchRequestFromTemplateWithName 返回 nil

> ID：10363971
> 
> 赞同：0
> 
> 时间：2012-04-28T13:32:17.633
> 
> 标签：objective-c, ios, core-data

![在此处输入图像描述](../Images/03c4c3c6223ab43c2102d1858887e49a.png)

我添加了 FETCH REQUESTS 并编写了以下代码。

```
NSFetchRequest *fetchRequest = [delegate.managedObjectModel 
   fetchRequestFromTemplateWithName:@"isUser" 
              substitutionVariables:nil]; 
```

但 fetchRequest 返回 nil。帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:01:59.867

从文档中`fetchRequestFromTemplateWithName:`：

> 变量字典必须为**所有**变量提供值。如果要测试 nil 值，请使用 [NSNull null]。

```
NSFetchRequest *fetchRequest = [delegate.managedObjectModel 
  fetchRequestFromTemplateWithName:@"isUser" 
  substitutionVariables:[NSDictionary dictionaryWithObjectsAndKeys:
      @"type", [NSNull null], nil]]; 
```

也许您正在寻找`fetchRequestTemplateForName:`没有替换变量的工作。

# ios - iOS - 核心数据 - 完成处理程序

> ID：10363972
> 
> 赞同：0
> 
> 时间：2012-04-28T13:32:20.540
> 
> 标签：ios, core-data

**概述**

*   我有一个使用核心数据的 iOS 项目
*   核心数据被视图控制器和通知使用

**执行**

*   为名为的数据库活动创建了一个单例类`DatabaseEngine`
*   在 appDelegate`didFinishLaunchingWithOptions`中，`DatabaseEngine`被实例化
*   `DatabaseEngine`包含视图控制器和通知的属性（委托）
*   在`viewDidLoad`视图控制器中，我将`DatabaseEngine`委托设置为视图控制器实例
*   打开数据库后，完成处理程序（通过委托属性）调用方法来设置视图控制器和通知

**关注（时间问题）**

*   我担心可能存在这样的场景（时间问题），其中`DatabaseEngine`首先创建了视图控制器，此时`viewDidLoad`不会执行视图控制器，因此`DatabaseEngine`不会初始化委托，因此数据库将执行完成处理程序，但由于委托是无，不会完成任何任务

**我做了什么来解决这个问题**

*   在视图控制器的 viewDidLoad 中，我正在检查数据库是否已启动以及是否未加载视图控制器，如果是，则我再次执行任务（设置视图控制器的视图）。

**注意-**我没有明确使用线程，但根据我的理解，completionHandler 是异步执行的。

**问题**

1.  试了几次，视图控制器数据加载正确，似乎没有计时问题。我什至尝试循环遍历一个大值（以产生延迟），但仍然没有时间问题。我想知道为什么 ？
2.  我的实现是一个好的设计还是有更好的方法来做到这一点？
3.  这是解决我的担忧的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T17:34:56.567

我认为最好的方法也是让您的应用程序委托管理数据。似乎是最好的方法，这是默认 CD 应用程序模板所做的。

我会考虑使用 MagicalRecord，如果你问我，这真是太棒了。使用 MagicalRecord，您只需调用即可`[NSManagedObjectContext MR_defaultContext];`获得默认上下文。MR 也有很棒的免费类方法，比如

`NSArray *array = [SomeObject findAll]`

它返回一个包含所有 CD 对象的数组。您甚至可以设置谓词等，而且速度非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T16:59:57.997

你的设计有点复杂，但看起来很扎实。（我更喜欢由应用程序委托管理核心数据，但如果您愿意，您的方法也一样好。）

但是，我会使用通常的数据库引擎类延迟初始化模式。这样，当它被需要但实际上不存在时，它将创建自己并执行必要的初始化例程，而视图控制器将等待直到对引擎的调用返回一些东西。

```
// in view controller viewDidLoad, e.g.
self.managedObjectContext = [databaseEngine managedObjectContext]; 
```

如果上下文没有初始化，就会发生在这里。

# asp.net-mvc - 在 ASP.NET MVC 中预加载数据

> ID：10363976
> 
> 赞同：0
> 
> 时间：2012-04-28T13:32:40.457
> 
> 标签：asp.net-mvc, preloading

我有一些需要很长时间才能加载的大数据（字典、索引等）。那么我如何才能预加载这些数据，然后在对我的站点的每个请求中使用（当然不加载）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T19:45:20.503

这个问题太抽象了，但是如果内存不是一个约束，那么您可能会考虑在 application_start() 执行期间将数据预加载到等效数据结构的静态对象中。但是，如果数据被更改，请确保重新加载数据。观察者设计模式或类似的设计模式可能对这些场景很方便。

# asp.net-mvc - 将注释绑定到我在 EF 中的实体

> ID：10363980
> 
> 赞同：1
> 
> 时间：2012-04-28T13:33:01.923
> 
> 标签：asp.net-mvc, entity-framework

我刚刚开始为我的网站创建评论系统。我正在使用 EF，我想将我的一些表绑定到 Comments 表。我们可以说我在两个单独的表中有一个 Car 实体和一个 Bike 实体，我想绑定这两个表的注释集合。

在我的脑海中，我有一张评论表将包含的图片：

```
CommentID | EntityID | CommentText

      1        Bike_2    Hello world..

      2         Car_2         -- 

      3        Bike_3         -- 
```

我想对了吗？如何使用实体框架进行设置？

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:23:07.733

（以下适用于 Entity Framework 4.1 到 4.3.1 和 Code-First/ `DbContext`。）

最接近您的想法的映射类型是[Table-per-Type (TPT) 继承映射](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)。它看起来像这样：

```
public abstract class EntityWithComments
{
    public int Id { get; set; }
    public ICollection<Comment> Comments { get; set; }
}

public class Comment
{
    public int Id { get; set; }
    public string CommentText { get; set; }

    public int EntityId { get; set; }
    public EntityWithComments Entity { get; set; }
}

public class Car : EntityWithComments
{
    public string Manufacturer { get; set; }
    public string Color { get; set; }
}

public class Bicycle : EntityWithComments
{
    public int Weight { get; set; }
    public bool HasThreeWheels { get; set; }
} 
```

`EntityWithComments`是一个基类`Car`，`Bicycle`也许还有其他实体。然后你有一个派生`DbContext`类：

```
public class MyContext : DbContext
{
    public DbSet<EntityWithComments> EntitiesWithComments { get; set; }
    public DbSet<Comment> Comments { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Car>()
            .ToTable("Cars");

        modelBuilder.Entity<Bicycle>()
            .ToTable("Bicycles");
    }
} 
```

结果，您在数据库中有四个表：

*   一个`Comments`看起来像您的提案但`EntityId`不直接引用`Cars`and表的`Bicycles`表。相反，它指的是基本类型表`EntitiesWithComments`。

*   表示抽象基类的表`EntitiesWithComments`，它只有一个列，即`Id`列。

*   在表和表`Cars`之间具有一对一共享主键约束`Id`的`Id`表`EntitiesWithComments`

*   在表和表`Bicycles`之间具有一对一共享主键约束`Id`的`Id`表`EntitiesWithComments`

然后，您可以 - 例如 - 加载所有蓝色汽车：

```
using (var ctx = new MyContext())
{
    var blueCars = ctx.EntitiesWithComments.OfType<Car>()
        .Where(c => c.Color == "Blue")
        .ToList();
} 
```

因为`EntitiesWithComments`基表不包含任何列，除了`Id`表之间没有必要的连接。生成的 SQL 如下所示，仅涉及派生类型的表：

```
SELECT 
'0X0X' AS [C1], 
[Extent1].[Id] AS [Id], 
[Extent1].[Manufacturer] AS [Manufacturer], 
[Extent1].[Color] AS [Color]
FROM [dbo].[Cars] AS [Extent1]
WHERE N'Blue' = [Extent1].[Color] 
```

（我猜，这个查询中的奇怪`0X0X`值是 EF 用来检查返回的行是否真的是汽车的类型描述符，但我不确定。）

如果您想加载所有带有三个轮子的自行车，包括他们的评论，则以下查询有效：

```
using (var ctx = new MyContext())
{
    var bicyclesWithThreeWheelsWithComments = ctx.EntitiesWithComments
        .Include(e => e.Comments)
        .OfType<Bicycle>()
        .Where(b => b.HasThreeWheels)
        .ToList();
} 
```

# emacs - 如何打开临时缓冲区

> ID：10363982
> 
> 赞同：16
> 
> 时间：2012-04-28T13:33:04.610
> 
> 标签：emacs

很长一段时间以来，我已经完成了：`C-x b`然后是一些“独特”的名称，例如`xbxb`. 所以我使用 `switch-to-buffer`不存在的缓冲区。你可以想象`C-x C-b`给我看的东西：很多这样的名字。`xbxb`, `xbxbxxx`.... 一段时间后（一周左右）真的很烦人，因为我发现我已经使用了所有好名字。

有没有更规范的方法来打开一个新的缓冲区？如果我想再运行一次 shell，我会说`C-u M-x shell`. 沿着这条线的东西将是理想的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T16:39:33.177

您可以使用`make-temp-name`随机后缀为文件或缓冲区生成名称。以此为基础，您可以编写如下内容：

```
(defun generate-buffer ()
  (interactive)
  (switch-to-buffer (make-temp-name "scratch"))) 
```

其中“scratch”可以替换为您想要的任何前缀。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-28T14:44:59.317

这样做：

```
(defun new-scratch ()
  "open up a guaranteed new scratch buffer"
  (interactive)
  (switch-to-buffer (loop for num from 0
                          for name = (format "blah-%03i" num)
                          while (get-buffer name)
                          finally return name))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T18:17:27.613

我注册只是为了回答这个问题（因为我经常使用这个功能，所以我认为在这里分享它会很有用）：

```
(defun tmpbuf (buf)
  "open a buffer,
if it doesn't exist, open a new one"
  (interactive "sBuffer name: ")
  (switch-to-buffer
   (get-buffer-create (concat "*" buf "*")))) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-29T04:57:21.320

我不确定你想要什么。您说“我发现我已经使用了所有好的名称”，所以让 Emacs 生成名称不会有任何好处，但是如果您要自己指定名称，它不会变得更规范比`C-x``b` `name` `RET`。

否则，已经建议您输入一个字符串并将其与某种“tmp 缓冲区”模式一起使用来创建新名称的功能之一似乎是明智的。

或者，如果您真正想要的是每个主要模式的单个临时缓冲区，[scratch.el可能会很有用。](https://github.com/ieure/scratch-el)

您几乎可以肯定地从绑定`C-x``C-b`到`ibuffer`，并使用过滤器和/或组将临时缓冲区与更重要的缓冲区分开。这将处理列表变得混乱。

您似乎对编写新函数感到奇怪？即使确实有内置的东西，使用自定义函数也没有*错*——这通常是你根据自己的喜好自定义 Emacs 的方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-02T06:26:45.590

我用它来打开一个临时缓冲区。好东西？帮助我跟踪我打开了哪些缓冲区以及何时打开。

```

```
(defun tmp-buffer()
  "Make a temporary buffer and switch to it - Like C-n for Sublime etc"
  (interactive)
  (switch-to-buffer (get-buffer-create (concat "tmp-" (format-time-string "%m.%dT%H.%M.%S"))))) 
```

```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-17T07:05:42.060

```
(defun yashi/new-scratch-buffer-in-org-mode ()
  (interactive)
  (switch-to-buffer (generate-new-buffer-name "*temp*"))
  (org-mode))
(bind-key "<f7>" 'yashi/new-scratch-buffer-in-org-mode) 
```

我正在使用[deft](http://jblevins.org/projects/deft/)快速记笔记，但有时我知道我不需要内容，但在 Org 模式下需要一个缓冲区。为此，它一直在为我服务。再次点击`F7`将创建一个名称相似的缓冲区，`*temp*<2>`在我的例子中，根据[Uniquify](https://www.gnu.org/software/emacs/manual/html_node/emacs/Uniquify.html)。

顺便说一句，如果您有兴趣，这是一个使用新的 deft 文件启动新缓冲区的命令。 `F6`启动它。

```
(defun yashi/deft-new-file ()
  (interactive)
  (let ((deft-filter-regexp nil))
    (deft-new-file)))
(bind-key "<f6>" 'yashi/deft-new-file) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-17T07:41:00.600

您有权访问[其他人的](https://stackoverflow.com/questions/10363982/how-can-i-open-a-temporary-buffer/35450574#comment13375084_10369801)Emacs，并且您想打开一个新缓冲区。如果你幸运的话，这个人已经设置`enable-recursive-minibuffers`了`t`。如果没有，你可以暂时`M-:`对这个 Emacs Lisp 表达式进行 eval （不要忘记稍后恢复这个参数）：

```
(setq enable-recursive-minibuffers t) 
```

现在，您打开一个新缓冲区：

*   `C-x``b`提示输入缓冲区名称
*   `C-u``M-:`将 eval 并将表达式的结果打印到 minibuffer 提示符：

    ```
    (random) 
    ```

*   这为您提供了一个可表示整数（包括负整数）范围内的随机数，这不太可能已经被采用。按`Return`结束以切换到新缓冲区。

# haskell - haskell 素数构造列表；歧义类型变量

> ID：10363983
> 
> 赞同：1
> 
> 时间：2012-04-28T13:33:06.133
> 
> 标签：haskell, ambiguous

我正在尝试创建`primes`一个素数列表的函数，但不知何故我失败了。编译器抛出一个我不知道如何解决的错误：

**错误：**

`Ambiguous type variable 'a0'`

**代码：**

```
candidates :: [Integer]
candidates = [2]++[3,5..]

primes :: [Integer]
primes = filter is_prime candidates

is_prime :: Integer -> Bool
is_prime candidate
    | candidate == 1 = False
    | candidate == 2 = True
    | candidate == 3 = True
    | otherwise = r_is_prime candidate 0

-- r as recursive
r_is_prime :: Integer -> Integer -> Bool
r_is_prime candidate order
    | n_th_prime >= max_compared_prime = True
    | candidate `mod` n_th_prime  == 0 = False
    | otherwise = if (r_is_prime candidate (order+1) ) then True else False
    where 
        n_th_prime = candidates !! fromIntegral(order)
        -- this is the line that throws an error...
        max_compared_prime = fromIntegral ( ceiling ( fromIntegral ( sqrt ( fromIntegral candidate)))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:42:23.260

在

```
max_compared_prime = fromIntegral ( ceiling ( fromIntegral ( sqrt ( fromIntegral candidate)))) 
```

你有`fromIntegral`太多了。`sqrt`有类型

```
sqrt :: Floating a => a -> a 
```

所以结果`sqrt`不是`Integral`类型的成员。并且结果`ceiling`是一个`Integral`类型，所以最后一个`fromIntegral`是多余的（但不会有害）。

```
max_compared_prime = ceiling ( sqrt ( fromIntegral candidate)) 
```

是您在该行中所需要的。

但是请注意，

```
n_th_prime = candidates !! fromIntegral(order) 
```

意味着要针对第`n`-个候选素数进行测试，必须遍历候选列表，直到`n`达到第-个素数。因此，`n`这里对第 -th 个候选者的测试是 O(n) 而不是 O(1) [好吧，假设数字是有界的]，这是一个单一的除法。

更有效的试除法只尝试除法的素数，并记住当它进入下一个素数时它在素数列表中的位置。例如

```
is_prime :: Integer -> Bool
is_prime n
    | n < 2     = False
    | n < 4     = True
    | otherwise = trialDivision primes
      where
        r = floor (sqrt $ fromIntegral n)
        trialDivision (p:ps)
            | r < p     = True
            | otherwise = n `rem` p /= 0 && trialDivision ps 
```

只需遍历素数列表以进行试验除法，因此从一个素数到下一个素数是列表中的一个简单步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T13:45:55.753

`fromIntegral`你的 s太多了

```
max_compared_prime = fromIntegral ( ceiling ( fromIntegral ( sqrt ( fromIntegral candidate)))) 
```

`fromIntegral`应用于结果导致`sqrt`错误。如果我们查看类型签名，我们有：

```
fromIntegral :: (Num b, Integral a) => a -> b
sqrt :: Floating a => a -> a 
```

因此，要正确推断`fromIntegral (sqrt x)`Haskell 的类型，需要找到同时具有`Floating`和`Integral`实例的类型（以便 的结果`sqrt`与 的参数匹配`fromIntegral`）。Haskell 找不到这样的类型，因此（基本上）要求您指定一个（但没有一个）。解决方案是忽略这个`fromIntegral`：

```
max_compared_prime = fromIntegral ( ceiling ( sqrt ( fromIntegral candidate))) 
```

### 其他注意事项

括号并不是特别惯用的 Haskell，因此该行可以/应该写成：

```
max_compared_prime = fromIntegral . ceiling . sqrt . fromIntegral $ candidate 
```

此外，结果`ceiling`不需要转换，因此它甚至可以是：

```
max_compared_prime = ceiling . sqrt . fromIntegral $ candidate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:43:31.063

从“sqrt”之前删除“fromIntegral”，如下：

```
max_compared_prime = fromIntegral ( ceiling ( sqrt ( fromIntegral candidate))) 
```

类型有：

```
sqrt :: Floating a => a -> a
fromIntegral :: (Integral a, Num b) => a -> b 
```

sqrt 的输出是“浮动的”，而不是积分的。

# mysql - 如何将多个选择查询合二为一？

> ID：10363985
> 
> 赞同：0
> 
> 时间：2012-04-28T13:33:54.267
> 
> 标签：mysql

我有三个结构表

```
CREATE TABLE IF NOT EXISTS `refrence` (
  `products_ref_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `categories_id` int(11) NOT NULL,
  `Product_property` varchar(255) NOT NULL,
  `Product_reference` varchar(50) NOT NULL,
  PRIMARY KEY (`products_ref_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;

CREATE TABLE IF NOT EXISTS `product_details` (
  `products_id` int(11) NOT NULL AUTO_INCREMENT,
  `categories_id` int(11) NOT NULL,
  `FieldA` varchar(30) NOT NULL,
  `FieldB` varchar(50) NOT NULL,
  `FieldC` varchar(255) NOT NULL,
  `FieldD` varchar(255) NOT NULL,
  `FieldE` varchar(255) NOT NULL,
  `FieldF` varchar(255) NOT NULL,
  `Field_desc` text NOT NULL,
  PRIMARY KEY (`products_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=98 ; 
```

在这里，我从参考表中提取 Product_reference 值关于 Product_property 和 categories_id 为

```
SELECT Product_reference FROM refrence where categories_id=3 AND Product_property ='xxx' 
```

现在这个 Product_reference 是 product_details 表中的字段名称，假设结果是**abc**。所以我想从 product_details 表中提取不同的 abc 作为

```
SELECT Distinct abc FROM product_details where categories_id=3 
```

现在我想将两个查询合并为一个，将这些查询写入单个查询的方法是什么。

我试过这个

```
SELECT Distinct (
SELECT Product_reference FROM refrence where categories_id=3 AND Product_property ='xxx'
) as aa FROM product_details where categories_id=3 
```

但它不起作用，可能是我错过了一些语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:49:54.863

在不知道什么不起作用的情况下，您似乎正在尝试完成此操作：

```
SELECT r.product_reference
FROM refrence AS r 
LEFT JOIN categories AS c ON (c.categories_id = r.categories_id AND r.categories_id=3 AND     r.product_property='zzz')
WHERE c.categories_id=1 
```

正如 Eggyal 所指出的，由于 category_id=1 和 category_id=3 的不可能条件，这将始终不返回任何内容，所以要么：它们都必须为 1，要么都必须为 3，或者它们是完全不同的“类别”是不相关的，或者只是碰巧有相同的名字。

# mysql - 如何将生产服务器中的数据移动到测试服务器上的数据库：MYSQL

> ID：10363986
> 
> 赞同：0
> 
> 时间：2012-04-28T13:33:58.463
> 
> 标签：mysql, sql, database, replication, database-replication

`A`我的产品服务器上的表中有数据。我想将其中的数据移动到`A`我的测试服务器上的表（同名）中。

不将数据导出到某个文件然后插入到我的测试表中的简单方法是什么？

谢谢。我环顾 S/O，找不到满意的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:18:48.143

如果您在两台服务器上都安装了 phpmyadmin，请执行以下操作

1.  转到产品服务器上 phpmyadmin 中的表
2.  单击导出并导出为 .sql
3.  转到测试服务器上 phpmyadmin 中的表
4.  单击导入并上传 .sql 文件

如果您的数据库超过 8 MB，您可以随时对其进行压缩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:40:29.267

如果您有 SqlYog 之类的工具，只需单击几下鼠标就非常简单，否则您将无法做到这一点，因为查询是在 db 连接的上下文中工作的，并且对于不同的服务器，您需要不同的连接。

# css - CSS：定位 div

> ID：10363991
> 
> 赞同：0
> 
> 时间：2012-04-28T13:34:37.670
> 
> 标签：css, css-float

我尝试像这样定位元素 ![在此处输入图像描述](../Images/4b003c983ffdd9b69f4cf23909271a17.png)

但我明白了 ![在此处输入图像描述](../Images/955ab50ebd2386c1affb2361b17eee8a.png)

html是

```
<div class="letters">
 <p class="letter">A</p>
 <p class="glostitle"></p>
</div> 
```

CSS是

```
.letters {
    display: block;
    float: left;
    position: relative;
    text-align: center;
    text-transform: uppercase;
    width: 280px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:53:56.630

我认为如果没有 javascript，您将无法实现这一目标。

我能得到的更好的是：http: [//jsfiddle.net/QeWz2/2/](http://jsfiddle.net/QeWz2/2/)

我使用`display: inline-block`并`vertical-align: top`获得了这种行为

**更新**

我认为[Columnizer](http://archive.plugins.jquery.com/project/Columnizer)是您正在寻找的 jQuery 插件。

# c# - 外墙包装设计

> ID：10363994
> 
> 赞同：1
> 
> 时间：2012-04-28T13:35:12.373
> 
> 标签：c#, oop, unit-testing

我来自 Java，而且我对 C# 还很陌生，所以请多多包涵，以防我不使用正确的术语或者我正在考虑“java-ish”。

## 情况

我正在开发一个包（同一命名空间中的所有类），它提供外观以使用来自一些远程服务的数据。对于每个外观，都有一个接口（如`IEventServiceGateway`）和一个实现（如`EventServiceGateway`），都已声明`public`。这些实现中的每一个都使用来自至少一个服务的数据，有点冗长，所以我为每个实现编写了一个客户端类（如`UserServiceClient`），为所有实现提供通用操作。因为包外的任何人都不应该使用它们，所以我声明了它们`internal`。此外，我对 WCF 代理做了同样的事情。

我有两个程序集，一个用于外观和客户端，一个用于单元测试，两者的命名空间是相同的。

## 问题

*   我无法对内部类进行单元测试，因为它们在包含单元测试的程序集中是不可访问的。我知道有“黑客”可以规避这些限制，但使用这种黑客通常意味着我使用的东西不是预期的。不测试客户端似乎不是一个明智的解决方案，因为仅测试外观时代码路径会非常复杂。此外，我会一遍又一遍地测试同样的东西，比如边缘情况。
*   我无法使用构造函数注入将内部类注入到外观中，因为参数的可见性“低于”构造函数的可见性。但是 WCF 代理的硬编码会降低可测试性。

所以我有一种感觉，要么我的设计很糟糕，因为我完全误解了门面的东西（只有门面和它们的实现应该是可访问的，没有别的），我的项目设置有缺陷，或者还有其他问题。

如果有人能启发我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:33:17.700

您可以使用[InternalsVisibleToAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性：

当您将其添加到您的内部程序集时，您可以指定其他通常无法访问的程序集。

# bash - 如何使用bash从文本文件中提取列

> ID：10363996
> 
> 赞同：1
> 
> 时间：2012-04-28T13:35:27.773
> 
> 标签：bash, awk

我有一个这样的文本文件。

```
 res          ABS   sum     
 SER A   1   161.15 138.3  
 CYS A   2    66.65  49.6  
 PRO A   3    21.48  15.8  
 ALA A   4    77.68  72.0  
 ILE A   5    15.70   9.0  
 HIS A   6    10.88   5.9 
```

我想根据最后一列（总和）的值提取第一列（res）的名称。如果 sum >25 和 sum<25，我必须打印 resnames。我怎样才能得到这样的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:47:46.893

虽然您可以使用`while read`循环来执行此操作`bash`，但使用起来更容易，而且很可能更快`awk`

```
awk '$5 != 25 { print $1 }' 
```

请注意，您的逻辑`print resnames if sum >25 and sum<25`与`print if sum != 25`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:48:54.663

这应该这样做：

```
awk 'BEGIN{FS=OFS=" "}{if($5 != 25) print $1}' bla.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T13:49:44.123

考虑使用`awk`. 它是处理文本列（以及更多）的简单工具。这是一个简单的[awk 教程](http://www.hcs.harvard.edu/~dholland/computers/awk.html)，它将为您提供概述。如果您想在 bash 脚本中使用它，那么[本](http://www.cyberciti.biz/faq/bash-scripting-using-awk/)教程应该会有所帮助。

在命令行上运行它，让您了解如何做到这一点：

```
> echo "SER A   1   161.15 138.3" | awk '{ if($5 > 25) print $1}'
> SER
> echo "SER A   1   161.15 138.3" | awk '{ if($5 > 140) print $1}'
> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T14:02:36.890

```
while read line
do 
v=($line)
sum=${v[4]}
((${sum/.*/} >= 25)) && echo ${v[0]}
done < file 
```

您需要跳过第一行。

由于 bash 不处理浮点值，这将打印 25，它并不完全大于 25。

这可以通过调用 bc 来处理算术。

```
tail -n +2 ser.dat | while read line
do  
  v=($line)
  sum=${v[4]}
  gt=$(echo "$sum > 25" | bc) && echo ${v[0]}
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T20:24:13.007

好的旧剪裁呢？:)

说你想要第二列，

```
cat your_file.txt | sed 's, +, ,g' | cut -d" " -f 2 
```

sed 在这个命令中做了什么？cut 期望列由一个字符或一个固定长度的字符串分隔（参见文档）。