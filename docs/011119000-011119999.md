# StackOverflow 问答 11119000-11119999

# php - 在 foreach 中调用类仅最后一次调用有效

> ID：11119002
> 
> 赞同：1
> 
> 时间：2012-06-20T11:56:52.403
> 
> 标签：php, oop, foreach

大家好，大家好，

我编写了一个脚本，它读取包含一行或多行的字符串。然后将在数组中读取这些行以进行循环。每行包含一个类和一个在 foreach 中调用的方法。调用方法的结果保存在要返回的 var 中。

我现在的问题是，在返回我该方法不存在之前，只有最后一个调用被执行所有其他调用，即使我改变了行的顺序，最后一个调用总是有效的。这包括所有方法都在那里并且有效。

线条看起来像这样

> class_1/method1 class_2/method2 class_2/method1

我用 foreach 循环的给定数组看起来像这样

> 大批（
> 
> > [0] => class_1/method1 [1] => class_2/method2 [2] => class_2/method1

现在我的代码像这样转换新数组中的每个项目

> 大批（
> 
> > [0] => class_1 [1] => 方法1

在其中调用类 class_1 和 method1

我的代码是这个

```
 public function execute_lines($f){
     $cont = "";  // contains the results of all calls

     if($l = $this->get_line_array($f)){  // $l contains the array of all lines
        foreach($l as $k => $v){        
        if(strpos($v,"/")){     
         $a = explode("/",$v);  // $a contanis the array with the class and method and may be further data to be used in the methods called
         $c = ucfirst($a[0]);   // var of the Class
         $m = strtolower($a[1]);  // var of the methode
         unset($a[0],$a[1]);  // delete the first two items so that the array contains only further data

         if(method_exists($c,$m)){  // see if the method exists
            $x = new $c();  // instantiate the Class
            $cont .=  $x->e($m,$a);  // save result 
            print "-<br />";  // control if the method exits
         }else{
            print "/<br />";  // control if the method does not exists 
         }
        }
     }
    }   
    return $cont;  // returns the cont
    } 
```

结果是

"/" "/" 然后只有最后一次调用的内容应该出现的地方

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:27:21.310

如果您正在从文件中读取行，那么每行都会附加一个换行符（似乎只有最后一行没有）

更改您的代码并重试

```
foreach($l as $k => $v){     
    $v = trim($v); // trim whitespace

    if(strpos($v,"/")){
        ...
    }
} 
```

# ruby-on-rails-3 - 如何跟踪用户在另一个站点上的操作？

> ID：11119005
> 
> 赞同：1
> 
> 时间：2012-06-20T11:56:58.390
> 
> 标签：ruby-on-rails-3, cookies, setcookie

我在做优惠券赠送平台。我在 Rails 平台上工作。

我的问题是我想跟踪用户是否使用我网站提供的优惠券进行了结帐。

意味着假设我正在运行 xyz.com 以提供 abc.com 的礼券。那么，如果任何用户使用我网站上的优惠券代码结账，我将如何知道这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:48:46.547

在其他站点使用优惠券数据为您提供对他购买的某种访问权限之前，这是不可能的。

# php - 在用户浏览器中保存时命名图像

> ID：11119007
> 
> 赞同：0
> 
> 时间：2012-06-20T11:57:03.070
> 
> 标签：php, image

我创建了一张图片，但问题是当我从浏览器保存图片时，它保存为 image.php 但我想将其保存为从 php 发送的自定义名称

```
<?php

$my_img = imagecreatefromjpeg("images/photo.jpg");
$nw = 400;
$nh = 500;
$img2 = imagecreatetruecolor($nw, $nh);
imagecopyresampled($img2, $my_img, 0, 0, 0, 0, $nw, $nh, imagesx($my_img), imagesy($my_img));

header("Content-type: image/jpeg");
header('filename="Custome Name.jpeg"');
imagejpeg($img2,NULL,60);
imagedestroy($img2);
?> 
```

当用户保存图像时，它必须保存为从服务器发送的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:59:10.040

替换这一行，

```
header('filename="Custome Name.jpeg"'); 
```

和

```
header('Content-Disposition: attachment; filename="custom_name.jpg"'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:09:36.577

基于 bsdnoobz 答案，尝试使用*内联*值*Content-Disposition*：

```
header('Content-Disposition: inline; filename="custom_name.jpg"'); 
```

代替 ：

```
header('filename="Custome Name.jpeg"'); 
```

# excel - excel计数/匹配问题

> ID：11119009
> 
> 赞同：1
> 
> 时间：2012-06-20T11:57:03.663
> 
> 标签：excel, excel-formula

我在实现我所追求的 excel 功能时遇到问题，这是我下面的数据。我试图让它计算不同用户的数量，这在第二列中与最后一列的筒仓相比有所描述。

```
175 u544835 E&T-Aero    175 comp04_899  13/06/2012  Silo 4
175 u403114 E&T-Aero    175 comp04_900  14/06/2012  Silo 4
175 u403115 E&T-Aero    175 comp04_901  15/06/2012  Silo 4
176 u403116 Fans-AE     176 comp04_902  13/06/2012  Silo 4
177 u403117 Fans-Mech   177 comp04_903  13/06/2012  Silo 4
178 u544835 CA-WEM      178 comp04_904  13/06/2012  Silo 4
179 u544835 Nacelles    179 comp04_905  13/06/2012  Silo 4
180 u544835 Nacelles    180 comp04_906  13/06/2012  Silo 4
181 u544835 E&T-Aero    181 comp04_907  15/06/2012  Silo 4
186 u544835 E&T-Aero    186 comp04_908  20/06/2012  Silo 4
187 u544835 E&T-Aero    187 comp04_909  20/06/2012  Silo 4
189 u544833 E&T-Aero    189 comp04_910  20/06/2012  Silo 4
192 u544834 E&T-Aero    192 comp04_911  20/06/2012  Silo 4
193 u544835 Comp-AD     193 comp04_912  20/06/2012  Silo 4 
```

到目前为止，我的努力已经给了我：

```
=SUM(IF(FREQUENCY(MATCH($FF$2:$FF$15,$FF$2:$FF$15,0),MATCH($FF$2:$FF$15,$FF$2:$FF$15,0))>0,1)) 
```

这告诉我列表中有多少不同的用户，但不是针对 Silo 的不同用户

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:14:00.117

如果筒仓在 FK 列中，则此版本将为您提供筒仓 4 的不同用户数

`=SUM(IF(FREQUENCY(IF($FK$2:$FK$15="silo 4",IF($FF$2:$FF$15<>"",MATCH($FF$2:$FF$15,$FF$2:$FF$15,0))),ROW($FF$2:$FF$15)-ROW($FF$2)+1),1))`

这是一个数组公式，需要用 CTRL+SHIFT+ENTER 确认

在 Excel 2007 或更高版本中，您也可以使用此版本

=SUMPRODUCT(($FK$2:$FK$15="silo 4")/COUNTIFS($FK$2:$FK$15,$FK$2:$FK$15&"",$FF$2:$FF$15,$FF$2 :$FF$15&""))

注意：仅适用于不同的用户（即替换上面的公式）使用此版本会更简单

`=SUMPRODUCT(($FF$2:$FF$15<>"")/COUNTIF($FF$2:$FF$15,$FF$2:$FF$15&""))`

# java - 在 Guice 初始化中使用之前注入的绑定

> ID：11119010
> 
> 赞同：2
> 
> 时间：2012-06-20T11:57:10.260
> 
> 标签：java, guice, actor, akka

我需要解决奇怪的任务：我有 A 类，它是由 Guice 创建的：

```
bind(A.class) 
```

但后来我需要用 A 类初始化 Actor（本质上是 Actor）：

```
actorSystem.actorOf(
  new Props(
    new UntypedActorFactory() {
      public UntypedActor create() {
         /// ????
      }
    })
 ); 
```

如何返回先前绑定的演员 A 的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:50:53.723

我可能会误解 所暗示的问题`????`，但是当您使用 Guice 时，您通常会尽量避免更新很多对象。当您需要一个由 Guice 管理的新对象时，您只需请求该类型的提供者即可。即使您没有为它编写提供程序，也有一个隐式提供程序，Guice 可以在其绑定的范围内重新使用该对象，或者为您提供一个带有它需要的注入对象的新提供程序。

它可能看起来像：

```
class WhateverClassThisIs {
  private provider<A> providesA;

  @Inject
  public WhateverClassThisIs(provider<A> providesA) {
    this.providesA = providesA;
  }

  public whateverMethodThisIs() {
    actorSystem.actorOf(
    new Props(
      new UntypedActorFactory() {
        public UntypedActor create() {
           /// ???? translation: I need an object A here.
           A a = providesA.get();
        }
      })
    );
  }
} 
```

如果您可以编辑其他类类型，则可以改为注入其构造函数/方法所需的对象，从而消除更多使用 new。

另一方面，如果您说要获得正确的类型，`A`您需要执行此`actorSystem.actorOf`调用，那么您需要实现一个提供者来执行`A`此操作，而不仅仅是绑定它。

# python - Python：使用列表值添加到字典的最佳方式

> ID：11119011
> 
> 赞同：5
> 
> 时间：2012-06-20T11:57:15.033
> 
> 标签：python, dictionary

我正在构建一个类，其中包含一个带有整数键和列表值的字典。不过，向这个字典添加值似乎是一个真正的瓶颈，我想知道是否有某种方法可以加快我的代码速度。

```
class myClass():

  def __init__(self):
    self.d = defaultdict(list)

  def addValue(self, index, value):
    self.d[index].append(value) 
```

这真的是这样做的最佳方式吗？我并不真正关心值的顺序，所以也许有一个更合适的数据结构可以更快地追加。再说一次，“追加”似乎不是主要问题，因为如果我只是追加到一个空列表，代码会快很多。我猜是加载以前存储的列表占用了大部分时间？

* * *

我发现问题不在字典中，而是在附加列表中（尽管我在原始帖子中另有声明，对此我深表歉意）。这个问题是由于 Python 的垃圾收集器中的一个错误造成的，这在[另一个问题](https://stackoverflow.com/questions/2473783/)上得到了很好的解释。在添加所有值之前禁用 gc 然后重新启用它，极大地加快了进程！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:00:01.533

将其与此进行比较：

```
class myClass():

  def __init__(self):
    self.d = {}

  def addValue(self, index, value):
    self.d.setdefault(index, []).append(value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:22:25.540

他们说“请求宽恕比请求许可更好。”。现在您不是亲自征求许可，但我认为也许`defaultdict`可以，这就是减慢速度的原因。

`try`这个：

```
class myClass():

  def __init__(self):
    self.d = {}

  def addValue(self, index, value):
    try:
        self.d[index].append(value)
    except KeyError:
        self.d[index] = [value] 
```

这会尝试访问`index`字典中的键，如果它不存在，它将引发 a`KeyError`并对其进行操作。

是不是更快了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T08:28:15.547

作为结论，我可以说我在原始问题中的代码比所有其他建议更快或一样快。

# scroll - 带有滚动条的richfaces模态面板滚动整个页面

> ID：11119014
> 
> 赞同：0
> 
> 时间：2012-06-20T11:57:18.140
> 
> 标签：scroll, richfaces, modal-dialog, jsf-1.2

我正在使用 JSF 1.2 和 Richfaces，我需要使用带有滚动条的模式面板。行为是这样的： - 如果我使用鼠标滚轮滚动弹出窗口，那么当弹出滚动条到达顶部或末尾时，整个页面（从后面）都会滚动。- 如果我通过选择滚动条滚动弹出窗口，则页面不会滚动，只有弹出窗口。

我想要的行为是使用鼠标滚轮时页面永远不会滚动。知道如何实现这一目标吗？

# javascript - 使用javascript在类的基础上重新排列表格行

> ID：11119015
> 
> 赞同：0
> 
> 时间：2012-06-20T11:57:24.243
> 
> 标签：javascript, jquery, html

例如，我有这个代码：

```
<table>
    <tr>
      <td class="last"></td>
      <td></td>
    </tr>
    <tr>
      <td class="last"></td>
      <td></td>
    </tr>
    <tr>
      <td class="another"></td>
      <td></td>
    </tr>
    <tr>
      <td class="another"></td>
      <td></td>
    </tr>
</table> 
```

我希望使用javascript这样设置：

```
<table>
    <tr>
      <td class="another"></td>
      <td></td>
    </tr>
    <tr>
      <td class="another"></td>
      <td></td>
    </tr>
    <tr>
      <td class="last"></td>
      <td></td>
    </tr>
    <tr>
      <td class="last"></td>
      <td></td>
    </tr>
</table> 
```

所需要的是，javascript 应该检测带有“last”类的 td 并将整个表格行带到表格底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:59:53.443

```
var last = $( '.last' );
last.parent().parent().append( last.parent() ); 
```

[JSFiddle 演示](http://jsfiddle.net/Ralt/Jwg6M/)。

`last.parent().parent()`是`table`元素，`last.parent()`是`tr`元素。

`append` *移动*DOM 元素，因此它们不会被“复制”，它们被移动到最后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:01:23.680

你可以使用这个插件： [http ://tablesorter.com/docs/#Demo](http://tablesorter.com/docs/#Demo)

更高级的东西： [http ://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:01:34.973

试试这个...

```
$("table tr td.last").each(function () {
    $(this).parent().insertAfter($("table tr:last"));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:02:25.440

试试这个：

```
$('td').each(function(){
  if ($(this).hasClass('another')) {
     $(this).insertBefore($('td:first'))
  }
}) 
```

[演示](http://jsfiddle.net/DbHVd/1/)

# android - 查找 PenDrive 的路径

> ID：11119016
> 
> 赞同：1
> 
> 时间：2012-06-20T11:57:26.367
> 
> 标签：android, usb-drive

我是android的初学者。
如何在运行时以编程方式查找连接到 android 平板电脑的 PenDrive 的路径。
因为我需要将一些文件存储到pendrive中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:59:50.440

您需要询问您的设备制造商。目前，Android SDK 仅支持一种“外部存储”，而不会是“笔式驱动器”。

# asp.net - SquishIt 支持 SASS 吗？

> ID：11119017
> 
> 赞同：1
> 
> 时间：2012-06-20T11:57:29.080
> 
> 标签：asp.net, css, squishit

我正在使用[来自 Nuget 的 SquishIt 0.8.7](http://nuget.org/packages/SquishIt/0.8.7)。

但它似乎没有拿起我的 .sass 或 .scss 文件。它与 .less 文件完美配合（使用 dotLess）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:38:10.607

它显然是 alpha 版本：

[https://nuget.org/packages/SquishIt.Sass/0.9.0-alpha1](https://nuget.org/packages/SquishIt.Sass/0.9.0-alpha1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:42:24.030

0.9 将是第一个支持 Sass/Scss 的版本（尽管它将通过上面链接的附加包）。上述 WebActivator 包中包含的代码存在问题（它引用了不正确的命名空间），但预计很快会解决此问题。

# xpath - 在 xquery 中从 xml 文档中获取元素类型

> ID：11119021
> 
> 赞同：0
> 
> 时间：2012-06-20T11:57:34.567
> 
> 标签：xpath, xquery

我有以下 xml 文档，我需要一个 xquery 表达式来知道文档中有多少元素类型

```
 <category>
    <CD>
    <TITLE>Empire Burlesque</TITLE>
    <ARTIST>Bob Dylan</ARTIST>
    <COUNTRY>USA</COUNTRY>
    <COMPANY>Columbia</COMPANY>
    <PRICE>10.90</PRICE>
    <YEAR>1985</YEAR>
</CD>
<CD>
    <TITLE>Hide your heart</TITLE>
    <ARTIST>Bonnie Tyler</ARTIST>
    <COUNTRY>UK</COUNTRY>
    <COMPANY>CBS Records</COMPANY>
    <PRICE>9.90</PRICE>
    <YEAR>1988</YEAR>
</CD>
<CD>
  <book id="bk101">
  <author>Gambardella, Matthew</author>
  <title>XML Developer's Guide</title>
  <genre>Computer</genre>
  <price>44.95</price>
  <publish_date>2000-10-01</publish_date>
  <description>An in-depth look at creating applications 
  with XML.</description>
 </book>

 </category> 
```

所以我需要从查询中得到的返回值是`cd and book`. 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:15:16.160

使用 XQuery（或 XPath 2.0）`distinct-values(/category/*/local-name())`就足够了，结果是一个字符串值序列`CD, book`。

# spring - 春季批次。如何限制块的执行次数

> ID：11119036
> 
> 赞同：2
> 
> 时间：2012-06-20T11:58:12.990
> 
> 标签：spring, spring-batch

我最近开始使用 Spring Batch。任何人都可以告诉我如何限制 tasklet 中块的执行次数（即 ItemReader 和 ItemWrite 的调用）。

我在 tasklet 中设置了 allow-start-if-complete="false", start-limit="1"。然后我在块中设置 commit-interval="1" 。

```
<batch:step id="mig-chain-data">
<batch:tasklet allow-start-if-complete="false" start-limit="1">
<batch:chunk commit-interval="1" reader="reader" writer="writer"></batch:chunk>
</batch:tasklet>
</batch:step> 
```

我的期望是每次执行批处理作业时只运行一次 tasklet/chunk。但行为是块（读取器和写入器）被多次调用/无限。

任何人都可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T14:58:11.870

块的执行次数取决于`reader`; Spring Batch 不控制它。如果您的阅读器从数据库表中读取，此限制将是从您的 SQL 语句返回的记录数，或者如果它从文件中读取，它将是行数（在非常基本的情况下）

`start-limit`控制一个步骤可以启动的次数，而不是为这个步骤配置的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T15:32:13.120

在您自己的阅读器中添加两个参数：

```
private static int numberOfReading=0;
@Value("${batch.maxNumberOfReading}")
private int maxNumberOfReading; 
```

并在 read 方法中使用此变量来控制流程：

```
if(numberOfReading<maxNumberOfReading){

   // do what do yoou have to do

   numberOfReading++;

   // return the result to the writer
}
return null; 
```

属性文件中设置了 batch.maxNumberOfReading，值为 1

# wpf - 从数据网格中删除命令不起作用

> ID：11119049
> 
> 赞同：2
> 
> 时间：2012-06-20T11:58:58.953
> 
> 标签：wpf, mvvm, wpfdatagrid

我将一些记录与数据模板按钮绑定，用于删除 WPF 数据网格中选定行的记录。好吧，我的问题是删除命令不起作用。我真的不知道为什么它不起作用，尽管把所有事情都做对了。请查看代码并告诉我我做错了什么。你的一点点努力就能完成我的工作。谢谢

```
<Window x:Class="DemoMVVM.View.EmployeeDetails"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:viewModel="clr-namespace:DemoMVVM.ViewModel"
    Title="EmployeeDetails" Height="200" Width="500">
<Window.DataContext>
    <viewModel:EmployeeDetailsViewModel></viewModel:EmployeeDetailsViewModel>
</Window.DataContext>
<Grid>
    <DataGrid  AutoGenerateColumns="False" CanUserAddRows="False" ItemsSource="{Binding EmpDetailsList}" Grid.Column="0"  SelectedItem="{Binding SelectedRecord,Mode=TwoWay}" Margin="10,17,10,8" >

        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Path=Id}" IsReadOnly="True" Visibility="Collapsed" Width="90"></DataGridTextColumn>
            <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" IsReadOnly="True" Width="*"></DataGridTextColumn>
            <DataGridTextColumn Header="Age" Binding="{Binding Path=Age}"  IsReadOnly="True" Width="*"></DataGridTextColumn>
            <DataGridTextColumn Header="City" Binding="{Binding Path=City}"  IsReadOnly="True" Width="*"></DataGridTextColumn>            
            <DataGridTemplateColumn Header="Delete" Width="60" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="Delete" Command="{Binding Path=DeleteCommand}" ></Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>               
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

```
public class EmployeeDetailsViewModel
{
    private ObservableCollection<EmployeeModel> _empDetailsList;
    private EmployeeModel _selectedEmp;
    private RelayCommand _deleteCommand;

   public EmployeeDetailsViewModel()
   {
       _empDetailsList = new ObservableCollection<EmployeeModel>()
      {
          new EmployeeModel(){Id=1,Name="ABC",Age=26,City="Las Vegas"},
          new EmployeeModel(){Id=2,Name="MNO",Age=27,City="New Delhi"},
          new EmployeeModel(){Id=3,Name="XYZ",Age=25,City="Sydney"},
      };
   }

   public ObservableCollection<EmployeeModel> EmpDetailsList
   {
       get { return _empDetailsList; }
   }

   public ICommand DeleteCommand
   {
       get
       {
           if (_deleteCommand == null)
               _deleteCommand = new RelayCommand(Delete);
           return _deleteCommand;
       }
   }

   private void Delete()
   { 
   }
} 
```

中继命令类`internal class RelayCommand : ICommand { #region Fields

```
 readonly Action _execute;
    readonly Func<bool> _canExecute;

    #endregion

    #region Constructors

    public RelayCommand(Action execute)
        : this(execute, null)
    {
    }

    public RelayCommand(Action execute, Func<bool> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;
    }

    #endregion // Constructors

    #region ICommand Members

    [DebuggerStepThrough]
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute();
    }

    public event EventHandler CanExecuteChanged
    {
        add
        {
            if (_canExecute != null)
                CommandManager.RequerySuggested += value;
        }
        remove
        {
            if (_canExecute != null)
                CommandManager.RequerySuggested -= value;
        }
    }

    public void Execute(object parameter)
    {
        _execute();
    }

    #endregion // ICommand Members
}` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:02:09.213

问题是您使用的绑定意味着它期望 DeleteCommand 是 EmployeeModel 而不是 EmployeeDetailsViewModel 的属性。

也许像下面这样的东西可能会起作用（只是一个大纲） - 假设 ListPresenter 需要从列表中删除并知道要删除哪个项目：

```
public class EmployeeDetailsListPresenter : INotifyPropertyChanged
{
    _empDetailsList = new ObservableCollection<EmployeeDetailsPresenter>
        {
            new EmployeeDetailsPresenter(new EmployeeModel(...), Delete),
            ...
        };

    public IEnumerable<EmployeeDetailsPresenter> EmpDetailsList { ... }

    private void Delete(EmployeeDetailsPresenter employeeDetails)
    {
        _empDetailsList.Remove(employeeDetails);
    }
}

public class EmployeeDetailsPresenter : INotifyPropertyChanged
{
    public EmployeeDetailsPresenter(EmployeeModel employee,
                                    Action<EmployeeDetailsPresenter> delete)
    {
        _employee = employee;
        _delete = delete;
    }

    public ICommand DeleteCommand
    {
        get
        {
            return new RelayCommand(() => _delete(this))
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:53:17.053

您可以使用下面的代码来简单地解决您在 xaml 中的错误...我刚刚在您的 xaml 中进行了一些小的更改来解决这个问题..

```
 <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Path=Id}" IsReadOnly="True" Visibility="Collapsed" Width="90"></DataGridTextColumn>
            <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" IsReadOnly="True" Width="*"></DataGridTextColumn>
            <DataGridTextColumn Header="Age" Binding="{Binding Path=Age}"  IsReadOnly="True" Width="*"></DataGridTextColumn>
            <DataGridTextColumn Header="City" Binding="{Binding Path=City}"  IsReadOnly="True" Width="*"></DataGridTextColumn>            
            <DataGridTemplateColumn Header="Delete" Width="60" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="Delete" Command="{Binding Path=DataContext.DeleteCommand}" ></Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>               
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

# android - 使用可变字段解析 json 对象

> ID：11119054
> 
> 赞同：0
> 
> 时间：2012-06-20T11:59:11.400
> 
> 标签：android, json, string, gson

我有一个可以包含下一个参数的json请求，最初我不知道参数的类型，它可以是：

> “消息”：“一条消息”

或者

> “消息”：{“part_one”：“消息的第一部分”，“part_two”：“消息的第二部分”}

我尝试将此字段解析为字符串

```
String message; 
```

并自定义消息对象

```
Message message; 

class Message{
String part_one;
String part_two;
} 
```

我也尝试使用 List、Map 等，但是当类型不匹配时出现解析错误。

如何为`fromJson()`函数（gson 库）构建解析输出对象？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:16:22.663

对于这个简单的示例，GSON 相当深入，但是如果您希望采用这种方法 ，可以使用广泛的[GSON 用户指南。](https://sites.google.com/site/gson/gson-user-guide)

简单的答案是使用android SDK 内置的[JSONObject 类。](http://developer.android.com/reference/org/json/JSONObject.html)有一个[完整的 JSON 教程](http://www.vogella.com/articles/AndroidJSON/article.html)应该会有所帮助。

简单地：

```
JSONObject myObject = new JSONObject(myResponseString); 
```

然后有几个函数可以从对象中提取数据，您可以在函数或响应对象构造函数中使用这些数据来简化代码库。

如果你有一个对象数组，那么使用[JSONArray](http://developer.android.com/reference/org/json/JSONArray.html)

最重要的是，阅读[http://developer.android.com上的文档](http://developer.android.com)

**UDPATE**

您可以使用 optJSONObject 方法来检测“消息”值是否是一个对象而不是一个简单的字符串。

要使用您的示例类，请向您的消息类添加一个方法：

```
public static Message fromJson(string jsonString) throws JSONException
{

    JSONOBject jsonObject = new JSONObject(jsonString);

    Message message = new Message(); //create our return object

    JsonObject messageObject = jsonObject.optJSONObject("message");

    if(messageObject!=null)
    {
        //get our member variables from the messageObject
        message.part_one = messageObject.getString("part_one");
        message.part_two = messageObject.getString("part_two");
    }
    else
    {   // it's a simple string so just get the string from jsonObject
        message.part_one = jsonObject.getString("message");
    }
    return message;
} 
```

当然，您应该添加异常处理，如果解析失败，可能会抛出自定义异常或返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T11:48:50.660

我的最后一个解决方案 - 定制

> JsonDeserializer

json消息：

1) 成功消息

```
{"data": ["success"],
       "message": "message_text"
    } 
```

2) 错误信息

`{"message": { "name": ["message_text"], "email": ["message_text"], "subject": ["message_text"], "body": ["message_text"] }}`

也许它可以帮助某人。

```
 public static class GeneralResponceDeserializer implements JsonDeserializer {

    @Override
    public Object deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext jsonDeserializationContext) throws JsonParseException {
        JsonObject jobject = (JsonObject) jsonElement;
        Gson googleJson = new Gson();
        ArrayList<String> dataList = null;
        if (jobject != null && jobject.get("data") != null) {
            JsonArray dataArray = jobject.get("data").getAsJsonArray();
            dataList =  googleJson.fromJson(dataArray, new TypeToken<List<String>>(){}.getType());
        }
        String message = null;
        Message messageObject = null;
        if (jobject != null && jobject.get("message") != null) {
            try {
                message = jobject.get("message").getAsString();
            } catch (UnsupportedOperationException e) {
                JsonElement messageObjectJson = (JsonObject) jobject.get("message").getAsJsonObject();
                JsonObject jMessageobject = (JsonObject) messageObjectJson;
                if (jMessageobject != null) {
                    JsonArray name = jMessageobject.getAsJsonArray("name");
                    JsonArray subject = jMessageobject.getAsJsonArray("subject");
                    JsonArray body = jMessageobject.getAsJsonArray("body");
                    JsonArray email = jMessageobject.getAsJsonArray("email");
                    ArrayList<String> nameDataList = null;
                    ArrayList<String> subjectDataList = null;
                    ArrayList<String> bodyDataList = null;
                    ArrayList<String> emailDataList = null;
                    if (name != null) {
                        nameDataList =  googleJson.fromJson(name, new TypeToken<List<String>>(){}.getType());
                    }
                    if (subject != null) {
                        subjectDataList =  googleJson.fromJson(subject, new TypeToken<List<String>>(){}.getType());
                    }
                    if (body != null) {
                        bodyDataList =  googleJson.fromJson(body, new TypeToken<List<String>>(){}.getType());
                    }
                    if (email != null) {
                        emailDataList = googleJson.fromJson(email, new TypeToken<List<String>>(){}.getType());
                    }
                    messageObject = new Message(nameDataList, subjectDataList, bodyDataList, emailDataList);
                }
            }
        }

        return new GeneralResponceObject(dataList, message, messageObject);
    }
} 
```

# java - 通配符子域 apache+tomcat

> ID：11119055
> 
> 赞同：1
> 
> 时间：2012-06-20T11:59:15.520
> 
> 标签：java, apache, tomcat, struts

我的 struts 项目托管在 apache 和 tomcat 服务器上。我的服务器上需要一个通配符子域。我在 Apaches virtualhost .conf 文件上编写了以下代码

```
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host2.example.com
    DocumentRoot "/var/www/htdocs/projects/myprj"
    ServerAlias *.asd.mydomain.com
    ServerName asd.mydomain.com
    DirectoryIndex index.jsp 
```

我将我的 tomcat server.xml 文档库更改为 /var/www/htdocs/projects

但是我的子域不起作用。当我使用 123.asd.mydomain.com 时，它会加载 tomcats 主页。

任何人都知道是什么问题，如果我做更多的事情？想在.htaccess 上写任何东西

谢谢，希哈布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:48:34.010

除了匹配虚拟主机之外，您还需要一些规则将您的请求传递给 tomcat - 重写规则或代理传递，例如：

```
RewriteRule ^/xxx/(.*)$ ajp://localhost:8009/yp/$1 [L,P]

ProxyPass / ajp://localhost:8009/
ProxyPassReverse / ajp://localhost:8009/ 
```

# javascript - 从变量测试函数

> ID：11119057
> 
> 赞同：0
> 
> 时间：2012-06-20T11:59:19.507
> 
> 标签：javascript, function, call, typeof

在函数内部，我需要测试是否存在另一个变量函数，如果存在则调用它。

```
function div1_load(){
  // do something
}

function main(id){
  var func = id + '_load';
  if (func is function) {
    func.call();
  }
}
main('div1'); 
```

我可以想到两种测试方法，但都涉及我想避免的 eval() 。

1.  typeof eval(func) === '函数'
2.  eval('typeof(' + func + ')') === '函数'

有没有办法不使用 eval() ？如果不是，我的两种方法中哪一种最安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:01:32.477

```
function main(id, ns) {
    if (!ns) {
        ns = window;
    }
    if (typeof ns[id + '_load'] === "function") {
        ns[id + '_load']();
    }
}

function div1_load() {
    alert("div1_load() was called");
}

main('div1');

var test = {
    div1_load: function() {
        alert("test.div1_load() was called");
    }
};

main('div1', test);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:03:25.250

假设函数是全局的（即属于`window`对象，您可以检查`typeof`：

```
if(typeof window[id] === 'function') {  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:07:12.723

如果函数是在全局命名空间 ( `window`) 中分配的，则可以使用 . 检查函数名称字符串是否为函数`window[function name] instanceof Function`。如果它是在（伪）命名空间中分配的，请使用`SomeNamespace[function name]`. 换句话说，可以从命名空间（全局（`window`在浏览器中）或在您的代码中定义）将函数作为属性/方法检索。

```
function div1_load(){
  // do something
}

function main(id){
  if (window[id+'_load'] instanceof Function) {
    window[id+'_load'].call();
  }
}
main('div1') 
```

[**根据评论编辑**]如果是匿名的、立即实例化的函数，这将不起作用。@Florian Margaine 的示例可以通过这种方式进行调整：

```
var MyPersonalNamespace = (function() {
  function test() {}
  function main(someid) { 
     if (this[someid] instanceof Function){
       this[someid].call();
     }
  }
  return {test: test, main: main};
 }());
 MyPersonalNamespace.main('test'); 
```

# jquery - 在 HTML 中添加新元素后，漂亮的照片 ibox 不会触发

> ID：11119061
> 
> 赞同：0
> 
> 时间：2012-06-20T11:59:27.373
> 
> 标签：jquery, triggers, prettyphoto

在我将新元素附加到 HTML 页面后，我试图让 prettyPhoto 或其他一些 jquery 插件工作：

具体来说，我有这个：

```
$(document).ready(function() { 
              $(window).scroll(function() {
                if($(window).scroll) {  
                  $('div#loadMoreComments').show();

                    $.ajax({
                                type    : "POST",
                                url     : "getvariables.php",
                                dataType: "json",
                                data    : { webid: $(".posts:last").attr('id') }
                            }).done(function( msg ) {

                                   jQuery.each(msg , function(index, value){
                                        $("#posts").append(value);
                                    });

                                    //    $("#posts").append(msg);

                                    $('div#loadmore').hide();

                                });
                }
              });
            }); 
```

然后我有这样的东西必须触发弹出窗口

```
<p><a href="#inline-1" rel="ibox">Trigger popup.</a></p>
    <div id="inline-1" style="display: none;">
             Content to show up after the link is triggered

    </div> 
```

将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:07:26.677

您需要在追加后更新 prettyPhoto 的钩子。尝试将 prettyPhoto 的初始化放入一个函数中。然后从文档就绪函数内部调用该函数，并在追加更多项目时再次调用。

就像是：

`function initComments(){ $("a[rel^='comments']").prettyPhoto(); }`

然后在您的 AJAX 调用之后：

`initComments();`

或者，使用 jquery 的 ajaxStop() 函数在 ajax 调用完成后更新挂钩。

`jQuery.ajaxStop(function(){ initComments(); });`

# search-engine - 是否有支持正则表达式搜索的搜索引擎？

> ID：11119065
> 
> 赞同：54
> 
> 时间：2012-06-20T11:59:31.853
> 
> 标签：search-engine

首先，我检查了这个[问题](https://stackoverflow.com/questions/4574262/regular-expression-search-engine)，但[答案](https://stackoverflow.com/questions/4574262/regular-expression-search-engine#answer-4574276)是指一个过时的服务。

那么是否有基于网络的（或软件，我不在乎）提供正则表达式搜索互联网内容？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T12:09:27.027

由于我完全支持作者，让我在这里写下 superuser.com[问题的答案：](https://superuser.com/questions/60299/is-there-any-search-engine-that-supports-regular-expressions)

> 来自[询问元过滤器](http://ask.metafilter.com/21820/HowWhere-does-one-find-Googles-guidehelp-on-searchingquerying-using-regular-expressions)的报价：
> 
> > 使关键字搜索效率超过数百 TB（或任何他们的索引到现在）的唯一可能方法是预先计算单词索引。
> > 
> > 事实上，一个完整的正则表达式引擎是图灵完备的，你可以编写任意正则表达式来吞噬几乎无限量的 CPU 时间和内存。由于所有这些原因，他们向公众提供正则表达式搜索将是技术上的疯狂。

**更新：**正如它正确指出的那样，正则表达式不是图灵完备的。请继续关注更详细的答案：

待定...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:15:11.077

正则表达式引擎没有即时搜索。这可能是由于页面的索引方式。允许一个人对网络进行 grep 将需要大量的计算能力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T03:05:58.747

dayyan 是正确的，它是反向索引使搜索引擎快速；如果您只有 100 TB 的闪存盘，则无法加速 PB 内容的正则表达式搜索。关键字搜索，反向索引，没问题。

blekko 的网络 grep (https://blekko.com/ws/+/webgrep) 支持正则表达式，但我们获得的大多数搜索都是针对常量字符串，通常在 HTML 中，因为这很有趣：谁使用微格式? 谁使用各种 javascript 库？谁使用各种评论系统？等等。

如果您向我们发送了一个正则表达式，我们很乐意为您运行它。

运行这些搜索包括一个 MapReduce 作业，该作业在我们爬网中的所有 html 上运行。这就是为什么需要一段时间（一两天）才能得到答案的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:19:54.367

虽然您不太可能找到使用完整正则表达式搜索的网站，但 google 确实有一些能力进行匹配。根据您要实现的目标，这可能就足够了。

[GoogleGuide](http://www.googleguide.com/category/query-input/)似乎相当深入，提供了一些可用的选项。也许如果您举一个您想要搜索的查询类型的示例，我们可以找到解决方案？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T16:26:27.293

如果它需要是正则表达式，那么我认为你搞砸了。但是，如果您只是在寻找更多的搜索能力，[http://www.googleguide.com/advanced_operators_reference.html](http://www.googleguide.com/advanced_operators_reference.html)

# iphone - iTunes Connect 销售和趋势延迟？

> ID：11119069
> 
> 赞同：0
> 
> 时间：2012-06-20T11:59:47.547
> 
> 标签：iphone, ios, app-store-connect

我在 App Store 上有一个付费应用程序，当用户下载它时，会在我的数据库中创建一个新的“用户”。从这个数据库中，我看到我昨天添加了大约 140 台新设备，这意味着有 140 位新用户购买了我的应用程序。

但是，在 iTunes Connect 中，我只看到昨天的 1 个销售。他们显示一天的销售数据是否有某种延迟？

还是有可能我的付费应用刚刚在某个越狱应用商店免费发布？

只是想知道是否有人经历过这种情况，以及他们做了什么来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:02:51.583

可能会有延迟，更重要的是，取决于您所在的时区，对昨天的一天有不同的定义。

一次购买可以下载到该用户注册的任何设备上。例如，如果我购买了您的应用程序，我可以将其复制到我的 iPhone、iPad 和 iPod。

越狱应用也占大量下载量。

这三个因素很可能解释了这种差异。

# php - 输入mysql时英镑符号显示为A£

> ID：11119072
> 
> 赞同：1
> 
> 时间：2012-06-20T11:59:53.347
> 
> 标签：php, mysql

我有一个表格，可以将价格保存到数据库中，但是当用户输入一个 £ 符号时，它显示为 A£，在 A 上带有反射重音（不知道如何写其中一个）。当我在 phpmyadmin 中手动输入它时，它不会这样做。price 字段的联盟是 latin1，它是一个 varchar，所以我认为这没有任何问题。在 php 中的 mysql 查询中，价格有 htmlspecialchars 和 mysql_real_escape_string，但我已将它们关闭，问题仍然存在。

最后，它不仅仅是以不同的方式显示 £ 符号，它实际上是以不同的方式将其保存到数据库中。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T12:10:27.957

这通常是由于连接的字符集和字符串的用户不一致造成的。例如，连接字符集可能返回 UTF-8，而 PHP 脚本可能会将字符串视为 iso-latin-1，这正是导致这种情况的原因。我不确定这些属性是如何在 PHP 中设置的。

在`mysql`CLI 中，您可以使用以下命令查看各种属性`SHOW VARIABLES`：

```
mysql> show variables like '%char%';
+--------------------------+---------------------------------------------------------+
| Variable_name            | Value                                                   |
+--------------------------+---------------------------------------------------------+
| character_set_client     | latin1                                                  |
| character_set_connection | latin1                                                  |
| character_set_database   | latin1                                                  |
| character_set_filesystem | binary                                                  |
| character_set_results    | latin1                                                  |
| character_set_server     | latin1                                                  |
| character_set_system     | utf8                                                    |
| character_sets_dir       | C:\Program Files\MySQL\MySQL Server 5.0\share\charsets\ |
+--------------------------+---------------------------------------------------------+ 
```

我会开始朝那个方向看。这里的指示是，当您期待单个字符时，您会看到多个字符。7 位范围之外的任何内容都将被编码为多个 UTF-8 八位字节。

**UTF-8 详细信息**

*   “£”是 iso-latin-1 代码点`0xA3`
*   `0xA3`使用 UTF-8 编码会产生字节`0xC2`，`0xA3`
*   `0xC2`并由`0xA3`iso-latin-1 字形“Â£”表示

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:13:40.443

如果更改应用程序的设计以将值和货币存储在单独的列中，从长远来看，您可能会为自己省去很多麻烦。

```
value | currency
----------------
10    | GBP
16.42 | USD 
```

然后，您可以在添加到数据库之前解析您的用户输入，无论它是`£10`、`10GBP`还是`Ten Pounds Sterling`，并在从数据库中检索它时适当地格式化它。

[在支持更奇怪的货币、对货币符号的变化做出反应（是的，这种情况发生](http://en.wikipedia.org/wiki/Hryvnia_sign)）、处理一段时间内的汇率以及将数据输出到网站以外的地方时，这肯定会让您的生活更轻松。

# html - 具有透明度的渐变

> ID：11119079
> 
> 赞同：0
> 
> 时间：2012-06-20T12:00:16.947
> 
> 标签：html, css

具有透明度的渐变！[在此处输入图像描述][1]

我想在底部应用透明的多色渐变，如下图所示。我找到了几页来解释这一点，但我仍然无法让它正常工作。

我试过这个小提琴[http://jsfiddle.net/QEhsG/2/](http://jsfiddle.net/QEhsG/2/)（在stackoverflow上找到）但我无法完美地获得黑白组合。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:02:50.867

给`alpha= 0`你的第一个**rgba**。像这样写

```
button {
    background-color: black;
    background-image: -webkit-linear-gradient(top, rgba(252, 252, 252, 0) 0%, rgba(186, 186, 186, 1) 100%);
    background-image: -moz-linear-gradient(top, rgba(252, 252, 252, 0) 0%, rgba(186, 186, 186, 1) 100%);
    width: 200px;
    height: 100px;
} 
```

检查这个[http://jsfiddle.net/QEhsG/6/](http://jsfiddle.net/QEhsG/6/)

更新

[http://jsfiddle.net/QEhsG/8/](http://jsfiddle.net/QEhsG/8/)

# c# - 是否可以在 Windows Phone 中发送日历邀请？

> ID：11119081
> 
> 赞同：0
> 
> 时间：2012-06-20T12:00:20.383
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

是否可以通过 Windows Phone 7 以编程方式发送日历邀请。我目前能够使用一些默认文本打开电子邮件编写器。但是我需要在其中包含一个时间表，以便它作为日历邀请而不是纯文本电子邮件。

```
EmailComposeTask email = new EmailComposeTask();
email.Subject = "Invitation for an envent";
email.Body = "Attend this event on June 21 2012";
email.Show(); 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:50:28.563

现在的框架不具备执行此操作的能力。

如果您需要通过电子邮件发送约会/邀请，您需要从外部来源发送这些（当然，您可以从您的应用程序触发）。

# xslt - 基于子节点使用 XSLT 对 XML 进行确定性排序

> ID：11119084
> 
> 赞同：-1
> 
> 时间：2012-06-20T12:00:25.610
> 
> 标签：xslt, sorting, xslt-2.0

我想在我的 [OWL] (http://www.w3.org/TR/owl-ref/) 文件中引入确定性排序，以便我可以将修改后的文件与原始文件进行比较，并更轻松地查看更改的位置. 该文件由工具（Protege）生成，元素的顺序是半随机变化的。

问题是排序不能基于简单的事情，比如给定元素的名称和属性。通常，差异仅出现在以下几个级别的子节点中。

例子：

```
 <owl:Class rdf:about="#SomeFooClass">
    <rdfs:subClassOf><!-- subclass definition 1 -->
      <owl:Restriction>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:ID="negate"/>
        </owl:onProperty>
      </owl:Restriction>
    </rdfs:subClassOf>
    <rdfs:subClassOf><!-- subclass definition 2 -->
      <owl:Restriction>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:about="#name"/>
        </owl:onProperty>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
      </owl:Restriction>
    </rdfs:subClassOf> 
```

这里的子类定义 1 和 2（以及其中的其他子元素）按顺序变化，有时 1 是第一个，有时是 2。

我基于一些常见的直接属性（例如 about 和 ID）实现了排序，虽然这修复了许多模棱两可的排序，但它无法解决这个问题。XSLT：

```
<xsl:stylesheet version="2.0" 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space  elements="*"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()">
                <xsl:sort select="@rdf:about" data-type="text"/>
                <xsl:sort select="@rdf:ID" data-type="text"/>
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

我在想也许解决方案需要能够为每个元素计算某种“哈希码”，其中考虑到它的子元素的所有内容。这样子类定义 1 可以具有哈希码 3487631，子类定义 2 将具有 45612，并且它们之间的排序将是确定性的（如果它们的子元素未修改）。

编辑：刚刚意识到哈希码计算不应该关心子笔记的*顺序*来实现它想要做的事情。

我可以主要使用直接已知的属性值，然后使用哈希码，如果它们相等的话。我可能最终会得到类似的东西：

```
<xsl:stylesheet version="2.0" 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space  elements="*"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()">
                <xsl:sort select="@rdf:about" data-type="text"/>
                <xsl:sort select="@rdf:ID" data-type="text"/>
                <xsl:sort select="my:hashCode(.)" />
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>

   <xsl:function name="my:hashCode" as="xs:string">
      ...
   </xsl:function>
</xsl:stylesheet> 
```

但不知道如何实现 my:hashCode。

编辑：根据要求，举几个例子。保存相同数据时，该工具可能或多或少随机产生例如以下类型的结果 (1-3)：

1.

```
<owl:Class rdf:about="#SomeFooClass">
    <rdfs:subClassOf><!-- subclass definition 1 -->
      <owl:Restriction>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:ID="negate"/>
        </owl:onProperty>
      </owl:Restriction>
    </rdfs:subClassOf>
    <rdfs:subClassOf><!-- subclass definition 2 -->
      <owl:Restriction>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:about="#name"/>
        </owl:onProperty>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
      </owl:Restriction>
    </rdfs:subClassOf>
</owl:Class> 
```

2.

```
<owl:Class rdf:about="#SomeFooClass">
    <rdfs:subClassOf><!-- subclass definition 2 -->
      <owl:Restriction>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:about="#name"/>
        </owl:onProperty>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
      </owl:Restriction>
    </rdfs:subClassOf>
    <rdfs:subClassOf><!-- subclass definition 1 -->
      <owl:Restriction>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:ID="negate"/>
        </owl:onProperty>
      </owl:Restriction>
    </rdfs:subClassOf>
</owl:Class> 
```

3.

```
<owl:Class rdf:about="#SomeFooClass">
    <rdfs:subClassOf><!-- subclass definition 2 -->
      <owl:Restriction>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:about="#name"/>
        </owl:onProperty>
      </owl:Restriction>
    </rdfs:subClassOf>
    <rdfs:subClassOf><!-- subclass definition 1 -->
      <owl:Restriction>
        <owl:onProperty>
          <owl:DatatypeProperty rdf:ID="negate"/>
        </owl:onProperty>
        <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#int"
        >1</owl:maxCardinality>
      </owl:Restriction>
    </rdfs:subClassOf>
</owl:Class> 
```

这些示例是结构的简化版本，但应该显示原理。我想实现一个 XSLT 排序，它将为所有 3 个示例产生相同的输出。转换后的结果是否看起来像版本 1、2 或 3（或其他排序）并不那么重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:05:12.307

毕竟，我最终在 Java 中实现了排序。

基本上我从孩子开始递归地对DOM进行排序：

```
private Element sort(Element e) {
    // first, sort children's contents recursively
    List<Element> elementNodes = removeElementChildNodes(e);
    for (Element child: elementNodes) {
        sort(child);
    }
    // after that, sort the order of these children
    List<Element> sortedElementNodes = sortElements(elementNodes);
    // add them back
    for (Element child: sortedElementNodes) {
        e.appendChild(child);
    }
    return e;
} 
```

实际排序首先比较元素名称和几个重要的属性名称，如果都相等，比较节点的规范化字符串转换和它的孩子（孩子的内容此时保证已经排序）

```
private class ElementSortingComparator implements Comparator<Element> {

    public int compare(Element o1, Element o2) {
        CompareToBuilder c = new CompareToBuilder(); 
        c.append(o1.getTagName(), o2.getTagName());
        c.append(o1.getAttribute(ID_ATTRIBUTE),
                o2.getAttribute(ID_ATTRIBUTE));
        c.append(o1.getAttribute(ABOUT_ATTRIBUTE),
                o2.getAttribute(ABOUT_ATTRIBUTE));
        int result = c.toComparison();
        if (result == 0) {
            String node1 = partialNodeToString(o1);
            String node2 = partialNodeToString(o2);
            result = node1.compareTo(node2);
        }
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:49:47.793

我假设两个节点相等，如果节点名称相同且文本内容相同，则出于排序目的。据我了解，输入文档需要以某种确定性的方式进行排序，但排序是什么并不重要，只要它是确定性的。因此，我建议对节点名称和直接文本子项的组合进行排序。不需要散列。

试试这个样式表：

```
<xsl:stylesheet version="2.0" 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space  elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
          <xsl:apply-templates select="@*" />
          <xsl:apply-templates select="node()">
            <xsl:sort select="namespace-uri()" data-type="text" />
            <xsl:sort select="local-name()" data-type="text"/>
            <xsl:sort select="string-join(./text(),' ')" data-type="text"/>
          </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# java - 使用图像绘制和重新绘制 JPanel

> ID：11119088
> 
> 赞同：2
> 
> 时间：2012-06-20T12:00:52.930
> 
> 标签：java, swing, jpanel, repaint, paintcomponent

我希望绘制和重新绘制一个 JPanel，它可以与图像一起旋转 90 度。初始绘画不会引起任何问题。当我尝试重绘（）面板时，它不会立即执行此操作，而是等待第二次重绘（）。

我的第二个问题是，当我按照下面的代码中所述将面板垂直转动时，它根本不会重新绘制。我至少看不到红色、黄色或绿色的图像，但图像“光”仍然存在。

感谢您花时间阅读本文。

```
public void paintComponent(Graphics g)
{

    super.paintComponent(g); 

    Graphics2D g2d = (Graphics2D) g;
    if(vertical){

        g2d.translate(this.getWidth() / 2, this.getHeight() / 2); 
        g2d.rotate(-Math.PI / 2);

        g2d.translate(-img_light.getWidth(null) / 2, -img_light.getHeight(null) / 2);
        g2d.drawImage(img_light, 0, 0, this);   

        if(showRed){
            g2d.translate(-img_red.getWidth(null) / 2, -img_red.getHeight(null) / 2);   
            g2d.drawImage(img_red, 0, 0, null);
        }
        if(showYellow){
            g2d.translate(-img_yellow.getWidth(null) / 2, -img_yellow.getHeight(null) / 2);
            g2d.drawImage(img_yellow, 0, 0, null);
        }
        if(showGreen){
            g2d.translate(-img_green.getWidth(null) / 2, -img_green.getHeight(null) / 2); 
            g2d.drawImage(img_green, 0, 0, null);
        }
    }else{
        g2d.drawImage(img_light, 0, 0, this);   

        if(showRed){
            g2d.drawImage(img_red, 0, 0, null);
        }
        if(showYellow){
            g2d.drawImage(img_yellow, 0, 0, null);
        }
        if(showGreen){
            g2d.drawImage(img_green, 0, 0, null);
        }

 }   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:11:41.893

*   看看教程[Graphics2D](http://docs.oracle.com/javase/tutorial/2d/index.html)和关于[Graphics2d#rotate()的两种方法](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#rotate%28double%29)

*   那你应该可以

代码（以`@CtrAltDelete`???开头）

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.File;
import java.util.*;
import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.Timer;
import javax.swing.filechooser.*;

public class RotatableImageComponent extends JComponent {

    private static final long serialVersionUID = 1L;
    private Image image;
    private double angle = 0;
    private MyObservable myObservable;

    public RotatableImageComponent() {
        myObservable = new MyObservable();
    }

    public RotatableImageComponent(Image image) {
        this();
        this.image = image;
    }

    public Image getImage() {
        return image;
    }

    public void setImage(Image image) {
        this.image = image;
    }

    public double getAngle() {
        return angle;
    }

    public void setAngle(double angle) {
        if (angle == this.angle) {
            return;
        }
        this.angle = angle;
        double circle = Math.PI * 2;
        while (angle < 0) {
            angle += circle;
        }
        while (angle > circle) {
            angle -= circle;
        }
        if (myObservable != null) {
            myObservable.setChanged();
            myObservable.notifyObservers(this);
        }
        repaint();
    }

    /**
     * In the rotation events sent to the listener(s), the second argument
     * (the value) will be a reference to the RotatableImageComponent. One then
     * should call getAngle() to get the new value.
     * @param o
     */
    public void addRotationListener(Observer o) {
        myObservable.addObserver(o);
    }

    public void removeRotationListener(Observer o) {
        myObservable.deleteObserver(o);
    }

    public void rotateClockwise(double rotation) {
        setAngle(getAngle() + rotation);
    }

    public void rotateCounterClockwise(double rotation) {
        //setAngle(getAngle() - rotation);
        rotateClockwise(-rotation);
    }

    @Override
    public void paintComponent(Graphics g) {
        if (image == null) {
            super.paintComponent(g);
            return;
        }
        Graphics2D g2 = (Graphics2D) g;
        AffineTransform trans = AffineTransform.getTranslateInstance(getWidth() / 2, getHeight() / 2);
        trans.rotate(angle);
        trans.translate(-image.getWidth(null) / 2, -image.getHeight(null) / 2);
        g2.transform(trans);
        g2.drawImage(image, 0, 0, null);
    }

    @Override
    public Dimension getPreferredSize() {
        if (image == null) {
            return super.getPreferredSize();
        }
        int wid = image.getWidth(null);
        int ht = image.getHeight(null);
        int dist = (int) Math.ceil(Math.sqrt(wid * wid + ht * ht));
        return new Dimension(dist, dist);
    }

    public static class TimedRotation {

        private RotatableImageComponent comp;
        private long totalTime, startTime;
        private double toRotate, startRotation;
        private int interval;
        public Timer myTimer;
        private myAction mAction;

        public TimedRotation(RotatableImageComponent comp, double toRotate, long totalTime, int interval) {
            //super(interval, new myAction());
            this.comp = comp;
            this.totalTime = totalTime;
            this.toRotate = toRotate;
            this.startRotation = comp.getAngle();
            this.interval = interval;
        }

        public void start() {
            if (mAction == null) {
                mAction = new myAction();
            }
            if (myTimer == null) {
                myTimer = new Timer(interval, new myAction());
                myTimer.setRepeats(true);
            } else {
                myTimer.setDelay(interval);
            }
            myTimer.start();
            startTime = System.currentTimeMillis();
        }

        public void stop() {
            myTimer.stop();
        }

        private class myAction implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent ae) {
                long now = System.currentTimeMillis();
                if (totalTime <= (now - startTime)) {
                    comp.setAngle(startRotation + toRotate);
                    stop();
                    return;
                }
                double percent = (double) (now - startTime) / totalTime;
                double rotation = toRotate * percent;
                comp.setAngle(startRotation + rotation);
            }
        }
    }

    private class MyObservable extends Observable {

        @Override
        protected void setChanged() {
            super.setChanged();
        }
    }

    public static class RotationKeys extends KeyAdapter {

        private RotatableImageComponent comp;
        private double rotationAmt;

        public RotationKeys(RotatableImageComponent comp, double rotationAmt) {
            this.comp = comp;
            this.rotationAmt = rotationAmt;
        }

        public RotationKeys(RotatableImageComponent comp) {
            this(comp, Math.PI / 90);
        }

        @Override
        public void keyPressed(KeyEvent ke) {
            if (ke.getKeyCode() == KeyEvent.VK_LEFT) {
                comp.rotateCounterClockwise(rotationAmt);
            } else if (ke.getKeyCode() == KeyEvent.VK_RIGHT) {
                comp.rotateClockwise(rotationAmt);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    FileFilter filter = new FileNameExtensionFilter("JPEG file", "jpg", "jpeg");
                    JFileChooser chooser = new JFileChooser();
                    chooser.addChoosableFileFilter(filter);
                    if (chooser.showSaveDialog(null) == JFileChooser.APPROVE_OPTION) {
                        File f = chooser.getSelectedFile();
                        BufferedImage im = ImageIO.read(f);
                        final RotatableImageComponent c = new RotatableImageComponent(im);
                        c.addRotationListener(new Observer() {

                            @Override
                            public void update(Observable arg0, Object arg1) {
                                System.out.println("Angle changed: " + ((RotatableImageComponent) arg1).getAngle());
                            }
                        });
                        JPanel controls = new JPanel(new FlowLayout());
                        final JTextField rotation = new JTextField();
                        rotation.setText("30");
                        controls.add(new JLabel("Rotation(degrees)"));
                        controls.add(rotation);
                        final JTextField time = new JTextField();
                        time.setText("1000");
                        time.setColumns(6);
                        rotation.setColumns(7);
                        controls.add(new JLabel("Time(millis)"));
                        controls.add(time);
                        JButton go = new JButton("Go");
                        go.addActionListener(new ActionListener() {

                            @Override
                            public void actionPerformed(ActionEvent ae) {
                                TimedRotation tr = new TimedRotation(c,
                                        Double.parseDouble(rotation.getText()) / 180 * Math.PI,
                                        Integer.parseInt(time.getText()), 50);
                                tr.start();
                            }
                        });
                        controls.add(go);
                        RotationKeys keys = new RotationKeys(c);
                        c.addKeyListener(keys);
                        c.setFocusable(true);
                        JFrame jf1 = new JFrame();
                        jf1.getContentPane().add(c);
                        JFrame jf2 = new JFrame();
                        jf2.getContentPane().add(controls);
                        jf1.pack();
                        jf2.pack();
                        jf1.setLocation(100, 100);
                        jf2.setLocation(400, 100);
                        jf1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                        jf2.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
                        jf1.setVisible(true);
                        jf2.setVisible(true);
                    }
                } catch (Throwable t) {
                    t.printStackTrace();
                }
            }
        });
    }
} 
```

# jquery - jQuery 点击事件并不总是触发

> ID：11119092
> 
> 赞同：0
> 
> 时间：2012-06-20T12:01:10.180
> 
> 标签：jquery

我们有几个按钮和复选框，它们在 document.ready 中为它们定义了 jQuery 单击事件，它们执行 ajax 回调。在我们的测试服务器上，它们始终在所有主流浏览器（IE、FF、Safari 和 Chrome）中都能正常工作。我们在服务器上记录了足够的信息以确定它们是否正确触发。

然而，在非常罕见的情况下，我们在生产中发现它们显然根本没有为一些随机用户触发，但我们自己无法接近重现这个问题。

我们知道为这些用户启用了 Javascript。我们已经看到了 IE8 和 Safari 的问题，但它发生的次数还不够多，无法明确地将其与特定的浏览器/版本相关联。

我们目前使用的是 jQuery 版本 1.6.2。

关于可能导致此问题的任何想法？

# java - 在 Gson 双序列化中关闭科学记数法

> ID：11119094
> 
> 赞同：19
> 
> 时间：2012-06-20T12:01:22.437
> 
> 标签：java, json, format, double, gson

当我使用 Gson 序列化包含接近零的双精度值的对象时，它使用的是科学 E 符号：

```
{"doublevaule":5.6E-4} 
```

我如何告诉 Gson 生成

```
{"doublevaule":0.00056} 
```

反而？我可以实现一个自定义的 JsonSerializer，但它返回一个 JsonElement。我将不得不返回一个 JsonPrimitive，其中包含一个无法控制其序列化方式的 double。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-19T10:55:47.340

为什么不提供一个新的序列化器`Double`呢？（您可能必须重写您的对象以使用`Double`而不是`double`）。

然后在序列化器中，您可以转换为 a `BigDecimal`，并使用比例等。

例如

```
 GsonBuilder gsonBuilder = new GsonBuilder();
    gsonBuilder.registerTypeAdapter(Double.class,  new JsonSerializer<Double>() {
        @Override
        public JsonElement serialize(final Double src, final Type typeOfSrc, final JsonSerializationContext context) {
            BigDecimal value = BigDecimal.valueOf(src);

            return new JsonPrimitive(value);
        }
    });

    gson = gsonBuilder.create(); 
```

以上将呈现（比方说）`9.166666E-6`为`0.000009166666`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-28T14:36:01.947

对[Brian Agnew 的回答](https://stackoverflow.com/a/18892735/)稍作改动：

```
public class DoubleJsonSerializer implements JsonSerializer<Double> {
    @Override
    public JsonElement serialize(final Double src, final Type typeOfSrc, final JsonSerializationContext context) {
        BigDecimal value = BigDecimal.valueOf(src);
        try {
            value = new BigDecimal(value.toBigIntegerExact());
        } catch (ArithmeticException e) {
            // ignore
        }

        return new JsonPrimitive(value);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T12:21:11.500

您可以尝试扩展[`JsonWriter`](https://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonWriter.html)和覆盖[该方法`value(double)`](https://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/stream/JsonWriter.java#445)

它似乎不是为了像这样修改而构建的（您几乎需要复制现有代码），但应该可以让它工作。

不幸的是，我认为没有其他理由影响输出格式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-17T15:11:53.350

GSON 内部使用 Number#toString，所以我们只需要创建一个 Number 的新实例：

```
.registerTypeAdapter(Double.class, new JsonSerializer<Double>() {
    @Override
    public JsonElement serialize(final Double src, final Type typeOfSrc, final JsonSerializationContext context) {

        Number n = new Number() {

            @Override
            public long longValue() {
                return 0;
            }

            @Override
            public int intValue() {
                return 0;
            }

            @Override
            public float floatValue() {
                return 0;
            }

            @Override
            public double doubleValue() {
                return 0;
            }

            @Override
            public String toString() {
                return new BigDecimal(src).toPlainString();
            }

        };

        return new JsonPrimitive(n);
    }
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-08T19:53:00.273

为`Double`

```
GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(Double.class,  new JsonSerializer<Double>() {
    @Override
    public JsonElement serialize(Double originalValue, Type typeOf, JsonSerializationContext context) {
        BigDecimal bigValue = BigDecimal.valueOf(originalValue);

        return new JsonPrimitive(bigValue.toPlainString());
    }
}); 
```

之前：{“金额”：1.0E9}

之后：{“金额”：“1000000000”}

不完全完美，因为它是 JSON 中的字符串。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-07-29T13:00:29.113

使用 Kotlin：

```
 val gsonBuilder = GsonBuilder()
    gsonBuilder.registerTypeAdapter(object: TypeToken<Double>() {}.type, object : JsonSerializer<Double> {
        override fun serialize(src: Double, typeOfSrc: Type, context: JsonSerializationContext): JsonElement {
            val value = BigDecimal.valueOf(src)
            return JsonPrimitive(value)
        }
    })

    val gson = gsonBuilder.create() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-23T12:47:39.837

出于某种原因，我无法按照许多人的建议使用 BigDecimal 的解决方案。所以我不得不这样写：

```
.registerTypeAdapter(object : TypeToken<Double>() {}.type, object : JsonSerializer<Double> {
    override fun serialize(src: Double, typeOfSrc: Type, context: JsonSerializationContext): JsonElement =
        JsonPrimitive(src.toBigDecimal().toPlainString().toBigDecimal())
}) 
```

# asp.net - 如何在代码中引用 html id？

> ID：11119100
> 
> 赞同：0
> 
> 时间：2012-06-20T12:01:35.880
> 
> 标签：asp.net, html, asp.net-4.0

我有这样的事情：

```
<form  id="Form1"> ... </form> 
```

如何在我的 C# 代码隐藏中引用此表单？我尝试简单地使用“Form1”，但它给了我一个错误。谷歌搜索也没有帮助。

我想要实现的是在谷歌结帐“立即购买”按钮上动态输入项目名称或其中一个字段。请参阅： [如何订阅 html 表单的点击事件？](https://stackoverflow.com/questions/11118890/how-to-subscribe-to-click-event-of-html-form).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:02:54.300

您需要运行表单服务器端：

```
<form id="Form1" runat="server> ... </form> 
```

但是，如果您使用的是 ASP.NET Web 表单，则每个运行服务器端的 Web 表单只能有 1 个表单。

* * *

**编辑：**看到您的编辑后，我建议使用以下命令将值发布到您网站上的独立值`Response.Redirect()`：

```
Response.Redirect("GoogleCheckout.aspx?field=" + fieldvalue); 
```

然后在这个独立页面上有以下内容：

```
<form action="https://sandbox.google.com/checkout/..." id="Form1" method="post" name="..." target="_top">
<input name="item_name_1" type="hidden" value="<%= Request.Querystring["field"] %>" />
...
<input alt="" src="https://sandbox.google.com/checkout/buttons/buy.gif?merchant_id=..." type="image" />
</form> 
```

然后使用 javascript/jquery 自动发布此表单 onload：

```
$("form").submit(); 
```

这解决了每页只有 1 个表单的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:02:52.363

添加`runat="server"`以使该标签在代码隐藏中可见。

# parsing - ANTLR 解析错误

> ID：11119101
> 
> 赞同：1
> 
> 时间：2012-06-20T12:01:37.713
> 
> 标签：parsing, compiler-construction, antlr

我有 antlr 的问题。我有以下简单的语法：

```
grammar bxk; 
options
{
    language=CSharp3;
}

// start rule
start
    : root* EOF
    ;

root
    : ROOT_ID CT_ID ((rd=rootDefinition) | END)
    ;

rootDefinition  
    : '{'
      ('scope' ASSIGN s=STRING END)?
      ('major' ASSIGN i=STRING END)?
      ('minor' ASSIGN i=STRING END)?
      ('revision' ASSIGN i=STRING END)?
      '}'
    ;   

CHAR    :  ('a'..'z'|'A'..'Z') ;
ROOT_ID :  'ROOT_'(CHAR | DIGIT | SPECIAL)+ ;
CT_ID   :  'ct_'(CHAR | DIGIT | SPECIAL)+ ;
DIGIT   :  '0'..'9';
SPECIAL :  '_' ;
END :  ';';
STRING  :  CHAR (CHAR | DIGIT | SPECIAL)*;
WS      :  (' '|'\t' | '\n' | '\r' | '\u000C')+ {Skip();} ; 
```

就这些。现在，当我生成 c# 代码时，我遇到了几个错误： funktion 'start' 是私有的，我必须始终更改为 public。此外，当我更改为 public 并将解析以下内容时：

```
ROOT_base ct_s { 
 scope=aliejfoac;
} 
```

在内部发生 NoViableAltException。如果我在分号后添加一个空格，它会正常运行。但我只能在 Visual Studio 的调试模式下看到异常。

我遇到的另一个问题是语法错误不显示。我已经添加：

```
catch [RecognitionException re] {
    ReportError(re);
    throw new Exception(re.ToString() + "\non line " + re.Line + " and row " + re.CharPositionInLine.ToString());
} 
```

现在，如果发生语法错误，将显示异常。

最后我遇到了问题`Skip()`。当我编写它时，`Skip()`它适用于生成的代码而不是解释器。当我编写`skip()`它时，它仅适用于解释器，而不适用于生成的代码。

谁能帮我解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:13:11.837

> *用户 1469116 写道：*
> 
> 功能“开始”是私有的，我必须始终更改为公开。

默认情况下，所有规则在 C# 目标中都是私有的。`public`通过在入口点规则前面添加关键字来明确公开：

```
public start
 : root* EOF
 ; 
```

> *用户 1469116 写道：*
> 
> 在内部发生 NoViableAltException。如果我在分号后添加一个空格，它会正常运行。

如果我添加规则：

```
ASSIGN :  '='; 
```

我可以成功解析您的输入。ANTLRWorks 的调试器将其解析如下：

![在此处输入图像描述](../Images/e64f32b183642fc1fe5190ce468ad103.png)

> *用户 1469116 写道：*
> 
> 最后我遇到了Skip（）的问题。当我编写它时 Skip() 它适用于生成的代码而不是解释器。当我编写 skip() 时，它仅适用于解释器，而不适用于生成的代码。

解释器（我假设来自 ANTLRWorks）会忽略语法选项部分中的所有内容，并且是基于 Java 的。Java 目标只“知道” a `skip()`，而 C# 目标只“知道”一个`Skip()`方法。

# c# - 获取给定 http 地址中的所有文件夹

> ID：11119104
> 
> 赞同：0
> 
> 时间：2012-06-20T12:02:07.983
> 
> 标签：c#, asp.net, .net, c#-4.0

我想知道给定 http 地址中的所有目录。如何获取 Web 应用程序中的所有目录名称？我在 Visual Studio 2010 中使用 C#。

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:06:15.610

您不能，除非该信息被站点地图之类的东西公开并且您以某种方式阅读了此信息。

无法“查询”网络服务器，GET 和 POST 是标准操作，对于那些您需要从/到 GET/POST 的地址 (uri)。

# iphone - 自定义 UITabBar 用于最小化和恢复目的

> ID：11119113
> 
> 赞同：0
> 
> 时间：2012-06-20T12:02:27.283
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbarcontroller

我想在我的 iOS 应用程序中使用自定义 UITabBar，并在其上方有一个按钮来隐藏/最小化和显示/恢复它。[我从这里](http://blog.holler.com/custom-iphone-tab-bar-2011-10)使用了一个自定义标签栏，但我无法让它工作。我在 UINavigationController 子类中添加了一个按钮，`ViewDidLoad`并添加了一个目标选择器来隐藏/显示所有视图中的选项卡栏，但我希望该选择器可以在应用程序的任何地方使用。这样的标签栏甚至可能吗？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:25:07.827

```
UIview *tabView=[UIview alloc]initwitFrame:CGRectMake(0,260,320,60)];

UIButton *btn=[UIButton alloc]initWithFrame:CGRectMake(0,0,50,20)];
[btn setTitle:@"SHOW/HIDE"];
you can add Target to your btn here...
[btn addTarget:self action:@selector(showNHide:) forControlEvents:UIControlEventTouchUpInside];
[tabView addSubView:btn];
[youTabbar setFrame:CGRectMake(0,20,320,40)];
[tabView addSubView:yourTabbar]; 
```

然后将整个视图添加到您的视图中 [self.view addSubView:tabView];

然后在你的 showNHide 方法中你可以为动画编写代码......这不是完美的答案，但我希望这会给你一些想法

# .net - 如何制作表现正常但没有传统 Windows chrome 的窗口

> ID：11119114
> 
> 赞同：0
> 
> 时间：2012-06-20T12:02:27.863
> 
> 标签：.net, winforms, winapi, .net-2.0, styling

我想要看起来和行为像普通窗口的窗口：

*   它在工具栏中，并具有文本和上下文菜单
*   它像普通窗口一样有阴影
*   最小化、恢复、最大化的行为（动画、定位）与普通窗口一样

窗口不能有传统的 Windows chrome：

*   无国界
*   没有标题栏

![在此处输入图像描述](../Images/dddcb52970eddcedfa0006d1aec9bdf4.png)

我正在尝试的正是上面加上 5px 实心边框和自定义最小/最大/关闭按钮

![在此处输入图像描述](../Images/4f20ad5339a9ae4865cab4f7e6e37e78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:04:47.463

阅读这篇文章[http://geekswithblogs.net/kobush/articles/CustomBorderForms3.aspx](http://geekswithblogs.net/kobush/articles/CustomBorderForms3.aspx)

并在发布之前进行搜索。

# ios - 如何在 ios 中使用 Phonegap 将图像加载到 html5

> ID：11119117
> 
> 赞同：0
> 
> 时间：2012-06-20T12:02:32.633
> 
> 标签：ios, html, cordova

我是phonegap的新手。我们如何在 ios 中使用 phonegap 在 html5 上加载图像？谁能帮我？但它不工作

```
DOCTYPE HTML>
<HTML>

<body>
<canvas id="myCanvas" width="200" height="100" style="border:1px solid #c3c3c3;">
Your browser
</canvas>

<script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
<script type="text/javascript" src="xui<2.3.2>.js"></script>
<script type="text/javascript" charset="utf-8">

window.onload=function(){
var c=document.getElementById("myCanvas");
var cs=c.getContext("2d")
var img=new Image()
img.src="picture.jpg";
cs.drawingImage(img,0,0);
};

</script>
<img src="picture.jpg"/>
</body>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:27:06.127

嗨，我无法弄清楚这个问题，但下面的例子对我有用。

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      window.onload = function() {
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");
        var imageObj = new Image();

        imageObj.onload = function() {
          context.drawImage(imageObj, 69, 50);
        };
        imageObj.src = "http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg";
      };

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="400"></canvas>
  </body>
</html> 
```

更改图像的链接。希望它有效。

# html - 如何确保提供更新的文件而不是缓存的文件？

> ID：11119118
> 
> 赞同：2
> 
> 时间：2012-06-20T12:02:45.653
> 
> 标签：html, css

假设我缓存了我的 CSS 文件并将它们的到期日期设置为从现在起一个月。假设我有一些更新，因此修改了 CSS 文件。如何确保我网站的访问者将使用更新后的 CSS 而不是旧的？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:06:48.550

您可以在 url 中添加查询字符串，例如

```
<link rel="stylesheet" type="text/css" href="theme.css?v1" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:07:44.733

更改网址。这将迫使浏览器重新下载文件。最简单的事情是在文件名中有一个数字，您可以递增。使用一些重写规则配置您的 Web 服务器，这样您就不需要每次都重命名文件。

这是我在[errefredag​​.se](http://erefredag.se/)上为 Nginx 服务器重写的规则：

```
rewrite ^/style\..*\.css$ /style.css; 
```

这就是我的`<link>`元素的样子：

```
<link rel="stylesheet" type="text/css" href="style.acf1a27de.css"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:07:03.303

您可以更改名称，以确保无论用户使用何种浏览器，他们都会获得新文件。在您引用 CSS 文件的所有地方，请改为引用包含文件名的变量。当您发布新版本时，请更新变量，以便所有页面都查看新样式表。

# ruby-on-rails - 此贝叶斯分类器 gem 给出以下错误：无法在迭代期间将新密钥添加到哈希中 - 我该如何解决？

> ID：11119125
> 
> 赞同：1
> 
> 时间：2012-06-20T12:02:58.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我正在尝试使用 bayes_motel gem 来分析一些数据。我认为我的 ruby​​ 版本与 gem 的哈希创建之间存在不兼容：

```
 ruby-1.9.3-p0/gems/bayes_motel-0.1.0/lib/bayes_motel/corpus.rb:89:in `[]=': can't add a new key into hash during iteration (RuntimeError) 
```

这是gem中的相关代码：

```
 def clean(hash, k, v)
    case v
    when Hash
      v.each_pair do |key, value|
        clean(v, key, value)
      end
      if v.empty?
        hash.delete(k)
      elsif v.size == 1 and v['other']
        hash.delete(k)
      end
    else
      if v < (@total_count * 0.03).floor
        hash['other'] ||= 0
        hash['other'] += v
        hash.delete(k)
      end
    end
 end 
```

我一直在关注本教程：

[http://www.mikeperham.com/2010/04/28/bayes_motel-bayesian-classification-for-ruby/](http://www.mikeperham.com/2010/04/28/bayes_motel-bayesian-classification-for-ruby/)

以及 gem 上的演示：

[https://github.com/mperham/bayes_motel](https://github.com/mperham/bayes_motel)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:59:53.617

这应该有效。改变这个：

```
v.each_pair do |key, value| 
```

..对此：

```
v.to_a.each do |key, value| 
```

最好重新运行测试用例以确保。

# git - 如何在我的 Fedora 16 机器上安装 git 以用作自己的 git 服务器？

> ID：11119126
> 
> 赞同：0
> 
> 时间：2012-06-20T12:03:04.017
> 
> 标签：git, fedora16

我的团队有 3 或 5 人。我们在本地工作。

我们决定在我的笔记本电脑上选择 git 服务器，这样其他人就可以查看...

我尝试过这样的事情：

```
mkdir gitexample
cd gitexample
git init
touch README
git add README
git commit -m 'first commit'
git remote add origin git@IP_ADDRESS_OF_SERVER:example.git
git push origin master 
```

但是当我跑到：

```
git remote add origin git@192.168.1.15:example.git
git push origin master 
```

我收到消息：

```
git@192.168.1.12's password: 
fatal: 'example.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

有人知道如何在 Fedora 上安装和配置它吗？ `192.168.1.15`是我的IP地址。

当我运行时：

```
[root@localhost .ssh]# ssh git@192.168.1.12
git@192.168.1.12's password: 
fatal: Interactive git shell is not enabled.
hint: ~/git-shell-commands should exist and have read and execute access.
Connection to 192.168.1.12 closed. 
```

还有什么可以让它工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:12:02.127

在服务器上，您必须初始化一个裸存储库。

```
mkdir example.git
cd example.git
git init --bare 
```

之后，您将能够从存储库克隆/拉取/推送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:12:42.527

您正在寻找的是[gitolite](https://github.com/sitaramc/gitolite)，它是一个 Git 服务器。与任何其他 Linux 发行版相比，Fedora 在这里不需要特殊的程序。

本质上，gitolite 通过使用 SSH 访问来管理您的存储库。您创建一个特定用户（即`git`）来访问存储库，然后提供一个具有用户权限的简单配置文件进行授权。您通过公共 SSH 密钥管理身份验证。存储库的创建和授权的更改可以通过特殊的“管理”存储库执行，而存储库的销毁必须手动执行。

总而言之，它是一个用于处理 Git 存储库的非常低级的工具。它开始很简单，但它有很多可以调整的配置细节。[快速安装](http://sitaramc.github.com/gitolite/qi.html)文档非常简单。

在我看来，gitolite 对于“本地”工作组来说也是一项不错的投资。当您对（非常简单的）设置过程充满信心时，管理存储库就变得轻而易举了。

# node.js - 如何知道 vm.runInContext 何时完成它的执行

> ID：11119129
> 
> 赞同：3
> 
> 时间：2012-06-20T12:03:06.700
> 
> 标签：node.js

这是我的代码

```
var offer = {title:'fdsfds',price:323,value:140};
    var initSandbox = {
            http: http,
            offer: offer
        };
var context = vm.createContext(initSandbox);
vm.runInContext(code, context); 
```

当 runIncontext 在提供的上下文中成功执行代码时，它会在上下文中更新提供对象，因此我需要知道它何时完成执行，以便我可以从上下文中检索提供对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T08:30:33.440

将回调传递给您的上下文并从您的代码中触发它

```
var vm = require('vm');
var offer = {title:'fdsfds',price:323,value:140};
var initSandbox = {
    http: 123,
    offer: offer,
    done : function(offer) {
        console.log('done!');
    },
    setTimeout: setTimeout
};
var context = vm.createContext(initSandbox);
vm.runInContext("setTimeout(done,100)", context); 
```

# jquery - 是否有可能获得 Twitter REST 搜索 gzip'ed？

> ID：11119130
> 
> 赞同：1
> 
> 时间：2012-06-20T12:03:10.460
> 
> 标签：jquery, ajax, twitter, gzip

我正在使用 $.ajax 在客户端使用 jQuery 从 Twitter 获取 REST 搜索。是否有可能从 Twitter 获取此 gzip 文件？我已经四处寻找，但似乎无法找到明确的答案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:49:17.510

[Twitter自 2012 年 2 月起](https://dev.twitter.com/blog/gzip-compression-for-stream-twitter-com-this-week)为 Streaming API 提供 gzip 压缩，但似乎没有为他们的任何其他 API 端点提供它。

# routes - Padrino：在控制器中确定路线名称

> ID：11119132
> 
> 赞同：1
> 
> 时间：2012-06-20T12:03:22.207
> 
> 标签：routes, padrino

有没有办法在 padrino 控制器中确定路线名称是什么？例如，在前块中，我希望能够根据路线采取一些预定的行动。所以，像这样：

```
before do
  check_authorization_for(:route_name)
end 
```

其中 ":route_name" 类似于 "update" 或 "delete" 或 "create" 之类的。就像现在一样，我只有代码来检查当前用户是否有权在每个控制器方法的开头执行请求的操作。我们的授权方案依赖于我们的数据库中的信息，并且这些权限是在控制器操作上键入的，所以如果有办法确定控制器中的路由名称（即，如果我可以确定正在调用“更新”操作)，我可以只用一个块来测试授权，而不必在每个操作中进行检查。

我确信一定有一种非常简单的方法可以做到这一点，但我似乎找不到任何关于它的文档。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:35:02.593

尝试

```
before :show, :edit, :destroy do
    Post.find(params[:id])
end 
```

或者，如果您更喜欢直接访问路由对象：

```
request.route_obj 
```

IE

```
request.route_obj.controller 
```

如果你想混合当前路径，有一些类似于`current_page`在 rails 中的东西。

```
# http://localhost:3000/category/1/products/page/3
current_path('page' => 4) # => http://localhost:3000/category/1/products/page/4 
```

# objective-c - 是否可以在 UITableview 中搜索静态单元格？

> ID：11119137
> 
> 赞同：2
> 
> 时间：2012-06-20T12:03:40.733
> 
> 标签：objective-c, cocoa-touch, uitableview, interface-builder

我有一个`UITableView`通过 Interface Builder 制作的静态单元格。

是否可以使用搜索栏搜索这些单元格？我一直在尝试实现它，但似乎无处可去。对于搜索栏，表格视图是否必须使用动态单元格，或者可以使用静态单元格进行搜索，还是可以通过单元格的标签进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:28:59.450

可以在表格中实现静态单元格的搜索。但是，由于表格后面的数据源隐藏在 中`UITableViewContoller`，因此您需要将搜索的“线索”放入单元格本身。

我强烈警告不要使用标准单元类，因为除了一两个标签之外，它们没有提供存储您搜索的数据的地方。然而，使用标签并不是一个好的选择，因为它可能会妨碍您的本地化工作。

更好的方法是为您`UITableViewCell`的 . `UISearchBar`.

这是一个示例：为您的自定义单元格定义一个类

```
@interface SearchableTableViewCell : UITableViewCell
@property (readwrite, nonatomic) NSString *searchString;
@end 
```

在每个静态单元格的 Identity Inspector 中，选择`SearchableTableViewCell`类型。在 User Defined Runtime Attributes 面板中，单击 [+]，类型选择“字符串”，`searchString`名称输入，并将可搜索内容设置为值。

现在，您`UISearchBarDelegate`可以从`UITableView`'s获取单元格`dataSource`，将它们转换为`SearchableTableViewCell`，并检查它们的`searchString`属性以确定该单元格是否应包含在搜索结果中。

搜索结束后，您可能需要突出显示已找到的单元格，或隐藏不符合搜索条件的单元格。虽然可以在不更改数据源的情况下进行突出显示，但隐藏需要更重要的覆盖。[这是一个讨论隐藏静态单元格的方法的问题`UITableView`](https://stackoverflow.com/q/8260267/335858)。

# windows-7 - Windows 7：AppData 文件夹在 Windows 资源管理器中不可见

> ID：11119141
> 
> 赞同：16
> 
> 时间：2012-06-20T12:04:00.130
> 
> 标签：windows-7, appdata, hidden-files

我对 Windows 7 有点陌生。我正在运行 Windows 7 的外语版本（不确定这是否重要）。无论如何，当我使用 cmd 运行命令提示符环境和

C:\Users\MyUserNameHere> 目录

我没有看到名为 AppData 的文件夹。

当我做同样的事情并从 Windows 资源管理器应用程序中检查出来时，我也看不到 AppData 文件夹。然而，当我

C:\Users\MyUserNameHere> cd AppData

我可以 cd 到这个文件夹。好像这个文件夹以某种方式被隐藏了。

所以，我的问题是：

1.  这个文件夹是做什么用的，即它在 Windows 7 中的用途是什么？我看到一些安装在这个文件夹下安装了东西，而另一些则没有。为什么？

2.  其中包含的三个目录有什么区别：Local、LocalLow 和 Roaming？他们有不同的目的吗？

3.  我可以“取消隐藏”这个隐藏的 AppData 文件夹，以便在 windows explorer.exe 应用程序中更轻松地导航到它吗？

4.  Aptana Studio 3 安装在 AppData\Local 目录下，而使用 Skype 拍摄的网络摄像头照片位于 AppData\Roaming 下。为什么选择这种目录？（这个问题只是 2 的一个特例。）

谢谢你的澄清，

我还想指出一本书详细介绍了 Windows 7 的此类内容，以便如果您不介意建议链接或书籍，我可以更好地使用操作系统。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T12:10:13.453

1.  该文件夹用于应用程序存储任何用户数据，例如设置或缓存文件。

2.  请参阅[此站点](http://www.blogtechnika.com/what-is-application-data-folder-in-windows-7)以获得很好的解释。

3.  您可以通过关闭[编辑>文件夹选项]下的“隐藏文件夹”功能来取消隐藏文件夹（按alt键查看菜单）。或查看上面的链接了解更多信息。

4.  我希望该程序以漫游的方式存储镜头，这样如果您使用联网的 PC（例如在工作场所的域上），当您登录和关闭时，图像将能够从 PC 传输到 PC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:30:30.047

如前所述，AppData 文件夹默认是隐藏的，以便从 CMD 行查看它，使用以下命令；

```
cd %userprofile%
dir /a:h 
```

%userprofile% 是用于访问当前用户配置文件文件夹位置的有用环境变量。添加到 dir 的开关告诉 dir 显示具有隐藏属性的文件/文件夹。

> **注意：**更改文件夹选项中的隐藏文件选项只会影响资源管理器，Cmd.exe 仍将隐藏具有隐藏属性的文件/文件夹。

* * *

继 jamesakadamingo 回答点 4

差异的原因是`AppData\Local`文件夹用于存储特定于用户配置文件的信息，这些信息应该存储*在本地*（即，它特定于当前机器）。LocalLow 是相同的，但专门用于低完整性应用程序在本地存储数据。

在您的 Aptana Studio 3 示例中，如果您使用另一台机器，则不一定安装 Aptana Studio 3，因此保留该信息没有任何好处。

鉴于`AppData\Roaming`从一台机器到另一台机器跟踪用户（如果他们的用户配置文件正在漫游），并且通常包含可能持续存在并且仍然有益的信息，对于 Skype，网络摄像头拍摄（它们只是可通过任何图像查看器或编辑器访问的图像）这将是有用的内容，可以保留在您的个人资料中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T03:51:01.933

一个很好的来源是Paul Thurrott 的[Windows 7 Tips](https://rads.stackoverflow.com/amzn/click/com/0470508418)

# jquery - Jquery 无法处理 CXF Web 服务响应

> ID：11119152
> 
> 赞同：0
> 
> 时间：2012-06-20T12:05:10.553
> 
> 标签：jquery, cxf

我开发了一个基本的 CXF JAX-WS Web 服务。web服务、接口的一些细节：

```
import javax.jws.WebService;

@WebService(name = "MesseSEI", targetNamespace = "http://default_package/")
public interface MesseSEI {

public String ResponseMesse(String input);
} 
```

服务实现：

```
import javax.jws.WebService;

@WebService(targetNamespace = "http://default_package/", endpointInterface = "MesseSEI", portName = "MessePort", serviceName = "MesseService")
public class Messe implements MesseSEI {

public String ResponseMesse(String input){
    return input + " is a good input!";
}
} 
```

为了在 HTML 页面中调用 Web 服务，我使用 Jquery。

Jquery部分是这样的：

```
var URL = 'http://localhost:8080/Messe/services/MessePort?wsdl';
var soapMessage='<?xml version="1.0" encoding="utf-8"?>';
soapMessage +='<soapenv:Envelope xmlns:q0="http://default_package/"     xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org    /2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">';
soapMessage +='<soapenv:Body>';
soapMessage +='<q0:ResponseMesse>';
  soapMessage +='<arg0>Dolar</arg0>';
soapMessage +='</q0:ResponseMesse>';
 soapMessage +='</soapenv:Body>';
soapMessage +='</soapenv:Envelope>';
function CallService()
{
    $.ajax({
        url: URL,
        type: "POST",
        dataType: "xml",
        data: soapMessage,
    dataProcess: false,
    cache: false,
        success: function(data) { 
        alert("Success: " + data); 
        },
    complete: function(msg){
    alert(msg.status +" " + msg.statusText + " " +msg.readyState + " " + msg.redirect);
    }
    });

    return false;
} 
```

首先在 Ajax 调用时使用：

```
contentType: "application/xml; charset=utf-8", 
```

在服务器端请求类型显示为 OPTIONS 而不是 POST。通过从 ajax 调用中删除 contentType，Web 服务可以正常接收请求。它只是给出状态为 200 OK 的响应，并且 SoapEnv 已正确发送。但是，在 jquery 部分无法接收响应，也就是说调用了错误回调函数，在其中，我只看到消息的状态为 0。

在搜索类似问题时，我遇到可能与 CORS 问题有关，但我添加了：

```
jQuery.support.cors = true; 
```

在我的代码中。

要清楚我现在的问题是，Web 服务接收请求并使用正确的 SOAPenv 发送回响应，但我猜在客户端部分（即 ajax jquery 调用）响应从未收到，所以它只是将状态设为 0，而 statusText如未定义。

我希望我清楚地提到了我的问题，任何建议表示赞赏。提前致谢。

编辑：以下是 Web 服务中显示的入站和出站消息：

入站消息

```
ID: 16
Address: http://localhost:8080/Deneme/services/DeepThoughtPort?wsdl
Encoding: UTF-8
Http-Method: POST
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Headers: {Accept=[application/xml, text/xml, */*; q=0.01], accept-charset=[ISO-8859-1,utf-8;q=0.7,*;q=0.7], accept-encoding=[gzip, deflate], accept-language=[en-us,en;q=0.5], cache-control=[no-cache], connection=[keep-alive], Content-Length=[299], content-type=[application/x-www-form-urlencoded; charset=UTF-8], host=[localhost:8080], origin=[null], pragma=[no-cache], user-agent=[Mozilla/5.0 (X11; Linux x86_64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1]}
Payload: <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:q0="http://ws.skispike.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Body><q0:messe><arg0>Dolar</arg0></q0:messe></soapenv:Body></soapenv:Envelope> 
```

出站消息

```
ID: 16
Encoding: UTF-8
Content-Type: text/xml
Headers: {}
Payload: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns2:messeResponse xmlns:ns2="http://ws.skispike.com/"><return>Dolar is a good input!</return></ns2:messeResponse></soap:Body></soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:39:38.937

经过许多痛苦的日子，我解决了我的问题，我想在这里发帖会有所帮助。这个问题确实是跨域问题。添加：

```
jQuery.support.cors = true; 
```

只有不解决问题。为了处理 CORS 问题，您需要执行以下操作：

就我而言，我在 Tomcat 下发布了我的网络服务。在tomcat中按照以下说明进行操作：http: [//software.dzhuvinov.com/cors-filter-installation.html](http://software.dzhuvinov.com/cors-filter-installation.html)问题已解决。不要忘记将 .jar 添加到 tomcat 的 /lib 目录和您的服务项目类路径中。

# sql-server - 实体框架表命名约定

> ID：11119154
> 
> 赞同：4
> 
> 时间：2012-06-20T12:05:20.347
> 
> 标签：sql-server, entity-framework, naming-conventions

我是实体框架的新手。我目前正在 ASP.NET、Crystal Reports 和 LINQ to SQL 中做一个项目。

我在数据库上有以下表，我从数据库创建了我的 DBML

1.  城市
2.  City_Staff
3.  City_Program_Contact
4.  城市_官方
5.  综合_服务

这并没有出错。我刚刚意识到 DBML 创建了 Class(Objects)，我想知道这是否是表的正确命名约定。

如果您可以让我了解 SQL Server 表命名约定以及实体框架中的正确命名约定，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T12:32:18.200

首先，我不喜欢在命名中使用“_”。我改用 UpperCamelCase。

**对于表：**

我建议您在所有实体表中使用**复数：**

*   城市
*   城市工作人员

如果该表仅表示多对多关系并且没有其他字段，那么我将其命名为两个**奇异**部分：

*   城市用户

这将在 EF 中映射后表示这些**类：**

*   城市
*   城市工作人员

在 City 类中，您将拥有`Users`财产

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T06:53:09.513

我用

```
TblTeachers , TblStudents 
```

我想把它作为

```
TeachersTbl , StudentsTbl 
```

Intellisense 还有其他类似于这些表名的类，为了方便过滤掉它们，我在命名中使用了 Tbl。

# java - 线程启动不调用运行

> ID：11119156
> 
> 赞同：11
> 
> 时间：2012-06-20T12:05:25.330
> 
> 标签：java, multithreading

我对一个奇怪的问题感到困惑。基本上情况是这样的。我在我的类中实现了runnable，我在一个新线程中传递了这个类，我在`run()`实现runnable的类中覆盖了我的方法，然后我启动了线程。但是，我的`start()`方法从不调用我的`run()`方法。我搜索了论坛，但似乎找不到另一个类似的问题。

下面是我的示例代码：

```
public class EmailManager implements Runnable {
    PortalManagementSBLocal pmbr= this.lookupPortalManagementSB();
    Thread runner;
    String emailServerName = "";
    String smtpPort = "";
    String emailTo = "";
    String emailFrom = "";
    String mailer = "JavaMailer";
    String subject = "";
    String message = "";

    public EmailManager() {
    }//default constructor

    public EmailManager(String emailTo, String subject, String message){

        this.emailTo=emailTo;
        this.subject = subject;
        this.message = message;
        //need to make this dynamic
        this.emailFrom = pmbr.getEmailFrom();
        this.emailServerName = pmbr.getEmailServerName();
        this.smtpPort = pmbr.getEmailSMTPPort();
        //runner = new Thread(this,"Email");
        runner = new Thread(this);
        runner.start();
        System.out.println("***** Email Thread running...");

    }

    @Override
    public void run(){
        sendEmail(); //This is never called
    } 
```

非常感谢任何指导！万分感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T12:13:44.863

**你怎么知道这个方法永远不会被调用？**

下面的简单测试有效。所以创建一个线程并从构造函数中运行它是没有问题的。因此，还有其他事情正在阻止您看到`sendEmail()`正在调用的内容。

```
public class Test implements Runnable {
  Thread runner;
  public Test() {
    this.runner = new Thread(this);
    this.runner.start();
  }

  @Override
  public void run() {
    System.out.println("ya");   
  }

  public static void main(String[] args) {
    new Test();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:09:13.520

我认为，问题在于您在构造函数调用完成之前传递了**它。**这可能会对您有所帮助： [https ://stackoverflow.com/a/5623327/1441485](https://stackoverflow.com/a/5623327/1441485)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:10:33.593

不要`runner = new Thread(this);`在构造函数中使用

移动 ”`runner = new Thread(this); runner.start();`

初始化函数，使用 new 创建实例并调用这个 init()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T12:25:06.677

```
runner = new Thread(this);
        runner.start(); 
```

在构造函数返回之前，您的**this**对象未正确初始化。所以把它移到我们的某个地方，可能是你产生这个新线程的地方。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-20T12:14:15.643

将其移出构造函数。可以说构造函数内部没有“this”。

# iphone - 自定义字体侧翼在我的应用程序中不起作用

> ID：11119158
> 
> 赞同：1
> 
> 时间：2012-06-20T12:05:28.120
> 
> 标签：iphone, ios, xcode

每个人我都在尝试在我的 ios 应用程序中使用自定义字体，例如wingding 我已经按照所有这些步骤添加自定义字体，比如在我的应用程序资源中添加自定义字体文件，并在 plist 中添加应用程序提供的关键字体并将其设置为数组和下面我已经提到了我的自定义字体文件名，但是那些（wingding）仍然无法正常工作。当我尝试使用其他自定义字体时，它们工作正常。

这是我使用的代码，所以提供

```
 - (void)viewDidLoad
{
mine = [[UILabel alloc] initWithFrame:CGRectMake(10, 30, 240, 40)];

[mine setFont:[UIFont fontWithName:@"wingding" size:20]];

[mine setText:@"Where i am doing wrong"];

[self.view addSubview:mine];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
} 
```

我缺少蚂蚁建议的地方会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:34:43.770

Try importing the font properly in the application using File > Add Files to "Your project name".. Not by just dragging and dropping the font.

This should solve your problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:41:46.307

```
UILabel *title = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 170, 60)];
    title.numberOfLines = 3;
    title.textAlignment = UITextAlignmentLeft;
    title.lineBreakMode = UILineBreakModeClip;
    title.font = [UIFont fontWithName:[[UIFont familyNames] objectAtIndex:1]  size:15];
    title.text = @"Hello Hello";
    title.textColor = [UIColor brownColor];
    title.adjustsFontSizeToFitWidth = YES;
    title.backgroundColor = [UIColor clearColor];

[self.view addSubview:title]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:03:37.783

请尝试以下操作：

在 Mac 应用程序“Font-Book”应用程序中打开您的自定义字体文件（即 .ttf 文件）。

在那个“Font-Book”应用程序中检查这些字体的名称。例如。@"Wingdings.ttf"

并使用以下加载字体：
[mine setFont:[UIFont fontWithName:@"Wingdings.ttf" size:20]];

您也可以尝试以下链接：
[无法在 iOS 上加载自定义字体](https://stackoverflow.com/questions/11047900/cant-load-custom-font-on-ios/11047980#11047980)

# .net - 如何将新字段添加到文本文件并添加值？

> ID：11119159
> 
> 赞同：0
> 
> 时间：2012-06-20T12:05:35.000
> 
> 标签：.net, vb.net, vb.net-2010

我有两个包含不同列的文本文件，每列由制表符（“”）分隔。我想要做的是以下几点： -

*   如果文本文件 2 第 1 列中的值不包含文本文件 1 第 1 列中的任何值，则将该字段添加到文本文件 2 并将 1 添加到第二列，如下所示

    字符串 1

*   如果文本文件 2 第 1 列中的值已经出现在文本文件 1 第 1 列中，则只需将 +1 添加到该值中，因此如果上述值已经在文本文件 1 第 1 列和文本文件 2 第 1 列中，则它将显示为.

    字符串 2

如果它再次发生

```
String 3 
```

等等。

到目前为止，我有以下编码。

```
Dim lines1 As New List(Of String)(IO.File.ReadAllLines("File1"))
Dim lines2 As New List(Of String)(IO.File.ReadAllLines("File2"))
IO.File.WriteAllLines("File2", lines1.ToArray) & +1) 
```

更新

```
Dim lines1 As New List(Of String)(IO.File.ReadAllLines("D:\Test\File6.txt"))
        Dim lines2 As New List(Of String)(IO.File.ReadAllLines("D:\Test\File5.txt"))

        Dim values As New Dictionary(Of String, Integer)()
        For Each line As String In lines1
            Dim fields() As String = line.Split(" "c)
            If fields.Length > 1 Then
                values(fields(0)) = Integer.Parse(fields(1))
            End If
        Next

        For Each line As String In lines2
            Dim fields() As String = line.Split(" "c)
            If fields.Length > 0 Then
                If values.ContainsKey(fields(0)) Then
                    values(fields(0)) = values(fields(0)) + 1
                Else
                    values(fields(0)) = 1
                End If
            End If
        Next

        lines1.Clear()
        For Each pair As KeyValuePair(Of String, Integer) In values
            lines1.Add(pair.Key + " " + pair.Value.ToString())
        Next

        IO.File.WriteAllLines("D:\Test\File6.txt", lines1.ToArray) 
```

我使用上面的编码，但它删除了第二列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:30:39.730

我建议使用字典将键/值对存储在您的第一个文本文件中。然后，您可以在解析第二个文本文件中的数据时轻松搜索和修改字典中的数据。例如：

```
Dim lines1 As New List(Of String)(New String() {"A a 1", "B b 2", "C c 3"})
Dim lines2 As New List(Of String)(New String() {"A a", "D d"})

Dim values As New Dictionary(Of String, Integer)()
For Each line As String In lines1
    Dim fields() As String = line.Split(" "c)
    If fields.Length > 2 Then
        values(fields(0) + " " + fields(1)) = Integer.Parse(fields(2))
    End If
Next

For Each line As String In lines2
    Dim fields() As String = line.Split(" "c)
    If fields.Length > 1 Then
        Dim key As String = fields(0) + " " + fields(1)
        If values.ContainsKey(key) Then
            values(key) = values(key) + 1
        Else
            values(key) = 1
        End If
    End If
Next

lines1.Clear()
For Each pair As KeyValuePair(Of String, Integer) In values
    lines1.Add(pair.Key + " " + pair.Value.ToString())
Next 
```

# php - 内存缓存中非常有趣的错误

> ID：11119161
> 
> 赞同：0
> 
> 时间：2012-06-20T12:05:42.083
> 
> 标签：php, caching, memcached

```
 $new = $this->memcache->get("posts");
    if(empty($new)){

        // Get the new posts
        $new = Posts::getNow("10");

        // Save them in memcache
        $this->memcache->set('posts', serialize($new), 0, 60*3); // Cache time is 3 min

    // If we found them in cache - load them from there
    } else {

        // Get data from memcache
        $new = unserialize($this->memcache->get("posts"));
    } 
```

如果缓存中存在数据，则代码非常简单，如果不再获取它们。有趣的是，有时当我查看网站时，div 是空的并且没有数据，但是当我重新加载页面时，那里有数据。当缓存被擦除时，我对站点的看法是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:10:52.840

那一定是**时间**，你从缓存中检索数据两次，一次是为了检查它在这里，第二次是为了反序列化它。数据可以在这些调用之间过期，我们无法控制它

只需反序列化您已经获得的数据：

```
$data = $this->memcache->get("posts");
if(empty($data)){
    // Get the new posts
    $new = Posts::getNow("10");
    // Save them in memcache
    $this->memcache->set('posts', serialize($new), 0, 60*3);
} else {
    // Unserialize data instead of retrieving it from cache for second time.
    $new = unserialize($data);
} 
```

# java - eclipse中的文件IO

> ID：11119162
> 
> 赞同：0
> 
> 时间：2012-06-20T12:05:42.657
> 
> 标签：java, eclipse, io

我对 eclipse 很陌生，我的代码中有以下行：

```
BufferedReader bf = new BufferedReader(new FileReader("dvdinfo.txt")); 
```

当通过简单的文本编辑器和 Windows 控制台实现时，它工作正常，但通过 Eclipse 运行时，它显示`FileNotFoundException`。

是的，我总是将 txt 文件保存在与`.java`包含此代码的文件相同的文件夹中。同样在 Eclipse 中，我选择将我的源代码和我的类文件放在同一个文件夹中。

是否有任何不同的方法可以在 eclipse.xml 中指定同一文件夹中的文件名。

注意：我使用的是 Windows 7 和 Eclipse 3.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:09:10.087

> 是的，我总是将 txt 文件保存在与包含此代码的 .java 文件相同的文件夹中。

这并不意味着在您*运行*代码时它位于同一目录中。

> 是否有任何不同的方法可以在 eclipse.xml 中指定同一文件夹中的文件名。

和什么文件夹一样？*如果您希望文件与构建的输出*打包在一起，您可以在 Eclipse 中将其指定为资源，但您应该使用`Class.getResourceAsStream()`or来读取它`ClassLoader.getResourceAsStream()`。

如果您真的希望它是一个文件，您可能需要*指定*一个绝对文件名*或*在 Eclipse 的运行配置中更改工作目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:13:56.727

意外的 FNFE（尤其是不合格的文件名）往往是因为您没有在您认为的目录中查找。堆栈跟踪中是否包含限定文件名？

尝试这个;

```
File file = new File("dvdinfo.txt");
try {
  BufferedReader bf = new BufferedReader(new FileReader(file));
  ......
} catch (FileNotFoundException fnfe) {
  //Note that writing to syserr is only for debugging - don't do this in prod
  System.err.println("Can't find " + file.getCanonicalPath());
  fnfe.printStackTrace();
} 
```

# c# - 安装 VS 2012 RC 时，添加服务引用在 VS 2010 中不起作用

> ID：11119163
> 
> 赞同：0
> 
> 时间：2012-06-20T12:05:43.007
> 
> 标签：c#, .net, visual-studio-2010, web-services, visual-studio-2012

安装 VS 2012 RC 后，在 VS 2010 上添加参考失败。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:27:59.983

卸载vs 2012，vs 2010会给你“未知错误”，一个小错误信息，修复vs 2010（重新安装），就OK了！

[Visual Studio 2012 错误参考.svcmap 抛出错误](https://stackoverflow.com/questions/11112960/visual-studio-2012-error-reference-svcmap-throwing-error/)

# sql - 我们可以创建关于过程、函数、触发器、包的视图吗？

> ID：11119169
> 
> 赞同：0
> 
> 时间：2012-06-20T12:06:07.743
> 
> 标签：sql, oracle, object, view, plsql

我是 SQL 新手，正在经历一些视图分配。我对以下观点有一些疑问：

我们可以创建关于过程、函数、触发器、包或序列、索引、同义词的视图吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:15:15.237

这是一个基于 FUNCTION 的视图示例（注意：不是 PIPELINED 函数，尽管它可能是）：

```
create or replace type dept_t is object (deptno number, dname varchar2(10));

create or replace type dept_tab_t is table of dept_t;

create or replace function depts_fun 
return dept_tab_t
is 
  l_dept_tab dept_tab_t := dept_tab_t();
begin
  for r in (select deptno, dname from dept)
  loop
    l_dept_tab.extend;
    l_dept_tab(l_dept_tab.count) := dept_t(r.deptno, r.dname);
  end loop;

  return l_dept_tab;
end;
/

create view depts_view as
select * from table (depts_fun);

select * from depts_view; 
```

我并不是说它有用或做得好，只是说它是可能的！

当然，我可以（并且可能会在实际系统中）将该函数放在一个 PACKAGE 中，因此视图也可以基于一个包函数。

因此，您可以创建视图的（完整？）对象列表是：

*   表
*   意见
*   同义词
*   物化视图
*   返回表类型的独立函数
*   封装返回表类型的函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:14:08.593

A`view`可以在 a`table`或另一个上创建`view`。`Synonyms`包括在内，因为它们只是 a 的不同名称`table`。（a`view`是**数据**视图）

您不能通过代码 ( `procedure,function,trigger,package`) 或`sequence`.

作为特例是[流水线函数](http://asktom.oracle.com/pls/asktom/f?p=100:11%3a%3a%3a%3a%3aP11_QUESTION_ID:19481671347143)，正如格伦所说，它产生一组数据，语法是：

```
select something from TABLE(pipelined_function()) 
```

但这不是一个观点:)

# c# - Outlook 约会 c#

> ID：11119171
> 
> 赞同：0
> 
> 时间：2012-06-20T12:06:13.707
> 
> 标签：c#, outlook, ldap

我正在尝试创建一个直接进入用户日历的 Outlook 约会，并将回复发送到不同的电子邮件地址。

这可以使用和`LDAP`查询吗？如果没有，我最好的选择是什么？

谢谢Sp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:11:41.700

```
public void addAppointments(String subject,String body,DateTime startTime,DateTime endTime,String location) 
{
    Appointment app = new Appointment(_service);
    app.Subject = subject;
    app.Body = body;
    app.Start = startTime;
    app.End = endTime;
    app.Location = location;

    //DayOfTheWeek[] days = new DayOfTheWeek[] { DayOfTheWeek.Saturday };
    //app.Recurrence = new Recurrence.WeeklyPattern(app.Start.Date, 1, days);
    //app.Recurrence.StartDate = app.Start.Date;
    //app.Recurrence.NumberOfOccurrences = 3;

    app.Save();
} 
```

此方法可用于添加约会。使用 Outlook api。

此链接也将有所帮助。

[http://social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/7ae6d938-a64f-4c27-95ba-435f84da236f](http://social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/7ae6d938-a64f-4c27-95ba-435f84da236f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:11:49.023

据我所知，您无法使用 LDAP 执行此操作。您可能想要掌握 Exchange Web 服务程序集 (Microsoft.Exchange.WebServices)，它包装了交换服务器 Web 服务 API，并允许您轻松地“做事”作为交换。

例如获取约会的示例代码：

```
var service = new ExchangeService { UseDefaultCredentials = true };
service.AutodiscoverUrl(emailAddress);

// Set the calendar view to use
var view = new CalendarView(startDate, endDate);

// Get the target folder ID using the email address
var folder = new FolderId(WellKnownFolderName.Calendar, new Mailbox(emailAddress));

// Get the appointments
var response = service.FindAppointments(folder, view); 
```

编辑：

并创建一个 - （使用上面的一些代码来获取服务实例）：

```
var apt = new Appointment(service);
apt.Start = DateTime.Now;
// Do other stuff
apt.Save(); 
```

# javascript - Google 网站优化器脚本中的混淆脚本标记

> ID：11119175
> 
> 赞同：2
> 
> 时间：2012-06-20T12:06:40.070
> 
> 标签：javascript, google-website-optimizer

在一个网站上，我找到了以下代码：

```
<!-- Google Website Optimizer Conversion Script -->
<script type="text/javascript">// <![CDATA[
if(typeof(_gat)!='object')document.write('<sc'+'ript src="http'+
(document.location.protocol=='https:'?'s://ssl':'://www')+
'.google-analytics.com/ga.js"></sc'+'ript>')
// ]]></script> 
```

我想知道为什么脚本标签是从两部分连接起来的：`'<sc'+'ript src="http'`.. 来自谷歌的标准代码（他们提供的当前代码看起来不同 - 可能是旧代码）？还是站长定制的？这样做的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:09:05.487

`<script>`它分为两部分，因此当此 JavaScript 插入用户的 HTML 中时，浏览器的 HTML 解析器不会将其拾取并将其视为当前的关闭（显式或隐式）标记。

对于任何包含字符串`<script>`或`</script>`其中的内联 JavaScript，这是标准做法，显然，当您使用放置在单独文件中的 JavaScript 时，不需要它。

# hibernate - 由于自动加入检查而跳过 JTA 同步注册

> ID：11119182
> 
> 赞同：0
> 
> 时间：2012-06-20T12:07:03.897
> 
> 标签：hibernate, persistence, jta, entitymanager

我正在尝试持久化一个简单的实体，但它不会在没有任何错误的情况下持久化到数据库中。我正在使用 glassfish 3.1.2、hibernate 4.1.3.Final、事务范围/容器管理的 entitymanager。jta 事务在 persistence.xml 中配置，并且 jta 数据源设置正确。它是一个具有默认事务级别（必需）的无状态会话 bean。在控制台中，我多次看到来自 Hibernate 的 TransactionCoordinatorImp 的“由于自动加入检查而跳过 JTA 同步注册”消息。我可以使用 entitymanager.find 找到手动插入的实体。但无法持久化或合并。关于可能是什么问题的任何想法？

更新：似乎问题与“由于自动加入检查而跳过 JTA 同步注册”消息无关。如果我将事务隔离级别设置为 REQUIRES_NEW，则会添加新实体，但如果我将隔离级别设置为 REQUIRED，则不会持久化。此方法是第一个接收 jax-rs Web 服务调用的方法。为什么我需要 REQUIRES_NEW 隔离级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:30:34.973

您没有提供有关您的设置的足够详细信息，因此我只能笼统地回答。

跳过同步注册位实际上确实发挥了作用。这是 JPA 所说的事务加入的一部分。基本原则是不允许 EntityManager （按规范）*自动*参与创建时不活动的事务。在伪代码中，它的区别在于：

```
// start transaction
// create EntityManager
// use EntityManager
// commit transaction 
```

和：

```
// create EntityManager
// start transaction
// use EntityManager
// commit transaction 
```

在第一种情况下，EntiytManager 是在活动事务的范围内创建的，因此它会自动加入。第二种情况，它是在活动事务的范围之外创建的，所以不能自动加入。

在这种情况下，必须调用 EntityManager.joinTransaction() 以使 EntityManager 参与事务：

```
// create EntityManager
// start transaction
entityManager.joinTransaction();
// use EntityManager
// commit transaction 
```

这就是您所处的情况。您只需要找出在事务范围之外创建 EntityManager 的方式/原因（如果这不是您所期望的）。

# git - Git pull, python pyc files -error: 您对以下文件的本地更改将被合并覆盖：

> ID：11119189
> 
> 赞同：1
> 
> 时间：2012-06-20T12:07:11.803
> 
> 标签：git, github

在我的 ec2 实例上，我正在尝试对我的 github 存储库进行拉取请求。我收到以下错误。在我的本地机器上，我提交了所有内容。如果这是问题，我该如何处理 pyc 文件？

```
git add .
git commit -m 't'
git push origin development

git pull
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 2 (delta 1), reused 2 (delta 1)
Unpacking objects: 100% (2/2), done.
From https://github.com/me/rtbopsConfig
   8e320f6..0565407  development -> origin/development
Updating 94f7f3e..0565407
error: Your local changes to the following files would be overwritten by merge:
    classes/ec2/ec2Auto.pyc
    classes/redis_ha.pyc
    classes/rtbUtilities.pyc
    rtb_redis_connections/redis_connections.pyc
Please, commit your changes or stash them before you can merge.
Aborting 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T12:10:17.067

你不应该`.pyc`在 Git 中存储文件。在您的工作站上，执行

```
find . -name *.pyc -exec git rm {} \; 
```

然后在 中添加一行`*.pyc`，`.gitignore`提交所有更改并推送。

在另一端 (EC2)，执行

```
git checkout classes/ec2/ec2Auto.pyc classes/redis_ha.pyc \
             classes/rtbUtilities.pyc rtb_redis_connections/redis_connections.pyc 
```

然后拉。

# java - 为什么我不断收到 [line: 75] 错误：必须实现继承的抽象方法 java.awt.event.ActionListener？

> ID：11119191
> 
> 赞同：1
> 
> 时间：2012-06-20T12:07:13.573
> 
> 标签：java, awt, actionlistener, implements

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.*;
import java.io.*;
import java.util.*;

public class WetBulbByLocationFrame2 extends JFrame
{
  public JLabel countryLabel = new JLabel("Country");
  public JPanel countryPanel = new JPanel();
  public JComboBox countryBox;
  public String [] northAmericanCountries = {"Antigua", "Aruba", "Bahamas", "Barbados", "Bermuda", "Canada", "Costa Rica", "Cuba", "Dominican Republic", "Grenada", "Guadalupe", "Honduras", "Jamaica", "Martinique", "Panama", "Puerto Rico", "Saint Lucia", "Trinidad and Tobago", "United States of America"};
  public String [] africanCountries = {"Algeria", "Benin", "Botswana", "Burkina Faso", "Cape Verde", "Chad", "Congo", "Cote d'Ivoire", "Egypt", "Gambia", "Kenya", "Libya", "Madagascar", "Mali", "Mauritania", "Mauritania", "Morocco", "Mozambique", "Namibia", "Niger", "Reunion", "Saint Helena", "Senegal", "Seychelles", "South Africa", "Spain", "Tanzania", "Togo", "Tunisia", "United Kingdom", "Zimbabwe"}; 
  public String [] asianCountries = {"Bahrain", "China", "India", "Iran", "Japan", "Kazakhstan", "Korea, North", "Korea, South", "Kuwait", "Kyrgyzstan", "Macau", "Mongolia", "Oman", "Pakistan", "Qatar", "Russian Federation", "Saudi Arabia", "Taiwan", "Tajikistan", "Thailand", "Turkmenistan", "United Arab Emirates", "Uzbekistan", "Vietnam"};
  public String [] europeanCountries = {"Armenia", "Austria", "Azerbaijan", "Belarus", "Belgium", "Bosnia and Herzegovina", "Bulgaria", "Croatia", "Cyprus", "Czech Republic", "Denmark", "Estonia", "Faroe Islands", "Finland", "France", "Georgia", "Germany", "Gibraltar", "Greece", "Greenland", "Hungary", "Iceland", "Ireland", "Israel", "Italy", "Jordan", "Kazakhstan", "Latvia", "Lebanon", "Liechtenstein", "Lithuania", "Luxembourg", "Macedonia", "Malta", "Moldova", "Netherlands", "Norway", "Poland", "Portugal", "Romania", "Russian Federation", "Serbia and Montenegro", "Slovakia","Slovenia", "Spain", "Sweden", "Switzerland", "Syrian Arab Republic", "Turkey", "Ukraine", "United Kingdom"};
  public String [] southAmericanCountries = {"Argentina", "Bolivia", "Brazil", "Chile", "Columbia", "Ecuador", "Falkland Islands", "French Guinea", "Paraguay", "Peri", "Suriname", "Uruguay", "Venezuela"};
  public String [] southPacificCountries = {"Australia", "Brunei Darussalam", "Cook Island", "Fiji", "French Polynesia", "Guam", "Indonesia", "Kiribati", "Malaysia", "Marshall Island", "Micronesia", "New Caledonia", "New Zealand", "Northen Mariana Islands", "Palau", "Philippines", "Samoa", "Singapore", "Solomon Island", "Tonga", "Tuvalu", "United States of America", "Vanuatu", "Wallis and Futuna Islands"};
  public JButton nextButton = new JButton("Next");
  public JPanel buttonPanel = new JPanel();
  public String country;
  public String continentGIVEN;

  public WetBulbByLocationFrame2(String continent)
  {
    super("Select Country");
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension dimensions = toolkit.getScreenSize();
    int x = (dimensions.width - 315)/2; 
    int y = (dimensions.height - 250)/2;
    setBounds(x, y, 315, 250); 
    setVisible(true);
    setResizable(false);
    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    continentGIVEN = continent;

    nextButton.addActionListener(new ButtonListener2());

    if (continent.equals("North America and Central America"))
    {
      countryBox = new JComboBox(northAmericanCountries);
    }
    else if(continent.equals("Africa"))
    {
      countryBox = new JComboBox(africanCountries);
    }
    else if(continent.equals("Asia"))
    {
      countryBox = new JComboBox(asianCountries);
    }
    else if(continent.equals("Europe"))
    {
      countryBox = new JComboBox(europeanCountries);
    }
    else if(continent.equals("South America"))
    {
      countryBox = new JComboBox(southAmericanCountries);
    }
    else if(continent.equals("South Pacific"))
    {
      countryBox = new JComboBox(southPacificCountries);
    }

    countryBox.addActionListener(new ComboBoxListener1());

    countryPanel.add(countryLabel);
    countryPanel.add(countryBox);

    add(countryPanel, BorderLayout.CENTER);

    buttonPanel.add(nextButton);

    add(buttonPanel, BorderLayout.SOUTH);   
  }
  private class ButtonListener2 implements ActionListener
  {
    public void actionPreformed(ActionEvent e)
    {
      if ((country.equals("United States of America")) || (country.equals("Canada")))
      {
        // Go into a specific new frame class to deal with the states and provinces
      }
      else if (country.equals("Russian Federation"))
      {
        //Go into new frame class with the large number of Russian Cities
      }
      else if (country.equals("China"))
      {
        //Go into new frame class with the large number of Chinese Cities
      }
      else if (country.equals("Spain"))
      {
        //Go into new frame class with the Spainish Cities
      }
      else if (country.equals("United Kingdom"))
      {
        //Go into new frame class with the large number of United Kingdom Cities
      }
      else if (continentGIVEN.equals("Africa"))
      {
        if ((!country.equals("United Kingdom")) || (!country.equals("Spain")))
        {
          //Go into new frame class with all African cities minus the UK locations
        }
      }
      else if (continentGIVEN.equals("Asia"))
      {
        if ((!country.equals("Russian Federation")) || (!country.equals("China")))
        {
          //Go into new frame class with all other Asian Cities
        }
      }
      else if (continentGIVEN.equals("Europe"))
      {
        if ((!country.equals("Russian Federation")) || (!country.equals("UnitedKingdom")) ||(!country.equals("Spain")))
        {
          //Go into new frame class with all other European Cities
        }
      }
      else if (continentGIVEN.equals("North America and Central America"))
      {
        if ((!country.equals("United States of America")) || (!country.equals("Canada")))
        {
          //Go into new frame class with all Central American Cities
        }
      }
      else if (continentGIVEN.equals("South America"))
      {
        //Go into new Frame class with only South American cities
      }
      else if (continentGIVEN.equals("South Pacific"))
      {
        if (!country.equals("United States of America"))
        {
          //Go into new frame class with all other South Pacific Cities
        }
      }
    }
  }
  private class ComboBoxListener1 implements ActionListener
  {
    public void actionPreformed(ActionEvent e)
    {
      country = (String)countryBox.getSelectedItem();
    }
  }
} 
```

我不断遇到的这两个错误不知道我在做什么错。我从另外两个框架中调用了这个框架，这两个框架都以与这个相同的格式使用了 ActionListener。如果有人有任何建议，请帮助。

```
File: C:\Documents and Settings\jcoppola\Desktop\Cooling Tower Program\WetBulbByLocationFrame2.java  [line: 75]
Error: The type WetBulbByLocationFrame2.ButtonListener2 must implement the inherited abstract method java.awt.event.ActionListener.actionPerformed(java.awt.event.ActionEvent)
File: C:\Documents and Settings\jcoppola\Desktop\Cooling Tower Program\WetBulbByLocationFrame2.java  [line: 140]
Error: The type WetBulbByLocationFrame2.ComboBoxListener1 must implement the inherited abstract method java.awt.event.ActionListener.actionPerformed(java.awt.event.ActionEvent) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:09:54.577

> 公共无效actionPreformed（ActionEvent e）

**每**形成。不是**预先**形成的。

始终使用@Override。

```
@Override
public void actionPerformed(ActionEvent e){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:21:12.317

**第 140 行：**您的方法名称错误。它不是

```
 public void actionPreformed(ActionEvent e)
      {
         country = (String)countryBox.getSelectedItem();
      } 
```

但它的

```
 public void actionPerformed(ActionEvent e)
    {
        country = (String)countryBox.getSelectedItem();
     } 
```

见[actionPerformed](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ActionListener.html#actionPerformed%28java.awt.event.ActionEvent%29)

# grails - 在黄瓜测试期间从控制器访问视图

> ID：11119196
> 
> 赞同：1
> 
> 时间：2012-06-20T12:07:29.327
> 
> 标签：grails, cucumber, grails-controller

我有一个控制器`UserController`，该控制器具有`register()`使用服务注册用户然后呈现输出的方法。

我正在使用 Grails Cucumber 插件，它创建了一个 UserController 对象、设置参数和调用`userControllerObj.register()`

在黄瓜测试的“然后”部分我可以调用`userController.response.contentAsString()`，这将是我在 UserController 中写的任何文本`render "some text here"`。

但是，如果我在 UserController 注册方法中将渲染从渲染字符串更改为渲染页面：`render(view: "registrationOK")`我无法获得任何输出：

`userController.response`是一个`GrailsMockHttpServletResponse`

`userController.response.getText returns`一个空字符串

`userController.response.contentAsString`返回一个空字符串

`userController.response.contentType`返回文本/html;charset=utf-8

`userController.response.contentLength`返回 0

`userController.modelAndView.view`返回空

# sql - sql server 表峰值时间

> ID：11119197
> 
> 赞同：0
> 
> 时间：2012-06-20T12:07:43.563
> 
> 标签：sql, sql-server, sql-server-2008

我有一个应用程序，它有 1000 名用户在不同时间出于各种目的登录。现在的任务是以某种方式找出“高峰时间的用户数”，我们在 sql 中记录的是 userLoginTime,timespent。这里的问题是

如何实际计算应用程序的高峰时间。以及如何计算高峰期的用户数。

是否可以在 Sql 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:49:11.230

我玩过 - 我正在处理带有记录的开始和结束`datetime2`值的会话，但希望你可以调整你当前的数据以符合这一点：

示例数据（如果我的答案有误，也许您可​​以采用这个，将其添加到您的问题中，并添加更多示例和预期输出）：

```
create table #Sessions (
    --We'll treat this as a semi-open interval - the session was "live" at SessionStart, and "dead" at SessionEnd
    SessionStart datetime2 not null,
    SessionEnd datetime2 null
)
insert into #Sessions (SessionStart,SessionEnd) values
('20120101','20120105'),
('20120103','20120109'),
('20120107','20120108') 
```

和查询：

```
--Logically, the highest number of simultaneous users was reached at some point when a session started
;with StartTimes as (
    select distinct SessionStart as Instant from #Sessions
), Overlaps as (
    select
        st.Instant,COUNT(*) as Cnt,MIN(s.SessionEnd) as SessionEnd
    from
        StartTimes st
            inner join
        #Sessions s
            on
                st.Instant >= s.SessionStart and
                st.Instant < s.SessionEnd
    group by
        st.Instant
), RankedOverlaps as (
    select Instant as SessionStart,Cnt,SessionEnd,RANK() OVER (ORDER BY Cnt desc) as rnk
    from Overlaps
)
select * from RankedOverlaps where rnk = 1

drop table #Sessions 
```

其中，*我的*样本数据给出了：

```
SessionStart           Cnt         SessionEnd             rnk
---------------------- ----------- ---------------------- --------------------
2012-01-03 00:00:00.00 2           2012-01-05 00:00:00.00 1
2012-01-07 00:00:00.00 2           2012-01-08 00:00:00.00 1 
```

* * *

仍然使用上述方法的另一种方法，但如果您还想分析“不太峰值”的值，如下所示：

```
--An alternate approach - arrange all of the distinct time values from Sessions into order
;with Instants as (
    select SessionStart as Instant from #Sessions
    union --We want distinct here
    select SessionEnd from #Sessions
), OrderedInstants as (
    select Instant,ROW_NUMBER() OVER (ORDER BY Instant) as rn
    from Instants
), Intervals as (
    select oi1.Instant as StartTime,oi2.Instant as EndTime
    from
        OrderedInstants oi1
            inner join
        OrderedInstants oi2
            on
                oi1.rn = oi2.rn - 1
), IntervalOverlaps as (
    select
        StartTime,
        EndTime,
        COUNT(*) as Cnt
    from
        Intervals i
            inner join
        #Sessions s
            on
                i.StartTime < s.SessionEnd and
                s.SessionStart < i.EndTime
    group by
        StartTime,
        EndTime
)
select * from IntervalOverlaps order by Cnt desc,StartTime 
```

这一次，我输出*了所有*的时间段，以及当时的同时用户数（从高到低的顺序）：

```
StartTime              EndTime                Cnt
---------------------- ---------------------- -----------
2012-01-03 00:00:00.00 2012-01-05 00:00:00.00 2
2012-01-07 00:00:00.00 2012-01-08 00:00:00.00 2
2012-01-01 00:00:00.00 2012-01-03 00:00:00.00 1
2012-01-05 00:00:00.00 2012-01-07 00:00:00.00 1
2012-01-08 00:00:00.00 2012-01-09 00:00:00.00 1 
```

# python - Python OpenCV 立体摄像头盲一？

> ID：11119200
> 
> 赞同：1
> 
> 时间：2012-06-20T12:07:48.567
> 
> 标签：python, opencv, camera, real-time

我的系统是 Linux HPDebian 3.2.0-2-amd64 #1 SMP x86_64 GNU/Linux Python 2.7，OpenCV2。我只能使用 1 个凸轮。

我的问题是如何从 2 个摄像头获取视频源？我读过 C++ 版本，但我更喜欢 python。对于非程序员来说更容易。

我不明白为什么我的网络摄像头只能使用 Wleft，但 WRight 是空白的灰色窗口。在命令行

> VIDIOC_QBUF：无效参数

继续淹没我的命令行。

OpenCV-Python 有一个现成的立体程序包，但我需要访问每个凸轮的元素，因为我想测试我的算法。

我的尝试：

```
'''
Simple Stereo feed
'''
import cv
cv.NamedWindow("wLeft", cv.CV_WINDOW_AUTOSIZE)
cv.NamedWindow("wRight", cv.CV_WINDOW_AUTOSIZE)
captureL = cv.CaptureFromCAM(0)
captureR = cv.CaptureFromCAM(1)

def repeat():
    frameL = cv.QueryFrame(captureL)
    cv.ShowImage("wLeft", frameL)
    frameR = cv.QueryFrame(captureR)
    cv.ShowImage("wRight", frameR)

while True:
    repeat()
    if cv.WaitKey(33)==27:
       break

cv.DestroyAllWindows() 
```

## 更新 1

回答您的问题：

1.  在当前的 OpenCV-Python 中。我找不到任何命令，但是当我注释掉 Leftcam 时，Rightcam 可以工作。反之亦然。

2.  是的，我刚找到它！我重定向命令并仔细搜索。

    > libv4l2：打开流时出错：设备上没有剩余空间

3.  它们是相同的。OKER193。

4.  我只能使用它只有 1 个凸轮左或右。无法同时从其中两个获取视频源。

5.  我没有集线器。我不知道它是不是一个真正的端口，但我将它连接到我的笔记本的左右两侧。

    [http://opencv-users.1802565.n2.nabble.com/Multiple-Camera-Read-Error-td7001563.html](http://opencv-users.1802565.n2.nabble.com/Multiple-Camera-Read-Error-td7001563.html)

我试过 cv.ReleaseCapture()

```
def repeat():
        frameL = cv.QueryFrame(captureL)
        cv.ShowImage("wLeft", frameL)
        cv.ReleaseCapture(captureL)
        frameR = cv.QueryFrame(captureR)
        cv.ShowImage("wRight", frameR)
        cv.ReleaseCapture(captureR) 
```

我得到了错误：

```
...
VIDIOC_QUERYMENU: Invalid argument //Many lines
...
Traceback (most recent call last):
  File "55.py", line 19, in <module>
    repeat()
  File "55.py", line 13, in repeat
    cv.ReleaseCapture(captureL)
AttributeError: 'module' object has no attribute 'ReleaseCapture' 
```

我真的很想知道
[http://opencv.willowgarage.com/documentation/python/highgui_reading_and_writing_images_and_video.html?highlight=releasecapture](http://opencv.willowgarage.com/documentation/python/highgui_reading_and_writing_images_and_video.html?highlight=releasecapture)
CaptureFromCAM 最后一行说要释放结构，请使用 ReleaseCapture。此功能可能会被删除。

闲逛发现这个
[https://superuser.com/questions/431759/using-multiple-usb-webcams-in-linux](https://superuser.com/questions/431759/using-multiple-usb-webcams-in-linux "这个")

然后我检查每个摄像头的分辨率是否正常为 640x480。而我的网络摄像头是1.1/2.0 USB接口。

```
root@HPDebian:~# v4l2-ctl -d /dev/video0 --list-formats
ioctl: VIDIOC_ENUM_FMT
    Index       : 0
    Type        : Video Capture
    Pixel Format: 'YUYV'
    Name        : YUV 4:2:2 (YUYV) 
```

然后检查另一个凸轮

```
root@HPDebian:~# v4l2-ctl -d /dev/video1 --list-formats
ioctl: VIDIOC_ENUM_FMT
    Index       : 0
    Type        : Video Capture
    Pixel Format: 'YUYV'
    Name        : YUV 4:2:2 (YUYV) 
```

在这一点上，我不确定我的 USB 笔记本。它可能是内部的枢纽。我将尝试降低分辨率并再次发布我的结果。

## 更新 2

试试 Martin 的 time.sleep(1)：

```
VIDIOC_QUERYMENU: Invalid argument //Many lines
libv4l2: error setting pixformat: Device or resource busy
HIGHGUI ERROR: libv4l unable to ioctl S_FMT
libv4l2: error setting pixformat: Device or resource busy
libv4l1: error setting pixformat: Device or resource busy
HIGHGUI ERROR: libv4l unable to ioctl VIDIOCSPICT

libv4l2: error turning on stream: No space left on device
VIDIOC_STREAMON: No space left on device
VIDIOC_QBUF: Invalid argument  //Many lines until Ctrl C 
```

我将在 M$ xp 中再试一次。

## 更新 3

仍在使用Linux。M$ xp 很忙。这次我删除了 c1 和 c2。因为我不知道如何释放相机。我相信我使用的驱动程序 API 每次只允许 1 个设备访问内核。所以我试试这个。

```
def repeat1():
    c1 = cv.CreateCameraCapture(0)
    i1 = cv.QueryFrame(c1)
    cv.ShowImage("WebCAM1", i1)
    del(c1)
def repeat2():
    c2 = cv.CreateCameraCapture(1)
    i2 = cv.QueryFrame(c2)
    cv.ShowImage("WebCAM2", i2)    
    del(c2) 
```

程序运行非常缓慢，WebCAM1 失真，WebCAM2 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:13:29.473

需要检查的一些事项：

1.  OpenCV 是否会拿起你所有的相机？尝试[检查连接了多少个摄像头](https://stackoverflow.com/questions/7322939/how-to-count-cameras-in-opencv-2-3)。
2.  您是否收到任何错误其他错误消息？即你提到的那个有堆栈轨道吗？
3.  两款相机之间有硬件差异吗？
4.  如果你注释掉所有关于 lcam 的东西会发生什么？即它只是与第二台相机有关，还是与同时运行两个相机有关。
5.  [尝试按照此建议](http://forum.openframeworks.cc/index.php?PHPSESSID=m5l5gsjssc5pv0jimj4nbsvst2&/topic,8179.0.html)将它们插入单独的集线器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-28T08:43:02.010

这可能是一个普遍的多相机问题，我能够通过使用 gsteamer 管道解决它。使用 Ubuntu 18.04 上的内核 4.15.0-34-generic 和使用 gstreamer/v4l 支持编译的 OpenCV 3.4，我能够使用供电集线器在单个 USB 端口上流式传输 3x720p，并在 python 中使用带有 gstreamer 的 MJPG 压缩（使用 2xC922 和 1xC920 相机 -不需要 10fps 的帧率来工作）：

```
def open_cam_usb(dev, width, height):
    gst_str = (
        "v4l2src device=/dev/video{} ! "
        "image/jpeg,widh=(int){},height=(int){},framerate=10/1,"
        "format=(string)RGB ! "
        "jpegdec ! videoconvert ! appsink"
    ).format(dev, width, height)
    return cv2.VideoCapture(gst_str, cv2.CAP_GSTREAMER) 
```

# linux - 如何从 tcsh 中的 LD_LIBRARY_PATH 中删除路径？

> ID：11119203
> 
> 赞同：4
> 
> 时间：2012-06-20T12:08:01.533
> 
> 标签：linux, path, shared-libraries

在退出/卸载包时，我必须`LD_LIBRARY_PATH`通过从中删除某个路径来将其重置为以前的设置。如何在 tcsh 或 csh 中做到这一点？

*编辑1*澄清。

说`LD_LIBRARY_PATH`类似于`path1:mypath:path2:path3:path4`，我*不知道*（在我的脚本中）关于它的任何信息，除了它必须包含`mypath`, [begin edit2*存储在变量`$MY_PATH`*end edit2] 某处。然后我想删除`mypath`，这样操作后`LD_LIBRARY_PATH`就是`path1:path2:path3:path4`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:47:39.977

我是 bash 用户，但我很确定这会为您完成这项工作。它通常会留下一个`::`in `$LD_LIBRARY_PATH`，但这不会引起任何问题。

```
setenv LD_LIBRARY_PATH `echo $LD_LIBRARY_PATH | perl -pe "s[$DIR_TO_REMOVE][]g;"` 
```

对于可能遇到此问题的 bash 用户，请使用以下命令：

```
LD_LIBRARY_PATH=$(echo $LD_LIBRARY_PATH | perl -pe "s[$DIR_TO_REMOVE][]g;")
export LD_LIBRARY_PATH 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T22:23:22.037

我会将此作为*评论*添加到罗伯特的回答中，但我没有 50 名声望。然而。（提示：***你***可以帮助解决这个问题！;-)

我是 csh 用户（不是自愿），因此非常感谢罗伯特的回答。但是使用的正则表达式容易匹配部分路径元素，例如 if `LD_LIBRARY_PATH = path1:mypath:path2:path3:path4`, then ...

```
setenv LD_LIBRARY_PATH `echo $LD_LIBRARY_PATH | perl -pe "s[/ath][]g;"` 
```

...会产生`LD_LIBRARY_PATH = p1:my:p2:p3:p4`

基于 robert 的回答，我修改了正则表达式以确保仅匹配路径字符串中的完整元素，并进行多次替换以处理 DIR_TO_REMOVE 发生在路径开头、中间或结尾的情况。我还添加了一个替换来清理前导冒号（或路径只有“:”）和双冒号（“::”）。我无法弄清楚如何安全地删除尾随冒号，因为 csh 解析器在处理`$`作为 EOF 的元字符（或字符串结尾，在这种情况下）时很痛苦。（*见* [http://www.grymoire.com/Unix/CshTop10.txt](http://www.grymoire.com/Unix/CshTop10.txt "不使用 C shell 的十大理由")）

我已将此实现为接受命令行参数的 csh 别名，因为我想将它与 PATH、LD_LIBRARY_PATH 等一起使用。第一个参数是要修改的路径变量的名称。第二个参数是要替换的路径元素，第三个参数是新的路径元素（或“”以简单地删除与第二个参数匹配的路径元素）。

我知道沃尔特的问题是如何*删除*路径，但由于删除实际上只是用空值替换，这仍然回答了这个问题。为了我自己的使用，我安装了不同的工具链（例如，GCC 4.1.2、GCC 4.8.1、ICPC 2013）并且需要轻松地换入/换出路径到适当的二进制文件、库和包含给定的工具链，但对构建管理系统保持透明。

这是代码：

```
alias repath 'setenv \!:1 `echo $\!:1\: | perl -pe "s[^\!:2\:][\!:3\:]g; s[\:\!:2\:][\:\!:3\:]g; s[\:\:][\:]g; s[^\:][]g;"` ' 
```

在 csh 终端会话中安全地对其进行测试，如下所示：

```
setenv myTestPath /myLDpath
setenv myTestPath2 /myLDpath/x86_64
setenv myTestPath3 /myLDpathDebug

setenv testPATH /SOME/PATH:/SOME/OTHER/PATH:${myTestPath}:${myTestPath2}:${myTestPath3}
echo "        Starting with the following path-variable content ..."
printenv testPATH
echo "        Remove $myTestPath from the middle ..."
repath testPATH $myTestPath ""
printenv testPATH
echo "        Put $myTestPath at the beginning ..."
setenv testPATH ${myTestPath}:/SOME/PATH:/SOME/OTHER/PATH:${myTestPath2}:${myTestPath3}
printenv testPATH
echo "        and remove it from the beginning ..."
repath testPATH $myTestPath ""
printenv testPATH
echo "        Put $myTestPath at the end ..."
setenv testPATH /SOME/PATH:/SOME/OTHER/PATH:${myTestPath3}:${myTestPath2}:${myTestPath}
printenv testPATH
echo "        and remove it from the end ..."
repath testPATH $myTestPath ""
printenv testPATH
echo "        Replace $myTestPath3 with /myLDpath/Debug ..."
repath testPATH $myTestPath3 "/myLDpath/Debug"
printenv testPATH
echo "        Done!" 
```

# c# - SQL Server 错误：列名不明确

> ID：11119204
> 
> 赞同：2
> 
> 时间：2012-06-20T12:08:01.953
> 
> 标签：c#, asp.net, sql

我创建了一个接收不同参数的 SQL 查询。当我将参数传递给`Region-ID`我时出现错误：

> System.Data.SqlClient.SqlException：不明确的列名 'REGION_ID'

当我将数据传递给其他参数时，它的工作没有问题。

我为 sql 查询构建了一个字符串：

```
StringBuilder constrains = new StringBuilder();
AppendConstrain(constrains, "RAUMKLASSE_ID", RAUMKLASSE_ID);
AppendConstrain(constrains, "STADT_ID", STADT_ID);
AppendConstrain(constrains, "GEBAEUDE_ID", GEBAEUDE_ID);
AppendConstrain(constrains, "REGION_ID", REGION_ID);
AppendConstrain(constrains, "RAUMATTRIBUTE_ID", RAUMATTRIBUTE_ID);
AppendConstrain2(constrains, "r.REGION_ID", "reg.ID");
AppendConstrain2(constrains, "r.STADT_ID", "st.ID");
AppendConstrain2(constrains, "r.ETAGE_ID", "et.ID"); 
```

这是我的 SQL 查询：

```
StringBuilder query =
            new StringBuilder("SELECT DISTINCT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID,reg.NAME AS REGNAME, st.NAME AS STNAME, et.BEZEICHNUNG as ETBEZEICHNUNG FROM RAZUORDNUNG rz right join RAUMATTRIBUTE ra ON rz.RAUMATTRIBUTE_ID = ra.ID right join RAUM r ON rz.RAUM_ID = r.ID, REGION reg, STADT st, ETAGE et"); 
```

不知道问题出在哪里？

编辑：

这是附加字符串函数：

```
private static void AppendConstrain(StringBuilder query, string name, string value)
    {
        if (String.IsNullOrEmpty(value))
            return;

        if (query.Length > 0)
            query.Append(" AND ");

        query.AppendFormat("{0} IN ({1})", name, value);
    }

    private static void AppendConstrain2(StringBuilder query, string name, string name2)
    {
        if (String.IsNullOrEmpty(name2))
            return;

        if (query.Length > 0)
            query.Append(" AND ");

        query.AppendFormat("{0} = ({1})", name, name2);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:11:59.567

您对 REGION_ID 有两个不同的引用：

```
StringBuilder constrains = new StringBuilder();
AppendConstrain(constrains, "REGION_ID", REGION_ID);
AppendConstrain2(constrains, "r.REGION_ID", "reg.ID"); 
```

这些引用中只有一个是合格的 ( `r.REGION_ID`)。您需要完全符合这两个条件。看起来另一个应该被限定为 reg.REGION_ID，例如：

```
StringBuilder constrains = new StringBuilder();
AppendConstrain(constrains, "reg.REGION_ID", REGION_ID);
AppendConstrain2(constrains, "r.REGION_ID", "reg.ID"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:13:49.953

您似乎为`REGION_ID`.

用表格限定这一行：

```
AppendConstrain(constrains, "REGION_ID", REGION_ID); 
```

变成

```
AppendConstrain(constrains, "<table/alias>.REGION_ID", REGION_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:16:20.983

在您的代码中，我只能看到对 REGION_ID 的一个正确引用

```
AppendConstrain2(constrains, "r.REGION_ID", "reg.ID"); 
```

对于另一个即

```
 AppendConstrain(constrains, "REGION_ID", REGION_ID); 
```

您需要提供从哪个表中引用此 ID 的引用。

# iphone - 如何将元素添加到数组（这是plist中字典（项目）中的元素）？

> ID：11119209
> 
> 赞同：5
> 
> 时间：2012-06-20T12:08:19.953
> 
> 标签：iphone

在plist中，我想在每个字典（项目）中保留一个数组。如果它被创建，我如何将元素发送到该数组。例如，如果我为用户创建了一个帐户，我将保留姓名，性别，电子邮件，密码字典（项目）中的所有内容，以类似的方式包含收件箱消息的数组。然后我想知道如何将收到的消息存储到该收件箱数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:29:50.277

对于个人使用，我构建了一些类以便从 NSUserDefaults 中轻松保存/读取 - 但可以相当容易地适应读取/写入任何 plist 文件。[在此处](http://d.pr/f/DCf6)下载课程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:21:37.543

NSArray *array=[NSArray arrayWithObjects:<#(id), ...#>, nil];

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *libraryDirectory = [paths objectAtIndex:0];
NSString *location = [libraryDirectory stringByAppendingString:@"/somefilename.plist"];
[array writeToFile:location atomically:YES]; 
```

数组可以按如下方式加载：
path = [bundle pathForResource:@"file" ofType:@"plist"]; array = (path != nil ? [NSArray arrayWithContentsOfFile:location] : nil);

# python - 在电子邮件正文中呈现 HTML

> ID：11119211
> 
> 赞同：2
> 
> 时间：2012-06-20T12:08:20.470
> 
> 标签：python, django

我想邮寄一个包含一些数据的简单 HTML 文件。我希望用户接收呈现的 HTML。我试过这个解决方案：

```
b = render_to_string('mail_body.html',{'name':request.POST['name']})
send_mail(email_subject,b,'sender@gmail.com', ['receiver@gmail.com'],
    fail_silently=False) 
```

但我没有在邮件正文中呈现 HTML，用户可以看到所有 HTML 标签！

或者，当我使用以下代码时，我只是在邮件正文中获取我的 HTML 文件的路径：

```
params = {}
params['name'] = request.POST['name']
context = Context(params)
t = Template('mail_body.html')
send_mail(email_subject,t.render(context), 'sender@gmail.com',
    ['receiver@gmail.com'], fail_silently=False) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:22:34.290

你可以尝试这样的事情：

```
from django.core.mail import EmailMultiAlternatives
body = render_to_string(template_name, locals(),
                      context_instance=RequestContext(request))
email = EmailMultiAlternatives(subject, body, mail_sender, [contact_request.email], headers={'Reply-To': 'do_not_reply@whatever.com'})
email.content_subtype='html'
email.send(fail_silently=False) 
```

希望这会导致正确的方向。请注意，这里有很多变量来自我自己的编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:15:57.117

问题是您需要告诉用户邮件客户端您正在向他们发送 HTML 电子邮件，否则它只会将 HTML 显示为文本。

[该设置称为 MIME 类型，您可以在python 用户指南](http://docs.python.org/library/email-examples.html#id4)中阅读更多关于如何设置（并在 python 中发送 HTML 电子邮件）的信息。

# forms - 从 extjs 表单中的空白文本字段中删除焦点

> ID：11119213
> 
> 赞同：0
> 
> 时间：2012-06-20T12:08:34.827
> 
> 标签：forms, extjs

如何从 extjs 表单中的空白文本字段中删除焦点（文本字段周围的红色边框）。默认情况下，它会专注于文本字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:03:14.243

如果您的意思是重置文本字段（删除文本并清除任何验证消息等），您可以使用 reset 方法。

如果您的文本字段 id 是 myTextField 那么您应该使用：

```
Ext.getCmp('myTextField').reset(); 
```

希望这可以帮助。

# c# - 如何通过更改项目来操作组合框？

> ID：11119215
> 
> 赞同：1
> 
> 时间：2012-06-20T12:08:35.717
> 
> 标签：c#, winforms

**可能重复：** [当第一个组合框获得某个值时自动更新组合框](https://stackoverflow.com/questions/3528842/update-a-combo-box-automatically-when-first-combo-box-gets-some-value)

我的表单中有四个组合框。

*   comboBox1 有四个值，例如 1.Bangla 2.Hindi 3.English 4.urdhu。
*   comboBox2 的值取决于 comboBox1：
    *   如果我从 comboBox1 中选择 Bangla，则 comboBox2 显示其值，例如 1-Maya 2-Mon mojaya。
    *   如果我从 comboBox1 中选择印地语，则 comboBox2 显示其值，例如 1-Monni 2-Chamali。
    *   如果我从 comboBox2 中选择 Maya，comboBox3 会显示其值，例如 1-Habib 2-Ashif。
    *   如果我从 comboBox2 中选择 Monni，则 comboBox3 显示其值，例如 1-Sunidhi 2-Anu。

等等。

如何通过点击事件动态管理它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:10:43.473

您可以使用 SelectedIndexChanged 事件，并将选择的索引传递给您的函数以填充第二个框，依此类推。

# ios - IOS：App-Language 独立于设备，无需更改 NSUserDefaults

> ID：11119221
> 
> 赞同：2
> 
> 时间：2012-06-20T12:09:22.560
> 
> 标签：ios, localization, nslocale

我使用以下语句更改应用程序语言（独立于系统语言）：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"de", @"en", nil] forKey:@"AppleLanguages"]; 
```

在不同的情况下，我想获得系统语言。当我使用

```
[[NSLocale preferredLanguages] objectAtIndex:0] 
```

结果*总是*“de”。即使重新启动应用程序并首先执行第二条语句。这对我来说非常有意义，因为这是我刚刚使用上面的代码行配置的。但是，我想获得在系统范围内配置的实际系统语言。

理由：应用程序应具有三种语言设置：英语、德语、系统语言。用户应该能够以英语运行应用程序，而系统的其余部分以德语运行，或者只使用标准系统语言设置。

我真的很感谢这里的一些帮助:) 最好的问候，乔纳森

* * *

我终于找到了一个简单而强大的解决方案。最初的问题是

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"de", @"en", nil] forKey:@"AppleLanguages"]; 
```

返回我之前配置的值。但这不是我想要的。我想要“全局”配置的语言（独立于应用程序/在菜单等中使用）。NSUserDefaults 似乎无法实现这一点。然而，CFPreferences 可以解决问题：

```
CFPropertyListRef propertyList = CFPreferencesCopyValue(CFSTR("AppleLanguages"),
    kCFPreferencesAnyApplication, kCFPreferencesCurrentUser, kCFPreferencesCurrentHost);
NSArray *appleLanguages = (__bridge_transfer NSArray*)propertyList; 
```

appleLanguages 现在包含最初为用户定义的语言列表。而 appleLanguages[0] 正是我想要的 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:38:52.130

您在这里将`de`语言设置为 index:0 处的对象：`[NSArrray arrayWithObjects: @"de", @"en", nil]`。当您在这里检查首选语言时，您只检查第一种语言是什么（索引 0 处的语言），但其他索引处也有语言（您将“en”设置为索引 1）`[[NSLocale preferredLanguages]objectAtIndex:0];`：。假设您想将首选语言存储在数组中；你可以这样做：

```
NSArray *arrayOfLanguages = [NSArray arrayWithArray:[NSUserDefaults arrayForKey:@"AppleLanguages"]]; 
```

希望这可以帮助！

# ruby-on-rails - 如何使用 YARD 记录 Rails 的 url_helpers 的使用？

> ID：11119223
> 
> 赞同：3
> 
> 时间：2012-06-20T12:09:30.333
> 
> 标签：ruby-on-rails, ruby, documentation, yard

当尝试为使用 Rails 实现的服务生成 YARD 文档时，我收到以下警告：

```
$ yardoc
[warn]: in YARD::Handlers::Ruby::MixinHandler: Undocumentable mixin: 
          YARD::Parser::UndocumentableError for class MyClass
[warn]:     in file 'app/models/my_class.rb':7:
  7: include Rails.application.routes.url_helpers 
```

我的理解是 YARD 无法确定 mixin 的类型，因为它仅在运行时可用。

那么在这里做什么是正确的呢？是否可以正确记录mixin？如果没有，我该如何摆脱警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:41:05.717

[Yard Undocumentable Error docs](http://rubydoc.info/docs/yard/YARD/Parser/UndocumentableError)该描述可能会回答您的问题。据我所知，要消除警告，可以`yardoc`选择以安静模式运行：

```
yardoc -q /path/to/source/file 
```

# objective-c - Bash 脚本 reg-exp 和 Objective-c

> ID：11119224
> 
> 赞同：-1
> 
> 时间：2012-06-20T12:09:31.483
> 
> 标签：objective-c, regex, bash

我是脚本语言的新手，我想为你们提供帮助

我想创建一个名为 constant.h 的文件并在特定目录中搜​​索所有文件 *.m 以查找 reg-exp `@"LBL_[[0-9]]+"`ex：@“LBL_75847”，如果没有写入，则将这些匹配项写入 constant.h（无重复进入文件常量）像这样

```
NSString *const C_LBL_[[0-9]] = thematch; // exp NSString *const C_LBL_78787 = @"LBL_78787"; 
```

此外，此脚本还应将所有匹配的 @"LBL_[[0-9]]+" 替换为 *.m 文件，其常量 var 为 C_LBL_[[0-9]]+

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:28:22.150

我找到了解决方案

```
$ cat ocstr.awk

# If the code contains @"LBL_....", replace it with C_LBL_... and
# remember the labels for later.
match($0, /@"LBL_[0-9]*\"/) {
        S=$0; P=""

        do        # Loop until there's nothing left in the right half
        {
                A[L=substr(S, RSTART+2, RLENGTH-3)]++; # Remember label
                P=P substr(S, 1, RSTART-1) "C_" L;
                S=substr(S, RSTART+RLENGTH);
        }
        while(match(S, /@"LBL_[0-9]*\"/)); # Keep hunting for more labels

        $0=P S; # Update the line to be printed
}

# If we are given file.pm, print into file.m
{       O=FILENAME;
        sub(/[.]pm$/, ".m", O);
        print > O;      }

END {
        for(L in A) printf("NSString *const C_%s = @\"%s\";\n", L, L);
}

$ awk -f ocstr.awk dir/*.pm > list

$ cat list

NSString *const C_LBL_10011 = @"LBL_10011";
NSString *const C_LBL_10012 = @"LBL_10012";
NSString *const C_LBL_10804 = @"LBL_10804";
NSString *const C_LBL_10000 = @"LBL_10000";

$ cat dir/*.m

tableviewlogin.backgroundView = nil;
    [welcometitle setFont:[UIFont fontWithName:FONTB size:FONTSIZETITLE]];
    [welcometitle setText:[MSharedFunctions UF8ErrorMessageForCode:C_LBL_10000]];
    [welcometitle setTextAlignment:UITextAlignmentCenter];
    NSString *buttontitle = [MSharedFunctions UF8ErrorMessageForCode:C_LBL_10012];
    [forgotpassword setTitle:buttontitle forState:UIControlStateNormal];
    [forgotpassword setTitle:buttontitle forState:UIControlStateHighlighted];
    [self.navigationItem setTitle:[MSharedFunctions UF8ErrorMessageForCode:C_LBL_10011]];
    [[self tabBarItem] setTitle:[MSharedFunctions UF8ErrorMessageForCode:C_LBL_10804]];

$ 
```

# java - 可以将 AWT 与 JavaFx 一起使用吗？

> ID：11119227
> 
> 赞同：5
> 
> 时间：2012-06-20T12:09:35.850
> 
> 标签：java, awt, javafx-2

我需要一些目前在 JavaFX 中找不到的功能。像机器人或托盘图标。

我知道这些工具确实适用于 JavaFx 应用程序。但是可以使用它们吗？有什么我应该注意的考虑因素吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:55:08.930

一般不建议。

注意：

*   使用 JavaFX 中的任何 AWT 将启动整个 AWT 堆栈，这会增加内存/进程消耗。
*   Glass（FX UI 堆栈）和 AWT 之间可能存在线程冲突，尤其是在 Mac 上。因此，可能值得为您的应用程序使用 Swing 互操作性方法，因为`JFXPanel`它知道如何处理这些冲突。
*   您可以使用 Glass 机器人而不是 AWT 机器人（尽管它不是公共 API，将来可能会更改）：

    ```
    Robot robot = com.sun.glass.ui.Application.GetApplication().createRobot();
    robot.mouseMove(10, 30);
    robot.mousePress(1); 
    ```

# sencha-touch - Sencha 按钮在 index.html 中不起作用

> ID：11119231
> 
> 赞同：0
> 
> 时间：2012-06-20T12:09:39.930
> 
> 标签：sencha-touch, sencha-touch-2

情况如下：

当用户打开我的应用程序时，他必须登录并且它正在工作。当他将应用程序置于后台模式时，我想在他回来时再次显示我的身份验证视图。因此，在我的 index.html 中，我在标题中做了以下部分：

```
<script type="text/javascript" charset="utf-8">
function onActive() {

   setTimeout(function() {
        Ext.getCmp('mainView').destroy();
        Ext.Viewport.add(Ext.create('MyApp.view.Authentication'));
        }, 0);
}
</script> 
```

我的身份验证视图正在显示，但如果我按下验证按钮，什么也不会发生（而它在第一次启动时有效）。这是我的按钮：

```
{
xtype: 'button',
text: 'Valider:',
width: '150px',
//margin: 2,
cls:'AuthFieldset',
name: 'authent_validateButtonName',
id: 'authent_validateButton'
} 
```

这是我的控制器：

```
config: {
    refs: {
        btnValidate: '#authent_validateButton',
    },
    control: {
        btnValidate : {
            tap : 'doAuthentication'
        }
    },
},

doAuthentication : function(){
    alert('you\'ve been authenticated'); //the alert does not appear the second time
} 
```

我真的不明白！也许我的按钮无法从我的 index.html 中知道 doAuthentication ？好像我的视图不再绑定到我的控制器...感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:11:45.237

我没有您的问题的答案，但我知道所有应用程序代码都应该包含在 app.js 或任何链接的 .js 文件中（需要：[{}]），并且在 index.html 文件中没有。应用程序没有引用 index.html 文件中的外部代码。

# powershell - 多行的 PowerShell 命令

> ID：11119240
> 
> 赞同：12
> 
> 时间：2012-06-20T12:09:58.303
> 
> 标签：powershell, batch-file

我有一个看起来像这样的批处理脚本：

### 测试.bat

```
@echo off

:: Starts a PowerShell session that starts a PowerShell process with administrator privileges
powershell -noprofile -command "&{$process = start-process powershell -ArgumentList '-noprofile -noexit -file GetTools.ps1' -verb RunAs -PassThru;$process.WaitForExit();}" 
```

为了便于阅读，我想将“&{ ... }”中的代码分成多行。

[这篇](https://stackoverflow.com/questions/2608144/how-to-split-long-commands-over-multiple-lines-in-powershell)文章说使用尾随反引号应该可以解决问题，但是当我写时：

```
powershell -noprofile -command "&{`
    $process = start-process powershell -ArgumentList '-noprofile -noexit -file GetTools.ps1' -verb RunAs -PassThru;`
    $process.WaitForExit();`
}" 
```

...也就是说，我以尾随反引号结束每一行，然后我收到以下错误：

```
Incomplete string token.
At line:1 char:4
+ &{` <<<<
    + CategoryInfo          : ParserError: (`:String) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : IncompleteString

'$process' is not recognized as an internal or external command,
operable program or batch file.
'$process.WaitForExit' is not recognized as an internal or external command,
operable program or batch file.
'}"' is not recognized as an internal or external command,
operable program or batch file. 
```

我究竟做错了什么？

**解决方案：**

```
powershell -noprofile -command "&{"^
    "$process = start-process powershell -ArgumentList '-noprofile -noexit -file C:\Dev\Powershell\Sandbox.ps1' -verb RunAs -PassThru;"^
    "$process.WaitForExit();"^
    "}" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T12:17:41.383

您可以尝试使用插入符号`^`来指示当前行在下一行继续：

```
powershell -noprofile -command "&{"^
 "$process = start-process powershell -ArgumentList '-noprofile -noexit -file GetTools.ps1' -verb RunAs -PassThru;"^
 "$process.WaitForExit();"^
 "}" 
```

请注意前导空格以及`"`每行的结束和开始。

另请参阅*[在 Windows Vista 批处理 (.bat) 文件中拆分为多行的长命令](https://stackoverflow.com/questions/69068/long-commands-split-over-multiple-lines-in-vista-dos-batch-bat-file)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:30:47.410

试试下面的。我认为这会有所帮助。

```
powershell -noprofile -command ""&{^
    $process = start-process powershell -ArgumentList '-noprofile -noexit -file GetTools.ps1' -verb
    RunAs -PassThru;^
    $process.WaitForExit();^
}"" 
```

# java - 模型更改时自动更新 jtable 列

> ID：11119247
> 
> 赞同：2
> 
> 时间：2012-06-20T12:10:17.523
> 
> 标签：java, swing, jtable, abstracttablemodel

我有一个实现 TableModel 接口的类。当我在我的 jTable 上调用 setModel 并将我的类设置为模型然后调用`jTable.updateUI();`一切都很好。但在某些情况下，我想用不同的结构改变模型。显示数据仍然可以正常工作，但我的列没有更新。有没有办法强制我的表也刷新新模型的列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T12:12:40.780

如果数据和结构都发生了变化，模型需要触发相应的事件，例如：fireTableStructureChanged。

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#fire](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#fire)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:16:14.357

*   `jTable.updateUI();`是 Look and Feel 相关的方法，不要使用那个

> 我有一个实现 TableModel 接口的类。

*   [您必须](https://stackoverflow.com/a/6901508/714968)为来自的方法覆盖正确的通知器`TableModel`

*   使用`DefaultTableModel`，API中实现了所有通知器，

*   所有更新必须在`EventDispatchThread`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T08:42:13.910

如果你像我一样只是写一个小技巧，你可以考虑使用 .repaint() 方法，而不是 .updateUI() 方法。

我使用它是因为我不使用 TableModel，但我只是在 Object[][] 中有数据，就像在 sun (well oracle) 教程的第一个示例中一样

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-22T19:08:00.757

试试这个（在 setModel(myTableModel); 行之后插入）：

```
myJTable.createDefaultColumnsFromModel(); 
```

就我而言，它解决了更新问题，而：.repaint()、.invalidate()、.fireTableDataChanged() 没有帮助。

# c# - 高效的复杂 NHibernate Criteria 查询

> ID：11119248
> 
> 赞同：0
> 
> 时间：2012-06-20T12:10:18.737
> 
> 标签：c#, hibernate, nhibernate, hibernate-criteria, nhibernate-criteria

我有一个`APVendor`类，它有一个类的集合`APInvoice`和一个独特的`Name`; 每个`APInvoice`都有一个`APPayment`类的集合。每个`APPayment`对象只引用一个`BankAccount`类、a `ClearedDate`、an`Amount`和一个`CheckNumber`属性。

使用具有支票记录的银行对帐单，假设我的*Bank of Foo*支票账户，支票**1111**，金额为**$1000.00**，我想查看我的持久层中是否存在付款，并标记`APPayment`对象的`ClearedDate`属性。

`BankAccount`我可以通过查询供应商，然后查询供应商的发票，然后查找针对`Criteria`.

有人可以帮我看看应该怎么看吗？以下是我将如何在 SQL 中编写查询以获取我需要使用的对象图：

```
select p.*, i.*, v.*
from appayments p
join bankaccounts a on p.bankaccountid = a.bankaccountid
join apinvoices i on i.invoiceid = p.invoiceid
join apvendors v on v.vendorid = i.vendorid
where a.bankaccountid = ????
and p.checknumber = ???? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:35:56.563

HQL 查询与 SQL 查询非常相似：

```
select payment from APPayment payment
inner join payment.BankAccount bankAccount
left join fetch payment.Invoice invoice
left join fetch invoice.Vendor vendor
where bankAccount.id = :accountId
and payment.checkNumber = :checkNumber 
```

Criteria 查询留作练习，但我没有看到使用 Criteria 进行此类静态查询的要点。

# javascript - Android 浏览器无法正确响应触摸事件

> ID：11119254
> 
> 赞同：3
> 
> 时间：2012-06-20T12:10:28.080
> 
> 标签：javascript, android, touch

我正在尝试在 HTML/CSS 和 Javascript 中为移动设备实现滑动手势。

这是非常基本的，我正在向文档添加事件侦听器并尝试记录操作。我还试图阻止事件的默认行为，因此触摸移动不会将窗口拖到整个地方。

它在 iOS 中运行良好，但在我拥有的两个 android 设备中的任何一个上都不能......

*   银河 S II
*   银河 Tab+ 7

运行安卓 3.2

[我在这里用一个简单的例子](http://jsfiddle.net/nfahJ/)创建了一个 JSFiddle

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:17:10.417

尝试`'ontouchstart' in window`代替`typeof Touch == "object"`您的触摸支持检测。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:17:44.420

Android 没有实现“Touch”。只需更改您的 touchSupport 检测。(

你只需要验证`var touchSupport = ('ontouchstart' in window)`

# jquery - Web 方法未在 safari 中执行（$.ajax 回调）

> ID：11119259
> 
> 赞同：0
> 
> 时间：2012-06-20T12:10:42.120
> 
> 标签：jquery, asp.net, ajax, webmethod

我有以下代码。

ASPX 页面

```
<a href="AnyASPXPageOfWebsite.aspx" onclick="javascript:CallJQuery();" > Set Price </a> 
```

JS代码

```
function CallJQuery() {

            var prc = document.getElementById('<%= hdnPrice.ClientID %>');
            var strPrc = prc.value;

            $.ajax({
                type: "POST",
                url: "/Services/TestService.asmx/SetPrice",
                data: {Price : "'"+ strPrc + "'"},
                dataType: "json",

                error: function(xml, status) {
                    alert('Error is ' + status);
                },
                success: function(xml, status) {
                    alert('suceess' + status );
                }

            });
} 
```

TestService.asmx 中的 Web 方法

```
 [WebMethod(EnableSession = true)]
    public string SetPrice(string Price)
    {
        HttpContext.Current.Session["ProdPrice"] = Price;
        return "success";
    } 
```

我的代码适用于除 SAFARI 之外的所有浏览器，我在 SetPrice() 方法处设置断点，但在 safari 的情况下不执行。还执行成功功能并显示警报消息

safari 没有执行该方法的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:28:50.293

可能正在使用服务器控制并从代码隐藏调用 CallJQuery() 可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:21:49.103

我搜索了很多解决方案，应用了许多代码但没有任何效果我得出结论，在 safari 中无法进行以下操作。如果在 asp.net c# 页面中，如果您的标签的 href 属性设置为“任何 aspx 或 html 页面”并且标签具有“onclick”事件，该事件执行一些 JS 函数，然后使用 JQuery 回调执行“Web 方法”。这种情况不起作用，并且在这种情况下不会执行 webmethod，因为 safari 浏览器执行 JS 函数然后导航到页面（在 href 属性中设置），但没有调用 webmethod。

这都是根据我的研究。

# java - Android模态对话框堆叠

> ID：11119261
> 
> 赞同：1
> 
> 时间：2012-06-20T12:10:44.180
> 
> 标签：java, android, xml, user-interface

我的目标是在用户导航回我的应用程序时显示模式对话框。此模式对话框要求他们提供他们定义的 6 位 PIN。我是 Java GUI 和 Android 开发的新手，所以我的问题是.....

我发现如果用户选择在显示输入对话框时最小化应用程序，如果他们返回到应用程序，则对话框会相互堆叠。让他们在输入 PIN 期间最小化并返回应用程序的次数尽可能多地输入他们的 PIN。

```
/**
 * On restart called when the app is being restarted on the screen
 */
@Override
public void onRestart() {
    super.onRestart();

    // must prompt with modal dialog for pin

    final Dialog dialog = new Dialog(this);

    dialog.setCancelable(false);

    // check pin
    dialog.setCanceledOnTouchOutside(false);
    // set view to enterpin XML screen
    dialog.setContentView(R.layout.enterpin);

    // show dialog
    if (!dialog.isShowing()) {
        dialog.show();
    }
    // listen for button being clicked
    Button button = (Button) dialog.findViewById(R.id.pinlogin);
    button.setOnClickListener(new OnClickListener() {// anonymous inner
        // class
        // implementation
        @Override
        public void onClick(View v) {
            EditText editText = (EditText) dialog
                    .findViewById(R.id.enterpintext);
            try {
                int enteredPin = Integer.parseInt(editText.getText()
                        .toString());
                SharedPreferences sharedP = Prefs.get(WebViewActivity.this);
                int temp = sharedP.getInt("pin", 0);
                if (enteredPin == temp) {
                    pinCheck = true;

                    dialog.dismiss();
                } else {
                    pinCheck = false;
                    dialog.setTitle("Incorrect Pin");
                }
            } catch (NumberFormatException e) {
                Dialog dialog2 = new Dialog(WebViewActivity.this);
                dialog2.setTitle("Enter Numbers Only");
                dialog2.setCanceledOnTouchOutside(true);
                dialog2.show();
            }
        }
    });

} 
```

有没有什么地方可以移动我的对话框初始化而不会觉得这是不好的编程习惯？我理解为什么我尝试的 dialog.isShowing() 方法不起作用，因为我的 Dialog 实例仅在该方法的生命周期内存在。

我还注意到，如果您将手机从垂直方向转到水平方向 90 度，反之，我的对话框就会消失。有人可以指出发生这种强制重绘时调用的方法链，以便我可以重绘对话框吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:43:50.727

我相信您正在寻找`onResume();`+`onPause();`而不是`onRestart();`创建对话框。您应该使用`onRestart();`为要显示的 PIN 对话框设置一个标志，但不用于创建对话框。

我建议您将其移至`onCreate();`方法，使其成为您正在处理的活动的属性，然后简单地在`onResume();`方法中显示它（因为每次活动活动时都会调用它，即使是第一次）。

此外，当方向改变时，您需要列出您想要监听的方向改变事件（通过`android:configChanges="orientation"`在活动清单中），并且该`onConfigurationChanged();`方法将在活动活动上调用相应的数据。然后，您可以将对话框重绘到新的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:34:56.047

我通过将对话框存储在活动的属性中来解决相同的问题（引脚输入或其他），每当我显示对话框时，我都会使用以下内容：

```
protected android.app.Dialog onCreateDialog(int id) {
        if (this.currentDialog != null) {
            this.currentDialog.dismiss();
        }

        this.currentDialog = null;

        switch (id) {
            case DIALOG_SPINNER:
                ProgressDialog progressDialog = new ProgressDialog(this);
                progressDialog.setMessage(getString(R.string.dialog_Spinner_UpdatingAccount));
                progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

                this.currentDialog = progressDialog;
                break;
        }

        return this.currentDialog;

    } 
```

当活动离开堆栈顶部（导航或退出）时，我也会处理当前对话框。

```
@Override
    public void onPause() {
        if (this.currentDialog != null) {
            this.currentDialog.dismiss();
        }

        super.onPause();
    } 
```

onPause 方法允许您在暂停活动时关闭任何已经打开的对话框，这样您现有的 onRestart 代码只会显示一个新对话框。

# java - 如何从 JSNI 调用 Dll 方法以在 GWT Web 应用程序中使用？

> ID：11119266
> 
> 赞同：3
> 
> 时间：2012-06-20T12:10:54.147
> 
> 标签：java, visual-c++, gwt, dll, jsni

我有一个 GWT Web 应用程序。

它从另一个类调用方法（使用 JSNI 方法）。

但是我想从那个类中调用一个 dll 方法......我该怎么做？

```
public class external_class {
public native void shows()/*-{window.alert("hello");}-*/;
} 
```

在 GWT Web 应用程序调用中

```
external_class obj = new external_class();
            obj.shows(); 
```

如果我在 dll 文件中定义了 show() 方法，如何调用它？或者我如何通过 JSNI 直接从 GWT 应用程序调用 dll 方法？

请给我一个解决方案....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:45:11.033

You can not call a DLLs in GWT. GWT compiles Java code to Javascript code which runs inside a webbrowser. Javascript can not call DLLs directly, if you want to do something with a DLL I suggest you take a look into browser plugins.

In browser plugins you can include your dll (only windows) and have your javascript call that plugin.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:02:30.570

对我来说，您似乎需要使用 Applet 和 jnlp 来加载本机库。从那里您可以使用 JSObject 或 GWT-AI 之类的库在 GWT 和小程序之间进行通信（我个人只是手动编写代码，我只使用过几次 GWT-AI）。我相信对于小程序方面，您可以使用 JNA 进行绑定。

如果这没有意义，或者听起来有点像胡言乱语，您可能需要寻求帮助，在 java 和本机库之间引入很多可能会出错，您可能需要更专业的帮助才能在这方面取得实际进展，这很棘手.

# symfony - Symfony2 捆绑混淆

> ID：11119268
> 
> 赞同：1
> 
> 时间：2012-06-20T12:11:17.427
> 
> 标签：symfony

我正在按照有关[创建示例应用程序](http://tutorial.symblog.co.uk/docs/configuration-and-templating.html)的说明进行操作。我正在尝试快速掌握如何创建一些（目前）静态页面 - 没有用户身份验证，没有 ORM 等，只是为了让一些东西启动并运行。

我创建了两个捆绑包：

```
$ php app/console generate:bundle --namespace=app1/FooBundle --format=yml
$ php app/console generate:bundle --namespace=app2/FooBarBundle --format=yml 
```

根据文档（以及 Symfony 1.x 如何工作的知识），我希望能够使用以下方式访问这两个“应用程序”：

```
http://sf2.examples.localhost/app_dev.php/app1/hello/angrycoder
http://sf2.examples.localhost/app_dev.php/app2/hello/angrycoder 
```

但是，在这两种情况下，我都收到了 404 错误。

回到文档后，我读到要使用的正确 URL 是；

```
http://sf2.examples.localhost/app_dev.php/hello/angrycoder 
```

**就显示带有angrycoder**的页面而言，这似乎是“有效的” 。

但是 - 我不知道实际调用了哪个应用程序 - 因为我还没有弄清楚如何显示调试工具栏。

因此，我的问题是：

1.  如何访问给定捆绑包中的特定页面（静态或其他）？

**[[编辑]]**

```
This is what my app/config/routing.yml file looks like:

app1CoreBundle:
    resource: "@app1CoreBundle/Resources/config/routing.yml"
    prefix:   /

app2CoreBundle:
    resource: "@app2CoreBundle/Resources/config/routing.yml"
    prefix:   /

# Internal routing configuration to handle ESI
#_internal:
#   resource: "@FrameworkBundle/Resources/config/routing/internal.xml"
#   prefix:   /_internal 
```

可以看出，两者都有一个前缀'/'。所以当我输入：

```
http://sf2.examples.localhost/app_dev.php/hello/angrycoder 
```

实际调用了哪个应用程序（为什么？）。

据我了解，能够调用特定应用程序的唯一（显而易见的方式）是为不同的应用程序使用不同的前缀 - 还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:18:08.653

您必须使用路由系统来满足这种需求。
因此，如果您进入，`app/config/routing`或者更详细地进入，`src/app1/FooBundle/Resources/config/routing.yml`您可以更改显示的页面

详细地

```
// app/config/routing.yml
AcmeHelloBundle
resource: "@AcmeHelloBundle/Resources/config/routing.yml"
prefix:   /
//end

// src/Acme/AcmeHelloBundle/Resources/config/routing.yml
AcmeHelloBundle_homepage:
pattern:  /hello/{name}
defaults: { _controller: AcmeHelloBundle:Default:index }
//end 
```

这样，我告诉 symfony 找到 che 路由系统和规则，`AcmeHelloBundle`进入文件`AcmeHelloBundle/Resources/config/routing.yml`
之后，进入`AcmeHelloBundle/Resources/config/routing.yml`我说每个带有 url 之类的路径都`/hello{placeHolder}`将传递到`Default`控制器并渲染`index`。

希望很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:38:58.063

当您使用 Symfony 2 时，忘记您对 Symfony 1.x 的了解。除了名称和整体 MVC 方法之外，它们是*非常*不同的框架。

Symfony 2 没有 Symfony 1 那样的“应用程序”。您可以将自己的 Bundles 视为 symfony 1 应用程序，但不要误会：没有直接的类似物。Bundles 比应用程序更通用、更灵活（这是一件好事）

正如您所发现的，对包的控制器的访问完全由路由系统控制。

# objective-c - UITextView 更新阻塞

> ID：11119269
> 
> 赞同：0
> 
> 时间：2012-06-20T12:11:23.043
> 
> 标签：objective-c, ios, multithreading, uitextview

我有一个简单的目录应用程序，可让用户从管理网站下载产品数据。

以下代码在用户按下按钮开始下载时触发

```
- (IBAction)downloadProducts:(id)sender {
    outputText.text = @"Downloading data, please wait...";
    [Product loadData:outputText];
    outputText.text = @"Ok, download complete.";
} 
```

outputText 是一个 UITextView，它应该让用户知道发生了什么。

Product 类中有一个静态方法来处理下载。这一切正常，唯一的问题是 uitextview 的输出会阻塞，直到下载完成。

IE。在 [Product loadData: outputText] 之后才显示“正在下载数据，请稍候...”消息；完成并立即被下载完成消息覆盖...

非常感谢任何帮助，

谢谢

吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:22:46.820

是的，在您的下载请求期间更新 UI 将被阻止。在调用 [Product loadData:outputText] 之前，您可能需要等待，这可以使用

```
[self performSelector:@selector(someMethod:) withObject:nil afterDelay:1.0]; 
```

并放

```
[Product loadData:outputText];
outputText.text = @"Ok, download complete."; 
```

在那个方法中。

或者为了获得最佳实践，请在不同的线程上或使用块开始下载。这允许您在下载期间不断更新 UI（请注意，更新 UI 只能在主线程/队列中完成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:25:37.643

由于您正在加载以响应用户操作，因此可能会在[主线程](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)上调用此方法。刷新屏幕只能在主线程上进行。因此，当主线程忙于加载您的数据时，它也不能绘制文本视图。

对此的一种解决方案是启动一个后台线程来进行加载。

# git - 如何将 GitHub 问题和 wiki 导入 BitBucket？

> ID：11119270
> 
> 赞同：28
> 
> 时间：2012-06-20T12:11:24.290
> 
> 标签：git, github, repository, project-management, bitbucket

最近，我们决定将我们的项目从 GitHub 迁移到 BitBucket。目前，我测试了几个项目，因为 BitBucket 具有直接导入功能。一切都很好，除了 GitHub 问题，并且没有导入 wiki。由于大多数项目仍处于开发阶段，而一些项目处于生产阶段，因此问题和 wiki 对我们来说很重要。

我做了快速的谷歌搜索，找不到合适的解决方案。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T23:23:04.453

今天我们添加了正确的问题导入和导出到 Bitbucket。您可以将整个 repo 的问题跟踪器导出为 zip，然后在不同的 repo 上重新导入。

您还可以创建自己的 zip，这样您就可以编写与其他问题跟踪器（例如 GitHub）之间的迁移脚本。

详情：[https ://confluence.atlassian.com/display/BITBUCKET/Export+or+Import+Issue+Data](https://confluence.atlassian.com/display/BITBUCKET/Export+or+Import+Issue+Data)

文件格式和数据布局：[https ://confluence.atlassian.com/pages/viewpage.action?pageId=330796872](https://confluence.atlassian.com/pages/viewpage.action?pageId=330796872)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-13T15:34:50.920

我也在寻找一种将 Github 问题导入 Bitbucket 的方法，但没有找到，所以我编写了一个脚本来做到这一点：[https](https://github.com/sorich87/github-to-bitbucket-issues-migration) ://github.com/sorich87/github-to-bitbucket-issues-migration 。

对于 wiki，它是一个 Git 存储库，您可以简单地克隆它。[https://github.com/blog/699-making-github-more-open-git-backed-wikis](https://github.com/blog/699-making-github-more-open-git-backed-wikis)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-20T13:58:08.457

github 和 bitbucket 都有问题的 REST API（[GitHub 的](http://develop.github.com/p/issues.html)、[Bitbucket 的](https://confluence.atlassian.com/display/BITBUCKET/Issues)），因此您可以编写一个（相当）快速的脚本来迁移问题。但是，GitHub 没有用于 wikis 的 API（Bitbucket 有），因此很遗憾，您可能必须手动完成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-29T23:31:12.710

这是 Erik van Zijst 资源的分步版本：

[http://codetheory.in/export-your-issues-and-wikis-from-github-repo-and-import-to-bitbucket-migration/](http://codetheory.in/export-your-issues-and-wikis-from-github-repo-and-import-to-bitbucket-migration/)

它一步一步地展示了如何做到这一点。希望这会为您节省一些时间。

我能够将我所有的 Github 问题导入 BitBucket！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-03T14:59:24.713

还有另一个用 python 编写的工具，用于将 github 问题导出为 bitbucket 问题导出格式。

您可以在[gibiexport上查看](https://bitbucket.org/ZyX_I/gibiexport)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-14T17:22:54.230

我遇到了同样的问题，所以我编写了一个 Python 脚本来帮助我的团队将我们的问题数据从 GitHub 迁移到 BitBucket：[https ://github.com/Brethren-Studios/issue-migrator](https://github.com/Brethren-Studios/issue-migrator)

此脚本以 BitBucket 友好的 JSON 格式输出问题数据。正如 Erik van Zijst 上面所指定的，Atlassian 有用于[导入/导出 BitBucket 问题数据的文档以及](https://confluence.atlassian.com/display/BITBUCKET/Export+or+Import+Issue+Data)[导入到 BitBucket 所需](https://confluence.atlassian.com/pages/viewpage.action?pageId=330796872)的数据格式。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2014-08-14T00:27:40.923

这是我找到的最简单的解决方案：

```
cd $HOME/dev/Pipelines
git remote rename origin bitbucket
git remote add origin https://github.com/edwardaux/Pipelines.git
git push origin master 
```

当您对 Github 感到满意并且不需要旧遥控器时：

```
git remote rm bitbucket 
```

# c# - C# GDI 将椭圆从一个点移动到另一个点并返回

> ID：11119276
> 
> 赞同：2
> 
> 时间：2012-06-20T12:11:38.003
> 
> 标签：c#, gdi

我正在创建一个模拟汽车游戏的应用程序，它使用两个键，左键和右键。我正在使用椭圆并在两个方向上移动它。当我启动应用程序并将椭圆移动到右键时，它工作正常，当我按下左键时它会冻结，我正在使用另一个必须不断向下移动的椭圆。下面是我用来移动椭圆的两个函数。以及表单的 key_down 事件：

```
 public void MoveLeft()
    {

        if (startPoint.Y > 100)
        {
            startPoint.Y = 1;
        }
        while (startPoint.Y > 1)
        {

            graphics.Clear(BackColor);
            if (startPoint.Y > this.ClientSize.Height)
                startPoint.Y = 0;
            startPoint.Y += 5;
            graphics.DrawEllipse(Pens.Black, new Rectangle(carPoint, new Size(100, 100)));
            graphics.FillEllipse(new SolidBrush(Color.Green), new Rectangle(carPoint, new Size(100, 100)));
            Move();
            System.Threading.Thread.Sleep(50);

        }
    }

    public void MoveRight()
    {
       while (startPoint.Y > 1)
        {
            if (startPoint.Y > this.ClientSize.Height)
                startPoint.Y = 0;
            startPoint.Y += 5;
            carPoint = new Point(100, 250);
            graphics.DrawEllipse(Pens.Black, new Rectangle(carPoint, new Size(100, 100)));
            graphics.FillEllipse(new SolidBrush(Color.Green), new Rectangle(carPoint, new Size(100, 100)));
            Move();
            System.Threading.Thread.Sleep(50);
            graphics.Clear(BackColor);
        }
    }

    public void Move()
    {
        graphics.DrawEllipse(Pens.Black, new Rectangle(startPoint, new Size(100, 100)));
        graphics.FillEllipse(new TextureBrush(image), new Rectangle(startPoint, new Size(100, 100)));
    }

    private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.KeyData)
        {
            case Keys.Right:
                {
                    moveCar = new Thread(new ThreadStart(MoveRight));
                    moveCar.Start();

                }
                break;
            case Keys.Left:
                {
                    if (moveCar != null)
                    {
                        moveCar.Abort();
                        moveCar = null;
                    }
                    moveCar = new Thread(new ThreadStart(MoveLeft));
                    moveCar.Start();
                }
                break;

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:01:35.430

代码有几个问题。

首先，您可能只想在 On_Paint 事件上进行绘画。当那个事件被触发时，你可以简单地把你的车涂在它应该在的地方。有一个`PaintEventArgs`被传递给 On_Paint 事件，并且包含一个 Graphics 对象。

在您的移动函数中，创建一个用于移动汽车的线程是一件好事，但您不想在每次按下键时都重新创建线程。相反，您可以在表单上保持方向状态，例如`bool IsMovingLeft`或`int Velocity`。然后您创建一个线程，该线程根据该变量的状态更新位置。

一旦您对汽车的位置进行了更新，强制 Form/Control 重新绘制自身也是很好的。你可以用它`this.Refresh()`来实现。

# vb.net - 使用VB.NET获取字符串的第一个字符

> ID：11119277
> 
> 赞同：2
> 
> 时间：2012-06-20T12:11:39.427
> 
> 标签：vb.net, winforms, string

假设我的字符串是：

```
test! 
```

我想得到第一个字符

**测试**！

我也想得到最后一个字符

测试`!`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T12:13:21.880

最简单的是使用 LINQ：

```
Dim firstChar = str.First()
Dim lastChar  = str.Last() 
```

您可以使用 LINQ，因为 a`String`也是`IEnumerable(Of Char)`隐含的。

*   [`Enumerable.First Method`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)
*   [`Enumerable.Last Method`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.last)

您也可以像`Char-Array`([`String.Chars`](http://msdn.microsoft.com/en-us/library/system.string.chars.aspx)是默认属性) 一样使用它并通过索引访问第一个和最后一个字符：

```
firstChar = str(0)
lastChar  = str(str.Length - 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:12:31.380

```
Dim test As String = "test!"
Dim first As String = test.Substring(0, 1)
Dim last As String = StrReverse(test).Substring(0, 1)
MessageBox.Show("First: " & first & " Last:" & last) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:14:51.017

**Substring(0, 1)**返回`first character of a string`. 要获取最后一个字符，您可以`reverse`使用**StrReverse()**获取字符串并执行相同操作，如下所示：

```
Dim str = "test!";
Dim Firstletter = str.Substring(0, 1); //Returns t
Dim Lastletter  = StrReverse(str).Substring(0, 1) //Returns ! 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:16:10.937

估计这应该是最快的。（Linq 很棒，但对于这样的事情，它是矫枉过正的。）

```
 Dim testString As String = "Some test..."
    Dim firstCharacter As Char, lastCharacter As Char

    ' If you want chFirst and chLast as String not Char, just use ToString() on the returned char.
    If Not String.IsNullOrEmpty(testString) Then
        firstCharacter = testString(0)
        lastCharacter = testString(testString.Length - 1)
    End If 
```

# java - Java / PostgreSql / Spring / DAO

> ID：11119282
> 
> 赞同：0
> 
> 时间：2012-06-20T12:11:55.680
> 
> 标签：java, spring, dao

我的 Java Web 服务在我的 Postgresql 数据库上的连接数有问题。

我使用 Spring、BoneCP、JDBC。

我有一个使用多个 DAO 类来检索数据的 Web 服务，如果我运行 3 次这个 Web 服务，我没有问题，但第四次，我收到以下消息：

```
Could not get JDBC Connection; nested exception is java.sql.SQLException: Unable to open a test connection to the given database. JDBC url = jdbc:postgresql://monserveur.com, username = pguser. Terminating connection pool. Original Exception: ------org.postgresql.util.PSQLException: FATAL: d??sol??, trop de clients sont d??j?? connect??s 
```

这是我的网络服务代码：

```
@GET
@Path("/launch")
@Produces(MediaType.APPLICATION_JSON)
public Response launch(@QueryParam("userId") Long userId, @QueryParam("imei") String imei) throws IOException {
    Map<String, Object> m = new HashMap<String, Object>();

    if (imei != null) {
        UserAccount account = new UserAccount();
        account.setUserId(userId);
        account.setImei(imei);

        if (!this.userAccountDAO.isImeiBlackListed(imei)) {

            if (userId != null && userId != 0){
                if(this.userAccountDAO.userExists(userId)){
                    if(this.userAccountDAO.userImeiExists(userId, imei)){
                        // Récupération des données du profil
                        m.put("status", account.getStatus());
                        m.put("forenm", account.getName());
                        m.put("surnm", account.getSurname());
                        m.put("pwd", account.getPassword());
                        // Récupération préférences
                        m.put("optin", account.hasOptedIn());
                        m.put("mailNotif", account.isMailNotified());
                        m.put("smsNotif", account.isSmsNotified());
                        m.put("geoloc", account.isGeolocalized());
                        // Récupération des adresse
                        m.put("addresses", this.userAddressDAO.getAddressesByUserMobile(userId));
                        // Récupération des moyens de paiements
                        m.put("mop", this.PaymentMethodDAO.getPaymentsByUserMobile(userId));
                        // récupération des versions
                        m.put("cfg", this.VersionDAO.getVersion());
                        m.put("nwcertif", false);
                        //Supression des moyens de paiement supprimés
                        //account.flushPaymentMethods()

                        m.put("nwmsg", this.NotificationDAO.hasNotification(userId));

                        try {
                            this.userAccountDAO.getJdbcTemplate().getDataSource().getConnection().close();
                            this.userAddressDAO.getJdbcTemplate().getDataSource().getConnection().close();
                            this.PaymentMethodDAO.getJdbcTemplate().getDataSource().getConnection().close();
                            this.VersionDAO.getJdbcTemplate().getDataSource().getConnection().close();
                            this.NotificationDAO.getJdbcTemplate().getDataSource().getConnection().close();
                        } catch (SQLException e) {
                            // TODO Auto-generated catch block
                            m.put("errcode", "09999");
                        }finally{
                            m.put("errcode", "00000");
                        }

                        //return mapper.writeValueAsString(m);
                    }else{
                        // //IMEI différent, même compte
                        m.put("errcode", "02005");
                    }
                }else{
                    // User Id inexistant
                    m.put("errcode", "02006");
                }
            }else{
                m.put("errcode", "00000");
                m.put("nwmsg", false);
                // récupération des versions
                m.put("cfg", this.VersionDAO.getVersion());
            }
        }else{
            // IMEI en liste noire
            m.put("errcode", "02004");
        }
    } else {
        // IMEI absent
        m.put("errcode", "01020");

        //return Response.serverError().entity("IMEI cannot be blank"+String.valueOf(imei)).build();
    }

    return Response.ok(m, MediaType.APPLICATION_JSON).build();
} 
```

这里是一个 DAO 类的例子：

```
public class JDBCUserAccountDAO implements UserAccountDAO {

private JdbcTemplate jdbcTemplate;
private SimpleJdbcInsert insertAccount;

public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
    this.insertAccount = new SimpleJdbcInsert(dataSource).withTableName(
            "compte").usingGeneratedKeyColumns("idcompte");
}

/**
 * @return the jdbcTemplate
 */
public JdbcTemplate getJdbcTemplate() {
    return this.jdbcTemplate;
}
public boolean userExists(long userId) {
    boolean result = false;

    //try {
        int exists = this.jdbcTemplate.queryForInt(
                "SELECT COUNT(*) FROM compte WHERE idcompte=?", userId);
        if (exists > 0) {
            result = true;
        }
    /*
        this.jdbcTemplate.getDataSource().getConnection().close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        return false;
    }
    */
    return result;
}

public boolean userImeiExists(Long userId, String imei) {
    boolean result = false;

    //try{
        int exists = this.jdbcTemplate.queryForInt(
                "SELECT COUNT(*) FROM compte WHERE imei=? and idcompte=?",
                imei, userId);
        if (exists > 0) {
            result = true;
        }
    /*
        this.jdbcTemplate.getDataSource().getConnection().close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        return false;
    }
     */

    return result;
} 
```

和我的康格豆：

```
<property name="driverClass" value="${jdbc.driverClass}"/>
    <property name="jdbcUrl" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
    <property name="idleConnectionTestPeriodInMinutes" value="240"/>
    <property name="idleMaxAgeInMinutes" value="5"/>
    <property name="maxConnectionsPerPartition" value="30"/>
    <property name="minConnectionsPerPartition" value="10"/>
    <property name="partitionCount" value="3"/>
    <property name="acquireIncrement" value="5"/>
</bean> 
```

你有避免这个问题的想法吗？

提前谢谢

文斯

# python - String Joining from Iterable containing Strings and ( NoneType / Undefined )

> ID：11119285
> 
> 赞同：17
> 
> 时间：2012-06-20T12:12:02.813
> 
> 标签：python

I am looking for a clean way to combine variables into a single string with a predefined separator. The problem is that sometimes some of these variables wont always exist or can be set to None. I cant have the separator string duplicate either. Example of problem:

```
# This works because I have all strings
str('-').join(('productX', 'deployment-package', '1.2.3.4'))
# 'productX-deployment-package-1.2.3.4'

# But I have more args that might be None / or not exist like and that breaks
str('-').join(('productX', 'deployment-package', '1.2.3.4', idontexist, alsonotexist))
str('-').join(('productX', 'deployment-package', '1.2.3.4', None, None, None))

# If I set the other missing variables to empty strings, I get duplicated joiners
str('-').join(('productX', 'deployment-package', '1.2.3.4', '', '', ''))
# 'productX-deployment-package-1.2.3.4---' 
```

Is there a nice clean way to do this?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-20T12:14:33.930

You can use a comprehension to populate your iterable with a conditional checking that values have a truthy value.

```
your_list = [
  'productX', 
  'deployment-package', 
  '1.2.3.4', 
  None, 
  None, 
  None,
]

'-'.join(item for item in your_list if item) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T12:32:25.943

If you want to keep the number of items constant (for instance because you want to output to a spreadsheet where the list is a row and each item represents a column), use:

```
your_list = ['key', 'type', 'frequency', 'context_A', None, 'context_C']
'\t'.join(str(item) for item in your_list) 
```

BTW this is also the way to go if any of the items you want to join are integers.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-28T04:40:27.530

You can use `filter(bool, your_list)` or `filter(None, your_list)` to remove anything that evaluates to False when converted to a bool, such as False, None, 0, [], (), {}, '', maybe others.

You can use `locals().get('mightnotexist')` or `globals().get('mightnotexist')`, depending on whether the variable is expected to be local or global, to reference a variable that might not exist. These will return None if the variable doesn't exist.

Your code might become:

```
items = ('productX',
         'deployment-package',
         '1.2.3.4',
         locals().get('idontexist'),
         globals().get('alsonotexist'),
         None,
         None,
         '')
'-'.join(filter(bool, items)) 
```

# mysql - 优化mysql查询（SELECT）？

> ID：11119286
> 
> 赞同：0
> 
> 时间：2012-06-20T12:12:04.733
> 
> 标签：mysql

我有 300 000 条记录的表（MyISAM）。我使用此功能从该表中获取记录：

```
public function loadRows() {
    if (!$this->result)
        die("Nothing found!");
    $this->rows = array();
    while ($r = mysql_fetch_array($this->result, MYSQL_ASSOC))
        $this->rows[] = $r;
    //mysql_free_result($this->result);
    return $this->rows;
} 
```

显示该表中的 100 条记录的估计时间为 6 秒，非常慢，该查询使用的 MEMORY 为 512 MB。我哪里错了？

查询是：

```
SELECT i.* FROM inv i 
LEFT JOIN (inv_m im) ON (i.m_id = im.id)
LEFT JOIN (inv_f iff) ON (iff.num = i.num)
LEFT JOIN (temp_a ta) ON (ta.num = i.num)
WHERE i.vid = 1
AND iff.num IS NULL
AND ta.num IS NULL
LIMIT 100 
```

对于 i.vid，我显示所有记录。

声明的索引：

**i.m_id 索引**

**im.id 主键**

**iff.num 索引**

**i.num 索引**

**ta.num 索引**

解释结果

```
id  select_type  table  type     possible_keys  key      key_len  ref                 rows    Extra
1   SIMPLE       i      ref      vid            vid      4        const               85343   Using where
1   SIMPLE       im     eq_ref   PRIMARY        PRIMARY  4        checksys_r1.i.m_id  1 
1   SIMPLE       iff    ref      num            num      182      checksys_r1.i.num   1       Using where
1   SIMPLE       ta     ref      num            num      194      checksys_r1.i.num   1       Using where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:34:18.420

从运行开始：

```
EXPLAIN SELECT i.* FROM inv i 
LEFT JOIN (inv_m im) ON (i.m_id = im.id)
LEFT JOIN (inv_f iff) ON (iff.num = i.num)
LEFT JOIN (temp_a ta) ON (ta.num = i.num)
WHERE i.vid = 1
AND iff.num IS NULL
AND ta.num IS NULL
LIMIT 100 
```

查找诸如全行扫描、文件 i/o 等内容。在此处发布结果。有时桌子也可能需要修理。

另外，你有什么理由在 InnoDB 上使用 MyISAM 吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T12:22:09.437

有两个可能的原因，两者都可能起作用。首先，尽可能避免选择 *。显式指定列将节省您对主数据库的每次连接查询，以一遍又一遍地查找列名。第二个是你正在指定一个 where 子句，它只会在你的加入之后运行。所以它将创建一个包含所有连接的大型记录集，然后过滤该记录集。将您的条件转移到连接本身应该可以让您获得更多的性能提升。所以.....

```
SELECT i.Column1, i.Column2, i.Column3 
FROM inv i 
LEFT JOIN (inv_m im) ON (i.m_id = im.id AND i.vid = 1)
LEFT JOIN (inv_f iff) ON (iff.num = i.num AND iff.num IS NULL)
LEFT JOIN (temp_a ta) ON (ta.num = i.num AND ta.num IS NULL)
LIMIT 100 
```

# c# - 控件、组件和类型的标准行为

> ID：11119288
> 
> 赞同：0
> 
> 时间：2012-06-20T12:12:14.843
> 
> 标签：c#, .net, user-controls

有没有人在为大型应用程序（几十万行代码）的外观和感觉进行标准化而苦苦挣扎？

例如，假设我的应用程序中有很多（数百个）组合框和文本框，我希望它们都具有绿色前景色和蓝色边框。然后过了一段时间，老板说“我想要所有组合框和文本框中的粗体文本”。

一种选择是手动完成，但这种方法并不好，因为： - 耗时 - 开发人员会受到影响 - 会发生错误（在应用程序中的某处会有文本框或组合框没有粗体文​​本)

我正在寻找的是一种自动（自动应用属性）或至少进行自动检查（以类似于代码分析的方式）的方法。

有人做过类似的事情或在该领域有经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:28:30.783

**Winforms具体建议/答案**

假设您有一个已经存在的项目，其中已经创建了数千个某某……但要使用个人扩展的基础对象，则设置需要付出更大的努力。

我自己的项目是用 winforms 编写的，虽然我们没有创建自定义控件，但我们确实有一个自定义的“UserControl”和一个自定义的“Form”，我们可以扩展。扩展表单继承了基本表单的所有格式、结构等。在这种情况下，它的颜色、属性、突出显示和其他包含的控件（如表单上的默认“关闭”按钮）以及自定义事件。

你可以创建这样的东西：

```
public class CustomTextBox : TextBox
{
    public override <propertyName> { get; set; } //auto-implemented property        
    ...
    public CustomTextBox() : base()
    {
         propertyName = newDefualtValue;
         ...
    }
} 
```

这仍然允许在实例基础上手动设置这些属性......但现在为它们定义了一个新的默认值。不过，这可能需要对现有项目进行大量编辑。

这可能是最简单的设置方法，这样可以更改大型分布式但功能相同的对象的默认值，而无需单独编辑它们。您唯一的其他真正选择是代码搜索、搜索和替换操作以及广泛的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:39:59.690

前段时间我实现了一个解决方案，在该解决方案中我创建了自定义基本表单和控件实现，添加了一个属性并覆盖了 OnLoad 方法：

```
public partial class FormBase : Form   
{
    public FormBase ()
    {
        this.InitializeComponent();
    }

    protected ConsistencyManager ConsistencyManager { get; private set; }

    protected override void OnLoad(System.EventArgs e)
    {
        base.OnLoad(e);

        if (this.ConsistencyManager == null)
        {
            this.ConsistencyManager = new ConsistencyManager(this);
            this.ConsistencyManager.MakeConsistent();
        }
    }
} 
```

ConsistencyManager 类查找所有控件、组件，还支持在特定控件中搜索自定义子控件。从 MakeConsistent 方法复制/粘贴代码：

```
public void MakeConsistent()
{
    if (this.components == null)
    {
        List<IComponent> additionalComponents = new List<IComponent>();

        // get all controls, including the current one 
        this.components =
            this.GetAllControls(this.parentControl)
            .Concat(GetAllComponents(this.parentControl))
            .Concat(new Control[] { this.parentControl });

        // now find additional components, which are not present neither in Controls collection nor in components
        foreach (var component in this.components)
        {
            IAdditionalComponentsProvider provider = GetAdditinalComponentsProvider(component.GetType().FullName);

            if (provider != null)
            {
                additionalComponents.AddRange(provider.GetChildComponents(component));
            }
        }

        if (additionalComponents.Count > 0)
        {
            this.components = this.components.Concat(additionalComponents);
        }
    }

    this.MakeConsistent(this.components);
} 
```

如果有人想要完整的样本或来源，请告诉我。

最好的问候，兹冯科

PS：以同样的方式，我还创建了计算主线程调用次数的性能计数器。

# iphone - 如何在目标 c 中调用此方法

> ID：11119290
> 
> 赞同：1
> 
> 时间：2012-06-20T12:12:21.113
> 
> 标签：iphone, objective-c, ios, function, methods

我已经在这个 Stackoverflow 中看到了这段代码作为对某些问题的回答，我试图在我的代码中暗示这一点，但我没有得到这是什么类型的函数，我该如何调用它

```
NSString * ReplaceFirstNewLine(NSString * original)
{
    NSMutableString * newString = [NSMutableString stringWithString:original];

    NSRange foundRange = [original rangeOfString:@"\n"];
    if (foundRange.location != NSNotFound)
    {
        [newString replaceCharactersInRange:foundRange
                                 withString:@""];
    }
    NSLog(@"%@",newString);
    return [[newString retain] autorelease];
} 
```

我试图这样称呼它，`[self ReplaceFirstNewLine(@"\nstirng\nstring")];` 但它给出了语法错误，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T12:14:13.070

首先，它不是一个`method`，它是一个 C `function`，类似于`NSLog`，所以这样使用它：

```
NSString *results = ReplaceFirstNewLine(@"\nstirng\nstring");
NSLog(@"%@", results); 
```

C 风格的函数有优点和缺点，我将尝试在此处列出其中的一些：

好处：

*   速度。AC 函数几乎总是比等效的 Objective-c 方法快，因为调用该函数不需要动态调度

*   指针。获得指向 C 风格函数的指针比获得 Objective-C 方法的指针要容易得多，这使得它更适合 C API 回调

缺点：

*   iVar。在 C 函数中，如果不使用运行时向导，您**就无法**访问对象的私有变量（即使是对它的引用），此时确实不值得。

*   没有概念`self`。您不能在 C 函数中使用`self`（或`_cmd`，就此而言）变量，因为每个 C 函数都独立于产品中的其他函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:14:58.273

你可以这样称呼它： `ReplaceFirstNewLine(@"");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:00:31.877

```
- (NSString *) ReplaceFirstNewLine(NSString * original){
    //...
} 
```

现在你应该可以像方法一样调用它了：

```
[self ReplaceFirstNewLine(@"\nstirng\nstring")]; 
```

# android - 为什么 Eclipse 突出显示 R.id.tabhost？

> ID：11119291
> 
> 赞同：3
> 
> 时间：2012-06-20T12:12:22.457
> 
> 标签：android, tabs, android-tabhost

我正在尝试在我的应用程序中实现一个选项卡，但 id tabhost 被突出显示，为什么？

我看的每个教程都有*TabHost tabs=(TabHost)findViewById(R.id.tabhost)*，每次我包含此行时，都会突出显示 id tabhost ，并显示错误：**tabhost cannot be resolve or is not a field**。

**recipe_list.java：**

```
 TabHost tabs=(TabHost)findViewById(R.id.tabhost);

tabs.setup();

TabHost.TabSpec spec=tabs.newTabSpec("tag1");

spec.setContent(R.id.tab1);
spec.setIndicator("Clock");
tabs.addTab(spec);

spec=tabs.newTabSpec("tag2");
spec.setContent(R.id.tab2);
spec.setIndicator("Button");
tabs.addTab(spec); 
```

* * *

**recipe_list.xml**，我在每个选项卡中都有列表视图：

```
 <TabHost
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1" >
                </ListView>

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <ListView
                    android:id="@+id/listView2"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1" >
                </ListView>

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T12:14:50.777

```
TabHost tabs=(TabHost)findViewById(android.R.id.tabhost); 
```

**或者**

```
TabHost tabs=getTabHost(); 
```

# javascript - 如何用链接包装元素覆盖它的事件？

> ID：11119299
> 
> 赞同：1
> 
> 时间：2012-06-20T12:12:52.173
> 
> 标签：javascript, html, css

我有 2 个元素要包装并取消它们的事件。一个是 iframe，另一个是对象..

```
 <a href="http://google.com">
<iframe src="http://pldaflix.com/video/54312" width="500" height="415" frameborder="0"></iframe>
</a>

     <a href="http://google.com">
<object height="400" width="500"><param name="allowfullscreen" value="false">
<param name="AllowScriptAccess" value="always">
<param name="movie" value="http://embed.rede.com/player/">
<param name="FlashVars" value="id=97219&&autostart=false">
<embed src="http://embed.rube" allowfullscreen="false" AllowScriptAccess="always"
flashvars="autostart=false" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" 
type="application/x-shockwave-flash" height="400" width="500" /></object>

</a> 
```

我想用 html 或 css 覆盖他们的事件，而不是使用 javacript .. 但 javascript 选项也是一个选项..

如何使用链接事件覆盖对象和 iframe 的事件？

更新：

我想做这样的事情：

```
 <div id="wrapper" style="position:relative;">
        <a href="http://google.com">
        <div style="position:absolute; width:100%; height: 100%; z-index: 9999; background-color:blue;">
            <div style="position:absolute; width:100%; height: 100%; z-index: 0;">
                <iframe src="http://playflix.com/video/54312" width="500" height="415" frameborder="0"></iframe>
            </div>
            </a>
        </div>
    </div> 
```

将 iframe 的 div 放在链接的 div 下方..

不起作用..但我认为解决方案应该沿着这些思路

另一种方法是使用 javascript 禁用点击 div

**更新：**

我需要一个简单的解决方案。解决方案是将 div 放在 iframe 上方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:41:16.090

假设 jQuery：

```
$("iframe").click(function(){
   window.location = <yourDesiredHref>;
}); 
```

同样适用于对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:47:14.403

您可以通过将链接放在对象之前并给它一个绝对位置来使链接覆盖对象。参见小提琴例如：http: [//jsfiddle.net/sveinatle/BP9xc/4/](http://jsfiddle.net/sveinatle/BP9xc/4/)

重要的位是：

```
<div class="container">
    <a id="overlay" href="http://google.com"></a>
    <iframe src="http://www.example.com" width="500" height="415" frameborder="0"></iframe>
</div> 
```

并对其进行样式设置，以便链接覆盖对象：

```
.container{
    position:relative; 
    border: 2px solid red;
    overflow:hidden;
}
#overlay{
    display:block; 
    position:absolute; 
    width:100%;
    height:50%;
    background-color:rgba(255,0,0,0.5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:48:48.573

使用 html/css 你可以尝试这样的事情：

*   在对象下方创建一个空的 div“叠加层”
*   使其与 iframe 和对象的组合一样高（如果您不使用任何填充/边距，则为 815 像素）
*   使其与较大的元素一样宽（500px）
*   定位它以便它覆盖其他元素，例如`margin-top:-500px;` 给它一个比其他两个元素`display:block;`更大的a和a `z-index`，以确保它在顶部
*   在其中/周围放置一个链接，其范围与“覆盖”一样大

您也可以尝试是否可以在元素周围放置“覆盖”并将其放在顶部`z-index`。

# firebird2.5 - 无法连接数据库并抛出错误

> ID：11119305
> 
> 赞同：2
> 
> 时间：2012-06-20T12:13:26.903
> 
> 标签：firebird2.5

我是一个linux用户。我确实安装了 Firebird，下面的 url 有帮助。

[http://www.firebirdsql.org/manual/qsg10-creating.html#d0e1325](http://www.firebirdsql.org/manual/qsg10-creating.html#d0e1325)

当我尝试连接数据库时，会显示以下错误消息。

**命令** isql-fb '/var/lib/firebird/2.5/data/employee.fdb' -u firebird -p 'admin'

语句失败，SQLSTATE = -902 您的用户名和密码未定义。请您的数据库管理员设置 Firebird 登录。

我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T08:14:56.580

打开 /opt/firebird/bin/gsec 并试试这个： GSEC> modify sysdba -pw masterkey and quit

有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:38:10.353

您是否从 rpms 安装了 Firebird？我在尝试在 Fedora 上创建数据库时遇到了与您描述的相同的问题。我设法通过删除 rpm 并使用 yum 再次安装它们来解决它。

还要确保您的数据路径存在并且具有正确的权限。我的是`/var/lib/firebird/data/`，我可以从 isql-fb 控制台使用这个命令创建一个数据库（使用默认管理员凭据）。

`SQL> create database "/var/lib/firebird/data/test.fdb" user 'SYSDBA' password 'masterkey';`

# objective-c - 初始化可变数组

> ID：11119307
> 
> 赞同：1
> 
> 时间：2012-06-20T12:13:32.453
> 
> 标签：objective-c, arrays, initialization

我对Objective C还是新手，我想知道以下两组代码之间是否有任何区别，首先使用局部变量有什么具体原因吗？

```
NSMutableArray *MoviesList = [[NSMutableArray alloc] init];
self.GlobalMoviesList = MoviesList; 
```

或者

```
self.GlobalMoviesList = [[NSMutableArray alloc] init]; 
```

我试图找出这两种方法之间的区别是什么？感谢您是否可以向我指出一些讨论该部分的文章或主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:16:21.110

在这种情况下，几乎没有区别。

有时，当您在新数组上调用某些方法时，使用局部变量可能会提高可读性。

无论如何，这只是一个口味问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:16:39.333

这些声明是平等的。只是不要忘记，如果您的 GlobalMoviesList 是保留属性（或强，如果您使用 arc），您应该在设置后释放实例，或设置自动释放对象。

# wcf - WCF：在哪一层执行 POCO 实体到 DTO 的转换？

> ID：11119308
> 
> 赞同：4
> 
> 时间：2012-06-20T12:13:39.803
> 
> 标签：wcf, converter, dto, n-tier-architecture

[这是我从这里](https://stackoverflow.com/questions/10278956/where-to-place-dto-entity-translator-in-wcf-service)提出的问题的后续行动。

首先，我**没有在我的项目中使用**DDD。

我有一个 3 层的 WCF 服务：

*   **服务层**（仅持有操作和调用 BL 方法）
*   包含所有业务逻辑类和方法的**业务逻辑层**
*   保存 DbContext (LINQ-TO-EF) 和 POCO 实体的**数据访问层**

WCF 服务需要返回 DTO 对象，我无法确定放置将我的 POCO 实体转换为 DTO 的“转换器”类的最佳位置。

我有两个选择：

.

.

***方法一***

让业务逻辑方法将实体返回到服务层，并且服务层中有一个转换器类，用于将实体转换为 DTO。

**优点：**

*   业务逻辑层做它必须做的事情——验证和 CRUD 操作
*   业务逻辑层根本不需要了解 DTO

**缺点：**

*   服务层现在必须包含对“数据访问层”程序集的引用，因为它从业务逻辑层接收实体。这似乎打破了 3 层的概念，即服务层只需要引用 BL 层，而 BL 层只需要引用 DAL。
*   这是最糟糕的问题：翻译类需要从实体对象创建 DTO。因为它在处理 DbContext 后从 BL 接收实体对象，所以它无法访问未使用“包含”扩展加载的任何内容。这意味着 BL 方法需要将实体返回到服务层，以及翻译器创建 DTO 所需的**一切。**这是一个问题，因为它要求 BL 知道翻译者需要什么，其次 - 它会从数据库中获取**大量**不必要的数据！（也许翻译者需要返回一个“UserDto”对象，其中一个字段是“订单总数” - 为什么我想从数据库中获取所有订单只是为了制作一个“Count（）”

.

.

***方法B***

将“转换器”类从实体对象转换为放置在“业务逻辑层”本身的 DTO。在这种机制中 - BL 方法已经返回 DTO。

**优点：**

*   BL 方法执行 BL 代码，然后调用“translate_to_dto”适当的消息将结果转换为返回的 DTO。这一切都在“DbContext”内部完成，这意味着当调用翻译器类翻译实体时，它仍然可以访问子对象，不需要调用“包含”。这意味着仅从数据库中获取创建 DTO 所需的数据。

**缺点：**

*   现在“业务逻辑层”中的“翻译器”类是需要了解 DTO 的人，尽管服务层只负责了解它们！
*   BL 中的每个方法现在都执行纯 BL（有效性检查、CRUD 操作等），**此外还**调用翻译器方法以返回 DTO。这打破了“单一责任规则”，即方法（在 BL 中）应该只做一件特定的事情。

.

谁能告诉我执行“Entity ==> DTO”转换的正确位置在哪里？

.

**[更新 - 添加示例]**

业务逻辑层有一个名为***UserManager***的管理器类，它有一个像这样的 BL 方法：

```
public UserTasksDto     GetUserInfoWithTasks(Guid userId)
{
    if (userId == Guid.Empty)
        throw new ArgumentException("User ID cannot be empty");

    using (IMyDBEntities entities = _contextFactory.GetContext())
    {
        // Get POCO Object from DbContext
        User user = entities.Users.Find(userId);
        if (user == null)
            throw new EntityNotFoundException("User was not found in the database");

        if (user.Tasks.Count() == 0)
            throw new Exception("User does not have any tasks !");

        // Call 'Translator' static method to translate POCO to DTO
        Translator.TranslateUserToUserTasksDto(user);
    }
} 
```

正如您在上面看到的 - BL 方法调用“翻译器”方法将 POCO 转换为 DTO。这是**在**“实体”上下文中完成的，因此翻译者仍然可以访问用户的“任务”子项。

这是“翻译器”方法的样子：

```
class Translator
{
    public static UserTasksDto   TranslateUserToUserTasksDto ( User userPoco )
    {
        UserTasksDto dto = new UserTasksDto
        {
            UserId        = userPoco.Id,
            Username      = userPoco.Username,
            CreationDate  = userPoco.CreationDate,

            // Accessing a related entity, this is why this 'translate' method 
            // needs to be called inside the DbContext, otherwise it will except
            // (or we load all related entities using 'Include' just for the 'Count' purpose)
            Supervisor    = userPoco.Supervisor.Username,    
            NumOfTasks    = userPoco.Tasks.Count(),
            FirstTaskDate = userPoco.Tasks.OrderBy(task => task.Date).Take(1),
        }

        return dto;
    }
} 
```

正如您在上面看到的 - 'Translate' 方法从 'User' POCO 对象'builds' 'UserTasksDto'。这是通过将“用户”对象中的一些字段及其相关实体映射到 DTO 来完成的。如果此方法不在BL 方法的 ObjectContext**中**- 我会收到一个异常，说我正在尝试访问没有上下文的实体。

我希望我现在的问题更清楚...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:43:50.013

虽然有疑问，

如果您需要您的服务层独立于 BL/DAL 数据实体，那么在我看来，您必须为独立模型提供一个新的抽象层（dll 程序集）。

您的 BL 和/或 DAL 现在不会返回实体，而是来自这个新程序集的模型对象。

您的服务层不需要对实体的 DAL 的引用，而是对新模型程序集的引用。

这是与视图模型类似的模式。

现在服务层的工作是将模型转换为 DTO（如果它选择这样做）。

**优点：**将释放您对 BL/DAL 的依赖

**缺点：**模型抽象层看起来好像是多余的

* * *

**编辑：**

哦，我不是说要从业务层返回 DTO。我的意思是从业务逻辑中返回独立的模型，以便它们真正独立于所有层，并且之后与它们一起工作的任何层都可以使用它们或将它们转换为所需的任何形式。

例如，服务层可以包括模型到 DTO 翻译器，表示层可以将它们转换为视图模型，存储库可以选择将它们转换为 XML ......等等。现在每一层都有自己的模型到 X 转换器，BL 将只有单一职责，所有层都将独立于 DAL 实体。

注意：有些层可能会选择直接使用它们，我相信这是您的担忧，是的，如果它们这样做，它们将表现得好像 BL 返回了 DTO/VM，但这不是我的意图。

希望这现在可以解决问题...

* * *

**更新：**

想想你是一个开发人员，除了 BL 之外不会编写任何层。

你会返回 DAL 的实体吗？不。

您是否对如何使用您的库以及哪些层将使用它有任何概念。不。

您将在 DAL 实体之上创建一个新的抽象，并将它们返回到将使用您的库的 WHICHEVER 层。

因此，如果开发人员 X 出现并使用您的库创建 ACME WCF 服务，我很确定 X 不会使用您的模型对象作为他的 DTO，而是 X 将使用您的模型作为开始创建 DTO。

开发人员 Y 出现并使用您的库创建 ACME ASP.NET MVC 3 应用程序，我很确定 Y 不会将您的模型对象用作他的 VM（查看模型），而是 Y 将使用您的模型作为开始创建 VM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:16:03.623

可能没有合适的地方，但最合乎逻辑的地方是您的业务逻辑。

# entity-framework - 没有配置详细信息的 EF 5.0

> ID：11119313
> 
> 赞同：0
> 
> 时间：2012-06-20T12:13:45.883
> 
> 标签：entity-framework

1.  我们如何才能在没有以下配置的情况下首先使用 EF 代码，而只需一个 DB 连接字符串，就像传统的 ADO.net 和数据集一样。
2.  EF 5.0 如何在运行时反映底层表结构？像 ADO.NET 数据集。

配置：

```
 <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:24:09.210

您可以直接使用连接字符串

```
var db = new DbContext("Data Source=serverName;Initial Catalog=dbName;Integrated Security=True;MultipleActiveResultSets=True");
            //instead of 
var db = new DbContext("Name=DBConnectionConfigEntryName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:23:38.183

您是否尝试过从 web.config 中删除上面显示的代码？你有任何错误吗？

您的代码（EF 4.3）中的注释链接表明配置部分是可选的。同样在 EF 5 RC 页面上：http: [//blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx](http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx)代码优先演练链接到 EF 4.2所以也许它仍然有效。

# javascript - 在 jquery.validate() 验证表单之前触发函数

> ID：11119315
> 
> 赞同：0
> 
> 时间：2012-06-20T12:13:49.977
> 
> 标签：javascript, jquery, validation, function

我有一个表单，在提交 jquery.validate() 时会验证表单，如果失败，则不会提交表单。现在我希望在验证表单之前触发一个函数。我的想法是在 .validate() 中应该有某种类型的“beforeValidate”参数或类似的东西，就像规则、消息等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:21:21.467

如果我正确地回答了你的问题，我认为这就是你需要做的（不知何故）

```
$(".selector").validate({
    invalidHandler: function(form, validator) {
      var errors = validator.numberOfInvalids();
      if (errors) {
        var message = errors == 1
          ? 'You missed 1 field. It has been highlighted'
          : 'You missed ' + errors + ' fields. They have been highlighted';
        $("div.error span").html(message);
        $("div.error").show();
      } else {
        $("div.error").hide();
      }
    }
 }) 
```

可以在此代码中进行更多修改，但如果没有提供代码，可以将其视为模板；）

# android - 实现 Android (4.0+) 首选项的正确方法是什么？

> ID：11119324
> 
> 赞同：0
> 
> 时间：2012-06-20T12:14:09.193
> 
> 标签：android, android-4.0-ice-cream-sandwich

我已经浏览了网络上的几个问题和文章，几乎所有这些似乎都指向启动一个扩展 PreferenceActivity 的自定义类。

但是在Android参考文档中，它指示使用preferencefragment。

使用它的正确方法是什么？

（我只是在问，因为通过活动执行此操作已弃用 addPreferencesFromResource()）

假设：api 级别 15

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:40:08.640

答案是，这取决于您正在开发的平台。PreferenceFragment 适用于 3.0+，现在被认为是正确的方法。不幸的是，旧平台的支持库中没有等效项，因此对于那些您需要使用 PreferenceActivity 的人。

有关更深入的解释和实现两者的示例的链接，请参见[此处（根据设备平台使用正确的类型）。](https://stackoverflow.com/a/5501646/1105376)

# iphone - 这里首选哪个 - uitableview 或 uibutton？

> ID：11119333
> 
> 赞同：0
> 
> 时间：2012-06-20T12:14:37.570
> 
> 标签：iphone, xcode, uitableview, uibutton, xib

![在此处输入图像描述](../Images/3ba3f4fb91b51194bbabb29219281377.png)所以，我几乎完成了我正在开发的应用程序的功能部分，现在图形设计师给了我一个 png 图像，我必须与 xib 匹配。该图像有一个“搜索代理”部分，其中包含选择国家、地区、语言、属性类型和两个文本字段。最初在我的 xib 中，我为每个文本文件和两个文本文件设置了单独的按钮，并且按钮操作会给我选择器来选择国家、地区等。所以 png 要求我将所有这些都放入 tableview 中。使用按钮和文本字段创建表格视图更好还是将它们分别放在视图本身上？我知道这不是具体的程序问题，但我真的需要知道哪个更好。这是我的第一个应用程序，我真的一无所知。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:16:53.340

如果您有一组类似的控件，例如 5 个按钮 2 个文本字段等。使用表格视图

如果它们没有分组，则通常使用按钮和文本字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:20:28.193

这真的取决于你想要什么，通常人们喜欢使用表格视图仅仅是因为他们很好地分组元素，这在登录屏幕中很常见。

但这并不意味着一个比另一个更好，这实际上只是一种设计选择。话虽这么说，在 tableviews 中有按钮有时会产生问题，因为响应链在 tableview 和按钮中。

对于您的情况，我建议不要使用 uitableview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:47:18.480

从 png 看来，table view 的使用已经足够好了，因为所需的功能很容易用 tabelView 完成。所以我更喜欢 tabelView

# sql-server - 将浮点数转换为十进制 (SQL Server)

> ID：11119343
> 
> 赞同：11
> 
> 时间：2012-06-20T12:14:59.067
> 
> 标签：sql-server, tsql, floating-point, decimal

我需要在 SQL Server 中将浮点数转换为十进制（28,10）。我的问题是，由于浮点数的性质以及转换的完成方式，简单地转换浮点数可能会使我的用户认为它是错误的数字。

例如：

```
Float:               280712929.22 
Cast as Decimal:     280712929.2200000300
What I think I want: 280712929.2200000000 
```

我对 float 的工作方式有所了解（它是一种近似的数据类型等），但诚然不足以理解为什么它会在末尾添加 300。它只是作为转换的副作用的垃圾，还是以某种方式更准确地表示浮点实际存储的内容？对我来说，它看起来像是凭空而来的精确度。

最终，我需要它是准确的，但也要看起来“正确”。我想我需要得到那个底部数字，因为看起来我刚刚添加了尾随零。这可能吗？这是一个好主意还是坏主意，为什么？欢迎提出其他建议。

其他一些例子：

```
Float:           364322379.5731
Cast as Decimal: 364322379.5730999700
What I want:     364322379.5731000000

Float:           10482308902
Cast as Decimal: 10482308901.9999640000
What I want:     10482308902.0000000000 
```

旁注：我将这些值放入的新数据库表可由我的用户读取。他们现在实际上只需要两位小数，但将来可能会改变，所以我们决定使用 Decimal(28,10)。长期目标是将我获取数据的浮点列也转换为十进制。

编辑：有时我的浮点数比我需要的多，例如：-0.628475064730907。在这种情况下，转换为 -0.6284750647 就可以了。我基本上需要我的结果在浮点数的末尾添加零，直到我有 10 个小数位。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T12:17:11.970

您需要进行一次四舍五入，一次添加小数位（当然，还有其他方法，使用`STR`等`ROUND`）：

```
DECLARE @c TABLE(x FLOAT);

INSERT @c SELECT 280712929.22;
INSERT @c SELECT 364322379.5731;
INSERT @c SELECT 10482308902;

SELECT x, 
    d = CONVERT(DECIMAL(28,10), x), 
    rd = CONVERT(DECIMAL(28,10), CONVERT(DECIMAL(28,4), x))
FROM @c; 
```

结果：

```
x               d                       rd
--------------  ----------------------  ----------------------
280712929.22    280712929.2200000300    280712929.2200000000
364322379.5731  364322379.5730999700    364322379.5731000000
10482308902     10482308902.0000000000  10482308902.0000000000 
```

如果您希望它准确且看起来正确，请停止使用`FLOAT`，这是一种近似数据类型，并且对于大多数没有严格数学背景的人来说是违反逻辑的。使用`DECIMAL`比您需要的更大的比例，并将其格式化为您现在需要的小数位数（在您的查询中，或创建一个视图，或创建一个计算列）。如果您存储的信息比现在需要的多，您以后总是可以公开更多信息。您还可以选择不让用户直接访问您的表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-25T05:36:17.133

我不确定这是否属于 necroposting，但我最近遇到了类似的问题，所以我想我可能会发布。

这可能像罪一样丑陋，但似乎有效（根据上面亚伦的回应修改）。

```
DECLARE @myTable TABLE(x FLOAT);

INSERT INTO @myTable VALUES
   (280712929.22),
   (364322379.5731),
   (10482308902),   
   (-0.628475064730907);

SELECT x, 
       d = CONVERT(DECIMAL(28,10), x),                 
       NewDec = CONVERT(DECIMAL(28,10),           
                        CONVERT(DECIMAL(16,15), 
                                LEFT(CONVERT(VARCHAR(50), x, 2),17)) 
                        * POWER(CONVERT(DECIMAL(38,19),10),  
                                RIGHT(CONVERT(varchar(50), x,2),4)))                       
FROM @myTable; 
```

结果：

```
x                   d                       NewDec
------------------  ----------------------  ----------------------
280712929.22        280712929.2200000300    280712929.2200000000
364322379.5731      364322379.5731000300    364322379.5731000000
10482308902         10482308902.0000000000  10482308902.0000000000
-0.628475064730907  -0.6284750647           -0.6284750647 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-28T13:48:19.950

当我需要将大数据表从浮点数转换为十进制数（28,15）时，我遇到了这个问题。正如@Dan 答案的评论中所指定的，他的答案对于某些值没有按预期工作。

这是我用来进行更新的最终版本

```
DECLARE @myTable TABLE(x FLOAT);

INSERT INTO @myTable VALUES
(280712929.22),
(364322379.5731),
(10482308902),   
(-0.628475064730907),   
(-0.62847506473090752665448522),
(8.828),
(8.9),
(8.999),
(8),
(9),
(0.000222060864421707),
(5.43472210425371E-323),
(1.73328282953587E+81);

SELECT x, 
   d = CONVERT(DECIMAL(28,15), ROUND( CONVERT(DECIMAL(28,15),           
                CONVERT(DECIMAL(16,15), 
                        LEFT(CONVERT(VARCHAR(50), x, 2),17)) 
                * POWER(CONVERT(DECIMAL(38,19),10),  
                         CASE   
  WHEN RIGHT(CONVERT(varchar(50), x,2),4) > 12 THEN 12
  ELSE RIGHT(CONVERT(varchar(50), x,2),4)
  END)), 14 )),

 SimpleVarchar = TRY_CONVERT(VARCHAR(50), x),
 AnsiVarchar = TRY_CONVERT(VARCHAR(50), x, 2)
 FROM @myTable; 
```

因为我在小数点 14 上四舍五入，所以我失去了一小部分精度。但在我的情况下这是可以接受的。

# matlab - 在matlab中访问xml文本节点的内容

> ID：11119349
> 
> 赞同：2
> 
> 时间：2012-06-20T12:15:18.017
> 
> 标签：matlab

有一个这样的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Configuration>
  <Bla>
    BlaDiBla
  </Bla>
</Configuration> 
```

我想知道是否有比这更简洁的方法来使用标准 matlab（没有额外的工具箱）获得“BlaDiBla”：

```
xmlfile = fullfile('C:\tttttt', 'Configuration.xml');
xDoc = xmlread(xmlfile);

char(xDoc.getElementsByTagName('Bla').item(0).getFirstChild.getData) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:21:01.903

试试File Exchange 中的[xml_io_tools](http://www.mathworks.com/matlabcentral/fileexchange/12907-xmliotools)。

语法是：

```
 xmlfile = fullfile('C:\tttttt', 'Configuration.xml');
  struct = xml_load_any(xmlFile); 
```

# android - 无法从 SD 卡播放相机意图视频

> ID：11119352
> 
> 赞同：0
> 
> 时间：2012-06-20T12:15:28.170
> 
> 标签：android, video, android-camera-intent

我正在我的应用程序中启动相机应用程序并录制视频。录制后，我也将其保存在 SD 卡上。问题是图库中的视频可以播放，而SD卡上的视频无法播放。

```
private void recordVideo() {

  Intent intent = new Intent("android.media.action.VIDEO_CAPTURE");          
  startActivityForResult(intent, CAMERA_VID_REQUEST);     

} 

protected void onActivityResult(int requestCode, int resultCode, Intent data){  

    super.onActivityResult(requestCode, resultCode, data);        
    if ( requestCode == CAMERA_VID_REQUEST && resultCode == Activity.RESULT_OK) {             

             try {          
                 AssetFileDescriptor videoAsset = getContentResolver().openAssetFileDescriptor(data.getData(), "r");          
                 FileInputStream fis = videoAsset.createInputStream();
                 File videoFile = new File(Environment.getExternalStorageDirectory().getPath()+"/test.mp4");   
                 FileOutputStream fos = new FileOutputStream(videoFile); 
                 byte[] buffer = new byte[1024];          
                 int length;          

                 while ((length = fis.read(buffer)) > 0) {                
                     fos.write(buffer, 0, length); 
                 }                 

                 fis.close();          
                 fos.close();                        

             } catch (IOException e) {  

                 // TODO: handle error           
             }
        } 
```

在两个不同的设备上试过。任何有助于解决此问题的解决方案？

# winforms - MonoTouch - 相当于 WinForms 上下文菜单

> ID：11119353
> 
> 赞同：0
> 
> 时间：2012-06-20T12:15:34.410
> 
> 标签：winforms, xamarin.ios, contextmenu

我正在 MonoTouch 中开发一个应用程序，并希望在用户点击各种控件时显示上下文菜单。iOS 世界中是否有任何合适的 WinForms ContextMenuStrip 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:06:18.560

我想你想要`UIActionSheet`。它基本上是一个带有 X 个按钮的弹出窗口。

它在 iPad 上稍微好一点，因为您可以在 Popover 气泡中看到它。您将在其他应用程序的其他地方看到它们。（就像在 safari 中一样，点击 iPhone 底部工具栏上的中间“发送到”按钮）。

这是[Apple 的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)。

# macos - 应用程序未向 Growl 注册

> ID：11119354
> 
> 赞同：0
> 
> 时间：2012-06-20T12:15:35.100
> 
> 标签：macos, cocoa, growl

我正在尝试在我的 Mac 应用程序中实现 Growl。在调试模式下运行应用程序时，一切正常，我可以使用 Growl 注册应用程序并显示通知。归档和分发应用程序时，它不会向 Growl 注册。

有人知道为什么是这样吗？

在构建归档时，我会收到以下警告：

> 警告：跳过复制阶段条，二进制是代码签名的。

然后我将**复制期间的剥离调试符号**设置为**否**以进行调试和发布。这删除了警告。我不知道这是否与分发时未向 Growl 注册的应用程序有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:27:35.230

这与咆哮无关。这是由于某些代码失败导致无法建立与服务器的连接，因此我的通知不会到达用户。

# android - 将文件转换为字符串数组

> ID：11119356
> 
> 赞同：0
> 
> 时间：2012-06-20T12:15:53.717
> 
> 标签：android, string, file

我想列出文件的名称并将它们放入字符串数组中。要列出我正在使用此代码的文件的名称：

```
File dir = new File("/sdcard/Images/1124/");
File[] files = dir.listFiles();
for (int i = 0; i < files.length; ++i){
   Log.i(String.valueOf(files[i].getName()),"files");
} 
```

我想得到类似的东西，但文件[i]的自动值：

```
String[] files = new String[] { "/sdcard/Images/1124/pic.jpg","/sdcard/Images/1124/pic2.jpg" }; 
```

那么我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:20:05.157

你有没有尝试过？

```
String[] fileArray;
File dir = new File("/sdcard/Images/1124/");
File[] files = dir.listFiles();
fileArray = new String[files.length];
for (int i = 0; i < files.length; ++i){
fileArray[i] = files[i].getName();
} 
```

# php - 如何使用 Shopp 列出所有产品

> ID：11119361
> 
> 赞同：0
> 
> 时间：2012-06-20T12:16:07.833
> 
> 标签：php, e-commerce, shopp

只是尝试使用适用于 Wordpress 的 Shopp 插件获取所有产品的列表。我错过了什么？我可以获得类别列表，以及每个类别中的所有产品，但未分类的产品不会出现。

这是我所拥有的：

```
<?php
    $cats = shopp_product_categories();
    $dropdown = array();
    foreach ( $cats as $cat ) :
        $dropdown[$cat->slug]['group_name'] = $cat->name;
        $dropdown[$cat->slug]['group_items'] = shopp_category_products( $cat->id );
    endforeach;
?> 
```

我还想添加一个带有未分类项目数组的 $dropdown['uncategorized']['group_items'] 。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T21:16:29.457

这个简单的解决方案对我很有用：

```
<?php shopp('storefront','catalog-products','load=true&show=999'); if ( shopp('collection','has-products') ) { while ( shopp('collection','products') ) { ?><a href="<?php shopp('product','url'); ?>"><?php shopp('product','name'); ?></a><?php } } ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:31:48.407

我想到了。:)

它最终看起来像这样：

```
$cats = shopp_product_categories();
$cat_ids = array();
$dropdown = array();
foreach ( $cats as $cat ) :
    $cat_ids[] = $cat->id;
    $dropdown[$cat->slug]['group_name'] = $cat->name;
    $dropdown[$cat->slug]['group_items'] = shopp_category_products( $cat->id );
endforeach;

$products = new WP_Query( array(
    'post_type' => 'shopp_product',
    'posts_per_page' => -1,
    'tax_query' => array(
        array(
            'taxonomy' => 'shopp_category',
            'field' => 'id',
            'terms' => $cat_ids,
            'operator' => 'NOT IN'
        )
    )

) );

$dropdown['uncategorized']['group_name'] = 'Uncategorized';
while ( $products->have_posts() ) : $products->the_post();
    $dropdown['uncategorized']['group_items'][] = array(
        'id' => get_the_ID(),
        'name' => get_the_title()
    );
endwhile; 
```

# java - 在 NetBeans 中运行 H2 单元测试时出现 StackOverflowError

> ID：11119370
> 
> 赞同：0
> 
> 时间：2012-06-20T12:16:28.677
> 
> 标签：java, database, unit-testing, junit, h2

当我在使用 H2 数据库的 NetBeans 中运行或调试单元测试时，我得到一个 StackOverflowError：

...

```
Caused by: java.lang.StackOverflowError
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:229)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:295)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.h2.command.Command.executeUpdate(Command.java:230)
    at org.h2.command.CommandList.update(CommandList.java:44)
    at org.h2.command.CommandList.executeRemaining(CommandList.java:39)
    at org.h2.command.CommandList.update(CommandList.java:45)
    at org.h2.command.CommandList.executeRemaining(CommandList.java:39)
    at org.h2.command.CommandList.update(CommandList.java:45)
    at org.h2.command.CommandList.executeRemaining(CommandList.java:39)
    at org.h2.command.CommandList.update(CommandList.java:45)
    at org.h2.command.CommandList.executeRemaining(CommandList.java:39)
    at org.h2.command.CommandList.update(CommandList.java:45)
    at org.h2.command.CommandList.executeRemaining(CommandList.java:39)
    at org.h2.command.CommandList.update(CommandList.java:45)
    at org.h2.command.CommandList.executeRemaining(CommandList.java:39)
    at org.h2.command.CommandList.update(CommandList.java:45)
    at org.h2.command.CommandList.executeRemaining(CommandList.java:39) 
```

... ETC

当我从 ant 运行完整的单元测试时，我没有问题。从 IntelliJ 运行单个单元测试也可以正常工作。

帮助表示赞赏。请不要回答“切换到 IntelliJ”之类的问题，我想继续使用我最喜欢的 IDE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:06:05.270

通过增加JVM的堆栈大小来解决。在文件->项目属性->运行中，我将带有 -Xss 的 VM 选项设置为更大的值。

# php - MD5、密码哈希和盐位置

> ID：11119373
> 
> 赞同：2
> 
> 时间：2012-06-20T12:16:50.240
> 
> 标签：php, hash, md5, salt

在我开始之前，我知道 MD5 已被破坏（碰撞攻击和散列速度）并且不应该用于散列密码，但只是为了它，请耐心等待。

我的问题是：使用 md5 散列时的盐位置如何影响散列的“质量”或“强度”？

假设我有以下代码，它使用他的电子邮件地址的一部分作为盐来散列用户密码：

```
<?php
    $email = 'user@emailservice.ex';
    $password = 'RandomPassWithChars';

    $segments = explode('@', $email);
    list($saltPart1, $saltPart2, $saltPart3) = $segments;

    $hash = md5($saltPart1.$password.$saltPart3.$saltPart2);
?> 
```

该代码是否会减慢蛮力/字典/彩虹表攻击，而不是说：

```
<?php
    $password = 'RandomPass';
    $salt     = 'RandomSaltStoredInTheDatabase';
    $hash = md5($password, $salt);
?> 
```

是否值得尝试像在第一个代码中那样对密码进行加盐，或者它会产生与第二个代码相同的结果？有什么好处吗？第一个代码是否比第二种方式延迟破解以这种方式散列的密码列表？

这就引出了第二个问题：将盐存储在数据库中是否比从用户 ID（例如电子邮件地址）获取盐安全？在我看来，一旦攻击者获得了数据库的副本，该副本也包含盐，它使他的生活更容易尝试破解哈希。但是如果不存储盐，攻击者还需要创建盐的算法。如果我错了，请纠正我。

我希望我说清楚了。感谢您提前提供任何答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T12:34:27.877

第一个问题：

盐的位置对特定哈希的安全性没有影响。一个好的散列函数具有完美的熵，因为对于每个变化的输入位，每个输出位都有 50% 的机会发生变化。

特定顺序的任何可能的安全优势将完全来自用于将盐与预期密码连接起来的算法的相对缓慢（例如，如果`"password" . "salt"`比 慢`"salt" . "password"`，则使用前者）。但是，大多数编程语言都没有那种性能“问题”。

第二个问题：

如果盐明确存储在数据库中，攻击者将知道盐，并能够发起暴力散列攻击。如果盐是未知的，仍然可以使用蛮力密码攻击（尽管通过在尝试之间插入延迟很容易使这种攻击无效）。此外，攻击者可能能够对程序进行逆向工程并检索哈希字段。

至于哈希的安全性，如果用户在两个不同的地方拥有相同的电子邮件和密码，这否定了随机盐的好处之一，即相同的哈希在两个地方都可见。

就个人而言，我认为散列的最佳方法是使用：

```
"password" . "salt" . "internalconstantvalue" 
```

这样做的好处是简单，并且不亚于大多数其他安全方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:30:46.703

这取决于攻击者是试图绕过您的安全还是试图找到密码。

如果由于散列算法的加密弱点，攻击者依赖于查找与数据库的给定散列的*冲突*，则盐不会产生任何影响：我有一堆位，我想找到一些输入到XXX 哈希算法，它在输出中给了我相同的位。

如果他试图通过尝试每种可能的组合来强制密码，那么他可以收集的关于原始密码的任何信息都会有所帮助：

*   长度
*   组成（字母数字字符，特殊符号，...）
*   盐
*   ...

通过创建自己的 salt 算法，您实际上是在尝试通过混淆来确保安全，这确实会**限制**任何不知道您的算法的人对密码进行暴力破解，但它不会增强散列算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:28:42.133

当你处理密码安全时，总是假设如果攻击者可以访问你的数据库，那么他就可以访问你的代码。

因此，当涉及到加盐时，只需生成一个随机值的散列（例如`mcirotime()`），并在散列之前使用它对密码进行加盐，并将其存储在数据库中密码旁边的列中。

在将哈希添加到密码中时，我个人的看法是，将其放在首位或放在最后还是放在中间并不重要。

你想要安全吗？然后使用慢速散列算法，我强烈推荐[PHPass](http://www.openwall.com/phpass/)，因为它使用`bcrypt`（基于 Blowfish）作为默认散列算法。

# php - 将图像 URL 转换为图像 Android

> ID：11119376
> 
> 赞同：0
> 
> 时间：2012-06-20T12:17:03.817
> 
> 标签：php, android, mysql

我正在尝试将图像显示到 android 模拟器 3.1 中，但我遇到了问题。我只能在 ListView 中显示 URL。我正在使用我的本地服务器，并且我已经将 url 存储到 mysql 数据库并传递 php，但现在问题出在 android 中。

1）我需要将图片网址转换为图片并将其显示到包含文本的ListView中，下面是我的代码：

```
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();            
JSONObject json = JSONfunctions.getJSONfromURL("http://10.0.2.2/php/ViewPro.php"); 

try{
      JSONArray  earthquakes = json.getJSONArray("prop");
      for(int i=0;i<earthquakes.length();i++){                      
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = earthquakes.getJSONObject(i);
            map.put("id",  String.valueOf(i));
            map.put("imageColumn","Property : " + e.getString("imageColumn"));
            map.put("P_Price","Property Cost : " + e.getString("P_Price"));         
            mylist.add(map);            
      }     
}catch(JSONException e) {
      Log.e("log_tag", "Error parsing data "+e.toString());
}

ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.list_item, new String[] {"imageColumn","P_Price"}, new int[] { R.id.item_title, R.id.item_subtitle });

setListAdapter(adapter);
final ListView lv = getListView();
lv.setTextFilterEnabled(true);  
lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view, int position, long id)       {              
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            Toast.makeText(ViewStock.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 
      }
}); 
```

请帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:44:41.503

如果我了解您的问题，您希望显示从 URL 和一些文本检索到的图像列表。

我认为您没有指定如何在代码中绘制图像。在适配器中尝试覆盖 getView 方法。类似的东西

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    ...
    LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    v = vi.inflate(R.layout.yourlinelayout, null);
    ImageView img = (ImageView) v.findViewById(R.id.my_img);
    UrlImageViewHelper.setUrlDrawable(img, url_image_link, R.drawable.default, 60000);

    return v;
} 
```

UrlImageViewHelper -> 这是一个很酷的库，我在评论末尾发布了链接

我习惯做的是把这个问题分成 4 个子问题，如果你这样做一次，你永远不会遇到适配器和列表视图的问题

**活动**

您需要一个扩展 ListActivity 的 Activity

您需要在其中定义一个带有 ListView 的 Layout xml，它将 listview id 设置为 @android:id/list

**绘制每一行**

您需要使用每行的布局定义一个 xml 布局（在您的情况下为图像和文本）

让我们定义一个类来保存每一行的信息，例如 InfoRow （有 2 个字符串，一个是 URL，另一个是文本）

您需要定义 InfoRow 的 ArrayAdapter（例如 AdapterMyInfo），它会膨胀行布局 xml 并绘制每一行

**结合这两件事**

你只需要指定ListActivity的Adapter就是你ArrayAdapter

```
info = new ArrayList<InfoRow >();

m_adapter = new AdapterMyInfo(
                    this.getApplicationContext(),
                    info );

setListAdapter(m_adapter); 
```

**从 URL 中绘制图像** 最后一个问题...试试这个，太棒了，缓存和 AsyncLoad。真的很流畅和专业

[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:14:07.707

这就是我一直在寻找的：

```
ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);      
Bitmap bitmap = null;

bitmap = BitmapFactory.decodeStream((InputStream)new URL(i).getContent()); 
```

# c# - 添加运行时菜单

> ID：11119380
> 
> 赞同：0
> 
> 时间：2012-06-20T12:17:15.323
> 
> 标签：c#, asp.net

我有一个母版页。我想向该页面运行时添加 3 个菜单项。如何在运行时将父菜单和子菜单添加到母版页？在前 2 个菜单项中，有 2 个子菜单项。我怎样才能做到这一点？

代码如下。

```
 public partial class MasterPage2 : System.Web.UI.MasterPage
{
protected void Page_Load(object sender, EventArgs e)
{
    LblDate.Text = DateTime.Today.ToString("dddd dd,MMM yyyy");
    lblusername.Text = Session["username"].ToString();
    if (Session["role"].ToString() == "1")
    {
        //Menu1.Items.Add(new MenuItem("System Information", "1", "", "~/home.aspx"));
        //Menu1.Items.Add(new MenuItem("Administration", "2", "", "~/home.aspx"));
        //Menu1.Items.Add(new MenuItem("Signout", "3", "", "~/Login.aspx"));

        //Menu1.FindItem("1").ChildItems.Add(new MenuItem("Search System Information", "", "", "~/SearchSystemInformation.aspx"));
        //Menu1.FindItem("1").ChildItems.Add(new MenuItem("Request New System", "", "", "~/RequestNewSystem.aspx"));

        //Menu1.FindItem("2").ChildItems.Add(new MenuItem("Manage System's Password", "", "", "~/SearchPasswordInformation.aspx"));
        //Menu1.FindItem("2").ChildItems.Add(new MenuItem("Manage Administrators", "", "", "~/ManageAdmins.aspx"));

        MenuItem ParentMenuItem = null;
        MenuItem ChildMenuItem = null;

        ParentMenuItem = CreateMenuItem("System Information", "~/home.aspx", "");

        ChildMenuItem = CreateMenuItem("Search System Information", "~/SearchSystemInformation.aspx", "");

        ParentMenuItem.ChildItems.Add(ChildMenuItem);

        ChildMenuItem = CreateMenuItem("Request New System", "~/RequestNewSystem.aspx", "");

        ParentMenuItem.ChildItems.Add(ChildMenuItem);

        Menu1.Items.Add(ParentMenuItem);

        ParentMenuItem = CreateMenuItem("Administration", "~/home.aspx", "");

        ChildMenuItem = CreateMenuItem("Manage System's Password", "~/SearchPasswordInformation.aspx", "");

        ParentMenuItem.ChildItems.Add(ChildMenuItem);

        ChildMenuItem = CreateMenuItem("Manage Administrators", "~/ManageAdmins.aspx", "");

        ParentMenuItem.ChildItems.Add(ChildMenuItem);

        Menu1.Items.Add(ParentMenuItem);

        ParentMenuItem = CreateMenuItem("Signout", "~/Login.aspx", "");
        Menu1.Items.Add(ParentMenuItem);

        //MenuItem mnuSystemInfo = new MenuItem();
        //mnuSystemInfo.NavigateUrl = "~/Home.aspx";
        //mnuSystemInfo.Text = "System Information";
        ////Menu1.Items.Add(mnuSystemInfo);

        //MenuItem mnuSearchSystemInfo = new MenuItem();
        //mnuSearchSystemInfo.NavigateUrl = "~/SearchSystemInformation.aspx";
        //mnuSearchSystemInfo.Text = "Search System Information";
        //mnuSystemInfo.ChildItems.Add(mnuSearchSystemInfo);
        //Menu1.Items.Add(mnuSystemInfo);
        //Menu1.Items.Add(mnuSearchSystemInfo);

    }
    else if(Session["role"].ToString()=="2")
    {
        //Menu1.Items.Clear();
        //Menu1.Items.Add(new MenuItem("System Information", "1", "", ""));
        //Menu1.Items.Add(new MenuItem("Signout", "3", "", ""));

        //Menu1.FindItem("1").ChildItems.Add(new MenuItem("Search System Information", "", "", "~/SearchSystemInformation.aspx"));
        //Menu1.FindItem("1").ChildItems.Add(new MenuItem("New System Request", "", "", "~/RequestNewSystem.aspx"));
    }
}

MenuItem CreateMenuItem(String text, String url, String toolTip)
{
    // Create a new MenuItem object.
    MenuItem menuItem = new MenuItem();

    menuItem.Text = text;
    menuItem.NavigateUrl = url;
    menuItem.ToolTip = toolTip;
    return menuItem;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:31:24.677

您可以在后面的代码中动态地将节点添加到菜单：

```
MenuItem mnuTest = new MenuItem();
mnuTest.NavigateUrl = "";
mnuTest.Text = "Test";
Menu1.Items.Add(mnuTest); 
```

您可以将子节点添加到菜单，如下所示：

```
MenuItem mnuTest = new MenuItem(); 
mnuTest.NavigateUrl = ""; 
mnuTest.Text = "Test"; 

MenuItem mnuTestChild = new MenuItem(); 
mnuTestChild.NavigateUrl = ""; 
mnuTestChild.Text = "Child Test"; 
mnuTest.ChildItems.Add(mnuTestChild); 
Menu1.Items.Add(mnuTestChild); 
```

# iphone - 在 glDrawArrays() 上调试 SIGKILL。苹果手机

> ID：11119382
> 
> 赞同：7
> 
> 时间：2012-06-20T12:17:32.017
> 
> 标签：iphone, ios, opengl-es, sigkill

我希望有人可以帮助我弄清楚发生了什么。

我正在使用`cocos2d framework`. 有时我会因为`SIGKIL`信号而停止我的代码。如果我按“继续”按钮，游戏会继续进行，没有任何问题。控制台日志很清楚（没有错误或警告消息）我在我的自定义类上得到它，该类使用`OpenGL`. 这段代码每秒执行大约 300 次，而我`SIGKILL`每 1-2 小时只执行一次。

这是一段代码：

```
glColor4f(1.f, 1.f, 1.f, 1.f);
i = 1;
glBindTexture(GL_TEXTURE_2D, curText);
glVertexPointer(2, GL_FLOAT, 0, screenCoord [i]);
glTexCoordPointer(2, GL_FLOAT, 0, textureCoord [i]);            
SIGKIL -->  glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

这是当时数组的内容：

```
(gdb) p *screenCoord[1]@8
$8 = {0, 296, 249.827072, 296, 0, -0, 249.827072, -0}
(gdb) p *textureCoord[1]@8
$12 = {0.456224144, 0.29296875, 0.700195312, 0.29296875, 0.456224144, 0.58203125, 0.700195312, 0.58203125} 
```

堆栈跟踪：

```
#0  0x123028a7 in <????> ()
#1  0x12301528 in <????> ()
#2  0x0a767092 in gldRenderFillPolygonPtr ()
#3  0x12300185 in <????> ()
#4  0x0a55c3e1 in gleDrawArraysOrElements_ExecCore ()
#5  0x0a555280 in glDrawArrays_IMM_Exec ()
#6  0x01522c7c in glDrawArrays ()
#7  0x0007e6bd in -[CLScrollingBack draw] at /MyProjects/_ROBOTS/RobotsAttack/AbductedAliens game template/CLScrollingBack.m:430
#8  0x001bfdaa in -[CCNode visit] ()
#9  0x001bfd7d in -[CCNode visit] ()
#10 0x001bfd7d in -[CCNode visit] ()
#11 0x0020f708 in -[CCDirectorIOS drawScene] ()
#12 0x00211bb4 in -[CCDirectorDisplayLink mainLoop:] () 
```

日志中的最后几行是：

```
2012-06-20 13:05:27.368 RobotsAttack![9487:207] cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from [2] to [4].
2012-06-20 13:05:27.368 RobotsAttack![9487:207] cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from [4] to [6].
Current language:  auto; currently objective-c 
```

如果有人能告诉我如何调试这种情况并确定发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T20:27:32.770

您可能知道这一点，但是当应用程序需要终止且应用程序中没有“崩溃”时，iOS 会发送 SIGKILL。一个明显的例子是当用户双击主页并按下应用程序上的红色减号并终止它时。

如果应用程序使用太多内存，也可以发送 SIGKILL。确保您正在记录内存警告，并在收到 SIGKILL 之前查看是否收到警告。如果是内存，则意味着您需要进行一些清理工作或某处存在内存泄漏（通过使用仪器很容易解决）。

此外，可能只是 Xcode 不稳定......这是一个不太完美的系统，所以尝试在关闭 xcode 时在模拟器上玩，看看它是否仍然在你身上崩溃。

# javascript - 在 javascript 中解析 {{1,2},{3,4}},{{1.1,1.2},{1.0, 1.0}, {1.3,1.3}}

> ID：11119385
> 
> 赞同：1
> 
> 时间：2012-06-20T12:17:36.023
> 
> 标签：javascript, regex, parsing

我有一个像 {{1,2},{3,4}}, {{1.1,1.2},{1.0, 1.0}, {1.3,1.3}} 这样的字符串我需要得到一个成对数组的数组 {number ， 数字}。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:23:53.007

由于输入几乎看起来像数组语法，您可以用方括号替换所有花括号以获得有效数组：

```
var string = '{{1,2}, {2,3}}';
JSON.parse(string.replace(/}/g, ']').replace(/\{/g, '['));
// >>> [[1,2],[2,3]] 
```

请注意，我曾经[`JSON.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)解析字符串。
如果您的输入包含多个`{..}`用逗号分隔的 ，请添加额外的大括号：`'[' + .. + ']'`。否则，你会得到类似 的东西`result = [1,2],[4,5];`，它不能提供所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:26:15.113

你为什么不把这个 { 替换成这个 [ 和这个 } 替换成这个 ] 然后将它解析为一个 json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:24:58.237

你可以通过多种方式做到这一点。您可以用方括号替换大括号，您可以自己构建一个解析器来查看每个字符并跟踪您是否打开或关闭了一个数组，或者您可以在字符串上运行多个循环，根据其中的模式将其拆分.

例如。第一个循环 - 在 }},{{ 上拆分，因为这只发生在顶层。

第二个循环 - 在 },{ 上拆分每个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:25:00.970

```
console.log(JSON.parse("["+("{{1,2},{3,4}}, {{1.1,1.2},{1.0, 1.0}, {1.3,1.3}}"
    .replace(/{/g,'[').replace(/}/g,']'))+"]")); 
```

# asp.net - fb-like 有些时间会随着 fb-share 插件消失？

> ID：11119388
> 
> 赞同：5
> 
> 时间：2012-06-20T12:17:43.153
> 
> 标签：asp.net, facebook, facebook-like, facebook-c#-sdk

在这里，我正在使用 asp.net Web 应用程序，我在我的网页中使用了 2 个 facebook 插件。

1.  脸书喜欢
2.  脸书分享

脸书分享：

```
<a name="fb_share" type="button" share_url="*******"></a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript">
</script> 
```

对于 Facebook 喜欢：

```
 <script>    
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
 </script>

<div id="fb-root"></div>            
<div class="fb-like" data-href="********" data-send="false" 
  data-layout="button_count" data-width="10" 
  data-show-faces="false" style="width:45px; height:20px;"></div> 
```

案例 1\. 当我使用单个代码时，上面的代码工作正常。

案例 2：当我同时使用 facebook 之类的插件时，它从页面上消失了。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:26:41.560

`share.php`仅当您避免使用随附的 javascript 并使用直接链接（出于以下原因我不会提供）时，才可以在一个页面上使用“赞”按钮和“分享”按钮。

如果您使用`http://static.ak.fbcdn.net/connect.php/js/FB.Share`它将破坏分享或喜欢按钮，根据 javascript 包含的顺序，第一个将起作用，第二个有问题。

需要考虑的几点：

*   分享按钮已**弃用**，请避免使用它！

    > Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。

*   [使用Feed Dialog](http://developers.facebook.com/docs/reference/dialogs/feed)和[JS-SDK](https://developers.facebook.com/docs/reference/javascript/)可以轻松替换分享按钮，它们提供了对分享功能的更多控制：
    `FB.ui({method: 'feed', link: document.location.href});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:26:17.400

请尝试 XFBML 版本的like 按钮：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
    <head>
        <title>Test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="language" content="de">
        <meta name="robots" content="index, follow">
    </head>
    <body>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=225116190942635";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

        <a name="fb_share" type="button" share_url="http://www.google.com"></a>
        <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript">
        </script>

        <!--<div class="fb-like" data-href="http://www.google.com" data-send="false" data-width="450" data-show-faces="false"></div>-->
        <fb:like href="http://www.google.com" send="false" width="450" show_faces="false"></fb:like>
    </body>
</html> 
```

# c# - 无法从 WP7 中的隔离存储中读取文件

> ID：11119390
> 
> 赞同：2
> 
> 时间：2012-06-20T12:17:48.197
> 
> 标签：c#, windows-phone-7

我的代码如下所示：

```
private void LayoutRoot_Loaded(object sender, System.Windows.RoutedEventArgs e)
    {
        // TODO: Add event handler implementation here.
        try
        {
            string fileName = NavigationContext.QueryString["id"];
            DataSaver<SampleData> mypersonaldata = new DataSaver<SampleData>();
            var PersonData = mypersonaldata.LoadMyData(fileName);

            txtName.Text = PersonData.Name;
            txtAge.Text = PersonData.Age;
            txtheight.Text = PersonData.Height;
            txtMammals.Text = PersonData.FavMammals;
            txtBirds.Text = PersonData.FavBirds;
            txtReptiles.Text = PersonData.FavReptiles;
        }
        catch
        {
            MessageBox.Show("Unable to read!");
        }
    } 
```

这是我加载数据的代码：

```
public MyDataType LoadMyData(string sourceName)
{
    MyDataType retVal = default(MyDataType);
    string TargetFileName = String.Format("{0}/{1}.dat", TargetFolderName, sourceName);
    if (IsoFile.FileExists(TargetFileName))
        using (var sourceStream = IsoFile.OpenFile(TargetFileName, FileMode.Open))
        {
            retVal = (MyDataType)_mySerializer.ReadObject(sourceStream);
        }
    return retVal;
} 
```

我能够访问 DataSaver.cs 和 SampleData.cs 的成员。我也得到了正确的文件名，但无法读取数据。请帮忙！

```
 public void SaveMyData(MyDataType sourceData) 
    { 
        string TargetFileName = String.Format("{0}/{1}.dat", TargetFolderName, targetFileName); 

        if (!IsoFile.DirectoryExists(TargetFolderName)) 
            IsoFile.CreateDirectory(TargetFolderName); 

        try 
        { 
            using (var targetFile = IsoFile.CreateFile(TargetFileName)) 
            { 
                _mySerializer.WriteObject(targetFile, sourceData); 
            } 
        } 
        catch (Exception e)
        {
            IsoFile.DeleteFile(TargetFileName); 
        }
    } 
```

上面的代码用于将数据保存到独立存储中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:47:22.460

这两种静态方法应该可以帮助您对 WP 隔离存储进行任何读/写操作。

```
public static void WriteStreamToFile(MemoryStream stream, string baseFileName, string extension, out string realFileName)
    {
        realFileName = String.Empty;

        if (stream != null)
            using (IsolatedStorageFile appStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                baseFileName = GlobalSettings.NormalizeFileName(baseFileName);

                realFileName = String.Concat(baseFileName, extension);

                using (IsolatedStorageFileStream fileStream = appStorage.OpenFile(realFileName, FileMode.Create, FileAccess.Write))
                    stream.WriteTo(fileStream);

            }
    }

    public static void ReadStreamFromFile(MemoryStream stream, string fileName)
    {
        if (stream != null)
            using (IsolatedStorageFile appStorage = IsolatedStorageFile.GetUserStoreForApplication())
            using (IsolatedStorageFileStream fileStream = appStorage.OpenFile(fileName, FileMode.Open, FileAccess.Read))
                fileStream.CopyTo(stream);
    } 
```

然后，您可以序列化您想要的所有内容：

```
public static object DeserializeObject(string fileName, Type objectType)
    {
        using (IsolatedStorageFile appStorage = IsolatedStorageFile.GetUserStoreForApplication())
        using (IsolatedStorageFileStream fileStream = appStorage.OpenFile(fileName, FileMode.Open, FileAccess.Read))
        using (TextReader xmlReader = new StreamReader(fileStream))
        {
            XmlSerializer xmlSerializer = new XmlSerializer(objectType);

            return xmlSerializer.Deserialize(xmlReader);
        }
    }

    public static void SerializeObject(string fileName, object target, Type objectType)
    {
        using (IsolatedStorageFile appStorage = IsolatedStorageFile.GetUserStoreForApplication())
        using (IsolatedStorageFileStream fileStream = appStorage.OpenFile(fileName, FileMode.Create, FileAccess.Write))
        using (TextWriter xmlWriter = new StreamWriter(fileStream))
        {
            XmlSerializer xmlSerializer = new XmlSerializer(objectType);

            xmlSerializer.Serialize(xmlWriter, target);
        }
    } 
```

# objective-c - 角落里的 UIPageViewController 脊椎

> ID：11119398
> 
> 赞同：1
> 
> 时间：2012-06-20T12:18:24.540
> 
> 标签：objective-c, ios, cocoa-touch, uipageviewcontroller

是否可以让 UIPageViewController 将页面转到角落，而不是屏幕边缘？

我知道它不是按原样提供的，但可能有一些技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:19:08.410

可以将其设置在屏幕的每一侧或仅在视图的中间

# c# - 按身份证号删除行

> ID：11119402
> 
> 赞同：0
> 
> 时间：2012-06-20T12:19:03.697
> 
> 标签：c#, sql-server-ce, delete-row

我创建了一个按钮来从数据库中删除选定的行。

我的问题是删除正确的行。我想删除`231`标识列中包含的行，即使它位于我的数据库的第一行。

```
myDataSet.Tables["myTable"].Rows[**here I want to address the identity nr from column 1.**].Delete(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:34:37.187

Try this:

```
myDataSet.Tables["myTable"].Select("ID = 231").FirstOrDefault().Delete(); 
```

Be sure to have "using System.Linq;" at the top of the file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:09:40.883

我尝试尝试不同的解决方案，但这是我设法工作的解决方案。我是整体编程的初学者，所以可能不是最好的解决方案，但它可以满足我的要求。

```
SqlCeCommand myCmd = new SqlCeCommand("DELETE From myTable Where ordreID ="+myInt, myConnection); myCmd.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:29:07.843

尝试这个 ：

```
string del = "DELETE From TableName Where ColumnName =@ColumnName";
        SqlDataAdapter a = new SqlDataAdapter(del, strinconnection);
        a.SelectCommand.Parameters.AddWithValue("@ColumnName", TheValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:23:53.763

您将需要使用[MSDN](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx)`DataTable.Select`上描述的方法来获取您需要删除的那一行。

# php - 无法上传我的文件

> ID：11119406
> 
> 赞同：0
> 
> 时间：2012-06-20T12:19:21.070
> 
> 标签：php, mysqli

我有这个表格，我正在尝试上传我的图片，但每次我“更新”页面返回正常并且没有任何内容上传到我的文件夹“ProfilesImages”，这是我的错。

```
<?php
if(isset($_POST['update'])){
    $ProfileImage = $_FILES['ProfileImage']['name'];
    $Fname = clean_text($_POST['Fname']);
    $Lname = clean_text($_POST['Lname']);
    $Uemail = $_POST['Remail'];
    $Uwebsite = $_POST['website'];
    $Ugender = clean_text($_POST['select']);
    $Ubirth = (int)$_POST['birth'];
    $UWork = clean_text($_POST['company']);
    $Uabout = clean_text($_POST['aboutMe']);
    $Uhobby = clean_text($_POST['hobby']);
    $Uprivatie = $_POST['radio'];
    $target = "includes/ProfilesImages/";
    $target = $target . basename ($_FILES['ProfileImage']['name']);
    $updateUserData = "UPDATE loginaccess SET
        profile_image='".$ProfileImage."',
        FUname = '".$Fname."',
        LUname = '".$Lname."',
        Email = '".$Uemail."',
        Website = '".$Uwebsite."',
        gender = '".$Ugender."',
        birth = '".$Ubirth."',
        work = '".$UWork."',
        about = '".$Uabout."',
        hobby = '".$Uhobby."',
        privatie = '".$Uprivatie."' where Email='".$_SESSION['email']."' AND active=1";
    if(move_uploaded_file($_FILES['ProfileImage']['tmp_name'], $target))
    {
            echo "<p>The image you have attached was uploaded successfully</p>";
    }
    else
    {
            echo " <p><strong>Notes</strong> : no image was attached to the registration form..! </p>";
    }
    $updateUserDataResults= $db->query($updateUserData) or die("$db->error");
    if($updateUserDataResults){
            header("Location:index.php?cat=user&learn_id=1");
    }
}
?> 
```

任何帮助请...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:23:57.190

请务必在您的表单中设置 fileupload enctype

```
<form action="index.php" method="post" enctype="multipart/form-data"> 
```

否则文件将不会上传

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:36:18.057

根据我对这段代码的理解，我认为您在这里所做的是将图像名称上传到 sql 中，而您根本没有将图像文件上传到文件夹中。尝试使用此代码将图像文件上传到您想要的文件夹，在这种情况下，上传文件夹：

```
//if a replacement file is selected
//delete old file from filesystem
$sql2 = "Select item_image From Items Where item_id = '".$_POST['item_id']."'";
$stmt2 = $dbh->prepare($sql2);
    $stmt2->execute();
$result = $stmt2->fetchAll();
$file = strval($result[0]["item_image"]);
unlink($file);

//Uploads new picture file to filesystem
if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/pjpeg")
    || ($_FILES["file"]["type"] == "image/jpg")
    || ($_FILES["file"]["type"] == "image/png"))
    && ($_FILES["file"]["size"] < 20000000)){
if ($_FILES["file"]["error"] > 0){
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
                                  }//if
else{
    if (file_exists("upload/" . $_FILES["file"]["name"])){
         echo "<strong>That file is already on our database. Please choose a different file     or rename the file that was just rejected and resubmit your order.</strong>";}//if
    else{
        move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]  ["name"]);
        echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
    echo "uploaded new picture to filesystem" . "<br />"; 
```

它不是特定于您的姓名和文件，而是检查它，它应该可以工作。您可能应该使用它来删除您更新的旧文件。

# wcf - WCF 中的操作合同数

> ID：11119407
> 
> 赞同：1
> 
> 时间：2012-06-20T12:19:28.757
> 
> 标签：wcf, visual-studio-2010

这可能是一个愚蠢的问题，但我想知道其他专业人士如何处理运营合同的清单数量。我正在开发 WCF Web 服务，所以我只有四个公开的操作合同。假设我在 IWcfService 中有 500 个操作合同。我应该只在下面的列表中列出所有 500 份合同，还是我可以进行分类以使事情更容易维护？

```
[ServiceContract]
public interface IWcfService
{
    [OperationContract]
    String CheckService();

    [OperationContract]
    String GetMessage();

    [OperationContract]
    svcEmployeeDetail GetEmployeeDetail(string userID, string userPW,string employeeID);

    [OperationContract]
    List<svcEmployeeWorkHistory> GetEmployeeWorkHistory(string userID, string userPW, string employeeID);
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:25:30.057

如果您的服务有 500 种方法，我建议您需要基于对类似事物进行操作的方法创建一些新服务。

一项服务上的 500 种方法会让消费者感到困惑，并且会带来很大的维护问题，更不用说违反[单一责任原则了](http://en.wikipedia.org/wiki/Single_responsibility_principle)

# php - php array_merge 不适用于 cookie id

> ID：11119410
> 
> 赞同：0
> 
> 时间：2012-06-20T12:19:44.637
> 
> 标签：php, cookies, shopping-cart, array-merge

我的 php merge_array 有问题，我正在编写一个 cookie，它从 html 表单中的按钮获取元素 id，然后我制作了一个 cookie setcookie("info", $_REQUEST["ELEMENT_ID"]+1, time()+ 3600）。我想编写一个数组，将 $array1 与表单中的元素 id 和 $array2 合并，以获取 cookie 元素。当我单击页面上的购买按钮时出现问题，我总是在数组中有 2 个元素，新元素和 cookie 数组中的一个。Array ( [0] => [1] => Array ( [info] => 16 我正在寻找包含不止 2 个元素的数组 $result，这样我就可以使用 id 来获取姓名、照片和其他属性购物车

```
<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?
$array1=array($_REQUEST["ELEMENT_ID"]);

if(!isset($_COOKIE["info"])){
    setcookie("info", $_REQUEST["ELEMENT_ID"]+1, time()+3600);
    $w = $_REQUEST["ELEMENT_ID"]+1;
    print_r($_COOKIE);
}
echo"<br/>";
$array2=array($_COOKIE);
$result= array_merge($array1, $array2);
print_r($result); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:42:49.160

编辑：

好的，现在我更好地理解了你想要做什么，这就是我的建议。由于您希望将历史数据存储在 cookie 中并且希望将其保存在一个数组中，因此您可以将数据存储为 cookie 中的序列化 id 数组。您现在要做的是获取当前的 ELEMENT_ID，向其中添加一个，然后将该值存储到 cookie 中，该 cookie 将覆盖已经存在的内容。所以我会用这个替换你所有的代码：

```
<?php
    // do your checks
    if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();

    // 1: if cookie exists, grab the data out of it
    $historical_element_ids = array(); // initialize the variable as an array
    if(isset($_COOKIE['info'])){
        // retrieve the previous element ids as an array
        $historical_element_ids = unserialize($_COOKIE['info']);
    }

    // 2: add the new id to the list of ids (only if the id doesn't already exist)
    // the cookie will remain unchanged if the item already exists in the array of ids
    if(!in_array($_REQUEST['ELEMENT_ID'], $historical_element_ids)){
        $historical_element_ids[] = $_REQUEST['ELEMENT_ID']; // adds this to the end of the array

        // 3: set the cookie with the new serialized array of ids
        setcookie("info", serialize($historical_element_ids), time()+3600);
    }

    // display the cookie (should see a serialized array of ids)
    print_r($_COOKIE);
    echo"<br/>";

    // accessing the cookie's values
    $result = unserialize($_COOKIE['info']);
    print_r($result);
?> 
```

# c# - 关闭窗口并使用 Mediator 模式从 ViewModel 中打开另一个窗口

> ID：11119412
> 
> 赞同：0
> 
> 时间：2012-06-20T12:19:48.520
> 
> 标签：c#, wpf, design-patterns, mvvm

当用户输入正确的密码时，登录窗口应该关闭，主窗口应该打开。我想从 ViewModel 执行此操作，但是，ViewModel 可能对视图一无所知。

我已经搜索了很多，显然最好的方法是使用中介模式。我了解这种模式是如何工作的，但是在这种情况下如何有效地使用它呢？

中介将需要：
- 对 View
的引用 - 对 ViewModel 的引用

ViewModel 将需要对中介的引用。

我需要在哪里创建中介？我无法在 ViewModel 中执行此操作，因为我无法设置对视图的引用。在视图中创建中介是一种选择，因为我可以从 DataContext 属性中获取 ViewModel，但是我仍然需要将中介传递给 ViewModel，这只会使代码更加困难。

**如何正确使用调解器打开/关闭窗口？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:40:10.617

中介者模式用于视图模型之间的通信，而不是视图和视图模型之间的通信。

如果您想处理视图模型中的对话框，您可以使用这样的对话框[服务](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)。

不过，当我想创建一个应用程序登录对话框时，我会这样做。

在 app.xaml.cs 中的 OnStartup()

*   创建登录视图
*   创建登录视图模型
*   将 loginview 的 datacontext 设置为 loginviewmodel
*   显示登录视图
*   编辑：loginviewmodel 检查密码等等，如果没问题，则在 loginviewmodel 中设置状态，例如 IsValidUser=true;
*   检查结果
*   编辑：如果 dialogresult == "OK" 和 IsValidUser=true
*   打开的主窗口

这是我的一些代码

```
 protected override void OnStartup(StartupEventArgs e)
    {
        //...
        ShutdownMode = ShutdownMode.OnExplicitShutdown;
        var vm = new LoginVM();
        var loginwindow = new LoginWindow();
        loginwindow.DataContext = vm;

        if (!result.HasValue || !result.Value || !IsValidUser)
        {
             Shutdown();
             return;
        }   

        //...
        var mainWindow = new MainWindow(new MainWindowViewModel(vm.Settings));

        mainWindow.Loaded += (sender, args) => splashScreen.Close();
        this.MainWindow = mainWindow;
        ShutdownMode = ShutdownMode.OnMainWindowClose;
        this.MainWindow.Show();

 } 
```

ps：这是我的应用程序中我首先使用视图的唯一部分。其余的都是先查看模型，这对我来说在做 mvvm 时要容易得多。

# objective-c - UIView 内的 UIImageView 上的 UITapGestureRecognizer 仅识别点击图像的一小部分

> ID：11119416
> 
> 赞同：0
> 
> 时间：2012-06-20T12:20:02.427
> 
> 标签：objective-c, ios, uiimageview, touch, uitapgesturerecognizer

我`UITapGestureRecognizer`在`UIImageView`里面`UIView`只能识别图像一小部分的点击。我使用以下代码：

```
// definig inside @interface call inside .h
UITapGestureRecognizer* languageSelector;

// initializing inside initWithFrame
UIImage* langSelPopImg = [UIImage imageNamed:@"lang_EN_pop.png"];
langPopView = [[UIImageView alloc] initWithImage:langSelPopImg];
CGRect positioningHelper = CGRectMake(0, langSelPopImg.size.height, langSelImg.size.width, langSelImg.size.height);
langSelActiveLanguageView.frame = positioningHelper;
self.repositioningY = langSelPopImg.size.height;
self.bounds = CGRectMake(0, 0, langSelImg.size.width, langSelImg.size.height + langSelPopImg.size.height);
self.clipsToBounds = YES;

// setting it up from inside an animateWithDuration/completion call:
languageSelector = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(languageSelectorTapped:)];
[langPopView addGestureRecognizer:languageSelector];
langPopView.userInteractionEnabled = YES;

// the method that only detects taps betwen y = 69 and y = 93
-(void)languageSelectorTapped:(UITapGestureRecognizer *)sender
{

    CGPoint location = [languageSelector locationInView:languageSelector.view];
    CGPoint touchPoint = [(UITapGestureRecognizer*)sender locationInView:langPopView];

    NSLog(@"x:%f/y:%f", touchPoint.x, touchPoint.y);
    // ...
} 
```

我在这里做错了什么？谢谢！！！

# css - HTML DIV 和填充问题

> ID：11119419
> 
> 赞同：3
> 
> 时间：2012-06-20T12:20:05.187
> 
> 标签：css, html, padding

我有一个 div[class="container"] 里面是 div[class="item"] 像：

```
<style type="text/css">
.container{
    height:50vh;
    width: 32vw;
    text-align: center;
    color: #fff;
    /*padding: 30px;*/
    border: 1px solid rgba(0, 0, 0, 0.13);
}

.imgitem {
    height:100%; /*tried with "calc(50vh - 60px)" too*/
    width: 100%;
}
</style>
<div class="container">
    <div class="imgitem">
        <img src="flower_img.png" style="max-height:100%; max-width:100%" />
    </div>
</div> 
```

我所期待的是“容器”应该保留 CSS 中给出的宽度（32vw）和高度（50vh）。但是一旦我向容器添加填充，它的大小就会增加。

现在我想要实现的是：

1.  外部容器应具有给定的宽度和高度。
2.  容器必须有填充`30px`。填充后容器宽度/高度不应增加。
3.  具有“imgitem”类的内部 div 应该具有剩余的宽度（32vw - 30px -30px），我的意思是（容器：宽度 - 容器：填充左 - 容器：填充右）。身高也是一样。

对于布局，我附上一张图片： ![布局](../Images/28ec63ed96ecc576ed8e819027ad6e10.png)

谁能帮我解决这个问题。我已经花了一整天的时间在做这件事，但什么都没有。

**[它特定于 IE10，metro 应用程序]**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:28:38.420

您可以使用 css3 **-moz-box-sizing:border-box;** 属性以获得您想要的结果，它不会影响您的宽度和高度......使用填充......

**HTML**

```
<div>demo demo</div> 
```

**CSS**

```
div {
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */
    background: none repeat scroll 0 0 red;
    height: 150px;
    padding: 10px;
    width: 150px;
} 
```

看演示：- [http://jsfiddle.net/qpdsZ/10/](http://jsfiddle.net/qpdsZ/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:27:58.203

我想我明白你在说什么。使用边距而不是填充。那应该可以解决您的问题。它不会增加您的盒子周围的区域或其尺寸。

如果你有 32 x 50 并添加填充，你会得到 62 x 80。保证金不会这样做。

否则，实际上要在填充空间中有 30px，您的尺寸将需要更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:40:43.300

你也可以这样做。

```
.container{
 height:50px; 
width: 32px;
padding:5px;
color: green;

}

.imgitem {
height:30px; /*tried with "calc(50vh - 60px)" too*/
width: 30px;
padding: 5px;
color:red;
}
 img{
text-align: center;
   height :20px;
 width: 20px;
} 
```

我基本上是手动设置值。如果您愿意，您也可以采用这种方法。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-25T16:04:07.047

您可以使用`box-sizing`属性来克服这种情况。

```
box-sizing : border-box; 
```

# c# - ObjectdataSource：方法参数为枚举时无法使用向导

> ID：11119426
> 
> 赞同：0
> 
> 时间：2012-06-20T12:20:32.500
> 
> 标签：c#, .net, objectdatasource

这是我的问题。

我有一个用 DataObject 装饰的 Factory 类和一个用 Select 装饰的 Systems 方法。它有一个参数是我创建的枚举，所以它看起来像：

命名空间 BLL {

```
[DataObject]
public class Factory {

    [DataObjectMethod(DataObjectMethodType.Select)]
    public List<WaterSystem> Systems(PermissionLevel permission) {

        ...
    }
} 
```

}

我的问题是，每当我尝试将此方法与 Objectdatasource 向导一起使用时，它都会崩溃……实际上，它什么也没做。我能够选择我的 BusinessObject，Factory，它没有做任何其他事情，当我应该选择 select 方法时它消失了。

我已经测试过，只有当参数是枚举时才会发生。我能做些什么？

我的一般想法是，枚举将代表我想赋予要获取的数据的可见性级别，所以我需要它或可替换的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:40:19.153

塞尔吉奥，我今天不得不处理这种情况，我能够成功地在`<SelectParameters>`集合中以声明方式配置枚举值：

```
<asp:Parameter Name="permission" Type="Object" DefaultValue="ReadOnly" /> 
```

重要的是属性中提到的枚举值是`DefaultValue`枚举键的文本表示。如果必须动态分配此值，您可以使用`<asp:ControlParameter />`几乎相同的属性。

注意：这里的“ReadOnly”值是根据我对`PermissionLevel`枚举类型实现的假设。

```
public enum PermissionLevel { ReadOnly, Modify } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:54:13.033

好吧，事实证明，我只是不必依赖向导来做到这一点。我最终手动完成。我只在 objectdatasource 和选择事件上指定了参数名称，我设置了参数。

# c++ - (C++) 从文本文件中读取数字

> ID：11119429
> 
> 赞同：2
> 
> 时间：2012-06-20T12:20:48.660
> 
> 标签：c++, file, digit

我有一个如下所示的文本文件：

> 73167176531330624919225119674426574742355349194934 96983520312774506326239578318016984801869478851843 85861560789112949495459501737958331952853208805511

等等。总共20行。我想要做的是从文本文件中读取每个数字并将它们放入一个整数数组中（一个元素=一个数字）。我怎样才能从这个文本文件中只读取一个数字，而不是整行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T12:45:11.740

^(有几种方法可以完成您正在寻找的东西，在这篇文章中，我将描述三种不同的方法。他们三个都假设您使用 an 打开文件，`std::ifstream ifs ("filename.txt")`并且您的“*数组*”实际上是一个声明为`std::vector<int> v`.)

^(在这篇文章的最后，还有一些关于如何加快插入向量的建议。)

* * *

### 我想保持简单..

最简单的方法是`char`一次读取一个`operator>>`，然后`'0'`从返回的值中减去。

标准保证`'0'`through`'9'`是顺序的，并且由于 a`char`只是以不同方式打印的数值，因此可以隐式转换为`int`.

```
char c;

while (ifs >> c)
  v.push_back (c - '0'); 
```

* * *

### 我喜欢 STL，讨厌写循环。

这将被许多人视为“ *C++ 方式来做到这一点*”，特别是如果您正在与 STL-fanboys 交谈，尽管它需要更多的代码来编写..

```
#include <algorithm>
#include <functional>
#include <iterator>

...

std::transform (
  std::istream_iterator<char> (ifs),
  std::istream_iterator<char> (), 
  std::back_inserter (v),
  std::bind2nd (std::minus<int> (), '0')
); 
```

* * *

### 我不想写循环，但为什么不使用 lambda？[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")

```
#include <algorithm>
#include <functional>
#include <iterator>

...

std::transform (
  std::istream_iterator<char> (iss),
  std::istream_iterator<char> (),
  std::back_inserter (v),
  [](char c){return c - '0';}
); 
```

* * *

### 我会`std::vector`在每次插入时重新分配存储空间吗？

很可能是。为了加快速度，您可以在开始进行任何插入之前在向量中保留存储空间，如下所示。

```
ifs.seekg (0, std::ios::end); // seek to the end of your file
v.reserve (ifs.tellg ()    ); // ifs.tellg () -> number of bytes in it
ifs.seekg (0, std::ios::beg); // seek back to the beginning 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:23:05.663

```
char digit;
std::ifstream file("digits.txt");
std::vector<int> digits;
// if you want the ASCII value of the digit.
1- while(file >> digit) digits.push_back(digit);
// if you want the numeric value of the digit.
2- while(file >> digit) digits.push_back(digit - '0'); 
```

# php - 我在我的模型类中正确地执行 SQL 语句吗？

> ID：11119430
> 
> 赞同：0
> 
> 时间：2012-06-20T12:20:49.610
> 
> 标签：php, sql, model-view-controller

我想就设计理念寻求建议。我创建了自己的 MVC 框架。

对于模型类，这些是主要从我的数据库中检索数据的类。

在一个类中，例如（`User`），我有以下方法

*   `get_user`.
*   `get_recent_activity`.

基本上例如在`get_recent_activity`方法中，我将有一个执行执行以获取数据的 sql 语句。

我正在考虑另一种设计，即`User`用一个类扩展每个类（例如）`Sql`。在这个类中，它将包含所有 sql 必要的查询。

例如，使用 sql 类的插入查询将类似于

```
$sqlqueries->select("table","user=john&email=john@hotmail.com"); 
```

这会是一个更好的设计吗？为了维护还是什么？我担心性能问题，因为现在要从方法中获取数据，首先 sql 类中的 select 方法需要先处理变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:40:21.190

您提到的 Sql 类对我来说看起来像一个存储库模式。Indeed 具有维护优势，但也有助于单元测试、更好的关注点分离和更简洁的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T12:49:54.890

这是我在使用数据库时如何设计自己的框架类的个人帐户。

通常，在设计 MVC 框架时，我会列出开发类的两个核心概念：

*   管理各个方面的单个数据库类，例如查询构建、行计数返回、插入 ID 等。
*   一个接口数据类，以确保每个类保持一致（例如，每个类必须具有所有四个[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)操作）

**数据库类**

我的数据库类通常如下所示。您会注意到底部有您指定的突变函数。这些专门设计用于从类本身**设置**和**获取数据。**有少量验证（`if(is_resource(...))`在 get_connection 中），尽管我听说这种代码应该在模型级别。

```
 public $error;

    private $location = '';
    private $username = '';
    private $password = '';
    private $database = '';

    public function __construct()
    {
        $connection = mysql_connect($this->location,$this->username,$this->password);

        $this->set_connection($connection);

        $db_select = mysql_select_db($this->database,$this->get_connection());
    }

    public function query()
    {
        $query = mysql_query($this->query,$this->connection);

        $this->set_insert_id(mysql_insert_id($this->connection));

        switch(substr(strtolower($this->query),0,6))
        {
            case 'select':
                $this->set_row_count(mysql_num_rows($query));

                $row_count = $this->get_row_count();

                if($row_count == 0)
                {
                    $this->set_results(0);
                }
                else
                {
                    while($result = mysql_fetch_assoc($query))
                    {
                        $results = $this->get_results();
                        $results[] = $result;
                        $this->set_results($results);
                    }
                }
            break;
            case 'insert':
            case 'update':
            case 'delete':
            case 'replace':
            default:
                $this->set_results(($query === true));
            break;
        }
    }

    public function get_query()
    {
        return $this->query;
    }

    public function set_query($query)
    {
        $this->query = $query;
    }

    public function get_insert_id()
    {
        return $this->insert_id;
    }

    public function set_insert_id($insert_id)
    {
        if(is_numeric($insert_id))
        {
            $this->insert_id = $insert_id;
        }
    }

    public function get_results()
    {
        return $this->results;
    }

    public function set_results($results)
    {
        $this->results = $results;
    }

    public function get_row_count()
    {
        return $this->row_count;
    }

    public function set_row_count($row_count)
    {
        if(is_numeric($row_count))
        {
            $this->row_count = $row_count;
        }
    }

    public function get_connection()
    {
        return $this->connection;
    }

    public function set_connection($connection)
    {
        if(is_resource($connection))
        {
            $this->connection = $connection;
        }
        else
        {
            $this->connection = false;
        }
    }
}
?> 
```

**数据类**

接口数据类只是其他类的指南，因此非常简单。使用这种方法时，很容易使用您的数据进行操作。

```
<?php
interface Data {
    public function create();
    public function read();
    public function update();
    public function delete();
}
?> 
```

**一个示例类**

这是一个示例类，我通常会与前面提到的操作数据库和数据类的类一起使用。使用典型的 CRUD 操作时，我调用 Database 类，设置查询，查询数据库，然后返回结果。这很简单，任何其他进一步的要求都可以附加到每个函数中。

```
<?php
require_once('classes/class.Data.php');
require_once('classes/class.Database.php');
class Settings implements Data {
    private $profile_id;
    private $settings = array();

    public function create()
    {
        $settings_instance = new Database;
        $sql = 'INSERT INTO settings (' . implode(',',array_keys($this->settings)) . ') VALUES ("' . implode('","',array_values($this->settings)) . '");';
        $settings_instance->set_query($sql);
        $settings_instance->query();
        return $settings_instance->get_results();
    }

    public function read()
    {
        $settings_instance = new Database;
        $sql = 'SELECT * FROM settings WHERE profile_id = "' . $this->profile_id . '"';
        $settings_instance->set_query($sql);
        $settings_instance->query();

        $settings_results = $settings_instance->get_results();

        if($settings_results)
        {
            $this->set_settings($settings_results[0]);
        }
    }

    public function update()
    {
        $keys = array_keys($this->settings);
        $values = array_values($this->settings);
        $settings_instance = new Database;
        $sql = 'UPDATE settings SET ';
        foreach($keys as $index => $key)
        {
            if($keys[$index] == "profile_id")
                continue;
            $sql .= $keys[$index] . ' = "' . $values[$index] . '", ';
        }
        $sql = rtrim($sql,', ');
        $sql .= ' WHERE profile_id = "' . $this->profile_id . '"';
        $settings_instance->set_query($sql);
        $settings_instance->query();
        return $settings_instance->get_results();
    }

    public function delete()
    {
        $settings_instance = new Database;
        $sql = 'DELETE FROM settings WHERE profile_id = "' . $this->profile_id . '"';
        $settings_instance->set_query($sql);
        $settings_instance->query();
        return $settings_instance->get_results();
    }

    public function get_profile_id()
    {
        return $this->profile_id;
    }

    public function set_profile_id($profile_id)
    {
        if(is_numeric($profile_id))
        {
            $this->profile_id = $profile_id;
        }
    }

    public function get_setting($index)
    {
        if(isset($this->settings[$index]))
        {
            return $this->settings[$index];
        }
    }

    public function set_setting($index,$new_value)
    {
        if(isset($this->settings[$index]))
        {
            $this->settings[$index] = $new_value;
        }
    }

    public function get_settings()
    {
        return $this->settings;
    }

    public function set_settings($settings)
    {
        if(is_array($settings))
        {
            $this->settings = $settings;
        }
    }

    public function get_setting_types()
    {
        return $this->setting_types;
    }

    public function set_setting_types($setting_types)
    {
        if(is_array($setting_types))
        {
            $this->setting_types = $setting_types;
        }
    }
}
?> 
```

**一些示例代码**

这是一些与此方法一起使用的示例模型代码。我觉得这很有可读性。它将在数据库中创建一个 profile_id = 1 的新设置行。

```
require_once('class.Settings.php');
$Settings = new Settings;
$Settings->set_profile_id(1);
$Settings->create(); 
```

# sql - 参数的性能不如硬编码值

> ID：11119432
> 
> 赞同：7
> 
> 时间：2012-06-20T12:20:51.590
> 
> 标签：sql, sql-server, tsql, sql-server-2005, stored-procedures

我有一个执行非常糟糕的存储过程。当我声明一个变量时，设置它的值，然后在 where 子句中使用它，该语句需要一个多小时才能运行。当我在 where 子句中对变量进行硬编码时，它会在不到一秒的时间内运行。

我开始通过执行计划来研究它的问题所在。看起来当我尝试将一些声明的变量传递给它时，执行计划会创建一些哈希匹配，因为它从使用 UNION 和公共表表达式的视图中选择值。

```
/************* 存储过程的开始 ******************/
创建程序 GetFruit
  @ColorId 大整数，
  @SeasionId 大整数
重新编译
作为
开始

选择
    一个名字
从
    [Apple_View] A /* 这是下面的视图 */
    INNER JOIN [水果] F
        开（F.ColorId = @ColorId
            AND A.FruitId = F.FruitId)          
在哪里
    (A.ColorId = @ColorId
    和
    A.SeasonId = @SeasonId)

结尾
/************* 存储过程结束 **************/

/************* 视图开始 ***************/
WITH Fruits (FruitId, ColorId, SeasonId) AS
(
    -- 主播成员
    选择
        F.FruitId
        ,F.ColorId
        ,F.SeasonId
    从
        ((  
            选择不同的
                EF.FruitId
                ,EF.ColorId
                ,EF.SeasonId
                ,EF.ParentFruitId
            从
                异国水果英孚
                INNER JOIN水果FR
                    ON FR.FruitId = EF.FruitId
        联盟
            选择不同的
                SF.FruitId
                ,SF.ColorId
                ,SF.SeasonId
                ,SF.ParentFruitId               
            从
                臭果SF
                INNER JOIN水果FR
                    ON FR.FruitId = SF.FruitId
        联盟
            选择不同的
                CF.FruitId
                ,CF.ColorId
                ,CF.SeasonId
                ,CF.ParentFruitId
            从
                疯狂水果CF
                INNER JOIN水果FR
                    ON FR.FruitId = CF.FruitId

            ）） F

    联合所有

    -- 递归父果
    选择
        FS.FruitId
        ,FS.ColorId
        ,FS.SeasonId
        ,FS.ParentFruitId
    从
        水果FS
        INNER JOIN MasterFruit MF
            ON MF.[ParentFruitId] = fs.[FruitId]
)

选择不同的
    FS.FruitId
    ,FS.ColorId
    ,FS.SeasonId
    从
        水果FS

/************* 视图结束 ***************/

/* 执行 */
执行 GetFruit 1,3

```

如果我使用设置的值运行存储过程，则需要一个多小时，这是执行计划。 ![带变量](../Images/d2a67e45e6960c7e8eea5519d6e3c0a4.png)

如果我运行存储过程删除 DECLARE 和 SET 值并将 Where 子句设置为以下语句，它将在不到一秒的时间内运行，这是执行计划：

```
WHERE(A.ColorId = 1 AND  A.SeasonId = 3) 
```

![硬编码的where子句](../Images/a5a7de6b06c4dd1ac6498e8ce290c75d.png)

注意硬编码变量如何使用索引，而第一个变量使用哈希集。这是为什么？为什么 where 子句中的硬编码值与声明的变量不同？

**--------这是在@user1166147的帮助下最终完成的--------**

我将存储过程更改为使用 sp_executesql。

```
创建程序 GetFruit
  @ColorId 大整数，
  @SeasionId 大整数
重新编译
作为
开始

声明 @SelectString nvarchar(max)

SET @SelectString = N'SELECT
    一个名字
从
    [Apple_View] A /* 这是下面的视图 */
    INNER JOIN [水果] F
        开（F.ColorId = @ColorId
            AND A.FruitId = F.FruitId)          
在哪里
    (A.ColorId = ' + CONVERT(NVARCHAR(MAX), @ColorId) + '
    和
    A.SeasonId = ' + CONVERT(NVARCHAR(MAX), @SeasonId) + ')'

执行 sp_executesql @SelectString

结尾

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:31:22.283

**编辑摘要** 根据 Damien_The_Unbeliever 的要求

目标是在创建计划之前获取有关 SQL 变量值的最佳/最多信息，通常参数嗅探会执行此操作。在这种情况下，参数嗅探被“禁用”可能是有原因的。在没有看到实际代码的更好表示的情况下，我们无法真正说出解决方案是什么或问题存在的原因。尝试以下方法来强制受影响区域使用实际值生成计划。

**更多细节的长版**

这是您实际的存储过程吗？你的参数有默认值吗？如果是这样，它们是什么？

参数嗅探可以提供帮助 - 但它必须具有典型​​的参数值才能很好地创建计划，如果没有，将不会真正帮助或会根据非典型参数值创建一个糟糕的计划。因此，如果变量在第一次运行和编译计划时具有默认值 null 或不是典型值 - 它会创建一个错误的计划。

如果其他人编写了这个存储过程——他们可能出于某种原因故意“禁用”了对局部变量的参数嗅探。业务规则可能需要这些可变结构。

目标是在创建计划之前获取有关 SQL 变量值的最佳/最多信息，通常参数嗅探会执行此操作。但是有些事情可能会使它对性能产生负面影响，这可能就是它被“禁用”的原因。似乎仍在使用参数的非典型值或仍然没有足够的信息来创建计划 - 是否使用参数嗅探。

尝试使用使用 sp_executesql 调用存储过程中的查询来执行受影响的查询，强制它使用实际变量为该区域生成计划，并查看它是否更好。如果您必须拥有这种不规则的参数值，这可能是您的解决方案 - 创建运行受影响部分的存储过程并稍后从存储过程中调用它们 - 在变量接收到典型值之后。

如果没有看到实际代码的更好表示，就很难看出问题所在。希望这些信息会有所帮助-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:30:26.837

您可以强制它根据您可能更了解的典型值来优化您的查询。在您的原始查询中添加以下内容：

```
OPTION (OPTIMIZE FOR(@ColorId = 1, @SeasionId = 3)) 
```

如果没有动态 SQL，它会产生类似的效果。如果你不知道典型值，你可以让优化器嗅探它们：

```
OPTION (OPTIMIZE FOR UNKNOWN) 
```

同样，没有动态 SQL

# sql - Doctrine 2.0 Hidration 数组结果

> ID：11119433
> 
> 赞同：0
> 
> 时间：2012-06-20T12:20:56.747
> 
> 标签：sql, join, doctrine-orm

我对此查询有滞后：

```
 $result = $qb->select("p,s,t,w,ph")
                      ->from("Entity\Property", "p")
                      ->innerJoin("p.sub_type","s")
                      ->innerJoin("s.type","t")
                      ->innerJoin("p.web_info","w")
                      ->leftJoin("p.photos","ph")
                      ->where("w.publish_on_trovit > 0")
                      ->andWhere("p.status=0")
                      ->add("orderBy","p.id ASC,ph.display_order ASC")
                      ->setFirstResult($offset)
                      ->setMaxResults($limit)
                      ->getQuery()
                      ->getArrayResult(); 
```

**问题是整个实体的负载**，为了解决滞后，我只需要选择需要的表字段。

但是当我使用“p.id,ph.id”而不是“p,ph”学说 hidration 将结果数组更改为一个平面表，就像一个普通的 sql 连接。

**有没有办法像上面查询的结果一样在 parenet->chields 结果集中只加载需要的字段？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:36:07.033

使用部分解决了树结构的问题：

```
select("partial p.{id,reference},partial ph.{id,name},partial t.{id,name},partial s.{id,name},partial w.{id}") 
```

var_dump

```
array
  0 => 
    array
      'id' => int 9
      'reference' => string '9' (length=1)
      'sub_type' => 
        array
          'id' => int 1
          'name' => string 'Padrao' (length=6)
          'type' => 
            array
              ...
      'web_info' => 
        array
          'id' => int 9
      'photos' => 
        array
          empty
  1 => 
    array
      'id' => int 16
      'reference' => string '124793' (length=6)
      'sub_type' => 
        array
          'id' => int 1
          'name' => string 'Padrao' (length=6)
          'type' => 
            array
              ...
      'web_info' => 
        array
          'id' => int 16
      'photos' => 
        array
          empty 
```

# jquery - 启用/禁用 jquery 切换和 asp 面板

> ID：11119435
> 
> 赞同：0
> 
> 时间：2012-06-20T12:20:57.887
> 
> 标签：jquery, asp.net

我正在创建一个控件，该控件将在单击按钮时启用/禁用 aspx 页面的一部分。我在 jquery 中找到了一个代码片段，它将对所有值执行此操作，但我想将锁定/编辑部分限制为 asp 面板。

1）这可能吗？

2) 如何更改 jquery 代码以仅切换 Panel1 中的字段？

我对 Jquery 很陌生。

感谢您对未来的任何指导！

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="ChangeControl3.aspx.cs" Inherits="Test_ChangeControl3" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<meta charset=utf-8 />
<title>Test Lock/Edit Control</title>
<link type="text/css" rel="Stylesheet"href="http://ajax.microsoft.com/ajax/jquery.ui/1.8.5/themes/redmond/jquery-ui.css" />
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js">
</script>

<script type="text/javascript">
   $(document).ready(function(){
    $("#btnEnableDisable").toggle(function() {

    $("*").attr("disabled", "disabled"); 
     $(this).attr("disabled", ""); 
    }, function() {
     $("*").attr("disabled", ""); 

     });
   });

</script>

</head>
<body>
<form runat="server">
<asp:Panel ID="Panel1" runat="server">
<div>
 <asp:Label runat="server" ID="lblFname" Text="First Name:" ></asp:Label>
 <asp:TextBox runat="server" ID="fname"></asp:TextBox>
</div>
<div>
 <asp:Label runat="server" ID="lblLname" Text="Last Name:"></asp:Label>
 <asp:TextBox runat="server" ID="lname"></asp:TextBox>
</div>
<div>
 <asp:Label runat="server" ID="lblCompany" Text="Company:" ></asp:Label>
 <asp:TextBox runat="server" ID="cname"></asp:TextBox>
</div>
</asp:Panel>  
  <br />
   <asp:Button runat="server" id="btnEnableDisable" Text="Lock/Edit" />
  <br />

  <input type="checkbox" name="qrentown" value="Do you own a home?" /> Do you own a home?<br /><br/>
   <select name="rentown">
   <option value="own">Own</option>
   <option value="rent">Rent</option>
   <option value="none">N/A</option>
  </select><br/>
  <input readonly="readonly" value="Describe your living situation"/><br />
  <textarea rows="3" cols="40" > </textarea>
  <br/><br/>

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:15:17.260

您应该在 jQuery 中使用面板 ID Panel1：

```
$("[id$='Panel1']").children().attr("disabled", "disabled"); 
```

请注意，这会得到一个以您的 id 结尾的 id，因为服务器将添加到该 id 的开头。

同样的问题`btnEnableDisable`

切换是一个动画事件，你想要一个点击事件。

所以，让我们使用您的按钮来保持事物的当前状态，然后根据您的点击启用/禁用：

```
$(document).ready(function() {
    $("[id$='btnEnableDisable']").data('isenabled', true);//enabled assumption
    $("[id$='btnEnableDisable']").click(function() {
        var currentState = $(this).data('isenabled');
        if (currentState) {
            $("[id$='Panel1']").children().prop("disabled", "disabled");
        } else {
            $("[id$='Panel1']").children().removeProp("disabled");
        }
        $(this).data('isenabled', !currentState);
    });
}); 
```

非常详细地展示了我们在这里所做的事情:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:42:20.287

我通常只使用周围的 div 标签来显示和隐藏面板。

```
<script type="text/javascript">

    hideAllDivs = function () {
        $("#div_id").hide();

    };

   $("#btnEnableDisable").click(function() {

        $("#div_id").show();

    };
</script 
```

div 内容看起来像这样

```
<div id="div_id">
    <asp:Panel ID="Panel1" runat="server">
    <div>
     <asp:Label runat="server" ID="lblFname" Text="First Name:" ></asp:Label>
     <asp:TextBox runat="server" ID="fname"></asp:TextBox>
    </div>
    <div>
     <asp:Label runat="server" ID="lblLname" Text="Last Name:"></asp:Label>
     <asp:TextBox runat="server" ID="lname"></asp:TextBox>
    </div>
    <div>
     <asp:Label runat="server" ID="lblCompany" Text="Company:" ></asp:Label>
     <asp:TextBox runat="server" ID="cname"></asp:TextBox>
    </div>
    </asp:Panel>
</div>

<asp:Button runat="server" id="btnEnableDisable" Text="Lock/Edit" /> 
```

希望这可以帮助，

# objective-c - 当我尝试将其设置为 NSString 时，NSURL 被清空

> ID：11119436
> 
> 赞同：0
> 
> 时间：2012-06-20T12:20:58.097
> 
> 标签：objective-c, ios, xcode, nsstring, nsurl

我正在使用以下代码根据用户单击的按钮加载一些声音。文件路径被`testString`完美加载，但是当 NSLogging 时`URLToBeReturned`，它以`(null)`. 我不知道为什么它没有转移过来。

```
NSString *testString = [NSString stringWithString:[[NSBundle mainBundle] pathForResource:noteName ofType:@"m4a"]];
NSURL *URLToBeReturned = [NSURL URLWithString:testString];
return URLToBeReturned; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:22:37.643

代替

```
NSURL *URLToBeReturned = [NSURL URLWithString:testString]; 
```

利用

```
NSURL *URLToBeReturned = [NSURL fileURLWithPath:testString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:24:18.703

可能是因为它的 URL格式错误（来自[NSURL 参考）：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

> ```
> + (id)URLWithString:(NSString *)URLString 
> ```
> 
> 返回值
> 
> 一个用 URLString 初始化的 NSURL 对象。如果字符串格式错误，则返回 nil。

至于修复（来自同一参考）：

> 网址字符串
> 
> 用于初始化 NSURL 对象的字符串。必须是符合 RFC 2396 的 URL。此方法根据 RFC 1738 和 1808 解析 URLString。（要为文件系统路径创建 NSURL 对象，请改用 fileURLWithPath:isDirectory:。）

所以，你可以尝试使用`fileURLWithPath:isDirectory:`

# c++ - 如何检测 Metro UI 是否显示？

> ID：11119437
> 
> 赞同：3
> 
> 时间：2012-06-20T12:20:58.503
> 
> 标签：c++, windows-8, microsoft-metro

在 Windows 8 Release Preview 中，您可以使用 Windows 键在 Metro UI（这个“仪表板”有名称吗？）和曾经是（也许现在仍然是？）“桌面”的视图之间切换。

是否有任何 API 用于测试 Metro UI 是否以编程方式启动 - 最好使用 C/C++？我查看了[Metro 应用程序的 Windows API 参考，](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)但没有发现任何有趣的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:46:29.027

这里有一个基本问题，关于您*为什么*需要此信息。

从您的问题推断您将在 Metro Style 应用程序中运行它（从您查看指南的事实来看），结果始终是在 Metro 界面中运行的可能性高于平均水平（因为如果您的应用程序不在前台，它将被暂停）。唯一可能不是这种情况的情况是您在某处的后台任务中运行。然后，当然，问题是您打算根据结果做什么。如果您想发送 toast 或 tile 通知，那么当前显示的 UI 并不重要 - 消息会通过。

如果您能再澄清一下“为什么”，我们也许可以帮助您了解“如何”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:53:36.237

“Metro UI”也称为“开始屏幕”或“启动器”。可以通过调用来测试它[`IAppVisibility::IsLauncherVisible`](http://msdn.microsoft.com/de-de/library/windows/desktop/jj554119%28v=vs.85%29.aspx)。此接口在 Windows 8 SDK 中可用。

# javascript - 同位素 fitColumns 布局导致容器变为空白

> ID：11119444
> 
> 赞同：7
> 
> 时间：2012-06-20T12:21:16.537
> 
> 标签：javascript, jquery-isotope

请参阅[http://jsfiddle.net/cUcFd/5/](http://jsfiddle.net/cUcFd/5/) - 请注意，如果您将 layoutMode 更改为“masonry”或“fitRows”，它可以正常工作。但是使用“fitColumns”它只是空白，所有块都消失了。

似乎有关于在容器和项目上设置什么样式以使 fitColumns 模式工作的要求，但我找不到任何关于它们是什么的文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-03T16:14:20.697

**为什么它不起作用**

`fitColumns`是一种“水平布局”，因此它旨在向侧面移动而不是上下移动 - 类似于横向卷轴游戏。鉴于他们的设计，水平布局需要一个高度属性，如此处所述：http: [//isotope.metafizzy.co/layout-modes.html#horizo​​ntal- layouts](http://isotope.metafizzy.co/layout-modes.html#horizontal-layouts)

**静态解决方案**

> 我想用多少列来填充容器的宽度，并且我希望它占用尽可能多的垂直空间。

您想使用`masonry`而不是`fitColumns`. 设置`columnWidth`将允许您填充容器的宽度并根据需要使用尽可能多的垂直空间。例如：http: [//jsfiddle.net/cUcFd/22/](http://jsfiddle.net/cUcFd/22/)

```
$('#container').isotope({
    itemSelector : '.block',
    // layoutMode: 'fitColumns',
    layoutMode: 'masonry',
    masonry: {
        columnWidth: 100
    }
}); 
```

**动态解决方案**

假设您不知道列的宽度并希望动态找到它，您可以`#container`使用此处提供的代码以最宽的元素为基础：[https ://stackoverflow.com/a/8853777/1786459](https://stackoverflow.com/a/8853777/1786459)

例如：http: [//jsfiddle.net/cUcFd/24/](http://jsfiddle.net/cUcFd/24/)

```
var column_width = Math.max.apply(null,$('#container .block').map(function(){return $(this).outerWidth(true);}).get()); 
```

但是，由您决定设置列宽的最合适方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:47:55.803

尝试为您的容器设置宽度和高度。当你使用`layoutMode:'fitColumns'`时，它必须给所有元素一个不再填充容器的浮动属性。

您可能还想设置`resizesContainer:false`

# memory - 内存管理[分页]

> ID：11119445
> 
> 赞同：1
> 
> 时间：2012-06-20T12:21:16.903
> 
> 标签：memory, memory-management, paging

我对分页感到困惑，我正在写我对分页的理解，请纠正我，我错了。

首先，我们系统中的总物理内存[RAM] 被划分为 4kb 的页面帧。
其次，用户进程生成虚拟地址，virtualpages[4kb]包含这些虚拟地址。
现在有一个页表，用于存储页表条目[PTE不过是关于页的信息]

现在，当一个进程运行时，这些虚拟地址被 MMU 映射到 RAM 中的物理页面。

我的问题是每个进程都有自己的 pagetable ，所以当一个进程运行时，这个 pagetable 是否应该被引入 RAM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:07:02.300

假设您有 4gb 的内存和 4gb 的页面/交换文件。您总共有 8GB 内存。操作系统在为进程分配内存时将使用虚拟地址来寻址整个 8gb 内存。这些虚拟地址相对于它们对应的物理地址记录在页表中。

> > 我的问题是每个进程都有自己的 pagetable ，所以当一个进程运行时，这个 pagetable 是否应该被引入 RAM。

一个进程没有得到一个页表，它得到一个地址空间（虚拟地址）。这允许操作系统进行一些优化，例如碎片整理，而不会干扰最初分配给进程的地址空间。

# php - 全局变量被标识为 null

> ID：11119450
> 
> 赞同：0
> 
> 时间：2012-06-20T12:21:28.257
> 
> 标签：php, global-variables

我有一个类似于此的脚本：

foo.php

```
class Foo
{
    function Foo() {
        $Registry = array();
        include 'bar.php';
        $Registry['bar'] = new Bar();
    }
} 
```

酒吧.php

```
class Bar
{
    function Bar() {
        global $Registry;
        print_r(var_dump($Registry));
    }
} 
```

但这会返回：

```
array
  'Registry' => &null 
```

有人对为什么不将`Registry`变量标识为数组有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:29:24.397

你必须在你的班级之外创建 $register 全局

```
$Registry = array();

class Foo
{
  function Foo() {
    global $Registry;
    include 'bar.php';
    $Registry['bar'] = new Bar();
  }
} 
```

酒吧.php

```
class Bar
{
  function Bar() {
    global $Registry;
    print_r(var_dump($Registry));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:24:41.470

也许在这两个函数中尝试全局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:25:29.827

因为`$Registry`不存在，所以`Foo->Registry`存在，但应该是从对象本身访问。

# database - 表设计帮助：需要多个不同的实体指向一个实体分组

> ID：11119452
> 
> 赞同：0
> 
> 时间：2012-06-20T12:21:40.047
> 
> 标签：database, database-design, denormalization

我这辈子都想不通。起初看起来很简单，现在我盯着它看太久了，我只见树木不见森林。

本质上，我们有日划分，这些是任意的......

```
ID  Name    Start  End
1   Name1   1300   1400
2   Name2   13:30  19:30
3   Name3   20:00  21:30 
```

ETC

我们希望能够使用这些天划分的任意组合来配置一周中的天数，因此我们有 WeekConfigurations 表

```
ID  ConfigurationID  DayOfWeek   DayDivisionID   Order
1   1                1           1               1
2   1                1           2               2
3   1                2           2               1
4   1                2           3               2
5   2                1           1               1
6   2                3           2               1
7   2                3           3               1 
```

现在我们希望其他实体（Person、Office 等）分配给他们特定的周配置。这就是我要摆脱困境的地方。我要分配的 configurationID 不是主键，因此我无法强制实体和配置之间的引用完整性。

谁能指出我正确的方向？关于 WeekConfiguration 表的某些东西对我来说很有趣，但我就是看不到它。

PS：对不起，我有一个很好的图表来说明，但我是新手，无法添加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:00:24.077

在逻辑层面，你有一个“配置”和该配置下的一组“配置项”。因此，不要只使用一个配置表，而是使用两个：

![在此处输入图像描述](../Images/8eb209aca1d83a1975e5c7e992f965e3.png)

在这个设计中，`ConfigurationId`是（表的）主键`Configuration`，因此您可以直接将其用作外键的父端点。

`ConfigurationItem`PK 确保每个配置最多可以在一周的一天中使用单日划分，并且备用键确保`U1`它是明确排序的（在一周和配置的同一天内）。

我还选择避免在`ConfigurationItem`. 如有必要，您可以轻松添加它（并使现有的 PK 替代） - 例如，如果您有其他未提及的 FK 或使用与复合 PK 不兼容的 ORM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:49:09.970

是的。 `WeekConfiguration`应该分成两个表。

要强制执行参照完整性，您需要一个表，其中每周配置恰好有一条记录（和一个 ID）；这个表应该有你调用的列，`ConfigurationID`也许还有某种描述。

另一个表（我们可以称它为``WeekConfigurationDetail`）应该存储详细记录，即组成周配置的日划分。虽然这些列与您现有的表相似，但它的主键（`ConfigurationID`再次）本身就是主`WeekConfiguration`表的外键。同样，任何其他表（实体）都可以对外引用该表。

即使您在`WeekConfiguration`表中只有一列，一个无意义的 ID，您仍然需要该表来确保引用完整性。

这种数据库设计模式称为主从设计模式，也称为父子模式。

# android - Cocos2d-x 使用 pugixml 从 URL 内容解析 XML，我该怎么做？

> ID：11119455
> 
> 赞同：1
> 
> 时间：2012-06-20T12:21:50.047
> 
> 标签：android, xml, url, cocos2d-x

这是我一直在尝试的：

```
pugi::xml_document doc;

pugi::xml_parse_result result = doc.load_file("Book.xml"); // need to change this

std::cout << "Load result: " << result.description() << ", mesh name: " << doc.child("mesh").attribute("name").value() << std::endl; 
```

我想做这样的事情：

```
URL url;
url = new URL("http://.....");
URLConnection ucon = url.openConnection();
ucon.connect();
pugi::xml_parse_result result = doc.load_file(url.openStream()); // need to change this 
```

编辑1：

显然这是不可能的。 [http://code.google.com/p/pugixml/issues/detail?id=116](http://code.google.com/p/pugixml/issues/detail?id=116)

那么我应该如何前进呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:56:41.740

我使用 cURL 库从 URL 获取内容并将其保存为字符串，如下所示：

```
CURL *curl;
CURLcode res;
std::string readBuffer;

curl = curl_easy_init();
if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "http:...");
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &readBuffer);
    res = curl_easy_perform(curl);
    curl_easy_cleanup(curl);
} 
```

然后我解析了字符串中包含的数据：

```
pugi::xml_document doc;
pugi::xml_parse_result result = doc.load(readBuffer.c_str()); 
```

十分简单 ：-）

# .net - 从 .NET 中的 WebService 发送 JSON 作为响应

> ID：11119456
> 
> 赞同：1
> 
> 时间：2012-06-20T12:21:49.880
> 
> 标签：.net, vb.net, json, web-services

我正在 VB.NET 中构建一个 Web 服务，我想使用 JSON 来回答。目前我的答案看起来像这样

```
{\"myVar1\" : \"From moscow\", \"myVar2\" : \"With love\"} 
```

我希望能够使用“（和 CarriageReturn），并有这样的响应：

```
{"myVar1" : "From moscow", "myVar2" : "With love"} 
```

如何避免“in \”的这种转码？

这是我的接口定义：

```
<OperationContract()>
<WebGet(UriTemplate:="/TemplateGet?ID={id}",
        ResponseFormat:=WebMessageFormat.Json, 
        BodyStyle:=WebMessageBodyStyle.Bare)>
Function TemplateGet(id As String) As String 
```

我的回答是纯字符串：

```
Function TemplateGet(id As String) As String Implements ISearch.TemplateGet
    Dim reponse As String = "{""MyVar1"" : ""From moscow"", ""MyVar2"" : ""With love""}"
    Return reponse
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:58:46.647

我不是 VB.net 的人，（而且我没有找到 vb 示例）所以链接将使用 c# - 但是通过简单的 vb 翻译它应该是相同的。

当您编写 wcf 服务时，您不应该自己编写序列化（在您的情况下为 json）。

您可以返回一个对象（您应该将其注册为已知类型 - 请参见下面的示例），结果将为您序列化。

带有对象的 wcf 服务示例：[http ://www.freddes.se/2010/05/19/wcf-knowntype-attribute-example/](http://www.freddes.se/2010/05/19/wcf-knowntype-attribute-example/)

在您的情况下，您应该创建一个这样的类：

```
 [DataContract]
   public class MyServiceResultClass
   {
       [DataMember]
       public string myVar1 {get; set;}

       [DataMember]
       public string myVar2 {get; set;}
   } 
```

注册`MyServiceResultClass`为服务已知类型，并将您的方法更改为：

```
 Function TemplateGet(id As String) As String Implements ISearch.TemplateGet
      Dim reponse As MyServiceResultClass = new MyServiceResultClass() // -- Change to vb syntax here
      Return reponse
   End Function 
```

就是这样......你会得到json中的响应

# android - 如何完全关闭应用程序

> ID：11119458
> 
> 赞同：0
> 
> 时间：2012-06-20T12:21:54.413
> 
> 标签：android, android-activity, lifecycle

应用程序有 2 个活动。我在每个活动中使用以下代码来完全关闭应用程序并在按下主页按钮时释放所有资源。但是当我重新启动应用程序时，它会从它之前离开的活动开始。如何达到目标。

```
@Override
public void onStop(){
    super.onStop();
    super.onDestroy();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:24:24.283

您不能根据需要关闭您的应用程序。当您离开它时，您可以随时调用`finish()`。`Activity`但是话又说回来，不能保证操作系统会立即释放资源并关闭您的`Activity`.

永远不要尝试实现退出应用程序之类的东西。[阅读这篇文章以获得很好的讨论](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238#2034238)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:24:41.570

1.  不要完全关闭应用程序。让系统自己决定。
2.  不要调用`super.onDestroy()`方法`onStop`！
3.  用于`finish()`活动停止。
4.  你总是有`System.exit()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:24:37.100

首先完成所有活动，然后在完成最后一项活动之前添加以下行

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

这将终止为该应用程序启动的进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:25:56.910

调用`finish()`而不是这个，您必须从主活动本身退出应用程序。
如果您在任何活动上按主页按钮，它将在下次启动相同的活动。

或者在您的问题中添加更多细节以获得更好的解决方案。

# eclipse - 如何增加 Eclipse 的堆大小？

> ID：11119460
> 
> 赞同：0
> 
> 时间：2012-06-20T12:22:07.940
> 
> 标签：eclipse, jvm, jvm-arguments

我有：

1.  64位赢7
2.  64 位 JROCKIT 1.6
3.  64位日食

Eclipse.ini：

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.1.R36x_v20100810
-showsplash
org.eclipse.platform
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512m
-vmargs
-Xms512m
-Xmx1024m
-Xmn256m
-XX:MaxPermSize=512m
-XX:GCTimeRatio=2
-XX:ParallelGCThreads=8 
-XX:+UseParNewGC
-XX:MaxGCPauseMillis=2000 
-XX:+DisableExplicitGC
-Dsun.lang.ClassLoader.allowArraySyntax=true
-Dweblogic.home=D:\Oracle\Middleware10.3.4\wlserver_10.3
-Dharvester.home=D:\Oracle\Middleware10.3.4\Oracle_OSB1\harvester
-Dosb.home=D:\Oracle\Middleware10.3.4\Oracle_OSB1
-Dosgi.bundlefile.limit=750
-Dosgi.nl=en_US 
```

我想增加堆大小，但是当我`-Xmx1024m`增加到`-Xmx2048m`

它说：

> 创建 Java 虚拟机失败。

然后我再次`-vm`向我的 eclipse.ini 引入了参数

```
-vm
D:\Java\jrockit-jdk1.6.0_26-R28.1.4-4.0.1\jre\bin\jrockit\jvm.dll 
```

（之前`-vmargs`）它说：

> 无法加载 JNI 共享库。

该怎么办？如何增加 Eclipse 的堆大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:40:53.700

与您的断言相反，您拥有 32 位版本的 Eclipse。我可以通过 eclipse.ini 文件中的 org.eclipse.equinox.launcher 参考来判断。一个 64 位的 Eclipse 会将此文件命名为“...win32.x86_64...”而不是“win32.x86...”。

由于 Eclipse 具有本地组件，因此您必须将 32 位 JVM 与 32 位 Eclipse 一起使用。您在尝试强制使用 64 位 JVM 时看到“无法加载 JNI 共享库”问题，因为安装中的 Eclipse 本机组件与 64 位 JVM 不兼容。

就能够增加安装中的堆而言......您不太可能能够将堆增加到 2048m。启动时，JVM 尝试根据最大堆大小保留一个连续的内存块。32 位地址空间总共为 4G，但它被固定在不同位置的内存中的各种系统 DLL 分解。最大连续内存会因系统而异，但找到连续的 2048m 块是非常不寻常的。

我对此不是 100% 肯定，但我听说 Jrockit 没有连续内存要求。如果是这样，您可能可以通过像您尝试的那样切换到 Jrockit 来解决您的问题，但您需要安装 32 位版本的 Jrockit。

当然，更好的解决方案是迁移到 64 位版本的 Eclipse。看起来您的 Eclipse 安装来自 OSB 安装程序。这些仅在 32 位版本中可用，但我相信 OSB 安装程序支持将 OSB 插件安装到包含 Oracle Enterprise Pack for Eclipse (OEPE) 的现有 Eclipse 安装中。OEPE 提供了预构建的 64 位 Eclipse 工具包，但您需要确定 OSB 插件需要哪个版本的 Eclipse 和 OEPE（它将是一个特定版本）。

祝你好运。

**更新：**刚刚记住了一些别的东西......有时如果您使用 javaw.exe 而不是 jvm.dll ，使用更高的 Xmx 设置运行会更容易，因为这两个入口点之间的内存管理是不同的。要尝试此操作，请找到 32 位 JVM 的 javaw.exe 的路径并通过 -vm 开关指定它，就像您尝试在问题中指定替代 jvm.dll 一样。

# perl - 如何获得 FASTA 完全匹配的正确计数？

> ID：11119463
> 
> 赞同：1
> 
> 时间：2012-06-20T12:22:30.443
> 
> 标签：perl, bioinformatics, fasta

我必须在基因组序列的[FASTA 文件](http://www.ncbi.nlm.nih.gov/nuccore/NC_004314.2)`wTTTAYRTTTW`中搜索模式，其中`W`= `A`or `T`, `Y`= `C`or `T`, `R`= `A`or 。应该允许一些不匹配，即完全匹配字符串及其位置。我的做法是：`R`

```
#!user/bin/perl -w
use strict;
my @name = qw( NC_004314.2_10 );
for (my $i = 0 ; $i< scalar(@name);$i++)
{
my $fname = $name[$i];
print "$fname\n";
my $read_pat= "WTTTAYRTTTW";
#print"\nPlease enter how many mismatch is allowd : ";
my $m =<STDIN>;
chomp $m;
unless(open(fh1, "$fname")){
    print "Cannot open file \"$fname\"\n\n";
    exit;
                }
my @fh=<fh1>;
close fh1;
if ($fh[0] !~ /^>/)
    {
        print "not fasta file\n";
        exit;
    }
my $seq='';
foreach my $line(@fh)
    {
        if($line =~ /^>/)
        {
        next;
        }
        else
        {
        $seq=$seq.$line;
        }
    }
sub trans_pat
    {
     my $pat=shift;
     $pat=~s/R/\[CG\]/g;
        $pat=~s/W/\[AT\]/g;
        $pat=~s/Y/\[AG\]/g;
    return $pat;
    }
open(FH1,">$fname.csv");
sub find_pat
{
my ($pat,$seq) = (@_);
#print FH1 "Looking for pattern $pat\n";
}

find_pat (trans_pat($read_pat),$seq);

# Allowing for a single mismatch

my $pat=trans_pat($read_pat);
print FH1 "Looking for pattern $pat\n";
while ($seq=~m/(?=$pat)/g)
{
print FH1"match at\t$-[0]\t$&\n"
}
foreach my $i (1..(length $read_pat)-($m-1))
{
my $mis_pat = $read_pat;
substr($mis_pat,$i-1,$m)=".{$m}";
my $pat1=trans_pat($mis_pat);
print FH1 "Looking for pattern $pat1\n";
while ($seq=~m/(=?$pat1)/g)

{
print FH1 "match at\t$-[0]\t$&\n";
}
#print FH1"$& \n";
}
close FH1; 
```

这段代码发现的结果对于FASTA文件中给定序列NC_004314.2的精确匹配是错误的，总匹配数应该是829。任何人都可以纠正这个代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:33:29.510

我对基因组搜索一无所知，也无法快速理解您的程序，但作为建议：

你真的应该扫描：

*   [http://www.bioperl.org](http://www.bioperl.org)特别是
*   [http://www.bioperl.org/wiki/HOWTO:Getting_Genomic_Sequences](http://www.bioperl.org/wiki/HOWTO:Getting_Genomic_Sequences)

也许会有所帮助，您可以获得一些如何做事的想法。

Perl 是生物信息学**的**语言。

# c# - odp.net DateTime.MaxDate

> ID：11119473
> 
> 赞同：2
> 
> 时间：2012-06-20T12:22:56.083
> 
> 标签：c#, .net, oracle, odp.net

当我在 Oracle 日期字段中插入 maxdate 时：

```
using (OracleCommand Cmd = new OracleCommand("insert into test (mydate) values (:mydate)", OracleConnection))
{
    Cmd.Parameters.Add(new OracleParameter(":mydate", DateTime.MaxValue));
    Cmd.ExecuteNonQuery();
} 
```

并尝试检索值：

```
using (OracleCommand Cmd = new OracleCommand("select mydate from test where mydate=:mydate", OracleConnection))
{
    Cmd.Parameters.Add(new OracleParameter(":mydate", DateTime.MaxValue));
    object MyDate = Cmd.ExecuteScalar();
} 
```

MyDate 对象保持为空。这意味着它不能读回记录。这是一个错误吗？某处舍入不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:42:41.043

那是因为`Date`数据库中的 不像`DateTime.MaxValue`.
它既不是相同的数据类型，也不是相同的精度。

试试这个查询：

```
OracleCommand Cmd = new OracleCommand("select dump(mydate), dump(:mydate) from test where rownum=1", OracleConnection) 
```

结果将是这样的：

```
dump(mydate):  Typ=12 Len=7: 199,199,12,31,24,60,60
dump(:mydate): Typ=180 Len=11: 199,199,12,31,24,60,60,59,154,201,156 
```

这意味着 DB 中的值是类型`Date`并且包含带秒但没有毫秒的时间，而参数被转换为包含`timestamp`毫秒的数据类型。

因此，如果您确实想在`where clause`尝试中使用它，请像这样：

```
using (OracleCommand Cmd = new OracleCommand("select mydate from test where trunc(mydate, 'mi') = trunc(:mydate, 'mi')", OracleConnection))
         {
             Cmd.Parameters.Add(new OracleParameter(":mydate", DateTime.MaxValue));
             object MyDate = Cmd.ExecuteScalar();
         } 
```

请注意，这也会截断秒数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:34:11.453

如果您`DateTime.MaxValue`从 c# 传递给 oracle 假设`timestamp`参数，则该值将是：`10000/01/01/ 00:00:00` Year：（`10000`是的，一万，这不是错字）。我相信这是 c# 和 oracle OLEDB 提供程序之间的错误

很可能您在插入时遇到异常并且插入失败。要确认年份值，请使用下一个表达式： `EXTRACT (YEAR FROM CAST(yourparameter AS DATE))`

祝你好运！

# ruby-on-rails - Ruby on Rails after_save 错误

> ID：11119478
> 
> 赞同：1
> 
> 时间：2012-06-20T12:23:10.437
> 
> 标签：ruby-on-rails, callback, save, ruby-on-rails-3.2

我正面临以下问题，因为我是 ruby​​ on rails 的新手，而不是我无法完全理解 after_save 回调，所以卡住了

```
 class StoreOpeningStock < ActiveRecord::Base
     after_save :add_stock

     def add_stock
        s = Stock.find_by_product_id(self.product_id)
        if s.product_id?
        s.update_attributes(:product_id => self.product_id, :quantity => self.quantity, :price => self.price)
        else    
        Stock.create(:product_id => self.product_id, :quantity => self.quantity, :price => self.price)
  end
    end
    end 
```

我将此视为错误

> 未定义的方法`product_id`

基本上只是检查 Stock 是否有产品？如果是.. 更新其他创建新库存.. 我觉得问题出在 s.product_id 上...但不确定..有关此主题的任何指导都会有很大帮助...提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:33:00.200

我相信问题出在这段代码上：

```
if s.product_id? 
```

可能是**product_id？**方法不存在，可能你想要的是这样的：

```
if s 
```

这会根据您之前的查询检查**s**是否存在于您的数据库中。如果**s**为 nil，那么您将创建一条新记录。

# android - 选择一个 SDK 以 4.0 或 4.3 为目标时出现此错误错误

> ID：11119479
> 
> 赞同：0
> 
> 时间：2012-06-20T12:23:19.447
> 
> 标签：android

选择面向 4.0 或 4.3 的 SDK 时出现此错误：[2012-06-20 17:20:36 - Emulator] 模拟器：错误：在此 AVD 的配置中找不到搜索路径。[2012-06-20 17:20:36 - Emulator] 很奇怪，AVD 的 config.ini 文件格式不正确。尝试重新创建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:54:23.693

尝试检测 SDK 的首选项 --> android 路径并更新它将起作用的路径或再次安装 4.0 和 4.03 sdk 这也可以解决您的问题

我希望这可以帮助你的问题

# c# - 在 DownloadStringAsync 中发布数据

> ID：11119480
> 
> 赞同：0
> 
> 时间：2012-06-20T12:23:24.587
> 
> 标签：c#, windows-phone-7, webclient

我必须从外部源下载一些数据，但我必须提交我想要检索的数据，我正在使用特殊的 url（在网站上）路由并且我不允许在 URL 中使用特殊字符，所以我想我必须使用 POST或 GET 方法提交数据。如何通过 Download String Async 实现这一点？

```
WebClient c = new WebClient();
c.DownloadStringCompleted += new DownloadStringCompletedEventHandler(DownloadStringCompleted);
c.DownloadStringAsync(new Uri(uristring)); 
```

如您所见，我目前仅下载默认数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:28:29.470

最简单的方法可能是使用`UploadStringAsync`or `UploadDataAsync`，并附加了适当的事件处理程序。

# mysql - 捆绑安装 ROR 时出现错误“缺少 mysql.h”

> ID：11119482
> 
> 赞同：2
> 
> 时间：2012-06-20T12:23:27.907
> 
> 标签：mysql, ruby-on-rails, rubygems, bundler, mysql2

我正在使用 Centos 5.8、mysql5.5、ruby 1.9.1、rails 3.0.9 和 mysql2 -v 0.2.7 gem。

在执行“捆绑安装”时，出现此错误：

```
Installing mysql2 (0.2.7) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/usr/local/bin/ruby extconf.rb 
checking for rb_thread_blocking_region()... yes
checking for mysql.h... no
checking for mysql/mysql.h... no
-----
mysql.h is missing.  please check your installation of mysql and try again.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/bin/ruby
    --with-mysql-config
    --without-mysql-config

Gem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/mysql2-0.2.7 for inspection.
Results logged to /usr/local/lib/ruby/gems/1.9.1/gems/mysql2-0.2.7/ext/mysql2/gem_make.out
An error occured while installing mysql2 (0.2.7), and Bundler cannot continue.
Make sure that `gem install mysql2 -v '0.2.7'` succeeds before bundling. 
```

我探索了各种解决方案。我试过这个：

```
sudo yum install mysql-devel 
```

并得到这个错误：

```
Loaded plugins: dellsysid, fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.hmc.edu
 * epel: linux.mirrors.es.net
 * extras: centos.mirrors.hoobly.com
 * updates: centos.sonn.com
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package mysql-devel.i386 0:5.0.95-1.el5_7.1 set to be updated
---> Package mysql-devel.x86_64 0:5.0.95-1.el5_7.1 set to be updated
--> Processing Dependency: libmysqlclient_r.so.15()(64bit) for package: mysql-devel
--> Processing Dependency: libmysqlclient.so.15()(64bit) for package: mysql-devel
--> Finished Dependency Resolution
mysql-devel-5.0.95-1.el5_7.1.x86_64 from updates has depsolving problems
  --> Missing Dependency: libmysqlclient.so.15()(64bit) is needed by package mysql-devel-5.0.95-1.el5_7.1.x86_64 (updates)
mysql-devel-5.0.95-1.el5_7.1.x86_64 from updates has depsolving problems
  --> Missing Dependency: libmysqlclient_r.so.15()(64bit) is needed by package mysql-devel-5.0.95-1.el5_7.1.x86_64 (updates)
Error: Missing Dependency: libmysqlclient.so.15()(64bit) is needed by package mysql-devel-5.0.95-1.el5_7.1.x86_64 (updates)
Error: Missing Dependency: libmysqlclient_r.so.15()(64bit) is needed by package mysql-devel-5.0.95-1.el5_7.1.x86_64 (updates) 
```

安装 libmysqlclient-dev libmysqlclient16 也无法在 centos 上运行，因为没有这样的软件包

请提出解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:23:19.393

通过安装 mysql-devel 5.5 解决了这个问题。较早的 mysql-devel 5.0 是为 mysql5.5 安装的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T05:15:59.420

首先为您的 mysql 数据库下载服务器。并复制位于 mysql //bin 中的文件“libmysql.dll”并将其粘贴到“Ruby\bin”中并重新启动服务器..

# grails - Grails 测试用例失败

> ID：11119484
> 
> 赞同：2
> 
> 时间：2012-06-20T12:23:32.887
> 
> 标签：grails, groovy, junit, grails-2.0

我有一个域类

```
package trip.side
import java.text.SimpleDateFormat

class HotelStay {
    String hotel
    Date checkIn
    Date checkOut

    static constraints = {
    }
    String toString(){
     def sdf = new SimpleDateFormat("EEEE")
    "${hotel}(${sdf.format(checkIn)} to ${sdf.format(checkOut)})"
    }

} 
```

并在 HotelStayTests 中编写了一个测试用例 toString 方法

```
void testToString() {
      def h = new HotelStay(hotel:"Hilton")
      def df = new SimpleDateFormat("MM/dd/yyyy")
      h.checkIn = df.parse("10/1/2008")
      h.checkOut = df.parse("10/5/2008")
      println h
      assertToString h, "Hilton (Wednesday to Sunday)"
    } 
```

完成 HotelStayTests 类

```
package trip.side

import grails.test.mixin.*
import org.junit.*
import java.text.SimpleDateFormat

/**
 * See the API for {@link grails.test.mixin.domain.DomainClassUnitTestMixin} for usage instructions
 */
@TestFor(HotelStay)
class HotelStayTests {

   void testSomething() {
   // Simple test by creating new object and asserting it
          // fail "Implement me"
        HotelStay hs = new HotelStay(hotel:"Ibis")
        assertEquals "Ibis", hs.hotel
    }   

    void testToString() {
      def h = new HotelStay(hotel:"Hilton")
      def df = new SimpleDateFormat("MM/dd/yyyy")
      h.checkIn = df.parse("10/1/2008")
      h.checkOut = df.parse("10/5/2008")
      println h
      assertToString h, "Hilton (Wednesday to Sunday)"
    }
} 
```

但失败并给出错误报告

```
No signature of method: trip.side.HotelStayTests.assertToString() is applicable for argument types: (trip.side.HotelStay, java.lang.String) values: [Hilton(Wednesday to Sunday), Hilton (Wednesday to Sunday)] Possible solutions: testToString()
groovy.lang.MissingMethodException: No signature of method: trip.side.HotelStayTests.assertToString() is applicable for argument types: (trip.side.HotelStay, java.lang.String) values: [Hilton(Wednesday to Sunday), Hilton (Wednesday to Sunday)]
Possible solutions: testToString()
    at trip.side.HotelStayTests.testToString(HotelStayTests.groovy:28)
System output
Hilton(Wednesday to Sunday) 
```

知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:43:03.643

`assertToString`是[GroovyTestCase 类](http://groovy.codehaus.org/api/groovy/util/GroovyTestCase.html)的一部分。

您的测试类需要`extend GroovyTestCase`获得此功能

# javascript - Openlayers，更改聚类标记

> ID：11119485
> 
> 赞同：2
> 
> 时间：2012-06-20T12:23:38.240
> 
> 标签：javascript, map, icons, openlayers, markers

我根据这个[例子](http://openlayers.org/dev/examples/strategy-cluster.html)制作了一张地图。现在，如果集群仅包含一个点，我想将圆从集群更改为外部图形。

你知道有什么解决办法吗？

编辑：

到目前为止，这是我的代码：

```
PROJECTION_4326 = new OpenLayers.Projection("EPSG:4326");
PROJECTION_MERC = new OpenLayers.Projection("EPSG:900913");
var map, template, evt, features = [];

var stylesMarkerImage = {
        externalGraphic : 'markerimage.png',
        graphicHeight : 37,
        graphicWidth : 32,
        graphicYOffset : -35,
        graphicXOffset : -16
    };

/**
 * A specific format for parsing Flickr API JSON responses.
 */
OpenLayers.Format.Flickr = OpenLayers.Class(OpenLayers.Format, {
    read: function(obj) {
        var photos = new Array();
        var photo, point,
            feature;
        photos.push({longitude: 8.807357, latitude: 53.075813, title: "Title1", bild: "sample1.png", description: "Some desc1"});
        photos.push({longitude: 8.808367, latitude: 53.075813, title: "Title2", bild: "sample2.png", description: "Some desc2"});
        photos.push({longitude: 8.807357, latitude: 53.076823, title: "Title3", bild: "sample3.png", description: "Some desc3"});
        photos.push({longitude: 8.809357, latitude: 53.076823, title: "Title4", bild: "sample4.png", description: "Some desc4"});
        for(var i=0,l=photos.length; i<l; i++) {
        photo = photos[i];
        point = new OpenLayers.Geometry.Point(photo.longitude, photo.latitude);
            feature = new OpenLayers.Feature.Vector(point, {
                    id: i,
                    lon: photo.longitude,
                    lat: photo.latitude,
                title: photo.title,
                bild: photo.bild,
                description: photo.description
            }, stylesMarkerImage);
            features.push(feature);
        }
        return features;
    }
});

function init() {
    map = new OpenLayers.Map('map', {
    controls : [ new OpenLayers.Control.PanZoomBar(),
                    new OpenLayers.Control.Navigation(),
                    new OpenLayers.Control.ScaleLine(),
                    new OpenLayers.Control.MousePosition(),
                    new OpenLayers.Control.OverviewMap() ],
                numZoomLevels : 18,
                maxResolution : 156543,
                units : 'm',
                projection : PROJECTION_MERC,
                displayProjection : PROJECTION_4326
            });
    var base = new OpenLayers.Layer.OSM();

    var style = new OpenLayers.Style({
        pointRadius: "${radius}",
        fillColor: "#ffcc66",
        fillOpacity: 0.8,
        strokeColor: "#cc6633",
        strokeWidth: 2,
        strokeOpacity: 0.8
    }, {
        context: {
            radius: function(feature) {
                return Math.min(feature.attributes.count, 7) + 3;
            }
        }
    });

    var photos = new OpenLayers.Layer.Vector("Photos", {
        projection: "EPSG:4326",
        strategies: [
            new OpenLayers.Strategy.Fixed(),
            new OpenLayers.Strategy.Cluster()
        ],
        protocol: new OpenLayers.Protocol.Script({
            url: "http://api.flickr.com/services/rest",
            params: {
                api_key: '',
                format: 'json',
                method: '',
                extras: '',
                per_page: 150,
                page: 1,
                bbox: [-180, -90, 180, 90]
            },
            callbackKey: 'jsoncallback',
            format: new OpenLayers.Format.Flickr()
        }),
        styleMap: new OpenLayers.StyleMap({
            "default": style,
            "select": {
                fillColor: "#8aeeef",
                strokeColor: "#32a8a9"
            }
        })
    });

    selectControl = new OpenLayers.Control.SelectFeature(
            photos, {
                onSelect : onFeatureSelect,
                onUnselect : onFeatureUnselect
            });

    map.addControl(selectControl);
        selectControl.activate();

    map.addLayers([base, photos]);
    var center = new OpenLayers.LonLat(8.807357, 53.075813);
        var centerAsMerc = center.transform(PROJECTION_4326, PROJECTION_MERC);
        map.setCenter(centerAsMerc, 9);

        function onFeatureSelect(event) {
            evt = event.layer;
            console.log(event);
            if (event.cluster === 0) { return; }
            var features = event.cluster;
            text = '<div class="popupcontent">';
            console.log(features.length);
            var length = features.length;
            if (length > 5) {
                length = 5;
            }
            if (features.length > 1) {
            for(var i=0, len = length; i<len; ++i) {
                var feature = features[i].attributes;
                if (i == 0) {
                    text += '<a class="zoom-plus" href="#" onclick="zoomPlus('+feature.lon+', '+feature.lat+');">Zoom in</a> - <a class="zoom-minus" href="#" onclick="zoomMinus('+feature.lon+', '+feature.lat+');">Zoom out</a>';
                }
                text += '<div><b><a class="zoom-to-location" href="#" onclick="zoomToFeature('+feature.lon+', '+feature.lat+', true, '+feature.id+', \''+feature.title+'\', \''+feature.description+'\', \''+feature.bild+'\');">' + feature.title + '</a></b></div>' + feature.description;
            }
            }
            else {
                var feature = features[0].attributes;
                text += '<img src="'+feature.bild+'" alt="" width="100" height="100" style="float: left; padding: 1px; border: 1px solid #cccccc; margin: 1px 4px 2px 1px;"/><a class="zoom-to-location" href="#" onclick="zoomToFeature('+feature.lon+', '+feature.lat+');">Zoom in</a><br /><a class="zoom-out" href="#" onclick="zoomOut('+feature.lon+', '+feature.lat+');">Zoom out</a><div style="font-size: x-large;">'
            + feature.title + "</div>" + feature.description;
            }
        text += '</div>';
            popup = new OpenLayers.Popup.FramedCloud("feature", event.geometry
                .getBounds().getCenterLonLat(), null, text, event.marker, true,
                    function(b) {
                        if (event.layer == null) {
                            event.layer = evt;
                            evt = null;
                        }
                        selectControl.unselect(event)
                    });
            event.popup = popup;
            map.addPopup(popup);
            popup.updateSize();
        }
        function onFeatureUnselect(a) {
            map.removePopup(a.popup);
            a.popup.destroy();
            a.popup = null
        }

}

function zoomToFeature(lon, lat, isCluster, id, title, description, bild) {
    var center = new OpenLayers.LonLat(lon, lat);
    var centerAsMerc = center.transform(PROJECTION_4326, PROJECTION_MERC);
    map.setCenter(centerAsMerc, 18);
    if(isCluster) {
        var pops = map.popups;
        for(var a = 0; a < pops.length; a++){
           map.removePopup(map.popups[a]);
        };
        text = '<div class="popupcontent">';
        text += '<img src="'+bild+'" alt="" width="100" height="100" style="float: left; padding: 1px; border: 1px solid #cccccc; margin: 1px 4px 2px 1px;"/><a class="zoom-out" href="#" onclick="zoomOut('+lon+', '+lat+');">Zoom out</a><div style="font-size: x-large;">'
            + title + "</div>" + description;
        var popup = new OpenLayers.Popup.FramedCloud("feature", center, null, text, null, true);
        text += '</div>';
        map.addPopup(popup);
        popup.updateSize();
    }
}

function zoomOut(lon, lat) {
    var center = new OpenLayers.LonLat(lon, lat);
    var centerAsMerc = center.transform(PROJECTION_4326, PROJECTION_MERC);
    map.setCenter(centerAsMerc, 8);
}

function zoomPlus(lon, lat) {
    var center = new OpenLayers.LonLat(lon, lat);
    var centerAsMerc = center.transform(PROJECTION_4326, PROJECTION_MERC);
    map.setCenter(centerAsMerc, map.getZoom()+1);
    var pops = map.popups;
    for(var a = 0; a < pops.length; a++){
       map.removePopup(map.popups[a]);
    };
}

function zoomMinus(lon, lat) {
    var center = new OpenLayers.LonLat(lon, lat);
    var centerAsMerc = center.transform(PROJECTION_4326, PROJECTION_MERC);
    map.setCenter(centerAsMerc, map.getZoom()-1);
    var pops = map.popups;
    for(var a = 0; a < pops.length; a++){
       map.removePopup(map.popups[a]);
    };
} 
```

我不知道该解释什么。集群默认获得一个圆圈来显示其位置。如果集群包含少于两个 poi，我想用标记图像替换这个圆圈。我不知道这是怎么做的，也不知道在哪里。也许在zoomevent上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:41:17.633

您需要为集群策略建立一个阈值。阈值是集群可以分组的最小特征数。

```
strategies: [
        new OpenLayers.Strategy.Fixed(),
        new OpenLayers.Strategy.Cluster({ distance: 35, threshold: 2 })
    ], 
```

您显然必须在其他地方定义了单个功能的图标（我猜是在您的 json 中）。

# python - 创建方法信号以自动触发python中的事件

> ID：11119486
> 
> 赞同：0
> 
> 时间：2012-06-20T12:23:42.360
> 
> 标签：python

老实说，我不知道这样的东西是否存在，但我试图做一些研究，最终对一种叫做 d-Bus 的东西感到困惑，不确定这是否是这里要找的东西，

```
class BigClass(Object):
  def Foo(self):
     print 'calling foo'

  def Logger(self):
     print 'foo has been called'

a = BigClass()
a.foo() 
```

我在这里尝试做的是在调用 foo() 时调用 Logger() 方法。我想创建某种事件/信号，当在我的类或所有方法中调用特定方法时，它将触发 logger()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:36:42.257

I don't know your particular situation, but there is a good signal/callback lib called `dispatch`: [http://pydispatcher.sourceforge.net/](http://pydispatcher.sourceforge.net/)

But i prefer using Django dispatcher which was created based on PyDispatcher, but [signal creation is more intuitive](https://code.djangoproject.com/wiki/Signals): [https://github.com/django/django/blob/master/django/dispatch/dispatcher.py](https://github.com/django/django/blob/master/django/dispatch/dispatcher.py)

> what am trying to do here is invoke Logger() method when foo() is being called. I want to create some sort of a event/signal where it will fire up logger() when specific methods are called in my class or all methods.

Why don't you then call `Logger` method manually from `foo` method? Or better make a decorator to use it like:

```
class BigClass(Object):

  def Logger(self):
     print 'foo has been called'

  @log(Logger)
  def Foo(self):
     print 'calling foo'

a = BigClass()
a.foo() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:24:43.947

虽然显式日志调用（或 warwaruk 建议的日志装饰器）是最直接的方法，但如果您愿意使用命名技巧，例如让逻辑`foo`方法由`Foo`. Python 是区分大小写的，所以它们是分开的和不同的。然后实现一个`__getattr__`方法，如下所示：

```
class AutoLogger(object):

    def __getattr__(self, attr):
        try:
            return self.__class__.__dict__[attr]
        except KeyError:
            func = self.__class__.__dict__[attr.capitalize()]
            return lambda *args, **kwargs: self.log_call(attr, func, *args, **kwargs)

    def log_call(self, func_name, func, *args, **kwargs):
        func(self, *args, **kwargs)
        print func_name, 'has been called (handled by', func_name.capitalize() + ')'

class BigAutoLoggerClass(AutoLogger):
    def Foo(self):
        print 'calling Foo'

b = BigAutoLoggerClass()
b.Foo()
print "---"
b.foo() 
```

这产生：

```
calling Foo
---
calling Foo
foo has been called (handled by Foo) 
```

`bar`将类似地由 实现`Bar`，依此类推。

如果您不喜欢这种随意的命名，也可以通过该`sys.settrace()`功能自动进行日志记录。但是，这会增加很多运行时开销，并且实际上仅适用于调试或低（ish）性能还可以的情况。

# java - 在 Android Spring 拦截器中读取响应正文

> ID：11119487
> 
> 赞同：8
> 
> 时间：2012-06-20T12:23:45.497
> 
> 标签：java, android, spring, inputstream, interceptor

我正在使用一个简单的 Spring Interceptor 类来记录我的 Android 应用程序中 RestTemplate 对象的所有 REST 请求/响应。到目前为止一切正常。

```
public class LoggerInterceptor implements ClientHttpRequestInterceptor {

@Override
public ClientHttpResponse intercept(HttpRequest request, byte[] body,
  ClientHttpRequestExecution execution) throws IOException {

Log.d(TAG, "Request body: " + new String(body));
// ...more log statements...

ClientHttpResponse response = execution.execute(request, body);

Log.d(TAG, "Response Headers: " + response.getHeaders());

return response;
} 
```

在初始化时我调用：

```
List<ClientHttpRequestInterceptor> interceptors = new ArrayList<ClientHttpRequestInterceptor>();
LoggerInterceptor loggerInterceptor = new LoggerInterceptor();
interceptors.add(loggerInterceptor);
restTemplate.setInterceptors(interceptors); 
```

但是我无法登录`response.getBody()`上面的方法，因为 InputStream 被使用一次并在稍后再次使用时抛出 IllegalStateException 。有没有办法解决这个问题，以便我也可以记录响应正文？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-17T00:41:21.223

要允许多次`response.getBody()`调用，请将您的 ClientHttpRequestFactory 包装在 BufferingClientHttpRequestFactory 中。

```
ClientHttpRequestFactory requestFactory = 
    new BufferingClientHttpRequestFactory(new SimpleClientHttpRequestFactory());
restTemplate.setRequestFactory(requestFactory); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T15:47:06.187

实现`ClientHttpResponse`自己并添加一个`setBody(byte[] body)`方法并覆盖`getBody`。在上面的代码中，您可以将字节数组存储在 中`ByteArrayInputStream`，记录您想要的内容，然后将字节数组设置回您实现的类的实例中`ClientHttpResponse`，然后您可以返回。

# php - .htaccess RewriteRule 与 PHP INCLUDE 或 REQUIRE 不起作用？

> ID：11119491
> 
> 赞同：1
> 
> 时间：2012-06-20T12:23:59.827
> 
> 标签：php, .htaccess, mod-rewrite, include

我是编码 Clean URL 的新手，尽管我对它们如何工作的有根据的猜测是正确的。

我的第一步是创建一个兼容性工具来测试是否在服务器上启用了 mod_rewrite。我成功地创建了我需要的三个文件：PHP 工具文件、.htaccess 文件和要重写的文件 URL。

一个基本的 RewriteRule 已经到位，当我转到重写的 URL 时，它会成功重定向。但是，在尝试使用 PHP INCLUDE/REQUIRE 甚至 FILE_EXISTS 函数来引用重写的 URL 时，它会返回失败。这是不可能的，还是我走错了路？

如有必要，我很乐意发布代码（我正在用我的智能手机编写此代码），但现在我仍在尝试确定它是否有可能，如果可以，最好的方法是什么。

.ht 访问：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule .*rewrite_test\.php rewrite.php [nc]
</IfModule> 
```

重写.php：

```
<?php
  $mod_rewrite = TRUE;
  echo "test";
?> 
```

tester.php：

```
<?php
  // Check if APACHE MOD_REWRITE is enabled for clean URLs
  $mod_rewrite = file_exists('rewrite_test.php');

  echo ($mod_rewrite ? "TRUE" : "FALSE");
?> 
```

或 tester.php 代码替代：

```
<?php
  // Check if APACHE MOD_REWRITE is enabled for clean URLs
  $mod_rewrite = FALSE;
  include_once('rewrite_test.php');
  echo $mod_rewrite;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:57:08.750

Apache Rewrite Rules 对 没有任何影响`include`，`require`或者`file_exists`因为那些使用服务器上的路径，而不是 URL，除非您启用`allow_url_fopen`并[指定完整的 URL](http://de2.php.net/manual/en/function.include.php#example-137)。

**编辑：**
如果您只想检查`mod_rewrite`您的服务器上是否可用，那就更容易了：使用[`apache-get-modules()`](http://de2.php.net/manual/en/function.apache-get-modules.php). 这很简单：

```
$mod_rewrite = (
        function_exists('apache_get_modules') &&
        in_array('mod_rewrite', apache_get_modules())
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:12:05.393

.htaccess 代表超文本访问：它只会影响 HTTP 请求，不会影响本地服务器请求。正如 Oezi 提到的，您可以使用 cURL 或 allow_url_fopen 标志将您的请求转换为真正的 HTTP 请求，但我建议您不要这样做，因为这意味着您正在采取非常迂回的路线到达您想要包含的页面。如果它只是用于测试您的 .htaccess 配置，这不是问题，或者您可以在浏览器中打开 URL。

# iphone - XCode AppDelegate 在 5.0 模拟器中返回 sigabrt，但在 4.3 中工作正常

> ID：11119492
> 
> 赞同：0
> 
> 时间：2012-06-20T12:24:06.760
> 
> 标签：iphone, xcode, xcode4.2, ios-simulator, sigabrt

我将我的 XCode 更新为 4.2，并希望使用 Simulator 5.0 而不是 4.3。

我编写了一个带有 5 个选项卡的选项卡应用程序，但通过 appdelegate 推送了另一个视图作为第一个视图。

现在我有一个问题，它在模拟器 4.3 中一切正常，但在模拟器 5.0 中给我一个错误：

```
int retVal = UIApplicationMain(argc, argv, nil, nil); SIGABRT

objc[3441]: EXCEPTIONS: throwing 0x7d626b0 (object 0x7d1e750, a NSException)
objc[3441]: EXCEPTIONS: searching through frame [ip=0xe99ee sp=0xbfffdee0] for exception 0x7d62690
objc[3441]: EXCEPTIONS: catch(id)
objc[3441]: EXCEPTIONS: unwinding through frame [ip=0xe99ee sp=0xbfffdee0] for exception 0x7d62690
objc[3441]: EXCEPTIONS: handling exception 0x7d62690 at 0xe9bac
objc[3441]: EXCEPTIONS: finishing handler
objc[3441]: EXCEPTIONS: throwing 0x7d5cd30 (object 0x7d1e750, a NSException)
objc[3441]: EXCEPTIONS: searching through frame [ip=0xe9b9c sp=0xbfffdee0] for exception 0x7d5cd10
objc[3441]: EXCEPTIONS: searching through frame [ip=0x1a02db3 sp=0xbfffec20] for exception 0x7d5cd10
objc[3441]: EXCEPTIONS: unwinding through frame [ip=0xe9b9c sp=0xbfffdee0] for exception 0x7d5cd10
objc[3441]: EXCEPTIONS: unwinding through frame [ip=0x1a02db3 sp=0xbfffec20] for exception 0x7d5cd10
objc[3441]: EXCEPTIONS: handling exception 0x7d5cd10 at 0x1a02e46
objc[3441]: EXCEPTIONS: rethrowing current exception
objc[3441]: EXCEPTIONS: searching through frame [ip=0x1a02e0f sp=0xbfffec20] for exception 0x7d5cd10
objc[3441]: EXCEPTIONS: unwinding through frame [ip=0x1a02e0f sp=0xbfffec20] for exception 0x7d5cd10
objc[3441]: EXCEPTIONS: finishing handler
objc[3441]: EXCEPTIONS: unwinding through frame [ip=0x1a02e38 sp=0xbfffec20] for exception 0x7d5cd10 
```

我将问题定位在 AppDelegate 中：

```
AppDelegate *app = [AppDelegate getApp];
    app.tabController.selectedViewController = connNavController; 
```

我也尝试通过使用来推动控制器

```
[self.navigationController pushViewController:myViewController animated:YES]; 
```

但我总是得到一个 SIGABRT。

清洁目标，重新启动等不起作用。

如果您有解决方案，请提供帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:27:26.177

你试过替换吗

```
UIApplicationMain(argc, argv, nil, nil); 
```

和

```
UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:29:38.890

从您的堆栈跟踪中可以看出很少，但是当您使用`selectedViewController`视图控制器最位于`viewcontrollers`数组中的属性时`UITabBarController`，如果它不在数组中，它将在这种情况下引发错误。

所以确保你的代码中有这个：

```
myTabBar.viewcontrolleres = [NSArray arrayWithObjects: myViewController, more, nil]; 
```

# c++ - 被称为对象'char*'类型不是函数或函数指针

> ID：11119494
> 
> 赞同：5
> 
> 时间：2012-06-20T12:24:18.160
> 
> 标签：c++, c, xcode, time

我有这个函数，它应该为给定的 char* 设置某种时间格式：

```
static void timeStamp(char* time)
{
  time(&strTime);<---ERROR
  curTime = std::localtime(&strTime);
  strftime(time, 8, "%H:%M::", curTime);    
} 
```

strTime 和 curTime 声明如下：

```
tm* curTime; 
time_t strTime; 
```

但由于某种原因，我得到：

```
called object type 'char*' is not a function or function pointer 
```

在标记的地方。

知道为什么吗？

顺便说一句，我正在使用 xCode。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T12:27:30.217

您的函数参数`time`是指向 char 的指针。

但是，在您的函数体中，如果它是您可以调用的函数，您会尝试对其进行处理。这就是错误所说的......

> 类型的对象`char *`不是函数或函数指针[因此，我不能调用它！]

本质上，您`time`通过使用同名的局部变量来隐藏函数。我建议更改函数参数的名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T12:27:24.557

功能参数

```
static void timeStamp(char* time)
{
  time(&strTime);<---ERROR
  // ...
} 
```

阴影`time()`功能。重命名参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T12:29:59.060

```
static void timeStamp(char* time) 
```

在这里，这个`char* time`参数隐藏了函数`time()`。你需要重命名它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T12:27:14.287

该函数 `time`也是要运行的参数的名称`timeStamp`。编译器尝试像调用函数一样调用 char* 参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T12:27:34.193

您已经重新定义了符号`time`，要修复，请尝试以下操作：

```
static void timeStamp(char *time)
{
    time_t strTime;

    { // brackets here are important!
        extern time_t time(time_t *);
        time(&strTime);
    }

    // ...
} 
```

我们在此处添加括号以向函数添加额外的范围，然后我们告诉编译器`hey, in this block, time is not a variable, its a function`, 并且允许编译器也可以使用您当前的变量名正常工作。

或者，您还可以使用全局命名空间说明符，如下所示：

```
static void timeStamp(char *time)
{
    ::time(&strTime);
    // ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T12:27:15.883

因为`time`是`char*`你不能调用的 - 查看你的参数列表。

只需重命名它，您的问题就会消失。

# sql - 数据库父级 -> 子级“长子”关系

> ID：11119504
> 
> 赞同：3
> 
> 时间：2012-06-20T12:24:51.953
> 
> 标签：sql, sql-server, entity-framework

我有一个数据库设计问题。为了说明我的问题，想象一下：

一个简单的父->子关系：

```
[Parent] 1-----* [Children] 
```

现在，当有孩子时，每个父母（妈妈或爸爸）都有一个长子。我需要从父母到长子的数据库中的强关系

```
[Parent] 1-----1 [Children] 
```

我可以简单地将 FirstbornChildId 添加到父表中，但我不喜欢这种方法，因为它可能导致数据不一致。（FirstbornChildId 链接到 Child，而 ParentId 链接到不同的父级......）

实体框架应该映射关系，以便每个父实体都有一个链接到特定子实体的 FirstbornEntity 属性。

**在 Microsoft SQL 2008 R2 中有什么好的方法可以实现这一点吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:32:37.237

## 两种可能的解决方案

三张表：

*   **父表**
*   **儿童桌**
*   **FirstBorns 表**
    *   父母的身份证
    *   儿童身份证

或者

**Children 表中的WasFirstBorn 列**（Y/N 或 1/0）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:44:12.143

我认为你的方法很好。您必须防止应用层中的数据损坏。数据库约束只能做这么多。您至少可以拥有 FirstbornChildId 的外键，以确保孩子确实存在（无论父母如何）。

这个“firstborn”属性无论如何都是非规范化的：它可以从孩子的“birthdate”属性中派生出来。我很感激您出于性能原因要明确存储它，并且没有问题。但是如果你想让数据库完全处理完整性，这确实会让事情变得棘手。

# ajax - 提交时的 jQuery .click() 函数 - 不发送值

> ID：11119506
> 
> 赞同：1
> 
> 时间：2012-06-20T12:24:58.957
> 
> 标签：ajax, jquery, post, submit

我的表单上有两个简单的提交按钮，效果很好：

```
<button id="accept" type="submit" name="accept" value="accept">Accept</button>
<button id="decline" type="submit" name="decline" value="decline">Decline</button> 
```

但是，您可以通过直接转到 URL 来查看相关页面，或者它偶尔会显示在模式对话框中，我使用以下 jQuery 进行了设置：

```
dialog.dialog({
    buttons: [
        {
            text: "Decline", click: function() {
                $('#decline').click();
                dialog.dialog('close');
            }
        },
        {
            text: "Accept", click: function() {
                $('#accept').click();
                dialog.dialog('close');
            }
        }
    ]
});

dialog.load(url + '&ajax=1'); 
```

这可以很好地提交表单，并且它会检测除实际单击的元素之外的所有发布信息。因此，例如，如果您加载表单，然后单击#decline 按钮，该信息将被发布，而 jQuery 不是这种情况。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:36:08.433

小心对话框，因为它们不会让您的输入等待提交操作。一点击就触发提交。您应该使用按钮类型的输入而不是提交，并使用 $(form).submit() 方法管理自己的提交。它可能会解决你的问题

编辑：回答您的评论：

```
<style>
.submitbutton{
    text-align:center;
    font-weight:bold;
    /* you can do whatever you like here */
}​
</style>
<div id="dialog"></div>
<form id="myform">
<input id="accept" class="submitbutton" type="text" value="Accept button" name="accept" value="accept"/>
<input id="decline" class="submitbutton" type="text" value="Decline button" name="decline" value="decline"/>

</form>​
<script>
$('#accept,#decline').click(function(e){
    alert('you clicked #'+$(this).attr('id'));
    //you can do whatever you want here as you know which button was pressed.
    // to add more information in your form :
    $('#myform').append($("<input>").attr("type", "hidden").attr("name", "newhiddendata").val("something"));
    $('#myform').submit();
});

var dialog= $('#dialog');
dialog.dialog({
    modal:true,
    buttons: [
        {
            text: "Decline", click: function() {
                dialog.dialog('close');
                $('#decline').click();

            }
        },
        {
            text: "Accept", click: function() {
                dialog.dialog('close');
                $('#accept').click();
            }
        }
    ]
});
​
</script> 
```

[http://jsfiddle.net/techunter/KPu7G/](http://jsfiddle.net/techunter/KPu7G/)

这真的很原始，根本没有 CSS，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:52:27.080

在表单中添加一个隐藏元素，当单击按钮时，让它在提交表单之前设置该元素的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:41:51.063

尝试：

```
dialog.dialog({
    buttons: {
            "Decline": function() {
               $( this ).dialog( "close" );
            },
            "Accept": function() {
               $( this ).dialog( "close" );
            }           
        }
}); 
```

# html - Eclipse - 结合 Freemarker 和 HTML 内容辅助/.ftl 文件的代码完成

> ID：11119508
> 
> 赞同：1
> 
> 时间：2012-06-20T12:25:05.417
> 
> 标签：html, eclipse, freemarker, code-completion

我们使用 .ftl 文件在 Eclipse 中创建模板。由于 freemarker eclipse 插件，FreeMarker 的内容辅助运行良好，但我不知道如何在这些 .ftl 文件中也有 HTML 辅助。（如果我使用 .html 文件，我不会得到 FreeMarker）。这甚至可能吗？我可以将 .ftl 字段添加到内容类型 HTML 中，但这会再次停用 freemarker...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:55:43.140

不幸的是，目前创建 freemarker 插件的方式是不可能的。为了在 .html 文件中获得 freemarker 支持，必须编写一个新插件来扩展结构化源代码编辑框架（构建 HTML 编辑器）并添加 freemarker 扩展。据我所知，这种类型的集成还没有为 freemarker 完成。

# cakephp - CakePHP：选择框中的多个字段（没有虚拟字段）？

> ID：11119511
> 
> 赞同：2
> 
> 时间：2012-06-20T12:25:15.257
> 
> 标签：cakephp, select, drop-down-menu, cakephp-2.0

我正在使用 CakePHP 2.0。是否可以在不使用 virtualFields 的情况下在选择/下拉框中显示多个字段？

现在我有这个：

```
$this->set('venues', $this->Game->Venue->find('list', array('fields' => array('id', 'name', 'town')))); 
```

问题是当两个字段相等时（在本例中为名称和城镇），可选项目不会显示在列表中。在这种情况下，只有名称，不能选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:29:04.817

不知道为什么你不能创建一个虚拟字段，但你可以在控制器中手动创建字段，只需遍历行并制作你自己的列表。

```
$venues = $this->Game->Venue->find('all', array('fields' => array('id', 'name', 'town')));

foreach($venues as $venue){
    $list[$venue['Venue']['id']] = $venue['Venue']['name'].' '.$venue['Venue']['town'];
}

$this->set('venues', $list); 
```

# php - 需要帮助来查找 preg_match_all 模式

> ID：11119512
> 
> 赞同：0
> 
> 时间：2012-06-20T12:25:21.827
> 
> 标签：php, regex

我是 PHP 的初学者，我尝试使用 preg_math_all 来拆分字符串。

我的字符串看起来像：

```
[0, 5, 2, 1, true, COMMENT, 1][0, 27, 4, 1, true, COMMENT 2, 2] 
```

该字符串可能包含多个带有 [...] 的部分。

因此，我尝试使用 preg_match_all，如下所示：

```
preg_match_all('/\[\s*?(\d+), \s*?(\d+), \s*?(\d+), \s*?(\d+), \s*?(true|false), (\w+), \s*?(\d+)\]/i', $string, $matches, PREG_SET_ORDER); 
```

但结果与我的希望不符，你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:31:25.313

我会使用这样的东西：

```
$string = '[0, 5, 2, 1, true, COMMENT, 1][0, 27, 4, 1, true, COMMENT 2, 2]';
preg_match_all( '#\[([^\]]+)\]#', $string, $matches);

$result = array();
foreach( $matches[1] as $match) {
    $result[] = array_map( 'trim', explode( ',', $match));
}

var_dump( $result); 
```

与其尝试单独匹配每个组件，只需匹配方括号中的所有内容，然后进行一些额外的解析以将所有内容放在其自己的数组元素中。

输出：

```
array(2) {
  [0]=>
  array(7) {
    [0]=>
    string(1) "0"
    [1]=>
    string(1) "5"
    [2]=>
    string(1) "2"
    [3]=>
    string(1) "1"
    [4]=>
    string(4) "true"
    [5]=>
    string(7) "COMMENT"
    [6]=>
    string(1) "1"
  }
  [1]=>
  array(7) {
    [0]=>
    string(1) "0"
    [1]=>
    string(2) "27"
    [2]=>
    string(1) "4"
    [3]=>
    string(1) "1"
    [4]=>
    string(4) "true"
    [5]=>
    string(9) "COMMENT 2"
    [6]=>
    string(1) "2"
  }
} 
```

[演示](http://codepad.viper-7.com/mEjexr)

或者，您可以使用`explode`并进行更多处理，如下所示：

```
$pieces = explode( ']', $string); 
array_pop( $pieces); // There is one extra empty element at the end

$result = array();
foreach( $pieces as $piece) {
    $parts = explode( ',', $piece);
    $parts[0] = trim( $parts[0], '[');
    $result[] = array_map( 'trim', $parts);
} 
```

这将产生与上述相同的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:31:26.673

您应该首先使用正则表达式将其拆分为块：

```
preg_match_all('/\[(.*?)\]/i', $string, $matches); 
```

[然后使用explode()](http://php.net/manual/en/function.explode.php)拆分每个块：

```
$values = array();
foreach ($matches[1] as $block) {
    $values[] = explode(',', $block);
} 
```

# android - android：无需用户干预即可安装应用程序

> ID：11119514
> 
> 赞同：1
> 
> 时间：2012-06-20T12:25:29.593
> 
> 标签：android, installation

我想在没有用户干预的情况下在 Android 上安装应用程序。我正在使用权限`INSTALL_PACKAGES`，并且正在“/download/”文件夹中安装应用程序。下载完成后，会出现一个对话框，要求我安装该应用程序。如何隐藏此对话框并在没有用户干预的情况下安装应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:28:27.800

对不起，**你不能**。Android 框架不允许您这样做。Android 对**安全目的**有一些限制，不要试图打破它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:18:33.593

INSTALL_PACKAGES 权限仅允许安装在 /system/app 中的系统应用程序。

对于其他应用程序，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T13:26:45.840

您可以通过反射使用隐藏的 API android.content.pm.IPackageInstallObserver ：

```
public class PackageManagement {
public static final int INSTALL_REPLACE_EXISTING = 0x00000002;
public static final int INSTALL_SUCCEEDED = 1;

private static Method installPackageMethod;
private static Method deletePackageMethod;

static {
    try {
        installPackageMethod = PackageManager.class.getMethod("installPackage", Uri.class, IPackageInstallObserver.class, Integer.TYPE, String.class);
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    }
}

public static void installPackage(PackageManager pm, Uri mPackageUri, IPackageInstallObserver observer, int installFlags, String installerPackageName) {
    try {
        installPackageMethod.invoke(pm, mPackageUri, observer, installFlags, installerPackageName);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

将 android.content.pm.IPackageInstallObserver 导入您的项目。您的应用程序必须是系统的。您必须在清单中激活权限 android.permission.INSTALL_PACKAGES

# jsp - 当我使用 RequestDispatcher 时，不是处理 JSP 的内容，而是在输出上呈现整个 JSP 页面

> ID：11119519
> 
> 赞同：2
> 
> 时间：2012-06-20T12:25:44.097
> 
> 标签：jsp, servlets

当我调用 RequestDispatcher 时，不是处理请求，而是将 JSP 页面本身呈现为输出...... JSP 内容出现在“帐户已创建”行之后。

//Servlet 块

```
if(i==1){
            PrintWriter pw = response.getWriter();
            pw.println("Account Created!!");
            RequestDispatcher rd = request.getRequestDispatcher("Login.jsp");
            rd.include(request, response);
            System.out.println("Record Updated!!!");
        } 
```

//在浏览器上呈现的输出：

```
Account Created!!

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<link rel="icon" type="image/ico" href="favicon.ico"></link> 
<link rel="shortcut icon" href="favicon.ico"></link>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Login Page</title>
</head>
<body>
<form action="./Authentication" method="post">
    <p>Enter username<input type="text" name="Uname"></p>
    <p>Enter password<input type="password" name="Pword"></p>
    <input type="submit" value="Login"> 
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:28:07.313

您不应在 servlet 中获取编写器，也不应手动向其写入字符串，而应`RequestDispatcher#forward()`使用`include()`. 否则，您会阻止 JSP 设置正确的`text/html`内容类型，因此 Web 浏览器会将所有内容解释为纯文本。

按如下方式重写该 servlet 块，以让 JSP 正常工作：

```
if (i == 1) {
    request.getRequestDispatcher("Login.jsp").forward(request, response);
} 
```

### 也可以看看：

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含正确使用 servlet 的 Hello World 示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T05:25:09.587

这是因为在将响应发送到浏览器之前，您没有将 contentType 设置为响应。

设置`response.setContentType("text/html");`它应该适合你。:)

# c# - .NET 协方差

> ID：11119520
> 
> 赞同：9
> 
> 时间：2012-06-20T12:25:48.503
> 
> 标签：c#, .net, covariance

我有这个简单的代码：

```
public interface IReader<out T>
{
    IEnumerable<T> GetData();
} 
```

这个接口应该在 T 上是协变的，我正在以这种方式使用它：

```
private static Func<bool> MakeSynchroFunc<T>(IReader<T> reader) where T : IComposite
{
    return () => Synchronize(reader);
} 
```

注意 T 实现 IComposite 的约束。同步方法接受一个`IReader<IComposite>`in 输入：

```
private static bool Synchronize(IReader<IComposite> reader)
{
    // ......
} 
```

编译器告诉我，尽管有 T 的约束和 IReader 的协方差，但它无法从`IReader<T>`to转换。`IReader<IComposite>`

我在这里做错了什么吗？编译器应该能够验证约束并且协方差应该让我使用 my `IReader<T>`as `IReader<Icomposite>`，不是吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:15:54.453

您应该能够通过将`class`约束添加到`T`. 当涉及结构时协方差不起作用（`IEnumerable<int>`不能转换为`IEnumerable<object>`）。由于您没有被限制`T`为一个类，您可以传入一个`IReader<some struct that implements IComposite>`，它是不可转换的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:28:47.327

不幸的是没有。泛型不是协变的。`IReader<T>`并且`IReader<IComposite>`是完全不相关的类型，尽管`T`与`IComposite`.

**编辑**： 我不知道为什么这不适用于 .Net 4 和`<out T>`. 其他人可以回答吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:30:08.330

为什么不更改函数定义，因为这是您真正想要的：

```
private static Func<bool> MakeSynchroFunc<T>(IReader<IComposite> reader) where T : IComposite 
```

您可能需要通用参数 T 来处理其他事情，所以我把它留在那里。

# javascript - 有没有 JS 触屏控制器库？

> ID：11119521
> 
> 赞同：4
> 
> 时间：2012-06-20T12:25:51.023
> 
> 标签：javascript, html, touch

我做了一个小画布游戏。如果用户有桌面浏览器，那么他可以通过按箭头键来控制角色。但如果他有平板电脑或手机，则箭头键不可用。

我在某个地方看到了一个控制器，从顶视图看它就像一个操纵杆。有没有这方面的图书馆，还是我必须自己写？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:45:10.847

检查[kineticJS 库](http://kineticjs.com/)。这是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:41:53.747

上个月我遇到了同样的问题，所以我决定为这个任务创建一个开源库。如果你想贡献，请告诉我。

[https://github.com/qbolec/Joydiv](https://github.com/qbolec/Joydiv)

目前它在三星 Galaxy Tab 和我的笔记本电脑上进行了测试；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:31:42.213

您可以尝试以下库：[DHTMLX Touch](http://www.dhtmlx.com/touch/)、[TouchScroll](http://uxebu.com/blog/2010/04/27/touchscroll-a-scrolling-layer-for-webkit-mobile/)、[XUI](http://code.google.com/p/xui-js/)、[SLY](http://github.com/digitarald/sly)、[jQTouch](http://www.jqtouch.com/)、[jQuery mobile](http://jquerymobile.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:31:46.360

是的，有很多库可供使用您可以使用 Hammer.js [http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

# jquery - Jquery Ajax 代码动态填充 DropDown 和休息选择

> ID：11119522
> 
> 赞同：0
> 
> 时间：2012-06-20T12:25:51.167
> 
> 标签：jquery

我想使用 json 动态填充下拉列表。我需要动态填充的建议。在 Click 上使用它是一种好方法吗？因为我有大量记录

```
function getKitNames(id)
{

    kitName=new Array();

    $.post("/EBioData/AddRowDetailsServlet", {
        type:'kitName'
    }, function(data) {
        var json = eval('(' + data +')')

        for(var i=0;i<json.length;i++){

            $("#kitName"+id).append('<option value='
                +json[i]['kitName']+' >'+json[i]['kitName']
                +'</option>');

        }
    //        
    });
} 
```

这是我在 Javascript ccode 中的选择，它是动态添加的 kitRowCount=1

```
<select id="kitName1" name="kitName" 
      onChange="return getKitMake(this.value,1);"  onclick=getKitName(1)>
    <option value=select >select</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:30:43.147

IMO，您应该在页面加载后立即填充，并且在尚未填充时用加载元素替换内容。您还应该使用 JSON.parse 而不是 eval。

如果您在单击时执行此操作，则必须确保它只加载一次（与页面导航相同，如果您有很多考虑缓存的元素）。也许您需要在每次点击时动态刷新？

# linux - 使用 install4j 安装后文件不可执行

> ID：11119524
> 
> 赞同：1
> 
> 时间：2012-06-20T12:25:57.063
> 
> 标签：linux, install4j

我正在尝试为 linux 制作一些 eclipse 包的安装文件。我在 install4j 中指定我想使用外部启动器（eclipse 附带的那个）。安装后我无法执行启动器。在文件属性->权限中，我看到“允许将文件作为程序执行”已关闭。当我打开它时，一切正常。有没有办法让它在安装后不干扰的情况下执行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:31:35.710

您可以在安装程序->屏幕和操作选项卡上的安装程序的安装屏幕中添加“设置文件和目录的 UNIX 访问模式”操作，以更改外部可执行文件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:16:08.850

您还可以在分发树中选择文件（从文件选项卡/窗格中），右键单击它，选择“编辑条目”以打开对话框，转到安装选项并将 Unix 模式更新为您想要的。

# java - Android - 通过数组在点之间画线

> ID：11119526
> 
> 赞同：0
> 
> 时间：2012-06-20T12:25:59.020
> 
> 标签：java, android, arrays, mobile

我正在尝试使用 for 循环通过数组在点之间画线，但我似乎遇到了一些问题。我创建了一个循环遍历数组的 for 循环，但是当尝试使用 projection.toPixels(arraylist,point); 它不断抛出错误。我看到其他人使用它，他们似乎没有收到错误，请帮助：

我写的代码如下：

```
public class MyPositionOverlay extends ItemizedOverlay<OverlayItem> {

public List<GeoPoint> geoPointsArrayList = new ArrayList<GeoPoint>();
public ArrayList<OverlayItem> overlayItemList = new ArrayList<OverlayItem>();
Context context;
int listSize = overlayItemList.size();
//Vector <overlayItemList> vectorList;
public MyPositionOverlay(Drawable marker, Context c) {
    super(boundCenterBottom(marker));
    // TODO Auto-generated constructor stub
    populate();
    context = c;
}
private final int mRadius = 5;
Location location;
public Location getLocation() {
    return location;
}
public void setLocation(Location location) {;
this.location = location;
}

public void addItem(GeoPoint point, String title, String snippet){
    OverlayItem newItem = new OverlayItem(point, title, snippet);
    overlayItemList.add(newItem);
    populate();
}
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    Projection projection = mapView.getProjection();
    Double latitude = location.getLatitude()*1E6;
    Double longitude = location.getLongitude()*1E6;
    GeoPoint geoPoint; 
    geoPoint = new 
            GeoPoint(latitude.intValue(),longitude.intValue());
    GeoPoint prePoint = null, currentPoint = null;
    Path linePath = new Path();
    Point screenCoords = new Point();
    Point screenCoords2 = new Point();
    Point lastPoint = new Point();
    Point linePoint = new Point();
    if (shadow == false) {
        // Get the current location    
        // Convert the location to screen pixels     
        Point point = new Point();
        projection.toPixels(geoPoint, point);
        RectF oval = new RectF(point.x - mRadius, point.y - mRadius, 
                point.x + mRadius, point.y + mRadius);
        // Setup the paint
        Paint paint = new Paint();
        paint.setARGB(250, 255, 255, 255);
        paint.setAntiAlias(true);
        paint.setFakeBoldText(true);
        //Text set up
        Paint textPaint = new Paint();
        textPaint.setColor(Color.BLACK);
        Paint backPaint = new Paint();
        backPaint.setARGB(175, 50, 50, 50);
        backPaint.setAntiAlias(true);
        RectF backRect = new RectF(point.x + 2 + mRadius, 
                point.y - 3*mRadius,
                point.x + 65, point.y + mRadius);
        // Draw the marker    
        canvas.drawOval(oval, paint);
        canvas.drawRoundRect(backRect, 5, 5, backPaint);
        canvas.drawText("Here I Am", 
                point.x + 2*mRadius, point.y, 
                textPaint);

        for (int j = 1; j < overlayItemList.size();j++){
            linePath.setLastPoint(4, j - 1);
            linePath.lineTo(4, j);
        }
        linePath.close();
        canvas.drawPath(linePath, linePaint);
    } // End of If statement
    super.draw(canvas, mapView, shadow);
} // End of draw method
public void drawLine(MapView mapView){

    System.out.println("Drawing line");
    Path linePath = new Path();
    Canvas lineCanvas = new Canvas();
    Projection lineProjection = mapView.getProjection();

    //Line Settings
    Paint linePaint = new Paint();
    linePaint.setStyle(Style.FILL);
    linePaint.setStrokeWidth(2);
    linePaint.setARGB(0, 0, 0, 255);
    linePaint.setAntiAlias(true);
    linePaint.setStrokeJoin(Paint.Join.ROUND);
    linePaint.setStrokeCap(Paint.Cap.ROUND);
    /****************************************************************************/

    for (int k = 0; k<overlayItemList.size(); k++){
        if(k == overlayItemList.size() -1){
            break;
        }
        Point from = new Point();
        Point to = new Point();

        lineProjection.toPixels(overlayItemList.get(k), from);
        lineProjection.toPixels(overlayItemList.get(k + 1), to);

        linePath.moveTo(from.x, from.y);
        linePath.lineTo(to.x, to.y);
    }

    lineCanvas.drawPath(linePath, linePaint);

}//End of drawLine method 
```

}*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:31:57.840

> Projection 类型中的 toPixels(GeoPoint, Point) 方法不适用于参数 (OverlayItem, Point)

您收到此错误是因为您试图将 type 对象传递给需要 type 对象[`OverlayItem`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/OverlayItem)的方法[`GeoPoint`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint)。这不起作用，因为`OverlayItem`不从`GeoPoint`. 它确实有一个[`getPoint()`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/OverlayItem#getPoint%28%29)返回`GeoPoint`覆盖的方法，所以你可以使用它。

在您的代码中，您只需更改以下两行：

```
lineProjection.toPixels(overlayItemList.get(k), from);
lineProjection.toPixels(overlayItemList.get(k + 1), to); 
```

这些行应该读

```
lineProjection.toPixels(overlayItemList.get(k).getPoint(), from);
lineProjection.toPixels(overlayItemList.get(k + 1).getPoint(), to); 
```

# asp.net - 如何在 linq to sql 中获取下拉选择的文本？

> ID：11119527
> 
> 赞同：1
> 
> 时间：2012-06-20T12:26:00.560
> 
> 标签：asp.net, linq-to-sql, webforms

我在下拉列表中绑定了列名。我需要使用 linq to sql 获取选定的下拉文本。请告诉我......

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:54:50.333

我和评论中的大卫一样困惑——你需要提供更多细节。但我会试一试。

例如，假设您有一个绑定到 SqlDataSource 的 DropDownList。当您从 DropDownList 中选择一个项目时，您会在下面有一个 GridView，它会根据您在 DropDownList 中选择的内容更改内容。您的 GridView 将拥有自己的 SqlDataSource 对象。如果没有，请选择它并点击右侧的小“>”以打开操作窗口。从那里开始，像使用 DropDownList 一样设置 SqlDataSource，但将其指向网格关心的数据库表。在其中一个屏幕中，将有一个 WHERE 按钮。使用该对话框进行设置。

例如，DropDownList 获取部门列表，并且您希望显示该部门的员工。对于 GridView，将其 SqlDataSource 指向 Employee 表。在 WHERE 对话框中，设置 Column = DepartmentId（外键），Operator = "="，Source = Control。然后在右侧，从 Control 列表中选择 DropDownList，然后单击下方的 Add。每当用户更改所选项目时，这将自动发送所选项目。无需设置，它只是工作。

# qooxdoo - Qooxdoo -- 有没有办法按键删除线下商店？

> ID：11119530
> 
> 赞同：1
> 
> 时间：2012-06-20T12:26:09.720
> 
> 标签：qooxdoo

Qooxdoo中，有没有办法通过key删除线下商店？'resetModel' 似乎没有摆脱该条目，我找不到任何其他看起来适用的选项。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:55:12.597

即将发布的 2.0 版本可以做到这一点。我们修复了一个完全覆盖的错误： [http ://bugzilla.qooxdoo.org/show_bug.cgi?id=6000](http://bugzilla.qooxdoo.org/show_bug.cgi?id=6000)

# c# - 在某些情况下如何使用剃刀不显示标题属性？

> ID：11119531
> 
> 赞同：0
> 
> 时间：2012-06-20T12:26:10.813
> 
> 标签：c#, html, asp.net-mvc-3, razor

我只想在某些情况下显示我的标题属性。我不希望它在不满足条件时显示。现在它显示一个空的工具提示。当条件失败时，我不想要工具提示。

稍微清理了一下

```
<tr class=title="@(item.Cancelled ? "Cancelled" : item.Confirmed ? isBlocked? "blocked date": **no title attribute here** :"Confirm needed") "> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:31:02.447

您总是可以执行以下色情内容：

```
<tr @Html.Raw(item.Cancelled ? "title=\"Cancelled\"" : item.Confirmed ? isBlocked ? "title=\"blocked date\"": "" : "title=\"Confirm needed\"")> 
```

但我建议你编写一个自定义助手来生成这个`td`元素：

```
@using (Html.Td(item, isBlocked))
{
    <div>some contents for the td</div>
} 
```

像这样：

```
public static class HtmlExtensions
{
    private class TdElement : IDisposable
    {
        private readonly ViewContext _viewContext;
        private bool _disposed;

        public TdElement(ViewContext viewContext)
        {
            if (viewContext == null)
            {
                throw new ArgumentNullException("viewContext");
            }
            _viewContext = viewContext;
        }

        public void Dispose()
        {
            this.Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!this._disposed)
            {
                _disposed = true;
                _viewContext.Writer.Write("</td>");
            }
        }
    }

    public static IDisposable Td(this HtmlHelper html, ItemViewModel item, bool isBlocked)
    {
        var td = new TagBuilder("td");
        var title = item.Cancelled 
            ? "Cancelled" 
            : item.Confirmed 
                ? isBlocked 
                    ? "blocked date" 
                    : "" 
                : "Confirm needed";

        if (!string.IsNullOrEmpty(title))
        {
            td.Attributes["title"] = title;
        }
        html.ViewContext.Writer.Write(td.ToString(TagRenderMode.StartTag));
        var element = new TdElement(html.ViewContext);
        return element;
    }
} 
```

# c - C中的命令解析器

> ID：11119535
> 
> 赞同：0
> 
> 时间：2012-06-20T12:26:34.693
> 
> 标签：c, parsing, data-structures, embedded, interpreter

我正在做一个嵌入式系统项目。它在 ARM M3-Cortex 平台上。我正在使用的设备是一个测量控制器。它可以连接到 PC 并接受一些命令。我尝试设计命令解析器，但在互联网上看到了完全不同的方法。有 30 多个命令。每个命令可以有不同的参数：例如命令日期：？将询问日期，因此设备 LCD 应显示日期，但命令 Date:2012,05,30 应设置日期。有些命令甚至更复杂，具有不同类型的参数，即算法和数据结构应该智能设计。你有什么线索或建议。谢谢朋友：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:46:31.283

好的，这是一件事。

你需要实现一个协议。而且我认为是**文本**协议（因为您的命令要求：）`Date:?`。如果您不想使用现有的（这真的很令人困惑），您应该至少看看它们的实现和设计。

到目前为止，我**强烈**推荐给你的是看**[DCON协议](http://www.icpdas.com/download/7000/whatisdconprotocol_eng.htm)**（有PDF，但有点难找，如果你有兴趣，我会帮你搜索），**[Modbus ASCII](http://en.wikipedia.org/wiki/Modbus)**协议（这是一个非常好的选择，并且在世界范围内广泛使用）。其次，**[Siemens SPA](http://sis-inc.ru/images/OTNpdf/S255_2_SPA_E.pdf)** (Serial Protocol ASCII) 也很有趣。

如果您想**实现自己的**协议（假设您想实现二进制协议），以下是您在设计时应考虑的要点：

*   字节和/或字[字节序](http://en.wikipedia.org/wiki/Endianess)，
*   浮点表示（[IEEE754](http://en.wikipedia.org/wiki/IEEE754)或定点））
*   Begin/End 消息标记和 ByteStuffing 或[BitStuffing](http://en.wikipedia.org/wiki/Bitstuffing)（注意，它仅存在于 Beg/End Markers 中）
*   命令的字节/字节（例如，`0x01`用于读取线圈，`0x02`用于写入线圈等）
*   ACK/NASK 字节/确认消息
*   用于检查消息有效性的[CRC码](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)

当然，有[大量](http://en.wikipedia.org/wiki/List_of_automation_protocols)这样的协议，你熟悉其中的一些肯定会帮助你更好地设计（或使用现有的协议）。

**更新**：

如果使用**解析器/词法分析器**（除了 harald 提到的其他库，因为有额外的库）来实现解析器，您绝对应该阅读 SO 问题“[是否有可用于 8 位嵌入式系统的 flex/bison 的替代方案](https://stackoverflow.com/a/2338610/889576)”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T13:32:27.987

您似乎想要的是一个解析器生成器。这是一个工具，您可以在其中相当轻松地指定命令语言的语法，它会生成源代码来为您解析该语法。看看[Yacc](http://dinosaur.compilertools.net/)或[Bison](http://www.gnu.org/software/bison/)，只要许可证与您的工作兼容，他们应该能够为您执行此操作。

您还可以将词法分析器（Lexx/Flexx）添加到混合中，这可以简化将字符流转换为词法标记以供解析器使用。

**更新：**

除了最基本的解析器之外，生成器可能会让你的生活更轻松。当然，前提是资源限制或许可问题不会妨碍您。无论如何，一个好的解析器生成器不应该比手工操作需要更多的资源。正如**@gahcep**在他的回答中指出的那样，Yacc 和 Bison 还有其他替代品，包括商业替代品。也许其中一些更适合你。

使用解析器生成器的一些优点是：

*   您可以专注于语法而不是如何解析它
*   生成的代码通常会以比直接一次性解析器更优化的方式解决问题。
*   生成的代码应该几乎没有错误。

缺点是生成的代码可能难以调试，并且可能会引入您自己手工编写代码可能没有的依赖关系。检查并找到最适合您和项目的那个。

祝你好运！

# c# - 中继器中的组合框，独特的选择

> ID：11119539
> 
> 赞同：0
> 
> 时间：2012-06-20T12:26:42.260
> 
> 标签：c#, asp.net, combobox

我在数据转发器中有一个组合框，我需要从其余重复的组合框中删除组合框的选定值，这样我就可以禁止在多个组合框中多次选择相同的值：

如果 combobox1 选择的值是“john smith”，我需要从其他重复的组合框中删除“john smith”。有什么帮助吗？

```
<asp:Repeater ID="rptTableMapper" runat="server" DataSourceID="dsSQLColumnNames"
    OnItemDataBound="rptTableMapper_ItemDataBound">
    <ItemTemplate>
        <table width="500px">
            <tr>
                <td>
                    <dx:ASPxComboBox ID="cmbCsvColumns" OnSelectedIndexChanged="cmbCsvColumns_SelectedIndexChanged"
                        runat="server" AutoPostBack="True">
                    </dx:ASPxComboBox>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</asp:Repeater> 
```

后面的代码是

```
protected void cmbCsvColumns_SelectedIndexChanged(object sender, EventArgs e)
{
    string s = ((ASPxComboBox)(sender)).ClientID;
    string text = ((ASPxComboBox)(sender)).Text;
    for (int i = 0; i < rptTableMapper.Items.Count; i++)
    {
        ASPxComboBox cmb = (ASPxComboBox)(rptTableMapper.Items[i].FindControl("cmbCsvColumns"));
        ListEditItem selectedItem = ((ASPxComboBox)(sender)).SelectedItem;
        if (cmb.ClientID != s)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:23:51.737

我不确定这是您的业务需求还是什么，但我的建议是不要从下拉列表中删除条目。假设在第 1 行中，用户选择了值 1，因此从剩余行中的其他下拉列表中删除了值 1，在第 2 行中，用户选择了值 2，该值也为其余行删除。现在在第 1 行中，用户选择值 3，现在您必须从剩余的下拉列表中删除值 3，并在其中添加值 1。

我的建议是调用 javascript 方法并在 javascript 中保存您选择的值，如果用户选择了一个已经选择的值，只需给他一个警报，您已经选择了这个值。通过这种方法，您也可以减少服务器端的回发，如果您只是为了删除值而进行回发。
所以你的解决方案应该是这样的：

```
<asp:Repeater ID="rptTableMapper" runat="server" DataSourceID="dsSQLColumnNames"
                OnItemDataBound="rptTableMapper_ItemDataBound">
                <ItemTemplate>
                    <table width="500px">
                        <tr>
                            <td>
                                <dx:ASPxComboBox ID="cmbCsvColumns" onchange="cmbCsvColumns_SelectedIndexChanged(this);"
                                    runat="server" AutoPostBack="False">
                                </dx:ASPxComboBox>
                            </td>
                        </tr>
                    </table>
                </ItemTemplate>
            </asp:Repeater> 
```

你的javascript应该是这样的：

```
var selectedValues = "";
function cmbCsvColumns_SelectedIndexChanged(obj)
{
    if(selectedValues.indexOf(e.options[e.selectedIndex].value + ",") != -1)
    {
        alert("Your message");
    }
    else
        selectedValues = selectedValues + e.options[e.selectedIndex].value + ",";

} 
```

您必须稍微增强 javascript 方法以避免在“11”中匹配“1”等问题

我在转发器中使用了 asp:dropdown，在服务器端你可以像这样实现它：

```
protected void cmbCsvColumns_SelectedIndexChanged(object sender, EventArgs e)
    {
        string s = ((DropDownList)(sender)).ClientID;

        for (int i = 0; i < rptTableMapper.Items.Count; i++)
        {
            DropDownList cmb = (DropDownList)(rptTableMapper.Items[i].FindControl("cmbCsvColumns"));
            ListItem selectedItem = ((DropDownList)(sender)).SelectedItem;
            if (cmb.ClientID != s)
            {
                foreach (ListItem li in cmb.Items)
                {
                    if (li.Value == selectedItem.Value)
                    {
                        cmb.Items.Remove(li);
                        break;
                    }
                }
            }
        }

    } 
```

您必须处理的事情是，如果未选择从下拉列表中删除的项目，而不是如何将其添加回其他下拉列表中。

# python - 如何在 ZeroMQ 中接收 N 个订阅者中的 1 个的错过消息？

> ID：11119550
> 
> 赞同：4
> 
> 时间：2012-06-20T12:27:28.250
> 
> 标签：python, zeromq

我想在 Python 应用程序中使用 AMPQ 服务，但没有使用 ZeroMQ。所以我想知道这是否可以做到：

*   receiver1.py 和 receiver2.py 从一个主机和端口订阅“common_messages”
*   receiver2.py 崩溃
*   发件人发送消息
*   receiver1.py 成功接收
*   receiver2.py 重新启动
*   receiver2.py 接收在它不存在时发送的消息

这可以做到吗？ZeroMQ 是否跟踪已发送的消息？如果在发送消息后订阅，ZMQ 是否检测应该接收哪些旧消息，哪些不应该接收？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:46:06.367

如果您使用的是 PUB-SUB 连接（看起来好像您在描述），那么快速回答是否定的。发布[套接字](http://api.zeromq.org/2-1%3azmq-socket)丢弃消息而不是将它们排队。

即使您将套接字类型更改为 PUSH 和 PULL，您仍然会遇到问题。是的，PUSH 套接字将阻塞未接收到的消息，但由于您将连接另一个客户端，因此将发送消息，因此如果其中一个客户端丢失，则不会阻塞。使用 PUSH-PULL 类型，您无法像使用 PUB-SUB 连接那样“订阅”某些消息。

您可以实现一些逻辑来执行您所描述的操作。查看 zmq 的[指南](http://zguide.zeromq.org/page%3aall#Designing-Reliability)（第二个项目符号）以查看他们为可靠连接“推荐”的内容。所描述的本质上是一种跟踪客户端接收到哪些消息（递增 id？）的方法以及客户端可以“请求重新发送丢失的消息”的第二个连接。

* * *

上面的部分也可以通过客户端到服务器的“心跳”来实现，它给出了它收到的最后一条消息。服务器对此进行检查以确保客户端没有落后，如果是，则重新发布消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:47:30.983

`g19fanatic has already answered your question.`

补充他的答案：

ZeroMq 提供超级套接字。使用它的主要优点是，一旦您确定了一种通信模式，就很容易使用它。您不必担心

1.  与普通套接字不同，读取整个消息
2.  您不必像普通套接字一样担心套接字的创建和细节
3.  与普通套接字不同，zeromq 套接字可以连接到多个 zeromq 套接字。这是非常有利的。

然而，ZeroMq 并没有解决消息持久性的问题。（ZeroMQ 代表零消息队列）。消息队列（如 AMQP 实现）提供消息队列和传递保证。它存储消息直到它被传递。为了实现这一点，它使用了更复杂的协议（AMQP）。ZeroMQ 仅提供消息传递模式。

它让您可以在其之上实现任何协议、持久性或其他属性。

1.  有些人喜欢将 AMQP 基础设施与 ZeroMQ 客户端一起使用。

    请参阅[RabbitMq 插件以使用 ZeroMQ 作为客户端](https://github.com/rabbitmq/rmq-0mq/wiki)。

    [https://serverfault.com/questions/80679/how-to-pick-between-rabbitmq-and-zeromq-or-something-else](https://serverfault.com/questions/80679/how-to-pick-between-rabbitmq-and-zeromq-or-something-else)

2.  其他解决方案是使用 Redis Pub/Sub：[http ://redis.io/topics/pubsub](http://redis.io/topics/pubsub)

3.  其他人结合它。[https://github.com/pete0emerson/commander](https://github.com/pete0emerson/commander)

# java - Base64 对 Java 中的图像进行编码显然是错误的，我错过了什么？

> ID：11119553
> 
> 赞同：2
> 
> 时间：2012-06-20T12:27:37.157
> 
> 标签：java, encoding, base64

我正在尝试将我的 Java 代码中的 Base64 编码图像发布到网站。我已经在本地测试了文件的编码和解码，效果很好！但是，当它到达网站时，我被告知图像是空白的。

这是我发布的方式。如果我使用其他操作而不是上传，我会得到正确的响应！

```
ready = new java.net.URL(url);
        WebRequest request = new WebRequest(ready, HttpMethod.POST);
        request.setAdditionalHeader("Content-Type", "application/x-www-form-urlencoded");

        String requestBody = "action=upload"
                +"&key=ABCDEFG123456"
                + "&file=" + encodedFile
                + "&gen_task_id=" + SQL.getNextID(); 
```

encodedFile 来自以下代码：

```
 File file = new File("temp.jpg");

    FileInputStream fin = new FileInputStream(file);

    byte fileContent[] = new byte[(int)file.length()];
    fin.read(fileContent);

    //all chars in encoded are guaranteed to be 7-bit ASCII
    byte[] encoded = Base64.encodeBase64(fileContent);
    String encodedFile = new String(encoded); 
```

说真的，我做错了什么？？我已经用头撞墙了好几个小时了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:29:22.183

我终于弄明白了。这是我为其他遇到此问题的人所做的。

```
BufferedImage img = ImageIO.read(new File("temp.jpg"));             
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(img, "jpg", baos);
baos.flush();
Base64 base = new Base64(false);
String encodedImage = base.encodeToString(baos.toByteArray());
baos.close();
encodedImage = java.net.URLEncoder.encode(encodedImage, "ISO-8859-1");
request.setRequestBody(encodedImage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:10:22.460

`FileInputStream.read(byte[] b)``b`即使数据可用，也不保证字节数组缓冲区会被完全填满。以下代码确保缓冲区完全充满。

```
File file = new File("temp.jpg");

FileInputStream fin = new FileInputStream(file);

byte fileContent[] = new byte[(int)file.length()];
int offset = 0;

while ( offset < fileContent.length ) {
    int count = fin.read(fileContent, offset, fileContent.length - offset);
    offset += count;
}

//all chars in encoded are guaranteed to be 7-bit ASCII
byte[] encoded = Base64.encodeBase64(fileContent);
String encodedFile = new String(encoded); 
```

或者，您可以`ByteArrayOutputStream`像这样使用：

```
File file = new File("temp.jpg");

FileInputStream fin = new FileInputStream(file);
ByteArrayOutputStream baos = new ByteArrayOutputStream();

byte [] buffer = new byte[1024];
int count = 0;

while ( (count = fin.read(buffer)) != -1 ) {
    baos.write(buffer, 0, count);
}

byte [] fileContent = baos.toByteArray();

//all chars in encoded are guaranteed to be 7-bit ASCII
byte[] encoded = Base64.encodeBase64(fileContent);
String encodedFile = new String(encoded); 
```

或者，您可以将`FileInputStream`对象包装在`DataInputStream`这样的对象中：

```
File file = new File("temp.jpg");

FileInputStream fin = new FileInputStream(file);
DataInputStream dis = new DataInputStream(fin);

byte fileContent[] = new byte[(int)file.length()];
dis.readFully(fileContent);

//all chars in encoded are guaranteed to be 7-bit ASCII
byte[] encoded = Base64.encodeBase64(fileContent);
String encodedFile = new String(encoded); 
```

我相信还有更多方法可以完成这项工作。

# python - 在字典的字典中附加列表

> ID：11119556
> 
> 赞同：0
> 
> 时间：2012-06-20T12:27:45.923
> 
> 标签：python, dictionary

我错过了什么？我有一个像这样的字典（它是动态创建的）：

```
googlers = 3
goog_dict = {}
dict_within = {'score':[], 'surprise':''}
for i in xrange(googlers):
   name = "goog_%s" %i
   goog_dict[name] = dict_within 
```

现在我想添加一些数据：

```
tot =[23,22,21] 
best_res = 8

for i in xrange(len(tot)):

   name = "goog_%s" %i
   print name
   rest = tot[i] - best_res
   if rest % 2 == 0:
      trip = [best_res, rest/2, rest/2]

   elif rest % 2 != 0:
      rest_odd = rest / 2
      fract_odd = rest - rest_odd
      trip = [best_res, rest_odd, fract_odd]

   if (max(trip) - min(trip)) == 2:
      surpr_state = True
   elif (max(trip) - min(trip)) < 2:
      surpr_state = False

   goog_dict[name]['score'].append(trip)
   goog_dict[name]['surprise'] = surpr_state 
```

我希望我的输出是：

```
{'goog_2': {'surprise': True, 'score': [8, 7, 8]}, 'goog_1':{'surprise': True, 'score':  [8, 7, 7]}, 'goog_0': {'surprise': True, 'score': [8, 6, 7]}} 
```

但我得到的是：

```
{'goog_2': {'surprise': True, 'score': [[8, 7, 8], [8, 7, 7], [8, 6, 7]]}, 'goog_1':{'surprise': True, 'score': [[8, 7, 8], [8, 7, 7], [8, 6, 7]]}, 'goog_0': {'surprise': True, 'score': [[8, 7, 8], [8, 7, 7], [8, 6, 7]]}} 
```

那么，为什么列表会`trip`附加到**所有**dicts 而不是仅具有 current 的一个`name`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:30:23.630

编辑：

正如我猜测的那样。您的 goog_dict 的每个元素都是相同的元素。阅读一些关于关系的内容，因为它可能真的很有帮助。

将您的代码更改为：

```
goog_dict = {}
googlers = 3
for i in xrange(googlers):
   name = "goog_%s" %i
   dict_within = {'score':[], 'surprise':''}
   goog_dict[name] = dict_within 
```

现在应该没问题了。

也看看这个例子。这就是你的情况。

```
>>> a = []
>>> goog_dict = {}
>>> goog_dict['1'] = a
>>> goog_dict['2'] = a
>>> goog_dict['3'] = a
>>> goog_dict
{'1': [], '3': [], '2': []}
>>> goog_dict['1'].append([1, 2, 3])
>>> goog_dict
{'1': [[1, 2, 3]], '3': [[1, 2, 3]], '2': [[1, 2, 3]]} 
```

这是一个很常见的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:47:14.767

试试这个：

```
googlers = 3
goog_dict = {}
for i in xrange(googlers):
   name = "goog_%s" %i
   goog_dict[name] = {'score':[], 'surprise':''} 
```

dict 中的值`"score"`在任何地方都指向*同一个列表*，因此您看到了效果。尝试将您的 dict-building 代码粘贴到[这个 python 代码可视化](http://people.csail.mit.edu/pgbovine/python/tutor.html#mode=edit)器中，看看会发生什么。

# android - Android 4.0 PhoneGap 问题

> ID：11119559
> 
> 赞同：1
> 
> 时间：2012-06-20T12:28:03.963
> 
> 标签：android, cordova

我有一个在 v2.3 及更早版本上运行良好的 PhoneGap 应用程序。但是它不适用于ICS。出现未知的 Chromium 错误 -6 并且显示加载一些 Sencha Touch 文件失败

```
06-20 14:19:54.006: E/Web Console(920): Uncaught Error: [Ext.Loader] Failed loading 'app/model/Category.js', please verify that the file exists at file:///android_asset/www/web/resources/scripts/sencha-touch-all.min.js:358 
```

虽然活动一无所有

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/web/index.html");
} 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:41:04.493

我昨天遇到了这个问题，经过 11 个小时的调试和谷歌后才解决。

该问题是由 android 3.1+ 中的错误引起的，该错误无法正确解析 url 的参数，此错误在此处更好地描述：

[http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535)

对于 sencha 应用程序，有一个简单的解决方法，将这两行代码放在 app.js 文件的开头：

```
Ext.Loader.setConfig({disableCaching:false});
Ext.Ajax.setDisableCaching(false); 
```

这些行将禁用缓存破坏器，从而禁用导致错误的额外参数:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:03:34.527

尝试用以下代码替换您的代码：

```
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     super.init();
     super.loadUrl("file:///android_asset/www/web/index.html",10000);
    //super.setIntegerProperty("splashscreen", R.drawable.hdpi);

} 
```

# audio - 在 playn 中播放声音的问题

> ID：11119562
> 
> 赞同：1
> 
> 时间：2012-06-20T12:28:21.853
> 
> 标签：audio, playn

我有一个 .wav 文件的声音。然后我将其转换为 mp3 并尝试播放如下声音：

```
Sound mySound = assets().getSound("sound/mysound");
sound.play(); 
```

我在第一行本身遇到了以下异常：

java.lang.NegativeArraySizeException at org.classpath.icedtea.pulseaudio.PulseAudioClip.open(PulseAudioClip.java:449) at playn.java.JavaSound.init(JavaSound.java:91) at playn.java.JavaSound.access$000(JavaSound .java:31) 在 playn.java.JavaSound$1.run(JavaSound.java:44) 在 playn.java.JavaAssets.doResourceAction(JavaAssets.java:49) 在 playn.java.JavaSound.(JavaSound.java:42)在 playn.java.JavaAudio.createSound(JavaAudio.java:28) 在 playn.java.JavaAssets.doGetSound(JavaAssets.java:114) 在 playn.core.AbstractAssets.getSound(AbstractAssets.java:49)

我搜索了很多，但没有得到任何解决方案。任何帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:20:44.367

这不是 PlayN 的问题，而是 OpenJDK 的问题。

使用 Oracle 的 JDK 解决了这个问题。下载并安装它，并确保 maven 知道 JDK 的路径。将 JAVA_HOME 设置为您驱动器上 Oracle JDK 的位置应该可以解决问题。

在控制台中键入以下内容以查看使用的是哪个 JDK：

```
mvn -v 
```

# cakephp - 在 CakePHP 中找不到会话助手

> ID：11119569
> 
> 赞同：2
> 
> 时间：2012-06-20T12:28:47.313
> 
> 标签：cakephp

我正在尝试使用 CakePHP 的会话助手，就像在控制器中这样：

```
$this->Session->write('cart', $cart); 
```

但它不起作用。我收到此错误：

```
Fatal error: Call to a member function write() on a non-object in ... 
```

它在配置文件中启用，我将会话助手添加到控制器和应用程序控制器

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T12:28:48.890

原来，您还需要添加`Session`为组件，所以 AppController 看起来像这样：

```
class AppController extends Controller {

public $layout = 'website';

public $components = array(
    'Paginator',
    'DebugKit.Toolbar',
    'Session'
);

public $helpers = array(
    'Html',
    'Js' => array('Jquery'),
    'Session'
);

} 
```

# google-maps-api-3 - 使用 Google 地图地理编码时出现 OVER_QUERY_LIMIT 问题

> ID：11119570
> 
> 赞同：1
> 
> 时间：2012-06-20T12:28:47.503
> 
> 标签：google-maps-api-3, geocoding

我有一个关于`OVER_QUERY_LIMIT`尝试通过 Google 地理编码获取纬度和经度的问题。不知何故，即使我等了超过 24 小时，它也不起作用。我没有超过 2,500 个请求，这是最大值 - 最多 100 个。

该问题`OVER_QUERY_LIMIT`仅发生在我的服务器（webhotel）上。使用我的本地机器（本地主机）时，我完全没有遇到任何问题。

我认为某处有障碍，但我不确定。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T08:53:31.367

```
$output= json_decode(stripcslashes(file_get_contents('http://maps.googleapis.com/maps/api/geocode/json?latlng='.$data['lat'].','.$data['lon' ].'&sensor=false&language=ru')));
打印 $output->results[0]->formatted_address
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:22:33.260

如果您有自己的 API 密钥，只需通过添加您的信用卡详细信息来验证您的帐户（*Google 只是将它们用于验证目的，他们不会向您收费，除非您购买 Google API Premier*）。这将限制提高到每天**250,000个请求，并为您提供唯一的 API 密钥和实时统计信息。**

您可以在[Google API 控制台](https://code.google.com/apis/console/)中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:30:07.783

如果您在共享服务器环境中，则可能是同一 IP 上的其他人正在主动查询 Google 地理编码服务。这就是为什么在您的本地主机（具有不同的 IP 地址）上，您根本没有遇到任何问题。

**更新（基于上面的评论）：**既然你提到它，不一致有点奇怪，我不能 100% 确定这是什么原因。不过，最好的解决方案可能是寻找一种允许进行地理编码的服务，*并且*最好允许您保留结果。您还将不必要地对任何不存在的地址进行所有查询（或者您至少会得到错误的坐标）。

我在[SmartyStreets](http://smartystreets.com)所做的工作称为[LiveAddress——](http://smartystreets.com/products/liveaddress-api)它类似于 Google 的 API，但使用起来更简单，并且只返回*有效*结果（这意味着您不会获得不存在地址的坐标）。它是免费的，可能没有查询限制，并且您可能会在这里遇到任何 TOS 限制。而且我敢肯定，即使您查询了未验证的地址，您也不会在您的帐户中被扣除。

因此，这是您可以考虑作为解决您遇到的限制的另一种选择。

# c# - 在 aspx 页面上输入键触发 Response.Redirect

> ID：11119575
> 
> 赞同：0
> 
> 时间：2012-06-20T12:28:55.583
> 
> 标签：c#, javascript, jquery, asp.net

希望有人可以提供帮助。我正在一个 aspx 网站上工作，使用 c# 作为背后的代码。我有 3 个输入框，但是当我的光标位于其中一个输入框中时，它似乎会触发 search_Click 代码，如果光标位于 searchBox 中，这很好，但当光标位于用户名和密码文本框。我没有任何 javascript 触发此事件，想要做的是如果用户在 searchBox 中并按回车键，他们会触发 Search_Click 否则如果他们在用户名或密码文本框中并按回车键，他们会触发与相关联的代码登录_点击。希望这是有道理的，任何人都知道为什么它会触发 Response.Redirect，即使我没有 javascript/jquery 将其发送给它。

```
//Front end aspx page
<input type="text" class="searchBox" autocomplete="off" id="searchBox" name="searchBox" runat="server" />
<asp:Button ID="searchBtn" class="searchBtn" runat="server" onclick="search_Click" />

<li>
  <asp:Label ID="UserNameLabel"  AssociatedControlID="UserName" runat="server" Text="Username :" CssClass="usernamelabel" />
  <asp:TextBox ID="UserName" runat="server" ValidationGroup="RegisterValidationGroup" CssClass="Username-Password" />                     
</li>
<li>
  <asp:Label ID="PasswordLabel"  AssociatedControlID="Password" runat="server" Text="Password :" CssClass="usernamelabel" />
  <asp:TextBox ID="Password" runat="server" ValidationGroup="RegisterValidationGroup" TextMode="Password" CssClass="Username-Password" />
</li>
<li>
  <asp:Button ID="loginBtn" class="loginBtn" Text="Login" runat="server" onclick="Login_Click" />
</li>

//C# Code behind
protected void search_Click(object sender, EventArgs e)
{
    Response.Redirect("/SearchResults.aspx?q=" + Server.UrlPathEncode(searchBox.Value));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:34:03.990

你可以试试

```
<asp:TextBox ID="TextBox1" runat="server" onkeydown = "return (event.keyCode!=13);" >
</asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:33:15.937

您可以在面板中包含不希望默认表单提交行为的文本框并设置其 DefaultButton 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:43:01.050

您可以创建一个面板，将您的搜索文本框和按钮放入此面板并设置**DefaultButton="searchBtn"**。我参考了这个链接：[https ://stackoverflow.com/a/7836069/1380428](https://stackoverflow.com/a/7836069/1380428)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:43:28.570

除非我误解了您的问题，否则您可以使用对象的`DefaultButton`属性`asp:Panel`

对于您的登录，请使用...（未经测试）

```
<asp:Panel runat="server" DefaultButton="btnLogin">
  <asp:TextBox runat="server" id="txtUsername" />
  <asp:TextBox runat="server" id="txtPassword" TextMode="Password"/>
  <asp:Button runat="server" id="btnLogin" Text="Login" />
</asp:Panel> 
```

然后为您的搜索...（未经测试）

```
<asp:Panel runat="server" DefaultButton="btnSearch">
  <asp:TextBox runat="server" id="txtSearch" />
  <asp:Button runat="server" id="btnSearch" />
</asp:Panel> 
```

这背后的想法是，如果焦点位于`asp:TextBox`内的a 上`asp:Panel`，则按 Enter 将启动`DefaultButton`。如果您不希望某个特定事件导致回发到服务器，请更新`DefaultButton`以便它自动取消，例如...

```
<asp:Button runat="server" id="btnSearch" OnClientClick="return false;" /> 
```

# android - 每个列表视图项中的旋转进度条

> ID：11119580
> 
> 赞同：13
> 
> 时间：2012-06-20T12:29:16.533
> 
> 标签：android, listview, asynchronous, progress-bar, cycle

我一直在为此挠头很长时间，并没有任何运气地寻找答案！这似乎是微不足道的，但据我所知，它不是。

我在我的 Android 应用程序中使用了一个列表视图，其中每个项目（视图）在加载和显示内容之前显示一个旋转的 ProgressBar（内容是通过 http 调用和 json 检索的，因此可能需要一段时间来处理）。问题是旋转的进度条彼此独立旋转，从而产生了旋转混乱的效果，而不是一排同步的漂亮加载标记。

我已经尝试了我能想出的一切...不在getView（）中回收ProgressBar ...只有一个相同ProgressBar的实例...在列表项可见时重置ProgressBars android：progress（通过onScroll () 在活动中)...等等，但是由于它们在创建时间开始旋转（当在适配器中调用 getView 时）它们将永远不会具有相同的周期同步。

![在此处输入图像描述](../Images/f72a56b90468b5400aeac5bffffe3bf3.png)

欢迎任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:20:28.317

***编辑：现在完美运行！***- 在第一次重复后插入动画侦听器调用 setStartOffset() 回到 0，这样它就不会保持随机“跳跃”。

* * *

我为这个问题找到了一个可行的解决方案，它通过将动画定时到当前系统毫秒来工作。这有点像 hack，因为它使用反射来获取`mAnimation`. `ProgressBar`话虽如此，该字段自创建以来一直保留在 Android 源代码中（最高工作于 4.2）。

创建`android.widget.SyncedProgressBar`类，并使用它而不是`ProgressBar`在您的 .xml 文件中。它实质上使动画在动画持续时间的开始处开始。您还可以`setDuration(500)`尝试验证它是否有效（进度轮会很快旋转）。希望这可以帮助！

```
package android.widget;

import android.annotation.SuppressLint;
import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;

import java.lang.reflect.Field;

/**
* @author Oleg Vaskevich
*
*/
public class SyncedProgressBar extends ProgressBar {

    public SyncedProgressBar(Context context) {
        super(context);
        modifyAnimation();
    }

    public SyncedProgressBar(Context context, AttributeSet attrs) {
        super(context, attrs);
        modifyAnimation();
    }

    public SyncedProgressBar(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        modifyAnimation();
    }

    @Override
    public void setVisibility(int v) {
        super.setVisibility(v);
        modifyAnimation();
    }

    @SuppressLint("NewApi")
    @Override
    protected void onVisibilityChanged(View changedView, int visibility) {
        super.onVisibilityChanged(changedView, visibility);
        modifyAnimation();
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();
        modifyAnimation();
    }

    @Override
    public synchronized void setIndeterminate(boolean indeterminate) {
        super.setIndeterminate(indeterminate);
        modifyAnimation();
    }

    public void modifyAnimation() {
        Field mAnim;
        try {
            mAnim = ProgressBar.class.getDeclaredField("mAnimation");
            mAnim.setAccessible(true);
            AlphaAnimation anim = (AlphaAnimation) mAnim.get(this);
            if (anim == null)
                return;

            // set offset to that animations start at same time
            long duration = anim.getDuration();
            long timeOffset = System.currentTimeMillis() % duration;
            anim.setDuration(duration);
            anim.setStartOffset(-timeOffset);
            anim.setAnimationListener(new AnimationListener() {
                @Override
                public void onAnimationStart(Animation animation) {
                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    animation.setStartOffset(0);
                }

                @Override
                public void onAnimationEnd(Animation animation) {
                }
            });
        } catch (Exception e) {
            Log.d("SPB", "that didn't work out...", e);
            return;
        }
        postInvalidate();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:16:07.333

以下是如何使它工作。只使用一个 AnimationDrawable，复用回调。ProgressBar 并没有真正添加任何东西，您还不如坚持使用 View。创建一个绕过 Drawable 管理的 View 子类。

```
public class Whirly extends View
{
   Drawable image = null;

   public Whirly(Context context, AttributeSet attr)
   {
      super(context, attr);
   }

   @Override
   public void draw(Canvas canvas)
   {
      if (image!=null)
         image.draw(canvas);
   }

   public void setImageDrawable(Drawable image)
   {
      this.image = image;
      invalidate();
   }
} 
```

然后让你的活动以某种方式跟踪所有的漩涡。

```
public class Demo extends Activity implements Drawable.Callback
{
   private Handler h;
   private AnimationDrawable a;

   private Whirly w0;
   private Whirly w1;
   private Whirly w2;
   private Whirly w3;

   public void onCreate(Bundle bundle)
   {
      ...

      h = new Handler();

      a = (AnimationDrawable) getResources().getDrawable(R.drawable.mywhirly);
      int width = a.getIntrinsicWidth();
      int height = a.getIntrinsicHeight();
      a.setBounds(0, 0, width, height);

      w0 = (Whirly) findViewById(R.id.whirly0);
      w1 = (Whirly) findViewById(R.id.whirly1);
      w2 = (Whirly) findViewById(R.id.whirly2);
      w3 = (Whirly) findViewById(R.id.whirly3);

      w0.setImageDrawable(a);
      w1.setImageDrawable(a);
      w2.setImageDrawable(a);
      w3.setImageDrawable(a);

      a.setCallback(this);
      a.start();
   }

   public void invalidateDrawable (Drawable who)
   {
      w0.invalidate();
      w1.invalidate();
      w2.invalidate();
      w3.invalidate();
   }

   public void scheduleDrawable (Drawable who, Runnable what, long when)
   {
      h.postAtTime(what, who, when);
   }

   public void unscheduleDrawable (Drawable who, Runnable what)
   {
      h.removeCallbacks(what, who);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:11:40.380

在您的适配器 getView() 中禁用您的progressViwe，然后为每个progressView

```
handler.postAtTime(new Runnable(){

public void run(){
     progressView.setEnabled(true);
}}, someTimeInTheFuture
); 
```

这将做的是同时启用所有的progressViews。这可能有效，我没有测试过。如果这不起作用，那么您可能希望动态添加progressView（不包含在布局中，但通过addView() 添加）。但是在 runnable 中这样做，这里的关键是让它们都被同时添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T15:26:48.213

挖掘源代码，我发现旋转图像是一个可绘制的，因为私有`Animation`. 没有办法获得视图或动画，因此放弃了我在所有视图上重用一个动画的任何想法。我想说你唯一的选择是 Jug6ernaut 建议的，即使它不是最漂亮的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T00:49:32.623

我不确定这是可能的，因为您的每一行在`ListView`移出屏幕时都会被回收。当屏幕上出现新行时，`ProgressBar`所有视图都必须相互重新同步。保持所有行同步将是一个大 PITA。

您是否考虑过在一个请求中加载所有列表数据并将该数据缓存到本地存储？这将更有效率，并带来更好的用户体验。`ListView`立即加载空行并不是很有用。我宁愿等待列表完全填充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T12:13:45.353

1> 为列表行创建布局

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip" >

    <TextView
        android:id="@+id/word_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="Word 1" />

    <ProgressBar
        android:id="@+id/row_progress"
        style="@style/Widget.Sherlock.Light.ProgressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:indeterminate="true" />

    <ImageView
        android:id="@+id/speaker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/speaker_icon" 
        android:visibility="gone"/>
</RelativeLayout> 
```

2> 然后在getView方法中

```
if(word.getIsWordSynchedLocally() == 1){
                convertView.findViewById(R.id.row_progress).setVisibility(View.GONE);
                convertView.findViewById(R.id.speaker).setVisibility(View.VISIBLE);
            }else{
                convertView.findViewById(R.id.row_progress).setVisibility(View.VISIBLE);
                convertView.findViewById(R.id.speaker).setVisibility(View.GONE);
            } 
```

# web-applications - 用于分类文本或文章的开源引擎

> ID：11119581
> 
> 赞同：-1
> 
> 时间：2012-06-20T12:29:23.693
> 
> 标签：web-applications, text, open-source, artificial-intelligence

是否有任何可以对在线文本或文章进行分类的开源引擎项目。或检查两篇文章的相似性。

例如 1.我有十个不同的文本或文章。然后引擎能够将这篇文章分类到不同的领域，如体育、娱乐、政治。

2.两篇文章描述了同一个事件。引擎能够将它们组合在一起。将它们视为同一篇文章

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:39:08.960

您可以尝试使用[Alchemy API](http://www.alchemyapi.com/products/)。虽然不是开源的，但有一个免费使用层。在您的示例 1 中，他们的主题分类和概念标记可能很有用。在示例 2 的情况下，可以使用任何分类器，如贝叶斯、朴素贝叶斯等，尽管经过培训。[Weka](http://weka.wikispaces.com/)也是一个广泛使用的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:26:52.587

看看 Apache Mahout（开源，java）。

# c++ - 删除指针时出错

> ID：11119588
> 
> 赞同：2
> 
> 时间：2012-06-20T12:29:46.473
> 
> 标签：c++, pointers, delete-operator

我开始了，有些东西我不明白指针。我有以下代码返回一个我不知道为什么的错误：

```
std::string key = "myKey";    
const unsigned char* aesKey = reinterpret_cast<const unsigned char *> (key.c_str());

// Executing some stuffs

delete aesKey; 
```

代码第一次执行时一切正常，但第二次我得到一个错误，如果我没有这`delete`条线，我不会得到（相反我有内存泄漏，非常糟糕）。

有人可以解释我为什么这不起作用？

下面的示例在相同的上下文中工作正常（相同的方法，...）

```
unsigned char* test = new char;
//doing some stuff
delete test; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T12:32:46.363

**第一：**你不拥有那个 C 字符串，所以`delete[]`. `std::string`仍然拥有它，以后会`delete[]`。

**第二：**数组被删除`delete[]`，而不是`delete`。因此，无论如何您都使用了错误的运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:32:37.907

由返回的内存`std::string::c_str`继续归字符串所有，所以它不应该是`delete`d。

你应该只调用`delete`你已经编辑的内存，你`new`不应该使用`new`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:33:03.507

您不应删除从 接收的数据`c_str()`。它指向字符串的内部位置，由字符串来删除它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T12:34:33.520

您不应该删除通过返回的指针`std::string::c_str()`。要记住的一个好的经验法则是：如果您没有为指针分配内存，则不应该释放它。见标准：

> **21.4.7.1 basic_string 访问器**

```
 const charT* c_str() const noexcept;
 const charT* data() const noexcept; 
```

> 1*返回*：一个指针 p 使得 p + i == &operator 用于 [0,size()] 中的每个 i。
> 
> 2*复杂性*：恒定的时间。
> 
> 3*要求*：程序不得更改存储在字符数组中的任何值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T12:34:39.127

几个快速说明：

在您的第一个示例中，您正在删除尚未分配的内存。的内容`aesKey`属于字符串`key`，你不应该删除它们......如果没有别的，当`key`它超出范围时被销毁，它将尝试删除同一块内存，你会得到一个讨厌的双重删除错误.

在您的第二个示例中，您正在创建一个`char`但分配给一个`unsigned char`. 这不是一个好主意，尤其是在您处理更复杂的数据类型时。

# python - 在python中禁用自动转义

> ID：11119593
> 
> 赞同：-1
> 
> 时间：2012-06-20T12:30:22.807
> 
> 标签：python

当从包含已转义文本的基于 Web 的文档中执行简单的打开读取命令时，python 添加`\`到转义`\`：

```
href=\"http:\/\/
into
href=\\"http:\\/\\/ 
```

如何禁用此行为？

### 更新

例如可以复制

```
a= 'href=\"http:\/\/' 
```

或者在我的情况下

我只是做了一个 open() 然后用 mechanize 读取。

那么我如何告诉 python 字符串已经被转义了呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:50:37.423

Python 没有改变任何东西。看下面：

```
>>> a= 'href=\"http:\/\/'
>>> a
'href="http:\\/\\/' # the str() method is called
>>> repr(a)
'\'href="http:\\\\/\\\\/\'' # repr() is meant to be how the object can be "read" back, or provide detailed information
>>> str(a)
'href="http:\\/\\/' # see first example
>>> print a
href="http:\/\/ # any conversion etc... is not performed, ie, you get your original string printed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:57:16.760

Python 这样做只是为了显示目的，并且仅当您在解释器中鬼混时才这样做。

换句话说，它只有在`repr()`显式或隐式使用时才会这样做。

它显示它们，但不使用它们。他们并不真的在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:54:34.103

您不需要转义正斜杠。因此，您的输入字符串有问题。python 输出中的双反斜杠正是解释器表示单个反斜杠的方式，如果您打印它，“\\”将显示为一个。

# java - 从网站上的 PHP 脚本运行 localhost Java Applet

> ID：11119596
> 
> 赞同：1
> 
> 时间：2012-06-20T12:30:32.323
> 
> 标签：java, php, applet

是否可以使用网站上的 PHP 脚本运行加载到用户机器上的 Java Applet，并将几个变量从 PHP 发送到 Applet？

这是一个运行在其中的受控环境，因此无需担心利用。

它（PHP）为applet 提供3 条数据，applet 到另一个无法使用PHP 交互的站点，从该站点获取信息并将其存储在数据库中。当前主机无法运行 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:49:37.587

1.  PHP 脚本提供了一个小程序（或 Java Web Start 程序 - 我已经编写了一个工具来简化 PHP：[PHP JNLP 生成器](http://www.digitalgemstones.com/code/tools/jnlp.php)），您可以在 JNLP 文件中传递任意参数，大概也可以传递给小程序。
2.  Java 程序在客户端运行，无法访问或连接到 PHP 或服务器端数据存储。
3.  Java 程序向您的服务器生成一个请求，该请求会访问一个 PHP 页面并将适当的内容写入数据库：

    ```
    URL url = new URL("http://example.com/storeindb.php?username=xxxxx&arg1=yyyyy&arg2=zzzzz");
    new URLConnection(url).getInputStream(); 
    ```

这当然是潜在的安全风险，因为没有什么可以阻止客户端或其他人加载该页面，以及他们想要的任何数据，因此您需要为您的用例采取任何必要的额外预防措施。任何涉及客户端将数据传递到服务器的解决方案都有类似的风险，需要加以考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:32:56.530

使用服务器端 PHP exec() 在客户端机器上运行 Java Applet？不，不可能。

# wcf - WCF ria 服务，域服务不显示可用上下文

> ID：11119600
> 
> 赞同：1
> 
> 时间：2012-06-20T12:30:41.853
> 
> 标签：wcf, entity, ria

我是 WCF RIA 开发的新手。我创建了一个支持 WCF ria 的 silverlight 4 应用程序。然后我创建了基于本地数据库文件的 ADO.Net 实体数据模型。现在，当我要创建域服务类时，“可用上下文类”下方的下拉列表为空，并且不显示数据源中的表名称。

我是否错过了这里的任何步骤或者没有正确安装。

我正在使用 VS 2010 和 Sql server Express 2008。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T05:07:27.500

如果您正在运行 VS2012，请阅读[http://support.microsoft.com/kb/2745294](http://support.microsoft.com/kb/2745294) 它对我有用。

这里的信息摘要是：

在 Visual Studio 2012 中，Entity Framework 现在默认创建基于“DbContext”的上下文类，但 WCF RIA 服务不支持基于“DbContext”的上下文类。为了将实体框架模型与 WCF RIA 服务一起使用，您必须将其转换为基于“ObjectContext”的模型。这可以使用以下步骤来完成：

1.  在设计器中打开您的实体模型，将“代码生成策略”从“无”更改为“默认”

2.  删除与模型相邻的两个“.tt”文件

3.  重建项目

完成这些步骤后，您将能够在“可用上下文类”列表中选择实体模型的上下文类。此过程的副作用是您现在已将实体模型从基于实体框架 DbContext 的模型转换为基于 ObjectContext 的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T03:43:03.043

如果您使用的是代码优先设计，那么您需要添加 RIAServices.EntityFramework 以添加对 EntityFramework > 4.2 的支持。这可以通过以下方式完成：

```
Install-Package RIAServices.EntityFramework 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:20:35.340

检查您的连接字符串是否缺少元数据资源文件引用。连接字符串应该是这样的：

```
<add name="conString" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=DBName;persist security info=True;user id=username;password=123456;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

# exception - 在功能模块中使用异常

> ID：11119605
> 
> 赞同：0
> 
> 时间：2012-06-20T12:30:47.750
> 
> 标签：exception, abap, function-module

我是 ABAP 的新手，我尝试在 ABAP 中学习功能模块。我创建了一个函数并为其提供了 IMPORT 和 EXPORT,TABLES 的参数，我还想在用户制作我不想要的东西时给他一个例外。

所以，我有两个导入参数，它们是： 这些行是导入和导出字段的列项。

```
i_x TYPE xx
i_type TYPE char2 
```

我有 1 个表参数，即：

```
et_xx_sorted LIKE xx 'this is an exception' 
```

我有 1 个例外行：

```
MAX_RECORD 'There is no record for this.' 
```

我的源代码是：

```
 SELECT * INTO TABLE et_xx_sorted[] FROM xx WHERE yy = i_x. 
```

当用户向 i_x 输入比我选择的边界最大的输入时，我想使用我的异常行。我的意思是有数字 1 到 30 ，但我希望用户只能给出 1 到 20。他/她不能给出 20 到 30。如果输入 20 到 30，程序需要给出 MAX_RECORD 异常并说对用户“没有记录。”

我用了 ：

```
IF sy-subrc <> 0.
    MESSAGE 'No record' TYPE 'E' RAISING MAX_RECORD.
  ENDIF. 
```

但这不是我想要的。有一行 20 - 30 所以这个代码块不适用于我的边框项目。有 1 到 30 行，但用户只能看到 1 到 20。如果他/她给出 20 到 30 行，那么程序应该给出一个异常，我使用它在 EXCEPTIONS 字段中确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:57:22.270

我从你的话中了解到我认为你可以通过这样的方式来管理它；

```
IF i_x LT 20\.  "less than

   SELECT * INTO TABLE et_xx_sorted[] FROM xx WHERE yy = i_x.

ELSEIF i_x GT 20\.  "greater than

   MESSAGE 'No record' TYPE 'E' RAISING MAX_RECORD.

ENDIF. 
```

希望它有帮助。

塔尔哈

# qt - QGraphicsItem.scene() 的 0/0 点（限制项目移动）

> ID：11119606
> 
> 赞同：0
> 
> 时间：2012-06-20T12:30:48.610
> 
> 标签：qt, qgraphicsitem, qgraphicsscene

我在限制 QGraphicItems 的移动时遇到问题：

```
QVariant CustomRectItem::itemChange(GraphicsItemChange change, const QVariant& value)
{
    if (change == QGraphicsItem::ItemPositionChange && this->scene()) {

        // parameter value is the new position
        QPointF newPos = value.toPointF();
        QRectF rect = this->scene()->sceneRect();

        // keep the item inside the scene rect
        if (!rect.contains(newPos)) {
            if(newPos.x() < rect.x())
                newPos.setX(rect.x());
            return newPos;
        }
    }
    return QGraphicsItem::itemChange(change, value);
} 
```

这段代码应该防止一个项目被拖到场景的左边，从而增加它的大小。它有点工作。我的问题是：

我在创建场景时插入项目。On 位于 x=0（场景坐标）。另一个位于 x=10（场景坐标）。使用此代码，我不能拖动 x=10 左侧的第二个项目。

似乎对**QGraphicsItem::scene()**的调用为这两个项目返回了不同的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:04:06.050

我在这个线程中找到了答案： [为什么 QGraphicsItem::scenePos() 不断返回 (0,0)](https://stackoverflow.com/questions/1151849/qt-4-5-why-does-a-qgraphicsitemscenepos-keeps-returning-0-0)

问题出在项目的创建中。小心不要将它们放置在构造函数中。出现在场景中后必须定位它们......

```
for (int i = 0; i < 3; ++i){
    for (int j = 0; j < 3; ++j){
        item = new CustomRectItem(0, 0, 20, 20);
        item->setFlags(QGraphicsItem::ItemIsMovable |
                       QGraphicsItem::ItemSendsScenePositionChanges);
        scene->addItem(item);
        item->setPos(i*30, j*30);
    }
} 
```

# operating-system - 地址绑定生成相同地址

> ID：11119607
> 
> 赞同：9
> 
> 时间：2012-06-20T12:30:53.053
> 
> 标签：operating-system

为什么编译时和加载时地址绑定会生成相同的物理和逻辑地址，而执行时地址绑定会生成不同的物理和逻辑地址？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-11T18:21:21.427

自从提出这个问题以来已经很久了，但我只是出于存档目的添加答案。

让我们看一下下面的定义：

`Logical address`: CPU 生成的地址

`Physical address`: 内存管理单元 (MMU) 看到的地址

现在`compile time binding`我们假设一定范围的内存位置总是可用的（这对于程序来说已经足够了）并且生成了绝对代码。因此，无论 CPU 生成什么地址（如指针地址等），都与 MMU 看到的相同。

更好的内存利用率版本是将绑定延迟到加载时间，这样内存就不会被磁盘上的程序使用。为此，以可重定位格式生成的代码。这是`load time binding`.

现在`execution time binding`有点不同，绑定延迟到执行时间。在这种情况下，CPU 生成一个地址，比如说`300`，并对地址进行所有操作，`300`但是只要有实际的内存访问，这个地址就会通过将可重定位寄存器的值（比如说`R`）添加到这个地址来转换。所以逻辑地址范围是`0-LIM`，而物理地址空间是`R-(R+LIM)`。

让我也用一个例子来解释一下，这样就更清楚了：

如果您交换了一个程序，则考虑交换，`load time binding`您需要将其交换回同一位置（因为指令中的所有地址都是根据该地址出价的），而在`execution time binding`您可以将任何进程交换回任何位置，因为您只需要更改可重定位寄存器中的值，它会正常工作。从而提高内存利用率。

# c# - 在具有多个实例的 Windows azure 中执行 Methode

> ID：11119614
> 
> 赞同：0
> 
> 时间：2012-06-20T12:31:15.503
> 
> 标签：c#, azure, azure-storage

我想在我的 Windows azure 应用程序中执行作业调度程序方法。所以在我的应用程序中，我使用了同一应用程序的 2 个实例。所以如果我创建一个调度程序意味着两个实例都可以执行相同的代码。是否有可能避免这种执行？或者是否可以在执行代码之前检查其他实例？对于实现，我使用的是 c#.Net。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:41:12.447

最常见的模式是自选控制器。在这种模式中，当这些进程启动时，它们会尝试在某物上创建一个独占租约，比如一个 blob 对象。获得租约的第一个过程是实际执行需要完成的任何处理的过程。然后它还将定期更新租约，以确保它仍然是“控制者”。任何未能获得租约的实例然后进入睡眠状态并稍后（几分钟、几秒、几小时......）查看它们是否可以立即获得租约并成为控制器。这允许原始控制器崩溃或关闭，然后另一个实例将接管作为控制器的工作。

# java - 飞碟 - ITextRenderer createPdf 非常慢

> ID：11119629
> 
> 赞同：2
> 
> 时间：2012-06-20T12:32:09.313
> 
> 标签：java, pdf, html-parsing, flying-saucer

我正在尝试使用 iText 和飞碟从 Html 生成 PDF。我使用了 SO 上建议的不同技术来快速启用`DocumentBuilder` *解析*。

但是，`ITextRenderer createPdf(outputstream)`已经成为瓶颈。它非常慢，我不知道如何提高该过程的速度。

任何帮助将非常感激。

```
private Document getDocument(String htmlContent) throws Exception
{
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    //For faster document.
    factory.setNamespaceAware(false);
    factory.setValidating(false);
    factory.setFeature("http://xml.org/sax/features/namespaces", false);
    factory.setFeature("http://xml.org/sax/features/validation", false);
    factory.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
    factory.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
    DocumentBuilder builder = factory.newDocumentBuilder();
    builder.setEntityResolver(FSEntityResolver.instance());
    return builder.parse(new ByteArrayInputStream(htmlContent.getBytes()));
}

public void printHtmlToPdf(final String htmlContent, String tempFile, String title) throws Exception
{
    Document document =  getDocument(htmlContent);
    ITextRenderer renderer = new ITextRenderer();
    renderer.setDocument(document, null);
    BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(tempFile)); 
    renderer.layout();
    renderer.createPDF(outputStream);
    outputStream.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:58:29.083

我遇到了同样的问题，PDF 创建速度很慢并且`<IMG src="http:...">`没有解决。

这是因为没有使用 HTTP 代理，我猜有很多“http://”超时。

在我的情况下，修复是

```
System.setProperty("java.net.useSystemProxies", "true"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:52:00.750

这可能只是一个缓冲问题。如果您还没有这样做，请尝试用 a 包装输出流`BufferedOutputStream`并将其用作`createPdf`参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T14:34:26.173

下面的部分应该可以解决它。

```
package com.pdf.web;

import com.lowagie.text.DocumentException;
import java.io.*;
import org.xhtmlrenderer.layout.SharedContext;
import org.xhtmlrenderer.pdf.ITextRenderer;
import org.xhtmlrenderer.resource.XMLResource;
import org.xml.sax.InputSource;

// Referenced classes of package com.pdf.web:
//            PDFRender

public class createPDF
{

    public createPDF()
    {
    }

    public createPDF(String url, String pdf)
        throws IOException, DocumentException
    {
        OutputStream os;
        os = null;
        os = new FileOutputStream(pdf);
        ITextRenderer renderer = new ITextRenderer();
        PDFRender.ResourceLoaderUserAgent callback = new PDFRender.ResourceLoaderUserAgent(renderer.getOutputDevice());
        callback.setSharedContext(renderer.getSharedContext());
        renderer.getSharedContext().setUserAgentCallback(callback);
        org.w3c.dom.Document doc = XMLResource.load(new InputSource(url)).getDocument();
        renderer.setDocument(doc, url);
        renderer.layout();
        renderer.createPDF(os);
        os.close();
        os = null;
        if(os != null)
        {
            try
            {
                os.close();
            }
            catch(IOException e)
            {
                e.printStackTrace();
            }
        }
        break MISSING_BLOCK_LABEL_143;
        Exception exception;
        exception;
        if(os != null)
        {
            try
            {
                os.close();
            }
            catch(IOException e)
            {
                e.printStackTrace();
            }
        }
        throw exception;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-30T13:04:26.843

我在使用 ITextRenderer 时遇到了类似的问题，当我修复 createReplacedElement 方法以查找图像等其他资源时，问题得到了缓解。

createReplacedElement 方法是接口 ReplacedElementFactory 的一部分。

我在创建项目时使用此页面作为基础，您可以在其中阅读有关 createReplacedElement 的信息：[https ://www.baeldung.com/java-html-to-pdf](https://www.baeldung.com/java-html-to-pdf)

# php - 使用 PHP Excel 转换 Excel 日期

> ID：11119631
> 
> 赞同：26
> 
> 时间：2012-06-20T12:32:25.970
> 
> 标签：php, import-from-excel

我正在从 excel 中读取日期，格式为 2012 年 12 月 5 日/月/年，使用此代码读取。使用 PHP EXCEL

```
 PHPExcel_Style_NumberFormat::toFormattedString($value['A'],'YYYY-MM-DD' ); 
```

将上述日期 '12/5/2012' 转换为 '2012-12-05'

现在的问题是，如果日期是 18/5/2012，或者您可以说如果我设置的日期大于 12，它会在格式化后以这种格式 18/5/2012 给我这个日期 18/5/2012

我也试过这个东西

```
 $temp  = strtotime(  PHPExcel_Style_NumberFormat::toFormattedString($value['A'],'YYYY-MM-DD' );
      $actualdate = date('Y-m-d',$temp) ; 
```

这也将日期 '12/5/2012' 正确转换，但在这种情况下 18/5/2012 它给出的输出为 1970-01-01

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-28T13:40:15.553

请使用此公式从 Excel 日期更改为 Unix 日期，然后您可以使用“gmdate”获取 PHP 中的真实日期：

```
UNIX_DATE = (EXCEL_DATE - 25569) * 86400 
```

并将 Unix 日期转换为 Excel 日期，请使用以下公式：

```
EXCEL_DATE = 25569 + (UNIX_DATE / 86400) 
```

将此公式放入变量后，您可以使用以下示例在 PHP 中获取实际日期：

```
$UNIX_DATE = ($EXCEL_DATE - 25569) * 86400;
echo gmdate("d-m-Y H:i:s", $UNIX_DATE); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-11-04T14:00:39.497

使用 PHPExcel 时，您可以使用内置函数：

```
$excelDate = $cell->getValue(); // gives you a number like 44444, which is days since 1900
$stringDate = \PHPExcel_Style_NumberFormat::toFormattedString($excelDate, 'YYYY-MM-DD'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-04T10:58:15.090

一个简单的方法...

```
<?php
    $date = date_create('30-12-1899');

    date_add($date, date_interval_create_from_date_string("{$value['A']} days"));
    echo date_format($date, 'Y-m-d'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T14:53:17.487

看来您的变量是一个字符串，或者需要一个美国格式的日期。
使用 'DateTime::createFromFormat' 将日期转换为实际的日期格式

```
$date = DateTime::createFromFormat('d/m/y', $value['A']);
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-07-16T10:56:56.037

如果您使用的是 python，我通过从 xlrd lib 添加 xldate 类解决了这个问题，这里我向您展示代码（这是在 Odoo 10 模块中）：

```
from xlrd import open_workbook, xldate
wb = open_workbook(file_contents=excel_file)
data_sheets = []

        # Parse all data from Excel file
        for s in wb.sheets():
            data_rows = []
            headers = []
            for row_key, row in enumerate(range(s.nrows)):
                if row_key != 0:
                    data_row = {}
                    for index, col in enumerate(range(s.ncols)):
                        value = s.cell(row, col).value
                        key = headers[int(index)]
                        if key == 'Date' and (isinstance(value, float) or isinstance(value, int)):
                            value = xldate.xldate_as_datetime(value, wb.datemode)
                            data_row[key] = value
                        else:
                            data_row[key] = value

                    data_rows.append(data_row)
                else:
                    for index, col in enumerate(range(s.ncols)):
                        value = (s.cell(row, col).value)
                        headers.append(value)
            data_sheets.append(data_rows) 
```

**value = xldate.xldate_as_datetime(value, wb.datemode)**将返回具有正确值的日期时间对象

# python - 十六进制数的按位异或

> ID：11119632
> 
> 赞同：43
> 
> 时间：2012-06-20T12:32:29.823
> 
> 标签：python, hex, bit-manipulation, xor

我们如何在 Python 中对十六进制数进行异或运算？例如，我想对 和 进行异或`'ABCD'`，`'12EF'`答案应该是`'B922'`。

我使用了下面的代码，但它给出了错误的结果。

```
# xor two strings of different lengths
def strxor(a, b):
    if len(a) > len(b):
        return "".join(["%s" % (ord(x) ^ ord(y)) for (x, y) in zip(a[:len(b)], b)])
    else:
        return "".join(["%s" % (ord(x) ^ ord(y)) for (x, y) in zip(a, b[:len(a)])])

key = '12ef'
m1 = 'abcd'
print(strxor(key, m1)) 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-20T12:34:19.887

哇。你真的把它复杂化了很长一段距离。尝试：

```
>>> print(hex(0x12ef ^ 0xabcd))
0xb922 
```

你似乎忽略了这些方便的事实，至少：

*   Python 原生支持带`0x`前缀的十六进制整数文字。
*   “十六进制”只是一个演示细节；算术以二进制形式完成，然后将结果打印为十六进制。
*   输入的格式（十六进制文字）和输出之间没有联系，Python 变量中没有“十六进制数”之类的东西。
*   该`hex()`函数可用于将任意数字转换为十六进制字符串进行显示。

如果您已经将数字作为字符串，则可以使用该`int()`函数通过提供预期的基数（十六进制数字为 16）来转换为数字：

```
>>> print(int("12ef", 16))
4874 
```

所以你可以做两次转换，执行异或，然后转换回十六进制：

```
>>> print(hex(int("12ef", 16) ^ int("abcd", 16)))
0xb922 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T15:01:46.933

如果两个十六进制字符串的长度相同并且你想要一个十六进制字符串输出，那么你可以试试这个。

```
def hexxor(a, b): # xor 两个相同长度的十六进制字符串
    return "".join(["%x" % (int(x,16) ^ int(y,16)) for (x, y) in zip(a, b)])

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-06T05:37:49.030

如果字符串的长度相同，那么我会选择`'%x' % ()`内置的 xor ( `^`)。

例子 -

```
>>>a = '290b6e3a'
>>>b = 'd6f491c5'
>>>'%x' % (int(a,16)^int(b,16))
'ffffffff'
>>>c = 'abcd'
>>>d = '12ef'
>>>'%x' % (int(a,16)^int(b,16))
'b922' 
```

如果字符串的长度不同，则使用切片将较长的字符串截断为较短的长度`longer = longer[:len(shorter)]`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-06T07:04:00.763

这是一个更好的功能

```
def strxor(a, b):     # xor two strings of different lengths
    if len(a) > len(b):
        return "".join([chr(ord(x) ^ ord(y)) for (x, y) in zip(a[:len(b)], b)])
    else:
        return "".join([chr(ord(x) ^ ord(y)) for (x, y) in zip(a, b[:len(a)])]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-28T16:00:53.340

出于性能目的，这里有一些代码来对这两种替代方案进行基准测试：

```
#!/bin/python

def hexxorA(a, b):
    if len(a) > len(b):
        return "".join(["%x" % (int(x,16) ^ int(y,16)) for (x, y) in zip(a[:len(b)], b)])
    else:
        return "".join(["%x" % (int(x,16) ^ int(y,16)) for (x, y) in zip(a, b[:len(a)])])

def hexxorB(a, b):
    if len(a) > len(b):
        return '%x' % (int(a[:len(b)],16)^int(b,16))
    else:
        return '%x' % (int(a,16)^int(b[:len(a)],16))

def testA():
    strstr = hexxorA("b4affa21cbb744fa9d6e055a09b562b87205fe73cd502ee5b8677fcd17ad19fce0e0bba05b1315e03575fe2a783556063f07dcd0b9d15188cee8dd99660ee751", "5450ce618aae4547cadc4e42e7ed99438b2628ff15d47b20c5e968f086087d49ec04d6a1b175701a5e3f80c8831e6c627077f290c723f585af02e4c16122b7e2")
    if not int(strstr, 16) == int("e0ff3440411901bd57b24b18ee58fbfbf923d68cd88455c57d8e173d91a564b50ce46d01ea6665fa6b4a7ee2fb2b3a644f702e407ef2a40d61ea3958072c50b3", 16):
        raise KeyError
    return strstr

def testB():
    strstr = hexxorB("b4affa21cbb744fa9d6e055a09b562b87205fe73cd502ee5b8677fcd17ad19fce0e0bba05b1315e03575fe2a783556063f07dcd0b9d15188cee8dd99660ee751", "5450ce618aae4547cadc4e42e7ed99438b2628ff15d47b20c5e968f086087d49ec04d6a1b175701a5e3f80c8831e6c627077f290c723f585af02e4c16122b7e2")
    if not int(strstr, 16) == int("e0ff3440411901bd57b24b18ee58fbfbf923d68cd88455c57d8e173d91a564b50ce46d01ea6665fa6b4a7ee2fb2b3a644f702e407ef2a40d61ea3958072c50b3", 16):
        raise KeyError
    return strstr

if __name__ == '__main__':
    import timeit
    print("Time-it 100k iterations :")
    print("\thexxorA: ", end='')
    print(timeit.timeit("testA()", setup="from __main__ import testA", number=100000), end='s\n')
    print("\thexxorB: ", end='')
    print(timeit.timeit("testB()", setup="from __main__ import testB", number=100000), end='s\n') 
```

以下是结果：

```
Time-it 100k iterations :
    hexxorA: 8.139988073991844s
    hexxorB: 0.240523161992314s 
```

似乎`'%x' % (int(a,16)^int(b,16))`比 zip 版本更快。

# java - Google App Engine 中的 ConcurrentModificationException - Struts 2 会话

> ID：11119648
> 
> 赞同：1
> 
> 时间：2012-06-20T12:33:21.773
> 
> 标签：java, google-app-engine, struts2

我在 Google App Engine 中使用 Struts2。

我的注销操作：

```
public String logout(){     
    ActionContext.getContext().getSession().clear();
    return SUCCESS;
} 
```

在我的 appengine-web.xml 中：

```
<sessions-enabled>true</sessions-enabled>
<async-session-persistence enabled="true" /> 
```

部署后，尝试注销时出现以下错误：

```
java.util.ConcurrentModificationException
      java.util.HashMap$HashIterator.nextEntry(HashMap.java:810)
      java.util.HashMap$KeyIterator.next(HashMap.java:845)
      java.util.Collections$2.nextElement(Collections.java:3647)
      org.apache.struts2.dispatcher.SessionMap.clear(SessionMap.java:91)
      dating.dating.LogAction.logout(LogAction.java:80)
      sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
      sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      java.lang.reflect.Method.invoke(Method.java:43)
      com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
      com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
      org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
      com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
      org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
      com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
      com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
      com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
      com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
      com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
      org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
      org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
      org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
      org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
      org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
      org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
      org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
      org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
      org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
      org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
      org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
      org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
      org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
      org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
      org.mortbay.jetty.Server.handle(Server.java:326)
      org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
      org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
      org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
      com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
      com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
      com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
      com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
      com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
      com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
      java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:58:46.360

使用会话感知接口，然后在会话映射上使用 session.remove(Object key)

# ios - hitTest:withEvent: UIEvent allTouches 为空

> ID：11119652
> 
> 赞同：15
> 
> 时间：2012-06-20T12:33:41.943
> 
> 标签：ios, uiview, uitouch, uievent

我有一个`UIView`实现的习惯`hitTest:withEvent:`

```
-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    .... some code ....

    int x = 0;
    x = [[event allTouches] count];
    return [super hitTest:point withEvent:event];
} 
```

问题是`x`总是如此`0`。我是否已经实现了其他 API 或配置了这些 API`UIView`以开始接触？

我只需要它来区分触摸开始/移动和结束。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-10-04T20:49:30.193

尝试这个

```
yourView.userInteractionEnabled = YES; 
```

iOs 提供了在视图层次结构中取消用户交互的可能性。据说，在 iOS 上的事件链中，可以忽略视图堆栈中最直接视图中的触摸事件，然后层次结构中的下一个视图将尝试负责响应交互。

前面说过，应该响应用户交互的视图可能会被设置为 NO，因此层次结构中的下一个视图将响应事件。这可能是它不适合您的原因。

# android - Android - WebView 中的 AdSense（适用于 BlackBerry Playbook - Android Runtime）

> ID：11119654
> 
> 赞同：6
> 
> 时间：2012-06-20T12:33:44.237
> 
> 标签：android, webview, adsense, playbook

我想在 Android 的 A WebView 中显示 AdSense 广告。我知道我可以只使用 AdMob 广告，但我正在为 Playbook 进行开发，并且 Playbook 刚刚获得了 Android 虚拟运行时，因此大多数 AdMob 广告都没有显示，因为它们针对的是 Play Store 上的 Android 应用程序并且因为 Playbook 没有有一个Play商店，它不会显示。所以我宁愿使用 AdSense 广告，但我不知道如何使用它们，我没有网络开发经验。有人可以给我一些提示如何存档吗？

到目前为止，我刚刚在应用程序的底部设置了一个 WebView。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:30:30.260

我记得读过移动应用上的 AdSense 违反了 Google 指南（但我对此并不完全确定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T07:53:24.940

是的，您可以在 WebView 中使用 AdSense，这不违反 Google 政策。但是，您不能直接在应用程序本身中使用 AdSense。

# iphone - 为什么认证完成后（调用 authenticateWithCompletionHandler 方法），Game Kit 不调用我的游戏提供的块对象？

> ID：11119655
> 
> 赞同：2
> 
> 时间：2012-06-20T12:33:50.433
> 
> 标签：iphone, game-center, gamekit

当我调用 authenticateWithCompletionHandler 方法来授权 AGC 时，我单击 Cancel 按钮并关闭 UI。如果稍后我再次调用 authenticateWithCompletionHandler，这一次 Game Kit 不会调用我的游戏提供的块对象。

谁能告诉我为什么？

我的代码如下：

```
- (void) authenticateLocalUser {
  NSLog(@"====inside authenticateLocalUser");
  [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) {
  NSLog(@"==== error is %@", error);
  [self callDelegateOnMainThread: @selector(finishAuthenticateLocalUser:) withArg: NULL error: error]; 
```

}]; }

日志如下：

```
2012-06-20 19:24:06.569 HighNoon[4140:707] ====inside authenticateLocalUser
2012-06-20 19:24:06.571 HighNoon[4140:707] authenticateWithCompletionHandler: enter
2012-06-20 19:24:06.572 HighNoon[4140:707] authenticateWithCompletionHandler: exit 
```

# jquery - 试图在jsfiddle中序列化

> ID：11119656
> 
> 赞同：1
> 
> 时间：2012-06-20T12:34:04.363
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有以下 jsfiddle 我试图序列化一个类：

HTML：

```
<content>
<div class="portlet portlet_1 portlet_content_1 new">some content here</div>
<div class="portlet portlet_1 portlet_content_1 new">some content here</div>
<div class="portlet portlet_1 portlet_content_1 new">some content here</div>
<div class="portlet portlet_2 portlet_content_2 new">some content here</div>
<div class="portlet portlet_2 portlet_content_2 new">some content here</div>
<div class="portlet portlet_3 portlet_content_3 new">some content here</div>
</content>

<button>Serialize</button>​ 
```

JS：

```
$("content").sortable();

$("button").on("click", function() {
    var data = $("content").sortable("serialize", {
        key: "item",
        attribute: "class"
    });
    alert(data);
});​ 
```

[http://jsfiddle.net/WTTsB/2/](http://jsfiddle.net/WTTsB/2/)

在警报中，我应该得到：

> 项目=1&项目=1&项目=1&项目=2&项目=2&项目=3

我不知道如何处理这个问题，因为每个 div 标签都有多个类。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:42:01.720

这样做：http: [//jsfiddle.net/phenomnomnominal/WTTsB/5/](http://jsfiddle.net/phenomnomnominal/WTTsB/5/)

```
<content>
    <div class="new portlet portlet_1 portlet_content_1">some content here</div>
    <div class="new portlet portlet_1 portlet_content_1">some content here</div>
    <div class="new portlet portlet_1 portlet_content_1">some content here</div>
    <div class="new portlet portlet_2 portlet_content_2">some content here</div>
    <div class="new portlet portlet_2 portlet_content_2">some content here</div>
    <div class="new portlet portlet_3 portlet_content_3">some content here</div>
</content> 
```

从[可排序：](http://docs.jquery.com/UI/Sortable#methods)

> 默认情况下，它通过以“setname_number”格式查看每个项目的 id 来工作，并且 > 它会输出一个类似于“setname[]=number&setname[]=number”的哈希值。

这必须通过某种字符串操作发生，因此它不是得到“1”，而是返回“1 new”。重新排序类意味着您的 CSS 等将保持不变，但该函数可以正确读取属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:50:27.270

您可以按照 phenomnomnominal 所说的那样做，因为序列化程序方法不处理空间，它无法猜测它必须解析哪个类，因此它会解析它识别的最后一个类。但是你可以用你自己的正则表达式强制它，但我找不到任何文档，仍然应该这样调用：

```
var data = $("content").sortable("serialize", {
    key: "item",
    attribute: "class",
    expression: /(.+)_(.+)/
}); 
```

第一组是你的关键属性，第二组是你的价值；这个解析类是这样的：

```
class="myclass_234" 
```

到：

```
item=234 
```

# java - 为什么 Hibernate STRING 无法解决？

> ID：11119672
> 
> 赞同：9
> 
> 时间：2012-06-20T12:34:53.113
> 
> 标签：java, hibernate

我刚刚下载了 Hibernate 4.0.1 最终版本的新版本。很奇怪，当我输入以下代码时：

```
Hibernate.STRING 
```

Eclipse IDE 在 STRING 关键字上显示错误。我确信我的构建路径中有 hibernate jar，并且还包含以下代码：

```
import org.hibernate.Hibernate; 
```

我只是想知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T12:37:21.630

因为[该字段在 4.0 中不存在](https://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/Hibernate.html)。

[3.5 中](https://docs.jboss.org/hibernate/core/3.5/javadocs/org/hibernate/Hibernate.html#STRING)的现场文档是这样说的：

> **已弃用。** *见[http://opensource.atlassian.com/projects/hibernate/browse/HHH-5138](http://opensource.atlassian.com/projects/hibernate/browse/HHH-5138)*

您现在可以使用[`StandardBasicTypes.STRING`](https://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/type/StandardBasicTypes.html#STRING)（这几乎是[`StringType.INSTANCE`](https://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/type/StringType.html#INSTANCE)）。

# entity-framework - EF 4.3 Code First 说无法创建约束

> ID：11119674
> 
> 赞同：0
> 
> 时间：2012-06-20T12:34:57.047
> 
> 标签：entity-framework, ef-code-first

我有这两个实体：

```
public class User
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
        public bool? IsActive { get; set; }
        public bool? IsAdmin { get; set; }
        public bool? DeletedFlag { get; set; }
        public DateTime LastLoginDate { get; set; }
        public DateTime CreatedDate { get; set; }

        public virtual ICollection<Vote> VoterUser { get; set; }
        public virtual ICollection<Vote> VotedUser { get; set; }

    }

public class Vote
    {
        public int Id { get; set; }
        public DateTime VoteDate { get; set; }
        public int Rate { get; set; }
        public int UserId { get; set; }
        public int VoterId { get; set; }

        public User VotedUser { get; set; }
        public User VoterUser { get; set; }
    } 
```

并在流利的 api 中定义了这样的外键：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

            modelBuilder.Entity<User>().HasKey(x => x.Id).Property(x => x.Id).IsRequired();
            modelBuilder.Entity<User>().HasMany(x => x.VotedUser).WithRequired(q => q.VotedUser).HasForeignKey(
                q => new {q.UserId});
            modelBuilder.Entity<User>().HasMany(x => x.VoterUser).WithRequired(q => q.VoterUser).HasForeignKey(
                q => new {q.VoterId});

            modelBuilder.Entity<Vote>().HasKey(x => x.Id).Property(x => x.Id).IsRequired();
            modelBuilder.Entity<Vote>().HasRequired(x => x.VotedUser).WithMany().HasForeignKey(p => p.UserId);
            modelBuilder.Entity<Vote>().HasRequired(x => x.VoterUser).WithMany().HasForeignKey(p => p.VoterId);

            base.OnModelCreating(modelBuilder);
        } 
```

但是当我尝试创建我得到的数据库时；

> “在表 'Votes' 上引入 FOREIGN KEY 约束 'FK_Votes_Users_UserId' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。”

我在哪里犯了错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:58:15.110

您需要将[WillCascadeOnDelete(false)](http://msdn.microsoft.com/en-us/library/gg679348%28v=vs.103%29.aspx)添加到 Vote 外键，即：

```
 modelBuilder.Entity<Vote>().HasRequired(x => x.VotedUser).WithMany().HasForeignKey(p => p.UserId)
                    .WillCascadeOnDelete(false);
        modelBuilder.Entity<Vote>().HasRequired(x => x.VoterUser).WithMany().HasForeignKey(p => p.VoterId)
                    .WillCascadeOnDelete(false); 
```

错误消息已经描述了发生的事情。通过在 Vote 和 User 之间添加 HasMany 和 HasRequired 关系，您可以创建从 User 到 Vote 的多个 FK，反之亦然。

如果您删除一个表中的一行，这将导致另一个表上[的级联删除](http://msdn.microsoft.com/en-us/library/ms186973%28v=SQL.105%29.aspx)并再次返回。这可能会导致竞争条件，因此 SQL Server 更喜欢阻止事务而不是导致失控的更改。您可以通过使用 ON DELETE NO ACTION 子句指定其中一个关系不会导致级联更改来避免这种情况。

在您的情况下，我怀疑主要实体始终是用户，在这种情况下，投票->用户关系应该用 NO ACTION 子句标记。

要使用 Fluent API 执行此操作，您需要使用[WillCascadeOnDelete(false)](http://msdn.microsoft.com/en-us/library/gg679204%28v=vs.103%29)扩展方法。

# java - WebLogic 上的 CXF：JAXBException - 不支持属性

> ID：11119679
> 
> 赞同：3
> 
> 时间：2012-06-20T12:35:18.967
> 
> 标签：java, weblogic, cxf, weblogic-10.x

我已经使用 cxf-codegen-plugin 生成了一个 Web 服务客户端，并且我在本地运行此代码很好，它连接到 Web 服务。

当我尝试将我的应用程序部署到我们的 WebLogic 服务器时，问题就出现了。当我的`*ServiceImplService`类被尝试实例化时，会抛出以下异常：

```
Caused by: javax.xml.bind.JAXBException: property "supressAccessorWarnings" is not supported 
```

根据我收集到的信息，这可能源于 WebLogic 提供了一些 jaxb 相关类的旧版本。我（分别）尝试添加`com.sun.xml.bind.*`,和`javax.xml.*`，`javax.jws.*`甚至绝望地添加`com.sun.*`到`prefer-application-packages`元素 of `weblogic-application.xml`，但结果仍然相同。

任何人都知道什么可以解决这个问题，或者有关于调试的建议？

* * *

**一些附加信息，如果它是相关的**

*   CXF 版本：2.6.1
*   WebLogic 版本：10.3.4.0

weblogic-application.xml，没有我尝试过的任何修改：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<wls:weblogic-application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wls="http://www.bea.com/ns/weblogic/90" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/j2ee_1_4.xsd http://www.bea.com/ns/weblogic/90 http://www.bea.com/ns/weblogic/90/weblogic-application.xsd">
    <wls:prefer-application-packages>
        <wls:package-name>org.hibernate.*</wls:package-name>
        <wls:package-name>antlr.*</wls:package-name>
        <wls:package-name>org.springframework.*</wls:package-name>
        <wls:package-name>net.bull.*</wls:package-name>   
        <wls:package-name>org.apache.commons.*</wls:package-name>
    </wls:prefer-application-packages>
</wls:weblogic-application> 
```

抛出的异常：

```
Caused by: javax.xml.bind.JAXBException: property "supressAccessorWarnings" is not supported
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:118)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:202)
    at sun.reflect.GeneratedMethodAccessor391.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:128)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:277)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:372)
    at weblogic.wsee.jaxws.tubeline.ConfigReaderTubelineDeploymentListener.readConfigFile(ConfigReaderTubelineDeploymentListener.java:164)
    at weblogic.wsee.jaxws.tubeline.ConfigReaderTubelineDeploymentListener.init(ConfigReaderTubelineDeploymentListener.java:52)
    at weblogic.wsee.jaxws.spi.WLSServiceDelegate$WLSTubelineDeploymentListenerRepository.<init>(WLSServiceDelegate.java:323)
    at weblogic.wsee.jaxws.spi.WLSServiceDelegate.<init>(WLSServiceDelegate.java:94)
    at weblogic.wsee.jaxws.spi.WLSProvider$ServiceDelegate.<init>(WLSProvider.java:586)
    at weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:120)
    at weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:112)
    at weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:83)
    at javax.xml.ws.Service.<init>(Service.java:56)
    at <my package name>.PutSituationServiceImplService.<init>(PutSituationServiceImplService.java:47)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:12:57.197

如果有人提出更好的答案，我会将其标记为选定的答案，但现在：

这似乎源于 WebLogic 提供了 JAXB 2.0 和 JAXB 2.1，而这个版本的 CXF 使用了 JAXB 2.2 功能。

据我了解，不可能使用`prefer-package-elements`1) 已导入 JDK 的类或 2) sun 内部类使用。您可以选择将 jar 文件放在 JDK/JRE 的认可文件夹中，但我不想走这条路。

目前我已将 CXF 降级到 v.2.2.12，这是使用 JAXB 2.1 的最后一个 CXF 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T14:01:06.770

同样的错误是由 METRO 2.0 库引起的。当您尝试从 wdsl 创建 Web 服务时，该库会自动添加到 NetBeans 项目中。

因为我不需要这个库，所以我从项目中删除了它。

# eclipse - 将基于 eclipse/cdt 的构建集成到持续集成中

> ID：11119680
> 
> 赞同：9
> 
> 时间：2012-06-20T12:35:21.493
> 
> 标签：eclipse, jenkins, eclipse-cdt

我必须重用当前在 Eclipse 中开发的主要 C++ 项目，使用 CDT、mingw 和 cdt 托管构建功能（没有外部 makefile 或构建环境）。项目本身由许多子项目组成。

我想将该构建集成到持续集成服务器（即詹金斯）中，因此必须能够自动化无头构建。

到目前为止，我设法签出项目（从 jenkins 很容易）并使用 eclipse 以无头模式构建它，使用以下命令：

```
C:\prog\EclipseCdt\eclipse -nosplash -application org.eclipse.cdt.managedbuilder.core.headlessbuild -import %WORKSPACE%\project1 -import %WORKSPACE%\project2 -import %WORKSPACE%\project3 -build all 
```

然而这还不够：

*   build 是异步的：先前的命令返回（实际上是分叉），而我希望它保持上下文直到我得到结果（就像`make`在 linux 或`devenv`windows 上一样）
*   我无法提取构建日志（最好将它们放在一个文件中）：要集成到我的连续信息中，我需要能够解析我的构建日志以显示有趣的信息（想想损坏的文件）
*   理想情况下，我想从 Eclipse 获得指示通过或失败的直接状态（返回代码）。

知道如何有这种行为吗？

注意：

*   使用备用（外部）构建系统目前不是一种选择（我必须保留 cdt 托管构建，它有很多复杂的历史）
*   尽管我的需求显然很简单，但我已经查看了堆栈溢出和谷歌并没有设法找到一种方法
*   我目前在 windows 7 / mingw 4.5.2 / Eclipse IDE for C/C++ Developers Version: Indigo Release Build id: 20110615-0604 但我认为问题是 x-platform

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T08:12:45.043

看起来如果我以交互方式从 cmd 启动 eclipse，它会分叉，如果从 bat 脚本启动，它不会。所以把前一行放在詹金斯就足够了。

笔记：

*   您需要添加`-data`参数来定义工作台的位置（我每次都清理构建）
*   像往常一样，责怪windows并加上引号....
*   `--launcher.suppressErrors`：以防万一出现问题，防止日食显示弹出窗口（实际上没有显示，因此阻止构建）

最终（工作！）命令：

```
C:\prog\EclipseCdt\eclipse --launcher.suppressErrors -nosplash -data "%WORKSPACE%" -application org.eclipse.cdt.managedbuilder.core.headlessbuild -import "%WORKSPACE%\project1" -import "%WORKSPACE%\project2" -import "%WORKSPACE%\project3" -build all 
```

**编辑**

*   添加了--launcher.suppressErrors

# ruby-on-rails - 在一行中编写此 ruby 代码的最佳方式

> ID：11119682
> 
> 赞同：3
> 
> 时间：2012-06-20T12:35:29.090
> 
> 标签：ruby-on-rails, ruby

什么是在一行中写这样的东西的好方法。目标是在调试模式下如果值为 nil 则在信息级别记录消息，以及显示的正确消息。看起来很简单，但是为这样的小东西写 5 行代码一直困扰着我。我可以将其包装在方法中，但如果可以的话，我想避免。谢谢。

```
if value.nil?
  Rails.logger.info "value: nil"
else
  Rails.logger.debug "value: #{value.inspect}"
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T12:37:14.350

```
value.nil? ? (Rails.logger.info "value: nil") : (Rails.logger.debug "value: #{value.inspect}") 
```

您可以尝试的另一种方法（这不一样，但相似）：

```
Rails.logger.send (value.nil? ? :info : :debug), "value: #{value.inspect}" 
```

但我认为最好的方法是编写自己的记录器，它会自动决定哪个变量写入哪个流：

```
NullLogger.log value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:38:08.137

```
value.nil? ? Rails.logger.info "value: nil" : Rails.logger.debug "value: #{value.inspect}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:38:13.207

```
value ? Rails.logger.debug("value: #{value.inspect}") : Rails.logger.info("value: nil") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T01:26:59.730

如果你想在一行中，只需删除换行符：

```
if value.nil? then Rails.logger.info "value: nil" else Rails.logger.debug "value: #{value.inspect}" end 
```

但是为什么，哦，为什么，会有人想要这样做吗？

# firebird - Install both Interbase and Firebird

> ID：11119683
> 
> 赞同：1
> 
> 时间：2012-06-20T12:35:39.387
> 
> 标签：firebird, interbase

Are there any conflicts if both Interbase and Firebird are installed on the same workstation? Does anyone have any tips or best practices for this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:12:21.630

Interbase 默认使用端口 3050。因此，您必须为同一台机器上的 Firebird 服务器选择另一个编号。端口号通过 firebird.conf 文件指定。更改 conf 文件后，您必须重新启动 Firebird 服务。

实际上，我的开发计算机上运行了四个不同版本的 FB。在这种情况下，每个实例都必须使用自己的端口号，并使用 instsvc 的 -n 开关指定唯一的实例名称。

不要忘记在连接字符串中指定自定义端口号。对于端口 3051，字符串将如下所示：

服务器/3051:path_to_db_file

一个很好的[检查链接](http://www.destructor.de/firebird/multiinstance.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:18:25.310

如果您更改 Firebird 或 InterBase 的端口，则可以。

# structure - 将 FMOIX/FMCOX 结构移动到内部表中

> ID：11119684
> 
> 赞同：1
> 
> 时间：2012-06-20T12:35:47.673
> 
> 标签：structure, abap, sap-erp

我是 ABAP 的新手（3 天经验），我目前的任务是使用 ABAP 代码编写报告。这就像将一些数据从特定的 SAP 数据库移动到商业智能暂存区。

所以核心难点是SAP服务器上的一些数据是字典结构（FMOIX、FMCOX等）的格式，我需要在程序运行时将这些数据移动到内部表中。有人告诉我 OPENSQL 在这种情况下不起作用。

如果您仍然不明白我的意思，我可以提出几种方法，实际上是由我的主管给出的。首先是使用 GET 事件，比如说

```
GET FMOIX.
    IF FMOIX-zhdlt > From_dat and FMOIX-zhdlt < to_dat.
        Append FMOIX to itab.
    ENDIF. 
```

问题是我对这个 GET 事件还不是很清楚。它只是一个事件处理程序，还是可以循环遍历数据记录？

我用谷歌搜索了两天多的东西给了我类似的东西

```
LOOP at FMOIX.
    MOVE FMOIX to itab.
ENDLOOP. 
```

那么有什么方法可以将 FMOIX 之类的事务结构移动到内部表中，比如内部表名是 ITAB？

您的回答将不胜感激。虽然我有时间，但我是全新的。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:21:35.047

如果您的主管建议您使用 GET 事件，这意味着您的程序正在（或应该）使用**逻辑数据库**——在这种情况下可能是 FMF 或 FMF_BCS。

Doing`GET FMOIX`读取逻辑数据库中定义的一组字段（作为*节点*）。在 GET 语句下方，您可以使用 FMOIX 作为结构，例如`WRITE FMOIX-field1`. 该程序将（隐含地，它没有像 a is 那样在代码中明确定义`LOOP...ENDLOOP`）循环根据您的选择标准返回的所有行。您应该能够使用`MOVE-CORRESPONDING`将每一行的内容移动到适当的结构中，然后`APPEND`将该结构移动到您的 itab。

[ABAPDocu](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/abapget-.htm)中 GET 的快速链接

注意：这个答案有点猜测，因为我只使用过一次逻辑数据库，并且与那里关于标准`SELECT`s 和内部表的卷相比，文档在地面上有点薄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:16:29.270

您可以以该结构的类型创建内部表，例如：

```
data: itab like table of fmoix with header line. 
```

您可以使用这个内部表格来填写您使用选择代码的任何地方。如：

```
select * from ____
   into corresponding fields of itab 
   where zhdlt gt from_dat
   and   zhdlt lt to_dat. 
```

我不确定这是您要查找的内容，但我可以告诉您以该结构的类型创建 itab 可以填充来自您选择的所有相应数据。您不能循环 FMOIX，因为它不是表格，而是结构。那么有什么特别的理由将你的数据保存在结构中吗？

希望对您有所帮助。

塔尔哈

# php - 为什么网站倾向于在数据库表上使用随机 id:s？

> ID：11119690
> 
> 赞同：20
> 
> 时间：2012-06-20T12:36:10.260
> 
> 标签：php, mysql

我想知道为什么许多网站选择使用随机 id:s 而不是在其数据库表上从 1 递增。我搜索了没有找到任何充分的理由，有吗？

另外，使用哪种方法最好？在插入数据之前检查 id 是否已经存在似乎效率很低（需要第二次查询）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T12:38:54.143

在幕后，他们很可能使用数据库中的增量 ID 来识别行，但是通过 URL 参数向最终用户公开的值通常被制成随机字符串，以使可用对象的序列更难猜测.

这实际上是一个通过默默无闻的安全问题。它阻碍了自动化脚本继续执行增量值并尝试通过 URL 进行攻击，并且阻碍了对站点内容的自动抓取。

例如，如果 youtube 使用增量 id 而不是像 之类的值`v=HSsdaX4s`，您可以通过简单地从该值开始`v=1`并递增数百万次来下载每个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:39:59.663

顺序 ID 不能很好地扩展（它们成为分布式系统中的同步瓶颈）。

此外，您不需要检查新生成的随机 id 是否已经存在，您可以假设它不存在（因为它们太多了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:40:01.393

你确定id是随机的吗？还是它们被编码？无论哪种方式都是为了安全。

# java - 如何使用 JDBC 通过 DB 链接连接到远程数据库？

> ID：11119694
> 
> 赞同：3
> 
> 时间：2012-06-20T12:36:21.803
> 
> 标签：java, jdbc, dblink

我需要使用 JDBC 命令使用数据库链接连接到远程数据库。如何做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:48:22.897

如果您已经有 dblink 设置，您可以在 SQL 中使用它（通过 jdbc 发送），方法是像这样处理所需的表：

```
select * from SCHEMA.TABLE@DBLINK_NAME 
```

在你的 java 中使用这个查询看起来像这样

```
 public ResultSet execQuery() throws SQLException, ClassNotFoundException{
    //Load the database driver
    Class.forName("oracle.jdbc.OracleDriver");

    //Create connection to the database
    Connection myConnection = DriverManager.getConnection(connectURL,userName,userPwd);

    //Create a statement link to the database for running queries
    Statement myQuery = myConnection.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);

    //Create a resultSet to hold the returned query information
    ResultSet myQueryResults = myQuery.executeQuery("select * from SCHEMA.TABLE@DBLINK_NAME");       

    return myQueryResults;
} 
```

*假定为 java & oracle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:46:27.460

如果您询问如何使用 JDBC 在您正在与之交谈的数据库和另一个数据库之间创建链接，那么您（可能）将以与任何其他 SQL 语句相同的方式执行“只是 SQL”。（如果您告诉我们您正在使用哪个数据库，我们可以讨论您需要执行的实际 SQL。）

否则，我认为这没有意义。数据库链接/数据库链接是从一个数据库到另一个数据库的链接。但 JDBC 用于从 Java 客户端与数据库通信。（对我来说）使用 DB 链接将 JDBC 客户端连接到数据库是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T22:28:53.560

请查看**orajdbclink**，[在 sourceforge](http://sourceforge.net/projects/orajdbclink/)

我打算将我的 oracle plsql 源连接到 hbase 的凤凰皮肤。在我看来，目前在 oracle 和 hbase 之间创建连接器的独特方式......

# xpages - xe:listView 防止多选

> ID：11119696
> 
> 赞同：1
> 
> 时间：2012-06-20T12:36:32.037
> 
> 标签：xpages, xpages-extlib

如果使用 CTRL 按钮选择多个条目，则可以选择多个视图条目。我需要找到一种方法来防止这种情况发生。如何关闭此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:37:20.207

因为 listview 是一个自定义 dijit 控件，所以属性在 CSJS 中是可调整的。

这是解决方案：

```
dijit.byId('#{id:listView1}').bAllowMultipleSelection = false;
dijit.byId('#{id:listView1}').initVirtualList(); 
```

# c++ - Virtual base class object creation

> ID：11119699
> 
> 赞同：0
> 
> 时间：2012-06-20T12:36:44.503
> 
> 标签：c++, virtual-functions

I have question related to virtual base class.

```
class a
{
public:
  a();
  ~a();
};

class b: virtual public a
{
public:
  b();
  ~b();
};

class c: virtual public a
{
public:
  c();
  ~c();
};

class e: public b, c
{
public:
  e();
  ~e();
}; 
```

Whenever I create an object of class `e`, via which class the `a` object will be created in `e`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:40:48.197

两者，它将被共享。

如果您的问题是关于布局的，则未指定。是的，有了虚拟继承，一个对象——当它不是一个完整的对象时——在内存中可能是不连续的。

如果 a 没有默认构造函数，则需要在 e 中提供一个初始化列表，该列表将提供所需的参数；b 和 c 的构造函数所隐含的那些将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:03:23.583

将存在一个共享实例。

编译器将为 B 类和 C 类都提供一个 vpointer，因为 A 的内存偏移量在运行时之前是未知的。当您创建 E 的实例时，它也会创建 A、B 和 C 的实例。

B 和 C 都在其 vtable 中包含一个虚拟指针，该指针存储到类 A 的偏移量，这将在运行时用于指向共享的 A 对象。

# python - 类 我如何理解它们。如果我错了请纠正我

> ID：11119704
> 
> 赞同：3
> 
> 时间：2012-06-20T12:36:57.590
> 
> 标签：python, class

我真的希望这不是数百万新手提出的问题，但我的搜索并没有真正给我一个令人满意的答案。

所以我的问题很简单。类基本上是具有自己命名空间的函数的容器吗？除了提供单独的命名空间和保持函数同时使它们可作为类属性调用之外，它们还有哪些其他函数？我在 python 上下文中询问。

哦，感谢你们大多数人的大力帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T12:40:37.487

1.  比函数更重要的是，类实例包含数据属性，允许您定义超出语言内置的新数据类型；和
2.  他们支持[继承](https://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)和[鸭子类型](https://en.wikipedia.org/wiki/Duck_typing)。

例如，这是一个适度有用的类。由于 Python 文件（使用 创建`open`）不记得自己的名字，让我们创建一个文件类来记住它们自己的名字。

```
class NamedFile(object):
    def __init__(self, name):
        self._f = f
        self.name = name

    def readline(self):
        return self._f.readline() 
```

如果 Python 没有类，你可能会使用 dicts 代替：

```
def open_file(name):
    return {"name": name, "f": open(name)} 
```

不用说，一直打电话`myfile["f"].readline()`会导致您的手指在某些时候受伤。`readline`你当然可以在模块（命名空间）中引入一个函数`NamedFile`，但是你总是必须使用那个确切的函数。相比之下，`NamedFile`实例可以在任何需要带有方法的对象的地方使用，因此在许多情况下`readline`它将成为插件的替代品。`file`这就是所谓的[多态性](https://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)，这是面向对象/基于类的编程的最大好处之一。

（另外，`dict`是一个类，所以使用它违反了没有类的假设：）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T12:41:01.940

在大多数语言中，类只是描述如何生成对象的代码片段。在 Python 中也是如此：

```
>>> class ObjectCreator(object):
...       pass
... 

>>> my_object = ObjectCreator()
>>> print my_object
<__main__.ObjectCreator object at 0x8974f2c> 
```

但是类不仅仅是 Python 中的类。类也是对象。

是的，对象。

一旦您使用关键字 class，Python 就会执行它并创建一个 OBJECT。指令：

```
>>> class ObjectCreator(object):
...       pass
... 
```

在内存中创建一个名为 的对象`ObjectCreator`。

这个对象（类）本身能够创建对象（实例），这就是它是类的原因。

但是，它仍然是一个对象，因此：

*   您可以将其分配给变量
*   你可以复制它
*   您可以为其添加属性
*   您可以将其作为函数参数传递

例如：

```
>>> print ObjectCreator # you can print a class because it's an object
<class '__main__.ObjectCreator'>
>>> def echo(o):
...       print o
... 
>>> echo(ObjectCreator) # you can pass a class as a parameter
<class '__main__.ObjectCreator'>
>>> print hasattr(ObjectCreator, 'new_attribute')
False
>>> ObjectCreator.new_attribute = 'foo' # you can add attributes to a class
>>> print hasattr(ObjectCreator, 'new_attribute')
True
>>> print ObjectCreator.new_attribute
foo
>>> ObjectCreatorMirror = ObjectCreator # you can assign a class to a variable
>>> print ObjectCreatorMirror.new_attribute
foo
>>> print ObjectCreatorMirror()
<__main__.ObjectCreator object at 0x8997b4c> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T12:41:33.657

类（或对象）用于提供数据封装和可以对该数据执行的操作。

它们本身不提供 Python 中的命名空间；模块导入提供相同类型的东西，一个模块可以完全是功能性的，而不是面向对象的。

[您可能会从使用 Python 的 OOP](http://www.voidspace.org.uk/python/articles/OOP.shtml)、[深入 Python 中](http://www.diveintopython.net/object_oriented_framework/index.html)获得一些好处，第 5 章。对象和面向对象编程，甚至只是关于[面向对象编程的 Wikipedia 文章](http://en.wikipedia.org/wiki/Object-oriented_programming)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-20T12:42:17.563

类是对象的定义。从这个意义上说，类提供了某种命名空间，但这不是类的真正目的。真正的目的是定义对象将“看起来像”什么——对象能够做什么（方法）以及它将知道什么（属性）。

请注意，我的回答旨在提供一种相对非技术层面的理解感，这就是我最初在理解课程时遇到的麻烦。我相信这个问题还会有很多其他很好的答案；我希望这能增加你的整体理解。

# c# - DotNetZip：将 ZipFile 转换为 byte[] 数组

> ID：11119705
> 
> 赞同：5
> 
> 时间：2012-06-20T12:37:02.273
> 
> 标签：c#, byte, dotnetzip

我正在使用 DotNetZip 将文件添加到我从文件系统中读取的 zip 存档中。我想将生成的 ZipFile 转换为 byte[] 数组。任何帮助将不胜感激。我的代码如下所示。

```
public byte[] AddPrjFile(FileStream shapeFileZip, Uri prjLocation)
{
    string prjFileAbsPath = prjLocation.AbsolutePath;
    using (ZipFile zip = ZipFile.Read(shapFileZip))
    {
        ZipEntry e = zip.AddFile(prjFileAbsPath);
        e.FileName = zipFile.Name + ".prj";
    }

    return byte_array;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T12:38:44.533

您可以简单地使用[`File.ReadAllBytes`静态方法](https://docs.microsoft.com/en-us/dotnet/api/system.io.file.readallbytes)，例如：

```
return File.ReadAllBytes( shapeFileZip.Name ); 
```

从您的文件中读取。

# silverlight - Implement hierarchy with PagedCollectionView

> ID：11119706
> 
> 赞同：0
> 
> 时间：2012-06-20T12:37:03.957
> 
> 标签：silverlight, datagrid

I am trying to implement DataGrid, in Silverlight, which should organize data like this:

Group 1 Subgroup 1.1 Subgroup 1.1.1 Domain 1.1.1.1 Subgroup 1.1.2 Domain 1.1.2.1 Group 2 Subgroup 2.1 Domain 2.1.1

Group and Subgroup are actually one table with self-reference. The main question would be, is it possible to implement self-reference hierarchy using grouping with PagedCollectionView?

Any other idea would be also good. The point is that I want to implement hierarchy like this using Silverlight DataGrid, and without adding another grid inside grid.

Joksimovic

# javascript - 带有主开关的jquery切换

> ID：11119709
> 
> 赞同：0
> 
> 时间：2012-06-20T12:37:13.817
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 切换来显示和隐藏特定产品的功能。我有它的工作，但它并不完美，想知道是否有人可以帮忙？

基本上我遇到的问题是，当您使用主打开所有然后关闭所有单独的项目时，我需要主开关恢复显示所有文本。

此外，我想在每个项目上都有一个 + 和 - 图标，但不知道如何只替换单击的图像而不是列表中的所有图像！

任何帮助将不胜感激，谢谢。

**脚本**

```
$(document).ready(function() {
    $('.toggle').hide();
    $('.toggler').click(function() {
        var target = this.id + '_content';
        var imgtarget = this.id + '_expand';
        $('#' + target).slideToggle();
        $('.toggleall').text('Hide all');
        $('<img src="images/collapse.gif">').prependTo('.toggleall');
    });

    $('.toggleall').click(function() {
        if ($('.toggle').is(':visible')) {
            $('.toggle').slideUp();
            $('.toggleall').text('Show all');
            $('<img src="images/expand.gif">').prependTo('.toggleall');
        } else {
            $('.toggle').slideDown();
            $('.toggleall').text('Hide all');
            $('<img src="images/collapse.gif">').prependTo('.toggleall');
        }
    });
}); 
```

**html**

```
<div class="toggleall"><img src="images/expand.gif">Show all</div>
        <br><br>
        <div class="toggler" id="toggle1"><img src="images/expand.gif" class="toggle1_expand">Toggle 1</div>
        <div class="toggle" id="toggle1_content">only toggle1</div>
        <div class="toggler" id="toggle2"><img src="images/expand.gif" class="toggle2_expand">Toggle 2</div>
        <div class="toggle" id="toggle2_content">only toggle2</div>
        <div class="toggler" id="toggle3"><img src="images/expand.gif" class="toggle3_expand">Toggle 3</div>
        <div class="toggle" id="toggle3_content">only toggle3</div> 
```

这是代码的 jfiddle（感谢 François Wahl）：[jsfiddle.net/GUYfG](http://jsfiddle.net/GUYfG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:55:17.340

要展开-折叠，您可以在 DIV 内切换具有不同背景图像的类，或使用无序列表 (UL / LI)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:04:45.910

这是格式正确的工作版本：-

```
$(document).ready(function() {

   $('.toggle').hide();

   $('.toggler').click( function() {
      var target = this.id + '_content';
      var imgtarget = this.id + '_expand';
          $('#' + target).slideToggle(function(){
                if( $('.toggle').is(':visible') ) {
                  $('.toggleall').text('Hide all');
                  $('<img src="images/collapse.gif">').prependTo('.toggleall');
              } else {
                  $('.toggleall').text('Show all');
                  $('<img src="images/expand.gif">').prependTo('.toggleall');
              }
          });

          if( $('.toggle').is(':visible') ) {
              $('.toggleall').text('Hide all');
          }
    });

    $('.toggleall').click(function() {
         if ($('.toggle').is(':visible')) {
                $('.toggle').slideUp();
                $('.toggleall').text('Show all');
                $('<img src="images/expand.gif">').prependTo('.toggleall');
            } else {
                $('.toggle').slideDown();
                $('.toggleall').text('Hide all');
                $('<img src="images/collapse.gif">').prependTo('.toggleall');
            }
     });

 }); 
```

**编辑：**

[这是小提琴](http://jsfiddle.net/meetsubhajit/GUYfG/5/)

我现在已经编辑了代码检查。还要检查小提琴。

# javascript - 淘汰js javascript到coffeescript

> ID：11119711
> 
> 赞同：0
> 
> 时间：2012-06-20T12:37:18.870
> 
> 标签：javascript, knockout.js, coffeescript

如何将此 javascript 转换为咖啡脚本？

```
$(function() {
  function AppViewModel() {
    this.firstName = ko.observable();
  }

  ko.applyBindings(new AppViewModel());
}); 
```

我试过了，但它破坏了 knockoutjs 绑定

```
jQuery ->
  AppViewModel = ->
    this.firstName = ko.observable("something")

  ko.applyBindings(new AppViewModel()) 
```

这是咖啡脚本产生的

```
(function() {

  jQuery(function() {
    var ViewModel;
    ViewModel = function() {
      return this.firstName = ko.observable();
    };
    return ko.applyBindings(new ViewModel());
  });

}).call(this); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T14:04:56.203

这成功了。但我认为真正的解决方案是——学习knockoutjs时不要使用coffeescript

```
jQuery ->
  class AppViewModel
    firstName : ko.observable()

  ko.applyBindings(new AppViewModel) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:16:06.340

这不是您在 CoffeeScript 中处理对象的方式。您可能应该执行以下操作：

```
jQuery ->
  AppViewModel =
    firstName: ko.observable()

  ko.applyBindings(new AppViewModel()) 
```

结帐：[http](http://arcturo.github.com/library/coffeescript/index.html) ://arcturo.github.com/library/coffeescript/index.html供参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T02:47:17.350

我花了很长时间在这上面。我将我的方法从类似于介绍示例（以及原始帖子）的方法更改为上面带有“类”的方法，然后再返回。打破的是咖啡脚本产生的回报，有一个非常简单的解决方案：

```
$ ->
    AppViewModel = ->
        @firstname = ko.observable 'andrew'
        @lastname = ko.observable 'plumdog'
        @fullname = ko.computed =>
            @firstname() + ' ' + @lastname()
        @ 
```

通过在末尾显式返回 @，任何返回都是固定的。我比原始问题多包含 2 行，请注意 => 用于计算，因为这些需要在原始函数的上下文中运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:45:08.773

在 CoffeeScript 版本中，您使 ko.applyBindings() 作为 jQuery 文档的一部分发生（因为它作为它的一部分缩进），而在原始 JavaScript 中，ko.applyBindings() 发生在它之外。

尝试将 ko.applyBindings(new AppViewModel()) 线一直移动到左侧。

您可以通过查看原始代码和新代码中生成的 JavaScript 来查看此效果。

# c# - C# ASP.NET can not reload web application

> ID：11119713
> 
> 赞同：1
> 
> 时间：2012-06-20T12:37:32.020
> 
> 标签：c#, asp.net, web-applications, reload

i can not reload the WebApplication project![reload the WebApplication](../Images/eaadfdeece48d49e8b08690ce5251742.png), i got this message error ![message error](../Images/68143d5b49a2e372fd4692506a95d1e2.png)

i moved the server to another place, so the IP is changed.

i already change the ip on IIS and WebApp config
i already uninstall IIS and reinstall
i already use aspnet_reggis -i

but still i, can not reload the WebApplication.

thanks you in advance

PS: i m sure is because the IP configuration. it work well at my home, now i bring the computer to office...it not work anymore....nothing change just the IP my home is not the same like IP in my office

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:50:13.903

错误消息说：项目 web ESPTEMPS_WebApp 配置为 IIS，找不到网站。

您很可能需要为您的网站配置 IIS。

这是一个有用的链接：http: [//msdn.microsoft.com/en-us/library/cek8kw6e.aspx](http://msdn.microsoft.com/en-us/library/cek8kw6e.aspx)

祝你好运，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:11:01.197

您的应用程序配置为使用 IIS，在您的情况下，您的系统中没有安装 IIS，或者开发人员在开发时使用了 IIS Express。（您需要安装 VS 2010 sp1 才能获得 IIS Express 7.5 与 VS 的集成）

你可以做的是：

关闭您的解决方案并在记事本中打开 csproj 文件（出现问题的项目）

查找并设置这些值：

```
<UseIIS>False</UseIIS>
<UseIISExpress>False</UseIISExpress> 
```

然后使用 Visual Studio 再次重新打开您的解决方案。您将能够使用 Web 开发人员 Web 服务器进行调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:00:27.120

我为你找到了一个很好的参考。它将引导您完成一系列步骤来帮助您配置 IIS。这是[链接](http://ukchill.com/technology/setting-up-a-web-project-environment-in-visual-studio-2010-to-allow-debugging-using-both-iis7-and-the-development-web-server/)。请忽略不适用于您的步骤。但基本思想是：

*   打开项目属性并转到 Web 选项卡
*   选择本地 IIS Web 服务器。如果它已经被选中，它将显示一个虚拟目录。如果它尚未显示已选中，请提及虚拟目录。

# python - 新的弹出窗口（Qt4 / PyQt4，Python3）

> ID：11119717
> 
> 赞同：0
> 
> 时间：2012-06-20T12:37:47.947
> 
> 标签：python, qt4, python-3.x, pyqt4

它一定很简单，但我没有找到方法......我有一个带有 的 GUI `MainWindow (QMainWindow)`，我在其中添加了帮助菜单并`actionAbout QAction`通过 Qt 设计器。现在，当我按下帮助菜单中的关于项目时，我想要一个带有文本“程序...版本...等”的小新窗口。

一个`triggered`信号似乎起作用了，`NotImplementedError`当我按下关于时我得到了。但是现在不知道如何从这个信号显示一个新窗口......

```
class MainWindow(QMainWindow, Ui_MainWindow):
    """
    My main GUI window
    """
    def __init__(self, db, parent = None):
        QMainWindow.__init__(self, parent)
...
    @pyqtSlot(QAction)
    def on_menuAbout_triggered(self, action):
        """
        Slot documentation goes here.
        """
        # TODO: not implemented yet
        raise NotImplementedError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:39:04.730

好的，这确实很容易：

```
@pyqtSlot(QAction)
def on_menuAbout_triggered(self, action):
    """
    Show about page
    """
    about_box = QMessageBox(self)
    about_box.about(self, 'About', 'This is a GUI...\n\n<a href="www.google.com">www.google.com</a>')
#        about_box.setText('This is a GUI')
#        about_box.exec() 
```

剩下的就是插入一个指向页面的链接（这里 google 只是作为一个例子）。上面的例子不起作用。任何想法如何使文本链接？

# php - 将复选框 ID 传递给另一个 php 文件

> ID：11119719
> 
> 赞同：0
> 
> 时间：2012-06-20T12:37:52.150
> 
> 标签：php, mysql, checkbox, parameter-passing

假设我正在生成某种 html 表（来自 mysql 查询数据），每行都有一个复选框，例如

```
$display_string = "<form action=\"delete.php\" method=\"post\">";
$display_string .= "<div><input type=\"button\" VALUE=\"Button1\"></div>";
$display_string .= "<div><input type=\"button\" VALUE=\"Button2\"></div>";
while($row = mysql_fetch_array($qry_result)){
    $display_string .= "<tr onmouseover=\"this.className = 'hlt';\" onmouseout=\"this.className = '';\">";
    $display_string .= "<td class='blank'><input type=\"checkbox\" /></td>";
    $display_string .= "<td class='data'>" . $row['first_name'] . "</td>";
    $display_string .= "<td class='data'>" . $row['last_name'] . "</td>";
    $display_string .= "<td class='data'><a href='" . $row['email'] . "'>" . $row['email'] . "</a></td>";
etc...
etc...
$display_string .= "</form>"; 
```

我现在想发生的事情是，在选择各种复选框后有两件事：1）例如，当单击 Button1 时调用 delete.php 以删除选定的行。2) 单击 Button2 时调用的其他一些 php 文件

我可以访问 $row['ID'] ，我可以用它来命名每个复选框，我只是不确定如何合并它，因为我是 php 新手

* * *

**更新** 以下似乎适用于我的目的

我有以下html-

```
<form name='myForm' method=\"post\" >
<input type=\"submit\" onClick=\"deleterow(document.myForm)\" VALUE=\"Delete ROWs\">

while($row = mysql_fetch_array($qry_result)){
    <input type=\"checkbox\" name='rows' value=" .$row['ID']. "/> 
```

Javascript如下-

```
<script language=\"javascript\" type=\"text/javascript\">
function deleterow(form){

    if (!confirm(\"Are you sure you want to delete?\")) return false;

    var queryString = \"?ID=\";

    for (var i = 0; i < document.myForm.rows.length; i++) {
        if (document.myForm.rows[i].checked) {
            ID = document.myForm.rows[i].value;
            ID = ID.slice(0, -1);
            queryString += ID;
            queryString += \"-\";
        }
    }
    queryString = queryString.slice(0, -1);

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject(\"Msxml2.XMLHTTP\");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject(\"Microsoft.XMLHTTP\");
            } catch (e){
                // Something went wrong
                alert(\"Your browser broke!\");
                return false;
            }
        }
    }

    var ajaxRequest;  // The variable that makes Ajax possible!
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            var ajaxDisplay = document.getElementById('ajaxDiv');
            ajaxDisplay.innerHTML = ajaxRequest.responseText;
        }
    }

    ajaxRequest.open(\"GET\", \"delete_row.php\" + queryString, true);
    ajaxRequest.send(null); 
    confirm('Delete successful!');
} 
```

然后使用 delete_row.php，您可以使用 mysql 查询完成所有您需要的操作，并且可以将新数据发送回并显示

```
<div id='ajaxDiv'></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:52:27.397

为了获得清晰的代码，我建议您避免使用两个按钮触发两个操作。而是使用简单的 javascript 方法将参数附加到提交的表单，以摆脱按下的按钮。

```
<script type="text/javascript">
    function submitForm( act ){
         $('#act').val(act);
         $('#myForm').submit();
}

</script>

<form id="myForm" ... >
<input type="hidden" id="act" value="" />

<button onClick="submitForm(1)">1</button>
<button onClick="submitForm(2)">2</button>
</form> 
```

这只是一个例子（使用 jquery）。

关于您的第二个答案（复选框）：

```
<input type="checkbox" name="selectedboxes[]" value="someIdHere" /> 
```

提交表单时，您将收到一个数组“selectedboxes”作为参数，您可以在其中选中复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:52:36.727

您可以更改表单操作，例如，如果您单击按钮 1，它会将操作更改为 DELETE.PHP，请查看此帖子：

[使用 javascript/jquery 更改表单的操作](https://stackoverflow.com/questions/979024/changing-the-action-of-a-form-with-javascript-jquery)

他们使用 JQuery 并且他们有多个答案如何做到这一点

# c# - LINQ string contains another string case insensitive

> ID：11119722
> 
> 赞同：6
> 
> 时间：2012-06-20T12:37:57.777
> 
> 标签：c#, linq, windows-8, linq-to-objects

I'm working in a C# Windows 8 Metro app and I'm trying to filter an `ObservableCollection<T>` using LINQ where a property contains some string, and I need that it will be case insensitive.

```
 var searchResults = from _rest in App.ViewModel.Restaurants
                     where  _rest.Name.IndexOf(queryText,
                                 StringComparison.CurrentCultureIgnoreCase) >= 0
                     select _rest; 
```

I work around

*   `Using string1.Contains(string2).ToUpper()` in both strings.
*   `Using string1.Contains(string2).ToLower()` in both strings.
*   `Using string1.IndexOf(string2, StringComparison.CurrentCultureIgnoreCase) >= 0`.
*   `Using string1.IndexOf(string2, StringComparison.OrdinalIgnoreCase) >= 0`.
*   `Using String.Compare(string1, string2, StringComparison.CurrentCultureIgnoreCase)`.

But no one of this methods works for me in a case insensitive way, works ok if I write the name correctly.

Has someone have the same issue in Windows 8??

Thanks in advance for any help provided.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:19:23.053

编写你自己的扩展方法

```
public static class MetroHelper
{
    public static bool ContainsInvariant(this string mainText, string queryText)
    {
        return mainText.ToUpperInvariant().Contains(queryText.ToUpperInvariant());
    }
} 
```

并在您的应用程序中使用

```
var searchResults = from _rest in App.ViewModel.Restaurants
                 where  _rest.Name.ContainsInvariant(queryText)
                 select _rest; 
```

这就是我所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:06:49.050

尝试这个：

```
var searchResults = from _rest in App.ViewModel.Restaurants
                         where  _rest.Name.IndexOf(queryText,
                                     StringComparison.InvariantCultureIgnoreCase) >= 0
                         select _rest; 
```

# iphone - 如何获取浏览器历史记录

> ID：11119724
> 
> 赞同：0
> 
> 时间：2012-06-20T12:38:09.153
> 
> 标签：iphone

我正在 iphone 中做一个应用程序。在此我需要获取我设备的浏览历史记录。所以请告诉我如何获取浏览历史记录。如果有任何 api 可用，请为此发送一个赞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:41:04.797

您无权访问 safari 的历史，作为开发人员您无法使用

其他类似问题[如何在应用程序中访问 iPhone Safari 历史记录？](https://stackoverflow.com/questions/3093703/how-to-access-iphone-safari-history-in-an-app)

如果您想要自己的应用程序浏览历史记录，请参阅[从手机获取 safari 历史记录](https://stackoverflow.com/questions/8707757/getting-safari-history-from-phone)

# java - connection reset in socket file transfer

> ID：11119729
> 
> 赞同：0
> 
> 时间：2012-06-20T12:38:34.047
> 
> 标签：java, sockets, file-transfer

i just want to run a sample code for file transfer using sockets , in eclipse! and the client gives me this error:

```
Exception in thread "main" java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at Client.main(Client.java:13) 
```

i don't think that it is caused by the other side closing the socket! here's the code of server and client:

```
public class Server {
    public static void main(String[] args) throws IOException {
        ServerSocket servsock = new ServerSocket(1000);
        File myFile = new File("s.pdf");

        while (true) {
            Socket sock = servsock.accept();
            byte[] mybytearray = new byte[(int) myFile.length()];
            BufferedInputStream bis = new BufferedInputStream(new FileInputStream(myFile));
            bis.read(mybytearray, 0, mybytearray.length);
            OutputStream os = sock.getOutputStream();
            os.write(mybytearray, 0, mybytearray.length);
            os.flush();
            sock.close();
        }
    }
}

public class Client {
    public static void main(String[] argv) throws Exception {
        Socket sock = new Socket("127.0.0.1", 1000);
        byte[] mybytearray = new byte[1024];
        InputStream is = sock.getInputStream();
        FileOutputStream fos = new FileOutputStream("s.pdf");
        BufferedOutputStream bos = new BufferedOutputStream(fos);
        int bytesRead = is.read(mybytearray, 0, mybytearray.length);
        bos.write(mybytearray, 0, bytesRead);
        bos.close();
        sock.close();
    }
} 
```

# javascript - Chrome error: 'unknown message reserved_word' on JavaScript enum declaration

> ID：11119730
> 
> 赞同：4
> 
> 时间：2012-06-20T12:38:36.410
> 
> 标签：javascript, syntax-error, reserved-words

```
enum ButtonType { Autowoot, Autoqueue } 
```

Is causing Google Chrome's developer tools to give me this error:

```
Uncaught SyntaxError: <unknown message reserved_word> 
```

I read that you can create enumerations like that from [here](http://answers.unity3d.com/questions/15250/how-to-declare-and-use-a-enum-variable-in-javascri.html), but my script doesn't run because of this error here. I'm doing exactly what that person who answered the question wrote, and it doesn't function. Any ideas?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:44:56.613

You need to do something like:

```
var ButtonType = {
  'Autowoot' : 0,
  'Autoqueue' : 1
}; 
```

The enum syntax `enum ButtonType { Autowoot, Autoqueue }` is not supported currently.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:51:58.910

JavaScript doesn't do static typing of variables.

Once a variable has been declared, it's data may be anything that's a valid JavaScript construct. (Well, really, everything is *pretty* much an object).

`enum ButtonType = {'Autowoot':0, 'Autoqueue':1};`

Is giving an error because `enum` is a [javascript reserved word](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words) marked for future usage. You can't use it, but it does nothing.

If you're trying to declare an object called `ButtonType` in the current execution scope, you should do as @xdazz said:

`var ButtonType = {'Autowoot':0, 'Autoqueue':1};`

(If you want it in another scope, that's a different question though :)).

# delphi - 如何正确设置 Scintilla 关键字突出显示？

> ID：11119736
> 
> 赞同：2
> 
> 时间：2012-06-20T12:39:03.070
> 
> 标签：delphi, scintilla

我使用[`Scintilla`](http://www.scintilla.org/)带有[`DScintilla`](http://code.google.com/p/dscintilla/)包装器的组件，并在任何词法分析器中使用关键字突出显示错误。帕斯卡，例如：

```
with DScintilla do 
begin
  SetLexer(SCLEX_PASCAL);
  StyleSetFore(SCE_PAS_WORD, clGreen);
  StyleSetFore(SCE_PAS_OPERATOR, clRed);;
  StyleSetFore(SCE_PAS_IDENTIFIER, clBlue);
  SetText('begin a+b; end');
end 
```

此代码正确突出显示标识符和运算符，但关键字与标识符具有相同的颜色。SciLexer 似乎无法比较此库中的字符串。

如何正确设置 Scintilla 关键字突出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:43:30.350

关键字必须手动添加。

```
SetKeyWords(0,'begin end'); 
```

# mysql - 在 where in 子句中按条件顺序获取记录

> ID：11119737
> 
> 赞同：2
> 
> 时间：2012-06-20T12:39:02.880
> 
> 标签：mysql

如何按照mysql中“where in”子句中的条件顺序从数据库中获取结果？

例如：

桌子

```
id name
1 | riz
2 | irf
3 | far
4 | zab
5 | yas 
```

我希望我的数据按条件放在 where in 子句中的顺序...？

```
select * from foo where id in (2,3,4,1,5); 
```

例如。

```
id  name
2 | irf
3 | far
4 | zab
1 | riz
5 | yas 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:50:44.987

您可以使用 ：

```
select * from foo where id IN(2,3,4,1,5) order by FIND_IN_SET(id, '2,3,4,1,5'); 
```

它会为你工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:53:16.567

```
SELECT * 
FROM  foo 
where id in (2,3,4,1,5);
ORDER BY FIND_IN_SET( id, '2,3,4,1,5' ) 
```

这是参考[ORDER BY FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:51:01.560

您可以将每个 id 提供为不同的排序案例。

```
SELECT *
FROM foo
WHERE
  id IN(2,3,4,1,5)
ORDER BY
  id = 2 DESC,
  id = 3 DESC,
  id = 4 DESC,
  id = 1 DESC,
  id = 5 DESC 
```

# php - Codeigniter Mysql不要完成循环

> ID：11119738
> 
> 赞同：0
> 
> 时间：2012-06-20T12:39:03.377
> 
> 标签：php, mysql, odbc, xampp, codeigniter-2

我遇到了某种问题，我不知道如何解决它。

问题是，我在另一个数据库中有 500 个寄存器，并且获取它们的查询将它们全部包含在内，但是当我执行循环以在我的数据库中插入/更新它们时，foreach 循环没有结束并且它没有'不显示任何错误。

这是循环：

```
foreach ($this->getMetaEmpregado()->getAll()->result_array() as $modelData) {
        $oEmpregado = $this->getEmpregadoObject($modelData);

        $arrayEmpWhere = array(
            'idempregado' => $oEmpregado->getIdEmpregado(),
            'idsociedade' => $oEmpregado->getIdSociedade(),
            'nif' => $oEmpregado->getNif()
        );

        if ($this->getWayUtilizador()->get($arrayEmpWhere)->num_rows() == 0) {
            $countInsert++;
            $this->insertNewEmp($oEmpregado);
        } else {
            $countUpdate++;
            $this->UpdateEmp($oEmpregado);
        }
    }

echo "Total Updates: $countUpdate Total Inserts: $countInsert<br>"; 
```

它最终不会影响回声，因为它在 260 寄存器附近停止，但有时它会达到 300 个其他甚至不是 100 个。

问候，
埃尔卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:47:12.513

似乎`script`是`taking too long`，你需要`increase`在`Max_Execution_Time`你的**php.ini**中。

您可以使用**ini_set 方法**来更改它，如下所示：

```
ini_set('max_execution_time', 600); //600 seconds = 10 minutes 
```

希望这可以帮助。

# ios - 在声音文件 xcode 中查找单个频率

> ID：11119741
> 
> 赞同：2
> 
> 时间：2012-06-20T12:39:08.967
> 
> 标签：ios, xcode, frequency

对于我正在开发的应用程序，我需要能够“搜索”声音文件以找到特定频率。

基本上，iPhone 麦克风记录 5 秒写入一个无损音乐文件。然后我需要“打开”该文件并搜索特定频率。频率非常特殊（例如不在15hz和300hz之间，它是一个固定的数字）。此外，一旦找到频率，搜索就可以停止。

我已经让 iPhone 录制声音并写入文件，我只是不确定如何打开该文件并搜索频率。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:48:24.850

[查看 PitchDetector](https://github.com/irtemed88/PitchDetector)和相关[教程](http://demetrimiller.com/2011/01/25/pitch-detection-in-ios-4-x/)。
不能让你更接近:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:08:18.847

如果您只是在寻找特定的、固定的、纯音，那么最简单的方法可能是[Goertzel 算法](http://en.wikipedia.org/wiki/Goertzel_algorithm)- 与使用例如 FFT 或自相关方法相比，它实现起来非常简单，并且在计算上相对轻量级。

# android - 在 Android 中显示 MP3 歌曲的歌词

> ID：11119744
> 
> 赞同：5
> 
> 时间：2012-06-20T12:39:17.687
> 
> 标签：android, text, media-player

我想创建音乐播放器，其中 textView 显示正在播放的 MP3 歌词。歌词应从右到左居中显示，与音乐同步。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:08:46.610

[我从Marquee Set Speed](https://stackoverflow.com/questions/8970927/marquee-set-speed/11141012#11141012)中尝试了 Ramakrishna 的代码，效果很好！正是我想要的。我只需要准备每个句子，它的开始时间和持续时间。可以从 MediaPlayer 以毫秒为单位获取当前播放位置，所以......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:25:38.400

尽管这不是一个真正的答案，但我会建议一种尝试实现它的方法。首先，您必须确保您拥有完成这项工作所需的所有信息。如前所述，您至少需要文本和每个单词/句子的开始时间（我也更喜欢持续时间）。然后我会使用两个或更多的 TextViews 在两行中显示单词/句子。连同开始时间和持续时间（或下一个开始时间），您将能够确定效果的整体持续时间，如淡入/淡出、颜色突出显示等。现在您应该能够几乎与音乐同步显示文本。就是这样（理论上）！

现在您可以开始并使用连续的字符数或固定时间间隔的字符数。因为我自己没有对此进行测试，所以我不能说是否可以实时更改效果，或者它们是否在它们创建的时间是固定的。

但这一切听起来很有趣，我对结果很感兴趣。祝你好运。

# php - 为什么 PHP 有迭代器对象？

> ID：11119745
> 
> 赞同：1
> 
> 时间：2012-06-20T12:39:22.847
> 
> 标签：php, iterator

我今天偶然发现了这个[PHP: Iterators](http://www.php.net/manual/en/spl.iterators.php)页面，我想知道为什么甚至需要这些类。我想假设它们是有目的的，否则它们就不会出现在 PHP 中。当已经有非常简单的方法可以做到这些时，我很难看到这些项目的好处。

PHP 在成为一种更受人尊敬/面向对象的编程语言方面是否犯了错误？或者这样做真的有好处吗？

[在 ArrayIterator 上的 PHP 评论](http://www.php.net/manual/en/class.arrayiterator.php#86935)中找到了一个很好的例子，说明了如何有 2 种方法：

```
<?php
$fruits = array(
    "apple" => "yummy",
    "orange" => "ah ya, nice",
    "grape" => "wow, I love it!",
    "plum" => "nah, not me"
);
$obj = new ArrayObject( $fruits );
$it = $obj->getIterator();

// How many items are we iterating over?
echo "Iterating over: " . $obj->count() . " values\n";

// Iterate over the values in the ArrayObject:
while( $it->valid() ) {
    echo $it->key() . "=" . $it->current() . "\n";
    $it->next();
}

// The good thing here is that it can be iterated with foreach loop

foreach ($it as $key=>$val)
echo $key.":".$val."\n";

/* Outputs something like */

Iterating over: 4 values
apple=yummy
orange=ah ya, nice
grape=wow, I love it!
plum=nah, not me

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:57:05.507

迭代器包含在 PHP 中是因为它允许您对任意对象使用通用语言结构（例如 foreach），而不是仅限于循环遍历数组等内置对象。强制对象将其内部状态转换为数组以供您迭代是一件麻烦事（并且会破坏封装），并且对于大型数据集可能会使您的系统内存不足。可迭代让您通过让对象本身仅在请求时返回单个元素来解决这两个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:44:11.573

您的示例并不是真正使用 Iterator 对象的原因。在大多数情况下，Iterator 对象用于迭代一个类并将一个类直接用作迭代器。

[http://php.net/manual/de/class.iterator.php](http://php.net/manual/de/class.iterator.php)

这是一个简短的例子。

当你有一个数组时，在数组上创建一个 foreach 真的很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:52:19.887

对于我的示例，我不会将答案限制为 Iterator，还包括 Traversable。

看看 SimpleXML（[SimpleXMLElement](http://www.php.net/manual/en/class.simplexmlelement.php)和[SimpleXMLIterator](http://www.php.net/manual/en/class.simplexmliterator.php)）。

非常有用且易于使用，并允许您将 XML 转换为可以迭代/遍历的对象，因为它扩展了提供该功能的类。我已经通过相当一部分的 XML 找到了自己的方式，并且很高兴它不必重新发明轮子来提供它。我相信还有更多关于它们的使用和存在原因的例子，但这些是第一个弹出的例子，我立即从中受益，它们不是数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:53:36.833

您可能会遇到希望将[IteratorAggregate](http://php.net/manual/en/class.iteratoraggregate.php)实现到类中的实例，因此您可以迭代私有成员而无需将其公开，或创建公共函数：

```
class BaseballTeams implements IteratorAggregate
{
    private $teams;

    public function __construct( )
    {
        $this->teams = explode( ',', "Tigers,Cubs,Orioles,Mariners,Yankees,Blue Jays,Marlins" );
    }

    public function getIterator( )
    {
        return new ArrayIterator( $this->teams );
    }
} 
```

现在，您可以循环访问私有 $teams 成员，如下所示：

```
$baseball = new BaseballTeams( );

foreach ( $baseball as $n => $t )
{
    echo "<p>Team #$n: $t</p>";
} 
```

# c++ - 谁负责删除？

> ID：11119746
> 
> 赞同：3
> 
> 时间：2012-06-20T12:39:26.223
> 
> 标签：c++, dynamic, delete-operator

我正在分析代码，但对特定代码感到困惑。我已经发布了将传达相同含义的代码/伪代码。

**1级**

```
Class1::Func1()
{
    Collection* cltn;   
    try
    {
        cltn = Class2::get_records_from_db();
    }
    catch(Informix error)
    {}
    catch(DB Error)
    {}
    catch(...)
    { Unknown exception }          //I get this error always once the process processes lot of records   
} 
```

**2 级**

```
Collection* Class2::get_records_from_db()
{
    Collection *clt = new Collection();
    try
    {

        //Query database
        For each row in query result
        Row *row = new row();
        populate(row)
        clt->add(*row)

         ...
        if( Informix error)
        {
            throw Informix error;
        }  
     }

     catch(...)
     {
          delete clt;  //Who will delete row?
          clt = 0;
          throw Db error 
     }

    return clt;  //Who will delete clt?
} 
```

**问题 - 第 2 部分**

感谢您对第一个问题的见解。现在这是正在发生的真正问题。

`Class 1`是一个 C++ 进程，`Class 2`是一个与 Informix 数据库对话的库。 `Class2::get_records_from_db()`是一个查询 Informix DB 并返回结果集的函数。我已经增强了上面的代码，它更类似于真实的代码。

`Collection`objects 处理 200k 个`row`对象，正如你们大多数人所说的那样，它们没有正确释放。
调用者在通用 catch 块中看到“未知异常”。这可能是因为在 中创建了巨大的内存泄漏`Class 2`吗？

我还在日志中看到了一些 Informix 错误`406 (Out of memory error)`。吐出一系列`Unknown Exception`&后进程核心转储`SQLERR406`

我想知道核心转储是否是内存泄漏的副产品。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T12:41:20.487

> **您提供的代码有什么问题？**

您提供的代码示例是一个非常糟糕和错误的代码。

没有人删除 (*`row`和`clt`*) 它们中的任何一个。这会导致***内存泄漏***或***未定义行为***，具体取决于它们的析构函数是否具有微不足道的实现。无论哪种方式，这都意味着可能会发生非常糟糕的事情。

如果使用 分配对象，则`new`需要通过调用. 由于您没有调用任何一个指针，因此它们都不会被释放。`delete``new``delete`

> **谁应该负责删除？**

对象本身！
对象应该具有内置功能，可以在它们的范围（`{`，`}`）结束后立即解除分配。这样，没有人需要显式释放任何对象，但一旦不再需要它们就会被隐式删除。这种技术在 C++中通常被称为***[资源分配是初始化 (RAII) 或范围绑定资源管理 (SBRM) 。](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)***

您的每个对象（*`row`和`clt`*）都应该通过在这些原始指针上编写包装器来使用**[*RAII*](https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii)**，或者更简单地使用现成的**[*智能指针*](https://stackoverflow.com/questions/8706192/which-kind-of-pointer-do-i-use-when)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:46:56.283

智能指针是您所需要的。您应该将每个 new`Row`放入`std::shared_ptr<Row> row`而不是指针；当它们超出范围时（例如，当 try-catch 块退出时），这些`shared_ptr`s 将被自动清理。

你应该用 ' 做什么`clt`并不是那么明确......我很想将它存储在 a 中`std::unique_ptr<Collection>`并返回它，因为很明显 a) 它会在某个时候被自动删除（可能在你的程序exits) 和 b) 调用代码很清楚，它们现在拥有由 返回的值`get_records_from_db()`，而不是`Class2`生成它的实例（或单例）。

清晰的所有权语义是一件好事。

# javascript - 在 asp.net/IIS 之外 runat="server" 的不同用途？对 JavaScript 有用吗？

> ID：11119752
> 
> 赞同：1
> 
> 时间：2012-06-20T12:39:41.460
> 
> 标签：javascript, asp.net

我是一个商业智能的人，在 web-dev 上缓慢而痛苦地重新崛起。自从 Microsoft 首次发布 .NET 以来，还没有真正接触过这些东西。

无论如何 - runat="server"：当我使用这些东西时，这个傻瓜将允许我在我的服务器端 C#/VB.NET/Whatever 中处理我用它标记的任何元素。美好的：

```
<div>  
      <iframe runat="server" id="Iframe2" src ="foo.com"></iframe>  
</div> 
```

我的大部分学习时间都花在了 Microsoft 堆栈之外——我很好奇 runat="server" 是否仍在 ASP.NET/IIS 世界之外使用。

例如，如果我有一些 JavaScript 代码 ala：

```
<script>
$.post("http://foo.com/somePage", {
    someInfo: "russell",
    otherInfo: "hoohaw"
}, function(response) {
Foo(response);
});
</script> 
```

...我可以将 runas="server" 粘贴到`<script>`标签中吗？这会导致脚本在服务器端运行吗？（我猜“不”——我只是有一个可以被服务器端代码访问的脚本块？）

runas="server" 是否有 ASP.NET/IIS 世界之外的任何实用程序？我已经熟悉 LAMP，我很好奇 runas="server" 是否可以让我的客户端代码在服务器上运行——有点像 PHP 之类的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:43:34.200

Javascript 是一种客户端语言。这意味着它在浏览器中执行。

当浏览器收到包含 javascript 的 HTML 页面时，它会执行它。

所以，不，ASP.NET 无法执行您的 JavaScript 代码。

`runat="server"`仅在 ASP.NET AFAIK 中使用。

此外，PHP 也不执行 javascript 代码。

我认为您应该查看您的[客户端-服务器](https://en.wikipedia.org/wiki/Client%E2%80%93server_model)模型:-)（PHP/ASP.NET 是服务器，浏览器是客户端，而 javascript 仅由浏览器执行）。

[PS：当我说“javascript 仅由浏览器执行”时，我当然不是在谈论 node.js 或任何 JS 服务器端技术。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:44:33.967

不，不会的。

`runat="server"`由 ASP.net 引擎处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:46:40.660

好吧，runat 属性定义了一个必须受到服务器端威胁的 ASP 控件。微软标签也是如此。

但是您始终可以实现您的 !DOCTYPE 声明 (DTD) 以允许 runat 服务器属性在您的网页中有效。

您可以修改您的 !DOCTYPE 声明（即 DTD）以允许它，以便 [XML] 文档仍然有效：

[http://www.w3schools.com/DTD/dtd_attributes.asp](http://www.w3schools.com/DTD/dtd_attributes.asp)

但最后：与浏览器引擎运行的 Javascript 无关。

# javascript - 如何在轴世界 three.js 上旋转对象？

> ID：11119753
> 
> 赞同：18
> 
> 时间：2012-06-20T12:39:47.503
> 
> 标签：javascript, three.js

是否可以以世界而不是物体的轴为轴进行旋转？

我需要对一个对象进行一些旋转，但是在第一次旋转之后，我不能像我想要的那样进行其他旋转。

如果无法在世界轴上进行旋转，我的第二个选择是在第一次旋转后重置轴。有什么功能吗？

我不能使用，因为当我在一些旋转后`object.eulerOrder`设置时它会改变我的对象的方向。`object.eulerOrder="YZX"`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-20T16:41:40.063

**更新：三 - 0.125.2**

演示：[codesandbox.io](https://codesandbox.io/s/stoic-galileo-n5n09?file=/src/index.js)

```
const THREE = require("three");

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.z = 5;

const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const geometry = new THREE.BoxGeometry(1, 1, 1, 4, 4, 4);
const material = new THREE.MeshBasicMaterial({
  color: 0x628297,
  wireframe: true
});
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);

// select the Z world axis
const myAxis = new THREE.Vector3(0, 0, 1);
// rotate the mesh 45 on this axis
cube.rotateOnWorldAxis(myAxis, THREE.Math.degToRad(45));

function animate() {
  // rotate our object on its Y axis,
  // but notice the cube has been transformed on world axis, so it will be tilted 45deg.
  cube.rotation.y += 0.008;
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
}

animate(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T18:06:42.123

这是一个小的变化。用 r56 测试。

```
THREE.Object3D._matrixAux = new THREE.Matrix4(); // global auxiliar variable
// Warnings: 1) axis is assumed to be normalized. 
//  2) matrix must be updated. If not, call object.updateMatrix() first  
//  3) this assumes we are not using quaternions
THREE.Object3D.prototype.rotateAroundWorldAxis = function(axis, radians) { 
    THREE.Object3D._matrixAux.makeRotationAxis(axis, radians);
    this.matrix.multiplyMatrices(THREE.Object3D._matrixAux,this.matrix); // r56
    THREE.Object3D._matrixAux.extractRotation(this.matrix);
    this.rotation.setEulerFromRotationMatrix(THREE.Object3D._matrixAux, this.eulerOrder ); 
    this.position.getPositionFromMatrix( this.matrix );
}
THREE.Object3D.prototype.rotateAroundWorldAxisX = function(radians) { 
    this._vector.set(1,0,0);
    this.rotateAroundWorldAxis(this._vector,radians);
}
THREE.Object3D.prototype.rotateAroundWorldAxisY = function(radians) { 
    this._vector.set(0,1,0);
    this.rotateAroundWorldAxis(this._vector,radians);
}
THREE.Object3D.prototype. rotateAroundWorldAxisZ = function(degrees){ 
    this._vector.set(0,0,1);
    this.rotateAroundWorldAxis(this._vector,degrees);
} 
```

最后三行只是为了重新同步`(position,rotation)`矩阵中的参数......我想知道是否有更有效的方法来做到这一点......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-24T11:19:19.660

在 r59 附近的某个地方，这变得容易多了（围绕 x 旋转）：

```
bb.GraphicsEngine.prototype.calcRotation = function ( obj, rotationX)
{
    var euler = new THREE.Euler( rotationX, 0, 0, 'XYZ' );
    obj.position.applyEuler(euler);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-13T12:52:12.867

来自@Neil 的更新答案（在 上测试`r98`）

```
function rotateAroundWorldAxis(obj, axis, radians) {
   let rotWorldMatrix = new THREE.Matrix4();
   rotWorldMatrix.makeRotationAxis(axis.normalize(), radians);
   rotWorldMatrix.multiply(obj.matrix);
   obj.matrix = rotWorldMatrix;
   obj.setRotationFromMatrix(obj.matrix);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-14T22:39:47.173

@acarlon您的回答可能刚刚结束了一周的挫败感。我已经稍微完善了你的功能。这是我的变化。我希望这可以节省其他人我花了 20 多个小时试图解决这个问题的时间。

```
function calcRotationAroundAxis( obj3D, axis, angle ){

    var euler;

    if ( axis === "x" ){
        euler = new THREE.Euler( angle, 0, 0, 'XYZ' );      
    }

    if ( axis === "y" ){
        euler = new THREE.Euler( 0, angle, 0, 'XYZ' );              
    }

    if ( axis === "z" ){
        euler = new THREE.Euler( 0, 0, angle, 'XYZ' );      
    }
    obj3D.position.applyEuler( euler );
}

function calcRotationIn3D( obj3D, angles, order = 'XYZ' ){

   var euler;

   euler = new THREE.Euler( angles.x, angles.y, angles.z, order );

   obj3D.position.applyEuler( euler );

} 
```

这在 r91 中效果很好。希望能帮助到你。

# java - 为什么可比实施有效

> ID：11119757
> 
> 赞同：2
> 
> 时间：2012-06-20T12:40:07.827
> 
> 标签：java, oop

谁能解释一下为什么下面的代码正在处理私有成员变量？

```
 public class Person implements Comparable<Person> {
    private String firstName;
    public Person(String firstName) {
        this.firstName = firstName;
        }

    @Override
    public int compareTo(Person o) {
        return firstName.compareToIgnoreCase(o.firstName);  // why does it work?    }    }
    }
} 
```

**编辑**为什么`o.firstName`要编译？其中 firstName 是`private`可变的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T12:43:14.730

访问修饰符控制每个类而不是每个实例的访问。因此，类的方法可以访问其他类实例`T`的所有成员（甚至是私有的） 。`T`

JLS 7 中的[访问控制链接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)供好奇的人使用。它说：*“请注意，可访问性是可以在编译时确定的静态属性；它**仅取决于类型和声明修饰符**。”*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:42:27.570

因为[私有变量](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)在声明它们的类中是可见的，并且`o`是`Person`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:42:58.787

“compareTo”方法在“Person”类中实现，该类自然可以访问它的私有成员。您从接口 Comparable 覆盖该方法。因此，在这两种情况下，您都在使用同一个班级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T12:44:20.533

因为同一类的对象可以访问彼此的私有属性。这并没有完全破坏关注点的分离，因为此类访问的代码必须在同一个类中，因此该类仍然负责该属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T12:43:11.457

您在类中使用声明它们的私有成员，这完全没问题。

声明类始终可以访问其所有成员，无论成员属于哪个类的实例。

因此，以下代码编译并工作。

```
public class AClass {
    private String name;
    public AClass(String n) {name = n;}

    public void mock(AClass other) {
        System.out.pritln(this.name + ": \"" + other.name + " smells.\"");
    }

    public static void main(String[] args) {
        AClass a = new AClass("Bully");
        AClass b = new AClass("Nemesis");
        a.mock(b);
    }
} 
```

# ios5 - 在 iphone 中上下滚动 GMGridView 后，Imageviews 中的图像正在交换

> ID：11119758
> 
> 赞同：0
> 
> 时间：2012-06-20T12:40:08.150
> 
> 标签：ios5, reusability, gmgridview

我在 GMGridView 中添加了 UIImageView，因为我想在网格中显示图像。在网格中添加 imageview 后，一切正常。我想在第一行和第一列显示不同的图像。所以我在与索引比较后设置了该图像。但是当我向上和向下滚动时，它会将图像从第一列更改为第二列或第三列。同样的图像显示在第 6 行或第 7 行。这有什么问题？这是我的代码

```
 - (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index
{
    CGSize size = [self GMGridView:gridView sizeForItemsInInterfaceOrientation:[[UIApplication sharedApplication] statusBarOrientation]];

    GMGridViewCell *cell = [gridView dequeueReusableCell];

    UIImageView *imageView = nil;
    if (!cell) 
    {
        cell = [[GMGridViewCell alloc] init];
        cell.deleteButtonIcon = [UIImage imageNamed:@"close_x.png"];
        cell.deleteButtonOffset = CGPointMake(-15, -15);

        imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, size.width, size.height)];

        cell.contentView = imageView;

    }

    NSLog(@"Project Index value:- %d",index);
    if (index == 0) {
        imageView.image = [UIImage imageNamed:@"add.png"]; 
    }
    else{
        imageView.image = [UIImage imageNamed:@"face.png"]; 
    }

    [[cell.contentView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];    
    return cell;
} 
```

我还需要 [[cell.contentView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)]; ? 有谁能够帮我 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:33:03.453

尝试使用代码

```
- (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index {
  CGSize size = [self GMGridView:gridView sizeForItemsInInterfaceOrientation:[[UIApplication sharedApplication] statusBarOrientation]];
  GMGridViewCell *cell = [gridView dequeueReusableCell];

UIImageView *imageView = nil;
if (!cell) 
{
    cell = [[GMGridViewCell alloc] init];
    cell.deleteButtonIcon = [UIImage imageNamed:@"close_x.png"];
    cell.deleteButtonOffset = CGPointMake(-15, -15);

    imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, size.width, size.height)];
    NSLog(@"Project Index value:- %d",index);
    if (index == 0) {
       imageView.image = [UIImage imageNamed:@"add.png"]; 
    }
    else{
       imageView.image = [UIImage imageNamed:@"face.png"]; 
    }
       [[cell.contentView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];    
    cell.contentView = imageView;

}
return cell; 
```

}

我认为问题可能是您正在使用删除单元格，然后在删除后将永远不会再次添加它，因为由于实例的存在，`makeObjectsPerformSelector`控件可能不会进入条件。希望这对您有所帮助。`if (!cell) {}``cell`

# php - 哪种实时技术/技术最适合每 1 分钟运行一次繁重的循环？

> ID：11119775
> 
> 赞同：0
> 
> 时间：2012-06-20T12:40:39.273
> 
> 标签：php, ajax, google-ads-api

我正在尝试创建一个每 1 分钟（或多或少）在服务器上运行的过程。我知道我可以通过 cronjob 实现它，但我担心，假设我有大约 1000 个任务（系统需要每 1 分钟检查 1000 个用户），它不会杀死服务器吗？

该系统应该从 google adwords API 同步数据并对其进行处理。例如，它应该从谷歌读取一个广告系列，每 1000 次展示或点击它应该做一些事情。所以很明显，我需要保持与 adwords api 的连接以实时查看统计信息。想象一下，这个过程需要运行 1000 个注册用户。

当我需要每 1 分钟运行一次繁重的循环时，我应该使用什么技术？非常感谢，奥伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:43:43.937

理想情况下，如果您使用的是分布式工作流程，最好以这种方式为多个用户提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:02:56.660

虽然有许多技术可供您使用，但当您没有提供足够的信息时，很难确定任何一种有用的特定技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:53:37.023

您正在尝试做的事情有两个基本问题，第一个比另一个更严重。

*   AdWords API 不会为您提供实时统计信息，报告通常会延迟 3 小时。有关其他背景信息，请参阅[http://adwordsapi.blogspot.com/2011/06/statistics-in-reports.html](http://adwordsapi.blogspot.com/2011/06/statistics-in-reports.html)。

您可以做的是选择您想要运行报告的时间范围（例如每 2 小时一次），然后坚持该时间表。为了给你一个粗略的估计，你可以并行运行 10 个报告，假设下载和解析一个报告需要 10 秒（这给你 1 个报告/秒的吞吐量，但这完全取决于你的互联网连接速度，负载在 AdWords API 服务器上，您的客户有多大，您请求数据的列和细分以及日期范围等。对于大客户，每个报告的时间很容易达到几分钟），您只能刷新 1000 个帐户20-30分钟的时间。

*   即使您想加快速度，AdWords API 也不允许您这样做。它有一个速率限制机制，如果您尝试在非常短的时间内进行太多调用，它将限制您的 API 调用速率。有关详细信息，请参阅[http://adwordsapi.blogspot.com/2010/06/better-know-error-rateexceedederror.html](http://adwordsapi.blogspot.com/2010/06/better-know-error-rateexceedederror.html)。

我的建议是在 Adwords API 的官方论坛上提出这个问题 - [https://groups.google.com/forum/?fromgroups#!forum/adwords-api](https://groups.google.com/forum/?fromgroups#!forum/adwords-api)。您肯定会找到以前解决过类似问题的用户。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-20T12:47:09.363

您可以保护一个包含上次运行循环的时间戳的变量。现在，当用户访问您的页面时，请检查您的时间戳是否超过 1 分钟。如果他年龄较大，请运行您的循环并检查所有用户。

所以您的循环仅在您的网站上有用户时运行。这节省了很多服务器性能。

# php - 在 FuelPHP 中使用 Fieldset 类和 ORM

> ID：11119776
> 
> 赞同：0
> 
> 时间：2012-06-20T12:40:42.207
> 
> 标签：php, fuelphp

第一：对不起我的长消息。

我正在尝试学习 Fuel，但我在使用 Fieldset 类和 Orm 时遇到了一些问题。根据我的数据库，我创建了一个扩展 ORM 的模型，以便获得自动生成的表单。

**我的模特**

```
class Model_Product extends \Orm\Model
{
    protected static $_table_name = 'products';

    protected static $_properties = array(
        'id' => array(
            'data_type' => 'int'
        ),
        'name' => array(
            'data_type' => 'varchar',
            'label' => 'Name',
            'validation' => array(
                'required', 'trim', 'max_length'=>array(30), 'min_length'=>array(3)
            ),
        ),
        'description' => array(
            'data_type' => 'varchar',
            'label' => 'Description',
            'validation' => array(
                'max_length' => array(290)
            ),
            'form' => array(
                'type' => 'textarea'
            ),
        ),
        'price' => array(
            'data_type' => 'integer',
            'label' => 'Price',
            'validation' => array(
                'required', 'trim', 'valid_string' => array('numeric','dots')
            ),
        ),
        'pic' => array(
            'data_type' => 'varchar',
            'label' => 'Path to the pic',
            'validation' => array(
                'required', 'trim'
            ),
        ),
        'registered' => array(
            'data_type' => 'date',
            'label' => 'Registration date',
            'validation' => array(
                'required', 'trim'
            ) //'valid_string' => array('numeric','dashes')
        ),
    );
} //end of class Model_Product 
```

然后我创建将验证表单的控制器。

**我的控制器功能**

```
function action_add() 
{ 
    $fieldset = Fieldset::forge('add_product')->add_model('Model_Product')->repopulate();

    $form = $fieldset->form();

    $form->add('submit', '', array('type' => 'button', 'value' => 'Add item', 'class' => 'button-link' ));

    $validation = $fieldset->Validation();

    if($validation->run() === true) 
    { 
        $fields = $fieldset->validated();

        //create a new Product, with validated fields 
        $product = new Model_Product;

        $product->name = $fields['name']; 
        $product->description = $fields['description']; 
        $product->price = $fields['price'];
        $product->pic = $fields['pic']; 
        $product->registered = $fields['registered'];

        try 
        { 
            //if the product is successfully inserted in the database
            if($product->save()) 
            { 
                Session::set_flash('success', 'Product successfully added !');
                \Response::redirect('products/product_details/'.$product->id); 
            }
        } 
        catch(Exception $e) 
        { 
            Session::set_flash('error', 'Unable to save the product into the database !'.$e->getMessage()); 
        }
    } 
    //If the validation doesn't pass 
    else 
    { 
        Session::set_flash('error', $fieldset->show_errors()); 
    }

    $this->template->set('content', $form->build(), false);

} // end of method add() 
```

我的第一个问题：我如何以及在我的控制器函数中的何处添加具有特定类的“fieldset”标签，以“美化”我的自动生成的表单？比方说

```
<fieldset class="add_product"> 
```

第二个问题：我必须做什么才能正确验证 de 'price' 字段，因为在 MySQL 中设置为十进制（5,2），但是当我尝试使用我的实际验证规则进行验证时，它没有t 通过（它仅适用于整数值，例如：42，但不适用于十进制值，例如：42.35）。我试图将类型从“整数”更改为“双”，但它不起作用。

如果您可以指出一些关于我的问题的具体文档，我可能还没有阅读，请随意。

加布里埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:00:05.173

我可以回答第一个问题要更改自动生成的表单，您需要复制`fuel/core/config/form.php`到`fuel/app/config`目录并编辑此文件以满足您的需要。

# sharepoint - 如何覆盖 Web.UI.Page - Sharepoint 中的事件？

> ID：11119778
> 
> 赞同：2
> 
> 时间：2012-06-20T12:40:47.697
> 
> 标签：sharepoint, sharepoint-2010

我想压缩视图状态。因此我需要覆盖`SavePageStateToPersistenceMedium`属于 Web.UI.Page 的那个。在“正常”的 ASP.Net 中，这很容易，但在我的共享点项目中，我找不到任何地方我有一个从 Web.UI.Page 继承的类

我的 PageLayouts 没有代码，masterPage 也没有。

最好的解决方案是让我能够在 pageLayout 中处理它，因为我不希望每个 Page 都缓存 ViewState。

让它更清楚一点。这是我想放在“某处”的代码：

```
public abstract class BasePage : System.Web.UI.Page
{
    private ObjectStateFormatter _formatter = 
        new ObjectStateFormatter(); 

    protected override void
        SavePageStateToPersistenceMedium(object viewState)
    {
        MemoryStream ms = new MemoryStream();
        _formatter.Serialize(ms, viewState);
        byte[] viewStateArray = ms.ToArray();
        ClientScript.RegisterHiddenField("__COMPRESSEDVIEWSTATE",
            Convert.ToBase64String(
            CompressViewState.Compress(viewStateArray)));
    }
    protected override object
        LoadPageStateFromPersistenceMedium()
    {
        string vsString = Request.Form["__COMPRESSEDVIEWSTATE"];
        byte[] bytes = Convert.FromBase64String(vsString);
        bytes = CompressViewState.Decompress(bytes);
        return _formatter.Deserialize(
            Convert.ToBase64String(bytes));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:44:58.460

我将继承自 PublishingLayoutPage （反过来又[继承自 Page](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.publishinglayoutpage.aspx)），并让我的所有页面布局都使用此基本页面作为代码隐藏。这意味着您需要像这样更改页面布局的页面指令：

```
<%@ Page Language="C#" Inherits="YourNameSpace.BasePage, $SharePoint.Project.AssemblyFullName$" %> 
```

# curl - 使用 HTTP 和 REGEX 清除清漆

> ID：11119786
> 
> 赞同：15
> 
> 时间：2012-06-20T12:41:15.027
> 
> 标签：curl, varnish, purge

我想使用 HTTP 清除清漆的元素。这个 http 调用是从 varnish 本身后面的后端服务器触发的，因此后端服务器除了 HTTP 之外没有其他访问权限。

我已经使用相应的 ACL 实施了以下清除规则，这些规则适用于

```
curl -X PURGE http://www.example.com/image/123/photo-100-150.jpg 
```

但我希望能够使用正则表达式通过 HTTP 清除 URL

```
curl -X PURGE http://www.example.com/image/123/*.jpg 
```

这样，我想在上传新图像后清除该图像的所有缩放版本。有办法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T04:06:45.867

试试这个：

如果清漆 3.0 及更高版本。

```
vcl_recv {
    if (req.request == "PURGE") {
             if (!client.ip ~purge){
                     error 405 "Not allowed";
             }
     ban("req.http.host == " +req.http.host+" && req.url ~ "+req.url);
     error 200 "Ban added";

    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-17T16:52:42.387

首先定义谁可以使用清除的白名单，然后在您的 VCL 中添加清除器节。

```
acl purge {
"127.0.0.1";
"10.22.0.0"/16;
}

sub vcl_recv {

if (req.http.X-Purge-Regex) {
        if (!client.ip ~ purge) {
            error 405 "Varnish says nope, not allowed.";
        }
        ban_url(req.http.X-Purge-Regex);
        error 200 "The URL has been Banned.";
} 
```

Varnish 将使用标头的值`X-Purge-Regex`来创建禁令。

所以你可以禁止这样的事情：

```
curl -v -X PURGE -H 'X-Purge-Regex: ^/assets/*.css' varnishserver:6081 
```

或者

```
curl -v -X PURGE -H 'X-Purge-Regex: ^/images/*' varnishserver:6081 
```

`varnishserver`是您的清漆服务器的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:56:42.127

当然有。

在 VCL 中，您想使用 ban 方法 - 记录在“man vcl”中。它对传入的请求创建一个过滤器。如果你打算以每秒 2 次以上的速度使用它，我建议你用谷歌搜索“ban luker friendly”并相应地重写表达式。

未经测试的代码：

```
sub vcl_recv {
         if (req.method == "PURGERE" and client.ip ~ admin_network) {
            ban("req.http.host == " + req.http.host + " && req.url == " + req.url);
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T04:08:22.340

```
acl purge {
"127.0.0.1";
}

sub vcl_recv {
    if (req.request == "PURGE") {
        if (!client.ip ~ purge) {
            error 405 "IP:" + client.ip + " Not allowed.";
        }
        ban("req.http.host == " + req.http.host + " && req.url ~ " + req.url);
        error 200 "host:" + req.http.host + " url:" + req.url + " Ban added";
    }
} 
```

# php - Symfony 1.4 在同一缩进处嵌入表单字段

> ID：11119789
> 
> 赞同：1
> 
> 时间：2012-06-20T12:41:26.937
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我的 Symfony 应用程序中有两个模型。第一个是博客：

```
Blog:
  columns:
    name: { type: string(20), notnull: true, unique: true }
    title: { type: string(255), notnull: true }
    description: { type: string(255), notnull: true }
    admin_id: { type: bigint, notnull: true }
  relations:
    User:
      class: sfGuardUser
      local: admin_id
      ... 
```

如您所见，此模型与 sfGuardUser 具有一对一的关系。我希望这两个注册以一种形式进行。

所以我更改了 BlogForm 类并`embeddedRelation`在其中使用了方法。所以两种形式只是一起出现。问题是他们的观点！用户注册表单（嵌入在 BlogForm 中）看起来像个孩子！我不想要这个......我希望这些字段具有相同的缩进。

我的表单视图是这样的：

![我的当前视图](../Images/440f9e0057fb4be785320151e724ff54.png)

但我想要这样的东西：

![在此处输入图像描述](../Images/50acc75be508c36c165c13450ed0337e.png)

做这个的最好方式是什么？它与FormFormatter有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:52:44.167

你有检查`sfWidgetFormSchemaFormatter`或[渲染*方法](http://www.symfony-project.org/gentle-introduction/1_4/en/10-Forms#chapter_10_customizing_the_form_display)吗？

[我在这里](https://stackoverflow.com/a/10109508/569101)给出了几乎相关的答案。而且我认为这几乎与这里出现的问题相同：[Removing table headers from embedRelation()](https://stackoverflow.com/questions/11085965/removing-table-headers-from-embedrelation)

我认为最好的方法是使用`sfWidgetFormSchemaFormatter`或 render* 方法在模板中手动构建表单。

* * *

**编辑：**

关于我在[这里](https://stackoverflow.com/a/11163364/569101)回答的内容，尝试添加这样的自定义格式化程序（在`lib/widget/sfWidgetFormSchemaFormatterAc2009.class.php`）：

```
class sfWidgetFormSchemaFormatterAc2009 extends sfWidgetFormSchemaFormatter
{
  protected
    // this will remove table around the embed element
    $decoratorFormat = "%content%";

  public function generateLabel($name, $attributes = array())
  {
    $labelName = $this->generateLabelName($name);

    if (false === $labelName)
    {
      return '';
    }

    // widget name are usually in lower case. Only embed form have the first character in upper case
    if (preg_match('/^[A-Z]/', $name))
    {
      // do not display label
      return ;
    }
    else
    {
      return $this->widgetSchema->renderContentTag('label', $labelName, $attributes);
    }
  }
} 
```

然后将其添加到您的表单中`ProjectConfiguration`：

```
class ProjectConfiguration extends sfProjectConfiguration
{
  public function setup()
  {
    // ...

    sfWidgetFormSchema::setDefaultFormFormatterName('ac2009');
  }
} 
```

（资料来自[顺丰网站](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms#chapter_06_custom_styling_when_a_form_element_has_an_error)）

如果这不起作用，请`var_dump($name);`在 the 之前添加一个`if (preg_match`并将输出添加到您的问题中。

# .net - 正则表达式检查“-”或“+”是否在开始和结束

> ID：11119798
> 
> 赞同：-1
> 
> 时间：2012-06-20T12:42:07.737
> 
> 标签：.net, regex

我正在尝试制作一个可以检查字符串是否与模式匹配的正则表达式`-*0001-`

字符串的第一个字符或最后一个字符可以是 a`+`或 a `-`。`*`在字符串的开头有一个可选字符（在`+`or之后`-`），之后我们禁止使用特殊字符。除了, 和 optional之外`+`，至少需要有一个字符。`-``*`

正确的匹配是

1.  `-cccccc`
2.  `cccccc-`
3.  `+ccccc`
4.  `ccccc+`
5.  `+*cccc`
6.  `*cccc+`

不正确的匹配将是

1.  `-cc*c`
2.  `*-`
3.  `+`
4.  `+-`

到目前为止，我的正则表达式非常接近，但还不够接近：

```
^([\+\-]?)(\*?)([a-z0-9]*)([\+\-]?)(\1\4)$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:45:07.037

也许更简单的东西，像这样？

**正则表达式 1：** `([+-]\S+)|(\S+[+-])`

这将匹配任何以 , 开头`+`或`-`以`+`,结尾`-`（或两者兼有）的字符串。它不会检查是否只有一个`+`or `-`，并且它不匹配`+`or`-`本身或任何空格。

这匹配`-ccc`, `+ccc`, `ccc-`, `ccc+`, `+ccc+`, `-ccc+`, `+++++`, `++`, 但不`+`匹配`+\t\t`

不允许最后一个字符是`+`或者`-`如果第一个字符是`+`or `-`，反之亦然（字符串不是以`+`or开头和结尾`-`），你想做类似的事情

**正则表达式 2：** `([+-]\S*[^+\-\s])|([^+\-\s]\S*[+-])`

这不匹配`-ccc+`或`++`或`+++++`但匹配`+++++a`。

为了不匹配任何`+`或`-`在你的班级内部，你需要做

**正则表达式 3：** `([+-][^+\-\s]+)|([^+\-\s]+[+-])`

哪个不匹配`++++a`

**编辑**：忘记`-`在字符类中转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:02:08.597

我不知道为什么您的尝试或其他答案如此复杂。

这将满足标题的要求： `^([+-].*|.*[+-])$`

还有更多你没有告诉我们的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:09:05.453

我认为当第一个和最后一个位置都具有相同的字符时，OP 希望匹配，可以是 - 或 +，例如`-aaa-`or`+aaa+`但不是`-aaa+`。在这种情况下，这应该有效：

```
^([-+]).+\1$ 
```

这匹配`[-+]`一个 - 或 + 字符（首先是 - 所以它不被视为一个范围），然后是一些字符，然后是第一组。第一组是第一个字符，因为我们把它放在括号中。

例子：

```
$ echo '-aaaa-' | grep -P '^([-+]).+\1$'
-aaaa- 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:19:23.787

功劳应该归功于科比，但由于某种原因，他删除了他的答案。我已经编辑了一点

最后的答案是

`^(?:(?<UOMPrefix>[+-])(?<BCPrefix>\*?)(?<BarCode>\w+)|(?<BCPrefix>\*?)(?<BarCode>\w+)(?<UOMPrefix>[+-])|(?<BCPrefix>\*?)(?<BarCode>\w+))$`

这考虑了 Optional(+-)Optional(*)(characters)Optional(+-)

# .htaccess - html实体的Htaccess重定向问题

> ID：11119803
> 
> 赞同：0
> 
> 时间：2012-06-20T12:42:30.253
> 
> 标签：.htaccess

知道为什么这条线不起作用

重定向 /pages/Contact%7B47%7DCustomer-Service.html /pages/Contact-Customer-Service.html

htaccess 文件中的所有其他重定向都存在此特定代码行的问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:16:17.353

您是否在其他行上使用 HTML 实体进行重定向？您确定可以在重定向中使用它们吗？AFAIK 应该避免在文件名或 URL 中使用它们。

这只是一个猜测，但您的第一个实体似乎有四个字符，即百分号 (%7B47)，而第二个实体只有两个 (%7D)。我不确定，但实体不应该总是相同的长度吗？

# java - 将对象添加到“？扩展”类型的通用集合

> ID：11119804
> 
> 赞同：8
> 
> 时间：2012-06-20T12:42:34.143
> 
> 标签：java, generics, collections

```
public void addAllAnimals(ArrayList<? extends Animal> animalLikeList){

 // I need to add animal objects (eg Dog, Cat that extends Animal) to animalLikeList.

} 
```

我知道它不允许直接添加，因为它`? extends Animal`代表`Animal`.

我的问题是：没有任何方式（间接方式）`add`或对象`addAll`的子类型吗？`Animal``Animal``animalLikeList`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T12:46:28.573

不，没有直接的合法方式（除了不安全的类型转换）。您只能将元素添加到用 声明的通用集合`super`，而不是`extends`。*使用 Josh Bloch 在Effective Java, 2nd Edition* , Item 28中推广的首字母缩写词*PECS*（Producer - Extends，Consumer - Super）可能更容易记住这一点。

 *事实上，你所追求的似乎并没有直接意义。A`List<? extends Animal>`可以是例如 a`List<Dog>`或 a `List<Cat>`。前者只能接受`Dog`元素，后者只能接受`Cat`s。而且由于您不能在 Java 中实例化通用（不可具体化）类型，因此您必须在运行时知道您正在处理一个狗列表，因此您只尝试将狗添加到其中（猫反之亦然）。这意味着您不能在本地和静态地创建要添加的对象 - 您也必须以通用方式获取它们，而且以允许编译器确保每次都匹配具体类型的方式。最简单的方法是将元素作为通用参数传递。因此，这样做是可能且安全的：

```
public <E extends Animal> void addAllAnimals(List<E> animalLikeList, E animal) {
    animalLikeList.add(animal);
}

List<Dog> dogs = new ArrayList<Dog>();
List<Cat> cats = new ArrayList<Cat>();

addAllAnimals(dogs, new Dog());
addAllAnimals(cats, new Cat()); 
```

请注意，此方法是泛型的，带有命名类型参数，可确保列表的实际泛型类型与要添加到其中的元素类型相同。

您可以简单地将`E`参数替换为 a`Collection<E>`以一次添加多个对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:46:21.880

> 我的问题是：是否有任何方式（间接方式）向 animalLikeList 添加或添加 Animal 或 Animal 对象的 SubType？

并非没有更改签名，并且有充分的理由。假设您想`Dog`向该列表添加值......但假设它在逻辑上是一个猫列表：

```
ArrayList<Cat> cats = new ArrayList<Cat>();
addAllAnimals(cats); 
```

您不应该将 a 添加`Dog`到a ，对`ArrayList<Cat>`吗？

如果您希望能够将*任何*类型的动物添加到列表中，您需要：

```
public void addAllAnimals(ArrayList<Animal> animalLikeList) { 
```

或者

```
public void addAllAnimals(ArrayList<? super Animal> animalLikeList) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:01:53.617

为什么不简单地更改方法签名以使用不变类型参数？

```
public void addAllAnimals(ArrayList<Animal> animalLikeList){
   animalLinkedList.add(new Dog());
   animalLinkedList.add(new Cat());

} 
```

它应该可以正常工作，并且通过使用不变的类型参数，您将被允许从列表中读取或写入列表，并且根据子类型多态性的规则，它可以包含您想要的任何种类的动物。

与其尝试传递狗列表或猫列表，不如将动物列表传递给该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:49:08.613

```
ArraList<anything extends animal> list= new ArrayList<anything extends animal>();

addAllAnimals(list); 
```

这是完全有效的。您的方法`addAllAnimals`将接受任何声明包含 Animal 的任何子类型的 arrayList。

对于添加对象/列表，您可以添加任何对象/列表动物的子类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T12:56:19.380

不是以类型安全的方式...

一种想法是将签名更改为：

```
public static <T extends Animal> void addAllAnimals(ArrayList<? super T> list){} 
```

您可以将 T 或 T 的子类型添加到 T 列表中...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-20T12:13:03.440

您可以使用非通用方式在通用集合中添加所有

```
public void testExtends(ArrayList<? extends Parent> list) throws Exception {
    /*  list.add(new Child());
        list.add(new Parent());
        list.add(new GrandParent());
        // can not add
        */
        /**
         * Unsafe collection way
         */
        ArrayList list2=new ArrayList();
        list.addAll(list2);
    } 
```*

# c# - 我可以使用自定义验证属性手动验证属性吗？

> ID：11119805
> 
> 赞同：2
> 
> 时间：2012-06-20T12:42:36.817
> 
> 标签：c#, validation, data-annotations

我有一个 custom `ValidationAttribute`，但是我只想在选中 CheckBox 时验证这个属性。

我已经让我的类继承`IValidationObject`并使用该`Validate`方法来执行任何自定义验证，但是我可以在`ValidationAttribute`这里使用自定义而不是复制代码吗？如果是这样，怎么办？

```
public class MyClass : IValidatableObject
{
    public bool IsReminderChecked { get; set; }
    public bool EmailAddress { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (IsReminderChecked)
        {
            // How can I validate the EmailAddress field using
            // the Custom Validation Attribute found below?
        }
    }
}

// Custom Validation Attribute - used in more than one place
public class EmailValidationAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        var email = value as string;

        if (string.IsNullOrEmpty(email))
            return false;

        try
        {
            var testEmail = new MailAddress(email).Address;
        }
        catch (FormatException)
        {
            return false;
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T15:35:20.043

可以根据另一个属性的值来验证一个属性，但是要确保验证引擎按您期望的方式工作，需要跳过一些环节。Simon Ince 的[RequiredIfAttribute](http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx)`ValidateEmailIfAttribute`有一个很好的方法，只需将您的电子邮件验证逻辑添加到该方法即可轻松将其修改为`IsValid`。

例如，您可以拥有基本验证属性，就像现在一样：

```
public class ValidateEmailAttribute : ValidationAttribute
{
  ...
} 
```

然后使用因斯的方法定义条件版本：

```
public class ValidateEmailIfAttribute : ValidationAttribute, IClientValidatable
{
  private ValidateEmailAttribute _innerAttribute = new ValidateEmailAttribute();

  public string DependentProperty { get; set; }
  public object TargetValue { get; set; }

  public ValidateEmailIfAttribute(string dependentProperty, object targetValue)
  {
    this.DependentProperty = dependentProperty;
    this.TargetValue = targetValue;
  }

  protected override ValidationResult IsValid(object value, ValidationContext validationContext)
  {
    // get a reference to the property this validation depends upon
    var containerType = validationContext.ObjectInstance.GetType();
    var field = containerType.GetProperty(this.DependentProperty);

    if (field != null)
    {
      // get the value of the dependent property
      var dependentvalue = field.GetValue(validationContext.ObjectInstance, null);

      // compare the value against the target value
      if ((dependentvalue == null && this.TargetValue == null) ||
          (dependentvalue != null && dependentvalue.Equals(this.TargetValue)))
      {
        // match => means we should try validating this field
        if (!_innerAttribute.IsValid(value))
          // validation failed - return an error
          return new ValidationResult(this.ErrorMessage, new[] { validationContext.MemberName });
      }
    }

    return ValidationResult.Success;
  }

  // Client-side validation code omitted for brevity
} 
```

然后你可以有类似的东西：

```
[ValidateEmailIf("IsReminderChecked", true)]
public bool EmailAddress { get; set; } 
```

# c++ - CLI 到本机字节数组的转换

> ID：11119806
> 
> 赞同：1
> 
> 时间：2012-06-20T12:42:38.980
> 
> 标签：c++, visual-c++, c++-cli

这是我从 CLI 到本机的转换字节数组的变体：

```
byte* GetNative(array<System::Byte, 1> ^ byteArray) {
    try {
        pin_ptr<unsigned char> array_pin = &byteArray[0];
        return (byte*) array_pin;
        }
    catch(...) {
        return 0;
        }
    } 
```

我的问题是关于`array_pin`. 我想我需要删除它，但是如果我删除它，那么带有我的`byte*`指针的变量将被破坏（或者至少可能被破坏。）

使用此变体是否安全？或者，我必须如何以及何时删除`array_pin`？有没有更简单的方法来实现字节转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:50:39.437

`array_pin`一旦超出范围就会被取消固定，例如。返回时`GetNative`。然后，垃圾收集器可能会移动或收集底层托管数组，从而使`byte*`您返回的数组悬空，这将在取消引用时导致损坏。

由于`pin_ptr`不能是成员变量并且您不能将其从函数中传回，您要么需要在`array_pin`仍在范围内时对非托管数组执行所有操作，要么将数据从固定数组复制到其他地方（例如 a `std::array`）。

# jquery - 如何将自定义触发器添加到 Masonry 无限滚动

> ID：11119808
> 
> 赞同：0
> 
> 时间：2012-06-20T12:42:55.217
> 
> 标签：jquery, jquery-masonry, infinite-scroll

我有一个使用砖石和无限滚动的页面。一切似乎都正常工作，但我希望我的访问者使用按钮触发无限滚动效果，而不是自动激活触发器。类似于 Google 的图片搜索。这是代码，我相信某种...

```
$("#load-more-button").click(function(){}); 
```

...可以放在某个地方...

```
<script type="text/javascript">

jQuery(document).ready(function($){ var $container = $('#posts');

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.post',
    isFitWindow: true
  });
});

$container.infinitescroll({
  navSelector  : '#page-nav',    // selector for the paged navigation 
  nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
  itemSelector : '.post',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'Nothing more',
      img: 'images/ajax-loader.gif'
    }
  }, 
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $( newElements ).css({ opacity: 0 });

    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });

        $container.masonry( 'appended', $newElems, true ); 

    });
  }
); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:44:54.163

您是否查看了[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)上的文档？在底部，有一个关于触发时无限滚动的部分。

我很好奇你是否知道这一点，因为我遇到了同样的问题，似乎无法让它发挥作用。

# iphone - 将视图委托设置为非自我

> ID：11119809
> 
> 赞同：1
> 
> 时间：2012-06-20T12:42:58.023
> 
> 标签：iphone, objective-c, ios, xcode

我想将视图委托设置为其他自我。

![示例屏幕截图](../Images/3fe547ece214df52737ba56f2f2db716.png)

我基本上想让“主视图”成为“第二模式”的代表。由于我使用的是故事板，我假设可以将“第二模式”的代表设置为从“第一模式”到“第二模式”的转场。我似乎无法做到这一点。

我已经在“主视图”中有方法等待“第二模态”视图调用，因为由于设计原因我不得不添加“第一模态”

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:22:27.223

您可以在代码中设置委托属性。

在视图控制器的实现中，您要委派谁的视图（在您的情况下为“第二模式”）只需调用：

```
self.(whatever view has the delegate property).delegate = [self.presentingViewcontroller.navigationController.navigationController.topViewController] 
```

或根据您的设置进行类似的操作。

每个模态视图控制器都有一个指向其呈现视图控制器的反向指针。

每个嵌入在 navigationController 中的 viewController 都有一个指向该 navigationController 的反向指针。

# html - 相互影响的不相关 CSS ID

> ID：11119811
> 
> 赞同：0
> 
> 时间：2012-06-20T12:42:58.803
> 
> 标签：html, css

我目前正在重新设计我的网站以拥有两列。左栏是带有一些链接和文本的侧边栏，右栏是`<body>`页面的正文（不是）。我遇到的问题是页面上两个完全独立的元素的 CSS 规则会影响这两个元素。

由于这可能没有意义，这是我的代码：

**CSS**

```
#left h1, h2, h3, h4, h5, h6 {
    padding: 10px;
    color: black;
}
#right h1, h2, h3, h4, h5, h6 {
    padding: 0px 10px;
} 
```

**HTML**

```
<div id="left">
    <?php include('sidebar.php'); ?>
</div>

<div id="right">
    <h2>Blah blah blah welcome</h2>
    <p>Yadda yadda yadda.</p>

    <div class="sep"></div>

    <h2>Etc etc</h2>
    <p>The end.</p>
</div> 
```

我要做的是删除`#right`标题上的顶部和底部填充，但出于某种原因，无论我做什么，CSS id 都会相互影响。我不仅可以在物理上看到它，而且当我在 Google Chrome 中检查代码时，这两个元素都具有两者的规则`#left`并`#right`归因于它们。本质上，`#right`标题仍然具有顶部和底部填充。

我已经尝试完全删除页面中的任何一个`#left`或`#right`从页面中删除，以查看 CSS 规则是否会受到影响，但它没有做任何事情。

我能做些什么呢？这是某种错误吗？我的代码是否有问题而我出于某种原因看不到？

我希望我是有道理的。提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:44:23.140

像这样写：

```
#left h1, #left h2, #left h3, #left h4, #left h5, #left h6 {
    padding: 10px;
    color: black;
}
#right h1, #right h2, #right h3, #right h4, #right h5, #right h6 {
    padding: 0px 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:44:08.840

“无关”？*因为您在该行*前面加上`#left`?
不，您必须为每个子选择器添加前缀`#left`才能获得所需的结果。

```
#left h1, h2, h3, ... {}
/* is equivalent to */
#left h1 {}
h2 {}
h3 {} 
```

应该：

```
#left h1, #left h2, #left h3, ... {} 
```

我同意，复制那么多并不好玩。为了提高工作效率，您可以使用 CSS 预处理器，例如[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)，然后使用选择器：

```
/* Note: THIS IS NOT PURE CSS, USE A CSS PRE-PROCESSOR */
#left {
    h1, h2, h3, h4 { ... }
} 
```

# .net - 有没有关于 Visual Studio 2010 + MVC3 + MS WebApi 入门的教程？

> ID：11119814
> 
> 赞同：0
> 
> 时间：2012-06-20T12:43:01.477
> 
> 标签：.net, asp.net-mvc-3, visual-studio-2010, asp.net-web-api

我想了解如何使用新的 MS WebApi。我注意到在 NuGet 上有很多包。

我不确定从哪里开始以及使用哪一个:(

我不想安装 Visual Studio 2012。

我可以在 VS2010 MVC 应用程序中使用 WebApi 吗？如果是这样，怎么做？

[官方文档](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)只显示了 Visual Studio 2012 的屏幕截图:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:48:47.210

> 我不想安装 Visual Studio 2012。
> 
> 我可以在 VS2010 MVC 应用程序中使用 WebApi 吗？如果是这样，怎么做？

是的，您可以在 VS 2010 中使用 Web API dll。Web API 是 MVC4 的一部分。

[这](http://nuget.org/packages/aspnetwebapi)是 nuget 数据包，如果您不想安装 MVC4

> 我想了解如何使用新的 MS WebApi。我注意到在 NuGet 上有很多包。

网上有很多教程。您可以从[有关 Web API 的 Microsoft 官方页面](http://www.asp.net/web-api)开始：

[Pluralsight 官方网站上](http://www.pluralsight-training.net/microsoft/courses/TableOfContents?courseName=aspnetwebapi)还有一个很好的入门教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:44:54.960

有一篇博文，它结合了许多关于 ASP.NET Web API 的精彩博文、视频和示例的链接：

[ASP.NET Web API 入门 - 教程、视频、示例](http://www.tugberkugurlu.com/archive/getting-started-with-asp-net-web-api-tutorials-videos-samples)

# operating-system - 预测非同步线程中的输出

> ID：11119817
> 
> 赞同：1
> 
> 时间：2012-06-20T12:43:06.763
> 
> 标签：operating-system

i 是一个值为 5 的全局变量，函数 v() 由三个线程调用。

```
v()
{
    i++;
    i--;
} 
```

**线程不同步。**
什么是没有。我的可能结果是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:28:44.560

输出将始终是`i=5`因为`i++`是单个语句（对于 也是如此），并且无论语句的`i--`顺序是什么，结果始终是。`i++``i--``i=5`

如果你有`int tmp = i; i = tmp + 1;`而不是`i++`，你可以有，`i≠5`因为`int tmp = i; i = tmp + 1;`不是一个单一的陈述。

以下是两个线程（名为 A 和 B）的所有可能性：

```
 | i = 5
A: i++  | i = 6
A: i--  | i = 5
B: i++  | i = 6
B: i--  | i = 5

        | i = 5
A: i++  | i = 6
B: i++  | i = 7
A: i--  | i = 6
B: i--  | i = 5

        | i = 5
A: i++  | i = 6
B: i++  | i = 7
B: i--  | i = 6
A: i--  | i = 5 
```

# oracle10g - ORA-00932 在视图上使用外连接时

> ID：11119822
> 
> 赞同：0
> 
> 时间：2012-06-20T12:43:12.100
> 
> 标签：oracle10g, outer-join, ora-00932

我的简化查询如下：

```
INSERT INTO table1
(acct_no, name, description)
SELECT a.acct_no,
 b.name,
 TO_LOB(c.description)
FROM tableA a, viewB b, tableC c
WHERE a.person_id = b.person_id(+)
AND a.person_id = c.person_id; 
```

注意：我使用的是Oracle 10g，table1.description 是LOB 类型，c.description 是LONG 类型，viewB 是视图，table1.name 是与b.name 相同的数据类型

上面的查询返回：

***SQL 错误：ORA-00932：不一致的数据类型：预期 - 得到 LONG 00932。00000 -“不一致的数据类型：预期 %s 得到 %s”***

错误指向我使用 TO_LOB 函数的行。

但是，如果我删除外部联接，它工作正常。也就是说，以下工作：

```
INSERT INTO table1
(acct_no, name, description)
SELECT a.acct_no,
 b.name,
 TO_LOB(c.description)
FROM tableA a, viewB b, tableC c
WHERE a.person_id = b.person_id
AND a.person_id = c.person_id; 
```

但是我确实需要使用外连接，但我不明白为什么在 viewB 上使用外连接会导致另一个表（tableC）中的字段出现不一致的数据类型错误。

基本上，TO_LOB() 本身（没有外连接）可以工作，而外连接也可以自己工作，但是当两者都包含在 SQL 中时，它会在不太可能的地方给出错误。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:20:18.833

此问题可能是由于以下链接底部指出的 Oracle 错误： [http ://www.dba-oracle.com/sf_ora_00932_inconsistent_datatypes_expected_string_got_string.htm](http://www.dba-oracle.com/sf_ora_00932_inconsistent_datatypes_expected_string_got_string.htm)

在我的例子中，我采用了一种避免使用视图的变通方法，而是直接使用表并且它起作用了。

# c# - 连接上下文和 UserNamePasswordValidator

> ID：11119825
> 
> 赞同：3
> 
> 时间：2012-06-20T12:43:16.527
> 
> 标签：c#, wcf, security, https, wcf-security

我正在使用`UserNamePasswordValidator`WCF。我的代码类似。我使用数据库。有谁知道如何在此方法中获取有关当前连接上下文的信息。我想记录不成功呼叫的 IP 地址

```
public class MyCustomUserNameValidator : UserNamePasswordValidator
{
    // This method validates users. It allows two users, test1 and test2 
    // with passwords 1tset and 2tset respectively.
    // This code is for illustration purposes only and 
    // MUST NOT be used in a production environment because it is NOT secure.   
    public override void Validate(string userName, string password)
    {
        if (null == userName || null == password)
        {
            throw new ArgumentNullException();
        }

        if (!(userName == "test1" && password == "1tset") && !(userName == "test2" && password == "2tset"))
        {
            throw new SecurityTokenException("Unknown Username or Password");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:34:20.340

检查这个

[在 ASP.NET 中获取服务器的 IP 地址？](https://stackoverflow.com/questions/646525/getting-the-ip-address-of-server-in-asp-net)

在您的例外中，您可以获得 IP 地址。

# websocket - 在哪里可以找到示例 MVC 4 / ASP 4.5 / Websockets

> ID：11119826
> 
> 赞同：0
> 
> 时间：2012-06-20T12:43:20.090
> 
> 标签：websocket, asp.net-mvc-4, visual-studio-2012

我已经安装了 Visual Studio 2012 RC。我想找到任何 MVC 和 websockets 的例子，但我没有找到。

我对服务器部分感兴趣。

我在这里找到了一些信息：http: [//blogs.microsoft.co.il/blogs/idof/archive/2012/03/06/what-s-new-in-wcf-4-5-websocket-support-part -2-of-2.aspx](http://blogs.microsoft.co.il/blogs/idof/archive/2012/03/06/what-s-new-in-wcf-4-5-websocket-support-part-2-of-2.aspx)

我找到了这个样本：

[https://github.com/paulbatum/WebSocket-Samples](https://github.com/paulbatum/WebSocket-Samples)

我会尝试用这个做点什么:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:25:06.447

我使用此资源来了解如何实现服务器部分：

[http://marcinbudny.blogspot.de/2011/10/websockets-in-net-45-simple-game.html](http://marcinbudny.blogspot.de/2011/10/websockets-in-net-45-simple-game.html)

我认为它非常有用。

# objective-c - 具有“受保护”设置的 iPad App

> ID：11119827
> 
> 赞同：0
> 
> 时间：2012-06-20T12:43:22.487
> 
> 标签：objective-c, ios, ipad

我需要编写一个 iPad 应用程序，该应用程序具有用户可修改的一些设置和管理员可修改的其他保留设置：我希望某些设置受密码保护，例如限制受密码保护。

那么，有谁知道是否可以使用密码（或类似密码）保护某些应用程序自定义设置以及如何保护？

欢迎任何建议或提示。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:46:34.530

如果您指的是“设置”默认 iphone 应用程序中的设置，那么您不能这样做。您只能从预定义的设置类型中进行选择，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:34:43.617

如果不使用“设置”默认值，您可以创建一个单独的文件并将设置变量放在那里（例如，您希望用户更改背景颜色，或其他“代码简单”的东西）。然后在 viewDidLoad 函数中打开该文件。如果这就是您所说的，我很乐意进一步解释。

# android - Android MediaPlayer 启动时崩溃

> ID：11119828
> 
> 赞同：6
> 
> 时间：2012-06-20T12:43:22.607
> 
> 标签：android, android-mediaplayer

我有一段代码在某些设备（Samsung Galaxy S2、Acer A510）上运行良好，但在其他设备（HTC One S）上却导致 MediaPlayer 崩溃。导致问题的代码：

```
if(file.exists()) {
        mediaPlayer = MediaPlayer.create(this, Uri.fromFile(file));
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setVolume(100, 100);
        mediaPlayer.start();
    }; 
```

我尝试在 onPrepared 回调或其他创建 mediaPlayer 的方式中启动它。它们都可以在 HTC 以外的任何设备上正常工作。日志错误：

```
06-20 15:33:13.810: W/AudioSystem(6021): AudioFlinger server died!
06-20 15:33:13.810: W/IMediaDeathNotifier(6021): media server died
06-20 15:33:13.810: E/MediaPlayer(6021): error (100, 0)
06-20 15:33:13.810: E/MediaPlayer(6021): Mediaserver died in 16 state
06-20 15:33:13.820: I/ServiceManager(6021): Waiting for service media.audio_flinger...
06-20 15:33:14.821: E/MediaPlayer(6021): Error (100,0) 
```

如果有人有任何建议，我将不胜感激。

# asp.net - WebForms ReportViewer 数据源错误

> ID：11119830
> 
> 赞同：3
> 
> 时间：2012-06-20T12:43:27.497
> 
> 标签：asp.net, reporting-services, reportviewer

我在表单上使用 ReportViewer 控件：

```
<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <rsweb:ReportViewer ID="ReportViewer1" runat="server">
    </rsweb:ReportViewer>
</form> 
```

在页面代码文件中初始化的报告文件路径：

```
protected void Page_Init(object sender, EventArgs e)
{
    ReportViewer1.LocalReport.ReportPath = "Reports/Source/Untitled.rdlc";
} 
```

当报告呈现时，我得到下一个错误：

```
A data source instance has not been supplied for the data source 'DataSet1'. 
```

连接工作正常（我对其进行了测试），当我尝试在 MS SQL Server Report Builder 中运行我的报告时 - 它也正常工作（生成了报告）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:10:04.330

在您的 rdlc 报告中，有一个您在设计报告时添加的名为“DataSet1”的数据集。您需要传递此数据集将用于呈现报告的数据。

这是通过 localreport 数据源集合完成的。请注意，它是复数形式，表示您的报告中可以包含多个数据集。

```
ReportViewer1.LocalReport.DataSources.Clear();

ReportDataSource rds = new ReportDataSource();
rds.Name = "DataSet1";  //this is the name of the DataSet on your report rdlc
rds.Value = datatable; //this contains the data and columns referenced in the dataset

ReportViewer1.LocalReport.DataSources.Add(rds); 
```

如果您查看下面的标签，您将看到报告查看器的期望

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server">
<LocalReport ReportPath="Report1.rdlc">
    <DataSources>
        <rsweb:ReportDataSource Name="DataSet1" />
    </DataSources>
</LocalReport>
</rsweb:ReportViewer> 
```

**更新**

对于第二部分，数据源`DataSet11`已经声明，只需在代码隐藏中引用它，将数据传递为`Value`

```
ReportViewer1.LocalReport.DataSources["DataSet1"].Value = myData; 
```

# java - 将数组/结构从本机代码 (C) 传递到 Java

> ID：11119833
> 
> 赞同：0
> 
> 时间：2012-06-20T12:43:31.650
> 
> 标签：java, c, struct, java-native-interface

> **可能重复：**
> [如何在 JNI 中将 C 结构来回传递给 Java 代码？](https://stackoverflow.com/questions/3923299/how-to-pass-c-structs-back-and-forth-to-java-code-in-jni)

我正在编写一个本机库，其函数将文件位置作为参数并返回一个包含指向数组的指针的结构，它的 array_size 和 no_of_clicks。在互联网上搜索已经发现了一些答案，但对我来说还不够清楚。如果你能用一个例子来解释它会很有帮助。

例如，我有以下结构

```
typedef struct {
int size;
    int no_of_clicks;
float *array_location;

}return_array; 
```

基本上，这个结构包含指向浮点数组位置的指针、数组的大小和一个附加参数 no_of_clicks。我如何将它传递给java端并在那里访问它？

# .net - .NET 版本的应用程序池是否可以自行更改？

> ID：11119835
> 
> 赞同：3
> 
> 时间：2012-06-20T12:43:35.230
> 
> 标签：.net, windows, iis, application-pool, .net-framework-version

这个问题说明了一切。

我在带有 IIS 6 的 Win 2003 服务器上有一个 QA 站点和 PROD 站点。我将站点移到了一个新服务器上，即带有 IIS 7 的 Win 2008 R2。在新服务器上，我将两个新站点的应用程序池设置为 2.0 . 在更新 DNS 以指向新服务器之前，我对这些站点进行了一系列测试，并且这些站点运行良好。所以我给我的客户发了一封电子邮件，让他们知道他们可以更新 DNS 以指向新服务器。

当我回到家时，我开始收到警报说网站已关闭。经过一番调查，我发现两个站点的应用程序池的 .NET 版本已更改为 4.0。这导致网站瘫痪。客户端无权访问服务器。我的其他开发人员都没有改变它。我自己没有改。它似乎已经自己改变了。

.NET 版本的应用程序池是否可以自行更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-13T13:29:14.827

我知道这是一个旧线程，但我们最近有一个服务器，在应用 Windows 更新后，所有 .net 4.0 应用程序池都更改为 .net 2.0。我发现一个线程声称在重置服务器时，应用程序池可以更改为 DefaultAppPool 设置的任何版本。在我们的服务器上，DefaultAppPool 设置为 2.0，所以这让我相信这是可能的。 [https://community.spiceworks.com/topic/467973-iis-application-pool-net-randomly-changes](https://community.spiceworks.com/topic/467973-iis-application-pool-net-randomly-changes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:16:24.517

[您可以尝试执行外部 PowerShell 脚本：](https://stackoverflow.com/questions/4229082/powershell-how-do-i-set-the-net-framework-version-when-using-new-webapppool)

```
Set-ItemProperty IIS:\AppPools\<pool_name> managedRuntimeVersion v4.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:46:56.727

在回答你的问题。不，这不可能改变自己。

我还想问为什么你的应用程序不能在 NET 4.0 上运行，因为它向后兼容 NET 2.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:32:56.993

我确实发生过一次，从未找到原因，将其更新回 4 一切正常，客户满意。

是IIS7，但我不记得任何其他细节。在处理了数百个站点部署到不同 Windows 平台上的各种 IIS 版本后，我对这个设置“似乎”自动更改感到非常惊讶。我并不反对其他人更改它的可能性，但似乎不太可能，我的项目、我的站点、我的部署以前曾工作过，其他用户很少更改相关服务器上的任何设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T14:10:00.993

我不熟悉将应用程序/站点部署到 IIS，所以请多多包涵。

这个问题让我大致想起了微软的**Scott Hanselman**的一篇博客文章：[ASP.NET MVC Beta and RC Upgrades - Confirm your Expectations and Version Numbers in Production Environments](http://www.hanselman.com/blog/ASPNETMVCBetaAndRCUpgradesConfirmYourExpectationsAndVersionNumbersInProductionEnvironments.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20ScottHanselman%20%28Scott%20Hanselman%20-%20ComputerZen.com%29)

在这篇文章中，Scott 解释了所用程序集版本号的差异。在生产站点的行为与开发版本不同之前，他并不知道这一点。这篇文章可能会帮助您更深入地挖掘原因。

这篇文章还提到了一个名为[MvcDiagnostics](http://nuget.org/packages/MvcDiagnostics)的工具（链接到 NuGet 页面）。例如，MvcDiagnostics 将允许您获取有关您的环境、路径和版本信息的大量信息。

在 Scott 的案例中，他发现本地版本`System.Web.Mvc.DLL`比他服务器上的版本新，并且从 GAC 运行，而不是在本地运行。

也许这可以为您的考试提供一个起点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T14:13:20.283

它不应该改变自己，但是，有人可能已经进入并无意中将其更改为服务器上的默认值

# wix - WIX 安装程序无法从以前安装的 Windows 安装程序软件升级

> ID：11119838
> 
> 赞同：3
> 
> 时间：2012-06-20T12:43:42.080
> 
> 标签：wix, windows-installer, upgrade

我正在为我们的软件创建 WIX 安装程序，现在从以前的 Windows Installer 打包软件升级时遇到了一些问题。

问题之前的一件事，从一个 WIX 打包软件升级到另一个 WIX 打包软件实际上工作正常，我可以卸载旧版本并安装新版本。当旧版本是 Windows Installer 打包（这是我们当前的解决方案）而新版本是 WIX 打包时，真正的问题会发生。基本上我的 WIX 安装程序无法发现已经安装了旧版本，因此将安装新版本而不卸载旧版本。

我如何在 WIX 安装程序和 Windows 安装程序之间建立连接：我将 WIX 的 UpgradeCode 设置为与 Windows 安装程序相同。我还在线查看了一些示例，他们建议我当前的解决方案应该可以工作。这是我升级部分的 .wxs 文件的一部分：

```
<Upgrade Id="$(var.UpgradeCode)">

  <UpgradeVersion OnlyDetect="yes" Minimum="$(var.VersionNumber)" Property="NEWPRODUCTFOUND" IncludeMinimum="no" />
  <UpgradeVersion OnlyDetect="no" Maximum="$(var.VersionNumber)" Property="UPGRADEFOUND" IncludeMaximum="no" />           
</Upgrade>

<CustomAction Id="PreventDowngrading" Error="A software with newer version number is found on this machine" />        

<InstallUISequence>
  <Custom Action="PreventDowngrading"
          After="FindRelatedProducts">NEWPRODUCTFOUND</Custom>
</InstallUISequence>    

<InstallExecuteSequence>
  <Custom Action="PreventDowngrading"
      After="FindRelatedProducts">NEWPRODUCTFOUND</Custom>
  <RemoveExistingProducts After="InstallFinalize" />   
</InstallExecuteSequence> 
```

值得一提的是我们的 SW 实际上是一个 Windows 服务，我不确定这是否重要。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T15:16:34.240

拥有相同的升级代码是不够的。您还必须检查这两个软件包是否具有相同的安装类型，即它们都是按用户或按机器安装的。如果安装类型不同，Windows Installer 将跳过旧版本的删除。

# bash - 从 ant 调用的 bash 脚本不起作用

> ID：11119841
> 
> 赞同：1
> 
> 时间：2012-06-20T12:43:50.200
> 
> 标签：bash, ant

首先，当我在 ant 之外调用 bash 脚本时，它可以正常工作。这是 build.xml 的相关部分

```
<exec executable="/bin/bash" failonerror="true">
<arg value="-c" />
<arg value="script.sh" />
</exec> 
```

这是 bash 脚本 (script.sh) 中的相关行：

```
nc -l 8044 | tee ./nc-out.txt & 
```

当我从 bash 调用 script.sh 时，nc-out.txt 的内容会被发送到端口 8044 的数据填充。

我需要那里的＆符号。

当从 ant 调用 shell 脚本时，似乎 nc-out.txt 已创建，但保持为空。

正常的重定向，例如：

```
nc -l 8044 > nc-out.txt & 
```

也不行。。

任何见解都会很有用！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:37:02.237

当 ant exec 执行您的命令时，其标准输入默认情况下不绑定任何内容，因此`netcat`当您连接到侦听进程时将立即退出，因为没有更多内容可从 stdin 读取。

由于您想在后台运行它，我假设您只想实现单向日志记录：您可以将`-d`参数添加到 netcat 以告诉他不要从标准输入中读取：

*脚本.sh*

```
#/bin/bash
netcat -d -l 8044 > nc-out.txt & 
```

完全使用以下 ant 构建文件示例：

*构建.xml*

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="script" name="bleh">
    <target name="script">
        <exec executable="/bin/bash" failonerror="true">
            <arg value="-c" />
            <arg value="./script.sh" />
        </exec>
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:51:46.447

我建议添加`spawn="true"`到您的[exec](http://ant.apache.org/manual/Tasks/exec.html)中，以使您正在创建自己的后台进程。

# python - 如何获取 Tkinter Canvas 小部件的背景颜色

> ID：11119842
> 
> 赞同：8
> 
> 时间：2012-06-20T12:43:50.453
> 
> 标签：python, tkinter

我需要使用背景颜色作为填充颜色在 Canvas 小部件中创建一个矩形。我不在乎 Canvas 的背景是什么颜色，我只想得到颜色。所以相关的代码如下所示：

```
myCanvas.create_rectangle(x0, y0, x1, y1, outline=myCanvas.bgcolor(),
                          fill=myCanvas.bgcolor()) 
```

`myCanvas.bgcolor()`我所追求的自然在哪里。

我见过很多设置这个参数和其他参数的例子，但没有一个可以获取。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T12:56:05.800

您应该能够通过`myCanvas["background"]`

```
myCanvas.create_rectangle( x0, y0, x1, y1, outline=myCanvas["background"], fill=myCanvas["background"]) 
```

# css - CSS - 是否有一种工具可以自动对选择器之间的常见共享样式进行分组？

> ID：11119844
> 
> 赞同：2
> 
> 时间：2012-06-20T12:43:53.983
> 
> 标签：css

我通常为每个类或 id 编写所有 CSS，最后我根据共享样式将它们组合在一起。

```
.first {width:100px; height:35px}
.second {width:100px;} 
```

有没有一种工具可以自动对它们进行分组以产生这个结果？

```
.first, .second {width:100px;}
.first{height:35px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:49:26.467

我从你的问题中了解到，你想在 CSS 上做更少的工作。实际上，有一个 JavaScript 库可以让您编写更少的 CSS，称为[cssless](http://lesscss.org/)。在那里，您可以声明常量、函数并编写嵌套 CSS，这非常棒，还有更多。

查看[lesscss.org](http://lesscss.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:50:05.493

我不知道任何这样的工具。（不过是个好问题，也许其他人会。）

这会很棒，但我想写起来会很复杂。例如，如果原始 CSS 看起来像这样呢？

```
.first {width:100px; height:35px}
.second {width:150px;}
.second {width:100px;} 
```

该工具可能会将其更改为：

```
.first, .second {width:100px;}
.first{height:35px;}
.second {width:150px;} 
```

现在`.second`是 150 像素宽而不是 100 像素。（显然，这有点不太可能。）

# php - 在发布/更新 Wordpress 页面时运行代码

> ID：11119850
> 
> 赞同：1
> 
> 时间：2012-06-20T12:44:11.737
> 
> 标签：php, mysql, wordpress, google-maps

我已经使用 Wordpress 建立了一个网站。

我有一个包含以下代码的模板，它对地址进行地理编码并将结果保存到新数据库中。

然后我有另一个模板，它从新数据库中读取所有纬度/经度，并在谷歌地图上绘制数百个标记。

问题是地理编码仅在有人访问该页面时发生。这会产生几个问题 - 1) 每次有人访问该页面时都会对其进行地理编码。2) 仅当有人访问该页面时才进行地理编码！

**当 Wordpress 发布/更新页面时，有没有办法运行此代码一次？**

本节从 Wordpress 中获取公司信息并将其插入数据库：

```
 $company = get_field('company_name');
    $address = get_field('address');
    $city = get_field('city');
    $post_code = get_field('post_code');

    $sql = sprintf("select count('x') as cnt from markers where `name` = '%s'", mysql_real_escape_string($company));
    $row_dup = mysql_fetch_assoc(mysql_query($sql,$con));
    if ($row_dup['cnt'] == 0) {
        mysql_query("INSERT INTO markers (`name`, `address`, `lat`, `lng`, `type`) VALUES ('".$company."', '".$address.", ".$city.", ".$post_code."', '0.0', '0.0', '')");
}
wp_reset_query(); 
```

这是完整的代码：

```
 <?php
    require("database.php");
    // Opens a connection to a MySQL server
    $con = mysql_connect("localhost", $username, $password);

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("medicom_wp", $con);

        $company = get_field('company_name');
        $address = get_field('address');
        $city = get_field('city');
        $post_code = get_field('post_code');

        $sql = sprintf("select count('x') as cnt from markers where `name` = '%s'", mysql_real_escape_string($company));
        $row_dup = mysql_fetch_assoc(mysql_query($sql,$con));
        if ($row_dup['cnt'] == 0) {
            mysql_query("INSERT INTO markers (`name`, `address`, `lat`, `lng`, `type`) VALUES ('".$company."', '".$address.", ".$city.", ".$post_code."', '0.0', '0.0', '')");
    }
    wp_reset_query();

    define("MAPS_HOST", "maps.google.com");
    define("KEY", "");

    // Opens a connection to a MySQL server
    $connection = mysql_connect("localhost", $username, $password);
    if (!$connection) {
      die("Not connected : " . mysql_error());
    }

    // Set the active MySQL database
    $db_selected = mysql_select_db($database, $connection);
    if (!$db_selected) {
      die("Can\'t use db : " . mysql_error());
    }

    // Select all the rows in the markers table
    $query = "SELECT * FROM markers WHERE 1";
    $result = mysql_query($query);
    if (!$result) {
      die("Invalid query: " . mysql_error());
    }

    // Initialize delay in geocode speed
    $delay = 0;
    $base_url = "http://" . MAPS_HOST . "/maps/geo?output=xml" . "&key=" . KEY;

    // Iterate through the rows, geocoding each address
    while ($row = @mysql_fetch_assoc($result)) {
      $geocode_pending = true;

      while ($geocode_pending) {
        $address = $row["address"];
        $id = $row["id"];
        $request_url = $base_url . "&q=" . urlencode($address);
        $xml = simplexml_load_file($request_url) or die("url not loading");

        $status = $xml->Response->Status->code;
        if (strcmp($status, "200") == 0) {
          // Successful geocode
          $geocode_pending = false;
          $coordinates = $xml->Response->Placemark->Point->coordinates;
          $coordinatesSplit = split(",", $coordinates);
          // Format: Longitude, Latitude, Altitude
          $lat = $coordinatesSplit[1];
          $lng = $coordinatesSplit[0];

          $query = sprintf("UPDATE markers " .
                 " SET lat = '%s', lng = '%s' " .
                 " WHERE id = '%s' LIMIT 1;",
                 mysql_real_escape_string($lat),
                 mysql_real_escape_string($lng),
                 mysql_real_escape_string($id));
          $update_result = mysql_query($query);
          if (!$update_result) {
            die("Invalid query: " . mysql_error());
          }
        } else if (strcmp($status, "620") == 0) {
          // sent geocodes too fast
          $delay += 1000;
        } else {
          // failure to geocode
          $geocode_pending = false;
          echo "Address " . $address . " failed to geocoded. ";
          echo "Received status " . $status . "
    \n";
        }
        usleep($delay);
      }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:21:27.050

一般来说：

在插件（或位于主题中的文件 functions.php 中）中，您具有以下代码：

```
add_action('publish_post', function($post_id) {
  // Here you have some code that finds out the geocode data
  // then you attach it to this post as a meta value
  update_post_meta($post_id, 'my_geocode', $geo_data);
}); 
```

然后在您的模板文件（single.php）中，您将有如下内容：

```
$geo_data = get_post_meta($post->ID, 'my_geocode', true);
if( $geo_data ) {
  get_template_part('geocode');
} 
```

或者，如果您想保持模板文件干净，您可以在位于主题目录（或插件文件）的文件 functions.php 中添加操作“the_content”

```
add_action('the_content', function() {
  if( is_singular() ) {
    global $post;
    $geo_data = get_post_meta($post->ID, 'my_geocode', true);
    if( $geo_data ) {
      get_template_part('geocode');
    }   
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:03:54.723

做一个谷歌搜索，比如“wordpress add_action”。Wordpress 让您“聆听”在 wordpress 中发生的不同事件。在您的情况下，我认为您可以使用名为“update_post”的操作。

# php - tinyMCE - 如何处理图片上传

> ID：11119854
> 
> 赞同：13
> 
> 时间：2012-06-20T12:44:22.537
> 
> 标签：php, javascript, jquery, wysiwyg, text-editor

我有一个人们发布新闻的网站，它是用 PHP 编写的。

到目前为止，发布故事的人都有一个用于文本输入的文本区域，以及一个用于为故事上传图像的表单字段。

现在我正在升级网站，我正在考虑给人们更多的灵活性，所以我打算使用 javascript WYSIWYG 文本编辑器。

在查看了最受欢迎的，或者至少是我在谷歌上找到的那些之后，我认为 tinyMCE 是最好的文档，这就是为什么我认为我会使用它，尽管我已经使用它大约 4-5 小时，所以我真的不在乎是否必须切换到另一个编辑器。

当您在 textarea 中拖放图像时，tinyMCE 会以 base64 对图像进行编码，并将其用作图像标签的 src 属性。

我想知道，有没有办法让 tinyMCE 将图像作为文件上传到服务器，以便我可以用 php 处理它们（制作缩略图、命名并按我的意愿存储它们）？

如果没有，是否有一个编辑器可以选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-10T06:00:58.083

我推荐“[响应式文件管理器](http://www.responsivefilemanager.com)”

这是一个免费的开源文件管理器和图像管理器，使用 jQuery 库、CSS3、PHP 和 HTML5 制作，提供了一种漂亮而优雅的方式来上传和插入文件、图像和视频。

![在此处输入图像描述](../Images/047a46570fcb26d987f89c646deaf3a8.png)

**伟大的特点：**

1.  只需简单的拖放即可上传文件。
2.  用作独立文件管理器、TinyMCE、CKEditor 或 CLEditor 插件或跨域。
3.  许多自定义参数，例如上传图像的自动调整大小、图像尺寸的可选限制、文件允许列表。
4.  上传图片、视频和音频的完整预览。
5.  缩略图的自动创建和外部更改后缩略图的自动重新对齐

和 ...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T13:46:32.347

tiny mce 还有另一个免费和开源的插件。你可以使用这个
[http://justboil.me/tinymce-images-plugin/](http://justboil.me/tinymce-images-plugin/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T12:55:13.383

有一个名为[MCImageManager的付费插件文件管理器](http://www.tinymce.com/enterprise/mcimagemanager.php)

或者您可以将 uplodify 等集成到添加图像弹出窗口中，然后在上传图像时更新 tinyMCEImageList.js 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-18T05:22:26.347

这是一个简单的选项，可以使用 Plupload 直接从工具栏按钮从 TinyMCE 上传图像，而无需额外的弹出窗口。注意 - 这允许您使用文件选择器选择文件，但不支持拖放。

向 tinymce 添加一个 ID 为“mybutton”且无点击事件的按钮：

```
tinymce.init({selector:'.use-tinymce', 
    plugins: "code link visualblocks", 
    menubar: false,
    extended_valid_elements : "span[!class]",
    toolbar: "undo redo | formatselect | link code | mybutton",
    visualblocks_default_state: true,
    setup: function(editor) {
        editor.addButton('mybutton', {
            type: 'button',
            title: 'Insert image',
            icon: 'image',
            id: 'mybutton'
        });
        editor.on('init', function(e) {
            var pluploadHandler = new PluploadHandler(jQuery, plupload);
        });
    }           
}); 
```

在 Plupload 初始化中引用这个按钮：

```
var PluploadHandler = function( $, plupload ) {
    ...
    this.uploader = new plupload.Uploader({
        runtimes : 'html5,flash,silverlight,html4',
        browse_button : document.getElementById('mybutton'),
        url : '/path/to/upload/the/image', 
```

您需要为上传路径编写服务器端代码`/path/to/upload/the/image`以保存图像并使用新图像的 URL 响应。

最后捕获上传的响应并将您的图像标签添加到 TinyMCE：

```
 this.uploader.init();
    this.uploader.bind("FilesAdded", handlePluploadFilesAdded);
    this.uploader.bind("FileUploaded", handlePluploadFileUploaded);

    function handlePluploadFilesAdded(up, files) {
        console.log("+ handlePluploadFilesAdded");
        up.start();
    }

    function handlePluploadFileUploaded(up, file, res) {
        console.log("++ res.response: " + JSON.stringify(res.response));
        var img = "<img src='" + res.response + "?" + Date.now() + "'>";
        tinymce.activeEditor.execCommand('mceInsertContent', false, img);
    }
} 
```

完整的源代码在这里（在 TinyMCE 4.1.9 上测试；Plupload 2.1.2）： [https ://gist.github.com/danielflippance/e1599fd58ada73b56bfb](https://gist.github.com/danielflippance/e1599fd58ada73b56bfb)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T13:36:22.800

尝试[PDW 文件浏览器](http://www.neele.name/filebrowser/)。与它的网页不同，它非常好（而且直观，在我看来，因为它提供类似于 MS Windows 文件资源管理器的 GUI）。

# python - 使用 Python 访问 MySQL 时，如何检索 Google Cloud-SQL 中的列名？

> ID：11119860
> 
> 赞同：1
> 
> 时间：2012-06-20T12:44:35.217
> 
> 标签：python, google-app-engine, jinja2, google-cloud-sql

我在我的 Python 代码中执行这种查询

```
conn = rdbms.connect(instance=_INSTANCE_NAME, database='tiger')
cursor = conn.cursor()
cursor.execute("SELECT * from terminals")
rows = cursor.fetchall() 
```

在此之后，我调用了一个 Jinja2 模板，我将 rows 变量传递给该模板，我可以在`{% for row in rows %}`代码中成功地使用它。

我不知道如何获得列的名称。我试图将它从 rows 变量中取出，但徒劳无功。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:37:21.950

执行 SQL 查询后，尝试从属性中读取`cursor.description`

使用 MySQLdb 模块（不确定是否可以将特定模块与 Google Cloud-SQL 一起使用），这`.description`将是一个元组的元组，例如 ((field1_name, ...), (field2_name, ...), ... )

我希望这能解决你的问题。祝您的项目和编码愉快！

# image - 我可以编辑 JFIF 文件中的缩略图吗？

> ID：11119870
> 
> 赞同：0
> 
> 时间：2012-06-20T12:45:15.097
> 
> 标签：image, thumbnails, jpeg, tiff, image-editing

我可以编辑 JPG/JFIF 文件中的缩略图吗？

如果这是可能的 - 怎么会（使用什么实用程序）？

最终结果需要是缩略图“可以”是与 jpeg 完全不同的图像。

非常感谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:47:27.370

符合标准的 EXIF 缩略图图像必须适合 64K APP1 标记，并且通常压缩为 JPEG（与 @Karthik 所说的不同）。缩略图图像独立于主图像，并且可以轻松更改，因为它位于不影响主图像的标记段内。JPEG 标记段基本上是具有 2 字节标识符（例如本例中的 FFE1）和 2 字节长度的独立二进制 blob 的链接列表。您可以将一个换成另一个，并且不会“破坏”文件。没有校验和或其他机制来验证整个文件数据的完整性。我不熟悉编辑此信息的库，但您可以用少量代码来完成，只需解析标记 blob 的类型和长度，而不知道它们的内容。你也可以做到“又快又脏” 方法是确保您的新缩略图不大于原始缩略图，然后您可以将其写入原位，而无需移动文件的其他部分。不会根据其内容检查标记长度，因此忽略未使用的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:48:36.477

通常，缩略图是未压缩的 RGB 数据。您找到标记，查看标记缩略图的宽度/高度的位置，然后修改其后面的字节流。流的长度为宽度 * 高度 * 3 个字节。

如果它被索引，您必须覆盖调色板和索引条目。只需寻找 APP0 标记，开始修改它。

# actionscript-3 - 访问受保护或私有财产

> ID：11119872
> 
> 赞同：2
> 
> 时间：2012-06-20T12:45:26.277
> 
> 标签：actionscript-3, actionscript, private, protected, private-members

在 ActionScript 3 中是否有一种方法（**hack** - 可能通过方括号，可能通过克隆对象，可能通过原型，可能通过命名空间，...）来更改类的私有或受保护成员？

例如，如果我有一个`IconToast`由 someLibrary.swc 提供的课程，并且我知道它有一个

```
 protected var windowOptions:WindowOptions; 
```

我可以以某种方式改变它吗？我尝试了很多东西，例如：

```
 var errorToast:IconToast = new IconToast();
        errorToast.addButton("Dismiss");
        errorToast.message = "Error when connecting";
        errorToast['windowOptions'].timeout = 10 * 1000;
        errorToast.show(); 
```

（给我运行时错误*ReferenceError: Error #1069: Property windowOptions not found on IconToast and there is no default value*）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T12:56:18.627

通过扩展基类并授予对私有/受保护方法/属性等的公共访问权限来做到这一点。

```
public class MyIconToast extends IconToast
{
    public function getWindowOptions():WindowOptions
    {
        return windowOptions;//here you can access protected (not private though:);
    }
} 
```

对于私人来说，这可能是不可能的，但在某种程度上类似于上述解决方案可以做到

最好的祝福

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:31:48.087

不，没有办法直接改变它的修饰符（这就是为什么它被定义为公共的、受保护的和私有的，对吧？）。Lukasz 'Severiaan' Grela 的解决方案还可以，但可以更好：使用 getter/setter 检索读/写函数。

```
public function set windowOption(option:int):void;

public function get windowOption():int; 
```

并且私有属性只属于它们的类，所以如果它们被打包到 SWC 中，你就看不到它们中的任何一个：D。

# javascript - 如何在javascript中对嵌套对象数组进行排序

> ID：11119874
> 
> 赞同：1
> 
> 时间：2012-06-20T12:45:33.527
> 
> 标签：javascript, arrays, sorting, object, nested

我有一个这样的数组

```
var array = [{
    order: 3,
    sub - array: [{
        order: 2
    },{
        order: 1
    }]
},{
    order: 2,
    sub - array: [{
        order: 2
    },{
        order: 1
    }]
}];​ 
```

现在我想对属性的完整集合进行排序`order`，因此外部数组和内部数组都应该根据属性顺序进行排序。

最终输出应如下所示。

```
var array = [{
    order: 2,
    sub - array: [{
        order: 1
    },{
        order: 2
    }]
},{
    order: 3,
    sub - array: [{
        order: 1
    },{
        order: 2
    }]
}];​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:55:23.933

```
var propertySort = function(a, b){
    return a.order > b.order ? 1 : (a.order < b.order ? -1 : 0);
    }

var reorder = function(arr){
    var l = arr.length;
    while (l--){
        if (arr[l]['sub-array']){
            reorder(arr[l]['sub-array']);
        }
    }
arr.sort(propertySort);
};

reorder(arr);

console.log(arr); 
```

这应该为任意数量的嵌套级别重新排序数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:49:58.577

使用`Array.prototype.sort`并调用它`array`，然后在每个元素上`array`使用适当的比较函数。像这样的东西应该工作：

```
array.sort(function (e1, e2) {
  return (e1.order - e2.order);
});

array.forEach(function(e) {
  e["sub-array"].sort(function (e1, e2) {
    return (e1.order - e2.order);
  });
}); 
```

# hyperlink - 将标题转换为链接在 Lightbox 2.51 中不起作用

> ID：11119879
> 
> 赞同：6
> 
> 时间：2012-06-20T12:45:54.267
> 
> 标签：hyperlink, lightbox, caption

[将标题转换为链接在从此处](http://lokeshdhakar.com/projects/lightbox2/)下载的 Lightbox 2.51 中不起作用
这是代码：

```
<a href="images/examples/image-1.jpg" rel="lightbox" 
  title="&lt;a target='_self' href='http://www.google.com'&gt;Google&lt;/a&gt;">
  <img src="images/examples/thumb-1.jpg" alt="" />
</a> 
```

我应该怎么办？
谢谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T14:07:46.153

我在`lightbox.js`. 您必须编辑`if`案例，添加在“灯箱”中单击时`else`避免始终返回的条件。`false``div`

```
 $lightbox.hide().on('click', function(e) {
    if ($(e.target).attr('id') === 'lightbox') { 
        _this.end();
        return false;
    }
    else { // HERE
        return true; 
    }
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T13:34:42.120

我发现我认为比上面列出的使用 Lightbox 2 2.6 版的解决方案更好。在 lightbox.js（未缩小）的第 252 行，您将看到添加标题的这一行：

```
this.$lightbox.find('.lb-caption').html(this.album[this.currentImageIndex].title).fadeIn('fast'); 
```

添加标题后，您可以注册单击事件并通过添加到链上来强制浏览器跟随标题中的任何链接，如下所示：

```
this.$lightbox.find('.lb-caption').html(this.album[this.currentImageIndex].title).fadeIn('fast').find('a').on('click', function() { location.href = $(this).attr('href') }); 
```

我已针对此更改发起了[拉取请求](https://github.com/lokesh/lightbox2/pull/194)，因此您可以在此处关注状态和任何进一步的讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T22:28:50.287

尝试在标签中使用 javascript

onClick="window.location.href='http://www.google.com'"

样本

```
 <a href="images/examples/image-1.jpg" rel="lightbox" 
  title="&lt;a target='_self' onClick=&quot;window.location.href=&#x27;http://www.google.com&#x27;&quot;   href='http://www.google.com'&gt;Google&lt;/a&gt;">
 <img src="images/examples/thumb-1.jpg" alt="" />
</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T09:40:38.097

我一直无法在这里得到任何为我工作的答案。但是，我发现[Slimbox2](http://www.digitalia.be/software/slimbox2)确实有效，并且由于使用相同的语法，因此可以非常直接地进行交换。

# javascript - 是否有允许在所有三种浏览器（IE、FF、Chrome）中进行调试的 JavaScript IDE？

> ID：11119880
> 
> 赞同：3
> 
> 时间：2012-06-20T12:45:57.517
> 
> 标签：javascript, web

我知道 WebStorm 允许在 FF 和 Chrome 中进行调试，但我看不到 IE 支持。是否有可以处理所有 3 个的 IDE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T18:45:06.833

不，我认为没有人涵盖所有 3 种浏览器。

**Visual Studio**可以调试 IE。它无法调试 FireFox 或 Chrome。
**WebStorm**可以调试 FireFox 和 Chrome（通过安装扩展）。

所有浏览器也都有自己的调试工具。所以你有很多选择，但没有灵丹妙药。

# playframework-2.0 - 如何处理组合框“onchange”事件？

> ID：11119882
> 
> 赞同：0
> 
> 时间：2012-06-20T12:46:01.503
> 
> 标签：playframework-2.0

我有一个`HashMap<Date, List<Service>>`并且我在我的**index.scala.html的组合框中显示日期**

```
<select name="Dates" >
    @for((k,v) <- dates) {
        <option >@k</option>
    }
 </select> 
```

显示我在**index.scala.html**`List<Service>`中有这段代码

 **```
@getServices(date: String) = {
<table class="computers zebra-striped">
    <thead>
    <tr>
        <th>Service name</th>
        <th>Price</th>
        <th colspan="2">Counter</th>
        <th>Note</th>
    </tr>
    <tr>
        <th></th>
        <th></th>
        <th>start</th>
        <th>end</th>
    </tr>
    </thead>
    <tbody>
    @for(s <- dates.get(utility.MonthYear.getUkrDate(date))) {
    <tr>
        <td>@s.getName</td>
        <td>@s.getPriceString</td>
        <td>@s.getFromCounterString</td>
        <td>@s.getToCounterString</td>
        <td>@s.getNote</td>
    </tr>
    }
    </tbody>
</table> 
```

}

我需要知道服务器端，从组合框中选择了什么项目。

那么，问题，我如何`"onchange"`在我的组合框中根据我的事件日期显示列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:49:01.147

```
<select name="Dates" >
    @for((k,v) <- dates) {
        <option value="@k">@k</option>
    }
 </select> 
```**

# javascript - var 语句应该是 JavaScript 函数中的第一个语句吗？

> ID：11119884
> 
> 赞同：4
> 
> 时间：2012-06-20T12:46:09.600
> 
> 标签：javascript, coding-style, var

我目前正在使用基于 Douglas Crockford 的[JavaScript Programming Language 代码约定](http://javascript.crockford.com/code.html)的 JavaScript 编码风格，这意味着我在该函数的开头声明了函数中使用的所有变量：

```
function drawTiles(tiles) {
    var x, y, tile;
    for (x = 0; x < width; x++)
        for (y = 0; y < weight; y++) {
            tile = tiles[y][x];
            if (tile)
                drawTile(tile, x, y);
        }
} 
```

这是有道理的，因为 JavaScript 中的变量被提升到函数的顶部，并且函数的作用域无论如何。

但是，我的印象是在第一次使用时声明它们更受欢迎，如下所示：

```
function drawTiles(tiles) {
    for (var x = 0; x < width; x++)
        for (var y = 0; y < height; y++) {
            var tile = tiles[y][x];
            if (tile)
                drawTile(tile, x, y);
        }
} 
```

这实际上更容易与 IMO 一起工作 - 每当声明一个新变量时，您都不必跳转到当前函数的顶部。但感觉并不“正确”。

我的问题是：哪种风格在专业（和流行）JavaScript 程序员中更受欢迎？（我通常会尝试选择社区中最常用的代码风格）

我查看了一些开源项目（Google 的[Closure](http://code.google.com/p/closure-library/)、Facebook 的[Phabricator](https://github.com/facebook/phabricator)、[Facebook JS SDK](https://github.com/facebook/facebook-js-sdk)和[jQuery](https://github.com/jquery/jquery)），似乎所有（除了 jQuery）在大多数时间第一次使用时都声明了变量。jQuery 倾向于将它们声明在函数的顶部，但绝不是一致的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:53:39.133

我认为第二种风格很受欢迎，因为这是在大多数其他语言中你会这样做的方式，即声明使用它的变量。

未来版本的 ECMAScript 将通过`let`关键字引入块作用域，这可能会改变人们编写 JS 的方式（更倾向于第二种风格）。

但除此之外，如果你保持你的函数很小，它真的变成了一个品味问题。

# plugins - Netbeans 插件源文件夹

> ID：11119886
> 
> 赞同：0
> 
> 时间：2012-06-20T12:46:12.653
> 
> 标签：plugins, netbeans

我最近启动了一个Netbeans插件，更多的是一个文件向导，问题是我需要知道项目源文件夹，由于某种原因我不知道如何获取它。

我可以获得项目文件夹，但这可能与源文件夹不同，例如：

```
Project project = Templates.getProject(wizard);
project.getProjectDirectory().getPath(); 
```

关于如何获取真正的源文件夹的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:40:09.487

好的，我想通了，最终它就像我预期的那样简单：

```
FileObject pkg = Templates.getTargetFolder(wizard); 
```

和

```
pkg.getPath() 
```

包含源的根文件夹。

# c# - 不可靠的并行循环在 400 次中失败了 4 次

> ID：11119893
> 
> 赞同：2
> 
> 时间：2012-06-20T12:46:32.180
> 
> 标签：c#, asp.net-mvc, parallel-processing

我有一个 Parallel foreach 函数，它创建一个类的新实例，操作图片并将其保存到磁盘...

然而，大约 400 次中的 4 次，图片被保存到磁盘，但没有被操纵，我的理论是，当它发生时，我班级中存在的一些属性是空的，当它们不应该......

4 个（有时是 3 个）错误大多发生在并行循环的前 10 个图像中。

没有错误消息，它只是跳过了我的一些代码，出于某种原因......我的断点在并行时不起作用，因此很难调试。

关于如何进行/调试/修复的任何建议？

**要求的代码**

```
 private static void GenerateIcons(Effects effect)
    {
        DirectoryInfo dir = new DirectoryInfo(HttpContext.Current.Server.MapPath(@"~\Icons\Original\"));

        FileInfo[] ff = dir.GetFiles();

        string mappath = HttpContext.Current.Server.MapPath(@"~\Icons\");

        List<string> paths = new List<string>();

        string ids = GetAllEffectIds(effect.TinyUrlCode);

        Parallel.ForEach(ff, item =>
        {
            if (!File.Exists(mappath + @"Generated\" + ids + "-" + item.Name))
            {
                paths.Add(mappath + @"Generated\" + ids + "-" + item.Name);
                ApplyEffects f = new ApplyEffects(effect, item.Name, mappath);
                f.SaveIcon();

            }
        });
        //Zip icons!
        ZipFiles(paths, effect.TinyUrlCode, ids, effect.General.Prefix);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:00:33.447

`List<T>`我的理论是，由于不是线程安全的，您的路径列表没有正确更新。本质上，如果两个线程同时尝试将一个项目添加到列表中，则可能会发生任何数量的奇怪事情，例如结果列表中缺少 4 个项目。尝试使用[lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)。

```
Parallel.ForEach(ff, item =>
{
    if (!File.Exists(mappath + @"Generated\" + ids + "-" + item.Name))
    {
        lock(paths) 
        {
            paths.Add(mappath + @"Generated\" + ids + "-" + item.Name);
        }
        ApplyEffects f = new ApplyEffects(effect, item.Name, mappath);
        f.SaveIcon();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:35:01.470

您可以以更实用的风格重新编写它，以希望消除线程问题：

```
private static void GenerateIcons(Effects effect)
{
    var dir     = new DirectoryInfo(HttpContext.Current.Server.MapPath(@"~\Icons\Original\"));
    var mappath = HttpContext.Current.Server.MapPath(@"~\Icons\");
    var ids     = GetAllEffectIds(effect.TinyUrlCode);

    var filesToProcess = dir
        .EnumerateFiles()
        .AsParallel()
        .Select(f => new { info = f, generated = File.Exists(mappath + @"Generated\" + ids + "-" + f.Name) })
        .ToList();

    Parallel.ForEach(filesToProcess.Where(f => !f.generated), file =>
    {
        new ApplyEffects(effect, file.info.Name, mappath).SaveIcon();
    });

    //Zip icons!
    ZipFiles(filesToProcess.Select(f => f.info), effect.TinyUrlCode, ids, effect.General.Prefix);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:57:04.447

1.  你检查过非并行版本吗？

2.  您是否使用了任何未标记为线程安全的 API 函数？

要回答 1)，互斥锁锁定整个函数并测试错误。

要回答 2）减少互斥锁中的代码量，直到找到有问题的函数。你可以通过二等分来做到这一点。

`ConcurrentBag<T>`是一个线程安全的容器。

# objective-c - Objective C 中的 id 是原始数据类型

> ID：11119897
> 
> 赞同：4
> 
> 时间：2012-06-20T12:46:43.327
> 
> 标签：objective-c, ios, cocoa

正如我的标题所提到的，我有点困惑，

`id`在Objective C中是原始数据类型吗？还是对象类型？我一直认为这`id`是 Object 类型，因为它指向一个对象。

那么，它是对象类型还是原始数据类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:50:06.187

绝对不是原始类型。来自苹果：

在 Objective-C 中，对象标识符是一种不同的数据类型：id。这种类型是任何类型的对象的通用类型，无论类如何，并且可以用于类的实例和类对象本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:48:33.483

`id`在[objc.h](http://www.opensource.apple.com/source/objc4/objc4-371.2/runtime/objc.h)中声明为

```
typedef struct objc_object {
    Class isa;
} *id; 
```

所以是的，我会说它是原始的（指针是 C 中的原始类型）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:28:27.373

我相信来自**Objective-C****的 'id'**与来自普通**'c' 的****void 指针**类似。由于指针是原始类型，我猜想“id”确实是原始类型。

# php - 提交后页面刷新并弹出成功信息

> ID：11119898
> 
> 赞同：1
> 
> 时间：2012-06-20T12:46:52.590
> 
> 标签：php, forms, post

我想知道是否有人可以帮助我

首先，我很抱歉，因为这对于经验丰富的开发人员来说可能是一个非常简单的问题，但这是我正在构建的第一个网站，所以请多多包涵。

对于我的网站，我有许多表格，它们都适合我创建的模板。大多数表单要求用户单击一个`submit`按钮，然后调用 PHP 脚本将数据保存到 MySQL 数据库中。

我用来执行此操作的代码示例如下：

```
<form id="addfinds" name="addfinds" method="post" action="savefinds.php"> 
```

提交表单后，我的`addfinds.php`脚本中的一行会回显`Find saved`或`There was a problem`。

我正在单独进行一些表单验证以在提交之前清理数据，但我希望能够做的是而不是从 PHP 脚本回显消息，我希望出现一个弹出消息屏幕在它的位置，如果提交成功，则清除字段并刷新页面。

我已经对此进行了大量阅读，但我有点不确定如何进行。我只是想知道是否有人，也许有比我更丰富的经验，请提供一些指导或指出一个好的教程的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:51:52.357

```
function FUNCTIONNAME() {
    $.ajax({
        type: "POST",
        url: "YOUR METHOD NAME WHICH IS CALLED",
        data: "{PARAMETER VALUES TO BE PASSED}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        complete: function () {
        },
        success: function (msg) {                    
           alert("YOUR SUCCESS MESSAGE HERE");
        },
        error: function (msg) {
            alert("Error " + msg.d.toString());
        }
    });
} 
```

# iphone - iphone 1 秒内最大截图数

> ID：11119911
> 
> 赞同：0
> 
> 时间：2012-06-20T12:47:39.053
> 
> 标签：iphone, screenshot

我想知道在 iphone 中我们可以在 1 秒内截取多少张截图。目前我收到了 5 张截图。这是我的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(saveImageInPhotoAlbum) userInfo:nil repeats:YES];
    // Do any additional setup after loading the view, typically from a nib.
}

    -(void)saveImageInPhotoAlbum
{
    UIGraphicsBeginImageContext(CGSizeMake(self.view.frame.size.width,self.view.frame.size.height));

    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];
    UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(screenShot)];

    UIImage *image=[UIImage imageWithData:imageData];
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:52:11.530

```
int i=0;
-(void)saveImageInPhotoAlbum
{
    for (int i=0;i<10,i++)
{
    UIGraphicsBeginImageContext(CGSizeMake(self.view.frame.size.width,self.view.frame.size.height));

    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];
    UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(screenShot)];

    UIImage *image=[UIImage imageWithData:imageData];
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
}
i++;
NSLog(@"Counting of Photos= %d",i);
} 
```

# delphi - 如何检测流结束？

> ID：11119912
> 
> 赞同：5
> 
> 时间：2012-06-20T12:47:43.860
> 
> 标签：delphi, file, stream, position, eof

我有一个将数据输出到流的 DLL。但它添加了我不想要的后缀和前缀。我可以创建一个 MemoryStream，让 DLL 输出数据然后修剪它，但是可能有几 GB 的数据，所以我只想将它直接保存到文件（FileStream）中。我认为最好的解决方案是创建自己的 Stream 类。所以我做了：

```
function TFileStream2.Write(const Buffer; Count: Integer): Longint; 
```

我检查位置，如果它是= 0，那么我从缓冲区中丢弃前几个字节。这样我可以修剪文件的开头。但是我怎样才能检测到流的结束，以便我可以从最后丢弃一些字节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:19:21.317

当流对象被销毁时，只需剪掉文件的最后部分。您可以通过修改`Size`属性来做到这一点。

# mongodb - 在 MongoDB 上构建管理/内容管理界面的好工具？

> ID：11119913
> 
> 赞同：0
> 
> 时间：2012-06-20T12:47:46.413
> 
> 标签：mongodb, content-management-system, content-management

我正在寻找一个好的工具（或库或框架），我可以使用它来轻松地在 MongoDB 上构建基本的内容管理功能。

我非常了解[Mongo 网站中列出的管理 UI](http://www.mongodb.org/display/DOCS/Admin+UIs)，并且我已经在使用 RockMongo 进行查询和一些数据库管理任务。问题是，虽然我作为一名软件开发人员可以愉快地使用这些工具，但对于负责管理数据库内容的人来说，它们过于强大和复杂。

所以我特意寻找一个 MongoDB 内容管理工具：

*   能够围绕集合轻松构建（支架）用户界面（生成的创建、读取、更新和删除表单/视图）
*   能够为对象添加数据验证和一些模板或架构，尤其是在创建新对象并将其添加到集合中时
*   支持细粒度的访问控制（用户组、每个集合和每个对象的读/写/管理访问）

我一直在考虑使用[django-nonrel](https://github.com/django-nonrel/django-nonrel)来构建一个，但想在继续之前获得更多意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:05:41.043

由于您正在寻找超越直接管理 UI 的解决方案，因此我希望您必须自己动手。几个月前我进行了类似的练习，最终使用了[Yii Framework (PHP)](http://www.yiiframework.com/)。

您正在寻找的属性（脚手架、验证、RBAC、..）对于许多框架都是通用的。是否有您更喜欢/考虑使用的特定语言？有用于[Ruby](http://www.mongodb.org/display/DOCS/Ruby+Language+Center#RubyLanguageCenter-ObjectMappers)、[PHP](http://www.mongodb.org/display/DOCS/PHP+Libraries,+Frameworks,+and+Tools)、[Python](http://api.mongodb.org/python/current/tools.html#framework-tools)等的框架/库。其中许多不遗余力地将 MongoDB 强制转换为 ActiveRecord/ORM 模式，以启用 CRUD 和脚手架。使用 NoSQL 数据源的一种新兴方法是 DataMapper/ODM 模式，与 ORM 相比，它更适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T15:19:40.793

看看[penguin](https://github.com/etabits/node-penguin)：一个根据您的 Mongoose 模型自动生成管理页面的模块。

# c# - 异步 UI 更新

> ID：11119916
> 
> 赞同：0
> 
> 时间：2012-06-20T12:47:58.723
> 
> 标签：c#, wpf, .net-4.5, async-await

几个月前我才开始编程，所以我是一个纯粹的初学者，但我需要一个具有高概率计算的数学应用程序和一个用于查看/交互的 UI，所以我四处搜索，发现 C#.net 是最好的方式......强大的力量...... .

如果我能够做到这一点，它将帮助我取得很大进步：

**带有文本框的 Wpf 窗口，在文本框中，每次计算完成时都会打印一个数字，但 Ui 应该每次都响应**

我尝试使用最新的 net 4.5 来做到这一点，因为应用程序需要快速（所以使用**最新的技术而不是计时器或后台任务**）

它可以工作，但 Ui 被卡住并且无法移动（因为我认为我无法访问文本框）

如果大家可以帮助我，那就太好了，我感谢大家，因为我从你的帖子中学到了很多东西！

这是我错误的新手代码

```
private Random rng;
public MainWindow()
{
    rng = new Random();
    InitializeComponent();
    Task.Run((Func<Task>) Calc);
}
private async Task Calc()
{
    while (true)
    {
        textBox1.Dispatcher.Invoke
             (DispatcherPriority.Normal
              , new Action(delegate() 
                 { 
                     textBox1.Text = rng.NextDouble().ToString(); 
                 }
                          )
              );
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:52:43.640

诚然，在非 UI 线程中，您正在紧密循环，但是*在*UI 线程中添加了要调用的大量委托……所以您的 UI 太忙了。

*目前，您所有*的工作基本上都在 UI 线程中进行 - 您甚至没有`rng.NextDouble()`在后台线程中进行计算。

另请注意，您有一个`async`没有`await`表达式的方法，它应该触发编译器警告 - 您应该注意这一点。

您说您不想使用“后台任务”-但这正是您*通过*调用`Task.Run`.

现在我假设您的*真实*代码实际上并不只需要创建随机数。你*真正的*计算代码是什么样的，它发生在哪个线程中？

# backbone.js - Backbone.Marionette 和事件聚合器

> ID：11119919
> 
> 赞同：1
> 
> 时间：2012-06-20T12:48:13.320
> 
> 标签：backbone.js, marionette

参考网址：[http ://davidsulc.com/blog/2012/04/22/a-simple-backbone-marionette-tutorial-part-2/](http://davidsulc.com/blog/2012/04/22/a-simple-backbone-marionette-tutorial-part-2/)

我对骨干网和事件聚合器很天真。您能否让我知道使用以下代码行的原因。

this.model.addVote(); MyApp.vent.trigger("rank:down", this.model);

似乎还有其他可能性

this.model.addVote(); this.model(rankDown);

或其他方式 MyApp.vent.trigger("addVote", this.model

请解释谢谢。

运行示例：http: [//jsfiddle.net/Irfanmunir/966pG/29/](http://jsfiddle.net/Irfanmunir/966pG/29/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:22:48.910

通常，事件对于将对象彼此分离，同时仍然允许它们进行通信很有用。应用程序级别的事件聚合器模式（或发布/订阅模式）允许通过在组合中加入第 3 方来进一步解耦：发布者、聚合器、订阅者。这样，发布者和订阅者都不必相互了解。他们每个人都只知道事件聚合器。

不久前我写了一篇关于这个的小文章：

[http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)

在这种情况下，使用事件是因为模型需要在它所属的集合的上下文中进行操作。与其通过模型来获取集合（它可能不会直接分配给集合......模型不需要成为集合的一部分），而是更容易和更灵活地引发这个事件并让它在更多的地方处理合适的。

# .net - 是否可以在 EF 中调用表值函数

> ID：11119920
> 
> 赞同：1
> 
> 时间：2012-06-20T12:48:14.963
> 
> 标签：.net, sql-server, entity-framework-4

可以直接调用表值函数，还是需要先用存储过程包装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:02:03.787

它似乎不在 EF 4 中，它将在 EF 5 中可用。

[请参阅 EF 5 beta 中的 TVF 支持](http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-table-valued-functions-june-ctp.aspx)

[请参阅 EF 4 中未提供的 TVF 支持](http://blogs.msdn.com/b/efdesign/archive/2011/01/21/table-valued-function-support.aspx)

[EF 5 中的新功能](http://blogs.msdn.com/b/adonet/archive/2012/03/22/ef5-beta-2-available-on-nuget.aspx)

# c# - 在 C# 中向 vbulletin 论坛提交新线程

> ID：11119921
> 
> 赞同：0
> 
> 时间：2012-06-20T12:48:17.247
> 
> 标签：c#, http, web-applications, vbulletin

我想通过我在 C Sharp 中制作的应用程序在 vbulletin 论坛中发送新线程。由于线程提交需要安全令牌，所以我必须在提交时添加它并且还需要登录到论坛。

对于 vbulletin 论坛，我想通过我的应用程序发送帖子。结构是这样的。 ![表格结构](../Images/c0bf7afd47945b01682b9e7f45c57a83.png)

例如： **论坛网址：http:** [//myforumurl.com/forum](http://myforumurl.com/forum)

**线程需要提交网址：** [http ://myforumurl.com/forum/newthread.php?do=newthread&f=01](http://myforumurl.com/forum/newthread.php?do=newthread&f=01)

那么我如何提交具有**标签+标题+消息**字符串数据的线程来提交url，即 [http://myforumurl.com/forum/newthread.php?do=newthread&f=01](http://myforumurl.com/forum/newthread.php?do=newthread&f=01)

而且我还需要在提交时将我的用户名和密码发送到该论坛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:43:45.000

您需要向服务器发送 HTTP POST 请求。您可以使用`WebClient`该类来执行此操作。该请求将需要包含浏览器通常会提交的所有字段以及会话 cookie。您可以通过先发送另一个 POST 请求来获取会话 cookie，该请求是您登录时浏览器将发送的。

要查看浏览器发送的内容，您可以使用 HttpFox 之类的 Firefox 插件，或者仅使用 Chrome 和 Firefox 目前拥有的内置功能。

我怀疑有人会为你发布完整的代码。

# facebook - 我们可以在朋友墙上发布帖子和评论，喜欢这些帖子吗

> ID：11119922
> 
> 赞同：0
> 
> 时间：2012-06-20T12:48:17.693
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, windows-phone-7.1, facebook-fql

我们可以`relationship status changes`从过去 3 天（包括现在）得到我们的朋友吗

`what my app requires is the data of the friends who recently engaged/married etc`

和

`Anniversary details`从过去 3 天到接下来的 15 天（可能这可以通过阅读我们墙上的朋友帖子等来完成，`happy anniversary`但如何获取其他人使用 facebook api 发布的朋友墙帖子数据

和`status updates`过去 3 天（包括今天`comments`）和喜欢这些状态更新

`Graph API`或者`FQL`两者都很好

我正在为我的 Windows Phone 应用程序使用 facebook c# sdk

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:36:23.900

首先，你必须有一些相当……*有趣*的……朋友，如果你对他们每隔三天的关系状态变化感兴趣*——*或者你正在尝试构建一个寻找反弹性伴侣的应用程序……？;-)

好吧，由于所有用户字段（*已验证*除外）都可用于*实时更新*，这可能是您获得此类更改通知的一种方式（然后将它们的“历史”放入您自己的数据库中）。

# javascript - 我可以使用 Dojo Toolkit 进行桌面应用程序开发吗

> ID：11119923
> 
> 赞同：1
> 
> 时间：2012-06-20T12:48:19.927
> 
> 标签：javascript, dojo, toolkit

我想问dojo工具包使用的基本问题我可以将它用于桌面应用程序开发吗？这些应用程序在windows平台上运行可能有也可能没有互联网连接如果有，请详细回答谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:58:03.640

好吧，Dojo 是 javascript 框架/组件集合。所以你的问题可以在这里回答：

[您可以使用 JavaScript 进行桌面开发吗？](https://stackoverflow.com/questions/109399/can-you-do-desktop-development-using-javascript)

Adobe Air 在这个问题上赢得了比赛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:05:00.900

在[维基百科](http://en.wikipedia.org/wiki/Dojo_Toolkit)文章中；

> Dojo Toolkit 是一个开源模块化 JavaScript 库（或者更具体的 JavaScript 工具包），旨在简化跨平台、基于 JavaScript/Ajax 的应用程序和网站的快速开发。

这意味着没有办法使用桌面应用程序开发**，只能**在维基百科中使用；

> Dojo 可用于基于 JavaScript 的 Adob​​e AIR 应用程序。它已被修改以满足 AIR 的安全要求。
> 
> Dojo 咨询公司 Sitepen 使用 Dojo 制作了一个名为“Dojo Toolbox”的 Adob​​e AIR 应用程序。它包括一个 API 查看器和一个用于 Dojo 构建系统的 GUI。通常，构建系统在 Rhino 中运行，但在这个 AIR 应用程序中，构建系统可以从 AIR 中运行，无需使用 java。

因此，当我们查看[Adebe Air Wikipedia 页面](http://en.wikipedia.org/wiki/Adobe_Integrated_Runtime)时；

> Adobe Integrated Runtime，也称为 Adob​​e AIR，是 Adob​​e Systems 开发的跨平台运行时环境，用于使用 Adob​​e Flash、Adobe Flex、HTML 和 Ajax 构建富 Internet 应用程序 (RIA)，可以作为**桌面应用程序**或在移动设备。

所以，是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:51:08.383

这在某种程度上取决于“桌面应用程序”的含义。

如果应用程序可以实现为自托管 Web 应用程序，例如，用于存储的本地数据库、运行嵌入式服务器等，那么可以肯定——它只是一个 Web 应用程序，巧合地托管在同一台机器上。

你*可以*在 Air 应用程序中运行它，但为什么不直接使用 Air 呢？

# wpf - XAML：有没有办法设置 TreeViewItem 标头属性以包含多种字体样式？

> ID：11119936
> 
> 赞同：0
> 
> 时间：2012-06-20T12:48:39.300
> 
> 标签：wpf, xaml, expression-blend, treeviewitem

我需要创建一个将显示富文本的 TreeView 类型控制器。

例子：

»以*人名***签名**

 *»通过*人名***认证**

 *TreeViewItem 的内容很简单，因为我可以简单地将 TextBlock 放入其中，但标题不允许多个字体样式声明。

我真的是 XAML 的初学者，我在 ExpressionBlend 工作（尽管我并不回避编码）。如果有人将我推向正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:53:30.267

您可以在 TextBlock 中放置“运行”来更改字体。

例如

```
<TextBlock>Hello<Run FontStyle="Bold">World</Run></TextBlock> 
```

您可以将标题的内容设置为您想要的任何内容

```
<TreeViewItem>
    <TreeViewItem.Header>
        <TextBlock>Hello<Run FontStyle="Bold">World</Run></TextBlock>
    </TreeViewItem.Header>
</TreeViewItem> 
```

当你这样做时：

```
<TreeViewItem>Hello</TreeViewItem> 
```

您没有告诉 XAML 解析器要将“Hello”放入哪个属性。XAML 解析器将查看类型 (TreeViewItem) 并查看哪个设置为“ContentProperty”，在本例中，它是名为“Header”的属性。因为您没有指定“Hello”是什么，所以它假定为一个字符串。由于字符串实际上不能在 WPF 中显示为内容，因此必须创建一个控件来显示该字符串。TreeViewItem 的 ValueConverter 设置为提供一个 TextBlock 控件并将该控件的 Text 设置为您输入的字符串。所以幕后发生的事情比你看到的要多得多:)

您可以使用自己的控件完成所有这些操作

您可能应该阅读 WPF 模板、内容控件、内容呈现器、样式等。您可以使用 WPF 做很多强大的事情 - 例如，使应用程序中的每个按钮都具有相同的布局和样式，并添加一个没有任何代码的按钮前面的图像（只需几行 XAML）

在这里查看模板的初学者指南

[http://msdn.microsoft.com/en-us/magazine/cc163497.aspx](http://msdn.microsoft.com/en-us/magazine/cc163497.aspx)**

# wcf - 如何在 ViewModel 中注入 wcf 客户端依赖项并使其可测试？

> ID：11119937
> 
> 赞同：2
> 
> 时间：2012-06-20T12:48:40.633
> 
> 标签：wcf, unit-testing, mvvm, wcf-client, testability

**TL;DR：** 在 MVVM 客户端中实现 ViewModel 和 WCF 服务之间的依赖关系的良好且可测试的方法是什么？

请阅读问题的其余部分，以获取有关我在尝试执行此操作时遇到的问题的更多详细信息：

* * *

我正在开发一个连接到 wcf 服务的 silverlight 客户端，我想为客户端编写单元测试。因此，我正在寻找在我的 ViewModel 中使用 wcf 客户端并测试该交互的良好解决方案。到目前为止，我已经找到了两种解决方案：

**解决方案1：**这实际上是我到目前为止的实现方式：

```
public class ViewModelExample
{
    public ViewModelExample(IServiceClient client)
    {    
            client.DoWorkCompleted += .. 
            client.DoWorkAsync();
    }
}

//This is how the interface looks like
public interface IServiceClient
{
    event EventHandler<AsyncCompletedEventArgs> DoWorkCompleted;
    void DoWorkAsync();
}

//I was able to put the interface on the generated clients because they are partial classes, like this:
public partial class GeneratedServiceClient : IServiceClient
{

} 
```

*好的部分：*它相对容易模拟

*不好的部分：* 我的服务客户端和我的 ViewModel 一样长，当我有并发请求时，我不知道哪个答案属于哪个请求。

**解决方案 2：**受此答案 [WCF Service Client Lifetime](https://stackoverflow.com/questions/2440608/wcf-service-client-lifetime)的启发。

```
public class ViewModelExample
{
    public ViewModelExample(IServiceFactory factory)
    {
        var client = factory.CreateClient();
        client.DoWorkCompleted += ...
        client.DoWorkAsync();
    }
} 
```

*好的部分：*每个请求都在不同的客户端上，因此将请求与答案匹配不会再有问题。

*不好的部分：*测试更难。我每次都必须为工厂和 wcf 客户端编写模拟。这不是我想做的事情，因为我已经有 200 次测试...... :(

**所以我的问题是**，你们是怎么做到的？您的 ViewModel 如何与 wcf 服务通信，在哪里注入依赖项，以及如何测试该交互？我觉得我错过了什么。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:01:34.703

尝试`Func<IServiceClient>`注入您的虚拟机而不是客户端实例；您将注入一个“语言级工厂”，而不是为此构建一个类。在工厂方法中，您可以根据需要实例化您的客户端（例如，每次访问都可以为此创建一个新实例）。

不利的一面是，您仍然必须在大多数情况下接触您的测试，但我认为它的工作量会减少：

```
public ViewModelExample(Func<IServiceClient> factoryMethod)
{
    var client = factoryMethod();
    client.DoWorkCompleted += ...
    client.DoWorkAsync();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:51:34.650

WCF 服务应该有自己的测试来确认自身的功能。

然后，您应该模拟此 WCF 服务并在您的使用者中编写单元测试。

不幸的是，这是一种痛苦，我们都必须做的事情。务实并完成它，它将避免您将来被咬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:01:30.507

您是否偶然使用了 IoC 容器？如果你有，这个问题将被容器完全缓解（你只需注册`IService`依赖项，以便在每个请求时创建为全新的）。

如果不是这样，那么

> 我每次都必须为工厂和 wcf 客户端编写模拟

是你如何处理这种*“问题”*。成本相对较小，每次测试可能需要 2-3 行额外的代码（您所要做的就是设置工厂模拟以返回服务模拟，无论哪种方式都需要）。

# c - 为什么 fscanf 使用 2 次：while(!feof(File))

> ID：11119942
> 
> 赞同：1
> 
> 时间：2012-06-20T12:49:06.883
> 
> 标签：c, scanf, feof

为什么使用 fscanf 从文件中获取数据时，使用了 2 次，一次在 "!feof(fin)" 之前和之后，如下面的代码所示：

```
fscanf(fin, "%s", letta);
while(!feof(fin)){

    fscanf(fin, "%s", letta);
} 
```

读的字不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:51:02.830

不，读取的单词不会相同，因为您从文件中读取了两次，每次都会得到不同的数据。

测试中的条件`while`以查看您是否在文件末尾，为此必须进行读取尝试，这需要循环`fscanf()` *之前。*

进入循环后，您希望继续从文件中读取。大概循环内会有更多代码来处理您正在读取的数据。

在您发布的代码中，如果您在第一次读取尝试时遇到文件结尾，您将不会进入 ( `while`) 循环。

`do-while`将此与测试位于循环底部的构造进行对比（即读取仅发生一次，在循环的“底部”）。在那里，您将始终至少进入循环一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:57:53.247

在这里使用这样的东西可能没有意义`feof()`，但是（我想，如果我弄错了，请道歉）学习 C 的许多人似乎“想要”。

事实是它`fscanf()`本身有一个返回值；如果文件结束，它将无法执行请求的扫描，它会告诉您。`EOF`如果文件结束，它甚至会返回特殊常量。所以只需循环返回值 `fscanf()`：

```
while( fscanf(fin, "%s", letta) == 1 )
{
   /* Process, parse, store or do whatever with letta. */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:59:28.453

因为只有在调用`fscanf`. 尚未调用时，条件`while(!feof(fin))`没有意义。`fscanf`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:57:27.943

`feof`直到您尝试读取文件末尾之后才返回 true。想象一个像下面这样的文件：

```
这是一个测试$
^

```

where`^`表示文件中的当前位置，`$`表示 EOF。在第一次调用 之后`fscanf(fin, "%s", letta);`，流如下所示：

```
这是一个测试$
    ^

```

在循环的三次迭代（读取“is”、“a”和“test”）之后，您将得到：

```
这是一个测试$
              ^

```

此时，`feof(fin)`仍然返回`false`，因为此时您只知道您已经到达字符串“test”的末尾。因此，您的循环将再执行一次。由于你在文件的末尾，没有什么要读的，所以内容`letta`不会改变，所以看起来你已经读了两次“test”。 *现在* `feof(fin)`将返回 true。

这个故事的寓意是你不应该使用`feof`你的循环条件；相反，您应该使用读取操作本身的结果，如下所示：

```
errno = 0;
while (fscanf(fin, "%s", letta) == 1)
{
  // process letta
}
if (feof(fin))
{
  printf("Reached end of file\n");
}
else
{
  perror("Error on read");
} 
```

# javascript - 在拖放 jquery 上操作 mousedown 对象

> ID：11119948
> 
> 赞同：0
> 
> 时间：2012-06-20T12:49:14.733
> 
> 标签：javascript, jquery, html, object

我正在尝试更改使用鼠标按下激活时掉落的对象。例如：

我有一个带有`<a>`标签的列表，当我将它拖到 textarea 并放下它时。我将 url 作为字符串获取。但是当我删除它时我不想要完整的网址（我想要它的一部分）。

a-tag 中的 href 如下所示：**?page=1**但是当我将它放在 textarea 中时，我看到**http://localhost/page.php?page=1**

那么将对象放入文本区域时是否可以更改对象的结果？

**编辑：**

当前的 jQuery 代码：

```
jQuery("ul.editpages a").mousedown(function(object){
    newobject = object.srcElement.innerText;
}); 
```

当前的 HTML：

```
<ul class='editpages'>
    <li><a href="?page=1"><span>Page 1</span></a></li>
</ul>
<textarea class='redactor'>
</textarea> 
```

我正在尝试使用所有现代浏览器都提供的本机拖放功能，因为这样我就可以在文本中的某个点插入内容，而不是在某个位置（如 jquery droppable 和 draggable 所做的那样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:41:18.280

您可以尝试使用 javascript onDrop 事件做一些事情

```
<textarea class='redactor' ondrop="myfunction()"> 
```

并使用 href 的子字符串更改 textarea 的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:35:05.703

如果有人感兴趣：

在谷歌浏览器中，问题是我认为它会在下降时改变。那没有用。当我放下它时，它在对象中找不到任何东西。所以我把注意力转移到我试图拖动的东西上。

所以`<a>`我添加了`draggable="true" ondragstart="drag(event)"`

这就是拖拽功能。

```
function drag(ev){
    fullurl = ev.target.href;
    shorturl = fullurl.substring(fullurl.indexOf('?')).replace("?page=", "");
    tag = "<PAGE page='"+shorturl+"'>"
    ev.dataTransfer.setData("Text",tag);
} 
```

当我现在拖动它时，它将在文本区域中显示为格式化字符串。

这在 Opera 中无法正常工作（根据[http://help.dottoro.com/ljmpcqdb.php](http://help.dottoro.com/ljmpcqdb.php)），但由于没有人访问我们的站点。

# xcode - XCode 4 显示具有匹配名称快捷方式的文件

> ID：11119951
> 
> 赞同：4
> 
> 时间：2012-06-20T12:49:18.897
> 
> 标签：xcode, xcode4, keyboard-shortcuts

XCode 4（我使用 4.3.3）有很好的功能 - 在大多数导航面板（左面板）的底部，它有搜索字段，您可以在其中编写匹配表达式以快速查找您需要的实体。但是我还没有找到任何方法可以在不使用鼠标/触控板的情况下从代码区域切换到该字段。

有人知道调用 Preferences->Key Bindings 的快捷方式吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-02T11:32:37.157

`Cmd`+ `alt`+`J`

打开项目导航器并突出显示搜索栏，准备输入。

`Cmd`+ `shift`+`J` 只需打开项目导航器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T10:19:28.617

我用...

```
Command + Shift + O 
```

这将打开一个对话框，您可以在其中输入所需的文件名，它也匹配表达式。

# jquery - 如何在jquery中填充数组

> ID：11119953
> 
> 赞同：10
> 
> 时间：2012-06-20T12:49:32.980
> 
> 标签：jquery, arrays

有没有其他更好的方法来填充数组，例如：

```
var arr = [];
var i = 0;
$('select').children('option').each( function() {
    arr[i++] = $(this).html();
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T12:50:39.727

您可以使用[`map`](http://api.jquery.com/map/)方法：

```
var arr = $("select > option").map(function() {
    return this.innerHTML;
}).get(); 
```

**演示：http:** [//jsfiddle.net/UZzd5/](http://jsfiddle.net/UZzd5/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-20T12:50:52.653

使用`push()`：

```
var arr = [];
$('select').children('option').each( function() {
   arr.push($(this).html());
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T12:55:25.893

```
var arr = [];
$('select option').html(function(i, html) {
    arr.push(html);
}); 
```

**[演示](http://jsfiddle.net/QStkd/349/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T11:47:26.653

```
Array.prototype.fill = function(value, length){
    while(length--){
        this[length] = value;
    }
    return this;
}

// example:
var coords = [].fill(0, 3); 
```

# java - CascadeType.ALL 不适用于 FetchType.EAGER

> ID：11119956
> 
> 赞同：2
> 
> 时间：2012-06-20T12:49:43.433
> 
> 标签：java, hibernate, jpa

我有一个这样的实体：

```
@Entity
public class Directory extends Node
{
   @OneToMany(cascade= CascadeType.ALL,fetch= FetchType.EAGER)
   private List<Node> nodes = new ArrayList<Node>();
} 
```

映射是单向的。

当我使用 FethType.EAGER 时，级联选项不起作用。当没有急切的选项时，此代码可以很好地保存两个实体。这里有什么问题？

```
public void addDirectory(String name, long directoryId, User owner)
{
    Directory parent = entityManager.find(Directory.class, directoryId);
    Directory dir = new Directory(name,owner);
    parent.add(dir);
    owner.incrementRevision();
    entityManager.merge(owner);
} 
```

parent.add() 只是将实体添加到集合中。

```
public boolean add(Node e)
{
    return nodes.add(e);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T05:28:18.827

也许您应该使用 getNodes().add 而不是仅使用 nodes.add，如果某些提供者使用编织来处理您的实体，他们可能会遇到问题。

# asp.net-mvc-2 - 使用 NHibernate 的 MVC 中的数据库权限

> ID：11119958
> 
> 赞同：0
> 
> 时间：2012-06-20T12:49:48.253
> 
> 标签：asp.net-mvc-2, fluent-nhibernate, intranet, sessionfactory

我正在使用 Fluent NHibernate 开发 Intranet MVC Web 应用程序。

众所周知，创造必要`ISessionFactory`是很重的，因此应该只做一次。因此，我在 期间在 Global.asax 文件中创建它`Application_Start`，然后将其缓存在应用程序中以备将来使用。

问题是我只想向已经拥有数据库权限的用户授予访问权限。

*理论上*，这可以通过`Integrated Security=SSPI`在连接字符串中定义（而不是通过提供 SQL 用户名和密码）来解决。

但是，这会在 期间引发错误`Fluently.Configure`，因为配置发生在 期间`Application_Start`，该配置由托管应用程序的进程运行，该进程无权连接到数据库。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:01:04.680

您可以将其初始化`BeginRequest`为`Application_Start`：

```
private static bool _initialized = false;
private static object _syncRoot = new object();

protected void Application_BeginRequest(object source, EventArgs e)
{
    if (_initialized)
    {
        return;
    }

    lock (_initialized)
    {
        if (_initialized)
        {
            return;
        }

        // Initialize the session factory here and cache it

        _initialized = true;
    }
} 
```

# xml - 列没有像 xml 到 datagrid 那样按顺序排列

> ID：11119962
> 
> 赞同：0
> 
> 时间：2012-06-20T12:49:55.527
> 
> 标签：xml, apache-flex, datagrid

我的 web 应用程序以以下格式提供 XML：

```
<Vendor name="Infosys Limited" adopTotal="120" totalstrength="775" FY10Q1="162" FY10Q2="132" FY10Q3="229" FY10Q4="254" FY11Q1="282" FY11Q2="243" FY11Q3="238" FY11Q4="233" FY12Q1="237" FY12Q2="136" FY12Q3="101" FY12Q4="120"/>
<Vendor name="Wipro" adopTotal="42" totalstrength="1181" FY10Q1="9" FY10Q2="12" FY10Q3="53" FY10Q4="67" FY11Q1="85" FY11Q2="76" FY11Q3="84" FY11Q4="82" FY12Q1="98" FY12Q2="51" FY12Q3="39" FY12Q4="42"/>
<Vendor name="Zensar Technologies Inc" adopTotal="187" totalstrength="1408" FY10Q1="207" FY10Q2="197" FY10Q3="428" FY10Q4="490" FY11Q1="511" FY11Q2="479" FY11Q3="471" FY11Q4="440" FY12Q1="440" FY12Q2="308" FY12Q3="137" FY12Q4="187"/>
<Vendor name="Hcl Technologies Limited" adopTotal="0" totalstrength="342" FY10Q1="0" FY10Q2="0" FY10Q3="0" FY10Q4="0" FY11Q1="3" FY11Q2="0" FY11Q3="9" FY11Q4="0" FY12Q1="0" FY12Q2="1" FY12Q3="1" FY12Q4="0"/>
<Vendor name="Mahindra Satyam" adopTotal="73" totalstrength="12" FY10Q1="106" FY10Q2="69" FY10Q3="50" FY10Q4="63" FY11Q1="117" FY11Q2="203" FY11Q3="192" FY11Q4="195" FY12Q1="208" FY12Q2="139" FY12Q3="53" FY12Q4="73"/>
<Vendor name="TCS" adopTotal="48" totalstrength="106" FY10Q1="54" FY10Q2="75" FY10Q3="140" FY10Q4="164" FY11Q1="164" FY11Q2="140" FY11Q3="147" FY11Q4="134" FY12Q1="124" FY12Q2="83" FY12Q3="49" FY12Q4="48"/> 
```

但是 Datagrid 没有遵循这种格式。列应该根据 xml 变量来。列的顺序与 xml 不同。

我只是将 dataprovider 添加到 datagrid 中。请帮忙。

谢谢里米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:05:04.767

您必须明确定义列，如下所示：

```
<s:DataGrid dataProvider="{dp}">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="@name" headerText="Name" />
            <s:GridColumn dataField="@adopTotal" headerText="Adop" />
            <s:GridColumn dataField="@totalstrength" headerText="Strength" />
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

它与旧的 mx DataGrid 非常相似：

```
<mx:DataGrid dataProvider="{dp}">
    <mx:columns>
        <mx:DataGridColumn dataField="..." headerText="..." />
    </mx:columns>
</mx:DataGrid> 
```

`dataField`属性确定要在该列中显示的属性。
该`headerText`属性确定将在列标题中显示的标签。`@`符号指的是 XML 属性；你不需要它与常规收藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:10:46.263

您声明属性的方式不反映在内部读取属性的顺序。为了确保列的正确顺序，请在您的数据网格中手动创建它们。

例如

```
 <mx:DataGrid id="dg" width="100%" height="100%" rowCount="5" dataProvider="{employees}">
            <mx:columns>
                <mx:DataGridColumn dataField="@name" headerText="Name"/>
                <mx:DataGridColumn dataField="@adopTotal" headerText="Total"/>
                 <....

            </mx:columns>
        </mx:DataGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:56:36.043

数据网格定义：

```
<s:DataGrid id="datagrid" dataProvider="{dp}"/> 
```

当您从后端接收数据时，为 xml 中的每个属性调用以下函数：

```
private function addDataGridColumn(dataField:String):void
{
    var dgc:DataGridColumn = new DataGridColumn(dataField);
    var cols:Array = datagrid.columns;
    cols.push(dgc);
    datagrid.columns = cols;
} 
```

希望有帮助。

# java - 如何使用 portletPreferences

> ID：11119963
> 
> 赞同：2
> 
> 时间：2012-06-20T12:49:58.210
> 
> 标签：java, liferay, portlet

我正在尝试将 portletPreferences 输入到我的 ConfigActionImpl 中，如下所示：

```
public void processAction(PortletConfig arg0, ActionRequest arg1,
            ActionResponse arg2) throws Exception {
    String portletResource = ParamUtil.getString(arg1, "portletResource"); 
    final String newlink= ParamUtil.getString(arg1, "newlink");
    final PortletPreferences portletPreferences = 
    PortletPreferencesFactoryUtil.getPortletSetup(arg1, portletResource);
    portletPreferences.setValue("newlink", newlink);
    portletPreferences.store();        
    SessionMessages.add(arg1, arg0.getPortletName() + ".doConfigure");
} 
```

我想在第一次加载时显示默认首选项，如果我愿意，可以更改它。

我在想它是这样的：

```
protected String showView(ModelMap model, PortletRequest request) {
    preferences.getValue("newlink", monUrl);
} 
```

这是我的 portlet 中唯一不起作用的部分，当我直接编写 url 时，url 加载良好。

然后，我在代码中使用了 monUrl。我有一个空指针异常

我不太了解 portletPreferences 并且发现没有什么可以帮助我。

我只想在我的变量中加载首选项并在之后使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:39:19.963

我自己找到了解决方法。

事实上，我在 showView 中用这个“PortletPreferences 首选项”替换了这个“PortletRequest 请求”

还有这个“preferences.getValue("newlink", monUrl);" 通过“monUrl 首选项.getValue（“newlink”，monUrl）；”

```
 protected String showView(ModelMap model, PortletPreferences preferences) {

            monUrl = preferences.getValue("newlink", monUrl);   

} 
```

它工作正常。

# android - 仅当在 android 上打开虚拟键盘时才上移文本视图

> ID：11119967
> 
> 赞同：12
> 
> 时间：2012-06-20T12:50:03.333
> 
> 标签：android, android-layout

我的xml代码在这里，

```
<?xml version="1.0" encoding="utf-8"?><RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/mainlayout" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" 
    android:id="@+id/toplayout">
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="100dp"
        android:src="@drawable/bg" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" 
    android:id="@+id/bottomlayout">
    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Enter value" />
</LinearLayout> 
```

当我执行时，我得到了这样的结果，

![在此处输入图像描述](../Images/e2e967e6f334066182850df11adbb017.png)

执行后，当我在编辑文本上输入值时，虚拟键盘打开并且整个主布局向上滚动，我得到了这样

![在此处输入图像描述](../Images/563569c9d44e4b852d18e57d7cc771db.png)

但我除外，顶部布局不向上滚动，只有底部布局或 textview 向上滚动。我期待这样， ![在此处输入图像描述](../Images/7df2cbe19654043cae68d69375eb8204.png)

打开虚拟键盘时如何仅滚动编辑视图。?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T13:23:14.363

试试这个; 也许它很有用。调整`manifest`文件

```
<activity
      android:windowSoftInputMode="adjustResize"              
      android:name=".youractivity" android:label="@string/app_name" > 
```

@Ganesh 你`manifest`像上面一样改变你的`Activity`代码也可以工作

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"   >

  <RelativeLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:id="@+id/toplayout">
     <ImageView
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:src="@drawable/ic_launcher" />   
     <EditText
         android:layout_width="fill_parent"
         android:layout_alignParentBottom="true"   
         android:layout_height="wrap_content"
         android:hint="Enter value" />

     </RelativeLayout>
</LinearLayout> 
```

# java - Java Process.exitValue() 中的值是什么意思？

> ID：11119970
> 
> 赞同：5
> 
> 时间：2012-06-20T12:50:10.653
> 
> 标签：java, process, exit-code

我正在使用`Process`via`ProcessBuilder`运行用 C 代码制作的可执行文件。我正在`Process.exitValue()`对这个退出值做出反应。我注意到并非所有退出值都来自可执行文件。例如，我得到一个退出值 139，而在我的 C 代码中没有任何地方返回一个退出值 139。

我试图找到退出值的概述，但我找不到这个，现在我发现退出值可能取决于操作系统。（顺便说一下，我使用的是 Ubuntu）。

当一切正常时，唯一可以确定的退出值似乎是 0。是否有关于退出值的规范？我可以确定某个范围只能用于我自己的程序吗？为操作系统保留了哪些退出代码。

我发现 139 可能是 C 代码中的内存错误。我想摆脱可能。我无法获得退出值的任何概述（例如 139 = .....）

顺便说一下，这是简化的代码：

```
ProcessBuilder p = new ProcessBuilder(executableName,
   executableArguments);
final Process shell = p.start();
InputStream shellIn = shell.getInputStream();
int shellExitStatus = shell.exitValue(); 
```

注意：在 Ubuntu shell 中运行 C 可执行文件完全没有错误（即退出值 0）。但是，在 Java 中执行相同的命令会给出退出值 139。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:23:08.130

如果系统终止了您的应用程序（例如在*Segmentation fault*的情况下），它将退出代码设置为 128 + SIGNAL - 有关信号值，请参见 linux[`signal(7)`手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?signal+7)。

此外，对于 linux，头文件中定义了几个默认退出代码`sysexits.h`，建议程序员使用这些常量而不是手动定义自己的值。从[`exit(3)`手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/exit.3.html)：

> BSD 试图标准化退出代码；查看文件`<sysexits.h>`。

[例如，您可以在此处](http://www.opensource.apple.com/source/Libc/Libc-320/include/sysexits.h)找到该文件，其中包含的值为：

```
#define EX_OK           0  /* successful termination */

#define EX__BASE        64  /* base value for error messages */

#define EX_USAGE        64  /* command line usage error */
#define EX_DATAERR      65  /* data format error */
#define EX_NOINPUT      66  /* cannot open input */
#define EX_NOUSER       67  /* addressee unknown */
#define EX_NOHOST       68  /* host name unknown */
#define EX_UNAVAILABLE  69  /* service unavailable */
#define EX_SOFTWARE     70  /* internal software error */
#define EX_OSERR        71  /* system error (e.g., can't fork) */
#define EX_OSFILE       72  /* critical OS file missing */
#define EX_CANTCREAT    73  /* can't create (user) output file */
#define EX_IOERR        74  /* input/output error */
#define EX_TEMPFAIL     75  /* temp failure; user is invited to retry */
#define EX_PROTOCOL     76  /* remote error in protocol */
#define EX_NOPERM       77  /* permission denied */
#define EX_CONFIG       78  /* configuration error */

#define EX__MAX         78  /* maximum listed value */ 
```

但是，使用它们不是强制性的，您可以自由使用任何您想要的值。

一般的答案是 - 如果您的应用程序正常失败（即它能够处理错误并完成执行），那么它会自行设置退出代码。如果应用程序被系统杀死，则设置退出代码的是系统。

您还可以查看[此线程](https://stackoverflow.com/questions/1101957/are-there-any-standard-exit-status-codes-in-linux)以获取更多信息。

# css - css3 来自不同规则的多个阴影

> ID：11119973
> 
> 赞同：4
> 
> 时间：2012-06-20T12:50:23.710
> 
> 标签：css, dropshadow

css3 多个阴影是否可以从不同的 css 规则/类中累积？

IE

```
.multipleShadows {box-shadow: 0 0 10px 5px black, 40px -30px lime} 
```

将为元素创建两个阴影，黑色和石灰。

但我想要两个不同的课程 - 一个用于 blackShadow，一个用于limeShadow

```
.blackShadow {box-shadow: 0 0 10px 5px black}
.limeShadow {box-shadow: 40px -30px lime} 
```

并且都应用于具有两个类的单个元素。

```
<div class="blackShadow limeShadow">my div</div> 
```

这可以做到吗？是否有其他方法可以实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:52:43.277

像这样写：

```
.blackShadow.limeShadow {box-shadow: 0 0 10px 5px black, 40px -30px lime} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:07:27.017

除了创建一个单独的类`.doubleShadow`或为`.blackShadow .limeShadow`.

您可以使用**LESS**并制作一个可以实现的 mixin。如果您正在寻找不同的解决方案，那将是一个更好的选择。

不管怎样，我对你在问题中给出的内容做了一个[小技巧。](http://jsfiddle.net/aniketpant/wxQtt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:01:34.013

我最终使用了一个放置在原始 div 内的额外 div，并将第二个影子类应用于内部 div。

```
<div class="blackShadow"><div class="limeShadow"> my div</div></div> 
```

之所以选择它，是因为它将阴影类的定义分开，并且仍然允许我同时显示两个阴影。

# asp.net-mvc - MVC T4 模板：更改输出文件名

> ID：11119974
> 
> 赞同：1
> 
> 时间：2012-06-20T12:50:25.200
> 
> 标签：asp.net-mvc, filenames, t4

简单的问题，找不到直接的答案。如何修改 T4 模板的输出文件名？

我正在使用 T4 模板来捆绑和缩小我所有的 javascript 文件。现在我想在我的文件名中包含当前的程序集哈希码。但是我怎样才能访问这个文件名呢？

一种解决方法是在生成输出文件后重命名它，但这对我来说似乎不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:17:03.460

你需要做一些叫做自动版本控制的事情，这通常是通过 URL 重写来完成的。物理文件实际上并未重命名。

有关 javascript 和 css 自动版本控制的详细信息，请参阅此问题：

[如何强制浏览器重新加载缓存的 CSS/JS 文件？](https://stackoverflow.com/questions/118884/what-is-an-elegant-way-to-force-browsers-to-reload-cached-css-js-files)

请注意，如果您在每次生成文件时都使用模板生成不同的物理文件，那么您将失去源代码控制（修订等）的许多好处，并且最终会在磁盘上获得无法管理的大量文件。

# c# - 如何在 wcf 中使用 MSMQ 绑定从 URL 调用操作合同

> ID：11119975
> 
> 赞同：0
> 
> 时间：2012-06-20T12:50:26.457
> 
> 标签：c#, asp.net, wcf, msmq, wcf-binding

我有一个带有 MSMQ 绑定的 WCF 服务，它工作正常。每当任何消息进入 MSMQ 队列时。它正在处理队列并从队列中删除消息。但它没有调用操作合同，我没有得到有关消息的信息。

有什么方法可以直接调用您的操作合同还是有其他方法？我在 WAS 和 MSMQ 中托管 wcf 服务，以下是我的 web.config 设置。

```
<system.serviceModel>
  <bindings>
      <netMsmqBinding>
          <binding name="WCFQNonTransactional" exactlyOnce="false">
              <security mode="None"/>
          </binding>
      </netMsmqBinding>
  </bindings>
  <services>
      <service behaviorConfiguration="MyWCFService.MSMQReceiverServiceBehavior" name="MyWCFService.MSMQReceiverService">
          <endpoint address="http://localhost:90/MSMQReceiverService.svc"
                    binding="wsHttpBinding"
                    contract="MyWCFService.IMSMQReceiverService" name="mymsmq">
              <identity>
                  <dns value="localhost" />
              </identity>
          </endpoint>

          <endpoint address="net.msmq://localhost/private/Mywcfservice/msmqreceiverservice.svc"
                    binding="netMsmqBinding" bindingConfiguration="WCFQNonTransactional"
                    contract="MyWCFService.IMSMQReceiverService" />
      </service>
  </services>
  <behaviors>
      <serviceBehaviors>
          <behavior name="MyWCFService.MSMQReceiverServiceBehavior">
              <serviceMetadata httpGetEnabled="true"/>
              <serviceDebug includeExceptionDetailInFaults="false"/>
          </behavior>
      </serviceBehaviors>
  </behaviors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:25:03.653

如果没有调用操作合约，这意味着将消息从队列中取出时存在问题。应为从队列中取出的每条消息调用您的操作代码。

首先，确保您使用的是事务队列，因为如果您没有使用任何错误将导致消息丢失。

其次，在客户端和服务器绑定上启用日志，您将能够跟踪消息。

# python - Python argparse 结合了一个标志和一个变量

> ID：11119983
> 
> 赞同：3
> 
> 时间：2012-06-20T12:50:41.897
> 
> 标签：python, argparse

我希望能够为我的程序指定一个既作为标志又作为变量的选项。例如：我有一个名为“--logging”的参数。如果未指定此参数，我希望将其设置为 false（即 action='store_true'），但如果指定了参数，我想做两件事。1）我想设置默认路径“./log_file.log”和 2）我想允许用户指定不同的日志文件位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:29:52.537

对，所以我想出了我自己的解决方案。它依赖于nargs。首先是代码：

```
#!/usr/bin/python
# example.py
import argparse

parser = argparse.ArgumentParser(description="Example of a single flag acting as a boolean and an option.")
parser.add_argument('--foo', nargs='?', const="bar", default=False)
args = parser.parse_args()

if args.foo:
  print args.foo
else:
  print "Using the default, boolean False." 
```

鉴于该示例，当我们在三种可能的情况下使用它时会发生以下情况：

```
> ./example.py
  Using the default, boolean False.
> ./example.py --foo
  bar
> ./example.py --foo baz
  baz 
```

希望以上内容是不言自明的。如果不是，那是怎么回事 nargs='?' 如果未指定标志，将使用“默认”值（在我们的例子中为布尔值 False），如果标志不带参数指定，则使用 const 值，如果标志带参数指定，则使用参数。注意不要在 False 周围加上任何引号；False 是内置类型（布尔值），“False”或“False”将评估为 true。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T18:29:21.330

是的，没有问题。[您可以使用关于 argparse 的优秀 PyMOTW](http://www.doughellmann.com/PyMOTW/argparse/)中解释的这种形式

```
import argparse    
parser = argparse.ArgumentParser()

parser.add_argument('--logging', action='store_true', default=False,
                    dest='logging_on',
                    help='Activate the logging')

results = parser.parse_args() 
```

您可以稍后在代码中使用 logging_on 来测试和输出值（将其替换为对您有意义的内容）。您还可以使用配置文件或/和文件日志路径的参数。

# linux - cronjob 删除超过 99 天的文件

> ID：11119985
> 
> 赞同：4
> 
> 时间：2012-06-20T12:50:47.023
> 
> 标签：linux, bash, cron, find, rm

我必须做一个 cronjob 来删除特定目录中超过 99 天的文件，但我不确定文件名是由值得信赖的 Linux 用户创建的。我必须期待特殊字符、空格、斜杠字符和其他字符。

以下是我认为可行的方法：

```
find /path/to/files -mtime +99 -exec rm  {}\; 
```

但我怀疑如果有特殊字符或者它找到一个只读文件，这将失败（cron 可能无法以超级用户权限运行）。如果它符合此类文件，我需要它继续。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T13:06:47.247

使用 时，空格、制表符、回车或*特殊字符*`-exec rm {} \;`应该不会有任何问题，因为直接调用该命令并一次将每个文件的名称传递给它。*`find``rm`*

 *该命令不会删除目录，因为您没有将`-r`参数传递给它，而且您可能也不想要。这最终可能有点危险。`-f`如果您没有写权限，您可能还希望包含参数以执行强制。以root身份运行cron脚本，你应该没问题。

我唯一担心的是，您最终可能会遇到不想删除但在过去 100 天内未修改的文件。例如，在您的工作中停止自动销毁序列的密码。很有可能该文件在过去 100 天内没有被修改过，但是一旦自动销毁序列开始，您就不希望因为密码丢失而受到责备。

好的，更合理的可能是使用但很少修改的应用程序。也许某人的简历没有更新，因为他们正在从事当前的工作等。

所以，小心你的假设。仅仅因为一个文件在 100 天内没有被修改并不意味着它没有被使用。更好的标准（尽管仍有疑问）是文件是否在过去 100 天内被访问过。也许这是最后的命令：

```
 find /path/to/files -atime +99 -type f -exec rm -f {}\; 
```

* * *

### 还有一件事...

一些`find`命令有一个`-delete`参数可以用来代替`-exec rm`参数：

```
 find /path/to/files -atime +99 -delete 
```

这将删除找到的目录和文件。

还有一个小建议：第一周，保存在日志文件中找到的文件而不是删除它们，然后检查日志文件。这样，您可以确保您没有删除重要的内容。一旦您对日志文件中没有您不想触摸的内容感到满意，您就可以删除这些文件。一周后，如果您对不会删除任何重要内容感到满意，您可以恢复`find`命令为您执行删除操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:58:52.280

如果您`rm`使用该`-f`选项运行，则无论您是否具有文件的写权限，您的文件都将被删除（重要的是包含文件夹）。因此，您可以删除文件夹中的所有文件，也可以不删除。`-r`如果要删除子文件夹，也可以添加。

我不得不说：要*非常*小心！你在玩火；）我建议你用一些危害较小的`file`命令来调试。

您可以通过创建一堆文件来测试这一点，例如：

```
touch {a,b,c,d,e,f} 
```

并根据需要设置每个人的权限

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:01:21.600

您应该使用`-execdir`而不是`-exec`. 更好的是，阅读手册中章节的完整[安全注意事项。`find`](http://www.gnu.org/software/findutils/manual/html_mono/find.html#Security-Considerations-for-find)`findutils`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T17:29:58.053

请始终使用`rm [opts] -- [files]`，这将使您避免出现`-rf`wiich 之类的文件的错误，否则这些文件将被解析为选项。当您提供文件名时，请结束所有选项。*

# ios - 在 iOS 上使用 ShareKit 的 Twitter OAuth 流的会话超时错误

> ID：11119989
> 
> 赞同：0
> 
> 时间：2012-06-20T12:50:58.533
> 
> 标签：ios, twitter, oauth, sharekit

我正在使用[ShareKit](http://getsharekit.com)来允许 iPad 应用程序的用户通过他们的[Twitter](http://www.twitter.com)帐户从应用程序内发布 URL。以下 OAuth 步骤可以正常工作：

1.  [ShareKit](http://getsharekit.com)使用应用程序中硬编码的 Consumer Key 和 Consumer Secret 来请求将 URL 加载到 WebView 中。
2.  Twitter 提供的 URL 在 WebView 中正确显示。
3.  系统会提示用户通过使用 WebView 登录其 Twitter 帐户来授予读取和写入权限。
4.  WebView 在重定向到回调 URL 时会短暂显示一个重定向页面。

在 OAuth 流程的这个阶段出现问题。

在 WebView 非常简短地显示 Twitter '重定向' 消息后，会显示一个页面，显示“您的会话已超时”。

我决定在我自己的个人 Twitter 帐户中创建一个 Twitter 应用程序。当我更改应用程序以使用我自己的消费者密钥和消费者秘密（但保持回调 URL 和权限相同）时，一切正常。

我已将 Consumer Key 和 Secret 与应用程序中的值进行了交叉检查，并且它们匹配（对于失败的 Twitter 帐户）。

我使用[了 Twurl](https://github.com/marcel/twurl)，**两个**Twitter 帐户都运行良好。因此，我不明白只有一个 Twitter 帐户以及仅在使用 ShareKit 时会出现什么问题。

我可以做一些关于如何追踪问题的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:00:54.210

我无法直接帮助您，但原始共享工具包在很多方面都已过时。您可能想尝试[ShareKit 2.0](https://github.com/shareKit/ShareKit/)。至少，在 ios5+ 上它使用 Twitter.framework，所以你的问题可能会消失。

# java - 带有struts和hibernate的dao层和业务逻辑

> ID：11119992
> 
> 赞同：2
> 
> 时间：2012-06-20T12:51:12.687
> 
> 标签：java, hibernate, struts2, dao

我有一个 struts 项目，我的客户给了我完整的业务逻辑类。他需要这个与 struts 和 hibernate 融为一体的东西。

哪个最好，要将业务逻辑放到我的 Dao 层，需要为业务逻辑添加一个额外的服务层。

一些struts项目我发现action类直接访问Dao。

请建议我哪个是更好的选择。非常感谢帮助。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:56:29.120

我强烈建议将您的业务逻辑写入服务层，以便您的 dao 层仅包含数据库交互并且可以在任何时间点重用。

此外，我建议您添加一个将由 UI 层访问的表示层（所有具有纯值的实体）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:58:33.527

我的建议是保持 Dao 与您的业务逻辑无关，但是是的，所有与数据库相关的逻辑和自定义都应该写在 DAO 层，就像所有休眠逻辑、将结果转换为您的类等。（当您使用 Hibernate 时）应该写在道。

整个迭代、设置/获取、结果定制、准备、请求改进作为休眠查询的参数都应该写在服务层。

另一层`Controller`应该在服务层上工作，该服务层将接收请求并调用相应的服务方法并提供生成的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:55:55.170

让 Hibernate 成为您的 DAO 层，并在包含您的业务规则的之上编写一个服务层。这两者共同构成了 MVC 的模型部分。Struts 动作是 MVC 的控制器部分。

# python - 不同的数据类型

> ID：11119993
> 
> 赞同：0
> 
> 时间：2012-06-20T12:51:19.553
> 
> 标签：python, sql, sqlite

我尝试将不同的数据类型添加到数组中：

```
mtype = np.dtype({'names':['a', 's', 'x', 'y'], 
                  'formats':['f8', 'S10', 'f8',   'f8']}) 
```

或者

```
mtype = np.dtype([("a", np.float), ("s", np.str), 
                  ("x", np.float), ("y", np.float)]) 
```

大批：

```
a[i] = np.empty([4, d[i]], dtype= mtype) 
```

数组的数据`a`是从 SQL 查询中读取的，`a`循环中有 4 个不同的数组：

```
a[0], a[1], a[2], a[3] 
```

并且对于每个不同的 SQL 查询。

数据库中的数据由 sqlite3 包读取：

```
cur.execute(('''CREATE TABLE example
     (a real, s text , t real, x real, y real)''')

for j in range(len(rows)):
     a[i][0, j] = rows[j][0]
     a[i][1, j] = rows[j][1]
     a[i][2, j] = rows[j][2]
     a[i][3, j] = rows[j][3] 
```

然后我得到错误：

```
File "C:\(..)", line 39,
in diff_spec
     a[i][0, j] = rows[j][0]
TypeError: expected a readable buffer object 
```

如果我将数组设置`a`为：

```
a[i] = np.empty([4, d[i]], float) 
```

而且我没有阅读第二列（这是字符串），我不会收到错误消息。

```
for j in range(len(rows)):
    a[i][0, j] = rows[j][0]
    # a[i][1, j] = rows[j][1]
    a[i][2, j] = rows[j][2]
    a[i][3, j] = rows[j][3] 
```

谁能解释为什么会这样？提前致谢！

# frameworks - 如何将没有框架的已经编写和工作的项目转移到 Kohana？

> ID：11119994
> 
> 赞同：0
> 
> 时间：2012-06-20T12:51:34.403
> 
> 标签：frameworks, kohana, move

我很好奇是否有可能将书面和完整工作的项目逐步转移到 Kohana。我的意思是是否可以逐页替换。因此，该项目将逐页从 100% 的非框架代码转移到 100% 的 Kohana 代码。该项目使用 php/js/css/html、MySQL 和 Apache。这个项目很大（有客人和会员区）。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:07:18.067

我从未使用过 Kohana，但我对其他 PHP 框架（Yii）非常熟悉。我的猜测是这是不可能的。或者换一种说法：一切皆有可能（除了在你的屁股上打开雨伞！:)，但考虑到时间（和金钱），这样做是不值得的。

大多数专业框架在很多领域都与“纯 PHP”代码完全相反。代码大部分时间是分开的（MVC = 模型-视图-控制器设计模式）并且主要使用框架类或代码。我什至敢说，在某些专业框架中编写应用程序意味着仅使用 10-20% 的纯 PHP 代码，其余 80-90% 仅用于框架类、扩展、控制器等。

换句话说：将“纯 PHP”应用程序移植到框架代码中意味着从头开始编写该应用程序。我不确定，您是否能够复制粘贴超过 5-10% 的源代码？