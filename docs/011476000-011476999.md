# StackOverflow 问答 11476000-11476999

# c - 如何在 windows c 代码中检测 gdb？

> ID：11476000
> 
> 赞同：1
> 
> 时间：2012-07-13T18:11:38.830
> 
> 标签：c, windows, debugging, gdb

我想在使用 gdb 和 id 进行调试时打开某些调试语句，而不是手动进行。我找到`ptrace`了可以在 *nix 上检测 gdb 的代码，但在 Windows 上不存在。我正在 Windows 上使用 mingw gcc 进行编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:15:02.213

Windows 有一个名为[`IsDebuggerPresent`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680345.aspx). 我*不确定*它是否适用于 gdb，但假设它使用普通的 Windows 功能，应该没问题。

# html - 如何使用 xcode 提交表单

> ID：11476002
> 
> 赞同：0
> 
> 时间：2012-07-13T18:11:43.557
> 
> 标签：html, xcode, forms, webview

我需要在 webview 上自动按下“提交”按钮。我有：

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>
#import <WebKit/WebResourceLoadDelegate.h>
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
- (IBAction)start:(id)sender;
@property (weak) IBOutlet NSTextField *UserNameField;
@property (weak) IBOutlet NSTextField *PasswordField;
@property (weak) IBOutlet NSPopUpButton *IntervalSelector;
@property (weak) IBOutlet WebView *browser;
@property (weak) IBOutlet NSTextField *IDField;

@end 
```

浏览器已完成加载，那么如何编写自动“提交”按钮推送？我不知道为什么它不起作用，任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:01:12.973

您总是可以操纵 DOM 元素来做这种事情（甚至提交表单）。就像是：

```
NSString *js = @"document.forms['loginform'].elements['Email'].value='userName@foo.com'";
[[myWebView windowScriptObject] evaluateWebScript:js]; 
```

# linux - 如何确定设备内存的页框号？

> ID：11476003
> 
> 赞同：5
> 
> 时间：2012-07-13T18:11:54.030
> 
> 标签：linux, linux-kernel, linux-device-driver

如何确定设备内存的页框号？来自 LDD3/ Ch. 15/“使用 remap_pfn_range”和“一个简单的实现”部分，pfn 已等同于 vm_pgoff 字段。我对此感到困惑。怎么会这样？

请注意，vm_pgoff 被描述为：

> 文件中区域的偏移量，以页为单位。映射文件或设备时，这是该区域中映射的第一页的文件位置。

因此，如果映射的第一页也对应于文件的第一页（我认为这很常见），vm_pgoff 将为 0。对吗？如果是这样，这似乎不是 remap_pfn_range( ) 的 pfn 参数的正确值。我在这里想念什么？什么是正确的值？为了便于参考，我从下面的LDD3中复制了相关代码（第426页）

```
static int simple_remap_mmap(struct file *filp, struct vm_area_struct *vma)
{
if (remap_pfn_range(vma, vma->vm_start, vm->vm_pgoff,
                    vma->vm_end - vma->vm_start,
                    vma->vm_page_prot))
    return -EAGAIN;
...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T09:02:36.243

venk，我只是一个新手。我对你的问题很好奇，而且我已经阅读了你在 Linux 设备驱动程序中指出的部分。

我应该推荐另一本书，Professional Linux kernel architecture。那里描述了有关 mmap 的一些细节。

在上面的书中，似乎在调用函数 simple_remap_mmap() 作为示例之前对 vm->vm_pgoff 进行了一些转换，这在 Linux 内核源代码中不存在。

因此，即使 vm_pgoff 为 0，在对其进行一些转换后，该成员变量 vm_pgoff 中也可能存在正确的值。

以下代码存在于 Linux 内核源代码 3.3.5 中

```
#ifdef CONFIG_DEVKMEM

static int mmap_kmem(struct file *file, struct vm_area_struct *vma)
{

    unsigned long pfn;

    /* Turn a kernel-virtual address into a physical page frame */

    pfn = __pa((u64)vma->vm_pgoff << PAGE_SHIFT) >> PAGE_SHIFT;   <----- Here

    /*
     * RED-PEN: on some architectures there is more mapped memory than
     * available in mem_map which pfn_valid checks for. Perhaps should add a
     * new macro here.
     *
     * RED-PEN: vmalloc is not supported right now.
     */
    if (!pfn_valid(pfn))
        return -EIO;

    vma->vm_pgoff = pfn;
    return mmap_mem(file, vma);
}
#endif 
```

# xcode - 如何移动到不同的 ViewController？

> ID：11476004
> 
> 赞同：-2
> 
> 时间：2012-07-13T18:12:03.540
> 
> 标签：xcode, xcode4.2

我想知道当你按下一个单元格时如何让 UITableView 转到不同的 ViewController 。到目前为止，我有这个代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)indexPath
{
if (indexPath.row == 0) {       
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:16:24.927

它是这样的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)indexPath
{
    if (indexPath.row == 0) {
        SomeViewController *newController = [[SomeViewController alloc] initWithNibName:nil bundle:nil];
        [self.navigationController pushViewController:newController animated:YES];
        [newController release]; // leave this line out if using ARC
    }
} 
```

警告：只是在没有查看任何文档的情况下输入了上面的内容——如果在您将自己的视图控制器类名称替换为 之后它没有编译`SomeViewController`，请查找拼写错误等。

顺便说一句，有很多关于这个主题的文档，还有很多例子。如果上面的代码片段不能解决您的问题，请[查看 iOS 视图控制器编程指南](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457-CH1-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:20:30.250

您的问题是如此基本以至于无法回答，或者如果您不掌握一些基本的 iOS 概念，答案将毫无意义。我强烈建议您花几个小时[在 iTunes](http://itunes.apple.com/itunes-u/ipad-iphone-application-development/id473757255?mt=10)（免费）上浏览 Standford iOS 编程课程的视频。

如果您是注册开发人员，Apple 还提供了许多来自 WWDC 的优秀视频，详细介绍了所涉及的基本设计模式。YouTube 上也有一些不错的视频。

当然还要查看源代码——来自 Apple、Standford 课程或本网站 ( [http://www.raywenderlich.com/tutorials](http://www.raywenderlich.com/tutorials) )上的许多优秀教程

# php - 调用 php 在 IE 中不起作用

> ID：11476010
> 
> 赞同：0
> 
> 时间：2012-07-13T18:12:30.903
> 
> 标签：php, javascript, ajax, onchange

我正在使用 html 中的 onChange 事件启动以下 javascript：

我已经通过执行一个简单的 alert("working"); 验证了 onChange 事件正在访问 javascript；并且 IE 确实触发了警报，但是我想要的实际代码似乎不起作用。（它在 FF、Chrome、Safari、iPad 和 Android 中的功能）。

该函数的作用是：获取通过onchange传递给它的值，并将其作为变量发送到一个php文件中。php 文件获取它获取的变量并将其插入数据库。我不认为 php 部分是问题，因为它适用于所有其他浏览器。有没有人有任何见解？

代码：

```
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","http://testest.com/itgoeshere.php?q="+str,true);
xmlhttp.send();
} 
```

我意识到必须为每个标签显式添加值属性，因为您必须为 IE 这样做但我相信我已经做到了......

这是 select 语句的示例...

```
<select name="date" onChange="showUser(this.value)">
<option value="">---</option>
<option value="1">Past hour</option>
<option value="2">Past week</option>
<option value="3">Past month</option>
<option value="4">Past year</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:21:40.967

嗯..你可以试试[jQuery Ajax Function](http://api.jquery.com/jQuery.ajax/)进行测试（jQuery应该支持IE6）。

也许所[描述的解决方法](https://devcentral.f5.com/weblogs/macvittie/archive/2008/06/26/3397.aspx)（修复 Internet Explorer 和 AJAX）可以解决问题。

jQuery Ajax 调用：

```
$.ajax({
  type: "GET",
  url: "getitinhere.php",
  async: true,          
  data: { "str": str },
  success: function(data) {
    alert('Success: '+data);
  },
  error: function(jqXHR, textStatus, errorThrown){  
    alert('Something went wrong' +textStatus);          
  }
}); 
```

希望这个片段可以帮助你;）

# android - 打“原生 vs html5”移动应用之战

> ID：11476011
> 
> 赞同：12
> 
> 时间：2012-07-13T18:12:35.247
> 
> 标签：android, iphone, ios, html

我是一名 iOS（本地）开发人员，自 App Store 推出以来一直如此。从那时起，我也学习了一些 Windows-Phone 和 Android。我一直注意到构建 HTML5 网络应用程序而不是原生的不可避免的趋势，而且它的增长速度似乎比我预期的要快。这让我作为一个原生开发者感到沮丧，因为大多数时候有很多关于原生的争论，而只有少数支持 HTML5（即它是跨平台的！），但后面的那些争论似乎更胜过前者现在还有更多，有时出于无效的原因。

我不相信移动应用程序的“未来”在于 HTML5 和 PhoneGap 等工具，这些工具可以跨平台进行大规模分发。与原生应用程序相比，网络应用程序的体验总是低于标准，除此之外，很多神话往往围绕着它流传。例如，“客户不会为多平台的原生开发付费；太贵了！” 这是一个神话，如果许多客户真的知道他们获得的应用程序质量的差异，他们就会为此付出代价。行业领导者一次又一次地证明了这一点，他们在很大程度上并未为客户构建网络应用程序。我什至知道当 CEO 拿到他们外包的应用程序时发生了一场近乎诉讼，这是一个 PhoneGap/HTML5 应用程序。

其他神话包括走 HTML5 路线可以节省大量代码和时间，但事实并非如此。涉及跨设备/平台的测试，更不用说使应用程序在这些平台上运行所涉及的 CSS 和 javascript 的数量，通常会导致代码混乱，并花费大量时间调试相关问题。一个典型的原生开发者可以在几个小时内在几个平台上弹出简单的基于列表的导航/详细视图，而构建 HTML5 以“模仿”并伪造相同的确切功能和外观/感觉很可能需要大约相同的时间. 此外，走PhoneGap/HTML5路线将始终确保您将落后而不是处于平台和技术的前沿，这一事实又如何呢？

我最大的挫败感是，现在似乎有些开发商店有时甚至向客户推荐 PhoneGap/HTML5 方法，因为它具有跨平台等的魅力，甚至没有真正向客户（有时可能毫无头绪）解释什么它实际上涉及性能和外观/感觉的差异。

我绝对想跟上时代的步伐，为最坏的情况做准备，这就是为什么我要扩展学习这些工具的原因，但我只是好奇你们（本地开发人员）是如何处理这种事情的？我一个人在想这个吗？关于如何以理性的方式向人们解释如何做出这个决策过程的任何建议？

在我收到有关此问题的回复之前，请注意，我完全理解有时使用网络应用程序路线是正确的方式，并且我完全理解有些客户根本不会为原生付费，所以这是美好的。我也明白预测表明 HTML5 应用程序的百分比将随着时间的推移而继续上升。但是，我只是不同意“所有应用程序都应该是 HTML5，我们只是使用本机组件”的日益增长的心态。需求出现了（即相机等）。” 我个人的观点是应该反过来：“所有应用程序都应该是原生的，除非特定的 UI 和功能在 HTML5 中更容易/更快地完成”。

想法？如果这是此类事情的错误论坛，我提前道歉，但我渴望获得意见和建议。谢谢！-文森特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T19:19:35.957

这是使用 Native 与 HTML5 的简单案例。从技术上讲，没有什么可以阻止基于浏览器的解决方案变得与基于本机的解决方案一样强大，但它永远不会发生，原因如下： 供应商参与进来：Apple、Google 和 Microsoft 没有动力去实现这一点。想想看。如果他们将其完全标准化，那么他们的平台将几乎没有优势。让我们以消息传递为例。您能否拥有通过 HTML5 提供的最佳 Apple 或 Android 消息服务？当然可以，但是为什么平台供应商会走这条路呢？为什么他们会贬低 iOS SDK 或 Android SDK？所以这真的就像只在移动领域上演的浏览器大战。当浏览器大战开始时，每个人都认为超级浏览器会出现，但它从未出现，出于同样的原因，这次也不会。所以真的它不仅仅是一个技术问题，如它所描述的，开放与封闭。事实上，供应商不会以公开的方式提供他们最新最好的产品。这是大多数跨平台解决方案落后于供应商版本的原因之一。

另一个例子是对 WebGL 的支持。对 WebGL 的支持花费了比预期更长的时间。一旦有比 WebGl 更好的东西，它将首先以原生方式提供，然后 WebGL 最终将在所有浏览器中得到完全支持，在每个主流设备上。但是支持总是落后于原生的。关键是基于浏览器的总是会落后一步，因为这就是供应商喜欢它的方式。

另请注意，许多应用程序客户认为使用 HTML5 实际上更符合 web/internet 标准，而实际上本机应用程序使用 HTTP 就像 HTML5 应用程序一样。这是一种常见的误解，因为大多数原生应用程序都像 HTML5 应用程序一样通过 HTTP 使用服务访问。唯一的区别是您是在 javascript 与本机方式中处理请求和响应。

安全性是另一个需要考虑的重要问题，有多少安全应用程序正在使用 HTML5？我敢打赌，大多数进行安全交易的应用程序都是原生的，而且有充分的理由。

如果人们可以提供最近在 Android 或 iOS 中发布的功能的示例，以及对 PhoneGap 提供的这些功能的支持级别以及 PhoneGAP 在支持这些 sdk 功能方面的路线图，将会很有用。换句话说，当 SDK 的新版本出现时，PhoneGAP 并没有同步，Titanium 也没有。然而，PhoneGap 在我看来是原生解决方案的主要竞争者，因此它与原生解决方案的比较将是最有意义的。我认为将本机与跨平台的专有 SDK 进行比较是浪费时间。这永远不会吸引到足以让 PhoneGAP 或 Native 竞争金钱。

然而，对于那些对 PhoneGap 感到兴奋的人来说，请注意。内置插件可能存在于您需要的所有平台上，但如果您需要为 PhoneGap 编写自己的插件怎么办？（您将在 PhoneGAP 中了解 GAP 背后的真实故事）要么是因为您想做与现有插件完全不同的事情，要么是因为您想自定义现有插件。这不是一次写入无处不在的部署方案。您需要为每个想要该功能的平台编写一个自定义插件。换句话说，你又回到了原生状态。因此，您最好花时间仔细评估插件（在您将运行 HTML5 应用程序的所有平台上），并确保它们现在和将来都是您需要的。另一方面，没有 PhoneGAP 的 HTML5 非常不稳定，

另一点是，一个应用程序实际上可以通过多种方式进行交互，其中只有一种是使用 HTTP。它还经常需要以最佳方式与设备上的操作系统和资源进行交互。更不用说真正不关心使用什么底层技术但基于与许多原生应用程序交互而寄予厚望的用户。

当您运行 HTML5 应用程序时，您实际上是在另一个应用程序（即浏览器）中运行您的应用程序。浏览器应用程序仅在平台供应商允许的范围内强大。如果历史可以作为指导，它会发展，并且会添加更多功能，但永远不会优化，永远不会与所有其他供应商同步，并且出于技术和商业原因，永远不会与底层操作系统和 SDK 同步。

用户想要最好的体验，应该注意的是，虽然拥有 Android 的人很多，拥有 iPhone 和 iPad 的人也很多，但同时拥有两者的人相对较少。换句话说，Android 用户可能不太关心您的应用程序的 iOS 版本，而 iOS 用户可能不太关心您的 Android 应用程序。但用户真正关心应用程序如何在他们选择的平台上运行。他们不想要在两个平台上运行一半的东西，因为他们从来没有在两个平台上看到它。用户几乎总是一次在一个平台上体验该应用程序。

就原生解决方案与 HTML5 的定位而言，我认为这让决策者认识到，不仅原生开发者喜欢原生解决方案，平台供应商也喜欢原生解决方案，这意味着同步制作的更好、更高质量的应用程序随着操作系统的改进。反过来，这意味着快乐的应用用户拥有更好的移动体验。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:38:29.463

我想我可以在某种程度上理解你。我开发原生 Android 应用程序有一段时间了，我们在公司有很多关于跨平台开发的讨论。

根据我的经验，如果您想构建一些严肃的应用程序，许多移动跨平台解决方案（如 Phonegap、Appcelerator 或 Adob​​e Air）都会失败。也许这些解决方案在未来会变得更好。

目前我推荐以下用于开发移动应用程序：

*   非常简单的应用程序（只有几个视图），没什么特别的：去 Phonegap。简单的应用程序可以很好地与 phonegap 配合使用，并且您拥有“跨平台”解决方案。
*   所有稍微复杂一点的东西（大量的服务器通信、同步等）：选择 Native。在这种情况下，原生应用程序的 API/性能/调试工具通常比“跨平台参数”更有优势。

移动网站有点不同。在许多情况下，已经有一个“正常”的网站只需要针对移动设备进行清理和优化。在这种情况下，您可以使用可以节省大量时间的现有代码/接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:22:51.310

这类似于“未来哪一种编程语言会胜出？”的问题，或者（sotto voce）vi vs emacs。制作应用程序的方法不止一种。Native 有它的优势，HTML5 也有，这取决于问题和开发者的技能。我建议您熟悉这两种工作流程，这将使您更有资格在未来提出建议，并在可行的情况下接受他人的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T19:27:14.637

几个重要的其他问题。会有一种很棒的元编程方式吗？就像 Titanium 或 Java 背后的最初想法一样。此外，还有一些可以更好地在本地实现的东西，例如地图。此外，cpu、内存的增加使得一些支持原生的论点变得不那么相关。

# objective-c - ios中的日文和中文字符

> ID：11476014
> 
> 赞同：0
> 
> 时间：2012-07-13T18:12:54.350
> 
> 标签：objective-c, ios, character-encoding, nsarray

我只是有一个错误，至少在 Xcode 中有所不同。我试图在应用程序的几句话中支持另一种语言，当用户选择更改应用程序访问的语言只是另一个 NSArray 索引时。发生的事情是其中一种语言是日语，跑了几句话，其他人简单地给我回了以下内容：

```
 (
    "\U5f62\U5f0f",
    "\U9023\U63a5\U5230\U5176\U4ed6\U5730\U65b9",
    "\U884c\U674e\U8a8d\U9818",
    "\U9322"
) 
```

原来的 NSArray 是：

```
JapaneseTableTitles = [[NSArray alloc]initWithObjects:@"あなたが聞こえます",@"便利なフレーズ",@"語彙",@"対話",@"情報", nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:17:16.433

你`NSLog`搞定了吗？这是正确的，因为它们只是日文/中文字符的 Unicode 代码点。如果您确实在 UI 中呈现这些 NSString（例如在 UILabel 中），它们应该会正确显示。

```
"\U5f62\U5f0f" = "形式"
"\U9023\U63a5\U5230\U5176\U4ed6\U5730\U65b9" = "連接到其他地方"
"\U884c\U674e\U8a8d\U9818" = "行李認領"
"\U9322" = "錢" 
```

# java - Java Hibernate 注解（@JoinTable、@Filter）

> ID：11476020
> 
> 赞同：0
> 
> 时间：2012-07-13T18:13:18.070
> 
> 标签：java, sql, hibernate, annotations, jointable

我最近开始使用 Hibernate，并试图了解所有注释并确保我做事正确。我有两个类似于下面的表'user'和'user_friends'

```
+------+------+-------+------+
| id   | name | email | etc. |
+------+------+-------+------+ 
```

和用户朋友表

```
+--------+---------+----------+
| userid | buddyid | accepted |
+--------+---------+----------+ 
```

现在在 SQL 中，我运行了一个看起来类似于

```
SELECT u.id AS id, u.name AS username, u.email AS email FROM user_friends 
INNER JOIN users AS u ON u.id = '1' WHERE buddyid = '2' AND ACCEPTED = 1 UNION ALL 
SELECT u.id as id, u.name AS username, u.email AS email FROM user_friends
INNER JOIN users AS u ON u.id = '2' WHERE buddyid = '1' AND ACCEPTED = 1; 
```

我在 Java 设置中有两个类，其方式与此类似

```
@Entity
@Table(name="users")
public class User {

  @Id
  @GeneratedValue
  private int id;

  private int name;
  private int email;

  private DateTime registerDate;
  private DateTime lastActivity;

  private int currency;
  private int seasonCurrency;

  @OneToMany(fetch=UserBuddy.class, mappedBy="user", fetch=FetchType.LAZY)
  @JoinColumn(name="userid")
  @Filter(name="messengerBuddyFilter", condition="accepted=1")
  private Set<UserBuddy> _buddies;
}

@Entity
@Table(name="user_friends")
public class UserBuddy {

   private int id;
   private int name;
   private int email;
} 
```

我之前问过这个问题，但仍然无法按照我的意愿进行工作。我需要能够返回一组 UserBuddy.class，其中包含该好友的姓名和电子邮件，没有其他内容，而不是他们的注册时间等（通过使用 User 类进行映射）。我也很难确保它只返回接受请求的好友（ACCEPTED=1）

任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:51:03.950

如果您使用 JPA（并且使用 hibernate 和 JPA 的命名本机查询存在问题），则需要使用本机查询；如果仅使用纯休眠，则需要使用 IIRC sql 查询。

这可能会奏效......只要快速完成，就可以将其作为开始的地方。假设您在 JPA 中有一个名为 em 的实体管理器，定义为类成员变量

```
@PersistenceContext(unitName = "MyPersistenceUnit_PU")
private EntityManager em; 
```

...

某种方法...

```
List<UserBudy> buddyList = new <>ArrayList();
Query q = createNativeQuery("SELECT u.id AS id, u.name AS username, u.email AS email "
                          + "FROM user_friends "
                          + "INNER JOIN users AS u "
                          + "ON u.id = '1' "
                          + "WHERE buddyid = '2' "
                          + "AND ACCEPTED = 1 "
                          + "UNION ALL "
                          + "SELECT u.id as id, u.name AS username, u.email AS email "
                          + "FROM user_friends "
                          + "INNER JOIN users AS u "
                          + "ON u.id = '2' "
                          + "WHERE buddyid = '1' "
                          + "AND ACCEPTED = 1");
List<UserBudy> buddyList = (List<UserBudy>)em.getResultList); 
```

此示例不是“命名”本机查询。这是内联完成的，类似于 POJDBC（普通的旧 jdbc）。就像我说的那样，如果您要尝试使用 JPA 和 Hibernate 创建 NamedNativeQuery，您会得到“一些尚未实现的异常”。Hibernate 永远不支持使用 JPA 的命名本机查询。它仍然在某个地方的错误跟踪器中（已经有 5 或 6 年了），看起来他们并没有在修复它时给老鼠屁股。总的来说，我在使用 PostgreSQL 时使用 Hibernate 时遇到的问题比使用 Eclipselink 时要少，所以我现在可以忍受它。:)

IIRC 如果您要使用纯休眠来执行此操作，您将创建一个休眠会话对象而不是 JPA EM 对象，并改用 createSQLQuery。除此之外几乎相同。

IE

```
session.createSQLQuery("..."); 
```

如果这还不够帮助，那么您现在至少应该有足够的信息来解决这个问题。

如果您想在使用纯 JPA 后尝试一下，这里有一个链接。在本文的一半处查找“行项目摘要”示例。

[http://www.oracle.com/technetwork/articles/vasiliev-jpql-087123.html](http://www.oracle.com/technetwork/articles/vasiliev-jpql-087123.html)

请记住，当您处理 JPA 时，您是在加入实体，而不是表。无论如何，那篇文章是我发现的最清晰的文章之一，它展示了它是如何工作的。问候。

# permissions - SalesForce/PaymentConnect 来宾用户如何编辑存储的记录？

> ID：11476025
> 
> 赞同：1
> 
> 时间：2012-07-13T18:13:40.747
> 
> 标签：permissions, salesforce, sandbox

因此，对于我现在的站点，我的站点用户、PaymentConnect 用户和 Linvio 用户都使用访客许可证。结果，他们似乎都没有编辑/删除权限。网站上的来宾用户如何编辑存储的销售人员记录（例如联系人），如果有可能的话？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:05:48.217

鲜为人知的秘密，如果您没有在 VF 页面控制器中使用绑定的 sObject 直接更新，而是使用一堆通用属性来表示 sObject 字段，那么您曾经能够解决更新标准对象的限制，然后在您的控制器中实例化一个新的标准 sObject 并将值（包括 Id）设置为您要更新的字段并调用更新。我不确定 Salesforce 是否随后将其锁定，但它正在工作。您的控制器也必须不共享才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:33:51.920

站点用户只能拥有对标准对象的读取和创建权限（一些标准对象甚至更加锁定）。但是，您可以完全控制对任何自定义对象的访问。更改站点用户的权限

1.  点击您的姓名 | 设置 | 开发 | 网站。
2.  单击要控制的站点的名称。
3.  单击公共访问设置以打开站点配置文件的配置文件页面。

来源：[网站公共访问设置](http://na3.salesforce.com/help/doc/en/sites_public_access_settings.htm)

# ios - 如何实现一个控件，该控件用多种样式包装文本并允许对单个文本组件进行触摸操作？

> ID：11476028
> 
> 赞同：0
> 
> 时间：2012-07-13T18:13:51.230
> 
> 标签：ios, uitableview, word-wrap

我附上了一张从 Trover iOS 应用程序拍摄的照片。它显示了一个表格单元格，为已发布的项目（trove？）呈现用户评论。我正在尝试实现类似的功能，但不清楚什么是好的实现方法。

要求是：

1）不同样式的文本组件可以在一个矩形内渲染并换行成多行

2) 每个文本组件都可以有它自己的“选中”状态和触摸动作（比如 UIButton）

3）可以计算控件的整体高度（用于计算单元格高度时的UITableViewCell中）。

来自 Trover 的示例图片（公共数据，所以我没有掩盖用户名）：

![流浪者图片](../Images/051cde4c422c7445b6e4e0a5727cf05e.png)

感谢您的任何帮助/建议！如果有人能指出我，我会喜欢任何类似的示例实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:17:58.243

为了以不同的方式格式化文本（因为名称是粗体和不同的颜色），最简单的方法是将 a 嵌入`UIWebView`到单元格中，并将文本格式化。您可以将超链接（`<a>`标签）与您拦截的一些格式化链接一起使用

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

显然返回`NO`以防止 webview 加载非常不正确的链接，但您可以解析该链接以确定单击的内容（它是用户名吗？是谁的用户名？），并相应地继续导航

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:58:50.763

答案是使用 NSAttributedStrings 和 Core Text 进行渲染。有一些控件可以使这更容易，例如[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)和[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)。

# php - 创建新数据库时更改 MongoDB sizeOnDisk

> ID：11476029
> 
> 赞同：1
> 
> 时间：2012-07-13T18:13:54.023
> 
> 标签：php, mongodb, mongodb-php, nosql

我使用 PHP 创建 MongoDB 数据库。我的问题是每次创建数据库时，数据库的“磁盘大小”大约为 200MB。我想每次将它减少到 25-50MB。

我尝试使用“命令”并在`.conf`文件中查找 MongoDB，但没有运气。

如果有帮助，我会运行 CentOS 6.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:56:47.410

如果您运行该命令`mongod --help`，您将看到在启动 MongoDB 时可以添加的各种选项。您可能想要研究的两个是：

```
 --noprealloc                disable data file preallocation - will often hurt
                              performance
  --smallfiles                use a smaller default file size 
```

# emacs - 制作像windows一样的emacs键盘快捷键

> ID：11476033
> 
> 赞同：3
> 
> 时间：2012-07-13T18:14:14.310
> 
> 标签：emacs

我花了很多时间，而且我的工作效率很高，我的肌肉记忆在 Windows 上浏览文本文件时效果很好。现在我在使用 emacs，我发现我的工作效率严重下降。

例如，在 Visual Studio 中要移动到下一个单词，您键入 Ctrl + 右箭头，然后按 Ctrl + 左箭头移动到上一个单词。我都认为这比 Mb 和 Mf 更自然，而且更容易，因为它是其他系统使用的（想想，word docs，或键入电子邮件或 Stack 问题时的文本框）。

有没有一种简单的方法来配置 emacs 键盘快捷键以映射到其他系统的快捷键？

# php - 双引号打破jQuery（非常简单）

> ID：11476038
> 
> 赞同：0
> 
> 时间：2012-07-13T18:14:36.963
> 
> 标签：php, javascript, jquery

```
 <?

    //SQL SELECT HERE

    $result = mysql_query($sql);

    $options = '';
    while ($row = mysql_fetch_array($result)) {
        $options .= '<option>Data: ' . $row['data'] .'</option>';
    }
    ?>
    $("#multiSelect").html("<?=$options?>"); 
```

以上是内联在 javascript 函数中的 PHP 查询。它的目标是填充多选。问题是当 $row['data'] 包含带有双引号的内容时，jQuery 不喜欢它并抱怨。当我删除包含双引号的行时，它工作正常。

我怎样才能解决这个问题？这是jQuery的正常行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:19:00.507

尝试添加斜杠：http: [//php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:21:16.560

这是因为您的来电是这样的：

```
$("#multiSelect").html(""Hello""); 
```

大多数编程语言都会遇到问题 - 他们假设您添加的第一个引号结束您正在传递的字符串，并且下一个文本应该是一段有效的代码。

您可以通过转义引号、删除它们或将它们替换为其他内容来解决它：

```
$("#multiSelect").html("<?=addslashes($options)?>");    
$("#multiSelect").html("<?=str_replace('"', '', $options)?>");    
$("#multiSelect").html("<?=str_replace('"', '\'', $options)?>"); 
```

取决于输入文本可能是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:20:11.650

为什么为什么为什么你会用后面的代码构建选项，而不是用 jQuery 设置它？为什么 PHP 不能自己设置？

您需要使用 \ 转义引号

```
"Man it is \"hot\" in here" 
```

# java - TableColumnExt 不尊重原型值

> ID：11476039
> 
> 赞同：2
> 
> 时间：2012-07-13T18:14:37.320
> 
> 标签：java, swing, swingx, jxtreetable

我正在尝试使用 SwingX 的`TableColumnExt`类来为 a 的分层列中列的宽度设置原型值`JXTreeTable`。在我初始化模型和表之后，我这样做：

```
TableColumnExt column = dataTable.getColumnExt(0);            
column.setPrototypeValue(500); 
```

当我的表被渲染时，所有列的大小都是一样的。这些是我在`JXTreeTable`实例上使用的方法。

```
dataTable.setRowHeight(28);
dataTable.setFillsViewportHeight(true);
dataTable.setHorizontalScrollEnabled(true); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:06:37.620

正如我在评论中已经提到的，[这是一个错误](http://java.net/jira/browse/SWINGX-1509)。问题是多方面的：

*   负责测量原型尺寸要求的代码是 ColumnFactory.calcPrototypeWidth
*   它通过使用给定原型配置表返回的渲染器并测量其 prefSize 来实现
*   使用黑魔法将分层列的呈现委托给 JTree
*   默认工厂不知道那个黑魔法，因此查询独立于原型的 JTree 的 prefSize
*   第一个想法：让工厂知道分层列的特殊渲染，然后走到真正的底层treeCellRenderer - 不起作用，再次由于其他一些内部黑魔法
*   由于设置原型而导致的自动列大小调整在 JXTable 中被破坏（[问题 #1510](http://java.net/jira/browse/SWINGX-1510)）

解决方法涉及

*   一个自定义的 ColumnFactory，它知道分层列的特殊渲染器（== JXTree））
*   对于分层列，配置和测量 TreeCellRenderer - 不是树本身使用的，而是不相关的虚拟对象
*   设置原型后，手动触发列的大小评估

下面是一个自定义的 ColumnFactory 及其用法（未经正式测试，因此请谨慎使用 :-)。

```
// a custom factory
ColumnFactory factory = new ColumnFactory() {

    @Override
    protected int calcPrototypeWidth(JXTable table,
            TableColumnExt columnExt) {
        if (isHierarchicalPrototype(table, columnExt))  {
            return calcHierarchicalPrototypeWidth((JXTreeTable) table, columnExt);
        }
        return super.calcPrototypeWidth(table, columnExt);
    }

    protected boolean isHierarchicalPrototype(JXTable table,
            TableColumnExt columnExt) {
        return (table instanceof JXTreeTable) 
                && ((JXTreeTable) table).getTreeTableModel().getHierarchicalColumn() == 
                         columnExt.getModelIndex()
                && columnExt.getPrototypeValue() != null;
    }

    TreeCellRenderer dummy = new DefaultTreeCellRenderer();
    protected int calcHierarchicalPrototypeWidth(JXTreeTable table,
            TableColumnExt columnExt) {
        JXTree renderer = (JXTree) getCellRenderer(table, columnExt);
        // commented lines would be the obvious step down into the "real" sizing
        // requirements, but giving reasonable result due to internal black magic
        // TreeCellRenderer treeRenderer = renderer.getCellRenderer();
        // Component comp = treeRenderer.getTreeCellRendererComponent(renderer, 
              columnExt.getPrototypeValue(), false, false, false, -1, false);
        // instead, measure a dummy
        Component comp = dummy.getTreeCellRendererComponent(renderer, 
                columnExt.getPrototypeValue(), false, false, false, -1, false);

        return Math.max(renderer.getPreferredSize().width, comp.getPreferredSize().width);
    }

};

// usage: first create the treeTable, set the factory and set the model
JXTreeTable table = new JXTreeTable();
table.setColumnFactory(factory);
table.setTreeTableModel(new FileSystemModel());
// set the prototype
table.getColumnExt(0).setPrototypeValue("long longer longest still not enough to really see" +
           " some effect of the prototype if available");
// Issue #1510: prototype value handling broken in underlying JXTable
// need to manually force the config
table.getColumnFactory().configureColumnWidths(table, table.getColumnExt(0)); 
```

# mysql - 平均每 10 分钟的数据，并删除其余数据

> ID：11476047
> 
> 赞同：0
> 
> 时间：2012-07-13T18:15:00.707
> 
> 标签：mysql

例如，我有一张桌子，上面有给定时间房间里的人数

```
room_color    people    time
red           100       2012-07-13 11:11:11
red           120       2012-07-13 11:14:12
red           130       2012-07-13 11:17:13
green         ... etc 
```

如何求10分钟间隔内房间的平均人数，例如总结11:10红房间的人数为~117

我知道一些方法可以做到这一点，但这都涉及创建一个新表，我如何在不创建新表的情况下做到这一点？我只是想删除不相关的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:28:27.903

```
Insert into room (room_color, people)
( Select color, avg(people) as people from room 
where time between '2012-07-13 11:10' and '2012-07-13 11:20'
Group by room_color )

Delete From room where time between '2012-07-13 11:10' and '2012-07-13 11:20'

-- in case of need set some time to the table
update room set time = '2012-07-13 11:10' Where time is null 
```

试试这个，如果你愿意，你可以使用两个日期时间变量并加到一个 10 分钟。使用 between 子句中的变量。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:26:05.223

```
INSERT INTO roomstats
SELECT room_color,AVG(people), '2012-07-13 11:10:00'
FROM roomstats
WHERE room_color = 'red'
    AND DATE(time) = CAST('2012-07-13' AS DATE)
    AND TIME(time) >= CAST('11:10:00' AS TIME)
    AND TIME(time) <= CAST('11:20:00' AS TIME); 
```

无法测试这个，因为我正在我的手机上写它，在火车上。希望能帮助到你！稍后会测试。

# wpf - 停止 TextBlock 调整容器 WPF 的大小

> ID：11476054
> 
> 赞同：0
> 
> 时间：2012-07-13T18:15:29.113
> 
> 标签：wpf, xaml, wpf-controls

我有一个根据窗口大小改变大小的列表框。对于列表框中的每个项目，它包含（通过 DataTemplate）：

```
<Grid Height="20" HorizontalAlignment="Stretch">
            <ProgressBar HorizontalAlignment="Stretch" Height="20" Value="{Binding Path=Progress, Mode=OneWay}" />
            <TextBlock Margin="7,0,0,0" Text="{Binding Path=OperationTitle}" />

        </Grid> 
```

进度条应该扩展到列表框的大小，除非文本块中的文本比列表框长，否则它们会这样做。在这种情况下，文本块和进度条变得比列表框更宽，并且水平滚动条出现在列表框的底部。

我希望进度条和文本块与列表框允许的一样宽，并且如果文本块中的文本比列表框长，则将其截断。

目前，进度条的宽度在一种情况下由其容器控制，在另一种情况下由其内容控制。我希望它始终是其容器的控制器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:28:33.000

嗨，如果我没有误解你的问题，试试这个

```
 <Grid Height="20" HorizontalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto" MaxWidth="100"/>
        </Grid.ColumnDefinitions>
        <ProgressBar HorizontalAlignment="Stretch" Height="20" Value="{Binding Path=Progress, Mode=OneWay}" Grid.Column="0" />
        <TextBlock Margin="7,0,0,0" Text="OperationTitle" Grid.Column="1" />
</Grid> 
```

我希望这会有所帮助，并且不要忘记相应地设置网格第二列的 maxWidth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:30:51.523

尝试将下一个属性添加到列表框

```
HorizontalContentAlignment="Stretch" 
```

# php - 使用 PHPWord 自动下载文件附件

> ID：11476058
> 
> 赞同：15
> 
> 时间：2012-07-13T18:15:36.090
> 
> 标签：php, phpword

我正在尝试使用 PHPWord 生成 word 文档。并且可以成功生成文档。但是有一个问题是我生成的word文档会保存在服务器上。我怎样才能使它可以立即下载？

样本：

```
$PHPWord = new PHPWord();
//Searching for values to replace
$document = $PHPWord->loadTemplate('doc/Temp1.docx');
$document->setValue('Name', $Name);
$document->setValue('No', $No);
$document->save('php://output'); //it auto save into my 'doc' directory. 
```

我如何链接到标题以下载它，如下所示：

```
header("Content-Disposition: attachment; filename='php://output'"); //not sure how to link this filename to the php://output.. 
```

好心提醒。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T18:25:29.137

[`php://output`](http://php.net/manual/en/wrappers.php.php)是一个只写流，它写入您的屏幕（如`echo`）。

~~因此，`$document->save('php://output');`不会将文件保存在服务器上的任何位置，它只会将其回显。~~

似乎, `$document->save`, 不支持流包装器，所以它确实创建了一个名为`"php://output"`. 尝试使用另一个文件名（我建议使用临时文件，因为您只想将其回显）。

```
$temp_file = tempnam(sys_get_temp_dir(), 'PHPWord');
$document->save($temp_file); 
```

在 中`header`，该`filename`字段是 PHP 告诉浏览器文件的名称，它不必是服务器上文件的名称。这只是浏览器将其保存为的名称。

```
header("Content-Disposition: attachment; filename='myFile.docx'"); 
```

所以，把它们放在一起：

```
$PHPWord = new PHPWord();
//Searching for values to replace
$document = $PHPWord->loadTemplate('doc/Temp1.docx');
$document->setValue('Name', $Name);
$document->setValue('No', $No);
// // save as a random file in temp file
$temp_file = tempnam(sys_get_temp_dir(), 'PHPWord');
$document->save($temp_file);

// Your browser will name the file "myFile.docx"
// regardless of what it's named on the server 
header("Content-Disposition: attachment; filename='myFile.docx'");
readfile($temp_file); // or echo file_get_contents($temp_file);
unlink($temp_file);  // remove temp file 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-22T09:42:39.023

```
$objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');

$filename = 'MyFile.docx';

$objWriter->save($filename);

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.$filename);
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($filename));
flush();
readfile($filename);
unlink($filename); // deletes the temporary file
exit; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-18T18:32:35.343

这对我有用：

```
$objWriter = \PhpOffice\PhpWord\IOFactory::createWriter($phpWord, 'Word2007', $download = true);

header("Content-Disposition: attachment; filename='File.docx'");

$objWriter->save("php://output"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-25T04:51:06.167

现在是 0.13.0 版 [https://github.com/PHPOffice/PHPWord](https://github.com/PHPOffice/PHPWord)

```
<?
require_once "../include/PHPWord-develop/bootstrap.php";

$templateProcessor = new \PhpOffice\PhpWord\TemplateProcessor('template.docx');

$templateProcessor->setValue('var01', 'Sun');
$templateProcessor->setValue('var02', 'Mercury');

//#####################################################
// Save File
//#####################################################
//#####################################################
header("Content-Disposition: attachment; filename='output01.docx'");
  $templateProcessor->saveAs('php://output');
//#####################################################
//#####################################################
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-11T03:29:45.710

抱歉，这是后来出现的。我在尝试解决同样的问题时偶然发现了这一点。我能够使用以下方法在 Laravel 5 上运行它：

```
 $file_dir = $template_upload_dir.DIRECTORY_SEPARATOR.'filename.docx';
    $tags = array();
    if (file_exists($file_dir)) {
        $templateProcessor = new TemplateProcessor($file_dir);
        $tags = $templateProcessor->getVariables();
        $replace = array(''); 

        $templateProcessor->setValue($tags, $replace);
        $save_file_name = $fullname.'-'.$inv_code.'-'.date('YmdHis').'.docx';
        $templateProcessor->saveAs($save_file_name);

        return response()->download($save_file_name)->deleteFileAfterSend(true);
    } 
```

希望它可以帮助某人！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-19T22:27:14.627

```
// Save File
$objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
header("Content-Disposition: attachment; filename='myFile.docx'");
$objWriter->save("php://output"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-11T14:09:19.417

基于@user3214824 答案的 Laravel 简单解决方案。

```
// ...    
$objWriter = \PhpOffice\PhpWord\IOFactory::createWriter($PHPWord, 'Word2007');
$doc_name = 'fileName.docx';
$objWriter->save($doc_name); // saving in the public path just for testing

return response()->download(public_path($doc_name))->deleteFileAfterSend(true); 
```

# ssh - bin/sh、bin/bash、sbin/nologin、bin/tcsh 等有什么区别？

> ID：11476061
> 
> 赞同：18
> 
> 时间：2012-07-13T18:15:48.937
> 
> 标签：ssh, plesk

我是 linux 新手，所以请放轻松，慢慢说 =)

在 Plesk 中，我有一些通过 SSH 访问服务器的选项。我只想连接，添加我的公钥并运行 rsync 进行备份。

1.  这些选项有什么区别？
2.  我应该选择哪个选项？
3.  这些是什么？它们对我来说就像目录。

通过 SSH 访问服务器：

*   /bin/sh
*   /bin/bash
*   /sbin/nologin
*   /bin/tcsh
*   /bin/csh
*   /bin/ksh
*   /bin/bash (chroot)
*   /bin/rbash

这是 Plesk 控制面板的图像：

![在此处输入图像描述](../Images/2875cb32b40617893d9f488bb9d8d0b3.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-13T18:36:18.097

**使用 /bin/bash**

> 这些是什么？它们对我来说就像目录。

这些是为通过 SSH 连接的用户提供的默认 shell 的不同选项

如果您以前没有使用过这些 shell，我认为 bash 是您的最佳选择。大多数在线 Linux 命令的教程和文章都假设您使用的是 bash。

但是，对于 bash，您有两个选项：`/bin/bash`和`/bin/bash (chrooted)`.

要进行备份，您可能需要 bash 具有执行所有命令的完全访问权限。我不确定您是否可以使用 chrooted bash 完成您想要完成的工作。

基本上，chrooted bash 是为了避免意外。

要了解有关 chrooting 的更多信息，您可以阅读[这篇文章](https://www.debian.org/doc/manuals/securing-debian-manual/chroot-ssh-env.en.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T18:17:36.963

大多数选项是各种[Unix shell](http://en.wikipedia.org/wiki/Unix_shell)。外壳基本上是解释您在窗口中键入的文本。有些人更喜欢一个外壳而不是其他外壳。如果您不熟悉任何外壳，请根据您的需要选择一个[比较图表](http://en.wikipedia.org/wiki/Comparison_of_command_shells)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-13T18:18:31.113

如果你不知道，你应该使用 /bin/bash。它是最受欢迎的，也是最容易获得帮助的。也就是说，他们都做同样的事情，只是方式略有不同。

# android - 只显示一次 toast -Android

> ID：11476065
> 
> 赞同：0
> 
> 时间：2012-07-13T18:16:17.257
> 
> 标签：android

我正在android中开发一个应用程序。我希望在首次创建活动时只显示一次吐司，但每次屏幕方向更改时都会显示吐司......知道如何做到这一点......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:21:23.557

当用户改变屏幕方向时，默认情况下，Activity 会被完全销毁并重新创建。

[您可以通过自己处理更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)来覆盖此行为。

对于像吐司这样简单的事情，这是很多工作。通常，只有当您的活动需要进行大量初始化时，您才会这样做，例如打开大型数据库、建立网络连接等。

如果它真的像烤面包一样简单，并且会保持这种状态，那么只需在显示烤面包后设置首选项，并在显示前检查首选项的值。

# python - FRIENDS 表数据存储设计 + App Engine Python

> ID：11476066
> 
> 赞同：0
> 
> 时间：2012-07-13T18:16:17.570
> 
> 标签：python, google-app-engine, google-cloud-datastore

在我的应用程序中，我们需要在数据存储区中开发一个 FRIENDS 关系表。当然，我想到的一个快速解决方案是：

```
user     = db.ReferenceProperty(User, required=True, collection_name='user')
friend   = db.ReferenceProperty(User, required=True, collection_name='friends') 
```

但是，当朋友列表增长到一个巨大的数字，比如几千或更多时会发生什么？这会不会太低效了？

性能始终是我们的首要任务。这是非常需要的，因为我们将没有更多的东西来遵循这种类似的关系设计。

请就在 App Engine Python 环境中使用数据存储区设计 FRIENDS 关系表的最佳方法提供建议。

**EDIT** 除了 FRIENDS 关系，FOLLOWER 关系也将被创建。而且我相信大多数时候所有这些关系都足以成为查询，因为我的应用程序倾向于面向社交媒体的原因。

例如，如果我关注一些用户，我将获得关于他们将要做什么等的新闻提要更新。随着时间的推移，活动会增加。至于有多少用户，我还不能回答，因为我们还没有上线。但我预计随着我们的发展，将会有数百万用户。

希望这将有助于获得更具体的建议，或者是否有替代这种方法的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:09:53.817

您的 FRIENDS 模型（可能还有您的 FOLLOWERS 模型）应该可以很好地扩展。系统中最棘手的部分实际上是聚合来自用户所有朋友和关注者的内容。

由于您在帖子中描述的表格，查询用户列表是 O(N)，其中 N 是朋友的数量。但是，这些查询中的每一个都需要另一个 O(N) 操作来检索朋友共享的内容。每次用户想要查看最近的内容时，这都会导致 O(N^2)。这个特定的查询不好有两个原因：

1.  在为数百万用户设计系统时，您不想在核心算法中看到 O(N^2) 操作。
2.  App Engine 倾向于限制这些类型的查询。具体来说，`IN`您需要使用的关键字来获取共享项目列表不适用于超过 30 个朋友。

对于这个特殊问题，我建议创建另一个表，将每个用户链接到每个共享内容。像这样的东西：

```
class SharedItems(db.Model):
  user = db.ReferenceProperty(User, required=True) # logged-in user
  from = db.ReferenceProperty(User, required=True) # who shared it
  item = db.ReferenceProperty(Item, required=True) # the item itself
  posted = db.DateTimeProperty() # when it was shared 
```

当需要渲染更新流时，您需要一个 O(N) 查询（N 是您要显示的项目数）来查找与用户共享的所有项目（按日期降序排列）。保持 N 小以使其尽可能快。

共享一个项目需要创建 O(N) `SharedItems`，其中 N 是发布者拥有的朋友和关注者的数量。如果这个数字太大而无法在单个请求中处理，请将其分片到任务队列或后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T06:22:42.580

propertylist 是在 GAE 中获得廉价/简单索引的好方法。但正如您正确识别的那样，存在一些限制。

1.  整个实体的索引大小是有限的（我认为目前是 5000）。所以每个 propertyList 值都需要一个索引。所以基本上属性列表大小<4999

2.  这么大的财产清单的连载是昂贵的！带回一个 2Mb 的实体很慢……而且会消耗 CPU。

如果期望一个大的 propertyIndex 那就不要这样做。

另一种方法是创建一个对关系建模的 JOIN 表

```
 class Friends(db.Model):
  user = db.ReferenceProperty(User, required=True) # logged-in user
  from = db.ReferenceProperty(User, required=True) # who shared it 
```

只是一个有 2 个键的实体。这允许简单的查询来查找用户的所有朋友。

```
select from friends where user = : me 
```

找到我是朋友的所有用户。

```
select from friends where friend = : me 
```

因为它返回一个密钥，你可以做一个批量 get(keylist) 来获取实际的朋友详细信息。

# php - 使用动态变量 PHP 列表调用函数

> ID：11476067
> 
> 赞同：1
> 
> 时间：2012-07-13T18:16:18.147
> 
> 标签：php, dynamic, function-calls

假设我有功能：

```
<?php
function myFunction($param1, $param2, /*0 or more extra args*/) {
  // do something with $param1 & $param2
  $args = func_get_args();
  $other_args = array_slice($args, 2); // get the dynamic args
  // do something with $other_args
}
?> 
```

这可以调用：

```
<?php
myFunction($param1, $param2); // or
myFunction($param1, $param2, $param3); // or
myFunction($param1, $param2, $param3, $param4);
?> 
```

但我想知道是否可以获取一个 args 数组并将它们传递给函数，例如：

```
<?php
$extra_args = array($param3, $param4); // this could also be
$extra_args = array($param3, $param4, $param5); // or any length array
?> 
```

我想将它们作为单独的参数传递到我的函数中，例如

```
<?php
myFunction($param1, $param2 /* other args split up */);
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:21:13.737

是的- `call_user_func_array()`'。

[http://www.php.net/manual/en/function.call-user-func-array.php](http://www.php.net/manual/en/function.call-user-func-array.php)

接受两个参数——函数名（作为一个字符串——或者可能，在 PHP >= 5.3 中，一个匿名函数，不确定）和一个参数数组。

或者对于方法，`forward_static_call_array()`

[http://www.php.net/manual/en/function.forward-static-call-array.php](http://www.php.net/manual/en/function.forward-static-call-array.php)

PHP 对 JS 的回答`function.prototype.apply()`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:21:20.210

```
call_user_func_array('myFunction', 
    array_merge(
       array($param1,$param2),
       $extra_args)); 
```

# python - 为什么我的 Python 函数在控制台中有效，但在代码中调用时无效？

> ID：11476071
> 
> 赞同：2
> 
> 时间：2012-07-13T18:16:45.097
> 
> 标签：python, python-3.x

我正在尝试通过解决 Project Euler 网站上的问题来学习 Python。我确切地知道我想让我的代码做什么，我的方法在纸上有效，但我无法让代码工作。

GitHub链接：[https ://github.com/albyr/euler-python/blob/master/euler3.py](https://github.com/albyr/euler-python/blob/master/euler3.py)

我创建了两个函数，一个计算目标数的因数，一个检查给定数是否为素数。

```
# Function that finds all the factors of a given number
def findfactors(n):
    # for i in range(1,int(sqrt(n)+1)):
    for i in range(1,n+1):
        if n/i == int(n/i):
            factors.append(i)

# Function that checks if a number is prime
def checkprime(n):
    # Trial division
    for i in range(2,int(sqrt(n)+1)):
        if n/i == int(n/i):
            # Number gives a remainder upon division and therefore is not prime
            isprime = False
            break
        else:
            isprime = True
    if isprime == True:
        return True
    elif isprime == False:
        return False 
```

我敢肯定，对于专家来说，代码看起来很糟糕。但如果我使用 Python shell，它就可以工作：

```
>>> checkprime(9)
False
>>> checkprime(79)
True
>>> checkprime(factors[3])
True 
```

但是当我用 F5 运行程序时，我得到：

```
Traceback (most recent call last):
  File "/home/alby/euler-python/euler3.py", line 45, in <module>
    checkprime(factors[i])
  File "/home/alby/euler-python/euler3.py", line 32, in checkprime
    if isprime == True:
UnboundLocalError: local variable 'isprime' referenced before assignment 
```

如果我从程序中使用硬编码的数字（例如 `checkprime(77)`）调用 checkprime 函数，我根本不会得到任何输出。我确信这是我不理解的 Python 工作方式的基本原理，但我终其一生都无法弄清楚是什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:22:18.710

在您的 Github 代码中，我们可以看到您正在尝试调用`checkprime(1)`（在通过最后一个循环的第一次迭代中）。

```
# Check each factor to see if it is prime or compound
for i in range(0,len(factors)):
    print (factors[i])
    # Why can't I call checkprime here, like this? It works in the console.
    checkprime(factors[i]) 
```

但看看你的代码：

```
def checkprime(n):
    # Trial division
    for i in range(2,int(sqrt(n)+1)):
        if n/i == int(n/i):
            # Number gives a remainder upon division and therefore is not prime
            isprime = False
            break
        else:
            isprime = True 
```

If `n = 1`, then`range(2, int(sqrt(1)+1))`是`range(2,2)`空的...所以`isprime`永远不会被设置，因为循环体永远不会运行。

请记住，参数`range()`是*半开*区间 -是“从 x 开始并在 y*之前*`range(x,y)`结束的整数”。因此和。*`range(2,3) = [2]``range(2,2) = []`*

 *这里的另一个问题是作为第一个因素`findfactors()`返回`1`- 这可能不是你想要的：

```
def findfactors(n):
    # for i in range(1,int(sqrt(n)+1)):
    for i in range(1,n+1): 
```

对于素数分解检查，您可能希望从 开始`2`，而不是`1`（因为一切都可以被 1 整除）。

* * *

此外，此代码是多余的：

```
if isprime == True:
        return True
    elif isprime == False:
        return False 
```

你真的可以把它写成......

```
return isprime 
```

或者您可以更好地迈出一步，并且一开始就不要使用-`isprime`只需替换`isprime = True`为`return True`和`isprime = False`。`return False`

`int(n/i)`最后， is的简写`n // i`- Python 的`//`运算符进行整数除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:21:54.953

在无输出打印方面，只需`print(checkprime(77))`在从 F5 运行时使用，您应该会得到输出。从调用运行时，python 默认不打印任何内容（或者至少只打印最后一个命令）。*

# iphone - Iphone - UISwitch 在退出时关闭

> ID：11476073
> 
> 赞同：0
> 
> 时间：2012-07-13T18:16:53.407
> 
> 标签：iphone, uiswitch

当应用程序进入后台时，我想将开关设置为关闭。我正在尝试使用以下代码来做到这一点。它不起作用:(当我恢复应用程序时，屏幕上的动画开关仍然“打开”。我该如何解决这个问题？

```
- (void)applicationWillResignActive:(UIApplication *)application {
    [registrationSwitch setOn:NO animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:30:40.630

您需要在 userDefaults 中设置该值。添加一个布尔检查，如：

```
if (userDefaultBool == 1){
registrationSwitch setOn
}

else{
registration setOff
} 
```

把它放在你的`viewDidLoad`

# matlab - 匹配数据样本matlab

> ID：11476074
> 
> 赞同：1
> 
> 时间：2012-07-13T18:16:54.100
> 
> 标签：matlab, data-binding, cluster-analysis, matching

好的，这听起来真的很令人困惑，但我会尽力让它足够清楚。我有一个完整的数据集，称为`fulldata`这个数据集是`494021x6`.

我像这样使用svds（奇异值分解）：

```
%% dimensionality reduction 
columns = 6
[U,S,V]=svds(fulldata,columns); 
```

然后我从以下随机选择 1000 行`fulldata`：

```
%% randomly select dataset
rows = 1000;
columns = 6;

%# pick random rows
indX = randperm( size(fulldata,1) );
indX = indX(1:rows)';

%# pick columns in a set order (2,4,5,3,6,1)
indY = indY(1:columns);

%# filter data
data = U(indX,indY); 
```

然后我对这个随机选择的 1000 行应用规范化：

```
% apply normalization method to every cell
maxData = max(max(data));
minData = min(min(data));
data = ((data-minData)./(maxData)); 
```

然后我从原始`fulldata`集合中输出一个与 1000 个选定行匹配的数据样本：

```
% output matching data
dataSample = fulldata(indX, :) 
```

另请注意，当我选择“随机行”时，我还会输出与 fulldata 中的行匹配的 indX 行。

所以`datasample`看起来像这样：

![在此处输入图像描述](../Images/9ebf9508dbfc5a2e57146e4c7bdd7d8e.png)

这是与原始完整数据匹配的 1000 个随机行。

`indX`看起来像这样：

![在此处输入图像描述](../Images/5a9b5fb11ecfbd8f826b1c7477201999.png)

这是来自 的相应行号`fulldata`。

我遇到的问题是当我使用 K-Means 对 1000 个随机行进行聚类并输出每个聚类的数据时，如下所示：

```
%% generate sample data
K = 6;
numObservarations = size(data, 1);
dimensions = 3;

%% cluster
opts = statset('MaxIter', 100, 'Display', 'iter');
[clustIDX, clusters, interClustSum, Dist] = kmeans(data, K, 'options',opts, ...
'distance','sqEuclidean', 'EmptyAction','singleton', 'replicates',3);

%% plot data+clusters
figure, hold on
scatter3(data(:,1),data(:,2),data(:,3), 5, clustIDX, 'filled')
scatter3(clusters(:,1),clusters(:,2),clusters(:,3), 100, (1:K)', 'filled')
hold off, xlabel('x'), ylabel('y'), zlabel('z')
grid on
view([90 0]);

%% plot clusters quality
figure
[silh,h] = silhouette(data, clustIDX);
avrgScore = mean(silh);

% output the contents of each cluster
K1 = data(clustIDX==1,:)
K2 = data(clustIDX==2,:)
K3 = data(clustIDX==3,:)
K4 = data(clustIDX==4,:)
K5 = data(clustIDX==5,:)
K6 = data(clustIDX==6,:) 
```

如何将 K1、k2...K6 与相应的 indX 行号匹配？例如 K1 的输出如下所示：

![在此处输入图像描述](../Images/bd16f9cfeabdaacf36319f40b6c973b5.png)

我希望有额外的文件，比如`K1-indX`它只是一个相应行号的列表，`indX`从中匹配来自 K1、K2 等的集群数据。或者可能将 indX 行号附加到第 7 列的 K1、K2 输出中（最好)

例如：

```
K1 cluster data | Belongs to fulldata row number
0.4 0.5 0.6 0.4 | 456456 etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:22:10.927

除非我误解了上面的内容，否则您已经拥有 (in `indX`)`fulldata`行号......例如，您需要做的就是查看`fulldata`集群 1 中的行：

```
fulldata(indX(clustIDX == 1), :) 
```

`kmeans`不会对数据重新排序，因此 clustIDX 的每一行 1:1000 仍对应于您开始使用的`data`/的同一行 1:1000。`datasample`

换句话说，`clustIDX`将是一个长度为 1000 的向量，其中每个元素都是该行的（整数）簇分配。因此，您可以将其用于任何有 1000 行的逻辑索引，其顺序与`data`您用于聚类的样本相对应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:54:58.020

一个例子来说明：

```
%# lets use an example data of size 150x4
load fisheriris
fulldata = meas;

%# pick 100 rows at random
rIdx = randperm(size(fulldata,1));
rIdx = rIdx(1:100)';                  %#'
data = fulldata(rIdx,:);

%# cluster the subset data
K = 3;
clustIDX = kmeans(data, K);

%# divide the data according to which cluster instances were assigned to
groupedIdx = cell(K,1);
groupedData = cell(K,1);
for i=1:K
    %# instances
    groupedData{i} = data(clustIDX==i,:);

    %# corresponding row indices into the original fulldata
    groupedIdx{i} = rIdx(clustIDX==i);
end

%# check: these two should be equal
groupedData{1}(1,:)
fulldata(groupedIdx{1}(1),:) 
```

# java - 高效的 Minkowski 和计算

> ID：11476075
> 
> 赞同：8
> 
> 时间：2012-07-13T18:16:57.377
> 
> 标签：java, algorithm, set

我想知道是否有一种算法可以有效地计算*离散的一维*Minkowski 和。Minkowski 和定义为：

```
S + T = { x + y | x in S, y in T } 
```

是不是我们可以将集合表示为列表，对 S 和 T 进行排序，然后做一些类似的事情来计算两个集合的并集。即并行地沿着集合走并生成结果。

有没有这样的算法，我不必额外对结果进行排序以删除重叠案例 x1+y1 = x2+y2？最好用Java编写？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T20:37:44.740

首先，输出的大小可以是`O(nm)`，如果没有碰撞（例如，`A={0, 1, 2, ..., n-1}`，`B={n, 2*n, 3*n, ...n*n}`），所以如果我们依赖`n`和`m`，我们就没有希望找到二次算法。一个简单的方法是计算所有对 ( `O(nm)`)、排序和唯一性（总计`O(nm log nm)`.

如果你有一个上限`M`使得`x <= M`所有`x`in `A union B`，我们可以通过`O(M log M)`以下方式计算总和。

1.  生成特征向量`A[i] = 1 ff i \in A, 0 otherwise`，对于`B`. 每个这样的向量的大小为`M`。

2.  计算`A`并`B`使用 FFT 的卷积（时间：`O(M log M)`）。输出大小为 O(· `M`)。

3.  扫描输出`O`- 在每个单元格，如果是 Minkowski 和的一个元素，`O[i]`则非零。`i`

证明：`O[i] != 0`当且当且当且当且当且当且`k`即当且在闵可夫斯基`A[k] != 0`和中时。`B[i-k] != 0``k \in A``i-k \in B``k + i-k``i`

（取自[这篇论文](http://www.cs.utep.edu/vladik/misha5.pdf)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:27:58.607

对 S 和 T 进行排序，遍历 S 搜索 T 中的匹配元素，每次找到匹配项时，从 S 和 T 中删除元素并将其放入新的集合 U 中。因为它们是排序的，一旦在 T 中找到匹配项， T 中的进一步比较可以从最后一场比赛开始。

现在 S、T 和 U 都是不相交的。所以迭代 S 和 T 并添加一个，以及 S 和 U，以及 T 和 U。最后迭代 U，并将 U 中的每个元素添加到 U 中的每个元素，其集合索引等于或大于当前集合索引。

可悲的是，这种优化算法仍然是 O(n^2)。如果 T 和 S 相同，它将比简单解决方案快 2 倍。您也不必在输出集中搜索重复项。

# ruby - open 关键字是 trait / mixin 吗？

> ID：11476077
> 
> 赞同：1
> 
> 时间：2012-07-13T18:16:59.963
> 
> 标签：ruby, scala, f#, functional-programming

当我在 F# 中使用 open 关键字时

```
module AnotherModule

open myFSharpModule 
```

这可以被认为是 Ruby 中的 mixin 或 Scala 中的 trait 吗？前几天我在想我多么希望 F# 有这些功能，但后来我突然想到`open`关键字可能是同一个东西。在某种程度上，它只是将引用的模块复制到您正在定义的模块中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:18:38.377

在 F# 中，`open`只是[导入声明](http://msdn.microsoft.com/en-us/library/dd393787.aspx)，以便从您要导入它们的范围内访问。

它不会使这些声明成为您模块的一部分，它只是为了让您可以在没有资格的情况下从您的模块中引用*它们*。

Scala 中的等价物是`import`，在 Ruby 中是`require`.

# algorithm - 用于查找多个对象的二叉搜索树

> ID：11476078
> 
> 赞同：1
> 
> 时间：2012-07-13T18:17:02.683
> 
> 标签：algorithm, data-structures

我刚刚从“Learn You a Haskell”一书中读到了二叉搜索树，我想知道使用这棵树搜索多个元素是否有效？例如，假设我有一堆对象，其中每个对象都有一些索引，并且

```
 5
      /   \
     3     7
    / \   / \
   1   4 6   8 
```

如果我需要通过索引 8 找到一个元素，我只需要执行三个步骤`5 -> 7 -> 8`，而不是遍历整个列表直到结束。但是如果我需要找到几个对象，比如 1、4、6、8，该怎么办？似乎我需要对每个元素重复相同的操作`5-> 3 -> 1` `5 -> 3 -> 4`，`5 -> 7 -> 6`并且`5 -> 7 -> 8`.

所以我的问题是：使用二叉搜索树查找多个元素是否仍然有意义？它会比检查每个元素的条件更好吗（在最坏的情况下只会导致 O(n)）？

另外，如果我需要检查多个属性，使用哪种数据结构更好。例如，在上面的示例中，我只查找`id`属性，但如果我还需要按`name`、 或`color`等搜索呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:29:51.283

搜索多个元素时，一个完全可以接受的解决方案是使用最有效的算法（在您的情况下为 O(log n)）一次搜索一个。但是，单步遍历整个树并汇集所有符合特定条件的元素可能是非常有利的，这实际上取决于您在代码中搜索的位置和频率。如果您只在代码中的某一点进行搜索，那么一次性收集树中的所有元素而不是逐个搜索它们是有意义的。如果您决定选择该解决方案，那么您可以使用其他数据结构，例如列表。

如果您需要检查多个属性，我建议将“id”替换为包含所有不同可能标识符（id、color、...）的元组。然后，您可以解压缩元组并比较您想要的任何标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:35:16.593

不。

一次搜索是 O(log n)。4 次搜索是 (4 log n)。将拾取所有项目的线性搜索是 O(n)。btree 的树结构意味着查找多个数据需要遍历（实际上比列表遍历更糟糕）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:10:35.560

你可以分享一些工作。请参阅`members`，它接受一个值列表并输出一个列表，该列表恰好包含树中输入列表的那些值。注意：输入列表的顺序不会保留在输出列表中。

编辑：我实际上不确定您是否可以通过`members`over doing获得更好的性能（从理论的角度来看） `map member`。我*认为*，如果输入列表已排序，那么您可以通过将列表分成三部分（lss、eqs、gts）来轻松完成。

```
data BinTree a
  = Branch (BinTree a) a (BinTree a)
  | Leaf
  deriving (Show, Eq, Ord)

empty :: BinTree a
empty = Leaf

singleton :: a -> BinTree a
singleton x = Branch Leaf x Leaf

add :: (Ord a) => a -> BinTree a -> BinTree a
add x Leaf = singleton x
add x tree@(Branch left y right) = case compare x y of
  EQ -> tree
  LT -> Branch (add x left) y right
  GT -> Branch left y (add x right)

member :: (Ord a) => a -> BinTree a -> Bool
member x Leaf = False
member x (Branch left y right) = case compare x y of
  EQ -> True
  LT -> member x left
  GT -> member x right

members :: (Ord a) => [a] -> BinTree a -> [a]
members xs Leaf = []
members xs (Branch left y right) = eqs ++ members lts left ++ members gts right
  where
    comps = map (\x -> (compare x y, x)) xs
    grab ordering = map snd . filter ((ordering ==) . fst)
    eqs = grab EQ comps
    lts = grab LT comps
    gts = grab GT comps 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T18:27:01.927

假设你的二叉树是平衡的，如果你有一个常数 k 个搜索项，那么总时间为 O(k * log(n)) 的 k 个搜索仍然比单个 O(n) 搜索要好，其中每个字符，您仍然需要进行 k 比较，使其成为 O(k*n)。即使搜索项列表已排序，并且您可以在 O(log(k)) 时间内进行二进制搜索以查看当前项是否匹配，但您仍然处于 O(n * log(k))，即比树差，除非 k 是 Theta(n)。

# c# - 从 maskedTextBox 获取 byte[]（或 char[]）

> ID：11476081
> 
> 赞同：0
> 
> 时间：2012-07-13T18:17:25.330
> 
> 标签：c#

我想将用户输入的文本输入到 maskedTextBox 中，然后将其编码为 byte[] ，然后将其散列到 SHA256 中以与存储在我的数据库中的密码散列进行比较。问题是我只找到了我不知道如何使用的 .GetCharFromPosition(Point pt) （我会知道它是否会是一个简单的索引来代替这个“Point”）和 .GetHashCode 但它需要是 SHA256，而不是一些未定义的哈希......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:19:34.603

您可以使用特定编码获取字符串的字节[`Encoding.GetBytes`](http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx)。例如，要将其作为 UTF-8 字节数组获取：

```
System.Text.Encoding.UTF8.GetBytes(yourTextBox.Text) 
```

# yahoo - 在雅虎网络播放器中动态添加歌曲标签不起作用

> ID：11476087
> 
> 赞同：1
> 
> 时间：2012-07-13T18:17:42.337
> 
> 标签：yahoo, yahoo-api, yahoo-widgets

我正在使用雅虎网络播放器和某些步骤来将歌曲添加到雅虎网络播放器播放列表。

1.  我正在显示歌曲列表。
2.  单击一首歌曲，使用 jquery 创建动态歌曲 url 并附加到`div`标签中。链接喜欢：`<a href="http://www.example.com/data?v=yaariyaan"> Song </a>`
3.  我想将此链接添加到雅虎网络播放器播放列表。代码：

    ```
    fileUrl = "<a href='http://www.example.com/data?v=yaariyaan'> Song </a>";
    YAHOO.MediaPlayer.addTracks(fileUrl, 0, true);
    YAHOO.MediaPlayer.play(); 
    ```

`addTracks`没有将链接添加到播放列表。

我也收到错误：

> 错误：“未捕获的类型错误：无法调用未定义的方法'fadeIn'”；

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T22:21:53.897

我有同样的问题，我可以解决它的唯一方法是将自动播放设置为 true，如下所示：

```
<script type="text/javascript">
var YMPParams = 
{
   autoplay:true
}
</script>
<script type="text/javascript" src="http://mediaplayer.yahoo.com/latest"></script> 
```

# php - php内存泄漏

> ID：11476088
> 
> 赞同：1
> 
> 时间：2012-07-13T18:17:47.860
> 
> 标签：php, memory-leaks, addslashes

我无法理解为什么我的这部分代码会导致内存泄漏：

```
for($i=0; $i<count($values); $i++){
        $values[$i] = addslashes($values[$i]);
} 
```

为了将代码放在上下文中，我有一个先前构建的名为 values 的数组，其中包含要插入数据库的所有值。所有字段都是字符串，所以我需要转义所有字段，对于这个应用程序，addlashes 或 mysql_real_escape_string 是 imo 的不错选择。

现在奇怪的是，只要我添加了上面显示的部分，我就会收到这样的消息：

```
PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 24 bytes) 
```

我知道这会产生内存泄漏，但我不知道为什么。

深入研究，我注释掉了 for 循环中的唯一一行，出于好奇而留下 for 语句，泄漏就消失了。任何想法这可能意味着什么？

PS：字符串都是UTF8编码的，会不会有问题？

编辑：

该数组包含如下内容：

```
Array ( 
    [dossier] => 002A 
    [permis] => 
    [adresse] => 18, rue Bellevue
    [ville] => Ste-Anne-des-Lacs (Québec)
    [province] =>
    [code_postal] => J0R 1B0
    [numero_centrale] => N/A
    [routes] => De la Gare, droite chemin Avila jusqu'au bout et droite chemin Ste-Anne-des-lacs sur 1,8 km et droite sur Bellevue.
) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T18:25:56.513

您的数组有字符串键，但您正在检查/分配数字键。正如@nickb 所指出的，每次添加数字键时，都会`count($values)`增加一，因此您有一个无限循环。因此内存耗尽。

使用调试器进行检查，或者更好的是，切换到`foreach`循环或`array_*`功能之一（`array_walk()`,`array_map()`等，具体取决于您要执行的操作）。

@Jeremy 正确地指出你不应该`addslashes()`用来转义你的字符串。看看`mysqli_real_escape_string()`（正如他建议的那样），或者更好的是，`PDO`如果可以的话，考虑使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:24:57.720

尝试使用[array_walk](http://php.net/manual/en/function.array-walk.php)代替。

另外，不要指望每个循环。在将其放入有条件的循环之前获取计数。由于这是针对数据库的，因此您应该真正使用：[mysqli_real_escape_string](http://nz.php.net/manual/en/mysqli.real-escape-string.php)

# r - ggplot 序列模式

> ID：11476090
> 
> 赞同：2
> 
> 时间：2012-07-13T18:17:54.030
> 
> 标签：r, colorbar, ggplot2

我正在尝试绘制一系列代表不同类型活动的彩色小方块。例如，在下面的数据框中，type 代表活动的类型，count 代表在“不同类型”的活动发生之前发生了多少活动。

```
df3 <- data.frame(type=c(1,6,4,6,1,4,1,4,1,1,1,1,6,6,1,1,3,1,4,1,4,6,4,6,4,4,6,4,6,4),
      count=c(6,1,1,1,2,1,6,3,1,6,8,10,3,1,2,2,1,2,1,1,1,1,1,1,3,3,1,17,1,12) ) 
```

现在在ggplot中我没有使用count。我只是将连续数字作为 xvalues，将 1 作为 yvalues。但是它给了我类似[ggplot Image](http://imgur.com/RMFIa.png) 这是我使用的代码，请注意，对于 y 我总是使用 1 而对于 xi 只使用连续数字：

```
 ggplot(df3,aes(x=1:nrow(df3),y=rep(1,30))) + geom_bar(stat="identity",aes(color=as.factor(type))) 
```

我想得到宽度=df3$count的小方块。

你有什么建议吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:50:25.943

我并不完全清楚您需要什么，但我提供了一种可能的方法来绘制您的数据。我曾经`geom_rect()`绘制宽度等于您的`count`列的矩形。矩形的绘制顺序与数据行的顺序相同。

```
df3 <- data.frame(type=c(1,6,4,6,1,4,1,4,1,1,1,1,6,6,1,
                         1,3,1,4,1,4,6,4,6,4,4,6,4,6,4),
                 count=c(6,1,1,1,2,1,6,3,1,6,8,10,3,1,2,
                         2,1,2,1,1,1,1,1,1,3,3,1,17,1,12))

library(ggplot2)

df3$type <- factor(df3$type)
df3$ymin <- 0
df3$ymax <- 1
df3$xmax <- cumsum(df3$count)
df3$xmin <- c(0, head(df3$xmax, n=-1))

plot_1 <- ggplot(df3, 
              aes(xmin=xmin, xmax=xmax, ymin=ymin, ymax=ymax, fill=type)) +
          geom_rect(colour="grey40", size=0.5)

png("plot_1.png", height=200, width=800)
print(plot_1)
dev.off() 
```

![在此处输入图像描述](../Images/8d5214b5ece09673c87bad047c236205.png)

# c++ - 在 Linux 上使用 Qt 实现 C++ HTTPS SOAP 客户端

> ID：11476091
> 
> 赞同：0
> 
> 时间：2012-07-13T18:17:54.093
> 
> 标签：c++, linux, qt, soap, https

在使用 OpenSSL 和 gSOAP 遇到一些问题后，我一直在研究 SOAP 请求的 HTTPS 传输机制的其他选项的使用。引起我注意的是`QNetworkRequest`我相信它是 Qt 的一部分。我以前从未使用过 Qt，但从我所做的研究中，我得到的印象是它面向 GUI 应用程序的开发。我的应用程序不是 GUI，所以我的问题是我是否**可以在 Qt 开发环境之外访问 QNetworkRequest 的功能？**. 是否可以通过链接到适当的库和适当的头文件包含，或者我必须在 Qt IDE 中开发一个完整的应用程序才能访问该功能？如果我必须将我的项目导入 Qt IDE，那么这个选项不适合我，所以在我花数周时间阅读手册和网络教程之前，我想看看有经验的 Qt 用户是否可以告诉我我想要的是否可行，或者我是否可以需要去别处看看。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:25:37.113

一般来说，GUI 框架是高度耦合的；尤其是那些用 C++ 编写的。

我相信你可以解耦`QNetworkRequest`，但这可能需要很长时间。

如果您使用具有您所追求的功能的不同库（例如：[Apache Axis](http://axis.apache.org/axis2/c/core/)），您会做得更好。

# sql - SQL中的库存价格计算

> ID：11476093
> 
> 赞同：0
> 
> 时间：2012-07-13T18:18:04.287
> 
> 标签：sql, sql-server-2005, cursor, recursive-query

我在 SQL 2005 中，我正在尝试将此 Cursor 转换为不是 Cursor 的东西，以确定这是否是最有效的方法。

```
 --Create cursor to determint total cost
DECLARE CostCursor CURSOR FAST_FORWARD
        FOR SELECT  ReceiptQty
                   ,Price
            FROM    @temp_calculate
            ORDER BY UpdateDate DESC
OPEN CostCursor 
FETCH Next FROM CostCursor INTO @ReceiptQty,@Price
WHILE @@FETCH_STATUS = 0
      BEGIN
            IF @OnHandQty >= @ReceiptQty
               BEGIN
                           --SELECT @ReceiptQty,@Price, 1,@OnHandQty
                     SET @Cost = @ReceiptQty * @Price
                     SET @OnHandQty = @OnHandQty - @ReceiptQty
                     SET @TotalCost = @TotalCost + @Cost
               END
            ELSE
               BEGIN
                     IF @OnHandQty < @ReceiptQty
                        BEGIN
                              --SELECT @ReceiptQty,@Price, 2,@OnHandQty
                              SET @Cost = @OnHandQty * @Price
                              SET @OnHandQty = 0
                              SET @TotalCost = @TotalCost + @Cost
                              BREAK;
                        END
               END
            FETCH Next FROM CostCursor INTO @ReceiptQty,@Price
      END
CLOSE CostCursor
DEALLOCATE CostCursor 
```

系统需要通过并使用最新收到的库存和价格来确定为现有量支付的费用。

```
Ex. 1st Iteration: @OnHandQty = 8 RecievedQty = 5 Price = 1 UpdateDate = 1/20 Results:  @HandQty = 3 @TotalCost = $5
2nd Iteration: @OnHandQty = 3 RecievedQty = 6 Price = 2 UpdateDate = 1/10 Results:  @HandQty = 0 @TotalCost = $11 
```

最终结果告诉我，我手头的库存是我花了 11 美元买的。如果我在 C# 或任何其他面向对象的语言中执行此操作，这会向我尖叫递归。我认为递归 CTE 可能更有效。我只成功地为 Heirarchy 的以下类型的查询成功地完成了任何递归 CTE，并且我无法成功地围绕一个可以以另一种方式实现这一目标的查询。

任何帮助或简单的方式将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:54:22.510

这是一个递归 CTE 解决方案。必须存在行号列才能使其工作。所以我派生了一个包含行号列的新临时表（@temp_calculate2）。理想情况下，行号列将出现在@temp_calculate 中，但我对您的情况了解不够，是否可以修改@temp_calculate 的结构。

事实证明，在 SQL Server 2005 及更高版本中计算运行总计有四种基本方法：通过连接、子查询、递归 CTE 和游标。我遇到了[Jerry Nixon 的一篇博客文章](http://blog.jerrynixon.com/2010/04/tsql-running-total-cte-wins.html)，其中展示了前三个。结果相当惊人。与连接和子查询解决方案相比，递归 CTE 几乎快得令人难以置信。

不幸的是，他没有包含游标解决方案。我创建了一个并使用他的示例数据在我的计算机上运行它。游标解决方案仅比递归 CTE 慢一点 - 413ms vs. 273ms。

与递归 CTE 相比，我不知道游标解决方案使用了多少内存。我用 SQL Profiler 来获取这些数据还不够好，但我很想知道这两种方法在内存使用方面的比较。

```
SET NOCOUNT OFF;

DECLARE @temp_calculate TABLE
(
  ReceiptQty INT,
  Price FLOAT,
  UpdateDate DATETIME
);
INSERT INTO @temp_calculate (ReceiptQty, Price, UpdateDate) VALUES (5, 1.0, '2012-1-20');
INSERT INTO @temp_calculate (ReceiptQty, Price, UpdateDate) VALUES (6, 2.0, '2012-1-10');
INSERT INTO @temp_calculate (ReceiptQty, Price, UpdateDate) VALUES (4, 3.0, '2012-1-08');

DECLARE @temp_calculate2 TABLE
(
  RowNumber INT PRIMARY KEY,
  ReceiptQty INT,
  Price FLOAT
);
INSERT INTO @temp_calculate2
  SELECT
      RowNumber = ROW_NUMBER() OVER(ORDER BY UpdateDate DESC),
      ReceiptQty,
      Price
    FROM
      @temp_calculate;

;WITH LineItemCosts (RowNumber, ReceiptQty, Price, RemainingQty, LineItemCost)
AS
(
  SELECT
      RowNumber,
      ReceiptQty,
      Price,
      8, -- OnHandQty
      ReceiptQty * Price
    FROM
      @temp_calculate2
    WHERE
      RowNumber = 1

  UNION ALL

  SELECT
      T2.RowNumber,
      T2.ReceiptQty,
      T2.Price,
      LIC.RemainingQty - LIC.ReceiptQty,
      (LIC.RemainingQty - LIC.ReceiptQty) * T2.Price
    FROM
      LineItemCosts AS LIC
      INNER JOIN @temp_calculate2 AS T2 ON LIC.RowNumber + 1 = T2.RowNumber
)
/* Swap these SELECT statements to get a view of
   all of the data generated by the CTE. */
--SELECT * FROM LineItemCosts;
SELECT
    TotalCost = SUM(LineItemCost)
  FROM
    LineItemCosts
  WHERE
    LineItemCost > 0
  OPTION
    (MAXRECURSION 10000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:58:36.507

```
CREATE CLUSTERED INDEX IDX_C_RawData_ProductID_UpdateDate ON #RawData (ProductID ASC , UpdateDate DESC , RowNumber ASC)

    DECLARE @TotalCost Decimal(30,5)
    DECLARE @OnHandQty Decimal(18,5)
    DECLARE @PreviousProductID Int

    UPDATE  #RawData
    SET     @TotalCost = TotalCost = CASE
                                          WHEN RowNumber > 1
                                          AND @OnHandQty >= ReceiptQuantity THEN @TotalCost + (ReceiptQuantity * Price)
                                          WHEN RowNumber > 1
                                          AND @OnHandQty < ReceiptQuantity THEN @TotalCost + (@OnHandQty * Price)
                                          WHEN RowNumber = 1
                                          AND OnHand >= ReceiptQuantity THEN (ReceiptQuantity * Price)
                                          WHEN RowNumber = 1
                                          AND OnHand < ReceiptQuantity THEN (OnHand * Price)
                                     END
           ,@OnHandQty = OnHandQty = CASE
                                          WHEN RowNumber > 1
                                          AND @OnHandQty >= ReceiptQuantity THEN @OnHandQty - ReceiptQuantity
                                          WHEN RowNumber > 1
                                          AND @OnHandQty < ReceiptQuantity THEN 0
                                          WHEN RowNumber = 1
                                          AND OnHand >= ReceiptQuantity THEN (OnHand - ReceiptQuantity)
                                          WHEN RowNumber = 1
                                          AND OnHand < ReceiptQuantity THEN 0
                                     END/*,
            @PreviousProductID = ProductID*/
    FROM    #RawData WITH (TABLOCKX)
    OPTION (MAXDOP 1) 
```

Welp，这是我最终想出的解决方案。我喜欢认为观看 #sqlhelp 主题标签的优秀人员将我指向 Jeff Moden 的这篇文章：

[http://www.sqlservercentral.com/articles/T-SQL/68467/](http://www.sqlservercentral.com/articles/T-SQL/68467/)

我最终不得不在桌子上使用 Rownumber，因为它没有正确获取第一组案例。使用这个结构，我将检索数据集的时间从我能做到的最好的 17 分钟缩短到了 12 秒，而我的开发速度却慢得多。我相信产量会进一步降低。

我已经测试了输出，我得到了与旧方法完全相同的结果，除了同一产品的 2 件商品价格不同且更新时间完全相同时。一种方式可能会选择与另一种不同的顺序。它有 15,624 个项目，仅在方差 >= 一分钱的情况下发生一次。

感谢所有在这里回答的人。我最终走了一条不同的路，但没有你我不会找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:45:27.040

这是您可以尝试的一件事。诚然，这不是我必须处理现实世界的事情，但我远离光标。我拿了你的临时表`@temp_calculate`并添加了一个`ID`order by `UPDATEDATE`。您还可以将输出中需要的字段添加到临时表中 - @HandQty 和 @TotalCost 以及一个名为 IndividulaCost 的新字段 - 并运行这个查询并将其用于`UPDATE`@HandQty 和 IndividulaCost 。再运行一次`UPDATE`，采用此处使用的相同概念来获取和更新总成本。（实际上，您可以在插入临时表时使用其中的一些内容并消除一个步骤。）

我不认为它很好，但我相信它比光标好。玩它，看看你的想法。

```
DECLARE @OnHandQty int
set @OnHandQty = 8
SELECT a.ID,
RECEIPTQty + TOTALOFFSET AS CURRENTOFFSET,
TOTALOFFSET,
CASE WHEN @OnHandQty - (RECEIPTQty + TOTALOFFSET) > 0 THEN RECEIPTQTY * PRICE
     ELSE (@OnHandQty  - TOTALOFFSET) * Price END AS CALCPRICE,
CASE WHEN @OnHandQty - RECEIPTQTY - TOTALOFFSET > 0 THEN @OnHandQty - RECEIPTQTY -   TOTALOFFSET
     ELSE 0 END AS HandQuantity
FROM SO_temp_calculate a
CROSS APPLY (   SELECT ISNULL(SUM(ReceiptQty), 0) AS TOTALOFFSET
                     FROM SO_temp_calculate B where a.id > b.id
                  ) X 
```

回报：

```
ID  CURRENTOFFSET   TOTALOFFSET CALCPRICE   HandQuantity
----------------------------------------------------------------
1          5           0           5           3
2         11           5           6           0 
```

如果您正在使用`SQL SERVER 2012`，您可以使用`RANK`带有`OVER`子句和的函数`ROWS UNBOUNDED PRECEDING`。直到你去那里，这是处理滑动聚合的一种方法。

# dynamic - 动态调整datagridview的高度

> ID：11476094
> 
> 赞同：1
> 
> 时间：2012-07-13T18:18:07.070
> 
> 标签：dynamic, datagridview, resize

当用户在单元格内编辑时，是否有人碰巧知道如何调整 datagridview 中行的高度？我通过设置 wrapmode 和 autoresizemode 正确调整了行大小，但这仅在按下回车键后才会生效。我想在用户输入文本时调整行的大小，以便他们可以看到他们输入的所有文本。有没有办法做到这一点？

谢谢。

# javascript - 风格化的地图和地点库 Google Map API v3

> ID：11476096
> 
> 赞同：0
> 
> 时间：2012-07-13T18:18:16.973
> 
> 标签：javascript, google-maps-api-3, google-places-api

如何从 Google 地方信息库中获取结果以显示在我的风格化 Google 地图上？使用此代码，我只得到样式地图，没有地方。

```
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=mykey&sensor=true">
</script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true"></script>  

<script type="text/javascript">

 function initialize() {
var styles = [ { featureType: "road.arterial", elementType: "geometry", stylers: [ {   color: "#808080" }, { weight: 0.5 } ] },{ featureType: "road.arterial", elementType: "labels.text.stroke", stylers: [ { visibility: "on" }, { color: "#fafafa" } ] },{ featureType: "water", elementType: "geometry", stylers: [ { color: "#b4d2fa" } ] },{ featureType: "water", elementType: "geometry.fill", stylers: [ { color: "#9c3239" } ] } ]

var styledMap = new google.maps.StyledMapType(styles,
{name: "WATS Map"});

var myLatLng = new google.maps.LatLng(42.3068, -83.681)

var mapOptions = {
zoom: 12,
center: myLatLng,
mapTypeControlOptions: {
  mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
}
};
var map = new google.maps.Map(document.getElementById('map_canvas'),
mapOptions);

map.mapTypes.set('map_style', styledMap);
map.setMapTypeId('map_style');

var request = {
      location: myLatLng,
      radius: 1500,
      types: ['store']
    };
    var infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.search(request, callback);
  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
      }
    }
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: styledMap,
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(styledMap, this);
    });
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:27:29.437

您必须将变量设为**`map`**全局变量并分配 **`map`**给标记的地图选项`createMarker()`

目前你在那里使用`styledMap`，但这不是地图对象，它是 StyledMapType

# c# - C# Windows 窗体 Web 浏览器 flash 不起作用

> ID：11476101
> 
> 赞同：0
> 
> 时间：2012-07-13T18:18:54.557
> 
> 标签：c#, browser, flash

我正在尝试在我的应用程序中制作迷你网络浏览器。但这是错误的。它不显示 Flash 视频 (swf)。

有什么方法可以修复这个失败吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:05:30.957

您可以在 windows webbrowser 控件中显示 flash 视频

要使其正常工作，您需要更改项目的 CPU 类型以支持 x86（即 32 位），因为 WebBrowser 控件为 WebBrowser ActiveX 控件提供了托管包装器

[MSDN](http://msdn.microsoft.com/en-us/library/w290k23d%28v=vs.110%29.aspx)

# c# - 格式化 HTML 表单布局

> ID：11476105
> 
> 赞同：1
> 
> 时间：2012-07-13T18:19:03.090
> 
> 标签：c#, jquery, html, css, asp.net-mvc

我有一个需要格式化的 HTML 表单。这是一个很长的表格，人们必须滚动（垂直）才能访问整个表格。现在，我在表单字段的右侧有很多空白，我想将表单分成三个部分并显示三个部分水平而不是一个长的垂直表单。

当前布局：

```
Field1
Field2
Field3
Field4
Field5
Field6 
```

新版面：

```
Field1     Field3     Field5
Field2     Field4     Field6 
```

解决这个问题的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:25:20.307

为了获得正确的制表符顺序（如果您不想手动设置它们），您应该为每一列创建一个包装元素并让它们彼此相邻浮动。

```
<div class="col">
<label>Field1 <input type="text"/></label>
<label>Field2 <input type="text"/></label>
</div>
<div class="col">
<label>Field3 <input type="text"/></label>
<label>Field4 <input type="text"/></label>
</div>
<div class="col">
<label>Field5 <input type="text"/></label>
<label>Field6 <input type="text"/></label>
</div> 
```

CSS：

```
.col{
  width: 30%;
  float: left;
} 
```

...这是[jsFiddle](http://jsfiddle.net/UmdMY/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:26:22.737

您可以简单地使用 DIV 和 CSS

```
<div class="divContainer">
@foreach(var item in Model.YourCollectionProperty)
{
  <div class="divItem">
       Some content here
  </div>
}
</div> 
```

现在有这个 CSS

```
.divContainer
{
   width:100%;
}
.divItem
{
  width:33%; float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:23:00.773

您可以使用具有 3 列的表格，也可以使用 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:25:02.630

我建议您将 div 与 css 用于布局而不是表格

table 适用于表格数据，但如果需要更多，则 div 更好

[http://www.w3schools.com/html/html_layout.asp](http://www.w3schools.com/html/html_layout.asp)

# c# - 获取包含在自身中的方法的所有静态实例

> ID：11476110
> 
> 赞同：1
> 
> 时间：2012-07-13T18:19:14.657
> 
> 标签：c#, .net, reflection

我有一个这样设置的课程：

```
public class Strategy
{
    public readonly string Name;
    public readonly int Age;

    public Strategy(string Name, int Age)
    {
        this.Name = Name;
        this.Age = Age;
    }

    public static readonly Strategy CoolStrategy = new Strategy("Super Awesome", 24);
    public static readonly Strategy LameStrategy = new Strategy("Work Harder!", 14);
} 
```

我希望能够使用反射来使用扩展，我可以这样说：

```
Strategy[] CurrentStrategies = typeof(Strategy).GetStaticInstances<Strategy>(); 
```

然后，当我在此类中添加更多静态策略时，此扩展将返回它们的数组。所以在这种情况下，它将返回一个包含 CoolStrategy 和 LameStrategy 的数组。

这将允许我将实例添加到类中，并在其他地方获得数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:46:45.123

The way I understand your question, you want to get values of all public static fields of a given type. The following method does exactly that:

```
public static IEnumerable<T> GetStaticInstances<T>()
{
    Type typeOfInstance = typeof(T);

    IEnumerable<T> instances = typeOfInstance
        .GetFields(BindingFlags.Public | BindingFlags.Static)
        .Where(field => field.FieldType == typeOfInstance)
        .Select(field => (T)field.GetValue(null));

    return instances;
} 
```

However, wouldn't it be sufficient to simply include a method in the `Strategy` class that would return all available strategies? If you'll want to add a new strategy in the future, you would simply add it to that method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:32:24.080

```
public static class StrategyExtensions
{
    public static Strategy[] GetAllStrategies()
    {
        var statics = typeof (Strategy).GetFields(BindingFlags.Static | BindingFlags.Public);
        var strategies = statics.Where(f => f.FieldType == typeof (Strategy));
        var values = strategies.Select(s => s.GetValue(null));
        return values.Cast<Strategy>().ToArray();
    }
} 
```

然后

```
var all = StrategyExtensions.GetAllStrategies();
foreach (var strategy in all)
    Console.WriteLine("name: {0} age: {1}", strategy.Name, strategy.Age); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:22:44.790

不太确定你在问什么；但听起来你想检查 FieldInfo.FieldType 而不是 GetValue ......

# zend-framework - LoadSkin 循环错误

> ID：11476113
> 
> 赞同：0
> 
> 时间：2012-07-13T18:19:41.730
> 
> 标签：zend-framework, loops, skin

这是我的 LoadSkin 视图助手。我使用这个类来调用 XML 中的 CSS 文件。见下文：

```
public function loadSkin($skin)
{
    $skinData = new Zend_Config_Xml('./skins/' . $skin . '/skin.xml');
    $stylesheets = $skinData->stylesheets->stylesheet->toArray();

    if(is_array($stylesheets))
    {
        foreach($stylesheets as $stylesheet)
        {
            echo $this->view->headLink()->appendStylesheet('/skins/' . $skin . 
                    '/css/' . $stylesheet);
        }       
    }
} 
```

但我有一个问题，我有 3 个 CSS 文件：

*   默认.css
*   文本.css
*   表单.css

但是循环是错误的。首先，他采用 default.css。在他使用 default.css 和 text.css 之后。最后，他采用了 default.css、text.css 和 form.css。但我只需要一个循环正常工作。

看看下面发生了什么：

[http://i.imgur.com/KXVSe.png](http://i.imgur.com/KXVSe.png)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:36:38.643

那是因为您在 foreach 循环中回显。HeadLink 视图助手是您在循环的每次迭代中添加/添加 css int it 的容器，因此在每次回显中，您都在回显包含所有先前添加的 css 的整个容器，因此改为执行此操作

```
 if(is_array($stylesheets))
    {
        foreach($stylesheets as $stylesheet)
        {
             $this->view->headLink()->appendStylesheet('/skins/' . $skin . 
                    '/css/' . $stylesheet);
        }       
    } 
```

然后在你的layout.phtml里面做

```
<head>
<?echo $this->headLink() ?>
</head> 
```

# knockout.js - Isotope 和 Knockout js 无法删除动态添加的元素

> ID：11476116
> 
> 赞同：4
> 
> 时间：2012-07-13T18:20:01.590
> 
> 标签：knockout.js, jquery-isotope

我一直试图让 Isotopejs 和 Knockoutjs 一起工作。所以，除了当我需要向 dom 添加元素然后需要删除它们时，它一直在流畅地工作。

我已经将问题追溯到这个方法内部：ko.utils.setDomNodeChildrenFromArrayMapping = function (domNode, array, mapping, options, callbackAfterAddingNodes) { .. }

哪个调用此方法 fixUpVirtualElements(lastMappingResult[lastMappingResultIndex].domNodes);

fixUpVirtualElements 方法正在删除我需要在 beforeRemove 事件中使用同位素删除的 dom 节点；foreach 绑定调用没有获取需要删除的元素。

我已经阅读了淘汰赛中该方法的注释。但我不明白它们的含义，因为我没有任何领域知识来了解它所谈论的内容。

任何人都可以看看我最新的 jsfiddle，让我知道为什么 fixUpVirutalElements 正在删除我需要传递给 beforeRemove 事件的元素。

[http://jsfiddle.net/evanlarsen/C5y6G/](http://jsfiddle.net/evanlarsen/C5y6G/)

有人可以修复这个 jsFiddle 以使 2 个库一起工作。

谢谢，埃文拉森

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:00:00.490

我不是同位素专家；我知道它的作用，但我不知道它的算法，但是我对 knockout.js 的来源有深入的了解。现在可能的问题是同位素操纵了由敲除模板绑定创建的dom节点。knockout.js 不允许其他程序接触由模板创建的 DOM 节点。所有的 knockout.js 算法都假定更改模板创建的 dom 节点的唯一方法是操作绑定到模板的数组。如果其他东西直接操纵该节点，无论是通过添加节点、删除节点还是（如在同位素的情况下）重新排序它们......所有淘汰赛 js 算法都会发疯......这意味着删除的节点不会消失，一些节点是重复的...等等。

- - - - - - - - - - - - 更新 - - - - - - - -

解决了只是替代：

```
self.serviceAdded = function(el) {
        if (el && el.nodeType === 1) {
           $('#container').isotope('insert', $(el)); 

        }
    }; 
```

和：

```
self.serviceAdded = function(el) {
        if (el && el.nodeType === 1) {
           $('#container').isotope('appended', $(el)); 

        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T13:50:32.273

我认为结合 Isotope 和 Knockout 的最佳选择是通过对后者的绑定。为此，我编写了一个名为[Knockout-Isotope 的](https://github.com/aknuds1/knockout-isotope)文章。请注意，它需要[Knockout](https://github.com/aknuds1/knockout)的分叉版本，但希望我所做的微小更改可以在某个时候集成回来。

由于我刚刚完成了 Knockout-Isotope，它没有经过很好的测试，但它至少可以处理我到目前为止所遇到的场景。

## 代码

[演示小提琴](http://jsfiddle.net/aknuds1/fHW3t/)。

**HTML：**

```
<h1>Knockout Isotope Binding Demo</h1>
<p>This is a demonstration of the 
 <a href="https://github.com/aknuds1/knockout-isotope">Knockout-Isotope</a>
 binding for <a href="http://knockoutjs.com/">Knockout</a>, which visualizes
 Knockout observableArrays through
 <a href="http://isotope.metafizzy.co/index.html">Isotope</a>.
</p>

<p>Click on an item to remove it or click in the item container to add a new item</p>
<div id="container" data-bind="isotope: { data: items, isotopeOptions: getOptions }, click: addItem">
  <div data-bind="text: text, click: $parent.removeItem, clickBubble: false"></div>
</div> 
```

**JavaScript：**

```
function ItemModel(parent) {
    var value, self = this,
        found, i;
    for (value = 0; value < parent.items().length; ++value) {
        found = false;
        for (i in parent.items()) {
            var item = parent.items()[i];
            if (item.value() == value) {
                found = true;
                break;
            }
        }
        if (!found) {
            break;
        }
    }
    this.value = ko.observable(value);

    this.text = ko.computed(function () {
        return "Item " + self.value();
    });
}

var ViewModel = function () {
    var self = this;
    self.items = ko.observableArray();
    self.items.push(new ItemModel(self));
    self.items.push(new ItemModel(self));

    this.removeItem = function (item) {
        self.items.remove(item);
    };

    this.addItem = function () {
        self.items.push(new ItemModel(self));
    };

    // Knockout callback for getting Isotope options
    this.getOptions = function () {
        return {
            masonry: {
                columnWidth: 210
            }
        };
    };
};

ko.applyBindings(new ViewModel("Test")); 
```

# ms-word - 如何使“Windows 图元文件”成为 Word 2007 中的默认粘贴特殊选项？

> ID：11476119
> 
> 赞同：2
> 
> 时间：2012-07-13T18:20:13.267
> 
> 标签：ms-word, paste, word-2007, metafile

我正在从 Visio 复制到 Word 2007 的大量内容。我发现 Windows 图元文件是可用的选择性粘贴选项中最节省空间的选择。如何使“Windows 图元文件”成为 Word 中的默认粘贴特殊选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:19:19.907

我也在寻找这个，但微软知道没有人需要这个，所以这似乎是不可能的。如果你敢不同意微软的智慧，你可以选择一种解决方法——就像我一样......

创建一个宏（显然您在视图中找到宏，而不是在开发人员功能区中......）：

```
Sub PasteSpecialMetafile()
    Selection.PasteSpecial Link:=False, DataType:=wdPasteEnhancedMetafile, _
        Placement:=wdInLine, DisplayAsIcon:=False
End Sub 
```

然后为宏分配一个特殊的快捷方式（通过文件 -> 选项 -> 自定义功能区 -> 键盘快捷方式：自定义简单直观）。可能有一个命令直接打开 PasteSpecial 对话框......但这很好隐藏。

宏仅在剪贴板内容可以转换为元文件时才有效（并且当剪贴板包含文本时会出现错误）。所以还有改进的空间:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T14:46:17.097

仅供参考，PasteSpecial 的默认快捷键是 Ctrl+Alt+V。Word 帮助中提供了 MS Word 快捷方式的完整列表，为方便起见，这里是[直接链接](http://support.office.microsoft.com/client/Keyboard-shortcuts-for-Microsoft-Word-9a2e0234-e682-49ff-a4aa-999f07b51bf3)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-29T09:39:08.013

谢谢您的回答。它们非常有用。它也适用于 Word 2003 :)。

我找到了另一种方法。在您完成所有单击以执行特殊粘贴\图片（元文件）并粘贴您的第一张图片后，复制下一张（从 excel 或任何其他地方）然后转到 Word 并按 Ctrl+Y 重复上一个命令。在Word中进行特殊粘贴后不要做任何其他操作，最后的动作需要是特殊粘贴\图片。

# c# - 将规范模式暴露给客户端代码的标准做法？

> ID：11476122
> 
> 赞同：6
> 
> 时间：2012-07-13T18:20:33.390
> 
> 标签：c#, design-patterns

我有一个 N 层应用程序，我在其中使用规范模式。现在，我想提供一些方法来为客户端代码构建规范。它必须是几个预定义的选项，例如：

*   平等的
*   比...更棒
*   包含

这些对象（让我称之为过滤器）不能包含任何逻辑（方法），只包含数据 - 过滤器类型和参数。并且必须有自然的方式将它们转换为服务器上的规范。这是从客户端看起来应该如何的示例：

```
var serviceClient = new DataModuleService();
var equalFilter = new ContainsFilter<Book>("Title","Lord of the Rings");
var lordOfTheRingBooks = serviceClient.GetBooks(equalFilter); 
```

所有标准操作（如 Equal、Greater、In、Between、StartsWith 等）都必须有过滤器类型，以及将它们与布尔运算符（and、or、not）组合的方法。

是否有一些模式/标准实践来实现这样的事情？

* * *

**UPD：**任务现在被冻结了，我开始认为任务定义本身有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T19:55:09.607

只是一个高级答案-我相信您可以尝试支持您提到的所有逻辑和条件运算符的 LINQ 表达式。浏览[System.Linq.Expressions](http://msdn.microsoft.com/en-us/library/system.linq.expressions.aspx)命名空间以查看可用类型。

有用的链接：

*   [LINQ 表达式树和规范模式](http://davedewinter.com/2009/05/31/linq-expression-trees-and-the-specification-pattern/)
*   [理解规范模式——第 1 部分](https://architectbetter.wordpress.com/2011/05/08/understanding-specification-patternpart-1/)
*   [使用 LINQ 理解规范模式 - 第 2 部分](https://architectbetter.wordpress.com/2011/05/11/understanding-specification-pattern-with-linq-part-2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T19:39:00.557

在我看来，您尝试做的事情就像[Hibernate](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)使用其[标准查询](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch17.html)所做的事情一样。您可以[将它们组合起来，](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/criterion/Restrictions.html)但是您想构建您感兴趣的过滤器。

这不是 C#，但[Java 和 C#](http://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Java)是相似的语言，所以也许你可以从中借鉴一些想法。

此外，您可以在 .NET (NHibernate) 上使用 Hibernate 的端口进行[相同的条件查询](http://nhforge.org/doc/nh/en/index.html#querycriteria)（尽管我不完全知道 API 是否与 Java 的相同）。

# jquery - IE8 8.0.7600 及更低版本中的无效 JSON Primitive

> ID：11476128
> 
> 赞同：4
> 
> 时间：2012-07-13T18:21:02.520
> 
> 标签：jquery, ajax, asp.net-mvc, json, internet-explorer-8

在 IE8 版本 8.0.7600 及更低版本中发出 ajax 请求但无法在 8.0.7601 或更高版本中复制它时，我收到错误或“无效的 JSON Promitive：未定义”。有谁知道为什么或如何解决它？

```
$.ajax({
    url: defaults.url + (defaults.url.indexOf('?') > 0 ? '&' : '?') + 'r=' + Math.random(),
    type: defaults.method,
    contentType: 'application/json',
    dataType: defaults.dataType,
    data: ko.toJSON(defaults.data),
    beforeSend: function (xhr, settings) {
        xhr.setRequestHeader("URL_REFERRER", config.urlReferrer);
        xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    },
)} 
```

**控制器**

```
public virtual JsonResult CompleteOrder(string id)
{
    _entitlementsService.CompleteOrder(AuthenticateManager.CurrentUserProfile.UserModel.UserId, id);
    return Json(new SuccessResponse("Order completed"));
} 
```

**要求**

```
Request URL:http://localhost:16253/DashboardSetup/Entitlements/CompleteOrder/c8e053d9-a458-11e1-8dd0-001cc4565d26?r=0.8639180345926434
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:0
Content-Type:application/json
Cookie:MYNGCONNECT=56053B332B26A0FD9D0A31C5FC83868281D876DB1F365034306F6CB3A64C5B2F7
Host:localhost:16253
Origin:http://localhost:16253
Referer:http://localhost:16253/DashboardSetup/Entitlements/Entitlement?SearchResults=True&id=c8e053d9-a458-11e1-8dd0-001cc4565d26
URL_REFERRER:http://localhost:16253/DashboardSetup/Entitlements
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11
X-Requested-With:XMLHttpRequest
Query String Parametersview URL encoded
r:0.8639180345926434 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:51:11.667

将您的 contentType 更改为“text/json”或“text/plain”。较旧的 IE 在标头中需要不同的内容类型配置。

# tfs - TFS express 与谷歌驱动器

> ID：11476138
> 
> 赞同：2
> 
> 时间：2012-07-13T18:21:44.703
> 
> 标签：tfs, google-drive-api, repository

我可以将 tfs express 服务器与 google drive for windows 结合起来在云中获取我的免费存储库吗？有人知道这两件事的其他选择吗？它必须是免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:45:15.497

TFS Express 使用 SQL Express 作为存储库。看不到如何将它与 google drive 一起使用，但您可以尝试[Team Foundation Service](http://tfspreview.com)。它现在是免费的，因为它仍处于预览阶段。

预览后会发生什么我真的不知道。我只是希望他们会有一些免费的包裹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-17T10:38:02.210

不，您不能使用带有云存储选项的 TFS Express 来突然获得 TFS 的云版本。但是，在过去的几年里，微软并没有坐以待毙，所以现在您可以通过创建[Visual Studio Team Services 帐户](https://www.visualstudio.com/team-services/)来获得 TFS 的云托管版本。

这项服务对最多 5 位用户也是免费的，而且您将获得很多 TFS Express 没有提供的东西。

# file-upload - 上传大于 POST_MAX_SIZE 时 PHP $_POST / $_FILES 为空

> ID：11476139
> 
> 赞同：11
> 
> 时间：2012-07-13T18:21:52.777
> 
> 标签：file-upload, php

> **可能重复：**
> [如何检测用户是否上传了大于 post_max_size 的文件？](https://stackoverflow.com/questions/6190713/how-to-detect-if-a-user-uploaded-a-file-larger-than-post-max-size)

我正在编写一个脚本来处理来自 Web 应用程序的文件上传。我对可以上传到我的应用程序的文件大小设置了限制（存储空间限制）。我目前正在尝试放入一些验证代码，以确保用户实际上传了文件，以便我可以向他们显示一个很好的错误消息。但是，如果用户上传了太大的文件，我也希望能够向用户显示错误消息。我可以为此使用 Javascript，但我也想要一个 PHP 检查，以防他们没有启用 Javascript。

我已将 PHP.ini 中的 POST_MAX_SIZE 变量设置为最大文件上传大小，但这产生了一个意外问题。如果有人尝试上传大于 POST_MAX_SIZE 的文件，二进制数据只会在最大大小处被截断，并且 $_FILES 数组不包含该文件的条目。如果用户根本没有提交文件，这与会发生的行为相同。

这使得很难判断为什么 $_FILES 数组不包含文件，即它是否从未上传过，或者它是否太大而无法完全发送。

有没有办法区分这两种情况？换句话说，有没有办法判断是否为文件发送了 POST 数据，但在发送整个文件之前被提前截断了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T18:51:49.230

看起来很奇怪，[这是故意行为](https://bugs.php.net/bug.php?id=50926)，因为 POST_MAX_SIZE 是一种低级的终极故障保护，为了保护您并防止 DOS 攻击，服务器除了在中途实现时丢弃所有 POST 数据之外别无他法，它接收的数据多于它可以安全处理的数据。如果您知道您需要一次接收比这更多的数据，您可以提高此值（但请确保您的服务器可以处理这将增加的负载），但我建议您研究处理您的用例的其他方法，遇到 POST_MAX_SIZE 向我表明，可能存在比一个大型 HTTP POST 更强大的解决方案，例如将其拆分为多个 AJAX 调用。

与 POST_MAX_SIZE 不同的是 UPLOAD_MAX_SIZE ，它是单个文件限制的 php.ini 设置，我假设您最初正在谈论这个设置。它限制任何一个上传文件的大小，如果文件超过*这个*值，它将设置`$_FILES['file']['error']`为`1`. 一般来说，您希望您的网站设置如下：

*   MAX_FILE_SIZE`<form>`应设置为您实际希望为此表单接受的最大值。虽然任何试图利用您的网站的用户都可以绕过这个问题，但对于实际使用您的网站的用户来说这很好，因为浏览器将（[实际上可以](http://www.php.net/manual/en/features.file-upload.errors.php#74693)）阻止他们浪费带宽尝试上传它。这应该始终小于您的服务器端设置。
*   [UPLOAD_MAX_FILESIZE](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)是服务器将接受的最大大小，丢弃任何更大的内容并将错误报告给`$_FILES`阵列。这应该*大于*您希望在整个站点中实际接受的最大文件。
*   [POST_MAX_SIZE](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)是您的服务器愿意在单个 POST 请求中接受的最大数据量。这必须大于 UPLOAD_MAX_SIZE 才能使大型上传成功，并且必须大得多才能允许一次上传多个文件。我可能会建议 UPLOAD_MAX_FILESIZE * 4.1 的值 - 这将允许一次四个大文件，以及一些额外的数据。当然是 YMMV，而且您应该确保您的服务器能够正确处理您决定设置的任何值。

对于您如何判断的具体问题，我链接到的关于 POST_MAX_SIZE 的 PHP 文档建议在表单中设置一个 get 变量，即

```
<form action="edit.php?processed=1"> 
```

但是，就像我上面所说的，如果您遇到此问题，您可能需要探索其他上传方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T18:58:21.990

像这样的东西：

```
if ($_SERVER['CONTENT_LENGTH'] && !$_FILES && !$_POST) {
  // upload failed
} 
```

未经测试，因此请尝试各种场景以查看哪种组合有效。不确定它是否适用于同时上传多个文件。

如果处理多个上传，您可能需要检查`$_SERVER['CONTENT_LENGTH']`并将其与收到的文件总和进行比较。

# sql - 如果为空返回 0

> ID：11476141
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:21:54.967
> 
> 标签：sql, sql-server, isnull

我正在尝试修改此查询以在没有返回数据时返回一行或所有行中都打印有“0”的行。我试过使用 ISNULL() 但我没有得到任何地方。

```
SELECT DISTINCT 
SA.DELETED,
PAT.VERSION, 
PAT.PATTERNDATE,
SA.AGENT_VERSION,
SCL.COMPUTER_NAME AS Computer_Name,
SCO.OPERATION_SYSTEM AS Operation_System,
dateadd(s,convert(bigint,SA.CREATION_TIME)/1000,
'01-01-1970 00:00:00') CREATION_DTTM,
dateadd(s,convert(bigint,SA.LAST_UPDATE_TIME)/1000,
'01-01-1970  00:00:00')  Lastupdatetime,
DATEADD(s, convert(bigint,LAST_SCAN_TIME)/1000,
'01-01-1970 00:00:00')LAST_SCAN_TIME,
PAT.PATTERNDATE AS Pattern_Date,
SCL.USER_NAME AS User_Name,
VSC.IP_ADDR1_TEXT AS IP_Add,
IM.NAME AS Group_Name

FROM ((((SEM_AGENT SA

INNER JOIN SEM_CLIENT SCL
ON ((SA.COMPUTER_ID=SCL.COMPUTER_ID) 
AND (SA.DOMAIN_ID=SCL.DOMAIN_ID)) 
AND (SA.GROUP_ID=SCL.GROUP_ID)) 

INNER JOIN SEM_COMPUTER   SCO
ON ((SA.COMPUTER_ID=SCO.COMPUTER_ID) 
AND (SA.DOMAIN_ID=SCO.DOMAIN_ID)) 
AND (SA.DELETED=SCO.DELETED))

INNER JOIN PATTERN PAT 
ON SA.PATTERN_IDX=PAT.PATTERN_IDX) 
INNER JOIN IDENTITY_MAP IM 
ON SCL.GROUP_ID=IM.ID) 

INNER JOIN V_SEM_COMPUTER VSC 
ON SCO.COMPUTER_ID=VSC.COMPUTER_ID 
AND SA.DELETED=0

WHERE PAT.Patterndate < (SELECT MAX(Patterndate) -2 FROM Pattern)
AND SCO.OPERATION_SYSTEM NOT LIKE '%2000%'
ORDER BY Computer_Name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:40:13.033

没有记录时返回 NULL 行的一种方法是

*   将您的 SQL 放入 CTE
*   从您的 CTE 中选择
*   与您的 CTE 不存在的默认值联合。

```
WITH CTE AS (
   SELECT "Computer Name".  ... 
)
SELECT * FROM CTE
UNION ALL
SELECT '', 0, 0, '' 
WHERE 
    NOT EXISTS(SELECT * FROM CTE)
ORDER BY 
     "Computer Name" 
```

见[DEMO 返回“空”记录](http://sqlfiddle.com/#!3/1fa93/2317)和[DEMO 返回数据](http://sqlfiddle.com/#!3/1fa93/2318)。
两个演示之间的区别在于`Where 1=2`和`Where 1=1`在 CTE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:59:36.810

我把它分成三个陈述：

```
DECLARE @RecordCount int;

WITH Temp_CTE
AS
(
SELECT DISTINCT EM_AGENT.DELETED
  ,PATTERN.VERSION 
  ,PATTERN.PATTERNDATE
  ,SEM_AGENT.AGENT_VERSION
  ,SEM_CLIENT.COMPUTER_NAME "Computer Name"
  ,SEM_COMPUTER.OPERATION_SYSTEM "Operation System"
  ,dateadd(s,convert(bigint,SEM_AGENT.CREATION_TIME)/1000
    ,'01-01-1970 00:00:00') CREATION_DTTM
  , dateadd(s,convert(bigint,SEM_AGENT.LAST_UPDATE_TIME)/1000
    ,'01-01-1970  00:00:00') Lastupdatetime
  , DATEADD(s, convert(bigint,LAST_SCAN_TIME)/1000
    , '01-01-1970 00:00:00') "Last Scan Time"
  , PATTERN.PATTERNDATE "Pattern Date"
  , SEM_CLIENT.USER_NAME "User Name"
  , V_SEM_COMPUTER.IP_ADDR1_TEXT "IP Address"
  , IDENTITY_MAP.NAME "Group Name"
FROM (((("SEM_AGENT" "SEM_AGENT" 
INNER JOIN "SEM_CLIENT" "SEM_CLIENT" 
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_CLIENT"."COMPUTER_ID") 
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_CLIENT"."DOMAIN_ID")) 
  AND ("SEM_AGENT"."GROUP_ID"="SEM_CLIENT"."GROUP_ID")) 
INNER JOIN "SEM_COMPUTER"   "SEM_COMPUTER" 
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_COMPUTER"."COMPUTER_ID") 
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_COMPUTER"."DOMAIN_ID")) 
  AND ("SEM_AGENT"."DELETED"="SEM_COMPUTER"."DELETED"))
INNER JOIN "PATTERN" "PATTERN" 
  ON "SEM_AGENT"."PATTERN_IDX"="PATTERN"."PATTERN_IDX") 
INNER JOIN "IDENTITY_MAP" "IDENTITY_MAP" 
  ON "SEM_CLIENT"."GROUP_ID"="IDENTITY_MAP"."ID") 
INNER JOIN "V_SEM_COMPUTER" "V_SEM_COMPUTER" 
  ON "SEM_COMPUTER"."COMPUTER_ID"="V_SEM_COMPUTER"."COMPUTER_ID" 
  AND "SEM_AGENT"."DELETED"=0
WHERE Pattern.Patterndate < (select max(Patterndate) -2 from Pattern)
  AND SEM_COMPUTER.OPERATION_SYSTEM NOT LIKE '%2000%'
)
SELECT @RecordCount = COUNT(*) FROM Temp_CTE;

IF @RecordCount=0 THEN
  SELECT 0
ELSE
  SELECT * FROM Temp_CTE ORDER BY [Computer Name]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:33:22.443

我会检查是否有符合您条件的行，如果没有，请选择 0，否则，请选择您的整个查询：

```
SELECT TOP 1 *
FROM (((("SEM_AGENT" "SEM_AGENT" INNER JOIN "SEM_CLIENT" "SEM_CLIENT"  
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_CLIENT"."COMPUTER_ID")  
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_CLIENT"."DOMAIN_ID"))  
  AND ("SEM_AGENT"."GROUP_ID"="SEM_CLIENT"."GROUP_ID")) INNER JOIN "SEM_COMPUTER"   "SEM_COMPUTER"  
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_COMPUTER"."COMPUTER_ID")  
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_COMPUTER"."DOMAIN_ID"))  
  AND ("SEM_AGENT"."DELETED"="SEM_COMPUTER"."DELETED")) INNER JOIN "PATTERN" "PATTERN"  
  ON "SEM_AGENT"."PATTERN_IDX"="PATTERN"."PATTERN_IDX") INNER JOIN "IDENTITY_MAP" "IDENTITY_MAP"  
  ON "SEM_CLIENT"."GROUP_ID"="IDENTITY_MAP"."ID") INNER JOIN "V_SEM_COMPUTER" "V_SEM_COMPUTER"  
  ON "SEM_COMPUTER"."COMPUTER_ID"="V_SEM_COMPUTER"."COMPUTER_ID"  
  AND "SEM_AGENT"."DELETED"=0 
WHERE Pattern.Patterndate < (select max(Patterndate) -2 from Pattern) 
AND SEM_COMPUTER.OPERATION_SYSTEM NOT LIKE '%2000%' 

IF @@ROWCOUNT = 0
    SELECT 0
ELSE 
BEGIN
    SELECT DISTINCT "SEM_AGENT"."DELETED" 
      ,"PATTERN"."VERSION"  
      ,"PATTERN"."PATTERNDATE" 
      ,"SEM_AGENT"."AGENT_VERSION" 
      ,"SEM_CLIENT"."COMPUTER_NAME" "Computer Name" 
      , "SEM_COMPUTER"."OPERATION_SYSTEM" "Operation System" 
      ,dateadd(s,convert(bigint,"SEM_AGENT"."CREATION_TIME")/1000,'01-01-1970 00:00:00')     
        CREATION_DTTM 
      , dateadd(s,convert(bigint,"SEM_AGENT"."LAST_UPDATE_TIME")/1000,'01-01-1970  00:00:00')  Lastupdatetime 
      , DATEADD(s, convert(bigint,LAST_SCAN_TIME)/1000, '01-01-1970 00:00:00')"Last Scan Time" 
      , "PATTERN"."PATTERNDATE" "Pattern Date" 
      , "SEM_CLIENT"."USER_NAME" "User Name" 
      , "V_SEM_COMPUTER"."IP_ADDR1_TEXT" "IP Address" 
      , "IDENTITY_MAP"."NAME" "Group Name" 
    FROM (((("SEM_AGENT" "SEM_AGENT" INNER JOIN "SEM_CLIENT" "SEM_CLIENT"  
      ON (("SEM_AGENT"."COMPUTER_ID"="SEM_CLIENT"."COMPUTER_ID")  
      AND ("SEM_AGENT"."DOMAIN_ID"="SEM_CLIENT"."DOMAIN_ID"))  
      AND ("SEM_AGENT"."GROUP_ID"="SEM_CLIENT"."GROUP_ID")) INNER JOIN "SEM_COMPUTER"   "SEM_COMPUTER"  
      ON (("SEM_AGENT"."COMPUTER_ID"="SEM_COMPUTER"."COMPUTER_ID")  
      AND ("SEM_AGENT"."DOMAIN_ID"="SEM_COMPUTER"."DOMAIN_ID"))  
      AND ("SEM_AGENT"."DELETED"="SEM_COMPUTER"."DELETED")) INNER JOIN "PATTERN" "PATTERN"  
      ON "SEM_AGENT"."PATTERN_IDX"="PATTERN"."PATTERN_IDX") INNER JOIN "IDENTITY_MAP" "IDENTITY_MAP"  
      ON "SEM_CLIENT"."GROUP_ID"="IDENTITY_MAP"."ID") INNER JOIN "V_SEM_COMPUTER" "V_SEM_COMPUTER"  
      ON "SEM_COMPUTER"."COMPUTER_ID"="V_SEM_COMPUTER"."COMPUTER_ID"  
      AND "SEM_AGENT"."DELETED"=0 
    WHERE Pattern.Patterndate < (select max(Patterndate) -2 from Pattern) 
    AND SEM_COMPUTER.OPERATION_SYSTEM NOT LIKE '%2000%' 
    ORDER BY "Computer Name" 
END 
```

如果您知道您的内部连接不会改变结果的数量，那么为了提高效率，您可以从第一个查询中删除它们。

如果你不想使用@@ROWCOUNT，你也可以使用 COUNT()：

```
DECLARE @count INT

SELECT @count = COUNT(*)
FROM (
SELECT TOP 1 *
FROM (((("SEM_AGENT" "SEM_AGENT" INNER JOIN "SEM_CLIENT" "SEM_CLIENT"  
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_CLIENT"."COMPUTER_ID")  
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_CLIENT"."DOMAIN_ID"))  
  AND ("SEM_AGENT"."GROUP_ID"="SEM_CLIENT"."GROUP_ID")) INNER JOIN "SEM_COMPUTER"   "SEM_COMPUTER"  
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_COMPUTER"."COMPUTER_ID")  
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_COMPUTER"."DOMAIN_ID"))  
  AND ("SEM_AGENT"."DELETED"="SEM_COMPUTER"."DELETED")) INNER JOIN "PATTERN" "PATTERN"  
  ON "SEM_AGENT"."PATTERN_IDX"="PATTERN"."PATTERN_IDX") INNER JOIN "IDENTITY_MAP" "IDENTITY_MAP"  
  ON "SEM_CLIENT"."GROUP_ID"="IDENTITY_MAP"."ID") INNER JOIN "V_SEM_COMPUTER" "V_SEM_COMPUTER"  
  ON "SEM_COMPUTER"."COMPUTER_ID"="V_SEM_COMPUTER"."COMPUTER_ID"  
  AND "SEM_AGENT"."DELETED"=0 
WHERE Pattern.Patterndate < (select max(Patterndate) -2 from Pattern) 
AND SEM_COMPUTER.OPERATION_SYSTEM NOT LIKE '%2000%' ) temp

IF @count = 0
SELECT 0
ELSE 
BEGIN
    SELECT DISTINCT "SEM_AGENT"."DELETED" 
      ,"PATTERN"."VERSION"  
      ,"PATTERN"."PATTERNDATE" 
      ,"SEM_AGENT"."AGENT_VERSION" 
      ,"SEM_CLIENT"."COMPUTER_NAME" "Computer Name" 
      , "SEM_COMPUTER"."OPERATION_SYSTEM" "Operation System" 
      ,dateadd(s,convert(bigint,"SEM_AGENT"."CREATION_TIME")/1000,'01-01-1970 00:00:00')     
        CREATION_DTTM 
      , dateadd(s,convert(bigint,"SEM_AGENT"."LAST_UPDATE_TIME")/1000,'01-01-1970  00:00:00')  Lastupdatetime 
      , DATEADD(s, convert(bigint,LAST_SCAN_TIME)/1000, '01-01-1970 00:00:00')"Last Scan Time" 
      , "PATTERN"."PATTERNDATE" "Pattern Date" 
      , "SEM_CLIENT"."USER_NAME" "User Name" 
      , "V_SEM_COMPUTER"."IP_ADDR1_TEXT" "IP Address" 
      , "IDENTITY_MAP"."NAME" "Group Name" 
    FROM (((("SEM_AGENT" "SEM_AGENT" INNER JOIN "SEM_CLIENT" "SEM_CLIENT"  
      ON (("SEM_AGENT"."COMPUTER_ID"="SEM_CLIENT"."COMPUTER_ID")  
      AND ("SEM_AGENT"."DOMAIN_ID"="SEM_CLIENT"."DOMAIN_ID"))  
      AND ("SEM_AGENT"."GROUP_ID"="SEM_CLIENT"."GROUP_ID")) INNER JOIN "SEM_COMPUTER"   "SEM_COMPUTER"  
      ON (("SEM_AGENT"."COMPUTER_ID"="SEM_COMPUTER"."COMPUTER_ID")  
      AND ("SEM_AGENT"."DOMAIN_ID"="SEM_COMPUTER"."DOMAIN_ID"))  
      AND ("SEM_AGENT"."DELETED"="SEM_COMPUTER"."DELETED")) INNER JOIN "PATTERN" "PATTERN"  
      ON "SEM_AGENT"."PATTERN_IDX"="PATTERN"."PATTERN_IDX") INNER JOIN "IDENTITY_MAP" "IDENTITY_MAP"  
      ON "SEM_CLIENT"."GROUP_ID"="IDENTITY_MAP"."ID") INNER JOIN "V_SEM_COMPUTER" "V_SEM_COMPUTER"  
      ON "SEM_COMPUTER"."COMPUTER_ID"="V_SEM_COMPUTER"."COMPUTER_ID"  
      AND "SEM_AGENT"."DELETED"=0 
    WHERE Pattern.Patterndate < (select max(Patterndate) -2 from Pattern) 
    AND SEM_COMPUTER.OPERATION_SYSTEM NOT LIKE '%2000%' 
    ORDER BY "Computer Name" 
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:39:37.923

您有一个返回 0 行或更多行的查询。当它返回 0 行时，您希望包含另一行。

这增加了查询的计算复杂性。一种方法是将所需的行与指示该行的来源的标志结合在一起。然后，使用 windows 函数在所有行之间共享该信息，并使用 where 子句过滤最终行：

```
select *
from (select t.*, sum(FromQ) over (partition by NULL) as numQ
      from (select *, 1 as FromQ
            from <query>
            union all
            select 0,0,0,0 . . . , 0 as FromQ
           ) t
      ) t
where numQ = 0 or numQ > 0 and FromQ <> 0 
```

您也可以将这些组合并在一起，按 FromQ 反向排序，如果不是第一行，则忽略应用程序中的行。

# iphone - iOS 上的录音

> ID：11476143
> 
> 赞同：0
> 
> 时间：2012-07-13T18:22:03.353
> 
> 标签：iphone, ios, avfoundation, core-audio, audioqueueservices

我刚开始做一个项目，需要我在 iOS 上做很多与音频相关的事情。

这是我第一次在音频领域工作，完全不知道如何去做。因此，我在 Google 上搜索了文档，并且主要依赖于 Apple 文档。首先，我必须提到，这些文件非常令人困惑，而且常常具有误导性。

无论如何，为了测试录音，我使用了 AVAudioSession 和 AVAudioRecorder。据我了解，这些对于简单的录制和播放来说都是可以的。所以，这里有几个关于做更复杂的事情的问题：

*   如果我希望在录制过程中对音频进行任何实时处理，是否需要使用音频队列服务？
*   除了音频队列服务，我还有哪些其他选择？
*   什么是音频单元？

我实际上得到了 Apple 的音频队列服务编程指南，并开始编写音频队列进行录制。他们的音频队列服务指南（PDF 第 19 页）上的“图表”显示正在使用 AAC 编解码器进行录制。但是，经过一番挫折和浪费大量时间后，我发现 AAC 录制在 iOS 上不可用 - “Core Audio Essentials”，“Core Audio Plug-ins: Audio Units and Codecs”部分。

这让我想到了另外两个问题：

*   考虑到 Apple Lossless、iLBC、IMA/ADPCM、Linear PCM、uLaw/aLaw，什么是适合录制的格式？有没有人可以参考的图表？
*   此外，如果无法使用音频队列进行 MPEG4AAC (.m4a) 录制，我怎么能使用 AVAudioRecorder 录制 MPEG4AAC (.m4a)？！

非常感谢您提前帮助我解决这个问题。我会非常感谢任何链接、方向和/或智慧之言。

再次感谢和欢呼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:10:43.570

对于您的第一个问题，Audio Queue 服务或使用 RemoteIO Audio Unit 是用于实时音频处理的适当 API，RemoteIO 允许更低且更具确定性的延迟，但比 Audio Queues 具有更严格的实时要求。

对于创建 aac 录音，一种可能性是录制为原始线性 PCM 音频，然后使用 AV 文件服务将缓冲的原始音频转换为所需的压缩格式。

# java - Android 将动画转换为中心

> ID：11476144
> 
> 赞同：2
> 
> 时间：2012-07-13T18:22:11.747
> 
> 标签：java, android, android-animation, translate-animation

我需要对 ImageView 应用翻译动画，这个 ImageView 位于某个位置，我需要将其动画到屏幕的中心。这是我的翻译 xml 代码，但它不会将 ImageView 动画到中心。

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="500"
        android:fromXDelta="0%p"
        android:fromYDelta="0%p"
        android:toXDelta="50%p"
        android:toYDelta="50%p" />
</set> 
```

这是 ImageView 所在的 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/WelcomeLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/welcome_background"
android:orientation="vertical" >

<ImageView
    android:id="@+id/welcome_innovaLogo"
    android:layout_width="300dp"
    android:layout_height="150dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="1dp"
    android:layout_marginTop="5dp"
    android:contentDescription="@string/welcome_innovaLogoString"
    android:scaleType="fitXY"
    android:src="@drawable/innova_logo" >
</ImageView>

<TextView
    android:id="@+id/welcome_innovaInfo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/welcome_innovaLogo"
    android:layout_marginTop="20dp"
    android:layout_toRightOf="@+id/welcome_innovaLogo"
    android:text="@string/welcome_innovaInfoString"
    android:textColor="#9acd32"
    android:textStyle="bold" />

<TextView
    android:id="@+id/welcome_innovaHeader"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/welcome_innovaInfo"
    android:layout_marginRight="20dp"
    android:text="@string/welcome_innovaHeaderString"
    android:textColor="#9acd32"
    android:textSize="20sp"
    android:textStyle="italic" />

<ListView
    android:id="@+id/welcome_commandsListView"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/welcome_innovaLogo"
    android:layout_marginTop="40dp"
    android:cacheColorHint="#00000000" />

<LinearLayout
    android:id="@+id/welcome_loadingLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="450dp"
    android:orientation="horizontal"
    android:visibility="invisible" >

    <ProgressBar
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:indeterminateDrawable="@drawable/progress_large" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_marginLeft="10dp"
        android:gravity="center_vertical"
        android:text="Loading Data..."
        android:textColor="@color/green_color"
        android:textSize="19sp" >
    </TextView>
</LinearLayout>

<!--
     <fragment
    android:id="@+id/welcome_facebookFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/welcome_innovaLogo"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="?android:attr/actionBarSize"
    android:layout_toRightOf="@+id/welcome_commandsListView"
    class="innovaEgypt.com.Welcome.FacebookFragment" >
</fragment>
--> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:36:35.260

看看[这个](https://stackoverflow.com/q/10276251/871102)问题。我给出了类似的答案，但动画不是来自 xml，而是来自代码。希望能帮助到你。

* * *

编辑：

您的问题是动画没有考虑图像尺寸。动画以您的原点坐标为中心`ImageView`。

我仍然建议我的解决方案。

我尝试了我链接的答案中的代码并且它有效。只需复制此功能：

```
private void moveViewToScreenCenter( View view )
{
    RelativeLayout root = (RelativeLayout) findViewById( R.id.WelcomeLayout );
    DisplayMetrics dm = new DisplayMetrics();
    this.getWindowManager().getDefaultDisplay().getMetrics( dm );
    int statusBarOffset = dm.heightPixels - root.getMeasuredHeight();

    int originalPos[] = new int[2];
    view.getLocationOnScreen( originalPos );

    int xDest = dm.widthPixels/2;
    xDest -= (view.getMeasuredWidth()/2);
    int yDest = dm.heightPixels/2 - (view.getMeasuredHeight()/2) - statusBarOffset;

    TranslateAnimation anim = new TranslateAnimation( 0, xDest - originalPos[0] , 0, yDest - originalPos[1] );
    anim.setDuration(1000);
    anim.setFillAfter( true );
    view.startAnimation(anim);
} 
```

并调用它作为参数传递您的视图：

```
 ImageView img1 = (ImageView) findViewById( R.id.welcome_innovaLogo );
    moveViewToScreenCenter(img1); 
```

如果您的图像仍然消失，可能是因为它位于您的其他小部件后面，例如`ListView`. 如果是这种情况，请在末尾重新构建您的 xml 布局定义`ImageView`，就在`Listview`（只需剪切并粘贴`ImageView`）之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-25T18:32:17.983

对于未来的更新...

应用视图属性动画来移动小部件的位置。本例中的图像视图

```
int layoutWidth = parentLayout.getWidth();

layoutWidth = ((int) layoutWidth / 2) - (imageView.getWidth()) ;

Log.d(TAG, " position - " + layoutWidth);

imageView.animate()
    .translationX(-layoutWidth)
    .translationY(0)
    .setDuration(500)
    .setInterpolator(new LinearInterpolator())
    .start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-29T18:19:24.947

尝试为此代码添加延迟。

```
new android.os.Handler().postDelayed(
                    new Runnable() {
                        public void run() {
                            moveViewToScreenCenter( view );
                        }
                    }, 
                1000); 
```

# ipad - iPad 应用程序：如何通过页面方向更改图像大小

> ID：11476149
> 
> 赞同：0
> 
> 时间：2012-07-13T18:22:41.613
> 
> 标签：ipad, resize, orientation, image

我是一个全新的开发人员，并且已经完成了各种教程......如何将图像添加到我的主屏幕并让属性随着方向而变化？我已经看过并看到了一些东西，但到目前为止都没有奏效。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:24:15.300

我实际上找到了一个有效的 webkit！

> img.homepg { 宽度：920px; } @media 屏幕和（最大宽度：910px）{
> 
> ```
> img.homepg { 
>     width:670px;  } } img { 
> transition:all .2s linear; 
> -o-transition:all .2s linear; 
> -moz-transition:all .2s linear; 
> -webkit-transition:all .2s linear; } 
> ```

它用于在拉伸浏览器页面时更改文本大小，但通过将文本更改为 img 标签，它会产生奇迹！

# jquery - Jquery Slidedown 功能在 ajax 加载的 innerhtml 中不起作用

> ID：11476152
> 
> 赞同：1
> 
> 时间：2012-07-13T18:22:47.190
> 
> 标签：jquery, load, innerhtml, slidedown

我正在尝试在我的网站内插入一个显示登录信息的滑块...这必须动态加载...这就是我所做的

```
 <!DOCTYPE html>
<html lang="en">
<head>
<title>Home</title>
<meta charset="utf-8">
<link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
<link rel="stylesheet" href="css/layout.css" type="text/css" media="all">
<link rel="stylesheet" href="css/style.css" type="text/css" media="all">

<!--<script type="text/javascript" src="js/jquery-1.4.2.js" ></script>-->
<script type="text/javascript" src="js/cufon-yui.js"></script>
<script type="text/javascript" src="js/cufon-replace.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_400.font.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_700.font.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_600.font.js"></script>
<!--<script src="js/jquery-1.3.2.min.js" type="text/javascript"></script>-->
    <!-- Sliding effect -->

<script type="text/javascript">

/***********************************************
* Dynamic Ajax Content- © Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
***********************************************/

var bustcachevar=1 //bust potential caching of external pages after initial request? (1=yes, 0=no)
var loadedobjects=""
var rootdomain="http://"+window.location.hostname
var bustcacheparameter=""

function ajaxpage(url, containerid){
var page_request = false
if (window.XMLHttpRequest) // if Mozilla, Safari etc
page_request = new XMLHttpRequest()
else if (window.ActiveXObject){ // if IE
try {
page_request = new ActiveXObject("Msxml2.XMLHTTP")
} 
catch (e){
try{
page_request = new ActiveXObject("Microsoft.XMLHTTP")
}
catch (e){}
}
}
else
return false
page_request.onreadystatechange=function(){
loadpage(page_request, containerid)
}
if (bustcachevar) //if bust caching of external page
bustcacheparameter=(url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new Date().getTime()
page_request.open('GET', url+bustcacheparameter, true)
page_request.send(null)
}

function loadpage(page_request, containerid){
if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1))
document.getElementById(containerid).innerHTML=page_request.responseText
}

function loadobjs(){
if (!document.getElementById)
return
for (i=0; i<arguments.length; i++){
var file=arguments[i]
var fileref=""
if (loadedobjects.indexOf(file)==-1){ //Check to see if this object has not already been added to page before proceeding
if (file.indexOf(".js")!=-1){ //If object is a js file
fileref=document.createElement('script')
fileref.setAttribute("type","text/javascript");
fileref.setAttribute("src", file);
}
else if (file.indexOf(".css")!=-1){ //If object is a css file
fileref=document.createElement("link")
fileref.setAttribute("rel", "stylesheet");
fileref.setAttribute("type", "text/css");
fileref.setAttribute("href", file);
}
}
if (fileref!=""){
document.getElementsByTagName("head").item(0).appendChild(fileref)
loadedobjects+=file+" " //Remember this object as being already added to page
}
}
}

</script>

<!--[if lt IE 9]>
    <script type="text/javascript" src="http://info.template-help.com/files/ie6_warning/ie6_script_other.js"></script>
    <script type="text/javascript" src="js/html5.js"></script>
<![endif]-->
</head>
<body id="page1">
<div class="main">
<!-- header -->
    <header>
        <div class="wrapper">
         <!-- Panel -->

<div id="toppanel">
    <script type="text/javascript">
    ajaxpage('login.php', 'toppanel');
    </script>
  <!--  <a href="javascript:ajaxpage('login.php', 'toppanel');">test</a>-->
</div> 
```

我的动态加载 login.php 是

```
<script type="text/javascript" src="js/jquery-1.4.2.js" ></script>
<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/slide.js" type="text/javascript"></script>

<script type="text/javascript">
document.write(unescape('%3Cscript src="js/jquery-1.4.2.js"%3E%3C/script%3E'));
document.write(unescape('%3Cscript src="js/jquery-1.3.2.min.js"%3E%3C/script%3E'));

$(document).ready(function() {
        // Expand Panel
        $("#open").live('click',function(){
//  $("#open").click(function(){
        $("#panel").slideDown("slow");

    }); 

    // Collapse Panel
    $("#close").click(function(){
        $("div#panel").slideUp("slow"); 
    });     

    // Switch buttons from "Log In | Register" to "Close Panel" on click
    $("#toggle a").click(function () {
        $("#toggle a").toggle();
    });     

});
</script>   
<?php

session_start(); 
include('includes/utility_functions.php');
installationCheck();
$errorMessage = '';
if (isset($_SESSION["loginError"]) && !empty($_SESSION["loginError"])) {
    $errorMessage = $_SESSION["loginError"];
    $_SESSION["loginError"]='';  //clear the error so as not show again unless there is a new error
}

if (isset($_SESSION["username"]) && !empty($_SESSION["username"])) {
    $username = $_SESSION["username"];
    }
else { $username = "Guest"; }
//echo $_SESSION["loginError"];
?>

<div id="panel">
        <div class="content clearfix">
            <div class="left">
                <h1>poda patto</h1>
                <h2>Sliding login panel Demo with jQuery</h2>       
                <p class="grey">You can put anything you want in this sliding panel: videos, audio, images, forms... The only limit is your imagination!</p>
                <h2>Download</h2>
                <p class="grey">To download this script go back to <a href="http://web-kreation.com/index.php/tutorials/nice-clean-sliding-login-panel-built-with-jquery" title="Download">article &raquo;</a></p>
            </div>
            <div class="left">
                <!-- Login Form -->
                <form class="clearfix" action="doLogin.php" method="post">
                    <h1>Member Login</h1>
                    <label class="grey" for="log">Username:</label>
                    <input class="field" type="text" name="username" id="username" value="" size="23" />
                    <label class="grey" for="pwd">Password:</label>
                    <input class="field" type="password" name="password" id="password" size="23" />
                    <label><input name="rememberme" id="rememberme" type="checkbox" checked="checked" value="forever" /> &nbsp;Remember me</label>
                    <div class="clear"></div>
                    <input type="submit" name="submit" value="Login" class="bt_login" />
                    <a class="lost-pwd" href="#">Lost your password?</a>
                </form>
            </div>
            <div class="left right">            
                <!-- Register Form -->
                <form action="doRegistration.php" method="post">
                    <h1>Not a member yet? Sign Up!</h1>             
                    <label class="grey" for="signup">Username:</label>
                    <input class="field" type="text" name="signup" id="signup" value="" size="23" />
                    <label class="grey" for="email">Email:</label>
                    <input class="field" type="text" name="email" id="email" size="23" />
                    <label for="regPassword">Password:</label>
                  <input class="field" id="password" name="password" type="password" size="23" />
                <label for="verifyPassword">Verify Password:</label>
                <input class="field" id="verifyPassword" name="verifyPassword" type="password" size="25" />
                    <input type="submit" name="submit" value="Register" class="bt_register" />
                </form>
            </div>
        </div>
</div> <!-- /login -->  

    <!-- The tab on top --> 
    <div class="tab">
        <ul class="login">
            <li class="left">&nbsp;</li>
            <li>Hello <?php echo $username; ?> </li>
            <li class="sep">|</li>
            <li id="toggle">
                <a id="open" class="open" href="#">Log In | Register</a>
                <a id="close" style="display: none;" class="close" href="#">Close Panel</a>         </li>
            <li class="right">&nbsp;</li>
        </ul> 
    </div> <!-- / top --> 
```

我的问题是 innerhtml 正在显示，但是用于向下滑动面板 div 的 jquery 功能不起作用

# c++ - 访问私有成员以在 C++ 中进行测试

> ID：11476164
> 
> 赞同：0
> 
> 时间：2012-07-13T18:24:11.943
> 
> 标签：c++, testing, private

我正在开发解决大约 100 个方程的代码。大多数这些方程都是在私有成员中计算的，因为最终用户并不关心它们。但是，现在我愿意。因此，当我开发代码时，我希望有一种快速的方法来测试私人成员。

下面的代码给出了我想要的基本行为，但它不起作用（隐私问题）。如果这种行为是可能的，我将不胜感激。

```
// Includes
#include <stdio.h>

// I want a general test class that can access private members
template <class Name> class TestClass{
    public:
        TestClass(Name& input) : the_class(input){}
        Name& operator()(){ return the_class; }
        Name& the_class;
};

// The class I want to test
class ClassA{
    public:
        friend class TestClass<ClassA>; // I hoped this would do it, but it doesn't
        ClassA(){}              
    private:
        void priv(){ printf("a private function\n"); }
};

// Main function that preforms the testing
int main (){
    ClassA a;
    TestClass<ClassA> b(a);
    b().priv(); // I want to do this
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:30:23.377

您已授予 友谊`TestClass<ClassA>`，但您却在坚持这种友谊`main()`。

您的选择是：

*   编写一个转发函数`TestClass<>`调用`the_class.priv()`
*   为实际需要它的功能授予友谊。（我想这实际上不在*您* `main()`的实际程序中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:38:48.983

对此有不同的方法。从高级的角度来看，您可以在`TestClass`适配器中提供与测试类型相同的功能，并让它转发请求。另一种选择是结交一个测试类，它实际上将在成员函数中执行测试。

* * *

*下面的代码无法编译，它显示了要采取的方法，但细节已关闭。阅读 Kerrek 在评论中链接的文章以获取更多详细信息*

* * *

最后，如果你想滥用你的 C++-fu，你可以通过使用显式模板实例化和成员指针来破坏访问说明符（我是在头脑中写下这个，它可能无法编译，但想法就在那里......如果出现编译器错误，只需与它们作斗争）：

```
template <typename T, void (T::*Ptr)() >
struct accessor {
   typedef void (T::*ptr_t)();
   static ptr_t ptr;
};
template <typename T, void (T::*Ptr)() >
accessor<T,Ptr>::ptr_t accessor<T,Ptr>::ptr = Ptr;

template accessor<ClassA, &ClassA::priv>;
typedef accessor<ClassA, &ClassA> priv_accessor;
int main() {
   ClassA a;
   (a.*priv_accessor::ptr)();
} 
```

这里的方法使用模板实例化来中断访问，因为模板显式实例化的参数不检查访问（否则不可能用私有成员实例化该模板，因为显式模板实例化必须在命名空间级别发生，并且您不能成为命名空间的朋友）

# java - 使用 Rally Rest API 时在提交前检查查询的有效性

> ID：11476165
> 
> 赞同：1
> 
> 时间：2012-07-13T18:24:15.600
> 
> 标签：java, rally

我有一个 UI 界面，我的用户可以在其中为 Rally 中的查询设置参数。当他们定义查询时，我想在发送 query() 请求之前检查它是否有效。这将对只有某些允许值的项的成员有很大帮助，例如 HierarchicalRequirement 的 ScheduleState 如何只有 4 个可能的值。我认为如果可能的话，不对所有这些信息进行硬编码并从 Rally 中检索它会更实用，也更省时。有谁知道是否有办法动态检索任何字段的允许值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:46:22.900

您可以通过查询[TypeDefinition](https://rally1.rallydev.com/slm/doc/webservice/body.jsp#TypeDefinition)并查看[AttributeDefinitions](https://rally1.rallydev.com/slm/doc/webservice/body.jsp#AttributeDefinition)的集合来找到该信息。在每个属性定义上都有一个名为 AllowedValues 的集合，您可以在其中找到该字段的合法选项。

# python - 如何在matplotlib python中的白色背景上以不同的随机颜色显示对象？

> ID：11476172
> 
> 赞同：2
> 
> 时间：2012-07-13T18:24:52.103
> 
> 标签：python, matplotlib

我有一个图像，其中我有用数字标记的对象，例如属于对象 1 的所有像素都具有值 1，依此类推。图像的其余部分为零。

我想以不同的随机颜色和白色背景查看每个对象。

我尝试了几种颜色贴图，如灰色、喷射等，但它们都不符合要求，因为它们按顺序将物体从暗到亮着色。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:57:05.187

使用随机颜色制作自己的颜色图是解决此问题的快速方法：

```
colors = [(1,1,1)] + [(random(),random(),random()) for i in xrange(255)]
new_map = matplotlib.colors.LinearSegmentedColormap.from_list('new_map', colors, N=256) 
```

第一种颜色是白色，给你白色的背景。

完整代码在行动：

```
import scipy
from scipy import ndimage
import matplotlib.pyplot as plt
import matplotlib
from random import random

colors = [(1,1,1)] + [(random(),random(),random()) for i in xrange(255)]
new_map = matplotlib.colors.LinearSegmentedColormap.from_list('new_map', colors, N=256)

im = scipy.misc.imread('blobs.jpg',flatten=1)
blobs, number_of_blobs = ndimage.label(im)

plt.imshow(blobs, cmap=new_map)
plt.imsave('jj2.png',blobs, cmap=new_map)
plt.show() 
```

样本标记，随机颜色输出：

![在此处输入图像描述](../Images/34b0ae87aecde18df68a6388d2b11984.png)

希望这对你来说是随机的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-25T08:54:10.427

我遇到了同样的问题，但我想使用 HSV 颜色。

这是所需的适应：

*请注意，在这种情况下，我知道标签的数量（nlabels）*

```
from matplotlib.colors import LinearSegmentedColormap
import colorsys
import numpy as np

#Create random HSV colors
randHSVcolors = [(np.random.rand(),1,1) for i in xrange(nlabels)]

# Convert HSV list to RGB
randRGBcolors=[]
for HSVcolor in randHSVcolors:
  randRGBcolors.append(colorsys.hsv_to_rgb(HSVcolor[0],HSVcolor[1],HSVcolor[2]))

random_colormap = LinearSegmentedColormap.from_list('new_map', randRGBcolors, N=nlabels) 
```

我没有使用白色作为第一种颜色，但应该与之前的答案相同以实现它。

# google-apps-script - 当 Google 电子表格发送电子邮件时，使用脚本编辑器创建时间戳

> ID：11476173
> 
> 赞同：0
> 
> 时间：2012-07-13T18:24:52.473
> 
> 标签：google-apps-script

我目前正在通过 RSS 提要将数据接收到我的电子表格中。我有一个脚本（如下），我希望在时间触发器（每分钟）上运行它以检查数据，然后如果数据符合某些标准，则依次发送电子邮件。

问题：发送第一封电子邮件后，我想创建一个系统来检查脚本中的（时间戳？）是否已经发送了该特定数据行的电子邮件。这是最好的方法吗？我该怎么做？脚本如下。

```
function sendEmail(email_address, email_subject, email_message) {
  MailApp.sendEmail(email_address, email_subject, email_message);
}

function test_sendEmail() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var cell = sheet.setActiveCell('A2');
  var criterion_cutoff = 5;
  var i = 0;
  var addr;
  var subj;
  var msg;
  do {
    addr = cell.offset(i,0).getValue();
    subj = cell.offset(i,1).getValue();
    msg = cell.offset(i,2).getValue();
    criterion = cell.offset(i,3).getValue();

    if(criterion < criterion_cutoff) {
      sendEmail(addr,subj,msg);
      Browser.msgBox('Sending email to: ' + addr);
    }
    i++;
  } while( cell.offset(i, 0).getValue().length > 0 )

  Browser.msgBox('Done!');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:21:55.713

如果我正确理解您的问题，您需要某种方式来标记电子表格中您已为其发送电子邮件的哪些行，这样您就不会发送重复邮件。如果是这样，那么本教程将展示一种方法：[https ://developers.google.com/apps-script/articles/sending_emails#section2](https://developers.google.com/apps-script/articles/sending_emails#section2)

# asp.net-mvc-3 - 我可以在 MVC 3 控制器操作中使用 Id 参数作为复杂参数的 Id 吗？

> ID：11476174
> 
> 赞同：0
> 
> 时间：2012-07-13T18:24:56.840
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, model-binding

我有一个控制器动作如下

```
public class HomeController : BaseController
{
    public JsonResult Index(ComplexObject customObject)
    {
        ...
    }

    ...
} 
```

这就是 ComplexObject 的样子

```
public class ComplexObject
{
    public int? Id { get; set; }

    ...
} 
```

这是我在区域注册中定义的内容：

```
 context.MapRoute(
            "MyArea_default",
            "MyArea/{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new[] { "MyApp.Areas.MyArea.Controllers" }
        ); 
```

我想做的是访问我的控制器操作，例如

[https://mysite.com/MyArea/](https://mysite.com/MyArea/) {value_of_id}

并让我的 ComplexObject 模型绑定器使用传入的 id 初始化一个新的 ComplexObject。

这可能吗？互联网搜索根本没有提供任何帮助。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:26:49.743

是的，mvc 会将路由参数绑定到复杂对象。你真的试过了吗？

# model-view-controller - MVC Pattern 和 VBD(view-busines-data access) 是一回事吗？

> ID：11476177
> 
> 赞同：0
> 
> 时间：2012-07-13T18:25:08.197
> 
> 标签：model-view-controller

我有以下（理论架构）：

*   视图层：以 PHP 显示页面的网站
*   一个业务逻辑层分为两部分：一个与视图层通信，另一个由一个java项目组成
*   一个数据访问层，它让“两个”业务层与两个数据库进行通信

问题是：这可以被认为是 MVC 模式吗？

![在此处输入图像描述](../Images/72a4bb4535d91c0e532419e07eae0c33.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:04:14.760

不，MVC 和 VBD 不一样。这不是经典的 MVC 设计模式，也不是与 MVC 相关的任何东西。当新手第一次被告知“关注点分离”时，这就是他们所做的。

1.  没有控制器，也没有任何类似于控制器的结构。通常，表示层由视图和控制器实例组成。但看起来负责交互的部分丢失了。基本上，V和C之间没有分离。

2.  出于某种奇怪的原因，PHP 端的域对象（包含业务逻辑的）可以直接访问 Java 端的域对象。这意味着它们通过服务直接交互。

3.  在 MVC 设计模式中，数据访问逻辑是模型层的一部分（以数据映射器或事务脚本的形式）。在这似乎是分开的。

4.  领域对象和表示层之间存在直接的双向交互，这意味着表示层包含一些领域逻辑。

5.  您在域对象中有“JavaScript API”。这是表示逻辑的一部分。

底线：整个事情是一团糟。

# tibco - 在 TIBCO Rendezvous 中创建侦听器

> ID：11476178
> 
> 赞同：1
> 
> 时间：2012-07-13T18:25:09.993
> 
> 标签：tibco

我正在尝试在 tibco 集合点创建一个侦听器。我想听一个特定的主题。我知道它应该看起来像这样：

```
TibrvListener(
TibrvQueue queue,
TibrvMsgCallback callback,
TibrvTransport transport,
java.lang.String subject,
java.lang.Object closure)
throws TibrvException 
```

我有这个代码。但是，我不知道几件事。如何创建`TibrvMsgCallback`对象？我如何通过交通工具？我有一个发布者将消息作为单独的程序发送。我是否在订阅程序中重新创建相同的传输？

```
queue = new TibrvQueue();
dispatcher = new TibrvDispatcher(queue);
queue.setName(key);
this.listener = new TibrvListener(queue, null, null, subject, null);
TibrvTransport message = this.listener.getTransport(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:49:04.997

You first open the Tibrv Tibrv.open(Tibrv.IMPL_NATIVE);

Create transport TibrvTransport transport = new TibrvRvdTransport(service, network, daemon);

Create Listener new TibrvListener(Tibrv.defaultQueue(), this, transport, subject, null);

If your listener is "this", your class needs to implement TibrvMsgCallback

Messages can be processed on arrival in the onMsg(TibrvListener listener, TibrvMsg msg) method.

# architecture - 应用程序服务是否驻留在服务层中？

> ID：11476179
> 
> 赞同：0
> 
> 时间：2012-07-13T18:25:15.177
> 
> 标签：architecture, domain-driven-design

应用服务通过对工作流、基础设施服务、域服务和域实体的调用和协调来完成客户端（即表示层）发出的命令。

我假设应用程序服务驻留在服务层中？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:57:05.443

在 DDD 中，应用服务是应用层的一部分。服务层是 Martin Fowler 对应用层的称呼。

# ruby - 红宝石正则表达式黑魔法

> ID：11476185
> 
> 赞同：0
> 
> 时间：2012-07-13T18:25:22.303
> 
> 标签：ruby, regex, command-line-arguments

所以我设法使用正则表达式发明了一些黑魔法。我正在尝试解析一些命令行参数，并且我想接受格式`test[somethinginhere]`为“somethinginhere”是要运行的测试名称的任何参数。

这就是代码的样子。后面还有更多代码实际使用布尔值执行函数，但这是处理参数的部分。

```
ARGV.each do |arg|
    case arg.downcase
        when "help"
            @help = true
        when "install"
            @install = true
        when "deploy"
            @deploy = true
        when "configure"
            @configure = true
        when /^test\[([a-z]+)\]$/
            @test << arg.downcase[/^test\[([a-z]+)\]$/,1]
        else
            @usage = true
    end

end 
```

现在这里是黑魔法的用武之地：对于任何不包含小写“s”的测试名称，该程序将正常运行。以下将通过：

```
$ ./AutoTest.rb test[a]
Running Test "ATest"

$ ./AutoTest.rb test[b]
Running Test "BTest"

$ ./AutoTest.rb test[anything]
Running Test "AnythingTest" 
```

以下将失败：

```
$ ./AutoTest.rb test[s]

Usage: AutoTest [help|install|deploy|configure|test[*]] 
```

但这会过去：

```
$ ./AutoTest.rb test[S]

Running Test "STest" 
```

实际上，任何带有小写字母 s 的东西都会失败：

```
$ ./AutoTest.rb test[user]

Usage: AutoTest [help|install|deploy|configure|test[*]] 
```

除非 s 大写：

```
$ ./AutoTest.rb test[uSer]

Running Test "UserTest" 
```

然后我能得出的唯一结论是，这个正则表达式已经利用了 Black Magic 的秘密，并且在这一点上变得如此强大以至于它甚至可以自己解析 HTML。

但说真的，这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:32:31.940

带有小写 s 的括号在 bash 中具有特殊含义。我通过执行以下操作发现了这一点：

```
$ echo test[S]
test[S]

$echo test[s]
tests 
```

这适用于括号内任意位置的 s

```
$echo test[user]
tests

$echo test[uSer]
test[uSer] 
```

仍然不知道这个黑魔法是从哪里来的，但我的问题的解决方案是不再使用括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:34:54.750

试试这个：

./AutoTest.rb "测试[用户]"

# python - 为什么（0-6）是-6 = False？

> ID：11476190
> 
> 赞同：131
> 
> 时间：2012-07-13T18:25:47.833
> 
> 标签：python, debugging, integer, cpython

> **可能重复：**
> [Python“is”运算符对整数的行为异常](https://stackoverflow.com/questions/306313/python-is-operator-behaves-unexpectedly-with-integers)

今天我尝试调试我的项目，经过几个小时的分析，我得到了这个：

```
>>> (0-6) is -6
False 
```

但，

```
>>> (0-5) is -5
True 
```

你能给我解释一下，为什么？也许这是某种错误或非常奇怪的行为。

```
> Python 2.7.3 (default, Apr 24 2012, 00:00:54) [GCC 4.7.0 20120414 (prerelease)] on linux2
>>> type(0-6) 
<type 'int'>
>>> type(-6) 
<type 'int'>
>>> type((0-6) is -6)
<type 'bool'>
>>> 
```

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-07-13T18:29:38.370

从 -5 到 256 的所有整数都被缓存为与 CPython 共享相同地址的全局对象，因此`is`测试通过。

这个工件在[http://www.laurentluce.com/posts/python-integer-objects-implementation/中有详细解释，我们可以在](http://www.laurentluce.com/posts/python-integer-objects-implementation/)[http://hg.python.org/cpython/file](http://hg.python.org/cpython/file/tip/Objects/longobject.c)中查看当前的源代码[/tip/Objects/longobject.c](http://hg.python.org/cpython/file/tip/Objects/longobject.c)。

> 特定结构用于引用小整数并共享它们，因此访问速度很快。它是一个包含 262 个指向整数对象的指针的数组。这些整数对象是在初始化期间在我们上面看到的整数对象块中分配的。小整数的范围是 -5 到 256。许多 Python 程序花费大量时间使用该范围内的整数，所以这是一个明智的决定。

*这只是 CPython 的一个实现细节，你不应该依赖它。*例如，[PyPy](http://doc.pypy.org/en/latest/interpreter-optimizations.html#caching-small-integers)实现了`id`整数的返回自身，所以`(0-6) is -6`即使它们在内部是“不同的对象”，也总是如此；它还允许您配置是否启用此整数缓存，甚至设置下限和上限。但一般来说，从不同来源检索到的对象不会是相同的。如果要比较相等性，只需使用`==`.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-13T18:30:25.867

Python 在解释器中存储 -5 - 256 范围内的整数：它有一个整数对象池，从中返回这些整数。这就是为什么这些对象是相同的：但不是`(0-5)`，因为它们是在现场创建的。`-5``(0-6)``-6`

这是CPython源代码中的源代码：

```
#define NSMALLPOSINTS           257
#define NSMALLNEGINTS           5
static PyIntObject *small_ints[NSMALLNEGINTS + NSMALLPOSINTS]; 
```

（[查看 CPython 源代码](http://svn.python.org/projects/python/trunk/Objects/intobject.c)：）`/trunk/Objects/intobject.c`。源代码包括以下注释：

```
/* References to small integers are saved in this array so that they
   can be shared.
   The integers that are saved are those in the range
   -NSMALLNEGINTS (inclusive) to NSMALLPOSINTS (not inclusive).
*/ 
```

然后，`is`操作员将比较它们 ( `-5`) 是否相等，因为它们是相同的对象（相同的内存位置），但另外两个新整数 ( `-6`) 将位于不同的内存位置（然后`is`不会返回`True`）。请注意，`257`在上面的源代码中是正整数，所以是`0 - 256`（包括）。

（[来源](http://www.laurentluce.com/posts/python-integer-objects-implementation/)）

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-07-13T18:30:13.210

这不是一个错误。`is`不是平等测试。`==`会给出预期的结果。

这种行为的技术原因是 Python 实现可以自由地将相同常量值的不同实例视为相同对象或不同对象。出于节省内存的原因，您使用的 Python 实现选择使某些小常量共享同一个对象。您不能依赖此行为是相同的版本或不同的 Python 实现。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-07-13T18:31:40.067

这是因为 CPython 缓存了一些小整数和小字符串，并为该对象的每个实例提供了相同的`id()`.

`(0-5)`和`-5`具有相同的值，而对于和`id()`则不成立`0-6``-6`

```
>>> id((0-6))
12064324
>>> id((-6))
12064276
>>> id((0-5))
10022392
>>> id((-5))
10022392 
```

同样对于字符串：

```
>>> x = 'abc'
>>> y = 'abc'
>>> x is y
True
>>> x = 'a little big string'
>>> y = 'a little big string'
>>> x is y
False 
```

有关字符串缓存的更多详细信息，请阅读：[`is`运算符在将字符串与空格进行比较时表现不同](https://stackoverflow.com/questions/16756699/is-operator-behaves-differently-when-comparing-strings-with-spaces)

# hibernate - 没有@EmbeddedId 的复合键

> ID：11476195
> 
> 赞同：1
> 
> 时间：2012-07-13T18:26:09.287
> 
> 标签：hibernate, annotations, composite-primary-key

有没有办法在 Hibernate 中创建带有注释的复合键，而无需创建新的 PK 类（即@EmbeddedId）？

我的问题是，我有一个具有许多属性的抽象类 CommonClass，我需要为许多实体类继承它。每个类都有不同类型的 id，但它们都需要是具有 CommonClass 属性的复合键。例子：

```
@MappedSuperclass
abstract class CommonClass {
    @Id
    int typed;

    int a0;
    int a1;
    //many other attributes
}

@Entity
class EntityString extends CommonClass {
    @Id
    String id;
    //ID need to be id+typed from CommonClass

    //other attributes
}

@Entity
class EntityInteger extends CommonClass {
    @Id
    Integer id;
    //ID need to be id+typed from CommonClass

    //other attributes
} 
```

那么，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:40:48.307

[以下休眠文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)的第 2.2.3.2.2 节。

> 另一种可以说更自然的方法是将@Id 放置在我的实体的多个属性上。这种方法仅受 Hibernate 支持，但不需要额外的可嵌入组件。

```
@Entity
class Customer implements Serializable {
  @Id @OneToOne
  @JoinColumns({
    @JoinColumn(name="userfirstname_fk", referencedColumnName="firstName"),
    @JoinColumn(name="userlastname_fk", referencedColumnName="lastName")
  })
  User user;

  @Id String customerNumber;

  boolean preferredCustomer;
}

@Entity 
class User {
  @EmbeddedId UserId id;
  Integer age;
}

@Embeddable
class UserId implements Serializable {
  String firstName;
  String lastName;
} 
```

# java - maven 无法识别来自 build-helper-maven-plugin 的执行标签

> ID：11476196
> 
> 赞同：3
> 
> 时间：2012-07-13T18:26:12.190
> 
> 标签：java, gwt, maven

我正在尝试使用 Maven 将资源（.java、.gwt.xml、.ui.xml）从项目 A 导出到项目 B。所以在项目 AI 中编写以下 pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>com.pe.interbank</groupId>
    <artifactId>reactor</artifactId>
    <version>1.0.0</version>
    <relativePath>../reactor</relativePath>
</parent>

<properties>
    <path2>Reactor/pom.xml</path2>
    <path1>C:/Angelo/Workspace/MultipleGWTv2/Reactor/pom.xml</path1>
</properties>

<artifactId>transferencias</artifactId>
<packaging>jar</packaging>
<name>transferencias</name>

<build>
    <resources>
        <resource>
            <directory>src/main/java</directory>
            <includes>
                <include>**/*.java</include>
                <include>**/*.gwt.xml</include>
            </includes>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <execution>
                <phase>generate-sources</phase>
                <goals>
                    <goal>add-source</goal>
                </goals>
                <configuration>
                    <sources>
                        <source>src/main/java</source>
                    </sources>
                </configuration>
            </execution>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        <version>2.4.0</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
    </dependency>
</dependencies> 
```

但是当我运行 Install Maven 时，我得到了这个错误：

```
The build could not read 1 project -> [Help 1]

The project com.pe.interbank:transferencias:1.0.0 (C:\Angelo\Workspace\MultipleGWTv2\Transferencias\pom.xml) has 1 error

 Malformed POM C:\Angelo\Workspace\MultipleGWTv2\Transferencias\pom.xml: Unrecognised tag: 'execution' (position: START_TAG seen ...</artifactId>\r\n\t\t\t\t<execution>... @36:16)  @ C:\Angelo\Workspace\MultipleGWTv2\Transferencias\pom.xml, line 36, column 16 -> [Help 2] 
```

有谁知道为什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:53:26.640

`<execution>`元素必须用`<executions>`集合容器包围，即使您指定单个`<execution>`.

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>build-helper-maven-plugin</artifactId>
  <executions> <!-- Notice the container element here -->
    <execution>
    ... 
```

# php - PHP 格式电子邮件

> ID：11476197
> 
> 赞同：1
> 
> 时间：2012-07-13T18:26:21.473
> 
> 标签：php, string, email

在输入`<textarea>`文本中看起来不错的 3 行

```
First Line 
John Smith
Ivan Normand 
```

当我用 php 捕获输入并发送电子邮件文本时看起来像这样 当我用 php 捕获输入并发送电子邮件文本看起来像这样

```
First Line                    Bellman:\r\n                          \r\nJohn Smith\r\nIvan Normand 
```

我使用 Thunderbird 接收电子邮件，我看到了这个混乱。它在网络邮件中正确显示。

```
$message = $_POST["message"];

$headers = "From: $from";

// boundary

$semi_rand = md5(time());

$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

// headers for attachment

$headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

// multipart boundary

$message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"utf-8\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";

$message .= "--{$mime_boundary}\n";

// preparing attachments

for ($x = 0; $x < count($files); $x++) {

    $file = fopen($files[$x], "rb");

    $data = fread($file, filesize($files[$x]));

    fclose($file);

    $data = chunk_split(base64_encode($data));

    $message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$files[$x]\"\n" .

        "Content-Disposition: attachment;\n" . " filename=\"$names[$x]\"\n" .

        "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";

    if ($x == count($files) - 1) {
        $message .= "--{$mime_boundary}--\r\n";
    } else {
        $message .= "--{$mime_boundary}\n";
    }
}

// send

$ok = @mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:36:13.117

您可以使用php 的[nl2br()](http://php.net/nl2br)将 '\n' 字符转换为 '
'。

你可以像下面这样使用它：

```
$message = nl2br($_POST["message"]); //Please take care of sql injection here 
```

# c - 什么是 12345 >> 2 真的在做算术？

> ID：11476198
> 
> 赞同：3
> 
> 时间：2012-07-13T18:26:21.943
> 
> 标签：c, bit-manipulation, informix, 4gl, meter

我的问题是在下面的例子中`val = val >> 2;`做什么？那就是我相信它是除以4。

```
int val = 12345678;
val = val >> 2; 
```

这是这个问题的背景。

我有一个水表读数，比如 12345678。我们的水表工作方式是将右侧的两个数字丢弃以供读取，因此 123456 确实是读数。（有理由丢弃与水流如何使寄存器转动有关的两个右手数字。不过，这与我的问题无关。）

目前，我们使用 4GL 整数变量将 12345678 除以 100，所以我没有得到十进制数。我们得到了我们没想到的截断，我正在尝试确定位移是否会更好。

在读取被截断为 123456 后，使用最后一次读取（也被截断）计算增量，并由此产生消耗。

我在 Informix 4GL 中可以使用 C，我相信删除最低两位数的最佳方法是右移 2。我相信这是我将获得的唯一方法——例如——

```
5 digit meter   12345 --> 123
6  "     "     123456 --> 1234
7  "     "    1234567 --> 12345 
```

感谢您容忍一个简单的问题。我们试图找出一个问题，即与仪表对话的端点是如何编程的，以及来自端点的数据真正意味着什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T18:28:51.700

位移会丢弃最后两个*二进制*数字，而不是*十进制*数字。它相当于整数除以四。您需要除以 100 以丢弃最后两位小数。

101111000110000101001110 [bin] = 12345678 [dec]

101111000110000101001110 [bin] >> 2 [dec] = 1011110001100001010011 [bin]

1011110001100001010011 [bin] = 3086419 [dec]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T18:36:18.217

'>>' 执行按位移位操作。

要了解它的作用，您首先将 12345678 转换为二进制。

```
12345678 = 100101101011010000111 
```

'>>' 表示您将每个位向右移动，在您的示例中，移动 2 个位置。（<<向左移动）

```
100101101011010000111 >> 2 = 001001011010110100001 
```

然后转换回十进制：308641

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:38:06.340

```
12345678       : 101111000110000101001110
12345678 >> 2  : 1011110001100001010011
12345678 / 4   : 1011110001100001010011 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T00:28:19.647

在 i4gl 中，您可以轻松地将数字转换为 CHAR，将其截断 [1,6]，然后将其转换回 INT。

编辑：请参阅[i4gl 中的类型转换](https://stackoverflow.com/questions/10012874/type-conversion-in-informix-4gl)

# javascript - javascript停止无限循环

> ID：11476200
> 
> 赞同：5
> 
> 时间：2012-07-13T18:26:33.440
> 
> 标签：javascript, node.js, infinite-loop, child-process

这是 node.js。

如果满足多个条件，我有一个函数可能会变成无限循环。不受信任的用户设置了这些条件，因此出于此问题的目的，请假设无限循环是无法修复的。

我仍然需要一种方法来停止无限循环。

这是我正在尝试做的一些示例代码：

```
var infiniteloop = false;
var condition = true
function loop () {
  while (condition) {
    console.log('hi')
    if (infiniteloop) {
      condition = false
      console.log('oh last one')
    }
  }
}

loop() 
```

所以有几个问题基于我正在尝试做的事情。

1.  如果`infiniteloop`变量设置为true，循环将停止对吗？
2.  如何检测无限循环？每 3 秒检查一次会很好。
3.  如果`infiniteloop`变量在同一进程上，则在循环时无法更改变量。我必须将变量存储在不同的进程中吗？
4.  无论检测到无限循环是否需要存在于不同的进程中？理想情况下，相同的过程会很好，但有什么用？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T21:47:39.507

基于其他提议的混合解决方案：

```
function Worker()
{
    this.MaxIterations = 1000000;
    this.Enabled = true;    
    this.condition = true;
    this.iteration = 0;
    this.Loop = function()
    {
        if (this.condition 
            && this.Enabled 
            && this.iteration++ < this.MaxIterations)
        {
            console.log(this.iteration);
            setTimeout(this.Loop.bind(this),0);
        }
    };  
    this.Stop = function()
    {
        this.Enabled = false;
    };
}
var w = new Worker();
setTimeout(w.Loop.bind(w), 0);
setTimeout(w.Stop.bind(w), 3000); 
```

不确定这是最优的，但应该可以按预期工作。

使用 setTimeout 来恢复循环允许主 node.js 事件循环处理其他事件，例如 w.Stop。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:33:28.240

在这种情况下，无穷大取决于您循环的最大迭代次数。这段代码阻塞了 JavaScript 的单线程特性，所以除非你使用网络工作者，否则无论如何你都会锁定一切。最好不要每 x 秒检查一次，因为此代码无论如何都会阻止执行间隔或超时，而是将其作为循环迭代的最大阈值放在循环本身内。

```
var infiniteloop = false;
var condition = true;
var loopCounter = 1;
var maxLoopIterations = 1000; 
function loop () {
  while (condition) {
    console.log('hi');
    infiniteLoop = (loopCounter >= maxLoopIterations); 
    if (infiniteloop) {
      condition = false;
      console.log('oh last one');
      break;
    }
    loopCounter++;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-27T06:43:14.897

实际上，您不需要停止无限循环。采用`setImmediate`

例如：

```
var immediateId;

function loop () {
    console.log('hi');
    immediateId = setImmediate(loop);
}

loop(); 
```

这段代码会一直说**你好**，直到你停止它。

```
//stop the loop:
clearImmediate(immediateId); 
```

为什么使用`setImmediate`

1.  内存消耗保持在较低水平，不会造成内存溢出；
2.  不会抛出`RangeError: Maximum call stack size exceeded`；
3.  性能好；

* * *

此外，

我创建了这个模块来轻松管理无限循环：

```
var util = require('util');
var ee = require('events').EventEmitter;

var Forever = function() {
    ee.call(this);
    this.args = [];
};

util.inherits(Forever, ee);

module.exports = Forever;

Forever.prototype.add = function() {
    if ('function' === typeof arguments[0]) {
        this.handler = arguments[0];
        var args = Array.prototype.slice.call(arguments, 1);
        if (args.length > 0) {
            this.args = args;
        }
    } else {
        this.emit('error', new Error('when using add function, the first argument should be a function'));
        return 0;
    }
    return this;
};

Forever.prototype.run = function() {
    var handler = this.handler;
    var args = this.args;
    var that = this;

this._immediateId = setImmediate(function() {
        if (typeof handler === 'function') {

            switch (args.length) {
                // fast cases
                case 0:
                    handler.call(that);
                    that.run();
                    break;
                case 1:
                    handler.call(that, args[0]);
                    that.run();
                    break;
                case 2:
                    handler.call(that, args[0], args[1]);
                    that.run();
                    break;
                    // slower
                default:
                    handler.apply(that, args);
                    that.run();
            }
                } else {
                //no function added
                that.emit('error', new Error('no function has been added to Forever'));
            }
        });
};

Forever.prototype.stop = function() {
    if (this._immediateId !== null) {
        clearImmediate(this._immediateId);
    } else {
        this.emit('error', new Error('You cannot stop a loop before it has been started'));
    }
};

Forever.prototype.onError = function(errHandler) {
    if ('function' === typeof errHandler) {
        this.on('error', errHandler);
    } else {
        this.emit('error', new Error('You should use a function to handle the error'));
    }
    return this;
}; 
```

示例用法：

```
var Forever = require('path/to/this/file');
var f = new Forever();

// function to be runned
function say(content1, content2){
    console.log(content1 + content2);
}

//add function to the loop
//the first argument is the function, the rest are its arguments
//chainable api
f.add(say, 'hello', ' world!').run();

//stop it after 5s
setTimeout(function(){
    f.stop();
}, 5000); 
```

就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-28T07:34:16.017

您可以创建一个子进程（fork）来检查您的实际进程是否正在响应。如果没有响应，fork 将向父级发送消息 - 杀死父级并分叉。类似于您在此要点中可以看到的内容：[https ://gist.github.com/kevinohara80/3173692](https://gist.github.com/kevinohara80/3173692)

如果您要使用 express node.js 服务器，您可以尝试中间件[harakiri](https://github.com/knyga/harakiri)，它可以满足您的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-27T09:14:35.337

我想介绍我的解决方案。在我的例子中，我有几个无限循环（`while(true)`），它们只被`break`语句终止。`break`很难确定是否达到了这些语句的条件，并且该算法不是我自己开发的，因此完全重构也不是一种选择。

我喜欢@JasonSebring 提供的带有循环计数器的简单解决方案。在我的情况下，只需设置迭代次数的限制就可以了。但是我不想将所有这些变量都插入到我的代码中，而且我需要一个适用于嵌套循环的解决方案。所以我想出了这个包装函数：

```
/**
 * Stop potential infinite loops after a certain number of iterations.
 * @param loopLimit - The maximum number of iterations before loop is aborted.
 * @param silentStop - Whether to abort the loop silently or throw an error instead.
 * @param callBack - Function representing the inner code of the loop.
 */
static finiteLoopHelper(loopLimit, silentStop, callBack) {
  let loopCounter = 0;
  let stopLoop = false;

  while (!stopLoop) {
    // Return value from the callback can invoke an early stop, like a break statement.
    stopLoop = callBack();

    loopCounter++;
    if (loopCounter >= loopLimit) {
      stopLoop = true;
      if (!silentStop) {
        throw Error(`Loop aborted after ${loopLimit} iterations.`);
      }
    }
  }
} 
```

用法是这样的：

```
let someVariable = 0;

finiteLoopHelper(1000, false, () => { // this line replaces "while (true) {"
  someVariable = someCalculation();
  if (someVariable === someCondition) {
    return false; // like continue in a normal loop.
  }
  codeNotExecutedInCaseOfContinue();

  if (someVariable === someOtherCondition) {
    return true; // like break in a normal loop.
  }

  // Return value at the end can be omitted, because without it the function
  // will return undefined which also keeps the loop running.
  // return false;
}); 
```

如果您的循环之前有条件，则必须在箭头函数内检查此条件并`return true;`像上面的示例一样使用。

由于没有暴露循环计数器，因此可以嵌套此解决方案，而无需为内部循环的计数器找到不同的变量名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-19T23:20:39.963

在函数中，只需返回 false 或 undefined。

在函数中手动抛出新的错误（“错误”）。

设置一个在定时器上运行的函数——var timer = setInterval(FUNCTION, 1000)。然后清除它停止 - clearInterval(timer)

使用可以终止的工作人员运行脚本。

使用 window.stop() 来阻止页面加载和运行。

仅适用于 NodeJS – 使用 process.abort() 或 process.exit()。

# f# - F# 中的 mixin 或 trait

> ID：11476203
> 
> 赞同：11
> 
> 时间：2012-07-13T18:26:54.920
> 
> 标签：f#, functional-programming

有没有办法在 Ruby 中实现 mixin 或在 F# 中的 Scala 中实现 trait？

我想要的是基本上将一个模块复制到另一个模块中，以便它共享其他模块的功能但关闭以供修改。或者，一种OOP的思考方式，除了不能修改父对象外，我想要多重继承。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T20:30:22.377

你可以滥用`inline`和成员约束来做鸭子类型，这让你获得了 mixins 的一些好处。例如，您可以翻译这段 Ruby 代码（取自[本教程](http://www.rubycentral.com/pickaxe/tut_modules.html)）：

```
module Debug
  def whoAmI?
    "#{self.type.name} (\##{self.id}): #{self.to_s}"
  end
end
class Phonograph
  include Debug
  # ...
end
class EightTrack
  include Debug
  # ...
end
ph = Phonograph.new("West End Blues")
et = EightTrack.new("Surrealistic Pillow")
ph.whoAmI?  »   "Phonograph (#537766170): West End Blues"
et.whoAmI?  »   "EightTrack (#537765860): Surrealistic Pillow" 
```

对此：

```
type Phonograph(id, name) =
  member x.Id : int = id
  override x.ToString() = name

type EightTrack(id, name) =
  member x.Id : int = id
  override x.ToString() = name

module Debug =
  let inline whoAmI x =
    sprintf "%s (%d) : %s" 
      (^T : (member GetType : unit -> Type) x).Name
      (^T : (member Id : int with get) x)
      (^T : (member ToString : unit -> string) x)

let ph = Phonograph(537766170, "West End Blues")
let et = EightTrack(537765860, "Surrealistic Pillow")

Debug.whoAmI ph //"Phonograph (537766170) : West End Blues"
Debug.whoAmI et //"EightTrack (537765860) : Surrealistic Pillow" 
```

与不需要公共基类或接口的扩展方法相比，它具有（有争议的）优势。关于您之前关于`open`关键字的问题，您可以定义几个模块`whoAmI`，`open`最后一个会影响以前的模块。通过这种方式，您可以“混入”您想要的模块。F# 核心库使用与[检查运算符](http://msdn.microsoft.com/en-us/library/ee340296.aspx)类似的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:32:51.823

Ruby mixin 最好用 .NET 框架中的扩展方法（类型扩展）来模拟。我不相信 F# 有任何更类似于 mixin、特征或多重继承的特殊语言特性。

请参阅此问题：[如何创建扩展方法 (F#)？](https://stackoverflow.com/questions/1523500/how-do-i-create-an-extension-method-f)

而这个描述：http: [//msdn.microsoft.com/en-us/library/dd233211.aspx](http://msdn.microsoft.com/en-us/library/dd233211.aspx)

为了速度，这是 MSDN 上给出的示例：

```
module MyModule1 =

    // Define a type.
    type MyClass() =
      member this.F() = 100

    // Define type extension.
    type MyClass with
       member this.G() = 200

module MyModule2 =
   let function1 (obj1: MyModule1.MyClass) =
      // Call an ordinary method.
      printfn "%d" (obj1.F())
      // Call the extension method.
      printfn "%d" (obj1.G()) 
```

# c++ - 有哪些用户友好的图像处理库？

> ID：11476208
> 
> 赞同：3
> 
> 时间：2012-07-13T18:27:24.283
> 
> 标签：c++, image, libraries

我是一名嵌入式系统程序员，并且做了极其有限的 Windows 开发。这就是说我坚定地坚持使用 C++，因为它比 C# 更熟悉，并且试图找出一种新语言在可用的时间范围内不是一个选项。

我现在正在做的项目是一个用于实验室的简单控制台应用程序。I/O 和循环已经完成，我遇到的问题是图像处理。我需要做的是逐个像素地扫描图像并将颜色与一些阈值进行比较。该图像将是一个绿色屏幕上的样本，我们将查看样本颜色的差异。比较逻辑很简单，但是在 Google 上花了几个小时并下载了几个库之后，我确信关于图像处理的信息太多了。

是否有一个图像处理库可以让我将图像加载到内存中，逐像素扫描，通过单个函数调用加载颜色字节，而不是让我的头爆炸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:59:23.137

对于 C++，有一个[ImageMagick](http://www.imagemagick.org/)工具集（它是开源的）。简约（仅一个文件）库：[CImg](http://cimg.sourceforge.net/)。

对于复杂的处理，请尝试[OpenCV](http://opencv.willowgarage.com)。

如果您真正需要的是访问原始字节（从一些常见的文件格式加载），那么[FreeImage](http://freeimage.sourceforge.net/)也是一种选择。

对于 C#，[以 AForge](http://www.aforgenet.com)为起点。

* * *

对于简单的控制台处理，我会选择 CImg（尽管编译时间可能令人失望）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:25:19.920

我自己没有尝试过，但如果你对 C 风格的界面没问题，[ccv](http://libccv.org/)最近一直在作为[OpenCV](http://opencv.org/)的现代版本进行传播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:43:25.333

我想建议 GDAL [http://www.gdal.org/](http://www.gdal.org/)。它有一个名为 RasterIO 的功能，可以满足您的要求。这个库的另一个优点是它可以处理几乎所有不同类型的图像格式。

# python - 创建 django admin 后获取站点匹配查询不存在错误

> ID：11476210
> 
> 赞同：62
> 
> 时间：2012-07-13T18:27:32.037
> 
> 标签：python, django, django-admin, django-sites

我正在通过标准 Django 教程为应用程序创建管理员。在设置中评论与管理员相关的内容并运行 syncdb 后，我收到以下消息：

```
DoesNotExist at /admin/ Site matching query does not exist. 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-13T18:45:59.550

缺少 Django 项目的`Site`对象。每个 Django 项目都有一个`Site`包含站点名称和域的对象。它通常是在创建 Django 项目时自动创建的（特别是在`syncdb`命令运行时），但在您的情况下，它似乎没有发生。

要解决这个问题：

打开站点的 Django shell ( `python manage.py shell`)。

键入以下内容：

```
>>> from django.contrib.sites.models import Site
>>> Site.objects.create(name='example.com', domain='example.com') 
```

如果您想稍后更改这些值，请转到您的管理面板 ( `/admin/`) 并编辑部分中的站点对象`Sites`。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-11-15T11:30:57.400

除了 Simeon Visser 对那些仍然遇到问题的人的回答之外，请确保`SITE_ID`您的设置中的变量与您新创建的对象的 ID 匹配`Site`。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-06-21T07:11:31.347

当您将**django.contrib.sites**包含到您的 INSTALLED_APPS 并运行命令“python manage.py migrate”时，应用程序会自动在“django_site”表中创建一个对象（域名和显示名称等于“example.com”。有无需自己创建。

可能您只需将设置**SITE_ID = 1**添加到您的 settings.py 文件中。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-02-06T07:21:22.363

如果您在运行后的站点表中已经有 example.com

```
python manage.py migrate 
```

您需要获取此条目的 id。

要获得 ID，您可以执行以下操作 -

```
python manage.py  shell
from django.contrib.sites.models import Site
print Site.objects.get(name='example.com').id 
```

获取您进入的 id `setting.py`。例如。

```
SITE_ID = 8 
```

基本上对应于旅游站点的表中的 ID 和 settings.py 中的 ID 应该匹配。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-02-17T20:27:40.033

从已安装的应用程序中注释掉 django.contrib.sites。IE

```
#'django.contrib.sites', 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-12T08:45:28.803

您还可以考虑使用 django 的夹具功能自动填充数据：[https ://docs.djangoproject.com/en/dev/howto/initial-data/](https://docs.djangoproject.com/en/dev/howto/initial-data/)

```
[
    {
        "model" : "sites.site",
        "pk" : 1,
        "fields": {
            "name"  : "example.com",
            "domain" : "127.0.0.1:8010"
        }
    }
] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-05T05:29:22.670

缺少站点对象，因此您必须添加 1 个站点对象

解决方案：

打开 Django shell（python **manage.py** shell）：

```
In [1]: from django.contrib.sites.models import Site

In [2]: Site.objects.create(name='example.com',domain='example.com').save()

In [3]: s=Site.objects.filter(name='example.com')[0]

In [4]: s.id
Out[4]: 3 
```

然后打开您的`settings.py`文件并添加`SITE_ID = 3` 将该值放入 `SITE_ID`= 您在 ( `s.id`)之后得到的值

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-02T16:30:00.930

我是 Django 新手。我在阅读教程时遇到了同样的错误。我的`django_site`数据库表是空的。我选择删除所有名为“django_*”的表。然后，当我重新运行时`syncdb`，创建了丢失的 django 表，并`django_site`使用 id=1、domain=example.com、name=example.com 填充了 DB 表。显然，`Site`该类由`django_site`DB 表支持。现在我了解了使用该`Site.objects.create()`方法填充表格的问题和解决方案。谢谢西蒙。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-28T15:23:25.367

如果您使用 South 和 initial_data 固定装置，数据可能无法正确加载。要修复它添加

```
if 'test' in sys.argv or 'jenkins' in sys.argv:
    SOUTH_TESTS_MIGRATE = False 
```

在设置文件的末尾

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-22T10:52:21.317

这一切都是因为如果您不小心从默认情况下（example.com）的 django 管理站点中删除了站点。下面提到的代码也引发了运行时错误。

```
from django.contrib.sites.models import Site 
```

所以只需在你`SITE_ID`的 by中增加一个`1` 例如，如果默认情况下它`1`比`2` 从 `SITE_ID = 1` TO 更改来更改它： `SITE_ID = 2`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-21T23:50:05.563

有时，如果您通过管理员添加更多站点并删除其中一些站点，每个站点都有一个 ID，一旦我更改了它开始工作的数据库中的 ID，它就对我不起作用，因此请确保 SITE_ID 与数据库中的 ID 匹配。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-05T01:52:17.640

```
from django.contrib.sites.models import Site
Site.objects.create(name='example.com', domain='example.com') 
```

以上解决了问题。

但是当我登录管理面板时，还有另一个站点 example.com，所以我相信如果有人将 SITE_ID = 2 这也可以。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-28T09:10:03.657

很长一段时间以来，我也在为同样的错误而苦苦挣扎。我错误地从管理员的站点目录中删除了 example.com。一旦我使用上述解决方案添加了站点，它就可以工作了。当我创建 example.com 时，site_id 也自动变为 2，因此也必须在我的设置文件中将 site_id 更改为 2。谢谢你。

# r - 带有自定义legend.text的ggplot

> ID：11476212
> 
> 赞同：2
> 
> 时间：2012-07-13T18:27:48.130
> 
> 标签：r, ggplot2

我正在使用 ggplot 生成一些图形，但出现以下错误：

```
Error in FUN(X[[1L]], ...) : could not find function "label.theme" 
```

尝试指定标签名称时。

这个基本图得到正确生成：

```
p <- ggplot(as.data.frame(list(a=1:5, b=1:5,c=factor(c(1,1,2,2,2)))), aes(x=a,y=b, color=c)) + geom_path(size=1)
p 
```

但是这张图会产生上述错误。

```
p + opts(legend.text=letters[1:2]) 
```

我没有正确设置图例文本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:00:31.797

这完成了你想要的我认为：

```
p + scale_colour_discrete(labels=letters[1:2]) 
```

# javascript - 鼠标功能上的css图像精灵到javascript

> ID：11476216
> 
> 赞同：0
> 
> 时间：2012-07-13T18:28:03.553
> 
> 标签：javascript, css

我通过使用 div 标签来使用 CSS sprite。但是在下面的代码中有 JavaScript，我不能保持 sprite。是否可以将 CSS sprite 保持在下面的代码中？图像在鼠标悬停功能中。

```
<a href="" target="_blank" onmouseover="MM_swapImage('Image52','','social-rss-h.png',1)" onmouseout="MM_swapImgRestore()"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:30:58.420

尝试为您想要精灵的链接添加一个类/id（您可以将精灵添加到链接，但是，对于组织，我更喜欢类/id）

```
a.sprite {
    background-image: url(images/menu.gif);
    background-position: 0 0;
    background-repeat: no-repeat;
}
a.sprite:hover {
    background-position: 0 -60px 
}

<a class="sprite" href="" target="_blank" onmouseover="MM_swapImage('Image52','','social-rss-h.png',1)" onmouseout="MM_swapImgRestore()"> 
```

# asp.net-mvc-3 - 将 ViewModel 用于视图中的局部视图

> ID：11476221
> 
> 赞同：3
> 
> 时间：2012-07-13T18:28:18.207
> 
> 标签：asp.net-mvc-3, razor

我很好奇如何执行以下操作。我有一个主要视图，其中包含有关支持案例的父数据。我还将使用部分视图显示 MTM 数据的子列表。我已经构建了一个 ViewModel 来为部分视图提供所需的数据。

这是我的视图模型：

```
public class CaseComplaintsViewModel
    {
    public string ComplaintCode { get; set; }
    public string ComplaintType { get; set; }
    } 
```

ViewModel 基于来自以下两个领域模型的数据：

```
public class CaseComplaint
    {
    [Key]
    public int CaseComplaintID { get; set; }
    public int CasesID { get; set; }
    public int ComplaintCodeID { get; set; }
    public virtual Cases Cases { get; set; }
    public virtual ComplaintCode ComplaintCode { get; set; }
    }

public class ComplaintCode
        {
        public int ComplaintCodeID { get; set; }

        [MaxLength(50)]
        [Required(ErrorMessage="Complaint Code is required")]
        public string ComplaintCodeName { get; set; }

        [MaxLength(50)]
        [Required(ErrorMessage="Complaint Type is required")]
        public string ComplaintType { get; set; }

        public virtual ICollection<CaseComplaint> CaseComplaint { get; set; }

        } 
```

很简单。

这是部分视图。

```
@model IEnumerable<cummins_db.ViewModels.CaseComplaintsViewModel>

<table width="100%">
<tr>
<th>Complaint Code</th>
<th>Complaint Description</th>
</tr>  
@foreach (var item in Model)
    {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.ComplaintCode )    
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ComplaintType)
    </td>

</tr>
    }
</table> 
```

这个局部视图将在我的主要案例视图中使用。我还将使用 ajax 定期刷新这个局部视图。

所以我的问题是，当我的主要案例视图打开时，如何将正确的数据放入视图中？部分视图需要它自己的控制器还是我在 Cases 控制器中处理它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T18:36:54.450

是的，它需要他自己的 Action 来处理数据发送给客户端。例如

```
public ActionResult ShowCaseComplaints(int someID)
{
    //creates a linq or database sql could something like
    /*var data = db.Complains.Find(someID).Select( x => new CaseComplaintsViewModel(){
        ComplaintCode = x.ComplaintCode,
        ComplaintType = x.ComplaintType
    }).ToList();*/

    var data = (from C in db.CaseComplaint 
                where C.CaseID == someID
                select C.ComplaintCode).ToList().Select( x => new CaseComplaintsViewModel(){
                     ComplaintCode = x.ComplaintCode,
                     ComplaintType = x.ComplaintType
                }).ToList();
    return PartialView("Your_Partial_View_Name", data);
} 
```

请注意，我假设您有一个从其中创建 ViewModel 的基类。

要从您的主视图中渲染部分内容，您刚刚在主视图中调用，假设您的主视图是强类型的

```
@model CaseComplaint

<div id="complaintlist">
    @Html.Action("ShowCaseComplaints","yourController", new { someID = model.CaseID}
</div> 
```

# php - Symfony 2：依赖注入和特征

> ID：11476222
> 
> 赞同：15
> 
> 时间：2012-07-13T18:28:27.233
> 
> 标签：php, symfony, dependency-injection

我正在尝试找到一种方法来使用带有新 PHP 5.4[特征的 Symfony 2](http://php.net/manual/en/language.oop5.traits.php)[依赖注入组件](http://symfony.com/doc/current/components/dependency_injection/introduction.html)。

长话短说（实际上不是那么短），我的项目已经解耦了 View 类，它们都有自己的特定构造函数。每个视图可以使用零个或多个视图助手，它们被定义为特征：

```
trait TranslatorHelper
{
    /**
     * @var Translator
     */
    protected $translator;

    /**
     * @param Translator $translator
     */
    protected function setTranslator(Translator $translator)
    {
        $this->translator = $translator;
    }

    /**
     * @param string $text
     * @return string
     */
    public function translate($text)
    {
        return $this->translator->translate($text);
    }
} 
```

-

```
class UserEditView extends AbstractView
{
    use TranslatorHelper;

    public function __construct(User $user, UserEditForm $form)
    {
        // ...
    }
} 
```

我想在我的控制器中有一个方法`renderView()`，它在渲染视图之前根据 View 类使用的所有特征执行 setter 注入：

```
class Controller
{
    public function renderView(View $view)
    {
        // Check what traits are used by $view, and inject their dependencies
        // {...}

        // Then render the View
        return $view->render();
    }
} 
```

关于如何使用`DependencyInjection`组件执行此操作的任何想法？

主要问题显然是视图不会由 DI 容器创建，但可以在应用程序流中的任何位置创建。只有在它们被渲染之前，才需要注入依赖项。

最后一点：我不依赖于 Symfony 组件。另一个 DI 容器上的任何线索也将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-05-18T13:40:21.133

Symfony 3.3 引入了自动装配服务的概念。
您所要做的就是在您的 trait 中创建一个 setter 函数并添加`@required`注释。

```
private $entityManager;

/**
 * @required
 * @param EntityManagerInterface $entityManager
 */
public function setEntityManager(EntityManagerInterface $entityManager)
{
    $this->entityManager = $entityManager;
} 
```

参考：[https ://symfony.com/doc/current/service_container/autowiring.html#autowiring-other-methods-eg-setters](https://symfony.com/doc/current/service_container/autowiring.html#autowiring-other-methods-e-g-setters)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T09:23:26.883

我认为特质不应该用于以这种方式进行 DI。在类似的场景中我会做的是在实现特征的视图类中使用构造函数注入（甚至设置器也可以，如果可能的话，即使是强悍的构造函数也更好）以直接注入所需的服务。

如果您认为类实现的特征是在应用程序执行之前静态定义的，那么您实际上不需要检查特征来执行动态注入。在运行之前你会知道你需要什么服务，只要把 trait 看作是一些具体方法的接口。

# php - GZIP 和 javascript

> ID：11476223
> 
> 赞同：4
> 
> 时间：2012-07-13T18:28:27.280
> 
> 标签：php, javascript, html, gzip

我有一个 80 kB 的 javascript 文件，我做了一些测试并得出结论，在 gzip 压缩后大小将减少到 34 kB。

我用谷歌搜索了 100 次，问了很多人，他们给了我这样的链接[和这个](http://httpd.apache.org/docs/2.0/mod/mod_deflate.html)链接[即使](http://www.cyberciti.biz/tips/speed-up-apache-20-web-access-or-downloads-with-mod_deflate.html)在重读之后，我仍然无法 gzip js 文件。

有人可以解释一个好的起点和从哪里开始吗？我想我需要更改 .htaccess 文件中的某些内容，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:56:26.427

在您的 .htaccess 文件中，您应该能够放入类似

```
<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE application/x-javascript
</IfModule> 
```

这取决于网络主机是否允许 .htaccess 文件和其他安全设置。

# ruby - 在 Ruby Mechanize 的 POST 请求中为同一个键提交多个值

> ID：11476229
> 
> 赞同：4
> 
> 时间：2012-07-13T18:28:44.287
> 
> 标签：ruby, mechanize

我如何在 Ruby 的 Mechanize gem 中提交一个 POST 请求，同一个键有多个值？

例如，我想要`foo=1`并被`foo=2`发送。我试过

```
parameter = {'foo' => ['1', '2']}
Mechanize.new.post('http://somewebsite.com', parameters) 
```

但是使用[requestb.in](http://requestb.in/)，我只得到 '12' 的 'foo'，而不是 '1' 的一个值 'foo' 和 '2' 的另一个值 'foo'。

另外：我这样做的原因是因为我想在多选列表中选择多个值，但是调用`select_all`选择列表并提交表单似乎不起作用，所以我试图手动提交 POST数据代替。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:31:19.520

几个选项：

1.  使第二个 foo 成为符号：

    参数 = {'foo' => '1', :foo => '2'}

2.  自己构建帖子正文：

    参数 = 'foo=1&foo=2'

# javascript - JavaScript：对类/函数和对象使用相同的名称？

> ID：11476241
> 
> 赞同：4
> 
> 时间：2012-07-13T18:29:40.873
> 
> 标签：javascript, class, object, recursion, naming

我看过[这里](https://stackoverflow.com/questions/3663775/object-name-same-a-function-name)，基本上（据我所知）你不能为函数和对象使用相同的名称，但看看下面的代码，情况似乎并非如此。谁能告诉我这是如何工作的？

```
;(function($){
    $.fn.superfish = function(op){

        var sf = $.fn.superfish,
            c = sf.c,
            $arrow = $(['<span class="',c.arrowClass,'"> &#187;</span>'].join('')),
...         
    };

    var sf = $.fn.superfish;
...
    sf.c = {
        bcClass     : 'sf-breadcrumb',
        menuClass   : 'sf-js-enabled',
        anchorClass : 'sf-with-ul',
        arrowClass  : 'sf-sub-indicator',
        shadowClass : 'sf-shadow'
    };  
...
})(jQuery); 
```

superfish 在它的声明中引用了它自己。这不会导致无限递归吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:32:02.047

它不是递归，因为它没有调用自己。它引用对象的属性。

如果你看到这样的东西：

```
var sf = $.fn.superfish(), 
```

比会有问题。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:03:28.857

这是一种常见的技术，它允许您存储对某些深度嵌套属性的引用并使用它来代替，以提高可读性和性能。[Crockford 的文章](http://www.yuiblog.com/blog/2006/04/11/with-statement-considered-harmful/)是相关的。

```
// some really deeply nested property
var o = ooo.eee.oo.ah_ah.ting.tang.walla.walla;

// i could type...
ooo.eee.oo.ah_ah.ting.tang.walla.walla.bing = true;

// or just
o.bing = true; 
```

碰巧的是，在这种情况下，深度嵌套的属性是对象本身，但 javascript 并不关心。

[这个小提琴](http://jsfiddle.net/2BvAZ/)演示了您遇到问题的确切 javascript 功能。这就是javascript的工作方式。并不是说我会将此功能作为范式基础，但这是可能的。

# asp.net - ASP.NET 和 VB.NET 配置文件

> ID：11476255
> 
> 赞同：1
> 
> 时间：2012-07-13T18:30:33.460
> 
> 标签：asp.net, vb.net, web-config, app-config

我正在尝试在 ASP.NET 应用程序和 VB.NET (Forms) 应用程序之间共享一个 DLL。客户端应用程序使用配置文件来存储设置，例如连接字符串，ASP.NET 应用程序也是如此。

ASP.NET 应用程序使用 System.Web.Configuration 命名空间，而 VB.NET 应用程序使用 System.Configuration 命名空间。我注意到它们继承自 Object 类。我希望它们都继承自一个公共类，以便我可以使用多态性在 DLL 中创建适当类型的实例。

为跨 ASP.NET 和 VB.NET 应用程序共享的 DLL 使用配置文件的最佳实践是什么。我对此进行了研究，并在某处读到您应该在 ASP.NET 应用程序中使用 System.Configuration，而我在其他地方读到您不应该这样做，因为如果您在 ASP 中使用 System.Configuration，则无法写入 web.config .NET 应用程序。我不需要写 web.config；我需要阅读它。最佳做法是什么？

**更新 13/07/2012** DLL 包含一个类。该类目前有一个构造函数，如下所示：

```
private connectionString As Sub
Public Sub New()
connectionString = WebConfigurationManager.ConnectionStrings("TestConnection").ConnectionString
End Sub 
```

我现在正在考虑在类中创建另一个构造函数以供非 Web 客户端调用，即：

```
private connectionString As Sub
Public Sub New()
connectionString = connectionString2
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:39:19.553

我建议将参数从托管应用程序传递给您的 DLL 函数，并从 dll 中完全删除配置文件依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:39:45.150

在这种情况下，对我们有用的是我们将条目放入使用：

```
<configuration>
  <appSettings>
    <add key="AccessServer" value="\\apollo\all_access_anon\northwind.mdb" />
    ... 
```

然后我们使用以下方式访问它：

```
NameValueCollection appSettings = ConfigurationManager.AppSettings;
string str = appSettings["AccessServer"]; 
```

这对两个配置文件都是通用的。

# objective-c - NSURLConnection 超时不工作

> ID：11476257
> 
> 赞同：0
> 
> 时间：2012-07-13T18:30:41.760
> 
> 标签：objective-c, nsurlconnection, nsurlconnectiondelegate

我尝试使用 NSURLConnection 下载文件我已经准备好 url 请求、委托方法等。我还将超时设置为 15.0，并使用如下代码触发主线程上的下载：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
[connection start]; 
```

这段代码工作得很好，但如果服务器没有响应，则没有回调到委托方法的错误。

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:05:12.113

查看此文档，这将帮助您找到更好的方法：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid /20001836-BAJEAIEE](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)

# c# - 如何在内部保留一个始终可以为空的泛型类型参数等价物？

> ID：11476258
> 
> 赞同：2
> 
> 时间：2012-07-13T18:30:41.867
> 
> 标签：c#, .net, generics

我认为首先一个代码示例是必不可少的。我正在尝试构建一个视图模型，用于所有需要下拉控件的属性，这是一个开始：

```
public class ListProperty<TListItem, TValue>
{
    private readonly string _valuePropertyName = "Id";
    private readonly string _textPropertyName = "Name";

    public TValue Value { get; set; }
    private IEnumerable<TListItem> _list;
    public ListProperty(IEnumerable<TListItem> list)
    {
        _list = list;
    }
} 
```

我希望有一个`Value`始终可以为空的基础属性，因此如果`TValue`是引用类型，则基础类型将只是`TValue`，但当`TValue`是值类型时，基础类型必须是`Nullable<TValue>`。

**更多：**我想要这个的原因是要知道该`Value`属性是否已被分配。在没有我要求的情况下执行此操作将涉及必须键入 value as `Object`，这对我来说很难闻。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:36:43.653

这是不可能的。C# 可为空的语法`T?`（大部分）是`System.Nullable<T>`. 并且`System.Nullable`不允许`T`. 这就是为什么您不能应用于`?`可能是引用类型的（通用）类型。但是，您可以限制`TValue`为`struct`。

或者，您可以编写自己的`Nullable`允许引用类型的辅助结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:37:45.240

您可以尝试将它们分成不同的类：

```
public abstract class ListProperty<TListItem, TValue> {
  public TValue Value { get; set; }
  ...
}

public class RefListProperty<TListItem, TValue> : 
  ListProperty<TListItem, TValue> where TValue : class {
}

public class ValListProperty<TListItem, TValue> : 
  ListProperty<TListItem, Nullable<TValue>> where TValue : struct {
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:40:00.417

我能想到的最好的方法是传递三个参数，然后只传递一个或另一个：

```
public class ListProperty<TListItem, TValueStruct, TValueClass> 
where TValueStruct : struct
where TValueClass : class
{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T18:44:22.873

简单而简短：因为你需要在不同的地方实例化不同的版本，为什么不呢？

```
ListProperty<SomeListItemType, SomeReferenceType> 
```

和

```
ListProperty<SomeOtherListItemType, SomeValueType?> 
```

在适当情况下？但也许我有什么问题...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T20:41:17.647

我不确定我是否理解您的问题，但就您现在的班级而言，您可以使用任何类型 for `TValue`，包括可为空的类型：

```
new ListProperty<string, string>(someList1);    // reference type: string
new ListProperty<string, DateTime?>(someList2); // nullable value type: DateTime?
new ListProperty<string, DateTime>(someList3);  // non-null value type: DateTime 
```

如果你想阻止 last use *only*`TValue` ，我认为在类声明中使用约束是不可能的。但是您可以通过添加这样的静态构造函数来进行检查运行时：

```
static ListProperty()
{
  if (default(TValue) != null)
    throw new ArgumentException("Type argument must allow null", "TValue");
} 
```

# c# - MVC如何返回带参数的视图

> ID：11476263
> 
> 赞同：6
> 
> 时间：2012-07-13T18:31:21.730
> 
> 标签：c#, asp.net-mvc, razor

目前我有一个有效的方法，当单击此处的 Razor 中的代码链接时，它正在工作：

```
@Html.ActionLink("New User ,Register", "Register", new { OpenID = Model.OpenID }) 
```

我希望从控制器返回视图具有相同的效果，目前我正在使用此代码但没有成功

```
return View("Register", lm); 
```

我在 MVC 很新，所以我有点困惑。与我的最后一个代码miss smt返回的视图和我支持的部分有关`new { OpenID = Model.OpenID }`

你能指出我正确的方向吗？

这就是我的控制器的方法：

```
public ActionResult Register(string OpenID) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T18:43:26.350

尽量[避免](https://stackoverflow.com/a/5823518/40521) `ViewData`和`ViewBag`。尝试使用强类型`ViewModels`。这使您的代码干净（*以及下一个将维护您的代码的开发人员，HAPPY*）

有一个属性`OpenID`在你的`ViewModel`

```
public class RegisterViewModel
{
     //Other Properties also
     public string OpenID { set; get; }
} 
```

现在您可以在返回视图时在您的`action`方法中设置此值：

```
public ActionResult Register(string OpenId)
{
     var vm = new RegisterViewModel();
     vm.OpenID = OpenId;
     return View(vm);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T18:34:02.600

您可以将所需的任何数据添加到 ViewBag 变量中。

在您的控制器中，您可以这样设置值。

**控制器**

```
public ActionResult Register()
{
    ViewBag.OpenID = OpenID;

    return View()
} 
```

在您的剃刀视图中，您可以以相同的方式访问它

**MVC3 剃刀视图**

```
@ViewBag.OpenID 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T18:53:17.893

请看一下这个视图（ViewA）：

```
<div>
    @Html.ActionLink("My link", "ViewB", new { someData = "some data I'm passing on" })
</div> 
```

而这两个动作：

```
 public ActionResult ViewA()
    {
        return View();
    }

    public ActionResult ViewB(string someData)
    {
        //Here someData has the value "some data I'm passing on"
        return View();
    } 
```

我们只是通过 get （即查询字符串）传递值。通过匹配名称，MVC 能够为我们创造奇迹 =)

希望这可以帮助。

问候

# multithreading - 从Qt中的其他线程发出信号时出现分段错误

> ID：11476267
> 
> 赞同：3
> 
> 时间：2012-07-13T18:31:44.117
> 
> 标签：multithreading, qt, segmentation-fault, signals-slots

当我试图从另一个线程发出信号时，它会导致段错误，不知道为什么。
信号和槽都定义在同一个类中，并在主 GUI 线程下运行，但我在另一个函数中调用发出，该函数由 boost 线程类型的线程控制。

我正在使用 Qt4，而 Ubuntu 10.04 是我的操作系统。这个函数是从另一个发出信号的线程调用的。

```
 void MyMapItem::updateMap(std::vector<int> data11)
{
my_mutex.lock();    
cout<< "i am in updatemap"<<endl;
data12.clear();
data12=data11;
cout<<"size of data"<<data12.size()<<endl;
my_mutex.unlock();
emit mera_signal();
}

    MyMapItem::MyMapItem(QGraphicsItem *parent )
{

    QObject::connect(this,SIGNAL(mera_signal()),this,SLOT(mera_slot()),Qt::BlockingQueuedConnection );

} 
```

以上是我的 Qt 类的构造函数。

```
void MyMapItem::mera_slot()
{
cout<< "signal is emitted"<<endl;
qDebug() << "Date:";
} 
```

以上是插槽定义，我暂时只是打印一条消息。

让我再详细说明一下我的流程。

1.  我有一个`MapGenerator`从`QThread`现在继承的类，它连接到 ROS 并订阅一个主题。
2.  现在我得到了另一个`MyMapitem`继承自`QObject`两者`GraphicsItem`的类，在这个类中我定义了一个插槽和一个信号。
3.  现在我得到了第三个类`Mainwindow`，它继承自`Qobject`并为我设置了图形场景`mymapitem`。
4.  现在我要做的`main`是创建对象`Mapgenerator`并启动线程。
5.  然后我做一个对象`Mainwindow`。
6.  因此，当`Mapgenerator`线程启动时，它会从 ROS 订阅数据并调用一个函数`MyMapItem`并在那里传输数据。

在这里，我想发出一个信号，这样我就知道新数据到达了。然后我在构造函数中更新场景中已经存在的`Mainwindow`项目。连接是在`MyMapItem`类构造函数中建立的。

谢谢在这里，我发布了我创建线程和主窗口的主要方法。

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    ros::init(argc,argv,"last");
    MapGenerator::MapGenerator mg(argc,argv);
    //boost::thread ros_thread(boost::bind(&MapGenerator::init2, &mg));
    mg.start(); // Qthread 
    MainWindow w(argc,argv);
    w.show();
    return a.exec();
} 
```

在主窗口构造函数中，我创建了 Mapitem 对象

```
MainWindow::MainWindow( int argc, char **argv, QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    this->setWindowTitle("My app");
    mapitem = new MyMapItem();
    scene = new QGraphicsScene(0,0,4000,4000);
    ui->graphicsView->setScene(scene);
    scene->addItem(mapitem);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:16:05.843

当您设置类时，通常涉及`connect`到插槽的信号，您可以选择指定[连接类型](http://doc.qt.io/qt-5/qt.html#ConnectionType-enum)。

> bool QObject::connect ( const QObject * sender, const char * signal,
> const QObject * receiver, const char * method,
> Qt::ConnectionType type = Qt::AutoConnection ) [静态]
> ________________ <--- 指定您的连接类型为排队的人之一

默认值`Qt::AutoConnection`依赖于`QThread`东西来知道信号是来自同一个线程还是来自不同的线程。由于您没有使用 QThreads，因此您不能依赖它。根据您希望它在调用线程中的行为方式明确告知要建立的连接（有关详细信息，请参阅链接`QueuedConnection`）。`BlockingQueuedConnection`

如果由于某种原因您发现始终将连接设置为这些类型之一是不合适的，您还可以利用[QMetaObject::invokeMethod](http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod)从不同的线程调用。请注意，此函数还允许您指定连接类型：

> 调用对象 obj 上的成员（信号或插槽名称）。如果可以调用成员，则返回 true。如果没有这样的成员或参数不匹配，则返回 false。调用可以是同步的或异步的，具体取决于类型：
> 
> 如果类型是 Qt::DirectConnection，则该成员将立即被调用。
> 
> 如果 type 是 Qt::QueuedConnection，则将发送一个 QEvent 并在应用程序进入主事件循环后立即调用该成员。
> 
> 如果 type 是 Qt::BlockingQueuedConnection，该方法的调用方式与 Qt::QueuedConnection 相同，只是当前线程将阻塞直到事件被传递。使用这种连接类型在同一线程中的对象之间进行通信会导致死锁。
> 
> 如果 type 是 Qt::AutoConnection，如果 obj 与调用者在同一个线程中，则同步调用该成员；否则它将异步调用成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:34:00.393

> 由 boost 线程类型的线程控制。

QT 的信号在 QObject 中实现，它知道与 QT 的信号和槽相关的 QObject 的各种元数据。这些元数据之一是与槽的 QObject 关联的 QThread，它指示如何为信号调用槽的默认行为（即在同一线程中，发布到不同的 QThread 等）。

值得怀疑的是，这是否能与其他线程库（如 boost's）很好地配合使用。可以肯定的是，连接信号/插槽时的 QObject 甚至都不知道插槽的 QObject 甚至与第二个线程相关联。它可能会错误地与您的应用程序的主 QThread 相关联。

与其他线程 API 相比，将对象与线程相关联是 QT 的一个突出特性。QT 不太可能自动知道您正在使用另一个库创建线程，并能够以一种 QT 理解线程、信号和插槽的方式使线程安全地与 QObject 相关联，从而使它们成为线程安全的。 .

[在“线程和 QObjects”](http://qt-project.org/doc/qt-4.8/threads-qobject.html)中的 QT 文档中阅读更多内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:41:39.973

我最近遇到了同样的问题。我通过子进程从运行良好的依赖 GUI 线程调用了很多 shell 命令，但一个只是拒绝正常工作并出现段错误。我遇到的不同之处在于，我正试图从主 GUI 线程运行它，而当我试图发出通常从子线程发出的信号时，它出现了段错误！

我避免段错误的解决方案是将需要一些 shell 参与的对话框部分移动到单独的 QThread，有效地继承了我的应用程序中其他线程正在使用的相同公共类。问题消失了！QThread 是关键！

在此处查看完整答案：[https ://stackoverflow.com/a/13978817/673423](https://stackoverflow.com/a/13978817/673423)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:56:07.863

您必须使用阻塞排队信号。Qt 在 QThreads 中具有此功能，您可以在其中定义与 Qt::BlockingQueuedConnection 的连接。我不知道提升线程。

# java - 绘制一个带渐变的圆角矩形

> ID：11476270
> 
> 赞同：0
> 
> 时间：2012-07-13T18:31:50.193
> 
> 标签：java, swt

我想像这样在 SWT 中画一个圆角矩形

![坡度](../Images/dc3db688be5c0a4cf48649fe5051136c.png)

我找不到这样做的方法，所以我决定扔掉我的代码并在这里问:(
有什么想法吗？
谢谢 :D

**编辑**
我又试了一次，这就是我现在所拥有的

```
 import org.eclipse.swt.SWT;
    import org.eclipse.swt.events.PaintEvent;
    import org.eclipse.swt.events.PaintListener;
    import org.eclipse.swt.graphics.Color;
    import org.eclipse.swt.widgets.Canvas;
    import org.eclipse.swt.widgets.Composite;
    import org.eclipse.wb.swt.SWTResourceManager;

    public class TesteGradient extends Canvas {
        Color COLOR_TOP = SWTResourceManager.getColor(166, 166, 166);
        Color COLOR_BOTTOM = SWTResourceManager.getColor(241, 241, 241);

        private boolean selected = false;

        public TesteGradient(Composite parent, int style) {
            super(parent, style);

            this.addPaintListener(new PaintListener() {
                public void paintControl(PaintEvent e) {
                    e.gc.setAntialias(SWT.ON);

                    e.gc.setBackground(COLOR_BOTTOM);
                    e.gc.setForeground(COLOR_TOP);
                    e.gc.fillGradientRectangle(0, 0,93, 27, true);
                    e.gc.setClipping(0, 0, 4, 4);
                }
            });
        }

        public boolean isSelected() {
            return selected;
        }

        public void setSelected(boolean selected) {
            this.selected = selected;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T12:13:55.103

正确的 URL 是[https://github.com/germantech/ios-widgets](https://github.com/germantech/ios-widgets)。我们已经构建了一小套组件

# c++ - 手臂组装和 C++

> ID：11476271
> 
> 赞同：1
> 
> 时间：2012-07-13T18:31:53.660
> 
> 标签：c++, architecture, arm

你好，我正在读一本关于 ARM 架构的书。（我是菜鸟）我正在阅读有关 cpu 的寄存器文件的信息。

当我在 C++ 中创建一个变量时，这是通过总线 RM 发送到寄存器文件然后发送到 cpu 中的 ALU 的数据吗？示例：（int a = 1 + 1;）

地址寄存器是通过地址总线给我返回内存地址的吗？（例如：&a）

这本书没有提到c ++，但我只是想知道。

我只是想看看我是否理解这一点。感谢您的任何回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:54:11.997

尝试将 C++ 直接与寄存器文件或地址总线等硬件相关联可能不是一个好主意。将汇编语言作为中间级别插入更有意义。所以想想你的 C++ 是如何被翻译成汇编代码的，*然后*是汇编代码是如何控制硬件的。您的 ARM 书籍将教您组装和硬件之间的联系。要了解 C++ 和汇编之间的关系，最好查看一些编译器输出。

您可以使用编译器选项来检查 C++ 编译器的汇编输出。以 g++ 为例：

$ cat -n 测试.cc

```
 1  int a;
 2  
 3  void f() {
 4      a = a + 1;
 5  } 
```

$ arm-elf-c++-4.6 -O2 -c -g -Wa,-ahl=test.s test.cc

$ 减 +/4:test.cc 测试.s

```
 [...]
   4:test.cc       ****         a = a + 1;
  16                            .loc 1 5 0
  17 0000 0C309FE5              ldr     r3, .L2
  18 0004 002093E5              ldr     r2, [r3, #0]
  19 0008 012082E2              add     r2, r2, #1
  20 000c 002083E5              str     r2, [r3, #0]
  [...] 
```

您可以看到*a* (称为`.L2`) 的地址在第 17 行被移动到寄存器`r3`中，然后在第 18 行中，*a*从内存中检索并在第 19 行中递增，最后在第 20 行中再次存储到主内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:36:03.363

编译器可以通过将变量的内容放入寄存器来优化您的代码（因为寄存器比 RAM 快），但通常变量存储在 RAM 中的堆栈上，并`&variable`给出 RAM 中变量的（虚拟）地址。（您提到的“地址寄存器”与此无关——给出“处理器寄存器的地址”没有意义，只有 RAM 字节有地址。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:36:28.970

`int a = 1 + 1;`只会`a`用 2 加载变量。但实际上，变量的地址是内存中的真实地址，所以地址是进入地址总线的。

`a`我必须补充一点，如果在全球范围内声明就是这种情况。由于局部变量将存在于堆栈中，并且地址将是临时堆栈位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T18:39:37.063

为了处理数据，必须首先将数据加载到寄存器中。当您进行算术运算时，您将值加载到寄存器中，并且一条指令使 cpu 将某些操作应用于一个或多个寄存器。算术寄存器通常将 2 个寄存器作为输入，并将值存储在第三个寄存器中。CPU 通过执行计算来编组 ALU。该值可能会立即存储回内存，但可能不会，由编译器自行决定。addressof 操作主要由编译器处理，因为它知道程序在内存中的布局，但程序不知道。

# c# - 如何更改在预览窗格中显示或打开的 MailItem

> ID：11476273
> 
> 赞同：2
> 
> 时间：2012-07-13T18:31:58.263
> 
> 标签：c#, outlook, ms-office, outlook-addin, office-2010

我正在尝试编写一个加载项，该加载项可以在加载时修改 Outlook MailItem（通过预览窗格或通过打开它）。这是我到目前为止的代码，但我似乎无法真正访问 MailItem

```
public partial class ThisAddIn
{
    private void ThisAddIn_Startup(object sender, EventArgs e)
    {
        Application.ItemLoad += ApplicationOnItemLoad;
    }

    private void ApplicationOnItemLoad(object item)
    {
        var mail = item as MailItem;

        if (mail != null)
        {
            Console.WriteLine(mail.HTMLBody);
        }
    }

    // Etc...
} 
```

* * *

代码很好地到达了`Console.WriteLine(mail.HTMLBody);`语句，这意味着将项目转换为 Outlook MailItem 很好（它最终不会为空）。但是，我无法访问任何 MailItem 成员......它只是抛出异常：

> MyOutlookProject.DLL 中出现“System.Runtime.InteropServices.COMException”
> 类型的第一次机会异常 mscorlib.dll 中出现“System.Reflection.TargetInvocationException”类型的第一次机会异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:28:50.157

[`Application.ItemLoad`](http://msdn.microsoft.com/en-us/library/bb175112%28v=office.12%29.aspx)在项目完全加载之前发生。除了和`Item`之外，您无法读取任何属性。`Class``MessageClass`

### 从 MSDN...

> *此事件在 Outlook 项目开始加载到内存时发生。该项目的数据尚不可用，除了 Outlook 项目的 Class 和 MessageClass 属性的值，因此**在调用 Item 返回的 Outlook 项目的 Class 或 MessageClass 以外的任何属性时会发生错误**。*

要访问`MailItem`预览窗格中的 ，您应该查看[`Explorer.Selection`](http://msdn.microsoft.com/en-us/library/ff861267.aspx). 访问`MailItem`已打开的（*通过检查*器）- 杠杆[`Inspectors.NewInspector`](http://msdn.microsoft.com/en-us/library/bb147644%28v=office.12%29.aspx)。

# fonts - 使用 ruby 将 TTF (truetype) 转换为 WOFF(webfont)

> ID：11476274
> 
> 赞同：5
> 
> 时间：2012-07-13T18:31:58.500
> 
> 标签：fonts, font-face, truetype, webfonts, woff

如何使用 ruby​​ 将 .ttf 文件转换为 .woff 文件（webfont）？

我们希望允许用户上传 ttf 文件，对其进行转换并嵌入 woff 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T12:59:56.520

有两种工具可用于将 TTF 转换为 WOFF。

1.  **sfnt2woff** - 在这里找到：http: [//people.mozilla.com/~jkew/woff/](http://people.mozilla.com/~jkew/woff/) -这是一个命令行工具，您应该可以从 Ruby 调用它

2.  **sfntly** - 在这里找到：[http](http://code.google.com/p/sfntly/) ://code.google.com/p/sfntly/ - 这是由 Google 开发的命令行 Java 套件，用于执行一堆字体任务，包括 WOFF 生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T05:01:08.020

对于今天可能感兴趣的任何人，我今天发布了一个小的 Ruby gem。它使用的是我在*Ubuntu 12TLS*、*Debian 7 Wheezy*和*Mac OSX 10.7.5上测试过的 Haskell 二进制文件*

[https://github.com/dachi-gh/webify_ruby](https://github.com/dachi-gh/webify_ruby)

您通过 require和一个主要使用的类来获得`WebifyRuby`模块。`webify_ruby``Convert`

```
require 'webify_ruby'
@convert = WebifyRuby::Convert.new(
  'public/fonts/my_font.ttf',
  dir:'my_dir_fonts/converted',
  css: 'my_dir_css/stylesheets',
  link_to: 'http://example.com/my_dir_fonts'
) 
```

只有第一个参数是必需的。没有`link_to`例如，生成的样式表的 url 从 .css 文件到 webfont 文件是相对的。

*ps 目前它适用于`ttf`文件，但你仍然可以使用它`otf`*

# database - 所需十进制的 SQL 标志值

> ID：11476279
> 
> 赞同：0
> 
> 时间：2012-07-13T18:32:27.093
> 
> 标签：database, tsql

在我的数据库中，我有一个必需的小数，它可以在

```
maxExclusive value="1000000000000000"
minExclusive value="-1000000000000000" 
```

用户必须在前端输入一个值，如果他们选择不回答问题，他们可以选择 N/A，问题是表示该值的最佳方式是什么 (N/A)。该值不能为 NULL

表示可接受范围之外的值是一个好主意，只需编写额外的逻辑来处理这个用例。IE。-9999999999999999

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:05:24.750

我可以想到三个表示“超出范围”值的选择。

第一个是你拒绝的那个，它是将值表示为NULL。

第二种是你提出的，就是把它当作一个特殊值来处理，并结合逻辑来处理这个特殊值。

第三个是引入一个新的标志 IsExclusiveValid，并使用这个标志来合并特殊的逻辑。

在许多情况下，第二个和第三个工作量大致相同。第三个是数据库中的开销稍大一些。第三种情况的一个更高级的版本是引入你自己的类型，但这需要更多的工作。

有些人害怕拥有特殊的价值观。但是不同的方法非常相似。

# c# - XmlDocument 读取 XML 文件，作为 SOAP 消息体传递

> ID：11476280
> 
> 赞同：1
> 
> 时间：2012-07-13T18:32:29.053
> 
> 标签：c#, web-services, soap, xmldocument

我正在使用 XmlDocument 读取 XML 文档的内容，然后将这些内容传递到 Web 服务请求的 SOAP 消息正文中。但是，在调用中实际传递的数据（从 XML 文档中读取）中，< 和 > 符号被替换为

```
&gt; and &lt; 
```

这导致接收端出现问题。

我错过了什么？

这是我的代码片段：

```
string filePath = FileList.SelectedItem.Value;
string doc = File.ReadAllText(filePath);

XmlDocument xDoc = new XmlDocument { PreserveWhitespace = true };
xDoc.LoadXml(doc);

MyService.TransactionRequest request = new MyService.TransactionRequest { message = xDoc.OuterXml };

MyService.TransactionClient client = new MyService.TransactionClient();

client.ProcessTransaction(request); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:52:15.470

您可能希望将消息的内容包装在 CDATA 构造中，这应该（敲木头）防止 SOAP 消息编码器转换字符串中的 XML 标记。

```
string wrapped = "<![CDATA[" + xDoc.OuterXml + "]]>";
TransactionRequest request = new MyService.TransactionRequest { message = wrapped }; 
```

如果您的 xDoc 本身可能包含 CDATA 部分，那么您需要做更多的工作，因为 CDATA 部分不能嵌套。不过，有一个简单的解决方法。只需替换要包装的字符串中所有出现的`"]]>"`with即可。`"]]]]><![CDATA[>"`

```
string toWrap = xDoc.OuterXml.Replace("]]>", "]]]]><![CDATA[>");
string wrapped = "<![CDATA[" + toWrap + "]]>";
TransactionRequest request = new MyService.TransactionRequest { message = wrapped }; 
```

请参阅[http://en.wikipedia.org/wiki/CDATA](http://en.wikipedia.org/wiki/CDATA)。

# php - 如何在发送表单数据之前从获取变量中删除字符？

> ID：11476286
> 
> 赞同：1
> 
> 时间：2012-07-13T18:32:49.980
> 
> 标签：php, jquery, forms, get

我有一个表格，用户可以在其中输入要支付的租金金额。

```
<form action="search_results.php" method="get">
  <input type="text" name="rent" value="$" />
</form> 
```

当用户输入他们的租金金额时，我正在使用 jQuery 在字段中保留美元符号。

```
$('input[name=rent]').keyup(function() {
   $(this).val(function(i,v) {
     return '$' + v.replace('$',''); //remove existing, add back.
   });
 }); 
```

当表单发送到 search_results.php 页面时，它会发送到带有以下 get 变量的 url：

> [http://www.domain.com/search_results.php?rent=%24](http://www.domain.com/search_results.php?rent=%24)

当页面开始加载时，它显示以下错误消息：

> 警告：mysqli_error() 需要 1 个参数，0 在 /nfs/c09/h01/mnt/12345/domains/www.domain.com/html/search_results.php 第 551 行给出

我很确定会发生错误，因为我的 sql 语句使用 $_GET['rent'] 变量对所有小于输入租金金额的列表进行排序，并且它不能使用美元符号来执行此操作。

如何在输入字段发送到 search_results.php 页面之前从输入字段中删除美元符号字符，或者如何从 search_results.php 页面上的 url 中删除 %24，然后重新加载页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:37:49.637

尝试这个：

```
$('form').submit(function(){
  $('input[name=rent]').val($('input[name=rent]').val().replace('$', ''))
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:36:31.607

这应该有效：

```
$('form').submit(function(){
  $('input[name=rent]').val(function(index, valueWith$){
    return valueWith$.substring(1);
  });
  return true;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:38:25.407

好吧，这里有一个更好的解决方案——你可以在他通过后过滤数据：

```
$rent = str_replace('$','',$_GET['rent']);
$rent = str_replace('%24','',$rent); 
```

顺便说一句-我建议您了解有关 SQL 注入的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T19:18:58.443

发生此错误是因为您没有为其提供 mysqli 资源。

```
if (!mysqli_query($link, $query)) {
   printf("Errormessage: %s\n", mysqli_error($link));
} 
```

你只是这样调用这个函数：`mysqli_error();`

# gnucobol - 在opencobol中解释ubuntu linux中的COBOL-DB2编译？

> ID：11476290
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:33:18.620
> 
> 标签：gnucobol

我想使用 opencobol 编译器在 ubuntu linux 中运行我的 cobol-db2 程序，请解释我使用 opencobol 在 linux 中运行我的程序的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:03:34.320

如果这违反了 Stackoverflow 上的任何年龄限制规则，请原谅；

请参阅[http://opencobol.add1tocobol.com/#how-does-the-opencobol-compiler-work](http://opencobol.add1tocobol.com/#how-does-the-opencobol-compiler-work)

也许[http://opencobol.add1tocobol.com/#does-opencobol-support-any-sql-databases](http://opencobol.add1tocobol.com/#does-opencobol-support-any-sql-databases)

链接到数据库的示例。

**编辑：按照 mbinette 的建议，而不是简单的链接**

简而言之，OpenCOBOL 是一个多阶段编译器。

*   预处理源文本。**cobc -E**生成后处理文本到标准输出并停止
*   翻译成**C.cobc -C**生成.c源代码文件并停止
*   使用本机 C 编译器转换为汇编程序。**cobc -S**生成.s 汇编源并停止
*   生成对象。**cobc -c**将生成 .o 目标文件并停止
*   建造。**cobc -x**或**cobc -m**或**cobc -b**用于可执行文件、模块（.so 或 DLL），最后 build 用于从多个命令行输入创建动态共享对象。

OpenCOBOL 擅长共享库，并且通过使用 C 应用程序二进制接口，可以使用 COBOL **CALL**动词动态加载大多数（如果不是全部）.so（或 DLL）符号。

```
CALL "DB2-CONNECT"
    USING
        BY REFERENCE "database name"
        BY CONTENT credentials
        BY VALUE control-bits
    RETURNING pointer-to-handle
    ON EXCEPTION
        DISPLAY "Can't find DB2-CONNECT, use -ldb2 with cobc" END-DISPLAY
END-CALL 
```

*我编写了上面的调用框架，因为我手头没有 DB2 库或文档*。

要编译一个程序以使用 DB2 服务，您需要使用类似

```
cobc -x myprogram.cob -ldb2 -L/path/to/DB2lib 
```

或者，更有可能在更大的应用程序中，类似于

```
cobc -b myprogram.cob hisprogram.cob herprogram.cob
export COB_LIBRARY_PATH=/path/to/development/libraries
export COB_PRE_LOAD=db2-dev:other-dev-libs
cobcrun myprogram 
```

有关更多详细信息，请参阅常见问题解答，*希望永远隐藏在上面的链接*中。

指出从**1.1 开始的 OpenCOBOL 不支持 EXEC 语法**。DB2 EXEC 预处理器可能会或可能不会生成适用于 OpenCOBOL 的 COBOL。*有人告诉我，Oracle Pro*COBOL EXEC END-EXEC 预编译器生成 COBOL 源代码，该代码使用 OpenCOBOL 编译以链接到 Oracle SQL。*

# ios - MKAnnotationView 旋转

> ID：11476296
> 
> 赞同：2
> 
> 时间：2012-07-13T18:33:34.720
> 
> 标签：ios, rotation, mkmapview, mkannotation, mkannotationview

我在 MKMapView 上有一个移动注释，显示当前用户位置。我为该注释设置了自己的图像，并且我想旋转它以便您可以看到标题。

在*viewForAnnotation*委托中，我有：

```
static NSString *planeIdentifier = @"Plane";
static NSString *stationIdentifier = @"Station";
NSString *identifier;

if([[annotation title] rangeOfString:@"Plane" options:NSLiteralSearch].location == NSNotFound) {
    identifier = stationIdentifier;
}
else {
    identifier = planeIdentifier;
}

MKAnnotationView *annotationView = (MKAnnotationView *) [aMapView dequeueReusableAnnotationViewWithIdentifier:identifier];
if (annotationView == nil) {
    annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
} else {
    annotationView.annotation = annotation;
}

annotationView.enabled = YES;

annotationView.canShowCallout = NO;
    annotationView.image = [UIImage imageNamed:@"airPlane.png"];

return annotationView; 
```

调用实例方法的代码如下：

```
[planeAnnotation setCoordinate:planeCoordinate];
MKAnnotationView* planeView = [self mapView:mapView viewForAnnotation:planeAnnotation];
[planeView setTransform:CGAffineTransformMakeRotation([[[self modele] udpData] getValueFor:HDING_TRUE item:DYNAMICS]*(M_PI/180))]; 
```

问题是标题永远不会更新，即图像永远不会旋转。

非常感谢任何帮助！

编辑：我尝试为我在 mapView 上的每个 MKAnnotationView （几百个）设置一个自定义标识符（注释的标题），但我注意到 annotationView 始终为*nil*，这意味着它实际上并没有从中取出任何东西。我认为这就是它不旋转的原因，因为我没有旋转我在地图上显示的同一个 MKAnnotationView。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T21:43:14.250

为了回答我的问题，问题在于我 在转换 MKAnnotationView 时调用的是委托方法`MKAnnotationView* planeView = [self mapView:mapView viewForAnnotation:planeAnnotation];`而不是调用实例方法。`MKAnnotationView* planeView = [mapView viewForAnnotation:planeAnnotation];`

# php - PHP/mysql/HTML - 插入字符串值并返回显示

> ID：11476297
> 
> 赞同：1
> 
> 时间：2012-07-13T18:33:35.317
> 
> 标签：php, mysql, html

我正在用 html 中的表单（它实际上是 php，我正在回显 html）将某个字符串值插入到 mysql 中。几天前，我插入了值让我们说“Ahhh”。现在，我正在尝试插入其他东西，但它仍然会带来那个旧值。这不是浏览器缓存，也不是我的代码中的值错误。

表格如下所示：

```
# form for adding a notice
echo "<form name='formAdd' action='controller.php' method='post'>";
echo "<input type='text' name='data' size='50'/>";
echo "<input type='hidden' name='user' value='$user' />";
echo "<input type='submit' name='submit' value='Add notice'/>";
echo "</form>"; 
```

我有 3 个 php 文件。functions.php、controller.php 和显示内容并创建您可以在上面看到的表单的主文件。我传递给 controller.php 的 $user 是应该插入的正确值（我打印它，没关系）。

在controller.php 我得到用户

```
if($_POST["user"]!=NULL){
# HERE he actually comes in, but gets another value from before. 
    $user = $_POST["user"];
} 
```

调用插入函数后，我重定向回应该向我显示更新值的主文件，但它显示了错误的值。

有任何想法吗？

附加信息：

这会在主脚本中获得正确的用户。

```
# get username
$sql = "select username from user_auth where id=" . $_SESSION["sess_user_id"];
$result = mysql_query($sql) or die (mysql_error());
$name = mysql_fetch_array($result);
$user = $name['username'];
echo $user; 
```

functions.php 看起来像：

```
#cacti DB specifications
$database = "cacti";
$hostname = "localhost";
$username = "xxxxxx";
$password = "xxxxxx";
$port = "xxxx";

mysql_connect($hostname,$username,$password);
mysql_select_db($database);

function addNotice($data,$user,$date){
    $sql = "INSERT INTO lalalal (data,user,date) VALUES ('$data','$user','$date')";
    $result = mysql_query($sql) or die (mysql_error());
}

function deleteNotice($id){
    $sql = "DELETE FROM lalalala WHERE id='$id'";
    $result = mysql_query($sql) or die (mysql_error());
} 
```

controller.php 看起来像：

```
 $user = NULL;
if($_POST["user"]!=NULL){
    $user = $_POST["user"];
}

ini_set("display_errors", 1);

include_once("/var/www/html/cacti/plugins/lalala/functions.php");

$id = NULL;
$data = NULL;
$date = date('d.m.Y');

if($_POST["data"]!=NULL && $_POST["id"]==NULL){
    $data = $_POST["data"]; 
    addNotice($data,$user,$date);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:51:03.977

听起来您可能正在将默认值设置为表单中的某些内容，这就是通过而不是新值获得的内容。

```
echo "<input type='hidden' name='user' value='$user' />"; 
```

也许，尝试不在表单中设置默认值，然后调试以查看为什么您的新值没有通过。

如果您发布更多代码，我们可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:39:52.437

解决了：

```
# get username
$sql = "select username from user_auth where id=" . $_SESSION["sess_user_id"];
$result = mysql_query($sql) or die (mysql_error());
$name = mysql_fetch_array($result);
$user = $name['username'];
echo $user;

# get data
$sql = "SELECT * FROM lalala";
$result = mysql_query($sql) or die (mysql_error());

echo "<table CELLPADDING=2 border=1 align=center>";
echo "<tr>";
echo "<th>User</th>";
echo "<th>Notice</th>";
echo "<th>Date</th>";
echo "</tr>";

while($row = mysql_fetch_array($result)){
    $id = $row['id'];
    $user = $row['user'];
    $data = $row['data'];
    $date = $row['date'];

    echo "<tr>";
    echo "<td>".$user."</td>";
    echo "<td>".$data."</td>";
    echo "<td>".$date."</td>";
    echo "<td><form name='formDelete' action='controller.php' method='post'>";
    echo "<input type='hidden' name='id' value='$id' />";
    echo "<input type='submit' name='submit' value='Delete'/>";
    echo "</form></td>";
    echo "</tr>";
}

echo "</table><br>";

# form for adding a notice
echo "<form name='formAdd' action='controller.php' method='post'>";
echo "<input type='text' name='data' size='50'/>";
echo "<input type='hidden' name='user' value='$user' />";
echo "<input type='submit' name='submit' value='Add notice'/>";
echo "</form>"; 
```

问题是有 2 个 $user 变量。进入表单的是最后一个显示在 html 表格中的表单。

# asp.net - 如何全局创建 CustomPrincipal（有和没有 AuthorizeAttribute）

> ID：11476301
> 
> 赞同：4
> 
> 时间：2012-07-13T18:33:42.103
> 
> 标签：asp.net, asp.net-mvc, forms-authentication, iprincipal

我的 ASP.NET MVC4 Web 应用程序有一个自定义主体/身份。我还创建了一个 AuthorizeAttribute 来实例化我的自定义主体，将其分配给我需要身份验证的控制器中的 httpContext.User。

这对于用我的 AuthorizeAttribute 装饰的控制器/操作非常有用，**但是，对于不需要身份验证的控制器（但如果它存在，仍然使用它），我想获得我的 CustomPrincipal （最好通过 HttpContext.User )** .

在这些未修饰的控制器/操作中，设置了 HttpContext.User，但使用的是 GenericPrincipal 而不是我的 CustomPrincipal。**将 HttpContext.User 的默认设置“覆盖”到 GenericPrincipal 的最佳位置在哪里？**

同样，如果在每个具有身份验证 cookie 的请求中都执行此操作，**那么我将如何避免在 AuthorizeAttribute 装饰控制器的情况下执行两次工作**（然后它将成为强制身份验证的控制器）。

为了清楚起见，我的网站允许匿名用户访问，但是在这些页面上，如果一个经过身份验证（并且实现了 CustomPrincipal），则提供了额外的功能。

我认为一些选项是（不确定每个选项背后的逻辑）：

*   使用会话（并处理逻辑来创建我需要的东西，忘记校长）
*   Application_AuthenticateRequest - 在网上看到评论说这是老派
*   在基本控制器上设置的自定义过滤器
*   在基本控制器上创建一个 AuthorizationAttribute，让每个人都可以通过并根据需要设置 HttpContext.User
*   IHttpModule - 这似乎是一种下降方式（除非其他人不同意，否则沿着这条路前进）。

想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-14T10:21:47.700

您可以使用全局操作过滤器。假设您有一个自定义主体：

```
public class MyPrincipal : GenericPrincipal
{
    public MyPrincipal(IIdentity identity, string[] roles): base(identity, roles)
    {
    }

    ... some custom properties and stuff
} 
```

然后您可以编写一个全局授权操作过滤器（但它不是从基础派生`AuthorizeAttribute`以避免全局身份验证，它只是实现`IAuthorizationFilter`接口以确保它在任何其他过滤器之前运行）：

```
public class GlobalIdentityInjector : ActionFilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        var identity = filterContext.HttpContext.User.Identity;

        // do some stuff here and assign a custom principal:
        var principal = new MyPrincipal(identity, null);
        // here you can assign some custom property that every user 
        // (even the non-authenticated have)

        // set the custom principal
        filterContext.HttpContext.User = principal;
    }
} 
```

全局过滤器将被注册，`~/App_Start/FilterConfig.cs`以确保它适用于所有操作：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new GlobalIdentityInjector());
    }
} 
```

现在您可以拥有一个自定义授权属性，该属性仅适用于某些需要身份验证的控制器操作：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        // we know that at this stage we have our custom
        // principal injected by the global action filter
        var myPrincipal = (MyPrincipal)httpContext.User;

        // do some additional work here to enrich this custom principal
        // by setting some other properties that apply only to
        // authenticated users

        return true;

    }
} 
```

然后你可以有两种类型的动作：

```
public ActionResult Foo()
{
    var user = (MyPrincipal)User;

    // work with the custom properties that apply only
    // to anonymous users

    ...
}

[MyAuthorize]
public ActionResult Bar()
{
    var user = (MyPrincipal)User;

    // here you can work with all the properties
    // because we know that the custom authorization
    // attribute set them and the global filter set the other properties

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T14:46:03.297

覆盖主体：

```
protected void Application_PostAuthenticateRequest(object sender, EventArgs e) 
```

代替

```
protected void Application_AuthenticateRequest(object sender, EventArgs e) 
```

在 Global.asax.cs 中为我工作的 ASP Web 应用程序

# javascript - 带有事件模拟的 javascript UI 测试框架

> ID：11476310
> 
> 赞同：0
> 
> 时间：2012-07-13T18:34:46.297
> 
> 标签：javascript, jquery, user-interface, automated-tests, frontend

我正在寻找一个框架来通过 jquery 模拟鼠标拖放各种 html 标签，然后捕获屏幕并将其与保存的图像进行比较。我这样做是为了测试网页 UI。

我看过一篇很棒的帖子：[Javascript testing to simulation drag for JQuery UI sortable lists](https://stackoverflow.com/questions/7116149/javascript-testing-to-simulate-drag-for-jquery-ui-sortable-lists)，它给出了这个链接：[https ://github.com/jquery/jquery-ui/blob/master/tests/jquery.simulate.js](https://github.com/jquery/jquery-ui/blob/master/tests/jquery.simulate.js)

目前我不确定如何使用 jquery.simulate.js（但我正在使用它来学习），所以我很感兴趣是否有任何其他可以使用的框架（也许一些看起来**更像 JUnit/NUnit**）。

最好我希望能够像这样编写代码：

```
simulateDivDrag(Image expectedResult){
  simulate mouse drag  of event
  take screenshot
  cmp(expectedResult, screenshot)
} 
```

我记得读过 Firefox 已经为这种自动化 UI 测试构建了一个内部工具，所以这绝对是可能的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:38:18.207

如果您使用的是 jUnit，您可能想要使用[Selenium](http://seleniumhq.org/)，它可以在多个浏览器中自动执行用户操作。

# php - 按需报告PHP错误

> ID：11476312
> 
> 赞同：0
> 
> 时间：2012-07-13T18:34:52.093
> 
> 标签：php, iis

在 PHP 中，你如何使它只在使用 error_reporting() 函数时显示错误。当前，IIS PHP 应用程序设置为“生产机器”。如果我将其更改为开发机器，即使没有 error_reporting()，它也会打印出所有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:47:22.937

`error_reporting`可以由您的应用程序设置并覆盖 php.ini 设置。

在任何情况下，您都不应该*将*其关闭。

相反，在 php.ini 或您的代码中更改`display_errors`为：`Off`

```
ini_set('display_errors', 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:42:08.443

在您的“生产机器”上，您可以直接在您的 PHP 脚本中打开和关闭错误报告。

您也可以在服务器上的 php.ini 文件中找到它来设置默认值。

```
<?php

// Turn off all error reporting
error_reporting(0);

// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE);

// Reporting E_NOTICE can be good too (to report uninitialized
// variables or catch variable name misspellings ...)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

// Report all errors except E_NOTICE
// This is the default value set in php.ini
error_reporting(E_ALL ^ E_NOTICE);

// Report all PHP errors (see changelog)
error_reporting(E_ALL);

// Report all PHP errors
error_reporting(-1);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T19:21:27.420

我得到了我想要使用的行为：

```
error_reporting(E_ALL); ini_set('display_errors', 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:37:45.087

做

```
error_reporting(0); 
```

为你工作？

# android - 以地平线为轴确定设备的角度-android

> ID：11476316
> 
> 赞同：1
> 
> 时间：2012-07-13T18:34:59.893
> 
> 标签：android, android-orientation

我有一个有趣的问题。我正在尝试追踪用户手机的角度，无论他们是横向还是纵向或两者之间的任何位置..

我目前正在使用 SENSOR_ORIENTATION 并获得 YAW、ROLL 和 Pitch。我还尝试使用偏航来获取 zaxis 上用户视口的角度，并纠正用户滚动（横向、纵向或介于两者之间）我做了一些简单的数学运算..：

```
double roll = phoneOri.getRoll();
double yaw = phoneOri.getYaw()+roll;

     if (yaw>=360){
                yaw = (yaw - 360);
            }
            if (yaw<0){
                yaw = (yaw+360);    
            } 
```

无论滚动位置如何，这段代码都会纠正偏航并给我正确的角度。
但这种数学似乎不适用于俯仰。如果我将手机垂直于地板，无论滚动或偏航，我希望始终获得 0 的俯仰角，如果我将手机的背面直接面向天空并平行于地面，我希望获得 90，回到地面-90；

这是我如何获得俯仰滚动和偏航：

```
 double yaw;
    double pitch;
    double roll;

public void onSensorChanged(SensorEvent evt) {
            int type=evt.sensor.getType();
            if(type == Sensor.TYPE_ORIENTATION){
                yaw = evt.values[0];
                pitch = evt.values[1];
                roll = evt.values[2];
            }
            if (type == Sensor.TYPE_MAGNETIC_FIELD) {
                orientation[0]=(orientation[0]*1+evt.values[0])*0.5f;
                orientation[1]=(orientation[1]*1+evt.values[1])*0.5f;
                orientation[2]=(orientation[2]*1+evt.values[2])*0.5f;
            } else if (type == Sensor.TYPE_ACCELEROMETER) {
                acceleration[0]=(acceleration[0]*2+evt.values[0])*0.33334f;
                acceleration[1]=(acceleration[1]*2+evt.values[1])*0.33334f;
                acceleration[2]=(acceleration[2]*2+evt.values[2])*0.33334f;
            }
            if ((type==Sensor.TYPE_MAGNETIC_FIELD) || (type==Sensor.TYPE_ACCELEROMETER)) {
                float newMat[]=new float[16];

                //Toast toast = Toast.makeText(ctx.getApplicationContext(), "accel", Toast.LENGTH_SHORT);
                //toast.show();
                SensorManager.getRotationMatrix(newMat, null, acceleration, orientation);
                if(displayOri==0||displayOri==2){
                    SensorManager.remapCoordinateSystem(newMat,SensorManager.AXIS_X*-1, SensorManager.AXIS_MINUS_Y*-1,newMat);
                }else{
                    SensorManager.remapCoordinateSystem(newMat,SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X,newMat);
                }

                matrix=newMat;
                SensorManager.getOrientation (newMat, orientationValues); 
            }
        } 
```

目前我得到以下结果：

![](../Images/98e0a7aa7994917e680a9db9b01200a8.png)

俯仰 = **-90**滚动 = **0**；

![在此处输入图像描述](../Images/16baf4d42246af2a44b3e379e7460d78.png)

俯仰 = **0**滚动 = **90** ;

![在此处输入图像描述](../Images/d74429922349890e17f471f3ae565427.png)

俯仰 = **90**滚动 = **-20**；

![在此处输入图像描述](../Images/044ae8a4364af2d4e7dbd6464d54cb48.png)

俯仰 = **0**滚动 = **-90**；

我试图在这些位置中的任何一个位置获得 0 的音高，然后当用户在 HORIZON 轴上倾斜手机时分别获得 -90 和 90 之间的音高？

有任何想法吗？哦，我应该补充一点，我的应用程序被锁定为横向模式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:24:15.087

这些常数可能有累积误差。尝试改用数学函数...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T19:15:04.993

有趣的问题，

[您是否尝试过获取此处](http://developer.android.com/reference/android/hardware/SensorListener.html#onSensorChanged%28int,%20float%5B%5D%29)提到的绝对 x、y 和 z 值（与手机的方向无关），使用它，您应该获得您正在寻找的绝对 y 值

> public abstract void onSensorChanged (int sensor, float[] values)
> 
> **> 重要提示：当设备的屏幕方向改变时，轴会被交换。要访问未交换的值，请在 values[] 中使用索引 3、4 和 5。**

# google-apps-script - 是否可以使用谷歌应用脚 本检索域用户个人资料图片

> ID：11476318
> 
> 赞同：1
> 
> 时间：2012-07-13T18:35:07.040
> 
> 标签：google-apps-script, google-apps

我大量使用 Apps 脚本来维护我们的 Google Apps for Business 帐户，现在通过 ContentService 和 HtmlService，我们将其范围扩展到一些可直接从公司内部网访问的功能。

是否可以使用 Google Domain 或 Apps 脚本公开的用户 API 来检索用户个人资料图片。我可以使用 python API 做到这一点，但不想引入到 AppEngine 或其他托管服务的往返以达到相同的目的。

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:20:12.517

单独使用 Apps 脚本是不可能的。然而，Apps Script 和 User Profiles API 在理论上是可行的。（[https://developers.google.com/google-apps/profiles/#retrieving_photo](https://developers.google.com/google-apps/profiles/#retrieving_photo)）。

[要将两者结合起来，您可以使用著名库页面 ( https://developers.google.com/apps-script/notable-script-libraries](https://developers.google.com/apps-script/notable-script-libraries) )中列出的 OAuth 服务

# iphone - 无法使用 wsdl2Objc (IPhone) 从 WSDL 获取 Soap 服务的代码

> ID：11476323
> 
> 赞同：1
> 
> 时间：2012-07-13T18:35:40.753
> 
> 标签：iphone, ios, soap, wsdl

`https://amstest.aia.org/netforumaiatest2/xweb/secure/netforumxml.asmx`我将目标文件夹[的](http://code.google.com/p/wsdl2objc/wiki/UsageInstructions)URL ( 有谁知道为什么？

（我正在开发一个 iPhone 应用程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:45:02.660

我已经写了几个关于 wsdl2objc 的教程：它们可能会帮助您入门。 [http://brismith66.blogspot.com/search/label/iPhone%20Development](http://brismith66.blogspot.com/search/label/iPhone%20Development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:56:54.870

我使用了[sudzC](http://sudzc.com/)（在线工具）来生成代码，它对我来说工作正常（在更正了生成代码中的一些错误之后）。

# correlation - SPSS从偏相关中排除受试者

> ID：11476324
> 
> 赞同：0
> 
> 时间：2012-07-13T18:35:46.850
> 
> 标签：correlation, spss

所以我在 SPSS 中运行偏相关，每次我添加一个我控制的新变量时，分析中的参与者数量都会稳步减少。但是，我分析了频率并且没有缺失值。事实上，我知道我没有缺失值，因为输入的每个值都是平均值。有谁知道为什么 SPSS 在没有遗漏任何值的情况下将他们排除在相关性之外？有趣的是，当我在有意删除主题值后查看频率时，频率分析仍然返回一个输出，表明仍然没有丢失任何值。这太奇怪了。有没有人遇到过这个？关于如何纠正这种情况的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:50:34.417

由于部分 corr 报告的是 df，而不是案例数，并且控制变量会消耗自由度，因此添加控制变量将减少该数量。

# jquery - jquery垂直居中多张不同尺寸的图片

> ID：11476325
> 
> 赞同：0
> 
> 时间：2012-07-13T18:35:53.043
> 
> 标签：jquery, alignment

我有一个流畅的网格布局，3 行，每行有 3 个不同的 % 宽度块。本质上，这是一个 3x3 网格，在视口中扩展了 horz 和 vert，尽管块的宽度不同。在每个块中，都有一个设置为 100% 宽度的图像。

我编写了这个小脚本来垂直对齐块内的这些图像，但是，margin-top 将相同的值应用于所有图像。我需要它将值应用于单个图像。

```
<script>
$(window).on('resize', function () {
var $gii = $('.grid-item-img');
var giih = $gii.height();
$gii.css('margin-top', + giih / -2 + "px");
}).trigger('resize');
</script> 
```

grid-item-img 上的 CSS 是：

```
.grid-item-img {display: block; width: 100%; position: absolute; top: 50%;} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:45:30.797

使用[jQuery .each()](http://api.jquery.com/each/)：

```
$(window).on('resize', function () {
    $('.grid-item-img').each(function(index, element) {
        var $element = $(element);
        $element.css('margin-top', + $element.height() / -2 + "px");
    });
}).trigger('resize'); 
```

# excel - 使用 VBA 向单元格添加单引号

> ID：11476326
> 
> 赞同：7
> 
> 时间：2012-07-13T18:35:59.037
> 
> 标签：excel, vba, single-quotes

我试图通过使用将单引号添加到列中的值`Chr(39)`，但我只得到第二个引号。
例如，我想要**“价值”**，但我正在获得**价值**

但是，如果我通过使用双引号来使用`Chr(34)`它，我会得到**“价值”**

```
Sub AddQuote()
Dim myCell As Range
    For Each myCell In Selection
        If myCell.Value <> "" Then
            myCell.Value = Chr(39) & myCell.Value & Chr(39)
        End If
    Next myCell
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T20:36:38.787

只需添加另一个单引号：

```
Sub AddQuote()
Dim myCell As Range
    For Each myCell In Selection
        If myCell.Value <> "" Then
            myCell.Value = Chr(39) & Chr(39) & myCell.Value & Chr(39)
        End If
    Next myCell
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T19:12:33.307

我更喜欢这种语法。无需遍历每个单元格，只需将整个选择读入一个数组，对数组进行操作，然后将数组内容转储回工作表。最多两次触摸工作表。

```
Sub AddQuote()

  Dim i As Long, j As Long
  Dim inputData As Variant
  Dim outputData As Variant

  ' only act on a range
  If TypeName(Selection) = "Range" Then
    ' assign selection value to a Variant array
    inputData = Selection.Value
    ' create an output array of the same size
    ReDim outputData(LBound(inputData) To UBound(inputData), _
                     LBound(inputData, 2) To UBound(inputData, 2))

    ' loop through all array dimensions
    For i = LBound(inputData) To UBound(inputData)
      For j = LBound(inputData, 2) To UBound(inputData, 2)
        ' array element will be = Empty if cell was empty
        If Not IsEmpty(inputData(i, j)) Then
          outputData(i, j) = Chr(39) & Chr(39) & inputData(i, j) & Chr(39)
        End If
      Next j
    Next i

    Selection.Value = outputData
  End If

End Sub 
```

它还考虑了多列选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T18:39:54.850

第一个引号 ' 表示单元格被视为文本。

因此，您必须在 LHS 上使用两个单引号，并在右侧使用一个单引号才能正确显示。

注意如果**A1** =`''test'`和**A2** =`''abc'`

然后`=A1&A2`会给你`'test''abc'`如你所愿

# git - 引用 git 存储库和分支的规范方法是什么

> ID：11476335
> 
> 赞同：3
> 
> 时间：2012-07-13T18:36:22.943
> 
> 标签：git

我想我看到了`repository#branch`合法的地方，但不确定。已经对此进行了一些搜索，这是很难找到好的搜索关键字的事情之一。“git repository branch canonical”没有返回太多。

我问的原因只是想知道在我的开发团队中引用存储库分支的最佳方式。我知道这是一个微不足道的问题，但我只是对此感到好奇。我经常使用几个存储库和每个存储库中的几个分支，所以这是我需要经常使用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:55:31.127

如果您想按名称调用存储库，标准约定是只说“name dot git”或写成“name.git”。例如，如果我想引用 git 自己的 repo，我会说“git.git”。

至于引用分支，我从未见过有人需要速记来引用特定回购中的特定分支的情况。我并不是说这种需求不存在，但我从来没有遇到过。如果我不得不告诉某人我只会说“git.git 上的‘下一个’分支”。如果你确实发现你需要经常使用速记，你应该随心所欲地编造任何东西，然后教你的同事使用同样的速记。“git.git#next”对我来说似乎是一个合理的解决方案。

# xcode - Iphone - 幽灵内存泄漏

> ID：11476340
> 
> 赞同：0
> 
> 时间：2012-07-13T18:36:36.390
> 
> 标签：xcode, memory-leaks

我完全不知道这个内存泄漏是从哪里来的。右侧的任何链接都没有将其追溯到我的代码的一部分。有谁知道是什么原因造成的，或者我该如何追踪它？

*它在我的代码加载后立即发生

![在此处输入图像描述](../Images/dc7a0225865f53d6c0ac08f62264bcfc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:48:13.600

你不应该。您正在查看少于 1k 的“泄漏”内存（实际上可能没有泄漏；泄漏检测器并不完美）。Cocoa 本身有小的泄漏，以及看似泄漏的小东西。

您要查找的是大量泄漏或定期发生的泄漏。追逐 1k 的内存，即使是你的错（可能不是），也不值得付出努力。

如果您可以创建一个演示问题的小程序，那么值得打开一个雷达 (bugreport.apple.com)。确保他们摆脱所有小泄漏（因为它们会影响每个程序），并修复 Instruments 以更好地过滤掉误报，这对 Apple 来说是件好事。但是对于单个程序来说，追逐内存的每个字节并不是很好地利用资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:49:35.783

追踪任何问题的最佳方法是在代码中乱扔 NSLog 语句和断点。尝试找出导致问题的线路，然后找出解决方法（这是棘手的一点）。如果您正在使用其他一些 API，那么其中可能存在泄漏，但可能不太可能。更有可能是您的代码泄漏，因此最终应该可以跟踪并找到它。只是一个缓慢的过程。

# c# - “尚未设置先决条件的安装位置”与 2010 .net 4.0

> ID：11476341
> 
> 赞同：0
> 
> 时间：2012-07-13T18:36:43.053
> 
> 标签：c#, .net, visual-studio-2010, .net-4.0, bootstrapper

这不再是一个真正的问题，因为我自己偶然发现了解决方案，但我认为值得分享，因为在 20 次谷歌搜索后我找不到它。

在发布具有 .net 4.0 框架依赖项的 vs 2010 c# 程序时，我想“从与我的应用程序相同的位置下载先决条件”。好吧，这就像过去的 .net 3.5 一样失败了（根据数百个论坛帖子）。这个解决方案比我发现的任何帖子都简单 100 倍......

因此，我所要做的就是从[http://www.microsoft.com/en-us/download/details.aspx?id=24872](http://www.microsoft.com/en-us/download/details.aspx?id=24872)下载“dotNetFx40_Client_x86_x64.exe”并将其复制到我的引导程序文件夹中的“DotNetFX40Client”中。

我正在运行 Windows 7 Pro x64，所以 SDK 引导程序在

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages 
```

[同样，我从http://www.microsoft.com/en-us/download/details.aspx?id=25](http://www.microsoft.com/en-us/download/details.aspx?id=25)获得了“WindowsInstaller-KB893803-v2-x86”并将其放入“WindowsInstaller3_1”

希望这会有所帮助，我希望我发布解决方案没有违反任何 Stack Overflow 规则。这里的所有其他问题都与 .net 3.5 有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:16:22.593

答案就在问题中。很抱歉对于这个误会。

[从http://www.microsoft.com/en-us/download/details.aspx?id=24872](http://www.microsoft.com/en-us/download/details.aspx?id=24872)下载“dotNetFx40_Client_x86_x64.exe”并将其复制到我的引导程序文件夹中的“DotNetFX40Client”中。

我正在运行 Windows 7 Pro x64，所以 SDK 引导程序在

> C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages

[从http://www.microsoft.com/en-us/download/details.aspx?id=25](http://www.microsoft.com/en-us/download/details.aspx?id=25)获取“WindowsInstaller-KB893803-v2-x86”并将其放入“WindowsInstaller3_1”

# web-services - 显示 SOA 环境版本和依赖项

> ID：11476345
> 
> 赞同：0
> 
> 时间：2012-07-13T18:36:49.877
> 
> 标签：web-services, web-applications, admin, soa, sysadmin

在我们的 SOA 环境中，我们有各种各样的环境，例如 dev、test、qa、uat 等。在每一种环境中，我们都有各种 Web 和 REST 应用程序。

我正在寻找某种基于 Web 的轻量级仪表板来显示在所有环境中运行的内容以及是否存在任何版本依赖关系。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:57:15.517

[So-Aware](http://www.tellagostudios.com/products/so-aware%E2%84%A2)是一款可以做到这一点的应用程序。有一个免费的快递版本可以尝试。

# iphone - 选择标签的性能优势？

> ID：11476346
> 
> 赞同：3
> 
> 时间：2012-07-13T18:36:51.953
> 
> 标签：iphone, objective-c, ios, performance, tags

取决于您用作标签的数字，性能方面是否有任何优势？

我有 4 组用标签标记的对象。有什么理由不跳过数字吗？即，我可以让第一组从 0 到 99，第二组从 1000 到 1099，第三组从 2000 到 2099，第四组从 100,000 到 100,099？

请注意，我实际上并没有在我的代码中使用这么多对象。所以我不是在问拥有这么多对象的性能问题。我只想知道跳过标签是否不好。它帮助我组织我的代码和我的想法。有人知道标签是如何存储的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:40:45.997

该标记只是存储为 NSInteger 属性。据我了解，`-viewWithTag:`搜索视图层次结构，检查每个视图是否有匹配的标签，然后返回第一个匹配项。跳过数字不应该有性能损失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:40:48.923

标签存储为整数。iOS 上的整数使用 4 个字节存储。无论您使用哪个值，将它们与另一个整数值进行比较都需要完全相同的时间。

也就是说，可能存在用于存储视图层次结构的内部优化。举个例子，Apple 可能会选择使用某种树结构来将标签映射到视图。这部分我无法回答，因为这些事情是苹果开发人员内部的。

你有两个选择；

1.  测量自己（使用仪器）。
2.  不要担心，因为无论如何影响几乎是看不见的。

# android - Android SQlite 插入语法错误

> ID：11476351
> 
> 赞同：0
> 
> 时间：2012-07-13T18:37:18.813
> 
> 标签：android, sqlite

这里有一个类似的问题，但我的情况不同。

```
07-13 13:03:11.460: E/SQLiteDatabase(6268): Error inserting 2=Fri Jul 13 13:03:10   EDT 2012 WebView is exiting 1=Fri Jul 13 13:02:53 EDT 2012 Registering Device for Notifications 0=Fri Jul 13 13:02:41 EDT 2012 Device passed GCM requirements test

07-13 13:03:11.460: E/SQLiteDatabase(6268): android.database.sqlite.SQLiteException: near "2": syntax error: , while compiling: INSERT INTO log(2,1,0) VALUES (?,?,?) 
```

我正在尝试将简单的字符串值插入到 ContentValues 中。

```
LogOpenHelper helper = new LogOpenHelper(this);
ContentValues values = new ContentValues();
for (int i = 0; i < logReporter.getSize(); i++) {
        values.put(i + "", temp[i]);
    }
helper.getWritableDatabase().insert(TABLE_NAME, null, values);
    helper.close();

    cursor.close(); 
```

上面的 for 循环只是将我的所有日​​志消息从字符串 [] 中取出。string[] 在整个应用程序中填充，因为我不需要持续的数据库访问。只需在启动和关闭时插入和查询以进行调试

我试图插入日期实例的字符串 + 一个字符串。我缺少的 sqlite 解析器中是否存在不允许的特定字符序列？我必须使用 ContentValues，因为该类型的对象是调用 insert() 的参数。

关于为什么会出现错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:50:30.343

为了正确插入，您必须将列名作为方法中的第一个参数传递`values.put()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:56:14.153

正如所写的那样，您正在插入具有动态列数的行，其数量取决于**logReporter.getSize()** ...这可能不是您想要的。

假设您使用以下命令创建了表：

```
CREATE TABLE logtable (_id INTEGER PRIMARY KEY AUTOINCREMENT, log_message_column TEXT); 
```

你应该尝试这样的事情：

```
SQLiteDatabase database = helper.getWritableDatabase();

for (String logMessage: logReporter) {
    values.put("log_message_column", logMessage);
    database.insert("logtable", null, values);
}

helper.close() 
```

然后，您将在表 logtable 的**logMessage****列**中获得日志消息。

但是为什么你要为你的日志使用数据库呢？为什么不使用简单的*Log.d()*或将日志写入 SD 卡上的某个文件？

# php - 将关联数组转换为法线

> ID：11476352
> 
> 赞同：1
> 
> 时间：2012-07-13T18:37:24.387
> 
> 标签：php, arrays, multidimensional-array

如果我有这样的数组：

```
array(
    "unknownString" => 34, //unknown number
    "anotherString" => 32,
    "asdf" => 21
); 
```

我怎样才能把它转换成这个：

```
array(
    array("unknownString", 34),
    array("anotherString", 32),
    array("asdf", 21)
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:39:17.990

这应该有效：

```
$array = array(
    "unknownString" => 34, //unknown number
    "anotherString" => 32,
    "asdf" => 21
);

$new_array = array();
foreach( $array as $key => $value) {
    $new_array[] = array( $key, $value);
} 
```

如果你愿意，你也可以使用[`array_walk()`](http://php.net/array_walk)：

```
$new_array = array();
array_walk( $array, function( $el, $key) use( &$new_array){ 
   $new_array[] = array( $key, $el); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:48:07.897

这是一个稍微不同的版本，使用[`array_map`](http://php.net/manual/en/function.array-map.php)：

```
function swap($value, $key) {
   return array( $key, $value );
}
$arr = array(
    "unknownString" => 34, //unknown number
    "anotherString" => 32,
    "asdf" => 21
);

print_r(array_map('swap', $arr, array_keys($arr))); 
```

# c++ - BOOST_FOREACH 在模板中不起作用？

> ID：11476356
> 
> 赞同：2
> 
> 时间：2012-07-13T18:37:37.687
> 
> 标签：c++, templates, boost

我尝试在具有自定义但类型参数独立的迭代器的模板函数中使用 BOOST_FOREACH。我收到 4-5 个错误，表明我的迭代器类没有很好地定义为迭代器。

在没有 BOOST_FOREACH 的情况下重写循环，或“取消模板化”函数会使错误消失。

这是 BOOST_FOREACH 的已知限制吗？

## 编辑。

对不起。一些代码：

```
template <class T>
T fun()
{
    T result(0.0);

    BOOST_FOREACH(const math::IntegerVector &v, math::IntegerVectorRange(math::IntegerVector(2 , 2 ,2)))
    {
        // Do stuff.
    }

    return result;
} 
```

IntegerVector* 类型定义明确，在模板外工作正常。它们也不依赖于 T。

完整的错误是：

```
make[1]: Entering directory `/home/panayk/Workspace/petros-game'
Making all in src/c++
make[2]: Entering directory `/home/panayk/Workspace/petros-game/src/c++'
depbase=`echo fluid/Tracer.lo | sed 's|[^/]*$|.deps/&|;s|\.lo$||'`;\
    /bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..   -I/usr/include/python2.7 -I/usr/include -O2 -I/usr/include/python2.7 -MT fluid/Tracer.lo -MD -MP -MF $depbase.Tpo -c -o fluid/Tracer.lo fluid/Tracer.cc &&\
    mv -f $depbase.Tpo $depbase.Plo
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I/usr/include/python2.7 -I/usr/include -O2 -I/usr/include/python2.7 -MT fluid/Tracer.lo -MD -MP -MF fluid/.deps/Tracer.Tpo -c fluid/Tracer.cc  -fPIC -DPIC -o fluid/.libs/Tracer.o
In file included from /usr/include/boost/iterator/iterator_categories.hpp:15:0,
                 from /usr/include/boost/iterator/detail/facade_iterator_category.hpp:7,
                 from /usr/include/boost/iterator/iterator_facade.hpp:14,
                 from ./math/Vector.h:5,
                 from ./fluid/Tracer.h:4,
                 from fluid/Tracer.cc:1:
/usr/include/boost/mpl/eval_if.hpp: In instantiation of 'boost::mpl::eval_if<mpl_::bool_<false>, boost::range_const_iterator<math::IntegerVectorRange>, boost::range_mutable_iterator<math::IntegerVectorRange> >':
/usr/include/boost/foreach.hpp:364:13:   instantiated from 'boost::foreach_detail_::foreach_iterator<math::IntegerVectorRange, mpl_::bool_<false> >'
make[2]: Leaving directory `/home/panayk/Workspace/petros-game/src/c++'
./fluid/InterpolatorGrid.h:45:3:   instantiated from here
make[1]: Leaving directory `/home/panayk/Workspace/petros-game'
/usr/include/boost/mpl/eval_if.hpp:38:31: error: no type named 'type' in 'boost::mpl::eval_if<mpl_::bool_<false>, boost::range_const_iterator<math::IntegerVectorRange>, boost::range_mutable_iterator<math::IntegerVectorRange> >::f_ {aka struct boost::range_mutable_iterator<math::IntegerVectorRange>}'
In file included from fluid/Tracer.cc:3:0:
./fluid/InterpolatorGrid.h: In member function 'T fluid::InterpolatorGrid::interpolate(const std::vector<std::vector<std::vector<T> > >&, const RealVector&) const':
./fluid/InterpolatorGrid.h:45:3: error: no matching function for call to 'begin(const boost::foreach_detail_::auto_any_base&, boost::foreach_detail_::type2type<math::IntegerVectorRange, mpl_::bool_<false> >*, boost::enable_if_c<true, boost::mpl::and_<boost::mpl::not_<boost::foreach::is_noncopyable<math::IntegerVectorRange> >, boost::foreach::is_lightweight_proxy<math::IntegerVectorRange>, mpl_::bool_<true>, mpl_::bool_<true>, mpl_::bool_<true> > >::type*&)'
./fluid/InterpolatorGrid.h:45:3: note: candidates are:
/usr/include/boost/foreach.hpp:657:1: note: template<class T, class C> boost::foreach_detail_::auto_any<typename boost::foreach_detail_::foreach_iterator<T, C>::type> boost::foreach_detail_::begin(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T, C>*, mpl_::true_*)
/usr/include/boost/foreach.hpp:665:1: note: template<class T, class C> boost::foreach_detail_::auto_any<typename boost::foreach_detail_::foreach_iterator<T, C>::type> boost::foreach_detail_::begin(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T, C>*, mpl_::false_*)
/usr/include/boost/foreach.hpp:676:1: note: template<class T> boost::foreach_detail_::auto_any<typename boost::foreach_detail_::foreach_iterator<T, mpl_::bool_<true> >::type> boost::foreach_detail_::begin(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T, mpl_::bool_<true> >*, bool*)
/usr/include/boost/foreach.hpp:686:1: note: template<class T, class C> boost::foreach_detail_::auto_any<T*> boost::foreach_detail_::begin(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T*, C>*, mpl_::true_*)
./fluid/InterpolatorGrid.h:45:3: error: no matching function for call to 'end(const boost::foreach_detail_::auto_any_base&, boost::foreach_detail_::type2type<math::IntegerVectorRange, mpl_::bool_<false> >*, boost::enable_if_c<true, boost::mpl::and_<boost::mpl::not_<boost::foreach::is_noncopyable<math::IntegerVectorRange> >, boost::foreach::is_lightweight_proxy<math::IntegerVectorRange>, mpl_::bool_<true>, mpl_::bool_<true>, mpl_::bool_<true> > >::type*&)'
./fluid/InterpolatorGrid.h:45:3: note: candidates are:
/usr/include/boost/foreach.hpp:697:1: note: template<class T, class C> boost::foreach_detail_::auto_any<typename boost::foreach_detail_::foreach_iterator<T, C>::type> boost::foreach_detail_::end(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T, C>*, mpl_::true_*)
/usr/include/boost/foreach.hpp:705:1: note: template<class T, class C> boost::foreach_detail_::auto_any<typename boost::foreach_detail_::foreach_iterator<T, C>::type> boost::foreach_detail_::end(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T, C>*, mpl_::false_*)
/usr/include/boost/foreach.hpp:716:1: note: template<class T> boost::foreach_detail_::auto_any<typename boost::foreach_detail_::foreach_iterator<T, mpl_::bool_<true> >::type> boost::foreach_detail_::end(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T, mpl_::bool_<true> >*, bool*)
/usr/include/boost/foreach.hpp:726:1: note: template<class T, class C> boost::foreach_detail_::auto_any<int> boost::foreach_detail_::end(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T*, C>*, mpl_::true_*)
./fluid/InterpolatorGrid.h:45:3: error: no matching function for call to 'deref(const boost::foreach_detail_::auto_any_base&, boost::foreach_detail_::type2type<math::IntegerVectorRange, mpl_::bool_<false> >*)'
./fluid/InterpolatorGrid.h:45:3: note: candidate is:
/usr/include/boost/foreach.hpp:765:1: note: template<class T, class C> typename boost::foreach_detail_::foreach_reference::type boost::foreach_detail_::deref(boost::foreach_detail_::auto_any_t, boost::foreach_detail_::type2type<T, C>*)
make[2]: *** [fluid/Tracer.lo] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

等等。这对我来说太多了，但 IntegerVectorRange::begin() 在那里并返回一个 const_iterator。IntegerVectorRange::end() 也是如此。

## EDIT2（IntegerVectorRange 的东西）

```
class IntegerVectorIterator
: public boost::iterator_facade
<
    IntegerVectorIterator,
    const IntegerVector,
    boost::forward_traversal_tag
>
{
private:
    IntegerVector current;
    const IntegerVector start, limit;

    void increment();
    bool equal(const IntegerVectorIterator& other) const;
    const IntegerVector &dereference() const;

public:
    IntegerVectorIterator(const IntegerVector &start,
                          const IntegerVector &limit);
    IntegerVectorIterator(const IntegerVector &current,
                          const IntegerVector &start,
                          const IntegerVector &limit);

    friend class boost::iterator_core_access;
};

class IntegerVectorRange
{
private:
    const IntegerVector start, limit;
    const IntegerVectorIterator end_it;
public:
    IntegerVectorRange(IntegerVector limit);
    IntegerVectorRange(IntegerVector start, IntegerVector limit);

    typedef IntegerVectorIterator const_iterator;

    const_iterator begin() const;
    const const_iterator &end() const;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:46:33.967

假装丢失的课程，GCC 不喜欢它：http: [//ideone.com/3O3OB](http://ideone.com/3O3OB)。Clang++ 编译它就好了。所以，我猜你有一个编译器错误，或者可能是所有的`#ifdefs`错误`boost/foreach.hpp`

特别说明的是实例化回溯的这一部分：

```
eval_if<bool_<false>, range_const_iterator<...>, range_mutable_iterator<...> > 
```

建议使用任何机制`BOOST_FOREACH`来确定您是可变迭代还是常量迭代这次都得到了错误的答案。

# passwords - Perforce：如何更改密码长度要求？

> ID：11476361
> 
> 赞同：0
> 
> 时间：2012-07-13T18:37:48.660
> 
> 标签：passwords, perforce, passwd

我希望将用户的密码强制更改为 7 个字符，但我收到消息：密码长度应至少为 8 个字符。

我知道这可以改变，但我不确定如何改变。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:03:41.070

Perforce 中的一切都可以通过命令行来完成，但对于用户界面的爱好者来说，您可以启动`P4Admin`，然后使用`Administration`和`Password Security Level`。这将打开一个包含 4 个选项的对话框：

*   3（需要基于票证的身份验证）
*   2（需要强密码）
*   1（需要密码）
*   0（不需要密码）

如果您当前的用户没有权限，您将弹出警告。

[此处](http://www.perforce.com/perforce/doc.current/manuals/p4sag/03_superuser.html#1081537)`Security Levels`详细说明了规则。正如 Smeltdown 的评论中所解释的，1 级将有“遗留支持”

```
Legacy support: Strong passwords are required for users of post-2003.2 Perforce applications, but existing passwords are not reset.
Pre-2003.2 Perforce applications can set passwords with p4 passwd or in the p4 user form, but password strength is not enforced.
Users with passwords can use either their P4PASSWD setting or the p4 login command for ticket-based authentication. 
```

对于 2 级，支持没有那么灵活：

```
Legacy support: All unverified strength passwords must be changed.
Users of pre-2003.2 Perforce applications cannot set passwords. Users at release 2003.2 or higher must use p4 passwd and enter their passwords at the prompt. Setting passwords with the p4 user form or the p4 passwd -O oldpass -P newpass command is prohibited.
On Windows, passwords are no longer stored in (or read from) the registry. (Storing P4PASSWD as an environment variable is supported, but passwords set with p4 set P4PASSWD are ignored.)
Users who have set strong passwords with a 2003.2 or higher Perforce application can use either their P4PASSWD setting for password-based authentication, or the p4 login command for ticket-based authentication. 
```

# c# - 如何将 ProgressBar 设置为在 Timer 的每个刻度处递增？

> ID：11476364
> 
> 赞同：0
> 
> 时间：2012-07-13T18:38:09.283
> 
> 标签：c#, winforms

我有一个简单的表单，它应该启动一个计时器，执行一个耗时的操作，并在该操作工作时以特定间隔更新进度条。现在，耗时的操作绑定到一个`SearchButton`. 但是，进度条没有任何反应，即使耗时的操作（在这种情况下是下载）确实需要几秒钟：

```
public partial class Form1 : Form
{
    System.Windows.Forms.Timer searchProgressTimer;

    public Form1()
    {
        InitializeComponent();
        this.searchProgressTimer = new System.Windows.Forms.Timer();
    }

    private void InitializeTimer()
    {
        this.searchProgressTimer.Interval = 250;
        this.searchProgressTimer.Tick += new EventHandler(searchProgressTimer_Tick);
    }

    void searchProgressTimer_Tick(object sender, EventArgs e)
    {
        searchProgressBar.Increment(1);
        if (searchProgressBar.Value == searchProgressBar.Maximum)
            this.searchProgressTimer.Stop();
    }

    private void SearchDatabase_Click(object sender, EventArgs e)
    {
        this.searchProgressTimer.Start();

        // Time-consuming operation
        String filename = @"http://www.bankofengland.co.uk/publications/Documents/quarterlybulletin/qb0704.pdf";
        WebClient webClient = new WebClient();
        webClient.DownloadFileAsync(new Uri(filename), @"file.pdf");
        int test;
        for (int i = 0; i < 100000; i++)
            for (int j = 0; j < 100000; j++)
                test = i + j;

        this.searchProgressTimer.Stop();

    }
} 
```

（这些函数的命名有点奇怪，因为实际耗时的操作是数据库搜索，但该代码虽然工作正常，但非常长且涉及）。

调试这段代码只是告诉我`SearchButton_Click`事件处理程序正确触发，但代码永远不会跳转到`searchProgressTimer_Tick`事件处理程序。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:43:12.197

你在这里做的有点令人困惑。假设您实际上是在某处初始化计时器-我认为这就是正在发生的事情...

该类`Forms.Timer`完全在表单的消息循环上运行，因此当函数在该线程上运行时它不能触发。因此，尽管您`Start()`是计时器，但该`Click()`函数与计时器在同一线程上运行，因此计时器在该函数返回之前无法触发。但是，在该函数`Stop()`再次返回计时器之前。

也许你想看看`Threading.Timer`。虽然 - 理想情况下，您正在做的“工作” - 无论是数据库操作还是愚蠢的嵌套 for 循环 - 应该发生在不同的线程上，以便 GUI 的消息循环仍然可以处理。

如果您为此创建了一个不同的线程，请不要忘记在主 UI 线程上调用任何 UI 更改或对 UI 元素的更改！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:43:57.313

这是因为您的 GUI 更新发生在与数据库操作相同的线程中。数据库操作应该在不同的线程中完成，并调用 GUI 线程通知它更新。看看这个，因为它很好地解释了它。

[http://www.dotnetperls.com/progressbar](http://www.dotnetperls.com/progressbar)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T18:45:45.930

所以 1) 我在任何地方都没有看到对 InitializerTimer() 的调用。

和 2) System.Windows.Forms.Timer 在 UI 线程上引发其滴答事件..您正在执行耗时操作的同一线程。您需要不时将控制权交给消息泵，以便处理偶数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T18:43:19.110

> 调试此代码只是显示 SearchButton_Click 事件处理程序正确触发，但代码永远不会跳转到 searchProgressTimer_Tick 事件处理程序。

尝试将您的`IntializeTimer()`例程移至表​​单的构造函数，因为看起来您从未为计时器连接滴答事件：

```
public Form1()
{
  InitializeComponent();
  this.searchProgressTimer = new System.Windows.Forms.Timer();
  this.searchProgressTimer.Interval = 250;
  this.searchProgressTimer.Tick += new EventHandler(searchProgressTimer_Tick);
} 
```

# asp.net - 如何处理 asp.net 配置错误

> ID：11476365
> 
> 赞同：0
> 
> 时间：2012-07-13T18:38:10.743
> 
> 标签：asp.net, iis

如果您发布的 ASP.NET 应用程序在 web.config 文件中存在错误，则 ASP.NET 不会为您提供详细的错误消息，因为该应用程序尚未加载。IIS 给出了一个通用的黄色 ASP.NET 错误消息，同样是因为应用程序尚未加载，所以 debug="true" 的东西没有被正确解析。如何告诉 IIS 发送配置错误的详细信息？就目前而言，我找出问题的唯一方法是查看服务器本身的事件日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:43:30.467

> 如何告诉 IIS 发送配置错误的详细信息？

```
 <customErrors defaultRedirect="url" mode="Off">
     <error. . ./>
</customErrors> 
```

[http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)

* * *

**评论后更新**

*请注意，更改此部分`machine.config`将成为服务器上所有 Web 应用程序的新默认设置。要覆盖只需在您的应用程序上提供此部分' `web.config`.*

# eclipse - 使用 javac 编译 OSGI 4.2 应用程序时，编译器看不到泛型信息

> ID：11476366
> 
> 赞同：0
> 
> 时间：2012-07-13T18:38:16.880
> 
> 标签：eclipse, compiler-errors, osgi, javac

> **可能重复：**
> [如何使用 OpenJDK 7 编译 mavenized OSGi 4.3 bundle？](https://stackoverflow.com/questions/10911231/how-to-compile-mavenized-osgi-4-3-bundle-with-openjdk-7)

我不明白发生了什么，但我正在使用的最新 OSGI 库有关于服务定义等的泛型信息。当我针对这个库编写源代码时，我的 IDE 会正确解释泛型信息并让我编写代码。

但是当它去用javac编译代码时，会出现“类型ServiceFactory不带参数”的编译错误。使用 Eclipse 编译器不会出现此错误（但 IDEA 11 中的 Eclipse 编译器似乎不喜欢新的 JDK 7 语言结构，如“new HashMap<>()”，所以我不能真正使用它作为替代）。

当我第一次研究这个问题时，我在某处读到，OSGI 二进制 jar 存在问题，因为类文件是为 JDK 1.4 二进制兼容性而编译的，并且干扰了编译器加载时保留的泛型信息班上。我不记得这是否正确，因为当我去寻找它时，我再也找不到那个网页了。

那么这里有什么问题呢？为什么 javac 看不到 OSGI 4.x 类的泛型信息，所以我可以在 OSGI 应用程序中使用泛型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:09:22.957

我在 Felix 上遇到过这个问题，我认为大多数 osgi 实现都是如此。问题是 Java 7 不再支持编译这些类的编译器标志。标志是-target jsr14。这允许编译器生成与 Java 1.4 兼容的 Java 字节码，但它也支持 JSR14（泛型）的语言特性，这些特性在 Java 1.5 之前是不可用的。OSGi 使用它来支持绑定到 1.4 平台的许多用户。不幸的是，这个编译器标志在 Java 7 版本中消失了。

Felix 的人告诉我，他们即将推出的下一个版本将与 Java 7 的编译器兼容。

以下是一些参考资料：

[http://jcp.org/en/jsr/detail?id=14](http://jcp.org/en/jsr/detail?id=14)

[java编译器的目标版本“jsr14”与JDK7/8](https://stackoverflow.com/questions/4058661/java-compilers-target-version-jsr14-with-jdk7-8)

[http://markmail.org/search/?q=felix+jsr14+compile#query:felix%20jsr14%20compile+page:1+mid:vgkcr37jumvgpudz+state:results](http://markmail.org/search/?q=felix+jsr14+compile#query:felix%20jsr14%20compile+page:1+mid:vgkcr37jumvgpudz+state:results)

# java - Java 可扩展小程序

> ID：11476368
> 
> 赞同：1
> 
> 时间：2012-07-13T18:38:23.880
> 
> 标签：java, plugins, applet, extensible

我需要制作一个可扩展的小程序，该小程序将从服务器下载插件并动态包含在我的小程序中。我设法在没有小程序的情况下在本地执行此操作，但是当我尝试将其移植到小程序时，我偶然发现了一些问题

1.  如何签署我的插件，以便它可以从客户端计算机访问资源？
2.  我在小程序和插件中使用了一些外部库，如何管理这些库，以便小程序和插件都可以看到它们？

**更新**我设法使用以 AppletClassLoader 作为父级的 URLClassLoader 加载罐子，所以现在第 2 点提到的库对插件和小程序可见，剩下的问题是我如何唱我的插件（罐子）以便他们可以访问客户端计算机上的资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:03:47.800

根据这篇文章，我通过扩展 SecurityManagaer 设法完成了我想要的事情： [Signed applet loading signed jar-files using URLClassLoader with security issue](https://stackoverflow.com/questions/7446009/signed-applet-loads-signed-jar-files-using-urlclassloader-with-security-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:23:19.673

Have you considered Java WebStart and jnlp client instead of applet?

For signing you have to use keytool and jarsigner command line utilities in JDK.

The "plugin" concept here not clear to me.

# python - 使用不同的顺序按多个键排序

> ID：11476371
> 
> 赞同：60
> 
> 时间：2012-07-13T18:38:38.597
> 
> 标签：python, python-3.x

> **可能重复：**
> [如何为降序值编写 Python 排序键函数](https://stackoverflow.com/questions/11206884/how-to-write-python-sort-key-functions-for-descending-values)

在 Python 3 中，使用多个键按字典顺序对对象列表进行排序非常容易。例如：

`items.sort(key = lambda obj: obj.firstname, obj.lastname)`

该`reverse`参数允许您指定是升序还是降序。但是，如果您想按多个键排序，但您想对第一个键使用降序排序，而对第二个键使用升序排序，您会怎么做？

例如，假设我们有一个具有两个属性的对象，`points`并且`name`，其中`points`是一个`int`，并且`name`是一个`str`。我们希望按降序对这些对象的列表进行排序`points`（*以便*具有最多点数的对象排在第一位），但是对于具有相同数量的对象`points`，我们希望`name`按字母（*升序*）顺序对这些对象进行排序。

如何做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-13T18:52:39.467

没有内置的方法来处理这个问题。对于一般情况，您必须排序两次：首先按次要排序，然后按主要排序。正如@Mark Ransom 在他的评论中提到的那样，在许多情况下变量是数字的，因此您可以使用负值来翻转排序。

如果您知道要排序的变量的类型以及如何使用它，您还可以编写一个 key 函数，该函数为递增的键返回一个递减的值。有关字符串的示例，请参[见此线程。](http://www.gossamer-threads.com/lists/python/python/539884)（基本上，你取字符的 ASCII 数值的负数。）

在 Python 2 中，您还可以使用`cmp`函数而不是键，但这可能会使排序变慢。它是否会使它变得太慢取决于列表的大小和未排序的大小。在 Python 3 中，该`cmp`参数已经消失，但正如@Mark Ransom 所说，您可以使用`cmp_to_key`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-13T19:47:20.807

```
items.sort(key = lambda obj: (obj.firstname, [(-ord(c) for c in obj.lastname)])) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-13T18:53:59.440

将比较[`functools.cmp_to_key`](http://docs.python.org/library/functools.html#functools.cmp_to_key)函数转换为与排序函数兼容的键。这是为在 Python 2 中使用比较函数并需要转换为不再允许它们的 Python 3 的排序提供的。

[编辑：Python wiki 中的“排序稳定性”和“复杂排序](http://wiki.python.org/moin/HowTo/Sorting/#Sort_Stability_and_Complex_Sorts)”标题下还有一个建议，可以从最不重要的关键到最重要的多遍进行排序。之所以可行，是因为 Python 的排序保证是稳定的，因此在遇到等效键时会保持先前的顺序。

# css - CSS 转换绝对翻译

> ID：11476376
> 
> 赞同：1
> 
> 时间：2012-07-13T18:39:10.087
> 
> 标签：css, css-transforms

我有一堆绝对定位在父容器中的子元素。我想将其中一些移动到相对于其父容器的位置，仅使用 CSS 转换。这可能吗？似乎 CSS translate 只能做绝对距离。

这是一个[设置 jsfiddle](http://jsfiddle.net/r2LXM/4/)。我希望“中心”类通过 CSS 转换使两个内部 div 出现在中心。

使用 CSS 转换的要求是因为这是一个动画转换，我希望硬件加速能够启动，如果使用 left/top 就不会发生这种情况。

我可以使用 HTML 标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:47:26.257

试试这个[http://jsfiddle.net/GrdmL/](http://jsfiddle.net/GrdmL/) 你必须稍微改变一下 css 因为如果你在 #id 选择器的帮助下应用了一些属性，你不能在 .class 选择器的帮助下修改这些属性

希望这将解决您对任何查询发表评论的问题。

# python - 在 Python 中使用 7.0 或 float(7) 的计算强度会降低吗？

> ID：11476379
> 
> 赞同：9
> 
> 时间：2012-07-13T18:39:20.747
> 
> 标签：python, types

我很好奇哪种形式更有效，风格正确等等。我觉得“.0”方法要快得多；我不确定为什么“浮动”方法同样受到赞赏（如果是的话）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T18:42:12.547

使用该`7.0`方法，该`float(7)`方法用于将整数或字符串类型转换为浮点数，因此它是一种不同的用途，例如：

```
a = 7
b = "7"
print float(a)
7.0
print float(b)
7.0 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T18:46:35.673

使用`float(7)`会增加一些不必要的开销——Python 必须在其中找到`float`函数`globals()`并调用它。Using`7.0`在编译时而不是运行时进行所有必要的转换。您可以使用[Python 字节码反汇编](http://docs.python.org/library/dis.html)程序来查看这一点。

```
>>> import dis
>>> def f(): return 7.0
... 
>>> def g(): return float(7)
... 
>>> dis.dis(f)
  1           0 LOAD_CONST               1 (7.0)
              3 RETURN_VALUE        
>>> dis.dis(g)
  1           0 LOAD_GLOBAL              0 (float)
              3 LOAD_CONST               1 (7)
              6 CALL_FUNCTION            1
              9 RETURN_VALUE 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-13T18:49:37.333

The following are all equivalent in Python:

```
>>> 7\. == 7.0 == float(7) == float("7")
True 
```

I would avoid using `float(7)` or `float("7")` when you are hard-coding the value, as the Python interpreter must first cast the value to an integer or a string, and then convert it to floating-point.

To avoid that overhead, use `7.` or `7.0` to give Python a float literal.

Of course, `float()` should still be used to convert other data types to a float.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T18:41:50.863

浮点文字可以写成`7.0`，这很好，因为它们自动属于 类型`float`。

如果您打算将整数或字符串转换为浮点数，则该`float()`函数是合适的，但不需要调用该函数来编写浮点文字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T18:52:52.637

`7.0`应该更快。 `float(7)`创建一个整数，然后调用`float()`函数将整数转换为浮点数，因此调用`float(7)`暗示函数调用开销以及`float()`函数可能执行的任何错误检查。

当然，对于大多数实际目的，速度差异不太重要（除非您处于代码被调用数亿次的深层循环中），但是当解释器具有用于构造浮点数的内置语法。

`float()`当您想要转换的不是浮点数（如字符串或整数）时使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T18:41:10.323

7.0“更好”，不需要演员浮动，它会自动完成。

float() 最好保存用于将非浮点数转换为浮点数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T18:42:29.420

在以后重新阅读代码时，使用`float(0)`更加明确，如果您不小心丢弃了“ `.0`”，以后会减少混乱。

# android - 在 Android 中，当用户单击应用程序 A 的通知时，如何启动应用程序 B 的活动？

> ID：11476381
> 
> 赞同：0
> 
> 时间：2012-07-13T18:39:35.997
> 
> 标签：android, android-intent, android-activity, android-notifications, android-context

我在网上搜索了答案，但我得到的只是单击 A 的通知时如何在应用程序 A 中启动活动。问题是，要启动 B 的活动，我需要 B 的 Context 将其传递给 PendingIntent 以通知 A，但我无法在 A 中获取 B 的 Context。

有没有办法这样做，或者我应该做其他事情来启动应用程序 B，而不是使用 PendingIntent.getActivity() 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:47:15.367

您不需要将 B 的上下文传递给待处理的意图，只需一个指向第二个活动的意图。

如果由于某种奇怪的原因这不起作用（尽管它应该），你可以让你的通知触发 a`BraodcastReceiver`并在那里开始活动，但就像我说的那样，这不应该是必需的。

```
Intent secondActivity = new Intent(context, SecondActivity.class);

PendingIntent notificationIntent = PendingIntent.getActivity(
   context, 
   0, // or you can use some unique id
   secondActivity, 
   PendingIntent.FLAG_UPDATE_CURRENT); 
```

# c# - Json Deserializer 将对象读取到数组

> ID：11476386
> 
> 赞同：2
> 
> 时间：2012-07-13T18:39:48.760
> 
> 标签：c#, json, silverlight, parsing, deserialization

我正在编写一个反序列化器回调方法来解析 C# silverlight 中的一些 Json 响应。

但问题是响应是由一堆对象构造的，而不是数组形式。

具体来说，通常当我们想从 json 中解析某些东西时，如果那是一个对象列表，它在某些 Json 可视化工具中会如下所示：

![json数组](../Images/64735ad1dd784ba2eaf0676ce6df7ac8.png)

我们可以这样做：

```
DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(ObjType[]));
ObjType[] response = (ObjType[])jsonSerializer.ReadObject(stream); 
```

但现在我有了结构如下所示的 Json 文件：

![在此处输入图像描述](../Images/dc76c7c2143d4fa34d039aa13ca6748d.png)

在这种情况下，我认为我不能将其解析为数组，因为对象是单独的而不是数组结构。

Json 文件的示例是：

```
[
   {
      "Name":"Mike",
      "Gender":"male",
   },
   {
      "Name":"Lucy",
      "Gender":"Female ",
   },
   {
      "Name":"Jack",
      "Gender":"Male",
   }
] 
```

所以我想知道是否有任何方法可以将这种 Json 文件解析为已定义对象的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:17:22.993

这对我有用

```
string json = @"[
    {
        ""Name"":""Mike"",
        ""Gender"":""male""
    },
    {
        ""Name"":""Lucy"",
        ""Gender"":""Female ""
    },
    {
        ""Name"":""Jack"",
        ""Gender"":""Male""
    }
]";
MemoryStream stream = new MemoryStream(System.Text.Encoding.UTF8.GetBytes(json));

DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(ObjType[]));
ObjType[] response = (ObjType[])jsonSerializer.ReadObject(stream); 
```

-

```
[DataContract]
public class ObjType
{
    [DataMember]
    public string Name;
    [DataMember]
    public string Gender;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:17:13.173

```
[System.Runtime.Serialization.DataContractAttribute()]
public partial class RootClass
{

    [System.Runtime.Serialization.DataMemberAttribute()]
    public string Name;

    [System.Runtime.Serialization.DataMemberAttribute()]
    public string Gender;
}

    static void Main(string[] args)
    {
       var serializer = new DataContractJsonSerializer(typeof(RootClass[]));
        serializer.ReadObject(/*Input stream w/ JSON*/);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T07:02:19.160

```
public static T JSONDeserialize<T>(string json)
        {
            T obj = default(T);
            using (MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json)))
            {
                obj = Activator.CreateInstance<T>();
                DataContractJsonSerializer serializer = new DataContractJsonSerializer(obj.GetType());
                obj = (T)serializer.ReadObject(ms);
                ms.Close();
            }`enter code here`
            return obj;
        } 
```

# android - 从 ViewPager 中的多个 Fragment 实例访问视图

> ID：11476387
> 
> 赞同：1
> 
> 时间：2012-07-13T18:39:48.950
> 
> 标签：android, android-viewpager, fragment

为此写一个标题很棘手。我目前所做的是重用一个 Fragment 类在 ViewPager 中创建大量 ListFragment。ListFragments 的布局都是相同的，因此只有一个布局和一个 Fragment 作为基础似乎是一个不错的选择。但是，我希望能够访问每个 Fragment 的视图，以便为每个 Fragment 设置一些值，例如标题、名称等。我对此有一个问题，事实上，每当我尝试通过覆盖 Fragment 的 onViewCreated 方法来访问 TextView 时，在我看来，唯一得到更新的 Fragment 是链中的第一个。

现在，我要实例化和连接片段是这样的：

```
private void initPager() {
    mFragments = new Vector<Fragment>();
    int[] listIds = 3;
    for(int i = 0; i < listIds.length; i++) {
        Fragment fragment = new ListsFragment(listIds[i]);
        mFragments.add(fragment);
    }

    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    for(int i = 0; i < mFragments.size(); i++) {
        fragmentTransaction.add(R.id.viewpager, mFragments.get(i));
    }
    fragmentTransaction.commit();

    mPagerAdapter = new ListsPagerAdapter(fragmentManager, mFragments);
    mPager = (ViewPager) super.findViewById(R.id.viewpager);
    mPager.setAdapter(mPagerAdapter);
} 
```

片段 onViewCreated() 代码是这样的：

```
 @Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    TextView textListTitle = (TextView) getActivity().findViewById(R.id.text_list_title);
            String title = "test";
    textListTitle.setText(listTitle);
} 
```

在查看日志时，我发现每个 Fragment 都是单独实例化的，依次经历每个 Fragment 的生命周期。但是，唯一获得“测试”字符串的片段是第一个片段。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:05:03.933

您应该以某种方式实例化您`Fragment`的 s 。`FragmentPagerAdapter`

# c - 设置简单 UDP 服务器时的问题

> ID：11476391
> 
> 赞同：0
> 
> 时间：2012-07-13T18:40:10.953
> 
> 标签：c, sockets

我将在 C 中进行套接字编程，但我有一个问题 - 我敢肯定 - 它来自我的困惑：如何使用*getaddrinfo()*设置服务器，以及如何从客户端获取它的地址？我正在使用UDP。

（我来自[Beej 的教程](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)，但我仍然不明白）

这是我的服务器的代码（我试图在*mhgc.net*和端口 3051 上运行它，虽然我还没有找到设置...主机名的方法？对不起，我很困惑）：

```
int sockd;

/* Get my IP address */
struct addrinfo hints, * servinfo;
memset(&hints, 0, sizeof(hints));
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_DGRAM;
hints.ai_flags = AI_PASSIVE;  // use my own address
if( getaddrinfo(NULL, "3051", &hints, &servinfo) != 0 ) {
    /* Yes, below is not... 'pretty code'; this is just an attempt */
    errorf("Failed to get server address: %s", gai_strerror( getaddrinfo(NULL, "3051", &hints, &servinfo) ));
    exit(EXIT_FAILURE);
    return 1;
}

struct addrinfo * p = NULL;
for(p = servinfo; p != NULL; p = p->ai_next) {
    if( (sockd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1 ) {
        perror("Cannot open socket");
        continue;
    }

    if(bind(sockd, p->ai_addr, p->ai_addrlen) == -1) {
        close(sockd);
        perror("Cannot bind to port");
        continue;
    }

    break;
}

if(p == NULL) {
    error("listener: failed to bind socket");
    exit(EXIT_FAILURE);
    return 0;
}

freeaddrinfo(servinfo);

struct sockaddr_storage clientinfo;
socklen_t clientinfo_len = sizeof(clientinfo);

char buffer[15];
memset(buffer, 0, sizeof(buffer));
if( recvfrom(sockd, buffer, sizeof(buffer), 0, (struct sockaddr *)&clientinfo, &clientinfo_len) == -1 ) {
    perror("Error receiving packet");
    exit(EXIT_FAILURE);
    return 0;
}

char s[INET6_ADDRSTRLEN];
printf("listener: got packet from %s\n", inet_ntop(clientinfo.ss_family, get_in_addr((struct sockaddr *)&clientinfo), s, sizeof(s)));
printf("listener: packet contains \"%s\"\n", buffer);

/* Close the socket descriptor */
close(sockd);

    /* And now, exit, or whatever I need ... ... ... */ 
```

对于我的客户：

```
int sockd;

struct addrinfo hints, * servinfo;
memset(&hints, 0, sizeof(hints));
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_DGRAM;
//hints.ai_flags = AI_CANONNAME;
if( getaddrinfo(MKS_HOSTNAME, "www", &hints, &servinfo) != 0 ) {
    errorf("Failed to get server address: %s", gai_strerror( getaddrinfo(NULL, "3051", &hints, &servinfo) ));
    return 1;
}

struct addrinfo * p = NULL;
for(p = servinfo; p != NULL; p = p->ai_next) {
    if((sockd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1) {
        perror("Cannot open socket");
        continue;
    }

    break;
}

if(p == NULL) {
    error("talker: failed to bind socket");
    return 2;
}

if( sendto(sockd, "this-is-a-test", strlen("this-is-a-test")+1, 0, p->ai_addr, p->ai_addrlen) == -1 ) {
    perror("Error sending packet");
    return 1;
}

freeaddrinfo(servinfo);

close(sockd); 
```

*error*和*errorf*是帮助我调试应用程序的宏。不要担心他们。

另一个提示，如果您允许我的话：Beej 教程中的talker.c 使用主机名来“查找”服务器。我下载了 listener.c 和talker.c，编译了它（make listener && maketalker）但是，我不知道要传递什么作为talker 参数。侦听器的主机名是什么？我怎样才能找到它？再次抱歉。我真的很困惑：S

使用 gcc 编译器 v4.4.5 处理 Debian GNU/Linux “挤压”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:49:29.087

在服务器上，如果您不想收听特定地址，只需传递`any`地址（所有地址元素设置为零）。你`getaddrinfo`为了得到当地地址而打电话永远不会给你一个合理的答案。将`service`参数设置为，`NULL`因为您想知道主机的 IP 地址，而不是服务的名称。

要将客户端连接到服务器，请使用服务器的 IP 地址（在服务器上执行`/sbin/ifconfig`并搜索客户端可访问的地址）或主机名（即`hostname`在服务器上执行并在客户端上使用该名称用于连接服务器）。

# javascript - Highcharts - 保持工具提示在点击时显示

> ID：11476400
> 
> 赞同：8
> 
> 时间：2012-07-13T18:40:38.400
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, highcharts

我有一个 highcharts 图表，我允许用户动态创建自己的标志。现在我希望能够单击标志本身并能够一直显示它的工具提示，直到我再次单击该标志。这样做的原因是允许用户对点赋予特殊含义，当他们将图形保存为图像时，我希望它显示他们留下的工具提示信息。

任何人都知道如何做到这一点或去做这个？我不知道如何访问标志工具提示

```
plotOptions: {
            series: {
                allowPointSelect: true,
                animation: false,
                dataGrouping: {
                    force: true,
                    smoothed: true
                }
            },
            line: {
                allowPointSelect: true,
                animation: false,
                point: {
                    events: {
                        click: function () {
                            var thePoint = this;
                            var previousFlag = findFlag(thePoint);
                            if (previousFlag != null) {
                                previousFlag.remove();
                            } else {
                                createFlagForm(thePoint);
                            }
                        }
                    }
                }
            },
            flags: {
                point: {
                    events: {
                        click: function() { 
                            //How to access the tooltip? this means the flag point itself
                        }
                    }
                },
                tooltip: {
                    useHTML: true,
                    xDateFormat: "%B-%e-%Y %H:%M"
                }
            }
        }, 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-14T18:55:21.533

我刚刚把这个搞定了。当您单击一个点时，它将保留工具提示。它通过克隆工具提示 svg 元素并将其附加到绘图来实现此目的。

这是一个[小提琴](http://jsfiddle.net/larsenmtl/SeCAB/1/)。

```
$(function () {
    cloneToolTip = null;
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function() { 
                            if (cloneToolTip)
                            {
                                chart.container.firstChild.removeChild(cloneToolTip);
                            }
                            cloneToolTip = this.series.chart.tooltip.label.element.cloneNode(true);
                            chart.container.firstChild.appendChild(cloneToolTip);
                        }
                    }
                }
            }
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
});​ 
```

# c# - 在 C# 中使用导航类的最佳方法是什么

> ID：11476405
> 
> 赞同：0
> 
> 时间：2012-07-13T18:40:49.047
> 
> 标签：c#, asp.net, navigationcontroller

我有 2 页 ASP.NET（PageA.aspx 和 PageB.aspx）。每个 Page 可以显示多条记录（约 7000 条）。我没有显示所有 7000 条记录，而是创建了自己的导航类来显示页码。（第 1 页 = 记录 1 到 100；第 2 页 = 记录 101 到 200 等等。）。

当 PageA 加载时，我调用导航类的一个实例（单例）。这样我就不会丢失当前的 Page#。问题是如果我在第 6 页并移动到 PageB.aspx，因为我创建了一个实例，PageB.aspx 从第 6 页开始。我想在 Page_Load 中将当前页面设置为 1，但正如我所见，Page_Load 被称为 evrytime 我的页面发生了一些变化:(

这样做的最佳方法是什么？

这是我的 PageA.aspx 作为示例

```
protected void Page_Load(object sender, EventArgs e)
{
    navigation = NavigationPage.getInstance();
    loadItems();
}

private void loadItems()
{
    ArrayList arItems = soldJobsDAO.GetQuotesToShow();
    loadPageNavigation(arItems.Count);
    // Start Table Headers
    // ...
    // End Table Headers
    int min = navigation.minPage > arItems.Count ? 0 : navigation.minPage;
    int max = navigation.maxPage > arItems.Count ? arItems.Count : navigation.maxPage;
    for (int i = min; i < max; i++)
    {
        SoldJobs job = (SoldJobs)arItems[i];
        // Start Table Rows
        // Start Table Cells
        // End Table Cells
        // End Table Rows
    }
}

private void loadPageNavigation(int maxValue)
{
    PageNavigation.Controls.Clear();
    ArrayList NavDiv = navigation.getNavigationPage(maxValue);
    for(int i = 0; i < NavDiv.Count; i++)
    {
        PageNavigation.Controls.Add((LinkButton)NavDiv[i]);
    }
} 
```

这是导航类

```
namespace HomeSite.Class
{
    public class NavigationPage
    {
        private static NavigationPage navigation;
        private int m_currentPage;
        private int m_minPage;
        private int m_maxPage;
        private const int NB_ITEM_PER_PAGE = 15;

        private NavigationPage()
        {
            currentPage = 1;
        }

        public static NavigationPage getInstance()
        {
            if (navigation == null) 
            {
                navigation = new NavigationPage();
            }
            return navigation;
        }

        public int currentPage
        {
            get
            {
                return m_currentPage;
            }
            set
            {
                m_currentPage = value;
                maxPage = currentPage * NB_ITEM_PER_PAGE;
                minPage = maxPage - NB_ITEM_PER_PAGE;
            }
        }

        public int minPage
        {
            get
            {
                return m_minPage;
            }
            set
            {
                m_minPage = value;
            }
        }

        public int maxPage
        {
            get
            {
                return m_maxPage;
            }
            set
            {
                m_maxPage = value;
            }
        }

        public int getNumberItemPerPages
        {
            get
            {
                return NB_ITEM_PER_PAGE;
            }
        }

        public ArrayList getNavigationPage(int maxValue)
        {
            ArrayList arItems = new ArrayList();
            int maxNbPagesToDisplay = 11;
            int nbPages = 1;
            if (maxValue > 0)
                nbPages = maxValue / getNumberItemPerPages + 1;

            if (nbPages != 1)
            {
                LinkButton link;

                // We want the current page to be centered if possible
                int FirstPageDisplayed = currentPage - (maxNbPagesToDisplay/2);
                if (FirstPageDisplayed < 1)
                    FirstPageDisplayed = 1;
                int LastPageDisplayed = FirstPageDisplayed + maxNbPagesToDisplay - 1;
                if (LastPageDisplayed > nbPages)
                    LastPageDisplayed = nbPages;

                for (int i = (FirstPageDisplayed - 1); i <= (LastPageDisplayed - 1); i++)
                {
                    int PageNumber = i + 1;

                    link = new LinkButton();
                    link.ID = "Page" + PageNumber.ToString();
                    link.Text = PageNumber.ToString();
                    link.CommandArgument = PageNumber.ToString();
                    //link.Command += LinkButton_SetCurrentPage;
                    link.Style.Add("font-size", "14px");
                    arItems.Add(link);
                }
            }
            return arItems;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:54:01.187

您可能会遇到这种方法的其他问题。我能想到的最简单的场景是当您有多个用户同时访问您的页面时。

为了保持这样的状态，您需要：

*   将导航状态存储在 ViewState 中（使用 Session 会导致同一用户的多个页面出现相同的问题）
*   将当前页面放置在隐藏字段中，以便浏览器在每次请求时将其发送回

我会推荐后者，它更接近于网络的无状态形式。

# objective-c - 目标 C：确定 NSString 中是否存在子字符串的最简单方法是什么？

> ID：11476407
> 
> 赞同：1
> 
> 时间：2012-07-13T18:40:52.190
> 
> 标签：objective-c

在 PHP（这是我最熟悉的）中，它是一个单行表达式：

```
strpos('abc', 'b') !== false 
```

Objective C 的等价物是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T18:42:49.450

```
[@"abc" rangeOfString:@"b"].location != NSNotFound 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T18:48:52.680

I think categories can be use to package up pieces of functionality like this very nicely.

```
@interface NSString (ContainsString)
- (BOOL)containsString:(NSString *)string;
@end

@implementation NSString (ContainsString)
- (BOOL)containsString:(NSString *)string
{
    NSRange range = [self rangeOfString:string options:NSCaseInsensitiveSearch];
    return range.location != NSNotFound;
}
@end 
```

When used, it makes the meaning very clear.

```
if ([@"this is a string" containsString:@"a string"]) {
    …
} 
```

In most projects this would be a part of a larger string method category and not it's own one-method category.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:43:21.510

```
- (NSRange)rangeOfString:(NSString *)aString 
```

> 返回值 一个 NSRange 结构，给出第一次出现的 aString 在接收器中的位置和长度。如果 aString 未找到或为空 (@"")，则返回 {NSNotFound, 0}。

[您可以在NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)中找到更多有用的字符串操作函数

# android - Android gridView 动画

> ID：11476409
> 
> 赞同：1
> 
> 时间：2012-07-13T18:41:00.910
> 
> 标签：android, animation, gridview

![在此处输入图像描述](../Images/120ffd52997ee5f2acb148e8082564ed.png)我正在尝试为我的 gridView 中的子元素设置动画。一切都很顺利，但第一行似乎是从背景下方翻译的，而不是在背景顶部翻译/绘制。

用于网格视图的 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="#000000"> 

 <GridView 
    android:id="@+id/gameButton"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:numColumns="4"
    android:layout_centerInParent="true"
    android:gravity="center_horizontal"/> 
```

每个元素上使用的动画

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:shareInterpolator="false">

  <translate
    android:fromYDelta="-25%p"
    android:toYDelta="0%p"
    android:duration="700"
    android:fillAfter="false"
    android:startOffset="50"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator" />

</set> 
```

它不是被绘制在黑色背景上，而是以某种方式低于背景

# c - 大数的加法结果 Gcc（阿贝尔群）

> ID：11476410
> 
> 赞同：0
> 
> 时间：2012-07-13T18:41:04.973
> 
> 标签：c, optimization, assembly, compiler-construction

我正在阅读有关在 C 中检测溢出的技术。此外，显示检测溢出的错误解决方案的示例之一是：

```
/* Determine whether arguments can be added without overflow */
int tadd_ok(int x, int y) {
    int sum = x+y;
    return (sum-x == y) && (sum-y == x);
} 
```

它说它不起作用，因为：

> 二进制补码加法形成一个阿贝尔群，因此无论加法是否溢出，表达式 (x+y)-x 都将计算为 y，并且 (x+y)-y 将始终计算为 x

它到底是什么意思？这是否意味着C编译器替换`sum`为`x+y`？
为了弄清楚它在说什么，我什至跟踪了程序的汇编代码，但没有替换的迹象。

**更新**：我的问题的本质是，GCC 是否评估表达式而不计算它？
这**不是**关于二进制补码的问题。[您可以在此处](http://codepad.org/CyPpj5AZ)
查看示例输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:03:57.477

如果你举一个简单的例子，`4 (0b0100) + 5 (0b0101)`你可以看到无符号和应该`9 (1001)`是实际上`-7`是二进制补码。如果您随后取该总和 (0b1001) 并使用二进制补码算法从中减去 4：

```
 0b1001 - 0b0100 = 0b1001 + 2s_complement(0b0100) = 0b1001 + 0b1100 = 0b1_0101 
```

你最终得到 0101，即 5（你在 2 的补码操作期间丢弃了溢出的最重要的 1）。从总和中减去 5 等于 4：

```
 0b1001 - 0b0101 = 0b1001 + 2s_complement(0b0101) = 0b1001 + 0b1011 = 0b1_0100 
```

这满足您提供的 c 代码，但仍然导致溢出。

来自维基百科关于[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)的文章：

```
二进制补码十进制
0111 7
0110 6
0101 5
0100 4
0011 3
0010 2
0001 1
0000 0
1111 -1
1110 -2
1101 -3
1100 -4
1011 -5
1010 -6
1001 -7
1000 -8

```

**更新：**
为了使用我的 INT_MAX = 7 的普通 4 位整数系统演示您的 INT_MAX 示例，我们可以看到与您的 c 代码相同的结果。

```
 7 + 7 (0b0111 + 0b0111) = 0b1110 (-2 in two's complement) 
```

就像我上面的例子一样，减去，`sum - 7`将等于`7`.

```
 0b1110 - 0b0111 = 0b1110 + 2s_complement(0b0111) = 0b1110 + 0b1001 = 0b1_0111 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:51:30.313

关于您发布的代码，它不适*用于所有平台*，因为某些平台会隐式环绕溢出。该表达式将按以下方式计算：

```
int x    = 0xFFFFFFF0;
int y    = 0x00000020;

int sum  = x + y;   // value of sum is 0x00000010
                    // would be 0x100000010, but highest order bit is dropped

int diff = sum - y; // value of diff is 0xFFFFFFF0
                    // equal to x 
```

域是封闭的，即溢出将以可预测和可逆的方式*环绕*。您不能依赖此方法来检查溢出。

也就是说，这种行为是特定于平台的。一些处理器会这样做，而其他处理器会返回最接近的可表示值（即总和将等于 0xFFFFFFFF），在这种情况下，它将按预期工作。

在 C 中检查溢出的最佳方法是使用内联汇编语句将标志压入堆栈，将它们弹出到寄存器中，然后返回值。如果上一次数学运算发生溢出，则设置其中一个标志。我以前这样做过，但不记得怎么做。有关资源和帮助，请参见以下页面：

[http://en.wikipedia.org/wiki/FLAGS_register_(计算)](http://en.wikipedia.org/wiki/FLAGS_register_(computing))

[从 C 程序中读取标志寄存器](https://stackoverflow.com/questions/6876124/read-flag-register)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:42:58.733

我可能错了，但这在我看来就像一个简单的溢出检查......如果 sum 溢出，sum-x 不能等于 y

更多：参数在堆栈中传递给函数， sum 是一个局部变量，它也在堆栈上。编译器可能会将 sum=0, sum+x 和它们 sum+y（堆栈位置 + 另一个堆栈位置）放入 sum 位置。对于 return 语句，它可能会通过复制 sum 变量将结果放入另一个临时位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:46:36.097

看起来会导致错误结果的错误也会影响后续测试的双方，因此测试永远不会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T18:47:08.250

如果您的编译器（即-02）有优化，那么这个函数可能不起作用。但是，如果没有优化，我相信这会正常工作。

# ios - iOS：在 iPad 上创建 NavigationController 灯箱

> ID：11476414
> 
> 赞同：2
> 
> 时间：2012-07-13T18:41:41.377
> 
> 标签：ios, xcode, ipad, uinavigationcontroller, lightbox

我一直在寻找市场上不同的 iPad 应用程序。例如，Yelp 有以下屏幕：

![Yelp iPad 应用程序](../Images/238bb79d0e2f9133496f76dd738a90cf.png)

基本上，这个灯箱（登录）从底部弹出并“悬停”在`UISplitViewController`背景上。

如何创建这个“灯箱”并为其设置动画。我确信有一种非 hacky 的方法可以做到这一点，只是在我的扩展知识中找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:30:52.957

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:yourViewController];
navController.modalPresentationStyle = UIModalPresentationFormSheet;
[self.navigationController presentModalViewController:navController animated:YES];
navController.view.superview.bounds = CGRectMake(0, 0, 400, 500); 
```

# android - 构建定制的opencv android库

> ID：11476415
> 
> 赞同：2
> 
> 时间：2012-07-13T18:41:44.510
> 
> 标签：android, opencv

我正在关注这个链接来制作定制的 opencv 库以减小它的大小。但正如 Andrey Kamaev 建议的那样，我正在尝试排除不必要的模块，但我找不到这些语句

```
SET(OPENCV_JAVA_MODULES objdetect features2d imgproc video highgui ml core calib3d)
SET(OPENCV_EXTRA_JAVA_MODULES contrib legacy flann) 
```

在我的模块/java 文件夹中的 CMakeLists.txt 文件中。我正在使用 opencv 2.4 版本。请您指导我或任何知道此目的的适当教程/文档的人。

# c# - 访问 Excel 工作簿中的托管代码扩展

> ID：11476419
> 
> 赞同：0
> 
> 时间：2012-07-13T18:41:59.330
> 
> 标签：c#, visual-studio-2010, excel-2007

我正在用 c# 编写一个程序，其中一部分需要使用 excel。我不想直接使用 com 并且更愿意在 Visual Studio 中编写*工作簿*扩展，但我想知道我是否可以从另一个程序访问该扩展并让它完成 excel 工作然后发回数据。是的，我对此很陌生。

**编辑：**也许有一种方法可以在没有 excel 的情况下做到这一点，因为我所需要的只是解析一封 html 电子邮件以获取其表格。如果我能做到这一点，我可能会让它返回一个包含我需要的数据的二维数组。如果有人知道如何在没有 excel 的情况下做到这一点，那也是受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:45:44.797

如果您在机器上安装了 microsoft office，那么可以，您可以从 Visual Studio 的 C# 程序中访问 Excel dll。

不过，编程并不容易。

# javascript - 如何使用 javascript 获取下拉选择值？

> ID：11476420
> 
> 赞同：1
> 
> 时间：2012-07-13T18:41:59.907
> 
> 标签：javascript, jquery, asp.net

我有一个 asp.net DropdownList 控件。当我使用此代码时

```
var id = $("[id*='drpCategory'] option:selected").val(); 
```

id 始终是下拉列表的第一个索引。我怎样才能获得其他选定的值。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:47:43.260

你可以循环遍历`select`元素，请注意单独使用属性选择器太慢，试试这个：

```
$("select[id*='drpCategory']").each(function(){
   alert(this.value)
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:48:16.180

试试这样：

```
var values = $("select[id*='drpCategory']").map(function(){
    return this.value;
}).get(); 
```

您将拥有所有`dropdown`s 的选定值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:45:19.387

```
$("#input_id").click(function(){
 var id = $("#drpCategory option:selected").val();
}) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T18:47:57.063

jquerys`.val()`将返回您的下拉列表的选定值，或者如果下拉列表允许多个选定值的数组。

```
var selectedItems = $('[id*="drpCategory"]').val(); 
```

[文档](http://api.jquery.com/val/)

# java - 围绕 x 轴倾斜 BufferedImage

> ID：11476434
> 
> 赞同：3
> 
> 时间：2012-07-13T18:43:17.207
> 
> 标签：java, image-processing, bufferedimage, jai

**我的项目**：我正在从一个创建地图/地形，`int[]`输出是一个`BufferedImage`.

**问题**：我想`BufferedImage`向后（关于 x 轴）倾斜 25 度。

也就是说，我要转换这个：

```
 _____
|     |
|     |
|     |
 ----- 
```

变成这样的东西

```
 ____
  /    \
 /      \
/        \
---------- 
```

我在看[这个答案](https://stackoverflow.com/a/7012847/1201423)，听起来`PerspectiveTransform`JAI 可能会奏效。

**问题**：如何`PerspectiveTransform`应用到`BufferedImage`？这是向后倾斜图像的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:09:20.903

看看 JHLabs 过滤器：
[http ://www.jhlabs.com/ip/filters/index.html](http://www.jhlabs.com/ip/filters/index.html)

尤其是“透视过滤器”。

编辑：

```
public void perspective() throws Exception{
    BufferedImage srcImage = ImageIO.read(new File("flower.jpg"));
    BufferedImage destImage = null;

    int w = srcImage.getWidth();
    int h = srcImage.getHeight();

    PerspectiveFilter perspectiveFilter = new PerspectiveFilter();
    perspectiveFilter.setCorners(w/4, 0, w-w/4, 0, w, h, 0, h);     
    destImage = perspectiveFilter.filter(srcImage, destImage);

    ImageIO.write(destImage,"jpg",new File("modified_flower.jpg"));
} 
```

此代码将从以下转换图像：
![原始图像](../Images/29ac524a3ceb46f4f568205386021fc5.png)

对此：
![修改后的图像](../Images/b9630ba234f96d9a80e4cb7014e09f92.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T21:16:59.773

我认为您需要Java3d，或者自己计算。基本上，你有一个带有纹理的平面的 3d 旋转。

# objective-c - 使用图像数组的简单动画

> ID：11476438
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:43:24.787
> 
> 标签：objective-c, ios, cocoa-touch

所以这就是我所做的：我用图像视图和圆形矩形按钮填充了笔尖。当按下圆形矩形按钮时，会使用一组图像显示一个简单的动画......我用来执行此操作的代码如下所示：

```
imageview.animationImages = images; 
```

和...

```
[imageview startAnimating]; 
```

接着...

```
[self.view addSubview:imageview]; 
```

但问题是在我添加了子视图之后，超级视图虽然不可见但它仍然存在，所以即使按钮不可见，它仍然可以再次按下以触发动画。如何在动画触发后禁用此按钮。我希望你能理解我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:58:42.710

我假设您使用的是`IBAction`带`sender`参数的。在这个方法的最后做

```
UIButton *temp = (UIButton *) sender
temp.enabled = NO; 
```

# ruby-on-rails-3 - Rails 3 搜索操作重定向显示？

> ID：11476449
> 
> 赞同：0
> 
> 时间：2012-07-13T18:44:32.073
> 
> 标签：ruby-on-rails-3, get, url-routing

我在 Rails 中遇到了一个奇怪的问题。当我尝试在**上传**控制器上使用以下表单提交搜索查询时：

```
<%= form_tag ({:controller => "uploads", :action => 'find_uploads'}), :method => "get" do %>
        <%=h text_field_tag :search, params[:search], :id => 'search_field' %>
        <br />
        <%= submit_tag "Search", :style=>"display:inline;" %>
<% end %> 
```

我被重定向到以下 url 和错误页面：

```
/uploads/find_uploads?utf8=✓&amp;search=bot&commit=Search 
```

> **在 UploadsController#show 中的 ActiveRecord::RecordNotFound**
> 
> 找不到 id=0 的上传

**我的 find_uploads 路线：** `get 'uploads/find_uploads' => "uploads#find_uploads"`

当我这样做时，我耙路线这就是我得到的：

```
uploads_find_uploads GET    /uploads/find_uploads(.:format)    {:controller=>"uploads", :action=>"find_uploads"} 
```

一切似乎都井井有条......不知道为什么它没有按预期工作。出于调试目的，我在 find_uploads 和 show 操作中都放置了断点，但它们都没有到达，所以这个错误消息一定是对我撒谎，因为 UploadsController 显示操作永远不会被调用！

如果此表单有任何作用，它会在我的索引页面上呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:55:15.500

我认为它需要`find_uploads`一个ID。

像这样声明你的路线：

```
resources :uploads do
    collection do
        get :find_uploads
    end
end 
```

ps：目前，当你这样做的时候`rake routes`，`/uploads/find_uploads`是在`/uploads/:id`对吗？

# mysql - 复杂的 SQL 查询。至少对我来说

> ID：11476451
> 
> 赞同：1
> 
> 时间：2012-07-13T18:44:38.857
> 
> 标签：mysql, sql

我正在尝试根据 PatientID 从我的数据库中提取发票数据。我试图找出哪些发票属于哪个患者。这是我的结构的重要部分。

发票表

```
InvoiceNumber | DateInvoice | DueDate | StudyID | TypeInvoice 
```

患者表

```
FirstName | LastName | PatientID 
```

发票字段

```
id | InvoiceNumber | PatientID | 
```

我需要进行一个查询，根据 PatientID 列出发票表数据。下面是我尝试的查询，但没有找到。感谢您的时间。

```
SELECT    Distinct
          invoicefields.InvoiceNumber,
          invoices.DateInvoice
FROM      `invoices`, `patients`, `invoicefields`
WHERE     invoicefields.PatientID = patients.PatientID
          and invoicefields.InvoiceNumber = invoicefields.InvoiceNumber
GROUP BY  invoicefields.InvoiceNumber 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:55:51.133

```
SELECT InvT.InvoiceNumber, InvT.DateInvoice
FROM InvoiceTable InvT
INNER JOIN InvoiceFields InvF ON InvF.InvoiceNumber = InvT.InvoiceNumber AND InvF.PatientID = @PatientID 
```

非常多，因为您只需要 InvoiceTable 中的数据，并且表明您拥有 PatientID。我建议您只需加入交叉引用表 InvoiceFields 并使用该查询中的 PatientID 列将其过滤到您需要的内容。在我意识到您不需要来自患者的任何东西之前，我有一个使用存在的更复杂的示例。

如果您还需要有关患者的信息，您可以使用它（只需将所需的列放在选择中）

```
SELECT InvT.InvoiceNumber, InvT.DateInvoice
FROM InvoiceTable InvT
INNER JOIN InvoiceFields InvF ON InvF.InvoiceNumber = InvT.InvoiceNumber AND InvF.PatientID = @PatientID
INNER JOIN Patient Pat ON Pat.PatientID = InvF.PatientID 
```

您可以将 @PatientID 部分放在 Patient 或 InvoiceFields 的连接上。如果您的索引是正确的，那么这两种方式之间真的不应该有性能差异。

对以下评论的回应，但我可以在哪里更清晰地展示它：

```
SELECT  IT.InvoiceNumber
       ,IT.DateInvoice
FROM    InvoiceTable InvT
WHERE   EXISTS (SELECT  InvF.PatientID
                FROM    InvoiceFields InvF
                WHERE   InvF.InvoiceNumber = InvT.InvoiceNumber
                AND InvF.PatientID = @PatientID) 
```

这将从 InvoiceTable 返回患者的所有行，如果 InvoiceNumber 是唯一的，则不会有任何重复。虽然这种方式您只能访问 InvoiceTable 以从中返回数据。如果您只想要一个在其上放置 TOP 1：

```
SELECT  TOP 1 IT.InvoiceNumber
       ,IT.DateInvoice
FROM    InvoiceTable InvT
WHERE   EXISTS (SELECT  InvF.PatientID
                FROM    InvoiceFields InvF
                WHERE   InvF.InvoiceNumber = InvT.InvoiceNumber
                AND InvF.PatientID = @PatientID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:50:44.177

```
SELECT * from invoices i
inner join invoicefields iFld
    on i.invoiceNumber = iFld.invoiceNumber
inner join patients p
    on iFld.patientID = p.patientID
    and p.patientID = 1235125 
```

这至少应该让你朝着正确的方向开始。我不确定您要返回哪些列和/或表中是否有任何空值。Null 将影响返回哪些行

# pyqt - 信号和插槽 PyQt

> ID：11476452
> 
> 赞同：0
> 
> 时间：2012-07-13T18:44:39.153
> 
> 标签：pyqt, signals-slots

我遇到了一些在 PyQt 中连接信号和插槽的新方法。请查看此链接。[如何捕获 Python 解释器的输出并在 Text 小部件中显示？](https://stackoverflow.com/questions/8356336/how-to-capture-output-of-pythons-interpreter-and-show-in-a-text-widget). 这里的 textWritten(signal)=self.normalOutputWritten(function) 是直接连接的。这是工作。有人可以详细说明这种新的连接方式。

重新表述问题： [如何捕获 Python 解释器的输出并在 Text 小部件中显示？](https://stackoverflow.com/questions/8356336/how-to-capture-output-of-pythons-interpreter-and-show-in-a-text-widget). 在上面的链接中，testWritten 被定义为 pyqtSignal 和 self.normalOutput 是槽函数。通常，我们使用旧样式或新样式进行连接，但在这里它们只使用了“=”符号。这是工作。请解释一下这种新方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:49:37.447

当您创建一些 PyQt 对象时，您可以设置属性并将使用关键字参数的信号连接到`__init__()`，例如：

```
button = QtGui.QPushButton(clicked=on_click, text='My button', checkable=True) 
```

有关更多信息，请参阅：

[PyQt 对 Qt 属性的支持](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qt_properties.html)

[经常被忽视（和实用）的 PyQt4 功能](http://blog.odnous.net/2011/06/frequently-overlooked-and-practical.html)

# java - Swing - 在 mouseReleased 下获取新组件

> ID：11476454
> 
> 赞同：2
> 
> 时间：2012-07-13T18:44:47.540
> 
> 标签：java, swing

这个问题可能掩盖了缺乏 Swing 知识的基础，但我似乎无法确定我做错了什么。本质上，我想在一个组件中检测 mousePressed，然后在鼠标释放时接收鼠标下的任何组件的 mouseReleased，而不是原始组件。

```
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.event.MouseInputAdapter;
import net.miginfocom.swing.MigLayout;

public class TestMouseListener extends MouseInputAdapter {

    public void mouseEntered(MouseEvent arg0) {System.out.println("Entered " + arg0.getComponent());}
    public void mouseExited(MouseEvent arg0) {System.out.println("Exited " + arg0.getComponent());}
    public void mousePressed(MouseEvent arg0) {System.out.println("Pressed " + arg0.getComponent());}
    public void mouseReleased(MouseEvent arg0) {System.out.println("Released " + arg0.getComponent());}

    public static void main(String[] args){
        JFrame frame = new JFrame();
        frame.setLayout(new MigLayout());
        frame.setSize(400, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TestPanel panel1 = new TestPanel("Panel 1");
        TestPanel panel2 = new TestPanel("Panel 2");
        panel1.add(new JLabel("Text1"));
        panel2.add(new JLabel("Text2"));
        frame.add(panel1);
        frame.add(panel2);
        TestMouseListener listener = new TestMouseListener();
        panel1.addMouseListener(listener);
        panel1.addMouseMotionListener(listener);
        panel2.addMouseListener(listener);
        panel2.addMouseMotionListener(listener);
        frame.setVisible(true);
    }
}
class TestPanel extends JPanel {
    String name;
    TestPanel(String name){ this.name = name; }
    public String toString(){ return name; }
} 
```

因此，当我将鼠标悬停在面板 1 上时，单击，拖动到面板 2，释放，我得到以下信息：

```
Entered Panel 1
Pressed Panel 1
Exited Panel 1
Entered Panel 2
Released Panel 1 
```

如何获得我释放的面板？我希望 mouseReleased 事件会为 Panel 2 触发，但显然不会。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:48:16.267

存储一个包含您最近输入的组件的变量。每次触发`MouseEntered`事件时都要覆盖它。然后有一个方法，这样当您释放鼠标按钮时，您可以使用您最近输入的任何组件。

```
Component lastEntered;

private void MouseEntered(MouseEvent e) {
    lastEntered = e.getComponent;
} 
```

# ios - 使用 Datakit 制作后端解决方案？

> ID：11476455
> 
> 赞同：0
> 
> 时间：2012-07-13T18:44:58.303
> 
> 标签：ios, web-services, backend, custom-backend

我想用 iOS 的 datakit 运行我自己的服务，作为解析的替代方法，有一些很好的教程如何设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:13:14.073

在 github 存储库上有设置服务器所需的一切。您可以在 localhost、heroku 或 ec2（带有 bitnami node.js 图像）和 mongohq 上免费试用。如果您正在寻找该框架的使用示例，请从[ParseKit](https://github.com/OneMoreThing/ParseKit)开始。

# php - 多个 SQL 语句导致错误，通过 PHP

> ID：11476461
> 
> 赞同：1
> 
> 时间：2012-07-13T18:45:19.950
> 
> 标签：php, mysql, sql

我正在尝试制作一个 php 日历，作为项目的一部分，在这里我正在使用 php 执行一些 SQL：

```
mysql_select_db("waycov_dtm", $con);

$data="'Placeholder Text'";

$sql="INSERT INTO waycov_dtm.calDates (dateID, day, month, year)
VALUES (" . $dateID . ", " . $day . ", " . $month . ", " . $year . ");
INSERT INTO waycov_dtm.calData (dateID, data, memberID)
VALUES (" . $dateID . ", " . $data . ", 1);";

echo $sql;

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con); 
```

当它执行时，我得到以下信息（回显的 sql，然后是错误）：

```
INSERT INTO waycov_dtm.calDates (dateID, day, month, year) VALUES (7072012, 7, 07, 2012); INSERT INTO waycov_dtm.calData (dateID, data, memberID) VALUES (7072012, 'Placeholder Text', 1);Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO waycov_dtm.calData (dateID, data, memberID) VALUES (7072012, 'Placeh' at line 3 
```

如果我取出任何一个插入语句，另一个运行，但两者一起导致这个？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:48:43.027

Use it like this:

```
$sql="INSERT INTO waycov_dtm.calDates (dateID, day, month, year)
VALUES (" . $dateID . ", " . $day . ", " . $month . ", " . $year . ")";
$sql_second = "INSERT INTO waycov_dtm.calData (dateID, data, memberID)
VALUES (" . $dateID . ", " . $data . ", 1);";

if (!mysql_query($sql,$con) || !mysql_query($sql_second,$con))
{
  die('Error: ' . mysql_error());
} 
```

From the manual:

> mysql_query() sends a unique query (multiple queries are not supported)

The use of `mysql_query` is discouraged. Use MySQLi or PDO.

# scala - 返回具有可变数量元素的元组

> ID：11476462
> 
> 赞同：5
> 
> 时间：2012-07-13T18:45:27.907
> 
> 标签：scala, tuples

我正在尝试在 Scala 中编写百分位实用程序。我正在考虑编写一个用可变数量的`Int`参数初始化的类。例如，用`Percentile`初始化的类`50,95`意味着它可以计算第 50 个百分位和第 95 个百分位。该类大致如下所示：

```
class PercentileUtil(num: Int*) {
    def collect(value: Int) {
        // Adds to a list
    }

    def compute = {
        // Returns the 50th and 95th percentiles as a tuple
    }
} 
```

我应该如何定义函数计算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:29:48.783

如果它必须是一个元组，你可以将返回值声明为一个产品。

```
def compute: Product = if(...) (1,2) else ("1", "2", "3")

compute match {
    case (a: Int, b: Int) => 
    case (a: String, b: String, c: String) => 
}

compute.productIterator.foreach(println) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:16:35.677

如果我是你，我会返回一张地图：

```
class PercentileUtil(percentiles: Int*) {
  private def nthPercentile[T](n: Int, xs: Seq[T]): Seq[T] = ...
  def compute[T](xs: Seq[T]) = percentiles.map(p => p -> nthPercentile(p, xs)).toMap
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T19:37:36.293

您可以考虑使用来自 Miles Sabin 的[Shapeless](https://github.com/milessabin/shapeless/#heterogenous-lists)库的[HLists 。](https://github.com/milessabin/shapeless)它们还支持[与元组之间的](https://github.com/milessabin/shapeless/#facilities-for-abstracting-over-arity)转换。

# objective-c - 使用 NSPredicate 检测 NOT CONTAINS

> ID：11476466
> 
> 赞同：5
> 
> 时间：2012-07-13T18:45:42.773
> 
> 标签：objective-c, ios, cocoa-touch

我放弃。我已经尝试了所有我能想象到的组合来检查一个字符串是否包含另一个字符串。这是一个直观的语法示例，描述了我想要做什么：

```
 NSPredicate* pPredicate = [NSPredicate predicateWithFormat:@"NOT (%K CONTAINS[c] %@)",
NSMetadataItemFSNameKey, 
[NSString stringWithFormat:@"Some String"]]; 
```

不管我如何改变 NOT，使用 ! 运算符，而是移动括号或完全删除它们，我总是在解析这个表达式时遇到异常。

这个表达有什么问题？

编辑：当我打电话时发生异常

```
[pMetadataQuery setPredicate:pPredicate]; 
```

例外是：***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“NSMetadataQuery 的 NSComparisonPredicate 类型未知（kMDItemFSName CONTAINS[c]“Some String”）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T19:06:05.497

我在以下方面取得了圆满成功：

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"NOT (%K CONTAINS[c] %@)",
        @"someKey",
        [NSString stringWithFormat:@"Some String"]];
NSArray *testArray =
    [NSArray arrayWithObjects:
        [NSDictionary dictionaryWithObject:@"This sure is Some String" forKey:@"someKey"],
        [NSDictionary dictionaryWithObject:@"I've nothing to say" forKey:@"someKey"],
        [NSDictionary dictionaryWithObject:@"I don't even have that key" forKey:@"someOtherKey"],
        nil];

NSArray *filteredArray = [testArray filteredArrayUsingPredicate:predicate];
NSLog(@"found %@", filteredArray); 
```

`testArray`这三个中的后两个对象`filteredArray`在 OS X v10.7 和 iOS v4.3 下以 . 所以问题不在于谓词——从技术上讲，这是对问题的完整答案——它是`NSMetadataQuery`. 遗憾的是我在这方面没有经验，但这肯定是接下来要研究的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-16T08:54:16.703

**斯威夫特 3.0**

```
let predicate = NSPredicate(format: "NOT (%K CONTAINS[c] %@)", "someKey", "Some String")
let testArray: [Any] = [[ "someKey" : "This sure is Some String" ], [ "someKey" : "I've nothing to say" ], [ "someOtherKey" : "I don't even have that key" ]]
let filteredArray: [Any] = testArray.filter { predicate.evaluate(with: $0) }
print("found \(filteredArray)") 
```

# sql - Count 查询中的 SQL getdate() 无法正常工作

> ID：11476470
> 
> 赞同：0
> 
> 时间：2012-07-13T18:45:50.840
> 
> 标签：sql, sql-server

我正在尝试针对 SQL Server 2008 执行此查询：

```
SELECT Count(*) FROM tblSharesSentRequests WHERE [SentDate] = getdate() 
```

这将返回 0 行，即使我有 1 行的 SentDate 设置为“2012-7-13”

此 SQL 语句工作正常：

```
SELECT Count(*) FROM tblSharesSentRequests WHERE [SentDate] = '2012-7-13' 
```

它返回 1 行。

为什么当我使用 getdate() 时它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:50:32.433

如果 SQL Server 2008：

```
WHERE SentDate >= CONVERT(DATE, GETDATE())
  AND SentDate <  DATEADD(DAY, 1, CONVERT(DATE, GETDATE()); 
```

（或者如果它是一个`DATE`列）

```
WHERE SentDate = CONVERT(DATE, GETDATE()); 
```

如果 < SQL Server 2008：

```
WHERE SentDate >= DATEDIFF(DAY, 0, GETDATE())
  AND SentDate <  DATEDIFF(DAY, -1, GETDATE()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:47:16.240

我希望`SentDate`是一个`datetime`类型变量，是吗？

如果是这样，请尝试从日期时间中删除时间：

`SELECT DATEADD(d, DATEDIFF(d, 0, GetDate()), 0)`

所以你的查询变成：

`SELECT Count(*) FROM tblSharesSentRequests WHERE [SentDate] = DATEADD(d, DATEDIFF(d, 0, getdate()), 0)`

如果您使用的是 2008，则可以按照评论所述进行操作：`CAST(GetDate() as date)`.

一种更简单的表达方式是：

```
SELECT Count(*)
FROM tblSharesSentRequests
WHERE [SentDate] = cast(getdate() as date) 
```

类型最终只是 a`Date`而不是 a `datetime`。答案是使用以下内容：

`WHERE SentDate = CONVERT(Date, GetDate())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:49:27.773

Try this:

```
SELECT Count(*) 
  FROM tblSharesSentRequests 
 WHERE [SentDate] = CAST(FLOOR(CAST(GETDATE() AS FLOAT)) AS DATETIME) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T18:53:24.550

SQL 函数 GETDATE() 返回日期和时间。您正在将它与我猜只有日期的字段进行比较。您将需要执行以下操作：

```
SELECT Count(*) 
  FROM tblSharesSentRequests 
 WHERE [SentDate] = CAST(GETDATE() AS date) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-13T18:54:23.020

getdate() 不仅给出它提供小时分钟等的日期。因此你得到了 0 值，因为你没有完全匹配。最好的方法是 SELECT Count(*) FROM tblSharesSentRequests WHERE [SentDate] = cast(getdate() as date)

# javascript - 如何计算对说明或接受标准字段的更改次数

> ID：11476471
> 
> 赞同：1
> 
> 时间：2012-07-13T18:45:57.513
> 
> 标签：javascript, rally

对于 Rally 项目中的每个故事，我希望能够计算在修订历史中对“描述”或“接受标准”字段进行更改的次数。我们正在尝试对我们项目中的需求流失量进行定量估计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:31:42.990

这是一位同事编写的一个简单示例 - 它解析修订历史集合，匹配“DESCRIPTION changed”并将结果添加到表中以供显示。它应该很容易以显示计数而不是修订摘要的方式进行修改，并且也可以与您的接受标准字段匹配。您可能还想添加 IterationDropdown 和其他细节。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <!-- Copyright (c) 2012  Rally Software Development Corp.  All rights reserved -->
    <html>
    <head>
        <title>Revision History Example</title>
        <meta name="Name"    content="App Example: Revision History" />
        <meta name="Version" content="2012.2" />
        <meta name="Vendor"  content="Rally Labs" />
        <script type="text/javascript" src="https://rally1.rallydev.com/apps/1.30/sdk.js?showHeader=false"></script>
        <script type="text/javascript">

            function revHistoryExample() {
                var rallyDataSource = new rally.sdk.data.RallyDataSource(
                                            '__WORKSPACE_OID__',
                                            '__PROJECT_OID__',
                                            '__PROJECT_SCOPING_UP__',
                                            '__PROJECT_SCOPING_DOWN__');
                function itemQuery() {
                    var queryObject = {
                        key: 'stories',
                        type: 'HierarchicalRequirement',
                        fetch: 'Name,ObjectID,FormattedID,RevisionHistory,Revisions,RevisionDescription,CreationDate,LastUpdateDate,Iteration'
                        query: '(Iteration.Name = "My Iteration")',
                    };
                    rallyDataSource.findAll(queryObject, populateTable);
                }

                function populateTable(results) {
                    var tableDiv = document.getElementById('aDiv');

                var config = { columns:
                            [{key: 'FormattedIDLink', header: 'Formatted ID', width: 100},
                             {key: 'Name'},
                             {key: 'RevisionDescription', header: 'Revision Description'},
                             {key: 'CreationDate', header: 'Creation Date'}] };

                var table = new rally.sdk.ui.Table(config);

                // Revision condition to match/look for within Revision history
                var revCondition = "DESCRIPTION changed";

                for ( i=0 ; i<results.stories.length ; i++ ) { 
                    for ( j=0 ; j<results.stories[i].RevisionHistory.Revisions.length ; j++ ) {

                        myStory = results.stories[i];
                        myRevision = myStory.RevisionHistory.Revisions[j];

                        if (myRevision.Description.indexOf(revCondition)>=0){

                            myFormattedID = myStory.FormattedID; 
                            myDescription = myRevision.Description;

                            myCreationDate = myStory.CreationDate;
                            myFormattedIDLink = new rally.sdk.ui.basic.Link(
                                {item: myStory, text: results.stories[i].FormattedID}
                            )

                            // Clobber fields on Story with info from the matching Revision for easy inclusion in table

                            results.stories[i].CreationDate = myCreationDate;
                            results.stories[i].RevisionDescription = myDescription;
                            results.stories[i].FormattedIDLink = new rally.sdk.ui.basic.Link({item:results.stories[i], text: results.stories[i].FormattedID});
                            table.addRow(results.stories[i]);

                        }
                    }
                }

                    table.display(tableDiv);

                };
                itemQuery();
            }

            rally.addOnLoad(revHistoryExample);
        </script>
    </head>
    <body>
       <div id="aDiv"></div>
    </body>
    </html> 
```

# sql - 创建具有动态列的表

> ID：11476473
> 
> 赞同：3
> 
> 时间：2012-07-13T18:46:02.810
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1, crosstab

我正在使用 PostgreSQL 9.1，我有以下表格：

```
element(element_id int, name varchar, category_id int)

category(category_id int, name varchar)

characteristic(characteristic_id int, name varchar, unit varchar)

category_characteristic(characteristic_id, category_id)

element_characteristic(element_id, characteristic_id, value) 
```

想象以下表格：

```
elements
 ---------------------
|id|name    |category |
-----------------------
|1 |'item 1'|1        |
|2 |'item 2'|2        |
|3 |'item 3'|1        |
 ---------------------

category
 ----------------
|id|name         |
|----------------|
|1 | 'category 1'|
|2 | 'category 2'|
 ----------------

characteristic
 --------------------------------
|id|name               |unit     |
 --------------------------------
|1 |'characteristic 1' | 'unit 1'| 
|2 |'characteristic 2' | 'unit 2'|
|3 |'characteristic 3' | 'unit 3'|
|4 |'characteristic 4' | 'unit 4'|
|5 |'characteristic 5' | 'unit 5'|
|6 |'characteristic 6' | 'unit 6'|
 --------------------------------

category_characteristic
 ------------------------------
|category_id|characteristic_id |
|------------------------------
|1          |1                 |
|1          |2                 |   
|1          |4                 |
|1          |5                 |
|2          |1                 |
|2          |3                 |
|2          |5                 |
 ------------------------------

element_characteristic
 ---------------------------------------
|id_element|id_characteristic|value     |
|---------------------------------------|
|1         |1                |'value a' |
|1         |2                |'value b' |
|1         |4                |'value c' |
|1         |5                |'value d' |
|2         |1                |'value e' |
|2         |3                |'value f' |
|2         |5                |'value g' |
|3         |1                |'value h' |
|3         |2                |'value i' |
|3         |4                |'value j' |
|3         |5                |'value k' |
 --------------------------------------- 
```

现在我想获得以下表格：

```
 category 1
 ---------------------------------------------------------------------------
|name   |characteristic 1|characteristic 2|characteristic 4|characteristic 5|
| --------------------------------------------------------------------------|
|item 1 |value a         |value b         |value c         |value d         |
|item 3 |value h         |value i         |value j         |value k         |
 ---------------------------------------------------------------------------

category 2
 -----------------------------------------------------------
|name   |characteristic 1|characteristic 3|characteristic 5|
| ----------------------------------------------------------
|item 2 |value e         |value f         |value g         |
 ---------------------------------------------------------- 
```

我试图了解什么是最好的程序。我已经阅读了 tablefunc 文档，但我只是无法弄清楚如何动态地制作该过程，因为类别表上会有 N 个条目。某些方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:05:12.237

解决方案：

```
SELECT *
FROM   crosstab (
        'SELECT e.name, c.name, ec.value
         FROM   elements e
         JOIN   element_characteristic ec ON ec.id_element = e.id
         JOIN   characteristic c ON c.id = ec.id_characteristic
         ORDER  BY 1, 2',

        'SELECT DISTINCT name
         FROM   characteristic
         ORDER  BY 1')
AS tbl (
  name text
 ,characteristic_1 text
 ,characteristic_2 text
 ,characteristic_3 text
 ,characteristic_4 text
 ,characteristic_5 text
 ,characteristic_6 text
 ); 
```

测试设置：

```
CREATE TEMP TABLE elements(id int, name text, category int);
INSERT INTO elements VALUES
 (1, 'item 1', 1)
,(2, 'item 2', 2)
,(3, 'item 3', 1);

CREATE TEMP TABLE element_characteristic(id_element int
                                        ,id_characteristic int, value text);
INSERT INTO element_characteristic VALUES
 (1,1,'value a')
,(1,2,'value b')
,(1,4,'value c')
,(1,5,'value d')
,(2,1,'value e')
,(2,3,'value f')
,(2,5,'value g')
,(3,1,'value h')
,(3,2,'value i')
,(3,4,'value j')
,(3,5,'value k');

CREATE TEMP TABLE characteristic (id int, name text, unit text);
INSERT INTO characteristic VALUES
 (1,'characteristic 1', 'unit 1')
,(2,'characteristic 2', 'unit 2')
,(3,'characteristic 3', 'unit 3')
,(4,'characteristic 4', 'unit 4')
,(5,'characteristic 5', 'unit 5')
,(6,'characteristic 6', 'unit 6'); 
```

结果：

```
 name | characteristic 1 | characteristic_2 | characteristic_3 | characteristic_4 | characteristic_5 | characteristic_6
-------|------------------|------------------|------------------|------------------|------------------|----------------
item 1 | value a          | value b          | <NULL>           | value c          | value d          | <NULL>
item 2 | value e          | <NULL>           | value f          | <NULL>           | value g          | <NULL>
item 3 | value h          | value i          | <NULL>           | value j          | value k          | <NULL> 
```

您的问题的解决方案是使用带有**两个参数**`crosstab()`的变体。

 **查询输出*所有项目*。将子句添加`WHERE`到第一个查询以过滤类别。

第二个参数（另一个查询字符串）生成输出列的列表，以便`NULL`正确分配数据查询（第一个参数）中的值。

检查[tablefunc 扩展](http://www.postgresql.org/docs/current/interactive/tablefunc.html)的手册，特别是`crosstab(text, text)`：

我已经发布了一些关于`crosstab()`tablefunc 模块功能的答案。[此搜索](https://stackoverflow.com/search?q=user:939860%20%2bcrosstab&submit=search)将为您提供更多示例和解释。**

# plone - 在plone中作为PDF插件发送不起作用

> ID：11476474
> 
> 赞同：1
> 
> 时间：2012-07-13T18:46:05.910
> 
> 标签：plone

我是 plone 的新手，我试图让发送作为 PDF 添加工作。我已经添加了：

*   比萨
*   pyPDF
*   html5lib
*   报告实验室

到构建文件并已将`collective.sendaspdf`发送配置为 PDF 插件。每当我尝试单击“以 PDF 格式发送”选项时，它什么都不做。帮助将不胜感激。

错误日志中的回溯有以下信息：

```
Exception Value
    'ascii' codec can't decode byte 0xe2 in position 8192: ordinal not in range(128)

Traceback (innermost last):

    Module ZPublisher.Publish, line 126, in publish
    Module ZPublisher.mapply, line 77, in mapply
    Module ZPublisher.Publish, line 46, in call_object
    Module jquery.pyproxy.plone, line 66, in _jquery
    Module collective.sendaspdf.browser.ajax, line 56, in show_send_form
    Module collective.sendaspdf.browser.ajax, line 44, in _show_send_form
    Module collective.sendaspdf.browser.base, line 237, in make_pdf
    Module collective.sendaspdf.browser.base, line 223, in generate_pdf_file
    Module collective.sendaspdf.transforms.pisa, line 16, in html_to_pdf

UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 8192: ordinal not in range(128) 
```

当我在修改 buildout.cfg 文件后尝试使用 bin/buildout 通过 build out 安装 wkhtmltopdf 时，出现以下错误：

同时：
安装。
错误：缺少选项：buildout:parts
***** ** *** ******精选版本******* *** ** *** ***
[版本]***

 ********* *** *******/挑选的版本******* *** ** **********

 *****我已经完成了这个链接中所说的一切：[https ://github.com/vincent-psarga/collective.sendaspdf](https://github.com/vincent-psarga/collective.sendaspdf)

我在我的构建文件（buildout.cfg）中进行了以下更改：

```
parts =
    instance
    zopepy
    zopeskel
    unifiedinstaller
    repozo
    backup
    chown
    wkhtmltopdf
    wkhtmltopdf_executable   

environment-vars =
    zope_i18n_compile_mo_files true
    PYTHON_EGG_CACHE ${buildout:directory}/var/.python-eggs
    WKHTMLTOPDF_PATH ${buildout:directory}/wkhtmltopdf 

[wkhtmltopdf]
recipe = hexagonit.recipe.download
url = http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.9.9-static-amd64.tar.bz2

[wkhtmltopdf_executable]
recipe = collective.recipe.cmd
on_install = true
on_update = true
cmds =
     cd ${buildout:directory}/parts/wkhtmltopdf
     mv wkhtmltopdf-amd64 wkhtmltopdf
     chmod +x wkhtmltopdf 
```

你能告诉我我做错了什么吗？帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:14:02.753

我是 Send as PDF 的主要开发者。一个简单的问题：你真的需要使用 Pisa/report lab 吗？

我在工具开发之初就添加了它，但很快就会放弃对这个 PDF 生成器的支持（wkhtmltopdf 就像一个魅力，维护这两种支持有点困难）。如果您查看产品的 README，有安装 WKHtmlToPDF 的说明：[https ://github.com/vincent-psarga/collective.sendaspdf](https://github.com/vincent-psarga/collective.sendaspdf)

我强烈建议你使用这个工具，它的选择比你使用 Pisa 的要多。如果您真的需要 Pisa/reportlab，无论如何我都会看看这个问题；）

干杯，文森特

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T06:39:14.037

查看源代码，我认为您在这里遇到了错误。

该代码期望输入的 HTML 是一个 unicode 字符串，但您的情况并非如此，并且将其重新编码为 ASCII 会失败。

您需要[在 GitHub 上的collective.sendaspdf 问题跟踪器](https://github.com/vincent-psarga/collective.sendaspdf/issues)中提交包含您的回溯的错误报告。********

# ado.net - ADO.NET INSERT 表中具有外键的新记录

> ID：11476476
> 
> 赞同：0
> 
> 时间：2012-07-13T18:46:10.023
> 
> 标签：ado.net, insert, foreign-keys

我对 ADO.NET 相当陌生。我对所有基本的 INSERT 等都很好。但是现在，我在将记录插入包含外键的表中时遇到了问题。我已经做了一些研究，但仍然卡住了......所以这里是：

我想在名为 Professionals 的表中插入一条新记录。它有一个映射到不同表的外键。FK 是 WAPublicUserID。

见图片：

![在此处输入图像描述](../Images/1d9771813901c1382195ec77d948ce23.png)

当我创建数据模型时，WAPublicUserID 未列在 Professional 数据模型的属性中。

见图片：

![在此处输入图像描述](../Images/b3a62120c3a42f552809a43a7a3bd0bc.png)

因此，当我尝试在我的代码中创建 INSERT 时，找不到 WAPublicUserID 字段，也无法插入记录。我希望使用的 WAPublicUserID 已经存在于 FK 映射到的 WAPublicUser 表中。

见图片：

![在此处输入图像描述](../Images/9686e44f64848ee43e667aeeb773b751.png)

**如何在包含 WAPublicUser 表中现有记录的外键的 Professionals 表中插入新记录？谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:48:46.560

Someone has set "Include Foreign Key Properties in Model" to false.

Hence you have the navigation property of WAPublicUser but not the ForeignKey property.

This means you will have to Attach the relevant WAPublicUser object to the WAPublicUser property on the object you are trying to save.

I'd need a lot more code to know exactly what you are doing, but the basics of it are as follows:

If the WAPublicUser already exists:

*   Grab the existing entity from the database - OldEntity.

*   Update the OldEntity with the properties of the new one you are currently trying to save.

*   Save the (now updated) Old entity back to the database - because you have just read it, it should have the WAPublicUser reference already set.

If it doesn't:

*   Create a new WAPublicUser

*   Set the WAPublicuser property of the Professional object to the newly created WAPublicUser - that line goes where your code stops above.

*   myEnt.AddToProfessionals(pro);

*   myEnt.SaveChanges();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:34:21.127

知道了。以下是它的工作原理，以防其他人阅读。#1 和#2 是焦点。

非常感谢@BonyT 让我走上了正确的道路......

```
using (JONDOEntities myEnt = new JONDOEntities())
        {    
            // #1) Need to create WAPublicUser object first
            var wap = (from w in myEnt.WAPublicUsers
                       where w.WAPublicUserID == 981
                       select w).FirstOrDefault();

            var proUser = (from p in myEnt.Professionals
                           where p.WAPublicUser.WAPublicUserID == wap.WAPublicUserID
                           select p).FirstOrDefault();

            // If the record does not exist in the Professional table, insert new record. 
            if (proUser == null)
            {
                JONDOModel.Professional pro = new JONDOModel.Professional()
                {                        
                    ProfessionalType = "unknown",
                    FirstName = "unknown",
                    LastName = "unknown",
                    PhoneNumber = "unknown",
                    WebsiteUrl = "unknown",
                    TaxID = "unknown",
                    BusinessInfo = "unknown",
                    ProfessionalLogo = "unknown",
                    IsApproved = true,
                    CATaxExempt = false,                       
                    WAPublicUser = wap     // #2) Plug in the WAPublicUser object here
                };

                myEnt.AddToProfessionals(pro);
                myEnt.SaveChanges();
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:24:38.243

好的，这是我的 OP 的真正答案：

我接手管理的 asp.net 网站的目标是 .NET 3.5。显然，3.5 和实体框架存在一些问题。

我将网站转换为目标 .NET 4.0（*见下文了解如何）。当我去创建实体数据模型时，瞧，默认情况下，它现在包含外键，因此，我没有 OP 中描述的任何问题。

如果遇到这种情况，您必须确保 Web 服务器也升级到 .NET 4.0。因为如果您将网站文件升级/转换为目标 .NET 4.0，但您的 Web 服务器尚未升级，那么尽管该网站在您的开发机器上运行流畅（假设它具有 .NET 4.0 框架），它会崩溃实时网络服务器。

顺便说一句，.NET 4.0 框架将运行使用以前版本的 .NET（向后兼容性）构建的应用程序......但是，以 .NET 4.0 为目标的应用程序将无法在具有 .NET 3.5 框架或更早版本的环境中运行。

将网站转换为 .NET 4.0：

将网站转换/升级到 .NET 4.0 的两种方法。1) 通常，当您打开一个新副本并且它的目标是 4.0 时，Visual Studio 会询问您是否要转换/升级（选择是）。2）在visual studio（商业版）中，单击WEBSITE选项卡，START OPTIONS，BUILD ...然后您应该看到更改“Target Framework”的选项...

# ipad - Retina iPad 模拟器显示问题？

> ID：11476477
> 
> 赞同：0
> 
> 时间：2012-07-13T18:46:24.680
> 
> 标签：ipad, simulator, retina-display

我正在制作一个视网膜 iPad 应用程序。当我使用 iPad 模拟器进行测试时，我可以很好地显示我的图标和按钮等...

但是当我切换到视网膜模拟器时，我得到了大按钮和图像......这正常吗？不幸的是，我没有真正的 iPad 可以测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:52:53.083

是的，这很正常。

原因是视网膜显示器的分辨率是 2048x1536，而普通 iPad 是 1024x768。

当您在常规模拟器中测试您的应用程序时，您会在 1024x768 中看到您的应用程序，它会在您的显示器上显示为“常规尺寸”。当您在 Retina 模拟器中测试您的应用程序时，您将看到您的应用程序的完整分辨率为 2048x1536。而且由于您的计算机显示器很有可能不是视网膜显示器，因此您会看到它是一个更大的窗口，其中包含放大的 UI 元素。

如果您在配备 Retina 显示屏的 iPad 上测试您的应用程序，您会看到一切都与非 Retina iPad 上的大小相同，因为物理屏幕大小是相同的。

# git - 如何与团队中的其他开发人员共享 heroku 远程跟踪信息

> ID：11476478
> 
> 赞同：0
> 
> 时间：2012-07-13T18:46:31.120
> 
> 标签：git, heroku

我已经为同一个存储库设置了多个 heroku 实例，如此处[所述](https://devcenter.heroku.com/articles/multiple-environments)。按照建议，每个 heroku 实例对应一个不同的远程（暂存、生产等）。我的挑战是我们团队的几名成员将进行部署。但是，在我使用 heroku 设置它们之后，heroku 遥控器仅存在于我的本地 git 中。其他团队成员的存储库的 git 克隆也了解 heroku 远程的最佳方式是什么，以便他们也可以推送到它们进行部署？我们使用 gitolite（类似于私有 github）服务器作为中央 git 存储库，并从中推送和拉取更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:24:56.170

How about they set up a git remote for each app? eg.

```
git remote add production git@heroku.com:furious-robot-218.git
git remote add staging git@heroku.com:furious-wind-28.git 
```

The `heroku create` you used to create those apps, creates the app on Heroku's side, but also created a git remote for you on your side. For example, if you did this, you'd see your remotes:

```
git remote -v 
```

# android - 未调用 IntentService

> ID：11476483
> 
> 赞同：7
> 
> 时间：2012-07-13T18:46:51.143
> 
> 标签：android, service, intentfilter, intentservice

我正在尝试从 Activity 中的 onCreate 发送 Intent 以启动 IntentService。然而，永远不会收到 IntentService 的 onHandleIntent。我尝试使用 Intent-filters 更改 Manifest，但似乎没有任何效果。没有抛出异常，但根本没有调用 IntentService。

这是 onCreate

```
@Override
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    db = new TwitterDB(this);
    String[] columns = new String[1];
    columns[0] = TwitterDB.TEXT;
    tAdapter = new SimpleCursorAdapter(this, 0, null, columns, null, 0); 
    tweets = (ListView)findViewById(R.id.listtwitter);
    tweets.setAdapter(tAdapter);

    Intent intent = new Intent(this, SyncService.class);
    intent.putExtra("action", SyncService.TWITTER_SYNC);
    this.startService(intent);

} 
```

这是 IntentService 类的创建者和 onHandleIntent，我知道它没有被调用，因为 logcat 从不显示“检索的意图”。构造函数也没有被调用（那里有一个日志调用，但我删除了它。

```
public SyncService(){
    super("SyncService");
    twitterURI = Uri.parse(TWITTER_URI);
    Log.i("SyncService", "Constructed");
}

@Override
public void onHandleIntent(Intent i){
    int action = i.getIntExtra("action", -1);
    Log.i("SyncService", "Retrieved intent");
    switch (action){
        case TWITTER_SYNC:
            try{
                url = new URL(twitterString);
                conn = (HttpURLConnection)url.openConnection();
                syncTwitterDB();
                conn.disconnect();
            }catch(MalformedURLException e){
                Log.w("SyncService", "Twitter URL is no longer valid.");
                e.printStackTrace();
            }catch(IOException e){
                Log.w("SyncService", "Twitter connection could not be established.");
                e.printStackTrace();
            }
            break;
        default:;
            // invalid request
    }
} 
```

这是 Manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.twitter"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>
<application android:icon="@drawable/ic_launcher"               
         android:label="@string/app_name" >
    <activity
        android:name=".TwitterTwoActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        <service android:name="SyncService"/>
    </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T18:51:50.917

您需要在清单中定义服务的路径，仅输入名称是不够的。

改变

```
<service android:name="SyncService"/> 
```

至

```
<service android:name=".SyncService"/> 
```

如果 SyncService 在您的包的根目录中，`.SyncService`如果需要，请在之前添加相应的文件夹。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T19:03:58.357

将您的服务声明移到 XML 文件中的 TwitterTwoActivity 范围之外，就像我在这里所做的那样：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.twitter"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>
<application android:icon="@drawable/ic_launcher"               
         android:label="@string/app_name" >
    <activity
        android:name=".TwitterTwoActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>  
    <service android:name="SyncService"/>

</application>
</manifest> 
```

# jquery-mobile - jQuery Mobile 1.1.1 自定义选择菜单 - 占位符文本不可见

> ID：11476484
> 
> 赞同：6
> 
> 时间：2012-07-13T18:46:56.243
> 
> 标签：jquery-mobile, placeholder, select-menu

在今天早些时候（2012 年 7 月 13 日）升级到 jQuery Mobile 1.1.1 后，我注意到我的所有自定义选择菜单不再在页面加载时显示占位符文本。在 1.1.1 中我需要做些不同的事情来在自定义选择菜单中显示占位符文本吗？帮助！？！？

这是我的代码示例：

```
<div data-role="fieldcontain" class="ui-hide-label no-field-separator">
      <label for="ceiling" class="select" data-theme="a">Ceiling</label>
       <select name="ceiling" id="ceiling" data-theme="a" data-native-menu="false" class="required">
            <option data-placeholder="true">Ceiling (Yes/No)</option>
            <option value="Yes">Ceiling: Yes</option>
            <option value="No">Ceiling: No</option>
      </select>
</div> 
```

示例图像（黑条是我的自定义选择菜单）： ![在此处输入图像描述](../Images/4af192c58b8450036911b9ebf8da918d.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-14T20:40:49.687

this code is working for me :

```
<select>
  <option value="" data-placeholder="true">Choose one:</option>
  <option value="1">One</option>
  <option value="2">Two</option>
</select> 
```

Just put `value=""` on your placeholder option

# ember.js - 集合视图中的 itemViewClassBinding

> ID：11476485
> 
> 赞同：1
> 
> 时间：2012-07-13T18:46:57.180
> 
> 标签：ember.js

我正在尝试创建一个可重用的组件，它由一个文本字段组成，在文本字段下，我希望有一个 collectionView 来显示过滤后的元素列表。

我的问题是我希望`itemViewClass`在`containerView`创建组件时对其进行自定义。目前，我将参数传递`listItemView`给容器视图并声明 `itemViewClassBinding: 'parentView.listItemView'`而不是硬编码模板。

这导致我遇到一个问题，Ember 断言它`itemViewClass`必须是 Ember.View 的一个实例：

> 未捕获的错误：断言失败：itemViewClass 必须是 Ember.View 的子类，而不是 function () {

有没有人遇到过类似的问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:03:34.353

对您的班级进行子`ContainerView`分类是一种选择。这是一个例子：http: [//jsfiddle.net/ethan_selzer/kcjzw/240/](http://jsfiddle.net/ethan_selzer/kcjzw/240/)

这个馅饼可能更容易阅读：[http ://pastie.org/4256407](http://pastie.org/4256407)

伊森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:03:59.537

我最近在我的 ember 应用程序中创建了这个功能。我这样做的方法是绑定到控制器属性。当用户在文本字段中键入时，它需要将过滤器文本设置为控制器属性。然后，您的控制器将具有另一个属性，该属性观察过滤器字段文本属性并根据过滤器文本生成内容数据的过滤列表。然后，您的过滤视图将绑定到控制器的过滤内容，而不是通常的（全部）内容。这样你的两个视图就不需要相互了解，控制器提供数据。

# blackberry - 计算黑莓中录制语音的最高频率

> ID：11476492
> 
> 赞同：1
> 
> 时间：2012-07-13T18:47:24.053
> 
> 标签：blackberry, fft

我想记录用户的声音并对其进行 FFT，以便我可以获得一些频率值并计算该录音的最高音调。有没有人在黑莓中做过任何与此相关的事情。如果我能在这方面得到一些帮助，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:51:36.057

查看我的[Google Code Project](http://code.google.com/p/blackberry-real-time-audio/)进行实时 FFT 计算。您应该能够修改代码以适合您。

# javascript - 在 Jquery 或 Javascript 中设置变量

> ID：11476494
> 
> 赞同：1
> 
> 时间：2012-07-13T18:47:31.490
> 
> 标签：javascript, jquery, variables, global-variables

```
$('#firstname').bind('focusout focusin', function() {
    var get_firstname = $("#firstname").val().replace(/ /g, "+");
    var n_firstname = get_firstname.length;
    if (n_firstname > 2) {
        $(".firstname_good").fadeIn("fast");
        var firstname_v = 1;
    }
    else {
        $(".firstname_good").fadeOut("fast");
        var firstname_v = '';
    }
});​ 
```

我无法理解如何使用下面的 VAR firstname_v。我需要在上面做什么才能在下面使用它

```
$('#lastname').bind('focusout focusin', function() {
    if (firstname_v == 1) {
        alert(firstname_v);
    }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:53:02.600

您需要在两个内部范围都可以访问的更高范围内声明变量：

```
var firstname_v; // declare it

$('#firstname').bind('focusout focusin', function() {
    var get_firstname = $("#firstname").val().replace(/ /g, "+");
    var n_firstname = get_firstname.length;
    if (n_firstname > 2) {
        $(".firstname_good").fadeIn("fast");
        firstname_v = 1; // no var here, you're just setting it
    }
    else {
        $(".firstname_good").fadeOut("fast");
        firstname_v = ''; // no var here, you're just setting it
    }
});​

$('#lastname').bind('focusout focusin', function() {
    if (firstname_v == 1) { // no var here, you're just getting it
        alert(firstname_v);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:50:34.893

问题是您的变量是回调函数的本地变量。

像这样在外面声明它：

```
 var firstname_v = '';

   $('#firstname').bind('focusout focusin', function() {
    var get_firstname = $("#firstname").val().replace(/ /g, "+");
    var n_firstname = get_firstname.length;
    if (n_firstname > 2) {
        $(".firstname_good").fadeIn("fast");
        firstname_v = 1;
    }
    else {
        $(".firstname_good").fadeOut("fast");
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:51:57.437

将顶部块更改为：

```
var firstname_v;
$('#firstname').bind('focusout focusin', function() {
    var get_firstname = $("#firstname").val().replace(/ /g, "+");
    var n_firstname = get_firstname.length;
    if (n_firstname > 2) {
        $(".firstname_good").fadeIn("fast");
        firstname_v = 1;
    }
    else {
        $(".firstname_good").fadeOut("fast");
        firstname_v = '';
    }
});​ 
```

请注意，唯一真正的变化是声明`firstname_v`现在在函数外部而不是内部完成。这是它将在您的整个代码中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:51:38.980

做这个：

```
var firstname_v = 0;

$('#firstname').bind('focusout focusin', function() {
    var get_firstname = $("#firstname").val().replace(/ /g,"+");
    var n_firstname = get_firstname.length;

    if (n_firstname > 2) {  
        $(".firstname_good").fadeIn("fast"); 
        firstname_v = 1; 
    } else { 
        $(".firstname_good").fadeOut("fast"); 
    }
});

$('#lastname').bind('focusout focusin', function() {
    if (firstname_v == 1) {
        alert(firstname_v);
    }
});​ 
```

# android - Android 广播接收器创建新实例

> ID：11476497
> 
> 赞同：1
> 
> 时间：2012-07-13T18:47:36.630
> 
> 标签：android, sms

好吧，我有一个扩展广播接收器的类，它正在监听消息。现在，每当它收到一条消息时，我都会创建我的应用程序的一个新实例。所以当我关闭它时，我必须点击返回按钮 2 次。谁能帮我？

```
public class SMSReceiver extends BroadcastReceiver {
public void onReceive(Context context, Intent intent) {
    Bundle myBundle = intent.getExtras();
    SmsMessage [] messages = null;
    String strMessage = "";
    String phoneNumber = "";

    if (myBundle != null) {
        Object [] pdus = (Object[]) myBundle.get("pdus");
        messages = new SmsMessage[pdus.length];

        for (int i = 0; i < messages.length; i++) {
            messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            strMessage += "SMS From: " + messages[i].getOriginatingAddress();
            strMessage += " : ";
            strMessage += messages[i].getMessageBody();
            strMessage += "\n";

            phoneNumber = messages[i].getDisplayOriginatingAddress();
        }

        if (phoneNumber.equals("T-Mobile")) {
            Toast.makeText(context, strMessage, Toast.LENGTH_SHORT).show();
            abortBroadcast();
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:32:39.717

如果活动的实例已经存在于当前任务的顶部，系统将通过调用其 onNewIntent() 方法将意图路由到该实例，而不是创建活动的新实例。Activity可以被实例化多次，每个实例可以属于不同的任务，一个任务可以有多个实例（但前提是后栈顶的Activity不是该Activity的现有实例）。

设置这样

意图.addFlags（意图.FLAG_ACTIVITY_CLEAR_TOP）；

或者

intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

避免一个 Activity 的多个实例。谢谢

有关更多详细信息和知识，这里有一个非常好的博客，它将为您提供指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:05:21.970

首先，我真的不认为它正在创建您的应用程序的新实例。更有可能发生的是一项活动被带到了最前面。我认为您应该查看清单或将其发布，以便我们可以看到广播是如何被引导的。可能广播的目标也具有启动活动的效果。所以检查清单，广播接收器中没有任何东西会导致这种情况。话虽如此，这取决于 Android 操作系统何时显示。但就两个实例而言。那只是没有发生。

PS。我不知道确切的原因，但我会说可能不会从广播接收器发出 Toast，而是使用 startActivity() 与活动通信。

# c - N皇后放置算法

> ID：11476500
> 
> 赞同：0
> 
> 时间：2012-07-13T18:47:44.433
> 
> 标签：c, algorithm

我正在解决 N Queen 问题，我们需要将 N 个皇后放在 NXN 棋盘上，这样没有两个皇后可以互相攻击。

```
#include <stdio.h>  
#include <stdlib.h>
#include<math.h>

int size=8;
char arr[8][8];
int i,j;

void initializeBoard()
{
  for(i=0;i<size;i++)
  {
    for(j=0;j<size;j++)
    {
        arr[i][j]='.';
    }
  }
}

void printArray()
{

  for(i=0;i<size;i++)
  {

    for(j=0;j<size;j++)
    {
        printf("%c\t",arr[i][j]);
    }

    printf("\n");
  }
  printf("\n\n");
}

void placeQueen(int i,int j)
{
  arr[i][j]='Q';
}

int isAvailable(int i,int j)
{
   int m,n,flag;

   for(m=0;m<i;m++)
   {
      for(n=0;n<size;n++)
      {
        int k=abs(i-m);
        int l=abs(j-n);

        if(arr[m][j]!='Q' && arr[k][l]!='Q')
        {
            flag=1;
        }

        else
        {
            flag=0;
            break;
        }
    }
}
return flag;

}

int main(void)
{
    initializeBoard();

    for(i=0;i<size;i++)
    {
        for(j=0;j<size;j++)
        {
            if(isAvailable(i,j)==1)
            {
                // means that particular position is available
                // and so we place the queen there

                placeQueen(i,j);
                break;
            }
        }
    }

    printArray();
    return 0;
} 
```

我认为问题出在 isAvailable() 方法上。但是，我无法找到错误。请帮我识别它。

**我正在采取的方法是否涉及回溯？如果不是，请提供相同的一些解释**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:57:04.157

以前解决过这个问题，并不是所有的展示位置都可以有效地解决这个问题。

您的解决方案包括始终将皇后放置在始终可用的位置 (0,0)。

每当您遍历所有内容并且找不到任何内容时，您都需要进行回溯，或者您需要依赖一个随机放置所有皇后并检查解决方案的解决方案（这种方法实际上比您想象的要快得多，但同时，随机，因此在平均情况下非常低效）

一个潜在的伪解决方案：

```
while(!AllQueensPlaced){
    for(going through the array ){
        if(isAvailable())
        {
            placeQueen();
            lastQueenPlaced = some logical location of last queen;
        }
    }
    if(!AllQueensPlaced)
    {
         backtrack(lastQueenPlaced);
    }
} 
```

您的回溯方法应将 lastQueenPlaced 标记为脏并再次遍历数组以寻找新位置，然后再次执行 while 循环。不要忘记在 backtrack() 中更改 lastQueenPlaced，以防它也是 lastQueenPlaced。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:57:21.560

你的方法不会回溯。它迭代了一些可能性，而不是全部。这个问题最好递归解决，所以我不会像你那样做。您必须为女王被其他人攻击定义规则。您使用`ifs`, 和递归来再次应用规则并进行迭代。大多数回溯算法都是递归编写的。我会给你一个答案，所以你可以根据我的答案。

```
#include <stdio.h>
#include <stdlib.h>

int count = 0;
void solve(int n, int col, int *hist)
{
    int i, j;
    if (col == n) {
        printf("\nNo. %d\n-----\n", ++count);
        for (i = 0; i < n; i++, putchar('\n'))
            for (j = 0; j < n; j++)
                putchar(j == hist[i] ? 'Q' : ((i + j) & 1) ? ' ' : '.');

        return;
    }

#   define attack(i, j) (hist[j] == i || abs(hist[j] - i) == col - j)
    for (int i = 0, j = 0; i < n; i++) {
        for (j = 0; j < col && !attack(i, j); j++);
        if (j < col) continue;

        hist[col] = i;
        solve(n, col + 1, hist);
    }
}

int main(int n, char **argv)
{
    if (n <= 1 || (n = atoi(argv[1])) <= 0) n = 8;
    int hist[n];
    solve(n, 0, hist);
} 
```

回溯的工作方式如下：

1.  创建一个约束（规则）来检查条件是否满足。
2.  将问题视为**搜索树**。搜索这棵树所花费的时间基于`n`板的大小。最好的搜索方法是递归，所以请记住，解决问题的聪明方法是使用递归。
3.  在该代码中，第一组`for`循环只是将板打印出来，并检查`Q`是否找到。
4.  `# define attack(i, j) (hist[j] == i || abs(hist[j] - i) == col - j)`是我的规则，它断言 2 个皇后不会互相攻击。
5.  第二组`for`循环在约束规则内找到可以插入另一个皇后的条件。
6.  然后我再次调用 find 函数。回溯就是这样完成的。
7.  我的基本情况是棋盘上可以有 2 个皇后，然后我将递归检查是否可以添加另一个皇后直到 8。因此，2 + 1 = (1+1) + 1 = 1 (1 + 1)。再次应用该规则，我们有 3 + 1 = (2) + 1 + 1 = (2) + (1 + 1)，还有 4 = (3) + 1 + 1 = (3) + (1+1) .
8.  递归会为您做到这一点。让我们一遍又一遍地应用规则。因此`f(n+1) = f(n) + 1`，对于这种情况，这`f(2) = 2`是我的基本情况。
9.  回溯的基础是，如果其中一个分支不起作用，您可以向上一级搜索另一个分支，依此类推，直到所有树都被搜索完。同样，递归是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T13:38:40.467

使用一维数组来跟踪每行中可以放置皇后的列。

女王可能受到威胁的条件可以表述为 1) ColumnForRow[i] == ColumnForRow[j] - 它们将在同一列 2) (ColumnForRow[i] - ColumnForRow[j] ) == ( i- j) 或 (ColumnForRow[j] - ColumnForRow[i]) == (i - j) - 它们将位于同一对角线上。

公共类 NQueenSolver {

```
static int BOARD_SIZE = 15;
static int count = 0;
static int columnForRow[] = new int[BOARD_SIZE];

public static void main(String[] args) {
    PlaceQueen(0);
    System.out.println(count);
}

static boolean check(int row) {
    for (int i = 0; i < row; i++) {
        int diff = Math.abs(columnForRow[i] - columnForRow[row]);
        if (diff == 0 || diff == row - i)
            return false;
    }
    return true;
}

static void PlaceQueen(int row) {
    if (row == BOARD_SIZE) {
        printBoard();
        ++count;
        return;
    }
    for (int i = 0; i < BOARD_SIZE; i++) {
        columnForRow[row] = i;
        if (check(row)) {
            PlaceQueen(row + 1);
        }
    }
}

private static void printBoard() {
    //System.out.println(Arrays.toString(columnForRow));
    for (int i = 0; i < BOARD_SIZE; i++) {
        for (int j = 0; j < BOARD_SIZE; j++) {
            if (columnForRow[i] == j)
                System.out.print("Q ");
            else
                System.out.print("* ");
        }
        System.out.println();
    }
    System.out.println();
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T20:42:13.473

您的代码没有递归方法，这是设计回溯算法时首先想到的。因此，您在这里没有实施任何回溯策略。

您的函数 isAvailable() 在许多方面都不完整。

要检查一个单元格（行、列）是否受到已经放置的皇后的攻击，您可以使用以下策略。

## 注意事项：

1.  逐行放置皇后

2.  要将皇后放置在第 i 行，我们需要检查与放置在第 0 到 (i-1) 行的皇后的冲突。

3.  女王水平，垂直和对角线攻击。

# 代码（参考：Tushar Roy 的讲座/代码）

```
boolean isSafe = true;
for(int queen = 0; queen<row; queen++) // Checking with already placed queens
{
    // attack condition
    if(position[queen].column == column || position[queen].row + 
    position[queen].column == row + column || position[queen].row - 
    position[queen].column == row-column)
    {
        isSafe = false;
        break;
    }
} 
```

希望这可以帮助。

# html - twitter bootstrap 缩略图在 Chrome + Windows XP 之外的任何地方都无法正确对齐

> ID：11476503
> 
> 赞同：3
> 
> 时间：2012-07-13T18:47:58.187
> 
> 标签：html, css, twitter-bootstrap

好的，所以我正在为工作网站制作原型，但我在使用缩略图作为 Twitter Bootstrap 的一部分时遇到了一个小障碍

我的问题很容易看到，并且适用于我测试过的所有浏览器，***但*** `Chrome 20.0.1132.57 (Official Build 145807) m`在 Windows XP SP3 上。

如果您转到该页面，您可能会看到如下内容： ![在此处输入图像描述](../Images/10cc99f8428ab5f22599660782373f1c.png) 但是当我在 Windows + Chrome 上检查时，缩略图都正确排列（左侧第二行没有空格。）*见下文* ![在此处输入图像描述](../Images/1eacce6e3cefe0cbe855e3f5040ed5e9.png)

这是我使用的标记（我已经看了三次，看不到错误..所以我会把它全部发布，以防它不知何故格式错误？）：

```
<ul class="thumbnails">
    <li class="span3" id="c4">
    <div class="thumbnail vcard">
        <h4>AG Dryer Services, Inc.</h4>
        <p>
            <address>
            234 N. Tyler street<br>
             P. O. Box 450<br>
             Elm Creek NE 68836, USA<br>
            <br>
             Phone: 1-308-856-4636<br>
             Fax: 1-308-856-4641 </address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
    <li class="span3" id="c5">
    <div class="thumbnail vcard">
        <h4>Advanced Grain Handling</h4>
        <p>
            <address>
            823 Main St West<br>
             Mayville ND 58257, USA<br>
            <br>
             Phone: 1-701-788-8927</address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
    <li class="span3" id="c6">
    <div class="thumbnail vcard">
        <h4>Whitcomb Brothers Crane Service</h4>
        <p>
            <address>
            16710 90th Ave<br>
             Atwater MN 56209, USA<br>
            <br>
             Phone: 1-320-974-8337<br>
             Fax: 1-320-974-8837</address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
    <li class="span3" id="c8">
    <div class="thumbnail vcard">
        <h4>Sims Construction Co.</h4>
        <p>
            <address>
            1860 St Rt 56 SW<br>
             London OH 43140, USA<br>
            <br>
             Phone: 1-740-852-4137<br>
             Fax: 1-740-852-4729</address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
    <li class="span3" id="c10">
    <div class="thumbnail vcard">
        <h4>Elevator Services &amp; Storage, Inc.</h4>
        <p>
            <address>
            312 W Main St.<br>
             Beaverdam, OH 45808, USA<br>
            <br>
             Phone: 1-419-643-5111<br>
             Fax: 1-419-643-4762</address>
        </p>
        <a href="http://www.essicompanies.com" class="btn btn-primary" target="_blank">Website</a><a href="mailto:sales@essicompanies.com" class="btn btn-success">Email</a>
    </div>
    </li>
    <li class="span3" id="c12">
    <div class="thumbnail vcard">
        <h4>General Steel Crane &amp; Rigging</h4>
        <p>
            <address>
            P.O. Box 1078<br>
             Hopkinsville KY 42241<br>
            <br>
             Phone: 1-270-886-8857<br>
             Fax: 1-419-643-4762</address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
    <li class="span3" id="c7">
    <div class="thumbnail vcard">
        <h4>Northern Grain Design &amp; Const.</h4>
        <p>
            <address>
            8015 highway 7, SE<br>
             Clara City MN 56222, USA<br>
            <br>
             Phone: 1-320-367-2881<br>
             Fax: 1-320-367-2879</address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
    <li class="span3" id="c9">
    <div class="thumbnail vcard">
        <h4>Miller Agri. Sales</h4>
        <p>
            <address>
            103 Sycamore<br>
             Friend NE 68359, USA<br>
            <br>
             Phone: 1-402-947-9881<br>
             Fax: 1-402-947-9801</address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
    <li class="span3" id="c11">
    <div class="thumbnail vcard">
        <h4>Innovative Electrical Solutions. LLC.</h4>
        <p>
            <address>
            11 W. Wilson<br>
             P.O. Box 202<br>
             Henning IL 61832, USA<br>
            <br>
             Phone: 1-217-286-3280</address>
        </p>
        <a href="#" class="btn btn-primary" disabled>Website</a><a href="#" class="btn btn-success" disabled>Email</a>
    </div>
    </li>
</ul> 
```

和引导 css 文件我做了一些非常小的更改（链接颜色和选项卡/背景颜色的东西），但与缩略图或网格系统无关。

请任何帮助将不胜感激，我真的在这里摸不着头脑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:04:23.600

给他们高度可以解决它：

```
.thumbnails > li {
    float: left;
    margin-bottom: 18px;
    margin-left: 20px;
    height: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T08:30:58.253

我最近遇到了同样的问题，但我不想修复网格的宽度（不确定这是否是你要找的？）但这是让我非常快速顺利地解决这个问题的神奇库 -

[http://masonry.desandro.com/](http://masonry.desandro.com/)

谢谢，

灰。

# .net - 使用正则表达式 MatchCollection 和反向引用

> ID：11476505
> 
> 赞同：0
> 
> 时间：2012-07-13T18:48:01.947
> 
> 标签：.net, regex

A 有一个与格式匹配的字符串`[abc][def][ghi][jkl]`。我正在使用以下表达式来解析字符串

```
expression = @"\[([\s\S]*?)\]"; 
```

在这种情况下，我可以看到创建的组是

```
1: abc
1: def
1: ghi
1: jkl 
```

问题是，当我遍历`MatchCollection`并检查它时，`match.Value`它会给我包括大括号（即`collection[0].Value = [abc]`）的整个项目。如何仅返回已创建组中显示的内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:15:38.283

你想要的是`Groups`属性。

`collection[0].Groups[1]`,`collection[1].Groups[1]`等是匹配组 1 的字符串部分。

# database - 添加新数据源后，对 RRD 的更新失败

> ID：11476508
> 
> 赞同：0
> 
> 时间：2012-07-13T18:48:14.510
> 
> 标签：database, rrdtool, rrd

**一点背景知识** 我有一个 RRD，它可以保存 1500 多个单独 RRD 的聚合值（我正在监视 1500 多个设备）。我这样做是为了在我希望从每个包含我要查找的数据的受监控设备中获取值时不会达到 1500+ RRD。我不断增加这组受监控的设备，因此我进行了一些 xml 编辑（很像 contrib perl 脚本，将新数据源添加到已经存在的 RRD）来解释我的新设备。RRD 的更新每小时发生一次。

**RRD 是用这个创建的**

```
--step 3600 
--start now 
DS: [$cabinet-totalw] :GAUGE:7200:U:U"
RRA:AVERAGE:0.5:1:4392
RRA:AVERAGE:0.5:24:366
RRA:AVERAGE:0.5:744:36
RRA:MIN:0.5:24:732
RRA:MAX:0.5:24:732 
```

仅供参考 - $cabinet-totalw 实际上是 for 循环中的变量。最初的构建循环通过了大约 1300 个机柜。我不想在这里列出所有内容。

**问题** 将新设备添加到受监视组时，数据源将添加到聚合 RRD 文件中。但是，当更新触发时，由于某种未知原因，它实际上并没有更新 RRD。当我手动执行此操作`updatev`时，存在零。如果我查看`xport`输出，我有`NAN`任何新的数据源数据。但是，所有现有数据源似乎都可以毫无问题地更新。

目前，我不知道为什么会这样。事情似乎井井有条，但新的 RRD 数据源的更新并不需要。更有趣的是，我过去已将数据源添加到此文件中，并且这些更新没有问题。它只是似乎是最近的更新不采取。

我还应该补充一点`lastupdate`，实际上确实显示了......以及最后一次正确更新。所以我认为我缺乏RRD知识？

**添加** 我编写了一个脚本来获取`DS`我感兴趣的索引。然后我解析 a 的输出`rrdtool fetch`以根据每个时间间隔的索引找到请求的值。我发现这些值实际上正在更新并存储在 RRD 中。有趣的是，时间戳显示在分配的时间段后 7 分钟（步长为 3600，因此数据应按小时存储）。我现在认为这是一个插值问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:30:09.597

我发现了我的问题。当我更新 xml 文件中的 rrd 数据时（在它被转储之后），我错误地将错误的默认值添加到 ds 值和最小/最大值。需要将节点值从`NaN`to`0.0000000000e+00`和 min/max 值从`0.0000000000e+00`to 更改`NaN`。

谢谢，如果有人想帮忙。

# linq - How to use dynamic linq to query through nested arrays?

> ID：11476513
> 
> 赞同：0
> 
> 时间：2012-07-13T18:48:22.820
> 
> 标签：linq

If I have class structure as follows:

```
 private class A
    {
        int afoo { get; set; }
        B[] bList { get; set; }
    }

    private class B
    {
        String bfoo { get; set; }
        C[] cList { get; set; }
    }

    private class C
    {
        String cfoo { get; set; }
        int cfoo2 { get; set; }
    }

    public class Master
    {
        A[] aList;

        //qry for all where A.B.C.cfoo = "test"
    } 
```

How would I construct a dynamic LINQ statement to query for items in class C? Something like this

```
1) var qry = aList.blist.clist.AsQueryable().Where("cfoo = \"Test\"").Select(); 
```

My ultimate solution would be to pass the entire path in the dynamic part like this:

```
2) var qry = aList.AsQueryable().Where("bList.cList.cFoo = ""Test"").Select(); 
```

But from what I have tried you can not have the nested objects in the Where. So I am going to live with using templates to build the methods as in 1) above.

[Also, I am using the dynamic library from Scott Gu for the dynamic part.]

But, I can't get that to work. Any suggestions?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:54:16.740

```
aList.SelectMany(a => a.bList)
     .SelectMany(b => b.cList)
     .Where(c => c.cfoo == "\"Test\""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:53:25.853

尝试这个：

```
aList.SelectMany(a => a.bList.SelectMany(b => b.cList))
    .Where(c => c.cf002 == "Test")
    .Select(); 
```

# php - Function switch recursion with possibility of an endless loop

> ID：11476518
> 
> 赞同：0
> 
> 时间：2012-07-13T18:48:41.697
> 
> 标签：php, class, function, loops, recursion

I did not find this type of scenario in stackoverflow and google searches.

I have run into a problem with the logic in my code I have written. The problem is on case 18 in the rollGiftsandLegacies function below:

```
class char
{
    private function d4() { $RNG = mt_rand(1,4); return $RNG; }
    // etc.

    public function recursiveArrayShrink($array) {
        array_walk_recursive($array, function($v, $k, $res) { $res[] = $v; }, $res);
        return $res;
    }
    private function rollCulture($dice) {
        switch($dice) {
            case 1: // For this culture, we have a 1-3 different types of rewards
                for ($i = 1; $i <= $this->d3(); $i++) {
                    $GiftsAndLegacies[$i] = $this->rollGiftsandLegacies($this->d20());
                }
                $results = $this->recursiveArrayShrink($GiftsAndLegacies);
                $this->character['culture']['benefits'] = $results;
            break;
        }
    }
    private function rollGiftsandLegacies($dice) {
        switch($dice) {
            case 1: // A Weapon
                switch($this->d10()) {
                    case 1: $gifts[] = "Gemmed dagger."; break;
                    case 2: $gifts[] = "Gemmed sword."; break;
                    case 3: $gifts[] = "Plain sword."; break;
                    case 4: $gifts[] = "A mace."; break;
                    case 5: $gifts[] = "Gemmed spear."; break;
                    case 6: $gifts[] = "Well-made short or long bow."; break;
                    case 7: $gifts[] = "Gemmed battle-axe."; break;
                    case 8: $gifts[] = "Any type of crossbow."; break;
                    case 9: $gifts[] = "Exotic weapon. GM Only"; break;
                    // Simple re-roll example: works!
                    case 10: 
                        for($i = 1; $i <= $this->d4(); $i++) {
                            $gifts[] = $this->rollGiftsandLegacies($dice = 16);
                        }
                    break;
                }
            break;
            case 2: $gift = "A tapestry."; break;
            case 18: // SEALED TRUNK: 60% chance that it contains 2-4 additional items on this table.
                if($this->d100() <= 60) {
                    $gifts[] = "A sealed trunk with contents:";
                    $this->GiftsAndLegaciesSealedTrunk = $this->d3() + 1;
                    for($i = 1; $i <= $this->GiftsAndLegaciesSealedTrunk; $i++) {
                        $roll = $this->d20();
                        $item = $this->recursiveArrayShrink($this->rollGiftsandLegacies($roll));
                        $item[0] = "&nbsp;&nbsp;&nbsp;<i>". $item[0];
                        $item[0] .= "</i>";
                        $gifts[] = $item;
                    }
                } else {
                    $gifts[] = "A sealed trunk that is empty.";
                }
            break;
        }
        return $gifts[];
    }
} 
```

I get it to display correctly, but I feel I could do this so much better...

the array, and the foreach to actually loop through the results looks like so:

```
Array
(
    [0] => A sealed chest with contents:
    [1] =>     A musical instrument.
    [2] =>     The characters true (and colorful) family history.
    [3] =>     Gemmed dagger.
    [4] =>     A sealed trunk with contents:
    [5] =>     Gemmed sword.
    [6] =>     A map.
    [7] =>     A sealed trunk with contents:
    [8] =>     Plain sword.
)
if(isset($c['culture']['benefits'])) {
    foreach($c['culture']['benefits'] as $benefit) {
        print("".$benefit."<br>");
    }
} 
```

If I roll two sealed trunks (or more infinitely) with things inside it, it looks like this:

A sealed trunk with contents:

> *A musical instrument.*
> *The characters true (and colorful) family history.*
> *Gemmed dagger.*
> *A sealed trunk with contents:*
> *Gemmed sword.*
> *A map.*
> *A sealed trunk with contents:*
> *Plain sword.*

I want it to look like:

A sealed trunk with contents:

> *A musical instrument.*
> *The characters true (and colorful) family history.*
> *Gemmed dagger.*

A sealed trunk with contents:

> *Gemmed sword.*
> *A map.*

A sealed trunk with contents:

> *Plain sword.*

Any help would be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:52:55.080

我认为最简单的方法是使用`$cultureRewards`变量。

在开始时将其设置为正确的值，并有一个循环：

```
while ($cultureRewards > 0) {
    # roll dice
    $cultureRewards--;

    if ($dice == 1) {
        $cultureRewards += d3();
    }
} 
```

编辑添加：

这并不像我最初想象的那么容易；你必须作为参数传入`$cultureRewards`，`rollRewards`因为这是你要查看是否获得额外骰子的地方，对吧？

# git - Git在切换分支之前不要求提交

> ID：11476528
> 
> 赞同：3
> 
> 时间：2012-07-13T18:49:03.740
> 
> 标签：git

如果我运行 git status：

```
# On branch new-media
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   .gitignore
#   modified:   app/views/layouts/application.html.erb 
```

然后我结帐主人：`git checkout master`

```
M   .gitignore
M   app/views/layouts/application.html.erb
Switched to branch 'master' 
```

以前，git 阻止我检查其他分支，提示我存储或提交我对当前分支所做的更改。现在，它不再这样做了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:01:40.647

如果两个分支上更改的文件相同，Git 会使用脏工作目录切换分支。如果没有，它会阻止你。`-m`您可以使用标志覆盖此行为。

看

*   [http://www.gitguys.com/topics/switching-branches-without-committing/](http://www.gitguys.com/topics/switching-branches-without-committing/)
*   [http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html](http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:59:42.503

当这些更改与另一个分支中的文件冲突时，它只会阻止您切换具有未提交更改的分支。如果 Git 可以干净地切换，它会在不提示您的情况下这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:02:48.887

***如果***您尝试签出的分支上的相同文件有其他更改，它应该阻止分支签出（提示存储或提交） 。但是，如果这些文件的分支之间没有差异，那么它应该始终允许检出。

我同意 pmr，您现在看到的是“正常”行为，之前已经看到了“冲突”行为。

# java - Spring Batch How to read multiple table (queries) as Reader and write it as flat file write

> ID：11476531
> 
> 赞同：4
> 
> 时间：2012-07-13T18:49:12.633
> 
> 标签：java, spring, spring-batch

In my project I have read multiple tables with different queries and consolidate those results sets in flat files. How do I achieve that. I mean JdbcReader is directly taking 1 select query, how can I customize it.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T16:59:13.443

如果 JdbcCursorItemReader 不适合您的需要，您始终可以通过实现 ItemReader 接口来自由地实现自定义阅读器。

```
public interface ItemReader<T> {
        T read() throws Exception, UnexpectedInputException, ParseException;
} 
```

只需编写一个实现该接口的类，并注入一个 jdbcTemplate 即可查询多个表。

```
public Class MyCompositeJdbcReader implements ItemReader<ConsolidateResult>{
    private JdbcTemplate jdbcTemplate;

    public ConsolidateResult read() 
       throws Exception, UnexpectedInputException, ParseException{
    ConsolidateResult cr = new ConsolidateResult();     

    String name= this.jdbcTemplate.queryForObject(
        "select name from customer where id = ?",new Object[]{1}, String.class);
    String phoneNumber= this.jdbcTemplate.queryForObject(
        "select phone from customer_contact where custid = ?",
        new Object[]{1},String.class);

    cr.setName(name);
    cr.setPhone(phoneNumber);
    return cr;
 } 
```

}

我没有编译代码，但我希望它能给出一个想法。

# c++ - 捕获 QSpinBox 文本字段 mouseEvents

> ID：11476540
> 
> 赞同：1
> 
> 时间：2012-07-13T18:49:40.917
> 
> 标签：c++, qt, mouseevent

我有一个重新实现的 QDoubleSpinBox。我想`mouseDoubleClickEvent`通过`singleStep`.`QInputDialog::getDouble()`

我的问题是，当我重新实现时，`mouseDoubleClickEvent`我只捕捉到发生在箭头按钮上的双击。我实际上想忽略箭头中发生的双击，只捕获文本字段中发生的双击。我有一种感觉，我需要重新实现 QDoubleSpinBox 子级的 mouseDoubleClickEvent，但我不确定如何重新实现子级事件或如何选择正确的子级 请参阅我在代码中限制子级 QRect 的尝试：我认为我需要指定哪个孩子...？

谢谢。

编辑：更正了类声明/定义名称不匹配。

MyQDoubleSpinBox.h

```
class MyQDoubleSpinBox : public QDoubleSpinBox
{
    Q_OBJECT

public:
    MyQDoubleSpinBox(QString str, QWidget *parent = 0);
    ~MyQDoubleSpinBox();

public slots:
    void setStepSize(double step);

private:
    double stepSize;
    QString name;

protected:
    void mouseDoubleClickEvent(QMouseEvent *e);
}; 
```

MyQDoubleSpinBox.cpp

```
#include "MyQDoubleSpinBox.h"

MyQDoubleSpinBox::MyQDoubleSpinBox(QString str, QWidget *parent)
    :   QDoubleSpinBox(parent), stepSize(1.00), name(str)
{
    this->setMinimumWidth(150);
    this->setSingleStep(stepSize);
    this->setMinimum(0.0);
    this->setMaximum(100.0);
}

MyQDoubleSpinBox::~MyQDoubleSpinBox()
{

}

void MyQDoubleSpinBox::setStepSize(double step)
{
    this->setSingleStep(step);
}

void MyQDoubleSpinBox::mouseDoubleClickEvent(QMouseEvent *e)
{
    if( this->childrenRect().contains(e->pos()) )
    {
        bool ok;
        double d = QInputDialog::getDouble(this,
            name,
            tr("Step Size:"),
            this->singleStep(),
            0.0,
            1000.0,
            2,
            &ok);

        if(ok)
            this->setSingleStep(d);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:48:36.823

有点技巧让孩子参考，但它有效=）

MyQDoubleSpinBox.h：

```
class MyQDoubleSpinBox : public QDoubleSpinBox
{
    Q_OBJECT

public:
    MyQDoubleSpinBox(QString str, QWidget *parent = 0);
    ~MyQDoubleSpinBox();

public slots:
    void setStepSize(double step);

private:
    double stepSize;
    QString name;

protected:
    bool eventFilter(QObject *, QEvent *e);
}; 
```

MyQDoubleSpinBox.cpp

```
MyQDoubleSpinBox::MyQDoubleSpinBox(QString str, QWidget *parent)
    :   QDoubleSpinBox(parent), stepSize(1.00), name(str)
{
    this->setMinimumWidth(150);
    this->setSingleStep(stepSize);
    this->setMinimum(0.0);
    this->setMaximum(100.0);
    QLineEdit *editor = this->findChild<QLineEdit *>("qt_spinbox_lineedit");
    editor->installEventFilter(this);
}

MyQDoubleSpinBox::~MyQDoubleSpinBox()
{

}

void MyQDoubleSpinBox::setStepSize(double step)
{
    this->setSingleStep(step);
}

bool MyQDoubleSpinBox::eventFilter(QObject *, QEvent *e)
{
    if (e->type() == QMouseEvent::MouseButtonDblClick)
    {        bool ok;
        double d = QInputDialog::getDouble(this,
                                           name,
                                           tr("Step Size:"),
                                           this->singleStep(),
                                           0.0,
                                           1000.0,
                                           2,
                                           &ok);

        if(ok)
            this->setSingleStep(d);
    }
    return false;
} 
```

我没有覆盖事件，而是获得了底层*QLineEdit*的引用并为其分配了事件过滤器。在事件过滤器中仅捕获鼠标双击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-13T10:46:06.320

您可以使用 this->lineEdit() 直接访问 QLineEdit

```
MyQDoubleSpinBox::MyQDoubleSpinBox(QString str, QWidget *parent)
    :   QDoubleSpinBox(parent), stepSize(1.00), name(str)
{
    this->setMinimumWidth(150);
    this->setSingleStep(stepSize);
    this->setMinimum(0.0);
    this->setMaximum(100.0);
    QLineEdit *editor = this->lineEdit(); // change here
    editor->installEventFilter(this);
} 
```

# android - 如何在android中为图像设置动画？

> ID：11476542
> 
> 赞同：2
> 
> 时间：2012-07-13T18:49:45.693
> 
> 标签：android, android-animation

在我的应用程序中，我实现了摇晃选项。在那个活动中，我有瓶子图像，需要像摇晃瓶子一样动画。我不知道android中的动画并在google中搜索但找不到确切的动画。我只是在寻找一个例子。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:03:53.127

试试这些线程：

[android中的摇晃/摆动视图动画](https://stackoverflow.com/questions/9448732/shaking-wobble-view-animation-in-android)

[http://www.edumobile.org/android/android-programming-tutorials/shake-animation-example/](http://www.edumobile.org/android/android-programming-tutorials/shake-animation-example/)

还要检查以下的“摇动图像”部分：

[http://jongladwin.blogspot.in/2010/03/androibasic-animation-samples.html](http://jongladwin.blogspot.in/2010/03/androibasic-animation-samples.html)

# domain-driven-design - 我们是否应该将发出和协调调用的工作分配给域服务？

> ID：11476544
> 
> 赞同：1
> 
> 时间：2012-07-13T18:49:57.920
> 
> 标签：domain-driven-design, n-tier-architecture

*应用服务通过调用和协调对**工作流*、*基础设施服务*、*域服务*和*域实体*的调用来完成客户端（即表示层）发出的命令。

*很少有域服务与**应用程序服务*做类似的工作，这是否是一种常见的做法，这意味着它们也进行和协调调用，唯一的区别是它们在更细粒度的级别上进行（即它们只进行和协调对其他的调用）*域服务*和*域对象*）？

*如果是，任何想法这些域服务*应该有多细？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:18:52.193

域服务包含不特别适合任何实体或跨越多个实体的域逻辑。

一个经常被引用的例子是 FundsTransferService。转移资金似乎不是 BankAccount 实体的责任，因为这意味着源账户可以修改目标账户的余额（或相反），这看起来很尴尬并且可能很危险。FundsTransferService 中的专用 TransferFunds() 方法可以更好地分离关注点并在一个地方引导所有资金流动。

在这方面，您可以说域服务协调对实体和其他服务的调用，但与应用层服务执行 IMO 的意义不同。通常，应用层服务只是样板程序代码，而域服务包含真实的业务规则。

> 唯一的区别是他们在更细粒度的级别上做

我不会说域服务比应用程序服务更细粒度。它们本质上只是在不同的层中。这就像说存储库比控制器粒度更细......通常粒度是衡量一个内聚操作在多大程度上被分成较小的部分而不是一个大的过程。

# c# - Have I reached the Refactoring Tipping Point?

> ID：11476546
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:50:03.430
> 
> 标签：c#, parameters, constructor, refactoring

I have a form whose constructor I've overloaded to pass in an enumerated type and a `List<int>`.

Now I realize I also need to pass in another `int` (that doesn't belong in the `List<int>`).

At what point is it considered "good form" (no pun intended) to regroup and refactor and encapsulate all those parameters into a class and pass that?

Or is there a better way (that doesn't require Houdini-esque sleight of hand)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:05:57.433

在你为这个函数创建一个新对象之前要考虑的事情

您使用此功能的频率如何？你有重复的代码吗？创建此类是否有助于删除重复代码？它是否提高了效率（代码性能和维护）？哪个更快？客户并不关心这些。

添加另一个具有更多参数的构造函数并不违背任何实践，但如果你有一堆以奇怪的顺序调用自己的构造函数，我建议重新考虑它......

如果您的应用程序需要它，请添加它。有：

```
public FormConstructor(List<int> someInts, MyEnumThing anEnumYay, int anotherInt) 
```

还不错 - 除了我的命名......

我的意见？如果我没有看到创建类的任何潜在收益，我会添加 Int。

创建一个类“仅仅因为”你不想要很多输入参数是创建所述类的**错误原因。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:54:00.697

您可以将字段公开为公共属性并使用以下语法：

```
var myinstance = new MyType
{
    Prop1 = val1,
    Prop2 = val2,
    Prop3 = val3
}; 
```

这节省了您一次又一次地更改构造函数的需要。我考虑到您的“什么时候最好……”的问题，如果我希望它增长超过 2 或 3 个（现在或将来），我个人会同意，我将创建一个参数类。不过，这可能会引起很多争论！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:54:48.457

我想这完全取决于更改后您必须在其他地方进行多少重构。如果将所有内容都推入新类，应用程序的其他部分是否会因此停止工作？这可能会引入多少错误？IMO 三个或四个参数很好，但是一旦我开始将 5 个或更多参数推入签名，我倾向于创建一个类来处理这项工作。

引号等可能会成为一个因素，因为如果您必须在一个小时内完成工作，但创建一个类、更新其他代码和测试需要三个人，您可能只需要添加一个新的参数并稍后重新访问。

# php - NextGEN Gallery Album Pagination

> ID：11476547
> 
> 赞同：0
> 
> 时间：2012-07-13T18:50:05.587
> 
> 标签：php, html, image, image-gallery

I've updated album-extend.php to display all images from the galleries and it works perfect for as long as the pagination is not involved. Once I use Custom Field (ngg_paged_Galleries) to add pagination, it does add the second page, but the galleries are missing/not displayed. So you only see the galleries/images on the first page and nothing beyond first page.

I know I'm missing something, but for the life of me I can't make it work. Would appreciate any input!

Thank you!

I think that's where the problem is:

```
 foreach ($galleries as $gallery){
        echo do_shortcode("[nggallery id=".$gallery->gid."]");
    }
    ?> 
```

And here is album-extend.php:

```
<?php
/**
Template Page for the album overview (extended)

Follow variables are useable :

    $album       : Contain information about the album
    $galleries   : Contain all galleries inside this album
    $pagination  : Contain the pagination content

 You can check the content when you insert the tag 
 If you would like to show the timestamp of the image ,you can use 
**/
?>

<?php if (!defined ('ABSPATH')) die ('No direct access allowed'); ?> <?php if (!empty ($album)) :?>

    <?php
    foreach ($galleries as $gallery){
        echo do_shortcode("[nggallery id=".$gallery->gid."]");
    }
    ?>

    <?php echo $pagination >

<?php endif; > 
```

# c# - Microsoft.Office.Interop.Word namespace overriding my System namespace? C# ASP.net

> ID：11476549
> 
> 赞同：3
> 
> 时间：2012-07-13T18:50:14.397
> 
> 标签：c#, .net, ms-office, .net-assembly, primary-interop-assembly

I am trying to fix this legacy app that was created using Visual Studio 2003, using Microsoft Office Interops version 11, .NET 2.0\. I am trying to fix it in Visual Studio Express 2010 to reference Interops version 14, .NET 4.0 -- as noted in my previous question on StackOverflow, the legacy app works fine in Windows 7 but after I close it, the Microsoft Office products are crashing when I try to use them.

However, when I fix the references in VS2010 (delete old v.11 Interops, add in new v.14 Interops) and then attempt to publish the application, I get errors like

```
'Microsoft.Office.Interop.Word.System does not contain a definition for IO' 
```

It looks like VS2010 does not see my System namespace being used when the Word namespace is referenced? When I removed the

```
using Microsoft.Office.Interop.Word 
```

namespace and then try to publish, the errors like the above disappear and I only get the expected errors related to the missing Word reference like

```
The type or namespace name '_Document' could not be found (are you missing a using directive or an assembly reference?) 
```

I already included the System.dll in the reference so I'm not sure what's going on? Thanks for reading!

EDIT: I made "Embeded Interop Types" to be False for the Office Interops. That may have fixed some of the errors? HOWEVER: Visual Studio is still interpreting any System references to be "Microsoft.Office.Interop.Word.System" which is NOT what I want. This error seems to be the dominant one now:

```
The type name 'Windows' does not exist in the type 'Microsoft.Office.Interop.Word.System' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T01:27:50.183

这个问题发生在我身上，只有当我将 using 的东西放在命名空间定义之后，如下所示：

```
namespace Addin
{
using Microsoft.Office.Core;
using Microsoft.Office.Interop.Word;
using Microsoft.Win32;
using System;
using System.ComponentModel;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Net;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Windows.Forms;
.......................... 
```

正确的方法是：

```
using Microsoft.Office.Core;
using Microsoft.Office.Interop.Word;
using Microsoft.Win32;
using System;
using System.ComponentModel;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Net;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace Addin
{
.................... 
```

愿它帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T02:34:12.003

要解决命名空间中的问题：

改变：

```
using Microsoft.Office.Interop.Word; 
```

至：

```
using Document = Microsoft.Office.Interop.Word.Document; 
```

对您可能从任何其他冲突命名空间使用的其他对象执行相同操作。

# google-maps - 编辑模式下多段线上的样式手柄/控制点

> ID：11476556
> 
> 赞同：6
> 
> 时间：2012-07-13T18:50:46.033
> 
> 标签：google-maps, google-maps-api-3

当折线设置为可编辑时，有没有办法更改默认用作顶点句柄的白色方块的样式：true？

我可以看到更改折线的笔触会影响那些手柄正方形，但我想要么改变手柄的形状（例如变成圆形），要么替换图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T12:47:43.420

我设法找到的唯一方法是直接操作与这些标记相对应的 DOM 元素。例如，可以使用它们来选择它们

```
$('div').filter(function() {
  return $(this).css('width') == '11px';
}) 
```

可能更可靠的方法是从 $('.gm-style') 元素开始遍历 DOM 树。

# java - 在编译时检测错误配置的spring bean接线

> ID：11476557
> 
> 赞同：2
> 
> 时间：2012-07-13T18:50:52.637
> 
> 标签：java, spring, compilation

有没有一种方法或工具可以在编译时检测我的任何 spring bean 是否没有正确自动装配。

例如，对于基于类型的接线，如果该类型不存在，它应该抱怨。或者对于基于“名称”的布线，如果该名称的 bean 不存在，它应该抱怨。

这些可以在应用程序启动时被捕获，但这在游戏中听起来太晚了（尤其是当您有一个很长的部署过程时）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:06:31.610

[intellij-idea](/questions/tagged/intellij-idea "显示标记为“intellij-idea”的问题") 在找出 XML 和类中的不正确映射方面[做得很好。](http://www.jetbrains.com/idea/features/spring_framework.html)我猜[sts-springsourcetoolsuite](/questions/tagged/sts-springsourcetoolsuite "显示标记为“sts-springsourcetoolsuite”的问题")有类似的功能。

但是对你来说最好的安全网就是简单地编写一个集成测试来启动整个上下文并在持续集成中运行它。

# c++ - C++ 和 MPI 如何并行编写部分代码？

> ID：11476558
> 
> 赞同：3
> 
> 时间：2012-07-13T18:50:58.553
> 
> 标签：c++, parallel-processing, mpi

我一直在使用 PETSc 库编写一些代码，现在我将更改其中的一部分以并行运行。我想要并行化的大部分事情是矩阵初始化以及我生成和计算大量值的部分。无论如何，如果我出于某种原因运行超过 1 个内核的代码，我的问题就会出现，所有代码部分的运行次数将与我使用的内核数一样多。

这只是我测试 PETSc 和 MPI 的简单示例代码

```
int main(int argc, char** argv)
{
    time_t rawtime;
    time ( &rawtime );
    string sta = ctime (&rawtime);
    cout << "Solving began..." << endl;

PetscInitialize(&argc, &argv, 0, 0);

  Mat            A;        /* linear system matrix */
  PetscInt       i,j,Ii,J,Istart,Iend,m = 120000,n = 3,its;
  PetscErrorCode ierr;
  PetscBool      flg = PETSC_FALSE;
  PetscScalar    v;
#if defined(PETSC_USE_LOG)
  PetscLogStage  stage;
#endif

  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
         Compute the matrix and right-hand-side vector that define
         the linear system, Ax = b.
     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
  /* 
     Create parallel matrix, specifying only its global dimensions.
     When using MatCreate(), the matrix format can be specified at
     runtime. Also, the parallel partitioning of the matrix is
     determined by PETSc at runtime.

     Performance tuning note:  For problems of substantial size,
     preallocation of matrix memory is crucial for attaining good 
     performance. See the matrix chapter of the users manual for details.
  */
  ierr = MatCreate(PETSC_COMM_WORLD,&A);CHKERRQ(ierr);
  ierr = MatSetSizes(A,PETSC_DECIDE,PETSC_DECIDE,m,n);CHKERRQ(ierr);
  ierr = MatSetFromOptions(A);CHKERRQ(ierr);
  ierr = MatMPIAIJSetPreallocation(A,5,PETSC_NULL,5,PETSC_NULL);CHKERRQ(ierr);
  ierr = MatSeqAIJSetPreallocation(A,5,PETSC_NULL);CHKERRQ(ierr);
  ierr = MatSetUp(A);CHKERRQ(ierr);

  /* 
     Currently, all PETSc parallel matrix formats are partitioned by
     contiguous chunks of rows across the processors.  Determine which
     rows of the matrix are locally owned. 
  */
  ierr = MatGetOwnershipRange(A,&Istart,&Iend);CHKERRQ(ierr);

  /* 
     Set matrix elements for the 2-D, five-point stencil in parallel.
      - Each processor needs to insert only elements that it owns
        locally (but any non-local elements will be sent to the
        appropriate processor during matrix assembly). 
      - Always specify global rows and columns of matrix entries.

     Note: this uses the less common natural ordering that orders first
     all the unknowns for x = h then for x = 2h etc; Hence you see J = Ii +- n
     instead of J = I +- m as you might expect. The more standard ordering
     would first do all variables for y = h, then y = 2h etc.

   */
PetscMPIInt    rank;        // processor rank
PetscMPIInt    size;        // size of communicator
MPI_Comm_rank(PETSC_COMM_WORLD,&rank);
MPI_Comm_size(PETSC_COMM_WORLD,&size);

cout << "Rank = " << rank << endl;
cout << "Size = " << size << endl;

cout << "Generating 2D-Array" << endl;

double temp2D[120000][3];
 for (Ii=Istart; Ii<Iend; Ii++) { 
    for(J=0; J<n;J++){
      temp2D[Ii][J] = 1;
    }
  }
  cout << "Processor " << rank << " set values : " << Istart << " - " << Iend << " into 2D-Array" << endl;

  v = -1.0;
  for (Ii=Istart; Ii<Iend; Ii++) { 
    for(J=0; J<n;J++){
       MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);
   }
  }
  cout << "Ii = " << Ii << " processor " << rank << " and it owns: " << Istart << " - " << Iend << endl;

  /* 
     Assemble matrix, using the 2-step process:
       MatAssemblyBegin(), MatAssemblyEnd()
     Computations can be done while messages are in transition
     by placing code between these two statements.
  */
  ierr = MatAssemblyBegin(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr);
  ierr = MatAssemblyEnd(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr);

    MPI_Finalize();
cout << "No more MPI" << endl;
return 0;

} 
```

我的真实程序有几个不同的 .cpp 文件。我在主程序中初始化 MPI，调用另一个 .cpp 文件中的函数，在该文件中我确实实现了相同类型的矩阵填充，但是在填充矩阵之前程序所做的所有 cout 将打印与我的核心数量一样多的次数。

我可以将我的测试程序作为 mpiexec -n 4 test 运行，并且它运行成功，但由于某种原因，我必须将我的真实程序作为 mpiexec -n 4 ./myprog 运行

我的测试程序的输出如下

```
Solving began...
Solving began...
Solving began...
Solving began...
Rank = 0
Size = 4
Generating 2D-Array
Processor 0 set values : 0 - 30000 into 2D-Array
Rank = 2
Size = 4
Generating 2D-Array
Processor 2 set values : 60000 - 90000 into 2D-Array
Rank = 3
Size = 4
Generating 2D-Array
Processor 3 set values : 90000 - 120000 into 2D-Array
Rank = 1
Size = 4
Generating 2D-Array
Processor 1 set values : 30000 - 60000 into 2D-Array
Ii = 30000 processor 0 and it owns: 0 - 30000
Ii = 90000 processor 2 and it owns: 60000 - 90000
Ii = 120000 processor 3 and it owns: 90000 - 120000
Ii = 60000 processor 1 and it owns: 30000 - 60000
no more MPI
no more MPI
no more MPI
no more MPI 
```

在两条评论后编辑：所以我的目标是在有 20 个节点且每个节点有 2 个核心的小型集群上运行它。稍后这应该在超级计算机上运行，​​所以 mpi 绝对是我需要走的路。我目前正在两台不同的机器上对此进行测试，其中一台有 1 个处理器/4 个内核，第二个有 4 个处理器/16 个内核。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:50:12.043

MPI是SPMD/MPMD模型（单程序多数据/多程序多数据）的实现。MPI 作业由同时运行的*进程*组成，这些进程在彼此之间交换消息以合作解决问题。您不能仅并行运行部分代码。您只能拥有不相互通信但仍同时执行的部分代码。您*应该*使用`mpirun`或`mpiexec`以并行模式启动您的应用程序。

如果您只想使部分代码并行化并且可以忍受只能在单台机器上运行代码的限制，那么您需要的是 OpenMP 而不是 MPI。或者您也可以根据 PETSc 网站使用低级 POSIX 线程编程，它支持`pthreads`. OpenMP 建立在此之上，`pthreads`因此将 PETSc 与 OpenMP 结合使用是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:00:36.993

为了补充 Hristo 的答案，MPI 被构建为以分布式方式运行，即完全独立的进程。它们必须分开，因为它们应该在不同的物理机器上。您可以在一台机器上运行多个 MPI 进程，例如每个内核一个。这完全没问题，但是 MPI 没有任何工具可以利用该共享内存上下文。换句话说，您不能让某些 MPI 等级（进程）在另一个 MPI 进程拥有的矩阵上工作，因为您无法共享该矩阵。

当您启动 x 个 MPI 进程时，您将获得 x 个正在运行的完全相同的程序的副本。你需要像这样的代码

```
if (rank == 0)
    do something
else
    do something else 
```

让不同的进程做不同的事情。进程可以通过发送消息相互通信，但它们都运行完全相同的二进制文件。如果您没有代码分歧，那么您将获得同一程序的 x 个副本，给出 x 次相同的结果。

# jquery - 为 Jquery Mobile 按钮设置背景图像

> ID：11476559
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:50:59.750
> 
> 标签：jquery, css, jquery-mobile

我必须为 jquery 移动按钮设置背景图像。例如，背景中带有“翻页”图像的按钮。但是该按钮/图像上会有一些文本，并且该文本本质上是动态的。如果我用作按钮，那么我无法在其上写任何文字，因为它是图像。

我的要求是有一个翻页图像作为一个按钮，上面有一些文字，就像它会显示每月的账户余额，但是当点击时可以在下一页显示详细信息。

我尝试将其设置为背景，但图像没有出现在背景中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:45:34.650

我是 CSS 等的新手。但经过一番搜索，我发现以下文章是在图像上叠加文本。它可能对像我这样的新客栈 CSS 的人有用。 [http://www.techrepublic.com/article/superimpose-text-over-an-image-by-using-css-styled-text/5169871](http://www.techrepublic.com/article/superimpose-text-over-an-image-by-using-css-styled-text/5169871)。

上述技术对我有用。所以接受这个作为答案，以防其他人想尝试相同的技术。

# html - 彼此相邻的绝对 div

> ID：11476560
> 
> 赞同：8
> 
> 时间：2012-07-13T18:51:01.417
> 
> 标签：html, css

在我的 html 页面中，我在一个容器 div 中有两个 div。两个内部 div 有一个“位置：绝对”。因为它们必须放在容器 div 的左下角。

当容器 div 只有一个内部 div 时，这很有效。但是当我添加第二个 div 时，第二个 div 被放置在第一个内部 div 的顶部。这当然是有道理的。但现在我正试图找到一种方法让它们彼此相邻而不是彼此重叠。

生成内部 div。所以我不能手动为他们添加 ID。他们只有一个类名。

[示例](http://jsfiddle.net/sYGfq/)：

```
<div id="container">
    <div class="icon">ICON1</div>
    <div class="icon">ICON2</div>
</div> 
```

```
#container {
    position: relative;
    width: 200px;
    height: 200px;
    border: 1px solid red;
}

.icon {
    position: absolute;
    bottom: 0;
    left: 0;
    border: 1px solid green;
} 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T18:54:40.790

在包装元素上使用绝对定位而不是每个单独的图标，然后您可以在该容器中浮动或定位您喜欢的图标：

```
<div id="container">
    <div class="icon-wrapper">
      <div class="icon">ICON1</div>
      <div class="icon">ICON2</div>
    </div>
</div> 
```

```
#container {
    position: relative;
    width: 200px;
    height: 200px;
    border: 1px solid red;
}
.icon {
    border: 1px solid green;
    float:left;
}
.icon-wrapper {
    position: absolute;
    bottom: 0;
    left: 0;
} 
```

演示：http: [//jsfiddle.net/sYGfq/3/](http://jsfiddle.net/sYGfq/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:57:22.427

如果只有 2 个，您可以在 css 中使用 :first-child 或 :last-child ，无需添加额外的 html。几行css就可以搞定

例如这里[http://jsfiddle.net/sYGfq/6/](http://jsfiddle.net/sYGfq/6/)

最后一个孩子的 CSS

```
.icon:last-child {
    left: 200px;
    border: 1px solid green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T08:21:02.553

将两个 div 放入表格中的单独单元格中，从表格中删除所有边框和填充，并将其绝对定位在父 div 的左下角。

```
<div id="container">
<table class="none" id="table1">
<tr class="none">
<td class="none">
<div class="icon">ICON1</div>
</td>
<td class="none">
<div class="icon">ICON2</div>
</td>
</tr>
</table>
</div> 
```

* * *

```
#container {
    position: relative;
    width: 200px;
    height: 200px;
    border: 1px solid red;
}

.icon {
    border: 1px solid green;
}

.none {
    border: 0;
    padding: 0;
}

#table1 {
    position: absolute;
    bottom: 0;
    left: 0;
} 
```

快！

# bash - Bash检查启动时文件是否存在

> ID：11476563
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:51:10.247
> 
> 标签：bash

我正在尝试在 Debian 机器上运行 BASH 脚本。如果我之前复制到隐藏文件的mac地址与机器的实际MAC地址匹配，或者如果文件存在而不是机器应该启动，则该脚本应该在每次启动时运行（所以我将`.sh`文件放入）。如果其中任何一个条件不成立，则机器应关闭。`/etc/init.d``.mac.txt``.mac.txt`

这是我的脚本：

```
#!/bin/bash
output="'cat /root/.mac.txt'";
mac="'/sbin/ifconfig | grep 'eth0' | tr -s ' ' | cut -d ' ' -f5'"
if ["$mac" = "$output" ] || [ -f /root/.mac.txt]
then
echo "Server will start"
else
shutdown -h now
fi 
```

如果 mac 地址不正确，机器会关闭，但如果我删除`.mac.txt`文件，它不会。我是否犯了一些逻辑或语法错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:20:55.383

稍作修改的版本：

```
#!/bin/bash
macfile='/root/.mac.txt'
mac=$(/sbin/ifconfig | grep 'eth0' | tr -s ' ' | cut -d ' ' -f5)

# Shut down if file does not exist
if [ ! -f $macfile ]; then
    shutdown -h now
fi

# Verify MAC address against cached value
output=$(cat $macfile)
if [ "$mac" = "$output" ]; then
    echo "Server will start" 
else 
    shutdown -h now 
fi 
```

解释：

*   在读取文件*之前测试文件是否存在*
*   " `[`" 和 " `]`" 字符前后必须有空格
*   运行子命令时，使用`$( ... )`语法而不是反引号

# sql-server-2008 - 如何在多对多映射表中有效地创建数据的逻辑子集？

> ID：11476566
> 
> 赞同：6
> 
> 时间：2012-07-13T18:51:21.997
> 
> 标签：sql-server-2008, tsql, many-to-many, aggregate-functions

我在发票和信用卡交易之间存在多对多关系，我试图将它们的总和映射在一起。思考这个问题的最好方法是将 TransactionInvoiceMap 想象成一个二分图。对于每个连接的子图，找到该子图中所有发票的总数和所有交易的总数。在我的查询中，我想返回为每个子图计算的值以及它们关联的事务 ID。关联交易的合计应相同。

更明确地说，给定以下交易/发票

```
Table: TransactionInvoiceMap
TransactionID  InvoiceID
1              1
2              2
3              2
3              3

Table: Transactions
TransactionID  Amount
1              $100
2              $75
3              $75

Table: Invoices
InvoiceID  Amount
1          $100
2          $100
3          $50 
```

我想要的输出是

```
TransactionID  TotalAsscTransactions TotalAsscInvoiced
1              $100                  $100
2              $150                  $150
3              $150                  $150 
```

请注意，发票 2 和 3 以及交易记录 2 和 3 是逻辑组的一部分。

这是一个显然有效但速度很慢的解决方案（简化，名称已更改）。我很难弄清楚如何优化它，但我认为这将涉及消除 TransactionInvoiceGrouping 中的子查询。随意提出一些完全不同的建议。

```
with TransactionInvoiceGrouping as (
    select 
        -- Need an identifier for each logical group of transactions/invoices, use
        -- one of the transaction ids for this.
        m.TransactionID,
        m.InvoiceID,
        min(m.TransactionID) over (partition by m.InvoiceID) as GroupingID
    from TransactionInvoiceMap m
)
select distinct
    g.TransactionID,
    istat.InvoiceSum as TotalAsscInvoiced,
    tstat.TransactionSum as TotalAsscTransactions
from TransactionInvoiceGrouping g
    cross apply (
        select sum(ii.Amount) as InvoiceSum
        from (select distinct InvoiceID, GroupingID from TransactionInvoiceGrouping) ig
            inner join Invoices ii on ig.InvoiceID = ii.InvoiceID
        where ig.GroupingID = g.GroupingID
    ) as istat
    cross apply (
        select sum(it.Amount) as TransactionSum
        from (select distinct TransactionID, GroupingID from TransactionInvoiceGrouping) ig
            left join Transactions it on ig.TransactionID = it.TransactionID
        where ig.GroupingID = g.GroupingID
        having sum(it.Amount) > 0
    ) as tstat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:26:07.890

我已经在[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28SQL.105%29.aspx)中实现了该解决方案：

```
;with TranGroup as (
    select TransactionID
        , InvoiceID as NextInvoice
        , TransactionID as RelatedTransaction
        , cast(TransactionID as varchar(8000)) as TransactionChain
    from TransactionInvoiceMap
    union all
    select g.TransactionID
        , m1.InvoiceID
        , m.TransactionID
        , g.TransactionChain + ',' + cast(m.TransactionID as varchar(11))
    from TranGroup g
        join TransactionInvoiceMap m on g.NextInvoice = m.InvoiceID
        join TransactionInvoiceMap m1 on m.TransactionID = m1.TransactionID
    where ',' + g.TransactionChain + ',' not like '%,' + cast(m.TransactionID as varchar(11)) + ',%'
)
, RelatedTrans as (
    select distinct TransactionID, RelatedTransaction
    from TranGroup
)
, RelatedInv as (
    select distinct TransactionID, NextInvoice as RelatedInvoice
    from TranGroup
)
select TransactionID
    , (
        select sum(Amount)
        from Transactions
        where TransactionID in (
            select RelatedTransaction
            from RelatedTrans
            where TransactionID = t.TransactionID
        )
    ) as TotalAsscTransactions
    , (
        select sum(Amount)
        from Invoices
        where InvoiceID in (
            select RelatedInvoice
            from RelatedInv
            where TransactionID = t.TransactionID
        )
    ) as TotalAsscInvoiced
from Transactions t 
```

可能有一些优化空间（包括我的对象命名！）但我相信我至少有一个正确的解决方案，它将收集所有可能的交易发票关系以包括在计算中。

我无法在此页面上获得现有解决方案以提供 OP 所需的输出，并且随着我添加更多测试数据，它们变得更加丑陋。我不确定 OP 发布的“慢”解决方案是否如所述正确。我很可能误解了这个问题。

**附加信息：**

我经常看到在处理大量数据时递归查询可能会很慢。也许这可能是另一个 SO 问题的主题。如果是这种情况，在 SQL 端尝试的事情可能是限制范围（添加`where`子句），索引基表，首先将 CTE 选择到临时表中，索引该临时表，为 CTE 考虑更好的停止条件...但首先是个人资料，当然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:30:08.350

如果我正确理解了这个问题，我认为您正在尝试找到每张发票的最小交易 ID，并且我已经使用排名功能来做同样的事情。

```
WITH TransactionInvoiceGrouping AS (
SELECT 
    -- Need an identifier for each logical group of transactions/invoices, use
    -- one of the transaction ids for this.
    m.TransactionID,
    m.InvoiceID,       
    ROW_NUMBER() OVER (PARTITION BY m.InvoiceID ORDER BY m.TransactionID ) AS recno
FROM TransactionInvoiceMap m
)
 SELECT 
g.TransactionID,
istat.InvoiceSum AS TotalAsscInvoiced,
tstat.TransactionSum AS TotalAsscTransactions
 FROM TransactionInvoiceGrouping g
CROSS APPLY(
    SELECT SUM(ii.Amount) AS InvoiceSum
    FROM TransactionInvoiceGrouping ig
        inner JOIN Invoices ii ON ig.InvoiceID = ii.InvoiceID
    WHERE ig.TransactionID = g.TransactionID
    AND ig.recno = 1
) AS istat
CROSS APPLY(
    SELECT sum(it.Amount) AS TransactionSum
    FROM TransactionInvoiceGrouping ig
        LEFT JOIN transactions it ON ig.TransactionID = it.TransactionID
    WHERE ig.TransactionID = g.TransactionID
    AND ig.recno = 1
    HAVING SUM(it.Amount) > 0
) AS tstat

WHERE g.recno = 1 
```

# mysql - 我的架构中是否需要第三个表

> ID：11476572
> 
> 赞同：0
> 
> 时间：2012-07-13T18:51:48.487
> 
> 标签：mysql, sql, schema

场景：每个**“订单”**只能有一个**“导入文件”**。所以我创建了一个表，其主要列为 *order_code* 和 *file_code* (Order_File Table) 每个**“订单”**可以有多个**“基因”**。所以我创建了另一个表，其主要列是**order_code**和**gene_code**。( Order_Gene 表)

所以现在在前端，用户从组合框中选择一个“订单”，我们显示该订单的导入文件和该订单的基因列表。

我想知道你对这个架构设计的看法，如果我设计错了还是正确的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:01:11.430

如果我理解正确的话，这听起来是对的。导入文件是订单的一个属性，Genes 表是一对多关系的多方面，允许许多基因与一个订单相关联，但每个基因只能与一个订单相关联。

如果您想将许多基因与许多订单相关联（即基因表中的“重用”记录用于多个订单），您需要创建一个带有 order_code 和 gene_code 列的“链接表”，并为每个订单创建一个记录两个表之间的链接或关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:57:31.847

如果每个订单代码都是唯一的，那么您正在谈论的设计将起作用。

# php - PHP iframe 应用程序 - 应用程序不会为“普通”用户加载内容，而是为“管理员”加载内容

> ID：11476580
> 
> 赞同：0
> 
> 时间：2012-07-13T18:52:02.620
> 
> 标签：php, facebook, iframe, sdk

我刚刚为粉丝页面编写了一个非常简单的 PHP 脚本。当我测试它时，该脚本对我来说很好。其他用户抱怨说他们只看到一个空白页面。

```
<?php
require_once 'facebook.php';  
$app_id = "xxx";
$app_secret = "xxx";  
$facebook = new Facebook(array(  'appId' => $app_id,  'secret' => $app_secret,  'cookie' => true  ));    
$signed_request = $facebook -> getSignedRequest();    
$country = $signed_request["user"]["country"];  
$locale = $signed_request["user"]["locale"];

if($locale == "de_DE") {
echo "<img src='1.jpg'>";}
else {
echo "<img src='2.jpg'>";}
?> 
```

你知道我在哪里犯了错误吗？

干杯，

本

# multithreading - 在 CRCW 线程模型中实现并发写入

> ID：11476583
> 
> 赞同：1
> 
> 时间：2012-07-13T18:52:18.657
> 
> 标签：multithreading

用于并行计算的 PRAM 模型主要分为三种类型：EREW、CREW、CRCW。

我可以理解如何在多核机器上实现 EREW、CREW。但是如何在多核 CPU 上实现 CRCW 模型呢？它甚至是一个实用的模型吗，因为并发写入是不可能的，而且每个基本的并行编程课程都会详细介绍竞争条件。

从本质上讲，这意味着尝试避免竞争条件和尝试实现并发写入是两个相反的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:46:20.847

**首先**：我们知道 PRAM 是一个理论上的或抽象的机器。进行了一些简化，以便可以将其用于分析/设计并行算法。

**接下来**，让我们谈谈*有意义地*进行“并发写入”的方式。

并发写入内存通常根据它们的行为方式分为**子类：**

1.  **基于优先级的 CW** - 处理器具有优先级，如果对同一位置的多个并发写入到达，则来自最高优先级的处理器的写入将提交到内存。

2.  **任意 CW** - 任意选择一个处理器的写入进行提交。

3.  **Common CW -***仅当*写入的值相同时，才会提交对同一位置的多个并发写入。即所有写入处理器必须就写入的值达成一致。

4.  **缩减 CW** - 对正在写入的多个值应用缩减运算符。例如*summation*，其中对同一位置的多个并发写入导致要写入内存的值的总和。

这些子类导致了**一些有趣的算法**。我在课堂上记得的一些例子是：

1.  以求和形式实现并发写入的 CRCW-PRAM可以在单个时间步中对任意数量的整数*求和。*输入数组中的每个整数都有一个处理器。所有处理器都将它们的值写入*相同*的位置。完毕。

2.  想象一个 CRCW-PRAM，其中仅当所有处理器写入的值相同时，内存才会提交并发*写入*。现在想象`N`numbers `A[1] ... A[N]`，你需要找到它的最大值。以下是你的做法：

第1步。

N ^(2 个)处理器将每个值与其他值进行比较，并将结果写入 2D 数组：

```
parallel_for i in [1,N]
  parallel_for j in [1,N]
    if (A[i] >= A[j])
      B[i,j] = 1
    else
      B[i,j] = 0 
```

所以在这个二维数组中，对应于最大数字的列将全为 1。

第2步：

找到只有 1 的列。并将对应的值存储为最大值。

```
parallel_for i in [1,N]
  M[i] = 1
  parallel_for j in [1,N]
    if (B[i,j] = 0)
      M[i] = 0              // multiple concurrent writes of *same* value
  if M[i]
    max = A[i] 
```

最后，**是否可以真正实施**？

是的，有可能。比如说，设计一个寄存器文件，或者一个内存和相关的逻辑，它有多个写端口，并以一种有意义的方式（就像我上面描述的方式）仲裁对同一地址的并发写入是可能的。您可能已经根据我提到的子类看到了这一点。实用与否，我不敢说。我可以说，在我有限的计算机经验中（主要涉及使用通用硬件，比如我现在坐的 Core Duo 机器），我还没有在实践中看到过。

**编辑：**我*确实*找到了一个 CRCW 实现。PRAM 上的维基百科文章描述了一种 CRCW 机器，它可以在 2 个时钟周期内找到数组的最大值（使用与上述相同的算法）。[描述在 SystemVerilog 中，可以在 FPGA 中实现。](http://en.wikipedia.org/wiki/Parallel_Random_Access_Machine#Example_code)

# wpf - 将 WPFToolkit DatePickerTextBox 控件重写为自定义组合框控件

> ID：11476586
> 
> 赞同：0
> 
> 时间：2012-07-13T18:52:27.570
> 
> 标签：wpf, wpf-controls, wpftoolkit

我想使用 WPFToolkit DatePicker 将日期插入到我的组合框中。默认情况下，DatePicker 带有日期文本框。我知道 WPFToolkit 有用于文本框的 DatePickerTextBox 控件。我想将它覆盖到 ComboBox 控件中。我不知道如何覆盖此控件。

我有一个控件，该控件在组合框选项中具有一些默认日期参数，例如一年前、2011、2010、2009 等。当我从日期选择器中选择特定日期时，我想将该日期显示到组合框控件中。

我希望这个问题很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:10:52.230

您将无法直接覆盖此控件。我可以提出的唯一建议是使用该控件和 ComboBox SelectedValue 属性之间的 ElementName 绑定来获得所需的行为。

之后，如果您确实确定可以替换 DatePickerTextBox 控件的默认样式模板以隐藏 TextBox 元素，并将您的 ComboBox 放在 UI 中您想要的任何位置，使其看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:08:50.707

我在 WPFToolkit 中找到了日历控件。我在 MenuItem 控件中使用日历控件和组合框。它将与 DatePicker 控件相同，但我将使用带有其他选项的组合框而不是文本框。

它满足了我拥有 ComboBox 和 DatePicker 的目的。

# html - 从 .png 文件中获取颜色的 HTML 颜色代码？

> ID：11476589
> 
> 赞同：0
> 
> 时间：2012-07-13T18:52:40.323
> 
> 标签：html, colors

我有一个包含颜色的 .png 文件，是否可以使用任何工具/软件/网站找到它的等效 HTML 颜色代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:01:15.567

您可以使用[Color Spy 之](http://download.cnet.com/Color-Spy/3000-10247_4-10161718.html)类的工具从图像中获取颜色代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:01:36.040

是的，您可以使用 firefox 插件“colorzilla”。

[http://www.colorzilla.com/](http://www.colorzilla.com/)

它有一个吸管，在使用时，HTML 颜色将被复制，然后可以粘贴到某处作为#xxxxxx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:14:02.013

这是js：

```
var x=0,y=0;//Coordinates of the pixel of which you want to have the color

var img=new Image();
img.onload=function()
{
    var canvas=document.createElement('canvas');
    canvas.setAttribute("width",1);
    canvas.setAttribute("height",1);
    canvas.setAttribute("style","display:none;");
    document.body.appendChild(canvas);
    var ctx=canvas.getContext('2d');
    ctx.drawImage(img,x-1,y-1);
    var pixels=ctx.getImageData(0,0,1,1);
    var r=pixels.data[0];
    var g=pixels.data[1];
    var b=pixels.data[2];
    var a=pixels.data[3];
    alert("rgb("+r+", "+g+", "+b+")\nrgba("+r+", "+g+", "+b+", "+a+")\n");
}
img.src="../img/logo.png"; 
```

还有一个小提琴：http: [//jsfiddle.net/Sqjj9/5/](http://jsfiddle.net/Sqjj9/5/)

# iphone - ios uiscrollview with pagingenabled between uiimageviews 如何检测哪一个在屏幕上/可见

> ID：11476593
> 
> 赞同：1
> 
> 时间：2012-07-13T18:52:48.683
> 
> 标签：iphone, ios, uiscrollview, uiimageview, paging

所以我有一个 UIScrollview，它可以水平滚动并通过一堆包含用户头像的不同 UIImageViews 进行分页。但是，我只想从他们实际显示在屏幕上的 URL IFF 加载头像（一次显示 4 个，但我可以滚动浏览 30 个或更多或更少）。**有没有办法检测它在哪个 UIImageView/哪个页面上？或者有没有人对我应该如何解决这个问题有任何一般性的建议或想法？**先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:00:27.927

~~-(void)scrollViewDidScroll:(UIScrollView *)scrollView{~~

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
        CPoint offset = scrollView.contentOffset;
        int index = offset.x / pageWidth;
        switch (index) {
            case 0:
                //first ImageView
                break;
            case 1:
                //second ImageView
                break;
            default:
                break;
        }
    } 
```

Or If you tag your imageViews (starting at 1) you can retrieve them via:

~~-(void)scrollViewDidScroll:(UIScrollView *)scrollView{~~

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
    CPoint offset = scrollView.contentOffset;
    int index = offset.x / pageWidth;
    UIImageView *visibileImageView = (id)[scrollView viewWithTag:index+1];
} 
```

You can use scrollViewDidScroll to detect the position at any point if you use the modulus:

```
int index = (offset.x - offset.x % pageWidth)/pageWidth; 
```

# c# - 从生成的位图图像创建视频 c#

> ID：11476597
> 
> 赞同：2
> 
> 时间：2012-07-13T18:52:59.870
> 
> 标签：c#, wpf, video, bitmap

我正在尝试使用 openCVSharp 播放位图图像流以从 YUV 生成位图。但我无法将其显示为视频。

[我在这里](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library/)找到了一些关于将其用作 AVI 包装器的链接，还有一些可以保存在硬盘上的链接，比如[这里](https://stackoverflow.com/questions/9607712/create-video-from-streamed-images-c-sharp/)，FFMPEG 在 LINUX 上可能工作得很好，但在 Windows 中不是很好。

我什至尝试使用以下代码。但它只显示序列中的最后一帧，并且我没有使用 MediaElement 的 URI，因为位图是由我的程序生成的。

```
image.source = ToBitmapSource(bitmapImage); 
```

在哪里

```
public static BitmapSource ToBitmapSource(System.Drawing.Bitmap bitmap){
    IntPtr ip = bitmap.GetHbitmap();
    BitmapSource bs = null;

    bs = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(ip,
    IntPtr.Zero, System.Windows.Int32Rect.Empty,
    System.Windows.Media.Imaging.BitmapSizeOptions.FromEmptyOptions());

    return bs;
} 
```

我正在尝试播放视频（类似于流媒体）而不将其保存在计算机上。直接展示是必须的吗？我非常需要你的帮助，我的截止日期快到了！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-13T19:30:51.603

您可以使用[DispatcherTimer](http://msdn.microsoft.com/en-gb/library/system.windows.threading.dispatchertimer.aspx)（相当于 Winform 中的 Timer）：

```
DispatcherTimer dt = new DispatcherTimer();
dt.Interval = 25;  //25 ms --> 50 frames per second
dt.Tick += delegate(object sender, EventArgs e){

             //get the image and display it

          }

dt.Start(); //to start record 
```

# git - 初始化空 git 存储库

> ID：11476600
> 
> 赞同：3
> 
> 时间：2012-07-13T18:53:12.387
> 
> 标签：git, heroku, version-control

我在这个命令提示符下尝试了 Heroku 上的第一个示例 Facebook 应用程序，我这样写

```
1)$git remote  
2)$git remote add heroku git@heroku.com:stellent.git 
```

像这样的回应

```
not a repository (or any of the parent directories): git 
```

我输入`$git init` 响应是

```
initialized  empty git repository in C 
```

有没有办法找到正确的回应

谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:20:28.043

您是否首先克隆了您的应用程序？如果你这样做了，它将创建一个目录 -`git remote`在该目录中发出命令。我猜你正在按照[这里](https://devcenter.heroku.com/articles/facebook)的说明进行操作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:48:26.543

创建一个目录并进入它：

```
mkdir project
cd !$ 
```

将其初始化为 git repo

```
git init 
```

现在你可以运行你的远程命令了

# excel - 如何匹配具有 2 个单独匹配列的行

> ID：11476601
> 
> 赞同：3
> 
> 时间：2012-07-13T18:53:12.913
> 
> 标签：excel, excel-formula, excel-2010, vba

我有 4 列，从 A 到 D。我需要找到每行中 C 列相同且每行中 D 列相同的行。最好在 E 列中放置一个 True 或 False 值。VBA 或公式有效，尽管我认为这样的事情可以通过公式来实现。

例如，我有以下内容：

第 1 行 XX 123 XYZ
第 2 行 XX 234 XYZ
第 3 行 XX 234 YZX
第 4 行 XX 234 YZX

在本例中，第 1 行和第 2 行的 E 列为 False，第 3 和第 4 行的 E 列为 True。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:09:15.660

这是你正在尝试的吗？

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, i As Long

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("C" & .Rows.Count).End(xlUp).Row

        For i = 1 To lRow
            If i = 1 Then
                If .Range("C" & i).Value = .Range("C" & i + 1).Value And _
                .Range("D" & i).Value = .Range("D" & i + 1).Value Then _
                .Range("E" & i).Value = "True" Else .Range("E" & i).Value = "False"
            Else
                If (.Range("C" & i).Value = .Range("C" & i + 1).Value And _
                .Range("D" & i).Value = .Range("D" & i + 1).Value) Or _
                (.Range("C" & i).Value = .Range("C" & i - 1).Value And _
                .Range("D" & i).Value = .Range("D" & i - 1).Value) Then _
                .Range("E" & i).Value = "True" Else .Range("E" & i).Value = "False"
            End If
        Next i
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/25746e0c026ffa6024afcfae219a92ad.png)

# php - PHP IF 语句上的 MySQL 'NULL'：如何编写？

> ID：11476608
> 
> 赞同：2
> 
> 时间：2012-07-13T18:53:31.570
> 
> 标签：php, mysql

> **可能重复：**
> [如何检查 mysql 是否返回 null/empty](https://stackoverflow.com/questions/1693428/how-to-check-if-mysql-returns-null-empty)

我有结果为“NULL”或“0”的 SQL 命令（2 个表之间的左连接）。现在我想创建这样的 PHP 条件：

```
if ($rowSearch['Approved'] == NULL) 
```

但它失败了......然后我尝试了这个

```
if ($rowSearch['Approved'] == 'NULL') 
```

也失败了... PHP 总是跳过那个语句。如何为此编写 PHP IF 语句？之前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:56:52.153

如果需要区分、、、`NULL`和，`""`则需要使用严格比较。或者你可以使用. [此页面上的表格](http://www.php.net/manual/en/types.comparisons.php)可能是相关的。`False``0``===``is_null()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:55:39.823

```
if ( empty($rowSearch['Approved']) && $rowSearch['Approved'] !== 0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:00:35.033

You need to compare with `===`

```
if ($rowSearch['Approved'] === null) 
```

# javascript - 按下回车时jquery UI对话框多个实例

> ID：11476622
> 
> 赞同：0
> 
> 时间：2012-07-13T18:54:29.157
> 
> 标签：javascript, jquery, jquery-ui

有类似的问题，但他们无法帮助我解决这个问题。

当对话框打开并按 Enter 键时，我希望这相当于关闭对话框。

我已经写了以下内容，但它不起作用。相反，在每次 ENTER 时，焦点都停留在触发对话框打开的元素上，从而产生多个实例。

谢谢

```
var $dialogError = $('<div id="dialogError"></div>').html(vGraph.getLastErrorMsg()).dialog({
    autoOpen: false,
    open: function() {
        $("#dialogError").keydown(function(e) {
            alert("enter");
            if (e.keyCode == $.ui.keyCode.ENTER) {
                $(this).dialog("close");
            }
        });
    },
    title: 'Error'
});
$dialogError.dialog('open');​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:59:28.243

也许在打开对话框后使用将焦点设置到 dialogError 元素`$('#dialogError').focus();`，这样焦点不再在打开对话框的元素上，它会捕获回车键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:02:22.657

```
$(document).on('keypress', function(event) {
    if (event.keyCode == $.ui.keyCode.ENTER) {
        $('#dialogError').dialog('close');    
    }
});​ 
```

This will work regardless of whether the dialog has focus or not which is probably what you want. This code will execute when the dialog is not open, but running `$('#dialogError').dialog('close');` will have no adverse effects.

**Example** - [http://jsfiddle.net/tj_vantoll/x32zC/1](http://jsfiddle.net/tj_vantoll/x32zC/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:57:41.323

尝试`false`从`keydown`处理程序返回：

```
`open: function() {
    $("#dialogError").keydown(function(e) {
        alert("enter");
        if (e.keyCode == $.ui.keyCode.ENTER) {
            $(this).dialog("close"); 
            return false;
        }
    });
},` 
```

# java - 如何设置这个 gui

> ID：11476625
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:54:45.007
> 
> 标签：java, blackberry, blackberry-jde

我很难设置这个 GUI

![在此处输入图像描述](../Images/0a525a960e80746e027ce82af2bc30ad.png)

正如您在图片中看到的那样，我需要有几个可点击的项目，但我不知道该怎么做。所以我想我可以做一个不同`VerticalFieldManager`的代表白色背景。但看起来不可能有两个`VerticalFieldManager`以上的主要经理。所以我想我可以使用 a`LabelField`并将背景颜色更改为白色（它也不起作用）并在它上面放置可点击的标签和可点击的 textField 但我没有让背景`VerticalFieldManager`自行重复并将其置于前一个下方他们之间的微小差距。无论如何，你们能给我一些关于如何完成这个 GUI 的想法，用什么作为背景。

在此先感谢您，祝您愉快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:11:49.250

我建议以下布局

![在此处输入图像描述](../Images/c78356fbb397946c793e6187f65ba750.png)

*   屏幕委托应该是`VerticalFieldManager`
*   每个项目也应该`VerticalFieldManager`是
*   项目本身的主体应该是`RichTextField`
*   您提到的其余可点击元素应该是 clickable `Label`。
*   您还必须使用`HorizontalFieldManager`s。一个用于顶部面板，一个用于底部面板。`JustifiedHorizontalFieldManager`从高级 UI 库中检查。

至于可点击标签 - 很容易实现。搜索“[黑莓]可点击标签”。您还可以查看BlackBerry 高级 UI 库中提供的`BaseButtonField`和[在此处](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)提供的。`BitmapButtonField`

# java - java RandomUtils 我需要包括什么？

> ID：11476626
> 
> 赞同：0
> 
> 时间：2012-07-13T18:54:45.127
> 
> 标签：java, eclipse

我正在使用 eclipse 并且必须没有正确的导入语句，我需要使用 RandomUtils 什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:56:11.397

apache`commons.jar`应该在你的类路径中。

[RandomUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/math/RandomUtils.html)不是 sun java 的默认类。从 apache 网站下载 apache commons 并将其添加到您的类路径中。然后进行导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:56:43.260

你需要

```
 import org.apache.commons.lang.math.RandomUtils; 
```

在使用该类的任何类文件中。

您还需要确保 Apache Commons jar 在您的构建路径中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:59:25.833

检查[http://www.jarfinder.com](http://www.jarfinder.com)

# windows - 在 Windows 中编写 Qt3D 应用程序

> ID：11476630
> 
> 赞同：0
> 
> 时间：2012-07-13T18:55:01.710
> 
> 标签：windows, visual-c++, qt4, qt3d

我将在 Windows 中编写 Qt3D 应用程序。我还安装了必要的工具，但编译后我收到“未解析的外部符号”错误。解决办法是什么？

注意：我的编译器是 microsoft visual c++ 9.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:58:59.450

您是否正在链接 Qt3D 库？如果你不这样做 - 这就是你的问题的原因。打开您的项目并将必要的 .lib 文件添加到库列表中（不要忘记使用完整的，最好是相对路径，或者将其他库路径添加到项目的库路径列表中）

# iphone - xcode 验证错误：应用程序可执行文件缺少所需的体系结构

> ID：11476632
> 
> 赞同：0
> 
> 时间：2012-07-13T18:55:10.820
> 
> 标签：iphone, xcode, cocos2d-iphone

我们的客户也报告了与此处讨论的相同错误：[单击此处](https://stackoverflow.com/questions/4198676/warning-iphone-apps-should-include-an-armv6-architecture-even-with-build-config)。没有一个解决方案能解决我的问题……可能是我做错了地方……………………..

错误：iPhone/iPod Touch：应用程序可执行文件缺少所需的架构。必须至少存在以下架构中的一个：armv6 …………</p>

帮助我在 plist 和 Xcode 目标中设置正确的设置。操作系统支持 iOS 4.3 及更高版本和 iPhone/iPad/iPod 设备。

这是示例 Xcode 项目： http: [//po.st/0fc5AU](http://po.st/0fc5AU)

请更新此示例并发送给我。我尝试了很多，但对所有解决方案感到困惑......再次报告了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:12:42.583

添加

```
 armv6 armv7 
```

到目标的架构和有效架构构建设置。

PS：如果您使用的是 cocos2d v2.x，这将不起作用，它不适用于 armv6 设备，因为它们仅支持 OpenGL ES 2.0。

# java - Android java从现有位图创建新的平铺位图

> ID：11476635
> 
> 赞同：0
> 
> 时间：2012-07-13T18:55:18.747
> 
> 标签：java, android, bitmap, imageview

好的，这就是我想要做的。我有一个应用程序可以加载带有我想用作手机背景（而不是应用程序背景）的图案的小位图图像问题是当我现在使用墙纸管理器将其设置为墙纸时，它会拉伸图像并且看起来很糟糕。无论如何我可以a）使用墙纸管理器平铺图像，使其看起来不错，或者b）从小位图创建另一个平铺位图并使用它。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:59:53.770

找到屏幕的尺寸。如果您没有 Photoshop，请使用[http://pixlr.com/editor/](http://pixlr.com/editor/)编辑图片。

# xcode - ipad表格视图行插入图标在哪里

> ID：11476636
> 
> 赞同：0
> 
> 时间：2012-07-13T18:55:30.233
> 
> 标签：xcode, icons, tableview

我一直在我的 Mac 上搜索 .png 文件，寻找 iPad 表格视图行插入图标（绿色背景上的白色加号，被灰色圆圈包围）。我想在插入记录的自定义表格视图中使用它。是否可以在我的计算机上找到来自 Apple 的特定图标？是否不容易找到可能我不应该使用它的提示？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:12:38.403

您正在寻找`UITableViewCellEditingStyleInsert`按钮：

![UITableViewCellEditingStyleInsert](../Images/3c10dd9e3c9cd525d0b38a956faf532f.png)

# c# - 从传统的 ASP 转移。NET MVC 到 WebApi + 淘汰赛

> ID：11476638
> 
> 赞同：6
> 
> 时间：2012-07-13T18:55:35.570
> 
> 标签：c#, asp.net-mvc-3, knockout.js, asp.net-mvc-4, asp.net-web-api

我刚刚阅读了一篇有趣的文章，关于 Microsoft 似乎正在朝着 REST 接口 + 客户端基于 javascript 的 Web 应用程序 MVVM 开发方向发展。

尽管我在技术上理解这两种模型之间的基本区别，但对于它对我如何编写 Web 应用程序以及最重要的是如何优雅地过渡到这个新模型的影响，我完全感到困惑。

因此，对于从传统 ASP.NET MVC 迁移到 WebApi + KO 的人来说，会出现以下问题：

*   有没有办法使用 MVC + KO 进行不显眼或近乎不显眼（即最少的代码）验证？
*   如何对他的 UI 代码进行单元测试？
*   浏览器兼容性是否会受到 KO 的影响？
*   从一种模型转移到另一种模型时，还有什么其他人需要考虑的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:07:14.760

您会看到 Microsoft 开始推动这种“单页 Web 应用程序”，部分原因是它可以提供更好的用户体验，但主要是因为它可以更轻松地将您的 Web 应用程序迁移为 Windows 8 原生应用程序。

回复：用于验证的不显眼的 javascript... 我会说，如果您使用 Knockout，那么您就是 UI 并且您的脚本将如此紧密地耦合，即使只是对于基本的东西，不显眼真的不是一个有效的目标。您可以在 Knockout 中进行验证（例如，参见[https://github.com/ericmbarnard/Knockout-Validation#readme](https://github.com/ericmbarnard/Knockout-Validation#readme)），但它与 ASP.NET MVC 的定义相同

回复：单元测试...看看[https://stackoverflow.com/questions/6331789/knockoutjs-unit-testing-with-qunit](https://stackoverflow.com/questions/6331789/knockoutjs-unit-testing-with-qunit)

回复：浏览器兼容...我不知道与任何现代浏览器有任何兼容性问题，除非您有禁用 JavaScript 的疯狂用户

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T10:50:41.663

我发现[这](http://userinexperience.com/?p=633)是一个很好的讨论，讨论了尝试在 Knockout 网站上“不引人注目”的利弊。

传统上，我非常赞成让 Javascript 尽可能不显眼，并且通过我的 Knockout 表达式，我尝试通过将任何繁重的工作转移到我的视图模型上的函数并创建封装 DOM 的自定义绑定来尽可能地保持它们最小和整洁逻辑 - 但我坚信声明性方法本身（例如使用 data-bind 属性的默认值），当合理使用时，是要走的路。

可能是因为我对 Knockout 的介绍是我工作的 WPF 应用程序的 Web 应用程序“端口”，当我了解更多关于如何优雅地利用 Knockout 时，我的网站的 Knockout 绑定变得惊人地接近它们的 XAML 等效项。我只是喜欢能够通过眼球标记一目了然地看到围绕如何评估视图的真实业务逻辑，而不是 jQuery 或任何物理构建它以响应在一个大灵魂中破坏 Javascript 的一些点击事件的具体细节文件。

当我重新访问我的一些传统 MVC 站点时，这些站点利用大量程序 jQuery 来连接事物，我认为，是的，标记很整洁，但是在 6 个月后回到它，即使我很难理解我对所有这些 jQuery 的意图是什么选择器、回调和 DOM 遍历。我想我只会在必要时动态地应用 Knockout 绑定本身，即如果存在我的绑定逻辑本身是动态的情况 - 但无论如何，这可能通过动态模板以不同的方式完成。

这是我对您问题的不显眼方面的 2 美分，如果您在过去几个月中迁移到 MVVM Javascript 的经历与我的类似，那么您将不会回头。

# java - 无法在 Java/Groovy 中创建 zip 文件

> ID：11476641
> 
> 赞同：0
> 
> 时间：2012-07-13T18:55:59.937
> 
> 标签：java, groovy, io, zip, zipfile

我尝试了多种方法在 Java/Groovy 中创建这个 zip 文件。我从各种博客/帖子中尝试的前几种方法导致损坏的 zip 文件无法打开。所以，我尝试了这个（如下），它看起来很有希望。sysouts 报告传递给 FileInputStream 的有效文件路径。我不确定是否是传递给 ZipOutputStream 的 FQ 路径导致了问题。无论哪种方式，下面都是代码，它会创建一个小的 (188kb) zip 文件（没有条目）。有什么建议么？

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Set;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

class FileZipper {

    public static void makeZip(Set fullyQualifiedFileNames, String zipFileName, String outDir) throws IOException, FileNotFoundException
    {
        // These are the files to include in the ZIP file
        Object[] filenames = fullyQualifiedFileNames.toArray();
        String fileSeparator =  (String) System.getProperties().get("file.separator");

        // Create a buffer for reading the files
        byte[] buf = new byte[1024];

        // Create the ZIP file
        String outFilename = outDir + fileSeparator +zipFileName;
        FileOutputStream fos = new FileOutputStream(outFilename);
        ZipOutputStream zos = new ZipOutputStream(fos);
        System.out.println("Zipping to file " +outFilename);
        // Compress the files

        for (Object fileName: filenames)
        {
            System.out.println("Adding file: " + fileName);
            FileInputStream fis = new FileInputStream((String)fileName);

            // Add ZIP entry to output stream.
            String[] nodes = ((String)fileName).split("[/[\\\\]]");
            String zipEntry = nodes[nodes.length-1];
            System.out.println("Adding Zip Entry: " + zipEntry);
            zos.putNextEntry(new ZipEntry((String)fileName));

            // Transfer bytes from the file to the ZIP file
            int len;
            int totalBytes = 0;
            while ((len = fis.read(buf)) > 0) 
            {
                totalBytes += len;
                zos.write(buf, 0, len);
            }
            System.out.println("Zipped " +totalBytes +" bytes");
            // Complete the entry
            zos.closeEntry();
            fis.close();
        }

        // Complete the ZIP file
        zos.close();
        fos.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T19:19:34.630

如果您使用的是 Groovy，最简单的方法是使用`AntBuilder`：

```
new AntBuilder().zip(
   destfile: "myfile.zip",
   basedir: "baseDir") 
```

或从 Groovy 1.8 开始：

```
ant.zip(destfile: 'file.zip', basedir: 'src_dir') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:10:57.723

您是否尝试过显式关闭底层 FileOutputStream 以确保所有数据都已刷新到磁盘？

```
FileOutputStream fos = new FileOutputStream(outFilename);
ZipOutputStream zos = new ZipOutputStream(fos);
...
zos.Close();
fos.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:26:44.957

我在本地运行您的代码，创建然后打开一个 zip 文件没有问题。

但是，我有时会在使用默认 Java 压缩实用程序时遇到奇怪的问题，因此我开始使用 Apache Commons 压缩，并且从那时起就毫不费力地使用了它。

查看[http://commons.apache.org/compress/index.html](http://commons.apache.org/compress/index.html)了解基本概述，查看[http://commons.apache.org/compress/examples.html](http://commons.apache.org/compress/examples.html)了解具体示例。

# objective-c - iOS ARC：ManagedObject 指针上的 OR 运算符

> ID：11476645
> 
> 赞同：0
> 
> 时间：2012-07-13T18:56:12.893
> 
> 标签：objective-c, ios, ios5

我正在使用`NSManagedObjects`，我想返回任务的预算或任务类别的预算。

但是，该方法给出了错误：

```
Implicit conversion of int to Budget * is disallowed with ARC. 
```

这里发生了什么？

```
@implementation Task

@dynamic category;
@dynamic budget;

- (Budget *)budgetOrCategoryBudget {
    return [self budget] || [[self category] budget];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:07:22.117

`||`是一个运算符，它接受两个对象或原语，`TRUE`如果至少有一个值是非零（如果是对象）或非零（如果是原语），则返回，`FALSE`否则返回。在 Objective-C 中，BOOL 实际上是一个 int，其中`FALSE`is`0`并且`TRUE`是任何非零的值。因此，您实际上返回的是编译器期望的 BOOL（由 int 表示）`Budget *`。

如果您想实际返回两个预算之一，您必须提供一些其他方式在它们之间进行选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:14:02.607

利用

```
return [self budget] ? [self budget] : [[self category] budget]; 
```

或更好

```
return ([self budget] != nil) ? [self budget] : [[self category] budget]; 
```

（假设您的意图是`[self budget]`如果存在则返回，否则`[[self category] budget]`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T19:11:19.930

打电话

`return anything || somethingElse`

将返回一个布尔值，托管对象类将其变为 1 或 0。如果要返回 [self budget] 或 [[self category] ​​budget]，请编写某种 if 语句：

```
if(condition){
   return [self budget];
}else{
   return [[self category] budget];
} 
```

# android - 创建通用类，其中包括整个应用程序中的页眉和页脚图标的意图

> ID：11476647
> 
> 赞同：2
> 
> 时间：2012-07-13T18:56:15.260
> 
> 标签：android, android-intent, android-activity

我遇到了一个不寻常的问题我有一个餐厅应用程序，其中包括固定在每个布局底部的菜单图标，我的问题是我不想为每个活动类上的每个图标创建 onsetclicklistner() 方法....请给一些建议，以便我可以创建一个通用类，我可以将所有页脚图标单击事件和活动放入其中，并在具有不同 setcontentview 的每个活动类中使用它...希望你们都能得到我的问题...期待你的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:56:04.063

您不需要以编程方式设置 onClickListeners。您还可以将它们放在布局 XML 中，如下所示：

```
<Button android:id="@+id/my_button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/my_button_text"
    android:onClick="myOnClick"
/> 
```

然后您可以声明一个包含此方法的基本活动类，如下所示：

```
public class BaseActivity extends Activity {
    public void myOnClick(View v)  {
        // Do whatever you want to do when the button is clicked
    }
} 
```

然后编写所有活动类，以便它们从 BaseActivity 而不是 Activity 派生。

# html - 在 HTML 电子邮件中隐藏字符串的最成功/最合适的方法是什么？

> ID：11476648
> 
> 赞同：1
> 
> 时间：2012-07-13T18:56:15.983
> 
> 标签：html, email, gmail, html-parsing

我需要在电子邮件的 HTML 中隐藏一个 30 个字符的字符串，这样当用户回复时，他们的回复可以在我们的服务器上链接到该 30 个字符的字符串。我们不想将字符串添加到用户可以看到的电子邮件主题或正文中。我们也不想隐藏会导致意外选择 30 个字符串的文本。

**问题：** 许多电子邮件客户端（如 gmail）将 HTML 电子邮件内容简化为基本标签，因此很难找到可以包含任意字符串的标签。这意味着我们不能创建任意标签，只能使用标准标签。

**我们最好的解决方案：** 隐藏电子邮件中表格的“标题”标签中的字符串，如下所示 -

```
<table title="30_character_string"> 
```

*上面的解决方案在大多数情况下都有效。大多数电子邮件客户端不会去掉标题标签，使其成为一个可行的选择。*

**为什么我们被卡住了：**这不是最好的解决方案，因为有时电子邮件客户端会变得非常严格，甚至会删除标题属性。

**你能帮我吗？**在 HTML 电子邮件正文中隐藏任意字符串的最成功方法是什么？这种链接有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:04:16.937

如果将值放入标记中，纯文本回复将不起作用。考虑一下电子邮件底部签名下方的“小字体”部分。

> 亲爱的用户，
> 
> 电子邮件内容
> 
> 问候，
> 
> 标志等
> 
> 回复标识符-xxxxxxxx。

如果您不关心，请在电子邮件底部添加一个 div（同样在 sig 下方）。再一次，它将位于电子邮件的底部，用户几乎不会在意查看。

```
<style>.hide{display:none;}</style>
<div style="display:none" class="hide">ReplyIdentifer-xxxxxxxx.</div> 
```

在这种情况下，您只有在电子邮件客户端删除 css AND 样式标签时才能看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:28:44.737

检查我收到的一些 HTML 电子邮件，Gmail 似乎允许`<head>`在电子邮件 HTML 中添加标签。您可以将信息包含在`<meta>`电子邮件头部的标签中。

您正在使用哪种类型的帐户阅读邮件？如果它也是 Gmail，您可以利用它们的功能，允许[在您的电子邮件地址中加号后使用缩写字符串](http://gmailblog.blogspot.co.uk/2008/03/2-hidden-ways-to-get-more-from-your.html)。覆盖您在外发邮件中设置的回复标头`youraddress+uniqueID@gmail.com`

**编辑：**尽管遵循电子邮件标题的行列（*感觉*这应该是正确的方法），如果您确保`Message ID`为每个发出的邮件副本生成一个唯一的`In-Reply-To`标题，那么您得到的标题back 对于该收件人和该消息应该是唯一的。Gmail 尊重邮件 ID 标头并提供适当的回复标头作为响应，大多数（所有？）主流客户端/服务也应如此

# .net - 每当我添加“NoResize”属性时，WPF 表单就会消失

> ID：11476649
> 
> 赞同：0
> 
> 时间：2012-07-13T18:56:17.207
> 
> 标签：.net, wpf, xaml, pinvoke

我正在尝试使用 WPF 创建一个[戴尔坞站](http://www.delldock.com/images/version15d/dell_dock.jpg)风格的坞站应用程序，到目前为止进展顺利。

我的 WPF 表单在我的屏幕上显示如下：

![约翰码头](../Images/f4a5d9ab9f1766f920d3fa640045197b.png)

我的表单的 XAML 如下：

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="130" Width="525" Loaded="Window_Loaded" Background="Transparent" WindowStyle="None">
    <Grid>
    </Grid>
</Window> 
```

我在微软网站上找到了一个添加 Aero Glass 效果的教程。考虑到这一点，我的代码如下：

```
using System;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows;
using System.Windows.Forms;
using System.Windows.Interop;

namespace WpfApplication7
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            MakeTransparent();

            Topmost = true;

            var screenWidth = SystemInformation.PrimaryMonitorSize.Width;
            var startingPoint = (screenWidth / 2) - (Width / 2);

            Top = 2;
            Left = startingPoint;
        }

        private void MakeTransparent()
        {
            IntPtr mainWindowPtr = new WindowInteropHelper(this).Handle;
            HwndSource mainWindowSrc = HwndSource.FromHwnd(mainWindowPtr);
            mainWindowSrc.CompositionTarget.BackgroundColor = System.Windows.Media.Color.FromArgb(0, 0, 0, 0);

            Graphics desktop = Graphics.FromHwnd(mainWindowPtr);
            float DesktopDpiX = desktop.DpiX;
            float DesktopDpiY = desktop.DpiY;

            MARGINS margins = new MARGINS()
            {
                cxLeftWidth = 0,
                cxRightWidth = Convert.ToInt32(Width) * Convert.ToInt32(Width),
                cyTopHeight = 0,
                cyBottomHeight = Convert.ToInt32(Height) * Convert.ToInt32(Height)
            };

            int hr = DwmExtendFrameIntoClientArea(mainWindowSrc.Handle, ref margins);
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct MARGINS
        {
            public int cxLeftWidth;
            public int cxRightWidth;
            public int cyTopHeight;
            public int cyBottomHeight;
        }

        [DllImport("DwmApi.dll")]
        public static extern int DwmExtendFrameIntoClientArea(IntPtr hwnd, ref MARGINS pMarInset);
    }
} 
```

到目前为止，一切都很好。但是，我的表单是可调整大小的，我不想要，所以我将`ResizeMode`属性设置为`NoResize`，每当我这样做时，我的表单在启动时无处可寻。

为什么会这样？

我试图通过在`SizeChanged`事件中重置表单大小来解决这个问题，但这只有在您尝试从表单的右侧或底部调整大小时，如果您尝试从左上角调整大小，它会移动我没有的表单也不想要。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:06:21.963

发生的事情是因为您试图将 AeroBlur 扩展到整个窗口，一旦您摆脱所有窗口镶边，它将无法工作，并且由于您的 Windows 背景颜色是透明的，它会消失在您身上。似乎没有办法在没有 Chrome 的情况下轻松扩展 Aero Glass，通过允许调整表单大小，给你。我唯一能提到 AeroBlur 和 Chromeless windows 的链接是[这个](http://dotnetslackers.com/Data/re-236666_Chromeless_WPF_Windows_with_Aero_Blur.aspx)

# salesforce - 将 XML 帖子接收到 Salesforce 站点页面

> ID：11476654
> 
> 赞同：0
> 
> 时间：2012-07-13T18:56:32.940
> 
> 标签：salesforce, apex-code, visualforce

我目前正在考虑构建 PivotalTracker 和 Salesforce.com 之间的轻量级集成。查看[这部分 PT 文档](http://www.pivotaltracker.com/help/integrations#activity_web_hook)，看起来我可以根据 PT 活动更新 Salesforce 数据。惊人的！但是，我不知道如何访问正在发布的 XML 数据。

我看不到任何`ApexPages.CurrentPage()`看起来可以让我访问 XML 的东西。有没有人在不使用中间服务器的情况下做过这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:03:54.877

我想我们上周在 Twitter 上讨论过这个问题。

AFAIK（有点烦人）无法通过 SFDC 访问原始（即不形成发布的键/值）POST 数据。Apex REST 服务支持将是最接近的东西，但需要身份验证并且仍然可能无法完全满足您的要求。

可以肯定的是，您需要某种中间人代理来简单地获取 XML 数据并将其作为表单编码的键/值对发布到 VF。这是一件相当微不足道的事情，但它是一个不必要的额外移动部分，并且需要某种服务器资源。

我可能会首先调查 PT 是否支持任何其他 ping 机制，或者编写自定义扩展以将原始 POST 转换为表单 POST 的方法。

# bash - 没有调用 Bash 函数，除非我回显返回值

> ID：11476656
> 
> 赞同：2
> 
> 时间：2012-07-13T18:56:36.983
> 
> 标签：bash, shell

在我的程序中，我试图从函数返回一个值，返回值是字符串。一切正常（至少在某些部分），如果我在返回值后回显该值，但如果我不返回，它甚至不会调用该函数......考虑下面的代码......

```
#!/bin/bash

function get_last_name() {
    echo "Get Last Name"
    ipath=$1

    IFS='/'
    set $ipath
    for item
            do
                    last=$item
            done

    echo $last
}

main() {
    path='/var/lib/iscsi/ifaces/iface0'
    current=$(get_last_name "$path")
    echo -n "Current="
    echo $current
}

main 
```

它给了我这样的输出

```
OUTPUT
     Current=Get Last Name iface0 
```

如果我评论 echo $current，那么我什至没有看到“获取姓氏”，因此得出的结论是，它甚至没有调用该函数。请让我知道我犯了什么错误。但有一点我可以肯定，bash 是我见过的最丑陋的语言......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:10:11.523

函数在 bash 中没有返回值。当你写

```
current=$(get_last_name "$path") 
```

您没有将返回值分配给`current`. 您正在捕获`get_last_name`（使用命令编写`echo`）的标准输出并将其分配给`current`. 这就是您看不到“获取姓氏”的原因；该文本不会到达终端，而是存储在`current`.

* * *

## 详细解释

让我们`get_last_name`先来看看（稍作修改以简化解释）：

```
function get_last_name () {
    ipath=$1

    local IFS='/'
    set $ipath
    for item
    do
        last=$item
    done

    echo "Get Last Name"
    echo $last
} 
```

我之前添加了`local`命令，`IFS`以便将更改限制在 的正文中`get_last_name`，我将第一个`echo`移到末尾以强调两个`echo`语句之间的相似性。当`get_last_name`被调用时，它处理它的单个参数（一个包含文件路径的字符串），然后回显两个字符串：“获取姓氏”和文件路径的最后一个组成部分。如果您要从命令行运行执行此函数，它会显示如下：

```
$ get_last_name /foo/bar/baz
Get Last Name
baz 
```

该函数的退出代码将是最后执行的命令的退出代码，在这种情况下为`echo $last`. 只要写入成功（几乎肯定会），这将是 0。

现在，我们看一下函数`main`，它调用`get_last_name`：

```
main() {
    path='/var/lib/iscsi/ifaces/iface0'
    current=$(get_last_name "$path")
    echo -n "Current="
    echo $current
} 
```

就像 with 一样`get_last_name`，`main`不会有返回值；它将产生一个退出代码，即`echo $current`. 该函数首先`get_last_name`在命令替换 ( `$(...)`) 内部调用，它将捕获所有标准输出`get_last_name`并将其视为字符串。

**题外话**

请注意以下内容之间的区别：

```
current=$(get_last_name "$path") 
```

将 的值设置`current`为 的累积标准输出`get_last_name`。（除此之外，输出中的换行符被替换为空格，但如何处理空格的完整解释是另一天的话题）。这与返回值无关；请记住，退出代码（壁橱`bash`必须“返回值”）是一个整数。

```
current=get_last_name "$path" 
```

甚至不会打电话`get_last_name`。它将“$path”解释为命令的名称并尝试执行它。该命令将`current`在其环境中具有字符串值“get_last_name”的变量。

关键是，`get_last_name`不会“返回”您可以分配给变量的任何内容。它有一个退出代码，它可以写入标准输出。该`$(...)`构造允许您将该输出捕获为一个字符串，然后您可以（除其他外）将其分配给一个变量。

**回到`main`**

一旦 的值`current`被设置为由 生成的输出`get_last_name`，我们执行最后两条`echo`语句再次写入标准输出。第一个写入 "Current=" 而没有换行符，因此下一个`echo`语句在与第一个语句相同的行上生成文本。第二个只是呼应 的值`current`。

当您注释掉 的最后一个`echo`时`main`，您并没有停止`get_last_name`被执行（它已经被执行了）。相反，您只是没有打印`current`变量的内容，输出的`get_last_name`位置而不是终端上。

# objective-c - 在 Objective-C 中的声明开头的“@”之后是否允许有空格？

> ID：11476658
> 
> 赞同：5
> 
> 时间：2012-07-13T18:56:43.277
> 
> 标签：objective-c, declaration

我正在查看 Objective-C，我注意到，例如，类接口声明以`@interface`. 很好，没问题。`@`因此，该文本表明和之间不允许有空格`interface`。但是，当我将以下简单示例传递给`*.m`文件中的 GCC 编译器时：

```
@ interface A
@ end 
```

编译器毫无怨言地接受代码。任何人都可以将我指向明确说明`@ interface`Objective-C规范是否也可以接受的参考吗？除了问题前面提到的简单文字外，我在 Apple 的 2008 年和 2011 年的文件中没有发现任何一种说法。

提前致谢。

**编辑**：值得注意的是，Emacs 根据标识符是否是关键字来执行文本着色；关键字是蓝色的，非关键字是黄色的。颜色为`@interface`蓝色和`@ interface`黄色。在 Vim 中也会发生类似的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:07:20.253

Objective-C 没有正式的规范（在[Objective-C 编程语言](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)之外）。空白约定绝对没有 BNF 风格的定义。如果它编译，那是我们最接近“合法”的。许多语言都是如此。例如，Perl 最好定义为“`perl`可执行文件不会拒绝的那些字符串”。（至少在我看来....）

也就是说，正确的样式是`@interface`没有空格的。请参阅[定义类](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html)。

# django - 在 django 中的查询集上运行“解释”的简单方法

> ID：11476664
> 
> 赞同：36
> 
> 时间：2012-07-13T18:57:00.337
> 
> 标签：django, sql-execution-plan

似乎直接从 Django 中的查询集运行“解释”应该很容易，但我没有看到任何明显的方法，而且“解释”在文档中很难搜索。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-13T20:57:40.060

好吧，除了工具栏外似乎什么都没有，所以我编写了自己的 mixin 来为我的查询集提供一个`explain()`方法：

```
from django.db import connections
from django.db.models.query import QuerySet

class QuerySetExplainMixin:
    def explain(self):
        cursor = connections[self.db].cursor()
        cursor.execute('explain %s' % str(self.query))
        return cursor.fetchall()

QuerySet.__bases__ += (QuerySetExplainMixin,) 
```

希望这对其他人有用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-10-09T20:51:57.403

[`QuerySet.explain()`](https://docs.djangoproject.com/en/2.1/ref/models/querysets/#explain)，在 Django 2.1.0 及更高版本中可用，现在是解释查询的官方方式。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-08-26T14:06:05.393

只是对guidoism的答案稍作修改。这可以防止`ProgrammingError: syntax error at or near ...`由于原始查询中的参数未正确转义而导致错误：

```
from django.db import connections
from django.db.models.query import QuerySet

class QuerySetExplainMixin:
    def explain(self):
        cursor = connections[self.db].cursor()
        query, params = self.query.sql_with_params()
        cursor.execute('explain %s' % query, params)
        return '\n'.join(r[0] for r in cursor.fetchall())

QuerySet.__bases__ += (QuerySetExplainMixin,) 
```

要使用，只需在查询集末尾调用 explain()，例如：

```
print SomeModel.objects.filter(...).explain() 
```

# python - python：监控远程目录

> ID：11476665
> 
> 赞同：1
> 
> 时间：2012-07-13T18:57:03.027
> 
> 标签：python

我目前`python-inotify`用于监视本地目录的更改，并在发生更改时运行脚本。

但现在，我需要监控***远程***目录以进行更改的功能。远程目录将是 a`git`或`svn`repo，在我具有 root ssh 访问权限的服务器上。我知道 git 钩子，但它们只在提交/推送/rebase 等时运行，而不是在通用更改时运行。

是否有我可以使用的现有 python 库？或者我可以在 Python 中打开一个 ssh 连接，然后继续使用 python-inotify？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:05:43.173

您需要文件系统级别的访问权限`inotify`才能工作。因此，如果您有 ssh，最简单的方法就是在远程系统上运行监控脚本。

[然后，您可以使用Twisted](http://twistedmatrix.com/trac/)之类的东西通过网络将更改从一个系统传递到另一个系统。

# twitter-bootstrap - Bootstrap：展开时折叠其他部分

> ID：11476670
> 
> 赞同：86
> 
> 时间：2012-07-13T18:57:10.157
> 
> 标签：twitter-bootstrap, collapse

我正在制作一个 Rails 应用程序，并试图实现与 Twitter 的 Bootstrap [collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)相关的特定功能。请耐心等待我解释它。

我目前有以下看法：

![在此处输入图像描述](../Images/831f969c21a06972d65df3c3e1b9c96b.png)

单击每个按钮时，它们的数据切换 div 会展开。视图设置如下：

```
 <button class="btn dropdown" data-toggle="collapse" data-target="#keys"><i class="icon-chevron-right"></i> Keys <span class="badge badge-info pull-right"><%= @app.keys.count %></span></button>
    <button class="btn dropdown" data-toggle="collapse" data-target="#attrs"><i class="icon-chevron-right"></i> Attributes</button>
    <button class="btn dropdown" data-toggle="collapse" data-target="#edit"><i class="icon-chevron-right"></i> Edit Details</button>

    <div class="collapse indent" id="keys">
        <!--content-->
    </div>

    <div class="collapse indent" id="attrs">
        <!--content-->
    </div>

    <div class="collapse" id="edit">
        <!--content-->
    </div> 
```

我将它们设置为这样，因为我希望按钮并排排列。如果我将按钮移动到它们展开/折叠的视图的正上方，那么按钮会相互堆叠。

所以，我的最终目标是让三个按钮并排放置，并让它们折叠和展开各自的部分。目前的设置工作，但有点尴尬。例如，如果有人展开键部分，然后展开属性部分，他们必须滚动到键部分下方。

这个问题有两种可能的解决方案。一是按下一个按钮会导致另外两个按钮自行折叠。这意味着在任何给定时间，只有这些部分中的一个被扩展。

更好的解决方案，我认为应该是这样，当键展开时，右侧的按钮会向下移动到键 div 的底部，而当属性展开时，编辑详细信息按钮会移动到该 div 的底部. 这可能吗？我已经尝试通过让按钮堆叠在一起并通过 css 更改它们的相对位置来做到这一点，但这不起作用，因为当其中一个部分展开时，其他按钮最终会出现在尴尬的位置展开部分的中间。

最后，我想尝试在没有 twitter 引导页面上提到的手风琴风格行为的情况下做到这一点，但如果有人能从设计的角度说服我它更可取，我肯定会重新考虑。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-13T22:32:18.720

使用`data-parent`，第一个解决方案是坚持示例选择器架构

```
<div id="myGroup">
    <button class="btn dropdown" data-toggle="collapse" data-target="#keys" data-parent="#myGroup"><i class="icon-chevron-right"></i> Keys  <span class="badge badge-info pull-right">X</span></button>
    <button class="btn dropdown" data-toggle="collapse" data-target="#attrs" data-parent="#myGroup"><i class="icon-chevron-right"></i> Attributes</button>
    <button class="btn dropdown" data-toggle="collapse" data-target="#edit" data-parent="#myGroup"><i class="icon-chevron-right"></i> Edit Details</button>

    <div class="accordion-group">
        <div class="collapse indent" id="keys">
            keys
        </div>

        <div class="collapse indent" id="attrs">
            attrs
        </div>

        <div class="collapse" id="edit">
            edit
        </div>
    </div>
</div> 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/nuNsp/83/)

第二种解决方案是绑定事件并自己隐藏其他可折叠元素。

```
var $myGroup = $('#myGroup');
$myGroup.on('show.bs.collapse','.collapse', function() {
    $myGroup.find('.collapse.in').collapse('hide');
}); 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/ytstP/22/)

PS：demo中出现的奇怪效果是示例设置造成的`min-height`，请忽略。

* * *

编辑：将 JS 事件从[Bootstrap 文档](http://getbootstrap.com/javascript/#collapse-events)`show`中`show.bs.collapse`指定的更改为。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2017-03-27T15:31:31.173

如果您不想更改标记，则此功能可以解决问题：

```
jQuery('button').click( function(e) {
    jQuery('.collapse').collapse('hide');
}); 
```

每当单击 BUTTON 时，所有部分都会折叠。然后引导程序打开您选择的那个。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2019-04-17T13:42:59.363

> 对于**引导 v5**

将 `data-bs-parent`属性添加到`collapse`元素。感谢@Diana 的更新。

> 对于**引导 v4.1**

将 `data-parent`属性添加到`collapse`元素而不是`button`.

```
<div id="myGroup">
<button class="btn dropdown" data-toggle="collapse" data-target="#keys"><i class="icon-chevron-right"></i> Keys  <span class="badge badge-info pull-right">X</span></button>
<button class="btn dropdown" data-toggle="collapse" data-target="#attrs"><i class="icon-chevron-right"></i> Attributes</button>
<button class="btn dropdown" data-toggle="collapse" data-target="#edit"><i class="icon-chevron-right"></i> Edit Details</button>

<div class="accordion-group">
    <div class="collapse indent" id="keys"  data-parent="#myGroup">
        keys
    </div>

    <div class="collapse indent" id="attrs"  data-parent="#myGroup">
        attrs
    </div>

    <div class="collapse" id="edit"  data-parent="#myGroup">
        edit
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-09-04T22:17:23.217

如果您使用的是 Bootstrap 4，并且不想更改标记：

```
var $myGroup = $('#myGroup');
$myGroup.on('show.bs.collapse','.collapse', function() {
$myGroup.find('.collapse.show').collapse('hide');
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-24T11:37:58.160

**Bootstrap 3 示例，内容下方有并排按钮**

```
.panel-heading {
  display: inline-block;
}

.panel-group .panel+.panel {
  margin: 0;
  border: 0;
}

.panel {
  border: 0 !important;
  -webkit-box-shadow: none !important;
  box-shadow: none !important;
  background-color: transparent !important;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<div class="panel-group" id="accordion">
    <div class="panel panel-default">
        <div id="collapse1" class="panel-collapse collapse in">
            <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
        </div>
    </div>
    <div class="panel panel-default">
        <div id="collapse2" class="panel-collapse collapse">
            <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
        </div>
    </div>
    <div class="panel panel-default">
        <div id="collapse3" class="panel-collapse collapse">
            <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
        </div>
    </div>
</div>
<div class="panel-heading">
    <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Collapsible Group 1</a>
    </h4>
</div>
<div class="panel-heading">
    <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Collapsible Group 2</a>
    </h4>
</div>
<div class="panel-heading">
    <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">Collaple Group 3</a>
    </h4>
</div>
```

**内容上方并排按钮的 Bootstrap 3 示例**

```
.panel-heading {
  display: inline-block;
}

.panel-group .panel+.panel {
  margin: 0;
  border: 0;
}

.panel {
  border: 0 !important;
  -webkit-box-shadow: none !important;
  box-shadow: none !important;
  background-color: transparent !important;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<div class="panel-heading">
    <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Collapsible Group 1</a>
    </h4>
</div>
<div class="panel-heading">
    <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Collapsible Group 2</a>
    </h4>
</div>
<div class="panel-heading">
    <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">Collaple Group 3</a>
    </h4>
</div>
<div class="panel-group" id="accordion">
    <div class="panel panel-default">
        <div id="collapse1" class="panel-collapse collapse in">
            <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
        </div>
    </div>
    <div class="panel panel-default">
        <div id="collapse2" class="panel-collapse collapse">
            <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
        </div>
    </div>
    <div class="panel panel-default">
        <div id="collapse3" class="panel-collapse collapse">
            <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
        </div>
    </div>
</div>
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-07-18T06:11:39.413

在引导程序 4 中关闭所有折叠的工作如下：

行动：

```
<button id="CloseAll" class="btn btn-primary" type="button" data-toggle="collapse">Close All</button> 
```

查询：

```
$(document).ready(function() {
    $("#CloseAll").on('click', function() {
        $(".collapse").removeClass("show");
    });
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-05-09T13:55:52.620

如果您根据 Bootstrap 约定坚持 HTML 结构和正确的选择器，那么您应该没问题。

```
<div class="panel-group" id="accordion">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Collapsible Group 1</a>
        </h4>
      </div>
      <div id="collapse1" class="panel-collapse collapse in">
        <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
      </div>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Collapsible Group 2</a>
        </h4>
      </div>
      <div id="collapse2" class="panel-collapse collapse">
        <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
      </div>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">Collapsible Group 3</a>
        </h4>
      </div>
      <div id="collapse3" class="panel-collapse collapse">
        <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
      </div>
    </div>
</div> 
```

[演示](http://www.w3schools.com/bootstrap/bootstrap_collapse.asp#accordion)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-03T19:06:09.193

用这个：

```
$('.panel-defaul.ph').on('show.bs.collapse', function () {
    $(this).children('.panel-heading').addClass('panel-heading-collapsed');  
    $('.panel-defaul.ph').not(this).children('.panel-collapse').removeClass('in');
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-09T16:34:36.217

这对我很有帮助：

```
 jQuery('button').click( function(e) {
    jQuery('.in').collapse('hide');
}); 
```

它已折叠已打开部分。感谢 GrafiCode Studio

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-20T05:36:08.870

在 Bootstrap5 上

就像在文档中注意到的那样，您可以使用“data-bs-parent=..”属性

```
If parent is provided, then all collapsible elements under the specified parent will be closed when this collapsible item is shown. (similar to traditional accordion behavior - this is dependent on the card class). The attribute has to be set on the target collapsible area. 
```

[在 bootstrap5 文档中查看更多信息](https://getbootstrap.com/docs/5.0/components/collapse/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-06T23:44:54.133

在这里为引导程序 4>4.1.1 工作就像一个魅力

```
var myGroup = $('your-list');

myGroup.on('show.bs.collapse','.collapse', function() {
   myGroup.find('.collapse.show').collapse('hide');
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-08T09:35:30.743

该方法适合我：

```
var lanopt = $(".language-option");

lanopt.on("show.bs.collapse",".collapse", function(){
   lanopt.find(".collapse.in").collapse("hide");
}); 
```

# mysql - 给mysql添加异步函数

> ID：11476671
> 
> 赞同：0
> 
> 时间：2012-07-13T18:57:12.427
> 
> 标签：mysql, sphinx

我希望能够实时更新我的​​搜索索引。使用 MySQL 中的触发器最容易做到这一点。向应用程序添加代码，在数据库更新的每个地方进行更新是非常痛苦的。触发器的问题在于它们减慢了对数据库的所有更新/插入/删除。

有什么方法可以调用一个函数来在索引上运行更新（或者只是调用一个 php 脚本然后处理更新）但是异步执行此操作。它不应该阻止触发器完成。

我使用 MySQL 作为数据库，使用[sphinx](http://sphinxsearch.com/)作为搜索服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:08:28.433

[也许从MySQL Events](http://www.sitepoint.com/how-to-create-mysql-events/)中查看一些很棒的想法

还有更多：
[http ://phpmaster.com/working-with-mysql-events/?utm_source=rss&utm_medium=rss&utm_campaign=phpmaster-working-with-mysql-events](http://phpmaster.com/working-with-mysql-events/?utm_source=rss&utm_medium=rss&utm_campaign=phpmaster-working-with-mysql-events)

[http://dev.mysql.com/doc/refman/5.5/en/create-event.html](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:51:50.703

我建议在这里使用 gearman：

[http://sphinxsearch.com/forum/view.html?id=9823](http://sphinxsearch.com/forum/view.html?id=9823)

使用“后台”任务，允许它是异步的，并且不应该过多地延迟触发。

gearman 使从触发器调用 PHP 代码变得容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:18:22.503

我不确定我是否正确理解了您的问题，但听起来像

`INSERT DELAYED`

[http://dev.mysql.com/doc/refman/5.1/en/insert-delayed.html](http://dev.mysql.com/doc/refman/5.1/en/insert-delayed.html)

和

`UPDATE LOW_PRIORITY`

[http://dev.mysql.com/doc/refman/5.1/en/update.html](http://dev.mysql.com/doc/refman/5.1/en/update.html)

可能很有用，因为这些命令将数据库上的工作负载考虑在内。

# python - 从另一个文件夹导入 python 失败

> ID：11476682
> 
> 赞同：5
> 
> 时间：2012-07-13T18:57:55.703
> 
> 标签：python, import

我正在尝试使用 python，主要是对其他人的代码进行故障排除。我试图让一个程序运行，“ `path\folderA\program.py`”。

我正在运行程序`path\folderA`

我收到一个错误：

```
ImportError: No module named fff.ggg.ppp 
```

program.py 包含一个导入：

```
from fff.ggg.ppp import mmm 
```

在文件夹“path\folderB”中有：“ `path\folderB\fff\__init__.py`”“ `path\folderB\fff\ggg`”

文件夹`ggg`还包含 `__init__.py`，以及程序`ppp.py`

通过阅读其他帖子，例如[Python 错误“ImportError: No module named”](https://stackoverflow.com/questions/338768/python-importerror-no-module-named)，我了解到`__init__.py`让文件夹成为“包”，这使得从中导入成为可能 - 但它不起作用，因为我收到错误。

这一直适用于与这些项目合作的其他人，所以我的设置有问题。

我读了一些关于必须在 sys.path 中的目录。这是否意味着我必须将它们添加到环境变量路径中？这将意味着向 PATH 添加很多目录，所以它不可能。

所以我还发现了以下内容：

```
import sys
sys.path.append( <path to FolderB> ) 
```

但这意味着更改代码（对其他人来说不是必需的）并硬编码一条通往我本地机器上的路径 - 我不应该这样做，对吧？

我无法想象它 - 显然我不应该更改代码并硬编码导入模块的物理路径 - 那么来自 folderA 的程序怎么可能知道在 folderB 中查找导入？

魔法是如何`__init__.py`运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:09:16.977

> 我无法想象它 - 显然我不应该更改代码并硬编码导入模块的物理路径 - 那么来自 folderA 的程序怎么可能知道在 folderB 中查找导入？

你是对的。不知何故，您必须告诉 python 在文件夹 B 中查找导入的模块。没有`__init__.py`魔法可以让您从硬盘驱动器上的其他文件夹导入。

通常，如果你有各种不同的 Python 包，它们可以通过安装到 Python 的库中来工作。这样他们就可以从任何地方进口。这通常由`setup.py`脚本完成。检查是否`folderB`有一个。运行它`python setup.py install`。

如果这不起作用，我们将需要有关此代码结构的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:01:44.360

文件夹 B 必须在 sys.path 上，因此您要么需要将 mmm 移动到 A，要么从 A 中修改 sys.path（不确定这是否有效）。 `__init__.py`告诉python该文件夹是一个包，因此您可以在文件夹中拥有文件`__init__.py`夹，`__init__.py`并且python将其中的文件夹视为父文件夹的一部分。查看 sympy 或几乎任何大型 python 库，您会发现这样的结构。它还可以包含要在导入时运行的代码，但也可以为空。

# servicestack - 配置 ServiceStack 基础 URI

> ID：11476685
> 
> 赞同：4
> 
> 时间：2012-07-13T18:58:22.757
> 
> 标签：servicestack

我正在使用服务堆栈和 AppHostHttpListenerBase 创建一个自托管的 REST 服务。我想为我的服务（例如“api”）使用基本 URI，如下所示：

```
http://myserver/api/service1/param
http://myserver/api/service2/param 
```

如何在我的每条路线中不定义“api”的情况下做到这一点。在 IIS 中，我可以设置一个虚拟目录来隔离服务，但是在自托管时如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T00:41:58.280

来吧..（作为奖励，这是您将服务放入插件的方式。

```
using BlogEngineService;
using ServiceStack.WebHost.Endpoints;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace BlogEngineWinService
{
    public class AppHost : AppHostHttpListenerBase
    {
        public AppHost() : base("Self Host Service", typeof(AppHost).Assembly) { }
        public override void Configure(Funq.Container container)
        {
            Plugins.Add(new BlogEngine());
        }
    }
} 
```

这就是你自动连接它的方式

呼叫 `appHost.Routes.AddFromAssembly2(typeof(HelloService).Assembly);`就是呼叫自动接线的分机。

```
using ServiceStack.WebHost.Endpoints;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ServiceStack.ServiceInterface;

namespace BlogEngineService
{
    public class BlogEngine : IPlugin, IPreInitPlugin
    {
        public void Register(IAppHost appHost)
        {

            appHost.RegisterService<HelloService>();
            appHost.Routes.AddFromAssembly2(typeof(HelloService).Assembly);
        }

        public void Configure(IAppHost appHost)
        {

        }
    }
} 
```

这就是您标记服务类以为其提供前缀的方式。只需使用此属性标记类

```
using ServiceStack.DataAnnotations;
using ServiceStack.ServiceHost;
using ServiceStack.ServiceInterface;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace BlogEngineService
{
    public class Hello
    {
        [PrimaryKey]
        public string Bob { get; set; }
    }

    public class HelloResponse
    {
        public string Result { get; set; }
    }

    [PrefixedRoute("/test")]
    public class HelloService : Service
    {

        public object Any(Hello request)
        {
            return new HelloResponse { Result = "Hello, " + request.Bob};
        }
    }
} 
```

在您的项目中为扩展创建一个 CS 文件。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;
using ServiceStack.Common;
using ServiceStack.Common.Utils;
using ServiceStack.Common.Web;
using ServiceStack.Text;
using ServiceStack.ServiceHost;
using ServiceStack.WebHost.Endpoints;
using ServiceStack.ServiceInterface;

namespace ServiceStack.ServiceInterface
{
    public static class ServiceRoutesExtensions
    {
        /// <summary>
        ///     Scans the supplied Assemblies to infer REST paths and HTTP verbs.
        /// </summary>
        ///<param name="routes">The <see cref="IServiceRoutes"/> instance.</param>
        ///<param name="assembliesWithServices">
        ///     The assemblies with REST services.
        /// </param>
        /// <returns>The same <see cref="IServiceRoutes"/> instance;
        ///     never <see langword="null"/>.</returns>
        public static IServiceRoutes AddFromAssembly2(this IServiceRoutes routes,
                                                     params Assembly[] assembliesWithServices)
        {
            foreach (Assembly assembly in assembliesWithServices)
            {

                AddNewApiRoutes(routes, assembly);
            }

            return routes;
        }

        private static void AddNewApiRoutes(IServiceRoutes routes, Assembly assembly)
        {
            var services = assembly.GetExportedTypes()
                .Where(t => !t.IsAbstract
                            && t.HasInterface(typeof(IService)));

            foreach (Type service in services)
            {
                var allServiceActions = service.GetActions();
                foreach (var requestDtoActions in allServiceActions.GroupBy(x => x.GetParameters()[0].ParameterType))
                {
                    var requestType = requestDtoActions.Key;
                    var hasWildcard = requestDtoActions.Any(x => x.Name.EqualsIgnoreCase(ActionContext.AnyAction));
                    string allowedVerbs = null; //null == All Routes
                    if (!hasWildcard)
                    {
                        var allowedMethods = new List<string>();
                        foreach (var action in requestDtoActions)
                        {
                            allowedMethods.Add(action.Name.ToUpper());
                        }

                        if (allowedMethods.Count == 0) continue;
                        allowedVerbs = string.Join(" ", allowedMethods.ToArray());
                    }
                    if (service.HasAttribute<PrefixedRouteAttribute>())
                    {
                        string prefix = "";
                        PrefixedRouteAttribute a = (PrefixedRouteAttribute)Attribute.GetCustomAttribute(service, typeof(PrefixedRouteAttribute));
                        if (a.HasPrefix())
                        {
                            prefix = a.GetPrefix();
                        }
                        routes.AddRoute(requestType, allowedVerbs, prefix);
                    }
                    else
                    {
                        routes.AddRoute(requestType, allowedVerbs);
                    }
                }
            }
        }

        private static void AddRoute(this IServiceRoutes routes, Type requestType, string allowedVerbs, string prefix = "")
        {
            var newRoutes = new ServiceStack.ServiceHost.ServiceRoutes();
            foreach (var strategy in EndpointHost.Config.RouteNamingConventions)
            {
                strategy(newRoutes, requestType, allowedVerbs);
            }
            foreach (var item in newRoutes.RestPaths)
            {

                string path = item.Path;
                if (!string.IsNullOrWhiteSpace(prefix))
                {
                    path = prefix + path;
                }
                routes.Add(requestType, restPath: path, verbs: allowedVerbs);
            }
        }
    }

    public class PrefixedRouteAttribute : Attribute
    {
        private string _prefix { get; set; }
        private bool _hasPrefix { get; set; }

        public PrefixedRouteAttribute(string path) 
        {
            if (!string.IsNullOrWhiteSpace(path))
            {
                this._hasPrefix = true;
                this._prefix = path;
                //this.Path = string.Format("/{0}{1}", Prefix, Path);
            }
        }
        public bool HasPrefix()
        {
            return this._hasPrefix;
        }
        public string GetPrefix()
        {
            return this._prefix;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:17:37.213

[ServiceStack 的 HttpListener 主机](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/StarterTemplates)希望托管在根 / 路径，因为正常的用例是让每个自托管服务在不同的自定义端口上可用。

由于它目前不支持在 /custompath 上托管，因此您必须`/api/`在所有服务路由上指定前缀。

如果您想在自定义路径中查看对托管的支持，请[添加一个问题。](https://github.com/ServiceStack/ServiceStack/issues?direction=desc&sort=created&state=open)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T16:30:40.810

实际上有一个更简单的解决方案。在您的 web.config 中，将您的 http-handler 更新为：

```
<httpHandlers>
  <add path="api*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
</httpHandlers> 
```

有了上述内容，您的所有服务 api 都必须以“/api/”为前缀。如果你已经在你的任何路由中使用了“/api/”，你现在必须删除它们或者必须在你的调用中指定它两次。

参考： [https ://github.com/ServiceStack/SocialBootstrapApi](https://github.com/ServiceStack/SocialBootstrapApi)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T05:48:51.207

我找到了解决方法。我只在自托管下对此进行了测试。

创建一个继承自 RouteAttribute 的“PrefixedRouteAttribute”类

```
public class PrefixedRouteAttribute : RouteAttribute
{
  public static string Prefix { get; set; }

  public PrefixedRouteAttribute(string path) :
    base(path)
  {
    SetPrefix();
  }

  public PrefixedRouteAttribute(string path, string verbs)
    : base(path, verbs)
  {
    SetPrefix();
  }

  private void SetPrefix()
  {
    if (!string.IsNullOrWhiteSpace(Prefix))
    {
      this.Path = string.Format("/{0}{1}", Prefix, Path);
    }
  }   
} 
```

创建 AppHost 时，您可以设置前缀

```
PrefixedRouteAttribute.Prefix = "api"; 
```

然后，不要使用 [Route] 属性，而是在您的类上使用 [PrefixRoute] 属性

```
[PrefixedRoute("/echo")]
[PrefixedRoute("/echo/{Value*}")]
public class Echo
{
  [DataMember]
  public string Value { get; set; }
} 
```

然后，这将适用于请求

```
/api/echo
/api/echo/1 
```

这可能会得到改善。我不太喜欢通过静态属性设置前缀的方式，但在我的设置下我想不出更好的方法。虽然创建覆盖属性的原则似乎很合理，但这是重要的部分。

# php - 当结果来自循环时，在 php 中格式化时间

> ID：11476687
> 
> 赞同：1
> 
> 时间：2012-07-13T18:58:25.497
> 
> 标签：php, mysql

我有一个事件议程设置为从数据库中填充，从循环中回显行。

我看到如何格式化以获得我想要的时间： date("g:i a") 但我似乎无法让它在我的 php 代码中工作。

我让循环将数据打印到 $row，然后像这样指定哪条数据：

```
 <td>' .$row['start_time'] . '</td> 
```

其中 start_time 是我的数据库中的列，它是日期时间数据。

我尝试了几种不同的方法来添加日期时间的格式，但没有一种方法能成功返回结果。如何格式化此代码以使其显示？我是让它成为一个函数还是可以将它添加到我在这里的行中？

我想只返回时间（而不是日期），并将其设置为上午 7:00。

谢谢！

编辑添加：这里有更多代码可能会阐明我正在努力的地方：

```
 $conn = new DatabaseConn();

   $query = "SELECT * FROM agenda WHERE date=\"2012-10-21\" AND visible=\"1\" ORDER BY agenda_id;";

   $result = mysql_query($query);

   if($result){

    $numfields = mysql_num_fields($result);
    $data = array();
    $flist = array();

        for($i=0;$i<$numfields;$i++)$flist[] = mysql_field_name($result,$i);
        $data[0] = $flist;
        while($row = mysql_fetch_assoc($result)){

         $data[] = $row;
         echo '
         <tr>
          <td id="time">'. $row['start_time']) . '</td>
          <td id="time">' . $row['end_time'] . '</td>   
          <td id="title">' . $row['title'] . '</td>
          <td id="description">' . $row['description'] . '</td>
          <td id="room">' . $row['room'] . '</td>
          <td id="type">' . $row['attendee_type'] . '</td>          
         </tr>
         ';
        } 
```

编辑＃2添加：这是我在测试页面上的输出：（复制视图源而不仅仅是页面）

```
 <tr>
     <td id="time">2012-10-21 14:00:00 </td>
     <td id="time">2012-10-21 20:00:00</td>
     <td id="title">Registration</td>
     <td id="description">Open registration and conference check-in.</td>
     <td id="room">Lobby</td>
     <td id="type">all</td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:01:53.080

用这个

```
echo date("g:i a", $row['start_time']); //$row['start_time'] should be Unix timestamp 
```

否则使用

```
echo date("g:i a", strtotime($row['start_time'])); 
```

**[strtotime](http://php.net/manual/en/function.strtotime.php)**解析`English textual datetime description into a Unix timestamp`

通过[此](http://php.net/manual/en/function.date.php)了解所有日期`format`字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:01:32.990

`date('g:i a', strtotime($row['start_time']));`// 如果 $row['start_time'] 是一个有效的时间戳

# javascript - 匹配一个事件的结束日期和另一个事件的开始日期的优化

> ID：11476688
> 
> 赞同：0
> 
> 时间：2012-07-13T18:58:26.070
> 
> 标签：javascript, algorithm, date, optimization, data-structures

我有一组事件（开始日期、结束日期、位置）。这些活动在国内进行，我需要弄清楚结束后哪个活动应该去哪里。

示例：

1.  [1/7, 6/7, Toronto]（7月1日开始，7月6日结束）
2.  [2/7, 4/7, 蒙特利尔]
3.  [4/7, 11/7, 渥太华]
4.  [17/7, 22/7, 温哥华]

..etc（数据集大约有 100 个条目，因此性能不是真正的问题）

在这个例子中，事件 1 可以移动并执行事件 4，因为它在 7 月 6 日结束，而事件 4 在 17 日开始。（假设当天过境）

所有找不到合适匹配的事件都将存储在报告中，供某人手动匹配。

此优化代码将在 javascript 中完成。

我的第一个想法是拥有 2 个具有相同数据的数组。第一个数组按开始日期排序，第二个数组按结束日期排序。然后浏览结束日期列表并尝试为其找到合适的开始日期，然后从数组中删除这些条目并继续这样，直到不再匹配为止。

有人对如何解决这个问题有更好的想法吗？如果您需要更多详细信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:38:33.700

你的问题不是很清楚。如果我理解正确，您的目标是选择事件的子集，以便您的选择最大化事件的数量（并且没有重叠的事件）。如果是这样，您的问题可以被视为[活动选择问题](http://en.wikipedia.org/wiki/Activity_selection_problem)。有一个简单的贪心算法可以解决这个问题。

让

```
event[1..n] the n events
start[i] the start time of the event number i
finish[i] the finish time of the event number i 
```

并假设您已经**按结束时间对事件进行**了排序。

以下贪心算法将找到**非重叠事件的****最大子集*S***：（注意*lse*是*Last Selected Event*）

```
S = {event[1]}
lse = 1

foreach event[i] do:
     if start[i] > finish[lse]:
         S = S + {event[i]}
         lse = i

return S 
```

基本上：

1.  您按结束时间对事件进行排序
2.  你选择第一个事件
3.  你循环事件，贪婪地选择第一个与你选择的最后一个不重叠的事件

# html - 由于 403 错误，HTML 将链接重定向到另一个链接

> ID：11476693
> 
> 赞同：0
> 
> 时间：2012-07-13T18:58:50.753
> 
> 标签：html, redirect, http-status-code-403

好的，所以我的网站上有一个按钮，我想链接到视频。当我将站点作为计算机上的文件查看时，它可以工作；但是当我在网上查看它时，它给了我一个 403 错误。我认为这是因为我试图直接访问该文件，而该站点希望我通过该文件之前的页面访问该文件。所以我要么需要一些代码，当我按下这个按钮时，它会转到他们服务器上这个文件之前的页面，然后自动重定向到这个文件。或者有人可以告诉我另一种解决这个问题的方法。

这是我网站上按钮的代码：

```
<td><a href="http://streaming.isho.ws/HIMM/S7/HIMM.S07E23-24.mp4" class="button_link btn_red"><span>Watch Now</span></a></td> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:04:03.530

当用户无权访问他们尝试访问的文件或媒体时，返回 403 错误。检查您尝试访问的 mp4 的权限是什么，并确保它是可访问的。

# c - “未定义的引用”错误，即使函数被声明和定义

> ID：11476696
> 
> 赞同：0
> 
> 时间：2012-07-13T18:59:07.000
> 
> 标签：c, makefile, compiler-errors

我有这些 2 c 文件和一个头文件。所有这些文件都是由`Makefile`.

**mysql_storage.h**

```
#include <stdio.h>
#include <mysql.h>
#include <glib/gstdio.h>

#if 1
typedef enum {
        STORAGE_OK = 0,
        STORAGE_NO_SUCH_USER,
        STORAGE_INVALID_PASSWORD,
        STORAGE_ALREADY_EXISTS,
        STORAGE_OTHER_ERROR/* Error that isn't caused by user input, such as 
                               a database that is unreachable. log() will be 
                               used for the exact error message */
} storage_status_t;

typedef enum
{
    MYSQL_PASS_CHECK_ONLY = -1,
    MYSQL_PASS_UNKNOWN = 0,
    MYSQL_PASS_WRONG,
    MYSQL_PASS_OK
} mysql_pass_st;
#endif

static void mysql_storage_init( void );
static void mysql_storage_deinit( void );
static storage_status_t mysql_storage_load(const char *password );
static storage_status_t mysql_storage_check_pass( const char *nick, const char *password );
static storage_status_t mysql_storage_save( int overwrite );
static storage_status_t mysql_storage_remove( const char *nick, const char *password ); 
```

**mysql_storage.c**

```
#include "mysql_storage.h"

MYSQL *mysql;

static void mysql_storage_init( void ) {
    if (mysql_init(mysql) == NULL)
        fprintf( stderr, "Can not initialize MySQL. Configuration won't be saved.");

    if (!mysql_real_connect(mysql, "localhost", "USERNAME", "PASSWORD", NULL, 3306, NULL, 0))
        fprintf( stderr, "%s\nConfiguration won't be saved.", mysql_error(mysql));

    if (mysql_select_db(mysql, "DATABASENAME"))
        fprintf( stderr, "%s\nConfiguration won't be saved.", mysql_error(mysql));
}
static void mysql_storage_deinit( void ) {
    if(mysql!=NULL) 
        mysql_close(mysql);
}
static storage_status_t mysql_storage_check_pass( const char *nick, const char *password ){    return STORAGE_OTHER_ERROR;}
static storage_status_t mysql_storage_load(const char *password ){    return STORAGE_OTHER_ERROR;}
static storage_status_t mysql_storage_save( int overwrite ){    return STORAGE_OTHER_ERROR;}
static storage_status_t mysql_storage_remove( const char *nick, const char *password ){    return STORAGE_OTHER_ERROR;} 
```

**主程序**

```
#include<stdio.h>
#include "mysql_storage.h"

    int main(){
        // connect mysql
        mysql_storage_init();
        // check a password
        printf("check password: %d\n:", mysql_storage_check_pass("hello", "world"));
        // close mysql
        mysql_storage_deinit();
    } 
```

最后是**Makefile**

```
CFLAGS=-I/usr/include/mysql -DBIG_JOINS=1 -fno-strict-aliasing -g -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I.
LIBS=-L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -lrt -ldl -lglib-2.0 -L.
CC=gcc

all: main
clean:
        rm main  *.o
main: mysql_storage.o main.o 
        $(CC)  main.o mysql_storage.o $(LIBS) -o main
.c.o:
        $(CC) -c $(CFLAGS) $< 
```

当我做时，我得到这个错误。

```
gcc  main.o mysql_storage.o -L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -lrt -ldl -lglib-2.0 -L. -o main
main.o: In function `main':
/home/shiplu/projects/mysql_interface/main.c:8: undefined reference to `mysql_storage_init'
/home/shiplu/projects/mysql_interface/main.c:11: undefined reference to `mysql_storage_check_pass'
/home/shiplu/projects/mysql_interface/main.c:15: undefined reference to `mysql_storage_deinit'
collect2: ld returned 1 exit status 
```

如您所见，我正在链接`main.o`和`mysql_storage.o`. 所以它不应该抛出未定义的引用错误。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:02:48.327

You declared your functions `mysql_storage_init` as `static`, meaning they have **internal [linkage](http://en.wikipedia.org/wiki/Linkage_%28software%29)** -- this means they are not visible to other translation units.

Since you need to call them from other object files, you should instead declare them to have **external linkage** by omitting the `static` keyword in their declarations and definitions. The prototypes in the header file may optionally declare them `extern`, but that is not required, since the linkage is external by default.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:01:51.157

You mysql_storage.c functions are defined as `static`, which means they are not visible outside of the file. Remove `static` and it should work.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T19:02:31.943

The `static` keyword for a function means this function will have the scope of **this .obj file only**, which is probably not what you expect. Remove the `static` keyword for function definitions and declarations (both .h and .cpp files)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T19:03:32.513

在函数之前使用关键字 static 可确保它们仅在定义它们的编译单元中可见。如果您从函数中删除 static 关键字，您应该没有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T19:03:47.817

如果您计划在不同的编译单元中使用函数，则不应将它们声明为静态的。

# iphone - 如何在 iPhone 上录制用户生成的声音输出

> ID：11476697
> 
> 赞同：1
> 
> 时间：2012-07-13T18:59:08.680
> 
> 标签：iphone, ios, audio

我有一系列声音，用户在使用我的应用程序时会播放、重新排列和编辑等。当用户完成后，我希望他们能够保存他们的工作并将其录制到 mp3 中。

我不想通过扬声器播放它并用麦克风录制它，因为这会导致音质低下和干扰。我想不出任何不需要额外硬件和/或计算机的方法。

我怎样才能只使用他们的设备来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:47:51.283

好吧，我会说它不能用 AVFoundation 来完成。

我的建议是使用音频单元，并将所有交互转换为音频图。在某些时候，您在 RemoteIO 上设置了一个渲染通知，因此每次它向扬声器渲染声音时，您都会收到一个回调，您可以在其中将这些帧/数据包/数据写入文件。

我可能会建议在 MP3 上使用 AAC(m4a)。我不太喜欢 MP3，老实说，据我所知，sdk 不提供 MP3 编码，可能是由于许可问题。不过我可能是错的。查看下面的示例代码，这可能是您在网络上的音频单元上找到的最好的示例代码。

[汤姆·齐克的音频图](http://zerokidz.com/audiograph/Home.html)

# javascript - 云中的 indexedDb 备份

> ID：11476702
> 
> 赞同：5
> 
> 时间：2012-07-13T18:59:32.180
> 
> 标签：javascript, backup, indexeddb

我希望我的客户端 Web 应用程序能够备份 indexedDb 数据库。我没有网络服务器

我发现了这个：[导出和导入 IndexedDB 数据](https://stackoverflow.com/questions/7798098/exporting-and-importing-indexeddb-data#answer-8205461) ，上面写着：“你可以调用导出回调，传递代表对象存储备份的特权对象数组”所以我在 javascript 中有一个对象数组，这是我的备份......如何我可以： 1\. 把它变成一个文件？2\. 备份到云端？

感谢您的帮助。

迈克尔（比利时）

注意：我很想使用 dropbox api，我找到了这个[http://code.google.com/p/dropbox-js/source/browse/#svn/trunk](http://code.google.com/p/dropbox-js/source/browse/#svn/trunk)但不知道它是否有效（会尝试一下并让你知道）。

注意：我还计划使用 pokki.com 在客户端桌面上部署应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T22:23:19.907

来自[https://developer.mozilla.org/en-US/docs/IndexedDB/Basic_Concepts_Behind_IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB/Basic_Concepts_Behind_IndexedDB)

*同步。API 的设计目的不是与服务器端数据库同步。您必须编写将客户端 indexedDB 数据库与服务器端数据库同步的代码。*

# java - 在android代码中让手机振动

> ID：11476703
> 
> 赞同：0
> 
> 时间：2012-07-13T18:59:35.483
> 
> 标签：java, android

我正在尝试在 android 中激活振动，但每次按下按钮时应用程序崩溃.....

```
silet.setRingerMode(AudioManager.RINGER_MODE_VIBRATE) 
```

我也做了进口的事情。并声明：

```
public AudioManager silent; 
```

日志猫：

```
07-13 22:06:17.956: E/AndroidRuntime(11925): FATAL EXCEPTION: main
07-13 22:06:17.956: E/AndroidRuntime(11925): java.lang.IllegalStateException: Could not execute method of the activity
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.view.View$1.onClick(View.java:2072)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.view.View.performClick(View.java:2408)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.view.View$PerformClick.run(View.java:8816)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.os.Handler.handleCallback(Handler.java:587)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.os.Looper.loop(Looper.java:123)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.app.ActivityThread.main(ActivityThread.java:4627)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at java.lang.reflect.Method.invokeNative(Native Method)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at java.lang.reflect.Method.invoke(Method.java:521)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at dalvik.system.NativeStart.main(Native Method)
07-13 22:06:17.956: E/AndroidRuntime(11925): Caused by: java.lang.reflect.InvocationTargetException
07-13 22:06:17.956: E/AndroidRuntime(11925):    at com.android.hello.MainActivity.click(MainActivity.java:25)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at java.lang.reflect.Method.invokeNative(Native Method)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at java.lang.reflect.Method.invoke(Method.java:521)
07-13 22:06:17.956: E/AndroidRuntime(11925):    at android.view.View$1.onClick(View.java:2067)
07-13 22:06:17.956: E/AndroidRuntime(11925):    ... 11 more
07-13 22:06:17.956: E/AndroidRuntime(11925): Caused by: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:09:32.120

我在猜测，但您声明：

```
public AudioManager silent; 
```

您是否使用以下方法对其进行了初始化：

```
AudioManager silent = (AudioManager) getSystemService(AUDIO_SERVICE); 
```

你`silent`在这里拼错了：

```
silent.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
//silet.setRingerMode(AudioManager.RINGER_MODE_VIBRATE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:12:49.573

试试这个代码它会帮助你

```
 AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

       audio.setRingerMode(AudioManager.RINGER_MODE_VIBRATE); 
```

需要在AndroidManifest.xml中添加权限

```
 <uses-permission android:name="android.permission.VIBRATE"/> 
```

享受！！！

# java - 读取整个 XML 文件并存储在内存中 java

> ID：11476705
> 
> 赞同：1
> 
> 时间：2012-07-13T18:59:38.400
> 
> 标签：java

这是我想要做的。

1.  读取整个 XML 文件（我不在乎元素或属性的名称等）。
2.  将读取的 XML 文件保存到内存中。
3.  更新读取的 xml 文件的一些值。
4.  写回 XML 文件。

我正在尝试使用 XMLStreamReader 来读取 XML 文件，但是到目前为止我看到的所有示例，看起来我必须提供元素名称。但是，我不关心元素名称，只想将整个 XML 文件读入内存。而且，我不确定在阅读时应该如何存储数据类型。我正在考虑将它们存储到 Document 数据类型中。

关于如何读取整个 XML 文件并将读取的内容存储在内存中的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:05:08.600

最简单的方法是使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)。您可以使用`xjc`XML 模式生成 Java 类。然后使用 JAXB 解组（加载）您的数据，像通常处理任何其他对象（使用 getter/setter）一样操作 Java 对象，并将其编组（保存）回 XML 文件。

您也可以直接使用 DOM，但操作 DOM 比使用直接反映 XML 结构的 POJO 繁琐得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:22:07.240

`XMLStreamReader`是一个面向事件的解析器，为您提供 XML 的流式视图。您显然希望整个 XML 树都在内存中，所以最好的选择是 JDOM：

```
public Document parse(Reader in) {
  return new SAXBuilder().build(in);
} 
```

JDOM 优于 JAXB 的优势在于导航：您可以使用简单的表达式（如`"//my-elem"`. 使用 JAXB，您将编写一大堆代码和嵌套循环来获得这个简单的结果。

（更不用说没有您的 XML 的 XML Schema，JAXB 甚至不会与您对话。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:28:20.343

有时 JAXB 可能是矫枉过正，而 DOM 可以进行一些操作：

```
DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = f.newDocumentBuilder();
Document doc = builder.parse(new File("test.xml")); 
```

# javascript - 按钮激活后不执行动作

> ID：11476712
> 
> 赞同：-3
> 
> 时间：2012-07-13T18:59:59.383
> 
> 标签：javascript, jquery, html

我不明白为什么在使用复选框启用按钮后按钮不会变为活动状态。我在不禁用提交按钮的情况下让它工作，但是它独立于被选中的复选框而工作

```
<!doctype html>
<html lang="en">

<head>
<meta http-equiv="Pragma" content="no-cache">

<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">

<meta charset="utf-8" />
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-                  
scalable=0, width=device-width;">
<title>Welcome to Tiffany &amp; Co.</title>

<link rel="stylesheet" href="index.css" type="text/css" media="screen" />

<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<!--Enable media queries in some unsupported subrowsers-->
<script type="text/javascript" src="css3-mediaqueries.js"></script>

<script type="text/javascript" src="main.js"></script>
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

</head>

<body>
<div id="wrapper">

<script>
function submitAction() 
{

var link = document.location.href;

var searchString = "redirect=";

var equalIndex = link.indexOf(searchString);

var redirectUrl = "";

  if (document.forms[0].action == "") 
    {

    var url = window.location.href;

    var args = new Object();

    var query = location.search.substring(1);

    var pairs = query.split("&");

    for(var i=0;i<pairs.length;i++)
        {

        var pos = pairs[i].indexOf('=');

        if(pos == -1) continue;

        var argname = pairs[i].substring(0,pos);

        var value = pairs[i].substring(pos+1);

        args[argname] = unescape(value);

        }

    document.forms[0].action = args.switch_url;       

    }       

if(equalIndex >= 0) 
    {

    equalIndex += searchString.length;

    redirectUrl = "";

    redirectUrl += link.substring(equalIndex);

    }

if(redirectUrl.length > 255)

redirectUrl = redirectUrl.substring(0,255);

document.forms[0].redirect_url.value = redirectUrl;

document.forms[0].buttonClicked.value = 4;

document.forms[0].submit();

}

function reject()
{
alert("You will not be able to access the system!");
}

function loadAction() {
var url = window.location.href;
var args = new Object();
var query = location.search.substring(1);
var pairs = query.split("&");
for (var i = 0; i < pairs.length; i++) {
    var pos = pairs[i].indexOf('=');
    if (pos == -1) continue;
    var argname = pairs[i].substring(0, pos);
    var value = pairs[i].substring(pos + 1);
    args[argname] = unescape(value);
}
document.forms[0].action = args.switch_url;
}
</script>

<form method="post"> 
<input TYPE="hidden" NAME="buttonClicked" SIZE="16" MAXLENGTH="15" value="0"> 
<input TYPE="hidden" NAME="redirect_url" SIZE="255" MAXLENGTH="255" VALUE=""> 
<input TYPE="hidden" NAME="err_flag" SIZE="16" MAXLENGTH="15" value="0">

<h1>Welcome to Tiffany &amp; Co.</h1>
<p id="desc">We're delighted to offer our customers complimentary Wi-Fi     
while shopping in our store.</p>
<form>
<p id="terms">
    <input id="termsCheckbox" type="checkbox" 
onclick="this.form.submit.disabled = !this.checked"/> I have read and agreed to the <a 
href="terms.html">Terms of Use</a>
</p>
<p id="error">
    Please agree to the Terms of Use by checking the box.
</p>
<p class="connect">
<input id="connect" type="button" name="submit" value="Accept"  
class="button" disabled="disabled" onclick="submitAction();">
</p>
</form>

<div id="logo">
    <img src="logo.png" width="108" height="14" alt="Tiffany &amp; Co."       
/>
</div>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:11:59.923

你的代码工作正常，它是一团糟，但它的工作原理。问题是这样的：

```
Uncaught ReferenceError: submitAction is not defined 
```

问题的原因是您没有右括号`submitAction()`

这是一个[工作演示](http://jsbin.com/ogakoy)。我还[清理了你的代码](http://jsbeautifier.org/)！

正确格式化和缩进代码非常重要。它不仅看起来不错并且更易于阅读，而且您很容易发现不匹配/缺失的大括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:05:12.543

试试这个

```
$(function(){
   $('#termsCheckbox').change(function(){
      $('#connect').prop('disabled', !this.checked);
   } 
}); 
```

# python - 确定子字符串在 Python 中的字符串中出现的次数

> ID：11476713
> 
> 赞同：81
> 
> 时间：2012-07-13T18:59:59.417
> 
> 标签：python, string

我试图弄清楚一个字符串在一个字符串中出现了多少次。例如：

```
nStr = '000123000123' 
```

假设我要查找的字符串是 123。显然它在 nStr 中出现了两次，但我无法在 Python 中实现这个逻辑。我目前得到的：

```
pattern = '123'
count = a = 0
while pattern in nStr[a:]:
    a = nStr[a:].find(pattern)+1
    count += 1
return count 
```

它应该返回的答案是 2。我现在陷入了无限循环。

我刚刚意识到 count 是一种更好的方法，但出于好奇，有没有人看到类似于我已经得到的方法？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-07-13T19:00:57.667

Use [`str.count`](https://docs.python.org/3/library/stdtypes.html#str.count):

```
>>> nStr = '000123000123'
>>> nStr.count('123')
2 
```

A working version of your code:

```
nStr = '000123000123'
pattern = '123'
count = 0
flag = True
start = 0

while flag:
    a = nStr.find(pattern, start)  # find() returns -1 if the word is not found, 
    #start i the starting index from the search starts(default value is 0)
    if a == -1:          #if pattern not found set flag to False
        flag = False
    else:               # if word is found increase count and set starting index to a+1
        count += 1        
        start = a + 1
print(count) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-06-05T03:49:15.413

这里显示的问题`count()`和其他方法是在重叠子字符串的情况下。

例如：`"aaaaaa".count("aaa")`返回 2

如果你希望它返回 4 [ `(aaa)aaa, a(aaa)aa, aa(aaa)a, aaa(aaa)`] 你可以尝试这样的事情：

```
def count_substrings(string, substring):
    string_size = len(string)
    substring_size = len(substring)
    count = 0
    for i in xrange(0,string_size-substring_size+1):
        if string[i:i+substring_size] == substring:
            count+=1
    return count

count_substrings("aaaaaa", "aaa")
# 4 
```

不确定是否有更有效的方法，但我希望这能阐明如何`count()`工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-16T05:18:10.643

```
import re

pattern = '123'

n =re.findall(pattern, string) 
```

我们可以说子字符串“模式”在“字符串”中出现了 len(n) 次。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-07T17:36:40.477

如果您正在搜索如何解决重叠案例的此问题。

```
s = 'azcbobobegghaklbob'
str = 'bob'
results = 0
sub_len = len(str) 
for i in range(len(s)):
    if s[i:i+sub_len] == str: 
        results += 1
print (results) 
```

将导致 3 因为： [azc(bob)obegghaklbob] [azcbo(bob)egghaklbob] [azcbobobegghakl(bob)]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-14T00:47:46.820

我很新，但我认为这是一个很好的解决方案？也许？

```
def count_substring(str, sub_str):
    count = 0
    for i, c in enumerate(str):
        if sub_str == str[i:i+2]:
            count += 1
    return count 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-23T15:13:22.940

```
def count_substring(string, substring):
         c=0
         l=len(sub_string)
         for i in range(len(string)):
                 if string [i:i+l]==sub_string:
                          c=c+1
         return c
string=input().strip()
sub_string=input().strip()

count= count_substring(string,sub_string)
print(count) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-04T04:07:26.250

您不会`a`随着每个循环而改变。你应该把：

```
a += nStr[a:].find(pattern)+1 
```

...代替：

```
a = nStr[a:].find(pattern)+1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-16T10:56:44.167

string.count(substring) 在重叠的情况下没有用。

我的做法：

```
def count_substring(string, sub_string):

    length = len(string)
    counter = 0
    for i in range(length):
        for j in range(length):
            if string[i:j+1] == sub_string:
                counter +=1
    return counter 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-22T09:13:01.150

```
def countOccurance(str,pat):
    count=0
    wordList=str.split()
    for word in wordList:
        if pat in word:
            count+=1
    return count 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-23T02:25:45.127

通常我使用枚举来解决这类问题：

```
def count_substring(string, sub_string):
        count = 0
        for i, j in enumerate(string):
            if sub_string in string[i:i+3]:
                count = count + 1
        return count 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-11T12:44:19.200

正如@João Pesce 和@gaurav 所提到的，`count()`在重叠子字符串的情况下没有用，试试这个......

```
def count_substring(string, sub_string):
    c=0
    for i in range(len(string)):
        if(string[i:i+len(sub_string)]==sub_string):
            c = c+1
    return c 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-06-09T07:02:53.350

定义计数（子字符串，字符串）：

```
count = 0
ind = string.find(sub_string)

while True:
    if ind > -1:
        count += 1
        ind = string.find(sub_string,ind + 1)
    else:
        break
return count 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-12-19T22:53:01.763

```
def count_substring(string, sub_string):
    count = 0
    len_sub = len(sub_string)
    for i in range(0,len(string)):
        if(string[i:i+len_sub] == sub_string):
            count+=1
    return count 
```

# php - Regular Expression to find uncommented apache config tags?

> ID：11476716
> 
> 赞同：1
> 
> 时间：2012-07-13T19:00:26.103
> 
> 标签：php, regex

First see this commented tag that is for apache virtualHost config file:

```
##<VirtualHost *:80>
    ##ServerAdmin postmaster@dummy-host2.localhost
    ##DocumentRoot "C:/xampp/htdocs/dummy-host2.localhost"
    ##ServerName dummy-host2.localhost
    ##ServerAlias www.dummy-host2.localhost
    ##ErrorLog "logs/dummy-host2.localhost-error.log"
    ##CustomLog "logs/dummy-host2.localhost-access.log" combined
##</VirtualHost> 
```

How can find uncommented tags and get content between theme?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:06:30.467

将此正则表达式`^\s*[^#\s].+?$`与正则表达式选项一起使用，`multyline`您可以捕获 matchCollection 未注释的行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:14:25.357

```
$subject = '##<VirtualHost *:80>
##ServerAdmin postmaster@dummy-host2.localhost
##DocumentRoot "C:/xampp/htdocs/dummy-host2.localhost"
##ServerName dummy-host2.localhost
##ServerAlias www.dummy-host2.localhost
##ErrorLog "logs/dummy-host2.localhost-error.log"
##CustomLog "logs/dummy-host2.localhost-access.log" combined
##</VirtualHost>';

$pattern = '=[#]{1,}<VirtualHost.[^>]*>(.*?)</VirtualHost>=is';
$result = preg_match_all($pattern, $subject, $matches);

echo '<pre>'.print_r($matches, true).'</pre>'; 
```

在 $matches[1] 你会找到你要找的

# xml - Complex xPath query

> ID：11476718
> 
> 赞同：4
> 
> 时间：2012-07-13T19:00:32.243
> 
> 标签：xml, xslt, xpath, xslt-1.0

I need to write a quite complex XSLT 1.0 query.

Given the following XML file, I need a query to get the set of authors who are in multiple reports. (for example Antonio Rossi, because he's both on report 1 and 2).

```
<reports>
  <report id="01">
    <titolo>
      I venti del Nord
    </titolo>
    <autori>
      <autore>
        Antonio Rossi
      </autore>
      <autore>
        Mario Verdi
      </autore>
    </autori>
    <versioni>
      <versione numero="1.0">
        <data>
          13-08-1980
        </data>
        <autore>
          Mario Verdi
        </autore>
        <commento>
          versione iniziale
        </commento>
      </versione>
      <versione numero="2.0">
        <data>
          14-08-1981
        </data>
        <autore>
          Antonio Rossi
        </autore>
        <commento>
          poche modifiche
        </commento>
      </versione>
    </versioni>
  </report>
  <report id="02">
    <titolo>
      Le pioggie del Nord
    </titolo>
    <autori>
      <autore>
        Antonio Rossi
      </autore>
      <autore>
        Luca Bianchi
      </autore>
    </autori>
    <versioni>
      <versione numero="1.0">
        <data>
          13-12-1991
        </data>
        <autore>
          Antonio Rossi
        </autore>
        <commento>
          versione iniziale
        </commento>
      </versione>
      <versione numero="2.0">
        <data>
          14-08-1992
        </data>
        <autore>
          Antonio Rossi
        </autore>
        <commento>
          modifiche al cap. 1
        </commento>
      </versione>
      <versione numero="3.0">
        <data>
          18-08-1992
        </data>
        <autore>
          Antonio Rossi
        </autore>
        <commento>
          Aggiunta intro.
        </commento>
      </versione>
      <versione numero="4.0">
        <data>
          13-01-1992
        </data>
        <autore>
          Luca Bianchi
        </autore>
        <commento>
          Modifiche sostanziali.
        </commento>
      </versione>
    </versioni>
  </report>
  <report id="03">
    <titolo>
      Precipitazioni nevose
    </titolo>
    <autori>
      <autore>
        Fabio Verdi
      </autore>
      <autore>
        Luca Bianchi
      </autore>
    </autori>
    <versioni>
      <versione numero="1.0">
        <data>
          11-01-1992
        </data>
        <autore>
          Fabio Verdi
        </autore>
        <commento>
          versione iniziale
        </commento>
      </versione>
      <versione numero="2.0">
        <data>
          13-01-1992
        </data>
        <autore>
          Luca Bianchi
        </autore>
        <commento>
          Aggiornato indice
        </commento>
      </versione>
    </versioni>
  </report>
</reports> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:33:14.957

如果您可以使用 XPath 2.0，您可以使用：

```
distinct-values(/reports/report/autori/autore[preceding::report/autori/autore = . or following::report/autori/autore = .]) 
```

使用您的输入 XML，它将返回：

```
Antonio Rossi
Luca Bianchi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T16:05:00.280

**I. 这个简单的（无 for-each，无变量）XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="kAuthorByVal" match="autori/autore" use="normalize-space()"/>

  <xsl:template match="/">
   <xsl:copy-of select=
    "//autori/autore
                  [generate-id()
                  =
                   generate-id(key('kAuthorByVal', normalize-space())[1])
                   ]
                  [key('kAuthorByVal', normalize-space())[2]]"/>
  </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<reports>
      <report id="01">
        <titolo>
          I venti del Nord
        </titolo>
        <autori>
          <autore>
            Antonio Rossi
          </autore>
          <autore>
            Mario Verdi
          </autore>
        </autori>
        <versioni>
          <versione numero="1.0">
            <data>
              13-08-1980
            </data>
            <autore>
              Mario Verdi
            </autore>
            <commento>
              versione iniziale
            </commento>
          </versione>
          <versione numero="2.0">
            <data>
              14-08-1981
            </data>
            <autore>
              Antonio Rossi
            </autore>
            <commento>
              poche modifiche
            </commento>
          </versione>
        </versioni>
      </report>
      <report id="02">
        <titolo>
          Le pioggie del Nord
        </titolo>
        <autori>
          <autore>
            Antonio Rossi
          </autore>
          <autore>
            Luca Bianchi
          </autore>
        </autori>
        <versioni>
          <versione numero="1.0">
            <data>
              13-12-1991
            </data>
            <autore>
              Antonio Rossi
            </autore>
            <commento>
              versione iniziale
            </commento>
          </versione>
          <versione numero="2.0">
            <data>
              14-08-1992
            </data>
            <autore>
              Antonio Rossi
            </autore>
            <commento>
              modifiche al cap. 1
            </commento>
          </versione>
          <versione numero="3.0">
            <data>
              18-08-1992
            </data>
            <autore>
              Antonio Rossi
            </autore>
            <commento>
              Aggiunta intro.
            </commento>
          </versione>
          <versione numero="4.0">
            <data>
              13-01-1992
            </data>
            <autore>
              Luca Bianchi
            </autore>
            <commento>
              Modifiche sostanziali.
            </commento>
          </versione>
        </versioni>
      </report>
      <report id="03">
        <titolo>
          Precipitazioni nevose
        </titolo>
        <autori>
          <autore>
            Fabio Verdi
          </autore>
          <autore>
            Luca Bianchi
          </autore>
        </autori>
        <versioni>
          <versione numero="1.0">
            <data>
              11-01-1992
            </data>
            <autore>
              Fabio Verdi
            </autore>
            <commento>
              versione iniziale
            </commento>
          </versione>
          <versione numero="2.0">
            <data>
              13-01-1992
            </data>
            <autore>
              Luca Bianchi
            </autore>
            <commento>
              Aggiornato indice
            </commento>
          </versione>
        </versioni>
      </report>
</reports> 
```

**产生想要的正确结果：**

```
<autore>
            Antonio Rossi
          </autore>
<autore>
            Luca Bianchi
          </autore> 
```

**说明**：

1.  一个关键的观察是，`autori/autore`一个特定的字符串值不能在`report`. 这大大简化了解决方案（对于更复杂的解决方案，请查看此答案的早期版本）。此考虑在此答案中提出的所有解决方案中都基本使用。

2.  我们定义了一个键，`autori/autore`通过它的规范化字符串值来标识一个。因此，两个`autori/autore`具有不同空格但呈现同一作者的两个被视为同一作者的实例。

3.  使用 Muenchian 分组方法，我们选择所有`autori/autore`元素的集合，每个元素都有一个不同的标准化字符串值。

4.  对于每个选择`autori/autore`的具有唯一规范化字符串值的此类，我们还测试是否存在第二个`autori/autore`具有相同规范化字符串值的此类。我们选择所有这样`autori/autore`的元素，这个节点集正是这个问题需要选择的。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:variable name="vSeq" select="//autori/autore/normalize-space()"/>
 <xsl:template match="/">
     <xsl:value-of select="$vSeq[index-of($vSeq,.)[2]]" separator="&#xA;"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生所需的正确结果**：

```
Antonio Rossi
Luca Bianchi 
```

**说明**：

在这里，我们使用**[这个答案](https://stackoverflow.com/a/287360/36305)**并相应地定义`$vSeq`。

* * *

**三、单个 XPath 3.0（和 XQuery 3.0）表达式 - 解决方案**：

```
let $vSeq := //autori/autore/normalize-space()
 return
    $vSeq[index-of($vSeq,.)[2]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T19:45:23.297

这甚至在 XPath 1.0 中也有效：

```
//report//autore[text()=../../following-sibling::report//autore/text()] 
```

它也选择`autore`具有文本内容等于以下任何`autore`节点中的任何节点的所有`report`节点。

或者，为了简短起见，如果您的真实 xml 文件中没有什么真正棘手的问题，即使这也应该起作用：

```
//autore[text()=../../following-sibling::*//autore/text()] 
```

* * *

**编辑：**意外工作。请参阅下面的评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T14:17:32.970

恭喜 DevNull 获得了当时发布的第一个正确答案。在他发帖时，还不知道 OP 想要 XSLT 1.0 解决方案。我在下面提供一个。

以任何有效的方式在 XSLT 1.0 中获取不同的值都需要 Muenchian 分组。以下是在 XSLT 1.0 中如何做到这一点...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" />

<xsl:key name="kAuthors" match="autori/autore" use="normalize-space()" />

<xsl:template match="/">
The set of authors on multiple reports
====================================== 
<xsl:for-each select="reports/report/autori/autore[
   generate-id()=
   generate-id( key('kAuthors',normalize-space())[1])]">
  <xsl:variable name="author" select="normalize-space()" />   
  <xsl:for-each select="key('kAuthors',$author)[2]">
   <xsl:value-of select="concat($author,'&#x0A;')" /> 
  </xsl:for-each>
 </xsl:for-each>  
</xsl:template>

</xsl:stylesheet> 
```

将上述样式表应用于 OP 的示例数据时，会生成此文本文档...

```
The set of authors on multiple reports
====================================== 
Antonio Rossi
Luca Bianchi 
```

## 解释

在每份报告中，作者都​​出现了两次。一次在 autori 下，再次在 versione 下。我们不需要重复计算每个报告，因此我们为关键 autori/autore 创建匹配模式。键值是作为字符串的作者姓名。因此，关键组作者。

我们使用标准的 Muenchian 分组来遍历作者。这是外部的 for-each。现在我们只对“惯犯”感兴趣。我们可以通过将 [2] 谓词应用于内部循环来实现这一点。最多只出现在 1 个报告中的作者将被过滤掉，因为他们的组的长度只有 1。

# linux - emulate windows like delete on unix

> ID：11476728
> 
> 赞同：-3
> 
> 时间：2012-07-13T19:01:26.750
> 
> 标签：linux, bash, unix

So basically I am trying to create a script in bash shell which will emulate the windows delete features.

So instead of deleting a file or a folder it will move it to the recycle bin. I've got everything working apart from an issue I am having with moving folders into the recycle bin.

For example if I have a empty folder and run my script safe_rm it will not move the folder to the bin. However if I have a child folder in that parent folder it will delete both parent and child, so

safe_rm -r dir1/ <--wont delete

but

safe_rm dir1/ with content of dir2 file1 (dir1/file1 dir1/dir2) will delete.

Here is my code i am having an issue with

```
moveFilesFolder(){
 #check if file/directory exists
    if [ $(checkFileFolder $1) == "true" ]
    then
      movingFilesToRemove=$(ls $1)
      #if there's too many files/directories then send them to the moveFiles functions
      if [ ${#movingFilesToRemove[*]} -gt 1 ]
      then
        movingFiles $movingFilesToRemove
      else
      #folder handling  
        if [ $(isFolder $1) == "true" ]
        then
          #we check the rR flag for selected folder  
          if [ $optionRFlag == "false" ]
          then
            echo "rm: cannot remove \`$1': Is a directory"
         else
           lvlDown=true
           #we check if the I argument used on the folder,
               #which prompts the user
           if [ $optionIFlag == "true" ] && [ $(isFolderEmpty $1) == "false" ]
            then
              read -p "rm: descend into directory \`$1'?" downFolder
              case $downFolder in
              y* | Y*)
                lvlDown="true" ;;
              *)
                lvlDown="false" ;;
              esac

            fi
            if [ $lvlDown == "true" ]
            then
              #now we display all the descending folders and gives full path
              #i will be using the sed command to handle sub files 
              #this will proceed every item with present working folde
          subfiles=$(ls $1 | sed "s;^;`pwd`/$1;")
           # subfiles=$(ls $1 | grep '^d' )
           # subfiles=$(ls -R | grep ":" | sed "s/://" )  

           movingFiles $subfiles
            #now we move the empty folder 
              if [ $(isFolderEmpty $1) == "false" ]  
              then
                dlt=true
    if [ $optionIFlag == "true" ] 
    then
                 read -p "rm: remove directory \`$1'?" deleteFolder
                 case $deleteFolder in
                 y* | Y*)
                    dlt="true" ;;
                 *)
                    dlt="false" ;;
                 esac
               fi

               if [ $dlt == "true" ]
               then
                 mv $1 $recycleFolder
                echo `pwd` 
                 if [ $optionVFlag == "true" ]
                 then
                   echo "removed directory: \`$1'"
                 fi
               fi
             fi
           fi
         fi
       else
         #here we are dealing with file handling 
         agreed=true
         if [ $optionIFlag == "true" ]
         then
           read -p "$(interMessage $1)" userAccepts
           case $userAccepts in
           y* | Y*)
             agreed="true" ;;
           *)
             agreed="false" ;;
           esac
         fi
         #refer to above i flag
         if [ $agreed == "true" ]
         then

           mv $1 $recycleFolder
           echo `pwd`
           if [ $optionVFlag == "true" ]
           then
             echo "removed \`$1'"
           fi
         fi
       fi
     fi
   else

     echo "rm: cannot remove \`$1': No such file or directory"
   fi

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:13:55.937

请参阅 comp.unix.questions 常见问题解答，问题 3.6：“我如何“取消删除”文件？”

[http://www.faqs.org/faqs/unix-faq/faq/part3/](http://www.faqs.org/faqs/unix-faq/faq/part3/)

> 两点：首先，这通常被认为是一个*坏*主意。你会变得依赖于“rm”的这种行为，有一天你会发现自己在一个“rm”实际上是“rm”的正常系统上，你会给自己带来麻烦。其次，您最终会发现处理磁盘空间和维护垃圾箱所涉及的时间的麻烦，只是对“rm”更加小心一点可能会更容易。对于初学者，您应该在手册中查找“rm”的“-i”选项。

答案中提到的 MIT 删除/取消删除实用程序套件可以在以下位置找到

[http://ftp.funet.fi/pub/archive/comp.sources.misc/volume17/delete/](http://ftp.funet.fi/pub/archive/comp.sources.misc/volume17/delete/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:03:05.170

### 垃圾生活的地方

大多数 Linux 系统上的垃圾都存在于`~/.local/share/Trash/{expunged,files,info}`. 跟踪元信息涉及一些子目录，但`~/.local/share/Trash/files`如果您不担心完全符合[垃圾](https://raw.github.com/andreafrancia/trash-cli/master/docs/trashspec-0.7.html)规范，您可以将文件或目录扔进其中。

### 穷人的垃圾

即使您不关心完全遵守垃圾规范，您仍然可以使用垃圾设施，同时确保您遵守其关键要求之一。垃圾规范说：

> 即使具有相同名称和位置的文件被多次删除，后续的每次删除都不得覆盖以前的副本。

您可以使用基本的 shell 功能来满足要求。例如：

```
trash () {
    local trashdir="$HOME/.local/share/Trash/files"
    mkdir -p "$trashdir"
    mv --backup=numbered "$@" "${trashdir}/"
} 
```

### 使用 CLI 工具

如果您使用的是基于 Debian 的系统，则可以安装[垃圾-cli](https://github.com/andreafrancia/trash-cli)。安装后，您可以直接调用它或将其命名为透明使用。例如：

```
sudo aptitude install trash-cli
alias rm='trash'

mkdir /tmp/foobarbaz
touch /tmp/foobarbaz
rm -rf /tmp/foobarbaz 
```

请注意，这似乎不能很好地处理 Ubuntu 的 ecryptfs 安装的主目录，但否则可以让您开箱即用地遵守垃圾规范，而无需重新发明轮子。

# c# - 在发布表单之前将我所有的文本框值聚合到一个列表中

> ID：11476733
> 
> 赞同：0
> 
> 时间：2012-07-13T19:01:39.910
> 
> 标签：c#, asp.net, html, asp.net-mvc-3, razor

我正在构建一个带有一堆文本框的 MVC 表单。但是，我的模型需要一个字符串列表。我想要做的是，当用户点击提交时，在表单发布之前，它会获取文本框中的所有值，将其添加到 List 并将其附加到模型以进行提交。我被困在我怎么能做到这一点？

我需要这样做的原因是我需要表单是动态的，因为字段数可以增长并且页面会适应它。我无法将各个字段硬编码到模型中，因为模型需要适应表单的长度。

到目前为止，这是我的代码：

的HTML

```
@using (Html.BeginForm(new { id = "feedbackForm" }))
{
<fieldset>

    @foreach (Feedback_Num_Questions questionForm in FeedbackSurveyQuestions)
    {
        string textBoxID = "feedbackq";

        questionNumberTextBoxes++;

        textBoxID = textBoxID + questionNumberTextBoxes.ToString();

        <input type="text" id="@textBoxID" />
    }

    <input type="text" id="txtAdditionalComments" />

    <input type="submit" value="Create" name="btnFeedbackSubmit" id="btnSubmitFeedbackForm" />

    </fieldset>
} 
```

该模型：

```
 public class PostCourseFeedbackModel
    {
        public List<string> responseList { get; set; }
        public decimal pelID { get; set; }
        public string employeeid { get; set; }
    } 
```

谢谢您的帮助！

更新：在收到 FLEM 的回复后，我对代码进行了一些修改。仍然不太有效，但希望有人能发现这个问题：

HTML：

```
 @using (Html.BeginForm(new { id = "feedbackForm" }))
 {
<fieldset>

    @{

    int i = 0;

    foreach (Feedback_Num_Questions questionForm in FeedbackSurveyQuestions)
    {
        i++;
        string textBoxID = "feedbackq" + i.ToString();
        @Html.TextBoxFor(m => m.responseList[i], new { @id = textBoxID });
    }

    <input type="submit" value="Create" name="btnFeedbackSubmit" id="btnSubmitFeedbackForm" />
        }
    </fieldset>
 } 
```

模型保持不变...

更新 - 按照弗莱姆的要求，我正在发布我的行动。然而，这是一个准系统操作，因为我还没有编写我打算如何处理数据的代码......

```
 [HttpPost]
    public ActionResult PostCourseFeedback(PostCourseFeedbackModel feedback)
    {

         return RedirectToAction("FeedbackSubmitted", "Feedback", new { status = "success" });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:35:59.337

我会让模型粘合剂为您完成这项艰苦的工作。

```
@using (Html.BeginForm(new { id = "feedbackForm" }))
{
    <fieldset>
    @{
        int i = 0;
        foreach (Feedback_Num_Questions questionForm in FeedbackSurveyQuestions)
        {
            @Html.EditorFor(m => m.responseList[i++])
        }
    }

        <input type="text" id="txtAdditionalComments" />

        <input type="submit" value="Create" name="btnFeedbackSubmit" id="btnSubmitFeedbackForm" />

    </fieldset>
} 
```

这是一个工作示例：

型号和控制器：

```
using System.Collections.Generic;
using System.Web.Mvc;

namespace MvcApplication1.Controllers
{
    public class MyController : Controller
    {
        public ActionResult MyAction(MyModel Model)
        {
            return View(Model);
        }

    }
    public class MyModel
    {
        public List<string> TextFields { get; set; }
    }
} 
```

看法：

```
@model MvcApplication1.Controllers.MyModel

@using (Html.BeginForm())
{
    for (int i = 0; i < 3; i++)
    {
        string id = "txt" + i.ToString();

        @Html.TextBoxFor(m => m.TextFields[i], new { id = id })
    }

    <input type="submit" value="Post" />

    if (Model.TextFields != null)
    {
        foreach (string textField in Model.TextFields)
        { 
            <div>Posted Field: @textField</div>
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:16:52.347

我相信，如果您修改文本框的 id 和 name 属性，并且您的 post 操作期望您的模型类作为其参数，您应该能够在创建文本框时执行以下操作：

```
<input type="text" id="id="responseList_@textBoxID__" name="responseList[@textBoxID]" /> 
```

# grails - grails server log

> ID：11476735
> 
> 赞同：1
> 
> 时间：2012-07-13T19:01:42.860
> 
> 标签：grails, netbeans, webserver, netbeans-7

I am very new to Grails. I uses to work a little bit with Ruby.

I made an iOs app which communicates with the grails backend. Now I have the problem that I can't see what exactly the server receives.

I am searching for the development.log file. Or a way to see what my server receives and sends as well as the logs entries.

I develop in NetBeans IDE 7.1.2 and Grails 2.1.

thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:40:32.917

如果您使用 tomcat 作为服务器，只需启用访问日志阀，您将获得包含所有请求的日志：http: [//tomcat.apache.org/tomcat-5.5-doc/config/valve.html#Access_Log_Valve](http://tomcat.apache.org/tomcat-5.5-doc/config/valve.html#Access_Log_Valve)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:37:31.367

我正在做一些非常像你正在做的事情。我为移动应用创建了一个单独的日志文件。我将在 Config.groovy 中包含我的整个 log4j 部分，以使其更易于理解。这将创建 4 个附加日志`/var/log/grails/`- 错误、警告、信息和 mobileApp 日志；根据需要进行更改。

```
log4j = {
    appenders {
        rollingFile  name:'infoLog', file:'/var/log/grails/info.log', threshold: org.apache.log4j.Level.INFO, maxFileSize:"1MB", maxBackupIndex: 10
        rollingFile  name:'warnLog', file:'/var/log/grails/warn.log', threshold: org.apache.log4j.Level.WARN, maxFileSize:"1MB", maxBackupIndex: 10
        rollingFile  name:'errorLog', file:'/var/log/grails/error.log', threshold: org.apache.log4j.Level.ERROR, maxFileSize:"1MB", maxBackupIndex: 10
        rollingFile  name:'mobileAppLog', file:'/var/log/grails/mobile.log', threshold: org.apache.log4j.Level.INFO, maxFileSize:"1MB", maxBackupIndex: 10
       //UNTESTED
       rollingFile  name:'debugLog', file:'/var/log/grails/debug', threshold: DEBUG, maxFileSize:"1MB", maxBackupIndex: 10
    }
    root {
        info 'infoLog','warnLog','errorLog', stdout
        error()
        additivity = true
    }

    info mobileAppLog: 'mobileAppLog', additivity:false

    error  'org.codehaus.groovy.grails.web.servlet',  //  controllers
           'org.codehaus.groovy.grails.web.pages', //  GSP
           'org.codehaus.groovy.grails.web.sitemesh', //  layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping', // URL mapping
           'org.codehaus.groovy.grails.commons', // core / classloading
           'org.codehaus.groovy.grails.plugins', // plugins
           'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'

    //UNTESTED - you could remove individual entries here to get less data
    debug 'org.codehaus.groovy.grails.web.servlet',  //  controllers
           'org.codehaus.groovy.grails.web.pages', //  GSP
           'org.codehaus.groovy.grails.web.sitemesh', //  layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping', // URL mapping
           'org.codehaus.groovy.grails.commons', // core / classloading
           'org.codehaus.groovy.grails.plugins', // plugins
           'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'

    warn   'org.mortbay.log'

    debug "grails.app"
} 
```

然后，当我需要在控制器中使用我的 mobileAppLog 时，请执行以下操作：

```
import org.apache.log4j.Logger

//inside controller class
def appLog = Logger.getLogger('mobileAppLog')

//To actually write to the log
appLog.info("whatever you need to write") 
```

# r - 使用 RODBC 时检索 MS Access 文件名

> ID：11476741
> 
> 赞同：1
> 
> 时间：2012-07-13T19:01:55.060
> 
> 标签：r, ms-access, rodbc

输入我的连接名称，我会看到类似`DBQ=Path\to\DB`. 如何检索此值？我试过了

*   `conn$DBQ`
*   `conn[DBQ]`
*   `conn['DBQ']`
*   `conn[,'DBQ']`

无返回值。我试过`typeof(conn)`了`"integer"`，`class(conn)`-> `"RODBC"`，`mode(conn)`-> `"numeric"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:11:28.137

我认为没有简单的方法。您可以通过获取连接字符串`attr(conn, "connection.string")`然后尝试解析它（例如：`sub("^DBQ=([^=]*);.*", "\\1", attr(a,"connection.string"))`或`strsplit(attr(a,"connection.string"),";")[[1]][1]`）。

# python - Python 递归 XML 解析

> ID：11476745
> 
> 赞同：2
> 
> 时间：2012-07-13T19:02:14.253
> 
> 标签：python, xml, parsing

全新的 XML 解析。python中解析以下内容的最佳方法是什么：

```
<Item name="item1">
    <data>item1data</data>
    <subItems>
        <Item name="item2">
            <data>item2data</data>
            <subItems>
                <Item name="item3">
                  . . .
                </Item>
            </subItems>
        </Item>
        <Item name="item4">
          . . .
        </Item>
    <subItems>
</Item> 
```

我在看`xml.sax`解析，但不知道如何使它能够对`subItems`树进行多层次的解析。有人可以给我推荐一个解析器/方法来解析这个吗？谢谢！

我将用这个创建“项目”对象的列表，预期的结果会像这样循环：

```
[Item(item1, item1data, 
    [Item(item2, item2data, 
        [Item(item3 ... ]) Item(item4 ... )])]` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:41:57.617

在 python 中解析 xml 的最佳方法之一是使用 lxml 包，该包位于： http: [//lxml.de/](http://lxml.de/)

它包括与 python 内置模块 ElementTree 的向后兼容性，并提供 xPath 支持。

这是一个帮助您入门的教程：http: [//lxml.de/tutorial.html](http://lxml.de/tutorial.html)

# java - JTabbedPane - addTab(title, icon, component) + setTabComponentAt(index, component)

> ID：11476747
> 
> 赞同：1
> 
> 时间：2012-07-13T19:02:16.773
> 
> 标签：java, swing

根据这个[例子](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html#TabComponentsDemo)要更详细[一点，](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TabComponentsDemoProject/src/components/TabComponentsDemo.java)我刚刚遇到了一件奇怪的事情......

如果我使用方法 as`addTab(title,icon,component)` 并且接下来想添加其他组件，`setTabComponent(count-1,aComponent)`那么**aComponent会** *替换* **icon**吗？我的意思是在这种情况下选项卡不包含图标:(

效果类似于（见图）。但是如何在这些选项卡上添加图标？

![在此处输入图像描述](../Images/a6f2f6b84495e34444f7270d2123d747.png)

我不太确定，但我猜想**aComponent**会以某种方式替换**icon** ...所以我的问题是...如何在一个选项卡上同时拥有三个**icon**、**title**和**aComponent**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:49:29.463

正如您在选项卡上设置的组件的 javadoc 中明确提到的那样，[`setTabComponentAt`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setTabComponentAt%28int,%20java.awt.Component%29)它将替换图标和标题

> 非空值意味着组件将呈现标题，而 JTabbedPane 将不呈现标题和/或图标。

因此，如果您想在选项卡上拥有标题、图标和组件，则必须创建自己的包含这 3 个项目的内容，并使用该方法`Container`设置该容器。`setTabComponentAt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:07:38.540

我认为您的意思是使用`setComponentAt`而不是`setTabComponent`.

你看，`setTabComponent`设置了一个负责渲染选项卡的组件（我猜这不是你想要的）。 `setComponentAt`在指定的选项卡中设置组件（我猜这就是您要查找的内容）。

总之，要添加具有标题和图标并在选项卡正文中包含组件的选项卡，请使用： `addTab(title, icon, component)`

要将组件更新（或添加）到现有选项卡，请使用： `setComponentAt(index, component)`

要将图标更新（或添加）到现有选项卡，请使用： `setIconAt(index, icon)`

要更新（或添加）现有选项卡的标题，请使用： `setTitleAt(index, title)`

# c# - Session.SessionId persistence in requests to ashx

> ID：11476748
> 
> 赞同：1
> 
> 时间：2012-07-13T19:02:17.983
> 
> 标签：c#, asp.net, web-services, ashx

when i make a webrequest call to a service, why does it always generates a new sessionid?

This is how i call from sitea.com

```
WebClient fs = new WebClient();
            var data = fs.DownloadData("http://siteb.com/serice.ashx");
            var tostring = System.Text.Encoding.ASCII.GetString(data);
            return tostring; 
```

This is the service code at siteb.com

```
[WebMethod(EnableSession = true)]
    private string Read(HttpContext context)
    {
        var value = context.Session.SessionId;
        if (value !=null) return value.ToString();
            return "false";
    } 
```

value is always different for every request. How can i persist this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:47:06.117

您必须接收会话 ID 并将其传递给后续请求。默认情况下，它将在 cookie 中发送，但 WebClient 不处理 cookie。您可以使用[CookieAwareWebClient](http://couldbedone.blogspot.com/2007/08/webclient-handling-cookies.html)来解决这个问题：

```
public class CookieAwareWebClient : WebClient
{
    private CookieContainer m_container = new CookieContainer();

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = m_container;
        }
        return request;
    }
} 
```

只要您重用相同的 Web 客户端实例，您就应该获得相同的会话 ID（如果会话当然不会超时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:36:06.990

**来自 MSDN：** XML Web 服务客户端由 XML Web 服务返回的 HTTP cookie 唯一标识。为了让 XML Web services 为客户端维护会话状态，客户端必须保留 cookie。客户端可以通过创建 CookieContainer 的新实例并将其分配给代理类的 CookieContainer 属性来接收 HTTP cookie，然后再调用 XML Web 服务方法。如果您需要在代理类实例超出范围时保持会话状态，则客户端必须在对 XML Web 服务的调用之间保持 HTTP cookie。例如，Web 窗体客户端可以通过将 CookieContainer 保存在其自己的会话状态中来持久保存 HTTP cookie。因为并非所有 XML Web services 都使用会话状态，因此客户端并不总是需要使用客户端代理的 CookieContainer 属性，

**下面的代码示例是使用会话状态的 XML Web 服务的 Web 窗体客户端。客户端通过将其存储在客户端的会话状态中来持久化唯一标识会话的 HTTP cookie。**

```
<%@ Page Language="C#" %>
<%@ Import Namespace="System.IO" %>
<%@ Import Namespace="System.Net" %>

<html>

<script runat="server">

    void EnterBtn_Click(Object Src, EventArgs E) 
{
  // Create a new instance of a proxy class for your XML Web service.
  ServerUsage su = new ServerUsage();
      CookieContainer cookieJar;

  // Check to see if the cookies have already been saved for this session.
  if (Session["CookieJar"] == null) 
    cookieJar= new CookieContainer();
      else
   cookieJar = (CookieContainer) Session["CookieJar"];

    // Assign the CookieContainer to the proxy class.
    su.CookieContainer = cookieJar;

  // Invoke an XML Web service method that uses session state and thus cookies.
  int count = su.PerSessionServiceUsage();         

  // Store the cookies received in the session state for future retrieval by this session.
  Session["CookieJar"] = cookieJar;

      // Populate the text box with the results from the call to the XML Web service method.
      SessionCount.Text = count.ToString();  
    }

</script>
<body>
   <form runat=server ID="Form1">

         Click to bump up the Session Counter.
         <p>
         <asp:button text="Bump Up Counter" Onclick="EnterBtn_Click" runat=server ID="Button1" NAME="Button1"/>
         <p>
         <asp:label id="SessionCount"  runat=server/>

   </form>
  </body>
  </html> 
```

阅读 MSDN [http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.enablesession.aspx上的完整详细信息](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.enablesession.aspx)

# java - Counterintuinive AsynchronousSocketChannel behaviour

> ID：11476750
> 
> 赞同：3
> 
> 时间：2012-07-13T19:02:21.017
> 
> 标签：java, nio2

Look at the following test:

```
public class AsynchronousSocketTest {
  static PrintStream out=System.out;
  public static  void main(String[] args) throws IOException, InterruptedException, ExecutionException {
    int port=9008;
    InetSocketAddress addr=new InetSocketAddress("localhost", port);
    AsynchronousChannelGroup acg=AsynchronousChannelGroup.withThreadPool(Executors.newFixedThreadPool(1));
    // server not working, client trying to connect
    AsynchronousSocketChannel conn1=AsynchronousSocketChannel.open(acg);
    Future<Void> connfut1 = conn1.connect(addr); // no error, question 1
    Thread.sleep(100);
    out.println("connected1:"+connfut1.isDone());
    // start server
    AsynchronousServerSocketChannel assch=AsynchronousServerSocketChannel.open(acg);
    assch.bind(addr);
    // accept
    Future<AsynchronousSocketChannel> accfut1 = assch.accept();
    Thread.sleep(100);
    out.println("accepted1:"+accfut1.isDone());  // did not accept, question 2
    out.println("connected1:"+connfut1.isDone());  // did not connected
    // try new client connection
    AsynchronousSocketChannel conn2=AsynchronousSocketChannel.open(acg);
    Future<Void> connfut2 = conn2.connect(addr);
    Thread.sleep(100);
    out.println("connected2:"+connfut2.isDone()); // connected
    out.println("accepted1:"+accfut1.isDone());  // accepted
    // accept
    Future<AsynchronousSocketChannel> accfut2 = assch.accept();
    Thread.sleep(100);
    out.println("accepted2:"+accfut2.isDone()); // not accepted
    out.println("connected1:"+connfut1.isDone()); // still waiting
  }
} 
```

On Windows java 1.7.0_05 it prints:

```
 connected1:false
 accepted1:false
 connected1:false
 connected2:true
 accepted1:true
 accepted2:false
 connected1:false 
```

The questions are:

1.  why does the first `conn1.connect(addr)` not fail, although the server port is not bound yet?
2.  why does the first `assch.accept()` not accept the already pending client connection?

I've read JDK's javadoc and could not find answers.

# python - Python matplotlib barbs/quiver 将颜色映射到不同的值集

> ID：11476752
> 
> 赞同：4
> 
> 时间：2012-07-13T19:02:24.893
> 
> 标签：python, vector, colors, matplotlib

我正在尝试在 matplotlib 中创建一个倒钩向量图并将一些颜色映射到特定的幅度：例如，将幅度在 10 到 20 之间的向量绘制为蓝色，将 20 到 30 之间的向量绘制为 rgb(0,15,40)，等等。barbs 和 quiver 函数的文档（它们相似）提到了 C 输入 arg：

* * *

倒钩(X, Y, U, V, C, **kw)

论据：

X, Y：倒钩位置的 x 和 y 坐标（默认为倒钩头；参见 pivot kwarg）

U, V：给出倒钩轴的 x 和 y 分量

C：用于将颜色映射到倒钩的可选数组

* * *

但是，这很模糊，在谷歌搜索之后，我对如何以特定方式使用这个颜色数组并没有更深入的了解。我设法发现，通过将 C 设置为向量幅度数组并指定“cmap”kwarg，它会将倒钩映射到指定的颜色图，如下面的示例代码所示。然而，这不是我想要的。我想控制特定数量级的颜色。任何帮助，将不胜感激。

示例代码：

```
from matplotlib import pyplot as plt
from numpy import arange,meshgrid,sqrt

u,v = arange(-50,51,10),arange(-50,51,10)
u,v = meshgrid(u,v)
x,y = u,v
C = sqrt(u**2 + v**2)
plt.barbs(x,y,u,v,C,cmap=plt.cm.jet)
plt.show() 
```

生成的情节图片链接：（抱歉不能直接发布图片）

[http://i49.tinypic.com/xombmc.jpg](http://i49.tinypic.com/xombmc.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:11:14.943

您可以通过离散化地图来获得它。

```
import matplotlib as mpl 
import pyplot as plt
from numpy import arange,meshgrid,sqrt

u,v = arange(-50,51,10),arange(-50,51,10)
u,v = meshgrid(u,v)
x,y = u,v
C = sqrt(u**2 + v**2)
cmap=plt.cm.jet
bounds = [10, 20, 40, 60]
norm = mpl.colors.BoundaryNorm(bounds, cmap.N)
img=plt.barbs(x,y,u,v,C,cmap=cmap,norm=norm)
plt.colorbar(img, cmap=cmap, norm=norm, boundaries=bounds, ticks=bounds)
plt.show() 
```

![在此处输入图像描述](../Images/f7b06eae958c10de375de43b4c90952b.png)

# coldfusion - 使用隐藏的 CFInput 传递值

> ID：11476753
> 
> 赞同：1
> 
> 时间：2012-07-13T19:02:29.353
> 
> 标签：coldfusion, cfinput

我正在尝试制作具有编辑功能的表格，但在尝试将旧值与更新值关联时遇到了问题。我的解决方案是包含一个隐藏的 CFInput，它将旧值与要更新的值一起传递，然后查询在 cfc 中运行。

```
<cfform name="update" method="post">
<cfoutput query="allusers">
    <tr>
        <td>#username#</td>
        <td>#email#</td>
        <td>#securityID#</td>
        <td><a href="">DELETE</a></td>
    </tr>
        <td><cfinput name="oldUsername" value="#username#" type="hidden"></cfinput><cfinput name="updateUsername" value="New Value"></cfinput></td>
        <td><cfinput name="oldEmail" value="#email#" type="hidden"></cfinput><cfinput name="updateEmail" value="New Value"></cfinput></td>
        <td><cfinput name="oldSecurityID" value="#securityID#" type="hidden"></cfinput><cfinput name="updateSecurityID" value="New Value"></cfinput></td>
        <td><cfinput name="submit" type="submit"></cfinput>
    <tr>
        <cfdump var="oldUsername">
</cfoutput> 
```

目前我没有收到任何错误，但它似乎没有传递旧值。有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:16:44.913

确保您的 CFDUMP 正在使用哈希标签：

```
<cfdump var="#oldUserName#"> 
```

否则它不会转储变量的内容。

其次，当 ColdFusion 还没有机会为您设置 oldusername 时，您要求 ColdFusion 评估“oldusername”。使用 CFINPUT 标记，只需将 HTML 中的它重写为具有 JavaScript 和/或 Flash 增强功能的常规标记。所以 form.oldusername 只有在帖子被执行到下一个 CF 模板/url 之后才可用。我还强烈建议您对变量进行范围（形式，变量等......），这样事情就不会越过（除非您仔细了解变量范围搜索顺序）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:34:46.293

其他人已经提供了你的答案。我的回答只是关于你的表格的建议。

您隐藏的 cfinputs 不应该在表格中。表格用于显示的项目。将隐藏的 cfinputs 移动到 cfform 标签下会更好，如下所示：

```
<cfform name="update" method="post">
// NON DISPLAY STUFF
<cfinput name="oldUsername" value="#username#" type="hidden">
<cfinput name="oldEmail" value="#email#" type="hidden">
<cfinput name="oldSecurityID" value="#securityID#" type="hidden">
// DISPLAY STUFF
<table>
</table>
</cfform> 
```

# java - Client-Server application JAVA, server don't receive data

> ID：11476755
> 
> 赞同：3
> 
> 时间：2012-07-13T19:02:31.983
> 
> 标签：java, swing, client-server

I have a problem when the client send data to the server. When I send data from the server to the client everything is okay. I received this message: "client receive: message" but then when I send "client's message", my server do not receive it.

```
import java.io.IOException;

import java.net.*;
import java.io.*;

public class Server {    
    public static void main(String[] args) throws IOException {

        ServerSocket serverSocket = null;
        try {
            serverSocket = new ServerSocket(4444);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            System.exit(1);
        }

        Socket clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
        } catch (IOException e) {
            System.err.println("Accept failed.");
            System.exit(1);
        }

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(
                                new InputStreamReader(
                                clientSocket.getInputStream()));
        String inputLine, outputLine;

        outputLine = "message";
        out.println(outputLine);

        while ((inputLine = in.readLine()) != null) {
            System.out.println("server receive: " + inputLine);
            outputLine = "second message";
            out.println(outputLine);
        }

        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    }
}

public void actionPerformed(ActionEvent e) {

    if (e.getSource() == startButton) {
        this.main.getContentPane().remove(homePanel);
        String name = this.name.getText();

        String result;            
        try {
            connectionToServer();
            if ((result = in.readLine()) != null) {
                System.out.println("client receive: " + result);
                out.println("client's message");
            }
        } catch(IOException err) {
            System.out.println("error");
        }

    }        
}

public void connectionToServer() throws IOException {
    try {
        this.socket = new Socket("localhost", 4444);
        this.in = new BufferedReader(new InputStreamReader(this.socket.getInputStream()));
        this.out = new PrintWriter(this.socket.getOutputStream(), true);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for the connection to: taranis.");
        System.exit(1);
    }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:26:39.570

你的 actionPerformed 方法只是链接服务器而不做任何事情。

服务器在发送消息后关闭。

观看：while ((inputLine = in.readLine()) != null)

如果客户端不发送任何消息，代码将中断，然后您关闭服务器。

# php - PHP Session variables aren't carrying over

> ID：11476756
> 
> 赞同：0
> 
> 时间：2012-07-13T19:02:43.350
> 
> 标签：php, login, session-variables

I'm having some trouble with a user login that suddenly stopped working. I've got a session_start(); at the top of every page that needs it, but the session variables I've declared seem to have just stopped carrying over to the login pages.

I can also disable the redirect and print_r($_SESSION) on the login page, which will print the appropriate variable.

Here's the code for the login page:

```
<? session_start(); ?>
<?php include($_SERVER["DOCUMENT_ROOT"]."/_/includes/head.php"); ?>
<?php 
if (isset($_POST['submitted'])){
            $username = $_POST['username'];
            $password = $_POST['password'];
            function enc($string){
            $salt = "2@xp";
            $hash = sha1(md5($salt.$string)).md5($string).sha1(md5(md5($string)));
            return $hash;
            }
            $pass = enc($password);
            if($username&&$password){

                $query=mysql_query("SELECT * FROM `users` WHERE `username`='$username'");
                $numrows = mysql_num_rows($query);
                if ($numrows!=0){
                    while ($row = mysql_fetch_assoc($query)){
                    $dbusername = $row['username'];
                    $dbpassword = $row['password'];

                    //check to see if they match
                    if ($username==$dbusername&&$pass==$dbpassword){
                    echo ("You're in! <a href='index.php'>Home</a>");
                    $_SESSION['username'] = $dbusername;
                    session_register("username");
                    header("Location: index.php");
                    }
                    else echo ("Incorrect Password");               
                    }
                }
                else header("Location: login.php");

            }
            else echo ('Login Failed');
}

?> 
```

And here is the code for the page to be redirected to at login:

```
 <?php
    session_start();
    if ($_SESSION['username']){
    echo "<section id='login'><a href='logout.php'>Logout</a></section>";
    $user = $_SESSION['username'];
    }
    else header("Location: login.php");
?> 
```

I get kicked back to the login page every time. Any help would be awesome. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:15:22.503

对于登录/注册，我建议改用 cookie：

[http://www.w3schools.com/php/func_http_setcookie.asp](http://www.w3schools.com/php/func_http_setcookie.asp)

# html - 将东西放在 Bootstrap 的网格之外而不滚动

> ID：11476759
> 
> 赞同：1
> 
> 时间：2012-07-13T19:02:48.573
> 
> 标签：html, css, grid, twitter-bootstrap

我使用 Twitter Bootstrap 和 940 像素的非流动非响应网格。我想在 1200 像素处插入一个图像旋转器，我成功了，但是当我缩小浏览器窗口时，我得到一个 1200 像素的水平滚动条。我希望浏览器以 940px 网格为中心，所以当我缩小窗口时，水平滚动条不会在我达到 940px 之前出现。

我知道我可以使用背景图像宽度 100% 宽度并居中，但如果我想放入正常内容和 div 等宽度固定宽度怎么办？

这是我制作的草图：http: [//f.cl.ly/items/1x3f3w1B1X461q3b2H21/bootstrap-grid.jpg](http://f.cl.ly/items/1x3f3w1B1X461q3b2H21/bootstrap-grid.jpg)

例如，我在图像计数器的最右边有一个 div。如果你有一个 1200px 以上的大屏幕，那很好，你可以看到它，但如果你只有 1024px，那么你就看不到它，你现在也将有任何水平滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:27:46.123

我认为你必须溢出-x：无；然后在窗口宽度低于 940 时用 javascript 触发滚动条。我不相信还有其他方法。

# wcf - 使用 WcfTestClient 时 WCF 服务引发超时错误

> ID：11476761
> 
> 赞同：1
> 
> 时间：2012-07-13T19:02:50.087
> 
> 标签：wcf, web-config, wcftestclient

如果我发送将导致大量数据被提取的参数，我会收到以下错误：

**00:01:00 后等待回复时请求通道超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。**

我增加了所有的超时时间。我必须在客户端做些什么吗？我想知道这是否是因为我使用的是 wcftestclient？我需要调整 operationTimeout 吗？

我的 webconfig 有以下内容：

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="Basic" sendTimeout="12:00:00" receiveTimeout="12:00:00" openTimeout="00:10:00" closeTimeout="00:10:00"
                 maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="8192"/>          
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="CaseStudyBehavior" name="EDTFS.ADMS.CaseStudyService">        
        <endpoint address="" 
                  binding="basicHttpBinding"
                  bindingConfiguration="Basic"                    
                  name="Basic"                    
                  contract="EDTFS.ADMS.ICaseStudyService" />
        <endpoint address="mex" 
                  binding="mexHttpBinding"
                  name="Metadata"
                  contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CaseStudyBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceTimeouts transactionTimeout="24:00:00"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentInstances="100" maxConcurrentSessions="100"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:40:48.260

在 WCF 测试客户端中，您将`Config File`在服务下方找到一个名为的节点。右键单击它并选择`Edit with SvcConfigEditor`增加客户端的超时时间。

# objective-c - 通过 ScriptingBridge 从 Mail.app 保存附件（目标 C）

> ID：11476763
> 
> 赞同：0
> 
> 时间：2012-07-13T19:02:53.723
> 
> 标签：objective-c, scripting-bridge

我正在尝试通过 scriptingbridge 从 Mail.app 检索附件。我正在使用以下代码来访问我的收件箱消息。

```
MailApplication *mailApp = [SBApplication applicationWithBundleIdentifier:@"com.apple.mail"];
MailMailbox *inbox = [mailApp inbox];
SBElementArray *messages = [inbox messages]; 
```

通过迭代`SBElementArray`，我可以访问单个`MailMessage`对象。

每个`MailMessage`对象都有一个获取另一个对象的 getter `SBElementArray`，这次用`MailMailAttachment`对象填充。

它正在工作，因为如果我放一个`NSLog(@"count:%lu",mailitem.attachments.count);`它会打印正确数量的附件。文件名和大小也正确打印。

但是当我遍历附件数组并保存它时，什么也没有发生。

```
NSURL *url = [[NSURL new] initFileURLWithPath:@"/Users/usr/Documents/tmp/"];
NSLog(@"count:%lu",mailitem.attachments.count);
for (MailMailAttachment *attachment in mailitem.attachments) {
   NSLog(@"name:%@",attachment.name);
   NSLog(@"size:%ld",attachment.fileSize);
   [attachment saveIn:url as:MailSaveableFileFormatNativeFormat];
} 
```

我没有找到有关此方法的任何文档。从头文件中，它说：

```
- (void) saveIn:(NSURL *)in_ as:(MailSaveableFileFormat)as;  // Save a document. 
```

我假设 NSURL 是我要存储文件的地方，但我不知道`MailSaveableFileFormat`. 我正在传递`MailSaveableFileFormatNativeFormat`，我在头文件中找到了，但正如我所说，没有任何反应。甚至没有简单的错误消息。

我还尝试使用目录和完整的文件路径（路径+文件名）初始化 NSURL。结果相同。

有没有人有一个例子？我该如何保存？

TIA,

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:47:45.320

我设法解决了这个问题。我初始化 NSURL 错误...有效的代码是：

```
for (MailMailAttachment *attachment in mailitem.attachments) {
   NSString *filePath = [NSString stringWithFormat:@"%@%@",@"/Users/usr/Documents/tmp/",attachment.name];
   NSURL *fileUrl = [NSURL fileURLWithPath:filePath];
   [attachment saveIn:fileUrl as:MailSaveableFileFormatNativeFormat];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:11:16.310

在我的旧系统上，我使用文件路径和 nil 像这样`[attachment saveIn:file_Path as:nil];`

在我的“Mail.h”中：`saveIn:(NSString *)in_ as:(NSString *)as;`。

我知道它在 Lion **NSURL**而不是**NSString** ) 上发生了变化，但不是在 AppleScript 脚本中，您必须指定文件路径而不会受到任何其他参数的影响 -->`save thisAttachment in filePath -- Applescript`

所以我认为完整的**文件路径 + as:nil**应该可以工作。

# python - 与列表字典和值有关的文件输出错误

> ID：11476764
> 
> 赞同：1
> 
> 时间：2012-07-13T19:02:58.660
> 
> 标签：python, file, printing

所以我的代码工作正常，但它不仅会打印出一半的正确结果。我正在尝试将标题写入文件。我已经检查并打印了计算，这是正确的。但是，我只打印了一个正确编号的文件，而没有打印出另一个文件。

```
lookup[uniprotID] =['177','26','418'] 
```

没有正确打印出来的文件有这个信息：`start 174 and end 196`。

该文件应具有以下结果：

> uniproID | 在 3 位置
> 
> YSADACERD

这是我的代码。

```
for i, (start, end) in enumerate(searchPFAM(fname)):

    print start, end
    for item in lookup[uniprotID]:
        item, start, end = map(int, (item, start, end))

        if start <=end:
            if item in xrange(start, end+1):
                print item
                with open('newfile-%s.txt' % i,'w') as fileinput:
                    atPosition = (item)-start
                    result = str(atPosition)
                    fileinput.write(">"+uniprotID+' | at '+result +' position\n')
                    text=''.join(makeList[(start-1):(end)])
                    fileinput.write(text)
            else:
                with open('newfile-%s.txt' % i,'w') as fileinput:
                    fileinput.write(">"+uniprotID+' | '+ 'N/A\n')

                    text=''.join(makeList[(start-1):(end)])
                    fileinput.write(text) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:24:50.527

Perhaps the problem is that `open('newfile-%s.txt' % i,'w')` opens a file for writing, overwriting any existing file of that name. If that's the problem, try opening it for appending `open('newfile-%s.txt' % i,'a')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:05:35.607

正如 MRAB 所说，您很有可能多次覆盖同一个文件。`with`将块拉出`for item in lookup[...]`块以确保文件不会被覆盖。请注意，如果多个项目`lookup[unitProtID]`与 if 条件匹配，则该文件将被多次写入。

```
for index, (start, end) in enumerate(searchPFAM(fname)):
    with open('newfile-%s.txt' % index,'w') as fileinput:
        print start, end
        for item in lookup[uniprotID]:
            item, start, end = map(int, (item, start, end)) #You shouldn't be doing this here, you should convert these variables to ints when you first store them in "lookup".
            if start <= item <= end:
                print item
                result = str(item - start)
                fileinput.write(">{0} | at {1} position\n".format(uniprotID, result))
                fileinput.write(''.join(makeList[start-1:end]))
                break #exit loop, move onto next file.
        else:
                fileinput.write(">{0} | N/A\n".format(uniprotID))
                fileinput.write(''.join(makeList[start-1:end])) 
```

如果这仍然给您带来问题，我建议您替换`fileinput.write(...)`with的每个实例`print ...`，并查看您的输出内容。

# c# - 使用噪声生成行进立方体地形？

> ID：11476765
> 
> 赞同：0
> 
> 时间：2012-07-13T19:03:04.113
> 
> 标签：c#, xna, terrain, marching-cubes, voxels

我已经成功地在 C# XNA 中制作了一个行进立方体类，并且正在使用 Lib 噪声来生成 3d perlin 噪声，但是当我尝试使用 perlin 噪声的值作为我的行进立方体的密度来生成地形时，它会生成一大块行进的立方体，里面有看似随机的三角形。我分离了行进立方体，并给它任意的 3d 密度数组来运行，这样我就可以确保一切正常并且看起来很好，我让地形生成代码生成了正常的立方体，我得到了一个正常的地形，但是问题是每个立方体的角落从噪声中获取值总是从负数转换为正数如此之快，以至于行进的立方体看起来就像一团乱七八糟的东西。

这是我用来生成地形的代码：

```
 public MarchingCube[, ,] getTerrainChunk(int size, int stepsize)
    {
        MarchingCube[, ,] temp = new MarchingCube[size / stepsize, size / stepsize, size / stepsize];
        for (int x = 0; x < size; x += stepsize)
        {
            for (int y = 0; y <size; y += stepsize)
            {
                for (int z = 0; z < size; z += stepsize)
                {
                    Vector3[] corners = { new Vector3(x,y,z), new Vector3(x,y+stepsize,z),new Vector3(x+stepsize,y+stepsize,z),new Vector3(x+stepsize,y,z), new Vector3(x,y,z+stepsize), new Vector3(x,y+stepsize,z+stepsize),
                       new Vector3(x+stepsize,y+stepsize,z+stepsize), new Vector3(x+stepsize,y,z+stepsize)};
                    float[] densities = { GetDensity(corners[0]),GetDensity(corners[1]),GetDensity(corners[2]),GetDensity(corners[3]),GetDensity(corners[4]),
                                            GetDensity(corners[5]),GetDensity(corners[6]),GetDensity(corners[7])};
                    if (x == 0 && y == 0 && z == 0)
                    {
                        temp[x / stepsize, y / stepsize, z / stepsize] = new MarchingCube(densities, corners, device);
                    }
                    else
                        temp[x / stepsize, y / stepsize, z / stepsize] = new MarchingCube(densities, corners);
                }
            }
        }
    return temp;
 } 
```

GetDensity 方法如下：

```
private float GetDensity(Vector3 point) 
{
  return (float)terrain.GetValue(point));
} 
```

我认为问题在于我没有正确使用噪音来获得行进立方体角的密度，但到目前为止，我的谷歌搜索结果根本没有太大帮助。那么有谁知道如何正确使用噪声来生成平滑的地形？或者还有什么可能导致这个问题？

[我在http://imgur.com/a/D1uMC](http://imgur.com/a/D1uMC)发布了屏幕截图 ，前两个使用行进立方体显示，最后一个是普通立方体。

编辑：所以从图片中我发现行进的立方体实际上是按照它们所赋予的值来工作的，问题在于我的噪音以及我如何使用它。有谁知道任何好的资源用于基于噪声的 3d 地形生成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:06:14.307

问题是我是如何在噪音中阅读的，默认情况下我被难以置信地“缩小”了，所以通过将步长更改为浮点数，然后使用更小的增量，我能够获得所需的结果。基本上“放大”了噪音区域。

# c# - C# HttpWebRequest POST => !! 处理请求时出现意外错误：无效的 %-encoding

> ID：11476770
> 
> 赞同：0
> 
> 时间：2012-07-13T19:03:33.393
> 
> 标签：c#, .net, json, serialization

我面临一个问题，我尝试从 C# 应用程序与 Ruby API 进行通信。

我需要发布一些 JSON 数据，参数名称为“data”，但 API 返回：'!! 处理请求时出现意外错误：无效的 %-encoding'。

我尝试将 Content-Type 设置为 'application/json' 和 'application/x-www-form-urlencoded; 字符集=utf-8'。

我的 POST 数据看起来像这样 'data=some_json_string'。

我想我应该转义 json 字符串，所以如果这是我的问题，如何在不使用 3rd 方库的情况下使用 .NET 来做到这一点？

代码：

```
 byte[] data = System.Text.ASCIIEncoding.UTF8.GetBytes(sdata);

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(url, UriKind.Absolute));

        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded; charset=utf-8";
        request.ContentLength = data.Length;

        Stream reqStream = request.GetRequestStream();

        // Send the data.
        reqStream.Write(data, 0, data.Length);
        reqStream.Close(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:12:36.557

假设传入的字符串 sdata 已经是 JSON 格式，您可以这样做：

```
using (WebClient wc = new WebClient())
{
    string uri = "http://www.somewhere.com/somemethod";
    string parameters = "data=" + Uri.EscapeDataString(sdata);
    wc.Headers["Content-type"] = "application/x-www-form-urlencoded";
    string result = wc.UploadString(uri, parameters);
} 
```

根据消费服务，它可能需要将 Content-type 设置为 application/json？

# php - PHP 脚本使服务器超载

> ID：11476773
> 
> 赞同：2
> 
> 时间：2012-07-13T19:03:41.267
> 
> 标签：php, mysql, performance, apache

我必须每天运行一个 php 脚本，代码是这样的：

```
<?php
// SET PROCESS PRIORITY

// SETTING UP THE LOG FILE
$ob_file = fopen('sync.log','w');

function ob_file_callback($buffer)
{
  global $ob_file;
  fwrite($ob_file,$buffer);
}

ob_start('ob_file_callback');

// GET PARAMETERS
$lastid=$_GET['lastid'];
    if ($lastid && !is_numeric($lastid)){
        die("Loser");
    }

// SERVER ROOT CONFIGURATION
$serverpath = 'http://dev.xxx.com/ops/';

// FACEBOOK SDK
require '../classes/facebook.php';
require '../classes/fbconfig.php';

// MYSQL CONFIG
include('../dbconfig.php');

// OPEN DATABASE CONNECTION $CON

$con = mysql_connect($dbhost,$dbuser,$dbpass);
mysql_select_db($dbname, $con);

// GET LAST ID FROM DATABASE AND COUNT TO ZERO
// ONLY 10 PER TIMES
$sql = "SELECT * FROM ops_pictures
ORDER BY id DESC
LIMIT 10;";

$query = mysql_query($sql,$con);

while($row = mysql_fetch_array($query)) {

    if (!$lastid){  
        $lastid = $row['id'];
    }
}

//START COUNTING
for ($i = $lastid; $i >= 0 ; $i --)
    {

// set_time_limit(); // RESET TIMEOUT TO GO FOREVER

echo $i .' - ';

// LOAD RECORDS FROM FACEBOOK AND DISPLAY THE PHOTO URL

// Get User ID
$user = $facebook->getUser();

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(
   array(
    'scope'      => 'email,offline_access,user_likes,read_stream,publish_stream,user_about_me,user_photos'
    )
 );
};

// FQL QUERY FOR THE PICTURE
$actualurl = $serverpath . 'photo.php?pid=' . $i;
//echo $actualurl;

try {
        $fql = 'SELECT url, normalized_url, share_count, like_count, comment_count, total_count,
commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url="'.$actualurl.'"';
        $ret_obj = $facebook->api(array(
                                   'method' => 'fql.query',
                                   'query' => $fql,
                                 ));

        // FQL queries return the results in an array, so we have
        //  to get the user's name from the first element in the array.
        $linkstat = $ret_obj[0];

        $theurl = $linkstat['url'];
        $sharecount = $linkstat['share_count'];
        $likecount = $linkstat['like_count'];
        $commentcount = $linkstat['comment_count'];
        $totalcount = $linkstat['total_count'];

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl(); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   

// PUT THE RECORDS IN
$sql = "UPDATE ops_pictures SET likecount='$likecount', sharecount='$sharecount', totalcount ='$totalcount'
 WHERE id='$i'";

mysql_query($sql,$con);

//END COUNT
}

// CLOSE DATABASE
mysql_close($con);
ob_end_flush();

?> 
```

基本上这是一个循环，我的网站中的每张图片都从 Facebook 获取 FQL 查询并将结果存储在我的 MYSQL 数据库中。我什至记录了已完成的文件。

问题： - 如果我从浏览器调用它，它会锁定服务器，并且我尝试加载的任何 php 文件都会永远等待并给出 500 服务器错误。- 我不希望它超时，因为我希望它循环数据库中的所有图片并用新值刷新它们

分辨率 - Cron 作业（这应该允许脚本在“后台”模式下运行，对吗？ - 将脚本分成不同的部分，每次处理 10 张图片（不好） - 在代码之前使用 proc_nice() 为整个 php 指令。

实际上我有这个脚本使服务器超载并且任何东西都无法使用，你怎么看？

非常感谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:47:37.483

在您的服务器上运行任务管理器或顶部，看看它是否正在影响您的 CPU 或内存或两者。

如果它正在影响您的记忆，请使用 unset 并随时清理您的变量，并且不再需要它们，通过每个循环。 [http://php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

如果您遇到 CPU 使用问题，如果您使用的是 unix 或我相信 windows 中的任务管理器有类似的东西，您可以使用 nice。 [我可以限制 php 脚本的最大 CPU 使用率吗？](https://stackoverflow.com/questions/3796429/can-i-throttle-the-max-cpu-usage-of-a-php-script)

另一个瓶颈可能是硬盘吞吐量，但我怀疑这是你的问题。

该程序将需要很长时间才能运行，但最终会完成。

您还可以尝试优化代码并尽可能重用，使用引用而不是赋值，因为这会使副本的内存使用量翻倍。

```
$myvar = &$other_var['var']; 
```

确保将内存使用率设置为高，例如：

```
ini_set('memory_limit', '700M'); 
```

并将您的超时设置为永远像上面一样：

```
set_time_limit (0); 
```

# iphone - iOS NSURLConnection 对象总是返回相同的响应

> ID：11476778
> 
> 赞同：1
> 
> 时间：2012-07-13T19:03:57.757
> 
> 标签：iphone, objective-c, ios, xcode, nsurlconnection

我正在创建一个使用 json web 服务的 iPhone 应用程序。我有一个 NSURLRequest 和 NSURLConnection 对象，用于从该 Web 服务加载 JSON 数据：

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] 
                                    initWithURL:url 
                                    cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                    timeoutInterval:30];
    [request setHTTPMethod: @"POST"];
    //[request setHTTPShouldHandleCookies:YES];

```
//create connection
NSURLConnection *connection = [[NSURLConnection alloc] 
                               initWithRequest:request delegate:self];
[connection start]; 
``` 我第一次执行上述代码时，使用 URL“admin.mydomain.com/param1/value1/param2/value2”，响应正确（JSON 字符串：{“Wrong API Key”}）。

然后我将 url 更改为我的登台服务器：“admin.stg.mydomain.com/param1/value1/param2/value2”。该服务器为我提供了一些完全不同的输出（当我在浏览器中尝试新的 url 时，会显示正确的输出，一个与第一个 url 给我的完全不同的 json 对象），但在我的 iphone 应用程序中，我仍然得到确切的我从另一台服务器得到的相同响应。如果我尝试不存在的网址，我会收到正确的错误消息。

它似乎只是缓存了来自原始服务器的结果并为我的 stg 子域返回相同的值，以某种方式匹配两个 url（这可能吗？），但我已经清除了我能找到的所有缓存数据。我试图清理构建和构建目录，重新启动 xcode，计算机和所有内容，缓存策略设置为忽略缓存（参见代码）。重要提示：我在我的实际 iPhone 上得到了相同的行为，而不仅仅是模拟器。

有谁知道什么可能导致这种行为？我忘记了一些明显的事情吗？

我一直在看这个几个小时，非常感谢任何帮助！

            回答 #1

赞同：1

时间：2012-07-14T07:50:57.220

我已将请求方法更改为“GET”，现在我得到了预期的结果！在浏览器中检查 url 时使用了一个 get 请求，当发布它时我得到一个不同的响应，这恰好与我在开发服务器上得到的完全一样。问题解决了，只需要对后端进行一些调整以允许发布请求！

```

# bash - 用于读取文件中的字段并生成命令的 bash shell 脚本

> ID：11476782
> 
> 赞同：1
> 
> 时间：2012-07-13T19:04:07.810
> 
> 标签：bash, shell

我是 bash shell 脚本的新手，如果能提供可以执行此任务的脚本的建议，我将不胜感激。我有一个包含很多行的文件（list.cqt）。每行都有一个以“/”分隔的字段列表，格式如下：/Field1/Field2/Field3/Field4/Field5/Field6/Field7/Field8/Field9/Field10

例如list.cqt中的内容为：
/F11/F12/F13/F14/F15/F16/F17/F18/F19/F110
/F21/F22/F23/F24/F25/F26/F27/F28/F29/F210
...
/Fx1/Fx2/Fx3/Fx4/Fx5/Fx6/Fx7/Fx8/Fx9/Fx10

（我修改了每个字段内的名称只是为了简化问题。每行中只有字段数是恒定的。每个字段中的内容可以是任何内容 - 数字、字符等）

我需要编写一个脚本来通过从 list.cqt 中读取每一行来执行以下命令：
command arg1 arg2 arg3 *arg4* *arg5* arg6 *arg7* arg8 arg9 *arg10*

读取的每一行只有*arg4*、*arg5*、*arg7*和*arg10*变化。其余一切都保持不变。
*arg4*是 list.cqt 中该行中的 Field4
*arg5*是 list.cqt 中该行中的 Field6第一个命令
*arg7*基本上以 -1000 开头，并且以 100 为增量变化。因此，对于第二个命令，第二个命令将是 -900 ，依此类推，0 表示第 11 个命令，100 表示第 12 个命令，200 表示第 13 个命令等
*。arg10与**arg7*的绝对值相同，但符号相反。因此，如果*arg7*为 -600，*则 arg10*为 600。如果*arg7*为 400，*则 arg10*是-400。

例如，从上面文件示例中的 list.cqt 中读取前两行，命令将是：
command arg1 arg2 arg3 F14 F16 arg6 -1000 arg8 arg9 1000
command arg1 arg2 arg3 F24 F26 arg6 -900 arg8 arg9 900

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:14:21.513

`read`您可以通过 Internal Field Separator控制 shell命令的分隔符`IFS`。如果您读入一个数组，则很容易访问索引值。然后，循环输入并更新计数器变量就变成了一件简单的事情。如果将参数保存到数组中，则可以将扩展数组作为参数传递给命令。

```
#!/bin/bash

# Use set -x to see if the array "args" is getting assigned the values you expect.
IFS='/'
counter=-1000
while read -a fields; do
    (( counter+=100 ))
    args=(
        'arg1' 'arg2' 'arg3'
        "${fields[4]}" "${fields[6]}" 'arg6'
        $counter 'arg8' 'arg9' $(( -1 * counter ))
    )
    # command "${args[@]}"
done < list.cqt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:08:06.843

我`echo`在命令之前添加了，因为最好检查生成的列表是否正确：

```
arg7=-1000
arg10=1000
while read line
do
  set $(echo $line | tr / ' ')
  echo command arg1 arg2 arg3 "$4" "$6" arg6 "$arg7" arg8 arg9 "$arg10"
  arg10=$((arg10-100))
  arg7=$((arg7+100))
done < list.cqt 
```

如果是，只需删除`echo`并运行脚本。

在这里，您`list.cqt`逐行处理并将其部分行设置为 shell 的位置参数；然后你把这部分用作`$4`和`$6`。每次处理文件中的一行时，变量`arg10`和都会增加/减少。`arg7``list.cqt`

**更新**

您还可以使用数组而不是位置参数（感谢 Dennis Williamson 和 kojiro 的提示）：

```
arg7=-1000
arg10=1000
while IFS=/ read line
do
  echo command arg1 arg2 arg3 "${line[4]}" "${line[6]}" arg6 "$arg7" arg8 arg9 "$arg10"
  arg10=$((arg10-100))
  arg7=$((arg7+100))
done < list.cqt 
```

这使代码更快更清晰。

# r - 从r中的列表中制作指标变量

> ID：11476785
> 
> 赞同：2
> 
> 时间：2012-07-13T19:04:16.587
> 
> 标签：r, reshape, indicator

我有一个数据重塑问题，我可以使用一些帮助。

```
 ID          X1         X2         X3         X4         X5
6001 Certificate  Associate Bachelor's   Master's   Doctoral
5001 Certificate  Associate Bachelor's           
3311 Certificate  Associate Bachelor's           
1981 Certificate  Associate Bachelor's   Master's
4001   Associate Bachelor's   Master's           
2003   Associate Bachelor's   Master's   Doctoral
2017 Certificate  Associate                      
1001   Associate Bachelor's   Master's           
5002  Bachelor's 
```

我需要把这些变成虚拟变量

```
 ID    Certificate     Associates      Bachelor         Master        Doctoral      
6001              1              1             1              1               1
5001              1              1             1              0               0 
2017              1              1             0              0               0 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:26:11.893

试试这个`reshape2`包。我假设您的数据集被称为`df`：

```
require(reshape2)
# First, melt your data, using 
m.df = melt(df, id.vars="ID")
# Then `cast` it
dcast(m.df, ID ~ value, length)
#     ID Var.2 Associate Bachelor's Certificate Doctoral Master's
# 1 1001     2         1          1           0        0        1
# 2 1981     1         1          1           1        0        1
# 3 2003     1         1          1           0        1        1
# 4 2017     3         1          0           1        0        0
# 5 3311     2         1          1           1        0        0
# 6 4001     2         1          1           0        0        1
# 7 5001     2         1          1           1        0        0
# 8 5002     4         0          1           0        0        0
# 9 6001     0         1          1           1        1        1 
```

我还没有测试过，但是如果您对因素进行排序，它可能会控制输出列的顺序。

# oracle - 在 Apex 的查询字符串中传递冒号

> ID：11476787
> 
> 赞同：2
> 
> 时间：2012-07-13T19:04:40.033
> 
> 标签：oracle, query-string, oracle-apex

我在顶点报告中有一个链接，它将用户带到不同的页面，并将一些值传递给新页面。该按钮设置为 url，因为传递的项目太多，但我认为这并不重要：

```
f?p=&APP_ID.:27:&SESSION.::&DEBUG.::P27_1,P27_2,P27_3,P27_4,P27_5:0,#1#,#2#,#3#,#NULL# 
```

#1# 等是正在传递的列。一切似乎都正常工作，只是传递的数据通常包含一个冒号 (:)，它通过切断新页面项目中冒号之后发生的任何内容（包括冒号本身）以及之后搞乱任何领域。例如：#2# 中有一个冒号，因此 P27_3、4 和 5 将不会填充值。

我尝试用 '%3a' （冒号的 url 编码）手动替换冒号，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:41:40.670

尝试使用`UTL_URL.ESCAPE()`转义 URL 特殊字符并`UTL_URL.UNESCAPE()`取消转义它们。

您也可以尝试`APEX_UTIL.URL_ENCODE()`，但您需要使用其中一个，即 UTL 或 APEX_UTIL。

# xcode - 如何释放此分配？

> ID：11476788
> 
> 赞同：0
> 
> 时间：2012-07-13T19:04:44.323
> 
> 标签：xcode, memory-leaks, delegates

我在这里的另一个线程上得到了这段代码，它运行良好，但它泄漏了，我不知道如何释放它。我尝试将“autorelease”语句添加到 GoToNext alloc 行。它没有帮助。有谁知道如何正确处理这个？

```
webView.delegate = [[GoToNext alloc] initWithTarget:self andNext:@selector(loadUpdateGraph)]; //leak 
```

这是 GoToNext 代码：

。H

```
 @interface GoToNext : NSObject <UIWebViewDelegate> {
    id __weak target;
    SEL next;
}
-(id)initWithTarget:(id)target andNext:(SEL)next;
-(void)webViewDidFinishLoad:(UIWebView *)webView;
@end 
```

.m

```
#import "GoToNext.h"

@implementation GoToNext
-(id)initWithTarget:(id)_target andNext:(SEL)_next {
    self = [super init];
    if (self) {
        target = _target;
        next = _next;
    }
    return self;
}
-(void)webViewDidFinishLoad:(UIWebView *)webView {
    [target performSelector:next];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:42:32.340

当您创建`GoToNext`using的实例时`alloc`，该实例的保留计数为 1。在您的应用程序中的某处，您必须在丢失对它的唯一引用之前释放此实例（在本例中是 的`delegate`属性`webView`）。a的`delegate`属性`UIWebView`使用`assign`语义，因此将您的实例分配`GoToNext`给该属性不会保留它。这意味着当它仍然是或将指向已释放内存的代表时，您不能`release`或它。`autorelease``webView``webView.delegate`

如果您确定只`webView.delegate`在包含此代码的类的生命周期中设置一次，则只需放入该类`[webView.delegate release]`的方法即可。`dealloc`如果您不止一次设置它，您可以尝试创建如下方法：

```
-(void)setWebViewDelegate:(id)delegate {
    if (webView.delegate) {
        [webView.delegate release];
    }
    webView.delegate = delegate;
} 
```

并使用该方法设置`webView`的委托。还有其他方法可以处理这种情况，但我认为这种方法可能需要对您的代码进行最少的更改。

当然，在我看来，最好的解决方案是[将应用程序转换为 ARC](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，再也不用担心这种事情了。

# objective-c - 如何在 Objective C 中使用 libxml2 解析 XML

> ID：11476791
> 
> 赞同：1
> 
> 时间：2012-07-13T19:04:59.230
> 
> 标签：objective-c, libxml2

这是我的 XML

```
<MyXML ID="tester" Server="example.com">
  <CONF>
    <MYAPP LOCN="/Application/data/" DATADIR="/tmp/data">
     ..
  </CONF>
</MyXML> 
```

这是我正在使用的代码

```
 NSString *xmlFilePath =@"/Applications/conf/MyConf.xml";
  NSLog(@"%@",xmlFilePath);
  NSData *xmlData = [NSData dataWithContentsOfFile:xmlFilePath];
  NSString *xPathQuery =@"/MyXML";
  NSArray *xmlArray = PerformXMLXPathQuery(xmlData,xPathQuery); 
```

它给了我完整的 XML 作为 NSArray。如何遍历这个 NSArray，或者如何使用 XPath 准确地获取节点和属性。我用过

```
 NSString *xPathQuery =@"/MyXML[@ID]"; 
```

但它不返回属性 ID，它只返回 null。

我认为最好遍历 NSArray，但是如何做到这一点（我是 Objective C 的新手，当我寻找遍历由返回的 NSArray 时，我只得到了 HTML NSArray 的示例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:32:53.330

[在 Cocoa文章](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)中查看`libxml2` [包装器](http://projectswithlove.com/projects/XPathQuery.zip)并使用 libxml2 进行 XML 解析和 XPath 查询。

```
NSArray *PerformXMLXPathQuery(NSData *document, NSString *query);
NSArray *PerformHTMLXPathQuery(NSData *document, NSString *query); 
```

> 对于包含在 NSData 对象“document”中的整个 XML 文档，此函数在 NSString“query”中执行 XPath 查询，并为匹配查询的节点返回 NSDictionary 节点对象的 NSArray。
> 
> 列出的两个函数之间的唯一区别是第一个函数需要正确的 XML 数据，而第二个函数需要 HTML 数据。

# c++ - 模板 type_trait 函数，接受给定类型和/或派生类型的容器

> ID：11476796
> 
> 赞同：1
> 
> 时间：2012-07-13T19:05:16.763
> 
> 标签：c++, templates, typetraits

在我的工作中，我们做了很多结对编程，我写了一个函数，它只接受单一类型的容器或其衍生物，但我的同事担心它会通过代码审查，因为它看起来非常丑陋，并说必须做一个更好的方法：

这是签名，Fruit 类是一个基类，我只为这个线程重命名了 Fruit：

```
template <class Container>
typename enable_if<is_base_of<Fruit, typename remove_pointer<typename Container::value_type>::type>::value, void>::type
processFruits(container& fruits)
{
    //process the elements and change them if needed. thats why no const
} 
```

它的作用是：如果它是一个容器并且容器内的类型是水果和/或水果的派生，则返回 void 并启用该函数。我还使用了 std::remove_pointer 因为我需要知道指针的“类型”（容器很可能有指针）。

这可以按预期编译和工作，但正如我所说我不知道​​它是最好的方法，它似乎太冗长并且可能会在代码审查中被削减。

编辑：这也接受模板类，不必是容器。有没有办法可以限制它只接受 STL 容器？

任何替代的想法，还是像现在这样好吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:26:30.223

读起来有点可怕。

对于初学者来说，你不需要说`enable_if<B, void>`你可以说`enable_if<B>`并使用默认的模板参数。

您可以轻松地将其拆分为单独的部分：

```
template <class T>
  struct is_fruity
  : is_base_of<Fruit, T>
  { };

template <class Container, typename Value = typename Container::value_type>
  struct is_fruit_container
  : is_fruity<typename remove_pointer<Value>::type>>
  { };

template<class Container>
  typename enable_if<is_fruit_container<Container>::value>::type
  processFruits(Container& fruits)
  {
    //process the elements and change them if needed. thats why no const
  } 
```

如果你有一个支持别名模板的编译器，你可以让它更容易阅读：

```
template<typename Cond>
  using Require = typename enable_if<Cond::value>::type;

template<class Container>
  Require<is_fruit_container<Container>>
  processFruits(Container& fruits)
  {
    //process the elements and change them if needed. thats why no const
  } 
```

> 这也接受模板类，不必是容器。有没有办法可以限制它只接受 STL 容器？

我不确定“模板类”是什么意思，它只接受嵌套`value_type`类型的类型，该类型是派生自该类型的类型`Fruit`或指向此类类型的指针，它不必是模板。要将其限制为“STL 容器”，您需要编写一个特征来识别“STL 容器”，但是您想定义它。要正确地做到这一点，您需要一个 trait 来测试`begin()`、`end()`、`size()`成员以及容器要求指定的所有嵌套类型`iterator`、`value_type`、 等。

```
template<typename C, typename Chead, typename... Ctail>
struct static_and
{
  static const bool value = C::value && static_and<Chead, Ctail...>::value;
};

template<typename C>
struct static_and<C>
{
  static const bool value = C::value;
};

template<typename C>
struct is_container
: static_and<has_begin<C>, has_end<C>, has_iterator<C>, has_value_type<C> /* etc */>
{ }; 
```

# mysql - Mysql 使用 join 和 count 进行复杂查询来做与子查询相同的工作并在 zend 框架中使用它

> ID：11476800
> 
> 赞同：0
> 
> 时间：2012-07-13T19:05:28.210
> 
> 标签：mysql, zend-framework, join, left-join, zend-db

我有一个相当复杂的查询，我想与 Zend Framework 一起使用。为了做到这一点，我需要将查询从子查询转换为连接。

这是交易：我有 3 个表需要连接才能形成正确的信息。这可以使用以下查询来完成：

```
SELECT 
 ol.orders_id, 
 ol.photos_to_add, 
 ol.locations_id, 
 l.name, 
 (select 
   count(*) 
  from 
   photos as p 
  where 
   p.location_id = ol.locations_id and p.per_order = ol.orders_id) 
  as added 
FROM `order_has_locations` AS ol, 
 `locations` AS l 
WHERE ol.orders_id = 1 and l.id = ol.locations_id 
```

我尝试将其转换为连接：

```
SELECT ol.orders_id, ol.locations_id, ol.photos_to_add, l.name, count(p.id) AS added
FROM order_has_locations as ol
INNER JOIN locations as l on l.id = ol.locations_id
left outer join photos as p on p.per_order = ol.orders_id
where p.location_id = ol.locations_id and ol.orders_id = 1 
```

但是这样就丢失了有关 0 张照片的信息。

我尝试了许多不同的方法都无济于事...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:51:34.243

您需要将 GROUP BY 用于聚合函数。根据定义，左连接是外连接，您无需指定。

```
SELECT ol.orders_id, ol.locations_id, ol.photos_to_add, l.name, count(p.id) AS added
FROM order_has_locations as ol
INNER JOIN locations as l on l.id = ol.locations_id
LEFT JOIN photos as p on p.per_order = ol.orders_id
where p.location_id = ol.locations_id and ol.orders_id = 1
GROUP BY p.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:11:02.967

那是因为 p.location_id = ol.locations_id，将这个条件从 where 移到 join 子句，它应该可以工作。目前它在 where 子句中在 join 评估后应用，因此对于 0 张照片，这个条件结果是 p.location_id = null ，这是错误的，因此行被过滤掉。

```
SELECT ol.orders_id, ol.locations_id, ol.photos_to_add, l.name, count(p.id) AS added
  FROM order_has_locations as ol
 INNER JOIN locations as l on l.id = ol.locations_id
  LEFT outer join photos as p on p.per_order = ol.orders_id 
   AND p.location_id = ol.locations_id 
 WHERE ol.orders_id = 1
 GROUP BY ol.orders_id, ol.locations_id, ol.photos_to_add, l.name 
```

# c# - XNA 键盘状态到字符

> ID：11476808
> 
> 赞同：0
> 
> 时间：2012-07-13T19:06:16.093
> 
> 标签：c#, input, xna, keyboard

> **可能重复：**
> [在 XNA 中正确获取按键以进行聊天](https://stackoverflow.com/questions/9558690/correctly-getting-key-being-pressed-for-chat-in-xna)

我正在使用 C# 开发一个 XNA 项目，并且正在构建几个简单的类来生成表单元素，例如用于用户输入的文本字段。

问题是，考虑到用户在 Windows 中选择的语言，我似乎找不到任何将键盘状态转换为字符的类。

我做了一些研究，显然有一个名为 toUnicode 的函数可以做到这一点（或者我认为），但它仅在 Winuser.h 中的 c++ 中可用。另一方面，XNA 是严格的 c#，所以我不能使用它。

有什么想法可以在 c# 中找到相同的解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:00:13.187

可能想在这里检查一下作为入门： http: [//msdn.microsoft.com/en-us/library/ff966426.aspx](http://msdn.microsoft.com/en-us/library/ff966426.aspx) （使用带有键盘映射的 resx 文件可能是您想要的。

但为了清楚起见，你不能只使用序数键值 (KeyValue) 吗？大多数控制键和箭头等都是通用的。如果您正在为移动进行 WASD，那么您肯定必须为每种文化构建一个资源文件并独立加载它们。

# swing - 在 Swing 应用程序中包含 URL 的内容或在 Swing 中包含 CGI 脚本

> ID：11476815
> 
> 赞同：1
> 
> 时间：2012-07-13T19:06:48.323
> 
> 标签：swing

我有一个网络摄像机，我想将流输入到我的摇摆应用程序中。由于似乎没有任何可用的流，我唯一的选择是显示整个网站或 cgi 脚本。cgi 脚本的 URL 如下所示：

http://IP/videostream.cgi?user=gast&pwd=

有没有办法将内容显示到摇摆容器，包括刷新内容？我也会询问网络摄像机的公司是否有可用于捕获的流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:08:49.600

凸轮的当前视图通常作为图像标签包含在 HTML 端中。您可以下载 Html Source 并提取图像 URL。现在您可以在 Java 中创建一个 URL 对象并从 URL 输入流下载图像。您可以使用 ImageIO 将接收到的字节转换为 Image。

# javascript - 可以使用 $(this).parent().parent() 吗？

> ID：11476816
> 
> 赞同：0
> 
> 时间：2012-07-13T19:06:48.340
> 
> 标签：javascript, jquery, css

我有以下 HTML：

```
<div id="wrapper">
      <div class="p1">
          <a href="#" class="quickFlipCta"><img src="Test Pictures/QuestionMark.gif" /></a>
      </div>

      <div class="p2">
          <a href="#" class="quickFlipCta"><img src="Test Pictures/flower.gif" /></a>
      </div>
</div> 
```

我有一个在用户单击链接时启动的功能：

```
$('a').click(function(){
   //some code here
}); 
```

在函数中，我想访问“包装器”div。这样做的最佳方法是什么？我试过了：

```
$('a').click(function(){
     $(this).parent().parent().
     //modification to wrapper
    }); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:09:08.637

这是完全有效的，你确定你的点击函数被调用了吗？

最好的方法是使用 id。只需使用`$("#wrapper")`

您也可以`.closest`像这样使用，`$(this).closest('#wrapper')`尽管我会推荐 id 方法而不是 .closest

通过调用 alert 或 console.log 检查你的 click 函数是否被调用

```
$('a').click(function(){
   alert("Called");
   console.log("Called");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:09:37.193

虽然您可以使用链式父`$(this).parent().parent()`级遍历树。

最好使用最接近的方式向上遍历寻找与选择器匹配的最接近的父级，因此对标记的唯一要求是链接在内部`div#wrapper`。

```
 $('a').click(function(){
   $(this).closest('div#wrapper')
   //modification to wrapper
  }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T19:32:39.980

根据[您的评论](https://stackoverflow.com/a/11476842/1512640)，我假设您正在尝试向动画队列添加 CSS 更改。问题是这不能完成，因为`css()`调用没有动画任何东西，所以两个`css()`调用都会立即发生。

您仍然可以通过执行以下操作来完成您正在尝试的事情：

```
$('#wrapper').css('visibility','hidden').delay(500).queue(function(next) {
    $('#wrapper').css('visibility','visible');
    next()
}); 
```

[见 jQuery`delay()`](http://api.jquery.com/delay/)

### [演示](http://jsfiddle.net/ZMFZT/1/)

# ruby-on-rails - Respond_with 模板和状态码

> ID：11476819
> 
> 赞同：1
> 
> 时间：2012-07-13T19:07:03.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3, respond-with

在某些情况下，在 Rails 3 中使用 respond_with 时，我需要同时拥有模板和返回错误代码。

我有一个前置过滤器，如下所示：

```
def ensure_premium
  respond_with("Must be a premium user!", status: 401, location: nil) unless current_user.is_premium?
end 
```

以及执行以下操作的创建操作：

```
def create
    @wait_list = @hangout.wait_lists.find_or_create_by(user_id: current_user.id)
    respond_with(@wait_list) do |format|
      format.json {render 'create', status: 201}
    end
end 
```

即使之前的过滤器跳闸，它仍然会尝试渲染导致错误的模板。为了让它返回正确的错误和状态代码而不呈现模板，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:23:12.307

您有多个 response_with 用于创建操作。但我认为更重要的是，您可能需要：

```
def ensure_premium
  respond_with :json => {:error => "Must be a premium user!", :status => :unauthorized } unless.... 
```

我认为这不是问题，但请确保在您的控制器中有

```
class SomeController < ApplicationController
  respond_to :json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:21:31.867

我最终完全走了一条不同的路线，所以这个问题不再有效。

# sql-server - ASP.NET LINQ 查询使用“into”关键字生成捆绑为序列的结果

> ID：11476825
> 
> 赞同：0
> 
> 时间：2012-07-13T19:07:34.170
> 
> 标签：sql-server, asp.net-mvc, linq

我将 NFL 赛季时间表保存在 SQL Server 数据库中。一个`Game`表具有`Week`（指比赛发生的赛季中的一周 [1-17]）、`AwayTeamID`和`HomeTeamID`等字段。`AwayTeamID`和`HomeTeamID`字段是引用`Team`表的外键。我想使用 LINQ 语句（在 ASP.NET MVC 3 应用程序中）按周返回游戏，包括`Team`表中的团队名称。我知道至少有一种方法可以做到这一点，但具体来说（我希望更优雅），我想返回一个每周与对应于该周的一系列游戏相关联的结果，而不是返回一个对象序列，`new { Game, AwayTeam, HomeTeam }`然后钻入`Game`获得一周的项目。我不确定我是否明确了我的目标……如果没有，请告诉我，我会尽力澄清。

我在[101 LINQ Samples](http://code.msdn.microsoft.com/LINQ-Join-Operators-dabef4e9)`into`上阅读了关于在语句中使用关键字的类似内容`join`，因此结果将是几周的序列，每个都与自己的游戏序列相关联。使用该站点的示例，我尝试了以下操作：

```
 string[] wks = { "1", "2", "3" };

    var model =
        from g in _db.NFLGames
        join a in _db.NFLTeams on g.AwayTeamID equals a.NFLTeamID
        join h in _db.NFLTeams on g.HomeTeamID equals h.NFLTeamID
        select new TestGameModel { Game = g, AwayTeam = a.Name, HomeTeam = h.Name };

    var weekgames = 
        from w in wks
        join gm in model on w equals gm.Game.NFLWeek into gw
        select new TestNflWeeklySchedule { Week = w, Games = gw };

    foreach (var wg in weekgames) {
        System.Diagnostics.Debug.WriteLine("NFL week: " + wg.Week + "     number of games this week: " + wg.Games.Count());
        foreach (var g in wg.Games) {
            System.Diagnostics.Debug.WriteLine("  " + g.AwayTeam + " at " + g.HomeTeam + " [" + g.Game.DateTimeStart + "]");
        }
    } 
```

代码执行，但输出是

```
NFL week: 1     number of games this week: 0
NFL week: 2     number of games this week: 0
NFL week: 3     number of games this week: 0 
```

显然，加入的第二个查询`model`与指定周发生的游戏不匹配。我也尝试过，而不是两个查询，只是一个 LINQ 语句，它基本上将第一个查询嵌套在第二个查询中。这给了我同样的结果。

谁能告诉我我的代码中有什么错误或为什么这不起作用？我是 LINQ 的新手，所以很有可能它很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:30:04.237

这是你要找的吗？

```
var weekGames = _db.NFLGames.GroupBy(g => g.NFLWeek);

foreach (var wg in weekGames)
{
    Debug.WriteLine("Week: " + wg.Key + " Games: " + wg.Count());

    foreach (var g in wg) 
    {
        Debug.WriteLine(g.AwayTeam + " at " + g.HomeTeam + " [" + g.Game.DateTimeStart + "]");
    }
} 
```

# c# - 获取状态为已添加的实体的主键

> ID：11476826
> 
> 赞同：1
> 
> 时间：2012-07-13T19:07:39.057
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

**问题**

我正在为我的 Web 应用程序实现 UnitOfWork 和存储库样式的数据访问层。我想使用我制作的自定义表来审核对数据库的更改。将新项目添加到上下文时会出现此问题。该项目已添加到上下文中，但`SaveChanges()`尚未调用方法，因此实体仍处于`Added`状态。这意味着尚未分配主键，这意味着我无法创建审计记录，并且`SaveChanges()`从存储库调用将违反存储库编码风格。有没有办法在添加状态下获取实体的主键？

**尝试的解决方案**

我能想到的唯一解决方案是使用随机 GUID，以便客户端可以生成它们。我有点犹豫，因为我听说使用随机 GUID 作为身份字段可能会很昂贵。

**代码**

```
//Method in my repository class
public void Insert(T entity)
{
    //Adds the entity the context
    dbSet.Add(entity);

    Audit audit= new Audit 
    {
        Created = DateTime.Now,
        PrimaryKey = entity.Key, //This is not set because the State of the entity is still Added
    };

    Context.Audits.Add(audit);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:13:02.800

简单的答案是您不能在分布式环境中执行此操作。一旦项目被持久化，您不能保证 ID 将是相同的。

使用客户端生成的 GUID 确实可以解决问题。这是我通常采用的方法，但我们不要就此展开辩论！您通常会发现结果是 50/50。两者都有优点和缺点。对于您的场景，它有效！

# jquery - jQuery：我怎样才能改变一些 html 但保留其余部分？

> ID：11476827
> 
> 赞同：2
> 
> 时间：2012-07-13T19:07:43.343
> 
> 标签：jquery

使用 jQuery，我想从我的服务器加载一个页面，修改链接（锚点），但保持 HTML 的其余部分相同。jQuery可以做到这一点吗？

例子：

我想要这个代码...

```
<div>
    text 1<a href="link1.html">link 1</a><br/>
    text 2<a href="link2.html">link 2</a><br/>
    text 3<a href="link3.html">link 3</a><br/>
</div> 
```

...成为这个代码...

```
<div>
    text 1<a href="link4.html">link 1</a><br/>
    text 2<a href="link5.html">link 2</a><br/>
    text 3<a href="link6.html">link 3</a><br/>
</div> 
```

我想要整个代码，包括 DIV。

jQuery可以做到这一点吗？请帮忙！提前致谢。:)

编辑：我加载的每个页面都会有所不同。我想提取完整的 HTML，更改锚点 HREF，然后返回结果。我不能使用模板，因为每个页面都会不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:10:55.560

如果要更改锚标记的 HREF 值，只需使用`attr`*^([[API Ref]](http://api.jquery.com/attr/))*方法：

```
$('a[href="link1.html"]').attr('href', 'link4.html');
$('a[href="link2.html"]').attr('href', 'link5.html');
$('a[href="link3.html"]').attr('href', 'link6.html'); 
```

此代码可以在静态 HTML 或动态加载的 HTML 上运行。没什么区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:09:19.300

如果您使用 jQuery，我建议使用某种类型的模板功能来完成此操作。

这是jQuery 团队正在考虑使用[的旧版本的模板引擎。](http://api.jquery.com/category/plugins/templates/)[以下是一些](https://github.com/jquery/jquery-tmpl)关于它被弃用的原因以及创建新版本的当前进展的更新信息。

还有其他模板方法可以实现这一点。您也可以按照其他人的建议通过 DOM 操作手动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:09:32.110

**您可以使用jQuery**的 .attr() 方法修改元素的属性。**第一个值是您要修改的属性，第二个值是它的新值。**

 **```
$('a').attr('href','yourlinkhere.html'); 
```

...以上将修改所有链接以指向“yourlinkhere.html”。通过遍历所有链接，您可以更具体地了解要编辑的内容，如下所示：

```
$("a").each(function(index){
    $(this).attr('href','link'+index+'.html');
}); 
```

...或通过定位特定链接，如下所示：

```
$("a[href=link1.html]").attr('href', 'yourlinkhere.html'); 
```

...**不过，这种方法的问题在于，您将替换所有指向该页面的实例**。您可能想在链接中添加一个 Id，并像这样定位它们：

```
$("a#specificLinksId").attr('href', 'yourlinkhere.html'); 
```

...或按这样的班级：**

# ruby-on-rails - Unicorn & Heroku - 每个测功机都有不同的配置吗？

> ID：11476829
> 
> 赞同：0
> 
> 时间：2012-07-13T19:08:02.030
> 
> 标签：ruby-on-rails, heroku, resque, sidekiq

我目前正在 2 Heroku dynos 上运行我的应用程序。到目前为止，我需要添加类似于 config/unicorn.rb 的内容：

```
worker_processes 3
timeout 30

@resque_pid = nil

before_fork do |server, worker|
  @resque_pid ||= spawn("bundle exec rake " + \
  "resque:work QUEUES=scrape,geocode,distance,mailer")
end 
```

我有几个不同的后台作业要处理，有些需要单线程运行，有些需要同时运行。这种配置的问题在于，在两个 Unicorn 实例上，它将产生完全相同的 resque worker（相同的队列等）。

如果我可以更改每个 worker 进程的队列类型，或者甚至让一个实例运行 resque worker 而另一个实例运行 sidekiq worker，这将大大简化一切。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:39:36.777

也许您混淆了 unicorn worker_processes 和 Heroku worker？

您可以使用您的 Procfile 为每个队列启动 Heroku 工作程序，并使用一个独角兽进程来处理 Web 请求。

试试这个设置

/config/unicorn.rb

```
worker_processes 4 # amount of unicorn workers to spin up
timeout 30         # restarts workers that hang for 30 seconds 
```

/过程文件

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
worker: bundle exec sidekiq
worker: bundle exec rake resque:work QUEUES=scrape,geocode,distance,mailer 
```

# forms - 电子邮件设计中的搜索/表单输入

> ID：11476832
> 
> 赞同：0
> 
> 时间：2012-07-13T19:08:10.727
> 
> 标签：forms, email

这是来自 Bed Bath and Beyond的精彩[**电子邮件活动！**](http://bargainswoop.com/bed-bath-and-beyond/43610-dont-forget-your-20-off-online-offer-is-waiting-for-you-check-out-our-new-e-circular)这是因为电子邮件活动中可能没有 JS 或 PHP，但是，有一个**有效的搜索表单**。

那么，有人知道它是怎么做的吗？我是一名电子邮件设计师，我想将此功能添加到我公司的时事通讯中。谢谢您的帮助！

**电子邮件中搜索表单的片段**

```
 <table width="650" cellspacing="0" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#6699cc" colspan="9"><img style="display: block;" height="7" width="650" border="0" alt="" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/search_top.jpg"></td>
</tr>
<tr>
<td width="14"><img style="display: block;" height="33" width="14" border="0" alt="" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/search_left.jpg"></td>
<td bgcolor="#336699" width="272"><input class="search" size="36" name="sstr" value="enter keyword" style="display:block; width:240px;"></td>
<td bgcolor="#336699" width="22"><img style="display: block;" height="33" width="13" border="0" alt="" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/spacer.gif"></td>
<td width="71"><input id="SEARCH" title="SEARCH" type="image" height="33" alt="SEARCH" width="71" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/search_submit.jpg" border="0" name="SEARCH" style="display:block"></td>
<td bgcolor="#6699cc" width="7"><img style="display: block;" height="33" width="7" border="0" alt="" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/spacer.gif"></td>
<td width="134"><a href="http://bargainswoop.com/go-to/?http://www.bedbathandbeyond.com/search/searchByBrand.aspx?utm_source=e&amp;utm_medium=e&amp;utm_term=e&amp;utm_content=headerfooter&amp;utm_name=JulyCirc" target="_blank" rel="nofollow"><img style="display: block;" height="33" width="134" border="0" alt="Shop By Brand" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/search_bybrand.jpg"></a></td>
<td bgcolor="#6699cc" width="7"><img style="display: block;" height="33" width="7" border="0" alt="" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/spacer.gif"></td>
<td width="116"><a hrefenter code here="http://bargainswoop.com/go-to/?http://www.bedbathandbeyond.com/nodePage.asp?order_num=-1&amp;RN=856?utm_source=e&amp;utm_medium=e&amp;utm_term=e&amp;utm_content=headerfooter&amp;utm_name=JulyCirc" target="_blank" rel="nofollow"><img style="display: block;" height="33" width="116" border="0" alt="What's New" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/search_whatsnew.jpg"></a></td>
<td bgcolor="#6699cc" width="7"><img style="display: block;" height="33" width="7" border="0" alt="" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/spacer.gif"></td>
</tr>
<tr>
<td bgcolor="#6699cc" colspan="9"><img style="display: block;" height="7" width="650" border="0" alt="" src="http://image.bedbathandbeyond.com/bedbathbeyond/2010/search_test/search_bottom.jpg"></td>
</tr>
</tbody></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:17:10.387

表格应该只是一个普通的表格，没有任何技巧。

[从CSS 技巧](http://css-tricks.com/html-forms-in-html-emails/)中查看这篇文章。

问题是兼容性问题，电子邮件客户端很困难，因为它们多次不遵循相同的标准。您应该逐一介绍您想要支持的客户，看看您是否对结果感到满意。

我正在尝试很多次，稍后会发布一个（简短的）列表。

请注意，正如文章所说，某些电子邮件客户端中可能会有一些警告。

Gmail - 使用警告。

Hotmail - 似乎不起作用（寻找解决方法）。（工作正在进行中）

从[活动监视器](http://www.campaignmonitor.com/resources/will-it-work/forms/)获取的兼容性表：

![在此处输入图像描述](../Images/3df1ec40f768dd836dd08fac2ad458bd.png)

我认为这将取决于您对数据库的了解。

但总而言之，这可能不是一个好主意，因为对于看不到或无法使用它的用户来说，这可能会很烦人，有太多的电子邮件客户端不遵循相同的标准。

# objective-c - 需要 Xcode Openssl RSA 解密功能

> ID：11476833
> 
> 赞同：3
> 
> 时间：2012-07-13T19:08:21.073
> 
> 标签：objective-c, xcode, encryption, openssl, rsa

我正在从 xcode 中的应用程序读取加密字符串，我必须编写一个使用 RSA 解密来解码和显示消息的函数。

我完全不知道从哪里开始。

我在 xcode 中编译了 Openssl，我正在使用 openssl/rsa.h 文件。

我正在尝试使用该功能：

```
RSA_private_decrypt(int flen, const unsigned char *from, unsigned char *to, RSA *rsa, int padding); 
```

但是后来我在 Openssl 主站点上的某个地方读到该函数只返回一个数字而不是实际的字符串。我也不知道要通过什么参数。

我发现的唯一参考是 openssl/rsa.h 文件并查看它包含的函数。

在过去的几个小时里，我尝试做一些研究，但我没有找到任何答案。

我想知道是否有一个简单的函数可以传递我的加密字符串和我的私钥（使用文件或硬编码）并且它可以返回解密的字符串？

如果没有，是否有关于如何在 Objective C 编程中使用 Openssl 的指南？

如果您需要有关此问题的更多信息，请告诉我。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:22:47.517

您可能想查看 Apple 在其[Security Overview](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/Security_Overview/Introduction/Introduction.html)中使用安全转换（这避免了 openssl）的示例。

运气好的话，你可以用苹果变换做一些事情，然后用那个程序。

如果不是 - 或者由于某种原因你真的想使用 openssl；然后 openssl 源包含示例文件，该文件`openssl-0.9.8t/apps/rsa.c`几乎允许选择性剪切和粘贴以使工作正常。

`man RSA_private_decrypt`从命令行执行将显示手册页（或从 Xcode 到手册页）。或查看[http://www.openssl.org/docs/crypto/RSA_public_encrypt.html](http://www.openssl.org/docs/crypto/RSA_public_encrypt.html)。

上述示例用法：

```
unsigned char in[] = { 1, 2, ... byte array to decrypt };
// size of that in byte array
int inlen = sizeof(in);

// output buffer size depends on the key type.
char * out = malloc(RSA_size(rsa)); 

int e = RSA_private_decrypt(inlen, in, out, rsa, RSA_PKCS1_PADDING); 
```

其中 padding 是手册页中的值之一。

rsa 的值初始化起来有点复杂，因为这是您设置密钥的地方，而不是什么。检查上面的 rsa.c 文件以获取各种填充方法的示例 - 它通常归结为以下内容：

```
EVP_PKEY *pkey = load_key( ... , password,... );
rsa = EVP_PKEY_get1_RSA(pkey); 
```

where`load_key`是从 openssl 的应用示例中借来的。

# iphone - 启用多点触控的 CCLayers，顶层不消耗触控

> ID：11476841
> 
> 赞同：0
> 
> 时间：2012-07-13T19:09:00.597
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone, cclayer

我有 2 个 CCLayer 堆叠在一起；两者都启用了触摸功能。我希望顶层 CCLayer 响应并消耗触摸，而底层不对顶层消耗的触摸做出反应。

顶层有一个 CCTouchBegan 方法，如下所示：

```
- (BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    NSLog(@"touched!");

    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    //DO STUFF WITH TOUCH

    return YES;
} 
```

底层有一个 CCTouchesEnded 方法，如下所示：

```
- (void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    //choose one of the touches to work with
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    //DO STUFF WITH THE TOUCH
} 
```

结果是顶层根本不消耗触摸甚至响应它们。只有底层响应触摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:34:08.487

在您的第一层中，您使用来自 CCTargetedTouchDelegate 的方法。CCLayer 将自身注册为 CCStandardTouchDelegate。这就是为什么你的第二层会对触摸做出反应。

# database - 在 Oracle SQL Developer 中限制用户只能访问他自己的表

> ID：11476847
> 
> 赞同：2
> 
> 时间：2012-07-13T19:09:22.037
> 
> 标签：database, oracle11g, privileges, oracle-sqldeveloper, database-permissions

我对 SQL Oracle Developer 中的权限和特权感到困惑。创建的用户可以访问所有 schema/user 的表。我想限制数据库中的特定用户只能访问（ALTER、DROP、UPDATE 等）他自己的表。谁能指定我如何执行此任务。

我的意思是从系统权限中选择哪些权限，以便用户只能访问他自己的表。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:49:03.843

如果满足以下条件，用户将仅对其架构之外的表具有权限

*   每个表的对象级权限已授予用户（直接或通过角色），或
*   系统级权限已授予用户（直接或通过角色），允许他们访问特定类型的所有对象。

如果用户已被授予系统级权限（即`SELECT ANY TABLE`），您可以撤销系统级权限。如果用户已被授予对每个表的显式权限，则您需要撤销对每个表的权限。

我的猜测是用户已被授予`DBA`包含一个或多个`ANY`系统权限的角色（可能是角色）。如果是这种情况，您需要撤销用户的角色或撤销角色的权限。

授予用户哪些角色？

```
SELECT granted_role
  FROM dba_role_privs
 WHERE grantee = <<the user name>> 
```

授予用户哪些系统权限？

```
SELECT privilege
  FROM dba_sys_privs
 WHERE grantee = <<the user name>> 
```

哪些系统权限被授予授予用户的角色？

```
SELECT *
  FROM dba_sys_privs
 WHERE grantee IN (SELECT granted_role
                     FROM dba_role_privs
                    WHERE grantee = <<the user name>>) 
```

# php - Netbeans：CodeIgniter 代码标准的代码格式化程序

> ID：11476848
> 
> 赞同：3
> 
> 时间：2012-07-13T19:09:24.107
> 
> 标签：php, codeigniter, netbeans

我所在的公司正在使用带有 PHP Codeigniter 的 Netbeans。不幸的是，默认的 Netbeans 代码“格式”选项不会产生我们的一些开发人员想要的 Codeigniter 代码标准。有谁知道 Netbeans 插件以不同的方式或基于不同的标准格式化代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:28:30.917

尝试

> 工具 -> 选项 -> 编辑器 -> 格式化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:33:59.103

好吧，也许可以像 CI 那样设置 PHP 代码的样式。我试图找到它的配置（Netbeans 中有导入功能），但很挣扎。可能的是手动匹配 CI PHP 代码格式样式。您需要转到工具->选项->编辑器->格式从“语言”下拉菜单中选择 PHP，并相应地设置所需的类别（对齐、大括号、换行等）。有很多配置，所以可以做到这一点。另一方面，无法导出这些设置。我有 NetBeans 7.1.2。尝试导出我的默认设置以防万一我搞砸了，更改了一些字段并将它们导入回来，但导入后我的原始设置没有恢复。所以这意味着无法导出这些设置，因此这可能是互联网上没有此类配置的原因。

让我们尝试在 Netbeans 论坛中提出这个错误......

# r - 创建 ggplot 堆栈栏和趋势线

> ID：11476849
> 
> 赞同：0
> 
> 时间：2012-07-13T19:09:27.943
> 
> 标签：r, ggplot2

我正在使用名为的数据框`df`：

```
 Date    variable   Value
    1/1/2012 teamA     10
    1/1/2012 teamA     10

    1/1/2012 teamB    10

    1/1/2012 teamC     15

    1/2/2012 teamA    25

    1/2/2012 teamB     30

    1/2/2012 teamC     20 
```

第二个数据框称为`total`

```
 Date      Total
    1/1/2012   50
    1/2/2012   70 
```

我正在尝试创建一个 ggplot stack var 并在同一图表上为总数绘制一条趋势线，如下所示：

```
ggplot(df,aes(x=Date, y=Value, fill=(variable))) +
       geom_bar(stat="identity") + 
       theme_bw() + 
       opts(title = "Team Performance") + 
       xlab("Date") + ylab("Score") + 
       geom_smooth(data=Total,
                   aes(Date,Total,group=1), 
                   method="lm", size=2, color="darkblue") 
```

我收到此错误：

```
Error in eval(expr, envir, enclos) : object 'variable' not found 
```

当我自己这样做时：

```
ggplot(df,aes(x=Date, y=Value, fill=(variable))) +  
geom_bar(stat="identity") + theme_bw() 
```

有用

`variable`对象肯定在那里，有什么想法，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:05:00.057

美学以级联方式映射`ggplot()`到每一层。

这意味着这`fill = variable`是预期的`geom_smooth`，我猜没有什么叫`variable`in `Total`。使用 移动`fill = variable`到或取消`geom_bar`映射它`geom_smooth`。`fill = NULL`

# database - 试图查找包含自定义字段数据的 TFS 数据库表的名称

> ID：11476850
> 
> 赞同：0
> 
> 时间：2012-07-13T19:09:27.723
> 
> 标签：database, tfs

我有一个简单的问题，包含任何自定义字段值的 TFS 2010 数据库表的名称是什么。

我对 TFS_Warehouse DB 和 dbo.DimWorkItem 表进行了查询。但是，我在此表下找不到任何自定义工作项字段。

有人可以指出包含自定义字段数据的正确 TFS 2010 表吗？当我使用 Quality Center 时，表的定义非常好，因此很容易进行后端数据库查询。TFS 似乎并不那么直观。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:42:41.107

您必须在字段定义中添加“可报告”。

示例 - FIELD name="Scope" refname="xxx.Scope" type="String" reportable="dimension"

等待几分钟，您将在仓库 DB 中看到字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:58:05.960

看，你需要去你的集合数据库，并检查一个名为 Fields 的表。在那里，您还将找到新的字段属性和类型。

您可以将类型更改为字符串并可以报告。

转到 WORKITEMLATEST 的表，然后检查字段 - 您可以看到字段的名称，就像 FIELDS 表中提到的那样。

正常打开您的工作项，编辑该字段信息，单击保存...

您可以在 WORKITEMLATEST 表中看到您的数据已更新

但是......问题是字符串类型是有限的......我试图添加更多文本......它一直告诉我字符数超过了限制！

# c# - 在调用 Read() 之前访问字段的尝试无效

> ID：11476855
> 
> 赞同：0
> 
> 时间：2012-07-13T19:09:40.010
> 
> 标签：c#, mysql

我收到错误：在调用 Read() 之前尝试访问字段无效：字符串结果 = Reader.GetString(0);

我不完全确定该怎么做或出了什么问题

```
internal int GetCharGuidByName(string charactername, MySqlConnection connection)
{
    MySqlCommand command = connection.CreateCommand();
    MySqlDataReader Reader;
    command.CommandText = "SELECT guid FROM characters WHERE name=\""+charactername+"\";";
    // Initialize MySQL Reader
    Reader = command.ExecuteReader();
    Reader.Read();
    string result = Reader.GetString(0);
    // If the character doesn't exist or isn't entered, return 0
    int charguid = 0;
    if (result != String.Empty)
    {
        charguid = Convert.ToInt32(result);
    }
    return charguid;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:19:46.073

将代码更改为：

```
Reader = command.ExecuteReader();
int charguid = 0;
if(Reader.Read())
{
   if(Reader[0] != DBNull.Value)
   {
       if(int.TryParse(Reader[0].ToString(), out charguid))
       {
        //value read and is an integer!
       }
   }
}
return charguid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:48:14.383

您应该使用 ExecuteScalar 而不是 ExecuteReader

> ExecuteSaclar 返回结果集中第一行的第一列，或空引用
> 
> ExecuteReader 将作为结果集返回，您必须对其进行迭代才能读取

因此，查看您的代码，您只需要结果集的第一列

```
internal int GetCharGuidByName(string charactername, MySqlConnection connection)
{
    int charguid = 0;

    using(MySqlCommand command = connection.CreateCommand())
    {
      command.CommandText = "SELECT guid FROM characters WHERE name=\""+charactername+"\";";
      object obj  = command.ExecuteScalar();
      if (obj != null && obj != DBNull.Value)
      {
         charguid = Convert.ToInt32(obj);
      }
    }

      return charguid;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T05:55:02.293

```
 openConnection()

            sql = "SELECT last, first, emp_type, active FROM employee INNER JOIN account ON employee.emp_id = account.emp_id WHERE employee.emp_id = '" & AtxtEmpID.Text & "'"

            command = New MySqlCommand(sql, mySqlConnection)

            reader = command.ExecuteReader

            reader.Read()

            AtxtEmpName.Text = reader.Item(0) & ", " & reader.Item(1)

            closeConn() 
```

有保存问题

# .htaccess - 为我们的博客创建搜索引擎友好的网址

> ID：11476857
> 
> 赞同：0
> 
> 时间：2012-07-13T19:09:54.470
> 
> 标签：.htaccess, rewrite, sef

我们经营一个博客，确实需要使用 htaccess 整理 URL，但我真的很难过。

例子：

在网站上工作，我需要生成搜索引擎友好的 URL

所以我目前的网址为：

[http://mywebsite.com/blog/read.php?art_id=11](http://mywebsite.com/blog/read.php?art_id=11)

这个页面的标题是：

**为什么澳大利亚人为汽车支付这么多钱？**

我需要将其更改为相应的 SEF url。像这样：

[http://mywebsite.com/blog/Why-do-Australians-pay-so-much-for-Cars-](http://mywebsite.com/blog/Why-do-Australians-pay-so-much-for-Cars-)？

问号是标题的一部分，如果有问题，我们可以将其删除。请问有什么建议吗？

也希望删除 read.php 部分。需要创建一个适用于我们整个博客的规则。

它们都遵循相同的模式，只是`art_id`数字发生了变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:56:23.723

（假设您使用 apache 作为网络服务器）

看看这个答案非常相似的问题：[https ://stackoverflow.com/a/8030760/851273](https://stackoverflow.com/a/8030760/851273)

这里的问题是 .htaccess 和 mod_rewrite 不知道如何将页面名称映射到 art_id，因此有两种方法可以尝试这样做。

1.  您可以向您添加一些功能，`read.php`以便它可以进行类似的查找，但不是`art_id`, 它使用`art_title`或其他东西。本质上，您必须对数据库（或存储文章的任何位置）进行后端查找，并使用标题而不是 ID 作为键。这有点混乱，因为标题中可能有奇怪的字符，例如非 ascii 或保留字符（`?`例如），因此在从数据库中提取标题或使用时，您需要创建标题编码器和解码器在您的数据库中查找文章的标题。
2.  如果您有权访问服务器配置或虚拟主机配置，则可以[使用外部程序](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)（**prg**类型）设置 RewriteMap 并创建一个为您执行 title-to-ID 查找的 php 脚本。然后，您可以在 .htaccess 中创建重写规则，该规则执行以下操作：

    ```
    RewriteRule ^blog/(.*)$ /blog/read.php?art_id=${title-to-id:$1} [L] 
    ```

    您从漂亮的 URL 中提取文章标题，并通过名为**title-to-id**的重写映射提供它以获取 art_id。同样，您需要设置一个标题编码器/解码器，以便您的标题将处理非 ascci 和保留字符。

您可以做的另一件事是在漂亮的 URL 中添加文章 ID，使它们看起来像这样： http: [//mywebsite.com/blog/11-Why-do-Australians-pay-so-much-for-Cars](http://mywebsite.com/blog/11-Why-do-Australians-pay-so-much-for-Cars)。这仍然很容易看出链接是关于什么的，它对 SEO 友好，并且它绕过了进行标题到 ID 查找的需要。重写规则也同样简单：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# add whatever other special conditions you need here

RewriteRule ^blog/([0-9]+)-(.*)$ /blog/read.php?art_id=$1 [L] 
```

就是这样。当然，您现在必须生成所有博客 URL 的格式为: `http://(host)/blog/(art_id)-(art_title)`，并且您还必须从标题中删除特殊字符，但您不必担心编写额外的代码来翻译标题回到 ID。

# odbc - Lotus Notes：连接错误 [Microsoft] [ODBC 驱动程序管理器] 未找到数据源名称且未指定默认驱动程序

> ID：11476859
> 
> 赞同：0
> 
> 时间：2012-07-13T19:10:01.257
> 
> 标签：odbc, lotus-notes, windows-shell, lotus, lotusscript

在需要与外部 SQL DB 连接的 Lotus Notes 应用程序之一中，我们有一个用户收到错误消息提示，因为 ODBC 驱动程序无法连接。我做了以下检查： 1\. 用户有权编辑注册表 HKLM-Software-ODBC 2\. 用户能够访问数据库服务器（我从用户的机器 ping 服务器 IP） 3\. 确保用户对计算机具有管理员访问权限。

这就是代码的工作方式。该代码首先运行一个设置注册表变量的 VBscript，然后使用带有 NSLXODBC 的 LotusScript 连接到 DB（ConnectTo 方法）。

我发现没有问题的用户和那些报告问题的用户之间的唯一区别是 USER REPORTING ISSUE 有新的笔记本电脑并且它有 Windows 7 操作系统。

Lotus Notes 版本：6.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:27:19.787

问题可能出在 ODBC 设置中。注册表更改应该设置 ODBC 连接，但我敢打赌，相同的代码不适用于 Windows 7。尝试从该用户的笔记本电脑手动创建 ODBC 连接。

# java - 在 Android 中播放和停止 MediaPlayer

> ID：11476864
> 
> 赞同：2
> 
> 时间：2012-07-13T19:10:18.857
> 
> 标签：java, android, android-mediaplayer

```
Button b = (Button) findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener() {
    MediaPlayer mp = MediaPlayer.create(main.this, R.raw.lastmohican);
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        if (mp.isPlaying()) {
            mp.stop();
        } else {
            mp.start();
        }
    }
} 
```

我可以通过单击播放此音乐，然后单击音乐停止，但是当我一起单击时，音乐不会开始。知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:45:45.310

我不确定我是否理解您的问题，但如果您想知道为什么在您第三次按下按钮后音频不会重新开始，那是因为您`stop()`在本应呼叫时正在呼叫媒体播放器`pause()`。停止要求您在开始播放之前再次准备媒体。查看[MediaPlayer 文档](http://developer.android.com/reference/android/media/MediaPlayer.html)。如果这不是您的问题，您需要提供更好的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:25:59.153

它解决了你应该改变这种类型的代码

```
if (mp.isPlaying()) {
    mp.stop();
    mp.prepareAsync();
    mp.seekTo(0);
} else {
    mp.start();
} 
```

# java - Eclipse 需要一个额外的 { }... 为什么？

> ID：11476866
> 
> 赞同：0
> 
> 时间：2012-07-13T19:10:24.637
> 
> 标签：java, android, eclipse

我正在制作一个 Android 应用程序，我刚刚开始编写一段代码，该代码必须处理另一个类文件中 ImageView 的移动。这工作正常（到目前为止），所以这不是我的问题所在。这是我的代码：

```
public class BackgroundMovement extends MenuScreen {

    public float heightDp = 0;
    public float widthDp = 0;
    public int isShowing = 0;

    public void onCreate() {
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        heightDp = metrics.heightPixels / metrics.density;
        widthDp = metrics.widthPixels / metrics.density;
    }

    public Random rand = new Random();
    public int leftRight = rand.nextInt(2); [HERE]

    if (isShowing == 0) {

    }
} 
```

您可能已经注意到我的代码中非常奇怪的 [HERE]。我把它放进去是因为 Eclipse 希望我在最后添加一个 {，当然，还有一个 }。所以我的问题是：为什么？我不知道，我真的很想解决它...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:11:36.033

在类的顶层，您在任何方法或 init 块之外都有一个裸控制语句：

```
if (isShowing == 0) {} 
```

这不是有效的 java 语法，Eclipse 正在抱怨。但更重要的是，编译器也会抱怨那行：事实上，你的类不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:11:51.063

应该在方法内部

```
if (isShowing == 0) {

} 
```

# .htaccess - Mod_rewrite 重定向问题

> ID：11476873
> 
> 赞同：0
> 
> 时间：2012-07-13T19:11:14.610
> 
> 标签：.htaccess, mod-rewrite, rewrite

我有这个 .htaccess 文件：

```
Options +FollowSymlinks
RewriteEngine On

RewriteRule ^([a-zA-Z0-9_-]+)$ profil.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/$ profil.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/galerie$ galerie.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/galerie/$ galerie.php?user=$1 [NC]
RewriteRule ^(.*)/galerie-(.*)_(.*)$ galerie_poze.php?user=$1&album=$2&page=$3 [NC]
RewriteRule ^(.*)/galerie-(.*)_(.*)/$ galerie_poze.php?user=$1&album=$2&page=$3 [NC]
RewriteRule ^(.*).php?$ index.php?request=$1 [QSA,L] 
```

它似乎不起作用。

这是我的问题：当我想访问我网站上的页面时，例如`site.com/test.php`，它重定向到`index.php?request=test`. 问题是我也有我不想通过的“profil.php”和“galerie.php” `index.php`。相反，当我这样做时：`site.com/username/profil`，我希望它指向`profil.php?user=username`，但它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:53:40.177

我放了这样的东西：

```
RewriteCond %{REQUEST_URI} !^(.*)\.php?$ 
RewriteRule ^(.*)\.php?$ index.php?request=$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)$ profil.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/$ profil.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/personal$ personal.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/personal/$ personal.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/galerie$ galerie.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/galerie/$ galerie.php?user=$1 [NC]
RewriteRule ^(.*)/galerie-(.*)_(.*)$ galerie_poze.php?user=$1&album=$2&page=$3 [NC]
RewriteRule ^(.*)/galerie-(.*)_(.*)/$ galerie_poze.php?user=$1&album=$2&page=$3 [NC] 
```

当我做 /username 或 /username/profil 它工作但它不再适用于第一个规则 id 我做 sitename.tld/test.php 它不起作用....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:42:38.680

您希望您的前两个规则中的一个匹配`[username]/profil`（它现在匹配`[username]`和`[username]/`）

尝试

```
RewriteRule ^([a-zA-Z0-9_-]+)/profil$ profil.php?user=$1 [NC, L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:42:42.987

使用条件。

确保文件或目录不存在：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f 
```

您还可以使用以下方式限制重定向：

```
RewriteCond %{REQUEST_URI} !^/profil\.php$ [NC] 
```

确保正确逃脱。这需要转义：

```
RewriteRule ^(.*).php?$ index.php?request=$1 [QSA,L] 
```

喜欢：

```
RewriteRule ^(.*)\.php?$ index.php?request=$1 [QSA,L] 
```

还，

```
RewriteRule ^([a-zA-Z0-9_-]+)$ profil.php?user=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)/$ profil.php?user=$1 [NC] 
```

可以简化为：

```
RewriteRule ^([a-zA-Z0-9_-]+)/?$ profil.php?user=$1 [NC] 
```

# spring - Weblogic 10.3.5 覆盖 Spring 版本

> ID：11476874
> 
> 赞同：7
> 
> 时间：2012-07-13T19:11:16.670
> 
> 标签：spring, weblogic

我正在使用 Oracle 的 OEPE 发行版开发一个 Web 应用程序，包括 Weblogic server 10.3.5。WLS 包括它自己的 Spring 版本，似乎是 2.5.6.SEC01。但是，我们正在尝试使用特定于 3.1 版本的 Spring 和 Spring Security 功能。

Maven POM 将 Spring 版本定义为 3.1.1.RELEASE 的属性（将该属性插入到部分中，即：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>${spring.version}</version>
</dependency> 
```

我在 weblogic.xml 中尝试了两种不同的方法来排除内置的 Spring（一种在下面被注释掉，但请放心，我都尝试过）：

```
<wls:container-descriptor>
    <wls:prefer-application-packages>
        <wls:package-name>com.oracle.ojdbc16.*</wls:package-name>
        <wls:package-name>antlr.*</wls:package-name>
        <wls:package-name>javax.persistence.*</wls:package-name>
        <wls:package-name>org.apache.commons.*</wls:package-name>
        <wls:package-name>org.springframework.*</wls:package-name>
        <wls:package-name>org.hibernate.*</wls:package-name>
        <wls:package-name>org.apache.xerces.*</wls:package-name>
    </wls:prefer-application-packages>
    <!-- <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes> -->
</wls:container-descriptor> 
```

为了使用我自己的 Spring 版本，我到底需要做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T00:36:11.993

我有同样的问题。解决方案是在 EAR 项目的 META-INF 文件夹中创建 weblogic-application.xml。这是代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application>
    <prefer-application-packages>
        <package-name>org.apache.*</package-name>
        <package-name>org.springframework.*</package-name>
    </prefer-application-packages>
</weblogic-application> 
```

也许您的问题是您将 weblogic.xml 用于 WAR 项目，而不是将 weblogic-application.xml 用于 EAR 项目。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-29T14:36:43.507

选项 1：将 Spring 3.x 应用程序部署到未安装 JRF 的域中的 wls 服务器。这对我行得通。

选项2：在 weblogic.xml 中使用 prefer-web-inf-classes 并部署为战争。这对我来说适用于 wls 10.3.6、JRF 域、Spring 3.2.2。我无法让prefer-application-packages 工作，但prefer-web-inf-classes 可以。

注意：对于确实安装了 JRF 的域，我尝试了 war/weblogic.xml/prefer-application-packages 和 ear/weblogic-application.xml/prefer-application-packages 方法，但似乎都没有效果。我有一个输出 org.springframework.core.SpringVersion.getVersion() 的测试 jsp，尽管我做出了努力，但它仍然报告 2.5.6.SEC01（这是捆绑在 oracle_common/modules 文件夹中的 Spring 版本）。

但是，在非 JRF 域中部署相同的应用程序，并且 org.springframework.core.SpringVersion.getVersion() 将报告您与应用程序捆绑的任何版本的 spring。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T17:29:48.443

如果您使用的是 Spring Framework，那么您很可能会将 Spring bean 部署在**WAR**而不是 EAR 中，即使是 Spring Integration 项目也是如此。最高 12c（包括 12.2.1）没有任何特定配置，您最多只能停留在 Spring 框架 3.0.5 和 Spring Integration 2.2.6 中。任何使用更高 Spring 版本的尝试都可能在部署时产生：

```
weblogic.application.ModuleException: java.lang.NoSuchMethodError: org.springframework.core.MethodParameter.getNestedParameterType()Ljava/lang/Class; 
```

因为类加载器选择了 Oracle-JRF 嵌入式 Spring 框架。

在多服务器域中，不将 JRF 部署到给定的服务器实例不会解决问题，但是没有 JRF 的整个域会解决问题。

诀窍是使用**WEB-INF/weblogic.xml**`prefer-web-inf-classes`部署描述符中的参数，如下所示：

 **```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.8/weblogic-web-app.xsd">
    <wls:container-descriptor>
        <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes>
    </wls:container-descriptor>
</wls:weblogic-web-app> 
```

并且您可以在带有 JRF 检测的 WebLogic 域中享受 Spring Framework 4.2 的好处。当然，不要忘记将 Spring core 4.2 和相关依赖项包含到 WAR 文件程序集中（即检查构建的 .war 以包含 WEB-INF/lib/spring*.jar）。**

# c# - 从 Action 调用 ReSharper ContextAction

> ID：11476876
> 
> 赞同：0
> 
> 时间：2012-07-13T19:11:19.617
> 
> 标签：c#, resharper, resharper-6.1, resharper-plugins

我想编写一个`Action`只调用`ContextAction`. 这可能吗？~~A`ContextAction`将 a`Solution`作为参数，并且 an`Action`得到 a `DataContext`on 构造。所以问题真的变成了：~~

~~你`Solution`能从 的实例中获取电流`DataContext`吗？~~

编辑：哎呀！我问错了。以上是真的，但不是真正的问题。就像下面的德米特里所说，你确实可以得到这样的解决方案：

```
var solution = 
  dataContext.GetData(JetBrains.ProjectModel.DataContext.DataConstants.SOLUTION); 
```

棘手的一点是获取`_psiModule`，它可以从构造`ICSharpContextDataProvider`时传入的 获取，通过。你能从 中得到一个或正确的吗？`ContextAction``provider.PsiModule``ICSharpContextDataProvider``PsiModule``DataContext`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:33:27.680

```
 var document = context.GetData(DocumentModel.DataConstants.DOCUMENT);
  var solution = context.GetData(JetBrains.ProjectModel.DataContext.DataConstants.SOLUTION);
  var psiModule = document.GetPsiSourceFile(solution).GetPsiModule(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:31:29.053

您可以尝试像这样获得解决方案：

```
var solution =
  dataContext.GetData(JetBrains.ProjectModel.DataContext.DataConstants.SOLUTION) 
```

# ruby - 如何在数字数组中找到最佳匹配元素？

> ID：11476878
> 
> 赞同：13
> 
> 时间：2012-07-13T19:11:31.130
> 
> 标签：ruby, watir-webdriver

我需要一些看似简单但让我困惑的事情的帮助。尝试编写一些模糊匹配方法来处理根据需要计算的值与从选择列表中实际可用的值之间的格式差异。

价值（期权行使价）始终是计算的 Float`85.0`或 Int。

该数组包含字符串形式的数字，无论是增量还是不可预测的数字是否会显示为一些小数（包括额外的零，如`5.50`）或无小数（如`85`），例如：

```
select_list = ["77.5", "80", "82.5", "85", "87.5", "90", "95", "100", "105"] 
```

我不确定如何编写一两行简单的代码来返回最接近的匹配元素（按数值），因为它出现在数组中。例如，如果`select_list.contains? 85.0`返回 `"85"`

实际上，选择选项来自一个`Watir::Webdriver browser.select_list(:id, "lstStrike0_1")`HTML 对象，其可见文本（不是 HTML 值）是这些数字；也许有一种更直接的方式来调用 `browser.select_list(:id, "lstStrike0_1").select X`，而不必在 Watir 中弄清楚如何将所有这些选择转换为 Ruby 数组？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-13T19:31:23.550

```
xs = ["77.5", "80", "82.5", "85", "87.5", "90", "95", "100", "105"]
xs.min_by { |x| (x.to_f - 82.4).abs } 
#=> "82.5" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T19:21:39.823

我不是 ruby​​ 编码器，所以这可能不是最好的方法

```
def select_closest(list, target)                               
    return (list.map {|x| [(x.to_f - target).abs, x]}).min[1]  
end                                                            

select_list = ["77.5", "80", "82.5", "85", "87.5", "90", "95", "100", "105"] 

puts select_closest(select_list, 81)  # yields 80 
```

# emacs - 如何调用 emacs 中选择的最后一个区域？

> ID：11476881
> 
> 赞同：5
> 
> 时间：2012-07-13T19:11:40.473
> 
> 标签：emacs

当我在 emacs 中点击“撤消”时，它会撤消我的编辑，但我会丢失所选区域，我必须返回并重新选择它。有没有办法绑定撤消，所以它会选择最后一个选定的区域

我能想到的最好的是：

```
(global-set-key (kbd "\C-o")
                (lambda()
                  (interactive)
                  (progn (undo)
                          (exchange-point-and-mark)
                          ))) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-13T23:48:38.010

您不会失去该地区。该区域仍处于拉环中。

如果你想重新选择它，你可以简单地调用它`exchange-point-and-mark`，它默认绑定到`C-x``C-x`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:23:45.143

您始终可以使用[建议](http://www.delorie.com/gnu/docs/elisp-manual-21/elisp_212.html)来获取您拥有的东西并将其包装起来`undo`：

```
(defadvice undo (around reactivate-mark (&optional arg) activate)
  (let ((ma mark-active))
    ad-do-it
    ;; Reactiveate mark if it was active
    (when ma
      (exchange-point-and-mark)))) 
```

# asp.net-mvc - Web API 和 ValidateAntiForgeryToken

> ID：11476883
> 
> 赞同：74
> 
> 时间：2012-07-13T19:11:56.217
> 
> 标签：asp.net-mvc, asp.net-web-api, antiforgerytoken

我们有一些现有的 MVC Web 服务，它们在网页中被称为 AJAX 样式。这些服务使用 ValidateAntiForgeryToken 属性来帮助防止请求伪造。

我们正在寻求将这些服务迁移到 Web API，但似乎没有等效的防伪功能。

我错过了什么吗？是否有不同的方法来解决使用 Web API 的请求伪造？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-14T10:44:17.423

您可以实现这样的授权属性：

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, AllowMultiple = false, Inherited = true)]
public sealed class ValidateAntiForgeryTokenAttribute : FilterAttribute, IAuthorizationFilter
{
    public Task<HttpResponseMessage> ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
    {
        try
        {
            AntiForgery.Validate();
        }
        catch
        {
            actionContext.Response = new HttpResponseMessage 
            { 
                StatusCode = HttpStatusCode.Forbidden, 
                RequestMessage = actionContext.ControllerContext.Request 
            };
            return FromResult(actionContext.Response);
        }
        return continuation();
    }

    private Task<HttpResponseMessage> FromResult(HttpResponseMessage result)
    {
        var source = new TaskCompletionSource<HttpResponseMessage>();
        source.SetResult(result);
        return source.Task;
    }
} 
```

然后用它装饰你的 API 操作：

```
[ValidateAntiForgeryToken]
public HttpResponseMessage Post()
{
    // some work
    return Request.CreateResponse(HttpStatusCode.Accepted);
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-01T21:54:52.083

补充上面的代码FilterAttribute

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, AllowMultiple = false, Inherited = true)]
    public sealed class ValidateAntiForgeryTokenAttribute : FilterAttribute, IAuthorizationFilter
    {
        public Task<HttpResponseMessage> ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
        {
            try
            {
                string cookieToken = "";
                string formToken = "";

                IEnumerable<string> tokenHeaders;
                if (actionContext.Request.Headers.TryGetValues("RequestVerificationToken", out tokenHeaders))
                {
                    string[] tokens = tokenHeaders.First().Split(':');
                    if (tokens.Length == 2)
                    {
                        cookieToken = tokens[0].Trim();
                        formToken = tokens[1].Trim();
                    }
                }
                AntiForgery.Validate(cookieToken, formToken);
            }
            catch (System.Web.Mvc.HttpAntiForgeryException e)
            {
                actionContext.Response = new HttpResponseMessage
                {
                    StatusCode = HttpStatusCode.Forbidden,
                    RequestMessage = actionContext.ControllerContext.Request
                };
                return FromResult(actionContext.Response);
            }
            return continuation();
        }

        private Task<HttpResponseMessage> FromResult(HttpResponseMessage result)
        {
            var source = new TaskCompletionSource<HttpResponseMessage>();
            source.SetResult(result);
            return source.Task;
        } 
```

使用 Razor 的 HTML 函数

```
@functions{
    public string TokenHeaderValue()
        {
            string cookieToken, formToken;
            AntiForgery.GetTokens(null, out cookieToken, out formToken);
            return cookieToken + ":" + formToken;
        }
} 
```

使用角度

```
return $http({
   method: 'POST',
   url: '@Url.Content("~/api/invite/")',
   data: {},
   headers: {
       'RequestVerificationToken': '@TokenHeaderValue()'
   }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-23T21:30:34.600

此[链接](http://stephenwalther.com/archive/2013/03/05/security-issues-with-single-page-apps)有帮助，您可以从 razor 视图中检索防伪令牌并将令牌作为标头传递：

```
var csrfToken = $("input[name='__RequestVerificationToken']").val(); 
$.ajax({
    headers: { __RequestVerificationToken: csrfToken },
    type: "POST",
    dataType: "json",
    contentType: 'application/json; charset=utf-8',
    url: "/api/products",
    data: JSON.stringify({ name: "Milk", price: 2.33 }),
    statusCode: {
        200: function () {
            alert("Success!");
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-02T11:02:13.247

Oswaldo 的回答，但作为 AuthorizeAttribute 实现

```
 [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
  public class ApiValidateAntiForgeryToken : AuthorizeAttribute
  {
    public static string GenerateAntiForgeryTokenForHeader() {
      string cookieToken, formToken;
      AntiForgery.GetTokens(null, out cookieToken, out formToken);
      return cookieToken + ":" + formToken;
    }

    protected override bool IsAuthorized(HttpActionContext actionContext) {
      var headers = actionContext.Request.Headers;

      // we pass both the cookie and the form token into a single header field
      string headerToken = headers.Contains("__RequestVerificationToken") ? headers.GetValues("__RequestVerificationToken").FirstOrDefault() : null;

      if (headerToken == null) {
        return false;
      }

      string[] tokens = headerToken.Split(':');
      if (tokens.Length != 2) {
        return false;
      }

      string cookieToken = tokens[0].Trim();
      string formToken = tokens[1].Trim();

      try {
        AntiForgery.Validate(cookieToken, formToken);
      }
      catch {
        return false;
      }

      return base.IsAuthorized(actionContext);
    }
  } 
```

您可以使用 [ApiValidateAntiForgeryToken] 装饰您的控制器或方法，然后将 RequestVerificationToken: "@ApiValidateAntiForgeryToken.GenerateAntiForgeryTokenForHeader()" 作为 razor javascript 代码中方法的标头传递。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-01-05T13:47:18.380

在考虑了更多之后，将 cookie 和表单令牌混合在一起是一个坏主意，因为它违背了防伪令牌的整个目的。最好将 cookie 部分保留为 cookie，同时将表单部分移动到 auth 标头，因此这个新答案（再次作为 AuthorizeAttribute）。

```
using System;
using System.Linq;
using System.Net.Http;
using System.Web;
using System.Web.Helpers;
using System.Web.Http;
using System.Web.Http.Controllers;

  [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
  public class ApiValidateAntiForgeryToken : AuthorizeAttribute {
    public const string HeaderName = "X-RequestVerificationToken";

    private static string CookieName => AntiForgeryConfig.CookieName;

    public static string GenerateAntiForgeryTokenForHeader(HttpContext httpContext) {
      if (httpContext == null) {
        throw new ArgumentNullException(nameof(httpContext));
      }

      // check that if the cookie is set to require ssl then we must be using it
      if (AntiForgeryConfig.RequireSsl && !httpContext.Request.IsSecureConnection) {
        throw new InvalidOperationException("Cannot generate an Anti Forgery Token for a non secure context");
      }

      // try to find the old cookie token
      string oldCookieToken = null;
      try {
        var token = httpContext.Request.Cookies[CookieName];
        if (!string.IsNullOrEmpty(token?.Value)) {
          oldCookieToken = token.Value;
        }
      }
      catch {
        // do nothing
      }

      string cookieToken, formToken;
      AntiForgery.GetTokens(oldCookieToken, out cookieToken, out formToken);

      // set the cookie on the response if we got a new one
      if (cookieToken != null) {
        var cookie = new HttpCookie(CookieName, cookieToken) {
          HttpOnly = true,
        };
        // note: don't set it directly since the default value is automatically populated from the <httpCookies> config element
        if (AntiForgeryConfig.RequireSsl) {
          cookie.Secure = AntiForgeryConfig.RequireSsl;
        }
        httpContext.Response.Cookies.Set(cookie);
      }

      return formToken;
    }

    protected override bool IsAuthorized(HttpActionContext actionContext) {
      if (HttpContext.Current == null) {
        // we need a context to be able to use AntiForgery
        return false;
      }

      var headers = actionContext.Request.Headers;
      var cookies = headers.GetCookies();

      // check that if the cookie is set to require ssl then we must honor it
      if (AntiForgeryConfig.RequireSsl && !HttpContext.Current.Request.IsSecureConnection) {
        return false;
      }

      try {
        string cookieToken = cookies.Select(c => c[CookieName]).FirstOrDefault()?.Value?.Trim(); // this throws if the cookie does not exist
        string formToken = headers.GetValues(HeaderName).FirstOrDefault()?.Trim();

        if (string.IsNullOrEmpty(cookieToken) || string.IsNullOrEmpty(formToken)) {
          return false;
        }

        AntiForgery.Validate(cookieToken, formToken);
        return base.IsAuthorized(actionContext);
      }
      catch {
        return false;
      }
    }
  } 
```

然后用 [ApiValidateAntiForgeryToken] 装饰你的控制器或方法

并将其添加到 razor 文件以生成您的 javascript 令牌：

```
<script>
var antiForgeryToken = '@ApiValidateAntiForgeryToken.GenerateAntiForgeryTokenForHeader(HttpContext.Current)';
// your code here that uses such token, basically setting it as a 'X-RequestVerificationToken' header for any AJAX calls
</script> 
```

# android - 弹出窗口中的 ListView

> ID：11476884
> 
> 赞同：2
> 
> 时间：2012-07-13T19:11:59.477
> 
> 标签：android, listview, onclick, popupwindow

我已经搜索了几个小时，但找不到任何可以解决我问题的东西。我有一个使用弹出窗口的应用程序。在该弹出窗口中，我想在手机上显示联系人列表，这部分我正在工作。我创建了一个扩展 ArrayAdapter 的适配器，并让它在列表中填充电话联系人。

但现在我想与这些联系人互动，即。单击一个并向用户显示联系人的信息。我将 OnItemClickListener() 添加到列表中，但它从未被调用。我尝试使单元格不可聚焦，我尝试将 onClickListeners 添加到每个项目，但这并没有突出显示单元格。我被困住了。

下面是我用来设置 ListView 并将 onItemClick 侦听器添加到列表视图的代码。

```
ListView contactList = (ListView) contentView.findViewById(R.id.contacts_list);
  ContactsProcessing processContacts = new ContactsProcessing();
  contactList.setAdapter(processContacts.getListAdapter());
  contactList.setItemsCanFocus(false);
  contactList.setFocusableInTouchMode(false);
  contactList.setOnItemClickListener(new OnItemClickListener() {

     @Override
     public void onItemClick(AdapterView<?> l, View v, int position, long id) {
        // TODO Auto-generated method stub
        // super.onListItemClick(l, v, position, id);
        Toast toast = new Toast(MainActivity.this);
        toast.setText("Item Clicked");
        toast.show();
        m_ButtonFeedback.hapticFeedback();
        Log.d("MainActivity", "Item Clicked");

     }
  }); 
```

在同一个弹出窗口中，我还有一个退出按钮。它按我预期的方式工作。

```
ImageButton exit = (ImageButton) contentView.findViewById(R.id.contacts_close_button);
  exit.setOnClickListener(new OnClickListener() {

     @Override
     public void onClick(View _v) {
        window.dismiss();

     }
  }); 
```

这是我的单元格的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="@android:color/transparent"
android:id="@+id/contact_cell_root" >

<TextView
    android:id="@+id/contact_cell_headerText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/white"
    android:paddingTop="2dp"
    android:paddingBottom="2dp"
    android:paddingLeft="15dp"
    android:scrollbars="none"
    android:textColor="#29abe2"
    android:textSize="18sp"
    android:textStyle="bold"
    android:visibility="gone" />

<View
    android:id="@+id/contact_cell_header_divider" 
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#29abe2"
    android:visibility="gone"/>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:background="@android:color/transparent"
    android:gravity="center"
    android:paddingRight="10dp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/contact_cell_user_image"
        android:adjustViewBounds="true"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:scaleType="centerInside"
        android:src="@drawable/contact_default"
        android:focusable="false" />

    <LinearLayout 
        android:layout_width="0px"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:orientation="vertical"
        android:paddingBottom="5dp"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/contact_cell_titleText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:ellipsize="end"
            android:singleLine="true"
            android:text="John Smith"

            android:textStyle="bold"
            android:textSize="16sp" 
            android:textColor="@android:color/black"/>

        <TextView
            android:id="@+id/contact_cell_companyName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/titleText"
            android:ellipsize="end"
            android:text="Company Name"

            android:textSize="14sp"
            android:textColor="@android:color/darker_gray" />
    </LinearLayout>
    <ImageView
        android:id="@+id/contact_cell_imageView"    
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:gravity="center_vertical"
        android:src="@drawable/ic_launcher"
        android:scaleType="centerInside"
        android:focusable="false"
         />
</LinearLayout>
<View
    android:id="@+id/contact_cell_divider" 
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:background="#e7e7e7"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:04:59.480

事实证明，弹出窗口不是可聚焦的。简单的解决方法是告诉弹出窗口可聚焦。

```
PopupWindow window;
window = new PopupWindow(context);
window.setFocusable(true); 
```

一旦可聚焦，视图中的所有组件都处于活动状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T13:20:44.890

看起来我的解决方案是 Scott 已经尝试过的解决方案之一，但如果有人仍在寻找某种实现，我将在此处发布。

所以我遇到了同样的问题，但在我的情况下`setFocusble(false)`是必需的（在我的情况下 using`ListPopupWindow`不是解决方案，因为项目中的很多东西已经使用了 base`PopupWindow`的功能，包括扩展）。

[如果有人处于同样的情况，这里](https://code.google.com/p/android/issues/detail?id=3414)有一种基于 bug 讨论的解决方法（post #9）

主要思想是，它`ListView`的层次结构仍然接收触摸事件，因此我们可以手动触发`onItemClick()`。

然而，这种方法与 real 的触摸处理并非 100% 相同`ListView`（就像在点击一行时没有选择发光一样），这对我来说目前做得很好。

如果有人对此问题有更精确的解决方案，请分享。

所以，这里是完整`Adapter`的代码，可以在`ListView`里面`PopupWindow`使用`setFocusable(false)`：

私有类 CustomAdapter 扩展 ArrayAdapter {

```
private LayoutInflater mInflater;
private ListView mOwningListView;

public CustomAdapter(Context context, List<String> objects, ListView listView) {
    super(context, android.R.layout.simple_list_item_1, objects);
    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mOwningListView = listView;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.font_pick_row, null);
    }
    // this is the key point of workaround
    convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            /*
             *  as every row is still receiving their touches
             *  we can use this to manually trigger onItemClick
             *  since it doesn't firing in popupWindow.setFocusable(false)  
             */
            mOwningListView.getOnItemClickListener().onItemClick(mOwningListView, v, position, getItemId(position));

        }
    });
    //... other stuff
    return convertView;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:22:36.647

解决此问题的一种方法是创建一个对话框，然后使用 setItems() 命令，如果您看这里：

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

向下滚动到“添加列表”并且有一个示例，在这里您可以在每个项目上定义 onClick()

# python - 在 Web2py 中访问安装在 Pythonanywhere 上的模块

> ID：11476886
> 
> 赞同：3
> 
> 时间：2012-07-13T19:12:01.393
> 
> 标签：python, web2py, pip, import-module, pythonanywhere

我曾经`pip-2.7 install --user soundcloud`在 Pythonanywhere 中为 Python 2.7 安装 soundcloud 模块。

在 Pythonanywhere 中的我的 Web2py 应用程序中，我在使用时收到一条错误消息`import soundcloud`，指出 soundcloud 模块不存在。Web2py 是否无法访问安装在 Pythonanywhere 上的模块（未预先打包）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:14:05.757

只要 Web2Py 可以在路径上找到它，那么它就可以工作。在尝试导入 soundcloud 之前，您可能需要执行以下操作：

```
import sys
sys.path.append('/home/markstadt/.local/lib/python/site-packages')
import soundcloud 
```

从 web2py 应用程序内部打印出 sys.path 并打印 soundcloud。**bash shell 中的文件**应该为您提供所需的所有信息，以便将正确的目录添加到您的路径中。

[编辑添加一些额外的信息]

Web2Py 有它自己的站点包文件夹，它会自动添加到路径中。请参见此处： [https](https://www.pythonanywhere.com/forums/topic/178/) ://www.pythonanywhere.com/forums/topic/178/以及[如何在 web2py 中使用模块？](https://stackoverflow.com/questions/4657484/how-can-i-use-modules-in-web2py)

# android - Android Logger 设置 FileName

> ID：11476891
> 
> 赞同：0
> 
> 时间：2012-07-13T19:12:32.097
> 
> 标签：android, logging

如何更改android中的日志文件名？

我有一个应用程序，它以一个文本框开头，允许用户输入他们的 ID。完成此操作后，我希望所有发生的日志（甚至是系统日志）都应该转到此文件，除非其他用户启动应用程序并输入新 ID。

知道如何做到这一点吗？

R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:49:47.770

[http://code.google.com/p/microlog4android/](http://code.google.com/p/microlog4android/)

# java - java中的并发双向映射

> ID：11476894
> 
> 赞同：0
> 
> 时间：2012-07-13T19:12:36.620
> 
> 标签：java, concurrency, hashmap, concurrenthashmap

我正在编写用于文本处理的代码，如果我先将字符串转换为整数，事情会变得更快**。**为此，我创建了一个 Dictionary 类，每次我看到一个新字符串时，我都会给它一个索引，并保留两个映射，一个从 string 到 int，一个从 int 到 string，所以我可以轻松地查找两种方式. 这是代码：

```
class Dictionary {
    private Map<String, Integer> map;
    private Map<Integer, String> reverse_map;
    private int nextIndex;

    public Dictionary() {
        map = new HashMap<String, Integer>();
        reverse_map = new HashMap<Integer, String>();
        nextIndex = 1;
    }

    public int getIndex(String string) {
        if (!map.containsKey(string)) {
            map.put(string, nextIndex);
            reverse_map.put(nextIndex, string);
            nextIndex++;
        }
        return map.get(string);
    }

    public String getString(int index) {
        // getIndex is always called first, so we don't need to check anything
        return reverse_map.get(index);
    }
} 
```

在我的单线程代码中，这对我来说效果很好。但现在我想给这个多个线程以加快速度，我不知道该怎么做。我想过使用 ConcurrentHashMap，但我不确定这`putIfAbsent`是否能保证我不会使用索引两次。我不想使用 Collections.synchronizedMap，因为这个字典在线程之间被非常频繁地访问，所以我可能不会比使用单个线程更好，因为它在每次读取和写入时都会阻塞。有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:30:45.297

您对并发解决方案的问题是原子性。这些是我的想法：

```
private final ConcurrentMap<String, Integer> map = new ConcurrentHashMap<String, Integer>();
private final ConcurrentMap<Integer, String> reverse_map = new ConcurrentHashMap<Integer, String>();
private final AtomicInteger nextIndex = new AtomicInteger(1);

public int getIndex(String string) {
  Integer i = map.get(string);
  if (i == null) {
    final Integer newI = nextIndex.getAndIncrement();
    i = map.putIfAbsent(string, newI);
    if (i == null) {
      reverse_map.put(newI, string);
      return newI;
    }
  }
  return i;
} 
```

这有一个非常良性的故障模式：一些索引将未被使用。

请注意，我无条件地放入第二张地图，因为此时我知道我负责手头的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:32:52.597

最简单的事情是只标记您的两个方法（`getIndex`和`getString`）`synchronized`。看看你得到什么样的加速。也许就足够了。

要使用`ConcurrentHashMap`，你可以试试这个：

```
private AtomicInteger nextIndex;
public int getIndex(String string) {
    Integer n = map.get(string);
    if (n == null) {
        int idx = nextIndex.getAndIncrement();
        n = map.putIfAbsent(string, idx);
        if (n != null) return n;
        reverse_map.put(idx, string);
        return idx;
    }
    return n;
} 
```

如果两个线程同时插入相同的字符串，这可能偶尔会跳过索引，但不会经常发生。

# jquery - Javascript jQuery dom 数据 api 架构

> ID：11476898
> 
> 赞同：0
> 
> 时间：2012-07-13T19:12:41.943
> 
> 标签：jquery

我对我的应用程序的设计有疑问，这是一个包含以下示例 javascripts 的大项目：

*   modal.js（包含一个用于模态表单的 jQuery 插件）
*   tooltip.js（包含一个用于工具提示的 jQuery 插件）
*   textbox.js（包含一个用于文本框、占位符等的 jQuery 插件）

如果我使用 data-api 来设置我的整个 javascript ui，会不会影响性能，所以我会使用这段代码遍历所有元素并在需要时初始化一个插件：

```
$.each('[data-trigger="modal"]', function(a, b){
  // Do plugin code here $(this).modal()
});

$.each('[data-textbox="^*"]', function(a, b){
  // Do plugin code here $(this).textbox()
});

$.each('[data-tooltip="hello, I am a tooltip"]', function(a, b){
  // Do plugin code here $(this).tooltip()
}); 
```

另一种选择是：

```
$(document).ready(function(){
  $('#modal-create-account-trigger').modal();
  $('#tb-username').textbox();
  $('#tb-password').textbox();
  $('#tb-fullname').textbox();
}); 
```

我更喜欢 .each 解决方案，所以我们可以在 HTML 中完全控制它，我怎么知道这对性能不利，它有多糟糕，还有其他选择吗？

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:14:07.230

由于巨大的性能提升，使用#ID 选择器总是更好。

# facebook - 如何使用 Facebook API 重命名相册？

> ID：11476899
> 
> 赞同：0
> 
> 时间：2012-07-13T19:12:44.587
> 
> 标签：facebook

就像标题一样简单：如何使用 Facebook API 重命名专辑？

# cryptography - 加密在 RSA 密码系统中的工作原理

> ID：11476900
> 
> 赞同：1
> 
> 时间：2012-07-13T19:12:46.217
> 
> 标签：cryptography, rsa

我了解 RSA 密码系统的工作原理，但我不明白的是，在[http://en.wikipedia.org/wiki/RSA_%28algorithm%29](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)算法中，我们将加密消息发送给另一个人。通常我们将字符串写为消息。我想知道这个字符串是如何转换为数字的。我在互联网上到处都看到人们在所有示例中都将这条消息作为数字提到。但是我们通常不发送数字，我们发送字符串作为消息。我想知道这个字符串是如何转换成数字的。我的意思是我知道如何将字符串转换为数字，但在密码学视图中如何将此消息转换为数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:40:23.937

好的，所以这基本上是关于编码/解码的问题。

首先，正如您所写，消息通常在编程语言中表示为字符串。字符串由可以表示为文本的“代码点”组成。要创建以字节为单位的二进制表示，您需要对字符串进行字符编码，例如使用 UTF-8 编码。在某些语言中，“代码点”已经使用默认的内部编码（例如 C 中的 ASCII）。

您现在可以将字符串的二进制编码解释为整数。第一个字节是整数的最高（最重要）部分，最后一个是最不重要的部分。所以现在你得到了一些用于 RSA 操作的数字输入。不幸的是，这是不安全的，它无法处理大于密钥大小的消息。

因此，不是直接使用编码文本，而是使用安全加密哈希（例如 SHA-256）对文本进行哈希处理。SHA-256 输出一个 32 字节的散列。然后使用 PKCS#1 v1.5 中定义的安全填充方案填充此散列。其结果现在被转换为一个数字（见上文）并使用私有 RSA 密钥进行加密。

RSA 加密的输出又是一个数字。该数字再次转换为字节（与填充散列上使用的早期函数相反）。现在您已经获得了称为签名的二进制数据。最后，如果您想将其作为文本发送，则必须再次对其进行编码；通常使用 base 64 编码或十六进制。

要验证您是否执行相同操作，但顺序相反，并使用公钥而不是私钥。您需要比较哈希以检查验证是成功还是失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T13:40:30.067

秘密消息不必总是字符串。但如果是这样，则可以将字符串的二进制编码分成块，其十进制表示可以使用 RSA 加密。

通常，非对称密钥密码术基于将数学函数应用于数字，因此不如基于排列和替换的对称密钥密码术快。

因此，它主要用于身份验证和数字签名，其中秘密消息不是字符串而是某个数字。

请参阅 Forouzan 的“密码学和网络安全”章节 - 非对称密钥密码学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:00:09.183

公钥密码学很慢，但允许我们在公共场合安全地交换少量信息。

密钥密码学很快，但必须首先私下共享密钥。

通常，人们会使用 RSA 加密密钥（如 AES 或 RC4 密钥）以允许我们公开发送该密钥，然后使用该密钥加密实际消息以利用密钥的速度加密。

RSA 也可用于对消息进行签名，但实际使用 RSA 签名的是实际数据的哈希（如 MD5、SHA-1、SHA-256）。

通常使用 Diffie-Hellman 代替 RSA 来交换密钥。

这个答案是否足够，或者您是否还需要知道密钥加密和散列如何查看数据？

# android - 没有图像适配器的 Android Gridview

> ID：11476904
> 
> 赞同：0
> 
> 时间：2012-07-13T19:13:08.057
> 
> 标签：android, facebook, android-layout, android-intent, android-listview

我有一个空白的线性列表，我有一个将动态加载的图像列表（来自 url，工作）。

我需要在网格中显示图像（例如当您访问 facebook 照片库时）。

由于明显的原因，我不能使用 XML，我的图像显示只是它们彼此重叠并且非常小。

也可以轻松地将它们设置为屏幕大小的百分比吗？（所以列表在所有设备上看起来都一样）

这是到目前为止的代码：

```
private void Display()
{
    Toast toast = Toast.makeText(getApplicationContext(), "Downloading Photos", Toast.LENGTH_SHORT);
    toast.show();

    //Get width of the image.
    int imageWidth = (int)getWindowManager().getDefaultDisplay().getWidth() / 3;
    LayoutParams gp = new GridView.LayoutParams(GridView.LayoutParams.FILL_PARENT, (int)imageWidth);

    //Placeholders
    for(int _i = 0; _i < _noOfPhotos; _i++)
    {
        ImageView imageView = new ImageView(getApplicationContext());

        imageView.setImageResource(R.drawable.no_image);
        imageView.setLayoutParams(gp);

        _imageViewArray.add(imageView);
        this.addContentView(_imageViewArray.get(_i), gp);
    }

    //Set URL

    //UrlImageViewHelper.setUrlDrawable(imageView, _userGallery.get(_i).getPicture());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:37:25.417

使用[GridView](http://developer.android.com/reference/android/widget/GridView.html)，这正是这个用例。

```
<GridView 
    android:id="@+id/content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="20dip"
    android:layout_marginBottom="20dip"
    android:numColumns="3" /> 
```

你可以得到每个 ImageView 的宽度

```
float width = getWindowManager().getDefaultDisplay().getWidth() / 3;
mLayoutParams = new GridView.LayoutParams(
            GridView.LayoutParams.FILL_PARENT, 
            (int)width); // set the width as height for quadratic images 
```

然后，在 GridView 的 ListAdapter

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(context); // need to check convertView
    imageView.setImageResource(mImages.get(position));
    imageView.setLayoutParams(mLayoutParams);

    return imageView;
} 
```

# android - 服务启动，然后崩溃

> ID：11476906
> 
> 赞同：1
> 
> 时间：2012-07-13T19:13:15.530
> 
> 标签：android, service

好吧，我在最后一个问题中得到了很多帮助，所以我决定最好将我的自动启动器/服务/清单的代码发布在这里，看看我能得到什么，而不是把头撞在墙上。它是这样的：自动启动器（刚刚修复）--> 服务--> 主要活动

所以我不太担心第一步和最后一步，因为它们都得到了照顾。我只需要弄清楚如何让自动启动器运行将主要活动与后台联系起来的服务。所以问题是：为什么当我运行它时它会启动应用程序然后在大约 30 秒后立即崩溃，为什么应用程序不进入后台而不是保持在前面？这是代码：

```
package path.to.file;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class Monitor extends Service {

private static final String LOG_TAG = "::Monitor";

@Override
public void onCreate() {
    super.onCreate();
    Log.e(LOG_TAG, "Service created.");
    Intent i = new Intent();
    i.setAction("path.to.file.MainActivity");
    i.addCategory(Intent.CATEGORY_HOME);
    startActivity(i);
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStartCommand(intent, startId, startId);
    Log.e(LOG_TAG, "Service started.");
}

@Override
public void onDestroy() {
    super.onDestroy();
    Log.e(LOG_TAG, "Service destroyed.");
}

@Override
public IBinder onBind(Intent intent) {
    Log.e(LOG_TAG, "Service bind.");
    return null;
}
} 
```

以及更新的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
installlocation="internalOnly"
package="path.to.file"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name="Monitor" >
        <intent-filter>
            <action android:name="path.to.file.Monitor" >
            </action>
        </intent-filter>
    </service>

    <receiver android:name="autoBot" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" >
            </action>
        </intent-filter>
    </receiver>
</application>

</manifest> 
```

这是要求的启动器：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class autoBot extends BroadcastReceiver {
private static final String LOG_TAG = "StartAtBootServiceReceiver";

@Override
public void onReceive(Context context, Intent intent) {
    Log.e(LOG_TAG, "onReceive:");
    if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
        Intent i = new Intent(context, Monitor.class);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:44:55.777

在清单中将 Monitor 更改为 .Monitor。

您应该使用 startService() 而不是 startActivity()。

# python - Python 和 PyQt：从 QTableWidget 获取输入？

> ID：11476907
> 
> 赞同：1
> 
> 时间：2012-07-13T19:13:26.043
> 
> 标签：python, input, pyqt, qtablewidget

所以，我有一个非常简单的问题：如何从 QTableWidget 获取输入并将其放入一些列表（第一个列表到第一个列表，第二个列表到第二个列表等等......）？

我已经用谷歌搜索了，但还没有真正找到任何东西......

**更新：**

实际上，我想到了这一点：

```
self.tableWidget.cellChanged.connect(self.cellchanged)

def cellchanged(self):
    cur = self.tableWidget.currentColumn()
    cur2 = self.tableWidget.currentRow()
    y = children[cur]
    text = self.tableWidget.currentItem().text()
    y.insert(cur2, text) 
```

但是当我更新表格时出现这个错误（它只是显示，它不会伤害程序）：

```
def updatetable(self):
        self.tableWidget.setRowCount(0)
        self.tableWidget.setRowCount(100)
        r=0
        c=0
        for x in children:
            for i in x:
                newItem = QtGui.QTableWidgetItem(i)
                self.tableWidget.setItem(r, c, newItem)
                r += 1
            r = 0
            c += 1 
```

错误：

```
 if self.tableWidget.currentItem().text():
AttributeError: 'NoneType' object has no attribute 'text' 
```

**更新3：**

解决了它：

```
 self.tableWidget.cellChanged.connect(self.cellchanged)

def cellchanged(self):
    cur = self.tableWidget.currentColumn()
    cur2 = self.tableWidget.currentRow()
    y = children[cur]
    self.tableWidget.cellActivated.connect(self.cell) 
def cell(self):
    text = self.tableWidget.currentItem().text()
    y.insert(cur2, text) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:36:14.107

这是一个如何使用 QTableView 和一组 QListView 对象的示例，以及单个 QStandardItemModel。这种方法的好处是您只需要在一个地方维护数据：模型。视图只是反映模型中的任何内容。

在此示例中，每个列表都设置为查看不同的列。观察更改数据时会发生什么。它到处更新。这是因为模型在其数据发生变化时在内部发出信号。视图只是听模型。如果您不想使用 QListView 而只是想要一些基本的列表数据结构，您将手动连接到模型发出的信号，并按需更新您的数据。

```
from PyQt4 import QtCore, QtGui

class Widget(QtGui.QWidget):

    def __init__(self, *args, **kwargs):
        super(Widget, self).__init__(*args, **kwargs)
        self.resize(800,600)

        self.vlayout = QtGui.QVBoxLayout(self)
        self.table = QtGui.QTableView()
        self.vlayout.addWidget(self.table)

        self.hlayout = QtGui.QHBoxLayout()
        self.list1 = QtGui.QListView()
        self.list2 = QtGui.QListView()
        self.list3 = QtGui.QListView()      
        self.hlayout.addWidget(self.list1)
        self.hlayout.addWidget(self.list2)
        self.hlayout.addWidget(self.list3)

        self.vlayout.addLayout(self.hlayout)

        self.model = QtGui.QStandardItemModel(10,10,self)
        self.table.setModel(self.model)

        self.list1.setModel(self.model)
        self.list1.setModelColumn(0)
        self.list2.setModel(self.model)
        self.list2.setModelColumn(1)
        self.list3.setModel(self.model)
        self.list3.setModelColumn(2)

        self.populateTable()

    def populateTable(self):
        for row in xrange(10):
            for col in xrange(10):
                item = QtGui.QStandardItem('%d-%d' % (row, col))
                self.model.setItem(row, col, item)

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication([])
    window = Widget()
    window.show()
    window.raise_()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:52:32.760

您需要遍历表。QTableWidget 包含[rowCount()](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtablewidget.html#rowCount)行。可以使用[item(row, column)](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtablewidget.html#item)方法访问项目。另请参阅[QListWidget 文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qlistwidget.html)以获取有关填充它的信息。

代码可能如下所示：

```
def copy_table_column_to_list_widget(table, column, list_widget)
    for row in range(table.rowCount()):
        text = table.item(row, column).text()
        list_widget.addItem(QtGui.QListWidgetItem(text))

copy_table_column_to_list_widget(table, 0, list_widget1)
copy_table_column_to_list_widget(table, 1, list_widget2)
# and so on... or write a loop 
```

**更新**

```
def table_to_list(table):
    result = []
    num_rows, num_cols = table.rowCount(), table.columntCount()
    for col in range(num_cols):
        rows = []
        for row in range(num_rows):
            item = table.item(row, col)
            rows.append(item.text() if item else '')
        result.append(rows)
    return result 
```

结果将具有以下格式：

```
[['11', '12', '13'], ['21', '22', '23']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-31T15:55:41.493

使用 PyQt5 更简单...

```
self.gui.table_widget.cellChanged.connect(self.cell_changed)

@pyqtSlot()
def cell_changed(self):
    try:
        self.cell = self.gui.table_widget.currentItem()
        self.triggered = self.cell.text()
        print(self.triggered)
    except:
        pass 
```

# odata - 我可以在同一个 URL 设置 WCF 数据服务和 WebAPI 方法吗

> ID：11476908
> 
> 赞同：0
> 
> 时间：2012-07-13T19:13:28.337
> 
> 标签：odata, asp.net-web-api

我们正在考虑结合 Odata 和 WebAPI 来创建一个 api。我正在研究的一件事是将 OData 数据服务映射到与 WebApi 控制器相同的 URL。我们可以使用 OData 的强大功能及其查询支持来提供只读信息。然后使用 WebApi 控制器方法接受更新。通过这种方式，我们可以更好地控制发送到系统中的任何更新。到目前为止，我已经尝试通过路由来做到这一点。

```
DataServiceHostFactory factory = new DataServiceHostFactory();
RouteTable.Routes.Add(new ServiceRoute("api/SDAApi", factory, typeof(ReadService))); 
```

所以我向我的 ReadService 添加了一个路由，它是 Odata 数据服务。SDAApi 与我的控制器名称匹配。在我的控制器上，我有一个方法 SoftwareDownloadRequestsPost，它与我从 ReadService 请求的集合 - SoftwareDownloadRequests 相匹配。

当我在浏览器中访问 url ~/Api/SDAApi/SoftwareDownloadRequests 时，我得到了预期的项目列表。但是，当我使用简单的表单帖子向 url 发布帖子时，我会收到回复。“不支持内容类型‘application/x-www-form-urlencoded’。” 由于此表单帖子在我使用不同的网址时有效，因此我假设它是由冲突引起的。

所以回到我的问题，这可能吗？以及如何解决我的错误的任何想法？

我正在使用 VS 2012 RC 和 .NET 4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:49:46.503

我想不出你想要这样做的充分理由。

ASP.NET Web API 在 RC 中公开了 OData 的一些重要功能（例如 $filter）。显然，未来版本中会提供更多支持，尽管 RTM 中可能没有。

# python - Beautifulsoup 的输出

> ID：11476911
> 
> 赞同：2
> 
> 时间：2012-07-13T19:14:00.343
> 
> 标签：python, beautifulsoup

我正在尝试使用 beautifulsoup 解析一个简单的 html 表，但我遇到了一些问题

这是我的输入

```
<table id="people" class="tt" width="99%" border="0" cellpadding="0" cellspacing="1">
 <tr>
  <td colspan="3" bgcolor="#d3d3d3">
   <p align="center" style="border: 1px solid #c0c0c0; padding: 0.02in">
    <a name="faculty">
    </a>
    <b>
     Faculty
    </b>
   </p>
  </td>
 </tr>
 <tr>
  <td>
   <p align="center">
    <font color="#000080">
     <a href="http://www.website.com/%7Empop">
      <font color="#000080">
       <img src="images/mpop.jpg" name="graphics1" align="bottom" width="70" height="85" border="1" />
      </font>
     </a>
    </font>
   </p>
  </td>
  <td>
   <p>
    <b>
     John Doe, Ph.D.
    </b>
    <br />
    Associate Professor, Computer
                Science
    <br />

   </p>
  </td>
  <td>
   <p>
    Office:  Sciences Bldg.
    <br />
    Phone:
                xxx-xxx-xxxx
    <br />
    jd [at] website.com
    <br />
       </p>
  </td>
 </tr>
 <tr>
  <td>
   <p align="center">
    <font color="#000080">
     <a href="http://www.website.com/%7Ercolwell">
      <font color="#000080">
       <img src="images/rcolwell.jpg" name="graphics2" align="bottom" width="70" height="97" border="1" />
      </font>
     </a>
    </font>
   </p>
  </td>
  <td>
   <p>
    <b>
     Jane Doe, Ph.D.
    </b>
    <br />
     Professor
    <br />
  School of Public Health
    <br />
   </p>
  </td>
  <td>
   <p>
    Sciences Bldg
    <br />
    jd [at]
                website.com
    <br />

    </a>
   </p>
  </td>
 </tr>
</table> 
```

这是我的代码

```
t = soup.findAll("table",id="people")
for table in t:
    rows = table.findAll("tr")
    for tr in rows:
        cols = tr.findAll("td")
        for td in cols:
            print(str(td.find(text=True))) # tried also print(td.find(text=True))
            print(",")
        print("\n") 
```

这将生成只有逗号而实际上没有文本的输出，但是当我`print(td)`找到我需要输出的信息但以 html 格式输出所有标签时，谁能指出我在这里做正确的事情？我只想提取单元格内容。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:29:01.350

也许你正在寻找这样的 st：

```
from BeautifulSoup import BeautifulSoup
soup = BeautifulSoup("<table id=people><tr><td>x<a>y</a>z</td><td>x<a>y</a>z</td></tr></table>")
t = soup.findAll("table",id="people")
for table in t:
   rows = table.findAll("tr")
   for tr in rows:
      cols = tr.findAll("td")
      print(','.join([td.text for td in cols])) 
```

或者，您可以`u''.join(map(unicode, td.contents))`根据您想要打印的内容来使用。

# asp.net - ASPX 页面无法在 Windows XP 上的 IE7 和 Chrome 中呈现 PDF

> ID：11476914
> 
> 赞同：0
> 
> 时间：2012-07-13T19:14:04.313
> 
> 标签：asp.net, windows, pdf

我有一个返回 PDF 的 .aspx 页面。下面是 Page_PreRender 上的代码。

```
Protected Sub Page_PreRender(sender As Object, e As System.EventArgs) Handles Me.PreRender

    Dim pdfStream As MemoryStream
    pdfStream = CType(Cache("PdfViewerContent"), MemoryStream)

    Response.BufferOutput = True
    Response.ClearContent()
    Response.ClearHeaders()
    Response.AddHeader("Cache-control", "no-store")
    Response.ContentType = "application/pdf"
    Response.AddHeader("Content-Length", pdfStream.Length.ToString())
    Response.AddHeader("Content-Disposition", "attachment=PDFFile.pdf")
    Response.BinaryWrite(pdfStream.ToArray())
    Response.Flush()
    HttpContext.Current.ApplicationInstance.CompleteRequest()

End Sub 
```

此页面是从 window.open javascript 调用启动的。

这在带有 IE9、Chrome 和 Firefox 的 Windows 7 上运行良好。但是，在运行 IE7 的 Windows XP 上，浏览器只是闪烁，没有打开任何窗口。（弹出窗口阻止程序已禁用）使用 Chrome 时，我在开发者控制台“资源解释为文档但使用 MIME 类型应用程序/pdf 传输”中出现错误，并且该页面作为文件下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:22:22.887

我相信应该是

```
 Response.AddHeader("Content-Disposition", "attachment; filename=PDFFile.pdf") 
```

另外，我会`Response.End()`在之后打电话`Response.Flush()`

# eclipse-cdt - Eclipse 中的并行构建发生冲突

> ID：11476916
> 
> 赞同：1
> 
> 时间：2012-07-13T19:14:17.253
> 
> 标签：eclipse-cdt, multiple-projects, workspace, parallel-builds

我在单独的工作区中导入了两个 C++ Eclipse 项目（每个都指向不同的版本代码沙箱）。我在不同的机器上启动了两个并行的 Eclipse 会话，然后想要并行构建这两个项目。每个工作区中只打开一个项目，这是我要在相应会话中构建的项目。但似乎一旦我启动一个项目的构建，第一个项目的另一个正在进行的构建就开始指向第二个项目的源目录：即当我开始在 sandbox2 中构建文件时，而构建 sandbox1正在进行中，sandbox1 的日志构建会立即显示 sandbox2 中文件的源文件路径，反之亦然。

是什么导致了这种行为，有没有办法在不相互影响的情况下并行运行两个构建。

谢谢，

洛朗

# xml - 查询存储过程中的 Xml 列

> ID：11476921
> 
> 赞同：1
> 
> 时间：2012-07-13T19:14:26.660
> 
> 标签：xml, sql-server-2008

我已经制定了一个查询来搜索包含 type 列的表`Xml`。Xml 包含一个名为的标记，该标记`<rule>`包含一个名为`value`

我正在使用的查询示例是：

```
SELECT *
FROM Rulesets
WHERE Ruleset.exist('/ruleset/rule[contains(upper-case(@value), "DEFAULT")]') = 1 
```

我希望能够为此查询创建一个存储过程，并传递一个参数以使用文本`DEFAULT`出现的位置。

有任何想法吗？

谢谢！

# magento - Magento - 将列添加到自定义模块中表的 END（不复制所有列）

> ID：11476924
> 
> 赞同：1
> 
> 时间：2012-07-13T19:14:57.427
> 
> 标签：magento, magento-1.5

我制作了一个简单的模块，可以选择在**Catalog > Manage Categories > [Catalog Products tab]**中放入“编辑”操作列。代码工作正常，但是，它将新列放在表的**开头**，我希望它在表的***末尾***（为了美观）。

这是重写（Product.php）：

```
class [Company]_[Namespace]_Block_Catalog_Category_Tab_Product extends Mage_Adminhtml_Block_Catalog_Category_Tab_Product 
{
protected function _prepareColumns() {
    $this->addColumn('action',
                array(
                    'header' => Mage::helper('catalog')->__('Action'),
                    'width' => '50px',
                    'type' => 'action',
                    'getter' => 'getId',
                    'actions' => array(
                        array(
                            'caption' => Mage::helper('catalog')->__('Edit'),
                            'url' => array(
                                'base'=>'*/catalog_product/edit',
                                'params'=>array('store'=>$this->getRequest()->getParam('store'))
                            ),
                            'field' => 'id'
                        )
                    ),
                    'filter' => false,
                    'sortable' => false,
                    'index' => 'stores',
            ));
    return parent::_prepareColumns();
}
} 
```

如果我移到`return parent::_prepareColumns();`新列上方，则根本不会显示新列。

所以我的问题是，如何在*不*将所有列复制到文件中的情况下将这个新列移动到表的**末尾**？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:24:40.187

```
protected function _prepareColumns()
{
    parent::_prepareColumns();
    $this->addColumn('action',
            array(
                'header' => Mage::helper('catalog')->__('Action'),
                'width' => '50px',
                'type' => 'action',
                'getter' => 'getId',
                'actions' => array(
                    array(
                        'caption' => Mage::helper('catalog')->__('Edit'),
                        'url' => array(
                            'base'=>'*/catalog_product/edit',
                            'params'=>array('store'=>$this->getRequest()->getParam('store'))
                        ),
                        'field' => 'id'
                    )
                ),
                'filter' => false,
                'sortable' => false,
                'index' => 'stores',
        ));
    return $this;
} 
```

还有`addColumnsOrder`功能，但在这里没有意义，因为您要在最后添加列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-10T07:03:23.753

另一种方法是使用`addColumnAfter`. 假设现有网格中的最后一列名为`xyz`。现在，要在网格末尾添加一个名为的新列`myNewColumn`，即在 column 之后`xyz`：

```
protected function _prepareColumns(){
    $this->addColumnAfter('myNewColumn', array(
        'header' => Mage::helper('catalog')->__('My New Column'),
        'index'  => 'myNewColumn'
    ),'xyz');
    return parent::_prepareColumns();
} 
```*

# java - 我的 EmployeeStore 中的 MainApp 出错

> ID：11476925
> 
> 赞同：0
> 
> 时间：2012-07-13T19:14:59.257
> 
> 标签：java, hashmap

嘿，我创建了一个 Edit 方法来编辑 EmployeeStore 的内容，例如编辑姓名、ID 和电子邮件。所以在菜单中我有一个 switch 语句。并在编辑选项即时设置

```
 System.out.println("Edit");
           Employee employee2 = MenuMethods.userInput();
           Store.searchByName(employee2);
         if (employee != null)
        {
            employee.setEmployeeName("Joe");
            employee.setEmployeeId(1);
            employee.setEmployeeEmail("webmail.com");
           Store.edit(employee);
           Store.print(); 
```

但问题是方法 searchByName 有一个错误，内容为：EmployeeStore 类型中的方法 searchByName(String) 不适用于参数 (Employee)。我不知道这有什么问题，我在我的 MainApp 中对 add 方法使用相同的步骤。

这是我的代码。

主应用

```
//Imports.
import java.util.Scanner;
//********************************************************************  
public class MainApp
{
    //The Scanner is declared here for use throughout the whole MainApp.
    private static Scanner keyboard = new Scanner(System.in);

    public static void main(String[] args)
    {
        new MainApp().start();

    }
    public void start()
    {
//Create a Store named Store and add Employee's to the Store.
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));

        Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));

        Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));
//********************************************************************      

/*Test Code.
        Store.searchByName("James O' Carroll");
        Store.print();
        Store.searchByEmail("gmail.com");
        Employee andy = Store.searchByEmail("hotmail.com");
        System.out.println(andy);
        Employee employee = Store.searchByName("James O' Carroll");
        if (employee != null)
        {
            employee.setEmployeeName("Joe");
            employee.setEmployeeId(1);
            employee.setEmployeeEmail("webmail.com");
           Store.edit(employee);
           Store.print();
        }*/
//********************************************************************      

        int choice ;
        System.out.println("Welcome to the Company Database.");
        do
        {
         choice = MenuMethods.getMenuChoice(
                "1.\tView All" +
                "\n2.\tAdd" +
                "\n3.\tDelete" +
                "\n4.\tDelete All " +
                "\n5.\tEdit" +
                "\n6.\tSearch" +
                "\n7.\tPrint"+
                "\n8.\tExit", 8, "Please enter your choice:", "Error [1,8] Only");
         //String temp = keyboard.nextLine();  This prevented entering the choice.
        switch (choice) 
        {
            case 1:
                 System.out.println("View All");
                Store.print();

                break;

        case 2:
             System.out.println("Add");
                Employee employee = MenuMethods.userInput();
                Store.add(employee);

                break;

        case 3:
             System.out.println("Delete");
                //Store.delete();

                break;

        case 4:
                System.out.println("Delete All");
                Store.clear();

                break;
        case 5:
           System.out.println("Edit");
           Employee employee2 = MenuMethods.userInput();
           Store.searchByName(employee2);
         if (employee != null)
        {
            employee.setEmployeeName("Joe");
            employee.setEmployeeId(1);
            employee.setEmployeeEmail("webmail.com");
           Store.edit(employee);
           Store.print();

            break;
        case 6:
             System.out.println("Search");
             Employee employee1 = MenuMethods.userInput();
             Store.searchByName(employee1);

            break;
        case 7:
             System.out.println("Print");
            Store.print();

            break;
        case 8:
             System.out.println("Exit");

            break;
        }

        } while (choice != 8);

     }
} 
```

编辑方法

```
public void edit(Employee employee)
    {
        map.put(employee.getEmployeeName(), employee);
    } 
```

用户输入法

```
public static Employee userInput()
    {
         String temp = keyboard.nextLine();
         Employee e = null;
         System.out.println("Please enter the Employee Name:");
         String employeeName = keyboard.nextLine();
         System.out.println("Please enter the Employee ID:");
         int employeeId = keyboard.nextInt();
         temp = keyboard.nextLine();
         System.out.println("Please enter the Employee E-mail address:");
         String employeeEmail  = keyboard.nextLine();
         return e = new Employee(employeeName , employeeId, employeeEmail);

    }
    //********************************************************************
//Method for validating the choice.
         public static int getMenuChoice(String menuString, int limit, String prompt, String errorMessage) 
         {
                System.out.println(menuString);
                int choice = inputAndValidateInt(1, limit, prompt, errorMessage);
                return choice;
         }
    //********************************************************************
    //This method is used in the getMenuChoice method.
            public static int inputAndValidateInt(int min, int max, String prompt, String errorMessage) 
            {
                int number;
                boolean valid;
                do {
                    System.out.print(prompt);
                    number = keyboard.nextInt();
                    valid = number <= max && number >= min;
                    if (!valid) {
                        System.out.println(errorMessage);
                    }
                } while (!valid);
                return number;
            }
    //******************************************************************** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:24:51.763

错误消息准确地说明了问题所在：

> EmployeeStore 类型中的方法 searchByName(String) 不适用于参数 (Employee)

您的方法`searchByName`需要 parameter `String`，而您将其传递给`Employee`对象。

您的代码中有一些，其中之一：

```
 case 5:
           System.out.println("Edit");
           Employee employee2 = MenuMethods.userInput();
           Store.searchByName(employee2); 
```

你正在传入`employee2`，它的类型`Employee`

你的`searchByName`方法实现在哪里？方法名称“ `byName`”建议您按名称搜索`String`，而不是`object`. 如此简单的解决方案可能会：

```
Store.searchByName(employee2.getName()); 
```

在旁注中，您的代码看起来很糟糕/糟糕的设计。

# heroku - 播放框架模块手动更改

> ID：11476928
> 
> 赞同：1
> 
> 时间：2012-07-13T19:15:13.337
> 
> 标签：heroku, playframework

我有一个在 Play 中使用的模块！应用程序，但需要对其进行某些调整以满足我的需求。我也在为我的主机使用 Heroku，所以每当我部署时，它都会运行一个“play deps”并吹走我手动构建的库。

有什么方法可以让我手动更改 Heroku？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:59:50.993

**对于播放 1.x**：

你的`modules`目录不应该在你的 git repo 中。相反，您应该设置一个文件存储库，Play 将使用它来解决依赖关系。在你`conf/dependencies.yml`做类似的事情：

```
require:
    - play
    - localModule -> foo 0.3

repositories:
    - local repo:
        type: local
        artifact: "${application.path}/local-repo/[module]-[revision].zip"
        contains:
            - localModule -> * 
```

然后将文件放在项目`foo-0.3.zip`的新`local-repo`目录中。您可以通过运行在本地测试它：

```
play deps --sync 
```

# php - PHP 上传进度会话

> ID：11476940
> 
> 赞同：3
> 
> 时间：2012-07-13T19:15:57.627
> 
> 标签：php, progress-bar

我正在尝试使用 PHP 创建一个上传进度条。我看到了 PHP 5.4 的新特性：[上传进度会话](http://www.php.net/manual/en/session.upload-progress.php)。

这是我的 HTML 代码：

```
<form id="upload" action="ajax/progress.php" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="<?php echo ini_get("session.upload_progress.name"); ?>" value="dupload" />
    <input id="file1" type="file" name="file1" />
    <input class="btn primary" type="submit" value="Upload" />
</form> 
```

这是progress.php：

```
<?php
session_start();

$key = ini_get("session.upload_progress.prefix") . 'dupload';

if (!empty($_SESSION[$key])){
    $current = $_SESSION[$key]["bytes_processed"];
    $total = $_SESSION[$key]["content_length"];
    echo $current < $total ? ceil($current / $total * 100) : 100;
}
else {
    var_dump($_SESSION);
    var_dump($_FILES);
} 
```

阿贾克斯：

```
$('#upload').submit(function () {
    interval_id = setInterval(function () {
        $.ajax({
            url: "ajax/progress.php6",
            type: "POST",
            success: function (data) {
                console.log(data);
            }
        });
    }, 200);
    return false;
}); 
```

所有ini设置都是正确的。（会话已启用，名称和前缀正确）

我总是得到一个空的会话数组。怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:55:25.357

无法对其进行排序，因此我使用了 XMLHTTPREQUEST“进度”操作，并且效果很好。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:50:34.650

在一个 POST 请求中是不可能的，您可以执行 AJAX 请求，并在文件上传时读取会话。文件上传后，`session.upload_progress.name`密钥被删除，所以你得到一个空数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:00:39.937

我认为这是因为您的表单没有被提交，因为您在

```
$('#upload').submit(function () {
    interval_id = setInterval(function () {
        $.ajax({
            url: "ajax/progress.php6",
            type: "POST",
            success: function (data) {
                console.log(data);
            }
        });
    }, 200);
    return false;
}); 
```

并且它初始化间隔，所以页面总是返回null，因为没有上传任何内容。尝试使用[http://www.malsup.com/jquery/form](http://www.malsup.com/jquery/form)，它提交表单

# windows - DX11 交换链仅显示第一帧。在它和黑色图像之间翻转

> ID：11476941
> 
> 赞同：1
> 
> 时间：2012-07-13T19:16:02.363
> 
> 标签：windows, directx, windows-8, directx-11

当我运行我的 3d 场景时，它只渲染第一帧，然后在它和黑屏之间翻转，导致大量闪烁。我认为这是我的交换链设置不正确，但我真的不知道。

这是我设置它的代码。它几乎是从 Microsoft 示例中复制而来的。

```
DXGI_SWAP_CHAIN_DESC1 sd = {0};
sd.Width = 0;                           
sd.Height = 0;
sd.Format = DXGI_FORMAT_R8G8B8A8_UNORM; 
sd.Stereo = false; 
sd.SampleDesc.Count = 1;                
sd.SampleDesc.Quality = 0;
sd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
sd.BufferCount = 2;                     
sd.Scaling = DXGI_SCALING_NONE;
sd.SwapEffect = DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL;
sd.Flags = 0;

CoreWindow^ window =  reinterpret_cast<CoreWindow^>(mSystem->GetIWindow());
hr = pIDXGIFactory->CreateSwapChainForCoreWindow(mD3DDevice,  reinterpret_cast<IUnknown*>(window), &sd, NULL, &mSwapChain);
EA_ASSERT(SUCCEEDED( hr )); 
```

现在的代码：

```
DXGI_PRESENT_PARAMETERS  presentParameters = {0};
HRESULT hr = mSwapChain->Present1(0, 0, &presentParameters); 
```

在我看来，这很简单，所以我真的不明白为什么它不起作用。

场景一直在运行。更新函数每帧运行一次。

另外，如果我在 PIX 中检查渲染，一切都很好。我得到了我期望的渲染结果。它只是没有出现在屏幕上。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T20:03:54.170

原来我不是每帧都在我的设备上下文上调用 OMSetRenderTargets。现在它起作用了。

# html - 保持缩放元素内联的问题

> ID：11476942
> 
> 赞同：0
> 
> 时间：2012-07-13T19:16:16.147
> 
> 标签：html, css

出于某种原因，我在浏览器缩放方面遇到了巨大的困难。这是我的困境：

我有一个顶栏，由以下代码表示：

```
 .topbar {
        position: absolute;
        background: #232121;
        min-width: 800px;
        height: 111px;
        top:0;
        left: 0;
        right: 0;
        margin: 0 auto;
    } 
```

在该顶部栏元素内，我有一个徽标，由`a`属性上的背景图像创建

```
 #logo {
        margin-top: 20px;
        background: #232121 url("images/logo.png") no-repeat right top;
        width:299px;
        height: 76px;
        display:inline-block;
        text-indent: -99999px;
    } 
```

然后我在右侧有一个小登录表单：

```
 .userLogin {
        display: inline;
        margin-left: 40px;
    } 
```

还有一个名为 Links 的 div……我几乎完全忘记了我在使用它的目的。

```
 #links {
        width: 100%;
        text-align:center;

    } 
```

这是完整的 HTML：

```
<body>
    <div class="topbar"><div id="links">
       <a href="index.html" id="logo">Logo</a>
        <form action="index.html" method="POST" class="userLogin">
            <input type="text" value="email">
            <input type="password" value="password" />
            <input type="submit" value="Sign In" id="signin" />
        </form></div>
    </div>
</body> 
```

现在这会在页面顶部创建元素，并且当浏览器宽度调整时它们会正确缩放。但是，由于这两个元素都不是浮动的，我无法正确关闭登录表单以与徽标对齐。我希望这两个元素彼此之间的距离是固定的，但我希望它们仍然随着页面的宽度而缩放。

我已经尝试为这两个元素添加填充和边距......但它们都作为一个元素，这是行不通的，因为我试图只向下移动一个元素。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:22:35.683

登录时的 display: inline 没有做任何事情，因为您在徽标上使用了绝对定位。我认为你应该给登录一个位置，然后使用 top: 或 margin-top: 取决于你选择的位置类型。

# c# - 双指针的C#“版本”？（即 BYTE **变量）

> ID：11476943
> 
> 赞同：-1
> 
> 时间：2012-07-13T19:16:17.570
> 
> 标签：c#, c++, pointers

我知道 C# 没有指针，那么如何将双指针“转换”为 C#？

我正在处理 MPEG-TS（传输流）

```
int ParseTxPkt(BYTE *pTxPkt, BYTE **ppPayload, int &payloadLen, int &pid, 
    int &payload_unit_start_indicator,int &continuity_counter,
    __int64 &pcr,__int64 &offset,bool peek) 
```

参考第二个参数。BYTE * 转到 byte[]，&variables 转到 ref int ...我相信...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:19:51.867

在函数参数上，您可以使用`ref`或`out`用于其中一个开始标记您的参数，`[]`用于另一个。

```
private void Foo(ref byte[] likeADoublePointer)
{
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-13T19:37:27.930

您可以使用锯齿状数组，`byte[][]`

# pydev - How to highlight the "undefined method" in PyDev

> ID：11476947
> 
> 赞同：0
> 
> 时间：2012-07-13T19:16:33.657
> 
> 标签：pydev

I am coding with PyDev in Eclipse. It seems that PyDev can't highlight those "undefined methods" in my own class, e.g. self.do(). Could anybody give some clues about how to turn this on in preference, or PyDev current doesn't support this feature?

Thanks! Leon

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:45:05.570

This is a feature which was not added into PyDev because it's bound to give many false positives (because of the dynamic nature of Python), although it's surely doable...

Now, having said that, you can use PyLint (which does have that feature) integrated into PyDev.

# mysql - 使用带有重音符号的 LOCATE

> ID：11476948
> 
> 赞同：1
> 
> 时间：2012-07-13T19:16:34.207
> 
> 标签：mysql

如何在比较时使用 LOCATE 忽略重音？例如：

```
SELECT LOCATE('a', 'João'); -- Fail
>> Currently: 0
>> Need:      3

SELECT LOCATE('ã', 'João'); -- Ok
>> Currently: 3
>> Need:      3 
```

我怎么能这样做？我不能在这种情况下使用 LIKE （它有效！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:51:49.020

一个好的解决方案是（基于 Michael Mior 的回答）：

```
 SELECT LOCATE('a', CONVERT('João' USING latin1)); 
```

基准测试（Michael Mior 方法）：

```
 SET character_set_connection='latin1';
  SELECT LOCATE('a', 'João');
  >> 10.000.000 run at 0.532s 
```

基准测试（当前方法）：

```
 SELECT LOCATE('a', CONVERT('João' USING latin1));    
  >> 10.000.000 run at 1.906s 
```

Michael Mior 版本快 4 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T21:15:02.230

如果您使用`latin1`字符集，某些重音符号将被忽略。但是，这可能会对某些输入产生意外行为，因此请务必彻底测试。

```
SET character_set_connection='latin1';
SELECT LOCATE('a', 'João'); 
```

# ruby-on-rails - omn iauth-identity、on_failure 和 uid

> ID：11476950
> 
> 赞同：1
> 
> 时间：2012-07-13T19:16:37.517
> 
> 标签：ruby-on-rails, omniauth

我正在使用omniauth-identity。当用户尝试登录但失败时，如果只是密码不正确，我想将他重定向到另一个地方。

现在它看起来像这样：

```
OmniAuth.config.on_failure = -> env do

  if env['omniauth.error.strategy'].name != 'identity'
    OmniAuth::FailureEndpoint.new(env).redirect_to_failure 
  end

  #if user
    IdentitiesController.action(:new).call(env)
  #else
   # HomeController.action(:index).call(env)
  end

end 
```

除了策略、错误和来源之外，我似乎无法获得任何其他信息（在本例中为 uid）。是否有可能获得这些信息？

# html - Apple Retina 支持 HTML 中的图像

> ID：11476953
> 
> 赞同：2
> 
> 时间：2012-07-13T19:16:54.383
> 
> 标签：html, ios5, safari, mobile-safari

在 Apple 的网站上，他们似乎支持视网膜显示器。它的工作方式与在 iOS 上使用 @2x 图像的方式相同吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-31T01:29:05.147

*   将图像存储在 /img/logo.png（普通版）和 /img/logo@2x.png（视网膜版）中

用于头部标签的 JS

```
var retina = 0;
try {
    retina = Number(window.devicePixelRatio);
} catch(e) {}
retina = (retina > 1) ? 1 : 0;

var dt = new Date();
dt.setTime(dt.getTime()+(30*24*60*60*1000));
document.cookie = [
    '_r=' + retina,
    'expires=' + dt.toGMTString(),
    'path=/img/'
].join(';'); 
```

图像的 mod_rewrite

```
RewriteCond %{HTTP_COOKIE} _r=1
RewriteCond %{REQUEST_URI} img/
RewriteRule ^(.*)(.gif|.jpg|.png)$ $1@2x$2 [NC,L] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T19:48:35.950

有许多关于如何完成的很好的演练，包括： http: [//mir.aculo.us/2012/06/26/flowchart-how-to-retinafy-your-website/](http://mir.aculo.us/2012/06/26/flowchart-how-to-retinafy-your-website/)

![重新调整您的网站](../Images/f072ce9a4174b4b4cecec89e199726bc.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-29T02:48:57.817

Webkit 开发人员已将 srcset 属性添加到 <img/> 标签中，该标签目前在 Webkit Nightly 中（截至 2013 年 8 月 28 日，尚未在任何已发布的 Safari 版本中）。这是一个 W3C 标准，因此希望其他浏览器也能尽快支持它。它具有优雅降级的好处，因为不支持该标签的旧浏览器只会使用普通图像。

例子：

```
<img src="normal-image.jpg" srcset="better-image.jpg 2x"> 
```

这是有关该功能的博客文章：[https ://www.webkit.org/blog/2910/improved-support-for-high-resolution-displays-with-the-srcset-image-attribute/](https://www.webkit.org/blog/2910/improved-support-for-high-resolution-displays-with-the-srcset-image-attribute/)

# javascript - scrollTo 插件不滚动导航外的链接

> ID：11476959
> 
> 赞同：0
> 
> 时间：2012-07-13T19:17:19.537
> 
> 标签：javascript, flash

我在[avalonbyeaw.com](http://www.avalonbyeaw.com)的导航上成功实现了 scrollTo 脚本，我的客户希望从主页添加链接。容易，对吧？我猜不是。它不仅不会滚动，而且还会添加`#finishes`到我们从导航链接中删除的 URL。我猜我只需要将链接添加到某处的函数？我想不通。

Javascript

```
$(document).ready(function() {

    $('a.panel').click(function () {

        $('a.panel').removeClass('selected');
        $(this).addClass('selected');

        current = $(this);

        $('#wrapper').scrollTo($(this).attr('href'), 800);      

        return false;
    });

    $(window).resize(function () {
        resizePanel();
    });
});

function resizePanel() {

    width = $(window).width();
    height = $(window).height();

    mask_width = width * $('.item').length;

    $('#debug').html(width  + ' ' + height + ' ' + mask_width);

    //$('#wrapper, .page').css({width: width, height: height});
    //$('#stage').css({width: mask_width, height: height});
    $('#wrapper').scrollTo($('a.selected').attr('href'), 0);
} 
```

工作导航链接html

```
<div id="nav-finishes" class="nav"><a href="#finishes" class="panel panel-finishes" alt="finishes"><img src="images/spacer.gif" height="10" width="79" border="0" /></a></div> 
```

添加到piecemaker xml提要中的非工作链接

```
<Text>&lt;p&gt;Avalon by EAW features automotive-class finishes on all trim pieces. &lt;a href="#finishes" class="panel"&gt;Optional premium enclosure finishes&lt;/a&gt; set these systems in a class by themselves.&lt;/p&gt;</Text> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:40:29.207

jQuery 无法将单击事件处理程序附加到 flash 内返回的 XML，这就是您的脚本失败的原因。

**可能的油腻黑客：**

尝试在 XML 中返回类似的内容。

```
&lt;a href="#finishes" onClick="$('#nav-finishes a').trigger('click'); return false;" class="panel"&gt; 
```

这里的想法是，当用户单击 xml 中的链接时，它将触发对主导航的虚拟单击，我们知道这已经在工作了。

**可能更好的破解：**

安装这个 jQuery 插件：http: [//benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

然后你可以做这样的事情：

```
$(window).hashchange( function(e){
     e.preventDefault();
      $('#wrapper').scrollTo(location.hash, 800); 
}); 
```

你可以删除`$('#wrapper').scrollTo($(this).attr('href'), 800);`

# iphone - tableViewController 中的多线程奇怪延迟

> ID：11476961
> 
> 赞同：0
> 
> 时间：2012-07-13T19:17:27.337
> 
> 标签：iphone, objective-c, ios, multithreading, uitableview

所以在我的 tableViewController 中我把这段代码放进去。我的想法是使用另一个名为 downloader 的线程来下载一些不会影响我的主线程的数据。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    dispatch_queue_t downloadQueue = dispatch_queue_create("downloader", NULL);
    dispatch_async(downloadQueue, ^{
        self.bandList = [self.fetchData fetchBandList];
        NSLog(@"done");
        [self.tableView reloadData];
        NSLog(@"reloadDone?");
    });
    dispatch_release(downloadQueue);
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"WT..?");
    static NSString *CellIdentifier = @"Band List";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    cell.textLabel.text = [[self.bandList objectAtIndex:indexPath.row] objectForKey:@"itemname"];

    return cell;
} 
```

但是，有一些有线延迟。在我的日志中，“完成”和“重新加载完成？” 当我转到我的 tableViewController 时立即出现，但是“WT..？” 6 秒后出现！太连线了！任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:19:47.230

对 UI 的任何更新都应该在主队列上完成

```
dispatch_async(downloadQueue, ^{
        self.bandList = [self.fetchData fetchBandList];
        NSLog(@"done");
        dispatch_async(dispatch_get_main_queue(),^{[self.tableView reloadData];});
        NSLog(@"reloadDone?");
    }); 
```

# javascript - 脚本加载的时间/顺序

> ID：11476962
> 
> 赞同：1
> 
> 时间：2012-07-13T19:17:29.687
> 
> 标签：javascript, google-maps, google-maps-api-3, loading

我正在使用谷歌地图并且遇到了一个时间问题，我认为......特别是何时加载谷歌地图 API 的脚本。

我正进入（状态：

```
Uncaught ReferenceError: google is not defined 
```

但是，如果我在控制台中查看 Google 对象，它会显示得很好。

在我尝试使用之前，API 的脚本是否尚未完全加载？

另外，我有这个主脚本（下面）加载了“defer”属性，尽管我认为这不应该是一个问题。

我错过了什么？

提前致谢。

```
var inrMap = {
    map : null,
    markers : [],

    addCoords : function(){
        var regex1 = /\s/;
        var regex2 = /\./;
        for(var i in inrMap.locations){
            var address = inrMap.locations[i].address;
            address = address.replace(regex1, '+');
            address = address.replace(regex2, '');
            $.ajax({
                data : 'http://maps.googleapis.com/maps/api/geocode/json?address=' + address + '&sensor=false',
                dataType : 'json',
                type : 'get',
                success : function(data, textStatus, xhr){
                    inrMap.locations[i].lat = data.geometry.location.lat;
                    inrMap.locations[i].lng = data.geometry.location.lng;
                },
                error : function(xhr, textStatus, errorThrown){
                    //console.error('problem with geocoding service...');
                }
            });     
        }
    },

    generateMap : function(){
        var map_options = { center : new google.maps.LatLng(-34.397, 150.644), zoom : 8, mapTypeId : google.maps.MapTypeId.ROADMAP };
        inrMap.map = new google.maps.Map(document.getElementById("map_canvas"), map_options);
        //load markers
        for(var i in inrMap.locations){
            var position = new google.maps.LatLng(inrMap.locations[i].lat, inrMap.locations[i].lng);
            inrMap.markers[i] = new google.maps.marker(position, inrMap.locations[i].title);        
            inrMap.markers[i].setMap( { map : inrMap.map, draggable : false, animation : google.maps.Animation.DROP } );
        }
    },

    bindMarkers : function(){
        // $(inrMap.markers).each(function(){
        //  this.bind('click', function(){
        //      //create new info window
        //      var location_name = this.id; // ***** this needs to be fixed ******
        //      var iw = new google.maps.InfoWindow( { content : this.id.title, maxWidth : '300' } );
        //  })
        // });
    },

    bindForm : function(){

    } 
}

inrMap.locations = {
            jacksonville : {
                title : 'jacksonville',
                address : '4651 Salisbury Rd. Suite 170, Jacksonville FL 32256',
                phone : '(904) 398-0155',
                link : '/location/florida-regional-office',
                marker : null
            },
            miami : {
                title : 'Miami',
                address : '15050 NW 79 Court Suite 104, Miami Lakes FL 33016',
                phone : '(305) 403-0594',
                link : '/location/florida-regional-office',
                marker : null
            }

etc...

}

//load google maps js
var gmaps_script = document.createElement('script');
gmaps_script.type = 'text/javascript';
gmaps_script.src = 'http://maps.googleapis.com/maps/api/js?key=*****&sensor=false';  
$('body').append(gmaps_script);

$(function(){

for(var i = 0; i < 4000; i++){
    var foo = Math.sin(i);
}

//check if locations object is not in local storage (and thus does not have coordinates)
if(!localStorage.getItem('inr_locations')){
    //get lat & long, add to locations obj
    inrMap.addCoords();
    //save object
    //localStorage.setItem('inr_locations', inrMap.locations);
}
else{
    //pull locations object from local storage
    //inrMap.locations = localStorage.getItem('inrMap.locations');
}

//create element to place map in
var map_canvas = document.createElement('div');
$(map_canvas).attr('id', 'map_canvas').appendTo('#content');

//generate map
inrMap.generateMap();

//bind events to map markers
//inrMap.bindMarkers();

//bind events to form / links
//inrMap.bindForm();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:28:34.383

> 在我尝试使用之前，API 的脚本是否尚未完全加载？

*是的，这就是问题所在。*

代替：

```
var gmaps_script = document.createElement('script');
gmaps_script.type = 'text/javascript';
gmaps_script.src = 'http://maps.googleapis.com/maps/api/js?key=*****&sensor=false';  
$('body').append(gmaps_script); 
```

使用[**jQuery.getScript()**](http://api.jquery.com/jQuery.getScript/)并尝试这样的事情：

```
//Temporary creating global function,for handling loading of the Google Maps Library
window.__googlemapscallback = function(){
     delete window.__googlemapscallback;

     //do your map initialization here
};

$.getScript('http://maps.googleapis.com/maps/api/js?key=*****&sensor=false&&callback=__googlemapscallback'); 
```

加载的主要问题`Google Maps V3 API`是脚本被部分加载。`http://maps.googleapis.com/maps/api/js?key=*****&sensor=false`通过url，您加载库的第一个块，然后加载其他块。所有块完全加载后，库调用url中提供的[回调函数。](https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API)

# android - 后退按钮按下问题

> ID：11476963
> 
> 赞同：0
> 
> 时间：2012-07-13T19:17:31.647
> 
> 标签：android, back-button

我正面临后退按钮的问题。在我的应用程序中，我想实现一个功能，当用户单击后退按钮时，它应该移动到主屏幕。为此，我编写了一个代码。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            if(backCount==0){
                backCount++;
            Intent restartResearchActivity = new Intent(ResearchListNew.this,ResearchListNew.class);
            startActivity(restartResearchActivity);

            }

            else{

            }
        }

        return super.onKeyDown(keyCode, event);
    } 
```

我使用了一个静态变量 int backCount=0 ，这样当用户在主屏幕上并且想要退出 APP 时，他应该移动到上述循环的 else 部分，并且不应该再次被提示到主屏幕，

但是假设我第一次使用后退按钮时它工作正常并且后退计数现在将 = 1，之后如果用户单击后退按钮它不会移动到主屏幕，因为现在后退计数大于 0。

所以请在这种情况下帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:23:31.327

I'm not sure of how nested your Activities are, but if just the one activity, you can try calling finish() on it and that will kill the Activity and bring you back to whatever Activity was up before hand. It's pretty much what the back button does by default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:29:58.840

您可以使用 onKeyDown 或覆盖 BackPressed 功能。

按照代码，它会工作

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

startActivity(new Intent(this,HomeActivity.class));
} 
```

享受！！！

# c# - 在下拉列表中显示选定的值

> ID：11476968
> 
> 赞同：0
> 
> 时间：2012-07-13T19:17:55.613
> 
> 标签：c#, asp.net, drop-down-menu

我不知道这是否可能——谷歌搜索一无所获。但我想让 DropDownList 在选择更改时显示其选定索引的值。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:58:12.747

我认为你有点混淆了词汇。常规下拉菜单包含“项目”。

在纯 html 中，下拉列表被呈现为一个`<select ..>`元素，其中的`<option ..>`元素代表项目。

在 Asp.Net 中，相应的控件被调用`DropDownList`并且它包含`ListItem`子元素。`ListItems`具有属性`Text`和`Value`，其中 Text 属性是 UI 中显示的内容，而 Value 属性是回发到服务器的内容。

对于父级`DropDownList`，`SelectedValue`是`Value`来自选定的属性`ListItem`。另一方面，SelectedIndex 是`ListItem`从下拉列表中的所有 ListItems 中选择的从零开始的数字索引。

词汇课不碍事，您似乎想要一个下拉菜单，而不是显示文本，而是在 UI 中显示图像，然后用户可以选择正确的图像。下拉列表的 value 属性将包含所选图像的某种 ID（可能是图像文件名，或者数据库表中的键或类似的东西）。

为了让您在下拉菜单中显示图像，请查看此问题的已接受答案：

[下拉列表中的图像](https://stackoverflow.com/questions/1079112/images-in-dropdown-list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:24:19.113

Value cannot be retreived, unless if you havent proved it when setting datasouce. You must proved DisplayMember (the items displayed) and ValueMember property to retreive value of selected item. If you didnt do so, you cannot get Vlaue (or selectedValue) of selected item.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T13:58:21.590

**这是下拉列表：**

```
@Html.DropDownListFor(model => model.CountyID, new SelectList(Model.allCounties, "CountyID", "CountyName"), "Select.....", new { @class = "form-control", @id = "CountyID", @onchange = "DisplayCountyInfo();" })

<div id="CountyView">
  @Html.Partial("_CountyView", Model._countyModel)
</div>

<script>
function DisplayCountyInfo() {
    $("#CountyView").load('@(Url.Action("_CountyView", "Controller", null, Request.Url.Scheme))?id=' + $("#CountyID").val());
};
</script> 
```

**创建局部视图**

```
@model Application.Web.ViewModels.CountyViewModel 

<h4><b>@Model.CountyName</b></h4>
<a href="@Model.URL" target="_blank">@Model.URL</a> 
```

**控制器**

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
    public ActionResult _CountyView(int id)
    {
        var county = _countyService.Get(id);
        CountyViewModel viewModel = new CountyViewModel()
        {
            CountyName = county.CountyName,
            URL = county.URL
        };
        return PartialView("_CountyView", viewModel);
    } 
```

# android - 图像识别框架/指南-增强现实

> ID：11476970
> 
> 赞同：6
> 
> 时间：2012-07-13T19:18:19.837
> 
> 标签：android, image, augmented-reality, scanning

是否有任何现有的框架或指南提供或解释如何让您的应用识别图像。所以基本上假设图像是一个特定的瓶子，有没有框架可以让你扫描瓶子，然后识别它是一个瓶子？

我不需要整个图像覆盖的东西或地理位置（所以基本上只有增强现实的图像识别一半）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:54:24.457

其中有一些可用。

1.  [武福里亚](http://www.qualcomm.com/solutions/augmented-reality)

2.  [开放式CV](http://opencv.org/)

3.  [Metaio](http://www.metaio.com/)（这是付费的）

# jquery - 链接在安卓上不起作用

> ID：11476977
> 
> 赞同：0
> 
> 时间：2012-07-13T19:18:48.350
> 
> 标签：jquery, html, hyperlink

我有一个网站，它生成一个通过 jquery 与浏览器一起拉伸和滚动的背景图像。这个想法是当页面加载时，用户只需单击图像上的任意位置，然后将它们带入站点。

我`<a>`在身体周围有一个标签，但有一些问题：

*在大多数浏览器上不会提示它是鼠标链接

*适用于 iPhone，但在 android 上根本无法链接。

实现这一目标的最佳、最跨浏览器/移动设备的有效方式是什么？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>THE BROADHURST</title>
    <meta charset="utf-8">
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/styles/css/thebroadhurst.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/styles/css/jquery.vegas.css" type="text/css" media="screen" />

    <script type="text/javascript" src="/jquery/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="/jquery/jquery.vegas.js"></script>
    <script>
    $( function() {
      $.vegas({
        src:'/styles/images/bh_rotate/bhR_<?php echo rand(1,31); ?>.png'
      });
    });
    </script>
</head>
<a href="/home.php">
<body>
    <div class="structure_main clearfix">
    </div>
</body>
</a> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:48:41.460

我不确定执行此操作的“最佳”方式是什么，但也许您可以在用户单击正文时使用 JavaScript 重定向用户，而不是使整个正文成为链接。类似于以下内容：

```
<body onclick="window.location = 'somewhere over the rainbow'"> 
```

...或稍后将其附加到事件中：

```
​$(function() {
    $('body').click(function() {
        window.location = 'somewhere over the rainbow';
    });
});​​​​​​​​​​​​​ 
```

这打破了网络语义，但至少你的标记是有效的。如果你想让`<a>`光标悬停在 body 上，只需添加以下 CSS：

```
body { cursor: pointer; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:29:36.250

我的朋友是无效的 HTML，所以我并不惊讶它不起作用

我能想到的最接近的事情是块链接，您将锚放在主体标签之后并在结束主体标签之前结束它，但这似乎有点......极端

# php - 会话不适用于 Wordpress

> ID：11476978
> 
> 赞同：0
> 
> 时间：2012-07-13T19:18:51.990
> 
> 标签：php, wordpress, session

我已经搞砸了一段时间，我知道这很简单。我在另一个网站上使用了基本相同的代码，它似乎没有任何问题，并且在同一台服务器上运行，所以我认为这不是服务器端问题。这是一个非常简单的登录脚本：

```
function user_login($username, $password) {
$passcorrect = user_checkpass($username, $password);
if ($passcorrect == "1") {
    $_SESSION['eocname'] = $username;
    echo("SETTING SESSION: ".$_SESSION['eocname']."<br />");
    $success = "1";
} else {
    $success = "0";
}
return($success);
} 
```

这似乎是在设置 SESSION 变量，并且位于 functions.php 文件中。

但是，一旦您刷新页面，SESSION 似乎就会消失。这是 page.php 文件中的代码：

```
<?php
    if (!isset($_SESSION['eocname'])) {
        if (!isset($_POST['username'])) {
            echo("You must login to access this page!");
            echo($_SESSION['username']);
        } else {
            $result = user_login($_POST['username'], $_POST['password']);
            if ($result == "0") { 
                echo("Incorrect Username or Password."); 
            } else { 
                echo("Login Successful!"); 
            }
        }
    } else {
        echo('Welcome back, '.$_SESSION['username'].'!');
    }
    ?> 
```

请注意，我确实意识到那里可能有一些多余的东西，我一直在玩弄它试图确定问题，但似乎每次 $_SESSION['eocname'] 似乎都没有在页面设置被刷新。

我添加了 session_start(); 到我的functions.php文件的顶部没有错误，以确保它可以工作，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:41:26.123

您应该在插件中创建一个 init 操作并在函数 init 中启动会话。您的代码应如下所示：

```
add_action('init', 'initEverything');

function initEverything() {
    if(!session_id()) {
        session_start();
    }
} 
```

其他选项是在 wp-config.php 中启动会话

```
if(!session_id()) {
    session_start();
} 
```

# oauth - Twitter API 入门

> ID：11476980
> 
> 赞同：0
> 
> 时间：2012-07-13T19:18:57.743
> 
> 标签：oauth, twitter

我正在开发一个应用程序，用户通过该应用程序向我发送推文 (@Eamorr)，然后我根据推文中嵌入的地理位置回复最近企业的电话号码。

我不确定从哪里开始，我想我会问社区。

我想让它尽可能实时 - 即用户在推特@Eamorr 和他们收到电话号码之间的延迟最小。node.js 是一个很好的解决方案吗？

顺便说一句，我的服务器运行 php，但我与语言无关，因此欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:09:23.863

不要重复调用twitter服务器！

您想使用[Twitter Streaming API](https://dev.twitter.com/docs/streaming-apis)。这将使您可以实时访问定向给您的推文。

具体来说，您希望拥有一个[User Stream](https://dev.twitter.com/docs/streaming-apis/streams/user)。每次有人向您发送推文时，这都会将数据推送到您的服务器。

收到推文后，您可以回复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:31:37.980

我的 2 美分。

推特有点频繁宕机，api总会有一段时间的延迟，所以我推荐如下：

**第一步**通过 php 执行服务器到服务器 GET，将所需的参数传递给 twitter api。[http://tareq.wedevs.com/2009/05/playing-with-twitter-json-using-php/](http://tareq.wedevs.com/2009/05/playing-with-twitter-json-using-php/)

**第二步**使用 Php 解析 json 并将其“缓存”到 mySQL 中。这样，如果 twitter 出现故障，您的网站也不会出现故障。此外，您的用户不必等待 api 调用完成。

**第三步**使用标准的 mySQL 和 PHP 将 html 返回给您的用户。

第一步和第二步应该自动运行，每 5 分钟左右运行一次，以保持数据新鲜。恕我直言，可靠性为王，node.js 有毒。如果您已经对灯感到满意，请使用灯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T00:41:50.797

您要做的第一件事是在 Web 浏览器中为 Twitter Developers ( [https://dev.twitter.com/ ) 添加书签。](https://dev.twitter.com/)它将成为与 Twitter API 相关的**所有内容**的圣经。要知道该怎么做，您应该转到[文档部分](https://dev.twitter.com/docs)并阅读入门页面。他们非常有帮助。

# svn - TortoiseSVN：没有发现差异

> ID：11476983
> 
> 赞同：4
> 
> 时间：2012-07-13T19:19:05.707
> 
> 标签：svn, tortoisesvn, visualsvn

在 Windows 7 64 Pro 上运行 Visual Studio 2008 项目并安装以下内容：

TortoiseSVN 1.7.7，内部版本 22907 - 64 位

我最近从 1.6 升级，看看它是否会缓解我们遇到的问题，但无济于事。

无论如何，问题：

对于这个特定的项目，我们使用 CodeSmith Generator 为我们的应用程序生成我们的 netTiers 层。这些文件被生成到一个单独的目录中，并且只有必要的文件被复制到我们的项目的工作 SVN 副本中（我们不复制所有文件，因为我们不希望我们的部分文件被覆盖）。

一旦这些文件被复制过来，我们就在本地编译、测试，然后在稳定时提交给 SVN。一年多来，这在这个项目上运行良好。

最近，我们的一位开发人员将代码生成为规范。他把它复制了一遍，却发现 TortoiseSVN 没有发现任何文件被更改。奇怪的是，考虑到数据库中添加了一个新字段，这通常会影响很多文件。然后，他通过 TortoiseSVN Explorer 命令进行了“与以前版本的比较”，以确认或否认该问题。

但是，在对以前的版本和工作副本版本进行比较时，他发现文件实际上已经改变了。出于某种原因，TortoiseSVN 没有看到文件已更改。

因此，我想尽我所能确定这是否是他机器上的某个孤立问题或其他问题。我杀死了我的工作副本，重新检查并尝试执行相同的步骤。同样的问题。TortoiseSVN 没有接受这些变化。

现在，作为一个实验，我打开文件并手动复制内容。在这种情况下，TortoiseSVN 完美地接受了变化。

当然，手动执行此操作的问题在于，它依赖于开发人员必须知道每个已更改的文件......此外，由于更新的文件数量众多，因此需要更多时间。

所以，我们在这里束手无策。这是一个错误吗？一些可能被欺骗的设置？没有触发通知 TortoiseSVN 更新的事件？

谢谢大家，-史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:49:46.933

**复制文件时，Windows 7 不会更改“最后修改”时间戳**。根据[TortoiseSVN 的 FAQ 页面](http://tortoisesvn.net/faq.html#detectmodification)，svn 查看文件是否被修改的第一步是检查“上次修改”时间戳，而不是像 Git 这样的检查和。因为目录显示它已修改，但没有文件显示为已修改，**这可能是因为您将文件复制到**.

尝试打开一个被修改的文件，添加一些琐碎的东西，比如空格，关闭它，然后再次尝试检查修改过的文件。我敢打赌这会导致它出现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:51:34.773

这是一个不幸的开发人员错误，他们不仅在过去已经生成了更改，而且没有让人们知道这些知识。只是最终在这个过程中混淆了自己和其他人。

# asp.net-mvc - 流畅的 API 和数据注释

> ID：11476984
> 
> 赞同：2
> 
> 时间：2012-07-13T19:19:11.687
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4.1

DataAnnotations 与 Fluent API 方法做同样的事情吗？

例如，.HasRequired == [Required] 吗？

.HasKey == [密钥]？

如果我不希望我的表 pk 字段生成为 ClassNameClassNameID 如果我对我的 pk 属性使用 ClassNameID 格式，我必须用 [Key] 标记类键或使用 .HasKey 吗？

我可以使用 DataAnnotations 和 Fluent API 的组合吗？或者，是一个还是另一个？

我必须为所涉及的两个类映射 M:M 关系，即

```
public class Foo
{
    public ICollection<Bar> Bars
}

public class Bar
{
    public ICollection<Bar> Foos
}

public class Context : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Foo>()
            .HasMany(f => f.Bars).WithMany(b => b.Foos)
            .Map(t =>
                {
                    t.MapLeftKey("FooID");
                    t.MapRightKey("BarId");
                    t.ToTable("FooBar");
                });

         modelBuilder.Entity<Bar>()
            .HasMany(b => b.Foos).WithMany(f => f.Bars)
            .Map(t =>
                {
                    t.MapLeftKey("FooID");
                    t.MapRightKey("BarId");
                    t.ToTable("FooBar");
                });
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:39:11.893

> 我可以使用 DataAnnotations 和 Fluent API 的组合吗？或者，是一个还是另一个？

是的，您可以使用组合。但是，通常最好选择其中一个。我更喜欢 fluent，因为它将某些持久性问题排除在实体类之外。

> DataAnnotations 与 Fluent API 方法做同样的事情吗？
> 
> 例如，.HasRequired == [Required] 吗？
> 
> .HasKey == [密钥]？

是的。此外，.IsRequired == [必需]

> 我必须为所涉及的两个类映射 M:M 关系吗

不，您只需要映射关系的一侧。您可以映射双方，但如果更改关系，则需要修改两组代码。此外，当您映射双方时，两个映射必须解析为相同的结果（即数据库中的相同外键声明）。

> 如果我不希望我的表 pk 字段生成为 ClassNameClassNameID 如果我对我的 pk 属性使用 ClassNameID 格式，我必须用 [Key] 标记类键或使用 .HasKey 吗？

是的，除非您的属性名称是 Id 或 PersonId/ProductId/OrderId/WhateverEntityNameId。按照惯例，EF 会猜测这些是您的关键属性。但是，通过在模型构建器上调用 .HasKey 来明确这一点**永远不会有什么坏处。**

# android - 在应用程序更新上升级数据库

> ID：11476988
> 
> 赞同：0
> 
> 时间：2012-07-13T19:19:27.997
> 
> 标签：android, sql, database, sqlite

我有一个数据库，我想在下次更新我的应用程序时更改该数据库..但我不想丢失数据库中的当前数据（在应用程序目录中）..我必须将该数据复制到新数据库并删除旧数据库..我怎样才能做到这一点？有没有其他想法让我知道...

提前致谢..

这是我当前的数据库代码...

```
public class DbUtils {
public static String DB_PATH;
private String DB_NAME;
File dbDir;
private SQLiteDatabase dataBase;
public DbUtils(File fileDirectory, String sqliteFileName) {

    this.DB_NAME = sqliteFileName;
    dbDir = fileDirectory;
}

public void createDatabaseIfNotExists(Context context) throws IOException {
    boolean createDb = false;

    File dbFile = new File(dbDir.getAbsolutePath() + "/" + DB_NAME);
    DB_PATH = dbFile.getAbsolutePath();

    if (!dbDir.exists()) {
        dbDir.mkdir();
        createDb = true;
    } else if (!dbFile.exists()) {
        createDb = true;
    } else {
        boolean doUpgrade = false;

        if (doUpgrade) {
            dbFile.delete();
            createDb = true;
        }
    }

    if (createDb) {
        InputStream myInput = context.getAssets().open(DB_NAME);
        OutputStream myOutput = new FileOutputStream(dbFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        myOutput.flush();
        myOutput.close();
        myInput.close();
    }
}

public SQLiteDatabase getStaticDb() {
    return dataBase = SQLiteDatabase.openDatabase(DB_PATH, null,
            SQLiteDatabase.OPEN_READWRITE);
}

public void closeDataBase(){
    if(dataBase!=null && dataBase.isOpen()){
        dataBase.close();
    }
}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:47:59.190

更常见的解决方案是保留数据库，但尽可能多地转换它以使用新版本的应用程序。这称为“数据库升级”。

您可能担心如果此过程在升级过程中失败，您将既没有旧数据库，也没有新数据库。然而，这可以通过数据库事务来解决。如果整个数据库升级过程发生在一个事务中，那么该事务要么失败，什么都不做，这样您就可以继续使用旧版本的应用程序，或者成功，您可以使用新版本的应用程序。

这是将数据库升级包装在事务中的方法：

```
SQLiteDatabase database = SQLiteDatabase.openDatabase(uri, null, SQLiteDatabase.SQLITE_OPEN_READWRITE);
database.beginTransaction();

// put your database upgrade code here, for example:
database.execSQL("ALTER TABLE MyTable ADD NewColumn int");
database.execSQL("ALTER TABLE AnotherTable ADD AnotherColumn int");

database.endTransaction();
database.setTransactionSuccessful(); 
```

# java - 如何使用 jsoup 提取论坛帖子的作者？

> ID：11476996
> 
> 赞同：0
> 
> 时间：2012-07-13T19:20:04.357
> 
> 标签：java, html, tags, jsoup

```
 <div class="username_container">

                    <div id="yui-gen11" class="popupmenu memberaction">
<a id="yui-gen13" class="username offline popupctrl" href="member.php?u=276113" title="PilotPhill is offline"><strong>**PilotPhill**</strong></a>
<ul id="yui-gen12" class="popupbody memberaction_body">

    <li class="left"> 
```

我正在尝试使用 jsoup 提取论坛线程的作者姓名。它是强标签内的名称。我已经尝试过接近一切，但无法得到它。
有小费吗？我一直在使用 jSoup.select() 但如果有其他方法，我很乐意尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:36:22.617

你只需要使用`Document.select`你已经发现的。

```
Document doc = Jsoup.connect("http://www.foo.com").get();
Elements usernames = doc.select("a.username strong");
for (Element username: usernames) {
    System.out.println("found username: " + username.text();
} 
```

`a.username strong`表示：标签`strong`内的标签`a`，其属性`class`的值`username`如下：

```
<a id="yui-gen13" class="username offline popupctrl" 
    href="member.php?u=276113" title="PilotPhill is offline">
    <strong>**PilotPhill**</strong>
</a> 
```

# javascript - 从 Web 应用程序运行 .exe 文件

> ID：11476999
> 
> 赞同：0
> 
> 时间：2012-07-13T19:20:11.927
> 
> 标签：javascript, asp.net, html

我正在尝试编写一个基于 Web 的应用程序，该应用程序将允许用户将信息（特别是整数）输入到表单字段中，将输入的信息添加为 .def 文件中的条目，运行“.exe”文件（用 C++ 编写） )，然后在单击“提交”按钮后在屏幕上显示输出。我已经编写了在 JavaScript 中运行 .exe 文件的函数，但它们不起作用。这是我到目前为止所拥有的：

输入屏幕具有以下代码（HTML 文件）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head></head>><body><h1><i>The University of Vermont<br>Department of Medical     Biostatistics<br>Study Randomization Page</i></h1>
<?php
    $study = "study";
    $site = "site";
    $gender = "gender";
    $age = "age";
    $result = "result";
?>

Please Input Your Study Information Below:<br><br>
<form id="form1" action="file:///C:/Documents and Settings/cody/Desktop/DMB_RD_2.php"     method="post">
Study Number:<br>   <input name="study" type="int"><br>
Site Number:<br>    <input name="site" type="int"><br>
Subject Gender:<br> <input name="gender" type="int"><br>
Subject Age:<br>    <input name="age" type="int"><br>
Lab Result:<br>     <input name="result" type="int"><br>
<input value="Submit" class="button" type="submit">
</form>
</body></html>
Here is the page it is connected to (PHP file);
<script type="text/javascript" src="DMB++2JS.js"></script>
<script type="text" src="DMB Round 2.html"></script>
</head>
Here is the information that you input:<br /><br />
Study Number: <?php echo $_POST["study"]; ?><br />
Site Number: <?php echo $_POST["site"]; ?><br />
Subject Gender: <?php echo $_POST["gender"]; ?><br />
Subject Age: <?php echo $_POST["age"]; ?><br />
Lab Result: <?php echo $_POST["result"]; ?><br />
<br />
The following functions will randomize your data. Please indicated which method you would like to use by clicking on the button of the randomization method that you would like to use:<br /><br />
<input type="button" href="blockfn()" onclick="javascript:blockfn(); return     true;">Block Function</button><br />
<input type="button" href="d2rfn()" onclick="javascript:d2rfn(); return true;">Random Distance Function</button><br />
<input type="button" href="d2dfn()" onclick="javascript:d2dfn(); return true;">Determinate Distance Function</button><br />
<input type="button" href="minimizefn()" onclick="javascript:minimizefn(); return true;">Minimization Function</button><br />
<input type="button" href="pocockfn()" onclick="javascript:pocockfn(); return true;">Pocock Function</button><br />
</body>
</html> 
```

这是其中编写了函数的 JavaScript 文件：

```
function d2rfn(){
    var oShell = new ActiveXObject("Shell.Application");
    var commandtoRun = "C:\Documents and Settings\cody\Desktop\C++ Programs\D2R001.def"; 
    oShell.ShellExecute(commandtoRun,"","","open","1");
}
function d2dfn(){
    var oShell = new ActiveXObject("Shell.Application");
    var commandtoRun = "C:\Documents and Settings\cody\Desktop\C++ Programs\D2D001.def"; 
    oShell.ShellExecute(commandtoRun,"","","open","1");
}
function minimizefn(){
    var oShell = new ActiveXObject("Shell.Application");
    var commandtoRun = "C:\Documents and Settings\cody\Desktop\C++ Programs\MINIMIZE001.def"; 
    oShell.ShellExecute(commandtoRun,"","","open","1");
}
function pocockfn(){
    var oShell = new ActiveXObject("Shell.Application");
    var commandtoRun = "C:\\Documents and Settings\\cody\\Desktop\\C++ Programs\\POCOCK2001.def"; 
    oShell.ShellExecute(commandtoRun,"","","open","1");
}
//Another possible way of calling the .exe file from the web interface.
var objShell = new ActiveXObject("WScript.Shell");
</script> 
```

最后，我用 ASP 编写文件（这不起作用）：

```
<%
    dim Study
    Study=Request.QueryString("Study")
    If Study<>"" Then
      Response.Write(Study)
    End If
    dim Site
    Site=Request.QueryString("Site")
    If Site<>"" Then
      Response.Write(Site)
    End If    
    dim Gender
    Gender=Request.QueryString("Gender")
    If Gender<>"" Then
      Response.Write(Gender)
    End If
    dim Age
    Age=Request.QueryString("Age")
    If Age<>"" Then
      Response.Write(Age)
    End If
    dim Result
    Result=Response.QueryString("Result")
    If Result<>"" Then
      Response.Write(Result)
    End If
%> 
```

有没有人有更简洁的方法来创建这个应用程序？将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:50:31.800

不要这样做。javascript 在客户端计算机上运行，​​这意味着程序将在客户端计算机上运行，​​并且文件也需要在那里。这违背了拥有 Web 应用程序的目的。

此外，还有各种非常好的安全原因不允许浏览器内的 javascript 运行本地可执行文件 - 如果支持，访问网站可能会导致您的计算机运行，例如 format.exe。

首先，选择一个单一的服务器端 Web 开发框架。不要尝试将 PHP 和 ASP.NET 结合起来。其次，弄清楚是否有一种方法可以在没有文件系统上的文件和命令行实用程序的情况下处理这个问题。您可以在您选择的任何开发框架中执行此逻辑吗？如果不能，则需要弄清楚如何编写文件、如何调用 .exe 以及如何返回结果。这些问题都不是特别棘手的，我会按顺序一次解决一个。