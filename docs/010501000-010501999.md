# StackOverflow 问答 10501000-10501999

# symfony - Symfony2 表单，大量带有实体类型的查询（Doctrine2）

> ID：10501000
> 
> 赞同：1
> 
> 时间：2012-05-08T14:50:01.570
> 
> 标签：symfony, doctrine-orm, symfony-forms

我有 3 个实体：`person`、`ID`和。`employee``applicant`

实体`person`有 vars`employee`和`applicant`, 和 OneToOne 关系。

员工和申请人有一个人作为一个`ID`，一个`referencedColumnName="id"`，和一个关系 OneToOne。

很好，当我使用实体创建一个表单时`person`，要显示一个带有 all 的输入选择`applicants`，这要归功于 Doctrine2 的模糊加载进行查询以检索每个`person`、每个相关的候选人和相关的 empleado，这意味着一个 bd 2000 人正在做几乎 6000请求 bd 仅显示名称。

如果我不打印表格，没问题，但是，如果我把它放在视图中：

```
{{ form_rest(formularioEnlazarCandidato.person) }} 
```

Doctrine2 执行大量查询。

我不知道如何解决这个问题，因为在表单中显示一个实体不会让我只选择`per.id`和`per.name`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:34:40.537

我遇到了类似的问题，他们帮助了我——看这里[Optimize DQL with double join](https://stackoverflow.com/questions/10718608/optimize-dql-with-double-join)。基本上你需要在你的存储库中[加入](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#joins "获取连接")- 我做了：

```
class ProfileRepository extends EntityRepository {

    public function findAll()
    {
        $em = $this->getEntityManager();
        $qb = $em->createQueryBuilder()
                ->select("p, stu, sta, pdd, pdt, pdc")
                ->from('AldenBonBundle:Profile', 'p')
                ->leftJoin('p.studies', 'stu')
                ->leftJoin('stu.statute', 'sta')
                ->leftJoin('p.disabilityDegree', 'pdd')
                ->leftJoin('p.disabilityType', 'pdt')
                ->leftJoin('p.disabilityCode', 'pdc')
                ->orderBy('p.profileId')
        ;
        $res = $qb->getQuery()->getResult();
        return $res;
    } 
```

# iphone - 在 Xcode 中检查按钮的图像是否相等

> ID：10501003
> 
> 赞同：0
> 
> 时间：2012-05-08T14:50:10.737
> 
> 标签：iphone, ios5

我是iOS编程新手，我需要你的帮助....

在 Xcode 中检查按钮的图像是否相等

我使用这个功能，但它不起作用

```
UIImage *greenImage = [UIImage imageNamed:@"green.png"];

[temp setBackgroundImage:greenImage forState:UIControlStateNormal];

if ([[UIImage imageNamed:@"green"] isEqual:greenImage]){
       //do something 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:00:03.323

从用户界面逆向工程应用程序状态通常是一个坏主意。如果按钮的图像发生更改是有原因的，那么您可能应该跟踪该信息，而不是事后根据您对按钮所做的更改来找出它。你想达到什么目的？

# ios - 如何使用 xmpp 库共享文件

> ID：10501007
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:50:18.313
> 
> 标签：ios, xcode, xmpp

在我的应用程序中，我使用 xmpp 库进行聊天。在这种情况下，我们将文本传递给 xmpp 库以将文本发送给其他用户。

现在我想使用 xmpp 库将图像或视频等文件发送给其他用户。有没有可能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T05:23:05.700

是的，您可以使用 XEP-0065 或使用 SIFileTransfer 的 IBB 执行文件共享。签出此链接。

[https://github.com/faizanretai/FileTransfer-2](https://github.com/faizanrefai/FileTransfer-2)

# export - 如何导出 SQL server compact 3.5 数据库（或查看“创建表”）

> ID：10501013
> 
> 赞同：1
> 
> 时间：2012-05-08T14:50:31.927
> 
> 标签：export, sql-server-ce, create-table

我有一个 SQL Server Compact 3.5 数据库 (.sdf)，我想用它在新的 SQL Server 数据库中重新创建相同的模式。所以我的问题是：是否可以以某种方式导出表的结构？

理想情况下，结果将是一个包含大量“创建表...”的 SQL 文件，我可以使用它来创建类似的数据库。我不需要在这个阶段导出数据。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:20:54.473

使用我的 SQL Server Compact Toolbox（VS 插件或独立工具）- [http://sqlcetoolbox.codeplex.com](http://sqlcetoolbox.codeplex.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T12:44:40.777

按照以下步骤操作：http: [//bembengarifin-tech.blogspot.in/2008/08/generate-script-export-data-from-sql-ce.html](http://bembengarifin-tech.blogspot.in/2008/08/generate-script-export-data-from-sql-ce.html)

您必须下载 Export2SQLCE.exe 并按照命令操作，它还会生成带有模式和数据的数据。

希望这可以帮助。

# linq - 执行两个 LINQ IQueryable 的 OR

> ID：10501015
> 
> 赞同：3
> 
> 时间：2012-05-08T14:50:35.970
> 
> 标签：linq, entity-framework, linq-to-sql

我有两个 IQueryables：

```
 public static IQueryable<Counterparty> SearchByCode(this IQueryable<Counterparty> queryable, string searchQuery)
    {
        return queryable.Where(x => x.Code.StartsWith(searchQuery.ToUpper()));
    }

    public static IQueryable<Counterparty> SearchByName(this IQueryable<Counterparty> queryable, string searchQuery)
    {
        return queryable.Where(x => x.Name.ToLower().Contains(searchQuery.ToLower()));
    } 
```

我想创建另一个 IQueryable 将这两个查询组合为 OR 例如

```
 public static IQueryable<Counterparty> SearchByCodeOrName(this IQueryable<Counterparty> queryable, string searchQuery)
    {
        // return SearchByName(searchQuery) OR SearchByCode(searchQuery)
    } 
```

我宁愿避免重复代码，所以我想重用现有的可查询对象，而不是重写一个新的 lambda 表达式`Where(x=> x.Code.StartsWith.... || x.Name.Contains.....)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:54:41.333

您可能可以将两者的结果结合在一起

```
public static IQueryable<Counterparty> SearchByCodeOrName(this IQueryable<Counterparty> queryable, string searchQuery)
{
     return SearchByName(searchQuery).Union(SearchByCode(searchQuery))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:01:20.477

根据您确实希望能够重用的代码，这可能是一种替代方法，您不会重复查询条件的内部工作：

```
 private static Func<Counterparty, string, bool> CodeStartsWith = (x, searchQuery) => x.Code.StartsWith(searchQuery.ToUpper());

    private static Func<Counterparty, string, bool> NameContains = (x, searchQuery) => x.Name.Contains(searchQuery.ToLower());

    public static IQueryable<Counterparty> SearchByCode(this IQueryable<Counterparty> queryable, string searchQuery)
    { 
        return queryable.Where(x => CodeStartsWith(x, searchQuery)); 
    }

    public static IQueryable<Counterparty> SearchByName(this IQueryable<Counterparty> queryable, string searchQuery)
    {
        return queryable.Where(x => NameContains(x, searchQuery)); 
    }

    public static IQueryable<Counterparty> SearchByCodeOrName(this IQueryable<Counterparty> queryable, string searchQuery)
    {
        return queryable.Where(x => NameContains(x, searchQuery) || CodeStartsWith(x, searchQuery)); 
    } 
```

# java - 服务器和浏览器的时间差

> ID：10501020
> 
> 赞同：0
> 
> 时间：2012-05-08T14:50:47.273
> 
> 标签：java, javascript, datetime, timezone

我们如何测量服务器时间和浏览器时间之间的时间差？如果我们在浏览器和服务器中都以毫秒为单位，如果服务器和浏览器位于两个不同的时区，它会给我准确的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:58:25.227

没有内置方式。您应该在应用程序级别执行此操作。您可以使用 javascript 检索时间并将此结果发送到服务器，您可以清楚地知道现在是什么时间。现在比较这些结果。

结果将精确到网络延迟。

如果您只想知道时区差异，那就足够了。但是，如果您想知道网络延迟，您可以估算它：将客户端时间从客户端发送到服务器，将服务器时间从服务器发送到客户端，考虑时区偏移。剩下的就是客户端->服务器->客户端延迟。将其除以 2 - 这是单向延迟的第一次估计。更好的估计需要更多的统计数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:42:07.707

您可以通过 Javascript [Date.getTimezoneOffset()](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)获取客户端的时区 GMT 偏移量，并将此值保存到隐藏字段。这是一个示例脚本，可用于确定客户端的时区：

```
var now = new Date();
var currentTimeZoneOffset = now.getTimezoneOffset();
var jan = new Date( now.getFullYear(), 0, 1, 2, 0, 0 ), jul = new Date( now.getFullYear(), 6, 1, 2, 0, 0 );
var hemisphere = ( jan.getTime() % 24 * 60 * 60 * 1000 ) > ( jul.getTime() % 24 * 60 * 60 * 1000 );
var dstOffset = hemisphere ? jan.getTimezoneOffset() : jul.getTimezoneOffset();
var standardOffset = hemisphere ? jul.getTimezoneOffset() : jan.getTimezoneOffset();
var gmtHours = -currentTimeZoneOffset/60;
document.write("GMT time-zone offset: " + gmtHours +"<br>");
var isDstActive = (currentTimeZoneOffset-dstOffset) != 0;
document.write("Daylight saving time is active: " + isDstActive + "<br>");
var isTimezoneWithDst = (dstOffset-standardOffset) != 0;
document.write("DST is observed in this timezone: " + isTimezoneWithDst); 
```

# twitter-bootstrap - Bootstrap with Opa - 如何使文本居中？

> ID：10501026
> 
> 赞同：1
> 
> 时间：2012-05-08T14:51:08.147
> 
> 标签：twitter-bootstrap, opa

我正在尝试使用 Boostrap 小部件创建一个简单的居中标题。我试过了：

```
WB.Layout.fixed(
    (WB.Grid.row([{span:16, offset:none, content:<div>title</>}]))
) 
```

...但文本只出现在行的左侧。我尝试将“text-align:center”添加到 div 标记，但是当我尝试在浏览器中显示结果时导致 xml 错误。如何表明我希望“标题”显示在块的中心？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:18:43.447

您使用的是哪个版本的引导程序？

这是一个示例代码：

```
import stdlib.themes.bootstrap
import stdlib.widgets.bootstrap

WB = WBootstrap

function start() {
  WB.Layout.fixed(
    (WB.Grid.row([{span:12, offset:none, content:<center>title</center>}]))
  )
}

Server.start(
   Server.http,
   { page: start
   , title: "Hello, world"
   }
) 
```

我之所以使用`span:12`，是因为当前版本的引导程序最多为 12 列。

# .net - 创建一个引用另一个 .dll 的 .dll

> ID：10501027
> 
> 赞同：0
> 
> 时间：2012-05-08T14:51:12.607
> 
> 标签：.net, dll, vb6

我在 .Net 中创建了一个 .dll 供同事包含在他的 VB6 项目中。经过一番摸索后，我们终于得到了从 VB6 项目中引用的 .dll，并且能够创建对象实例。

问题是我的 .dll 引用了另一个 .dll（第三方）。我知道在生成 .exe 文件时，您可以选择`include`引用的 .dll 而不是将其作为先决条件。但是，创建 .dll 文件时无法使用相同的功能。

在他的 VB6 中提到第三方 .dll 不可访问。

如何在我的 .dll 中包含第三方 .dll？或者我的同事引用第三方 .dll 和我的一样会更明智？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:09:17.780

您不能（可靠地）将引用的 DLL 嵌入到另一个中。他们都需要按照作者的建议复制到目标机器上，并注册/设置它们的先决条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:42:33.170

为了从 VB6 引用 .NET DLL，您需要从适当的 .NET Framework 版本运行“regasm”命令。您还希望使用“/tlb”开关让它输出类型库（.tlb 文件）。

获得 tlb 文件后，您只需从 VB6 IDE 中选择 Project->References，然后单击浏览以选择 tlb。您现在可以在 .NET 库中使用类的早期绑定实例化。

由于您的 .NET DLL 使用另一个 DLL，您只需确保引用您的 .NET DLL 的 EXE 可以访问它。这是通过将第三方 DLL 部署到启动 EXE 的相同路径来完成的，或者如果第三方 DLL 也是 .NET 并且也是强命名的，您也可以将第三方 DLL 添加到全局程序集缓存 (GAC)。

# iphone - 从 UIView 或 AVCaptureVideoPreviewLayer iPhone 中“剪切”一个形状

> ID：10501028
> 
> 赞同：0
> 
> 时间：2012-05-08T14:51:15.050
> 
> 标签：iphone, objective-c, avfoundation, calayer, cashapelayer

我有一个需要剪切的 AVCaptureVideoPreviewLayer，以便它很好地放置在我的图像上，该图像具有需要看到的透明部分。

从 AVCaptureVideoPreviewLayer 中切出形状的最佳/有效方法是什么？

我已经设法使用 CAShapeLayer 获得正确的形状，但似乎 AVCaptureVideoPreviewLayer 没有 Path 属性来做同样的事情。

```
cameraLayer = [[CAShapeLayer layer] retain];
CGRect rect = CGRectMake(64, 32, 190 , 152);
CGMutablePathRef path = CGPathCreateMutable();
CGPathAddEllipseInRect(path, NULL, rect);
cameraLayer.path = path;
CGPathRelease(path); 
```

*编辑是否可以从 UIView 或 Imageview 中剪切出一个形状，我也应该能够做我想做的事情

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:55:52.090

你说：

> 我已经设法使用 CAShapeLayer 获得正确的形状，但似乎 AVCaptureVideoPreviewLayer 没有 Path 属性来做同样的事情。

这是正确的。根据设计，只有 CAShapeLayer 具有路径属性。

如果您想在视图中切割几何孔，通常的方法是创建一个 CAShapeLayer，将您的形状路径安装到其中，然后使形状图层成为视图图层的蒙版。这很好用。请注意，您需要将视图上的 opaque 属性设置为 NO，以便能够通过“孔”看到视图下方的内容。

# bash - 使用 bash 从特定行、列中提取值

> ID：10501030
> 
> 赞同：1
> 
> 时间：2012-05-08T14:51:23.660
> 
> 标签：bash, sed, awk, extract

我有一个示例日志文件，其中包含这种格式的字段和值

```
value1 value2
 50    100

value3 value4 
 10      150   

value5
 200 
```

我需要将字段和值提取为这种格式的东西

```
value1=50
value2=100
value3=10
value4=150
value5=200 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:16:09.427

```
awk '/value/ {
                 if ((getline values) > 0) {
                     split(values, array)
                     for (i = 1; i <= NF; i++)
                         print $i "=" array[i]
                 }
              }' inputfile 
```

而不是`/value/`你可以使用`/[[:alpha:]]/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:18:29.373

试试这个 awk：

```
gawk '{split($0,n_arr," "); getline; n=split($0,v_arr," "); getline; for (i=1;i<=n;i++){print n_arr[i] "=" v_arr[i]}}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:19:12.797

```
awk '
    NF==0 {next}
    var[1] == "" {for (i=1; i<=NF; i++) var[i]=$i; next}
    {for (i=1; i<=NF; i++) {print var[i] "=" $i; delete var[i]}}
' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:54:32.727

这可能对您有用：

```
sed '/^$/d;N;:a;s/\([^ \n]*\) *\([^\n]* *\n\) *\([^ \n]*\) *\(.*\)/\2\4\n\1=\3/;/^\n\n/!ba;s///' file 
```

# c# - 访问特殊文件夹中的 App.exe.config 文件

> ID：10501036
> 
> 赞同：0
> 
> 时间：2012-05-08T14:51:42.327
> 
> 标签：c#, winforms, configuration-files

所有，我正在做通常的事情，即使用将应用程序设置写入“application.exe.config”文件

```
Properties.Settings.Default.SomeSetting = someVal;
Properties.Settings.Default.Save(); 
```

我被要求在安装之间保留设置，并且有两条路线；切换到使用注册表，或将 .config 文件保存到单独的特殊文件夹中，该文件夹在安装之间保留（由于设置的数量，我选择了后者）。

我的 .config 被写入一个奇怪的目录，即

```
C:\Users\Administrator\AppData\Local\MyApp\
    MyApp.vshost.exe_Url_mzfwtdo5po4pcuabybebhsn5yfltbb3w\1.0.0.0 
```

**我的问题是：如何在 C# 中选择这个目录？**

注意：我试过

```
string appPath = Application.ExecutablePath;
Configuration config = ConfigurationManager.OpenExeConfiguration(appPath);
string strIPACostConfigFile = config.FilePath; 
```

这给了我安装目录中的初始 .config 。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:33:26.050

> 我的问题是：如何在 C# 中选择这个目录？

你不能。App.exe.config 文件可以位于两个位置之一，除非您自己加载、生成和保存配置文件，否则您将无法在您想要的位置找到它。

当然，微软决定的位置是它的正确位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:01:17.290

您不必知道配置文件的位置。您只需要一个`true`默认设置，并在程序启动时调用以下调用。

```
if (Settings.Default.IsUpgrade)
{
  Settings.Default.Upgrade();
  Settings.Default.IsUpgrade = false;
  Settings.Default.Save();
} 
```

这样，在早期版本中所做的设置将迁移到新版本。

# mysql - 如何使用 MySQL 从每一天中选择最后一条记录

> ID：10501037
> 
> 赞同：5
> 
> 时间：2012-05-08T14:51:47.000
> 
> 标签：mysql, max

我知道这个问题已经有一些解决方案，但它们似乎对我不起作用。

我想在我的数据库中选择每个用户每天的最后一条记录。我有一个数据库，该数据库按国家/地区存储用户的位置，并且可以追溯到第二个。

我试图运行的选择查询是：

```
SELECT MAX(date), id, country FROM dk_location_records WHERE userid = '10'
AND (date > '2012-04-06 00:00:00' AND date < '2012-05-08 23:59:59')
AND active = '1' GROUP BY DATE(date) ORDER BY date ASC 
```

但是，这实际上是向我显示每天的最后一个日期，而不是正确对应的`id`and `country`。它实际上得到了第一个`id`和`country`最后一个`date`。

我究竟做错了什么？

非常感谢帮助！

谢谢，

杰克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T15:01:01.077

尝试此查询以显示每个用户每天的最后一条记录，-

```
SELECT t1.* FROM dk_location_records t1
  JOIN (SELECT DATE(date) date_date, userid, MAX(date) max_date
        FROM dk_location_records
        GROUP BY date_date, userid
        ) t2
    ON t1.date = t2.max_date AND t1.userid = t2.userid; 
```

...如果需要，请添加您的 WHERE 条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:55:29.803

我认为你不应该分组`DATE(date)`。我认为你应该分组`userid,country`。像这样：

```
SELECT 
  MAX(date), userid, country 
FROM 
  dk_location_records 
WHERE 
  userid = '10'
  AND (date > '2012-04-06 00:00:00' AND date < '2012-05-08 23:59:59')
  AND active = '1' 
GROUP BY userid,country  
ORDER BY date ASC 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T15:32:45.230

您应该通过将 ORDER BY 更改为 DESC 而不是 ASC 来获得正确的结果

# visual-studio-2010 - 无法在 Visual Studio 2010 中打开 .rpt Crystal Reports 文件

> ID：10501042
> 
> 赞同：23
> 
> 时间：2012-05-08T14:52:08.627
> 
> 标签：visual-studio-2010, crystal-reports

我已经接管了一个现有的 C# 项目，并且正在使用带有 .NET 框架 4.0 的 Visual Studio 2010。

该应用程序使用 Crystal Reports。报告的定义似乎位于包含许多 .rpt 文件的单独文件夹中。

当我运行应用程序时，其中一些报告有效，而另一些则无效。我现在想调试不起作用的报表，还想添加一些新的 Crystal Reports。

问题是，每当我尝试在 Visual Studio 中打开其中一个 .rpt 文件时，都会出现乱码——它看起来像二进制代码。

有关信息：我已经知道 Crystal Reports 不是 Visual Studio 2010 的标准配置。因此，我已经安装了*SAP Crystal Reports，Visual Studio 2010 版本 -*从位置[http://www.businessobjects 单击一次（64 位）。 com/jump/xi/crvs2010/us2_default.asp](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)如[使用 Visual Studio 2010 创建 Crystal Reports rpt 文件](https://stackoverflow.com/questions/3668626/creating-a-crystal-reports-rpt-file-using-visual-studio-2010)和[http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/fb6d3588- 1481-46a2-8284-90dbb40c42f6](http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/fb6d3588-1481-46a2-8284-90dbb40c42f6)

我安装了错误的东西还是缺少依赖项？.rpt 文件不是 Visual Studio 项目的一部分。它们是文件夹中的单独文件。如何打开它们以便我可以在 Visual Studio 中执行编辑？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T04:56:20.840

我怀疑 .RPT 的文件类型关联已损坏。您可能在安装 Crystal Reports 之前尝试打开 .RPT，但不小心选择了其他东西来打开它。现在它可能会自动错误地打开它们。

本文介绍 Windows 版本之间的更改以及如何编辑它们：[http ://www.technize.com/advanced-file-types-association-in-windows-7/](http://www.technize.com/advanced-file-types-association-in-windows-7/)

也就是说，有一种更快更简单的方法可以进行快速测试，以确认这些 .RPT 文件是否有效。

在 Visual Studio 中，在您的 C# 项目中，执行“添加新项目 > 报告 > Crystal Reports”，它将启动一个向导，用于将报告添加到您的项目中。发生这种情况时，系统会提示您“创建新报告”或“从现有文件打开”。选择打开现有并浏览到您的 .RPT 文件。这将强制 Crystal Reports 尝试在基于 Visual Studio 的 Crystal Report 设计器中打开此文件。

祝你好运。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-09T17:17:57.677

对于开发，您需要从[链接到的下载页面安装](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)[SAP Crystal Reports，Visual Studio 2010 - Standard 版本](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_4.exe)。

您安装的*Click Once*版本用于部署。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-28T17:38:08.860

根据资料来自：[http ://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)

注意 1：要集成“SAP Crystal Reports，Microsoft Visual Studio 开发人员版”，您必须运行安装可执行文件。运行 MSI 不会将 Crystal Reports 完全集成到 VS.MSI 文件中，根据定义仅用于运行时分发。默认情况下 Windows 10 不安装 3.5 框架，CR for VS 仍然需要它。通过“打开或关闭 Windows 功能”选择它并选择这两个选项。

注意 2：SAP Crystal Reports，Visual Studio .NET 开发人员版本不支持任何 Visual Studio .NET 版本的速成版。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-16T23:07:38.927

**问题：**在装有 Visual Studio 2010 的 64 位机器上，我安装了 32 位版本的 CRforVS。

**解决方案：**我需要安装[64 位版本的 CRforVS](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_3.exe)。

这很有趣，因为据我所知，[Visual Studio 的所有版本都是 32 位](https://stackoverflow.com/questions/2516436/visual-studio-64-bit).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T09:25:03.497

我在 64 位机器上有过类似的实例，我在给定的用户配置文件中设计了水晶报表，当我在同一台计算机上更改为另一个用户配置文件时，水晶报表似乎坏了。

**解决方案：**我通过在另一个用户配置文件上重新安装[适用于 vs2010（64 位）的 Crystal Reports解决了这个问题。](http://scn.sap.com/docs/DOC-7824)看起来当您在具有许多用户配置文件的计算机上安装 CR 时，您可能想要为所有人选择安装，而不仅仅是我。

# javascript - 使用换行符和缩进重新格式化单个连续行

> ID：10501043
> 
> 赞同：0
> 
> 时间：2012-05-08T14:52:13.887
> 
> 标签：javascript

我有一个 javascript 文件，其中所有换行符和间距都已删除，所以整个内容都在一行上。我正在寻找一种实用程序，它可以重新添加换行符和缩进，以将其变成人类可读的东西，但运气不佳。

这个问题特别涉及 javascript，但将来我可能会遇到不同语言的相同问题；首选处理多种语言的工具

例如，当给出这个

```
var h=Ext.util,j=Ext.each,g=true,i=false;h.Observable=function(){var k=this,l=k.events;if(k.listeners){k.on(k.listeners);delete k.listeners}k.events=l||{}};//etc etc 
```

该工具应该像这样重新格式化它

```
var h = Ext.util, j = Ext.each, g = true, i = false;
h.Observable = function(){
    var k = this, l = k.events;
    if (k.listeners){
        k.on(k.listeners);
        delete k.listeners
    }
    k.events = l || {} 
};
//etc etc 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:54:18.457

您可能对[jsBeautifier](http://jsbeautifier.org/)或[jsFiddle](http://jsfiddle.net/)的“整理”功能感兴趣。

# java - 用 Java 编写未知（大）大小的 Tar 文件

> ID：10501045
> 
> 赞同：15
> 
> 时间：2012-05-08T14:52:15.347
> 
> 标签：java, tar

我想用 Java 将一个未知大小的大流写入一个 tar 文件。我知道 Apache 有[处理 tar 文件的](http://commons.apache.org/compress/tar.html)[公共压缩库](http://commons.apache.org/compress/)，但它们需要我提前知道大小。考虑 Apache 自己的[例子](http://commons.apache.org/compress/examples.html)：

```
TarArchiveEntry entry = new TarArchiveEntry(name);
entry.setSize(size);
tarOutput.putArchiveEntry(entry);
tarOutput.write(contentOfEntry);
tarOutput.closeArchiveEntry(); 
```

写完之后我会知道条目的大小，但之前不会。有没有一种方法可以让我编写内容，然后当我完成大小时将其写入标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:04:00.293

我最终采用了[jtar](http://code.google.com/p/jtar/)并对其进行了修改，因此您在编写之前不必指定大小。似乎没有本机执行此操作的包...我设置了一个请求此更改的[问题。](http://code.google.com/p/jtar/issues/detail?id=9)不幸的是，它需要大量丑陋的代码并创建我自己的 RandomAccessFileInputStream()，这不适合上传补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-13T06:48:57.063

如果您只有一个要添加的文本文件，那么您可以使用 setSize(long) 方法并设置条目的大小。

其中 data 是你想要被 tarred 的字符串。

```
long size=data.getByte().length;
TarArchiveEntry entry = new TarArchiveEntry("sample.txt");
entry.setSize(size);
tarOutput.putArchiveEntry(entry);
tarOutput.write(contentOfEntry);
tarOutput.closeArchiveEntry(); 
```

# java - 为什么有很多请求时应用程序会自行挂起？

> ID：10501049
> 
> 赞同：-3
> 
> 时间：2012-05-08T14:52:27.273
> 
> 标签：java, sql-server-2005, jakarta-ee, tomcat

我不明白为什么当请求太多时应用程序会崩溃？如何测试我的应用程序响应请求的最大容量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:58:19.163

为什么你认为应用程序被挂起？可能只是做一些长期运行的操作？

“挂起太多请求”听起来像是您用尽了资源（例如，数据库连接），但是，您应该在这种情况下的日志中的某处看到一些异常堆栈跟踪，或者您有一些并发问题。

要确定，您需要进行线程转储并查看是否所有线程都在执行您期望它们执行的操作。您可以只在开始时关注应用程序的线程（数据库线程、逻辑和 servlet 线程），因为 Tomcat 或 SQL 服务器内部不太可能存在一些错误。通过查看日志（或在需要时添加它们），尝试找到应用程序停止按预期运行的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:29:05.353

> 我不明白为什么当请求太多时应用程序会崩溃？

如果您询问的是特定应用程序，答案是我们也不知道，而且我们没有任何证据可以从中推断出问题可能是什么。寻找证据的地方：

*   检查服务器日志。
*   如果您有反向代理，请检查代理的日志。
*   检查后端数据库日志。
*   检查系统级性能统计；例如，寻找 VM 抖动、磁盘 I/O 过载等的证据。
*   检查病理性 GC 行为。
*   检查阻塞/阻塞的线程，指示并发瓶颈、死锁等。

如果您在一般情况下询问，可能有多种原因：

*   耗尽外部资源（例如数据库连接）
*   创建过多线程
*   尝试对每个请求进行排队以避免丢弃请求和其他损坏的策略。
*   并发瓶颈
*   导致性能在负载下衰减的病态算法或数据库查询设计。
*   断错恢复；例如，欠载你开始得到意外的异常，这会触发资源泄漏。
*   等等 ...

> 以及如何测试我的应用程序响应请求的最大容量...

创建一个测试工具以重复向您的服务器发送请求，并查看服务器可以维持的速率。现有的框架可以做到这一点。

# iis-7 - IIS7 下的 Mercurial (Windows 7 x64)

> ID：10501051
> 
> 赞同：0
> 
> 时间：2012-05-08T14:52:32.240
> 
> 标签：iis-7, mercurial

我曾尝试在 IIS7 下安装 Mercurial，如下所述[http://www.eworldui.net/blog/post/2010/04/08/Setting-up-Mercurial-server-in-IIS7-using-a-ISAPI-module .aspx](http://www.eworldui.net/blog/post/2010/04/08/Setting-up-Mercurial-server-in-IIS7-using-a-ISAPI-module.aspx)我做了每一步，看起来很简单。但是当我调用[http://localhost:81/](http://localhost:81/)我得到下一个错误：

> HTTP 错误 500.0 - 内部服务器错误 该页面无法显示，因为发生了内部服务器错误。
> 
> > 详细错误信息 模块 IsapiModule 通知 ExecuteRequestHandler 处理程序 Mercurial-ISAPI 错误代码 0x80004005 请求的 URL [http://localhost:81/](http://localhost:81/)物理路径 C:\inetpub\hg 登录方法匿名登录用户匿名

我需要设置什么来修复它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:28:51.510

你使用的是什么版本的 Python / Mercurial？

我遵循了[这些](http://www.firegarden.com/software/hosting-mercurial-repo-iis7-windows-server-2008r2-x64-python-isapi-cgi)说明并让它与 Mercurial 1.8.1 版一起使用，但我未能让它与最新版本（当时为 1.9）一起使用

# java - MsSQL 命名 JDBC 模板 LIKE 匹配

> ID：10501054
> 
> 赞同：0
> 
> 时间：2012-05-08T14:52:46.693
> 
> 标签：java, sql-server

我正在尝试使用带有查询的命名 JDBC 模板运行类似的匹配...

```
SELECT
    id, guid, body, summary, status_id, language_id, is_mce, content_type_id, 
    last_edited_by, locked_by, owner_id, coordinator_id, writer_id, paperless, 
    content_body_type, created, updated, locked_timestamp
FROM dbo.content
WHERE notes LIKE :notes 
```

`:notes`是必然的`%test%`，不幸的是它没有返回任何结果。我检查了数据库并验证了该数据是否存在。这不是执行类似匹配的正确方法吗？

**更新**

生成此查询的部分代码...

```
 String notes = search.getNotes();
    if (notes instanceof String && notes.length() > 0) {
        if (!previousClause) {
            searchQuery.append("WHERE ");
            previousClause = true;
        }
        searchQuery.append("notes LIKE :notes AND ");
        queryMap.put("notes", "%"+notes+"%");
    }

    Collection<Category> categories = search.getCategoryCollection();
    if (categories != null && categories.size() > 0) {
        Short x = 0;
        for (Category category : categories) {
            searchQuery.append("INNER JOIN dbo.content_to_category AS content_to_category"+x.toString()+" ON (content_to_category"+x.toString()+".category_id IN (:categoryId"+x.toString()+") AND content_to_category"+x.toString()+".content_id = content.id) ");
            queryMap.put("categoryId"+x.toString(), category.getId());
            x++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:27:58.050

我假设：（1）您使用的是合理版本的 Hibernate；(2) 上面选择的字段是`content`'s 字段的子集。

应该是这样的：

```
Criteria crit = session.createCriteria(Content.class);

// add all selected fields:
ProjectionList projList = Projections.projectionList();
projList.add(Projections.property("id"));
projList.add(Projections.property("guid"));
projList.add(Projections.property("body"));
projList.add(Projections.property("summary"));
projList.add(Projections.property("status_id"));
projList.add(Projections.property("language_id"));
projList.add(Projections.property("is_mce"));
projList.add(Projections.property("content_type_id"));
projList.add(Projections.property("last_edited_by"));
projList.add(Projections.property("locked_by"));
projList.add(Projections.property("owner_id"));
projList.add(Projections.property("coordinator_id"));
projList.add(Projections.property("writer_id"));
projList.add(Projections.property("coordinator_id"));
projList.add(Projections.property("paperless"));
projList.add(Projections.property("content_body_type"));
projList.add(Projections.property("created"));
projList.add(Projections.property("updated"));
projList.add(Projections.property("locked_timestamp"));
crit.setProjection(projList);

// add a Restriction on notes field, using like:
crit.add(Restrictions.like("notes", "test", MatchMode.ANYWHERE));

// invoke query:
List list = crit.list(); 
```

* * *

**更新**

可以肯定的是，您应该使用的正确语法是（依靠直觉和几个博客；我无法确定文档摘录）：

```
Query query = // create long complicated query that ends with "WHERE notes LIKE :notes"
query.setParameter("notes", "%test%"); 
```

**这在您的**情况下可能不起作用的原因是该`like`运算符适用于`varchar`操作数等......从您的这段代码看来：

```
if (notes instanceof String && notes.length() > 0) { 
```

您不确定该字段的基础类型...难道`notes`不是`String`吗？

# flash - 使用向量的 Flash PNGEncoder

> ID：10501055
> 
> 赞同：2
> 
> 时间：2012-05-08T14:52:49.173
> 
> 标签：flash, vector, bitmap, png, encode

有一个很棒的库可以`BitmapData`使用 flash`Vector`而不是转换为 JPEG `Array`：

[故障图](http://code.google.com/p/soulwire/source/browse/trunk/projects/Glitchmap/src_lib/com/pfp/utils?spec=svn6&r=6)

它是异步的，这也很棒。

有人知道PNG编码的类似解决方案吗？使用向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:53:01.487

从这篇文章 [http://moodycamel.com/blog/2011/a-better-png-encoder-for-flash](http://moodycamel.com/blog/2011/a-better-png-encoder-for-flash)

我发现非常快的异步 PNG 编码器，从 Haxe 编译：

[https://github.com/cameron314/PNGEncoder2/](https://github.com/cameron314/PNGEncoder2/)

这对我帮助很大。

# facebook - Facebook喜欢/分享内容储物柜

> ID：10501057
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:52:57.200
> 
> 标签：facebook, locking, share, facebook-like

我正在查看 stackoverflow 的答案，最接近的答案是“检查用户是否喜欢页面”

我想做的不是检查是否有人喜欢，而是在有人喜欢/分享时解锁竞争。我不想每次都检查是否有人已经喜欢它，然后决定向他展示内容。每次有人访问我的网站时，我都希望他再次分享。它可以在没有 facebook 应用程序的情况下完成。例如，我可以提供此链接：

[http://strefavideo.pl/?videos=wepchnal-go-pod-pociag-zobacz-jak-to-sie-skonczylo](http://strefavideo.pl/?videos=wepchnal-go-pod-pociag-zobacz-jak-to-sie-skonczylo)

如您所见，有一个视频，您只能通过单击“udostępnij”分享并确认此分享来观看。

如果我错了，并且在 stackoverflow 上已经有这样的话题，我很抱歉，请引导我。如果没有，请帮助我:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T06:20:13.993

如果您使用的是 wordpress，这对您来说是最好的插件：[http](http://codecanyon.net/item/advanced-facebook-content-locker/1506489) ://codecanyon.net/item/advanced-facebook-content-locker/1506489 。我将它用于我的[免费 mp3 下载](http://www.mp3is.com)站点

# c# - 工厂模式理解

> ID：10501058
> 
> 赞同：5
> 
> 时间：2012-05-08T14:52:59.917
> 
> 标签：c#

我已经实现了工厂模式，如下所示。

但是，由于各个类是公共的，因此没有什么可以阻止某人直接实例化它们。

这个对吗？如何确保仅通过工厂创建具体类？

```
namespace MRS.Framework
{
    public  abstract class DataSource
    {
        public override string ToString()
        {
            return "DataSource";
        }
    }

    public class XMLDataSource : DataSource
    {

    }

    public class SqlDataSource : DataSource
    {

    }

    public class CSVDataSource : DataSource
    {
        public int MyProperty { get; set; }

        public override string ToString()
        {
            return "CSVDataSource";
        }
    }
} 
```

工厂实施

```
namespace MRS.Framework
{
    public abstract class DataSourceFactory
    {
        public abstract DataSource CreateDataSource(DataSourceType datasourcetype);
    }

    public class CSVDataSourceFactory : DataSourceFactory
    {
        public CSVDataSourceFactory()
        {

        }
        public override DataSource CreateDataSource(DataSourceType datasourcetype)
        {
            return new CSVDataSource();
        }
    }

    public class XMLDataSourceFactory : DataSourceFactory
    {
        public override DataSource CreateDataSource(DataSourceType datasourcetype)
        {
            return new XMLDataSource();
        }
    }

    public class SqlDataSourceFactory : DataSourceFactory
    {
        public override DataSource CreateDataSource(DataSourceType datasourcetype)
        {
            return new SqlDataSource();
        }
    }

} 
```

主要的

```
 static void Main(string[] args)
        {
            DataSourceFactory datasourcefactory = new CSVDataSourceFactory();
            CSVDataSource ds = (CSVDataSource)datasourcefactory.CreateDataSource(DataSourceType.CSVDataSource);
            CSVDataSource myds = new CSVDataSource();
            Console.WriteLine(ds.ToString());
            Console.WriteLine(myds.ToString());
            Console.ReadLine();

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:07:11.040

是的，您的直觉是正确的；如果您想限制`CSVDataSourceFactory`类的构造，那么您的访问修饰符错误。

但是，它不是您需要修复的类的访问修饰符，而是*构造函数*的访问修饰符。您应该标记默认构造函数`internal`，以便只有程序集中的其他类才能构造它们。当然，您必须在该程序集中强制执行您自己的规则，但是由于您可以完全控制该代码，所以这应该不是问题。

```
public class XMLDataSource : DataSource
{
  internal XMLDataSource() { }
}

public class SqlDataSource : DataSource
{
  internal SqlDataSource() { }
}

public class CSVDataSource : DataSource
{
  public int MyProperty { get; set; }

  internal CSVDataSource() { }

  public override string ToString()
  {
      return "CSVDataSource";
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:07:13.570

如果您想知道如何阻止人们创建数据源的实例，您可以通过接口来实现。使用您希望它公开的所有方法为每个数据源创建一个接口。使类本身成为内部的或工厂的私有内部类（通常是内部的）和公共接口。

如果问题不是如何阻止人们创建实例，而是如果你应该这样做，那更像是一个主观的答案。有几点需要考虑：

1.  绕过这个因素并创建自己的数据源的后果是什么？没什么不好？性能较差？重大安全违规？如果他们只是在踢自己的脚或没有受伤，也许你不需要费心去阻止他们。
2.  阻止他们有多难？您是否需要阻止他们使用反射来访问底层类？使用接口层就足够了吗？
3.  您的用户的可信度如何？它只是供您自己使用还是供您自己的团队使用的内部应用程序？它是否被运送给成千上万的其他人？小型内部使用应用程序可能不会打扰，大型应用程序需要假设存在真正恶意或无知的用户，并且您暴露的内容将非常重要。随着用户群的增长，总体上提高可用性也很重要。

# objective-c - NSTask 运行脚本

> ID：10501067
> 
> 赞同：4
> 
> 时间：2012-05-08T14:53:30.087
> 
> 标签：objective-c, nstask

我正在尝试使用 NSTask 运行以下命令：

```
$sudo launchctl load /Users/admin/Library/LaunchAgents/com.devdaily.crontabtest.plist 
```

下面是我使用的代码：

```
NSTask *server = [NSTask new];
[server setLaunchPath:@"/bin/launchctl"];
[server setArguments:[NSArray arrayWithObjects:@"load",@"com.devdaily.crontabtest.plist",nil]];
[server setCurrentDirectoryPath:@"/Users/admin/Library/LaunchAgents/"];

NSPipe *outputPipe = [NSPipe pipe];
[server setStandardInput:[NSPipe pipe]];
[server setStandardOutput:outputPipe];

[server launch];
[server waitUntilExit]; // Alternatively, make it asynchronous.
[server release]; 
```

`sudo`但是，由于命令，它不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:30:10.193

不幸的是，*你不能*。因为没有办法输入密码。

但是，您仍然可以使用`NSAppleScript`而不是运行您的 bash 命令`NSTask`： 编写一个 applescript，如：

`do shell script` `[your command]` `with administrator privileges`

*您将被要求输入管理员密码。*

**例子：**

```
NSDictionary *error = [NSDictionary new]; 
NSString *script =  @"do shell script \"launchctl load /Users/admin/Library/LaunchAgents/com.devdaily.crontabtest.plist\" with administrator privileges";  
NSAppleScript *appleScript = [[NSAppleScript new] initWithSource:script]; 
if ([appleScript executeAndReturnError:&error]) {
  NSLog(@"success!"); 
} else {
  NSLog(@"failure!"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:59:11.950

阅读 Apple 的[安全编码指南](https://developer.apple.com/library/mac/documentation/security/conceptual/SecureCodingGuide/Introduction.html)并遵循[安全提升权限](https://developer.apple.com/library/mac/#documentation/security/conceptual/SecureCodingGuide/Articles/AccessControl.html)的建议。

换句话说，不要使用`sudo`或类似的东西。用于`SMJobBless()`安装和启用您的启动代理。另请参阅[SMJobBless 示例项目](https://developer.apple.com/library/mac/#samplecode/SMJobBless/Introduction/Intro.html)。

# internet-explorer - IE7 垂直背景位置错误

> ID：10501068
> 
> 赞同：1
> 
> 时间：2012-05-08T14:53:33.330
> 
> 标签：internet-explorer, background

我在导航图像的精灵上使用背景位置。它在 chrome、safari、ff 等中看起来很棒。水平属性似乎在 IE 中有效，但在垂直时无效。到处都是。相反，我在不同的站点上有几乎完全相同的代码，但是[那个](http://jusbarseattle.com)精灵是水平设置的。

这是CSS。我添加了 background-position-x/y 作为潜在的修复，但 IE 似乎也不受此影响（除非 Winebottler IE7 安装存在缓存错误）。我是新手，所以这将解释任何菜鸟的东西：

```
#menu-item-16 a {
background-image: url("images/csg.png");
background-position: 0 -510px;   
background-position-x: 0;
background-position-y: -510px;
background-repeat: no-repeat;
background-size: 400px auto;
display: block;
height: 80px;
margin-left: 0;
margin-top: -13px;
outline: none;
padding: 0;
text-indent: -9999px;
width: 400px;
}
#menu-item-16 a:hover {
    background-position: 0 -638px;
    background-position-x: 0;
    background-position-y: -638px;
}
#menu-item-24 a {
    background-image: url("images/csg.png");
    background-position: 0 0;
    background-position-x: 0;
    background-position-y: 0;
    background-repeat: no-repeat;
    background-size: 400px auto;
    display: block;
    height: 80px;
    margin-left: 0;
    margin-top: -10px;
    outline: none;
    padding: 0;
    text-indent: -9999px;
    width: 400px;
}
#menu-item-24 a:hover {
    background-position: 0 -128px;
    background-position-x: 0;
    background-position-y: -128px;
}
#menu-item-15 a {
    background-image: url("images/csg.png");
    background-position: 0 -1025px;
    background-position-x: 0;
    background-position-y: -1025px;
    background-repeat: no-repeat;
    background-size: 400px auto;
    display: block;
    height: 80px;
    margin-left: 0;
    margin-top: -13px;
    outline: none;
    padding: 0;
    text-indent: -9999px;
    width: 400px;
}
#menu-item-15 a:hover {
    background-position: 0 -1153px;
    background-position-x: 0;
    background-position-y: -1153px;
}
#menu-item-13 a {
    background-image: url("images/csg.png");
    background-position: 0 -1282px;
    background-position-x: 0;
    background-position-y: -1282px;
    background-repeat: no-repeat;
    background-size: 400px auto;
    display: block;
    height: 80px;
    margin-left: 0;
    margin-top: -13px;
    outline: none;
    padding: 0;
    text-indent: -9999px;
    width: 400px;
}
#menu-item-13 a:hover {
    background-position: 0 -1409px;
    background-position-x: 0;
    background-position-y: -1409px;
}
#menu-item-14 a {
    background-image: url("images/csg.png");
    background-position: 0 -769px;
    background-position-x: 0;
    background-position-y: -769px;
    background-repeat: no-repeat;
    background-size: 400px auto;
    display: block;
    height: 80px;
    margin-left: 0;
    margin-top: -13px;
    outline: none;
    padding: 0;
    text-indent: -9999px;
    width: 400px;
}
#menu-item-14 a:hover {
    background-position: 0 -897px;
    background-position-x: 0;
    background-position-y: -897px;
}
#menu-item-28 a {
    background-image: url("images/csg.png");
    background-position: 0 -257px;
    background-position-x: 0;
    background-position-y: -257px;
    background-repeat: no-repeat;
    background-size: 400px auto;
    display: block;
    height: 80px;
    margin-left: 0;
    margin-top: -13px;
    outline: none;
    padding: 0;
    text-indent: -9999px;
    width: 400px;
}
#menu-item-28 a:hover {
    background-position: 0 -385px;
    background-position-x: 0;
    background-position-y: -385px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:14:51.770

顺便说一句，您上面的代码不会很好地工作，因为 css 代码会查看您最后一个没有中断的条目。

```
background-position: 0 0;
background-position-x: 0;
background-position-y: 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T00:25:54.410

我必须添加一个 alt 样式表来调整 IE 的背景位置。奇怪的是，我最初使用[这个](http://spritegen.website-performance.org/)精灵生成器来节省我的时间。它在自己的 css 上吐出的坐标对于 FF、Chrome 等来说是很差的。但它们对于 IE 来说是正确的——比较它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:11:40.710

首先 background-position-x 和 background-position-y 在 Firefox 中不起作用。它的工作原理是这样的，但是对于跨浏览器：

```
background-position-x: 300px;
background-position: 300px 0;
background-position-y: 300px;
background-position: 0 300px; 
```

IE 和 Chrome 支持 background-position-x 和 background-position-y，但是，当您尝试更改事件的 background-position-y 时，IE 无法正常工作。您可以尝试使用上面的代码将显式定位替换为 x 和 y 坐标。

# jquery - 在 jQuery 处理程序中引发异常时调用堆栈丢失

> ID：10501069
> 
> 赞同：12
> 
> 时间：2012-05-08T14:53:38.193
> 
> 标签：jquery, debugging, exception, exception-handling, callstack

我在调试 Web 应用程序时遇到问题。这非常令人沮丧，因为我一直在尝试用一个可以在 jsfiddle 上发布的小网页来重现该问题，但这似乎是“Higgs-Bugson”的一个案例。

我有一个带有大型处理程序的网页`jQuery(document).ready()`。问题是，当从处理程序中抛出异常时`jQuery(document).ready()`，我会得到一个带有几个匿名函数的调用堆栈，并且没有指向实际抛出异常的代码的指针。

每当我尝试用一​​个小网页重现这种行为时，我*总是*会得到一个指向引发异常的代码的指针，但在生产代码中，我*永远不会*得到堆栈指针。这使得调试更加令人沮丧和容易出错。

这里有人知道是什么导致了这种行为以及如何纠正吗？

* * *

**更新：**自从我发布这个问题以来已经有几个月了，我现在相信我已经最终重现了这个问题。我使用以下 HTML 重现该问题：

```
<html xmlns="http://www.w3.org/1999/xhtml" >    
<body>
Factorial Page
<input type='button' value='Factorial' id='btnFactorial' />
<script src="Scripts/jquery-1.6.1.js" type="text/javascript"></script>
<script type='text/javascript'>
    $(document).ready(documentReady);

    function documentReady() {
        $('#btnFactorial').click(btnFactorial_click);

        factorial(-1);
    }

    function btnFactorial_click() {
        var x;
        x = prompt('Enter a number to compute factorial for.', '');
        alert(x + '! = ' + factorial(x));
    }

    function factorial(x) {
        if (x < 0)
            throw new Error('factorial function doesn\'t support negative numbers');
        else if (x === 0 || x === 1)
            return 1;
        else
            return factorial(x - 1) * x;
    }
</script>       
</body>
</html> 
```

查看代码，您会看到当您单击按钮时，代码会提醒阶乘您指定的数字。输入负数会产生错误。在这种情况下，Visual Studio 将捕获错误并突出显示发生错误的代码行，并显示一个调用堆栈，包括`factorial`和`btnFactorial_click`。

此代码还`factorial(-1)`从 $(document).ready 处理程序调用。在这种情况下，Visual Studio 将突出显示移动到以下 jQuery 代码中的 finally 块（摘自 jquery-1.6.1.js，从第 987 行开始

```
 // resolve with given context and args
            resolveWith: function( context, args ) {
                if ( !cancelled && !fired && !firing ) {
                    // make sure args are available (#8421)
                    args = args || [];
                    firing = 1;
                    try {
                        while( callbacks[ 0 ] ) {
                            callbacks.shift().apply( context, args );
                        }
                    }
                    finally {
                        fired = [ context, args ];
                        firing = 0;
                    }
                }
                return this;
            }, 
```

尽管未显示调用堆栈，但 Visual Studio 会显示一个显示错误文本的弹出窗口。

这种奇怪行为的原因是什么？如何设计我的应用程序，以便轻松捕获源自 $(document).ready 等处理程序的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:42:51.757

`I'm having a problem debugging my web applications`

您使用的是什么类型的调试器？它们往往会有所不同，我在开发时发现最好的一个是 Firefox，因为它们拥有一些非常好的集成工具。

虽然重现一个问题很好，但是当它不能在一个简单简洁的例子中重现时，调试就变得越来越重要。设置断点并逐行执行有时是唯一的方法，而不是在运行时等待错误发生然后回溯。

这篇 MSDN 文章中概述了几种方法，它们可能有助于解决您的问题。我相信您已经尝试过其中的一些，但至少值得一看 - 特别是“场景 3：我在一组辅助方法的深处遇到了错误，我不确定错误的来源。”

“如何调试你的 jQuery 代码”

[http://msdn.microsoft.com/en-us/magazine/ee819093.aspx](http://msdn.microsoft.com/en-us/magazine/ee819093.aspx)

**编辑以响应新内容**

新内容的jsfiddle：http: [//jsfiddle.net/EJbsS/](http://jsfiddle.net/EJbsS/)

在 chrome 中运行 jsfiddle 时，第一次运行通过 factorial(-1) 被调用。出现错误。可以通过单击右下角的红色 x 来访问它，或者通过检查元素，导航到控制台选项卡，然后查看文本区域来访问它。该错误正确显示为“未捕获的错误：阶乘函数不支持负数”，并带有指向使用的确切行的链接`throw new Error()`。

也许我需要更多说明，您要解决的问题是什么？看来chrome调试这个脚本就好了。Visual Studio 的调试器可能存在一些问题。

**而且**

这是可以从记事本中使用的工作页面的复制品，另存为`.html`

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>demo</title> 
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.4.js'></script>
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(document).ready(documentReady);
function documentReady() {
    $('#btnFactorial').click(btnFactorial_click);

    factorial(-1);
}

function btnFactorial_click() {
    var x;
    x = prompt('Enter a number to compute factorial for.', '');
    alert(x + '! = ' + factorial(x));
}

function factorial(x) {
    if (x < 0)
        throw new Error('factorial function doesn\'t support negative numbers');
    else if (x === 0 || x === 1)
        return 1;
    else
        return factorial(x - 1) * x;
}
});//]]>  
</script>
</head>
<body>
Factorial Page
<input type='button' value='Factorial' id='btnFactorial' />  
</body>
</html> 
```

在 google chrome 中运行此页面时，导航到源选项卡并在`Line 26: if (x < 0)`整个调用堆栈处设置断点会在页面运行时在右侧重现。

```
factorial (debugpage.html:26)
documentReady (debugpage.html:16)
jQuery.extend._Deferred.deferred.resolveWith (jquery-1.6.4.js:1016)
jQuery.extend._Deferred.deferred.done (jquery-1.6.4.js:1002)
jQuery.fn.jQuery.ready (jquery-1.6.4.js:282)
(anonymous function) (debugpage.html:11)
jQuery.event.handle (jquery-1.6.4.js:3001)
jQuery.event.add.elemData.handle.eventHandle (jquery-1.6.4.js:2635) 
```

**更深入**

希望这个警告将是最好的。稍微研究一下堆栈跟踪，我发现了这个`console.trace();`：这是**非常**有用的。

将其插入到上述代码的第 26 行，如下所示：

```
if (x < 0)
    throw new Error('factorial function doesn\'t support negative numbers');
else if (x === 0 || x === 1) 
```

变成

```
if (x < 0){
    console.trace();
    throw new Error('factorial function doesn\'t support negative numbers');
}else if (x === 0 || x === 1) 
```

现在运行它，*没有*断点，当满足错误条件时，将在控制台中生成堆栈跟踪：

```
console.trace() debugpage.html:27
factorial debugpage.html:27
documentReady debugpage.html:16
jQuery.extend._Deferred.deferred.resolveWith jquery-1.6.4.js:1016
jQuery.extend._Deferred.deferred.done jquery-1.6.4.js:1002
jQuery.fn.jQuery.ready jquery-1.6.4.js:282
(anonymous function) debugpage.html:11
jQuery.event.handle jquery-1.6.4.js:3001
jQuery.event.add.elemData.handle.eventHandle 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:52:42.870

我建议创建一个在`jQuery(document).ready()`块内实例化的对象。例如：

```
var oStart = function(){
    var pageMethod = function(){ /*...*/ }
    var pageMethodOther = function(){ /*...*/ }
    /*...*/
    var init = function(){
        jQuery(document).ready(function(){
            /* do your stuff here */
        });
    }
}

oStart.init(); 
```

这将帮助您分离应用程序逻辑和仅 jQuery 逻辑。您的就绪块中应该很少。只有那些在 DOM 完全加载后绝对必要的东西。当页面仍在渲染时，其他所有内容都应该能够加载到内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T04:35:26.377

我用内置的 IE 调试器尝试了你的小例子，它很好地报告了异常消息，将光标放在 throw 上。

在 Chrome 中也是如此。

我有 jquery v1.6.2。也许值得升级？

再说一次，这听起来像是一个线程问题。如果它总是与 UI 更新（如警报）一起发生，则可能是 VS 调试器认为它在 js 线程中时正在查看 UI 服务器线程。换句话说，调试器中的错误。如果是这种情况，您*应该*尝试使用不同的调试器来查看问题是否消失。

# neo4j - Cypher QL 中的子查询

> ID：10501075
> 
> 赞同：0
> 
> 时间：2012-05-08T14:53:48.310
> 
> 标签：neo4j, cypher

是否可以在 Cypher QL 中有子查询？我现在面临的问题是找到三合会。我正在使用下面的代码：

```
START n=node(*) MATCH triad=nbrl--n--nbrr RETURN count(triad) 
```

上面查询的问题是它计算了三元组两次。例如，两者
`B -- A -- C`
都
`C -- A -- B`
作为三元组返回。
我的计划是摆脱一个`nbrl--n--nbrr`xor `nbrr--n--nbrl`。但我想不出除了子查询之外的任何东西。非常感谢任何帮助。
更新：
发现另一个问题。考虑下图：

```
A -- B 
```

查询`START n=node(*) MATCH triad=nbrl--n--nbrr RETURN triad`返回：

```
A | B | A
B | A | A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:10:54.530

这有帮助吗？

```
START n=node(*) MATCH triad=nbrl-->n--nbrr RETURN count(triad) 
```

# centos - 将 vhost 添加到 httpd.conf 后出错 - centos

> ID：10501080
> 
> 赞同：2
> 
> 时间：2012-05-08T14:54:00.583
> 
> 标签：centos, vhosts

我在底部的 httpd.conf 中添加了以下文本：

```
<VirtualHost 12.34.56.78.80>
        ServerAdmin     foo@bar.com
        DocumentRoot    /var/www/html/some_dir/
        ServerName      foo-bar.example.com
        ErrorLog        /logs/foo-bar.example.com-error_log
        CustomLog       /logs/foo-bar.example.com-access_log common
</VirtualHost> 
```

..然后在尝试运行以下命令时：

```
/etc/init.d/httpd restart 
```

我收到以下错误：

```
[error] (EAI 2)Name or service not known: Could not resolve host name 12.34.56.78.80 -- ignoring! 
```

请注意，此帖子的名称和 IP 地址已更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-31T13:19:21.560

这是您的配置中的错字。

错误的：`<VirtualHost 12.34.56.78.80>`

应该：`<VirtualHost 12.34.56.78:80>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:55:46.513

[这](http://ubuntuforums.org/showthread.php?t=1100566)是 Ubuntu 的解决方案，但想法是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T09:53:42.887

我在 CentOS 服务器上遇到了同样的问题，并且花了大约 1/2 天的时间进行调查。最终通过 2 个步骤修复它：

**第1步**

确保防火墙（iptables）没有阻止端口 53。我添加到

```
/etc/sysconfig/iptables
/etc/sysconfig/ip6tables 
```

以下几行：

```
-I INPUT -p udp -m udp --dport 53 -j ACCEPT
-A OUTPUT -p udp -m udp --sport 53 -j ACCEPT
-I INPUT -p tcp -m tcp --dport 53 -j ACCEPT
-A OUTPUT -p tcp -m tcp --sport 53 -j ACCEPT 
```

重启防火墙

```
# service iptables restart 
```

然后重新启动Apache

```
# service httpd restart 
```

然后我又得到了：

```
[error] (EAI 2)Name or service not known: Cou... 
```

我再次重新启动了 Apache，这次主机可以解决，但不幸的是该网站仍然无法正常工作。于是我尝试重启Apache几次，随机出现上述错误！

**第2步**

没有任何效果，所以我终于重新启动了整个服务器

```
# /sbin/reboot 
```

瞧，一切都开始像魅力一样运作！

# c - 如何使用 apr 从在新进程中运行的程序捕获 stdout/stderr 输出？

> ID：10501084
> 
> 赞同：3
> 
> 时间：2012-05-08T14:54:14.417
> 
> 标签：c, stdout, pipe, apr

问题很简单：如何捕获子程序产生的 stderr/stdout 输出并将其重定向到文件，该程序在新进程中运行，使用 Apache Portable Runtime 的[`apr_proc_create`](http://apr.apache.org/docs/apr/1.4/group__apr__thread__proc.html#gab51dd90b98d365a969f0ec5c7bef4e14).

最终任务是在单独的进程中运行带有一些参数的外部命令（最好，但不是强制性的）并将其输出重定向到文件。

到目前为止，我已经得到了以下代码（为了清楚起见，删除了检查）：

```
apr_procattr_t *attr;
apr_proc_t newproc;

const char *progname;
const char *args[100];

// progname and args are populated with data here

apr_procattr_create(&attr, p);
apr_procattr_io_set(attr, APR_CHILD_BLOCK, APR_CHILD_BLOCK, APR_CHILD_BLOCK);
apr_procattr_cmdtype_set(attr, APR_PROGRAM_PATH);
apr_proc_create(&newproc, progname, args, NULL, attr, p); 
```

使用此代码，子进程的输出被抑制（至少我在控制台中看不到它），但它没有重定向到文件。使用`APR_NO_PIPE`而不是`APR_CHILD_BLOCK`导致将孩子的输出刷新到父 stdout/stderr

APR 似乎有很少的“食谱”食谱，所以我无法用谷歌搜索它。

有什么提示或建议吗？欢迎非 APR 解决方案，只要它们像我发布的代码一样简单明了。

PS 在 Debian 6(Linux `2.6.32-5-686`)、gcc上运行`4.4.5`，但我认为这无关紧要。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:19:26.917

APR的[测试用例](https://svn.apache.org/repos/asf/apr/apr/trunk/test/)包含很多有用的示例。在您的情况下，您应该查看[testproc.c](https://svn.apache.org/repos/asf/apr/apr/trunk/test/testproc.c)：

版权声明：此代码受[APL 2.0保护](http://www.apache.org/licenses/LICENSE-2.0)

```
/* Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

static void test_file_redir(abts_case *tc, void *data)
{
    apr_file_t *testout = NULL;
    apr_file_t *testerr = NULL;
    apr_off_t offset;
    apr_status_t rv;
    const char *args[2];
    apr_procattr_t *attr;
    apr_file_t *testfile = NULL;
    apr_size_t length;
    char *buf;

    testfile = NULL;
    rv = apr_file_open(&testfile, "data/stdin",
                       APR_FOPEN_READ | APR_FOPEN_WRITE | APR_FOPEN_CREATE | APR_FOPEN_EXCL,
                       APR_OS_DEFAULT, p);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_file_open(&testout, "data/stdout",
                       APR_FOPEN_READ | APR_FOPEN_WRITE | APR_FOPEN_CREATE | APR_FOPEN_EXCL,
                       APR_OS_DEFAULT, p);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_file_open(&testerr, "data/stderr",
                       APR_FOPEN_READ | APR_FOPEN_WRITE | APR_FOPEN_CREATE | APR_FOPEN_EXCL,
                       APR_OS_DEFAULT, p);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);

    length = strlen(TESTSTR);
    apr_file_write(testfile, TESTSTR, &length);
    offset = 0;
    rv = apr_file_seek(testfile, APR_SET, &offset);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    ABTS_ASSERT(tc, "File position mismatch, expected 0", offset == 0);

    rv = apr_procattr_create(&attr, p);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_procattr_child_in_set(attr, testfile, NULL);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_procattr_child_out_set(attr, testout, NULL);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_procattr_child_err_set(attr, testerr, NULL);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_procattr_dir_set(attr, "data");
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_procattr_cmdtype_set(attr, APR_PROGRAM_ENV);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);

    args[0] = "proc_child";
    args[1] = NULL;

    rv = apr_proc_create(&newproc, proc_child, args, NULL, 
                         attr, p);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);

    rv = apr_proc_wait(&newproc, NULL, NULL, APR_WAIT);
    ABTS_INT_EQUAL(tc, APR_CHILD_DONE, rv);

    offset = 0;
    rv = apr_file_seek(testout, APR_SET, &offset);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);

    length = 256;
    buf = apr_pcalloc(p, length);
    rv = apr_file_read(testout, buf, &length);
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    ABTS_STR_EQUAL(tc, TESTSTR, buf);

    apr_file_close(testfile);
    apr_file_close(testout);
    apr_file_close(testerr);

    rv = apr_file_remove("data/stdin", p);;
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_file_remove("data/stdout", p);;
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
    rv = apr_file_remove("data/stderr", p);;
    ABTS_INT_EQUAL(tc, APR_SUCCESS, rv);
} 
```

# regex - 正则表达式匹配“不是任何两个字符”

> ID：10501087
> 
> 赞同：0
> 
> 时间：2012-05-08T14:54:18.837
> 
> 标签：regex, pattern-matching

这就是我想要做的：

文本：-one oneitis -2 +3+4+5 -6-7-8 -9 再 11+12+13

我想匹配：

1.  -oneitis
2.  -二
3.  +三个
4.  +四个
5.  +五个
6.  -六七八
7.  -九点十一点
8.  +十二十三

基本上，忽略单词中匹配的“-”，但如果存在则匹配“+”和“-”

这是我正在使用的正则表达式： /([-+][^+]+)/

我想基本上做 [^(+)&( -)]+

或者，匹配任何不是 '+' 也不是 ' -' <- 即（空格和减号）

有没有办法做到这一点？

提前致谢！（链接一些工具[http://rubular.com/](http://rubular.com/)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:32:08.940

解决方案。

```
 ([-+](?:[^ ][-]|[ ][^-+]|[^ +-])+) 
```

[http://rubular.com/r/fTSm0pjvEX](http://rubular.com/r/fTSm0pjvEX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:19:46.817

一种选择是拆分`\+|\B-`：[http ://rubular.com/r/tC2zTWZI4v](http://rubular.com/r/tC2zTWZI4v)

由 every 分割`+`，并且`-`在空格（或任何非字母数字字符）之后。

这意味着它在某些情况下不会拆分，例如`+a b-c`不会拆分。

如果您确实想匹配您的单词，并且想在这种情况下拆分，您可以尝试：

```
[+-]([^\s+]*[^+-]*) 
```

[http://rubular.com/r/TqQEAoJ2Yv](http://rubular.com/r/TqQEAoJ2Yv)

# vba - AutoIt CaptureScreen 文件位置

> ID：10501088
> 
> 赞同：0
> 
> 时间：2012-05-08T14:54:21.800
> 
> 标签：vba, automation, autoit

我有以下 AutoIt 脚本：

```
Run("Notepad.exe", @WindowsDir, @SW_MAXIMIZE)
Sleep(1000)
Send("Just a test")
$anPos = WinGetClientSize("")
$nLeft = 0
$nTop = 0
$nRight = $anPos[0]
$nBottom = $anPos[1]
$sFileName = "test.jpg"
DllCall("captdll.dll", "int:cdecl", "CaptureScreen", "str", $sFileName, "int", 85) 
```

该脚本似乎运行正常，但我无法在任何地方找到 test.jpg 文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:03:00.827

没有正确安装 captdll，这就是问题所在。

# javascript - EXTJS，如何转义特殊字符？

> ID：10501091
> 
> 赞同：0
> 
> 时间：2012-05-08T14:54:43.187
> 
> 标签：javascript, extjs

在 EXTJS 中，如何转义特殊字符？

例如，编译器抱怨 showDetail('{1}') ，如何逃避 '' ？

谢谢

```
 return Ext.String.format(
            '{0} <a href="#" onclick="showDetail('{1}');">detail</a>',
            value,            
            record.getReportId()            
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:55:49.633

您应该能够使用标准`\`. `'`像这样放在前面`\'`。

```
 return Ext.String.format(
        '{0} <a href="#" onclick="showDetail(\'{1}\');">detail</a>',
        value,            
        record.getReportId()            
    ); 
```

# android - Android 上的 HttpClient 不保持会话

> ID：10501094
> 
> 赞同：0
> 
> 时间：2012-05-08T14:54:59.960
> 
> 标签：android, httpclient

我一直在尝试在不同的活动中使用相同的 HttpClient 实例，但它不起作用。所以我决定只尝试一项活动并使用 HttpClient 登录，然后在登录成功后注销。这都是在同一个活动中，所以 HttpClient 肯定应该保持会话正确吗？

```
HttpClient client = new DefaultHttpClient();
ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair(UN_ID, username));
    postParameters.add(new BasicNameValuePair(PW_ID, password));

HttpPost request = new HttpPost(URL);

formEntity = new UrlEncodedFormEntity(postParameters);

request.setEntity(formEntity);

response = client.execute(request); 
```

如果响应是成功登录，我尝试注销：

```
if (responseCode.equals("101")){ //successful
        HttpGet g = new HttpGet("https://site.com/file.php?logout=1");
        HttpResponse r = client.execute(g); 
```

这将返回“未登录”响应。这是服务器、HttpClient 还是我的代码的问题？

编辑：回应埃里克的回答。

我已经用 cookie 试过了：

```
CookieStore cookieStore = new BasicCookieStore();
    httpContext = new BasicHttpContext();
    httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore); 
```

然后更改上面的每个响应以包含上下文：

```
response = client.execute(request, httpContext);

HttpResponse r = client.execute(g, httpContext); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:26:08.810

这是因为默认情况下不激活 cookie。您需要按照以下问题所述使用 HttpContext：[如何在 Android 和/或 Java 中使用 HttpClient 管理 cookie？](https://stackoverflow.com/questions/3587254/how-do-i-manage-cookies-with-httpclient-in-android-and-or-java)

* * *

讨论后编辑（见评论）

看起来错误来自身份验证过程的服务器实现问题

# objective-c - 如何将对象添加到类中的 NSMutable 数组中？

> ID：10501100
> 
> 赞同：-2
> 
> 时间：2012-05-08T14:55:13.050
> 
> 标签：objective-c, nsmutablearray

我正在尝试将同一类的对象添加到在同一类中定义的 NSMutable 数组中。我的方法看起来像这样，但是当我测试数组时，它总是空的。我还尝试添加随机字符串或整数。

**.h 文件：**

```
@property NSMutableArray *anArray;
- (void)addObject: (TheClass*)nameOfObjectToBeAdded; 
```

**.m 文件：**

```
@synthesize anArray;

- (void)addObject: (TheClass*)nameOfObjectToBeAdded {
    [anArray addObject:nameOfObjectToBeAdded];
} 
```

**主.m：**

```
#import "TheClass.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {

        TheClass *object1 = [[TheClass alloc] init];
        TheClass *object2 = [[TheClass alloc] init];
        [object1 addObject:object2];

    }
    return 0;
} 
```

我正在尝试将 object2 添加到 object1 的 NSMutableArray 中。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:57:46.163

您需要在使用它之前分配和初始化数组：

在 Class.m 中，可能在`init`：

```
self.anArray = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:58:16.957

您首先需要创建 NSMutableArray ..

```
NSMutableArray *anArray = [NSMutableArray array];
[anArray addObject:object]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:00:45.790

在您的类初始化程序中添加分配，如下所示：

在`ThisClass`

```
-(id) init: {
  self = [super init];
  if(self) {
    self.anArray = [[NSMutableArray alloc] init];
    /* ... other initializer stuff ... */
  }
  return self;
} 
```

# regex - Javascript 正则表达式替换

> ID：10501102
> 
> 赞同：0
> 
> 时间：2012-05-08T14:55:20.547
> 
> 标签：regex

我正在尝试替换 JavaScript 中所有出现的模式。

我的字符串可能如下所示：

;2;#French/1;12;#German/7

我要替换的模式是：

一个 ; 后跟一个数字，后跟一个；后跟一个#

我想用逗号替换所有出现的地方，后跟一个空格：'，'

所以，上面的例子会导致

, 法语/1, 德语/7

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:26:32.733

使用正则表达式没有困难

匹配模式 =`;\d+;#`

替换模式 =`,`

# c# - 如何中止对象初始化？

> ID：10501103
> 
> 赞同：7
> 
> 时间：2012-05-08T14:55:23.467
> 
> 标签：c#, oop

我正在编写一个必须始终具有某些值的对象。最值得注意的是，它必须始终具有`Name`财产价值。

```
public class User
{
    public string Name { get; set; }

    public User(string name)
    {
        Name = name;
    }
} 
```

现在，我需要在这个类中实现一些业务规则。其中之一是`Name`属性必须是唯一的名称。所以，我认为这个对象的初始化程序看起来像这样：

```
 public User(string name, IQueryable<User> allUsers)
    {
        var matches = allUsers.Where(q => q.Name == name).ToList();
        if(matches.Any())
        {
            // abort object initialization
        }
        Name = name;
    } 
```

但我不确定如何中止对象初始化。事实上，这可能吗？

有没有办法中止对象初始化（即：将对象设置为null）或者有更好的方法来完成这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T14:57:59.940

好吧，你只会抛出一个异常。但我根本不喜欢这种处理这个问题的方式。相反，您应该通过服务创建用户，并让服务检查名称是否有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:57:17.460

我想您可以在对象的构造函数或名称设置器中检查并抛出异常，但是eeeeehhhh 可能会带来许多问题和混合问题。我说通过一个工厂创建对象，该工厂执行此检查并返回 null（或一个很好命名的异常）。或者创建 POCO 对象并通过单独的类/方法进行验证。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T15:02:34.620

与其拥有一个公共构造函数，不如拥有一个像这样的方法和一个私有构造函数：

```
public static User CreateUser(string name)
{
      // Check whether user already exists, if so, throw exception / return null

      // If name didn't exist, record that this user name is now taken.
      // Construct and return the user object
      return new User(name);
}

private User(string name)
{
       this.Name = name;
} 
```

然后您的调用代码可以`User myUser = User.CreateUser("Steve");`相应地使用和处理空返回/异常。

值得补充的是，无论您使用哪种存储用户名的方法，都应该更新以说明该名称是在 CreateUser 方法中使用的。否则，如果您在将此对象存储到数据库或其他东西之前等待一段时间，您仍然会遇到问题。我已经更新了上面的代码以使其更清晰。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T15:11:53.667

通过在构造函数中抛出异常来中止对象的初始化，建议拒绝无效输入。

```
public class User
{
    public User(String name) {
        if (String.IsNullOrWhiteSpace(name)) {
            if (name == null) {
                throw new System.ArgumentNullException("Cannot be null.", "name");
            }
            else {
                throw new System.ArgumentException("Cannot be empty.", "name");
            }
        }
    }
} 
```

您希望在构造函数中定义的业务逻辑不适合那里。构造函数应该是轻量级的，并且只能实例化。查询某些数据源对于构造函数来说太昂贵了。因此，您应该改用工厂模式。使用工厂模式，调用者可能期望对象创建涉及一些繁重的工作。

```
public class User
{
    private User(String name) {
        if (String.IsNullOrWhiteSpace(name)) {
            if (name == null) {
                throw new System.ArgumentNullException("Cannot be null.", "name");
            }
            else {
                throw new System.ArgumentException("Cannot be empty.", "name");
            }
        }
    }

    public static User CreateUser(String name) {
        User user = new User(name); // Lightweight instantiation, basic validation

        var matches = allUsers.Where(q => q.Name == name).ToList();

        if(matches.Any())           
        {           
            throw new System.ArgumentException("User with the specified name already exists.", "name");         
        }     

        Name = name;
    }

    public String Name {
        get;
        private set; // Optionally public if needed
    }
} 
```

您可以看到工厂模式更适合，因为它是一种方法，调用者可能希望通过调用它来进行一些工作。而对于构造函数，人们会期望它是轻量级的。

如果您想走构造函数路线，那么您可能想尝试一些其他方法来执行您的业务规则，例如尝试实际插入数据源时。

```
public class User
{
    public User(String name) {
        if (String.IsNullOrWhiteSpace(name)) {
            if (name == null) {
                throw new System.ArgumentNullException("Cannot be null.", "name");
            }
            else {
                throw new System.ArgumentException("Cannot be empty.", "name");
            }
        }
    }
}

public class SomeDataSource {
    public void AddUser(User user) {
        // Do your business validation here, and either throw or possibly return a value
        // If business rules pass, then add the user
        Users.Add(user);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T14:57:54.480

您可能应该在创建用户之前检查重复的名称。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-08T15:01:00.283

就个人而言，我在实例化之前运行逻辑检查。例如：

```
if(UserLogic.PreInsertValidation(string username)){
   User newUser = new User(username);
}
else{
  // Handling - maybe show message on client "The username is already in use."
} 
```

将`PreInsertValidation`根据您的要求进行所有业务逻辑检查。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T15:02:13.577

您正在寻找的是[身份映射](http://en.wikipedia.org/wiki/Identity_map_pattern)模式，或者是这种模式。将此责任留在对象本身可能是错误的，应该在创建实体的组件中完成。当然，如果需要，地图应该是线程安全的，以避免竞争条件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T15:02:30.230

我将在将用户纳入集合的承诺中处理此问题。例如，如果您正在编辑一组用户，然后将它们持久化到数据库中，则持久层将负责验证。我一直认为让一个对象像它一样负责维护所有其他对象是不好的做法。当没有对象时，它会引入与对象本身的父子关系。我建议实施某种验证引擎来处理这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-08T15:08:49.623

与其在对象本身内部进行此验证，不如将此实体的创建、验证和保存放在服务中。当用户名不唯一时，该服务可以抛出一个`ValidationException`异常，甚至可以开始一个事务以确保不会发生竞争条件。我使用的一个很好的模型是[命令/处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)模式。这是一个例子：

```
public class CreateNewUserCommand
{
    public string UserName { get; set; }
}

internal class CreateNewUserCommandHandler
    : ICommandHandler<CreateNewUserCommand>
{
    private readonly IUnitOfWork uow;

    public CreateNewUserCommandHandler(
        IUnitOfWork uow)
    {
        this.uow = uow;
    }

    public void Handle(CreateNewUserCommand command)
    {
        // TODO Validation

        var user = new User { Name = command.Name };

        this.uow.Users.InsertOnSubmit(user);
    }
} 
```

您甚至可以将验证添加到它自己的类中。

# javascript - Google Maps API V3 读取 KML 文件

> ID：10501104
> 
> 赞同：1
> 
> 时间：2012-05-08T14:55:23.713
> 
> 标签：javascript, google-maps-api-3, kml, polygon

我使用[KML 示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml-features)作为读取包含多边形的 KML 文件的指南。kml 文件包含

```
 <?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.2">
<Document>
  <name>Neighborhood Groups</name>
  <description><![CDATA[Content]]></description>
  <Style id="style3">
  </Style>
  <Style id="style9">
  </Style>
  <Style id="style8">
  </Style>
  <Style id="style2">
  </Style>
  <Style id="style4">
  </Style>
  <Style id="style7">
  </Style>
  <Style id="style1">
  </Style>
  <Style id="style5">
  </Style>
  <Style id="style6">
  </Style>
  <Style id="style10">
  </Style>
  <Placemark>
    <name>Neighborhood Group 1</name>
    <styleUrl>#style3</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.087296,35.911472,0.000000
            -84.089699,35.909248,0.000000
            -84.089439,35.903618,0.000000
            -84.085625,35.898994,0.000000
            -84.075836,35.903721,0.000000
            -84.081757,35.912968,0.000000
            -84.083565,35.919537,0.000000
            -84.090385,35.918110,0.000000
            -84.087250,35.911507,0.000000
            -84.090385,35.918110,0.000000
            -84.083473,35.919640,0.000000
            -84.087296,35.911472,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 2</name>
    <styleUrl>#style9</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.089439,35.902992,0.000000
            -84.089569,35.902992,0.000000
            -84.089615,35.902954,0.000000
            -84.093178,35.901428,0.000000
            -84.096741,35.900002,0.000000
            -84.097122,35.898819,0.000000
            -84.098969,35.897324,0.000000
            -84.112183,35.891346,0.000000
            -84.102013,35.885120,0.000000
            -84.089699,35.888771,0.000000
            -84.086739,35.892563,0.000000
            -84.082275,35.894367,0.000000
            -84.080429,35.894543,0.000000
            -84.087059,35.899845,0.000000
            -84.089401,35.903061,0.000000
            -84.089439,35.902992,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 3</name>
    <styleUrl>#style8</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.094109,35.910252,0.000000
            -84.094551,35.910252,0.000000
            -84.101067,35.909031,0.000000
            -84.096008,35.904068,0.000000
            -84.105103,35.901699,0.000000
            -84.104927,35.899651,0.000000
            -84.102867,35.895691,0.000000
            -84.097977,35.898022,0.000000
            -84.096992,35.899681,0.000000
            -84.095833,35.900730,0.000000
            -84.093681,35.906811,0.000000
            -84.094109,35.910252,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 4</name>
    <styleUrl>#style2</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.101196,35.908970,0.000000
            -84.101418,35.908901,0.000000
            -84.106911,35.907337,0.000000
            -84.113258,35.904381,0.000000
            -84.116608,35.903618,0.000000
            -84.116348,35.901497,0.000000
            -84.116905,35.899826,0.000000
            -84.116394,35.897915,0.000000
            -84.114418,35.893120,0.000000
            -84.111504,35.890961,0.000000
            -84.103905,35.896385,0.000000
            -84.104889,35.899548,0.000000
            -84.105324,35.900383,0.000000
            -84.100731,35.903755,0.000000
            -84.101196,35.908970,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 5</name>
    <Snippet>sdfgsdfg</Snippet>
    <description><![CDATA[<div dir="ltr">sdfgsdfg</div>]]></description>
    <styleUrl>#style4</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.094238,35.941559,0.000000
            -84.096649,35.944000,0.000000
            -84.100082,35.945660,0.000000
            -84.105621,35.945702,0.000000
            -84.111618,35.945660,0.000000
            -84.113251,35.943161,0.000000
            -84.113770,35.939030,0.000000
            -84.109177,35.940590,0.000000
            -84.110039,35.927589,0.000000
            -84.105789,35.925468,0.000000
            -84.094238,35.924358,0.000000
            -84.095360,35.930439,0.000000
            -84.094238,35.941559,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 6</name>
    <styleUrl>#style7</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.102272,35.946110,0.000000
            -84.101959,35.946110,0.000000
            -84.100342,35.945911,0.000000
            -84.096512,35.943981,0.000000
            -84.094070,35.941422,0.000000
            -84.094582,35.938961,0.000000
            -84.144463,35.913799,0.000000
            -84.094490,35.927872,0.000000
            -84.093773,35.924252,0.000000
            -84.090210,35.918522,0.000000
            -84.074852,35.921921,0.000000
            -84.079170,35.936520,0.000000
            -84.080971,35.941551,0.000000
            -84.081749,35.943130,0.000000
            -84.081413,35.945061,0.000000
            -84.082520,35.947472,0.000000
            -84.085609,35.949211,0.000000
            -84.092651,35.953411,0.000000
            -84.100029,35.949070,0.000000
            -84.102272,35.946110,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 7</name>
    <styleUrl>#style1</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.082008,35.944618,0.000000
            -84.081757,35.943512,0.000000
            -84.079140,35.936489,0.000000
            -84.079391,35.934158,0.000000
            -84.076088,35.921650,0.000000
            -84.059013,35.925400,0.000000
            -84.059097,35.928532,0.000000
            -84.062569,35.931278,0.000000
            -84.062920,35.932812,0.000000
            -84.060249,35.937119,0.000000
            -84.059608,35.939690,0.000000
            -84.060768,35.941841,0.000000
            -84.064552,35.943130,0.000000
            -84.074333,35.944691,0.000000
            -84.078712,35.945660,0.000000
            -84.082008,35.944618,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 8</name>
    <styleUrl>#style5</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.079613,35.913628,0.000000
            -84.074722,35.906986,0.000000
            -84.065323,35.911575,0.000000
            -84.063797,35.911873,0.000000
            -84.061096,35.912186,0.000000
            -84.062019,35.922176,0.000000
            -84.065582,35.923531,0.000000
            -84.077080,35.920891,0.000000
            -84.079315,35.914322,0.000000
            -84.079613,35.913628,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 9</name>
    <styleUrl>#style6</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.074425,35.906693,0.000000
            -84.074638,35.906605,0.000000
            -84.077042,35.905910,0.000000
            -84.072319,35.899166,0.000000
            -84.068626,35.894058,0.000000
            -84.067337,35.890911,0.000000
            -84.060234,35.892754,0.000000
            -84.056396,35.894283,0.000000
            -84.052963,35.894909,0.000000
            -84.055069,35.899513,0.000000
            -84.058434,35.899132,0.000000
            -84.060387,35.902954,0.000000
            -84.061722,35.905807,0.000000
            -84.064934,35.910309,0.000000
            -84.065582,35.911331,0.000000
            -84.074425,35.906693,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
  <Placemark>
    <name>Neighborhood Group 17</name>
    <styleUrl>#style10</styleUrl>
    <Polygon>
      <outerBoundaryIs>
        <LinearRing>
          <tessellate>1</tessellate>
          <coordinates>
            -84.061737,35.913246,0.000000
            -84.061844,35.913002,0.000000
            -84.063606,35.911995,0.000000
            -84.063690,35.910950,0.000000
            -84.064682,35.910221,0.000000
            -84.061028,35.902817,0.000000
            -84.057938,35.898716,0.000000
            -84.052574,35.900906,0.000000
            -84.047256,35.904797,0.000000
            -84.048134,35.905632,0.000000
            -84.047424,35.906815,0.000000
            -84.047966,35.911194,0.000000
            -84.048264,35.912777,0.000000
            -84.050819,35.913334,0.000000
            -84.051201,35.914669,0.000000
            -84.052490,35.918163,0.000000
            -84.052490,35.921429,0.000000
            -84.057083,35.920597,0.000000
            -84.059204,35.918682,0.000000
            -84.061737,35.913246,0.000000
          </coordinates>
        </LinearRing>
      </outerBoundaryIs>
    </Polygon>
  </Placemark>
</Document>
</kml> 
```

处理它的javascript是

```
function initialize() {
  var myLatlng = new google.maps.LatLng(35.910200,-84.085100);
  var myOptions = {
    zoom: 12,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(
      document.getElementById("map_canvas"),
      myOptions);

  var nyLayer = new google.maps.KmlLayer(
      'map.kml',
      {  suppressInfoWindows: true,
         map: map});

  google.maps.event.addListener(nyLayer, 'click', function(kmlEvent) {
    var text = kmlEvent.featureData.description;
    showInContentWindow(text);
  });

  function showInContentWindow(text) {
    var sidediv = document.getElementById('content_window');
    sidediv.innerHTML = text;
  }
} 
```

正在进行的全部工作位于[http://cspc.net/neighborhoods/map.html](http://cspc.net/neighborhoods/map.html)。如您所见，地图无法完成加载。正在从 maps.google.com 中创建的自定义地图导出 kml 文件。

我需要修改kml文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:14:02.973

问题出在`KmlLayer`[^(doc)](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)构造函数调用中。您必须提供一个可供 Google 检索您的 kml 文件的可公开访问的 URL。Google 会处理您的 kml，将其转换为覆盖图块，然后将其返回为`KmlLayer`您使用`new google.maps.KmlLayer(...)`.

# java - Hibernate cancelQuery 和查询日志记录

> ID：10501107
> 
> 赞同：1
> 
> 时间：2012-05-08T14:55:44.390
> 
> 标签：java, hibernate, logging

我正在尝试使用 Hibernate 3.3.2 实现查询超时功能，但到目前为止，采用后端代码方法一直没有成功。相反，我实现了一个前端解决方案，有一个加载弹出窗口，它使用 javascript setTimeout 函数调用一个调用 Hibernate Session 的 cancelQuery 方法的 servlet。

我可以访问 Hibernate Session 对象，并且我想记录被取消的查询。这可能吗？

注意：我们确实启用了休眠日志记录，但我们想要一个单独的条目，其中包含取消查询的细节。

# php - 连接两个表并遍历数据

> ID：10501112
> 
> 赞同：1
> 
> 时间：2012-05-08T14:55:49.690
> 
> 标签：php, mysql, database

我一直在使用 stackoverflow 来帮助我，但现在我很难过 - 希望我能在这个问题上得到一些指导：

我有两张桌子，一张包含 NFL Divisions，另一张包含 NFL Teams。它们通过 partition_id 字段（Divisions 表上的主键，Teams 表上的外键）连接。

我想做的是在查询中加入表格并按部门输出团队。我可以通过两个单独的查询/循环在 PHP 中完成此操作，但我想知道如何/是否可以通过将两个表连接到一个查询中来完成此操作。

这是我所拥有的：

```
$query = "SELECT Divisions.division_id, Divisions.conference, Divisions.name, 
    Teams.name FROM Divisions INNER JOIN Teams ON 
    Teams.division_id = Divisions.division_id ORDER BY Divisions.division_id";

if( $result = $db->query($query) ){
  while( $row = $result->fetch_object() ){
    // here is where I'm stuck
  }
} 
```

我试图让最终输出看起来类似于：

**AFC 北**
克利夫兰布朗
匹兹堡钢人
巴尔的摩乌鸦
辛辛那提孟加拉虎

**亚足联东**
布法罗比尔
迈阿密海豚
等。

非常感谢任何可以帮助我的人！两年多来我没有做过任何编程，只是重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:09:08.440

循环遍历行并在`division_id`更改时输出新标题：

```
$query = "SELECT Divisions.division_id, Divisions.conference, Divisions.name, 
    Teams.name AS teamName FROM Divisions INNER JOIN Teams ON 
    Teams.division_id = Divisions.division_id ORDER BY Divisions.division_id";

if ($result = $db->query($query)) {
    $division = "";
    while ($row = $result->fetch_object()) {
        if ($division != $row["division_id"])
        {
            $division = $row["division_id"];
            echo "<br /><h2>{$row["conference"]}</h2>";
        }

        echo "{$row["teamName"]}<br />";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:02:28.127

```
$result = array();
if( $result = $db->query($query) ){

  while( $row = $result->fetch_object() ){
    if(empty($result[$row['division_id']])
    {
       $result[$row['division_id']] = $row;
    }
    $result[$row['division_id']]['teams'][] = $row;
  }
}
print_r($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:04:43.523

您可以循环槽并再次检查它是否是相同的分区。如果它是一个新部门，请写下它并`<br />`

```
$query = "SELECT Divisions.division_id, Divisions.conference, Divisions.name, 
    Teams.name as teamName FROM Divisions INNER JOIN Teams ON 
    Teams.division_id = Divisions.division_id ORDER BY Divisions.division_id";

if( $result = $db->query($query) ){
    $lastDivision = -1;
  while( $row = $result->fetch_object() ){
    if($lastDivision != $row["division_id"]){
        //here it is a new division,
        echo "<b>" . $row["division_id"] . "</b><br />";
    }else{
        //not a new division so we just continu to write teams
        echo $row["teamName"] . "<br />";
    }
    $lastDivision = $row["division_id"];
  }
} 
```

# python - 为我的 SelectField 启用验证

> ID：10501114
> 
> 赞同：1
> 
> 时间：2012-05-08T14:55:54.713
> 
> 标签：python, google-app-engine, python-2.7, wtforms

我有一个要使用 WTForms 添加验证的 SelectField。这些字段从动态下拉列表中获取其值，因为它是一对区域/城市选择的城市字段，用户首先选择区域，然后城市选项切换以显示所选区域的城市：

![在此处输入图像描述](../Images/d70aa8212f490486252964466ecad714.png)

如果我将其设置为与表单类中相同的名称，那么我仍然可以对输入执行验证：

```
<div id="cities">
                {{form.area}}
</div>{% if form.area.errors %} <div class="maintext">
        <ul class="errors">{% for error in form.area.errors %}<li>{{ error }}</li>{% endfor %}</ul></div>
    {% endif %} 
```

我希望在未验证的字段周围有一个红框，这适用于 SelectField 以外的其他字段（参见附图）。我想知道如何为我的 SelectField 启用验证？它适用于所有其他领域。为了启用字段周围的红框，我尝试对 Select 类进行子类化并将其添加为小部件，因为这适用于其他字段但不适用于 SelectField：

```
from wtforms.widgets import Select
class SelectWithRedFrame(Select):

    def __init__(self, error_class=u'has_errors'):
        super(SelectWithRedFrame, self).__init__()
        self.error_class = error_class

    def __call__(self, field, **kwargs):
        if field.errors:
            c = kwargs.pop('class', '') or kwargs.pop('class_', '')
            kwargs['class'] = u'%s %s' % (self.error_class, c)
        return super(SelectWithRedFrame, self).__call__(field, **kwargs)

class AdForm(Form):

    my_choices = [
        ('1', _('All categories')),
        ('disabled', _('VEHICLES')),
        ('2010', _('Cars')),
        ('3', _('Motorcycles')),
        ('4', _('Accessories & Parts')),
        ('disabled', _('PROPERTIES')),
        ('7', _('Apartments')),
        ('8', _('Houses')),
        ('9', _('Commercial properties')),
        ('10', _('Land')),
        ('disabled', _('ELECTRONICS')),
        ('12', _('Mobile phones & Gadgets')),
        ('13', _('TV/Audio/Video/Cameras')),
        ('14', _('Computers')),
        ('disabled', _('HOME & PERSONAL ITEMS')),
        ('16', _('Home & Garden')),
        ('17', _('Clothes/Watches/Accessories')),
        ('18', _('For Children')),
        ('disabled', _('LEISURE/SPORTS/HOBBIES')),
        ('20', _('Sports & Outdoors')),
        ('21', _('Hobby & Collectables')),
        ('22', _('Music/Movies/Books')),
        ('23', _('Pets')),
        ('20', _('BUSINESS TO BUSINESS')),
        ('24', _('Hobby & Collectables')),
        ('25', _('Professional/Office equipment')),
        ('26', _('Business for sale')),
        ('disabled', _('JOBS & SERVICES')),
        ('28', _('Jobs')),
        ('29', _('Services')),
        ('30', _('Events & Catering')),
        ('31', _('Others')),
        ]
    regions = [
        ('', _('Choose')),
        ('3', _('Delhi')),
        ('4', _('Maharasta')),
        ('7', _('Gujarat')),      
        ]
    cities = [
        ('', _('Choose')),
         ('3', _('Mumbai')),
        ('4', _('Delhi')),     
        ]
    nouser = HiddenField(_('No user'))  # dummy variable to know whether user is logged in
    name = TextField(_('Name'),
                     [validators.Required(message=_('Name is required'
                     ))], widget=MyTextInput())
    title = TextField(_('Subject'),
                      [validators.Required(message=_('Subject is required'
                      ))], widget=MyTextInput())
    text = TextAreaField(_('Ad text'),
                         [validators.Required(message=_('Text is required'
                         ))], widget=MyTextArea())
    phonenumber = TextField(_('Phone'), [validators.Optional()])
    phoneview = BooleanField(_('Display phone number on site'))
    price = TextField(_('Price'), [validators.Regexp('^[0-9]+$',
                      message=_('This is not an integer number, please see the example and try again'
                      )), validators.Optional()], widget=MyTextInput())
    email = TextField(_('Email'),
                      [validators.Required(message=_('Email is required'
                      )),
                      validators.Email(message=_('Your email is invalid'
                      ))], widget=MyTextInput())

    region = SelectField(_('Region'),choices=regions,validators=[validators.Required(message=_('Region is required'))],option_widget=SelectWithRedFrame())
    area = SelectField(_('City'),choices=cities,validators=[validators.Required(message=_('City is required'
                      ))],option_widget=SelectWithRedFrame())

    def validate_name(form, field):
        if len(field.data) > 50:
            raise ValidationError(_('Name must be less than 50 characters'
                                  ))

    def validate_email(form, field):
        if len(field.data) > 60:
            raise ValidationError(_('Email must be less than 60 characters'
                                  ))

    def validate_price(form, field):
        if len(field.data) > 8:
            raise ValidationError(_('Price must be less than 9 integers'
                                  )) 
```

你能告诉我我做错了什么以及如何启用我的 SelectField 进行验证吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:39:41.653

你试过验证器 AnyOf 了吗？请参阅[http://wtforms.simplecodes.com/docs/0.6/validators.html](http://wtforms.simplecodes.com/docs/0.6/validators.html)

class wtforms.validators.AnyOf(values, message=u'Invalid value, must be one of: %(values)s', values_formatter=None) 将传入数据与一系列有效输入进行比较。

# binding - 在 Knockout foreach 中创建自定义绑定

> ID：10501115
> 
> 赞同：0
> 
> 时间：2012-05-08T14:55:59.283
> 
> 标签：binding, foreach, knockout.js, ko.observablearray

我不明白我错在哪里。你能帮帮我吗？我创建了一个名为“bTest1”的自定义绑定，两个可观察数据（1 个数组和 1 个字符串）。将此绑定应用于字符串可以正常工作，但不能通过 ko:foreach 应用于数组

这是我的 jsfiddle 链接：[这里](http://jsfiddle.net/syndrael/fjtey/)

和我的代码

```
<!-- ko foreach:test -->
<label><input type="text" data-bind="bTest1:$root.test1,value:$data,valueUpdate:'afterkeydown'" />Test1</label><br/>
<!-- /ko -->
<br/>
<label><input type="text" data-bind="bTest1:test1,value:test1,valueUpdate:'afterkeydown'" />Test2</label> 
```

和我的 JS 代码（尽可能简单）：

```
ko.bindingHandlers.bTest1 = {
        init: function() {
            console.log('init Test1');
    },
    update: function() {
            console.log('update Test1');
    }
};

var modelView = function(){
    var self = this;
    self.test = ko.observableArray(['foreach_test','foreach_test1']);
    self.test1 = ko.observable('test_alone');
}

ko.applyBindings(new modelView()); 
```

我感谢你帮助我。最好的问候 S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:32:51.010

早上好。

ObservableArray 只跟踪对数组本身的更改（添加/删除项目），而不是对其包含的项目的更改。因此，如果您想要相同的结果，则需要将数组中的每个项目标记为 ko.observable。

希望这可以帮助！

# c - 如何从内部命令执行完成，然后执行另一个命令？

> ID：10501121
> 
> 赞同：15
> 
> 时间：2012-05-08T14:56:31.257
> 
> 标签：c, gdb

这是我的代码结构的简化示例：

```
void increment(int j);

int main()
{
  int i = 0;

  while(1) {
    i = increment(i);
  }

  return 0;
}

int increment(int j)
{
  return j + 1;
} 
```

这是相应的 GDB 脚本：

```
b increment
command 1
finish
print i
continue
end 
```

问题是该`finish`命令会阻止它后面的命令（即`print i`and `continue`）不被调用。

有没有办法告诉 GDB`i`在任何`increment`呼叫后立即打印？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T07:11:51.197

您显然可以通过将所有命令包装在单个 python 调用中来解决此错误，例如

```
(gdb) break doSomething
Breakpoint 1 at 0x400478: file iter.c, line 5.
(gdb) commands
Type commands for breakpoint(s) 1, one per line.
End with a line saying just "end".
>python gdb.execute("print i"); gdb.execute("finish"); gdb.execute("print i");
>end

Breakpoint 1, doSomething () at iter.c:5
5     while (i < 5)
$1 = 0
main (argc=1, argv=0x7fffffffe178) at iter.c:13
13    return 0;
$2 = 5 
```

编辑：不需要python的第二个解决方法似乎是定义一个新的gdb命令并在命令中运行它：

```
define foo
print *i
set $addrOfI = i
finish
print *$addrOfI
end

break doSomething
commands
foo
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:58:59.987

> 问题是完成似乎停止中止为它之后的第一个断点设置的命令。

这是预期的行为：任何恢复劣质（被调试）进程的命令（就像`finish`那样）也会停止执行固定命令序列。

更新：

另请参阅此[GDB 错误报告](http://sourceware.org/bugzilla/show_bug.cgi?id=10852)。

> 有没有办法告诉 GDB 在任何增量调用后立即打印 i ？

是的：

1.  使用命令反汇编`increment`例程。`disas`在它的末尾找到`ret`指令（只有一个）。
2.  `break *0xNNNNN`使用语法在该指令上设置断点。
3.  将命令附加到该断点：

    ```
    command N
     print $rax    # or $eax if you are on 32-bit x86 platform
     continue
    end 
    ```

瞧：你应该得到从`increment()`打印返回的值（就在被返回之前）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T07:34:29.430

作为@Matt 答案的替代方案，如果您使用 GDB 7.4，则可以使用 FinishBreakpoints，例如（未经测试——我不确定这里是否接受评论）：

```
(gdb) python #first defined the class
class MyFinishBreakpoint (gdb.FinishBreakpoint):
    def stop (self):
        print "%s" % gdb.parse_and_eval("i")
        return False # don't want to stop
end
(gdb) break doSomething
(gdb) commands
# then set the FinishBreakpoint silently
silent
py MyFinishBreakpoint()
continue 
```

（以及[文档](http://sourceware.org/gdb/current/onlinedocs/gdb/Finish-Breakpoints-in-Python.html#Finish-Breakpoints-in-Python)链接）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T15:50:14.357

你真的试过编译这个吗？您的`increment()`函数已声明`void`，但需要声明`int`。更改后，它对我来说很好：

```
% gdb test
GNU gdb (Ubuntu/Linaro 7.3-0ubuntu2) 7.3-2011.08
[...]
Reading symbols from test...done.
(gdb) b increment 
Breakpoint 1 at 0x4004bb: file test.c, line 5.
(gdb) r
Starting program: test 

Breakpoint 1, increment (j=0) at test.c:5
5               return j+1;
(gdb) fin
Run till exit from #0  increment (j=0) at test.c:5
0x00000000004004dc in main () at test.c:11
11                      i = increment(i);
Value returned is $1 = 1
(gdb) n
12              }
(gdb) p i
$2 = 1
(gdb) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-05T10:10:51.583

GDB 断点命令列表的局限性在于它们忽略第一个步进/继续命令之后的任何命令（截至 2017 年 3 月，GDB 7.12）。这[在 GDB 手册](https://sourceware.org/gdb/onlinedocs/gdb/Break-Commands.html#Break-Commands)中有记录，其动机是当前实现无法同时执行两个命令列表（参见[GDB #10852 - 命令序列意外中断](https://sourceware.org/bugzilla/show_bug.cgi?id=10852)）。

此限制仅通过直接存在于命令列表中的步进/继续命令来实施。因此，可以解决这个问题 - 但限制仍然适用，例如 GDB 手册[在 Python API 部分中警告](https://sourceware.org/gdb/onlinedocs/gdb/Breakpoints-In-Python.html#Breakpoints-In-Python)：“你不应该改变下级的执行状态（即步骤、下一步等）”

**因此，当需要在函数进入和**函数退出时执行 GDB 命令时，可靠的解决方案是使用多个断点并拆分命令列表。这意味着需要为正在研究的函数的每个返回指令设置额外的断点。

这可以类似于：

```
(gdb) b my_function
(gdb) commands
silent
printf "my_function: %d -> ", j
end
(gdb) set pagination off
(gdb) set logging file gdb.log
(gdb) set logging overwrite on
(gdb) set logging on
(gdb) disas my_function
(gdb) set logging off
(gdb) shell grep ret gdb.log
0x00007ffff76ad095 <+245>:  retq
(gdb) b *0x00007ffff76ad095
(gdb) commands
silent
printf "%lu\n", $rax
end 
```

哪个寄存器包含返回值取决于[调用约定](https://en.wikipedia.org/wiki/Calling_convention)并且取决于体系结构。在[x86-64 上，它](http://en.wikipedia.org/wiki/X86_calling_conventions)位于`$rax`. 其他选择`$eax`在 x86-32、`$o0`SPARC、`$r0`ARM 等上。

使用 GDB 的脚本支持可以自动创建额外的断点。

## Python

最近的 GDB 版本带有一个非常适合这种自动化的[Python API 。](https://sourceware.org/gdb/onlinedocs/gdb/Python.html#Python)发行版提供的 GDB 包通常默认启用 Python 支持。

作为第一个示例，在给定函数的每个 ret 指令上自动设置断点：

```
(gdb) py fn='myfunc'; list(map(lambda l: gdb.execute('b *{}'.format(l[0])), \
    filter(lambda l : l[2].startswith('ret'), map(lambda s : s.split(), \
        gdb.execute('disas '+fn, to_string=True).splitlines())))) 
```

（假设 GDB 是用 Python3 支持编译的，例如 Fedora 25 之一）

为了自动创建打印返回值（即 register 的值`$rax`）然后继续的断点，需要对类进行子类[`gdb.Breakpoint`化：](https://sourceware.org/gdb/onlinedocs/gdb/Breakpoints-In-Python.html#Breakpoints-In-Python)

```
py
class RBP(gdb.Breakpoint):
  def stop(self):
    print(gdb.parse_and_eval('$rax'))
    return False

end 
```

然后可以像这样创建断点：

```
py RBP('*0x000055555555894e') 
```

结合这两个步骤来创建一个新的自定义命令：

```
py
class Pret_Cmd(gdb.Command):
  '''print return value via breakpoint command

  pret FUNCTION
  '''
  def __init__(self):
    super().__init__('pret', gdb.COMMAND_BREAKPOINTS)

  def install(self, fn):
    for l in filter(lambda l : l[2].startswith('ret'),
        map(lambda s : s.split(),
            gdb.execute('disas '+fn, to_string=True).splitlines())):
      RBP('*{}'.format(l[0]))

  def invoke(self, arg, from_tty):
    self.install(arg)

Pret_Cmd()
end 
```

使用此新命令的示例：

```
(gdb) help breakpoints
(gdb) help pret
(gdb) pret myfunc 
```

## 诡计

如果您不喜欢 Python 和/或 GDB 禁用了 Python 支持 - 但启用了[Guile 支持](https://sourceware.org/gdb/onlinedocs/gdb/Guile.html#Guile)- 也可以通过 Guile 自动设置断点。

Guile 中的自定义命令定义：

```
(gdb) gu (use-modules (gdb))
(gdb) gu
(register-command!
  (make-command "pret" #:command-class COMMAND_BREAKPOINTS #:doc
    "print return value via breakpoint command\n\npret FUNCTION"
    #:invoke
    (lambda (fn)
      (map (lambda (x)
             (let ((bp (make-breakpoint (string-append "*" x))))
               (register-breakpoint! bp)
               (set-breakpoint-stop!
                 bp
                 (lambda (x)
                   (display (parse-and-eval "$rax"))
                   (newline)
                   #f))
               bp))
           (map (lambda (x) (list-ref x 0))
                (filter
                  (lambda (x)
                    (and (not (null? x))
                         (string-prefix? "ret" (list-ref x 2))))
                  (map (lambda (x) (string-tokenize x))
                       (string-split
                         (execute
                           (string-append "disas " fn)
                           #:to-string
                           #t)
                         #\newline))))))))

end 
```

# tsql - TSQL - 搜索可以包含 1、2 或 3 个部分的名称

> ID：10501122
> 
> 赞同：1
> 
> 时间：2012-05-08T14:56:40.967
> 
> 标签：tsql

我正在尝试创建一个从表中返回人名的查询。

该表包含一个名为 full_name 的字段。

我在该字段的表上创建了一个全文索引。

我有以下查询

```
ALTER procedure [dbo].[spGetContactFromContactName]
@contactname VARCHAR(200) 
AS
DECLARE @searchstr VARCHAR(200)
set @searchstr = '"'+REPLACE(@contactname,',','*" OR ''')+'*"'
select * from tbl_ContactDetails
where contains(Full_Name,@searchstr) 
```

这有效，但仅在某些情况下有效。

如果该字段包含姓名**John James Jones**，则如果您输入以下任何内容，则该查询将起作用：

*   约翰
*   詹姆士
*   琼斯
*   约翰·詹姆斯
*   詹姆斯·琼斯
*   约翰·詹姆斯·琼斯

**但如果您输入John Jones**则不起作用。

我在网上搜索了一个解决方案，这就是上述查询的来源。任何想法或指示将不胜感激。

提前致谢

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:02:21.233

尝试这个。您的原始程序没有正确处理空间。

```
ALTER PROCEDURE [dbo].[spGetContactFromContactName]
   @contactname VARCHAR(200)
AS 
BEGIN
   DECLARE @searchstr VARCHAR(200)
   SET @contactname = REPLACE(REPLACE(@contactname, ',', '|'), ' ', '|')
   SET @searchstr = '"' + REPLACE(@contactname, '|', '*" OR "') + '*"'
   SELECT   *
   FROM     tbl_ContactDetails
   WHERE    CONTAINS ( Full_Name, @searchstr )
END 
```

# objective-c - 将数据从另一个类传递给 textView

> ID：10501123
> 
> 赞同：0
> 
> 时间：2012-05-08T14:56:44.993
> 
> 标签：objective-c, macos

我知道这只是一个基本问题，但我仍然在某个地方遗漏了一些东西，我正在将数据从另一个类传递给 textView。为此，我创建了两个类，一个带有 xib 文件（ViewController），另一个没有（secondVC）。

我想要做的是我在 ViewController 类中有一个 textview，并希望将数据从 secondVC 传递给这个 textView。这就是我正在做的事情。

```
//ViewController.h

#import <UIKit/UIKit.h>
#import "secondVC.h"

@interface ViewController : UIViewController{

    IBOutlet UITextView *textView;
}

@property (nonatomic, retain) UITextView *textView;

- (IBAction)go:(id)sender;

@end

//ViewController.m

- (IBAction)go:(id)sender{

    secondVC *sec = [[secondVC alloc] init];

    [sec print];

}

//secondVC.h

#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface secondVC : UIViewController

- (void)print;

@end

//secondVC.m

- (void)print{

    NSString *printThis = @"This works";

    ViewController *vc = [[ViewController alloc] init];

    [vc.textView setText:printThis];

    //vc.textView.text = printThis  //Tried both
} 
```

任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:32:44.013

第一个 VC .h 文件：

```
#import <UIKit/UIKit.h>

@protocol textViewChildDelegate <NSObject>

-(void)getStrings:(NSString*)string;

@end
@interface textViewChild : UIViewController<UITextViewDelegate>{

    UITextView     *textView;

}
@property(nonatomic,assign)id<textViewChildDelegate>delegate;
@end 
```

.m 文件：

```
#import "textViewChild.h"

    @implementation textViewChild
    @synthesize delegate;
    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            // Custom initialization
        }
        return self;
    }

    -(void)myWorkingMethod{

        // get string from textView
        [delegate getStrings:textView.text];

    }

    - (void)viewDidLoad
    {

        textView = [[UITextView alloc]initWithFrame:CGRectMake(0, 240, 320, 240)];

        [super viewDidLoad];
        // Do any additional setup after loading the view.
    } 
```

现在转到 secondVC .h：

```
#import <UIKit/UIKit.h>
#import "textViewChild.h"
@interface TextViewViewController : UIViewController<textViewChildDelegate>{

    UITextView * myfirstTextView;

}

@end 
```

和 .m 文件：

```
#import "TextViewViewController.h"

@implementation TextViewViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(void)getStrings:(NSString *)string{

    myfirstTextView.text = string; // finally we get string from child view controller

}

- (void)viewDidUnload
{

    myfirstTextView = [[UITextView alloc]init];

    [super viewDidUnload];
    // Release any retained subviews of the main view.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:02:42.090

尝试使用协议...如果您想将字符串从 textView(child) 发送到其他 ViewController(parent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:04:53.437

您需要一个从 SecondVC 触发并在第一个（ViewController）中处理的委托方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:17:09.763

你可以这样做：

//ViewController.h

```
#import <UIKit/UIKit.h>
#import "secondVC.h"

@interface ViewController : UIViewController{

    IBOutlet UITextView *textView;
}

@property (nonatomic, retain) UITextView *textView;

- (IBAction)go:(id)sender;

@end

//ViewController.m

- (IBAction)go:(id)sender{

    secondVC *sec = [[secondVC alloc] init];
    sec.viewController = self;
    [sec print];

}

//secondVC.h

#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface secondVC : UIViewController {
ViewController *viewController;

}

@property(nonatomic, retain)ViewController *viewController;

- (void)print;

@end

//secondVC.m

@synthesize viewController;

- (void)print{

    NSString *printThis = @"This works";
    self.viewController.textView.text = printThis ; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T15:10:53.190

.h 文件：

```
#import <UIKit/UIKit.h>

@protocol StringDelegate <NSObject>

-(void)getArrayOfStrings:(NSMutableArray*)strArray;

@end

@interface WWSettings : UIViewController{

}

@property(nonatomic,assign)id<StringDelegate>delegate;

@end 
```

.m 文件：

```
#import "WWSettings.h"

@implementation WWSettings
@synthesize delegate;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)blablablaFunction{
    [delegate getArrayOfStrings:yourArray];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}
@end 
```

如果你不明白它是如何工作的..问！我会尽力帮助你）

你的第二个VC

```
#import <UIKit/UIKit.h>
#import "WWSettings.h"
@interface secondVC : UIViewController<StringDelegate>{

    WWSettings      *obj;

}

@end 
```

和 .m 文件：

```
#import "secondVC.h"

@implementation secondVC

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)getArrayOfStrings:(NSMutableArray *)strArray{

    // here you get your array !!! it's a delegate function made by you in child viewController;

}

- (void)viewDidLoad
{
    obj = [[WWSettings alloc]init];
    [obj setDelegate:self];

    [super viewDidLoad];
    // Do any additional setup after loading the view.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T15:13:54.960

这里有几个问题：

1.  你有一个`ViewController`创建一个新的`secondVC`并向它发送一条`print`消息。没关系，但是 的实现`-print`会创建一个*不同*的实例`ViewController`并尝试设置它的`textView`属性的文本。这显然不是您想要的——您应该将文本发送回`ViewController`.

2.  第二个实例的属性`ViewController`很可能`textView`设置为 nil，因为`textView`它是一个出口，但您还没有从 .xib 加载它的视图。

3.  一个视图控制器弄乱另一个视图控制器的视图真的*不好。*应该将`secondVC`文本提供给原始`ViewController`对象，而不是尝试设置其视图之一的文本。

4.  为方便来往`secondVC`，`ViewController`给`secondVC`个物业原作跟踪`ViewController`。这里通常要做的事情是定义一个委托协议`secondVC`并在`ViewController`. 创建时，它将委托设置`ViewController`为自身。这给出了一个指向它的委托的指针（它不应该关心它是一个对象还是其他类型的对象，只要委托实现了正确的方法）。`secondVC``secondVC``secondVC``ViewController`

# .htaccess - 301 htaccess 使用两个单独的 URL 重定向

> ID：10501125
> 
> 赞同：0
> 
> 时间：2012-05-08T14:57:01.957
> 
> 标签：.htaccess, redirect

我有两个指向同一个目录的 URL，我们称它们为 www.english.com 和 www.french.com。我的 htaccess 文件有如下重定向：

```
Redirect 301 /one http://www.english.com/#/one 
```

如果有人访问 www.english/one，他们会被带到上面修改后的 URL，但法语 URL 也会重定向到英语。有没有办法有一个 if 语句来将 www.french.com/one 指向 www.french.com/#/one，同时保持英语重定向的顺序？

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:07:42.003

不与`Redirect`. 但是可以使用 mod_rewrite。

```
RewriteEngine On
RewriteBase /

RewriteRule ^one$ /#/one [R,L,NE] 
```

# java - 带有本机 JS 的 GWT JSNI 方法：“无效标签”

> ID：10501133
> 
> 赞同：0
> 
> 时间：2012-05-08T14:57:28.220
> 
> 标签：java, javascript, gwt, jsni, codemirror

也许我的问题很容易为您解决，但我在这里坐了几个小时，遇到了以下问题（我已经搜索过了）：

我有一个 Java 方法，其中包含 JavaScript 代码（来自 Google 的 GWT 的 JSNI）来为代码编辑器 CodeMirror2 设置键绑定。当我想用 GWT 编译时，我从 GWT 编译器中得到一个错误：

```
[ERROR] Line 195: invalid label
> "F11": function() { 
```

我的代码如下所示：

```
public final native void setExtraKeysCallback() /*-{
    this.extraKeys = function(editor) {
        "F11": function() {
            // do something
        },
        "Esc": function() {
            // do something
        }
    };
}-*/; 
```

真正奇怪的是，在本机 JS 中，额外的键正在使用这种语法？！我认为问题出在标签语法上，我该如何更改它以与 GWT 一起使用？

谢谢， leX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:01:47.207

您似乎在混合对象文字语法：

```
{ "key": value, "key2", value2 } 
```

… 使用函数表达式语法：

```
function () { } 
```

确定您是否尝试创建简单对象或函数（或**返回**简单对象的函数）并为此使用适当的语法。

# jquery - jQuery简洁的语法解释

> ID：10501135
> 
> 赞同：5
> 
> 时间：2012-05-08T14:57:36.023
> 
> 标签：jquery, syntax

我刚刚从 Syncfusion 下载了 jQuery Succinctly 免费电子书（[此处](http://syncfusion.com/jquerybook)）并开始浏览示例。

我看到很多这样的事情：

```
<script> (function ($)
{
    $('a').mouseenter(
        function () { alert(this.id); });
})(jQuery);
</script> 
```

我不确定作者为什么使用这种语法。`$`对象被传递给匿名函数？为什么？`(jQuery)`匿名函数的作用是什么 ？

这仅仅是避免与其他库冲突的一种方法吗？在我看来，这些例子可以写得更“简洁”:)

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:59:28.843

它创建了一个闭包，`$ === jQuery`即使`$.noConflict()`用于删除全局 jQuery `$`。

这使您可以始终使用`$`而不必关心用户是否也在使用例如原型之类的框架，该框架也使用`$`.

闭包还有一个优点是你的变量/函数不是全局的，除非你明确地将它们设为全局（通过不使用`var`和附加函数到`window`or`this`对象）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:59:30.360

是的，这是避免 jQuery 与其他库冲突的一种简洁方法。它被称为“关闭”。换句话说，变量`$`的作用域是该函数，并且可以在它之外使用而不会造成伤害。

# sql - 在 TSQL 中将日期移至星期一

> ID：10501144
> 
> 赞同：1
> 
> 时间：2012-05-08T14:58:14.417
> 
> 标签：sql, sql-server, tsql

我需要在 TSQL 中创建一个函数，如果传递的日期是星期六或星期日，它将把日期移到星期一。

例如：

*   2012 年 5 月 6 日应返回 2012 年 5 月 7 日
*   2012 年 5 月 12 日应返回 2012 年 5 月 14 日

如果日期不是星期六或星期日，则返回输入日期

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T15:04:37.580

如果日期是星期六或星期日，这将为您提供下一个星期一；否则，它将为您提供您提供的日期。

```
DECLARE @Date DATETIME; SET @Date = GETDATE();

SELECT
    CASE (@@DATEFIRST + DATEPART(dw, @Date)) % 7
        WHEN 0 THEN DATEADD(day, 2, @Date) -- Saturday
        WHEN 1 THEN DATEADD(day, 1, @Date) -- Sunday
        ELSE @Date
    END AS Weekday 
```

**编辑**：包括**Conrad Frix**对@@DATEFIRST 问题的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:01:22.093

您可以在 T-SQL 中使用[DatePart函数。](http://msdn.microsoft.com/en-us/library/ms174420.aspx)对于每个日期，您可以提取日期部分，如果是星期六，则将日期增加两天。如果是星期日，则将日期增加一天。您可以使用[DateAdd](http://msdn.microsoft.com/en-us/library/ms186819.aspx)来增加日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T15:10:06.613

根据您的[SET DATEFIRST](http://msdn.microsoft.com/en-us/library/ms181598.aspx)选项（美国英语默认值为 7，星期日 = 1）：

```
CASE
    WHEN DATEPART(weekday, @dt) = 1 -- Sunday
        THEN DATEADD(day, 1, @dt)
    WHEN DATEPART(weekday, @dt) = 7 -- Saturday
        THEN DATEADD(day, 2, @dt)
    ELSE
        @dt 
END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T15:10:54.440

不依赖的版本`set datefirst`

```
select dateadd(day,
               case datediff(day, '17530101', @D) % 7
                 when 5 then 2
                 when 6 then 1
                 else 0 
               end,
               @D) 
```

同样的东西也许更漂亮。

```
select case datediff(day, '17530101', @D) % 7 
         when 5 then dateadd(day, 2, @D) 
         when 6 then dateadd(day, 1, @D) 
         else @D 
       end 
```

常数`17530101`是星期一，适用于`datetime`。如果您正在使用`date`，您可以使用`00010101`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T15:08:12.910

这个怎么样：

```
SELECT CASE datepart(dw, @date) WHEN 7 THEN @date + 2 WHEN 1 THEN @date + 1 ELSE @date END 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T15:10:08.790

这应该为你做。基本上在星期六增加 2 天或在星期日增加 1 天以将样本日期移至星期一

```
DECLARE @Temp TABLE
(
    dtSample DATETIME
)

INSERT INTO @Temp VALUES ('5/1/2012')
INSERT INTO @Temp VALUES ('5/2/2012')
INSERT INTO @Temp VALUES ('5/3/2012')
INSERT INTO @Temp VALUES ('5/4/2012')
INSERT INTO @Temp VALUES ('5/5/2012')
INSERT INTO @Temp VALUES ('5/6/2012')
INSERT INTO @Temp VALUES ('5/7/2012')
INSERT INTO @Temp VALUES ('5/8/2012')
INSERT INTO @Temp VALUES ('5/9/2012')
INSERT INTO @Temp VALUES ('5/10/2012')
INSERT INTO @Temp VALUES ('5/11/2012')
INSERT INTO @Temp VALUES ('5/12/2012')
INSERT INTO @Temp VALUES ('5/13/2012')
INSERT INTO @Temp VALUES ('5/14/2012')

SELECT 
    dtSample
    ,CASE WHEN DATEPART(WEEKDAY, dtSample) = 7 
        THEN dtSample + 2
        ELSE 
            CASE WHEN DATEPART(WEEKDAY, dtSample) = 1
                THEN dtSample + 1
                ELSE dtSample
            END
     END AS dtConverted             
FROM @Temp 
```

结果：

```
dtSample    dtConverted
2012-05-01 00:00:00.000 2012-05-01 00:00:00.000
2012-05-02 00:00:00.000 2012-05-02 00:00:00.000
2012-05-03 00:00:00.000 2012-05-03 00:00:00.000
2012-05-04 00:00:00.000 2012-05-04 00:00:00.000
2012-05-05 00:00:00.000 2012-05-07 00:00:00.000
2012-05-06 00:00:00.000 2012-05-07 00:00:00.000
2012-05-07 00:00:00.000 2012-05-07 00:00:00.000
2012-05-08 00:00:00.000 2012-05-08 00:00:00.000
2012-05-09 00:00:00.000 2012-05-09 00:00:00.000
2012-05-10 00:00:00.000 2012-05-10 00:00:00.000
2012-05-11 00:00:00.000 2012-05-11 00:00:00.000
2012-05-12 00:00:00.000 2012-05-14 00:00:00.000
2012-05-13 00:00:00.000 2012-05-14 00:00:00.000
2012-05-14 00:00:00.000 2012-05-14 00:00:00.000 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T15:16:23.627

使用[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)和的组合[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)：

```
select  date
,       CASE DATEPART(weekday, date)            
            WHEN 6 THEN DATEADD(day, 2, date) -- Saturday
            WHEN 7 THEN DATEADD(day, 1, date) -- Sunday
            ELSE date 
        END AS NewDate
from @dates
order by date 
```

样本数据：

```
declare @dates table(date datetime);
insert into @dates values('20120401');
insert into @dates values('20120402');
insert into @dates values('20120403');
insert into @dates values('20120404');
insert into @dates values('20120405');
insert into @dates values('20120406');
insert into @dates values('20120407');
insert into @dates values('20120408');
insert into @dates values('20120409');
insert into @dates values('20120410'); 
```

结果：

```
date                    NewDate
2012-04-01 00:00:00.000 2012-04-02 00:00:00.000
2012-04-02 00:00:00.000 2012-04-02 00:00:00.000
2012-04-03 00:00:00.000 2012-04-03 00:00:00.000
2012-04-04 00:00:00.000 2012-04-04 00:00:00.000
2012-04-05 00:00:00.000 2012-04-05 00:00:00.000
2012-04-06 00:00:00.000 2012-04-06 00:00:00.000
2012-04-07 00:00:00.000 2012-04-09 00:00:00.000
2012-04-08 00:00:00.000 2012-04-09 00:00:00.000
2012-04-09 00:00:00.000 2012-04-09 00:00:00.000
2012-04-10 00:00:00.000 2012-04-10 00:00:00.000 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-04-10T10:16:12.263

我在 5 月 8 日扩展了 zimdanen 提供的解决方案，因为开始日期是星期五，但它失败了。

```
DECLARE @FromDate DATETIME

BEGIN

SET @FromDate='04/07/2014'

SELECT
     @FromDate as [StartDate]
   , CASE (@@DATEFIRST + DATEPART(dw, (DATEADD(DD,3,@FromDate)))) % 7
        WHEN 0 THEN DATEADD(day, 2, (DATEADD(DD,3,@FromDate))) -- Saturday
        WHEN 1 THEN 
                    CASE    
                        WHEN DATEPART(dw,@FromDate)=5 Then DATEADD(DD,5,@FromDate) -- Thursday
                        ELSE DATEADD(day, 1, (DATEADD(DD,3,@FromDate))) -- Sunday  
                    END                       

        ELSE 
                    CASE    
                        WHEN DATEPART(dw,@FromDate)=6 Then DATEADD(DD,5,@FromDate) -- Friday
                        ELSE DATEADD(DD,3,@FromDate)
                    END 

    END AS Weekday

END 
```

# android - Andorid 应用程序比 windows 慢的可能原因（帧速率差）

> ID：10501152
> 
> 赞同：3
> 
> 时间：2012-05-08T14:58:34.837
> 
> 标签：android, operating-system, performance

我有一些与我的应用程序相关的问题，该应用程序进行视频解码（用 C 编写）并显示解码帧（我正在使用 NDK）：

1- 在 Android 上（在 1 GHz Cortex A-8 处理器上运行），应用程序的运行速度比 Windows（在 3 GHz 处理器上运行）慢大约 10 倍。我预计慢 3-4 倍，但不会慢 9-10 倍。（基本上帧率非常低）

2-我认为我可能没有针对正确的目标（Cortex A 8）进行编译。所以我编辑了我的 Application.mk 文件。

```
 APP_ABI := armeabi armeabi-v7a mips 
```

我还需要编辑其他 .mk 文件吗？
这种包含是否足以相信我正在为正确的目标进行编译？
（问这个问题是因为即使在包括这个之后我也没有得到任何明显的改进。有没有办法我可以双重确定我正在为正确的目标（Cortex A8）进行编译。

**Android 和 Windows 的性能差异如此之大的可能原因是什么，即使 Android 是一个实时操作系统，Cortex 是一个双问题处理器，支持 Neon 等等。**

***附加信息和我的分析：***

1-我还必须提到我正在使用主线程来更新 UI（调用 Ondraw() ）和另一个线程进行解码。

2-插入一些调试代码后，我可以看到在解码新帧之前多次调用显示函数。我在想这可能是我的帧速率变差的原因；显示器正在窃取所有的 CPU 资源，因此解码变得更慢，并且显示功能一次又一次地显示相同的数据，这看起来质量很差。在 Windows 中，我有单线程进行解码和显示，那里没有主线程。（虽然这是我的猜测，但我不确定结论。）

# php - Magento 显示主要和一级子类别的正确方法

> ID：10501153
> 
> 赞同：0
> 
> 时间：2012-05-08T14:58:40.873
> 
> 标签：php, magento

只是给你一个想法。我有 3 个级别的类别。
顶级 > 子类别 > 子类别的子类别

我不想显示的是子类别的孩子。

下面的代码显示了每个类别。（抱歉，粘贴的格式不太好。）

```
<?php
// ----   PRODUCT NAVIGATION ---- \\
$nav_obj = new Mage_Catalog_Block_Navigation();
$store_cats = $nav_obj->getStoreCategories();
$current_cat = $nav_obj->getCurrentCategory();
?>

<ul>

<?php foreach ($store_cats as $cat):?>
<?php
$ids = strtolower(str_replace(" ", "_", $cat->getName()));
$ids = str_replace("&", "", $ids);
?>

<li class="parent" id="<?php echo $ids; ?>"><?php echo $cat->getName()?>

<ul>
<?php foreach (Mage::getModel('catalog/category')->load($cat->getId())->getChildrenCategories() as $childCategory): ?>
<li><a href="<?php echo $childCategory->getUrl(); ?>">
<?php echo $childCategory->getName()?></a></li>
<?php endforeach; ?>
</ul>
</li>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:30:52.667

我正在做类似的事情。我基本上是通过每个类别并渲染我想要渲染的东西：

```
<?php # get category list ?>
<?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?>

<?php foreach($_categories as $_category) : ?>
    <?php # turn it into the proper model object ?>
    <?php $_category = Mage::getModel('catalog/category')->load($_category->getId()) ?>
    <a href="<?php echo $_category->getUrl() ?>"><?php echo $_category->getName() ?></a>         
    <?php foreach($_category->getChildrenCategories() as $_subCategory) : ?>
         <a href="<?php echo $_subCategory->getUrl() ?>"><?php echo $_subCategory->getName() ?></a>
    <?php endforeach ?>
<?php endforeach ?> 
```

# python - 生成 Joomla 页面的脚本

> ID：10501154
> 
> 赞同：0
> 
> 时间：2012-05-08T14:58:51.130
> 
> 标签：python, mysql, joomla

我正在尝试将标准 html 网页传输到 Joomla！CMS。我将使用 Scrapy，一个 Python 网络爬虫来抓取和解析旧网页。是否有某种方法（最好是在 Python 中）我可以编写一个脚本来将 3000 多个页面转换为 Joomla 的 mySQL 数据库？保持旧样式/css 不是优先事项。

可以在保留旧 URL 的同时执行此操作的答案的奖励积分。

我正在寻找一些方法来做到这一点。有关更多信息，请参阅下面的评论。一个有用的答案看起来像“这不可能”或“这是可能的，但你需要使用 X [其中 X 是一种语言、工具或其他帮助程序]”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:19:31.660

我想我的评论也是一个答案。

是的，这是可能的——Joomla 文章只是 _content 表中的记录。如何抓取页面、保留哪些位以及将哪些内容插入到内容表中完全取决于您。

```
INSERT INTO jos_content 
(`title`, `alias`, `title_alias`, `intro_text`) VALUES
('Title', 'title', 'Title', 'Hello!' ); 
```

将根据您的情况需要填充其他字段，例如类别，但使用后端手动创建文章并查看记录的样子。

# android - Android -- 从 SDK Manager 中选择 API

> ID：10501161
> 
> 赞同：1
> 
> 时间：2012-05-08T14:59:02.637
> 
> 标签：android

我已经下载了 Android SDK（我认为它没有版本，它是标准的）。安装 Android SDK 后，Android SDK Manager 会默认选择 3 个要下载的东西
(1)Android SDK 工具
(2)Android 4.0.3 (API 15) 及其下的东西，如文档、示例等
(3)Google USB驱动程序
但目前我有关于 Android 3 的书，所以我应该取消选择第二个选项，即 Android 4.0.3 (API 15) 并选择 Android 3.0 (API 11) 下的所有内容或保留 Android 4.0.3 对 Android 来说是可以的3.
我知道网上有关于 Android 4.0.3 的教程，所以我为什么要选择 Android 3，因为我觉得通过书本很容易，而且我在这里安装了 Android 3，但仍然没有 Android 4。
那我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:04:09.737

你可以安装一切。我建议安装您想要开发的 API 级别。但是安装所有东西并没有什么坏处（但会浪费磁盘空间）。

旁注：Android 3.0 适用于平板电脑，2.x 适用于较旧的设备，4.x 适用于最新的 Android 智能手机设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:04:06.477

您应该选择您要定位的 API 级别。例如，我正在为 API 级别 7 (Android 2.1.x) 编写一个应用程序，所以我已经在我的机器上安装了那个版本。当然，您可以安装多个 API 级别，因此可以安全地安装任何组合（例如同时安装 3.0.x 和 4.0.4 - 原因参见最后一段）。

一旦您安装了一些 API 级别，Eclipse 将允许您将项目的目标 API 更改为您已安装的任何版本。这同样适用于命令行项目的创建。

除了您使用的版本之外，实际上还有一个很好的用例可以安装比您的目标版本更新的版本：测试。您可以为较新版本的 API 创建一个仿真环境，以确保您的应用程序在 API 级别不匹配时不会崩溃和烧毁。如果我们要扩展上面的示例，要安装的一组合理的级别是 3.0.x、3.2 和 4.0.4。您可以针对 Honeycomb 的初始版本（除非您需要更高版本的任何内容），并使用最新的 Honeycomb 和 Ice Cream Sandwitch 进行测试。

# iphone - RestKit：更改 RKObjectManager 的基本 URL

> ID：10501164
> 
> 赞同：6
> 
> 时间：2012-05-08T14:59:08.690
> 
> 标签：iphone, ios, ipad, restkit

是否可以更改`RKObjectManager`创建后的基本 URL？

我有登录框，并根据昵称决定我应该使用哪个 API 的 URL。如果我`RKObjectManager`在填写昵称/密码后创建，我只能从 RestKit ( [https://groups.google.com/forum/?fromgroups#!topic/restkit/wFNhpCW-URA](https://groups.google.com/forum/?fromgroups#!topic/restkit/wFNhpCW-URA) ) 进行一次调用。如果我创建`RKObjectManager` `viewDidLoad`函数 - 我无法更改 URL。

我的问题有相同的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-18T23:38:37.050

刚刚花了一段时间弄清楚如何在 v0.20 中做到这一点。据我所知，如果不进入 AFNetworking 源代码，您将无法直接更改基本 URL。您*可以*创建一个新的`HTTPClient`并设置它，但我发现这会导致更多问题，大概是因为`HTTPClient`当您设置时RestKit 正在 AFNetworking 上进行一些额外的配置`RKObjectManager`，并且通过直接设置客户端您错过了这一点。

我想出了这个解决方案，即`RKObjectManager`使用新的 baseURL 创建另一个并重新添加描述符。您还需要再次设置序列化和标头类型。

```
NSString *urlString = @"http://www.something.com/api";
RKObjectManager *newManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:urlString]];
[newManager setRequestSerializationMIMEType:RKMIMETypeJSON];
[newManager setAcceptHeaderWithMIMEType:RKMIMETypeJSON];
[newManager addResponseDescriptorsFromArray:[RKObjectManager sharedManager].responseDescriptors];
[newManager addRequestDescriptorsFromArray:[RKObjectManager sharedManager].requestDescriptors];
[RKObjectManager setSharedManager:newManager]; 
```

相关文档：[在 RestKit 中使用多个基本 URL](https://github.com/RestKit/RestKit/wiki/Using-Multiple-Base-URLs-%28and-Multiple-Object-Managers%29)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T09:43:41.870

这是初始化后更改 RestKit 的方法`baseURL`：

```
[RKObjectManager sharedManager].client.baseURL = [RKURL URLWithString:newBaseUrlString]; 
```

来自 RestKit 文档的通知：

> 更改 baseURL 具有导致重新构建 requestCache 实例的副作用。缓存是按主机维护的。

我使用它，它工作正常:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-31T03:36:04.237

当心！

我使用了 RestKit 2.0 的公认答案，但不幸的是，这导致在 restkit 中难以调试崩溃。起作用的只是将所有描述符创建和其他对象管理器设置封装到一个方法中，并在调用 [RKObjectManager setSharedManager:newManager] 之前使用新的对象管理器对象调用它；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T14:46:55.327

我认为没有解决方案。RestKit 在内部使用基本 URL，不能更改。

# linux-kernel - Linux 和 KERN_PROC

> ID：10501174
> 
> 赞同：1
> 
> 时间：2012-05-08T14:59:54.560
> 
> 标签：linux-kernel, centos, sysctl

我正在尝试通过 sysctl 接口获取另一个进程的信息

```
 int mib[4] = {0};
   size_t len = sizeof( mib ) / sizeof( int );
   struct kinfo_proc kp;

   mib[0] = CTL_KERN;
   mib[1] = KERN_PROC;
   mib[2] = KERN_PROC_PID;
   mib[3] = 3027;

   sysctl(mib, 4, &kp, &len, NULL, 0);

 Error:
test.cpp: In function ‘int main(int, char**)’:
test.cpp:13:22: error: aggregate ‘main(int, char**)::kinfo_proc kp’ has incomplete type and cannot be defined
test.cpp:16:13: error: ‘KERN_PROC’ was not declared in this scope 
```

有一个很好的外观，但没有明确的答案。linux是否`KERN_PROC`通过`sysctl`系统调用支持。

发行版：Centos 6.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:48:25.020

看起来您正在尝试使用特定于 BSD/OS X 的内核接口。

由于明显的原因，这在 Linux 上不起作用。

查看 include/linux/sysctl.h 以了解支持的**内容。**

# java - 获取 NoClassDefFoundError：com.mysql.jdbc.Driver

> ID：10501181
> 
> 赞同：0
> 
> 时间：2012-05-08T15:00:25.727
> 
> 标签：java, mysql, exception, jdbc, noclassdeffounderror

我目前正在用 java 编写一个 jdbc 客户端-服务器套接字应用程序。我在初始化 jdbc 时遇到了一些麻烦，因为我没有使用 ide，只是一个文本编辑器和 jdk。我已将 jdbc 驱动程序放在我的 jdk 和 jre 类路径 C:\Program Files\Java\jdk1.6.0_20\jre\lib\ext 和 \jre\lib\ext 中。我还将 jar 重命名为 com.mysql.jdbc.driver ，但我仍然没有运气。这是找不到驱动程序的问题还是其他问题？

这是我的错误：

```
C:\Users\imallin\My Documents>java Provider
Waiting for connection
Connection received from 127.0.0.1
server>Hi welcome to the Cyfieithu Eadar-Theangachadh translation server, please
enter a command. Type cmd to see a list of commands
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at Provider.insertData(Provider.java:82)
    at Provider.run(Provider.java:40)
    at Provider.main(Provider.java:118) 
```

这是我的代码：

```
import java.io.*;
import java.net.*;
import java.util.Scanner;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Provider{
ServerSocket providerSocket;
Socket connection = null;
ObjectOutputStream out;
ObjectInputStream in;
String message;
Connection con;
Provider(){}
void run()
{
        Console c = System.console();
    if (c == null) {
        System.err.println("No console.");
        System.exit(1);
    }
    try{
        //1\. creating a server socket
        providerSocket = new ServerSocket(2004, 10);
        //2\. Wait for connection
        System.out.println("Waiting for connection");
        connection = providerSocket.accept();
        System.out.println("Connection received from " + connection.getInetAddress().getHostName());
        //3\. get Input and Output streams
        out = new ObjectOutputStream(connection.getOutputStream());
        out.flush();
        in = new ObjectInputStream(connection.getInputStream());
                        sendMessage("Hi welcome to the Cyfieithu Eadar-Theangachadh translation server, please enter a command. Type cmd to see a list of commands");
        //4\. The two parts communicate via the input and output streams
        do{
            try{
                                    insertData();

            message = (String) in.readObject();
            System.out.println("client>" + message);
                                if (message.equals("register"))
                    sendMessage("first name?");
                    String firstName = (message);
                    sendMessage("first name = " + firstName);
                    insertData();
                                if (message.equals("listlanguages"))
                                sendMessage("English \n Thai \n Geordia \n Gaelic \n Welsh \n Gaelic \n Urdu \n Polish \n Punjabi \n Cantonese \n Mandarin");
                    if (message.equals("bye"))
                    sendMessage("bye");
                    }
            catch(ClassNotFoundException classnot){
                System.err.println("Data received in unknown format");
            }
            catch (Exception e){
            System.err.println("Error: " + e.getMessage());
            }
        }while(!message.equals("bye"));
    }
    catch(IOException ioException){
        ioException.printStackTrace();
    }
    finally{
        //4: Closing connection
        try{
            in.close();
            out.close();
            providerSocket.close();
        }
        catch(IOException ioException){
            ioException.printStackTrace();
        }
    }
}
    private void insertData()
{

    try
    {
        Class.forName("com.mysql.jdbc.Driver");

        con = DriverManager.getConnection(
                "jdbc:mysql://localhost/translator","root","");

String sql = "Insert INTO users (ID, firstName) VALUES ('123','123')";

        Statement statement = con.createStatement();

        statement.execute(sql);

    }
                    catch (Exception e){
            System.err.println("Error: " + e.getMessage());
            }
    }

void sendMessage(String msg)
{
    try{
        out.writeObject(msg);
        out.flush();
        System.out.println("server>" + msg);
    }
    catch(IOException ioException){
        ioException.printStackTrace();
    }
}

public static void main(String args[])
{
    Provider server = new Provider();
    while(true){
        server.run();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:21:43.530

最终，您的 jdbc 类路径未设置。

这就是我所做的（不好的做法）

提取你的jar文件。（假设您在主目录中工作〜，提取jar文件的目录名称是odbc）然后将您的类路径设置为

`export CLASSPATH=~/odbc:`

（不要忘记`:`在路径后添加；-)）

哦，无法意识到您正在使用 Windows 机器。然后将环境变量（如果不存在则创建）CLASSPATH 设置为`c:\odbcdir`

或其他方式是使用`java -cp pathToJAR.jar Main`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:25:16.593

就像其他答案已经暗示的那样，jdbc Jar 不在您的类路径中。

要解决此问题，您需要在运行 Java 主文件时声明它应该使用该 Jar，方法是：

```
java -cp "nameOfJar.jar" Provider 
```

这是假设你的 jar 和你的 Provider 文件在同一个目录下，如果不是，你应该指定它的路径。

这完全是可选的，但我喜欢有一个名为“lib”的目录，其中放置了运行项目所需的所有 jar，然后您可以通过执行以下操作添加到类路径：

```
java -cp "./lib/*;." NameOfJavaClassWithMain 
```

最终，您可能最终需要将几个目录或 jars 添加到类路径中，您可以使用`;`( `:`in linux) 分隔符来执行此操作，例如：

```
java -cp "./lib/*;./conf/configurationFile.properties;." NameOfJavaClassWithMain 
```

如果您的 .class 不在其中一个罐子上，您可能必须将本地目录添加到您的类路径：

```
java -cp "./lib/*;." NameOfJavaClassWithMain 
```

如果你的类有一个包声明（你应该），你需要通过完全分类的名称（包+类名）来引用这个类，如下所示：

```
java -cp "./lib/*;." my.package.NameOfJavaClassWithMain 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:23:07.280

MySQL 驱动程序 jar 不在类路径中。您需要通过使用 to 的`-cp`参数来解决此问题`java`。

# javascript - 是否可以让 JS 函数的返回取决于用户操作？

> ID：10501183
> 
> 赞同：4
> 
> 时间：2012-05-08T15:00:37.113
> 
> 标签：javascript, jquery

是否可以让 JS 函数的返回取决于用户操作？

所以假设我有函数a和函数b。

函数 b 调出一个带有两个按钮的对话框，一个返回 true，一个返回 false。我可以从 a 调用 b 并强制 a 在继续操作之前等待 b 返回吗？

示例代码：

```
function a(){
    if(b()){
        do x
    }else{
        do y
    }
}

function b(){
$("#anElement").dialog({
    title: "This is a Dialog",
    buttons:{
        "Yes": function(){
            //do some stuff
            $(this).dialog("close");
            return true;
        },
        Cancel: function(){
            //do some stuff
            $(this).dialog("close");
            return false;
        }
    }
});
} 
```

我想这很像一个确认，但我想在它之上构建不仅仅是是/否。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:03:31.470

不，您不能停止函数的执行（好吧，您可以使用带有中断条件的无限 while 循环，但这是一种糟糕的做法）。但是，您可以将 A 拆分为两个函数并从函数 B 调用函数 A 的另一半。您甚至可以将返回函数传递给函数 B 并调用它，并传入用户操作的值。

**例子：**

```
function A() {
    // do stuff
    B(finishA);
}

function B(callback) {
    if(someCondition) {
        callback(true);
    } else {
        callback(false);
    }
}

function finishA(userInput) {
    if(userInput) {
        // do something if the user clicked okay
    } else {
        // do something if the user clicked cancel
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:09:08.047

一种解决方案是...

```
function a () {
    b( function () {
        // do x           
    }, function () {
        // do y
    });
}

function b ( fn1, fn2 ) {
    $( "#anElement" ).dialog({
        title: "This is a Dialog",
        buttons: {
            "Yes": function () {
                //do some stuff
                $( this ).dialog( "close" );
                fn1();
            },
            "Cancel": function () {
                //do some stuff
                $( this ).dialog( "close" );
                fn2();
            }
        }
    });
} 
```

因此，您将两个函数传递给`b`. 如果“是”按钮被激活，则调用第一个函数，如果“取消”按钮被激活，则调用第二个函数。

此模式使您可以直接在`a`函数内部定义行为，而不必将其附加到`b`函数中。

# wordpress - Mailchimp 表单使用函数而不是短代码传入灯箱表单插件

> ID：10501184
> 
> 赞同：0
> 
> 时间：2012-05-08T15:00:37.210
> 
> 标签：wordpress, wordpress-theming

WordPress 插件有两个，一个是表单表单灯箱插件，另一个是 MailChimp 列表订阅表单。表单灯箱的简码工作如下：

[formlightbox_call title="lightbox form" class="1322379893472"]点击这里[/formlightbox_call] 和 [formlightbox_obj id="1322379893472" style="" onload="false"][form shortcode here][/formlightbox_obj]

mailchimp 的简码是 [mailchimpsf_form]。现在我必须在单击“单击此处”文本时在灯箱弹出窗口中打开 mailchimp 表单。所以会变成这样：

```
[formlightbox_call title="lightbox form" class="13223798934721"]Click here[/formlightbox_call]

[formlightbox_obj id="13223798934721" style="" onload="false"][mailchimpsf_form][/formlightbox_obj] 
```

上面也工作正常。问题来了：

如果我必须使用这些插件的功能在 php 文件中做同样的事情： 1\. formlightbox_call 短代码正在调用以下函数：

```
$a=array('title'=>"lightbox form", 'class'=>"1322379893472");
        echo fl_shortcode_call( $a,"Click here"); 
```

2\. formlightbox_obj 正在调用下面的函数

```
$b=array('id'=>"1322379893472", 'style'=>"", 'onload'=>"false");
        $e='Testing the code';
        echo fl_shortcode_obj($b,$e);?> 
```

上面的函数也可以工作，但我必须将 mailchimp 表单传递给有问题的第二个函数。

像这样，或者请让我知道其他方式，以便它起作用： $b=array('id'=>"1322379893472", 'style'=>"", 'onload'=>"false"); $e=; 回声 fl_shortcode_obj($b,$e);?>

此代码不起作用。请帮助我使用 PHP 文件中的函数将 mailchimp 表单传递给灯箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:32:40.707

由于 mailchimp 函数没有返回任何值，它直接使用 ob_start() 和 ob_end_clean() 来处理所有内容。所以我创建了现有函数的新函数，但将输出放在 1 个变量中并从函数返回变量。因此能够将函数的返回存储在变量中并在灯箱中使用。

# ruby - 如何在 Ruby/Rails 中节省 CPU 周期？

> ID：10501187
> 
> 赞同：1
> 
> 时间：2012-05-08T15:00:44.840
> 
> 标签：ruby, ruby-on-rails-3, performance, performance-testing

在 Ruby Web 应用程序中节省 CPU 周期的方法有哪些？随着我的项目不断扩大，渲染、运行方法、数据库查询的平均时间也在增加。我认为60ms的平均值很高。有什么设计指南可以保持机器代码的紧凑和紧凑吗？喜欢 - 完全面向对象？使用更多变量和内存来避免重复迭代等？合并数据库查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:06:28.623

在实际开始调整所有内容之前尝试找出您的瓶颈。

你确定问题出在CPU上？它会是你的存储系统吗？是你的方法吗？是你的数据库吗？你在你的数据库中使用 idices 吗？你在你的数据库中使用更多你需要的索引吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:07:24.380

您的问题没有一站式解决方案。

您应该针对分析器运行您的应用程序，这将确定您的软件的哪个点占用最多的资源。优化该部分，然后重复操作，直到您对结果满意为止。

有很多测量性能的工具，ruby-prof、gperftools 和 newrelic 之类的东西，在 google 上查看这个关键字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:31:05.217

您是否研究过[缓存](http://guides.rubyonrails.org/caching_with_rails.html)？它是加速您的 Web 应用程序并使其扩展到高流量的一个非常重要的工具，并且在许多情况下，它比常规代码优化效率高出几个数量级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:53:05.810

除了分析代码以找到实际上很慢的部分的（正确）答案之外，您还可以查看对于您的用例来说可能更快的替代 Ruby 实现。

看：

*   [http://jruby.org/](http://jruby.org/)
*   [http://rubini.us/](http://rubini.us/)

用于报告比标准 1.9 解释器更快的两个替代方案。

# ruby-on-rails - 使用 HAML 在 Rails 中的 Form_for 问题：http://localhost:3000/bulkbuy_orderform: NilClass:Class 的未定义方法“model_name”

> ID：10501193
> 
> 赞同：0
> 
> 时间：2012-05-08T15:00:59.420
> 
> 标签：ruby-on-rails, methods, haml, models, undefined

[https://gist.github.com/2635937](https://gist.github.com/2635937)

Mac OS X 上的 Rails 3.0.7。问题出现在视图中，其中

```
= form_for @bulk_order do |f| 
```

是。我不认为 HAML 是一个问题，但我是新手。在一个新的/测试应用程序中做了一个脚手架。一切看起来都很好。控制器是直截了当的。认为问题必须在模型中。想法？

由于这是用于用户提交的表单，您可以在要点中看到我没有包含活动记录::base，因为我不希望将这些数据保存到数据库中。

任何输入表示赞赏。要点是 bulk_order 模型。

# apache - Solr：未定义的字段文本

> ID：10501197
> 
> 赞同：0
> 
> 时间：2012-05-08T15:01:12.450
> 
> 标签：apache, solr, nutch

在运行最新（05/2012）基于 Solr 的 n Nutch 时，按照 Apache 的官方教程，我得到：

```
HTTP ERROR 400

Problem accessing /solr/select. Reason:

    undefined field text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:17:44.587

原来，我使用了错误的搜索语法。你必须使用

```
*:* 
```

或者

```
xmlfield:searchtext 
```

熟悉 schema.xml 文档也是一个好主意。

# silverlight - CellEditEnded 发生得太晚了

> ID：10501201
> 
> 赞同：1
> 
> 时间：2012-05-08T15:01:23.307
> 
> 标签：silverlight, data-binding, datagrid, pagedcollectionview

当用户更改单元格 ( `DataGridCheckBoxColumn`) 的值，然后单击数据网格之外的另一个 UI 元素时，另一个 UI 元素的单击事件会在数据网格 CellEditEnded 之前触发。

这是一个问题，因为在我的情况下，其他 UI 元素是一个按钮，它更改了提供数据网格的 PagedCollectionView 的 Filter 属性（本质上它模拟了要编辑的行的“移动到第 2 页”）抛出的异常是：

在 AddNew 或 EditItem 事务期间不允许“过滤器”。

在设置过滤器之前，如何强制完成 EditItem（或 AddNew）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:00:00.270

我不知道**silverlight**，但在**WPF**中，您可以尝试在设置过滤器之前提交事务：

```
if ((collection as IEditableCollectionView).IsAddingNew) (collection as IEditableCollectionView).CommitNew(); // or .CommitEdit(); 
```

# ddl - Where can I find rules for constructing DDL commands from ERD?

> ID：10501202
> 
> 赞同：0
> 
> 时间：2012-05-08T15:01:23.977
> 
> 标签：ddl, erd

Is there anywhere list of the rules to convert ERD to DDL commands? I don't want to do it in an intuitive way; I need all-cases-handling rules, so I could write code that will do it.

(I **don't** want **tool** that do this; I want the rules to be so generic and handle all cases, that even stupid computer (with samrt programmer) could do it himself while it following the rules).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:25:32.047

Here is some info about it: [http://www.javaguicodexample.com/erdrelationalmodelnotes.html](http://www.javaguicodexample.com/erdrelationalmodelnotes.html).

# css - 内容未加载？

> ID：10501204
> 
> 赞同：0
> 
> 时间：2012-05-08T15:01:35.153
> 
> 标签：css, asp.net-mvc-3, razor, background-image

我有 MVC 3 应用程序。
在其中一个 div 中，我设置了背景图像。

```
#wrapper {
width: 960px;
margin: 0px auto;
background: url(../../Content/images/img01.jpg) no-repeat center top;
} 
```

在 _Layout.cshtml 我这样写：

```
<div class="wrapper">
  <!-- Some Items -->
</div> 
```

但是没有显示图像。如果我写这个：

```
<img src="../../Content/images/img01.jpg"/> 
```

Html 页面显示此图像正确。

为什么此图像未设置在 div 的背景上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:06:12.760

包装器是一个类。

您已将 CSS 定义为 # 这是一个 ID

编辑：

这样才有意义，您的代码必须是：

```
#wrapper {
   width: 960px;
   margin: 0px auto;
   background: url(../../Content/images/img01.jpg) no-repeat center top;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:05:29.747

您是否从 CSS 文件的上下文中确认图像的路径是有效的？如果您的 CSS 文件与视图不在同一目录中，则图像路径可能从 CSS 文件的位置无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:08:20.183

更改此代码

```
background: url(../../Content/images/img01.jpg) no-repeat center top; 
```

和

```
 background-image:url('/Content/images/img01.jpg') no-repeat center top; 
```

# powershell - 使用 PowerShell 查询 CRM 2011 SOAP 端点

> ID：10501209
> 
> 赞同：2
> 
> 时间：2012-05-08T15:01:45.630
> 
> 标签：powershell, dynamics-crm-2011, dynamics-crm

我正在尝试通过 PowerShell 和 SOAP 查询 CRM 2011。以下 PowerShell 脚本应返回联系人的全名，但我什么也没得到。

```
$xml = "<?xml version='1.0' encoding='utf-8'?>"
$xml += "<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>"
$xml += "<soap:Body>"
$xml += "<Retrieve xmlns='http://schemas.microsoft.com/xrm/2011/Contracts/Services'>"
$xml += "<entityName>contact</entityName>"
$xml += "<id>12345678-1234-1234-1234-123456789012</id>"
$xml += "<columnSet xmlns:q1='http://schemas.microsoft.com/xrm/2011/Contracts' xsi:type='q1:ColumnSet'>"
$xml += "<q1:Attributes>"
$xml += "<q1:Attribute>fullname</q1:Attribute>"
$xml += "<q1:Attribute>telephone1</q1:Attribute>"
$xml += "</q1:Attributes>"
$xml += "</columnSet>"
$xml += "</Retrieve></soap:Body></soap:Envelope>"

$url="http://crmserver.company.com/Organization/XRMServices/2011/Organization.svc/web"
$http_request = New-Object -ComObject Msxml2.XMLHTTP
$http_request.Open('POST', $url, $false)
$http_request.setRequestHeader("SOAPAction",     "http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Retrieve");
$http_request.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
$http_request.setRequestHeader("Content-Length", $xml.length);
$http_request.send($xml);
$http_request.responseText 
```

这是回应：

```
$http_request.responseText

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body><RetrieveResponse xmlns="http://schemas.microsoft.com/xrm/2011/Contracts/Services">
<RetrieveResult xmlns:a="http://schemas.microsoft.com/xrm/2011/Contracts" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<a:Attributes xmlns:b="http://schemas.datacontract.org/2004/07/System.Collections.Generic">
<a:KeyValuePairOfstringanyType>
<b:key>accountid</b:key>
<b:value i:type="c:guid" xmlns:c="http://schemas.microsoft.com/2003/10/Serialization/">12345678-1234-1234-1234-123456789012</b:value>
</a:KeyValuePairOfstringanyType>
</a:Attributes>
<a:EntityState i:nil="true"/><a:FormattedValues xmlns:b="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
<a:Id>12345678-1234-1234-1234-123456789012</a:Id><a:LogicalName>account</a:LogicalName>
<a:RelatedEntities xmlns:b="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
</RetrieveResult>
</RetrieveResponse> 
```

我只是不知道我做错了什么。为什么代码不会返回“全名”，它在 columnSet 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:29:19.310

尝试修改这部分请求：

```
$xml += "<columnSet xmlns:q1='http://schemas.microsoft.com/xrm/2011/Contracts' xsi:type='q1:ColumnSet'>"
$xml += "<q1:Columns xmlns:c='http://schemas.microsoft.com/2003/10/Serialization/Arrays'>"
$xml += "<c:string>fullname</c:string>"
$xml += "<c:string>telephone1</c:string>"
$xml += "</q1:Columns>" 
```

您可以在此处查看其他一些 SOAP 示例：http: [//code.msdn.microsoft.com/CRM-Online-2011-WebServices-14913a16](http://code.msdn.microsoft.com/CRM-Online-2011-WebServices-14913a16)

# javascript - 更平滑的固定浮动

> ID：10501214
> 
> 赞同：0
> 
> 时间：2012-05-08T15:02:05.243
> 
> 标签：javascript, jquery, html, css, positioning

[我为我的新站点](http://adamlynch.ie)创建了一个水平仪。

我使用了[固定浮动](http://net.tutsplus.com/tutorials/html-css-techniques/creating-a-floating-html-menu-using-jquery-and-css/)的想法，但试图将其限制在管的范围内。它并不完美，但它得益于页面的简短性。

# 我怎样才能使它更平滑（特别是在缓慢滚动时）？

此外，当我使用 iPhone 滚动时，它可以工作，但只有在我*完成*滚动后才有效，而不是*在*我滚动时。这只是 iPhone 滚动机制的一个限制，还是有办法解决这个问题？

* * *

### 的[HTML](http://adamlynch.ie)：

```
<div id="spirit_level"> 
    <div id="shimmery"></div> <!-- just for y gradient -->
    <div id="shimmerx"></div> <!-- just for x gradient -->
    <div id="bumps"></div> <!-- just for another overlay -->

    <div id="tube"> 
        <div id="bubble"></div> 
        <div id="overside"></div> <!-- glass + line markings -->
    </div>
</div>
<div id="spirit_shadow"></div> 
```

### 的[CSS](http://adamlynch.ie/styles/main.css)：

水平仪采用固定定位放置，里面的一切都是绝对定位的（相对于水平仪）。

### [Javascript](http://adamlynch.ie/js/home.js)：_

```
/* START: init spirit_level/bubble */
var bubble_h = 53, tube_h = 242, 
doc_h = parseInt($(document).height()),
viewport_h = parseInt($(window).height()),
scrollDepth = $(document).scrollTop(),
orig_scrollDepth = scrollDepth,
tube_top = viewport_h/2 - tube_h/2,
center = 0;

/*center the tube and bubble:
$('#tube').css('top', tube_top+'px')
    .addClass('bubble_prep');

placeBubble(1);
/* END: init spirit_level/bubble */

$(window).unbind("scroll").scroll(function () {
    placeBubble(0);
}) 
```

`placeBubble()`功能：

```
function placeBubble(first_time)
{
    scrollDepth = $(document).scrollTop();
    if(first_time)
    {
        $('#bubble').css('top', center + 'px');                     
    }

    temp = ((center - (scrollDepth - orig_scrollDepth))/viewport_h)*100;

    $('#bubble').css('top', (temp<-50?-50:(temp>50?50:temp)) +'%')
        .animate(
            {top: (center/viewport_h)*100+'%'},
            {duration:800,queue:false},
            {
                step: function(now, fx) {
                    //this is never called, don't know why
                    alert(now);
                }
            }, function(){
                /*
                    Should I do the following?
                    orig_scrollDepth = $(document).scrollTop();*/
            });

            /*Without the next line, the bubble slides down from the top of the 
            tube on any length scroll in any direction*/
            orig_scrollDepth = $(document).scrollTop();
     }
} 
```

* * *

### 编辑：

哇，我刚刚检查了三星 Galaxy S1（标准网络浏览器）。卷尺的 z-indexing 和绝对定位是灾难性的失败。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:17:00.867

也许你的使用`.css`让它变得神经质？`.animate`可能是一个合适的替代品，具有非常快的设置，以便它顺利滑到临时起始位置，然后慢慢滑回中心。

```
$('#bubble').animate({'top': (temp<-50?-50:(temp>50?50:temp)) +'%'},{duration:200})
    .animate( [...] 
```

# c# - 如何从 .msi 安装程序运行特定的 exe 文件

> ID：10501217
> 
> 赞同：1
> 
> 时间：2012-05-08T15:02:13.903
> 
> 标签：c#, .net, visual-studio-2010, installation, windows-installer

我已经使用 Visual Studio 安装程序为项目 (App.prj) 创建了 .msi 文件，但为了运行已安装的 App.exe，我必须再安装一个运行 App.exe 所需的 Dependent.exe 文件。
如何在 App.msi 中运行 Dependent.exe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:05:09.597

自定义操作

[http://www.advancedinstaller.com/user-guide/custom-actions.html](http://www.advancedinstaller.com/user-guide/custom-actions.html)

[http://www.codeproject.com/Articles/335516/Custom-Action-in-Visual-Studio-setup-projects](http://www.codeproject.com/Articles/335516/Custom-Action-in-Visual-Studio-setup-projects)

# c# - xmlTextReader.ReadInnerXml() 将我的整个 XML 文档拉入一个变量

> ID：10501219
> 
> 赞同：0
> 
> 时间：2012-05-08T15:02:21.503
> 
> 标签：c#, xmltextwriter, xmltextreader

我正在创建要在后续步骤中读取的 XML 索引文件。我有可变长度数组，我将它们写入一个文件。

有一个问题，我认为它在阅读器代码内部。由于某种原因，TimeStamp 和 Long 元素被正确读入数组，但 Lat 和 VideoFile 元素被跳过。由于某种原因，他们的 reader.nodetype 永远不会返回。read() 方法获取它们的唯一方法是在 TEXT 节点类型中，然后它只显示 innerxml 值，这对我来说没用。

保存 XML 文件的示例后，下面的代码应该可以完全运行。

再次感谢堆栈用户。

## 创建

```
 using System.Xml;        
    XmlTextWriter xmlwriter = new XmlTextWriter(file, null);
    xmlwriter.Formatting = Formatting.Indented;
    //xmlwriter.Indentation = 4;
    xmlwriter.WriteStartDocument();
    xmlwriter.WriteStartElement("Index");

    for (int i = 0; i < malLat.Count; i++)
    {
        xmlwriter.WriteStartElement("Marker");

        xmlwriter.WriteStartElement("TimeStamp");
        xmlwriter.WriteString(malTimes[i].ToString());
        xmlwriter.WriteEndElement();

        xmlwriter.WriteStartElement("Lat");
        xmlwriter.WriteString(malLat[i].ToString());
        xmlwriter.WriteEndElement();

        xmlwriter.WriteStartElement("Long");
        xmlwriter.WriteString(malLong[i].ToString());
        xmlwriter.WriteEndElement();

        xmlwriter.WriteStartElement("VideoFile");
        xmlwriter.WriteString(malVideoTitle[i].ToString());
        xmlwriter.WriteEndElement();

        xmlwriter.WriteEndElement();
    }
    xmlwriter.WriteEndElement();
    xmlwriter.WriteEndDocument();
    xmlwriter.Close(); 
```

## 阅读

```
using System.Xml;  
XmlTextReader lxmlReader = new XmlTextReader(mstrIndexFile + ".xml");
lxmlReader.WhitespaceHandling = WhitespaceHandling.None;

while (lxmlReader.Read())
{
    if (lxmlReader.NodeType == XmlNodeType.Element)
    {
        if (lxmlReader.Name == "TimeStamp")
        {
            malTimes.Add(lxmlReader.ReadInnerXml().ToString());
        }
        else if (lxmlReader.Name == "Lat")
        {
            malLat.Add(lxmlReader.ReadInnerXml().ToString());
        }
        else if (lxmlReader.Name == "Long")
        {
            malLong.Add(lxmlReader.ReadInnerXml().ToString());
        }
        else if (lxmlReader.Name == "VideoFile")
        {
            malVideoTitle.Add(lxmlReader.ReadInnerXml().ToString());
        }
    }
}

lxmlReader.Close(); 
```

## XML 文档示例

```
 <Index>
      <Marker>
        <TimeStamp>2011-7-17 23:18:39</TimeStamp>
        <Lat>-121.261953323166</Lat>
        <Long>43.0594755392741</Long>
        <VideoFile>C:\Users\kpenner\Desktop\Video Dev\1_1.wmv</VideoFile>
      </Marker>
      <Marker>
        <TimeStamp>2011-7-17 23:18:40</TimeStamp>
        <Lat>-122.260755</Lat>
        <Long>46.05878</Long>
        <VideoFile>C:\Users\kpenner\Desktop\Video Dev\1_1.wmv</VideoFile>
      </Marker>
    </Index> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:22:13.780

XmlTextReader 的问题是只进阅读器。当您对叶节点上的阅读器执行 ReadInnerXml 时，它会移动到下一个元素（请参阅 [http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readinnerxml.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readinnerxml.aspx)）。因此，在这种情况下，当您点击 TimeStamp 并执行 ReadInnerXml 时，阅读器会将其移至 Lat 元素类型，因为这 4 个元素是叶节点。然后在 while 循环中再次阅读，这会将阅读器移动到 Lat 的 Text 元素。由于您只检查 Element 类型，因此它会自行运行，直到您点击 Long ，然后出于同样的原因中断 VideoFile。

这是另一个 SO 问题的链接，其答案可能对您的解决方案有所帮助： [XMLTextReader not reading an element content](https://stackoverflow.com/questions/3920071/xmltextreader-not-reading-an-element-content)。

# c# - Windows Phone epub 阅读器

> ID：10501222
> 
> 赞同：0
> 
> 时间：2012-05-08T15:02:29.140
> 
> 标签：c#, .net, windows-phone-7, epub

我正在尝试构建一个必须允许用户阅读 epub 格式的电子书的 wp7 应用程序。由于没有任何可用的库来读取 Windows 手机上的 epub 文件，我正在尝试创建一个。所以我必须解压缩文件然后解析它。
问题是我无法解压缩 epub 文件。我正在使用`SharpZipLib.WindowsPhone7.dll`，但出现异常：

> 尝试访问该方法失败：System.IO.File.OpenRead(System.String)

在这条线上：

```
ZipInputStream s = new ZipInputStream(File.OpenRead(path_epubfile)); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:46:50.813

这将取决于内容的获取方式。这里有三个可能的选择；

**选项 1**：如果使用“内容”的构建操作将内容添加到您的项目中，您可以使用`StreamResourceInfo`类（在`System.Windows.Resources`命名空间中）获取流

```
 StreamResourceInfo info = Application.GetResourceStream(new Uri("MyContent.txt", UriKind.Relative));
  using (info.Stream) {
    // Make use of the stream as you will
  } 
```

**选项 2**：如果您已将其添加到项目中并将构建操作设置为“嵌入式资源”，那么您需要使用`GetManifestResourceStream()`

```
using (Stream stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("ProjectName.MyContent.txt")) {
  // Make use of stream as you will
} 
```

注意：您需要将“ProjectName”替换为您的项目名称。因此，如果您的项目是“EPubReader”并且嵌入式资源是“Example.txt”，您需要将“EPubReader.Example.txt”传递给`GetManifestResourceStream()`. 您可以使用`GetManifestResourceNames()`来查看可用的资源。

**选项 3**：如果您在运行时获取了内容，它将存储在`IsolatedStorage`.

```
using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication()) {
  using (IsolatedStorageFileStream stream = store.OpenFile("MyContent.txt", FileMode.Open)) {
    // Make use of stream as you will
  }
} 
```

# android - 如何根据特定条件为列表项赋予不同的样式？

> ID：10501223
> 
> 赞同：0
> 
> 时间：2012-05-08T15:02:29.410
> 
> 标签：android, android-layout, android-listview

我正在使用适配器构建字符串列表，如何根据特定条件将不同的布局属性应用于这些项目？

例如，假设您需要检查列表项的文本是否包含特定单词，然后根据测试结果，您想要增加或减少其边距（如果这有任何意义： D)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:06:05.247

您可以使用[ContextThemeWrapper](http://developer.android.com/reference/android/view/ContextThemeWrapper.html)根据您的特定条件提供不同的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:43:10.667

创建一个如下所示的适配器。这里只更改了背景颜色，请尝试根据您的情况更改那里的布局....

```
 public class SpecialAdapter extends SimpleAdapter {
    private int[] colors = new int[] { 0x30FF0000, 0x300000FF };

    public SpecialAdapter(Context context, List<HashMap<String, String>> items, int resource, String[] from, int[] to) {
        super(context, items, resource, from, to);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      View view = super.getView(position, convertView, parent);
      int colorPos = position % colors.length;
      view.setBackgroundColor(colors[colorPos]);
      return view;
    }
} 
```

有关更多详细信息，请查看此链接[http://eureka.ykyuen.info/2010/03/15/android-%E2%80%93-applying-alternate-row-color-in-listview-with-simpleadapter/](http://eureka.ykyuen.info/2010/03/15/android-%E2%80%93-applying-alternate-row-color-in-listview-with-simpleadapter/)

# c++ - 无法弄清楚浴室同步的逻辑

> ID：10501231
> 
> 赞同：-4
> 
> 时间：2012-05-08T15:02:56.753
> 
> 标签：c++, operating-system, pthreads, semaphore

> **可能重复：**
> [浴室同步和线程队列](https://stackoverflow.com/questions/10474566/bathroom-synchronization-and-queue-of-threads)

我在堆栈中查看了类似的问题并使用了谷歌，他们没有帮助我回答我的问题。对于家庭作业，我得到了浴室同步问题。共用浴室，男性在其中时女性不能使用，反之亦然。我想弄清楚的是，如果异性在浴室里，如何停止和重新启动线程。到目前为止，我有几个条件，如果没有异性在那里，如果没有，我告诉信号灯等待。然后，如果您的性别中没有一个人留在洗手间，那么离开时让另一个性别进入（信号灯走）。我不知道我是否在何时锁定线程或让信号量等待时遇到问题。这是我的代码。

//我的变量

```
 sem_t male;
 sem_t female;
 int maleInBath;
 int femaleInBath;
 pthread_mutex_t coutMutex; 
```

//初始化变量

```
void personInitGlobals()
{
   // LEAVE THIS STATEMENT                                                 
   pthread_mutex_init(&coutMutex, NULL);

   // TODO: Complete this function                                         
   int init=0;
   maleInBath=0;
   femaleInBath=0;
   sem_init(&male, 0, init);
   sem_init(&female, 0, init);
} 
```

//进入卫生间

```
void personEnterRestroom(int id, bool isFemale)
 {
   // LEAVE THESE STATEMENTS                                               
    pthread_mutex_lock(&coutMutex);
    cout << "Enter: " << id << (isFemale ? " (female)" : " (male)") << endl\;
    pthread_mutex_unlock(&coutMutex);

   // TODO: Complete this function                                         
   if(isFemale && maleInBath==0){
     femaleInBath++;
    }else if(isFemale && maleInBath >0){
      sem_wait(&female);
   }else if(!isFemale && femaleInBath==0){
      maleInBath++;
  }else{
    sem_wait(&male);
  }
} 
```

人离开洗手间

```
void personLeaveRestroom(int id, bool isFemale)
 {
   // LEAVE THESE STATEMENTS                                               
    pthread_mutex_lock(&coutMutex);
    cout << "Leave: " << id << (isFemale ? " (female)" : " (male)") << endl;
    pthread_mutex_unlock(&coutMutex);

   // TODO: Complete this function                                         
   if(isFemale){
     femaleInBath--;
    if(femaleInBath==0){
      sem_post(&male);

    }
   }else{
     maleInBath--;
     if(maleInBath==0){
     sem_post(&female);

  }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:16:06.620

好吧，awoodland 已经链接到 SO 上的另一个线程，所以很高兴看看它。为了避免在同一个班级重复解决同样的问题，我也会问你是否必须使用信号量？

如果没有，那么只需创建一个队列（先入先出）结构并将每个进来的人都放入队列。当新人来时，应用您的浴室可用性逻辑。此外，当一个人离开浴室时，如果队列不为空，则再次应用浴室逻辑。这就是给你的。

# javascript - 如何在 Javascript 中获取 Sitecore 6 模板名称或 ID？

> ID：10501232
> 
> 赞同：2
> 
> 时间：2012-05-08T15:02:57.070
> 
> 标签：javascript, templates, sitecore, sitecore6

我正在为 Sitecore 制作第 3 方 Javascript 工具，该工具需要根据当前编辑页面的模板修改其行为。

到目前为止，我一直在使用这个脚本来获取模板的名称：

```
jQuery(".scEditorSectionPanelCell a[onclick*='shell:edittemplate']")[0].innerHTML.match(/\/?([^/]+?)$/i)[1]; 
```

一点解释：在编辑页面时，有一个名为“快速信息”的段落（如果翻译不正确，我们深表歉意 - 不适用于英文版 Sitecore）。本段内是编辑当前模板的直接链接 - 这是我使用 jQuery 获取的链接：

```
<td>
  <a href="#" onclick="javascript:scForm.postRequest('','','','shell:edittemplate');return false">
    /sitecore/templates/Imported/[NAME-OF-TEMPLATE]
  </a> - 
  <input class="scEditorHeaderQuickInfoInputID" readonly="readonly" onclick="javascript:this.select();return false"
    value="{[ID-OF-TEMPLATE]}">
</td> 
```

从中我得到带有正则表达式的模板名称。如果我愿意，我还可以从兄弟`<input>`元素中获取模板 ID。

问题是，并非所有用户都可以看到“快速信息”段落。

关于如何在“快速信息”不可见时获取模板名称或 ID 的任何建议？我无法访问底层的 ASP.NET 代码，因此解决方案需要严格使用 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:17:10.860

Sitecore 附带了一个 Web 服务，您可以使用它来获取此信息。但是，当用户无权访问快速信息时，我没有设置安全性进行测试。

您需要下载链接的[soapclient.js](http://files.victorfeinman.com/files/Documents/soapclient.js)文件并添加对它的引用。这是对浮动的soapclient.js 的改编。我意识到它不能满足您的需求，因此我对其进行了修改以适合您。

```
<script type="text/javascript" src="/resources/javascript/soapclient.js"></script> 
```

然后你需要添加这个js来使用soapclient。

```
 var url = document.location.href.replace(document.location.pathname, "/sitecore/shell/WebService/Service.asmx");
    var id = "1CB4A1EF-F4C9-4596-9364-430885DDDD00"; //path of item.
    var deep = false //Get All fields
    var dbName = "web" //Which DB you'd like to get the fields from. 

    var credentials = new Object();
    credentials.UserName = "Sitecore\\Admin";
    credentials.Password = "b";
    credentials.CustomData = "";
    var pl = new SOAPClientParameters();
    pl.add("id", id);
    pl.add("deep", deep);
    pl.add("databaseName", dbName);
    pl.add("credentials", credentials);

    SOAPClient.invoke(url, "GetXML", pl, true, GetItemFields_callBack);

    function GetItemFields_callBack(response) {
        console.log(response.sitecore.data.data.item.tid);
    } 
```

如果您只提供当前登录用户的 ID，则不需要密码。如果您输入管理员密码，您将能够访问所有内容。

# ios - 来自 iphone 的流媒体

> ID：10501236
> 
> 赞同：5
> 
> 时间：2012-05-08T15:03:00.917
> 
> 标签：ios, audio-streaming

我需要将音频从麦克风流式传输到 http 服务器。
这些录制设置是我需要的：

```
NSDictionary *audioOutputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                             [NSNumber numberWithInt: kAudioFormatULaw],AVFormatIDKey,        
                                             [NSNumber numberWithFloat:8000.0],AVSampleRateKey,//was 44100.0
                                             [NSData dataWithBytes: &acl length: sizeof( AudioChannelLayout ) ], AVChannelLayoutKey,
                                             [NSNumber numberWithInt:1],AVNumberOfChannelsKey,
                                             [NSNumber numberWithInt:64000],AVEncoderBitRateKey,
                                             nil]; 
```

API im 编码到状态：

> 向当前查看的摄像机发送连续的音频流。音频需要以 64 kbit/s 的 G711 mu-law 编码，以便传输到床边的 Axis 摄像机。发送（这应该是 SSL 中的 POST URL 到连接的服务器）：POST /transmitaudio?id= Content-type: audio/basic Content-Length: 99999（长度被忽略）

以下是我尝试使用的链接列表。

[LINK](https://stackoverflow.com/a/8486682/530933) - （SO）基本解释，只有音频单元和音频队列才允许在通过麦克风录制时将 nsdata 作为输出 | *不是示例，而是对所需内容的良好定义（音频队列或音频单元）*

[LINK](https://stackoverflow.com/questions/8451084/audio-recorded-using-audio-queue-services-to-data) - (SO) 音频回调示例 | *只包括回调*

[LINK](https://stackoverflow.com/questions/10113977/recording-to-aac-from-remoteio-data-is-getting-written-but-file-unplayable) - (SO)REMOTE IO 示例 | *没有启动/停止，用于保存到文件*

[LINK](https://stackoverflow.com/questions/10315621/remoteio-session-worked-in-ios-4-3-but-fails-in-ios-5-on-device-works-on-simula) - (SO)REMOTE IO 示例 | *未回答 不工作*

[LINK](https://stackoverflow.com/questions/1010343/how-do-i-record-audio-on-iphone-with-avaudiorecorder) - (SO)基本录音示例 | *很好的例子，但要归档*

[链接](https://stackoverflow.com/questions/3008466/audioqueue-in-memory-playback-example)- （SO）引导我进入 InMemoryAudioFile 类的问题（无法正常工作）| *跟随指向 inMemoryFile （或类似的东西）的链接，但无法让它工作。*

[LINK](https://stackoverflow.com/questions/8699895/error-in-audio-unit-code-remoteio-for-iphone) - (SO)more 音频单元和远程 io 示例/问题 | *让这个工作，但再次没有停止功能，即使我试图弄清楚呼叫是什么并让它停止，它似乎仍然没有将音频传输到服务器。*

[LINK](http://atastypixel.com/blog/using-remoteio-audio-unit/comment-page-1/#comments) - 不错的 remoteIO 和音频队列示例，但是 | *另一个很好的例子，几乎让它工作，但代码有一些问题（编译器认为它不是 obj-c++）并且再次不知道如何从它而不是文件中获取音频“数据”。*

[LINK](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQRecord/RecordingAudio.html#//apple_ref/doc/uid/TP40005343-CH4-SW1) - 用于音频队列的 Apple 文档 | *框架有问题。通过它（见下面的问题），但最终无法让它工作，但可能没有给这个时间和其他人一样多的时间，也许应该有。*

[LINK](https://stackoverflow.com/questions/10535455/audio-unit-undeclared-indentifier) - (SO) 尝试实现音频队列/单元时遇到的问题 | *不是一个例子*

[LINK](https://stackoverflow.com/questions/10067117/recording-from-remoteio-resulting-caf-is-pitch-shifted-slower-distorted) - (SO)另一个 remoteIO 示例 | *另一个很好的例子，但无法弄清楚如何将它获取到数据而不是文件。*

[LINK](http://atastypixel.com/blog/a-simple-fast-circular-buffer-implementation-for-audio-processing/) - 看起来也很有趣，循环缓冲区 | *无法弄清楚如何将其与音频回调结合起来*

这是我目前正在尝试流式传输的课程。尽管接收器端（连接到服务器）的扬声器发出静电，但这似乎可行。这似乎表明音频数据格式存在问题。

IOS VERSION（减去 GCD 套接字的委托方法）：

```
@implementation MicCommunicator {
AVAssetWriter * assetWriter;
AVAssetWriterInput * assetWriterInput;
}

@synthesize captureSession = _captureSession;
@synthesize output = _output;
@synthesize restClient = _restClient;
@synthesize uploadAudio = _uploadAudio;
@synthesize outputPath = _outputPath;
@synthesize sendStream = _sendStream;
@synthesize receiveStream = _receiveStream;

@synthesize socket = _socket;
@synthesize isSocketConnected = _isSocketConnected;

-(id)init {
    if ((self = [super init])) {

        _receiveStream = [[NSStream alloc]init];
        _sendStream = [[NSStream alloc]init];
        _socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
        _isSocketConnected = FALSE;

        _restClient = [RestClient sharedManager];
        _uploadAudio = false;

        NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        _outputPath = [NSURL fileURLWithPath:[[searchPaths objectAtIndex:0] stringByAppendingPathComponent:@"micOutput.output"]];

        NSError * assetError;

        AudioChannelLayout acl;
        bzero(&acl, sizeof(acl));
        acl.mChannelLayoutTag = kAudioChannelLayoutTag_Mono; //kAudioChannelLayoutTag_Stereo;
        NSDictionary *audioOutputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                             [NSNumber numberWithInt: kAudioFormatULaw],AVFormatIDKey,        
                                             [NSNumber numberWithFloat:8000.0],AVSampleRateKey,//was 44100.0
                                             [NSData dataWithBytes: &acl length: sizeof( AudioChannelLayout ) ], AVChannelLayoutKey,
                                             [NSNumber numberWithInt:1],AVNumberOfChannelsKey,
                                             [NSNumber numberWithInt:64000],AVEncoderBitRateKey,
                                             nil];

        assetWriterInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeAudio outputSettings:audioOutputSettings]retain];
        [assetWriterInput setExpectsMediaDataInRealTime:YES];

        assetWriter = [[AVAssetWriter assetWriterWithURL:_outputPath fileType:AVFileTypeWAVE error:&assetError]retain]; //AVFileTypeAppleM4A

        if (assetError) {
            NSLog (@"error initing mic: %@", assetError);
            return nil;
        }
        if ([assetWriter canAddInput:assetWriterInput]) {
            [assetWriter addInput:assetWriterInput];
        } else {
            NSLog (@"can't add asset writer input...!");
            return nil;
        }

    }
    return self;
}

-(void)dealloc {
    [_output release];
    [_captureSession release];
    [_captureSession release];
    [assetWriter release];
    [assetWriterInput release];
    [super dealloc];
}

-(void)beginStreaming {

    NSLog(@"avassetwrter class is %@",NSStringFromClass([assetWriter class]));

    self.captureSession = [[AVCaptureSession alloc] init];
    AVCaptureDevice *audioCaptureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
    NSError *error = nil;
    AVCaptureDeviceInput *audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioCaptureDevice error:&error];
    if (audioInput)
        [self.captureSession addInput:audioInput];
    else {
        NSLog(@"No audio input found.");
        return;
    }

    self.output = [[AVCaptureAudioDataOutput alloc] init];

    dispatch_queue_t outputQueue = dispatch_queue_create("micOutputDispatchQueue", NULL);
    [self.output setSampleBufferDelegate:self queue:outputQueue];
    dispatch_release(outputQueue);

    self.uploadAudio = FALSE;

    [self.captureSession addOutput:self.output];
    [assetWriter startWriting];
    [self.captureSession startRunning];
}

-(void)pauseStreaming
{
    self.uploadAudio = FALSE;
}

-(void)resumeStreaming
{
    self.uploadAudio = TRUE;
}

-(void)finishAudioWork
{
    [self dealloc];
}

-(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {

    AudioBufferList audioBufferList;
    NSMutableData *data= [[NSMutableData alloc] init];
    CMBlockBufferRef blockBuffer;
    CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &audioBufferList, sizeof(audioBufferList), NULL, NULL, 0, &blockBuffer);

    for (int y = 0; y < audioBufferList.mNumberBuffers; y++) {
        AudioBuffer audioBuffer = audioBufferList.mBuffers[y];
        Float32 *frame = (Float32*)audioBuffer.mData;

        [data appendBytes:frame length:audioBuffer.mDataByteSize];
    }

    // append [data bytes] to your NSOutputStream 

    // These two lines write to disk, you may not need this, just providing an example
    [assetWriter startSessionAtSourceTime:CMSampleBufferGetPresentationTimeStamp(sampleBuffer)];
    [assetWriterInput appendSampleBuffer:sampleBuffer];

    //start upload audio data
    if (self.uploadAudio) { 

        if (!self.isSocketConnected) {
            [self connect];
        }
            NSString *requestStr = [NSString stringWithFormat:@"POST /transmitaudio?id=%@ HTTP/1.0\r\n\r\n",self.restClient.sessionId];

            NSData *requestData = [requestStr dataUsingEncoding:NSUTF8StringEncoding];        
        [self.socket writeData:requestData withTimeout:5 tag:0];     
        [self.socket writeData:data withTimeout:5 tag:0]; 
    }
    //stop upload audio data

    CFRelease(blockBuffer);
    blockBuffer=NULL;
    [data release];
} 
```

和 JAVA 版本：

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.util.Arrays;

import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSocket;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioRecord;
import android.media.AudioTrack;
import android.media.MediaRecorder.AudioSource;
import android.util.Log;

public class AudioWorker extends Thread
{ 
    private boolean stopped = false;

    private String host;
    private int port;
    private long id=0;
    boolean run=true;
    AudioRecord recorder;

    //ulaw encoder stuff
    private final static String TAG = "UlawEncoderInputStream";

    private final static int MAX_ULAW = 8192;
    private final static int SCALE_BITS = 16;

    private InputStream mIn;

    private int mMax = 0;

    private final byte[] mBuf = new byte[1024];
    private int mBufCount = 0; // should be 0 or 1

    private final byte[] mOneByte = new byte[1];
    ////
    /**
     * Give the thread high priority so that it's not canceled unexpectedly, and start it
     */
    public AudioWorker(String host, int port, long id)
    { 
        this.host = host;
        this.port = port;
        this.id = id;
        android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
//        start();
    }

    @Override
    public void run()
    { 
        Log.i("AudioWorker", "Running AudioWorker Thread");
        recorder = null;
        AudioTrack track = null;
        short[][]   buffers  = new short[256][160];
        int ix = 0;

        /*
         * Initialize buffer to hold continuously recorded AudioWorker data, start recording, and start
         * playback.
         */
        try
        {
            int N = AudioRecord.getMinBufferSize(8000,AudioFormat.CHANNEL_IN_MONO,AudioFormat.ENCODING_PCM_16BIT);
            recorder = new AudioRecord(AudioSource.MIC, 8000, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, N*10);
            track = new AudioTrack(AudioManager.STREAM_MUSIC, 8000,   AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, N*10, AudioTrack.MODE_STREAM);
            recorder.startRecording();
//            track.play();
            /*
             * Loops until something outside of this thread stops it.
             * Reads the data from the recorder and writes it to the AudioWorker track for playback.
             */

            SSLContext sc = SSLContext.getInstance("SSL");
            sc.init(null, trustAllCerts, new java.security.SecureRandom());
            SSLSocketFactory sslFact = sc.getSocketFactory();
            SSLSocket socket = (SSLSocket)sslFact.createSocket(host, port);

            socket.setSoTimeout(10000);
            InputStream inputStream = socket.getInputStream();
            DataInputStream in = new DataInputStream(new BufferedInputStream(inputStream));
            OutputStream outputStream = socket.getOutputStream();
            DataOutputStream os = new DataOutputStream(new BufferedOutputStream(outputStream));
            PrintWriter socketPrinter = new PrintWriter(os);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));

//          socketPrinter.println("POST /transmitaudio?patient=1333369798370 HTTP/1.0");
            socketPrinter.println("POST /transmitaudio?id="+id+" HTTP/1.0");
            socketPrinter.println("Content-Type: audio/basic");
            socketPrinter.println("Content-Length: 99999");
            socketPrinter.println("Connection: Keep-Alive");
            socketPrinter.println("Cache-Control: no-cache");
            socketPrinter.println();
            socketPrinter.flush();

            while(!stopped)
            { 
                Log.i("Map", "Writing new data to buffer");
                short[] buffer = buffers[ix++ % buffers.length];

                N = recorder.read(buffer,0,buffer.length);
                track.write(buffer, 0, buffer.length);

                byte[] bytes2 = new byte[buffer.length * 2];
                ByteBuffer.wrap(bytes2).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().put(buffer);

                read(bytes2, 0, bytes2.length);
                os.write(bytes2,0,bytes2.length);

//
//                ByteBuffer byteBuf = ByteBuffer.allocate(2*N);
//              System.out.println("byteBuf length "+2*N);
//                int i = 0;
//                while (buffer.length > i) {
//                    byteBuf.putShort(buffer[i]);
//                    i++;
//                }         
//                byte[] b = new byte[byteBuf.remaining()];
            }
            os.close();
        }
        catch(Throwable x)
        { 
            Log.w("AudioWorker", "Error reading voice AudioWorker", x);
        }
        /*
         * Frees the thread's resources after the loop completes so that it can be run again
         */
        finally
        { 
            recorder.stop();
            recorder.release();
            track.stop();
            track.release();
        }
    }

    /**
     * Called from outside of the thread in order to stop the recording/playback loop
     */
    public void close()
    { 
         stopped = true;
    }
    public void resumeThread()
    { 
         stopped = false;
         run();
    }

    TrustManager[] trustAllCerts = new TrustManager[]{
            new X509TrustManager() {
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                }
                public void checkClientTrusted(
                        java.security.cert.X509Certificate[] certs, String authType) {
                }
                public void checkServerTrusted(
                        java.security.cert.X509Certificate[] chain, String authType) {
                    for (int j=0; j<chain.length; j++)
                    {
                        System.out.println("Client certificate information:");
                        System.out.println("  Subject DN: " + chain[j].getSubjectDN());
                        System.out.println("  Issuer DN: " + chain[j].getIssuerDN());
                        System.out.println("  Serial number: " + chain[j].getSerialNumber());
                        System.out.println("");
                    }
                }
            }
    };

    public static void encode(byte[] pcmBuf, int pcmOffset,
            byte[] ulawBuf, int ulawOffset, int length, int max) {

        // from  'ulaw' in wikipedia
        // +8191 to +8159                          0x80
        // +8158 to +4063 in 16 intervals of 256   0x80 + interval number
        // +4062 to +2015 in 16 intervals of 128   0x90 + interval number
        // +2014 to  +991 in 16 intervals of  64   0xA0 + interval number
        //  +990 to  +479 in 16 intervals of  32   0xB0 + interval number
        //  +478 to  +223 in 16 intervals of  16   0xC0 + interval number
        //  +222 to   +95 in 16 intervals of   8   0xD0 + interval number
        //   +94 to   +31 in 16 intervals of   4   0xE0 + interval number
        //   +30 to    +1 in 15 intervals of   2   0xF0 + interval number
        //     0                                   0xFF

        //    -1                                   0x7F
        //   -31 to    -2 in 15 intervals of   2   0x70 + interval number
        //   -95 to   -32 in 16 intervals of   4   0x60 + interval number
        //  -223 to   -96 in 16 intervals of   8   0x50 + interval number
        //  -479 to  -224 in 16 intervals of  16   0x40 + interval number
        //  -991 to  -480 in 16 intervals of  32   0x30 + interval number
        // -2015 to  -992 in 16 intervals of  64   0x20 + interval number
        // -4063 to -2016 in 16 intervals of 128   0x10 + interval number
        // -8159 to -4064 in 16 intervals of 256   0x00 + interval number
        // -8192 to -8160                          0x00

        // set scale factors
        if (max <= 0) max = MAX_ULAW;

        int coef = MAX_ULAW * (1 << SCALE_BITS) / max;

        for (int i = 0; i < length; i++) {
            int pcm = (0xff & pcmBuf[pcmOffset++]) + (pcmBuf[pcmOffset++] << 8);
            pcm = (pcm * coef) >> SCALE_BITS;

            int ulaw;
            if (pcm >= 0) {
                ulaw = pcm <= 0 ? 0xff :
                        pcm <=   30 ? 0xf0 + ((  30 - pcm) >> 1) :
                        pcm <=   94 ? 0xe0 + ((  94 - pcm) >> 2) :
                        pcm <=  222 ? 0xd0 + (( 222 - pcm) >> 3) :
                        pcm <=  478 ? 0xc0 + (( 478 - pcm) >> 4) :
                        pcm <=  990 ? 0xb0 + (( 990 - pcm) >> 5) :
                        pcm <= 2014 ? 0xa0 + ((2014 - pcm) >> 6) :
                        pcm <= 4062 ? 0x90 + ((4062 - pcm) >> 7) :
                        pcm <= 8158 ? 0x80 + ((8158 - pcm) >> 8) :
                        0x80;
            } else {
                ulaw = -1 <= pcm ? 0x7f :
                          -31 <= pcm ? 0x70 + ((pcm -   -31) >> 1) :
                          -95 <= pcm ? 0x60 + ((pcm -   -95) >> 2) :
                         -223 <= pcm ? 0x50 + ((pcm -  -223) >> 3) :
                         -479 <= pcm ? 0x40 + ((pcm -  -479) >> 4) :
                         -991 <= pcm ? 0x30 + ((pcm -  -991) >> 5) :
                        -2015 <= pcm ? 0x20 + ((pcm - -2015) >> 6) :
                        -4063 <= pcm ? 0x10 + ((pcm - -4063) >> 7) :
                        -8159 <= pcm ? 0x00 + ((pcm - -8159) >> 8) :
                        0x00;
            }
            ulawBuf[ulawOffset++] = (byte)ulaw;
        }
    }
    public static int maxAbsPcm(byte[] pcmBuf, int offset, int length) {
        int max = 0;
        for (int i = 0; i < length; i++) {
            int pcm = (0xff & pcmBuf[offset++]) + (pcmBuf[offset++] << 8);
            if (pcm < 0) pcm = -pcm;
            if (pcm > max) max = pcm;
        }
        return max;
    }

    public int read(byte[] buf, int offset, int length) throws IOException {
        if (recorder == null) throw new IllegalStateException("not open");

        // return at least one byte, but try to fill 'length'
        while (mBufCount < 2) {
            int n = recorder.read(mBuf, mBufCount, Math.min(length * 2, mBuf.length - mBufCount));
            if (n == -1) return -1;
            mBufCount += n;
        }

        // compand data
        int n = Math.min(mBufCount / 2, length);
        encode(mBuf, 0, buf, offset, n, mMax);

        // move data to bottom of mBuf
        mBufCount -= n * 2;
        for (int i = 0; i < mBufCount; i++) mBuf[i] = mBuf[i + n * 2];

        return n;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:39:30.433

我在这个主题上的工作是惊人的和长期的。我终于让它工作了，不管它可能被黑了。因此，我将在发布答案之前列出一些警告：

1.  缓冲区之间仍然有咔哒声

2.  由于我在 obj-c++ 类中使用 obj-c 类的方式，我收到了警告，所以那里有问题（但是根据我使用池的研究与发布相同，所以我不认为这很重要）：

    > __NSCFString 类的对象 0x13cd20 自动释放，没有适当的池 - 只是泄漏 - 在 objc_autoreleaseNoPool() 上中断以进行调试

3.  为了让这个工作我不得不注释掉所有来自 SpeakHereController 的 AQPlayer 引用（见下文）由于错误我无法修复任何其他方式。不过对我来说没关系，因为我只是在录音

所以上面的主要答案是 AVAssetWriter 中有一个错误阻止它附加字节和写入音频数据。我在联系苹果支持后终于发现了这一点，并让他们通知我。据我所知，该错误是 ulaw 和 AVAssetWriter 特有的，尽管我没有尝试过许多其他格式来验证。
作为对此的回应，唯一的其他选择是/是使用 AudioQueues。我以前尝试过但带来了很多问题。最大的问题是我缺乏 obj-c++ 知识。下面的课程来自 speakHere 示例，稍作更改，以便音频采用 ulaw 格式。其他问题来自试图让所有文件都能很好地播放。然而，这很容易通过将链中的所有文件名更改为 .mm 来解决。下一个问题是试图和谐地使用这些类。这仍然是一个 WIP，并且与警告号 2 相关。但我对此的基本解决方案是使用 SpeakHereController（也包括在 speakhere 示例中）而不是直接访问 AQRecorder。

无论如何，这里是代码：

使用 obj-c 类中的 SpeakHereController

。H

```
@property(nonatomic,strong) SpeakHereController * recorder; 
```

。毫米

```
[init method]
        //AQRecorder wrapper (SpeakHereController) allocation
        _recorder = [[SpeakHereController alloc]init];
        //AQRecorder wrapper (SpeakHereController) initialization
        //technically this class is a controller and thats why its init method is awakeFromNib
        [_recorder awakeFromNib];

[recording]
     bool buttonState = self.audioRecord.isSelected;
[self.audioRecord setSelected:!buttonState];

if ([self.audioRecord isSelected]) {

    [self.recorder startRecord];
}else {
    [self.recorder stopRecord];
} 
```

在这里说话控制器

```
#import "SpeakHereController.h"

@implementation SpeakHereController

@synthesize player;
@synthesize recorder;

@synthesize btn_record;
@synthesize btn_play;
@synthesize fileDescription;
@synthesize lvlMeter_in;
@synthesize playbackWasInterrupted;

char *OSTypeToStr(char *buf, OSType t)
{
    char *p = buf;
    char str[4], *q = str;
    *(UInt32 *)str = CFSwapInt32(t);
    for (int i = 0; i < 4; ++i) {
        if (isprint(*q) && *q != '\\')
            *p++ = *q++;
        else {
            sprintf(p, "\\x%02x", *q++);
            p += 4;
        }
    }
    *p = '\0';
    return buf;
}

-(void)setFileDescriptionForFormat: (CAStreamBasicDescription)format withName:(NSString*)name
{
    char buf[5];
    const char *dataFormat = OSTypeToStr(buf, format.mFormatID);
    NSString* description = [[NSString alloc] initWithFormat:@"(%d ch. %s @ %g Hz)", format.NumberChannels(), dataFormat, format.mSampleRate, nil];
    fileDescription.text = description;
    [description release];  
}

#pragma mark Playback routines

-(void)stopPlayQueue
{
//  player->StopQueue();
    [lvlMeter_in setAq: nil];
    btn_record.enabled = YES;
}

-(void)pausePlayQueue
{
//  player->PauseQueue();
    playbackWasPaused = YES;
}

-(void)startRecord
{
    //    recorder = new AQRecorder();

    if (recorder->IsRunning()) // If we are currently recording, stop and save the file.
    {
        [self stopRecord];
    }
    else // If we're not recording, start.
    {
        //      btn_play.enabled = NO;  

        // Set the button's state to "stop"
        //      btn_record.title = @"Stop";

        // Start the recorder
        recorder->StartRecord(CFSTR("recordedFile.caf"));

        [self setFileDescriptionForFormat:recorder->DataFormat() withName:@"Recorded File"];

        // Hook the level meter up to the Audio Queue for the recorder
        //      [lvlMeter_in setAq: recorder->Queue()];
    } 
}

- (void)stopRecord
{
    // Disconnect our level meter from the audio queue
//  [lvlMeter_in setAq: nil];

    recorder->StopRecord();

    // dispose the previous playback queue
//  player->DisposeQueue(true);

    // now create a new queue for the recorded file
    recordFilePath = (CFStringRef)[NSTemporaryDirectory() stringByAppendingPathComponent: @"recordedFile.caf"];
//  player->CreateQueueForFile(recordFilePath);

    // Set the button's state back to "record"
//  btn_record.title = @"Record";
//  btn_play.enabled = YES;
}

- (IBAction)play:(id)sender
{
    if (player->IsRunning())
    {
        if (playbackWasPaused) {
//          OSStatus result = player->StartQueue(true);
//          if (result == noErr)
//              [[NSNotificationCenter defaultCenter] postNotificationName:@"playbackQueueResumed" object:self];
        }
        else
//          [self stopPlayQueue];
            nil;
    }
    else
    {       
//      OSStatus result = player->StartQueue(false);
//      if (result == noErr)
//          [[NSNotificationCenter defaultCenter] postNotificationName:@"playbackQueueResumed" object:self];
    }
}

- (IBAction)record:(id)sender
{
    if (recorder->IsRunning()) // If we are currently recording, stop and save the file.
    {
        [self stopRecord];
    }
    else // If we're not recording, start.
    {
//      btn_play.enabled = NO;  
//      
//      // Set the button's state to "stop"
//      btn_record.title = @"Stop";

        // Start the recorder
        recorder->StartRecord(CFSTR("recordedFile.caf"));

        [self setFileDescriptionForFormat:recorder->DataFormat() withName:@"Recorded File"];

        // Hook the level meter up to the Audio Queue for the recorder
        [lvlMeter_in setAq: recorder->Queue()];
    }   
}
#pragma mark AudioSession listeners
void interruptionListener(  void *  inClientData,
                            UInt32  inInterruptionState)
{
    SpeakHereController *THIS = (SpeakHereController*)inClientData;
    if (inInterruptionState == kAudioSessionBeginInterruption)
    {
        if (THIS->recorder->IsRunning()) {
            [THIS stopRecord];
        }
        else if (THIS->player->IsRunning()) {
            //the queue will stop itself on an interruption, we just need to update the UI
            [[NSNotificationCenter defaultCenter] postNotificationName:@"playbackQueueStopped" object:THIS];
            THIS->playbackWasInterrupted = YES;
        }
    }
    else if ((inInterruptionState == kAudioSessionEndInterruption) && THIS->playbackWasInterrupted)
    {
        // we were playing back when we were interrupted, so reset and resume now
//      THIS->player->StartQueue(true);
        [[NSNotificationCenter defaultCenter] postNotificationName:@"playbackQueueResumed" object:THIS];
        THIS->playbackWasInterrupted = NO;
    }
}

void propListener(  void *                  inClientData,
                    AudioSessionPropertyID  inID,
                    UInt32                  inDataSize,
                    const void *            inData)
{
    SpeakHereController *THIS = (SpeakHereController*)inClientData;
    if (inID == kAudioSessionProperty_AudioRouteChange)
    {
        CFDictionaryRef routeDictionary = (CFDictionaryRef)inData;          
        //CFShow(routeDictionary);
        CFNumberRef reason = (CFNumberRef)CFDictionaryGetValue(routeDictionary, CFSTR(kAudioSession_AudioRouteChangeKey_Reason));
        SInt32 reasonVal;
        CFNumberGetValue(reason, kCFNumberSInt32Type, &reasonVal);
        if (reasonVal != kAudioSessionRouteChangeReason_CategoryChange)
        {
            /*CFStringRef oldRoute = (CFStringRef)CFDictionaryGetValue(routeDictionary, CFSTR(kAudioSession_AudioRouteChangeKey_OldRoute));
            if (oldRoute)   
            {
                printf("old route:\n");
                CFShow(oldRoute);
            }
            else 
                printf("ERROR GETTING OLD AUDIO ROUTE!\n");

            CFStringRef newRoute;
            UInt32 size; size = sizeof(CFStringRef);
            OSStatus error = AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &size, &newRoute);
            if (error) printf("ERROR GETTING NEW AUDIO ROUTE! %d\n", error);
            else
            {
                printf("new route:\n");
                CFShow(newRoute);
            }*/

            if (reasonVal == kAudioSessionRouteChangeReason_OldDeviceUnavailable)
            {           
                if (THIS->player->IsRunning()) {
                    [THIS pausePlayQueue];
                    [[NSNotificationCenter defaultCenter] postNotificationName:@"playbackQueueStopped" object:THIS];
                }       
            }

            // stop the queue if we had a non-policy route change
            if (THIS->recorder->IsRunning()) {
                [THIS stopRecord];
            }
        }   
    }
    else if (inID == kAudioSessionProperty_AudioInputAvailable)
    {
        if (inDataSize == sizeof(UInt32)) {
            UInt32 isAvailable = *(UInt32*)inData;
            // disable recording if input is not available
            THIS->btn_record.enabled = (isAvailable > 0) ? YES : NO;
        }
    }
}

#pragma mark Initialization routines
- (void)awakeFromNib
{       
    // Allocate our singleton instance for the recorder & player object
    recorder = new AQRecorder();
    player = nil;//new AQPlayer();

    OSStatus error = AudioSessionInitialize(NULL, NULL, interruptionListener, self);
    if (error) printf("ERROR INITIALIZING AUDIO SESSION! %d\n", error);
    else 
    {
        UInt32 category = kAudioSessionCategory_PlayAndRecord;  
        error = AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(category), &category);
        if (error) printf("couldn't set audio category!");

        error = AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange, propListener, self);
        if (error) printf("ERROR ADDING AUDIO SESSION PROP LISTENER! %d\n", error);
        UInt32 inputAvailable = 0;
        UInt32 size = sizeof(inputAvailable);

        // we do not want to allow recording if input is not available
        error = AudioSessionGetProperty(kAudioSessionProperty_AudioInputAvailable, &size, &inputAvailable);
        if (error) printf("ERROR GETTING INPUT AVAILABILITY! %d\n", error);
//      btn_record.enabled = (inputAvailable) ? YES : NO;

        // we also need to listen to see if input availability changes
        error = AudioSessionAddPropertyListener(kAudioSessionProperty_AudioInputAvailable, propListener, self);
        if (error) printf("ERROR ADDING AUDIO SESSION PROP LISTENER! %d\n", error);

        error = AudioSessionSetActive(true); 
        if (error) printf("AudioSessionSetActive (true) failed");
    }

//  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playbackQueueStopped:) name:@"playbackQueueStopped" object:nil];
//  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playbackQueueResumed:) name:@"playbackQueueResumed" object:nil];

//  UIColor *bgColor = [[UIColor alloc] initWithRed:.39 green:.44 blue:.57 alpha:.5];
//  [lvlMeter_in setBackgroundColor:bgColor];
//  [lvlMeter_in setBorderColor:bgColor];
//  [bgColor release];

    // disable the play button since we have no recording to play yet
//  btn_play.enabled = NO;
//  playbackWasInterrupted = NO;
//  playbackWasPaused = NO;
}

# pragma mark Notification routines
- (void)playbackQueueStopped:(NSNotification *)note
{
    btn_play.title = @"Play";
    [lvlMeter_in setAq: nil];
    btn_record.enabled = YES;
}

- (void)playbackQueueResumed:(NSNotification *)note
{
    btn_play.title = @"Stop";
    btn_record.enabled = NO;
    [lvlMeter_in setAq: player->Queue()];
}

#pragma mark Cleanup
- (void)dealloc
{
    [btn_record release];
    [btn_play release];
    [fileDescription release];
    [lvlMeter_in release];

//  delete player;
    delete recorder;

    [super dealloc];
}

@end 
```

AQRecorder (.h 有 2 行重要

```
#define kNumberRecordBuffers    3
#define kBufferDurationSeconds 5.0 
```

)

```
#include "AQRecorder.h"
//#include "UploadAudioWrapperInterface.h"
//#include "RestClient.h"

RestClient * restClient;
NSData* data;

// ____________________________________________________________________________________
// Determine the size, in bytes, of a buffer necessary to represent the supplied number
// of seconds of audio data.
int AQRecorder::ComputeRecordBufferSize(const AudioStreamBasicDescription *format, float seconds)
{
    int packets, frames, bytes = 0;
    try {
        frames = (int)ceil(seconds * format->mSampleRate);

        if (format->mBytesPerFrame > 0)
            bytes = frames * format->mBytesPerFrame;
        else {
            UInt32 maxPacketSize;
            if (format->mBytesPerPacket > 0)
                maxPacketSize = format->mBytesPerPacket;    // constant packet size
            else {
                UInt32 propertySize = sizeof(maxPacketSize);
                XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_MaximumOutputPacketSize, &maxPacketSize,
                                                 &propertySize), "couldn't get queue's maximum output packet size");
            }
            if (format->mFramesPerPacket > 0)
                packets = frames / format->mFramesPerPacket;
            else
                packets = frames;   // worst-case scenario: 1 frame in a packet
            if (packets == 0)       // sanity check
                packets = 1;
            bytes = packets * maxPacketSize;
        }
    } catch (CAXException e) {
        char buf[256];
        fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
        return 0;
    }   
    return bytes;
}

// ____________________________________________________________________________________
// AudioQueue callback function, called when an input buffers has been filled.
void AQRecorder::MyInputBufferHandler(  void *                              inUserData,
                                        AudioQueueRef                       inAQ,
                                        AudioQueueBufferRef                 inBuffer,
                                        const AudioTimeStamp *              inStartTime,
                                        UInt32                              inNumPackets,
                                        const AudioStreamPacketDescription* inPacketDesc)
{
    AQRecorder *aqr = (AQRecorder *)inUserData;

    try {
        if (inNumPackets > 0) {
            // write packets to file
//          XThrowIfError(AudioFileWritePackets(aqr->mRecordFile, FALSE, inBuffer->mAudioDataByteSize,
//                                           inPacketDesc, aqr->mRecordPacket, &inNumPackets, inBuffer->mAudioData),
//                     "AudioFileWritePackets failed");
            aqr->mRecordPacket += inNumPackets;

//            int numBytes = inBuffer->mAudioDataByteSize;       
//            SInt8 *testBuffer = (SInt8*)inBuffer->mAudioData;
//            
//            for (int i=0; i < numBytes; i++)
//            {
//                SInt8 currentData = testBuffer[i];
//                printf("Current data in testbuffer is %d", currentData);
//                
//                NSData * temp = [NSData dataWithBytes:currentData length:sizeof(currentData)];
//            }

            data=[[NSData dataWithBytes:inBuffer->mAudioData length:inBuffer->mAudioDataByteSize]retain];

            [restClient uploadAudioData:data url:nil];

        }

        // if we're not stopping, re-enqueue the buffer so that it gets filled again
        if (aqr->IsRunning())
            XThrowIfError(AudioQueueEnqueueBuffer(inAQ, inBuffer, 0, NULL), "AudioQueueEnqueueBuffer failed");
    } catch (CAXException e) {
        char buf[256];
        fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
    }

}

AQRecorder::AQRecorder()
{
    mIsRunning = false;
    mRecordPacket = 0;

    data = [[NSData alloc]init];
    restClient = [[RestClient sharedManager]retain];
}

AQRecorder::~AQRecorder()
{
    AudioQueueDispose(mQueue, TRUE);
    AudioFileClose(mRecordFile);

    if (mFileName){
     CFRelease(mFileName);   
    }

    [restClient release];
    [data release];
}

// ____________________________________________________________________________________
// Copy a queue's encoder's magic cookie to an audio file.
void AQRecorder::CopyEncoderCookieToFile()
{
    UInt32 propertySize;
    // get the magic cookie, if any, from the converter     
    OSStatus err = AudioQueueGetPropertySize(mQueue, kAudioQueueProperty_MagicCookie, &propertySize);

    // we can get a noErr result and also a propertySize == 0
    // -- if the file format does support magic cookies, but this file doesn't have one.
    if (err == noErr && propertySize > 0) {
        Byte *magicCookie = new Byte[propertySize];
        UInt32 magicCookieSize;
        XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_MagicCookie, magicCookie, &propertySize), "get audio converter's magic cookie");
        magicCookieSize = propertySize; // the converter lies and tell us the wrong size

        // now set the magic cookie on the output file
        UInt32 willEatTheCookie = false;
        // the converter wants to give us one; will the file take it?
        err = AudioFileGetPropertyInfo(mRecordFile, kAudioFilePropertyMagicCookieData, NULL, &willEatTheCookie);
        if (err == noErr && willEatTheCookie) {
            err = AudioFileSetProperty(mRecordFile, kAudioFilePropertyMagicCookieData, magicCookieSize, magicCookie);
            XThrowIfError(err, "set audio file's magic cookie");
        }
        delete[] magicCookie;
    }
}

void AQRecorder::SetupAudioFormat(UInt32 inFormatID)
{
    memset(&mRecordFormat, 0, sizeof(mRecordFormat));

    UInt32 size = sizeof(mRecordFormat.mSampleRate);
    XThrowIfError(AudioSessionGetProperty(  kAudioSessionProperty_CurrentHardwareSampleRate,
                                        &size, 
                                        &mRecordFormat.mSampleRate), "couldn't get hardware sample rate");

    //override samplearate to 8k from device sample rate

    mRecordFormat.mSampleRate = 8000.0;

    size = sizeof(mRecordFormat.mChannelsPerFrame);
    XThrowIfError(AudioSessionGetProperty(  kAudioSessionProperty_CurrentHardwareInputNumberChannels, 
                                        &size, 
                                        &mRecordFormat.mChannelsPerFrame), "couldn't get input channel count");

//    mRecordFormat.mChannelsPerFrame = 1;

    mRecordFormat.mFormatID = inFormatID;
    if (inFormatID == kAudioFormatLinearPCM)
    {
        // if we want pcm, default to signed 16-bit little-endian
        mRecordFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;
        mRecordFormat.mBitsPerChannel = 16;
        mRecordFormat.mBytesPerPacket = mRecordFormat.mBytesPerFrame = (mRecordFormat.mBitsPerChannel / 8) * mRecordFormat.mChannelsPerFrame;
        mRecordFormat.mFramesPerPacket = 1;
    }

    if (inFormatID == kAudioFormatULaw) {
//        NSLog(@"is ulaw");
        mRecordFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger;
        mRecordFormat.mSampleRate = 8000.0;
//        mRecordFormat.mFormatFlags = 0;
        mRecordFormat.mFramesPerPacket = 1;
        mRecordFormat.mChannelsPerFrame = 1;
        mRecordFormat.mBitsPerChannel = 16;//was 8
        mRecordFormat.mBytesPerPacket = 1;
        mRecordFormat.mBytesPerFrame = 1;
    }
}

NSString * GetDocumentDirectory(void)
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
}

void AQRecorder::StartRecord(CFStringRef inRecordFile)
{
    int i, bufferByteSize;
    UInt32 size;
    CFURLRef url;

    try {       
        mFileName = CFStringCreateCopy(kCFAllocatorDefault, inRecordFile);

        // specify the recording format
        SetupAudioFormat(kAudioFormatULaw /*kAudioFormatLinearPCM*/);

        // create the queue
        XThrowIfError(AudioQueueNewInput(
                                      &mRecordFormat,
                                      MyInputBufferHandler,
                                      this /* userData */,
                                      NULL /* run loop */, NULL /* run loop mode */,
                                      0 /* flags */, &mQueue), "AudioQueueNewInput failed");

        // get the record format back from the queue's audio converter --
        // the file may require a more specific stream description than was necessary to create the encoder.
        mRecordPacket = 0;

        size = sizeof(mRecordFormat);
        XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_StreamDescription,  
                                         &mRecordFormat, &size), "couldn't get queue's format");

        NSString *basePath = GetDocumentDirectory();
        NSString *recordFile = [basePath /*NSTemporaryDirectory()*/ stringByAppendingPathComponent: (NSString*)inRecordFile];   

        url = CFURLCreateWithString(kCFAllocatorDefault, (CFStringRef)recordFile, NULL);

        // create the audio file
        XThrowIfError(AudioFileCreateWithURL(url, kAudioFileCAFType, &mRecordFormat, kAudioFileFlags_EraseFile,
                                          &mRecordFile), "AudioFileCreateWithURL failed");
        CFRelease(url);

        // copy the cookie first to give the file object as much info as we can about the data going in
        // not necessary for pcm, but required for some compressed audio
        CopyEncoderCookieToFile();

        // allocate and enqueue buffers
        bufferByteSize = ComputeRecordBufferSize(&mRecordFormat, kBufferDurationSeconds);   // enough bytes for half a second
        for (i = 0; i < kNumberRecordBuffers; ++i) {
            XThrowIfError(AudioQueueAllocateBuffer(mQueue, bufferByteSize, &mBuffers[i]),
                       "AudioQueueAllocateBuffer failed");
            XThrowIfError(AudioQueueEnqueueBuffer(mQueue, mBuffers[i], 0, NULL),
                       "AudioQueueEnqueueBuffer failed");
        }
        // start the queue
        mIsRunning = true;
        XThrowIfError(AudioQueueStart(mQueue, NULL), "AudioQueueStart failed");
    }
    catch (CAXException &e) {
        char buf[256];
        fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
    }
    catch (...) {
        fprintf(stderr, "An unknown error occurred\n");
    }   

}

void AQRecorder::StopRecord()
{
    // end recording
    mIsRunning = false;
//    XThrowIfError(AudioQueueReset(mQueue), "AudioQueueStop failed");  
    XThrowIfError(AudioQueueStop(mQueue, true), "AudioQueueStop failed");   
    // a codec may update its cookie at the end of an encoding session, so reapply it to the file now
    CopyEncoderCookieToFile();
    if (mFileName)
    {
        CFRelease(mFileName);
        mFileName = NULL;
    }
    AudioQueueDispose(mQueue, true);
    AudioFileClose(mRecordFile);
} 
```

请随时评论或完善我的答案，如果它是更好的解决方案，我将接受它作为答案。请注意，这是我的第一次尝试，我确信这不是最优雅或最合适的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:37:02.213

你可以使用gamekit框架吗？然后通过蓝牙发送音频。ios开发者库中有例子

# c++ - 是否可以以这种方式定义 for 循环？

> ID：10501239
> 
> 赞同：1
> 
> 时间：2012-05-08T15:03:12.277
> 
> 标签：c++

有没有办法用“双”初始化表达式编写 for 循环？

```
vector<int> v;
//...vector filling...
for (vector<int>::iterator i = v.begin() AND vector<int>::iterator e = v.end(); i != e; ++i){ ...} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:04:46.020

当然，使用逗号：

```
vector<int> v;

// ...
for (vector<int>::iterator i = v.begin(), e = v.end(); i != e; ++i)
{

} 
```

为什么这个“有效”是由于 -`for`语句的定义方式（为了清楚起见，我在暗示后添加了一个分号`for-init-statement`）：

> `for (` *表达式语句*或*简单声明* `;` *条件*[opt] `;` *表达式*[opt] `)`

一个简单的声明是一个类型，后跟一个逗号分隔的声明符列表（它是一个标识符，可能是指针/引用/数组表示法，以及一个可选的初始值设定项）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T15:07:45.457

就在这里：

```
#include <iostream>
int main() {
  for (int i=0, j=10; i<10; ++i, ++j) {
    std::cout << i << ", " << j << "\n";
  }
} 
```

但是，您正在初始化的变量的类型必须相同，因为您需要使用逗号运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T15:04:58.893

使用逗号。

```
for (vector<int> i = v.begin(), e = v.end(); i != e; ++i){ ...} 
```

# java - 如何从 youtube 视频接收/获取音频/视频数据？

> ID：10501240
> 
> 赞同：1
> 
> 时间：2012-05-08T15:03:13.420
> 
> 标签：java, youtube

我很早就想知道如何从 youtube 视频中获取音频数据或整个视频数据。我做了任何合理的人都会做的事，我用谷歌搜索了它。

遗憾的是我没有找到任何好的答案。我被建议的主要是从以下提供的下载链接中获取数据：[http](http://www.youtube.com/get_video.php?video_id=) ://www.youtube.com/get_video.php?video_id= {VideoKey}

但是，它不再起作用了。来自论坛部分等的评论也表明其他人面临与我相同的问题。因此，我得出结论，该信息已过时。但是必须有办法，因为其他网站和浏览器插件，如 KeepVid.com 或 YoutubeInMp3.com 仍然有效。

所以我的问题很简单。如何从 youtube 视频接收/获取音频/视频数据？也许在链接中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:06:53.687

除了谷歌自己[https://developers.google.com/youtube/2.0/developers_guide_java](https://developers.google.com/youtube/2.0/developers_guide_java)

示例：以下示例演示如何检索标准提要并打印有关该提要中的视频的信息。

```
String feedUrl = "http://gdata.youtube.com/feeds/api/standardfeeds/most_viewed";
VideoFeed videoFeed = service.getFeed(new URL(feedUrl), VideoFeed.class);
printVideoFeed(videoFeed, true); 
```

# objective-c - 如何正确计算两个 CGAffineTransform 矩阵之间的增量（差异）？

> ID：10501243
> 
> 赞同：0
> 
> 时间：2012-05-08T15:03:19.093
> 
> 标签：objective-c, ios, matrix, uigesturerecognizer, cgaffinetransform

我一直在玩斯坦福大学讲座/WWDC 视频，该视频向您展示了如何创建同时捏/缩放的手势。它返回一个`CGAffineTransform`然后你应用到 UIView。

这一切都很好，但我试图让它更流畅一些，并为代码添加一些减速。我试图通过在每次`UIGestureRecognizerStateChanged`调用时存储转换矩阵来做到这一点，然后当我收到时，`UIGestureRecognizerStateEnded`我存储最后一个 Changed 和 Ended 矩阵之间的增量：

```
- (void)handleTransform:(TransformGestureRecognizer *)transformRecognizer
{
    CGAffineTransform transform = transformRecognizer.transform;

    // cancel any previous animation updates
    [UIView cancelPreviousPerformRequestsWithTarget:self selector:@selector(decelerateView:) object:transformRecognizer.view];

    if(transformRecognizer.state == UIGestureRecognizerStateBegan)
    {
        transform = CGAffineTransformConcat(transformRecognizer.view.transform, transform);
        transformRecognizer.transform = transform;
    }
    else if(transformRecognizer.state == UIGestureRecognizerStateChanged)
    {
        changingTransform = transform;
    }
    else if(transformRecognizer.state == UIGestureRecognizerStateEnded)
    {
        // get transform difference
        releaseTransformDiff.a = (transform.a - changingTransform.a);
        releaseTransformDiff.b = (transform.b - changingTransform.b);
        releaseTransformDiff.c = (transform.c - changingTransform.c);
        releaseTransformDiff.d = (transform.d - changingTransform.d);
        releaseTransformDiff.tx = (transform.tx - changingTransform.tx);
        releaseTransformDiff.ty = (transform.ty - changingTransform.ty);

        // start updating deceleration animation
        [self performSelector:@selector(decelerateView:) withObject:transformRecognizer.view afterDelay:1.0/60.0];
    }

    transformRecognizer.view.transform = transform;
} 
```

然后，我有一个`decelerateView:`动画减速的方法：

```
#define DECELERATION_RATE 0.9

- (void)decelerateView:(UIView *)view
{
    releaseTransformDiff.a = releaseTransformDiff.a * DECELERATION_RATE;
    releaseTransformDiff.b = releaseTransformDiff.b * DECELERATION_RATE;
    releaseTransformDiff.c = releaseTransformDiff.c * DECELERATION_RATE;
    releaseTransformDiff.d = releaseTransformDiff.d * DECELERATION_RATE;
    releaseTransformDiff.tx = releaseTransformDiff.tx * DECELERATION_RATE;
    releaseTransformDiff.ty = releaseTransformDiff.ty * DECELERATION_RATE;

    view.transform = CGAffineTransformMake(view.transform.a + releaseTransformDiff.a, 
                                           view.transform.b + releaseTransformDiff.b, 
                                           view.transform.c + releaseTransformDiff.c, 
                                           view.transform.d + releaseTransformDiff.d, 
                                           view.transform.tx + releaseTransformDiff.tx,
                                           view.transform.ty + releaseTransformDiff.ty);
    [self performSelector:@selector(decelerateView:) withObject:view afterDelay:1.0/60.0];
} 
```

这有时有效，但有时它会突然停止，并且几乎从不减慢我所做的任何旋转旋转......我想我没有正确计算两个矩阵的增量。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:45:36.617

CGAffineTransformation 是表示 3 x 3 矩阵的简化数据结构：

```
|a  b  0|
|c  d  0|
|tx ty 1| 
```

通过将 3 x 1 矩阵乘以上述矩阵来变换一个点

```
 |a  b  0|
[x' y' 1] = [x y 1] X |c  d  0|
                      |tx ty 1| 
```

要创建缩放仿射变换，请将 a 设置为缩放 x 轴的因子，并将 d 设置为缩放 y 轴的因子。要创建平移仿射变换，请将 tx 设置为沿 x 轴移动的值，将 ty 设置为沿 y 轴移动的值。

此问题中使用的技术适用于仅是缩放或平移变换（或这两种类型的变换的组合）的仿射变换。那是因为受影响的四个值确实线性且独立地变化。

为了创建角度 A 的旋转仿射变换，将 a 设置为 cos A，b 设置为 sin A，c 设置为 -sin A，d 设置为 cos A。由于 sin 和 cos 不是线性函数，因此问题中提出的增量变化将不能正常工作。更复杂的是，两个变换的组合是表示这些变换的两个矩阵的乘积。在涉及旋转的情况下，生成的矩阵不会与会导致变换略有不同的矩阵线性不同。

构建增量转换的方法是更改​​转换构建函数调用的输入，而不是直接使用结果矩阵。

# javascript - 上传后更改上传图片

> ID：10501245
> 
> 赞同：1
> 
> 时间：2012-05-08T15:03:20.800
> 
> 标签：javascript, uploadify, image-uploading

我使用uploadify上传图片。上传按钮是相机图像（Camera.png），但选择图像时，上传成功时，上传按钮图像是另一个图像（成功.png）。

这是使用的javascript代码：

```
$('#form-add-post-image').uploadify({
    'swf':         'uploadify/uploadify.swf',
    'uploader':    'uploadify/uploadify.php',
    'buttonImage': 'uploadify/camera.png',
    'width':       128,
    'height':      128,
    'onUploadSuccess': function(file, data, response){
        $(this).uploadify('settings', 'buttonImage', 'uploadify/success.png');
    }
}); 
```

但是，这不起作用，控制台会给出以下错误消息：`Uncaught ReferenceError: settingValue is not defined`.

任何的想法？

什么`Uncaught ReferenceError: settingValue is not defined`意思？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:30:43.860

我正在使用 jquery.uploadify.v2.1.4.min.js 我还想在上传图片后更改上传图片，我发现一个简单的解决方案是将 hideButton 属性添加到我的上传设置

`'hideButton': 'true',`

而且您不必从 uploadify 加载浏览图像，只需从您的 css 加载它

```
 #your_uploadify_id{
    background: url(browse.png) no-repeat;
} 
```

然后在 onComplete 中将新图像加载到您的 css 中：

```
'onComplete'  : function(){
$("#browes_pictureUploader").css({'background-image':'url(change_picture.png)'});
} 
```

# python - 在 Python 中生成随机文件名的最佳方法

> ID：10501247
> 
> 赞同：128
> 
> 时间：2012-05-08T15:03:23.787
> 
> 标签：python, random, hash

在 Python 中，生成一些随机文本以添加到我保存到服务器的文件（名称）的好方法或最佳方法是什么，以确保它不会被覆盖。谢谢！

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-05-08T15:09:10.610

您可以使用[UUID 模块](http://docs.python.org/library/uuid.html)生成随机字符串：

```
import uuid
filename = str(uuid.uuid4()) 
```

这是一个有效的选择，因为[UUID](http://en.wikipedia.org/wiki/Universally_Unique_Identifier)生成器极不可能产生重复的标识符（在这种情况下是文件名）：

> 仅在接下来的 100 年每秒生成 10 亿个 UUID 之后，仅创建一个副本的概率约为 50%。如果地球上每个人都拥有 6 亿个 UUID，那么出现重复的概率约为 50%。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2012-05-08T15:04:18.530

Python 具有生成临时文件名的工具，请参见[http://docs.python.org/library/tempfile.html](http://docs.python.org/library/tempfile.html)。例如：

```
In [4]: import tempfile 
```

每次调用都会`tempfile.NamedTemporaryFile()`产生一个不同的临时文件，并且可以使用`.name`属性访问其名称，例如：

```
In [5]: tf = tempfile.NamedTemporaryFile()
In [6]: tf.name
Out[6]: 'c:\\blabla\\locals~1\\temp\\tmptecp3i'

In [7]: tf = tempfile.NamedTemporaryFile()
In [8]: tf.name
Out[8]: 'c:\\blabla\\locals~1\\temp\\tmpr8vvme' 
```

一旦你有了唯一的文件名，它就可以像任何常规文件一样使用。**注意**：默认情况下，文件在关闭时会被*删除。*但是，如果`delete`参数为 False，则不会自动删除该文件。

完整的参数集：

```
tempfile.NamedTemporaryFile([mode='w+b'[, bufsize=-1[, suffix=''[, prefix='tmp'[, dir=None[, delete=True]]]]]]) 
```

也可以指定临时文件的前缀（作为可以在文件创建期间提供的各种参数之一）：

```
In [9]: tf = tempfile.NamedTemporaryFile(prefix="zz")
In [10]: tf.name
Out[10]: 'c:\\blabla\\locals~1\\temp\\zzrc3pzk' 
```

可以在[此处找到使用临时文件的其他示例](http://www.doughellmann.com/PyMOTW/tempfile/)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-05-08T15:18:58.717

一种常见的方法是在文件名中添加时间戳作为前缀/后缀，以与文件建立某种时间关系。如果您需要更多唯一性，您仍然可以在其中添加一个随机字符串。

```
import datetime
basename = "mylogfile"
suffix = datetime.datetime.now().strftime("%y%m%d_%H%M%S")
filename = "_".join([basename, suffix]) # e.g. 'mylogfile_120508_171442' 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-04-22T16:48:23.627

OP 要求创建随机**文件名**而不是随机**文件**。时间和 UUID 可能会发生冲突。如果您在单台机器上工作（不是共享文件系统）并且您的进程/线程不会自行踩踏，请使用`os.getpid()`获取您自己的 PID 并将其用作唯一文件名的元素。其他进程显然不会获得相同的 PID。如果您是多线程的，请获取线程 ID。如果您的代码有其他方面，其中单个线程或进程可以生成多个不同的临时文件，您可能需要使用另一种技术。滚动索引可以工作（如果您不将它们保留这么长时间或使用这么多文件，您会担心翻转）。在这种情况下，为“活动”文件保留全局哈希/索引就足够了。

很抱歉冗长的解释，但这确实取决于您的确切用法。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-06-04T18:05:27.203

如果您不需要文件路径，而只需要具有预定义长度的随机字符串，您可以使用类似的东西。

```
>>> import random
>>> import string

>>> file_name = ''.join(random.choice(string.ascii_lowercase) for i in range(16))
>>> file_name
'ytrvmyhkaxlfaugx' 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-05-08T18:52:35.887

如果要将原始文件名保留为新文件名的一部分，可以使用当前时间的 MD5 哈希生成统一长度的唯一前缀：

```
from hashlib import md5
from time import localtime

def add_prefix(filename):
    prefix = md5(str(localtime()).encode('utf-8')).hexdigest()
    return f"{prefix}_{filename}" 
```

对 add_prefix('style.css') 的调用会生成如下序列：

```
a38ff35794ae366e442a0606e67035ba_style.css
7a5f8289323b0ebfdbc7c840ad3cb67b_style.css 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-17T18:40:22.887

在这里添加我的两分钱：

```
In [19]: tempfile.mkstemp('.png', 'bingo', '/tmp')[1]
Out[19]: '/tmp/bingoy6s3_k.png' 
```

根据 tempfile.mkstemp 的 python 文档，它以最安全的方式创建一个临时文件。请注意，该文件将在此调用后存在：

```
In [20]: os.path.exists(tempfile.mkstemp('.png', 'bingo', '/tmp')[1])
Out[20]: True 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-06-29T12:18:48.330

由于日期和时间每秒钟都在变化，因此您需要将数据时间与 uuid（通用唯一标识符）连接起来，这是您答案的完整代码

```
 import uuid
   imageName = '{}{:-%Y%m%d%H%M%S}.jpeg'.format(str(uuid.uuid4().hex), datetime.now()) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-19T07:20:42.303

我个人更喜欢让我的文本不仅是随机的/唯一的，而且也很漂亮，这就是为什么我喜欢 hashids 库，它从整数生成漂亮的随机文本。可以通过安装

`pip install hashids`

**片段：**

```
import hashids
hashids = hashids.Hashids(salt="this is my salt", )
print hashids.encode(1, 2, 3)
>>> laHquq 
```

**简短的介绍：**

> Hashids 是一个小型开源库，可以从数字生成短的、唯一的、非连续的 id。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-26T03:11:47.437

```
>>> import random
>>> import string    
>>> alias = ''.join(random.choice(string.ascii_letters) for _ in range(16))
>>> alias
'WrVkPmjeSOgTmCRG' 
```

您可以根据需要将“string.ascii_letters”更改为任何字符串格式以生成任何其他文本，例如手机号码、ID ... [![在此处输入图像描述](../Images/7f9e55522fe33a77e4a6a01d61e3e75c.png)](https://i.stack.imgur.com/JkXs0.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-27T00:36:08.173

```
import random

def Generate(): #function generates a random 6 digit number
    code = ''
    for i in range(6):
        code += str(random.randint(0,9))
    return code

print(Generate()+".txt") 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-09T03:31:14.480

在其他一些情况下，如果您需要随机文件名是合理的，请使用该`faker`模块。这将产生具有通用扩展名的“合理”文件名。此方法可能会在一段时间后发生名称冲突。我认为 prepend with`uuid`可能更好。

```
pip install faker 
```

然后，

```
from faker import Faker

fake = Faker()
for _ in range(10):
    print(fake.file_name()) 
```

`faker`文档链接： [https ://faker.readthedocs.io/en/master/index.html](https://faker.readthedocs.io/en/master/index.html)

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2017-04-26T16:48:37.357

您可以使用随机包：

```
import random
file = random.random() 
```

# ios - UTF-8 在 Safari 中不起作用（在 iphone 应用程序内）

> ID：10501251
> 
> 赞同：2
> 
> 时间：2012-05-08T15:03:31.247
> 
> 标签：ios, utf-8, ios-simulator

所以我几乎没有 iphone 编程经验，但我找到了一些基本的 rss 阅读器代码并玩弄它。

问题是，当我在 Chrome 浏览器中访问该链接时，它在字符编码方面工作正常，但是当我通过我拥有的 iphone 应用程序代码（在 iphone 模拟器中）中的内置浏览器访问它时，字符是未正确显示。

为什么会这样？

编辑：

所以我试图通过网络浏览器访问的是一个简单的 UTF-8 文本文件（我懒得放入 HTML），我看不到非英文字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:26:57.300

您必须告诉客户端该文件是 UTF-8 格式。如果您正在运行 apache，则可以将其添加到您的 .htaccess 文件中：

```
AddDefaultCharset UTF-8 
```

或者，您可以将文本放入 HTML 文件并为字符集编码添加元标记：

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`

# windows-phone-7 - 使用自签名证书从 webbrowser 访问 HTTPS 网页

> ID：10501253
> 
> 赞同：0
> 
> 时间：2012-05-08T15:03:38.023
> 
> 标签：windows-phone-7, windows-phone-7.1

我是 Windows 手机的新手。我正在开发一个网络应用程序，测试环境使用自签名 HTTPS 证书。有没有办法从`WebBrowser`我的页面内部访问测试环境页面？我尝试加载 URL，但我总是收到`NavigationFailed`事件，没有关于错误的详细信息。如果我加载一个普通的 HTTP url，它就可以工作。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:21:06.793

尝试在手机上安装证书。将证书通过电子邮件发送给自己，然后在手机上打开该电子邮件。

# c# - 对象可以自动分配给二代GC吗？

> ID：10501254
> 
> 赞同：4
> 
> 时间：2012-05-08T15:03:39.543
> 
> 标签：c#, .net, garbage-collection

在一次采访中，有人问我是否可以将某些对象自动分配给第二代垃圾收集器，我不知道该怎么回答。

这可能吗？

也许如果对象足够大以保存在零代或第一代中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T15:08:11.540

*新分配的对象形成了新一代的对象，并且隐含地是第 0 代集合，除非它们是大对象，在这种情况下，它们会在第 2 代集合中的大对象堆上继续。*

（链接：[垃圾收集的基础知识](http://msdn.microsoft.com/en-us/library/ee787088.aspx)）

所以是的，大对象自动进入第 2 代。

什么时候物体被认为是**大**的？

*在 Microsoft® .NE​​T Framework 1.1 和 2.0 中，如果对象大于或等于 85,000 字节，则将其视为大对象。这个数字是性能调整的结果。当一个对象分配请求进来并满足该大小阈值时，它将被分配到大对象堆上。这到底是什么意思？要理解这一点，解释一些有关 .NET 垃圾收集器的基础知识可能会有所帮助。*

（链接：[CLR 由内而外：发现大对象堆](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)）

# c# - 在 Ninject 中跳过停用处理

> ID：10501255
> 
> 赞同：2
> 
> 时间：2012-05-08T15:03:54.757
> 
> 标签：c#, ninject, ninject-2

我刚刚开始在一个（大型）项目中使用 Ninject，并且只使用 DI 来启动其中的一部分。我有一个广泛使用构造函数注入组织的子系统。使用 Ninject 在这个子系统中注入所有类之间的依赖关系非常好。但是，我对子系统之外的东西有依赖关系，我真的很想使用 Ninject 来自动注入，但不负责它们的生命周期。

我认为`Bind<T>.ToConstant(...)`会为我正在尝试做的事情工作。例如，我可能有一个 Monkey 类型的类作为单例，但我的应用程序的另一部分是在没有 Ninject 的情况下处理它的生命周期（例如，创建它并手动处理它）。创建配备 Ninject 的子系统后，我实例化一个内核，绑定我的子系统类，然后使用类似`Bind<Monkey>.ToConstant(Monkey.Instance)`绑定到各种“外部”依赖项。这在激活时效果很好，但在我处理内核时不能按需要工作。我的子系统的生命周期可能比这些外部依赖项更短，但是当我在内核上调用 Dispose 时，所有这些依赖项都会被释放，这不是我想要的。虽然我可以看到两种方式的论点，但 Ninject 会自动处理一个它没有创建的对象似乎有点可疑。我希望至少有一种方法可以选择退出这种行为，但到目前为止我还没有找到任何东西。对此有任何支持吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:21:28.147

添加`InTransientScope`到您的常量对象。

# javascript - 从 javascript 验证特定的验证组

> ID：10501261
> 
> 赞同：3
> 
> 时间：2012-05-08T15:04:13.883
> 
> 标签：javascript, asp.net, validation

我在按钮客户端单击事件中验证一些 .net 验证器。

```
if (typeof (Page_Validators) != "undefined") {

            for (var i = 0; i < Page_Validators.length; i++) {

                    ValidatorValidate(Page_Validators[i])
                    if (!Page_Validators[i].isvalid) {

                        alert("not valid");
                    }
                    else {
                        alert("valid");
                    }                    
            }
        } 
```

但是，如果我在同一页面中有多个验证组，那么在按钮上单击一个按钮将验证页面中的所有验证器，而不是与该按钮的验证组关联的验证器。

那么有没有办法只从javascript验证特定验证组的验证器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:06:56.423

尝试

```
Page_ClientValidate('ValidationGroup'); 
```

# c - GDB：函数返回后中断

> ID：10501268
> 
> 赞同：4
> 
> 时间：2012-05-08T15:04:41.050
> 
> 标签：c, gdb

有没有办法告诉 GDB 在给定函数返回后立即中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:06:57.903

如果您要执行该功能，`n[ext]`. 如果你在里面，`fin[ish]`它会在它返回时停止并显示返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:06:46.453

您可以在函数中添加断点，然后单`finish`步执行。

# iphone - 旋转超级视图后计算 CGAffineTransform 矩阵

> ID：10501273
> 
> 赞同：1
> 
> 时间：2012-05-08T15:04:56.393
> 
> 标签：iphone, ios, uiview, rotation, cgaffinetransform

这个很棘手！

我有视图 A 和视图 B，它是视图 A 的子视图。两个视图的框架都是不变的。

我通过更改变换矩阵来旋转视图 A：

```
viewA.transform = CGAffineTransformMakeRotation(angle); 
```

现在我想调整视图 B 的变换矩阵，使视觉位置和旋转保持不变，即 B 在改变 A 的旋转角度时不能移动/旋转。

显然我需要向相反的方向旋转视图 B，但这还不够。

我试过了，但 B 仍然摇摆不定：

```
viewB.transform = CGAffineTransformTranslate(CGAffineTransformMakeRotation(-angle), viewA.bounds.size.width, viewA.bounds.size.height); 
```

也许正确的矩阵也取决于 viewB 的框架......也许我需要使用正弦和余弦......？

我知道，我可以简单地使 B 成为 A 的兄弟视图，但我不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:14:58.670

有两件事突然出现在我的脑海中。

首先，为什么不从视图 A 中删除视图 B 并将其附加到视图 A 的父视图（即使它只是用于旋转序列）？它将在视觉上是相同的。

我的另一个想法是将动画包装在 CATransaction 中以保持动画同步。

我仍然建议不要将视图 B 保留在视图 A 上，并且必须运行两个动画，而不仅仅是一个。您将视图 B 保留在视图 A 中的原因是因为它的剪裁基于它的边界吗？

这适用于图层，但它适用于视图：

```
[CATransaction begin];
[CATransaction flush];
[CATransaction setAnimationDuration:2.0f];
[CATransaction setAnimationTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
CATransform3D transform = CATransform3DMakeRotation(M_PI/4, 0, 0, 1);
outerLayer.transform = CATransform3DConcat(outerLayer.transform, transform);
innerLayer.transform = CATransform3DInvert(outerLayer.transform);
[CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:11:04.320

嗨试试这个，让我知道请

```
viewB.transform=CGAffineTransformInvert(viewA.transform) 
```

# sql-server - SQL Server 2008：复制文件并重命名

> ID：10501274
> 
> 赞同：8
> 
> 时间：2012-05-08T15:04:56.410
> 
> 标签：sql-server, sql-server-2008, tsql

我在目录中有一个文件`\\myServer\Admin\temp\testtemp.txt`

我需要写一个 TSQL

1.  搜索`testtemp.txt`文件。
2.  如果存在，则创建它的副本并将其重命名为`Copytesttemp.txt`
3.  如果`testtemp.txt`上面的目录中已经有这样 的

    ```
    \\abcd\Admin\temp\Copytesttemp.txt 
    ```

4.  然后删除它并重新创建`Copytesttemp.txt`

我如何实现它？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T15:30:47.037

您可以使用 xp_cmdshell 运行您喜欢的任何 DOS 命令，例如

```
declare @cmdstring varchar(1000)

set @cmdstring = 'copy \\myServer\Admin\temp\testtemp.txt \\myServer\Admin\temp\Copytesttemp.txt'
exec master..xp_cmdshell @cmdstring 
```

只需确保在您的安装中启用了 xp_cmdshell。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:10:51.947

创建一个运行命令脚本来执行操作的 SQL 代理作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T12:39:13.800

你可以试试这个复制文件并重命名

```
EXEC master..xp_cmdshell 'COPY D:\T1\a.txt D:\T2\b.txt' 
```

只能像 CMD 一样复制和移动

```
EXEC master..xp_cmdshell 'COPY D:\T1\abcd.txt D:\T2'
EXEC master..xp_cmdshell 'Move D:\T1\abcd.txt D:\T2' 
```

# c# - 覆盖自定义控件的 TextChanged 事件不起作用

> ID：10501276
> 
> 赞同：1
> 
> 时间：2012-05-08T15:04:58.507
> 
> 标签：c#, winforms, user-controls, overriding

我在 C# Windows 应用程序的自定义用户控件中尝试了此代码：

```
public partial class HtextBox : DevExpress.XtraEditors.TextEdit
{
    protected override void OnTextChanged(KeyEventArgs kpe)
    {
        if (kpe.KeyCode == Keys.D1 ||
            kpe.KeyCode == Keys.D2 ||
            kpe.KeyCode == Keys.D3 ||
            kpe.KeyCode == Keys.D4 ||
            kpe.KeyCode == Keys.D5 ||
            kpe.KeyCode == Keys.D6 ||
            kpe.KeyCode == Keys.D7 ||
            kpe.KeyCode == Keys.D8 ||
            kpe.KeyCode == Keys.D9 ||
            kpe.KeyCode == Keys.D0
            ) {
                base.Text += kpe.KeyValue;
        }
    }
} 
```

我收到了这个错误：

> 错误 1 ​​'myproject.HtextBox.OnTextChanged(object, System.Windows.Forms.KeyEventArgs)': 找不到合适的方法来覆盖 E:\my project\myproject\HtextBox.cs

我想创建一个自定义文本框。在这里，我希望这个文本框只是将数字作为输入。一个例子是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:08:45.133

即使`KeyEventArgs`是 的子类`System.EventArgs`，C# 也不允许您使用子类参数覆盖方法。您需要使用[基类中的签名](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.ontextchanged.aspx)覆盖该方法，然后强制转换为`KeyEventArgs`您的函数内部：

```
protected override void OnTextChanged(System.EventArgs args) {
    KeyEventArgs kpe = (KeyEventArgs)args;
    ...
} 
```

**编辑：** 由于`OnTextChanged`不提供`KeyEventArgs`并且看起来您需要它们，请尝试覆盖不同的方法：

```
protected override void OnKeyDown(KeyEventArgs kpe) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:09:01.587

@dasblinkenlight 已对您的问题给出了正确答案。

但是，方法`Form.OnTextChanged`是一种事件引发方法，几乎​​不应该被覆盖。您可能想要创建一个事件处理程序，可能在您的派生类构造函数中：

```
this.TextChanged += new EventHandler(OnTextChanged); 
```

顺便说一句，在 Visual Studio 中，键入后按 Tab 键`+=`将为您生成一个事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:13:28.403

看起来您忘记了事件处理程序中的第一个参数。

将其更改为：

```
protected override void OnTextChanged(Object sender, KeyEventArgs kpe) 
    {
        if (kpe.KeyCode == Keys.D1 ||
            kpe.KeyCode == Keys.D2 ||
            kpe.KeyCode == Keys.D3 ||
            kpe.KeyCode == Keys.D4 ||
            kpe.KeyCode == Keys.D5 ||
            kpe.KeyCode == Keys.D6 ||
            kpe.KeyCode == Keys.D7 ||
            kpe.KeyCode == Keys.D8 ||
            kpe.KeyCode == Keys.D9 ||
            kpe.KeyCode == Keys.D0
            ) {
                base.Text += kpe.KeyValue;
        }
    } 
```

# jquery - 悬停时的preventDefault在Android上不起作用？

> ID：10501284
> 
> 赞同：1
> 
> 时间：2012-05-08T15:05:18.347
> 
> 标签：jquery, android, mobile

我有以下代码：

```
$('#a').hover(function(e) {
$(this).parent().children('ul').show();
e.preventDefault();
}); 
```

它可以防止链接在 iOS 上导航，但不能在 Android 上导航，有什​​么想法吗？

有关完整代码，请参见此处：[https ://tinker.io/ff4ab/6](https://tinker.io/ff4ab/6)

谢谢皮特

# jquery - jQuery 仅在未选中时选择所有复选框

> ID：10501286
> 
> 赞同：0
> 
> 时间：2012-05-08T15:05:21.360
> 
> 标签：jquery

我如何确保用户选择复选框应该只批准或拒绝全部而不是两者？让我们说如果用户选择两个`approve`（例如）并单击，`reject all`那么它应该只在两个复选框中选中，`reject column`因为两个复选框已经在“批准列”中选中

这是我尝试但未完成的内容，但您会了解我正在尝试做的事情。

[http://jsfiddle.net/abuhamzah/CgqVw/6/](http://jsfiddle.net/abuhamzah/CgqVw/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:13:05.010

我不确定你是否需要这样的东西？

```
$(function(){
    $('input[name=approve]').click(function(){
        $('.style6 input').attr('checked', $(this).is(':checked'));
    });          

    $('input[name=reject]').click(function(){
        $('.style5 input').attr('checked', $(this).is(':checked'));
    });        
});​ 
```

和[演示](http://jsfiddle.net/3E28n/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T00:26:16.367

这是你想要的？请注意，我稍微更改了您的 html 以使该过程更容易一些。

**HTML**：

```
<table class="style1" border="1">
    <tr>
        <td>
            Approve All<br />
            <input type="checkbox" name="approve" />
        </td>
        <td>
            Reject All<br />
            <input type="checkbox" name="reject" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="employee" class="approve" />
            <span>John</span>
        </td>
        <td>
            <input type="checkbox" name="employer" class="reject" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="employee0" class="approve" />
            <span>John</span>
        </td>
        <td>
            <input type="checkbox" name="employer" class="reject" />
       </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="employee1" class="approve" />
            <span>John</span>
        </td>
        <td>
            <input type="checkbox" name="employer" class="reject" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="employee" class="approve" />
            <span>John</span>
        </td>
        <td>
            <input type="checkbox" name="employer" class="reject" />
       </td>
    </tr>
</table> 
```

​</p>

**Javascript**：

```
$(function(){
    $('input[name=approve]').click(function(){
        var checked = this.checked;

        $('.approve').each(function() {
            if($(this).closest('tr').find('.reject').prop('checked') == false)
                this.checked = checked;
        });
    });          

    $('input[name=reject]').click(function(){
        var checked = this.checked;

        $('.reject').each(function() {
            if($(this).closest('tr').find('.approve').prop('checked') == false)
                this.checked = checked;
        });
    });

    $('.approve').click(function() {
        $(this).closest('tr').find('.reject').prop('checked', !this.checked);
    });

     $('.reject').click(function() {
        $(this).closest('tr').find('.approve').prop('checked', !this.checked);
    });
});​ 
```

**[现场演示](http://jsfiddle.net/CgqVw/15/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:16:07.980

我认为您想使用单选按钮而不是复选框。单选按钮预先构建了这种“选择一个”功能，从 UI 设计的角度来看更好。并且批准/拒绝所有框也应该是按钮。

当您单击全部批准/拒绝时，您可以遍历到目前为止已检查的单选组并进行适当的调整。像这样的东西会抓住那些：

```
$('input:radio[name=bar]:checked') 
```

# vb.net - vb.net 循环遍历公共结构并传递给泛型

> ID：10501288
> 
> 赞同：1
> 
> 时间：2012-05-08T15:05:26.053
> 
> 标签：vb.net, generics

我继承了一些糟糕的 vb.net 代码，并且在尝试找出用于循环当前结构的泛型时遇到了麻烦。

这是结构的片段

```
 Public Structure ApplicationDetails
    Dim ID As Integer
    Dim AgentID As Integer
    Dim ApplicationDate As Date
    Dim CompletedDate As Date 
```

这是填充它的疯狂

```
With ApplicationInfo
            .ID = If(Not IsDBNull(DT(0)("ID")), DT(0)("ID"), Nothing)
            .ApplicationDate = If(Not IsDBNull(DT(0)("ApplicationDate")), DT(0)("MortgageAmount"), Nothing)
            .CompletedDate = If(Not IsDBNull(DT(0)("CompleteDate")), DT(0)("MortgageAmount"), Nothing) 
```

现在我想做这样的事情：

```
 For Each item In ApplicationInfo.GetType().GetProperties()
            Dim thisType = item.GetType()
            Dim name = item.Name
            Dim value = DtItem(Of item.GetType())(0, name.ToString(), DT)
            item.SetValue(item, value, Nothing)
        Next
Private Function DtItem(Of T)(ByVal num As Integer, ByVal name As String, ByRef DT As DataTable) As T
    Return If(Not IsDBNull(DT(num)(name)), DT(num)(name), Nothing)
End Function 
```

但我不确定设置值的语法，并且在尝试获取类型时我得到 item.GetTYpe() 未声明。我知道我必须走在正确的轨道上，只是错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:08:29.693

若干问题。

首先，`SetValue`仅适用于对象类型，而不适用于值，因此您必须将结构更改为类。

```
Public Class ApplicationDetails
End Class 
```

接下来，您正在遍历属性，但您的“结构”只有字段。所以你需要添加属性：

```
Public Class ApplicationDetails
  Private _ID As Integer

  Property ID As Integer
    Get
      Return _ID
    End Get
    Set(ByVal value As Integer)
      _ID = value
    End Set
  End Property

  //' etc

End Class 
```

否则，您将不得不使用`GetFields`.

我认为泛型在这里不起作用，因为您只处理对象并且您不知道类型（尽管有反射）：

```
Private Function DtItem(ByVal num As Integer, ByVal name As String, ByRef DT As DataTable) As Object
  Return If(Not IsDBNull(DT(num)(name)), DT(num)(name), Nothing)
End Function 
```

最后，您的反射调用是错误的。尝试将其更改为：

```
For Each item As PropertyInfo In ApplicationInfo.GetType().GetProperties
  Dim value As Object = DtItem(0, item.Name, _dt)
  If item.CanWrite Then
    item.SetValue(ApplicationInfo, value, Nothing)
  End If
Next 
```

我不确定通过反思来做这件事是否会给你带来任何好处。在您的“疯狂”示例中，看起来您可能正在尝试将`MortgageAmount`我假设为小数的 a 放入日期字段中。这可能需要看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:12:10.953

我认为您需要重新考虑那里的功能分解。将一行移到函数中并没有太多好处，而且我认为您无法像尝试这样做的方式将类型构造函数传递给泛型。您还混淆了一些类型检查。

请尝试以下方法：

```
For Each item In ApplicationInfo.GetType().GetProperties()
    Dim theName As String = item.Name,
        isNullable = Not item.PropertyType.IsValueType OrElse _
                     Nullable.GetUnderlyingType(item.PropertyType) IsNot Nothing

    If item.CanWrite Then
        If Not IsDBNull(DT(0)(theName))
            item.SetValue(ApplicationInfo, DT(0)(theName), Nothing)
        ElseIf isNullable
            item.SetValue(ApplicationInfo, Nothing, Nothing)
        End If
    End If
Next 
```

如果您的代码在对象初始化后立即执行，则`isNullable`检查是无关的，您可以简单地不采取任何措施，因为属性将被初始化为 null。否则，我建议您执行检查，这样您就不会尝试分配`Nothing`给会引发异常的值类型。或者，您可以修改结构以使用可为空的引用类型，即：

```
Public Structure ApplicationDetails
    Property ID As Integer?
    Property AgentID As Integer?
    Property ApplicationDate As Date?
    Property CompletedDate As Date?
End Structure 
```

**编辑**

正如 LarsTech 指出的那样，您的结构成员不是属性，除非您修改结构以指示这些字段实际上是属性，否则编译器将自动为其生成 getter 和 setter 。

# sql-server-2008 - 找出正在写入 SQL 表的应用程序以及何时写入

> ID：10501290
> 
> 赞同：2
> 
> 时间：2012-05-08T15:05:31.860
> 
> 标签：sql-server-2008, audit, audit-tables

无论如何审计一个 SQL 表，您可以在其中获取信息，例如什么应用程序正在写入它以及它何时写入？

有一堆应用程序用户在这里使用，我已经梳理了每一个，找不到他们中的任何一个在 SQL Server 中写入这个表的位置。这是一张重要的桌子。

这让我疯狂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:52:38.623

您必须从一开始就设置审计（通常通过触发器写入审计表，其中包括正在写入表的用户或应用程序）。如果您没有在系统中设计审计，则无法找到过去数据的此信息。

当您设置可审计项时，您可能希望包含由这些系统变量填充的字段：

suser_sname()、host_name()、app_name()、getdate()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:56:07.540

如果您知道它发生的确切时间，您可以使用 sp_who2 或[sp_whoisactive类型的过程来捕捉它们](http://whoisactive.com)*，这些过程会返回有关***当前正在**运行的进程的大量有用信息。

 **但是，听起来您无法预见此活动，因此我建议您对有问题的数据库和表运行 SQL Profiler 跟踪和过滤器。请务必捕获有助于您查明责任方的事件（登录名、主机名等）。网络上有无数的文章可以引导您完成一个简单的跟踪。**

# c++ - 什么会延迟 VxWorks 任务的抢占？

> ID：10501292
> 
> 赞同：1
> 
> 时间：2012-05-08T15:05:40.713
> 
> 标签：c++, file-io, vxworks

在我目前的项目中，我有两个级别的任务，在 VxWorks 系统中，一个用于数字运算和其他工作的较高优先级 (100) 任务，然后是一个用于将后台数据记录到板载闪存的较低优先级 (200) 任务。使用 fwrite() 调用对存储在 TFFS 文件系统上的文件进行日志记录。高优先级任务以周期性速率运行，然后休眠以允许完成后台日志记录。

我的期望是后台日志记录任务将在高优先级任务休眠时运行，并在高优先级任务唤醒时被抢占。

一旦高优先级任务准备好再次运行，当有足够的数据来保持记录任务持续被占用时，似乎正在发生的事情是暂停后台记录任务的显着延迟。

在 Power PC 架构上的 VxWorks 6.8 下，什么会延迟优先级较低的任务的抢占？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:06:25.773

你没有量化显着，所以以下只是猜测......

你提到写入闪存。问题之一是写入闪存通常需要驱动程序轮询硬件状态以确保操作成功完成。

在某些操作期间，文件系统可能会暂时禁用抢占以确保不会发生损坏 - 再加上必须等待硬件完成，这可能会导致延迟。

如果您可以访问 System Viewer 工具，这将有助于确定延迟的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:19:26.780

我支持使用 System Viewer 的建议，它会显示 TFFS 堆栈中涉及的所有任务，您可能会惊讶有多少层。如果您正在使用大量数据进行 fwrite，则闪存访问可能很大（并且正如 Benoit 所说的那样很慢）。您可以尝试一些较小的 fwrite。我建议做一个测试，看看 fwrites() 对于不同大小需要多长时间，当你跨越闪存块边界时，你可能会看到使用相同大小的测试之间的差异。

# c# - 使用 LINQ 上下文更新记录？

> ID：10501293
> 
> 赞同：2
> 
> 时间：2012-05-08T15:05:45.143
> 
> 标签：c#, .net, linq, linq-to-sql, linq-to-entities

我正在尝试使用单个值更新来更新用户表，但我无法弄清楚我做错了什么。这就是我所拥有的：

```
public static void ApplyROB(string  ROBread, string userName)
        {
            using (SERTEntities ctx = CommonSERT.GetSERTContext())
            {
                    // +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=
                    // Audit of the transfer
                datUser trUser = new datUserRole();
                trUser.ROB = ROBread;
                trUser.AccountName = userName;
                // Persist update to DB
                ctx.SaveChanges();

            }
        } 
```

我走远了吗？当我点击更新时没有任何反应。我怎么说，其中用户名 = 用户名？我做对了吗？

基本上需要一个简单的：

```
update datUser set ROB = "Y" where AccountName= "myusername" 
```

在 LINQ 中使用 Context 变得有点复杂

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:08:43.960

您没有将新实体添加到上下文中，因此当您保存时，上下文不知道任何更改。你需要类似...

```
ctx.datUserRoles.Add(datUserRole) 
```

要进行更新，您需要从上下文中检索实体，对其进行更改，然后保存...所以：

```
var entity=ctx.datUserRoles.SingleOrDefault(dur=>dur.AccountName==someUserName);
if(entity!=null)
{
    entity.someProp=someVal;
    ctx.SaveChanges();
}
else
{
    throw new UnexpectedOperationException(); //or however you want to fail
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:11:34.063

如果您需要更新。也许是这样的：

```
public static void ApplyROB(string  ROBread, string userName)
{
    using (SERTEntities ctx = CommonSERT.GetSERTContext())
    {
        var trUser= ctx.datUserRole.Where(a=>a.AccountName==userName)
                                   .FirstOrDefault();
        if(trUser!=null)
        {
            trUser.ROB = ROBread;
            ctx.SaveChanges();
        }
    }
} 
```

如果您确定您将始终有一些东西要更新，您可以使用`First()`. 然后你不需要检查是否`trUser`是`null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:15:13.813

从某种意义上说，spender 是正确的，但在另一种意义上是错误的：您想要更新现有记录。

为此，您需要先选择记录，例如：

```
var user = 
    (from u in ctx.datUserRoles 
    where u.AccountName == "accountname"
    select u).FirstOrDefault(); 
```

同一类型的有效事物在哪里`accountname`- 没关系，因为您可以根据需要选择它，您可以对其进行修改以满足您的标准。然后，一旦您拥有该项目，请执行以下操作：

```
if (user != null) {
    user.ROB = ROBread;
    ctx.SaveChanges();
} 
```

# c - 如何在紧凑的处理循环中分析/识别缓慢的步骤？

> ID：10501295
> 
> 赞同：1
> 
> 时间：2012-05-08T15:06:00.480
> 
> 标签：c, image-processing, opencv, profiling

我有一些专有的图像处理代码。它遍历图像并计算图像的一些统计数据。我正在谈论的这种代码的示例可以在下面看到，尽管这**不是**需要优化的算法。

我的问题是，有什么工具可以用来分析这些紧密的循环，以确定哪里慢？昏昏欲睡，Windows 性能分析器都更专注于识别哪些方法/函数很慢。我已经知道什么功能很慢，我只需要弄清楚如何优化它。

```
void BGR2YUV(IplImage* bgrImg, IplImage* yuvImg)
{
    const int height    = bgrImg->height;
    const int width     = bgrImg->width;
    const int step      = bgrImg->widthStep;
    const int channels  = bgrImg->nChannels;

    assert(channels == 3);
    assert(bgrImg->height == yuvImg->height);
    assert(bgrImg->width == yuvImg->width);
    // for reasons that are not clear to me, these are not the same.
    // Code below has been modified to reflect this fact, but if they 
    // could be the same, the code below gets sped up a bit.
//  assert(bgrImg->widthStep == yuvImg->widthStep);
    assert(bgrImg->nChannels == yuvImg->nChannels);

    const uchar* bgr = (uchar*) bgrImg->imageData;
          uchar* yuv = (uchar*) yuvImg->imageData;

    for (int i = 0; i < height; i++) 
    {
        for (int j = 0; j < width; j++) 
        {
            const int ixBGR = i*step+j*channels;
            const int b = (int) bgr[ixBGR+0];
            const int g = (int) bgr[ixBGR+1];
            const int r = (int) bgr[ixBGR+2];

            const int y = (int) (0.299 * r + 0.587 * g + 0.114 * b);
            const double di = 0.596 * r - 0.274 * g - 0.322 * b;
            const double dq = 0.211 * r - 0.523 * g + 0.312 * b;
            // Do some shifting and trimming to get i & q to fit into uchars.
            const int iv = (int) (128 + max(-128.0, min(127.0, di)));
            const int q = (int) (128 + max(-128.0, min(127.0, dq)));

            const int ixYUV = i*yuvImg->widthStep + j*channels;
            yuv[ixYUV+0] = (uchar)y;
            yuv[ixYUV+1] = (uchar)iv;
            yuv[ixYUV+2] = (uchar)q;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:55:56.737

由于您无法共享代码，因此我有一些一般性建议。首先记住分析器告诉你代码的哪一部分花费了更多时间，更高级的可以建议一些修改以提高速度。但总的来说，算法优化比调整代码的速度要快得多。对于您共享的示例代码，如果您使用谷歌搜索高效或快速的 RGB 到 YUV 转换，您会发现大量方法（从使用查找表到 SSE2 和 GPU 利用率）可以显着提高速度，我敢肯定没有一个分析器可以建议其中任何一个。

因此，一旦您知道该方法的哪一部分速度较慢，您就可以按照以下两个步骤进行操作：

1.  **算法优化**：了解算法在做什么，并尝试提出更优化的算法。谷歌是你的朋友，很可能有人已经考虑过优化该算法并与世界分享想法/代码。通过，您通常应该考虑您拥有的约束。例如，加速代码的最简单但最有效的图像处理方法是将图像的大小减小到尽可能小。一个好的经验法则是质疑代码/算法中所做的每一个假设。例如，是否需要处理 800x600 的图像？或者可以在不影响准确性的情况下将尺寸减小到 320x240？是否需要处理三通道图像？或者同样可以用灰度图像实现？我想你应该已经明白了。

2.  **实施优化**：一些高级分析工具可以建议如何调整代码，您可以尝试找到一个负担得起的代码。有些人可能不同意，但我认为没有必要使用这些工具。通常不需要图像处理精确值，例如，可以使用整数对滤波器响应的粗略近似来代替双浮点数的精确计算。SIMD 指令和最近的 GPU 已被证明非常适合优化图像处理方法。如果可能的话，你应该考虑到这一点。你总是可以谷歌如何优化循环或一些特定的操作。毕竟你可以做的一种可能性是将你的代码分解成更小的逻辑部分并改变它，这样算法或方法就不会通过共享这些部分来揭示。

# python - 计算文本中字典的键的频率

> ID：10501299
> 
> 赞同：2
> 
> 时间：2012-05-08T15:06:18.940
> 
> 标签：python

我有一个词的字典。对于字典中的每个键，我想在文章中找到它的频率。

打开文章后，我会

```
for k, v in sourted_key.items():
    for token in re.findall(k, data)
        token[form] += 1 
```

在 're.findall(k, data)' 中的键必须是字符串。但是这个字典中的键不是。我想搜索密钥。还有其他解决方案吗？请注意，KEYS 包含许多标点符号。

例如，如果键是“手”。它只匹配手。不方便，钱德勒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:11:02.727

在 Python 2.7+ 中，您可以使用[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)：

```
import re, collections

text = '''Nullam euismod magna et ipsum tristique suscipit. Aliquam ipsum libero, cursus et rutrum ut, suscipit id enim. Maecenas vel justo dolor. Integer id purus ante. Aliquam volutpat iaculis consectetur. Suspendisse justo sapien, tincidunt ut consequat eget, fringilla id sapien. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Praesent mattis velit vitae libero luctus posuere. Vestibulum ac erat nibh, vel egestas enim. Ut ac eros ipsum, ut mattis justo. Praesent dignissim odio vitae nisl hendrerit sodales. In non felis leo, vehicula aliquam risus. Morbi condimentum nunc sit amet enim rutrum a gravida lacus pharetra. Ut eu nisi et magna hendrerit pharetra placerat vel turpis. Curabitur nec nunc et augue tristique semper.'''

c = collections.Counter(w.lower() for w in re.findall(r'\w+|[.,:;?!]', text))
words = set(('et', 'ipsum', ',', '?'))
for w in words:
  print('%s: %d' % (w, c.get(w, 0))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:17:43.423

```
my_text = 'abc,abc,efr,sdgret,er,ttt,'

my_dict = {'abc':0, 'er': 0}

for word in my_text.split(','):
    if word in my_dict:
        my_dict[word] += 1 
```

结果：

```
>>> my_dict
{'abc': 2, 'er': 1} 
```

编辑：更通用的解决方案

对于普通文章，我们需要使用正则表达式：

```
import re

my_string = "Wow! Is this true? Really!?!? This is crazy!"
my_dict = {'IS': 0, 'TRUE': 0}

words = re.findall(r'\w+', my_string)
cap_words = [word.upper() for word in words]

for word in cap_words:
    if word in my_dict:
        my_dict[word] += 1 
```

结果：

```
>>> my_dict
{'IS': 2, 'TRUE': 1} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T15:21:13.907

我会那样做

```
tokens = {} 
d= {"a":1,"b":2}
data = "abca"
for k in d.keys():
    tokens[k] = data.count(k) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T15:14:12.970

尽量`re.findall( re.escape( k ), data )`确保“单词”中的特殊字符不会引起问题。

但我的猜测是这不是你的问题。的结果`findall()`是匹配列表，而不是字符串。`re.MatchObject`没有定义`__getitem__`哪种方法`[form]`不起作用。

您可能的意思是`counts[token.group()] += 1`where`counts`是一个[默认值为 0 的字典](http://code.activestate.com/recipes/389639-default-dictionary/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T15:26:01.707

## 选项 A

```
import re

text = """Now is the time for all good men to come to the aid of their country.  A man is only as good as all his thoughts."""
words = dict()

for word in re.findall('[^ .;]+', text):
    if words.get(word.lower(), False):
        words[word.lower()] += 1
    else:
        words[word.lower()] = 1

print words 
```

这产生...

```
{'a': 1, 'all': 2, 'good': 2, 'for': 1, 'their': 1, 'of': 1, 
'is': 2, 'men': 1, 'as': 2, 'country': 1, 'to': 2, 'only': 1, 
'his': 1, 'time': 1, 'aid': 1, 'the': 2, 'now': 1, 'come': 1, 
'thoughts': 1, 'man': 1} 
```

## 选项 B：使用默认字典

```
import re
from collections import defaultdict

text = """Now is the time for all good men to come to the aid of their country.  A man is only as good as all his thoughts."""
words = defaultdict(int)

for word in re.findall('[^ .;]+', text):
    words[word.lower()] += 1

print words 
```

这导致...

```
defaultdict(<type 'int'>, {'a': 1, 'all': 2, 'good': 2, 'for': 1, 
'their': 1, 'of': 1, 'is': 2, 'men': 1, 'as': 2, 'country': 1, 'to': 2, 
'only': 1, 'his': 1, 'time': 1, 'aid': 1, 'the': 2, 'now': 1, 'come': 1, 
'thoughts': 1, 'man': 1}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T15:26:07.310

```
article = "I have a dict of words. For each key in the dict, I want to find its frequency in an article"

words = {"dict", "i", "in", "key"} # set of words

wordsFreq = {}

wordsInArticle = tuple(word.lower() for word in atricle.split(" "))

for word in wordsInArticle:
  if word in wordsFreq:
    wordsFreq[word]= wordsFreq[word] + 1 if word in wordsFreq else 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T15:55:45.150

由于每个人都在摇摆...

与此不同的是正则表达式将文本与标点符号分开。我用`\b\w+\b`

```
import re 

article='''Richard II (13671400) was King of England, a member of the House of Plantagenet and the last of its main-line kings. He ruled from 1377 until he was deposed in 1399\. Richard was a son of Edward, the Black Prince, and was born during the reign of his grandfather, Edward III. Richard was tall, good-looking and intelligent. Although probably not insane, as earlier historians believed, he may have suffered from one or several personality disorders that may have become more apparent toward the end of his reign. Less of a warrior than either his father or grandfather, he sought to bring an end to the Hundred Years' War that Edward III had started. He was a firm believer in the royal prerogative, which led him to restrain the power of his nobility and rely on a private retinue for military protection instead. He also cultivated a courtly atmosphere where the king was an elevated figure, and art and culture were at the centre, in contrast to the fraternal, martial court of his grandfather. Richard's posthumous reputation has to a large extent been shaped by Shakespeare, whose play Richard II portrays Richard's misrule and Bolingbroke's deposition as responsible for the 15th-century Wars of the Roses. Most authorities agree that the way in which he carried his policies out was unacceptable to the political establishment, and this led to his downfall.'''
words = {}

for word in re.findall(r'\b\w+\b', article):
    word=word.lower()
    if word in words:
        words[word]+=1
    else:
        words[word]=1    

print [(k,v) for v, k in sorted(((v, k) for k, v in words.items()), reverse=True)] 
```

打印出按频率排序的 (word, count) 元组列表：

```
[('the', 15), ('of', 11), ('was', 8), ('and', 8), ('to', 7), ('his', 7), ('he', 7), 
 ('a', 7), ('richard', 6), ('in', 4), ('that', 3), ('s', 3), ('grandfather', 3), 
 ('edward', 3), ('which', 2), ('reign', 2), ('or', 2), ('may', 2), ('led', 2), 
 ('king', 2), ('iii', 2), ('ii', 2), ('have', 2), ('from', 2), ('for', 2), ('end', 2), 
 ('as', 2), ('an', 2), ('years', 1), ('whose', 1), ('where', 1), ('were', 1), ('way', 1), ('wars', 1), ('warrior', 1), ('war', 1), ('until', 1), ('unacceptable', 1), ('toward', 1), ('this', 1), ('than', 1), ('tall', 1), ('suffered', 1), ('started', 1), ('sought', 1), ('son', 1), ('shaped', 1), ('shakespeare', 1), ('several', 1), ('ruled', 1), ('royal', 1), ('roses', 1), ('retinue', 1), ('restrain', 1), ('responsible', 1), ('reputation', 1), ('rely', 1), ('protection', 1), ('probably', 1), ('private', 1), ('prince', 1), ('prerogative', 1), ('power', 1), ('posthumous', 1), ('portrays', 1), ('political', 1), ('policies', 1), ('play', 1), ('plantagenet', 1), ('personality', 1), ('out', 1), ('one', 1), ('on', 1), ('not', 1), ('nobility', 1), ('most', 1), ('more', 1), ('misrule', 1), ('military', 1), ('member', 1), ('martial', 1), ('main', 1), ('looking', 1), ('line', 1), ('less', 1), ('last', 1), ('large', 1), ('kings', 1), ('its', 1), ('intelligent', 1), ('instead', 1), ('insane', 1), ('hundred', 1), ('house', 1), ('historians', 1), ('him', 1), ('has', 1), ('had', 1), ('good', 1), ('fraternal', 1), ('firm', 1), ('figure', 1), ('father', 1), ('extent', 1), ('establishment', 1), ('england', 1), ('elevated', 1), ('either', 1), ('earlier', 1), ('during', 1), ('downfall', 1), ('disorders', 1), ('deposition', 1), ('deposed', 1), ('culture', 1), ('cultivated', 1), ('courtly', 1), ('court', 1), ('contrast', 1), ('century', 1), ('centre', 1), ('carried', 1), ('by', 1), ('bring', 1), ('born', 1), ('bolingbroke', 1), ('black', 1), ('believer', 1), ('believed', 1), ('been', 1), ('become', 1), ('authorities', 1), ('atmosphere', 1), ('at', 1), ('art', 1), ('apparent', 1), ('although', 1), ('also', 1), ('agree', 1), ('15th', 1), ('1399', 1), ('1377', 1), ('13671400', 1)] 
```

# java - 从 mongodb 文档中删除 _class

> ID：10501300
> 
> 赞同：-3
> 
> 时间：2012-05-08T15:06:27.017
> 
> 标签：java, mongodb, spring-mvc

我们都知道，如果我们尝试通过 spring-mvc 将文档添加到 mongodb，spring 会添加 _class 来跟踪和促进文档的未来编组/解组。如果 in 成为一种开销，并且可能不想在 mongodb 中包含 _class 。以下简单的 spring 配置有助于避免在 mongodb 中添加 _class。

```
<bean id="defaultTypeMapper"
class="org.springframework.data.mongodb.core.convert.DefaultTypeMapper">
<property name="typeKey"><null/></property>
</bean>

<bean id="defaultMongoConverter"
class="org.springframework.data.mongodb.core.convert.MappingMongoConverter">
<constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
<constructor-arg name="mappingContext" ref="mappingContext" />
<property name="typeMapper" ref="defaultTypeMapper"></property>
</bean>

<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
<constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
<constructor-arg name="mongoConverter" ref="defaultMongoConverter" />
<property name="writeResultChecking" value="EXCEPTION" />
</bean> 
```

可以很容易地找到 mongodbFactory 和 mappingContext 的配置。所以我没有在这里添加它。请注意我包含 typeKey 的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:02:08.353

问题是：如何抑制spring框架添加到MongoDB对象以支持多态的_class条目。如果您不需要多态性支持，如果您将 POJO / 模型类重构为不同的包， _class 会浪费空间并引入问题。

上面的例子很接近，但有一些错误（例如 DefaultTypeMapper 应该是 DefaultMongoTypeMapper 并且 typeKey 是一个构造函数参数，而不是设置为属性）。

以下对我有用...

```
<mongo:mongo host="hostname" port="27017">
    <mongo:options
        ...options...
</mongo:mongo>

<mongo:db-factory dbname="blee" username="blee" password="blee" mongo-ref="mongo"/>

<bean id="mongoTypeMapper" class="org.springframework.data.mongodb.core.convert.DefaultMongoTypeMapper">
    <constructor-arg name="typeKey"><null/></constructor-arg>
</bean>

<bean id="mongoMappingContext" class="org.springframework.data.mongodb.core.mapping.MongoMappingContext" />

<bean id="mongoConverter" class="org.springframework.data.mongodb.core.convert.MappingMongoConverter">
  <constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
  <constructor-arg name="mappingContext" ref="mongoMappingContext" />
  <property name="typeMapper" ref="mongoTypeMapper"></property>
</bean>

<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    <constructor-arg name="mongoConverter" ref="mongoConverter" />
    <property name="writeResultChecking" value="EXCEPTION" /> 
</bean> 
```

# facebook - Facebook XFBML Like 按钮在 Like 后消失

> ID：10501306
> 
> 赞同：1
> 
> 时间：2012-05-08T15:06:42.733
> 
> 标签：facebook, button, facebook-like, xfbml

类似于我在这里读到的问题，但略有不同。我已将类似按钮的 XFBML 版本添加到我正在开发环境中处理的页面中。一开始看起来还不错。我点了赞，查看了我的 Facebook 个人资料，看到它在我的时间轴上被共享，然后我点击了“不喜欢”（我在使用 iframe 版本之前已经这样做了，没有遇到任何问题）。

单击“不喜欢”后，该按钮完全从我的页面上消失了。尽管生成的标记仍然存在。

为了使这个问题更加奇怪，当将“赞”按钮放在不同的页面上时，我没有遇到同样的问题。在单独的（第 3 页）页面上，我这样做了。

我觉得这是一个很长的镜头，但任何帮助将不胜感激。

编辑：说“拧这个”，并决定为我的所有按钮使用 AddThis。通过 AddThis 提供的 facebook like 按钮也不会出现。如此迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:40:02.847

您能否更改 Facebook iframe 的 href 属性并查看按钮是否出现？

# javascript - 在 Rafael.js 中未触发 Mouseout 事件

> ID：10501308
> 
> 赞同：0
> 
> 时间：2012-05-08T15:06:48.610
> 
> 标签：javascript, internet-explorer, dom-events, raphael

我有许多使用 Raphael.js 绘制的形状，我需要在鼠标滚动时添加阴影并稍微放大。我在 Firefox 和 Chrome 中一切正常，但在 Internet Explorer 中，该`mouseout`事件似乎没有触发。

这是每个六边形形状的`mouseover`/`mouseout`代码（六边形是对 rafael 元素的引用，`this`/`_Promise`是对定义事件等的类的引用）：

```
 this.hexagon.mouseover(function(){
        _Promise.hexagon.toFront();
        _Promise.hexagon.attr( { "transform": "...s" + scaleAmountOnRollover } );
        _Promise.shadow = _Promise.hexagon.glow({ "width": 8, "opacity": 0.4 });
    });

    this.hexagon.mouseout(function(){
        _Promise.hexagon.attr( { "transform": "...s" + (1/scaleAmountOnRollover) } );
        _Promise.shadow.remove();
    }); 
```

在 IE（直到并包括第 9 版）中，六边形形状会越来越大，因为`mouseout`事件没有触发。我已经放了一些`console.logs`在那里检查这绝对是这种情况。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:08:16.457

IE 上的事件冒泡机制不同，因此会为`mouseover`/`mouseout`事件生成不稳定的行为，但它们的创新（是的，我们仍在谈论 IE！）来拯救。

您可以使用 IE 的`mouseenter`and`mouseleave`而不是标准的`mouseover`and`mouseout`来实现一致的行为。当然，您将不得不退出 Raphaël 的 API 并单独实现这些：绑定另一个事件侦听器并传递 IE 特定的事件类型，因为您必须调用版本 6-8 的遗留代码，使用这些代码，`attachEvent`或者`addEventListener`版本 9 以后。

[您可以在有关该主题的 quirksmode 文章](http://www.quirksmode.org/dom/events/mouseover.html)中阅读有关这些 IE 特定事件的更多信息。

如果您更喜欢为此使用 jQuery，他们已经通过提供[mouseleave](http://api.jquery.com/mouseleave/)作为 API 的一部分来考虑这一点。

# selenium - 使用 Selenium WebDriver 加速鼠标

> ID：10501313
> 
> 赞同：2
> 
> 时间：2012-05-08T15:06:58.140
> 
> 标签：selenium, webdriver

我继承了一些 Selenium Webdriver 代码（Ubuntu 11.10、Xvfb + Selenium 2.19.0 和 Firefox 10.0.2，因为这是我能够在实际安装的时间内找到的唯一组合。）

注意：我没有使用旧的 Selenium 1.0 系统，大多数文档似乎都集中在该系统上。

我的测试运行非常缓慢。简单的鼠标移动需要半秒钟以上。

查看（未记录？！）/tmp/native_ff_events_log 文件，我发现每个鼠标操作都被分成更小的部分：

```
D14:14:37:070 cpp/webdriver-interactions/interactions_linux_mouse.cpp(307) ---------- starting mouseMoveTo: 0x7fbad37546a0---------
D14:14:37:070 cpp/webdriver-interactions/interactions_linux_mouse.cpp(328) From: (39, 169) to: (350, 86)
D14:14:37:070 cpp/webdriver-interactions/interactions_linux_mouse.cpp(329) Distance: 321 steps: 64
D14:14:37:070 cpp/webdriver-interactions/interactions_linux_mouse.cpp(339) Moving to: (39, 169)
D14:14:37:070 cpp/webdriver-interactions/interactions_linux_mouse.cpp(231) Type: motion time: 401697248
D14:14:37:080 cpp/webdriver-interactions/interactions_linux_mouse.cpp(339) Moving to: (43, 167)
D14:14:37:080 cpp/webdriver-interactions/interactions_linux_mouse.cpp(231) Type: motion time: 401697258
D14:14:37:090 cpp/webdriver-interactions/interactions_linux_mouse.cpp(339) Moving to: (48, 166)
D14:14:37:090 cpp/webdriver-interactions/interactions_linux_mouse.cpp(231) Type: motion time: 401697268
D14:14:37:100 cpp/webdriver-interactions/interactions_linux_mouse.cpp(339) Moving to: (53, 165)
D14:14:37:100 cpp/webdriver-interactions/interactions_linux_mouse.cpp(231) Type: motion time: 401697278
D14:14:37:110 cpp/webdriver-interactions/interactions_linux_mouse.cpp(339) Moving to: (58, 163) 
```

似乎有一些故意放慢速度，类似于传统的 Selenium `setMouseSpeed(pixels)`，它将拖放操作分解为 10 个像素的子移动。

我没有使用拖放。另外，我相信这种方法不再适用于我。

我不认为这些子运动是必要的，删除它们可能会大大加快运行速度。

**有没有办法在 Selenium 2 的 Webdriver 中增加鼠标步的大小？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:03:05.857

奇怪的是，查看源代码我发现了两个使 mouseMoveTo() 如此缓慢的值：

```
const int stepSizeInPixels = 5; 
```

[http://code.google.com/p/selenium/source/browse/trunk/cpp/webdriver-interactions/interactions_linux_mouse.cpp?r=13310#278](http://code.google.com/p/selenium/source/browse/trunk/cpp/webdriver-interactions/interactions_linux_mouse.cpp?r=13310#278)

```
 const int timePerEvent = 10 /* ms */; 
```

[http://code.google.com/p/selenium/source/browse/trunk/cpp/webdriver-interactions/interactions_linux_mouse.cpp?r=13310#270](http://code.google.com/p/selenium/source/browse/trunk/cpp/webdriver-interactions/interactions_linux_mouse.cpp?r=13310#270)

不幸的是，由于是硬编码的，因此无法在运行时级别更改此值。

当鼠标需要从 A 点移动到 B 点时，它会使用 5 像素的步长，间隔为 10 毫秒。我的测试用例的一个步骤是花费大约 1.2 秒来执行一个简单的 click()

我重新编译了 firefox 扩展，将 stepSizeInPixels 更改为 50，将 timePerEvent 更改为 5ms。现在我的测试用例用了 18 秒，比原来的扩展少了 8 秒。

# javascript - 固定图像在 DIV 底部的位置

> ID：10501315
> 
> 赞同：0
> 
> 时间：2012-05-08T15:07:00.267
> 
> 标签：javascript, html, css

我有一个 div（或文章或部分..），其中显示了页面的主要内容。（包括：文本、图像、段落等）。

我想要的是：我希望图像顶部位于该 div 的底部。但：

如果 DIV 的高度大于浏览器窗口的高度，我希望此图像位于用户始终可见的位置视口底部。

如果 DIV 的高度比浏览器窗口的视口短，那么我希望此图像位于 DIV 底端所在的任何位置。

前任。1- DIV比视口长，所以底部图像固定在视口底部

**图像用 -> ... 表示**

```
==================
=   ______       =
=  |      |      =
=  | DIV  |      = 
=  |      |      =  --> VIEWPORT FRAME
=  |      |      =
=  |...   |      =
==================
   |      |      
   |      |      
   |------| 
```

前任。2- DIV比视口短，所以底图固定在DIV的底部

**图像用 -> ... 表示**

```
==================
=   ______       =
=  |      |      =
=  | DIV  |      = 
=  |...   |      =
=  |------|      =
=                =
================== 
```

当然，我可以使用 JavaScript 来实现这一点。但我想知道这是否可以通过使用额外的层 DIV 或包装器或其他类型的 CSS 定位来实现。]

如果 CSS-HTML 方式不可行，那么最好的 JS 逻辑是什么？

1）页面加载：比较高度并相应地定位图像，如果滚动完成重新计算和重新定位？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:15:39.667

不要引用我的话，因为我不是 100% 确定的，但也许你可以使用 JQuery 动态地将 DIV 的定位从相对更改为绝对。

我在想，如果它不在视野范围内

```
position: absolute;
bottom: 0px; 
```

别的

```
position: relative;
bottom:0px; 
```

这样绝对位置会将其固定在页面底部，否则相对定位会将其固定在其父 div 的底部。

如果您创建一个小提琴，我（或其他任何人）可以为您玩这个。

希望有帮助！

# android - android在代码中添加布局

> ID：10501316
> 
> 赞同：2
> 
> 时间：2012-05-08T15:07:08.000
> 
> 标签：android, layout

我为显示项目创建了一个布局，我想稍后在代码中添加这个布局。有点像你为列表项创建了布局，但我的问题是我不需要列表。起初我只有一个项目，然后如果用户添加某物，我想显示另一个项目。有人可以帮我这样做吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:26:31.580

检查此代码段。这可以给你一些想法。

```
 // this is Layout to which you want to add 
   LinearLayout myLayout = (LinearLayout) findViewById(R.id.my_layout);
   // this is what u want to add. I defined this in a layout file my_field.xml 
   View  itemView = LayoutInflater.from(context).inflate(R.layout.my_field,null, false);
   // add it to Layout 
   myLayout.addView(itemView); 
```

# dapper - 无论如何要遍历 Dapper DynamicParameters 对象吗？

> ID：10501319
> 
> 赞同：14
> 
> 时间：2012-05-08T15:07:16.127
> 
> 标签：dapper

我需要制作一个通用记录器来记录某些插入/更新语句，以便我的测试人员可以验证插入的数据是否正确。

我的第一个想法是，我将只使用一个接受 DynamicParameters 的函数，然后我将遍历 DynamicParameters 以生成一个字符串来列出参数的名称和值，并使测试人员更容易阅读它们。

不幸的是，Dapper.DynamicParameters 不包含“GetEnumerator”的公共定义

这是我希望做的基本示例：

```
string myFormattedListofParameters = "";
foreach (var p in myDynamicParameters)
{
myFormattedListofParameters += p.Name + "=" + p.Value.ToString();
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T05:46:29.873

Try:

```
 var sb = new StringBuilder();
            foreach (var name in p.ParameterNames)
            {
                var pValue = p.Get<dynamic>(name);
                sb.AppendFormat("{0}={1}\n", name, pValue.ToString());
            } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-03T00:37:45.603

```
 string ParametersToString(DynamicParameters parameters)
    {
        var result = new StringBuilder();

        if (parameters != null)
        {
            var firstParam = true;
            var parametersLookup = (SqlMapper.IParameterLookup)parameters;
            foreach (var paramName in parameters.ParameterNames)
            {
                if (!firstParam)
                {
                    result.Append(", ");
                }
                firstParam = false;

                result.Append('@');
                result.Append(paramName);
                result.Append(" = ");
                try
                {
                    var value = parametersLookup[paramName];// parameters.Get<dynamic>(paramName);
                    result.Append((value != null) ? value.ToString() : "{null}");
                }
                catch
                {
                    result.Append("unknown");
                }
            }

        }
        return result.ToString();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-06T23:07:15.180

与 Linq 的一行：

```
string.Join(", ", from pn in sprocParams.ParameterNames select string.Format("@{0}={1}", pn, (sprocParams as SqlMapper.IParameterLookup)[pn])) 
```

我正在使用它来登录 log4net：

```
Log.InfoFormat("Exec {0} {1}", storedProc, string.Join(", ", from pn in sprocParams.ParameterNames select string.Format("@{0}={1}", pn, (sprocParams as SqlMapper.IParameterLookup)[pn]))); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-12-09T18:27:22.907

以防万一，

```
var pmaster = new Dapper.DynamicParameters();                            
SortedList l = new SortedList();
l.Add("param1", object1);
l.Add("param2", object2);
l.Add("param3", object3);
l.Add("param4", object4);

foreach(var key in l.Keys)
{
  var val = l[key];
  pmaster.Add(key.ToString(), val);
} 
```

为我工作。

# sql - SQL Server 2008 - 向复制表添加列失败

> ID：10501322
> 
> 赞同：2
> 
> 时间：2012-05-08T15:07:21.510
> 
> 标签：sql, sql-server, replication, alter-table, isolation-level

我们有场景：

*   SQL Server 2008
*   我们在数据库上有复制
*   我们有一个简单的 sproc，它执行表之一的 ALTER（添加新列）
*   隔离级别是默认的（READ COMMITTED）

存储过程失败并出现错误：

> 您只能在 READ COMMITTED 或 REPEATABLE READ 隔离级别中指定 READPAST 锁

问题：

*   是什么导致了问题？
*   如何解决？

**更新：** 我相信这是一个非常普遍的问题，所以我想知道为什么没有很好的解释为什么复制会导致这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:30:59.153

您确定隔离级别设置为 READ COMMITTED 吗？

当隔离设置为可序列化并且您在为复制而发布的表上使用 ALTER TABLE 时，我已经看到此错误。这是因为某些复制存储过程使用 READPAST 提示来避免阻塞，该提示只能用于 READ COMMITTED 或 REPEATABLE READ 隔离级别。

如果您确定隔离级别设置为 READ COMMITTED，那么我建议您联系 Microsoft PSS，因为它不应该发生。他们将能够更好地帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:17:46.387

从提交的数据中读取时，您不能只指定 READPAST。

原因是因为 readpast 忽略了锁定的行，所以当你使用它时，你几乎是在对 sql server 说，给我所有其他事务没有触及的东西。来自 BOL 的示例：

> 例如，假设表 T1 包含一个整数列，其值为 1、2、3、4、5。如果事务 A 将值 3 更改为 8 但尚未提交，则 SELECT * FROM T1 (READPAST) 会产生值 1、2、4、5。

说在读取未提交的隔离级别上没有多大意义，默认情况下，它会带回未提交的值。它有点要求两个相反的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:11:39.120

```
SET TRANSACTION ISOLATION LEVEL READ COMMITTED
//REST OF QUERY ADD WITH (READPAST) after the table names Ex. SELECT FOO.* FROM dbo.foobar FOO WITH (READPAST) 
```

和/或这应该可以帮助你。

[http://support.microsoft.com/kb/981995](http://support.microsoft.com/kb/981995)

# android - 如何通过从角落拖动来动态调整 ImageView 的大小，就像图片上的裁剪框一样？

> ID：10501328
> 
> 赞同：0
> 
> 时间：2012-05-08T15:07:57.330
> 
> 标签：android, imageview

在我的 android 应用程序中，我遇到了一个问题，似乎没有什么对我有用。我在相对布局内的另一个 ImageView 顶部有一个 ImageView。现在，当用户触摸其中一个角并拖动时，我需要在顶部调整图像视图的大小。就像我们通常看到的裁剪框一样。当我们拖动任何一个角时，对角对角必须保持固定，并且必须在被拖动的角上调整大小。我正在做的是设置 OnTouchListener 并在 Action.MOVE 上获取新的/拖动的坐标，然后我尝试使用 Bitmap 的 createScaledBitmap 调整大小。这确实会调整图像视图的大小，但不会调整被拖动的角落。我完全糊涂了。我如何使用坐标来绘制图像视图，就像我们在使用 Canvas 绘制矩形时所做的那样。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:17:22.193

我不会在 ImageView 中这样做。我会继承 View 并覆盖 onTouchEvent 和 onDraw 来处理输入并绘制所有各种组件。您必须将其分解为它的组件并在此视图中管理许多对象。

您有一个 Rect 表示裁剪区域的大小。这可能默认为控件的大小。在 onTouchEvent 中，您需要测试每个角周围的区域，然后跟踪哪个角被拖动以适当调整 Rect 的大小。

您不必每次绘制它时都调用 createScaledBitmap ，而且您可能不应该因为此时您正在与 OutOfMemoryException 调情（清理您的位图太慢，您会很难发现这是什么） . 只需在创建控件时解码位图并使用目标 Rect 将其绘制到画布上。

很多代码要写，但听起来是个有趣的项目。没有简单的方法可以放入这样的控件（如果我理解正确的话）。您必须在自定义视图中管理触摸、拖动和目标矩形。

# android - 如何在android更改后立即从光传感器获取传感器数据？

> ID：10501331
> 
> 赞同：0
> 
> 时间：2012-05-08T15:07:58.067
> 
> 标签：android, sensors, light

好吧，我已经成功地获得了光值，但是，它被极大地延迟了。即使使用 .SENSOR_DELAYED_FASTEST 也大约 3~5 秒，即使输入 0 作为速率也是如此。它太慢了。我让程序检查屏幕上的光传感器值，然后相应地改变亮度，希望它能解决可怕的自动亮度延迟。但是在搞砸之后，在我看来这只是android中的一个缺陷。它根本无法足够快地更新。我使用了 getDefaultSensor() 但根据 android 文档，这个值可以被延迟/过滤，但是在阅读 stackoverflow 上的另一篇文章后，getSensorList() 和 getDefaultSensor() 返回相同的值，并且 getSensorList() 与 getDefaultSensor() 没有什么不同

我的问题的原因是：这是正确的吗？android只是在立即更新方面失败了吗？这很有趣，因为我的 Windows MOBILE（不是手机）可以立即更新，我喜欢它。但是对于所有 android 设备，我都看到了同样的事情。那么这只是androids编程中的一个缺陷吗？作为应用程序开发人员，我有办法解决这个问题吗？还是我们必须忍受它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:20:59.397

据我所知，您无法更快地获得它。请看一下这个问题和答案：[https ://stackoverflow.com/a/5060690/1381641](https://stackoverflow.com/a/5060690/1381641)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-20T06:52:39.383

我没有你的问题的解决方案，但我有一个解释。由于集成时间从 Playstore 下载适用于 Android 的 Sensor Box，环境光传感器会出现延迟。

您将获得环境光传感器的硬件 ID，然后 google 搜索它，您将获得一份包含有关该特定型号的技术详细信息的 PDF。每部 Android 或 IOS 手机都不使用相同的硬件。

在该 PDF 中，您将获得一个集成时间。它的存在是为了保持亮度控制的稳定和延迟以及合理。如果它很低，并且您在迪斯科舞厅，您的亮度级别将继续闪烁。外部也是如此，如果积分时间低，有时一些阴影会使它上下波动。它会闪烁更多，并且不会稳定。

这也会对背光造成伤害，因此他们不是采用单个值，而是编译大时间间隔的值。我的集成时间是 400 毫秒。这个值被发送到处理器，然后做出决定。

您可以更改此值。这很容易，AMD 硬 boh 取决于您的专业知识，例如更新这个您必须通过打开手机、将编程器连接到它并以正确的方式连接引脚来对 ALS 单元进行编程。然后发送 PDF 中提到的 8 位信号（如果模型是可编程的）。

# c++ - 将向量的向量打印到 ostream

> ID：10501336
> 
> 赞同：4
> 
> 时间：2012-05-08T15:08:14.790
> 
> 标签：c++, vector, ostream

请考虑以下代码。我正在尝试将向量的向量输出到 ostream。

```
#include <iterator>
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>

template<typename T>
std::ostream &operator <<(std::ostream &os, const std::vector<T> &v) {
    using namespace std;
    copy(v.begin(), v.end(), ostream_iterator<T>(os, "\n"));
    return os;
}

int main() {
    using namespace std;
    vector<string> v1;
    cout << v1;
    vector<vector<string> > v2;
    cout << v2;
    return 0;
} 
```

我输出字符串向量的语句有效。我输出字符串向量向量的那个不是。我正在使用 g++ 4.7.0。我试过 w/ & w/o -std=c++11 标志。在 C++11 模式下，它在半页错误中给了我这一行。

```
error: cannot bind 'std::ostream_iterator<std::vector<std::basic_string<char> >, char, std::char_traits<char> >::ostream_type {aka std::basic_ostream<char>}' lvalue to 'std::basic_ostream<char>&&' 
```

我不认为我明白这意味着什么。有人可以向我解释吗？我或多或少知道什么是右值引用，但我不明白为什么`std::basic_ostream<char>`不绑定到`std::basic_ostream<char>&&`. 可能我还不够了解。有没有更好的方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T15:20:55.943

你得到的错误有点误导。当我试图编译你的程序时，我不得不深入挖掘模板呕吐物，我最终得到了我认为正在发生的事情：

```
error: no match for 'operator<<' in '*((std::ostream_iterator<std::vector<std::basic_string<char> >, char, std::char_traits<char> >*)this)->std::ostream_iterator<std::vector<std::basic_string<char> >, char, std::char_traits<char> >::_M_stream << __value' 
```

基本上，当您调用复制算法时，它使用输出迭代器，该迭代器使用命名空间 std 中的 << 运算符。到达那里后，查找指示它尝试在 std 命名空间中查找模板 vector<> 的重载（因为这是 IT 所在的位置）。

所以你需要做的是在命名空间std中为向量模板声明你的流操作符。用你的代码包围你的代码，`namespace std {}`看看会发生什么......

应该注意的是，您所做的基本上是修改 std::vector<> 并向其添加以前不存在的行为。这样做是非标准的、未定义的，并且很容易妨碍您。您可能会考虑其他选择。

* * *

我错了这是一个koenig查找的事情。不是，问题是名称隐藏类似于类中发生的情况，您在基类中声明某些内容的重载（而不是覆盖）。

标准命名空间声明了几个“<<”运算符。这些基本上是名为`operator <<`. 本质上，您拥有的是：

```
void fun(int);

namespace Test {

  void fun() { fun(3); }

}

int main() {
    Test::fun();
} 
```

请注意，您可以`fun(int)`从全局命名空间或任何没有在其中命名任何函数的命名空间使用`fun`。您不能从`Test`命名空间中使用它。

这就是为什么您使用全局声明的 operator << 在全局命名空间中可以正常工作，但不能在`std`命名空间内正常工作。命名空间已经有与您尝试提供的`std`重载名称相同的东西，因此重载对`std`. 如果您可以使用 using 声明，那么情况会有所不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T15:11:50.950

您需要这个实用程序库：

*   [漂亮的打印 C++ STL 容器](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)

* * *

如果您想自己执行此操作（以便自学），则需要将两个重载定义为：

*   对于`std::vector<T>`：

    ```
    template<typename T>
    std::ostream &operator <<(std::ostream &os, const std::vector<T> &v) {
       using namespace std;
       copy(v.begin(), v.end(), ostream_iterator<T>(os, "\n"));
       return os;
    } 
    ```

*   对于`std::vector<std::vector<T>>`：

    ```
    template<typename T>
    std::ostream &operator <<(std::ostream &os, const std::vector<std::vector<T>> &v) {
       using namespace std;

       //NOTE: for some reason std::copy doesn't work here, so I use manual loop
       //copy(v.begin(), v.end(), ostream_iterator<std::vector<T>>(os, "\n"));

       for(size_t i = 0 ; i < v.size(); ++i)
            os << v[i] << "\n";
       return os;
    } 
    ```

如果您有这些重载，那么它们将一起递归处理这些情况：

```
std::vector<int>  v;
std::vector<std::vector<int>>  vv;
std::vector<std::vector<std::vector<int>>>  vvv;
std::vector<std::vector<std::vector<std::vector<int>>>>  vvvv;

std::cout << v << std::endl; //ok
std::cout << vv << std::endl; //ok
std::cout << vvv << std::endl; //ok
std::cout << vvvv << std::endl; //ok 
```

# java - 无法在 jspx 页面获取模型变量

> ID：10501338
> 
> 赞同：0
> 
> 时间：2012-05-08T15:08:23.323
> 
> 标签：java, jsp, spring-mvc, jspx

我使用 spring 3.1 和方法应该返回一个由 jspx 页面表示的视图。在调试时，我在名为的模型中看到变量`noteList`，我无法在页面上打印或迭代此变量。

输出是`${noteList}`。

这是一些代码：

```
@RequestMapping( value = "/", method = RequestMethod.GET)
public ModelAndView rootPage(){
    List<Note> result = sessionFactory.openSession().createCriteria(Note.class).list();

    ModelAndView mv = new ModelAndView("index");
    mv.addObject(result);
    return mv;
} 
```

* * *

```
<?xml version="1.0" encoding="UTF-8" ?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:spring="http://www.springframework.org/tags" version="2.0">
    <jsp:directive.page language="java"
        contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" />

    <![CDATA[<!DOCTYPE html>]]>
    <html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Index page</title>
</head>
<body>
    <c:out value="${noteList}"/> 
</body>
    </html>
</jsp:root> 
```

* * *

```
<beans:bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jspx" />
    </beans:bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:02:31.710

由于`noteList`包含对象类型列表`Note`，您可以尝试访问对象的属性之一`Note`。假设你有一个`name`属性 in `Note`，然后`{node.name}`在你的 jsp 中尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:58:27.837

谢谢大家！我有答案了。

问题出在 jspx 页面中

工作页面的开头包含下一个代码：

```
 <jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:spring="http://www.springframework.org/tags"
    xmlns:form="http://www.springframework.org/tags/form" version="2.0">

    <jsp:output doctype-root-element="html" omit-xml-declaration="true"
        doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
        doctype-system="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" />
    <jsp:directive.page language="java"
        contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" />

    <html>
<head>
..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:16:29.430

您可以改用[ModelAndView addObject(String attributeName, Object attributeValue)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/ModelAndView.html#addObject%28java.lang.Object%29)。

例如：

```
mv.addObject("noteList", result); 
```

然后在 JSPX

```
<c:forEach items="${noteList}" var="node">
  ${node}
</c:forEach> 
```

# objective-c - MKPinAnnotationView 自定义图像被 pin 替换为动画放置

> ID：10501341
> 
> 赞同：10
> 
> 时间：2012-05-08T15:08:40.427
> 
> 标签：objective-c, ios, mkmapview, mkpinannotationview

我在 MapView 上显示用户头像图像。如果化身在没有动画的情况下渲染，它们似乎正在工作，但是我想为它们的下落设置动画。如果我将 pinView.animatesDrop 设置为 true，那么我会丢失头像并被 pin 替换。如何在不使用图钉的情况下为我的头像设置动画？

这是我正在使用的 viewForAnnotation 方法：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    MKPinAnnotationView* pinView = (MKPinAnnotationView*)[self.mapView dequeueReusableAnnotationViewWithIdentifier:@"MyAnnotation"];

    if (!pinView) {
        pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"CustomPinAnnotation"];
    }
    else
        pinView.annotation = annotation;

    //If I set this to true, my image is replaced by the pin
    //pinView.animatesDrop = true;

    //I'm using SDWebImage
    [pinView setImageWithURL:[NSURL URLWithString:@"/pathtosomeavatar.png"] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

    //Adding a nice drop shadow here
    pinView.layer.shadowColor = [UIColor blackColor].CGColor;
    pinView.layer.shadowOffset = CGSizeMake(0, 1);
    pinView.layer.shadowOpacity = 0.5;
    pinView.layer.shadowRadius = 3.0;

    return pinView;
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-17T17:45:56.847

当您想将自己的图像用于注释视图时，最好创建常规`MKAnnotationView`而不是`MKPinAnnotationView`.

由于`MKPinAnnotationView`它是 的子类`MKAnnotationView`，因此它有一个`image`属性，但通常（通常在您不期望它时）会忽略它并改为显示其内置的 pin 图像。

因此，与其与之抗争，不如使用普通的`MKAnnotationView`.

不使用的最大损失`MKPinAnnotationView`是您必须手动实现的内置拖放动画。

有关更多详细信息，请参阅此先前的答案：
[MKMapView：自定义视图而不是注释引脚](https://stackoverflow.com/questions/9814988/mkmapview-instead-of-annotation-pin-a-custom-view)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-11T17:53:22.317

如果您遇到此问题并且确定您`MKAnnotationView`不是`MKPinAnnotationView`，请确保您`MKMapView`的委托属性没有被取消。

# php - Netbeans php Xdebug Socket Exception 与 Joomla 调试

> ID：10501347
> 
> 赞同：0
> 
> 时间：2012-05-08T15:08:53.137
> 
> 标签：php, netbeans, joomla, xdebug

我的系统

```
PHP Version 5.4.0-1build1~ppa1~oneiric
Xdebug v2.2.0rc1, Copyright (c) 2002-2012, by Derick Rethans
Apache/2.2.20 (Ubuntu) 
```

当我调试 Joomla 时，接近我希望发现的错误时，调试器中断并给我 Socket Exception 问题，并带有后续堆栈跟踪。

请帮帮我，我快疯了。

我无法降级 xdebug，我已经在我的机器上尝试过 - 另一个浏览器， - 另一个 Java 版本， - netbeans 的新用户目录（完全删除旧的， - 重新创建项目，将 netbeans 目录也放在另一个路径下（这是因为我需要将文件放在 www-data 属性下）

```
 INFO [org.netbeans.modules.php.dbgp.DebugSession]
java.net.SocketException: Pipe interrotta
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
at java.net.SocketOutputStream.write(SocketOutputStream.java:141)
at org.netbeans.modules.php.dbgp.packets.DbgpCommand.send(DbgpCommand.java:90)
at org.netbeans.modules.php.dbgp.DebugSession.sendCommands(DebugSession.java:211)
 [catch] at org.netbeans.modules.php.dbgp.DebugSession.run(DebugSession.java:143)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:01:42.067

Xdebug 2.2.0RC1 版本中有一些调试错误。这些都应该在昨天发布的 Xdebug 2.2.0 中得到修复。如果您仍然可以重现它，请在[http://bugs.xdebug.org](http://bugs.xdebug.org)提交错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:16:50.207

我已经尝试了以下所有方法： - 删除所有手表（哎呀，我没有任何手表！） - 使用带有 netbeans 的新用户目录，但什么也没有 - 将 xdebug 升级到 2.2.0 - 将 php 版本降级到 5.3.10（但我没有能够） - 完全重新安装apache和LAMP（但一些配置没有完全删除，所以如果你想这样做，请确保清除和apache或php相关的配置文件）

最后我做了一个全新的 ubuntu 安装，现在它工作正常。

希望xdebug中的错误日志可以改进考虑，在不卸载所有的情况下解决此类错误！

# maven-2 - Maven 2、Nexus 和快照时间戳导致 eclipse:eclipse 出现问题

> ID：10501356
> 
> 赞同：1
> 
> 时间：2012-05-08T15:09:11.027
> 
> 标签：maven-2, jenkins, m2eclipse

我们已经从 Archiva 迁移到 Nexus，并且仍在使用 Maven 2。

我们在本地执行 eclipse:eclipse 以便根据 POM 中的依赖关系生成 Eclipse .project 和 .classpath 文件，然后我们将项目导入 Eclipse 进行开发。我们不使用 M2Eclipse 的原因有很多。

由于使用 Nexus，我们遇到的问题是项目并不总是在工作空间中相互引用，而是引用各自的 JAR。

我注意到 Nexus 将时间戳附加到 JAR 名称和 MVN 输出状态，例如：

```
[INFO] Artifact myapp-bom:jar:7.3.0.2.1-SNAPSHOT already available as a workspace project, but with different version. Expected: 7.3.0.2.1-20120508.115037-68, found: 7.3.0.2.1-SNAPSHOT 
```

我觉得这就是 eclipse:eclipse 生成包含*JAR 引用*（基于本地 maven 存储库）而不是*项目引用*的 .classpath 文件的原因。当我们使用 Archiva（并且没有时间戳）时，我们过去常常获取*项目引用*，这正是我们想要的。

有没有其他人有这个问题，它是如何解决的？我读到 maven 3 强制生成时间戳。同样，如何让 eclipse:eclipse 生成合理的 .classpath 文件？

干杯，蚂蚁

PS - 我们的一些项目来自不同的 SVN 存储库。似乎如果在父 pom 中引用了 Eclipse 项目，eclipse:eclipse 会创建一个项目引用，但如果 Eclipse 项目来自不同的父 pom，但仍在工作区中，那么它只能生成 JAR 引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:33:17.643

使用 maven-eclipse-plugin (eclipse:eclipse) 2.9 版而不是 2.8 版解决了这个问题！多...

# internet-explorer - IE 7 和 8，可能有 6 个网站问题

> ID：10501357
> 
> 赞同：0
> 
> 时间：2012-05-08T15:09:11.820
> 
> 标签：internet-explorer, internet-explorer-8, internet-explorer-7, internet-explorer-6

我这个周末为我的一个客户推出了一个网站。它在 Firefox、Chrome、Opera、Safari 和 IE 9 中看起来不错。

但是，IE 7 和 8（也可能是 6）给我带来了真正的问题。主页很好，但辅助页面有不同的主题布局。

我编辑了 21 个 Wordpress 主题。我有一台 Mac，所以我很难测试 IE，因为它是一个 Windows 浏览器。我有一台装有 IE 8 的 XP 笔记本电脑。这就是我知道它搞砸了。二级页面真的很糟糕。

我的主要内容、左侧栏和页脚都未对齐。我已经尝试了几件事来尝试解决问题。我研究了黑客并尝试了它们，但无济于事。

我尝试更改图像的位置，但它只是让页面看起来比现在更糟。我真的很难过。

如果有人可以请帮助或引导我朝着正确的方向前进，我们将不胜感激。网址是[www.jubileecf.com](http://www.jubileecf.com)。谢谢~阿什~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:30:18.750

该问题在您的代码中可见：

```
<script>(function fix_ie8() {if (strpos($_SERVER['HTTP_USER_AGENT'],”MSIE 8″)) {header(”X-UA-Compatible: IE=7″);}} 
```

add_action('send_headers','fix_ie8'))();

这在几个方面都是错误的。

*   首先，它使用了错误的引号字符。

*   其次，你有试图成为 Javascript 的 PHP 代码。

*   第三，即使你把它改回PHP，你仍然需要移动它，因为`header()`只能在页面的任何部分输出之前调用。所以它需要在你开始之前完成，而不是在标题的中间。

*   最后，这严重破坏网站的原因是因为它导致 Javascript 解释器看到错误并停止处理。因此，您包含的文件中的 IE 修复程序`html5.js`不会运行，因此您的页面布局将被破坏。

简而言之，这行代码需要被锁定并且永远不会再被提及。

因此，让我们分解这里发生的事情并尝试找到解决方案......

该代码试图使用`X-UA-Compatible`标头强制 IE8 进入 IE7 兼容模式。我要说的是，既然您说您甚至从未在 IE 中进行过测试，那么您为什么认为无论如何都需要使用 IE7 兼容模式？

为什么不直接尝试不使用那行代码，看看会发生什么？如果您在 IE8 中确实有一些小的布局故障，最好修复它们而不是使用兼容模式。

如果您*必须*使用 IE7 兼容模式，那么您可以使用它，而根本不需要任何类型的脚本。只需使用元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

这就是你所需要的。

如果您希望标签只影响 IE8（即不影响 IE9），那么您可以将它包装在 IE 条件注释中（您已经在页面的其他地方使用了它）。

# objective-c - Objective C - 从调试器错误中获取行号或完整堆栈跟踪？

> ID：10501358
> 
> 赞同：25
> 
> 时间：2012-05-08T15:09:16.277
> 
> 标签：objective-c, xcode, cocoa

是否可以从调试器中获取源代码（或任何有助于调试问题所在的行）的行号，以显示问题的根源？

我收到一个错误：

```
-[NSCFArray objectAtIndex:]: index (-1 (or possibly larger)) beyond bounds (9) 
```

这显然意味着我在某些时候会越界，但是如果可能的话，我想获得更多信息来帮助我解决问题。

我正在放置一个断点并尝试逐行执行程序，但这是一个乏味的过程。谢谢！

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-08T15:19:14.080

当调试器停止时，转到“Debug Navigator”并确保底部的滑块一直向右。

从抛出异常的地方向下扫视，你最终应该会看到自己的代码。单击适当的方法/函数名称，代码将在编辑器中打开。

![在此处输入图像描述](../Images/d23760b20801fe753cbcda153ab6af58.png)

![在此处输入图像描述](../Images/7dc2d524ebe306327f0f73cb67375084.png)

如果您在堆栈跟踪中没有看到您自己的任何方法，则异常可能已通过`performSelector`-style 调用传递，在这种情况下堆栈跟踪已消失。如果是这种情况，您可以通过添加“On Throw”异常断点来获得更好的信息。首先切换到“断点导航器”：

![在此处输入图像描述](../Images/bdc9d0d57c6f0a6a048c05bb57000046.png)

然后点击加号并选择“添加异常断点...”

![在此处输入图像描述](../Images/4ceeb2ae019d79965db4d3cbe30809b1.png)

创建一个“On Throw”断点：

![在此处输入图像描述](../Images/db109044a0079d2002ef2b0d1cab7135.png)

这将在引发异常的确切点停止调试器，并且您可以获得更好的堆栈跟踪。始终启用这样的异常断点是个好主意，尽管您偶尔会从 Apple 代码中获得内部异常（例如，在使用 QLPreviewController、MPMoviePlayerController 时）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-28T14:20:43.027

您还应该考虑使用 NSSetUncaughtExceptionHandler。（您可以将崩溃日志保存到磁盘，检查下次启动是否保存了新的崩溃日志，将其附加到电子邮件等）

把它放到你的 didFinishLaunchingWithOptions 方法中：

```
NSSetUncaughtExceptionHandler(&exceptionHandler); 
```

并实现您的异常处理程序：

```
void exceptionHandler(NSException *exception)
{        
    NSLog(@"%@",[exception name]);
    NSLog(@"%@",[exception reason]);
    NSLog(@"%@",[exception userInfo]);
    NSLog(@"%@",[exception callStackSymbols]);
    NSLog(@"%@",[exception callStackReturnAddresses]);
} 
```

# java - 嵌套异常是 java.lang.IllegalStateException：无法将 [java.lang.String] 类型的值转换为所需类型

> ID：10501361
> 
> 赞同：6
> 
> 时间：2012-05-08T15:09:21.057
> 
> 标签：java, spring, hibernate, orm, annotations

尝试提交表单时出现以下验证错误。使用 Document.java 中的值填充的下拉框会出现以下错误：

```
Failed to convert property value of type java.lang.String to required type 
testapp.domain.Document for property document_number; nested exception is 
java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] 
to required type [testapp.domain.Document] for property document_number: no matching 
editors or conversion strategy found 
```

我的映射有问题吗？

Document.java 映射

```
 @OneToMany(mappedBy="document_number", cascade = CascadeType.ALL)
private Set<DocumentRevision> documentRevisions;

public void setDocumentRevisions(Set<DocumentRevision> documentRevisions){
    this.documentRevisions = documentRevisions;
} 
```

DocumentRevision.java 映射

```
 @ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name="DOCUMENT_NUMBER")
private Document document_number; 

public void setDocument_number(Document document_number){
    this.document_number = document_number;
}

public Document getDocument_number(){
    return document_number;
} 
```

两个表的关系是多个*DocumentRevision*可以有相同的*DocumentNumber*而单个*DocumentRevision*只能有一个*DocumentNumber*

感谢您的帮助

/D

**编辑**

我正在使用 spring 3.0 和 hibernate 3。[这](https://stackoverflow.com/questions/10499641/how-to-populate-dropdown-box-in-spring-mvc)是我最近的一个线程，其中包括控制器和 jsp 页面。

**编辑 2**

这是应该将 document_number 保存到 DocumentRevision 中的 DAO 实现方法

```
 public void saveDocumentRevision(DocumentRevision documentRevision) {
    this.sessionFactory.getCurrentSession().save(documentRevision); 
} 
```

**编辑 3**

我相信这是应该记录 document_number 的代码部分。我必须在 .POST 方法的某处使用“documentNumberList”吗？在那种情况下我会怎么做？

控制器的一部分：

```
@RequestMapping(value="/add", method=RequestMethod.GET)
public String getDocumentRevision(Model model) {
DocumentRevision documentRevision = new DocumentRevision();
model.addAttribute("documentRevisionAttribute", documentRevision);
model.addAttribute("documentNumberList", documentService.retrieveAllDocumentNumbers());

return "new-documnent-revision";
}

@RequestMapping(value="/add", method=RequestMethod.POST)
public String postDocumentRevision(@ModelAttribute("documentRevisionAttribute") @Valid DocumentRevision documentRevision, BindingResult result) {

if(result.hasErrors()){
    return "new-document-revision";
}

documentRevisionService.createDocumentRevision(documentRevision);
return "redirect:/testapp/document-revision/list";  
} 
```

**更新**

我已将以下内容添加到我的控制器中：

```
 /**
 * Property editor to map Documents from documents IDs.
 */

 class DocumentPropertyEditor extends PropertyEditorSupport {

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
        Document value =  documentService.retrieveDocumentNumber(text);
        setValue(value);
    }

    @Override
    public String getAsText() {
        Document d = (Document) getValue();
        return d != null ? String.valueOf(d.getDocumentNumber()) : "";
    }

}

@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(Document.class, new DocumentPropertyEditor());
} 
```

我现在得到一个 NullPointerException：

```
java.lang.NullPointerException
testapp.controller.DocumentRevisionController$DocumentPropertyEditor.getAsText(DocumentRevisionController.java:59) 
```

为什么 th PropertyEditor 中的 getter 没有获得值？

**编辑 4**

retrieveDocumentNumber(text) 方法：

```
 public Document retrieveDocumentNumber(String text){
    return (Document) this.sessionFactory.getCurrentSession().get(Document.class, text);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:00:36.513

填充 documentRevision 模型属性时，Spring WebDataBinder 无法将其转换`String document_number`为 Document 实例。你有两个可能性：

*   `WebDataBinder`用`PropertyEditor`可以处理转换的 a 进行初始化。最直接，但仅适用于此控制器。

*   注册一个`Converter<String, Document>`

如果选择第一个，请使用注释注释控制器方法`@InitBinder`并注册属性编辑器。似乎您只需要通过 document_number 从数据库中获取文档。请参阅参考文档中的[自定义 WebDataBinder 初始化。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-webdatabinder)

**编辑**

将文档映射到/从 Ids 字符串的属性编辑器示例。

```
/**
 * Property editor to map Documents from documents IDs.
 */
 class DocumentPropertyEditor extends PropertyEditorSupport {

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
        Long id = Long.parseLong(text);
        Document value = id == 0 ? null : documentService.get(id);
        setValue(value);
    }

    @Override
    public String getAsText() {
        Document d = (Document) getValue();
        return d != null ? String.valueOf(d.getId()) : "";
    }
} 
```

对于第二种方法，请查看[Validation、Data Binding 和 Type Conversion](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)以了解如何`Converter`在 Spring中创建和注册 a `ConversionService`。

# java - 后端生成 pdf 文件（标签、装箱单等） - 需要从浏览器自动打印到预先选择的打印机 - 解决方法？

> ID：10501363
> 
> 赞同：1
> 
> 时间：2012-05-08T15:09:30.197
> 
> 标签：java, php, web-applications, printing, activex

我正在开发一个网络应用程序；在管理后端，我需要具有为不同进程执行自动打印作业的功能，这些进程在管理中运行并生成 pdf（标签、装箱单），该文件将发送到我仓库中预先选择的 LAN 网络打印机。

我一直在对此进行一些研究，我知道由于安全问题，像这样的自动打印很难配置。但是，我有一些帖子，人们写道，他们能够通过活动 x、java、打印服务器、客户端软件等来实现这一点……但是对于如何做到这一点并没有明确的大纲。

有人可以帮我找出一种解决方法，当某个进程运行并生成 pdf 文件时，我可以使用它来自动打印到仓库中的不同 LAN 网络打印机？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:26:14.200

我还管理一个执行这些任务的仓库系统。我不会声称以下解决方案是最好的方法，但它们一直在为我们工作。我们的系统是在使用 Apache 的 Windows 服务器上使用 PHP 5.3 构建的。使用此设置，用户无需从浏览器打印任何内容，所有内容都在服务器端处理。

要求：Apache 需要以管理员权限运行。可能不推荐用于面向 Web 的服务器。

通过 PHP 在 Windows 上打印 PDF：

```
$file = "c:\\path\\to\\file.pdf";
$exec = '"C:\\Program Files\\bioPDF\\Acrobat Wrapper\\acrowrap.exe" /t ';
session_write_close(); // prevents hanging
pclose(popen($exec. $file . " \\networked\\printer",'r')); 
```

这只是启动阅读器，打印文件，然后关闭阅读器。

在 Linux/Mac 上，您应该能够使用（没有管理员权限）：

```
$file = "/path/to/file.pdf";
$command = "lpr -P /printer/path " . $file;
exec($command); 
```

# jquery - 无法离工作最近

> ID：10501366
> 
> 赞同：2
> 
> 时间：2012-05-08T15:09:46.620
> 
> 标签：jquery, jquery-selectors

我有以下有效的代码：

```
$(document).ready(function() {
    var xhr = false;

    func_two();

    $('.button_one').click( function(event) {
        event.preventDefault(); 

        if ($("#textbox_one").val().length > 0) {
            func_one( $("#textbox_one").val() );
        } else {
            func_two();
        }
    });

    function func_one( phrase ) {
        xhr = $.ajax({
            type: 'POST',
            url: 'url here',
            data: '{phrase: "' + phrase + '"}',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function( data ) {
                $("#inner_div").empty();

                if( data.d[0] ) {
                    $.each( data.d, function( index, row ) {
                        $("#inner_div").append( "dynamic data goes here" );
                    });
                }
            }
        });
    }

    function func_two() {
        $('#inner_div').empty().append( "static data goes here" );
    }

}); 
```

这很好用，因为我直接指定哪些标签会产生影响以及哪些标签会受到影响。问题是这些 div 实际上是小部件或小工具，我需要允许用户在任何给定时间在屏幕上拥有超过 1 个这些小部件或小工具。当我尝试这样做时，事情似乎完全出错了，因为“我假设”控件和 div 使用了 id。

因此，我尝试改用类，这似乎可以在此处的测试代码中使用：

```
$(this).closest('.main_div').find('.sub-div').text("data goes here"); 
```

但是，当我尝试将此代码应用于上面的原始代码时，它似乎不起作用。它给了我一个`Cannot call method 'closest' of undefined`根据 Chromium 的开发者工具。

我尝试过的似乎不起作用的代码如下所示：

```
$(document).ready(function() {
    var xhr = false;

    func_two();

    $('.button_one').click( function(event) {
        event.preventDefault(); 

        if ($("#textbox_one").val().length > 0) {
            func_one( $(this), $("#textbox_one").val() );
        } else {
            func_two( $(this) );
        }
    });

    function func_one( that, phrase ) {
        xhr = $.ajax({
            type: 'POST',
            url: 'url here',
            data: '{phrase: "' + phrase + '"}',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function( data ) {
                $("#inner_div").empty();
                that.closest('.outer_div').find('.inner_div').empty();

                if( data.d[0] ) {
                    $.each( data.d, function( index, row ) {
                        that.closest('.outer_div').find('.inner_div').append( row.column );
                    });
                }
            }
        });
    }

    function func_two( that ) {
    that.closest('.outer_div').find('.inner_div').append( "static data goes here" );
    }

}); 
```

HTML 看起来像这样

```
<div class="outer_div">

    <div class="inner_div">
        results go here
    </div>

    <div class="footer_div">
        <input type="button" class="button_one" />
    </div>

</div> 
```

有人可以帮我将测试代码实现到原始代码中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:14:34.420

试试这个，我相信您的按钮已被删除，并且不再引用该元素。通过存储对目标子 div 的引用，这将保留在您要执行的操作的上下文中:)

```
function func_one( that ) {
    xhr = $.ajax({
        type: 'POST',
        url: 'some url here',
        data: 'data to post here',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function( data ) {
            var column_elements = [];

            for(var i = 0; i < data.d.length; i++) {
                column_elements.push(data.d[i].column);
            }

            $('.sub_div', that.parents('.main_div:first')).text(column_elements.join(", "));
        }
    });
} 
```

# c# - .NET 的线程安全缓冲区

> ID：10501376
> 
> 赞同：3
> 
> 时间：2012-05-08T15:10:26.400
> 
> 标签：c#, .net-3.5, thread-safety, buffer, stringbuilder

（注意：虽然我想了解 .Net 4.0 的未来，但我仅限于这个项目的 .Net 3.5。）

我有一个线程，它从外部设备异步读取数据（在代码示例中由非常有创意的 strSomeData 模拟 :-) 并将其存储在 StringBuilder '缓冲区' (strBuilderBuffer :-)

在“主代码”中，我想“蚕食”这个“缓冲区”。但是，从“操作”的角度来看，我不确定如何以线程安全的方式执行此操作。我理解从“数据”的角度来看它是安全的，因为根据 msdn，“此 ( `StringBuilder`) 类型的任何公共静态成员都是线程安全的。不保证任何实例成员都是线程安全的。” 但是，我下面的代码说明从“操作”的角度来看它可能不是线程安全的。

关键是我担心两行代码：

```
string strCurrentBuffer = ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.ToString();
// Thread 'randomly' slept due to 'inconvenient' comp resource scheduling...
ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.Length = 0; 
```

如果计算机操作系统在缓冲区的“读取”和缓冲区的“清除”之间休眠我的线程，我可能会丢失数据（这很糟糕:-(

**有没有办法保证“原子性”？这两行并强制计算机不打断它们？**

关于弗拉德关于使用的以下建议`lock`，我尝试过，但它没有用（真的）：

```
 public void BufferAnalyze()
    {
        String strCurrentBuffer;
        lock (ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer)
        {
            strCurrentBuffer = ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.ToString();
            Console.WriteLine("[BufferAnalyze()]  ||<<  Thread 'Randomly' Slept due to comp resource scheduling");
            Thread.Sleep(1000);  //  Simulate poor timing of thread resourcing...
            ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.Length = 0;
        }
        Console.WriteLine("[BufferAnalyze()]\r\nstrCurrentBuffer[{0}] == {1}", strCurrentBuffer.Length.ToString(), strCurrentBuffer);
    } 
```

**有没有更好的方法来实现线程安全缓冲区？**

这是完整的代码：

```
namespace ExploringThreads
{
    /// <summary>
    /// Description of BasicThreads_TestThreadSafety_v1a
    /// </summary>
    class ThreadWorker_TestThreadSafety_v1a
    {
        private Thread thread;
        public static StringBuilder strBuilderBuffer = new StringBuilder("", 7500);
        public static StringBuilder strBuilderLog = new StringBuilder("", 7500);

        public bool IsAlive
        {
            get { return thread.IsAlive; }
        }

        public ThreadWorker_TestThreadSafety_v1a(string strThreadName)
        {
            // It is possible to have a thread begin execution as soon as it is created.
            // In the case of MyThread this is done by instantiating a Thread object inside MyThread's constructor.
            thread = new Thread(new ThreadStart(this.threadRunMethod));
            thread.Name = strThreadName;
            thread.Start();
        }

        public ThreadWorker_TestThreadSafety_v1a() : this("")
        {
            //   NOTE:  constructor overloading ^|^
        }

        //Entry point of thread.
        public void threadRunMethod()
        {
            Console.WriteLine("[ThreadWorker_TestThreadSafety_v1a threadRunMethod()]");
            Console.WriteLine(thread.Name + " starting.");
            int intSomeCounter = 0;
            string strSomeData = "";
            do
            {
                Console.WriteLine("[ThreadWorker_TestThreadSafety_v1a threadRunMethod()] running.");
                intSomeCounter++;
                strSomeData = "abcdef" + intSomeCounter.ToString() + "|||";
                strBuilderBuffer.Append(strSomeData);
                strBuilderLog.Append(strSomeData);
                Thread.Sleep(200);
            } while(intSomeCounter < 15);

            Console.WriteLine(thread.Name + " terminating.");
        }
    }
    /// <summary>
    /// Description of BasicThreads_TestThreadSafety_v1a.
    /// </summary>
    public class BasicThreads_TestThreadSafety_v1a
    {
        public BasicThreads_TestThreadSafety_v1a()
        {
        }

        public void BufferAnalyze()
        {
            string strCurrentBuffer = ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.ToString();
            Console.WriteLine("[BufferAnalyze()]  ||<<  Thread 'Randomly' Slept due to comp resource scheduling");
            Thread.Sleep(1000);  //  Simulate poor timing of thread resourcing...
            ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.Length = 0;
            Console.WriteLine("[BufferAnalyze()]\r\nstrCurrentBuffer[{0}] == {1}", strCurrentBuffer.Length.ToString(), strCurrentBuffer);
        }

        public void TestBasicThreads_TestThreadSafety_v1a()
        {
            Console.Write("Starting TestBasicThreads_TestThreadSafety_v1a  >>>  Press any key to continue . . . ");
            Console.Read();

            // First, construct a MyThread object.
            ThreadWorker_TestThreadSafety_v1a threadWorker_TestThreadSafety_v1a = new ThreadWorker_TestThreadSafety_v1a("threadWorker_TestThreadSafety_v1a Child");

            do
            {
                Console.WriteLine("[TestBasicThreads_TestThreadSafety_v1a()]");
                Thread.Sleep(750);
                BufferAnalyze();
                //} while (ThreadWorker_TestThreadSafety_v1a.thread.IsAlive);
            } while (threadWorker_TestThreadSafety_v1a.IsAlive);
            BufferAnalyze();
            Thread.Sleep(1250);
            Console.WriteLine("[TestBasicThreads_TestThreadSafety_v1a()]");
            Console.WriteLine("ThreadWorker_TestThreadSafety_v1a.strBuilderLog[{0}] == {1}", ThreadWorker_TestThreadSafety_v1a.strBuilderLog.Length.ToString(), ThreadWorker_TestThreadSafety_v1a.strBuilderLog);

            Console.Write("Completed TestBasicThreads_TestThreadSafety_v1a  >>>  Press any key to continue . . . ");
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:11:52.713

[在此处](http://www.microsoft.com/en-us/download/details.aspx?id=28568)下载 3.5 的[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609) backport 。还有一个[NuGet](http://www.nuget.org/)包。下载后，只需在项目中引用 System.Threading.dll。

现在，您也可以在 .NET 3.5 中使用 .NET 4.0 中的所有新并发集合标准。最适合您的情况是[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)。它基本上是一个缓冲区，允许线程像普通队列一样将项目入队和出队。除了出队操作会阻塞，直到有项目可用。

现在根本不需要使用这个`StringBuilder`类。以下是我将如何重构您的代码。我试图让我的例子简短，以便更容易理解。

```
public class Example
{
  private BlockingCollection<string> buffer = new BlockingCollection<string>();

  public Example()
  {
    new Thread(ReadFromExternalDevice).Start();
    new Thread(BufferAnalyze).Start();
  }

  private void ReadFromExteneralDevice()
  {
    while (true)
    {
      string data = GetFromExternalDevice();
      buffer.Add(data);
      Thread.Sleep(200);
    }
  }

  private void BufferAnalyze()
  {
    while (true)
    {
      string data = buffer.Take(); // This blocks if nothing is in the queue.
      Console.WriteLine(data);
    }
  } 
} 
```

为了将来参考，[TPL 数据流](http://msdn.microsoft.com/en-us/devlabs/gg585582)库中的`BufferBlock<T>`类将与. 它将在 .NET 4.5 中可用。`BlockingCollection`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:14:34.580

使用`StringBuffer`不是线程安全的，但您可以切换到[`ConcurrentQueue<char>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx).

如果您需要其他数据结构，.NET 4 中还有其他线程安全集合，请参阅[http://msdn.microsoft.com/en-us/library/dd997305.aspx](http://msdn.microsoft.com/en-us/library/dd997305.aspx)。

* * *

编辑：在 .NET 3.5 中，同步原语较少。您可以通过`Queue<char>`在`ConcurrentQueue`. 或者使用相同的`StrignBuffer`, 再次进行`lock`读/写操作：

```
public static StringBuilder strBuilderBuffer = new StringBuilder("", 7500);
private object BufferLock = new object();

...

lock (BufferLock)
    strBuilderBuffer.Append(strSomeData);

...

string strCurrentBuffer;
lock (BufferLock)
{
    strCurrentBuffer = ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.ToString();
    ThreadWorker_TestThreadSafety_v1a.strBuilderBuffer.Clear();
}
Console.WriteLine("[BufferAnalyze()]  ||<<  Thread 'Randomly' Slept ...");
Thread.Sleep(1000);  //  Simulate poor timing of thread resourcing... 
```

编辑：

你不能保证操作系统不会挂起你持有锁的工作线程。但是，锁保证了只要一个线程正在处理缓冲区，*其他线程就无法干预和更改缓冲区。*

这就是为什么你持有锁的时间应该尽可能短：

*   获取锁，添加数据，释放锁，-或-
*   获取锁，复制数据，清空缓冲区，释放锁，开始处理复制的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:38:38.537

如果您正在从缓冲区中读取大量数据，也许这会有所帮助：

[http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx)

多个读者是可能的，但只有一个作家。

它适用于 .NET 1.X 及更高版本...

# c++ - 为什么我不能重载这个基 类方法？

> ID：10501378
> 
> 赞同：1
> 
> 时间：2012-05-08T15:10:27.747
> 
> 标签：c++, operator-overloading, multiple-inheritance

所以，我有一个基类：

```
enum ComparableType
{
    CompType_ShaderObject
};

class Comparable 
{
public:
    Comparable( void ) {};
    Comparable( ComparableType ct ) : mComparableType( ct )
    {}
    inline virtual std::string& getKey( void ) = 0;
    virtual ComparableType getType( void ) = 0;  
protected:
    virtual ~Comparable( void ){ } ;
protected:
    virtual bool operator>( const Comparable& isLessThan ) = 0;
    virtual bool operator<( const Comparable& isGreaterThan ) = 0;
    virtual bool operator>=( const Comparable& isLessThanOrEqualTo ) = 0;
    virtual bool operator<=( const Comparable& isGreaterThanOrEqualTo ) = 0;
    virtual bool operator==( const Comparable& isEqualTo ) = 0;
    virtual bool operator!=( const Comparable& isNotEqualTo ) = 0;

protected:
   ComparableType mComparableType;

}; 
```

它作为以下内容的基础：

```
class ShaderComparable : public Comparable, public std::string
    {
    public:
        ShaderComparable( void ) { };
        ShaderComparable( const char* shaderFilename );
        ~ShaderComparable( void );

    public:
        inline std::string& getKey( void ) { return mFilename; } 
        inline ComparableType getType( void ) { return mComparableType; }

    public:
        virtual bool operator>( const ShaderComparable& isLessThan );
        virtual bool operator<( const ShaderComparable& isGreaterThan );
        virtual bool operator>=( const ShaderComparable& isLessThanOrEqualTo );
        virtual bool operator<=( const ShaderComparable& isGreaterThanOrEqualTo );
        virtual bool operator==( const ShaderComparable& isEqualTo );
        virtual bool operator!=( const ShaderComparable& isNotEqualTo );
    private:
        inline bool isSameType( const ShaderComparable& objectToCheck ) { return mComparableType == CompType_ShaderObject; }
        std::string mFilename;
    }; 
```

唯一的问题是，由于某种原因，我无法重载基类中的运算符函数以接受 的类型`ShaderComparable`，而不仅仅是`Comparable`. 有没有解决的办法？

我的错误如下：

```
>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(26): error C2653: 'ShaderComparable' : is not a class or namespace name
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(26): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(26): error C2143: syntax error : missing ',' before '&'
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(33): error C2653: 'ShaderComparable' : is not a class or namespace name
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(33): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(33): error C2143: syntax error : missing ',' before '&'
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(39): error C2653: 'ShaderComparable' : is not a class or namespace name
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(39): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(39): error C2143: syntax error : missing ',' before '&'
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(44): error C2653: 'ShaderComparable' : is not a class or namespace name
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(44): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(44): error C2143: syntax error : missing ',' before '&'
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(49): error C2653: 'ShaderComparable' : is not a class or namespace name
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(49): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\programming\c++\git\escalator\engine\engine\shadercomparable.cpp(49): error C2143: syntax error : missing ',' before '&' 
```

**更新**

这是它来自的源文件：

```
ShaderComparable::ShaderComparable( const char* shaderFilename ) 
        :   Comparable( CompType_ShaderObject ),
            mFilename( shaderFilename ) 
    {}

    ShaderComparable::~ShaderComparable( void )
    {
    }

    bool ShaderComparable::operator>( const ShaderComparable& isLessThan ) 
    {
        std::string toCompare = std::string();

        if( toCompare.compare( mFilename ) > 0 )
            return true;
        else
            return false;
        }
    }

    bool ShaderComparable::operator<( const ShaderComparable& isGreaterThan ) 
    {

        std::string toCompare = std::string();
        return true;
    }

    bool ShaderComparable::operator>=( const ShaderComparable& isLessThanOrEqualTo ) 
    {

        return false;
    }

    bool ShaderComparable::operator<=( const ShaderComparable& isGreaterThanOrEqualTo ) 
    {
        return false;
    }

    bool ShaderComparable::operator==( const ShaderComparable& isEqualTo ) 
    {
        return false;
    }

    bool ShaderComparable::operator!=( const ShaderComparable& isNotEqualTo ) 
    {
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:49:39.770

当您实现最终覆盖器时，参数列表必须与基类相同。你的不是。这是一个简化的示例：

```
class Base
{
public:
    virtual Base& foo(const Base& obj) = 0;
};

class Der : public Base
{
public:
    void Base& foo(const Der& obj)
    {
      return * this;
    };
};

int main () {
    Base* p = new Der;

    return 0;

} 
```

此代码不合法​​，因为`Der::foo()`将`Der`引用作为参数，而不是`Base`引用。这是合法的：

```
class Der : public Base
{
public:
    void Base& foo(const Base& obj)
    {
      return * this;
    };
}; 
```

顺便说一句，即使参数列表必须与基类声明相同，返回类型也不必相同。但是，它必须是协变的。所以，这也是合法的：

```
class Der : public Base
{
public:
    void Der& foo(const Base& obj)
    {
      return * this;
    };
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:50:00.317

> 唯一的问题是，由于某种原因，我无法从基类重载运算符函数以接受 ShaderComparable 的类型，而不仅仅是 Comparable。有没有解决的办法？

您不能以这种方式“重载”虚拟功能。派生类（或其子类之一）必须实现所有纯虚函数，这要求参数完全匹配。

你可以做的是使用[dynamic_cast](https://en.wikipedia.org/wiki/Dynamic_cast)：

```
struct A
{
    virtual void foo(A&) = 0;
};

struct B : public A
{
    virtual void foo(A& myA)
    {
        try
        {
            B& myB = dynamic_cast<B&>(myA);  // dynamic_cast is what you want, but be aware it has runtime overhead
            // do something 'B' specific, with myB
        }
        catch (const std::bad_cast& e)
        {
            std::cerr << e.what() << std::endl;
            std::cerr << "This object is not of type B" << std::endl;
        }
    }
}; 
```

# firefox - 当 Firefox 失去焦点时，选择会改变颜色

> ID：10501381
> 
> 赞同：5
> 
> 时间：2012-05-08T15:10:39.743
> 
> 标签：firefox, css, selection, pseudo-element

我正在通过 CSS 设置选择背景颜色：

```
::selection {
  background:#cc0000;
  color:#fff;
}

::-moz-selection {
  background:#cc0000;
  color:#fff;
} 
```

在大多数浏览器上，当焦点在其他地方（如 IFrame）时，选择颜色将保持不变，例如：

![在此处输入图像描述](../Images/3376a83c4b96552ae192c6fee09b91de.png)

但在 Firefox 上它不会：

![在此处输入图像描述](../Images/4e02e5edc7d4f1f4a295592a66183fd4.png)

[您可以在此处](http://jsfiddle.net/paleozogt/yVjfu/)的 jsFiddle 上看到这一点。

在这种情况下，如何让 Firefox 设置选择颜色？这是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:13:29.087

> 在这种情况下，如何让 Firefox 设置选择颜色？

不幸的是，似乎没有办法做到这一点。

> 这是一个错误吗？

没有人（包括 Mozilla 自己？）可以肯定地说；`::selection`这在 CSS3 规范中时从未指定过。[我在MDN](https://developer.mozilla.org/en/CSS/%3A%3Aselection)上找不到任何信息 ~~[或bugzilla.mozilla.org](http://bugzilla.mozilla.org)上的错误报告。~~但我确实找到[了这个错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=541311)，自 2010 年被报告以来，它显然一直没有得到解决。

这可能会在未来得到澄清，例如，如果`::selection`在 UI 4 中返回。

# c# - 紧凑 .net 和常规 .net 之间的 C# 序列化/反序列化

> ID：10501392
> 
> 赞同：2
> 
> 时间：2012-05-08T15:11:09.323
> 
> 标签：c#, .net, windows-mobile, compact-framework

我目前正在尝试解决一个奇怪的问题。一个我找不到太多信息的。

**简而言之：**

反序列化 xml 序列化对象时，我得到了正确对象类型的实例，但我只得到对象内部的默认值。

**更长的故事：**

序列化和反序列化发生在两个不同的平台上。一个是 .net compact 框架（用于 windows 手机），另一个是常规 .net 框架。

在同一平台上进行序列化然后反序列化会产生正确填充的对象，仅当将序列化的字符串发送到另一个平台时才会出现问题。

我还从另一个服务获得了测试 xml 文件，该服务将为我的服务提供数据，这些 xml 文件可以正确反序列化。

**细节：**

生成的 XML 在平台之间略有不同。（注意，这些是来自内部 xml 结构的片段，我已经确定了重复出现的差异。阅读：单元不是根节点）

客户端（电话、紧凑型框架）

```
<Unit>
    <UnitId xmlns="">555</UnitId>
    <VehicleId xmlns="">555</VehicleId>
    <EmployeeId xmlns="">004</EmployeeId>
</Unit> 
```

服务器（常规 .net 服务器）

```
<Unit xmlns="">
    <UnitId>555</UnitId>
    <VehicleId>555</VehicleId>
    <EmployeeId>004</EmployeeId>
</Unit> 
```

从父系统（未知平台）

```
<Unit>
   <UnitId>308</UnitId>
   <VehicleId>307</VehicleId>
   <EmployeeId>ASA 500</EmployeeId>
</Unit> 
```

此外，父系统没有设置标准命名空间 (xmlns)，而是在根节点中使用前缀，如下所示：

```
<amg:RequestFinishRoute xmlns:amg="http://beans.order.integration.tt.transware.se/order/trackingFinishRoute"> 
```

而我们通过序列化创建的数据给出：

```
<RequestFinishRoute xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://beans.order.integration.tt.transware.se/order/trackingFinishRoute"> 
```

我使用一个：

```
System.Xml.Serialization.XmlSerializer 
```

序列化器进行序列化/反序列化（仅在紧凑框架中支持序列化器）。

执行此操作的代码由 xsd2code 生成。

**问题：**

有人有关于这个问题的任何提示或资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:48:59.617

两个平台是否使用相同的编码？我从手持条码扫描仪生成的 Xmls 能够被 PC 上的 VFP 程序读取。无论如何，我更喜欢使用 XmlTextWriter 而不是 XmlSerializer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:48:08.657

我遇到过一次。

对我来说，问题是将类添加到每个项目中：

> 命名空间项目PC
> 
> 类 SerializableClass1

和

> 命名空间 ProjectMobile
> 
> 类 SerializableClass1

即使两个名称空间中的类`ProjectPC`相同，我也没有成功反序列化 from 。`ProjectMobile``SerializableClass1`

我的解决方案是创建一个命名空间并将其分别导入每个项目：

> 命名空间 ProjectUniversal
> 
> 类 SerializableClass1

完成后，您必须将其包含`ProjectUniversal`在您的每个其他项目中。

为了获得更大的灵活性，我还制作`ProjectUniversal`了自己的静态 Serialize 和 Deserialize 方法。

我希望这是有道理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:02:29.350

我找到了一个解决方案，并将其发布在这里以供其他有同样问题的人使用。

在对生成的类进行一些实验后，我发现紧凑的框架不喜欢派生对象。

该模式定义了一个基本的“路由”对象和几个专门的“路由”对象。这转化为 xsd2code 生成一个基类“baseRoute”和专门的路由，如“someRoute : baseRoute”。

删除继承并将代码从“baseRoute”复制粘贴到专用路由中解决了我所有的问题。

我还按照 VinceL 的（给你的点数）建议更改为 XmlTextWriter。通过这样做字符编码是自动完成的，这更方便。

# php - 如何在 PHP 中带有 IN 子句的查询中使用准备好的语句

> ID：10501394
> 
> 赞同：5
> 
> 时间：2012-05-08T15:11:16.740
> 
> 标签：php, mysql, prepared-statement

我需要做一个简单的查询

```
$array_of_ids = array();
//poulate $array_of_ids, they don't come from another db but from Facebook
//so i can't use a subquery for the IN clause
$wpdb->prepare("SELECT id from table where id IN (%d, %d)", $array_of_ids [0], $array_of_ids [1]); 
```

问题是，如果我在数组中有 200 个元素，那么处理这个问题的正确方法是什么？我是否必须使用 200 手动构建查询`%d`？我需要这个查询，因为我必须将我的数据库与 facebook 数据“同步”，并且我必须检查我在数据库中的用户是否存在，更新那些存在的用户，插入新用户并删除那些不是我朋友的用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:15:17.033

如果您确定数组元素是数字：

```
$wpdb->prepare("SELECT id FROM table WHERE id IN ("
  . implode(',',$array_of_ids) . ")"); 
```

否则，可以使用 的`vsprintf`形式`prepare`传入参数数组：

```
$wpdb->prepare("SELECT id FROM table WHERE id IN ("
  . str_repeat("%d,", count($array_of_ids)-1) . "%d)" , $array_of_ids); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:21:34.673

我不确定这是一个*好*方法，但你可以这样做：

```
$sql = "SELECT id from table where id IN (" 
     . implode(',', array_fill(0, count($array_of_ids), "%d"))
     . ")";

call_user_func_array(array($wpdb, 'prepare'), $array_of_ids); 
```

这将构建一个具有适当数量的字符串`%d`，然后用于`call_user_func_array`动态执行此操作。

也就是说，考虑到清理整数是多么容易，我不确定这是否真的是准备好的语句值得麻烦的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T13:14:02.473

由于这还没有公认的答案，我将使用[array_filter的方法](http://php.net/array_filter)

```
$array_of_ids = array(0,1,1,2,3,5,8,13);

echo "SELECT id from table where id IN (".implode(',', array_filter($array_of_ids,'is_int')).")"; 
```

将输出

```
SELECT id from table where id IN (0,1,1,2,3,5,8,13) 
```

尽管

```
$array_of_ids = array('zero',1,true,2,3,5,8,'thirteen');

echo "SELECT id from table where id IN (".implode(',', array_filter($array_of_ids,'is_int')).")"; 
```

将输出

```
SELECT id from table where id IN (1,2,3,5,8) 
```

请注意，这`is_int`不适用于 $_GET 变量，因此请`is_numeric`改用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:18:45.560

是的，动态sql就是这里的方式。幸运的是，整数很容易搞砸。

```
$vals = array_filter(array_map('intval', $vals)); 
```

确保您至少有一个值，然后将其内爆。这里不需要prepared statement，直接执行sql即可。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-08T15:23:56.187

你可以这样做 ：

```
$query = $wpdb->prepare("SELECT id from table where id IN :param");
$query->bindParam("param", "(".implode(',', array_map('intval', $array_of_ids)).")"); 
```

# javascript - Navigator.userAgent.match - 特定的手机识别

> ID：10501395
> 
> 赞同：0
> 
> 时间：2012-05-08T15:11:23.437
> 
> 标签：javascript, php, html, navigator

我正在识别用户何时使用 navigator.userAgent.match 使用某些手机，但使用 Android 时有很多平板电脑/手机/机顶盒。所以我有

```
if(navigator.userAgent.match(/android/i)){ 
```

但是，我将如何从 Android 列表中具体选择 HTC One S？它的用户代理是：

```
user-agent: Mozilla/5.0 (Linux; U; Android 4.0.3; en-gb; HTC_One_S Build/IML74K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30 
```

我可以说是 Android 4.0，但有很多产品都是 Android 4.0。下一步是检查屏幕尺寸，我可以这样做，但有没有办法专门检查 navigator.userAgent 是否与 HTC One S 完全匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:18:23.153

也许`if(navigator.userAgent.match(/HTC_One_S/i)){`？

# objective-c - 高清图像不起作用

> ID：10501399
> 
> 赞同：0
> 
> 时间：2012-05-08T15:11:39.097
> 
> 标签：objective-c, cocos2d-iphone

在模拟和设备上，我的 cocos2d 发生了一些奇怪的事情。我有 xcode 4.2，在模拟 ios5 上运行并且有`cocos2d v1.0.1`.

该应用程序运行良好，当所有图像都处于高清模式（双倍尺寸）时，但没有`-hd` 然后当我尝试将所有图像从 更改`image.png`为 时`image-hd.png`，他再也找不到图像了。

我不得不说，在我添加之后`-hd`，**在**我清理缓存之前它起作用了。缓存清理干净后，它就停止了。

在我的委托中启用了 HD，并且它在过去也有效。

他不知何故不能除了高清图像。

任何想法 ？？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:33:40.970

当我更新到 v1.0.1 时，这让我抓狂。我花了几个小时试图理解为什么它有时会在项目之间起作用，而不是其他时候。基本上，您需要做的就是确保在项目中包含正确命名的不同图像。你不能只在你的项目中使用 image-hd.png，否则它会失败。您必须在项目中同时包含 image.png 和 image-hd.png ，否则会如您所描述的那样出错。一旦你拥有两者，或者如果你同时使用 iPhone 和 iPad，包括所有 4 种类型。（image.png、image-hd.png、image-ipad.png 和 image-ipadhd.png）

然后在您的代码中仅引用 image.png 和 v1.0.1 将完成其余的工作。

# ruby-on-rails - validates_presence_of if 在 rails 3.2 和 mongoid + simple_form 上的条件

> ID：10501401
> 
> 赞同：4
> 
> 时间：2012-05-08T15:11:49.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我想验证这两个属性的存在`:shipping_cost`以及`:shipping_cost_anywhere`该属性`:shipping`是否等于`true`. 而如果

我的模型中有这个，但对我来说不能正常工作：

```
validates_presence_of :shipping_cost, :shipping_cost_anywhere, :allow_blank => "true" if :shipping == "true" 
```

这是我的 :shipping 属性：

```
field :shipping, :type => Boolean, :default => "false" 
```

我该怎么做？

谢谢！

已编辑。

**我正在使用 mongoid 和 simple_form 宝石**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T15:20:51.247

```
validates_presence_of :shipping_costs_anywhere, :if => :should_be_filled_in?

def should_be_filled_in?
  shipping_costs_anywhere == "value"
end 
```

该方法在语句中调用时将返回 true 或 false。无需在 shipping_costs_anywhere 前面加上冒号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T16:29:04.090

对我来说这个问题的解决方法是下一个代码：

```
validates :shipping_cost, :shipping_cost_anywhere, :presence => true, :if => :shipping? 
```

感谢大家的帮助，但任何答案都对我有用。谢谢！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-22T21:09:36.253

今天偶然发现了这个，并认为我会更新答案。正如其他人提到的，您可以将逻辑放入函数中。但是，您也可以将其放入 proc 中。

```
validates_presence_of :shipping_costs_anywhere, :if => Proc.new { |o|
  o.shipping_costs_anywhere == "value"} 
```

[http://guides.rubyonrails.org/active_record_validations.html#using-a-symbol-with-if-and-unless](http://guides.rubyonrails.org/active_record_validations.html#using-a-symbol-with-if-and-unless)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-08T19:15:13.930

现在`validates`优先于`validates_presences_of`等。正如 hyperjas 提到的，您可以这样做：

```
validates :shipping_cost,
  :shipping_cost_anywhere,
  :presence => true, :if => :shipping? 
```

`:shipping_cost`但是，这会限制和的整个验证`:shipping_cost_anywhere`。`validate`为了更好的可维护性，我更喜欢为每个属性单独声明。

更重要的是，您可能会遇到多个验证条件不同的情况（例如一个用于存在，另一个用于长度、格式或值）。你可以这样做：

```
validates :shipping_cost,
  presence: { if: :shipping? },
  numericality: { greater_than: 100, if: :heavy? } 
```

你也可以让 rails 评估一个 ruby​​ 字符串。

```
validates :shipping_cost,
  presence: { if: "shipping?" },
  numericality: { greater_than: 100, if: "shipping? and heavy?" } 
```

最后，可选择添加单独的自定义消息：

```
validates :shipping_cost,
  presence: { if: "shipping?", message: 'You forgot the shipping cost.' },
  numericality: { greater_than: 100, if: "shipping? and heavy?", message: 'Shipping heavy items is $100 minimum.' } 
```

等等。希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T15:22:13.373

我无法测试它，但我认为语法更像：

```
validates_presence_of :shipping_cost, :shipping_cost_anywhere, :allow_blank => "true", :if => "shipping.nil?" 
```

看：

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T15:16:06.637

这是我为我工作的代码。在 if 条件下调用方法而不是比较

```
 validates :prefix, :allow_blank => true, :uniqueness => { :case_sensitive => true } ,:if => :trunk_group_is_originating?

        def trunk_group_is_originating?
          if self.direction == "originating"
            true
          else
            false
          end
        end 
```

希望对你有帮助…………

# c# - PartialView 表单验证然后在 MVC3 中调用控制器方法

> ID：10501403
> 
> 赞同：1
> 
> 时间：2012-05-08T15:11:51.347
> 
> 标签：c#, asp.net-mvc-3, forms, validation

我对 MVC3 非常陌生，并且在解决问题时遇到了问题。现在我有一个部分视图，我在下面简化了：

```
@model blah.blah.blah.blah.ForumPost

@using (Html.BeginForm()) {

<fieldset>
    <legend>ForumPost</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.ForumID)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ForumID)
        @Html.ValidationMessageFor(model => model.ForumID)
    </div>
    <p>
        <input type="submit" value="Create" />
        @Html.ValidationSummary(true)
    </p>
</fieldset>

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
} 
```

我不适合表单验证。我一直在尝试使用 jquery 验证，但我似乎找不到一个适合我正在做的事情的好例子，只是迷路了。[我在这里](https://stackoverflow.com/questions/6940910/mvc3-partial-view-postback-not-work)基于这个例子，但这还不够。

完成后，我想在一些代码中调用一个方法，但我不确定一种干净的方法来做到这一点。我目前的工作方式是使用 ajax 调用，它真的很难看。还有一位同事建议我将该方法传递给实际的论坛帖子，但我不知道如何。我要调用的方法的代码如下：

```
public void PostToForum(ForumPost post)
{
    UserService cu = new UserService();
    int PostUserID = cu.GetUserIDByUsername(base.User.Identity.Name);

    if (this.ModelState.IsValid)
    {
        ForumPost nfp = service.CreateForumPost(post);
    }
} 
```

有人有一些提示吗？谢谢。

如果有必要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:15:12.333

Html 表单通常提交给控制器操作：

```
[HttpPost]
public ActionResult Create(ForumPost model)
{
    if (!ModelState.IsValid)
    {
        // validation failed => redisplay the view so that the user can fix the errors
        return View(model);
    }

    // at this stage the model is valid => process it:
    service.CreateForumPost(model);

    return ...
} 
```

现在，由于这是一个局部视图，因此您必须小心从该控制器操作返回的视图以及模型。如果你不使用 AJAX，你应该返回整个父视图和父视图模型。如果您使用 AjaxForm，那么您只能使用部分模型和视图。同样在这种情况下，如果成功，您可以将 Json 结果返回到视图以指示此成功，以便将执行的 javascript 处理程序可以采取相应的操作。

# html - 助手中的 image_tag 未将选项传递给查看

> ID：10501408
> 
> 赞同：7
> 
> 时间：2012-05-08T15:12:10.927
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

# 问题

我有一个运行三元运算的辅助方法。结果操作数都是 image_tag 方法。当我从视图中调用这个助手时，":size" 选项不会转换为 html 中的高度和宽度标签。当我将任一 image_tag 方法直接复制并粘贴到我的视图文件中时，一切正常。

### application_helper.rb

```
def display_portrait(candidate)
  if candidate.portrait_url
    image_tag(candidate.portrait_url.to_s, :size => "10x10")
  else
    image_tag("missing_portrait.png", :size => "10x10")
  end
end 
```

### 视图.html.erb

```
<%= display_portrait candidate %> DOES NOT GENERATE HEIGHT AND WITH ATTR'S

<%= image_tag("missing_portrait.png", :size => "10x10") %> DOES GENERATE ATTR'S 
```

助手仍然生成具有正确来源的锚点；它只缺少高度和宽度属性。

感谢您花点时间提供帮助，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T22:07:56.537

如果我是你，我无论如何都不会使用“大小”，除非你不关心 IE<9。我宁愿使用样式属性。

PS：特别是对于这个问题，我会尝试使用 width: 和 height: 来看看这是否会改变任何东西。我知道 Rails 中的一些助手有不同的行为，具体取决于它们被调用的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:25:13.340

首先通过在显示肖像方法中写入 puts 语句来检查条件，然后检查是什么

进来这个方法的参数。

您也可以在视图中执行此操作

```
 <%= image_tag(@image.portrait.url(:thumb):alt => "Description") %> 
```

希望对你有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:29:31.907

**application_helper.rb**

```
def display_portrait(candidate)
  if candidate == 1
    image_tag(candidate, :size => "10x10")
  else
    image_tag("missing_portrait.png", :size => "10x10")
  end
end 
```

**新的.html.erb**

在这种观点下，

```
<%= display_portrait 1 %> 
```

生成，

```
<img alt="1" height="10" src="/assets/1" width="10" /> 
```

和

```
<%= display_portrait 0 %> 
```

生成，

```
<img alt="Missing_portrait" height="10" src="/assets/missing_portrait.png" width="10" /> 
```

你的 If 条件一定有问题。

# visual-studio-2010 - Visual Studio Coded UI 测试，如何在同一个测试项目中使用不同的设置/清理脚本运行测试？

> ID：10501409
> 
> 赞同：0
> 
> 时间：2012-05-08T15:12:18.387
> 
> 标签：visual-studio-2010, installation, coded-ui-tests

如何使用不同的设置/清理脚本运行编码的 ui 测试？例如，我的测试项目中有 8 个编码的 ui 测试和一些设置/清理脚本。当运行这个测试套件（所有 8 个测试都自动按顺序运行）时，可以只选择一个活动的设置/清理脚本（我在测试菜单中添加）。如果我需要 8 个不同的设置/清理脚本怎么办？是逐个运行测试并且每次选择不同的设置/清理脚本的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:24:26.640

没有内置功能可以从测试菜单中选择不同的设置/清理功能。假设测试设置/清理脚本因测试场景而异，您可以使用对话框或为要运行的设置/清理测试的每个组合创建有序测试。

我可能倾向于在类/程序集初始化方法和测试设置类/结构中使用模式对话框或表单，可用于检查每次测试运行的正确测试初始化​​函数。

# java - FileTreeModel 多根

> ID：10501410
> 
> 赞同：4
> 
> 时间：2012-05-08T15:12:18.887
> 
> 标签：java, swing, jtree

[我在这里](http://www.chka.de/swing/tree/FileTreeModel.html)使用此代码来创建文件树模型。我希望它浏览文件。如何添加多个根？例如列表 C:/、D:/、E:/。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T16:38:12.767

A`TreeModel`只能有一个根节点，但您可以[`JTree.setRootVisible()`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JTree.html#setRootVisible%28boolean%29)在显示树时隐藏根节点。修改您的模型以具有包含每个文件系统根（C:\、D:\、E:\ 等）的虚拟根节点，并调用`JTree.setRootVisible(false)`您的 JTree。

# python-2.7 - Python 脚本中的 ping 请求失败

> ID：10501411
> 
> 赞同：1
> 
> 时间：2012-05-08T15:12:20.147
> 
> 标签：python-2.7, ping

我有一个 python 脚本想要 ping 一些（相当多！）主机。我已将其设置为读取 hosts.txt 文件的内容作为要在脚本中 ping 的主机。奇怪的是，对于前几个地址（无论它们是什么），我收到以下错误：

```
Ping request could not find host 66.211.181.182\. Please check the name and try again. 
```

我已经两次（在文件中）包含了上面显示的地址，它会尝试 ping。关于我做错了什么的任何想法 - 我是一个 python 新手，所以要温柔。

* * *

这是我的脚本：

```
import subprocess

hosts_file = open("hosts.txt","r")
lines = hosts_file.readlines()

for line in lines:
    ping = subprocess.Popen(
        ["ping", "-n", "1",line],
        stdout = subprocess.PIPE,
        stderr = subprocess.PIPE
    )
    out, error = ping.communicate() 
    print out
    print error
hosts_file.close() 
```

这是我的 hosts.txt 文件：

```
66.211.181.182
178.236.5.39
173.194.67.94
66.211.181.182 
```

以下是上述测试的结果：

```
Ping request could not find host 66.211.181.182
. Please check the name and try again.

Ping request could not find host 178.236.5.39
. Please check the name and try again.

Ping request could not find host 173.194.67.94
. Please check the name and try again.

Pinging 66.211.181.182 with 32 bytes of data:
Request timed out.

Ping statistics for 66.211.181.182:
    Packets: Sent = 1, Received = 0, Lost = 1 (100% loss) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:20:06.437

看起来`line`变量在末尾包含一个换行符（文件的最后一行除外）。来自[Python 教程](http://docs.python.org/tutorial/inputoutput.html)：

> `f.readline()`从文件中读取一行；换行符 ( `\n`) 留在字符串的末尾，如果文件不以换行符结尾，则仅在文件的最后一行省略。

您需要`\n`在调用之前剥离`Popen`：[如何在 Python 中删除（chomp）换行符？](https://stackoverflow.com/questions/275018/how-can-i-remove-chomp-a-newline-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:02:36.380

几点评论：

1.  强烈不推荐使用 readlines() ，因为它会将整个文件加载到内存中。
2.  我建议使用 Generator 以便在每一行上执行 rstrip，然后 ping 服务器。
3.  无需使用 file.close - 您可以使用为您执行此操作的 with 语句

您的代码应如下所示：

```
import subprocess
def PingHostName(hostname):
    ping=subprocess.Popen(["ping","-n","1",hostname],stdout=subprocess.PIPE
                  ,stderr=subprocess.PIPE)
    out,err=ping.communicate();
    print out
    if err is not None: print err

with open('C:\\myfile.txt') as f:
    striped_lines=(line.rstrip() for line in f)
    for x in striped_lines: PingHostName(x) 
```

# jquery - Jquery创建幻灯片每一步都有增加速度

> ID：10501412
> 
> 赞同：1
> 
> 时间：2012-05-08T15:12:20.667
> 
> 标签：jquery, slide, smooth

我正在构建一个需要平滑速度的滑块，并且速度自动增加每一步。检查网站以获得更好的理解，只需单击下一步和返回按钮： [http ://www.goldmansachs.com/what-we-do/index.html](http://www.goldmansachs.com/what-we-do/index.html)

所以你会看到当点击下一个按钮时，当前幻灯片会在下一个很短的时间内从右到左从慢到快并且非常快。

并且将替换当前滑块的下一个滑块移动得非常快，然后开始变慢并停在页面的左侧。

我只需要每张幻灯片中的一个元素，每张幻灯片中的元素并不像 goldmansachs 那样多。你能告诉我哪个脚本，或者任何教程或任何 jquery 插件可以提供这种效果吗？

我自己试过。我可以构建一个脚本来使速度变化从一开始就变得平滑而缓慢，然后开始变得更快和非常快！但是滑块的停止位置不能是固定的！这意味着它可能会移动得更长或更短！所以下一个滑块将停在左侧页面的前面或后面！

谢谢！

# sqlite - 两列唯一约束的组合

> ID：10501413
> 
> 赞同：9
> 
> 时间：2012-05-08T15:12:24.717
> 
> 标签：sqlite, constraints, unique-constraint

我创建了连接表*t1*和*t2的表**t1t2* ，如下所示：

 **```
CREATE TABLE t1t2(
id integer primary key,
t1_id integer,
t2_id integer,
foreign key(t1_id) references t1(id),
foreign key(t2_id) references t2(id)); 
```

是否可以定义一个仅启用元组（t1_id，t2_id）的唯一值的约束（限制）？或者我应该在应用程序中检查这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T15:25:51.297

```
 CREATE UNIQUE INDEX idx_twocols ON t1t2(t1_id, t2_id) 
```

您可能需要在两列中的每一列的声明中添加 NOT NULL。

或者，您可以选择放弃主键列（如果您使用它的只是唯一性）并在 和 的组合上创建主`t1_id`键`t2_id`：

```
CREATE TABLE t1t2(
t1_id integer NOT NULL,
t2_id integer NOT NULL,
PRIMARY KEY (t1_id, t2_id),
foreign key(t1_id) references t1(id),
foreign key(t2_id) references t2(id)); 
```

PRIMARY KEY 是 UNIQUE 索引的一种特殊情况。使用复合 PRIMARY KEY 可为您节省一列和一个索引，但要求您的应用程序了解这两者`t1_id`并`t2_id`从表中检索单行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-26T19:26:05.763

您可以将唯一约束添加到您的 create table 语句。这不必是主键。

```
UNIQUE(t1_id, t2_id), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T10:13:38.260

您可以使用这些选项创建您的唯一主索引以保留您的主键和唯一约束[SQL Lite 新索引选项](http://i.stack.imgur.com/M6Rcx.png)**

# spring - 春天与泽西岛 + 码头挑战

> ID：10501416
> 
> 赞同：2
> 
> 时间：2012-05-08T15:12:33.377
> 
> 标签：spring, dependency-injection, jetty, jersey

我是使用 Spring 进行依赖注入的新手，并且面临着一个看似具有挑战性的场景。

我的应用程序通过一个普通的旧套接字从遗留系统接收数据，对数据执行有趣的事情 (tm)，然后使用嵌入式 Jetty 实例通过 HTML5 Web 套接字抽出真正有趣的结果 (tm)。此外，Jetty 服务器托管了一个 Jersey servlet，它为所有有趣的东西 (tm) 提供了一个 RESTful 接口。

我想使用 Spring 将共享的 DAO 和应用程序服务对象注入到遗留端和我的 Jersey 资源中。这要求在遗留组件和 Jersey 之间共享 ApplicationContext。似乎我需要创建应用程序上下文，将其连接到我的遗留组件，然后在配置嵌入式 Jetty 服务器（我目前正在以编程方式进行）时将应用程序上下文传递给 Jersey ServletContext。

不幸的是，尚不清楚如何将现有的应用程序上下文传递到 Jersey ServletContext。可以做到吗？有更好的方法吗？

我想指出，这与我在 SO 上发现的其他 Jersey + Jetty + Spring 问题不同，它们不需要在 Jersey 之外共享应用程序上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:56:46.363

我假设您启动 Jetty 的代码类似于：

```
Server server = new Server(...);
server.setHandler(new WebAppContext(...)); 
```

您可以获取`ServletContext`from`WebAppContext`并在其上设置 SpringContext：

```
WebAppContext wac = new WebAppContext(...);
ServletContext sc = wac.getServletContext();
sc.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, springContext); 
```

# iphone - 为 NSURLRequest 生成 URL 字符串无法启动

> ID：10501418
> 
> 赞同：1
> 
> 时间：2012-05-08T15:12:33.580
> 
> 标签：iphone, objective-c, string, http, url

这让我很困惑。如果我输入以下内容：

```
NSString *LoginURLString = [NSString stringWithFormat:@"http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=13242134"];
//NSLog output:  http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=2314084 
```

并在 URL 请求中使用它，它可以正常工作，但我需要使其动态化，因此我使用以下命令将 URL 字符串与新的 UserID 连接起来：

```
NSString *user = [NSString stringWithFormat:@"%@", [[NSUserDefaults standardUserDefaults]stringForKey:@"CustomerID"]];

//user = [[NSUserDefaults standardUserDefaults] stringForKey:@"CustomerID"];

NSString *LoginURLString = [NSString stringWithFormat:@"http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=%@", user];
//NSLog output:  http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=2314084 
```

这是我的请求初始化程序的其余部分：

```
 NSString *urlString = LoginURLString;
responseData = [NSMutableData data];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

以及处理请求的其他方法：

```
 -(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [responseData setLength:0];
}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [responseData appendData:data];
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    //   [connection release];

    CommonPickUpArray = [[NSMutableArray alloc] init];
    CommonLocationInfoArray = [[NSMutableArray alloc] init];

    NSString *data = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];
    NSLog(@"%@", data);
} 
```

这个请求甚至永远不会开始。我真的不明白为什么。我试图将这两个字符串输出到 NSLog 并且无论哪种方式它们看起来都完全相同。谁能解释一下？谢谢你的帮助！

编辑： Connection`didFailWithError`方法正在输出：

> 错误域=NSURLErrorDomain 代码=-1000“错误 URL”UserInfo=0xf6a6f50 {NSUnderlyingError=0xf6a75d0“错误 URL”，NSLocalizedDescription=错误 URL}

答案 1 的输出：

2012-05-08 13:45:24.959 AmericanTaxi[1295:707] 连接失败并出现错误：错误的 URL 2012-05-08 13:45:24.960 AmericanTaxi[1295:707] 的 URL：(null)

urlString 和 LoginURLString 的输出：

2012-05-08 13:57:40.415 AmericanTaxi[1320:707] LoginURLString: [http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=2314084](http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=2314084)

2012-05-08 13:57:40.417 AmericanTaxi[1320:707] urlstring: [http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=2314084](http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&customerId=2314084)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:37:49.503

在您的 didFailWithError 中，检查 URL 并通过将其添加到您的 didFailWithError 委托来查看它为什么不好：

```
NSLog(@"Connection failed with error: %@", [error localizedDescription]);
NSLog(@"for the URL: %@", [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]); 
```

发布结果。

# django - DJANGO simplejson

> ID：10501419
> 
> 赞同：0
> 
> 时间：2012-05-08T15:12:44.393
> 
> 标签：django, django-views, simplejson

下午好..我有一个这样的模型：

```
class Reportage:
    def get_num(self):
        end_date = self.date.end_date
        start_date = self.date.start_date
        duration = time.mktime(end_date.timetuple()) - time.mktime(start_date.timetuple())
        delta_t = duration / 60
        num = []

        for t in range(0,duration,delta_t):
            start = t + start_date
            end = datetime.timedelta(0,t+delta_t) + start_date
            n_num = self.get_num_in_interval(start,end)
            num.append([t, n_num])
        return num 
```

我想用simplejson序列化`num []`views.py中的数组，以便在第二时刻将此数组传递给jquery脚本以将其绘制在图中..序列化该数组的代码是什么..？我希望我很清楚..提前感谢所有回复的人..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:21:59.200

在@ninefingers 的回复之后。我认为您的问题是关于如何使转储的 json 字符串可用于 jQuery 插件。

```
# views.py

def my_view(request):
# do stuff
num = reportage_instance.get_num()
num_json = simplejson.dumps(num)
return render(request, 'template.html', {
  'num_json': num_json,
}) 
```

在您的模板中，您将该 json obj 作为 Javascript 变量提供

```
# template.html

<html>
<body>
<script>
var NUM_JSON = {{num_json|safe}};
myScript.doSomething(NUM_JSON);
</script>
</body>
</html> 
```

现在您可以使用 NUM_JSON 变量调用常规 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:20:38.603

如果您希望在模型中执行此操作，则可以使用以下方法：

```
# if this were a models.py file:

import simplejson
# other django imports:

class SomeModel(models.Model):

    property = models.SomeField()...

    def some_function(self):
        num = []

        # full num

        simplejson.dumps(num) 
```

这将转储`num`到 json 的字符串表示形式，然后您可以将其返回或写入文件，等等。

从视图中您可以选择 - 但如果您的视图是返回一些 json 进行处理的 ajax 视图，您可以这样做：

```
# views.py

# ...

def my_ajax_call(request, model_pk):
    try:    
        mymodel = SomeModel.get(pk=model_pk)
    except SomeModel.NotFoundException as e:
        return HttpResonse("Unknown model", status=404)
    else:
        return HttpResponse(mymodel.some_function()) # returns simplejson.dumps(num) 
```

然后可以从 Javascript 中的模板中使用它 - 另一个答案向您展示了如何处理它:)

# php - jQuery POST 在按钮单击时删除文件

> ID：10501420
> 
> 赞同：0
> 
> 时间：2012-05-08T15:12:53.090
> 
> 标签：php, jquery, delete-file

我想知道是否有人可以帮助我。

我整理了[这个](http://www.mapmyfinds.co.uk/development/deletetest.php)页面，允许用户查看他们上传的图片库。

我现在正在开发该`deletion`功能，以便用户可以删除任何图像。从本网站成员的一些非常有用的指导中[，](https://stackoverflow.com/questions/10499450/delete-image-files-from-server)我一直在查看 jQuery POST 方法，`unlinking`即来自存储它们的服务器的图像。

根据他们的指导和我一直在做的后续研究，我认为我可以使用相对路径，即`$path`.

我想出了以下我试图添加到我的脚本中的内容：

```
<script type="text/javascript"> 

    Galleria.ready(function() {
        this.$('thumblink').click();

        $(".galleria-image").append( 
            "<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
            $(".btn-delete").live("click", function() 
            { var img = $(this).closest(".galleria-image").find("img"); 
                alert('Deleting image... ');
                $(this).closest(".galleria-image"). fadeOut('slow');

                $.ajax({
                    type: "POST",
                    url: "$path",
                }
            });
            return false;
        });

    }); 
```

不幸的是，我显然做错了什么，因为这影响了我的画廊功能并且它不再有效。也许，因为我对此很陌生，所以我看得太简单了，我不确定。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:21:30.100

您的括号在之后不匹配

```
$.ajax({
    type: "POST",
    url: "$path",
} 
```

这可能就是javascript被破坏的原因。

# javascript - 循环遍历 JavaScript InDesign 脚本中的所有线程文本框架？

> ID：10501421
> 
> 赞同：3
> 
> 时间：2012-05-08T15:12:58.150
> 
> 标签：javascript, scripting, automation, adobe-indesign

我正在尝试创建一个功能与 SplitStory.jsx 完全相同的 InDesign 脚本，只是它不需要首先选择一个线程化的文本框架，而是循环遍历整个文档中线程化/链接的所有内容*。*

这是我到目前为止所拥有的，但它似乎没有做任何事情。我对脚本很陌生。

```
main();
function main(){
    //Make certain that user interaction (display of dialogs, etc.) is turned on.
    app.scriptPreferences.userInteractionLevel = UserInteractionLevels.interactWithAll;
    if(app.documents.length != 0){
        var myDoc = app.activeDocument;
        var myStories = 0;
        for (var i = 0; myDoc.stories.length > i; i++)
            myStories = myDoc.stories[i];
            mySplitStory(myStories);
            myRemoveFrames(myStories);
    }
    else{
        alert("Please open a document and try again.");
    }
}
function mySplitStory(myStory){
    var myTextFrame;
    //Duplicate each text frame in the story.
    for(var myCounter = myStory.textContainers.length-1; myCounter >= 0; myCounter --){
        myTextFrame = myStory.textContainers[myCounter];
        myTextFrame.duplicate();
    }
}
function myRemoveFrames(myStory){
    //Remove each text frame in the story. Iterate backwards to avoid invalid references.
    for(var myCounter = myStory.textContainers.length-1; myCounter >= 0; myCounter --){
        myStory.textContainers[myCounter].remove();
    }
} 
```

我觉得我需要添加一些`mySplitStory(myStories);`喜欢的东西`mySplitStory(myStories.currentStory);`，但是我在网上找不到任何关于这个的东西（或者在 Adob​​e 的脚本文档中——但也许我没有在正确的地方寻找）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:06:51.010

这是一个非常简单的脚本，它允许您遍历文档中的所有 textFrame，然后对线程化的文本框架执行任何您需要的操作。基本上，如果任何给定的 textFrame 有一个`textFrame`对象，`nextTextFrame`或者`previousTextFrame`您知道它是线程的。

```
test();
function test(){

    var myDoc = app.open('c:/123.indd');

    //get all textframes:
    var allTextFrames = myDoc.textFrames;

    for(var i=0;i<allTextFrames.length;i++){
        var tf = allTextFrames[i];

        if(tf.nextTextFrame != null || tf.previousTextFrame != null){

           //text frame is threaded, do work:
        }
    }
} 
```

希望这可以帮助！！

# c# - 加载时 SideBySide 免注册 COM 失败

> ID：10501422
> 
> 赞同：3
> 
> 时间：2012-05-08T15:13:00.900
> 
> 标签：c#, .net, delphi, com

我正在尝试创建一个没有 COM 注册的 Delphi 应用程序使用的 C# COM 服务器。

该过程在[ms 博客上进行了描述 - 基于 .NET 的组件的免注册激活：演练](http://msdn.microsoft.com/en-us/library/ms973915%28d=printer%29.aspx)

我创建了必要的清单文件并将它们链接到程序集。

应用清单：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity
    type="win32"
    name="Vorg"
    version="1.0.0.0" />
  <dependency>
    <dependentAssembly>
      <assemblyIdentity
        type="win32"
        name="Microsoft.Windows.Common-Controls"
        version="6.0.0.0"
        publicKeyToken="6595b64144ccf1df"
        language="*"
        processorArchitecture="x86"/>
    </dependentAssembly>
  </dependency>
  <dependency>
    <dependentAssembly>
                <assemblyIdentity
                            type="win32"
                            name="Vorg.WpfClient"
                            version="1.0.0.0" />
    </dependentAssembly>
  </dependency>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="asInvoker"
          uiAccess="false"/>
        </requestedPrivileges>
    </security>
  </trustInfo>
</assembly> 
```

和程序集清单：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <assemblyIdentity type="win32" name="Vorg.WpfClient" version="1.0.0.0" />
    <clrClass
        clsid="{69A72676-8EA7-3C38-BFBC-F0DFE745C329}"
        progid="Vorg.WpfClient"
        threadingModel="Both"
        name="KundM.Vorg.WpfClient.VorgComClient">
    </clrClass>
</assembly> 
```

那些工作正常（我认为）。sxs 不报告任何错误。clsid 对于 com 类也是正确的。但是在启动应用程序时，它因 ole 异常 0x8013101b 而崩溃。

删除清单并在未找到异常的类中运行 curse 的应用程序结果。让 com 类注册应用程序正常启动，没有任何错误。

异常可能会说“错误的框架版本”。

我试图在类清单中指定运行时。但这并没有解决问题。

是什么导致异常？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:07:19.377

解决了。

[Fuslogvw.exe](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.100%29.aspx)程序给了我正确的方向。此工具显示程序集的加载过程。

要启用它，您需要创建一个 reg 密钥。

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion dword ForceLog=1

那里生成的报告向我展示了这个（对不起德国框架）：

```
LOG: DisplayName = vorg.wpfclient, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
===
LOG: Diese Bindung startet im default-Load-Kontext.
LOG: Der Assembly-Download wurde durchgeführt. Datei-Setup wird begonnen: E:\work\VOrg\bin\vorg.wpfclient.dll.
LOG: Die von der Quelle ausgeführte Setup-Phase beginnt.
LOG: Der Assemblyname ist: Vorg.WpfClient, Version=1.0.0.0, Culture=neutral, PublicKeyToken=174d633867192b66.
WRN: Der Vergleich des Assemblynamens führte zum Konflikt: PUBLIC KEY TOKEN.
ERR: Der Assemblyverweis entsprach nicht der gefundenen Assemblydefinition.
ERR: Das Setup der Assembly konnte nicht abgeschlossen werden (hr = 0x80131040). Die Suche wurde beendet. 
```

我没有在清单中指定公钥令牌。现在我愿意！来自微软的清单的模式文件是错误的！它显示版本和一些其他属性作为可选。

我还在 com 清单中指定了运行时。也可以通过 app.config 文件指定框架版本。

*   [免费注册 COM/.Net 互操作](http://blogs.msdn.com/b/junfeng/archive/2006/05/17/registration-free-com-net-interop.aspx)
*   [进程内并行执行](http://msdn.microsoft.com/en-us/library/ee518876.aspx)

# sql-server - 通过 Coldfusion 将非罗马字符插入 SQL Server

> ID：10501423
> 
> 赞同：1
> 
> 时间：2012-05-08T15:13:02.113
> 
> 标签：sql-server, csv, coldfusion, character-encoding

**编辑：来自 Sharondio 的修复：是否在 cfadmin 数据源高级设置中检查了“--为配置为非拉丁字符的数据源启用高 ASCII 字符和 Unicode”设置？**完整的路径是 CFAdmin --> Data & Services --> Datasources --> 点击您的数据源 --> 点击 Show Advanced Settings --> 勾选上述框。

我正在尝试创建一个批量导入页面（在 Coldfusion 中），该页面将接收 CSV 文件并将数据插入 SQL Server 数据库。CSV 文件可以包含多种语言的数据，包括不使用罗马字符的语言，例如中文、韩语、印地语和泰语。

当我运行导入时，任何带有非罗马字符的内容都会在 SQL Server Management Studio 中显示为一串问号，并且尝试在我的 Coldfusion 应用程序中输出数据时也会显示问号。先前输入的阿拉伯语数据在网站和管理工作室中正确显示，因此它看起来不像我的网站或数据库上的编码问题。

我尝试了 UTF-8 和 UTF-16 编码的 CSV 文件（在 Excel 和记事本中创建），但都没有成功。我正在使用 SQL Server 2000；排序规则设置为 SQL_Latin1_General_CP1_CI_AS。我要插入的列是 ntext。

经过一番阅读，我尝试修改我的插入语句以在插入的字符串之前有 N 个字符（即插入 table_blah（列）值（N'stuff'）），但这也没有什么区别。

在这一点上，我正在寻找任何人都可以提供的任何提示或指导。谢谢。

编辑@Jake Feasel

我试图插入的表：

```
ID             int
Language_ID    int
Value          ntext 
```

就我要插入的内容而言，它是以下格式的 CSV：

```
English    French      Chinese    Hindi    Thai      German
Course     cours       课程        कोर्स      หลักสูตร    Kurs
Student    étudiant    学生        छात्र      นักเรียน     Schüler 
```

通过 Coldfusion 查询将其插入数据库（循环导入的 CSV 并插入适当的语言 ID 值和翻译值）：

```
<cfquery name="insert_values" datasource="#APPLICATION.DSN#">
    INSERT INTO tbl_language_value (Language_ID, Value)
    VALUES (
    <cfqueryparam cfsqltype="cf_sql_integer" value="3" />,
    <cfqueryparam cfsqltype="cf_sql_varchar" value="นักเรียน" 
    )
SELECT SCOPE_IDENTITY() AS 'New_ID';
</cfquery> 
```

当我转储查询结果时，我可以看到查询本身采用了非罗马语言的正确字符，但由于某种原因，它们没有以这种方式插入到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:49:12.953

如果您使用的是 CF10 之前的 ColdFusion 版本，则需要`String format`在您正在使用的数据库的 ColdFusion 管理员数据源设置中启用。

如果您使用的是 ColdFusion 10，那么您需要注意这个[关于 ColdFusion 10 更改的问题](https://stackoverflow.com/questions/10802388/what-are-the-details-for-using-cf-sql-nvarchar-in-coldfusion-10)的结果。

*   [相关信息`String Format`](http://help.adobe.com/en_US/ColdFusion/9.0/Admin/WSc3ff6d0ea77859461172e0811cbf364104-7fe5.html)
*   [ColdFusion 查询和底层数据库之间的 cfqueryparam 映射](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f6f.html)

# android - Android XML解析失败意外令牌

> ID：10501426
> 
> 赞同：3
> 
> 时间：2012-05-08T15:13:13.733
> 
> 标签：android, xml, sax

在我的应用程序（游戏）中，我需要读取一个 XML 脚本并变成一个类对象；我已经通过 DOM 完成了整个 XML 阅读器

但是当我运行时，出现以下错误：

```
05-08 23:03:22.342: I/System.out(588): XML Pasing Excpetion = org.xml.sax.SAXParseException: Unexpected token (position:TEXT ��������������������...@1:69 in java.io.InputStreamReader@4129a200) 
```

我已经阅读了一些关于此的答案，但它们都未能解决我的问题（http://stackoverflow.com/questions/7885962/android-utf-8-file-parsing）..

这是我的代码：

```
 InputStream inputStream = ctx.getResources().openRawResource(R.xml.script);
ctx.getApplicationContext().getPackageName()+"/xml/"+path);

        Reader reader = new InputStreamReader(inputStream,"UTF-8");

        InputSource is = new InputSource(reader);
        is.setEncoding("UTF-8");

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();

        Document root = db.parse(is); 
```

根据问题，我也试过这个：

```
 InputStream inputStream = ctx.getResources().openRawResource(R.xml.script);
 Document root = db.parse(inputStream); 
```

这产生了完全相同的异常......

如何解决这个问题呢？

我的 xml 文件：

```
<script>

<scene no="0">
    <character id="1">1</character>

    <dialog no="1">
        <title>1</title>
 Sub-Element 1
    </dialog>
</scene>

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:19:55.160

您的 XML 无效。“子元素 1”应该在元素本身内。XML 文档还应该以将其定义为 XML 的标记开头：`<?xml version="1.0" ?>`因此您的完整文件将是：

```
<?xml version="1.0" ?>
<script>
<scene no="0">
    <character id="1">1</character>
    <dialog no="1">
        <title>1</title>
        <something_else>Sub-Element 1</something_else>
    </dialog>
</scene>
</script> 
```

或者您可以使用“子元素”作为元素名称（而不是`something_else`）和 1 作为值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:18:47.097

你在哪里存储你的 xml 文件？在“res”文件夹中。您应该将其存储在“资产”中。由于特定的“res”文件夹及其在 apk 中的介绍，Res-solution 不起作用。将您的文件移动到“资产”，您会看到一切正常。使用以下代码创建 InputSource

```
getAssets().open("yourfilename.xml") 
```

# android - 如何修改 ICS 上的 ListView 使其看起来像 google+ 应用程序中的关于活动？

> ID：10501427
> 
> 赞同：0
> 
> 时间：2012-05-08T15:13:19.493
> 
> 标签：android, android-listview, android-4.0-ice-cream-sandwich, google-plus

我想在我的应用程序中进行类似的活动。我知道如何修改`Adapter`课程，但我认为这种情况很难。有没有更简单的方法来做类似的活动？图片在这里：

![在此处输入图像描述](../Images/d48223b9cd6df7014bf71cfcbf151ee3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:23:42.727

在我看来，它不是一个`ListView`，它只是一个`LinearLayout`内部垂直方向的`ScrollView`。`ListView`如果静态视图很少，请避免使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:05:38.603

如果您指的是此活动的列表适配器，请尝试[CWAC Merge Adapter](https://github.com/commonsguy/cwac-merge)，我使用它来实现类似的活动。

如果您的意思是 Tab Adapter，请在 android-support-v4 中使用[ActionbarSherlock](https://github.com/JakeWharton/ActionBarSherlock)和 ViewPager，我也这样做了。

他们都有演示，试试看。

# java - 类文件中不兼容的魔法值 21877456

> ID：10501440
> 
> 赞同：1
> 
> 时间：2012-05-08T15:14:07.690
> 
> 标签：java, windows, iis, applet

我试图在我的网页上使用 java 小程序。我尝试/搜索很多东西，但没有机会。所以这就是这种情况。

我的小程序代码在 app.html 中很简单：

```
 <applet codebase="." archive="applet.jar" code="de.escape.quincunx.dxf.apViewer" width="640" height="480" name="TEST">
    <param name="file"               value="40.dxf">
    <param name="framed"             value="false">
    <param name="frameWidth"         value="800">
    <param name="frameHeight"        value="600">
    </applet> 
```

当我直接在浏览器中打开时，此 html 文件正在工作。当我使用 apache 服务它时它可以工作，但是当我尝试使用 IIS 服务时它不工作并给出错误“类文件中不兼容的魔法值 21877456”。在 apache 中，我尝试使用 php 和 html，两者都在工作。

当我尝试为小程序提供服务时，IIS 上是否需要任何特殊配置？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:45:07.170

我认为 IIS 没有为 .class 提供正确的文件，可能它正在返回 404 错误或类似的东西，因为它找不到文件。

这个错误意味着 Java 需要一个 .class 文件，所有的类文件都以 0xCAFEBABE 开头，这是一个神奇的数字，Java 可以用它检查它正在接收的文件实际上是一个类文件。但是，在您的情况下，IIS 返回的文件不是类文件，它不是以 0xCAFEBABE 开头，Java 无法解析它。

最常见的原因是 Web 服务器无法提供文件，通常是因为 404 错误。

您应该检查幕后发生的事情，在 IIS 日志中搜索 .class 文件的请求，或者使用工具（甚至可能是 firebug）查看返回给浏览器的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:17:34.690

最后我找到了解决方案。实际上它不是确切的解决方案，但感谢您的回答 Simone Gianni。他的回答让我深入搜索了 IIS 访问日志，并将它们与 APACHE 访问日志进行了比较。是的，两者都是相同的，看起来 JAR 文件中没有几个类。因此 apVPORT.class 不在 jar 文件中，编写此小程序的开发人员将这些类的调用留在小程序的其他部分，即使他不使用它们。

如果有人可以回答 apache 不向 java 发送任何信息或“它的 okey”信息的原因并继续加载小程序的其余部分，即使它看到 apVPORT.class 的 404 但 IIS 向 java 发送 404，这将是最终的回答这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T07:26:24.833

类文件中不兼容的魔法值 21877456：我发现当页面无法访问/读取 jar 文件时出现此错误。

在 aspx 页面中 -

```
 <applet code="FileAccess.class"
   archive="../applet/SignFileAccessApplet.jar" width="325" height="325">  
   </applet> 
```

在存档中，使用 Visual Studio 的智能感知提供的“pickurl”选项检查 url 是否正确。jar 文件中的类文件路径需要在 code 属性中给出。

# reporting-services - SSRS 报告不遵守分页符

> ID：10501442
> 
> 赞同：2
> 
> 时间：2012-05-08T15:14:27.060
> 
> 标签：reporting-services, reportingservices-2005

我在 SSRS 2005 中继承了一份报告

这是一个非常简单的报表，只有页眉、页脚和正文中的表格

该表有一组（按国家/地区）我曾尝试在之前、之后和两者中设置该组的分页符。无论我在屏幕上选择哪个选项，通过浏览器的报表查看器，总是显示为一个连续的页面，而不是每个国家开始新页面的预期结果。

还有什么要检查的会导致这种行为的想法吗？

谢谢

编辑：在 Pdf Export 中，分页符工作

编辑：澄清我指的是通过浏览器的报告查看器，而不是 HTML 导出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T00:12:27.537

它适用于导出为 PDF，但不适用于其他地方，因为基于页面的输出服从分页符。

HTML 不是基于页面的。HTML 在交互式页面高度上中断。

这可能会有所帮助：[http ://technet.microsoft.com/en-us/library/dd255244.aspx](http://technet.microsoft.com/en-us/library/dd255244.aspx)

# android - 从联系人信息中获取特定电话号码的头像

> ID：10501446
> 
> 赞同：0
> 
> 时间：2012-05-08T15:14:35.793
> 
> 标签：android

我正在开发消息发送/接收应用程序，我需要获取电话号码的个人资料图片。谁能帮我获取特定号码的个人资料图片？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:48:05.747

```
public static int getContactIDFromNumber(String contactNumber,Context context)
{
    contactNumber = Uri.encode(contactNumber);
    int phoneContactID = new Random().nextInt();
    Cursor contactLookupCursor = context.getContentResolver().query(Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,Uri.encode(contactNumber)),new String[] {PhoneLookup.DISPLAY_NAME, PhoneLookup._ID}, null, null, null);
        while(contactLookupCursor.moveToNext()){
            phoneContactID = contactLookupCursor.getInt(contactLookupCursor.getColumnIndexOrThrow(PhoneLookup._ID));
            }
        contactLookupCursor.close();

    return phoneContactID;
} 
```

上述方法返回特定电话号码的contactId，并参考此[链接](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.Photo.html)从contactID获取头像。

# c# - Silverlight 在网站根目录上方检查“clientaccesspolicy.xml”

> ID：10501447
> 
> 赞同：2
> 
> 时间：2012-05-08T15:14:36.777
> 
> 标签：c#, silverlight, web-services, silverlight-4.0, clientaccesspolicy.xml

我们的 Silverlight 应用程序有一个奇怪的问题，它似乎以“clientaccesspolicy.xml”文件为中心。

我们有一个网站，这是 IIS7 上的默认网站。在该网站的根目录中，我们有“clientaccesspolicy.xml”文件。

我们还在“http://thewebsite/asubdirectory/service.asmx”中定义了一个 Web 服务，它处理对网站的一些 Silverlight 请求。

似乎发生的事情是，当我们尝试加载 silverlight 组件时，有一个对“http://asubdirectory/clientaccesspolicy.xml”的 http 请求，这显然是错误的。

奇怪的是，如果我将默认网站设置为空白，并将这个特定网站设置为默认网站下方的应用程序/虚拟目录。例如[http://thewebsite/subdomain/](http://thewebsite/subdomain/)然后对 clientaccesspolicy 的请求转到[http://thewebsite/clientaccesspolicy.xml](http://thewebsite/clientaccesspolicy.xml)并假设我在默认网站的根目录中保留了该文件的副本，一切正常。

我想知道的是，当网站被定义为默认值时，silverlight/IIS 如何确定它需要进一步查找 clientaccesspolicy 的根目录。

可能是 Silverlight 中的服务位置或服务引用？有没有明智的方法来解决这个问题？

非常感谢，

道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:17:59.640

如果不是同一个域，Silverlight 需要向目标站点询问跨域策略。因此，根据您的“http://asubdirectory”，我认为您的代码在某个地方是错误的，实际上尝试在 http:// **asubdirectory** /someservice 位置使用服务，而不是 http:// **thewebsite/asubdirectory** /someservice。

# objective-c - cocos2d中的UIActivityIndi catorView

> ID：10501448
> 
> 赞同：2
> 
> 时间：2012-05-08T15:14:37.143
> 
> 标签：objective-c, ios, cocos2d-iphone, uikit, uiactivityindicatorview

**嗨，大家好！**
目前正在发现 cocos2d 框架。
现在我正在尝试在**cocos2d**项目中使用**UIKit**的东西。

 ****我在做什么：**我添加了方法：

```
 -(void)activityIndicatorRun {
        spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
        spinner.color = [UIColor orangeColor];
        spinner.hidesWhenStopped = YES;
        [spinner startAnimating];
        [self scheduleOnce:@selector(activityIndicatorStop) delay:5.0f];
    } 
```

**和**

```
-(void)activityIndicatorStop {
   [spinner stopAnimating];
} 
```

在我将类似代码添加到我的**init**方法之后：

```
[self scheduleOnce:@selector(activityIndicatorRun) delay:54]; 
```

我认为我需要在我的视图中添加一个子视图。但我不确定你如何做到这一点，以及在哪里。

**问题：**谁能帮助我？

*提前致谢！*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:17:08.667

您可以在 cocos2d 应用程序中添加 UIKit 组件作为底层 OpenGL ES 视图的子视图。

对于 cocos2d-iphone 0.99/1.0：

```
[[[CCDirector sharedDirector] openGLView] addSubview:spinner]; 
```

对于 2.x：

```
// CCDirector is subclass of UIViewController in 2.x on iOS
[[[CCDirector sharedDirector] view] addSubview:spinner]; 
```**

# hyperlink - 跟踪网站的出站链接

> ID：10501453
> 
> 赞同：-1
> 
> 时间：2012-05-08T15:14:53.747
> 
> 标签：hyperlink, outbound

嗨，我有一个网站，它有许多附属链接，我想衡量哪些表现最好。我可以在侧边栏和每篇文章的末尾使用相同的链接，我想知道哪个是最好的，侧边栏一个，还是文章后面的那个。

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:20:19.557

在每个链接中，尝试添加`onclick`带有 Google Analytics 事件跟踪的 JS 片段，或者类似的自行创建的代码或您使用的其他分析套件的代码。我做了类似的事情，通过在`onclick`

```
_gaq.push(['_trackPageview', '/<?=$idnumber?>/download']); 
```

# c - GDB：监视给定范围内的变量

> ID：10501455
> 
> 赞同：6
> 
> 时间：2012-05-08T15:15:01.277
> 
> 标签：c, gdb

有了 GDB，我可以在任何变化`watch i`时中断`i`。问题是我有多个使用 name 的函数`i`，所以 GDB 打破了所有这些函数。

是否可以在更改时中断`i`，但仅在给定函数内？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:40:52.437

我猜您正在***观看一个全局变量***，因此它会在修改此变量的所有函数中停止，***这是逻辑和预期的行为***。如果您只想在更改时仅在给定函数内中断`i`，请不要为`i`. 而是为所需的函数设置断点。当这个断点被命中时，**现在**设置监视，`i`以便您确定`i`在所需函数中修改时将命中下一个断点（忽略可能的递归等）

我猜想您可能不会在每个同名函数中观察局部变量，因为***在该特定函数的范围内之前，您无法在局部变量上设置断点。***

# android - 多个自动完成文本视图

> ID：10501459
> 
> 赞同：0
> 
> 时间：2012-05-08T15:15:24.407
> 
> 标签：android, autocomplete

在这个关于 AutoCompleteTextView 的 Android 开发者[教程中。](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)如果我有多个 AutoCompleteTextView 或者使用一个就足够并将每个都放在一个 ArrayAdapter 上，我是否需要创建多个 xml 布局 textview 实例

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:22:02.430

您只需要一个 list_item XML 文件。您可以为每个 AutoCompleteTextView 实例/视图重复使用该布局。如果自动完成单词列表相同，我相信您甚至可以重复使用适配器。

# ruby-on-rails - 使用 RSpec 为带有 Rails 的 Redis 编写测试

> ID：10501461
> 
> 赞同：19
> 
> 时间：2012-05-08T15:15:38.320
> 
> 标签：ruby-on-rails, ruby, rspec, redis, capybara

我有一个将数据缓存在 redis 中的模型类。我第一次在模型上调用方法时，它会计算 JSON/Hash 值并将其存储在 Redis 中。在某些情况下，我会“刷新”该数据，并在下一次调用时重新计算。

这是类似于我用来在 Redis 中存储数据的代码片段：

```
def cache_data
  self.data_values = data_to_cache
  REDIS.set(redis_key,ActiveSupport::JSON.encode(self.data_values))
  REDIS.get(redis_key) 
end

def data_to_cache
  # generate a hash of values to return
end 
```

我应该如何对这段代码进行单元测试？我使用 RSpec 和 Capybara。如果有帮助，我还会使用 Cucumber 和 Capabara 进行集成测试。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-15T08:29:48.753

我喜欢在测试运行时运行 redis。Redis 与 postgres 不同，速度非常快，并且不会显着减慢测试运行时间。

只要确保你调用`REDIS.flush`了一个`before(:each)`块，或者相应的黄瓜钩子。

您可以`data_to_cache`独立于 redis 进行测试，但除非您可以完全信任您正在使用的 redis 驱动程序及其提供的合约，否则实时测试`cache_data`（以及相应的缓存获取方法）会更安全。这也允许您切换到不同的 redis 驱动程序（或不同的快速 KV 存储），而无需大规模重写您的测试。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-08T19:31:57.693

首先，在 spec_helper.rb 中添加以下代码，这样即使未安装 redis 服务器，您也可以确保测试将在任何机器上运行（确保在测试范围下添加到 gemfile mock_redis 中：

```
redis_instance = MockRedis.new
Redis.stub(:new).returns(redis_instance)
Redis::Store.stub(:new).returns(redis_instance) 
```

之后我会测试：

1.  写入 REDIS 的数据是预期的数据
2.  一系列cache_data、flush_data、cache_data调用data_to_cache两次

# database - 在 BlackBerry 设备的 RAM 中创建数据库。可能的？

> ID：10501464
> 
> 赞同：0
> 
> 时间：2012-05-08T15:15:56.800
> 
> 标签：database, memory, blackberry, ram

我的应用在应用启动时从服务器读取提要。然后它将所有数据插入 SQLite DB，并且仅在运行应用程序的实例期间读取数据，数据是最新的。

不幸的是，SQLite 不能在没有 SDCard 的黑莓设备上运行，而且并非所有设备都有设备存储选项。

有没有办法在 RAM 中的应用程序加载期间创建数据库，然后在卸载时关闭？我看过像 H2 这样在 Java 中执行此操作的 DB，但是如何让类似的东西在 BB 设备上工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:45:01.757

那么你的应用程序有多大？在应用程序运行时，您真的需要一个数据库或几个表来保存数据吗？你不能只实现一个小型迷你超级简单的数据库吗？

# algorithm - 在 O(n) 时间从二叉搜索树中删除多个节点

> ID：10501466
> 
> 赞同：1
> 
> 时间：2012-05-08T15:16:05.920
> 
> 标签：algorithm, binary-search-tree

考虑一个二叉搜索树，其中所有键都是唯一的。节点没有父指针。
我们有多达 n/2 个标记的节点。
我可以在 O(n ² ) 时间删除所有这些（使用后序遍历，当遇到标记节点时，在 O(n) 处删除每个）。但这是不合适的。我需要一种算法来在**O(n)**时间删除所有标记的节点。谢谢。

**编辑**删除后，我需要保持节点顺序不变。
**EDIT-2**所以看起来我已经使用典型的删除删除了每个标记的节点（在左子树中找到最右边的节点并将其与要删除的节点交换）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:34:01.183

有很多方法，但这里有一个应该很容易正确，并给你一个完美平衡的树作为副作用。但是，它需要线性的额外空间。

1.  创建一个大小为 N 减去标记节点数的数组（或 N，如果您不知道标记了多少并且不想检查它）。
2.  将元素按顺序放置在数组中，通过中序遍历，**跳过标记的元素**。这需要线性时间，并且堆栈空间与树的高度成正比。
3.  使用数组自上而下重建树。数组中的中间元素成为新的根，左子数组的中间元素成为新的左子元素，右子数组的中间元素成为新的右子子元素。递归地重复。这需要线性时间和对数堆栈空间。

更新：忘了说跳过标记的元素，但这很明显，对吧？;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:26:37.980

我已经找到了怎么做！

*   我们使用中序遍历。
*   我们在函数的递归调用之前检查是否需要删除节点。
*   当我们找到要删除的节点时，我们将标记 toFindMax 并在左子树中搜索最右边的节点。
*   如果我们遇到另一个要删除的节点，我们会将所有变量推送到堆栈并在节点被删除时弹出它们。
*   当我们在左子树中找到最大值时，我们保存对它和它的父节点的引用。
    然后，当我们递归返回要删除的初始节点时，我们将其删除（与最大值交换）。

```
static class LinearDeletion {

    public static Node MIN_VALUE = new Node(Integer.MIN_VALUE);;
    boolean toFindMax = false;
    Node parentOfMax = null;
    Node max = MIN_VALUE;
    Stack<Object> stack = new Stack<>();

    public void perform(Node x, Node parent) {

        if (x.isToDelete) {
            stack.push(toFindMax);
            stack.push(parentOfMax);
            stack.push(max);

            toFindMax = true;
            parentOfMax = null;
            max = MIN_VALUE;

            if (x.left != null) {
                perform(x.left, x);
            }

            if (x.left == null) { //deletion of the node
                if (parent.left == x) {
                    parent.left = x.right;
                } else {
                    parent.right = x.right;
                }
            } else {
                if (x.right == null) {
                    if (parent.left == x) {
                        parent.left = x.left;
                    } else {
                        parent.right = x.left;
                    }
                } else {
                    x.key = max.key;
                    x.isToDelete = max.isToDelete;
                    if (parentOfMax != x) {
                        parentOfMax.right = max.left;
                    } else {
                        x.left = max.left;
                    }
                }
            } // end of deletion
            max = (Node) stack.pop();
            parentOfMax = (Node) stack.pop();
            toFindMax = (boolean) stack.pop();
            if (toFindMax) { // check if the current node is the maximum
                if (x.key > max.key) {
                    max = x;
                    parentOfMax = parent;
                }
            }

            if (x.right != null) {
                perform(x.right, x);
            }

        } else {

            if (x.left != null) {
                perform(x.left, x);
            }

            if (toFindMax) {
                if (x.key > max.key) {
                    max = x;
                    parentOfMax = parent;
                }
            }

            if (x.right != null) {
                perform(x.right, x);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:22:35.687

我不明白为什么后序遍历会是 O(n ² )。之所以删除单个节点是O(n)，是因为需要遍历树才能找到节点，这是一个O(n)的操作。但是一旦你找到一个节点，它可以在 O(1) 时间内被删除。^*因此，您可以在 O(n) 时间内在一次遍历中删除所有 O(n) 标记的节点。

^*除非你需要保持平衡的树。但是，您没有将其列为要求。

**编辑**正如@njlarsson 在他的评论中正确指出的那样，即使在找到节点之后，删除操作通常也不是 O(1)。但是，由于在访问要删除的节点之前已经遍历了左右子树，因此在子树遍历期间可以免费获得子树的最小（或最大）元素。这启用了 O(1) 删除。

# python - 具有相同名称的 Python 模块（即，在包中重用标准模块名称）

> ID：10501473
> 
> 赞同：19
> 
> 时间：2012-05-08T15:16:21.537
> 
> 标签：python, module, namespaces, package

假设我有一个包含模块的包：

```
SWS/
  __init.py__
  foo.py
  bar.py
  time.py 
```

并且模块需要引用彼此中包含的功能。似乎我的`time.py`模块遇到了问题，因为有一个同名的标准模块。

例如，如果我的`foo.py`模块同时需要我`SWS.time`的和标准的 python`time` 模块，我就会遇到麻烦，因为解释器会在包内部查找并`time.py`在遇到标准模块之前找到我的`time`模块。

有没有办法解决？这是禁止的情况吗？不应该重用模块名称吗？

任何关于包装哲学的解决方案和意见在这里都会很有用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-03-04T12:14:05.597

重用标准函数/类/模块/包的名称绝不是一个好主意。尽量避免它。但是，您的情况有一些干净的解决方法。

您看到的行为是导入 your`SWS.time`而不是 stdlib `time`，这是由于`import`古代 python 版本（2.x）中的语义。要修复它，请添加：

```
from __future__ import absolute_import 
```

在文件的最顶部。这会将 的语义更改`import`为 python3.x 的语义，这更加明智。在这种情况下，声明：

```
import time 
```

只会引用顶级模块。因此，解释器在包内执行该导入时*不会*考虑您的`SWS.time`模块，但它只会使用标准库之一。

如果包中的模块*需要*导入`SWS.time`，您可以选择：

*   使用*显式*相对导入：

    ```
    from . import time 
    ```

*   使用绝对导入：

    ```
    import SWS.time as time 
    ```

所以，你`foo.py`会是这样的：

```
from __future__ import absolute_import

import time

from . import time as SWS_time 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-01T15:54:23.250

这取决于您使用的 Python 版本。如果您的目标 Python 版本是 2.4 或更早版本（2015 年，我当然希望不是），那么是的，这将是不好的做法，因为没有办法（没有黑客）来区分这两个模块。

但是，在 Python 2.5+ 中，我认为*在包命名空间*中重用标准 lib 模块名称是非常好的；其实这就是[PEP328的精神](https://www.python.org/dev/peps/pep-0328/#rationale-for-absolute-imports)。

> 随着 Python 库的扩展，越来越多的现有包内部模块突然意外地隐藏了标准库模块。这是包内部的一个特别困难的问题，因为无法指定哪个模块是指的。为了解决歧义，建议 foo 始终是可从 sys.path 访问的模块或包。这称为绝对导入。
> 
> python-dev 社区选择绝对导入作为默认值，因为它们是更常见的用例，并且因为绝对导入可以提供相对（包内）导入的所有功能——尽管在重命名包块时会以困难为代价在层次结构中向上或在将一个包移动到另一个包时。
> 
> 因为这代表了语义的变化，所以绝对导入在 Python 2.5 和 2.6 中是可选的，通过使用`from __future__ import absolute_import`

`SWS.time`显然与代码的读者不同，我希望*不仅*使用，而且以某种方式扩展它。`time``SWS.time``time`

所以，如果`SWS.foo`需要 import `SWS.time`，那么它应该使用绝对路径：

```
# in SWS.foo

# I would suggest renaming *within*
# modules that use SWS.time so that
# readers of your code aren't confused
# with which time module you're using
from SWS import time as sws_time 
```

或者，它应该使用Bakuriu 的回答中的*显式相对导入：*

```
# in SWS.foo

from . import time as sws_time 
```

如果您需要在模块中导入标准 lib`time`模块`SWS.time`，您首先需要导入未来的功能（仅适用于 Python 2.5+；Python 3+ 默认情况下会这样做）：

```
# inside of SWS.time
from __future__ import absolute_import

import time

time.sleep(28800)  # time for bed 
```

**注意：** `from __future__ import absolute_imports`只会影响导入未来功能的模块中的*导入语句，**不会*影响任何其他模块（因为如果另一个模块依赖于相对导入，那将是有害的）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T15:24:49.893

正如其他人所说，这通常是一个坏主意。

话虽如此，如果您正在寻找潜在的解决方法，或者更好地理解问题，我建议您阅读以下 SO 问题：

*   [存在同名模块时从内置库导入](https://stackoverflow.com/questions/6031584/python-importing-from-builtin-library-when-module-with-same-name-exists)

*   [当有同名的本地模块时，如何在 Python 中访问标准库模块？](https://stackoverflow.com/questions/1900189/how-to-access-a-standard-library-module-in-python-when-there-is-a-local-module-w)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:19:55.810

是的，确实没有什么好办法。尽量不要将你的模块命名为标准包。如果您真的想调用您的模块`time`，我建议您`_time.py`改用。即使有办法做到这一点，当涉及到 2 个时间模块时，它也会使您的代码难以阅读和混淆。

# android - 三星 Galaxy Tab 10.1，虚拟键盘和编辑文本

> ID：10501476
> 
> 赞同：2
> 
> 时间：2012-05-08T15:16:26.337
> 
> 标签：android, android-edittext, galaxy-tab

我自己没有拥有三星 Galaxy Tab 10.1 (P7500) 并且只在模拟器上进行测试，这让我有一个有趣的经历。

我遇到的具体问题涉及选项卡附带的虚拟键盘，以及使用“日期”输入类型的edittext。

我的模拟器和选项卡之间的区别在于模拟器不包含选项卡附带的虚拟键盘，这与常规的 Android 键盘不同。该问题与在选项卡上输入实际日期有关，因为日期的格式为“XXXX-YY-ZZ”，但无法在选项卡上键入破折号“-”。除数字外的所有键均被禁用。然而，这不会在模拟器上发生，我可以愉快地输入包含破折号和斜杠的日期（尽管破折号是我在验证输入时允许的唯一额外字符）。

这对于未来的测试来说有点问题，我想出了一些替代方案

*   从选项卡中获取虚拟键盘并查看模拟器是否具有相同的行为，以便我可以以更可控的方式测试这个和未来的场景
*   停止使用“日期”作为字段的输入类型，同时使用 toast 和验证来确保格式正确
*   买一个标签
*   使用日期选择器

有没有其他人偶然发现了这种问题并找到了解决方案，使用 EditText 和“日期”作为 Galaxy Tab 的输入类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:25:47.160

这最终导致停止使用“日期”作为输入类型。相反，我利用了组合

```
android:inputType="number|textPassword"
android:digits="0123456789-" 
```

这对于在模拟器上进行测试和在实际选项卡上发布都可以接受。

# ruby-on-rails - Rails 3.1 路由——收集不起作用

> ID：10501477
> 
> 赞同：1
> 
> 时间：2012-05-08T15:16:28.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我最近升级到 Rails 3.1（从 3.0），由于某种原因，我的一条路线不再有效。我有一个发布 csv 文件的表单，并由项目控制器处理。路线如下：

```
 resources :items do 
    member do
      post 'receive'
      post 'show'
    end

    collection do
      post 'csv_import'
      get 'transactions'
      get 'template'
    end
  end 
```

这就是我在日志中看到的——看起来它正在发布正确的操作。

```
Started POST "/items/csv_import" for 127.0.0.1 at Tue May 08 11:09:52 -0400 2012
  Processing by ItemsController#show as HTML 
```

但它正在由 show 动作处理：

```
ActiveRecord::RecordNotFound in ItemsController#show

Couldn't find Item with id=csv_import 
```

我一辈子都看不到我在这里做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:51:26.683

您的`post 'show'`线路干扰了这一点，因为当您发布到 时`/items/csv_import`，rails 认为您的意思是`items/csv_import/show`，并且`csv_import`是您要导入的项目的 id。如果你运行`rake routes`，你会看到这样的部分：

```
 item POST   /items/:id(.:format)        items#show
csv_import_items POST   /items/csv_import(.:format) items#csv_import 
```

第一项与您的帖子相匹配`/items/csv_import`，它甚至从未命中第二项。

您可以将`member do ... end`块移动到块之后`collection do ... end`，它应该可以正常工作。

但是，我只是建议摆脱`post 'show'`该方法并将其重命名为更好的方法，因为它无论如何都违反了标准的 rails/rest 约定。

# java - 为什么我会收到此 SQLException 错误，指出找不到合适的驱动程序？

> ID：10501480
> 
> 赞同：1
> 
> 时间：2012-05-08T15:16:35.607
> 
> 标签：java, mysql, jdbc, sqlexception

我在 Mac 上，运行 MySQL 的 MAMP 实例。我正在尝试使用 jdbc 驱动程序将我的 java 代码连接到名为“test”的数据库，并使用名为“customer”的表。我不断收到错误消息：

```
java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:8889/test 
```

我不确定问题是否出在我的代码上，或者是否是 MySQL 的 MAMP 实例的配置问题，或者完全是其他问题。

我有一个初始化驱动程序方法：

```
public void initializeDriver(){
     try{
      Class.forName("com.mysql.jdbc.Driver");
      }
     catch(ClassNotFoundException e) {
        System.err.println(e.toString());
     }

 } 
```

我通过以下方式创建了一个连接：

```
public void insertCustomer(String connectionUrl, String connectionUser, String connectionPassword, Customer customer) {

         try{
            Connection conn = DriverManager.getConnection(connectionUrl, connectionUser, connectionPassword);
            Statement constat = conn.createStatement();
            String query = "INSERT INTO customers (customer_id, email, deliverable, create_date) VALUES (" + customer.id + ", " + customer.emailAddress + ", " + customer.deliverable + ", " + customer.createDate + ")" ;
            constat.executeQuery(query);
            conn.close();

         }
         catch(SQLException e){
             System.out.println(e.toString());
         }

     } 
```

我已经下载了 mysql-connector-java-5.1.20 并将其设置在我的类路径中。

如果有人对我如何纠正此错误有任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:32:46.083

您必须将[MySQL jdbc 连接器](http://dev.mysql.com/downloads/connector/j/)jar 库放入类路径中。

然后在打开连接之前使用如下代码初始化驱动程序：

```
Class.forName("com.mysql.jdbc.Driver").newInstance(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:25:36.497

您在这一行也有错误

```
 constat.executeQuery(query); 
```

如果要在数据库中插入一些数据，则必须使用此代码

```
constat.executeUpdate(query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:43:05.253

尝试将*mysql-connector-java-5.1.20.jar 添加*到 Glassfish（或 Tomcat）*lib*文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:18:23.760

您将需要类路径中的相应 mysql JDBC 驱动程序 jar 或可由容器加载。请参阅[ConnectorJ 的文档](http://dev.mysql.com/doc/refman/5.1/en/connector-j.html)并注意安装说明。

# jquery - 从 iframe 禁用/启用后，jQuery UI 按钮不起作用

> ID：10501481
> 
> 赞同：0
> 
> 时间：2012-05-08T15:16:36.360
> 
> 标签：jquery, jquery-ui, button

我有一些jQuery代码，见下文：

```
$(function(){
    $('button#submit').button({disabled:true});
    $('button#submit').click(function(){
        console.log('It works!');
    });
    $('a#button-enable').click(function(){
        $('button#submit').button({disabled:false});
    });
}); 
```

如果未单击带有 id 的链接`button-enable`，则必须禁用该按钮。之后必须启用该按钮，如果我单击它，则必须在控制台中输出文本`It works!`。为什么没有发生？

当我从 iframe 启用按钮时会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:46:09.463

谢谢大家的答案。我通过以下方式解决了这个问题：

**父.html**

```
$(function{
    $('button, input[type="submit"]').button();
    $('button#submit').button('disable');
    $(document).bind('enableButton',function(){
        $('button#submit').button('enable');
    });
    $('button#submit').click(function(){
        //...
    });
}); 
```

**iframe.html**

```
$(function(){
    //...
    parent.$(parent.document).trigger('enableButton');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:22:51.330

尝试

```
$(function(){
    $('button#submit').button("option", "disabled", true );
    $('a#button-enable').click(function(){
        $('button#submit').button("option", "disabled", false);
        $('button#submit').click(function(){
            alert('It works!');
        });
    });
}); 
```

这是来自[http://jqueryui.com/demos/button/#option-disabled](http://jqueryui.com/demos/button/#option-disabled)

这是一个jsfiddle：http: [//jsfiddle.net/tmx8t/](http://jsfiddle.net/tmx8t/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:54:30.957

我已经清理了你的代码，并让它像你描述的那样工作。

```
$(function() {
    var button = $('#submit').button({
        disabled: true
    }).click(function() {
        alert('It Works');
    });
    $('#button-enable').click(function() {
        button.button('enable');
    });
});​ 
```

[在这里](http://jsfiddle.net/zero21xxx/RKprq/)查看小提琴

# powershell - Powershell：在目标系统上安装模块

> ID：10501484
> 
> 赞同：2
> 
> 时间：2012-05-08T15:16:42.923
> 
> 标签：powershell, powershell-2.0

当我这样做时 -

```
PS C:\> $env:psmodulePath.split(";") 
```

我得到两个文件夹 - 即**User Module Folder 和 System Module Folder**。

```
User Module Folder
C:\Users\winUser1\Documents\WindowsPowerShell\Modules

System Module Folder
C:\Windows\system32\WindowsPowerShell\v1.0\Modules\ 
```

现在，当我在系统模块文件夹下复制我的 psm1 文件并尝试从 ISE x86 执行 import-module 时，脚本**没有被加载**，但反之亦然 - 即从用户模块文件夹工作。

但是，在生产环境中，我希望任何用户都能够执行脚本。知道如何达到同样的效果吗？

**注意：我使用的是 Windows 2008 R2 和 Windows 7 - 所有 64 位版本，但脚本应作为 32 位版本运行**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:29:56.053

尝试将它们复制到 SysWOW64 文件夹下。SysWOW64 文件夹包含 32 位系统文件，System32 包含 64 位系统文件

C:\windows\SysWOW64\WindowsPowerShell\v1.0\Modules

# c# - DetailText LineBreakMode 不工作

> ID：10501487
> 
> 赞同：2
> 
> 时间：2012-05-08T15:17:05.077
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我有自己的从 StyledMultilineElement 派生的自定义元素：

```
public class SubmenuElement : StyledMultilineElement
{

    public static UITableViewCellStyle DefaultCellStyle { get; set; }

    public static UITableViewCellAccessory DefaultCellAccessory { get; set; }
    public static UILineBreakMode DefaultDetailTextLineBreakMode { get; set; }

    public UILineBreakMode DetailTextLineBreakMode { get; set; }
    public int? DetailLines { get; set; }
    public bool? DetailTextResizesFontToFitWidth { get; set; }

    static SubmenuElement()
    {
        // Set the defaults
        DefaultCellStyle = UITableViewCellStyle.Default;
        DefaultCellAccessory = UITableViewCellAccessory.DisclosureIndicator;
        DefaultDetailTextLineBreakMode = UILineBreakMode.TailTruncation;
    }

    ...

    public override UITableViewCell GetCell (UITableView tv)
    {
        var cell = base.GetCell (tv);
        if (cell.DetailTextLabel != null && !string.IsNullOrWhiteSpace(cell.DetailTextLabel.Text))
        {
            if (DetailLines.HasValue)
                cell.DetailTextLabel.Lines = DetailLines.Value;
            cell.DetailTextLabel.LineBreakMode = DetailTextLineBreakMode;
            if (DetailTextResizesFontToFitWidth.HasValue)
                cell.DetailTextLabel.AdjustsFontSizeToFitWidth = DetailTextResizesFontToFitWidth.Value;
        }
        return cell;
    }

} 
```

似乎为 DetailText 设置 LineBreakMode 没有效果。

```
public class PeopleView
{

    ....

    void CreateUI()
    {
        var root = new RootElement(Header)
        {
            GroupAndSortResults(people, CurrentState.PeopleDirectoryOptions.GroupAndSort)
                .Select (g => new Section(g.Key)
                {
                    g.Select<PeopleListItem, SubmenuElement> (p => new SubmenuElement(
                        GetName (p),
                        p.TypeGradeSchool, 
                        () => GoToPersonProfile(p.ID),
                        null,
                        UITableViewCellAccessory.None,
                        UITableViewCellStyle.Subtitle
                    )
                {
                    ImageUri = PersonAvatarImage.GetAvatar (p.ID),
                    OnImageLoaded = WhenImageLoaded,
                    DetailTextLineBreakMode = UILineBreakMode.MiddleTruncation,
                    DetailTextResizesFontToFitWidth = true,
                    DetailLines = 0
                }).ToArray ()
                }).ToArray()
        };
        this.Root = root;
        this.NavigationItem.RightBarButtonItems = new UIBarButtonItem[] 
        {
            new UIBarButtonItem(UIBarButtonSystemItem.Organize, new EventHandler(WhenOrganizerTapped)),
            new UIBarButtonItem(UIBarButtonSystemItem.Refresh, new EventHandler(WhenRefreshTapped))
        };
    }

} 
```

关于为什么截断细节行不起作用的任何想法？其他一切正常。我的默认设置是尾部截断，但对于这个特定的视图，我想要中间截断。没有截断样式有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:22:32.130

我很快就想通了...当 DetailLines 属性设置为 1 时，它将被截断。`AdjustsFontSizeToFitWidth`除非将行号设置为 1，否则使用截断或调整文本大小不起作用。

如果在 SO 上有与此问题类似的问题，我将删除此问题，除非它被赞成（它可以帮助其他人）。

# css - CSS 3 形状：“反圆”或“切出圆”

> ID：10501488
> 
> 赞同：44
> 
> 时间：2012-05-08T15:17:05.950
> 
> 标签：css, css-shapes

我想创建一个形状，我将其描述为“反圆”：

![CSS 形状](../Images/79982de1c1d542f384e720bf767c00dd.png)

图像在某种程度上不准确，因为黑线应该沿着 div 元素的外边界继续。

这是我目前拥有的演示：http: [//jsfiddle.net/n9fTF/](http://jsfiddle.net/n9fTF/)

即使`CSS`没有图像，这也可能吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-08T17:04:50.547

## 更新：CSS3 径向背景渐变选项

（对于那些支持它的浏览器——在 FF 和 Chrome 中测试——IE10，Safari 也应该可以工作）。

我最初的答案的一个“问题”是那些没有坚实背景的情况。此更新创建了相同的效果，允许圆之间的透明“间隙”和它的反向切口。

## [请参阅示例小提琴](http://jsfiddle.net/PG4pM/74/)。

**CSS**

```
.inversePair {
    border: 1px solid black;
    display: inline-block;    
    position: relative;    
    height: 100px;
    text-align: center;
    line-height: 100px;
    vertical-align: middle;
}

#a {
    width: 100px;
    border-radius: 50px;
    background: grey;
    z-index: 1;
}

#b {
    width: 200px;
    /* need to play with margin/padding adjustment
       based on your desired "gap" */
    padding-left: 30px;
    margin-left: -30px;
    /* real borders */
    border-left: none;
    -webkit-border-top-right-radius: 20px;
    -webkit-border-bottom-right-radius: 20px;
    -moz-border-radius-topright: 20px;
    -moz-border-radius-bottomright: 20px;
    border-top-right-radius: 20px;
    border-bottom-right-radius: 20px;
    /* the inverse circle "cut" */
    background-image: -moz-radial-gradient(
        -23px 50%, /* the -23px left position varies by your "gap" */
        circle closest-corner, /* keep radius to half height */
        transparent 0, /* transparent at center */
        transparent 55px, /*transparent at edge of gap */
        black 56px, /* start circle "border" */
        grey 57px /* end circle border and begin color of rest of background */
    );
    background-image: -webkit-radial-gradient(-23px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 55px, black 56px, grey 57px);
    background-image: -ms-radial-gradient(-23px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 55px, black 56px, grey 57px);
    background-image: -o-radial-gradient(-23px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 55px, black 56px, grey 57px);
    background-image: radial-gradient(-23px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 55px, black 56px, grey 57px);
} 
```

## 原始答案

花费比我预期的更多的努力来使 z-indexing 工作（[这似乎忽略了负 z-index](http://jsfiddle.net/PG4pM/31/)），但是，[**这看起来很干净**](http://jsfiddle.net/PG4pM/32/)（在 IE9、FF、Chrome 中测试）：

**HTML**

```
<div id="a" class="inversePair">A</div>
<div id="b" class="inversePair">B</div> 
```

**CSS**

```
.inversePair {
    border: 1px solid black;
    background: grey;
    display: inline-block;    
    position: relative;    
    height: 100px;
    text-align: center;
    line-height: 100px;
    vertical-align: middle;
}

#a {
    width: 100px;
    border-radius: 50px;
}

#a:before {
    content:' ';
    left: -6px;
    top: -6px;
    position: absolute;
    z-index: -1;
    width: 112px; /* 5px gap */
    height: 112px;
    border-radius: 56px;
    background-color: white;
} 

#b {
    width: 200px;
    z-index: -2;
    padding-left: 50px;
    margin-left: -55px;
    overflow: hidden;
    -webkit-border-top-right-radius: 20px;
    -webkit-border-bottom-right-radius: 20px;
    -moz-border-radius-topright: 20px;
    -moz-border-radius-bottomright: 20px;
    border-top-right-radius: 20px;
    border-bottom-right-radius: 20px;
}

#b:before {
    content:' ';
    left: -58px;
    top: -7px;
    position: absolute;
    width: 114px; /* 5px gap, 1px border */
    height: 114px;
    border-radius: 57px;
    background-color: black;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-14T11:14:51.880

## 不同的方法：Box-shadows

此方法使用IE9+ ( [canIuse](http://caniuse.com/css-boxshadow) )**支持的CSS 框阴影**

**[演示](http://jsfiddle.net/webtiki/9A46r/)**

输出 ：

![使用 box-shadows 的带有插入曲线的 CSS 形状](../Images/11949a4f164192d9a83797388a08e07b.png)

*HTML：*

```
<div id="a">
    <div id="b"></div>
</div> 
```

*CSS：*

```
#a{
    overflow:hidden;
    border-radius:20px;
    position:relative;
    display:inline-block;
}
#a:before, #a:after{
    content:'';
    width: 100px;
    border-radius: 50%;
}
#a:before {
    height: 100px;
    float:left;    
    border: 1px solid black;
    background: grey;
}
#a:after {
    position:absolute;
    left:14px; top:-6px;
    height:114px;
    box-shadow: 1px 0px 0px 0px #000, 110px 0px 0px 68px #808080;
    background:none;
    z-index:-1;
}
#b {
    width: 200px;
    height: 100px;
    background:none;
    margin-left:-15px;
    border: 1px solid black;
    border-left:none;
    float:left;
    border-top-right-radius: 20px;
    border-bottom-right-radius: 20px;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-08T15:27:38.997

我不能从你的画中看出你想要的点有多圆，但这是一种可能性：http: [//jsfiddle.net/n9fTF/6/](http://jsfiddle.net/n9fTF/6/)

如果这些点需要更圆，你需要在末端放一些圆圈，以便它们与大勺融合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T12:32:15.347

这是一个非常有趣的问题。我最近发布了一篇关于如何[在 CSS 中制作反向边框半径的教程（这里）](http://jonmifsud.com/blog/inverse-border-radius-in-css/)，我认为这可以很容易地适应你的情况。

诀窍是使用一个非常简单的概念创建一个生成反向边界的跨度 - 非常厚的边界。并通过隐藏它们来使用内部部分。除了我提供的脚本之外，您还需要在左上角添加另一个边框半径，因为我只使用右上角的。通过绝对定位使跨度与您想要的项目的左侧对齐，并相应地增加跨度的高度/宽度，瞧，您就有了[反向边界半径](http://jonmifsud.com/blog/inverse-border-radius-in-css/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T15:20:25.060

别人在我发现的地方做了它......

JSFiddle：http: [//jsfiddle.net/ajeN7/](http://jsfiddle.net/ajeN7/)

和问题：[CSS3倒圆角](https://stackoverflow.com/questions/2936262/css3-inverted-rounded-corner)

希望这会有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T15:27:43.980

引入一个绝对定位的无边界白色圆圈，它位于灰色圆圈后面的偏移处。您需要设置黑圈的 z-index 以确保它位于白圈上方：

```
#c {
    position: absolute;
    border: 0;
    left: 30px;
    width: 100px;
    height: 100px;
    border-radius: 50px;
    background: white;
} 
```

[**演示。**](http://jsfiddle.net/n9fTF/7/) ​</p>

# java - GUI 中的像素开/关（或黑/白）

> ID：10501493
> 
> 赞同：1
> 
> 时间：2012-05-08T15:17:11.240
> 
> 标签：java, grid, coordinates, switch-statement, pixel

我想知道是否有人可以帮助我了解如何打开/关闭像素或黑色/白色。更具体地说，我非常擅长 TI-Basic 编程语言，并且这种语言的一个方面涉及打开和关闭计算器像素。我想制作一个大约 100x100 的表格，并被分成一个网格。所以我可以根据网格打开/关闭表单中的像素。我已经看到了一些代码，但我的代码通常根据屏幕而不是表单来改变像素。（这方面的一个例子是 1,1 改变屏幕的顶部像素，因此必须将表单拖到那里以与像素对应）。如果有人能指出我如何实现这一目标的正确方向。我会很感激！

- 非常感谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:05:14.890

在 Swing 或 AWT（Java 标准版附带的框架）中，您可以执行以下操作

```
 g.setColor( Color.BLACK ) ;
   g.fillRect( x, y, 1, 1 ) ; 
```

其中 g 是您要绘制的组件的 Graphics 对象。通常 g 是paint（对于AWT）或paintComponent（对于Swing）的参数。对于白色像素，请使用 Color.WHITE。

# gwt - 带有登录名的 GWT 地点

> ID：10501498
> 
> 赞同：2
> 
> 时间：2012-05-08T15:17:40.290
> 
> 标签：gwt

我们需要使用 GWT 位置来启用通过电子邮件发送指向我们创建的应用程序中记录的链接。我们的应用程序需要登录凭据，因此我们需要处理两种情况。

1) 您收到记录的链接并且您已经登录到应用程序，在这种情况下，单击该链接应直接将您带到记录

2）您收到一个记录的链接，但您*尚未*登录应用程序，在这种情况下，单击该链接应首先将您带到登录屏幕，然后在登录后直接将您带到记录

有没有其他人做过这样的事情？

最好的，迈特里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:07:31.387

我的建议是结合 HTML5 History API (`pushState`和`onpopstate`) 以保持该位置沿重定向，使用[此技术](https://gist.github.com/1883821)将其与 集成`PlaceHistoryHandler`，并将您的容器安全性重定向到登录屏幕（我只是`security-constraint`在我`web.xml`的

这样，当您在应用程序中导航时，您就有一个指向不使用 URL*哈希部分的位置的**永久链接*（它不会发送到服务器，因此当服务器重定向到登录页面时会丢失）。 当您有这样的*永久链接*并且没有登录时，servlet 容器会将您重定向到登录页面，然后在登录后返回到 URL。并且由于该 URL 没有使用*哈希*部分来编码该位置，所以那个已发送到服务器，因此不会在重定向之间丢失。

 ***如果您需要支持不支持 HTML5 History API 的浏览器，那么您可以在应用程序中使用为您提供永久链接的按钮作为后备。然后，您必须从该*永久链接*重定向到使用*哈希*部分对位置进行编码的位置，即可以由`DefaultHistorian`.
这是新的 Google Groups（在 GWT 中制作）正在使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T23:11:23.100

我假设您希望允许用户从浏览器的地址栏中复制 URL，并通过电子邮件发送。链接可能看起来像

> www.example.org/index.html#sometoken

这样的链接将收件人带到您的 GWT 应用程序，然后由该应用程序决定做什么。我认为，提供完整的 GWT 应用程序*通常*不是问题，即使用户根本没有被授权（GWT 可以编译为混淆的 JavaScript）^([*])。应用程序本身通常不包含秘密数据——这些数据是通过 AJAX 加载的。

通过 AJAX 调用，服务器可以检测到用户未登录 - 并返回适当的异常。客户端收到 Exception 后，可以转发到登录页面（`Window.Location.replace(...)`），只需将 token 重新编码为 GET 参数即可

> www.example.org/login.html?historytoken=sometoken

成功登录后，服务器会再次重定向到“/index.html#sometoken” ( `resp.sendRedirect(...)`)。它可以很容易地构造 URL 片段，因为它可以读取 get 参数“historytoken”。

^([*] 如果你必须保护甚至混淆的代码不被窥探，你可以将“index.html”映射到一个 Servlet，它发送一些简短的 JavaScript 应用程序（其唯一的工作是转发到登录页面），而不是完整的GWT 应用程序，如果用户未登录。)

### 替代解决方案

另一种解决方案（只要您的整个应用程序通过 HTTPS 提供服务）可能是将登录作为对话框集成到应用程序中，而无需任何重定向。但这种方法并不总是可行的（而且并不总是好的）。***

# css - 空 div 的高度为 100%

> ID：10501502
> 
> 赞同：0
> 
> 时间：2012-05-08T15:17:48.150
> 
> 标签：css, html

是的，我已经看到了几十个关于 100% div 的问题。但我仍然无法实现它。因为我在右侧 div 上使用了负边距。

测试版在这里：[http ://bazarak.af/t.php](http://bazarak.af/t.php)

如果我从螺旋类中删除高度键，则不会出现金属螺旋。请有人帮助我。我只希望螺旋出现在内容旁边。

我可以使用 javascript，但不是每个人都启用了 javascript。

由于我要在问题解决后删除测试页面，所以这里是其他人的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<title>TEST</title>

<style type="text/css">
.wrapper{
margin: 0px auto; 
background-color: white;
border: 1px solid #CCC;
width: 1030px;
}

body{
background-color: #f3f0e6;
height: 100%;
margin-top: 30px;
}

.content{
float: left;
width: 960px;
padding: 15px;
}

.spiral { 
float: right;
margin-right: -32px;

width:63px; 
height: 500px;

background-image:url(images/home/spiral.jpeg);
background-repeat:repeat-y;
background-position:top left;
}

.clear{clear: both;}
</style>

</head>
<body>

    <div class="wrapper">
        <div class="spiral"></div><!-- END SPIRAL -->
        <div class="content">

        [HEADER]</br></br></br>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</br></br></br>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</br></br></br>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</br></br></br></br>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</br></br></br></br>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</br></br></br></br> [FOOTER]

        </div><!-- END CONTENT -->
        <div class="clear"/>
    </div><!-- END WRAPPER -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:28:05.010

您正在寻找`display: table-cell;`. 看到这个小提琴：http: [//jsfiddle.net/RZBAg/](http://jsfiddle.net/RZBAg/)

（HTML 标记发生了一些变化，因为螺旋线位于内容*之后*。我还添加了一个红色背景来说明螺旋线 div 的大小。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:01:17.357

这是基于我的评论的答案。

jsfiddle.net/kxwgJ/1

我只是从螺旋容器中取出“浮子”并将其完全定位。由于螺旋只是一种设计，并且相对于其父级定位，因此绝对定位似乎更有意义，您可以避免浮动的一些问题。

# java - Java 字段隐藏

> ID：10501503
> 
> 赞同：4
> 
> 时间：2012-05-08T15:17:54.260
> 
> 标签：java, field, instance-variables, static-variables, member-hiding

我想知道说一个字段隐藏在 2 个 java 类之间是什么意思，以及在运行代码时根据结果输出意味着什么？

我有一个带有 a`protected static boolean field = false`和一个子类的抽象类，该类具有一个具有相同名称但不是静态的布尔字段并设置为`true`.

如果我有这个代码：

```
Superclass d = new subclass(); 
```

超类中的布尔字段和子类中的布尔字段的值是多少？子类字段`false`在上面的分配之后是否保持不变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T15:26:39.317

*   ### *Java 语言规范*

    > 如果该类声明了一个具有特定名称的字段，则该字段的声明被称为*隐藏*了超类和该类的超接口中具有相同名称的任何和所有可访问的字段声明。
    > 
    > 如果隐藏字段是 ，则可以通过使用限定名称`static`或使用包含关键字`super`或转换为超类类型的字段访问表达式来访问隐藏字段。

    ^([在http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html)中查看更多信息)

*   ### 示例代码

    ```
    class A {
        static int field;
    }
    class B extends A {
        int field;
        void doSomething() {
            System.out.println(super.field); // From A
            System.out.println(field); // From B
        }
    }
    class Main {
        public static void main(String[] args) {
            B b = new B();
            System.out.println(b.field); // From B
            System.out.println(((A) b).field); // From A
            System.out.println(A.field); // From A
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T15:22:00.020

`static`成员永远不会被覆盖（当然也不会被非静态成员覆盖）。而且由于您应该像这样访问它们：`ClassName.member`也无需担心隐藏它们。

在您的情况下，您可以像这样访问该`Superclass`字段：`Superclass.field`. `Subclass`和这样的实例的字段： `subclass.field`. 但是，如果您在上面的变量中有一个`Subclass`实例，则此代码：将访问中定义的静态字段，这将是您的情况。`Superclass``d.field``Superclass``false`

但这不会改变`Subclass`实例的值，它只是访问了“错误”的成员！您可以通过将实例`d`放回变量并再次`Subclass`读取来验证这一点。`field`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:32:14.960

> 超类中的布尔字段和子类中的布尔字段的值是多少？

超类中变量的值`field`将保持为假，`field`子类中的值将保持为真。

> 在上述分配之后，子类字段是否保持为 FALSE？

不可以。您不能在 Java 中覆盖静态变量。本质上发生的是子类中的定义隐藏了超类中声明的变量。

有关一个很好的示例和解释，请参阅[SO Question](https://stackoverflow.com/questions/685300/is-there-a-way-to-override-class-variables-in-java)

我还建议您自己尝试一下，看看会发生什么。

# mysql - 在 Visual Studio 2010 上选择 MYSQL 而不是 SQL Server 有什么缺点吗？

> ID：10501505
> 
> 赞同：-1
> 
> 时间：2012-05-08T15:17:58.607
> 
> 标签：mysql, sql-server, visual-studio

我是 Visual Studio 的新手，我想用它开发一个数据库应用程序，我更喜欢使用`MYSQL`我非常熟悉的数据库。我想知道它是否有任何缺点，以及我是否可以成功地将应用程序和`MYSQL`数据库一起部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:21:58.577

我假设您将使用 .net 部署您的应用程序。
好吧，我看不出 .net + mysql 有什么问题

# excel - 如何计算和绘制时间序列残差？（R 或 msexcel）

> ID：10501506
> 
> 赞同：0
> 
> 时间：2012-05-08T15:18:04.827
> 
> 标签：excel, r, time-series

我正在处理年度时间序列。主要目的是观察一段时间内的趋势。我绘制“散点图”，然后添加趋势线（使用 MsExcell）以获得趋势线。我如何计算和绘制残差？提前致谢。

```
1982    1983    1984    1985    1986    1987    1988    1989    1990    1991    1992    1993

27.75   28.74   28.13   28.07   28.68   28.83   28.93   28.59   28.18   28.65   28.54   28.79
27.84   28.71   28.34   28.08   28.66   28.91   28.90   28.63   28.21   28.63   28.58   28.89
29.81   29.32   29.64   29.51   29.25   29.67   29.90   29.10   29.79   29.73   29.92   30.23
28.24   29.34   28.03   28.66   28.95   29.48   29.40   28.91   29.09   28.59   28.86   28.90 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:10:52.223

有很多方法可以做到这一点。

一，使用 Excel 2007，是

1.  转置您的数据，使系列在列中
2.  使用“数据分析/回归”
3.  将温度系列之一放在“Y范围”中
4.  将年份系列放在“X范围”中
5.  选择一个合理的“输出选项”
6.  确保选中“残差”和“残差图”复选框
7.  选择“确定”

# perl - perl 代码块

> ID：10501507
> 
> 赞同：7
> 
> 时间：2012-05-08T15:18:07.340
> 
> 标签：perl

我对 perl 中的代码块有疑问。给定以下代码：

```
 my @newArr = sort { $a <=> $b } @oldArr; 
```

使用代码块作为参数。

我可以将其重写为：

```
 sub sortFunc {
        return $a <=> $b;
    }
    my @newArr = sort sortFunc @oldArr; 
```

我试图弄清楚这种机制是如何工作的。目前我需要实现一种复杂的排序函数，它在代码块中看起来很乱，但是它取决于一些局部变量。例如：

```
 foreach my $val (@values){
       my @newArr = sort { $hash{$a}{$val}<=> $hash{$b}{$val} } @oldArr;
       ...
   } 
```

但是让我们假设 sort 函数更复杂，所以它不会完全适合上面的代码。

如果我尝试使用函数（在 for 循环范围内本地定义），我会不断收到“在哈希元素中使用未初始化的值”。

我认为这是因为 sub 被解析一次，而不是为 for 循环的每次迭代重新创建。我试图了解如何实现一个每次迭代都会重新解释的代码块，或者如何传递参数

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T15:57:00.393

由于某种原因，您没有显示有问题的代码，但我认为它类似于

```
for my $val (@values) {
   sub sort_func {
      return $hash{$a}{$val} <=> $hash{$b}{$val};
   }

   my @newArr = sort sort_func @oldArr;
} 
```

> *我试图弄清楚这种机制是如何工作的。[...] 我认为这是因为 sub 被解析一次，而不是为 for 循环的每次迭代重新创建。*

不完全的。以下仅解析和编译子一次，但它可以工作：

```
for my $val (@values) {
   my $cmp_func = sub {
      return $hash{$a}{$val} <=> $hash{$b}{$val};
   };

   my @newArr = sort $cmp_func @oldArr;
} 
```

重要的是什么时候`$val`被捕获。被评估`$val`时被捕获。`sub { ... }`请记住，

```
sub foo { ... } 
```

在这方面与以下相同，

```
BEGIN { *foo = sub { ... }; } 
```

`$val`在我的代码中，它从 foreach 循环中捕获。在您的中，它在编译时捕获，因此它捕获`$val`在编译时存在的内容。这不是你想要的变量。

既然您知道如何使其工作，您就可以根据需要将复杂的代码移开（退出循环）。

```
sub make_cmp_func {
   my ($hash, $val) = @_;
   return sub {
      return $hash->{$a}{$val} <=> $hash{$b}{$val};
   };
}

for my $val (@values) {
   my $cmp_func = make_cmp_func(\%hash, $val);
   my @newArr = sort $cmp_func @oldArr;
} 
```

或者，您可以将必要的值传递给比较函数，而不是捕获它们。

```
sub cmp_func {
   my ($hash, $val, $a, $b) = @_;
   return $hash->{$a}{$val} <=> $hash{$b}{$val};
}

for my $val (@values) {
   my @newArr = sort { cmp_func(\%hash, $val, $a, $b) } @oldArr;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T15:29:29.850

您想使用除`$a`和之外还接受参数的函数`$b`。

```
sub my_sort_func {
    my ($val, $a, $b) = @_;
    return $hash{$a}{$val} <=> $hash{$b}{$val};
}

foreach my $val (@values) {
    my @newArr = sort { my_sort_func($val,$a,$b) } @oldArr;
    ...
} 
```

Perl 使用代码块的机制`sort`有些特殊，在纯 Perl 中不容易复制。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T15:38:35.893

扩展暴民的答案，这是“聪明但不一定聪明”的品种之一。如果你反对额外的参数，你可以使用柯里化来代替。

```
sub make_sorter {
    my ($hashref, $val) = @_;
    return sub {
          $hashref->{$a}{$val} <=> $hashref->{$b}{$val}
    };
}

for my $val (@values) {
    my $sorter = make_sorter(\%hash, $val);
    my @newArr = sort $sorter @oldArr;
} 
```

无论如何，这并没有更有效、更易读或更有价值，但了解该技术在实际有用的地方可能会很有趣。

# extjs - 带有单选按钮 extjs 的自定义网格

> ID：10501514
> 
> 赞同：1
> 
> 时间：2012-05-08T15:18:28.337
> 
> 标签：extjs, extjs4, extjs-mvc

我想要一个自定义网格，它在列的开头包含一个收音机。只能选择网格中的一行（也可以通过选择收音机）。

我用下面的方法来实现上面所说的，

```
renderer:functiom(val){
return Ext.String.format("<input type='radio' name='rowSel' value={0} />",val);
} 
```

与 Extjs 收音机不同，这是一个 html 收音机，缺乏丰富性，同样我无法显示验证错误消息。

是否有可能使用 extjs radio 实现上述目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:46:29.097

[如果您曾在此处](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/grid/grid-plugins.html)的 sencha 文档中看到网格示例，您会发现它用于`Ext.selection.CheckBoxModel`添加新的复选框列作为第一个网格列（用于多选网格）。

因为 Sencha 没有提供`RadioModel`（也许没有必要，因为普通网格具有相同的功能），我认为您应该编写一个新的 SelectionModel 类来扩展`Ext.selection.RowModel`以满足您的需要。可以参考进去的方式`Ext.selection.CheckBoxModel`和`Ext.selection.RowModel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T02:17:07.947

我也有问题。所以我使用了`Ext.grid.RowSelectionModel`这样的单一模式。

```
{
                    margin: '10 0 0 0',
                    xtype: 'grid',
                    minHeight: 100,
                    layout: 'fit',
                    frame: true,
                    resizable: true,
                    itemId: 'previewGrid',
                    selModel: selModel = new Ext.grid.RowSelectionModel({
                        singleSelect : true
                    })
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:49:32.840

您还可以将 Ext JS 3.4 CheckboxGrid（单选）自定义为 RadioGrid。

请参考：[Ext JS 3.4 中的自定义 Radio Grid](http://non-stop-ext.blogspot.in/)

希望这会帮助你。

# database - 为 windows 和 linux 编译 64 位 sqlite

> ID：10501516
> 
> 赞同：0
> 
> 时间：2012-05-08T15:18:35.003
> 
> 标签：database, sqlite, compiler-errors

[http://sqlite.org/download.html](http://sqlite.org/download.html)没有 64 位版本的 Sqlite 可用于 linux 或 windows 。

如何为 64 位操作系统编译 sqlite 库？以及如何确保生成的代码将通过在 Sqlite 的发布版本上执行的所有测试。即 [http://www.sqlite.org/testing.html](http://www.sqlite.org/testing.html)

如何确保生成的代码中没有编译器引入的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:12:04.247

你可以在 UNIX 和 LINUX 系统上试试这个，我会测试一下它是否真的能做一个 64 位的 sqlite3

CPPFLAGS=-m64 ./configure make make install

# windows-phone-7 - 将选定项设置为列表选择器

> ID：10501520
> 
> 赞同：1
> 
> 时间：2012-05-08T15:18:47.433
> 
> 标签：windows-phone-7, selecteditem, listpicker

## XAML

```
 <DataTemplate x:Name="PickTmplItemTipo">
            <StackPanel Orientation="Horizontal">               
                <TextBlock Text="{Binding tipo}" />                
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Name="PickTmplFullTipo">            
            <StackPanel Orientation="Horizontal" Margin="0,25,0,0">
                <TextBlock Name="lblTipo" Width="350" Text="{Binding tipo}" FontFamily="{StaticResource PhoneFontFamilyLight}" TextWrapping="Wrap" FontSize="{StaticResource PhoneFontSizeExtraLarge}" />
            </StackPanel>
        </DataTemplate>

<toolkit:ListPicker    
         Grid.Row="0"
         ItemsSource="{Binding}" Margin="21,0,22,0" 
         Header="{Binding Source={StaticResource LocalizedStrings}, Path=Localizedresources.strTipoUni}" 
         FullModeHeader="{Binding Source={StaticResource LocalizedStrings}, Path=Localizedresources.strTipoUni}" 
         FullModeItemTemplate="{Binding Source={StaticResource PickTmplFullTipo}}" 
         ItemTemplate="{Binding Source={StaticResource PickTmplItemTipo}}" 
         Name="lPickTipo" 
         TabIndex="0" 
         Height="98" 
         VerticalAlignment="Top" 
         ExpansionMode="FullScreenOnly" 
         Tap="lPickTipo_Tap" 
         SelectionChanged="lPickTipo_SelectionChanged" /> 
```

## C＃

**填写列表选择器：**

```
 List<tipos> _lstTipos { get; set; }
    private void cargaLista()
    {
        using (serviciosDBDataContext miDataContext = new serviciosDBDataContext(conn))
        {
            _lstTipos = miDataContext.tipos.ToList();
        }

        this.lPickTipo.ItemsSource = _lstTipos;
    } 
```

**设置所选项目：**

如果我尝试此操作，则返回此错误“**必须始终将 SelectedItem 设置为有效值**。”

```
this.lPickTipo.SelectedItem = myStringValue; 
```

如果我尝试下一件事，则返回 null 错误：

```
this.lPickTipo.SelectedItem = lPickTipo.Items.First(x => (x as ListPickerItem).Content.ToString() == myStringValue); 
```

但我不能通过 selectindex 设置，因为我不知道哪个索引等效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:38:31.220

*   如果您有对tipo 的引用（或者如果您覆盖了tipo 的相等运算符）：

    ```
    this.lPickTipo.SelectedItem = yourTipo; 
    ```

（例如`this.lPickTipo.SelectedItem = _lstTipos[2];`：）

*   否则：

    ```
    this.lPickTipo.SelectedItem = this.lPickTipo.Items.OfType<tipos>().First(i => i.tipo == myStringValue); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:39:58.937

您的列表绑定到类型的项目，`tipos`但您试图将所选项目设置为一个字符串值，它不会找到。该`SelectedItem`属性需要绑定项之一，如果没有选择任何一项，则为 `null。

尝试将其设置为`_lstTipos`列表中的值之一，例如：

```
this.lPickTipo.SelectedItem = _listTipos.First(); 
```

PS。我没有尝试过这个 ListPicker 控件，但我相信这就是它通常与 WPF 控件一起工作的方式。

顺便说一句，看起来这是一个[骗局](https://stackoverflow.com/questions/5715549/wp7-listpicker-set-selecteditem-problem)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:41:11.293

如果您尝试使用 Linq 请求来检索索引会怎样？

*假设您的列表中没有任何重复项*

```
this.lPickTipo.SelectedItem = _lstTipos.IndexOf(_lstTipos.Single(s => s == myStringValue)); 
```

# sql - INSERT 语句中的“此处不允许列”错误

> ID：10501521
> 
> 赞同：35
> 
> 时间：2012-05-08T15:18:49.770
> 
> 标签：sql, oracle, sql-insert

我通过这样做创建了这个名为 LOCATION 的表：

```
CREATE TABLE LOCATION(
POSTCODE VARCHAR(10) PRIMARY KEY,
STREET_NAME VARCHAR(20),
CITY VARCHAR(20)); 
```

当我尝试在表格中添加一些日期时，它不起作用说有错误

```
INSERT INTO LOCATION VALUES(PQ95VM,'HAPPY_STREET','FRANCE'); 
```

错误是说

> 此处不允许列

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-08T15:21:46.073

您在第一个值周围缺少引号，应该是

```
INSERT INTO LOCATION VALUES('PQ95VM', 'HAPPY_STREET', 'FRANCE'); 
```

顺便说一句，出于可读性、可维护性和稳健性的原因，建议您在 INSERT 中明确指定列名，即

```
INSERT INTO LOCATION (POSTCODE, STREET_NAME, CITY) VALUES ('PQ95VM', 'HAPPY_STREET', 'FRANCE'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-16T15:04:23.850

有时，在执行插入查询时，我们面临：

> 此处不允许列

错误。因为字符串参数中可能缺少引号。在字符串参数中添加引号并尝试执行。

尝试这个：

```
INSERT INTO LOCATION VALUES('PQ95VM','HAPPY_STREET','FRANCE'); 
```

或者

```
INSERT INTO LOCATION (ID, FIRST_NAME, LAST_NAME) VALUES('PQ95VM','HAPPY_STREET','FRANCE'); 
```

[http://www.drtuts.com/oracle-error-column-not-allowed-here/](http://www.drtuts.com/oracle-error-column-not-allowed-here/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-16T04:44:24.557

`INSERT INTO LOCATION VALUES(PQ95VM,'HAPPY_STREET','FRANCE');`

上面提到的代码不正确，因为您的第一个参数 POSTCODE 是 type `VARCHAR(10)`。你应该用过**`' '`**.

尝试`INSERT INTO LOCATION VALUES('PQ95VM','HAPPY_STREET','FRANCE');`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-29T11:14:19.353

就像 Scaffman 说的 - 你缺少引号。始终在将值传递给**varchar2**时使用引号

```
INSERT INTO LOCATION VALUES('PQ95VM','HAPPY_STREET','FRANCE'); 
```

所以一个（**'**）开始字符串，第二个（**'**）关闭它。

但是，如果您想在字符串中添加引号符号，例如：

> 我父亲告诉我：'你必须勇敢，儿子'。

您必须使用三引号符号，例如：

> “我父亲告诉我：‘你必须勇敢，儿子’。”

*添加报价方法可能因不同的数据库引擎而异

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-28T03:09:22.723

您错过的是`" "`邮政编码，因为它是`varchar`.

有两种插入方式。

当您创建一个表`Table created.`并在创建它之后添加一行时，您可以使用以下方法。

```
INSERT INTO table_name
VALUES (value1,value2,value3,...); 
```

`1 row created.`

您添加了这么多表，或者已保存并重新打开它，您还需要提及表的列名，否则它将显示相同的错误。

```
ERROR at line 2:
ORA-00984: column not allowed here

INSERT INTO table_name (column1,column2,column3,...)
VALUES (value1,value2,value3,...); 
```

`1 row created.`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-07T18:12:54.363

我犯了使用错误引号的错误。我在值列表中使用双引号作为字符串分隔符，而不是单引号。

```
INSERT INTO MYUSERS VALUES( 'Name', "Surname");  // Wrong

INSERT INTO MYUSERS VALUES( 'Name', 'Surname'); // Correct, Surname must be in single quotes 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-29T06:52:52.007

如果我们在输入变量名时犯了一些拼写错误，就会出现这个错误。就像在存储过程中一样，我有变量名 x 并且在我正在使用的插入语句中

```
insert into tablename values(y); 
```

它将抛出此处不允许的错误列。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-13T07:30:36.897

尝试使用 varchar2 而不是 varchar 并使用它：

`INSERT INTO LOCATION VALUES('PQ95VM','HAPPY_STREET','FRANCE');`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-07T06:57:14.653

我在使用插入命令时也遇到了同样的错误。当我用单引号替换双引号时，它工作正常

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-16T16:14:50.267

```
Scanner sc = new Scanner(System.in); 
String name = sc.nextLine();
String surname = sc.nextLine();
Statement statement = connection.createStatement();
String query = "INSERT INTO STUDENT VALUES("+'"name"'+","+'"surname"'+")";
statement.executeQuery(); 
```

连接字符串 时不要错过添加'"----"' *。*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-27T12:46:24.880

在插入数据时，我们必须使用字符串分隔符 ( `' '`)。而且，您在插入值时错过了它（`' '`），这是您的错误消息的原因。代码修正如下：

```
INSERT INTO LOCATION VALUES(PQ95VM,'HAPPY_STREET','FRANCE'); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-16T11:34:34.000

如果`PQ95VM`应该是文字字符串，则使用`'PQ95VM'`. 如果它是一个变量，请确保它已被声明。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-26T14:20:37.467

### 将双引号 (" ") 转换为单引号 (' ')

**例子**

如果你有这样的事情：

```
INSERT INTO clients (id, email, country)
VALUES (1, "john@gmail.com", "USA"); 
```

将其转换为：

```
INSERT INTO clients (id, email, country)
VALUES (1, 'john@gmail.com', 'USA'); 
```

# jquery - jQuery 的 event.target 不能在函数内部工作

> ID：10501523
> 
> 赞同：0
> 
> 时间：2012-05-08T15:18:53.517
> 
> 标签：jquery

```
<a href="javascript:getClassName();" class="link">Click here</a> 
```

我知道可以使用以下代码获取类名：

```
$('a').click(function() {
    alert($(this).attr('class'));
}) 
```

我希望能够`$(this)`在`getClassName()`. `event.target`但是，这似乎不起作用。我总是得到一个错误：

> 目标未定义

我正在使用的功能是：

```
function getClassName(event) {
    el = $(event.target);
    alert(el.attr('class'));
} 
```

**而且我不想`event.target`在`$(body)`.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:20:15.263

```
<a href="javascript:getClassName(this);" class="link">Click here</a> 
```

# delphi - 如何在 Delphi 中对第三方电子邮件组件进行单元测试？

> ID：10501524
> 
> 赞同：3
> 
> 时间：2012-05-08T15:18:53.823
> 
> 标签：delphi, smtp, pop3, dunit

我正在编写一些涉及 POP3 操作的新代码。我正在尝试提出一种允许我编写测试的设计，因此它是相当解耦的，并且可以练习我正在编写的大部分新代码。

我面临的问题是我仍然需要验证我为电子邮件使用某些第三方组件的方式是否正确。例如，这涉及测试来自故障 POP3 服务器的奇怪响应。

现在，我正在使用模拟 POP3 客户端，因此我可以围绕客户端收到错误或奇怪响应的可能场景测试逻辑。但是，我仍然需要检查这些假设是否正确，并且在例如升级第三方组件之后仍然正确。

此外，还有 SMTP。我知道在 Java 世界中你有[Dumbster](http://quintanasoft.com/dumbster/)。

我在德尔福有哪些选择？[使用通常的](http://www.indyproject.org/docsite/html/TIdPOP3Server.html) [嫌疑人](http://www.indyproject.org/docsite/html/TIdSMTPServer.html)编写我自己的自定义迷你服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:18:09.100

好吧，我讨厌成为确认您怀疑的人，但是：

(a) 你将不得不构建你自己的（每个人的需求都是不同的，至少在 Delphi 中没有标准的固定装置用于这种与 Java Dumpster 等价的集成测试）并且......

(b) 我认为您不应该假设 Indy，因为 ICS 和 Synapse 很棒，使用它们的演示可能会让您想要更快……如果可以选择的话，我会选择 ICS。但如果你更了解印地，那就去吧。

(c) 我倾向于使用运行 Linux 的虚拟机，因为我发现使用在我周围的 ISP 实际使用的那种 POP3/SMTP 服务器进行测试很容易，如果我关心它，我如果我有 MSDN 许可证并且有能力这样做，我可能会为 Windows + Exchange 服务器创建一个 VM。

请记住，这不再是单元测试。这是集成测试。即使你用线程而不是进程把它全部塞进去，那也不是你有的单元测试，它是一个集成测试。

如果您希望您的所有开发人员无需设置即可进行测试，那么创建一个始终可用且在各种标准端口上具有各种配置的 QA-TEST-NETWORK BOX，那么您的集成测试可以在任何开发人员 PC 工作站上运行零设置，在你的局域网内。在您的 LAN 之外，在 WAN 环境中，这会变得更加复杂。

# jquery-mobile - 使用 Jquery Mobile 和 phonegap 为动态注入的页面添加后退按钮

> ID：10501526
> 
> 赞同：1
> 
> 时间：2012-05-08T15:18:55.687
> 
> 标签：jquery-mobile, cordova

有没有人用 Jquery Mobile 和 phonegap 成功实现了动态注入页面的后退按钮

当我添加时，我正在尝试添加一个后退按钮以移回动态注入的页面中

```
<div id="dataview" data-role="page" data-add-back-btn="true">
    <div data-role="header" data-backbtn="true">
        <h1></h1>
    </div>
    <div data-role="content"></div>
</div> 
```

该应用程序返回到第一个加载的 div 而不是之前加载的 div 即它回家而不是 -1

# .net - EPPlus 和 ClosedXML 库在处理 OpenXML 方面有什么区别？

> ID：10501528
> 
> 赞同：24
> 
> 时间：2012-05-08T15:19:03.423
> 
> 标签：.net, openxml, office-2007, closedxml

我试图在 ClosedXML、EPPlus 和可能的 SpreadsheetLight 之间进行选择。我可以考虑哪些原因来选择其中一个而不是其他的？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-07-07T20:47:36.987

过去一周我一直在评估 EPPlus、ClosedXML 和 SpreadsheetLight。这三个都是非常棒的库，可以轻松使用极其复杂的 OpenXML。我决定使用 EPPlus 的原因如下：

*   最初，我打算使用 ClosedXML。它有很好的文档，对象结构对我来说很有意义。虽然我有一些图表要求，但截至目前，ClosedXML 没有任何图表功能。

*   然后我偶然发现了 SpreadsheetLight，它也有很好的文档并且支持一些图表。我也喜欢作者的态度和他对产品的承诺。~~但是，该项目构建在 OpenXML 2.0 SDK 之上，而不是 2.5，这对我来说是一个交易破坏者，因为我希望在库不能完全满足我的需要的情况下能够灵活地直接使用 OpenXML。我的项目针对 excel 2013，所以我想使用最新的 SDK。~~ *...更新！有关更多信息，请参阅下面 ErrCode 的评论...*

*   最后，我遇到了 EPPlus，它具有良好的文档并支持图表。它的下载次数比其他两个要多得多，这让我知道其他人正在使用它，并且社区似乎在该项目周围很活跃，这给了我一些安全感。他们目前还处于第 4 版的 beta 2 版本中，从其他人的说法听起来很有希望。我还了解到 EPPlus 具有良好的性能（并不是说其他​​的性能一定不好），并且即将发布的第 4 版似乎正在进一步改进。

* * *

# 更新

我发现 EPPlus 包含的另一个非常有用的功能是它如何为工作表的各个部分公开 XML。如果 EPPlus 不支持某个功能，您仍然可以编辑 XML（在某些情况下）以获得所需的输出。例如，如果您有一个数据透视图并且想要启用多级标签，您可以执行以下操作：

```
 private void EnableMultiLevelLabels(ExcelChart chart)
    {   
        var element = chart.ChartXml.GetElementsByTagName("c:catAx")[0];
        if (element == null)
            return;

        var multiLevelLabelNode = element.AppendChildElementNode("c:noMultiLvlLbl");
        if (multiLevelLabelNode != null)
            multiLevelLabelNode.AppendNodeAttribute("val", "0");
    } 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-16T04:19:06.487

[SpreadsheetLight](http://spreadsheetlight.com/)，它在 Open XML SDK 内部运行。麻省理工学院许可证。免责声明：我写了 SpreadsheetLight。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-08T15:23:48.030

开源：你看过[EPPlus](https://github.com/EPPlusSoftware/EPPlus)吗？

口号：在服务器上创建高级 Excel 2007/2010 电子表格。

许可证：~~GNU 图书馆通用公共许可证 (LGPL)。~~Polyform 非商业许可证 1.0.0

# php - 在 HTML 中输出 "<"/">" 字符

> ID：10501535
> 
> 赞同：2
> 
> 时间：2012-05-08T15:19:30.053
> 
> 标签：php, html, special-characters

我试图在 HTML 中将“<”/">”显示为字符串而不是标签。

我有一个包含用户全名和电子邮件的数据库，当我想同时显示它们时，我的格式如下：

`Christian Eric Paran <CEPexample@yahoo.com>`

但我它只显示如下：

`Christian Eric Paran`

有没有办法在 PHP 的 HTML 中显示这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:21:15.107

[使用字符引用](http://www.w3.org/TR/html4/charset.html#h-5.3.2)在 HTML 中表示具有特殊含义的字符（`<`→ `&lt;`& `&`→`&amp;`是您在文本节点中需要担心的字符）。

该[`htmlspecialchars`](http://php.net/htmlspecialchars)函数将为您转换。

```
print htmlspecichars("Christian Eric Paran <CEPexample@yahoo.com>"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T15:21:22.807

问题是，`<`and`>`被 HTML 用来分隔标签。因此，电子邮件地址最终会被解析为 HTML 标记，并最终被大多数浏览器隐藏。

用于在 HTML`&lt;`中显示 a `<`，`&gt;`用于`>`.

如果数据将是动态的，请在打印之前使用`htmlentities`或为您执行上述编码。`htmlspecialchars`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T15:21:30.240

您需要将[htmlspecialchars 转换](http://php.net/htmlspecialchars)为适当的 HTML 实体 - 例如 ' `&lt;`'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:31:37.227

由于您正在处理电子邮件地址，因此您肯定需要一些灵活性来处理如何显示结果，而不仅仅是隐藏标签

我会推荐 [http://php.net/mailparse_rfc822_parse_addresses](http://php.net/mailparse_rfc822_parse_addresses)

```
 $email = mailparse_rfc822_parse_addresses("Christian Eric Paran <CEPexample@yahoo.com>") ;
   echo $email[0]['display'] ; // Christian Eric Paran
   echo $email[0]['address'] ; // CEPexample@yahoo.com 
```

如果您没有安装邮件解析，您可以使用它

```
$email = parse_addresses ( "Christian Eric Paran <CEPexample@yahoo.com>" );
echo $email ['display']; // Christian Eric Paran
echo $email ['address']; // CEPexample@yahoo.com 
```

`parse_addresses`功能

```
function parse_addresses($address) {
    $info = array ();
    preg_match_all ( '/\s*"?([^><,"]+)"?\s*((?:<[^><,]+>)?)\s*/', $address, $matches );
    $info ['display'] = $matches [1] [0];
    $info ['address'] = str_replace ( array (
            "<",
            ">" 
    ), "", $matches [2] [0] );

    return $info;
} 
```

# select - 如何使用 SPARQL 1.1 查询不同元组的数量？

> ID：10501541
> 
> 赞同：8
> 
> 时间：2012-05-08T15:19:55.333
> 
> 标签：select, count, sparql

似乎可以使用

```
(COUNT(DISTINCT ?x) as ?count) 
```

以及查询中所有变量的不同元组的数量，使用

```
(COUNT(DISTINCT *) as ?count) 
```

但是，我无法弄清楚如何计算特定的（不同的）元组。就像是

```
(COUNT(DISTINCT ?a ?b ?c) as ?count) 
```

似乎不起作用。我做错了还是在 SPARQL 1.1 中真的不允许这样做？或者它应该可以工作，只是在我用来测试它的 Sesame 2.6.0 中不受支持？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T21:04:23.103

欢迎来到 StackOverflow！

确保您的中间结果仅包含`?a ?b ?c`您感兴趣的三个变量。

一种方法是使用子查询。子查询仅投影三个所需的变量。像这样的东西：

```
SELECT (COUNT(*) AS ?count) {
   SELECT DISTINCT ?a ?b ?c {
      …
   }
} 
```

（我不确定 Sesame 是否支持子查询。）

另一种方法是简单地确保您的查询仅包含三个变量。如果您在查询中需要更多变量，您可以用空白节点替换它们。SPARQL 图形模式中的空白节点就像“匿名变量”一样工作。虽然有一些有趣的范围问题，所以子查询方法可能更好。

# android - 将 MediaController 定位在 VideoView 上

> ID：10501543
> 
> 赞同：3
> 
> 时间：2012-05-08T15:20:00.640
> 
> 标签：android, android-videoview, mediacontroller

我在尝试将 MediaController 放置在我想要的位置时遇到了很多麻烦。

我真正想做的是始终在 VideoView 上方显示 MediaController，与底部对齐。

在过去的三天里，我一直在尝试这样做，但没有成功。我尝试获取 MediaController 的高度，但它始终为零，直到它第一次显示在屏幕底部。

我已经覆盖了 MediaController 来覆盖 setAnchorView 以便 VideoView 不会覆盖它。

我已经阅读了 VideoView 和 MediaController 的源代码，并且我还尝试使用私有字段上的反射来获取 MediaController 的高度，但在第一次显示组件之前也没有成功。

我如何知道 MediaController 的高度而不显示给用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-06T15:04:35.043

将您的视频视图放入 a`FrameLayout`并将其高度设置为，`wrap_content`以便父级调整为子级（视频视图）高度。此步骤至关重要`MediaController`，因为默认情况下，如果锚定到视频视图，视图将添加到视频视图父级的底部。因此，父母的身高必须与孩子的身高相匹配，以使媒体控制器在视频视图的底部可见。

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <VideoView
        android:id="@+id/video_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</FrameLayout> 
```

然后在您的活动类中，使用以下代码添加媒体控制器：

```
MediaController mediaController = new MediaController(VideoPlayerActivity.this);
mediaController.setAnchorView(videoView);
videoView.setMediaController(mediaController); 
```

# css - 为什么 Twitter Bootstrap 需要多个按钮类？

> ID：10501544
> 
> 赞同：4
> 
> 时间：2012-05-08T15:20:00.963
> 
> 标签：css, twitter-bootstrap

要使用[Twitter 的 Bootstrap 库](http://twitter.github.com/bootstrap/base-css.html#buttons)制作主按钮，您需要使用两个 CSS 类，如下所示：`class="btn btn-primary"`.

当他们可以让 btn-primary 包含 btn 包含的所有 CSS 时，他们为什么要以这种方式设计 API？纯粹是为了节省代码重复和文件大小，还是有更复杂的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:22:11.257

因为`btn-primary`不是默认按钮。将其变为蓝色就像`btn-success`将其变为绿色一样是附加的 CSS。

默认按钮为灰色。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T15:25:48.853

这是因为[OOCSS](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/)原则。从元素中分离某些样式可以更好地重用代码和样式，并且可以更轻松地快速修改 CSS 中的任何对象。例如，您的主`.btn`类使用默认灰色设置按钮样式，因此`.btn`该类的所有按钮都将具有相同的样式，但使用预定义样式，您可以扩展同一个按钮类以支持多种不同的配色方案，而无需`.btn`一遍又一遍地编写默认属性，因此更易于维护。如果您查看`.btn-warning`和所有其他按钮状态类的 css，您会发现它们只是定义了按钮的颜色和样式，而无需再次重写按钮类；

```
.btn-warning:hover, .btn-warning:active, .btn-warning.active, .btn-warning.disabled, .btn-warning[disabled] {
    background-color: #F89406;
} 
```

这允许更容易阅读和更短、更干净的样式表。

# c# - WordPress 登录 httpwebrequest

> ID：10501547
> 
> 赞同：0
> 
> 时间：2012-05-08T15:20:11.713
> 
> 标签：c#, .net, wordpress, httpwebrequest

我正在尝试使用 httwebrequest 和 c# 登录 wordpress 后台，但我做不到。我通过网络搜索，发现很多人都有同样的问题，但我找不到合适的解决方案。你能帮助我吗？提前致谢。

```
string adres = "http://www.site.com";
CookieContainer cookies = new CookieContainer();
ServicePointManager.Expect100Continue = false;

HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(adres + "wp-admin/");
request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1";
request.Method = "GET";
request.CookieContainer = cookies;
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
response.Close();

//POST
request = (HttpWebRequest)HttpWebRequest.Create(adres + "/wp-login.php");
request.Method = "POST";
request.CookieContainer = cookies;
string password = haslo;
string loginData = String.Format("loginform=&log=admin&pwd=password&testcookie=1&rememberme=forever&redirect_to=" + Uri.EscapeDataString(adres) + "wp-admin/&wp-submit=" + Uri.EscapeDataString("Zaloguj się"));

 request.ContentType = "application/x-www-form-urlencoded";
 byte[] loginDataBytes = Encoding.ASCII.GetBytes(loginData);
 Stream postData = request.GetRequestStream();
 postData.Write(loginDataBytes, 0, loginDataBytes.Length);
 postData.Close();
 response = (HttpWebResponse)request.GetResponse();

 // NEXT GET
 request = (HttpWebRequest)HttpWebRequest.Create(adres + "/wp-admin/");
 request.Method = "GET";
 request.CookieContainer = cookies;

 HttpWebResponse response1 = (HttpWebResponse)request.GetResponse();

 Stream response1Stream = response1.GetResponseStream();
 StreamReader reader1 = new StreamReader(response1Stream);
 string input1 = reader1.ReadToEnd();
 response1.Close();
 richTextBox1.Text = input1; 
```

我无法登录 -> 在第二个“GET”请求之后，我只得到登录表单，而不是 wordpress 后台主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:31:59.473

几个月前我遇到了同样的问题，经过一番苦苦搜索，我找不到任何可以帮助我解决的问题。

最后，写了我自己的代码来解决这个问题。它是 .NET 应用程序和 WordPress 之间的 SSO（单点登录）。

正如反复出现的那样，它已发布在我的个人博客上（抱歉，它是西班牙语的）。

我希望它可以帮助你...... [http://sordalion.blogspot.com.es/2012/12/sso-aspnet-to-wordpress-aspnet-to.html](http://sordalion.blogspot.com.es/2012/12/sso-aspnet-to-wordpress-aspnet-to.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T14:00:52.317

所以有两个陷阱，一是由于重定向，没有设置登录cookie，二是由于本机cookie管理器无法解析接收到的`Set-Cookies`header中的一些cookie。

要通过以下方式登录`Wordpress`帐户，`WebRequest`您需要做以下两件事：

`POST`1）通过设置禁用请求重定向`AllowAutoRedirect = false`

2）从header中手动解析cookie ，请求成功`Set-Cookies`后手动添加到cookie容器中。`POST`

# facebook - 更改发布到 Facebook 时间轴的 URL

> ID：10501554
> 
> 赞同：0
> 
> 时间：2012-05-08T15:20:46.777
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-page, facebook-timeline

我有一个 Facebook 页面选项卡，它使用以下功能在用户完成表单后将操作发布到时间线。

```
function postFoo(){
    FB.api(
        '/me/<?php echo $namespace; ?>:foo?bar=<?php echo $url;?>',
        'post',
        function(response) {
            if (!response || response.error) {
                    console.log(response.error);
            } else {
                    console.log('Foo was successful! Action ID: ' + response.id);
            }
        });
} 
```

这一切正常，动作被正确添加到时间线，但是时间线帖子中包含的链接的 URls 就像回到应用程序的实际位置（例如[http://foo.bar.com/app](http://foo.bar.com/app)）而不是 facebook 选项卡正如人们所期望的那样。我尝试将重定向 URI 更改为页面选项卡地址，但没有任何运气。

有没有其他人遇到过这个问题，如果有任何解决方案或建议，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:45:00.783

这很棘手。Facebook 将始终将用户发送回您在对象中使用的 URL。

您需要做的是检测用户是否来自 Facebook，然后将他们重定向回粉丝页面。您可以在 PHP 中执行此操作，我会检查 URL 是否包含`fb_source`在`fb_action_ids`其中。

PHP 示例：

```
<?php
if ( isset( $_GET['fb_source'] ) || isset( $_GET['fb_action_ids'] ) ) {
    header( 'Location: '. $fan_page_url );
}
?> 
```

这将重定向任何单击该操作的人以反弹回该操作来自的粉丝页面。

# java - 关闭打开的数据库连接？

> ID：10501556
> 
> 赞同：2
> 
> 时间：2012-05-08T15:20:51.353
> 
> 标签：java, jdbc

我的 Web 应用程序中有两个数据源。我得到了连接`dataSource1.getConnection();`。

我的问题是考虑下面的代码：

```
Connection connection = null;
connection = dataSource1.getConnection();
connection = dataSource2.getConnection();
connection.close(); 
```

我正在获得`dataSource1`连接并立即将`dataSource2`连接分配给连接变量。

当我关闭`dataSource2`连接时，`dataSource1`连接是否保持打开状态？还是我需要做如下？

```
Connection connection = null;
connection = dataSource1.getConnection();
connection.close();
connection = dataSource2.getConnection();
connection.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:32:46.230

第二个例子是对的，第一个例子会留下一个开放的连接。此外，您应该始终关闭块内的资源（在这种情况下为连接）`finally`，例如：

```
Connection connection = null;

try {
    connection = dataSource1.getConnection();
} catch (SQLException e) {
    // handle exception
} finally {
    try {
        connection.close();
    } catch (SQLException e) {
        // handle exception
    }   
}

try {
    connection = dataSource2.getConnection();
    connection.close();
} catch (SQLException e) {
    // handle exception
} finally {
    try {
        connection.close();
    } catch (SQLException e) {
        // handle exception
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:26:59.743

您需要按照您在第二个代码示例中所示的方式进行操作。

在第一种情况下，垃圾收集器**可能会**为您清理混乱（在未定义的时间之后）并关闭您失去引用的连接（前提是 JDBC 驱动程序供应商在其实现`finalize`方法中实现了适当的逻辑`Connection`)，但是依靠这种情况发生被认为是非常**糟糕的做法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:03:32.170

该类[`Connection`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html)实现了[`AutoClosable`](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)接口，该接口定义了“不再需要时必须关闭的资源”。因此连接对象被定义为需要调用它们的`close()`方法才能被正确管理。

另一方面，该`Connection.close()`方法被记录为“立即释放 Connection 对象的数据库和 JDBC 资源，而不是等待它们自动释放”。这意味着在某处连接资源最终将被自动释放。

不过，总的来说，我会说最好明确关闭您不再需要的任何连接。

# java - JDialog固定高度

> ID：10501559
> 
> 赞同：6
> 
> 时间：2012-05-08T15:21:02.687
> 
> 标签：java, swing, jdialog

> **可能重复：**
> [JDialog 允许用户仅更改对话框的宽度](https://stackoverflow.com/questions/8023633/jdialog-allow-user-to-only-change-width-of-the-dialog)

我有一个 JDialog，我希望宽度可以调整大小，但高度不能。

这是我当前的代码：

```
addComponentListener(new ComponentAdapter() {
    @Override
    public void componentResized(ComponentEvent e) {
        setLocation(getLocation().x, getLocation().y + (getHeight() - staticHeight));
        setSize(new Dimension(getWidth(), staticHeight));
        super.componentResized(e);
    }
}); 
```

问题是，在调整窗口大小后调用该代码。使窗口调整大小，然后闪烁回来。

我想这样做，所以当用户尝试拖动窗口的高度时它什么也不做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:13:31.727

*   你不能直接停止调整大小，

*   你不能阻止容器的基本属性，

*   容器，因为来自 Native OS 并且建立在它的属性之上，

*   调整大小的限制是屏幕大小

*   其余是（带代码）[@camickr 调整组件大小](http://tips4java.wordpress.com/2009/09/13/resizing-components/)

*   有基于 AbsoluteLayout 的肮脏 hack，我不建议使用它

*   如果在调整大小期间有任何闪烁或冻结，则块调整大小

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:37:11.783

看起来你不能。有一个 setResizable() 方法，但它全有或全无。
您可以尝试通过在 JDialog 中使用布局来缓解此问题，以便无论 JDialog 高度如何，您的内容都保持相同的高度，
或者可能（更激进）将其设置为不可调整大小并实现您自己的鼠标侦听器来调整自己的大小？这样你就可以完全控制

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T15:58:56.617

找了一会儿，我找不到任何真正令人满意的解决方案。我认为对话框的大小调整是直接在操作系统级别处理的，因此您只能说您希望它完全不可调整大小或完全调整大小。

下面的代码总是会阻止对话框变大，但是当用户调整对话框大小时，对话框的边框仍然会移动。

radai 也建议的另一个选项是防止调整大小并使用鼠标侦听器设置自定义内容窗格，该侦听器侦听鼠标并相应地调整大小。但是，我认为这对用户来说并不是很自然（我认为您无法捕捉到对话框边框上的事件）。

```
import java.awt.Frame;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;

import javax.swing.JDialog;
import javax.swing.JRootPane;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                init();
            }
        });
    }

    public static void init() {
        final int staticHeight = 150;
        final JDialog dialog = new JDialog((Frame) null) {

            @Override
            protected JRootPane createRootPane() {
                JRootPane rp = new JRootPane() {
                    @Override
                    public void reshape(int x, int y, int w, int h) {
                        super.reshape(x, y, w, staticHeight);
                    }
                };
                rp.setOpaque(true);
                return rp;
            }

            @Override
            public void reshape(int x, int y, int width, int height) {
                super.reshape(x, y, width, staticHeight);
            }

        };
        dialog.addComponentListener(new ComponentAdapter() {
            @Override
            public void componentResized(ComponentEvent e) {
                dialog.setSize(dialog.getWidth(), staticHeight);
            }
        });
        dialog.pack();
        dialog.setVisible(true);

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T16:46:50.563

在这里试试这个代码示例，这就是你如何设置`JDialog`没有垂直调整大小。虽然我真的不想为此而功劳，但整个功劳归于这个程序的创建者，即“Darryl Burke”，该程序的链接在[这里](http://www.coderanch.com/t/532122/GUI/java/Resizing-JDialog-only-width-not)。

```
import java.awt.*;  
import java.awt.event.*;  
import javax.swing.*;  

public class WidthResizeableDialog {  

  Robot robot;  
  static final int HEIGHT = 400;  
  Point lastLocation;  

  public static void main(String[] args) {  
    SwingUtilities.invokeLater(new Runnable() {  

      @Override  
      public void run() {  
        new WidthResizeableDialog().makeUI();  
      }  
    });  
  }  

  public void makeUI() {  
    try {  
      robot = new Robot();  
    } catch (AWTException ex) {  
      ex.printStackTrace();  
    }  
    final JDialog dialog = new JDialog();  
    dialog.setSize(400, HEIGHT);  
    dialog.setLocationRelativeTo(null);  
    dialog.addWindowListener(new WindowAdapter() {  

      @Override  
      public void windowClosing(WindowEvent e) {  
        System.exit(0);  
      }  
    });  
    dialog.addComponentListener(new ComponentAdapter() {  

      @Override  
      public void componentMoved(ComponentEvent e) {  
        SwingUtilities.invokeLater(new Runnable() {  

          @Override  
          public void run() {  
            lastLocation = dialog.getLocation();  
          }  
        });  
      }  
    });  
    dialog.getRootPane().addComponentListener(new ComponentAdapter() {  

      @Override  
      public void componentResized(ComponentEvent e) {  
        int height = dialog.getHeight();  
        if (robot != null && height != HEIGHT) {  
          robot.mouseRelease(InputEvent.BUTTON1_MASK);  
          dialog.setLocation(lastLocation);  
          dialog.setSize(dialog.getWidth(), HEIGHT);  
        }  
      }  
    });  
    dialog.setVisible(true);  
  }  
} 
```

# .net-4.0 - 如何使用 MEF IsMultiple 属性

> ID：10501560
> 
> 赞同：3
> 
> 时间：2012-05-08T15:21:02.953
> 
> 标签：.net-4.0, mef

**背景：** 我试图让 MEF 导入两个实现 IFoo 的程序集。为此，不出所料，我使用 [ImportMany] 导入所有给我一个 IEnumerable> 的东西。然后我的消费逻辑根据元数据“Bar”确定要使用哪个导入的程序集。

每个导出器都装饰有一个 ExportMetadata 属性。当我有以下情况时，这可以正常工作：

```
[Export(typeof(IFoo))]
[ExportMetadata("Bar", "Hello")]
public class Hello : IFoo
{...}

[Export(typeof(IFoo))]
[ExportMetadata("Bar", "World")]
public class World: IFoo
{...} 
```

也就是说，我的 IEnumerable 有两个 IFoo。

我想将一个定义为默认值，因此如果不需要“Hello”或“World”，我将寻找具有“Default”作为我的 Bar 元数据的那个。我试图使用这样的 IsMultiple 属性来做到这一点：

```
[Export(typeof(IFoo))]
[ExportMetadata("Bar", "Hello", IsMultiple = true)]
[ExportMetadata("Bar", "Default", IsMultiple = true)]
public class Hello : IFoo
{...} 
```

**问题：** 当我添加 IsMultiple 属性和第二个属性时，Hello 类不再被拉入生成的 IEnumerable。

**问题：** 如何使用第二个/默认名称为 MEF 标记一个类？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:08:14.743

要在这样的类上公开多个完全独立的导出，最好的方法是使用多个“属性导出”，在这种情况下返回“this”。

```
class Hello: IFoo
{
    [Export, ExportMetadata(...)]
    public IFoo Bar { get { return this; } }

    [Export, ExportMetadata(...)]
    public IFoo Default { get { return this; } }
} 
```

# java - 以编程方式创建 xslt 文件

> ID：10501566
> 
> 赞同：2
> 
> 时间：2012-05-08T15:21:25.033
> 
> 标签：java, xml, xslt, dom, dynamically-generated

我知道我可以通过在 java 中`xml`使用`DOM` *api*以编程方式创建文件，如下所示：

```
DocumentBuilderFactory documentBuilderFactory = 
    DocumentBuilderFactory.newInstance();
DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();

Document document = documentBuilder.newDocument();
Element rootElement = document.createElement("map");
document.appendChild(rootElement);

Element em = document.createElement("string");
em.setAttribute("name", "FirstName");
.... 
```

但是是否有任何*API*可以构造一`xslt`棵树？（例如像 Dom 这样的 api）

我需要这样的东西：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" exclude-result-prefixes="fo">
<xsl:template match="root">
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
  <fo:layout-master-set>
    <fo:simple-page-master master-name="my-page">
      <fo:region-body margin="1in"/>
    </fo:simple-page-master>
  </fo:layout-master-set>

  <fo:page-sequence master-reference="my-page">
    <fo:flow flow-name="xsl-region-body">
      <fo:block>
        <fo:external-graphic width="100pt" height="100pt" content-width="50pt" content-height="50pt" src="images/shopping-cart_100.jpg"/>
      </fo:block>
      <fo:block>Good Morning, <xsl:value-of select="name" />!</fo:block>
      <fo:block>
        <fo:table>
             <fo:table-body>
                <fo:table-row>
                    <fo:table-cell border="solid 1px black" text-align="center" font-weight="bold">
                        <fo:block> 
```

和：

```
 <xsl:for-each select="./friend">
                <fo:table-row>
                <fo:table-cell border="solid 1px black" text-align="center">
                    <fo:block>
                        <xsl:value-of select="position()" />
                    </fo:block>
                </fo:table-cell>
                <fo:table-cell border="solid 1px black" text-align="center">
                    <fo:block>
                        <xsl:value-of select="name" />
                    </fo:block>
                </fo:table-cell>
                <fo:table-cell border="solid 1px black" text-align="center"> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:29:45.023

由于 XSLT 它也是 XML，您可以简单地使用相同的策略：

```
...
Document document = documentBuilder.newDocument();

Element rootElement = document.createElement("xsl:stylesheet");
// adding attributes like namespaces etc...

document.appendChild(rootElement); 
Element em = document.createElement("xsl:template");
em.setAttribute("match", "/"); 
```

等等...

但它不是很优雅。您应该改用库或框架，您应该很容易找到一个谷歌搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:30:24.373

您可以像创建 XML 文件一样创建 XSLT，因为 XSLT 是 XML 文件。

但是，如果您必须处理大量 XML/XSLT 转换，Apache Cocoon 3 有一个非常轻量级的 XML/XSLT 管道系统可以用作库，而不是手动处理所有 XML dom 内容和 XSLT 转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:00:11.900

DOM 是一种非常麻烦的创建 XML 的方式。

有一个更好的方法——使用 XSLT。

XML 越复杂，使用 XSLT 而不是 DOM 创建它的好处就越大。

没有理由不能使用 XSLT 创建 XSLT（甚至还有一个特殊的声明 xsl:namespace-alias 使它更容易一些 - 搜索 xsl:namespace-alias 将显示它的使用示例。

# sql - 删除重复行但更改剩余重复项的列数据

> ID：10501567
> 
> 赞同：1
> 
> 时间：2012-05-08T15:21:27.227
> 
> 标签：sql, sql-server-2008, having-clause

我正在创建一个邮件列表，我将发送到打印店打印出来。我想出了如何取出所有重复地址，但我需要一种方法可以将居住在重复地址的人的姓名更改为“姓氏”家庭。重复的地址告诉我，我有一个住在那里的两个人的地址，所以我没有给他们寄两封邮件，而是只寄给他们一封，地址是他们俩。提前致谢

这是我到目前为止所拥有的

```
 SELECT First_Name + ' ' + Last_Name AS Name, Mail_Address_1, phone
    FROM    Personal
    GROUP BY Mail_Address_1
    HAVING  COUNT(Mail_Address_1) > 1
    order by  Mail_Address_1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:44:45.710

如果您想取出重复的行并修改剩余的行以识别它，您可以使用 t

```
WITH DUPE (MAIL_ADDRESS_1)
AS
(
    SELECT MAIL_ADDRESS_1
        FROM    PERSONAL
        GROUP BY MAIL_ADDRESS_1
        HAVING  COUNT(MAIL_ADDRESS_1) > 1
)
SELECT FIRST_NAME, LAST_NAME , MAIL_ADDRESS_1, PHONE FROM PERSONAL WHERE MAIL_ADDRESS_1 NOT IN(
    SELECT MAIL_ADDRESS_1 FROM DUPE)
UNION
SELECT TOP 1 FIRST_NAME, LAST_NAME + '(DUPE MAIL)' AS LAST_NAME, MAIL_ADDRESS_1, PHONE 
FROM PERSONAL WHERE MAIL_ADDRESS_1 IN (SELECT MAIL_ADDRESS_1 FROM DUPE) 
```

或简单的选择：

```
SELECT FIRST_NAME, LAST_NAME , MAIL_ADDRESS_1, PHONE FROM PERSONAL WHERE MAIL_ADDRESS_1 NOT IN(
    SELECT MAIL_ADDRESS_1
        FROM    PERSONAL
        GROUP BY MAIL_ADDRESS_1
        HAVING  COUNT(MAIL_ADDRESS_1) > 1
    )
UNION
SELECT TOP 1 FIRST_NAME, LAST_NAME + '(DUPE MAIL)' AS LAST_NAME, MAIL_ADDRESS_1, PHONE 
FROM PERSONAL WHERE MAIL_ADDRESS_1 IN (
    SELECT MAIL_ADDRESS_1
        FROM    PERSONAL
        GROUP BY MAIL_ADDRESS_1
        HAVING  COUNT(MAIL_ADDRESS_1) > 1
    )
ORDER BY  MAIL_ADDRESS_1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:01:05.697

您可以使用 Windowed 函数`ROW_NUMBER()`和`COUNT(*) OVER()`

```
SELECT  CASE WHEN Duplicates = 1 THEN First_Name + ForeName ELSE 'The ' + Last_name + ' Household' END [Name]
        Mail_Address_1,
        Phone
FROM    (   SELECT  First_name, 
                    Last_name,
                    Mail_Address_1,
                    Phone,
                    ROW_NUMBER() OVER(PARTITION BY Mail_Address_1 ORDER BY Last_name) [RowNum],
                    COUNT(*) OVER(PARTITION BY Mail_Address_1) [Duplicates]
            FROM    Personal
            WHERE   Registered_Voter = 1
        ) p
WHERE   RowNum = 1 
```

将`ROW_NUMBER()`结果限制为每个地址的顶部条目，并`COUNT`规定应用哪种逻辑，即适用于个人或家庭。

# c - 使用在 C 中动态分配的结构数组

> ID：10501575
> 
> 赞同：1
> 
> 时间：2012-05-08T15:21:46.800
> 
> 标签：c, arrays, dynamic, struct, allocation

我正在使用 C 语言编写应用程序。我创建了一个基于结构的新类型：

```
typedef struct ENTITY
{
    char * field1;
    char * field2;
} entity; 
```

然后，我定义了一个函数来动态分配实体数组：

```
int my_function(entity ** my_array)
{
    count = random_int(1, 10);

    entity * result;
    result = (entity *) calloc(count, sizeof(entity));

    int i;
    for(i = 0 ; i < count ; i++)
    {
        (result+i)->field1 = strdup("Blabla in field1");
        (result+i)->field2 = strdup("Blabla in flied2");

        // This line print correctly "Blabla in field1" for each element in the array.
        printf("->{%s}\n", (result+i)->field1);
    }

    *my_array = result;
    return count;
} 
```

在我的主文件中，我使用了这个函数：

```
entity * my_array;
count = my_function(&my_array);

for(i = 0 ; i < count ; i++)
{
    printf("field1 of the element %d: %s\n", i, my_array[i].field1);
} 
```

出于某种原因，当我的数组由 <= 3 个元素完成时，此代码有效，从数组中的 4 个元素中，我得到一个分段错误错误：

```
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
field1 of the element 0: `�fZ$
Segmentation fault 
```

我在这里阅读了很多关于动态分配的信息，但我无法解决这个问题。有什么线索吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:16:49.610

在删除对 random_int() 的调用并将其替换为硬编码量后，您的代码可以工作，如下所示：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct ENTITY
{
    char * field1;
    char * field2;
} entity;

int my_function(entity ** my_array)
{
    int count = 10;

    entity * result;
    result = (entity *) calloc(count, sizeof(entity));

    int i;
    for(i = 0 ; i < count ; i++)
    {
        (result+i)->field1 = strdup("Blabla in field1");
        (result+i)->field2 = strdup("Blabla in flied2");
    }

    for(i = 0 ; i < count ; i++)
    {
        // This line print correctly "Blabla in field1" for each element in the array.
        printf("->{%s}\n", (result+i)->field1);
    }    

    *my_array = result;
    return count;
}

int main( int argc, char *argv[] )
{
    int count;
    int i;

    entity * my_array;
    count = my_function(&my_array);

    for(i = 0 ; i < count ; i++)
    {
        printf("MAIN::field1 of the element %d: %s\n", i, my_array[i].field1);
        printf("MAIN::field2 of the element %d: %s\n", i, my_array[i].field2);
   }

    return( 0 );
} 
```

这个的输出是：

```
[root@jrn SO]# gcc  array.c
[root@jrn SO]# ./a.out 
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
->{Blabla in field1}
MAIN::field1 of the element 0: Blabla in field1
MAIN::field2 of the element 0: Blabla in flied2
MAIN::field1 of the element 1: Blabla in field1
MAIN::field2 of the element 1: Blabla in flied2
MAIN::field1 of the element 2: Blabla in field1
MAIN::field2 of the element 2: Blabla in flied2
MAIN::field1 of the element 3: Blabla in field1
MAIN::field2 of the element 3: Blabla in flied2
MAIN::field1 of the element 4: Blabla in field1
MAIN::field2 of the element 4: Blabla in flied2
MAIN::field1 of the element 5: Blabla in field1
MAIN::field2 of the element 5: Blabla in flied2
MAIN::field1 of the element 6: Blabla in field1
MAIN::field2 of the element 6: Blabla in flied2
MAIN::field1 of the element 7: Blabla in field1
MAIN::field2 of the element 7: Blabla in flied2
MAIN::field1 of the element 8: Blabla in field1
MAIN::field2 of the element 8: Blabla in flied2
MAIN::field1 of the element 9: Blabla in field1
MAIN::field2 of the element 9: Blabla in flied2 
```

# java - OracleCachedRowSet 或 RowSet

> ID：10501581
> 
> 赞同：1
> 
> 时间：2012-05-08T15:22:02.910
> 
> 标签：java, jdbc

Java中的OracleCachedRowSet和RowSet有什么区别（两者的优点/缺点）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:26:33.700

`OracleCachedRowSet`是 Oracle JDBC 驱动程序对`RowSet`和`CachedRowSet`接口的实现。您应该坚持使用`RowSet`or `CachedRowSet`only，除非您有非常令人信服的理由来使用特定于 Oracle 的类，例如想要使用存在于 or 上`OracleCachedRowSet`但不存在于`RowSet`or上的专有方法`CachedRowSet`。

请注意，您的程序将`OracleCachedRowSet`在运行时使用，无论您的源代码是否`OracleCachedRowSet`引用`RowSet`.

# ios - 我需要创建线程安全变量吗？

> ID：10501582
> 
> 赞同：1
> 
> 时间：2012-05-08T15:22:03.910
> 
> 标签：ios, multithreading

我需要创建线程安全变量吗？我将只在 mainThread 和 dispatch_async(dispatch_get_main_queue() 中使用 mydata。

```
-(void) mainThread
{
 mydata = 55;
}

-(void) concurrentThread
{
 dispatch_async(dispatch_get_main_queue(), ^
 {
  mydata = 77;                          
 });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T18:29:58.033

我认为`mydata`在这种情况下没有必要做任何特别的事情，因为它只从主线程更新（假设这`mainThread`意味着该方法只从主线程调用）。这也假设您没有尝试`mydata`从任何地方读取，而是从主线程读取。

**进一步说明：**

即使 concurrentThread 正在主线程以外的线程上运行，但`mydata = 77`出现在分派到主线程的块中的事实意味着分配实际上将在主线程上进行，以某种串行顺序以及任何其他读取/write 写入发生在主线程上的变量。因此，假设在访问 mydata 的主线程上没有其他任何代码，则此代码是安全的。

# javascript - 做一个后台window.open

> ID：10501583
> 
> 赞同：1
> 
> 时间：2012-05-08T15:22:09.520
> 
> 标签：javascript, window.open

> **可能重复：**
> [如何在新选项卡中打开页面但不给它焦点？（JSF 2.0）](https://stackoverflow.com/questions/7161363/how-to-open-a-page-in-a-new-tab-but-dont-give-it-focusjsf-2-0)

我想做一个 window.open “在后台”。我希望浏览器停留在当前页面上。我发现我可以`self.focus()`在 window.open 之后立即调用以返回当前页面。但浏览器确实会先进入新窗口，用户体验并不理想。现在执行此操作的代码是

```
 external_window = window.open(url,'_blank');
    self.focus();
    setTimeout("external_window.focus()", 4000); 
```

我本可以在 setTimeout 中完成 window.open。但是浏览器会被视为弹出窗口。我现在的代码实现了在进入新窗口之前停留在当前窗口向用户显示页面的目标。唯一的问题是在返回当前页面之前先进入新窗口的效果`self.focus()`。有没有什么办法可以在没有实际进入该窗口的情况下执行 window.open，直到我执行`external_window.focus()`？

# ios - 核心数据在 iOS 4.3 中不起作用

> ID：10501588
> 
> 赞同：1
> 
> 时间：2012-05-08T15:22:17.280
> 
> 标签：ios, core-data, nsmanagedobjectcontext, ios4, nspersistentstore

我的核心数据有问题。它在 iOS 5.0 和更高版本中运行很好，但是当我在 iOS 4.3 中运行它时它崩溃了，它就在线崩溃了`__managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];`有人可以帮助我吗？

```
2012-05-08 17:01:21.617 [7489:10e03] -[NSManagedObjectContext initWithConcurrencyType:]: unrecognized selector sent to instance 0x4ddc6c0
2012-05-08 17:01:21.650 [7489:10e03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSManagedObjectContext initWithConcurrencyType:]: unrecognized selector sent to instance 0x4ddc6c0'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x0111e5a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x0153c313 objc_exception_throw + 44
    2   CoreFoundation                      0x011200bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x0108f966 ___forwarding___ + 966
    4   CoreFoundation                      0x0108f522 _CF_forwarding_prep_0 + 50
    5   0x00002a42 -[AppDelegate managedObjectContext] + 194
    6   0x00003736 -[HomeViewController fetchFeedDataIntoDocument] + 134
    7   Amsterdam                   0x0000417d -[HomeViewController refresh] + 45
    8   Amsterdam                   0x0000803f -[MBProgressHUD launchExecution] + 143
    9   Foundation                          0x00ae2cf4 -[NSThread main] + 81
    10  Foundation                          0x00ae2c80 __NSThread__main__ + 1387
    11  libsystem_c.dylib                   0x93393ed9 _pthread_start + 335
    12  libsystem_c.dylib                   0x933976de thread_start + 34
)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:36:38.773

initWithConcurrencyType:NSMainQueueConcurrencyType 是新的 5.0

[http://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/index.html](http://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/index.html)

您需要在使用它之前检查版本。

您将需要检查版本并使用 init 代替早期版本。

# objective-c - 自定义情节提要对象

> ID：10501589
> 
> 赞同：0
> 
> 时间：2012-05-08T15:22:20.860
> 
> 标签：objective-c, ios

我正在尝试创建一个故事板对象，它看起来像一个杠杆并返回一个类似于 UISlider 的数值。控制杆将在屏幕上从上到下移动。我不知道是否需要创建自定义对象（如果需要，我不知道如何）或者是否有更好的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:30:06.587

UISlider图像可以更改，您可以将视图旋转为垂直[。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISlider_Class/Reference/Reference.html)但是，根据您想要完成的具体任务，您可能仍然需要额外的灵活性来创建自己的自定义视图。就个人而言，我会走自定义路线。

网上有很多关于如何实现这一点的教程。一旦你自己试一试，你将有更好的机会在这里得到一个好的答案。然后，您可以返回有关您的代码的更具体的问题。

相关：[垂直 UISliders 和 UISwitches](https://stackoverflow.com/questions/5240710/vertical-uisliders-and-uiswitches)

# view - 从 uipopover 横向切换视图

> ID：10501597
> 
> 赞同：1
> 
> 时间：2012-05-08T15:22:55.437
> 
> 标签：view, orientation, switch-statement, landscape, uipopover

像往常一样，我再次遇到一个非常简单的问题，但在这里压力很大。只是一个简单的案例：我即将在两个视图之间切换，但只能横向（左和右）。实际上，当我使用矩形按钮直接切换并使用相同的方法切换回主视图时，它很容易。但是当我把 uipopover 放在两者之间时，问题就出现了。因此，例如，当我从主视图按下按钮时，在它切换之前，弹出框出现在弹出框内的 rect 按钮，并且在我按下按钮后，出现了第二个视图。这是问题开始的地方。在第二个视图中，当我试图将设备从横向向右放置到横向左侧时，第二个视图只是卡住了，但主视图（在背景中）确实旋转到了指定方向。这是我在两个实现文件中使用的代码：

```
#import "landscapeViewController.h"
#import "popOver.h"

@interface landscapeViewController ()

@end

@implementation landscapeViewController
@synthesize myPopover;

-(IBAction)showPop:(id)sender {
    popOver *popover = [[popOver alloc] init];
    UIPopoverController *pop1 = [[UIPopoverController alloc] initWithContentViewController:popover];
    self.myPopover = pop1;
    [pop1 setDelegate:self];
    [pop1 setPopoverContentSize:CGSizeMake(300,200)];   
    [self.myPopover presentPopoverFromRect:[popbtn bounds] inView:popbtn permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

@end 
```

这是切换视图的代码：

```
-(IBAction)switchView:(id)sender {

    secondView *second = [[secondView alloc] initWithNibName:nil bundle:nil];
    second.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:second animated:YES];
    [self dismissModalViewControllerAnimated:YES];

} 
```

并从第二个视图切换回来：

```
-(IBAction)switchBack:(id)sender {
    landscapeViewController *land = [[landscapeViewController alloc] initWithNibName:nil bundle:nil];
    land.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:land animated:YES];

} 
```

我希望有人可以帮助我。先谢谢了。再次为糟糕的英语感到抱歉。

# javascript - 将过滤条件应用于地图的最简洁方法

> ID：10501598
> 
> 赞同：1
> 
> 时间：2012-05-08T15:23:01.147
> 
> 标签：javascript, jquery, xml, google-maps-api-3

我有一个页面，其中有一个`Google Maps V3`地图和一个带有“过滤器”按钮的 HTML 表单。

我还有一个大的 XML 文件，它具有复杂的结构，其中包含有关每个标记的信息，我将在每个标记的信息框内将其解析为 html。

我能够从 XML 文件中读取和生成标记并将它们绘制在地图上，但我无法集中精力过滤地图上的标记。

**在按下“过滤器”按钮后，过滤地图上标记**的最干净的方法是什么，它将满足我在页面上的 HTML 表单中指定的过滤条件？****

 **到目前为止，我的表单有一个列表框：

`Company`- 根据您选择的公司名称，它应该在地图上显示其所有分支机构。XML 文件包含所有信息（分支地址、lat、lng、电话号码、它所属的公司）。

***XML结构：***

```
<markers>
    <marker>
        <company name="ComapnyName">
            <branches>
                <branch>
                    <address>BranchAddress</address>
                    <phone>BranchAddress</phone>
                    <products>
                        <product>
                            <name>ProductName</name>
                            <url>ProductURL</url>
                        </product>
                        <product />
                        <product />
                        ...
                    </products>
                </branch>
                <branch />
                <branch />
                ...
            </branches>
        </company>
    </marker>
    <marker />
    <marker />
    ...
</markers> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:25:19.480

实现您描述的过滤的直接方法是将标记放入`Array`中，在过滤器设置更改时遍历`Array`，然后关闭**标记**：

```
Marker.setMap( null ); 
```

或**在**：

```
Marker.setMap( map ); 
```

如果您将过滤器视为切换，您可能需要创建一些状态变量来跟踪过滤器设置，以便您也可以编写类似以下的代码：

```
var filterOptionAbcIsOn = false;
function toggleFilters() {
    if ( filterOptionAbcIsOn ) {
        // loop across the Array and turn the markers off
        filterOptionAbcIsOn = false;
    }
    else {
        // loop across the Array and turn the associated markers on
        filterOptionAbcIsOn = true;
    }
} 
```**

# c++ - 在 C++ 中定义 std::string 没有转义字符

> ID：10501599
> 
> 赞同：18
> 
> 时间：2012-05-08T15:23:01.800
> 
> 标签：c++, string, escaping

将未转义的字符序列输入到最简单的方法是`std::string`什么？

代替

```
 std::string st = "C:\\program files\\myFile.txt"; 
```

类似的东西：（由于转义字符而无法正常工作）。

```
 std::string st = "C:\program files\myFile.txt"; 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-08T15:26:28.957

您可以使用 C++11[原始字符串文字](http://en.wikipedia.org/wiki/C%2B%2B11#New_string_literals)来做到这一点：

```
std::string st = R"(C:\program files\myFile.txt)"; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-08T15:26:37.700

对于文件名，只需使用（前进？后退？）另一个方向斜线。它也适用于 Windows：

```
std::string st = "C:/program files/myFile.txt"; 
```

# database - JDBC 相对于 plsql 的优势？

> ID：10501602
> 
> 赞同：1
> 
> 时间：2012-05-08T15:23:22.270
> 
> 标签：database, jdbc, plsql

我正在修改数据库考试。先前提出的问题询问 JDBC 相对于 plsql 的优势，反之亦然？

我发现很容易找到 plsql 优于 Jdbc 的优势，例如：

更好的性能 - 与 PL/SQL 一样，可以一次将整个语句块发送到 Oracle。这可以大大减少数据库和应用程序之间的网络流量。

可移植性——用 PL/SQL 编写的应用程序可以在运行 Oracle 数据库的任何操作系统和平台上运行

生产力——隐式连接处理、集成终止测试、更清晰的参数解析。

严格的安全性——PL/SQL 存储过程将应用程序代码从客户端移动到服务器，您可以在服务器上保护它不被篡改，隐藏内部细节，并限制谁可以访问。

JDBC 与 plsql 相比有什么优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:45:32.977

数据库独立性是使用 JDBC 的一个很好的理由。假设您的 Web 应用程序需要为无法支付 Oracle 费用的客户运行，您需要做多少工作才能移植到开源数据库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:37:06.333

如果您必须对一组数据进行多次计算，则 JDBC 会更好，有时您甚至可以在客户端进行连接，从而使服务器免于执行如此繁重的工作。

# jquery - 浏览器没有响应 destroy.js.erb

> ID：10501604
> 
> 赞同：1
> 
> 时间：2012-05-08T15:23:43.187
> 
> 标签：jquery, ruby-on-rails, activerecord

我有一个管理志愿者和活动的 Rails 3.2.3 应用程序。在我的一个观点中，我正在创建一个链接来破坏志愿者活动。我正在使用数据远程=真。控制器运行正常，Rails 说它正在渲染我的 destroy.js.erb，但文件中的我的脚本没有被调用。我的脚本正在尝试删除 DIV 元素并更新跨度的内容。以下是一些细节：

**我的查看代码：**

```
<%= link_to '', event, method: :delete, confirm: "Are you sure you want to delete this  volunteer posting?", title: event.name, class: "icon-remove", remote: true%> </li> 
```

**我的控制器代码：** ...

```
respond_to  :html, :js

def destroy
    @volunteer_event = VolunteerEvent.find(params[:id])
    @volunteer_event.destroy

    respond_with(@volunteer_event) 

end 
```

**我的 destroy.js.erb**

```
$("#hours_worked_total").html("<%= @volunteer_event.worker.account.total_hours_worked %>")

$("#volunteer_posting-<%=@volunteer_event.id %>")
  .fadeOut ->
      $(this).remove() 
```

**这是视图中生成的 HTML：**

```
<ol class="events">
<div id="volunteer_posting-48">
<li><strong>9808</strong> worked on August  5, 2012 by <i>Louie Ferry</i> for a total of 5 hours. 
<a href="/volunteer_events/48" class="icon-remove" data-confirm="Are you sure you want to delete this volunteer posting?" data-method="delete" data-remote="true" rel="nofollow" title="9808"></a> </li>
</div>
</ol> 
```

**这是服务器日志：**

```
Started DELETE "/volunteer_events/48" for 127.0.0.1 at 2012-05-08 11:17:50 -0400
...
Rendered volunteer_events/destroy.js.erb (2.7ms) 
```

**这是浏览器的请求和响应：**

```
Response:
$("#hours_worked_total").html("0")

$("#volunteer_posting-48")
   .fadeOut ->
   $(this).remove()

Content-Type:text/javascript; charset=utf-8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:31:53.790

您在 erb 文件中使用了 coffeescript。将其重命名为`destroy.js.coffee`，或将其更改如下：

```
$("#hours_worked_total").html("<%= @volunteer_event.worker.account.total_hours_worked %>");

$("#volunteer_posting-<%=@volunteer_event.id %>").fadeOut(function(){
  $(this).remove();
}); 
```

# php - 使用 Apache 的文件上传安全性

> ID：10501607
> 
> 赞同：0
> 
> 时间：2012-05-08T15:23:51.440
> 
> 标签：php, security, file-upload

我相信这个问题很常见：​​您希望允许用户将他们的文件上传到您的服务器。防止安全问题的一种常用技术是检查文件扩展名以防止可执行文件。

但这很无辜，我相信。例如，用户可以上传一个 php 文本文件，以便它可以简单地打印 phpinfo()。它不应该只是 PHP 的问题——它可以是服务器想要自动执行的任何文件。

那么有没有办法配置APACHE，以便有一个安全目录（用于存储静态上传的文件），以便该文件夹中的文件足够安全而不能执行（这意味着当用户请求此类文件时，它们会直接发送到浏览器对服务器没有任何副作用）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:26:39.650

检查文件扩展名是一种无用的技术。考虑某人在做

```
ren nastyvirus.exe cutekittens.jpg 
```

在进行上传之前。

上传最安全的方法是将它们放在站点文档根目录之外的某个位置，这样实际上就不可能指定可以直接访问它们的 URL。唯一的访问将通过您控制的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:31:23.080

安全问题通常不是来自上传，而是来自托管。

托管文件时，您需要

1.  在被监禁的域上提供服务，以便与您的主域相关的任何 cookie 或其他凭据不会泄漏到上传的 HTML/Flash/等。文件。此外，被监禁的域必须是 JavaScript 无法设置`document.domain = ...`为特权域的域。
2.  检查内容并拒绝任何不属于白名单类型的内容。
3.  规范化内容。例如，图像可用于攻击机器，因为大多数图像解码器不如浏览器的图像解码器安全。规范化内容通过用更常见、更好测试的结构替换古怪的结构来减少二进制和文本数据的攻击面。
4.  使用您允许的适当的 mime 类型和编码标头为它提供服务——不要使用 apache 所做的抓取方法来推断 mime 类型。这是防止多语言攻击（如[gifar](http://hackaday.com/2008/08/04/the-gifar-image-vulnerability/)或[gif/JS](http://www.thinkfu.com/blog/gifjavascript-polyglots)或[lcamt​​uf 的 HTML/JPEG 多语言）所必需的](http://lcamtuf.coredump.cx/squirrel/)
5.  让内容远离你的其他东西。信不信由你，仍有人使用`sudo bash`他们`.`的 PATH，并且这种行为会启用[木马](http://en.wikipedia.org/wiki/Trojan_horse_%28computing%29)。它不应该在任何人的 PATH、PYTHONPATH 等上。理想情况下，有一个具有自己的角色帐户的 apache 实例具有读取权限，并且没有其他帐户具有读取权限。如果您的主 apache 实例可以写入但不能读取这些文件，那么它可以上传它们但不能提供它们。
6.  不要让上传者控制文件名。参见上面的木马。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:27:20.657

这足以将您上传的文件保存在 htdocs 路径之外的目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:29:51.453

一开始可能是个坏主意——因为他们可以上传诸如 Javascript 之类的东西，这些东西可以从您自己的域名提供，因此能够在文档对象模型中做任何事情。

可执行病毒通常将自己命名为 kitten.jpg.exe - 由于 Windows 默认隐藏文件名的最后部分，因此它只会显示为“kitten.jpg”，人们会立即下载、单击并运行。

谷歌和雅虎花费了大量的时间和精力来做到这一点——而且他们不允许这样的事情很容易。不要这样做，尤其是不要相信任何你没有明确信任的东西。

如果你真的想这样做——盲目地允许任何人上传他们想要的任何东西而不检查仍然是一个非常糟糕的主意——那么你至少可以关闭 PHP 在 Apache 中运行

```
<IfModule mod_php5.c>
  php_value include_path ".:/usr/local/lib/php"
  php_admin_flag engine on
</IfModule> 
```

# sql-server-2005 - 使用 EXECUTE AS 防止 SQL 注入

> ID：10501608
> 
> 赞同：0
> 
> 时间：2012-05-08T15:23:52.743
> 
> 标签：sql-server-2005

防止 SQL 注入使用`EXECUTE AS`

有人告诉我，防止 SQL 注入的方法之一是在没有登录的情况下创建数据库用户：

```
CREATE USER User1 WITHOUT LOGIN
Go

GRANT DELETE ON T1 to User1
Go

create proc [dbo].[t1]  (@ID  INT)
with execute as 'user1'
as 
begin

    declare @sql as varchar(500)
    SET @sql = 'delete from T WHERE ID = @ID'
    exec (@sql)

end 
```

我的问题是，由于 User1 没有登录权限，我们如何使用上述程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:35:37.953

确实有这样的技术。
您无需登录即可创建用户，为该用户分配精心选择的权限，然后将该用户的上下文应用于存储过程或单个`execute`语句。

因为该用户没有登录名，所以没有人可以直接连接到该用户下的服务器。您也不能直接模拟该用户，因为您没有这样做的权限。在这种情况下，“成为”该用户的唯一方法是执行`execute as`存储过程创建者添加了子句的存储过程或命令（相反，他们确实有权模拟无登录用户）。

虽然这种技术在某些情况下正是您想要的，但我不会使用它来防止您在问题中显示的形式的 SQL 注入。当您必须允许部分受信任的用户提供用于代替对象名称或 SQL 关键字的输入时（即，当用户提供要处理的表的名称时，或者当用户是允许构建自己的`where`条件，然后您将在不分析的情况下执行）。但是对于您在问题中显示的内容，请在客户端使用[参数化语句](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)，并在服务器端使用参数：

```
create proc [dbo].[t1]
  @ID  INT
as 
begin
  delete from T where ID = @ID;
end 
```

（顺便说一句，不好的例子；参数是`int`，所以即使你连接它，SQL 注入也是不可能的。）

# r - 活动记录的平均值

> ID：10501613
> 
> 赞同：0
> 
> 时间：2012-05-08T01:54:00.060
> 
> 标签：r, time-series

我如何找到六个月期间每一天的活跃观察的平均值。数据如下所示：

```
output  start       end
12000   04/01/2012  04/01/2012
2175    11/25/2011  01/22/2012
1800    12/06/2011  01/23/2012
1795    03/23/2012  03/23/2012
1550    04/03/2012  04/20/2012
3400    10/13/2011  01/24/2012
1850    02/27/2012  03/08/2012
2500    11/08/2011  01/24/2012
5350    02/02/2012  04/01/2012
2550    02/09/2012  04/09/2012
8000    11/01/2011  01/22/2012
2725    12/02/2011  01/22/2012
6249    01/12/2012  01/24/2012
1875    01/22/2012  02/28/2012
2550    01/18/2012  01/24/2012
2650    01/28/2012  01/29/2012
2100    11/25/2011  02/21/2012
6900    01/17/2012  02/17/2012
1779    04/21/2012  04/21/2012
4900    11/09/2011  01/22/2012
3250    12/09/2011  01/24/2012
2995    03/14/2012  04/18/2012 
```

因此，对于六个月内的每一天，我想找到当天所有活动观察的平均值。例如，上面的第二个观测值将包含在所有其他活动观测值中，以查找 2011 年 11 月 25 日和 2012 年 1 月 22 日之间日期的平均值。

关于如何实现它的任何见解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:10:35.410

```
start <- as.Date(data$start, "%m/%d/%Y")
end <- as.Date(data$end, "%m/%d/%Y")
period <- as.Date(min(start):max(end), origin = "1970-01-01")
averages <- sapply(period, function(x) mean(data[x >= start & x <= end, 'output']))
data.frame(period, averages) 
```

# asp.net-mvc-3 - JQuery Mobile Multipage 功能不适用于 ASP.Net MVC 3

> ID：10501618
> 
> 赞同：0
> 
> 时间：2012-05-08T15:24:11.333
> 
> 标签：asp.net-mvc-3, jquery-mobile

我正在尝试使用 jquery mobile 的简单多页功能，但它不适用于我的 ASP.Net MVC 3 test.cshtml 页面。以下是页面的来源。谁能帮我这个？

```
@{
ViewBag.Title = "TestPage For Multiple Page";
Layout = "";   
}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>@ViewBag.Title</title>
<meta name="viewport" content="width=device-width" />
<link href="@Url.Content("~/Content/jquery.mobile-1.1.0.min.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.6.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.mobile-1.1.0.min.js")" type="text/javascript"></script>
</head>
<body>
<div data-role="page" id="main" data-theme="a">
    <div data-role="header">
    </div>
    <div data-role="content">
        some content <a href="#linkdiv">Test</a>
    </div>
    <div data-role="footer">
    </div>
</div>
<div data-role="page" data-theme="a" id="linkdiv">
    <div data-role="header">
    </div>
    <div data-role="content">
        Testing
    </div>
    <div data-role="footer">
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:37:39.163

将 target = "_self" 属性添加到调用页面的 <a> 标记，解决了该问题。如果您在 PageB 中使用多页，请确保 PageA 的 @Html.ActionLink("PageB") 设置了 target = "_self"。

# c# - 单引号被替换为 #34 的引号

> ID：10501620
> 
> 赞同：-2
> 
> 时间：2012-05-08T15:24:43.063
> 
> 标签：c#, string

我有以下代码。

当此代码发送到浏览器时，单引号将被替换为 & #39;

澳交所

```
<a runat="server" id="lnkPlay" href="#" >Play</a> 
```

背后的代码

```
 string onClickText = 
         "javascript:changeSrc('http://www.url.com/m/25_03_2012-Paul_R.mp3','Paul Robbins','25/03/2012');";

  lnkPlay.Attributes.Add("onClick", onClickText); 
```

在 html 中变成这个

```
 <a href="UserControls/#" id="BodyContent_MainContent_CtrlMesssageSummary_lnkPlay" rel="test" onClick="javascript:changeSrc(&#39;http://www.url.com/m/25_03_2012-Paul_R.mp3&#39;,&#39;Paul Robbins&#39;,&#39;25/03/2012&#39;);">

                Play</a> 
```

我该如何阻止这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:31:44.400

您需要使用转义字符转义单引号，如下所示：

```
javascript:changeSrc(\'http://www.url.co.uk/\',\'Text\',\'25/03/2012\'); 
```

根据[本文](http://qualitypoint.blogspot.co.uk/2009/05/handling-single-quotes-in-php-and.html)，如果上述方法不起作用，请尝试逃避/替换`"&#39;"`

# c# - MVC3：C# 表单身份验证和会话状态

> ID：10501621
> 
> 赞同：4
> 
> 时间：2012-05-08T15:24:44.127
> 
> 标签：c#, asp.net-mvc, session-state

我想知道在 MVC 中处理和实现会话超时的最佳方法。我已经设置了我的应用程序，以便在用户进行身份验证时它可以处理“RememberMe”。我还将一些变量存储在`Context.Session["myvar"];`

当我的会话已过期但我的身份验证 cookie 尚未过期时，我遇到了问题。

我的第一个想法是根据操作请求检查会话统计信息；但这似乎是很多代码。有没有一个检查会话状态的好地方？处理会话超时的其他方法是什么？我希望在会话超时时将用户重定向到登录页面。或者如果用户仍然登录，则重新加载会话变量。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T15:26:11.360

> 有没有检查会话状态一次的好地方

当然，自定义 Authorize 属性看起来是个好地方：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authroized = base.AuthorizeCore(httpContext);
        if (!authroized)
        {
            // the user is not authenticated or the forms authentication
            // cookie has expired
            return false;
        }

        // Now check the session:
        var myvar = httpContext.Session["myvar"];
        if (myvar == null)
        {
            // the session has expired
            return false;
        }

        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:42:07.530

在 global.asax.cs 中，您可以添加 SessionStart 处理程序

```
protected void Session_Start(object sender, EventArgs e)
{
    if (this.Context.User != null && this.Context.User.Identity != null
        && this.Context.User.Identity.IsAuthenticated)
    {
        // Got user from authentication cookie (remember me).

        // here you can either re-instantiate user in your application/session
        // so he/she will be logged-in automatically (which is remember me functionality)
        // The username is in this.Context.User.Identity.Name

        // Or redirect user to login page if you need manual login
    }
} 
```

# sql - 返回超过指定值的简单查询

> ID：10501622
> 
> 赞同：2
> 
> 时间：2012-05-08T15:24:46.760
> 
> 标签：sql

我有一个数据列表，其数字范围为 1-500 - 11-500。我创建了一个查询来过滤除 2-500 之外的所有内容。但我仍然看到 1-500、2-500 和 3-500。不确定我的查询有什么问题。查询太简单了，搞砸了？！

示例查询：

```
 SELECT job_no, job_name
    FROM JC_JOB
    WHERE job_no like '2-5%' 
```

实际查询：

```
SELECT  w.wrkordnbr
        , rtrim(w.jcjob) + ' ' + s.name
        , w.centernbr
        , w.status
        , w.servsitenbr
        , w.dept
        , s.address
        , s.city 
FROM    wrkorder w, servicesite s 
WHERE   s.servsitenbr = w.servsitenbr 
AND     status NOT IN(1,2,3,4,5,6) 
AND     s.name LIKE '2-5% 
```

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:06:52.110

我很抱歉，但我不相信你。如果实际上您的数据与您描述的一样，则查询应仅返回以 2-5.. 开头的任何内容。

```
declare @jobs as table
(job_no varchar(20))

insert into @jobs
values (
'1-500'
),('2-500'),('3-500'),('100-500'),('120-500'),('200-500')

SELECT job_no
    FROM @jobs
    WHERE job_no like '2-5%' 
```

回报：

```
job_no
2-500 
```

例如，如果您的数据有 job_no `112-500`，而您的`Where`子句是 this ，`where job_no like '%2-5%'`那么它会返回如下内容是有意义的：

```
job_no
2-500
112-500 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:01:00.007

关于什么

```
SELECT job_no, job_name
FROM JC_JOB
WHERE job_no BETWEEN ('2-5') and ('2-6') 
```

我没试过

# python-2.7 - 在联系信息类中存储字段时遇到问题

> ID：10501628
> 
> 赞同：0
> 
> 时间：2012-05-08T15:25:13.170
> 
> 标签：python-2.7

我正在尝试编写一个存储人名和号码的类。

```
class Contact(object)
    def __init__(self, name, number)
        self._name = name
        self._number = number

    def getNumber(self):
        return self._number

    def setNumber(self, newNumber):
        self._number = newNumber

    def numberUpdate(self):
        newNumber = number
        self.setNumber(newNumber)

    def action(self):

        person = Contact("Jonathan")

        number = input("What's your number: ")
        person.numberUpdate()

person = Contact()
Contact.action(person) 
```

它提示我输入我希望的号码。但是在我输入数字后，它一直给我这个错误：

```
NameError: global name 'number' is not defined 
```

谁能告诉我我在这里做错了什么？我试过了：

```
 def numberUpdate(self, number):
    newNumber = number
    self.setNumber(newNumber)

def action(self):

    person = Contact("Jonathan")

    number = input("What's your number: ")
    person.numberUpdate(number) 
```

它给了我：

```
TypeError: numberUpdate() takes exactly 2 arguments (1 given) 
```

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:40:47.780

### 一般建议

Contact 类的设计在很多方面被破坏（例如，该`action()`方法不应该在 Contact 类中实例化一个新的 Contact 对象）。

看起来您的联系人类旨在存储一个名称和一个具有该名称的号码。您不应在`action()`方法中指定特定名称，而应允许该类存储任何人的名称。处理`__init__`方法中名称的存储，或使用 setter 方法。

此外，你真的应该重命名你的`action()`方法——这个名字并没有暗示它的结果是什么。您调用该`action()`方法的语法也是错误的。

### 首要问题

基本上，您遇到问题是因为您不了解一些面向对象编程的基础知识。我建议不要在每个错误中苦苦挣扎，而是花一些时间阅读对象和类的工作原理。

# tcl - 创建一个只支持我提供的命令的 TCL 解释器

> ID：10501630
> 
> 赞同：5
> 
> 时间：2012-05-08T15:25:15.107
> 
> 标签：tcl, interpreter, sandbox

假设我已经定义了 proc f1 proc f2 和 proc f3。现在我想创建一个 TCL 解释器，将 proc f1 proc f2 和 proc f3 的代码源到该解释器中，并限制除 f1、f2 和 f3 之外的所有命令都在该解释器中。我怎么能这样做？

编辑：

如果在解释器中调用了除 f1、f2 和 f3 之外的命令，我创建了一条错误消息，并执行源自解释器的代码（假设在获得带有 f1、f2 和 f3 procs 的代码）应该停止。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T16:59:44.207

你不能*完全*做到这一点，但你可以做一些对于大多数目的来说足够相似的事情。

您应该做的是在解释器中正常创建命令 f1、f2 和 f3，然后创建一个根本没有 Tcl 命令的子解释器，并将您希望在该子解释器中公开的命令别名为命令在父母。

```
# First define f1-f3 in whatever way you want

# Now make the context; we'll use a safe interpreter for good measure...
set slave [interp create -safe]

# Scrub namespaces, then global vars, then commands
foreach ns [$slave eval namespace children ::] {
    $slave eval namespace delete $ns
}
foreach v [$slave eval info vars] {
    $slave eval unset $v
}
foreach cmd [$slave eval info commands] {
    # Note: we're hiding, not completely removing
    $slave hide $cmd
}

# Make the aliases for the things we want
foreach cmd {f1 f2 f3} {
    $slave alias $cmd $cmd
}

# And evaluate the untrusted script in it
catch {$slave invokehidden source $theScript}

# Finally, kill the untrusted interpreter
interp delete $slave 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T20:09:24.000

这是一个简单的解决方案：逐行读取输入。如果第一个标记是 f1、f2 或 f3，则执行命令，按`Control`+`C`或键入`exit`退出循环：

```
proc f1 {args} { puts "f1:$args" }
proc f2 {args} { puts "f2:$args" }
proc f3 {args} { puts "f3:$args" }

while 1 {
    puts -nonewline ">"
    flush stdout
    gets stdin line
    set firstToken [lindex $line 0]
    if {[lsearch {f1 f2 f3 exit} $firstToken] != -1} {
        eval $line
    }
} 
```

这个解决方案有几个问题：

1.  eval被认为是危险的
2.  没有太多的编辑能力，你可能想要花哨并使用 tclreadline 包

尽管存在这些缺点，但该解决方案实施起来非常简单。

# visual-studio-2010 - 警告 C4819：如何找到必须以 unicode 保存的字符？

> ID：10501634
> 
> 赞同：24
> 
> 时间：2012-05-08T15:25:27.153
> 
> 标签：visual-studio-2010

我最近通过我的 VS2010 看到了以下警告。

警告 21 警告 C4819：文件包含当前代码页 (936) 中无法表示的字符。以 Unicode 格式保存文件以防止数据丢失

```
c:\boost\vs2010_boost1.49\include\boost\format\alt_sstream_impl.hpp 1 
```

基于[MSDN](http://msdn.microsoft.com/en-us/library/ms173715.aspx)，该文件包含一个必须以 unicode 格式保存的字符。

问题：我自己没有接触这些文件。有没有办法可以找到这些字符并手动更正。换句话说，我不想以 unicode 格式保存源文件。

谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-08T15:41:23.710

您可以使用[Notepad++](http://notepad-plus-plus.org/)使用正则表达式查找文件中的所有 Unicode 字符：

1.  在记事本++中打开您的文件。
2.  确保从“*编码*”菜单中选择*UTF-8 。*
**   打开搜索框（使用*CTRL-F*或转到*搜索*菜单并选择*查找...*）。*   在搜索模式下，选择*正则表达式*的单选按钮。*   `[^\x00-\x7F]`在“*查找内容*”框中输入内容，然后单击“查找下一个”按钮以查看您得到的内容。*

 *找到 Unicode 字符后，您可以删除/更改它们，将编码更改回 ANSI，然后保存文件。

当然，您不必使用 Notepad++。RegEx 将在其他文本编辑器中工作，例如[Sublime Text](http://www.sublimetext.com/3)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-17T01:54:52.603

我在我的项目中遇到了这个问题，并试图修改所有非 unicode 字符。但是我不得不放弃并找到了另一种方法，因为有太多文件存在这样的问题（即使它们都在评论中）。

然后我找到了一种通过设置“系统区域设置”来解决此问题的快速方法。

```
Control Panel -> Clock,Language,and Region -> Region and Language -> 
Administrative -> Language for non-Unicode programs -> Change system locale -> English 
```

如果您的“系统语言环境”不是英语，我认为这可以解决您的问题。

[https://stackoverflow.com/a/37871883/3148107](https://stackoverflow.com/a/37871883/3148107)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-24T22:10:34.390

您可以在 Visual Studio 中使用上面显示的正则表达式来定位这些字符。这是正则表达式：`[^\x00-\x7F]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T03:24:42.447

在第 176 行：

```
BOOST_ASSERT(0); // §27.4.3.2 allows undefined-behaviour here 
```

你看，上面一行的 27 之前有一个字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-16T13:06:20.507

基本上，您可能已经编译了一个以另一个字符集编码的文件，该字符集不是您操作系统的默认字符集。一种方法是删除那些无法通过默认编码解码的字符，但我更喜欢另一种方法，即使用 Notepad++ 对文件进行转码。要实现此目标，请单击**Encoding->Convert To xxx**，其中 xxx 是您的操作系统默认编码。*

# php - htaccess 吃掉会话变量？

> ID：10501635
> 
> 赞同：0
> 
> 时间：2012-05-08T15:25:42.187
> 
> 标签：php, .htaccess

我对重写规则有疑问，它似乎“吃掉”了我设置的会话变量。这是htaccess的内容

```
AddHandler phpini-cgi .php
Action phpini-cgi /cgi-bin/php5-custom-ini.cgi

Options +FollowSymLinks
Options +Indexes
RewriteEngine On
RewriteBase /
RewriteRule ^([^.]+)/?$ /index.php?page=$1 [L] 
```

似乎每当我存储会话变量时，当我在页面之间单击时它们都不存在。我上面的代码中有什么想法，是什么原因造成的以及如何修改它才能工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:30:04.977

如果要将会话 ID 附加到 URL，则可以添加`QSA`标志：

```
RewriteRule ^([^.]+)/?$ /index.php?page=$1 [L,QSA] 
```

所以它不会删除任何 GET 变量。

# asp.net-mvc - asp.net mvc3，如何使数据注释验证可选？

> ID：10501636
> 
> 赞同：0
> 
> 时间：2012-05-08T15:25:43.113
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-annotations

我有一个审查表。它有 4 个字段，标题、类别、链接和评论

如果类别是网站，则需要链接。如果是书，链接是可选的，不是必需的。如何验证链接字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:30:12.623

查看[以下博客文章](http://blogs.msdn.com/b/simonince/archive/2011/09/29/mvc-validationtookit-alpha-release-conditional-validation-with-mvc-3.aspx)，其中说明了一些自定义验证器，例如`RequiredIf`允许您实现此条件验证。

或者，如果您像我一样更喜欢命令式验证逻辑而不是声明式，只需使用[FluentValidation.NET](http://fluentvalidation.codeplex.com/)，这使得该验证场景非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:30:42.440

您可以检查[Mvc.ValidationTookit](http://blogs.msdn.com/b/simonince/archive/2011/09/29/mvc-validationtookit-alpha-release-conditional-validation-with-mvc-3.aspx)。

它具有条件要求的验证

# .net - 使用 WinDbg 在 WinCE 设备上调试 .NET 应用程序中的 AccessViolation

> ID：10501637
> 
> 赞同：0
> 
> 时间：2012-05-08T15:25:46.530
> 
> 标签：.net, compact-framework, windows-ce, windbg

我正在调试客户端的 .NET 2.0 WinCE (6.0) 应用程序的崩溃。我已经从设备中提取了 .kdmp 并在 WinDbg 中打开，但老实说，我不太清楚我在寻找什么。我可以看到这是关闭应用程序的访问冲突，但这就是我能说的全部。任何有关使用 WinDbg for .NET Compact Framework 的技巧都值得赞赏。我没有使用该工具的经验。

这是来自的输出`!analyze -v`

```
*******************************************************************************
*                                                                             *
*                      Win CE Exception Analysis                              *
*                                                                             *
*******************************************************************************

Debugging Details:
------------------

GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
Unable to get program counter
TRIAGER: Could not open triage file : C:\Program Files\Windows Kits\8.0\Debuggers\x86\triage\guids.ini, error 2
SYMSRV:  C:\Program Files\Windows Kits\8.0\Debuggers\x86\sym\ole32.dll\4D7757B97a000\ole32.dll not found
SYMSRV:  C:\Program Files\Windows Kits\8.0\Debuggers\x86\sym\ole32.dll\4D7757B97a000\ole32.dll not found
SYMSRV:  http://msdl.microsoft.com/download/symbols/ole32.dll/4D7757B97a000/ole32.dll not found
DBGHELP: C:\Program Files\Windows Kits\8.0\Debuggers\ole32.dll - file not found
DBGHELP: C:\Program Files\Windows Kits\8.0\Debuggers\ole32.dll - file not found
SYMSRV:  http://msdl.microsoft.com/download/symbols/ole32.dll/4D7757B97a000/ole32.dll not found
SYMSRV:  C:\Program Files\Windows Kits\8.0\Debuggers\x86\sym\ole32.dll\4D7757B97a000\ole32.dll not found
DBGHELP: C:\Program Files\Windows Kits\8.0\Debuggers\ole32.dll - file not found
DBGHELP: C:\Program Files\Windows Kits\8.0\Debuggers\ole32.dll - file not found
DBGHELP: C:\Program Files\Windows Kits\8.0\Debuggers\ole32.dll - file not found
DBGHELP: C:\Program Files\Windows Kits\8.0\Debuggers\ole32.dll - file not found
DBGHELP: ole32.dll not found in c:\documents and settings\thomas carvin\desktop\scanner\bin\debug
DBGHELP: ole32.dll not found in c:\documents and settings\thomas carvin\desktop\scanner\bin\debug
DBGENG:  ole32.dll - Image mapping disallowed by non-local path.
Unable to load image ole32.dll, Win32 error 0n2
DBGENG:  ole32.dll - Partial symbol image load missing image info
DBGHELP: No header for ole32.dll.  Searching for dbg file
DBGHELP: c:\documents and settings\thomas carvin\desktop\scanner\bin\debug\ole32.dbg - file not found
DBGHELP: c:\documents and settings\thomas carvin\desktop\scanner\bin\debug\dll\ole32.dbg - path not found
DBGHELP: c:\documents and settings\thomas carvin\desktop\scanner\bin\debug\symbols\dll\ole32.dbg - path not found
DBGHELP: .\ole32.dbg - file not found
DBGHELP: .\dll\ole32.dbg - path not found
DBGHELP: .\symbols\dll\ole32.dbg - path not found
DBGHELP: ole32.dll missing debug info.  Searching for pdb anyway
DBGHELP: c:\documents and settings\thomas carvin\desktop\scanner\bin\debug\ole32.pdb - file not found
DBGHELP: c:\documents and settings\thomas carvin\desktop\scanner\bin\debug\dll\ole32.pdb - file not found
DBGHELP: c:\documents and settings\thomas carvin\desktop\scanner\bin\debug\symbols\dll\ole32.pdb - file not found
DBGHELP: ole32.pdb - file not found
*** WARNING: Unable to verify timestamp for ole32.dll
*** ERROR: Module load completed but symbols could not be loaded for ole32.dll
DBGHELP: ole32 - no symbols loaded
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
GetContextState failed, 0x80070570
Unable to get program counter
GetContextState failed, 0x80070570
GetContextState failed, 0x80070570
Unable to get current machine context, Win32 error 0n1392
TRIAGER: Could not open triage file : C:\Program Files\Windows Kits\8.0\Debuggers\x86\triage\modclass.ini, error 2

FAULTING_IP: 
+0
80428ca8 e5913010 ldr         r3,[r1,#0x10]

EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 80428ca8
   ExceptionCode: c0000005 (Access violation)
  ExceptionFlags: 00000000
NumberParameters: 2
   Parameter[0]: 00000000
   Parameter[1]: 00000010
Attempt to read from address 00000010

FAULTING_THREAD:  0cf2001a

ERROR_CODE: (NTSTATUS) 0xc0000005 - The instruction at "0x%08lx" referenced memory at "0x%08lx". The memory could not be "%s".

EXCEPTION_CODE: (NTSTATUS) 0xc0000005 - The instruction at "0x%08lx" referenced memory at "0x%08lx". The memory could not be "%s".

EXCEPTION_PARAMETER1:  00000000

EXCEPTION_PARAMETER2:  00000010

READ_ADDRESS:  00000010 

FOLLOWUP_IP: 
+0
80428ca8 e5913010 ldr         r3,[r1,#0x10]

CE_DEVLOG: <ANALYSIS>
    <CELG_NAME>OEM</CELG_NAME>
    <CELG_VALUE>MOTOROLA MC3100R</CELG_VALUE>
</ANALYSIS>

CE_DEVLOG: <ANALYSIS>
    <CELG_NAME>Build</CELG_NAME>
    <CELG_VALUE>0</CELG_VALUE>
</ANALYSIS>

CE_DEVLOG: <ANALYSIS>
    <CELG_NAME>RAM</CELG_NAME>
    <CELG_VALUE>135143424</CELG_VALUE>
</ANALYSIS>

CE_DEVLOG: <ANALYSIS>
    <CELG_NAME>FreeRAM</CELG_NAME>
    <CELG_VALUE>107048960</CELG_VALUE>
</ANALYSIS>

CE_DEVLOG: <ANALYSIS>
    <CELG_NAME>Store</CELG_NAME>
    <CELG_VALUE>83693568</CELG_VALUE>
</ANALYSIS>

CE_DEVLOG: <ANALYSIS>
    <CELG_NAME>FreeStore</CELG_NAME>
    <CELG_VALUE>54960128</CELG_VALUE>
</ANALYSIS>

APP:  scanner.exe

IP_ON_HEAP:  8042c0e0

ADDITIONAL_DEBUG_TEXT:  Followup set based on attribute [Is_ChosenCrashFollowupThread] from Frame:[0] on thread:[PSEUDO_THREAD]

LAST_CONTROL_TRANSFER:  from 8042c0e0 to 80428ca8

DEFAULT_BUCKET_ID:  STACKIMMUNE

PRIMARY_PROBLEM_CLASS:  STACKIMMUNE

BUGCHECK_STR:  APPLICATION_FAULT_STACKIMMUNE_NULL_CLASS_PTR_READ_ZEROED_STACK

FRAME_ONE_INVALID: 1

STACK_TEXT:  
00000000 00000000 scanner.exe!Unknown+0x0

SYMBOL_STACK_INDEX:  0

SYMBOL_NAME:  scanner.exe!Unknown

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: scanner

IMAGE_NAME:  scanner.exe

DEBUG_FLR_IMAGE_TIMESTAMP:  0

STACK_COMMAND:  ** Pseudo Context ** ; kb

FAILURE_BUCKET_ID:  STACKIMMUNE_c0000005_scanner.exe!Unloaded

BUCKET_ID:  ARM_APPLICATION_FAULT_STACKIMMUNE_NULL_CLASS_PTR_READ_ZEROED_STACK_scanner.exe!Unknown

Followup: MachineOwner 
```

这是未汇编的指令和加载的模块

```
1:000:armce> u 80428ca8
80428ca8 e5913010 ldr         r3,[r1,#0x10]
80428cac e3530001 cmp         r3,#1
80428cb0 0a000005 beq         80428ccc
80428cb4 e3530002 cmp         r3,#2
80428cb8 1a00000c bne         80428cf0
80428cbc e1a03004 mov         r3,r4
80428cc0 e2802010 add         r2,r0,#0x10
80428cc4 eb000830 bl          8042ad8c
1:000:armce> lm
start    end        module name
00010000 00074000   scanner   (deferred)             
40010000 400a6000   coredll    (deferred)             
400b0000 400c2000   fpcrt      (deferred)             
40120000 4012d000   zlib       (deferred)             
40140000 401a5000   commctrl   (deferred)             
40290000 402a0000   iphlpapi   (deferred)             
402b0000 402bd000   ws2        (deferred)             
402c0000 402c6000   wspm       (deferred)             
402d0000 402d6000   nspm       (deferred)             
402f0000 402fb000   ssllsp     (deferred)             
40380000 403ba000   netui      (deferred)             
40400000 40405000   lpcrt      (deferred)             
404b0000 404b7000   secur32    (deferred)             
405f0000 4066a000   ole32      (deferred)             
40670000 406a5000   oleaut32   (deferred)             
406d0000 40722000   rpcrt4     (deferred)             
40730000 4078b000   imaging    (deferred)             
419b0000 419c2000   mscoree    (deferred)             
41e30000 41e5b000   rsaenh     (deferred)             
41f30000 41f37000   rcm2api32   (deferred)             
41f40000 41f53000   edbgtl     (deferred)             
41f70000 41f7f000   tcpconnectiona   (deferred)             
41f80000 41fbd000   netcfagl2_0   (deferred)             
41fc0000 41fd0000   sqlceme30   (deferred)             
42010000 420db000   mscoree2_0   (deferred)             
42160000 42184000   sqlceer30en   (deferred)             
80400000 80420000   NK         (deferred) 
```

以及来自 CE Watson Dump Viewer 的信息

![enter iDump Info](../Images/50bb3fd998d45688ec314fdc983dad7c.png)

![Processes](../Images/e980cff82811ddd80f10f4d5bd13ad43.png)

![Modules](../Images/e990f3c7989b7175461b4cf7f328bcd3.png)

![Callstack](../Images/59de0c24dea518ca9e991d425172f4e4.png)

![内存块](../Images/2cafc3dd6d153d13f80ef3bf5f65bb3f.png)

![线程](../Images/6bcd8d9a1c99a0e1dc58a6ad8f2536f5.png)

在这一点上，我主要是在寻找方向。如果有人可以说这个问题是由于应用程序、依赖库或设备/操作系统引起的，那将是一个很好的起点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:44:48.230

凉爽的！我喜欢从 x86/x64 以外的架构中看到崩溃转储 :)

我对调试 CR ARM 的经验为零，但是我可以从这里破译几件事：

> GetContextState 失败，0x80070570

一般来说，这些错误是不好的，意味着转储文件以某种方式损坏。

这是您的错误说明：

> ldr r3,[r1,#0x10]

而且，根据您的异常记录，发生崩溃是因为您尝试引用地址 0x10：

> 尝试从地址 00000010 读取

因此，r1 在前一条指令中必须为零。通常，当您看到此模式时，它是对数据结构的 NULL 指针的取消引用，因此 0x10 是您尝试访问的数据结构的字段的偏移量。

不幸的是，堆栈从那里是垃圾（有一些迹象表明它以某种方式归零），因此很难从那里获得更多细节。以下命令是否显示任何信息？

```
u 80428ca8
lm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T00:56:06.037

降落在内核中间是最糟糕的，因为很难弄清楚你在哪里以及你是如何到达那里的。不幸的是，很难获得调试符号，因为它们对于每个平台都是独一无二的——你必须从摩托罗拉获得它们，而不是从微软获得。

ARM 处理器的约定是将当前叶函数的返回地址存储在链接寄存器中，`lr`. 每个函数的序言负责将此寄存器的值存储在不会被它调用的任何函数丢弃的位置。为了能够展开堆栈，如果发生硬件异常，Windows CE 要求序言采用特定形式。虚拟展开器算法在[ARM Prolog 和 Epilog](http://msdn.microsoft.com/en-us/library/ms881423.aspx)中进行了描述（“虚拟”是因为 Windows 异常处理在发现异常的实际处理程序之前*实际上*不会展开堆栈，但它只能通过遍历堆栈来*找到该处理程序）。*您可以按照该算法自行返回堆栈。

该链接上的[示例](http://msdn.microsoft.com/en-us/library/ms881424.aspx)实际上非常不典型-代码仅在为 C/C++ 可变参数函数保存任何持久寄存器之前将 r0-r3 保存在堆栈上。这样它们就在任何其他参数旁边。Windows CE ARM 调用约定将前四个参数传递给寄存器 r0-r3 中的函数，然后是堆栈中的第五个和后续参数。因此，使用的函数`va_args`必须将前四个压入堆栈，与其他函数相邻，因此它可以将所有参数视为相同。

Normally, an ARM function will start with a `stmdb` (STore Multiple, Decrement Before) instruction that stores all the volatile registers overwritten by the function. This instruction isn't used very often in normal code, so the `stmdb` is nearly always the first instruction of the function. You can therefore work out from that instruction, and from the stack, what the value of `lr` was and therefore where to return to. You can then repeat that for each method until you get somewhere recognizable. Hopefully this will be in an import section of a DLL, but it's probable that it will be in mscoree2_0.dll or netcfagl2_0.dll. You will probably need to search a disassembly of the Compact Framework assemblies to find what managed code called into that native entry point.

# ms-access - 当我应用过滤器（如“本周”）时，如何确定 Access 使用的是什么代码？“另存为查询”已禁用

> ID：10501642
> 
> 赞同：1
> 
> 时间：2012-05-08T15:26:06.030
> 
> 标签：ms-access, ms-access-2007

我有一个包含 2 个日期字段的表格，IN 和 OUT。我想过滤 OUT = "Null" 和 IN = 'This Week"

通过使用 Access 的列标题中的内置下拉过滤选项，这非常容易。

但我想在 VBA 中使用它。

我不想编写自己的代码（使用 datepart 或 datediff），而是想“保存”我手动创建的过滤器，并在打开/更新表时使用它。

我可以查看 Access 正在使用的过滤器代码吗？或者我可以在 VBA 中以类似于 DoCmd.applyFilter 的方式应用“本周”过滤器，（[IN] 是“本周”）

当然我可以应用访问的内置过滤器而不是创建自定义过滤器？

# r - 将 txt 文件读入 R 时遇到问题，其中列由 || 分隔

> ID：10501644
> 
> 赞同：2
> 
> 时间：2012-05-08T15:26:07.827
> 
> 标签：r

我在尝试读取由 561366 行和 15 列组成的 .txt 文件时遇到问题。第一行看起来像这样：

```
 70000||Consumer A||23||DN||70000||10038782||1||SI||2||NO||0||N/A||0||N/A||1
  90000||Consumer B||23||DN||90000||15402432||1||SI||2||NO||0||N/A||0||N/A||1 
  .
  .
  . 
```

我用于读取文件的代码是：

```
 Datos <- read.table("C:/Users/hernandezn/Desktop/DataSets/INACTIVOS.txt", 
  header=FALSE, sep="|", na.strings="N/A", dec=".", strip.white=TRUE) 
```

如您所见，我的列由 分隔`"||"`，但我不能在 R 命令中使用它`read.table`作为`sep`选项。所以，我已经使用`sep="|"`并且必须为此付出代价（现在我有 29 列）。

问题是我只是从文件中的 561366 中得到 241116 行。另一方面，我尝试通过替换`"||"`符号`;`并将其保存为 .xlsx 文件来读取此文件，并且我以这种方式获取所有行。

你能建议我解决这个问题的方法吗？会不会是内存问题？我在具有 2GB 内存 RAM 的计算机上运行 32 位 R 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:41:38.270

我认为`sep=`字符的长度必须为 1。因此，您可以简单地调用外部命令（如`sed`或`perl`）来替换两个字符`||`，或者在 R 中自己执行。

这是一个概念验证单线，它首先切换`||`到`,`（作为`|`元字符，我们需要对其进行转义，并转义转义字符`\`）：

```
R> read.csv(textConnection(gsub("\\|\\|", ",", "70000||Consumer A||23||DN||70000||10038782||1||SI||2||NO||0||N/A||0||N/A||1\n90000||Consumer B||23||DN||90000||15402432||1||SI||2||NO||0||N/A||0||N/A||1")), header=FALSE)
     V1         V2 V3 V4    V5       V6 V7 V8 V9 V10 V11 V12 V13 V14 V15
1 70000 Consumer A 23 DN 70000 10038782  1 SI  2  NO   0 N/A   0 N/A   1
2 90000 Consumer B 23 DN 90000 15402432  1 SI  2  NO   0 N/A   0 N/A   1
R> 
```

或者可能在两行中更清晰：

```
R> txt <- "70000||Consumer A||23||DN||70000||10038782||1||SI||2||NO||0||N/A||0||N/A||1\n90000||Consumer B||23||DN||90000||15402432||1||SI||2||NO||0||N/A||0||N/A||1"
R> read.csv(textConnection(gsub("\\|\\|", ",", txt)), header=FALSE)
     V1         V2 V3 V4    V5       V6 V7 V8 V9 V10 V11 V12 V13 V14 V15
1 70000 Consumer A 23 DN 70000 10038782  1 SI  2  NO   0 N/A   0 N/A   1
2 90000 Consumer B 23 DN 90000 15402432  1 SI  2  NO   0 N/A   0 N/A   1
R> 
```

# forms - 创建一个外观和验证类似于 Web 表单的自定义表单

> ID：10501650
> 
> 赞同：0
> 
> 时间：2012-05-08T15:26:29.057
> 
> 标签：forms, validation, drupal, drupal-webform

编辑：意外发布未完成的问题。

我需要一个自定义表单，其外观和响应与 webforms 表单相同。

我有一个 drupal 网站，它需要一个自定义表单来绑定到 ZOHO CRM（发送潜在客户）。

我在网站的其余部分使用网络表单，但是我无法使用网络表单，因为我需要自定义表单的操作、类和 ID 以将数据发送到 ZOHO。

我希望我的自定义表单看起来和验证类似于 webforms 表单以保持一致性。我无法实现相同的验证。

我还没有找到一篇关于这个的清晰而简单的文章，它看起来很基础，也许我想多了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:34:16.497

查看 Drupal 的表单 API： [http ://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7)

如果你愿意，你可以连接到一个网络表单： [http ://api.lullabot.com/group/webform_hooks/7](http://api.lullabot.com/group/webform_hooks/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:46:31.000

按照 tmsimont 的建议使用 Form API。

采用

```
function yourmodule_form(){        
  $form['search_field'] = array(
  '#title' => t(''),
  '#type' => 'textfield',
  '#size' => '18',
  '#default_value' => $form_text,
);

$form['submit'] = array(
  '#type' => 'submit',
  '#value' => t('Buscar'),
);

//then to do your custom validation!
your_module_form_validate(&$form, &$form_state)
{
  if(strlen($form_state['values']['search_field'])<3)
  {
    form_set_error('search_field', t("Search term too small."));
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T15:38:30.030

GOOGLE "JQuery Validate" 看看例子

# javascript - 将 iframe 内容另存为 XML

> ID：10501657
> 
> 赞同：0
> 
> 时间：2012-05-08T15:26:41.240
> 
> 标签：javascript, jquery, xml, iframe

让我们假设我将一个有效的 xml 字符串作为 iframe 的主体。

有什么方法可以从客户端将其保存为 xml 文件。例如，创建指向 iframe 的链接，右键单击该链接并选择“目标另存为”或类似内容。也许使用javascript？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:29:52.050

我可能错了，但我相信存在安全限制，阻止 DOM 访问 iframe 中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:31:28.897

回发到服务器，并添加`Content-Disposition: attachment; filename=1234.xml`标题。

# javafx-2 - JavaFX 2 TreeItem 中节点的模型标识符

> ID：10501661
> 
> 赞同：1
> 
> 时间：2012-05-08T15:26:52.630
> 
> 标签：javafx-2

有没有办法将模型对象的标识符或模型对象本身存储在 JavaFX 2 中`TreeItem<String>`？只是`Value`存储文本...

我正在`TreeView`从模型对象列表中填充一个，并且需要在用户单击一个节点时找到它。我习惯于使用 .NET Windows 窗体或 HTML 并在其中工作，`Value`恐怕`Text`我无法将这种思维方式适应 JavaFX ......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T16:57:02.593

您可以将任何对象与 TreeView 一起使用，它们只需要覆盖即可`toString()`呈现或扩展`javafx.scene.Node`

例如下一节课：

```
private static class MyObject {
    private final String value;
    public MyObject(String st) { value = st; }

    public String toString() { return "MyObject{" + "value=" + value + '}'; }
} 
```

TreeView 应该以下一个方式创建：

```
TreeView<MyObject> treeView = new TreeView<MyObject>();
TreeItem<MyObject> treeRoot = new TreeItem<MyObject>(new MyObject("Root node"));
treeView.setRoot(treeRoot); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:30:02.623

我和OP有同样的问题。此外，我想将 TreeItem 中显示的值绑定到对象的属性。这还不完整，但我正在尝试使用以下帮助程序类，我在其中传递要在 TreeItem 中引用的“用户对象”（或项目）和 valueProperty（在我的情况下是项的属性）绑定到 TreeItem.value。

```
final class BoundTreeItem<B, T> extends TreeItem<T> {
  public BoundTreeItem(B item, Property<T> valueProperty) {
    this(item, valueProperty, null);
  }

  public BoundTreeItem(B item, Property<T> valueProperty, Node graphic) {
    super(null, graphic);
    itemProperty.set(item);
    this.valueProperty().bindBidirectional(valueProperty);
  }

  public ObjectProperty<B> itemProperty() {
    return itemProperty;
  }

  public B getItem() {
    return itemProperty.get();
  }

  private ObjectProperty<B> itemProperty = new SimpleObjectProperty<>();
} 
```

# jquery - 使用 jQuery 从自定义控件中获取信息。视觉工作室 2010

> ID：10501664
> 
> 赞同：3
> 
> 时间：2012-05-08T15:27:00.517
> 
> 标签：jquery, asp.net, .net, visual-studio-2010

我正在学习使用 Microsoft .NET Framework 4 进行 Web 应用程序开发。在阅读这本书时，我有一个业余项目正在工作，我在学习这些东西时正在编写代码。

这是一个真正简单的应用程序，它会根据用户名查询数据库，根据数据库中的行数动态创建自定义控件。

自定义控件只不过是一个图像和一个标签。然而，它确实有一些成员变量：reportName 和 filePath。

```
public partial class ReportIcon : System.Web.UI.UserControl
{
    public string reportName { get; set; }
    public string filePath { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        ReportNameLabel.Text = this.reportName;
    }
} 
```

这些动态创建的图标创建得很好，成员变量是根据数据库值设置的。

我正在尝试使用 jQuery 的 onClick 事件检索 filePath 值。我似乎无法获得该信息。现在我只是让它提醒图标确实被点击了。

```
$('.report-icons').click(
    function () {
        $(this).siblings().removeClass("selected");
        $(this).addClass("selected");
        alert("Get PDF File");
    }

); 
```

有人可以指出我使用 jQuery 在自定义控件中获取此信息的正确方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:32:48.960

您需要将文件路径写入 UI 控件，然后 JQuery 可以访问该控件，即

**标记**

```
<asp:Label runat=server ID="lblFilePath" /> 
```

**背后的代码**

```
lblFilePath.Text = filePath 
```

**jQuery**

```
alert($(#<%=lblFilePath.ClientID%>).text()); 
```

或使用隐藏字段或利用控件的数据属性。原理会类似

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:42:48.090

我假设您不希望您的用户看到文件路径。Crab Bucket 的方法肯定会起作用，但我建议使用隐藏控件而不是标签控件。

**HTML**

<asp:Hidden runat="server" id="filePath"/>

**代码隐藏**

filePath.value = myReportPath

**jQuery**

alert($("#<%=filePath.ClientID %>").val());

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:32:05.990

您可以将 data-filepath 属性添加到生成的 HTML 元素中，然后您可以使用 jquery 读取该属性。

# java - 返回 404 的 Rest Web 服务

> ID：10501665
> 
> 赞同：11
> 
> 时间：2012-05-08T15:27:07.757
> 
> 标签：java, eclipse, web-services, rest, tomcat

这是我第一次使用 Eclipse，这让我非常愤怒。

我安装了 Tomcat 6.0，下载了 Jersey 库，并按照以下教程进行操作：[http ://www.vogella.com/articles/REST/article.html#first_client](http://www.vogella.com/articles/REST/article.html#first_client)

我将项目名称创建为 RestExample，其中有一个包 de.jay.jersey.first，其中有一个类 HelloWorldResource，如下所示：

```
package de.jay.jersey.first;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/hello")
public class HelloWorldResource {
// This method is called if TEXT_PLAIN is request
@GET
@Produces(MediaType.TEXT_PLAIN)
public String sayPlainTextHello() {
    return "Hello Jersey";
}

// This method is called if XML is request
@GET
@Produces(MediaType.TEXT_XML)
public String sayXMLHello() {
    return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
}

// This method is called if HTML is request
@GET
@Produces(MediaType.TEXT_HTML)
public String sayHtmlHello() {
    return "<html> " + "<title>" + "Hello Jersey" + "</title>"
            + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
}
} 
```

我的 web.xml 看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>RestExample</display-name>
  <servlet>
<servlet-name>Jersey REST Service</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>de.jay.jersey.first</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
 <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
 </servlet-mapping>
</web-app> 
```

我正在尝试使用 curl 作为：

curl [http://localhost:8081/RestExample/rest/hello](http://localhost:8081/RestExample/rest/hello)

Apache Tomcat/6.0.35 - 错误报告

# HTTP 状态 404 - /RestExample/rest/Hello

**类型**状态报告

**消息**/RestExample/rest/hello

**描述 请求的资源 (/ RestExample** /rest/hello) 不可用。

Apache Tomcat/6.0.35

问题是我应该在 web.xml 中更改什么以便我可以访问该资源？

我尝试了 RestExample/de.jay.jersey.first/rest/hello，但它仍然不起作用。TOmcat 运行没有错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-05T18:53:51.080

尽管在网上寻找解决方案，但我花了很多时间才弄清楚为什么它对我不起作用。我犯的错误是包名称不是最新的新泽西 api。更新后的包名称应如下所示 (Web.xml)：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>RestExample</display-name>
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>jersey.config.server.provider.packages</param-name>
            <param-value>de.jay.jersey.first</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

请注意`<servlet-class>`和`<param-name>`与 vogella [tutorial](http://www.vogella.com/tutorials/REST/article.html)不同（更新） 。它可能不是这个特定问题的答案，但可能会对某人有所帮助。我从[这里](https://jersey.java.net/documentation/latest/deployment.html)找到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T11:31:23.750

**请在您的项目中添加所有给定的罐子**

项目（右键单击）>属性>Java 构建路径>库>添加 JAR/添加外部 JAR

1.  asm-3.1.jar
2.  jersey-bundle-1.14.jar
3.  jersey-client.jar
4.  jersey-core.1.17.1.jar
5.  jersey-server-1.17.jar
6.  jersey-servlet-1.17.jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:32:13.040

我用 Tomcat 7.0 试了一下，效果很好：

```
package de.jay.jersey.first;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/hello")
public class HelloWorldResource {
// This method is called if TEXT_PLAIN is request
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String sayPlainTextHello() {
        return "Hello Jersey";
    }

// This method is called if XML is request
    @GET
    @Produces(MediaType.TEXT_XML)
    public String sayXMLHello() {
        return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
    }

// This method is called if HTML is request
    @GET
    @Produces(MediaType.TEXT_HTML)
    public String sayHtmlHello() {
        return "<html> " + "<title>" + "Hello Jersey" + "</title>"
                + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
    }
} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>RestExample</display-name>
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>de.jay.jersey.first</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

浏览到[http://localhost:8084/RestExample/rest/hello](http://localhost:8084/RestExample/rest/hello)它工作正常

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-13T12:35:42.883

我也花了几个小时寻找相同问题的解决方案。

这解决了我的问题：

如果您使用 Maven 项目（例如使用原型 maven-archetype-webapp）并且 HelloWorldResource 类在文件夹**src/main/resources**中实现，则该类不会被编译（例如，然后运行“mvn clean package”或eclipse中的“在服务器上运行”）

**改为在文件夹src/main/java**中实施 HelloWorldResource并且不再出现 404 .. （如果您使用 maven-archetype-webapp 创建 Maven-Project，则需要手动创建文件夹）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-27T18:46:30.893

检查你的路径是否有这个栏 '/' 示例：@Path('/path') 在某些情况下这个问题只是缺少栏！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-25T12:58:11.403

如果您使用 Jersey 2.XX 用户 ServletAdaptor 代替。像这样，

```
 <servlet-class>com.sun.jersey.server.impl.container.servlet.ServletAdaptor</servlet-class>
    <!-- <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class> --> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-08T15:42:06.600

就像文章说的：

```
// Get the Todos
    System.out.println(service.path("rest").path("todos").accept(
            MediaType.TEXT_XML).get(String.class));
    // Get XML for application
    System.out.println(service.path("rest").path("todos").accept(
            MediaType.APPLICATION_JSON).get(String.class));
    // Get JSON for application
    System.out.println(service.path("rest").path("todos").accept(
            MediaType.APPLICATION_XML).get(String.class)); 
```

您尝试指定要调用的方法路径

# r - 读取R中不同目录下的多个文件

> ID：10501666
> 
> 赞同：5
> 
> 时间：2012-05-08T15:27:09.630
> 
> 标签：r, readfile

我有多个在不同目录下具有相似名称的文件。该目录的名称类似，例如：dir1 -> dir10。

每个目录下都有名为 f1 - f10 的文件，我想读取每个目录中的第一个文件。

例如，我可以使用 read.csv 吗？因为我需要使用一个变量来表示目录和文件名。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T16:15:34.727

构建文件名的另一种方法是`sprintf`

```
file.paths <- sprintf ('dir%i/f1.csv', 1:10) 
```

与`expand.grid`：

```
grid <- expand.grid (1:4, 1:3)
file.paths <- sprintf ('dir%i/f%i.csv', grid [[1]], grid [[2]]) 
```

或者，使用`Sys.glob`

```
file.paths <- Sys.glob ('dir*/f1.csv') 
```

后者还允许读取这些 dir* 中的所有 f*.csv 文件：

```
file.paths <- Sys.glob ('dir*/*f*.csv') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:10:12.493

如果大卫的问题是正确的，并假设您的工作目录是包含所有子目录的目录......

```
file.paths <- paste0('dir', 1:10, '/', 'f1.csv')
lapply(file.paths, read.csv) 
```

应该很容易将此示例扩展到您的具体情况。您可能想要探索的唯一其他功能是`expand.grid`，如果您在 10 个文件夹中的每个文件夹中有 10 个文件：

```
combos <- expand.grid(1:10, 1:10)
file.paths <- paste0('dir', combos[,1], '/f', combos[,2], '.csv') 
```

# java - 对象可以有访问修饰符吗？

> ID：10501675
> 
> 赞同：1
> 
> 时间：2012-05-08T15:27:56.187
> 
> 标签：java, oop

当我遇到这个时，我正在浏览一段代码：

```
public class ClassicA {
   private static ClassicA instance = null;
} 
```

我从来没有使用过这样的东西，想知道它是什么意思以及它是如何使用的。另外，对象的访问修饰符的目的是什么？欢迎任何示例/链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:30:54.870

这可能意味着这`ClassicA`是一个单例。它通常涉及声明一个私有构造函数和一个公共静态`getInstance()`方法。

当您想确保`ClassicA`整个应用程序中只有一个全局实例时，可以使用单例。您无需实例化它，而是调用`getInstance()`，它将检查它是否被实例化了一次。如果是，它将实例化它，并将结果对象存储在私有`instance`字段中。如果它已经被构造，只需返回`instance`字段而不重新实例化。

请注意，这被认为是不好的做法。请参阅：[https ://softwareengineering.stackexchange.com/questions/40373/so-singletons-are-bad-then-what](https://softwareengineering.stackexchange.com/questions/40373/so-singletons-are-bad-then-what)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:31:03.647

好吧，这个类`ClassicA`有一个私有的静态字段`instance`，它是空的。如果没有 getter/setter 访问该字段的唯一方法是使用反射。

由于这看起来像一个单例，我猜还有一个 getter 可以返回`instance`，如果它为 null，则首先创建一个实例并将其分配给该字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:29:39.960

它基本上是一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern "单身人士") ，作者打算只有一个此类的实例（实例字段），构造函数可能是私有的并且仅在类中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T15:30:04.343

它是类的（静态）成员，是的，[它们可以具有访问修饰符](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。（正如其他人所指出的，它确实看起来像是单例的一部分。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T15:33:54.717

这通常用于展示[Singleton 设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)的类。

关键是对于这些类型的对象，您最多只需要一个实例。您所做的是为该类创建一个私有构造函数，然后通常是一个名为 getInstance 的公共静态方法，您可以在其中检查私有实例变量是否已设置。如果尚未设置，则创建该类的新实例并将其分配给实例，然后返回该实例。如果对象已经创建，您只需返回它。像这样：

```
public class MySingleton {

  private static MySingleton instance=null;
  private MySingleton() {
     //do stuff
  }

  public static MySingleton getInstance() {
    if (instance == null) {
       instance = new MySingleton();

    }
    return instance;
  }

} 
```

然后从整个程序中，您可以轻松地从任何地方获取单例对象。

因此，单例实际上只是 PHP 等语言中美化的全局变量。我会争辩说它更干净，因为您可以防止其他人重新分配对实例的引用以及从设计角度来看可能非常糟糕的其他技巧。

通常人们将它用于管理某种类型的数据访问的类，例如 DB 对象，用于工厂类和构建器类，有关更多信息，请参阅[此](http://codeofdoom.com/wordpress/2008/04/20/how-and-when-to-use-singleton-classes/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T15:30:35.940

这用于单例模式。看[这里](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T15:32:31.233

`private static`意味着`instance`可用于类的所有实例和静态方法，但仅对它们可用。这实际上就像拥有静态私有方法。

例如，可以使用这些技巧来实现单例：您在内部保留一个类的单个实例，并且可以根据需要将其提供给该类的客户端。或者对于任何其他情况，当您需要在静态方法和某个类的实例之间共享某些东西时。

# ruby-on-rails - 让 XHR 分页与 HAML + Kaminari 一起使用

> ID：10501679
> 
> 赞同：1
> 
> 时间：2012-05-08T15:28:06.260
> 
> 标签：ruby-on-rails, ruby, pagination, haml, kaminari

我正在使用基于 HAML 的模板，而 Kaminari 对我来说似乎破坏了分页。我确定这是我的错，但这是我的模板的样子：

```
:javascript
  $(function() {
    $('#events').html('<%= escape_javascript render(@events) %>');
    $('#paginator').html('<%= escape_javascript(paginate(@events, :remote => true).to_s) %>');
  });

    %ul.activity_list
      #events
        = render :partial => 'event' 
```

我的 _event.html.haml 看起来像：

```
- @events.each do |event|
  = display_event(event) 
```

最后：

```
 %nav
      %ul.pagination
        #paginator
          = paginate @events, :remote => true 
```

当我加载页面时现在发生的事情是分页事件应该在哪里我真的看到以下标记：

`&lt;%= escape_javascript render(@events) %gt;`

它在网站上呈现为：

`<%= escape_javascript render(@events) %>`

我在这里做错了什么才能在这里启用 XHR 分页？

**更新**

根据 Dylan 的要求，我已将我的 javascript 更新为以下内容：

```
:javascript
  $(function() {
    $('#events').html('#{escape_javascript render('event')}');
    $('#paginator').html('#{escape_javascript(paginate(@events, :remote => true).to_s)}');
  }); 
```

看起来 XHR 正在工作，但由于某种原因，它永远不会超过 page=2。这个特定的抓取应该总共有 3 页，它只会在第 1 页和第 2 页之间翻转。有什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:42:18.950

您正在尝试在 haml 文件中使用 erb 标签。您应该使用 haml 的插值 ruby​​ 代码版本（`#{}`而不是`<%= %>`）：

```
:javascript
  $(function() {
    $('#events').html('#{escape_javascript render(@events)}');
    $('#paginator').html('#{escape_javascript(paginate(@events, :remote => true).to_s)}');
  }); 
```

请参阅[有关此的 Haml 文档](http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html#ruby_interpolation_)

# javascript - 用于大字符串的 Javascript 语法荧光笔

> ID：10501684
> 
> 赞同：1
> 
> 时间：2012-05-08T15:28:48.870
> 
> 标签：javascript, syntax-highlighting

我正在寻找一个高性能的语法荧光笔。

我试过谷歌美化、彩虹.js 和另一个我不记得的。他们都在与大块的 HTML 代码作斗争。它们最终都正确突出显示，但浏览器冻结了一两秒钟。或者文本没有突出显示，并且在页面加载几秒钟后，它立即出现。

我查看了 github 是如何使用语法荧光笔的，我认为他之所以能很好地工作是因为文本组围绕它而不是每个单词都有一个跨度，这意味着更好的性能。

任何人都知道支持 HTML 代码并且可以非常快速地呈现内容的 JS 语法荧光笔吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:28:49.050

是否可以在服务器上进行突出显示？可能会兑现，这样您就不必每次都将其兑现。如果您发布服务器端堆栈信息，我可以为您提供一些库的链接。

如果您想避免阻塞 UI，则可以在工作线程中进行语法突出显示。

此外，这里列出了 9 个其他荧光笔：[http ://www.webdesignbooth.com/9-useful-javascript-syntax-highlighting-scripts/](http://www.webdesignbooth.com/9-useful-javascript-syntax-highlighting-scripts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:32:59.090

您可能对使用[Gists](https://gist.github.com/)感兴趣。您可以将它们嵌入任何地方，并且它使用的语法突出显示非常快速。

我并不是要自我推销，但是对于使用 Gists 进行 Javascript 语法高亮的示例（我将在需要时也将 Gists 用于 HTML），您可以查看[我的 Javascript 博客](http://heyjavascript.com/)。我不记得任何其他这样做的网站的 URL，但我以前见过它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-03T14:26:12.000

我知道这是一个较老的问题，使用服务器突出显示大代码块绝对是您最好的选择。

我只是想让你知道我是 rainbow.js 的作者，我刚刚推出了一个 2.0 更新，将浏览器中的所有语法高亮移动到 webworker 中，因此它应该在不阻塞主线程的情况下对大型代码块执行更好/用户界面。

# windows - 仅当 Windows 命令提示符中存在父目录时，如何删除文件？

> ID：10501689
> 
> 赞同：3
> 
> 时间：2012-05-08T15:29:21.160
> 
> 标签：windows, batch-file, cmd

我正在使用这个批处理脚本来删除文件

```
FORFILES /P "X:\test" /S /M *.bak /C "CMD /C DEL @path" 
```

但是，X 驱动器是主动/被动群集上的资源。我必须在两个节点上运行批处理文件。两个问题...

1.  这是最好的方法吗？
2.  我希望批处理在删除文件之前查找 X 驱动器 - 你知道一种方法吗？我不希望它在被动集群上运行，因为 X 驱动器不会在它上面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T15:55:34.373

简单地使用 DEL 而不是 FORFILES 会快得多。您可以使用 IF EXIST 测试根路径是否存在。

```
if exist "x:\test\*.bak" del /q /s "x:\test\*.bak" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:33:56.447

我只是尝试将文件复制到文件夹中。然后检查文件是否存在。如果是这样，我删除文件，然后我可以继续。

# jquery - 如果在顶部停止使用 .animate 滚动到顶部 - jquery

> ID：10501693
> 
> 赞同：0
> 
> 时间：2012-05-08T15:29:38.280
> 
> 标签：jquery, jquery-animate, jquery-scrollable

我正在使用 .animate 滚动到页面顶部，但是如果用户已经在顶部或非常靠近它并且他们单击 .proj-tile 他们将无法再次向下滚动 1200 毫秒有没有办法停止到达顶部时脚本停止？

```
 $('.proj-tile').click(function()   {
    $('html, body').animate({ scrollTop: '+0'   }, 1200);
}); 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:33:22.853

尝试添加一个条件来检查滚动的高度并相应地调用动画，

```
$('.proj-tile').click(function()   {
    if($(window).scrollTop() >= 300) { //has scrolled considerably to animate
        $('html, body').animate({ scrollTop: '+0'   }, 1200);
    }
}); 
```

# iphone - 从 iPhone 流式传输数据到 Wowza 服务器

> ID：10501695
> 
> 赞同：4
> 
> 时间：2012-05-08T15:29:44.500
> 
> 标签：iphone, avfoundation, rtmp, wowza

如何将 AVAssets 获取的流式数据实时传输到 Wowza Server？实际上，我在创建 RTMP Stream 时遇到了困难。任何示例代码/链接帮助将不胜感激。

# jquery - jQuery：选择对齐=“中心”的元素

> ID：10501697
> 
> 赞同：3
> 
> 时间：2012-05-08T15:29:48.680
> 
> 标签：jquery

我试图只选择 align="center" （内联样式）的段落。

```
jQuery(p.MsoNormal).attr('align', 'center').addClass('av-tablecell'); 
```

这似乎选择了所有段落元素，即使没有 align=center。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:30:50.407

尝试如下，

```
jQuery('p.MsoNormal[align=center]').addClass('av-tablecell'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:33:38.813

您的代码将 p.MsoNormal 上的“align”属性设置为“center”。您需要将其包含在您的选择中以仅获取已经具有“align=center”的元素，如下所示：

```
jQuery('p.MsoNormal[align="center"]').addClass('av-tablecell'); 
```

# facebook - Facebook 事件出现在谷歌地图上

> ID：10501708
> 
> 赞同：2
> 
> 时间：2012-05-08T15:30:20.313
> 
> 标签：facebook, events, google-maps

有没有办法让标准 Facebook 事件应用程序上的事件出现在我创建的自定义 Google 地图上？

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:48:52.490

如果您有`user_events`权限，您可以像这样访问这些位置：

```
FB.api("/me/events", function(events) {
    if(events.error) 
         console.error(events);

    var map = "http://maps.googleapis.com/maps/api/staticmap?zoom=14&size=512x512&maptype=roadmap&sensor=false";

    for(var i = 0; i < events.data.length; i++) {
        var point = "&markers=color:blue%7Clabel:S%7C";
        point += (events.data[i].venue.latitude + "," + events.data[i].venue.longitude);
        map   += point;
    }

    var img = document.createElement("IMG");
    img.src = map;
    document.body.appendChild(img);
}); 
```

我没有对其进行测试，但这应该足以展示如何在浏览器中访问 API 并使用其信息呈现地图的示例。这是使用谷歌地图静态 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-15T11:43:32.230

我刚刚创建了一个 python 脚本，[来源在这里](https://github.com/DaWe35/Facebook-event-crawler)。

它查询给定的 facebook 页面及其事件并将数据放入 MySQL 表中。它还包含一个 Geo-cache 库，它将本地数据库与 Google Maps Geocoding API 相结合，因此您可以非常快速地查询事件的经度和纬度。

# php - UPDATE sql不影响数据库

> ID：10501709
> 
> 赞同：0
> 
> 时间：2012-05-08T15:30:22.063
> 
> 标签：php, mysql, httprequest

我有这个代码。它返回 1 但数据库没有变化！

```
<?
    include ("../connect.php");
    $id = $_REQUEST['id'];
    $stat = $_REQUEST['changeTo'];
    $prod = $_REQUEST['product'];

    echo mysql_query("UPDATE $prod SET STATUS = '$stat' WHERE ID = '$id'");
    echo mysql_error();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:32:47.710

如果发生 SQL 错误，只会在 UPDATE 语句中返回错误。如果没有行受到影响，则查询仍然成功并报告为这样。

确保查询中使用的所有变量都包含有效值，并且查询应该实际影响数据库中的任何记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:41:43.260

我的第一个想法是 $id 不存在，您可以手动输入一个您知道存在的 id 并尝试运行一次吗？只是为了排除它，如果没有别的

我添加了这个，希望我能得到一个答案投票:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:38:55.863

使用代码设置的值直接尝试 SQL 语句。

# asp.net - 在文本框 OnTextChanged 上获取 3 个深度嵌套 Listivew 的行/列

> ID：10501717
> 
> 赞同：0
> 
> 时间：2012-05-08T15:30:47.903
> 
> 标签：asp.net

我正在尝试获取文本框 OntextChanged 的​​行和列位置。

如果我这样做，我可以获得列位置：

```
TextBox txtScore = sender;
ListViewItem item = (ListViewItem)txtScore.NamingContainer;
int col = ((ListView)item.NamingContainer).DataKeys(item.DataItemIndex).Values(0); 
```

在我将下面的代码段转换为用户控件之前，它一直有效。

代码片段

```
 <asp:ListView ID="techs" runat="server" ItemPlaceholderID="lvItemPlaceholder" DataKeyNames="Number"
        OnItemDataBound="techs_ItemDataBound">
        <LayoutTemplate>
            <asp:PlaceHolder runat="server" ID="lvItemPlaceholder" />
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    Tech
                    <%# Eval("Number")%>
                </td>
                <td>
                    <asp:TextBox ID="tech" runat="server" Text='<%# Eval("Name") %>' />
                </td>
                <asp:ListView ID="scorePatterns" runat="server" ItemPlaceholderID="lvScorePatternsItemPlaceholder"
                    OnItemDataBound="scorePatterns_ItemDataBound" DataKeyNames="Ref">
                    <LayoutTemplate>
                        <asp:PlaceHolder runat="server" ID="lvScorePatternsItemPlaceholder" />
                    </LayoutTemplate>
                    <ItemTemplate>
                        <td>
                            <table>
                                <asp:ListView ID="scores" runat="server" ItemPlaceholderID="lvScoresItemPlaceholder"
                                    OnItemDataBound="scores_ItemDataBound" DataKeyNames="Ref,Instance">
                                    <LayoutTemplate>
                                        <asp:PlaceHolder runat="server" ID="lvScoresItemPlaceholder" />
                                    </LayoutTemplate>
                                    <ItemTemplate>
                                        <tr>
                                            <td>
                                                <asp:TextBox runat="server" ID="txtScore" Width="50" AutoPostBack="true" OnTextChanged="txtScore_TextChanged" />
                                            </td>
                                        </tr>
                                    </ItemTemplate>
                                </asp:ListView>
                            </table>
                        </td>
                    </ItemTemplate>
                </asp:ListView>
                <td>
                    <asp:Label runat="server" ID="lblDate" Text='<%# Eval("Date") %>' />
                </td>
            </tr>
    </ItemTemplate> 
```

# cakephp - 增加 Cakephp 1.3 表单安全令牌过期时间

> ID：10501720
> 
> 赞同：0
> 
> 时间：2012-05-08T15:30:51.310
> 
> 标签：cakephp

我正在深入开发 Cakephp 1.3 中的应用程序，所以当我想升级到版本 2 时，我宁愿把它作为最后的手段。

我的问题是使用安全组件时表单的令牌过期时间太短。我希望人们在这个表格上坐一会儿，但在使用 10 分钟后会导致黑洞。

无论如何要增加令牌到期前的时间吗？Cakephp 2 具有此选项，详细信息如下：[cakephp 2 security csrf-configuration](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#csrf-configuration)

它似乎在 1.3 中不起作用，有没有办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:38:36.037

是的，这是完全可行的，寻找`Session.timeout`你的数字`config/core.php`并增加它。分配的数字是基本秒数，超时设置的实际时间量也取决于您的安全级别：

*   高：`Session.timeout`* 10
*   中：`Session.timeout`* 100
*   低：`Session.timeout`* 300。

由于您想要高安全性的功能，我会保持高，但会增加`Session.timeout`您的需求。

[进一步阅读](http://book.cakephp.org/1.3/view/924/The-Configuration-Class#CakePHP-Core-Configuration-Variables-931)。

**更新**

事实证明，Form 令牌超时仅取决于安全级别，并且由于某种原因不会使超时生效（[请参阅此处](https://github.com/cakephp/cakephp/blob/1.3/cake/libs/security.php#L52)），因此增加它的唯一方法是降低安全级别或更改 Cake： /

# jquery - jQuery图像在悬停时消失并褪色

> ID：10501721
> 
> 赞同：1
> 
> 时间：2012-05-08T15:30:52.887
> 
> 标签：jquery, image, hover, fade

我有一系列缩略图，希望在翻转时显示在主图像中。我已经使用悬停功能使该功能正常工作，但是尽管淡入效果很好，但一旦我推出，它就会淡出，但随后主图像完全失去它的 src 并消失。

```
$(document).ready(function(){   
    var originalimg = $('#imageMain img').attr('src');
    $(".thumb").hover(function(){
        var currentimg = $(this).attr('src');
        $('#imageMain img').fadeIn("slow").attr('src', currentimg);
        },function(){
        $('#imageMain img').fadeOut('slow').attr('src', originalimg);
    });
}); 
```

多谢你们。我没有包含 HTML，因为我认为它的引号直截了当发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:36:09.810

我可能会完全删除图像并在适当的位置添加一个新图像，因为您可以同时淡入它以获得更好的效果！我已经在脑海中写下了这个，所以希望它有效！

```
 $(document).ready(function(){  
                var originalimg = $('#imageMain img').attr('src');
                $(".thumb").hover(function(){
                    var currentimg = $(this).attr('src');
                    $('#imageMain img').fadeIn("slow").attr('src', currentimg);
                    },function(){
                    $('#imageMain img').fadeOut('slow',function(){$(this).remove()});
                    $("#imageMain").append("<img src='"+originalimg+"'/>").hide().fadeIn("slow");
                });
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:33:45.100

不是`.attr('src', originalimg);`但`.src = originalimg;`

```
$(document).ready(function(){  
    var originalimg = $('#imageMain img').attr('src');
    $(".thumb").hover(function(){
        var currentimg = $(this).attr('src');
        $('#imageMain img').fadeIn("slow").src = currentimg;
        },function(){
        $('#imageMain img').fadeOut('slow').src = originalimg;
    });
}); 
```

# c# - 将 .Net Membership Provider 与 Entity Framework 4.3 迁移结合使用

> ID：10501723
> 
> 赞同：1
> 
> 时间：2012-05-08T15:30:57.280
> 
> 标签：c#, .net, asp.net-mvc-3, asp.net-membership, entity-framework-4.3

我正在开发一个应用程序，到目前为止，我们一直通过 Entity Framework 4.3 代码首先通过迁移来管理数据库和域......

如此处所示... [http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

我们已经到了需要实现成员资格的地步，并且想要使用 .NET 成员资格提供程序。过去我只是使用 aspnet_regsql.exe 来生成数据库中的所有成员表。有没有办法让这些成员表作为迁移之一在数据库中生成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:59:33.900

也许您可以使用类 SqlServices 来安装服务：

[http://msdn.microsoft.com/en-us/library/system.web.management.sqlservices.install.aspx](http://msdn.microsoft.com/en-us/library/system.web.management.sqlservices.install.aspx)

例子：

```
SqlServices.Install ("databaseName", SqlFeatures.Membership, yourConnectionString); 
SqlServices.Install ("databaseName", SqlFeatures.RoleManager, yourConnectionString); 
```

我希望我是有帮助的。

# python - Python 导入究竟是如何工作的？

> ID：10501724
> 
> 赞同：61
> 
> 时间：2012-05-08T15:31:02.950
> 
> 标签：python, import, module

我有两种特定情况，我不明白 Python 中的导入是如何工作的：

**第一种具体情况：**

当我在两个不同的 Python 脚本中导入同一个模块时，该模块不会被导入两次，对吧？Python第一次遇到它是导入的，第二次是检查模块是否已经导入，还是做一个副本？

**第二种具体情况：**

考虑以下模块，称为`bla.py`：

```
a = 10 
```

然后，我们有`foo.py`一个导入的模块`bla.py`：

```
from bla import *

def Stuff ():
    return a 
```

之后，我们有一个名为 的脚本`bar.py`，由用户执行：

```
from foo import *
Stuff() #This should return 10 
a = 5
Stuff() 
```

这里我不知道：`Stuff()`返回 10 还是 5？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-08T15:33:01.403

**第1部分**

该模块仅加载一次，因此再次导入不会造成性能损失。如果您确实希望再次加载/解析它，则必须使用`reload()`该模块。

> 首先检查的是`sys.modules`，之前已经导入的所有模块的缓存。^([[来源](http://docs.python.org/reference/simple_stmts.html#import)])

* * *

**第2部分**

`from foo import *`导入`a`到本地范围。给 赋值时`a`，它会被新值替换 - 但`foo.a`不会触及原始变量。

因此，除非您`import foo`和 modify `foo.a`，否则两个调用都将返回相同的值。

对于诸如 list 或 dict 之类的可变类型，它会有所不同，修改它确实会影响原始变量 - 但为其分配新值仍然不会 modify `foo.whatever`。

如果您想了解更多详细信息，请查看[http://docs.python.org/reference/executionmodel.html](http://docs.python.org/reference/executionmodel.html)：

> 以下构造绑定名称：函数的形式参数、**导入语句**、类和函数定义（这些在定义块中绑定类或函数名称），以及**如果出现在赋值中作为标识符的目标**，for循环头，在第二个except 子句标题的位置或在 with 语句中的后面。

两个粗体部分与您相关：首先，名称在导入期间`a`绑定到 的值。`foo.a`然后，在做`a = 5`的时候，名字`a`是绑定的`5`。由于修改列表/字典不会导致任何绑定，因此这些操作将修改原始操作（`b`并`foo.b`绑定到您操作的同一对象）。将新对象分配给`b`将再次成为绑定操作，因此`b`与`foo.b`.

还值得注意的是该`import`语句的确切作用：

*   `import foo`将模块名称绑定到当前范围内的模块对象，因此如果您修改`foo.whatever`，您将使用该模块中的名称 - 任何修改/分配都会影响模块中的变量。
*   `from foo import bar`仅将给定名称绑定（`foo`即将保持未绑定）到具有相同名称的元素 in `foo`- 因此操作的`bar`行为如前所述。
*   `from foo import *`行为与前一个类似，但它导入所有不带下划线前缀的全局名称。如果模块`__all__`只定义了这个序列内的名称，则导入。

* * *

**第 3 部分**（您的问题中甚至不存在：p）

python 文档非常好，而且通常很冗长——您可以在其中找到几乎所有可能与语言相关的问题的答案。以下是一些有用的链接：

*   [http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)（类、属性、魔术方法等）（）
*   [http://docs.python.org/reference/executionmodel.html](http://docs.python.org/reference/executionmodel.html)（变量如何在 python 中工作）
*   [http://docs.python.org/reference/expressions.html](http://docs.python.org/reference/expressions.html)
*   [http://docs.python.org/reference/simple_stmts.html](http://docs.python.org/reference/simple_stmts.html)（语句如`import`, `yield`）
*   [http://docs.python.org/reference/compound_stmts.html](http://docs.python.org/reference/compound_stmts.html)（块语句，如`for`, `try`, `with`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:46:29.900

要回答您的第一个问题：

不，python 不会被“导入”两次。当 python 加载一个模块时，它会检查[`sys.modules`](http://docs.python.org/library/sys.html#sys.modules). 如果它不在那里，则将其放入并加载。

回答你的第二个问题：

模块可以定义它们将导出到`from camelot import *`场景的名称，行为是为现有值创建名称，而不是引用现有变量（python 没有引用）。

在一个有点相关的话题上，做 a`from camelot import *`与[常规 import 不同](http://docs.python.org/tutorial/modules.html#importing-from-a-package)。

# objective-c - 核心数据：iOS5 中用于自动迁移的不兼容数据模型（但在 iOS4 上还可以）

> ID：10501728
> 
> 赞同：1
> 
> 时间：2012-05-08T15:31:20.470
> 
> 标签：objective-c, core-data, ios5, ios4, core-data-migration

我在一个 iOS 应用程序中有一个核心数据模型，它设置为自动迁移（使用 MagicalRecord），几乎从一开始就使用模型版本控制，并且在 iOS 4.2-3 上的模型版本控制工作正常。

我最近对产生错误的模型（预生产）进行了一组更改：

```
Error: The model used to open the store is incompatible with the one used to create the store 
```

我看不出数据模型不兼容的任何原因，因为我做的一切都是正确的（添加模型版本、更改新模型、设置当前模型版本、运行应用程序）。我什至仔细检查了我的工作和更改日志。一切都应该是干净的。确实，在我运行 iOS4.3 的 iPad 上很好，但是，在 iOS 5 设备上，该应用程序没有数据。

由于这是一个预生产版本，我对要求删除/重新安装更新没有任何疑虑。但是，我现在处于后期制作阶段，这对于这个应用程序来说是不可接受的。

我现在需要做一个小改动，为其中一个实体添加一个字符串属性。同样，它在 iOS 4.3 上运行良好，但在 iOS5 上出现相同的不兼容模型错误。我错过了什么吗？这是一个记录在案的错误吗？iOS5 是否停止支持自动版本控制/迁移？我能做些什么来解决这个问题？

# google-apps-script - Google Apps 脚本小工具 - 什么时候加载？

> ID：10501733
> 
> 赞同：1
> 
> 时间：2012-05-08T15:31:39.787
> 
> 标签：google-apps-script

我发现我的 Google 协作平台上的 Google Apps 脚本小工具的加载时间不一致。小工具加载过程似乎有两个可见阶段 - 一个“空白”阶段和一个带有“加载”动画的阶段。谁能解释这两个阶段之间的关系？我怀疑但无法知道我的代码在加载动画完成之前不会开始执行。这是真的？

一旦到达加载动画，我的脚本似乎会相对一致地执行。我已经查看了有关优化 Google Apps 脚本性能的可用文档，并且我已经能够根据我的要求获得合理的加载时间，但小工具有时会花费很长时间 - 超过 60 秒 - 在加载动画出现之前没有任何内容.

我有一页上有三个 Google Apps 脚本小工具，三个非常不同的性能配置文件。我正在从其中两个中的电子表格中加载数据，但我需要在另一个中遍历 Google 联系人，这需要更长的时间。在我看来，一旦这些脚本中的一个点击“加载”动画，它们都开始相当快地执行，但我作为开发人员所做的任何事情都不会影响加载动画之前的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T07:28:28.257

Web 浏览器在使用 Javascript（或 GAS）进行服务器调用时是单线程的，因此它需要完成对服务器的所有函数调用，然后才能从服务器返回值并呈现您的页面。一种解决方法是在页面上创建一个简单的按钮来启动您的 GAS 流程，然后在按下按钮时通过客户端处理程序显示加载屏幕。当进程在后台进行时，加载屏幕将可见，当您最终完成进程时，您可以将加载屏幕（面板）可见性设置为 false。

不是最优雅的解决方案，但是您的初始页面将快速呈现，然后您设置一个面板（如果您愿意，可以使用动画 gif 加载图形）告诉用户页面正在加载。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:03:14.260

有趣的问题。但恐怕我们真的无能为力了。好吧，除了向 Google 抱怨 :)

[我想你应该在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开一个“增强请求” 。

# jquery-mobile - jquery mobiscroll 和 jquery validate 不能一起玩

> ID：10501737
> 
> 赞同：1
> 
> 时间：2012-05-08T15:31:50.833
> 
> 标签：jquery-mobile, jquery-validate, conflict, mobiscroll

我正在开发一个 jquery 移动网站。我正在尝试将[mobiscroll](http://demo.mobiscroll.com/) 插件用于日期选择器。

我正在使用[jquery validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件进行验证。我在其他项目中都使用过这个，完全没有问题。

问题是，mobiscroll 模式弹出窗口出现，设置/取消按钮工作正常，但滚动和/或 +/- 按钮不起作用。

firebug 没有显示任何错误，IE Developer tools 脚本调试器也没有。

如果我取出 jquery Validate 引用，它工作正常。删除`$('form').validate();`并不能修复它。

供参考，我正在使用：

*   jQuery 1.7.1
*   jQuery 移动 1.1.0
*   jQuery 验证 1.6
*   mobiscroll 1.6 或 2rc2（都有问题）

我如何配置 mobiscroll 似乎并不重要，将所有选项都排除在外，或者设置一些似乎没有什么区别。

对它们进行验证或不验证的其他输入也没有什么区别。

这是我的设置代码：

```
$('#DateVolunteered').scroller(
   {
      preset: 'date',
      theme: 'default',
      display: 'modal',
      mode: 'scroller'
    }
); 
```

和输入：

我尝试制作一个 jsFiddle，但是在获取引用的各种库以及所有 css 和诸如此类的东西时遇到了一些问题。当我启动并运行它时，我将继续努力并发布一个链接。

编辑：我无法工作。但是我发现更新到 1.9 可以修复它。很奇怪。但我会接受

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:13:18.270

更新到 jquery validate 1.9 修复了它。

# c# - 如何使用 WCF Web 服务器向客户端发送类等于实现

> ID：10501738
> 
> 赞同：0
> 
> 时间：2012-05-08T15:31:50.947
> 
> 标签：c#, wcf, webserver, datamember, java-client

我正在开发一个与 WCF Web 服务器通信的 java (JSF) 应用程序。我使用 c# 开发了 web 服务器，但我很难将复杂对象的 equals 实现发送到 java 客户端。例如，考虑这个 c# 类：

```
[DataContract(Namespace = "http://mywebservice.com/Entidades")]
    public class Record{private Int64 id;
    [DataMember]
    public Int64 Id
    {
        get { return id; }
        set { id = value; }
    }

    public override bool Equals(Object obj)
    {
          if(obj is Record){
               Record rec = obj as Record;
               return rec.Id == this.Id;
         }
         return false;
    } 
```

}

首先尝试将 [DataMember] 放在等号中，但我发现我不能这样做。将这种复杂类型的“等于”的实现发送到 java 客户端的正确方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:34:25.463

那没有意义。
Web 服务传输数据，而不是代码。

您需要`equals()`在源代码中实现 Java 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:34:12.197

Equals 是一种方法，而不是属性。因此，我不知道有任何方法可以简单地在服务公开的模型中公开此功能。

# php - 在 WP 中，不能在 header.php 和 footer.php 中包含_once() 相同的文件

> ID：10501740
> 
> 赞同：-1
> 
> 时间：2012-05-08T15:31:54.410
> 
> 标签：php, wordpress

有 3 个 .php 文件：

变量.php

```
 $foo = 'bar'; 
```

header.php：

```
 include_once("vars.php");
    echo "In header: $foo"; 
```

页脚.php：

```
 include_once("vars.php");
    echo "In footer: $foo"; 
```

在上述情况下，footer.php 中没有设置 $foo。如果我删除`include_once()`header.php 中的内容，则 $foo 设置在 footer.php 中，而不是 header.php 中。

我猜我在某个地方做傻事，但为了我的生活，我找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:37:43.997

这些`..._once()`功能不关心包含/要求发生在哪里。一旦一个文件被包含进来，在特定的脚本执行运行期间，它就永远不会再次成为 include_once/require_once 了。

如果您需要在不同位置多次包含它，请不要使用 _once() 变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:38:10.310

第二次不包含它的原因是因为你告诉它`include_once`-*一次*。

无论如何，如果您保留在 header.php 中，`$foo`则应该包括在内。`include_once`确保您没有`$foo`在 footer.php 之前更改。

# sql-server - 使用分组的 Linq to SQL 性能

> ID：10501742
> 
> 赞同：3
> 
> 时间：2012-05-08T15:31:55.100
> 
> 标签：sql-server, performance, linq, tsql, linq-to-sql

我的问题是关于 Linq to SQL 性能，我有一个 SQL 字符串并将其转换为 Linq to sql：

SQL查询：

```
SELECT CONVERT(VARCHAR(10), ClockIn, 103) AS ClockDate, MIN(ClockIn) AS ClockIn, MAX(ClockOut) AS ClockOut, SUM(DATEDIFF(MINUTE, ClockIn, ClockOut)) AS [TotalTime]
FROM TimeLog
WHERE (EmployeeId = 10)
GROUP BY CONVERT(VARCHAR(10), ClockIn, 103)
ORDER BY ClockIn DESC 
```

LINQ 查询：

```
From u In objDC.TimeLogs
Where u.EmployeeId = 10
Group By Key = New With {u.ClockIn.Year, u.ClockIn.Month, u.ClockIn.Day} Into G = Group
Order By G.First.ClockIn Descending
Select New With {.ClockDate = Key.Day & "/" & Key.Month & "/" & Key.Year,
 .ClockIn = G.Min(Function(p) p.ClockIn),
 .ClockOut = G.Max(Function(p) p.ClockOut),
 .TotalTime = G.Sum(Function(p) SqlMethods.DateDiffMinute(p.ClockIn, p.ClockOut))} 
```

从 SQL 分析器中的 LINQ 生成的查询字符串是：

```
SELECT [t4].[value] AS [ClockDate], [t4].[value2] AS [ClockIn2], [t4].[value22] AS [ClockOut], [t4].[value3] AS [TotalTime]
 FROM (
 SELECT ((((CONVERT(NVarChar,[t3].[value32])) + '/') + (CONVERT(NVarChar,[t3].[value222]))) + '/') + (CONVERT(NVarChar,[t3].[value22])) AS [value], [t3].[value] AS [value2], [t3].[value2] AS [value22], [t3].[value3], [t3].[value22] AS [value222], [t3].[value222] AS [value2222], [t3].[value32]
 FROM (
 SELECT MIN([t2].[ClockIn]) AS [value], MAX([t2].[ClockOut]) AS [value2], SUM([t2].[value]) AS [value3], [t2].[value2] AS [value22], [t2].[value22] AS [value222], [t2].[value3] AS [value32]
 FROM (
 SELECT DATEDIFF(Minute, [t1].[ClockIn], [t1].[ClockOut]) AS [value], [t1].[EmployeeId], [t1].[value] AS [value2], [t1].[value2] AS [value22], [t1].[value3], [t1].[ClockIn], [t1].[ClockOut]
 FROM (
 SELECT DATEPART(Year, [t0].[ClockIn]) AS [value], DATEPART(Month, [t0].[ClockIn]) AS [value2], DATEPART(Day, [t0].[ClockIn]) AS [value3], [t0].[ClockIn], [t0].[ClockOut], [t0].[EmployeeId]
 FROM [dbo].[TimeLog] AS [t0]
 ) AS [t1]
 ) AS [t2]
 WHERE [t2].[EmployeeId] = 10
 GROUP BY [t2].[value2], [t2].[value22], [t2].[value3]
 ) AS [t3]
 ) AS [t4]
 ORDER BY (
 SELECT [t6].[ClockIn]
 FROM (
 SELECT TOP (1) [t5].[ClockIn]
 FROM [dbo].[TimeLog] AS [t5]
 WHERE ((([t4].[value222] IS NULL) AND (DATEPART(Year, [t5].[ClockIn]) IS NULL)) OR (([t4].[value222] IS NOT NULL) AND (DATEPART(Year, [t5].[ClockIn]) IS NOT NULL) AND ((([t4].[value222] IS NULL) AND (DATEPART(Year, [t5].[ClockIn]) IS NULL)) OR (([t4].[value222] IS NOT NULL) AND (DATEPART(Year, [t5].[ClockIn]) IS NOT NULL) AND ([t4].[value222] = DATEPART(Year, [t5].[ClockIn])))))) AND ((([t4].[value2222] IS NULL) AND (DATEPART(Month, [t5].[ClockIn]) IS NULL)) OR (([t4].[value2222] IS NOT NULL) AND (DATEPART(Month, [t5].[ClockIn]) IS NOT NULL) AND ((([t4].[value2222] IS NULL) AND (DATEPART(Month, [t5].[ClockIn]) IS NULL)) OR (([t4].[value2222] IS NOT NULL) AND (DATEPART(Month, [t5].[ClockIn]) IS NOT NULL) AND ([t4].[value2222] = DATEPART(Month, [t5].[ClockIn])))))) AND ((([t4].[value32] IS NULL) AND (DATEPART(Day, [t5].[ClockIn]) IS NULL)) OR (([t4].[value32] IS NOT NULL) AND (DATEPART(Day, [t5].[ClockIn]) IS NOT NULL) AND ((([t4].[value32] IS NULL) AND (DATEPART(Day, [t5].[ClockIn]) IS NULL)) OR (([t4].
 [value32] IS NOT NULL) AND (DATEPART(Day, [t5].[ClockIn]) IS NOT NULL) AND ([t4].[value32] = DATEPART(Day, [t5].[ClockIn])))))) AND ([t5].[EmployeeId] = 10)
 ) AS [t6]
 ) DESC 
```

LINQ to SQL 太慢了，与 SQL Query 相比，生成查询的执行计划是人工编写的 SQL 查询的 7% 和 Linq 生成的查询的 97%。

我的 Linq to SQL 查询有什么问题？还是 Linq 的性能和限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:30:18.193

我认为问题在于您访问`OrderBy G.First`语句中每个组的行并在 Linq-to-SQL 中触发 N+1 行为，您可以尝试以下操作：

```
var query = objDC.TimeLogs
            .Where(c => c.EmployeeId == 10)
            .GroupBy(c => c.ClockIn.Date)
            .OrderBy(g => g.Key)
            .Select(g => new
            {
                Date = g.Key,
                ClockIn = g.Min(c => c.ClockIn),
                ClockOut = g.Max(c => c.ClockOut),
            })
            .Select(g => new 
            {
                g.Date,
                g.ClockIn,
                g.ClockOut,
                TotalTime = g.ClockOut - g.ClockIn
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:58:41.493

同样，这是基于 Guillaume 推荐的 linq 查询。

非常感谢 Guillaume 它解决了这个问题，我同意你的观点，这个问题与 G.First 有关。

我根据您的回答更改了我的 Linq 查询：

```
From u In objDC.TimeLogs
Where u.EmployeeId = 10
Group By key = New With {u.ClockIn.Date} Into G = Group
Order By key.Date Descending
Select New With {
    .ClockDate = key.Date,
    .ClockIn = G.Min(Function(p) p.ClockIn),
    .ClockOut = G.Max(Function(p) p.ClockOut),
    .TotalTime = G.Sum(Function(p) SqlMethods.DateDiffMinute(p.ClockIn, p.ClockOut)) / 60} 
```

我得到了相同的结果，但查询速度要快得多，分析器给了我 55% 的书面查询和 45% 的新生成查询，它比原始字符串查询更快。

非常感谢您的帮助。

# django - Django、django-socketio 和 mongodb 后端

> ID：10501744
> 
> 赞同：0
> 
> 时间：2012-05-08T15:31:58.307
> 
> 标签：django, mongodb, socket.io, gevent

我有一个正在运行的[django-nonrel](http://www.allbuttonspressed.com/projects/django-nonrel)应用程序，我想使用 Web 套接字添加一个实时模块。

我想使用[django-socketio](https://github.com/stephenmcd/django-socketio)，但似乎 gevent（用于为站点提供服务）无法与Django 应用程序后端的mongodb（[链接）一起正常工作。](https://groups.google.com/forum/?fromgroups#!topic/django-non-relational/sY7eeeCeipw)

有没有人已经尝试使用 mongodb 作为后端来设置 django-socketio ？

干燥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:52:29.487

I found that using Tornado/Tornadio2 with Django is much easier than the gevent-based alternatives. If you need help setting that up I'd be happy to share my runserver_socketio.py script.

# android - 使用声音进行运动检测

> ID：10501751
> 
> 赞同：1
> 
> 时间：2012-05-08T15:32:18.640
> 
> 标签：android, audio, detection

我正在考虑在我的应用程序中通过 SOUND 实现运动检测。但是，我仍在为此决定一个好的解决方案。一个想法是录制一小段声音并以某种方式比较它们。另一种是不间断的音频录制，以某种方式“感觉”到声音尖峰和触发动作。我说的是检测房间中的运动，环境运动。后者听起来更好，但它可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:21:31.363

您可以发出一些声音，并尝试检测返回到麦克风的任何反射中的多普勒频移、频谱和幅度随时间的任何差异或变化。一本关于雷达技术的教科书可能会解释一些所需的 DSP 信号分析。

# c# - 从 DataTable 中返回特定列名的行 - C#

> ID：10501752
> 
> 赞同：0
> 
> 时间：2012-05-08T15:32:24.093
> 
> 标签：c#, asp.net, visual-studio-2010, c#-4.0

我一直试图在网上找到答案，但我正在使用 DataTable，我想根据表中的列名过滤所有行，但我似乎无法让 filterExpression 工作。即使语法错误，这基本上就是我想要它做的......

DataRow[] row = sqlDT.Select(ColumnName = "Foo", "ASC", DataViewRowState.CurrentRows);

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:48:23.867

有几种方法可以做到这一点。我建议使用 LINQ 过滤行：

```
sqlDT = sqlDT.AsEnumerable().Where(r => r.Field<string>("ColumnName") == "Foo").CopyToDataTable(); 
```

您还可以使用`Select`方法或`DefaultView.RowFilter`属性：

```
//select method
sqlDT = sqlDT.Select("ColumnName = 'Foo'").CopyToDataTable();

//row filter property
sqlDT.DefaultView.RowFilter = "ColumnName = 'Foo'";
sqlDT = sqlDT.DefaultView.ToTable(); 
```

**编辑**

如果您只想过滤掉不需要的列，请使用以下`DefaultView.ToTable()`方法：

```
sqlDT = sqlDT.DefaultView.ToTable(false, "Column1", "Column2", "Column3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:38:08.923

您按错误的顺序执行此操作，只需这样做： Datatable.rows(0//its count).item("column name"); 然后你可以用 foreach 循环它并制作一个列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:53:15.543

你应该尝试这样的事情

DataRow[] row = sqlDT.Select("ColumnName =' " + Foo + " ' " , "ASC", DataViewRowState.CurrentRows);

我希望这对你有用。

# node.js - 无法在 BeagleBone 上的 Cloud9 中运行骨骼脚本文件

> ID：10501758
> 
> 赞同：2
> 
> 时间：2012-05-08T15:32:44.683
> 
> 标签：node.js, beagleboard, cloud9-ide

我在使用 Cloud9 IDE 运行文件时遇到问题，这些文件在 BeagleBone 上使用 bonescript 和预装版本的 Angstrom Linux。我在 OSX 10.7 上的 Chrome 18 中在[http://beaglebone.local:3000使用 Cloud9。](http://beaglebone.local:3000)

当我运行[Bonescript](https://github.com/jadonk/bonescript) blinkled.js 示例代码 Cloud9 输出此错误：

```
Output
node.js:134
        throw e; // process.nextTick error, or 'error' event on first tick
       ^
Error: Cannot find module '/var/lib/cloud9'
    at Function._resolveFilename (module.js:326:11)
    at Function._load (module.js:271:25)
    at Array.<anonymous> (module.js:430:10)
    at EventEmitter._tickCallback (node.js:126:26) 
```

[如果我尝试按照此 StackOverflow 问题](https://stackoverflow.com/questions/10050478/running-code-on-beaglebone-using-cloud9-ide)中的建议在运行配置中添加文件路径，则会在控制台中收到此错误（请注意红色）：

```
[C9 Server Exception 2] undefined 
```

此时 Cloud9 也停止响应，我必须重新加载页面以尝试进一步使用它。

如果我添加“blinkled.js”作为文件路径，我会收到此错误：

```
'inotify' not loaded
If desired, try installing it with:
  curl http://npmjs.org/install.sh | bash
  npm install inotify
'fibers' not loaded
If desired, try installing it with:
  curl http://npmjs.org/install.sh | bash
  npm install fibers
Delay operations loops will consume CPU cycles
Invoke using 'node-fibers' if node version < 0.5.2 
```

不知道我应该在那里放什么。

我已经用谷歌搜索这些各种错误大约 24 小时了。

如果我只能让它工作，这似乎是一个很棒的工具。有任何想法吗？

**更新 1**

在意识到 opkg 未能加载所需的 inotify 和 fiber 包后，我手动安装了它们并再次尝试。现在我在命令行上收到此错误：

```
# node blinkled.js 
gpio: 38 already exported.
{ [Error: EBUSY, resource busy or locked] errno: 10, code: 'EBUSY', syscall: 'write' }
Unable to export gpio: 56 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:55:27.957

现在我意识到有多个问题：

**首先，**我应该检查文档以使 node.js 工作。当我应该使用 console.log() 时，我只是假设 alert() 是一个函数。所以一旦我意识到这一点，我就可以在 Cloud9 中运行这个文件：

```
var hello = "hello world"
console.log(hello); 
```

**其次，**当我尝试使用 npm 包管理器安装库（inotify 和光纤）时，它会将它们放在我工作目录的 node_modules 目录中：

```
/home/root/ 
```

...不是我认为的默认 Cloud9 根目录：

```
/var/lib/cloud9 
```

**第三，**我的引脚已经导出，只需重新启动 BeagleBone 即可解决。

**最后，**我发现使用最新版本的[bonescript](https://github.com/jadonk/bonescript)在我的主目录中创建一个新实例允许我运行[blinkled.js](https://github.com/jadonk/bonescript/blob/master/blinkled.js)示例文件，以及从命令行[测试 BeagleBone 上所有模拟引脚的该文件](https://gist.github.com/2794039)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:38:27.620

您可以在 /var/lib/cloud9 中执行“git pull”来获取更新。我添加的一件事是“analogRead”功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T09:05:09.000

我买了比格犬骨转速。A4。这种错误也正在发生。我刚刚用最新的埃图像制作了新的 SD 卡，然后在闪烁后正常工作。

# jquery - 获取数量change() 函数中的项目我有以下 js 代码： $("#mySelector").change(function(){ console.log($(this).length); }); 我知道这是获取选择器中项目数的错误代码。但是我应该如何以正确的方式获得这个数字？PS 通常我应该使用 $("#mySelector option").length 来获取这个数字。但是如何向 $(this) 运算符添加选项？将大型文本文件从特定字符集转换为 UTF8 我需要使用最少的内存将字符

> ID：10501765
> 
> 赞同：0
> 
> 时间：2012-05-08T15:32:52.940
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:34:36.947

```
$("#mySelector").on('change', function(){
  console.log($('select', this).length);
}); 
```

或选项？

```
$("#mySelector").on('change', function(){
  console.log($('option', this).length);
}); 
```

[小提琴](http://jsfiddle.net/adeneo/fCQKx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:37:30.910

如果您尝试`<option>`在选择下拉列表中获取总标签，您可以这样做

```
options = 0;
$('{selector} option').each(function() {
    options++;
});
alert(options);​ 
```

或由精细维加建议的更好的方法

```
$('{selector} option').length 
```

# c# - 将大型文本文件从特定字符集转换为 UTF8

> ID：10501769
> 
> 赞同：0
> 
> 时间：2012-05-08T15:33:03.483
> 
> 标签：c#, text, encoding, character-encoding, io

我需要使用最少的内存将字符编码“windows-1252”的非常大的文本文件（通常超过 100 MB）转换为 UTF8。

任何人都知道最快/最低的内存开销方法是什么？

我假设有一些超快的 StreamReader/StreamWriter 组合！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:39:16.783

如果您不想分配所有数据，您可以通过

*   首先用 StreamReader 阅读它 `"windows-1252"`
*   在同一次迭代中使用[StreamWriter](http://msdn.microsoft.com/it-it/library/f5f5x7kt.aspx)编写它，并指定`UTF-8`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:37:40.340

该[`Encoding.Convert`](http://msdn.microsoft.com/en-us/library/yyt2e46a.aspx)方法运行`byte[]`- 您可以使用小缓冲区调用它，从原始文件读取然后写入新文件。如果原始文件使用可变字节编码，则需要非常小心，只读取字符边界上的缓冲区（如果可能）。

这将根据您的需要使用尽可能多或尽可能少的内存 - 取决于您选择的缓冲区大小。

# javascript - jquery为同一范围生成具有不同值的数组

> ID：10501770
> 
> 赞同：0
> 
> 时间：2012-05-08T15:33:05.580
> 
> 标签：javascript, jquery

我需要为同一范围填充三个具有不同值的数组。

例如：

有一个这样的数组

```
var arr = [1,2,3,4,5,6]; 
```

我需要这个格式的数组

```
a[0]=[2,3,4,1,5];
a[1]=[4,3,2,1,5];
a[2]=[2,3,1,5,4]; 
```

所以数组的三个索引依次显示三个不同的数组值。

我正在尝试以下片段

```
(function($){
 $.fn.shuffle = function() {
 return this.each(function(){
 var items = $(this).children();
 return (items.length)
 ? $(this).html($.shuffle(items))
 : this;
 });
}

$.shuffle = function(arr) {
 for(
 var j, x, i = arr.length; i;
 j = parseInt(Math.random() * i),
 x = arr[--i], arr[i] = arr[j], arr[j] = x
 );
  return arr;
 }
})(jQuery);

var arr = [1,2,3,4,5,6];
a =[];
b=[];
c=[];

a = $.shuffle(arr);
b = $.shuffle(a);
c = $.shuffle(b);

document.write(a);
document.write(b);
document.write(c); 
```

# ruby-on-rails-3 - 如何让 Rails 3.0、MongoDB ( w mongo_mapper ) 在 ubuntu 10.04 上愉快地运行

> ID：10501771
> 
> 赞同：0
> 
> 时间：2012-05-08T15:33:10.293
> 
> 标签：ruby-on-rails-3, mongodb, ubuntu-10.04, mongomapper

嘿，我刚刚完成：

[http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started#Rails3-GettingStarted-InstalltheRails3](http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started#Rails3-GettingStarted-InstalltheRails3)

但它不太适合 ubuntu 10.04 ......

那么如何让它工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:53:23.263

所以这里是修复（ $ = console ）：

1.  $ Rails new my_app --skip-active-record
2.  [将http://pastie.org/3879397](http://pastie.org/3879397)粘贴到 /config/application.rb
3.  [将http://pastie.org/3879405](http://pastie.org/3879405)粘贴到 /Gemfile
4.  $ bundle install ... 可能会说一些关于 mongo 失败的事情
5.  （在 Ubuntu 中）系统 > 管理 > 软件源 > 其他软件 > 添加
    ... 粘贴：“deb [http://downloads-distro.mongodb.org/repo/ubuntu-upstart](http://downloads-distro.mongodb.org/repo/ubuntu-upstart) dist 10gen”
6.  $ sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
7.  $ sudo apt-get install mongodb-10gen
8.  浏览到：[http://localhost:28017/](http://localhost:28017/)

之后它应该看起来不错！

# java - Spring @autowired 返回空值

> ID：10501772
> 
> 赞同：2
> 
> 时间：2012-05-08T15:33:17.610
> 
> 标签：java, spring, autowired

这个特定类的成员私有字段被注释 @autowired 在服务 JAR 中，当我试图在我的代码中获取类的实例时，@autowired 成员总是返回为空。我在项目的 context.xml 中有以下组件扫描语句，它试图在 JAR 中查找基本包，但似乎空值被注入到带注释的成员中。JAR 内部还有一个 context.xml，它具有与以下相同的组件扫描条目。JAR 源代码现在无法更改，我有什么遗漏吗？

```
<!-- local WEB-INF/spring-context/spring-application-context.xml -->
<context:annotation-config /> 
<context:component-scan base-package="blah.blah" /> 
```

* * *

```
//this code within my project
//wjc.getMethod() dereferencing comes back null
 public class A{
    WithinJARInterface wjc = new WithinJARInterfaceImpl()
    List someObject = wjc.getMethod()
 } 
```

* * *

```
 //this code interface within JAR
 public interface WithinJARInterface{
    public List getMethod() throws Exception(); 
 } 
```

* * *

```
 //this code within JAR
 public class WithinJARInterfaceImpl implements WithinJARInterface{

    //below member always comes back NULL
    @Autowired
    private JARService jService;

    public List getMethod(){.....}

 } 
```

* * *

```
 public interface JARService{
    public List method1();
 } 
```

* * *

```
 @Service("JARService") 
   public class JARServiceImpl implments JARService {
     public List method1(){ }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T17:10:37.857

您正在自己构建 WithinJARInterfaceImpl（通过调用`new`），因此它不是由 spring 管理的，因此不会注入这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:56:14.997

您是否尝试用@Resource 替换@Autowired？我认为@Autowired 按类型连接，而@Resource 按bean 名称注入。

# razor - 如何设置 Visual Studio 以在 (Umbraco) 项目中创建 CSHTML 文件

> ID：10501774
> 
> 赞同：8
> 
> 时间：2012-05-08T15:33:18.880
> 
> 标签：razor, umbraco

因此，我正在 Visual Studio 中为我的 Umbraco 项目开发剃刀宏脚本。一切正常，但有两件事真的很烦人。

*   如果我想制作一个新的 CSHTML 文件，最好的解决方案是复制现有文件。
*   我没有完整的剃须刀 IntelliSense，例如 Html.Raw

有没有办法配置我的项目以使用此功能？还没有找到 .cshtml 模板。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:11:55.823

您需要安装 MVC 框架，然后当您将项目作为网站打开时，您应该能够创建和编辑带有语法突出显示的 cshtml 文件。有关详细信息，请参阅我对以下帖子的回答：

[为 Umbraco 搭建本地开发环境](https://stackoverflow.com/questions/10296463/setting-up-local-development-environment-for-umbraco)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T10:12:18.297

如果您的项目是网站/应用程序，则 mvc 模板不可用（它们仅显示在 MVC 项目中）。您可以只创建一个文本文件并使用 .cshtml 扩展名命名它（如果您愿意，可以在 VS 中为此设置自己的模板）。

要在 Razor 文件中获取智能感知，请参阅 Doug Robar[关于该主题的博客文章](http://blog.percipientstudios.com/2011/3/3/how-to-umbraco-razor-intellisense-and-debugging.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T10:02:01.773

作为替代方案，如果您进入 Umbraco 管理员，请转到“开发人员”部分并右键单击“脚本文件”，您可以直接创建 razor 脚本（这会将新的 .cshtml 直接保存到您的“macroScripts”文件夹中 - 尽管在 VS2010 中，您需要右键单击新脚本并选择“包含在项目中”）。

此外，这将允许您将新的 razor 宏脚本基于其中一个预构建的片段，这样您就可以免费获得一些核心功能。

![在此处输入图像描述](../Images/26e8ecd8429ec3a0eb1f2b5618bde965.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-11T00:13:50.547

从 Umbraco 6 开始，使用 Visual Studio 和 NuGet 在本地文件系统上安装 Umbraco 非常方便。假设您已安装 MVC 框架并使用 Visual Studio 2012 或更高版本，您将在 Visual Studio 中获得完整的 Razor 支持。Umbraco Our 有一篇[很棒的博客](http://our.umbraco.org/documentation/installation/install-umbraco-with-nuget)文章，他们详细描述了以下步骤（带有屏幕截图！）。

1.  创建一个空的 Web 应用程序。
2.  使用管理 Nuget 包 ('Umbraco CMS') 或包管理器控制台 ( `Install-Package UmbracoCms`)安装 Umbraco
3.  然后 NuGet 将下载依赖项并将所有 Umbraco 的文件安装到您的新解决方案中。在此过程中，它会询问是否允许覆盖您的 web.config 文件。（如果您在现有项目中安装 Umbraco，请备份现有的 web.config）
4.  最后，不要忘记按 F5 运行您的项目。您会看到，每当您尝试在视图文件夹中添加或编辑文件时，您都会获得剃刀支持和智能感知

# php - MongoDB：更新对象集合以更改引用的拥有方

> ID：10501778
> 
> 赞同：0
> 
> 时间：2012-05-08T15:33:24.107
> 
> 标签：php, mongodb, symfony, database, nosql

我有两个集合，组和用户。最初，我的 Group 文档包含一组 User 引用。但是我已经更改了我的映射，以便用户现在持有对组的引用。我想知道如何编写查询来更新所有现有的用户文档以引用当前正在引用它们的组，然后删除组上的任何引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:31:01.597

起初我没有注意到您使用的语言 - 我必须在 Python 中做一些非常相似的事情，所以这是我的示例代码：

```
# I changed my collection names to users/groups hope I mapped them right :)
users = db.users
groups = db.groups

for u in users.find():
    grp = groups.find( { "users" : u['userId'] } )
    u['groups'] = [ g['groupId'] for g in grp ]
    users.save(u) 
```

基本上，对于每个用户，我都会在组中查找包含数组 users 中的 userId 的组列表，然后在 u 中创建一个名为 groups 的列表，当我保存它时，将一组组添加到 users 文档中。

在 PHP 中应该不难做到

$users = $db->用户；$groups = $db->groups;

// 查找所有用户 $ucursor = $users->find();

// 遍历用户，找到有用户的组， // 用组数组更新用户 foreach ($ucursor as $u) { $gcursor = $groups->find( ... ); foreach ($gcursor as $g) { ... } }

但这似乎是一次性操作，您可以在 mongo shell 中使用类似于以下内容的操作：

```
var users = db.users.find();
while (users.hasNext()) {
   u = users.next();
   var gs = db.groups.find({"users":u.userId},{"groupId:1}).toArray();
   db.users.update({"groupId":groupId},{$set:{"groups":gs}});
} 
```

# pdf - 如何处理 LaTeX/PDF 文档评论？

> ID：10501780
> 
> 赞同：3
> 
> 时间：2012-05-08T15:33:34.990
> 
> 标签：pdf, latex, review

我是一名博士生，我通常会写一些文章，然后由我的导师校对。我通常在 LaTeX 中进行，并在 Adob​​e Reader 本身中对 PDF 输出进行评论。大多数是语法的，而且我在快速写作中大部分都错过了介词和连词。要重新表述所有内容，我必须再次在我的 LaTeX 脚本中手动输入所有内容。

这似乎是大量的工作，而且有时会重复多次。当今世界是否有任何软件可以使任务变得更容易？例如，如果文本因语法错误和建议的替代方案而突出，我是否可以接受更改以用新的短语或句子替换旧的，并且还能够删除被删除的文本。请向我推荐一个真正让我的生活更轻松的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:48:49.187

您可以将 LaTeX 源附加到 PDF（与`attachfile2`包一起），因此审阅者可以直接编辑源并将其发回。或者您尝试接受对 PDF 的评论，但目前只有 Adob​​e Reader 和 Foxit 允许这样做 - 而不是在 Linux 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:52:45.810

您可能想查看以下链接。它有一些关于版本控制的好信息。 [http://en.wikibooks.org/wiki/LaTeX/Collaborative_Writing_of_LaTeX_Documents](http://en.wikibooks.org/wiki/LaTeX/Collaborative_Writing_of_LaTeX_Documents)

# php - PHP：在一个字符串中搜索数组中的所有子字符串，然后回显任何匹配项？

> ID：10501782
> 
> 赞同：0
> 
> 时间：2012-05-08T15:33:36.970
> 
> 标签：php, arrays, string, search

```
$longString = "I walk in the park.";
$stringArray = array("walk", "park", "beach"); 
```

基本上，我想`$longString`搜索`$stringArray`. 所以在这种情况下，我想找到 walk 和 park 然后回显这些字符串。

这是可行的吗？多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:35:57.990

遍历数组并检查该字符串是否存在于长字符串中：

```
$longString = "I walk in the park and I like to jumprope.";
$stringArray = array("walk" => "walk", "park" => "park", "jumprope" => "jump rope");

foreach( $stringArray as $search => $print) {
    if( !(strpos( $longString, $search) === false)) {
        echo $print;
    }
} 
```

[演示](http://codepad.org/HtQ9mGeV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:39:48.627

```
$longString = "I walk in the park.";
$stringArray = array("walk", "park", "beach");

foreach ($stringArray as $item) {
    if (stristr($longString, $item))
        echo $item . "<br>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:40:31.343

```
$longString = "I walk in the park.";
$stringArray = array{"walk", "park", "beach",);

foreach( $stringArray as $search) {
    if(strpos( $longString, $search) !== FALSE) {
        echo $search;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:42:05.720

当然，这是可能的：

```
$longString  = "I walk in the park.";
$stringArray = array("walk", "park", "beach");

foreach ($stringArray as $key => $val) {
    if (strpos($longString, $val) === false) {
        unset($stringArray[$key]);
    }
}

var_dump($stringArray); 
```

`$stringArray`将仅包含出现在`$longString`.

# unit-testing - 在使用 GetExtension 时创建代码活动单元测试

> ID：10501795
> 
> 赞同：0
> 
> 时间：2012-05-08T15:34:14.933
> 
> 标签：unit-testing, workflow, workflow-foundation-4, mstest

如何基于集成组件创建带有上下文的单元测试？

我已经确定了问题，因为扩展正在尝试解决实现并返回错误消息：

> “你调用的对象是空的。”

我的课：

```
 public sealed class GetListOfServiceIdsToProcess
{
   public InOutArgument<IArguments> Arguments { get; set; }

    protected override void Execute(CodeActivityContext context)
    {

        // I am recieving my error exception here
        context.GetExtension<lib.Extension.MyExtenstion>();

        var targetIds= (List<int>)Settings.Get("targetIds");

        var wfa = this.Arguments.Get(context);
        wfa.ListTargetIds = targetIds;

        Arguments.Set(context, wfa);            
    }
} 
```

到目前为止我的测试：

据我所知，我对测试的实施有疑问：

```
 /// <summary>
    ///A test for Execute
    ///</summary>
    [TestMethod()]
    public void ExecuteTest()
    {
        // create Isettings mock to return collection of service ids

        var expected = new List<int>() { 30, 20 };

        var wfaInput = new TestWorkFlow();

        var serviceIdList = new GetListOfServiceIdsToProcess();
        var wfParam = new Dictionary<string, object>();
        wfParam.Add("WorkFlowArguments", wfaInput);

        var results = WorkflowInvoker.Invoke(serviceIdList, wfParam);
        var wfaResult = (IWorkFlowArguments)results["WorkFlowArguments"];

        Assert.AreEqual(expected, wfaResult.ListOfServiceIdsToProcess);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:36:40.173

而不是使用静态 WorkflowInvoker.Invoke() 新建一个 WorkflowInvoker 实例并添加一个模拟或任何测试所需的 lib.Extension.MyExtenstion 到 Extensions 集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:31:29.977

```
[TestMethod]
public void ExecuteTest()
{
    // ...

    var invoker = new WorkflowInvoker(activityToTest); 

    // This way your extension will be available during execution
    invoker.Extensions.Add(new MyExtension());

    var results = invoker.Invoke(inputArgs);

    // ....

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:52:44.507

我已经经历了多个选项，而我遇到的问题是 MS Workflow。我已经将所有逻辑从工作流代码活动中提取到单独的类中，并且这个类已经过测试。

这是我能做的最好的。因为我有注入的基类，但我无法轻松实现我需要的东西。

无论如何，谢谢大家的帮助。

# php - jQuery .ajax() 和 .post() 没有返回响应

> ID：10501796
> 
> 赞同：0
> 
> 时间：2012-05-08T15:34:15.323
> 
> 标签：php, jquery

我正在尝试使用 jQuery 的 .ajax 函数来调用 php 页面。我以前用过这个功能很多次，从来没有遇到过这个问题。无论我传递什么数据，无论我调用什么页面，我都没有得到响应。使用 Firebug，我什至看不到与 POST 请求相关的响应。

我的 ajax 代码如下所示：

```
$.post('test_ajax.php', {one : 1, two: 2}, function(data){
    alert(data);
}); 
```

我也这样做了：

```
$.ajax({
    type: "POST",
    url: "./test_ajax.php",
    data: {one: 1, two: 2},
    success:function(responseText){
        alert(responseText);
    }
}); 
```

我已经尝试过使用相对和绝对 URL - 连接到正确的页面似乎没有任何问题，只是没有返回任何响应。

警报只是空白，响应被解释为空字符串。

我的 PHP 代码如下所示：

```
<?php
var_dump($_REQUEST);
die ("Here");
?> 
```

但就像我说的，出于某种原因，根本没有回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:19:32.793

您似乎在发送 ajax 请求后立即收到“请求取消”错误。

抱歉，我没有时间完成调查/确定实际原因。

# css - jqPlot - 如何将垂直滚动条添加到包含许多图例项的图例框中

> ID：10501798
> 
> 赞同：5
> 
> 时间：2012-05-08T15:34:30.980
> 
> 标签：css, internet-explorer, jqplot

上周我问了以下问题，我得到了答案：

[jqPlot - 当有很多图例项时，饼图图例太高了](https://stackoverflow.com/questions/10434927/jqplot-pie-legend-too-tall-when-there-are-many-legend-items/10447666#comment13490437_10447666)

我现在正在寻找一种将垂直滚动条添加到我的图例框的方法，在某些情况下它可能包含 20 多个图例项。

如果我将以下设置添加到我的 CSS 文件中，我可以在 FireFox 和 Chrome 中实现我想要的结果：

```
table.jqplot-table-legend {
    display: block;
    height: 350px;
    overflow-y: scroll;
} 
```

但是我需要在 IE9 中达到同样的效果。

有人知道我需要什么 CSS 设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:13:13.590

我发现网上有些人提到了 IE 中表格溢出的一些问题，但我无法得到所需的答案。

因此，我的方法是将表格包装到另一个元素中。我将它包装在一个 div 中并在其上设置适当的值，它可以跨浏览器工作:)

要查看包装在 div 中的图例，您必须单击`Tab 3`然后单击`Where is my plot?`按钮，因为包装发生在单击按钮时。

*如果有人有更好的解决方案，请告诉我们。*

我所指[的网站之一。](http://www.imaputz.com/cssStuff/bigFourVersion.html)在这里，您有一个不错的表格，它在 IE8 中也可以正常工作，但在 IE7 和 IE9 中却不行？

人们应该切换到其他浏览器的另一个原因。

[代码在这里。](http://jsfiddle.net/UNrr3/7/)

# c++ - 查找列表项的组合

> ID：10501800
> 
> 赞同：1
> 
> 时间：2012-05-08T15:34:47.600
> 
> 标签：c++, cartesian-product

我有 n 个带有项目的 inputLists。现在我想计算包含原始 inputLists 中所有项目组合的 resultLists（长度为 n）（取每个 inputList 中的一项）。

我想我应该在这里提供一个例子（n = 3）：

```
inputList1: [item1, item2, item3]
inputList2: [item4]
inputList3: [item5, item6]

resultList1: [item1, item4, item5]
resultList2: [item1, item4, item6]
resultList3: [item2, item4, item5]
resultList4: [item2, item4, item6]
resultList5: [item3, item4, item5]
resultList6: [item3, item4, item6] 
```

我觉得有点愚蠢，但我不知道如何实现（C++）一个函数，为任何 n 和任何 inputList 长度创建这些结果。我想我应该使用某种递归，但我不知道如何。
有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:44:59.633

一个一般的想法，在伪代码中：

```
vector<item> List1, List2, List3;
// fill the lists

vector<item> v;
vector<vector<item>> results;

for each item i in List1
{
    v.push_back(i)
    for each item j in List2
    {
        v.push_back(j);
        for each item k in List3
        {
            v.push_back(k);
            results.push_back(v);
            v.pop_back();
        }
        v.pop_back();
    }
    v.pop_back();
} 
```

要在可变数量的列表上执行此操作，我会采用递归方法。然后每个 for 循环将被一个递归函数调用替换。此函数需要接受您`inputList`的 s 列表、结果列表和将中间结果（`v`在上面的示例中）存储为参数的容器。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:07:34.093

迭代器是你的朋友。两个伪代码版本，无需担心错误检查或零大小列表等极端情况：

```
struct cartesian_product_iterator {
    int indexes[n] initialized to zeroes
    operator++() {
        a = 0
        indexes[a]++;
        while a < n and indexes[a] >= list[a].size()
            indexes[a] = 0
            a++;
    }
    operator *() {
        list<?> ret;
        for a in 0..n-1:
            ret.push_back(list[a][indexes[a]]);
        return ret;
    }
    past_the_end_iterator() { indexes[n-1] = list[n-1].size(); }
} 
```

您可能会注意到`indexes`数组只是将整数分解为多个基数。这导致了第二个解决方案：

```
struct cartesian_product_iterator_2 {
    unsigned_or_arbitrarly_big_int a_large_number = 0;
    operator ++()  { a_large_number++; }
    operator *() {
        list<?> ret;
        unsigned_or_arbitrarly_big_int to_decompose = a_large_number;
        for a in 0..n-1:
            index = to_decompose % list[a].size();
            to_decompose /= list[a].size();
            ret.push_back(list[a][index]);
        }
        return ret;
    }
    past_the_end_iterator() {
       a_large_number = 1;
       for each l in list:
           a_large_number *= l.size();
    }
} 
```

至于哪个最好/更快，我真的不知道。

# sql - 使用 FTS 查询，你能找到所有条目包含 'abc'

> ID：10501805
> 
> 赞同：3
> 
> 时间：2012-05-08T15:35:05.900
> 
> 标签：sql, sql-server, tsql, full-text-search

我是全文搜索的新手，如何使用包含而不是在以下查询中使用 like 来执行搜索

```
Select * From Students Where FullName LIKE '%abc%' 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:34:28.157

检查您的目录上次使用此脚本填充的时间：

```
DECLARE @CatalogName VARCHAR(MAX)
SET     @CatalogName = 'FTS_Demo_Catalog'

SELECT
    DATEADD(ss, FULLTEXTCATALOGPROPERTY(@CatalogName,'PopulateCompletionAge'), '1/1/1990') AS LastPopulated
    ,(SELECT CASE FULLTEXTCATALOGPROPERTY(@CatalogName,'PopulateStatus')
        WHEN 0 THEN 'Idle'
        WHEN 1 THEN 'Full Population In Progress'
        WHEN 2 THEN 'Paused'
        WHEN 3 THEN 'Throttled'
        WHEN 4 THEN 'Recovering'
        WHEN 5 THEN 'Shutdown'
        WHEN 6 THEN 'Incremental Population In Progress'
        WHEN 7 THEN 'Building Index'
        WHEN 8 THEN 'Disk Full.  Paused'
        WHEN 9 THEN 'Change Tracking' END) AS PopulateStatus
FROM sys.fulltext_catalogs AS cat 
```

您可能需要重新填充全文索引才能查看当前结果。如果您定义了 FTS 列，然后将数据加载到表中，则您的搜索索引不是最新的。

![在此处输入图像描述](../Images/e33e12f0bc86851a5fa0aa5307380e58.png)

如果您需要定期更新，请查看Tech Net 上的[这篇文章](http://technet.microsoft.com/en-us/library/ms142575.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:44:27.787

就像是：

```
SELECT * From Students Where CONTAINS(FullName,'abc') 
```

[链接到 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T19:07:59.077

如果“abc”与您真正想要的内容部分匹配，请更改您的 CONTAINS 语句，如下所示：

```
SELECT   * 
FROM     Students 
WHERE    CONTAINS(FullName, '"abc*"') 
```

或者

```
SELECT   * 
FROM     Students 
WHERE    CONTAINS(FullName, '"*abc*"') 
```

来源： [MSDN - 包含](http://msdn.microsoft.com/en-us/library/aa258227%28v=sql.80%29.aspx)

# android - 将 XLS (Excel) 文件附加到电子邮件

> ID：10501806
> 
> 赞同：3
> 
> 时间：2012-05-08T15:35:14.070
> 
> 标签：android, email, attachment, excellibrary

我的应用程序使用**intent**方法向用户发送电子邮件，作为导出 Excel 电子表格数据（由[JExcell API](http://www.andykhan.com/jexcelapi/)创建）的便捷方式。

该文件包含在 SD 卡上名为**records**的文件夹中。

我尝试发送的文件是调用**measurments.xls。**

在发送之前，我已经在代码中测试了文件是否存在。电子邮件编写器显示一个附件，但是当我发送然后接收电子邮件时，附件不存在。

但是，如果我将 excel 文件替换为 png 图像，则会收到附件。那么给了什么？？

下面是我用来发送电子邮件的代码，它本身就是一个类中的参数化静态方法。

```
 public static  void sendEmailWithAttachment(Context ctx, String to,String subject, String message, String fileAndLocation)
    {
        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
        emailIntent.setType("text/plain");
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] {to}); 

        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,  subject); 
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,  message); 

          File file = new File(fileAndLocation);
         //  File file = getFileStreamPath();
           if (file.exists())
           {
               Log.v("Farmgraze", "Email file_exists!" );
           }
           else
           {
               Log.v("Farmgraze", "Email file does not exist!" );
           }

        Log.v("FarmGraze", "SEND EMAIL FileUri=" + Uri.parse("file:/"+ fileAndLocation));
        emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:/"+  fileAndLocation));

        ctx.startActivity(Intent.createChooser(emailIntent, "Send mail..."));
    }//end method 
```

那么我需要做什么来接收 xls 文件呢？更改方法代码第二行中的 mime 类型？如果有怎么办。任何有用的建议将不胜感激。

谢谢阅读。

```
A. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T19:18:18.710

好吧，伙计们只是为了解决这个问题，我找到了解决方案。

问题是发送到 URI 的文件路径字符串需要三个正斜杠。

如：

```
file:///sdcard/somefolder/some_file.xls. 
```

同样对于 excel 文档，需要按如下方式设置类型：

```
emailIntent.setType("application/excel"); 
```

所以问题是一个两管齐下的问题。我通过[这个线程](https://stackoverflow.com/questions/587917/trying-to-attach-a-file-from-sd-card-to-email)知道了三个斜线解决方案，但由于它不起作用，我认为问题出在其他地方。

[此外，我通过此网页](http://www.hosting.com/support/dedicated/iis/mimetypes)了解了正确的 mime 类型，该网页列出了所有受支持的 mime 类型，并且可能对其他读者非常有用。

因此，感谢您阅读并关注我现在解决的小问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:19:11.793

我认为问题可能与您的 mime 类型有关。试试这个：

```
MimeTypeMap mime = MimeTypeMap.getSingleton();     
String mimeTypeForXLSFile = mime.getMimeTypeFromExtension(".xls");

emailIntent.setType(mimeTypeForXLSFile); 
```

# iphone - UINavigationController 类似于 iPhone 上的 Email App

> ID：10501807
> 
> 赞同：0
> 
> 时间：2012-05-08T15:35:14.613
> 
> 标签：iphone, ios5, uinavigationcontroller, uinavigationbar

我正在开发一个使用 UINavigationController 的应用程序。我的导航控制器的根视图控制器正在执行类似于电子邮件应用程序的搜索。当我按下搜索栏时，我隐藏了导航栏。当我显示结果时，我的导航栏仍然隐藏，当我点击其中一个结果时，我想在堆栈上推送一个新的视图控制器。问题是，如果我让导航栏可见，它的动画效果真的很有趣，从顶部掉下来。我希望它完全像在电子邮件应用程序中一样，自然地从右侧出现，已经放置在我的推送视图控制器的顶部。而且，当我按下返回时，我想以相同的状态呈现我的根视图控制器：搜索栏“超过”导航栏。我希望我尽可能清楚地说明自己。

谢谢！

# wpf - wpf 无需硬编码即可进行相对设计，即使是单个宽度或高度

> ID：10501808
> 
> 赞同：0
> 
> 时间：2012-05-08T15:35:15.027
> 
> 标签：wpf, wpf-controls

如果我们拉伸窗口，任何人都可以帮助如何使wpf优化设计意义，里面的所有控件都应该与父控件相对扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:39:33.773

您的问题可能过于模糊，最终可能会被关闭，或者您会被要求澄清。但是，如果您希望控件随其父项一起增长/缩小，您可能需要关注的布局部分是[`Grid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx). 如果您对列/行使用基于星号的大小，则事物将相对于彼此和父级增长/缩小。我建议您阅读该概念以及其他[布局概念](http://msdn.microsoft.com/en-us/library/ms754152.aspx)。

# git - 如何填写一个空的提交信息？

> ID：10501814
> 
> 赞同：6
> 
> 时间：2012-05-08T15:35:59.300
> 
> 标签：git

直到一分钟前，我有一个 Git 存储库，其中最后一次提交有一个空的提交消息。我已经通过将一个新的提交压缩到它上面来填充它`git rebase -i`（我本来打算修改内容），但我仍然想知道是否有合适的方法来填充空的提交消息。

我试过

```
git commit --amend 
```

但这没有用，然后我尝试了

```
git rebase -i HEAD^ 
```

和一个`reword`。两次尝试都导致 Git 说

```
fatal: commit has empty message 
```

并退出。

**编辑**：澄清一下，最终奏效的是

```
# change some stuff
git commit
git rebase -i HEAD~2
# squash the last two commits 
```

但这似乎是一个黑客行为。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T17:00:32.113

这似乎是一个尚未修复的错误（尽管有建议的补丁）[。](http://git.661346.n2.nabble.com/PATCH-commit-allow-amend-c-foo-when-HEAD-foo-has-empty-message-td7324888.html)作为一种解决方法，您可以在命令行上提供消息：

```
git commit --amend -m "foo" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:49:40.853

如果您需要编辑最后一次提交 (HEAD) 消息，请使用`git commit --amend -m 'new message'`

```
$ git commit --allow-empty --allow-empty-message -m ''
[master 5db8236] 

$ git commit --amend
fatal: commit has empty message

$ git commit --allow-empty --amend -m 'new message'
[master d383d5c] new message 
```

请记住，我`--allow-empty`只是用来强制`git commit`创建一个空提交并`--allow-empty-message`强制`git commit`创建一个带有空消息的提交。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-26T18:39:49.140

从 git 2.0.1（2014 年 6 月 25 日）开始，当您变基并尝试放置一个空提交消息时，git 将不再抱怨。

请参阅[Jeff King的](https://github.com/peff)[提交 076cbd6](https://github.com/git/git/commit/076cbd6341182d296671cb101c75145eb3bfda0a) ( [)](https://github.com/peff)[`peff`](https://github.com/peff)

### `commit`：不要抱怨来自的空消息`-C`

> 当我们选择另一个提交的消息时，`die()`如果我们发现它是空的并且我们不会运行编辑器（即，当运行“ `-C`”而不是“ `-c`”时），我们会立即。
> 但是，这种检查是多余的和有害的。
> 
> 这是多余的，因为我们稍后会注意到空消息，在我们运行编辑器并死在那里之后（就像我们在普通情况下所做的那样，而不是 " `-C`" 情况，用户在编辑器中提供了空消息）。
> 
> 它有害有几个原因：
> 
> 1.  它不尊重`--allow-empty-message`。**结果，“ `git rebase -i`”不能“挑选”这样的提交**。
>     因此，您甚至无法通过“ `reword`”或“ `edit`”指令及时返回修复它。
> 2.  不考虑编辑器以外的其他方式修改消息。
>     例如， " `git commit -C empty-commit -m foo`" 可以从 empty-commit 中获取作者信息，但添加一条消息。
>     要使其正常工作还有更多工作要做（现在我们明确禁止“ `-C`with `-m`”），但这消除了一个障碍。
> 3.  现有的检查不足以防止段错误。
>     我们尝试`\n\n`在提交中找到“”标题/正文边界。如果它在字符串的末尾（即，没有正文），*或者*我们根本找不到它（即，截断的提交对象），我们认为该消息为空。
>     有“ `-C`”，没关系；我们`die`在任何一种情况下。但是使用“ `-c`”，我们继续，并且在截断提交的情况下最终可能会取消引用`NULL+2`。

* * *

注意：对于 Git 2.19，`git rebase`将`--allow-empty-message`默认使用。
请参阅“[使用空提交消息重新设置 git 历史记录](https://stackoverflow.com/a/48977896/6309)”。

* * *

确保使用 Git 2.25（2020 年第一季度）：定序器机器比较了 HEAD 和它尝试提交的状态，以确定结果是否为无操作提交，即使在修改提交时也是如此，这是不正确的，并且已更正。

请参阅[Phillip Wood ( ) 的](https://github.com/phillipwood)[提交 2d05ef2](https://github.com/git/git/commit/2d05ef2778b99e05e6a8a40c5b8d59a3c4ab1274)（2019 年 11 月 22 日[）](https://github.com/phillipwood)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c920859](https://github.com/git/git/commit/c9208597a986509e6ce9b3c7936fd7a2b3bb3e43))^(中，2019 年 12 月 5 日）)[`phillipwood`](https://github.com/phillipwood)
^([`gitster`](https://github.com/gitster))

> ## [`sequencer`](https://github.com/git/git/commit/2d05ef2778b99e05e6a8a40c5b8d59a3c4ab1274)：修复修改时的空提交检查
> 
> ^(签字人：菲利普·伍德)
> 
> 这修复了[356ee4659b](https://github.com/git/git/commit/356ee4659bb551cd9464b317d691827276752c2d)中引入的回归（“ `sequencer`：尝试在不分叉 'git commit' 的情况下提交”，2017-11-24，Git v2.17.0-rc0 --[批次 #2](https://github.com/git/git/commit/b2e45c695d09f6a31ce09347ae0a5d2cdfe9dd4e)中列出的[合并](https://github.com/git/git/commit/1772ad1125a6f8a5473d73bbd17162bb20ebd825)）。在检查提交是否为空时， 修改提交时使用了错误的父级。修改时我们需要检查not 。
> `try_to_commit()``HEAD^``HEAD`
> 
> 该系列将改变这些测试以检查建议是否包括建议`rebase --skip`跳过将清空提交的修复。

# javascript - 在拖动事件Javascript期间禁用链接

> ID：10501816
> 
> 赞同：1
> 
> 时间：2012-05-08T15:36:10.667
> 
> 标签：javascript, drag

我在处理一些拖动事件时遇到问题......我正在处理的是一个可拖动的控制面板，我想在拖动过程中禁用点击事件。有没有办法在拖动过程中全局禁用点击事件？我发现的另一个问题是，当有人在链接或图像上开始拖动时，您会得到图像/链接的伪元素拖动，然后控制面板卡在鼠标上，因为原始拖动事件在某处吃掉了.

任何帮助或方向都会很好。

这就是我正在使用的

```
 dragElement.mousedown(function(event) {
    sticker.css('cursor', 'move');
    if ((event.button == 1 && window.event != null) || event.button == 0) {
      //second catch here in case user stops drag and re-initiates drag
      //without moving away from sticker
      document.onselectstart = function() {
        return false;
      };
      startDrag(event);
    }
  });

  $(document).mousemove(function(event) {
    handleDrag(event);
  });

  dragElement.mouseup(function() {
    endDrag();
    $(document).unbind('mousemove', handleDrag);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T06:48:49.343

对于链接或图像元素，尝试通过原始 JavaScript 阻止它们的默认行为

```
event.preventDefault(); //standard browser 
```

或者

```
event.returnValue=true; //IE 
```

或者只是 jQuery 中的一个函数

```
event.preventDefault(); 
```

# asp.net - 站点范围的页面加载事件

> ID：10501817
> 
> 赞同：0
> 
> 时间：2012-05-08T15:36:15.820
> 
> 标签：asp.net, pageload

我有一些东西应该在aspx应用程序中的每个page_load事件中运行，我将如何去做，我查看了asax文件，但我找不到我想要的......

我特别想根据用户连接一些javascript代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:38:41.680

您可以使用[MasterPage](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)并让站点中的每个页面都继承该 MasterPage。注意[主/内容页面中的事件顺序](http://msdn.microsoft.com/en-us/library/dct97kc3.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:40:35.053

您可以创建一个继承自 System.Web.UI.Page 的基类（您将把您的 javascript 放在该基类中）

然后在您的每个 aspx 页面中，只需让页面派生自您的基类。

# asp.net-mvc - 请求的 URL 未返回 Json

> ID：10501818
> 
> 赞同：0
> 
> 时间：2012-05-08T15:36:39.140
> 
> 标签：asp.net-mvc, json, partial-views

这是我在 MyPartialView 中的网格：

```
@(Html.Telerik().Grid<MyClass>()
        .Name("GridMyClass")
        .ToolBar(commands => commands.Insert().ButtonType(GridButtonType.BareImage))
            .DataKeys(keys => keys.Add(a => a.Id))
                    .ClientEvents(events => events.OnError("Grid_onError"))
        .Columns(columns =>
        {
            columns.Bound(p => p.Name).Width(110);
            columns.Bound(p => p.Timestamp).Width(110).Format("{0:MM/dd/yyyy}");
            columns.Command(commands =>
            {
                commands.Edit().ButtonType(GridButtonType.BareImage);
                commands.Delete().ButtonType(GridButtonType.BareImage);
            }).Width(180).Title("Edit");
        })
        .DataBinding(dataBinding =>
        {
            dataBinding.Ajax()
            .Select("Ge", "MyClass")
            .Update("Edit", "MyClass")
            .Delete("Delete", "MyClass")
            .Insert("Insert", "MyClass");
        })
    .Pageable()
    .Sortable()
    //.Scrollable()
    //.Groupable()
    //.Filterable()
    //.Editable(editing => editing.Mode(GridEditMode.InLine)) 
```

)

这是控制器方法之一（其他类似）：

```
public ActionResult Delete()
    {
        //delete

        //get the model

        List<MyClassTemplate> ct = new List<MyClassTemplate>();
        //fill ct
        return PartialView("MyPartialView", new GridModel<MyClassTemplate> { Data = ct });
    } 
```

还有另一个控制器方法：

```
public ActionResult MyPartialView()
    {
        List<MyClassTemplate> ct = new List<MyClassTemplate>();
        //fill ct 
        return PartialView(ct);//new GridModel(ct)
    } 
```

当我在网格中编辑一行并单击图像以保存编辑的行时，我会通过控制器方法使用断点。一切安好。ct 值还可以。但是，我收到警报“错误！请求的 URL 未返回 Json。”。哪个 url 没有返回 json？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:29:57.780

这个错误是不言自明的。我应该返回 json，而不是部分视图。

# c# - 将节点保存到另一个文件 xml Windows phone 7

> ID：10501821
> 
> 赞同：0
> 
> 时间：2012-05-08T15:36:53.170
> 
> 标签：c#, xml, windows-phone-7

我有一个 XML 文件：

```
<Root>
     <Lv1>
          <1_Data_Lv2_1>A1</1_Data_Lv2_1>
          <2_Data_Lv2_1>A2</2_Data_Lv2_1>
     </Lv1>
     <Lv1>
          <1_Data_Lv2_1>B1</1_Data_Lv2_1>
          <2_Data_Lv2_1>B2</2_Data_Lv2_1>
     </Lv1>
</Root> 
```

**C＃**

```
using (var myStream = new IsolatedStorageFileStream("Settings.xml", FileMode.Open, myIsolatedStorage))
{
    xdoc = XDocument.Load(myStream);
} 

var lv1s = from lv1 in xdoc.Elements("Root")
           select new
           {
               Children = lv1.Descendants("Lv1")
           };

foreach (var lv1 in lv1s)
{
    foreach (var lv2 in lv1.Children)
    {
        MessageBox.Show(Convert.ToString(lv2.Value));
    }
} 
```

如何获取 <1_Data_Lv2_1> == "A1" 的所有节点 lv1 并写入另一个 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:42:39.667

发布的 XML 无效，因为节点不能以数字开头，即`1_Data_Lv2_1`应该是`One_Data_Lv2_1`并且`2_Data_Lv2_1`应该是`Two_Data_Lv2_1`

进行更改后，您可以找到`One_Data_Lv2_1`值为 A1 的所有节点：

```
var doc = XDocument.Load( myStream );
// find all descendant nodes with a value of A1
var a1s = doc.Root.Descendants( "One_Data_Lv2_1" )
                 .Where( x => x.Value == "A1" )

foreach( XElement e in a1s )
{
    Debug.WriteLine( e.Value );
} 
```

要将查询结果添加到新的 XML 文档：

```
var doc2 = new XDocument();
var root = new XElement("Root");
var lvl = new XElement( "LvlNew" );
// adding the a1s collection to the lvl node
lvl.Add( a1s );
root.Add( lvl );
doc2.Add( root ); 
```

看起来像：

```
<Root>
  <LvlNew>
    <One_Data_Lv2_1>A1</One_Data_Lv2_1>
  </LvlNew>
</Root> 
```

# sql-server - SSRS 或带有 QuickBooks (QBW) 文件的 Crystal Reports？

> ID：10501824
> 
> 赞同：2
> 
> 时间：2012-05-08T15:36:57.753
> 
> 标签：sql-server, reporting-services, ssrs-2008, birt, quickbooks

有没有办法从 QBW 文件中导出 QuickBooks 数据以使用 SSRS 或 Crystal Reports 生成自定义报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:47:41.363

这里还有一些 QuickBooks 数据桥：

1.  [QODBC](http://qodbc.com/default.htm)
2.  [RSS总线](http://www.rssbus.com/ado/quickbooks/)
3.  [开放同步](http://www.synergration.com/software/opensync/)

# java - 谷歌天气 API 条件

> ID：10501825
> 
> 赞同：0
> 
> 时间：2012-05-08T15:36:58.273
> 
> 标签：java, api, weather, weather-api, google-weather-api

我正在使用 SAX 从谷歌天气 API 中提取信息，但我遇到了“条件”问题。

具体来说，我正在使用此代码：

```
public void startElement (String uri, String name, String qName, Attributes atts) {
    if (qName.compareTo("condition") == 0) {
        String cCond = atts.getValue(0);
        System.out.println("Current Conditions: " + cCond);
        currentConditions.add(cCond);
    } 
```

要从这样的东西中提取 XML：

[http://www.google.com/ig/api?weather=波士顿+MA](http://www.google.com/ig/api?weather=Boston+MA)

同时，我试图仅获取当天的条件，而不是将来的任何日子。

是否可以根据 XML 文件中的内容对 xml 进行一些检查以仅提取当前的数据？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:29:39.510

这应该可以解决问题。请记住，如果您使用的是框架，它可能具有 XPath 的实用程序函数以使其更简单。

```
import java.io.IOException;
import org.w3c.dom.*;
import org.xml.sax.SAXException;
import javax.xml.parsers.*;
import javax.xml.xpath.*;

public class XPathWeather {

  public static void main(String[] args) 
   throws ParserConfigurationException, SAXException, 
          IOException, XPathExpressionException {

    DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document doc = builder.parse("/tmp/weather.xml");

    XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();
    XPathExpression expr = xpath.compile("/xml_api_reply/weather/current_conditions/condition/@data");

    String result = (String) expr.evaluate(doc, XPathConstants.STRING);
    System.out.println(result); 
  }

} 
```

# javascript - 用于桌面触摸屏应用程序的 JavaScript 框架？

> ID：10501826
> 
> 赞同：5
> 
> 时间：2012-05-08T15:37:00.470
> 
> 标签：javascript, frameworks, web

是否有框架可以帮助为非移动触摸屏设备（例如零售店的售货亭）设计丰富的用户体验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:21:34.527

保持与设备无关并使用[响应式设计](http://thinkvitamin.com/design/beginners-guide-to-responsive-web-design/)：[320andUp](http://stuffandnonsense.co.uk/projects/320andup/)和[Bootstrap](http://www.github.com/twitter/bootstrap/)是两个响应式框架，它们限制了触摸设备——桌面触摸在尺寸和 UX/UI 方面与平板触摸设备应该没有太大区别。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T04:36:52.193

根据我目前的调查，[Microsoft Surface](http://msdn.microsoft.com/en-us/windows/desktop/hh241326.aspx)是唯一完全支持我的多点触控触摸屏的解决方案。[Microsoft Touch Pack](http://www.microsoft.com/en-us/download/details.aspx?id=17368)是一组使用 Surface 编写的精美应用程序。显然将您绑定到 Windows，并且还需要 XNA 框架和 C# 4.0。

我从您的标签中看到您希望使用 javascript 框架。我也是，但不幸的是，我知道没有一个完全支持多点触控桌面触摸屏。[JQuery Mobile](http://jquerymobile.com/)适用于小屏幕（例如全窗口宽度按钮）。[Sencha](http://www.sencha.com/)不完全支持桌面触摸屏（例如，Chrome 中没有拖放功能）并且针对的是移动设备。但是，也许它们的功能足以满足您的要求？

我还没有安装 Windows 8，但它至少应该是为触摸屏设计的，所以...

# reporting-services - SSRS - 传递多个硬编码向下钻取参数

> ID：10501828
> 
> 赞同：0
> 
> 时间：2012-05-08T15:37:10.713
> 
> 标签：reporting-services, ssrs-2008, ssas, drilldown

我正在使用 SSAS 作为数据源构建 SSRS 报告，并且我需要深入研究以在我的帐户群体中包含 6 个帐户阶段中的 4 个。问题源于无法使用 [All] 成员，因为我只需要 6 个阶段中的 4 个。

有没有办法通过建立一个我想使用的硬编码参数列表来将多个值传递给向下钻取报告？

我认为 Join 功能是我的工作，但到目前为止我一直没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:27:29.443

我们遇到过类似的情况，我们想要一个深入报告来显示两类项目，而不仅仅是一个。

我们找不到一个优雅的解决方法，尝试在参数中放置数组，并且几乎写了一个返回表的函数。

当我们意识到您只是添加另一个参数传递具有第二个值的相同属性时，我们打了自己一巴掌。

*下面的例子：*

`I have 3 types of item. I have 2 cells in a report. One of which I want to drill down to a report on Type 1, and the other I want to drill down to the same report on Type 2 and Type 3.`

对于我要钻取到类型 1 的单元格，我们使用了参数！函数，但是对于类型 2 和 3 向下钻取，我们只是将类型参数硬编码了两次。

一次通过Type 2，一次通过Type 3。

它并不优雅，但它确实有效。

# c - Linux getenv() 无法获取 $PS1 或 $PS2

> ID：10501830
> 
> 赞同：8
> 
> 时间：2012-05-08T15:37:15.113
> 
> 标签：c, linux, shell, environment-variables

我的家乡是写一个shell。我必须使用`$PS2`.

但是当我写这样的代码时：

```
char *ENV_ps2;
ENV_ps2 = getenv("PS2"); 
```

我刚刚发现`ENV_ps2`是指向`(null)`.

我怎么能`$PS2`在我的程序中获得？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T15:40:15.167

和shell 变量不会被*导出*`PS1`，因此无法从子进程访问。您可以使用一个简单的脚本对此进行测试：`PS2`

 *```
$ cat /tmp/pstest.sh
#!/bin/sh

echo PS1=$PS1
echo PS2=$PS2

$ /tmp/pstest.sh 
PS1=
PS2= 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:45:05.073

在 bash 中，`$PS1`and`$PS2`是 shell 变量，而不是环境变量（至少通常如此）。它们在 bash 本身中设置为默认值，或者由用户以交互方式或在启动脚本（例如 或 ）中显式`.profile`设置`.bashrc`。

它们不能通过 访问`getenv()`，并且它们不会被分叉的子进程继承。它们由 shell 自己的 shell 变量机制在内部进行管理。

如果您正在编写自己的 shell，那么做类似的事情可能是有意义的。

您可以查看 bash 源代码。它庞大而复杂，但寻找`PS1`并`PS2`可能具有指导意义。（您不必使用 bash 使用的完全相同的机制；您可能想要更简单的东西。）

（你可以键入`export PS1`变成`$PS1`环境变量，但这样做没有多大意义。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:21:57.530

这些环境变量不会被导出。

如果您想要一种非便携式方法，您可以定义并导出任意环境变量，然后在 .bashrc/.bash_profile 中将 PS1/PS2 设置为该值。

例如：

```
# bashrc
MY_PS1="..........."
export $MY_PS1

...
...
...
PS1=$MY_PS1 
```*

# jquery - 如何将 [object, object] 的数组转换为 html()？

> ID：10501831
> 
> 赞同：2
> 
> 时间：2012-05-08T15:37:25.070
> 
> 标签：jquery

我似乎无法弄清楚：

```
$(".task:last").append(  

$("<div/>", {class: 'clear'}) +  
$("<div/>", {class: 'time', text: '3:30pm'}) +
$("<div/>", {class: 'clear'}) 

) 
```

不幸的是，这会以一堆 [object, Object] 的形式返回。如何附加 HTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:39:05.010

```
var first = $("<div/>", {"class": 'clear'}),
    second = $("<div/>", {"class": 'time', text: '3:30pm'}),
    third = $("<div/>", {"class": 'clear'}) ;
$(".task:last").append(first, second, third); 
```

你也可以试试：

```
$(".task:last").append( 
    $("<div/>", {class: 'clear'}),
    $("<div/>", {class: 'time', text: '3:30pm'}),
    $("<div/>", {class: 'clear'})
); 
```

使用数组：

```
var element = [
    $("<div/>", {class: 'clear'}),
    $("<div/>", {class: 'time', text: '3:30pm'}),
    $("<div/>", {class: 'clear'})
];

$.each(element, function() {
  this.appendTo('.task:last');
}); 
```

或者

```
$.each(element, function() {
  $('.task:last').append(this);
}); 
```

**笔记：**

不是`class: 'clear'`，是应该`'class': 'clear'`或`className: 'clear'`。因为`class`是保留关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:45:17.300

```
 $(".task:last").append($("<div/>", { class: 'clear' }));
        $(".task:last").append($("<div/>", { class: 'time', text: '3:30pm' }));
        $(".task:last").append($("<div/>", { class: 'clear' })); 
```

//或者

```
$(".task:last").append($("<div/>", { class: 'clear' }), $("<div/>", { class: 'time', text: '3:30pm' }), $("<div/>", { class: 'clear' })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:49:09.733

```
var elms = [$("<div/>", {className: 'clear'}), 
            $("<div/>", {className: 'time', text: '3:30pm'}), 
            $("<div/>", {className: 'clear'}) 
           ];

$(".task:last").append(elms[0], elms[1], elms[2]);​ 
```

[小提琴](http://jsfiddle.net/adeneo/66NwJ/)

或者

```
var elms = [$("<div/>", {className: 'clear'}), 
            $("<div/>", {className: 'time', text: '3:30pm'}), 
            $("<div/>", {className: 'clear'}) 
           ];

$.each(elms, function() {
     $(this).appendTo(".task:last");
});
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:50:50.813

```
var t = '3:30pm';
var $el = '<div class="clear" /><div class="time"> Time: '+t+'</div><div class="clear" />';
    $(".task:last").append( $el ); 
```

[http://jsbin.com/izegut/edit#javascript,html,live](http://jsbin.com/izegut/edit#javascript,html,live)

# mysql - 使用 Subversion 进行 MySQL 版本控制

> ID：10501835
> 
> 赞同：1
> 
> 时间：2012-05-08T15:37:39.967
> 
> 标签：mysql, svn

是否有任何集成解决方案？

如果我每次进行重大更改时都创建一个名为 mysql 的文件夹并将 sql 转储到那里，它会起作用吗？

Subversion 是完美的，但你如何处理 db 部分？有人可以解释他们的工作流程吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:41:19.080

我正在使用简单的批处理文件将任何更改导出/导入数据库。刚刚使用以下文件创建了附加文件夹 _db：

导入.bat：

```
if exist c:\mysql\bin\mysql.exe goto work1

exit

:work1
C:\mysql\bin\mysql.exe -u root --default-character-set=utf8<C:\project\_db\dbName_dc.sql
C:\mysql\bin\mysql.exe -u root -D dbName --default-character-set=utf8<C:\project\_db\dbName.sql
pause
exit 
```

出口.bat

```
if exist c:\mysql\bin\mysql.exe goto work1

exit

:work1
C:\mysql\bin\mysqldump.exe -u root --default-character-set=utf8 dbName>C:\project\_db\dbName.sql
C:\mysql\bin\mysqldump.exe -u root -d --default-character-set=utf8 dbName>C:\project\_db\dbName_struct.sql
pause
exit 
```

dbName_dc.sql

```
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
DROP DATABASE IF EXISTS `dbName`;
CREATE DATABASE `dbName`;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */; 
```

为类似unix的系统编写类似的文件不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:48:19.110

您可能想了解 Scott Ambler 和 ThoughtWorks 对敏捷数据库所做的事情，看看您的想法：

[http://www.amazon.com/s/ref=nb_sb_ss_i_0_14?url=search-alias%3Dstripbooks&field-keywords=agile+database+techniques&sprefix=agile+database%2Cstripbooks%2C131](http://www.amazon.com/s/ref=nb_sb_ss_i_0_14?url=search-alias%3Dstripbooks&field-keywords=agile+database+techniques&sprefix=agile+database%2Cstripbooks%2C131)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:57:23.177

Ruby on Rails 使用一种称为[迁移](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)的技术来跟踪数据库模式的变化。它会自动创建一个名为的文件`development_structure.sql`（如果它不存在，您可以通过调用 rake db:structure:dump 来创建它）。如果您每次进行重大更改时都在 SVN 中提交或签入此文件，那么您将在 SVN 中存储您的数据库更改。它包含 CREATE TABLE 命令，如下所示：

```
CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `login` varchar(255) NOT NULL,
  `email` varchar(255) DEFAULT NULL,
  ..
) 
```

# c# - 如何在 C# 中获取 .NET 模块的图像基值？

> ID：10501838
> 
> 赞同：0
> 
> 时间：2012-05-08T15:37:42.433
> 
> 标签：c#, .net, manifest

我正在编写一个生成 .NET 程序集清单的库，我需要获取程序集模块的图像基础值。如何在 C# 中获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:48:29.027

您必须阅读 DLL 或 EXE 的 Portable Executable Header。可以在此处找到执行此操作的说明：

**[在 C# http://code.cheesydesign.com/?p=572](http://code.cheesydesign.com/?p=572)**中读取可移植可执行文件 (PE) 标头**** 

 **`ImageBase`位于`IMAGE_OPTIONAL_HEADER32`：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct IMAGE_OPTIONAL_HEADER32 {
  public UInt16 Magic;
  public Byte MajorLinkerVersion;
  public Byte MinorLinkerVersion;
  public UInt32 SizeOfCode;
  public UInt32 SizeOfInitializedData;
  public UInt32 SizeOfUninitializedData;
  public UInt32 AddressOfEntryPoint;
  public UInt32 BaseOfCode;
  public UInt32 BaseOfData;
  public UInt32 ImageBase;         <------------------ Here
  public UInt32 SectionAlignment;
  public UInt32 FileAlignment;
  public UInt16 MajorOperatingSystemVersion;
  public UInt16 MinorOperatingSystemVersion;
  public UInt16 MajorImageVersion;
  public UInt16 MinorImageVersion;
  public UInt16 MajorSubsystemVersion;
  public UInt16 MinorSubsystemVersion;
  public UInt32 Win32VersionValue;
  public UInt32 SizeOfImage;
  public UInt32 SizeOfHeaders;
  public UInt32 CheckSum;
  public UInt16 Subsystem;
  public UInt16 DllCharacteristics;
  public UInt32 SizeOfStackReserve;
  public UInt32 SizeOfStackCommit;
  public UInt32 SizeOfHeapReserve;
  public UInt32 SizeOfHeapCommit;
  public UInt32 LoaderFlags;
  public UInt32 NumberOfRvaAndSizes;
} 
```**

# actionscript-3 - 无法删除 stagewebview

> ID：10501842
> 
> 赞同：0
> 
> 时间：2012-05-08T15:37:58.300
> 
> 标签：actionscript-3, apache-flex, starling-framework

**[更新]**我终于修复了它，将`StageWebView`实例放入这样的`MovieClip`实例中：

```
 package eu.lafactoria.PF
    {
        import flash.display.Bitmap;
        import flash.display.MovieClip;
        import flash.geom.Rectangle;
        import flash.media.StageWebView;

    public class PFWebView extends MovieClip
    {
        //==========================================================//
        //==    VARIABLES
        //==========================================================//
        private var mWebView:StageWebView;
        [Embed(source='/assets/bt_enrera.png')]     //TODO: Posar l'imatge bona
        private static var mCloseButtonImage:Class;

        private var mCloseButton:Bitmap;

        //==========================================================//
        //==    CONSTRUCTOR
        //==========================================================//
        public function PFWebView(){
            mCloseButton = new mCloseButtonImage(); 
        }

        //==========================================================//
        //==    SHOW
        //==========================================================//
        public function show(url:String, margin:int = 0):void{

            //FIXME: Arreglar boto de tancar

            mWebView            = new StageWebView(); 
            mWebView.stage      = this.stage; 

            mWebView.viewPort   = new Rectangle( margin, margin, stage.stageWidth - margin*2, stage.stageHeight - margin*2);
            mWebView.loadURL(url);

            this.addChild(mCloseButton);
            mCloseButton.x = stage.stageWidth - margin*2;
            mCloseButton.y = margin           - mCloseButton.height + 5;
        }

        //==========================================================//
        //==    HIDE
        //==========================================================//
        public function hide():void{
            if(mWebView != null)
                mWebView.stage = null;
            else
                trace("[PFWebView] Trying to hide a webiew not shown  yet");

            this.removeChild(mCloseButton);
            //this.parent.removeChild(this);
        }
    }
} 
```

**[原始问题]** 我有一个 Flex 应用程序，我在其中添加了`StageWebView`这样的实例

```
 mCredits = new StageWebView();
        mCredits.loadURL("http://www.google.es");

        mCredits.stage    = mMainSprite.stage;
        mCredits.viewPort = new Rectangle( margin, margin, mMainSprite.stage.stageWidth - margin*2, mMainSprite.stage.stageHeight - margin-2); 
```

但是当我想删除它以便应用程序再次可见时，它不起作用，我这样：

```
 mCredits.viewPort = null;
        mCredits.stage    = null;
        mCredits.dispose();
        mCredits          = null; 
```

你们中的任何人都知道它为什么不起作用吗？谢谢！

# iphone - iPhone SDK - EventKit 时区问题

> ID：10501846
> 
> 赞同：0
> 
> 时间：2012-05-08T15:38:17.440
> 
> 标签：iphone, objective-c, ios4

在我的 iPhone 应用程序中将事件添加到日历时遇到了一些问题。

我正在使用代码：

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title     = self.event.eventTitle;
event.startDate = self.event.startDate;
event.endDate   = self.event.endDate;
event.notes     = self.event.description;

[event setCalendar:[eventStore defaultCalendarForNewEvents]];
NSError *err;   
[eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

这在我的日历中添加了一个`event`就好了。问题是我的时区显然是关闭的。例如，`self.event.startdate`调试器中的输出为`012-05-11 20:45:00 +0000`，这是正确的。但是，当我查看日历时，该事件是在**下午 4:45**添加的（而不是应该是下午**20:45**或**8:45 ）。**

当我使用 po 事件输出整个事件对象时，我得到：

```
EKEvent <0xf853320> {EKEvent <0xf853320> {title = Tuesday Night Lights!; location = (null); calendar = (null); alarms = (null); URL = (null); lastModified = (null); timeZone = EST (GMT-05:00) offset -18000}; location = (null); startDate = 2012-05-11 20:45:00 +0000; endDate = 2012-05-11 21:45:00 +0000; allDay = 0; floating = 0; recurrence = (null); attendees = (null)} 
```

这里`startDate`也正确读取。我位于**EST**时区（我的手机也是如此），**那么如何获取代码以在晚上 8:45 将事件添加到我的日历中？**

任何想法都会非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:48:42.117

在正确的时间添加事件。这只是用正确的时区校正显示时间的问题。我发现这解决了我的问题：

而不是这样写：

```
NSLog(@"startDate: %@", [startDate description]); 
```

像这样写：

```
NSLog(@"startDate: %@", [startDate descriptionWithLocale:[NSLocale currentLocale]]); 
```

希望这可以帮助您解决问题。

# php - 无法显示按钮的正确标题

> ID：10501849
> 
> 赞同：1
> 
> 时间：2012-05-08T15:38:34.927
> 
> 标签：php, html

我想通过 from 发送一些信息，执行一个应该读取值的 php 文件。我在 html 中有一个表单，并且有一个（声明的）变量，其名称是 $matricola。
这是我编写的代码的一部分：

```
<form action="cancella.php" method="get">
<input type="submit" name="matricola" value=' . $matricola . ' />
</form> 
```

cancella.php 是应该被召回的文件，我希望在这个 php 文件中 $_GET['matricola'] 将写入的值是 $matricola （这是一个数字）。
但问题是我显示这个图像：
![在此处输入图像描述](../Images/a5a6386c395106e396ae4d39142c30a6.png)

其中 10000 是 $matricola 的正确值，但我不想显示“10000”作为按钮的标题！！！我只希望 $_GET['matricola'] 的值是 10000（当然是可变的，并不总是 10000），然后放另一个按钮的标题。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:41:27.187

不要将数据存储在提交按钮中。将其隐藏在隐藏字段中。

```
<form action="cancella.php" method="get">
   <input type="hidden" name="matricola" value=' . $matricola . ' />
   <input type="submit" name="submitBtn" value="Submit">
</form> 
```

数据仍然可以在您的 PHP 代码中以完全相同的方式访问：

```
$matricola = $_GET['matricola']; 
```

在数据库操作中使用此值之前，请务必过滤并验证输入，以避免可能的 SQL 注入。永远不要相信来自您的 Web 应用程序用户的输入。

# forms - 主题化 Drupal 7 中的节点（使用特定内容类型生成的节点）

> ID：10501850
> 
> 赞同：0
> 
> 时间：2012-05-08T15:38:35.473
> 
> 标签：forms, drupal-7, field, theming

我继续开发我的第一个模块，我遇到了最后一个问题。事实上，我想在用户创建新内容类型时自定义我的节点。

点击[这里](https://docs.google.com/document/d/1Cu1zuKaWF97J5LujfMv-lW7YOTENDtLALAPDQUO0tIA/edit)了解我的表格是如何工作的

但我不知道如何自定义节点并应用样式。它应该创建一个包含用户发送的不同信息的表。

你们中有人知道它是如何工作的吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:43:02.537

您的第一张图片看起来所有内容都作为一个字段提交，这是正确的吗？

如果有一种方法可以将其作为单独的字段重做，那么使用 Views 获取输入并以多种不同的方式使用它会容易得多。

# java - 在 AppEngine 中安全处理并发 Memcache 更新

> ID：10501852
> 
> 赞同：4
> 
> 时间：2012-05-08T15:38:36.320
> 
> 标签：java, google-app-engine, caching, google-cloud-datastore

关于安全处理并发 Memcache 更新的 Google Apps Engine 文档：

> Memcache 服务的 putIfUntouched 和 getIdentifiable 方法可用于在需要以原子方式更新同一个 memcache 键的同时处理多个请求的情况下，提供一种安全地对 memcache 进行键值更新的方法。（在这些情况下可能会出现竞争条件。）

我正在构建一个需要准确缓存值的应用程序，下面是我的代码，请帮我检查它是否正确：

```
 ...
        IdentifiableValue oldCountIdValue = mc.getIdentifiable( cacheKey );
        Long count = ( Long ) oldCountIdValue.getValue();
        if( count != null )
        {
            this.oldCountValue = oldCountIdValue;
            return count;
        }

        Long result = new Long( q.count() );
        mc.putIfUntouched( cacheKey, oldCountValue, result );
        return result; 
```

我的问题是：如果 putIfuntouched() 返回 false 怎么办？代码应该返回什么？如何？

当数据存储添加一个实体时，我使用以下内容：

```
mc.increment( cacheKey, 1, initValue ); 
```

这种用法正确吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:03:11.247

我需要了解您的代码：
首先，您为什么要检查 count ！= null？oldCountIdValue == null 不意味着 count == null 反之亦然： if oldCountIdValue != null then count != null

如果是这样，那么代码应该是：

```
IdentifiableValue oldCountIdValue = mc.getIdentifiable( cacheKey );
if (oldCountIdValue != null) {
   return ( Long ) oldCountIdValue.getValue();
}

Long result = new Long( q.count() );
mc.putIfUntouched( cacheKey, oldCountValue, result );
return result; 
```

如果 putIfUntouched 返回 null，这意味着您的结果变量不再准确，您可以执行以下操作：忽略并返回您当前的结果或从缓存中加载结果。

# c# - C# - 如何知道 Windows 启动后何时“稳定”？

> ID：10501853
> 
> 赞同：10
> 
> 时间：2012-05-08T15:38:37.610
> 
> 标签：c#, windows, startup, boot

我正在编写一个可以选择在 Windows 启动上运行的应用程序。

当应用程序在我的 PC 真正稳定下来之前就停止运行时，我无法忍受，这是一个非关键应用程序。我希望我的应用程序礼貌地等待所有其他启动项完成并解决，以便用户的 PC 在开始执行任何工作之前变得响应。

我将如何检测这种情况？我想我可以遍历注册表并查找所有正在运行的启动进程，或者使用较长的计时器。我只是希望我可以使用另一个不那么骇人听闻的技巧。

编辑：该应用程序有一个 UI，不能作为服务运行。它确实有托盘模式。它做了一些图像渲染。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:41:37.723

'longish' 计时器是最好的方法。我不会用 bargepole 碰注册表。

但是，您需要考虑的一件事是，如果用户想要自己启动您的程序，会发生什么？显然你不想造成延迟。

我假设您的应用程序有一个 UI？如果没有，您可以考虑在 Vista/7 上将启动类型设置为“自动（延迟）”的服务

另请参阅此相关问题：[如何在 c# 中创建延迟启动应用程序？](https://stackoverflow.com/questions/7443570/how-to-create-delay-startup-application-in-c)

最后一点，如果您的程序不是关键的，并且您担心它可能会减慢速度，请考虑降低应用程序的优先级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:42:48.893

似乎这是最好留在用户手中的东西，Windows 已经提供了一个很好的选择来控制它，至少对于 Windows 服务来说是这样。

如果这是 Windows 服务，则可以将服务配置为自动启动（延迟启动）

也许这是最好的选择？

如果您不想走这条路，或者如果您的程序不是 Windows 服务，那么检测 Windows 何时“稳定”是非常主观的并且容易出错。您可以将磁盘 IO 作为一个可靠的指标来监控。磁盘 IO 通常是启动期间的瓶颈（尤其是对于没有 SSD OS 驱动器的系统）。在等待磁盘 IO（由性能计数器指示）降至某个阈值以下时，您可能会得到一个合理的“稳定度”近似值。您可能希望等待的时间不超过可配置的时间，然后无论如何启动，因为某些系统可能会启动并开始执行不相关的、长时间运行的任务，这些任务会对 IO 子系统造成负担。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:07:21.590

两个建议：

1.  使用低优先级线程来完成您的工作。毕竟，这是一个低优先级，对吧？仅此一项就很有可能成功地将启动影响降至最低。
2.  如果您真的想等待事情解决 - 只需检查处理器和内存利用率，而不是执行所有注册表读取或等待任意时间。相关说明在这里：[如何在 C# 中获取 CPU 使用率？](https://stackoverflow.com/questions/278071/how-to-get-the-cpu-usage-in-c)

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-18T00:57:02.583

在这里聚会晚了（四年），但万一其他人像我一样偶然发现这个问答......我问了一个[类似的问题](https://stackoverflow.com/q/31845319/190955)但我的重点是在用户登录之前知道事情何时稳定下来。我了解 OP 的应用程序是从桌面运行并具有 UI 元素等。但是如果您检查该线程，您会发现有一种方法可以判断 Windows 是否已完成加载服务。因此服务可以在启动时运行，清除“完成”标志，等待服务启动，然后设置该标志。现在，当用户登录时，如果系统仍在启动中，应用程序将知道并且不会急于初始化 UI。如果设置了“完成”标志，则 UI 可以在知道大多数或所有其他应用程序已完成其工作的情况下开始“感到舒服”。用户登录后可能会启动另一个应用程序。因此，将设置完成标志，但事情仍可能继续进行。

# json - Spotify appNotFound

> ID：10501856
> 
> 赞同：1
> 
> 时间：2012-05-08T15:38:51.323
> 
> 标签：json, spotify

我正在尝试遵循 Spotify 应用程序开发教程。我已经按照它所说的每一步，但程序不断抛出以下错误消息：“metadataFailed - appNotFound”。我已经尝试了清单文件的所有内容，但似乎没有帮助......我在 Windows 7 中并使用 Spotify v.0.8.3.222.g317ab79d

有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:57:43.203

您需要在文件中添加`BundleVersion`和`BundleIdentifier`键`manifest.json`。教程将很快更新。

此处提供更多信息：[Spotify 应用程序在更新后死机？](https://stackoverflow.com/questions/10416228/spotify-apps-dead-after-update)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T07:57:06.300

**当我将我的应用程序更新到 api 1.xx**时，我遇到了类似的错误，我注意到它`Dependencies`必须在你的.**`mainfest`**

 **```
{
"BundleType": "Application",
"BundleVersion": "0.1.0",
"UserInstallable": false,
"SupportedLanguages": [
    "en"
],
"AppIcon": {
    "36x18": "tutorial.png"
},
"AppName": {
    "en": "Views Tutorial"
},
"BundleIdentifier" : "views-tutorial",
"VendorIdentifier" : "com.spotify",
"Dependencies": {
    "api": "1.0.0",
    "views": "1.0.0"
}
} 
```**

# javascript - JQuery：$(window).scroll 函数上的 .animate

> ID：10501860
> 
> 赞同：2
> 
> 时间：2012-05-08T15:39:22.167
> 
> 标签：javascript, jquery, jquery-animate

我正在使用以下代码为类似于 CSS“固定”属性的“火车时间表”保留标签，以允许我垂直滚动页面但水平保持标签“固定”。这个脚本工作正常，但我希望看到它更流畅，我尝试使用 .animate 属性，但在这种情况下无法让它工作。

我可以让所有工作都滚动起来，我只是希望它更流畅。任何帮助表示赞赏。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
  $(window).scroll(function(){
      $('#tramLabels').css({
          'left': $(this).scrollLeft() +5 
      });
  });
</script> 
```

这也是该页面的其余代码；

```
<style type="text/css">
#tramLabels {
    position: absolute;
    z-index: 99;
    width: 200px;
    top: 0px;
    left: 5px;
}
#tramTime{
    position: absolute;
    z-index: 0;
    width: 100%;
    top: 0px;
    left: 10px;
}
</style>

</head>

<body>
<div id="tramLabels">
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
  </table> 
</div>
<div id="tramTime">
  <table width="900px" border="0" cellspacing="0" cellpadding="0"> 
  </table>
</div 
```

编辑：我将代码放在[这里供您尝试](http://jsfiddle.net/F8WbW/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:51:50.470

尝试这个：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
  $(window).scroll(function(){
      $('#tramLabels').animate({
          'left': +5 
      });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:59:41.870

我用 .animate() 和 .stop() 试过这个。[http://jsfiddle.net/C2f7f/](http://jsfiddle.net/C2f7f/)

# c++ - C++ 中的文件 I/O 代码

> ID：10501862
> 
> 赞同：1
> 
> 时间：2012-05-08T15:39:37.397
> 
> 标签：c++, arrays, visual-studio-2010, file-io, text-files

所以我现在已经很久了，也许这就是为什么我无法弄清楚这一点。但是我这里的代码只在第一次执行时起作用，即，因为有一个大约有 4 个选项的菜单，所以它只对第一个被选中的选项起作用。当 do while 循环启动并再次显示菜单时，无论您选择什么，它都会重新显示菜单。我已经分析了 do while 循环，但我很确定这没有任何问题。我最近才开始学习文件 I/O，所以也许我错过了一些东西。任何帮助将非常感激。谢谢。

这是代码：

**电话簿.h**

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>

using namespace std;

class Phone
{ 
public:
void display_phonebook(ifstream& in_stream);// phonebook is the text file 
void display_backup(string a[], int size);// backup copy is a string array
void datacopy(ifstream& in_stream, string a[]);// to copy the phonebook to the array
int numberOfLines(ifstream& in_stream);// to check number of lines in the text file
}; 
```

**电话簿.cpp**

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>
#include "Phonebook.h"

using namespace std;

void Phone::datacopy(ifstream& in_stream, string a[])
{
int i=0;
while(in_stream.good())
{
    string line;
    getline(in_stream, line);
    a[i]=line;
    i++;
}
int s=i;
for(int x=0;x<s;x++)
{
    cout<<a[x]<<endl;
}
}

int Phone::numberOfLines(ifstream& in_stream)
{
int count=0;
while(!in_stream.eof())
{
    string line;
    getline(in_stream, line);
    count++;
}
return count;
}

void Phone::display_phonebook(ifstream& in_stream)
{
while(!in_stream.eof())
{
    string line;
    getline(in_stream, line);
    cout<<line<<endl;
}
}

void Phone::display_backup(string a[], int size)
{
for(int i=0;i<size;i++)
{
    cout<<a[i]<<endl;
}
cout<<endl;
} 
```

**主文件**

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>
#include "Phonebook.h"

using namespace std;

int main()
{
Phone p;
int size=0;
ifstream fin;
ofstream fout;
char file[50], ch;
string backup[50];
int flag=0;
do
{
    cout<<"Enter the name of the file: "<<endl;
    cin>>file;
    fin.open(file);
    cout<<endl;
    if(fin.fail())
    {
        cout<<"File not found!"<<endl<<endl;
        cout<<"Try Again? (Y/N)"<<endl;
        cin>>ch;
        if(ch=='N' || ch=='n')
        {
            cout<<"Terminating..."<<endl;
            system("PAUSE");
            exit(1);
        }
    }
    else
    {
        flag=1;
    }
}
while((ch=='Y' || ch=='y') && flag==0);
cout<<"Success! File Opened"<<endl<<endl;
int choice;
do
{
    cout<<"1 - Display phonebook"<<endl;
    cout<<"2 - Display backup copy"<<endl;
    cout<<"3 - Update backup copy"<<endl;
    cout<<"4 - Exit"<<endl;
    cout<<"Enter your choice:  ";
    cin>>choice;
    if(choice==1)
    {
        p.display_phonebook(fin);
    }
    else if(choice==2)
    {
        size=p.numberOfLines(fin);
        p.display_backup(backup, size);
    }
    else if(choice==3)
    {
        p.datacopy(fin, backup);
    }
} 
while(choice!=4);
fin.close();
fout.close();
system("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:50:06.230

所以要注意的一件事是，当您将 ifstream 发送到函数并调用 getline 时，“缓冲区”是高级的。因此，如果不再次打开缓冲区，您将无法重新读取该行。您需要重新组织代码以解决此问题，或者在内部保存文件中的数据，而不是在显示期间尝试重新读取它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:54:38.817

1）你不应该发布这么多代码。您应该发布一个最小的完整示例；也就是说，尽可能减少代码，同时仍然会产生不良行为。最终，要么错误会变得明显，要么你会得到更小更简单的东西供我们梳理。

2）您太累了，无法删除所有不相关的代码？没问题，只是一开始就不要写。从小处着手，逐步构建，在每个阶段进行测试，**永远不要添加不起作用的代码**。你不应该在没有发现问题的情况下让代码变得这么大。

3)

```
void Phone::display_phonebook(ifstream& in_stream)
{
  while(!in_stream.eof())
    {
      string line;
      getline(in_stream, line);
      cout<<line<<endl;
    }
} 
```

这将显示文件的内容*一次*。然后文件流在文件的末尾，就像盯着一本书的封底一样。当您再次调用该函数时，它不会给您更多信息。您必须将文件的内容存储在变量中，或者关闭并重新打开流（或倒带，但这是一种更高级的技术，不推荐）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:15:44.127

您的代码存在许多问题。

您的代码仅“工作”一次的原因是因为您第一次读取文件完成，将输入留在文件末尾，因此进一步读取将失败。您应该预先将文件完全读入内存，然后将图像（可能是`std::vector<std::string>`各种函数）传递给，或者您应该在每个函数中创建一个新`std::ifstream`对象，作为局部变量（并且 `std::ifstream`在 main 中没有对象循环）。否则，您必须清除错误并在每个函数之前查找流的开头。

你做的另一件事是使用`in_stream.good()`or `!in_stream.eof()`作为循环的控制条件。然后，至少在`datacopy`and中`display_phonebook`，使用读取的字符串 `std::getline`而不验证是否`std::getline`成功。通常，这将导致最后一行被处理两次。 `std::istream::good()`是一个毫无价值的功能，`st::istream::eof()` 只有*在*您检测到失败后才有意义。编写循环的正确方法是：

```
std::string line;
while ( std::getline( in_stream, line ) ) {
    //  ...
} 
```

`Phone::datacopy`如果输入文件超过 50 行，则具有未定义的行为（并且可能会崩溃）。在这里使用`std::vector<std::string>` ，在函数顶部清除它，然后调用 `push_back`读取的每一行。

在阅读命令时，您还需要进行一些错误处理。例如，如果用户输入一个`'a'`，您将进入一个无限循环。我可能也会`std::getline`用于交互式输入，分别解析该行。这样，实际输入不会进入错误状态，如果用户输入垃圾，则必须清除该错误状态。（如果他输入类似 的`"Display phonebook"`内容，您不必担心删除输入中的所有多余字符。）

最后，如果您使用 which uses定义一个用户类`Line`，您的大多数函数将简化为对、 using 和的一次调用 。`operaator>>``getline``std::copy``std::istream_iterator<Line>`

哦，你可以用 a`switch`代替`if/else if`链条。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T00:18:55.680

嗯，谢谢大家的建议。但是，是的，问题是当控件传递给第二个函数时输入流卡在文件末尾。最简单的解决方法是在流到达文件末尾后关闭并重新打开流，这就是我所采用的。另外，我从你们那里了解了很多其他东西，这将帮助我成为一个更好的编码器（我希望！）。此外，肯定会研究代码的一些异常处理（感谢@James Kanze）。好吧，祝大家编码愉快。

# cocos2d-iphone - 玩家跳跃动作有时会导致 EXC_BAD_ACCESS

> ID：10501865
> 
> 赞同：0
> 
> 时间：2012-05-08T15:39:48.457
> 
> 标签：cocos2d-iphone, box2d

我正在用 cocos2d 和 box2d 开发游戏。问题是当我触摸屏幕让玩家跳跃时，有时我的应用程序会崩溃。

以下是我在 Player 类中实现跳跃动作的方式：

```
- (void)jump
{
if (numFootContacts > 0)
    {
        isJumping = YES;
        b2Vec2 impulse = b2Vec2(0.0f, 100.0f);
        b2Vec2 point = body->GetWorldCenter();      // this line sometimes triggers an EXC_BAD_ACCESS for the body pointer.

        body->ApplyLinearImpulse(impulse, point);
    }
} 
```

numFootContacts 让我知道我是否在地上。

在我的游戏场景中，我有这个（和其他不相关的东西）：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    [player jump];
    return YES;
} 
```

从我在其他人的代码中看到的，这是实现跳转动作的常用方法。

我认为问题来自物理世界更新方法。
因为我以另一种方式实现了跳转动作，我只在world->Step方法之后跳转（[玩家跳转]），并且我没有得到任何EXC_BAD_ACCESS。

那么有人已经有这种问题了吗？
我认为这与由于身体被锁定而无法在回调期间删除身体的“问题”非常相似。这里的问题是，也许我在世界更新时跳得恰到好处。该错误很难重现（1 次超过 10 次）。
如果我错了，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:51:13.137

如果您`[player jump]`从触摸处理方法调用并且您的应用程序不是多线程的，则在函数执行`ccTouchBegan`期间无法调用。`Step`您得到的原因`EXC_BAD_ACCESS`是您在某处访问无效指针。它可以是`player`，`body`或其他任何东西。

# mysql - 将两个表与第三个表连接起来

> ID：10501867
> 
> 赞同：1
> 
> 时间：2012-05-08T15:39:51.033
> 
> 标签：mysql

我不知道该在标题中添加什么...请继续阅读...

我有一个活动表，每个活动 3 天

```
eventID dayID
1       1
1       2
1       3
2       1
2       2
2       3 
```

我也有一些车可用于活动

```
carID regNum
1     fg12 bfr
2     gh34 vbn
3     kl56 thg
4     lm32 tfx 
```

我希望某些汽车可用于某些事件，例如，汽车 ID 1,2 和 3 可能可用于事件 ID 1，但只有汽车 ID 4 可用于事件 2。

我不确定如何将这些表连接在一起。

我正在查看另一个表格，该表格定义了哪些汽车可用于哪个事件，例如

```
eventID carID
1       1
1       2
1       3
2       4 
```

但我不知道如何将这 3 个表连接在一起以获取 event1 的汽车列表。

任何指点都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:43:33.520

```
SELECT e.id, c.carID, c.regNum
FROM tblEvents e
JOIN tblEventCars ec ON ec.eventID = e.eventID
JOIN tblCars c ON c.carID = ec.carID
GROUP BY e.id, c.carID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:45:08.877

[连接表](http://en.wikipedia.org/wiki/Junction_table)是在 RDBMS 中建模多对多关系的经典解决方案。

您不需要加入三个表来为 event1 获取汽车 - 两个表就足够了：

```
select *
from Cars c
join CarEvent e on e.CarId = c.CarId
where e.EventId = 1 
```

如果需要事件名称，还需要加入事件表：

```
select *
from Cars c
join CarEvent ce on ce.CarId = c.CarId
join Event e on e.EventId = ce.EventId
where e.EventName = 'Event1' 
```

# symfony - 动态更改 symfony2 的路线

> ID：10501871
> 
> 赞同：0
> 
> 时间：2012-05-08T15:40:02.543
> 
> 标签：symfony, routes

所以我需要一些方法来改变这样的路线：

/en/route/to/action

像这样：

/路由/到/动作

同时，将“en”设置为当前语言环境。

我可以为此使用“routing.loader” dictac 吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:14:58.537

在场景 2[中](http://jmsyst.com/bundles/JMSI18nRoutingBundle/master/configuration#scenario-prefixing-all-routes-with-the-locale-except-those-of-the-default-locale)使用[http://jmsyst.com/bundles/JMSI18nRoutingBundle：http://jmsyst.com/bundles/JMSI18nRoutingBundle/master/configuration#scenario-prefixing-all-routes-with-the-locale-except-those-](http://jmsyst.com/bundles/JMSI18nRoutingBundle)[默认语言环境](http://jmsyst.com/bundles/JMSI18nRoutingBundle/master/configuration#scenario-prefixing-all-routes-with-the-locale-except-those-of-the-default-locale)

# android - Android - 每次更新计数器时视图都会自动向上滚动

> ID：10501880
> 
> 赞同：1
> 
> 时间：2012-05-08T15:40:41.357
> 
> 标签：android, scroll, swipe

我有一个包含 3 个页面的视图，用户可以在其中水平滑动（从一页移动到另一页）和垂直滑动（在需要时向上或向下查看所有内容）。我使用类似于我在下面给出的处理手势的代码的类（我主要在这里找到它-> [http://www.jmstudio.org/archives/391](http://www.jmstudio.org/archives/391)但现在这个链接已经关闭了）。我还在所有 3 个视图中都有一个计时器，当用户按下“开始”按钮时，它会计算时间。我的问题：在第一个视图中，开始按钮位于下方，因为内容很多。当用户按下开始，这使得计数器开始，然后视图会自动向上滚动（我不知道它是否以某种方式“想要”显示每秒更新的计时器）。当我再次尝试向下移动时，它每秒都会上升。请注意，这并非每次都会发生。片刻之后，如果我浏览视图，它可能会停止。在我尝试过的模拟器中也不会发生，但在设备中会发生。谁能知道为什么会发生这种情况以及如何解决？它让我发疯！先感谢您！

（下面是班级）

公共类 FlingAndScrollViewer 扩展 ViewGroup {

```
private Scroller mScroller;
private VelocityTracker mVelocityTracker;
private int mScrollX = 0;
private int mCurrentScreen = 0;
private float mLastMotionX;
private static final String LOG_TAG = "FlingAndScrollViewer";
private static final int SNAP_VELOCITY = 1000;
private final static int TOUCH_STATE_REST = 0;
private final static int TOUCH_STATE_SCROLLING = 1;
private int mTouchState = TOUCH_STATE_REST;
private int mTouchSlop = 0;

public FlingAndScrollViewer(Context context) {
    super(context);
    mScroller = new Scroller(context);
    mTouchSlop = ViewConfiguration.get(getContext()).getScaledTouchSlop();
    this.setLayoutParams(new ViewGroup.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.FILL_PARENT));
}

public FlingAndScrollViewer(Context context, AttributeSet attrs) {
    super(context, attrs);
    TypedArray a = getContext().obtainStyledAttributes(attrs,
            R.styleable.FlingAndScrollViewer);
    mCurrentScreen = a.getInteger(
            R.styleable.FlingAndScrollViewer_default_screen, 0);
    mScroller = new Scroller(context);
    mTouchSlop = ViewConfiguration.get(getContext()).getScaledTouchSlop();
    this.setLayoutParams(new ViewGroup.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.FILL_PARENT));
}

public void setInitialPosition(int initialPosition) {
    mCurrentScreen = initialPosition;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    /*
     * This method JUST determines whether we want to intercept the motion.
     * If we return true, onTouchEvent will be called and we do the actual
     * scrolling there.
     */
 /*
     * Shortcut the most recurring case: the user is in the dragging state
     * and he is moving his finger. We want to intercept this motion.
     */

    if(this.isEnabled()){
            final int action;
            action= ev.getAction();
            if ((action == MotionEvent.ACTION_MOVE)
                && (mTouchState != TOUCH_STATE_REST)) {
                return true;
            }
         final float x = ev.getX();
         switch (action) {
            case MotionEvent.ACTION_MOVE:
                /*
                 * mIsBeingDragged == false, otherwise the shortcut would have
                 * caught it. Check whether the user has moved far enough from his
                 * original down touch.
                 */
             /*
                 * Locally do absolute value. mLastMotionX is set to the y value of
                 * the down event.
                 */
                final int xDiff = (int) Math.abs(x - mLastMotionX);
             boolean xMoved = xDiff > mTouchSlop;
             if (xMoved) {
                    // Scroll if the user moved far enough along the X axis
                    mTouchState = TOUCH_STATE_SCROLLING;
                }
                break;
         case MotionEvent.ACTION_DOWN:
                // Remember location of down touch
                mLastMotionX = x;
             /*
                 * If being flinged and user touches the screen, initiate drag;
                 * otherwise don't. mScroller.isFinished should be false when being
                 * flinged.
                 */
                mTouchState = mScroller.isFinished() ? TOUCH_STATE_REST
                        : TOUCH_STATE_SCROLLING;
                break;
         case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP:
                // Release the drag
                mTouchState = TOUCH_STATE_REST;
                break;
            }
         /*
             * The only time we want to intercept motion events is if we are in the
             * drag mode.
             */
            return mTouchState != TOUCH_STATE_REST;
    }
    return false;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
 if (mVelocityTracker == null) {
        mVelocityTracker = VelocityTracker.obtain();
    }
    mVelocityTracker.addMovement(event);
 final int action = event.getAction();
    final float x = event.getX();
 switch (action) {
    case MotionEvent.ACTION_DOWN:
        Log.i(LOG_TAG, "event : down");
        /*
         * If being flinged and user touches, stop the fling. isFinished
         * will be false if being flinged.
         */
        if (!mScroller.isFinished()) {
            mScroller.abortAnimation();
        }
     // Remember where the motion event started
        mLastMotionX = x;
        break;
    case MotionEvent.ACTION_MOVE:
        // Log.i(LOG_TAG,"event : move");
        // if (mTouchState == TOUCH_STATE_SCROLLING) {
        // Scroll to follow the motion event
        final int deltaX = (int) (mLastMotionX - x);
        mLastMotionX = x;
     // Log.i(LOG_TAG, "event : move, deltaX " + deltaX + ", mScrollX " +
        // mScrollX);
     if (deltaX < 0) {
            if (mScrollX > 0) {
                scrollBy(Math.max(-mScrollX, deltaX), 0);
            }
        } else if (deltaX > 0) {
            final int availableToScroll = getChildAt(getChildCount() - 1)
                    .getRight() - mScrollX - getWidth();
            if (availableToScroll > 0) {
                scrollBy(Math.min(availableToScroll, deltaX), 0);
            }
        }
        // }
        break;
    case MotionEvent.ACTION_UP:
        Log.i(LOG_TAG, "event : up");
         //if (mTouchState == TOUCH_STATE_SCROLLING) {
                final VelocityTracker velocityTracker = mVelocityTracker;
                velocityTracker.computeCurrentVelocity(1000);
                int velocityX = (int) velocityTracker.getXVelocity();
             if (velocityX > SNAP_VELOCITY && mCurrentScreen > 0) {
                    // Fling hard enough to move left
                    snapToScreen(mCurrentScreen - 1);
                } else if (velocityX < -SNAP_VELOCITY
                        && mCurrentScreen < getChildCount() - 1) {
                    // Fling hard enough to move right
                    snapToScreen(mCurrentScreen + 1);
                } else {
                    snapToDestination();
                }
             if (mVelocityTracker != null) {
                    mVelocityTracker.recycle();
                    mVelocityTracker = null;
                }
         //}
        mTouchState = TOUCH_STATE_REST;
        break;
    case MotionEvent.ACTION_CANCEL:
        Log.i(LOG_TAG, "event : cancel");
        mTouchState = TOUCH_STATE_REST;
    }
    mScrollX = this.getScrollX();
 return true;
}

private void snapToDestination() {
    final int screenWidth = getWidth();
    final int whichScreen = (mScrollX + (screenWidth / 2)) / screenWidth;
    Log.i(LOG_TAG, "from des");
    snapToScreen(whichScreen);
}

public void snapToScreen(int whichScreen) {
    Log.i(LOG_TAG, "snap To Screen " + whichScreen);
    mCurrentScreen = whichScreen;
    final int newX = whichScreen * getWidth();
    final int delta = newX - mScrollX;
    mScroller.startScroll(mScrollX, 0, delta, 0, Math.abs(delta) * 2);
    invalidate();
}

public void setToScreen(int whichScreen) {
    Log.i(LOG_TAG, "set To Screen " + whichScreen);
    mCurrentScreen = whichScreen;
    final int newX = whichScreen * getWidth();
    mScroller.startScroll(newX, 0, 0, 0, 10);
    invalidate();
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    int childLeft = 0;
    final int count = getChildCount();
    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child.getVisibility() != View.GONE) {
            final int childWidth = child.getMeasuredWidth();
            child.layout(childLeft, 0, childLeft + childWidth,
                    child.getMeasuredHeight());
            childLeft += childWidth;
        }
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    final int width = MeasureSpec.getSize(widthMeasureSpec);
    final int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    if (widthMode != MeasureSpec.EXACTLY) {
        throw new IllegalStateException("error mode.");
    }
    final int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    if (heightMode != MeasureSpec.EXACTLY) {
        throw new IllegalStateException("error mode.");
    }
    // The children are given the same width and height as the workspace
    final int count = getChildCount();
    for (int i = 0; i < count; i++) {
        getChildAt(i).measure(widthMeasureSpec, heightMeasureSpec);
    }
    //Log.i(LOG_TAG, "moving to screen " + mCurrentScreen);
    //scrollTo(mCurrentScreen * width, 0);
}

@Override
public void computeScroll() {
    if (mScroller.computeScrollOffset()) {
        mScrollX = mScroller.getCurrX();
        scrollTo(mScrollX, 0);
        postInvalidate();
    }
}

/**
 * Return the parceable instance to be saved
 */
@Override
protected Parcelable onSaveInstanceState() {
    final SavedState state = new SavedState(super.onSaveInstanceState());
    state.currentScreen = mCurrentScreen;
    return state;
}

/**
 * Restore the previous saved current screen
 */
@Override
protected void onRestoreInstanceState(Parcelable state) {
    SavedState savedState = (SavedState) state;
    super.onRestoreInstanceState(savedState.getSuperState());
    if (savedState.currentScreen != -1) {
        mCurrentScreen = savedState.currentScreen;
    }
}

// ========================= INNER CLASSES ==============================
public interface onViewChangedEvent {
    void onViewChange(int currentViewIndex);
}

/**
 * A SavedState which save and load the current screen
 */
public static class SavedState extends BaseSavedState {
    int currentScreen = -1;

    /**
     * Internal constructor
     * 
     * @param superState
     */
    SavedState(Parcelable superState) {
        super(superState);
    }

    /**
     * Private constructor
     * 
     * @param in
     */
    private SavedState(Parcel in) {
        super(in);
        currentScreen = in.readInt();
    }

    /**
     * Save the current screen
     */
    @Override
    public void writeToParcel(Parcel out, int flags) {
        super.writeToParcel(out, flags);
        out.writeInt(currentScreen);
    }

    /**
     * Return a Parcelable creator
     */
    public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };
} 
```

}

# zend-framework - URI 页面的 Zend_Navigation 和 Zend_Acl

> ID：10501883
> 
> 赞同：1
> 
> 时间：2012-05-08T15:40:57.467
> 
> 标签：zend-framework, zend-navigation, zend-acl

我正在尝试以独立的方式组合`Zend_Navigation`和`Zend_Acl`用于 URI 页面（即只有这些 ZF 库）。不幸的是，即使我的意思是让某个角色看不到某些页面，我也会在菜单中看到它们（尽管如果我调用`isAllowed`，一切都会按预期工作）。

遵循显示我的问题的代码片段：

```
$pages = array (
  array( 'id' => '1', 'label' => 'page 1', 'uri' => '1.html', 'visible' => 1 ),
  array( 'id' => '2', 'label' => 'page 2', 'uri' => '2.html', 'visible' => 1 ),
  array( 'id' => '3', 'label' => 'page 3', 'uri' => '3.html', 'visible' => 1 )
);

$nav = new Zend_Navigation($pages);

$acl = new Zend_Acl();
$acl->addRole(new Zend_Acl_Role(1));
$acl->addRole(new Zend_Acl_Role(2));
$acl->addResource(new Zend_Acl_Resource(1));
$acl->addResource(new Zend_Acl_Resource(2));
$acl->addResource(new Zend_Acl_Resource(3));
$acl->allow(1, 1);
$acl->allow(1, 2);
$acl->allow(1, 3);
$acl->allow(2, 1);

// Role 1 sees 1,2,3 while Role 2 only 1

$view = new Zend_View();

$menu = new Zend_View_Helper_Navigation_Menu();
$menu->setView($view)
     ->setContainer($nav)
     ->setTranslator($translate)
     ->setAcl($acl)->setRole('2'); //tried both this or ->setAcl($acl) ->setRole('2');

echo "2 can't see 2 and 3, right? " . ((!$acl->isAllowed('2', '2'))?"right":"not right") . "\n";

echo $menu->menu()->renderMenu(
  null,
  array(
      'minDepth' => 0,
      'maxDepth' => 1,
      'onlyActiveBranch' => false,
      'renderParents' => true
  )
); 
```

我怎样才能使上述工作？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:30:44.240

将资源与这样的页面相关联

```
$pages = array(
    array('id' => '1', ... , 'resource' => '1'),
    array('id' => '2', ... , 'resource' => '2'),
    array('id' => '3', ... , 'resource' => '3')
); 
```

其余的都很好。

# sql-server - 在 SQL Server 中，如果主键是 GUID，我如何按插入顺序对表行进行排序？

> ID：10501884
> 
> 赞同：4
> 
> 时间：2012-05-08T15:41:02.633
> 
> 标签：sql-server, primary-key, guid

我已经开始为我的主键使用 GUID，而不是自动递增整数。

但是，在开发过程中，我习惯于查询（从 SQL 管理工作室或 Visual Studio）数据库，以查看我的应用程序刚刚插入了哪些记录，我对无法按主键 desc 排序的事实感到恼火查看最新记录。

有没有办法完成tihs？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:42:49.323

您不能根据插入顺序对 GUID 列进行排序。您需要依赖另一列。

我的建议是添加一个名为 a 的列`CreationMoment`，`DateTime`其默认值为`GETDATE()`. 从理论上讲，您**可能**会发生冲突（即相同的创建日期/时间），因此您必须确定该数据类型是否合适。根据我的经验，这从来都不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:48:47.510

您不能，您必须添加具有自动增量功能的新字段 bigint 并依赖，无需将其设为键。bigint 没有碰撞，也没有大小问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T18:42:14.657

@Yuck 和 @Sameh 都有很好的答案，但我认为 TIMESTAMP 列更适合您的需求。它保证是唯一的，并且可以使用 ORDER BY 进行排序。

[MSDN - 时间戳 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.90%29.aspx)

# sql - 在 MS ACCESS 中实现 INTERSECT (INNER JOIN)

> ID：10501885
> 
> 赞同：1
> 
> 时间：2012-05-08T15:41:04.743
> 
> 标签：sql, ms-access, select, intersect

我一直在研究如何将我拥有的 UNION 转换为 INTERSECT，但 MS Access 中没有 INTERSECT 关键字。

如果我想要这两个 select 语句的交集而不是它们的 Union，我一直很困惑以下代码如何使用内部连接。

我知道如果我 SELECT DISTINCT 然后使用内部联接，我可以实现我想要的，但 ON 关键字真的让我感到困惑。

我一周前刚开始使用 SQL，所以如果您发现代码有任何其他问题，我会接受所有建设性的批评 :)

```
SELECT *
FROM (SELECT [Catt].[Name]
FROM [Catt]
WHERE ((([Catt].[Name]) Like "*" & [forms]![Main]![SrchText] & "*") 
AND [forms]![Main]!   [SrchText] IS NOT Null AND [forms]![Main]![SrchText]<>''  )

UNION

SELECT [Catt].[Name]
FROM [Catt]
WHERE  ((([Catt].[Category]) Like [forms]![Main]![Combo7].Value) AND (([forms]![Main]!    [SrchText] IS Null) OR ([forms]![Main]![SrchText]=''))))  AS Query
ORDER BY [Catt].[Name]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:32:02.947

尚未对此进行测试，因此您肯定会进行大量 MS Access 特定更改。但我要求您不要通过不必要地在方块中引用每个标识符来混淆查询：

```
SELECT     DISTINCT title
FROM       (  
            SELECT [Catt].[Name] as title
            FROM   [Catt]
            WHERE  ([Catt].[Name] Like "*" & [forms]![Main]![SrchText] & "*") AND 
                    [forms]![Main]![SrchText] IS NOT Null AND 
                    [forms]![Main]![SrchText] <>''
           ) AS view1

INNER JOIN 

           (   
            SELECT   [Catt].[Name]
            FROM     [Catt]
            WHERE    [Catt].[Category] Like [forms]![Main]![Combo7].Value AND 
                     ([forms]![Main]![SrchText] IS Null OR 
                      [forms]![Main]![SrchText]='')
           ) AS view2 ON view1.title = view2.Name

ORDER BY   view1.title 
```

但基本上这样的事情就可以了..

正如戈登指出的那样编辑

# iphone - 在 iOS 应用程序中下载大文件

> ID：10501890
> 
> 赞同：3
> 
> 时间：2012-05-08T15:41:27.377
> 
> 标签：iphone, web-services, nsurlconnection, nsdata, nsurl

我正在尝试清理一些现有的代码，这些代码从服务器中分块下载一个大文件，检查每 50 个数据包的校验和，然后将它们拼接在一起。我在查看它是否是最有效的方法时遇到了一些麻烦，因为现在它由于内存问题而崩溃了一段时间。如果我没有校验和，它似乎不会崩溃，但我希望我可以先检查我的文件。

```
@property (nonatomic, retain) NSMutableData * ReceivedData;

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

NSData *sequencePacketData = [[NSData alloc] initWithData:self.ReceivedData]; 
        [self ProcessPacket:sequencePacketData];
        [sequencePacketData release];
        [[NSNotificationCenter defaultCenter] postNotificationName:DownloadNotification object:self];

}

- (void)ProcessPacket:(NSData *)sequencePacketData {
  // find the directory I need to write to and the name of the file
NSString *currentChecksum = [WebServiceManager MD5CheckSumForNSData:sequencePacketData];
    BOOL checkSumValid = [dmgr ValidateChecksum:currentChecksum againstFileName:self.CurrentFileName];
    self.IsSuccessful = checkSumValid;

    if (!checkSumValid) {
        // log error msg
        return;
    }

    if (success)
    {
        NSFileHandle *handle = [NSFileHandle fileHandleForUpdatingAtPath:sequencePath];
        [handle seekToEndOfFile];
        [handle writeData:sequencePacketData];
        [handle closeFile];
    }
    else
    {
        [sequencePacketData writeToFile:sequencePath atomically:YES];
    }

    // When file is completely downloaded, check the checksum of the entire file:
BOOL completeFileCheckSum;
    if ([packetFile isEqualToString:@"50.bin"]) {
        NSData *temData = [NSData dataWithContentsOfFile:sequencePath];
        currentChecksum = [WebServiceManager MD5CheckSumForNSData:temData];
        completeFileCheckSum = [dmgr ValidateChecksum:currentChecksum againstFileName:fileName];
        NSLog(@"Checksum for whole file is valid: %i", completeFileCheckSum);
        if (!completeFileCheckSum) {
            NSError *err;
            [fileManager removeItemAtPath:sequencePath error:&err];

            // log error
            return;
        }
    }
}

+ (NSString*)MD5CheckSumForNSData:(NSData *) input
{
    // Create byte array of unsigned chars
    unsigned char md5Buffer[CC_MD5_DIGEST_LENGTH];

    // Create 16 byte MD5 hash value, store in buffer
    CC_MD5(input.bytes, input.length, md5Buffer);

    // Convert unsigned char buffer to NSString of hex values
    NSMutableString *output = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH * 2];
    for(int i = 0; i < CC_MD5_DIGEST_LENGTH; i++) 
        [output appendFormat:@"%02x",md5Buffer[i]];
    return output;
} 
```

check checksum againstFile 方法只是从临时文件中获取校验和并进行比较。

我读到了 NSAutoReleasePools 以及如果您正在加载一堆图像并需要清除内存等，这将如何提供帮助，但我不确定这是否真的适用于此，或者其他任何东西都可以帮助下载大文件（略小于 1 GB）。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:52:53.300

一次将这么多数据保存在内存中肯定是个问题。幸运的是，您不需要这样做——您可以在数据从网络中取出时将其写入磁盘，并且您可以保持运行中的校验和。

用你的 ReceivedData 换几个新的 ivars：

```
NSFileHandle* filehandle;
MD5_CTX md5sum; 
```

MD5_CTX 在 OpenSSL 中，而……iOS 上还没有？嘎。好的，您可以在线找到 MD5 源，例如：[http](http://people.csail.mit.edu/rivest/Md5.c) : //people.csail.mit.edu/rivest/Md5.c你不需要。但如果你碰巧已经在使用 OpenSSL，它包括 MD5 函数。）

```
- (void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response
{
    MD5Init(&md5sum);

    filehandle = [[NSFileHandle filehandleForWritingAtPath:path] retain];
}

- (void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data
{
    MD5Update(&md5sum, [data bytes], [data length]);

    [filehandle writeData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection*)connection
{
    MD5Final(&md5sum);
    // MD5 sum is in md5sum.digest[]

    [filehandle closeFile];

    // verify MD5 sum, etc..
} 
```

最后，您的文件将在磁盘上，您将获得其 MD5 和，并且您几乎不会使用任何内存。

# c# - 限制从网站外部访问操作

> ID：10501893
> 
> 赞同：4
> 
> 时间：2012-05-08T15:41:40.477
> 
> 标签：c#, asp.net-mvc-3, security

我有一个用 C# 编写的 ASP.Net MVC3 Web 应用程序。

我有一个 ActionResult 旨在返回 Json 结果，以便可以使用 JavaScript 的网页异步调用它。动作基本如下：

```
public ActionResult FindSomething(string search)
{
   var result = GetSearchResult(search);

   return Json(new { @Result = result }, JsonRequestBehavior.AllowGet);
} 
```

然后在其中一个网页中，我有一些 JavaScript（使用 JQuery）来获取数据。

但是，我想尝试并做的是限制对此 FindSomething 操作的访问，以便只有我的网站代码才能访问结果。就目前而言，任何人都可以从 Web 浏览器调用此操作。

关于我完成这项工作的一些选择的任何想法？

应该注意的是，不会登录到该网站，因此无法通过这种方式进行身份验证。而且我不想在 html 源代码中包含与密码方法相关的任何内容。

* * *

**为什么我想要这个**：

该`FindSomething`方法实际上调用了第三方服务，该服务是使用积分付费的。所以实际上，通话次数越多，它的成本就越高。

我担心的是，如果有人知道这个 URL 并想使用相同的服务，那么他们可以通过我们的 URL 查询它并避免收费。

我不确定这个第 3 方服务是否考虑过这一点，他们提供了几种与服务交互的方式。一种是通过我可以通过服务器代码调用的 Web 服务（我正在这样做），另一种是通过一些内联的 javascript 引用 - 后者需要在 html 源代码中硬编码许可证密钥：S

...可能值得我向他们寻求答案，但无论我如何解决服务中的这个缺陷，它仍然会在 SO 上提出一个有趣的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:44:47.000

鉴于您的限制，恐怕没有可靠的方法可以实现这一目标。您可以通过使用例如防伪令牌而不是 100% 防弹来使其变得困难。不要忘记，不仅浏览器可以发送 HTTP 请求。任何人都可以伪造 HTTP 请求并将其发送到您的服务器。

使用非 GUI API 完成此操作的方式是将公钥提供给客户端，而使用 GUI 应用程序（例如网站）完成此操作的方式是向用户提供密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:48:08.860

最明智的做法是使用防伪令牌+盐，如下[所述](http://www.codeproject.com/Articles/267694/Security-in-ASP-NET-MVC-by-using-Anti-Forgery-Toke)：

```
[ValidateAntiForgeryToken(Salt = Constants.AntiForgeryTokenSalt)]
public ActionResult FindSomething(string search) { ... } 
```

您现在可以将其与如下所示的“身份验证令牌”结合使用，这将保护该操作免受跨站点脚本和未经授权的访问：

```
[ValidateAntiForgeryToken(Salt = Constants.AntiForgeryTokenSalt)]
public ActionResult FindSomething(string search, string accessToken) { ... } 
```

当然，一般情况下，“访问令牌”是通过某种形式的认证机制（即OAuth）获得的。在这种情况下，它可以是您即兴的唯一字符串传递给查看并请求返回（就像防伪令牌，但带有“随机数”，因此只能使用一次）。

# ios - 用于 youtube 自动播放、屏幕超时和摄像头的 html5 ios 本机桥接器

> ID：10501895
> 
> 赞同：2
> 
> 时间：2012-05-08T15:41:47.130
> 
> 标签：ios, html, cordova, html5-video, trigger.io

我正在构建一个应用程序，它将进行大量的 a/b 测试和快速的迭代周期，因此构建原生对我来说不是一个选择。

我需要的唯一不能在 HTML5 中完成的“功能”是

1) 自动播放 youtube 视频

2）防止屏幕关闭（超时）

3）访问相机

我已经用backbone.js 用HTML5 构建了应用程序，我现在才意识到HTML5 在iOS 中的局限性。

我不明白的是，如果我可以自动播放嵌入在 html 页面中的 youtube 视频，是否在 PhoneGap 或 Trigger.io（或任何其他选项）中。我不是在寻找占据整个屏幕的视频，我希望能够播放一段视频，同时保持应用程序的其余部分导航。

使用这些工具中的任何一个都可以做到这一点吗？或者有人有其他推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:04:53.673

从 Trigger.io 的角度来看的答案：

1.  自动播放 YouTube 视频：不确定这是否可行 - 见下文
2.  保持屏幕开启：我们还不支持此功能，但很乐意将其添加到我们的路线图中
3.  摄像头访问：完全支持捕获图像和视频

YouTube 视频使用`iframes`: 嵌入到页面中，这不适用于 Trigger.io，因为我们将外部网页的加载推迟到 iOS（请参阅[在 trigger.io 页面（不是标签页）中是否允许 iframe 标记？](https://stackoverflow.com/questions/10454486/is-the-iframe-tag-allowed-within-a-trigger-io-page-not-a-tabs-page)）。

可能有一种方法可以嵌入一个`object`可以工作的原始文件，但我无法找到一个可以查看自动播放的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:12:21.693

对于 1)，由于我们的 v1.3.15 版本可以嵌入 YouTube 视频：

[http://docs.trigger.io/en/v1.4/release-notes.html#v1-3-15](http://docs.trigger.io/en/v1.4/release-notes.html#v1-3-15)

# asp.net - 无法加载文件或程序集“Oracle.DataAccessVersion=9.2.0.700，Culture=neutral，PublicKeyToken=89b483f429c47342”

> ID：10501896
> 
> 赞同：4
> 
> 时间：2012-05-08T15:41:54.240
> 
> 标签：asp.net, oracle, iis-7.5, odp.net

**无法加载文件或程序集 'Oracle.DataAccess, Version=9.2.0.700, Culture=neutral, PublicKeyToken=89b483f429c47342' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）**

我使用 odac 32 位版本 11.2.0.3.0 开发了该应用程序。它在哪里工作得很好。但是部署到另一台我安装了带有 32 位客户端版本 11.2.0.3.0 的 IIS 7.5 的电脑上，我总是遇到上述错误。

我不知道它在哪里得到 oracle.DataAccess，版本 = 9.2.0.700。我尝试了一整天来解决这个问题。但仍然没有运气。请帮助我摆脱我真正感到可悲的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:33:33.490

我终于得到了解决方案。我只需要将程序集重定向到 web.config 文件中的当前程序集，如下所示：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
 <dependentAssembly>
  <assemblyIdentity name="Oracle.DataAccess" publicKeyToken="89B483F429C47342"   culture="neutral"/>
<bindingRedirect oldVersion="9.2.0.700" newVersion="4.112.3.0"/>
</dependentAssembly>
</assemblyBinding>
</runtime> 
```

谢谢大家的善意合作，知道什么是大解脱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:50:33.513

如果您使用的是 ODP.Net，请检查 gac 中的程序集版本以及它的目标平台。您可以通过从 Visual Studio 工具打开命令提示符并使用以下命令找到该信息

```
gacutil /l oracle.dataaccess 
```

如果处理器架构是 x86，请确保您的应用程序池允许运行 32 位版本的程序集。这可以通过右键单击相应的

```
 application pool->advanced settings->Enable 32 bit Application to true. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:37:06.363

转到此地址并阅读答案： [升级 DevExpress 后无法加载文件或程序集](https://stackoverflow.com/questions/4313351/could-not-load-file-or-assembly-after-upgrading-devexpress/13701255#)

> 在solutionExplorer：切换到文件视图并更改
> 
> ```
> CopyLocal = true 
> ```
> 
> **对于Server**和 *ServerGenerated*项目中的所有**DevExpress**程序集**。**它为我解决了这个问题。你能试试看，如果有帮助，请告诉我？

 ****** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:20:59.500

也许您正在引用一个引用这个其他版本的 dll，即使直接项目不是？确保检查所有 dll 上的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T17:13:55.147

版本和运行时版本不太可能相同，这让我之前搞砸了。

至于引用，在项目所在机器上的Solution Explorer中选择对Oracle.DataAccess的引用。现在查看属性窗口并检查路径。

最后，转到出现故障的机器并确保相同的 dll 位于完全相同的路径中。

您也可以通过在 dll 的属性中打开“本地复制”来解决此问题，但我认为这不是“最佳实践”。*****

# javascript - 鼠标悬停在图像上闪烁

> ID：10501904
> 
> 赞同：0
> 
> 时间：2012-05-08T15:42:11.310
> 
> 标签：javascript, html, css

我正在维护一个旧站点，并且在该站点上存在一个奇怪的鼠标悬停问题。它不会在 IE 中发生，但在 Chrome 中会发生。我试图看看问题是什么，但我找不到。看起来展开图像也在对鼠标悬停图像做出反应。这是网址。当您将鼠标悬停在图像上然后将鼠标悬停在 + 上时会发生这种情况。

[http://www.movi​​q.nl/zonz-schaduwdoeken-zonnezeilen](http://www.moviq.nl/zonz-schaduwdoeken-zonnezeilen)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:57:17.923

右键 + 单击（在 Mac 上控制 + 单击）并检查元素，然后将鼠标悬停在非常缓慢的位置。

该 + 的脚本正在添加一种与图像位置混淆的样式，并导致您的 + 从光标下方移出。如果你慢慢来，你会准确地指出它发生的那一刻。

超过：

```
<div class="contentAsset contentAsset-hover contentAsset-hover-delayOff_500 
contentAsset-large contentAssetLast" style="position: relative; overflow-x: 
hidden; overflow-y: hidden; " id="qid_15"> 
```

出去：

```
<div class="contentAsset contentAsset-hover contentAsset-hover-delayOff_500 
contentAsset-large contentAssetLast" style="" id="qid_15"> 
```

您可能还会查看控制台，有很多错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:38:28.560

这里的问题是，当您将 + 号悬停时，图像悬停事件会丢失，因此浏览器会不断从悬停状态变为非悬停状态。这是由于您的代码发生了一些奇怪的事情......我建议您进行一些更改以使代码更简单和易于解释，当然，也可以解决您的问题：

**onmouseover**和**onmouseout**事件的脚本：

```
function endAssetButtons(el) {
  if (!Spif.isIE||!Spif.isIE7) {
    el.parentNode.style.position="";
    el.parentNode.style.overflow="";
  }
}
function startAssetButtons(el,id) {
  if (!Spif.isIE||!Spif.isIE7) {
    el.parentNode.style.position="relative";
    el.parentNode.style.overflow="hidden";
  }
} 
```

正在向图像包装器 (div) 添加和删除一些 CSS。这是错误的，应该删除，因为 CSS position:relative 和 overflow:hidden 应该始终存在，以允许 + 符号始终相对于图像包装 div 绝对定位。

**所以，这个 css 应该一直对所有浏览器可用：**

```
.contentAsset {
  cursor: pointer;
  overflow: hidden;
  position: relative;
} 
```

*content.css（第 300 行）*

*这允许所有浏览器平等地处理 + 符号并保持隐藏直到动画被触发。*

* * *

**此外，+ 号的 css 应更改为：**

```
.contentAssetButton {
    text-indent:-9999px;
    height: 15px;
    width: 15px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    top: -20px;
    display: block;
} 
```

*content.css（第 334 行）*

*这允许 + 号具有更多类似按钮的样式，并且可以更好地被所有浏览器识别。*

至少这应该为您指明正确的方向！

在这里，[小提琴示例！](http://jsfiddle.net/zuul/cMfk7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:52:07.663

尝试定义高度而不是尝试使用填充来定义它，尽管这似乎并没有改变 chromes 编辑器中的任何内容。

我假设您正在使用 morph 属性在某处定位某些 js？如果可以，请提供js。

或者，您可以只使用 CSS3；[http://ice.im/animatedlink/](http://ice.im/animatedlink/)

我刚刚为你做了那个，你的 HTML 再简单不过了：

```
<!-- language: lang-html -->    
<div class="image"><a href="#"></a><img src="image.jpg" /></div> 
```

只需将课程更改为您想要的任何内容

# java - 将参数传递给 TestNG 运行 - Gradle

> ID：10501907
> 
> 赞同：2
> 
> 时间：2012-05-08T15:42:24.117
> 
> 标签：java, spring, testng, gradle

我在 TestNG 中有一些测试，我使用 Gradle 来运行它们。我想在运行时选择 Spring bean 中的一些属性。

因此，为了选择这个不同的 bean，我想将字符串参数传递给 useTestNG 调用。我的 build.gradle 如下所示：

```
apply plugin: 'java'
dependencies {
  compile fileTree(dir: 'lib', include: '*.jar')
}
test {  
    useTestNG()
} 
```

参数类似于“bean1”、“bean2”……在 Java 代码中，我将选择使用什么 bean。

```
 ApplicationContext context = new FileSystemXmlApplicationContext("**/pathToXML.xml");       
    Locators obj = (Locators) context.getBean("bean1"); 
```

如果这不是解决此问题的好方法，而另一种方法更好，我将很高兴知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-30T10:23:27.020

您可以像这样传递所有系统属性：

```
test {
    systemProperties System.getProperties()
    useTestNG()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:11:56.663

您最好将参数从 testng 本身传递给应用程序代码。如果您从 gradle 传入不同的参数，您将阻止从其他地方轻松快速地执行单元测试，例如 Eclipse 之类的 IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T08:00:08.047

您可以在测试任务中传递系统属性，如下所示：

```
test{
    systemProperty 'bean1', 'com.foo.Bar'
    useTestNG()
} 
```

在您的 Java 代码中，您可以使用`System.getProperty("bean1");`

# html - HTML/CSS 到 wordpress 主题转换 - 大约需要多长时间？

> ID：10501909
> 
> 赞同：0
> 
> 时间：2012-05-08T15:42:31.867
> 
> 标签：html, wordpress, wordpress-theming

我以前从未制作过 wordpress 主题，而我为之工作的客户希望将博客集成到他的网站中。他只想要基本的博客功能——它不会被用作 CMS。

我已经编写了网站的其余部分，但我需要给他一个 wordpress 主题需要多长时间的时间估计（快速路线对我来说只是将“循环”放入静态页面，但他想要一个提供的功能很少）。

有谁知道这大概需要多长时间？我只需要一个球场数字，因为我不知道任何线索！我意识到它的范围从项目到项目取决于复杂性等。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:58:26.070

根据过去的经验，从设计中删除一个主题可能需要一天的时间。再增加一天进行测试，再增加一天来发现怪癖。可选的一天是重写一些 HTML，因为您在与插件交互时发现它很麻烦或出现故障。

因此，一个不错的整数是一周，因为它可以舒适地占用您的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:46:54.553

我通常对我的网站进行编码，就像我在构建任何普通的静态网站一样，忘记了应该添加哪些不同的 wordpress 内容，认为这让我的思想免于一次尝试做太多事情。一旦我构建了几页，然后我开始剖析站点并添加可用的不同 wordpress 钩子，就像将您的站点分解为包含文件等一样。但是就像另一个构建一样接近站点，保持简单并逐步构建直到你有一个很好的功能齐全的 wordpress 主题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:51:06.750

我从来没有从头开始制作过 Wordpress 模板（也许你可以参考：[http](http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/) ://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/ ）。但我开始并发现它是一项非常耗时的活动......根据复杂性，我猜这可能需要一个完整的人周。

就我而言，我最终创建了 21 个主题的子主题（大约花了 1 天时间完成）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:06:49.070

这取决于您将 PSD 转换为 WordPress 模板的技能。通常对于基本设计，我只花了 5 小时。它包括 WordPress 安装和设置主题。以下是计算时间时要考虑的因素：

1.  PSD设计的复杂性
2.  jQuery 动画
3.  页数/内容
4.  客户需要的附加功能。

希望这会有所帮助。

# axapta - Dynamics AX 管理实用程序

> ID：10501910
> 
> 赞同：-2
> 
> 时间：2012-05-08T15:42:34.150
> 
> 标签：axapta, microsoft-dynamics, ax

Dynamics AX 上的管理实用程序有什么用途？

我应该什么时候使用它？我正准备安装 Dynamics AX，我发现要最小化环境。所有帮助建议因为管理的实用性而不是说什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:52:52.883

您指的[是 AX 2012 的管理实用程序](http://msdn.microsoft.com/en-us/library/gg751346.aspx)吗？这不是初学者的主题。

管理实用程序允许您配置和管理 Microsoft Dynamics AX 组件和工件。使用这些实用程序从元数据存储部署工件，例如报告和 Web 控件。

这包括命令行工具，例如[axutil](http://msdn.microsoft.com/en-us/library/hh352314.aspx)和[signtool](http://rmdax2012.wordpress.com/2012/02/14/everything-you-wanted-to-know-about-isv-models-but-were-afraid-to-ask/)，它们通常位于 %ProgramFiles%\Microsoft Dynamics AX\60\ManagementUtilities。

阅读链接文章，然后回来改进您的问题。

# hadoop - 如果任务失败，是否可以进行干预？

> ID：10501911
> 
> 赞同：1
> 
> 时间：2012-05-08T15:42:38.253
> 
> 标签：hadoop

我有一个在许多 url 上运行并解析它们的 mapreduce 作业。我需要一种方法来处理一个解析任务因致命错误（如 OOM 错误）而崩溃的情况。在正常的 hadoop 行为中，任务被重试了定义的时间，然后作业失败。问题在于以某种方式损坏的网址导致此错误。这些 url 将在所有重试中失败。

有没有办法在任务失败后进行干预？或达到重试次数后？并防止整个工作失败？

# c - 同步来自两个不同相机的图像

> ID：10501919
> 
> 赞同：3
> 
> 时间：2012-05-08T15:42:57.597
> 
> 标签：c, synchronization, camera

我从两个不同的相机接收图像，具有不同的帧速率和分辨率。其中一台相机（智能相机）用作控制器。它从其他相机和自己的图像传感器接收图像，然后将图像对保存在板载内存中。在这里，我有一个问题。我必须对每对图像进行立体匹配。因此，图像应该完全同步（仅相隔几毫秒）。我将两台相机都指向屏幕上的秒表并捕捉图像，以查看它们在时间上的距离。结果令人失望的是，它们都不是同步的，一对之间的时间偏移也不是恒定的。我正在使用 linux 和 C 编程。我尝试了两个 posix 线程来从单个相机捕​​获图像。第一个线程 cam1() 在开始图像捕获之前向另一个线程 cam2() 发出信号。因此，两个图像捕获应该同时开始。但这也不起作用。我真的很感激这方面的任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:00:07.123

在每个传感器网络中，时钟同步都是一个非常具有挑战性的问题。我不是专家，但是您可以尝试一些解决方案。

首先，[nm 是对的](https://stackoverflow.com/questions/10501919/synchronizing-images-from-two-different-cameras#comment13577518_10501919)！在需要控制 FPS（您需要具有相同的 FPS）、曝光、时间戳等的高 FPS 情况下，软件同步非常困难。相机同步通常在外部完成，称为外部触发和同步 I/O。

在外部同步的相机中，两个时钟并不总是相同的。相机时钟晶体总是有一个设计指定的漂移。您可以计算两个图像以可区分的方式漂移并重置时钟所需的时间。我使用 AVT 相机已经有一段时间了。[公司提议](http://www.alliedvisiontec.com/fileadmin/content/PDF/Support/Application_Notes/ApplNote-timestamp.pdf)：

> 有兴趣将相机时间戳同步到另一个时钟的用户应该注意，相机时钟会从另一个时钟漂移，因此需要通过重置时间戳来定期重新同步。

如果您的 FPS 较低，并且您可以随时知道丢帧数，您可以与每个帧的名为 Frame Count 的（增加的）注释同步。

如果您有立体校准图像，则默认相机图像中的某些特征（任意定义一个或仅触发另一个）可能位于/靠近穿过另一台相机的[核线](http://en.wikipedia.org/wiki/Epipolar_geometry)。因此，极线可能会在您的程序逻辑中引入某种不变量来配对特征（检测到的斑点）。

# automation - AutoIt 最大化当前活动屏幕

> ID：10501931
> 
> 赞同：3
> 
> 时间：2012-05-08T15:43:51.413
> 
> 标签：automation, autoit

是否可以运行一个简单地将当前活动窗口最大化的 AutoIt 脚本？

窗口已经打开，无需使用该`Run()`功能，只需识别当前选中的屏幕并最大化即可。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T22:05:54.590

[`WinSetState("[ACTIVE]", "", @SW_MAXIMIZE)`](http://www.autoitscript.com/autoit3/docs/functions/WinSetState.htm)将最大化当前活动窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:58:25.213

这将根据标题（标题栏中的窗口名称）最大化您选择的窗口。

```
WinSetState("WindowTitleGoesHere", "", @SW_MAXIMIZE) 
```

# android - phonegap android中的Admob单击页脚和页眉中的任意位置，它是唯一打开的浏览器

> ID：10501932
> 
> 赞同：0
> 
> 时间：2012-05-08T15:43:51.560
> 
> 标签：android, phonegap-plugins

我正在电话间隙应用程序中实现 android admob。我使用了 AdMob 智能手机网络代码。它显示广告（广告）但是当我点击页脚或页眉时，它只会进入浏览器并显示空白。我的应用程序完全混乱，因为阿德莫布。我已关注此链接：- [http://support.google.com/admob/bin/answer.py?hl=en&answer=1704625](http://support.google.com/admob/bin/answer.py?hl=en&answer=1704625) 我正在使用此 JS 文件：- [http://mm.admob.com/static/ iphone/iadmob.js](http://mm.admob.com/static/iphone/iadmob.js)

请告诉我哪里出错了。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:28:34.970

它说：“请注意，我们将于 2012 年 5 月 1 日关闭 AdMob Smartphone Web，并将其与主要的 Google AdSense 内容广告产品整合。如果您想通过移动网站获利，我们强烈建议您注册或通过[http://adsense.google.com](http://adsense.google.com)登录到您的 AdSense 帐户。从那里，您可以为您的移动网站生成正确的广告代码。

在网站上。他们可能已关闭，并且无法正常工作。

# android - android - 动态更改选项菜单，但通过从 XML 扩展

> ID：10501933
> 
> 赞同：8
> 
> 时间：2012-05-08T15:43:56.193
> 
> 标签：android, xml, resources, dynamically-generated, android-optionsmenu

我需要能够更改 android 上的选项菜单（按下菜单按钮时显示的菜单），以便在一种情况下（例如按下按钮时），它将使用特定的菜单资源（XML 文件如 /res/menu/... ) 用于菜单，在另一种情况下，使用不同的 XML 文件。

到目前为止，我只看到了在没有 xml 的情况下执行此操作的示例（[此处](https://stackoverflow.com/questions/5876109/how-to-programatically-change-an-item-in-the-options-menu)和[此处](http://russenreaktor.wordpress.com/2010/02/28/solved-android-dynamically-change-options-menu-items/)的示例），并且它们运行良好，但我希望能够在某些情况下更改整个菜单。我试图修改我找到的解决方案，但我的试验都没有奏效。

如果可能的话，我宁愿仅在需要使用与当前菜单资源不同的菜单资源进行更新时重新创建菜单。

请帮我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T16:05:06.653

如果您想在第一次创建选项菜单后随时更改它，您必须重写 onPrepareOptionsMenu() 方法。

```
public boolean onPrepareOptionsMenu (Menu menu) {    
    menu.clear();    
    if (CASE_1 == 0) {
        CASE_1  = 1; 
        getMenuInflater().inflate(R.menu.secondmenu, menu);
    }
    else {
        CASE_1  = 0;
        getMenuInflater().inflate(R.menu.firstmenu, menu);
    }    
    return super.onPrepareOptionsMenu(menu);
} 
```

其中 CASE_1 是指根据您的要求要显示的菜单。

# ruby-on-rails - 需要帮助将数据库从开发迁移到使用 Rails 进行测试

> ID：10501939
> 
> 赞同：2
> 
> 时间：2012-05-08T15:44:22.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rails-migrations

类似的问题被问了很多。但是，我觉得我的情况有点不同。我从 Heroku（我在 prod 中使用 sqlite3）中提取了一个数据库到我的本地机器（使用 PostgreSQL）。prod db 当时没有任何数据。

在那之后，我没有进行任何数据库迁移来测试。现在我的开发数据库中有几个字段。但是，当我去测试控制台查看我有什么（引用用户表）时，User.count 返回 0，但在开发中返回 2 个用户。

所以我确实没有`db:migrate RAILS_ENV=test`发现错误消息和成功消息。我认为这是成功的，并检查了测试数据库是否有这 2 个用户，但仍然没有。然后我尝试了`bundle exec rake db:test:prepare`。这是输出

```
**You have 4 pending migrations:

  20120415210441 CreateUsers

  20120418064930 AddIndexToUsersEmail

  20120419034627 AddPasswordDigestToUsers

  20120504031144 AddRememberTokenToUsers

Run `rake db:migrate` to update your database then try again.** 
```

解决办法是什么？

**编辑：** 仅供参考：我正在使用 Windows 我也运行**rake db:migrate** 并且我得到了这个错误。

```
$ rake db:migrate
==  CreateUsers: migrating ====================================================
-- create_table(:users)
rake aborted!
An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: table "users" already exists: CREATE TABLE "users" ("id"
INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "email" varcha
(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T15:57:51.100

错误消息表明您的开发和测试迁移不同步。

首先在 dev 上运行迁移。这将使用您最近的所有迁移更新 dev。

```
rake db:migrate 
```

然后运行 ​​db:test:prepare。这将使测试数据库与开发数据库具有相同的架构。

```
rake db:test:prepare 
```

现在，了解 db:test:prepare 使 test 具有与 dev 相同的模式，但没有记录。要在测试中填充记录，请实施固定装置或工厂（请参阅 factory-girl gem）。通常在您的测试中调用工厂来为该测试创建记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:39:52.017

这是另一个问题和另一个答案。

您应该删除表并重新运行迁移。

如果您不知道如何在 SQLite 中删除表，那么

1.  注释掉 20120415210441_CreateUsers.rb 中的 create_table 方法调用。
2.  运行 > rake db:migrate VERSION=20120415210441
3.  运行 > rake db:migrate VERSION=??? 在哪里 ？？？是 CreateUsers 之前的迁移版本。
4.  取消注释20120415210441_CreateUsers.rb中的代码
5.  运行 > rake db：迁移

# qt - 如何使 QSystemTrayIcon 类成为单独的线程类

> ID：10501941
> 
> 赞同：0
> 
> 时间：2012-05-08T15:44:31.087
> 
> 标签：qt

我正在尝试通过执行以下操作使我的 QSystemTrayIcon 类成为单独的线程类

1.  从 QThread 派生了我的 TrayIcon 类
2.  在 TrayIcon 类中实现了 run() 方法
3.  将 TrayIcon 初始化代码移至 Run 方法

从主调用 TryIcon.start()。

但是我的应用程序在执行 TrayIcon 类中的“connect”语句时崩溃了。连接语句用于托盘图标菜单功能。

我试图通过阅读 QT 文档、示例来了解 QThread、连接功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T22:49:58.077

你不能那样做。所有 GUI 代码都必须驻留在 GUI 线程中。如果需要，您可以在单独的 QObject 中实现托盘图标行为的耗时方面。*然后将该 QObject 移动到一个单独的线程，并通过信号/插槽连接*（不是直接插槽调用！）或通过*发布*事件从 GUI 线程与其通信。直接调用is slot 是没有意义的：slot 代码会在调用线程中执行，这不是你想要的。

如果您想让生活更轻松，您可以在 QObject 上公开便利槽。这些仅连接到执行实际工作的受保护或私有插槽。您将在 QObject 的构造函数中建立这样的连接，并且它必须是 QueuedConnection。然后，您可以直接调用便利槽：在幕后，Qt 将编组参数并将它们作为事件发布到 QObject 所在线程的事件队列中。该线程中的事件循环将从队列中获取它们并将调用调度到在您的 QObject 中工作的插槽。

# wcf - WCF 客户端的 WSSecurity IBM DataPower 问题

> ID：10501950
> 
> 赞同：2
> 
> 时间：2012-05-08T15:45:03.833
> 
> 标签：wcf, web-services, interop, x509certificate, ibm-datapower

我正在尝试在 WCF 中使用 IBM DataPower Web 服务，但收到以下错误消息：

**找不到“System.IdentityModel.Tokens.X509SecurityToken”令牌类型的令牌身份验证器。根据当前的安全设置，不能接受该类型的令牌。**

HTTP 响应返回 200，我可以在 Fiddler 中调试它时看到正确的 SOAP 响应。

但是，WCF 客户端似乎不知道如何处理 SOAP 响应中的 BinarySecurityToken 元素。

这是我的 WCF 配置：

```
<client>
      <endpoint address="https://xxxx:6443/xxxx/xxxxx"

  binding="customBinding" bindingConfiguration="NewBinding0"

  contract="SoapPort" name="XXSoapPort" behaviorConfiguration="ServiceBehavior">
      </endpoint>
    </client>

<customBinding>
        <binding name="NewBinding0">
          <security allowSerializedSigningTokenOnReply="true" authenticationMode="CertificateOverTransport" messageSecurityVersion="WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10" requireDerivedKeys="false" securityHeaderLayout="Lax" />
          <textMessageEncoding messageVersion="Soap11" />

          <httpsTransport />
        </binding>
</customBinding>

 <behaviors>
      <endpointBehaviors>
        <behavior name="ServiceBehavior">
          <clientCredentials>
            <clientCertificate findValue="xxxxxx"   storeLocation="LocalMachine"  x509FindType="FindBySubjectName"  storeName="My"  />
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
 </behaviors> 
```

这是一个 SOAP 请求示例：

```
<soapenv:Envelope xmlns:dgi="http://dgi.gub.uy" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Header><wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-
1.0.xsd"><wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary"
ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="CertId-45851B081998E431E8132880700036719"
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-
1.0.xsd">binarysecuritytoken base64...</wsse:BinarySecurityToken><ds:Signature Id="Signature-13"
xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="#id-14">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>62KaCXQkeXTGyGd+aoX46cGAl9M=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
YdwY0hmkHE8tnQmGQBdfA5fjVyoHWMiQhKanI1SEaii295hakwMbf5KsP3YMMhzl4HEHs6nqhZpq
lyL1OBcbJPJQN34uhOtucnzgObUYHckkJqfAN/sYmfNMSFGDvyZCFQSiJwh8dkvKxmxzdUwv3wza
M+i0nzLAh9viQZYS8N8=
</ds:SignatureValue>
<ds:KeyInfo Id="KeyId-45851B081998E431E8132880700036720">
<wsse:SecurityTokenReference wsu:Id="STRId-45851B081998E431E8132880700036821" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-
wss-wssecurity-utility-1.0.xsd"><wsse:Reference URI="#CertId-45851B081998E431E8132880700036719" ValueType="http://docs.oasisopen.
org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/></wsse:SecurityTokenReference>
</ds:KeyInfo>
</ds:Signature></wsse:Security></soapenv:Header>
<soapenv:Body wsu:Id="id-14" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<method>
    data...
    </method>
.. 
```

这是一个 SOAP 响应：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAPENC="
http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<SOAP-ENV:Header>
<wsse:Security SOAP-ENV:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:BinarySecurityToken wsu:Id="SecurityToken-c0477b7a-df1a-4883-9ae1-59a518913f96" EncodingType="http://docs.oasisopen.
org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wssx509-
token-profile-1.0#X509v3" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-
1.0.xsd">MIIFrDCCA5SgAwIBAgIQas+Rf7PxwFxNudVRjoOzEjANBgkqhkiG9w0BAQUFADB6MQswCQYDVQQGEwJVWTErMCkGA1UECgwiQURNSU5JU1RSQ
UNJT04gTkFDSU9OQUwgREUgQ09SUkVPUzEfMB0GA1UECwwWU0VSVklDSU9TIEVMRUNUUk9OSUNPUzEdMBsGA1UEAwwUQ29ycmVvIFVydWd1YXlvIC
0gQ0EwHhcNMTEwNDI4MjEwMDAxWhcNMTIwNDI4MjEwMDAxWjCBxzEiMCAGCSqGSIb3DQEJARYTam1vbnRhbmVAZGdpLmd1Yi51eTEfMB0GA1UECwwW
QU5BTElTSVMgREUgUFJPRFVDQ0lPTjEhMB8GA1UECgwYREdJLVBSVUVCQSBTRVJWSUNJT1MgV0VCMRMwEQYDVQQIDApNb250ZXZpZGVvMQswCQ
YDVQQGEwJVWTEYMBYGA1UEBRMPUlVDMjE5OTk5ODIwMDEzMSEwHwYDVQQDDBhER0ktUFJVRUJBIFNFUlZJQ0lPUyBXRUIwgZ8wDQYJKoZIhvcNAQE
BBQADgY0AMIGJAoGBAMcMcu70s0RQkD6ifYBGXwATovTxxA/Hjc8WKM16yJkz63d0eSTjjREYmM87g6NRacADy9LZRyENiRPjsBI+Tw9PHR/7g+frTIS+vIQZ0+f
9Rq1q2uxvw8TKoO9FvcrBabdl9dUBIrJEPa20wj6U+dupTZ66bD5uFXBUsKo2sZujAgMBAAGjggFiMIIBXjAeBgNVHREEFzAVgRNqbW9udGFuZUBkZ2kuZ3ViLnV
5MAwGA1UdEwEB/wQCMAAwDgYDVR0PAQH/BAQDAgP4MB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDBDARBglghkgBhvhCAQEEBAMCBaAw
HQYDVR0OBBYEFP0YQfFQvej6szyGhKlpNI0tESi5MB8GA1UdIwQYMBaAFCWP30Mvjmq6C75GXFdQk7dRvvzZMFQGA1UdIARNMEswSQYMKwYBBAGB9U8
BAQEEMDkwNwYIKwYBBQUHAgEWK2h0dHA6Ly93d3cuY29ycmVvLmNvbS51eS9jb3JyZW9jZXJ0L2Nwcy5wZGYwGAYNKwYBBAGB9U8BAQEEAQQHDAVE
aXNjbzA8BgNVHR8ENTAzMDGgL6AthitodHRwOi8vd3d3LmNvcnJlby5jb20udXkvQ29ycmVvQ2VydC9hbmMuY3JsMA0GCSqGSIb3DQEBBQUAA4ICAQA01MEJ
sZ8VXJIybZQ0NlBJPXz7n8GbTf41Aq4lWxLI5rBWJD1uyWUdz2jUD0DuqflTAGknphzxn49QACCTA1Pv0aZ6hnK04uI9j7UJe4LiVx3aWbpLRBCnYrIs+QU2pyClEM
4bNPt0BU2DG+Q9k9SeCDQ8VD7hiD2W/aK8HLo6EVLAEwrl3pTums2dwxtO1KKPw6OBbYYitCjR5j6Hy5q1+fMTFXmx0vo+ZYFOl8DVoSp6OQJd2mcaL0CNVWI
9sOYRkJKEoELIJDSnIMKkUqgN2ilg05Dqcl/TDj2I5VfPLXZpnpuQbb6ADjEOtMzlkfe2EFemn0s/+2Hn97h5rtJMcjTuUhh937JZPWnD1XQTxICjS3ql1nSwbnJz9bk8P
N/j8cK4Kw+xipGo7pRxITFKUHmOIXsj05tH3kFWf8htdU/4rIyrvzJ3xUhita78SHaJMALQa4AGxmSxIEvej0+qyrxx4geMkzb/n5t3JAAluxW2ja3f/FrXMuwT7iKebreMS4
4FO0maMpP29SW94G8yClumghtU/6LI67oHxhpUNkCQ3UV4JaI6wEZcgV5KLXm9rr1i/hMKV5FspQcYg36qdeRz/N4DwuorVwZuTsXCIMwcKQCkzu1oUSkvO3PE
5cCRnu9cyJ3GzPfUO0T8mrCmI2XwISAvkuLs3kd6FeRBAw==</wsse:BinarySecurityToken>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<Reference URI="#Body-75c3e1d7-a956-4387-827e-58e7bf7f9672">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<DigestValue>O+QjV1cBEXJlS3Z15FBQZImx/Gs=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>lCEfQOGBeSvfvHPLUYtT5PUlwe8Gdbv6b2yto4WzSsoEpYz+6d4YFlyt+Vzq1DSK8Jcmz1ELuJkzPwZCt2aAkSxpToI51vjziELJJqiZfGR5gLJRCZ
CK/zhk3pJUBzaiLLSwfN1iX9t4X8IGqisc6yqrS9kabkhUvvsiYrdRIr4=</SignatureValue>
<KeyInfo>
<wsse:SecurityTokenReference xmlns="">
<wsse:Reference URI="#SecurityToken-c0477b7a-df1a-4883-9ae1-59a518913f96" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-
wss-x509-token-profile-1.0#X509v3"/>
</wsse:SecurityTokenReference>
</KeyInfo>
</Signature>
</wsse:Security>
</SOAP-ENV:Header>
<SOAP-ENV:Body wsu:Id="Body-75c3e1d7-a956-4387-827e-58e7bf7f9672" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurityutility-
1.0.xsd">
...data...
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:48:36.357

Use "MutualCertificate" instead of "CertificateOverTransport". This will require you to supply a service certificate - just configure any dummy certificate, even the same one as used for signature. Also you will get an exception on dns expected name which will tell you what to fix.

Then try it once with allowSerializedSigningTokenOnReply true and once false. If this fails send me your config, the soap request you sent, and the response the server sent.

# iphone - iOS - stringWithFormat 更改部分文本颜色

> ID：10501955
> 
> 赞同：1
> 
> 时间：2012-05-08T15:45:38.837
> 
> 标签：iphone, ios, xcode, nsstring, stringwithformat

我正在为我的应用程序提取推文，我希望能够以某种方式和颜色格式化我的推文。例如，这将是一个简单的推文......

```
"@somename This is a sample tweet from twitter. - 7 hours ago" 
```

是否可以获取字符串的最后一部分，在这种情况下为“7 小时前”并更改字体/字体颜色？

我正在使用`stringWithFormat:`以这种方式格式化：

```
tweet = [NSString stringWithFormat:@"%@%@", title, time]; 
```

但我不确定是否可以`time`使用此代码更改字体和颜色。

以前有人做过吗？

**编辑**

我已经尝试使用 [AliSoftware 的 OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)进行此操作，但我使用的是 ARC，这对我来说并不适合。

是否有标准的“iOS”方式来实现这一点？也许使用`NSAttributedString`可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:52:12.877

您可以使用核心文本。也许以下问题会对您有所帮助[是否可以在一个 UIlabel 中设置不同的字体？](https://stackoverflow.com/questions/10242786/is-it-possible-to-set-different-font-in-one-uilabel)

您必须在您的应用程序中导入 CoreText.framework

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:54:59.320

`NSString`s 不知道字体。看看`NSAttributedString`核心文本。参考：

*   [iOS 文本、Web 和编辑编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html)
*   [NSAttributedString 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html)
*   [带有两种不同颜色文本的 UILabel](https://stackoverflow.com/q/3952571/1241690)
*   [iPhone - UILabel 同时包含多种字体的文本](https://stackoverflow.com/q/1417346/1241690)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:55:06.687

字体/字体颜色不是数据类型 NSString 的固有属性。您可以使用两个单独的 UILabel，或者创建一个小的 UIWebView 来格式化文本。

# python - 使用正则表达式搜索引号

> ID：10501959
> 
> 赞同：0
> 
> 时间：2012-05-08T15:46:04.830
> 
> 标签：python, regex, quotation-marks

我正在寻找一种方法来搜索文本文件以查找作者引用的内容，然后将其打印出来。到目前为止我的脚本：

```
import re

    #searches end of string 
    print re.search('"$', 'i am searching for quotes"')

    #searches start of string 
    print re.search('^"' , '"i am searching for quotes"') 
```

我想做什么

```
import re

## load text file
quotelist = open('A.txt','r').read()

## search for strings contained with quotation marks
re.search ("-", quotelist)

## Store in list or Dict
Dict = quotelist

## Print quotes 
print Dict 
```

我也试过

```
import re

buffer = open('bbc.txt','r').read()

quotes = re.findall(r'.*"[^"].*".*', buffer)
for quote in quotes:
  print quote

# Add quotes to list

 l = []
    for quote in quotes:
    print quote
    l.append(quote) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:58:25.370

开发一个正则表达式，以匹配您希望在带引号的字符串中看到的所有预期字符。然后使用python方法查找所有匹配项`findall`。`re`

```
import re

buffer = open('file.txt','r').read()

quotes = re.findall(r'"[^"]*"',buffer)
for quote in quotes:
  print quote 
```

在 " 和 " 之间进行搜索需要 unicode-regex 搜索，例如：

```
quotes = re.findall(ur'"[^\u201d]*\u201d',buffer) 
```

并且对于使用“和”互换引用终止的文档

```
quotes = re.findall(ur'"[^"^\u201d]*["\u201d]', buffer) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-08T15:56:31.953

您不需要正则表达式来查找静态字符串。您应该使用这个 Python 习惯用法来查找字符串：

```
>>> haystack = 'this is the string to search!'
>>> needle = '!'
>>> if needle in haystack:
       print 'Found', needle 
```

创建列表很容易 -

```
>>> matches = [] 
```

存储比赛也很容易......

```
>>> matches.append('add this string to matches') 
```

这应该足以让你开始。祝你好运！

用于解决以下评论的附录...

```
l = []
for quote in matches:
    print quote
    l.append(quote) 
```

# jsf - 如何在现有的 JSF 应用程序中添加接缝？

> ID：10501962
> 
> 赞同：0
> 
> 时间：2012-05-08T15:46:36.373
> 
> 标签：jsf, jboss, seam, liferay

我有现有的 JSF portlet 应用程序在 Liferay 中运行，如何添加 Seam 支持？我正在使用 JSF2。我也很困惑我应该使用哪个接缝版本？接缝 2 还是接缝 3？

谢谢，马诺伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:26:54.320

我还没有向现有的 JSF 应用程序添加 Seam 支持，所以我无法评论那部分。但是，如果您使用的是 JSF2，那么此时您唯一的选择是 Seam 3。Seam 2.3 计划支持 JSF2，但目前还处于 Beta 版中。这是我在 Seam 2.3 上看到的最新信息：[https ://community.jboss.org/blogs/marek-novotny/2012/04/02/seam-230beta1-is-out](https://community.jboss.org/blogs/marek-novotny/2012/04/02/seam-230beta1-is-out)

# eclipse-plugin - 在标记上添加更改侦听器

> ID：10501966
> 
> 赞同：0
> 
> 时间：2012-05-08T15:46:47.410
> 
> 标签：eclipse-plugin, eclipse-rcp, markers

如何在 IMarker 边界中添加修改侦听器？例如，我有一个红色标记，它包裹了@Annotation。当“@Annotation”文本发生更改时，我如何获得通知？我想通过更改文本来修改/删除标记。

我的主要目标是在框中的文本更改时更改标记。可能吗 ？

![标记示例](../Images/1a288a7074debb6a50f4e67d28992922.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:46:41.473

是的，这是可能的。您必须实现`IResourceChangeListener`接口，在工作区中注册它以监听标记的变化，并在事件到达时调用 findMarkerDeltas()。

[您可以在此处](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/resAdv_events.htm)获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:25:55.047

我会尝试实现*IPartListener2* ( [JavaDoc](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IPartListener2.html) ) 并覆盖该方法`partInputChanged`。
我没有找到任何方法在指定的标记上注册监听器。

# java - 为什么我需要在 fireTableRowsInserted() 之前调用 getRowSorter().modelStructureChanged()

> ID：10501969
> 
> 赞同：1
> 
> 时间：2012-05-08T15:46:56.983
> 
> 标签：java, swing, abstracttablemodel

我有一个扩展 AbstractTableModel 的表。当它的数据到达时，我删除行并使用新数据重新创建它们。我不明白的是为什么我必须调用以下内容：

```
getRowSorter().modelStructureChanged(); 
```

打电话之前

```
fireTableRowsInserted(); 
```

如果我不这样做，fireTableRowsInserted() 会抛出以下异常：

```
Exception in thread "AWT-EventQueue-1" java.lang.ArrayIndexOutOfBoundsException: 1
    at javax.swing.DefaultRowSorter.setModelToViewFromViewToModel(DefaultRowSorter.java:717)
    at javax.swing.DefaultRowSorter.rowsInserted0(DefaultRowSorter.java:1046)
    at javax.swing.DefaultRowSorter.rowsInserted(DefaultRowSorter.java:851)
    at javax.swing.JTable.notifySorter(JTable.java:4258)
    at javax.swing.JTable.sortedTableChanged(JTable.java:4106)
    at javax.swing.JTable.tableChanged(JTable.java:4383)
    at javax.swing.table.AbstractTableModel.fireTableChanged(AbstractTableModel.java:280)
    at javax.swing.table.AbstractTableModel.fireTableRowsInserted(AbstractTableModel.java:215)
    at ems.ui.components.BoundTable$BoundTableModel.addRow(BoundTable.java:189)
    at ems.ui.components.BoundTable.loadData(BoundTable.java:315)
    at ems.ui.components.BoundTable.modelChanged(BoundTable.java:333)
    at ems.model.BaseDataModel.notifyPropertyChange(BaseDataModel.java:541)
    at ems.model.BaseDataModel.listLoadedFully(BaseDataModel.java:456)
    at 
    at ems.network.HTTPProtobufPoller$2.run(HTTPProtobufPoller.java:107)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:29:22.807

如果您重新创建整个表（删除行然后重新插入它们），您至少需要调用“fireTableDataChanged”（如果您很懒惰并且不想告诉模型确切发生了什么变化，只是希望它重新计算所有内容:-)。

'fireTableRowsInserted' 只能在将数据附加到表模型时使用（即不要从表模型中删除数据）。

# php - 哪个数据库表架构用于存储调查数据？

> ID：10501970
> 
> 赞同：1
> 
> 时间：2012-05-08T15:47:06.117
> 
> 标签：php, mysql, database, zend-framework, server-load

我正在开发用于进行在线调查的软件。当许多用户同时填写调查时，我在处理高数据库写入负载时遇到了麻烦。我当前用于存储调查数据的表（MySQL、InnoDB）具有以下列：dataID、userID、item_1 .. item_n。item_* 列具有不同的数据类型，对应于使用特定项目获取的数据类型。大多数项目列是 TINYINT(1)，但也有一些 TEXT 项目列。大型调查可以有一百多个项目，导致一个包含一百多个列的表。用户在一篇 http 帖子中回答了大约 20 个项目，相应的行必须相应更新。用户可能会跳过很多项目，导致行中有很多 NULL 值。

我正在考虑以下解决方案来解决我的写入负载问题。我没有使用包含许多列的单个表，而是设置了与使用的数据类型相对应的几个表，例如：data_tinyint_1、data_smallint_6、data_text。这些表中的每一个都只有以下列：userID、itemID、value（value 列具有与其表对应的数据类型）。对于一个包含例如 20 个项目的 http 帖子，我可能必须在 data_tinyint_1 中创建 19 行，在 data_text 中创建 1 行（而不是更新具有许多列的大行）。但是，对于每个项目，我需要确定它的数据类型（通过两个表连接），以便我知道在哪个表中创建新行。使用这种方法，我的基于 zend 框架的应用程序代码将变得更加复杂。

我的问题：

1.  对于繁重的写入负载，我的解决方案会更好吗？
2.  你有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:54:59.583

由于您已经到了抽象此模式以模仿实际数据类型的地步，因此您应该简单地为每个调查创建新表集，这可能是有道理的。好处是锁定会减少，如果负载变得无法承受，您可以将重负载隔离到外部机器。

单一调查数据库结构可以更准确地反映您的真实世界条件和数据输入处理程序。它应该让你的抽象头痛消失。

动态创建表没有任何问题。在某些配置中，软分片是优选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T16:07:42.470

这看起来很明显的解决方案是**使用文档数据库**进行快速写入，然后使用 cron 或类似的东西异步**批量插入 MySQL 的答案。**您可以在文档数据库中创建视图以进行快速统计，但如果您不喜欢文档 DBMS，则只能在 MySQ 中进行过滤和其他复杂的操作。

# performance - 双核计算机按特定特征对十亿个文件进行排序需要多长时间？

> ID：10501973
> 
> 赞同：1
> 
> 时间：2012-05-08T15:47:20.537
> 
> 标签：performance, file

我只是想问一下，假设有一台具有 3 GB RAM 的双核计算机，这台计算机需要多长时间才能按照“大小”、“修改日期”、“名称”等特殊和特定特性对十亿个文件进行排序“或之类的？一般来说，这种计算的基本原理和依据是什么？假设我们有一台具有 8 GB RAM 的四核计算机，我们如何计算这台计算机需要多长时间才能通过名称等特殊特性对 495,000 个文件进行排序？

我想开发一个软件，可以根据过去的历史预测游戏成功的机会。比如每场比赛的平均进球数，支持和反对的进球等。我想积累大约 50000 场比赛及其结果，最后根据每场比赛的平均进球总数和反对平均进球数等参数计算其中每场比赛的成功机会. 就像软件计算出两支球队在每场比赛中至少有 1.4 个进球的比赛有多少会以超过 2.5 个进球结束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:58:57.267

O(NLOGN) 基础？因为基本上，如果您可以获得指向我认为可能的所有文件的指针（懒得计算），那么您最好的算法将是快速排序，即 NlogN，如果您没有足够的空间，您将使用 N-way 之类的东西最准确的排序方法也是 NLogN 2NLog(B-1)N （B-1 是 log 的基础，N 是内存中指针的数量。

# php - php文件上传错误

> ID：10501975
> 
> 赞同：-5
> 
> 时间：2012-05-08T15:47:33.860
> 
> 标签：php, html

我的 HTML 代码

```
<form method="post" enctype="multipart/form-data" action="upload.php">
<input type="file" name='image' >
<input type="SUBMIT" value="Submit">
</form> 
```

PHP 代码（只提到错误的那一行）

```
 <?php
    list($waste,$extension) = explode("/",$_FILES["image"]["type"]);echo $extension;
    ?> 
```

如果文件是图像，它会给出文件扩展名，但如果是视频，它会给出错误。

**错误**

```
( ! ) Notice: Undefined index: image in D:\wamp\www\upload.php on line 3
Call Stack
#   Time    Memory  Function    Location
1   0.0007  364904  {main}( )   ..\upload.php:0

( ! ) Notice: Undefined offset: 1 in D:\wamp\www\upload.php on line 3
Call Stack
#   Time    Memory  Function    Location
1   0.0007  364904  {main}( )   ..\upload.php:0 
```

请告诉我如何使它也适用于视频上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:57:01.123

您需要先检查变量是否可用，然后才能开始处理它，很明显您需要一些有关如何使用的基本知识，`$_FILES`请参阅[http://php.net/manual/en/reserved.variables.files.php](http://php.net/manual/en/reserved.variables.files.php)

```
<?php

if (isset ( $_FILES ['image'] )) {
    $extension = pathinfo ( $_FILES ['image'] ['name'], PATHINFO_EXTENSION );
    echo $extension;
}

?>

<form method="post" enctype="multipart/form-data" action="">
    <input type="file" name='image'> <input type="SUBMIT" value="Submit">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:02:53.813

看起来对于视频文件，文件大小太大（126 MB，据 OP 报告）。所以 PHP 脚本永远不会收到文件。

您可以在几个地方进行调整。首先，您可以在 HTML 表单中设置最大文件大小：

```
<input type="hidden" name="MAX_FILE_SIZE" value="157286400" /> <!-- 150 MB --> 
```

此外，您可能需要调整 php.ini 文件中的一些变量：

[http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/](http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:26:24.967

ini_set 函数是

```
ini_set("max_filesize","150M"); 
```

# c# - 访问 Web.config AppHarbor 部署时出错

> ID：10501979
> 
> 赞同：1
> 
> 时间：2012-05-08T15:48:00.710
> 
> 标签：c#, asp.net, appharbor

我在 AppHarbor 中部署了 ac#MVC 3 项目，问题是我需要更改 AppHarbor 使用的连接字符串，以便添加`MultipleActiveResults = True`. 为此，`Application_Start()`我在 Global.asax.cs 文件中添加了以下内容：

```
var configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
var connectionString = configuration.ConnectionStrings.ConnectionStrings["SumDb"].ConnectionString;
if (!connectionString.Contains("MultipleActiveResultSets=True;"))
{
    connectionString += "MultipleActiveResultSets=True;";
}
configuration.ConnectionStrings.ConnectionStrings["SumDb"].ConnectionString = connectionString;
configuration.Save(); 
```

但是由于某种原因，当我通过 AppHarbor 访问我的项目时，我收到了对文件的访问错误：

**加载配置文件时出错：拒绝访问路径“D:\websites\4c\cb534\0x00 (...) uymh.tmp”。**

也许我需要一些许可或类似的东西。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:06:09.193

您必须在应用程序设置中启用对 AppHarbor 工作文件系统的写访问权限。默认情况下它是只读的（除了`App_Data`）。

# jquery - JQuery“Get”没有在 MVC4 中获取绝对路径

> ID：10501980
> 
> 赞同：0
> 
> 时间：2012-05-08T15:48:00.727
> 
> 标签：jquery, get, asp.net-mvc-4

在我的开发框中，我网站的 URL 是“http://localhost:portname/home”，当我在登录后单击右上角的“Hello”时，它带我到的路径是“localhost:/帐户/GetTabContent/tab1"

使用以下 jQuery 代码：

```
var url = "/Account/GetTabContent/tab1";
var targetDiv = $('#div1');
$.get(url, null, function (result) {
  $(targetDiv).html(result);
}); 
```

这在我的盒子上运行良好。但是，当我们将其部署到我们的测试服务器时，实际网站的路径是：

```
http://server name/website folder/home 
```

现在，当我在登录后单击名称时，它仍然需要我

```
http://server name/Account/GetTabContent/tab1 
```

我得到一个 404 错误。我如何强迫它去

```
http://server name/website folder/GetTabContent/tab1 
```

我希望我的问题是有道理的。如果没有，请告诉我，我会澄清

****** *** ****编辑****** ********

 **好的，我们通过更改以下代码解决了问题（从 url 中删除了控制器名称，想知道调用另一个控制器的操作时会怎样）

```
**var url = "GetTabContent/tab1";**
var targetDiv = $('#div1');
$.get(url, null, function (result) {
$(targetDiv).html(result);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:01:04.287

一般来说，我建议使用 Url Helpers 设置路径，所以在上面的代码中这样做：

```
 var url = '@Url.Action("GetTabContent", "Account", new { id = "tab1" })';
var targetDiv = $('#div1');
$.get(url, null, function (result) {
  $(targetDiv).html(result);
}); 
```

在接受 url 的地方（例如脚本标签等），使用波浪号指定您的 url，例如：

```
 <script src="~/Scripts/foo.js"></script> 
```

（这假定 MVC 4，但由于它被标记，我认为这似乎是公平的 :)）

而不是指定到您可能希望在部署时更改的位置的相对或更差的绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:50:55.583

我在很多框架上都有同样的问题我的解决方案是将表单的操作设置为我想要它去的地方，因为 mvc 通常使用类似于`echo Form:open('action');`踢出绝对路径的东西记住这是在 php 框架上但我假设 asp 提供类似的东西，所以我用我的 jquery

```
$.post($(this).attr('action'), $(this).serialize(), function and so on 
```**

# c# - 在 Windows 2003 上安装窗口服务找不到 Service.InstallState 文件

> ID：10501983
> 
> 赞同：1
> 
> 时间：2012-05-08T15:48:09.523
> 
> 标签：c#, windows, windows-installer

我正在部署与安装程序（`.msi`和`.exe`文件）一起打包的 Windows 服务。

一切都在我的虚拟机上运行，​​它安装了`Windows 2003 OS`. 但是当我在真实服务器上进行部署时，我收到了以下消息（当我双击 msi 文件并按照安装程序进行操作时）

```
Could not find file 
C:\Program Files\ProgramNameFolder\ServiceSetup\Service.InstallState 
```

不知道为什么`InstallState`文件没有被复制到文件夹中。我只看到`Service.exe`文件。

任何帮助是极大的赞赏。

# java - Android ICS 拼写错误修正导致 PopupWindow 崩溃

> ID：10501984
> 
> 赞同：3
> 
> 时间：2012-05-08T15:48:10.490
> 
> 标签：java, android, user-interface, widget

在我们的应用程序中，我们有一个自定义弹出窗口。它在 2.2 -> 4.0.3 上完美运行，没有任何问题。如果您在弹出窗口中的编辑文本中拼错了 ICS 中的某个单词并单击它以让 android 尝试更正它，应用程序每次都会立即崩溃，但出现以下异常：

```
E/AndroidRuntime(13275): android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRootImpl$W@42929b28 is not valid; is your activity running?
E/AndroidRuntime(13275):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:515)
E/AndroidRuntime(13275):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:279)
E/AndroidRuntime(13275):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
E/AndroidRuntime(13275):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
E/AndroidRuntime(13275):    at android.view.Window$LocalWindowManager.addView(Window.java:537)
E/AndroidRuntime(13275):    at android.widget.PopupWindow.invokePopup(PopupWindow.java:988)
E/AndroidRuntime(13275):    at android.widget.PopupWindow.showAtLocation(PopupWindow.java:845)
E/AndroidRuntime(13275):    at android.widget.PopupWindow.showAtLocation(PopupWindow.java:809)
E/AndroidRuntime(13275):    at android.widget.TextView$PinnedPopupWindow.updatePosition(TextView.java:9517)
E/AndroidRuntime(13275):    at android.widget.TextView$PinnedPopupWindow.show(TextView.java:9474)
E/AndroidRuntime(13275):    at android.widget.TextView$SuggestionsPopupWindow.show(TextView.java:9718)
E/AndroidRuntime(13275):    at android.widget.TextView.showSuggestions(TextView.java:10010)
E/AndroidRuntime(13275):    at android.widget.TextView.onTouchEvent(TextView.java:8319)
E/AndroidRuntime(13275):    at android.view.View.dispatchTouchEvent(View.java:5486)
E/AndroidRuntime(13275):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
E/AndroidRuntime(13275):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
E/AndroidRuntime(13275):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
E/AndroidRuntime(13275):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
E/AndroidRuntime(13275):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
E/AndroidRuntime(13275):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
E/AndroidRuntime(13275):    at android.widget.PopupWindow$PopupViewContainer.dispatchTouchEvent(PopupWindow.java:1576)
E/AndroidRuntime(13275):    at android.view.View.dispatchPointerEvent(View.java:5662)
E/AndroidRuntime(13275):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2863)
E/AndroidRuntime(13275):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
E/AndroidRuntime(13275):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(13275):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(13275):    at android.app.ActivityThread.main(ActivityThread.java:4340)
E/AndroidRuntime(13275):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(13275):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(13275):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(13275):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(13275):    at dalvik.system.NativeStart.main(Native Method) 
```

这是引发异常的源文件：

[http://130.75.2.12/source/xref/android/4.0.3/frameworks-base/core/java/android/view/ViewRootImpl.java](http://130.75.2.12/source/xref/android/4.0.3/frameworks-base/core/java/android/view/ViewRootImpl.java)

以及总是导致它的行：

```
res = sWindowSession.add(mWindow, mSeq, mWindowAttributes, getHostVisibility(), mAttachInfo.mContentInsets,mInputChannel); 
```

问题是 sWindowSession 是服务的接口，我找不到服务的实现？(http://130.75.2.12/source/xref/android/4.0.3/frameworks-base/core/java/android/view/IWindowSession.aidl)

有没有人有任何关于服务本身的信息或我们在这里遇到异常的原因？

# iphone - Facebook API 在 iOS 上显示法语授权页面

> ID：10501985
> 
> 赞同：1
> 
> 时间：2012-05-08T15:48:14.600
> 
> 标签：iphone, objective-c, ios, facebook

我不确定这是怎么发生的，但突然之间，Facebook 的“授权这个应用程序”对话视图现在变成了法语。知道这可能是怎么发生的吗？

![Facebook 授权对话视图](../Images/12ea6e2c5e9587fde4b33c05e18be4bc.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:24:14.440

这是Facebook的错误...

今天早上它被设置为印度尼西亚语，从意大利和德国调用它......

我们看到很多 Facebook 开发人员在他们的论坛上讨论它......所以我们无法从我们的应用程序中做任何事情......

# javascript - 在不同的窗口中显示警报消息

> ID：10501990
> 
> 赞同：0
> 
> 时间：2012-05-08T15:48:35.013
> 
> 标签：javascript, window.open

是否可以通过另一个窗口打开警报消息？我做了一个`window.open()`然后我显示一条警报消息。但是该警报消息将我带回到包含显示该消息的 javascript 的窗口。这种行为是有道理的。但我想为当前显示给用户的新窗口显示帮助消息。有没有办法获得该功能，`alert()`或者有不同的方法来做到这一点？

```
window.open(url, _blank);
alert('Do step 1, then step 2, then step 3 to get to the page'); 
// The step above returns the focus to the original window 
```

有办法解决吗？

** 编辑 **

从 Musa 得到答案，但由于我使用 setTimeout 并遇到浏览器抑制问题而不得不对其进行修改。通常，他的回答应该有效。这是有效的代码。

```
 external_window = window.open(url,'_blank'); // Open external window.
    message_window = window.open (url,'_blank','width=600,height=200,top=200,left=300'); // Open message window.
    self.focus(); // Keep focus on original window.
    setTimeout(function() { external_window.focus(); message_window.focus(); }, 4000); // After delay, focus on external window, then on message window 
```

这在解决浏览器抑制问题时具有正确的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:53:31.743

```
var newWindow = window.open(url, _blank);
newWindow.alert('Do step 1, then step 2, then step 3 to get to the page'); 
```

# xml - XPath // 运算符不工作

> ID：10501992
> 
> 赞同：1
> 
> 时间：2012-05-08T15:48:43.283
> 
> 标签：xml, powershell, xpath

假设我有一个简单的 XML 文档，如下所示：

```
<a>
  <b>
   <c>blah</c>
   <c>blah</c>
   <d>blargh</d>
  </b>
</a> 
```

我想选择“c”元素。

这是我认为应该起作用的：

```
Select-Xml -Xml $XmlDoc -XPath '//c'; 
```

尽管此示例本身有效，但此类似概念并未在此 XML 文档中返回任何内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Response xmlns="http://schemas.microsoft.com/search/local/ws/rest/v1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Copyright>Copyright © 2012 Microsoft and its suppliers. All rights reserved. This API cannot be accessed and the content and any results may not be used, reproduced or transmitted in any manner without express written permission from Microsoft Corporation.</Copyright>
  <BrandLogoUri>http://dev.virtualearth.net/Branding/logo_powered_by.png</BrandLogoUri>
  <StatusCode>200</StatusCode>
  <StatusDescription>OK</StatusDescription>
  <AuthenticationResultCode>ValidCredentials</AuthenticationResultCode>
  <TraceId>985236ecd4b04793ac26f72a218a3876|LAXM001505|02.00.127.100|</TraceId>
  <ResourceSets>
    <ResourceSet>
      <EstimatedTotal>1</EstimatedTotal>
      <Resources>
        <TrafficIncident>
          <Point>
            <Latitude>41.82048</Latitude>
            <Longitude>-88.20378</Longitude>
          </Point>
          <IncidentId>1</IncidentId>
          <LastModifiedUTC>2012-05-01T16:17:15.663Z</LastModifiedUTC>
          <StartTimeUTC>2011-05-01T19:46:00Z</StartTimeUTC>
          <EndTimeUTC>2012-11-11T14:00:00Z</EndTimeUTC>
          <Type>Construction</Type>
          <Severity>Minor</Severity>
          <Verified>true</Verified>
          <RoadClosed>false</RoadClosed>
          <Description>description here</Description>
          <DetourInfo />
          <LaneInfo>lane blockages possible</LaneInfo>
          <CongestionInfo />
        </TrafficIncident>
      </Resources>
    </ResourceSet>
  </ResourceSets>
</Response> 
```

有谁知道选择`TrafficIncident`元素的正确语法而不必指定完整路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:57:06.907

这些元素位于命名空间中，因此您需要在该命名空间中搜索它们。谷歌搜索“XPath 默认命名空间”，它是第 1 位常见问题解答。

# c# - 为什么 Telerik 的 DropDownList 在使用 ajax 数据绑定时没有任何值？

> ID：10501994
> 
> 赞同：4
> 
> 时间：2012-05-08T15:48:57.250
> 
> 标签：c#, asp.net, telerik, telerik-mvc

我正在使用带有 Razor 语法和最新 Telerik 组件的 Asp.Net。不幸的是，当我单击下拉框时，我什么也看不到，但 VS 调试器显示我执行了 _AjaxLoaiding 方法。我怎样才能解开这个谜（即将数据加载到 DropDownList 中）？

这是我的控制器的一部分：

```
 public ActionResult _AjaxLoading(string text) {
        var product = new Dictionary<string, string>();
        product.Add("a","b");
        return new JsonResult { Data = new { Text = "Abc", Value = "123", Produtcs = new SelectList(product, "ProductID", "ProductName") } };
    } 
```

这是我的观点的一部分：

```
@{Html.Telerik().DropDownList()
                                              .Name("documentType").Enable(false)
                                              .HtmlAttributes(new { style = "width:250px;" })
                                              .DataBinding(binding => binding.Ajax().Select("_AjaxLoading", "Applicants"))
                                              .Render();
                                        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:00:25.183

嗯，您做了一件奇怪的事情：您将 a 传递`Dictionary<string, string>`给您的选择列表，并断言 valueField 是“ProductId”，而 TextField 是“ProductName”。

你的字典没有这样的属性......强类型是好的。

所以你需要一个类产品（或其他）

```
public class Product {

    public int ProductId {get;set;}
    public string ProductName {get;set;}

} 
```

并使用它，甚至用于测试目的

```
public ActionResult _AjaxLoading(string text) {
        var products= new List<Product> {
        new Product{ProductId = 1, ProductName="b"}
        };
        return new JsonResult { Data = new { Text = "Abc", Value = "123", Products= new SelectList(products, "ProductID", "ProductName") } };
    } 
```

编辑 ：

顺便说一句，如果您想要 SelectList 中的“Abc”和“123”，这不是正确的做法，请查看@Gaby 在您之前的帖子中的回答[https://stackoverflow.com/a/10500876/961526](https://stackoverflow.com/a/10500876/961526)

编辑 2：

让我们再试一次

所以首先，我常用的一些扩展类（我限制了它们，它们曾经更通用，但是......无论如何）

```
public static class ComboExtensions
    {
        public static IEnumerable<SelectListItem> ToSelectListItem<T>(this IEnumerable<T> enumerable,
                                                                      Func<T, string> text,
                                                                      Func<T, int> value)
        {
            return enumerable.Select(item => new SelectListItem
                                                 {
                                                     Text = text(item).ToString(),
                                                     Value = value(item).ToString(),
                                                 }).AsEnumerable();
        }

        public static IEnumerable<SelectListItem> WithDefaultValue(this IEnumerable<SelectListItem> selectListItems, int defaultValue = 0, string chooseText = "choose")
        {
            IList<SelectListItem> items = selectListItems.ToList();
            items.Insert(0, new SelectListItem {Value = defaultValue.ToString(), Text = chooseText}); 
```

然后

```
public ActionResult _AjaxLoading(string text) {
            var products = new List<Product>
                               {
                                   new Product {ProductId = 1, ProductName = "b"}
                               }.ToSelectListItem(m => m.ProductName, m => m.ProductId)
                               .WithDefaultValue(1, "abc");
            return new JsonResult { Data = products } };
} 
```

# .net - 将参数从引导程序传递到 msi 捆绑包

> ID：10501995
> 
> 赞同：21
> 
> 时间：2012-05-08T15:48:58.097
> 
> 标签：.net, visual-studio, wix, installation, wix3.6

我正在使用 VS2010 和 WiX 3.6 创建 MSI 包并将它们捆绑到 Bootstrapper 设置中。这是我的 Boostrapper 代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Bundle Name="" Version="" Manufacturer="" UpgradeCode="">
        <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />

        <Chain>
              <MsiPackage SourceFile="Package1.msi">
                <MsiProperty Name="PARAM1" Value="[PARAM1]" />
                <MsiProperty Name="PARAM2" Value="[PARAM2]" />
              </MsiPackage>
              <MsiPackage SourceFile="Package2.msi">
                <MsiProperty Name="PARAM1" Value="[PARAM1]" />
                <MsiProperty Name="PARAM2" Value="[PARAM2]" />
              </MsiPackage>
        </Chain>
    </Bundle>
</Wix> 
```

MSI 包必须具有指定的参数才能运行。通常，我会打电话给`"Packag21.msi PARAM1=1 PARAM2=2"`. 构建项目后，我尝试以相同的方式将参数传递给我的 Bootstrapper.exe `Bootstrapper.exe PARAM1=1 PARAM2=2`，但似乎没有将它们传递给 MSI。安装因缺少参数情况而挂起。

有没有办法将参数从exe传递到msi？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-09T23:17:27.507

这现在已经实现，并且在 5 月 21 日的 Wix 3.6 RC 版本中可用。

以下是其工作原理的总体思路：

```
<Wix>
<Bundle>
    <Variable Name="CommandLineArg" bal:Overridable="yes"/>
    <Chain>
      <MsiPackage>
        <MsiProperty Name="CommandLineArg" Value="[CommandLineArg]"/>
      </MsiPackage>
    </Chain>
</Bundle>
</Wix> 
```

您必须创建一个可在命令行覆盖的捆绑变量，然后将该变量传递给您的 msi。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T18:33:52.813

这目前在标准引导程序中不可用：[WixStdBa 不提供命令行属性 - ID：3489809](http://sourceforge.net/tracker/?func=detail&aid=3489809&group_id=105970&atid=642714)

如果您创建自己的引导程序应用程序，则可以实现此类功能。

编辑：虽然您不能通过命令行将参数传递给引导程序，但您仍然可以通过各种方式在引导程序中收集信息：

例如：设置变量

```
<Variable Name="PARAM1" Value="SomeValue" Persisted="yes" Type="string" /> 
```

例如：搜索注册表

```
<util:RegistrySearch Root="HKLM" Key="Software\SomeProduct" Value="SomeKey" Variable="PARAM1" Result="value"/> 
```

# python - 如何编写旨在分析不同 XML 模式和转换 XML 文件的 python 脚本？

> ID：10501996
> 
> 赞同：1
> 
> 时间：2012-05-08T15:48:59.053
> 
> 标签：python, xml, xsd

我经常使用某种类型的 XML 文档。每隔几个月就会发布此 XML 文档的新模式。通常，新模式会在 XML 文档中添加或删除字段。

目前我必须至少将我的一些 XML 文档从旧版本转换为新版本。我是手动完成的，但显然这并不理想。

我在编写 Python 脚本方面相对不错。但是，我在使用 Python 处理 XML 方面经验很少。

我想知道编写一个通用的 Python 脚本来分析这些 XML 文档的新旧模式、识别更改（删除哪些字段以及添加哪些字段）并将旧文档版本转换为新版本会有多困难。

如果这对于具有初学者和中级 Python 技能的人来说是可能的/不太困难，那么有人会指导我应该从哪里开始吗？

我刚刚阅读了“深入 Python”的 XML 章节。似乎 lxml 库是我想要使用的库？使用模式时是否非常强大？

我应该从这里去哪里？