# StackOverflow 问答 11561000-11561999

# javascript - 将对象从 JSON 文件加载到 javascript

> ID：11561000
> 
> 赞同：11
> 
> 时间：2012-07-19T12:33:54.970
> 
> 标签：javascript, json

如果对象在 json 文件中可用，如何将其加载到 javascript 中？

我的 html 中有以下脚本：

```
<script src='scene.json'></script>
<script>
  var x = scene.x;
</script> 
```

这是位于同一文件夹中的文件 scene.json：

```
{"scene": {
  "x": 0,
  "y": 0,
  "w": 11000,
  "h": 3500,
}} 
```

但是 json 文件没有正确加载（意外的令牌':'），并且 scene.x 引用也可能不是它应该完成的方式。可以直接参考数据吗？还是需要通过一些http请求来加载？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-19T12:39:48.997

将此修改为javascript：

```
var scene = {
  "x": 0,
  "y": 0,
  "w": 11000,
  "h": 3500
}; 
```

或者使用 jQuery api 和函数[getJSON](http://api.jquery.com/jQuery.getJSON/)

```
<script>
  var scene={};
  $.getJSON('scene.json', function(data) { 
    scene=data;
  }); 
</script> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-19T12:36:32.923

```
{"scene": {
  "x": 0,
  "y": 0,
  "w": 11000,
  "h": 3500
}} 
```

是无效的 javascript（因为它被视为一个块），您可能只需要一个 javascript 文件：

```
var scene = {
  "x": 0,
  "y": 0,
  "w": 11000,
  "h": 3500
}; 
```

如果要将文件保留为 JSON，则不能从脚本元素引用它并使其在成为有效 JSON 时工作。您需要使用 ajax 请求来获取文件并解析 JSON。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T12:39:52.293

将您的 json 数据设置为一个变量，例如

```
data =  {"scene": {
  "x": 0,
  "y": 0,
  "w": 11000,
  "h": 3500
}
} 
```

然后访问它

```
data.scene.x //it will give 0 
```

# groovy - HttpBuilder 访问安全链接（即 https 链接）

> ID：11561013
> 
> 赞同：0
> 
> 时间：2012-07-19T12:34:46.350
> 
> 标签：groovy, httpbuilder

我们可以使用 HttpBuilder 请求 https 链接吗？

1 - 如果是，那么它们是我们在请求数据时需要设置的任何特定参数或属性。

2 - 如果不是，那么我们可以请求与下面的普通 http 链接相同的请求，例如

```
def http = new HTTPBuilder('http://some_link'); 
def resp = http.get(path: '/abcd/efg', query:[login:'login_id', pass: 'password',ttype:'trans_type',prodid:'prod_id'], contentType : XML, headers : [Accept : 'application/xml'] ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:59:19.413

刚刚尝试过，它确实像文档中所说的那样工作......

```
@Grab( 'org.ccil.cowan.tagsoup:tagsoup:1.2' )
@Grab( 'org.codehaus.groovy.modules.http-builder:http-builder:0.5.2' )
import org.ccil.cowan.tagsoup.Parser
import groovyx.net.http.HTTPBuilder
import static groovyx.net.http.ContentType.*

// Using an https url
new HTTPBuilder( 'https://twitter.com' ).with {
  // Get from the given path as TEXT
  get( path:'/tim_yates', contentType:TEXT ) { resp, reader ->
    // Pass the html through tagsoup and generate a parser
    new XmlParser( new Parser() ).parseText( reader.text ).with {
      // print the title text from inside the head section
      println head.title.text()
    }
  }
} 
```

# spine.js - Spine.js 和下摆入门

> ID：11561014
> 
> 赞同：1
> 
> 时间：2012-07-19T12:34:49.500
> 
> 标签：spine.js

我成功地创建了一个脊椎应用程序，如脊椎的[入门](http://maccman-spine.herokuapp.com/docs/started)页面中所述。但是，hem 不会自动将我的更改考虑在内；我必须手动构建。

当我关注[联系人截屏视频](http://maccman-spine.herokuapp.com/pages/screencasts)时，我遇到了同样的问题，但这次下摆根本没有构建：

```
 art-mac:spine.contacts art$ hem build

 node.js:201
         throw e; // process.nextTick error, or 'error' event on first tick
               ^
 Cannot find module: spine/lib/tmpl. Have you run `npm install .` ? 
```

我确实运行了“npm install”。

令人惊讶的是，当我重新安装spine.contact（在另一个文件夹中）时，我在以前的联系人应用程序中创建的联系人出现在新应用程序中......在我的chrome开发设置中选中“禁用现金”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:07:02.067

当我第一次将 hem 升级到 0.1.9 版本时，我遇到了同样的问题。要检查的一件事是应用程序的公共文件夹中是否有已编译的 application.js 和 application.css 文件。似乎当这些文件已经存在时，hem 服务器会为这些文件提供服务，而不是从源代码重新编译。一旦这些文件被删除，hem 服务器将使用源文件动态创建应用程序文件。

但这种行为确实与旧版本的 hem 有点不同。我能够对 hem 服务器进行一些更改，使其看起来像以前一样工作，因为无论应用程序文件是否已经存在，hem 服务器总是从源文件编译。[我在 hem github 存储库https://github.com/maccman/hem/issues/46#issuecomment-6550866](https://github.com/maccman/hem/issues/46#issuecomment-6550866)上发布了关于类似问题的代码更改，但我不确定它是否是 hem 问题或者是否发生了某些变化hem 使用的 Strata Web 服务器库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:22:46.333

npm 中最新的 Hem (0.2.7) 应该可以解决这个问题。

如果文件已经存在，则分层服务器在动态提供文件时遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:23:00.333

Hem 0.1.9（最新版本）在运行“hem server”时不会自动检测我的脊椎应用程序的更改（尽管“hem watch”似乎工作正常）。我能够通过卸载 0.1.9 (npm uninstall -g hem) 并安装 0.1.8 (npm install -g hem@0.1.8) 来使其工作。

关于您的其他问题，spine/lib/tmpl 不再包含在最新版本的spine 中，因此如果您想使用截屏视频，您需要安装他正在使用的任何版本的spine。

# ios - Apple LLVM 编译器 3.1 - 警告 Objective-C++ 自动引用计数

> ID：11561016
> 
> 赞同：3
> 
> 时间：2012-07-19T12:34:58.580
> 
> 标签：ios, xcode, xcode4, automatic-ref-counting

我正在使用 xcode 4.3.1 将非 ARC 项目转换为 arc。我想知道是什么

> 构建设置目标 C++ 自动引用计数

在里面

`Apple LLVM compiler 3.1 - Warnings`

节的意思。推测它会打开或关闭与 ARC 相关的某种警告，但我不确定它的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:25:04.660

如果您选择该警告，在 Xcode 4 中打开最右侧的选项卡，然后选择顶部的第二个图标（波浪线），您将看到该项目的 Apple 帮助，其中显示：

> Objective-C++ 自动引用计数 ABI 不兼容
> 
> CLANG_WARN_OBJCPP_ARC_ABI
> 
> 在编译使用自动引用计数的 Objective-C++ 代码时，报告在将 ARC 代码与传统手动引用计数代码链接时可能导致 ABI 问题的代码。

此外，我不相信使用“fno-objc-arc”标志来避免不得不处理 ARC。这样做的人相信他们拥有完美的无泄漏代码，在所有方面都遵循 ARC 命名启发式。我希望我能对我的旧保留/释放/自动释放代码有信心！此外，ARC 代码通常更小更快。

# javascript - JavaScript 中单实例函数原型的使用

> ID：11561018
> 
> 赞同：0
> 
> 时间：2012-07-19T12:35:04.837
> 
> 标签：javascript

对于性能优化，我使用单个 JavaScript 文件来处理我正在处理的网站的所有页面。我使用的基本结构如下：

```
(function($) {

    // Shared functions ...

    // A function for every page
    function Page1() {
    }
    Page1.prototype = {
        init: function() {
            //...
        },
        //more functions
    };

    // more pages

    $(document).ready(function() {
        if ($('#page1uniqueidentifier').length) {
            var page1 = new Page1();
            page1.init();
        }
        // more pages
    }
}) (jQuery); 
```

我不是一位经验丰富的 JavaScript 程序员，所以我一直在搜索最佳实践和构建代码的不同方法，最终选择了这个，但我不太确定，我有几个问题：

1.  如果我永远不会拥有多个页面实例，那么使用原型是否值得？我想我了解原型是如何工作的，并且我没有在那里获得任何性能。但我只是将它用作最佳实践，因为在存在不同实例的情况下，这些函数在每个实例中都是相同的。

2.  有没有更好的方法来构建代码？

3.  我应该将init函数的调用放在构造函数中，然后只调用new Page1（）吗？

    ```
    function Page1() {
        this.init();
    }

    if ($('#page1uniqueidentifier').length) {
        new Page1();
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:38:48.863

> 为了性能优化，我使用单个 JavaScript 文件来处理我正在处理的网站的所有页面

这是没有意义的。您应该将代码分成文件，然后通过[最小化器/连接](https://stackoverflow.com/questions/4843871/javascript-and-css-minimizer)器运行所有 js 文件以将其打包。

无论如何，回答你的问题，

1.  如果你只有 1 个，那么原型不会给你买任何东西。但是，如果您要使用超过 1 个，您会返回并更改它吗？另外，使用原型也不会伤害您，所以您不妨学习一下。
2.  您应该根据实现的功能创建有意义的文件。例如，我会将您的对象定义分离到它自己的文件中，因此当您查看该文件时，您所看到的只是该对象的代码。
3.  如果你有一个构造函数，你真的不需要 init，对吗？

# c++ - 在依赖派生类模板中使用 this 指针

> ID：11561019
> 
> 赞同：1
> 
> 时间：2012-07-19T12:35:08.743
> 
> 标签：c++, templates, inheritance, this, name-lookup

[在C++ Templates - The Complete Guide](http://www.josuttis.com/tmplbook/tmplbook.html)一书的示例[pointers/countingptr.hpp](http://www.josuttis.com/tmplbook/pointers/countingptr.hpp.html)中，派生依赖项的成员使用指针来引用。为什么在这个例子中是必要的？`class CountingPtr``this``this`

我知道`this`需要指针才能命名依赖基类模板的成员。当然`this`，依赖派生类模板中也不需要指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:40:33.340

这不是必需的。有些人`this`到处使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:43:03.503

我相信这只是编写此代码的人的一种风格。有些人更喜欢将`this->`与该类中的类相关的任何内容放在前面。如果*您*正在做一些有趣的事情，例如：

```
void foo( int a )
{
this->a = a;
} 
```

或者，如果您只是认为这会增加可读性。但是，如果使用过多，就会变得一团糟：

```
this->a = this->b * this->c - this->foo( this->d, this->bar() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T02:47:06.637

> **在依赖派生类**中不需要

 **在什么？

没有“依赖派生类”。派生类就是派生类。

> 派生类**模板**

它是一个类模板，但**它被解析为一个类**。

这样想：

它不是类模板，只是一个类（一种类型）。一个类模板专业化，但仍然是一个类，就像一个普通类。

或者这样：

派生类模板使用“神奇的惰性类型”参数进行实例化。这个惰性类型参数暂停任何依赖它的表达式的编译。**

# javascript - 单击或悬停后可以更改状态吗？

> ID：11561020
> 
> 赞同：0
> 
> 时间：2012-07-19T12:35:09.457
> 
> 标签：javascript, jquery, css

尝试使输入框执行以下操作：正常状态输入框文本为 x，悬停状态输入文本为 y，您是否将框保留为 z，并且可以再次在所有状态中保持 z。

-更新有一个搜索框，其中背景图像和文字淡出，一旦你悬停它是生动的，一旦你聚焦它，它是生动的2px边框，但是一旦你离开它我就松散了：（所以需要一个让它保持生动的背景图片（其中有 x 和 y，每个状态一个）和文本但松开 2px 边框的技巧

```
---UPDATE ---
/* Search box */
.searchbox {
    background: url(../images/search-grey.gif) no-repeat 6px -5px #f8f8f8;
    width:240px; 
    margin-right:4px; 
    margin-left:11px; 
    color:#cccccc;   
    vertical-align: top; 
    padding: 4px 2px 4px 79px;
    border-color: #4FA4F9;
}
.searchbox:hover {
    background: url(../images/search-greyb.gif) no-repeat 6px -5px #f8f8f8;
    color:#888888; 
}
.searchbox:focus {
    background: url(../images/search-greyb.gif) no-repeat 5px -6px #ffffff;
    width:239px; 
    color:#888888; 
    padding: 3px 2px 3px 78px;
}
.searchbox.blur {
    background: url(../images/search-greyb.gif) no-repeat 6px -5px #ffffff;
    width:239px; 
    color:#000000; 
    padding: 4px 2px 4px 79px;
}

@-moz-document url-prefix() {
    .searchbox {
    background: url(../images/search-grey.gif) no-repeat 6px -4px #f8f8f8;
    }
}
@-moz-document url-prefix() {
    .searchbox:hover {
    background: url(../images/search-greyb.gif) no-repeat 6px -4px #f8f8f8;
        }
}
@-moz-document url-prefix() {
    .searchbox:focus {
    background: url(../images/search-greyb.gif) no-repeat 5px -5px #f8f8f8;
    }
}

input::-moz-focus-inner /*Remove button padding in FF*/
{ 
    border: 0;
    padding: 0;
}
input, select, textarea {
  margin: 1 0 0;
}
input, textarea, .date {
  border: 1px solid #aaa;
  border-radius: 3px;
  color:#333;
}
input {
  font-size: 13px;
  padding: 0px;
}
textarea {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 13px;
  padding: 4px 4px 4px 4px;
}

select:hover {border: 1px solid #4FA4F9;}
input:hover {border: 1px solid #4FA4F9;}
textarea:hover {border: 1px solid #4FA4F9;}
select:focus {padding: 0px;}
input:focus {padding: 0px;}
textarea:focus {padding: 3px 3px 3px 3px;

} 
```

--- html ---

```
<input id="searchdomain" name='domain' type="text" style="font-size:15px;" class="searchbox"/> 
```

---js----

```
/* Search Box Leave */
$(".searchbox").blur(function(){
    $(this).addClass("blur");
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:40:04.303

你可以通过设置一个类来使用 jQuery 来做到这一点。

```
$(".searchable").blur(function() {
    $(this).addClass("blur");
}); 
```

然后在你的CSS中你可以像这样设置颜色

```
.searchable.blur
{
  color:#000;   
} 
```

​ 这是一个 jsfiddle 示例 -> [http://jsfiddle.net/y46Wk/2/](http://jsfiddle.net/y46Wk/2/)

请记住，除非您删除该类，否则该元素不会再次显示其悬停颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:49:55.027

这不是您问题的真正答案....但我感觉您正在对表单进行一些验证，所以为什么不查看像这样的 jQuery 验证插件 [http://docs.jquery.com/插件/验证](http://docs.jquery.com/Plugins/Validation)

这是其他与表单相关的 jQuery 东西的列表 [http://speckyboy.com/2010/06/22/50-jquery-plugins-for-form-functionality-validation-security-and-customisation/](http://speckyboy.com/2010/06/22/50-jquery-plugins-for-form-functionality-validation-security-and-customisation/)

如果它们都没有帮助，也许你可以告诉我们哪一个接近，让我们知道你想要什么;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:51:15.587

您是否尝试这样做：http: [//jsfiddle.net/akhurshid/y46Wk/4/](http://jsfiddle.net/akhurshid/y46Wk/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T12:53:30.577

您所描述的（保持状态）在技术上仅使用 CSS 是可行的。

这是[一篇](http://joelb.me/blog/2012/maintaining-css-style-states-using-infinite-transition-delays/)解释该过程的文章。总之，您使用由焦点触发的过渡状态来保持样式应用于元素。我并不提倡它是*最好的方法*，但是看看你可以用 CSS3 属性做什么真的很有趣。

更多的是好奇而不是直接的答案，但希望它对你/其他遇到这个问题的人有帮助:)

# c# - 为什么从不同项目复制代码时，表单控件事件名称会发生 变化？

> ID：11561022
> 
> 赞同：0
> 
> 时间：2012-07-19T12:35:21.470
> 
> 标签：c#, visual-studio, events, boilerplate

场景是：

*   我有一个`X`在项目 A 中调用的按钮
*   事件之一`X`如下：

    ```
    private void X_KeyDown(object sender, KeyEventArgs e)
    {//if the user presses Ctrl + V 
        if (e.KeyCode == Keys.Control && e.KeyCode == Keys.V)
        {
          MessageBox.Show("hello");  
        }
    } 
    ```

*   我现在创建了一个新项目 B 并在表单中添加了一个按钮并将其命名为`X`。然后我将上面的代码复制到`Form1.cs`.

问题：如果我转到表单 B 并选择按钮，然后双击该`KeyDown`事件，它不会转到我复制的代码，但会创建以下内容。为什么 ？

```
private void X_KeyDown_1(object sender, KeyEventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:37:24.407

因为您忽略了复制`Form1.Designer.cs`文件中声明的实际事件绑定。就像是

```
X.Click += new System.KeyDownEventHandlerEtcEtc; 
```

因为缺少这个，工作室认为您正在尝试创建一个新的事件处理程序。但是因为该事件处理程序的默认名称附加在`_1`.

为了克服这个问题，您可以将`Click`设计器中的事件手动设置为指定的复制事件处理程序。或者实际上任何具有匹配签名的事件处理程序。

另一种方法是不复制整个事件处理程序，而只复制逻辑 - 然后在您的新表单中创建一个新处理程序，将逻辑粘贴到那里。

# audio - WebRTC：非 10 毫秒音频帧可能吗？

> ID：11561028
> 
> 赞同：1
> 
> 时间：2012-07-19T12:35:47.350
> 
> 标签：audio, echo, audio-streaming, webrtc, aec

有没有人尝试更改 WebRTC 中的音频帧大小？它使用 10ms 帧。我需要一个不同的尺寸，而且代码看起来没有希望......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:07:28.663

从根本上说，你没有理由不能使用非 10 毫秒的帧，但大部分代码都是在这个假设下编写的。改变它确实可能是一项严肃的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:22:54.677

在设备上您可以使用其他音频帧（例如 20，40ms）。对于编解码器，您可以使用其他音频帧，因为编解码器有一个音频缓冲区。我使用了 Silk 编解码器和 ios 设备。

# html - 媒体查询 CSS

> ID：11561035
> 
> 赞同：0
> 
> 时间：2012-07-19T12:36:30.670
> 
> 标签：html, css, media-queries

出于某种原因，当从 iphone 或移动设备查看时，我的媒体查询无法正确调整我的网站大小，我在 iphone 上获得了该网站的平板电脑版本。媒体查询适用于平板电脑，并且在缩小浏览器窗口时非常完美。

我错过了什么吗？

```
@media only screen and (min-width: 1024px) {
/*styling here*/
}

@media only screen and (max-width: 1023px) and (min-width: 740px) {
/*Tablet styling here*/
}

@media only screen and (max-width: 739px) and (min-width: 0px) {
/*Mobile styling here*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:39:45.740

看看[这个](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)，让我知道它是否有效

您需要指定设备宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:43:27.903

我认为您可能需要将其指定为“最小设备宽度”。

```
@media only screen and (max-device-width: 739px) and (min-device-width: 0px) {
    /*Mobile styling here*/
} 
```

# r - to display a vector

> ID：11561039
> 
> 赞同：0
> 
> 时间：2012-07-19T12:36:39.553
> 
> 标签：r

```
> a=c(1,2,3,4)  
> a      
[1] 1 2 3 4  
> typeof(a)  
[1] "double"  
> mode(a)  
[1] "numeric"  
> attributes(a)  
NULL 
> str(a)  
num [1:4] 1 2 3 4 
```

is there something to make a display it vector?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:45:08.303

Maybe `is.vector()`? This tests whether an object is a vector:

```
is.vector(a)
[1] TRUE 
```

* * *

As a counter-example:

```
g <- function(x)x

is.vector(g)
[1] FALSE

class(g)
[1] "function" 
```

# scala - Scala 网站：创建路线

> ID：11561041
> 
> 赞同：2
> 
> 时间：2012-07-19T12:36:40.560
> 
> 标签：scala, heroku, sbt

我正在关注[https://devcenter.heroku.com/articles/scala上的 Heroku scala 教程](https://devcenter.heroku.com/articles/scala)

我能够让一切正常工作，但我完全不知道从这里去哪里。如果可以的话，我想避免使用框架（现在），因为这样做的目的是学习 scala 并用它创建一个网站。他们作为后续列出的 webwords 示例与基本的 hello world 示例完全不同。

主要是，我不知道 heroku/scala/sbt 如何知道如何实际启动应用程序并响应请求，因为示例是如此不同。我查看了一些框架，在这方面它们看起来非常相似。

我真的很想知道创建路线的标准方法是什么（如果有的话）。有关如何创建小型 MVC 框架的任何其他提示也将对我有很大帮助。我看到的许多教程似乎都对您已经知道的内容做出了假设（例如，您已经知道如何创建路线等），但我找不到任何更简单的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:47:36.603

最终，创建任何网站的目的，无论使用何种技术，都是为了提供某种内容或功能。您不能只说“我想创建一个网站”。就像你可以说“我想建造一座建筑”一样。

一旦你定义了网站应该做什么，那么并且只有在那时才适合考虑如何实现它。大多数框架的目的是为常见且通常很困难的问题提供易于使用的解决方案。例如，使用 Jetty、Tomcat 或 Glassfish 等 Web 应用程序服务器可以简化大多数“路由”问题。您通过使用可用工具节省的任何时间都可以重新投资于创建更好的内容。

另一方面，如果您真的想从头开始实现整个 Web 服务器，则可以从基本的 Hello 应用程序开始。在`Hello.apply`中，您可以先查看`HttpRequest`( [JBoss JavaDoc](http://docs.jboss.org/netty/3.2/api/index.html) )。`getURI()`将为您提供请求 URL，您可以从那里确定如何处理您想要支持的不同路由。

# c# - 顽固的组装，错误的钥匙？或者它是一个强名称问题？

> ID：11561042
> 
> 赞同：0
> 
> 时间：2012-07-19T12:36:45.363
> 
> 标签：c#, .net-assembly, strong-named-key

我正在使用 Microsoft 的两个 dll 程序集来比较 Xml。XmlComparer.cs 使用 Microsoft.XmlDiffPatch 并且在 Visual Studio 中正确添加了两个引用。但是我收到此消息：

> 错误：无法加载文件或程序集“XmlDiffPatch，版本=1.0.8.28，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。locate d 程序集的清单定义与程序集引用不匹配。（HRESULT 除外：0x80131040）异常：System.IO.FileLoadException：无法加载文件或程序集“XmlDiff 补丁，版本=1.0.8.28，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项中的 e 个。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）文件名：XmlCompareLib.XmlComparer.Compare（字符串比较选项，字符串 sourceX mlFileName，字符串更改XmlFileName，
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Md icrosoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fus ion!EnableLog]。

我认为这与强名称有关。因为我检查了这两个 DLL 并且它们不是强命名的，所以我尝试为程序集生成一个密钥和强名称，但它显然不是同一个密钥。我现在卡住了。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:47:40.910

这通常是我打开 Fusion 记录器并记录所有绑定的地方。Fusion 的日志通常更清楚地说明它在做什么。

要启用 Fusion 日志记录，您可以打开 VisualStudio 命令提示符，然后运行“fuslogvw.exe”。我的最终安装在：

> C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\NETFX 4.0 Tools\x64\FUSLOGVW.exe

但这可能会根据您的安装而有所不同。

然后，您单击“设置”按钮 int hat 工具，并通过翻转单选按钮启用日志记录，然后运行您的应用程序，然后在 fusion logger 中单击“刷新”，它将显示所有发生的绑定（以及失败的绑定） ）。

完成后请记住返回设置窗口并关闭日志记录:)

# javascript - Javascript：输入字段失去焦点时触发更改事件

> ID：11561043
> 
> 赞同：0
> 
> 时间：2012-07-19T12:36:49.670
> 
> 标签：javascript, focus

我的页面上有输入字段，并且我检测到用户何时键入内容以启用“保存”按钮。我还启用了快捷方式`Ctrl`+`S`让用户保存。每当保存数据时，保存按钮都会被禁用。

然而我有一个两难的选择。如果用户更改输入字段中的文本，执行`Ctrl`+`S`然后使用鼠标移动到另一个输入字段，则为用户更改的输入字段触发“更改”事件，这反过来会导致保存按钮再次启用。不应启用 Save 按钮，因为在执行`Ctrl`+后未发生任何更改`S`。看起来`change`事件不仅会在文本更改时触发，而且还会在焦点移动到另一个字段时触发。

```
$("input.SaveMe").live('keypress change', function ()
{
    // Code goes here to enable Save button
}); 
```

保存后如何防止更改事件发生。我想使用某种标志，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:40:41.027

当该特定输入**不在焦点**时，您可以通过以下方式忽略该事件。

```
$("input.SaveMe").live('keypress change', function() {
    if (!$(document.activeElement).id == 'id_of_input') return; //if (!$(document.activeElement).hasClass('SaveMe')) return;
    // Code goes here to enable Save button
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T13:37:13.097

删除“更改”检测可以解决问题，但这会阻止用户将文本粘贴到字段中并将粘贴检测为更改。要修复该使用：

```
$(document).bind('paste', function (e)
{
  // Add code to update flag to indicate data changes and enable the Save button.
}); 
```

# jquery - 周视图中缺少某些事件，而日视图中缺少其他事件，但在月视图中显示

> ID：11561046
> 
> 赞同：0
> 
> 时间：2012-07-19T12:36:53.703
> 
> 标签：jquery, jquery-plugins, plugins, fullcalendar

我正在同步 fullcalendar 和 google 日历，我注意到在周视图中，周日 0:00 到 12:00 的事件丢失了，但仅限于那一天。如果我切换到日视图，它会发生在每一天。

你可以在这里看到错误：[http ://www.kittikun.jp/schedule2.html](http://www.kittikun.jp/schedule2.html)

这是页面的来源：

```
 <script>
        $(document).ready(function() {

            $('#calendar').fullCalendar({
                events: { url:"http://www.google.com/calendar/feeds/contact%40kittikun.jp/public/basic" },
                theme: true,
                header: {
                    left: 'today prev,next',
                    center: '',
                    right: 'month,agendaWeek,agendaDay'
                },
                allDaySlot: false,
                timeFormat: "H:mm",
                aspectRatio: 1,
                lazyFetching: false,
                firsthour: 0,
                buttonIcons: {prev: 'circle-triangle-w'},
                eventClick: function(calEvent, jsEvent, view) {
                    if (calEvent.description) {
                        var $dialog = $('<div></div>')
                            .html(calEvent.description)
                            .dialog({
                                title: calEvent.location,
                                modal: true,
                                width: 500
                        });

                        $dialog.dialog('open');
                    }
                    return false;
                    }
            });
        });
    </script> 
```

在这个论坛上搜索后，我发现了这个主题：

[JQuery:FullCalendar 插件：事件不显示在周视图和日视图中，但显示在月视图中](https://stackoverflow.com/questions/2290734/jqueryfullcalendar-plugin-events-are-not-shown-in-week-view-and-day-view-but-a)

但解决方案没有奏效

感谢您阅读本文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-20T09:52:51.110

我刚刚遇到了这个问题，我发现了一个丑陋的解决方法让我通过了它。以下是我使用议程视图使事情看起来正确的方法：

在 Fullcalendar 的初始化中，将 defaultView 设置为“月”。接下来，将lazyFetching 设置为true。现在，设置“加载”方法来更改视图类型。初始化应该是这样的：

```
 $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: ''
        },      
        defaultView: 'month',
        allDayDefault: false,
        timeFormat: '',
        allDaySlot: false,
        editable: false,
        lazyFetching: true,
        eventLimit: false,          

        events: 'https://www.google.com/calendar/feeds/mycalendarURL',

        loading: function(bool) {
            $('#calendar').fullCalendar( 'changeView', 'agendaWeek' );
            }

    }); 
```

信不信由你，原来的“月”视图并没有出现；议程周视图是唯一出现的视图 - 至少当我目前在我的 Mac 上的 Safari 中测试它时。

基本上，这种 hack 方法将视图设置为似乎正确收集所有事件的视图，然后将视图切换到我们真正想要看到的视图。通过打开lazyFetching，已经加载的事件保持加载。

请注意，如果用户导航到遥远的未来或过去的事件，则需要加载更多事件。发生这种情况时，即使用户导航回到他开始的位置，一切都会再次变得异常。对于我的应用程序，我将查看限制在一个小的日期范围内，所以这很好。对于其他应用程序，这可能是一个问题。

希望有一天会出现一个合适的解决方案，因为在我搜索互联网试图找到解决方案后，我发现至少有另外三个人看到了这个问题。希望我的 hack 解决方案能帮助其他人，直到这个问题得到正式修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:35:27.510

尝试设置

```
lazyFetching: true 
```

# javascript - 如何将表格行附加到具有特定类的行的最后一行？

> ID：11561049
> 
> 赞同：0
> 
> 时间：2012-07-19T12:37:23.297
> 
> 标签：javascript, jquery, asp.net

我正在尝试将一行附加到 asp 数据网格的 html 格式。我的网格有分页，它也被转换为 html 格式的一行。因此，我在具有实际记录的行中添加了一个类。现在，我需要将一个 html 表格行附加到网格中。这应该附在记录的末尾。有人知道怎么做吗？

表结构：

```
<table>
    <th>
    </th>
    <tbody>
        <tr class="clientData">1</tr>
        <tr class="clientData">2</tr>
        <tr class="clientData">3</tr>
        <tr>Exclude This Row</tr>
        <tr>Exclude This Row</tr>
    </tbody>
</table> 
```

脚本：

```
{ $("#ctl00_Content_GrdCustomer tbody").append(selCustomersRow); } // 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:44:24.010

就像是

```
$('#ctl00_Content_GrdCustomer tbody tr.clientData').last().after(selCustomersRow); 
```

或者像天使的评论，直接选择最后一个 tr.clientData ：

```
$('#ctl00_Content_GrdCustomer tbody tr.clientData:last').after(selCustomersRow); 
```

[http://api.jquery.com/after/](http://api.jquery.com/after/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:43:46.467

更好的方法是使用正确的表格标签。

IE

```
<table>
    <thead>
        <tr>
            <td>Column header 1</td>
            <td>Column header 2</td>
            <td>Column header 3</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Column 1</td>
            <td>Column 2</td>
            <td>Column 3</td>
        </tr>
        <tr>
            <td>Column 1</td>
            <td>Column 2</td>
            <td>Column 3</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td>Column footer 1</td>
            <td>Column footer 2</td>
            <td>Column footer 3</td>
        </tr>
    </tfoot>
</table> 
```

您可能不需要标题，但您可以将所有“记录”粘贴在 tbody 中，并将分页粘贴在 tfoot 中。

这样你就可以使用

```
$("#ctl00_Content_GrdCustomer tbody").append(selCustomersRow); 
```

这会将行附加到 tbody 的末尾，但在 tfoot 内的分页之前。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T12:40:13.887

试试那个...

```
 { $("#ctl00_Content_GrdCustomer tbody tr").last().append(selCustomersRow); } 
```

# javascript - 在 event.preventDefault 之后显示 HTML5 客户端验证错误气泡

> ID：11561051
> 
> 赞同：0
> 
> 时间：2012-07-19T12:37:28.820
> 
> 标签：javascript, jquery, html, backbone.js, validation

在使表单的默认行为无效后，我想显示 HTML5 客户端验证错误气泡。

我确实尝试了以下代码，但它不起作用。

有任何想法吗？

```
validateForm: function (event) {
    event.preventDefault();
    // some code
    console.log(this.$el.find('form')[0]); // it display the form I would like to validate
    this.$el.find('form')[0].checkValidity();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T16:18:32.270

您可以通过以下方式改进有关 validateForm 的代码：

```
validateForm: function (event) {
    event.preventDefault();
    // some code
    event.currentTarget.checkValidity();
}); 
```

如果它不起作用，问题将与您如何调用 validateForm 函数有关。

如果您在 a 中`Backbone.View`，正如我想的那样，因为您使用的是“this.$el”，您应该以这种方式简单地编写事件对象：

```
events: {
    'submit form': 'validateForm'
    // 'click button': 'validateForm' // this way does not work
} 
```

# java - 将新数据插入数据库中的特定表中

> ID：11561057
> 
> 赞同：0
> 
> 时间：2012-07-19T12:38:16.320
> 
> 标签：java, sql, oracle, insert

我设计了一个系统，我希望用户首先从组合框中选择他要插入的表的名称，然后他将输入其余字段。我的问题是我怎样才能让用户输入名称使用sql语句的表..我写了以下没有但它不起作用？？

```
 try { 
            Object service = Service_ComboBox.getSelectedItem(); 
            String ref = "0";  
            String title = title_TextField1.getText(); 
            Object riskRating = riskRating_ComboBox3.getSelectedItem();
            Object rootCause = rootCause_ComboBox4.getSelectedItem(); 
            Object impact = impact_ComboBox1.getSelectedItem(); 
            Object likelihood = likelihood_ComboBox2.getSelectedItem(); 
            String efforts = efforts_TextField7.getText(); 
            String finding = finding_TextField9.getText(); 
            String implication = implication_TextArea1.getText(); 
            String recommendation = recommendation_TextArea2.getText(); 

          Connection  conn= DriverManager.getConnection ("jdbc:oracle:thin:@localhost:1521:XE","SYSTEM","*******");
             String query = "insert into ? (Service,Ref,Title,Risk_Rating,Root_cause,Impact ,Likelihood,Efforts,Finding,Implication,Recommendation)values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?)"; 

         PreparedStatement myStatment = conn.prepareStatement(query);

            myStatment.clearParameters();

     myStatment.setString(1, service.toString());
     myStatment.setString(2, service.toString());
     myStatment.setString(3, ref);
     myStatment.setString(4, title); 
     myStatment.setString(5, riskRating.toString());
     myStatment.setString(6, rootCause.toString());
     myStatment.setString(7, impact.toString());
     myStatment.setString(8, likelihood.toString());
     myStatment.setString(9, efforts);
     myStatment.setString(10, finding);
     myStatment.setString(11, implication);
     myStatment.setString(12, recommendation);

            boolean myResult = myStatment.execute(); 

           System.out.println("done");

        } catch (SQLException ex) {

            JOptionPane.showMessageDialog(this, "Information is missing or incorrect! Please Make sure to enter correct information");
            Logger.getLogger(Insert_info.class.getName()).log(Level.SEVERE, null, ex);
            return;

        }

        JOptionPane.showMessageDialog(this, "Your information was saved successfully!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:20:05.313

使用以下语法：

```
String query = "insert into " &tablename "bla bla predicates" 
```

为了避免 sql 注入，在您的数据库中创建角色并授予访问者/用户想要使用的表的访问权限。
或者您可以使用通配符：
创建变量 tbl_name

```
String query = "insert into "(select table_name from user_tables where table_name like '%tbl_name%')"<br/> 
```

- 接下来创建一个决策“IF”并将通配符的输出放入其中。如果它与您拥有的表匹配，那么如果不使用错误消息处理它就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:50:34.403

```
insert into ? 
```

您不能将绑定变量用于模式对象名称。原因是当你准备语句时，数据库需要知道涉及到哪些表，并决定使用哪些索引，所以需要知道查询SQL（只有数据可以改变）。

所以如果你想这样做，你必须使用字符串插值来构造查询（只针对表名，继续对数据使用绑定变量！）。

```
String query = "insert into "+ tableName + .... 
```

确保您验证了这一点`tableName`。在您的情况下，可能可以根据有效表名的 HashSet 检查它。不要让这成为 SQL 注入问题。

# c# - C# app.config 读写

> ID：11561062
> 
> 赞同：1
> 
> 时间：2012-07-19T12:38:39.470
> 
> 标签：c#, persistence, app-config

如果可以，我们可以在 app.config 文件中保存数据或一些文本，那么它是持久性的还是临时性的？

例如，如果我将上次访问日期时间存储在 app.config 文件中，然后在我启动应用程序的某个时间/天/年之后关闭/退出应用程序，那么我有可能检索到上次访问日期时间。如果是，那么请用代码解释....

谢谢，拉吉

这是我的代码..

试图从配置文件中检索日期时间。但显示错误对象未设置为类似...的对象

```
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

if (email.To.Contains(Email) && DateTime.Compare(email.UtcDateTime.Date, Convert.ToDateTime(config.AppSettings.Settings["ModificationDate"].Value)) > 0) 
```

在这里，我在 app.config 文件中存储/保存日期时间。

```
System.Configuration.Configuration config =
             ConfigurationManager.OpenExeConfiguration
                        (ConfigurationUserLevel.None);

// Add an Application Setting.
config.AppSettings.Settings.Add("ModificationDate", DateTime.Now + " ");

// Save the changes in App.config file.
config.Save(ConfigurationSaveMode.Modified);

// Force a reload of a changed section.
ConfigurationManager.RefreshSection("appSettings");

Console.WriteLine("Last Update :"+config.AppSettings.Settings["ModificationDate"].Value);
Console.ReadLine(); 
```

请建议我为什么它向我显示一个错误，即对象未设置我犯了任何错误，请回答...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:46:41.983

您可以创建一个设置 xml 文件来执行此操作。

在 VS 中转到您的项目属性 -> `Settings`，然后在其中写入一个值。

在代码中，您可以使用获取/设置该值

```
Properties.Settings.Default.YourVariable = 0; 
```

如果您正在设置该值，请确保保存它

```
Properties.Settings.Default.Save(); 
```

请参阅[此处](http://www.sorrowman.org/c-sharp-programmer/save-user-settings.html)以获取良好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:54:46.977

我会使用自定义配置部分来创建您的配置类型 - 上次访问日期时间。您可以创建更复杂的层次结构配置和强类型。

同样，如果您需要这样做，这取决于您的要求和设计。否则，标准文件存储（txt/xml）也可以让你这样做。我个人通常将**app.config**用于应用程序特定级别（外观/字体/服务器名称等）配置，而不是事务配置。

例如

```
public class LastAccessConfigurationSection : System.Configuration.ConfigurationSection {
    [ConfigurationProperty("LastAccess")]
    public string LastAccess{
        get { return (string)this["LaunchTime"]; }
        set { this["LaunchTime"] = value; }
    }
} 
```

您可以有一个静态类来管理允许您持久更改的生命周期。

```
public static LastAccessConfigurationSection Config { get; internal set; }

    public static void Initialize() {
        Config = ConfigurationManager.GetSection("LastAccess") as LastAccessConfigurationSection;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T12:41:08.753

您可以`App.config`像任何其他文件一样用于存储，它会在您下次运行程序时持续存在并可用。这就是文件存储的本质。我建议您将该数据存储在单独的文件或数据库中。但是，我不会为您编写代码。

# c# - JS 中 C# var 的 asp.net 值

> ID：11561067
> 
> 赞同：0
> 
> 时间：2012-07-19T12:38:48.717
> 
> 标签：c#, javascript, asp.net, button, popup

我有一个简单的 JS 弹出`"are you sure..."` 窗口，以及一个下拉列表和`asp:button`. 当我单击按钮时，我想要的是收到此消息：

`"Are you sure you want to perform <%= ACTION %>?"`

其中 ACTION 是来自 dropdownlist.SelectedItem.Text 的字符串。

以下似乎不起作用：

```
OnClientClick="return confirm('Are you sure you want to perform <%= ACTION %>? ); 
```

它实际上只是打印`<%= ACTION %>`而不是值。

我也试过：

```
function testMe() {
    return confirm('Are you sure you want to perform ' + document.getElementById('<%= hfAction.ClientID %>').value + '?');
}

OnClientClick="testMe();" 
```

但无论点击`cancel`或，以上都会导致回发`OK`。

哪个是正确的用法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:51:38.537

您不能在服务器控件声明中使用服务器标签。初始化对象时，在后面的代码中设置 OnClientClick 脚本。

```
mybutton.OnClientClick 
    = string.format("return confirm('Are you sure you want to perform {0}?');", ACTION); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:48:38.490

试试这个：

```
<asp:DropDownList runat="server" ID="ACTION">
    <asp:ListItem>Action 1</asp:ListItem>
    <asp:ListItem>Action 2</asp:ListItem>
</asp:DropDownList>

<script type="text/javascript">
    function ExecuteConfirm() {
        var ddlId = '<%= ACTION.UniqueID %>';
        var action = $("#" + ddlId + " option:selected").text();
        return confirm('Are you sure you want to perform ' + action + ' ?');
    }
</script>

<asp:Button runat="server" Text="Button" OnClientClick="return ExecuteConfirm();" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:56:15.547

对不起，我的最后一个答案是完全垃圾（在发布之前没有想到）。这个怎么样（你几乎是对的）？

```
function testMe() {
    var val = document.getElementById('<%= hfAction.ClientID %>').value;
    return confirm('Are you sure you want to perform ' + val + '?');
}

OnClientClick="return testMe();" 
```

您只是错过了 OnClientClick 的回报。

# r - 从数据框中提取并根据条件合并

> ID：11561068
> 
> 赞同：0
> 
> 时间：2012-07-19T12:38:48.750
> 
> 标签：r

我有一个像 ba 这样的数据框。

我需要根据区域提取数据框并根据日期合并。

如果我像下面这样手动操作，它就可以工作。但是如果区域的数量超过两个，我需要使用 sapply 提取然后我需要合并（不知道如何使用循环或 sapply 来做）。请告知我如何根据“区域”进行提取，然后即使有两个以上的区域（例如：betasol、alpha、atpTax）动态合并。

```
 > ba
             date  region AveElapsedTime
    1  2012-05-19 betasol           1372
    2  2012-05-22  atpTax           1652
    3  2012-06-02 betasol           1630
    4  2012-06-02  atpTax           1552
    5  2012-06-07 betasol           1408
    6  2012-06-12 betasol           1471
    7  2012-06-15 betasol           1384
    8  2012-06-21 betasol           1390
    9  2012-06-22  atpTax           1252
    10 2012-06-23 betasol           1442
    > dfa <- ba[ab$region == "atpTax", c("date", "AveElapsedTime")]
    > dfb <- ba[ab$region == "betasol", c("date", "AveElapsedTime")]
    > merge(dfa, dfb, by="date", all=TRUE)
            date AveElapsedTime.x AveElapsedTime.y
    1 2012-05-19               NA             1372
    2 2012-05-22             1652               NA
    3 2012-06-02             1552             1630
    4 2012-06-07               NA             1408
    5 2012-06-12               NA             1471
    6 2012-06-15               NA             1384
    7 2012-06-21               NA             1390
    8 2012-06-22             1252               NA
    9 2012-06-23               NA             1442

    extractfun <- function(z, ab) {
    df[z] <- ab[ab$region == z, c("date","region")]
    }
    sapply(unique(ba$region), FUN=extractfun, ab=avg_data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:56:27.123

```
require(reshape)    
cast(ba,date~region) 
```

# xna - 如何在 XNA 3.1 中使用 3-D 陆地坐标映射屏幕位置

> ID：11561069
> 
> 赞同：1
> 
> 时间：2012-07-19T12:38:55.130
> 
> 标签：xna

我在使用 XNA 3.1 框架时遇到问题。实际上我从 DEM 文件创建了一个地形模型。地形模型具有 X、Y、Z 坐标。地形是在屏幕的下半部分创建的。在 xna 域中，0,0 是屏幕的中心。我的问题是，当用户单击屏幕（使用鼠标）时，我想识别地形坐标。在屏幕视图中，0,0 是最左上角。我很难用我的地形坐标映射屏幕坐标，反之亦然。

是否有人遇到过类似的问题，或者让我提出任何解决方案，任何指针都会对我有所帮助。

谢谢阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:54:00.733

您正在尝试做的事情称为“挑选”，网上有无数关于此的资源。简而言之，它包括：

*   在 3D 空间中生成一条从视锥体的前到后的射线，使用鼠标坐标作为 X,Y
*   应用您的视图投影矩阵的逆变换以在世界空间中获取此向量
*   测试此向量与地形的每个多边形之间的交集
*   使用 z 顺序选择最近的相交多边形

有关详细说明，请参阅[XNA Picking Tutorial](http://ghoshehsoft.wordpress.com/2010/11/25/xna-picking-tutorial-part-i/)。或者只是谷歌“挑选3D”。

# c++ - 具有高效“删除”功能的数据结构

> ID：11561074
> 
> 赞同：0
> 
> 时间：2012-07-19T12:39:27.687
> 
> 标签：c++, algorithm, data-structures, stl

我正在寻找方法来改善我的代码中的性能瓶颈。在我的代码中，我构建了一个图，其中每个顶点都维护着传出和传入边的列表。扼杀我的代码性能的原因是这些边缘经常从列表中删除。

目前，我的实现正在使用 C++ 的 STL 库中可用的列表。所以我想知道是否有任何数据结构可以提供有效的删除功能。

下面是删除顶点的代码部分。您可以看到，在外部 for 循环的每次迭代中
(*inedge_it)->src->out_edges.remove(*inedge_it) 都被调用以从传入边列表中删除 (*inedge_it)。同样在内部 for 循环 (*outedge_it)->tgt->in_edges.remove(*outedge_it 被调用以从传出边列表中删除 (*outedge_it)。

```
int dag_vertex::eliminate( int & edge_counter )
{
    int nMults = 0;

    list<dag_edge*>::iterator inedge_it;
    list<dag_edge*>::iterator outedge_it;

    int m = in_edges.size();
    int n  = out_edges.size();

    for( inedge_it=in_edges.begin() ; inedge_it!=in_edges.end() ; inedge_it++ )
    {
        (*inedge_it)->src->out_edges.remove(*inedge_it);

        for( outedge_it=out_edges.begin() ; outedge_it!=out_edges.end() ; outedge_it++ )
        {
            (*outedge_it)->tgt->in_edges.remove(*outedge_it);

            double cij = (*inedge_it)->partial*(*outedge_it)->partial;

            nMults++;

            dag_edge * direct_link = NULL;

            list<dag_edge*>::reverse_iterator src_outedge_it;

            for( src_outedge_it=(*inedge_it)->src->out_edges.rbegin() ; src_outedge_it!=(*inedge_it)->src->out_edges.rend() ; src_outedge_it++ )
            {
                if( (*src_outedge_it)->tgt==(*outedge_it)->tgt )
                {
                    direct_link = (*src_outedge_it);
                    break;
                }
            } 

            if(direct_link)
            {
                direct_link->partial += cij;
            }else
            {
                (*outedge_it)->tgt->add_in_edge( (*inedge_it)->src , cij );
                edge_counter++;
            }
        }

        delete (*inedge_it);    
    }

    for( outedge_it=out_edges.begin() ; outedge_it!=out_edges.end() ; outedge_it++ )
    {   
        delete (*outedge_it);
    }

    in_edges.clear();
    out_edges.clear();

    edge_counter -= (m+n);

    return nMults;
} 
```

这是添加传入边缘的函数的定义

```
dag_edge* dag_vertex::add_in_edge(dag_vertex* src , double partial)
{
    dag_edge* the_in_edge= new dag_edge(src, this, partial);
    in_edges.push_back(the_in_edge);
    src->out_edges.push_back(the_in_edge);
    return the_in_edge;
} 
```

下面是 dag_edge 的定义。

```
dag_edge::dag_edge(class dag_vertex* s, class dag_vertex* t, double cij) : 
src(s), tgt(t), partial(cij),alive(true)
{

}

dag_edge::~dag_edge()
{
     //std::cout<<"~dag_edge("<<src->idx<<","<<tgt->idx<<")"<<std::endl;
}

dag_vertex* dag_edge::getsrc()
{
    return src;
}

dag_vertex* dag_edge::gettgt()
{
    return tgt;
}

void dag_edge::dump_to_dot(FILE* file)
{
    fprintf(file,"%d->%d [label=\"%f\"]\n",src->idx, tgt->idx, partial); 
}

void dag_edge::display() 
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:46:24.323

`delete`\\ `compare`\最有效的方法是使用哈希表`insert`。`search`在 STL 中有一个`#include <map>`. 然后你需要两个`Map`对象而不是你的`vectors`. 实现是相似的，但是当你执行比较时会更容易，而且你只能有一个循环。您的代码目前`O(n^3)`将减少到`O(n * log n)`最好的情况，`O(n^2)`在最坏的情况下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:58:54.100

可能在 a 中按值存储边会更有效`vector`，当您需要删除`edge`索引处的say时，`i`您可以通过用`i`a 中的最后一个替换边`vector`并弹出最后一个来做到这一点

```
edges[i] = edges.back();
edges.pop_back(); 
```

`move semantics`如果使用for会更高效`edge`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:10:29.410

您实际上是在调用 remove 超过必要的：

```
for( inedge_it=in_edges.begin() ; inedge_it!=in_edges.end() ; inedge_it++ )
{
    (*inedge_it)->src->out_edges.remove(*inedge_it);

    for( outedge_it=out_edges.begin() ; outedge_it!=out_edges.end() ; outedge_it++ )
    {
        (*outedge_it)->tgt->in_edges.remove(*outedge_it); // This has no dependence on inedge_it 
```

基本上它最终会多次尝试从目标中删除输入边缘，因此它将花费大量时间来尝试查找已被删除的边缘。

您可以将其提取到一个单独的循环中：

```
for( outedge_it=out_edges.begin() ; outedge_it!=out_edges.end() ; outedge_it++ )
{
   (*outedge_it)->tgt->in_edges.remove(*outedge_it);
}

for( inedge_it=in_edges.begin() ; inedge_it!=in_edges.end() ; inedge_it++ )
{
    (*inedge_it)->src->out_edges.remove(*inedge_it);

    for( outedge_it=out_edges.begin() ; outedge_it!=out_edges.end() ; outedge_it++ )
    {
        double cij = (*inedge_it)->partial*(*outedge_it)->partial; 
```

# extjs - Ext 4.1.1：向 Store 添加新记录

> ID：11561075
> 
> 赞同：8
> 
> 时间：2012-07-19T12:39:28.413
> 
> 标签：extjs, combobox, store, extjs4.1

我想在商店初始化后添加记录。

我试过[loadData()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-loadData)，[loadRawData()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-loadRawData)，[add()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-add)但没有接缝工作。

这是我的 jsfiddle：http: [//jsfiddle.net/charlesbourasseau/zVvLc](http://jsfiddle.net/charlesbourasseau/zVvLc)

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T12:48:50.223

您需要`queryMode: 'local'`在组合框中进行设置。最小的例子：

```
Ext.onReady(function() {
    var store = Ext.create('Ext.data.Store', {
        alias: 'store.ModeStore',
        autoLoad: false,
        fields: [{
            name: 'mode',
            type: 'string'
        }, {
            name: 'id',
            type: 'string'
        }],
        data: [{
            mode: 'mode1',
            id: 1
        }]
    });

    var container = Ext.create('Ext.form.field.ComboBox', {
        renderTo: Ext.getBody(),
        displayField: 'mode',
        valueField: 'mode',
        store: store,
        queryMode: 'local'
    });

    store.add({
        mode: 'mode2',
        id: 2
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-30T06:09:22.213

对于面板，您可以通过`remove()`和添加或删除项目`add()`

```
var store = Ext.create('MyApp.store.Roles', {autoLoad: false});
store.load(function(records, action, success) {
    if (success) {
        store.remove(store.findRecord('id', 50, 0, false, true, true));//exact match
        store.add({'id':110,'name':'Agent' });
    }
}); 
```

# php - Google Drive DriEdit 示例不适用于我的 FULL_AUTH_URL

> ID：11561076
> 
> 赞同：0
> 
> 时间：2012-07-19T12:39:31.073
> 
> 标签：php, oauth-2.0, google-drive-api

我在我的网站中设置了 Google Drive 示例 DriEdit 代码的设置。它正在对用户文件进行身份验证，但是一旦身份验证完成，它就会将用户带回重定向 url，但是当我使用默认`FULL_AUTH_URL`url 时，它是工作文件，但在我的情况下，它在这里不起作用是我的 URl。

```
const FULL_AUTH_URL='https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&client_id=MY_CLIENT_ID&response_type=code&access_type=offline&approval_prompt=force&redirect_uri=http://www.example.com'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:04:11.643

您可能需要创建一个*“Web 应用程序的客户端 ID”* ——也许服务帐户也可以工作（Web 服务可能更容易连接，因为对于服务帐户，需要安装证书文件并通过身份验证发送）。

正确设置 oAuth 后，您至少应该从 Google 收到任何错误消息。

只是不要使用 Drive API 凭据，它们还没有功能。

希望这能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:36:28.787

您需要更换：

*   **MY_CLIENT_ID**通过您的应用程序的客户端 ID，您可以在您创建的项目的 Google API 控制台中找到它。请参阅[https://developers.google.com/drive/register](https://developers.google.com/drive/register)
*   **redirect_uri**是用户在批准 OAuth 流后重定向到的 URL。通常是您网站的主页或不同的 OAuth 处理程序。这通常都在 Dr Edit 示例文档中进行了描述。确保您阅读此内容：[https ://developers.google.com/drive/examples/python](https://developers.google.com/drive/examples/python)

# android - google map v3 未在 html5 中完全显示

> ID：11561079
> 
> 赞同：7
> 
> 时间：2012-07-19T12:39:37.800
> 
> 标签：android, html, cordova, google-maps-api-3

google map v3 没有完全显示在 html5 中，phonegap。![在此处输入图像描述](../Images/f83f07c1a5e26af1c3deab57507d8ef6.png)

这张地图是可拖动的，这里是 JavaScript 代码（main.js）

```
 var map;
 function initialize() {
 var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
 var myLatlng2 = new google.maps.LatLng(-24.363882,131.044922);

 var myOptions = {
 center: myLatlng,
 zoom:5,
 mapTypeId: google.maps.MapTypeId.ROADMAP

 };
 map = new google.maps.Map(document.getElementById("map_canvas"),
 myOptions);

 setMarker(myLatlng);
 setMarker(myLatlng2);

 }

 function setMarker(p)
 {
 marker = new google.maps.Marker({
 position: p,
 title:"Hello World 2!"
 });
 marker.setMap(map);

 }

 initialize(); 
```

这是我的html

```
 <!DOCTYPE HTML>
 <html>
 <head>
 <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; user-scalable=yes;" />
 <meta http-equiv="Content-type" content="text/html; charset=utf-8">
 <link rel="stylesheet"  href="css/jquery.mobile.css" />
 <link href="css/styles.css" rel="stylesheet" type="text/css" />
 <script type="text/javascript" charset="utf-8" src="js/cordova-1.9.0.js"></script>

 <script type="text/javascript" charset="utf-8" src="js/jquery-1.6.3.min.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.1.0.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/tabs.js"></script>

 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
 <script type="text/javascript" src="jquery.ui.map/jquery.ui.map.js"></script>
 <script type="text/javascript" src="jquery.ui.map/jquery.ui.map.services.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/main.js"></script>
 </head>
 <body>
 <div id="page-id" data-role="page" >
 <div id="map-container"><div id="map_canvas" style="height:600px; width:600px;"></div>  </div>

 </div>
 </body>
 </html> 
```

css

```
 #map-container {
    padding: 6px;
    border-width: 1px;
    border-style: solid;
    border-color: #ccc #ccc #999 #ccc;
    -webkit-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
    -moz-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
    box-shadow: rgba(64, 64, 64, 0.1) 0 2px 5px;
    width: 600px;
  }

  #map_canvas {
    width: 600px;
    height: 400px;
  } 
```

如果我在萤火虫中检查它，它会完全加载并在 div 中显示完整的地图，请建议我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:49:16.040

我们遇到了同样的问题，我们通过在地图上设置“max-width: none”解决了这个问题。但我不记得为什么。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:55:07.607

查看您的屏幕截图，似乎 mapcontrol 占用了所需的空间，但实际的地图区域不够大。尝试将您的调用移至 initialize(); 以便它在页面的其余部分加载时执行，看看它是否有帮助。

```
var map;
function initialize() {
  var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
  var myLatlng2 = new google.maps.LatLng(-24.363882,131.044922);

  var myOptions = {
    center: myLatlng,
    zoom:5,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  setMarker(myLatlng);
  setMarker(myLatlng2);
}

function setMarker(p)
{
  marker = new google.maps.Marker({
    position: p,
    title:"Hello World 2!"
  });
  marker.setMap(map);
}

$(document).ready(function() {
  initialize();
}); 
```

另一种解决方案可能是调用调整大小事件并在加载所有内容后让地图控件重新测量自身，这是通过调用完成的`google.maps.event.trigger(map, "resize");`（并`initialize()`像以前一样在就绪函数之外调用）。

```
$(document).ready(function() {
  google.maps.event.trigger(map, "resize");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T12:04:42.057

请检查以下内容：

```
<div id="mapa"  style="width: 350px; height: 350px"></div> 
```

上面是要列出的地图的 div。

```
var map = new google.maps.Map(
document.getElementById('mapa'), {
center: new google.maps.LatLng(9.295680287227711, 76.87921151518822),
zoom: 8,
mapTypeId: google.maps.MapTypeId.ROADMAP
}); 
```

我尝试了以上所有方法都行不通，所以做了一个这样的技巧，可以得到预期的结果。我写了一个鼠标悬停函数并调用下面的代码

(1) 修改

```
<div id="mapa" onmouseover="show_sidebar()" style="width: 350px; height: 350px"></div> 
```

(2)

```
function show_sidebar(){
google.maps.event.trigger(map, 'resize');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T13:20:05.727

我过去遇到过这个问题，并将我的解决方案发布到了一个[类似的问题](https://stackoverflow.com/questions/17059816/google-maps-v3-load-partially-on-top-left-corner-resize-event-does-not-work)。

以下修复了它：

```
google.maps.event.addListenerOnce(map, 'idle', function() {
   google.maps.event.trigger(map, 'resize');
}); 
```

等待地图的空闲状态（即它自己完成加载），然后告诉它调整自己的大小。

# android - 在android中发送带有图像的电子邮件

> ID：11561089
> 
> 赞同：-1
> 
> 时间：2012-07-19T12:40:10.197
> 
> 标签：android

我想要带有图像的电子邮件，该图像来自 android 中的可删除图像我在下面显示给定链接，但出现同样的问题： [如何在电子邮件正文中添加图像](https://stackoverflow.com/questions/5244472/how-add-image-in-email-body)

如果我把

```
email.putExtra(Intent.EXTRA_TEXT,Html.fromHtml("<b>content</b>"+"<img src=\"data:"+getResources().getDrawable(R.drawable.smile)+";base64,#IMAGEDATA#\"‌​&gt;") 
```

并保存它给出错误：

```
Save Could not be completed
some character can not be mapped using "Cp1252" Character encodding. 
```

请给我解决方案，我想通过邮件发送图像。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T12:49:31.807

试试这个它真的会帮助你：

```
mail.putExtra(Intent.EXTRA_SUBJECT,  subject.toString()); 
mail.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:"+ file)); 
```

# mysql - MySQL全文搜索给我的结果不准确

> ID：11561093
> 
> 赞同：2
> 
> 时间：2012-07-19T12:40:20.207
> 
> 标签：mysql, full-text-search, rows

假设我有一个看起来像这样 ( `MyISAM`) 的数据库：

```
+------------+-------------------+------------------+
| student_id | student_firstname | student_lastname |
+------------+-------------------+------------------+
|         30 | Patrik            | Andersson        |
|         79 | Patrik            | Svensson         |
+------------+-------------------+------------------+ 
```

我执行这个查询：

```
SELECT s.student_firstname, s.student_lastname FROM students s
WHERE MATCH (student_firstname, student_lastname) 
 AGAINST 
('+Patrik Svensson*' IN BOOLEAN mode) 
```

这会生成上述两行。为什么我的结果中没有 1 行？是因为最后三个字母`student_lastname`相同吗？有什么方法可以`FULLTEXT`更精确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:46:33.527

您是否尝试过阅读 MySQL 文档？

[http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)

我引用：

> 默认情况下（当既没有指定 + 也没有指定 - 时）该词是可选的，但包含它的行的评级更高。

和：

> '+苹果麦金塔'
> 
> 查找包含单词“apple”的行，但如果它们还包含“macintosh”，则将行排名更高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:54:30.127

我已经测试过了，这个查询给出了正确的结果

```
SELECT s.student_firstname, s.student_lastname FROM students s
WHERE MATCH (student_firstname, student_lastname) 
 AGAINST 
('+Patrik +Svensson*' IN BOOLEAN mode) 
```

# php - 真的可以在“socialengine”中为“主页”使用自定义模板吗？

> ID：11561097
> 
> 赞同：-2
> 
> 时间：2012-07-19T12:40:36.260
> 
> 标签：php, socialengine

我已经通过 CSS 自定义了页眉和页脚。现在我想用新的 html 元素重新排列主页。

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:17:16.790

*我们建议首先在主题编辑器*中找到和编辑的`themes.css`或文件中添加或更改 CSS 规则。`constants.css`

 *1.  有关主题编辑器的更多信息，请参阅：http: [//support.socialengine.com/questions/210/Admin-Panel-Layout-Theme-Editor](http://support.socialengine.com/questions/210/Admin-Panel-Layout-Theme-Editor)

2.  页眉和页脚的进一步 CSS 编辑可以在

    ```
    /application/modules/Core/externals/styles/main.css file. 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:06:07.323

有可能，您应该向`application/modules/core/layouts/default.tpl`.

检查 CSS 类以进一步改变网络的样式和显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:45:38.937

最好的方法：

创建一个简单的小部件，将所有 HTML 放入其中，并通过布局管理器将其呈现到主页。这样您就不需要更改核心文件。

要创建小部件，请参考以下用户：

[http://jadb.wordpress.com/2011/01/17/socialengine-4-create-a-widget/](http://jadb.wordpress.com/2011/01/17/socialengine-4-create-a-widget/)*

# ios - 如何使 UIViewController 半透明

> ID：11561098
> 
> 赞同：5
> 
> 时间：2012-07-19T12:40:37.957
> 
> 标签：ios, ios5, uiview, uiviewcontroller

我有两个 UIViewController，我在 firstViewController 上模态显示 secondViewController。我的 secondViewController 包含一个子视图，它是带有一些按钮的 UIView。现在我想做的是，使 SecondViewController 半透明，这样我的 firstViewController 是可见的，并且只显示不透明的子视图。

问候兰吉特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:45:59.237

当您展示您的视图控制器时，前一个控制器的视图将被删除，因此如果您为当前控制器的视图设置任何 alpha，您将获得 UIWindow 的背景。

如果您打算玩透明度，那么不要`presentModalViewController`在第一个视图控制器中执行 ,`[self.view addSubView:controller2.view]; and make controller2.view.alpha = 0.5;//whatever transparency level u want`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:57:06.997

如果您的目标是 iOS 5.0 及更高版本，则可以使用容器视图控制器方法：

```
// create the modal view controller
MyModalController *modal = [[MyModalController alloc] 
  initWithNibName:@"MyModal" bundle:nil];
[modal willMoveToParentViewController:self];

// add it to the controllers and views hierarchies
[self addChildViewController:modal];
modal.view.frame = self.view.bounds;
[self.view addSubview:modal.view];
[modal didMoveToParentViewController:self]; 
```

然后，您在 IB 或代码中为主视图的背景设置的任何 alpha 都将受到尊重。

# c# - Word 无法读取此文档。可能是腐败的

> ID：11561108
> 
> 赞同：1
> 
> 时间：2012-07-19T12:41:10.343
> 
> 标签：c#, asp.net

`Word was unable to read this document. It may be corrupt`

当我想在 C# 中打开 word 文件时，我在服务器上遇到了这个错误，但它在我的本地机器上工作正常。我已授予服务器上 word 文件的所有权限，并且 word 文件也没有损坏。但仍然面临这个错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:47:56.970

如果您的服务器安装了 Office 2003，请确保您安装了 Service Pack 3。几年前有一个与此错误相关的问题，但我相信它已在 SP2 中修复。

此外，如果您的文件名以“.docx”而不是“.doc”结尾，则只能在 Office 2007 或更高版本中打开。如果您需要在 2003 年或更早的版本中对其进行编辑，您有两种选择。首先，在您的机器上，您可以打开文档并转到文件 > 另存为，将其保存为 Word 97-2003 文档。其次，您可以在服务器上安装[Office 兼容包](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=3)，使其能够打开 docx 文档。

# iphone - 有没有办法捕获所有异常并将它们显示给 iOS 中的用户？

> ID：11561112
> 
> 赞同：1
> 
> 时间：2012-07-19T12:41:26.303
> 
> 标签：iphone, objective-c, ios, ipad, testing

我正在编写一个 iPhone/iPad 应用程序，我正在接受我公司其他员工的 beta 测试（其中许多人在国外）。我的问题是，无论如何要捕获程序的所有异常或错误并将它们显示给用户。

我在想的是，以某种方式用 try catch 包装 main 方法，然后，如果有任何错误（例如 indexOutOfBounds），它将向用户显示 UIAlert 说明错误是什么以及它发生的位置。这样，我的测试人员就更容易准确地告诉我他们遇到了什么错误。

如果这是不可能的，除了让他们告诉我诸如“我按下这个按钮并且应用程序崩溃”之类的事情之外，我还有什么好方法可以告诉我的程序测试人员有什么错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:46:44.203

您可以查看[TestFlight SDK](https://testflightapp.com/sdk/)或[PLCrashReporter](http://code.google.com/p/plcrashreporter/)之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:51:36.567

您还可以让您的测试人员在调试运行模式下测试应用程序，同时连接到 xcode 调试器（在设备调试上），您会发现大多数问题的原因。其他方式是使用与 XCode 和 iOS SDK 捆绑在一起的工具应用程序。这是调试应用程序的好方法，最后，您可以使用第三方库来报告日志，就像@Amy 建议的那样。

# java - 推土机：获取映射到目标中单个值的集合的第一个值

> ID：11561115
> 
> 赞同：5
> 
> 时间：2012-07-19T12:41:38.467
> 
> 标签：java, dozer

我正在通过 Dozer 映射器映射两个 DTO 对象。我有兴趣从列表中选择一个值并将其映射到目标文件中的单个字段。

是否可以像这样使用映射：

```
<field>
   <a>someList[0]</a>
   <b>someVariable</b>
</field> 
```

似乎这`b`部分可以有一种方法，但是当括号放在一边`list[1].value`时，我无法让它工作。`a`我在哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T06:43:24.087

实际上，您不需要比建议的更多

```
<field>
    <a>someList[0]</a>
    <b>someVariable</b>
</field> 
```

结构来实现这一点。我在其他地方遇到了问题：我没有`map()`为我的代码上的映射调用正确的函数。我有几个映射，并且`map()`缺少对这个特定映射的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:10:12.637

使用以下映射：

```
<mapping map-id="collectionMapping" type="one-way">
    <class-a>java.util.Collection</class-a>
    <class-b>java.util.Collection</class-b>
    <field>
        <a>this</a>
        <b set-method="add(java.lang.Object)" type="iterate">anything</b>
        <b-hint>your destination object type</b-hint>
    </field>
</mapping> 
```

# asp.net-mvc - 将 UnityManager 存储在 Session 中

> ID：11561118
> 
> 赞同：0
> 
> 时间：2012-07-19T12:41:44.057
> 
> 标签：asp.net-mvc, unity-container

请让我先说我对 Unity 不是很熟悉。我知道它是一个依赖注入容器，我在有限程度上理解这意味着什么。我继承了一个始终使用 Unity 的应用程序，尽管在我看来它没有被正确实现。在`session_start`之前的`global.asa`开发人员中，使用以下代码实例化统一对象，然后将其持久化到整个会话中：

```
var unity = new UnityManager(new UnityContainer());
Session["UnityManager"] = unity; 
```

据我了解，这不会固有地导致并发问题吗？谁能提供一个如何正确实现统一的示例，或者如果这是正确的，请向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:00:17.193

如果您使用的是 mvc，您可以从 nuget 包管理器中删除会话并安装 unity.mvc3。它与 mvc4 兼容，并以正确的方式为您设置。您可以将现有映射放入 bootstrapper.cs（自动安装）

基本上你想在 global.asax 中有 1 个静态变量来访问统一。所以你可以替换所有这些

```
var unitycontainer = Session["UnityManager"];
unitycontainer.resolve<>... 
```

和

```
MVCApplication.Container.Resolve<> .. 
```

# javascript - Sencha Touch 2 Ext.util.Geolocation

> ID：11561119
> 
> 赞同：0
> 
> 时间：2012-07-19T12:41:46.223
> 
> 标签：javascript, geolocation, extjs, sencha-touch-2

如何在创建的对象之外获取纬度和经度？我已经创建了 Ext.util.Geolocation 的新对象，对其进行了更新，现在我试图在对象之外获取纬度和经度值，但它显示为“空”。代码：

```
var geo = Ext.create('Ext.util.Geolocation', {
    autoUpdate: false,
    listeners: {
        locationupdate: function(geo) {
            //alert('New latitude: ' + geo.getLatitude());
        },
        locationerror: function(geo, bTimeout, bPermissionDenied, bLocationUnavailable, message) {
            if(bTimeout){
                alert('Timeout occurred.');
            } else {
                alert('Error occurred.');
            }
        }
    }
});

geo.updateLocation();
//geo.fireEvent('locationupdate');

alert(geo.getLatitude()); // it shows null 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:05:44.253

这可能是因为获取您的位置需要一些时间。

您应该尝试在`locationupdate`回调函数中获取纬度和经度。

如果您想在外部访问它，只需确保 geo 存在

```
if (geo) { alert(geo.getLatitude()); } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:08:08.813

这只是一个时间问题 - 获取位置不是同步的，因此您不能在`locationupdate`回调函数之外访问它，至少在它被初始化之前是这样。

你应该在回调中做任何你需要做的事情（例如，如果需要，调用另一个传入纬度的函数）......

```
 ...
    listeners: {
        locationupdate: function(geo) {
            yourCallbackFunction(geo.getLatitude());
    },
    ... 
```

如果您确实需要在该回调之外使用它，那么在最坏的情况下，您可以执行以下操作：

```
var latitude; //will store latitude when ready..
var geo = Ext.create('Ext.util.Geolocation', {
    autoUpdate: false,
    listeners: {
        locationupdate: function(geo) {
            latitude = geo.getLatitude();
        }
    }
});
geo.updateLocation();

//waits until latitude exists then does something..
var untilLatThere = setInterval(function(){
    if(latitude) {
        alert(latitude); //alerts a valid value..
        clearInterval(untilLatThere);
    }
}, 100); 
```

# cocoa - 推送时将 leftBarButtonItems 保留在新的 UIViewcontroller 上

> ID：11561120
> 
> 赞同：0
> 
> 时间：2012-07-19T12:41:53.333
> 
> 标签：cocoa, ios5, uiviewcontroller, uinavigationcontroller, uinavigationbar

我有一个`UIViewController`嵌入在`UINavigationController`. 现在`rootViewController`已经包含一些按钮，如`leftBarButtonItems`.

`UIViewController`现在，当我在顶部推送一个新的时，`UINavigationController`我希望新的使用-Button`UIViewController`保持现有的`leftBarButtonItems`扩展。`Back`

现在情况如下：当我按下新按钮时`UIViewController`，现有按钮`leftBarButtonItems`消失，只有`Back`-Button 可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:06:09.660

每个 UIViewController 都有自己的“navigationItem”属性，它充当该视图控制器的导航栏表示。当您将按钮添加到特定 UIViewController 的 navigationItem 时，它们的范围仅限于添加它们的视图控制器，并且它们不会持续存在于其他视图控制器中。

基本上，您必须在加载时将按钮添加到每个视图控制器的 navigationItem。您可以通过编写向 UIViewControllers 以外的类添加执行此工作的方法来简化此操作。但是，当您触摸每个按钮时会发生什么可能是特定于视图控制器的，因此您必须考虑如何将触摸动作反馈给相关的视图控制器。也许引入某种 NavigationBarDelegate 协议之类的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:58:59.840

当将同一视图控制器的多个实例推送到我认为会类似工作的细节视图控制器时，我发现似乎是一种解决此问题的 hacky 方法。在推送新的视图控制器之前，我使用了这个：（浏览器是我的新视图控制器）

```
 self.browser.navigationItem setLeftBarButtonItem:self.detailViewController.navigationItem.leftBarButtonItem animated:YES]; // Sets popover view controller button.
   [self.detailViewController.navigationController pushViewController:self.browser animated:YES]; 
```

这可能不是一个好方法，但它似乎适用于我的情况。

# android - 使用 Sencha Touch 2 的我的 Android 应用程序的按钮单击在 Android 2.3 模拟器中工作正常，但在 Android 3.0 及更高版本中无法正常工作

> ID：11561124
> 
> 赞同：0
> 
> 时间：2012-07-19T12:42:06.410
> 
> 标签：android, sencha-touch

使用 Sencha Touch 2 的 Android 应用程序的按钮单击在 Android 2.3 模拟器中工作正常，但在 Android 3.0 及更高版本中无法正常工作。当我在 Android 3.0 及更高版本中运行此应用程序并单击保存按钮时，它不会从 var isValid 编译=真；线。我的代码如下： -

```
{
            xtype: 'button',
            text: 'Save',
         handler: function(){
         //var val3 = Ext.ComponentQuery.query('#na')[0].getValue(); 
         val3 = Ext.getCmp('na').getValue();
         console.log(val3);
         val = Ext.getCmp('ea').getValue();          
         console.log(val);
         val4 = val.indexOf("@");
         console.log(val4);
         val5 = val.lastIndexOf(".");
         console.log(val5);
         val2 = Ext.getCmp('pa').getValue();
         console.log(val2); 
         val1 = Ext.getCmp('ra').getValue();    
         console.log(val1); 
            var isValid = true;
            Ext.Msg.alert("Info", "123");
            var errors = new Array();
            Ext.Msg.alert("Info", "456");
           //validate the name                        
            if (val3.search(/[0-9]/) > -1) {
            Ext.Msg.alert("Info", "789");
              isValid = false;
              errors.push({field : 'name',
              reason : 'Name must not contain numbers'});
                }
             if (val3.length <= 0) {

              isValid = false;
              errors.push({field : 'name',
              reason : 'Name should not be blank'});
                }

                if (val3.search(/[@]/) > -1) {
              isValid = false;
              errors.push({field : 'name',
              reason : 'Name must not contain special characters'});
                }
             //validate e-mail                        
              if (val4<1 || val5<val4+2 || val5+2>=val.length)
             {
             isValid = false;
                errors.push({field : 'email',
                reason : 'Invalid email id'});
             }
            if (val.search("/^([a-zA-Z0-9_\.\-])+(@[a-z])+([.][a-z])+$+") > -1){
                isValid = false;
                errors.push({field : 'email',
                reason : 'Invalid Email address'});
              }
            if (val.length <= 0){
                isValid = false;
                errors.push({field : 'email',
                reason : 'Email address should not be blank'});
              }                   
            //validate Password                        
            if (val1 != val2) {
                isValid = false;
                errors.push({field : 'reenter',
                reason : 'Password do not match'});
                 } 
            if(val2 <= 0){
               isValid = false;
               errors.push({field : 'password',
               reason : 'Password should not be blank'});
                 }  
            if(val1 <= 0){
               isValid = false;
               errors.push({field : 'reenter',
               reason : 'Re-enter Password should not be blank'});
                 }  
            if(val1.length > 4){
               isValid = false;
               errors.push({field : 'reenter',
               reason : 'Re-enter Password should not be more than 4 characters'});
               }  
            if(val2.length > 4){
               isValid = false;
               errors.push({field : 'password',
               reason : 'Password should not be more than 4 characters'});
              }  
            //show error if the validation failed                        
            if (!isValid) {
               var errStr = "";
               Ext.each(errors, function(error, index){
               errStr += "[" + (index+1) + "] - " + error.reason + "\n";
               });
               Ext.Msg.alert("Error", errStr);
              } else {//form is valid
                //form.submit();
                Ext.Msg.alert("Info", "Success");
               }
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:08:26.707

我不想成为向你爆料的人，但 Sencha Touch 2 不支持 Android 3.x。只有 2.x 和 4.x。可以在这里找到一个快速的论坛讨论：

[http://www.sencha.com/forum/showthread.php?186178-Phonegap-1.5-Sencha-Touch-2-has-problems-on-android-3.0](http://www.sencha.com/forum/showthread.php?186178-Phonegap-1.5-Sencha-Touch-2-has-problems-on-android-3.0)

不过，您的语法看起来不错。

# asp.net - 用户控件在声明下隐藏其他 HTML

> ID：11561132
> 
> 赞同：0
> 
> 时间：2012-07-19T12:43:08.020
> 
> 标签：asp.net

我的项目下有用户控制，里面有下一个有效的 HTML 代码

```
<div class="myClass">
   <div>text bla bla</div>
</div> 
```

我有 CSS`myClass`

```
.myClass
{
    display:none;
} 
```

在 aspx 页面上，我有下一个代码

```
//my control
<uc:Spinner ID="Spinner1" runat="server" MinValue=0 MaxValue=10 />
//other HTML page
<div>
....
</div> 
```

但是当我加载这个页面时，我希望所有 HTML 代码都可见，但里面的 html 除外，`Spinner1`但所有页面数据都是隐藏的。如果我将 contol 包装到 div 标签，例如

```
<div>
  <uc:Spinner ID="Spinner1" runat="server" MinValue=0 MaxValue=10 />
</div> 
```

一切正常。

为什么会这样？

# iphone - 我应该为我的视图控制器使用 singelton 吗？

> ID：11561135
> 
> 赞同：1
> 
> 时间：2012-07-19T12:43:19.047
> 
> 标签：iphone, objective-c, ios, ipad, design-patterns

我有一个要从我的应用程序中的不同屏幕显示的视图。我不想从每个屏幕分配和初始化视图。我认为这可以使用两种方法来完成：

1) 在 App Delegate 中初始化视图并从所有屏幕访问相同的视图。（**注意**：我不想在窗口上添加视图，因为我的应用程序只支持横向，这将导致大量意大利面条代码来管理视图方向。）

2）改为使视图单例

现在，关于单例模式总体上是好是坏的争论很多。另外，我知道将单例用于视图控制器被认为是[个坏主意](https://stackoverflow.com/questions/9842221/make-uiviewcontroller-a-singleton)。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:50:50.330

使用单例并不是一个坏主意，它实际上是一种可靠的模式，允许在整个应用程序生命周期中存储快速访问的数据。`NSUserDefaults`,`NSFileManager`和`NSNotificationCenter`许多其他 Apple 默认类使用单例模式。如果您的视图占用了太多内存（例如，它上面有很多繁重的图形资源），那么您应该有一个类在您每次调用它时创建该视图并将其加载到内存中一段时间如果你的视图是轻量级的，你应该静态地创建它，并使用单例类在整个应用程序的生命周期中保持它的活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:17:11.543

单例是现代的全局变量，所以除非绝对必要，否则我会尽量避免使用它们。在移植到 Carbon 时，使用 Apple 的低内存全局变量会导致各种问题。

如果您正在维护库，请注意每个库都会有一个单例实例，因此您需要小心谁在访问它们。我在 Loki 单例实现 (C++) 中遇到了这个问题，尽管 Objective-C 单例也会有同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T21:29:48.967

> 我有一个要从我的应用程序中的不同屏幕显示的视图。我不想从每个屏幕分配和初始化视图。

*为什么*不想根据需要创建视图？视图使用大量内存：

*   非视网膜 iPhone 上的半屏视图 (240*320) 仅用于像素就需要 300KB。

*   视网膜显示器上的相同视图需要 1.2MB

仅出于这个原因，仅在您真正需要时分配您的共同视图似乎是一个非常好的主意。当视图不显示时，挂在视图上没有任何好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:03:15.703

使用单例或使用应用程序委托的属性是完成相同事情的等效方法。也可以使用传递给所有“相关方”的通用结构。

你选择哪一个取决于你——“理想”的选择取决于具体情况。

但是，要小心以数十或数百个单例结束——这通常表明您的设计没有经过深思熟虑。

# html - html/css 用于数学矩阵周围的括号——更喜欢轻量级

> ID：11561137
> 
> 赞同：7
> 
> 时间：2012-07-19T12:43:25.343
> 
> 标签：html, math, matrix

我正在用html写一些数学。我想以小巧轻便的方式来做。这就是我到目前为止所拥有的。它使矩阵很好，但是有没有办法可以做一个通常在矩阵周围看到的括号？

```
For example, if <b>A</b> is the matrix
<br>
<br>
<div align=center>
    <table>
        <tr>
            <td>1+3i</td>
            <td>2+i</td>
            <td>10</td>
        </tr>
        <tr>
            <td>4-3i</td>
            <td>5</td>
            <td>-2</td>
        </tr>
    </table>
</div>
<br> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-19T12:50:05.083

**演示：http:** [//jsfiddle.net/NQ6ww/38/](http://jsfiddle.net/NQ6ww/38/)

通过 CSS 使用伪元素`:before`来`:after`模拟方括号。

```
 .matrix {
        position: relative;
    }
    .matrix:before, .matrix:after {
        content: "";
        position: absolute;
        top: 0;
        border: 1px solid #000;
        width: 6px;
        height: 100%;
    }
    .matrix:before {
        left: -6px;
        border-right: 0;
    }
    .matrix:after {
        right: -6px;
        border-left: 0;
    }
```

```
<div align=center>
    <table class="matrix">
        <tr>
            <td>1+3i</td>
            <td>2+i</td>
            <td>10</td>
        </tr>
        <tr>
            <td>4-3i</td>
            <td>5</td>
            <td>-2</td>
        </tr>
    </table>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:30:02.010

基于 MathJax 的解决方案（使用[jsfiddle](http://jsfiddle.net/7wFZg/)）：

```
<script src=
"http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
\[\begin{bmatrix}
1+3\mathrm{i}  & 2+\mathrm{i} & 10\\
4-3\mathrm{i} & 5 & -2
\end{bmatrix}\] 
```

[使用MathJax](http://www.mathjax.org/)在网页上显示数学公式似乎越来越普遍。上面的例子使用了 LaTeX 版本的方法。MathJax 是基于客户端 JavaScript 的，但是这个缺点可能被它的好处所抵消。

使用`\bmatrix`生成带括号的矩阵。根据 ISO 80000-2，矩阵的主要符号使用括号；为此，请`\pmatrix`改用。

我曾经`\mathrm{i}`按照标准生成非斜体的“i”。许多数学家在这里仍然偏爱斜体，可以通过使用`i`来实现，因为默认情况下，LaTeX 使标识符斜体。请注意，LaTeX 会自动在运算符周围应用适当的间距，并将连字符“-”变为减号。

# ruby-on-rails - 类型转换 ActiveRecord 模型虚拟属性

> ID：11561141
> 
> 赞同：16
> 
> 时间：2012-07-19T12:43:31.787
> 
> 标签：ruby-on-rails, activerecord

我有一个带有一些属性和一个虚拟属性的模型。此虚拟属性用于在创建表单中制作复选框。

```
class Thing < ActiveRecord::Base
  attr_accessor :foo
  attr_accessible :foo
end 
```

由于该字段是表单中的复选框，因此该`foo`属性将接收`'0'`或`'1'`作为值。由于以下代码，我希望它是一个布尔值：

```
class Thing < ActiveRecord::Base
  attr_accessor :foo
  attr_accessible :foo

  before_validation :set_default_bar

  private

  def set_default_bar
    self.bar = 'Hello' if foo
  end
end 
```

这里的问题是即使在`foo`is时条件也会为真`'0'`。我想使用 ActiveRecord 类型转换机制，但我发现这样做的唯一方法如下：

```
class Thing < ActiveRecord::Base
  attr_reader :foo
  attr_accessible :foo

  before_validation :set_default_bar

  def foo=(value)
    @foo = ActiveRecord::ConnectionAdapters::Column.value_to_boolean(value)
  end

  private

  def set_default_bar
    self.bar = 'Hello' if foo
  end
end 
```

但我觉得那样做很脏。有没有更好的选择而不重写转换方法？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T21:43:30.547

您在原始帖子中的解决方案对我来说似乎是最好的解决方案。

```
class Thing < ActiveRecord::Base
  attr_reader :foo
  def foo=(value)
    @foo = ActiveRecord::ConnectionAdapters::Column.value_to_boolean(value)
  end
end 
```

如果你想稍微清理一下，你总是可以创建一个帮助方法来`foo=`为你定义你的 writer 方法，使用`value_to_boolean`.

我可能会创建一个带有调用方法的模块，`bool_attr_accessor`以便您可以将模型简化为如下所示：

```
class Thing < ActiveRecord::Base
  bool_attr_accessor :foo
end 
```

似乎 ActiveModel 应该为我们提供类似的东西，以便虚拟属性更像“真实”（ActiveRecord-persisted）属性。每当您有一个从表单提交的布尔虚拟属性时，这种类型转换是必不可少的。

也许我们应该向 Rails 提交一个补丁......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-18T17:25:48.643

在 Rails 5 中，您可以使用`attribute`方法。此方法在此模型上定义具有类型的属性。如果需要，它将覆盖现有属性的类型。

```
class Thing < ActiveRecord::Base
  attribute :foo, :boolean
end 
```

*`attribute`注意：在从数据库加载的模型上，rails 5.0.0中此功能的行为不正确。因此使用 rails 5.0.1 或更高版本。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:29:12.933

查看[`validates_acceptance_of`](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_acceptance_of)代码（单击**Show source**）。他们通过与“0”进行比较来实现它。

我以这种方式在注册表中使用它：

```
class User < ActiveRecord::Base
  validates_acceptance_of :terms_of_service
  attr_accessible :terms_of_service
end 
```

* * *

如果你真的想从字符串等转换，你可以使用这个：

```
def foo=(value)
  self.foo=(value == true || value==1 || value =~ (/(true|t|yes|y|1)$/i)) ? true:false
end 
```

或者为类添加类型转换方法`String`并在模型中使用它：

```
class String
 def to_bool
   return true if self == true || self =~ (/(true|t|yes|y|1)$/i)
   return false if self == false || self.blank? || self =~ (/(false|f|no|n|0)$/i)
   raise ArgumentError.new("invalid value for Boolean: \"#{self}\"")
 end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:16:17.110

为什么你不这样做：

```
def foo=(value)
  @foo = value
  @bar = 'Hello' if value == "1"
end 
```

# java - 类在泛型接口中实现自身是一种好习惯吗？

> ID：11561144
> 
> 赞同：6
> 
> 时间：2012-07-19T12:43:43.823
> 
> 标签：java, generics

为问题标题道歉，我不能轻易地用语言表达。

我刚刚在一些代码中遇到了这个：

```
public class MyClass implements Message<MyClass> {...} 
```

我理解它的作用，但我以前从未见过以这种方式声明的类。

我看到的缺点是 now`MyClass`是一个 Message 并且需要包含与其主要目的无关的已实现方法。

我看到的一个优点（除了它减少了我需要编写的其他类的数量）是，对于诸如`Comparable`,`MyClass`会知道如何将自己与其他实例进行比较，这反过来会产生更简洁的代码。

这是好习惯吗？有什么经验法则吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T12:53:37.147

这或多或少是在 Java 中拥有一个接口的唯一方法，该接口带有引用实现类本身的方法。因此，例如，您可能会编写一个二叉树节点接口：

```
interface TreeNode<N extends TreeNode<N>> {
  N getLeftChild();
  N getRightChild();
  void setLeftChild(N node);
  void setRightChild(N node);
} 
```

然后你有像

```
class TreeNodeWithInt extends TreeNode<TreeNodeWithInt> {
  int value;
  TreeNodeWithInt leftChild;
  TreeNodeWithInt rightChild;
  public TreeNodeWithInt getLeftChild() { return leftChild; }
  public void setLeftChild(TreeNodeWithInt newLeft) { leftChild = newLeft; }
  ...
} 
```

如果我们没有`N`类型参数，您将被迫编写不安全的代码，例如

```
class TreeNodeWithInt extends TreeNode {
  int value;
  TreeNodeWithInt leftChild;
  TreeNodeWithInt rightChild;

  public void setLeftChild(TreeNode node) {
    // note the dangerous cast!
    leftChild = (TreeNodeWithInt) node;
  }
} 
```

这里的关键问题是，当接口描述方法的输入和返回类型时，不允许引用实现接口的类的类型。因此，您包含一个“自我”泛型类型参数。这是广泛使用泛型的代码中相对常见的习惯用法。

正如您已经正确识别的那样，它经常与`Comparable`特定一起使用，因为您*应该*只能将对象与相同类型的其他对象进行比较。实际上，`Collections.sort`被指定为`List<T>`where `T extends Comparable<? super T>`，这意味着它*至少*与 type 的其他值`T`相当，但也可能与其他值相当。*`T`*

 *（最后，正如你所料——因为这是实现这种行为的唯一方法，所以它不是“好”或“坏”的做法。也就是说，该技术的目标是避免编写在没有警告的情况下编译但可以结束的方法up throwing `ClassCastException`，这本身就是一个好习惯。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:50:12.123

它既不是“好做法”也不是“坏做法”。

真正的问题是它是否准确地模拟了您想要实现的目标。在某些情况下会，在其他情况下不会。

如果“元模式”的特定使用导致不需要和/或无意义的方法，那么你有一个强有力的案例表明它不是正确的解决方案。

> 有什么经验法则吗？

如果它在特定用例中不起作用，请不要在该用例中使用它:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:02:33.753

虽然我的示例是用 C# 表达的，但它可以转换为 Java，并且可以作为一个有用的习惯用法，用于为类执行常见任务，尤其是对于域类。也就是说，这既不是好的做法，也不是坏的做法。

```
class Product :  IEquatable<Product>, ICloneable<Product>, IComparable<Product> 
```

或在 Java 中

```
class Product implements IEquatable<Product>, ICloneable<Product>, IComparable<Product> 
```

在这个例子中，我可以定义一个产品，它知道如何检查自身是否与另一个产品相等、克隆自身（可能以通用的可重用方式）、比较自身等等。

我经常在代码生成中使用类似上面的东西，将尽可能多的泛型放在根级别，并在叶级别扩展更具体的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:02:57.233

好问题，正如 Stephen C 所提到的，这既不是好的做法，也不是坏的做法。其实我你的描述也不是很准确。这不是一个类实现自己的情况，而是一个类说它是它要实现的参数化接口的参数。

```
public class MyClass implements Message<MyClass> {...} 
```

这实际上意味着 Message 是一个“参数化”接口，这意味着接口本身接受一个参数。在这种情况下，参数恰好是实现参数化类的同一个类。但它可能是别的东西。想象一下：

```
public class UserDAO implements DAO<User> {...} 
```*

# c# - 如何使用 LINQ 和 JSON 格式的输出查询数据集

> ID：11561145
> 
> 赞同：1
> 
> 时间：2012-07-19T12:43:44.923
> 
> 标签：c#, json, linq, dataset, linq-to-dataset

**我在 WCF 服务中有两个类：**

```
[DataContract]
public class item
{
    [DataMember]
    public string categoryid
    {
        get;
        set;
    }
    [DataMember]
    public string title
    {
        get;
        set;
    }
}
[DataContract]
public class Employee
{
    [DataMember]
    public string Id
    {
        get;
        set;
    }
    [DataMember]
    public string Name
    {
        get;
        set;
    }       
} 
```

我正在使用 LINQ 从数据集中获取数据：

```
public List<Employee> GetCities()
{ 
    var em = ((from DataRow dr in ds.Tables["City"].Rows
        select new
        {
            Id = dr["intCityId"].ToString(),
            Name = dr["strTitle"].ToString()                          
        }).Select(x => new Employee() { Id = x.Id, Name = x.Name}).ToList());
} 
```

现在我通过返回这个值来获取 JSON 数据。此外，我也从项目类中获得了值，但现在我想将列表数据转换为 JSON 格式，如下所示：

```
{"content":{"em" :[{ "id" : "1","Name" : "name"},{ "id" : "2","Name" : "name2"}],
"item":[{"category":"Sports","Title":"Football"},{"category":"Sports1","Title":"Football2"}]}} 
```

意思是我想将这两个类结果合并为一个，但上述格式是干净的 JSON 格式

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:53:32.263

您还可以将匿名对象序列化为 JSON。

例子：

```
var cities  = GetCities();
var employees = GetEmployees();
return new JsonResult { Data = new { Content = new { Employees = employees, Cities = cities } } }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:50:57.067

定义一个包含员工列表和项目列表的新对象内容。填充对象并通过 JSON 序列化程序对其进行序列化。

# jquery - struts 1.x表单上的jQuery提交功能

> ID：11561147
> 
> 赞同：1
> 
> 时间：2012-07-19T12:43:46.147
> 
> 标签：jquery, struts, form-submit

jQuery 提交依赖于具有 id 的表单。使用 struts `html:form`，您无法定义 id，只能定义名称。

```
$('form[name="uploadForm"]').submit(function() { 
     alert("submitting");
     // $('form[name="uploadForm"]').ajaxSubmit();
     return false; 
}); 
```

我试过这个，但警报永远不会出现。有任何想法吗？可能的情况是使用`ajaxSubmit`真正的 AJAX 表单提交。但我现在只是在测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:45:32.113

尝试：

```
$('form[name=uploadForm]').submit(function() { 
  alert("submitting");
  // $('form[name=uploadForm]').ajaxSubmit();
  return false; 
}); 
```

# xml - 使用 xslt 从 xml 复制两个节点

> ID：11561148
> 
> 赞同：-1
> 
> 时间：2012-07-19T12:43:53.580
> 
> 标签：xml, xslt, xslt-2.0

我有一个输入 XML 如下

输入 XML

```
<description-page>
    <noted>12000 </noted>
    <noted>15000</noted>
    <noted>NOTE</noted>
</description-page>
<idescription-note>
<noted>12000</noted>
<noted>15000</noted>
<noted>ENG CHG</noted>
</idescription-note> 
```

我想我的输出为

```
<sample>
<input>
    <noted>12000</noted>
    <noted>12000</noted>
</input>
<input>
    <noted>15000</noted>
    <noted>15000</noted>
</input>
<input>
    <noted>NOTE</noted>
    <noted>ENG CHG</noted>
</input>
</sample> 
```

所以这里每个 description-page (noted) 都需要 idescription-note (noted) 元素

我现在正在做的是在 xslt

```
<xsl-template match="description-page | idescription-note> 
```

这就是我尝试 xslt 的方式，但我并没有在如何匹配两个节点方面遇到困难。

请在这里指导我。

问候卡西克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:57:20.830

您可以使用来同步和节点`position()`的相对位置，如下所示：`description-page``idescription-note`

```
<xsl:template match="description-page">
    <sample>
        <xsl:for-each select="noted">
            <input>
                <xsl:variable name="position" select="position()" />
                <noted>
                    <xsl:value-of select="//description-page/noted[$position]/text()"/>
                </noted>
                <noted>
                    <xsl:value-of select="//idescription-note/noted[$position]/text()"/>
                </noted>
            </input>
        </xsl:for-each>
    </sample>
</xsl:template> 
```

**编辑**以下内容也可以在没有 for-each 的情况下实现这一点

```
<xsl:template match="description-page">
    <sample>
        <xsl:apply-templates select="noted"/>
    </sample>
</xsl:template>

<xsl:template match="noted">
    <input>
        <xsl:variable name="position" select="position()" />
        <noted>
            <xsl:value-of select="./text()"/>
        </noted>
        <noted>
            <xsl:value-of select="//idescription-note/noted[$position]/text()"/>
        </noted>
    </input>
</xsl:template>

<!--Suppress the description-page tree entirely-->
<xsl:template match="idescription-note">
</xsl:template> 
```

我没有尝试过使用大型 xml，但使用了您的示例

*   foreach：样式表执行时间：94.91 毫秒
*   应用模板：样式表执行时间：94.93 毫秒

这么多？性能方面的一件事是将`//idescription-note`路径替换为该节点的真实完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:08:36.373

假设输入是

```
<root>
<description-page>
    <noted>12000 </noted>
    <noted>15000</noted>
    <noted>NOTE</noted>
</description-page>
<idescription-note>
<noted>12000</noted>
<noted>15000</noted>
<noted>ENG CHG</noted>
</idescription-note>
</root> 
```

然后是样式表

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:variable name="id-notes" select="//idescription-note/noted"/>

<xsl:template match="root">
  <sample>
    <xsl:apply-templates select="description-page/noted"/>
  </sample>
</xsl:template>

<xsl:template match="description-page/noted">
  <input>
    <xsl:copy-of select="."/>
    <xsl:variable name="pos" select="position()"/>
    <xsl:copy-of select="$id-notes[$pos]"/>
  </input>
</xsl:template>

</xsl:stylesheet> 
```

输出

```
<sample>
   <input>
      <noted>12000 </noted>
      <noted>12000</noted>
   </input>
   <input>
      <noted>15000</noted>
      <noted>15000</noted>
   </input>
   <input>
      <noted>NOTE</noted>
      <noted>ENG CHG</noted>
   </input>
</sample> 
```

# ios - NSMutableDictionary 无法正常工作

> ID：11561149
> 
> 赞同：0
> 
> 时间：2012-07-19T12:44:17.377
> 
> 标签：ios, nsmutabledictionary

目前我在使用 NSMutableDictionary 时遇到了一个非常奇怪的问题：相同的代码，相同的数据，但键值对对象的不同结果。

我的字典使用用户定义的类对象作为键，值是对象数组。

这是构建字典的代码：

```
_designs = [[NSMutableDictionary alloc] init];
for (Hierarchy * hier in downloadedHierarchies.objects)
{
    NSLog(@"Hierarchy [%d - %d - %@]", hier.designId, hier.hierarchyId, hier.hierarchyName);
    Design * aDesign = [[Design alloc] initWithId:hier.designId withName:hier.designName];

    NSMutableArray *array = ([_designs objectForKey:aDesign] == nil) ? [[NSMutableArray alloc] init] : (NSMutableArray *)[_designs objectForKey:aDesign];
    NSLog(@"Design %d has %d of hierarchies", aDesign.designId, array.count);

    [array addObject:hier];

    [_designs setObject:array forKey:aDesign];
    NSLog(@"Design %d now has %d of hierarchies", aDesign.designId, [[_designs objectForKey:aDesign] count]);
} 
```

问题是： - 我的测试数据只有 1 个设计和 3 个层次结构。每次运行应用程序时，我的字典中都会得到不同的结果。有时我得到 2 个键值对，有时是 3 个。甚至键都来自相同的设计（相同的 designId），并且层次结构分散在这些键值对中。

一些注意事项：

*   设计已经实现了 NSCopying 和 isEqual 并且测试正常

*   Hierarchy 也实现了 NSCopying

*   调试这些代码行给出正确的结果

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:06:38.943

您还需要在 Design 对象中提供 isEqual 和 hash。这取自 NSObject 的协议描述：

isEqual：返回一个布尔值，指示接收者和给定对象是否相等。（必需的）

*   (BOOL)isEqual:(id)anObject 参数 anObject 要与接收者进行比较的对象。返回值 如果接收者和对象相等，则返回 YES，否则返回 NO。

讨论 该方法定义了实例相等的含义。例如，一个容器对象可能将两个容器定义为相等，如果它们对应的对象都对 isEqual: 请求响应为 YES。有关使用此方法的示例，请参阅 NSData、NSDictionary、NSArray 和 NSString 类规范。

如果两个对象相等，则它们必须具有相同的哈希值。如果您在子类中定义 isEqual: 并打算将该子类的实例放入集合中，那么最后一点尤其重要。确保您还在子类中定义哈希。

# java - 想在正则表达式的帮助下替换标签中的值属性吗？

> ID：11561150
> 
> 赞同：0
> 
> 时间：2012-07-19T12:44:19.633
> 
> 标签：java, regex, eclipse, string, replace

我有一个 jsf 标签：

```
<h:graphicImage styleClass="iconButton" id="expandImage" onclick="toggleFilter();" onmouseout="onMouseOutExpandButton();" onmouseover="onHoverExpandButton();" value = "./resources/images/allFilter_idle.gif" style="cursor:pointer; margin-top : 6px; margin-bottom: 6px; margin-right: 3px;"> </h:graphicImage> 
```

我想替换属性的值`value`并将属性名称更改`styleClass`为“类”？是否可以通过`regex`.

任何帮助，将不胜感激。

PS我是正则表达式的菜鸟，所以自己无法弄清楚。

**编辑：**

我在 Eclipse 中做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:50:57.130

只要您的价值中没有报价，您就可以这样做：

```
Find        : <h:graphicImage ([^>]*)value=".*?"([^>]*)>
Replace with: <h:graphicImage \1value="new value"\2> 
```

对于 styleClass

```
Find        : <h:graphicImage ([^>]*)styleClass=([^>]*)>
Replace with: <h:graphicImage \1class=\2> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:56:12.980

这是 JSF 标签，当页面被发送作为响应时，JSF 库会将其从 styleClass 转换为 class。

您可以使用以下方法在 javascript 中更改它的值：

```
document.getElementById("expandImage").value="some value"; 
```

# linux - .so 搜索路径

> ID：11561157
> 
> 赞同：13
> 
> 时间：2012-07-19T12:44:44.747
> 
> 标签：linux

我是 Linux 新手（来自 Windows 背景）。我想了解在运行时如何加载共享对象（.so 文件）的详细信息。根据[http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)文件 /etc/ld.so.conf 配置目录以在运行时搜索 .so 文件。然而，下面显示的实验似乎表明情况并非如此。/usr/local/lib 在 /etc/ld.so.conf.d 中的 .conf 文件之一中，但是当我的 .so 在 /usr/local/lib 中时，在运行时找不到它。相反，/etc/ld.so.conf*没有*配置 /usr/lib，但是当我的 .so 在 /usr/lib 中时，它*会*在运行时找到。

我错过了什么？

谢谢，戴夫

```
davids@ds-ub64-7:/$ # Display the .so search path configured in /etc/ld.so.conf
davids@ds-ub64-7:/$ cat /etc/ld.so.conf
include /etc/ld.so.conf.d/*.conf
davids@ds-ub64-7:/$ cat /etc/ld.so.conf.d/*.conf
/usr/lib/mesa
/usr/lib32/mesa
/usr/lib32/alsa-lib
/usr/lib/alsa-lib
# libc default configuration
/usr/local/lib
# Multiarch support
/lib/x86_64-linux-gnu
/usr/lib/x86_64-linux-gnu

davids@ds-ub64-7:/$ # libsotest.so.1 is in /usr/local/lib
davids@ds-ub64-7:/$ ls -la /usr/local/lib/libsotest*
lrwxrwxrwx 1 root   root     14 2012-07-19 08:24 /usr/local/lib/libsotest.so -> libsotest.so.1
lrwxrwxrwx 1 root   root     18 2012-07-19 08:24 /usr/local/lib/libsotest.so.1 ->     libsotest.so.1.0.1
-rwxr-xr-x 1 davids davids 7952 2012-07-19 08:13 /usr/local/lib/libsotest.so.1.0.1

davids@ds-ub64-7:/$ # But when I run an executable that refrs to libsotest.so.1, the loader     doesn't find it.
davids@ds-ub64-7:/$ /projects/sotest/exe/sotestexe
/projects/sotest/exe/sotestexe: error while loading shared libraries: libsotest.so.1: cannot     open shared object file: No such file or directory

davids@ds-ub64-7:/$ # Configure loader to display the paths it's searching...it's     searching /usr/lib but not /usr/local/lib
davids@ds-ub64-7:/$ export LD_DEBUG=lib
davids@ds-ub64-7:/$ /projects/sotest/exe/sotestexe
warning: debug option `lib' unknown; try LD_DEBUG=help
/projects/sotest/exe/sotestexe: error while loading shared libraries: libsotest.so.1: cannot     open shared object file: No such file or directory
davids@ds-ub64-7:/$ export LD_DEBUG=libs
davids@ds-ub64-7:/$ /projects/sotest/exe/sotestexe
      6691: find library=libsotest.so.1 [0]; searching
      6691:  search cache=/etc/ld.so.cache
      6691:  search     path=/lib/tls/x86_64:/lib/tls:/lib/x86_64:/lib:/usr/lib/tls/x86_64:/usr/lib/tls:/usr/lib/x86_64:/usr/    lib:/lib/x86_64-linux-gnu/tls/x86_64:/lib/x86_64-linux-gnu/tls:/lib/x86_64-linux-    gnu/x86_64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu/tls/x86_64:/usr/lib/x86_64-linux-    gnu/tls:/usr/lib/x86_64-linux-gnu/x86_64:/usr/lib/x86_64-linux-gnu        (system search path)
      6691:   trying file=/lib/tls/x86_64/libsotest.so.1
      6691:   trying file=/lib/tls/libsotest.so.1
      6691:   trying file=/lib/x86_64/libsotest.so.1
      6691:   trying file=/lib/libsotest.so.1
      6691:   trying file=/usr/lib/tls/x86_64/libsotest.so.1
      6691:   trying file=/usr/lib/tls/libsotest.so.1
      6691:   trying file=/usr/lib/x86_64/libsotest.so.1
      6691:   trying file=/usr/lib/libsotest.so.1
      6691:   trying file=/lib/x86_64-linux-gnu/tls/x86_64/libsotest.so.1
      6691:   trying file=/lib/x86_64-linux-gnu/tls/libsotest.so.1
      6691:   trying file=/lib/x86_64-linux-gnu/x86_64/libsotest.so.1
      6691:   trying file=/lib/x86_64-linux-gnu/libsotest.so.1
      6691:   trying file=/usr/lib/x86_64-linux-gnu/tls/x86_64/libsotest.so.1
      6691:   trying file=/usr/lib/x86_64-linux-gnu/tls/libsotest.so.1
      6691:   trying file=/usr/lib/x86_64-linux-gnu/x86_64/libsotest.so.1
      6691:   trying file=/usr/lib/x86_64-linux-gnu/libsotest.so.1
      6691: 
/projects/sotest/exe/sotestexe: error while loading shared libraries: libsotest.so.1: cannot     open shared object file: No such file or directory
davids@ds-ub64-7:/$ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T13:00:00.100

*/usr/lib*和*/lib*是硬编码的 IIRC。

*在ld.conf.so*中添加 PATH是不够的，您必须使用[ldconfig](https://linux.die.net/man/8/ldconfig)重新生成缓存和链接。

您可以使用 . 检查缓存中的库`ldconfig -p`。

# parameters - ANTLR3 运算符，带参数

> ID：11561160
> 
> 赞同：1
> 
> 时间：2012-07-19T12:45:03.140
> 
> 标签：parameters, antlr, operator-keyword, antlr3

首先，我知道标题可能听起来有点奇怪，但我不知道该怎么称呼它。如果有人比我有更好的想法，请编辑。

现在，问题：

*   我有一个很老的语法，我需要适应一个新的请求
*   旧形式如下所示：

    “第一个文本”*“第二个文本”；

这基本上是在做一些文本操作。没关系。假设它连接了文本。这正在生成一个非常基本的树，其中文本为叶子，运算符为根

*   现在，新的请求是通过指定我需要连接的字母数量来“参数化”连接操作。新表单应如下所示：

    "第一个文本" *(3) "第二个文本";

这意味着它必须从 the 中获取前 3 个字符，从 the`first text`中获取前 3 个字符`second text`

*   此外，新语法也需要与旧格式兼容（参数/括号不是强制性的）
*   我已经实现了一个`CommonTreeAdaptor`类，它为每个节点生成一个我自己的类（`QNode`）的实例。一种工厂。我可以向指定处理操作符的对象添加新属性。假设它是`QNodeStar`。

*   语法如下所示：

    语法 QGrammar；

    令牌 { COMPUTEOP = '*'; }

    ```
    ... 
    ```

    public topexpr : expr SEMI -> ^(ROOT expr) ;

    expr：暴击（计算^暴击）*；

    片段 CRIT : '"' ('a'..'z'|'A'..'Z'|'0'..'9')+ '"' ;

    COMPUTE : (COMPUTEOP | COMPUTEOP LPAREN! INT RPAREN!) ;

当然，它比这更复杂，只是在这里放一些东西让你对我所拥有的有所了解。

所以，我的问题是，我怎样才能使 COMPUTE 定义中的 INT 参数“消失”，并自动将`move`其添加到标准节点（`QNodeStar`

**更新：**我想如何获得树木的例子：

**1：** “a”*“b”

```
    *
   / \
 "a" "b"

```

*   这就是树现在的样子。有了这个，事情就很简单了：值总是叶子；

**2：** “c”*（3）“d”？

```
    *
   / \
 “c” “d”

```

*   我知道这棵树看起来与“旧的”（＃1）相同。我想要这样的原因有两个：向后兼容（参数的默认值为 1），并且我不想仅为此运算符更改树执行方法，以避免`if (node == 'star') traverse1() else traverse2()`在树中迭代节点时出现类似情况。我在想有某种方法——我还不能确定——“吃”参数（`3`）并以类似的方式将其作为值传递给`QNodeStar`根中的对象验证方法。我成功地让这棵树看起来像一棵愚蠢的树，但这对我没有太大帮助：

```
     *
   / | \
 "c" 3 "d"

```

# wpf - WPF MVVM XAML 设计 - VS 2010 XAML 设计器 - 设计时数据

> ID：11561163
> 
> 赞同：0
> 
> 时间：2012-07-19T12:45:08.370
> 
> 标签：wpf, xaml, prism

我们正在开发 WPF 应用程序。我们已将 View 的开发委托给将使用 VS 2010 XAML 设计器进行设计的设计人员。我们已经进入了 MVVM 模式。我们期待 XAMl 设计人员设计屏幕/视图，并根据屏幕开始构建 ViewModel。但是设计人员在查看没有设计时数据的视图布局时遇到了问题。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:56:42.660

您可以按照以下指南进行操作：

*   [Blend、VS2010 和 WPF/Silverlight 中的 DesignData MVVM 支持](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/08/27/designdata-mvvm-support-in-blend-vs2010-and-wpf-silverlight.aspx)
*   [Visual Studio 2010 Beta2 中的 d:DesignInstance、d:DesignData](https://www.codeproject.com/Articles/43335/d-DesignInstance-d-DesignData-in-Visual-Studio)

您开始将以下命名空间声明添加到您的 XAML 文件：

```
mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
```

您可以设置在运行时被忽略的属性和属性。

例如，`d:DataContext`使您能够设置`d:DataContext`独立于运行时`DataContext`属性的设计时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:57:24.950

首先，给设计师的是Microsoft Expression Blend，而不是Visual Studio。这就是它的目的。

其次，在 Blend 中，设计人员可以创建用于显示的虚拟数据，但是，由于尚未定义数据类型（视图模型），他们**可以**在没有数据的情况下编辑视图和数据模板。

另外，尝试在 Google 中搜索：表达式混合示例数据
- 您将收到很多相关结果。

# javascript - 检索变量值而不是该变量的名称

> ID：11561170
> 
> 赞同：1
> 
> 时间：2012-07-19T12:45:54.447
> 
> 标签：javascript, json

我正在尝试向 json 结构添加一个值，例如：

```
saveChamp.test = {"type":"","text":""}; 
```

没关系，但我想要“测试”，例如：`var test = $('blablabla').val();`

在我的示例中，它不会获取 test 的值，但会创建一个名为 test 的条目。这不是我想要的。

帮助 ？

编辑 ：

```
var saveChamp = new Object();
var test = "Field1";
saveChamp.test = {"type":"ok","text":"kok"}; 
```

我希望该脚本在 saveChamp 中创建一个名为 Field1 的条目（ma 变量测试的值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:58:16.060

啊，在这种情况下，在您编辑之后，您需要什么就很明显了。

javascript中的每个对象都可以被视为一个关联数组，并且可以通过变量的值来调用数组的属性。

```
var saveChamp = new Object();
var test = "Field1";
saveChamp[test] = {"type":"ok","text":"kok"}; 
```

这与以下内容相同：

```
saveChamp["Field1"] = {"type":"ok","text":"kok"}; 
```

这将做你想要的，因为字段的名称作为变量字符串传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:52:30.870

不确定我是否完全理解你，因为这段代码没有多大意义。

JSON 表示[Javascript Object Notation](http://www.json.org/js.html)。

它用于通过纯文本传输变量。您不需要这个，因为您可以通过代码传输数据。

前任。1：

```
saveChamp.test = $('blablabla')).val(); 
```

将使对象 saveChamp，有一个属性测试，它有一个值：$('blablabla')).val();

前任。2：

```
saveChamp.test = {"type":"blablabla","text":$('blablabla')).val()}; 
```

有望从 saveChamp 的测试属性中创建一个对象。这实际上意味着：

```
saveChamp.test.type = "blabalbla"; 
saveChamp.test.text = $('blablabla')).val(); 
```

**编辑**

我做了一个新的答案，但把这个留在这里，因为它们都非常不同，而且都很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:55:06.707

尝试使用括号表示法：

```
var test = $('blablabla').val();
saveChamp[test] = {
    "type": "",
    "text": ""
}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T12:56:21.167

我看到您如何尝试设置您的值，并且设置为 JSON 对象，但如果那是您使用的确切代码，则缺少“#”来通过 Id 获取元素，并且有一个额外的括号；

特雷使用：

```
var test = $('#blablabla').val(); 

saveChamp.test = {"type": "blablabla","text": test}; 
```

# java - 如何在 Android 中填充可扩展的列表视图

> ID：11561172
> 
> 赞同：0
> 
> 时间：2012-07-19T12:46:03.110
> 
> 标签：java, android, adapter, expandablelistview, classnotfoundexception

我第一次使用 Expandable ListView，我在这里找到了一个例子：

[http://android-adda.blogspot.ro/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.ro/2011/06/custom-expandable-listview.html)

我经历了它，根据我的需要对其进行了调整，但是应用适配器时应用程序会崩溃。我复制粘贴了整个示例，甚至使用了给定的字符串数组，我认为我可能在那方面做错了。

不过，错误是一样的。

下面是我的活动的代码 + 其中包含的自定义适配器类。出于显而易见的原因，我已经将诸如 onClickListeners 之类的不相关的内容移至其他元素。

```
///////////////////////////////////////////////
    public String[] parentArray = {
           "India",
           "Australia",
           "England",
           "South Africa"
         };
    public String[][] childArray = {
               {
                   "Sachin Tendulkar",
                   "Raina",
                   "Dhoni",
                   "Yuvi"
                    },
                    {
                   "Ponting",
                   "Adam Gilchrist",
                   "Michael Clarke"
                    },
                    {
                   "Andrew Strauss",
                   "kevin Peterson",
                   "Nasser Hussain"
                    },
                    {
                   "Graeme Smith",
                   "AB de villiers",
                   "Jacques Kallis"
                    }
                     };
    ///////////////////////////////////////////////

    public void onCreate(Bundle savedInstanceState) {   
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewschedule);

        getViews();
        setSpinnerAdapter();
        listview.setAdapter(new ExpAdapter(this));

    }

    public class ExpAdapter extends BaseExpandableListAdapter {

      private Context myContext;
      public ExpAdapter(Context context) {
       myContext = context;
      }
      public Object getChild(int groupPosition, int childPosition) {
       return null;
      }

      public long getChildId(int groupPosition, int childPosition) {
       return 0;
      }

      public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {

       if (convertView == null) {
        LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.childrow, null);
       }

       TextView tvPlayerName = (TextView) convertView.findViewById(R.id.tvPlayerName);
       tvPlayerName.setText(childArray[groupPosition][childPosition]);

       return convertView;
      }

      public int getChildrenCount(int groupPosition) {
       return childArray[groupPosition].length;
      }

      public Object getGroup(int groupPosition) {
       return null;
      }

      public int getGroupCount() {
       return parentArray.length;
      }

      public long getGroupId(int groupPosition) {
       return 0;
      }

      public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {

       if (convertView == null) {
        LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.parentrow, null);
       }

       TextView tvGroupName = (TextView) convertView.findViewById(R.id.tvGroupName);
       tvGroupName.setText(parentArray[groupPosition]);

       return convertView;
      }

      public boolean hasStableIds() {
       return false;
      }

      public boolean isChildSelectable(int groupPosition, int childPosition) {
       return true;
      }
     }
} 
```

在此下方，您的日志主要显示“找不到类”。

```
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.View.layout(View.java:11180)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.ViewGroup.layout(ViewGroup.java:4203)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.View.layout(View.java:11180)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.ViewGroup.layout(ViewGroup.java:4203)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1468)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2418)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.os.Looper.loop(Looper.java:137)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.app.ActivityThread.main(ActivityThread.java:4340)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at java.lang.reflect.Method.invokeNative(Native Method)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at java.lang.reflect.Method.invoke(Method.java:511)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at dalvik.system.NativeStart.main(Native Method)
07-19 12:34:09.760: E/AndroidRuntime(2889): Caused by: java.lang.ClassNotFoundException: android.view.linearlayout
07-19 12:34:09.760: E/AndroidRuntime(2889):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
07-19 12:34:09.760: E/AndroidRuntime(2889):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678) 
```

我的 getViews() 方法：

```
private void getViews(){
        font = Typeface.createFromAsset(getAssets(), "arialnb.ttf");

        groupInput = (EditText) findViewById(R.id.editText1);
        groupInput.setTextColor(getResources().getColor(R.color.lightGrey));
        groupInput.setText("Grupa: (ex: 10201b)");

        titleText = (TextView) findViewById(R.id.textView1);
        titleText.setTypeface(font);

        editDefault = (Button) findViewById(R.id.button2);

        homeImage = (ImageView) findViewById(R.id.imageView2);

        daySpinner = (Spinner) findViewById(R.id.spinner1);

        listview = (ExpandableListView) findViewById(R.id.expandableListView1);
        listview.setVerticalFadingEdgeEnabled(false);
    } 
```

整个 ViewSchedule.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/aceLightBlue"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="30dp"
            android:background="@color/aceDarkBlue" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:src="@drawable/orarbuton" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_marginLeft="15dp"
                android:layout_toRightOf="@+id/imageView1"
                android:text="@string/aceOrar"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:src="@drawable/homebuton" />
        </RelativeLayout>

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="@string/editDefault" />

        <RelativeLayout
            android:id="@+id/relativeLayout2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/relativeLayout1"
            android:layout_marginTop="14dp" >

            <LinearLayout
                android:layout_width="0px"
                android:layout_height="0px"
                android:focusable="true"
                android:focusableInTouchMode="true" >
            </LinearLayout>

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true" />

            <EditText
                android:id="@+id/editText1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/spinner1"
                android:ems="10" />

        </RelativeLayout>

        <ExpandableListView
            android:id="@+id/expandableListView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/relativeLayout2" >

        </ExpandableListView>

    </RelativeLayout>

</LinearLayout> 
```

任何我目前缺少的任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:35:07.357

我解决了这个问题，感谢[蒂姆](https://stackoverflow.com/users/507810/tim)，他有正确的想法让我清理项目。

我有这个应用程序的 2 个单独的布局文件夹，一个横向文件夹和一个纵向文件夹。无论出于何种原因，parentrow.xml 中肖像文件夹中的 TextView 路径被破坏。

我所要做的就是在 GUI 编辑器中单击“更改为 TextView”，它工作正常。

值得一提的是，Eclipse 没有发出这个错误信号，我只有在开始手动浏览 xml 文件时才知道它。

# jakarta-ee - 显示帮助图标以在 Liferay 上显示 portlet HELP MODE

> ID：11561173
> 
> 赞同：0
> 
> 时间：2012-07-19T12:46:13.953
> 
> 标签：jakarta-ee, liferay, portlet, jsr286

我正在尝试有一个示例`Liferay` `portlet`，在`HELP MODE`.

在我的 portlet.xml 文件（相关部分）中：

```
<supports>
    <mime-type>text/html</mime-type>
    <portlet-mode>help</portlet-mode>
    <portlet-mode>view</portlet-mode>
</supports> 
```

在我扩展`GenericPortlet`（相关）的课程中：

```
@Override
protected void doHelp(RenderRequest request, RenderResponse response) throws PortletException, IOException
{
    PrintWriter writer = response.getWriter();
    writer.write("Do Help");
} 
```

但是，当我在 Liferay 下启动我的 portlet 时，我不明白为什么**没有显示帮助图标**。

![在此处输入图像描述](../Images/10aff13cff350f52f5f501eab0e95243.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:41:03.470

**重新启动服务器**就可以了……重新部署没有用。

可能是一些缓存问题

# php - 在 PHP 中使用 UTF8 的 hmtlspecialchars 时未显示变音符号

> ID：11561178
> 
> 赞同：0
> 
> 时间：2012-07-19T12:46:34.417
> 
> 标签：php, mysql, utf-8

我有一个到目前为止我无法解决的问题，我将不胜感激。

我有以下简单的代码：

```
<?php
header("Content-Type: text/html; charset=utf-8");

$body .= "begrüßen zu dürfen";

echo htmlentities($body);
echo htmlentities($body, ENT_COMPAT,'UTF-8');

?> 
```

第一个回显有效，而第二个返回一个空字符串。为什么会这样？

变量 $body 是固定字符串（如“ `begrüßen zu dürfen`”）和一些来自 UTF-8 mysql 数据库的文本的组合。如果我想正确显示数据库中的文本，我们称它为 $data，我需要使用`htmlentities($data, ENT_COMPAT,'UTF-8');`，所以我想我可以用它`htmlentities($body, ENT_COMPAT,'UTF-8')`来显示整个组合文本（部分来自数据库，部分来自固定字符串）。但是，这不起作用。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:55:17.270

第二种情况返回一个空白字符串，因为它在该字符串中遇到“无效的代码单元序列”。以下确实有效并返回除 unicode 字符之外的所有内容。

```
echo htmlentities($body, ENT_QUOTES | ENT_IGNORE ,"UTF-8"); 
```

[ENT_IGNORE](http://php.net/manual/en/function.htmlentities.php)默默地丢弃无效的代码单元序列，而不是返回一个空字符串。

您遇到无效序列的原因是您的 php 文件的编码不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:51:25.010

检查您的文件是否保存为 UTF8，这对我来说恰到好处：

```
header( "Content-Type: text/html; charset=utf-8" );
$body = "begrüßen zu dürfen";
echo htmlentities( $body ); 
```

输出：

```
begrüßen zu dürfen 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:56:34.273

您必须将 php 文件保存为 UTF-8，而不是 CP1252。

要测试您是否正确执行此操作，请尝试：

```
<?php
header("Content-Type: text/plain; charset=utf-8");
die("öäå"); 
```

如果这显示了奇怪的字符，则有问题的文件未正确保存为 UTF-8。

请注意，如果您正确使用 UTF-8，则不需要使用 htmlentities。

# sql-server-2008 - node.js 中的 node-sqlserver 出现问题

> ID：11561180
> 
> 赞同：6
> 
> 时间：2012-07-19T12:46:41.030
> 
> 标签：sql-server-2008, node.js

我在 node.js 中使用 Microsoft 的 node-sqlserver 连接到我网络上计算机上的数据库时遇到问题。我在 Windows 2008 服务器上使用 sql server 2008。我在同一域内的不同机器上远程运行我的 node.js。我认为问题与连接字符串有关。

```
var sql = require('node-sqlserver');
var conn_str = 'Driver={SQL Server Native Client 10.0};Server=(win08-srv);Database=DB;Trusted_Connection={Yes}'; 
```

此外，应该有一个用户名和密码才能进入数据库，但这不在节点模块的示例连接字符串中。

```
//open the DB connection
sql.open(conn_str, function (err, conn) {
    if (err) {
        console.log("Error opening the connection!");
    return;
    } else {
        console.log('Connection successful!');
        return;
    }
}); 
```

运行时总是导致打印`Error opening the connection!`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:52:31.850

我有同样的问题。为了诊断问题，您需要做的第一件事是更改示例代码，如下所示：

```
sql.open(conn_str, function (err, conn) {
    if (err) {
        console.log("Error opening the connection! Error was: " + err);
    return;
} 
```

完成上述操作后，我获得了有关该错误的更多信息。我的错误是：

```
"Error opening the connection! Error: IM002: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified" 
```

这基本上意味着您在连接字符串中指定了错误的驱动程序。我通过将驱动程序版本从 11.0 更改为 10.0 解决了我的问题。您可以通过以下方式查看本地安装了哪些驱动程序（如果您在 Windows 上，我假设您是）：

控制面板 > 管理工具 > 数据源 (ODBC) > 驱动程序（选项卡）。

查找 SQL Server Native Client 并查看版本号。如果您没有安装此驱动程序，则需要下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T12:26:58.623

我能够连接的方式是通过更改我的连接字符串。我不得不将其更改为说`Trusted_Connection{No}`，然后提供登录凭据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:57:33.570

试试这个连接字符串，让你指定一个用户名和密码组合显然适合你的设置

var conn_str = "Driver={SQL Server Native Client 10.0};Server=TEXAS;Database=NodeMassive;Uid=WebDev;Pwd=developer1;";

# git - 你如何使用 git 完成在文件夹更改时显示我当前的 git 分支？

> ID：11561182
> 
> 赞同：0
> 
> 时间：2012-07-19T12:46:42.597
> 
> 标签：git, bash

目前，如果我从已经包含 git 项目的文件夹启动 bash，则此方法有效。

```
PS1="${debian_chroot:+($debian_chroot)}\[$BPurple\]\u\[$BGreen\]@\[$BCyan\]\h\[$BGreen\]: \[$BBlue\]\w\[$Yellow\]`__git_ps1`\[$Green\] \$ \[$White\]" 
```

我的问题是，如果我`cd`进入一个 git 文件夹，什么也不会发生。然后，如果我从 git repo 开始，（（master）确实出现了，如果我`cd`到其他任何地方，（master）仍然出现在我的提示中。

所以，`PS1`变量没有更新。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:29:58.293

Try this:

```
PS1='${debian_chroot:+($debian_chroot)}[$BPurple]\u[$BGreen]@[$BCyan]\h[$BGreen]: [$BBlue]\w[$Yellow]$(__git_ps1)[$Green] \$ [$White]' 
```

I simply replaced the double quotes with single quotes, and wrapped the call to `__git_ps1` in a command substitution. If that doesn't work (I haven't included parameter expansion in my prompt for a while), try

```
PS1="..."'$(__git_ps1)'"..." 
```

where the first '...' is everything prior to '__git_ps1', and the second '...' is everything after. Basically, three strings concatenated together, with the first and third in double quotes and the second in single quotes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:03:15.433

尝试在几乎使用变量的地方用简单引号替换双引号

```
PS1='${debian_chroot:+($debian_chroot)}'"[$BPurple]\u[$BGreen]@[$BCyan]\h[$BGreen]: [$BBlue]\w[$Yellow]__git_ps1[$Green] \$ [$White]" 
```

# c# - 找出方法调用的参数值（我不拥有的静态类）。

> ID：11561184
> 
> 赞同：0
> 
> 时间：2012-07-19T12:46:46.230
> 
> 标签：c#, interceptor

是否可以在静态类中获取函数调用的参数值？我不拥有该课程，因此无法编辑代码。并且覆盖不适用于静态类。但是，我可以毫无问题地使用自己的参数调用该函数。

在运行期间，程序将使用我需要找出的特定参数调用该函数。

我读到使用拦截器是可能的，但是有不同的方法可以做到这一点。我应该选择哪一个来解决这个问题？

我会非常感谢一个小例子或教程:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:09:13.337

您所要求的通常称为面向方面的拦截（或 AOP 拦截）。特别是，听起来您想要做的是面向方面的日志记录。有关这方面的更多信息，请参阅[.net 中使用 AOP 进行日志记录](https://stackoverflow.com/questions/4665454/logging-with-aop-in-net)

根据您的部署方案（例如，如果您正在部署到最低权限的环境，它可能无法工作），您可以对拦截执行的操作是有限的。您通常使用 AOP 和拦截框架。PostSharp 就是一个这样的框架。

幸运的是，有一些关于 AOP 和 PostSharp 的优秀 Pluralsight 课程： [http ://www.pluralsight-training.net/microsoft/Courses/TableOfContents/aop](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents/aop)

# android - android- 将 facebook 新闻提要转换成字符串

> ID：11561188
> 
> 赞同：0
> 
> 时间：2012-07-19T12:47:32.890
> 
> 标签：android, facebook, facebook-graph-api

我尽我所能找到一种简单的方法来在我的 android 应用程序中获取已登录 Facebook 用户的最新新闻提要。使用 Twitter 的屏幕名称获取最近的推文很简单。有没有类似的东西。我正在使用从[这里下载的标准 Facebook sdk](https://github.com/facebook/facebook-android-sdk/)

也可以查看在 facebook 网站中添加了我的移动应用程序的用户的新闻提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:22:26.067

[这个链接](https://stackoverflow.com/questions/7291127/get-all-facebook-feeds-from-my-wall-and-using-post-method-using-fbconnect)帮助了我，但由于某种原因，我无法得到其他人写到当前用户墙上的内容。仅包括当前用户创建的那些。

如果你知道如何克服这个问题，请告诉我。

这个论坛上有一些帖子（比如[这个](https://stackoverflow.com/questions/4230731/read-wall-of-a-facebook-page-by-using-the-graph-api-possible)）说我需要提供页面ID，但我不明白我从哪里得到这样的东西。

# java - 输入验证电话号码

> ID：11561189
> 
> 赞同：0
> 
> 时间：2012-07-19T12:47:38.237
> 
> 标签：java, regex, user-input, validation

我正在尝试找到一种方法来对输入电话号码进行字段限制。示例： `France (country code 33) local number 0142687984`应输入为 `33142687984`

而不是例如 `00331 42687984, 0033 (1) 42687984, +33 1 42 68 79 84` 等

基本上，数字不应该以 0 开头，不应该包含空格或符号，如 + ( ) 等，并且应该至少有 9 位数字

我一直在尝试寻找 deluge 脚本的示例，但没有成功。请帮忙

到目前为止我有这个：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    // TODO Auto-generated method stub

    String nom = request.getParameter("nom");
    String prenom = request.getParameter("prenom");
    String phone = request.getParameter("phone");
    String adressefacturation = request.getParameter("adressefacturation");
    String ZIPfacturation = request.getParameter("ZIPfacturation");
    String paysfacturation = request.getParameter("paysfacturation");
    String adresseexpedition = request.getParameter("adresseexpedition");
    String ZIPexpedition = request.getParameter("ZIPexpedition");

    String paysexpedition = request.getParameter("paysexpedition");
    String CardNumber = request.getParameter("CardNumber");
    String CardDateOfExpiry = request.getParameter("CardDateOfExpiry");

    String password = request.getParameter("password");         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:54:01.950

“基本上数字不应该以 0 开头，不应该包含空格或符号，如 + ( ) 等，并且应该至少有 9 位数字”所以我假设你只接受以 1-9 数字开头的数字，然后只能包含其他数字（至少 8 个）。

这就是你想要的尝试这个正则表达式`[1-9][0-9]{8,}`

```
System.out.println("123456789".matches("[1-9][0-9]{8,}"));//true
System.out.println("12345678".matches("[1-9][0-9]{8,}"));//false
System.out.println("012345678".matches("[1-9][0-9]{8,}"));//false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:53:40.857

使用正则表达式匹配 `/^33\d{9}$/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:06:59.760

要计算一些可能性，您必须拆分输入的字符串（在测试“.. (1) ..”之后）：

```
 // String[] litteralPhone = request.getParameter("phone").split(" ") ;
    final String litteralPhone = "0033 (119999999990";
    final int i = litteralPhone.indexOf(")");
    if (i > 0) {
        if (litteralPhone.substring(i).length() > 8) {
            System.out.println(litteralPhone.replaceAll(
                "^[0]{1,}|[ ]{0,}\\(|\\)[ ]{0,}", ""));
        } else {
            System.out.println("error with ()");
        }
    } else {
        // suppress trailing ( 
        final String[] tabNum = litteralPhone.replaceAll("\\(|\\)", "").split(" ");

        switch (tabNum.length) {
            case 1 : // 003311236549879879
               tabNum[0] = tabNum[0].replaceAll("^[0]{1,}", "");
               if (tabNum[0].length() < 10) { // tune this lenght
                      System.out.println("error 1");
                }
                break;
            case 2 : // 033 01234567890
                tabNum[0] = tabNum[0].replaceAll("^[0]{1,}", "");
                tabNum[1] = tabNum[1].replaceAll("^[0]", "");
                if (tabNum[1].length() < 8) {
                    System.out.println("error 2");
                }
                break;
            case 3 : // +33 1 012346577979
                tabNum[0] = tabNum[0].replaceAll("^[0]{1,}", "");
                tabNum[2] = tabNum[2].replaceAll("^[0]", "");
                if (tabNum[2].length() < 8) {
                    System.out.println("error 3");
                }
                // add all cases here
            default :
                System.out.println("not a good phone number");
                break;
        }
        final StringBuilder sb = new StringBuilder();
        for (final String string : tabNum) {
            sb.append(string);
        }
        System.out.println(sb.toString());
    } 
```

# asp.net-mvc - 如何实现“防火墙规则”风格的基于时间的 ACL 实施？（C#，SQL 服务器）

> ID：11561190
> 
> 赞同：1
> 
> 时间：2012-07-19T12:47:39.257
> 
> 标签：asp.net-mvc, acl, servicestack, rule

我正在使用 ServiceStack，但我不知道我的方式是否适用于 ServiceStack 权限支持的这个要求。

现在规则表结构是：

*   目标角色
*   目标用户 ID
*   否认允许
*   动作类型枚举
*   开始日期
*   结束日期
*   开始时间
*   结束时间

*   RunningEnum ([Flags] OnlyOnce=1,Monday=2,....,Sunday=128)

规则：所有管理员不能 (DENY) crateUser (ACTIONTYPEENUM.CREATEUSER) 每周一 (RUNNINGENUM=2) 在 12-17 小时之间 (STARTHOUR=12,ENDHOUR=17)

所以我必须解决这些规则（如果可以的话，我必须绑定 ServiceStack 权限），我的路上是否有任何问题或 C# 中有更好的框架或规则解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:25:45.713

ServiceStack 的[RequireRole 和 RequiredPermissions](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)属性让您可以标记服务需要的角色/权限。RequireRole的[实现](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/RequiredRoleAttribute.cs#L32)只调用[IAuthSession.HasRole()](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/IAuthSession.cs#L26)（或 IAuthSession.HasPermission()）来确定用户是否具有指定的角色。

当您注册自己的[CustomUserSession](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/App_Start/AppHost.cs#L171)时，您可以实现上述方法来完全满足您的需要。

另一种方法是忽略现有的角色/权限支持，只需创建自己的[请求过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)，并在您要验证的每个请求之前执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:53:18.200

There is no framework for ACL implemantation in C#. You have to write your own! So do I :)

# html - div 的动态宽度（类似表格）

> ID：11561192
> 
> 赞同：0
> 
> 时间：2012-07-19T12:47:41.370
> 
> 标签：html, css

我想用 CSS 做以下事情：

```
name1111 | x | name222  | dateeee | x
name11   | x | name22   | dateee  | x
name111  | x | name2222 | dateeee | x
name1    | x | name22   | daeee   | x 
```

我希望每一列都是最大宽度。我的意思是，没有固定的宽度，但最长的内容会设置它。怎么做？以前用桌子很容易，但现在似乎不可能

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T12:50:05.043

那是一张桌子，所以用一张。

不推荐使用表是一个神话 - 将表用于页面 LAYOUT 被认为是不好的 - 将表用于 PRESENTING DATA 是使用正确的工具完成正确的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:53:21.713

您可以使用 :`float: left;`和`text-align: left`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:58:51.193

使用 CSS 可以做到这一点，但它比使用简单的表格要复杂得多。在这种情况下，一张桌子绝对没问题。想象一下，如果你用 word 制作海报，你不会使用表格进行布局，但如果你有一张数据表来显示，你就会这样做。一样

# java - 如何让 Axis2 处理数组？

> ID：11561194
> 
> 赞同：2
> 
> 时间：2012-07-19T12:47:43.553
> 
> 标签：java, xml, soap, nusoap

我正在从 PHP NuSoap 实现中检索数据，它返回的数据如下：

```
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">

<SOAP-ENV:Body>

<ns1:getHashCodeAllTablesResponse xmlns:ns1="urn:getSchemaForRhythms">

<return xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType=":[121]">

<item xsi:type="xsd:">

<md5Hash xsi:type="xsd:string">e294967afe9834bf8477252ac0c3686e</md5Hash>

<tableName xsi:type="xsd:string">SYSCONGLOMERATES</tableName>

<isView xsi:type="xsd:string">false</isView>

<viewDefinition xsi:type="xsd:string">null</viewDefinition>

</item> 
```

我认为这是问题所在：`<return xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType=":[121]">`

当我将 Axis2 soap 客户端指向该服务时，我收到此错误：

`org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unsupported type http://schemas.xmlsoap.org/soap/encoding/ Array`

这是我正在尝试做的一个非常简单的java示例：

```
public static void main(String[] args) {
    // TODO code application logic here
    try{
        GetSchemaForRhythmsStub stub = new GetSchemaForRhythmsStub(null,"http://test.test.com/sqlSchemaService/schemaBuilder.php" );
        GetSchemaForRhythmsStub.GetHashCodeAllTablesE response2= new GetSchemaForRhythmsStub.GetHashCodeAllTablesE();
        stub.getHashCodeAllTables(response2);
    }catch(Exception ex)
    {
       System.out.println(ex.toString());

    }
} 
```

我找不到任何与 Array 数据类型和 Axis 相关的文档。我错过了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:31:25.770

您缺少的是 SOAP Encoding Array 类型非常老派（即在 XML Schema 出现之前它们曾经使用过的类型），而 Axis2 不喜欢它。您可以尝试将数据绑定从 ADB（默认）切换到 XMLBeans。您如何执行此操作取决于您如何解析 WSDL。这是我发现的几个参考：

[SOAP 编码和 Axis2](http://ssagara.blogspot.com/2011/10/soap-encoding-and-axis2.html)

[Axis2 的 wsdl2java 在 RPC/Encoded 样式 Web 服务上失败](https://stackoverflow.com/questions/1357483/axis2s-wsdl2java-fails-on-rpc-encoded-style-web-services)

通常，查找“soap 编码数组axis2”以查找有关您正在做什么的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:02:38.183

我遇到了同样的问题，生成的代码在表示数组的 XMLBean 上没有设置方法。为了解决这个问题，我直接在生成的类上使用了 XMLBean API。

以下代码片段演示了将元素添加到生成的数组类。就我而言，我必须返回一个包含两个值的字符串数组。

```
 ArrayOfXsdString strArray = syncResponse.addNewProcessSyncReturn();

             /* set the size of the array */
    strArray.setArrayType("soapenc:string[2]");

            /* get the XMLCursor object and go to the end of the XML represented by this bean */   
    XmlCursor cur = strArray.newCursor();
    cur.toEndToken();

            /* processSyncReturn is the XML element name of the array */        
    cur.toChild("processSyncReturn");
    cur.insertElementWithText("processSyncReturn","this is array element 1");
    cur.insertElementWithText("processSyncReturn","this is array element 2"); 
```

在响应 SOAP 消息中生成以下内容

```
<processSyncReturn soapenc:arrayType="soapenc:string[2]">
<processSyncReturn>this is array element 1</processSyncReturn>
<processSyncReturn>this is array element 2</processSyncReturn>
</processSyncReturn> 
```

侯赛因

[http://nsinfra.blogspot.in](http://nsinfra.blogspot.in)

# c# - 将值从其他表单传递到活动表单

> ID：11561195
> 
> 赞同：-4
> 
> 时间：2012-07-19T12:47:49.160
> 
> 标签：c#

> **可能的重复：**
> [将对象从表单传递到表单](https://stackoverflow.com/questions/781945/passing-object-from-form-to-form)

大家晚上好。我尝试搜索谷歌，并没有找到适合我需要的东西。我在将值从第二种形式传递到第一种活动形式时遇到问题。从第二种形式我想将 textBox_Dbname.text 的值传递给活动形式（始终活动） treeViewDbList.Nodes.Add() 但我不能。我不知道如何解决这种问题。我仍然是编程的初学者，需要学习更多。请帮我。先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T12:50:23.527

您可以访问需要值的表单的属性吗？如果是，您可以创建如下属性：

```
public string TbText
{
   get{return textBox_Dbname.Text;}
} 
```

# groovy - Gradle - 为 Groovy 应用程序创建一个胖 JAR

> ID：11561199
> 
> 赞同：3
> 
> 时间：2012-07-19T12:48:08.970
> 
> 标签：groovy, jar, gradle

我有一个使用 Gradle 构建的 Groovy 应用程序。我可以使用 正确运行它`gradle run`，但我想创建一个胖 JAR 以使部署更容易。我已添加说明

```
jar {
    dependsOn configurations.runtime
    from { configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) } }
} 
```

到我的`build.gradle`.

似乎生成了一个包含大量依赖项的 JAR，但是当我尝试使用 运行它时`java -jar myproject.jar`，出现错误

```
Exception in thread "main" java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V
    at groovy.lang.MetaClassImpl.loadReflector(MetaClassImpl.java:1652)
    at groovy.lang.MetaClassImpl.generateReflector(MetaClassImpl.java:1615)
    at groovy.lang.MetaClassImpl.checkInitialised(MetaClassImpl.java:1532)
    at groovy.lang.MetaClassRegistry.getMetaClass(MetaClassRegistry.java:140)
    at groovy.lang.MetaClassImpl.addNewStaticMethodsFrom(MetaClassImpl.java:1300)
    at groovy.lang.MetaClassImpl.addInheritedMethods(MetaClassImpl.java:201)
    at groovy.lang.MetaClassImpl.checkInitialised(MetaClassImpl.java:1529)
    at groovy.lang.MetaClassRegistry.checkInitialised(MetaClassRegistry.java:201)
    at groovy.lang.MetaClassRegistry.<init>(MetaClassRegistry.java:113)
    at groovy.lang.MetaClassRegistry.<init>(MetaClassRegistry.java:89)
    at org.codehaus.groovy.runtime.Invoker.<init>(Invoker.java:102)
    at org.codehaus.groovy.runtime.InvokerHelper.<clinit>(InvokerHelper.java:80)
    at org.codehaus.groovy.runtime.typehandling.DefaultTypeTransformation.castToBoolean(DefaultTypeTransformation.java:156)
    at org.codehaus.groovy.runtime.typehandling.DefaultTypeTransformation.booleanUnbox(DefaultTypeTransformation.java:65)
    at mycompany.myproject.Main.main(Main.groovy:6) 
```

**更多详细信息，如果他们可以提供帮助**

作为参考，这里是完整的`build.gradle`：

```
apply plugin: 'groovy'

project.group = 'mycompany.myproject'
archivesBaseName = 'myproject'
project.version = '0.1'
manifest.mainAttributes('Main-Class' : 'mycompany.myproject.Main')

apply plugin: 'application'
mainClassName = 'mycompany.myproject.Main'

repositories {
    mavenCentral()
}

buildscript {
    apply from: 'https://github.com/valkolovos/gradle_cobertura/raw/master/repo/gradle_cobertura/gradle_cobertura/1.2/coberturainit.gradle'
}

jar {
    dependsOn configurations.runtime
    from { configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) } }
}

dependencies {
    groovy group: 'commons-cli', name: 'commons-cli', version: '1.0'
    groovy group: 'org.codehaus.groovy', name: 'groovy', version: '1.8.0'
    compile group: 'log4j', name: 'log4j', version: '1.2.9'
    compile group: 'org.codehaus.groovy.modules.http-builder', name: 'http-builder', version: '0.5.2'
    compile group: 'groovy', name: 'groovy-xmlrpc', version: '0.3'
    testCompile group: 'junit', name: 'junit', version: '4.0'
}

run {
    if (project.hasProperty('args')) {
        args project.args.split('\\s+')
    }
}

cobertura {
    coverageSourceDirs = sourceSets.main.java.srcDirs + sourceSets.main.groovy.srcDirs
} 
```

`Main`错误似乎所在的类的来源是

```
package mycompany.myproject

class Main {
    static main(args) {
        def env = args ? args[0] : 'prod'
        new Coordinator().run(env)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:14:50.667

听起来好像包含了错误的 ASM 版本，虽然我不知道为什么。无论如何，通常使用它`groovy-all`来代替更简单，更安全`groovy`，它也应该可以解决这个问题。

您不应该使用 Groovy 1.8.0，而是使用最新的次要版本 (1.8.6)。

# javascript - 选择带有 1000 个选项的标签 - 性能下降

> ID：11561200
> 
> 赞同：4
> 
> 时间：2012-07-19T12:48:11.050
> 
> 标签：javascript, jquery-chosen

我正在使用一个名为 Chosen 的插件，它基本上将搜索添加到一个选择的 html 对象。我从 ajax 页面加载结果。但是，我在选择标签上附加了很多选项——大约一千个。也许它是选择的插件，但有 1000 个选项似乎有点滞后。

这将如何影响性能以及解决方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-30T01:06:13.613

而不是`<select>`你可以使用`<input>`+ `<datalist>`，它可以很好地处理 1000 多个选项。

[jsfiddle](https://jsfiddle.net/klesun/mfgteptf/)

```
<input type="text" list="your-data-list"/>
<datalist id="your-data-list">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    ...
    <option value="9999">Option 9999</option>
</datalist> 
```

# python - 多个进程从同一个管道异步读取

> ID：11561201
> 
> 赞同：3
> 
> 时间：2012-07-19T12:48:13.500
> 
> 标签：python, linux

如何将数据从一个管道馈送到三个不同的进程？

```
nulfp = open(os.devnull, "w")

piper = Popen([
    "come command",
    "some params"
], stdout = PIPE, stderr = nulfp.fileno())

pipe_consumer_1 = Popen([
    "come command",
    "some params"
], stdin = piper.stdout, stderr = nulfp.fileno())

pipe_consumer_2 = Popen([
    "come command",
    "some params"
], stdin = piper.stdout, stderr = nulfp.fileno())

pipe_consumer_3 = Popen([
    "come command",
    "some params"
], stdin = piper.stdout, stderr = nulfp.fileno())

pipe_consumer_1.communicate()
pipe_consumer_2.communicate()
pipe_consumer_3.communicate()
piper.communicate() 
```

如果我运行上面的代码，它将产生一个损坏的文件。这意味着管道使用者可能没有从吹笛者那里读取完整的输出。

这个可以正常工作，但速度要慢得多：

```
nulfp = open(os.devnull, "w")

piper_1 = Popen([
    "come command",
    "some params"
], stdout = PIPE, stderr = nulfp.fileno())

piper_2 = Popen([
    "come command",
    "some params"
], stdout = PIPE, stderr = nulfp.fileno())

piper_3 = Popen([
    "come command",
    "some params"
], stdout = PIPE, stderr = nulfp.fileno())

pipe_consumer_1 = Popen([
    "come command",
    "some params"
], stdin = piper_1.stdout, stderr = nulfp.fileno())

pipe_consumer_2 = Popen([
    "come command",
    "some params"
], stdin = piper_2.stdout, stderr = nulfp.fileno())

pipe_consumer_3 = Popen([
    "come command",
    "some params"
], stdin = piper_3.stdout, stderr = nulfp.fileno())

pipe_consumer_1.communicate()
pipe_consumer_2.communicate()
pipe_consumer_3.communicate()
piper_1.communicate()
piper_2.communicate()
piper_3.communicate() 
```

有什么建议可以使第一个代码片段与第二个代码片段的工作方式相同吗？如果我得到第一种工作方法，该过程将在 1/3 的时间内完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:28:24.610

这仅使用单字节“块”，但您明白了。

```
from subprocess import Popen, PIPE

cat_proc = '/usr/bin/cat'

consumers = (Popen([cat_proc], stdin = PIPE, stdout = open('consumer1', 'w')),
             Popen([cat_proc], stdin = PIPE, stdout = open('consumer2', 'w')),
             Popen([cat_proc], stdin = PIPE, stdout = open('consumer3', 'w'))
)

with open('inputfile', 'r') as infile:
   for byte in infile:
       for consumer in consumers:
           consumer.stdin.write(byte) 
```

测试时，消费者输出文件与输入文件匹配。

编辑：这是从具有 1K 块的进程中读取的。

```
from subprocess import Popen, PIPE

cat_proc = '/usr/bin/cat'

consumers = (Popen([cat_proc], stdin = PIPE, stdout = open('consumer1', 'w')),
             Popen([cat_proc], stdin = PIPE, stdout = open('consumer2', 'w')),
             Popen([cat_proc], stdin = PIPE, stdout = open('consumer3', 'w'))
)

producer = Popen([cat_proc, 'inputfile'], stdout = PIPE)

while True:
    byte = producer.stdout.read(1024)
    if not byte: break
    for consumer in consumers:
        consumer.stdin.write(byte) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:46:33.010

管道中的数据只能读取一次，一旦读取就会从缓冲区中删除。这意味着所有消费者进程都只能看到数据的随机部分，当它们组合在一起时，将提供完整的流。当然，这对你来说不是很有用。

您可以让生产者进程写入`subprocess.PIPE`，从这个管道中读取块到缓冲区，然后将此缓冲区写入所有消费者进程。这意味着您必须自己完成所有缓冲区处理。使用它来为您完成这项工作可能更容易`tee`——我将很快发布一些示例代码。

# jquery - 如何处理 JSON 响应并从中输出 html？

> ID：11561205
> 
> 赞同：0
> 
> 时间：2012-07-19T12:48:17.787
> 
> 标签：jquery, django, json

到目前为止，我一直使用 django 模板系统来执行这种操作。只需使用 html 模板响应 ajax 请求。

现在我正在尝试实现自动完成搜索功能，我想以 json 格式将响应发送回客户端。

一切都很好，并设置到这一点。这是我的 jQuery 部分：

```
$(document).ready(function(){
    $("#id_q").keyup(function(){ //the form text input
        autocomplete(this.value);
    });

    function autocomplete(inputString) {
        if(inputString.length == 0) {
            $('#autocomplete').fadeOut();
        }
        else {
            $.get("/autocomplete/", {q: ""+inputString+""}, function(data) {
                $('#autocomplete').fadeIn();
                $('#autocomplete').html(data);
            });
        }
    }
}); 
```

当使用 django 模板作为响应时，#autocomplete div 显示得很好，并且与 .html(data) 一样，这是因为我事先在模板中设置了 html，因为我希望它显示出来。

如何处理从服务器发送的数据（json格式）？数据看起来像这样：

```
[{'title':'titleString', 'descr':'desriptionString', 'url':'itemAbsoluteUrl'}, ..] 
```

为了获得我的#autocomplete html，例如：

```
<li><a href="data.url">data.title<br>data.descr</li> 
```

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:54:29.877

首先，为了将返回数据格式化为 JSON 对象，需要在 get 调用中指定返回类型为 json。之后，您基于 json 键值对引用数据，例如 data.results。（请注意，结果必须是 JSON 对象中的键）。

```
$.get("/autocomplete/", {q: ""+inputString+""}, function(data) {
            $('#autocomplete').fadeIn();
            $('#autocomplete').html(data.results);
}, "json"); 
```

我不确定您当前的格式是什么，但只是为了澄清一下，您可能不想通过 JSON 发送原始 HTML。相反，将 HTML 保留在您的客户端页面上，并返回一些数据来填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:40:56.773

尝试

```
var li = $('<li><a href="'+data.url+'">'+data.title+'<br/>'+data.descr+'</a></li>') 
```

然后你可以插入`li`你想要的地方，或者

```
$('#autocomplete').html('<li><a href="'+data.url+'">'+data.title+'<br/>'+data.descr+'</a></li>'); 
```

遍历结果

```
$.each(results, function(index, value){
...
}) 
```

# blackberry - 黑莓 - 如何使用具有 Windows 身份验证的 asp.net Web 服务

> ID：11561206
> 
> 赞同：0
> 
> 时间：2012-07-19T12:48:24.230
> 
> 标签：blackberry

我们正在为 5.0 及更高版本的 Blackberry Native Application 工作。

BB 应用程序必须使用用 ASP.Net 编写的 Web 服务。Web 服务受 Windows 身份验证保护。

我们正在使用 KSOAP 库从 BB 调用 Web 服务。

请让我们知道从我们的应用程序通过 Windows 身份验证需要什么。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:35:24.663

Please try following code. I am it will work with network credential password.

```
String URL = "URL"+methodName+parameterString+"deviceside=true";
connection = (HttpConnection) Connector.open(URL);
String authenticationParameter = "username"+":"+"password";
byte[] encoded = Base64OutputStream.encode(authenticationParameter.getBytes(), 0, 
authenticationParameter.length(), false, false);
connection.setRequestProperty("Authorization", "Basic "+ new String(encoded));
rc = connection.getResponseCode(); 
```

Hope help full.

# jquery - 如果 div 不包含任何文本，则隐藏它

> ID：11561211
> 
> 赞同：2
> 
> 时间：2012-07-19T12:48:56.927
> 
> 标签：jquery

如果`PageHeaderDescription`不包含文本内容，那么我想隐藏它。用jquery可以吗？

```
<div class="PageHeaderDescription">
  <h1>Accessories</h1>
  <img border="0" src="" style="cursor: pointer; display: none;" id="EntityPic621">
</div> 
```

这是 div 与文本的样子：

```
<div class="PageHeaderDescription">
  <h1>Accessories</h1>
  <img border="0" src="" style="cursor: pointer; display: none;" id="EntityPic621">
  This is the Accessories page, you can find stuff for the products!
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:13:55.287

这变得很棘手，因为我必须比我想要的更深入 DOM，但适用于您的目标：

```
$('div.PageHeaderDescription').each(function(i,e){
    var txt = '';
    for (var c = 0; c < e.childNodes.length; c++){
        if (e.childNodes[c].nodeType===3){
            txt += e.childNodes[c].data;
        }
    }
    if (txt.trim().length===0){
        $(e).hide();
    }
}); 
```

再次，hacky但有效。您必须记住，在 DOM 中甚至考虑了空格，因此仅通过“没有 nodeType===3 元素”来检查/过滤是不够的。相反，您连接所有文本，然后修剪它以删除空格并获取长度。

* * *

使用自定义选择器进行后续操作：

```
(function($){
    $.expr[':'].notext = function(obj, index, meta, stack){
        var txt = '';
        for (var c = 0; c < obj.childNodes.length; c++){
            if (obj.childNodes[c].nodeType===3){
                txt += obj.childNodes[c].data;
            }
        }
        return (txt.trim().length===0);
    };
})(jQuery);

$('div.PageHeaderDescription:notext').hide(); 
```

当然还有[工作演示](http://jsfiddle.net/3RpqE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:52:10.453

```
$("PageHeaderDescription").each(function(i, val) {
    if ($(this).text().trim() === "") {
        $(this).hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:53:59.500

```
​jQuery(document).ready(function(){

   // alert(jQuery('.PageHeaderDescription').text());

    var headerTxt = jQuery('.PageHeaderDescription h1').text();
    //警报(headerTxt);    

        if(jQuery.trim(jQuery('.PageHeaderDescription').text())==headerTxt){
        jQuery('.PageHeaderDescription').hide();
    }

});​

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T12:55:08.563

试试这个...

```
if( $('div.PageHeaderDescription').is(':empty') ) {
    // Your code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T13:40:09.633

您将需要另一个函数来仅抓取 div 内不在某些标签内的文本。当你直接使用 .text() 时，`PageHeaderDescription`你也会得到 h1 的内部文本。有关您的更多信息，`.justText()`请参见[此处！](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)

答案是：

```
jQuery.fn.justText = function() {
  return $(this).clone().children().remove().end().text();
};

$('document').ready(function(){
    if ($('.PageHeaderDescription').justText().trim().length == 0) {
      $('.PageHeaderDescription').remove(); // If you want to hide, use .hide()
    }
  }
); 
```

*PS.：帮助您在 .hide() 和 .remove() 之间进行选择*

-- [.hide() 的参考](http://api.jquery.com/hide/)

*-- [.remove() 的参考](http://api.jquery.com/remove/)*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T12:54:02.340

```
 $("#empty").click(function() {
      alert($('#myDiv').is(':empty'));
    }); 
```

或者

```
$("div:empty").hide(); 
```

或者'

您可以使用 :is 进行检查

```
if( $('#leftmenu').is(':empty') ) {
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T12:54:59.360

首先分配一个 id= 给你 Div。

```
<div class="PageHeaderDescription" id="PageHeaderDescription"> 
```

然后

```
$("#PageHeaderDescription").each(function(i, val) {
    if ($(this).text().trim() === "") {
        $(this).hide();
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T13:21:12.090

这对我有用：

```
var clone = ​$(".PageHeaderDescription").clone(true);​​​​​​​​​
clone.find('*').remove();
if (clone.text().trim() == '') $(".PageHeaderDescription").hide();
clone.remove(); 
```

# java - 限制长度的正则表达式

> ID：11561212
> 
> 赞同：0
> 
> 时间：2012-07-19T12:48:59.920
> 
> 标签：java, regex

我有一个正则表达式

```
^[\\p{L}\\d._]*\\p{L}+[\\p{L}\\d._]*$ 
```

它接受字母、字母数字和特殊字符，如 . 和 _ 。我们可以让这个正则表达式接受三个最小长度（包括字符、字母数字等）和最大 15 个（包括字符、字母数字等）

谢谢，巴拉吉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:59:46.853

要添加额外检查总长度在 3 到 15 之间，您可以使用前瞻：

```
(?=^.{3,15}$)^[\\p{L}\\d._]*\\p{L}+[\\p{L}\\d._]*$ 
```

一组表单`(?=<regex>)`检查是否`<regex>`与当前位置匹配，但不向前移动标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:51:43.710

你有没有尝试过

```
^[\p{L}\d._]*\p{L}+[\p{L}\d._]{3,15} 
```

# eclipse - 类型“JNICALL”无法解析，？

> ID：11561216
> 
> 赞同：4
> 
> 时间：2012-07-19T12:49:13.357
> 
> 标签：eclipse, android-ndk

我正在尝试在 Eclipse 中使用 NDK，但是在遵循教程时会弹出此错误，我不明白它来自哪里

这是我的 .h 文件

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_example_myproject_MainActivity */

#ifndef _Included_com_example_myproject_MainActivity
#define _Included_com_example_myproject_MainActivity
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     com_example_myproject_MainActivity
 * Method:    getMyData
 * Signature: ()Ljava/lang/String;
 */
JNIEXPORT jstring JNICALL Java_com_example_myproject_MainActivity_getMyData
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

错误 = 无法解析类型“JNICALL”

我在代码视图中也有语法错误，但这些并没有出现在 JNIEXPORT 出现的错误之间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:04:16.637

在大多数情况下，JNICALL 用于 Windows。我 99% 确定你可以添加

`#define JNICALL`

（定义为空白）

与 JNIEXPORT 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T04:54:32.973

转到项目属性-> C/C++ 常规-> 路径和符号。

1.  选择**包含选项卡**，然后单击窗口右侧的**添加按钮**
2.  从文件系统中选择**包含目录**

例如：C:\Program Files (x86)\Android\android-sdk\NDK\android-ndk-r10\platforms\android-L\arch-arm\usr\include。

它会询问您是否要重建，单击是...完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T08:41:23.620

我刚遇到这个问题，这是我的解决方案。如果您在 Linux 上使用`Java 7`，请确保已将这两个包含路径添加到您`Includes`

```
/usr/lib64/jvm/java-7-oracle/include/linux
/usr/lib64/jvm/java-7-oracle/include 
```

# c# - 是否有任何用于扭曲/扭曲图像的 .NET 工具？

> ID：11561217
> 
> 赞同：5
> 
> 时间：2012-07-19T12:49:13.353
> 
> 标签：c#, .net, image-manipulation

我希望能够以编程方式扭曲 C# 中的图像。具体来说，我想在空间上重新加权图像，以使中心像素被扩展，而外围像素所占的空间按比例减少。想想鱼眼镜头。有点。

是否有任何 .NET 工具可以做到这一点？我不介意它们是内置在 .NET 核心还是插件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:55:15.963

免责声明：我为 Atalasoft 工作

我们的免费成像 SDK DotImage Photo Free，可以做到这一点：

[http://www.atalasoft.com/free-dotnet-image-sdk](http://www.atalasoft.com/free-dotnet-image-sdk)

看`Atalasoft.Imaging.ImageProcessing.Transforms.LensTransform`。你会做类似的事情

```
AtalaImage img = new AtalaImage("file.jpg");
LensTransform cmd = new LensTransform();
cmd.Radius = 100;
cmd.Offset = new Point(100, 100); // set the center
AtalaImage img2 = cmd.Apply(img).Image; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:32:34.183

您可以使用 WPF 着色器效果轻松实现此类效果。

如果您还没有听说过它们，那么您可以在任何图像上运行 Direct3D 像素着色器效果。这将使您在实时帧率上描述的效果变得非常容易。

在许多方面，这比用 C# 或 C 编写它们更容易，因为您无需担心在图像缓冲区中处理颜色样本、范围检查和/或正确循环数据，因为所有这些都由显卡硬件。

[这是](http://channel9.msdn.com/shows/Continuum/WPFFXDemo/)一个 channel9 视频的链接，展示了 wpffx 示例库中的示例效果。

我认为“平滑放大”非常接近您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T15:23:44.653

嗯...您可以尝试使用 ImageMagick 的 API 来执行您需要的任何操作。

[http://www.imagemagick.org/script/api.php](http://www.imagemagick.org/script/api.php)

他们有两个可用的 .NET 解决方案。您应该能够调查并找到最适合您需求的一种。它们的功能之一包括广义像素失真，您可以使用它来满足您的需求。

# c# - 了解 .NET Framework 中哪些方法返回 null 的简单方法

> ID：11561221
> 
> 赞同：2
> 
> 时间：2012-07-19T12:49:30.557
> 
> 标签：c#, null, null-check

我希望能够知道哪些方法从 .NET Framework 返回 null。

例如; 当我从中调用搜索方法时`IQueryable`，如果搜索未找到任何结果，它将返回 null 或空集合。

我们学习了一些方法，但是当涉及到新方法时，我总是编写额外的代码行，这使得代码更难阅读。

有没有简单的方法来解决这个问题？

编辑：

我总是遇到这个问题是这样的：

```
List<int> ints = new List<int>(); // Suppose this is a list full of data

// I wanna make sure that FindAll does not return null
// So getting .Count does not throw null reference exception
int numOfPositiveInts = ints.FindAll(i => i > 0).Count;

// This is not practical, but ensures against null reference return
int numOfPositiveInts = ints.FindAll(i => i > 0) != null ? ints.FindAll(i => i > 0).Count : 0; 
```

第一个选项实用但不安全，而第二个选项可防止任何空引用异常但降低可读性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:51:25.067

当您安装[代码合同](http://msdn.microsoft.com/en-us/library/dd264808.aspx)时，会安装辅助程序集，为您提供大多数核心库的合同。有一个以 IntelliSense 样式显示它们的编辑器插件。

# c# - 在 C# 中转换泛型类型

> ID：11561225
> 
> 赞同：0
> 
> 时间：2012-07-19T12:49:44.433
> 
> 标签：c#, .net, generics, generic-collections

我有一个像下面这样的结构。我在返回通用集合时遇到了一些麻烦。我错过了什么？

```
class Program
{
    static void Main()
    {
          BusinessCollection businessCollection = new BusinessCollection();

          //Why this is not working because businesscollection is a GenericCollection<BusinessEntity>
          businessCollection = new GenericCollection<BusinessEntity>();

          //or neither this
         businessCollection = (BusinessCollection)new GenericCollection<BusinessEntity>();
    }
}

public class BusinessEntity
{
   public string Foo { get; set;}
}

public class BusinessCollection : GenericCollection<BusinessEntity>
{
     //some implementation here
}

public class GenericCollection<T> : ICollection<T>
{
    //some implementation here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:53:16.867

你不能做你想做的事。反过来也行。

所有`BusinessCollection`确实是，`GenericCollection<BusinessEntity>`但你不能肯定地说所有`GenericCollection<BusinessEntity>`都是`BusinessCollection`

因此，以下将起作用。

```
class Program
{
    static void Main()
    {
          GenericCollection<BusinessEntity> businessCollection = new BusinessCollection();
          //this will work
          BusinessCollection tempCollection = (BusinessCollection)businessCollection ;
    }
}

public class BusinessEntity
{
   public string Foo { get; set;}
}

public class BusinessCollection : GenericCollection<BusinessEntity>
{
     //some implementation here
}

public class GenericCollection<T> : ICollection<T>
{
    //some implementation here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:53:13.013

检查你的假设：

`businesscollection is a GenericCollection<BusinessEntity>`

是的，但是您将其声明为 type `Businesscollection`。并非全部`GenericCollection<BusinessEntity>`都是，`BusinessCollection`但这就是您要分配给`BusinessCollection`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T12:54:06.087

因为正方形是长方形，但并非所有长方形都是正方形。在这种情况下， a`BusinessCollection`是 a `GenericCollection<BusinessEntity>`，但并非所有`GenericCollection<BusinessEntity>`对象都是`BusinessCollection`对象。类型为 a 的变量`BusinessCollection`可以指向一个`GenericCollection<BusinessEntity>`对象，但反之则不行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T12:54:12.790

`businessCollections`键入为`BusinessCollection`; 它**只能**分配一个. **_** `BusinessCollection`然而，`GenericCollection<BusinessEntity>()` *不是*一个`BusinessCollection`。就像“动物”不是“狗”（但“狗”是“动物”）。

这可以在运行时或编译时进行验证。运行时选项是您的演员：

```
businessCollection = (BusinessCollection){some expression}; 
```

这是使用“动物”*可能*是“狗”测试，即检查我们正在考虑的特定动物是否实际上*是*狗。它将此检查推迟到运行时。这就是为什么这条线可以*编译*，但实际上并没有*运行*。特定的动物**从来都不**是真正的狗。

# google-analytics - 了解 Google Analytics API 已弃用

> ID：11561226
> 
> 赞同：2
> 
> 时间：2012-07-19T12:49:47.023
> 
> 标签：google-analytics, google-analytics-api

由于 GA API 的 v. 2.3 被弃用，我们的自定义 GA 应用程序在前几天坏了。我们希望在未来减轻这种情况。

当 API 的某个版本将被删除时，我们如何才能获悉？我检查了与 GA 关联的帐户中的电子邮件，但没有任何警告会发生这种情况。

问候，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:07:51.543

您可以订阅[GA 博客](http://analytics.blogspot.com/)RSS 提要和/或加入[google-analytics-api-notify](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGoQFjAA&url=http%3A%2F%2Fgroups.google.com%2Fgroup%2Fgoogle-analytics-api-notify&ei=IVILUKvfLYKK8QT8neznCg&usg=AFQjCNEKlUdGESFTlBxu869B3pwgj_goBg)组。

其中一项或两项将使您及时了解更改。

# php - cakephp 表单助手：数据未保存

> ID：11561243
> 
> 赞同：0
> 
> 时间：2012-07-19T12:50:33.980
> 
> 标签：php, cakephp

我一直在使用 CakePHP 表单助手 ( [cakephp doc](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html) ) 取得了一些成功。现在我正在尝试创建一个位于与表模型无关的视图中的表单。我跟着文档，并把它放在我的视图中：

```
<?php echo $this->Form->create('ApplicationMemberships', array(
'url' => array('controller' => 'ApplicationMemberships', 'action' => 'add'))); ?>
<fieldset >

<?php
    echo $this->Form->input('chantier_id');
    echo $this->Form->input('application_id');
    echo $this->Form->input('ponderation',array('type' => 'number'));
?>

</fieldset>
<?php echo $this->Form->end(__('Submit')); ?> 
```

我将此代码放在控制器中以获取填充字段的数据：

```
$chantiers = $this->Chantier->find('list');
    $this->loadModel('Application');
    $applications = $this->Application->find('list');
    $this->set(compact('chantiers', 'applications')); 
```

一切都很顺利：我有表格，我放了一些数据，然后我有一个闪光灯说数据已经保存。问题：数据尚未添加到数据库中。

* * *

编辑：

这是进行保存的代码：

```
 public function add() {
    if ($this->request->is('post')) {
        $this->ApplicationMembership->create();
        if ($this->ApplicationMembership->save($this->request->data)) {
            $this->Session->setFlash(__('The application membership has been saved'));
            //$this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The application membership could not be saved. Please, try again.'));
        }
    }
    $chantiers = $this->ApplicationMembership->Chantier->find('list');
    $applications = $this->ApplicationMembership->Application->find('list');
    $this->set(compact('chantiers', 'applications'));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T00:26:35.587

错误是`create('ApplicationMemberships')`.

根据 Cakephp 的约定，控制器应该是复数形式，而模型应该是单数形式。因此，为了创建关联模型的实例，我应该编写：

```
create('ApplicationMembership') 
```

# objective-c - 推送视图控制器时崩溃

> ID：11561245
> 
> 赞同：0
> 
> 时间：2012-07-19T12:50:35.993
> 
> 标签：objective-c, push

我正在尝试将变量传递给另一个视图控制器，并且我按照站点上的另一个教程进行了相应操作。问题是，segue 似乎不起作用。noteText、时间线和时间戳是`EditController`（我要发送到的控制器）中的标签。

```
- (void)editNoteAction{
    EditNoteController *editNoteController = [[EditNoteController alloc] initWithNibName:@"EditNoteController" bundle:nil];
    editNoteController.noteText.text = textString;
    editNoteController.timeline.text = famString;
    editNoteController.timestamp.text = dateString;
    [self.navigationController pushViewController:editNoteController animated:YES];
} 
```

原来的方式说我应该只使用 self 作为发件人。这给了我一个红色警告。之后我尝试过`(id)self`，`self.navigationController`但即使这些都没有留下警告，程序也崩溃了。

您对可能出现的问题有任何想法吗？

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T13:20:50.470

```
 - (void)editNoteAction
   {
    EditNoteController *editNoteController = [[EditNoteController alloc]initWithNibName:@"EditNoteController" bundle:nil];
    [self.navigationController pushViewController:editNoteController animated:YES];

   } 
```

# asp.net-mvc - 在 ASP.MVC 和 WCF 上使用企业库进行自我验证

> ID：11561249
> 
> 赞同：0
> 
> 时间：2012-07-19T12:50:50.563
> 
> 标签：asp.net-mvc, wcf, validation, enterprise-library

我有一个基于 asp.mvc 的网站，它使用 WCF 调用应用服务器。控制器收到如下请求：

```
[HttpPost]
public ActionResult foo(MyClass mc)
{
   using (var client = new MyWCFServiceClient())
   {
       client.SendMyClass(mc);
   }

} 
```

`MyClass`位于类库中，看起来像这样：

```
[HasSelfValidation]
public class MyClass 
{

    [SelfValidation]
    public void Validate(ValidationResults validationResults)
    {
        do..
        validationResults.AddResult(new ValidationResult(..));
    }
} 
```

我想要的是在调用控制器操作（并且 asp.mvc 创建实例 mc）以及当数据到达那里时在我的应用服务器上调用验证功能。

这不会发生 - 验证永远不会被调用。我做错了什么，这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:16:22.900

如果我理解正确，那么您有两个单独的验证问题。

1.  客户端级别的验证，这是您在 mvc 的课程。
2.  需要在数据合同级别进行验证的服务端验证。

请参阅此链接 [http://www.codeproject.com/Articles/259327/Integrate-Validation-Block-with-WCF](http://www.codeproject.com/Articles/259327/Integrate-Validation-Block-with-WCF) http://stackoverflow.com/questions/1703423/how-to-integrate-enterprise-library-validation-应用程序块验证结果

# azure - 我们如何在 Windows Azure 中增加 Role 的实例？

> ID：11561252
> 
> 赞同：0
> 
> 时间：2012-07-19T12:50:51.860
> 
> 标签：azure

我使用一个服务总线应用程序，我想知道我们将如何以编程方式创建工作角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:55:47.077

您是指以编程方式部署您的辅助角色还是以编程方式增加已运行辅助角色的实例数？对于这两种情况，您都需要使用 Windows Azure 服务管理 API。对于第一个，您将调用 Create Deployment ( [http://msdn.microsoft.com/en-us/library/windowsazure/ee460813](http://msdn.microsoft.com/en-us/library/windowsazure/ee460813) )，而对于第二个，您需要更新角色配置文件中的实例计数(*.cscfg) 并调用更改部署配置 ( [http://msdn.microsoft.com/en-us/library/windowsazure/ee460809](http://msdn.microsoft.com/en-us/library/windowsazure/ee460809) )。

# python - R，Python：在 rpy2 上安装包

> ID：11561258
> 
> 赞同：11
> 
> 时间：2012-07-19T12:51:10.057
> 
> 标签：python, r, import, package

我正在`R`通过库在我的 Python 脚本中使用，`rpy2`我需要一个不在 R 的默认安装中的[包](http://dirichletreg.r-forge.r-project.org)。我该如何安装它？

```
install.packages("DirichletReg", repos="http://r-forge.r-project.org") 
```

不会工作。

在 Python 上：

```
>>> install.packages("DirichletReg", repos="http://r-forge.r-project.org") 
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
NameError: name 'install' is not defined 
```

从R：

```
> install.packages("DirichletReg", repos="http://r-forge.r-project.org")
Installing package(s) into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)
Warning message:
In getDependencies(pkgs, dependencies, available, lib) :
  package ‘DirichletReg’ is not available (for R version 2.14.1) 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-08-15T06:53:17.790

里卡多的答案不再有效。

要从 Python 安装，我们可以使用以下`utils.install_packages`函数：

```
from rpy2.robjects.packages import importr
utils = importr('utils') 
```

（该`utils`软件包`R.utils`的 pdf 文档可以在此处找到：[https](https://CRAN.R-project.org/package=R.utils) ://CRAN.R-project.org/package=R.utils - 或者，更直接地，这里是我们使用的更详细的`install.packages`函数文档：[https： //www.rdocumentation.org/packages/utils/versions/3.6.2/topics/install.packages](https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/install.packages)。它`install_packages`在 Python 中被重命名为，因为`.`它不是合法 Python 名称的一部分，因为它在 R 中。）

接下来，您需要决定从哪个仓库获取包。

`utils.install_packages`您可以在使用参数调用时声明 repo `repos`：

```
utils.install_packages('DirichletReg', repos="https://cloud.r-project.org") 
```

`utils.install_packages`或者您可以在调用之前设置镜像

```
utils.chooseCRANmirror(ind=1) # select the first mirror in the list 
```

或者

```
utils.chooseBioCmirror(ind=1) # select the first mirror in the list 
```

否则 Python/R 将尝试启动交互式镜像选择器（这可能适用于您的设置，也可能不适用）。

然后，对于单个包：

```
utils.install_packages('DirichletReg') 
```

或者对于多个包，传递一个字符向量：

```
from rpy2.robjects.vectors import StrVector

package_names = ('ggplot2', 'hexbin')
utils.install_packages(StrVector(package_names)) 
```

这些示例改编自[rpy2 文档](http://rpy.sourceforge.net/rpy2/doc-dev/html/robjects_rpackages.html#installing-removing-r-packages)和`install.packages`文档 - 在我上次编辑时，文档仍然说要这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-06-23T17:59:41.447

运行时`pytest`，Aaron 的回答使我的 Python 挂起并且 R 不断给出错误消息，可能是因为这个：

> 在没有先选择镜像的情况下调用`install_packages()`将要求用户以交互方式选择镜像。

根据[rpy2 文档](https://rpy2.github.io/doc/latest/html/introduction.html#installing-packages)，我使用了这个有效的方法：

```
from rpy2 import robjects
import rpy2.robjects.packages as rpackages

utils = rpackages.importr('utils')
utils.chooseCRANmirror(ind=1)
utils.install_packages("DirichletReg")
DirichletReg = rpackages.importr("DirichletReg") 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-19T19:35:50.980

这个怎么样

```
>>> import rpy2.interactive as r
>>> r.importr("utils")
>>> package_name = "DirichletReg"
>>> r.packages.utils.install_packages(package_name) 
```

# android - IOS 5 表情符号 Unicode

> ID：11561259
> 
> 赞同：1
> 
> 时间：2012-07-19T12:51:11.280
> 
> 标签：android, iphone, ios5, ios4, emoji

我正在开发一个使用 iphone ios5 表情符号的 android 应用程序。

我能够解码 ios 4 emoji unicode，但问题出在 ios 5 上。

在调试我的代码时，我发现 ios5 emoji unicode 使用[此处显示的 utf-16](http://punchdrunker.github.com/iOSEmoji/table_html/)

问题是一个表情符号由两个字符表示..例如，第一个表情符号被视为 0xD83D 0xDE04

在解码操作中，我执行以下操作：

```
<item>\uD83D\uDE04</item> 
```

当android看到这个unicode时，它必须用表情符号图像替换它。但这对我不起作用

注意：在以前的版本（ios 4）中，当我执行以下操作时：

```
<item>\ue415</item> 
```

解析器运行良好并将此 unicode 解码为表情符号，但是当项目变为多个字符时，我该如何解决问题？

# c - 如何在不将警告视为错误的情况下进行编译？

> ID：11561261
> 
> 赞同：113
> 
> 时间：2012-07-19T12:51:15.910
> 
> 标签：c, gcc, compiler-warnings

问题是在 Windows 上编译良好的相同代码无法在 Ubuntu 上编译。每次我收到此错误时：

```
cc1: warnings being treated as errors 
```

现在，它的代码库很大，我不喜欢修复所有警告。

尽管有警告，有什么方法可以成功编译？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-19T12:52:20.640

当然，找到`-Werror`设置的位置并删除该标志。那么警告将只是警告。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-07-19T12:55:16.383

您可以使用`-Wno-error`. 您可以通过使用`-Wno-error=<warning name>`where`<warning name>`是您不希望将其视为错误的警告的名称来处理特定的警告。

如果要完全*禁用*所有警告，请使用`-w`（不推荐）。

* * *

来源： http: [//gcc.gnu.org/onlinedocs/gcc-4.3.2/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc-4.3.2/gcc/Warning-Options.html)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2020-03-13T13:41:43.093

解决方案：

```
CFLAGS=-Wno-error ./configure 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-09-29T22:02:02.697

[按照本文中的](https://stackoverflow.com/a/10248526/2110769 "in this post")`-Werror`建议，从您的 Make 或 CMake 文件中删除

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-28T19:22:29.743

`-Wall`和`-Werror`编译器选项可能会导致它，请检查是否在编译器设置中使用了这些选项。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-24T13:15:31.750

如果你正在编译 linux 内核。例如，如果要禁用“未使用但设置变量”的警告，则将其视为错误。您可以添加一个语句：

```
KBUILD_CFLAGS += $(call cc-option,-Wno-error=unused-but-set-variable,) 
```

在你的 Makefile

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-20T10:54:11.727

感谢所有有用的建议。我终于确保我的代码中没有警告，但再次从 sqlite3 收到此警告：

```
Assuming signed overflow does not occur when assuming that (X - c) <= X is always true 
```

我通过添加以下 CFLAG 来修复它：

```
-fno-strict-overflow 
```

# c# - 如何使用自托管 WCF 服务

> ID：11561265
> 
> 赞同：0
> 
> 时间：2012-07-19T12:51:27.897
> 
> 标签：c#, winforms, wcf

我已经成功地在 Windows 窗体应用程序中托管了 WCF 服务。现在我需要的是一种方式，当我的服务被任何客户端使用时，我想以托管服务的形式显示来自客户端计算机和客户端 ID 的最后访问日期和时间。

因此，当我的客户在我的服务上使用任何操作时，也会向我发送其日期和时间，一切正常，但无法在标签中的表单上显示。

有人可以建议我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:45:57.053

我的建议是使用 WCF 附带的日志记录和跟踪，您必须编写自定义代码来读取客户端记录的信息

请查看可能对您有帮助的链接

[http://msdn.microsoft.com/en-us/library/ms730918.aspx](http://msdn.microsoft.com/en-us/library/ms730918.aspx)

[http://msdn.microsoft.com/en-us/library/aa751795.aspx](http://msdn.microsoft.com/en-us/library/aa751795.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:16:02.077

我建议使用 Microsoft 消息队列 (MSMQ)，它[与 ​​WCF 配合](http://msdn.microsoft.com/en-us/library/ms731089%28v=VS.100%29.aspx)得很好。MSMQ 使用轻巧且速度快，其中最好的一点是，它内置在 Windows 中，并在 .NET Framework 中提供开箱即用的支持。如果您愿意，您可以决定发送事务性和持久性消息，或者优先处理它们。

每次调用您想要登录 WinForms 应用程序的操作时，WCF 服务都会发送一条包含您所需信息的消息。

然后，Forms 应用程序将异步接收消息并写入您的屏幕或日志文件或您需要的任何地方。

在 C# 中读取和写入 MSMQ 非常简单。

这是一个很好的起点：**Tom Hollander 的博客**

*   [MSMQ、WCF 和 IIS：让它们发挥出色（第 1 部分）](http://blogs.msdn.com/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx)
*   [MSMQ、WCF 和 IIS：让它们发挥出色（第 2 部分）](http://blogs.msdn.com/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-2.aspx)
*   [MSMQ、WCF 和 IIS：让他们玩得更好（第 3 部分）](http://blogs.msdn.com/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-3.aspx)

# r.java-file - R gen 文件不存在

> ID：11561271
> 
> 赞同：0
> 
> 时间：2012-07-19T12:51:40.017
> 
> 标签：r.java-file

在我的最新示例中，我正在经历新的故障排除：P

好吧，没有任何理由，没有生成 R.java 文件。

有没有办法找出这种情况发生的原因和时间（为了将来的目的）？

# rspec - 将错误写入指定文件

> ID：11561273
> 
> 赞同：0
> 
> 时间：2012-07-19T12:51:42.850
> 
> 标签：rspec

**测试后如何将错误（如下）写入指定文件。**

```
Failures:

1) Create should be successful
Failure/Error: unit_ship.should be_valid
expected valid? to return true, got false
# ./spec/models/unit_ship_spec.rbin `block (3 levels) in ' 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:44:34.427

试试这个：

```
$ rake spec > output.txt 
```

# java - 类从 Servlet 请求数据

> ID：11561279
> 
> 赞同：1
> 
> 时间：2012-07-19T12:52:09.173
> 
> 标签：java, servlets

我有一个正在运行并从网页中获取数据的 Servlet。稍后在一组不同的任务中，我想从标准 Java 类访问这些数据并使用这些数据，我将如何处理？我可以将数据保存在任何地方以供访问吗？

我有这样的代码：

```
String name = request.getParameter("username"); 
```

然后我尝试将其设置为属性并传递它：

```
getServletContext().setAttribute("com.mycompany.app-param", "name"); 
```

然后在下一堂课中，我尝试访问上下文以获取变量，但无论我尝试什么，我都得到了服务器错误 500，或者 null 或 Server = null。我认为它无法正确获取上下文：

```
value = getServletContext().getAttribute("com.mycompany.app-param"); 
```

有谁知道我如何访问之前创建的上下文并获取它的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:53:54.627

是的，就像在数据库表中一样？甚至是一个文件？

示例代码：

[https://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/servlet_jdbc_sample1?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/servlet_jdbc_sample1?lang=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:59:22.623

您可以使用具有一组 getter（将数据获取到 java 类）和 setter（从网页设置数据）的 DTO 并将其维护为全局范围，以便您以后可以使用 Java 类访问它......希望这个有帮助！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:00:43.223

你可以用一个 dao 编写一个数据访问层，它将数据保存在数据库中。如果您的要求是仅在会话范围内使用数据，那么您可以将该数据保存在会话中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T13:00:49.060

您可以将该数据保存在某个文件中

或者

您可以在 UI 中提供具有所有属性的 Class 并为该类创建一个对象并在之后的那一刻序列化该对象，当您想要该数据时，您可以反序列化该对象。

序列化链接 [http://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T13:14:22.700

干得好...

```
public class DummyDTO {
    private String name = null;
    private String age = null;

    // getters and setters
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAge() {
        return age;
    }

    public void setAge(String age) {
        this.age = age;
    }
} 

public class MyServletClass extends HttpServlet {
    public void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException,
            IOException {
        DummyDTO dummyDTO = new DummyDTO();
        dummyDTO.setName(request.getParameter("name"));
        dummyDTO.setAge(request.getParameter("age"));
        AnotherClass.setValues(dummyDTO);
    }

    public class AnotherClass {

        String name = "";
        String age = "";

        public static void setValues(DummyDTO dummyDTO) {

            name = dummyDTO.getName();
            age = dummyDTO.getAge();
        }

    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T14:35:43.843

请参阅[GAE 是否正式支持 getServletContext()？](https://stackoverflow.com/questions/2557370/is-getservletcontext-officially-supported-in-gae)- 在 gae 上，不能保证按照您希望的方式工作（例如传递信息）。

您应该改用 Session 或 Request 范围属性，请参阅[此处和此处](http://www.pearsonitcertification.com/articles/article.aspx?p=30082&seqNum=6)[以](http://docs.oracle.com/javaee/6/tutorial/doc/bnafo.html) 帮助[您](http://www.exampledepot.com/egs/javax.servlet/State.html)入门。您使用哪一个取决于所需的生命周期和已保存属性的可见性（请求 < 会话 < 应用程序）

# jquery - jQuery导航菜单授权

> ID：11561282
> 
> 赞同：0
> 
> 时间：2012-07-19T12:52:19.750
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试使用 Jquery 在我的 MVC 应用程序中创建导航菜单。我为此使用[http://users.tpg.com.au/j_birch/plugins/superfish/ 。](http://users.tpg.com.au/j_birch/plugins/superfish/)

但是我想显示基于用户角色的菜单项，即包括 asp 成员授权逻辑，这样如果用户没有所需的角色，他就看不到某些菜单项。

任何人都可以建议如何进行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:12:54.743

由于 superfish 仅适用于客户端，因此您首先需要确保它只有正确的 html，即您定义的服务器端。

您的角色提供者具有 IsUserInRole 和 GetRolesForUser。您可以使用它来构建 HTML。

例如：

```
@if (RoleProvider.IsUserInRole(user.username, "admin")) {
    <li>Admin<li>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:29:27.800

更新：如果您正在做很多客户端工作并且仅与 MVC 应用程序进行数据通信，则此答案更合适。如果您要从服务器渲染每个页面，请使用 Steve 的答案。

我认为您需要使用返回 JsonResult 的控制器操作将用户的角色传达给客户端。例如

```
public class SecurityController : Controller
{
    public ActionResult Roles()
    {
        return new JsonResult
        {
            Data = System.Web.Security.Roles.GetRolesForUser(),
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };
    }
} 
```

然后用于`$.ajax`在客户端检索数据并在回调中从 DOM 中删除不符合您要求的节点。例如

```
 <ul id="menu">
        <li data-roles="Administrator">
            Secured
        </li>
        <li>Any</li>
    </ul>
    <script type="text/javascript">
        $.ajax({
            url: "security/roles",
            success: function(roles) {
                $("#menu li[data-roles]").filter(function() {
                    var requiredRoles = (this.attr("data-roles") || "").split(",");
                    for (var requiredRole in requiredRoles) {
                        if (roles.indexOf(requiredRole) >= 0) {
                            return false;
                        }
                    }

                    return true;
                }).remove();

                // TODO call your menu plugin here
                // $("#menu").superfish();
            },
            error: function () {
                $("#menu li[data-roles]").remove();
            }
        });
    </script> 
```

干杯，院长

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:22:41.283

如果您在数据库中设置了用户/角色，那么您可以创建表，一张表将包含菜单，另一张表将菜单与角色映射。

您可能必须创建一个子操作，该操作将查询数据库以获取特定角色的菜单项并通过部分视图呈现菜单。您甚至可以将用户的菜单项保留在会话中，这样您就可以避免在每次请求时访问数据库。

隐藏菜单项可以部分解决问题。您必须使用授权过滤器来保护控制器和操作。

# r - 来自python背景的R中的类

> ID：11561284
> 
> 赞同：22
> 
> 时间：2012-07-19T12:52:28.220
> 
> 标签：r, oop

我是一名 Python 程序员，这是我使用 R 的第一天。

我正在尝试使用构造函数和三个方法编写一个类，但我很挣扎。

在 python 中，这很容易：

```
 class MyClass:
      def __init__(self):
           self.variableA = 1
           self.variableB = 2

      def hello(self):
           return "Hello"

      def goodbye(self):
           return "Goodbye"

      def ohDear(self):
           return "Have no clue" 
```

我找不到任何能告诉我如何在 R 中做如此简单的事情的东西。如果有人能告诉我一种方法，我将不胜感激？

非常感谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-19T13:57:12.987

R 实际上有很多不同的面向对象的实现。三个原生的（如@jthetzel 提到的）是 S3、S4 和参考类。

S3 是一个轻量级系统，允许您根据第一个参数的类重载函数。

参考类被设计成更接近于其他编程语言的类。它们或多或少地取代了 S4 类，后者做同样的事情，但以更笨重的方式。

R.oo包提供[了](http://cran.r-project.org/web/packages/R.oo/index.html)另一个系统，[proto](http://cran.r-project.org/web/packages/proto/index.html)包允许面向原型的编程，类似于轻量级 OOP。[OOP](http://www.omegahat.org/RSOOP/)包中有第六个系统，但现在已经不存在了。更新的[R6](http://cran.r-project.org/web/packages/R6/index.html)包[“是 R 的内置引用类的更简单、更快、更轻量级的替代方案”](https://github.com/wch/R6/)。

对于新项目，您通常只想使用 S3 和 Reference 类（或者可能是 R6）。

python 类最容易转换为引用类。它们相对较新，（直到约翰钱伯斯完成他的书）最好的参考是[`?ReferenceClasses`](http://www.inside-r.org/r-doc/methods/ReferenceClasses)页面。这是一个让您入门的示例。

要定义一个类，你调用`setRefClass`. 第一个参数是类的名称，按照惯例，这应该与您将结果分配给的变量相同。您还需要将`list`s 传递给参数“字段”和“方法”。

有一些怪癖。

*   如果您不想指定字段应具有的变量类型，请将“ANY”作为字段列表中的值传递。
*   任何构造函数逻辑都需要在一个名为`initialize`.
*   如果方法的第一行是字符串，则将其解释为该方法的文档。
*   在方法内部，如果要分配给字段，请使用全局分配 ( `<<-`)。

这将创建一个类生成器：

```
MyClass <- setRefClass(
  "MyClass",
  fields = list(
    x = "ANY",
    y = "numeric",
    z = "character"
  ),
  methods = list(
    initialize = function(x = NULL, y = 1:10, z = letters)
    {
      "This method is called when you create an instance of the class."
      x <<- x
      y <<- y
      z <<- z
      print("You initialized MyClass!")
    },
    hello = function()
    {
      "This method returns the string 'hello'."
      "hello"
    },
    doubleY = function()
    {
      2 * y
    },
    printInput = function(input)
    {
      if(missing(input)) stop("You must provide some input.")
      print(input)
    }
  )
) 
```

然后通过调用生成器对象来创建类的实例。

```
obj1 <- MyClass$new()
obj1$hello()
obj1$doubleY()

obj2 <- MyClass$new(x = TRUE, z = "ZZZ")
obj2$printInput("I'm printing a line!") 
```

延伸阅读：Advanced R 的[OO 领域指南](http://adv-r.had.co.nz/OO-essentials.html)章节。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-25T06:17:28.327

我最近写了一个 python 类和 R S4 类的比较，可以在以下位置找到：

[http://practicalcomputing.org/node/80](http://practicalcomputing.org/node/80)

R 和 python 中的类在声明方式、使用方式和工作方式上都非常不同。

根据 mbinette 在评论中的要求，这是帖子的全文（减去大多数超链接，因为我只有两个权限）：

对于使用 python、C++、java 或其他常见的面向对象语言进行编程的任何人来说，R 中的面向对象编程可能会相当混乱。本着书中 Rosetta 代码示例的精神，在这里我将在 python 中创建和使用类的代码与在 R 中创建和使用类的代码进行比较。

混淆的第一层是 R 有几个不同的面向对象编程系统 - S3、S4 和 R5。面临的第一个决定是为您的项目选择哪一个。S3 出现的时间最长，并且被广泛使用。它的功能在某些关键方面受到限制，但程序员在如何编写类方面具有相当大的灵活性。S4 是一个较新的系统，解决了 S3 的一些限制。编码有点复杂和僵化，但最终使用起来更强大。通常，人们在处理已经具有 S3 对象的现有代码时使用 S3，而在从头开始实施新代码时使用 S4。例如，许多较新的生物导体包都是用 S4 编写的。Hadley Wickham[对 S3、S4 和 R5 有很好的总结](https://github.com/hadley/devtools/wiki)，以及 R 的其他方面，这是一个很好的地方，可以让自己更多地了解 R 中的面向对象编程。

这里我重点介绍S4系统。

下面是python中一个简单的Circle类的定义。它有一个`__init__()`用于在创建新实例时设置值的构造方法，一些用于设置值的方法，一些用于获取值的方法，以及一个通过根据半径计算直径来修改类实例的方法。

```
class Circle:

    ## Contents
    radius = None
    diameter = None

    ## Methods
    # Constructor for creating new instances
    def __init__(self, r):
        self.radius = r

    # Value setting methods
    def setradius(self, r):
        self.radius = r

    def setdiameter(self, d):
        self.diameter = d

    # Value getting methods
    def getradius(self):
        return(self.radius)

    def getdiameter(self):
        return(self.diameter)

    # Method that alters a value
    def calc_diameter(self):
        self.diameter = 2 * self.radius 
```

创建此类后，创建和使用实例（在 ipython 中）如下所示：

```
In [3]: c = Circle()

In [4]: c.setradius(2)

In [5]: c.calc_diameter()

In [6]: c.getradius()
Out[6]: 2

In [7]: c.getdiameter()
Out[7]: 4 
```

该函数使用定义的构造`Circle()`函数创建类的新实例。我们使用设置半径值的方法，以及根据半径计算直径并更新类实例中的直径值的方法。然后我们使用我们构建的方法来获取半径和直径的值。我们当然也可以直接访问半径和直径值，使用与调用函数相同的点表示法：`Circle``__init__()``.setradius()``.calc_diameter()`

```
In [8]: c.radius
Out[8]: 2

In [9]: c.diameter
Out[9]: 4 
```

与 C++、java 和许多其他通用语言一样，方法和数据变量都是类的属性。此外，方法具有对数据属性的直接读写访问权限。在这种情况下，该`.calc_diameter()`方法将直径值替换为新值，而无需更改有关类实例的任何其他内容。

现在对于 R 中的 S4 对象，它们非常非常不同。这是 R 中类似的 Circle 类：

```
setClass(
    Class = "Circle", 
    representation = representation(
        radius = "numeric", 
        diameter = "numeric"
    ),
)

# Value setting methods
# Note that the second argument to a function that is defined with setReplaceMethod() must be named value
setGeneric("radius<-", function(self, value) standardGeneric("radius<-"))
setReplaceMethod("radius", 
    "Circle", 
    function(self, value) {
        self@radius <- value
        self
    }
)

setGeneric("diameter<-", function(self, value) standardGeneric("diameter<-"))
setReplaceMethod("diameter", 
    "Circle", 
    function(self, value) {
        self@diameter <- value
        self
    }
)

# Value getting methods
setGeneric("radius", function(self) standardGeneric("radius"))
setMethod("radius", 
    signature(self = "Circle"), 
    function(self) {
        self@radius
    }
)

setGeneric("diameter", function(self) standardGeneric("diameter"))
setMethod("diameter", 
    signature(self = "Circle"), 
    function(self) {
        self@diameter
    }
)

# Method that calculates one value from another
setGeneric("calc_diameter", function(self) { standardGeneric("calc_diameter")})
setMethod("calc_diameter", 
    signature(self = "Circle"), 
    function(self) {
        self@diameter <- self@radius * 2
        self
    }
) 
```

创建此类后，创建和使用实例（在 R 交互式控制台中）如下所示：

```
> a <- new("Circle")
> radius(a) <- 2
> a <- calc_diameter(a)
> radius(a)
[1] 2
> diameter(a)
[1] 4 
```

该`new("Circle")`调用创建了`Circle`该类的一个新实例，我们将其分配给了一个名为 的变量`a`。该`radius(a)<- 2`行创建了对象 a 的副本，将 radius 的值更新为 2，然后将 a 指向新更新的对象。这是用`radius<-`上面定义的方法完成的。

我们定义`calc_diameter()`为`Circle`类的方法，但请注意，我们不要将其称为类的属性。也就是说，我们不使用类似`a.calc_diameter()`. 相反，我们`calc_diameter()`像调用任何其他独立函数一样调用，并将对象作为第一个参数传递给方法。

此外，我们不只是调用`calc_diameter(a)`，我们将输出分配回`a`。这是因为 R 中的对象作为值而不是引用传递给函数。该函数获取对象的副本，而不是原始对象。然后在函数中对该副本进行操作，如果您想要返回修改后的对象，您必须做两件事。首先，对象必须在函数的最后一行执行（因此`self`方法定义中的行是孤立的）。在 R 中，这就像调用`return()`. 其次，您必须在调用该方法时将更新后的值复制回我们的对象变量。这就是为什么整行是`a <- calc_diameter(a)`.

`radius(a)`and`diameter(a)`调用执行我们为返回这些值而定义的方法。

您还可以直接访问 R 中对象的数据属性，就像您可以访问 python 中的对象一样。但是，您不使用点表示法，而是使用`@`表示法：

```
> a@radius
[1] 2
> a@diameter
[1] 4 
```

在 R 中，数据属性被称为“槽”。该`@`语法使您可以访问这些数据属性。但是方法呢？与 python 不同，R 中的方法不是对象的属性，它们被定义`setMethod()`为作用于特定对象。该方法所作用的类由`signature`参数确定。但是，可以有多个具有相同名称的方法，每个方法都作用于不同的类。这是因为被调用的方法不仅取决于方法的名称，还取决于参数的类型。一个熟悉的例子是方法`plot()`。对用户来说，看起来只有一个`plot()`函数，但实际上有许多`plot()`方法都特定于特定的类。`plot()`.

这会到达`setGeneric()`类定义中的行。如果您使用已存在的名称（例如`plot()`）定义新方法，则不需要它。这是因为`setMethod()`定义了现有方法的新版本。新版本采用一组不同的数据类型，然后是同名的现有版本。但是，如果要使用新名称定义函数，则首先必须声明该函数。`setGeneric()`处理这个声明，创建本质上是一个占位符，然后您会立即覆盖它。

python 和 R 中的类之间的差异不仅仅是表面上的，在底层发生了非常不同的事情，并且在每种语言中类以不同的方式使用。不过，在 R 中创建和使用类时，有一些事情特别令人沮丧。在 R 中创建 S4 类需要更多的输入，而且大部分都是多余的（例如，在上面的示例中，每个方法名称必须指定 3 次）。因为 R 方法只能通过复制整个对象来访问数据属性，所以一旦对象变大，即使是简单的操作也会对性能造成很大影响。对于修改对象的方法，这个问题更加复杂，因为数据必须在输入时复制一次，然后在输出时复制一次。这些问题可能促成了最近用于数值分析的 python 工具（如 pandas）的迅速普及。也就是说，R 仍然是一个强大的工具，它非常适合解决许多常见问题，并且 R 库的丰富生态系统对于许多分析来说是必不可少的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-20T14:22:26.260

我来自 Python 世界，一开始很难用 R 类来思考。最后，我做到了。我认为。

我能够在 R 中将Python 和 Java 类转换为**S4 。**

创建此包**rODE**的特定目的是帮助初学者学习**S4**课程。该软件包是关于求解常微分方程的，并且包含有关 S4 类的所有内容。

希望能帮助到你。链接下方：

[https://github.com/f0nzie/rODE](https://github.com/f0nzie/rODE)

该软件包也在 CRAN 中。

现在，关于答案。在 R 中有很多方法可以做你想做的事。这是第一种方法，使用**S4**类和**原型**来初始化变量 A 和 B 的值。

```
setClass("MyClass", slots = c(
    A = "numeric",
    B = "numeric"
    ),
    prototype = prototype(
        A = 1,
        B = 2
    )
)

# generic functions
setGeneric("hello", function(object, ...) standardGeneric("hello"))
setGeneric("goodbye", function(object, ...) standardGeneric("goodbye"))
setGeneric("ohDear", function(object, ...) standardGeneric("ohDear"))

# Methods of the class
setMethod("hello", "MyClass", function(object, ...) {
    return("Hello")
})    

setMethod("goodbye", "MyClass", function(object, ...) {
    return("Goodbye")
})

setMethod("ohDear", "MyClass", function(object, ...) {
    return("Have no clue")
})

# instantiate a class
mc <- new("MyClass")

# use the class methods
hello(mc)
goodbye(mc)
ohDear(mc) 
```

第二种方法是使用**初始化**方法。

```
setClass("MyClass", slots = c(
    A = "numeric",
    B = "numeric"
    )
)

# generic functions
setGeneric("hello", function(object, ...) standardGeneric("hello"))
setGeneric("goodbye", function(object, ...) standardGeneric("goodbye"))
setGeneric("ohDear", function(object, ...) standardGeneric("ohDear"))

# Methods of the class
setMethod("initialize", "MyClass", function(.Object, ...) {
    .Object@A <- 1
    .Object@B <- 2
    return(.Object)
})

# Methods of the class
setMethod("hello", "MyClass", function(object, ...) {
    return("Hello")
})    

setMethod("goodbye", "MyClass", function(object, ...) {
    return("Goodbye")
})

setMethod("ohDear", "MyClass", function(object, ...) {
    return("Have no clue")
})

# instantiate a class
mc <- new("MyClass")

# use the class methods
hello(mc)
goodbye(mc)
ohDear(mc)

mc@A       # get value on slot A
mc@B       # get value on slot B 
```

第三种方法是使用**构造函数**并使用构造函数初始化类外部的类变量：

```
setClass("MyClass", slots = c(
    A = "numeric",
    B = "numeric"
    )
)

# generic functions
setGeneric("hello", function(object, ...) standardGeneric("hello"))
setGeneric("goodbye", function(object, ...) standardGeneric("goodbye"))
setGeneric("ohDear", function(object, ...) standardGeneric("ohDear"))

# Methods of the class
setMethod("initialize", "MyClass", function(.Object, ...) {
    return(.Object)
})

# Methods of the class
setMethod("hello", "MyClass", function(object, ...) {
    return("Hello")
})    

setMethod("goodbye", "MyClass", function(object, ...) {
    return("Goodbye")
})

setMethod("ohDear", "MyClass", function(object, ...) {
    return("Have no clue")
})

# constructor function
MyClass <- function() {
    myclass <- new("MyClass")
    myclass@A <- 1            # assignment
    myclass@B <- 2
    return(myclass)           # return the class initialized
}

# instantiate a class
mc <- MyClass()

# use the class methods
hello(mc)
goodbye(mc)
ohDear(mc)

mc@A       # get value on slot A
mc@B       # get value on slot B 
```

这仍然有改进的空间，因为我们不应该在类之外处理插槽的原始名称。封装，还记得吗？**这是使用setReplaceMethod**的第四种更好的方法：

```
setClass("MyClass", slots = c(
    A = "numeric",
    B = "numeric"
    )
)

# generic functions
setGeneric("hello", function(object, ...) standardGeneric("hello"))
setGeneric("goodbye", function(object, ...) standardGeneric("goodbye"))
setGeneric("ohDear", function(object, ...) standardGeneric("ohDear"))
setGeneric("getA", function(object, ..., value) standardGeneric("getA"))
setGeneric("getB", function(object, ..., value) standardGeneric("getB"))
setGeneric("setA<-", function(object, ..., value) standardGeneric("setA<-"))
setGeneric("setB<-", function(object, ..., value) standardGeneric("setB<-"))

# Methods of the class
setMethod("initialize", "MyClass", function(.Object, ...) {
    return(.Object)
})

# Methods of the class
setMethod("hello", "MyClass", function(object, ...) {
    return("Hello")
})    

setMethod("goodbye", "MyClass", function(object, ...) {
    return("Goodbye")
})

setMethod("ohDear", "MyClass", function(object, ...) {
    return("Have no clue")
})

setMethod("getA", "MyClass", function(object, ...) {
    return(object@A)
})

setMethod("getB", "MyClass", function(object, ...) {
    return(object@B)
})

setReplaceMethod("setA", "MyClass", function(object, ..., value) {
   object@A <- value
   object
})

setReplaceMethod("setB", "MyClass", function(object, ..., value) {
   object@B <- value
   object
})

# constructor function
MyClass <- function() {
    myclass <- new("MyClass")
    return(myclass)           # return the class initialized
}

# instantiate a class
mc <- MyClass()

# use the class methods
hello(mc)
goodbye(mc)
ohDear(mc)

setA(mc) <- 1
setB(mc) <- 2

getA(mc)       # get value on slot A
getB(mc)       # get value on slot B 
```

第 5 种方法是创建一个**类方法**来实例化类本身，这对于验证输入很有用，即使是缺少参数：

```
.MyClass <- setClass("MyClass", slots = c(
    A = "numeric",
    B = "numeric"
    )
)

# generic functions
setGeneric("hello", function(object, ...) standardGeneric("hello"))
setGeneric("goodbye", function(object, ...) standardGeneric("goodbye"))
setGeneric("ohDear", function(object, ...) standardGeneric("ohDear"))
setGeneric("getA", function(object, ..., value) standardGeneric("getA"))
setGeneric("getB", function(object, ..., value) standardGeneric("getB"))
setGeneric("setA<-", function(object, ..., value) standardGeneric("setA<-"))
setGeneric("setB<-", function(object, ..., value) standardGeneric("setB<-"))
setGeneric("MyClass", function(A, B, ...) standardGeneric("MyClass"))

# Methods of the class
setMethod("initialize", "MyClass", function(.Object, ...) {
    return(.Object)
})

# Methods of the class
setMethod("hello", "MyClass", function(object, ...) {
    return("Hello")
})    

setMethod("goodbye", "MyClass", function(object, ...) {
    return("Goodbye")
})

setMethod("ohDear", "MyClass", function(object, ...) {
    return("Have no clue")
})

setMethod("getA", "MyClass", function(object, ...) {
    return(object@A)
})

setMethod("getB", "MyClass", function(object, ...) {
    return(object@B)
})

setReplaceMethod("setA", "MyClass", function(object, ..., value) {
   object@A <- value
   object
})

setReplaceMethod("setB", "MyClass", function(object, ..., value) {
   object@B <- value
   object
})

setMethod("MyClass", signature(A="numeric", B="numeric"), function(A, B, ...) {
    myclass <- .MyClass()
    myclass@A <- A
    myclass@B <- B
    return(myclass)
})

# instantiate the class with values
mc <- MyClass(A = 1, B = 2)

# use the class methods
hello(mc)
goodbye(mc)
ohDear(mc)

getA(mc)       # get value on slot A
getB(mc)       # get value on slot B 
```

# java - 组件宽度属性的意外变化

> ID：11561287
> 
> 赞同：3
> 
> 时间：2012-07-19T12:52:31.477
> 
> 标签：java, swing

我注意到运行我在下面列出的程序有时会产生不良影响。

**编辑：我简化了代码以使事情看起来清晰。我正在绘制一个打印出当前组件大小的字符串。我已经覆盖了 Component 类中的 getPreferedSize() 方法，并将宽度和高度分别设置为 640 x 512。但是，运行程序后我仍然得到不同的结果：640 x 512 和 650 x 522。奇怪的是删除 frame.setResizable(false) 行修复了问题。但我希望窗口可以调整大小**

 `````
import java.awt.*;

import javax.swing.*;

public class DrawTest
{
    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                DrawFrame frame = new DrawFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setResizable(false);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
}

class DrawFrame extends JFrame
{

    private static final long serialVersionUID = 1L;
    public DrawFrame()
    {
        setTitle("DrawTest");
        setLocationByPlatform(true);
        Container contentPane = getContentPane();
        DrawComponent component = new DrawComponent();
        contentPane.add(component);
    }

}

class DrawComponent extends JComponent
{
    private static final long serialVersionUID = 1L;
    public Dimension getPreferredSize() {
        return new Dimension(640, 512);
    }

    public void paintComponent(Graphics g)
    {
        Graphics2D g2 = (Graphics2D) g;         
        String msg = getWidth() + " x " + getHeight();      
        g2.setPaint(Color.BLUE);
        g2.drawString(msg, getWidth()/2, getHeight()/2);
    }
} 
````  `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T19:21:58.277

调用`setLocationByPlatform()`必须跟随`pack()`和之前`setVisible()`，否则几何将是错误的。由于没有子类化的原因`JFrame`，我省略`DrawFrame`了下面的示例。请注意在`FontMetrics`调整封闭容器大小时使用 来保持文本居中。该方法对于学习布局很方便。

![在此处输入图像描述](../Images/c4df43f6215670aad82c5e45e321a7df.png)

```
import java.awt.*;
import javax.swing.*;

public class DrawTest {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame("DrawTest");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new DrawComponent());
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }
}

class DrawComponent extends JComponent {

    private static final long serialVersionUID = 1L;

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(320, 240);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        String msg = getWidth() + " x " + getHeight();
        g2.setPaint(Color.BLUE);
        int w = (getWidth() - g.getFontMetrics().stringWidth(msg)) / 2;
        g2.drawString(msg, w, getHeight() / 2);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T20:00:55.717

可能是因为原生窗口系统可能会忽略设置帧大小等请求。
setSize() 方法有类似的问题：

[http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setSize%28java.awt.Dimension%29](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setSize%28java.awt.Dimension%29)

> “该方法更改了与几何相关的数据。因此，本机窗口系统可能会忽略此类请求，或者可能会修改请求的数据，以便以与桌面设置紧密对应的方式放置 Window 对象并调整其大小。”

简单测试，试试：

```
public Dimension getPreferredSize() {
    return new Dimension(2000, 1000);
} 
```

类似的设置可能会被忽略。

还要检查这个主题：[setSize() doesn't work for JFrame](https://stackoverflow.com/questions/9536804/setsize-doesnt-work-for-jframe)``

# python - 在python中读取父母的范围

> ID：11561288
> 
> 赞同：11
> 
> 时间：2012-07-19T12:52:31.367
> 
> 标签：python, scope, local-variables

假设我有一个函数层次结构，我希望能够访问*（而不是更改！）*父范围。这是一个说明性示例。

```
def f():
    a = 2
    b = 1
    def g():
        b = 2
        c = 1
        print globals() #contains a=1 and d=4
        print locals() #contains b=2 and c=1, but no a
        print dict(globals(), **locals()) #contains a=1, d=4 (from the globals), b=2 and c=1 (from g)
        # I want a=2 and b=1 (from f), d=4 (from globals) and no c
    g()
a = 1
d = 4
f() 
```

我可以`f`从内部访问 's 范围`g`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T12:56:05.627

一般来说，你不能在 Python 中。如果您的 Python 实现支持堆栈帧（CPython 支持），您可以使用`inspect`模块检查调用函数的帧并提取局部变量，但我怀疑这是您想要解决的问题的最佳解决方案（无论可能是什么）。如果你认为你需要这个，你的设计中可能存在一些缺陷。

请注意， using`inspect`将使您能够在*调用堆栈*中上升，而不是在词法范围的堆栈中。如果您`g`从中返回`f()`，则 的范围`f`将消失，因此根本无法访问它，因为它甚至不存在。

# jquery - JQuery - 无法实现输入用户掩码

> ID：11561293
> 
> 赞同：0
> 
> 时间：2012-07-19T12:52:42.200
> 
> 标签：jquery, html, input, mask

我尝试通过该[课程](http://digitalbush.com/projects/masked-input-plugin/#usage)实现输入用户掩码并且无法运行它。它不起作用。

我的 .html 文件：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Page Title</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js" type="text/javascript"></script>
    <script src="jquery-1.3.2.min.js" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8">
      jQuery(function($){
         $("#date").mask("99/99/9999");
      });
    </script>

  </head>
  <body id="" onload="">
    The following example is a demonstration from the usage tab.
    <table border="0">
      <tbody>
        <tr>
          <td>Date</td>
          <td><input id="date" tabindex="1" type="text"></td>
          <td>99/99/9999</td>
        </tr>
      </tbody>
    </table>
  </body>
</html> 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:55:32.010

您还没有包含插件脚本文件。

```
<script src="<path here>jquery.maskedinput.js" type="text/javascript"></script> 
```

# clojure - Clojure：连续重复项目的数量

> ID：11561295
> 
> 赞同：2
> 
> 时间：2012-07-19T12:52:48.113
> 
> 标签：clojure

我需要一个函数来计算序列中连续相等条目的数量。例如，(consecutive "abcdefg") 应该返回 0，而 (consecutive "aabcdddefg") 应该返回 3。

我写它的方式是惯用的还是可以改进的？

```
(defn consecutive [p]
  (second (reduce
            #(vector %2
                     (if (= (first %1) %2)
                       (inc (second %1))
                       (second %1)))
            [nil 0]
            p))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:06:49.873

我认为`(consecutive "abcdefg")`应该返回 1，而不是 0。

这是一个实现此目的的简单实现：

```
(defn consecutive [s] 
  (apply max (map count (partition-by identity s)))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T13:28:09.217

```
user> (defn consecutive [s] (->> s (partition-by identity) (reduce #(+ % (dec (count %2))) 0)))
#'user/consecutive
user> (consecutive "abcdefg")
0
user> (consecutive "aabcdddefg")
3 
```

`(partition-by identity)`当需要一些连续的序列时，我更喜欢这个成语。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:32:38.920

试试这个。

```
(defn consecutive [string]
  (let [n (apply max (map count (partition-by identity string)))]
    (if (= n 1) 0 n))) 
```

这是常见的模式

# iphone - UITableView 值在移动时不断变化

> ID：11561296
> 
> 赞同：0
> 
> 时间：2012-07-19T12:53:06.040
> 
> 标签：iphone

我配置了一个表格视图单元格，其表格单元格是从另一个xib加载的，文件名和身份都被调用，BlogViewControllerTableCell 大部分都可以正常工作，但是单元格中的某些内容在滚动时会不断变化。无论我使用数组值，还是简单地放入[indexpath row]。

以下是代码，不胜感激。谢谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"BlogViewControllerTableCell"];
    if (cell == nil) {
        // Load the top-level objects from the custom cell XIB.
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"BlogViewControllerTableCell" owner:self options:nil];
        // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
        cell = [topLevelObjects objectAtIndex:0];
    }
    student_name.text = [NSString stringWithFormat:@"%@", [[student_list objectAtIndex:[indexPath row]] objectForKey:@"name"]];
    return cell;
} 
```

# gradle - Gradle中的文件依赖项？

> ID：11561300
> 
> 赞同：7
> 
> 时间：2012-07-19T12:53:13.560
> 
> 标签：gradle

我正在尝试使用 gradle 和这些说明指定一些 jar 依赖项：

[http://gradle.org/docs/current/userguide/dependency_management.html#sub:file_dependencies](http://gradle.org/docs/current/userguide/dependency_management.html#sub:file_dependencies)

我有以下项目：

```
test
 -> libs
     -> svnant.jar
 -> build.gradle 
```

其中 build.gradle 包含：

```
dependencies {
  runtime files('libs/svnant.jar')
  runtime fileTree(dir: 'libs', include: '*.jar')
} 
```

当我从 windows cmd 运行 gradle 时，我得到：

```
FAILURE: Build failed with an exception.

* Where:
Build file 'C:\...\test\build.gradle' line: 16

* What went wrong:
A problem occurred evaluating root project 'test'.
> Could not find method runtime() for arguments [file collection] on root project 'test'. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T13:01:34.080

`runtime`如果您应用`java`插件（或自己声明配置），您只会获得配置。

# php - 无法使用 ajax 将完整数据发送到数据库

> ID：11561301
> 
> 赞同：0
> 
> 时间：2012-07-19T12:53:14.743
> 
> 标签：php, javascript

我使用以下 javascript 将数据发送到数据库

```
var x=document.getElementById("sortable").innerHTML;
    alert(x);
    var http=new XMLHttpRequest();
        http.open("POST", "5.php?field="+x, true);
        http.onreadystatechange = function() 
        {
            if(http.readyState == 4 && http.status == 200) 
            {
                alert(http.responseText);

            }
        }

        http.send(); 
```

在 php 端我使用以下函数：

```
$l=$_GET['field'];
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("formdem", $con);
$sql="INSERT INTO rohit(content)VALUES('$l')";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "<br/>&nbsp&nbsp&nbsp Your Form is now ready to be filled.....";
$rs= mysql_query("Select * from rohit where content='$l'");
if(mysql_num_rows($rs)!=0)
    {
    while($row = mysql_fetch_array($rs)) {

      echo "<br/>Your unique id is ".$row['formid'];

      }
      } 
```

但是这段代码没有将完整的数据发送到数据库中。可能是什么原因。在数据库中，我将字段设为长文本。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:58:29.537

由于您的 innerHTML 是一些 HTML，因此不能简单地添加它来创建 URL。你不能这样做：

```
http.open("POST", "5.php?field="+x, true); 
```

您必须在 urlEncode x 之前：

```
http.open("POST", "5.php?field="+encodeURIComponent(x), true); 
```

# c# - 将 C# 应用程序作为计划任务运行

> ID：11561303
> 
> 赞同：3
> 
> 时间：2012-07-19T12:53:19.750
> 
> 标签：c#

我有一个 C# 应用程序，它设计为使用 Windows 窗体运行，但现在需要作为计划任务运行。我遇到了这个问题，我认为这是因为它需要“无头”，因为它不应该有用户环境的概念。该程序已编写为无人值守运行，因为它有一个 /AUTO 参数，然后将从一些默认值运行，但仍显示导致问题的表单。

我环顾四周，我认为在这种情况下有一种方法可以抑制形式，但我找不到确切的方法。有谁知道我如何抑制表单并允许此应用程序运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:55:21.337

从您的 WinForms 应用程序中取出计划任务所需的逻辑并将其放入控制台应用程序中。如果您可以在两个地方重用逻辑，请将其移动到共享库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:58:58.683

将您的应用程序转换为控制台模式，并选中任务计划程序的“常规”选项卡中的“隐藏”复选框。

这将帮助你

![在此处输入图像描述](../Images/a030b9489141cb611ff5da9542ea0ce5.png)

如果您仍想使用 WinForm 应用程序，请将其 ShowOnTaskbar 属性设置为 false。

并且很容易将您的 winform 应用程序转换为 winform one。只需转到项目属性并将输出类型更改为控制台。但是您需要对代码进行一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:07:24.607

As far as I understood you, you do not need the Forms mode anymore, right?

If this is correct, I suggest implementing your application as service, e.g. a WCF service. It can permanently run and execute your business logic on a configured timer.

To make configuration of the timer easy and flexible, you could optionally imncorporate [NCronTab](http://code.google.com/p/ncrontab/). This allows you to schedule the task in a pattern as easy as `45 11 * * Friday` (=> "Run every Friday at 11:45 am")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:57:32.207

您可以告诉任务与桌面交互，在这种情况下，显示的表单不是问题。只要您的应用程序会自行关闭，工作就会完成..

我做了一个基于表单的东西，然后想要一个计划任务，所以写了一个命令行前端调用基于表单的应用程序，然后将 2 个 exe 与 ilmerge 一起推送，这样它就不会混淆，因为它是一个便宜的黑客

如果您的代码编写正确，您可以做一个 exe 前端并使用与您的表单（或 dll）相同的类并以这种方式工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T12:56:02.733

检查是否设置了 /AUTO 参数，然后根据是否设置。在 Program.cs 中更改它：

```
Application.Run(new Form1()); 
```

至

```
Application.Run(); 
```

这不会显示表格，您可以做任何其他您喜欢的事情。

这是我可以在没有看到你代码的情况下给你的最好的。跳它有帮助！

# python - Python继承和实例化

> ID：11561305
> 
> 赞同：2
> 
> 时间：2012-07-19T12:53:25.507
> 
> 标签：python, scheme, interpreter, isinstance

我很难理解 Peter Norvig 的代码中的一点，“更好的 Python Lisp 解释器”，[在这里](http://norvig.com/lispy.py)。

在eval函数中，针对解析，他正在做测试isanstance(x,Symbol)。类 Symbol 之前定义过，但它没有方法，因为它是用 pass 声明的：

```
 class Symbol(str): pass 
```

这些行构建了一个 symbol_table。

```
def Sym(s, symbol_table={}):
    "Find or create unique Symbol entry for str s in symbol table."
    if s not in symbol_table: symbol_table[s] = Symbol(s)
    return symbol_table[s]

_quote, _if, _set, _define, _lambda, _begin, _definemacro, = map(Sym, 
"quote   if   set!  define   lambda   begin   define-macro".split())

_quasiquote, _unquote, _unquotesplicing = map(Sym,
"quasiquote   unquote   unquote-splicing".split()) 
```

我不明白为什么`Symbol(s)`会起作用，因为没有定义 Symbol 类的构造函数。之后，`eval`方法通过以下方式检查令牌是否是符号：

```
def eval(x, env=global_env):
     "Evaluate an expression in an environment."
      while True:
          if isa(x, Symbol):       # variable reference
              return env.find(x)[x]
          else: #other stuff 
```

`isa(x,Symbol)`是一个谜。这里在代码中，应该检查token是否是一个变量引用（即x，与之前定义的x）。在我看来，这里的 Symbol(s) 是字符串的装饰，在用

```
 _quote, _if, _set, _define, _lambda, _begin, _definemacro, = map(Sym, 
     "quote   if   set!  define   lambda   begin   define-macro".split()) 
```

您能否根据您对 P. Norvig 的代码或 Python 经验的了解或阅读进行解释？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:04:40.457

像所有其他方法一样，`__init__`是继承的。`Symbol`继承`str`的`__init__`.

更新：进一步注意`__init__`执行初始化，而不是构造，并且初始化代码（效果略有不同）也可以存在于类定义中。这意味着一个有效的对象`__init__`甚至不需要被调用就可以存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:59:40.480

Symbol 的类定义只是它是`str`. 换句话说，它是大多数意图和目的的字符串。

```
>>> class Symbol(str): pass
... 
>>> x=Symbol('abc')
>>> x
'abc' 
```

这是一个新的类，这意味着解释器对它的处理会有所不同：

```
>>> x == 'abc' # __eq__ is inherited
True
>>> x is 'abc' # different memory location from 'abc'
False
>>> y='abc'
>>> y is 'abc'
True 
```

`isa`是 的（相当不必要的）重新定义`isinstance`，它只检查变量是否是 的实例`Symbol`：

```
>>> isa = isinstance
>>> isa('abc', Symbol)
False
>>> isa(x, Symbol)
True 
```

# android - ThreadPolicy 在较低的 android 版本中强制关闭

> ID：11561310
> 
> 赞同：0
> 
> 时间：2012-07-19T12:53:44.760
> 
> 标签：android

我在 android 4.0 sdk 中开发了应用程序

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
   StrictMode.setThreadPolicy(policy); 
```

由于调用外部服务而需要。

我加了

在 android 清单中也使用-sdk android:minSdkVersion="5" 。但是在使用 ThreadPolicy 的活动中，在 2.1、2.2 android 版本中强制关闭。

蚂蚁可以帮助解决这个问题..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:07:41.297

`ThreadPolicy`从 API 级别 9 开始可用，所以难怪它不适用于早期版本。您需要找到某种解决方法，或者干脆放弃使用此功能。希望这可以帮助。

# join - Windows SBS 2008：通过 VPN 连接从外部网络加入域

> ID：11561311
> 
> 赞同：-1
> 
> 时间：2012-07-19T12:53:45.003
> 
> 标签：join, dns, vpn, windows-sbs

我有一个连接两个 LAN 的 VPN 连接。其中之一有一个 Windows SBS 2008 服务器，它是我们域的域控制器。它的 IP 地址是 192.168.4.3，路由器/网关是 192.168.4.1。

另一个 LAN 有一个路由器/网关 192.168.8.1，我想从这个网络加入上述网络上的域。

这可能吗？如果是这样，怎么办？

谢谢。如果您需要任何澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T14:22:26.027

您必须在客户端 DNS 设置（VPN 接口）中使用服务器的 IP 地址。如果您尝试加入 SBS DNS，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:07:34.297

您现在可能知道这一点，但 SBS​​ 2008 将仅支持“C”类网络。我相信无法支持 VPN 远程端的 192.168.8.x 形式的可信网络。

# android - 为android中的特定api级别编译c ++

> ID：11561322
> 
> 赞同：1
> 
> 时间：2012-07-19T12:54:17.410
> 
> 标签：android, c++, android-ndk

我想为特定的 api 级别编译我的代码。例如api级别7。我使用ndk-8。有什么选择吗？

现在我在 Windows 控制台中使用 ndk-build.cmd 命令进行编译。而且我不知道如何知道支持哪个 api 级别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:12:32.153

这似乎没有很好的记录（即使在 NDK 文档中），但如果你有一个 Application.mk （与你的根 Android.mk 相同的目录），如果你有一行 APP_PLATFORM := android-7 （或其他您想要的平台版本），它将建立。Application.mk 的 NDK 文档中没有记录。根据文档，如果您在 Android.mk 中放置 TARGET_PLATFORM 行，它将使用它，但似乎有信息表明[它不起作用](http://grokbase.com/p/gg/android-ndk/1256gph9nw/setting-target-platform-has-no-effect)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:33:09.250

很好的回应，谢谢卡尔，你救了我的命。

我使用“APP_PLATFORM := android-7”，它可以工作。当我添加这一行时，编译给了我一个函数未实现的错误。然后，我将它的实现放在我的代码中，然后它就可以工作了！

我认为较新的 android 版本具有该功能，但 android-7 没有。

函数是 wcstombs（它在 stdlib 中）

它的实现是

```
size_t wcstombs(register char *s, register const wchar_t *pwcs, size_t n){
register int i = n;
while (--i >= 0) {
    if (!(*s++ = *pwcs++))
        break;
}
return n - i - 1;
} 
```

谢谢

# c# - 对从源文件编译的应用程序进行数字签名？

> ID：11561323
> 
> 赞同：0
> 
> 时间：2012-07-19T12:54:17.210
> 
> 标签：c#, .net, digital-signature

我有一个应用程序，可以让我选择一些选项、更改名称和其他首选项，然后单击 Build 按钮。一个名为 source.cs 的文件将通过 CSharpCodeProvider 编译并出现新程序。

如何在编译时对编译后的程序进行数字签名（自签名）。那么构建的程序会被数字签名吗？

对 Builder 进行数字签名以从 Builder 生成数字签名程序是否足够？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:00:19.520

程序集签名由 Al.exe 完成，即程序集链接器。当然有 API 在[做签名部分](http://msdn.microsoft.com/en-us/library/aa964998.aspx)，但我更喜欢使用[ILmerge.exe](http://www.microsoft.com/en-us/download/details.aspx?id=17630)部署解决方案并将其作为命令行在构建后对组件进行签名。要使用的命令行基本上是这个：

```
ilmerge nonsigned.dll /keyfile:key.snk /out:signed.dll 
```

所以你不会完全合并，因为只有一个程序集，但作为副作用，程序集将被签名。

# asp.net-mvc - 在MVC中将值从视图传递到控制器

> ID：11561325
> 
> 赞同：0
> 
> 时间：2012-07-19T12:54:28.423
> 
> 标签：asp.net-mvc, asp.net-mvc-2

这是我的看法

```
<form method="post" action="/LoadCustomerAndDisplay/Search">
<fieldset>
    <legend>Customer Book</legend>
    <%= Html.Label("Name") %>

    <%: Html.TextBox("Name") %>
    <br />
    <br />
    <div>
        <input type="submit" value="Sign" />
    </div>
</fieldset>
</form> 
```

这是我的控制器...

```
 public ActionResult Search() 
    {
        CustomerModels objCustomer = new CustomerModels();
        var dataval = objCustomer.getData();
        return View(dataval);

} 
```

我怎样才能在控制器中获取**名称**文本框的值并将其传递给 getData 像这样......

```
 var dataval = objCustomer.getData(ViewData['Name']); 
```

这是我放的……在 fname 上显示错误……缺少添加指令……现在有什么问题……

```
 <% Html.BeginForm("Search", "LoadCustomerAndDisplay");%>
    <%: Html.TextBoxFor(m => m.fname) %>
    <p>
        <button type="submit">
            Save</button></p>
    <% Html.EndForm();%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:58:30.007

使用强类型视图。在您的 GET 操作方法中，将 ViewModel 的对象传递给视图并使用 HTML 帮助器方法来创建输入元素。当您提交表单时，由于 MVC 模型绑定，您将在`POST`action 方法中获取值作为 ViewModel 的属性值。

您的 GET 操作可以保持不变

```
public ActionResult Search() 
{
    CustomerModels objCustomer = new CustomerModels();
    var dataval = objCustomer.getData(); 
    // Assuming this method returns the CustomerViewModel object 
    //and we will pass that to the view.

    return View(dataval);
} 
```

所以你的视图会像

```
@model CustomerViewModel
@using (Html.BeginForm())
{
  @Html.LabelFor(x=>x.Name)
  @Html.TextBoxFor(x=>x.Name)
  <input type="submit" value="Save" /> 
} 
```

并有一个**POST**操作方法来处理这个

```
[HttpPost]
public ActionResult Search(CustomerViewModel model)
{
  if(ModelState.IsValid)
  {
    string name= model.Name;

   //  you may save and redirect here (PRG pattern)
  }
  return View(model);

} 
```

假设您`objCustomer.getData()`在 GET Action 方法中的方法返回一个对象，`CustomerViewModel` 该对象具有这样的`Name`属性

```
public class CustomerViewModel
{
  public string Name { set;get;}
  //other properties as needed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:00:00.137

您可以将参数添加到接受类型 CustomerModels 的对象的搜索操作。这样，当您将某些内容发布回控制器时，模型绑定器将从表单中获取数据并生成一个 CustomerModels 类型的对象，然后您可以在您的操作中使用该对象以进行处理。为此，您需要做两件事：

1.  您的视图应该收到一个 CustomerModels 类型的模型
2.  您的操作应该类似于这个 public ActionResult Search(CustomerModels model)

如果您不想更改视图，也就是说，您不想将模型传递给您的页面，您可以尝试在控制器中使用 TryUpdateModel，或者将 FormCollection 对象传递给您的 Search 操作，然后查询该集合。

# php - 需要按标题 Doctrine 2 对整个数组进行排序

> ID：11561328
> 
> 赞同：0
> 
> 时间：2012-07-19T12:54:29.497
> 
> 标签：php, doctrine-orm

我正在使用 Doctrine 2，当我得到如下数组时。

我必须按“标题”对整个内容进行排序，它具有品牌名称、型号名称、发动机容量的级别，我需要对所有标题进行排序

```
$repo = $em->getRepository ( 'Teon_Model_Folder' );
$tree = $repo->childrenHierarchy (); 
```

我得到这样的结果，我需要按每个级别的标题排序

```
array
  0 => 
    array
      'id' => int 28
      'title' => string 'BMW' (length=3)
      'slug' => string 'bmw' (length=3)
      'flags' => null
      'lft' => int 2
      'lvl' => int 1
      'rgt' => int 105
      'root' => int 25
      '__children' => 
        array
          0 => 
            array
               'id' => int 128
               'title' => string '3-series' (length=3)
               'flags' => null
               'lvl' => int 2
                ......  
          1 => 
            array
              ...
          2 => 
            array
              ...
          3 => 
            array
              ...
          4 => 
            array
              ...
          5 => 
            array
              ...
  1 => 
    array
      'id' => int 46
      'title' => string 'Ford' (length=4)
      'slug' => string 'ford' (length=4)
      'flags' => null
      'lft' => int 106
      'lvl' => int 1
      'rgt' => int 113
      'root' => int 25
      '__children' => 
        array
          0 => 
            array
              ...
  2 => 
    array
      'id' => int 56
      'title' => string 'Honda' (length=5)
      'slug' => string 'honda' (length=5)
      'flags' => null
      'lft' => int 114
      'lvl' => int 1
      'rgt' => int 123
      'root' => int 25
      '__children' => 
        array
          0 => 
            array
              ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:58:10.667

查看 [按键排序数组](http://php.net/manual/en/function.ksort.php)

这应该按键对数组进行排序-在您的情况下，键是标题。

# c# - 正则表达式清除重复的字符

> ID：11561332
> 
> 赞同：0
> 
> 时间：2012-07-19T12:54:52.387
> 
> 标签：c#, regex

我在字符串中有这样的模式：

`T T`我想`T`

它可以是 中的任何字符`[a-z]`。

我已经尝试过这个正则[表达式示例](http://regexr.com?31ivh)，但无法替换它。

**编辑**

就像我所拥有的`A Aa ar r`那样，它应该成为`Aar`替换任何字符的第一个或第二个，无论它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:58:51.400

您可以为此使用反向引用。

```
/([a-z])\s*\1\s?/gi 
```

[例子](http://regexr.com?31j03)

更多解释：

```
(           begin matching group 1
    [a-z]   match any character from a to z
)           end matching group 1
\s*         match any amount of space characters
\1          match the result of matching group 1
            exactly as it was again
            this allows for the repition
\s?         match none or one space character
            this will allow to remove multiple
            spaces when replacing 
```

# php - PHP 中的友好 URL

> ID：11561337
> 
> 赞同：1
> 
> 时间：2012-07-19T12:55:11.327
> 
> 标签：php

这是我目前使用的 URL 路径：

```
/index.php?pid=211

I want to get the URL path as

/index/211/title of the product 
```

如何在 PHP 中创建用户友好的 URL？

以及如何获得“标题”的价值？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:58:33.567

在你的 html 代码中，你必须这样写：

```
<a href='http://www.domain.com/index/211/title-goes-here'>url_text</a> 
```

并在 htaccess 文件中调整以下内容：

```
Options +SymLinksIfOwnerMatch

RewriteEngine on

RewriteRule ^([a-zA-Z-]+)$ index.php?action=$1 [NC,L]

RewriteRule ^(member)-([0-9-]+)$ index.php?action=member&id=$2 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([a-zA-Z-]+)-([0-9-]+)$ index.php?action=$1&saction=$2&sid=$3 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([0-9-]+)$ index.php?action=$1&id=$2 [NC,L]

RewriteRule ^([0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/(.*).html$ index.php?action=details&id=$1&p1=$2&p2=$3&p3=$4 [NC,L] 
```

# java - 从位图到 Uri - Android

> ID：11561338
> 
> 赞同：0
> 
> 时间：2012-07-19T12:55:12.650
> 
> 标签：java, android, url, bitmap, uri

在我的项目中，我`Bitmap`使用以下方法将给定的内容保存到手机的本地图库中：

```
Bitmap bmp = some_fancy_bitmap;
imgeUrl = MediaStore.Images.Media.insertImage(getContentResolver(), bmp, "some Title", "some_Description"); 
```

[`MediaStore.Images.Media.insertImage`](http://developer.android.com/reference/android/provider/MediaStore.Images.Media.html#insertImage%28android.content.ContentResolver,%20android.graphics.Bitmap,%20java.lang.String,%20java.lang.String%29)获取 source `Bitmap`，保存它，并将 a`String`与`URL`新创建`null`的图像一起返回，或者如果图像由于任何原因未能存储。

这是在成功保存的情况下返回的 imageUrl 示例：`content://media/external/images/media/223`。

我现在想以资源的形式将它传递`Bitmap`给一个新的 。`Activity``Uri`

如何将我返回的 imageUrl 或直接`Bitmap`bmp 转换为资源的`Uri`?

**注意：** imageUrl 是 a `String`，我想得到一个`Uri`，而不是`URI`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:58:56.333

Uri.parse(String url) 创建一个解析给定编码 URI 字符串的 Uri。参数：uriString 符合 RFC 2396 的编码 URI 返回：此给定 uri 字符串的 Uri 抛出：NullPointerException - 如果 uriString 为 null

# javascript - Javascript :: 如何将关联数组的键获取到数组变量？

> ID：11561350
> 
> 赞同：8
> 
> 时间：2012-07-19T12:55:35.260
> 
> 标签：javascript, regex, arrays, hash, associative-array

让我们有一个这样的关联数组：

```
var aArray = {};
aArray.id = 'test';
aArray['x1'] = [1,2,3];
aArray['stackoverflow'] = 'What\'s up?';
aArray['x2'] = [4,5,6];
var keys = [];
for(var key in aArray) {
  if (aArray.hasOwnProperty(key)) {
    keys.push(key);
  }
}
console.log(keys); 
```

有没有简单/快捷的方法如何在***没有循环的情况下获取数组变量的键数组***？

如果是这样，另外，是否可以将一些正则表达式应用于键列表以仅获取与这种模式*（比如说* `/^x/`*）*匹配的键而无需另一个循环？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T13:00:45.290

> 有没有简单/快捷的方法如何在没有循环的情况下获取数组变量的键数组..？

是的，ECMAScript 5 定义[`Object.keys`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)了这样做。（[`Object.getOwnPropertyNames`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)即使是不可枚举的也可以。）大多数现代浏览器引擎可能会有它，旧的不会，但它很容易填充（例如，[这个 shim](https://github.com/kriskowal/es5-shim/)有）。

> 如果是这样，另外，是否可以将一些正则表达式应用于键列表以仅获取与这种模式匹配的键（比如说`/^x/`）而没有（另一个）循环？

不，没有内置功能，但它是一个相当简单的函数：

```
function getKeys(obj, filter) {
    var name,
        result = [];

    for (name in obj) {
        if ((!filter || filter.test(name)) && obj.hasOwnProperty(name)) {
            result[result.length] = name;
        }
    }
    return result;
} 
```

或者基于`Object.keys`（并使用 ES2015+ 功能，因为我在 2020 年末写这部分）：

```
function getKeys(obj, filter) {
    const keys = Object.keys(obj);
    return !filter ? keys : keys.filter(key => filter.test(key) && obj.hasOwnProperty(key));
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-19T12:58:05.847

***在 2020 年****，所有浏览器都支持这一点回到 IE9。这是要走的路。*

**[JavaScript 1.8.5 使用Object.keys()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)**内置了这个功能。它返回一个**包含所有键的数组**。您可以为不受支持的浏览器使用 shim（[MDN 对此也有帮助](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)）。

作为一个例子，看看这个（[jsFiddle](http://jsfiddle.net/hD5cx/1/)）......

```
var obj = { "cat" : "meow", "dog" : "woof"};
alert(Object.keys(obj)); // "cat,dog" 
```

# android - 使用 fragmentpageradapter 获取当前片段

> ID：11561358
> 
> 赞同：1
> 
> 时间：2012-07-19T12:56:04.800
> 
> 标签：android, android-fragments

编辑：问题已解决。请参阅下面的评论...

我正在尝试为我的 ViewPager 实现 OnPageChangeListener。我在确定活动片段时遇到问题（将类命名为 myFragment）。在我的 TabsAdapter 的某处设置了 Fragment：

```
@Override
public Fragment getItem(int position) 
{
      TabInfo info = mTabs.get(position);
      return Fragment.instantiate(mContext, info.clss.getName(), info.args);
} 
```

我认为，info.clss.getName() 就像 myFragment.class.getName()。如果我这样称呼：

```
FragmentManager fm = getSupportFragmentManager(); 
```

然后 myfragment.class.getName() 出现在属性中。但如果我这样称呼：

```
Fragment test = fm.findFragmentByTag(myfragment.class.getName()); 
```

测试为空。

在运行时查看 FM 是什么：

```
fm  FragmentManagerImpl  (id=830007952696)  
    mActive ArrayList  (id=830007771376)    
        array   Object[12]  (id=830008021856)   
            [0] fragment1  (id=830007965416)    
            [1] myFragment (id=830008076232)    
            [2] null    
            ...
        size    2   
    mActivity   tabActivity  (id=830007948592)  
    mAdded  ArrayList  (id=830007781264)    
    mAvailBackStackIndices  null    
    mAvailIndices   null    
    mBackStack  null    
    mBackStackChangeListeners   null    
    mBackStackIndices   null    
    mCreatedMenus   null    
    mCurState   5   
    mDestroyed  false   
    mExecCommit FragmentManagerImpl$1  (id=830007953504)    
    mExecutingActions   false   
    mHavePendingDeferredStart   false   
    mNeedMenuInvalidate false   
    mNoTransactionsBecause  null    
    mPendingActions ArrayList  (id=830007908880)    
    mStateArray null    
    mStateBundle    null    
    mStateSaved false   
    mTmpActions Runnable[1]  (id=830007783384) 
```

另一个问题是，选项卡指示器未设置为活动选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T16:33:22.137

（已在评论中回答。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 获取片段 ID 或标签的一种方法是在被调用`myFragment.getID`时`onCreateView()`调用。我试图设置一个标签，并编写更新方法......这很有效。但是非常草率，因为如果调用了更新方法，则永远不会调用 an `OnWheelChangedListener`。我有六个轮子......然后我发现了这个：[Detect ViewPager tab change inside Fragment](https://stackoverflow.com/questions/9779397/detect-viewpager-tab-change-inside-fragment)

# flash - Flex：HDvidedBox 未检测到双击事件

> ID：11561361
> 
> 赞同：0
> 
> 时间：2012-07-19T12:56:08.313
> 
> 标签：flash, apache-flex, adobe

这就是我定义 HDDividedBox 的方式：

```
<mx:HDividedBox id="hdivider" height="100%" width="100%" horizontalGap="15" doubleClickEnabled="true" doubleClick="resize(event)"> 
```

并且调整大小的方法是

```
private function resize(e:MouseEvent):void
{
 trace("comes here");
} 
```

但是双击事件永远不会到达 resize()。我的代码有什么问题？

# php - Opencart SEO 打破了分类直接

> ID：11561370
> 
> 赞同：0
> 
> 时间：2012-07-19T12:56:49.403
> 
> 标签：php, seo, rewrite, opencart

每次我启用 SEO Rewrite 时，它​​都会标记我的一个类别并将它们链接到错误的页面。

我当前使用的 hta 文件。

```
# 1.To use URL Alias you need to be running apache with mod_rewrite enabled. 

# 2\. In your opencart directory rename htaccess.txt to .htaccess. 

# For any support issues please visit: http://www.opencart.com

Options +FollowSymlinks

# Prevent Directoy listing
Options -Indexes

# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you folder it    does    run in ie. / becomes /shop/ 

RewriteBase /
RewriteRule sitemap.xml /index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

进一步解释。当我禁用 SEO 时，我可以按类别访问我的电缆，例如：Philips>Hdmi 等然后如果我启用 Seo，当我尝试访问 Philips>hdmi 时，我会在一页上获得我出售的所有 hdmi 电缆。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:52:32.143

这听起来就像您对多个类别使用相同的 SEO 关键字 (hdmi)。这是标准不允许的。您可以查看[此 mod](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6210)，它允许您为多个类别使用相同的关键字（即 philips > hdmi，samsung > hdmi）

# html - 为什么我的布局只在 Firefox 和 IE8（不是 9）中被破坏？

> ID：11561372
> 
> 赞同：0
> 
> 时间：2012-07-19T12:57:05.780
> 
> 标签：html, css, layout, cross-browser

我今天注意到我几个月前完成的一个网站在 Firefox 和 IE8 上显示不佳（在 IE9 中运行良好）。它现在已经很老了，我很确定我当时测试了浏览器的兼容性，但我想确实会出错。

问题是我似乎无法理解这个问题。基本上我有一个固定位置的左侧浮动边栏，但它在 FF 和 IE8 上呈现在右侧（在其容器之外）。我总是可以从头开始重新构建布局（它使用骨架网格系统），但仍然想了解问题。

[网站上损坏的示例页面。](http://tsolomunkh.com/about/)

尝试使用各种浏览器打开它并亲自查看。另外，如果有人在 FF 上看到它，我也很感兴趣。

非常感谢！

编辑：我不是要求整个调试。只要有人知道这个问题。

Edit2：验证器链接在这里无关紧要。我已经检查过了，它们基本上是 css 的前缀和 html 的 CMS 相关的前缀。

Edit3：我修复了它并准备了一个完整的帖子答案，但由于我是新用户，我无法在接下来的 7 小时内回答我自己的问题......所以这里是：

> 我只是根据您的回答中的提示对整个事情进行了整理（谢谢！）。
> 
> 基本上，这与浏览器如何处理固定元素上的浮动有关。想象一下，我们正在处理连续的“float:left”元素，这是大多数网格系统（960gs、bootstrap 等）中的情况。
> 
> 以下是浏览器如何在没有固定定位的情况下处理这些元素：http: [//jsfiddle.net/cPjdK/](http://jsfiddle.net/cPjdK/)和 float:right ：http: [//jsfiddle.net/cPjdK/1/](http://jsfiddle.net/cPjdK/1/)
> 
> 现在如果我们有一个很长的第三列并且想要修复第一列（我的例子）怎么办？好吧，它基本上禁用了浮动，因为固定元素不在流程中。[http://jsfiddle.net/cPjdK/9/](http://jsfiddle.net/cPjdK/9/)
> 
> 所以你必须绝对定位它们（​​或者在我的情况下有边距） [http://jsfiddle.net/cPjdK/6/](http://jsfiddle.net/cPjdK/6/)
> 
> 现在我的网站呢？固定元素不再浮动，整个网格系统有点分崩离析。解决这个问题似乎是一项漫长的工作。但是，出于某种原因，用“float:right”替换浮动元素上的“float:left”属性基本上修复了它。为什么要修复它？为什么它不能在 FF 和 IE8 上运行，但在 IE9 和 Chrome 上看起来很好。
> 
> 我不知道。
> 
> 但它现在看起来很好（经过一些调整）而且我已经得到了报酬，所以......
> 
> 问题已解决，但问题未得到解答，抱歉...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:06:30.943

You have a FIXED positioned element without giving it any coordinates.

Try giving it something like:

```
#side-right{
position:fixed;
top:0;
left:0;
} 
```

# c++ - 结构数组 - 初始化错误

> ID：11561375
> 
> 赞同：4
> 
> 时间：2012-07-19T12:57:22.743
> 
> 标签：c++, visual-c++-6

我在这里创建了一些数据结构（使用 MFC），在 MS Visual C++ 6.0 中编译（是的，它很旧）。

```
struct SOpcodeData
{
    BYTE m_byDataType;
    DWORD m_dwMinValue;
    DWORD m_dwMaxValue;
    WORD m_wRepeat;
};

const BYTE DATA_U8   = 0;
const BYTE DATA_U16  = 1;
const BYTE DATA_U32  = 2;

SOpcodeData MY_BYTE  = { DATA_U8,   0,  UCHAR_MAX,  1 };
SOpcodeData MY_WORD  = { DATA_U16,  0,  USHRT_MAX,  1 };
SOpcodeData MY_DWORD = { DATA_U32,  0,  UINT_MAX,   1 }; 
```

此代码编译时没有错误或警告。但是当我尝试创建一个结构类型的数组时......

```
SOpcodeData foo[] = { MY_BYTE, MY_BYTE, MY_WORD, MY_DWORD, MY_BYTE }; 
```

VC6 为每个数组元素弹出一个编译错误：

> device.cpp(78)：错误 C2440：“正在初始化”：无法从“struct SOpcodeData”转换为“无符号字符”
> 
> 没有可以执行此转换的用户定义转换运算符，或者无法调用该运算符

**Aparently**将整个结构类型误认为是第一个结构字段，这是一个 BYTE（或者对于那些不习惯 MFC 的人来说是 unsigned char）。

在 Visual Studio 2010 上试过，效果很好。但我需要使用 VC6 构建它。

我尝试在数组初始化中显式转换为结构类型，但这是多余的，并没有解决任何问题。还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:55:29.797

由于您坚持使用具有大量已知错误的编译器，因此您将需要一个丑陋的解决方法：

```
#define MY_BYTE_CONTENT  { DATA_U8,   0,  UCHAR_MAX,  1 }
#define MY_WORD_CONTENT  { DATA_U16,  0,  USHRT_MAX,  1 }
#define MY_DWORD_CONTENT { DATA_U32,  0,  UINT_MAX,   1 }

SOpcodeData MY_BYTE  = MY_BYTE_CONTENT;
SOpcodeData MY_WORD  = MY_WORD_CONTENT;
SOpcodeData MY_DWORD = MY_DWORD_CONTENT;

SOpcodeData foo[] = { MY_BYTE_CONTENT, MY_BYTE_CONTENT, MY_WORD_CONTENT, MY_DWORD_CONTENT, MY_BYTE_CONTENT }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:22:11.427

我们已经找到了另一种解决方案，不使用`#define`: 使用构造函数来初始化数据结构。像这样排序：

```
struct SOpcodeData
{
    SOpcodeData (const BYTE byDataType, const DWORD dwMinValue, const DWORD dwMaxValue, const WORD wRepeat)
      : m_byDataType(byDataType), m_dwMinValue(dwMinValue), m_dwMaxValue(dwMaxValue), m_wRepeat(wRepeat)
    {}

    BYTE m_byDataType;
    DWORD m_dwMinValue;
    DWORD m_dwMaxValue;
    WORD m_wRepeat;
};

SOpcodeData MY_BYTE  (DATA_U8,   0,  UCHAR_MAX,  1);
SOpcodeData MY_WORD  (DATA_U16,  0,  USHRT_MAX,  1);
SOpcodeData MY_DWORD (DATA_U32,  0,  UINT_MAX,   1);

SOpcodeData foo[] = { MY_BYTE, MY_WORD, MY_DWORD }; 
```

谢谢大家！

# vbscript - shift + 箭头键

> ID：11561376
> 
> 赞同：0
> 
> 时间：2012-07-19T12:57:23.323
> 
> 标签：vbscript

您好我想自动化从“Personal Communications iSeries Access for Windows”中选择一些行的过程。 [http://i.stack.imgur.com/doshI.jpg](http://i.stack.imgur.com/doshI.jpg) 手动可以通过以下方式完成：- 1\. 从鼠标中选择（按住鼠标左键拖动鼠标） 2\. 定位光标并按 SHIFT+箭头键（UP/下/左/右）。

我尝试通过以下方式使用 VBScript 进行操作：-

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.SendKeys "{RIGHT 5}"     'Position the cursor
WshShell.SendKeys "+{RIGHT 5}"    'Sending SHIFT+Right Arrow five times 
```

但是 shift+RIGHT Arrow Keys 的代码对我不起作用。它正在写 66666。同样，`WshShell.SendKeys "+{LEFT 5}"`我得到 44444 作为输出。

这些 VBScript sendkeys 命令适用于其他 Windows 应用程序（如 MS Word、记事本）。

知道如何进行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:10:59.783

尝试打开 NumLock，然后使用数字 4 和 6 上的箭头键。

# php - 关于开发 RETS PHP Tunnel 的建议

> ID：11561381
> 
> 赞同：0
> 
> 时间：2012-07-19T12:57:39.057
> 
> 标签：php, http-tunneling, rets, proxytunnel

我已经部分开发了一个从 RETS IDX 获取房产数据的房产网站。您可能知道 RETS 服务器通过 http 协议侦听端口 6103。我的网站部署在共享主机上，因此无法连接到 6103 端口。我确实有一个专用服务器（允许连接到端口 6103）。我想将此专用服务器用作我的网站和 RETS IDX 服务器之间的中间层。我的问题是我想开发那个中间层脚本，即 HTTP 隧道。

我的网站会将所有 RETS 请求发送到此隧道，同时将其发送到 RETS IDX 服务器，其响应将同时发送回网站。

```
 port 80                                 port 6103

Website (shared hosting) ----------> Tunnel (Dedicated hosting)  -----------> RETS Server 
```

RETS Server 也需要登录，所以会话应该保持正常。

我想有快速/最好的解决方案来完成这项工作。可能是通过 .htaccess 或流式 php 脚本，或者可能是一些第三方脚本也可以减少我的一些时间。

我很想听听您的任何想法或建议。

PS：我不能将我的网站移动到专用服务器上，因为在不久的将来我将拥有大量它们并且它们会花费太多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:08:59.190

我个人会选择[反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)方法。这将允许您根据可配置的标准智能地转发请求。

Apache 和 nginx 都具有反向代理功能（实际上这是 nginx 的初衷）。对于 Apache，您需要使用`mod_proxy`，而 nginx 具有内置功能，除非您在编译之前明确禁用它。

在这两个选项中，我个人更喜欢 nginx，它健壮且轻量级，并且完全符合目的。我发现 Apache 比较麻烦，但是如果您已经在专用服务器上设置了 Apache，您可能更愿意使用它。

使用 Web 服务器进行代理的美妙之处在于它们*了解底层协议*。它们将保留标头、修改 cookie（保留会话）并正确翻译主机名。

* * *

**阿帕奇配置**

在这两种情况下，配置都非常简单，Apache 配置如下所示：

```
<Location /proxy-location/>
    ProxyPass /rets http://rets-server:6103/api/path
    ProxyPassReverse /rets http://rets-server:6103/api/path
</Location> 
```

还有用于调整 cookie、设置超时等的选项。所有这些都可以在[mod_proxy 文档中找到](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

您应该注意，这**不能**放在`.htaccess`文件中。它必须进入主服务器配置。

* * *

**nginx 配置**

同样简单

```
location /proxy-location {
    proxy_pass        http://rets-server:6103/api/path;
} 
```

[HttpProxyModule 文档](http://wiki.nginx.org/HttpProxyModule)中再次有大量选项用于缓存、重写 url、添加标头等。

* * *

请*务必*查阅文档。我没有测试过这些配置中的任何一个，它们可能有点偏离，因为它们来自记忆+快速谷歌。

确保通过代理到无法访问的服务器来测试您的应用程序，并确保它正确处理故障，因为您*正在*引入另一个故障点。

我正在假设您能够配置自己的专用服务器。如果不是这种情况，您的房东可能愿意帮助您。如果不给我留言，我会尝试提出一个更强大的 curl 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:45:52.533

您可以通过使用 curl 的 PHP 扩展来实现这一点。

示例代码可以是：

```
$url = $_GET['url'];

$ch = curl_init( $url );
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$content = curl_exec($ch);

echo $content; 
```

显然你必须添加保护，也许添加 .htaccess/.htpasswrd 保护。

可以在那里找到更完整的代码，支持 cookie 等：[https ://github.com/cowboy/php-simple-proxy](https://github.com/cowboy/php-simple-proxy)

# javascript - 来自jquery的.append中的img标签中的onclick属性

> ID：11561382
> 
> 赞同：-1
> 
> 时间：2012-07-19T12:57:41.690
> 
> 标签：javascript, jquery, html, internet-explorer

我正在尝试从 js 代码中添加一些标签

我在 jquery 中发现了一个有趣的函数：append x)

我在我的 .js 中得到了这个：

```
function goClick(target) {
}

function clickChapDiv(event) {
     $(event.currentTarget.parentNode).append("<span> <img src=\"../images/popUp.png\" /> <span class=\"textPopUp\"> <span class=\"notePopUp\">B-</span> <span class=\"titlePopUp\"> 3-JE TESTES </span> <img src=\"../images/minigo.png\" class=\"buttonPopUp\" onclick=\"goClick(this);\" /> </span>");
} 
```

但这不起作用，如果我删除 onclick=\"goClick(this);\"，它正在工作，但（正常...）上没有事件

有人知道我的问题吗？因为我在 .append 中看到了一些带有 onclick 事件的代码，并且他们的代码正在运行......

感谢您的未来答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:09:44.797

下面是您的代码。它没有完全关闭，这可能会导致您的问题

```
<span> 
  <img src=\"../images/popUp.png\" /> 
  <span class=\"textPopUp\">
    <span class=\"notePopUp\">B-</span> 
    <span class=\"titlePopUp\"> 3-JE TESTES </span>
    <img src=\"../images/minigo.png\" class=\"buttonPopUp\" onclick=\"goClick(this);\" />         
  </span> 
```

在末尾添加额外的跨度。

当元素添加到 DOM 时，您还需要绑定 click 事件。

相反，您想使用`.live`. [见这里](http://api.jquery.com/live/)。

```
$(".buttonPopUp").live("click", function(){
  goClick(this);
}) 
```

# php - php/sql 选择所有在 48 小时内过期的

> ID：11561383
> 
> 赞同：0
> 
> 时间：2012-07-19T12:57:45.307
> 
> 标签：php, sql, mysqli

我有一个表，其中包含一个名为 的字段`creationdate`，将 14 天添加到该值，您就有了到期日期。（顺便说一下，所有的都是unix时间戳，所以14天就是creationtime + 1209600）

现在我需要构建一个`SELECT`语句，该语句将从该表中选择此到期日期后 48 小时内的所有行，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:02:45.033

这个怎么样？你现在得到的是创建日期的 12 天到 14 天之间的所有内容：

```
SELECT
  *
FROM
  my_table
WHERE
  UNIX_TIMESTAMP() BETWEEN (creationtime + 1036800) AND (creationtime + 1209600) 
```

# asp.net - 如何在 LINQ 中使用多个 order by？

> ID：11561391
> 
> 赞同：2
> 
> 时间：2012-07-19T12:58:16.113
> 
> 标签：asp.net, linq, sorting

我想在我的查询中使用多个 order by，并且我正在使用 LINQ。我是 LINQ 的新手，我已经尝试了 stackoverflow 上给出的示例。但我不知道为什么这些对我不起作用，我确信我在某些地方错了。下面是我的情况。我有一个使用 LINQ 创建的项目。我几乎没有设置列顺序的任务。实际上我的任务是有一个列创建日期，现在它的排序。现在我想使用 Createddate 以及 sortOrder 列进行排序。下面是用于它的代码：**页面加载**方法中的代码

```
ViewState["SortDirection"] = "desc";
ViewState["SortColumn"] = "createddate";
BindAllTopics(ViewState["SortDirection"].ToString(), ViewState["SortColumn"].ToString()); 
```

我的**BindAllTopic**方法如下：

```
 protected void BindAllTopics(string SortType, string SortColumn)
{
    var LstTopics = (from topic in Dbobj.T_topic select topic).ToList();
    if (LstTopics.Count() > 0)
    {
        if (SortType == "ASC")
        {
            LstTopics = LstTopics.OrderBy(q => q.Name).ToList();
        }
        else
        {
            LstTopics = LstTopics.OrderByDescending(q => q.Name).ThenBy(q => q.SortOrder).ToList();
        }
        GrdTopics.DataSource = LstTopics.ToList();
        GrdTopics.PageSize = 25;
        GrdTopics.DataBind();

    }
    else
    {
        GrdTopics.DataSource = null;
        GrdTopics.DataBind();
        lblMsg.DisplayMessage(StatusMessages.InfoMessage, "No Topics Found.");
    }
} 
```

我想首先按 int 类型的 sortorder 排序，然后按 Createddate 排序。

请帮我..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T13:04:55.717

您可以在跟踪中再添加一个 ThenBy()

```
LstTopics.OrderByDescending(q => q.Name).ThenBy(q => q.SortOrder).ThenBy(m=>m.date) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:47:08.020

如果您不想使用 Dynamic Linq，请参阅以下 Marc Gravell 的回答

[stackoverflow:Dynamic Linq OrderBy](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:05:44.200

更正后，您可以通过 Dynamic Linq 实现此目的

```
LstTopics = LstTopics.OrderBy(SortColumn + " " +  SortType);) 
```

# objective-c - ImageMagick 棕褐色效果

> ID：11561392
> 
> 赞同：0
> 
> 时间：2012-07-19T12:58:20.770
> 
> 标签：objective-c, xcode, macos, cocoa, imagemagick

我正在使用 ImageMagick 来处理我的图像。如何使用 ImageMagick 为我的图像添加棕褐色效果？我发现这是可能的（[链接](http://www.imagemagick.org/script/command-line-options.php#sepia-tone)），但我还没有找到任何关于如何做到这一点的信息。

我正在使用 Objective-C 进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:48:18.007

在命令行上它是这样工作的：

```
convert image.jpeg -sepia-tone 80% sepia.png    # input: JPEG, output: PNG
convert image.jpeg -sepia-tone 90% sepia.tiff   # input: JPEG, output: TIFF, less sepia
convert image.jpeg -sepia-tone 70% sepia.tiff   # input: JPEG, output: TIFF, more sepia
convert image.png  -sepia-tone 60% sepia.png    # input: PNG, output: PNG, even more sepia 
```

容易，不是吗。只需尝试一下以确定您想要*多少*（或多少）棕褐色。

# c# - 与 ObservableCollection 绑定的 ComboBox

> ID：11561396
> 
> 赞同：2
> 
> 时间：2012-07-19T12:58:30.567
> 
> 标签：c#, wpf, binding, combobox, observablecollection

我的任务是向已经存在的 WPF 表单添加一个组合框。我从来没有使用过 WPF，我很迷茫，特别是在绑定和使用 ObservableCollection 属性时。所有的例子都与我被告知这样做的方式完全不同。

我最初的组合框是这样设置的：

```
<ComboBox Name="GroupComboBox" Width="132" Height="22" Grid.Column="0" Grid.Row="3" Margin="0,30" VerticalAlignment="Top" >         
    <ComboBoxItem Content="Data Warehouse"></ComboBoxItem>
    <ComboBoxItem Content="KPI"></ComboBoxItem>
    <ComboBoxItem Content="Failures"></ComboBoxItem>
    <ComboBoxItem Content="All Groups"></ComboBoxItem>            
</ComboBox> 
```

效果很好。这是当我被告知我必须摆脱所有 ComboBoxItem 内容并将组合框绑定到 ObservableCollectionGroups 和 ObservableCollectionSelectedGroups 时，我所要做的就是将其添加到 ViewModel 类中：

```
 public ObservableCollection<string> Groups { get; set; }      

 public ObservableCollection<string> SelectedGroups { get; set; } 
```

好的，所以我将上面的内容添加到视图模型类中，如下所示：

```
public class ClioViewModel : INotifyPropertyChanged
{
    public ObservableCollection<string> Groups { get; set; }      

    public ObservableCollection<string> SelectedGroups { get; set; }
} 
```

（这门课上还有很多其他的东西，但是为了时间和空间，我没有发布它。如果需要，如果需要，我很乐意添加更多内容）

然后我将我的 xaml 更改为如下所示：

```
<ComboBox Name="GroupComboBox" ItemsSource="{Binding Groups}" SelectedItem=" Binding  SelectedGroups, Mode=TwoWay}" Width="132" Height="22" Grid.Column="0" Grid.Row="3" Margin="0,30" VerticalAlignment="Top" >                         
</ComboBox> 
```

这没有用。当然没用！我没有在我的组合框中列出任何我想要的项目！问题是，如果它们不属于组合框内部并且它们没有被放入 Group/Selected 组属性中，那么它们到底去哪里了？我见过的众多组合框绑定示例中没有一个看起来像我被告知要做的事情。

如果有人能启发我了解我所缺少的东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:12:12.887

您需要在`Group`集合中的某处添加值（在初始化程序或类构造函数中，我会说）：

```
Groups.Add("Data Warehouse");
Groups.Add("Data KPI");
Groups.Add("Data Failures");
Groups.Add("Data All Groups"); 
```

坦率地说，在这种情况下，我没有看到这样做的意义，但它可能与您的其余代码有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:25:52.493

就像大卫说的 - 填写您的群组收藏。第二：确保将**DataContext**设置为 viewmodel 的实例。您对 itemssource 的绑定是正确的。SelectedItem 的绑定不正确：您可以绑定到字符串属性。Mode = Twoway仅需要从ViewModel完成选择时就需要。

```
 public string MySelectedItem
 {
   get{return this._myselecteditem;}
   set{this._myselecteditem=value; OnPropertyChanged("MySelectedItem");}
 } 
```

xml

```
 <ComboBox ItemsSource="{Binding Groups}" SelectedItem="{Binding MySelectedItem, Mode=TwoWay}"/> 
```

# html - 编辑从记录集中抓取的数据

> ID：11561399
> 
> 赞同：2
> 
> 时间：2012-07-19T12:58:38.793
> 
> 标签：html, asp-classic

是否可以编辑从记录集中获取的数据？就我而言，我正在尝试将数量相加，以便获得总数。所以我想要做的一个例子是：

```
<% 
   set rs = server.CreateObject("ADODB.recordset")
   totalqty = 0

   do NOT while rs.EOF
       totalqty = totalqty + rs("QTY")
   loop
>% 
```

每当我尝试做这样的事情时，我总是会得到一个“类型不匹配”错误，我不知道如何解决这个问题。

与往常一样，我们将不胜感激任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:58:10.257

尝试像这样“转换”记录集中的值：

```
CDbl( rs.fields("QTY").value ) 
```

这会将值转换为双精度值。如果值为 null，您将收到错误消息，因此您必须先检查...

或者您可以编写一个函数来始终获得正确的类型：

```
public function parse(value, alternative)
    dim val
    val = trim(value & "")
    parse = alternative
    if val = "" then exit function
    on error resume next
    select case varType(parse)
        case 2, 3 'integer, long
            parse = cLng(val)
        case 4, 5 'single, double
            parse = cdbl(val)
        case 6  'currency
            parse = ccur(val)
        case 7 'date
            parse = cDate(val)
        case 11 'bool
            parse = cBool(val)
        case 8 'string
            parse = value & ""
        case else
            on error goto 0
            lib.throwError("type not supported. val:" & value & " alt:" & alternative)
    end select
    on error goto 0
end function

dim val : val = rs("QTY")
val = parse(val, 0)

' now val is always an integer (either the value from db or 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:06:24.290

ulluoink 的解决方案会起作用，但这更简单......

```
function ToDbl(vIn, nDefault)
    'Convert a variant to an integer using default where necessary
    if isnull(vIn) then
        ToDbl = nDefault
    else
        if IsNumeric(CStr(vIn)) Then
            ToDbl = CDbl(vIn)
        else
            ToDbl = nDefault
        end if
    end if
end function 
```

然后只需调用：

```
totalqty = totalqty + ToDbl(rs("QTY"), 0) 
```

# c# - 即使页面有 id，html 敏捷包也不会返回任何 id？

> ID：11561400
> 
> 赞同：0
> 
> 时间：2012-07-19T12:58:39.900
> 
> 标签：c#, vb.net, xpath, html-agility-pack, vb.net-2010

为什么此代码不会返回通用列表中的任何 ID。网页在 div 元素中肯定有 id。如果我断点它，则属性`Id`中没有 id`DocumentNode.SelectNodes`并且`htmlDoc.DocumentNode.SelectNodes("//div[@id]")`不起作用。我正在使用 .NET 2.0 和 HtmlAgilityPack.dll 1.4.0.0。

```
Imports HtmlAgilityPack

Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim listHtmlFound As List(Of String) = New List(Of String)
        Dim webGet As HtmlWeb = New HtmlWeb
        Dim htmlDoc As HtmlDocument = webGet.Load("http://stackoverflow.com/q/11528387/1350308")
        htmlDoc.OptionUseIdAttribute = True
        'Dim s As Object = htmlDoc.DocumentNode.SelectNodes("//div/@id").Count
        For Each div As HtmlNode In htmlDoc.DocumentNode.SelectNodes("//div")
            listHtmlFound.Add(div.Id)
        Next
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:16:23.957

你不需要这个：

```
 htmlDoc.DocumentNode.SelectNodes("//div[@id]") 
```

选择`<div>`具有`id`属性的所有节点，而不是所有`id`属性本身？

**编辑**
如果`Id`of 的属性`HtmlNode`不起作用，您始终可以使用该`Attributes`属性：循环遍历该属性以找到一个`Name = "id"`并使用它的`Value`.

# c++ - 继承 SHBrowseForFolder 并处理 WM_NOTIFY

> ID：11561401
> 
> 赞同：3
> 
> 时间：2012-07-19T12:58:44.577
> 
> 标签：c++, winapi, windows-shell

我正在尝试修复 SHBrowseForFolder 对话框，因为它不会对文件夹重命名做出反应（`BFFM_SELCHANGED`没有发送，也无法确定路径现在是否正确）。我用谷歌搜索了一个解决方案，它说我必须继承 dlg 的 wndproc 并捕获`TVN_ENDLABELEDIT`发送`BFFM_SELCHANGED`自己。

这是我在获得时设置新 wndproc 的方式`BFFM_INITIALIZED`：

```
for (HWND hChild = GetWindow(hWnd, GW_CHILD); hChild != 0; hChild = GetWindow(hChild, GW_HWNDNEXT)) {
    szClassName[256];
    GetClassName(hChild, szClassName, sizeof(szClassName));
    if (!stricmp(szClassName, "SHBROWSEFORFOLDER SHELLNAMESPACE CONTROL")) {
        oldWndProc = reinterpret_cast<WNDPROC>(SetWindowLongPtr(hChild, GWLP_WNDPROC, reinterpret_cast<LONG_PTR>(_SubclassWndProc)));
        break;
    }
} 
```

这是_SubclassWndProc：

```
static LRESULT _SubclassWndProc(HWND hWnd, UINT uMsg, WPARAM lParam, LPARAM lpData) {
  switch (uMsg) {
     case WM_NOTIFY:
        switch (((LPNMHDR)lParam)->code) {
           case TVN_ENDLABELEDIT:
              break;
        }
        break;
  }
  return CallWindowProc(oldWndProc, hWnd, uMsg, lParam, lpData);
} 
```

只有当我评论`WM_NOTIFY`块时它才有效。甚至可以访问`lParam`中断对话框（它包含带有空标签的损坏树）。如果我在 switch 之前调用 oldWndProc ，那么它可以工作，但`WM_NOTIFY`如果`lParam`显然不包含指向 的指针`NMHDR`，它会包含一个小整数值，如 1,2,100 等。

**编辑：**这个问题可以缩短为“为什么 WM_NOTIFY 没有指向 NMHDR 的指针？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:09:29.683

该错误是由于我的疏忽造成的：我从一些示例中复制了 wndproc 签名，该示例中的 agrument 名称混淆了。lParam 通常排在最后，并且具有 LPARAM 类型。所以我试图转换通常称为 wParam 的 arg，它包含一个控件 id 而不是 LPNMHDR。

# jquery - 'jQuery' 未定义 IE8

> ID：11561408
> 
> 赞同：0
> 
> 时间：2012-07-19T12:58:56.003
> 
> 标签：jquery

在[我的网站上](http://www.notable.ca/stoli)，包含以下内容时出现以下错误`jquery.easing.1.3.js`：

```
'jQuery' is undefined. jquery.easing.1.3.js
code 0
URI: http://notable.ca/stoli/js/jquery.easing.1.3.js
line 39
char 1 
```

有谁知道这意味着什么？

这是我包含脚本的方式：

```
<script type="text/javascript" src="http://notable.ca/stoli/js/onload_basic.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/widths.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/jquery.easing.1.3.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/validation.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:01:22.397

您需要在此插件之前的 html 中包含 jQuery 库。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/onload_basic.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/widths.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/validation.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:02:31.020

你的JS加载顺序是错误的。

Jquery 应该是第*一个*被加载的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:01:40.453

在包含缓动脚本*后，*您将包含 jQuery ：

```
<script type="text/javascript" src="http://notable.ca/stoli/js/jquery.easing.1.3.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

easing 依赖于 jQuery，所以你需要先包含它。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://notable.ca/stoli/js/jquery.easing.1.3.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:01:57.557

在加载 jQuery 之前，您已包含该插件。将 jQuery 加载移动到 JavaScript 包含的顶部。

# python - Django 管理员列表视图

> ID：11561411
> 
> 赞同：4
> 
> 时间：2012-07-19T12:58:59.397
> 
> 标签：python, django, django-admin

我有这样的模型：

```
class MyModel(models.Model):
  user = models.ForeignKey(User)
  field1 = models.CharField(max_length=100, db_index=True, null=False, blank=False)
  field2 = models.CharField(max_length=100) 
```

当然，它显示为如下列表：

```
user1 | field1 | field2
user1 | field1 | field2
user2 | field1 | field2
user2 | field1 | field2 
```

我想展示它：

```
user1 | field1_count() | field2_count()
user2 | field1_count() | field2_count() 
```

我知道如何为用户计算 field1_count() 和 field2_count()，但是如何为每个用户保留一行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:18:13.777

您可以使用[list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)属性来定义在管理员的更改列表页面中显示哪些字段。

```
class MyAdmin(admin.ModelAdmin):
    list_display = ('username', 'field1_count', 'field2_count')

    def field1_count(self, obj):
        # count field1
        return c

    def field2_count(self, obj):
        # count field2
        return c

 admin.site.register(User, MyAdmin) 
```

请注意，这将在您的更改列表页面中的每行至少进行两次查询，这在您的情况下可能是也可能不是问题。

或者，您可以尝试覆盖[ModelAdmin.queryset](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset)或[ModelAdmin.changelist_view](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.changelist_view)。

# android - C2DMReg - handleRequest 捕获 java.net.UnknownHostException: android.clients.google.com

> ID：11561412
> 
> 赞同：1
> 
> 时间：2012-07-19T12:59:05.753
> 
> 标签：android, android-c2dm, google-cloud-messaging, unknown-host

我的问题与**[C2DMReg] handleRequest 捕获 java.net.UnknownHostException: android.clients.google.com**有关我在 StackOverflow 中发现了一些[问题，其标题相同](https://stackoverflow.com/questions/9597542/c2dmreg-handlerequest-caught-java-net-unknownhostexception-android-clients-goog)，已被标记为重复。但所提到的副本与这里所关心的问题无关。这与新的 GCM 相关 - 而不是 C2DM。

我的代码源[来自 Android API Guide 中的 GCM 教程](http://developer.android.com/guide/google/gcm/gcm.html#writing_apps)

* * *

我向 GCM 注册设备的功能如下：

```
public void register_device(Context c){
    Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
    registrationIntent.putExtra("app", PendingIntent.getBroadcast(c, 0, new Intent(), 0));
    registrationIntent.putExtra("sender", c.getResources().getString(R.string.SERVER_API_KEY));
    Log.i("GCM", "Starting service for registration Intent");
} 
```

我的 BroadCastReceiver 类如下：

```
public class MyBroadcastReceiver extends BroadcastReceiver {
    public final void onReceive(Context context, Intent intent) {
        Log.i("GCM", "Received broadcast from Intent: " + intent);
        MyIntentService.runIntentInService(context, intent);
        setResult(MainActivity.RESULT_OK, null, null);
    }
} 
```

我的清单文件包含 MyBroadcastReceiver 的权限，如下所示

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<permission
    android:name="com.mangoesmobile.praxis.pusher.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.mangoesmobile.praxis.pusher.permission.C2D_MESSAGE" />

<application>
    <receiver
        android:name=".MyBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.mangoesmobile.praxis.pusher" />
        </intent-filter>
    </receiver>
</application> 
```

日志显示来自 register_device 函数（）的自定义日志`Starting service for registration Intent`

然后`[C2DMReg] handleRequest caught java.net.UnknownHostException: android.clients.google.com` 用标签显示`C2DMRegistrar`

它从不显示`Received broadcast from Intent`来自 MyBroadcastReceiver 的自定义日志。所以我相信它永远不会到达 MyBroadcastReceiver。我无法弄清楚为什么会发生这种情况。

我没有使用模拟器。我正在使用我自己的设备，并且它是使用谷歌帐户注册的。

# for-loop - clojure中的for循环

> ID：11561413
> 
> 赞同：0
> 
> 时间：2012-07-19T12:59:09.797
> 
> 标签：for-loop, clojure

```
 n = (count somevector)        
   (foo [w] ( for [i (range n) 
                   j (range w)
                   :let [n (* i j)] 
                   :while ( < i j)
                  ] 
              (println n))) 
```

当我运行它时。

=> (foo 10) `ClassCastException` `clojure`。`lang`. `LazySeq`不能转换为`clojure`. `lang`. `IFn` HelloWorld.core/foo

我真正想做的是有几个嵌套的 for 循环，并有一些 if 和 else 在里面做一些检查。

编辑 ：：

事实证明，以下也会导致错误

```
(defn foo [arg]
 (      
      for [ i (range (count vector)) ]
      (
        for [j arg ]
        [i j]
        ) 

     ) ) 
```

IllegalArgumentException 不知道如何从：java.lang.Long clojure.lang.RT.seqFrom 创建 ISeq

编辑：：

以下作品

```
(defn foo [arg]
  (def w arg) 
(for [ i (range (count vector)) ]
      (
        for [j (range v)  ]
        [i j]
        )
  )   ) 
```

现在有人可以帮我理解为什么它一开始就不起作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:24:17.863

如果使用`:while`,`for-loop`将返回 null，因为第一个值为 false， `:when`更好。

```
user=> (for [i (range 3) j (range 5)] [i j])
([0 0] [0 1] [0 2] [0 3] [0 4] [1 0] [1 1] [1 2] [1 3] [1 4] [2 0] [2 1] [2 2] [2 3] [2 4])
user=> (for [i (range 3) j (range 5) :while (< i j)] [i j])
()
user=> (for [i (range 3) j (range 5) :when (< i j)] [i j])
([0 1] [0 2] [0 3] [0 4] [1 2] [1 3] [1 4] [2 3] [2 4]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T14:15:40.073

> 不知道如何从：java.lang.Long clojure.lang.RT.seqFrom 创建 ISeq

此错误消息准确地说明了异常的原因。我猜你在预期的地方传递了一个`long`值。`seq`我可以重现它：

```
user> (def v [1 2 3])
#'user/v
user> (defn foo [arg]
        (for [ i (range (count v)) ]
             (for [j arg ]
                  [i j]))) 
#'user/foo
user> (foo (range 3))
(([0 0] [0 1] [0 2]) ([1 0] [1 1] [1 2]) ([2 0] [2 1] [2 2]))
user> (foo 3)
; Evaluation aborted.
; Don't know how to create ISeq from: java.lang.Long
;  [Thrown class java.lang.IllegalArgumentException] 
```

你的`foo`功能有效。但是，`arg`参数必须是 a `seq`，因为`arg`绑定在嵌套`for`到`j`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T07:12:28.523

您应该知道的第一件事是，clojure`for`不是 for 循环，而是[列表理解](http://en.wikipedia.org/wiki/List_comprehension)。

这意味着，它用于构建具有指定属性的列表（实际上是惰性序列）。

您的原件`for`如下所示：

```
(for [i (range n) 
      j (range w)
      :let [n (* i j)] 
      :while ( < i j)] 
  (println n)) 
```

（我的原始示例没有出现类转换异常）。

它说的是：采取成对的`i`和`j`同时`i < j`做某事。第一对`i`and`j`是`i = 0`and `j = 0`。0 < 0 吗？不停。也就是说，您正在构建一个空序列。

现在，如果我们改变`:while`with `:when`，它的含义会改变为：对于每一对`i`and `j`，对于 which `i < j`，并且对它们做一些事情。也就是说，当你遇到 i >= j 时，你不会停止构建序列，你会跳过这对。

接下来要注意的是`println`. 这个函数打印它的参数，但总是返回`nil`。此返回值是您将在结果序列中获得的值，打印称为副作用。通常，您不希望惰性序列产生副作用，因为它们（副作用）会在需要时发生。也就是说，如果将返回的序列分配给某个变量，`println`则不会调用任何 s。*当序列实现*时，它们将开始弹出。

底线是，不要将`for`其视为循环，将其视为序列构造函数。

# c++ - `mpl::plus< mpl::int_<1>, mpl::int_<2> >::type` 与 `mpl::int_<3>` 的类型不同？

> ID：11561418
> 
> 赞同：4
> 
> 时间：2012-07-19T12:59:23.750
> 
> 标签：c++, boost, c++11, template-meta-programming, boost-mpl

下面的代码重现了我真的不了解 boost MPL 库的行为：

```
#include <boost/type_traits/is_same.hpp>
#include <boost/mpl/int.hpp>
#include <boost/mpl/plus.hpp>

using namespace boost;

int main() {
  typedef mpl::int_<1> one;
  typedef mpl::int_<2> two;
  typedef mpl::int_<3> three;
  // The following line breaks compilation...
  // static_assert( is_same< mpl::plus<one,two>::type, three >::type::value, "Not the same type");
  // ...while this works
  static_assert( mpl::plus<one,two>::type::value == three::value , "Not the same value");
  return 0;
} 
```

我的问题是：**为什么`mpl::plus<one,two>::type`不是同一类型`three`？**

我在尝试解决 [C++ Template Meta-Programming](http://www.boostpro.com/mplbook/)第 3 章末尾的练习时遇到了这个问题。我已经尝试查看`<boost/mpl/plus.hpp>`其中包含的内容，但是代码太复杂了，我无法理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:22:03.397

的返回类型`plus`只保证是一个整数常量。您无法保证它的确切类型，因此您的断言*允许*失败。

确切的类型是这样的：

```
mpl::plus<one,two>::type == mpl_::integral_c<int, 3>
three == foo<mpl_::int_<3> > 
```

这是不直观的。一个问题是`plus<int_, int_>`理论上可以返回 a`integral_c`其中第一个参数具有更大的容量然后`int_`在溢出的情况下。

对于调试 a`type printer`可能很有用：

```
template<typename> print; // undefined instantiation leads to error with name
print<three> x; // nice error message 
```

# excel - 如何使用 vba for excel 在另一个工作簿中获取已定义名称的值

> ID：11561421
> 
> 赞同：1
> 
> 时间：2012-07-19T12:59:36.970
> 
> 标签：excel, named-ranges, vba

我有几本包含计算的工作簿，我正在做一个“自动概述”，结合所有这些工作表中的数据。为了找到我使用命名范围的数据。这些工作正常。
但是，有一个定义的名称不引用范围。这是一个公式。

我想要的是从我的概述书中访问该公式（在**打开**的计算书中）的结果。

显然`wb.Names("myNamedFormula").RefersToRange`不起作用，因为名称不指代范围。
`wb.Names("myNamedFormula").Value`给我公式，但不是结果。该名称的成员都没有得到结果。
我尝试使用评估公式，`Evaluate(...)`但这不起作用，因为它应该在另一个工作簿中评估。

有谁知道如何得到结果？

谢谢，

ps：我知道一种可能性是让名称引用一个范围，然后在那里进行计算，但我不希望那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:41:55.267

我认为您将不得不使用 Worksheet.Evaluate 而不是 Application.evaluate （请注意，命名公式中的所有引用都应该是完全限定的绝对引用）。试试这个语法评估

```
ansa = Workbooks("Book1.xlsb").Worksheets(1).Evaluate(Workbooks("Book1.xlsb").Names("AddNumbers").RefersTo) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:21:05.787

这有点混乱，但是：

将公式添加到计算 wb 中的单元格`=MyNamedFormula` （假设为 Sheet1 上的示例单元格 A1）

在计算 wb`PointsToMyNamedFormula`中添加一个名称，指`Sheet1!A1`

然后你可以参考`wb.Names("PointsToMyNamedFormula").RefersToRange.Value1`

# ms-access - 在 Access 2010 中将行中的一组值转换为列

> ID：11561422
> 
> 赞同：1
> 
> 时间：2012-07-19T12:59:39.017
> 
> 标签：ms-access, vba

我有一个看起来像这样的 Access 数据库：

```
ID     |   TestDate   |  Test1  |  Test2  |  Test 3  |
1      |    Date1     |   10    |    20   |    25    |
1      |    Date2     |   8     |    21   |    23    |
1      |    Date3     |   9     |    18   |    23    |
2      |    Date1     |   13    |    19   |    22    | 
```

我想将行数据转换为列并保留先前列标题的名称，如下所示：

```
ID = 1
       |   Date1   |  Date2  |  Date3  |   etc...
Test1  |    10     |    8    |    3    |
Test2  |    20     |   21    |   18    |
Test3  |    25     |   23    |   23    |

ID = 2
       |   Date1   |
Test1  |    13     |
Test2  |    19     |
Test3  |    22     |

*The Date1 in the different IDs need not be the same. Date1 is the date the ID 
 had the Test for the first time. 
```

这样就更容易监控测试值的趋势。我尝试查找，但偶然发现的查询添加了值。我只需要转置数据而无需复制并粘贴到 Excel 中。非常感谢任何 MS Access 查询或 VBA 代码。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:23:22.447

怎么样：

```
TRANSFORM SUM(q.testval) AS sumoftestval
SELECT q.id,
       q.test
FROM   (SELECT t2.id,
               t2.testdate,
               "test1"  AS Test,
               t2.test1 AS TestVal
        FROM   t2
        UNION ALL
        SELECT t2.id,
               t2.testdate,
               "test2"  AS Test,
               t2.test2 AS TestVal
        FROM   t2
        UNION ALL
        SELECT t2.id,
               t2.testdate,
               "test3"  AS Test,
               t2.test3 AS TestVal
        FROM   t2) AS q
GROUP  BY q.id,
          q.test
PIVOT q.testdate; 
```

选择一个身份证

```
TRANSFORM Sum(q.testval) AS sumoftestval
SELECT q.test
FROM (SELECT t2.id,
               t2.testdate,
               "test1"  AS Test,
               t2.test1 AS TestVal
        FROM   t2
        UNION ALL
        SELECT t2.id,
               t2.testdate,
               "test2"  AS Test,
               t2.test2 AS TestVal
        FROM   t2
        UNION ALL
        SELECT t2.id,
               t2.testdate,
               "test3"  AS Test,
               t2.test3 AS TestVal
        FROM   t2)  AS q
WHERE q.id=1
GROUP BY q.test
PIVOT q.testdate; 
```

# magento - 隐藏某些 Magento 属性过滤器

> ID：11561430
> 
> 赞同：1
> 
> 时间：2012-07-19T13:00:11.650
> 
> 标签：magento, filter

我有几行 PHP 代码会阻止某些属性过滤器显示在分层导航块中（即价格和类别）。这样我需要添加所有我不想手动显示的过滤器，这需要很多时间并且不是最佳解决方案。

我想要的是要显示的过滤器属性“价格”和“类别”，如果过滤器名称不同，则根本不显示该过滤器。这样，价格和类别过滤器始终会显示，而其他过滤器则被隐藏。我不必手动添加我不想显示在列表中的所有过滤器。

我的问题是，需要在 PHP 代码中进行哪些更改才能使其按照我刚才描述的方式工作？

```
 <?php $_filters = $this->getFilters() ?>
    <?php foreach ($_filters as $_filter): ?>
    <?php if($_filter->getItemsCount()): ?>
    <?php if($_filter->getName() != "Price" AND $_filter->getName() != "Category"): ?>
    <dt><?php echo $this->__($_filter->getName()) ?></dt>
    <dd><?php echo $_filter->getHtml() ?></dd>
    <?php endif; ?>
    <?php endif; ?>
    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:40:18.663

啊，我明白了。有趣的是，我昨天正在研究几乎相同的东西，这对我有用（我的意思是更改 IF 语句）；

```
<?php foreach ($_filters as $_filter): ?>
    <?php if (Mage::helper('catalog')->__($_filter->getName()) == 'Price' || Mage::helper('catalog')->__($_filter->getName()) == 'Category'): ?>
            <dt><?php echo Mage::helper('catalog')->__($_filter->getName()) ?></dt>
            <dd><?php echo $_filter->getHtml() ?></dd>
    <?php endif; ?>
<?php endforeach; ?> 
```

希望它也对你有用。

# javascript - 如何使用 onmouseover 在另一个框架中打开链接？

> ID：11561431
> 
> 赞同：0
> 
> 时间：2012-07-19T13:00:15.843
> 
> 标签：javascript, hyperlink, onmouseover, frameset

对于框架集，我想使用 onmouseover 从 A 框架的页面打开一个链接，然后在另一个 B 框架中打开它？当鼠标悬停在 A 框架的链接上时，它将在 B 框架上打开页面。给个提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:30:17.667

当我使用`<frame>`它时需要很长时间（七年或更长时间）。

因为您没有发布任何 html 源代码 :-|，所以我创建了一个理论上的情况：

```
<html>
    <head>
      <script type="text/javascript">
       function nullRand () {
         //document.getElementById("frameBid").src = "myNewInternalPage.html";
           document.getElementById("frameBid").src = document.getElementById("frameAid").src;
        }
      </script>
    </head>
    <frameset cols="25,*" frameborder="no" border="0" framespacing="0" framepadding="0">
       <frame id="frameAid" name="frameAname" src="myHtmlFile.html" noresize>
       <frame id="frameBid" name="frameBname" src="" noresize>
    </frameset>
</html> 
```

S在我的理论文件“myNewInternalPage.html”中，您必须插入方法调用

```
<a href="#" onMouseOver="parent.nullRand()">An link</a> 
```

注意：`frame`不适合显示外部内容。这就是`iframe`存在的原因。

***更新：***

在与 OP 进行了一场艰苦的战斗后，我得到了一些东西。这是一个解决方案：

第一：用新的替换'nullRand()'中的旧Javascript代码

```
function nullRand (linkObject)
{
  document.getElementById("frameBid").src = linkObject.href; // The new way to access to a frame
  //top.frames["center"]..src = linkObject.href; <-- The old way to access to a frame */
} 
```

2nd：修改 a 标签 - 列出无线电流的位置 - 如下：

```
<a href="the Url from your radiostream" ... onMouseOver="parent.nullRand(this)">...</a> 
```

所以它应该工作。在我看来，您应该为您的任务考虑一个新概念。

# sql - 使用 SQLite 恢复日期

> ID：11561433
> 
> 赞同：0
> 
> 时间：2012-07-19T13:00:21.103
> 
> 标签：sql, ios, date, sqlite

我正在尝试在 iOS 上使用 SQLite 恢复日期。

这个日期（保存在 selectedDate 中）是一个变量 NSDate。我将 NSDate 转换为 NSString（保存在 dateString 中）。

```
//Code:

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat: @"yyyyMMdd"];
NSString *dateString = [formatter stringFromDate:selectedDate];

[formatter release];

NString *sentence = (@"SELECT description, date_from FROM Tasks WHERE date_from = %@", dateString);

//Warning: Expression result unused  :( 
```

如果我输入一个默认日期，例如：SELECT... WHERE date_from = '20120719'，它就会运行。我该如何解决？

对不起我的英语；）谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:04:21.720

你有没有尝试过`LIKE`的地方`=`？

```
date_from LIKE '20120719' 
```

和

```
NSString *sentence = [NSString stringWithFormat:@"SELECT description, date_from FROM Tasks WHERE date_from = %@", dateString]; 
```

# css - CSS媒体查询不适用于ipad景观（引导程序）

> ID：11561435
> 
> 赞同：5
> 
> 时间：2012-07-19T13:00:34.383
> 
> 标签：css, media-queries

我正在为我的网站使用以下媒体查询

```
 @media (max-width: 976px) {} 
```

我发现当我查看我的网站时

```
 http://46.32.253.11/ 
```

在横向模式下的 ipad 3 上，纵向模式下出现的导航栏按钮不起作用，我的导航栏分为 2 行。

我需要添加另一个媒体查询，还是可以编辑现有的。如果是这样，我需要做些什么改变。

我对媒体查询真的很陌生，所以如果有人有他们想分享的优秀资源，那就太好了

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-19T13:57:12.870

看看这篇 css-tricks 文章，它有一个标准设备分辨率的引导程序：http: [//css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

下面列出了特定`landscape`的媒体查询：`portrait`

```
/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
  /* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
  /* Styles */
} 
```

不过，我想强调的是，从“移动优先”的方法来看，您不应该为设备设计，而应该为适合您设计的分辨率断点设计。尝试从一个很小的分辨率开始，比如 320 x 480。从那里开始，增加浏览器的宽度，直到该设计“中断”（即看起来像废话），然后在该分辨率下添加一个断点。检查浏览器宽度的一种方便方法是在 Chrome（或 Firefox 的 Firebug）中打开您的开发者控制台，然后输入`document.body.offsetWidth`并按 Enter。这将显示浏览器宽度的像素量。继续添加/重新排列内容，直到您在各种设备上获得所需的体验。

网络正在向前发展。这意味着我们必须从智能手机一直考虑到电视和投影仪。考虑到这一点来设计您的网站。

我希望这有帮助。

# unix - 在 UNIX 中查找活动用户列表

> ID：11561436
> 
> 赞同：-2
> 
> 时间：2012-07-19T13:00:40.460
> 
> 标签：unix, solaris

获取 Solaris 中的活跃用户列表[在过去 6 个月内至少连接过一次的用户]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:06:04.560

You could solve this by creating a script that date stamps a file somewhere when any user logs in. it could be run by the shell's system-wide init (/etc/profile for bourne compatible shells)

for instance, create a directory called `/var/log/logintimes` and have /etc/profile run `touch /var/logintimes/$USER`

then, to see the last login time, do `ls -l /var/logintimes`

# asp.net - .NET 和 Jenkins 的 Selenium 性能 - 如何分析和改进它？

> ID：11561443
> 
> 赞同：5
> 
> 时间：2012-07-19T13:00:55.953
> 
> 标签：asp.net, .net, selenium, nunit, jenkins

我有一个想用 Selenium 测试的 ASP.NET 网站。我想在“登台”虚拟机上设置一个 Jenkins 实例，以自动运行测试。

问题是测试运行非常缓慢 - 比我的开发机器慢几倍。一个简单的测试可能需要 2-3 分钟以上。

我想知道这是否是可以预料的，像我这样的测试设置是否有任何明显的缺陷，以及我是否可以做些什么来分析和提高测试套件的性能。

### 信息：

测试在具有 Windows 7 64 位的 2.7GHz 2GB Ram 虚拟机上运行。我的开发机器类似，但安装的是 32 位 Win。

以下由詹金斯完成：

*   该网站从源代码管理中签出，并使用自定义 web.config 进行配置。主要区别在于它是在发布模式下编译的，它连接到不同机器上的数据库（也是同一台服务器上的虚拟机）。
*   IIS 正在监视网站的目录并自动重新加载更改。
*   运行以下命令（已清理目录）： nunit-console *Selenium-Project-Dir* /labels
*   测试在 Chrome 网络驱动程序上运行。

selenium 项目使用 NUnit 和 WebRunner。驱动程序实例创建一次 - 在所有测试之前，在 [SetUpFixture] 类内的 [SetUp] 属性中。它们在类的 [TearDown] 属性中被删除一次。

示例测试如下所示：

```
[Test, Combinatorial]
public void AnExistingUserCanLogin(
    [ValueSource(typeof(Drivers), "Good")] 
    IWebDriver driver)
{
    // This function clicks on some buttons and fills in some forms.
    LoginUser(driver); 

    // Make sure the user is now logged in
    Assert.IsTrue(driver.ElementIsPresent(By.ClassName("imgUserAvatar")));
    Assert.IsTrue(driver.ElementIsPresent(By.CssSelector("a.my-profile")));
    Assert.IsTrue(driver.ElementIsPresent(By.CssSelector("a.logout")));
} 
```

（“Drivers”类包含 FF、IE、Chrome 的 lazily-instances webdriver 实例。你可以猜到类实例的“Good”静态属性是什么）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:26:28.847

它是虚拟机这一事实应该不是问题，而且 RAM 听起来不错。什么操作系统正在运行？一些 Windows 操作系统在不同的位版本之间存在显着的速度差异（因为对硬件的要求）。这在 Vista 中尤其明显，但我注意到 Windows 7 和 Server 2003 之间的差异。

我发现如果运行 64 位 VM 的机器是 32 位机器，就会有很大的问题。它通常看起来运行良好一段时间，然后随着它继续运行测试会变慢。这应该是一个废话，但主要是可能有太多的虚拟机从同一个地方运行。其他程序将受此影响，如果您的虚拟机位于公司场中，这可以帮助进行故障排除。

另一个产生显着差异的因素是您是否针对不同的浏览器运行测试。IE8 和 IE9 将采用相同的 selenium 命令并以不同的速度运行它们。我不知道这是为什么，我只知道我见过它。确保登台机器具有当前版本的 Chrome（或至少与您的开发机器相同）。

登台机器与数据库的联网方式可能会有所不同。这似乎是一个非常小的机会，但如果两个虚拟机之间存在防火墙故障，可能会对时间产生重大影响。

我唯一能想到的可能是改变时间长度的另一件事是，是否有其他程序同时在登台机器上执行。检查 CPU 使用率可能会有所帮助。就个人而言，我注意到我的 VM 使用的 CPU 比我的个人机器多得多。如果是这种情况，到目前为止我发现的唯一解决方案是为 VM 提供更多处理能力，或者只运行测试而不是其他任何东西。

祝你好运！

# c - gethostbyname 在 Fedora 32 位上工作正常，但在 64 位上失败

> ID：11561447
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:01:28.543
> 
> 标签：c, linux, sockets

`gethostbyname`在 Fedora 32 位中工作正常，但在 64 位环境中失败，导致分段错误？在这种情况下，问题是什么，我们该如何解决？

```
#include <stdio.h>  
#include <string.h>  
#include <netdb.h>  
#include <netinet/in.h>  

struct hostent *he;  
struct in_addr a; 

int main (int argc, char **argv)  {  

    if (argc != 2)  {  
        fprintf(stderr, "usage: %s hostname\n", argv[0]);  
        return 1;  
    }  

    he = gethostbyname (argv[1]);  
    if (he)  {  
        printf("name :- %s\n", he->h_name);  
        while (*he->h_aliases)  
            printf("alias:- %s\n", *he->h_aliases++);  
        while (*he->h_addr_list)  {  
            bcopy(*he->h_addr_list++, (char *) &a, sizeof(a));  
            printf("address:- %s\n", inet_ntoa(a));  
        }  
    }  
    else  
        herror(argv[0]);  
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:40:58.203

您缺少正确的包括：

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h> 
```

如果没有正确的包含，`inet_ntoa`则假定返回类型为`int`. 因为与 x86 上`int`的大小相同`char*`，所以没有问题。在 x86_64 上并非如此，因此读取该字符串`printf`会导致错误。

# html - 无法在网页中的元素上设置完整边框

> ID：11561448
> 
> 赞同：0
> 
> 时间：2012-07-19T13:01:30.620
> 
> 标签：html, css, css-float

我正在试验 css 的 float 属性。

我试图编码匹配两个浮动 div 的高度。

参考问题

[如何强制浮动 DIV 匹配另一个浮动 DIV 的高度？](https://stackoverflow.com/questions/526294/how-might-i-force-a-floating-div-to-match-the-height-of-another-floating-div)

[关于浮动div边界问题的问题](http://jsfiddle.net/NcgFf/4/)

**已编辑**

我希望根据两个 div 之间 div 的最大高度来调整边框的高度和长度

```
 <div style="background-color: yellow;">
    <div style="float: left;width: 65%; border-right:1px solid White;">
   column acolumn acolumn acolumn acolumn acolumn acolumn acolumn 
   acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn 
   acolumn   acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn 
    </div>
    <div style="float: right;width: 35%;border-right:1px solid White;">column b</div>
    <div style="clear: both;"></div>
   </div> 
```

[请参阅 jsfiddle](http://jsfiddle.net/NcgFf/4/)

b 列的**div**未显示全长边框

在下面的代码中，我无法添加边框

```
 <div style="overflow: hidden;">
   <div style="background: blue;float: left;width: 65%;padding-bottom: 500px;
     margin-bottom: -500px;border:1px solid White;">column a<br />
     column acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn 
     acolumn  acolumn acolumn acolumn acolumn acolumn acolumn acolumn a
   </div>
   <div style="background: red;float: right;width: 35%;
  padding-bottom: 500px;margin-bottom: -500px;border:1px solid White;">column b
   </div>
</div> 
```

任何人都可以为这些问题提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:18:32.180

如果我做对了，您想填写父母的高度来做到这一点，您应该为父母 div 指定高度。

```
Round columns without width adjusted and border divs inserted
<div style="background-color: yellow; height: 500px;">
    <div style="float: left;width: 65%; height: 100%;">
        <div style="width: 100%; height: 100%;border: 1px solid red;">column acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn a</div></div>
  <div style="float: right;width: 35%; height: 100%;">
      <div style="width: 100%; height: 100%;border: 1px solid red;">column a</div></div>
  <div style="clear: both;"></div>
</div>
​ 
```

我希望这有帮助。

# php - 在 Zend 框架中使用 gmail 发送电子邮件

> ID：11561451
> 
> 赞同：4
> 
> 时间：2012-07-19T13:01:39.787
> 
> 标签：php, zend-framework, zend-mail

我正在尝试在 Zend 框架中使用 gmail 帐户发送电子邮件。这是我到目前为止得到的：

```
$mailTransport = new Zend_Mail_Transport_Smtp('smtp.gmail.com', array(
    'auth'     => 'login',
    'username' => 'myaddress@gmail.com',
    'password' => 'password',
    'port'     => '587',
    'ssl'      => 'tls',
));
Zend_Mail::setDefaultTransport($mailTransport);
$mail = new Zend_Mail();
$mail->setBodyText('This is the text of the mail.');
$mail->setFrom('myaddress@gmail.com', 'sender');
$mail->addTo('reciever@gmail.com', 'receiver');
$mail->setSubject('TestSubject');
$mail->send(); 
```

使用此代码，我收到以下错误：

```
Message: Unable to connect via TLS 
```

我该如何解决？我有一个默认的 XAMPP 安装设置，在 php.ini 中没有 SMTP 设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:36:22.370

我找到了解决方案：我有一个由 xampp 设置的默认 php.ini 设置。为了通过 TLS 连接，我们需要启用 OpenSSL。要启用 OpenSSL，首先在 xampp\php\ext 文件夹中找到 php_openssl.dll 文件。如果找到此文件，则打开 php.ini 文件并将以下行添加到其中：

```
extension=php_openssl.dll 
```

这就是在 xampp 中启用 openssl 的全部内容。这可以发送电子邮件

# ios - iOS：FB评论插件和FB SDK

> ID：11561455
> 
> 赞同：1
> 
> 时间：2012-07-19T13:01:53.860
> 
> 标签：ios, facebook, uiwebview, facebook-comments

我正在使用包含标准 facebook 评论插件的 html 页面呈现 UIWebView。现在，如果用户没有登录，有一个很大的“登录到 Facebook 发表评论”按钮，它会在 UIWebView 中打开登录页面。成功登录后，它会加载 facebook 网络应用程序，这不是我想要的。我需要返回我的评论页面。我该如何实施？解析每个请求`-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType`并允许加载取决于那里的内容？

我也尝试租用 Facebook SDK 进行登录，但它似乎也不起作用。显然，所有必要的数据都存储在 facebook 会话类中，不会干扰 UIWebView 的 cookie。

实施它的最佳方法是什么？

# solr - Solr - 使用搜索结果创建文件

> ID：11561456
> 
> 赞同：0
> 
> 时间：2012-07-19T13:01:54.530
> 
> 标签：solr

我刚刚在 TomCat-Servlet 上设置了 Solr-Server。一切正常，我的索引包含大约 810.000 个产品和多个数据。

但现在我面临一个问题。为了搜索索引，我使用了 URL `"http://localhost:8080/solr/admin/"`，它总是给我正确的结果。对于像我这样的新手来说，现在事情变得太复杂了。查询应由另一个系统发送到我的 servlet（如何处理？），我需要将结果重新发送到 xml 文件中（以便其他系统可以处理它）。

关于如何实施它的任何建议？主要问题是将结果保存在文件中并在不使用`"http://localhost:8080/solr/admin"`界面的情况下搜索索引。是否有类似`post.jar`示例字典中用于向服务器发送查询的内容？我读了一些关于 requesthandler 等的东西，但我真的不明白如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:26:40.533

通常你会注册一个 requestHandler，并且可以通过以下方式访问：

```
http://localhost:8080/solr/select?q=<query string> 
```

Admin 界面是一个单独的位置，用于浏览服务器的状态以及以更具交互性的模式查询数据。

查询字符串的格式取决于注册了哪个 requestHandler。它可能是 (e)dismax，默认情况下允许您进行“常规”搜索，例如“word1 word2 word3”，或者它可能是标准查询解析器，它将使用“field:value”之类的语法来执行查询。

然后，Solr 将默认以 XML 格式的结果响应，您可以使用另一个 queryResponseWriter 来更改输出（到 JSON 或 POJO 等）。有关更多信息，请参阅[Solr Wiki](http://wiki.apache.org/solr/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:25:32.727

Solr 的默认查询处理程序可以在以下位置访问：

```
http://localhost:8080/solr/select?q=<query string> 
```

只需从您的应用程序中点击该 url，您就会收到 XML 响应。然后，您只需将该响应写入您的文件。

Solr 已经足够成熟，许多语言都有库或模块来促进这一过程。

*   PHP： http: [//php.net/manual/en/intro.solr.php](http://php.net/manual/en/intro.solr.php)
*   Java：[https ://wiki.apache.org/solr/Solrj](https://wiki.apache.org/solr/Solrj)
*   蟒蛇：[http ://wiki.apache.org/solr/SolPython](http://wiki.apache.org/solr/SolPython)
*   红宝石：[http ://sunspot.github.com/](http://sunspot.github.com/)

# c# - 单击时放置图钉

> ID：11561460
> 
> 赞同：0
> 
> 时间：2012-07-19T13:02:02.923
> 
> 标签：c#, wpf, wpf-controls, bing-maps

我试图找到我应该使用什么鼠标事件来放置 a`Pushpin`一次单击。我尝试过使用该`MouseUp`事件，但即使我只是单击并拖动该事件也会触发。有没有办法`MouseUp`只在点击而不是点击和拖动时触发？还是我应该查看另一个鼠标事件？

澄清：我正在使用 Bing Maps WPF 控件，而不是 AJAX 或 Silverlight。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:31:14.180

我已经设法通过处理`MouseLeftButtonDown`and`MouseLeftButtonUp`事件来解决这个问题。

```
private void map_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    clickTimer.Start();
}

private void map_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    clickTimer.Stop();

    if (clickTimer.ElapsedMilliseconds < arbitraryConstant) // I find that 100 works well
    {
        Point mousePosition = e.GetPosition(this);
        Location pinLocation = map.ViewportPointToLocation(mousePosition);

        targetPin.Location = pinLocation;

        map.Children.Add(targetPin);
    }

    clickTimer.Reset();
} 
```

一个`Stopwatch`对象记录单击向下和释放单击之间经过的时间。该经过的时间被评估并确定它是否是“点击”。

**警告**：请记住调用`clickTimer.Reset()`，否则您的`Stopwatch`对象将继续增量记录点击，只有您的第一次点击（如果您没有先点击拖动）会触发`if`块。

**警告**：不要设置`e.Handled=true`。这将阻止单击拖动事件，并且您的地图将无法正确平移。

# php - PHP 正则表达式只返回重复模式的最后一次出现？

> ID：11561463
> 
> 赞同：1
> 
> 时间：2012-07-19T13:02:13.733
> 
> 标签：php, regex, html, repeat

我正在尝试使用 PHP 捕获 HTML 中超链接的所有属性，但我的正则表达式只返回最后一个属性和值。

HTML：

```
$string = '
<a href="http://www.example.com/" style="font-weight: bold;">Example</a>
<a href="http://www.exampletwo.com/ style="font-weight: bold;">Example Two</a>
'; 
```

正则表达式：

```
preg_match_all('/<a(?: (.*?)="(.*?)")*>(.*?)<\/a>/i', $string, $result); 
```

结果：

```
Array
(
    [0] => Array
        (
            [0] => <a href="http://www.example.com/" style="font-weight: bold;">Example</a>
            [1] => <a href="http://www.exampletwo.com/" style="font-weight: bold;">Example Two</a>
        )
    [1] => Array
        (
            [0] => style
            [1] => style
        )
    [2] => Array
        (
            [0] => font-weight: bold;
            [1] => font-weight: bold;
        )
    [3] => Array
        (
            [0] => Example
            [1] => Example Two
        )
) 
```

我怎样才能让它返回重复模式的所有结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:27:22.090

如果我可以提出一个替代经常被诟病的“正则表达式 HTML 解析”：

```
<?php
    $string = '
        <a href="http://www.example.com/" style="font-weight: bold;">Example</a>
        <a href="http://www.exampletwo.com/" style="font-weight: bold;">Example Two</a>
        ';

    $dom = new DOMDocument;
    $dom->loadHTML($string);
    $as = $dom->getElementsByTagName('a');
    foreach ($as as $a) {
        echo $a->nodeValue, '<br>';
        foreach ($a->attributes as $at) {
            echo $at->nodeName, ' ', $at->nodeValue, '<br>';
        }
        echo '<br><br>';
    }
?> 
```

使用 DOMDocument 解析你的 HTML，然后简单地告诉它给你所有的锚标记。但是，如果您怀疑您将处理大量 HTML 输入，那么总会有`XMLReader`，尽管您会遇到不正确或非 XHTML 输入的问题。

# jquery - 验证带一位小数的 4 位数字

> ID：11561464
> 
> 赞同：1
> 
> 时间：2012-07-19T13:02:16.687
> 
> 标签：jquery, regex, expression, jquery-validate

我正在尝试为数字创建一个 jquery 验证。

它应该首先允许 4 位数字，然后在小数点之后应该允许 1 位数字。

对于十进制，我的代码工作正常：

```
$.validator.addMethod('Decimal', function(value, element) {
    return this.optional(element) || /^[0-9,\d{4}]+(\.\d{0,1})?$/.test(value); 
  }, "Please enter a correct number, format xxxx.X"); 
```

我可能在正则表达式中犯了错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:29:57.533

对于确切***的 NNNN.N*** *(1234.5)*使用：

```
/^\d{4}\.\d$/ 
```

对于可选的***.N*** *(1234 1234\. 1234.5)*，请使用：

```
/^\d{4}(\.\d?)?$/ 
```

对于大小不超过***NNNN.N*** *(1 .5 12.5 123\. 1234 1234.5)*的数字，请使用：

```
/^(?=.*\d)\d{0,4}(\.\d?)?$/ 
```

如果您想在开头允许 +/-，请替换`^`为`^[-+]?`.

# c# - 按参数列表过滤 SQL 查询

> ID：11561465
> 
> 赞同：5
> 
> 时间：2012-07-19T13:02:19.897
> 
> 标签：c#, sql, sql-server, performance, sql-server-2008

我有一个查询，我想返回与值列表关联的所有行。你可以很简单地写成：

```
select * from TableA where ColumnB in (1, 2, 3, 5) 
```

我可以在 C# 中生成这个查询并执行它。然而，这显然不太理想，因为它不使用参数，在尝试缓存查询计划时会受到影响，并且显然容易受到 SQL 注入攻击。

另一种方法是将其写为：

```
select * from TableA where ColumnB = @value 
```

这可以由 C# 执行多次，但是这将导致 N DB 命中。

我能看到的唯一其他选择是创建一个临时表并以这种方式加入它，但是我没有看到这一点，因为它会更复杂，并且会受到与第一个选项相同的限制。

我正在使用 SQL 服务器和 OLDB，创建查询不是问题。我正在尝试创建最有效的流程。

这三种方法哪一种更有效？我错过了替代方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:38:53.277

Assuming SQL Server 2008 or newer, in SQL Server, create a table type once:

```
CREATE TYPE dbo.ColumnBValues AS TABLE
(
  ColumnB INT
); 
```

Then a stored procedure that takes such a type as input:

```
CREATE PROCEDURE dbo.whatever
  @ColumnBValues dbo.ColumnBValues READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT A.* FROM dbo.TableA AS A
    INNER JOIN @ColumnBValues AS c
    ON A.ColumnB = c.ColumnB;
END
GO 
```

Now in C#, create a DataTable and pass that as a parameter to the stored procedure:

```
DataTable cbv = new DataTable();
cbv.Columns.Add(new DataColumn("ColumnB"));

// in a loop from a collection, presumably:
cbv.Rows.Add(someThing.someValue);

using (connectionObject)
{
    SqlCommand cmd        = new SqlCommand("dbo.whatever", connectionObject);
    cmd.CommandType       = CommandType.StoredProcedure;
    SqlParameter cbvParam = cmd.Parameters.AddWithValue("@ColumnBValues", cbv);
    cbvParam.SqlDbType    = SqlDbType.Structured;
    //cmd.Execute...;
} 
```

(You might want to make the type a lot more generic, I named it specifically to make it clear what it is doing.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:24:38.453

您还可以使用[多个结果集](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677539%28v=vs.85%29.aspx)并发送大量查询，如下所示：

```
select * from TableA where ColumnB = @value0
select * from TableA where ColumnB = @value1
select * from TableA where ColumnB = @value2
...
select * from TableA where ColumnB = @valuen 
```

在**一次**通话中。即使显然违反直觉，它也会利用执行计划并且在参数化方面是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:19:58.453

你可以很容易地写这个：

```
String csvString = "1, 2, 3, 5"; // Built the list somehow, don't forget escaping
String query = "select * from TableA where ColumnB in (" + csvString + ")"; 
```

通过这种方式，性能不会降低，并且您可以防止**Sql Injection**在创建时简单地转义输入值`csvString`。

顺便说一句，如果您使用**MS SQL**而不是标准 SQL，您可以[找到](http://www.sommarskog.se/arrays-in-sql-2005.html) [替代](https://stackoverflow.com/a/114685/471214) [方法](https://stackoverflow.com/a/1742652/471214)。

# javascript - 我可以从 javascript 强制对检票口组件进行模型更新吗？

> ID：11561467
> 
> 赞同：1
> 
> 时间：2012-07-19T13:02:29.527
> 
> 标签：javascript, wicket

我有一个 javascript 函数，该函数从带有字节数据数组的 actionscript 组件中调用。该函数被正确调用，我可以验证接收到的数据。

我需要将该数据取回检票口，但如果我使用 javascript 设置组件的值并触发 onChange 事件，我会看到该事件但组件的模型尚未更新，例如：

**Javascript 函数**

```
<script type="text/javascript">
    function f(obj) {
        document.getElementById("byteArray").value = obj.byteArray;
        document.getElementById("byteArray").onchange();                
    }
</script> 
```

**检票口行为**

```
final TextField field = new TextField("byteArray", Model.of(""));
field.add(new AjaxEventBehavior("onChange") {

    @Override
    protected void onEvent(AjaxRequestTarget target) {
        String byteArray = getComponent().getDefaultModelObjectAsString());
        // byteArray has not changed here
    }
}); 
```

我尝试过使用 PropertyModel 和 IModel 实现，但没有任何乐趣。我已经能够使用表单提交将数据返回到 Wicket，但这会强制刷新页面，这对我的应用程序没有好处。我无法从 Javascript 以编程方式成功触发任何类型的 AjaxFormSubmission 事件。

我已尝试使用 wicketAjaxGet / Post 提交数据，但我收到 413 错误，因为我的字节数组太大。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T19:45:32.570

使用*AjaxFormComponentUpdatingBehavior*而不是 AjaxEventBehavior。它用于在转换器和所有验证器运行后将内容推送到模型中......请记住，如果输入未通过转换或验证，它将不会更新模型，而是会调用 onError 方法（与 onUpdate 方法相比）。

除了切换到新行为之外，其他一切都应该能够保持不变。

# c++ - SSPI 头文件 - 致命错误

> ID：11561475
> 
> 赞同：14
> 
> 时间：2012-07-19T13:02:56.373
> 
> 标签：c++, windows, winapi, header-files

我的项目出现了一些致命错误，错误来自 sspi.h，我必须定义一些东西，但我不是什么以及为什么，请有人解释一下。

```
sspi.h(60): fatal error C1189: #error :   You must define one of SECURITY_WIN32, SECURITY_KERNEL, or SECURITY_MAC 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-10-20T08:22:24.580

虽然诊断很清楚必须定义、 或之一`SECURITY_WIN32`，但它对确定使用哪个以及为什么使用没有多大帮助。据我所知，这些都没有正式记录在 MSDN 中，因此唯一的信息来源是实际的头文件。`SECURITY_KERNEL``SECURITY_MAC`

*   `SECURITY_MAC`: 这个符号只出现在*<sspi.h>*中，该文件的版权声明为`1992-1999`. 据推测，这个符号是为了支持“经典​​”Mac OS 的编译而引入的，早在 MFC 仍计划成为面向 Windows 和 Mac 的跨平台框架时。这个符号今天似乎没有任何实际用途。

*   `SECURITY_KERNEL`：这里最有启发性的评论来自*<NTSecPKG.h>*，阅读`// Can't use the windows.h def'ns in kernel mode.`。这似乎表明在`SECURITY_KERNEL`从以内核模式运行的模块访问安全包时需要定义该符号。

*   `SECURITY_WIN32`: 在整个 Windows SDK 中根本没有关于这个符号的注释。从用户模式应用程序访问安全 API 时应该使用这个符号似乎是合理的。

假设以上所有内容都是正确的，可以使用以下准则来确定要定义的符号：

*   `SECURITY_WIN32`在编译用户模式应用程序时定义。
*   `SECURITY_KERNEL`在编译内核模式模块时定义。
*   永远不要定义过时的`SECURITY_MAC`预处理器符号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T13:32:30.200

Just add

```
#define SECURITY_WIN32 
```

before all includes

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-12T18:14:05.157

只是为了添加到现有答案，定义它的更好方法是

```
#ifndef SECURITY_WIN32 
#define SECURITY_WIN32 
#endif 
```

您可以在#include 有问题的头文件之前添加它，或者在第一次调用 windows.h 或 afxwin.h 或其他任何东西之前将它添加到您的 stdafx.h（如果您正在使用）全局添加它指出您定义了 WINVER 和 _WIN32_WINNT，或者您当然可以将其添加到您的项目设置中。

# python - 以相反的顺序批量重命名目录

> ID：11561479
> 
> 赞同：1
> 
> 时间：2012-07-19T13:03:11.333
> 
> 标签：python, linux, bash, sed

我有一堆（超过 700 个）目录，它们以下列方式命名

```
1 - *random*name*1*
2 - *random*name*2*
...
725 - *random*name*725* 
```

前导数字 (1-725) 都是目录名称的一部分。

**即：所有目录名称都以数字开头，后跟[空格][破折号][空格]，然后是一些文本。**

我想批量重命名它们，以便它们命名如下：

```
1 - *random*name*725*
2 - *random*name*724*
...
725 - *random*name*1* 
```

我想“反转”目录名称的数字部分。本质上，我希望“1 -”之后的文本跟随“725 -”，“2 -”之后的文本跟随“724 -”等等。

最简单的方法是什么？我在linux上。

**注意：** *随机*名称*各不相同，仅用于说明目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:38:41.807

一种使用方式`perl`。代码已注释。

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;
use File::Basename qw|basename|;

die qq{Usage: perl $0 <real|trial>\n} unless @ARGV == 1;

my $real = $ARGV[0] eq q|real| ? 1 : 0;

## Filter filenames from the directory that match criteria of OP.
my @files = grep { -d $_ && m/\A(\d+)\s-\s.*\1/ } map { basename $_ } <./*>;

## Get numbers in reverse mode to substitute them later in filenames .
my @nums = map { m/\A(\d+)/; $1 || 0 } reverse @files;

## Process all files, change the number of the file and rename it.
for my $file ( @files ) { 
    (my $new_file = $file) =~ s/\A(\d+)/shift @nums/e;

    if ( $real ) { 
        rename $file, $new_file or warn qq|WARN: Couldn't rename "$file"\n|;
    }   
    else {
        printf qq|%s\n|, qq|rename "$file" "$new_file"|;
    }   
} 
```

列表目录：

```
ls -1 
```

具有以下输出：

```
1 - file1file
2 - fi2le
3 - fileeee3
4 - fou4r
5 -  donttouch
6 -  donttouch5either
script.pl 
```

运行脚本：

```
perl script.pl 
```

再次列出目录：

```
ls -1 
```

具有以下输出：

```
1 - fou4r
2 - fileeee3
3 - fi2le
4 - file1file
5 -  donttouch
6 -  donttouch5either
script.pl 
```

* * *

**编辑**：评论中有一个建议让试运行在真正的之前运行，所以我添加了一个论点`real`或`trial`. 使用第一个选项，它将进行真正的更改，而使用第二个选项，它将`print`输出真正的命令，但不运行它们。现在像这样运行脚本：

```
perl script.pl real 
```

或者

```
perl script.pl trial 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:58:13.360

让我们首先模拟一些文件名：

```
$ printf 'kjdfh8\nskdjfh9\nckjhv10\naskjdh11\n'
kjdfh8
skdjfh9
ckjhv10
askjdh11 
```

然后通过管道运行它们：

```
$ printf 'kjdfh8\nskdjfh9\nckjhv10\naskjdh11\n' | sed 's/[^0-9]*\(.*\)/\1 &/' | sort -nr | cut -d\  -f2-
askjdh11
ckjhv10
skdjfh9
kjdfh8 
```

这是如何运作的？其实很简单。首先，我们使用`sed`将任何数字内容的副本放在行首。接下来，我们进行排序。最后，我们使用`cut`去掉行首的数字。瞧！

现在......这只是颠倒了顺序。这是您问题中的问题之一，但您的最终目标是重命名事物。我们可以用另一个也是 while 循环的管道来扩展上面的列表。这次我将把内容分开以便于阅读。

```
#!/bin/bash

n=0
printf 'kjdfh8\nskdjfh9\nckjhv10\naskjdh11\n' \
| sed 's/[^0-9]*\(.*\)/\1 &/' | sort -nr | cut -d\  -f2- \
| while read file; do
    base="${file/[0-9]*/}"
    ((n++))
    printf 'mv "%s" "%s%s"\n' "$file" "$base" "$n"
  done 
```

这个 while 循环读取我们在上面创建的文件列表。它通过删除文件名中以第一个数字开头的所有内容来获得“基础”。它增加一个计数器（用于新名称），然后打印一个`mv`带有旧文件名、基数和计数器的命令。

同样，此脚本的输出是一组`mv`命令，您可以通过 shell 进行管道传输。

显然，要在您的文件上使用它，您需要将初始`printf`命令替换为生成文件列表的内容。

**注意**：通常不建议以这种方式处理文件名，因为文件名中出现意外或特殊字符（甚至空格）并打乱您的计划的风险。仅当您确信自己理解它时才这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:53:44.043

如果这个 awk 解决方案适合你吗？

命令：

```
ls -F|grep "/$"|sort|awk 'BEGIN{FS=" - ";l=5;}{o=$0;gsub("/$","",o);gsub($1"/$",l--);if(o!=$0)printf "mv \"%s\" \"%s\"\n",o,$0 }' |sh 
```

这里的 5 是硬编码的，在你的情况下是 725。:) 当然它可以由 wc -l 设置，但我有点懒惰。

测试：

```
kent$  tree -d
.
|-- 1 - foo1
|-- 2 - foo2
|-- 3 - foo3
|-- 4 - foo4
`-- 5 - foo5

5 directories

#this will only print the generated mv command:

kent$  ls -F|grep "/$"|sort|awk 'BEGIN{FS=" - ";l=5;}{o=$0;gsub("/$","",o);gsub($1"/$",l--);if(o!=$0)printf "mv \"%s\" \"%s\"\n",o,$0 }'   
mv "1 - foo1" "1 - foo5"
mv "2 - foo2" "2 - foo4"
mv "4 - foo4" "4 - foo2"
mv "5 - foo5" "5 - foo1"

# if you pipe the generated command to "sh", they will be executed:

kent$  ls -F|grep "/$"|sort|awk 'BEGIN{FS=" - ";l=5;}{o=$0;gsub("/$","",o);gsub($1"/$",l--);if(o!=$0)printf "mv \"%s\" \"%s\"\n",o,$0 }' |sh

#result:

kent$  tree -d
.
|-- 1 - foo5
|-- 2 - foo4
|-- 3 - foo3
|-- 4 - foo2
`-- 5 - foo1

5 directories 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T09:06:19.200

这个：

```
find /path/to/the/directories/location/ -depth -exec mv '{}' $(basename '{}')$(echo $(date "+%H%M%S%N")) \; 
```

# java - 如何将文件夹（不是逐个文件）从服务器复制到 Android 设备

> ID：11561483
> 
> 赞同：2
> 
> 时间：2012-07-19T13:03:15.840
> 
> 标签：java, android

我想从服务器复制一个包含许多文件但不遍历该文件夹中的文件的文件夹。我有该文件夹的 URL，我想从 Web 服务复制该文件夹。这可能吗？如果是，请解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:01:20.900

这是不可能的。您可以使用一些脚本在服务器上创建文件夹的存档（zip、tar 等），然后下载存档，或者您可以递归地遍历文件夹并单独请求所有文件。我强烈推荐归档选项，因为通过 HTTP 的递归文件遍历可能非常混乱。根据您的技能和控制水平，您可以创建一个 URL 路径，该路径会触发一个小脚本来归档文件夹，然后初始化新创建的归档文件的下载。这可能会很慢，但它会始终为您提供文件夹内容的“实时”副本。

# android - Android WebView 标准 ContextMenu

> ID：11561485
> 
> 赞同：2
> 
> 时间：2012-07-19T13:03:23.907
> 
> 标签：android, contextmenu, android-webview

我想要 WebView 内容的上下文菜单，就像我们拥有的标准浏览器一样（见下图）。

试图显式启用 webView longClick，没有运气。

所以问题是 - 有没有办法在 Web 视图中启用“标准”上下文菜单？如果有，自定义其外观（即样式）的方式也将受到高度赞赏。

我熟悉菜单结构，当您必须自己重写时，它看起来是实现标准功能的最糟糕的方式。

![Android 浏览器上下文菜单](../Images/451eb99cc2accd5a80333b1271ae916e.png) ![Android 浏览器上下文菜单](../Images/8dbef1111554c8ea0404f85e1c63dac4.png)

# php - 无法获得价值

> ID：11561488
> 
> 赞同：0
> 
> 时间：2012-07-19T13:03:37.603
> 
> 标签：php, javascript, jquery, ajax

这是我的ajax代码

//html

```
<input type="text" name="txtName" id="name_id" /> 
```

//test.php

```
$.ajax(
    {
    url:"controller.php",
    data:$('#txtName').val(),
     success:
           function(result){
                   alert(result);
           }
    }
); 
```

//controller.php

```
<?php 

echo $_POST['txtName'];
?> 
```

它给了我一个错误

```
Undefined index:txtName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:06:11.367

Set the `data:{txtName:$('#txtName').val()}`

```
$.ajax(
    {
    url:"controller.php",
    type:"POST",
    data:{txtName:$('#txtName').val()},
     success:
           function(result){
                   alert(result);
           }
    }
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:18:39.593

使用参数名称

```
$.ajax(
    {
    type:'POST',
    url:"controller.php",
    data:"param1="+$('#txtName').val(),
     success:
           function(result){
                   alert(result);
           }
    }
    ); 
```

在 PHP 中

读它

```
$_POST['param1']; 
```

* * *

**看**

*   [缩小的例子](https://www.dropbox.com/s/fi6mx1ikivsc7ne/ajax01.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:07:24.563

Try this...

```
$.ajax(
        {
        url:"controller.php",
        data:"txtName="+$('#name_id').val(),
        type: "POST",
         success:
               function(result){
                       alert(result);
               }
        }
        ); 
```

If you want to send entire form fields. You can use `data:$('#form_id').serialize()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:16:47.473

```
$.ajax(
{
url:"controller.php",
data:$('#txtName').val(),
 success:
       function(result){
               alert(result);
       }
}
); 
```

当你使用 $("#... 你必须使用`<element id="txtName">`而不是 name="txtName"。改变它，你很高兴:)

# javascript - 溢出属性在 Amazon Kindle Fire WebView 中不起作用

> ID：11561489
> 
> 赞同：0
> 
> 时间：2012-07-19T13:03:49.523
> 
> 标签：javascript, android, css, html, webview

我开发了一个 Android 应用程序，大部分应用程序 GUI 都是使用 HTML5 开发的。我正在使用 WebView 来呈现 HTML5 内容。它似乎适用于所有主要的 Android 版本，但我在 Amazon Kindle Fire 上遇到了严重问题。**溢出**属性无法正常工作，因此存在滚动问题。我检查了是否支持溢出属性

```
 if('overflow' in document.body.style) 
```

结果是真的。但是当我将此属性应用于**ul**时，没有任何影响。请帮助解决这个问题。我不想使用 Android SDK 为 Kindle Fire 重写应用程序。这是不起作用的示例代码：

```
 <STYLE type="text/css">
        #list-container{
            left:0px;
            width:1024px;
            height:200px;
            padding:0px;
            margin:0px;
        }

        #image-list{
            height:200px;
            width:1024px;
            margin:0px;
            padding:0px;

            display:block;
            white-space:nowrap;

            overflow:scroll;
        }

        #image-list li{
            background-color:black;
            list-style:none;
            height:170px;
            width:194px;
            display:inline-block;    
        }

<body style='width:1024px;height:600px;background-color:white;overflow-x:scroll;'>

    <div id='list-container'>
        <ul id='image-list'>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div> 

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:21:25.160

Kindle Fire 基于旧版 Android。因此`overflow: scroll`不支持。

但是，[iScroll](http://cubiq.org/iscroll)是一个流行的脚本，它提供了许多与滚动相关的功能。

# jquery - 如果在 Ajax 表单中使用，jQuery 不显眼的验证会忽略提交按钮上的“取消”类

> ID：11561496
> 
> 赞同：6
> 
> 时间：2012-07-19T13:04:21.363
> 
> 标签：jquery, jquery-validate, asp.net-mvc-4, unobtrusive-validation, unobtrusive-ajax

我正在尝试使用实现可选的客户端验证

*   ASP.NET MVC 4，
*   不显眼的 jQuery 验证，
*   不显眼的ajax

### 这工作正常

下面的图片显示了我对可选客户端验证的含义：我的表单上唯一的一个字段应该包含电子邮件，因此附加了一个电子邮件验证器。

![在此处输入图像描述](../Images/45856694f1ff11bb96a2952c37d97791.png)

现在我们点击保存。因为我们的文本*“name@doamin”*不是有效的电子邮件，所以会显示验证摘要。连同验证摘要，我们将取消隐藏*“仍然保存”*按钮。

![在此处输入图像描述](../Images/0d7e83c6ae89b571893e3d9cd33bee4c.png)

第二个按钮是一个普通的提交按钮，只有`class="cancel"`. 这指示`jQuery.validate.js`脚本在使用此按钮提交时跳过验证。

这是视图的代码片段：

```
@using (Html.BeginForm())
{
    <div>
        <input data-val="true" data-val-email="Uups!" name="emailfield" />
        <span class="field-validation-valid" data-valmsg-for="emailfield" data-valmsg-replace="false">*</span>
    </div>

    <input type="submit" value="Save" />
    @Html.ValidationSummary(false, "Still errors:")
    <div class="validation-summary-valid" data-valmsg-summary="true">
        <input type="submit" value="Save anyway" class="cancel" />
    </div>
} 
```

这些都工作正常。

### 问题

第二个提交按钮 -如果我切换到 Ajax 表单，**“仍然保存”将按预期停止工作。**它的行为就像正常的一样，并且在验证成功之前阻止提交。

这是“ajaxified”视图的代码片段：

```
@using (Ajax.BeginForm("Edit", new { id = "0" },
        new AjaxOptions
            {
                HttpMethod = "POST",
                InsertionMode = InsertionMode.Replace,
                UpdateTargetId = "ajaxSection",
            }))
{
    <div>
        <input data-val="true" data-val-email="Uups!" name="emailfield" />
        <span class="field-validation-valid" data-valmsg-for="emailfield" data-valmsg-replace="false">*</span>
    </div>

    <input type="submit" value="Save" />
    @Html.ValidationSummary(false, "Still errors:")
    <div class="validation-summary-valid" data-valmsg-summary="true">
        <input type="submit" value="Save anyway" class="cancel" name="saveAnyway" />
    </div>
} 
```

我已经调试`jQuery.validation.js`以找出有什么区别，但失败了。

### 问题

欢迎任何解决或解决问题并让 ajax 表单按预期运行的想法。

* * *

## 附录

进行**客户端验证**是绝对必须的。服务器端验证不是一种选择。除了更高的流量（这个示例是一个简化 - 真实的表单包含更多的字段）和延迟之外，还有一件事是服务器端验证不会做的：客户端验证器会突出显示失去焦点的错误字段。这意味着一旦您切换到下一个字段，您就会收到反馈。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T06:07:59.453

这是微软不显眼的 ajax 脚本的一个已知限制。您可以对其进行修改以修复错误。所以在`jquery.unobtrusive-ajax.js`脚本中替换第 144 行的以下内容：

```
$(form).data(data_click, name ? [{ name: name, value: evt.target.value }] : []); 
```

和：

```
$(form).data(data_click, name ? [{ name: name, value: evt.target.value, className: evt.target.className }] : []); 
```

此外，我们将类名传递给处理程序，以便它可以决定是否应该触发客户端验证。目前，无论单击哪个按钮，它都会触发验证。现在在第 154 行，我们修改以下测试：

```
if (!validate(this)) { 
```

和：

```
if (clickInfo[0].className != 'cancel' && !validate(this)) { 
```

因此，如果使用具有类名取消的提交按钮来提交表单，则不再触发客户端验证。另一种可能性是刮掉`jquery.unobtrusive-ajax.js`脚本并将您的脚本替换为您可以使用普通旧 jQuery 不显眼地进行 AJAXify`Ajax.BeginForm`的标准。`Html.BeginForm`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-01T09:56:26.827

最后我想出了一个本身不引人注目的解决方案

```
 // restore behavior of .cancel from jquery validate to allow submit button 
    // to automatically bypass all jquery validation
    $(document).on('click', 'input[type=image].cancel,input[type=submit].cancel', function (evt)
    {
        // find parent form, cancel validation and submit it
        // cancelSubmit just prevents jQuery validation from kicking in
        $(this).closest('form').validate().cancelSubmit = true;
        $(this).closest('form').submit();
        return false;
    }); 
```

注意：如果第一次尝试它似乎不起作用 - 确保您没有往返服务器并刷新错误页面。您必须通过其他方式绕过服务器端的验证 - 这只是允许提交表单，而不必为`.ignore`表单中的所有内容添加属性。

`button`（如果您使用按钮，可能需要添加到选择器）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-25T17:53:38.717

如果不需要不显眼的验证，请禁用它并在服务器端进行所有检查。

您可以在服务器端检查提交按钮的值并根据该值继续：

`name`为您的两个提交输入添加属性：

```
<input type="submit" value="Save" name="btnSubmit" />
<input type="submit" value="Save anyway" class="cancel" name="btnSubmit" /> 
```

更新您要采取的行动`string btnSubmit`。如果你有一个，你可以把它放在你的模型中。

```
[HttpPost]
public ActionResult Edit(string emailfield, string btnSubmit)
{
    switch (btnSubmit)
    {
        case "Save":
            if(ModelState.IsValid)
            {
                // Save email
            }
            break;
        case "Save anyway":
            // Save email
            return RedirectToAction("Success");
            break;
    }
    // ModelState is not valid
    // whatever logic to re display the view
    return View(model);
} 
```

* * *

**更新**

我知道客户端验证简化了工作，但是如果您无法弄清楚 Ajax 有什么问题（我不熟悉在输入输入时 class="cancel" 的行为），您可以编写一个脚本来验证在服务器端不关注的输入：

```
$('input[type=text]').blur(function(){
    $.ajax({
        url: '/ControllerName/ValidateInput',
        data: { inputName: $(this).val() },
        success: function(data) {
            //if there is a validation error, display it
        },
        error: function(){
            alert('Error');
        }
    });
}); 
```

现在您需要创建一个操作来验证输入：

```
public ActionResult ValidateInput(string inputName)
{
    bool isValid = true;
    string errorMessage = "";
    switch (inputName)
    {
        case "password"
            // do password validation
            if(!inputIsValid)
            {
                isValid = false;
                errorMessage = "password is invalid";
            }
            break;
        case "email"
            // do email validation
            if(!inputIsValid)
            {
                isValid = false;
                errorMessage = "email is invalid";
            }
            break;
    }
    return Json(new { inputIsValid = isValid, message = errorMessage });
} 
```

这有点麻烦，但正如我所说，如果您不弄清楚客户端验证，它可能会起作用。

* * *

**更新**

不知道为什么我没有首先想到这个......而不是依靠`class="cancel"`你可以做这样的事情：

提供您的“无论如何”提交输入 ID：

```
<input type="submit" value="Save anyway" class="cancel" name="btnSubmit" id="submitAyway" /> 
```

然后有一个这样的脚本：

```
$('#submitAyway').click(function(evt) {
    evt.preventDefault();
    $('form').submit();
}); 
```

我没有对此进行测试，但理论上，这应该提交表单而不进行验证。正如我在第一个示例中展示的那样，您可能仍然需要服务器端验证。

# powershell - 用于计算省略包含特定字符的行的行数的 Powershell 脚本

> ID：11561497
> 
> 赞同：3
> 
> 时间：2012-07-19T13:04:33.153
> 
> 标签：powershell

我对powershell很陌生。

在编写脚本以计算 Visual Studio 项目中的总行数时需要帮助，前提是我省略（忽略）代码中的注释行。例如：<'> 单引号，如在 vb.net 中。无论哪一行被注释，即以 <'> 单引号开头，我不需要在文件的行数中考虑。

到目前为止，我已经成功编写了用于根据文件类型（比如 *.vb 等）计算项目中行数的脚本。像下面

```
(dir -include *.cs,*.xaml -recurse | select-string .).Count 
```

*   我现在需要如何在计数时忽略以单引号开头的行？
*   你能建议我可以在上面的代码行中包含的东西吗？

任何帮助将不胜感激！

谢谢，阿希什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:08:22.627

Try

```
(gc c:\file.vb | ? { !$_.startswith("'") }).count 
```

Edit after comment:

try this:

```
dir c:\myfolder -include *.cs,*.xaml,*.txt -Recurse | % { $count = (gc $_ |  ? { $_ -notmatch '^\s*$|^''|/\*|\*/' }).count; if ($count) {write-host "$_ `tcount: $count"} } 
```

this one count no empty lines, no line starting with ' and no lines containing /* or */.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:15:46.213

获取所有不以单引号开头的行，即使它前面有前导空格或制表符。将结果通过管道传输`Measure-Object`到计数行。

```
Get-Content file.ext | Where-Object {$_ -notmatch "(\s?)+'"} | Measure-Object 
```

# git - 如何使用 git 比较两个不在 repo 中的文件

> ID：11561498
> 
> 赞同：147
> 
> 时间：2012-07-19T13:04:38.120
> 
> 标签：git, compare, diff

我想比较两个不在任何 git 存储库中的 css 文件。git中有这样的功能吗？

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2013-06-19T15:02:48.947

`git`的 diff 比标准的 unix 更实用`diff`。我经常想这样做，因为这个问题在谷歌上排名很高，我希望这个答案出现。

这个问题：[如何`git diff --color-words`在 Git 存储库之外使用？](https://stackoverflow.com/questions/5637311/how-to-use-git-diff-color-words-outside-a-git-repository)

展示了如何使用 git 来比较其中至少一个文件不在存储库中的文件，方法是`--no-index`：

```
git diff --no-index file1.txt file2.txt 
```

哪个被 git 跟踪，哪个不被跟踪并不重要 - 一个或两个都可以不被跟踪，例如：

```
$ date > x
$ sleep 2
$ date > y
$ git diff --color-words --no-index x y
diff --git a/x b/y
index 6b10c7c..70f036c 100644
--- a/x
+++ a/y
@@ -1 + 1 @@
Wed Jun 10 10:57:45|10:57:47 EDT 2013 
```

颜色无法在此处显示，因此我在示例中用管道分隔更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-16T09:02:30.117

`diff -u`

将为 git 的 diff 提供类似的统一上下文输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:10:35.913

只需使用 diff 命令：

```
diff file1.ext file2.ext 
```

# xml - 使用 XSL 将 XML 嵌套数据转换为平面概览表

> ID：11561501
> 
> 赞同：1
> 
> 时间：2012-07-19T13:04:52.397
> 
> 标签：xml, xslt, html-table

我有 xml 数据，例如：

```
<rootNode>
    <subNode name="sn1">
        <node name="field2" value="23"/>
        <node name="field4" value="24"/>
    </subNode>
    <subNode name="sn2">
        <node name="field2" value="39"/>
    </subNode>
    <subNode name="sn3">
        <subNode name="f1">
            <node name="field2" value="23"/>
            <node name="field4" value="24"/>
        </subNode>
        <node name="field2" value="23"/>
        <node name="field8" value="24"/>
    </subNode>
</rootNode> 
```

节点的深度是无限的。sunNode 可以在每个子节点内。节点只能在子节点内。

我想把它变成一个像这样的表格：

```
+-----------+-----+-----+-----+
| Field     | sn1 | sn2 | sn3 |
|-----------+-----+-----+-----+
|field2     |  23 |  39 |  23 |
|-----------+-----+-----+-----+
|field4     |  24 | n/a | n/a |
|-----------+-----+-----+-----+
|field8     | n/a | n/a |  24 |
|-----------+-----+-----+-----+
|f1->field2 | n/a | n/a |  23 |
|-----------+-----+-----+-----+
|f1->field4 | n/a | n/a |  24 +
+-----------+-----+-----+-----+ 
```

所以我必须在每个“子节点”中搜索每个可能的“节点”并为每个节点创建一行。然后，如果存在 top-SubNode 条目，则显示该值。

和

```
<xsl:for-each select="subNode//node()">
    <tr>
        <td><xsl:value-of select="@name"/></td>
    </tr>
</xsl:for-each> 
```

我至少得到了数据中所有元素的列表。但该列表并不明确。

我发现[了这一点](https://stackoverflow.com/questions/8408181/xsl-distinct-sub-nodes)，但无法将其应用于我的需求。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:12:47.037

XSLT 将一种形式的 XML 转换为另一种形式的 XML。它不会像您自己显示的那样将 XML 转换为格式化的显示。为此，您需要使用 FOP 之类的东西。

# php - 为什么我需要显式实例化一个对象？

> ID：11561503
> 
> 赞同：0
> 
> 时间：2012-07-19T13:04:53.500
> 
> 标签：php, oop

我的 MVC 框架有问题。这是我`loadModel()`在主控制器中的方法：

```
public function loadModel($name) {
$path = 'models/' . $name . '_Model.php';

    if (file_exists($path)) {
        require $path;  
        $modelName = $name . '_Model';
        $this->model = new $modelName;
    }
} 
```

如您所见，当我尝试加载控制器时，它会自动加载带有`same name + _model.php`.

当我使用 wamp 或 xampp 时，我没有任何问题，但是，当我将它上传到我的网站时，它会`"Undefined property"`在每个模型上显示。这意味着模型未加载。我知道问题出在那儿...

这是服务器的 php.ini 文件中的某种错误吗？或者可能是因为不同的 PHP 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:08:41.767

Windows 不区分大小写，即就Windows 而言，Model.php 和model.php 是相同的。但是，在 unix/linux 上（我假设您的网站服务器是）文件系统区分大小写。

基本上，检查您的文件名 - 如果您尝试加载`$name_Model.php`但文件`$name_model.php`在您上传时会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:09:01.753

您可能想考虑使用[autoloading](http://www.php.net/manual/en/function.spl-autoload-register.php)来解决您的所有问题：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:09:31.470

不要依赖相对路径，它们依赖于当前目录。

制作一个绝对路径，例如（适应您的需要）：

```
$path = __DIR__ . '/models/' . $name . '_Model.php'; 
```

如果你让类似的东西在本地工作，它也应该在服务器上工作。

顺便说一句，我不明白为什么 _Model 后缀。models/Car.php 还不够吗？

# iphone - UITextView 的键盘类型

> ID：11561505
> 
> 赞同：3
> 
> 时间：2012-07-19T13:04:56.257
> 
> 标签：iphone, objective-c, ios, uitextview, uikeyboardtype

我想知道如何获取 uitextview 的键盘类型。我能够通过使用 textfield.keyboardtype 获取 uitextfield 的键盘类型，但它似乎不适用于 uitextview。请帮助我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T13:11:58.563

尝试这个

```
UITextView *txvw = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 24, 20)];
txvw.keyboardType =UIKeyboardTypeURL; 
```

和备用键盘类型是

```
UIKeyboardTypeDefault,                // Default type for the current input method.
UIKeyboardTypeASCIICapable,           // Displays a keyboard which can enter ASCII characters, non-ASCII keyboards remain active
UIKeyboardTypeNumbersAndPunctuation,  // Numbers and assorted punctuation.
UIKeyboardTypeURL,                    // A type optimized for URL entry (shows . / .com prominently).
UIKeyboardTypeNumberPad,              // A number pad (0-9). Suitable for PIN entry.
UIKeyboardTypePhonePad,               // A phone pad (1-9, *, 0, #, with letters under the numbers).
UIKeyboardTypeNamePhonePad,           // A type optimized for entering a person's name or phone number.
UIKeyboardTypeEmailAddress,           // A type optimized for multiple email address entry (shows space @ . prominently). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:40:08.810

您可以像获取 UITextField 一样获取 UITextView 的键盘类型。

```
 UITextView* textView = [[UITextView alloc] initWithFrame:CGRectMake(0,0,320,30)];
 [self.view addSubview:textView];
 UIKeyboardType type = textView.keyboardType;
 [textView release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:13:37.677

如果您只是阅读 UITextView 类参考，它在键盘上有一个完整的部分，其中包含以下文本：

“可以使用 UITextInputTraits 协议提供的属性自定义键盘本身的外观。文本视图对象实现了此协议并支持它定义的属性。您可以使用这些属性来指定键盘的类型（ASCII、数字、URL、电子邮件等）来显示。您还可以配置键盘的基本文本输入行为，例如是否支持自动大写和更正文本。

所以这意味着 UITextView 采用 UITextInputTraits 协议，这意味着它响应每个所需的消息。要覆盖方法，您需要继承 UITextView，然后将方法添加到您的子类以返回不同的键盘类型等。

对于属性，您可以按照其他响应者的建议设置属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:15:27.123

这个问题会帮助你：[UITextView does not seem to implement reloadInputViews](https://stackoverflow.com/questions/4005738/uitextview-does-not-seem-to-implement-reloadinputviews)

# forms - Firefox 在表单输入值为空时显示文本

> ID：11561506
> 
> 赞同：0
> 
> 时间：2012-07-19T13:05:10.223
> 
> 标签：forms, html, firefox

嗨，我正在制作一个网站并使用一个表单，但是当它的值为空时，Firefox 会在输入字段中不断显示不需要的文本。在输入法中使用电子邮件或电话时会发生这种情况。

```
 <form action='locatie.php?root=<?php echo $root; ?>' target='_self' method='post' onSubmit='return checkForm()' >
<table style='width:725px;' id='text' border='1'>
  <tr>
    <td colspan='7'></td>
  </tr>
  <tr>
    <td colspan='7' ><hr /></td>
  </tr>
  <tr>
    <td style='width:100px;' ><label for='locatie' >Locatie naam: </label></td>
    <td style='width:140px;' ><input type='text' name='locatie' id='locatie' value='' placeholder='locatie naam' maxlength='20' size='20' /></td>
    <td style='width:8 0px;' ><label for='adres' >Adres: </label></td>
    <td colspan='4'><input type='text' name='adres' id='adres' value='' placeholder='Adres locatie' maxlength='30' size='30'/></td>
  </tr>
  <tr>
    <td><label for='beheer' >Beheerder: </label></td>
    <td ><input type='text' name='beheer' id='beheer' value='' placeholder='Beheerder naam' maxlength='21' size='20' /></td>
    <td><label for='tel' >Tel nr: </label></td>
    <td style='width:140;' ><input type='text' name='tel' id='tel' value='' maxlength='13' size='12' /></td>
    <td style='width:80px;' >Email:</td>
    <td colspan='2'><input type='text' name='email' id='email' value=' ' placeholder='Email beheer' maxlength='31' size='20' /></td>
  </tr>
  <tr>
    <td style='vertical-align:top;' ><label for='route' >Route beschrijving: </label></td>
    <td style='vertical-align:top;' colspan='6'><textarea name='route' id='route' value='' placeholder='Google maps link met route' cols='75' rows='10' ></textarea></td>
  </tr>
  <tr>
    <td colspan='7'>&nbsp;</td>
  </tr>
  <tr>
    <td ><label for='ondergrond' >Ondergrond: </label></td>
    <td ><select name='ondergrond' id='ondergrond' >
                <option value='Veld' >Veld</option>
          <option value='Zaal' >Zaal</option>
          <option value='Kunstgras' >Kunstgras</option>
         </select>
     </td>
    <td><label for='seizoen' >Seizoen: </label></td>
    <td><select name='seizoen' id='seizoen' >
                <option value='Veld' >Veld</option>
          <option value='Zaal' >Zaal</option>
         </select>
    </td>
    <td colspan='3'></td>
  </tr>
  <tr>
    <td colspan='7'><input type='submit' name='action' id='action' value='Opslaan' /></td>
  </tr>
  <tr>
    <td colspan='7'><hr /></td>
  </tr>
</table>
</form> 
```

在 Firefox 中，输入字段将包含我不想要的文本“在此处输入您的电话号码”或“在此处输入您的电子邮件”。除了向输入中添加内容外，有什么方法可以防止 Firefox 这样做吗？

如果添加整个表单，页面的其余部分包含大量的 php，它们只是将表单保​​存到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:12:38.797

您正在字段上设置`placeholder`属性`<input>`，其目的是在没有输入数据的情况下显示某些内容。

只需删除该属性，您就会没事的。

引用[MDN](https://developer.mozilla.org/en/HTML/Element/Input)：

> **占位符**
> 
> 提示用户可以在控件中输入的内容。占位符文本不得包含回车或换行符。当 type 属性的值为 text、search、tel、url 或 email 时，该属性适用；否则将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T18:10:59.680

占位符是问题，但解决方案不是删除它。在输入标签内使用 autocomplete="off"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T15:17:21.947

清除您的 cookie、保存的表单数据和浏览器缓存。还要禁用 JS 以查看这是否是罪魁祸首。

如果您不使用它，您可能还想删除 placeholder="" 属性。

我强烈建议您下载 Chris Pederick 的“Web 开发人员工具栏”，因为从浏览器中清除所有这些内容并禁用 JS/CSS 等就像单击按钮一样简单。适用于 Firefox 和 Chrome。

[http://chrispederick.com/work/web-developer/](http://chrispederick.com/work/web-developer/)

祝你好运，迈克尔。

# php - PHP MYSQL 简单程序逻辑

> ID：11561509
> 
> 赞同：1
> 
> 时间：2012-07-19T13:05:24.810
> 
> 标签：php, mysql, logic

我的网站中有 100 种产品的列表。每个产品在网站上都有自己的页面。现在，当我想要一些折扣或任何其他优惠时说 5 种产品，我会在 products.php 中写一个 if 条件来显示产品. products.php 页面通过在其 url 中采用不同的 productId 来显示不同的产品，如下所示。因此对于不同的 productId 显示不同的产品

例如 [http://www.samplesite.com/products?ProductId=15](http://www.samplesite.com/products?ProductId=15)

我想要的是，因为我正在定期更改产品的折扣和优惠，除了数据库之外，存储产品 ID 的最佳方法是存储在网站中所有页面都可用的常量中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:14:20.340

1.  每个产品必须有一个唯一的 ID，整数值

2.  每个产品都可能附加折扣，使用产品唯一 ID 链接到产品的折扣

3.  唯一的产品 id 必须可用于所有涉及的页面，例如，如果显示的当前页面是产品所属的类别页面，产品将在那里列出并且 id 应该可用

4.  如果您只使用 php，请将 id 放在链接中

5.  如果使用 javascript，请将 id 放在 id 标签中并使用它

# windows - 使用核心音频 API 消除回声

> ID：11561510
> 
> 赞同：1
> 
> 时间：2012-07-19T13:05:26.807
> 
> 标签：windows, api, echo, core-audio, aec

有人尝试使用 Windows Core 音频 API 取消回声吗？我想知道它有多好用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:07:45.207

这是在 google 提供的 webrtc 包中完成的。检查 Windows 的核心音频驱动程序 (audio_device_core_win.cc)。对于支持该功能的设备，它对我来说效果很好。

# c++ - 线程中不接受套接字

> ID：11561512
> 
> 赞同：1
> 
> 时间：2012-07-19T13:05:40.540
> 
> 标签：c++, multithreading, sockets

伙计们。最近，我决定尝试使用 TCP/IP 技术，所以目前我正在尝试使用套接字编写某种服务器/客户端聊天。

我想问的是交互线程和套接字。具体来说，我对 accept() 函数很感兴趣。我尝试搜索它，但没有找到类似的情况。

所以，问题是 - 当我试图接受线程之外的套接字时，它工作得很好。相反，如果我在线程内使用它，它的调用将被忽略。

所以，这里是调用接受函数的方法：

```
void ServerSocket::Accept( void )
{
    sockaddr_in saClientAddr;
    int nCliSize = sizeof( sockaddr_in );
    sClient = accept( sSocket, (sockaddr*)&saClientAddr, &nCliSize );

    if( sClient == INVALID_SOCKET )
    {
        GetError();
        return;
    }
} 
```

因此，以下列方式使用它：

```
CServerObj.Accept(); 
```

它工作得很好，服务器等待来自客户端的输入然后恢复。但是，如果它在线程内部使用：

```
unsigned __stdcall ServerThread( void* Param )
{
    while( true )
    {
        CServerObj.Accept();
    }
    return 0;
} 
```

然后开始线程：

```
_beginthreadex( 0, 0, &ServerThread, 0, 0, NULL ); 
```

然后每次都忽略accept()，程序进入无限循环告诉错误（GetError方法）。

所以，我对这种情况有点困惑。这是因为线程调用是异步的，因此它不等待客户端的响应吗？

无论如何，如果有人能解释我做错了什么，我将不胜感激。

* * *

因此，经过一番尝试和努力，我找出了这种奇怪行为背后的原因。看起来`CServerObj`，它被声明为`static`调用构造函数两次，因此渲染`bind`函数无用。数字，这是我的愚蠢错误。

但是好吧，现在我有另一个问题——为什么构造函数在那里被调用了两次？标头中的代码如下所示：

```
#ifndef __BLAH_H__
#define __BLAH_H__

class ServerSocket
{
    //some code
}
static ServerSocket CServerObj;

#endif // __BLAH_H__ 
```

我想这可能是因为在头文件中声明了变量......但不应该`#ifndef`保护它免受第二次声明？

# winapi - 从 xp 远程到 xp 时 Win32 BlockInput 不解锁

> ID：11561513
> 
> 赞同：1
> 
> 时间：2012-07-19T13:05:40.593
> 
> 标签：winapi, c#-4.0, remote-desktop

我有一个在 C# 中调用 Win32 BlockInput 函数的脚本，如下所示：

```
public partial class NativeMethods
    {

        /// Return Type: BOOL->int
        ///fBlockIt: BOOL->int
        [System.Runtime.InteropServices.DllImportAttribute("user32.dll", EntryPoint =     "BlockInput")]
        [return: System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)]
        public static extern bool BlockInput([System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)] bool fBlockIt);

    }

    public static void toggleMouseAndKeyboard(bool flag)
    {
        try
        {
            NativeMethods.BlockInput(flag);
        }
        catch(Exception ex)
        {
            throw new Exception(ex.Message);
        }
    } 
```

每当我在本地运行脚本时，无论是 Windows 7 还是 Windows XP，这都能正常工作。我也可以通过按 CTRL + ALT + DEL 来解锁机器。

当我从 Windows 7 机器远程到 Windows XP 或 Windows 7 到 Windows 7 时，这也将起作用。如果我突出显示远程桌面窗口，然后按 CTRL + ALT + DEL，它将解锁远程桌面会话。

当我先从 Windows 7 机器远程到 XP 机器，然后从 XP 远程会话远程到另一个 XP 会话时，它甚至可以工作。我可以很好地解锁第二个 XP 会话。

但是，当我从一台 XP 机器远程到另一台 XP 机器时，远程桌面会话在运行此脚本后不会解锁。CTRL + ALT + DEL 不起作用。我们必须进行硬重启才能重新进入机器，或者让其他人登录以关闭锁定的会话。

似乎只要您开始远程处理的本地计算机是 XP，它就不会解锁任何远程桌面会话。有谁知道解决这个问题的方法？

# c# - 我怎样才能得到所有的链接标题？

> ID：11561517
> 
> 赞同：0
> 
> 时间：2012-07-19T13:05:48.647
> 
> 标签：c#, .net, httpwebrequest, html-agility-pack

我正在尝试从[此处](http://leagueoflegends.wikia.com/wiki/List_of_champions)获取所有名称的列表（表中的冠军链接标题），但我没有成功.. 谁能指导我这段代码有什么问题？

谢谢！

```
var url = "http://leagueoflegends.wikia.com/wiki/List_of_champions";
var web = new HtmlWeb();
var doc = web.Load(url);            

foreach (HtmlNode table in doc.DocumentNode.SelectNodes("//table[3]/tr"))
{
    HtmlNode item = table.SelectSingleNode("//a");
    Console.WriteLine(item.GetAttributeValue("title", false));
} 
```

**更新：**

好吧，我让它与这段代码一起工作得很好：

```
var url = "http://leagueoflegends.wikia.com/wiki/List_of_champions";
var web = new HtmlWeb();
var doc = web.Load(url);            

foreach (HtmlNode item in doc.DocumentNode.SelectNodes("//table[3]/tr/td/span/a"))
{
    Console.WriteLine(item.Attributes["title"].Value);
}

return true; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:13:39.220

请以这种方式使用xpath

```
foreach (HtmlNode linkItem in doc.DocumentNode.SelectNodes("//table[3]/tr//a"))
{
    Console.WriteLine(linkItem.Attributes["title"].Value());
    Console.WriteLine(linkItem.Attributes["alt"].Value());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:31:47.517

我敲了一个快速而肮脏的例子，经过测试并且可以完美运行，但是您需要对结果进行一些格式化：

```
protected void Page_Load(object sender, EventArgs e)
{
      List<HtmlAgilityPack.HtmlNode> test = GetInnerTest();

      foreach (var node in test)
      {
            Response.Write("Result: " + node.InnerHtml.ToString());
      }

}

public List<HtmlAgilityPack.HtmlNode> GetInnerTest()
{
     HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

     doc.OptionFixNestedTags = true;
     doc.Load(requestData("http://leagueoflegends.wikia.com/wiki/List_of_champions"));

     var node = doc.DocumentNode.Descendants("span").Where(d => d.Attributes.Contains("class") && d.Attributes["class"].Value.Contains("character_icon")).ToList();

     return node;
}

public StreamReader requestData(string url)
{
       HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
       HttpWebResponse resp = (HttpWebResponse)req.GetResponse();

       StreamReader sr = new StreamReader(resp.GetResponseStream());

       return sr;
} 
```

您需要下载[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)并包含参考以使其正常工作。

# java - Printing a square - can't find the error

> ID：11561526
> 
> 赞同：0
> 
> 时间：2012-07-19T13:06:18.617
> 
> 标签：java

The work I am currently doing requires me to 'draw' a square by printing '*' as the outline and '.' to fill it in. My code seems to work but it still isn't accepting it. I am a beginner, thanks.

```
class Main {

    public static void main(String args[]) {

        int square = 5;
        int line = 1;
        int stars = 1;
        int startLine = square / square;

        while (line <= startLine) {

            while (stars <= square) { // first line prints out dots for the value of square, in this case 5
                System.out.print("*");
                stars = stars + 1;
            }

            System.out.println();
            line = line + 1;                //prints new line and adds 1 to line. Meaning it will move to the next section as it is now greater than startLine
        }

        stars = 1;              //resets stars

        while (line <= square - 1) {// line will keep looping until its value is greater than square - 1

            while (stars <= startLine) {
                System.out.print("*");         // First character to print is *
                stars = stars + 1;
            }

            while (stars <= square - 1) {
                System.out.print(".");          //prints 3 dots
                stars = stars + 1;
            }

            while (stars <= square) {
                System.out.print("*");         // stars is equal to square so 1 star is printed 
                stars = stars + 1;
            }

            stars = 1;
            System.out.println();
            line = line + 1;              // adds a value and loops around again
        }

        stars = 1;
        while (line <= square) {

            while (stars <= square) {
                System.out.print("*");
                stars = stars + 1;
            }

            System.out.println();
            line = line + 1;
        }
    }
} 
```

It seems to make up the square and if I change the value of 'square' the size changes too. I can't see the problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:20:29.737

有更好的方法可以做到这一点，然后为每一行设置一个循环。您可以考虑的一件事是您知道它是一个正方形，因此在您的情况下它总是像 5x5 或 6x6、7x7 等...

假设 x 表示正方形的宽度，y 表示正方形的高度。当您的索引为 , 和其他任何内容时，您只`*x5`需要星号`5x*`“ ”`1x*``*x1``.`

所以这里有一些伪代码

```
get width or height from user then set either the height or the width to the same thing that way its a square

for loop 1 to 5 //x - width
    for loop 1 to 5 //y - height
        if (check for *x5, 5x*, 1x* and *x1) //you can make a couple IF's if you want
            print a star
        else 
            print a dot
        end if
     print new line ("\n")
    next
next 
```

我希望这有帮助。

# internet-explorer - GoogleChromeFrame won't load if launched from mail

> ID：11561527
> 
> 赞同：1
> 
> 时间：2012-07-19T13:06:21.720
> 
> 标签：internet-explorer, outlook, google-chrome-frame

I have installed GCF on my machine. I configured a test website with `X-UA-Compatible` so GCF will be used. It works if I type the url, click it from history or favorites.

But if I click the url from a mail in an Outlook 2007 client, it doesn't. Plain IE is used. GCF is not loaded.

If clicked from Webmail, it works

How can I make it work even from Outlook ?

# c#-4.0 - Format MS Access Datetime using ODBC query

> ID：11561528
> 
> 赞同：0
> 
> 时间：2012-07-19T13:06:25.803
> 
> 标签：c#-4.0, ms-access, datetime, format

I need to format datetime that comes from MS Access to "m-d-yyyy" using odbc in C#.net( desktop app). "Select Format([Date],'M-d-yyyy') from table" does not work.

Thanks, Kanaya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:29:20.593

I may be over simplifying this but:

```
m-d-yyyy 
```

won't work as Days/Months can have up to two digits, what you need is:

```
mm-dd-yyyy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:11:04.533

尝试

```
Select convert(char, [Date], 101) 
```

# javascript - 嵌入外部 js 脚本 - 合理的限制？

> ID：11561529
> 
> 赞同：0
> 
> 时间：2012-07-19T13:06:26.667
> 
> 标签：javascript, jquery, ajax

我们有主布局页面，我们有一些外部脚本，在通过 ajax 加载页面后加载。其中一些真的很慢，因为他们正在打开 socket.io 连接。这会减慢整个页面的加载速度。

我有一些疑问：

1.  如果外部小部件在正文中包含超过 5 个脚本，可以吗？我们应该对每个服务的脚本数量有什么合理的限制？

2.  `<script src="/path/to.js"></script>`嵌入在 ajax 加载的 html 中 - 将对服务器进行同步或异步查询？

3.  在外部脚本加载期间如何避免浏览器阻塞？

4.  当我们有很多外部脚本时，如何提高加载速度？

**更新：**最后我使用[HeadJS](http://headjs.com/)库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:16:52.823

1.  虽然可以加载许多不同的脚本，但建议减少不同的 HTTP 调用，因为大多数浏览器允许每个域最多 2 个并发连接，这意味着您的代码将 2 x 2 加载它们，并且不会继续运行直到它们被加载。最佳实践是缩小所有脚本并将其连接到更少的文件中。
2.  据我所知，常规脚本标签通常会同步加载，甚至会减慢 ajax 加载的 html。
3.  有一些很好的建议可以避免浏览器阻塞。要么在你的 body 标签底部加载你的脚本，以确保在处理繁重的脚本之前解析所有内容。您还可以使用 defer 和 async 标记（后者是 HTML5），或者在文档发送“就绪”事件后尝试加载脚本。
4.  减少 HTTP 调用，将一些 JS 的解析推迟到需要的时候，并延迟+异步加载您的 javascript 外部以防止冻结浏览器。

一个很好的阅读是：[http ://www.sitepoint.com/a-detailed-breakdown-of-the-ltscriptgt-tag/](http://www.sitepoint.com/a-detailed-breakdown-of-the-ltscriptgt-tag/)

它非常透彻地解释了脚本标签本身的历史和演变，并提供了一些最佳实践。

# c# - 位图结构

> ID：11561531
> 
> 赞同：1
> 
> 时间：2012-07-19T13:06:31.347
> 
> 标签：c#, .net, struct, bitmap

我有这个结构定义：

```
public struct Icon {
  public Bitmap bitmap;
  public Bitmap g_bitmap;
  public int bitmap_ID;
  public int g_bitmap_ID;
} 

Icon current = new Icon(); 
```

然后我尝试从文件中加载位图：

```
current.bitmap = new Bitmap(path);
//Create the texture
current.bitmap_ID = TexUtil.CreateTextureFromBitmap(current.bitmap);
current.g_bitmap = new Bitmap(current.bitmap) 
```

其他变量也一样，但`bitmap/g_bitmap`仍然有`null`值，`bitmap_ID/g_bitmap_ID`位于`0`。

不太确定是否了解结构的工作原理（我以前的经验是在 C 语言中）。试图阅读 MSDN 文档，但没有任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:17:56.860

对不起大家，我真的是个笨蛋。忘记传递对我的方法的引用......

```
private void Load_Icon(Icon icon, string path) {
  icon.bitmap = new Bitmap(path);
  icon.bitmap_ID = TexUtil.CreateTextureFromBitmap(icon.bitmap);
  icon.g_bitmap = new Bitmap(icon.bitmap);
} 
```

忘记`ref`在第一个参数中添加 a。通过这种方式，它仅在`icon`. 这有效：

```
private void Load_Icon(ref Icon icon, string path) [...] 
```

赦免！

# java - 从java执行cmd命令后如何定期检查文件？

> ID：11561533
> 
> 赞同：1
> 
> 时间：2012-07-19T13:06:34.937
> 
> 标签：java, cmd

我已经使用下面的代码从 java 运行 cmd 命令（从[这里](https://stackoverflow.com/questions/4157303/how-to-execute-cmd-commands-via-java)采用的代码）

```
 private static void execute(File file){
   try {
        String[] command =
        {
           "cmd",
        };
        Process p = Runtime.getRuntime().exec(command);
        new Thread(new SyncPipe(p.getErrorStream(), System.err)).start();
        new Thread(new SyncPipe(p.getInputStream(), System.out)).start();
        PrintWriter stdin = new PrintWriter(p.getOutputStream());
        stdin.println("cd " + file.getParent());
        stdin.println("gxm -execute " + file.getPath());
        // write any other commands you want here
        stdin.close();
        int returnCode = p.waitFor();
        System.out.println("Return code = " + returnCode);
    }catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

同步管道类：

```
class SyncPipe implements Runnable
{
public SyncPipe(InputStream istrm, OutputStream ostrm) {
      istrm_ = istrm;
      ostrm_ = ostrm;
  }
  public void run() {
      try
      {
          final byte[] buffer = new byte[1024];
          for (int length = 0; (length = istrm_.read(buffer)) != -1; )
          {
              ostrm_.write(buffer, 0, length);
          }
      }
      catch (Exception e)
      {
          e.printStackTrace();
      }
  }
  private final OutputStream ostrm_;
  private final InputStream istrm_;
} 
```

此代码工作正常，执行结果是一个名为 的文件`**COMPLETED**`，但我已经实现了以下方法来检查该文件以指示执行已完成。

```
 private static boolean checkFinished(String path)
{
    boolean result = false;
    String directory = path + "\\expts";
    File dir = new File(directory);
    if(dir.isDirectory())
        while(!result)
        {
            for(File f: dir.listFiles())
                if(!f.isDirectory() && "__COMPLETED__".equals(f.getName()))
                {
                    result = true;
                     break;
                }
            if(!result)
            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    System.out.println(result);
    return result;

} 
```

但是当我像这样在主方法中调用这些方法时：

```
 File f = new File("C:\\inputFile.txt");
    execute(f);

    System.out.println(checkFinished(f.getParent())); 
```

我得到以下输出：

```
false // printed from the checking
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.
.... // rest of cmd output 
```

这里的问题是该`checkFinshed`方法打印一次，然后在文件已经存在时打印 true。代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:49:42.503

37 次观看，甚至没有评论！无论如何，我将我的`checkFinished`方法更改为以下并且它有效。希望它会对其他人有益。

```
 private static boolean checkFinished(String path)
{
    boolean result = false;
    String directory = path + "\\expts";
    File dir = new File(directory);
    while(true) 
    {
        try 
        {
            Thread.sleep(3000);
        } catch (InterruptedException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if(dir.isDirectory())
        {
            for(File f: dir.listFiles())
                if(!f.isDirectory() && "__COMPLETED__".equals(f.getName()))
                {
                    result = true;
                    logger.info(" SIMULATOR:  simulation finished ");
                     break;
                }
            if(result)
                break;
        }
    }
    return result;
} 
```

# jquery - 在鼠标悬停之前下拉菜单不显示菜单项

> ID：11561536
> 
> 赞同：0
> 
> 时间：2012-07-19T13:06:57.383
> 
> 标签：jquery

我正在尝试学习 jquery，我得到了一个下拉菜单示例，如下所示：

```
<html>
<head>
<title>CSS Dropdown</title>

<style type="text/css">

    /* General */
    #cssdropdown, #cssdropdown ul { list-style: none; }
    #cssdropdown, #cssdropdown * { padding: 0; margin: 0; }

    /* Head links */
    #cssdropdown li.headlink { width: 220px; float: left; margin-left: -1px; border: 1px black solid; background-color: #e9e9e9; text-align: center; }
    #cssdropdown li.headlink a { display: block; padding: 15px; }

    /* Child lists and links */
    #cssdropdown li.headlink ul { display: none; border-top: 1px black solid; text-align: left; }
    #cssdropdown li.headlink:hover ul { display: block; }
    #cssdropdown li.headlink ul li a { padding: 5px; height: 17px; }
    #cssdropdown li.headlink ul li a:hover { background-color: #333; }

    /* Pretty styling */
    body { font-family: verdana, arial, sans-serif; font-size: 0.8em; background-color: black; }
    #cssdropdown a { color: white; } #cssdropdown ul li a:hover { text-decoration: none; }
    #cssdropdown li.headlink { background-color: white; background-image: url(bg.gif); }
    #cssdropdown li.headlink ul { background-image: url(bg.gif); background-position: bottom; padding-bottom: 10px; }
</style>
<script language="JavaScript">
    window.onload = function()
    {
        var lis = document.getElementById('cssdropdown').getElementsByTagName('li');
        for(i = 0; i < lis.length; i++)
        {
            var li = lis[i];
            if (li.className == 'headlink')
            {
                li.onmouseover = function() { this.getElementsByTagName('ul').item(0).style.display = 'block'; }
                li.onmouseout = function() { this.getElementsByTagName('ul').item(0).style.display = 'none'; }
            }
        }
    }
    /* or with jQuery:
    $(document).ready(function(){
        $('#cssdropdown li.headlink').hover(
            function() { $('ul', this).css('display', 'block'); },
            function() { $('ul', this).css('display', 'none'); });
    });
    */
</script>
</head>

<body>
    <ul id="cssdropdown">

        <li class="headlink">
            <a href="http://google.com/">Search Engines</a>

            <ul>
                <li><a href="http://google.com/">Google</a></li>
                <li><a href="http://yahoo.com/">Yahoo</a></li>
                <li><a href="http://live.com/">Live Search</a></li>
            </ul>
        </li>
        <li class="headlink">
            <a href="http://shopping.com">Shopping</a>

            <ul>
                <li><a href="http://amazon.com/">Amazon</a></li>
                <li><a href="http://ebay.com/">eBay</a></li>
                <li><a href="http://craigslist.com/">CraigsList</a></li>
            </ul>
        </li>

    </ul>

</body>
</html> 
```

但是，它对我来说很奇怪，这意味着下拉菜单有效，但是如果我滑到它上面，我只能找到菜单项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:18:25.007

如果我理解这个问题，那就是当您悬停其中一个下拉菜单时，出现的框只是白色的，您必须将光标移到链接上，以便它们改变颜色并且可以看到。要解决此问题，您需要更改样式。要么改变

```
#cssdropdown li.headlink ul 
```

具有不同的背景（它继承了父元素的白色背景）和/或更改样式

```
#cssdropdown li.headlink ul li a 
```

尝试更改这些元素的背景属性，看看会发生什么。

编辑：或者更改`color`属性，`#cssdropdown li.headlink ul li a`因为这些元素中的文本是白色的，因此在白色背景下不可见。

# embedded - LPC 1768 CAN 总线关闭错误

> ID：11561543
> 
> 赞同：1
> 
> 时间：2012-07-19T13:07:25.993
> 
> 标签：embedded, arm, communication, microcontroller, can-bus

我正在使用 NXP 的[LPC1768](https://en.wikipedia.org/wiki/NXP_LPC#LPC1000_series) ARM Cortex M3 微控制器（[数据表](http://www.nxp.com/documents/data_sheet/LPC1769_68_67_66_65_64_63.pdf)，[用户手册](http://www.nxp.com/documents/user_manual/UM10360.pdf)）。我想在用户手册“16.5.8 CAN 控制器自测”部分中描述的自测模式下测试 CAN 总线外围设备，但它不起作用。

我尝试[了 NXP 知识库](http://knowledgebase.nxp.com/showthread.php?t=134)中描述的[这些 NXP 示例](http://ics.nxp.com/support/documents/microcontrollers/zip/code.bundle.lpc17xx.keil.zip)，并使用了 NXP 示例代码（can_self_test 代码）。所有引脚配置运行正常，所有 CAN 总线配置和 CAN 总线消息帧也运行正常（一一控制）。但是在这一步之后的 CAN1_Send 函数内部：

```
CANx->CMR = 0x41; 
```

错误标志被设置。尽管如此，CAN1_Send 返回 SUCCESS。

事实上，这个错误状态意味着“总线关闭错误”。“总线关闭错误”表示存在帧错误和 CAN 控制器错误。我测试数据帧和 CAN 控制器。有用。

我使用 RS-232 电缆连接 CAN1 和 CAN2。对于自测，我使用 CAN1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:15:25.880

我不熟悉那个 CAN 控制器，但这种行为并不让我感到惊讶。如果您正在执行独立测试，那么尽管您正确接收到您发送的消息，但由于总线上没有其他节点，消息将不会被确认。[在进入CAN 规范](http://www.semiconductors.bosch.de/media/pdf/canliteratur/can2spec.pdf)第 6 节和第 7 节中描述的错误状态之前，控制器将重试一段时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T12:39:38.200

我在这里使用 LPC1788 遇到了同样的问题，问题与错误的 CPU 时钟设置有关。我错误地将 CPU 设置为以 96 MHz 运行，并且我（也错误）认为 CPU 以 100 MHz 运行。在这种情况下，CAN 波特率配置不一致，CAN 模块无法传输任何消息。然后，当我修复 CPU 时钟配置时，问题就解决了。

# c# - NullReferenceException 在 c# 数组中未处理

> ID：11561544
> 
> 赞同：0
> 
> 时间：2012-07-19T13:07:32.453
> 
> 标签：c#, arrays, nullreferenceexception

我收到错误 - NullReferenceException 未处理，在以下代码中。我想从字符串 pt 中提取字符。但是，我在 for 循环之外得到了正确的值，但在其中却不一样。

```
ArrayList list = read();
int N = Values.N;
string pt = Values.PlainText;
MessageBox.Show(""+pt.Length+" "+pt[0]);
int count = 0;
char[][][] array = new char[6][][];
for(int i=0;i<6;i++)
{
    for(int j=0;j<N;j++)
    {
        for(int k=0;k<N;k++)
        {
            if (count < pt.Length)
            {
                array[i][j][k] = 'r';
                //array[i][j][k] = pt[count];
                //count++;
            }
            else
            {
                array[i][j][k] = 'x';
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:11:33.597

您必须初始化数组的第二和第三级，您不能只分配元素。所以：

```
ArrayList list = read();
int N = Values.N;
string pt = Values.PlainText;
MessageBox.Show(""+pt.Length+" "+pt[0]);
int count = 0;
char[][][] array = new char[6][][];
for(int i=0;i<6;i++)
{
    for(int j=0;j<N;j++)
    {
        array[i] = new char[N][]; // <---- Note
        for(int k=0;k<N;k++)
        {
            array[i][j] = new char[N]; // <---- Note
            if (count < pt.Length)
            {
                array[i][j][k] = 'r';
                //array[i][j][k] = pt[count];
                //count++;
            }
            else
            {
                array[i][j][k] = 'x';
            }
        }
    }
} 
```

# java - How should i design a server application in java

> ID：11561549
> 
> 赞同：0
> 
> 时间：2012-07-19T13:07:40.477
> 
> 标签：java, jakarta-ee

I'm developing a java application which reads a continuously written a file of recordsets (800.000.000 records per month), bulk reading data from files and calls a web service to read also data. These data should be stored in a database (a huge database). The next feature I'm going to add is a web service, which can be called from other applications to add or receive (predefined queries [maybe the running time of the method/query is about 1 or 2 minutes]) records. Additionally to web service I want other application written in c#, c++, etc. to be able to connect (I thought about protocol buffers or apache thrift). And at least it should offer a way to administrate the application (i though about a web site)

In my opinion it should be a server application. But should I develop a server on my own (opening sockets, etc.), a Java EE or are there any other "server frameworks" (may be a combination of jetty, sockets, etc.)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:17:14.747

只是分而治之：一种解决方案是使用tomcat：

功能1）创建一个读取文件的线程。然后你可以在 web.xml 中定义一个上下文监听器

功能 2) 查看 java.util.Timer，或者，为了更强大的功能，查看 Quartz 等第三方产品。

功能 3a) 有很多可用的 WS 框架。用google找教程

功能 3b) Google for Asynchronous Web Service 或 Servlet 中的异步支持

功能 4) AFAIK Thrift 有一个内置的 TServlet。我认为 Tomcat 和 Google Protokoll Buffers 也是可能的

功能5）提供网站是tomcats的主要功能之一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:23:25.787

如果它将成为用户可以部署的东西——客户将购买的产品，或者供人们下载的开源工具——那么我建议最好的方法是以与容器无关的方式开发它，越远越好。

我的意思是，专注于应用程序的功能，并将诸如启动和连接到服务之类的事情抽象出来。如果你做对了，你就可以编写容器特定的元素，以允许你的用户将应用程序部署在他们选择的应用服务器中，或者作为一个独立的应用程序。

另一方面，如果是内部项目，您可以完全控制应用程序的使用方式的所有方面，您可以避免上述部分或全部；尽管在任何情况下您可能会更好地使用这种抽象。

当然，Eric Leschinski 是对的，因为您不想开发 Tomcat 或 IIS 之类的东西。

# c# - Asp.net MVC3, C#, Figure out Single or Multiple Json paramter?

> ID：11561550
> 
> 赞同：1
> 
> 时间：2012-07-19T13:07:47.660
> 
> 标签：c#, asp.net, asp.net-mvc-3

I'm passing to single JSON type parameter and multiple JSON type parameters to Asp.Net.

and in Asp.Net, I need to figure out the parameter is single data or multiple data to update DB (EF, Repository pattern).

[Single]

![enter image description here](../Images/0a2a38af7c87a916d73600fb902f6750.png)

[Multiple]

![enter image description here](../Images/c54e9dae2d7fb1ea348714f78e414941.png)

Firstly, I tried like this,

```
[HttpPost]
public ActionResult ItemUpdate(WEBORDERLN ln ,IList<WEBORDERLN> lns)
{ 
```

**but it comes to ln always. it never go to lns :(**

```
[HttpPost]
public ActionResult ItemUpdate(WEBORDERLN ln)
{
// it works for only single update 
```

and

```
[HttpPost]
public ActionResult ItemUpdate(IList<WEBORDERLN> lns)
{
// it works for only multiple update 
```

How I figure out, the JSON type parameter is single or multiple?

anybody know, please advice me.

Thank you!

[EDIT]

![enter image description here](../Images/7cb561ec4503d4e61a7da32260c0f486.png)

```
[HttpPost]
public ActionResult ItemUpdate(WEBORDERLNS lns)
{
    try
    {
    EFWebOrderLnRepository webOrderLn = new EFWebOrderLnRepository();

    log.Debug("Count : "+lns.lns.Count.ToString()); // Object reference not set to an instance of an object.    
    log.Debug(lns.lns.Count());  //null, error : Value cannot be null
    log.Debug(lns.lns.Count().ToString());  //null, error : Value cannot be null

    foreach (WEBORDERLN ln in lns.lns)
    {
        webOrderLn.updateWebOrderLn(ln); // Error : Object reference not set to an instance of an object
    }
    .
    .
    .

public class WEBORDERLNS
{
    public IList<WEBORDERLN> lns { get; set; }
} 
```

[EDIT]

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Length  875
Content-Type    application/json; charset=UTF-8
Cookie  user=38C6C07684B04645821CA5273EAB5B34340CE8CCA13A7D67DC748819B02C6963E4AD2A322068FC3090D3FE03EC81E663A5DED6FF2534E2595B40CF57EFF9BB544FFAC95CD79020E8A94019A3DC53B769EFC4049B6B9627E98AD9DBC1431BB5D99A47625B3353FA697A1CC005855C0248E95F61F7BD4A5362D75E5D01B395FB14E078524B8D0C7219AF959F9AED188AB30A16187DE166D5BD008B0013A65D470C52C9408C47FD42672B8FBABDB3524F77
Host    localhost:49995
Referer http://localhost:49995/
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
X-Requested-With    XMLHttpRequest 
```

[EDIT]

![enter image description here](../Images/05035c5c2043dd8e033ec12667978b1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:13:55.960

实际上，您最好创建一个表示订单集的 Model 类，并将 WEBORDERLN 的集合作为属性公开。

```
public class OrderSet 
{
   public List<WEBORDERLN> OrderLines { get; set; }

} 
```

在您的控制器方法上，将传入参数更改为：-

```
[HttpPost]
public ActionResult ItemUpdate(OrderSet orders)
{
// it works for only multiple update 
```

那时，当接收到模型时，您只需调用`OrderLines`属性上的计数机制即可。

```
// How many orders?
var orderCount = orders.OrderLines.Count; 
```

# ajax - Loading template in a form grails

> ID：11561552
> 
> 赞同：0
> 
> 时间：2012-07-19T13:07:59.037
> 
> 标签：ajax, grails, visibility, textfield, readonly

I want to create a form that has fields (phone, email, password), see exact layout [here](http://farm9.staticflickr.com/8293/7607547016_ca8f5a8459.jpg). The form should display all as labels unless edit btn is clicked, then label will become textbox. Since grails button has no visibility/read only property I opted for remoteaction button. My prob is I can't seem to display all with in the form including the template I made (no unless I click edit btn, that is the time the label/text field shows) but not on first load.

templates: Email:

```
 <g:if test="${!isEditEmail}">
              <td id="email">${profileInstance?.email}</td></g:if>
        <g:else>
            <td><g:textField name="emailTxt" value="${profileInstance?.email}" />
  </td></g:else> 
```

Phone

```
 <g:if test="${!isEditPhone}">
              <td id="email">${profileInstance?.phone}</td></g:if>
        <g:else>
            <td><g:textField name="emailTxt" value="${profileInstance?.phone}" />
            </td></g:else> 
```

Snippet code from My GSP called "profile" for Phone:

```
 <th scope="row"><label for="profileEditPhone">Phone:</label></th>

     <td id="showPhoneText"></td>

    <td><g:actionSubmit id="btnEditPhone"  action="setPhoneTxtAreaVisible" update="showPhoneText" value="${message(code: 'default.button.edit.label', default: 'Edit')}" /></td>

  </tr> 
```

here is my code:

```
def setPhoneTxtAreaVisible=
    {
        def employeeId= params.employeeId

        MySession session = MySession.getMySession(request, params.employeeId)
        isEditPhone=true
        profileInstance = session.profileInstance

        render(template:"/layouts/phoneProfile", model:[profileInstance:session.profileInstance, isEditPhone:true])

    } 
```

this is working great but the output is the `<td id="showPhoneText"></td>` has no value or display in the GSP (profile) unless I click the button "btnEditPhone".

So I changed my code to:

```
def profile=
    {
        def employeeId= params.employeeId

    MySession session = MySession.getMySession(request, employeeId)

    //findAllByCmCaseIdCmCase
    def employee = Employee.get(employeeId as Long)
    def empUser = EmployeeUser.findByEmployeeIdEmployee(employee)
    profileInstance = new Profile();
    profileInstance.id=employeeId as Long
    profileInstance.userName  = empUser.useridUsers.username
    profileInstance.password = empUser.useridUsers.passwordText
    profileInstance.email = employee.emplEmailAddr
    profileInstance.employeeName = employee.formatFirstLastName()
    profileInstance.phone = employee.formattedEmplWorkTelNbr()
    session.profileInstance = profileInstance

    if(profileInstance)
    {

        render(template:"/layouts/phoneProfile", model:[profileInstance:session.profileInstance, isEditPhone:false])
    }

    return [profileInstance: profileInstance, mySession: session, isEditEmail:false]
} 
```

-not working great, only renders the phone template.

So I changed my html code to this instead of using update

```
<tr>
        <th scope="row"><label for="profileEditPhone">Phone:</label></th>
           <td ><g:render template="/layouts/phoneProfile" /></td>

        <td> <g:submitToRemote action="setPhoneTxtAreaVisible" value="${message(code: 'default.button.edit.label', default: 'Edit')}"  /></td>
        <td>&nbsp;</td>

      </tr> 
```

- not working as I want.

Question: How do I display the Profile page, with all the templates already there on FIRST LOAD without me having to click edit btn?

# jquery - jQuery check elements to make sure none are in focus

> ID：11561554
> 
> 赞同：3
> 
> 时间：2012-07-19T13:08:14.423
> 
> 标签：jquery, html, loops

I've got a division (<div>) which contains a form and I want to find out using jQuery if any of the <input>s have focus and if none of them have I want to call a function.

What is the best way of doing this?

Rough idea of div/form structure.

```
<div id="section1">
    <form ...>
       <input type="text" id="v1"> 
       <input type="text" id="v2">
       <input type="text" id="v3"> 
       <input type="text" id="v4">
       <input type="checkbox">
    </form>
</div> 
```

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:11:08.130

选择输入元素并过滤掉焦点元素：

```
$("#section1 input").filter(":focus") 
```

应该为空，则所有元素都没有焦点。实际上，您有几种不同的选择方式来获得相同的结果。

```
if ($("#section1 input:focus").length === 0){
      callYourFunction();
} 
```

因为 0 是一个[假值](http://www.sitepoint.com/javascript-truthy-falsy/)，所以上面的 if 条件实际上是一样的：

```
if ( !$("#section1 input:focus").length ) 
```

请注意，尽管并不总是建议以这种方式检查虚假值。如果您以“正常”（第一种）方式编写它，通常会更好，更明显且不易出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:18:29.497

您可以尝试如下：

```
$('input:focus') 
```

将找出所有聚焦的输入元素。

```
if( !$('#section1 form input:focus').length ) {
  // do something if not focused element exists
  callFunction();
} 
```

要找出不集中的输入：

```
$('#section1 form input:not(:focus)') 
```

# php - How to add data to an existing Excel file with PHP?

> ID：11561555
> 
> 赞同：2
> 
> 时间：2012-07-19T13:08:19.503
> 
> 标签：php, excel, vba

I have a Excel file with forms and controls. As it is not possible to create a Excel file with forms, controls and VBA code from scratch using PHP, I thought I could upload my empty Excel file to the server, update it and then let the user download it.

I know there are some very good PHP classes as PHPExcel, but I don't know if these classes may append data as said. Does anybody has already done this before?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:15:35.570

换个方向思考！

不是从 php 将数据推送到 excel，而是向 excel 添加一个数据连接，该连接将从 php 端点 taht 发布 xml 检索其数据。

不知道它是否适用，但它更容易实现。

此外，您将完全控制 excel 文件，保留所有自定义项，包括 VBA。

最后，如果您最终朝这个方向发展，您将避免所有凌乱的 COM 对象管理。

[编辑]此解决方案的步骤：

1.  构建一个发布 XML 数据的 php 端点（我实际上没有 php 知识。只需确保调用`yourdata.php`将生成 XML 中的数据）。
2.  在 excel 中，使用数据连接插入此 XML 文件的内容：转到数据选项卡（假设 Excel 2010）、“从其他来源”、“从 Xml 数据导入”。
3.  让向导完成工作

之后，您将在 Excel 中有一个列表，该列表链接到您的 xml 源。只需右键单击列表/刷新即可获取最新数据（或将数据连接配置为在打开时自动刷新）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T06:12:45.473

@SteveB 进一步了解我的评论和您之前的回复..请阅读以下内容。

> @SteveB 看起来是个好主意.. 但是为什么要使用 xml？我尝试使用 xml，但我不知道在文本文件中写入 xml 的格式是什么？你可以解释吗。我们也可以只使用 .csv 吗？因为编写一个简单的 .csv 文件看起来很容易。整个解决方案将如何工作.. 假设我是用户.. 单击并打开一个 php 页面.. excel 模板应该存储在哪里.. 以及它将如何弹出给用户.. 当另一个用户连接到时会发生什么同一页等。我想在模板文件中保留数据透视表、excel 宏和 vba、图像和图表。– ihightower
> 
> @ihightower：xml 比 CSV 更容易生成（至少使用 .Net 和 C#，这是我的主要编程语言），但我认为这也适用于 CSV。提供 Excel 模板很容易......只需将其作为静态内容提供，因为 Excel 文件不是动态生成的。– 史蒂夫 B

* * *

我的发现..

## XML 与 CSV

仅当不需要 Excel 表格格式时，用于导入的 CSV 格式才适用。总而言之，您不能突出显示备用行、滚动期间可用的列标题等，因为我发现您不能同时拥有外部数据和表格格式。

将数据连接表转换为“格式为表”时出现的错误是：

```
 Your selection overlaps one or more external data ranges.
 Do you want to convert the selection to a table and remove
 all external connection? 
```

当然，我不希望那样..但是使用xml格式进行导入数据连接...表格格式可以保持这样的截图：

![从文件导入到 Excel 的 xml 数据](../Images/a167093bd154515c9bb11bcf767bb6eb.png)

并且，当您滚动一屏时..屏幕将如下所示..您可以看到列标题 A、B、C 自动转换为数据标题（ISBN、日期、标题...）

![滚动连接的 xml 数据超过一屏](../Images/8510ceaab47eb1c92c3828440023b672.png)

所以，我们应该寻求一个 xml 解决方案。我们正在研究如何使用 php。但是，使用 CSV 进行测试，大约 10 列 x 20,000 行数据......它工作得非常好。Web 服务器的刷新也很有效。

## 把所有部分放在一起

我与我的团队进行了内部讨论，我们认为这对我们真的有用。现在，我们正在就用户操作的交付和流程进行头脑风暴，以交付带有他从 php 生成的数据的 Excel 模板报告。

## 好的..我们有什么开始？

*   Excel 模板（例如 staff_analysis_template.xlsm）。这将包含所有数据透视表、excel 宏、按钮、图像、图表，以及 excel 文件可以包含的所有内容。
*   在模板文件中将有一张名为“数据”的工作表。这是 xml 或 csv 导入最终将成为......文件中所有数据透视表和图表的随时可用的地方。
*   一个 php 网页，其中包含列表框和文本字段供用户过滤数据.. 他将单击搜索...这将提供网页结果和链接以在 excel 模板中查看相同数据在工作表中包含所有结果数据的文件：数据。

这是带有示例数据的 Excel 模板。在此屏幕截图中...您可以看到

1.  **Sheet：**将从php生成的xml数据将被连接并最终进入的数据。
2.  **工作表：摘要**。可以使用 Excel 中的所有公式......并根据数据呈现给用户。
3.  **Sheet: Pivot**可以有基于数据的数据透视表和图表，并且可以在文件打开时自动刷新。
4.  **VBA**也可用.. 例如，该按钮可用于刷新数据或执行任何其他工作。

我们基本上可以使用 Excel 为我们提供的所有东西。生成的 xml 文件可以留在网络服务器上。数据连接也可以是 URL 或文件。

sourceFile="http://xxxxx/test_data3.csv" 或

sourceFile="C:\Users\Fiaz\Documents\Magic Briefcase\Learn\excel\test_data3.csv"

![在此处输入图像描述](../Images/2e8873b2fcb7dfa2202675f4c6f39798.png)

## 需要弄清楚

尚未弄清楚的部分是如何将这一切与无缝的用户体验连接在一起。也就是说，用户不应该首先被迫保存文件或手动连接xml等。excel模板必须打开那里有所需的数据和所有可用的分析。如果用户需要保存它，他将使用另存为并复制到本地机器。

我们对这种无缝用户体验的想法是这样的：

1.  生成唯一的 xml 数据文件（例如 YYYYMMDDHHMMSS_username_pagename.xml）并将其放在某个 tmp 服务器文件夹中。
2.  将模板文件复制到带有 xml 文件更新连接的 tmp 服务器文件夹（为此，我们需要解压缩 .xlsx 或 .xlsm 文件），使用文件名和文件夹更新 (xl/connections.xml) 中的连接信息: YYYYMMDDHHMMSS_username_pagename.xml 然后将其压缩并通过网络以 .xlsm 或 .xlsx 格式交付给用户

我一步一步手动尝试，它确实有效。

非常感谢您对此的任何想法，以使其真正变得更好并保持简单。

**PHPExcel作者@MarkBaker需要反馈：**

> @MarkBaker：通过阅读您在 PHPExcel 其他帖子中的评论，我了解到我们不能使用 PHPExcel 做同样的事情（即使用原始的 excel 模板）。因此，SteveB 建议并由我在上面详细阐述的解决方案似乎对此目的更强大。我们可以保持原始 excel 模板文件与所有资产（数据透视表、vba 等）保持原样。服务器也不需要有 Excel。
> 
> **那么，我们是否可以期望 PHPExcel 本身在将来的某个时候可以使用此功能。然后，我们可以更有信心使用 PHPExcel 大师本人的标准技术。**
> 
> 在我看来，PHPExcel 对于发票类型的报告和许多其他类型的报告非常有用，但不适用于商业智能类型的分析......这需要使用数据透视表和复杂的图表和代码等。
> 
> 请发表您的意见。我很想从您的观点中看到它如何变得更好。

*让一切尽可能简单，但不要更简单。艾尔伯特爱因斯坦*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T13:12:47.260

使用 PHPExcel 添加非常容易 - 加载文件，在最后一行之后添加数据，保存文件......不幸的是，不支持表单和 VBA 代码。

要保留这些，您需要使用 COM，它会将您限制为安装了 MS Excel 的 Windows 服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T13:14:24.960

[OpenTBS](http://www.tinybutstrong.com/opentbs.php)是一个 PHP 类 PHP，它使您能够使用模板技术构建 XLSX（或 XLSM，即带有 VBA 宏的 XLSX）文档。

填充工作表非常容易。您还可以编辑表单和 VBA，因为您知道它们的 XML 结构。

顺便说一句，OpenTBS 还支持 DOCX、PPTX、ODT、ODS、ODP、...

*   [演示](http://www.tinybutstrong.com/opentbs.php?demo)
*   [文档](http://www.tinybutstrong.com/opentbs.php?doc)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T13:10:21.413

我认为您实际上无法将`append`数据写入现有的 excel 文件。

*   而是将所有数据从 Excel 加载到您的数组中（使用 PHPExcel 很容易）；
*   将数据添加到您的数组中（根据需要对其进行格式化）；
*   创建一个新的 excel 文件并让用户下载它（或保存在原始文件上）；

这将模拟附加操作。

# php - PHP array merging issue

> ID：11561558
> 
> 赞同：4
> 
> 时间：2012-07-19T13:08:40.173
> 
> 标签：php, arrays, multidimensional-array, array-merge

I'm sure there have been many questions like these in the past, so sorry if it's came up before. Basically, i'm trying to merge two multidimensional arrays whilst not creating 2 keys for any duplicate keys.

Here's an example:

```
$one = array(
    'foo' => array(
        'bar' => array(
            'hello' => 'world',
            'boom'  => 'universe'
        ),
        'whiz' => array(
            'wham' => array(
                'blam' => 'kaplow'
            )
        )
    )
);

$two = array(
    'foo' => array(
        'whiz' => 'woo',
        'king' => array(
            'kong' => 'animal'
        )
    )
); 
```

If I was to use `array_merge_recursive($one, $two);` i'd get the following results:

```
array(1) {
  ["foo"]=>
  array(3) {
    ["bar"]=>
    array(2) {
      ["hello"]=>
      string(5) "world"
      ["boom"]=>
      string(8) "universe"
    }
    ["whiz"]=>
    array(2) {
      ["wham"]=>
      array(1) {
        ["blam"]=>
        string(6) "kaplow"
      }
      // This is the problem.
      [0]=>
      string(3) "woo"
    }
    ["king"]=>
    array(1) {
      ["kong"]=>
      string(6) "animal"
    }
  }
} 
```

If I were to use `array_merge($one, $two);` i'd get the following results:

```
array(1) {
  ["foo"]=>
  array(2) {
    // This is good but the rest of the array is gone.
    ["whiz"]=>
    string(3) "woo"
    ["king"]=>
    array(1) {
      ["kong"]=>
      string(6) "animal"
    }
  }
} 
```

Here's the output i'm after:

```
array(1) {
  ["foo"]=>
  array(3) {
    ["bar"]=>
    array(2) {
      ["hello"]=>
      string(5) "world"
      ["boom"]=>
      string(8) "universe"
    }
    // Key is replaced, rest of the array remains intact.
    ["whiz"]=>
    string(3) "woo"
    ["king"]=>
    array(1) {
      ["kong"]=>
      string(6) "animal"
    }
  }
} 
```

So basically, i'm after the functionality of `array_merge_recursive()` but for it to also work like `array_replace_recursive()`, do you guys have any ideas?

--

I've accepted an answer for now, but don't be discouraged about showing any other *possibly* better methods, I will be checking back.

Thanks guys.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:17:19.807

我*认为*您正在寻找：

```
function farray_merge_recursive() {

    if (func_num_args() < 2) {
        trigger_error(__FUNCTION__ .' needs two or more array arguments', E_USER_WARNING);
        return;
    }
    $arrays = func_get_args();
    $merged = array();

    while ($arrays) {
        $array = array_shift($arrays);
        if (!is_array($array)) {
            trigger_error(__FUNCTION__ .' encountered a non array argument', E_USER_WARNING);
            return;
        }
        if (!$array)
            continue;
        foreach ($array as $key => $value)
            if (is_string($key))
                if (is_array($value) && array_key_exists($key, $merged) && is_array($merged[$key]))
                    $merged[$key] = call_user_func(__FUNCTION__, $merged[$key], $value);
                else
                    $merged[$key] = $value;
            else
                $merged[] = $value;
    }
    return $merged;
} 
```

我想我是从 PHP 手册中偷来的，因为我不想自己写。

我用它来组合和覆盖我的 MVC 框架的配置数组，它运行良好。

# java - 通过 JAX-RS 参数传递键值列表

> ID：11561561
> 
> 赞同：1
> 
> 时间：2012-07-19T13:08:54.860
> 
> 标签：java, jax-rs

我已经定义了 GET 方法，如下所述：

```
@GET
@Produces("text/plain")
@Path("method/{id}/{value}")
public void method(@PathParam("ids") final String id, @PathParam("value") final String value) {} 
```

它允许我通过一个`id`和`value`。我怎样才能将一堆对传递`id/value`给这个方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:18:44.363

一种方法是创建自己的协议，如下所示：

> 方法/1,2,3,4,5,6,7/一,二,三,四,五,六,七

然后，在您的代码中解析“协议”：

```
public void method(@PathParam("ids") final String idStr, @PathParam("value") final String valueStr) {
    String[] ids = idStr.split(",");
    String[] values = valueStr.split(",");
} 
```

但它很丑

第二个是使用POST body，在这种情况下你不能使用GET，你应该创建一个ValuesMapObject，它保存每个id到它的值之间的映射并从客户端发送它，在这种情况下，函数将是看起来像这样：

```
@POST
@Produces("text/plain")
@Consumes(MediaType.APPLICATION_XML)
@Path("method/ids_and_values")
public void method(ValuesMapObject values) {} 
```

# c# - 如何连接到特定的 Outlook/Exchange 帐户？

> ID：11561565
> 
> 赞同：5
> 
> 时间：2012-07-19T13:09:03.013
> 
> 标签：c#, outlook, exchange-server, mapi

我正在制作一个应用程序来访问托管在 Exchange 2003 服务器上的特定电子邮件帐户，并对找到的未读电子邮件执行一些操作。我不太了解 MAPI 的工作原理，所以如果我错过了一些非常明显的东西，我不会太惊讶！我（*不幸*的是）正在使用 C#，我已经阅读了这可能导致的问题（*并且害怕产生影响，但我的老板希望这样做......*）。

我正在努力寻找有关如何连接到特定帐户的任何好信息！该应用程序将在某人的笔记本电脑上运行（*假设是我的*），因此将有一个默认帐户，Outlook 在打开时会连接到该帐户。所以：

*   是否可以从用户已经拥有自己的帐户并且可能已打开 Outlook 的计算机连接到另一个帐户？

*   如果可能的话。我该怎么做呢？启动 Outlook 互操作对象时，应用程序会自动获取用户帐户并将当前用户设置为该帐户。我曾希望该`Logon()`方法可以对此进行排序，但没有。即使只是运行 `Outlook.Application olApp = new Outlook.Application();` Goes 并将当前用户设置为标准帐户。

我希望我说得通（*可能不是*），但请随时在评论中提出更详细的问题，我会尽快回复。就像我说的，我对 MAPI 和 Exchange 知之甚少，所以我在努力解决如何表达我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:58:31.807

如果要连接到**Exchange 2003**中的特定电子邮件帐户，则需要使用[WebDAV](http://weblogs.sqlteam.com/mladenp/articles/9560.aspx)、[CDOEX](http://msdn.microsoft.com/en-us/library/aa142616%28v=exchg.65%29.aspx)或[ExOLEDB](http://msdn.microsoft.com/en-us/library/ms876455%28v=exchg.65%29.aspx)。如果您使用的是 Exchange 2007+，则可以使用[EWS](http://msdn.microsoft.com/en-us/library/dd877045%28v=exchg.140%29.aspx)。

**Outlook Interop**仅允许您以交互式桌面帐户（*当前登录用户*）的身份进行连接。连接到其他帐户的唯一方法是当前交互帐户[添加了共享邮箱](http://office.microsoft.com/en-us/outlook-help/add-another-person-s-mailbox-to-your-account-HP005242139.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:20:22.387

您也可以为此使用[Redemption](http://www.dimastr.com/redemption/home.htm) - 以可以访问相关邮箱的域用户身份运行您的代码，调用[RDOSession](http://www.dimastr.com/redemption/rdosession.htm)。[对于该用户，然后使用RDOSession](http://www.dimastr.com/redemption/rdosession.htm)`LogonExchangeMailbox`打开其他用户的邮箱。/ 。`GetSharedMailbox``GetSharedDefaultFolder`

由于 Exchange 2013 不再允许旧式 RPC 连接（仅 RPC-over-HTTP 或 MAPI-over-HTTP），因此您可以使用`RDOSession.LogonHostedExchangeMailbox`（适用于 Exchange 2013 和 Exchange 2010）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-30T07:29:48.440

如果您在一台机器上定义了 2 个帐户，则可以使用以下内容：[示例](https://social.msdn.microsoft.com/forums/office/en-US/2bd6ee48-e38f-4040-b6e6-8600b680404b/c-accessing-my-2nd-mailbox?prof=required)

```
Outlook.Application app = new Outlook.Application();
Outlook.NameSpace ns = app.GetNamespace("MAPI");

// optional
//object missing = Type.Missing;
//ns.Logon(missing, missing, true, false);

// additional email address 
string recipientName = "myEmail@myDomain";

Outlook.Recipient recip = ns.CreateRecipient(recipientName);
recip.Resolve();

if (recip.Resolved)
{
Outlook.MAPIFolder inboxFolder = ns.GetSharedDefaultFolder(recip, Outlook.OlDefaultFolders.olFolderInbox);
} 
```

# github - 使用 Vlad 通过 SSH 部署

> ID：11561566
> 
> 赞同：1
> 
> 时间：2012-07-19T13:09:07.637
> 
> 标签：github, ssh, deployment, vlad-deployer

我有一个私人 Github 存储库，并且正在尝试设置 Vlad 以将其部署到我的服务器。我得到了- 因为`Host key verification failed`我`rake vlad:update`没有定义任何 shh 键或输入任何密码。我不确定从哪里开始。最简单、最安全的方法是什么？

我目前`deploy.rb`是：

```
set :application, "<project>"
set :domain, "ubuntu@<ip>"
set :deploy_to, "/srv/http/<project>.com"
set :repository, 'git@github.com:<user>/<project>.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:49:23.070

看来你有两台机器，开发和服务器。我认为您需要服务器和 github 之间的密钥对，以便服务器可以访问 github repo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:42:43.983

好的，这是我为解决这个问题所做的：

*   创建公钥/私钥对
*   使用 puppet 将私钥添加到服务器
*   使用 puppet 将已知主机文件添加到服务器
*   在 github 存储库设置中添加公钥作为部署挂钩

# mysql - MySQL 架构和多种用户类型

> ID：11561568
> 
> 赞同：0
> 
> 时间：2012-07-19T13:09:13.263
> 
> 标签：mysql, database, database-design

我正在为具有多个用户类型（用户、管理员、超级用户）的系统设计数据库。我已经阅读了处理不同用户帐户类型的多种方法，而使我成为我的方法是拥有一个带有公共字段的“用户”表，然后携带一个“用户类型”值以指向正确的相应的表格以获取更多信息。

盯着我看的一件事是，如果我想要关于该用户的更具体的数据，我将不得不运行基于 userType 的第二个查询。最初似乎无法获得更具体的用户信息。

我必须根据 userType 做一些案例逻辑（类型 = 1 -> 转到用户表，类型 = 2-> 转到管理表），然后再次点击数据库。我在这里忽略了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:00:04.387

如果您必须使用多个表，那么您可以在一个查询中查看它们，或者在您的选择中使用 UNION 或将每个表连接到初始表并使用 if 语句选择要显示的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:25:46.120

我个人认为这个问题最合乎逻辑的解决方案是这样做：

```
SELECT *
FROM user
LEFT JOIN admin ON admin.user_id = user.user_id AND user.type = 'admin'
LEFT JOIN superuser ON superuser.user_id = user.user_id AND user.type = 'superuser' 
```

您将获得`NULL`不是管理员/超级用户的用户和那些是的行。如果您在所有情况下都不需要额外的字段，那么您应该简单地从查询中省略它们（尽管如果您不选择字段，像 Postgres 这样的一些数据库会自动执行此操作）。

# android - 横向扩展

> ID：11561573
> 
> 赞同：2
> 
> 时间：2012-07-19T13:09:38.550
> 
> 标签：android, jquery-mobile

我是 web 开发和 android 开发的新手。我正在开发一个带有电话间隙和 jquery mobile 的网络应用程序。我面临的问题是，当我将手机的方向从纵向更改为横向时，它会扩展。当我将手机旋转回肖像时，它会正确返回，但这次我看不到页脚的标题。

请看代码

```
<body onload="onBodyLoad()">
<div data-role="page" data-iscroll="enable">
<div data-role="header" data-position="fixed" data-iscroll="scroller">
    <h1>Break IT !</h1>
</div><!-- /header --> 
<div data-role="content">
    <iframe id="cnt" width="100%" height="100%" frameborder="30" allowfullscreen></iframe>
</div>
<div data-role="footer" data-position="fixed" data-iscroll="scroller">
    <h4>Page Footer</h4>
</div><!-- /footer -->
</div><!-- /page --> 
```

元数据看起来像这样。

```
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8"> 
```

这些是相关的并且已尝试但无济于事

[使用 Jquery Mobile 的页面上的屏幕方向问题](https://stackoverflow.com/questions/8396333/jquery-mobile-orientation-issues)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:11:17.803

没有测试你的版本，但我总是使用：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

您的视口，没有最大比例。使用上面的视口值 jquery mobile 在 android、iphone 上对我来说很好。

# c++ - Winsock 发送调用很慢

> ID：11561577
> 
> 赞同：1
> 
> 时间：2012-07-19T13:09:57.507
> 
> 标签：c++, winsock, send

我正在制作一个可能需要处理 3000 多个连接的游戏服务器 (TCP)。目前它有 50 个连接，我已经遇到了滞后。

我发现它的 winsock send() 调用每个需要大约 100~300 毫秒才能返回，这几乎会减慢整个服务器的速度，因为它是一个单线程服务器。

到目前为止，我已经想到了两种解决方案。

1.  重新设计我的服务器，为每个客户端创建一个线程（为 3000 个客户端创建 3000+ 个线程真的稳定吗？）。
2.  找到一种方法让 send() 调用立即返回。

这是我的套接字初始化代码：

```
int ret = WSAStartup(MAKEWORD(2,2), &wsaData);
if(ret != 0) 
{ 
    printf("Winsock failed to start.\n");
    system("pause");
    return; 
}

server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons(52000);

sock = socket(AF_INET, SOCK_STREAM, 0);
if(sock == INVALID_SOCKET) 
{ 
    printf("Invalid Socket.\n");
    system("pause");
    return; 
}

if(bind(sock, (sockaddr*)&server, sizeof(server)) != 0)
{ 
    printf("error");
    return; 
}

if(listen(sock, 5) != 0)
{
    printf("error");
    return;
} 
```

在单独的线程中接受代码

```
sockaddr_in from;
int fromlen = sizeof(from);
SOCKET sTmpSocket = accept(ServerSock, (struct sockaddr*)&from, &fromlen); 
```

我的发送功能

```
void CClient::SendPacket(BYTE* pPacket, DWORD Len)
{
    DWORD ToSendLen = Len;
    while (ToSendLen)
    {
        int iResult = send(this->ClientSocket, (char*)(pPacket + Len - ToSendLen), ToSendLen, 0);

        if (iResult == SOCKET_ERROR)
            return;

        ToSendLen -= iResult;
    }
} 
```

这是我的服务器线程（不完整，仅相关部分）

```
while (1)
{
    for (int i = 0; i < MAX_CLIENT; i++)
    {
        if (Clients[i].bConnected == false)
            continue;

        timeval timeout;
        timeout.tv_sec = 0;
        timeout.tv_usec = 1;
        fd_set socketset;
        socketset.fd_count = 1;
        socketset.fd_array[0] = Clients[i].ClientSocket;
        if (select(0, &socketset, 0, 0, &timeout))
        {
            int RecvLen = recv(Clients[i].ClientSocket, (char*)pBuffer, 10000, MSG_PEEK);
            if (RecvLen == SOCKET_ERROR)
            {
                Clients[i].bConnected = false;
                iNumClients--;
            }
            else if (RecvLen == 0)
            {
                Clients[i].bConnected = false;
                iNumClients--;
            }
            else if (RecvLen > 0)
            {
                // Packet handling here
                recv(Clients[i].ClientSocket, (char*)pBuffer, dwDataLen, MSG_WAITALL);

                //...
            }
        }
    }

    Sleep(1);
} 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:19:30.683

我会选择[IOCP](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198.aspx)（[IO 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198.aspx)），它可以带来所需的性能并且可以很好地扩展。看看[Boost.Asio](http://www.boost.org/libs/asio)，它在后台使用[IOCP](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198.aspx)（在 Windows 上）。

拥有 3000 个或更多线程的想法非常糟糕，而且确实无法扩展（就内存消耗和上下文切换而言）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:28:57.940

Another approach to consider is to have multiple worker threads handling a proportion of the active connections and make this configurable. For example you could create n threads per core and then experiment with n.

This should give you a lot of the benefits of multi-threading without going to the extreme of one thread per client.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:20:35.093

立即想到一件事，那就是使用非阻塞套接字并检查套接字是否可以用`select`.

作为旁注，您正在使用`select`错误的返回值。它`0`在超时时返回一个正数，如果任何集合中都有准备好的套接字，并且`-1`如果有错误。您不检查错误。此外，虽然在 winsock 版本中不需要，第一个参数`select`实际上应该是最高的套接字号加一。

另一点，您一次只`select`用于一个客户端，将*所有*客户端添加到集合中，然后执行以下操作`select`：

```
fd_set readset;
FD_ZERO(&readset);
SOCKET max_socket = 0;

for (int i = 0; i < MAX_CLIENT; i++)
{
    if (Clients[i].bConnected)
    {
        FD_SET(Clients[i].ClientSocket, &readset);
        max_socket = std::max(max_socket, Clients[i].ClientSocket);
    }
}

int res = select(max_socket + 1, &readset, 0, 0, &timeout);
if (res == SOCKET_ERROR)
    std::cout << "Error #" << WSAGetLastError() << '\n';
else if (res > 0)
{
    for (int i = 0; i < MAX_CLIENT; i++)
    {
        if (Clients[i].bConnected && FD_ISSET(Clients[i].ClientSocket, &readset))
        {
            // Read from client
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T16:52:04.047

如果您只发送小数据包，请先使用 setsockopt() 设置 TCP_NODELAY 选项。

# android - ActionBarSherlock 自定义 MenuItem 分隔符

> ID：11561578
> 
> 赞同：1
> 
> 时间：2012-07-19T13:09:58.290
> 
> 标签：android, menuitem, actionbarsherlock, divider

首先，我想说我已经修改了方法**needsDividerBefore**，现在菜单项之间出现了分隔符。但是，我想自定义这个分隔线，我尝试了前面提到的所有方法，但我无法成功。

其次，我想要的分隔符和使用的foursquare、twitter和instagram一样。这是一个公共分隔线还是所有这些应用程序都使用自定义布局？我不知道，但即使他们使用自定义布局，我也想从 menu.xml 添加操作按钮，如何自定义分隔线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:31:05.123

1.  修改该方法只会影响 ICS 之前的手机，因此您仍然会在 ICS+ 上获得自然分隔行为。这意味着您的应用会根据运行的 Android 版本而有所不同。

2.  `actionBarDivider`您可以使用主题属性更改分隔线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:18:45.867

我在 MenuItem 中找不到背景属性。这是 MenuItem 的 xml

```
<item
    android:id="@+id/menu"
    android:icon="@drawable/menu"
    android:title="menu"
    android:showAsAction="ifRoom|withText">
</item> 
```

然后我添加了

`android:actionLayout="@layout/divider"`

下面是divider.xml；

```
<?xml version="1.0" encoding="UTF-8"?><LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<View
    android:layout_width="1dp"
    android:layout_height="fill_parent"
    android:background="@color/black"
    android:layout_marginRight="50dp" /></LinearLayout> 
```

当我使用它时，图标是不可见的。添加自定义分隔线的最佳方法是什么？

# core-plot - 如何镜像 x 和 y 轴？

> ID：11561579
> 
> 赞同：0
> 
> 时间：2012-07-19T13:09:58.267
> 
> 标签：core-plot

我想绘制一个图，其中第二个 x 和 y 轴只是主轴的镜像。例如，像这个带有内部刻度线的典型科学风格情节， ![和镜像的 x 和 y 轴](../Images/9d79c61f970fe02fb4aa8ebf1322a1f5.png).

用 coreplot 这么容易完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:00:01.343

创建两个新轴，一个用于 x，一个用于 y。配置它们以匹配其他轴，除了将 更改`tickDirection`为指向另一个方向并将它们定位在图形的另一侧（使用`orthogonalCoordinateDecimal`或约束）。将两个新轴分配到其他轴使用的相同绘图空间。将所有四个轴添加到数组并将其传递给轴集：

```
graph.axisSet.axes = [NSArray arrayWithObjects:x, y, x2, y2, nil]; 
```

[在Plot Gallery 演示应用程序](http://code.google.com/p/core-plot/source/browse/examples/CorePlotGallery/src/plots/AxisDemo.m#80)中有一个向图表添加附加轴的示例。

# android - 启动时间启动服务保存记录到数据库

> ID：11561580
> 
> 赞同：0
> 
> 时间：2012-07-19T13:10:00.257
> 
> 标签：android, android-asynctask, android-service

我想从启动时启动的服务的 onStartCommand() 中保存记录，但 AsyncTask() 不能调用那个时间进行数据库编码。如果我没有在启动时启动服务，而只是从应用程序启动服务，它工作正常。

# c# - javascript 是否具有等效于 C#s HttpUtility.HtmlEncode 的功能？

> ID：11561595
> 
> 赞同：2
> 
> 时间：2012-07-19T13:10:52.847
> 
> 标签：c#, javascript, html-encode

> **可能重复：**
> [JavaScript/jQuery HTML 编码](https://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding)

我将信息作为 Json 传递给客户端，并从我的 javascript 代码生成一些 HTML。我有一个名为 name 的字段，我将其传递到图像的标题中，如下所示：

```
 html.push("<img  title='" + person.Name + "' src . . . 
```

问题是如果 person.Name 是“Joe O'Mally”，因为当我将鼠标悬停在图像上时它只显示为“Joe O”（因为名称中的 '）

我不想在服务器端剥离 ' 因为还有其他地方我想在页面上显示确切的字符串。

当我悬停图像时，javascript中是否有等效的 HttpUtility.HtmlEncode 会在图像标题中显示全名？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T13:13:13.823

不，但你可以很容易地写一个。

```
function htmlEnc(s) {
  return s.replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/'/g, '&#39;')
    .replace(/"/g, '&#34;');
} 
```

我已经尝试过加快速度的方法（基本上是通过一个“替换”调用来做事），但这对于大多数用途来说都足够好，尤其是在现代浏览器中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T13:14:57.450

[这](http://forums.asp.net/t/1151879.aspx)是一篇很好的文章，解释了 javascript escape() 和 unescape() 函数的使用，这些可能会帮助您解决您正在尝试做的事情。

# c++ - C++ 中的媒体播放器

> ID：11561596
> 
> 赞同：0
> 
> 时间：2012-07-19T13:10:59.580
> 
> 标签：c++, c, media-player, ogg-theora

尝试编译[libtheoraplayer](http://sourceforge.net/apps/mediawiki/libtheoraplayer/index.php?title=Main_Page)演示（av_player 演示）时遇到以下问题。

如果有人可以帮助我解决 libtheoraplayer ( ![编译 av_player 演示时出错](../Images/466a825438cd702edee21d0311358f2e.png)) 中的一些错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:19:17.873

如果您熟悉 linux，请查看 vlc 源代码，它是免费的，但它是 C 代码。

它可能对你有帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:54:07.947

LINK2019 表示：这个项目调用了一些函数（比如 CreateContext），但是 msvc 只是找到了这个函数声明，没有实现。当项目没有链接此函数的库时会发生这种情况。因此您需要找到这些函数的库。和 "#parama commect(lib, libname.lib" 。

# c# - 以递归方式将 JSON 反序列化为 IDictionary

> ID：11561597
> 
> 赞同：17
> 
> 时间：2012-07-19T13:11:00.117
> 
> 标签：c#, json, json.net

我正在尝试将一些较旧的工作转换为使用 Newtonsoft JSON.NET。使用该`System.Web.Script.Serialization.JavaScriptSerializer.Deserialize`方法的默认处理（例如，如果没有指定目标类型）是`Dictionary<string,object>`为内部对象返回 a。

这实际上是 JSON 的一个非常有用的基本类型，因为它也恰好是使用的底层类型，`ExpandoObjects`并且是动态类型最明智的内部实现。

如果我指定这种类型，例如：

```
 var dict = JsonConvert.DeserializeObject<Dictionary<string,object>>(json); 
```

JSON.NET 将正确反序列化最外层的对象结构，但它会返回`JObject`任何内部结构的类型。我真正需要的是将相同的外部结构用于任何内部对象类型结构。

有没有办法指定用于内部对象的类型，而不仅仅是返回的最外层类型？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-07-06T16:04:42.730

为了让 Json.Net 将 json 字符串反序列化为`IDictionary<string, object>`包括反序列化嵌套对象和数组，您需要创建一个自定义类，该类派生自`JsonConverter`Json.Net 提供的抽象类。

它是在您的派生`JsonConverter`中放置对象应如何写入和从 json 写入的实现。

您可以`JsonConverter`像这样使用您的自定义：

```
var o = JsonConvert.DeserializeObject<IDictionary<string, object>>(json, new DictionaryConverter()); 
```

这是我过去成功使用的自定义 JsonConverter 来实现与您在问题中概述的相同目标：

```
public class DictionaryConverter : JsonConverter {
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer) { this.WriteValue(writer, value); }

    private void WriteValue(JsonWriter writer, object value) {
        var t = JToken.FromObject(value);
        switch (t.Type) {
            case JTokenType.Object:
                this.WriteObject(writer, value);
                break;
            case JTokenType.Array:
                this.WriteArray(writer, value);
                break;
            default:
                writer.WriteValue(value);
                break;
        }
    }

    private void WriteObject(JsonWriter writer, object value) {
        writer.WriteStartObject();
        var obj = value as IDictionary<string, object>;
        foreach (var kvp in obj) {
            writer.WritePropertyName(kvp.Key);
            this.WriteValue(writer, kvp.Value);
        }
        writer.WriteEndObject();
    }

    private void WriteArray(JsonWriter writer, object value) {
        writer.WriteStartArray();
        var array = value as IEnumerable<object>;
        foreach (var o in array) {
            this.WriteValue(writer, o);
        }
        writer.WriteEndArray();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) {
        return ReadValue(reader);
    }

    private object ReadValue(JsonReader reader) {
        while (reader.TokenType == JsonToken.Comment) {
            if (!reader.Read()) throw new JsonSerializationException("Unexpected Token when converting IDictionary<string, object>");
        }

        switch (reader.TokenType) {
            case JsonToken.StartObject:
                return ReadObject(reader);
            case JsonToken.StartArray:
                return this.ReadArray(reader);
            case JsonToken.Integer:
            case JsonToken.Float:
            case JsonToken.String:
            case JsonToken.Boolean:
            case JsonToken.Undefined:
            case JsonToken.Null:
            case JsonToken.Date:
            case JsonToken.Bytes:
                return reader.Value;
            default:
                throw new JsonSerializationException
                    (string.Format("Unexpected token when converting IDictionary<string, object>: {0}", reader.TokenType));
        }
    }

    private object ReadArray(JsonReader reader) {
        IList<object> list = new List<object>();

        while (reader.Read()) {
            switch (reader.TokenType) {
                case JsonToken.Comment:
                    break;
                default:
                    var v = ReadValue(reader);

                    list.Add(v);
                    break;
                case JsonToken.EndArray:
                    return list;
            }
        }

        throw new JsonSerializationException("Unexpected end when reading IDictionary<string, object>");
    }

    private object ReadObject(JsonReader reader) {
        var obj = new Dictionary<string, object>();

        while (reader.Read()) {
            switch (reader.TokenType) {
                case JsonToken.PropertyName:
                    var propertyName = reader.Value.ToString();

                    if (!reader.Read()) {
                        throw new JsonSerializationException("Unexpected end when reading IDictionary<string, object>");
                    }

                    var v = ReadValue(reader);

                    obj[propertyName] = v;
                    break;
                case JsonToken.Comment:
                    break;
                case JsonToken.EndObject:
                    return obj;
            }
        }

        throw new JsonSerializationException("Unexpected end when reading IDictionary<string, object>");
    }

    public override bool CanConvert(Type objectType) { return typeof(IDictionary<string, object>).IsAssignableFrom(objectType); }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T14:45:39.850

使用 Json 反序列化复杂对象时，需要添加 JsonSerializer Settings 作为参数。这将确保所有内部类型都能正确反序列化。

```
 private JsonSerializerSettings _jsonSettings = new JsonSerializerSettings
    {
        TypeNameHandling = TypeNameHandling.All,
        TypeNameAssemblyFormat = FormatterAssemblyStyle.Full
    }; 
```

序列化对象时，可以使用 SerializerSettings：

```
 string json= JsonConvert.SerializeObject(myObject, _jsonSettings) 
```

然后在反序列化时，使用：

```
 var dict = JsonConvert.DeserializeObject<Dictionary<string, object>>(json, _jsonSettings); 
```

此外，当您序列化时，将 JsonSerializerSettings 添加到您的 SerializeObject(object, settings)

编辑：如果需要，您还可以更改 TypeNameHandling 和 TypeNameAssemblyFormat。我将它们分别设置为“全部”和“完整”，以确保我的复杂对象毫无疑问地正确序列化和反序列化，但智能感知为您提供其他选择

# c# - 使用 Embedded Mono (libmono-2.0) 时何时对 C# 对象进行垃圾收集

> ID：11561599
> 
> 赞同：1
> 
> 时间：2012-07-19T13:11:02.233
> 
> 标签：c#, c, mono, interop

我正在使用 libmono 从我的 C 代码中调用 C# 对象。该对象的某些方法采用对象参数。因此，例如，要调用带有数组参数的对象，我使用

```
MonoArray *data = mono_array_new(domain, mono_get_byte_class(), len); 
```

然后`mono_runtime_invoke`使用列出的对象和参数调用。我怎么知道数组不是在`mono_array_new`和之间收集的垃圾`mono_runtime_invoke`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:16:40.317

只要将数据指针作为局部变量保存在调用 invoke() 的函数中，它就不会被垃圾回收。或者，由于它需要存储在 mono_runtime_invoke() 的参数数组中，请确保该数组是局部变量（分配堆栈或寄存器。函数参数相当于局部变量）。

如果您需要将托管对象存储在任何其他位置，例如静态变量、本地线程、分配内存中的某个位置等，那么您需要自己保留对它的引用，例如使用 mono_gchandle_new() API。

# javascript - 读取特定 ID 的 JSON 数据

> ID：11561604
> 
> 赞同：0
> 
> 时间：2012-07-19T13:11:25.663
> 
> 标签：javascript, json

我有一些 JSON 数据，格式如下：

```
[
    {
        "id": 145,
        "Name": "John",
        "company_name": "A",
        "email": "john@gmail.com",
        "country": "USA"
    },
    {
        "id": 500,
        "Name": "Mike",
        "company_name": "B",
        "email": "mike@gmail.com",
        "country": "London"
    },
    {
        "id": 100,
        "Name": "Sally",
        "company_name": "C",
        "email": "sally@gmail.com",
        "country": "USA"
    }
] 
```

现在，假设我要求用户输入一个 id，比如 100。然后我需要显示这个 id 的所有详细信息。

我应该将其作为 Web 应用程序的一部分来执行，我必须在其中调用显示特定 ID 的字段。如果我有一个类似哈希的实现并且可以根据 key-id 显示所有参数，这将很容易。

谁能告诉我如何使用这种数据来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:39:57.137

你可以使用这样的东西：（假设你的 Json 对象有一个可变数据）。

```
function getid(id) {
 var nobj;     
data.forEach(function(obj) {
if(obj.id == id)
    nobj = obj;
});
return nobj    
}
var neededobj = getid(100);
    console.log(neededobj.Name + "\n" + neededobj.email + "\netc..."); 
```

但是要获得对象，您必须遍历整个数组，直到找到正确的对象

看到这个[小提琴](http://jsfiddle.net/HJ4vK/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:43:57.787

我认为您正在寻找[关联数组](http://www.hunlock.com/blogs/Mastering_Javascript_Arrays)，

单纯形的将是，

```
 var associativeArray = [];
        associativeArray["one"] = "First";
        associativeArray["two"] = "Second";
        associativeArray["three"] = "Third";

        alert(associativeArray.one); 
```

显然你可以在值的地方添加 json 对象

# java - 如何获取目录 URL 的文件/目录列表？

> ID：11561608
> 
> 赞同：17
> 
> 时间：2012-07-19T13:11:35.880
> 
> 标签：java, url

假设我有一个 URL：`http://java.sun.com/j2se/1.5/pdf`我想获取目录下所有文件/目录的列表`pdf`。

我正在使用 Java 5。

[我可以使用该程序http://www.httrack.com/](http://www.httrack.com/)获取目录列表，但使用 Java 我不知道是否可能。

有没有人知道如何在Java中获得它？或者如果 Java 不能，这个程序怎么能完成这项工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T13:18:49.793

有一些条件：

1.  服务器必须启用目录列表才能看到它的内容。
2.  我不知道（没有 API 或 HTTP 动词）来检索列表，因此列表通常显示为普通的 HTML 页面
3.  您必须解析此 HTML 页面才能找到条目。

[使用JSoup 之](http://jsoup.org/)类的库可以轻松完成解析。

例如，使用 JSoup，您可以`http://howto.unixdev.net/`像这样在 url 获取文档：

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

public class Sample {
    public static void main(String[] args) throws IOException {
        Document doc = Jsoup.connect("http://howto.unixdev.net").get();
        for (Element file : doc.select("td.right td a")) {
            System.out.println(file.attr("href"));
        }
    }
} 
```

将输出：

```
beignets.html
beignets.pdf
bsd-pam-ldap.html
ddns-updates.html
Debian_on_HP_dv6z.html
dextop-slackware.html
dirlist.html
downloads/
ldif/
Linux-SharePoint.html
rhfc3-apt.html
rhfc3-apt.tar.bz2
SUNWdsee-Debian.html
SUNWdtdte-b69.html
SUNWdtdte-b69.tar.bz2
tcshrc.html
Test_LVM_Trim_Ext4.html
Tru64-CS20-HOWTO.html 
```

至于您的示例网址`http://java.sun.com/j2se/1.5/pdf`，这是一个找不到的页面，所以我认为您不走运。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T13:18:37.317

如果*URL*用于 file: 协议，那么您可以将其转换为 a `java.io.File`，然后使用这些方法列出目录。

如果*URL*是用于 http: 协议的，那么就没有文件目录的概念，你根本无法做你认为你想做的事情。你将不得不退后一步，看看你试图满足的更高层次的要求。

让您的服务器部署一个 Servlet，以从它收到的请求指定的文件夹中检索文件列表。在您的客户端，您的应用程序通过提供您打算列出的路径（虚拟？相对？）向服务器发送请求。将`servlet`返回从服务器操作系统检索到的请求路径中的文件列表。然后，它将文件列表序列化到客户端以进行进一步处理。

如果您只能通过 HTTP 访问呈现页面：
使用 HTML 页面并解析它，给出目录列表以获取文件列表，并使用正则表达式呈现文件名。

# c# - 设置 Log4Net 以记录类库的输出

> ID：11561610
> 
> 赞同：6
> 
> 时间：2012-07-19T13:11:45.943
> 
> 标签：c#, log4net, .net-assembly

我正在尝试设置 Log4Net（这是我第一次使用 Log4Net）以登录到程序集中的文本文件。我没有收到任何错误，但它也不起作用。我可以断点记录输出的行并查看它们是否已到达，但就像我说什么都没有发生。

我哪里错了？

我已在属性内将以下内容添加到我的`packages.config`文件中`<packages>`：

```
 <log4net>
    <appender name="FileAppender" type="log4net.Appender.FileAppender,log4net">
      <file value="c:\CTI\log.txt" />
      <appendToFile value="true" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %level %logger - %message%newline" />
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
        <levelMin value="INFO" />
        <levelMax value="FATAL" />
      </filter>
    </appender>

    <root>
      <level value="DEBUG"/>
      <appender-ref ref="FileAppender"/>
    </root>
  </log4net>
</configuration> 
```

我已将以下行添加到`AssemblyInfo.cs`：

```
[assembly: log4net.Config.XmlConfigurator(Watch=true)] 
```

我使用 NuGet 添加了 Log4Net 程序集，我的日志记录如下：

```
private log4net.ILog _Log;
_Log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
_Log.Debug("FooBar"); 
```

就像我说的，没有错误，但也没有任何反应。

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:17:40.280

错误的一件事是您将 log4net 配置部分添加到 nuget 配置文件 ( `packages.config`)。

您可以在 app/web 配置中或从 appSettings 指向的单独文件中进行配置，例如，配置在名为的文件中`config.log4net`（文件的`copy to output directory`属性设置为`copy always`），然后在 app/ 中添加以下条目网络配置：

```
<add key="log4net.config" value="config.log4net"/> 
```

如果你不想依赖 web/app 配置，你可以设置属性的[ConfigFileExtension](http://logging.apache.org/log4net/release/sdk/log4net.Config.XmlConfiguratorAttribute.ConfigFileExtension.html)属性：`XmlConfiguratorAttribute``AssemblyInfo.cs`

```
[assembly: log4net.Config.XmlConfigurator(ConfigFileExtension = "log4net", Watch = true)] 
```

然后将 log4net 配置文件命名为与您的 exe/程序集相同的名称以及配置的扩展名，例如`MyApplication.exe.log4net`或`MyLibrary.dll.log4net`

另一件错误的事情是您的 appender 过滤器。您设置的范围不包括您希望记录的 DEBUG 级别。以下是所有[日志记录级别](http://logging.apache.org/log4net/release/manual/introduction.html)：

```
ALL
DEBUG
INFO
WARN
ERROR
FATAL
OFF 
```

如您所见，`DEBUG`不在`INFO`和之间`FATAL`。

# javascript - 从函数属性访问对象属性在 Firefox 中不起作用

> ID：11561611
> 
> 赞同：0
> 
> 时间：2012-07-19T13:11:54.183
> 
> 标签：javascript, function, object, closures

下面的代码适用于 Chrome 和 IE(8)，但 firefox 说“未定义覆盖”。使用 this.overlay 或 [this.overlay] 也不起作用。是什么导致了这种差异以及如何在 Firefox 中修复它？

编码：

```
var ol = {
overlay: document.getElementById("overlay"),
build: function(e){
    //todo: build elements dynamically
},
open: function(){
    overlay.style.display = "block";
    centerVertically();
    ol.build();
},
close: function(){
    overlay.style.display = "none";
}
}; 
```

提前致谢。

**编辑：** 解决方案独立工作（[JSfiddle](http://jsfiddle.net/nZhsG/1/ "JSfiddle")），但是当我在我的项目中使用代码时它失败了。这完全没有意义。请参阅此屏幕截图混搭： [图片链接](http://imgur.com/uOybd)

**编辑＃2：**

将我的脚本标签移动到 DOM 的底部修复了所有问题。我不知道为什么我没有想到这一点。这可能是从一开始就存在的问题——Chrome 和 IE 只是更好地处理我的愚蠢，即使有关闭问题。

但是，自从收到您的回复后，我现在编写了更安全的代码，并且知道如何正确访问对象内部的对象属性。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:20:47.973

就像您在引用方法时所做的那样，您只需要在引用“覆盖”时添加对象范围。

所以在你的函数中只做“ol.overlay.style.display”，你应该没问题。

```
var ol = {
    overlay: document.getElementById("overlay"),
    build: function(e){
        //todo: build elements dynamically
    },
    open: function(){
        ol.overlay.style.display = "block";
        centerVertically();
        ol.build();
   },
   close: function(){
        ol.overlay.style.display = "none";
   }
};
ol.open(); 
```

你现在拥有它的方式是在“ol”对象范围之外寻找一个全局 JS 变量。

**编辑**正如@Matt Ball 在下面的评论中所指（我打算添加到此）。您应该确保仅在 DOM 完成加载后才获得“覆盖”元素。

您可以通过 document.ready 模式来做到这一点，或者您可以在您的“ol”函数中执行延迟加载模式。我建议使用 document.ready 模式并更改您的 'ol' 对象以使覆盖默认为 null 并在文档就绪时定义它（或将其放入您在文档就绪时调用的 init 类型方法中），两者都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:14:59.143

这应该在所有浏览器中都可以正常工作，**假设`overlay`页面**上有一个带有 ID 的元素：

```
var ol = {
    overlay: document.getElementById("overlay"),
    build: function (e) {
        //todo: build elements dynamically
    },
    open: function () {
        this.overlay.style.display = "block";
        this.centerVertically();
        this.build();
    },
    close: function () {
        this.overlay.style.display = "none";
    },
    centerVertically: function () {
        // snip
    }
}; 
```

只要你像这样调用函数：

```
ol.open();
// or
ol.close();
// or
ol.build(); 
```

而**不是**这样（这将使`this`各种功能不参考`ol`）：

```
var openFn = ol.open();
openFn();
// etc. 
```

# android - 如何更改 Android ContextMenu 的字体？

> ID：11561620
> 
> 赞同：3
> 
> 时间：2012-07-19T13:12:20.703
> 
> 标签：android, contextmenu

我认为我的问题不需要太多解释，我只需要更改上下文菜单项的字体及其大小。我怎么做？

这是我的代码：

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
      super.onCreateContextMenu(menu, v, menuInfo);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.listmenu, menu);

    } 
```

这就是我获取android的默认上下文菜单的方式。但我想定制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:52:38.987

您可以创建自己的布局来膨胀而不是 R.menu.listmenu，然后在其上设置自定义字体吗？

或者，您可以尝试拦截用户触摸并弹出一个完全自定义的菜单，但这可能会让期望某种字体/菜单的用户感到不安。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:08:41.497

尝试这个

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.my_menu, menu);
getLayoutInflater().setFactory(new Factory() {
    @Override
    public View onCreateView(String name, Context context, AttributeSet attrs) {
        if (name .equalsIgnoreCase(“com.android.internal.view.menu.IconMenuItemView”)) {
            try{
                LayoutInflater f = getLayoutInflater();
                final View view = f.createView(name, null, attrs);
                new Handler().post(new Runnable() {
                    public void run() {
                        // set the background drawable
                        view .setBackgroundResource(R.drawable.my_ac_menu_background);

                        // set the text color
                        ((TextView) view).setTextColor(Color.WHITE);
                    }
                });
                return view;
            } catch (InflateException e) {
                } catch (ClassNotFoundException e) {}
        }
        return null;
    }
});
return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T13:57:06.123

经过测试并像魅力一样工作:)

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu_feedback_filter, menu);

    for (int i = 0; i < menu.size(); i++) {
        MenuItem mi = menu.getItem(i);
        //for aapplying a font to subMenu ...
        SubMenu subMenu = mi.getSubMenu();
        if (subMenu != null && subMenu.size() > 0) {
            for (int j = 0; j < subMenu.size(); j++) {
                MenuItem subMenuItem = subMenu.getItem(j);
                applyFontToMenuItem(subMenuItem, typeface);
            }
        }
        //the method we have create in activity
        applyFontToMenuItem(mi, typeface);
    }

    return super.onCreateOptionsMenu(menu);
}

private void applyFontToMenuItem(MenuItem mi, Typeface font) {
    SpannableString mNewTitle = new SpannableString(mi.getTitle());
    mNewTitle.setSpan(new CustomTypefaceSpan("", font), 0, mNewTitle.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE);
    mi.setTitle(mNewTitle);
} 
```

自定义跨度类

```
import android.graphics.Paint;
import android.graphics.Typeface;
import android.text.TextPaint;
import android.text.style.TypefaceSpan;

public class CustomTypefaceSpan extends TypefaceSpan {

    private final Typeface newType;

    public CustomTypefaceSpan(String family, Typeface type) {
        super(family);
        newType = type;
    }

    @Override
    public void updateDrawState(TextPaint ds) {
        applyCustomTypeFace(ds, newType);
    }

    @Override
    public void updateMeasureState(TextPaint paint) {
        applyCustomTypeFace(paint, newType);
    }

    private static void applyCustomTypeFace(Paint paint, Typeface tf) {
        int oldStyle;
        Typeface old = paint.getTypeface();
        if (old == null) {
            oldStyle = 0;
        } else {
            oldStyle = old.getStyle();
        }

        int fake = oldStyle & ~tf.getStyle();
        if ((fake & Typeface.BOLD) != 0) {
            paint.setFakeBoldText(true);
        }

        if ((fake & Typeface.ITALIC) != 0) {
            paint.setTextSkewX(-0.25f);
        }

        paint.setTypeface(tf);
    }
} 
```

# code-coverage - 声纳中的代码覆盖率和行覆盖率有什么区别

> ID：11561622
> 
> 赞同：28
> 
> 时间：2012-07-19T13:12:29.907
> 
> 标签：code-coverage, sonarqube

我知道行覆盖率和分支覆盖率有什么区别，但是代码覆盖率和行覆盖率有什么区别？是以前的指令覆盖吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-19T14:05:04.547

覆盖率是线路和分支覆盖率的微妙混合；-)。

[您可以在我们的指标描述页面](http://docs.sonarqube.org/display/SONAR/Metric+definitions#Metricdefinitions-Tests)上找到公式：

```
coverage = (CT + CF + LC)/(2*B + EL)

where

CT - branches that evaluated to "true" at least once
CF - branches that evaluated to "false" at least once
LC - lines covered (lines_to_cover - uncovered_lines)

B - total number of branches (2*B = conditions_to_cover)
EL - total number of executable lines (lines_to_cover) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-10T01:17:38.470

要扩展答案，您只能查询声纳以获取以下术语：

1.  conditions_to_cover
2.  未覆盖的条件
3.  lines_to_cover
4.  未覆盖线

然后您可以使用以下等式转换为上述术语：

```
CT + CF = conditions_to_cover - uncovered_conditions
2*B = conditions_to_cover
LC = lines_to_cover - uncovered_lines
EL = lines_to_cover 
```

您可以使用 Sonar Drilldown 或 REST API 来获取上述指标值：

```
http://my.sonar.com/drilldown/measures/My-Project-Name?metric=line_coverage 

http://my.sonar.com/api/resources?resource=55555&metrics=ncloc,conditions_to_cover,uncovered_conditions,lines_to_cover,uncovered_lines,coverage,line_coverage,branch_coverage,it_conditions_to_cover,it_uncovered_conditions,it_lines_to_cover,it_uncovered_lines,it_coverage,it_line_coverage,it_branch_coverage,overall_conditions_to_cover,overall_uncovered_conditions,overall_lines_to_cover,overall_uncovered_lines,overall_coverage,overall_line_coverage,overall_branch_coverage 
```

这篇博文有更多信息：[http ://sizustech.blogspot.com/2015/10/making-sense-of-sonar-qube-stats-like.html](http://sizustech.blogspot.com/2015/10/making-sense-of-sonar-qube-stats-like.html)

# c++ - Mac OS X 上 IOKit 中的 i2c 通信

> ID：11561623
> 
> 赞同：2
> 
> 时间：2012-07-19T13:12:30.600
> 
> 标签：c++, macos, iokit, i2c

我正在尝试使用 MacOS X 函数 IOI2CSendRequest 通过 ddc/ci 与显示器通信。如果我只发送“设置”命令，一切正常，比如设置亮度。我看到显示接收命令，因为显示改变亮度。

但是当我试图从显示器接收回复时，我收到了一些垃圾。使用 IOI2CSendRequest 发送和接收回复的正确方法是什么？

这是我当前的代码：

```
memset(&request, 0, sizeof (request));
request.commFlags = 0;
request.sendAddress = addr << 1;
request.sendTransactionType =  kIOI2CSimpleTransactionType;
request.sendBuffer = (vm_address_t) package;
request.sendBytes = i;
request.replyAddress = (addr << 1) + 1;

request.replyTransactionType = kIOI2CNoTransactionType;
request.replyBuffer = NULL;
request.replyBytes = 0;

kr = IOI2CSendRequest(Display_, kNilOptions, &request);

mysleep(1000);
memset(&request, 0, sizeof (request));
request.commFlags = 0;
request.sendAddress = addr << 1;
request.sendTransactionType =  kIOI2CNoTransactionType;
request.sendBuffer = (vm_address_t)package;
request.sendBytes = 0;
request.replyAddress =  (addr << 1) + 1;
request.replyTransactionType = kIOI2CSimpleTransactionType;
request.replyBuffer = (vm_address_t) buf;
request.replyBytes = 127;   

memset(buf, 0, request.replyBytes);

kr = IOI2CSendRequest(Display_, kNilOptions, &request); 
```

kr 和 request.result 都等于 kIOReturnSuccess，但 buf 中没有有效数据。发送的命令是“51 82 01 10 AC”，其中 AC 是校验和。

操作系统为 10.6.8（雪豹）

知道这段代码有什么问题吗？

# c++ - Android NDK：未定义对“”的引用

> ID：11561626
> 
> 赞同：3
> 
> 时间：2012-07-19T13:12:38.230
> 
> 标签：c++, c, android-ndk, linker-errors, ld

我正在尝试构建 g729 编解码器的库文件。我有此编解码器的源代码并尝试使用 Android NDK 构建。
几乎所有目标文件都已构建，但最后我收到此错误。
但我被这个错误困住了。谁能解释这个错误的含义，我应该怎么做才能解决这个问题？

```
./obj/local/armeabi-v7a/objs/g729_jni/g729/cod_ld8a.o: In function `Coder_ld8a':
/root/g729/jni/g729/cod_ld8a.c:267: undefined reference to `Pitch_ol_fast'
/root/g729/jni/g729/cod_ld8a.c:325: undefined reference to `Pitch_fr3_fast'
/root/g729/jni/g729/cod_ld8a.c:328: undefined reference to `Enc_lag3'
/root/g729/jni/g729/cod_ld8a.c:344: undefined reference to `G_pitch'
collect2: ld returned 1 exit status 
```

谢谢

**编辑** 我已经解决了这个错误，但是**可行**吗？我在 Android.mk 中添加了这一行

```
LOCAL_ALLOW_UNDEFINED_SYMBOLS := true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:01:39.627

如果您正在编译源代码并且想要链接生成的库，您可以在 Android.mk 文件中使用以下变量之一

> LOCAL_STATIC_LIBRARIES：应该链接到该模块的静态库模块列表（使用 BUILD_STATIC_LIBRARY 构建）。这仅在共享库模块中才有意义。
> 
> LOCAL_SHARED_LIBRARIES：此模块在运行时依赖的共享库*模块列表。*这在链接时是必要的，并将相应的信息嵌入到生成的文件中。

有关更多详细信息，请查看您可以在 ndk 文件夹中找到的 android NDK 文档。

否则，如果您必须链接预建库，Android NDK 文档中有一个部分会告诉您如何实现结果。这些文档的在线版本也在[这里（PREBUILTS）](http://www.kandroid.org/ndk/docs/PREBUILTS.html)。

**更新 09/01/2017**

可以在[此处找到有关预建库的文档](https://developer.android.com/ndk/guides/prebuilts.html)

# php - socket_read() 没有阻塞

> ID：11561627
> 
> 赞同：1
> 
> 时间：2012-07-19T13:12:38.220
> 
> 标签：php, sockets

试图让我的 socket_read() 在之前已经读取数据时阻塞。我需要它在再次发送之前等待 $spawn 套接字有新数据（可以相等，即希望它在收到“FE”时两次读取）。

**当没有任何新数据时，如何阻止它？**

```
$i=0;
while ($i<10){
    //Read and Parse Client input
    $input = strtoupper(bin2hex(socket_read($spawn, 1)));
    echo $input . "\n";

    //Deal with requests
    if ($input == "FE"){ //Server Ping
        socket_write($spawn, $ping_packet);
        echo "Ping Attempt \n";
    } elseif ($input == "02"){ //Handshake Request
        socket_write($spawn, $handshake_packet);
        echo "Handshake Attempt \n";
    } elseif($input == "01"){ //Login Request
        socket_write($spawn, $kick_packet);
        echo "Login Attempt \n";
    }
        $i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:17:34.283

您可以使用[socket_set_block](http://no.php.net/manual/en/function.socket-set-block.php)将套接字设置为阻塞。有关如何同时处理大量套接字的信息，请参见[socket_select 。](http://no.php.net/manual/en/function.socket-select.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T11:25:20.233

如果没有准备好读取数据，socket_read 将返回一个空字符串。要进行阻塞读取，请使用带有标志 MSG_WAITALL 的 socket_recv。

# c# - 在数据库表中使用 DataTable 更新？

> ID：11561629
> 
> 赞同：2
> 
> 时间：2012-07-19T13:12:40.453
> 
> 标签：c#, .net, ado.net

我有一张有大约 100-200 条记录的表。我已将这些记录提取到数据集中。

现在我正在使用 foreach 遍历所有记录

```
dataset.Tables[0].AsEnumerable() 
```

我想为循环中的每条记录更新一列。我怎样才能做到这一点。使用相同的数据集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:36:01.540

您应该使用用于填充 DataSet 并调用 Update 方法的原始 DataAdapter（`adapter`在下面的代码中），您还需要 CommandBuilder，这取决于您使用的数据库，这是 SQL 服务器的示例：

```
SqlCommandBuilder builder = new SqlCommandBuilder(adapter);
adapter.UpdateCommand = builder.GetUpdateCommand();
adapter.Update(dataset);
dataset.AcceptChanges(); 
```

这是一个很好的例子：

[http://support.microsoft.com/kb/307587](http://support.microsoft.com/kb/307587)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T16:26:24.303

我假设您使用数据适配器通过选择命令填充数据集？

要编辑数据表中的数据并将更改保存回数据库，您需要数据适配器的更新命令。像这样的东西：-

```
SQLConnection connector = new SQLConnection(@"Your connection string");

SQLAdaptor Adaptor = new SQLAdaptor();

Updatecmd = new sqlDbCommand("UPDATE YOURTABLE SET FIELD1= @FIELD1, FIELD2= @FIELD2   WHERE ID = @ID", connector); 
```

您还需要为字段添加参数：-

```
Updatecmd.Parameters.Add("@FIELD1", SQLDbType.VarCHar, 8, "FIELD1");
Updatecmd.Parameters.Add("@FIELD2", SQLDbType.VarCHar, 8, "FIELD2");

var param = Updatecmd.Parameters.Add("@ID", SqlDbType.Interger, 6, "ID");
param.SourceVersion = DataRowVersion.Original; 
```

使用正确的 SQL 语句创建更新命令并添加参数后，您需要将其分配为数据适配器的插入命令：-

```
Adaptor.UpdateCommand = Updatecmd; 
```

您需要自己阅读如何执行此操作，查看一些示例，这是一个粗略的指南。

下一步是枚举您的数据表，您不需要 LINQ，您可以这样做：-

```
 foreach(DataRow row in Dataset.Tables[0].Rows)
    {
        row["YourColumn"] = YOURVALUE;
    } 
```

完成后，您需要像这样调用您的数据适配器的 Update() 方法：-

```
DataAdapter.Update(dataset.Tables[0]); 
```

这里发生的是数据适配器调用更新命令并将更改保存回数据库。

请注意，如果希望向数据库添加新行，则需要数据适配器的插入命令。

从我的脑海中，这是非常粗略的编码，因此语法可能会稍微有些出问题。但希望能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:09:55.513

步骤如下： - 创建一个新的 DataColumn[^] - 将其添加到数据表的 Columns[^] 集合中 - 例如使用 NewRow[^] 创建一个 DataRow [^] - 根据每行修改行的值需要使用 Item[^] 索引器 - 将行添加到 Rows[^] 集合 - 成功修改后 AcceptChanges[^]

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T13:24:30.603

像这样：

```
DataTable table = new DataTable();
table.Columns.Add("ID", typeof(int));
table.Columns.Add("ProductName");

table.Rows.Add(1, "Chai");
table.Rows.Add(2, "Queso Cabrales");
table.Rows.Add(3, "Tofu");

EnumerableRowCollection<DataRow> Rows = table.AsEnumerable();

foreach (DataRow Row in Rows)
    Row["ID"] = (int)Row["ID"] * 2; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-19T14:13:47.180

添加如下所示的列。

`dataset.Tables[0].Columns.Add(new DataColumn ("columnname"));`

更新列值，如下所示。

`for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++) { dataset.Tables[0].Rows[i]["columnname"] = "new value here"; }`

更新数据库

`dataset.AcceptChanges();`

# c# - 在滚动查看器画布上确定用户单击的集合

> ID：11561630
> 
> 赞同：1
> 
> 时间：2012-07-19T13:12:44.757
> 
> 标签：c#, wpf, xaml, scrollviewer

我在一个基于 MVVM 的 WPF 应用程序中开发的时间线遇到了一个小障碍。

我的愿望是能够告诉用户希望查看什么“bin”，因为通常有比视图中显示的事件更多的事件。这本质上是一个小的堆栈面板，在代码隐藏中开发并显示在用户选择的 bin 上方。更多细节如下。

基本背景是这样的：

*   我正在记录 ViewModel 中发生的事件，我将它们称为事件。

*   我在时间轴上的视图中将它们显示为 50x50 画布（每个事件一个）。这里的细微差别是我的空间非常有限，所以我将显示的实际事件数量限制为略微偏移的 3 个堆栈（想象一下卡片堆叠在一起，显示下方卡片的顶部和右侧) 的每个时间块。

*   在时间的每个刻度（每 30 秒），画布向左滚动 75 个像素，并且所有绘制的元素也随之移动，当然。这也为事件设置了“垃圾箱”。基本上 0 到 29.9 秒之间的所有内容都在 bin 0 中，30 - 59.9 是 bin 1 等等。

*   我正在使用链接到负责显示绑定事件的 ItemsControl 的 PreviewMouseLeftButtonDown 事件。

就目前而言，一切正常。我可以收集鼠标点击，我一直在尝试使用一些基本的数学来确定点击了哪组事件。这是基于单击时鼠标的 X 位置并考虑到 ScrollViewer 窗口的任何滚动。不幸的是，我没有得到正确的“bin”。

我尝试过的其他事情：

*   在 canvas 元素中添加一个标签，其中包含有关它所属的 bin 的信息。这不起作用，因为我得到的代码中的 ItemsSource 包含每个事件，而不仅仅是那些被点击的事件。这就是我访问 ItemsSource 的方式。

    ```
    private void ItemsControl_PreviewMouseLeftButtonDown( object sender, MouseButtonEventArds e)
    {
        var control = (ItemsControl)sender;
        var isource = control.ItemsSource;
        Debug.Assert(isource != null);
    } 
    ```

*   在将其放入项目控件之前，我已尝试将其嵌套在堆栈面板中。这在我有一个嵌套列表时有效，但在我摆脱了列表列表后它就崩溃了。我也不确定这是否是一个可行的选择。

我为此拥有的 XAML（对于那些可能想要查看它的人）如下：

感兴趣的主要 ItemsControl 是最后一个，因为它包含用于在 ScrollViewer 的画布上绘制事件的数据模板。另外两个仅用于我在时间线底部使用的时间戳。

```
<UserControl 
    x:Class="Removed.Views.TransitionTimeline"
    x:ClassModifier="internal"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d" 
    d:DesignHeight="300" d:DesignWidth="300">
  <UserControl.Resources>
    <Style x:Key="ISTCanvasStyle" TargetType="Canvas">
      <Setter Property="Background" Value="Transparent" />
    </Style>

    <Style x:Key="ISTBorderStyle" TargetType="Border">
      <Setter Property="BorderThickness" Value="3" />
      <Setter Property="BorderBrush" Value="{Binding ColorBrush}" />
      <Setter Property="CornerRadius" Value="8" />
      <Setter Property="HorizontalAlignment" Value="Center" />
      <Setter Property="VerticalAlignment" Value="Center" />
      <Setter Property="Background" Value="#FF555555" />
      <Setter Property="Height" Value="50" />
      <Setter Property="Width" Value="50" />
    </Style>

    <Style x:Key="ISTTextBlockStyle" TargetType="TextBlock">
      <Setter Property="Text" Value="{Binding ShortName}" />
      <Setter Property="HorizontalAlignment" Value="Center" />
      <Setter Property="VerticalAlignment" Value="Center" />
      <Setter Property="FontWeight" Value="Bold" />
      <Setter Property="FontSize" Value="40" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="TextAlignment" Value="Center" />
    </Style>

    <Style x:Key="EventCountTextStyle" TargetType="TextBlock">
      <Setter Property="Text" Value="{Binding ExtraEvents}" />
      <Setter Property="Canvas.Top" Value="-15" />
      <Setter Property="Canvas.Left" Value="-25" />
      <Setter Property="FontWeight" Value="Bold" />
      <Setter Property="FontSize" Value="13" />
      <Setter Property="Foreground" Value="{Binding EventTextColorBrush}" />
      <Setter Property="TextAlignment" Value="Center" />
    </Style>

    <DataTemplate x:Key="IndividualStateTransitions">
      <Canvas Margin="{Binding Margin}" Style="{ StaticResource ISTCanvasStyle}" >
        <Border Canvas.Left="-12.5" Style="{ StaticResource ISTBorderStyle}" >
          <TextBlock Style="{StaticResource ISTTextBlockStyle}" />
        </Border>
        <TextBlock Style="{StaticResource EventCountTextStyle}" />
      </Canvas>
    </DataTemplate>

    <DataTemplate x:Key="IST">
      <ItemsControl
          ItemsSource="{Binding}" 
          ItemTemplate="{StaticResource IndividualStateTransitions}"
          PreviewMouseLeftButtonDown="ItemsControl_PreviewMouseLeftButtonDown"
          Width="75">
        <ItemsControl.ItemsPanel>
          <ItemsPanelTemplate>
            <Canvas />
          </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemContainerStyle>
          <Style TargetType="ContentPresenter">
            <Setter Property="Canvas.ZIndex" Value="{Binding ZIndex}" />
          </Style>
        </ItemsControl.ItemContainerStyle>
      </ItemsControl>
    </DataTemplate>

    <DataTemplate x:Key="BottomTimeBar">
      <Canvas>
        <Line X1="{Binding DashX}" X2="{Binding DashX}" Y1="100" Y2="0" Stroke="#FF646464" StrokeThickness="1" StrokeDashArray="5" StrokeDashCap="Round" />
        <TextBlock Canvas.ZIndex="-999"  Width="50" TextAlignment="Center" Text="{Binding TimerText}" Canvas.Left="{Binding BlockLeft}" 
                       Canvas.Top="85" Foreground="White" Background="#FF444444" FontSize="13" />
      </Canvas>
    </DataTemplate>

  </UserControl.Resources>
  <Grid Name="TimelineGrid" Height="192">
    <Grid.RowDefinitions>
      <RowDefinition Height="92" />
      <RowDefinition Height="100" />
    </Grid.RowDefinitions>

    <Canvas Grid.Row="0" Width="1920" Height="100">
      <ScrollViewer            
          Width="1920"
          Height="100"
          Name="_timelineScrollViewer2" 
          CanContentScroll="True" 
          Background="Transparent"
          HorizontalScrollBarVisibility="Hidden" 
          VerticalScrollBarVisibility="Hidden">
        <Canvas Width="9999" Name="_timelineCanvas2">
        </Canvas>
      </ScrollViewer>
    </Canvas>

    <Canvas Grid.Row="1" Name="MainCanvas" Width="1920" Height="100" >
      <Line X1="0" X2="1920" Y1="0" Y2="0" Stroke="#FFD0D0D0" StrokeThickness="3">
        <Line.Effect>
          <DropShadowEffect BlurRadius="3" ShadowDepth="3" />
        </Line.Effect>
      </Line>
      <Line X1="0" X2="1920" Y1="55" Y2="55" Stroke="#FFD0D0D0" StrokeThickness="3">
        <Line.Effect>
          <DropShadowEffect BlurRadius="3" ShadowDepth="3" />
        </Line.Effect>
      </Line>
      <ScrollViewer            
          Width="1920"
          Height="100"
          Name="_timelineScrollViewer" 
          CanContentScroll="True" 
          Background="Transparent"
          HorizontalScrollBarVisibility="Hidden" 
          VerticalScrollBarVisibility="Hidden"
          PreviewMouseLeftButtonDown="TimelineScrollViewerLeftMouseDown" 
          PreviewMouseLeftButtonUp="LeftMouseUp" 
          PreviewMouseMove="TimelineScrollViewerMouseMove"
          PreviewMouseWheel="TimelineScrollViewerPreviewMouseWheel"
          ScrollChanged="OnTimelineScrollChanged" ClipToBounds="False">
        <Canvas Width="9999" Name="_timelineCanvas">
          <Line Canvas.ZIndex="-1000" Name="CurrentTimeLine" X1="1280" X2="1280" Y1="0" Y2="100" Stroke="#FFD0D0D0" StrokeThickness="3">
            <Line.Effect>
              <DropShadowEffect BlurRadius="3" ShadowDepth="3" />
            </Line.Effect>
          </Line>
          <ItemsControl ItemsSource="{Binding BottomTimeBarData}" ItemTemplate="{StaticResource BottomTimeBar}" Canvas.Left="{Binding LeftScroll}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <Canvas />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
          </ItemsControl>
          <ItemsControl ItemsSource="{Binding BottomTimeBarDataPast}" ItemTemplate="{StaticResource BottomTimeBar}" Canvas.Left="{Binding LeftScroll}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <Canvas />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
          </ItemsControl>

          <ItemsControl ItemsSource="{Binding DisplayObject}" ItemTemplate="{StaticResource IndividualStateTransitions}" Canvas.Left="{Binding LeftScroll}" Canvas.Top="15" Margin="0.0, 25.5"
                        PreviewMouseLeftButtonDown="ItemsControl_PreviewMouseLeftButtonDown" >
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <StackPanel />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
              <Style TargetType="ContentPresenter">
                <Setter Property="Canvas.ZIndex" Value="{Binding ZIndex}" />
              </Style>
            </ItemsControl.ItemContainerStyle>
          </ItemsControl>
        </Canvas>
      </ScrollViewer>
    </Canvas>
  </Grid>
</UserControl> 
```

如果您有任何问题，请告诉我。我很乐意澄清发生了什么。最终我正在寻找的是一种确定用户希望查看的“bin”的方法。

更新 1：有关绘制对象的附加信息。

我已经定义了自己的内部类，因此我可以将它用作我的 ObservableCollection 的数据类型，这就是在这种情况下绑定的内容。

```
internal class DisplayObjects : INotifyPropertyChanged
{
    private int _elementbin;
    public int ElementBin
    {
        get { return _elementbin; }
        set
        {
            _elementbin = value;

            if ( PropertyChanged != null )
                PropertyChanged( this, new PropertyChangedEventArgs( "ElementBin" ) );
        }
    }

    private string _shortName;
    public string ShortName
    {
        get { return _shortName; }
        set
        {
            _shortName = value;

            if ( PropertyChanged != null )
                PropertyChanged( this, new PropertyChangedEventArgs( "ShortName" ) );
        }
    }

    private string _margin;
    public string Margin
    {
        get { return _margin; }
        set
        {
            _margin = value;

            if ( PropertyChanged != null )
                PropertyChanged( this, new PropertyChangedEventArgs( "Margin" ) );
        }
    }

    private string _extraevents;
    public string ExtraEvents
    {
        get { return _extraevents; }
        set
        {
            _extraevents = value;

            if ( PropertyChanged != null )
                PropertyChanged( this, new PropertyChangedEventArgs( "ExtraEvents" ) );
        }
    }

    public Color EventTextColor { get; set; }

    public SolidColorBrush EventTextColorBrush
    {
        get
        {
            return new SolidColorBrush( EventTextColor );
        }
    }

    private int _zindex;
    public int ZIndex
    {
        get { return _zindex; }
        set
        {
            _zindex = value;

            if ( PropertyChanged != null )
                PropertyChanged( this, new PropertyChangedEventArgs( "ZIndex" ) );
        }
    }

    public Color Color { get; set; }

    public SolidColorBrush ColorBrush
    {
        get { return new SolidColorBrush( Color ); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我订阅了一个事件聚合器，因此我可以在事件发送时捕获它们。这触发了我的`OnEventReceived`方法。关于此方法，您需要了解的只是它从接收到的事件中获取信息，并根据事件发生的时间确定它应该落入哪个 bin。这会触发对我的`DrawObject`方法的调用。

如果您想尝试模拟这一点，您可以用一些硬编码的东西替换 stvm 的使用。我无法为此提供实际数据。stvm.Color 只是表示事件类型的颜色。stvm.ShortName 只是一个字母。_bins 只是一个`List<Int>`跟踪相应 bin 中发生的事件总数的方法。 `position`只是它所属的 bin 中的数字事件。因此，如果这是第一个事件，那将是 1。如果这是第十个事件，它将是 10。

这里的`FindLastVisualChild`方法只是为了返回给定 bin 的第三个 DisplayObject 的位置索引。这使我可以更新显示“+ X more”的标签。堆栈中的事件。

```
private void DrawObject( EventViewModel stvm, int position, int bin )
{
    var margin = "";
    var zindex = 0;
    var left = bin * 75.0;
    var textColor = Colors.Transparent;
    var extraEvents = "+ ";
    switch ( position )
    {
        case 1:
            left += 12.5;
            margin = left + ", -5";
            zindex = 3;
            DisplayObject.Add( new DisplayObjects
            {
                Color = stvm.Color,
                ShortName = stvm.ShortName,
                Margin = margin,
                ZIndex = zindex,
                EventTextColor = textColor,
                ExtraEvents = extraEvents,
                ElementBin = bin
            } );
            break;
        case 2:
            left += 22.5;
            margin = left + ", -15";
            zindex = 2;
            DisplayObject.Add( new DisplayObjects
            {
                Color = stvm.Color,
                ShortName = stvm.ShortName,
                Margin = margin,
                ZIndex = zindex,
                EventTextColor = textColor,
                ExtraEvents = extraEvents,
                ElementBin = bin
            } );
            break;
        case 3:
            left += 32.5;
            margin = left + ", -25";
            zindex = 1;
            DisplayObject.Add( new DisplayObjects 
            { 
                Color = stvm.Color, 
                ShortName = stvm.ShortName, 
                Margin = margin, 
                ZIndex = zindex, 
                EventTextColor = textColor, 
                ExtraEvents = extraEvents,
                ElementBin = bin
            } );
            break;
        default:
            //left += 32.5;
            //margin = left + ", -25";
            //DisplayObject.Add( new DisplayObjects { Color = stvm.Color, ShortName = stvm.ShortName, Margin = margin, ZIndex = zindex, EventTextColor = textColor, ExtraEvents = extraEvents } );
            extraEvents += ( _bins[bin] - 3 ) + " more.";
            var test = FindLastVisualChild( bin );
            DisplayObject[test].EventTextColor = Colors.White;
            DisplayObject[FindLastVisualChild( bin )].ExtraEvents = extraEvents;
            break;
    }
}

private int FindLastVisualChild( int bin )
{
    var sum = 0;
    for ( var idx = 0; idx <= bin; idx++ )
        if ( _bins[idx] <= 3 )
            sum += _bins[idx];
        else
            sum += 3;
    return ( sum - 1 );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:22:01.487

你试过在这里使用`e.OriginalSource`吗？

我显然无法重现您的项目，但据我猜测，您应该能够通过使用以下方法获得单击的 Canvas：

```
var canvas = e.OriginalSource as Canvas 
```

然后你应该能够轻松地获得相应的项目，因为我理解它是画布的 DataContext：

```
var item = canvas.DataContext as MyItemViewModel; 
```

但正如我所写，这是猜测。您应该发布更多信息，以便我们在您的应用中更清楚地看到，例如您将项目添加到集合中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:11:49.840

在这里非常感谢 David 和 Rachel。他们的意见使我得到了我终于开始工作的答案。

就像任何在此之后出现并阅读它的人的参考。这就是我所做的。

在`IndividualStateTransistions`我在`Tag = "{Binding ElementBin}"`画布上添加的数据模板中。然后，我在将事件过滤到 bin 的代码中添加了该元素所属的 bin 编号。

根据 Rachel 的建议，我也将鼠标单击事件移至此 Canvas。

在后面的代码中，我改编了大卫建议的内容：

在 OnMouseClickEvent 方法中...

```
var control = (Canvas)sender;
var item = control.DataContext as DisplayObjects;
var itembin = item.ElementBin; 
```

这为我提供了该组事件所属的 bin，并允许我继续下一步。

再次感谢伙计们（和女孩们）！

# python - Google Python API 电子表格行数/列数

> ID：11561639
> 
> 赞同：2
> 
> 时间：2012-07-19T13:12:57.677
> 
> 标签：python, google-docs-api, google-spreadsheet-api

问题是，我可以检索列数吗？我的意思是，我可以使用以下方法获取工作表提要：

```
feed = self.gd_client.GetWorksheetsFeed( self.spreadsheet_id ) 
```

并获取它的`<ns1:rowCount>`或`<ns1:colCount>`标签值，但有没有办法直接检索它？喜欢`feed.entry[ number ].rowCount`还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T16:50:08.733

我相信这会奏效

```
num_rows = int( feed.entry[ number].row_count.text ) 
```

# cmd - DOS ftp 列表到本地文件

> ID：11561645
> 
> 赞同：3
> 
> 时间：2012-07-19T13:13:37.510
> 
> 标签：cmd, ftp, dos

我试图找到一种方法来通过**DOS**查看文件是否存在于 ftp 站点上。我在文件上尝试了一个`get`命令，希望如果它不存在，它不会将它下载到我的本地目录。然而，它似乎仍然如此，但它是一个空文件。然而，这对我不起作用，因为我正在寻找的文件只是一个空的触发器文件，所以我无法区分。

我想将**`ls`**ftp 目录列表转储到本地驱动器上的文本文件中，因此我尝试
`ls > listing.txt`. 它在本地创建`listing.txt`文件，但即使 ftp 站点上有文件，它也始终为空。

我有什么选择？

我使用过`dir > listing.txt`并且`ls > listing.txt`每次`listing.txt`都是空的，即使我正在运行这些命令的目录中有文件。

抱歉，如果我没有说清楚，但我正在尝试获取自动化过程的列表，而不仅仅是手动执行此操作时的视觉效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T09:20:03.023

除非您使用的是 FreeDOS，否则您可能不会使用 DOS。也许您`ftp.exe`在 Windows 控制台中使用？如果是这种情况，请不要使用正常的文件重定向。而是[在此处检查](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ftp__ls.mspx?mfr=true)`ls`标准 Windows ftp 客户端中的语法：

```
ls [RemoteDirectory] [LocalFile] 
```

因此，您可以执行 a`ls . listing.txt`来获取当前远程目录中的文件列表。该`listing.txt`文件将出现在您的用户目录中，例如`c:\Users\user`.

# android - 在Android状态栏中隐藏图标和其他

> ID：11561647
> 
> 赞同：0
> 
> 时间：2012-07-19T13:13:42.730
> 
> 标签：android, hide, statusbar, android-icons

我更喜欢完全隐藏 android 平板电脑（Androide 3.x 和 4.x）中的底部状态栏，但这似乎是不可能的，因为新的 android 版本从设备中删除了物理按键。因此，我至少会从底部状态栏、时钟、电池图标等中删除。我只想要“返回”、“主页”和“选项”按钮。这是可能的？

[http://developer.android.com/design/patterns/actionbar.html#considerations-split-action-bars](http://developer.android.com/design/patterns/actionbar.html#considerations-split-action-bars)在平板设备中，当设置全屏模式时，BottomBar 和通知栏（包括时钟等）会合并。我实际上想隐藏通知栏一侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:28:33.353

> 因此，我至少会从底部状态栏、时钟、电池图标等中删除。我只想要“返回”、“主页”和“选项”按钮。这是可能的？

如果您使用自己修改过的 Android 版本制作自己的 ROM 模组，是的。SDK 应用程序无法从系统栏中删除项目。

# c# - 获取正在使用的 IP

> ID：11561663
> 
> 赞同：0
> 
> 时间：2012-07-19T13:14:45.193
> 
> 标签：c#, .net, c#-4.0

我对获取 PC 的 IP 地址有点困惑。我有一个在多台电脑上运行的 winforms 应用程序。在某些情况下，应用程序必须向其他应用程序发送消息。为此，我将有关正在运行应用程序的电脑的信息写入数据库，其中的数据是 IP 地址。这个想法是使用 WCF 与正在运行的应用程序通信和广播消息。所以，问题是我怎样才能得到工作的IP地址。使用以太网 IP 地址、Wi-Fi 地址和 vmware 地址对笔记本进行映像。我必须选择其中的哪一个？

这是我使用的代码。但在笔记本的情况下，它正在返回 vmware 地址，这是无用的。

```
private String GetMyIp()
{
    String ipAddress = 
      System.Net.Dns.GetHostEntry(
         System.Net.Dns.GetHostName())
      .AddressList.First(i => i.AddressFamily.Equals(
         System.Net.Sockets.AddressFamily.InterNetwork))
      .ToString();
    return ipAddress;
 } 
```

主要思想是获取有连接的IP地址。希望清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:26:37.763

好吧，除非您建立连接，否则您的计算机需要做很多工作才能确定它将使用哪张卡..或确实使用过。

这是我做的方式..我建立了一个连接然后问，它以前是做什么的，实际上我使用了你的部分代码，它似乎确实有效

此外，当然连接的另一端也可以以类似的方式检查远程（例如客户端）地址。

```
class Program
{
    static void Main(string[] args)
    {
    TcpClient t = new TcpClient("www.microsoft.com", 80);

    Console.WriteLine(GetMyIp(t.Client.LocalEndPoint.AddressFamily));
    t.Close();
}

static private String GetMyIp(AddressFamily addr)
{
    String ipAddress = System.Net.Dns.GetHostEntry(
        System.Net.Dns.GetHostName()
        )
        .AddressList.First(i => i.AddressFamily.Equals(addr)).ToString();
    return ipAddress;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:29:41.120

枚举活动网络连接时需要考虑几件事。如果您有 wifi 适配器和 LAN 连接并且两者都处于活动状态，您希望正在运行的应用程序使用哪个？

为什么不使用中央 WCF 发布-订阅方法的良好实践，让正在运行的客户端请求中央 WCF 服务，并可能在 WCF 服务器端存储端点地址？

# java - 在我的 Jar 文件中找不到类

> ID：11561669
> 
> 赞同：0
> 
> 时间：2012-07-19T13:15:03.440
> 
> 标签：java, applet, classnotfoundexception

我在 HTML 页面中有以下代码

```
 <applet code="com.griaule.fingerprintsdk.appletsample.FormMain"
            archive="SignedFingerprintSDKJava.jar, AbrirAplicativoAssinado.jar"
            width="515" height="560">
        </applet> 
```

当我运行我的 html 页面时，出现一条错误消息，`"ClassNotFoundException, FormMain.class"`

我运行 jarscan 并在我的 jar 文件中找到了 FormMain 类。

发生了什么 ？

**这就是我生成 jar 文件的方式**

```
jar cvf C:\Users\lucas\desktop\AbrirAplicativo.jar C:\Users\lucas\workspace\applet-chave\bin\com\griaule\fingerprintsdk\appletsample\AppletInstaller.class C:\Users\lucas\workspace\applet-chave\bin\com\griaule\fingerprintsdk\appletsample\ColorPane.class C:\Users\lucas\workspace\applet-chave\bin\com\griaule\fingerprintsdk\appletsample\FormMain.class C:\Users\lucas\workspace\applet-chave\bin\com\griaule\fingerprintsdk\appletsample\FormOptions.class C:\Users\lucas\workspace\applet-chave\bin\com\griaule\fingerprintsdk\appletsample\Util.class 
```

**生成密钥**

```
keytool -genkey -dname "cn=AbrirAplicativoApplet, ou=XXX, o=XXX, l=São Paulo, s=SP c=BR" -alias AbrirAplicativoAppletKey -keystore C:\ChaveAbrirAplicativoApplet -storepass 123456 -validity 7300 
```

**分配 Jar 文件**

```
jarsigner -keystore C:\users\lucas\desktop\ChaveAbrirAplicativoApplet -storepass 123456 -signedjar "C:\Users\lucas\Desktop\AbrirAplicativoAssinado.jar" "C:\Users\lucas\Desktop\AbrirAplicativo.jar" AbrirAplicativoAppletKey 
```

**出口证书**

```
keytool -export -keystore C:\users\lucas\desktop\ChaveAbrirAplicativoApplet -alias AbrirAplicativoAppletKey -file C:\users\lucas\desktop\CertificadoAbrirAplicativoApplet.x509 
```

**验证分配**

```
keytool -import -alias AbrirAplicativoAppletKey -file C:\CHAVES\CertificadoAbrirAplicativoApplet.x509 
```

也许我的问题出在`PolicyTool`

当我尝试输入新的策略条目时，出现以下错误

```
java.net.MalformedURLException: no protocol: AbrirAplicativoAssinado.jar 
```

但是，如果我的 jar 文件在我的桌面上，我怎么能在这个字段中输入一个 URL？

我尝试放置`http://localhost/AbrirAplicativoAssinado.jar`但出现新错误

```
There is not a public key for the alias AbrirAplicativoAppletKey. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:02:36.217

好的，“找不到类”应该与签名无关。我认为 jar 文件与 html 文件位于同一目录中？

您列出多个档案的方式可能存在问题。您可以尝试以下方法：

*   `,`从存档列表中省略，只留下空格。
*   用或替换`,`（包括空格）。`:``;`
*   创建一个仅包含清单的 jar 文件，并在该清单中添加一个`Class-Path`列出其他两个档案的属性，以空格分隔。使用该文件作为`archive=`参数。
*   修改您的 jar 文件之一以在`Class-Path`其清单的属性中引用另一个，并仅在`archive=`参数中列出该文件。

它也看起来好像你构建你的jar文件的方式，所有的类文件都会放在文件的根目录中，没有内部目录结构。jar 文件中的目录结构必须与类的包结构相匹配，即`package`源代码中的行，以及标签的`code=`参数。`applet`

为了在您的 jar 文件中创建目录结构，请将目录更改为`C:\Users\lucas\workspace\applet-chave\bin`，然后执行`jar cvf C:\Users\lucas\desktop\AbrirAplicativo.jar com`将整个目录添加`com`到存档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:02:09.603

当您应该指定的内容`FormMain`是`.html``com.griaule.fingerprintsdk.appletsample.FormMain`

您在问题中提出的所有签名内容都与`ClassNotFoundException`.

我也不确定您是否`.jar`正确构建，它可能包括您的用户路径以及`.jar`. 最好花时间设置 Maven 来构建，`.jar`或者至少使用 Eclipse 中内置的工具来导出`.jar`. 手工操作容易犯各种错误。

# drupal - 如何在块中创建按钮？

> ID：11561670
> 
> 赞同：2
> 
> 时间：2012-07-19T13:15:05.183
> 
> 标签：drupal, button, drupal-7

使用 Drupal 7，我尝试将以下内容放入块体中，但没有成功。

```
<form action="http://mysite.com/request">
    <p class="rtecenter"><input type="button" value="Click Me!" /></p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:44:56.453

Drupal 有其创建和处理表单的方式。你可以看看[webform 模块](http://drupal.org/project/webform)。

或者您可以使用[hook_block_info](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_info/7) ()、[hook_block_view](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_view/7) () 创建您的自定义表单，并且不要忘记查看[drupal 表单 API 快速入门指南](http://drupal.org/node/751826)。

希望这会有所帮助……穆罕默德。

# javascript - 如何传递参数并应用于函数？

> ID：11561673
> 
> 赞同：2
> 
> 时间：2012-07-19T13:15:08.753
> 
> 标签：javascript, arguments, pass-through

我有一个`Uint8Array`我想使用该`slice`方法的。

所以我利用了这样的数组切片方法：

```
Array.prototype.slice.call(array, start, end); 
```

现在我想外包一些像这样的常用功能。
我试过了

```
var utils = {
   slice: function() {
     return Array.prototype.slice.apply(this, arguments);
   }
}; 
```

但显然我误解了它是如何工作的。任何人都可以向我解释这一点以及如何实现它以开始工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:17:30.087

你的问题在于这`this`不是你想的那样。如果你打电话`utils.slice(foo, 1, 2)`，`this`就会`utils`。

根据您要如何调用它，您可以将要操作的对象作为第一个参数传递，然后您将执行以下操作：

```
var utils = {
   slice: function() {
     // The object we're operating on
     var self = arguments[0];
     // The rest of the arguments
     var args = Array.prototype.slice.call(arguments, 1);

     return Array.prototype.slice.apply(self, args);
   }
}; 
```

用法：

```
var someSlice = utils.slice(someArray, 2, 14); 
```

另一个（也许更清楚）选项是只使用命名参数：

```
var utils = {
    slice: function(array, from, to) {
        return Array.prototype.slice.call(array, from, to);
    }
}; 
```

这将以相同的方式工作。

**更新：**我很好奇为什么`Uint8Array`没有`slice`，我发现了[`subarray`](https://developer.mozilla.org/en/JavaScript_typed_arrays/Int8Array#subarray%28%29)：

```
Int8Array subarray(
  long begin,
  optional long end
); 
```

注意

> 注意：请记住，这是在现有缓冲区上创建一个新视图；对新对象内容的更改将影响原始对象，反之亦然。

可能这就是你想要的——我打赌它会更有效率——如果你不需要复制数据，那就是！

# jquery - 让视差在 iPad 上工作

> ID：11561674
> 
> 赞同：1
> 
> 时间：2012-07-19T13:15:13.457
> 
> 标签：jquery, ipad, tablet, parallax

我一直在寻找和阅读很多关于视差效果的信息，我即将创建我的第一个视差网站。我主要担心的问题之一是让它在 iPad 上运行。我已经阅读并看到足够多的结论，Parallax 在 iPad 上效果不佳。

现在，在所有 Parallax 网站中，我发现有 2 个似乎在 iPad 上运行良好，但我仍然不知道他们在工作方面有何不同，有什么想法吗？

基本上我想知道的是视差站点之间有什么区别。我已经看到一些使用画布标签，而其他似乎只是调整顶部和左侧值，而其他似乎正在替换图像。此外，对于 iPad 友好的 Parallax 网站来说，最好的方法是什么。

我发现在 iPad 上运行良好的 2 个网站是：

[http://www.nike.com/jumpman23/aj2012/](http://www.nike.com/jumpman23/aj2012/)

[https://victoriabeckham.landrover.com/INT](https://victoriabeckham.landrover.com/INT)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:44:45.697

我的回复专门针对[https://victoriabeckham.landrover.com/INT](https://victoriabeckham.landrover.com/INT)

他们根据您提供的输入类型模拟滚动。您实际上并没有滚动页面，然后为各种属性设置动画。它正在读取触摸事件、鼠标滚轮或它们自定义的烘焙滚动条，并查看您想要滚动多少。页面中的所有内容都在一个容器中。这样，当您进行触摸事件时，它只是读取您在页面上移动了多少。

最重要的是，他们使用动画循环来使一切移动。他们正在使用 window.requestAnimationFrame 方法来优化他们页面中的更改，以便它在 iPad 和浏览器中顺利运行。这是一个带有描述的页面：

> [http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/) 浏览器可以将并发动画一起优化为单个回流和重绘循环，从而获得更高保真度的动画。例如，与 CSS 过渡或 SVG SMIL 同步的基于 JS 的动画。此外，如果您在不可见的选项卡中运行动画循环，浏览器将不会继续运行，这意味着 CPU、GPU 和内存使用量减少，从而延长电池寿命。

最重要的是，他们构建了一个自定义关键帧对象，该对象将决定页面上所有内容的动画方式。我对这个设置流口水了。太糟糕了，它不是一个开放的框架。您可以在关键帧对象中设置效果的开始位置、结束位置、缓动等，它们的框架将通过动画循环处理所有其余部分。

```
{
    selector: '#outro2 > .content2',
    startAt: outroStart+500,
    endAt: outroStart+1000,
    onEndAnimate:function( anim ) {},
    keyframes: [
        { 
            position: 0,
            properties: {
                "margin-top": 650
            }

        },
        {
            position: 1,
            ease: TWEEN.Easing.Sinusoidal.EaseOut,
            properties: {
                "margin-top": 650
            }
        }
    ]
}, 
```

总之，我相信自定义实现的滚动和使用 requestAnimationFrame 方法的自定义动画循环的组合超越了通常与 iOS 设备相关的视差限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:09:30.840

为了回答你的问题，我查看了代码，我发现了这个：

```
 // touch
  function touchStartHandler(e) {
    //e.preventDefault();
    touchStart.x = e.touches[0].pageX;

    // Store the position of finger on swipe begin:
    touchStart.y = e.touches[0].pageY;

    // Store scroll val on swipe begin:
    scrollStart = scrollTop;
  };

  function touchEndHandler(e) {

  }

  function touchMoveHandler(e) {

    /*if (settings.freezeTouchScroll == true) {
      $('#status2').html('freezin');
      return false;
    };
    $('#status2').html('moovin');
    */

    e.preventDefault();
    offset = {};
    offset.x = touchStart.x - e.touches[0].pageX;

    // Get distance finger has moved since swipe begin:
    offset.y = touchStart.y - e.touches[0].pageY; 

    // Add finger move dist to original scroll value
    scrollTop = Math.max(0, scrollStart + offset.y);
    checkScrollExtents();
  } 
```

我自己没有尝试过该代码，但我相信这就是您所需要的。我会试一试，让你知道这是否就是你所需要的。

# database - Struts2 + Hibernate：没有为 Hibernate Session 对象设置目标

> ID：11561678
> 
> 赞同：0
> 
> 时间：2012-07-19T13:15:30.747
> 
> 标签：database, hibernate, session, struts2, warnings

我使用 Struts2 + Hibernate。我在控制台中收到此错误：**在 /test 处没有为 Hibernate Session 对象设置目标 - 方法：xxxa.action.TestAction.testFunc()。使用*hibernatePlugin.sessionTarget*属性或 SessionTarget Annotation。**. 它只是警告还是错误？在这两种情况下，需要做什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:05:23.153

我在使用 Struts2 + Hibernate 时遇到了同样的问题。拼图的每个部分都很好，数据库、pojo 类、字段……最后我解决了这个问题，只是将我的 java 类（DAO、Entity pojo 类、Action 类）**放在一个包**中，而不是一个空白的。

# c# - 从datagridview中删除所有数据

> ID：11561680
> 
> 赞同：0
> 
> 时间：2012-07-19T13:15:36.537
> 
> 标签：c#, winforms, datagridview

为什么这不起作用？

```
 //::::::::::::::::::::::::::::::::::::
    private void uxClearButton_Click(object sender, EventArgs e)
    {
        clearDGV();
    }
    void clearDGV()
    {
        // remove selected rows 
        foreach (DataGridViewRow row in uxDGV.Rows)
        {
            uxDGV.Rows.Remove(row);
        } 
    }
    //::::::::::::::::::::::::::::::::::: 
```

DGV 未绑定，用户已在其中输入信息。

我得到的错误是`InvalidOperationException was unhandled Uncommitted new row cannot be deleted.`

**编辑**

好的 - 感谢史蒂夫等人鼓励我为自己找到答案！

```
uxChargeBackDataGridView.Rows.Clear(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T14:33:11.823

幸运的是，`DataGridView`它为我们提供了一个方法，只需`Clear`像这样调用：

```
uxDGV.Rows.Clear(); 
```

* * *

您收到错误的原因是您试图删除未提交的新行。（一旦您知道问题，该错误实际上是很好且信息丰富的！）

新行由行上的布尔`IsNewRow`属性标识`DataGridView`。

在您的代码中，您还遇到了在修改集合时迭代集合的问题。所以你需要做类似下面的事情，我们向前迭代但每次都从零删除：

```
int rowCount = dataGridView1.Rows.Count;
for (int n = 0; n < rowCount; n++)
{
    if (dataGridView1.Rows[0].IsNewRow == false)
        dataGridView1.Rows.RemoveAt(0);
} 
```

# list - 我的游戏服务器的三个任务批处理文件

> ID：11561681
> 
> 赞同：0
> 
> 时间：2012-07-19T13:15:43.737
> 
> 标签：list, batch-file, logging, delete-file

我需要 3 个不同的批处理文件来完成 3 个不同的任务：

- 记录 HldsUpdateTool.exe 控制台的输出，到目前为止我没有看到发生了什么，但我管理了这个：

```
@echo off
echo Updating...
call :Logit>>log.txt 2>&1
exit /b 0
:Logit
hldsupdatetool.exe -command update -game "Counter-Strike Source" -dir "Source 2007 Dedicated Server" -verify_all -retry
start notepad log.txt 
```

-清理此日志以获取文件和文件夹列表；日志将如下所示：

```
Checking bootstrapper version ...
Updating Installation
Determining which depot(s) to install/update...
5 depot(s) will be installed/updated
  0:30 Checking local files and building download list for depot 242 'Counter-Strike Source Shared' version 126
  0:30     Connecting content server session for version 126
  0:31     [80.239.194.146:27030] Connecting...
  0:31     [80.239.194.146:27030] Connection established; handshaking...
  0:31     [80.239.194.146:27030] Sending login message...
  0:31     Fetching version 126 manifest
  0:41     Reading version 126 checksum table
  0:54     Calculating download size and verifying checksums
  0:54         Checking...: /
  0:54         Checking...: cstrike
  0:54         Checking...: cstrike\bin
  0:54         Checking...: cstrike\cfg
  0:54         Checking...: cstrike\classes
  0:54         Checking...: cstrike\maps
  0:54         Checking...: cstrike\maps\graphs
  0:54         Checking...: cstrike\maps\soundcache
  0:57         Checking...: cstrike\materials
  0:57         Checking...: cstrike\materials\brick
  0:57         Checking...: cstrike\materials\buildings
  0:57         Checking...: cstrike\materials\carpet
  0:57         Checking...: cstrike\materials\composite
  0:57         Checking...: cstrike\materials\concrete
  0:58         Checking...: cstrike\materials\console
etc... later on files do not have extensions! 
```

-从未列出的任何文件或文件夹中清除服务器文件夹！

我确实搜索了2天，但这是我自己可以去的地方......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:21:50.187

您可以将其缩短为

```
@echo off
hldsupdatetool.exe -command update -game "Counter-Strike Source" -dir "Source 2007 Dedicated Server" -verify_all -retry >Log.txt
start notepad Log.txt 
```

文件未显示扩展名的问题将归结为您正在运行的程序，批处理所做的只是调用 exe 并重定向输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:07:58.907

首先，我绝对是批处理的新手 :) 至于第二个问题：-清理此日志以获取文件和文件夹列表；日志将如下所示：

```
for /f "tokens=3" %G in ('findstr /i /c:"checking..." log.txt')do echo %G>>_.log 
```

愿它对你有用。

**更新：** 我下载你的 log.txt 并立即测试，这是结果（文件名 _.log）：

```
/
cstrike
cstrike\bin
cstrike\cfg
cstrike\classes
cstrike\maps
cstrike\maps\graphs
cstrike\maps\soundcache
cstrike\materials
cstrike\materials\brick
cstrike\materials\buildings
cstrike\materials\carpet
cstrike\materials\composite
cstrike\materials\concrete
cstrike\materials\console
cstrike\materials\cs_assault
cstrike\materials\cs_havana
cstrike\materials\cs_italy
cstrike\materials\cstrike
cstrike\materials\de_aztec
cstrike\materials\de_cbble
cstrike\materials\de_chateau
cstrike\materials\de_dust
cstrike\materials\de_nuke
cstrike\materials\de_piranesi
cstrike\materials\de_prodigy
cstrike\materials\de_tides
cstrike\materials\de_train
cstrike\materials\decals
cstrike\materials\decals\concrete
cstrike\materials\decals\metal
cstrike\materials\decals\wood
... 
```

也许我误解了你的意思？

**再次更新**

至于第三个问题

```
@echo off
set /p origin=Where is the original folder?(Type absoulute path directly.)
echo origin: %origin%
set /p destin=Where can i put file temporarily(Type absoulute path directly.)
echo destination :%destin%

for /f %%G in (_.log) do (
if "%%G"=="/" (
    echo.
) else ( 
    xcopy %origin%\%%G %destin%\%%G /H /K /R /E /D /I /Y 
))

rm -rf %origin%
set /p origin=What is the name of original folder?(Type name)
rename %destin% %origin% 
```

愿它帮助你！

**第三次更新：）**

因为第一版可能对你来说有点混乱。对不起，我缺乏能力 ti 代码很好。

```
@echo off
setlocal enabledelayedexpansion
set MAXNUM=100

set /p origin=Where is the original folder?(Type absoulute path directly.)
echo origin: %origin%
set backup_origin=%origin%

for /L %%H in (1,1,%MAXNUM%) do (
for /F "delims=\" %%G in ("!origin!") do (
set name=%%G
set origin=!origin:%%G\=!
))
set father=!backup_origin:\%name%=!

xcopy !father!\!name! !father!\backup_!name! /H /K /R /E /D /I /Y
::copy files
rm -rf !father!\!name!
::delete origin
rename !father!\backup_!name! !name!
::rename the new folder using the old's name 
```

如果你的文件是这样的格式`C:\template\example\cstrike\materials\brick`，你应该只输入`c:\template\example`，其中包括`\hl2` `\cstrike`等等。我在 Win7 上工作，你可能不会。所以我建议你将我的批处理文件调整到你的操作系统。在运行之前，
检查你有`xcopy`，，为你工作。T`rm``rename`

# ios - UIview 动画将一个视图覆盖到另一个视图

> ID：11561687
> 
> 赞同：2
> 
> 时间：2012-07-19T13:15:52.230
> 
> 标签：ios

我是新的 iphone 开发人员，我有 ipad 横向模式的 uiview 动画问题。我有两个视图 view1（如拆分视图）和 view2（覆盖的剩余窗口）。当我触摸从右移到左 view2 时，它将用 view1 覆盖移动动画。同时当我触摸从左到右移动 view2 来适应旧位置。请分享你的想法

问候，拉杰什。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:31:45.360

大家好，终于找到答案了

```
- (void)viewDidLoad
{

    UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightSwipeHandle:)];
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
    [recognizer setNumberOfTouchesRequired:1];
    [secondView addGestureRecognizer:recognizer];
    [recognizer release];

    UISwipeGestureRecognizer *recognizerleft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(leftSwipeHandle:)];
    [recognizerleft setDirection:(UISwipeGestureRecognizerDirectionLeft)];
    [recognizerleft setNumberOfTouchesRequired:1];
    [secondView addGestureRecognizer:recognizerleft];
    [recognizerleft release];
    [self.view addSubview:secondView];
    [super viewDidLoad];

}
//To set the frame position of the view

- (void)rightSwipeHandle:(UISwipeGestureRecognizer*)gestureRecognizer
{
    NSLog(@"rightSwipeHandle");

    [UIView beginAnimations:@"viewanimations" context:nil];
    [UIView setAnimationDuration:0.8];
    [UIView setAnimationDelegate:self];

    secondView.frame=CGRectMake(360, 0, 660, 768);
    [UIView commitAnimations];
}

//To set the frame position of the view
- (void)leftSwipeHandle:(UISwipeGestureRecognizer*)gestureRecognizer
{
    NSLog(@"leftSwipeHandle");

    [UIView beginAnimations:@"viewanimations" context:nil];
    [UIView setAnimationDuration:0.8];
    [UIView setAnimationDelegate:self];

    secondView.frame=CGRectMake(200, 0, 858, 768);
    [UIView commitAnimations];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T21:35:15.943

如果我理解正确，你想要两个视图之间的滑动动画。如果是这样：创建一个 ViewController 来保存这两个视图。在此视图控制器的 .m 文件中定义一个转换方法，其中包含以下内容并由您的按钮/其他动作触发器调用：

```
CGFloat windowWidth = self.mainView.frame.size.width;
CGFloat windowHeight = self.mainView.frame.size.height;
CGRect offScreenLeft = CGRectMake(-1*windowWidth, 0.0, windowWidth, windowHeight);
CGRect onScreen = self.mainView.frame;
CGRect offScreenRight =  CGRectMake(windowWidth, 0.0, windowWidth, windowHeight);

if (direction == rightToLeft)
{ 
    rightView.frame = offScreenRight; 
    [self.view addSubview:rightView];
    [UIView animateWithDuration:0.65
                     animations:^{
                         leftView.frame = offScreenLeft;       
                         rightView.frame = onScreen;
                     }
                     completion:^(BOOL finished){
                         [leftView removeFromSuperview];  
                     }];

}else if (direction == leftToRight){
    self.leftViewController.view.frame = offScreenLeft;
    [UIView animateWithDuration:0.65 
                     animations:^{
                         rightView.frame = offScreenRight;
                         leftView.frame = onScreen;
                     }
                     completion:^(BOOL finished){
                         [rightView removeFromSuperview]; 
                     }]; 
    } 
} 
```

一般来说，确保将子视图添加到当前屏幕上的视图中，并确保设置了适当的边界。检查您的视图是否不为零：

```
if(myView){
    //  not nil. thats good
}else {
    //  nil. this is bad. make sure myView is being initialized properly (if at all)
} 
```

最后，确保子视图上的 opacity 和 alpha 属性都没有设置为 0（如果您希望它完全显示，则需要将它们设置为 1，并且在 0 和 1 之间以获得透明效果）。

# c# - 使用 C# 对 LDAP 用户进行身份验证

> ID：11561689
> 
> 赞同：27
> 
> 时间：2012-07-19T13:16:01.793
> 
> 标签：c#, authentication, ldap

我正在使用 DirectorySearcher 在 LDAP 服务器中搜索用户条目。

```
DirectoryEntry de = new DirectoryEntry();
de.Path = "LDAP://myserver/OU=People,O=mycompany";
de.AuthenticationType = AuthenticationTypes.None;

DirectorySearcher deSearch = new DirectorySearcher();

deSearch.SearchRoot = de;
deSearch.Filter = "(uid=" + model.UserName + ")";

SearchResult result = deSearch.FindOne(); 
```

我能够在结果变量中获得预期的输出。
但是，如果我尝试通过在目录条目中提供密码来验证同一用户，我总是会收到以下错误。

“用户名或密码不正确。”

```
DirectoryEntry entry = new DirectoryEntry("LDAP://myserver/OU=People,O=mycompany", username, password);
DirectorySearcher search = new DirectorySearcher(
    entry,
    "(uid=" + username + ")",
    new string[] { "uid" }
);

search.SearchScope = System.DirectoryServices.SearchScope.Subtree;
SearchResult found = search.FindOne();   ->>>>>this is where I get wrong credential error. 
```

用户名和密码用于我要验证的用户。

谁能告诉我我在这里做错了什么或如何调试它。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-19T13:27:49.920

此行中的此用户名、密码：

```
DirectoryEntry("LDAP://myserver/OU=People,O=mycompany", username, password); 
```

应该是具有目录查找权限的帐户。它可以是服务帐户或测试目的，请尝试使用您自己的帐户。这不应该是您尝试进行身份验证的人的用户/通行证。

如果要进行身份验证，可以使用 PrincipalContext 使用以下步骤：

```
using(var context = new PrincipalContext(ContextType.Domain, "mydomain", "mydomain\serviceAcct", "serviceAcctPass")) {
 //Username and password for authentication.
 return context.ValidateCredentials(username, password); 
} 
```

"serviceAcct" = 域用户中具有目录查找权限的帐户。"serviceAcctPass" = 该服务帐户的密码。正如我所说，对于测试，您可以尝试使用自己的用户/通行证上下文。

此外，请确保提供的用户名具有“域\用户名”或“用户名@域”格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-09T07:21:11.430

在这里，我们获取活动目录用户详细信息，我们可以使用 web.config 文件中的 DomainName 和 UserRole

```
bool isAdmin = false;
        RegisterInput model = new RegisterInput();
        NewUserInput usr = new NewUserInput();
        SearchResultCollection results;
        string mobileNumber = string.Empty;
        using (DirectoryEntry domainEntry = new DirectoryEntry("LDAP://" + AppSettings.DomainName))
        {
            using (DirectorySearcher searcher = new DirectorySearcher(domainEntry, "userPrincipalName=" + userName + "@" + AppSettings.DomainName) { Filter = string.Format("(&(objectClass=user)(samaccountname={0}))", userName) })
            {
               results = searcher.FindAll();

                if (results.Count > 0)
                {
                    usr.FirstName = results[0].GetDirectoryEntry().Properties["givenName"].Value.ToString();
                    usr.LastName = results[0].GetDirectoryEntry().Properties["sn"].Value?.ToString();
                    usr.EmailAddress = results[0].GetDirectoryEntry().Properties["mail"].Value?.ToString();
                    mobileNumber = results[0].GetDirectoryEntry().Properties["mobile"]?.Value?.ToString();
                    dynamic userRoleList = results[0].GetDirectoryEntry().Properties["memberOf"];

                    if (userRoleList != null)
                    {
                        foreach (var role in userRoleList)
                        {
                            string[] split = role.ToString().Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries);
                            bool result = split.Any(x => x.ToLowerInvariant() == AppSettings.UserRole.ToLowerInvariant());
                            if (result)
                            {
                                isAdmin = true;
                                break;
                            }
                        }
                    }
                }
            }
        }

        model.NewUser = usr; 
```

# gwt - gwt-上传文件时的文件路径

> ID：11561693
> 
> 赞同：0
> 
> 时间：2012-07-19T13:16:14.650
> 
> 标签：gwt, file-upload

在这里，我坚持简单的概念。在 GWT 中上传文件时如何获取文件路径。例如-(d:/example.xls) 这是我的上传文件。如何以编程方式获取此路径？我试过这个

```
FileUpload ff=New FileUpload();
ff.getFileName(); 
```

当我使用上面的代码时。它只返回example.xls ..帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:28:38.110

您无法从 GWT（和一般的 javascript）访问此信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:29:15.427

我认为，您无法获取已上传文件的绝对路径。完成上传后，路径将不存在或更改以避免安全风险。

您可以使用 getFileName() 函数获取文件的名称，甚至可以使用 HTML5 FileAPI 获取文件的内容。

# python - 使用 Python 下载文件

> ID：11561704
> 
> 赞同：0
> 
> 时间：2012-07-19T13:16:46.393
> 
> 标签：python, download

在网站上选择多个选项后，我必须从网站下载文件。

我有三个复选框，每个复选框都具有相同的名称。我可以像这样使用名称和值来选择一个框。

```
urllib.urlencode({'contentPartnerIds':'67'}) 
```

我需要像这样在同一组中选择另一个复选框。

```
urllib.urlencode({'contentPartnerIds':'67','contentPartnerIds':'68'}) 
```

但这不起作用。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:27:34.627

看看 mechanize 当您需要在页面上处理表单时，它非常棒，而且非常简单。

[http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/)

# java - Jar 通过 Ant 运行，但不是独立的

> ID：11561707
> 
> 赞同：1
> 
> 时间：2012-07-19T13:17:09.713
> 
> 标签：java, ant, jar, nullpointerexception

# 所以，我有一个有趣的问题：

我可以通过包含的 ANT 构建文件运行我的 JAR。它运行，并显示输出，以及各种时髦的东西。现在，如果我尝试通过命令行运行同一个 JAR 文件，`java -jar JARFile.jar`它就会发出声音。它给出了一个`NullPointerException`. 有趣，对吧？

有问题的代码行如下，特别是第 3 行：

```
File dir = new File("media/bgs/");
children = dir.list();
int num = (((int) (Math.random()*children.length)));
String choice = children[num]; 
```

`media/bgs`此代码从 jar 文件和类路径中的文件中选择一个随机背景图像。

提醒：此构建脚本过去创建了可运行的 JAR，目前，这些 JAR 将通过 ANT 构建文件运行。

想法？

## ANT 构建文件

```
<property name="dir.src" value="src" />
<property name="dir.build" value="build" />
<property name="dir.data" value="data" />
<property name="dir.media" value="media" />
<property name="dir.lib" value="lib" />
<property name="dir.dist" value="dist" />
<property name="name.jar" value="EmpView2.jar" />
<property name="jarpath" value="${dir.dist}/${name.jar}" />

<property file="data/build_info.properties" />
<property name="build.number" value="${build.major.number}.${build.minor.number}.${build.revision.number}" />

<path id="build-classpath">
    <pathelement location="${dir.dist}/${name.jar}" />
    <fileset dir="${dir.lib}" includes="**/*.jar" />
    <fileset dir="${dir.src}" includes="**/*.jar" />
    <fileset dir="${dir.data}" includes="**/*" />
    <fileset dir="${dir.media}" includes="**/*" />
</path>

<target name="current-number">
    <echo>Current build number:${build.number}</echo>
</target>

<target name="dist">
    <antcall target="minor">
    </antcall>
</target>

<target name="major">
    <propertyfile file="data/build_info.properties">
        <entry key="build.major.number" type="int" operation="+" value="1" pattern="00" />
        <entry key="build.minor.number" type="int" value="0" pattern="00" />
        <entry key="build.revision.number" type="int" value="0" pattern="00000" />
    </propertyfile>
</target>

<target name="minor">
    <propertyfile file="data/build_info.properties">
        <entry key="build.minor.number" type="int" operation="+" value="1" pattern="00" />
        <entry key="build.revision.number" type="int" value="0" pattern="00000" />
    </propertyfile>
</target>

<target name="revision">
    <propertyfile file="data/build_info.properties">
        <entry key="build.revision.number" type="int" operation="+" value="1" pattern="00000" />
    </propertyfile>
</target>

<target name="all">
    <propertyfile file="data/build_info.properties">
        <entry key="build.major.number" type="int" operation="+" value="1" pattern="00" />
        <entry key="build.minor.number" type="int" operation="+" value="1" pattern="00" />
        <entry key="build.revision.number" type="int" operation="+" value="1" pattern="00000" />
    </propertyfile>
</target>

<target name="clean">
    <delete dir="${dir.build}" failonerror="false" />
    <delete dir="${dir.dist}" failonerror="false" />
</target>

<target name="prepare">
    <mkdir dir="${dir.build}" />
    <mkdir dir="${dir.dist}" />
</target>

<target name="compile" depends="prepare">

    <depend srcDir="${dir.build}" closure="true" />

    <!-- Capture the path as a delimited property using the refid attribute -->
    <property name="myclasspath" refid="build-classpath" />
    <!-- Emit the property to the ant console -->
    <echo message="Classpath = ${myclasspath}" />

    <javac srcdir="${dir.src}" destdir="${dir.build}" classpathref="build-classpath" debug="on" includeantruntime="true" />

    <unzip dest="${dir.build}">
        <fileset dir="${dir.lib}" includes="**/*.zip" />
        <fileset dir="${dir.lib}" includes="**/*.jar" />
    </unzip>

</target>

<target name="jar" depends="compile">

    <manifestclasspath property="lib.list" jarfile="${dir.dist}/${name.jar}">
        <classpath refid="build-classpath" />
    </manifestclasspath>

    <antcall target="revision" />

    <jar destfile="${jarpath}" basedir="." includes="${dir.lib}/*" filesetmanifest="mergewithoutmain">
        <manifest>
            <attribute name="Main-Class" value="com.baesystems.ev2.EmpowerView" />
            <attribute name="Class-Path" value="${lib.list}" />
        </manifest>
        <fileset dir="${dir.build}" includes="**/*" excludes="META-INF/*.SF" />
        <fileset dir="." includes="${dir.media}/**/*" />
        <fileset dir="." includes="${dir.data}/*" />
    </jar>

    <chmod file="${dir.dist}/${name.jar}" perm="+x" />
</target>

<target name="run">
    <echo message="Attempting to run!" />
    <java jar="${jarpath}" fork="true" />
    <echo message="JAR launched." />
</target>

<target name="compile-jar-run">
    <antcall target="jar" />
    <antcall target="run" />
</target>

<target name="clean-compile-jar-run">
    <antcall target="clean" />
    <antcall target="compile-jar-run" />
</target> 
```

# php - 单体模型

> ID：11561715
> 
> 赞同：4
> 
> 时间：2012-07-19T13:17:29.607
> 
> 标签：php, mysql, model-view-controller

# 背景

这是一个漫长而复杂的问题。我使用 php/MySQL 作为示例（因为它是一个实际示例），但这在理论上可以适用于其他语言。忍受我。

## 没有 ORM 的 MVC 框架

我正在创建一个使用自己的框架的应用程序。由于各种原因，不接受以下对此问题的回答：

*   为什么不直接使用`X`框架？
*   为什么不直接使用`X`ORM？

该应用程序执行自己的查询（由我编写），这就是我现在希望它保留的方式。

## 商业逻辑？

“业务逻辑”似乎是一个毫无意义的流行词，但我认为它本质上是指

> 查询和基于这些查询构建结果集的逻辑

我还读到 MVC 中的模型应该执行所有业务逻辑。

## `User.php`是 884 行

现在我已经让我的应用程序运行得很好，我想对其进行重构，以免出现这种可憎的情况。 `User.php`本质上是用户的模型（显然）。我在其中看到了一些我可以轻松摆脱的责任，但我遇到的一个主要障碍是：

**如何协调 SOLID 与 MVC？**

`User.php`增长如此之大的原因是因为我执行的任何查询都需要该文件中的用户成员。用户用于大量操作（它需要做的不仅仅是`CRUD`），因此任何需要`userid`,`username`等的查询都由该文件中的函数运行。显然查询应该在模型中（而不是控制器），但我觉得这绝对应该以某种方式分开。我需要完成以下工作：

*   创建一个 API，以划分的方式涵盖所有这些必要的查询
*   避免在不必要时授予对 DB 连接类的访问权限
*   `User`向视图添加数据（`User.php`现在正在这样做——视图对象是由 setter 注入的，我认为这也很糟糕）。

...所以我可以做的是创建其他对象，例如`UserBranchManager`, `UserSiteManager`,`UserTagManager`等，每个对象都可以有相关的查询和注入的 DB 对象来运行这些查询，但是他们如何获得`User::$userid`他们需要运行的令人垂涎的东西这些查询？不仅如此，我怎么能通过`Branch::$branchid`？这些成员不应该是私人的吗？为它们添加吸气剂也使这毫无意义。

我也不确定在哪里画出一个物体应该做多少的界限。许多操作相似但仍然不同。每个人的一个类将是巨大的矫枉过正。

# 可能的答案

如果我无法获得任何帮助，我会做（或至少尝试做）是为上面的对象（例如）构建某种依赖注入容器`UserBranchManager`并将它们注入相关控制器。这些将有一个`DB`和`Query`对象。该`Query`对象可以传递给低级模型（如`User`）以根据需要绑定参数，而更高级别的模型或它们所调用的任何东西都会将结果返回给控制器，控制器也会根据需要将数据添加到模板中。我看到的一些可能的障碍是创建适当的合约（例如，`UserController`最好依赖于用户模型的一些抽象），但不可避免地需要一些细节，尤其是在视图方面。

谁能提供一些智慧来回答我漫无边际的问题？

# 回复@tereško

他不仅在这里提供了一个很好的答案，而且还在[How should a model be structure in MVC?](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc)

## 代码

根据要求，这里有一些极其精简的代码（基本上服务于一个请求）。一些重要的注意事项：

*   现在，控制器不是类，只是文件
    *   控制器还处理很多路由
*   没有“视图”对象，只有模板
*   这可能看起来很糟糕

这些也是需要改进的地方，但我最担心的是模型（`User`特别是因为它失控了）：

```
#usr.php -- controller
$route = route();
$user = '';
$branch = '<TRUNK>';
if (count($route) > 0) {
   if (count($route) > 1) {
      list($user, $branch) = $route;
   }
   else {
      list($user) = $route;
   }
}

$dec = new Decorator('user');
$dec->css('user');

if (isset($_SESSION['user']) && $_SESSION['user']->is($user)) {
   $usr = $_SESSION['user'];
}
else {
   $usr = new User(new DB, $user);
}
$usr->setUpTemplate($dec, $branch);
return $dec->execute();

# User.php -- model
class User {
   private $userid;
   private $username;
   private $db;

   public function __construct(DB $db, $username = null) {
      $this->username = $username;
      $this->db = $DB;
   }

   public function is($user) {
      return strtolower($this->username) === strtolower($user);
   }

   public function setUpTemplate(Decorator $dec, $branch) {
      $dec->_title = "$this->username $branch";
      // This function runs a moderately complicated query
      // joining the branch name and this user id/name
      $dec->branch = $this->getBranchDisplay($branch);
   }
} 
```

## 关于答案的问题

在这里回答：

*   您谈论离开缓存/身份验证/授权。这些重要吗？为什么他们不被覆盖？它们与模型/控制器/路由器有什么关系？
*   该`Data Mapper`示例具有具有诸如..之`Person`类的方法的类`getExemption`，这些是什么？`isFlaggedForAudit`这些计算似乎需要数据库数据，那么它是如何获得它们的呢？ `Person Mapper`离开`select`。这不重要吗？
*   什么是“领域逻辑”？

回答 5863870（特别是代码示例）：

*   这些工厂对象不应该是抽象（而不是依赖于通过创建`new`）还是这些是特殊的？
*   您的 API 如何包含必要的定义文件？
*   我已经阅读了很多关于在构造函数中注入依赖项的最佳方式（如果它们是强制性的）。我假设您以这种方式设置工厂，但为什么不是对象/映射器/服务本身呢？抽象呢？
*   您是否担心代码重复（例如，大多数模型`_object_factory`在其类定义中需要一个成员）？如果是这样，你怎么能避免这种情况？
*   你正在使用`protected`. 为什么？

如果您可以提供任何特定的代码示例，那将是最好的，因为这样我更容易拿起东西。

我理解你的回答所说的理论，这很有帮助。我仍然感兴趣（但不完全确定）的是确保以最佳方式处理此 API 中对象的依赖关系（最糟糕的方式`new`无处不在）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:39:47.387

不要混淆 SOLID（你可以在我的博客上得到一个很好的解释：http: [//crazycoders.net/2012/03/confoo-2012-make-your-project-solid/](http://crazycoders.net/2012/03/confoo-2012-make-your-project-solid/)

在考虑围绕您尝试构建的应用程序的框架时，SOLID 非常棒。数据本身的管理是另一回事。您不能真正将 SOLID 的 S 的单一职责应用于依赖于其他业务模型（例如用户、组和权限）的业务模型。

因此，当您构建应用程序时，您必须释放一些 SOLID。SOLID 的好处是确保您的应用程序背后的框架是强大的。

例如，如果您构建自己的框架和业务模型，您可能会有一个基类 MODEL 另一个用于 DATABASEACCESS，只要记住您的 MODEL 不应该知道如何获取数据，只需知道它必须获取数据。

例如：

```
Good: 
    - MyApp_Models_User extends MyApp_Framework_Model
    - MyApp_Models_Group extends MyApp_Framework_Model
    - MyApp_Models_Permission extends MyApp_Framework_Model
    - MyApp_Framework_Model
    - MyApp_Framework_Provider
    - MyApp_Framework_MysqliProvider extends MyApp_Framework_Provider

      In this good part, you create a model like this:
      $user = new MyApp_Models_User(new MyApp_Framework_MysqliProvider(...));
      $user->load(1234); 
```

这样，您将防止单一责任的失败，您的提供者用于从存在的众多提供者之一加载数据，并且您的模型代表您提取的数据，它不知道如何读取或写入数据，这就是提供者的工作......

```
Bad way:
    - MyApp_Model_User
    - MyApp_Model_Group
    - MyApp_Model_Permission

      define('MyDB',   'localhost');
      define('MyUser', 'user');
      define('MyPass', 'pass');
      $user = new MyApp_Models_User(1234); 
```

使用这种糟糕的方法，你首先打破了单一的责任，你的模型代表了一些东西，还管理了数据的输入/输出。此外，您通过声明您需要为模型定义常量以连接到数据库并完全抽象数据库方法来创建依赖项，如果您需要更改它们并拥有 37 个模型，您将有大量工作要做...

现在，如果你想以糟糕的方式工作，你可以……我仍然这样做，我知道，但有时，当你有蹩脚的结构并想要重构时，你可以而且应该违背一个原则，只是为了正确而缓慢地重构，然后，再重构一点，最终得到一些 SOLID 和 MVC 外观。

请记住，SOLID 并不适用于所有事情，它只是一个指导方针，但它是非常非常好的指导方针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:41:19.830

好吧..这取决于`./user.php`文件中的实际内容。如果我不得不猜测，你会遇到这样的情况，你的用户“模型”有太多的责任。基本上，您违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，并且不确定如何解决该问题。

*你没有提供任何代码..所以，让我们继续猜测......*

您的用户“模型”可能正在实施[活动记录](http://www.martinfowler.com/eaaCatalog/activeRecord.html)模式。这将是 SRP 问题的主要来源。您可以观看[这部分的讲座](http://www.youtube.com/watch?v=XY2HP9c2O0o&feature=player_detailpage#t=1830s) ^([**幻灯片**](http://www.slideshare.net/BachkoutouToutou/confoo-2011-advanced-oo-patterns/69))。它将解释其中的一部分。重点将是使用类似于[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)模式的东西，而不是使用活动记录。

此外，您可能会注意到一些适用于`User`类实例的域逻辑似乎发生在您的“模型”之外。以不同的结构分离该部分可能是有益的。否则，您将强制控制器内部的域逻辑。也许[这个评论](https://stackoverflow.com/a/5864000/727208)可以对整个主题有所启发。

您可能在用户“模型”中塞满的另一件事可能是授权（不要与身份验证混淆）机制的一部分。[将这一责任分开](https://stackoverflow.com/a/9685039/727208)可能是务实的。

## 更新

*   **您谈论离开缓存/身份验证/授权。这些重要吗？为什么他们不被覆盖？它们与模型/控制器/路由器有什么关系？**

    **缓存**是您稍后将在应用程序中添加的东西。域对象不关心数据来自哪里。因此，您可以在服务级别对象或现有数据映射器中添加缓存。我建议选择前一个选项，因为更改现有映射器可能会产生无法预料的副作用。而且因为它只会使现有的映射器过于复杂。

    ```
    namespace Application\Service;

    class Community{

        public function getUserDetails( $uid )
        {
            $user = $this->domainObjectFactory->build('User');
            $cache = $this->cacheFactory->build('User');

            $user->setId( $uid );

            try
            {
                $cache->pull( $user );
            }
            cache( NotFoundException $e)
            { 
                $mapper = $this->mapperFactory->build('User');
                $mapper->pull( $user );
                $cache->push( $user );
            }

            return $user->getDetails();

        }
    } 
    ```

    这将说明基于用户 ID 的非常简化的用户信息获取。该代码创建域对象并为其提供 ID，然后将此`$user`对象用作搜索缓存详细信息的条件，或者，如果失败，则通过数据映射器从数据库中提取该信息。此外，如果成功，则将详细信息推送到缓存中，以备下次使用。

    您可能会注意到，当映射器在存储（通常 - SQL 数据库）中找不到具有此类 ID 的用户时，此示例未处理这种情况。正如我所说，这是一个简化的示例。

    此外，您可能会注意到，可以根据具体情况轻松添加这种缓存，并且不会彻底改变您的逻辑行为方式。

    **授权**是另一部分，它不应该直接影响您的业务逻辑。我已经链接了我提供身份验证[的首选方式。](https://stackoverflow.com/a/9685039/727208)这个想法是，不是检查控制器内部的凭据（如[这里](http://symfony.com/doc/current/book/security.html#securing-a-controller)、[这里](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#access-control-filter)、[这里](http://jondavidjohn.com/blog/2011/01/scalable-login-system-for-codeigniter-ion_auth)或[这里](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#authorization)），而是在控制器上执行方法之前检查访问权限。这样，您就可以使用其他选项来处理拒绝访问，而不会被困在特定的控制器中。

*   **Data Mapper 示例的类具有诸如..之`Person`类的方法`getExemption()`，它们是什么？`isFlaggedForAudit()`这些计算似乎需要数据库数据，那么它是如何获得它们的呢？`Person Mapper`离开选择。这不重要吗？**

    该类`Person`是一个[域对象](http://c2.com/cgi/wiki?DomainObject)。它将包含与该实体直接关联的域逻辑部分。

    对于要执行的那些方法，映射器应该首先加载数据。在 PHP 中，它看起来像这样：

    ```
    $person = new Person;
    $mapper = new PersonMapper( $databaseConnection );

    $person->setId( $id );
    $mapper->fetch( $person );

    if ( $person->isFlaggedForAudit() )
    {
        return $person->getTaxableEearnings();
    } 
    ```

    中的方法名称`PersonMapper`作为示例，以便您了解该类应该如何使用。我通常命名方法`fetch()`，`store()`并且`remove()`（或 push/pull/remove ...取决于我使用了多少 GIT）。恕我直言，没有必要单独使用`update()`和`insert()`方法。如果对象的数据最初是由 mapper 检索的，那么它是一个`UPDATE`. 如果不是 - 它是一个`INSERT`. 您还可以确定它对应的值是否`PRIMARY KEY`已设置（在某些情况下，至少）。

*   **什么是“领域逻辑”？**

    它是代码的一部分，它知道如何创建发票并为特定产品应用折扣价。这也是确保您不提交注册表单的代码，您不声明您出生于 1592 年。

    MVC 由两层组成：表示层（可以包含：视图、模板、控制器）和模型层（可以包含：服务、域对象、映射器）。表示层处理用户交互和响应。模型层处理业务和验证规则。你可以说领域业务逻辑是模型中的一切，不涉及存储。

    我想没有简单的方法可以解释。

*   **这些工厂对象不应该是抽象（而不是依赖于通过 new 创建）还是这些是特殊的？**

    哪些“工厂对象”，在哪里？你说的是这个片段吗？

    ```
    $serviceFactory = new ServiceFactory(
        new DataMapperFactory( $dbhProvider ),
        new DomainObjectFactory
        );
    $serviceFactory->setDefaultNamespace('Application\\Service'); 
    ```

    整个代码片段应该在`bootstrap.php`文件中（或者您可能正在使用`index.php`或`init.php`为此）。它是应用程序的入口点。它不是任何类的一部分，因此你不能在那里“紧密耦合”。没有什么可以“耦合”的。

*   **您的 API 如何包含必要的定义文件？**

    该片段不是整个`bootstrap.php`文件。上面的代码是自动加载器的包含和初始化。我目前正在使用动态加载器，它允许来自同一命名空间的类位于不同的文件夹中。

    此外，这种自动加载器是开发阶段的工件。在生产代码中，您必须使用加载器，它与预定义的哈希表一起使用，并且不需要实际*遍历*命名空间和位置树。

*   **我已经阅读了很多关于在构造函数中注入依赖项的最佳方式（如果它们是强制性的）。我假设您以这种方式设置工厂，但为什么不是对象/映射器/服务本身呢？抽象呢？**

    你在说什么 ？！？

*   **您是否担心代码重复（例如，大多数模型在其类定义中需要 _object_factory 成员）？如果是这样，你怎么能避免这种情况？**

    你真的看过**评论**中的代码片段有多久了？！？！？

*   **您正在使用受保护的。为什么？**

    因为，如果值/方法是用`protected`可见性定义的，您可以在扩展原始类时访问它们。此外，**该代码示例是为旧版本的 answer 制作的**。检查日期。

和不。我不会提供任何具体的代码示例。因为每个情况都不一样。如果您想进行复制粘贴开发，请使用 CakePHP 或 CodeIgniter。

# scala - 有没有一种快速的方法来显示在 Scala 控制台中声明的方法的代码？

> ID：11561719
> 
> 赞同：6
> 
> 时间：2012-07-19T13:17:35.813
> 
> 标签：scala, console, read-eval-print-loop

在我将代码实际写入项目之前，我经常使用 Scala 控制台来评估和测试代码。如果我想知道一个变量的内容，我可以输入它然后 scala 计算它。但是还有一种方法可以显示我输入的方法代码吗？

我知道有显示单行的 UP 键，但我正在寻找的是一次显示整个代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:28:39.127

在您的主目录中有一个名为的文件`.scala_history`，其中包含您最近的所有 REPL 历史记录。我经常从这个文件中复制并粘贴代码到项目源文件中。它与在 REPL 中显示单个方法的代码并不完全相同，但它可能会帮助您实现相同的目标。

有关REPL 中一些相关功能的讨论（历史中的分组语句），请参阅[本期](https://issues.scala-lang.org/browse/SI-1067)Paul Phillips 的评论：

> 在某些时候，我实现了这个逻辑，但真正的障碍是 jline。在最简单的条件下确定光标所在的位置已经很麻烦了。开始将大的多行块投入历史，它会流泪。希望看到社区解决这个问题和 SI-2547。
> 
> ...
> 
> 我也希望尽快解决这个问题，但这取决于最近 jline 工作的进展情况。我很久以前就实现了，显示问题是障碍。

这两个评论都超过两年了，所以我不会屏住呼吸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:26:48.657

我不知道从命令行加载所有代码的命令。您可以做的是`:load path/to/my/file.scala`加载一些复杂的代码，并`:load`在您更改文件中的代码时重新加载。

# linux - 从文本文件中检索信息。Linux

> ID：11561720
> 
> 赞同：0
> 
> 时间：2012-07-19T13:17:37.720
> 
> 标签：linux, bash, shell, unix, scripting

基本上，我试图从三个包含唯一信息的文本文件中读取信息。

文本文件的设置方式是这样的：

```
textA.txt
----------------
something.awesome.com
something2.awesome.com
something3.awesome.com
...

textB.txt
----------------
123
456
789
...

textC.txt
----------------
12.345.678.909
87.65.432.1
102.254.326.12
.... 
```

现在当我输出这样的东西时它的样子

```
something.awesome.com : 123 : 12.345.678.909
something2.awesome.com : 456 : 87.65.432.1
something3.awesome.com : 789 : 102.254.326.12 
```

我现在尝试的代码是这样的：

```
for each in `cat site.txt` ; do
    site=`echo $each | cut -f1`

    for line in `cat port.txt` ; do
        port=`echo $line | cut -f1`

        for this in `cat ip.txt` ; do
            connect=`echo $this | cut -f1`

            echo "$site : $port : $connect"
        done
    done
done 
```

我得到的结果是疯狂的错误，而不是我想要的。我不知道如何解决这个问题。

**我希望能够通过变量形式调用信息。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:22:47.130

```
paste testA.txt testB.txt testC.txt | sed -e 's/\t/ : /g' 
```

输出是：

```
something.awesome.com : 123 : 12.345.678.909
something2.awesome.com : 456 : 87.65.432.1
something3.awesome.com : 789 : 102.254.326.12

```

**编辑：**这是使用 pure 的解决方案`bash`：

```
#!/bin/bash                                                                                                                         

exec 7<testA.txt
exec 8<testB.txt
exec 9<testC.txt

while true
do
    read site <&7
    read port <&8
    read connect <&9

    [ -z "$site" ] && break

    echo "$site : $port : $connect"
done

exec 7>&-
exec 8>&-
exec 9>&- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:24:23.577

你看过使用[paste](http://www.manpagez.com/man/1/paste/)吗？

例如

```
$ paste testA.txt testB.txt 
```

等等。**-d**运算符将指定一个分隔符。

一个相关的实用程序是类似 SQL 的[join](http://linux.die.net/man/1/join)，您可以在必须使用输入文件共有的字段进行连接的场景中使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T06:57:50.417

```
head -2 /etc/hosts | tail -1 | awk '{print$2}' 
```

文件名在哪里`/etc/hosts`。
`(head -2 )`用于从文件中检索前 2 行。
`(tail -1)`用于仅检索从 输出的最后一行`(head -2)`。
`(awk '{print$2}')`用于打印从 输出的行的第二列`(tail -1)`。

# python - Django：ModelState 的作用是什么？

> ID：11561722
> 
> 赞同：27
> 
> 时间：2012-07-19T13:17:41.920
> 
> 标签：python, django, django-models

很抱歉这不是编程问题，但是当我试图反省我的类对象时，这引起了我的注意。

我找到了这个

```
{'user_id': 1, '_state': <django.db.models.base.ModelState object at 0x10ac2a750>, 'id': 2, 'playlist_id': 8} 
```

有什么作用`_state`和作用是什么`ModelState`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-19T13:33:41.277

从 Django 源代码中，[_state](https://github.com/django/django/blob/1.5/django/db/models/base.py#L330)是在每个模型实例中定义的实例变量，该实例[`ModelState`](https://github.com/django/django/blob/1.5/django/db/models/base.py#L311)定义为：

```
class ModelState(object):
    """
    A class for storing instance state
    """
    def __init__(self, db=None):
        self.db = db
        # If true, uniqueness validation checks will consider this a new, as-yet-unsaved object.
        # Necessary for correct validation of new instances of objects with explicit (non-auto) PKs.
        # This impacts validation only; it has no effect on the actual save.
        self.adding = True 
```

所以基本上这个实例变量是用来知道`Model`实例是否已经被写入一个`db`（知道Django支持多个db后端）并保存`db`使用的，这个实例变量属性在[保存模型实例](https://github.com/django/django/blob/1.5/django/db/models/base.py#L659)`adding`后设置为false ，它主要使用（如上面代码中的注释）用于验证[主键是否是唯一的](https://github.com/django/django/blob/1.5/django/db/models/base.py#L806)。

# c++ - 类中的成员对象，称为父构造函数

> ID：11561725
> 
> 赞同：-2
> 
> 时间：2012-07-19T13:18:01.713
> 
> 标签：c++, class, object, constructor, member

在我的 .h 中，我有这样的东西：

```
 class Cbeckhoff_frontendDlg : public CDialogEx
    {
    // construction
    public:
    Cbeckhoff_frontendDlg(CWnd* pParent = NULL);
    //...
    //this is the member object I want to create
    Modul test;
    }; 
```

我的 .cpp 看起来像这样：

```
 Cbeckhoff_frontendDlg::Cbeckhoff_frontendDlg(CWnd* pParent /*=NULL*/)
    : CDialogEx(Cbeckhoff_frontendDlg::IDD, pParent)
    {
    //..
    };
    //and should look like this:
    Cbeckhoff_frontendDlg::Cbeckhoff_frontendDlg(CWnd* pParent /*=NULL*/)
    : CDialogEx(Cbeckhoff_frontendDlg::IDD, pParent),test()
    {
    //..
    }; 
```

我搞砸了我试图在这里发布的前一个测试用例，对此我很抱歉。我想我不太明白那里发生了什么。我假设 Cbeckhoff_frontendDlg 启动父级 CDialogEx- 构造函数，但我也想启动我自己的构造函数测试。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:26:11.277

如果`Modul`有一个默认构造函数并且您不想使用另一个构造函数，则以下内容就足够了：

```
Cbeckhoff_frontendDlg::Cbeckhoff_frontendDlg(CWnd* pParent /*=NULL*/)
    : CDialogEx(Cbeckhoff_frontendDlg::IDD, pParent) {} 
```

如果你想使用另一个构造函数（例如，一个接收整数），你可以这样做：

```
Cbeckhoff_frontendDlg::Cbeckhoff_frontendDlg(CWnd* pParent /*=NULL*/)
    : CDialogEx(Cbeckhoff_frontendDlg::IDD, pParent), test(some_integer) {} 
```

**编辑：**至于分号，您不应在方法主体后使用分号：

```
class Foo {
    Foo() {
        // ...
    } // <- no semicolon

    void bar() {
        // ...
    } // <- no semicolon
}; // <- at the end of a class you need a semicolon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:00:44.173

如果我正确理解您的代码，您的 Modul 类有一个构造函数，该构造函数接受 Cbeckhoff_frontendDlg* 的参数，该参数具有 Modul 类型的成员。您是否在 Modul.h 文件中转发声明了 Cbeckhoff_frontendDlg 类？

编辑再次查看您的代码，我认为您还没有看到一些错误。你说主类没有编译，因为 modul 是未定义的。我原以为 Modul 中也会出现编译错误，说 Cbeckhoff_frontendDlg 没有定义。因此，您可能没有编译 Modul 文件，**或者**“Modul.h”文件中没有替代构造函数的声明。
如果我是您，我会仔细检查您认为正在编译的所有内容 IS 正在编译做一个干净的构建。

# c# - 将 tabItems-.Header 添加到列表

> ID：11561726
> 
> 赞同：-2
> 
> 时间：2012-07-19T13:18:07.903
> 
> 标签：c#, tabcontrol, tabitem

`TabItems`我有多个`TabControl`；`tabItem1`, `tabItem2`, `tabItem3`...这些是`CloseableTabItem`。如果所有的 tabitems 都是 aktive，我怎么能把它添加`tabItem.Header`到一个`List<string>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:22:09.747

```
 List<string> listItems = new List<string>();

        foreach (TabItem item in tabControl1.Items)
        {
            if (item.IsEnabled)
                listItems.Add(item.Header.ToString());
        } 
```

# iphone - 在 iOS 应用程序中更改语言设置

> ID：11561727
> 
> 赞同：0
> 
> 时间：2012-07-19T13:18:23.667
> 
> 标签：iphone, objective-c, ios, xcode

我有一个表格视图和 2 个静态组，其中一个包含语言，我想在我的应用程序设置中有 2 种语言英语和法语，当用户选择英语时，整个设置更改为英语，当用户选择法语时一切都更改为法语，请您帮助我，我看到了一些示例，但我不知道如何设置以及应该在哪里设置代码，我应该如何将代码连接到我的复选标记单元格！

提前致谢！

这是我的设置图片：

![在此处输入图像描述](../Images/ae6c6c9e822e8bd9605f0a4d81ee7e32.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:50:24.463

1.  为所有 xib（标签、文本字段）中的所有文本对象提供出口。这将允许您访问它们以更改它们的值（例如，将文本字段的占位符从“First name”更改为“Prénom”）。
2.  制作一个 .plist 文件，其中包含英文内容的键和值（您可以使用 outlet 的名称作为键），另一个用于法文内容。
3.  保留一个默认值，例如`myLanguageIndicator`（在 NSUserDefaults 中），它将保存您当前的语言，并且在您设置语言时将分别更改。
4.  根据您的默认值（如果是“eng”或“fr”），在每个类中，在 viewWillAppear 中，通过读取所需的 .plist 文件来设置您的网点的值。

假设您的默认语言值为“fr”。这意味着您将在 viewWillAppear 中使用 fr.plist（或任何您命名的名称）。“titleLabel”是您的一个控制器中标题标签的出口。

在另一个默认对象中，您保留了 fr.plist 的字典（谷歌如何将 plist 加载到字典中）。

然后你说：

```
if ([myLanguageIndicator isEqualToString:@"fr"]){
      titleLabel.text = [myFrenchDictionary objectForKey:@"titleLabel"];
   ... ... ...change here all your outlets to french values
   }
   else{
      titleLabel.text = [myEnglishDictionary objectForKey:@"titleLabel"];
       ... ... ...change here all your outlets to english values
   } 
```

当您选择语言时，只需将默认字符串对象更改`myLanguageIndicator`为`@"fr"`or `@"eng"`，具体取决于您选择的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:48:15.880

首先你从这段代码中得到语言代码

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSArray *languages = [defaults objectForKey:@"AppleLanguages"];
NSString *currentLanguage = [languages objectAtIndex:0]; 
```

2) 制作本地化字符串文件

3）使用这个 `NSLocalizedString(@"WelcomeKey", @"")`

例子：

```
 NSString *example=@"";

    if([currentLanguage isEqualToString:@"en"])
    {
      example =  NSLocalizedString(@"WelcomeKey", @"Engliah");
    }

    else {
      example =  NSLocalizedString(@"WelcomeKey", @"french");
    } 
```

# jquery - Jquery & Ajax 用于数据检索，用于 highcharts 实现 + HTML

> ID：11561735
> 
> 赞同：1
> 
> 时间：2012-07-19T13:18:34.867
> 
> 标签：jquery, html, ajax, highcharts

我必须绘制来自 ajax 请求的时间和价值图，我需要知道如何将数据显示到 highcharts，请找到以下代码：

## 获取数据的 JSP：

```
<%@ page import = "com.qdx.eqc.vo.*, com.qdx.eqc.proxy.EQCProxyClient, java.util.*" %>
<%

    System.out.println("Inside landingAjax.jsp");
    String productionID = request.getParameter("productionID");
    System.out.println("productionID = "+productionID);
    String instrumentID = request.getParameter("instrumentID");
    System.out.println("instrumentID = "+instrumentID);
    String testId = request.getParameter("testId");
    System.out.println("testId = "+testId);
    String instrType = request.getParameter("instrType");
    System.out.println("instrType = "+instrType);
    String testInstrTypeId = request.getParameter("testInstrTypeId");
    System.out.println("testInstrTypeId = "+testInstrTypeId);
    String departmentId = request.getParameter("departmentId");
    System.out.println("departmentId = "+departmentId);

    EQCProxyClient client = new EQCProxyClient();
    ResponseVO responseVO = null;

    //Graph data for patinetbias START
    responseVO = client.getPatientBiasData(productionID,instrumentID,testId,instrType,testInstrTypeId,"7.0",departmentId);
    ArrayList xAxis = new ArrayList();
    ArrayList lines = new ArrayList();
    ArrayList dateTime = new ArrayList();
    ArrayList doubleValue = new ArrayList();
    Date duration = new Date();
    Iterator itt=responseVO.getResponse().iterator();
    while(itt.hasNext()){
        PatientBiasDataVO po = (PatientBiasDataVO)itt.next();
        xAxis = po.getPatientBiasData();
        Iterator biasItr = xAxis.iterator();                                                    
                while(biasItr.hasNext())
                {
                    BiasDataVO biasData = (BiasDataVO)biasItr.next();
                    if(biasData.getStrDateTime()!=null)
                    {
                    dateTime.add(biasData.getStrDateTime());

                    }
                    doubleValue.add(biasData.getValue());

                }
        lines = po.getVerticalLines();
        duration = po.getDateTime();
        System.out.println(" xAxis "+ xAxis + " lines " + lines + "duration" + duration );
    }
    out.print(doubleValue.toString()+','+dateTime.toString()); /// THESE IS THE GRAPH DATA as VALUE AND TIME 
```

%>

## 用于 AJAX 和 HIGHCHARTS 的 JAVASCRIPT：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function(){alert('came in');
           var options = {
                    chart: {
                        renderTo: 'right1',
                        type: 'spline',
                        marginRight: 10,
                    },
                    credits: {
                        enabled: false
                    },
                    title: {
                        text: 'Patient Bias Display'

                    },
                    xAxis: {
                        type: 'datetime',
                        tickPixelInterval: 150
                    },
                    yAxis: {
                        title: {
                            text: 'Bias'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },
                    tooltip: {
                        formatter: function() {
                                return '<b>'+ this.series.name +'</b><br/>'+
                                Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+
                                Highcharts.numberFormat(this.y, 2);
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    exporting: {
                        enabled: false
                    },
                    plotOptions: {
                        color: '#F3F70E'
                    },
                    series: []

            };

           var productionID = document.getElementById('productionID').value;
           var instrumentID = document.getElementById('instrumentID').value;
           var testId = document.getElementById('testId').value
           var instrType = document.getElementById('instrType').value;
           var testInstrTypeId = document.getElementById('testInstrTypeId').value;
           var departmentId = document.getElementById('departmentId').value;

            var url = "landingAjax.jsp";
            url = url+"?productionID="+productionID+"&instrumentID="+instrumentID+"&testId="+testId+"&instrType="+instrType+"&testInstrTypeId="+testInstrTypeId+"&departmentId="+departmentId;
            alert(url);
            $('#highCharts').click(function() {alert('clicked'); // CLICKED is alerted
                $.getJSON(url, function(data) {alert(url);    //THis alert doesnt work 
```

如何在 X 轴和 Y 轴中填充数据？
变种系列= {数据：[]}；

```
 options.series.push(series);

                    var chart = new Highcharts.Chart(options);
                });
            });
    });
    </script> 
```

我需要知道如何在 x 和 y 轴上累积数据来绘制图表，请参阅我上面的评论。

帮帮我，伙计们..如果有什么不明白的；请在评论中......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:43:23.650

这是我的做法……你可能会找到更好的方法

*   我对服务器进行 javascript ajax 调用
*   将您的图表放在一个函数中，将其称为任何 thisng`drawchart()`
*   将您的回调传递给该函数

*注意*

要填充 x 轴，您最终需要得到一个数组，如下所示

```
 xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    }, 
```

对于这个数组中的每个元素，您需要将一个值传递给您的`series` `data[1,2,3,....]`

**例子**

```
 $.ajax({
            type: "POST",
            url: "YOUR WEB SERVICE ",
            data: "",
            dataType: "json",
            contentType: "application/json; charset=utf-8",

            success: function (myvalue) { 
               drawchart(myvalue) ; 

              }}); 
```

你还需要阅读[这个](http://www.highcharts.com/documentation/how-to-use)

# sql - 从三个不同的查询中获取最大数量

> ID：11561740
> 
> 赞同：0
> 
> 时间：2012-07-19T13:18:44.457
> 
> 标签：sql, oracle

我有 3 个查询，它们根据条件检索最大值。

```
select max(to_number(substr(attr_value,9)))+1 
  from circ_inst inner
  join circ_attr_settings 
    on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id 
   and val_attr_inst_id=1045 
 where circ_attr_settings.attr_value like 'IPANEMA-%' 

select max(to_number(substr(attr_value,10)))+1 
  from circ_inst inner
  join circ_attr_settings 
    on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id 
   and val_attr_inst_id=1045 
 where circ_attr_settings.attr_value like 'FIREWALL-%'

select max(to_number(substr(attr_value,16)))+1 
  from circ_inst 
 inner join circ_attr_settings
    on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id
   and val_attr_inst_id=1045 
 where circ_attr_settings.attr_value like 'LAYER2 SWITCH-%' 
```

我想从这 3 个查询中获得最大数量（如果 3 个查询的结果分别为 6430、6434 和 6418，那么我想获得值“6434”，这是三个结果中的最大值。

我尝试使用`max(query1,query2,query3)`但不成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:23:47.813

我认为您可以通过一个查询来做到这一点：

```
select max(to_number(substr(attr_value,instr(attr_value, '-')+1)))+1
from circ_inst inner join
     circ_attr_settings
     on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id and
        val_attr_inst_id=1045
where circ_attr_settings.attr_value like 'LAYER 2 SWITCH-%') or
      circ_attr_settings.attr_value like 'IPANEMA-%' or
      circ_attr_settings.attr_value like 'FIREWALL-%' 
```

您的联接似乎都是相同的。唯一的区别是提取数字。您可以通过在值中查找“-”来获得正确的起始位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:23:56.020

你也许可以这样做：

```
select greatest (
(select max(to_number(substr(attr_value,9)))+1 from circ_inst inner join circ_attr_settings on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id and val_attr_inst_id=1045 where circ_attr_settings.attr_value like 'IPANEMA-%'),
(select max(to_number(substr(attr_value,10)))+1 from circ_inst inner join circ_attr_settings on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id and val_attr_inst_id=1045 where circ_attr_settings.attr_value like 'FIREWALL-%'),
(select max(to_number(substr(attr_value,16)))+1 from circ_inst inner join circ_attr_settings on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id and val_attr_inst_id=1045 where circ_attr_settings.attr_value like 'LAYER 2 SWITCH-%')
) from dual; 
```

# javascript - 用于 windows 的 node.js 和 Cygein，我如何运行代码？

> ID：11561741
> 
> 赞同：0
> 
> 时间：2012-07-19T13:18:44.353
> 
> 标签：javascript, windows, node.js, cygwin

我已经安装了 WAMP 和 cygwin。从 cygwin 我正在尝试运行我制作的 .js 但我不知道将其保存到哪里。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:37:52.760

知道了 cygwin/home/user/node-v0.4.2

# python - 从 cygwin（windows 7 用户）运行 python 3.2 程序

> ID：11561744
> 
> 赞同：1
> 
> 时间：2012-07-19T13:18:50.960
> 
> 标签：python, python-3.x, cygwin

我需要能够从 cygwin 运行 python 3.2 脚本。但是，cygwin 的当前设置显示它与它不兼容。我在互联网上搜索并在其他一些论坛中看到人们无法做到这一点。这里的任何人都有知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:48:56.757

截至昨天（2012 年 7 月 25 日星期三），[Python 3.2.3 已包含在标准 Cygwin 安装程序](http://cygwin.com/ml/cygwin/2012-07/msg00553.html)中。只需再次运行 Cygwin `setup.exe`（如果需要，请再次从[cygwin.com](http://www.cygwin.com)下载），您应该能够像任何其他软件包一样选择和安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:49:35.610

您可以[使用 Cygwin Ports 安装 Python 3.1.5](https://stackoverflow.com/a/11191436/220155)。

Python 3.2 尚未移植到 Cygwin，几乎可以肯定是因为它与 3.1 相比相对不稳定，后者现在只进行安全修复。如果你想要 Python 3.2，你需要自己将它移植到 Cygwin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T05:19:12.650

Ok.one 我发现的解决方案是我可以通过命令窗口调用 cygwin，然后使用 subprocess 传递指令。但是能够从 cygwin 运行 python 3.2 代码对我来说更可取，而不是相反！

# css - 当通过增加填充和应用负边距来“扩展”块时，布局会中断

> ID：11561745
> 
> 赞同：0
> 
> 时间：2012-07-19T13:19:04.353
> 
> 标签：css, css-float, margin

有点难以用语言表达，所以[这里的 jsFiddle](http://jsfiddle.net/TMXLz/3/)展示了它。

当悬停在其中一个绿色块上时，我希望它的背景足够扩大，以使其“接触”连续的矩形（它与它们的边距重叠）。但是，当悬停在每一行的最后一个块上时，布局会变得疯狂：下面的行只显示一个元素，等等。

原因似乎源于负边距；因为，如果“扩展”类的边距设置为纯 0 而不是 -5，则不会发生此问题。但这当然会在块之间留下空间。

父容器的大小似乎并没有改变这一点。请注意，目前我并不特别担心扩展块没有很好地居中并使其行中的其他块有点摇摆的事实，尽管它可能与问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:27:43.690

将扩展的 de padding 更改为 10px [http://jsfiddle.net/TMXLz/4/](http://jsfiddle.net/TMXLz/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:33:34.973

我能看到做你想做的唯一方法是将这些块中的每一个绝对（位置：绝对）定位到你想要的位置。您在这里的主要问题是您想要对盒子进行的更改将导致它们侵占彼此的空间。因此，您要么需要在每次鼠标悬停时调整它们的所有间距（使用 js）（这很糟糕）。或者将项目绝对定位到位（每个框的特定定位样式），那么它们部分重叠就不会有问题。只需确保增加活动的 z-index 以使其始终“超过”其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:33:51.170

这可能是您正在寻找的输出

[http://jsfiddle.net/TMXLz/5/](http://jsfiddle.net/TMXLz/5/)

# html - 元素在调整页面大小时不移动

> ID：11561747
> 
> 赞同：-2
> 
> 时间：2012-07-19T13:19:12.427
> 
> 标签：html, css, html-table

我正在使用以下代码在 HTML 页面上放置标题/标题：

```
<table width="100%" height="55px" border="0" cellpadding="0" cellspacing="0">
    <tr>
         <td style="height:10px">&nbsp;
         </td>
    </tr>
    <tr>
        <td style="width:105px;"></td>
        <td align="left"  style="padding-right:10px;padding-left:10px">

        <div style="font-family:quicksand;font-size: 28px; color:##bdbdc0;z-         index:1000000;position:relative;">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            De Graef    <font size="2">Landelijk & Sfeervol Wonen</font>
        </div>

        </td>
    </tr>
</table> 
```

其他内容在其他表格中。

当我放大或缩小，或只是更改分辨率时，此文本不会与其他页面元素同步移动它的位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:41:12.453

将标题行更改为：

```
<tr>
    <td align="center" style="font-family:quicksand;font-size: 28px; color:##bdbdc0;margin-left:-50px;background-color:##4D4946;">
        <table width="956" border="0" height="100%" cellspacing="0" cellpadding="0" style="background-color:##4D4946;">
            <tbody>
                <tr>
                    <td style="background-color:##4D4946;">
                        <br>
                        <br>
                        <img style="background-color:##4D4946;" src="images/logonew.png">
                    </td>
                </tr>
            </tbody>
        </table>
    </td>
</tr> 
```

我在这里为您提供帮助，但应该认真考虑以干净和现代的方式重写**所有**代码，您的大部分代码已被**弃用**：

*   使用适当的 HTML 标记来分割您的文档
*   `<table>` **仅**在您需要实际表格时使用
*   使用单独的 CSS 文件来保持你的标记干净
*   [阅读](http://www.w3schools.com/)有关所有这些的 W3C 建议

# asp.net - 具有属性 TextMode = Password 的 TextBox 在 ajax 调用后不保存其值

> ID：11561748
> 
> 赞同：0
> 
> 时间：2012-07-19T13:19:12.540
> 
> 标签：asp.net, ajax, textbox

我有一个带有属性 TextMode = "password" 的文本框。在我使用 ajax (PageMethods) 调用服务器函数后，该值会从文本框中清除。我拥有的所有其他文本框（不是密码文本框）都保存了它们的值。

有什么解决办法吗？

谢谢，英巴尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:44:15.043

好吧，如果您选择了密码，它的安全功能不会保存任何值`Textmode`，但是如果您想获取此值，您可以将文本框值保存在`ViewState`. 这样它就可以在回发期间持久保存。

# qt4 - QMdiArea：系统默认语言的窗口菜单

> ID：11561750
> 
> 赞同：2
> 
> 时间：2012-07-19T13:19:18.370
> 
> 标签：qt4

我有一个带有子窗口的 QMdiArea。KDE 中的每个子窗口（就像所有应用程序的顶级窗口一样）都有一个标准菜单，其中包含“隐藏”、“恢复”等操作。当您单击窗口左上角的窗口图标时，就会出现此菜单。但是，子窗口的菜单始终是英文的，而普通窗口的菜单是操作系统的默认语言。是否可以让 Qt 将此菜单翻译成另一种语言？

# php - PHP - 调度函数执行

> ID：11561751
> 
> 赞同：0
> 
> 时间：2012-07-19T13:19:20.480
> 
> 标签：php, timer

如何根据计时器到期在 php 中安排/触发函数执行，以及如何重置和重新执行计时器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:25:21.313

您可以使用计时器编写刷新代码，在特定时间重新加载特定页面，只执行您所做的事情；或者，您可以从数据库中读取您的作业上次运行的时间（如果此时间已存储），如果时间已过，请再次运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:37:09.797

根据我的要求，我想最好的选择只是 crons。触发计时器和保存上下文信息（如堆栈、内存等）对我的应用程序来说开销太大。感谢您的回答。

# string - SSIS：从字符串变量中过滤多个 GUID 作为数据流 OLE 源中的参数

> ID：11561754
> 
> 赞同：3
> 
> 时间：2012-07-19T13:19:32.100
> 
> 标签：string, variables, ssis, oledb, guid

我有一个 SSIS 包，它从 SQL 表中获取新 GUID 的列表。然后我将 GUID 分解成一个字符串变量，以便用逗号分隔它们。它们如何出现在变量中的一个示例是：

```
'5f661168-aed2-4659-86ba-fd864ca341bc','f5ba6d28-7283-4bed-9f11-e8f6bef225c5' 
```

问题出在数据流任务中。我在 SQL 查询中使用该变量作为参数来获取我的源数据，但我无法获得我的结果。当 WHERE 子句如下所示时：

```
WHERE [GUID] IN (?) 
```

我收到一个无效字符错误，所以我发现隐式转换不能像我想象的那样与 GUID 一起工作。如果这是单个 GUID，我可以通过将 {} 放在 GUID 周围来解决此问题，但可能需要在运行时检索 4 或 5 个不同的 GUID。

想办法解决这个问题：

```
WHERE CAST([GUID] AS VARCHAR(50)) IN (?) 
```

但这根本不会产生任何结果，并且在我当前的测试中应该有两个。

我想一定有办法做到这一点......我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T19:42:18.757

你不能，至少不使用你提供的机制。

## 您不能连接值并使其与参数一起使用。

我愿意在这一点上被证明是错误的，但如果我能让它发挥作用，我会被诅咒的。

# 我怎样才能让它工作？

诀窍是去老学校，通过字符串构建/连接进行查询。

在我的包中，我定义了两个变量，`filter`并且`query`. filter 将是您已经执行的连接。

查询将是一个表达式（右键单击，属性：将 EvaluateAsExpression 设置为 True，表达式类似于`"SELECT * FROM dbo.RefData R WHERE R.refkey IN (" + @[User::filter] + ")"`

在您的数据流中，然后将源从变量更改为 SQL 命令。那里不需要映射。

基本的外观和感觉就像

![在此处输入图像描述](../Images/6e8cc53049970f1e38f9840a89d454e3.png)

OLE 源查询

![在此处输入图像描述](../Images/5bd00394c40905608baa13c821b08870.png)

# javascript - 淘汰赛：如何在按钮单击时切换多个 div 的可见性？

> ID：11561756
> 
> 赞同：8
> 
> 时间：2012-07-19T13:19:44.053
> 
> 标签：javascript, html, knockout.js

我想使用淘汰赛切换多个 div 的可见性。以下是我的问题的粗略想法 -

```
<button>Button 1</button>
<button>Button 2</button>
<button>Button 3</button>

<div> Div 1 </div>
<div> Div 2 </div>
<div> Div 3 </div> 
```

默认情况下，“Div 1”应该是可见的。

当我单击单个按钮时，它应该只显示基于单击的按钮的相关 div。

我已经浏览了 Knockout 现场示例，但没有了解如何有效地做到这一点。

请帮忙！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T13:28:57.170

以下将为您完成工作。这并不理想，但应该给你一个工作的平台。

首先，Knockout 中的所有内容都与视图模型相关联。您希望能够控制 3 个 div 的可见性，所以这里有一个可能适合的视图模型。就像我说的，不完美:)

```
var buttonVm = new function(){
  var self = this;
  // Flags for visibility
  // Set first to true to cover your "first should be open" req
  self.button1Visible = ko.observable(true);
  self.button2Visible = ko.observable(false);
  self.button3Visible = ko.observable(false);

  self.toggle1 =  function(){
     self.button1Visible(!self.button1Visible());
  }

  self.toggle2 =  function(){
     self.button2Visible(!self.button2Visible());
  }

  self.toggle3 =  function(){
     self.button3Visible(!self.button3Visible());
  }

} 
```

您需要将标记更改为：-

```
<!-- events here.  When clicked call the referenced function -->
<button type="button" data-bind="click: toggle1">Button 1</button>
<button type="button" data-bind="click: toggle2">Button 2</button>
<button type="button" data-bind="click: toggle3">Button 3</button>

<!-- Visibility set here -->
<div data-bind="visible: button1Visible"> Div 1 </div>
<div data-bind="visible: button2Visible"> Div 2 </div>
<div data-bind="visible: button3Visible"> Div 3 </div> 
```

这里有几点需要注意。首先，我添加了**type**属性。没有它，按钮的默认行为将是尝试提交表单。

把它绑起来：-

```
// Create view model
var vm = new buttonVm();
ko.applyBindings(vm); 
```

# ip - 域及其子域的 IP 地址是否相同？

> ID：11561757
> 
> 赞同：19
> 
> 时间：2012-07-19T13:19:47.660
> 
> 标签：ip

我想知道。当域 example.com 的 IP 地址为 41.72.111.222 时，它的任何子域（sub.example.com、mail.example.com 等）是否具有 DNS 记录中列出的相同 IP 地址？或者它是这样工作的：从浏览器向 DNS 服务器发送一个请求，请求 sub.example.com。DNS 服务器返回 example.com 的 IP 地址，当 sub.example.com 的请求命中 example.com 主机服务器时进行拆分/区分？所以主机服务器基本上知道如何处理 sub.example.com 而不是 DNS 服务器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T13:31:17.123

它可以是两者的结合。不过，最终决定是根据您设置的 DNS 设置做出的。然后，您的主机（或主机）将获得您确定它们应该在您的 DNS 设置中获得的任何流量。

所以例如...

您可以将 DNS 设置设置为采用 [anything].example.com 并始终将其定向到您的服务器。您可以通过向 DNS 子域添加通配符条目来实现此目的。通配符条目使用 * 符号表示“任何内容”。然后，您需要配置您的服务器以了解如何处理它可能接收的所有这些不同的潜在子域。

同时，您可以设置特定的子域去其他主机。例如，如果您希望 mail.example.com 转到其他网络邮件主机，您可以在 DNS 中设置子域“mail”，并将该流量重定向到您托管网络邮件的任何位置。

# javascript - 如何在 textarea 中捕捉 Escape 按钮的按下？

> ID：11561759
> 
> 赞同：2
> 
> 时间：2012-07-19T13:19:55.767
> 
> 标签：javascript, jquery

我有以下代码：

```
$('.field').keypress(function(event) {
    if (event.keyCode == 27) alert(event.keyCode);
}); 
```

我需要抓住“Escape”按钮并做一些动作。但是现在它的代码不起作用。我曾尝试使用此代码：

```
$('.field').keypress(function(event) {
    alert(event.keyCode);
}); 
```

我按 Escape 按钮，但它不起作用（我没有看到任何警报）。请告诉我，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T13:21:13.633

使用`keydown`or`keyup`而不是`keypress`. `keypress`仅对产生字符的击键触发，而（按照惯例）`Esc`不会触发（即使某些字符集，例如 ASCII，确实有一个称为“转义”的字符）。

有关在 JavaScript 中处理击键的更多信息：[*JavaScript Madness：键盘事件*](http://unixpapa.com/js/key.html)

# jquery - 包含与您在文本框中键入的内容相匹配的建议的下拉列表

> ID：11561762
> 
> 赞同：-4
> 
> 时间：2012-07-19T13:19:59.107
> 
> 标签：jquery

我有一个下拉列表、一个文本框和一个按钮。如果我在文本框中键入一个单词并单击按钮，则下拉列表应根据文本框中的该单词选择列表项。

例如：如果我输入 23，那么下拉列表应该列出从 23 开始的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:23:30.723

[jQuery UI Autocomplete](http://jqueryui.com/demos/autocomplete/)似乎完全符合您的需求，甚至更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:33:54.773

@GG。使用 jQuery UI 是一个更好的选择，但这里有一个非常简单的工作模型，不使用 UI：http: [//jsfiddle.net/flackend/MA95K/2/](http://jsfiddle.net/flackend/MA95K/2/)

HTML：

```
<input type="text">
<input type="button" value="Button">
<select>
    <option>20</option>
    <option>21</option>
    <option>22</option>
    <option>23</option>
</select>​ 
```

jQuery：

```
$('input[type="button"]').on('mousedown', function() {

    var search_str = $('input[type="text"]').val()

    $('option[selected="selected"]').removeAttr('selected');

    $('option').each(function() {
        if($(this).text() == search_str)
        {
            $(this).attr('selected', 'selected');
            return false;
        }
    });
});​ 
```

* * *

**编辑**

这是一个使用 jQuery UI 自动完成功能的新 jsfiddle：http: [//jsfiddle.net/flackend/rPGUy/1/](http://jsfiddle.net/flackend/rPGUy/1/)

* * *

**编辑**

`$('option[selected="selected"]').removeAttr('selected');`基本上是说，“找到所有具有 value 属性`selected`的*选项* `selected`标签，如果有的话，然后删除该属性。”

因此，例如：

```
<select>
    <option>20</option>
    <option selected="selected">21</option>
    <option>22</option>
    <option>23</option>
</select> 
```

会变成这样：

```
<select>
    <option>20</option>
    <option>21</option>
    <option>22</option>
    <option>23</option>
</select> 
```

所以现在当我们让 jQuery 选择一个新的选项标签时，它不会发生冲突。

# curl - cURL 初始化失败

> ID：11561765
> 
> 赞同：4
> 
> 时间：2012-07-19T13:20:09.657
> 
> 标签：curl, npm

尝试使用为节点 v0.6.2 安装 npm

```
$ curl http://npmjs.org/install.sh 
```

但遇到来自 cURL 的错误说，

```
curl: (2) Failed initialization. 
```

我也尝试了 cURL 其他链接，但同样的错误不断出现。我试过谷歌它，但找不到任何好的解决方案来解决这个错误。请帮助我解决此问题或以其他方式安装 npm。

PS - 我使用的是 Ubuntu 10.04，并且我之前配置了 npm，但将其卸载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T19:26:15.077

我尝试了 curl 并得到了以下响应。

```
<html>Moved: <a href="https://npmjs.org/install.sh">https://npmjs.org/install.sh</a> 
```

看起来他们将文件移动到了 https 服务器。

因此，您需要在使用提供的链接 url 上运行 curl：

```
curl https://npmjs.org/install.sh > install.sh 
```

这会将结果发送到一个名为 install.sh 的文件

# java - 接口 XXXXX 不能使用不同的参数多次实现

> ID：11561770
> 
> 赞同：4
> 
> 时间：2012-07-19T13:20:27.097
> 
> 标签：java, swing

我目前正在研究 salomé tmf 项目，所以我在编译后下载了代码我收到了这个错误：

```
 The interface ListCellRenderer cannot be implemented more than once with different   
 arguments: ListCellRenderer<Object> and ListCellRenderer   UserListRenderer.java 
```

但我找不到问题到底出在哪里。 **这是 UserListRenderer 类的代码：**

```
package org.objectweb.salome_tmf.ihm.admin.models;

import java.awt.Component;

import javax.swing.DefaultListCellRenderer;
import javax.swing.Icon;
import javax.swing.JList;
import javax.swing.ListCellRenderer;
import javax.swing.UIManager;

import org.objectweb.salome_tmf.api.ApiConstants;
import org.objectweb.salome_tmf.api.Util;
import org.objectweb.salome_tmf.data.AdminProjectData;
import org.objectweb.salome_tmf.data.User;
import org.objectweb.salome_tmf.ihm.IHMConstants;
import org.objectweb.salome_tmf.ihm.tools.Tools;

 public class UserListRenderer extends DefaultListCellRenderer implements    
 ListCellRenderer, ApiConstants , IHMConstants{

/**
 * Le s?parateur de fichier
 */
/**
 * M?thode qui red?finit le renderer des ?l?ments de la liste
 * @param list la liste concern?e
 * @param value l'objet dans la liste
 * @param index indice dans la liste
 * @param isSelected si l'objet est s?lectionn?
 * @param cellHasFocus si le focus est sur la cellule
 */
public Component getListCellRendererComponent(JList list, Object value, int index,
boolean isSelected,
boolean cellHasFocus) {
    if (isSelected) {
        setBackground(list.getSelectionBackground());
        setForeground(list.getSelectionForeground());
    }
    else {
        setBackground(list.getBackground());
        setForeground(list.getForeground());
    }
    Icon icon;
    if (value instanceof User) {
        icon = Tools.createAppletImageIcon(PATH_TO_ADMIN_ICON,"");
        setIcon(icon);
        setText(((User)value).getLoginFromModel() + " / " + 
       ((User)value).getLastNameFromModel() + " " + 
       ((User)value).getFirstNameFromModel());
    } else if (value instanceof Icon) {
        setIcon((Icon)value);
        setText("");
    } else {
        setIcon(null);
        setText((value == null) ? "" : value.toString());
    }

    setEnabled(list.isEnabled());
    setFont(list.getFont());
    setBorder((cellHasFocus) ? UIManager.getBorder("List.focusCellHighlightBorder") : 
     noFocusBorder);

    return this;

   } // Fin de la m?thode getListCellRendererComponent/5
 }  // Fin de la classe UserListRenderer 
```

任何帮助将不胜感激

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:31:35.800

您使用的是 Java 6 还是 Java 7？在 Java 7 中，接口似乎已重新设计为采用通用参数。我建议您尝试省略第`implements ListCellRenderer`一个 - 因为 DefaultListCellRenderer 已经实现了它，所以不需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:26:30.667

您正在尝试使用不同的 s 两次`UserListRenderer`实现通用接口。这是不允许的。`ListCellRenderer<T>``T`

# ruby-on-rails - 如何使用嵌套形式的宝石“回形针”

> ID：11561773
> 
> 赞同：0
> 
> 时间：2012-07-19T13:20:36.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, paperclip, nested-forms

在设计的编辑页面中，我使用回形针放置图像上传器。
如果我尝试将 image_tag 放在这里，它会像这样返回错误。

```
NoMethodError in Registrations#edit 
undefined method `photo' for #<ActionView::Helpers::FormBuilder:0x000000210752d0> 
```

我有 Devise 使用的“用户”模型。
并且用户有一个“用户配置文件”模型。
在“UserProfile”中，我将 :photo 添加到 attr_accessible。我还将它添加到“UserProfile”模型中以使用回形针

```
 has_attached_file :photo,
    :styles => {
    :thumb=> "100x100>",
    :small  => "400x400>" } 
```

我的编辑视图是

```
<% resource.build_user_profile if resource.user_profile.nil? %>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

    <%= f.fields_for :user_profile do |profile_form| %>

      <div><%= profile_form.label :nickname %><br /> 
      <%= profile_form.text_field :nickname %></div> 

      <div><%= profile_form.label :photo %><br /> 
      <%= profile_form.file_field :photo %></div>

     <% if profile_form.photo.exists? then %>
      <%= image_tag profile_form.photo.url %>
      <%= image_tag profile_form.photo.url(:thumb) %>
      <%= image_tag profile_form.photo.url(:small) %>
     <% end %>
   <% end %> 

...continue on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:06:06.733

尝试将新建的 user_profile 实际分配给一个变量：

```
<% user_profile = resource.build_user_profile if resource.user_profile.nil? %> 
```

然后将该变量传递给 fields_for ，如下所示：

```
<%= f.fields_for user_profile do |profile_form| %> 
```

或者

```
<%= f.fields_for :user_profile, user_profile do |profile_form| %> 
```

我相信这应该有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:17:07.497

要制作嵌套表单，请在您的父模型（用户）中添加此

```
accepts_nested_attributes_for :photos 
```

这允许您一次性传递与照片模型和用户相关的参数。Rails 制作了一个特殊的哈希键，用于存储具有名称的照片模型的值：

```
photos_attributes 
```

现在，当您执行@user = User.new params[:user] 时，它还会构建@user.photos

此外，在您的用户控制器新方法中，添加：@user.photo.build

请参阅 ryan bates 的这个很棒的 railscast 以获得完整的解释： [http ://railscasts.com/episodes/134-paperclip](http://railscasts.com/episodes/134-paperclip)

这也可能有用： [http ://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# forms - 如何在 Access VBA 中以 DataSheet 模式打开过滤后的表单？

> ID：11561775
> 
> 赞同：1
> 
> 时间：2012-07-19T13:20:43.380
> 
> 标签：forms, ms-access, vba

我敢肯定我以前遇到过这种情况，不记得我是否找到了解决方法。我需要在 DataSheet 模式下打开一个模态过滤表单。我已将默认且仅允许的模式设置为 DataSheet，但是当我

```
DoCmd.OpenForm "frmOptyFeedbackExport", acNormal, , , acFormReadOnly, acDialog 
```

它以单一形式出现，有人知道为什么以及如何强制它作为数据表打开吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:24:48.877

你不想要 acNormal：

```
DoCmd.OpenForm "frmOptyFeedbackExport",acFormDS, , , acFormReadOnly, acDialog 
```

我会非常小心模态形式。

# actionscript-3 - AS3：Papervision3D 中的精确算法？

> ID：11561777
> 
> 赞同：0
> 
> 时间：2012-07-19T13:20:47.823
> 
> 标签：actionscript-3, bitmap, papervision3d

当你使用 Graphics.drawTriangles() 和 Graphics.beginBitmapFill() 绘制两个三角形来创建一个矩形面时，当面不是正方形或矩形，而是梯形或不规则形状时，用于填充面的位图被扭曲。为了纠正失真，Papervision3D 具有精确的布尔属性。但它是如何工作的？

谢谢！:)

# iphone - UITableView 中的自定义 UIControl

> ID：11561784
> 
> 赞同：0
> 
> 时间：2012-07-19T13:21:12.740
> 
> 标签：iphone, objective-c, ios, uicontrol

我有一个`UIControl`可以有两个自定义状态的自定义 -> `customEnabled`/ `customDisabled`。此状态更改在`UIControl`技术上会导致隐藏/显示状态集的定义视图。到目前为止工作正常。

在内部使用时，`UITableView`我遇到以下问题：当重用一个启用了控件的单元格时，控件被禁用时，我会在短时间内看到启用然后禁用控件。

状态设置发生`cellForRowAtIndexPath`在`UITableViewController`. 状态的设置器显示/隐藏视图。

有谁知道如何在没有“动画”的情况下获得适当的外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:52:45.003

将您的显示/隐藏包装在以下内容中

```
[CATransaction begin]; 
[CATransaction setValue: (id) kCFBooleanTrue forKey: kCATransactionDisableActions];
// do show/hide
[CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:03:01.733

我打算建议类似的东西

```
[UIView setAnimationsEnabled:NO];
[UIView animateWithDuration:0.0 animations:^{
    // Code with animations turned off
} completion:^(BOOL finished){
    [UIView setAnimationsEnabled:YES];
}]; 
```

# joomla - Joomla，安装后的注意事项

> ID：11561785
> 
> 赞同：1
> 
> 时间：2012-07-19T13:21:12.833
> 
> 标签：joomla, joomla2.5, joomla-template

我在安装 joomla 后遇到了一些问题，应该怎么做才能删除它？我附上了我得到的图像。![在此处输入图像描述](../Images/dfbb59cedf64ba6114509ee12d8d222a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:06:20.877

我相信您正在运行 PHP 5.4。Joomla 2.5 尚未与该版本完全兼容。跟踪器中现在有修复这些问题的补丁，希望它们会出现在 2.5.7 中。

# iis - 将 ServiceStack 应用程序部署到 Root 下的 IIS 子文件夹

> ID：11561787
> 
> 赞同：3
> 
> 时间：2012-07-19T13:21:15.673
> 
> 标签：iis, servicestack

我有一个简单的 ServiceStack 应用程序，我可以将它作为控制台应用程序托管，现在我想为 IIS 打包/部署它。

我已经创建了一个 ASP.Net 应用程序项目，并且可以在我的本地机器上成功运行该服务。当我尝试将它部署到根目录下子文件夹中的 IIS 服务器（v7.5）时，我得到一个 404。

根据 ServiceStack 站点上的示例和文档，我设置位置路径 web.config 设置如下

```
<location path="api">
    ...
</location> 
```

我尝试了这些路径

```
/api
/subfolder_name/api 
```

但没有一个工作。

是否不可能将它放在子文件夹中并让它成为 api 的路径？

我将它放在根目录下的子文件夹中，并且路径配置如下：. 然而它不起作用。那么这是否意味着我的所有文件都必须在根目录下，然后我必须更改 global.asax 以包含我的 apphost 初始化代码？对我来说似乎有点乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T16:34:32.657

不确定您的确切设置，但在 AppHost.Configure() 中指定路径也可能会有所帮助：

```
SetConfig(new EndpointHostConfig
{
    ServiceStackHandlerFactoryPath = "api",
}); 
```

# java - 番石榴 可选。如何正确使用

> ID：11561789
> 
> 赞同：4
> 
> 时间：2012-07-19T13:21:24.377
> 
> 标签：java, guava, optional

我有一堂课

```
private class TouchCommand {
  private int action;
  private int x;
  private int y;
... 
```

执行命令时，需要验证字段值——null/not null，并根据它产生纵向动作。我想使用 Google Guava 的选项。

哪种解决方案是正确的？这个：

```
public boolean executeCommand() {
  Optional<Integer> optionalAction = Optional.fromNullable(action);
  ... 
```

或者：

```
private class TouchCommand {
  private Optional<Integer> action;
  private Optional<Integer> x;
  private Optional<Integer> y;
... 
```

鉴于对 parseAction 的调用也可能返回 null（或不存在）：

```
TouchCommand touchCommand = new TouchCommand();
touchCommand.mAction = parseAction(xmlParser.getAttributeValue(namespace, "action"));
... 
```

问题：

1.  是否这样做：方法 parseAction （和类似的）返回 Optional ？
2.  是否这样做：类对象的字段 Optional ?
3.  是否这样做：检查类的字段时（假设它们可以为空）将它们转换为对象 Optional ?

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T13:35:21.430

Guava contributor here...

Any or all of these things are fine, but some of them may be overkill.

Generally, as discussed in [this StackOverflow answer](https://stackoverflow.com/a/9561334/869736), `Optional` is primarily used for two things: to make it clearer what you would've *meant* by `null`, and in method return values to make sure the caller takes care of the "absent" case (which it's easier to forget with `null`). We *certainly* don't advocate replacing every nullable value with an `Optional` everywhere in your code -- we certainly don't do that within Guava itself!

A lot of this will have to be your decision -- there's no universal rule, it's a relatively subjective judgement, and I don't have enough context to determine what I'd do in your place -- but based on what context you've provided, I'd consider making the methods return `Optional`, but probably wouldn't change any of the other fields or anything.

# macos - 如何在mac中通过进程名称捕获网络流量？

> ID：11561791
> 
> 赞同：3
> 
> 时间：2012-07-19T13:21:24.657
> 
> 标签：macos, tcp, wireshark, packet-capture

我正在尝试自动化捕获特定应用程序发送的网络数据包的过程。我在 Windows 中没有问题，因为我使用的是 Microsoft 网络监控工具，它会根据进程发送所有流量。现在的问题是我们也需要在 mac 中实现相同的结果。

经过长时间的研究，我们在mac中使用Wire-shark捕获网络流量，但仍然没有按进程名称捕获wireshark。我们尝试了一些基于进程名称捕获但信息非常有限的工具。我们需要捕获完整的数据包信息。

就像我们在 Windows 中一样，在 mac 中实现结果的最佳方法是什么？

所有参数都可以用来过滤想要的数据...？

我实际上是在尝试获取进程使用的端口号，但这是正确的方法吗？我不确定我们是否可以根据端口号归零。

任何帮助将不胜感激...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:01:36.387

您可以使用`lsof`命令，但它比`netstat`.

这是一个指南：[lsof 生存指南](https://stackoverflow.com/questions/106234/lsof-survival-guide)

# c# - 通用查询方法

> ID：11561794
> 
> 赞同：0
> 
> 时间：2012-07-19T13:21:27.627
> 
> 标签：c#, data-layer

我发现我的 C# 应用程序使用大量样板文件执行大量查询，这使我的代码空间变得混乱。我也想避免重复，但我不确定如何编写一个通用的方法来做到这一点。

我正在使用 ODP 访问 Oracle 数据库。我不能使用 Linq，因为我们的数据仓库人员拒绝指定主键，而且对 Linq 的 ODP 支持似乎是……他们宁愿让你使用他们的平台。

我不能真正返回一个列表，因为每个查询都返回不同数量的不同类型。

```
string gufcode = String.Empty;
double cost = 0.0;
OracleCommand GUFCommand2 = thisConnection.CreateCommand();
String GUFQuery2 = "SELECT GUF_ID, COST_RATE FROM SIMPLE_TABLE";
GUFCommand2.CommandText = GUFQuery2;
OracleDataReader GUFReader2 = GUFCommand2.ExecuteReader();
while (GUFReader2.Read())
{
    if (GUFReader2[0/**GUF_CODE**/] != DBNull.Value)
    {
        gufcode = Convert.ToString(BUFReader2[0]);
    }
    if (GUFReader2[1/**COST_RATE**/] != DBNull.Value)
    {
        cost = Convert.ToDouble(GUFReader2[1]);
    }

    effortRatioDictionary.Add(bufcode, percentageOfEffort);
}
GUFReader2.Close(); 
```

但是确实有更多的术语和更多这样的查询。我会说 15 个左右的查询 - 有些查询返回了多达 15 个左右的字段。

到处复制/粘贴这个样板会导致很多火灾：例如，如果我不更新复制粘贴中的所有内容，我将关闭错误的阅读器（或更糟）向数据库发送不同的查询字符串。

我希望能够做这样的事情：

```
string gufQuery = "SELECT GUF_ID, COST_RATE FROM SIMPLE_TABLE";
List<something> gufResponse = miracleProcedure(gufQuery, thisConnection); 
```

所以大部分样板文件都消失了。

我正在寻找简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:51:16.293

一些提示：

从[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)派生允许[使用 using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)更清晰的代码。

IMO 你的魔法方法应该更像这样：

```
List<T> list = doMagic("SIMPLE_TABLE", columns); 
```

*columns*可以是一个像这样的小结构数组：

```
struct Column
{
    string Name;
    Type   DataType;
} 
```

如果您经常使用相同的表/列，您可能可以使用枚举。

或者

您可以从 XNA 中的 VertexDeclaration、VertexElement、VertexElementFormat 和 VertexElementUsage 类型中获得一些灵感：http: [//msdn.microsoft.com/en-us/library/bb197344](http://msdn.microsoft.com/en-us/library/bb197344)。

当以随机顺序处理不同数量的“输入”时，这被证明非常有用。

就我而言，我已经能够用这些东西为 OpenGL 构建一个易于使用的、类似 XNA 的框架。

关于列表的返回类型，请参阅我的第二个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:13:29.167

我认为你不能抽象出一个函数的主要原因是因为返回的数据每次都会不同。

这意味着每次读取的次数也会有所不同。

你可以只返回 GUFReader2 但你将失去在你想要的函数内关闭它的能力。

我会说返回一个对象数组（或列表）。

在该过程中，只需通读每一行并在关闭连接时返回列表。

您的调用函数将始终知道预期数据的顺序和顺序。它也必须转换对象数据，但无论如何您都是在此过程中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T19:38:33.463

Linq 是正确的答案。我感谢上面的 David M，但我不能将其标记为正确答案，因为他只留下了评论。

我能够使用 ArrayLists 做一个半广义的方法：

```
 public static ArrayList GeneralQuery(string thisQuery, OracleConnection myConnection)
    {
        ArrayList outerAL = new ArrayList();

        OracleCommand GeneralCommand = myConnection.CreateCommand();
        GeneralCommand.CommandText = thisQuery;
        OracleDataReader GeneralReader = GeneralCommand.ExecuteReader();
        while (GeneralReader.Read())
        {
            for (int i = 0; i < GeneralReader.FieldCount; i++)
            {
                ArrayList innerAL = new ArrayList();

                if (GeneralReader[i] != DBNull.Value)
                {
                    innerAL.Add(GeneralReader[i]);
                }
                else
                {
                    innerAL.Add(0);
                }
                outerAL.Add(innerAL);
            }
        }
        GeneralReader.Close();

        return outerAL;
    } 
```

调用此方法的代码如下所示：

```
 thisConnection.Open();

                List<ProjectWrapper> liProjectCOs = new List<ProjectWrapper>();

                String ProjectQuery = "SELECT SF_CLIENT_PROJECT.ID, SF_CLIENT_PROJECT.NAMEX, SF_CHANGE_ORDER.ID, SF_CHANGE_ORDER.END_DATE, ";
                ProjectQuery += "SF_CLIENT_PROJECT.CONTRACTED_START_DATE, SF_CHANGE_ORDER.STATUS, SF_CHANGE_ORDER.TYPE, SF_CLIENT_PROJECT.ESTIMATED_END_DATE, SF_CLIENT_PROJECT.CONTRACTED_END_DATE ";
                ProjectQuery += "FROM SF_CLIENT_PROJECT, SF_CHANGE_ORDER ";
                ProjectQuery += "WHERE SF_CHANGE_ORDER.TYPE = 'New' ";
                ProjectQuery += "AND SF_CLIENT_PROJECT.ID = SF_CHANGE_ORDER.PROJECT";
                ArrayList alProjects = GeneralQuery(ProjectQuery, thisConnection);
                foreach( ArrayList proj in alProjects ) {
                    ProjectWrapper pw = new ProjectWrapper();
                    pw.projectId = Convert.ToString( proj[0] );
                    pw.projectId = Convert.ToString(proj[0]);
                    pw.projectName = Convert.ToString(proj[1]);
                    pw.changeOrderId = Convert.ToString(proj[2]);
                    pw.newEndDate = Convert.ToDateTime(proj[3]);
                    pw.startDate = Convert.ToDateTime(proj[4]);
                    pw.status = Convert.ToString(proj[5]);
                    pw.type = Convert.ToString(proj[6]);
                    if ( Convert.ToString(proj[7]) != "0" ) // 0 returned by generalquery if null
                        pw.oldEndDate = Convert.ToDateTime(proj[7]);
                    else
                        pw.oldEndDate = Convert.ToDateTime(proj[8]);
                    liProjectCOs.Add(pw); 
```

这里有很多明显的缺点（尽管它比我之前尝试做的要好得多）。它比我与我们的数据仓库人员重新谈判的 Linq 糟糕得多。那里有一个新人，他的帮助要大得多。

Linq 将上面的代码行数减少了 2 倍。这是我之前使用的非封装方式的 4 倍。

# git - 哪种方式与git合并？

> ID：11561795
> 
> 赞同：7
> 
> 时间：2012-07-19T13:21:47.920
> 
> 标签：git, merge, branch

假设我有两个分支

```
master -- A -   -   -   -   -  - merge
          \                    /
           \- develop -- B -- C 
```

现在，如果我想合并，这将是一个快进，但我应该这样做

```
git checkout develop
git merge master 
```

或者

```
git checkout master
git merge develop 
```

如果我有可能的冲突怎么办

```
master -- A - D -  -  -  -  -  -merge
          \                   /
           \- develop -- B -- C 
```

我现在应该合并到开发还是大师？这有点令人困惑，所以非常感谢一个好的解释

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:57:12.177

### 缺少工作流任务

首先，您的工作流程中缺少一些东西，这使得您很难以现实世界的方式回答您的问题。例如：

1.  在合并分支之前，您应该始终从上游拉取。其他人可能以您没有考虑到的方式改变了*开发*或*掌握。*

2.  你还没有确定哪条是你长期发展的路线。一个假设*develop*，但这只是一个猜测，因为您还没有确定合并*后分支会发生什么。*

### 重新定位长期存在的分支的一般最佳实践

因此，假设您已经提前更新了分支，并且*master*和*develop*都是长期存在的分支，并且*master*是完整代码的“官方”分支，那么您应该按照这些思路做一些事情。

1.  建立一个基于*develop*的临时变基分支。

    ```
    git checkout -b tmp develop 
    ```

2.  将您的工作重新定位到*master*以确保干净的快进合并。我喜欢把它变成一个交互式的变基，但可以按照你想要的方式做。例如：

    ```
    git rebase -i master 
    ```

3.  合并到*master*。我更喜欢强制合并快进，但你可以做任何适合你的事情。

    ```
    git checkout master
    git merge --ff-only tmp 
    ```

4.  确保合并的分支干净利落地推送。

    ```
    git push origin 
    ```

5.  如果一切顺利，请处置您的临时分支机构。

    ```
    git branch -d tmp 
    ```

6.  *将master*与*develop*重新合并为合并提交，而不是快进。这使您的开发与主分支保持一致，以便继续工作。

    ```
    git checkout develop
    git merge master
    git push origin 
    ```

### 自然后果

这样做可以确保你的*主*分支上的历史是相对线性的并且没有合并冲突，并且仍然允许你在需要时重新设置基准而不会搞砸已发布的分支。这都是积极的东西。

但是，此过程可能会使*develop留下复杂的合并历史，因为从**master*重新合并到*develop*可能并不总是快进合并。这本身不是问题，它只是任何包含变基的工作流的自然结果。这是需要注意的事情，但在我看来，这是值得为它为团队提供的灵活性付出的代价。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:23:10.603

做第二个，在master中合并。

我通常 rebase master 到 origin，rebase dev 到 master，*然后*合并。这使得冲突在变基期间出现；如果你这样做，就不会有合并冲突。

# ruby-on-rails - 高效的 Rails 部署到小型 EC2 实例

> ID：11561800
> 
> 赞同：2
> 
> 时间：2012-07-19T13:22:00.910
> 
> 标签：ruby-on-rails, amazon-ec2, bundler, cpu

我有几个 Rails 应用程序在单个小型 EC2 实例上的不同虚拟主机下运行。我的每个自动化部署过程都涉及运行一些 rake 任务（迁移、资产编译等），将所有内容暂存到版本化目录中，并将 Web 根目录符号链接到它。我正在使用 Apache + Passenger 为应用程序提供服务。通过这个过程（以及乘客的重新启动），我的 ruby​​ 进程占用了 100% 的 CPU。我理解为什么会发生这种情况，但我需要一种方法来限制这些进程，以便实例上的所有其他应用程序不会像当前那样受到重大影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:24:09.717

不知道你是否已经遇到过这种情况。但它的存在是为了使 EC2 部署更加方便。[https://github.com/wr0ngway/rubber](https://github.com/wr0ngway/rubber)

在它上面还有一个 Railscast：[http ://railscasts.com/episodes/347-rubber-and-amazon-ec2](http://railscasts.com/episodes/347-rubber-and-amazon-ec2)

希望这两个资源可以在某个地方对您有所帮助。

# c++ - 布尔变量的最佳大小是多少

> ID：11561806
> 
> 赞同：3
> 
> 时间：2012-07-19T13:22:21.923
> 
> 标签：c++, ios, boolean

我开始相信布尔变量的最佳大小是数据的自然宽度，即在 C/C++ 中它是 int。因此，对于现代处理器，这通常是 32 位。例如，在机器级别将其声明为字节需要 32 位提取，然后是掩码。

但是我已经看到 iOS 中的 BOOL 是 8 位。我曾假设使用字节的人正在使用 8 位处理器的剩余想法。

我意识到这个问题取决于使用情况，并且在大多数情况下，语言定义的布尔值是最好的选择，但有时您需要定义自己的，例如当您转换来自外部源的代码或您想要编写跨平台代码。

同样重要的是，如果要将布尔值打包到串行流中，为了通过以太网等串行线路发送或存储，最好将布尔值打包为更少的位。但我觉得从处理器最佳尺寸打包和拆包可能是最佳选择。

所以我的问题是我认为 32 位处理器上布尔值的最佳大小是 32 位是否正确，如果是，为什么 iOS 使用 8 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:28:36.997

是的，你是对的，这取决于。使用 8 位的最大优点是您可以很好地将更多内容打包到结构中。

当然，在这种情况下你最好使用标志。

不过，最大的问题是，对于 C/C++“布尔”，您不一定知道它有多大。这意味着您不能对结构进行假设（例如二进制写入磁盘），而不会在另一个平台上破坏它。在这种情况下，使用已知大小的变量可能非常有用，如果要将结构转储到磁盘，则最好使用尽可能少的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:41:34.170

它依赖于架构，但在许多 32 位架构上，8 位寻址的效率不亚于 32 位；这样的“获取和屏蔽”是在硬件逻辑中执行的。

就存储空间而言，最佳大小当然是 1 位。例如，您可以使用位域或位掩码将多个布尔值打包在一个单词中。某些体系结构（例如 8051）具有位可寻址存储器。更现代的 ARM Cortex-M 架构采用了一种称为*[位带](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0337e/Behcjiic.html)*的技术，它允许内存和硬件寄存器是位可寻址的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:34:48.760

涉及 32 位取指和硬件掩码的 8 位数量的概念*大多*已过时。实际上，从内存中提取（在现代处理器上）通常是一个 L2 高速缓存行（通常约为 64-128 字节）。在这种情况下，基本上您处理的*每种*大小的项目都涉及获取大量数据，然后仅使用您获取的数据的一部分（但是，假设您的数据或多或少是连续的，随后可能会使用更多数据）。

C++*尝试*（不一定成功）为您优化这一点。一个个体`bool`可以是一个字节以上的任何位置，尽管在最典型的实现中，它是一个字节或四个字节。（备受诟病的）`std::vector<bool>`使用一些技巧来提供（某种）类似矢量的接口，但仍将每个接口存储`bool`在一个位中。在这个过程中，它失去了被视为通用序列容器的能力——但是当你存储大量布尔值并且可以忍受以类似数组的方式使用它的限制时，它实际上可能很多比许多人认为的更有用。

当/如果你想保留正常的容器语义并且不介意额外的存储空间来保持它们的原始大小，你可以使用另一个容器（例如，`std::deque<bool>`）来代替。特别是如果您只需要存储一小部分`bool`s，这通常是一个更好的选择。

# python - Django 找不到模板目录？

> ID：11561807
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:22:27.843
> 
> 标签：python, django, django-templates

最初我的 Django 项目中只有一个应用程序，模板由 index.html、detail.html 和 layout.html 组成……索引和详细信息文件扩展了布局。他们都住在同一个目录（*[app1]/templates/[app1]/*）中，它可以找到所有文件。

现在我有了第二个应用程序，我想重新使用 layout.html ......我决定在 django 项目的基础上制作一个模板目录，然后把它放在那里。这是我的目录结构现在的样子：

```
<basepath>/<django_project>/templates/shared
<basepath>/<django_project>/<app1>/templates/<app1>
<basepath>/<django_project>/<app2>/templates/<app2> 
```

我更新了我的 settings.py：

```
TEMPLATE_DIRS = (
    '/full/path/to/<django_project>/<app1>/templates',
    '/full/path/to/<django_project>/<app2>/templates',
    '/full/path/to/<django_project>/templates',
) 
```

在“共享”目录中，我有 layout.html ...来自 app1 或 app2 模板目录，我有 index.html 和文件顶部的“扩展”行：

```
{% extends "shared/layout.html" %} 
```

但是，当我尝试加载应用程序视图时，它会收到一个错误，即找不到 shared/layout.html

```
TemplateSyntaxError at /
Caught TemplateDoesNotExist while rendering: shared/layout.html 
```

有什么我想念的想法吗？这应该很简单，我必须忽略一些非常明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:45:59.973

我的错！我以为我是在 Nginx 后面运行它，所以我重新启动了它，但仍然遇到问题。重新检查后，我意识到我在 Apache 后面运行，重新启动 Apache 更新了我的 TEMPLATE_DIRS，现在它可以工作了！

# c# - 扩展方法 IEnumerable.Average() 的输出对于某些值是否错误？

> ID：11561811
> 
> 赞同：1
> 
> 时间：2012-07-19T13:22:39.117
> 
> 标签：c#, linq, double

我有一个在 LinqPad 上运行的以下代码：

```
void Main()
{
    List<VariableData> outputVariableData = 
    new List<VariableData>();

    for(int i = 1 ; i< 100; i ++)
    {
    outputVariableData.Add(new VariableData
        { 
        Id = i,
        VariableValue = .33     
        });
    }

    double result = outputVariableData.Average(dd=> dd.VariableValue);
    double add = outputVariableData.Sum(dd=> dd.VariableValue)/99;
    add.Dump();
    result.Dump();
}

public class VariableData
    {
        public int Id { get; set; } 
        public double VariableValue{ get; set; }
    } 
```

结果

```
0.329999999999999
0.329999999999999 
```

当我使用公式 =AVERAGE(A1:A101) 检查 Excel 表中相同数字的平均值时，它返回 0.33。

实际上，我正在用这些数据绘制图表，并且图表上显示了平均值，这使得图表绘制如此抽象，并且图表无法管理这种类型的值。

我对这两者的输出有点困惑，我想 excel 会自动舍入该值。所以我有一个简单而愚蠢的问题，即我的扩展方法的输出是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:41:27.787

如前所述，excel 为您提供了一个很好的圆形版本。对于显示数字，这可能是非常有用的阅读：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

还有[http://msdn.microsoft.com/en-us/library/f5898377](http://msdn.microsoft.com/en-us/library/f5898377)可用。

您从字面上询问的标准数字格式字符串的相关性是什么？

容易 - 问题不在于数字*错误*- 考虑到浮点数的不准确性，这完全没问题。然而，显示这些数字可能是一个问题——这不是我们所期望的，也不是有用的。但是，如果我们花几秒钟时间定义我们希望如何呈现我们的数字......

```
void Main()
{
    List<VariableData> outputVariableData = 
    new List<VariableData>();

    for(int i = 1 ; i< 100; i ++)
    {
    outputVariableData.Add(new VariableData
        { 
        Id = i,
        VariableValue = .33     
        });
    }

    double result = outputVariableData.Average(dd=> dd.VariableValue);
    double add = outputVariableData.Sum(dd=> dd.VariableValue)/99;
    add.Dump();
    add.ToString("P0").Dump();
    add.ToString("N2").Dump();
    result.Dump();
    result.ToString("P0").Dump();
    result.ToString("N2").Dump();
}

public class VariableData
{
        public int Id { get; set; } 
        public double VariableValue{ get; set; }
} 
```

突然我们得到了我们想要的输出：

```
0.329999999999999
33 %
0.33

0.329999999999999
33 %
0.33 
```

现在的问题不是试图将数字按摩到完美，或使用不寻常的数据类型——而是花几分钟找出可用的选项并利用它们！从长远来看，这很容易做到并且非常有用:)

当然，这应该只用于*显示*数据 - 如果您出于计算原因需要对数据进行舍入，那么我建议您查看 Math.Round 等。

希望这能回答你的问题。

补充：

这是另一个以非常相似的方式工作的选项：http: [//msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx) 它解释了如何执行以下操作：

```
void Main()
{
    0.31929.ToString("0.##%").Dump();
    0.ToString("0.##%").Dump();
    1.ToString("0.##%").Dump();
} 
```

结果是：

```
31.93%
0%
100% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:42:50.010

计算机以二进制格式存储浮点数，没有 0.33 的精确表示

```
Decimal Binary
2       10
0.5     0.1
0.25    0.01
0.33    0.01010100011110101110000101000111101011100001010001111010111000... 
```

[http://www.exploringbinary.com/binary-converter/](http://www.exploringbinary.com/binary-converter/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:37:00.523

这正是计算机如何从数学点呈现计算的方式，数字 0.33 和 0.32(9) 相等，Excel 可能有自己的舍入

[http://www.cut-the-knot.org/arithmetic/999999.shtml](http://www.cut-the-knot.org/arithmetic/999999.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:39:24.017

浮点数会给你四舍五入的差异。它发生了。

如果您希望数字准确，请尝试对 VariableValue 使用小数而不是双精度。
这为**add**和**result**提供了 0.33 。

# objective-c - 找出一个块需要多少个参数

> ID：11561813
> 
> 赞同：4
> 
> 时间：2012-07-19T13:22:42.070
> 
> 标签：objective-c, objective-c-blocks

假设我有一个包含块的数组，我需要断言它们都期望给定数量的参数。

有没有办法以编程方式找到它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T18:43:59.403

对于任何最新版本的 Clang，这确实是可能的。

用于 Blocks 的 Apple ABI 是私有的，但也[已发布](http://clang.llvm.org/docs/Block-ABI-Apple.html)。由于该文档告诉我们编译器将用于块对象的布局，我们可以在头文件中复制该信息并使用它来访问块的组件。

Mike Ash 的[MABlockForwarding 项目](https://github.com/mikeash/MABlockForwarding/blob/master/MABlockForwarding.m)就是这样做的（另请参阅[文章](http://www.mikeash.com/pyblog/friday-qa-2011-10-28-generic-block-proxying.html)）——该文件顶部的大部分内容是从 ABI 文档复制粘贴的。他创建的我们感兴趣的东西是`BlockSig()`函数：

```
static const char *BlockSig(id blockObj)
{
    struct Block *block = (__bridge void *)blockObj;
    struct BlockDescriptor *descriptor = block->descriptor;

    assert(block->flags & BLOCK_HAS_SIGNATURE);

    int index = 0;
    if(block->flags & BLOCK_HAS_COPY_DISPOSE)
        index += 2;

    return descriptor->rest[index];
} 
```

它将返回（对于拥有它的块（它们都使用最近的 Clang）），一个描述块的返回和参数类型的[类型编码字符串。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)从那里，您可以创建一个`NSMethodSignature`对象，并要求它`numberOfArguments`：

```
 NSString * (^block)(int, NSArray *) = ^NSString * (int i, NSArray * a){
        return @"Oh, yeah!";
 };
 const char * types = BlockSig(block);
 NSMethodSignature * sig = [NSMethodSignature signatureWithObjCTypes:types];
 [sig numberOfArguments]; 
```

结果是 3，因为它包含块本身的隐藏参数（并且块不使用隐藏`_cmd`参数，否则它将是 4）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:40:01.390

答案是你不能。请参阅 Mike Ash 页面上关于此的评论：

[搜索](http://www.mikeash.com/pyblog/gcd-is-not-blocks-blocks-are-not-gcd.html)将[您发送到此处的 Intropection](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2009-September/006378.html)

那么，你真正的问题是什么？如果您正确地构建参数，您可以确保您的系统正常运行。例如，您可以使用 C++ 对参数的默认值执行的操作，并将每个块转换为采用最大参数数的类型，并始终将那么多项目压入堆栈。或者你总是可以让第一个参数是你压入堆栈的参数的数量。如果您推送对象而不是数字/指针，那么您的 r 块可以查看每个参数的类并动态适应。

# php - 读取 .csv ANSI 文件并写入 mysql

> ID：11561814
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:22:46.037
> 
> 标签：php, mysql, csv, utf-8, ansi

我有一个问题。我有保存为 CSV 的 excel 文件，我需要用 PHP 读取该文件并插入到 mysql 中，但问题是字符集特别是 čćšđž。我尝试了 utf8_encode() 以及我能想到的几乎所有东西。

示例：

它插入“Petroviæ”，但应该是“Petrović”

编辑：

```
<?php

mysql_connect("localhost", "user", "pw");  
mysql_select_db("database");  

$fajl = "Prodajna mreza.csv"; 
$handle = @fopen($fajl, "r");
if ($handle) {
    $size = filesize($fajl);

    if(!$size) {
        echo "File is empty.\n";
        exit;
    }

    $csvcontent = fread($handle,$size);
    $red = 1;

    foreach(explode("\n",$csvcontent) as $line) {
        if(strlen($line) <= 20)
        {
            $red++;
            continue;
        }
        if($red == 1)
        {
            $red++;
            continue;
        }
        $nesto = explode(",", $line);

        if($nesto[0] == '')
            continue;

        mysql_query("INSERT INTO table(val1, val2, val3, val4, val5, val6, val7, val8) VALUES ('".$nesto[0]."','".$nesto[1]."','".$nesto[2]."','".$nesto[3]."','".$nesto[4]."','".$nesto[5]."','".$nesto[6]."','".$nesto[7]."')");  

        $red++;
    }
    fclose($handle);
}
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:42:29.180

[首先：不鼓励](http://de2.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)使用这个 mysql 扩展。所以你可能想切换到别的东西。另请注意，您通过简单地粘贴字符串来编写查询的方式使其容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。只有当你真的确定你阅读的文件内容不会有任何丑陋的意外时，你才应该这样做。

看来您的文件读取和客户端 mysql 代码都没有做任何与字符集转换相关的事情，所以我假设那些只是传递字节，而不关心它们的解释。因此，您只需确保服务器正确解释这些字节。

从您给出的示例来看， ć 变成了 æ，我会说您的文件在[ISO-8859-2](http://en.wikipedia.org/wiki/ISO/IEC_8859-2)中，但数据库的读取方式不同，很可能是[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)。您应该确保您的数据库实际上可以接受其列的所有 ISO-8859-2 字符。阅读有关[字符集支持](http://dev.mysql.com/doc/refman/5.6/en/charset.html)的 MySQL 手册，并将一些合适的默认字符集（可能在数据库级别上最好）设置为[`utf8`](http://dev.mysql.com/doc/refman/5.6/en/charset-charsets.html)（首选）或[`latin2`](http://dev.mysql.com/doc/refman/5.6/en/charset-charsets.html). 您可能必须重新创建表才能应用此更改。

接下来，您应该设置连接的字符集以匹配文件的字符集。所以`utf8`这里肯定是错误的，还有`latin2`要走的路。

*   使用您当前的 API，可以使用[mysql_set_charset](http://de2.php.net/manual/en/function.mysql-set-charset.php) ("latin2") 来完成此操作。
*   该页面还描述了与其他前端一起使用的等效方法。
*   作为替代方案，您可以使用查询来设置：mysql_query(" [SET NAMES](http://dev.mysql.com/doc/refman/5.6/en/charset-connection.html) 'latin2';");

完成所有这些之后，您还应该确保为从数据库*读取的任何脚本正确设置了内容。*换句话说，生成的 HTML 的字符集必须与`character_set_results`MySQL 会话的字符集匹配。否则，很可能是数据正确存储在您的数据库中，但在向用户显示时仍然出现损坏。如果您可以选择，我会说`utf8`在这种情况下使用，因为这样做可以更容易地在需要时包含不同的数据。

如果仍然存在一些问题，您应该确定它们是在从文件读取到 php 时，在与 mysql 交换数据时，还是在以 HTML 形式呈现结果时。该字符串`"Petrovi\xc4\x87"`是`utf8`您的示例的表示形式，并且`"Petrovi\xe6"`是`latin2`表单。您可以使用这些字符串显式地传递具有已知编码的数据，或者根据这些字符串之一检查传入的传输值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:33:22.580

it shouldn't be a problem importing a csv from a csv to a database if both the file and the database collation are utf-8.

```
<?php
db = @mysql_connect('localhost', 'user', 'pass');
@mysql_select_db('my_database');

$CSVFile = "file.csv";

mysql_query('LOAD DATA LOCAL INFILE "' . $CSVFile . '" INTO TABLE my_table
  FIELDS TERMINATED BY "," LINES TERMINATED BY "\\r\\n";');

mysql_close($db);

?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T13:26:58.083

你可以添加你自己的。**phpmyadmin**中的 CSV ...
导入 -> 格式 = csv 并点击“导入”

或者，如果您不想使用 phpmyadmin ！

```
BULK INSERT csv_dump 
    FROM 'c:\file.csv' 
    WITH 
    ( 
        FIELDTERMINATOR = '\t', 
        ROWTERMINATOR = '\n' 
    ) 
```

# java - Java中的方法链

> ID：11561817
> 
> 赞同：40
> 
> 时间：2012-07-19T13:22:50.807
> 
> 标签：java, methods, chaining, method-chaining

之前在这里回答了一些问题以及我最近一直在做的一些工作时，我一直想知道为什么 Java 不支持其内置类的方法链接。

例如，如果我要创建一个`Car`类，我可以通过 reutrning**而**`this`不是 void 使其可链接，如下所示：

```
public class Car {
    private String make;        

    public Car setMake(String make) {
        this.make = make;
        return this;
    }   
} 
```

内置库不倾向于以这种方式做事有什么特别的原因吗？方法链有缺点吗？

我可能忽略了一些可以解释缺乏方法链接的东西，但是任何默认返回 void 的 setter 方法都应该返回*对此*的引用（至少在我看来应该如此）。这将使以下情况更加清晰。

```
container.add((new JLabel("label text")).setMaximumSize(new Dimension(100,200))); 
```

而不是更冗长的：**注意：如果您愿意，它不会阻止您以这种方式编码。**

```
JLabel label = new JLabel("label text");
label.setMaximumSize(new Dimension(100,200));
container.add(label); 
```

我很想听听这个决定背后的原因，如果我不得不猜测这将是与此相关的开销，因此应该只在需要时使用。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-19T13:26:24.310

嗯。在两个方向上都存在可读性论点——比如试图在一行中放太多东西。

但老实说，我怀疑这是出于历史原因：在开发例如 Swing 时，普遍的“链接”行为并没有真正流行或广为人知。您可能会争辩说它应该在以后添加，但这样的事情往往会造成二进制不兼容以及 Sun/Oracle 历来非常谨慎的其他问题。

更新的 JDK 库——例如[`ByteBuffer`](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html)一个主要的、众所周知的例子——*提供*了链式行为等，这是有意义的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-19T13:28:16.660

我能想到的另一个原因是**性能**，或者更准确地说：不要为你不使用的东西付费。`return this`在每种方法之后的成本都不是很高，但仍然需要很少的额外 CPU 周期和一个 CPU 注册表。

甚至有一个想法为`return this`每个声明`void`返回值的方法添加隐式，但它被拒绝了。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-19T13:25:35.153

虽然我们只能猜测真正的原因，但其中之一可能是严格来说它不是很OO。

如果您将方法视为代表建模世界的动作的动作，则方法链接并不真正适合该画面。

另一个原因可能是当您尝试覆盖链式方法时可能会出现混乱。想象一下这种情况：

```
class Foo {
   Foo chainedMethod() {...}
}

class Bar extends Foo {
   Foo chainedMethod() {...} //had to return Foo for Java versions < 1.5
   void doStuff();
} 
```

因此，当您尝试这样做时`new Bar().chainedMethod().doStuff()`，它不会编译。而且`((Bar)new Bar().chainedMethod()).doStuff()`看起来不太好，是吗:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-19T13:28:28.190

方法链通常与 Builder 模式一起使用，您可以在`StringBuilder`类中看到这一点。除此之外，方法链接可以使命令和创建分离不太清晰，例如`repaint()`也应该是流利界面的一部分？然后我可以：

```
container.add(label).repaint().setMaximumSize(new Dimension(100,200))); 
```

突然我的调用顺序变得很重要，它可以隐藏在方法链中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T13:30:54.617

未实现方法链接的原因可能有以下几点：

*   Method Chaining 最大的问题是完成问题。虽然有一些变通方法，但通常如果遇到这种情况，最好使用嵌套函数。如果您陷入上下文变量的混乱，嵌套函数也是一个更好的选择。

*   无法保证链外的对象实际上会返回有效的非空对象。此外，调试这种代码风格通常要困难得多，因为许多 *IDE* 不会在调试时将方法调用评估为可以检查的对象

*   当您调用其他类的例程以将参数传递给链接方法之一时，当有很多参数要传递主要是因为行变得很长时，它可能会令人困惑

*   还有一个性能问题，会在内存上下功夫

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T13:48:25.553

你真的在问[得墨忒耳法则](http://c2.com/cgi/wiki?LawOfDemeter)

“只和你的直系朋友交谈”

请注意，上面的链接是一个很好的资源，但是您可能会在那里花费很长时间而没有得到您正在寻找的答案！:-)

# asp.net-mvc-3 - 实体框架：没有主键/无法执行存储过程

> ID：11561819
> 
> 赞同：2
> 
> 时间：2012-07-19T13:22:56.497
> 
> 标签：asp.net-mvc-3, visual-studio-2010, entity-framework, stored-procedures, primary-key

我有一个带有存储过程的数据库，我使用了 Ado.Net Entity Data Modell 和 Ado.Net DBContext 生成器。在这部分之后我得到了错误：“没有初级密钥”。我在 entityset 行中的 .edmx 文件中进行了修改： store.schema="dbo" 到 schema="dbo" 并删除 ...。这种方式适用于更新行，但存储过程不会执行。

示例：编辑工作后，我插入此行进行编辑：

```
db.SetChangedByUserTrue(id); 
```

所以我的控制器是：

```
[ValidateInput(false)]
    [HttpPost]
    public ActionResult Edit(int id, ProductResource blog)
    {
        try
        {
            using (var db = new OnlineCAT_Maint_TESTEntities())
            {
                db.Entry(blog).State = System.Data.EntityState.Modified;
                db.SaveChanges();
                db.SetChangedByUserTrue(id);

                return RedirectToAction("Index");
            }
        }
        catch
        {
            return View();
        }
    } 
```

我的SP：

```
更改程序 SetChangedByUserTrue
    -- 这里添加存储过程的参数
    @ProductResourceId 整数

作为
开始
    -- 添加了 SET NOCOUNT ON 以防止额外的结果集
    -- 干扰 SELECT 语句。
    设置无计数；
    -- 在此处插入过程语句
    更新 OnlineCAT_Maint_TEST.dbo.ProductResource 设置 ChangedByUser = 1 其中 ProductResourceId = @ProductResourceId
结尾  
```

这是错误：

> {“无效的对象名称'OnlineCAT_Maint_TEST.dbo.ProductResource'。”}

两个问题之间的联系？解决办法是什么？

# java - 如何使用 Jackson 2.0 将 DateTime 对象（反）序列化为 ISO8601？

> ID：11561820
> 
> 赞同：3
> 
> 时间：2012-07-19T13:22:56.980
> 
> 标签：java, jackson

我想知道是否可以使用 Jackson 将 Joda`DateTime`对象序列化为 ISO8601`String`而无需创建自定义`JsonSerializer<DateTime>`.

当然，这是一个足够常见的函数，它内置在某个地方的库中？我能找到的最接近的是 a `SerializationFeature.WRITE_DATES_AS_TIMESTAMPS`，但这似乎只适用于`Date`对象。

**编辑：**

我找到[了这个类](http://fasterxml.github.com/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/util/ISO8601DateFormat.html): `ISO8601DateFormat`，但是当我尝试以下代码时，我没有得到 ISO8601 字符串：

```
ObjectMapper mapper = new ObjectMapper();
mapper.setDateFormat(new ISO8601DateFormat());
mapper.writer().writeValueAsString(DateTime.now()); 
```

看起来杰克逊没有平等对待 Date 和 DateTime 对象。

**更新：**

我最终为 ISO8601 DateTime 字符串编写了一个自定义序列化程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:27:14.970

我自己没有尝试过，但看起来[你应该能够做到这一点](http://wiki.fasterxml.com/JacksonFAQDateHandling)：

```
// Set the date format to the desired (in this case, ISO8601)
objectMapper.getDeserializationConfig().setDateFormat(myDateFormat);

// or, as of Jackson 1.8, use
ObjectMapper#withDateFormat(myDateFormat) 
```

自从

> 从 1.4 版开始，Jackson 提供了对 Joda Time 数据类型的一些支持：基本上，它`DateTime`可以像`java.util.Date`处理方式一样自动序列化/反序列化。

当前的 API 调用是：

```
.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS); 
```

# c - 将字符串从数组传递到C中的函数指针

> ID：11561821
> 
> 赞同：-1
> 
> 时间：2012-07-19T13:22:59.377
> 
> 标签：c, arrays, string, function

任何人都可以帮助我解决我看不到的代码问题。我有一个要显示的字符串数组。一个变量，它增加和减少并希望将字符串传递给函数。问题是我想要的整个字符串没有被传递

即 ucMainMenu = 1 MenuString[1] = "TIME" DisplayString("TIME")

```
const char MenuString[6][8] = {"UNITS", "TIME", "DATE", "PRINT", "BTOOTH", "SERVICE"};

void main
{
   ucMainMenu++; //variable changing
   DisplayString(MenuString[ucMainMenu]);  //look up variable in array pass string to function
}

void DisplayString(char *cDisplayString)
{
 //do stuff with string
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:26:24.600

尝试这个：

```
const char MenuString[6][8] = {"UNITS", "TIME", "DATE", "PRINT", "BTOOTH", "SERVICE"};

void DisplayString(const char *cDisplayString)
{
 //do stuff with string
    printf("%s", cDisplayString);
}

int main(int argc, char * argv[]){

    int ucMainMenu = 1;
    DisplayString(MenuString[ucMainMenu]);  //look up variable in array pass string to function

    getchar();

} 
```

[在此处](http://publications.gbdirect.co.uk/c_book/chapter6/initialization.html)阅读 C 中的初始化

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:25:43.053

您可以尝试使用 const char* 指针...

```
void DisplayString( const char *cDisplayString)
{
   //do stuff with string
} 
```

# objective-c - 基于图层的内容过滤器在 10.8 中不呈现，无论是从 Interface Builder 还是以编程方式

> ID：11561824
> 
> 赞同：0
> 
> 时间：2012-07-19T13:23:03.173
> 
> 标签：objective-c, macos, cocoa, core-animation, core-image

在 Lion 及以下版本中，您可以使用 Interface Builder 打开 CALayers，然后将过滤器应用于按钮、标签、视图等。然而，在 10.8 中，这些 UI 元素根本不会呈现到屏幕上。在我的测试中，以编程方式设置 CALayer 的 contentFilters 也会使其“不可见”。

我做了一个简单的测试项目来显示这个错误：

[https://dl.dropbox.com/u/12790096/ContentFilterTest.zip](https://dl.dropbox.com/u/12790096/ContentFilterTest.zip)

在 Lion 上，测试应用程序如下所示：

![10.7 测试应用截图](../Images/9468458bbdaf6e5cb2a8ad1876939e57.png)

在 Mountain Lion 上，测试应用程序如下所示：

![在此处输入图像描述](../Images/1e79507afa91144eda37095f1a4a5799.png)

作为参考，这是在 ML 的 GM 构建上运行的，由 Xcode 4.4 GM 种子构建。

# mysql - 从 MySQL 获取更新的数据到 excel

> ID：11561834
> 
> 赞同：0
> 
> 时间：2012-07-19T13:23:37.017
> 
> 标签：mysql, excel

有什么方法可以将数据从 MySQL 获取到 EXCEL。我尝试通过标准方式（ODBC）来做到这一点。

但是有什么方法可以一次将所有表格数据提取到excel表格中，以便我可以使用它们绘制图表。如果在 MySQL 中添加了任何数据，更新的数据应该会在我下次打开它时反映在 Excel 中，并且应该更新图表。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:34:15.250

你需要为此编写代码。如果你使用的是.Net，那么你可以直接以excel的形式导出文件。但是如果你使用java，那么你需要为此编写代码。你需要使用**jxl.jar**。

提示在下面给出的 URL 中给出。

[http://javamix.wordpress.com/2009/05/01/inserting-data-into-excel-sheet-using-jexcel-api/](http://javamix.wordpress.com/2009/05/01/inserting-data-into-excel-sheet-using-jexcel-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:34:26.363

[您可以使用任何 MySQL GUI 工具（如SQLyog](http://www.webyog.com/en/downloads.php)、[MySQL Workbench](http://www.mysql.com/products/workbench/)）将数据从 MySQL 导出为 Excel 。我使用 SQLyog，这里是附加的屏幕截图，它可以很容易地完成。

但我担心，当 MySQL 发生变化时，有任何直接和简单的方法来更新 Excel 中的数据。

希望这可以帮助。 ![截屏](../Images/2a62c5ac8205efb35d228a46fd0ab2e0.png)

# android - Android 按钮宽度成比例

> ID：11561836
> 
> 赞同：0
> 
> 时间：2012-07-19T13:23:47.287
> 
> 标签：android, layout

我需要在一行中放置 3 个按钮。/使用 LinearLayout/。问题是在按钮上更改文本时。宽度因“android:layout_width="wrap_content" 而改变。我想确保 thab 按钮将占据屏幕宽度 i 4:4:2 的比例。子句 'wrap_content' 打破了这一点，但我不能使用确切的尺寸，因为我没有在设计时不知道设备屏幕宽度。

有人知道不使用代码解决这个问题的简单方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:24:58.843

不要将它们的宽度设置为 wrap_content。改为设置比例权重：

```
<LinearLayout
    ...
    layout_width = "match_parent"
    layout_height = "wrap_content" />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 2 />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 2 />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 1 />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:28:43.917

尝试以下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:weightSum="10"   //    SEE THIS IS 4+4+2 = 10
        android:layout_centerHorizontal="true" >

        <Button
            android:layout_weight="4"   // THIS    IS   4
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:layout_weight="4"   // THIS    IS   4
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:layout_weight="2"   // THIS    IS   2
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:35:47.013

应该是 android:layout_weight="4dp"

# python - 龙卷风日志格式化程序

> ID：11561839
> 
> 赞同：2
> 
> 时间：2012-07-19T13:23:54.170
> 
> 标签：python, logging, tornado

如何覆盖（或设置格式化程序）默认龙卷风的日志记录，我想将 remote_addr 变量添加到所有日志记录消息中。我尝试在应用程序运行部分设置 logging.Formatter("...") ，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:36:28.900

从源代码[http://www.tornadoweb.org/documentation/_modules/tornado/options.html#enable_pretty_logging](http://www.tornadoweb.org/documentation/_modules/tornado/options.html#enable_pretty_logging)可以看出，`tornado`它不允许日志消息的通用格式。

如果您想要自己的格式，则必须禁用`tornado`' 日志记录并初始化您自己的日志记录处理程序。

# sharepoint - 使用 SAS 写入外部 Sharepoint 库

> ID：11561842
> 
> 赞同：1
> 
> 时间：2012-07-19T13:24:00.043
> 
> 标签：sharepoint, sharepoint-2010, sas

我需要一个使用 SAS 将文件 (.html) 加载到共享点库的例程。该站点位于防火墙之外（无法使用“映射网络驱动器”方法）。

共享点库配置了“无版本控制”等，我的用户名/密码具有管理员权限..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:37:12.223

我相信有比 SAS 更简单的方法（工具）来做到这一点，所以我会让 SAS 调用其他一些进程 - 例如，如果你的 SAS 在 Windows 上，它可以调用（甚至生成）Powershell 脚本。这个[http://poshcode.org/2122](http://poshcode.org/2122)似乎是一种方式。

我已经通过 SAS 调用`curl`将文件上传到 SAS webDAV 服务器做了类似的事情。

如果您想要纯 SAS 方式 - 使用 new`PROC HTTP`作为 Web 服务调用应该是可行的。有关 SAS 方面的信息，请参阅 [http://support.sas.com/documentation/cdl/en/proc/61895/HTML/default/viewer.htm#a003286672.htm ，可能是这个](http://support.sas.com/documentation/cdl/en/proc/61895/HTML/default/viewer.htm#a003286672.htm)[http://msdn.microsoft.com/en -us/library/ff798339.aspx](http://msdn.microsoft.com/en-us/library/ff798339.aspx) 用于 Sharepoint 端。无论如何，PROC HTTP 对于一些更简单的事情似乎很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T16:31:26.417

我认为您不能使用普通的旧 SAS 来执行此操作。如果您拥有 SAS Enterprise BI Server 产品，则有一个名为“SAS Web Parts for Microsoft SharePoint”的组件，但这实际上是 Sharpoint 和 BI 服务器之间的接口（因此您可以显示仪表板或运行存储过程）。

“最简单”的做法是创建您的 html 文件，然后使用 FTP 复制到 SharePoint 服务器。当然，这需要在另一端有一个 FTP 服务器，并且您需要寻求 Sharepoint 管理员的帮助。我自己也做过类似的事情。我自己不了解 SharePoint，但有一种方法可以设置它，以便自动识别目录中显示的所有内容。

可能还有其他解决方案，我也很想看到它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T15:49:41.660

Sharepoint 有这个美妙的网络界面。基本上你要做的就是打开你的网络浏览器，在 IE8+ 中效果最好，然后导航到你的站点 URL 并打开你的文档库。如果您选择功能区中的项目，则可以使用其界面上传文档。:)

SharePoint 已经公开了几个选项，使用旧的 Web 服务和新的休息服务。

[http://msdn.microsoft.com/en-us/library/ff798339.aspx](http://msdn.microsoft.com/en-us/library/ff798339.aspx)

# azure - 备份 Azure Blob 存储内容的最佳方法是什么

> ID：11561844
> 
> 赞同：46
> 
> 时间：2012-07-19T13:24:06.830
> 
> 标签：azure, backup, azure-storage, azure-blob-storage

我知道 Azure 存储实体（blob、表和队列）具有内置的弹性，这意味着它们被复制到同一数据中心中的 3 个不同服务器。除此之外，它们还可以完全复制到物理上位于不同地理区域的不同数据中心。出于所有实际目的，在这种情况下丢失数据的可能性几乎为零。

但是，如果一个草率的开发人员（或受酒精影响的开发人员 :)）不小心通过 Azure 门户或 Azure 存储资源管理器工具删除了存储帐户，会发生什么情况？最糟糕的是，如果黑客控制了您的帐户并清除了存储空间怎么办？有没有办法检索已删除 blob 的千兆字节，还是这样？不知何故，我认为 Azure 基础设施在这里提供了一个优雅的解决方案，但我找不到任何文档。

我能想到的唯一解决方案是编写我自己的进程（工作者角色），定期将我的整个存储备份到不同的订阅/帐户，从而从本质上将存储和交易成本加倍。有什么想法吗？

问候，

阿基尔

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-19T15:58:13.940

根据您要备份数据的位置，有两个选项可用：

1.  本地备份数据 - 如果您希望在基础架构中本地备份数据，您可以：使用存储客户端库或使用 REST API 或 b 编写您自己的应用程序。使用第 3 方工具，例如[Cerebrata Azure Management Cmdlets](http://www.cerebrata.com/Products/AzureManagementCmdlets)（披露：我为 Cerebrata 工作）。

2.  在云中备份数据 - 最近，Windows Azure 存储团队宣布了异步复制 Blob 功能，该功能基本上允许您将数据从一个存储帐户复制到另一个存储帐户，而无需在本地下载数据。这里要注意的是，您的目标存储帐户应在 2012 年 6 月 7 日之后创建。您可以在 Windows Azure 博客上阅读有关此功能的更多信息：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12 /introducing-asynchronous-cross-account-copy-blob.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-asynchronous-cross-account-copy-blob.aspx)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-27T18:40:21.780

接受的答案很好，但我花了几个小时来破译所有内容。

我已经将我现在在生产中使用的解决方案放在一起。我公开方法`Backup()`，然后每天（在午夜）`Web Api`调用该方法。`Azure WebJob`

请注意，我采用了原始源代码，并对其进行了修改：

*   它不是最新的，所以我更改了一些方法名称
*   添加了重试复制操作保护措施（对同一个 blob 进行 4 次尝试后失败）
*   添加了一些日志记录-您应该将其换成自己的。
*   在两个存储帐户之间进行备份（复制容器和 blob）
*   添加清除 - 它摆脱了不需要的旧容器（保留 16 天的数据）。你可以随时禁用它，因为空间很便宜。

可以从以下位置找到源：[https ://github.com/ChrisEelmaa/StackOverflow/blob/master/AzureStorageAccountBackup.cs](https://github.com/ChrisEelmaa/StackOverflow/blob/master/AzureStorageAccountBackup.cs)

这就是我在控制器中使用它的方式（请注意，您的控制器应该只能由 azure webjob 调用 - 您可以在标题中检查凭据）：

```
[Route("backup")]
[HttpPost]
public async Task<IHttpActionResult> Backup()
{
    try
    {
        await _blobService.Backup();
        return Ok();
    }
    catch (Exception e)
    {
        _loggerService.Error("Failed to backup blobs " + e);
        return InternalServerError(new Exception("Failed to back up blobs!"));
    }
} 
```

注意：我想将此代码添加为帖子的一部分，但浪费了 6 分钟试图将该代码放入此帖子，但失败了。格式化根本不起作用，它完全坏了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-18T03:01:49.060

我使用**Azure 数据工厂**备份 Azure 存储，效果很好。它真的很容易使用，具有成本效益并且工作得很好。

只需创建数据工厂 (v2)，设置与数据源的数据连接（它目前支持 Azure 表、Azure Blob 和 Azure 文件），然后设置数据复制管道。

管道可以合并、覆盖等，您可以设置自定义规则/通配符。

设置管道后，您应该设置计划触发器。这将在一定时间间隔启动备份以满足您的需求。

我已经使用它几个月了，它非常完美。没有代码、没有 VMS、没有自定义 PowerShell 脚本或第三方软件。纯 Azure 解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-19T23:33:06.847

我有完全相同的要求：从 Azure 备份 blob，因为我们有数百万客户，你是对的 - 一个拥有完全访问权限的草率开发人员可能会危及整个系统。

因此，我编写了一个完整的应用程序**“Blob To Local Backup”**，在 MIT 许可下在 github 上免费和开源：[https ://github.com/smartinmedia/BlobToLocalBackup](https://github.com/smartinmedia/BlobToLocalBackup)

它解决了您的许多问题，即：a) 您只能授予此应用程序的 READ 访问权限，以便应用程序无法破坏 Azure 上的任何数据 b) 备份到服务器，您的马虎开发人员或黑客没有与您的 Azure 帐户具有相同的访问权限。c) 该软件提供版本控制，因此您甚至可以保护自己免受例如勒索/加密攻击。d) 我包含了一种序列化方法而不是数据库，因此您甚至可以在 Azure 上拥有数百万个文件，并且您仍然能够保持同步（我们在 Azure 上有 2000 万个文件）。

**以下是它的工作原理**（有关更多详细信息，请阅读 github 上的 README）：

1.  您在主文件夹中设置 appsettings.json 文件。您可以在此处为整个访问权限提供 LoginCredentials，或者在存储帐户级别上进行更精细的操作：

```
 {
     "App": {

        "ConsoleWidth": 150,
        "ConsoleHeight":  42,

        "LoginCredentials": {
            "ClientId": "2ab11a63-2e93-2ea3-abba-aa33714a36aa",
            "ClientSecret": "ABCe3dabb7247aDUALIPAa-anc.aacx.4",
            "TenantId": "d666aacc-1234-1234-aaaa-1234abcdef38"
        },
        "DataBase": {
          "PathToDatabases": "D:/temp/azurebackup"
        },
        "General": {
          "PathToLogFiles": "D:/temp/azurebackup"
        }
      }
    } 
```

2.  像这样将作业设置为 JSON 文件（我添加了许多选项）：

```
 {
      "Job": {
        "Name": "Job1",
        "DestinationFolder": "D:/temp/azurebackup",
        "ResumeOnRestartedJob": true,
        "NumberOfRetries": 0, 
        "NumberCopyThreads": 1,
        "KeepNumberVersions": 5,
        "DaysToKeepVersion": 0, 
        "FilenameContains": "", 
        "FilenameWithout": "", 
        "ReplaceInvalidTargetFilenameChars": false,
        "TotalDownloadSpeedMbPerSecond": 0.5,

        "StorageAccounts": [
          {

            "Name": "abc",
            "SasConnectionString": "BlobEndpoint=https://abc.blob.core.windows.net/;QueueEndpoint=https://abc.queue.core.windows.net/;FileEndpoint=https://abc.file.core.windows.net/;TableEndpoint=https://abc.table.core.windows.net/;SharedAccessSignature=sv=2019-12-12&ss=bfqt&srt=sco&sp=rl&se=2020-12-20T04:37:08Z&st=2020-12-19T20:37:08Z&spr=https&sig=abce3e399jdkjs30fjsdlkD",
            "FilenameContains": "",
            "FilenameWithout": "",
            "Containers": [
              {
                "Name": "test",
                "FilenameContains": "",
                "FilenameWithout": "",
                "Blobs": [
                  {
                    "Filename": "2007 EasyRadiology.pdf",
                    "TargetFilename": "projects/radiology/Brochure3.pdf"
                  }
                ]
              },
              {
                "Name": "test2"
              }
            ]

          },
          {
            "Name": "martintest3",
            "SasConnectionString": "",
            "Containers": [] 
          }
        ]
      }

    } 
```

3.  使用您的工作运行应用程序：

```
 blobtolocal job1.json 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-12T10:26:19.240

在不参考 3rd 方解决方案的情况下，您现在可以使用 Azure 中的内置功能实现这一目标，使用以下步骤可能有助于保护您的 blob。

1.  **Azure 存储 Blob** 的软删除更好的步骤是首先启用软删除，现在在 GA 中： [https ://azure.microsoft.com/en-us/blog/soft-delete-for-azure-storage-blobs-ga](https://azure.microsoft.com/en-us/blog/soft-delete-for-azure-storage-blobs-ga)

2.  **读取访问异地冗余存储** 第二种方法是为 RA-RGA 启​​用异地复制，因此如果第一个数据中心关闭，您始终可以从另一个区域的辅助副本读取，您可以在此处找到更多信息： [https： //docs.microsoft.com/en-us/azure/storage/common/storage-redundancy-grs](https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy-grs)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-15T13:41:14.650

您可以制作博客容器的快照，然后下载快照以进行时间点备份。

[https://docs.microsoft.com/en-us/azure/storage/storage-blob-snapshots](https://docs.microsoft.com/en-us/azure/storage/storage-blob-snapshots)

> 快照是在某个时间点拍摄的 Blob 的只读版本。快照对于备份 blob 很有用。创建快照后，您可以读取、复制或删除它，但不能对其进行修改。+ blob 的快照与其基本 blob 相同，只是 blob URI 具有附加到 blob URI 的 DateTime 值指示拍摄快照的时间。例如，如果页面 Blob URI 是[http://storagesample.core.blob.windows.net/mydrives/myvhd](http://storagesample.core.blob.windows.net/mydrives/myvhd)，则快照 URI 类似于 [http://storagesample.core.blob.windows.net/mydrives/myvhd ?快照=2011-03-09T01:42:34.9360000Z](http://storagesample.core.blob.windows.net/mydrives/myvhd?snapshot=2011-03-09T01:42:34.9360000Z)。

# ruby-on-rails-3 - Rails 3.2.2 日志文件无序，请求交织

> ID：11561846
> 
> 赞同：11
> 
> 时间：2012-07-19T13:24:13.040
> 
> 标签：ruby-on-rails-3, logging

我记得获得了有序的日志文件，这样您就可以遵循一个请求，然后是下一个请求，依此类推。

现在，正如我 4 岁的孩子所说的那样，日志文件是“全部乱码”，这意味着它们不再是单独的、不同的文本块。来自两个请求的日志会交织/混淆。

例如：

```
Started GET /foobar
...
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.8ms)
Patient Load (wait, that's from another request that has nothing to do with foobar!)
[ blank space ]
Something else 
```

这令人抓狂，因为我无法在一个请求中说出发生了什么。

这是在乘客上运行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:48:48.370

我试图搜索相同的答案，但找不到任何好的信息。我不确定您是否应该修复服务器或 Rails 代码。

如果您想了解有关此问题的更多信息，这里是删除旧记录方式的提交[https://github.com/rails/rails/commit/04ef93dae6d9cec616973c1110a33894ad4ba6ed](https://github.com/rails/rails/commit/04ef93dae6d9cec616973c1110a33894ad4ba6ed)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T10:14:39.430

如果您重视生产日志的可读性胜过其他一切，您可以使用

```
PassengerMaxInstancesPerApp 1 
```

配置。它可能会导致一些缩放问题。或者，您可以在 application.rb 中添加类似的内容：

```
process_log_filename = Rails.root + "log/#{Rails.env}-#{Process.pid}.log"
log_file = File.open(process_log_filename, 'a')
Rails.logger = ActiveSupport::BufferedLogger.new(log_file) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T17:00:46.347

是的！，他们已经做了一些更改，`ActiveSupport::BufferedLogger`所以不再等到请求结束来刷新日志：

*   [http://news.ycombinator.com/item?id=4483390](http://news.ycombinator.com/item?id=4483390)
*   [https://github.com/rails/rails/commit/04ef93dae6d9cec616973c1110a33894ad4ba6ed](https://github.com/rails/rails/commit/04ef93dae6d9cec616973c1110a33894ad4ba6ed)

但是他们添加了非常有趣的[ActiveSupport::TaggedLogging](http://api.rubyonrails.org/classes/ActiveSupport/TaggedLogging.html) *，*您可以在每条日志上添加任何您想要的标记。

*在您的情况下，使用请求 UUID**标记*日志可能会很好，如下所示：

 *```
# config/application.rb
config.log_tags = [:uuid] 
```

然后，即使日志被*弄乱了，*您仍然可以跟踪其中哪些与您正在跟进的请求相对应。

您可以使用此功能制作更多有趣的东西来帮助您进行日志研究：

*   [如何在 Rails 中记录用户名？](https://stackoverflow.com/questions/10811393/how-to-log-user-name-in-rails)
*   [http://zogovic.com/post/21138929607/running-time-in-rails-logs](http://zogovic.com/post/21138929607/running-time-in-rails-logs)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T12:10:23.453

好吧，对我来说，TaggedLogging 解决方案是行不通的，如果服务器严重崩溃，我可以忍受一些日志丢失，但我希望我的日志得到完美排序。因此，根据[问题评论的](https://github.com/rails/rails/issues/5388#issuecomment-6174010)建议，我将其应用于我的应用程序：

```
# lib/sequential_logs.rb
module ActiveSupport
  class BufferedLogger
    def flush
      @log_dest.flush
    end
    def respond_to?(method, include_private = false)
      super
    end
  end
end

# config/initializers/sequential_logs.rb
require 'sequential_logs.rb'

Rails.logger.instance_variable_get(:@logger).instance_variable_get(:@log_dest).sync = false 
```

据我所知，这并没有影响我的应用程序，它仍在运行，现在我的日志再次变得有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:49:10.450

他们应该添加一些准随机 reqid 并将其写在关于单个请求的每一行中。这样你就不会迷茫了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-29T21:03:06.387

我没用过，但我相信[Lumberjack 的`unit_of_work`方法](https://github.com/bdurand/lumberjack#units-of-work)可能就是你要找的。你打电话：

```
Lumberjack.unit_of_work do
  yield
end 
```

并且在该块或产生的块中完成的所有日志记录都带有唯一 ID 标记。*

# node.js - 将 Angular.js 与 Node.js 集成（Express+Tower.js）

> ID：11561854
> 
> 赞同：13
> 
> 时间：2012-07-19T13:24:38.107
> 
> 标签：node.js, angularjs, towerjs, total.js

我是节点新手。我非常喜欢 AngularJS 的方法。我喜欢我在 towerjs 中看到的东西。

有没有人把这两个连接在一起？我认为塔主要用于后端 api/rest 和 angular 用于客户端。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T20:12:18.400

I'm especially not familiar with tower.js, but from the docs it looks like it might not be practical to use the two together. There is quite a bit of overlap in the things AngularJS provides and the things tower.js provides (especially models, views, and controllers on the client).

I've written on [how to use AngularJS with a RESTful API provided by Express on my blog](http://briantford.com/blog/angular-express.html). Maybe that can help you get started.

Good luck! :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T13:32:04.967

Tower 用于服务器端，而 Angular 用于客户端，对吗？

所以你可以试试[这里](http://gelnior.wordpress.com/2012/04/28/how-to-quickly-start-a-single-page-application-with-node-js/)提到的。只需用铁塔代替铁路。

你可以检查这个使用 angularjs 的[brunch.io](https://github.com/scotch/angular-brunch-seed)骨架。

希望这能派上用场，伙计！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T16:27:44.227

由于事情发展非常迅速，因此有一些重大更新。

例如，一个名为 Total.js 的框架为使 Angular.js 与 Node.js 协同工作做了很多工作。

请查看他们的网站[http://www.totaljs.com/totalstack/](http://www.totaljs.com/totalstack/)以及他们提供的关于如何使用它的 6 (!) 示例：[https](https://github.com/totaljs/examples) ://github.com/totaljs/examples 。

相当了不起！希望有帮助！

注意：我与 Total.js 没有任何关系。

# r - 在特定的行索引处向数据框添加新行，而不是附加？

> ID：11561856
> 
> 赞同：171
> 
> 时间：2012-07-19T13:24:44.217
> 
> 标签：r, dataframe, insert

以下代码将向量与数据框组合在一起：

```
newrow = c(1:4)
existingDF = rbind(existingDF,newrow) 
```

但是，此代码始终在数据帧的末尾插入新行。

如何在数据框中的指定点插入行？例如，假设数据框有 20 行，如何在第 10 行和第 11 行之间插入新行？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-07-19T13:56:01.680

这是一个避免（通常很慢）`rbind`调用的解决方案：

```
existingDF <- as.data.frame(matrix(seq(20),nrow=5,ncol=4))
r <- 3
newrow <- seq(4)
insertRow <- function(existingDF, newrow, r) {
  existingDF[seq(r+1,nrow(existingDF)+1),] <- existingDF[seq(r,nrow(existingDF)),]
  existingDF[r,] <- newrow
  existingDF
}

> insertRow(existingDF, newrow, r)
  V1 V2 V3 V4
1  1  6 11 16
2  2  7 12 17
3  1  2  3  4
4  3  8 13 18
5  4  9 14 19
6  5 10 15 20 
```

如果速度不如清晰度重要，那么@Simon 的解决方案效果很好：

```
existingDF <- rbind(existingDF[1:r,],newrow,existingDF[-(1:r),])
> existingDF
   V1 V2 V3 V4
1   1  6 11 16
2   2  7 12 17
3   3  8 13 18
4   1  2  3  4
41  4  9 14 19
5   5 10 15 20 
```

（注意我们的索引`r`不同）。

最后，基准测试：

```
library(microbenchmark)
microbenchmark(
  rbind(existingDF[1:r,],newrow,existingDF[-(1:r),]),
  insertRow(existingDF,newrow,r)
)

Unit: microseconds
                                                    expr     min       lq   median       uq       max
1                       insertRow(existingDF, newrow, r) 660.131 678.3675 695.5515 725.2775   928.299
2 rbind(existingDF[1:r, ], newrow, existingDF[-(1:r), ]) 801.161 831.7730 854.6320 881.6560 10641.417 
```

**基准**

正如@MatthewDowle 总是向我指出的那样，随着问题规模的增加，需要检查基准以进行扩展。那么我们开始吧：

```
benchmarkInsertionSolutions <- function(nrow=5,ncol=4) {
  existingDF <- as.data.frame(matrix(seq(nrow*ncol),nrow=nrow,ncol=ncol))
  r <- 3 # Row to insert into
  newrow <- seq(ncol)
  m <- microbenchmark(
   rbind(existingDF[1:r,],newrow,existingDF[-(1:r),]),
   insertRow(existingDF,newrow,r),
   insertRow2(existingDF,newrow,r)
  )
  # Now return the median times
  mediansBy <- by(m$time,m$expr, FUN=median)
  res <- as.numeric(mediansBy)
  names(res) <- names(mediansBy)
  res
}
nrows <- 5*10^(0:5)
benchmarks <- sapply(nrows,benchmarkInsertionSolutions)
colnames(benchmarks) <- as.character(nrows)
ggplot( melt(benchmarks), aes(x=Var2,y=value,colour=Var1) ) + geom_line() + scale_x_log10() + scale_y_log10() 
```

@Roland 的解决方案可以很好地扩展，即使调用`rbind`：

```
 5       50     500    5000    50000     5e+05
insertRow2(existingDF, newrow, r)                      549861.5 579579.0  789452 2512926 46994560 414790214
insertRow(existingDF, newrow, r)                       895401.0 905318.5 1168201 2603926 39765358 392904851
rbind(existingDF[1:r, ], newrow, existingDF[-(1:r), ]) 787218.0 814979.0 1263886 5591880 63351247 829650894 
```

以线性比例绘制：

![线性的](../Images/4ae3432d5a7ce0591707749e98476d21.png)

和对数比例：

![日志日志](../Images/9379e854e82062e55b5f208c970d7bce.png)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-07-20T21:17:47.340

```
insertRow2 <- function(existingDF, newrow, r) {
  existingDF <- rbind(existingDF,newrow)
  existingDF <- existingDF[order(c(1:(nrow(existingDF)-1),r-0.5)),]
  row.names(existingDF) <- 1:nrow(existingDF)
  return(existingDF)  
}

insertRow2(existingDF,newrow,r)

  V1 V2 V3 V4
1  1  6 11 16
2  2  7 12 17
3  1  2  3  4
4  3  8 13 18
5  4  9 14 19
6  5 10 15 20

microbenchmark(
+   rbind(existingDF[1:r,],newrow,existingDF[-(1:r),]),
+   insertRow(existingDF,newrow,r),
+   insertRow2(existingDF,newrow,r)
+ )
Unit: microseconds
                                                    expr     min       lq   median       uq      max
1                       insertRow(existingDF, newrow, r) 513.157 525.6730 531.8715 544.4575 1409.553
2                      insertRow2(existingDF, newrow, r) 430.664 443.9010 450.0570 461.3415  499.988
3 rbind(existingDF[1:r, ], newrow, existingDF[-(1:r), ]) 606.822 625.2485 633.3710 653.1500 1489.216 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-10-28T13:15:37.693

`.before`in 参数可`dplyr::add_row`用于指定行。

```
dplyr::add_row(
  cars,
  speed = 0,
  dist = 0,
  .before = 3
)
#>    speed dist
#> 1      4    2
#> 2      4   10
#> 3      0    0
#> 4      7    4
#> 5      7   22
#> 6      8   16
#> ... 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-12-12T13:48:58.220

你应该试试 dplyr 包

```
library(dplyr)
a <- data.frame(A = c(1, 2, 3, 4),
               B = c(11, 12, 13, 14))

system.time({
for (i in 50:1000) {
    b <- data.frame(A = i, B = i * i)
    a <- bind_rows(a, b)
}

}) 
```

输出

```
 user  system elapsed 
   0.25    0.00    0.25 
```

与使用 rbind 函数相比

```
a <- data.frame(A = c(1, 2, 3, 4),
                B = c(11, 12, 13, 14))

system.time({
    for (i in 50:1000) {
        b <- data.frame(A = i, B = i * i)
        a <- rbind(a, b)
    }

}) 
```

输出

```
 user  system elapsed 
   0.49    0.00    0.49 
```

有一些性能提升。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-25T19:05:02.453

在数据框中的五行之后插入空白行并使用此库包。

```
library(berryFunctions)

df <- insertRows(df, 5 , new = "") 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2015-04-28T00:21:01.277

例如，您想将变量 2 的行添加到名为“edges”的数据的变量 1 中，只需这样做

```
allEdges <- data.frame(c(edges$V1,edges$V2)) 
```

# java - 为什么 FTP 服务器上的自签名小程序无法连接到 MySQL 数据库

> ID：11561857
> 
> 赞同：2
> 
> 时间：2012-07-19T13:24:44.087
> 
> 标签：java, mysql, database, applet

我正在处理上传到 ftp 服务器的小程序。该小程序应该连接到 MySQL 数据库（据我所知，它应该在同一台服务器上）。

注意：小程序是自签名的。

*   如果我在本地运行小程序，它工作正常。
*   如果我从网络浏览器本地启动小程序，它也可以完美运行。
*   但是当我将它上传到 ftp 服务器并从它的网站启动它时，它会在第 4 行冻结（DriverManager.getConnection() 方法）

.

```
public static void initConnection(final Settings info) throws ClassNotFoundException, SQLException
        {
            Class.forName("com.mysql.jdbc.Driver");
            Connection conn = DriverManager.getConnection("jdbc:mysql://" + info.getHost() + ":3306/" + info.getDbName(),
                    info.getUser(), info.getPass());
            stmt = conn.createStatement();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:33:50.327

看来我自己已经回答了这个问题。问题是，从尝试连接到数据库，到有一个完整的工作连接大约需要 3 分钟左右。从技术上讲，这个问题一直是无效的。我会看看我是否能找出它为什么这么慢，如果我找不到它，我会问另一个问题。

所以再一次，它与策略或权限无关。只是因为某种原因慢得要命。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:35:19.093

我认为这是因为，当您从服务器运行小程序时，Java 插件会强加一个严格的沙箱以防止执行恶意操作。其中之一是建立与其他计算机的连接。

只需编写一个策略文件，允许连接到数据库主机的端口 3306（用于`policytool`生成它；您需要使用和操作授予数据库主机的`java.net.SocketPermission`权限），然后将其嵌入到 JAR 中，并在代码，使用该文件创建一个安全管理器（[这里](http://www.javakb.com/Uwe/Forum.aspx/java-security/606/Policy-file-in-a-Jar)是一个示例）。`resolve``connect`

编辑：我从 AppletViewer 日志中注意到，当从远程位置启动代码时，您使用的解密类需要另一个默认情况下未授予的权限。按照上面的技术，但也授予权限`java.lang.RuntimePermission`（操作`accessClassInPackage.sun.misc`：），你应该没问题。

# javascript - 从外部 Javascript 文件调用方法

> ID：11561860
> 
> 赞同：0
> 
> 时间：2012-07-19T13:24:49.313
> 
> 标签：javascript, asp.net, html

我在 test.js 中定义了一个外部 JS 函数

```
function InvokeSupport(ID, TimeStamp, Hash) {

    var sUrl = '<%= System.Configuration.ConfigurationManager.AppSettings["URL"] %>' + "?uid=" + ID + "&t=" + TimeStamp + "&hash=" + Hash;

    window.open(sUrl, "Support", null, false);   
} 
```

在我的 asp.net 页面上，我有以下内容。

```
<script type="text/javascript" src="../../../scripts/test.js"></script>

<div class="User">
    <span class="UserName"><button type="submit" title="Help!" onclick="InvokeSupport()" class="Class1"></button> </span>
</div> 
```

问题

InvokeSupport 函数以未定义的形式返回并且无法工作，除非我将该函数放在它工作的 ASP.net 页面上。指向 javascript 文件的链接是正确的，因为我在同一个存储库中的其他文件工作正常。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:31:32.773

为什么在外部 js 文件中使用 ASP.NET 脚本标签？

将配置中的数据和附加参数传递给 javascript 函数。

此外，您可以使用 Firebug 和 Chrome devTools，它们可以向您显示发生错误的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:55:20.887

这应该有效。

```
function InvokeSupport(url, ID, TimeStamp, Hash) {

    var sUrl = url + "?uid=" + ID + "&t=" + TimeStamp + "&hash=" + Hash;

    window.open(sUrl, "Support", null, false);   
}

<script type="text/javascript" src="../../../scripts/test.js"></script>

<div class="User">
    <span class="UserName"><button type="submit" title="Help!" onclick="InvokeSupport('<%= System.Configuration.ConfigurationManager.AppSettings["URL"] %>',1,2,3)" class="Class1"></button> </span>
</div> 
```

# android - 我可以要求 Zygote 以 root 身份运行我的应用程序吗？

> ID：11561861
> 
> 赞同：3
> 
> 时间：2012-07-19T13:24:52.390
> 
> 标签：android, root

我正在研究在 Java Android 应用程序和/或其自己的 JNI 中获取超级用户权限的可能方法。众所周知的答案似乎是只能从那里运行“su”子shell和命令行命令，这既不简洁也不实用。我愿意接受这个决议，但我仍然想听听关于这个“假设”场景的意见。

阅读附近的 Android 源代码`java.com.android.server.am.ActivityManagerService`和`java.android.os.Process`文件`dalvik_system_Zygote.cpp`，在我看来，在应用程序启动期间，会检查应用程序记录的 UID 和（一个）GID（s）列表，并且所有这些值都通过套接字传递给 Zygote。Z 随后拾取数据并将其传递`setuid()`给`fork()`呼叫之后，无需进一步检查。因此，在我看来，如果 Activity Manager 路径被更改，简单的传递`--setuid=0`并可能传递`--setgid=0`给 Zygote 套接字应该会导致使用根 UID 运行我的 Activity。

这一切似乎都太简单了，我怀疑在此过程中会出现问题。不幸的是，对于像我这样没有经验的程序员来说，有太多的代码和新东西去尝试。有没有人走这条路，或者有什么明显的原因导致这行不通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:56:48.897

我想我刚刚找到了自己问题的答案。归功于@Chris Stratton，他指出我使用了模拟器，还指出了这种情况是多么荒谬。

关键在一个我没有看到的地方，在通过 Zygote 套接字和 Zygote 二进制文件本身发送命令*之间。*检查发生的地方是`com.android.internal.os.ZygoteConnection`，方法`applyUidSecurityPolicy`。如果调用者进程属于 root，则可能确实会请求 spawn 的 UID 为零（或其他任何值）。普通用户也可以使用套接字，但要求新的 UID 或 GID 会导致`ZygoteSecurityException`.

# c# - 在服务器之间快速传输大数据

> ID：11561862
> 
> 赞同：5
> 
> 时间：2012-07-19T13:24:56.723
> 
> 标签：c#, java, windows, networking

这是一个常见的问题，但谷歌搜索会产生很多废话。

随着数据量越来越高，以及处理能力和云计算能力，我们见证了对快速数据传输技术的日益增长的需求，这些技术能够通过在不同的服务器上传播/移动/共享数据来释放所有这些可用数据的力量/客户。

在我们的例子中，我们正在记录实时二进制数据（每天 50 Gig），我们需要每天向订阅者上传/下载它（是的，每个订阅服务器在本地都需要这些数据，用于计算和各种数据分析的东西）

所以**简而言之，今天有什么选择可以在远程 Windows 服务器**（VPS、云，具有“相当”一致的带宽 -（光纤放在一边）之间真正快速地传输许多 Gigs 数据）

这是一个悬而未决的问题。无论协议如何，每个想法都受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:56:50.230

通过网络发送和接收数据的挑战是多方面的。

1.  网络带宽是**最大的限制因素**，在应用程序级别您几乎无能为力（除了偶尔压缩数据，即使在这种情况下，压缩率也决定了增益）。所以更快的网络是首选。

2.  某些协议更适合传输某些类型的文件/数据。例如 http 是一个基于文本的协议，并不适合二进制和大内容。但由于它是最流行的网络协议，需要通过网络发送二进制内容，因此[编码和分块](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)等技术已经发展。如果您的数据按 GB 顺序排列，那么HTTP**确实不是您的选择。**

3.  **FTP**是用于通过网络传输文件的最流行的协议，它专门用于传输文件。有几个 FTP 扩展，如[GridFTP](http://en.wikipedia.org/wiki/GridFTP)、[bbftp](http://www.slac.stanford.edu/BFROOT/www/Computing/Offline/DataDist/bbftp-install.html)，它们是**专门**为大数据传输而设计的。

4.  BitTorrents 是另一个可以探索的选项。Facebook 使用 BitTorrent 将二进制文件推送到服务器（数以万计）。

你的问题是非常开放的，我受到我的经验的限制:)。[这是](http://moo.nac.uci.edu/~hjm/HOWTO_move_data.html)我发现的大数据传输交易的链接。希望这对您有所帮助。

# google-maps - 谷歌地图 v3 方向图标

> ID：11561864
> 
> 赞同：11
> 
> 时间：2012-07-19T13:25:01.127
> 
> 标签：google-maps, google-maps-api-3

在谷歌地图上显示行车路线时，左侧有方向图标（环形交叉路口、左箭头、右箭头等），我搜索了文档，但找不到在我的模块上显示图标的方法在创建时，有没有人找到一种在方向窗格上显示它们的方法。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-20T10:47:59.627

您可以使用“机动”字段`routes[i].legs[j].steps[k].maneuver`来显示这些图标。

如果您查看[setPanel](https://developers.google.com/maps/documentation/javascript/examples/directions-panel)教程，您可以看到它使用操作字段在方向面板中设置相应的图标。您可以检查每个步骤的图标是否由 CSS 类“.adp-{maneuver}”设置。

这是我在本示例使用的 CSS 文件中找到的操作列表：

*   渡船
*   渡轮火车
*   左叉
*   右叉
*   靠左
*   靠右
*   合并
*   左斜坡
*   斜坡右
*   环岛左
*   回旋处右
*   直的
*   左转
*   右转
*   急转左
*   右转
*   微左转
*   轻微右转
*   左转
*   右转

这些操作似乎不受本地化的影响，因此应该不是问题。

# javascript - 匹配查询的jquery长度

> ID：11561871
> 
> 赞同：1
> 
> 时间：2012-07-19T13:25:46.707
> 
> 标签：javascript, jquery

我将如何在不使用 .each() 且仅使用 JQuery 选择器的情况下编写这两种方法？

```
var xxxx = 0;
$('.clonedInput').each(function(index) {
    if($(this).children().filter(':checked').length == 2)
    xxxx++;
});

var num_normal_foods = 0;
$('[id^="amount_"]').each(function(index) {
    if($(this).val() == '30.00')
    num_normal_foods++;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:30:00.163

jQuery 选择有一个 .length 属性：

```
var len = $('.clonedInput :checked').length;
var len2 = $('[id^="amount_"][value="30.00"]').length; 
```

第一个查询返回任何 .clonedInput 类的所有已检查子项，然后对它们进行计数。

第二个查询查找所有以amount_ 开头并且值为“30.00”的ID。（属性查询可以像 [][] 那样链接）

**编辑：** 满足@Blazemonger

要获取任何类型元素的值（值适用于某些元素），请使用以下命令：

```
var len2 = $('[id^="amount_"]').filter(function() {
  return $(this).val() == "30.00";
}).length; 
```

**双重编辑**，因为我没用

```
var len = $('.clonedInput').filter(function(){
   return $(this).children(':checked').length == 2;
}).length; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:35:41.800

让我们一步一步来。

你开始：

```
var xxxx = 0;
$('.clonedInput').each(function(index) {
    if($(this).children().filter(':checked').length == 2)
    xxxx++;
}); 
```

对我来说，这看起来就像你只是在尝试[`filter`](http://api.jquery.com/filter)一组`.clonedInput`元素并找出有多少匹配过滤器：

```
var xxxx;
function hasTwoCheckedChildren(i) {
    return $(this).children(':checked').length == 2;
}
xxxx = $('.clonedInput').filter(hasTwoCheckedChildren).length; 
```

其次是：

```
var num_normal_foods = 0;
$('[id^="amount_"]').each(function(index) {
    if($(this).val() == '30.00')
    num_normal_foods++;
}); 
```

同样，这对我来说看起来像是一个过滤功能：

```
var num_normal_foods;
function valueIsThirty(i) {
    return +$(this).val() === 30;
}
num_normal_foods = $('[id^="amount_"]').filter(valueIsThirty).length; 
```

* * *

最后，重要的是代码执行您想要执行的操作。如果您编写的代码`.each`符合您的要求，则无需更改它。无论如何在幕后`filter`使用。`each`

# session - 刷新后阻止电子邮件发送，但在转到上一页时将其释放

> ID：11561875
> 
> 赞同：0
> 
> 时间：2012-07-19T13:25:49.020
> 
> 标签：session, coldfusion, cgi

我试图阻止网站在刷新网站后再次发送表单。问题是，当返回到前边更改内容并再次发送电子邮件时，它应该是可能的。

返回时，不会再次加载表单页面，也无法更改 SESSION 变量。但是用户应该仍然能够再次获取他的旧数据并且不必再次输入所有内容。

在仅使用 SESSION 设置变量后，我使用 CGI.HTTP_Referer 来获取用户来自的网站。但是在重新加载网站时，引用者不会改变。所以没有办法那样解决问题。

```
<cfif Right("#CGI.HTTP_REFERER#", 5) EQ "myForm">
    <cfset SESSION.send = true />
<cfelse>    
    <cfset SESSION.send = false />
</cfif> 
```

有没有办法用javascript或任何其他方式执行coldfusion代码

* * *

**我尝试了什么：**

```
<cfif isDefined("SESSION.actualSite") EQ "false" 
AND isDefined("SESSION.actualSite") EQ "false">

        <cfset SESSION.lastSite = ArrayNew(1) />
        <cfset SESSION.actualSite = ArrayNew(1) />
        <cftrace var="SESSION.lastSite" text="lastSite1" />
        <cftrace var="SESSION.acutalSite" text="acutalSite1" />
    </cfif>

    <cfif ArrayisEmpty(SESSION.actualSite) EQ "NO">
        <cfoutput>#ArrayLen(SESSION.actualSite)#</cfoutput>
        <cfset SESSION.lastSite[1] = SESSION.actualSite[1] />
        <cfset SESSION.lastSite[2] = SESSION.actualSite[2] />

        <cfdump var="#SESSION#" label="session scope from application.cfm" /><br />

        <cfif SESSION.actualSite[1] NEQ SESSION.lastSite[1] >           
            <cfoutput>INSIDE TRUE BLOCK</cfoutput>
            <cfset SESSION.send = true />
        <cfelse>        
            <cfoutput>INSIDE FALSE BLOCK</cfoutput>
            <cfset SESSION.send = false />
        </cfif>
    </cfif> 

    <cfset SESSION.actualSite[1] = Right("#CGI.CF_TEMPLATE_PATH#", 25) />
    <cfset SESSION.actualSite[2] = Left("#Right("#CGI.HTTP_REFERER#", 25)#", 17) /> 
```

在我看来，就像重定位到空白页面的方法一样，您只显示一些输出文本是最简单和最好的方法。但我一直在寻找另一种方法来解决这个问题。在前面的代码中，我将 CGI 变量 CF_TEMPLATE_PATH 和 HTTP_RERFERER 保存在数组中。下次刷新或返回表单并再次提交时，将再次设置数组，并将先前的站点信息（来自之前的页面）移动到第二个数组。这必须在 Application.cfm 中执行。我还在 SESSION 范围内定义了数组......一切都必须没问题，但有些东西不起作用。也许有人可以帮助我？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T21:59:00.680

这就是我在使用的一些网站上处理“重新加载再次发送电子邮件”情况的方式。

提交表单并发送电子邮件后，使用`cflocation`重定向到一个简单的 html/cfm 文件，感谢他们的输入。用户可以重新加载该页面，它只会重新显示“谢谢”消息。

# javascript - 在插件中检索选择器作为字符串

> ID：11561877
> 
> 赞同：0
> 
> 时间：2012-07-19T13:25:56.343
> 
> 标签：javascript, jquery

有没有办法在插件中将选择器检索为字符串“myClass”。我尝试了选择器属性，但它返回空字符串。

我什至没有找到有关该选择器属性的文档，有人可以指点我吗？

还是我走错了路？

我打电话给插件

```
 $(".myClass").myPlugin();​ 
```

代码链接：http: [//jsfiddle.net/zs4mY/1/](http://jsfiddle.net/zs4mY/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:28:02.650

没有文档，但从 jQuery 1.0 到 jQuery 1.7.2 保持不变

```
(function($) {
    $.fn.myPlugin = function(options) {
        var settings = $.extend({}, options),
            selector = this.selector;
        this.each(function() {
            console.log(selector); //This is a different function, `this` is not the same `this` anymore
        })
    }
})(jQuery);
$(".myClass").myPlugin();​ 
```

[http://jsfiddle.net/zs4mY/4/](http://jsfiddle.net/zs4mY/4/)

不过，我根本不会在插件中依赖它。在选择器无意义或不可用的情况下，有太多其他方法可以制作 jQuery 对象。

```
$("body").siblings("div").prev("ul").nextAll("lol").selector
//"body.siblings(div).prev(ul).nextAll(lol)"
$("<div>").selector
//"" 
```

# java - 将任意形状应用于视图

> ID：11561878
> 
> 赞同：2
> 
> 时间：2012-07-19T13:25:58.433
> 
> 标签：java, android

有没有办法使用自定义路径而不是标准的方形/椭圆形/等来“塑造”视图。形状？

高级任务是绘制人体图像。我想让它的各个区域可点击。使用的想法和 ImageView 将其显示为主体，然后将透明视图放在其顶部以处理单击事件。因此，例如，我将有一个形状覆盖图像左臂区域的视图，以捕捉该手臂上的点击事件，仅此而已。

如果这不起作用，我想我可以使用一大堆小的方形视图而不是单个自定义形状的视图来覆盖一个区域，但这看起来很混乱。或者也许有另一种方法？

# c# - X509Certificate 和 .NET Compact Framework 3.5

> ID：11561886
> 
> 赞同：0
> 
> 时间：2012-07-19T13:26:31.150
> 
> 标签：c#, http, passwords, x509certificate, .net-cf-3.5

我正在尝试实现由客户端证书认证的 HTTP 通信。在“正常”（即非紧凑型）.NET Framework 上发送 HTTP 请求时，非常简单：

```
HttpWebRequest request = ...;
string certificatePath = ...;
string certificatePassword = ...;

request.ClientCertificates.Add(
    new X509Certificate(certificatePath, certificatePassword)); 
```

然而，在 Compact Framework 3.5 上，`X509Certificate`只有一个接受字节数组的构造函数，没有别的。我想我应该读取一个证书文件并将其内容传递到该字节数组中，但是密码呢？我应该如何在 Compact Framework 上指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:50:13.230

我没有找到任何使用方法`X509Certificate`和密码。

最后，我决定使用`X509Store`并从那里获取证书。这将使部署比最初预期的要困难一些，但至少它是可行的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T22:05:13.220

我迟到了两年，但我在自己的研究中偶然发现了这个问题。

如果您仔细查看文档的示例代码，您会发现您必须先打开 PFX 文件，然后将其导出，然后再创建`X509Certificate`该类的另一个实例。

我理解这一点的方式如下：完整的.NET Framework API（即在桌面上）将类的构造函数的密码参数作为重载。因此，使用完整的框架，您可以使用 Export 方法导出证书的原始数据（即，没有保护密码），然后将生成的字节数组存储到文件中。之后，将该文件传输到移动设备，将文件读入字节数组并将其传递给`X509Certificate`Compact Framework 上的构造函数。

当然，这是解决问题的“原始”方式。然后必须注意以某种方式保护正在传输的数据。

但是，在进一步阅读时，以这种方式导出 PFX 文件不包括私钥。

# amazon-ec2 - 如何用新实例替换 Amazon EC2 实例？

> ID：11561896
> 
> 赞同：5
> 
> 时间：2012-07-19T13:27:05.537
> 
> 标签：amazon-ec2, amazon-web-services, amazon-ebs

如何在不删除的情况下用新实例替换 Amazon EC2 实例`tomcat7`，`mysql`以及在实例上完成的其他设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T13:36:01.090

简单的：

1.  停止实例。
2.  分离卷 - 如果您只有一个卷（引导卷），请将其分离。
3.  拍摄卷的快照以进行保管（在这种情况下并非绝对必要，但没有人因备份关键系统而被解雇）。
4.  终止实例。
5.  启动所需类型的新实例（必须与原始平台相同，即 x86 或 x64）。
6.  等到它开始运行，然后停止它。
7.  分离其卷并将其删除。
8.  将您的原始卷附加到它（引导卷必须是 /dev/sda1）。
9.  重新启动新实例并在适当的情况下重新分配弹性 IP。

# objective-c - 在远程 SQL 中使用核心数据

> ID：11561900
> 
> 赞同：1
> 
> 时间：2012-07-19T13:27:18.443
> 
> 标签：objective-c, sql, ios, core-data

我想使用 Core Data 来管理远程 sql server。那可能吗？我查看了苹果文档，它只显示了关于 SQLite，但在 CS193P 斯坦福讲座上，他们说可以做到，但不说怎么做？

我目前使用带有 php 查询的桥，但这不是 OOP 方式

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:30:03.997

根据 Apple 的说法，答案是否定的：

> [如何将现有的 SQLite 数据库与 Core Data 一起使用？](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW2)
> 
> 你没有。尽管 Core Data 支持 SQLite 作为其持久存储类型之一，但数据库格式是私有的。您不能使用原生 SQLite API 创建 SQLite 数据库并将其直接与 Core Data 一起使用（也不应该使用原生 SQLite API 操作现有的 Core Data SQLite 存储）。如果您有现有的 SQLite 数据库，则需要将其导入核心数据存储（请参阅“高效导入数据”）。

# linq - 如何获得 IEnumerable 中元素的“实际”计数？

> ID：11561903
> 
> 赞同：0
> 
> 时间：2012-07-19T13:27:33.833
> 
> 标签：linq, ienumerable

如果我写：

```
for (int i = 0; i < Strutture.Count(); i++)
{
} 
```

Strutture 是一个具有 200 个元素的 IEnumerable，IIS 崩溃。那是因为我每次看到`Strutture.Count()`它都会执行与该 IEnumerable 链接的所有 LINQ 查询。

那么，我怎样才能获得“当前”的元素数量？我需要一份清单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:30:13.773

*实现*数字：

```
int number = Strutture.Count();
for (int i = 0; i < number; i++)
{
} 
```

或具体*化*列表：

```
var list = Strutture.ToList();
for (int i = 0; i < list.Count; i++)
{
} 
```

或使用`foreach`

```
foreach(var item in Strutture)
{   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:35:12.503

“那是因为我每次执行 Strutture.Count() 时都会看到它执行与该 IEnumerable 链接的所有 LINQ 查询。”

如果不这样做，它怎么知道有多少元素？

例如：

```
Enumerable.Range(0,1000).Where(i => i % 2==0).Skip(100).Take(5).Count(); 
```

不执行 LINQ，你怎么知道有多少元素？

如果您想知道源中有多少元素（例如 Enumerable.Range），那么我建议您使用对该源的引用并直接查询它。例如

```
 var numbers = Enumerable.Range(0,1000);
 numbers.Count(); 
```

还要记住，一些数据源并没有真正的“计数”概念，或者如果他们这样做，则涉及遍历每一个项目并对其进行计数。

最后，如果您重复使用 .Count() [并且您不希望值实际更改]，那么缓存可能是个好主意：

```
 var count = numbers.Count();
 for (int i =0; i<count; i++) //  Do Something 
```

补充：

“首先 Count()，执行 LINQ 查询。接下来，它只是“检查”值 :) 不是“再次执行 LINQ 查询......”:)” - **Markzzz**

那我们为什么不这样做呢？

```
var query = Enumerable.Range(0,1000).Where(i => i % 2==0).Skip(100).Take(5).Count();
var result = query.ToArray() //Gets and stores the result!
result.Length; 
```

:)

“但是当我执行第一个“计数”时，它应该存储（在 LINQ 查询之后）新的 IEnumerable（状态已更改）。如果我再次执行 .Count()，为什么 LINQ 需要再次执行所有查询。-**马克兹**

因为您正在创建一个被编译成 X、Y、Z的*查询。*您两次运行相同的查询，但结果可能会有所不同。

例如，检查一下：

```
 static void Main(string[] args)
    {
        var dataSource = Enumerable.Range(0, 100).ToList();
        var query = dataSource.Where(i => i % 2 == 0);

        //Run the query once and return the count:
        Console.WriteLine(query.Count());  //50

        //Now lets modify the datasource - remembering this could be a table in a db etc.
        dataSource.AddRange(Enumerable.Range(100, 100));

        //Run the query again and return the count:
        Console.WriteLine(query.Count());  //100
        Console.ReadLine();
    } 
```

这就是为什么我建议存储上面的查询结果！

# java - Flex 的 Vector 是否直接映射到 Blazeds 中的任何 Java 类型？

> ID：11561904
> 
> 赞同：2
> 
> 时间：2012-07-19T13:27:42.213
> 
> 标签：java, actionscript-3, apache-flex, vector, blazeds

在我们的 Flex 应用程序中，我们有一个包含如下属性的 ActionScript3 类：

```
public var listOfThings:Vector.<Thing>; 
```

并且，在相应的 Java 类中：

```
public Vector<Thing> listOfThings; 
```

但我们似乎无法直接使用 BlazeDS (AMF3) 进行映射。我们得到这个运行时错误（抱歉是西班牙语）：

```
TypeError: Error #1034: Error de conversión forzada: no se puede convertir
mx.collections::ArrayCollection@aa87ac1 en __AS3__.vec.Vector.<my.domain::Thing>. 
```

绝对没有办法在 Java 和 AS3 之间映射 Vector 类型吗？我找不到一个例子（但我确实在 [de] 编组中找到了几个低级 AMF3 尝试），因此我认为没有办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T15:12:01.353

没有这样的映射。
您有 2 个选项可以保留矢量内容的编组：

1.  将向量转换为数组
2.  将您的矢量转换为 flex 集合

# c# - 如何使用 MVC 3 防止跨站点脚本 XSS

> ID：11561906
> 
> 赞同：0
> 
> 时间：2012-07-19T13:27:47.237
> 
> 标签：c#, asp.net, asp.net-mvc-3

> **可能重复：**
> [如何避免 ASP.Net (MVC) 中的 XSS 漏洞？](https://stackoverflow.com/questions/3955658/how-do-you-avoid-xss-vulnerabilities-in-asp-net-mvc)

嗨，我需要创建一个留言簿，用户可以在其中添加他们的评论并在页面上显示主题而无需审核。

我在 C# 中使用 Asp.Net MVC 3。

*   你能给我指出一些技术吗？谢谢

谢谢你的时间。

PS我正在使用剃须刀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:30:44.820

只需确保所有用户生成的内容在将其写入浏览器之前都是 HTML 编码的，就可以了。Razor 视图引擎默认执行此操作......实际上使用 Razor 很难解决这个问题。

所以：

```
@"<script>badness</script>" 
```

在 Razor 中将呈现为 HTML

```
&lt;script&gt;badness%lt;/script&gt; 
```

在 ASP.NET 视图引擎中实现相同的使用`<%:expression%>`，而不是`<%=expression%>`

```
<%:"<script>badness</script>"%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:32:19.170

You could you the [AntiXSS](http://haacked.com/archive/2010/04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx) library. This is mentioned by:

*   [http://weblogs.asp.net/jgalloway/archive/2011/04/28/using-antixss-4-1-beta-as-the-default-encoder-in-asp-net.aspx](http://weblogs.asp.net/jgalloway/archive/2011/04/28/using-antixss-4-1-beta-as-the-default-encoder-in-asp-net.aspx)
*   [http://haacked.com/archive/2010/04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx](http://haacked.com/archive/2010/04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx)

# java - Oracle Enterprise Single Sign-on Logon Manager 如何将自身附加到 VM？

> ID：11561908
> 
> 赞同：1
> 
> 时间：2012-07-19T13:27:49.480
> 
> 标签：java, security, single-sign-on

今天我们注意到我们的软件中发生了 NullPointerException。但原产地不在我们包含的任何包中。

```
java.lang.NullPointerException
at com.passlogix.vgo.ho.ApplicationWindow.getWindow(ApplicationWindow.java:178)
at com.passlogix.vgo.ho.Jho.addApplicationWindow(Jho.java:453)
at com.passlogix.vgo.ho.WindowScanner.run(WindowScanner.java:697) 
```

在 Internet 上快速搜索表明，这似乎是与 Oracle 相关的单点登录机制。或者更具体的 Oracle Enterprise Single Sign-on Logon Manager。

不知何故，他们设法连接到我们的虚拟机并扫描无论出于何种原因发生的事情。据我所知，他们有一个 AWT 事件拦截器，并且可能在我们没有注意到的情况下进行键盘记录和屏幕抓取。现在不惊慌的唯一原因是它是 Oracle 的官方产品，“他们不会那样做”。

这当然是我们程序的主要后门，我想了解他们使用什么机制进入我们的虚拟机以及如何保护我们的程序免受恶意软件的攻击。

# extjs - 如何在 ExtJS 4.1 中更改组合框存储数据

> ID：11561909
> 
> 赞同：15
> 
> 时间：2012-07-19T13:27:57.887
> 
> 标签：extjs, extjs4.1

我定义了一个这样的组合框

```
{
  xtype: '组合框',
  emptyText: '函数'
  商店：['无']
}

```

然后，在某些情况下，商店应该加载新数据，所以我从组合框中获取商店并尝试以下操作：

```
oFunctionStore.loadData(['dothis', 'dothat', 'dosomething' ] );

```

但在此之后，组合框有一个没有任何可见内容的下拉列表，只有很小的空白行。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T23:40:58.930

```
// Change this...
oFunctionStore.loadData( ['dothis', 'dothat', 'dosomething' ] );

// to this...
oFunctionStore.loadData( [ [ 'dothis' ], [ 'dothat' ], [ 'dosomething' ] ] ); 
```

*   组合框隐式创建一个[`Ext.data.ArrayStore`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.ArrayStore)，它将数组转换为模型。

*   `data`传递给 的参数[`loadData`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.ArrayStore-method-loadData)应该是模型数组，或者是可以转换为模型的对象数组（在本例中为数组数组）。

*   在初始存储加载时，原始数组被转换到`[ [ 'none' ] ]`幕后。

[在此处](http://jsfiddle.net/XY7BL/)查看示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-05T21:03:23.207

carStore - 主要组合的任何商店。

carModelStore - 商店，应该取决于在基于 carStore 的组合框中的选择

```
var carModelStore = new Ext.data.Store({
    reader: new Ext.data.JsonReader({
        fields: ['id', 'car-model'],
        root: 'rows'
    }),
    storeId: 'car-model-store',
    proxy: new Ext.data.HttpProxy({
        url: 'carmodeldataprovider.json?car-name=lamborghini'
    }),
    autoLoad: true
});

{ xtype: 'combo', name: 'car-name', fieldLabel: 'Car', mode: 'local', store: carStore, triggerAction: 'all',
    listeners: {
        select: function(combo, records, eOpts){
            var carName = records.get('car-name');  // the element selected in combo
            var carModelStore = Ext.StoreMgr.lookup("car-model-store");

            carModelStore.proxy.setUrl('carmodeldataprovider.json?car-name=' + carName, false);
            carModelStore.reload();
        }
    }

} 
```

# opencv - openCV RunningAvg 实现

> ID：11561912
> 
> 赞同：1
> 
> 时间：2012-07-19T13:28:04.353
> 
> 标签：opencv, python-2.7, ubuntu-12.04

我正在编写一个小脚本（在 Python 中），它生成和更新相机馈送的运行平均值。当我调用 cv.RunningAvg 它返回：

```
cv2.error: func != 0 
```

我在实现 cv.RunningAvg 时遇到了哪些问题？脚本如下：

```
import cv

feed = cv.CaptureFromCAM(0)
frame = cv.QueryFrame(feed)
moving_average = cv.QueryFrame(feed)
cv.NamedWindow('live', cv.CV_WINDOW_AUTOSIZE)

def loop():
    frame = cv.QueryFrame(feed)
    cv.ShowImage('live', frame)
    c = cv.WaitKey(10)

    cv.RunningAvg(frame, moving_average, 0.020, None)

while True:
    loop() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T14:07:05.080

我不确定该错误，但请查看**[cv.RunningAvg的文档](http://docs.opencv.org/modules/imgproc/doc/motion_analysis_and_object_tracking.html?highlight=running#accumulateweighted)**

它说**目标应该是 32 或 64 位浮点。**

所以我在你的代码中做了一个小的更正，它可以工作。我创建了一个**32 位浮点图像来存储运行平均值**，**然后创建另一个 8 位图像，以便我可以显示运行平均值图像：**

```
import cv2.cv as cv

feed = cv.CaptureFromCAM(0)
frame = cv.QueryFrame(feed)
moving_average = cv.CreateImage(cv.GetSize(frame),32,3) # image to store running avg
avg_show = cv.CreateImage(cv.GetSize(frame),8,3) # image to show running avg

def loop():
    frame = cv.QueryFrame(feed)
    c = cv.WaitKey(10)

    cv.RunningAvg(frame, moving_average, 0.1, None)
    cv.ConvertScaleAbs(moving_average,avg_show) # converting back to 8-bit to show

    cv.ShowImage('live', frame)
    cv.ShowImage('avg',avg_show)

while True:
    loop()

cv.DestroyAllWindows() 
```

现在看看结果：

在某个特定时刻，我保存了一个帧及其对应的运行平均帧。

**原始框架：**

![在此处输入图像描述](../Images/7e0f28a66c699f8074110604df55b9e4.png)

`You can see the obstacle (my hand) blocks the objects in behind`.

**现在运行平均帧数**：

![在此处输入图像描述](../Images/f53097f9315084ad9468b4fcbad5ffb7.png)

它几乎移开了我的手，并在背景中显示了物体。

就是这样`it is a good tool for background subtraction`。

**典型交通视频的另一个例子：**

![在此处输入图像描述](../Images/ac991d1300f2cca12c2d63a0d34a125b.png) ![在此处输入图像描述](../Images/9d78a9abf36da731bd91dfee90e841e9.png)

您可以在此处查看更多详细信息和示例：http: [//opencvpython.blogspot.com/2012/07/background-extraction-using-running.html](http://opencvpython.blogspot.com/2012/07/background-extraction-using-running.html)

# python - 使用 Python 下载图像

> ID：11561918
> 
> 赞同：0
> 
> 时间：2012-07-19T13:28:16.687
> 
> 标签：python, web-scraping, imagedownload

我需要在与此类似的 HTML 代码中找到一张图片：

```
...
<a href="/example/11/1"> 
    <img src="http://example.net/example.jpg" alt="Example"/>
</a>
... 
```

并在 src 中下载图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:50:37.283

这对您来说应该是一个很好的起点：

```
import urllib2
from BeautifulSoup import BeautifulSoup

page = urllib2.urlopen('http://yahoo.com').read()
soup = BeautifulSoup(page)
counter = 0
for img in soup.find_all('img'):
    with open("image" + str(counter),'wb') as f:
        f.write(urllib2.urlopen(img['src']).read())
    counter += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-12T08:03:17.980

**这将有助于定位图像文件的来源。**

```
from urllib.request import urlopen, Request
from bs4 import BeautifulSoup

word = 'pizza'

user_agent = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0'

url = "https://www.bing.com/images/search?q=ciling+fan&qs=n&form=QBILPG&sp=-1&ghc=1&pq=ciling+fan&sc=8-4&sk=&cvid=73D78D239D574921A293EF9725CD2F65"
headers={'User-Agent':user_agent,} 

request=Request(url,None,headers) #The assembled request
response =urlopen(request)
soup = BeautifulSoup(response,'html.parser')
counter = 0

for ul in soup.find_all('ul',{'class':'dgControl_list '}):
    for li in soup.find_all('li'):
        for images in soup.find_all('div',{'class':'img_cont hoff'}):
            s = images.find('img')
            img = s.get('data-src')
            if img != None:
                with open("Z:\pyimages\image" + str(counter) +".jpeg",'wb') as f:
                    f.write(urlopen(img).read())
                    counter += 1 
```

# php - 将动态块添加到 magento 结帐

> ID：11561919
> 
> 赞同：1
> 
> 时间：2012-07-19T13:28:17.217
> 
> 标签：php, magento

您好，我想知道是否可以将*“动态”*块添加到 magento 结帐单页。在*“动态”*块下，我的意思是当我执行结帐单页步骤时，例如，我选择特定的付款类型，然后显示块，否则根本看不到。

当我选择自定义付款方式时，我已经达到了生成块并显示文本的程度，但前提是我将块的名称（' ***excellent2*** '）添加到我的 Onepage.php $stepCodes 列表中：

```
 $stepCodes = array('billing', 'shipping',  'shipping_method', 'payment', 'excellence2', 'review'); 
```

***有没有办法在不将其添加到 stepCodes 的情况下生成“excellence2”块？***

# iphone - 向通知中心面板添加通知

> ID：11561928
> 
> 赞同：0
> 
> 时间：2012-07-19T13:28:30.217
> 
> 标签：iphone, objective-c, ios, notifications, notificationcenter

我有一个 iOS 5 寻呼机应用程序。应用程序可以从服务器接收新的消息计数器。例如，应用程序收到 5 作为来自服务器的响应。所以我不需要在通知中心面板中创建新的（或更新现有的）通知，另外我需要通知中心在应用程序处于后台时接收这些通知。请帮帮我。如何做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:32:24.677

您需要的所有信息都在 Apple 的 iOS 开发者文档中：[关于本地通知和推送通知](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

您可能还想查看 WWDC2011 的介绍视频：[在 iOS 和 Mac OS X 上使用本地和推送通知](https://developer.apple.com/videos/wwdc/2011/?id=517)

# python - 为什么 json.dumps(list(np.arange(5))) 失败，而 json.dumps(np.arange(5).tolist()) 工作

> ID：11561932
> 
> 赞同：26
> 
> 时间：2012-07-19T13:28:36.467
> 
> 标签：python, numpy, python-2.7

当最近更新运行 Ubuntu 的计算机并且 Python 的默认版本更改为 2.7 时，我注意到了这个问题。

```
import json
import numpy as np

json.dumps(list(np.arange(5))) # Fails, throws a "TypeError: 0 is not JSON serializable"
json.dumps(np.arange(5).tolist()) # Works 
```

list() 和 numpy 数组的 tolist() 方法之间有区别吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T13:31:36.933

因为 NumPy 数组的元素不是原生整数，而是 NumPy 自己的类型：

```
>>> type(np.arange(5)[0])
<type 'numpy.int64'> 
```

您可以使用自定义[`JSONEncoder`](http://docs.python.org/library/json.html#json.JSONEncoder)来支持`ndarray`返回的类型`arange`：

```
import numpy as np
import json

class NumPyArangeEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, np.ndarray):
            return obj.tolist() # or map(int, obj)
        return json.JSONEncoder.default(self, obj)

print(json.dumps(np.arange(5), cls=NumPyArangeEncoder)) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-19T13:31:37.330

看起来该`tolist()`方法将 numpy `int32`（或您拥有的任何大小）重新转换为`int`，JSON知道如何处理：

```
>>> list(np.arange(5))
[0, 1, 2, 3, 4]
>>> type(list(np.arange(5)))
<type 'list'>
>>> type(list(np.arange(5))[0])
<type 'numpy.int32'>
>>> np.arange(5).tolist()
[0, 1, 2, 3, 4]
>>> type(np.arange(5).tolist())
<type 'list'>
>>> type(np.arange(5).tolist()[0])
<type 'int'> 
```

正如文档所说`tolist()`：

> 将数组作为（可能是嵌套的）列表返回。
> 
> 将数组数据的副本作为（嵌套）Python 列表返回。**数据项被转换为最接近的兼容 Python 类型。**

最后一行在这里有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:31:58.860

问题是第一个你没有得到一个int。你得到一个 numpy.int64。那是不能序列化的。

# java - Spring中的Quartz工作没有开始

> ID：11561939
> 
> 赞同：3
> 
> 时间：2012-07-19T13:28:51.790
> 
> 标签：java, spring, jakarta-ee, quartz-scheduler

我正在使用 Spring 的 SchedulerFactoryBean 来动态安排作业。这是我的 Spring 配置：

```
@Configuration
public class SpringConfigBean {
    @Bean
    public DataSource dataSource() throws NamingException{
        InitialContext ctx = new InitialContext();
        DataSource source = (DataSource) ctx.lookup(dataSourceName);
        return source;
    }

    @Bean
    public SchedulerFactoryBean schedulerFactoryBean() throws NamingException {
        SchedulerFactoryBean schedulerFactoryBean = null;
        try {
            schedulerFactoryBean = new SchedulerFactoryBean();
            schedulerFactoryBean.setDataSource(dataSource());
            schedulerFactoryBean.setQuartzProperties(com.orca.integration.plugins.vs.broadpeak.admin.utils.Configuration.getQuartzProperties());
            schedulerFactoryBean.setAutoStartup(false);
        } catch (SchedulingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return schedulerFactoryBean;
    } 
```

}

这是我的工作：

```
@Component
public class MyJob extends QuartzJobBean {

    @Override
    public void executeInternal(JobExecutionContext context) throws JobExecutionException {
        System.out.println("Start job...");
}
} 
```

这是我动态调度任务的地方：

```
@Component
public class MyManager {
    @Autowired
    private SchedulerFactoryBean schedulerFactoryBean;

    public void myMethod(String text, Calendar startDate) {
        logger.debug("BroadpeakDistributionManager.startRecordingChannel(); Parameters: recording channel ID=" + recordingChannel.getExternalId());

//      StartRecordJob.scheduleMe(text, startDate, "Start");

        JobDetailBean jobDetailBean = new JobDetailBean();
        jobDetailBean.setJobClass(MyJob.class);
        jobDetailBean.setName("name");
        jobDetailBean.afterPropertiesSet();

        SimpleTriggerBean simpleTriggerBean = new SimpleTriggerBean();
        simpleTriggerBean.setJobDetail(jobDetailBean);
        simpleTriggerBean.setName("Name");
        simpleTriggerBean.setStartTime(startDate.getTime());
        try {
            simpleTriggerBean.afterPropertiesSet();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        schedulerFactoryBean.setTriggers(new Trigger[] {simpleTriggerBean});
        schedulerFactoryBean.start();
    }
} 
```

作业没有开始。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T02:07:34.560

我没有任何使用 Spring 进行编程配置的经验。所以我写了这个 XML Spring 应用程序上下文配置，将它与 Quartz 集成在一起。

看一看：

```
<!-- You can inject other sping beans here -->
<bean id="myJob" class="your.package.here.MyJob "/>

<!-- Define your target method -->
<bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
  <property name="targetObject" ref="myJob" />
  <property name="targetMethod" value="executeInternal" />
</bean>

<!-- trigger using unix expression -->
<bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
    <property name="jobDetail" ref="jobDetail" />
    <!-- run every morning at 6 AM -->
    <property name="cronExpression" value="0 0 6 * * ?" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T12:15:35.483

你不会错过@EnableScheduling 注释吗？

像这样的东西：

```
@Configuration
@EnableScheduling
public class SpringConfigBean {
...
} 
```

# mysql - Mysql“复杂”排序

> ID：11561941
> 
> 赞同：3
> 
> 时间：2012-07-19T13:28:55.490
> 
> 标签：mysql, sorting

想象一下，你有 2 个这样的表：

```
mysql> SELECT * FROM theme;
+----+---------+------------+
| id | name    | sort_order |
+----+---------+------------+
|  1 | Theme 1 | 1          |
|  2 | Theme 2 | 2          |
|  3 | Theme 3 | 3          |
|  4 | Theme 4 | 4          |
|  5 | Theme 5 | 5          |
|  6 | Theme 6 | 6          |
|  7 | Theme 7 | 7          |
+----+---------+------------+

mysql> SELECT * FROM article;
+----+------------+---------------------+----------+
| id | title      | update_date         | theme_id |
+----+------------+---------------------+----------+
|  1 | Article 1  | 2012-06-29 15:29:50 |        6 |
|  2 | Article 2  | 2012-07-18 00:00:00 |        2 |
|  3 | Article 3  | 2012-07-19 00:00:00 |        4 |
|  4 | Article 4  | 2012-07-18 00:00:00 |        4 |
|  5 | Article 5  | 2012-07-18 00:00:00 |        1 |
|  6 | Article 6  | 2012-06-26 10:30:51 |        6 |
|  7 | Article 7  | 2012-07-18 15:17:08 |        6 |
|  8 | Article 8  | 2012-06-18 00:00:00 |        4 |
|  9 | Article 9  | 2012-07-18 15:48:28 |        1 |
| 10 | Article 10 | 2012-07-09 00:00:00 |        4 |
+----+------------+---------------------+----------+ 
```

每篇文章都绑定一个且只有一个主题。

您希望能够执行一个查询，为您提供如下排序的文章列表：

*   按主题排序的每个主题的第一篇最新文章`sort_order`
*   按主题排序的每个主题的第二篇最新文章`sort_order`
*   按主题排序的每个主题的第三篇最新文章`sort_order`
*   等等...

对于当前数据，它应该给出以下内容：

```
+----+------------+---------------------+----------+
| id | title      | update_date         | theme_id |
+----+------------+---------------------+----------+
|  9 | Article 9  | 2012-07-18 15:48:28 |        1 |
|  2 | Article 2  | 2012-07-18 00:00:00 |        2 |
|  3 | Article 3  | 2012-07-19 00:00:00 |        4 |
|  7 | Article 7  | 2012-07-18 15:17:08 |        6 |
|  5 | Article 5  | 2012-07-18 00:00:00 |        1 |
|  4 | Article 4  | 2012-07-18 00:00:00 |        4 |
|  1 | Article 1  | 2012-06-29 15:29:50 |        6 |
| 10 | Article 10 | 2012-07-09 00:00:00 |        4 |
|  6 | Article 6  | 2012-06-26 10:30:51 |        6 |
|  8 | Article 8  | 2012-06-18 00:00:00 |        4 |
+----+------------+---------------------+----------+ 
```

我几乎可以肯定有一种方法可以使用单个查询来做到这一点，但我无法弄清楚。

您将如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:19:55.730

这与 MySQL 中的分区排序问题有关。MySQL 中没有加窗排序函数，但是可以借助变量成功解决泛型问题：

```
SELECT
  id,
  title,
  update_date,
  theme_id
FROM (
  SELECT
    *,
    @rnk := @rnk * (@last_theme = theme_id) + 1 AS rnk,
    @last_theme := theme_id
  FROM article, (SELECT @rnk := 0, @last_theme := 0) s
  ORDER BY theme_id, update_date DESC
) s
ORDER BY
  rnk, theme_id
; 
```

上面的查询对行进行排名，然后使用排名对最终结果集进行排序。该查询首先从`article`按顺序检索行`theme_id`并`update_date DESC`分配排名编号。然后，当从排序的行集中进行选择时，会引入另一个最终排序，这次是排序和`theme_id`。

[您可以在 SQL Fiddle](http://sqlfiddle.com/#!2/d568f/6)尝试此查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:41:36.353

你能做一个“文章加入主题”，然后按 update_date、sort_order 排序吗？

# ios - 在同一个应用程序中强制使用不同的方向

> ID：11561944
> 
> 赞同：0
> 
> 时间：2012-07-19T13:29:03.180
> 
> 标签：ios, ipad, orientation

我浏览了 HIG PDF，但无法在应用程序中找到此类场景的答案。基本上可以说我的应用程序的一部分/视图（对于 iPad）仅是横向（支持左右），而同一应用程序的另一部分/视图仅是纵向（正常和倒挂）？或者这是拒绝的肯定方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:50:41.967

我不认为这是拒绝的肯定方法。不过，这是一个时髦的用户体验的可靠秘诀。我怀疑苹果的评论者会质疑为什么会这样。如果您确实有正当理由要求您的用户在使用应用程序的过程中旋转他们的设备，那么这可能没问题。我认为在大多数情况下，Apple 会简单地要求您支持所有方向并在事情不适合时使用滚动视图，或者根据当前方向重新排列您的用户界面以使其正常工作。

所以简而言之，如果你有一个有效的解释，你可能想在提交你的应用程序时将它添加到 iTunesConnect 中的评论者部分的注释中（以避免问题和拒绝）。

在我看来，如果可能，只需尝试支持所有方向。它将带来更好的用户体验，避免奇怪的客户问题和 iTunes 商店中那些根本无法理解您为什么这样做的用户的不良评论......只需我的 2 美分 :)

# z3 - UFBV 类别中的基准

> ID：11561946
> 
> 赞同：2
> 
> 时间：2012-07-19T13:29:06.397
> 
> 标签：z3

我正在寻找 UFBV 类别中的基准。此类别尚未在 SMT 比赛中直接代表。

当然，大多数 (A)UFLIA 基准可以轻松更改为 UFBV 基准，方法是将未解释的排序更改为位向量排序，将整数算术更改为位向量算术。一个自动化的脚本对我也有帮助。

问候， Aboubakr Achraf El Ghazi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:12:04.253

[您可以下载论文“有效求解量化位向量公式](http://research.microsoft.com/en-us/um/people/leonardo/files/fmcad10.pdf)”中使用的 UFBV（和 BV）基准：

*   [http://research.microsoft.com/en-us/um/redmond/projects/z3/ufbv.zip](http://research.microsoft.com/en-us/um/redmond/projects/z3/ufbv.zip)
*   [http://research.microsoft.com/en-us/um/redmond/projects/z3/bv.zip](http://research.microsoft.com/en-us/um/redmond/projects/z3/bv.zip)

顺便说一句，这些基准已提交给 SMT-LIB。因此，它们最终将在 SMT-LIB 网站上提供。

# java - 如何合并 java.io.Reader 或包装 Reader 的内容？

> ID：11561950
> 
> 赞同：0
> 
> 时间：2012-07-19T13:29:14.537
> 
> 标签：java, escaping, xss, freemarker

我将 Freemarker 模板加载器包装在 Spring MVC 中，如此处所述[，](https://stackoverflow.com/a/1678940/1307586)以在 html 页面中进行默认转义。

所以，我需要用我的字符串包装来自 java.io.Reader 的内容，而不是读取它，不将其转换为字符串并且不实现自己。流行的公共库中是否有类似于[WrappingReader](http://metadata-net.svn.sourceforge.net/viewvc/metadata-net/shared/trunk/util/src/main/java/au/edu/uq/itee/maenad/util/WrappingReader.java?revision=1132&view=markup)或 com.google.common.io.MultiReader （不公开）的类？

我的实现：

```
import com.google.common.io.CharStreams;
import com.google.common.io.InputSupplier;

...

private final TemplateLoader delegate;

@Autowired
public HtmlEscapingTemplateLoader(ResourceLoader resourceLoader)
{
    delegate = new SpringTemplateLoader(resourceLoader, "/WEB-INF/templates/");
}

@Override
public Reader getReader(Object templateSource, String encoding) throws IOException
{
    // collecting readers
    Reader prologue = new StringReader("<#escape x as x?html>");
    Reader originalReader = delegate.getReader(templateSource, encoding);
    Reader epilogue = new StringReader("</#escape>");

    // concatenating readers
    return merge(prologue, originalReader, epilogue);
}

protected Reader merge(Reader prologue, Reader originalReader, Reader epilogue) throws IOException
{
    return CharStreams.join(
            Arrays.asList(new ReaderSupplier(prologue), new ReaderSupplier(originalReader), new ReaderSupplier(
                    epilogue))).getInput();
}

private static class ReaderSupplier
        implements InputSupplier<Reader>
{

    private final Reader reader;

    public ReaderSupplier(Reader reader)
    {
        this.reader = reader;
    }

    @Override
    public Reader getInput() throws IOException
    {
        return reader;
    }

} 
```

我使用的 CharStreams 被标记为@com.google.common.annotations.Beta。那么，是否可以在不使用 CharStreams 的情况下以更可靠的方式重写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:06:28.597

番石榴贡献者在这里。...好的。

[`@Beta`并不意味着“未完全测试”或“未广泛使用”。](https://code.google.com/p/guava-libraries/wiki/PhilosophyExplained#Iteration) 唯一的意思是我们*不太*确定我们是否准备好冻结 API。如果您正在开发库或计划稍后升级 Guava 版本，这只是一个问题。（而且，老实说，与API`CharStreams`一样稳定......）`@Beta`

你不应该*有*一个`ReaderSupplier`类，它破坏了`InputSupplier`界面的全部意义。对于这种特殊情况，`Reader`您应该绕过 s ，而不是传递`InputSupplier<Reader>`s。在这种特殊情况下，`CharStreams.newReaderSupplier(String)`返回`InputSupplier`产生`StringReader`s 的 an，因此非常适合这个用例。

无论如何，我的完整实现将类似于：

```
static final String prologue = "<#escape x as x?html>";
static final String epilogue = "</#escape>";

// ideally you shouldn't be passing around Readers at all
// the point of InputSupplier, etc. is that you should never get direct access
// to the Reader directly, so you don't have to track whether it's closed or not
public InputSupplier<Reader> getReaderSupplier(
    final Object templateSource, final String encoding) {
  return CharStreams.join(
    CharStreams.newReaderSupplier(prologue),
    new InputSupplier<Reader>() {
      public Reader getInput() {
        return delegate.getReader(templateSource, encoding);
      }
    },
    CharStreams.newReaderSupplier(epilogue));
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-21T12:10:34.317

我只是在回答这个问题：如何合并 java.io.Reader's。

使用纯 Java 我能够提出使用`SequenceInputStream`on的解决方案`InputStreams`，这似乎是合并两个的更好解决方案`InputStreams`。有关合并 InputStreams，请参阅[此 stackoverflow 问题](https://stackoverflow.com/questions/14295099/how-to-chain-multiple-different-inputstreams-into-one-inputstream/38399585)。想法很简单：将 reader 转换为`InputStreams`，将它们合并并将其保存`InputStream`为`Reader`.

```
Reader reader1 = new StringReader("String1");
Reader reader2 = new StringReader("String2");

ReaderInputStream readInputStream1 = new ReaderInputStream(reader1, StandardCharsets.UTF_8)
ReaderInputStream readInputStream2 = new ReaderInputStream(reader2, StandardCharsets.UTF_8)

Reader merged = new InputStreamReader(new SequenceInputStream(readInputStream1,readInputStream2), StandardCharsets.UTF_8); 
```

# java - JBoss 启动通知

> ID：11561951
> 
> 赞同：0
> 
> 时间：2012-07-19T13:29:15.583
> 
> 标签：java, jakarta-ee, jboss, startup

`ear`在我的包成功部署后，我想记录一些信息（构建日期、svn 修订版……） 。我搜索了一轮，发现了自动启动 Servlet 和 JMX 通知侦听器。对于 3 行日志来说，这有点矫枉过正；）

为了清楚起见：我正在寻找一种在成功部署和 EJB 启动后调用方法的方法（也在 hotdeploy 之后）

那么有没有办法做到这一点？一些 jboss-*.xml 黑客？

问候弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:38:59.213

您的 EAR 中是否有任何 Servlet？如果是，您可以实现[ServletContextListener](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)并覆盖 contextInitialized 方法以在日志中打印您需要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:49:27.100

您可以通过从资源文件中读取版本信息，在某些 UI 页面或日志中显示版本信息（在应用程序初始化期间，使用类、servlet 等中的一些静态代码）。

在构建过程中，您应该在资源文件中写入版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:10:30.503

我已经通过这种方式解决了这个问题：

我创建了一个 JBoss ManagedBean (JMX)，它至少对 EJB 进行了@EJB 注入。

然后我在 start() 方法中添加了一些输出。

问候弗洛里安

# blackberry - paymen sdk 演示程序在黑莓上不起作用？

> ID：11561952
> 
> 赞同：1
> 
> 时间：2012-07-19T13:29:20.547
> 
> 标签：blackberry, in-app-purchase

我正在使用 Payment SDK 1.8 版了解黑莓中的应用内购买任务。目前我正在使用以下代码：

```
package com.purchasedemo;

///import net.rimlib.blackberry.api.payment.*;
import net.rimlib.blackberry.api.paymentsdk.PaymentEngine;
import net.rimlib.blackberry.api.paymentsdk.PaymentException;
import net.rimlib.blackberry.api.paymentsdk.Purchase;
import net.rimlib.blackberry.api.paymentsdk.PurchaseArgumentsBuilder;
import net.rimlib.blackberry.api.paymentsdk.PurchaseResult;
import net.rimlib.blackberry.api.paymentsdk.purchaseHistory.PurchaseHistory;
import net.rimlib.blackberry.api.paymentsdk.purchaseHistory.PurchaseHistoryListingListener;
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.container.*;

public class PurchaseDemo extends UiApplication
{
    public static void main(String[] args) 
    {
        PurchaseDemo theApp = new PurchaseDemo();
        theApp.enterEventDispatcher();  
    }
    public PurchaseDemo() 
    {   
        pushScreen(new PurchaseDemoScreen());
    }

      private static class PurchaseDemoScreen extends MainScreen implements FieldChangeListener {
            private BasicEditField parentSku;
            private ButtonField buyButton;
            private ButtonField displayButton;
            private BasicEditField digitalGoodName;
            private BasicEditField digitalGoodSku;
            private PurchaseHistoryListingListener purchaseHistoryListener;
            private PaymentEngine **engine** = PaymentEngine.getInstance();

            public PurchaseDemoScreen() {
                setTitle( "Payment Service SDK Demo" );

                if( **engine** != null ) {
                    parentSku = new BasicEditField( "Parent SKU: ", "abc123" );
                    add( parentSku );
                    digitalGoodName = new BasicEditField( "Digital Good Name: ", "Sample Good" );
                    add( digitalGoodName );
                    digitalGoodSku = new BasicEditField( "Digital Good SKU: ", "abc123" );
                    add( digitalGoodSku );
                    HorizontalFieldManager hfm = new HorizontalFieldManager();
                    add( hfm );
                    buyButton = new ButtonField( "Buy" );
                    buyButton.setChangeListener( this );
                    hfm.add( buyButton );
                    displayButton = new ButtonField( "Display Purchases" );
                    displayButton.setChangeListener( this );
                    hfm.add( displayButton );
                } else {
                    RichTextField errorMessage = new RichTextField( "Sorry, in-app purchases are unavailable" );
                    add( errorMessage );
                }
            }

            public void fieldChanged( Field field, int context ) {
                if( field == buyButton ) {
                    String name = digitalGoodName.getText();
                    String sku = digitalGoodSku.getText();
                    PurchaseArgumentsBuilder arguments = new PurchaseArgumentsBuilder().withDigitalGoodSku( sku )
                            .withDigitalGoodName( name ).withMetadata( name ).withPurchasingAppName( "Payment Service SDK Demo" );
                    try {
                        PurchaseResult purchase = engine.purchase( arguments.build() );
                        Dialog.inform( "Purchase of " + purchase.getMetadata() + " is successful." );
                    } catch( IllegalArgumentException e ) {
                        Dialog.inform( e.getMessage() );
                    } catch( PaymentException e ) {
                        Dialog.inform( e.getMessage() );
                    }
                } else if( field == displayButton ) {
                    purchaseHistoryListener = new PurchaseHistoryListingListener() {

                        public void error( String message, int errorCode ) {
                            Dialog.inform( message );
                        }

                        public void success( Purchase[] purchases ) {
                            if( purchases.length != 0 ) {
                                if( getFieldCount() > 3 ) {
                                    deleteRange( 3, ( getFieldCount() - 3 ) );
                                }
                                for( int i = 0; i < purchases.length; i++ ) {
                                    RichTextField purchaseRecord = new RichTextField( "Name: " + purchases[ i ].getMetadata()
                                            + " SKU: " + purchases[ i ].getDigitalGoodSku() );
                                    add( purchaseRecord );
                                }
                            } else {
                                Dialog.inform( "No existing purchases" );
                            }
                        }
                    };

                    PurchaseHistory.get(purchaseHistoryListener);
                }
            }
        }
} 
```

通过使用这段代码，我只是想了解这个过程实际上是如何工作的。但问题是，我在**PaymentEngine的****引擎**对象中得到了 null 。请让我知道我该如何解决这个问题。以及这项服务的实际要求是什么。目前我正在使用 5.0 操作系统和设备 6.0 操作系统

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:59:44.870

在打电话给你之前，你要做的第一件事`PaymentEngine.getInstance()`应该是先打电话`PaymentEngine.isAppWorldInstalledAndAtCorrectVersion()`。此调用检查设备上安装了哪个版本的 App World 以及是否需要升级。支付 SDK 需要随 SDK 版本而变化的 App World 的最低版本，因此上述调用将有助于确保您的安全。如果这引发异常，您可以调用`PaymentEngine.upDateAppWorld()`以启动更新。

如果 App World 的版本是正确的，请提供有关设备上 App World 版本的一些信息，以及用于重现问题的确切设备型号和软件版本。**

# java - 在哪里可以找到特定于应用程序的 context.xml 文件？

> ID：11561961
> 
> 赞同：3
> 
> 时间：2012-07-19T13:29:48.733
> 
> 标签：java, jakarta-ee, tomcat, context.xml

我读到该`context.xml`文件*（在 Tomcat 中）*是特定于应用程序的。我从我的 netbeans IDE 创建了两个 Web 项目，使用 Tomcat 作为服务器。但我找不到应用程序特定的`context.xml`文件。我只找到了Tomcat的*conf*`context.xml`目录里面。

 *![在此处输入图像描述](../Images/1057f90e92e55c54cd2619d66e95d693.png)

我在哪里可以找到应用程序特定的`context.xml`文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:40:43.607

根据我的经验和我从文档中看到的内容：

> ```
> Context elements may be explicitly defined: 
> ```
> 
> *   在 $CATALINA_BASE/conf/context.xml 文件中： Context 元素信息将被所有 webapps 加载。
> *   在 $CATALINA_BASE/conf/[enginename]/[hostname]/context.xml.default 文件中： Context 元素信息将由该主机的所有 webapps 加载。

取自[这里](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:26:26.410

我注意到另一个答案中的链接是针对错误版本的 Tomcat 的。这是正确的文档：

[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context)

正如您所看到的，现在的选项与以前的版本不同。根据我的经验，最常见的是选项 1：

```
In an individual file at /META-INF/context.xml inside the application files. 
```*

# objective-c - UISwipeGestureRecognizer 未按预期工作

> ID：11561962
> 
> 赞同：2
> 
> 时间：2012-07-19T13:29:50.343
> 
> 标签：objective-c, ios, uiswipegesturerecognizer

所以我试图在我的应用程序屏幕上的一个子视图中添加一个滑动手势。我声明手势识别器如下：

```
UISwipeGestureRecognizer *swiperR = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(switchStackingMode:)];
    [swiperR setDirection:UISwipeGestureRecognizerDirectionRight];
    [chart addGestureRecognizer:swiperR];

UISwipeGestureRecognizer *swiperL = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(switchStackingMode:)];
    [swiperL setDirection:UISwipeGestureRecognizerDirectionLeft];
    [chart addGestureRecognizer:swiperL];

-(void)switchStackingMode:(UISwipeGestureRecognizer *)sender {
    NSLog(@"inside switchstack from gesture");
    //other stuff
} 
```

当我尝试在应用程序启动时与子视图交互时，只有滑动手势 swiperL 有效。我右击没有反应。我最初尝试只做一个带有方向的手势识别器（UISwipeGestureRecognizerDirectionLeft | UISwipeGestureRecognizerDirectionRight），但这不起作用，并且基于其他堆栈溢出答案，我恢复为两个单独的识别器。仍然没有运气，这让我很困惑。我觉得我错过了什么。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:44:05.417

这段代码应该可以工作。您在尝试设备吗？在模拟器中滑动手势并不容易。

您只能做一个手势，左右都可以识别。这种方式适用于左右或上下，但不适用于所有方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:52:22.260

我在这里回答了这个[设置 UISwipeGestureRecognizer 的方向](https://stackoverflow.com/questions/3319209/setting-direction-for-uiswipegesturerecognizer)。我相信这个错误是你不能让你的“动作”名称相同，即没有两个选择器都命名为“switchStackingMode”。使用 switchStackingModeRight 和 switchStackingModeLeft。

# php - 输入倍数总是发送大小为 5

> ID：11561963
> 
> 赞同：-4
> 
> 时间：2012-07-19T13:29:51.240
> 
> 标签：php, html, forms, input

```
<form action="entergallery.php" method="post" enctype="multipart/form-data">
<select id="photolib" name="photolib">
<?php
$query = "SELECT * FROM `galleries`";
$res = mysqli_query($db, $query);
while($rows = mysqli_fetch_row($res)){
    echo '<option value="'.$rows[3].'">'.$rows[1].'</option>';
}
?>
</select>
<input type="file" name="uploads[]" multiple/>
<input type="submit" id="upload" name="upload" value="Upload"/>
</form> 
```

由于某种原因，此表单的长度始终为 5。输入 gallery.php 只是 count{$_FILES['uploads']); 即使您不输入任何文件，它也始终输出 5。我不知道如何解决这个问题。我已经在多个浏览器中测试过这个并且有同样的问题提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:00:30.947

见 $_FILES 数组结构

总是有5个元素。

```
$_FILES["file"]["name"] - the name of the uploaded file
$_FILES["file"]["type"] - the type of the uploaded file
$_FILES["file"]["size"] - the size in bytes of the uploaded file
$_FILES["file"]["tmp_name"] - the name of the temporary copy of the file stored on the server
$_FILES["file"]["error"] - the error code resulting from the file upload 
```

如果你想检查 $_FILES 是否为空，你需要检查上传错误，像这样

```
<?php
if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br />";
  }
?> 
```

在您的情况下，通过上传多个文件，您具有以下结构：

```
array
  'filesToUpload' => 
    array
      'name' => 
        array
          0 => string '2012-07-19_192449.jpg' (length=21)
          1 => string '2012-07-19_192449.png' (length=21)
      'type' => 
        array
          0 => string 'image/jpeg' (length=10)
          1 => string 'image/png' (length=9)
      'tmp_name' => 
        array
          0 => string '/tmp/phpBp3Pf7' (length=14)
          1 => string '/tmp/php4A25Ly' (length=14)
      'error' => 
        array
          0 => int 0
          1 => int 0
      'size' => 
        array
          0 => int 5263
          1 => int 8681 
```

因此，您可以在 filesUpload 数组的 tmp_name 数组中计算文件数，例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:06:29.417

而不是这个

`count{$_FILES['uploads'])`

采用

`count($_FILES['uploads']['name'])`

你会得到实际的计数。

# php - 获取 page_tab_url

> ID：11561964
> 
> 赞同：-2
> 
> 时间：2012-07-19T13:29:51.380
> 
> 标签：php, facebook, sdk, facebook-php-sdk

我需要通过 fql 查询获取“page_tab_url”。在这篇文章中：[https](https://developers.facebook.com/docs/reference/fql/application/) ://developers.facebook.com/docs/reference/fql/application/ 他们说，我需要“app access_token”，但没有什么能与链接目的地的主题相关联。任何人都有一个想法，我需要在“范围”中使用的权限名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:47:53.190

我认为这是他们想要链接的[正确链接（目前）。](http://developers.facebook.com/docs/authentication/applications/)这是一种获取访问令牌的方法，该令牌使用 appid 和密钥作为您的应用程序进行身份验证，您不需要扩展权限。

这是一个小的 php 片段来说明：

```
$appid = '';
$secret = '';

$url = 'https://graph.facebook.com/oauth/access_token';
$params = array(
    'client_id'     => $appid,
    'client_secret' => $secret,
    'grant_type'    => 'client_credentials',
);

$resp = file_get_contents($url.'?'.http_build_query($params));
$parsed_resp = array();
parse_str($resp, $parsed_resp);

$app_access_token = $parsed_resp['access_token'];
$resp = file_get_contents("https://graph.facebook.com/fql?q=select%20page_tab_url%20from%20application%20where%20app_id={$appid}&access_token={$app_access_token}");

var_dump(json_decode($resp, true)); 
```

用真实数据填充`$appid`和变量，它会产生以下输出：`$secret`

```
array(1) {
  'data' =>
  array(1) {
    [0] =>
    array(1) {
      'page_tab_url' =>
      string(30) "http://.../"
    }
  }
} 
```

# asp-classic - ASP 经典：如何在服务器端调度功能

> ID：11561965
> 
> 赞同：3
> 
> 时间：2012-07-19T13:29:51.840
> 
> 标签：asp-classic, global.asa

我只在 ASP 经典上工作（我知道我必须学习一些新东西，但现在......）这是我的问题：

在我的数据库中，我存储网站的帐户。一年后需要停用帐户。我创建了一个可以正常工作的函数，但我需要一个预定的呼叫（每天早上 00 点）。有可能吗？我需要在 global.asa 上拨打电话吗？

多谢！

毛里齐奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:30:33.357

您可以通过免费的 cron 服务（例如[https://www.setcronjob.com](https://www.setcronjob.com) ）安排作业，配置如下图所示。对于托管没有创建任务权限的客户来说，这是一个很好的解决方案，我用过很多次都没有问题。该服务将在您指定的时间跨度或确切时间请求您指定的 url。
为了一点点安全/避免不必要的请求，您可以为将被请求的页面指定自定义哈希。

```
If Request.QueryString("hash") = "somespecialstuffs" Then
    'Do Job
End If 
```

![在此处输入图像描述](../Images/34e16043262dbca30ee48144ebb0d2bd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:48:47.143

如果您有权访问服务器，请创建一个 vbscript (.vbs) 并设置任务计划程序...

这就是我们用于数据库整理例程和夜间备份的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T19:39:54.240

如果您无权访问服务器，作为解决方法，您可以执行以下操作...在*您的*服务器中创建一个任务（任何运行 24 小时的任务），该任务只会访问您的站点到特定的 ASP页面带有指示它执行更新的参数，因此创建一个 ASP 文件来读取参数并运行更新。

将它放在 global.asa 中的问题是，如果您的站点不是一直在使用，IIS 可能会在一段时间后停止应用程序进程（认为 IIS 中的默认值是 30 分钟），因此您不能保证应用程序进程将运行更新。

# asp.net-mvc-3 - 我如何知道用户是否在线而不使用会员服务提供商

> ID：11561971
> 
> 赞同：0
> 
> 时间：2012-07-19T13:30:04.757
> 
> 标签：asp.net-mvc-3

所以我需要知道用户是否在线我怎么知道？（我知道使用会员提供者）

并且找不到为此的实现（或教程）？我或多或少了解会员提供者是如何做到的，这样做是最好的选择吗？还是更好的方法？

一些例子会很好

我的项目中的 iam usgin mvc3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:32:48.917

You need to store the last activity timestamp in your users table, and update it whenever you receive any HTTP request from a logged-in user.

A user can be considered "online" if their last activity happened recently. (the exact limit is up to you)

# java - log4j-使用特定的记录器但显示类名

> ID：11561976
> 
> 赞同：0
> 
> 时间：2012-07-19T13:30:16.067
> 
> 标签：java, log4j

到目前为止，我已经使用了这样的 log4j 方法：

```
void writeMethod(String msg){
  StackTraceElement[] st = Thread.currentThread().getStackTrace();
  Logger log=Logger.getLogger(st[2]);
  log.info(msg);
} 
```

这与属性一起，允许我在日志文件中显示调用 write 方法的类/方法并且它工作正常，只要每次应用程序运行只需要一个日志文件。现在我每个应用程序有更多线程，并且每个应用程序需要超过 1 个日志文件（数量实际上可以是无限的）。由于我希望拥有多个日志文件，因此我在应用程序启动时自动创建 log4j.properties 文件，然后为应用程序的每个线程使用特定的附加程序。

所以 appender 的名字是一样的`l0, l1, l2 ....`，每个都写入不同的日志文件。

这意味着我现在正在使用类似的东西：

```
void writeMethod(int threadNr ,String msg){

      Logger log=Logger.getLogger("l"+threadNr);
      log.info(msg);
    } 
```

**我的问题是：我可以使用第二种方法并且还具有能够编写调用日志记录方法的方法/类的先前功能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:28:36.657

我使用属性文件来配置我的 log4j。布局示例...

```
log4j.appender.R.layout.ConversionPattern=%d %5p [%t] (%F:%L) - %m%n 
```

这是[log4j 参考](http://www.daniel-hirscher.de/Java_files/Log4jQuickRef.pdf)的链接。如果您想要每个线程的文件，您总是可以创建多个附加程序并为每个附加程序创建记录器。例如。

```
// In your log4j config
log4j.logger.1=DEBUG

// In you code
Logger log = Logger.getLogger("1.ClassName"); 
```

# javascript - 第 0 行堆栈溢出

> ID：11561984
> 
> 赞同：8
> 
> 时间：2012-07-19T13:30:29.263
> 
> 标签：javascript, jquery, internet-explorer, stack-overflow

我有一个表单验证脚本，不幸的是，它`Stack overflow at line 0`在崩溃（IE7）之前不久返回了警告框，并且在 IE8 中直接崩溃了（它确实首先工作，非常缓慢）。

我为您的测试乐趣制作了一个 jsFiddle：http: [//jsfiddle.net/yuNXm/2/](http://jsfiddle.net/yuNXm/2/)在您将一个值输入到需要验证的输入中然后失去焦点后发生堆栈溢出。（电子邮件字段是 ajax 驱动的，所以不会在那里工作）。

相关的Javascript：

```
jQuery(document).ready(function($) {

    var inputs = $('input[data-validation-method]');
    var fields = $();
    var classes = ['fail', 'win'];

    //Methods of validation, must return an object like so {result: [boolean], message: [string or false]} as a parameter of the callback() function;
    var methods = {

        'email' : function(field, dependancies, callback) {
            var value = field.val();
            var response = false;
            field.addClass("loading");
            $.post(
               ajaxData.url, 
               {
                  'action':'validate_form',
                  'value': value,
                  'method': field.data('method')
               }, 
               function(response){
                   return callback(response);
               }
            ).complete(function() {
                field.removeClass("loading");
            });
        },

        'password' : function(field, dependancies, callback) {
            var value = field.val();
            var response = {};
            if (value.length < 8) {
                response.result = false;
                response.message = 'Your password must be a minimum of 8 characters';
            } else {
                response.result = true;
                response.message = false;
            }
            return callback(response);
        },

        'verify_password' : function(field, dependancies, callback) {
            var value = field.val();
            var response = {};
            if (value != dependancies["password"].val()) {
                if (!dependancies["password"].val() || !value) {
                    return false;
                }
                response.result = false;
                response.message = 'Passwords do no match';
            } else {
                response.result = true;
                response.message = false;
            }
            return callback(response);
        }
    }

    // Prepare fields for validation
    inputs.each(function() {
        createField($(this));
    });

    function createField (field) {
        inputs = inputs.not(field);
        var method = field.attr('data-validation-method');
        var requires = field.attr('data-validation-requires');
        if (!!requires) {
            requires = requires.split(',');
            var dependancies = {};
            $.each(requires, function(key, value) {
                var element = $('#' + value);
                if(element.length) {
                    dependancies[element.attr('id')] = element;
                    if(inputs.find(element).length) {
                        createField(element);
                    }
                    if ($.isArray(element.data('linked_fields'))) {
                        element.data('linked_fields').push(field);
                    } else {
                        element.data('linked_fields', [field]);
                    }
                }
            });
        }
        if (methods[method]) {
            fields = fields.add('#' + field.attr('id'));
            field.data('method', method);
            field.data('dependancies', dependancies);
        }
    }

    function validate (field) {
        var callback = function(response) {
            field.data('response', response);
            if (response) {
                toggleFlag(field, 'show');
            } else {
                toggleFlag(field, 'remove');
            }
            if($.isArray(field.data('linked_fields'))) {
                $.each(field.data('linked_fields'), function(key, value) {
                    validate(value);
                });
            }
        }
        methods[field.data('method')](field, field.data('dependancies'), callback);
    }

    fields.focus(function() {
        var field = $(this);
        field.data("value", field.val());
        field.bind("propertychange keyup input paste", function(event){
            if(field.data("response") && (field.val() != field.data("value"))) {
                toggleFlag(field, "hide");
                if($.isArray(field.data('linked_fields'))) {
                    $.each(field.data('linked_fields'), function(key, value) {
                        toggleFlag(value, "hide");
                    });
                }
            }
        });
    });

    fields.blur(function() {
        var field = $(this);
        if (field.val().length) {
            if (field.val() != field.data("value")) {
                toggleFlag(field, "remove");
                validate(field);
            } else {
                toggleFlag(field, "show");
            }
        } else {
            toggleFlag(field, "remove");
        }
    });

    function toggleFlag (field, method) {
        var flag = field.data("flag");
        var response = field.data("response");
        if (response) {
            switch (method) {
                case "show":
                    if (response.message) {
                        if(!flag) {
                            flag = $('<span class="pie ' + classes[~~response.result] + '">' + response.message + '</span>').insertAfter(field);
                            field.data("flag", flag);
                            flag.hide();
                        }
                        if (!flag.data("active")) {
                            flag.data("active", true);
                            flag.stop(true, true).animate({height: "show", opacity: "show"}, 500);
                        }
                    }
                    field.addClass(classes[~~response.result]);
                    break;
                case "hide":
                    if (flag) {
                        if (flag.data("active")) {
                            flag.data("active", false);
                            flag.stop(true, true).animate({height: "hide", opacity: "hide"}, 500);
                        }
                    }
                    field.removeClass(classes[~~response.result]);
                    break;
                case "remove":
                    if (flag) {
                        field.removeData("flag");
                        if (flag.data("active")) {
                            flag.stop(true, true).animate({height: "hide", opacity: "hide"}, 100, function() {
                                flag.remove();
                            });
                        }
                    }
                    field.removeClass(classes[~~response.result]);
                    field.removeData("response");
                    break;
            }
        }
    }

}); 
```

相关的 HTML：

```
<form action="" method="post" class="user-data">
<div class="fields">
    <label for="email">Email:</label>
    <input type="text" name="email" id="email" data-validation-method="email" class="text" value="" placeholder="youremail@somesite.com" />
    <span class="info">We won\'t do anything cheeky with your email... promise.</span>
    <label for="password">Choose a password:</label>
    <input type="password" name="password" id="password" data-validation-method="password" class="text" value="" />
    <label for="verify_password">Retype your password:</label>
    <input type="password" name="verify_password" id="verify_password" class="text" data-validation-method="verify_password" data-validation-requires="password" value="" />
    <input type="checkbox" name="mailing_list" value="true" /> <label for="mailing_list">I would like to recieve email updates about new features</label>
    <span class="info">We won\'t spam your inbox, emails will be infrequent.</span>
</div>
<input type="submit" id="submitbtn" class="button omega" name="submit" value="Create your account" />
</form> 
```

现在我知道这通常是由于递归，我在脚本的两个区域使用递归。

**重复功能编号 1：**

```
function createField (field) {
    inputs = inputs.not(field);
    var method = field.attr('data-validation-method');
    var requires = field.attr('data-validation-requires');
    if (!!requires) {
        requires = requires.split(',');
        var dependancies = {};
        $.each(requires, function(key, value) {
            var element = $('#' + value);
            if(element.length) {
                dependancies[element.attr('id')] = element;
                if(inputs.find(element).length) {
                    createField(element);
                }
                if ($.isArray(element.data('linked_fields'))) {
                    element.data('linked_fields').push(field);
                } else {
                    element.data('linked_fields', [field]);
                }
            }
        });
    }
    if (methods[method]) {
        fields = fields.add('#' + field.attr('id'));
        field.data('method', method);
        field.data('dependancies', dependancies);
    }
} 
```

因为堆栈溢出仅在您与需要验证的输入交互时发生，并且该`createField`函数仅用作初始化函数，我认为不是这个。

**重复功能编号 2：**

```
function validate (field) {
    var callback = function(response) {
        field.data('response', response);
        if (response) {
            toggleFlag(field, 'show');
        } else {
            toggleFlag(field, 'remove');
        }
        if($.isArray(field.data('linked_fields'))) {
            $.each(field.data('linked_fields'), function(key, value) {
                validate(value);
            });
        }
    }
    methods[field.data('method')](field, field.data('dependancies'), callback);
} 
```

我无权访问任何其他外部程序来调试它（企业环境），有人可以在这里引导我走向正确的方向吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T00:33:29.817

`propertychange`每当您使用jQuery`addClass`或`removeClass`. 问题代码在这里：

```
 var field = $(this);
        field.data("value", field.val());
        field.bind("propertychange keyup input paste", function(event){
            if(field.data("response") && (field.val() != field.data("value"))) {
                toggleFlag(field, "hide");
                if($.isArray(field.data('linked_fields'))) {
                    $.each(field.data('linked_fields'), function(key, value) {
                        toggleFlag(value, "hide");
                    });
                }
            }
      }); 
```

在您的`toggleFlag`函数中，您调用 jQuery`addClass`和`removeClass`. 这创建了导致堆栈溢出的无限递归循环。

如果你把它拿出来，`propertychange`它在 Internet Explorer 以及所有其他浏览器上都能很好地工作。

**工作示例：http:** [//jsfiddle.net/yuNXm/9/](http://jsfiddle.net/yuNXm/9/)

您仅在 Internet Explorer 上遇到此问题的原因是[onpropertychange](http://msdn.microsoft.com/en-us/library/ms536956%28VS.85%29.aspx "财产变更")是 Microsoft 为 Internet Explorer 实现的专有事件。它没有被其他浏览器实现。

**使用 IE6-8 调试堆栈溢出：**

将来可以用来诊断这些类型的堆栈溢出的一个好方法是：

1.  确定与无限递归循环有关的函数之一。如果你被 IE6-8 卡住而没有调试能力，那么这需要在各种函数中放置警报，直到你找到一个无限循环的函数。

2.  将这行代码放在函数的顶部：

    `alert(arguments.callee.caller.toString());`

此警报将告诉您哪个函数正在调用无限循环函数。然后通过追溯无限递归循环中涉及哪些函数，您可以隔离您需要仔细检查无限循环原因的代码部分。

当然，如果您有一个带有适当调试工具的现代 Web 浏览器，那么这不是必需的——您只需单步调试代码即可。

顺便说一句，我感觉到你的痛苦。我的部分工作还涉及为企业客户编写 JavaScript，IE6-8 通常是他们的 IT 部门强加的浏览器。没有调试工具，只有警报和评论；当您解决堆栈溢出问题时，甚至没有可用的行号。

# extjs - 编辑器网格面板中的美元金额值是否可以用于添加或减去表单面板中的另一个字段？

> ID：11561989
> 
> 赞同：2
> 
> 时间：2012-07-19T13:30:40.077
> 
> 标签：extjs

我在表单面板内的字段集中有一个编辑器网格面板。我正在使用编辑器网格面板记录需要添加到发票记录的多个发票行项目。我需要做的是从编辑器网格面板（对于每个行项目）中获取美元金额，并将（正数）或减去（负数）添加到编辑器网格面板之外但在表单面板内的字段。此字段称为应付金额。如何才能做到这一点？谢谢您的帮助。这是表单的代码和屏幕截图。夺旗

这是网格的代码。/ *==== 发票数据开始 =========================================== ==============* /

```
// 
var clinRec = new Ext.data.Record.create([
{
    name: 'value'           ,
    mapping: 'name'   ,
    type: 'string'
}
,{
    name: 'display'         ,
    mapping: 'value' ,
    type: 'string'
}
,{
    name: 'stateRegion'     ,
    mapping: 'field1'  ,
    type: 'string'
}
,{
    name: 'clinDesc'        ,
    mapping: 'field2'  ,
    type: 'string'
}
,{
    name: 'fiscalYearStart' ,
    mapping: 'field3'  ,
    type: 'string'
}
,{
    name: 'declarationDate' ,
    mapping: 'field4'  ,
    type: 'string'
}
]);
var clinReader = new Ext.data.JsonReader({
    totalProperty: 'numrows',
    root:'rows',
    id: 'value'
},
clinRec
);
var clinStore =   new Ext.data.Store({
    url: 'GetPickListDataAction.do',
    reader: clinReader,
    listeners: {
        loadexception: function(proxy, store, response, e) {
            logger.trace('#####TOA:DATA: Load Exception');
        }
    }
});
clinStore.load({
    waitTitle: 'Please Wait',
    waitMsg: 'Loading...',
    params: {
        listType: 'CLIN'
    },
    callback: function (records, options, success) {
        if (success) {
            logger.trace("###>>TOA:DATA:CLIN:STORE:LOAD: Succeded");
        }
        else {
            logger.trace("###>>>>>>TOA:DATA:CLIN:STORE:LOAD: failed");
            Ext.MessageBox.show ({
                msg: 'No records are available (CLIN)',
                icon: Ext.MessageBox.WARNING,
                buttons: Ext.MessageBox.OK
            });
        }
    //Core.MessageHandler.display (dstrReader);
    }
});

var iLineItemCM = new Ext.grid.ColumnModel([
{
    id: 'i_line_item_clin',
    header: "Field",
    sortable: false,
    width: 150,
    editor: new Ext.form.ComboBox({
        triggerAction: 'all',
        valueNotFoundText: 'Select a Field...',
        //emptyText: 'Select Field...',
        editable: false,
        forceSelection: false,
        valueField: 'value',
        displayField: 'display',
        store: clinStore,
        mode: 'local'
    })
},
{
    id:'i_line_item_name',
    header: "Line Item Name",
    dataIndex: 'i_line_item_name',
    width: 315,
    resizable: true,
    align: 'left',
    editor: new Ext.form.TextArea({
        allowBlank: false
    })
}
,{
    header: "Amount",
    dataIndex: 'i_line_item_amt',
    width: 80,
    align: 'right',
    renderer: 'usMoney',
    editor: new Ext.form.NumberField({
        allowBlank: false,
        allowNegative: false,
        maxValue: 100000
    })
}
]);

var iLineItemRec =
new Ext.data.Record.create([
{
    name: 'i_line_item_name'    ,
    mapping: 'i_line_item_name'  ,
    type: 'string'
}
,{
    name: 'i_line_item_amt'     ,
    mapping: 'i_line_item_amt'   ,
    type: 'string'
}
]);

var iLineItemStore = new Ext.data.Store({
    url: '',
    reader: new Ext.data.JsonReader({
        root: 'rows'
    },
    iLineItemRec
    )
});

var iLineItemGrid = new Ext.grid.EditorGridPanel({
    id: 'iLineItemStore',
    store: iLineItemStore,
    cm: iLineItemCM,
    cls: 'iLineItemGrid',
    width: 'auto',
    height: 'auto',
    frame: true,
    //title:'Edit Plants?',
    //plugins:checkColumn,
    clicksToEdit:1,
    viewConfig: {
        //forceFit: true
        autoFit:true
    },

    tbar: [{
        text: 'Add',
        tooltip:'Add the line item',
        handler : function(){
            var r = new iLineItemRec({
                i_line_item_name: '',
                i_line_item_amt: ''
            });
            iLineItemGrid.stopEditing();
            iLineItemStore.insert(0, r);
            iLineItemGrid.startEditing(0, 0);
        }
    },
    {
        text: 'Delete',
        tooltip:'Remove the selected line item',
        handler: function(){
            iLineItemGrid.stopEditing();
            var r = iLineItemGrid.getSelectionModel().getSelectedCell();
            iLineItemStore.removeAt(r[1]);
        }

    }

    ]
});
/////////////////// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:00:17.600

正如 Neil 所提到的，您应该创建一个模型来处理这种类型的逻辑，并在视图中尽可能少地包含逻辑。rRally 没有理由让逻辑一开始就出现在视图中，这是控制器的工作。

此外，我注意到您分配了`id`很多属性，随着应用程序规模的增长，管理起来变得相当麻烦。我建议将这些分配更改为并通过或`itemId`访问对象，而不是像我想象的那样。该属性是*全局*的，因此在整个应用程序中必须是唯一的。`Panel.down('#itemId')``Panel.queryById(itemId)``Ext.getCmp``id`

 *您的控制器应该观察您的视图，当您将项目添加到订单时`calculateTotal`，在控制器上运行一个方法，该方法迭代指定网格中的记录。然后，您可以获取每条记录的值并根据需要添加/减去。完成后，根据需要使用更新的总数设置字段/标签。

对于订单总额，可能类似于此标签示例的内容可用于显示该值。由于标签不与表单一起提交，您可以在表单上创建一个隐藏字段，并`setValue()`在计算订单总额时使用它来更改其值。

```
{
    xtype       : 'label',
    itemId      : 'order-total-label',
    /** This can be easily updated via me.update({value: "4.20"}); */
    data        : { value: '0.00' },
    tpl         : "Order Total: ${value}",
} 
```*

# android - 你如何在 listView 中设置超过 2 行？

> ID：11561991
> 
> 赞同：0
> 
> 时间：2012-07-19T13:30:43.913
> 
> 标签：android, listview

我在我的应用程序中创建了一个简单的论坛。如果用户发布的问题超过 2 行，我希望能够在我的自定义列表视图中显示它。即使我尝试设置 android:maxLines="7" 它拒绝显示超过 2 行？我该如何解决？Havnt 能够找到这个问题的任何答案......这是我的 xml 代码：

编辑：问题出现在用户评论显示在 listView 中的 TextView (android:id="@+id/feedback_list_item_comment") 中...

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:stretchColumns="1"
    android:weightSum="1.0"
    android:background="@drawable/rowselector"

    >

    <TableRow
        >

    <TextView
        android:id="@+id/feedback_list_item_name"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.46"
        android:singleLine="true"
        android:gravity="left"
        android:shadowColor="#bdbebd"
        android:shadowDx="1.0"
        android:shadowDy="1.0"
        android:shadowRadius="0.5"
        android:text="Unknown"
        android:textColor="#000000"
        android:textSize="14dp"
        android:textStyle="bold" 
        android:layout_marginLeft="3dp"/>

    <TextView
        android:id="@+id/feedback_list_item_time"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.46"
        android:singleLine="true"
        android:gravity="left"
        android:shadowColor="#bdbebd"
        android:shadowDx="1.0"
        android:shadowDy="1.0"
        android:shadowRadius="1.0"
        android:text="dd.mm.yy"
        android:textColor="#3c6dae"
        android:textSize="14dp"
         />

    <TextView
        android:id="@+id/feedback_list_item_replies"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:maxLines="1"
        android:gravity="center"
        android:shadowColor="#bdbebd"
        android:shadowDx="1.0"
        android:shadowDy="1.0"
        android:shadowRadius="1.0"
        android:layout_weight="0.08"
        android:textColor="#000000"
        android:textSize="14dp"
        android:layout_marginRight="3dp"

        > 
        </TextView> 
```

这是下面的评论 TextView 我想将行数设置为 7 ....：

```
<TableRow>

 <TextView
        android:id="@+id/feedback_list_item_comment"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:maxLines="7"
        android:layout_marginLeft="3dp"
        android:layout_marginBottom="4dp"
        android:gravity="left"
        android:shadowColor="#bdbebd"
        android:shadowDx="1.0"
        android:shadowDy="1.0"
        android:shadowRadius="1.0"
        android:text="No comment"
        android:textColor="#666666"
        android:textSize="12dp"
       >            
        </TextView>    

</TableRow>
 </TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:04:34.190

您没有发布足够的代码来说明，但我敢打赌您使用的是 Android 库中的标准两行列表视图。如果您想完全控制列表视图项的外观，则需要制作自定义视图并`ArrayAdapter<...>`使用自定义适配器进行扩展以加载它们。

我第一次这样做的时候就被吓到了，但这真的不是很多工作，你会发现控制你的 ListView 非常值得花时间。

这是一个帮助您入门的链接：[http ://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

# ios - UIScrollView 的灵敏度/滚动速度与分页

> ID：11561992
> 
> 赞同：29
> 
> 时间：2012-07-19T13:30:49.017
> 
> 标签：ios, uiscrollview

我希望 UIScrollView 在快速扫描后快速滚动，[就像这样](http://www.youtube.com/watch?v=0Dug07Nt_dk)。虽然，当打开分页时，滚动一次只能工作[一页](http://www.youtube.com/watch?v=vGLneA6hkWk)。当通过手指轻弹启用分页而不使用手势识别器手动实现时，是否可以快速滚动？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-13T10:41:05.623

这相当简单，但是您必须自己实现分页方面（这相当简单）。您不需要手势识别器。

# 迅速

首先，调整你的**UIScrollView**减速率：

```
scrollView.decelerationRate = UIScrollViewDecelerationRateFast 
```

假设我们有一个内容数组——我们称之为`yourPagesArray`。在您的**UIScrollViewDelegate**中，实现以下方法：

```
func scrollViewWillEndDragging(_ scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>)
{
    //This is the index of the "page" that we will be landing at
    let nearestIndex = Int(CGFloat(targetContentOffset.pointee.x) / scrollView.bounds.size.width + 0.5)

    //Just to make sure we don't scroll past your content
    let clampedIndex = max( min( nearestIndex, yourPagesArray.count - 1 ), 0 )

    //This is the actual x position in the scroll view
    var xOffset = CGFloat(clampedIndex) * scrollView.bounds.size.width

    //I've found that scroll views will "stick" unless this is done
    xOffset = xOffset == 0.0 ? 1.0 : xOffset

    //Tell the scroll view to land on our page
    targetContentOffset.pointee.x = xOffset
} 
```

您还需要实现以下委托方法，以处理用户轻轻抬起手指而不会导致任何滚动减速的情况：

（更新：您可能不需要在最新的 iOS SDK 下执行此操作。现在似乎在速度为零时调用了上述委托方法。）

```
func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool)
{
    if !decelerate
    {
        let currentIndex = floor(scrollView.contentOffset.x / scrollView.bounds.size.width)

        let offset = CGPoint(x: scrollView.bounds.size.width * currentIndex, y: 0)

        scrollView.setContentOffset(offset, animated: true)
    }
} 
```

# Objective-C

设置减速率：

```
scrollView.decelerationRate = UIScrollViewDecelerationRateFast; 
```

然后你的滚动视图委托实现：

```
- (void) scrollViewWillEndDragging:(UIScrollView *)scroll withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset
{
    //This is the index of the "page" that we will be landing at
    NSUInteger nearestIndex = (NSUInteger)(targetContentOffset->x / scrollView.bounds.size.width + 0.5f);   

    //Just to make sure we don't scroll past your content
    nearestIndex = MAX( MIN( nearestIndex, yourPagesArray.count - 1 ), 0 );

    //This is the actual x position in the scroll view
    CGFloat xOffset = nearestIndex * scrollView.bounds.size.width;

    //I've found that scroll views will "stick" unless this is done
    xOffset = xOffset==0?1:xOffset;

    //Tell the scroll view to land on our page
    *targetContentOffset = CGPointMake(xOffset, targetContentOffset->y);
}

- (void) scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if( !decelerate )
    {
        NSUInteger currentIndex = (NSUInteger)(scrollView.contentOffset.x / scrollView.bounds.size.width);

        [scrollView setContentOffset:CGPointMake(scrollView.bounds.size.width * currentIndex, 0) animated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-11T12:37:43.370

我想我们可以在手指触摸它时设置 scrollView.userInteractionEnabled = NO 。然后当动画停止时，打开它。它对我有用。希望它会帮助你。

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
    scrollView.userInteractionEnabled = NO;
}

// at the end of scroll animation, reset the boolean used when scrolls originate from the UIPageControl
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    scrollView.userInteractionEnabled = YES;
} 
```

# entity-framework - 使用实体框架进行单元测试。嘲弄

> ID：11561997
> 
> 赞同：2
> 
> 时间：2012-07-19T13:31:12.243
> 
> 标签：entity-framework, unit-testing

我是单元测试的初学者。请帮我

我有类**UserData** UserData.cs

```
public partial class UserData
{

    /// <summary>
    /// return all not locked users
    /// </summary>
    /// <returns></returns>
    public static List<UserData> GetAllNotLockedUsers()
    {
        using (var db = new VostokPortalEntities())
        {
            var result = db.UserData.Where(i => !i.IsLocked).ToList();
            return result;
        }
        throw new Exception("cannot get users");
    }
} 
```

我有控制器动作

```
 [HttpGet]
    public ActionResult Index()
    {           
        //get all user list
        var users = UserData.GetAllNotLockedUsers();
        return View(users);
    } 
```

我有测试方法

```
[TestMethod]
public void UserPageUnAuth()
{
    var fakedHttpContext = TestCore.FakeHttpContext();
    var homeController = new HomeController(fakedHttpContext);
    var indexResult = homeController.Index() as ViewResult;
    Assert.IsNotNull(indexResult);
} 
```

我想使用 Mock 进行测试。我应该怎么办？我应该用存储库模式重写类吗？这是必要的吗？我应该重写控制器逻辑吗？我应该向 EF 自动生成的类添加一些代码 Internet 上是否有关于初学者单元测试的文章？有没有简单的方法来模拟 EF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:48:47.413

将 DB 操作移至 Repository 类是一个好主意。您应该从为存储库创建接口开始。

```
public interface IUserRepository
{
    IEnumerable<User> GetAllNotLockedUsers();
} 
```

然后你应该实现一个非静态存储库类。

```
public class UserRepository : IUserRepository
{
    public IEnumerable<User> GetAllNotLockedUsers()
    {
        using (var db = new VostokPortalEntities())
        {
            var result = db.UserData.Where(i => !i.IsLocked).ToList();
            return result;
        }
    }
} 
```

由于存储库不再是静态的，因此您必须在使用它之前在某处实例化它。但是，下面的代码将不可测试。

```
[HttpGet]
public ActionResult Index()
{           
    var repository = new UserRepository();
    return View(repository.GetAllNotLockedUsers());
} 
```

存储库是在函数内部创建的，因此您不能用模拟替换它进行测试。您可以使用构造函数注入来注入此对象。

```
public class MyController : Controller
{
    private readonly IUserRepository _repository;

    public MyController(IUserRepository repository)
    {
        _repository = repository;
    }
} 
```

现在 MyController 是可测试的，因为您可以注入模拟实例而不是具体实现。

```
[Test]
public void RepositoryTest()
{
    //using Moq here
    Mock<IUserRepository> repositoryMock = new Mock<IUserRepository>();
    MyController controller = new MyController(repositoryMock.Object);
} 
```

但是，默认控制器工厂将无法在没有无参数构造函数的情况下创建控制器。它对您的存储库实现一无所知。从现在开始，您应该得到 DI 容器的帮助来创建控制器。这个我就不详细说了，大家可以看看[这篇博文](http://haacked.com/archive/2007/12/07/tdd-and-dependency-injection-with-asp.net-mvc.aspx)