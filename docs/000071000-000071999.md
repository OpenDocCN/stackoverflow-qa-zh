# StackOverflow 问答 000071000-000071999

# java - 帮助从 .Net 创建 Zip 文件并从 Java 读取它们

> ID：71000
> 
> 赞同：4
> 
> 时间：2008-09-16T10:22:16.687
> 
> 标签：java, .net, interop, zip

我正在尝试从 .Net 创建一个可以从 Java 代码读取的 Zip 文件。

我已经使用 SharpZipLib 创建了 Zip 文件，但如果生成的文件根据 #ZipLib 库的 CheckZip 函数有效并且可以通过 WinZip 或 WinRar 成功解压缩，我在尝试使用 Java 解压缩时总是出错Java 中的 .Utils.Zip 类。

问题似乎出在 SharpZipLib 编写的错误标题中，我还在 SharpDevelop 论坛上发布了一个问题，但没有结果（有关信息，请参阅[http://community.sharpdevelop.net/forums/t/8272.aspx](http://community.sharpdevelop.net/forums/t/8272.aspx)）但是没有结果。

有人有使用 .Net 压缩 Zip 文件并使用 Java.Utils.Zip 类对其进行解压缩的代码示例吗？

问候马西莫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T10:35:01.103

我使用过[DotNetZip 库](http://www.codeplex.com/DotNetZip)，它似乎工作正常。典型代码：

```
using (ZipFile zipFile = new ZipFile())
{
  zipFile.AddDirectory(sourceFolderPath);
  zipFile.Save(archiveFolderName);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T17:46:48.440

我在使用 SharpZipLib（最新版本）创建 zip 并使用 java.utils.zip 提取时遇到了同样的问题。

这是为我解决问题的方法。我不得不强制排除 zip64 的使用：

```
ZipOutputStream s = new ZipOutputStream(File.Create(someZipFileName))

s.UseZip64 = UseZip64.Off; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T10:32:09.563

对 SharpZipLib 无能为力，但您可以尝试使用[ZipPackage](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx)类[System.IO.Packaging](http://msdn.microsoft.com/en-us/library/system.io.packaging.aspx)创建 zip 文件，而无需使用第三部分库（需要 .NET 3+）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-04T03:31:47.020

您不想在 .NET 中使用 ZipPackage 类——它不是一个标准的 zip 模型。是的，但它假定文件中有一个特定的结构，带有一个众所周知的名称的清单，等等。ZipPackage 似乎已针对 Office 文档和 XPS 文档进行了优化。

如果您正在制作通用 ZIP 文件并希望具有良好的互操作性，那么第三方库（例如[http://www.codeplex.com/DotNetZip ）可能是更好的选择。](http://www.codeplex.com/DotNetZip)

DotNetZip 构建的文件几乎可以与所有东西互操作，包括 Java 的 java.utils.zip。但要小心使用 Java 不支持的特性，如 ZIP64 或 Unicode。ZIP64 仅适用于非常大的档案，我认为 Java 目前还不能很好地支持。Java 以特定方式支持 Unicode，因此如果您使用 DotNetZip 生成基于 Unicode 的 ZIP 文件，您只需遵循一些规则，它就可以正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T12:55:28.567

要判断它是否真的是符合标准的 ZIP 文件，请参阅 PKZIP 的[.ZIP 文件格式规范](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)。

对于它的价值，我使用 SharpZipLib 在 Windows Mobile 设备上创建 ZIP 并使用 WinZip 或 Windows XP 的内置压缩文件夹功能打开它们没有任何问题，并且使用 SharpZipLib 在桌面上生成 ZIP 并使用我的处理它们也没有问题在移动设备上拥有自己的 ZIP 提取实用程序（基本上是 zlib 的包装器）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-28T09:43:34.123

我在 Linux 上解压缩 SharpZipLib 压缩文件时遇到了类似的问题。我想我解决了（我现在在 Linux 和 Mac 上工作，我测试了它），查看我的博客文章：http: [//igorbrejc.net/development/c/sharpziplib-making-it-work-for-linuxmac](http://igorbrejc.net/development/c/sharpziplib-making-it-work-for-linuxmac)

# sql - 多列的SQL MAX？

> ID：71022
> 
> 赞同：454
> 
> 时间：2008-09-16T10:27:02.400
> 
> 标签：sql, sql-server, tsql

如何在几列的最大值中每行返回 1 个值：

**表名**

```
[Number, Date1, Date2, Date3, Cost] 
```

我需要返回这样的东西：

```
[Number, Most_Recent_Date, Cost] 
```

询问？

* * *

## 回答 #1

> 赞同：970
> 
> 时间：2011-07-29T10:11:27.257

`Max`这是使用 T-SQL 和 SQL Server的功能的另一个不错的解决方案

```
SELECT [Other Fields],
  (SELECT Max(v) 
   FROM (VALUES (date1), (date2), (date3),...) AS value(v)) as [MaxDate]
FROM [YourTableName] 
```

Values 是[表值构造函数](https://docs.microsoft.com/en-us/sql/t-sql/queries/table-value-constructor-transact-sql?view=sql-server-ver15)。

"指定要构造到表中的一组行值表达式。Transact-SQL 表值构造函数允许在单个 DML 语句中指定多行数据。表值构造函数可以指定为INSERT ... VALUES 语句，或作为 MERGE 语句的 USING 子句或 FROM 子句中的派生表。”

* * *

## 回答 #2

> 赞同：189
> 
> 时间：2008-09-16T10:30:31.330

这是一个古老的答案，在很多方面都被打破了。

请参阅[https://stackoverflow.com/a/6871572/194653](https://stackoverflow.com/a/6871572/194653)，它有更多的赞成票并与 sql server 2008+ 一起使用并处理空值等。

**原始但有问题的答案**：

好吧，您可以使用 CASE 语句：

```
SELECT
    CASE
        WHEN Date1 >= Date2 AND Date1 >= Date3 THEN Date1
        WHEN Date2 >= Date1 AND Date2 >= Date3 THEN Date2
        WHEN Date3 >= Date1 AND Date3 >= Date2 THEN Date3
        ELSE                                        Date1
    END AS MostRecentDate 
```

* * *

## 回答 #3

> 赞同：188
> 
> 时间：2008-12-01T19:16:33.650

如果您使用的是 MySQL 或 PostgreSQL 或 Oracle，则可以使用

```
SELECT GREATEST(col1, col2 ...) FROM table 
```

* * *

## 回答 #4

> 赞同：68
> 
> 时间：2009-09-09T07:15:26.110

还有 3 种方法，其中`UNPIVOT`(1) 是迄今为止最快的，其次是 Simulated Unpivot (3)，它比 (1) 慢得多，但仍比 (2) 快

```
CREATE TABLE dates
    (
      number INT PRIMARY KEY ,
      date1 DATETIME ,
      date2 DATETIME ,
      date3 DATETIME ,
      cost INT
    )

INSERT  INTO dates
VALUES  ( 1, '1/1/2008', '2/4/2008', '3/1/2008', 10 )
INSERT  INTO dates
VALUES  ( 2, '1/2/2008', '2/3/2008', '3/3/2008', 20 )
INSERT  INTO dates
VALUES  ( 3, '1/3/2008', '2/2/2008', '3/2/2008', 30 )
INSERT  INTO dates
VALUES  ( 4, '1/4/2008', '2/1/2008', '3/4/2008', 40 )
GO 
```

## 解决方案 1 ( `UNPIVOT`)

```
SELECT  number ,
        MAX(dDate) maxDate ,
        cost
FROM    dates UNPIVOT ( dDate FOR nDate IN ( Date1, Date2,
                                            Date3 ) ) as u
GROUP BY number ,
        cost 
GO 
```

## 解决方案2（每行子查询）

```
SELECT  number ,
        ( SELECT    MAX(dDate) maxDate
          FROM      ( SELECT    d.date1 AS dDate
                      UNION
                      SELECT    d.date2
                      UNION
                      SELECT    d.date3
                    ) a
        ) MaxDate ,
        Cost
FROM    dates d
GO 
```

## 解决方案 3（模拟`UNPIVOT`）

```
;WITH    maxD
          AS ( SELECT   number ,
                        MAX(CASE rn
                              WHEN 1 THEN Date1
                              WHEN 2 THEN date2
                              ELSE date3
                            END) AS maxDate
               FROM     dates a
                        CROSS JOIN ( SELECT 1 AS rn
                                     UNION
                                     SELECT 2
                                     UNION
                                     SELECT 3
                                   ) b
               GROUP BY Number
             )
    SELECT  dates.number ,
            maxD.maxDate ,
            dates.cost
    FROM    dates
            INNER JOIN MaxD ON dates.number = maxD.number
GO

DROP TABLE dates
GO 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2008-09-16T10:49:13.067

以下两个示例中的任何一个都可以使用：

```
SELECT  MAX(date_columns) AS max_date
FROM    ( (SELECT   date1 AS date_columns
           FROM     data_table         )
          UNION
          ( SELECT  date2 AS date_columns
            FROM    data_table
          )
          UNION
          ( SELECT  date3 AS date_columns
            FROM    data_table
          )
        ) AS date_query 
```

第二个是[lassevk](https://stackoverflow.com/users/267/lassevk)答案的附加内容。

```
SELECT  MAX(MostRecentDate)
FROM    ( SELECT    CASE WHEN date1 >= date2
                              AND date1 >= date3 THEN date1
                         WHEN date2 >= date1
                              AND date2 >= date3 THEN date2
                         WHEN date3 >= date1
                              AND date3 >= date2 THEN date3
                         ELSE date1
                    END AS MostRecentDate
          FROM      data_table
        ) AS date_query 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2011-02-07T13:58:07.527

标量函数会导致各种性能问题，因此如果可能，最好将逻辑包装到内联表值函数中。这是我用来替换一些用户定义函数的函数，这些函数从最多十个日期的列表中选择最小/最大日期。在我的 100 万行数据集上进行测试时，标量函数在我终止查询之前花费了 15 分钟以上，内联 TVF 花费了 1 分钟，这与将结果集选择到临时表中的时间相同。要使用此函数，请从 SELECT 或 CROSS APPLY 中的子查询中调用该函数。

```
CREATE FUNCTION dbo.Get_Min_Max_Date
(
    @Date1  datetime,
    @Date2  datetime,
    @Date3  datetime,
    @Date4  datetime,
    @Date5  datetime,
    @Date6  datetime,
    @Date7  datetime,
    @Date8  datetime,
    @Date9  datetime,
    @Date10 datetime
)
RETURNS TABLE
AS
RETURN
(
    SELECT      Max(DateValue)  Max_Date,
                Min(DateValue)  Min_Date
    FROM        (
                    VALUES  (@Date1),
                            (@Date2),
                            (@Date3),
                            (@Date4),
                            (@Date5),
                            (@Date6),
                            (@Date7),
                            (@Date8),
                            (@Date9),
                            (@Date10)
                )   AS Dates(DateValue)
) 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-04-01T08:12:38.547

对于 T-SQL (MSSQL 2008+)

```
SELECT
  (SELECT
     MAX(MyMaxName) 
   FROM ( VALUES 
            (MAX(Field1)), 
            (MAX(Field2)) 
        ) MyAlias(MyMaxName)
  ) 
FROM MyTable1 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2010-11-29T22:51:23.910

```
DECLARE @TableName TABLE (Number INT, Date1 DATETIME, Date2 DATETIME, Date3 DATETIME, Cost MONEY)

INSERT INTO @TableName 
SELECT 1, '20000101', '20010101','20020101',100 UNION ALL
SELECT 2, '20000101', '19900101','19980101',99 

SELECT Number,
       Cost  ,
       (SELECT MAX([Date])
       FROM    (SELECT Date1 AS [Date]
               UNION ALL
               SELECT Date2
               UNION ALL
               SELECT Date3
               )
               D
       )
       [Most Recent Date]
FROM   @TableName 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2010-11-29T22:03:29.200

```
SELECT 
    CASE 
        WHEN Date1 >= Date2 AND Date1 >= Date3 THEN Date1 
        WHEN Date2 >= Date3 THEN Date2 
        ELSE Date3
    END AS MostRecentDate 
```

这更容易写出并跳过评估步骤，因为 case 语句是按顺序评估的。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-01-23T12:42:05.097

不幸的是， [Lasse 的答案](https://stackoverflow.com/a/71045/224704)虽然看起来很明显，但有一个关键缺陷。它不能处理 NULL 值。任何单个 NULL 值都会导致 Date1 被返回。不幸的是，任何解决该问题的尝试都会变得非常混乱，并且不能很好地扩展到 4 个或更多值。

[databyss 的第一个答案](https://stackoverflow.com/a/71147/224704)看起来（并且）很好。但是，尚不清楚答案是否可以轻松地推断为来自多表连接的 3 个值，而不是来自单个表的更简单的 3 个值。我想避免将这样的查询变成子查询只是为了获得最多 3 列，我也很确定 databyss 的好主意可以稍微清理一下。

所以事不宜迟，这是我的解决方案（源自databyss的想法）。
它使用交叉连接选择常量来模拟多表连接的效果。需要注意的重要一点是，所有必要的别名都正确执行（并非总是如此），这使模式非常简单，并且可以通过附加列进行相当大的扩展。

```
DECLARE @v1 INT ,
        @v2 INT ,
        @v3 INT
--SET @v1 = 1 --Comment out SET statements to experiment with 
              --various combinations of NULL values
SET @v2 = 2
SET @v3 = 3

SELECT  ( SELECT    MAX(Vals)
          FROM      ( SELECT    v1 AS Vals
                      UNION
                      SELECT    v2
                      UNION
                      SELECT    v3
                    ) tmp
          WHERE     Vals IS NOT NULL -- This eliminates NULL warning

        ) AS MaxVal
FROM    ( SELECT    @v1 AS v1
        ) t1
        CROSS JOIN ( SELECT @v2 AS v2
                   ) t2
        CROSS JOIN ( SELECT @v3 AS v3
                   ) t3 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-05-31T10:28:56.020

问题：选择给予实体的最小费率值要求：代理费率可以为空

```
[MinRateValue] = 
CASE 
   WHEN ISNULL(FitchRating.RatingValue, 100) < = ISNULL(MoodyRating.RatingValue, 99) 
   AND  ISNULL(FitchRating.RatingValue, 100) < = ISNULL(StandardPoorsRating.RatingValue, 99) 
   THEN FitchgAgency.RatingAgencyName

   WHEN ISNULL(MoodyRating.RatingValue, 100) < = ISNULL(StandardPoorsRating.RatingValue , 99)
   THEN MoodyAgency.RatingAgencyName

   ELSE ISNULL(StandardPoorsRating.RatingValue, 'N/A') 
END 
```

受到[Nat的](https://stackoverflow.com/users/13813/nat)[回答](https://stackoverflow.com/a/4308539)的启发

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-12-01T19:36:58.633

如果您使用的是 SQL Server 2005，则可以使用 UNPIVOT 功能。这是一个完整的例子：

```
create table dates 
(
  number int,
  date1 datetime,
  date2 datetime,
  date3 datetime 
)

insert into dates values (1, '1/1/2008', '2/4/2008', '3/1/2008')
insert into dates values (1, '1/2/2008', '2/3/2008', '3/3/2008')
insert into dates values (1, '1/3/2008', '2/2/2008', '3/2/2008')
insert into dates values (1, '1/4/2008', '2/1/2008', '3/4/2008')

select max(dateMaxes)
from (
  select 
    (select max(date1) from dates) date1max, 
    (select max(date2) from dates) date2max,
    (select max(date3) from dates) date3max
) myTable
unpivot (dateMaxes For fieldName In (date1max, date2max, date3max)) as tblPivot

drop table dates 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-05-27T12:02:36.333

使用 CROSS APPLY（适用于 2005+）....

```
SELECT MostRecentDate 
FROM SourceTable
    CROSS APPLY (SELECT MAX(d) MostRecentDate FROM (VALUES (Date1), (Date2), (Date3)) AS a(d)) md 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-07-02T09:16:18.757

从 SQL Server 2012 我们可以使用[IIF](http://msdn.microsoft.com/en-us/library/hh213574%28v=sql.110%29.aspx)。

```
 DECLARE @Date1 DATE='2014-07-03';
 DECLARE @Date2 DATE='2014-07-04';
 DECLARE @Date3 DATE='2014-07-05';

 SELECT IIF(@Date1>@Date2,
        IIF(@Date1>@Date3,@Date1,@Date3),
        IIF(@Date2>@Date3,@Date2,@Date3)) AS MostRecentDate 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2011-07-11T12:42:59.330

基于来自[http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/Q_24204894.html的](http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/Q_24204894.html)[ScottPletcher](http://www.experts-exchange.com/M_664986.html)的解决方案， 我创建了一组函数（例如 GetMaxOfDates3 ， GetMaxOfDates13 ）来查找最大值使用 UNION ALL 的最多 13 个日期值。请参阅[T-SQL 函数以从同一行获取最大值](https://mfreidge.wordpress.com/2011/07/11/t-sql-function-to-get-maximum-of-values-from-the-same-row/) 但是在编写这些函数时我还没有考虑过 UNPIVOT 解决方案

```
CREATE FUNCTION GetMaxOfDates13 (
@value01 DateTime = NULL,  
@value02 DateTime = NULL,
@value03 DateTime = NULL,
@value04 DateTime = NULL,
@value05 DateTime = NULL,
@value06 DateTime = NULL,
@value07 DateTime = NULL,
@value08 DateTime = NULL,
@value09 DateTime = NULL,
@value10 DateTime = NULL,
@value11 DateTime = NULL,
@value12 DateTime = NULL,
@value13 DateTime = NULL
)
RETURNS DateTime
AS
BEGIN
RETURN (
SELECT TOP 1 value
FROM (
SELECT @value01 AS value UNION ALL
SELECT @value02 UNION ALL
SELECT @value03 UNION ALL
SELECT @value04 UNION ALL
SELECT @value05 UNION ALL
SELECT @value06 UNION ALL
SELECT @value07 UNION ALL
SELECT @value08 UNION ALL
SELECT @value09 UNION ALL
SELECT @value10 UNION ALL
SELECT @value11 UNION ALL
SELECT @value12 UNION ALL
SELECT @value13
) AS [values]
ORDER BY value DESC    
)
END –FUNCTION
GO
CREATE FUNCTION GetMaxOfDates3 (
@value01 DateTime = NULL,  
@value02 DateTime = NULL,
@value03 DateTime = NULL
)
RETURNS DateTime
AS
BEGIN
RETURN dbo.GetMaxOfDates13(@value01,@value02,@value03,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL)
END –FUNCTION 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-05-26T06:52:50.270

请尝试使用`UNPIVOT`：

```
SELECT MAX(MaxDt) MaxDt
   FROM tbl 
UNPIVOT
   (MaxDt FOR E IN 
      (Date1, Date2, Date3)
)AS unpvt; 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-02-09T23:50:20.250

我更喜欢基于案例的解决方案，我的假设是，与其他可能的解决方案（如交叉应用、values()、自定义函数等）相比，它对可能的性能下降的影响应该最小。

这是使用大多数可能的测试用例处理空值的 case-when 版本：

```
SELECT
    CASE 
        WHEN Date1 > coalesce(Date2,'0001-01-01') AND Date1 > coalesce(Date3,'0001-01-01') THEN Date1 
        WHEN Date2 > coalesce(Date3,'0001-01-01') THEN Date2 
        ELSE Date3
    END AS MostRecentDate
    , *
from 
(values
     (  1, cast('2001-01-01' as Date), cast('2002-01-01' as Date), cast('2003-01-01' as Date))
    ,(  2, cast('2001-01-01' as Date), cast('2003-01-01' as Date), cast('2002-01-01' as Date))
    ,(  3, cast('2002-01-01' as Date), cast('2001-01-01' as Date), cast('2003-01-01' as Date))
    ,(  4, cast('2002-01-01' as Date), cast('2003-01-01' as Date), cast('2001-01-01' as Date))
    ,(  5, cast('2003-01-01' as Date), cast('2001-01-01' as Date), cast('2002-01-01' as Date))
    ,(  6, cast('2003-01-01' as Date), cast('2002-01-01' as Date), cast('2001-01-01' as Date))
    ,( 11, cast(NULL         as Date), cast('2002-01-01' as Date), cast('2003-01-01' as Date))
    ,( 12, cast(NULL         as Date), cast('2003-01-01' as Date), cast('2002-01-01' as Date))
    ,( 13, cast('2003-01-01' as Date), cast(NULL         as Date), cast('2002-01-01' as Date))
    ,( 14, cast('2002-01-01' as Date), cast(NULL         as Date), cast('2003-01-01' as Date))
    ,( 15, cast('2003-01-01' as Date), cast('2002-01-01' as Date), cast(NULL         as Date))
    ,( 16, cast('2002-01-01' as Date), cast('2003-01-01' as Date), cast(NULL         as Date))
    ,( 21, cast('2003-01-01' as Date), cast(NULL         as Date), cast(NULL         as Date))
    ,( 22, cast(NULL         as Date), cast('2003-01-01' as Date), cast(NULL         as Date))
    ,( 23, cast(NULL         as Date), cast(NULL         as Date), cast('2003-01-01' as Date))
    ,( 31, cast(NULL         as Date), cast(NULL         as Date), cast(NULL         as Date))

) as demoValues(id, Date1,Date2,Date3)
order by id
; 
```

结果是：

```
MostRecent    id   Date1      Date2      Date3
2003-01-01    1    2001-01-01 2002-01-01 2003-01-01
2003-01-01    2    2001-01-01 2003-01-01 2002-01-01
2003-01-01    3    2002-01-01 2001-01-01 2002-01-01
2003-01-01    4    2002-01-01 2003-01-01 2001-01-01
2003-01-01    5    2003-01-01 2001-01-01 2002-01-01
2003-01-01    6    2003-01-01 2002-01-01 2001-01-01
2003-01-01    11   NULL       2002-01-01 2003-01-01
2003-01-01    12   NULL       2003-01-01 2002-01-01
2003-01-01    13   2003-01-01 NULL       2002-01-01
2003-01-01    14   2002-01-01 NULL       2003-01-01
2003-01-01    15   2003-01-01 2002-01-01 NULL
2003-01-01    16   2002-01-01 2003-01-01 NULL
2003-01-01    21   2003-01-01 NULL       NULL
2003-01-01    22   NULL       2003-01-01 NULL
2003-01-01    23   NULL       NULL       2003-01-01
NULL          31   NULL       NULL       NULL 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2011-01-14T19:40:58.033

您可以创建一个传递日期的函数，然后将该函数添加到 select 语句中，如下所示。选择数字，dbo.fxMost_Recent_Date(Date1,Date2,Date3)，成本

```
create FUNCTION  fxMost_Recent_Date 
```

（@Date1 smalldatetime，@Date2 smalldatetime，@Date3 smalldatetime）返回 smalldatetime 作为开始声明 @Result smalldatetime

```
declare @MostRecent smalldatetime

set @MostRecent='1/1/1900'

if @Date1>@MostRecent begin set @MostRecent=@Date1 end
if @Date2>@MostRecent begin set @MostRecent=@Date2 end
if @Date3>@MostRecent begin set @MostRecent=@Date3 end
RETURN @MostRecent 
```

结尾

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-03-27T14:18:39.393

另一种使用**CASE WHEN的方法**

```
SELECT CASE true 
       WHEN max(row1) >= max(row2) THEN CASE true WHEN max(row1) >= max(row3) THEN max(row1) ELSE max(row3) end ELSE
       CASE true WHEN max(row2) >= max(row3) THEN max(row2) ELSE max(row3) END END
FROM yourTable 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-03-26T11:22:20.197

我的解决方案也可以处理空值比较。它可以通过编写为一个查询来简化，但为了解释，我使用的是 CTE。这个想法是在步骤 1 中将比较从 3 个数字减少到 2 个数字，然后在步骤 2 中从 2 个数字减少到 1 个数字。

```
with x1 as
(
  select 1 as N1, null as N2, 3 as N3
  union
  select 1 as N1, null as N2, null as N3
  union
  select null as N1, null as N2, null as N3
)
,x2 as
(
select 
N1,N2,N3,
IIF(Isnull(N1,0)>=Isnull(N2,0),N1,N2) as max1,
IIF(Isnull(N2,0)>=Isnull(N3,0),N2,N3) as max2
from x1
)
,x3 as
(
 select N1,N2,N3,max1,max2,
 IIF(IsNull(max1,0)>=IsNull(max2,0),max1,max2) as MaxNo
 from x2
)
select * from x3 
```

输出：

[![在此处输入图像描述](https://i.stack.imgur.com/XcI1W.png)](https://i.stack.imgur.com/XcI1W.png)

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2015-08-10T08:04:26.160

这是一个很好的解决方案：

```
CREATE function [dbo].[inLineMax] (@v1 float,@v2 float,@v3 float,@v4 float)
returns float
as
begin
declare @val float
set @val = 0 
declare @TableVal table
(value float )
insert into @TableVal select @v1
insert into @TableVal select @v2
insert into @TableVal select @v3
insert into @TableVal select @v4

select @val= max(value) from @TableVal

return @val
end 
```

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2016-06-13T07:59:10.180

我不知道它是否在 SQL 上，等等......在 M$ACCESS 帮助上有一个调用的函数`MAXA(Value1;Value2;...)`应该这样做。

希望可以帮助某人。

PD：值可以是列或计算值等。

* * *

## 回答 #23

> 赞同：-4
> 
> 时间：2020-03-14T15:15:12.910

[![在此处输入图像描述](https://i.stack.imgur.com/peyNn.png)](https://i.stack.imgur.com/peyNn.png)上表是以salary1,salary2,salary3,salary4为列的员工工资表。下面的查询将返回四列中的最大值

```
select  
 (select Max(salval) from( values (max(salary1)),(max(salary2)),(max(salary3)),(max(Salary4)))alias(salval)) as largest_val
 from EmployeeSalary 
```

运行上面的查询将输出为 maximum_val(10001)

上述查询逻辑如下：

```
select Max(salvalue) from(values (10001),(5098),(6070),(7500))alias(salvalue) 
```

输出将是 10001

# java - 我可以在命令行中添加 maven 存储库吗？

> ID：71030
> 
> 赞同：69
> 
> 时间：2008-09-16T10:28:37.297
> 
> 标签：java, maven-2, build-process

我知道我可以添加 maven 存储库以在 ~/.m2/settings.xml 中获取依赖项。但是是否可以使用命令行添加存储库，例如：

```
mvn install -Dmaven.repository=http://example.com/maven2 
```

我想这样做的原因是因为我使用的是持续集成工具，我可以完全控制用于调用 maven 的命令行选项，但是为运行集成工具的用户管理 settings.xml 有点麻烦麻烦。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-07-28T12:04:53.650

您可以这样做，但正如其他人所说，您最好在 POM 中这样做。

在命令行上，您可以为本地存储库指定一个属性，并为远程存储库指定另一个存储库。远程存储库将具有所有默认设置

下面的示例指定了两个远程存储库和一个自定义本地存储库。

```
mvn package -Dmaven.repo.remote=http://www.ibiblio.org/maven/,http://myrepo 
  -Dmaven.repo.local="c:\test\repo" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-18T20:46:23.813

Maven't Project Object Model (POM) 的目标之一是捕获可靠地再现工件所需的所有信息，因此强烈建议不要传递影响工件创建的设置。

为了实现您的目标，您可以在每个项目中签入您的用户级 settings.xml 文件，并使用 -s（或 --settings）选项将其传递给构建。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T10:45:43.883

我不确定您是否可以使用命令行来执行此操作。另一方面，您可以在**pom.xml**中添加存储库，如下例所示。使用这种方法，您无需更改**~/.m2/settings.xml**文件。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    ...
    <repositories>
            <repository>
                <id>MavenCentral</id>
                <name>Maven repository</name>
                <url>http://repo1.maven.org/maven2</url>
                <releases>
                    <enabled>true</enabled>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
            </repository>
...
            <repository>
                <id>Codehaus Snapshots</id>
                <url>http://snapshots.repository.codehaus.org/</url>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
                <releases>
                    <enabled>false</enabled>
                </releases>
            </repository>
        </repositories>

    ...

        <pluginRepositories>
            <pluginRepository>
                <id>apache.snapshots</id>
                <name>Apache Snapshot Repository</name>
                <url>
                    http://people.apache.org/repo/m2-snapshot-repository
                </url>
                <releases>
                    <enabled>false</enabled>
                </releases>
            </pluginRepository>
            <pluginRepository>
                <id>Codehaus Snapshots</id>
                <url>http://snapshots.repository.codehaus.org/</url>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
                <releases>
                    <enabled>false</enabled>
                </releases>
            </pluginRepository>
        </pluginRepositories>

    ...

    </project> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-18T18:45:26.663

正如@Jorge Ferreira 已经说过的，将您的存储库定义放在 pom.xml 中。额外使用[配置文件](http://maven.apache.org/pom.html#Profiles)通过命令行选择要使用的存储库：

```
mvn deploy -P MyRepo2

mvn deploy -P MyRepo1 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-01-09T01:14:34.567

我在这里假设你问这个问题是因为你偶尔想在你的构建中添加一个新的 3rd-party 存储库。我当然可能是错的...... :)

在这种情况下，最好的选择是使用托管代理，例如 artifactory 或 nexus。然后在 settings.xml 中进行一次性更改，将其设置为世界的镜像。

从那时起您需要添加的任何第 3 方存储库都可以通过代理进行处理。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T10:54:37.203

我之前没有真正使用过 maven 2，由于 maven 2 的一些问题，我们的系统仍在使用 maven 1.x。

但是，查看 maven 2 的文档，似乎没有任何特定的 System 属性。但是，您可能可以使用系统属性在您的 poms/设置中构建一个。[请参阅此http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)的系统属性部分

因此，您的设置文件中有 ${maven.repository} ，然后像上面一样使用 -Dmaven.repository 。

我不确定这是否可行，但通过一些调整，我相信你可以想出一些东西。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-18T18:58:43.263

创建具有所需存储库设置的 POM，然后使用项目 POM 中的父元素继承其他存储库。当一组项目属于一个团队时，使用“组织”POM 还有其他几个好处。

# c# - 管理大量数据 - 存储过程或数据集或其他......？

> ID：71031
> 
> 赞同：1
> 
> 时间：2008-09-16T10:28:44.440
> 
> 标签：c#, database

我有一个应用程序每天导入大量数据，几十万条记录。
数据来自不同的来源。使用 C# 读取数据，然后将其批量插入到数据库中。

然后处理此数据：

*   不同的表被链接
*   生成新表
*   使用复杂的算法更正数据（某些表格的总数必须为零）

大多数处理是在存储过程中完成的。
尽管在 C# 中一些复杂的处理会更简单，但将数据提取到数据集中并重新注入会大大减慢速度。
您可能会问为什么我在将数据插入数据库之前不对其进行处理，但我认为在内存中操作 100,000 条记录是不切实际的，并且基于 SQL 集的命令在创建大量记录时会有所帮助。

这可能会引发使用存储过程及其优缺点的古老问题。（例如，您如何对存储过程进行单元测试？）

我想回答的是您对大量数据的经验以及您如何解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T10:34:20.777

我会使用 SSIS 或 DTS（假设您正在谈论 MSSQL）。它们是为此目的而制造的，如果您需要它们，它们可以与 SP 一起使用。

另一种选择是使用 Perl 预处理数据。尽管这听起来像是一个奇怪的建议，但 Perl 在这些情况下实际上是非常快的。我过去曾用它在合理的时间内（即几天而不是几周）处理数十亿条记录。

关于“您如何对存储过程进行单元测试”，您可以像其他任何东西一样使用 MBUnit 对它们进行单元测试。只有一点建议：数据的设置和回滚可能很棘手，您可以使用 DTS 事务或显式 SQL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T10:56:04.420

在 MSSQL 中做事时，我通常不得不同意 Skliwz。SSIS 和 DTS 是要走的路，但如果您不熟悉这些技术，使用它们可能会很麻烦。但是，有一个替代方法可以让您在 C# 中进行处理，并且仍然将您的数据保存在 SQL Server 中。

如果您真的认为 C# 中的处理会更简单，那么您可能需要考虑使用[SQL Server Project](http://msdn.microsoft.com/en-us/library/c8dbfz8s(VS.80).aspx)来使用 C# 创建[数据库对象](http://msdn.microsoft.com/en-us/library/k2e1fb36(VS.80).aspx)。您可以使用 SQL Server 中的 CLR 对象执行许多非常强大的操作，这将允许您在代码接触数据库之前编写代码并对其进行单元测试。您可以使用任何标准的单元测试框架（NUnit、MSTest）在 VS 中对您的 CLR 代码进行单元测试，并且您不必编写一堆难以管理的设置和拆卸脚本。

至于测试您的存储过程，我会诚实地研究[DBFit](http://benilovj.github.com/dbfit)。您的数据库不必再成为未经测试的功能的黑洞:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:24:16.707

你在哪里处理数据很大程度上取决于你在做什么。例如，如果您需要丢弃数据库中不需要的数据，则可以在 C# 代码中处理这些数据。但是，要在数据库中处理的数据通常应该是“与实施无关”的数据。因此，如果其他人想从 Java 客户端插入数据，数据库应该能够拒绝不良数据。如果您将该逻辑放入您的 C# 代码中，Java 代码将不会知道它。

有些人反对并说“但我永远不会为数据库使用另一种语言！” 即使这是真的，您仍然会有 DBA 或开发人员使用数据库，如果逻辑不存在，他们会犯错误。或者您的新 C# 开发人员会尝试插入数据，但不知道（或只是忽略）用 C# 编写的数据预处理器。

简而言之，您放入数据库中的逻辑应该足以保证数据的正确性，而无需依赖外部软件。

# scrum - SCRUM——不合作的团队成员

> ID：71036
> 
> 赞同：19
> 
> 时间：2008-09-16T10:29:28.947
> 
> 标签：scrum

如果您的团队成员在 Scrum 会议期间不合作，您会怎么做？他们要么对他们目前正在从事的工作提供一个非常高级的定义（“研究功能 x”），要么进入极其不相关的细节，**尽管他们在 SCRUM 方法方面受过良好的教育**。这会导致 Scrum 会议无效且无聊。

作为一名 Scrum Master，你有什么技巧可以在会议期间充分发挥人们的作用？

编辑添加：

**你用什么技巧来阻止一个说话太多的人，而不是冒犯？**

**您使用什么技术来鼓励某人提供更详细的答案？**

**当你发现自己是唯一一个倾听的人，而其他团队成员只是坐在那里甚至可能睡着时，你会如何反应？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-18T04:14:17.983

首先...确保人们站起来...甚至不要靠在墙上或桌子上。

在高层次上，我想说，每当你在团队中遇到问题时，最好的回应是向*团队*寻求解决方案。但是，这里有一些我用于解决您面临的问题的技术。

**话太多**

*   让他/她单腿站立
*   让他/她在他们说话时伸出手握住 Scrum“说话”令牌。
*   将活动挂图添加到 scrum 以列出已提交的问题......当有人对不适合 scrum 会议的主题喋喋不休时，打断并说“嘿 - 好点子。我不确定每个人都需要讨论这个，如果我们把它留作后续讨论怎么样？” 成功的关键是事后进行实际跟进并安排边谈。或者，演讲者可能只是说“没必要......我今天下午会和乔一起工作”或类似的话，这样就可以实现减少啰嗦的目标，而无需安排后续行动。

**需要更多细节**。这是为了 Scrum Master 的利益还是团队的利益？

*   等到之后再问个人更详细的问题。如果您认为团队也需要了解他们，请通过传达（在您的 Scrum 后提问中）指导团队成员“这是我认为 Joe Smith 在收到您的来信时会有所帮助的事情，您认为？”

**团队不听**。

*   逐个询问他们。“Sally，我注意到你似乎并没有从 Scrum 中得到什么。我们怎样才能调整它以使它对你有价值？”。
*   在 Scrum 期间向其他人发布问题。就像如果 Sally 说“我昨天集成了 Bob 的代码”，问 Bob“怎么样？” （我会谨慎使用它......以防止 scrums 耗时过长）。
*   我发现有时团队成员在说话时会看着 Scrum Master 或项目经理，从而养成旧习惯。当这种情况经常发生时，我会改变视线移开视线，这几乎迫使演讲者与团队其他成员进行眼神交流，这可能有助于团队其他成员的注意力。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T10:43:16.293

如果时间管理是你的问题。设置一个计时器，并在您用完时间时让某人嗡嗡作响。确保任务被分解到足够的粒度——任何任务都应该在 4 小时到 2 天之间。最多 3 天。在人们注册之前，任何高于它的东西都会进一步分解。

我认为这三个问题是：

*   你昨天做了什么？
*   你今天打算做什么？
*   你在你的道路上看到了什么障碍？

细粒度任务（迭代后计划）应满足第 1 条和第 2 条。第三条实际上取决于环境条件。计时器应该随着时间的推移下意识地让成员思考他们的问题并构建短句。专注于具体的障碍，而不是解释原因或先决条件等。如果您正在与一个人谈论超过 5 分钟的事情，而这些事情只与你们俩有关.. 停下来，做个笔记（稍后在他们的办公桌上谈一谈）然后继续。

*更新：还要确保每个人都明白在 Scrum 会议之前“排练”会节省每个人的时间。**想想**你想传达什么，而不是仅仅走进站立。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T10:43:37.290

他们应该说他们取得的成就，而不是他们所做的工作，如果他们一无所获，那么是什么阻止了他们取得成就。

提出的问题可以用不同的措辞

1.  自上次会议以来我完成了什么？
2.  在下次会议之前我要完成什么？
3.  什么是我的方式（障碍）？

同样重要的是，会议不是向 Scrum Master 报告的团队，而是团队相互之间的相互检查。如果人们直接对你说话，scrum master 有一些技巧可以转移焦点。确保你不要看演讲者，甚至不要向后移动，这样视线就会改变，他们在谈话时被迫看着队友。虽然做得很微妙:)

编辑：

我抄袭了 [http://www.implementingscrum.com/2007/04/02/work-naked/](http://www.implementingscrum.com/2007/04/02/work-naked/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T11:47:33.597

> **当你发现自己是唯一一个倾听的人，而其他团队成员只是坐在**那里甚至可能睡着时，你会如何反应？

嗯，你真的在​​开站立会议吗？这听起来可能很矫情，但除了让人们更难入睡之外，它还有助于培养一种快速挤在一起而不是悠闲地开会的感觉。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T13:40:19.457

我看到导致改进的一件事是使用“说话棒”（我们实际上使用软球）。它提供了一些额外的关注当前谁在说话，并使向另一个人的过渡更加明显。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T13:46:21.063

> 当你发现自己是唯一一个倾听的人，而其他团队成员只是坐在那里甚至可能睡着时，你会如何反应？

如果我已经听过其他人所说的话，我会问一个不注意这可能会如何影响他们正在做的事情的人的问题。非常喜欢学校老师，但这足以让他们再次回应并参与会议。

我也同意[基夫](https://stackoverflow.com/questions/71036/scrum-non-cooperative-team-members#71485)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-22T20:27:53.727

为了让您的团队参与，他们必须看到其中的价值，而不仅仅是因为您告诉他们这样做。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-18T01:00:29.330

Scrum 是一个站立会议，谈话棒的概念是一个很好的观点。

这里的关键不是你有一个或几个不合作的团队成员，而是 IMO，一个更根本的问题：scrum 团队应该是自我管理的，而 scrum 会议是让**团队**了解情况。如果其他团队成员没有要求澄清并呼吁不合作的成员，那么需要对 scrum 进行再教育。

请记住，Scrum Master 不会被报告给，他/她只是消除流程障碍的人。这确实包括促进 Scrum 会议，但团队确实有责任独立于 Scrum Master 理解和要求澄清。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T10:32:19.643

询问您需要的具体细节。人们不会知道你感兴趣的东西。

还尝试提出一些指导方针，以便在会前更好、更有效地进行演示。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T10:47:40.883

在 Scrum 会议之外与他们交谈，并告诉他们其他人如何看待他们展示他们当前工作的方式。我认为他们不是故意不合作，只是不习惯 Scrum 会议应该有的确切细节水平。

您也可以询问他们在会议期间希望从其他人那里获得多少信息。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T11:44:02.170

你所说的“scrum meeting”是指每天的“stand up”会议吗？如果是这样，我相信这些通常在 15-20 分钟左右。所以把时间平均分配给每个人，一旦有人用完所有的时间，他们就不能说话。这可能很苛刻，但我相信这就是它应该下降的方式。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-18T08:00:45.170

Scrum 是一个自下而上的过程，所以原则上每个团队成员都应该支持这个过程。

团队是如何组成的？是因为组织传统还是因为一个共同的目标？

不是每个人都认同 Scrum 理念，我们应该尊重这一点。也许对所有人来说最好的是这些成员不是 Scrum 团队的一部分？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-18T11:10:56.663

有些人就是不明白需要什么。您可以尝试使用一些关键短语来引导对话。

如果有人提供了太多细节，那么你可以尝试用“还有什么”来切断他们。这将暗示他们已经完成了这一点。或者您可以尝试“好的，我们可以离线讨论”类型的方向。

对于那些不相信它的人，问他们关于他们做了什么以及他们将要做什么的问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-10-11T01:01:23.387

为了争论起见，假设某人确实有一些事情需要告诉团队，这需要一些时间。您是否有合适的地点、时间或方法（电子邮件、其他类型的会议、午餐时间）来执行此操作？只是打断对方，让他们知道站立会议不是这个地方。

另外，这在开发过程中会产生什么问题？如果由于缺乏沟通而出现错误，人们需要面对他们为什么在站立时不提及这些事情。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-06-12T07:02:31.223

*   你可以计划一个最长的平均时间来解释你做了什么以及你将要做什么。
*   关于那些不愿多说的人，我想是 Scrum master 的责任，鼓励人们对他的任务更加清楚一点。
*   如果人们仍然不分享他们正在做的事情，一个激进的解决方案是使用画布板，在那里团队的人必须将他们正在做的任务转移到他各自的区域（在开发中，准备验证，在代码审查中） . 然后，您可以确定他在执行哪个任务。
*   每天开会后记得询问障碍或任何类型的问题，有时人们不记得在他的时间说或不想分享他们的问题。

# perl - Perl 代码有没有好的混淆器？

> ID：71057
> 
> 赞同：4
> 
> 时间：2008-09-16T10:31:50.533
> 
> 标签：perl, obfuscation

有谁知道 Perl 的一个好的代码混淆器？我被要求在将代码发布给客户之前研究混淆代码的选项。我知道混淆代码仍然可以被逆向工程，但这不是我们主要关心的问题。

一些客户正在对我们提供给他们的源代码进行微小的更改，当出现问题并且我们必须修复它时，或者当我们发布的补丁与他们所做的更改不兼容时，这会让我们做噩梦。所以目的只是为了让他们很难对代码进行自己的更改（无论如何他们都不应该这样做）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-16T10:42:23.300

我以前一直走这条路，当您必须处理“混淆”代码时，这绝对是一场噩梦，因为当您（开发人员）无法阅读代码时，尝试在客户端服务器上调试问题会大大增加成本. 您最终会遇到“反混淆器”，将“真实代码”复制到客户端的服务器或许多其他问题中的任何一个，这将成为维护的真正麻烦。

我了解您来自哪里，但听起来管理层有问题，他们希望您实施选定的解决方案，而不是找出正确的解决方案是什么。

在这种情况下，听起来这确实是一个许可或合同问题。让他们将代码开源，但将其作为许可证的一部分，他们提交的任何更改都必须返回给您并获得批准。当您推出补丁时，检查所有代码的 md5 总和，如果它与预期不符，则它们违反了许可证并将相应地收费（而且应该是高得多的费率）。（我记得有一家公司让我们将代码开源，但明确表示如果我们更改任何内容，我们已经以 25,000 美元的价格“购买”了代码，除非我们购买了新许可证）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-16T10:39:50.497

不。只是不要。

将其写入合同（或在必要时修改合同），您不对他们对软件所做的更改负责。如果他们正在修改您的代码，然后期望您修复它，*那么您将遇到无法通过混淆代码来解决的客户端问题*。如果你混淆了它并且他们遇到了实际问题，那么祝他们在错误报告中准确地报告行号等。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-16T10:36:52.610

请不要那样做。如果您不希望人们更改您的 Perl 代码，请将其置于适当的许可下并执行该许可。如果人们在您获得许可时更改您的代码，说他们不应该这样做，那么当您的更新不再适用于他们的安装时，这不是您的问题。

有关详细信息，请参阅[perlfaq3 对“如何隐藏我的 Perl 程序的源代码？”的回答](http://perldoc.perl.org/perlfaq3.html#How-can-I-hide-the-source-for-my-Perl-program%3f)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-16T10:45:44.430

您的主要问题似乎是客户修改代码，这使您难以支持它。我建议您在他们向您寻求支持时询问他们文件的校验和（md5、sha 等），并在修补时同样检查文件的校验和。例如，您可以要求客户端提供所提供程序的输出，该程序通过他们的安装并对所有文件进行校验和。

最终他们拥有了代码，所以他们可以为所欲为。您能做的最好的事情就是强制执行您的许可证并确保您只支持未修改的代码。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T10:46:41.027

在这种情况下，混淆是错误的方法。

当您将代码发布给客户端时，您应该保留您发送给他们的代码的副本（在磁盘上或最好在您的版本控制中作为标签/分支）。

然后，如果您的客户进行了更改，您可以将他们拥有的代码与您发送给他们的代码进行比较，并轻松发现更改。毕竟，如果他们觉得有必要进行更改，则某处存在问题，您应该在主代码库中修复它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-16T11:36:57.677

将程序转换为二进制文件的另一种方法是[CPAN上的免费](http://search.cpan.org)[PAR-Packer](http://search.cpan.org/dist/PAR-Packer/)工具。甚至还有用于代码混淆的过滤器，尽管正如其他人所说，这可能比它的价值更麻烦。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-16T15:57:42.387

我同意前面的建议。

但是，如果您真的想要，您可以查看[PAR](http://search.cpan.org/dist/PAR)和/或[Filter::Crypto](http://search.cpan.org/dist/Filter-Crypto) CPAN 模块。您也可以一起使用它们。

当我们在光学媒体上运送我们的产品时，我使用后者（Filter::Crypto）作为一种非常轻量级的“保护”形式。它不会“保护”您，但会阻止 90% 的人想要修改您的源文件。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-16T11:32:51.137

这不是一个严肃的建议，但是看看[Acme::Buffy](http://search.cpan.org/dist/Acme-Buffy)。

它至少会照亮你的一天！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T11:13:57.983

[混淆的替代方法是使用ActiveState 的 Perl Dev Kit 之](http://www.activestate.com/Products/perl_dev_kit/index.mhtml)类的东西将脚本转换为二进制文件。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T12:34:57.413

正如一些人已经说过的那样：不要。

考虑到 Perl 解释器的性质，这几乎是隐含的，在 Perl 得到它之前，你为混淆 Perl 所做的任何事情都必须是可撤消的，这意味着你需要将去混淆脚本/二进制文件留在解释器所在的位置（因此您的客户）可以找到它:)

解决真正的问题：校验和/或适当措辞的许可证。支持人员受过训练，会说‘你改变了它？我们正在援引我们许可证的第 34b 条，在我们触及它之前，这将是 $X,000 美元......

另外，请阅读[Why-should-i-use-obfuscation](https://stackoverflow.com/questions/31882/why-should-i-use-obfuscation)以获得更一般的答案。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-16T15:17:21.657

我正在运行 Windows 操作系统并使用 IndigoSTAR 的 perl2exe。生成的 .EXE 文件不太可能在现场进行更改。

正如其他人所说，“我如何混淆它”是错误的问题。“我如何阻止客户更改代码”是正确的。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-17T04:25:48.657

校验和和合同的想法有助于防止您描述的“问题”，但如果您的成本是推出升级和错误修复的难度，那么您的客户如何进行未通过**综合测试套件**的更改? 如果他们有能力做出这些改变（或者至少做出表达他们想要代码做什么的改变），为什么不简单地让他们轻松/自动化地打开支持票并上传补丁呢？客户总是对*客户想要的东西*是正确的（他们可能不知道如何“以正确的方式”做到这一点，但这就是他们付钱给你的原因。）

想要混淆器的一个更好的理由是用于大众市场桌面部署，在这种情况下，您不会让每个客户都签订长期合同。在这种情况下，*像*PAR 之类的东西——任何将加密/混淆逻辑打包到编译二进制文件中的东西都是可行的方法。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-17T14:34:16.323

我会邀请他们加入我在他们自己的分支上的 SVN 树，这样他们就可以提供更改，我可以看到他们并将他们的更改集成到我的开发树中。

不要抗拒它，拥抱它。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-20T22:03:29.173

正如 Ovid 所说，这是一个合同性的社会问题。如果他们更改代码，就会使保修失效。向他们收取很多费用来解决这个问题，但同时，给他们一个可以提出更改建议的渠道。另外，看看他们想要改变什么，如果可以的话，把它作为配置的一部分。他们有他们想做的事情，在你满足之前，他们会一直试图绕过你。

在[Mastering Perl](http://oreilly.com/catalog/9780596527242/)中，我谈到了如何打败混淆器。即使您做一些诸如创建无意义的变量名称之类的事情，诸如[B::Deparse](http://search.cpan.org/dist/B-Deparse)和[B::Deobfuscate](http://search.cpan.org/dist/B-Deobfuscate)之类的模块，以及诸如[Perl::Tidy](http://search.cpan.org/dist/Perl-Tidy)之类的 Perl 工具，也可以让知识渊博和积极进取的人轻松获得你的来源。你不必太担心那些不可知和没有动力的事情，因为他们无论如何都不知道如何处理代码。

当我与经理谈论这个时，我们会进行正常的成本效益分析。*您可以*做各种各样的事情，但其中的成本并不低于您获得的收益。

祝你好运，

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-05-15T08:00:04.077

另一个不严肃的建议是使用[Acme::Bleach](https://metacpan.org/pod/Acme%3a%3aBleach)，它会让你的代码非常干净 ;-)

# user-interface - 从 Stingray 目标工具包迁移

> ID：71065
> 
> 赞同：2
> 
> 时间：2008-09-16T10:32:56.443
> 
> 标签：user-interface, mfc, stingray

我们有一系列使用[Stingray Objective Toolkit](http://www.roguewave.com/products/stingray.php)销售的商业 MFC/C++ 应用程序，我们拥有源代码许可证，并在过去使用[Bristol Technologies WindU](http://en.wikipedia.org/wiki/Bristol_Technology_Inc.)（UNIX 上的 Windows API，包括 MFC）。

长话短说最近大约 18 个月前，我们将 Stingray 移植到 Win64，但这是一项长期乏味的任务，在此期间，我对诸如[Ultimate Toolbox](http://www.codeproject.com/KB/MFC/UltimateToolbox.aspx)和[Prof-UIS 之](http://www.prof-uis.com/)类的商业和开源替代 MFC 扩展库进行了一些研究。

*   有没有其他人使用过 Stingray 并转向替代品？
*   如果是这样，你会建议哪一个？
*   此举的主要风险是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T11:23:20.957

是的，我们已经离开了 Stingray。这取决于您使用的 Stingray 组件。对于网格控件，您可以使用来自 www.codeproject.com 的免费 MFC 网格控件或来自[http://www.bcgsoft.com/](http://www.bcgsoft.com/)的商业版。免费的还可以，但开发已经停滞，所以没有现代 UI 渲染等。

“布局编辑器”Stingray 组件可以替换为来自 bcgsoft.com 的组件，但我没有这方面的经验 - 我们自己重写了我们需要的功能（它只是 Stingray 提供的功能的一个子集） .

至于其他 MFC 工具箱，我建议使用 bcgsoft，因为他们的部分工具箱在 Visual Studio Feature Pack 中，因此它是免费的，并且非常适合 VS。我看过 Ultimate Toolbox（远离它，不再更新的陈旧代码）和 Prof-UIs（好的，但我发现它并不容易集成）。

既然 BCG 是“官方”MFC 的一部分，我看不出选择 BCG 以外的其他东西的理由（除了可能的成本，如果您需要免费的替代品，您可以查看 codeproject）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T10:17:55.277

我对黄貂鱼的经验有限。

但是，我想建议尝试 CodeJock 的 Xtreme Toolkit Pro ( [http://www.codejock.com](http://www.codejock.com) )。它的图形用户界面非常好，并且得到很好的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T08:49:47.843

在过去八年左右的时间里，我一直在使用 Stingray，并且已经考虑过几次放弃它。到目前为止，我已经决定反对，主要是因为我已经将一个版本移植到 Windows CE 和 Mobile，并且在这个平台上没有看到太多提供相同解决方案的其他版本。虽然 Stingray 并不完美，但他们现在有了 64 位版本，而且它是一个相当稳定的产品。

我正在做的是用替代品替换 Stingray 非常薄弱的​​领域，例如 XML 支持。在这种情况下，出于性能原因， 我选择了[Expat 。](http://expat.sourceforge.net/)

搬家的危害？您可以从稳定但老式的东西变成漂亮但易碎的东西；）在我的情况下，我还会杀死相当多在 GUI 级别工作的自动化测试脚本。

**Edit:** Just to add a bit to the above, I moved from VS2003 to VS2008 this week and at the same time Objective Studio 2006 v2 to Objective Studio 10.1\. The transition was pretty seamless, with one minor glitch that was promptly handled by RogueWave tech support. Even this would have gone unnoticed if we didn't have a very extensive GUI regression test suite. IMO, Stingray is a very mature, well supported, feature rich and most importantly stable product. I for won't be moving of it any time soon without very good reason.

# maven - Maven 可以不那么冗长吗？

> ID：71069
> 
> 赞同：129
> 
> 时间：2008-09-16T10:34:05.223
> 
> 标签：maven, output, verbosity

Maven 根据我的喜好喷出了太多的输出行（我喜欢 Unix 的方式：没有消息就是好消息）。

我想摆脱所有`[INFO]`行，但我找不到任何关于控制 Maven 详细程度的参数或配置设置的提及。

是否没有类似 LOG4J 的方式来设置日志级别？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2008-09-16T10:37:40.910

你可以试试[`-q`开关](http://maven.apache.org/ref/current/maven-embedder/cli.html)。

> `-q`,`--quiet`安静的输出 - 只显示错误

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-11-10T18:58:18.963

`-q`如上所述是你所需要的。一种替代方法可能是：

> `-B`,`--batch-mode` 在非交互（批处理）模式下运行 如果需要在非交互、持续集成环境中运行 Maven，批处理模式是必不可少的。在非交互模式下运行时，Maven 将永远不会停止接受用户的输入。相反，它会在需要输入时使用合理的默认值。

并且还将或多或少地减少输出消息的本质。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2019-05-13T18:43:22.133

> 我的问题是 -q 太安静了。我在 CI 下运行 maven

使用[Maven 3.6.1（2019 年 4 月）](https://maven.apache.org/docs/3.6.1/release-notes.html)，您现在可以**选择在交互模式下下载/上传时抑制传输进度**。

```
mvn --no-transfer-progress .... 
```

> 或简而言之：

```
mvn -ntp ... .... 
```

这就是[Ray在](https://stackoverflow.com/users/279640/ray)[MNG-6605](https://issues.apache.org/jira/browse/MNG-6605)和[PR 239](https://github.com/apache/maven/pull/239)[的评论](https://stackoverflow.com/questions/71069/can-maven-be-made-less-verbose/40535065#comment97499320_71086)中提出的。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-07-27T08:16:48.710

官方链接： [https ://maven.apache.org/maven-logging.html](https://maven.apache.org/maven-logging.html)

您可以添加**JVM**参数：

```
-Dorg.slf4j.simpleLogger.defaultLogLevel=WARN 
```

小心大写。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-16T10:38:31.890

使用 -q 或 --quiet 命令行选项

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-26T12:57:04.960

如果您只想摆脱`[INFO]`消息，您也可以这样做：

```
mvn ... | fgrep -v "[INFO]" 
```

要抑制**所有**输出（错误除外），您可以重定向`stdout`到`/dev/null`：

```
mvn ... 1>/dev/null 
```

（这仅在您使用`bash`（或类似的 shell）运行 Maven 命令时才有效。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-06T18:25:00.147

[Maven 3.1.x 使用 SLF4j 进行日志记录，您可以在https://maven.apache.org/maven-logging.html](https://maven.apache.org/maven-logging.html)找到如何配置它的说明

简而言之：要么修改，要么通过环境变量`${MAVEN_HOME}/conf/logging/simplelogger.properties`设置相同的属性。`MAVEN_OPTS`

例如：setting `MAVEN_OPTS`to`-Dorg.slf4j.simpleLogger.log.org.apache.maven.cl‌​i.transfer.Slf4jMave‌​nTransferListener=wa‌​rn`配置批处理模式传输监听器的日志记录，并`-Dorg.slf4j.simpleLogger.defaultLogLevel=warn`设置默认的日志级别。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-03T04:06:09.893

现有答案可帮助您使用`--quiet`. 我发现许多 INFO 消息对调试很有用，但是像下面这样的下载工件日志消息很吵而且没有帮助。

```
Downloading: http://nexus:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-compiler-plugin/maven-metadata.xml 
```

我找到了这个解决方案：

[https://blogs.itemis.com/en/in-a-nutshell-removing-artifact-messages-from-maven-log-output](https://blogs.itemis.com/en/in-a-nutshell-removing-artifact-messages-from-maven-log-output)

```
mvn clean install -B -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn 
```

# css - 如何删除 Firefox 在 BUTTONS 和链接上的虚线轮廓？

> ID：71074
> 
> 赞同：521
> 
> 时间：2008-09-16T10:35:13.410
> 
> 标签：css, firefox

我可以使 Firefox 不在**链接**上显示丑陋的虚线焦点轮廓：

```
a:focus { 
    outline: none; 
} 
```

但是我怎样才能为`<button>`标签做到这一点呢？当我这样做时：

```
button:focus { 
    outline: none; 
} 
```

当我单击它们时，这些按钮仍然具有虚线焦点轮廓。

（是的，我知道这是一个可用性问题，但我想提供我自己的适合设计的焦点提示，而不是丑陋的灰点）

* * *

## 回答 #1

> 赞同：813
> 
> 时间：2008-10-13T22:46:06.417

```
button::-moz-focus-inner {
  border: 0;
} 
```

* * *

## 回答 #2

> 赞同：326
> 
> 时间：2010-10-02T05:01:35.350

无需定义选择器。

```
:focus {outline:none;}
::-moz-focus-inner {border:0;} 
```

但是，这违反了 W3C 的可访问性最佳实践。大纲可以帮助那些使用键盘导航的人。

[https://www.w3.org/TR/WCAG20-TECHS/F78.html#F78-examples](https://www.w3.org/TR/WCAG20-TECHS/F78.html#F78-examples)

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2009-10-25T23:00:13.397

如果您更喜欢使用 CSS 来摆脱虚线轮廓：

```
/*for FireFox*/
    input[type="submit"]::-moz-focus-inner, input[type="button"]::-moz-focus-inner
    {   
        border : 0;
    } 
/*for IE8 and below */
    input[type="submit"]:focus, input[type="button"]:focus
    {     
        outline : none; 
    } 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2011-10-02T18:22:18.693

在 LINKS 的情况下，以下内容对我有用，考虑分享 - 以防有人感兴趣。

```
a, a:visited, a:focus, a:active, a:hover{
    outline:0 none !important;
} 
```

干杯!

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2010-06-27T23:11:36.207

```
:focus, :active {
    outline: 0;
    border: 0;
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-09-24T22:17:13.137

[更新] 此解决方案不再有效。对我有用的解决方案是这个[https://stackoverflow.com/a/3844452/925560](https://stackoverflow.com/a/3844452/925560)

**标记为正确的答案不适用于 Firefox 24.0。**

为了删除 Firefox 在按钮和锚标签上的虚线轮廓，我添加了以下代码：

```
a:focus, a:active, 
button::-moz-focus-inner,
input[type="reset"]::-moz-focus-inner,
input[type="button"]::-moz-focus-inner,
input[type="submit"]::-moz-focus-inner,
select::-moz-focus-inner,
input[type="file"] > input[type="button"]::-moz-focus-inner {
    border: 0;
    outline : 0;
} 
```

我在这里找到了解决方案：http: [//aghoshb.com/articles/css-how-to-remove-firefoxs-dotted-outline-on-buttons-and-anchor-tags.html](http://aghoshb.com/articles/css-how-to-remove-firefoxs-dotted-outline-on-buttons-and-anchor-tags.html)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-07-16T21:54:28.000

在这里尝试了大多数答案，但没有一个对我有用。当我意识到我也必须摆脱 Chrome 上按钮上的蓝色轮廓时，我找到了另一个解决方案。[从 Chrome 中的 css 自定义样式按钮中删除蓝色边框](https://stackoverflow.com/questions/20340138/remove-blue-border-from-css-custom-styled-button-in-chrome)

这段代码在 Windows 7 上的 Firefox 版本 30 上为我工作。也许它可以帮助其他人:)

```
button:focus {outline:0 !important;} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-11-09T06:19:31.740

这将获得范围控制：

```
:focus {
    outline:none;
}
::-moz-focus-inner {
    border:0;
}
input[type=range]::-moz-focus-outer {
    border: 0;
} 
```

来自：[从 Firefox 中的范围输入元素中删除虚线轮廓](https://stackoverflow.com/questions/18794026/remove-dotted-outline-from-range-input-element-in-firefox)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-09-16T11:06:36.020

无法使用 CSS 在 Firefox 中移除这些点状焦点。

如果您可以访问您的 Web 应用程序所在的计算机，请转到 Firefox 中的 about:config 并设置`browser.display.focus_ring_width`为 0。然后 Firefox 将根本不会显示任何虚线边框。

以下错误解释了该主题：[https ://bugzilla.mozilla.org/show_bug.cgi?id=74225](https://bugzilla.mozilla.org/show_bug.cgi?id=74225)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-03-25T05:19:14.003

在网上找到了许多解决方案，其中许多都有效，但要强制这样做，因此一旦使用以下内容，绝对没有任何东西可以突出/聚焦：

```
::-moz-focus-inner, :active, :focus {
    outline:none;
    border:0;
    -moz-outline-style: none;
} 
```

这只是增加了一点额外的安全性并完成了交易！

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-04-27T17:57:39.187

使用此代码在 Firefox 46 和 Chrome 49 上进行了测试。

```
input:focus, textarea:focus, button:focus {
    outline: none !important;
} 
```

**之前**（白点可见）

[![带白点的输入](https://i.stack.imgur.com/1hP1m.png)](https://i.stack.imgur.com/1hP1m.png)

**之后**（白点不可见） [![在此处输入图像描述](https://i.stack.imgur.com/62tZV.png)](https://i.stack.imgur.com/62tZV.png)

如果您只想应用于少数输入字段、按钮等。请使用更具体的代码。

```
input[type=text] {
  outline: none !important;
} 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2017-01-13T09:42:22.817

只需为选择框添加此 css

```
select:-moz-focusring {
    color: transparent;
    text-shadow: 0 0 0 #000;
} 
```

这对我来说很好。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2009-07-08T01:04:55.223

我认为您应该通过删除焦点轮廓来真正知道自己在做什么，因为它可能会弄乱键盘导航和可访问性。

如果您因为设计问题需要将其取出，`:focus`请向按钮添加一个状态，用其他一些视觉提示替换它，例如将边框更改为更亮的颜色或类似的东西。

有时我觉得有必要去掉那个烦人的轮廓，但我总是准备一个备用的焦点视觉提示。

并且**永远不要**使用`blur()`js 功能。使用`::-moz-focus-inner`伪类。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-08-08T13:23:47.560

在大多数情况下，如果不添加**`!important`**CSS 代码，它将无法正常工作。

## 所以，不要忘记添加`!important`

```
a, a:active, a:focus{
    outline: none !important; /* Works in Firefox, Chrome, IE8 and above */
} 
```

或任何其他代码：

```
button::-moz-focus-inner {
  border: 0 !important;
} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-05-13T11:12:03.823

您可能想要加强焦点而不是摆脱它。

```
button::-moz-focus-inner {border: 2px solid transparent;}

button:focus::-moz-focus-inner {border-color: blue} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-11-17T17:31:19.230

```
button::-moz-focus-inner { border: 0; } 
```

哪里`button`可以是您想要禁用该行为的任何 CSS 选择器。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2011-07-09T13:38:31.520

如果您在按钮上有边框并且想要在 Firefox 中隐藏虚线轮廓*而不*删除边框（因此它是按钮上的额外宽度），您可以使用：

```
.button::-moz-focus-inner {
    border-color: transparent;
} 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-12-22T16:14:42.130

从链接、按钮和输入元素中删除虚线轮廓。

```
a:focus, a:active,
button::-moz-focus-inner,
input[type="reset"]::-moz-focus-inner,
input[type="button"]::-moz-focus-inner,
input[type="submit"]::-moz-focus-inner {
    border: 0;
    outline : 0;
} 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-08-04T11:38:07.143

下面的 CSS 代码可以消除这种情况：

```
a:focus, a:active, 
button::-moz-focus-inner,
input[type="reset"]::-moz-focus-inner,
input[type="button"]::-moz-focus-inner,
input[type="submit"]::-moz-focus-inner,
select::-moz-focus-inner,
input[type="file"] > input[type="button"]::-moz-focus-inner {
    border: 0;
    outline : 0;
} 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-09-16T11:08:03.270

看起来实现这一点的唯一方法是设置

```
browser.display.focus_ring_width = 0 
```

在 about:config 每个浏览器的基础上。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-12-30T04:47:16.373

这适用于 Firefox v-27.0

```
 .buttonClassName:focus {
  outline:none;
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-05-27T11:15:44.933

在尝试了上面的许多选项之后，只有以下对我有用。

```
*:focus, *:visited, *:active, *:hover  { outline:0 !important;}
*::-moz-focus-inner {border:0;} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-06-09T05:24:30.833

与 Bootstrap 3 一起，我使用了这段代码。第二组规则只是*撤消*引导程序对焦点/活动按钮所做的操作：

```
button::-moz-focus-inner {
  border: 0;    /*removes dotted lines around buttons*/
}

.btn.active.focus, .btn.active:focus, .btn.focus, .btn.focus:active, .btn:active:focus, .btn:focus{
  outline:0;
} 
```

**请注意，您的自定义 css 文件应位于您的 html 代码中的 Bootstrap css 文件之后以覆盖它。**

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-03-30T17:36:13.957

是的，不要错过**！重要**

```
button::-moz-focus-inner {
 border: 0 !important;
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2010-01-07T16:19:02.377

`button::-moz-focus-inner {border: 0px solid transparent;}`您可以在您的 CSS中尝试。

# c# - C#中是否有任何压缩和加密库？

> ID：71077
> 
> 赞同：3
> 
> 时间：2008-09-16T10:36:31.100
> 
> 标签：c#, encryption, compression

我想压缩一些文件（成[ZIP](http://en.wikipedia.org/wiki/ZIP_%28file_format%29)格式）并尽可能使用 C# 加密它们。有没有办法做到这一点？

加密可以作为压缩本身的一部分进行吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-16T10:40:07.703

对于压缩，查看[`System.IO.Compression`](http://msdn.microsoft.com/en-us/library/system.io.compression.aspx)命名空间，对于加密，查看[`System.Security.Cryptography`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T10:50:12.407

对于 Zip 压缩，你看过[http://www.icsharpcode.net/OpenSource/SharpZipLib/](http://www.icsharpcode.net/OpenSource/SharpZipLib/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-23T19:53:15.950

我知道这个问题已经很老了，但我必须加上我的两分钱。

首先，一些定义：

*   **Zip**：用于将文件和文件夹重新组合为单个文件的存档格式，并可选择加密数据。
*   **Deflate**：Zip 文件中用于压缩数据的压缩算法之一。最受欢迎的一种。
*   **GZip**：使用 deflate 压缩的单个文件，具有较小的页眉和页脚。

现在，System.IO.Compression 不**进行**Zip 归档。它确实进行了**deflate**和**gzip**压缩，因此会将单个数据块压缩成另一个数据块。

因此，如果您正在寻找可以对许多文件和文件夹进行分组的存档格式，您需要 Zip 库，例如：

*   [Xceed Zip](http://xceed.com)（它确实支持强加密）
*   [SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/)

如果您只需要压缩和加密单个数据块，请查看[System.IO.Compression](http://msdn.microsoft.com/en-us/library/system.io.compression.aspx)和[System.Security.Cryptography](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T10:40:38.437

[GZipStream](http://blogs.msdn.com/bclteam/archive/2005/06/15/429542.aspx)类是处理压缩的本机方式。

至于加密，有[很多](http://www.codeproject.com/KB/security/SimpleEncryption.aspx) [方法](http://www.codeproject.com/KB/security/encryption_decryption.aspx)可以做到，其中大部分在 System.Security 命名空间中。它们可以链接完成（加密压缩流或压缩加密流）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T12:47:52.267

[Chilkat](http://www.chilkatsoft.com/)提供用于压缩和加密的 .NET 库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T10:41:37.140

我不确定这些步骤是否可以组合，但.NET 对基本加密有很好的支持。这是[一篇关于它](http://www.ondotnet.com/pub/a/dotnet/2003/02/10/dotnetcryto.html)的文章。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T11:13:38.997

如果不能合并，先压缩再加密。压缩已经加密的文件会导致压缩率变差，因为很多冗余被删除了。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-16T10:40:31.590

这是一个有用的话题：

[帮助从 .Net 创建 Zip 文件并从 Java 读取它们](https://stackoverflow.com/questions/71000/help-in-creating-zip-files-from-net-and-reading-them-from-java)

System.IO.Packaging 命名空间为您提供有用的类来压缩 zip 格式的数据并[支持](http://msdn.microsoft.com/en-us/library/ms580548.aspx)权限管理。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-16T10:40:50.323

没有任何东西可以直接在 C# 中使用，但是您可以使用 J# 中的一些库来为您完成：

[http://msdn.microsoft.com/en-us/magazine/cc164129.aspx](http://msdn.microsoft.com/en-us/magazine/cc164129.aspx)

应该做你想做的事吗？

关于加密，请查看以下链接：

[http://www.codeproject.com/KB/security/fileencryptdecrypt.aspx](http://www.codeproject.com/KB/security/fileencryptdecrypt.aspx)

[http://www.obviex.com/samples/EncryptionWithSalt.aspx](http://www.obviex.com/samples/EncryptionWithSalt.aspx)

# php - 从 PHP 访问数据库的最佳方法是什么？

> ID：71088
> 
> 赞同：8
> 
> 时间：2008-09-16T10:38:02.873
> 
> 标签：php, mysql, database, pear

从 PHP 访问 MySQL 数据库时，似乎有几种方法：

```
Sprinkle the code with raw SQL-statements
Use the VO-pattern from Java (e.g. DB_DataObjects from PEAR)
DIY and write a script that auto-generates one PHP class per database 
```

除此之外，我还阅读过`LINQ in .NET`但没有看到它在`PHP.`

还有哪些其他模式中实现？

如果您今天从头开始构建网站，您会选择哪一个？

澄清：这与 DB 抽象层（PDO、MDB2）无关。这里讨论的模式是基于 PDO 或 MDB2 构建的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T14:10:47.107

您正在寻找的是对象关系模型 (ORM)。有几个不同的：

*   [推进](http://propel.phpdb.org/)
*   [教义](http://www.doctrine-project.org/)

如果 ORM 对您的项目来说太多了，那么您只需退回到像 PDO 这样的通用数据库接口并手动构建准备好的语句。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T10:49:40.350

我会从 PEAR 中选择[MDB2 数据库抽象层](http://pear.php.net/package/MDB2)——它提供了一种很好的抽象方法来处理数据库。我推荐它，因为它允许您编写可移植的代码，无需太多更改即可移植到不同的数据库服务器（对于基本脚本，只需更改连接调用可能就足够了）。它是旧 DB 和 Metabase 抽象层的合并（错误修复仍然支持 DB，但已被 MDB2 取代）。

它为不正确支持它的数据库提供了准备 + 执行模拟等功能，并允许您使用占位符，这是避免 SQL 注入问题的好习惯。

它将适用于：mysql / mysqli、pgsql (PostgreSQL)、oci8 (Oracle)、sqllite、msql、mssql (Microsoft SQL Server)、sybase、informix、fbsql、ibase、odbc。

查看[MDB2 文档](http://pear.php.net/manual/en/package.database.mdb2.php)以了解它是如何工作的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T10:43:19.070

> 还有哪些其他模式？

[ActiveRecord——你可以在CakePHP](http://cakephp.org/)中看到一个例子。

我认为这在很大程度上取决于您的需求——如果您正在构建一个小型应用程序，那么构建一个 DIY 数据库层可能会更快。

如果您正在构建一个包含大量表和关系的大型应用程序，那么使用像 CakePHP 的 ActiveRecord 功能之类的东西可能会更快更容易。

我还没有使用 PEAR 的抽象层，但它看起来也不错。[Zend 在Zend 框架](http://framework.zend.com/)中也有一个数据库库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T20:48:42.250

这绝对取决于您正在编写的网络应用程序有多大。我会为[Doctrine](http://www.phpdoctrine.org/)竖起大拇指（如果使用得当）。如果这是一个非常小的快速-n-dirty 项目，您可能只需使用[PDO](http://ww.php.net/pdo)就可以了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T10:41:52.910

“这取决于”

对于我自己的项目，我倾向于使用某种框架，其中包括一个抽象层。对于不适合框架的小型项目，我只是将 SQL 放在脚本中（因为它很小）。上次我在没有框架的情况下做一个相当大的应用程序时，我使用了 PDO，因为它提供了易于准备的语句支持等。它是一个非常容易学习的抽象层。如果出于某种原因我选择不使用框架，我可能会再次使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T10:47:21.557

> 除此之外，我还阅读了 .NET 中的 LINQ，但还没有看到它在 PHP 中实现。

像 Linq 这样的东西还不能在 PHP 中实现，因为该语言缺乏必要的结构。[已经创建了](http://www.codeplex.com/PHPLinq)一种“假 linq” ，但这只是使用字符串而不是“真正的”linq。即使是这样，它实际上也只是 Linq to objects 的等价物，没有任何东西像 Linq to SQL 一样。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T13:50:22.007

如果你想要一种面向对象的方法，这就是我最近的方法。

我把事情分成两个类，

首先，DatabaseTable 类 - 接受一个表名，一个作为该表键的字符串。其次，我创建了一个代表 DatabaseTable 中一行的 DatabaseObject 类。DatabaseObject 有两个例程 setFromRow 和 getAsRow。SetFromRow 将从 col=>value 对的关联数组中设置对象，并且 get as row 本质上会将对象序列化为 col=>value 对。

当在表上调用 select 方法时，DatabaseTable 使用 setFromRow 来制造 DatabaseObjects。相反，当它被告知更新或插入数据到其表中时，DatabsaeTable 将使用 getAsRow 序列化 DatabaseObject。

通常发生的事情是从 DatabaseObject 继承他们自己的特定对象，定义 setFromRow 和 getAsRow，并且 DatabaseTable 被告知要实例化的 DatabaseObject 的名称。

所以你最终写的代码是这样的

```
$dbTable = new DatabaseTable('tableName', 'uniqueid', 'InstanceType')
// dbTable manufactures an InstanceType for our use based on the select below
$dbRow = $dbTable->selectUsingId(15); 
print_r($dbRow);  // Dumps the InstanceTypeObject 
```

这将我的应用程序中的数据表示（DatabaseObject）与数据库表（DatabaseTable）的管理分开。所以我的 DatabaseObject 在 C++ 术语中可以是普通的旧数据。

当然，您可以像我一样走得更远，通过创建表之间的关系，创建更多的选择方式等。

我应该补充一点，将本质上是一种过程语言（SQL）的东西与面向对象的东西结合起来并不容易，所以我知道我的方法有其缺点，你可能会得到很多不同的答案，每个答案都有自己的缺点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T17:27:45.963

您可能还想考虑使用[CodeIgniter](http://codeigniter.com/)，这是一个不错的 PHP 小型 MVC 框架。它有一个 ActiveRecord 实现和一组合理的数据库对象（包括绑定变量）。我发现它的 DB 类比默认的 PHP MySQL API 好得多，并且比 PDO 简单一点（当然更容易安装）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T10:41:59.243

至少，使用 PDO。它为大多数数据库平台提供了一个通用接口，如果您愿意，可以更轻松地切换数据库解决方案。

我喜欢使用对象关系映射器（ORM），比如推进： http: [//propel.phpdb.org/trac/](http://propel.phpdb.org/trac/)

这会将您的对象直接映射到数据库模式 - 不需要 SQL。映射发生在 XML 文件中，查询发生在 Criteria 对象中。可以从数据库对 PHP 类进行逆向工程，或者从模式 xml 生成数据库。

有关 ORM 的更多信息，请参阅[http://en.wikipedia.org/wiki/Object-relational_mapping](http://en.wikipedia.org/wiki/Object-relational_mapping)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T10:45:19.800

使用 MVC 结构和数据库抽象层。通过这种方式，您可以在一个地方完全修改数据访问类的内部结构，同时保持公共接口不变。

整个代码中的原始 SQL 几乎无法扩展。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T10:54:24.473

为了执行命令，我会使用函数来执行常用的 SQL 命令。然后可以使用这些函数来制作更具体的东西，例如 get_users()

a）为您可能想要进行的每个查询创建一个函数，例如

```
db_select($opts) 
```

其中 $opts 是一个带有键的哈希数组：

```
['table_name', 'selection', 'condition', 'group_by', 'order_by', 'limit'] 
```

b) 如果你大量使用 SQL，我可能会想创建一个 SQL 命令生成器，它接受一个哈希数组并返回一个命令。就像是：

```
db_builder(array('select'=>array('customers','from'=>'bar','where'=>'foo=10'))) 
```

上面提到的函数将在它们的实现中使用它，如果你需要一个完全随机的语句，你也会如此，并且希望通过在任何地方重用命令构建器代码，整个事情都会坚如磐石。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T11:12:13.540

我做了一个两级手工编码的方法：

第一级是一组简单的函数：

*   do_query(sql)：返回（打开的）结果对象。
*   get_record(sql)：返回第一条记录，查询关闭。
*   get_datum(sql)：返回第一条记录的第一个字段（查询关闭）

之后，我编写了我的模型层，其中包含所有数据操作的特定功能。通常是一个文件，其中包含每个概念对象的部分。参数与抽象数据相关联，而不是与 SQL 结构相关联。所有的 SQL 都在这一层。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T18:53:19.097

任何方式都是好的，只要您在数据库架构更改（输入、过滤、验证、表单生成等）时需要更改代码的点最小化。

我喜欢使用**PDO**、**参数化 SQL**和抽象返回的数据集的**类**`::getActiveUsers()`（等`::getUserPersonalData()`）保持简单。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-08-31T07:41:46.997

你可以使用像 Doctrine 这样的 ORM。

# asp.net - UserControl、WebControl、RenderedControl 和 CompositeControl 有什么区别？

> ID：71092
> 
> 赞同：50
> 
> 时间：2008-09-16T10:38:45.477
> 
> 标签：asp.net

有什么区别，官方术语是什么，在 ASP.NET 3.5 中是否有过时的术语？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-09-16T10:56:15.683

**UserControl**：一个自定义控件，以 .ascx 结尾，由其他 Web 控件组成。它几乎就像一个小版本的 aspx 网页。它由 UI（ascx）和代码隐藏组成。不能通过引用 DLL 在其他项目中重用。

**WebControl**：托管在网页或 UserControl 中的控件。它由一个或多个类组成，协同工作，并托管在 aspx 页面或 UserControl 中。WebControl 没有 UI“页面”，必须直接呈现其内容。通过引用它们的 DLL，它们可以在其他应用程序中重用。

**RenderedControl**：不存在。可能是 WebControl 的同义词。可能表明控件直接写入 HttpResponse 而不是呈现到 aspx 页面。

**[CompositeControl](http://msdn.microsoft.com/en-us/library/aa479016.aspx)**：介于 UserControls 和 WebControls 之间。它们像 UserControls 一样编码，因为它们是由其他控件组成的。没有用于控件合成的任何图形 UI，并且对 CompositeControls 的 UI 编辑的支持必须由控件设计器编写。合成是在代码隐藏中完成的。CompositeControls 可以在 WebControls 等其他项目中重用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T11:02:59.490

您忘记了 ServerControl。

在我的理解中是这样的：

*   只有两种不同类型的控件：UserControl 和 ServerControl
*   CompositeControls 是一种“高级”用户控件。[在Scott Guthries 博客](http://weblogs.asp.net/scottgu/archive/2006/01/29/436854.aspx)上查找更多信息。
*   都是WebControls（因为都是从System.Web.UI.Control派生的）
*   它们都以任何方式呈现，因此我希望将它们全部视为呈现控件。

来自 MSDN：

> **用户控制**
> 
> 在 ASP.NET 中：使用与 ASP.NET 页相同的语法以声明方式编写的服务器控件，并保存为扩展名为 .ascx 的文本文件。用户控件允许对页面功能进行分区和重用。在第一次请求时，页面框架将用户控件解析为派生自 System.Web.UI.UserControl 的类，并将该类编译为程序集，在后续请求中重用该程序集。用户控件易于开发，因为它们无需事先编译即可进行页面样式创作和部署。
> 
> **服务器控制**
> 
> 封装用户界面和相关功能的服务器端组件。ASP.NET 服务器控件直接或间接派生自 System.Web.UI.Control 类。ASP.NET 服务器控件的超集包括 Web 服务器控件、HTML 服务器控件和 ASP.NET 移动控件。ASP.NET 服务器控件的页面语法包括控件标记上的 runat="server" 属性。另请参阅：HTML 服务器控件、验证服务器控件、Web 服务器控件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-02-14T18:05:13.880

与 Web 窗体一样，用户控件可以在可视化设计器中创建，也可以使用与 HTML 分开的代码编写。它们还可以支持执行事件。但是，由于 Web 用户控件是在运行时动态编译的，因此它们无法添加到工具箱中，并且在添加到页面时它们由简单的占位符表示。

如果您习惯于完整的 Visual Studio .NET 设计时支持，包括属性窗口和设计视图预览，这会使 Web 用户控件更难使用。此外，在应用程序之间共享用户控件的唯一方法是在每个应用程序中放置一个单独的副本，如果您对控件进行更改，这需要更多的维护。

Web 自定义控件是编译后的代码，这使得它们更易于使用但更难于创建。Web 自定义控件必须用代码编写。创建控件后，您可以将其添加到工具箱中，并在具有完整属性窗口支持和 ASP.NET 服务器控件的所有其他设计时功能的可视化设计器中显示它。此外，您可以在全局程序集缓存中安装 Web 自定义控件的单个副本，并在应用程序之间共享它，这使维护更加容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-11-15T21:34:43.337

与 Will 的回应相反，可以通过[引用 Web 部署项目](http://readcommit.blogspot.com/2008/01/share-aspnet-user-controls-between.html)在其他项目中重用 UserControl 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-09T19:01:30.660

由于我还没有足够的声誉发表评论，因此我将其添加为答案，但它指的是上面威尔的答案。

从您包含的[链接](http://msdn.microsoft.com/en-us/library/aa479016.aspx)中：

> 复合控件是构建复杂组件的正确工具，其中多个子控件被聚合并在它们之间以及与外部世界交互。渲染控件非常适合控件的只读聚合，其中输出不包含交互式元素，例如下拉或文本框。

我相信文档是指通过将 Render 方法覆盖为 Rendered Controls 而创建的 UserControls。因此，它不是问题所暗示的单独类型，而是实现 UserControl 的一种方式；一种模式。

# accessibility - 测试网站可访问性的工具

> ID：71100
> 
> 赞同：0
> 
> 时间：2008-09-16T10:40:25.910
> 
> 标签：accessibility

您能否推荐一种工具来测试以 MS Share Point 和 .Net 2.0 作为基础平台的网站的可访问性和第 508/ADA 节的合规性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T10:49:18.463

根据我的经验，测试 Sharepoint 的可访问性是不值得的。即使您已将 Accessibility Toolkit for Sharepoint (AKS) 与 Sharepoint 2007 一起使用，最终结果也远无法访问。

问题在于，可访问性不是，而且在 MS 制作 Sharepoint 时仍然不是一个重要的考虑因素。一切都取决于表格布局，屏幕阅读器将面临一场噩梦。

有一些在线工具 - 有些会帮助验证您的输出，有些会假装测试您的可访问性（[TAW](http://www.tawdis.net)）。

问题是 WCAG 下的许多指南过于武断，并且永远无法通过自动化工具进行测试。这可能会随着 WCAG 2 而改变。

无论如何，希望您尽最大努力使 Sharepoint 易于访问。

**编辑：**另一方面，我可以向任何对无障碍开发感兴趣的人强烈推荐以下工具/资源：

*   Chris Pederick 的[Web 可访问性工具栏](http://chrispederick.com/work/web-developer/)
*   [NDA 的 Web 可访问性 IT 指南](http://www.accessit.nda.ie/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:54:21.780

这是当前可用的网络辅助工具列表： 1\. [Worldspace](http://www.deque.com/worldspace%E2%84%A2-first-software-product-to-fully-support-new-wcag-2-0-standard)（价格因页数而异）：虽然此工具不是免费的，但它是目前最全面的网络辅助工具。它是高度可定制的，可以检查 AJAX 应用程序和 WCAG 2.0，以及加拿大通用外观、英国 DDA 和日本工业标准

2.  [Firefox 可访问性扩展](https://addons.mozilla.org/en-US/firefox/addon/accessibility-evaluation-toolb/)（免费）：Firefox 可访问性扩展将一系列可访问性工具集中在一个扩展中。它以其通过 Web 2.0 应用程序验证动态内容的能力而著称。除了与其他无障碍工具集成外，它还支持无障碍富 Internet 应用程序 (ARIA) 标准，并包括用于创建无障碍脚本的工具

3.  [WebAnywhere](http://webinsight.cs.washington.edu/wa/content.php)（免费）：在检查 Web 可访问性时，自动化工具是远远不够的。WebAnywhere 是一个 Web 应用程序，它模拟典型的屏幕阅读程序（如 Window-eyes 或 Jaws）如何与网页交互。它具有屏幕阅读器用户用来浏览网站的一些相同命令，因此作为网页设计师，您可以像屏幕阅读器用户一样体验您的网站。

4.  [Web Accessibility Inspector](http://www.fujitsu.com/global/accessibility/assistance/wi/)（免费）：这是一个基于 WCAG 1.0 检查可访问性的桌面应用程序。虽然不如 Firefox Accessibility Extension 最新，但该工具更易于使用，因为它提供了指出存在可访问性问题的视觉提示。

5.  [EvalAccess](http://sipt07.si.ehu.es/evalaccess2/)（免费）：此工具由西班牙巴斯克地区大学开发，是仅有的免费工具之一，可让您评估整个网站是否符合 WCAG 1.0 版。结果显示在易于阅读的报告中。该工具为您提供了检测到的每个错误的简要说明，以及可以在其中找到错误的源代码中的行号。它不是最用户友好的访问工具，但它足以帮助大多数设计师和开发人员清理他们的网站。

6.  [Vischeck](http://www.vischeck.com/vischeck/)（免费）：Vischeck 是一个视觉模拟器，它可以模拟网页对于具有三种色盲类型中的任何一种的人的外观。全世界有数百万色盲者发现很难区分某些颜色。Vischeck 是一种快速判断您的图像、导航按钮或颜色选择是否会让这些人感到困惑的方法。您可以上传图片或让 Vischeck 分析特定网页。

7.  [Juicy Studio](http://juicystudio.com/services.php)（免费）：由 Jez Lemon 在英国创建的 Juicy Studio 有几个专门的辅助工具。其中最主要的是颜色对比度分析器 Firefox 扩展，它可以分析文档中文本节点的前景色和背景色的对比度。这可以帮助您找到对比度低的区域，这些区域可能会使色盲人士和视力障碍人士难以阅读您的网站。Juicy Studio 还包括表格分析器、可读性分析器等。

8.  [媒体访问生成器](http://ncam.wgbh.org/invent_build/web_multimedia/tools-guidelines/magpie)（免费）：媒体访问生成器 MAGpie 是一种为各种视频格式创建字幕和音频描述的工具。随着 Flash 现在或多或少在网络上变得普遍，聋人和盲人能够从 Flash 视频和网站中获得最大收益比以往任何时候都更加重要。字幕不仅有助于将视频的音轨翻译成其他语言，还可以让失聪或听力障碍的人接收到与音轨上听到的内容相同的内容。音频描述允许盲人通过覆盖描述动作的音轨来跟随视频的动作。MAGpie 可以为主要视频格式创建音频描述和字幕文件，包括：Windows Media Player、Real Player、Quicktime 和 Flash。

9.  [WAVE](http://wave.webaim.org/)（免费）：Web 可访问性评估工具 WAVE 是一个简单的免费工具，可以快速检查 URL 的 Section 508 和/或 WCAG 1.0 可访问性。它无法抓取，因此用于检查整个站点并不实用，但如果您想快速检查 URL、文件或代码片段，WAVE 是一个快速而全面的选项。您还可以下载 Firefox 的 WAVE 工具栏，让您在本地分析网页。如果您有不想通过未加密连接传输的敏感页面，或者您有一个需要分析的小型本地站点，这将特别有用。

10.  [Web Accessibility Toolbar](http://www.paciellogroup.com/resources/wat-ie-about.html)（免费）：Web Accessibility Toolbar 提供了一套工具来手动检查所有类型的可能的可访问性问题，从低对比度区域到不正确的脚本。该工具栏适用于 Internet Explorer 和 Opera。它最近似乎没有更新，但它的工具对于低视力可访问性测试以及验证 HTML 是否存在典型的可访问性错误仍然非常有用。

11.  [ColorA11y](https://chrome.google.com/webstore/detail/colora11y/icfneoldcbdmgaiocnnobpbbjncdfbfb?hl=en)（免费）：用于测试颜色对比度的 Chrome 开发者工具扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T05:50:14.033

你可以试试 FireEyes(http://www.deque.com/products/worldspace-fireeyes/download-worldspace-fireeyes) 。您可以在 firebug 中运行它，并可以通过专用服务器设置自己的规则集。

FireEyes 是一种前所未有的下一代 Web 可访问性工具，可确保 Web 产品组合中的静态和动态内容均符合 Section 508、WCAG 1.0 和 WCAG 2.0 等标准。您可以使用其他工具，但它不会完全支持 JavaScript 或处理基于事件的页面内容，例如 FireEyes。您的网站是否：使用 AJAX、JavaScript、Flash、PDF 或动态内容？个性化多个用户角色？根据用户输入的数据显示页面？使用内容管理系统，有或没有模板？需要可访问性、安全性和私密性？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-03T07:15:03.013

有许多工具可用于测试 Web 可访问性。我会在下面提出建议。

1.  iOS、macOS 中的画外音。（内置）。
2.  Windows 中的 JAWS（需要购买）。
3.  像chromevox这样的网络扩展。

# c++ - C ++中的多重间接有什么用？

> ID：71108
> 
> 赞同：10
> 
> 时间：2008-09-16T10:41:21.773
> 
> 标签：c++, pointers

`Foo **`在什么情况下，您可能希望在 C++中使用多重间接（即，如 中的指针链）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-16T11:14:26.500

@aku 指出的最常见用法是允许在函数返回后对指针参数的更改可见。

```
#include <iostream>

using namespace std;

struct Foo {
    int a;
};

void CreateFoo(Foo** p) {
    *p = new Foo();
    (*p)->a = 12;
}

int main(int argc, char* argv[])
{
    Foo* p = NULL;
    CreateFoo(&p);
    cout << p->a << endl;
    delete p;
    return 0;
} 
```

这将打印

```
12 
```

但是还有一些其他有用的用法，如以下示例中的迭代字符串数组并将它们打印到标准输出。

```
#include <iostream>

using namespace std;

int main(int argc, char* argv[])
{
    const char* words[] = { "first", "second", NULL };
    for (const char** p = words; *p != NULL; ++p) {
        cout << *p << endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T10:48:55.593

IMO 最常见的用法是传递对指针变量的引用

```
void test(int ** var)
{
 ...
}

int *foo = ...
test(&foo); 
```

您可以使用双指针创建多维锯齿状数组：

```
int ** array = new *int[2];
array[0] = new int[2];
array[1] = new int[3]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T11:06:33.133

一种常见的情况是您需要将**空**指针传递给函数，并在该函数内对其进行初始化，并在函数外使用。如果没有多重间接，调用函数将永远无法访问已初始化的对象。

考虑以下函数：

```
initialize(foo* my_foo)
{
    my_foo = new Foo();
} 
```

任何调用 'initialize(foo*)' 的函数都无法访问**Foo**的初始化实例，因为传递给该函数的指针是一个副本。（指针毕竟只是一个整数，整数是按值传递的。）

但是，如果函数是这样定义的：

```
initialize(foo** my_foo)
{
    *my_foo = new Foo();
} 
```

......它被称为这样......

```
Foo* my_foo;

initialize(&my_foo); 
```

...然后调用者将可以通过“my_foo”访问初始化的实例——因为它是传递给“initialize”的指针的*地址*。

当然，在我的简化示例中，'initialize' 函数可以简单地通过 return 关键字返回新创建的实例，但这并不总是适合 - 也许该函数需要返回其他内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T10:50:04.607

如果您将指针作为输出参数传递，您可能希望将其传递为`Foo**`并将其值设置为`*ppFoo = pSomeOtherFoo`.

在算法和数据结构部门，您可以使用这种双重间接来更新指针，这比交换实际对象的速度更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T10:51:29.860

一个简单的例子是`int** foo_mat`用作二维整数数组。或者您也可以使用指向指针的指针 - 假设您有一个指针`void* foo`，并且您有 2 个不同的对象，这些对象具有以下成员对其的引用：`void** foo_pointer1`并且`void** foo_pointer2`，通过拥有指向指针的指针，您实际上可以检查是否`*foo_pointer1 == NULL`表明foo 为 NULL。如果 foo_pointer1 是常规指针，您将无法检查 foo 是否为 NULL。我希望我的解释不会太混乱:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T10:51:47.553

通常当您将指向函数的指针作为返回值传递时：

```
ErrorCode AllocateObject (void **object); 
```

其中函数返回成功/失败错误代码并使用指向新对象的指针填充对象参数：

```
*object = new Object; 
```

这在 Win32 的 COM 编程中被大量使用。

这更像是 C 要做的事情，在 C++ 中，您通常可以将这种类型的系统包装到一个类中，以使代码更具可读性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T10:54:07.810

卡尔：你的例子应该是：

```
*p = x; 
```

（你有两颗星。）:-)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T15:10:13.483

在 C 中，成语是绝对需要的。考虑您希望函数将字符串（纯 C，因此是 char *）添加到指向 char * 的指针数组的问题。函数原型需要三层间接：

```
int AddStringToList(unsigned int *count_ptr, char ***list_ptr, const char *string_to_add); 
```

我们这样称呼它：

```
unsigned int   the_count = 0;
char         **the_list  = NULL;

AddStringToList(&the_count, &the_list, "The string I'm adding"); 
```

在 C++ 中，我们可以选择使用引用，这会产生不同的签名。但是我们仍然需要您在原始问题中询问的两个间接级别：

```
int AddStringToList(unsigned int &count_ptr, char **&list_ptr, const char *string_to_add); 
```

# jquery - IE 8.0 中 JQuery 的 JS 错误

> ID：71118
> 
> 赞同：0
> 
> 时间：2008-09-16T10:42:46.887
> 
> 标签：jquery, internet-explorer

我使用 JQuery 开发了一个简单的页面。它在几乎所有浏览器（即 Firefox、IE、Chrome）中都可以正常工作，但是每当在 IE 中打开页面时，它都会提示 Javascript 错误，例如，

```
'guid' is null or not an object on line 1834 
```

你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T11:46:07.577

谢谢你们的留言。

错误是我的。对于悬停事件，我没有为“out”传递函数。因此，处理程序在 jQuery.event 函数中作为未定义传递，导致语句错误，

如果（！handler.guid）

写在 jquery-1.2.6.js 文件的 1834 行。

在使用时，我认为 out 处理程序不是必须指定的，但我想我错了。

奇怪的是，FF / Chrome 不会提示错误，但 IE 会:) 这与以前有点不同。

问候， 贾坦

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T12:23:49.017

Firefox 默认删除了 javascript 错误指示，因为有很多页面会抛出 javascript 错误。对于普通用户来说，错误消息没有用 - 只会令人困惑。如果您是 Web 开发人员，则绝对应该安装[Firebug](http://getfirebug.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T11:09:34.500

也许您正在使用 parentNode 或 parentElement 属性？在 IE 与其他浏览器中存在一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T11:52:50.603

抱歉，FF / Chrome 都以非常安静的方式报告此错误。您需要转到 Firefox 3.0 Javascript 错误对话框以查看是否有任何错误，对于 Chrome，您需要转到 Javascript 控制台。

在我看来，对于 FF 3.0 和 Chrome 中的此类错误，至少应该有一些 UI 指示（例如图标会变成红色）。在 FF 2.0 中，我猜如果有任何错误，图标会变成 RED CROSS，但在 FF 3.0 中不会发生！

# jakarta-ee - 在 Web 层和业务层之间使用 RMI 或 JMS 的优缺点是什么？

> ID：71144
> 
> 赞同：3
> 
> 时间：2008-09-16T10:49:01.257
> 
> 标签：jakarta-ee, remoting, jms

对于典型的 Web 客户端到 Servlet/WS 到业务层（Spring 或 EJB）应用程序，远程 RPC 或 Web (Servlet) 层到远程业务层的消息传递等方法的权衡是什么，除了基本的同步/异步方面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T14:21:51.760

网络客户端是指网络浏览器吗？如果是这样，我的建议是查看 DWR 或 JAX-RS 之类的东西。RMI 或 JMS 只有在双方都是 Java 代码时才真正起作用。

对于任何远程技术，使用它们的最大问题往往是该技术对您的业务对象的侵入程度。例如，在任何地方都使用 RMI 接口/异常，或者在您的业务代码中使用 JMS API。

我的建议是在 Java 中随处使用 POJO，然后使用[Spring Remoting 之](http://static.springframework.org/spring/docs/2.5.x/reference/remoting.html)类的技术在中间件上分层，无论是 RMI 还是 JMS 或其他任何东西 - 但将中间件代码与业务逻辑完全分离，以便您可以随时在技术之间切换（并使您的业务逻辑代码更简单并专注于您的业务问题）。

例如，查看[Spring Remoting 的 Camel 实现，](http://activemq.apache.org/camel/spring-remoting.html)它允许您使用[任何这些传输和协议](http://activemq.apache.org/camel/components.html)，例如 RMI、JMS 甚至普通的 HTTP、电子邮件、文件或 XMPP - 然后使用简单的 URI 字符串更改在它们之间轻松切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T13:01:19.253

我们通过 Spring 使用 RMI，发现它非常易于使用、相当健壮和快速。尽管我们的要求是一个相当灵敏的链接，并且没有真正需要添加消息传递组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-17T14:31:45.533

SUN RMI 为我们打破了。

具有连续消息传递的非常长时间运行的应用程序的设置和垃圾收集。我们正在修补以使其持续工作。我们运行的 JMS 应用程序不会像 RMI 那样出现内存不足错误或 gc 问题。任何需要定期调用 System.gc() 并且不能使用增量收集来恢复资源的东西都被编码错误。

RMI 可靠性随着 JDK 6 和正确的属性设置而提高，但是 JHC，它是一个糟糕的框架。通过在 nio 中使用通道并修复 sun nio 对 system.gc() 的使用，RMI 将得到极大的改进。

正确答案 - 与域代码分开通信（机制）。RPC 是紧耦合的，协议和应用程序可以相互干扰。JMS 将协议与应用程序分开，这是一个更好的范例。

# c# - 对于单个开发人员来说，什么是最物有所值的 c# 代码保护

> ID：71146
> 
> 赞同：2
> 
> 时间：2008-09-16T10:49:12.783
> 
> 标签：c#, obfuscation, protection

什么是最物有所值的 c# 代码保护？有些只是使用混淆，有些则添加了 win32 包装，有些则花费了一大笔钱。到目前为止，我已经想出了[http://www.eziriz.com/](http://www.eziriz.com/)谁的 Intellilock 看起来很有前途。还有其他建议吗？为什么这不是一个好主意？

我知道完全保护它是不可能的，但我更喜欢保护我的代码的能力，这样就需要付出很多努力才能恢复它。我确实希望最终能销售我的产品，同时也免费发布一些产品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T10:59:08.160

首先，无论您采用何种保护措施，真正专用的破解者最终都会通过所有的保护屏障。使用高级代码混淆可能根本不值得；而是将时间集中在制作更好的应用程序上。

看待这个问题的一种方法是，盗版您的软件的人不是您的目标受众；而是专注于付费客户。

话虽如此，Visual Studio 包括[Dotfuscator](http://www.preemptive.com/dotfuscator.html)的社区版，它相当不错（因为它的价值）；如果需要，我会调查一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T15:05:36.023

Dotfuscator 社区版只不过是重命名您的方法（据我所知）。这与合理的保护相去甚远。

如果你想要一个免费的混淆器，你可以试试[这个](http://www.foss.kharkov.ua/g1/projects/eazfuscator/dotnet/Default.aspx)

除此之外，如果价格很重要，Intelliclock 看起来是一个不错的决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-15T16:57:23.880

[Smartassembly](http://www.smartassembly.com/product/editions.aspx)做得非常好。它非常好，而且易于使用。它甚至使查看混淆文件变得更加困难，因为它甚至使反编译变得更加困难。

> 为什么选择 {smartassembly}？
> 
> {smartassembly} 是一流的 .NET 混淆器，因此可以保护您的 .NET 知识产权。但是，除此之外，{smartassembly} 还为您和每个 .NET 开发人员提供了最有效和最简单的方法：进一步保护您的 .NET 应用程序（字符串编码、反反汇编器和反反编译器选项、强名称签名.. .) 在一个文件中部署您的 .NET 应用程序（依赖项合并、压缩和嵌入）删除所有无用的代码和元数据（修剪）执行其他代码优化（内存管理、类的自动密封......）并调试您的混淆和已部署的程序集（通过 24x7x365 托管 Web 服务自动报告未处理的异常）。
> 
> 这个全面的功能集可以有效地生产更好的软件，受到保护、优化和改进，绝对区分了市场上所有其他 .NET “保护和/或优化解决方案”的 {smartassembly}。
> 
> 它的用户友好性允许每个 .NET 开发人员，无论他的能力或专业水平如何，都可以轻松利用所有这些功能，从而有利地完成这种独特性，对您有利。
> 
> 通过有效地使每个 .NET 开发人员能够立即以无与伦比的轻松方式交付其 .NET 应用程序的智能版本，{smartassembly} 无疑推动了 .NET 软件的改进和保护！
> 
> 使用 {smartassembly}，您将把您宝贵的 .NET 应用程序提升到一个新的水平！

价格范围也很实惠：

产品名称 产品编号 欧元价格 美元价格

{smartassembly} 标准版 – 单用户 #300056706 € 349.00 $ 499.00

{smartassembly} 专业版 – 单用户 #300056708 € 499.00 $ 699.00

{smartassembly} 企业版 – 单用户 #300072534 € 649.00 $ 899.0

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-06-14T13:56:52.257

[http://www.eziriz.com/](http://www.eziriz.com/)应用程序工作合理。但支持 S*CKS。他们从不回复。所以我建议你去寻找别的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-03-21T17:55:56.647

**[Rummage](http://www.aldaray.com/Rummage)**以非常适中的价格提供合理的专业级混淆。（披露：我在 Aldaray Ltd. 公司工作）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-11-20T08:32:34.497

我们的[Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)产品价格实惠 - 许可证不需要花费数千美元 - 并为您的程序集提供强大的混淆功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-04-15T16:49:20.613

我尝试了很多，我认为[BitHelmet 混淆](http://www.bithelmet.com)器是当今最好的选择。

# c# - 在 .NET WinForms 中创建自定义菜单

> ID：71149
> 
> 赞同：2
> 
> 时间：2008-09-16T10:49:24.267
> 
> 标签：c#, .net, winforms, menu

将 .NET 2.0 与 WinForms 一起使用，我想创建一个自定义的多列菜单（类似于 2007 年的外观，但没有功能区）。

我的方法是创建一个控件，并使用左/右停靠的工具条，我构建了一个类似的菜单外观。但是，该解决方案存在一些缺点，例如

*   控件只能在表单中放置和显示；
*   如果窗体太小，控件的某些区域将不会显示；
*   该控件还必须手动显示/隐藏。

因此，我正在寻找一种在应用程序边界之外显示此控件的方法。创建一个新表单会导致标题栏在显示时停用，所以这也被淘汰了。或者，任何其他创建自定义菜单的方法都将受到欢迎。

编辑：我不想为此使用任何商业产品；而且由于它是关于一个简单的菜单定制，它与微软的功能区“研究”没有任何关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T11:05:21.327

*   除非您从事提供 .net 组件的业务，否则您应该考虑购买现成的。获得这样的控制权需要做很多工作——已经有供应商提供这种 UI。例如[ComponentOne](http://www.componentone.com/SuperProducts/RibbonWinForms/)
*   如果您尝试将此组件构建为产品，则应查看下面的链接。显然，微软在 Office UI 周围有一个“免版税”许可证，以保护他们的研发投资。到目前为止，您需要告诉他们您正在使用类似于 Office UI 的东西。[更多内容在这里](http://msdn.microsoft.com/en-us/office/aa973809.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T02:34:39.570

MenuStrip 类有一个 Renderer 属性。您可以分配自己的 ToolStripRenderer 派生类来自定义绘画。这是相当多的工作。

# python - Python中的HTML解析器

> ID：71151
> 
> 赞同：7
> 
> 时间：2008-09-16T10:49:36.573
> 
> 标签：python, import

使用 Python 文档我找到了[HTML 解析器](http://docs.python.org/lib/module-HTMLParser.html)，但我不知道要导入哪个库来使用它，我该如何找到它（记住它并没有在页面上说明）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-09-16T10:54:05.363

您可能真的想要[BeautifulSoup](https://stackoverflow.com/questions/55391/python-regular-expression-for-html-parsing-beautifulsoup#55424)，请查看链接以获取示例。

但无论如何

```
>>> import HTMLParser
>>> h = HTMLParser.HTMLParser()
>>> h.feed('<html></html>')
>>> h.get_starttag_text()
'<html>'
>>> h.close() 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-16T10:51:40.517

尝试：

```
import HTMLParser 
```

在 Python 3.0 中，HTMLParser 模块已重命名为 html.parser 你可以[在这里查看](http://docs.python.org/library/htmlparser.html)

蟒蛇3.0

```
import html.parser 
```

Python 2.2 及更高版本

```
import HTMLParser 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T10:54:21.023

我建议改用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)模块，它有[很好的文档](http://www.crummy.com/software/BeautifulSoup/documentation.html)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T12:14:04.750

您还应该查看用于 Python 的[html5lib](http://code.google.com/p/html5lib/)，因为它尝试以非常类似于 Web 浏览器的方式解析 HTML，尤其是在处理无效 HTML（这是当今 Web 的 90% 以上）时。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-17T11:19:11.393

您可能对[lxml](http://codespeak.net/lxml/)感兴趣。它是一个单独的包并具有 C 组件，但速度最快。它还有非常好的 API，允许您轻松列出 HTML 文档中的链接，或列出表单、清理 HTML 等等。它还具有解析格式不正确的 HTML 的功能（它是可配置的）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T13:21:55.523

如果你想要速度，我不推荐 BeautifulSoup。lxml 快得多，如果默认解析器不起作用，您可以退回到 lxml 的 BS soupparser。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T10:52:39.563

[( http://docs.python.org/2/library/htmlparser.html](http://docs.python.org/2/library/htmlparser.html) )底部有一个示例链接，它只是不适用于原始 python 或 python3。它必须是 python2，正如它在顶部所说的那样。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T10:55:20.070

对于现实世界的 HTML 处理，我推荐[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。它很棒，可以消除很多痛苦。安装很容易。

# f# - 任何人都有 --standalone 选项在 F# CTP 中工作？

> ID：71157
> 
> 赞同：6
> 
> 时间：2008-09-16T10:50:58.083
> 
> 标签：f#, functional-programming

我可能完全错了，但我的理解是 --standalone 编译器选项告诉编译器在 exe 中包含 F# 核心和其他依赖项，这样您就可以在另一台机器上运行它而无需安装任何“运行时”。

但是，我不能让它在 CTP 中工作——它甚至似乎都没有改变输出文件的大小（我读过的文档说额外增加了 1M）。

“谷歌可能知道，但如果它知道，它并没有说明，或者我没有找对地方”

**更新：**

它似乎适用于最新的 CTP[更新 1.9.6.2](http://www.microsoft.com/downloads/details.aspx?familyid=61ad6924-93ad-48dc-8c67-60f7e7803d3c&displaylang=en)

**更新2：**

从那以后，我遇到了另一个错误：

```
FSC(0,0): error FS0191: could not resolve assembly Microsoft.Build.Utilities. 
```

如果您在尝试编译 --standalone 时遇到此类错误，则需要在项目中明确包含它们作为引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T13:00:51.610

来自 MS 的回答：

*有一个 CTP 更新 1.9.6.2 修复了一些 --standalone 错误。*

我现在重装...

更新：对我有用 - 所以我接受的答案是**下载 CTP update 1.9.6.2**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T10:57:18.397

F# 手册：[使用“--standalone”静态链接 F# 库](http://research.microsoft.com/fsharp/manual/compiler.aspx#Standalone)

您是否尝试运行 peverify.exe 实用程序？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-23T14:11:19.847

长期以来，这一直是我的宠儿（它已在每个 CTP 版本中被打破，包括最新的 1.9.6.16 May 2009 版本）。“解决方案”本质上是编写自己的未损坏的构建系统。

这对我来说是一个真正的问题，因为我已经积累了数百个很棒的 F# 程序，我想将它们放在我们的网站上，但是将每个程序构建成一个独立的可执行文件需要几个小时。

# svn - 组合SVN FTP系统？

> ID：71163
> 
> 赞同：13
> 
> 时间：2008-09-16T10:51:46.490
> 
> 标签：svn, ftp, hook, web-deployment

是否有任何系统可以检查网站的更改并自动更新网站。

该网站始终有效地运行最新的稳定版本，而无需将文件 ftp 到服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T10:54:24.847

我会考虑在进行更改时使用[提交后挂钩来更新站点。](http://svnbook.red-bean.com/en/1.4/svn.ref.reposhooks.post-commit.html)这可能就像使用“svn export”将存储库的当前状态导出到实时网站位置一样简单。当然，如果您的网站有很多内容，这会考虑性能，因此您可能想要做一些更复杂的事情，并且只推送提交中更改的内容的更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T10:53:29.013

您可能希望结合使用 CruiseControl（或 CruiseControl.NET）和 Ant（或 NAnt）。这对我们来说非常好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-03T18:14:04.913

Beanstalk 是一个集成了 ftp 和 subversion 的解决方案。

[http://beanstalkapp.com/](http://beanstalkapp.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T10:58:52.357

是的，你想要的就是 post_commit 钩子。

钩*什么*？我建议使用 rsync（如果您的站点实例不是 svn 工作副本）或带有密钥身份验证的 ssh 调用执行“cd WEBDIR && svn up”（如果是）的脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-03T19:35:36.510

[Assembla](http://www.assembla.com/catalog/37-Web-Designers-Package?affiliate)用他们的 FTP 和 Subversion 工具得到了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T10:55:42.113

SVN 的 post_commit 钩子非常适合这样的事情。

[ADS（自动部署脚本](http://amiworks.co.in/talk/ads-automatic-deployment-script/)看起来像是一个解决方案，但我从未尝试过 - 只是用谷歌搜索几秒钟找到它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T13:45:51.737

You may want to take a look at [Unison](http://www.cis.upenn.edu/~bcpierce/unison/). I was fairly happy with it as a publishing mechanism for a site where I wanted, effectively, a smart two-way rsync. You could probably tie it to SVN without much difficulty.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T13:38:02.130

实际上需要发生的是，我标记为实时或稳定的更改需要与实时网站合并。这实际上意味着我不必担心意外复制文件，如果出现问题，它可以再次恢复到以前的版本。

我将调查 post_commit 钩子，但我必须先找到一种方法来进行备份，这样 subversion 的问题就不会杀死该站点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-04T18:54:21.320

svn2web 安装为 post-commit 钩子，每次提交时都会将 subversion 存储库中的 ftp 或 scp 文件传输到一个或多个 Web 服务器。有关详细信息，请参阅[SourceForge](http://svn2web.sourceforge.net/)项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-12-17T14:57:24.683

[http://svn2ftp.com](http://svn2ftp.com) > SVN2FTP 允许用户将 SVN / Subversion 提交直接推送到 FTP 或 SFTP 服务器

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-26T17:55:50.523

我想这会对你有所帮助

[https://github.com/midhundevasia/deploy](https://github.com/midhundevasia/deploy)

它在 Windows 中运行良好。

# sql-server - 帮助 SQL Server 堆栈转储

> ID：71166
> 
> 赞同：1
> 
> 时间：2008-09-16T10:51:58.130
> 
> 标签：sql-server

我们在 4cpu 机器上运行 SQL 2005 标准 SP2。突然它崩溃转储，之后所有池连接都无效并进入仅管理员模式（只有 sa 可以连接）

下面是简短的堆栈转储。转储后出现许多错误，例如 '2008-09-16 10:49:34.48 Server Resource Monitor (0xec4) Worker 0x03D1C0E8 在节点 0 上似乎没有产生。已释放内存：232408 KB。使用的大约 CPU：内核 203 毫秒，用户 140 毫秒，间隔：250250。

用谷歌搜索，但找不到明确的答案。任何人？

```
2008-09-16 10:46:24.98 Server      Using 'dbghelp.dll' version '4.0.5'
2008-09-16 10:46:25.40 Server      **Dump thread - spid = 0, PSS = 0x00000000, EC = 0x00000000
2008-09-16 10:46:25.40 Server      ***Stack Dump being sent to C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\LOG\SQLDump0009.txt
2008-09-16 10:46:25.40 Server      * *******************************************************************************
2008-09-16 10:46:25.40 Server      *
2008-09-16 10:46:25.40 Server      * BEGIN STACK DUMP:
2008-09-16 10:46:25.40 Server      *   09/16/08 10:46:25 spid 0
2008-09-16 10:46:25.42 Server      *
2008-09-16 10:46:25.42 Server      * Non-yielding Resource Monitor
2008-09-16 10:46:25.42 Server      *
2008-09-16 10:46:25.42 Server      * *******************************************************************************
2008-09-16 10:46:25.42 Server      * -------------------------------------------------------------------------------
2008-09-16 10:46:25.42 Server      * Short Stack Dump
2008-09-16 10:46:25.76 Server      Stack Signature for the dump is 0x00000352
2008-09-16 10:46:32.70 Server      External dump process return code 0x20000001. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:06:10.930

请参阅PSS SQL Server 工程师博客上的[工作原理：非屈服资源监视器。](http://blogs.msdn.com/psssql/archive/2008/03/28/how-it-works-non-yielding-resource-monitor.aspx)

如果这和链接的白皮书没有帮助，那么您最好直接联系 PSS（Microsoft 产品支持服务）。

# excel - 如何找到包含特定列中数据的最后一行？

> ID：71180
> 
> 赞同：64
> 
> 时间：2008-09-16T10:54:53.520
> 
> 标签：excel, vba

如何找到包含特定列和特定工作表中数据的最后一行？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-09-16T11:16:30.143

怎么样：

```
Function GetLastRow(strSheet, strColumn) As Long
    Dim MyRange As Range

    Set MyRange = Worksheets(strSheet).Range(strColumn & "1")
    GetLastRow = Cells(Rows.Count, MyRange.Column).End(xlUp).Row
End Function 
```

关于评论，即使最后一行中只有一个单元格有数据，这也会返回最后一个单元格的行号：

```
Cells.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-16T15:21:00.573

您应该使用`.End(xlup)`65536 而不是您可能想要使用的：

```
sheetvar.Rows.Count 
```

这样它适用于 Excel 2007，我相信它有超过 65536 行

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-26T15:14:39.740

简单快捷：

```
Dim lastRow as long
Range("A1").select
lastRow = Cells.Find("*",SearchOrder:=xlByRows,SearchDirection:=xlPrevious).Row 
```

示例使用：

```
cells(lastRow,1)="Ultima Linha, Last Row. Youpi!!!!"

'or 

Range("A" & lastRow).Value = "FIM, THE END" 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-16T11:14:22.070

```
function LastRowIndex(byval w as worksheet, byval col as variant) as long
  dim r as range

  set r = application.intersect(w.usedrange, w.columns(col))
  if not r is nothing then
    set r = r.cells(r.cells.count)

    if isempty(r.value) then
      LastRowIndex = r.end(xlup).row
    else
      LastRowIndex = r.row
    end if
  end if
end function 
```

用法：

```
? LastRowIndex(ActiveSheet, 5)
? LastRowIndex(ActiveSheet, "AI") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T16:34:08.587

```
Public Function LastData(rCol As Range) As Range    
    Set LastData = rCol.Find("*", rCol.Cells(1), , , , xlPrevious)    
End Function 
```

用法：`?lastdata(activecell.EntireColumn).Address`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-22T22:53:29.380

所有依赖于内置行为（如`.Find`和`.End`）的解决方案都存在未充分记录的限制（有关详细信息，请参阅[我的其他答案](https://stackoverflow.com/a/49971540/1026)）。

我需要一些东西：

*   **在特定列**中查找最后一个**非空**单元格（即具有*任何公式或值*，即使它是空字符串）
***   依赖于具有明确行为的原语*   与自动过滤器和用户修改一起可靠地工作*   在 10,000 行上尽可能快地运行（在`Worksheet_Change`处理程序中运行而不会感到迟钝）*   ...性能不会因为意外数据或格式放在工作表的最后（约 1M 行）而跌落悬崖**

 **下面的解决方案：

*   用于`UsedRange`查找行号的上限（在接近使用范围末尾的常见情况下快速搜索真正的“最后一行”）；
*   向后查找给定列中包含数据的行；
*   `UsedRange`...使用 VBA 数组来避免单独访问每一行（如果我们需要跳过很多行）

（没有测试，对不起）

```
' Returns the 1-based row number of the last row having a non-empty value in the given column (0 if the whole column is empty)
Private Function getLastNonblankRowInColumn(ws As Worksheet, colNo As Integer) As Long
    ' Force Excel to recalculate the "last cell" (the one you land on after CTRL+END) / "used range"
    ' and get the index of the row containing the "last cell". This is reasonably fast (~1 ms/10000 rows of a used range)
    Dim lastRow As Long: lastRow = ws.UsedRange.Rows(ws.UsedRange.Rows.Count).Row - 1 ' 0-based

    ' Since the "last cell" is not necessarily the one we're looking for (it may be in a different column, have some
    ' formatting applied but no value, etc), we loop backward from the last row towards the top of the sheet).
    Dim wholeRng As Range: Set wholeRng = ws.Columns(colNo)

    ' Since accessing cells one by one is slower than reading a block of cells into a VBA array and looping through the array,
    ' we process in chunks of increasing size, starting with 1 cell and doubling the size on each iteration, until MAX_CHUNK_SIZE is reached.
    ' In pathological cases where Excel thinks all the ~1M rows are in the used range, this will take around 100ms.
    ' Yet in a normal case where one of the few last rows contains the cell we're looking for, we don't read too many cells.
    Const MAX_CHUNK_SIZE = 2 ^ 10 ' (using large chunks gives no performance advantage, but uses more memory)
    Dim chunkSize As Long: chunkSize = 1
    Dim startOffset As Long: startOffset = lastRow + 1 ' 0-based
    Do ' Loop invariant: startOffset>=0 and all rows after startOffset are blank (i.e. wholeRng.Rows(i+1) for i>=startOffset)
        startOffset = IIf(startOffset - chunkSize >= 0, startOffset - chunkSize, 0)
        ' Fill `vals(1 To chunkSize, 1 To 1)` with column's rows indexed `[startOffset+1 .. startOffset+chunkSize]` (1-based, inclusive)
        Dim chunkRng As Range: Set chunkRng = wholeRng.Resize(chunkSize).Offset(startOffset)
        Dim vals() As Variant
        If chunkSize > 1 Then
            vals = chunkRng.Value2
        Else ' reading a 1-cell range requires special handling <http://www.cpearson.com/excel/ArraysAndRanges.aspx>
            ReDim vals(1 To 1, 1 To 1)
            vals(1, 1) = chunkRng.Value2
        End If

        Dim i As Long
        For i = UBound(vals, 1) To LBound(vals, 1) Step -1
            If Not IsEmpty(vals(i, 1)) Then
                getLastNonblankRowInColumn = startOffset + i
                Exit Function
            End If
        Next i

        If chunkSize < MAX_CHUNK_SIZE Then chunkSize = chunkSize * 2
    Loop While startOffset > 0

    getLastNonblankRowInColumn = 0
End Function 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-07T18:53:01.763

这是查找最后一行、最后一列或最后一个单元格的解决方案。它解决了它找到的列的 A1 R1C1 参考样式困境。希望我能给予信任，但找不到/记得我从哪里得到它，所以“谢谢！” 不管是谁在外面的某个地方发布了原始代码。

```
Sub Macro1
    Sheets("Sheet1").Select
    MsgBox "The last row found is: " & Last(1, ActiveSheet.Cells)
    MsgBox "The last column (R1C1) found is: " & Last(2, ActiveSheet.Cells)
    MsgBox "The last cell found is: " & Last(3, ActiveSheet.Cells)
    MsgBox "The last column (A1) found is: " & Last(4, ActiveSheet.Cells)
End Sub

Function Last(choice As Integer, rng As Range)
' 1 = last row
' 2 = last column (R1C1)
' 3 = last cell
' 4 = last column (A1)
    Dim lrw As Long
    Dim lcol As Integer

    Select Case choice
    Case 1:
        On Error Resume Next
        Last = rng.Find(What:="*", _
                        After:=rng.Cells(1), _
                        LookAt:=xlPart, _
                        LookIn:=xlFormulas, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlPrevious, _
                        MatchCase:=False).Row
        On Error GoTo 0

    Case 2:
        On Error Resume Next
        Last = rng.Find(What:="*", _
                        After:=rng.Cells(1), _
                        LookAt:=xlPart, _
                        LookIn:=xlFormulas, _
                        SearchOrder:=xlByColumns, _
                        SearchDirection:=xlPrevious, _
                        MatchCase:=False).Column
        On Error GoTo 0

    Case 3:
        On Error Resume Next
        lrw = rng.Find(What:="*", _
                       After:=rng.Cells(1), _
                       LookAt:=xlPart, _
                       LookIn:=xlFormulas, _
                       SearchOrder:=xlByRows, _
                       SearchDirection:=xlPrevious, _
                       MatchCase:=False).Row
        lcol = rng.Find(What:="*", _
                        After:=rng.Cells(1), _
                        LookAt:=xlPart, _
                        LookIn:=xlFormulas, _
                        SearchOrder:=xlByColumns, _
                        SearchDirection:=xlPrevious, _
                        MatchCase:=False).Column
        Last = Cells(lrw, lcol).Address(False, False)
        If Err.Number > 0 Then
            Last = rng.Cells(1).Address(False, False)
            Err.Clear
        End If
        On Error GoTo 0
    Case 4:
        On Error Resume Next
        Last = rng.Find(What:="*", _
                        After:=rng.Cells(1), _
                        LookAt:=xlPart, _
                        LookIn:=xlFormulas, _
                        SearchOrder:=xlByColumns, _
                        SearchDirection:=xlPrevious, _
                        MatchCase:=False).Column
        On Error GoTo 0
        Last = R1C1converter("R1C" & Last, 1)
        For i = 1 To Len(Last)
            s = Mid(Last, i, 1)
            If Not s Like "#" Then s1 = s1 & s
        Next i
        Last = s1

    End Select

End Function

Function R1C1converter(Address As String, Optional R1C1_output As Integer, Optional RefCell As Range) As String
    'Converts input address to either A1 or R1C1 style reference relative to RefCell
    'If R1C1_output is xlR1C1, then result is R1C1 style reference.
    'If R1C1_output is xlA1 (or missing), then return A1 style reference.
    'If RefCell is missing, then the address is relative to the active cell
    'If there is an error in conversion, the function returns the input Address string
    Dim x As Variant
    If RefCell Is Nothing Then Set RefCell = ActiveCell
    If R1C1_output = xlR1C1 Then
        x = Application.ConvertFormula(Address, xlA1, xlR1C1, , RefCell) 'Convert A1 to R1C1
    Else
        x = Application.ConvertFormula(Address, xlR1C1, xlA1, , RefCell) 'Convert R1C1 to A1
    End If
    If IsError(x) Then
        R1C1converter = Address
    Else
        'If input address is A1 reference and A1 is requested output, then Application.ConvertFormula
        'surrounds the address in single quotes.
        If Right(x, 1) = "'" Then
            R1C1converter = Mid(x, 2, Len(x) - 2)
        Else
            x = Application.Substitute(x, "$", "")
            R1C1converter = x
        End If
    End If
End Function 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-13T20:16:06.757

我想添加一种更可靠的方法`UsedRange`来查找最后使用的行：

```
lastRow = Sheet1.UsedRange.Row + Sheet1.UsedRange.Rows.Count - 1 
```

类似地找到最后使用的列，你可以[看到这个](https://stackoverflow.com/questions/11926972/excel-vba-finding-the-last-column-with-data/35945397#35945397)

[![在此处输入图像描述](https://i.stack.imgur.com/46aa0.jpg)](https://i.stack.imgur.com/46aa0.jpg)

立即窗口中的结果：

```
?Sheet1.UsedRange.Row+Sheet1.UsedRange.Rows.Count-1
 21 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-26T06:21:50.033

```
Public Function GetLastRow(ByVal SheetName As String) As Integer
    Dim sht As Worksheet
    Dim FirstUsedRow As Integer     'the first row of UsedRange
    Dim UsedRows As Integer         ' number of rows used

    Set sht = Sheets(SheetName)
    ''UsedRange.Rows.Count for the empty sheet is 1
    UsedRows = sht.UsedRange.Rows.Count
    FirstUsedRow = sht.UsedRange.Row
    GetLastRow = FirstUsedRow + UsedRows - 1

    Set sht = Nothing
End Function 
```

sheet.UsedRange.Rows.Count：返回使用的行数，不包括使用的第一行上方的空行

如果第 1 行为空，并且最后使用的行是 10，则 UsedRange.Rows.Count 将返回 9，而不是 10。

此函数计算 UsedRange 的第一行数加上 UsedRange 行数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-27T17:27:43.620

```
Last_Row = Range("A1").End(xlDown).Row 
```

只是为了验证，假设您想用单元格 C1 中的数据打印最后一行的行号。

```
Range("C1").Select
Last_Row = Range("A1").End(xlDown).Row
ActiveCell.FormulaR1C1 = Last_Row 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-21T10:41:18.910

*使用二进制搜索*获取最后一个非空行

 **   尽管存在隐藏值，但返回正确的值事件
*   如果在最后一个非空单元格之前有空单元格，则可能返回不正确的值（例如，第 5 行是空的，但第 10 行是最后一个非空行）

```
Function getLastRow(col As String, ws As Worksheet) As Long
    Dim lastNonEmptyRow As Long
    lastNonEmptyRow = 1
    Dim lastEmptyRow As Long

    lastEmptyRow = ws.Rows.Count + 1
    Dim nextTestedRow As Long

    Do While (lastEmptyRow - lastNonEmptyRow > 1)
        nextTestedRow = Application.WorksheetFunction.Ceiling _
            (lastNonEmptyRow + (lastEmptyRow - lastNonEmptyRow) / 2, 1)
        If (IsEmpty(ws.Range(col & nextTestedRow))) Then
            lastEmptyRow = nextTestedRow
        Else
            lastNonEmptyRow = nextTestedRow
        End If
    Loop

    getLastRow = lastNonEmptyRow

End Function 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2008-09-16T10:56:52.907

```
Function LastRow(rng As Range) As Long
    Dim iRowN As Long
    Dim iRowI As Long
    Dim iColN As Integer
    Dim iColI As Integer
    iRowN = 0
    iColN = rng.Columns.count
    For iColI = 1 To iColN
        iRowI = rng.Columns(iColI).Offset(65536 - rng.Row, 0).End(xlUp).Row
        If iRowI > iRowN Then iRowN = iRowI
    Next
    LastRow = iRowN
End Function 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2008-09-16T11:23:04.637

第一行将光标移动到列中的最后一个非空行。第二行打印该列行。

```
Selection.End(xlDown).Select
MsgBox(ActiveCell.Row) 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2015-10-30T11:08:29.840

```
Sub test()
    MsgBox Worksheets("sheet_name").Range("A65536").End(xlUp).Row
End Sub 
```

这是在列中寻找一个值，`A`因为`"A65536"`.

# c# - 您是否应该混淆商业 .Net 应用程序？

> ID：71195
> 
> 赞同：40
> 
> 时间：2008-09-16T10:56:35.717
> 
> 标签：c#, .net, obfuscation

我正在考虑混淆一个商业 .Net 应用程序。但是，真的值得选择、购买和使用这样的工具吗？混淆后的二进制文件真的不受逆向工程的影响吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-09-16T11:03:08.587

您可能不必购买工具 - Visual Studio.NET 附带 Dotfuscator 的社区版本。[此处列出了](http://twit88.com/blog/2007/09/15/free-net-obfuscation-tools/)其他免费的混淆工具，它们可能会满足您的需求。

混淆后的二进制文件可能无法避免逆向工程，就像您的自行车锁可能易碎/易撬一样。但是，通常情况下，一个小小的不便就足以阻止代码/自行车窃贼。

此外，如果到了在法庭上维护您对一段代码的权利的时候，已经看到努力保护它（通过混淆它）可能会给您加分。:-)

但是，您确实必须考虑缺点 - 将反射与混淆代码一起使用可能会更加困难，并且如果您使用 log4net 之类的东西根据所涉及的类的名称生成部分日志行，这些消息可能会变成更难解释。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-09-16T13:30:43.300

请记住，混淆只是临时检查代码的障碍。如果有人认真想弄清楚你写了什么，你将很难阻止他们。

如果您的代码中有秘密（如密码），那么您做错了。

如果您担心有人可能会根据您的想法生产您自己的软件，那么通过提供客户想要的新版本、技术支持以及成为他们的合作伙伴，您将在市场上获得更多运气。好生意赢。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-16T11:18:22.870

在我们公司，我们评估了几种不同的混淆技术，但它们都存在问题。最大的问题是我们非常依赖反射，例如根据属性名称动态创建网格。

所以所有的混淆器都会重命名东西，你当然可以禁用它，但是你会失去很多混淆的好处。

此外，在我们的代码中，我们有很多 NUnit 测试依赖于更多公开的方法和属性，这阻止了一些混淆器能够混淆这些类。

最后，我们选择了一款名为[.NET Reactor的产品](http://www.eziriz.com/)

它工作得很好，我们没有任何与其他产品相关的问题。

“与混淆器相比，.NET Reactor 通过将任何纯 .NET 程序集（用 C#、VB.NET、Delphi.NET、J#、MSIL...编写）与本机机器代码混合来完全停止任何反编译。详细地说，.NET Reactor在潜在的黑客和您的 .NET 代码之间建立本地墙。结果是基于标准 Windows 的文件，不兼容 MSIL代码在任何时候都不会复制到硬盘上。没有能够反编译受 .NET Reactor 保护的程序集的工具。”

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-16T11:11:09.423

您实际上可以对其进行逆向工程这一事实并不会使混淆变得无用。它确实显着提高了标准。

一个未混淆的 .NET 程序集将显示所有源代码，突出显示，只需下载[.NET Reflector](http://en.wikipedia.org/wiki/.NET_Reflector)即可。对此添加混淆，您将大大减少能够修改代码的人数。

这取决于你是否保护自己免受伤害。如果你不混淆地发布它，你不妨开源应用程序并从营销中受益。对其进行混淆处理只会让人们相对容易地通过补丁生成修改后的二进制文件，而不是能够窃取您的代码并创建直接竞争对手。从混淆代码中获取实际源代码非常困难，当然，这取决于混淆器。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-19T00:49:42.447

你应该考虑的事情：

*   **混淆不会保护您的代码或逻辑。**它只会让阅读和理解变得更加困难。
*   **混淆并没有停止逆向工程。**它只会减慢进程。
*   **您的知识产权在大多数国家受法律保护。**因此，如果竞争对手使用您的代码或特定实现，您可以起诉他。

**混淆可以解决的唯一问题是有人创建了您的特定实现的 1:1（或接近 1:1）副本。**

同样在理想世界中，模糊应用程序的逆向工程在经济上没有吸引力。

但回到现实：

*   **这个星球上没有任何工具可以阻止人们复制任何应用程序提供或产生的用户界面、行为或结果。**在这种情况下，混淆是 100% 没用的
*   **市场上最好的混淆器无法阻止人们使用某种反汇编器或十六进制编辑器**，对于一些极客来说，了解应用程序的核心非常好。它比未混淆的代码更难。

因此，现实情况是，您可以使查看您的应用程序变得更加困难和耗时，但您不会真正得到任何可靠的保护。无论您使用免费产品还是商业产品。

控制流混淆或代码虚拟化等高级技术有时可能有助于使对逻辑的理解变得非常困难，但它们也会导致很多有趣且难以调试或解决问题。所以它们有时更像是一个额外的问题而不是一个解决方案。

**从我的角度来看，混淆不值得一些公司为其产品收取的费用。**如果您想唠叨临时开发人员，开源混淆器就足够了。如果您想尽可能地深入研究应用程序的核心，您需要使用具有虚拟执行环境和虚拟文件系统的加密容器，但它们也提供攻击向量，也可能成为一大堆问题的根源.

**您的知识产权和您的产品在大多数国家受法律保护。**所以如果有一个竞争对手分析和复制你的代码，你可以起诉他。如果一个坏人或黑客或破解者拿走了你的应用程序，你就会被恶作剧——但混淆器并没有什么不同。

所以你应该首先考虑你的目标、你的市场以及你想用混淆器实现什么。**正如您在这里（和其他地方）所读到的那样，混淆并不能真正解决逆向工程的问题。它只会让它变得更难，更耗时。**但是，如果这是您想要的，您可以看看开源混淆器，例如 sharpObfuscator 或 obfuscar，它们可能足以让随意的编码人员感到厌烦（可以在此处找到[列表：Wikipedia 上的 .NET 混淆](http://en.wikipedia.org/wiki/List_of_obfuscators_for_.NET)器列表）。

**如果在您的场景中可能，您可能还会对 SaaS 概念感兴趣。**这意味着您提供对软件的访问，而不是软件本身。因此，客户通常无法访问您的组件。**但是，根据服务水平、安全性和用户群，实现可靠、自信和高性能的 SaaS 服务可能是昂贵、复杂和困难的。**

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-16T13:22:00.233

我认为这取决于您的产品类型。如果它被指示供开发人员使用 - 混淆会伤害您的客户。我们一直在使用 ArcGIS 产品，所有的 DLL 都被混淆了。这让我们的工作变得更加困难，因为我们无法使用 Reflector 来破译奇怪的行为。我们正在购买为该产品支付数千美元的客户。

所以请不要混淆，除非你真的必须这样做。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T10:58:51.467

不，混淆已被证明不会阻止某人能够破译编译的代码。这使这样做变得更加困难，但并非不可能。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-10-21T13:00:51.203

我很喜欢阅读 x86 汇编代码，那些从事汇编工作超过 20 年的人呢？

你总会找到只需要一分钟就可以看到你的 c# 或 c 代码在做什么的人......

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-01-26T09:16:57.633

只是给几年后阅读的其他人的说明-几个小时前我刚刚浏览了 Dotfuscator 社区版（VS2008 附带）许可证，我相信您不能使用此版本分发商业产品或混淆代码来自一个涉及除您之外的任何开发人员的项目。所以对于商业应用开发者来说，它实际上只是一个试用版。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T11:10:02.517

> ...剪辑...这些消息可能变得更难以解释

是的，但是 Visual Studio 附带的免费社区版具有地图功能。有了它，您可以将混淆的方法名称回溯到原始名称。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-16T11:10:42.157

我已经成功地将一个免费混淆器的输出[放入另一个混淆器](http://harriyott.com/2008/09/obfuscations-what-you-need-if-you-want.aspx)。在 Dotfuscator CE 中，仅包含一些混淆技巧，因此使用具有不同技巧的第二个混淆器会使其更加混淆。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T11:05:56.630

[使用.net 反射器](http://www.red-gate.com/products/reflector/)对 .net 应用程序进行逆向工程非常简单——因为该应用程序将直接从 MSIL 生成 VB、VC 和 C# 代码，并且可以提取各种有用的 gem。

代码混淆器很好地隐藏了大多数逆向工程黑客的代码，并且将是用于为您的应用程序增加价值的专有和竞争代码的好主意。

[有一篇关于混淆的很好的文章，它在这里工作](http://aspnet.4guysfromrolla.com/demos/printPage.aspx?path=/articles/080404-1.aspx)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T13:26:20.020

[这篇文章](https://stackoverflow.com/questions/31882/why-should-i-use-obfuscation#31902)和周围的问题有一些可能有价值的讨论。这不是一个是或否的问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2010-04-24T21:45:41.550

是的，你绝对应该。不是为了保护它免受一个有决心的人的伤害，而是为了获得一些利润并拥有客户。顺便说一句，如果您在这里达到某个点，有人试图破解您的软件，这意味着您销售的是流行的软件。

问题是为这项工作选择什么工具。查看我使用商业混淆器的经验：[https ://stackoverflow.com/questions/337134/what-is-the-best-net-obfuscator-on-the-market/2356575#2356575](https://stackoverflow.com/questions/337134/what-is-the-best-net-obfuscator-on-the-market/2356575#2356575)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2010-04-06T13:45:18.417

是的，我们有。我们使用 BitHelmet 混淆器。它是新的，但效果非常好。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2010-04-24T21:57:49.843

> 但是，真的值得选择、购买和使用这样的工具吗？

我发现 Eazfuscator 便宜（免费）且易于使用：大约需要一天时间。我已经进行了广泛的自动化测试（良好的覆盖率），所以我认为我可以找到任何由混淆引入的错误。

# windows - 如何在 Windows Vista 中模拟/替换/重新启用经典的混音器控件（或命令）？

> ID：71198
> 
> 赞同：3
> 
> 时间：2008-09-16T10:57:17.057
> 
> 标签：windows, audio, windows-vista, shoutcast, mixer

我有一个问题（现在已经有一段时间了）——Vista 中的新混音器堆栈具有新的很酷的东西，但也重新发明了轮子。许多过去在 Windows 系统上使用 Volume Mixer 将不同的有声输出混合到一个输入（例如 Wave-out + Line-in --> Stereo Mix）的应用程序已经停止工作。这种行为的主要例子是 Shoutcast DSP 插件（可能对解决方案测试有用）。

如何重新启用 XP 混音器控件，或者以某种方式模拟这种行为，以便程序 (SC DSP) 可以正确管理麦克风/线路输入播放音量以及 Wave-out 播放音量？

我的想法是模拟一个连接到 Vista 混音器中的程序，用于 Wave-Out 和 Line-out（或麦克风扬声器音量——所有播放，显示为单独的可调节“程序”，以便 Vista 混音器可以参考它）并在某种模拟下将其“挂钩”到系统中，该模拟将自己作为程序的旧音量混音器控制界面，但坦率地说，我不知道该怎么做。

澄清一下：这不是我的 PC（它是 HP Pavilion 笔记本电脑）。问题的存在似乎主要是因为 Vista 混音器控制单独的程序，而不是单独的输入/输出。硬件完全能够完成使用 Windows XP 时所需的操作。我很清楚这是一个驱动程序问题，但驱动程序只是为 Vista 通过接口呈现给程序员的内容而准备的。混音器设备 - 如在操作系统中所见，但它可能在软件中 - 基于用于 Windows 音频控制的混音器 API。

在 Vista 上使用 Google 搜索和线路输入播放音量控制以获取有关该问题的更多信息（以及受其影响的用户数量）。当然，为 WinAMP 重写 Shoutcast Source DSP 插件就可以了，但这不太可能发生……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-26T14:08:31.593

[可以使用音频端点 API](http://msdn.microsoft.com/en-us/library/ms679162(VS.85).aspx)在 Windows Vista 混音器中控制声卡的单独输入/输出电平

这应该允许您调整主音量，以及**连接**的音频输入的音量。关于这一点的一个问题是，当您枚举端点时，如果您的声卡中没有插入麦克风，则不会枚举任何内容。这意味着您需要更改应用程序以响应“麦克风插入”事件，并适当地通知用户。

另一种选择是低于 Microsoft Core Audio 并直接访问[WaveRT](http://www.microsoft.com/whdc/device/audio/wavertport.mspx)驱动程序。这比使用 WASAPI/Endpoint API 需要更多的工作，但可以让您最大程度地控制对声卡的输入/输出的访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T11:31:17.597

音频驱动程序控制哪些混音器控件可用，这在很大程度上取决于硬件的功能。

如果 Vista 驱动程序没有某些控件，那么很可能是该驱动程序的缺点，而不是 Vista 的缺点。

（请告诉我们您使用的是哪种声卡/设备。）

可以编写一个程序来创建自己的混音器控件（这将是虚拟声卡的纯软件驱动程序），但如果实际驱动程序，该程序将无法影响设备内部的音频路由对此没有一些混音器控制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-26T22:45:25.520

如果您将您的应用程序标记为以 Windows XP 兼容性运行，那么所有旧控件和行为都将恢复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-19T01:44:41.290

> 如果您将您的应用程序标记为以 Windows XP 兼容性运行，那么所有旧控件和行为都将恢复。

确实如此，但从包含在 SP2 中的 Vista SP1 补丁 KB957388 以及一些声卡驱动程序开始，当应用程序处于 XP 兼容模式时，旧的混音器 API (winmm.dll) 函数可能会挂起。特别是，mixerGetNumDevs 和少见的 mixerOpen 不会在某些计算机上返回。

在大约 200 个 Vista 用户中，我收到了来自 5 个 Vista 用户的报告，其中我的应用程序在启动时挂起，并且我已经追踪到这些功能挂起。

我想将此情况报告给 Microsoft，但找不到任何可以这样做的地方。

我现在所能做的就是在未启用兼容模式的情况下发布我的软件，但这会在我的应用程序中失去功能，并且该软件无法控制线路输入或麦克风混音器。

我没有时间直接使用低级 API 函数。我依赖高级组件，我找不到任何用于我的开发系统 (Delphi) 的新音频 API。

我有兴趣花钱请人为我写一个 DLL ！！！电子邮件 ross att stationplaylist dott com

# c# - 高流量 Web 服务的提示，c# asp.net sql2000

> ID：71201
> 
> 赞同：2
> 
> 时间：2008-09-16T10:57:40.377
> 
> 标签：c#, web-services, high-load

我正在开发一个 Web 服务，其方法将从“动态横幅”中调用，该横幅将显示从 sql server 表中读取的一种消息队列。

大流量网站首页的banner压力会比较大；每次加载横幅时，它都会调用我的 Web 服务，以获取新的消息队列。

现在：我不希望每次加载横幅时所有这些流量都会驱动对数据库的查询，所以我正在考虑使用 asp.net 缓存（即 HttpRuntime.Cache[cacheKey]）来限制数据库访问；我将尝试每分钟左右刷新一次缓存。

显然，我会尽量减少消息，以限制流量。

但也许还有其他方法可以处理这种情况；例如，我可以在文件系统上编写队列的最后一个版本，并让 Web 服务访问该文件；或者混合这两种方法的东西......

解决方案是c# web service，asp.net 3.5，sql server 2000。

有什么提示吗？其他方法？

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T12:10:15.180

这取决于很多事情：

*   如果数据几乎没有变化（想想带有“发布”按钮或每日批次的后端），那么我肯定会使用静态文件（通过从后端推送更新）。我们在几个大型网站上使用了这个解决方案，效果非常好。
*   如果数据足够小，内存缓存（即 Http Cache）是可行的，但要注意锁定问题，还要注意 Http Cache在内存负载过重的情况下**无法正常工作，因为如果框架需要内存，项目可能会提前过期。**我以前也被它咬过！有了上述注意事项，Http Cache 工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T11:03:42.080

我认为缓存是一种合理的方法，您可以更进一步并为其添加 SQL 依赖项。

[ASP.NET 缓存：SQL Server 2000 的 SQL 缓存依赖关系](http://www.c-sharpcorner.com/UploadFile/mosessaur/sqlcachedependency01292006135138PM/sqlcachedependency.aspx?ArticleID=3caa7d32-dce0-44dc-8769-77f8448e76bc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T11:35:55.183

写入文件是一个更好的解决方案恕我直言 - 它由 IIS 内核代码提供服务，没有巨大的 asp.net 开销，您可以稍后将文件复制到 CDN。

AFAIK 依赖兑现在 SQL Server 2000 中效率不高。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T11:41:29.290

如果你走文件路线，请记住这一点。

[http://petesbloggerama.blogspot.com/2008/02/aspnet-writing-files-vs-application.html](http://petesbloggerama.blogspot.com/2008/02/aspnet-writing-files-vs-application.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T21:48:54.790

此外，解决 Skliwz 提到的内存限制的一种方法是，如果您在正常应用程序之外使用此服务，则可以将其隔离在它自己的应用程序池中。我以前见过这样做，这也有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T08:43:29.910

谢谢大家，因为数据很小，但是基础表会改变，我想我会走 HttpCache 方式：我实际上需要一种减少数据库访问的方法，即使数据正在改变（这就是原因不使用@Bloodhound 建议的直接 Sql 依赖项）。

我想我会在上市前做一些压力测试。

再次感谢大家。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-01T09:56:31.747

当然，您也可以（应该）使用[SixPack 库](http://code.google.com/p/sixpack-library/)中的缓存功能。

*   基于 HttpCache 的前向（普通）缓存，它通过将属性放在您的类上来工作。使用最简单，但在某些情况下，您必须等待从数据库中实际获取内容。
*   预取缓存，从头开始，第一次调用后会开始在后台刷新缓存，在某些情况下保证你有内容而无需等待。

[有关SixPack 库主页](http://code.google.com/p/sixpack-library/)的更多信息。请注意，代码（尤其是前向缓存）是经过负载测试的。

下面是一个简单缓存的例子：

```
 [Cached]
    public class MyTime : ContextBoundObject
    {
            [CachedMethod(1)]
            public DateTime Get()
            {
                    Console.WriteLine("Get invoked.");
                    return DateTime.Now;
            }
    } 
```

# windows-installer - 将 Inno Setup 安装程序包装在 MSI 中以便通过 AD 进行分发是否可行/明智？

> ID：71203
> 
> 赞同：28
> 
> 时间：2008-09-16T10:58:14.963
> 
> 标签：windows-installer, inno-setup

我们的安装程序是用 Inno Setup 编写的，我们实际上对此非常满意。然而，一些客户不断要求他们可以更轻松地通过 Active Directory 分发的 MSI 安装程序。`/LOADINF`通过使用我们自己的选项扩展 Inno Setup 的机制，我们已经竭尽全力使安装程序能够很好地处理自动和无人值守的安装。

为了满足要求 MSI 的客户，我一直在考虑将我们的常规安装程序简单地包装在一个可能使用 WIX 创建的 MSI 中。问题是：我可以保持我们当前安装程序提供的高可配置性吗？在无人值守/大规模安装场景中，我将如何通过外部 MSI 公开 Inno Setup 安装程序的选项？

请注意，我自己还没有真正深入研究 MSI-creation 和 WIX。现在我只对知道他们在说什么的人是否认为这将是一种可行/明智的方法来首先投入我们的精力感兴趣......

[编辑：] 最初我认为我可以使用临时提取和执行方法，即 MSI 将简单地用作将 Inno 安装程序传送到目标 PC 并在`/VERYSILENT`-mode 下执行它的容器。但我想要求 MSI 的客户也希望能够从中心位置卸载甚至修改安装，我想在那种情况下这是不可能的，对吗？

PS：我们这里也有旧版的 WISE for MSI，但那次经历实际上是我们开始使用 Inno 的原因...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-16T11:11:48.097

不，没有办法在保持客户“隐含”要求的功能的同时做到这一点。您可以在 MSI 中做的唯一“包装”是在安装时将其解压缩并从您解压缩到的临时位置启动 InnoSetup 安装程序。MSI 是一种完全不同的工作方式：InnoSetup（和 NSIS 和大多数其他安装程序）采用以代码为中心的方法：您“编程”安装数据的“步骤”。MSI 是一个数据库，采用“以数据为中心”的方法：您指明应该安装哪些文件，其余的由 MSI 的“运行时”完成。这使您可以进行版本控制并精确控制去往何处。

简而言之，要为您的客户提供他们想要的东西（即，MSI 为 AD 带来的易于部署），您将需要“合适的”MSI。祝你好运，恕我直言，这是一个主要的痛苦。但是，一旦您掌握了 MSI 和 WiX，它确实会产生良好的效果。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-22T19:32:55.770

我自己也遇到过很多次这个问题。因此，我创建了一种解决此问题的标准方法，并生成了一个向导，将指导您完成这些步骤。该工具将支持以下内容：

1.  将 exe 包装在 MSI 中。
2.  支持卸载。
3.  在“添加或删除程序”中只显示一个程序。
4.  当您使用 MSIEXEC.EXE 运行 MSI 程序包时，允许您将命令行参数（例如 /SILENT）传递给嵌入式安装程序。

您可以在[http://www.exemsi.com](http://www.exemsi.com)获得它（基本版是免费的）

使用我的联系表格，让我知道您的想法 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T14:08:45.910

作为对您的编辑的回应：是的，您所描述的内容将阻止进行升级（删除/重新安装除外）和远程配置，因为 MSI 数据库对您的安装程序的内容一无所知。

但是，许多安装程序包以这种方式启动 MSI“支持”：例如，InstallShield 就是这样做的。这就是我抛弃它们的主要原因，因为以这种方式制作的安装程序对于 MSI 而言毫无用处。我不知道最新版本的 InstallShield 是否更好，我上次检查是 5 年前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-14T13:21:31.610

制作一个自动安装来自 MSI 的 INNOSETUPper 的包装工具包非常容易。对于基本功能（安装/卸载），这就足够了。大多数安装程序无论如何都不会实施修复。

1.  为 INNO 设置创建silent.inf 脚本（可选）

2.  创建调用的 install.bat

    myinnosetup.exe /silent /NOCANCEL /norestart /Components="xxx"

    您可以使用 /
    verysilent 您可以使用 /LOADINF="silent.inf" 从silent.inf 加载设置

3.  创建调用 install.bat 的 MSI 安装文件（如有必要，带有参数）

4.  将所有 4 个文件交付给您的客户，他们可以使用 SMS 或 ActiveDirectory 部署您的 Inno setupper，每个人都很高兴 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-03T22:08:48.290

我认为使用 MSI 包装的 Inno Setup 可以完成所有您想做的事情，但这绝非易事，而且使用 WiX 可能会使这项特定任务变得更加困难。简而言之，我不会真的推荐它。

但如果你真的想...

MSI 文件只是带有附加脚本指令的数据库文件，通常嵌入包含您实际要安装的内容的 .cab 文件。

如果您使用 Wise，您将生成默认脚本，然后您可以添加 Windows Installer 条件并更好地控制事件（安装、修复、修改、卸载），以便它们在您的 Inno Setup 安装脚本上调用等效操作，这将需要安装并保存在一个临时文件夹中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-08-07T14:10:11.160

混合安装技术是没有意义的。

如果您正在混合，您会遇到卸载内容的第一个问题。无需更改，您将获得 2 个程序的卸载程序。

“entwickler 杂志”中有一些以 windows 安装程序开头的文章

*   Entwickler Magazin (Ausgabe: 03.09/15.04.2009) 文章: MSI-Pakete mit Open-Souce-Software erzeugen Teil 4
*   Entwickler Magazin (Ausgabe: 02.09/12.02.2009) 文章: MSI-Pakete mit Open-Souce-Software erzeugen Teil 3
*   Entwickler Magazin (Ausgabe: 01.09/10.12.2008) 文章: MSI-Pakete mit Open-Souce-Software erzeugen Teil 2
*   Entwickler Magazin (Ausgabe: 06.08/15.10.2008) 文章: MSI-Pakete mit Open-Souce-Software erzeugen

[http://entwickler-magazin.de/](http://entwickler-magazin.de/)

windows 安装程序应该是您安装的唯一技术。它的未来证明和稳定！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-17T19:36:18.907

将 Inno Setup 包装在 MSI 包中并非易事。但是，这是可能的。有很多免费工具可用于执行此操作。您应该选择一个也支持卸载和升级的。

我发现只有一个支持升级和卸载的免费工具。查看[http://www.exemsi.com/inno-setup-and-msi](http://www.exemsi.com/inno-setup-and-msi)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T12:26:43.813

这样做几乎等同于交付一个 ZIP 文件并在安装结束时调用 unzip。

使用这种方法，AD 和 Windows Installer 会被愚弄，就好像处理正确的 MSI 安装一样，但事实并非如此，它们会在第一次时适得其反。

不要走这条路。

无论如何，WiX 是优于 InnoSetup 的工具集，因此您花在学习和移植上的时间将通过更好地支持协作而得到回报。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-24T01:17:28.180

尽管最后一条评论是可行且可行的，但移至 MSI 是处理此问题的最佳方法。

几乎所有大型组织都只规定 MSI，原因有很多。

1) 首先是易于部署 2) 对某些人来说更重要的是应用程序社交性 3) 自我修复

没有实现 Windows Installer 的 inno setup 和其他此类工具根本无法以与 Windows Installer 相同的方式提供应用程序社交性。

您必须了解 Inno setup 是旨在部署单个应用程序的软件。

Windows Installer 是一个完整的框架，用于处理社交性、用户模拟、用户提升、自我修复、用户配置文件修复。

他们两个在功能上甚至都不是很接近，在我看来，与 Windows 安装程序相比，我的任何设置都完全偏离了轨道。

它可以创建成功的安装程序吗？是 容易使用吗？是的 它是否创建了良好的单一安装程序？是 是企业的最佳选择吗？不

微软“SMS Installer”最早开发的工具是10年前的innosetup。安装世界的情况发生了翻天覆地的变化，inno setup 根本没有跟上这种变化的步伐。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-13T14:29:32.940

我需要在silent.inf 上输入一个custome 值（不是一个稳定的inno setup 设置值）看起来像LOADINF 允许的那样。

注意：如果您使用 makemsi，则不必包含 bat，因为您可以使用 $WrapInstall。

# sql-server - sqlserver express 数据库复制选项

> ID：71204
> 
> 赞同：0
> 
> 时间：2008-09-16T10:58:21.000
> 
> 标签：sql-server, sql-server-express

为什么在我的数据库上看不到复制数据库对象的**选项**`right click > tasks`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T11:33:22.757

MS Sql Server Express 不附带 SSIS，这是您从数据库中导入/导出对象所需要的。

您也可以手动编写此过程的脚本。一种方法是使用 BCP ( [http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T13:01:08.537

看看 Red Gate [SQL 比较](http://www.red-gate.com/products/SQL_Compare/index.htm)和[SQL 数据比较](http://www.red-gate.com/products/SQL_Data_Compare/index.htm)。

您可以下载试用版并使用它们构建一个脚本，将您的对象转储到 .sql 文件中。

# php - TYPO3：如何在我自己的扩展中呈现 tt_content 文本元素？

> ID：71223
> 
> 赞同：6
> 
> 时间：2008-09-16T11:00:39.090
> 
> 标签：php, typo3

我目前正在编写一个配置有`tt_content`UID 列表的 TYPO3 扩展。这些指向“文本”类型的内容元素，我想通过我的扩展来呈现它们。

由于 TYPO3 在富文本编辑中输入的文本进入数据库时​​转换的特殊方式，并在呈现到前端时再次进行转换，因此我不能只输出`bodytext`字段的数据库内容。

我想渲染这些文本，因为它们通常会由 TYPO3 渲染。我怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-04-07T13:31:30.413

## PHP

这对我行得通; 它呈现具有给定 ID 的任何内容元素：

```
function getCE($id)
{
    $conf['tables'] = 'tt_content';
    $conf['source'] = $id;
    $conf['dontCheckPid'] = 1;
    return $GLOBALS['TSFE']->cObj->cObjGetSingle('RECORDS', $conf);
} 
```

见[http://lists.typo3.org/pipermail/typo3-dev/2007-May/023467.html](http://lists.typo3.org/pipermail/typo3-dev/2007-May/023467.html)

这也适用于非缓存插件。你会得到一个类似的字符串`<!--INT_SCRIPT.0f1c1787dc3f62e40f944b93a2ad6a81-->`，但是 TYPO3 会在下一次 INT 渲染过程中用真实的内容替换它。

## 体液

如果您使用的是流体模板，则[VHS`content.render`视图助手](https://fluidtypo3.org/viewhelpers/vhs/master/Content/RenderViewHelper.html)很有用：

```
<v:content.render contentUids="{0: textelementid}"/> 
```

如果您的流体内容元素本身有一个网格，您可以使用通量自己的`content.get`或`content.render`视图帮助器渲染元素：

```
<f:section name="Configuration>
    ... <flux:grid.column name="teaser"/> ...
</f:section>
<f:section name="Main>
    <flux:content.render area="teaser"/>
<f:section> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T11:09:52.453

几个月前我遇到了同样的问题。现在我必须说我不是typo3开发人员，所以我不知道这是否是正确的解决方案。

但我使用了这样的东西：

`$output .= $this->pi_RTEcssText( $contentFromDb );`

在我的扩展中，它可以工作。

# winforms - DataGridViewCheckBoxCell 类型的 DataGridView 列始终处于只读/禁用状态

> ID：71226
> 
> 赞同：5
> 
> 时间：2008-09-16T11:01:22.647
> 
> 标签：winforms, datagridview, datagridviewcheckboxcell

我正在使用 .NET Windows Forms DataGridView，我需要编辑一个 DataBound 列（绑定在一个布尔 DataTable 列上）。为此，我指定了这样的单元格模板：

DataGridViewColumn 列 = new DataGridViewColumn(new DataGridViewCheckBoxCell());

你看我需要一个 CheckBox 单元格模板。

我面临的问题是该列一直是只读/禁用的，就好像它是 TextBox 类型一样。它根本不显示复选框。

关于如何使用 DataGridView 的可编辑复选框列的任何想法？

更新：对于 Windows 窗体，请。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T08:53:50.510

Well, after more than 4 hours of debugging, I have found that the DataGridView row height was too small for the checkbox to be painted, so it was not displayed at all. I have found this after an accidental row height resizing.

As a solution, you can set the AutoSizeRowsMode to AllCells.

`richDataGrid.AutoSizeRowsMode = System.Windows.Forms.DataGridViewAutoSizeRowsMode.AllCells;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T16:36:01.030

不要尝试在代码中创建列，而是单击 DataGridView 控件右上角的框中的小箭头，然后从出现的菜单中选择“编辑列...”。在对话框中，单击“添加”按钮，然后选择“数据绑定列”选项并选择要绑定的布尔列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T11:06:37.313

创建一个 TemplateField 并将 id 绑定到它，如下所示：

```
<asp:TemplateField HeaderText="Whatever" SortExpression="fieldname" ItemStyle-HorizontalAlign="Center">
    <ItemTemplate>
        <asp:CheckBox runat="server" ID="rowCheck" key='<%# Eval("id") %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

# mobile - 有没有办法在 BREW 3.0 平台上使用 Lua？

> ID：71239
> 
> 赞同：4
> 
> 时间：2008-09-16T11:04:30.143
> 
> 标签：mobile, lua, brew-framework

看起来[BREW](http://brew.qualcomm.com/brew/) 4.0 将包含 Lua。但是是否可以在旧版 BREW 3.0（甚至 BREW 2.0）上使用 Lua？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T15:23:52.937

这是可能的，但是您必须将 lua 解释器源代码链接到您的应用程序源代码并包装 BREW API 函数才能在 lua 脚本中使用它们。

查看[LuaBREW](http://luaforge.net/projects/luabrew)项目作为我在上面简要解释的方法的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-25T12:55:45.920

我们这样做了。我将 Lua 移植到 BREW，将它变成了一个 uiOne 演员。工作得很好，花了大约 3 天的时间让它正常工作，主要是在演员方面。据我回忆，没有任何东西不能在 BREW 2.1 上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T14:40:32.060

我们不等待 BREW 4.0。我们现在正在编写我们的 LuaBREW 实现。

# gdb - 使用某种 gui 远程调试包含 gdb 的嵌入式系统

> ID：71248
> 
> 赞同：4
> 
> 时间：2008-09-16T11:06:10.607
> 
> 标签：gdb

我想使用某种 gui（例如 ddd）远程调试包含 gdb 的嵌入式系统。嵌入式系统没有源代码或构建符号。但是我的本地 x windows 框有。然而，执行必须发生在嵌入式系统上。我如何从我的开发盒中使用一些 gui 远程驱动 gdb？

leds 和 jtag 不是一个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T11:09:05.437

我认为，gdbserver 可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-01-13T01:16:01.070

在远程目标上：

```
target> gdbserver localhost:1234 <application> 
```

在主机（构建机器）上：

```
host> gdb <application> 
```

请注意，可能会从符号中删除 on 目标。但是主机可能具有所有符号。

```
gdb> set <path-to-libs-search>
gdb> target remote <target-ip>:1234
gdb> break main
gdb> cont 
```

如果可行，请在主机上获取一些 GDB gui 并尝试复制相同的设置。（为此，我使用了 SlickEdit 和 eclipse）。

# internet-explorer - 强制 Internet Explorer 使用特定的 Java 运行时环境安装？

> ID：71254
> 
> 赞同：46
> 
> 时间：2008-09-16T11:07:28.683
> 
> 标签：internet-explorer, internet-explorer-6, java, plugins

在查看其他人的包含小程序的网页时，我如何强制 Internet Explorer 6.0 在我安装了多个 JRE 时使用特定的 JRE？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2008-11-10T11:27:55.793

首先，禁用当前安装的 Java 版本。为此，请转到**Control Panel > Java > Advanced > Default Java for Browsers**并取消选中**Microsoft Internet Explorer**。

接下来，启用您要使用的 Java 版本。为此，请转到（例如）**C:\Program Files\Java\ *jre1.5.0_15* \bin**（其中**jre1.5.0_15**是您要使用的 Java 版本），然后运行**​​javacpl.exe**。转到**Advanced > Default Java for Browsers**并检查**Microsoft Internet Explorer**。

要恢复旧版本的 Java，您需要反转这些步骤。

请注意，在旧版本的 Java 中，**浏览器的默认 Java**称为**<APPLET> 标记支持**（但效果相同）。

这种方法的好处是不影响其他浏览器，也不影响默认的系统JRE。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2010-06-22T04:49:15.423

我今天也有同样的问题，我同意 Jack Leow 的观点。基本上，在 Windows XP 上，我必须转到控制面板 > Java，然后：

1.  Java 选项卡
2.  点击“查看”按钮
3.  仅启用我想要的 JRE（即 JRE 1.5.x 并保持 1.6.x 禁用）
4.  重启 IE
5.  在 IE 中加载小程序页面
6.  瞧，它正在加载正确的 JRE 版本！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T11:20:13.647

对于服务器端解决方案（您的问题最初是模棱两可的），[这个页面在 sun](http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/using_tags.html)列出了一种指定 JRE 的方法。具体来说，

```
<OBJECT 
  classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"
  width="200" height="200">
  <PARAM name="code" value="Applet1.class">
</OBJECT> 
```

> classid 属性标识要使用的 Java 插件版本。
> 
> 以下是 classid 属性的另一种形式：
> 
> ```
> classid="clsid:CAFEEFAC-xxxx-yyyy-zzzz-ABCDEFFEDCBA" 
> ```
> 
> 在这种形式中，“xxxx”、“yyyy”和“zzzz”是四位数字，用于标识要使用的 Java Plug-in 的特定版本。
> 
> 例如，要使用 Java 插件版本 1.5.0，您需要指定：
> 
> ```
> classid="clsid:CAFEEFAC-0015-0000-0000-ABCDEFFEDCBA" 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-10T11:48:39.137

我会先尝试这里的所有回复。但我只想把我所做的事情扔进去，以防万一这些对你不起作用。

我曾尝试解决您之前遇到的相同问题，最后，我决定在给定时间只在我的系统上安装一个 JRE。我确实有大约 10 种不同的 JDK（1.3 到 1.6，并且来自不同的供应商 - Sun、Oracle、IBM），因为我确实需要它来进行开发，但只有一个独立的 JRE。

这对我在家里的 Windows 2000 + IE 6 计算机以及工作中的 Windows XP + Multiple IE 计算机上都有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-10-04T07:20:17.743

正如此处针对 JRE6 和 JRE5 所提到的，我将针对 JRE1.4 进行更新：

您将需要在您的 java 安装的 jre/bin 目录中运行**jpicpl32.exe应用程序（例如****c:\java\jdk1.4.2_07\jre\bin\jpicpl32.exe**）。

这是 Daniel Cassidy 的帖子中提到的应用程序的早期版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T12:21:01.020

使用[部署工具包](http://java.sun.com/javase/downloads/ea/6u10/deploymentToolkit.jsp)的[deployJava.js](http://java.com/js/deployJava.js)（尽管这确保了最低版本，而不是特定版本）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-23T10:17:28.117

您可以指定要使用的 JRE 系列。 [http://www.oracle.com/technetwork/java/javase/family-clsid-140615.html](http://www.oracle.com/technetwork/java/javase/family-clsid-140615.html)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-16T12:29:20.470

如果您的意思是当您不是编写网页的人时，那么您可以在 Win XP SP2 中添加的“[管理加载项IE 选项”屏幕中禁用您不希望使用的加载项](http://windowsxp.mvps.org/addons.htm)

# c# - C#中的暂停进程

> ID：71257
> 
> 赞同：27
> 
> 时间：2008-09-16T11:07:34.283
> 
> 标签：c#, .net

如何在 C# 中暂停整个进程（就像我单击暂停时进程资源管理器所做的那样）。

我正在使用 Process.Start 启动进程，并且在某个事件中，我想暂停该进程以便能够对它的“快照”进行一些调查。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-09-16T11:43:18.910

这是我的建议：

```
 [Flags]
    public enum ThreadAccess : int
    {
      TERMINATE = (0x0001),
      SUSPEND_RESUME = (0x0002),
      GET_CONTEXT = (0x0008),
      SET_CONTEXT = (0x0010),
      SET_INFORMATION = (0x0020),
      QUERY_INFORMATION = (0x0040),
      SET_THREAD_TOKEN = (0x0080),
      IMPERSONATE = (0x0100),
      DIRECT_IMPERSONATION = (0x0200)
    }

    [DllImport("kernel32.dll")]
    static extern IntPtr OpenThread(ThreadAccess dwDesiredAccess, bool bInheritHandle, uint dwThreadId);
    [DllImport("kernel32.dll")]
    static extern uint SuspendThread(IntPtr hThread);
    [DllImport("kernel32.dll")]
    static extern int ResumeThread(IntPtr hThread);
    [DllImport("kernel32", CharSet = CharSet.Auto,SetLastError = true)]
    static extern bool CloseHandle(IntPtr handle);

private static void SuspendProcess(int pid)
{
  var process = Process.GetProcessById(pid); // throws exception if process does not exist

  foreach (ProcessThread pT in process.Threads)
  {
    IntPtr pOpenThread = OpenThread(ThreadAccess.SUSPEND_RESUME, false, (uint)pT.Id);

    if (pOpenThread == IntPtr.Zero)
    {
      continue;
    }

    SuspendThread(pOpenThread);

    CloseHandle(pOpenThread);
  }
}

public static void ResumeProcess(int pid)
{
  var process = Process.GetProcessById(pid);

  if (process.ProcessName == string.Empty)
    return;

  foreach (ProcessThread pT in process.Threads)
  {
    IntPtr pOpenThread = OpenThread(ThreadAccess.SUSPEND_RESUME, false, (uint)pT.Id);

    if (pOpenThread == IntPtr.Zero)
    {
      continue;
    }

    var suspendCount = 0;
    do
    {
      suspendCount = ResumeThread(pOpenThread);
    } while (suspendCount > 0);

    CloseHandle(pOpenThread);
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-28T14:40:37.990

感谢马格努斯

包含标志后，我稍微修改了代码，使其成为我项目中的扩展方法。我现在可以使用

```
var process = Process.GetProcessById(param.PId);
process.Suspend(); 
```

这是那些可能感兴趣的人的代码。

```
public static class ProcessExtension
{
    [DllImport("kernel32.dll")]
    static extern IntPtr OpenThread(ThreadAccess dwDesiredAccess, bool bInheritHandle, uint dwThreadId);
    [DllImport("kernel32.dll")]
    static extern uint SuspendThread(IntPtr hThread);
    [DllImport("kernel32.dll")]
    static extern int ResumeThread(IntPtr hThread);

    public static void Suspend(this Process process)
    {
        foreach (ProcessThread thread in process.Threads)
        {
            var pOpenThread = OpenThread(ThreadAccess.SUSPEND_RESUME, false, (uint)thread.Id);
            if (pOpenThread == IntPtr.Zero)
            {
                break;
            }
            SuspendThread(pOpenThread);
        }
    }
    public static void Resume(this Process process)
    {
        foreach (ProcessThread thread in process.Threads)
        {
            var pOpenThread = OpenThread(ThreadAccess.SUSPEND_RESUME, false, (uint)thread.Id);
            if (pOpenThread == IntPtr.Zero)
            {
                break;
            }
            ResumeThread(pOpenThread);
        }
    }
} 
```

我完成了一个实用程序，我通常用它来暂停/杀死/列出一个进程。完整源代码[在 Git 上](https://github.com/SarathR/ProcessUtil.git)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-02T07:49:46.427

所以真的，其他答案显示的是暂停进程中的线程，没有办法真正暂停进程（即在一次调用中）......

一个不同的解决方案是实际调试您正在启动的目标进程，请参阅[Mike Stall 的博客](http://blogs.msdn.com/jmstall/archive/2006/07/03/managed-Vs-native-apis.aspx)，了解如何从托管上下文中实现这一点的一些建议。

如果您实现调试器，您将能够扫描内存或您想要的其他快照。

但是，我想指出，从技术上讲，现在有办法真正做到这一点。即使您对目标被调试进程进行调试，系统上的另一个进程也可能会注入一个线程，并且无论目标进程的状态如何，都将获得执行代码的能力（甚至假设它是否由于访问冲突而遇到断点） )，如果您将所有线程挂起到超高挂起计数，当前处于主进程线程中的断点以及任何其他此类假定冻结状态，则系统仍然可以将另一个线程注入该进程并执行一些指令。您还可以通过修改或替换[内核通常调用的所有入口点的麻烦](http://www.nynaeve.net/?p=205)依此类推，但您现在已经进入了恶意软件的粘性军备竞赛；）...

在任何情况下，使用托管接口进行调试似乎比 p/invoke'ng 很多本机 API 调用要容易得多，这将在模拟你可能真正想做的事情方面做得很差......使用调试 api ;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T11:13:16.517

有关 win32 基础知识，请参阅此 CodeProject 文章：http: [//www.codeproject.com/KB/threads/pausep.aspx](http://www.codeproject.com/KB/threads/pausep.aspx)。此示例代码使用 SDK 中的 ToolHelp32 库，因此我建议将此示例代码转换为具有简单接口的非托管 C++/CLI 库，例如“SuspendProcess(uint processID).

Process.Start 将返回一个 Process 对象，您可以从中获取进程 ID，然后根据上述内容将其传递给您的新库。

戴夫

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-18T00:44:46.017

```
[DllImport("ntdll.dll", PreserveSig = false)]
    public static extern void NtSuspendProcess(IntPtr processHandle);
    static IntPtr handle;

        string p = "";
        foreach (Process item in Process.GetProcesses())
        {
            if (item.ProcessName == "GammaVPN")
            {
                p = item.ProcessName;
                handle = item.Handle;
                NtSuspendProcess(handle);
            }
        }
        Console.WriteLine(p);
        Console.WriteLine("done"); 
```

# project-management - 时间管理技巧、工具和技巧

> ID：71273
> 
> 赞同：16
> 
> 时间：2008-09-16T11:09:53.890
> 
> 标签：project-management, project-planning, time-management

日常使用软件通常意味着您必须兼顾项目工作、会议、电话和其他中断。

你觉得在管理时间方面最有用的单一技术、技巧或工具是什么？

你如何保持专注？

你工作中最大的分心是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-16T11:19:58.327

[Getting Things Done](http://www.davidco.com/)系统教导的技巧是拥有一个可信任的系统，您可以将操作项放入其中。这样你就不必继续“杂耍”了。用这个比喻来说，你可以放下其他球，并相信它们不会被遗忘。然后你可以一次专注于一个球。GTD 还教授了很多很多其他优秀的技巧。很值得[入手的书](https://rads.stackoverflow.com/amzn/click/com/0142000280)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-16T11:15:55.670

我在某处读过这条规则，我每天都在使用它......

*   如果有人要求您做某事——如果不到 2 分钟，请立即执行。如果它需要更长的时间，把它放在你的清单上，然后再回来。

这真的对我有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-04T17:48:01.323

你应该看到这个：

# [Randy Pausch 讲座：时间管理](http://www.youtube.com/watch?v=oTugjssqOT0)

来自卡内基梅隆大学的一位濒临死亡的老师，正在给他关于时间管理的最后一堂课。这是您能找到的最佳提示和技巧。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-16T11:22:56.870

为了管理工作的一般混乱，我尝试使用[GTD](http://en.wikipedia.org/wiki/Getting_Things_Done)的低调版本，主要专注于尝试维护[收件箱零](http://www.43folders.com/izero)并将任务推入待办事项列表（我使用[Remember the Milk](http://rmilk.com)进行任务列表管理）。

至于在中断的情况下保持流程，让 TDD 项目处于测试失败的状态往往会给你一个地方，当你从会议或其他中断回来时可以立即跳回去。留下一批未提交的更改可能会达到类似的目的——让您立即回到项目流程中，而不必四处查看以提醒自己处于什么状态。除此之外，使用相当详细的任务列表手头的项目可以帮助您完成任务并继续前进。

很多时候，我发现我的经理的经理是最大的干扰！:-) 他喜欢沉浸在他的开发团队的日常工作中，并经常“四处走走”看看事情进展如何。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T11:13:10.263

我发现电子邮件最让人分心，所以我真的严厉打击接收某些类型的电子邮件。我已经取消了许多邮件列表、工作提醒等的订阅。在一天中关闭电子邮件也非常有用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T11:23:27.257

我喜欢去图书馆。安静但忙碌、集中的气氛基本上迫使你工作。场地的变化似乎也排除了您日常生活中的一些忙碌和担忧。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T11:28:56.357

我使用大部分 ZTD（[http://zenhabits.net/2007/11/zen-to-done-the-simple-productivity-e-book/](http://zenhabits.net/2007/11/zen-to-done-the-simple-productivity-e-book/)）。GTD 对我来说太复杂和太大了。

基本上，我会列出任务。每天早上我都会选择当天真正需要做的三个。我在他们身上工作，直到他们完成。我努力不被拖到其他事情上。

在办公室，我有时会预订一间会议室并在那里工作，不受干扰。当我完成三项最重要的任务后，我从巢穴中出来。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-16T11:56:43.900

鼓励人们将他们与您的通信推到分散注意力的链条上：

1.  电话/面对面
2.  即时通讯
3.  电子邮件

你可以通过推迟他们来做到这一点：“我现在真的很忙，你可以通过电子邮件发送给我吗？”

这应该会减少您收到的中断数量，让您可以在“区域”停留更长的时间，从而提高您的工作效率。

最后，分配时间在一天中的设定时间处理电子邮件。例如，我将电子邮件设置为每两个小时发送和接收一次。这种大量的活动使您可以在不影响客户关系的情况下在一天中完成更多工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T11:41:22.393

我最大的一个分心就是我自己——我往往会胡思乱想，大部分时间都在追逐电子邮件和互联网链接。因此，我正在使用一个简单的技巧来训练自己在一天的大部分时间里保持专注和专注于任务。原则是对我的时间使用负责：

1）在您的操作系统中有一个预定的作业，每 15 分钟弹出一个小消息框（在 Windows 中，它应该运行命令`C:\windows\system32\cmd.exe /C "start /B msg jpretori /W /V "15-minute check""`）

2) 在系统托盘中运行 IDailyDiary（文本文件也可以正常工作）。每次弹出该框时，请填写您在过去 15 分钟内所做的事情。

我之前发现自己度过了一个充满拖延的丑陋日子……这是一个很好的动力来继续完成任务。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T13:00:47.350

最近我开始使用一个很棒的免费 Windows 应用程序**NextAction**，你可以从[这里](http://www.timesnapper.com/NextAction/)获得。

它的伟大来自于它的简单性，它确实有助于在处理整天分心的事情时重新集中注意力并保持在正轨上……电子邮件、同事、scrums、RSS 提要、推特、午餐、茶歇等。我一直在桌面上工作的内容使得在任何上下文切换后都可以轻松聚焦。

比铅笔和纸好多了，自己检查一下。

[注意：在code.google](http://code.google.com/p/trimpath/wiki/NextAction)上有一个更全面的基于网络的“NextAction” ……对我来说不是很好，但可能对其他人来说。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T12:43:13.027

我能给出的最有用的时间管理建议就是继续做下去。如果某件事需要不到 5 分钟的时间来完成，那么现在就去做。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T11:19:26.253

你也可以考虑让你想浏览网络、查看电子邮件等的事情。例如，如果我正在处理的构建时间太长，我的思绪会飘忽不定。

因此，使构建过程尽可能快速和高效实际上是值得的，这样您就可以快速进行更改和测试。

我还发现它有助于获得足够的睡眠（疲劳不利于集中注意力）并且不要喝太多咖啡因（说真的。减少我喝的咖啡因后我感觉好多了。试试天然不含咖啡因的茶！）

（我似乎有点跑题了……不过，我发现我越能集中注意力，我就越会利用时间！）

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T11:22:02.503

如果你想改进某件事，你首先必须衡量它。

我喜欢[救援时间](http://rescuetime.com)。它会记录您访问的所有应用程序和网站以及您在那里花费的时间。您可以标记应用程序/网站，即使用“工作”、“浪费”、“新闻”并获得漂亮的图表、生产力指标等。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-16T11:16:53.560

对所有列出的问题的单一答案是 David Ellen 的 Getting Things Done (GTD)（“无压力生产力的艺术”）

[可以在 youtube 上找到](http://www.youtube.com/watch?v=Qo7vUdKTlhk)45 分钟的过程演示，您可以在[亚马逊](https://rads.stackoverflow.com/amzn/click/com/0142000280)上获得这本书

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-16T11:55:47.757

我发现[http://www.rescuetime.com/](http://www.rescuetime.com/)让我知道我整天实际上在做什么，而不是我认为我在做什么！

它还可以让您在您运行或执行的每个流程/网站上设置一个“生产力”级别，以便您可以看到自己的生产力。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T13:27:21.093

对程序员来说可能比 GTD 更好的是[系统管理员的时间管理](https://rads.stackoverflow.com/amzn/click/com/0596007833)。相同的基本原则（减少干扰，保留清单），但更偏向于书呆子。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T12:29:57.643

关于“如何保持专注”，我认为一旦您决定关闭电子邮件并打开手机发送，接下来要控制的事情就是您周围可能会扰乱您的想法的声音。人说话，电话响，等等。

我已经开始戴上耳机并浏览[http://www.simplynoise.com/](http://www.simplynoise.com/)。这是一个噪声发生器，可让您选择白色、粉红色或棕色/红色噪声。它淹没了大部分经常影响我注意力的音频干扰。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T12:36:45.787

保持高效：当我在做一个无聊的项目并注意到除了阅读新闻之外我没有做任何有用的事情时，我会设置一个计时器。很简单，将您的手机设置为 1-2 小时计时器。在此期间工作。当计时器响起时，休息一下，自我感觉良好 :)

出于某种原因，这有效（对我和我认识的其他几个人来说）！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-16T13:54:41.170

我关闭电子邮件并听舒缓的音乐。当然，这种策略实际上是为了尽量减少分心。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-16T11:25:14.913

（有点题外话）

他们说没有时间管理这回事。您无法管理一个小时并从中获得额外的 20 分钟。好吧，我最近发现你可以。如果您正在收听播客或观看重新编码的网络广播，您可以加快播放速度。我发现它还可以帮助我专注于内容，而不是在自然停顿期间开始检查我的电子邮件。然后我看到了[杰夫关于同一主题的帖子](https://blog.stackoverflow.com/2008/06/listen-to-podcasts-in-less-time/)。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-16T11:27:30.040

电子邮件、即时消息、Skype……所有这些都会分散注意力。但最大的干扰是当我的同事问我为什么我用这种方式而不是那种方式编写了一些年前的算法。即使我知道答案，它也会让我的工作停止。

为了阻止这种干扰，我们每小时在办公室外有 5 分钟的休息时间，我们可以讨论这些问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-16T11:28:05.000

有很多事情要做，我不确定您是否会找到任何单一的技术来组织并保持专注。

但...

*   列出你必须做的事情。将需要几个简短的列表（今天，稍后，收件箱 == 被整理，等等......）。早上查看这些列表一次，然后在晚上查看。这些相关的帖子值得一读：[The Taste of the Day](http://www.randsinrepose.com/archives/2008/07/22/the_taste_of_the_day.html)和[The Trickle List](http://www.randsinrepose.com/archives/2008/08/18/the_trickle_list.html)
*   时间盒：在日历中分配时间以完成任务
*   正如哈里约特所建议的那样，关闭电子邮件也是必不可少的！

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-16T11:15:33.673

单身最有用？[http://www.nowdothis.com](http://www.nowdothis.com)非常棒，因为它专注于当前需要完成的工作，并且大大提高了我的工作效率。（额外提示：使用 Google Chrome 使其成为自己的应用程序，然后使该应用程序始终位于其他窗口之上）

最大的干扰？谷歌读者。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-16T11:43:24.230

这个问题已经被问过了，所以你可以搜索一下。

我个人使用[Zen to done](http://zenhabits.net)，它是“Get Things Done”的简化版本。对于**受信任的系统**，我为自己托管[Tracks](http://www.rousette.org.uk/projects/)应用程序。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-16T11:47:02.333

在保持专注的同时完成大量工作的最佳方法是在开始之前在纸上列出您的优先事项。试图在你的脑海中保留一个大清单是拖延的必经之路。另外，在完成项目时打勾是一种很棒的感觉。放点音乐，关掉你的电子邮件，然后开始忙碌。

但是你有一些人试图引起你的注意。确保您的同事和客户知道您更愿意通过电子邮件而不是亲自或通过电话接收他们的查询。虫子直接进入跟踪系统，无需任何人为每个虫子拍你的肩膀。听起来很明显，但是停下来讨论某事 5 分钟有时会在你重新集中注意力时损失 30 分钟的工作效率。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-16T11:50:55.833

[您可以在Wouter van Oortmerssen](http://strlen.com/)（又名 Aardappel，著名的开源游戏（如[cube](http://www.cubeengine.com/)和[http://sauerbraten.org/](http://sauerbraten.org/)）的开发者）中找到有关时间管理的精彩文档

我说的这篇文章是[这样的](http://strlen.com/rants/timemanagementetc.html)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-16T12:20:01.973

我猜你在追求一些实用的东西。我所做的就是让我的行动项目远离我的工作环境，这有助于让我保持专注。我在桌子旁边放了一个垫子，我在顶部写下当天的每个行动项目，然后在中途开始记笔记。当我完成一项任务时，我将其勾选，任何未勾选的内容都可以延续到第二天（如果它仍然相关）。使用它大约 3 年，我发现它让我保持高效并帮助我记住事情。我已经尝试了各种软件解决方案，没有什么比我更适合了。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-16T12:25:57.187

我有一台旧笔记本电脑，我从中取出无线网卡，然后坐在一个完全安静的房间里，远离干扰。没有互联网我无法完成的事情就留到以后吧。我最大的问题是我很想找到一个解决方案，最后花了 30 分钟研究一个博主顺便提到的东西。我仍然发现我需要一个小时才能进入不分散自己注意力的流程。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-16T13:01:35.727

我可以推荐的最有价值的工具是**“待办事项”列表**。

这可能采用专门的[应用程序](http://www.codeplex.com/todo)、[小工具](http://www.google.com/ig/directory?q=todo&hl=en&root=%2Fig&dpos=top&url=www.google.com/ig/modules/todo.xml)或笔和纸的形式，但是要记住的最重要的事情是，新任务应该添加到列表的*底部*，并且要启动的任务必须从*顶部*开始- 即。**不要挑剔你的任务**，因为这会给你留下一个充满耗时（而且通常很无聊）的工作的任务列表，这些工作会开始拖你的后腿。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-05-19T11:10:11.347

兰迪的演讲很棒，尤其是因为他知道自己在这个世界上没有多少时间了。

会议是最大的浪费时间。尽量避免它们。

我不相信那些经常弹出来问我目前在做什么的工具。这也很让人分心。

做一个几周的时间日志可能会很好，但只是为了了解你把时间花在哪里，这样你就可以改进事情。

我喜欢 Steven Covey 的时间管理东西。

...顺便说一句，我是 IEEE 欧洲/中东和非洲的时间管理讲师。

# mobile - 为多个移动设备构建单一应用程序

> ID：71277
> 
> 赞同：2
> 
> 时间：2008-09-16T11:10:48.037
> 
> 标签：mobile, brew-framework, brewmp

是否可以为多个移动设备（在[BREW](http://brew.qualcomm.com/brew/)平台上）构建一个应用程序二进制文件，而不是使用带有条件编译的构建脚本为每个设备单独构建。

特别是可以为多个屏幕分辨率使用单个 BREW 应用程序构建吗？

请注意，目标是生成单个*二进制文件*。如果只是拥有一个代码库，那么条件编译和智能构建脚本就可以解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T18:03:34.737

是的，有可能，我们能够在我以前的工作地点做到这一点。但是，所需的内容很棘手：

1.  编译为最低公分母 BREW 版本。1.1 版是目前所有手机的基础。
2.  您的代码必须能够处理多种分辨率。根据我的经验，检测屏幕宽度和高度的方法对于所有手机都是准确的。
3.  您的所有资源都必须加载到所有设备上。这将需要制作您自己的自定义图像加载器来解决某些设备问题。对于声音，我知道简单的 MIDI 类型 0 适用于所有但 QCP 也应该有效（我自己没有经验）。
4.  使用位图字体。字体存在太多设备问题，因此值得使用系统字体。
5.  将您的代码结构设计为有限状态机。我怎么强调都不过分——这样做，很多很多问题永远不会出现。
6.  为每个设备问题提供解决方法。这是最难的部分！这是可能的，但这个兔子洞非常深......

最后，应用程序越复杂和高级，您走这条路的可能性就越小。某些设备属性在运行时根本无法可靠地检测到（例如平台 ID），因此需要多次构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T18:19:20.273

我写了一个 J2ME 到 Brew 的转换，用于 Javaground。编写多分辨率的单个二进制代码是很有可能的。我们有一个设备错误数据库，因此它可以通过平台 ID 检测设备，然后生成一系列标记来标记哪些错误被标记。例如，大多数（如果不是全部）摩托罗拉 Brew 手机都有一个错误，即在您接听电话之前，来电不会中断应用程序，因此我使用 TAPI 来监视来电并生成 hideNotify 事件（因为我们是模拟 Java，尽管生成的代码是纯 C++）。我在运行时对 Brew 版本进行了一些检查，如果是 Brew 2 而不是 Brew 3，则禁用某些 API。

由于您在软件中进行缩放，3D 类型的游戏更容易使分辨率独立。

还有 2 个独立的声音 API，IMEDIA 和 ISOUNDPLAYER，ISOUNDPLAYER 是较旧的 API，在所有设备上都受支持，但没有那么多功能（您只能使用 IMEDIA 进行多声道音频）。我创建了一个 IMEDIA 对象，如果它无法获取 IMEDIA 对象，它将回退到创建一个 ISOUNDPLAYER 对象。

一个完全通用的构建的问题是在能力上有很大的不同，所以值得进行一些构建，旧设备只有不到 1MB 的堆（和一个小屏幕尺寸），然后你会得到很多6MB+（176x204 到更大）。

使用 Brew，您确实拥有一组相当一致的键值（与 Java 不同），尽管一些新设备是触摸屏（并且您必须处理指针输入）和旋转屏幕。

还有一些旧的诺基亚手机使用大端模式，这意味着文件与普通的 mod 文件不同（除非你想编写一些非常酷的汇编语言前缀头文件来解码文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T19:58:05.877

另一个想法可能是根据屏幕尺寸将手机分为 2 到 4 个类别并为它们创建构建。这也是一条更快的路线，因为您将能够以更低的复杂性支持所有您想要支持的手机。

另一件值得关注的事情是您想要启动的手机上的 BREW 版本。如果说 BREW 1.1 在一部手机上，并且在您的目标市场中由一小部分人拥有，那么努力支持它是没有意义的。

# video - 如何保护 AIR 中的内容？

> ID：71293
> 
> 赞同：4
> 
> 时间：2008-09-16T11:13:52.337
> 
> 标签：video, air, protection

我想开发一些教育内容，我想使用 Adob​​e AIR 分发给孩子们。内容将包含视频。现在，据我所知，AIR 会将内容放到本地文件系统中，任何人都可以看到。我想防止这种情况。有出路吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T11:21:14.190

可能，但您必须接受 The Dark Side - 又名 DRM（数字版权管理）。去阅读[Flash Video DRM](http://www.flashcomguru.com/index.cfm/2007/10/23/Flash-Video-DRM-Roundup)。正确地做是非常痛苦的事情，用户往往讨厌它。问问自己，你的内容是否*真的*如此有价值和热门，以至于你需要走这条路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T19:08:54.003

一种解决方案是将 DRM 与 Flash Media Server 结合使用（如 Stu 所述）。

另一种选择是在运行时流式传输内容，而不是缓存到文件系统。

最后，也可以将 FLV 的位存储在加密的本地数据存储或 SQLite 数据库中（在 AIR 1.5 中添加了加密支持），但是，这可能不适用于大型视频（性能问题），并且您在播放之前可能仍需要先将其写入文件系统（尽管是暂时的）。

迈克室

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-23T19:53:21.673

我建议您执行以下步骤：

1.  使用密钥加密您存储的文件
2.  在运行时，在临时文件夹中创建文件的副本，并使用 AIR 程序中的嵌入密钥解密用户需要的文件
3.  退出时，删除解密文件

通过这种方式，文件可以在很短的时间内使用，它们正在被使用。然后也很难找到它们，因为您可以在任何不起眼的文件夹中解密它们。

这将保护您的文件免受 99% 的人口的影响。你永远无法阻止剩下的 1%。所以不要尝试。

祝一切顺利。

# asp.net - ASP.net - 如何区分页面处理时间和客户端传输时间

> ID：71306
> 
> 赞同：2
> 
> 时间：2008-09-16T11:15:51.877
> 
> 标签：asp.net, page-lifecycle, measurement, transmission

博客中的单个时序栏自然包括客户端传输时序。对于异常分析，我想将构建时间过长的页面与客户端速度慢的请求区分开来。

对于缓冲页面，我查看了 ASP.NET 页面生命周期模型，但没有看到我可以利用的地方，并且在代码上仅测量页面刷新到客户端之前的页面处理时间。

我可能应该提到我的目标是生产监控（不是测试或开发）。此外，目的是使用此测量值注释网络日志以供以后分析。目前我们使用 Response.AppendToLog() 自由地注释博客。我相信使用 Response.AppendToLog() 的愿望在一定程度上限制了我的潜在日志点，例如，响应对象在 Application_EndRequest 中不可行。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:16:35.447

您可以在 BeginRequest 和 PreSendRequestContent 中使用秒表，如其他两个答案中所述，或者您可以只在 PreSendRequestContent 中使用请求的时间戳。

例如，在[SingingEels](http://www.singingeels.com/)上，我将其添加到母版页的底部（是的，这是一个 hack）：`<%=DateTime.Now.Subtract(HttpContext.Current.Timestamp).TotalSeconds %>`

这样我就可以看到任何页面在服务器上实际执行需要多长时间，包括访问数据库等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T13:21:47.643

您也可以在 Web 服务器上进行测试。然后 ClientTransmission 时间实际上变为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:04:45.147

最简单的方法可能是在 global.asax 文件中使用以下事件：

protected void Application_BeginRequest(Object sender, EventArgs e)
protected void Application_EndRequest(Object sender, EventArgs e)

您还可以实现自定义 httpmodule

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T12:09:46.507

这取决于您拥有的性能工具的功能集。但是，如果您只需要记录处理时间，那么您可以采用这种方法。

1.  [在HttpApplication.BeginRequest](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.beginrequest.aspx)事件中记录开始时间。
2.  [在HttpApplication.PreSendRequestContent](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.presendrequestcontent.aspx)事件中记录经过的时间。

如果您只想要一个特定页面，那么您可以在 BeginRequest 事件中进行检查。应用程序事件可以附加在 Global.asax 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T12:11:23.930

如果您想登录特定页面，我相信 asp.net 页面的生命周期以 PreInit 开始并以 Disposed 结束，因此您可以在这些事件中记录您想要的任何内容。

或者，如果您想登录每个页面，正如 Bob Dizzle 指出的那样，您可以使用 Global.asax 文件，该文件有一千个事件可供选择：http: [//msdn.microsoft.com/en-us/library /2027ewzw.aspx](http://msdn.microsoft.com/en-us/library/2027ewzw.aspx)

# javascript - 如何使用 Scriptacolus 的节点生成器插入 html

> ID：71309
> 
> 赞同：0
> 
> 时间：2008-09-16T11:16:19.427
> 
> 标签：javascript, dom, scriptaculous

例如这段代码

```
var html = "<p>This text is <a href=#> good</a></p>";
var newNode = Builder.node('div',{className: 'test'},[html]);
$('placeholder').update(newNode); 
```

导致显示 p 和 a 标签，如何防止它们被转义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T11:26:31.697

[根据Wiki](http://github.com/madrobby/scriptaculous/wikis/builder)，Builder.node 的最后一个参数是“Array, List of other nodes to be appended as children” 。因此，当您将字符串传递给它时，它会被视为文本。

你可以使用：

```
var a = Builder.node('div').update("<a href='#'>foo</a>") 
```

链接是文本或：

```
var a = Builder.node('div', {'class':'cool'}, 
         [Builder.node('div', {'class': 'another_div'})]
        ); 
```

你可以只使用 Prototypes [new Element()](http://www.prototypejs.org/api/element)（从 1.6 版开始可用）。

```
var a = new Element('div').insert(
          new Element('div', {'class': 'inner_div'}).update("Text in the inner div")
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-01T06:18:12.963

您可以使用此解决方案：[http ://sviudes.blogspot.com/2009/08/como-usr-etiquetas-html-con.html](http://sviudes.blogspot.com/2009/08/como-usar-etiquetas-html-con.html)

# git - git 中存储库/分支的轻量级版本

> ID：71315
> 
> 赞同：4
> 
> 时间：2008-09-16T11:17:52.793
> 
> 标签：git, branch

我在一个项目中使用 git，它会生成大量数据文件（模拟结果）。我“被迫”在同一个存储库中对所有这些结果进行版本化和跟踪。（这是硬性要求，无法更改）

但是我不需要它们。我们有大约 50 MB 的项目空间和 5 GB 的结果在存储库中。

我是否可以创建一个分支，删除所有结果，检查这个分支并只在那个分支上工作？

将我的本地更改推回胖分支有多难（我必须做什么）？

有没有更好的解决方案来为我的工作摆脱那些 5 GB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T11:23:02.313

如果您要创建一个分支并从分支中删除结果文件，那么将您的分支合并回 master 也会尝试从 master 中删除结果。文件删除与其他任何更改一样。

也许您可以使用 git 子模块支持将代码更改作为胖存储库的子模块来管理。这样，胖存储库似乎包含所有内容，但您可以独立处理小代码位。这可能需要一些摆弄才能顺利工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T19:24:24.030

如果您创建一个分支，并在一次提交中删除不需要的文件，您应该能够将任何后续提交挑选回您的主分支，而无需合并删除数据文件的提交。

请参阅[git cherry-pick 的手册](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T19:49:01.677

除了 git cherry-pick 之外，另一种选择是在合并之前对文件删除更改运行 git-revert。

# vim - 如何在 Vim 中用换行符替换字符

> ID：71323
> 
> 赞同：2230
> 
> 时间：2008-09-16T11:19:39.077
> 
> 标签：vim, replace, escaping, newline, vi

我正在尝试用`,`新行替换当前文件中的每个：

```
:%s/,/\n/g 
```

但它会插入看起来像 a`^@`而不是实际的换行符。该文件未处于 DOS 模式或任何状态。

我该怎么办？

如果您像我一样好奇，请检查问题*[Why is \ra newline for Vim?](https://stackoverflow.com/questions/71417/why-is-r-a-newline-for-vim)* 也是。

* * *

## 回答 #1

> 赞同：2895
> 
> 时间：2008-09-16T11:21:03.300

## 使用`\r`而不是`\n`.

替换`\n`为在文本中插入一个空字符。要获得换行符，请使用`\r`. 但是，在*搜索*换行符时，您仍然会使用`\n`。这种不对称是由于做些稍微不同`\n`的`\r` [事情](http://vim.wikia.com/wiki/Search_and_replace)：

`\n`匹配行尾（换行符），而`\r`匹配回车符。另一方面，在替换中`\n`插入一个空字符，而`\r`插入一个换行符（更准确地说，它被视为输入`CR`）。这是一个使用 Vim 命令行功能的小型非交互式示例来说明这一点（换句话说，您可以将以下内容复制并粘贴到终端中以运行它）。`xxd`显示结果文件的十六进制转储。

```
echo bar > test
(echo 'Before:'; xxd test) > output.txt
vim test '+s/b/\n/' '+s/a/\r/' +wq
(echo 'After:'; xxd test) >> output.txt
more output.txt 
```

```
Before:
0000000: 6261 720a                                bar.
After:
0000000: 000a 720a                                ..r. 
```

换句话说，`\n`在文本中插入了字节 0x00；`\r`已插入字节 0x0a。

* * *

## 回答 #2

> 赞同：223
> 
> 时间：2008-09-25T23:40:19.023

这是诀窍：

首先，将您的 Vi(m) 会话设置为允许使用特殊字符进行模式匹配（即：换行符）。将这一行放在你的 .vimrc 或 .exrc 文件中可能是值得的：

```
:set magic 
```

接下来，执行：

```
:s/,/,^M/g 
```

要获取`^M`角色，请键入`Ctrl`+`V`并点击`Enter`。在 Windows 下，执行`Ctrl`+ `Q`, `Enter`. 我能记住这些的唯一方法是记住它们的意义有多大：

> A:*用来表示换行符的最差控制字符是什么？*
> 
> B：*要么`q`（因为它通常意味着“退出”）要么`v`因为很容易错误地输入`Ctrl`+`C`并杀死编辑器。*
> 
> 答：*就这样吧。*

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2013-09-23T14:00:45.340

在语法`s/foo/bar`中，`\r`有`\n`不同的含义，视上下文而定。

* * *

## 短的：

对于`foo`：

`\r`== "回车" ( `CR`/ `^M`) ==在 Linux/Mac 和Windows上
`\n`匹配 "换行" ( )`LF``CRLF`

对于`bar`：

`\r`==`LF`在 Linux/Mac 上产生，`CRLF`在 Windows 上
`\n`== "null byte" ( `NUL`/ `^@`)

在 linux 中编辑最初在 windows 环境中创建并上传（即 FTP/SFTP）的文件（即在网络服务器上）时 -`^M`您在 vim 中看到的所有 ' 都是`CR`linux 不翻译的文件，因为它仅使用`LF`'s 来描绘换行符。

* * *

## 更长（带有 ASCII 数字）：

`NUL`== 0x00 == 0 == `Ctrl`+ `@`==`^@`在 vi​​m 中显示
`LF`== 0x0A == 10 == `Ctrl`+ `J`
`CR`== 0x0D == 13 == `Ctrl`+ `M`==`^M`在 vi​​m 中显示

这是[ASCII 控制字符](http://www.cs.tut.fi/%7Ejkorpela/chars/c0.html)的列表。`Ctrl`通过+ `V`, `Ctrl`+将它们插入 Vim `---key---`。

在 Bash 或其他 Unix/Linux shell 中，只需键入`Ctrl`+ `---key---`。

在 Bash 中尝试`Ctrl`+ 。`M`这与 hit 相同`Enter`，因为 shell 意识到了它的含义，即使 Linux 系统使用换行符来分隔行。

要在 bash 中插入文字，在它们前面加上`Ctrl`+`V`也可以。

在 Bash 中尝试：

```
echo ^[[33;1mcolored.^[[0mnot colored. 
```

这使用[ANSI 转义序列](http://en.wikipedia.org/wiki/ANSI_escape_code)。`^[`通过`Ctrl`+ `V`,插入两个`Esc`。

您也可以尝试`Ctrl`+ `V`, `Ctrl`+ `M`, `Enter`，这将为您提供：

```
bash: $'\r': command not found 
```

还记得`\r`上面的吗？:>

这个[ASCII 控制字符](http://www.cs.tut.fi/%7Ejkorpela/chars/c0.html)列表与完整的[ASCII 符号表](http://ascii-code.com/)`Ctrl`不同，因为可以在其中找到通过键（哈哈）插入控制台/伪终端/Vim 的控制字符。

而在 C 和大多数其他语言中，您通常使用八进制代码来表示这些“字符”。

如果您真的想知道这一切*[的来源：TTY 已揭开神秘面纱](http://www.linusakesson.net/programming/tty/)*。这是您将遇到的有关此主题的最佳链接，但请注意：有龙。

* * *

*TL;博士*

通常`foo`=`\n`和`bar`= `\r`。

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2008-09-16T11:30:32.093

你需要使用：

```
:%s/,/^M/g 
```

要获取`^M`字符，请按`Ctrl`+ ，`v`然后按`Enter`。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2008-09-16T11:21:34.640

`\r`可以为您完成这里的工作。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2008-09-16T11:45:40.760

在 Windows 上使用 Vim，使用`Ctrl`+`Q`代替`Ctrl`+ `V`。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2015-04-08T12:15:22.903

这是我认为的最佳答案，但在表格中会更好：

*[为什么 Vim 是 \ra 换行符？](https://stackoverflow.com/questions/71417/why-is-r-a-newline-for-vim/12389839#12389839)*

所以，改写：

您需要在正则表达式替换中`\r`使用换行符（ASCII `0x0A`，Unix 换行符），但这是替换所特有的 - 您通常应该继续期望使用`\n`换行符和`\r`回车符。

这是因为 Vim`\n`在替换中使用了 NIL 字符 (ASCII `0x00`)。您可能已经预料到 NIL 会被`\0`释放`\n`，因为它通常用于换行，但`\0`在正则表达式替换中已经有了意义，所以它被转移到`\n`. 因此，然后进一步将换行符从`\n`to `\r`（在正则表达式模式中是回车符 ASCII `0x0D`）。

```
性格 | ASCII码 | C 表示 | 正则表达式匹配 | 正则表达式替换
-------------------------+------------+------------ --------+--------------+------------
无 | 0x00 | \0 | \0 | \n
换行（Unix 换行） | 0x0a | \n | \n | \r
回车 | 0x0d | \r | \r | <未知>

```

注意：`^M`（ Linux上的`Ctrl`++ `V` `Ctrl`）`M`在正则表达式替换中使用时插入换行符，而不是其他人建议的回车符（我刚刚尝试过）。

另请注意，Vim 将根据其文件格式设置保存到文件时转换换行符，这可能会造成混淆。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2011-09-06T17:53:05.970

在[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)中，`^M`字符可以嵌入一行，您希望将它们转换为换行符。

```
:s/\r/\r/g 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2012-02-07T08:09:42.303

但是，如果必须替换，则以下内容有效：

```
:%s/\n/\r\|\-\r/g 
```

在上面，每下一行都被下一行替换，然后`|-`又是一个新行。这用于 wiki 表格。

如果文字如下：

```
line1
line2
line3 
```

它改为

```
line1
|-
line2
|-
line3 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-02-03T19:31:15.163

这是对我有用的答案。来自这个人：

----quoting*[使用 vi 编辑器在替换中插入换行符](http://jaysonlorenzen.wordpress.com/2009/04/28/use-vi-editor-to-insert-newline-char-in-replace/)*

* * *

其他一些我必须做的事情，我不记得了，然后不得不抬头看。

在 vi 中，要在搜索和替换中插入换行符，请执行以下操作：

```
:%s/look_for/replace_with^M/g 
```

上面的命令会将所有“look_for”实例替换为“replace_with\n”（\n 表示换行符）。

要获得“^M”，请输入组合键`Ctrl`+ `V`，然后（释放所有键）按`Enter`键。

* * *

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2012-02-09T23:01:29.297

如果您需要对整个文件执行此操作，我还建议您可以从命令行尝试：

```
sed 's/\\n/\n/g' file > newfile 
```

# php - 在 PHP 站点中避免 xss 攻击的最佳实践是什么

> ID：71328
> 
> 赞同：67
> 
> 时间：2008-09-16T11:20:02.680
> 
> 标签：php, security, xss

我配置了 PHP，以便打开魔术引号并关闭全局寄存器。

对于我输出的任何源自用户输入的内容，我都会尽我所能调用 htmlentities()。

我也偶尔会在我的数据库中搜索附加的 xss 中使用的常见内容，例如...

```
<script 
```

我还应该做什么以及如何确保我想做的事情**总是**完成。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-09-16T11:41:23.207

转义输入并不是成功预防 XSS 的最佳方法。还必须转义输出。如果您使用 Smarty 模板引擎，您可以使用`|escape:'htmlall'`修饰符将所有敏感字符转换为 HTML 实体（我使用自己的`|e`修饰符，它是上面的别名）。

我的输入/输出安全方法是：

*   存储未修改的用户输入（输入时没有 HTML 转义，只有通过 PDO 准备语句完成的 DB 感知转义）
*   输出转义，取决于您使用的输出格式（例如 HTML 和 JSON 需要不同的转义规则）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-16T21:32:29.243

我认为一个人不应该在输入过程中逃避任何东西，只在输出时。因为（大多数时候）你不能假设你知道数据的去向。例如，如果您的表单获取稍后出现在您发送的电子邮件中的数据，则需要不同的转义（否则恶意用户可能会重写您的电子邮件标题）。

换句话说，您只能在数据“离开”您的应用程序的最后一刻逃脱：

*   项目清单
*   写入 XML 文件，转义为 XML
*   写入数据库，转义（针对特定的 DBMS）
*   写电子邮件，逃避电子邮件
*   ETC

简而言之：

1.  你不知道你的数据去哪儿了
2.  数据实际上可能会出现在多个地方，需要不同的转义机制，但不是两者都需要
3.  为错误的目标逃逸的数据真的不好。（例如，收到一封主题为“去汤米的酒吧”的电子邮件。）

如果您在输入层转义数据（或者您需要再次对其进行反转义等），则会发生 Esp #3。

PS：我会反对不使用magic_quotes的建议，那些是纯粹的邪恶！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-16T11:38:17.690

有很多方法可以实现 XSS（参见[http://ha.ckers.org/xss.html](http://ha.ckers.org/xss.html)）而且很难捕捉。

我个人将此委托给我正在使用的当前框架（例如 Code Igniter）。虽然并不完美，但它可能比我手工制作的程序更能捕捉到。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-09-16T12:13:45.000

这是一个很好的问题。

首先，不要在输入时转义文本，除非是为了存储安全（例如放入数据库中）。这样做的原因是您希望保留输入的内容，以便您可以以不同的方式和位置在上下文中呈现它。在此处进行更改可能会影响您以后的演示文稿。

当你去展示你的数据时，过滤掉不应该存在的东西。例如，如果没有理由让 javascript 存在，请搜索并删除它。一个简单的方法是使用[strip_tags](http://us.php.net/strip_tags)函数并且只显示您允许的 html 标签。

接下来，获取您拥有的内容并将其传递给 htmlentities 或 htmlspecialchars 以将那里的内容更改为 ascii 字符。根据上下文和您想要摆脱的内容来执行此操作。

我还建议关闭 Magic Quotes。它已从 PHP 6 中删除，使用它被认为是不好的做法。[http://us3.php.net/magic_quotes](http://us3.php.net/magic_quotes)的详细信息

有关更多详细信息，请查看[http://ha.ckers.org/xss.html](http://ha.ckers.org/xss.html)

这不是一个完整的答案，但希望足以帮助您入门。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-16T19:13:19.080

> 里克写道：
> 
> > 对于我输出的任何源自用户输入的内容，我都会尽我所能调用 htmlentities()。

请参阅 Joel 关于[使代码看起来错误](http://www.joelonsoftware.com/articles/Wrong.html)的文章以获得帮助

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-04-18T02:01:08.457

**模板库。**或者至少，这是模板库应该做的。为了防止 XSS ，*所有*输出都应该被编码。这不是主应用程序/控制逻辑的任务，它应该仅由输出方法处理。

如果将 htmlentities() 撒在代码中，则整体设计是错误的。正如您所建议的那样，您可能会错过一两个景点。这就是为什么唯一的解决方案是严格的 html 编码*-> 当*输出变量被写入 html/xml 流时。

不幸的是，大多数 php 模板库只添加自己的模板语法，而不关心输出编码、本地化、html 验证或任何重要的事情。也许其他人知道适当的 php 模板库？

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-16T18:39:29.937

为此，我依靠[PHPTAL](http://phptal.motion-twin.com/)。

与 Smarty 和普通 PHP 不同，它默认转义所有输出。`htmlspecialchars()`这是安全性的一大胜利，因为如果您忘记或在某个地方，您的网站不会变得易受攻击`|escape`。

XSS 是针对 HTML 的攻击，因此 HTML 输出是防止它的正确位置。您不应该尝试对数据库中的数据进行预过滤，因为您可能需要将数据输出到另一种不接受 HTML 的媒体，但有其自身的风险。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T11:24:39.440

对于大多数网站来说，转义所有用户输入就足够了。还要确保会话 ID 不会出现在 URL 中，这样它们就不会从`Referer`指向另一个站点的链接中被盗。此外，如果您允许您的用户提交链接，请确保`javascript:`不允许任何协议链接；这些将在用户单击链接后立即执行脚本。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T11:40:58.277

如果您担心 XSS 攻击，将输出字符串编码为 HTML 是解决方案。如果您记得将每个输出字符编码为 HTML 格式，则无法执行成功的 XSS 攻击。

阅读更多： [清理用户数据：如何以及在何处进行](http://www.diovo.com/2008/09/sanitizing-user-data-how-and-where-to-do-it/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T11:59:02.803

“魔术引号”是对一些最严重的 XSS 缺陷的姑息疗法，它通过逃避输入的所有内容来工作，这是设计上的错误。唯一想要使用它的情况是，当您绝对必须使用已知的针对 XSS 粗心编写的现有 PHP 应用程序时。（在这种情况下，即使使用“魔术引号”，您也会遇到严重的麻烦。）在开发自己的应用程序时，您应该禁用“魔术引号”并遵循 XSS 安全实践。

XSS 是一种跨站点脚本漏洞，当应用程序在其 [X]HTML、CSS、ECMAscript 或其他浏览器解析的输出中包含来自外部源的字符串（用户输入、从其他网站获取等）时发生，没有适当的转义，希望像小于（在 [X]HTML 中）、单引号或双引号（ECMAscript）这样的特殊字符永远不会出现。正确的解决方案是始终根据输出语言的规则转义字符串：在 [X]HTML 中使用实体，在 ECMAscript 中使用反斜杠等。

因为很难跟踪不可信和必须转义的内容，所以最好始终转义所有“文本字符串”，而不是像 HTML 这样的语言中的“带有标记的文本”。一些编程环境通过引入几种不兼容的字符串类型使其变得更容易：“字符串”（普通文本）、“HTML 字符串”（HTML 标记）等等。这样，从“字符串”到“HTML 字符串”的直接隐式转换是不可能的，字符串成为 HTML 标记的唯一方法是通过转义函数将其传递。

“注册全局变量”虽然禁用它绝对是个好主意，但它处理的问题与 XSS 完全不同。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-16T19:09:23.410

就个人而言，我会禁用magic_quotes。在 PHP5+ 中，默认情况下它是禁用的，最好像它根本不存在一样编码，因为它不会转义所有内容，它将从 PHP6 中删除。

接下来，根据您过滤的用户数据的类型，将指示下一步要做什么，例如，如果它只是文本（例如名称），那么`strip_tags(trim(stripslashes()));`它或检查范围使用正则表达式。

如果您期望某个范围的值，请创建一个包含有效值的数组，并且只允许这些值通过 ( `in_array($userData, array(...))`)。

如果您正在检查数字，请使用 is_numeric 强制整数或强制转换为特定类型，这应该可以防止人们尝试发送字符串。

如果您有 PHP5.2+，请考虑查看[filter()](http://ca.php.net/filter)并使用该扩展程序，该扩展程序可以过滤各种数据类型，包括电子邮件地址。文档不是特别好，但正在改进。

如果您必须处理 HTML，那么您应该考虑使用[PHP Input Filter](http://cyberai.users.phpclasses.org/browse/package/2189.html)或[HTML Purifier 之](http://htmlpurifier.org/)类的东西。HTML Purifier 还将验证 HTML 的一致性。我不确定输入过滤器是否仍在开发中。两者都允许您定义一组可以使用的标签以及允许的属性。

无论您做出什么决定，请永远记住，永远不要相信来自用户（包括您自己！）的任何东西进入您的 PHP 脚本。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-16T21:24:32.803

所有这些答案都很好，但从根本上说，XSS 的解决方案将是停止通过字符串操作生成 HTML 文档。

对于任何应用程序来说，过滤输入总是一个好主意。

只要使用得当，使用 htmlentities() 和朋友转义你的输出应该可以工作，但这是通过将字符串与 mysql_real_escape_string($var) 连接来创建 SQL 查询的 HTML 等价物 - 它应该可以工作，但更少的事情可以验证你的工作，可以这么说，与使用参数化查询之类的方法相比。

长期的解决方案应该是应用程序在内部构建页面，可能使用像 DOM 这样的标准接口，然后使用库（如 libxml）来处理对 XHTML/HTML/等的序列化。当然，我们离普及和足够快还有很长的路要走，但与此同时，我们必须通过字符串操作来构建我们的 HTML 文档，而这本质上风险更大。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-16T21:35:01.687

我发现使用此功能有助于消除许多可能的 xss 攻击：

```
<?php

function h($string, $esc_type = 'htmlall')
{
    switch ($esc_type) {
        case 'css':
            $string = str_replace(array('<', '>', '\\'), array('&lt;', '&gt;', '&#47;'), $string);
            // get rid of various versions of javascript
            $string = preg_replace(
                    '/j\s*[\\\]*\s*a\s*[\\\]*\s*v\s*[\\\]*\s*a\s*[\\\]*\s*s\s*[\\\]*\s*c\s*[\\\]*\s*r\s*[\\\]*\s*i\s*[\\\]*\s*p\s*[\\\]*\s*t\s*[\\\]*\s*:/i',
                    'blocked', $string);
            $string = preg_replace(
                    '/@\s*[\\\]*\s*i\s*[\\\]*\s*m\s*[\\\]*\s*p\s*[\\\]*\s*o\s*[\\\]*\s*r\s*[\\\]*\s*t/i',
                    'blocked', $string);
            $string = preg_replace(
                    '/e\s*[\\\]*\s*x\s*[\\\]*\s*p\s*[\\\]*\s*r\s*[\\\]*\s*e\s*[\\\]*\s*s\s*[\\\]*\s*s\s*[\\\]*\s*i\s*[\\\]*\s*o\s*[\\\]*\s*n\s*[\\\]*\s*/i',
                    'blocked', $string);
            $string = preg_replace('/b\s*[\\\]*\s*i\s*[\\\]*\s*n\s*[\\\]*\s*d\s*[\\\]*\s*i\s*[\\\]*\s*n\s*[\\\]*\s*g:/i', 'blocked', $string);
                return $string;

        case 'html':
            //return htmlspecialchars($string, ENT_NOQUOTES);
            return str_replace(array('<', '>'), array('&lt;' , '&gt;'), $string);

        case 'htmlall':
            return htmlentities($string, ENT_QUOTES);
        case 'url':
            return rawurlencode($string);
        case 'query':
            return urlencode($string);

        case 'quotes':
            // escape unescaped single quotes
            return preg_replace("%(?<!\\\\)'%", "\\'", $string);

        case 'hex':
            // escape every character into hex
            $s_return = '';
            for ($x=0; $x < strlen($string); $x++) {
                $s_return .= '%' . bin2hex($string[$x]);
            }
            return $s_return;

        case 'hexentity':
            $s_return = '';
            for ($x=0; $x < strlen($string); $x++) {
                $s_return .= '&#x' . bin2hex($string[$x]) . ';';
            }
            return $s_return;

        case 'decentity':
            $s_return = '';
            for ($x=0; $x < strlen($string); $x++) {
                $s_return .= '&#' . ord($string[$x]) . ';';
            }
            return $s_return;

        case 'javascript':
            // escape quotes and backslashes, newlines, etc.
            return strtr($string, array('\\'=>'\\\\',"'"=>"\\'",'"'=>'\\"',"\r"=>'\\r',"\n"=>'\\n','</'=>'<\/'));

        case 'mail':
            // safe way to display e-mail address on a web page
            return str_replace(array('@', '.'),array(' [AT] ', ' [DOT] '), $string);

        case 'nonstd':
            // escape non-standard chars, such as ms document quotes
            $_res = '';
            for($_i = 0, $_len = strlen($string); $_i < $_len; $_i++) {
                $_ord = ord($string{$_i});
                // non-standard char, escape it
                if($_ord >= 126){ 
                    $_res .= '&#' . $_ord . ';'; 
                } else {
                    $_res .= $string{$_i};
                }
            }
               return $_res;

        default:
            return $string;
    }
}

?> 
```

[来源](http://www.codebelay.com/killxss.phps)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-16T12:17:07.083

让您使用 HttpOnly 的任何会话 cookie（或所有 cookie）。在这种情况下，大多数浏览器都会对 JavaScript 隐藏 cookie 值。用户仍然可以手动复制 cookie，但这有助于防止直接脚本访问。StackOverflow 在测试期间遇到了这个问题。

这不是解决方案，只是墙上的另一块砖

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-16T21:28:06.650

*   不要相信用户输入
*   转义所有自由文本输出
*   不要使用magic_quotes；查看是否有特定于 DBMS 的变体，或使用 PDO
*   考虑尽可能使用仅 HTTP cookie 以避免任何恶意脚本能够劫持会话

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2010-04-19T23:54:53.360

您至少应该验证进入数据库的所有数据。并尝试验证所有离开数据库的数据。

mysql_real_escape_string 可以很好的防止 SQL 注入，但是 XSS 比较棘手。您应该尽可能地进行 preg_match、stip_tags 或 htmlentities！

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-04-24T18:36:55.867

当前在 PHP 应用程序中防止 XSS 的最佳方法是 HTML Purifier (http://htmlpurifier.org/)。它的一个小缺点是它是一个相当大的库，最好与 APC 之类的操作码缓存一起使用。您可以在将不受信任的内容输出到屏幕的任何地方使用它。htmlentities、htmlspecialchars、filter_input、filter_var、strip_tags 等要彻底得多。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T12:04:44.927

使用现有的用户输入清理库来清理*所有*用户输入。除非你付出*很多*努力，否则自己实施它永远不会奏效。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-16T21:37:34.037

我发现最好的方法是使用一个允许您绑定代码的类，这样您就不必担心手动转义数据。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2008-09-16T22:02:37.800

在不引起误报的站点上，很难实施彻底的 sql 注入/xss 注入预防。在 CMS 中，最终用户可能想要使用`<script>`或`<object>`链接到来自另一个站点的项目。

我建议让所有用户使用 NoScript 安装 FireFox ;-)

# eclipse - 如何在 EPF Composer 1.5 中删除学科？

> ID：71332
> 
> 赞同：211
> 
> 时间：2008-09-16T11:20:20.620
> 
> 标签：eclipse, agile-processes

我正在制作一种将 Scrum 与 OpenUP 生命周期和可交付成果相结合的方法。我还想将 OpenUP 学科与“项目管理”分开。我可以“隐藏”它，这样它就不会在我生成的方法站点中立即显现出来。但是，当您然后导航到“风险列表”工件时，例如 PM 仍然被视为有贡献，如果您单击链接，您将被带到 PM 纪律页面。

如何从我的方法中完全删除它而不从我正在使用的 OpenUP 库中删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:31:48.967

我从未使用过 EPF Composer。

我做了一些谷歌搜索，我了解您正在寻找的内容可以通过配置（在您的库视图中选择 OpenUP）和发布的视图定义来完成。

见此 PPT 文件的幻灯片 83 和 84。你应该可以从那里拿走它。

[Eclipse 流程框架简介](http://www.google.com/url?sa=t&rct=j&q=%22epf%20composer%22%20%22standard%20categories%22&source=web&cd=9&ved=0CFoQFjAI&url=http://www.mountainview-itsm.com/Mountainview/downloads/An_Introduction_to_EPF.ppt&ei=p9tVUfTwD4-i8gTFroEY&usg=AFQjCNGlAoGW_ujO2uRyTa_h9jYwJq2YfA)。

如果链接不起作用，我在谷歌上搜索“EPF Composer”“标准类别”，该文档位于第一个结果页面的底部。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T14:06:00.730

对于那些懒得[搜索和浏览幻灯片](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0ahUKEwiUr9P6prjJAhVM2RoKHeQ7AWgQFgg0MAQ&url=http%3A%2F%2Fwww.mountainview-itsm.com%2Fitil-training%2Fdownloads%2FAn_Introduction_to_EPF.ppt&usg=AFQjCNHCNYUI70q5JaQKxZbpqMtdUIAu_w&cad=rja)的人：

幻灯片 83：
选择方法库的子集以发布到 HTML 或导出到 MS。使用“内容”选项进行课程颗粒（插件和包级别）配置。使用“添加/减去这些类别”进行细粒度（元素级别）配置。

[![在此处输入图像描述](https://i.stack.imgur.com/RJvxQ.png)](https://i.stack.imgur.com/RJvxQ.png)

幻灯片 84：
类别分组相关元素
通过选择类别定义的视图
[![在此处输入图像描述](https://i.stack.imgur.com/7iyuV.png)](https://i.stack.imgur.com/7iyuV.png)

# editor - 无论 jEdit 发生了什么

> ID：71336
> 
> 赞同：23
> 
> 时间：2008-09-16T11:21:10.117
> 
> 标签：editor, jedit

我不确定是否有很多人知道这个文本编辑器？

jEdit 在 2004 年有点大，但现在，Notepad++ 似乎已经领先（在 Windows 上）许多插件自 2003 年以来还没有更新，整体布局和使用令人困惑......

我确信 jEdit 有许多漂亮的功能，但如果我能找到它们的位置以及如何使用它们，我会被诅咒的。阅读该手册本身就是一项全职工作。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-09-16T12:18:11.260

我已经使用 jEdit 几年了，主要是在 Windows 上，但也在 Ubuntu 上。我将它用于：SQL、awk、批处理文件、html、xml、javascript……除了 .NET 的东西（我使用 Visual Studio）之外的几乎所有东西。
我喜欢它。

## 概括

我使用 jEdit 是因为它在**易于设置**与**功能**和可**定制**性之间取得了适当的平衡。对我来说，没有其他编辑能达到如此好的平衡。

## 缺点

*   让它做你想做的事情可能有点困难。

## 优点

*   我喜欢[插件](http://plugins.jedit.org/list.php)
*   能够定义我自己的语法突出显示等正是我想要的文本编辑器。
*   该[手册](http://prdownloads.sourceforge.net/jedit/jedit4.3pre15manual-a4.pdf)非常好，可读性强。我强烈建议您通读一遍以了解 jEdit 可以为您做什么。（事实上​​，我建议您使用的任何软件都这样做）
*   它是跨平台的。我在 Windows 上使用了很长时间，但现在我也使用 Ubuntu，它在那里工作：我什至可以从我的 Windows 机器上复制配置文件，一切正常。好的。

## 其他编辑

过去我确实看过**Notepad++**，但那是不久前的事了，它没有一个很好的方法来定义你自己的语法高亮，这对我来说很重要。**我还在不同的时间为Textmate**和**UltraEdit**付费（两者都非常好），但最后，jEdit 对我来说是最重要的。
我也使用**Eclipse**一年左右。它太棒了，它会做任何你想做的事情，*但*你必须真正进入 Eclipse 才能充分利用它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-24T01:48:05.687

我偶尔会想知道同样的事情（jEdit 发生了什么——尽管我不确定这是否是你的主要问题）。

显然，主要开发人员[Slava Pestov](http://en.wikipedia.org/wiki/Slava_Pestov)于 2006 年离开了该项目（专注于[Factor](http://factorcode.org/)和他的研究），此后 jEdit 开发从未真正恢复。这是一种耻辱。:/ （我实际上并没有密切关注，但我想这说明在过去的 4 年半中 jEdit 没有主要版本。）

现在，在谷歌搜索时，我发现[了一些斯拉瓦](http://factorcode.org/slava/)自己写的信息。在那个时候，他似乎不仅放弃了 jEdit，而且在对这种语言“越来越沮丧”之后，完全用 Java 进行开发。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-16T11:34:41.177

自 2003 年以来，我一直在使用 jEdit。我在家里的 Ubuntu 8.04 机器上使用它，但是它确实有一些错误：有时当您单击打开对话框的按钮时，例如“打开文件”，对话框将完全空白。

这可能是 Java 的问题，但这似乎是一个奇怪的问题。

除此之外，我对 jEdit 非常满意——它是我（迄今为止）为 Linux 找到的最好的通用编辑器（*成群结队的 Vi 和 Emacs 用户点亮了他们的火焰大炮*）

我喜欢 XML Editor 插件：关闭 XML（包括 HTML）标签时的自动完成功能，另外，如果您指定 DOCTYPE，它会自动完成。

还有一个方便的插件可以直观地查看两个文件之间的差异。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-24T02:10:48.677

自 2010 年以来，jEdit 是迄今为止我最喜欢的编辑器。它有一组独特的功能，我在其他任何地方都找不到：

**多操作系统**：Win、Linux、Mac。

**便携**：只需复制一个文件夹即可使用。所有设置都保存在 jEdit 子文件夹内的 .XML 和 .properties 文件中。如果您在企业工作站上没有管理员权限，这一点至关重要。

**Search-Replace**：我在文本编辑器中看到的最增强的功能：完整的正则表达式规范，带有用于反向引用的 Bean Shell 脚本功能。例如：假设您想对文本中找到的每个数字应用增量（将 1 替换为 2，将 10 替换为 11 等等）。只需搜索正则表达式“(\d+)”并替换为 Java 表达式“Integer.parseInt(_1) + 1”。这只是一个简单的例子，但足以说明它的强大。

**数据库**：只需选择您的 SQL 语句，按一个按钮，然后从 MySQL、MsSql、Oracle、Teradata 和任何其他与 Jdbc 兼容的 RDBMS 中获取结果集。将结果导出到 csv。像一个多数据库命令行工具一样工作。浏览并浏览您的数据库架构。（SQL 插件）。

**定制**：这就是 jEdit 的亮点。有很多功能。亮点是能够使用任何 java API 来扩展它！从您的 Beanshell 脚本宏访问它们。示例：我需要一个从/向 mime64 解码所选文本的函数。没问题！我刚刚从 commons.apache.org 下载了一个库并从 jEdit 宏访问它。令人难以置信的是，jEdit 可以通过此功能进行扩展。

**突出显示**：选择一个单词或短语，它会立即在整个文本中突出显示。出现的小地图显示在滚动条中。例如，它允许仅使用鼠标在单独的文件中快速查找相应的 css 样式。无需 Ctrl+F 或键入任何内容。它甚至适用于普通的 txt 文件。（高亮插件）

**Plugins**: FTP, XML, Text Diff, Themes, Text Tabs, Highlighter, character map, Mail, Whitespaces, Abbrevs, Minimap...there are hundreds of them.

There are dozens of other nice features that I won't describe here in order to keep this answer not too long. The complete article can be found [here](http://margenn.blogspot.com.br/2010/08/jedit-text-editor-reasons-why-you.html "here") and the mime64 example [here](http://margenn.blogspot.com.br/2011/08/jedit-macro-encode-and-decode-selection.html "here").

At first glance, jEdit is just another text editor. The full capabilities come into light when you start playing with it's endless customization/expansion power. My initial reluctance of accepting a java-written text editor disappeared when I realize that only a java text-editor could be so extensible. Its initial drawback turned into it's main advantage.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-08-20T04:14:54.940

过去五年我一直在使用 jEdit。我同意上面马汉先生的评论，jEdit 已经到了“正常工作的阶段”，真的不需要再开发了。

我主要将它用于 PHP Web 开发，并尝试过从商业 IDE (DreamWeaver) 到 php Designer、NetBeans、Eclipse、Apanta 和 Notepad++ 的所有内容。没有什么比定制的可能性更近了。如果该插件不存在，您可以将一些东西与 BeanShell 宏组合在一起（假设您想深入研究 Java）。

在 Windows 上，我也使用 Notepad++，但主要是作为记事本的替代品（我什至重命名了 notepad.exe）

在一天结束时，它归结为味道。什么对你很重要，什么会让你更有效率。令人分心的 GUI 和蓬松的功能会让你远离你应该关注的东西。

为了启动，我已经将一些开发人员转换为 jEdit。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-23T13:49:53.770

有执行死灵术的风险：

1.  由于过去十年左右的发布方式，主要的 Linux 发行版通常远远落后于最新的稳定版本。好消息是有[存储库](http://jedit.org/index.php?page=download#option_two)可以在 Ubuntu 等上自动安装和升级它。
2.  几年来，我毫无问题地在 Windows、FreeBSD 和 Linux 之间共享配置文件。这比我用过的任何其他应用程序都多。
3.  我听说的唯一问题是它曾经在时间的黎明时很慢。现在真的很快。
4.  *编码*和*行尾*的处理比 IntelliJ IDEA 以外的任何其他编辑器都更加无缝。
5.  *垂直编辑。*只需按住`Ctrl`并拖动即可创建一个矩形（甚至是零宽度垂直）选择。
6.  *比IntelliJ IDEA 之外的任何其他编辑器~~都~~更好的搜索和替换。*我刚开始写一份清单，但必须亲眼所见才能相信。只是`Ctrl`-`f`自己看看。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T11:28:05.513

我在职业教育期间不得不使用 XML 和 XSLT。它有很多错误并且并不总是有效。我无法喜欢它，但如果我必须测试一些 XSLT，我会再试一次。我找到了 Notepad++，我对它的需要感到非常满意。

对于您的问题：您是否查看过[jEdit 的插件列表](http://plugins.jedit.org/list.php)？有一些插件于 2008 年发布，最新版本于 2008 年 8 月 8 日发布。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-16T12:15:30.800

是的，我刚刚安装了 4.3pre15（最新），它看起来确实好一些。

超级功能是您可以从其中一个插件中获得的自动 XML DTD 创建。

现在这太棒了，尤其是对于大文件

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-15T15:43:18.583

After many years, jEdit remains my favorite free validating XML editor. I love the seamless combination of XML validation with plain-text editing features such as regex search-and-replace across multiple files.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-10-14T21:46:04.040

我已经在 PC 和 Mac 上使用了多年的 jEdit（在 Mac 上有点时髦）。

目前，我主要将它用作许多正在进行的文档注释的**折叠编辑器。**我在文本缩进级别使用了折叠 - 一种折叠和展开文件部分的简单方法，无需任何工作来设置每个部分。

我真正喜欢的功能是您可以设置的命令快捷方式选项、工具栏图标控件和缩写扩展。我特别喜欢的插件是用于显示文件/缓冲区名称行的 BufferTabs，以及 Whitespace 和 TextTools。

我最近加载了 GroovyScriptEngine，部分原因是因为 groovy 的语法着色和控制。我设置了 2 个单独的 jEdit 版本，部分是为了维护单独的历史列表，因为我反复更新了几十个文件。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-04-15T19:53:33.883

我喜欢 Windows 上的 Notepad++，但是当我切换到 Mac 时，我被抛在了后面。从那时起，我一直在使用跨多个平台工作的实用程序，这就是我在 2 年前改用 JEdit 的原因，从那时起我就一直喜欢它。它在我的 Mac 上完美运行，从不崩溃，速度很快，并且有许多附加组件。它基于 Java，因此可以在许多不同的平台上运行。我认为 Jedit 等于或优于 Notepad++

我最喜欢的插件是 FTP 模块。我可以像在本地一样轻松地在我的 FTP 服务器上打开、编辑和保存文件。

# svn - 如何创建项目特定的存储库提交后操作

> ID：71365
> 
> 赞同：3
> 
> 时间：2008-09-16T11:25:28.907
> 
> 标签：svn, version-control

目前，我们有几个主要项目，每个项目都在自己的存储库中。我们将不得不对多达十几个附加项目进行版本控制。VisualSVN 建议为我们公司创建 1 个存储库，然后对其中的所有项目进行 vc 处理。

> 为整个公司或部门创建一个存储库并将所有项目存储在此存储库中是一种很好的做法。为每个项目创建单独的存储库不是一个好主意，因为在这种情况下，您将无法执行 Subversion 操作，例如跨项目的复制、差异和合并。[VisualSvn.com](http://www.visualsvn.com/support/topic/00017/ "视觉svn.com")

目前，我们正在使用 post-commit 挂钩来使用最新提交更新测试服务器，并根据已提交的项目执行其他特定于项目的操作（例如向某个项目的某些人发送电子邮件，但不为其他人发送电子邮件）。

由于整个存储库的提交后运行，在这种情况下这仍然可能吗？我将如何确定哪个项目有变化？过滤文件夹结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T11:33:48.997

您可以检查提交文件的路径以确定它们属于哪个项目。请记住，一次提交可以一次修改多个文件，并且每个文件理论上可以属于不同的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T11:59:35.767

从[`post-commit`hook](http://svnbook.red-bean.com/en/1.5/svn.ref.reposhooks.post-commit.html)中，运行[`svnlook changed`命令](http://svnbook.red-bean.com/en/1.5/svn.ref.svnlook.c.changed.html)以找出哪些路径受提交影响。您可以使用 a`grep`查看它们是否包含某些项目路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T11:48:25.887

我不确定我是否同意 VisualSVN 的建议。我总是为每个项目设置单独的存储库，而且我从来没有遇到过我希望我可以跨项目或其他东西合并的情况。

如果您公司的项目之间共享大量通用代码，则它应该成为自己的共享库项目（也具有自己的存储库）。

# c# - 在 Windows 窗体中呈现文本的最快 API？

> ID：71374
> 
> 赞同：13
> 
> 时间：2008-09-16T11:27:07.653
> 
> 标签：c#, windows, performance

我们需要优化在不规则网格中显示大量小字符串的 C# [Windows 窗体应用程序的文本呈现。](http://en.wikipedia.org/wiki/Windows_Forms)任何时候都可能有超过 5000 个可见的单元格，每秒更新 4 次。单元格中的字体系列和大小是一致的，尽管颜色可能因单元格而异，粗体/斜体/纯色也是如此。

我在网上看到了关于`TextRenderer.DrawText`vs.`Graphics.DrawString`是最快/最好的相互矛盾的信息，这在[Win32](http://en.wikipedia.org/wiki/Windows_API)级别 上简化为[GDI](http://en.wikipedia.org/wiki/Graphics_Device_Interface)与[GDI+](http://en.wikipedia.org/wiki/Graphics_Device_Interface#GDI.2B)的比较。

我还在 Windows XP 和 Windows Vista 上看到了截然不同的结果，但我的主要目标是 Windows XP。[承诺在WinFX](http://en.wikipedia.org/wiki/.NET_Framework_3.0#.NET_Framework_3.0)和[DirectX 10](http://en.wikipedia.org/wiki/DirectX#DirectX_10)下取得巨大进步的文章在这里没有帮助:-)

这里最好的方法是什么？我不害怕引入一个小的 C++/CLI 层并优化设备上下文处理以提高性能，但我想要一些关于采取哪个方向的明确建议。

编辑：感谢最初的回复。我将尝试结合使用背景位图渲染和 GDI 等效调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T12:01:20.927

一位 Microsoft 开发人员在他的博客上发布了一篇[GDI 与 GDI+ 文本渲染性能](http://blogs.msdn.com/cjacks/archive/2006/05/19/602021.aspx)的文章，该文章回答了原始速度问题：在他的系统上，GDI DrawText 比 GDI+ DrawString 快大约 6 倍。

如果你想成为一个真正的速度恶魔，TextOut 比 DrawText 快，但你必须自己处理剪辑和自动换行。ExtTextOut 支持剪辑。

GDI 渲染（TextRenderer）将与 Windows 其他部分使用 GDI 更加一致；GDI+ 试图独立于设备，因此[一些间距和加粗是不一致的](http://windowsclient.net/articles/gdiptext.aspx)。有关呈现不一致的示例，请参阅 SQL Server 2005 外围应用配置工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T12:00:08.543

即使使用 GDI，5000+ 文本渲染也很慢，尤其是在您需要滚动时。创建一个单独的渲染线程，每 200 毫秒通知 UI 线程，并对当前结果进行 bitblt。它提供了流畅的用户体验。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T11:47:49.773

一般而言，GDI 在绘图方面比 GDI+ 更快。我从事的项目必须绘制数千行和文本字符串，并且从 GDI+ 切换到 GDI 显着提高了性能。那是使用 Windows XP，所以我无法评论 Vista。我还建议对绘图使用双缓冲来提高性能。创建兼容的离屏位图并在每次需要绘制时重复使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T14:13:06.617

创建一个 C++/CLI 互操作类以在本机代码中进行绘图将导致疯狂快速的绘图。我们已经见证并衡量了这一点。

如果您不愿意这样做，我们发现 graphics.DrawString 只比 TextRenderer.DrawText 快一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-12-22T20:32:59.550

在我的 Windows 7 64 位系统上，TextOut 甚至比 DrawString 慢一点！TextRenderer.DrawText 比 DrawString 慢得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-03T02:27:01.673

根据最近的经验，最快的文本输出是通过`ExtTextOut`with `ETO_GLYPH_INDEX`flag 实现的。这是有代价的，而且您不再打印字符，而是直接打印字体字形。这意味着您需要在调用之前将常规字符串转换为字形索引字符串`ExtTextOut`，或者通过`GetCharacterPlacement`每次调用，或者只调用一次此函数来构建您自己的转换表，这在 DC 中选择新字体之前将一直有效。请记住，字形索引是 16 位的，因此您可以将它们存储在 Unicode 字符串中并调用`ExtTextOutW`版本，而不管原始字符串字符大小如何。

# ant - 值得迁移到 Rake 吗？

> ID：71381
> 
> 赞同：8
> 
> 时间：2008-09-16T11:28:46.917
> 
> 标签：ant, build-automation, rake

从 ant 转到 Rake 真的有好处吗？

有人从 ant 迁移过来并发现了一些具有纪念意义的东西吗？

仅供参考：当前环境是用于 J2ME 构建的 Ant

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-30T23:07:54.850

我会说是的，但我的观点与 Java 环境人员不同，因为我是 .NET 环境人员。我在 msbuild（MS 的 XML 驱动的 NAnt 工作）中编写并维护了一个重要的构建脚本（clean、generate-assembly-info、build、test、coverage、analysis、package），这非常痛苦：

*   XML 不友好；很吵
*   团队中没有其他人有兴趣学习它以执行更多、更有用的自动化；如此高的公共汽车系数（即，如果我被公共汽车撞到，他们就会被困住）
*   它不适合重构或改进——它是那些“触碰你的危险”的事情之一，你知道吗？
*   它需要编写自定义 C# 任务来运行构建所需的各种工具（尽管公平地说，这些通常是由供应商编写的）

在我大约一个工作周的时间里（在圣诞节时爱上了空荡荡的办公室！），我已经学会了足够多的 ruby​​+rake 来用更短的（就 LOC 而言）脚本替换整个东西，功能稍微多一点，和更多的可理解性（我希望，无论如何；还没有审查过）。

它受益于： - 它是一种新语言，但却是一种真正的语言。我的队友喜欢学习新语言，而这虽然是一个薄弱的借口，但仍然是一个借口；-) 如果我是对的，这可能会减轻总线因素。- 从这里到 capistrano 是一个短距离（我收集），这是来自 RoR 世界的自动化/远程/分布式部署工具。尽管是一家 MS-stack 商店，但我们将把它与 IIS7 结合使用，最终拥有一个 CLI 配置工具。

是的。您的里程可能会有所不同，但对我来说这是值得的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-23T20:04:13.897

如果您愿意，Rake 非常棒：

*   使用真正的编程语言；与 Ant 相比，条件和循环都非常简单（它们几乎不可能）
*   易于阅读且可以进行语法检查的文件格式
*   更直观/可预测的变量赋值

耙子对您不利，因为：

*   您需要自己提供许多基本任务（如运行 javac、创建 jar 文件等）。像[Raven](http://raven.rubyforge.org/)这样的项目可能会有所帮助，但它似乎更倾向于自动下载依赖项，而不是自动化构建/部署过程。另外，文档有点缺乏。
*   大多数可以自动化的 java 工具都是作为 Ant 任务完成的，这些任务不容易从 Rake 运行；在构建时启动 JVM 可能很烦人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T12:30:17.470

您可能还想查看[buildr](http://incubator.apache.org/buildr/)。它是基于 rake 构建的更高级别的构建工具。恕我直言，它吸收了 maven 的许多好的特性，并抛弃了坏的特性。我自己没有在任何大事上使用过它，但我知道有人拥有它并且对它非常满意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T07:27:45.560

如果 ant 不能满足您的需求，您可能想要检查的另一个工具是[Gant 。](http://gant.codehaus.org/)它为 ant 添加了完整的脚本支持，但允许您根据需要重用您的 ant 任务。这真的取决于你不喜欢蚂蚁的什么。

# sql - SQL：计算具有每小时滚动投票限制的唯一投票

> ID：71413
> 
> 赞同：3
> 
> 时间：2008-09-16T11:34:43.360
> 
> 标签：sql, voting

给定一张投票表（用户投票选择一个选项，并且必须提供一个电子邮件地址）：

```
votes
--
id: int
choice: int
timestamp: timestamp
ip: varchar
email: varchar 
```

考虑到他们每小时只能投票*两次的限制，计算“唯一”选票（用户是电子邮件 + ip 的唯一组合）的最佳方法是什么？*

可以计算第一次和最后一次投票之间的小时数，并确定该时间范围内允许的最大投票数，但这允许用户将所有投票压缩到一个小时长的窗口中，并且仍然计算它们。

我意识到匿名在线投票本质上是有缺陷的，但我不确定如何使用 SQL 来做到这一点。我应该使用外部脚本还是其他什么？（对于每个选择，对于每个电子邮件 + ip 对，获得投票，计算下一个 +1 小时时间戳，计数/丢弃/计票，继续下一个小时，等等......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T11:37:54.307

就像是

```
select email, ip, count(choice)
from votes
group by email, ip, datepart(hour, timestamp) 
```

如果我理解正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:31:31.667

我认为这会做到：

```
SELECT choice, count(*) 
FROM votes v 
WHERE 
  ( SELECT count(*) 
    FROM   votes v2
    WHERE  v.email = v2.email 
    AND    v.ip    = v2.ip 
    AND    v2.timestamp BETWEEN dateadd(hour, -1, v.timestamp) AND v.timestamp 
  ) < 2 
```

仅供参考，要计算用户每小时只能投票一次的选票，我们可以这样做：

```
SELECT choice, count(*) 
FROM votes v 
WHERE NOT EXTISTS 
  ( SELECT * 
    FROM   votes v2
    WHERE  v.email = v2.email 
    AND    v.ip    = v2.ip 
    AND    v2.timestamp BETWEEN dateadd(h,v.timestamp,-1) AND v.timestamp 
  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T11:48:06.123

您可以重写您的插入语句，只允许根据您的约束插入投票：

```
Insert Into Votes
(Choice, Timestamp, IP, Email)
Select
Top 1
@Choice, @Timestamp, @IP, @Email
From
Votes
Where
(Select Count(*) From Votes Where
    IP = @IP
    and Email = @Email
    and Timestamp > DateAdd(h, -2, GetDate())) < 3 
```

您没有提到您使用的是哪种 SQL 语言，所以这是在 SQL Server 2005 中。

# c++ - 在 C++ 中前向声明枚举

> ID：71416
> 
> 赞同：290
> 
> 时间：2008-09-16T11:34:53.283
> 
> 标签：c++, enums

我正在尝试执行以下操作：

```
enum E;

void Foo(E e);

enum E {A, B, C}; 
```

编译器拒绝。我快速浏览了谷歌，共识似乎是“你做不到”，但我不明白为什么。谁能解释一下？

澄清 2：我这样做是因为我在一个采用所述枚举的类中有私有方法，并且我不希望暴露枚举的值 - 所以，例如，我不希望任何人知道 E 被定义为

```
enum E {
    FUNCTIONALITY_NORMAL, FUNCTIONALITY_RESTRICTED, FUNCTIONALITY_FOR_PROJECT_X
} 
```

因为我不想让我的用户知道项目 X。

所以，我想转发声明枚举，这样我就可以将私有方法放在头文件中，在 cpp 内部声明枚举，并将构建的库文件和头分发给人们。

至于编译器——它是 GCC。

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2009-08-15T02:09:24.483

自 C++11 起，枚举的前向声明是可能的。以前，无法前向声明枚举类型的原因是枚举的大小取决于其内容。只要枚举的大小由应用程序指定，就可以前向声明：

```
enum Enum1;                     // Illegal in C++03 and C++11; no size is explicitly specified.
enum Enum2 : unsigned int;      // Legal in C++11.
enum class Enum3;               // Legal in C++11, because enum class declarations have a default type of "int".
enum class Enum4: unsigned int; // Legal C++11.
enum Enum2 : unsigned short;    // Illegal in C++11, because Enum2 was previously declared with a different type. 
```

* * *

## 回答 #2

> 赞同：226
> 
> 时间：2008-09-16T14:02:47.297

无法前向声明枚举的原因是，在不知道值的情况下，编译器无法知道枚举变量所需的存储空间。允许 C++ 编译器根据包含所有指定值所需的大小来指定实际存储空间。如果所有可见的只是前向声明，则翻译单元无法知道已选择的存储大小 - 它可能是 a `char`，或 an `int`，或其他东西。

* * *

来自 ISO C++ 标准的第 7.2.5 节：

> 枚举的*底层类型*是一个整数类型，可以表示枚举中定义的所有枚举值。使用哪种整数类型作为枚举的基础类型是实现定义的，除非基础类型不得大于，`int`除非枚举数的值不能放入`int`or`unsigned int`中。如果*enumerator-list*为空，则基础类型就好像该枚举具有一个值为 0 的单个枚举器。`sizeof()`应用于枚举类型、枚举类型的对象或枚举器的值是`sizeof()`应用于基础类型。

由于函数的*调用者*必须知道参数的大小才能正确设置调用堆栈，因此必须在函数原型之前知道枚举列表中的枚举数。

更新：

在 C++0X 中，已经提出并接受了一种用于前向声明枚举类型的语法。您可以在*[Forward declaration of enumerations (rev.3)中查看提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2764.pdf)*

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2012-07-24T13:42:53.053

你可以在 C++11 中前向声明一个枚举，只要你同时声明它的存储类型。语法如下所示：

```
enum E : short;
void foo(E e);

....

enum E : short
{
    VALUE_1,
    VALUE_2,
    ....
} 
```

事实上，如果函数从不引用枚举的值，那么此时您根本不需要完整的声明。

G++ 4.6 及更高版本（`-std=c++0x`或`-std=c++11`更新版本）支持此功能。Visual C++ 2013 支持这一点；在早期版本中，它有一些我还没有弄清楚的非标准支持——我发现一些建议，简单的前向声明是合法的，但你的里程可能会有所不同。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2009-12-19T06:01:43.683

在 C++ 中前向声明事物非常有用，因为它[显着加快了编译时间](http://brianbondy.com/blog/id/5/slow-compilation-time)。您可以在 C++ 中转发声明几项内容，包括：`struct`、、、等...`class``function`

`enum`但是您可以在 C++ 中转发声明吗？

不，你不能。

但为什么不允许呢？如果允许，您可以`enum`在头文件中定义您的类型，并`enum`在源文件中定义您的值。听起来应该被允许，对吧？

错误的。

在 C++ 中，没有`enum`像 C# (int) 中那样的默认类型。在 C++ 中，您的`enum`类型将由编译器确定为适合您的`enum`.

这意味着什么？

这意味着在`enum`您拥有已定义的所有值之前，您的基础类型无法完全确定`enum`。这意味着您不能将`enum`. 因此，您不能`enum`在 C++ 中转发声明。

ISO C++ 标准 S7.2.5：

> 枚举的底层类型是一个整数类型，可以表示枚举中定义的所有枚举值。使用哪种整数类型作为枚举的基础类型是实现定义的，除非基础类型不得大于，`int`除非枚举数的值不能放入`int`or`unsigned int`中。如果 enumerator-list 为空，则基础类型就好像该枚举具有一个值为 0 的单个枚举器。`sizeof()`应用于枚举类型、枚举类型的对象或枚举器的值是`sizeof()`应用于基础类型。

您可以使用`sizeof`运算符确定 C++ 中枚举类型的大小。枚举类型的大小是其基础类型的大小。通过这种方式，您可以猜测您的编译器为您的`enum`.

如果您`enum`像这样明确指定您的类型怎么办：

```
enum Color : char { Red=0, Green=1, Blue=2};
assert(sizeof Color == 1); 
```

然后你可以转发声明你的`enum`吗？

不，但为什么不呢？

指定 an 的类型`enum`实际上并不是当前 C++ 标准的一部分。它是一个 VC++ 扩展。不过，它将成为 C++0x 的一部分。

[来源](http://brianbondy.com/blog/id/93/forward-declaring-enums-in-c)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-09-16T11:48:52.110

[我的答案是错误的，但我把它留在这里是因为评论很有用]。

前向声明枚举是非标准的，因为不保证指向不同枚举类型的指针大小相同。编译器可能需要查看定义以了解此类型可以使用什么大小的指针。

实际上，至少在所有流行的编译器上，指向枚举的指针是一致的大小。例如，枚举的前向声明由 Visual C++ 作为语言扩展提供。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-16T11:39:27.563

确实没有 enum 的前向声明之类的东西。由于枚举的定义不包含任何可能依赖于使用枚举的其他代码的代码，因此在首次声明枚举时完全定义枚举通常不是问题。

如果枚举的唯一用途是私有成员函数，则可以通过将枚举本身作为该类的私有成员来实现封装。枚举仍然必须在声明点完全定义，即在类定义中。然而，这并不是一个更大的问题，因为在那里声明私有成员函数，并且不是比这更糟糕的实现内部暴露。

如果你需要更深层次的隐藏你的实现细节，你可以把它分解成一个抽象接口，只包含纯虚函数，和一个具体的、完全隐藏的、实现（继承）接口的类。类实例的创建可以由工厂或接口的静态成员函数处理。这样，即使是真正的类名，更不用说它的私有函数，也不会被暴露。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-03-26T15:36:00.040

我只是注意到实际上的原因*是*在前向声明之后枚举的大小尚不清楚。好吧，您使用结构的前向声明能够传递指针或从前向声明的结构定义本身中引用的位置引用对象。

前向声明枚举不会太有用，因为人们希望能够按值传递枚举。你甚至没有指向它的指针，因为我最近被告知一些平台对*char*使用不同大小的指针而不是*int*或*long*。所以这一切都取决于枚举的内容。

当前的 C++ 标准明确禁止做类似的事情

```
enum X; 
```

（在`7.1.5.3/1`）。但是明年发布的下一个 C++ 标准允许以下内容，这让我确信问题实际上*与*底层类型有关：

```
enum X : int; 
```

它被称为“不透明”枚举声明。您甚至可以在以下代码中*按值使用 X。*并且它的枚举数可以在以后的枚举重新声明中定义。见`7.2`当前工作草案。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-16T13:04:33.520

我会这样做：

[在公共标题中]

```
typedef unsigned long E;

void Foo(E e); 
```

[在内部标题中]

```
enum Econtent { FUNCTIONALITY_NORMAL, FUNCTIONALITY_RESTRICTED, FUNCTIONALITY_FOR_PROJECT_X,
  FORCE_32BIT = 0xFFFFFFFF }; 
```

通过添加 FORCE_32BIT，我们确保 Econtent 编译为 long，因此它可以与 E 互换。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T23:51:45.837

如果您真的不希望您的枚举出现在您的头文件中*并*确保它仅由私有方法使用，那么一种解决方案可以采用[PIMPL](https://cpppatterns.com/patterns/pimpl.html)原则。

这是一种通过声明来确保在标题中隐藏类内部的技术：

```
class A
{
public:
    ...
private:
    void* pImpl;
}; 
```

然后在您的实现文件 (.cpp) 中，您声明一个将作为内部表示的类。

```
class AImpl
{
public:
    AImpl(A* pThis): m_pThis(pThis) {}

    ... all private methods here ...
private:
    A* m_pThis;
}; 
```

您必须在类构造函数中动态创建实现并在析构函数中将其删除，并且在实现公共方法时，您必须使用：

```
((AImpl*)pImpl)->PrivateMethod(); 
```

使用 PIMPL 有很多优点。一是它将您的类头与其实现分离，并且在更改一个类实现时不需要重新编译其他类。另一个是加快编译时间，因为您的标头非常简单。

但是使用起来很痛苦，所以你真的应该问问自己，只是在标题中将你的枚举声明为私有是不是很麻烦。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-26T10:41:55.767

自从这被撞（有点）以来，有一些异议，所以这里有一些来自标准的相关位。研究表明，该标准并没有真正定义前向声明，也没有明确说明枚举可以或不能被前向声明。

首先，来自 dcl.enum，第 7.2 节：

> 枚举的底层类型是一个整数类型，可以表示枚举中定义的所有枚举值。使用哪种整数类型作为枚举的基础类型由实现定义，除非基础类型不得大于 int，除非枚举数的值不能适合 int 或 unsigned int。如果 enumerator-list 为空，则基础类型就好像该枚举具有一个值为 0 的单个枚举器。应用于枚举类型、枚举类型的对象或枚举器的 sizeof() 的值是sizeof() 应用于基础类型。

所以枚举的底层类型是实现定义的，有一个小的限制。

接下来我们翻到关于“不完整类型”的部分（3.9），这与我们接近任何关于前向声明的标准一样接近：

> 已声明但未定义的类，或大小未知或元素类型不完整的数组，是未完全定义的对象类型。
> 
> 一个类类型（例如“class X”）可能在翻译单元中的某个时间点不完整，然后在稍后完成；类型“X 类”在两个点上都是相同的类型。数组对象的声明类型可能是一个不完整类类型的数组，因此是不完整的；如果类类型稍后在翻译单元中完成，则数组类型变得完整；这两个点的数组类型是相同的类型。数组对象的声明类型可能是一个未知大小的数组，因此在翻译单元中的某个时间点是不完整的，稍后会完整；这两个点的数组类型（“T 的未知边界数组”和“N T 的数组”）是不同的类型。指向未知大小数组的指针的类型，或由 typedef 声明定义为未知大小数组的类型，

因此，标准几乎列出了可以前向声明的类型。枚举不存在，因此编译器作者通常认为由于其基础类型的可变大小，标准不允许前向声明。

这也是有道理的。枚举通常在按值情况下引用，编译器确实需要知道这些情况下的存储大小。由于存储大小是实现定义的，许多编译器可能只选择对每个枚举的底层类型使用 32 位值，此时可以转发声明它们。

一个有趣的实验可能是尝试在 Visual Studio 中向前声明一个枚举，然后强制它使用大于 sizeof(int) 的基础类型，如上所述，看看会发生什么。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-08T09:26:54.833

您可以将枚举包装在一个结构中，添加一些构造函数和类型转换，然后转发声明该结构。

```
#define ENUM_CLASS(NAME, TYPE, VALUES...) \
struct NAME { \
    enum e { VALUES }; \
    explicit NAME(TYPE v) : val(v) {} \
    NAME(e v) : val(v) {} \
    operator e() const { return e(val); } \
    private:\
        TYPE val; \
} 
```

这似乎工作：http: [//ideone.com/TYtP2](http://ideone.com/TYtP2)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T11:37:29.173

似乎它不能在 GCC 中前向声明！

[这里](http://bytes.com/forum/thread62285.html)有一个有趣的讨论。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-04T19:15:45.657

对于[VC++](https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B)，这里是关于前向声明和指定底层类型的测试：

1.  以下代码编译OK。

```
    typedef int myint;
    枚举 T ;
    无效 foo(T * tp )
    {
        * tp = (T)0x12345678;
    }
    枚举 T：字符
    {
        一种
    };

```

但是我收到了警告`/W4`（`/W3`不会引起此警告）

> 警告 C4480：使用了非标准扩展：为枚举“T”指定基础类型

2.  VC++（Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.30729.01 for 80x86）在上述情况下看起来有问题：

*   当看到枚举 T 时；VC 假设枚举类型 T 使用默认的 4 字节 int 作为底层类型，因此生成的汇编代码为：

```
    ?foo@@YAXPAW4T@@@Z PROC ; 富
    ; 文件 e:\work\c_cpp\cpp_snippet.cpp
    ; 13号线
        推送ebp
        mov ebp, esp
    ; 第 14 行
        mov eax, DWORD PTR _tp$[ebp]
        mov DWORD PTR [eax], 305419896 ; 12345678H
    ; 15号线
        流行音乐
        0
    ?foo@@YAXPAW4T@@@Z ENDP ; 富

```

上面的汇编代码是直接从/Fatest.asm中提取出来的，不是我个人的猜测。

你看到

```
mov DWORD PTR[eax], 305419896        ; 12345678H 
```

线？

下面的代码片段证明了这一点：

```
    int main(int argc, char *argv)
    {
        联合{
            字符 ca[4];
            吨;
        }一种;
        a.ca[0] = a.ca[1] = a.[ca[2] = a.ca[3] = 1;
        富(&a.t);
        printf("%#x, %#x, %#x, %#x\n", a.ca[0], a.ca[1], a.ca[2], a.ca[3] ) ;
        返回0；
    }

```

结果是：

0x78、0x56、0x34、0x12

*   去掉 enum T 的前向声明并将函数 foo 的定义移到 enum T 的定义之后：结果是 OK：

上述关键指令变为：

mov BYTE PTR [eax], 120 ; 00000078H

最终结果是：

0x78, 0x1, 0x1, 0x1

请注意，该值不会被覆盖。

因此在 VC++ 中使用 enum 的前向声明被认为是有害的。

顺便说一句，毫不奇怪，底层类型的声明语法与 C# 中的相同。在实践中，我发现在与内存有限的嵌入式系统通信时，通过将底层类型指定为 char 来节省三个字节是值得的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-06-13T16:32:48.280

在我的项目中，我采用了[命名空间绑定枚举](http://www.ddj.com/cpp/184403894)技术来处理`enum`来自遗留组件和第 3 方组件的 s。这是一个例子：

### 转发.h：

```
namespace type
{
    class legacy_type;
    typedef const legacy_type& type;
} 
```

### 枚举.h：

```
// May be defined here or pulled in via #include.
namespace legacy
{
    enum evil { x , y, z };
}

namespace type
{
    using legacy::evil;

    class legacy_type
    {
    public:
        legacy_type(evil e)
            : e_(e)
        {}

        operator evil() const
        {
            return e_;
        }

    private:
        evil e_;
    };
} 
```

### 富.h：

```
#include "forward.h"

class foo
{
public:
    void f(type::type t);
}; 
```

### foo.cc：

```
#include "foo.h"

#include <iostream>
#include "enum.h"

void foo::f(type::type t)
{
    switch (t)
    {
        case legacy::x:
            std::cout << "x" << std::endl;
            break;
        case legacy::y:
            std::cout << "y" << std::endl;
            break;
        case legacy::z:
            std::cout << "z" << std::endl;
            break;
        default:
            std::cout << "default" << std::endl;
    }
} 
```

### 主.cc：

```
#include "foo.h"
#include "enum.h"

int main()
{
    foo fu;
    fu.f(legacy::x);

    return 0;
} 
```

请注意，`foo.h`标头不必知道任何关于`legacy::evil`. 只有使用遗留类型的文件`legacy::evil`（这里：main.cc）需要包含`enum.h`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T23:46:03.917

我对您的问题的解决方案是：

1 - 使用 int 而不是枚举：在 CPP 文件的匿名命名空间中声明您的 int（而不是在标题中）：

```
namespace
{
   const int FUNCTIONALITY_NORMAL = 0 ;
   const int FUNCTIONALITY_RESTRICTED = 1 ;
   const int FUNCTIONALITY_FOR_PROJECT_X = 2 ;
} 
```

由于您的方法是私有的，因此没有人会弄乱数据。您甚至可以进一步测试是否有人向您发送了无效数据：

```
namespace
{
   const int FUNCTIONALITY_begin = 0 ;
   const int FUNCTIONALITY_NORMAL = 0 ;
   const int FUNCTIONALITY_RESTRICTED = 1 ;
   const int FUNCTIONALITY_FOR_PROJECT_X = 2 ;
   const int FUNCTIONALITY_end = 3 ;

   bool isFunctionalityCorrect(int i)
   {
      return (i >= FUNCTIONALITY_begin) && (i < FUNCTIONALITY_end) ;
   }
} 
```

2：创建一个具有有限 const 实例化的完整类，就像在 Java 中所做的那样。前向声明类，然后在 CPP 文件中定义它，并仅实例化类枚举值。我在 C++ 中做了类似的事情，但结果并不像预期的那样令人满意，因为它需要一些代码来模拟枚举（复制构造、运算符 = 等）。

3：如前所述，使用私有声明的枚举。尽管用户会看到它的完整定义，但它不能使用它，也不能使用私有方法。因此，您通常可以修改现有方法的枚举和内容，而无需使用您的类重新编译代码。

我的猜测是解决方案 3 或 1。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-18T03:59:17.807

对于 iOS/Mac/Xcode 面临此问题的任何人，

如果您在将 XCode 中的 C/C++ 标头与 Objective-C 集成时遇到此问题，**只需将文件的扩展名从 .mm 更改为 .m**

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2008-09-16T11:41:55.653

因为枚举可以是可变大小的整数大小（编译器决定给定枚举的大小），指向枚举的指针也可以具有不同的大小，因为它是整数类型（字符在某些平台上具有不同大小的指针例如）。

所以编译器甚至不能让你前向声明枚举和用户指向它的指针，因为即使在那里，它也需要枚举的大小。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2009-01-27T13:05:06.963

您定义一个枚举以将类型元素的可能值限制为有限集合。此限制将在编译时强制执行。

向前声明稍后将使用“有限集”这一事实不会增加任何价值：后续代码需要知道可能的值才能从中受益。

尽管编译器*关心*枚举类型的大小，但当您向前声明它时，枚举的*意图*就会丢失。

# vim - 为什么 Vim 是 \ra 换行符？

> ID：71417
> 
> 赞同：271
> 
> 时间：2008-09-16T11:34:58.773
> 
> 标签：vim

来自问题*[How to replace a character for a newline in Vim?](https://stackoverflow.com/questions/71323/how-to-replace-a-character-for-a-newline-in-vim)* . 替换换行符时必须使用 \r ，如下所示

```
:%s/%/\r/g 
```

但是当替换一个字符的行尾和换行符时，你可以这样做：

```
:%s/\n/%/g 
```

手册的哪一部分记录了这些行为，它们背后的原因是什么？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-09-12T13:02:55.953

从[http://vim.wikia.com/wiki/Search_and_replace](http://vim.wikia.com/wiki/Search_and_replace)：

> **搜索时**
> 
> ...
> 
> `\n`是换行符，`\r`是`CR`（回车= `Ctrl-M`= `^M`）
> 
> **更换时**
> 
> ...
> 
> `\r`是换行符，`\n`是一个空字节 ( `0x00`)。

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2008-09-16T15:16:17.540

来自[有关模式的 vim 文档](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/%5Cr)：

> `\r` 匹配 <CR>
> 
> `\n` 匹配行尾 - 当匹配字符串而不是缓冲区文本时，匹配文字换行符。

* * *

## 回答 #3

> 赞同：132
> 
> 时间：2012-09-12T13:54:48.203

另一个方面是，`\0`传统上为 NULL，被认为 `s//\0/`是“整个匹配的模式”。（顺便说一下，这与 是多余的，并且比 长`&`）。

*   所以你不能用`\0`to 表示`NULL`，所以你用`\n`
*   所以你不能用`\n`to 表示`\n`，所以你用`\r`.
*   所以你不能用`\r`to mean `\r`，但我不知道谁会故意添加那个 char 。

—☈

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2008-09-16T11:57:17.643

### [`:help NL-used-for-Nul`](http://vimdoc.sf.net/htmldoc/pattern.html#NL-used-for-Nul)

> ### 技术细节：
> 
> `<Nul>`文件中的字符存储`<NL>`在内存中。在显示屏中，它们显示为“ `^@`”。翻译是在读写文件时完成的。要将 a`<Nul>`与搜索模式匹配，您只需输入[CTRL-@](http://www.vim.org/htmldoc/insert.html#i_CTRL-@)或“ [CTRL-V](http://www.vim.org/htmldoc/insert.html#i_CTRL-V) 000”。这可能正是您所期望的。`<NL>`在内部，该字符在搜索模式中被替换为 a 。不寻常的是，键入[CTRL-V](http://www.vim.org/htmldoc/insert.html#i_CTRL-V) [CTRL-J](http://www.vim.org/htmldoc/insert.html#i_CTRL-J)也会插入 a `<NL>`，因此也会在文件中搜索 a `<Nul>` 。{Vi 根本无法处理`<Nul>`文件中的字符}

* * *

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-12-10T10:28:54.460

首先，打开[`:h :s`](http://vimdoc.sourceforge.net/htmldoc/change.html#:s)查看“更改”文档的“4.2替换”部分。以下是命令接受的内容：

```
:[range]s[ubstitute]/{pattern}/{string}/[flags] [count] 
```

注意关于`pattern`和的描述`string`

> 为`{pattern}`见[`|pattern|`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#pattern)。
> `{string}`可以是文字字符串，也可以是
> 特殊的；见[`|sub-replace-special|`](http://vimdoc.sourceforge.net/htmldoc/change.html#sub-replace-special)。

所以现在您知道搜索模式和替换模式遵循不同的规则。如果您点击 的链接`|pattern|`，它会将您带到解释 Vim 中使用的整个正则表达式模式的部分。

同时，`|sub-replace-special|`带您进入“4.2 Substitute”小节，其中包含用于替换的模式，其中包括`\r`换行/拆分。

（这部分手册的快捷方式是[`:h :s%`](http://vimdoc.sourceforge.net/htmldoc/change.html#:s%25)）

# delphi - 为什么我不应该在 Delphi 中使用“with”？

> ID：71419
> 
> 赞同：22
> 
> 时间：2008-09-16T11:35:04.420
> 
> 标签：delphi, with-statement

我听说很多程序员，尤其是 Delphi 程序员鄙视使用“with”。

我认为它使程序运行得更快（只有一个对父对象的引用），并且如果使用得当（少于十几行代码并且没有嵌套）更容易阅读代码。

这是一个例子：

```
procedure TBitmap32.FillRectS(const ARect: TRect; Value: TColor32);
begin
  with ARect do FillRectS(Left, Top, Right, Bottom, Value);
end; 
```

我喜欢使用`with`. 我怎么了？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-09-16T11:44:41.137

使用 with 的一个烦恼是调试器无法处理它。所以它使调试更加困难。

一个更大的问题是代码不太容易阅读。特别是如果 with 语句有点长。

```
procedure TMyForm.ButtonClick(...)
begin
  with OtherForm do begin
    Left := 10;
    Top := 20;
    CallThisFunction;
  end;
end; 
```

哪个 Form 的 CallThisFunction 会被调用？自我（TMyForm）或其他形式？如果不检查 OtherForm 是否具有 CallThisFunction 方法，您将无法知道。

最大的问题是你可以在不知情的情况下轻松解决错误。如果 TMyForm 和 OtherForm 都有 CallThisFunction，但它是私有的怎么办。您可能期望/希望调用 OtherForm.CallThisFunction，但实际上并非如此。如果您不使用 with，编译器会警告您，但现在没有。

在 with 中使用多个对象会使问题成倍增加。见[http://blog.marcocantu.com/blog/with_harmful.html](http://blog.marcocantu.com/blog/with_harmful.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-16T11:44:34.697

在这种情况下，我更喜欢 VB 语法，因为在这里，您需要在 with 块内的成员前面加上 a`.`以避免歧义：

```
With obj
    .Left = 10
    .Submit()
End With 
```

但实际上，总的来说并没有什么问题`with`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-03-05T06:38:22.387

如果该`with`声明可以通过以下方式扩展，那就太好了：

```
with x := ARect do
begin
  x.Left := 0;
  x.Rigth := 0;
  ...
end; 
```

您不需要声明变量“x”。它将由编译器创建。写起来很快，没有混淆，使用的是哪个函数。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-16T11:53:33.223

“with”不太可能使代码运行得更快，编译器更有可能将其编译为相同的可执行代码。

人们不喜欢 "with" 的主要原因是它会引起命名空间范围和优先级的混淆。

在某些情况下，这是一个真正的问题，而在某些情况下，这是一个非问题（非问题情况将在问题中描述为“明智地使用”）。

由于可能的混淆，一些开发人员选择完全避免使用“with”，即使在可能没有这种混淆的情况下也是如此。这可能看起来很教条，但是可以争辩说，随着代码的变化和增长，即使在代码被修改到会使“with”混淆的程度之后，“with”的使用可能仍然存在，因此最好不要首先介绍它的用途。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-04T16:14:17.050

实际上：

```
procedure TBitmap32.FillRectS(const ARect: TRect; Value: TColor32);
begin
  with ARect do FillRectS(Left, Top, Right, Bottom, Value);
end; 
```

和

```
procedure TBitmap32.FillRectS(const ARect: TRect; Value: TColor32);
begin
  FillRectS(ARect.Left, ARect.Top, ARect.Right, ARect.Bottom, Value);
end; 
```

将生成完全相同的汇编代码。

`with`如果子句的值是函数或方法，则可能存在性能损失。在这种情况下，如果您想要良好的维护和良好的速度，只需执行编译器在后台执行的操作，即*创建一个临时变量*。

实际上：

```
with MyRect do
begin
  Left := 0;
  Right := 0;
end; 
```

由编译器以伪代码编码：

```
var aRect: ^TRect;

aRect := @MyRect;
aRect^.Left := 0;
aRect^.Right := 0; 
```

然后`aRect`可以只是一个 CPU 寄存器，但也可以是堆栈上真正的临时变量。当然，我在这里使用指针，因为`TRect`它是`record`. 它对对象更直接，因为它们已经是指针。

就个人而言，我有时在我的代码中使用 with，但我几乎每次生成 asm 时都会检查以确保它完成了它应该做的事情。不是每个人都能或有时间去做，所以恕我直言，*局部变量*是一个很好的替代方案。

我真的不喜欢这样的代码：

```
for i := 0 to ObjList.Count-1 do
  for j := 0 to ObjList[i].NestedList.Count-1 do
  begin
    ObjList[i].NestedList[j].Member := 'Toto';
    ObjList[i].NestedList[j].Count := 10;
  end; 
```

它仍然很容易阅读：

```
for i := 0 to ObjList.Count-1 do
  for j := 0 to ObjList[i].NestedList.Count-1 do
  with ObjList[i].NestedList[j] do
  begin
    Member := 'Toto';
    Count := 10;
  end; 
```

甚至

```
for i := 0 to ObjList.Count-1 do
  with ObjList[i] do
  for j := 0 to NestedList.Count-1 do
  with NestedList[j] do
  begin
    Member := 'Toto';
    Count := 10;
  end; 
```

但如果内部循环很大，则局部变量确实有意义：

```
for i := 0 to ObjList.Count-1 do
begin
  Obj := ObjList[i];
  for j := 0 to Obj.NestedList.Count-1 do
  begin
    Nested := Obj.NestedList[j];
    Nested.Member := 'Toto';
    Nested.Count := 10;
  end;
end; 
```

这段代码不会比以下代码慢`with`：编译器实际上是在幕后完成的！

顺便说一句，这将使调试更容易：您可以放置​​一个断点，然后将鼠标指向`Obj`或`Nested`直接获取内部值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T11:40:48.387

这种争论也经常发生在 Javascript 中。

基本上，使用 With 语法很难一眼看出您正在调用哪个 Left/Top/etc 属性/方法。您可以有一个名为 Left 的局部变量和一个属性（我已经有一段时间没有完成delphi，如果名称错误，对不起）称为Left，甚至可能是一个名为Left的函数。任何阅读代码但对 ARect 结构不太熟悉的人都可能会非常迷茫。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T11:48:42.110

你在打字时节省的东西，你会失去可读性。许多调试器也不知道您指的是什么，因此调试更加困难。它不会使程序运行得更快。

考虑使您的 with 语句中的代码成为您所引用对象的方法。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-03-04T20:47:10.177

这主要是一个维护问题。

从语言的角度来看，WITH 的想法是合理的，并且当合理使用时，它可以保持代码更小更清晰的论点具有一定的有效性。然而问题是，大多数商业代码将在其生命周期内由几个不同的人维护，并且最初是一个小的、易于解析的构造，在编写时很容易随着时间的推移变成笨拙的大型结构，其中 WITH 的范围不是维护者很容易解析。这自然会产生错误，并且很难找到错误。

例如，假设我们有一个小函数 foo，其中包含三或四行代码，这些代码已包装在 WITH 块中，那么确实没有问题。然而几年后，这个函数可能已经在几个程序员的带领下扩展为 40 或 50 行代码，仍然包裹在 WITH 中。现在这很脆弱，并且引入错误的时机已经成熟，特别是如果维护者星标引入额外的嵌入式 WITH 块。

WITH 没有其他好处 - 代码应该以完全相同的方式解析并以相同的速度运行（我在 D6 中用于 3D 渲染的紧密循环中对此进行了一些实验，我找不到任何区别）。调试器无法处理它也是一个问题 - 但应该在一段时间前修复它，如果有任何好处，则值得忽略。不幸的是没有。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T11:38:27.173

我不喜欢它，因为它使调试变得很麻烦。您无法通过将鼠标悬停在变量上来读取变量等的值。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T11:41:43.780

只要您保持简单并避免歧义，它就没有错。

据我所知，它并没有加快任何速度——它纯粹是语法糖。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-16T11:49:20.160

在工作中，我们为从现有 Win 32 代码库中删除 Withs 打分，因为维护使用它们的代码需要额外的努力。我在以前的工作中发现了几个错误，其中一个名为 BusinessComponent 的局部变量被一个带有相同类型的已发布属性 BusinessComponent 的对象的 With begin 块中所掩盖。编译器选择使用已发布的属性，并且本应使用局部变量的代码崩溃了。

我见过像这样的代码

用 a,b,c,d 做 {除了它们是更长的名字，只是在这里缩短) begin i := xyz;
结尾;

试图找到 xyz 的来源可能会很痛苦。如果是 c，我会更早地将其写为

我:= c.xyz;

您认为理解这一点非常简单，但不是在一个 800 行长的函数中，它在一开始就使用了 with ！

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-06-27T09:37:30.833

你可以结合 with 语句，所以你最终得到

```
with Object1, Object2, Object3 do
begin
  //... Confusing statements here
end 
```

如果你认为调试器被一个混淆了，我看不出任何人可以确定`with`块中发生了什么

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T11:46:28.683

它允许不称职或邪恶的程序员编写难以阅读的代码。因此，仅当您既不无能也不邪恶时才使用此功能。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-16T11:59:50.743

> ... 跑得更快 ...

不一定-您的编译器/解释器通常比您更擅长优化代码。

我想这让我说“糟糕！” 因为它很懒——当我阅读代码时（尤其是其他人的），我喜欢看明确的代码。所以我什至会在 Java 中写“this.field”而不是“field”。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2008-09-16T11:57:27.003

我们最近在我们的 Delphi 编码标准中禁止了它。

优点经常超过缺点。

那是由于误用而引入了错误。这些并不能证明节省编写或执行代码的时间是合理的。

是的，使用 with 可以（稍微）加快代码执行速度。

在下面， foo 只被评估一次：

```
with foo do
begin
  bar := 1;
  bin := x;
  box := 'abc';
end 
```

但是，这里它被评估了三遍：

```
foo.bar := 1;
foo.bin := x;
foo.box := 'abc'; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2010-07-27T09:05:22.730

对于 Delphi 2005，with-do 语句中存在硬错误 - 评估指针丢失并用指针向上替换。必须使用局部变量，而不是直接使用对象类型。

# .net - 禁用数据网格视图中的行选择

> ID：71423
> 
> 赞同：12
> 
> 时间：2008-09-16T11:36:09.007
> 
> 标签：.net, winforms, datagridview, user-interface

我想禁用数据网格视图中某些行的选择。

必须可以删除 winform 中显示的 datagridview 中一个或多个 datagridview 行的 select 属性。目标是用户不能选择某些行。（根据条件）

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-16T12:22:12.360

如果 SelectionMode 是 FullRowSelect，那么您需要为该 DataGridView 覆盖 SetSelectedRowCore，而不是为您不想选择的行调用基本 SetSelectedRowCore。

如果 SelectionMode 不是 FullRowSelect，您将需要另外覆盖 SetSelectedCellCore（并且不要为您不想选择的行调用基本 SetSelectedCellCore），因为 SetSelectedRowCore 只有在您单击行标题而不是单个单元格时才会启动。

这是一个例子：

```
public class MyDataGridView : DataGridView
{
    protected override void SetSelectedRowCore(int rowIndex, bool selected)
    {
        if (selected && WantRowSelection(rowIndex))
        {
            base.SetSelectedRowCore(rowIndex, selected);
        }
     }

     protected virtual void SetSelectedCellCore(int columnIndex, int rowIndex, bool selected)
     {
         if (selected && WantRowSelection(rowIndex))
         {
            base.SetSelectedRowCore(rowIndex, selected);
          }
     }

     bool WantRowSelection(int rowIndex)
     {
        //return true if you want the row to be selectable, false otherwise
     }
} 
```

如果您使用的是 WinForms，请打开您的 Designer.cs 以获取相关表单，并将您的 DataGridView 实例的声明更改为使用这个新类而不是 DataGridView，并替换 this.blahblahblah = new System.Windows.Forms。 DataGridView() 指向新类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T10:16:25.580

```
Private Sub dgvSomeDataGridView_SelectionChanged(sender As Object, e As System.EventArgs) Handles dgvSomeDataGridView.SelectionChanged
        dgvSomeDataGridView.ClearSelection()
End Sub 
```

# desktop - 哪个桌面虚拟化软件运行最流畅？

> ID：71429
> 
> 赞同：6
> 
> 时间：2008-09-16T11:37:39.050
> 
> 标签：desktop, virtualization, remote-desktop, system-administration, vdi

***背景：*** 我在周末做一份全职工作和一份兼职工作，我的两个雇主都为我提供了一台笔记本电脑供我使用。当然，我在家里也有我强大的工作站可以工作，有时当我在办公室工作时（在另一个城市），我会在另一个工作站工作。

***问题：*** 这使得我维护的完整的 4 台 PC（软件版本、许可证和设置）只是为了完成我的工作，相信我，我的首选软件列表太大了。

我想在我的 VMware 服务器上设置一个虚拟桌面，这样无论我在哪台 PC 上工作，我都可以从相同的安装和相同的会话中工作。

现在我没有时间和金钱对每个设置进行全面测试，所以我想听听您在这个主题上的经验。

***问题：*** 我应该使用带有一些远程登录软件（如[realVNC](http://www.realvnc.com/)、 [teamviewer](http://www.teamviewer.com/)、 [logmein](https://secure.logmein.com/)等）的 VMware 虚拟工作站还是应该投资像[Sun](http://www.sun.com/software/vdi/index.jsp)或[VMware](http://www.vmware.com/products/vdi/)提供的完整 VDI 系统？

***编辑：*** 我在 Windows XP 上的 Adob​​e Dreamweaver 中编程 - 但我在 Debian 上运行我的服务器，有时也在 VIM 中进行快速编辑。首先，我打算用基本安装虚拟化一个 WinXP，看看它是如何运行的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-16T13:29:22.337

我是一名顾问，倾向于在各种环境中工作。我携带一个 Thinkpad，在 Ubuntu64 上运行 VMWare 服务器，内存为 4GB。我有一个 320GB 的辅助硬盘驱动器，仅用于虚拟机，并且有 25 个左右不同的虚拟机，可以根据情况需要启动。

它们是 Linux 服务器和工作站、Vista 工作站和 XP 工作站的混合体。我很少使用 VMWare 服务器控制台。我通过其中一种远程访问方法访问它们中的每一个。

对于 Linux，我通常安装 FreeNX 或 NXServer 用于桌面访问，只安装 SSH 用于命令行。在 Windows 上，我总是使用远程桌面 (RDP)，但在 XP 上，它只适用于“Pro”版本，而不适用于“Home”版本。如果一切都失败了，我会安装 VNC 并使用它。VNC 位于我列表的底部，因为它确实是最后的手段。唯一比实际上无法使用机器更好的事情。

但是，Linux 上的 NX 和 Windows 上的 RDP 比 VNC 运行得更好。除了字体平滑和精美的桌面效果之类的小东西之外，唯一的大故障是如果您对视频或音频或基于 DirectX 的东西做了很多事情。YouTube 或其他视频之类的东西不喜欢使用我知道的任何远程桌面协议。

就性能而言，使用 Linux 作为 VMWare 的主机可以很好地管理系统资源。基于 Windows 的 VM 不仅能够吞噬内存，而且在需要时仍能获得。

我整天在 Visual Studio 2008 上的虚拟 Vista 工作站中进行 C# 开发，并且通过无线 VPN 连接的另一台机器上同时打开 3-4 个不同的解决方案以及通过 RDP 连接的正常内容，绝对没有问题。

我可以切换到主机操作系统，它甚至根本不会触及交换空间。就我而言，这是一种很好的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T11:49:06.930

如果您想使用相同的安装，您应该认真考虑远程桌面服务器/客户端解决方案，它捆绑到 XP 的每个 Windows 操作系统中。基本上，这个应用程序使用高度压缩的图像显示从远程桌面到本地桌面的视图；即使通过低带宽的 Internet 连接也可以工作 虽然 XP 版本只能同时处理一个用户，但 Windows Server 2003（以及 Windows Server 2008，我认为）中的一个可以处理多个用户（达到一定限制）。

缺点和副作用包括：

*   通过 RDC 的虚拟 PC 速度很慢
*   任何使用 3d 加速的东西都会很慢（至少使用 XP/2003）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T11:42:23.903

就个人而言，我会使用带有一些远程登录软件的虚拟工作站。根据我的经验，VMWare 的网络性能一直很好，并且根据操作系统，可能会提供不错的远程登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T11:42:22.470

我想您可以使用 Logmein Free。[或 Pro，如果你想要这些功能]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T11:42:27.727

好吧，你没有说涉及到哪些操作系统，所以......

对于 Windows，我发现远程桌面的效果与其他任何东西一样好或更好，尽管如果您为带有镜像驱动程序的 RealVNC 版本付费，那应该一样好。对于 Windows 的异地访问，www.logmein.com（免费版）运行良好。

如果涉及 Unix，那么 VNC 肯定是要走的路，有各种远程解决方案。从重定向服务器到仅将防火墙中的端口转发到 ssh 服务器并设置各种隧道的所有内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T12:00:50.697

VMWare 的性能非常好，我可以在笔记本电脑上同时运行 SQL Server 切片、Web 服务器切片和开发。VM 片驻留在 USB 2 便携式驱动器上，便于在笔记本电脑和台式机之间进行移植。

VM 控制台适用于访问每个环境，并且根据您使用 NAT 与桥接设置的配置，您可以 UNC 以在切片上共享。

这样做的好处是，如果您的主机一探究竟，您可以快速恢复您的开发环境。

# c# - 将 UserControl 属性设置为不显示在 VS 属性窗口中

> ID：71440
> 
> 赞同：6
> 
> 时间：2008-09-16T11:41:03.377
> 
> 标签：c#, asp.net, visual-studio, properties, attributes

我的 Asp.net 项目中有一个具有公共属性的 UserControl。当用户在 IDE 中突出显示 UserControl 的实例时，我不希望此属性显示在 Visual Studio 属性窗口中。我应该使用什么属性（或其他方法）来防止它出现？

```
class MyControl : System.Web.UI.UserControl {
  // Attribute to prevent property from showing in VS Property Window?
  public bool SampleProperty { get; set; }

  // other stuff
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-16T11:43:03.637

使用以下属性...

```
using System.ComponentModel;

[Browsable(false)]
public bool SampleProperty { get; set; } 
```

在 VB.net 中，这[将是](https://stackoverflow.com/questions/71440/set-a-usercontrol-property-to-not-show-up-in-vs-properties-window#71481)：

```
<System.ComponentModel.Browsable(False)> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T11:43:38.003

[大量的属性](http://www.c-sharpcorner.com/UploadFile/mgold/PropertyGridInCSharp11302005004139AM/PropertyGridInCSharp.aspx)可以控制 PropertyGrid 的工作方式。

```
[Browsable(false)]
public bool HiddenProperty {get;set;} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T11:46:57.467

使用`System.ComponentModel.Browsable`属性来

```
> ' VB
> 
>     <System.ComponentModel.Browsable(False)> 
```

或者

```
// C#
    [System.ComponentModel.Browsable(false)] 
```

# java - OCSP命令行测试工具？

> ID：71468
> 
> 赞同：3
> 
> 时间：2008-09-16T11:44:28.643
> 
> 标签：java, python, command-line, ocsp

有人知道测试 OCSP 响应的工具吗？最好是可以从 Windows 命令行使用和/或可以（轻松）包含在 Java/python 程序中的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T14:32:40.190

再看一点，我想我找到了一些答案：

a) 救援中的 OpenSSL：

```
openssl ocsp -whatever 
```

欲了解更多信息，[http://www.openssl.org/docs/apps/ocsp.html](http://www.openssl.org/docs/apps/ocsp.html)

b) [http://www.openvalidation.org/](http://www.openvalidation.org/)是另一种测试证书的方式。通过它的链接，我得到：

*   [http://security.polito.it/tools/ocsp/](http://security.polito.it/tools/ocsp/)
*   Ascertia OCSP 客户端工具 ( [http://www.ascertia.com/products/ocsptool/](http://www.ascertia.com/products/ocsptool/) )
*   Ascertia OCSP Crusher 工具（一个 OCSP 负载生成器）（[http://www.ascertia.com/products/ocspCrusher/](http://www.ascertia.com/products/ocspCrusher/)）

感谢所有的答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:23:38.253

newpki 客户端声称能够做到这一点。 [http://www.newpki.org/](http://www.newpki.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T16:39:33.943

bouncycastle 有一个 Java 加密提供程序并支持 OCSP 请求和响应。不过，OCSPREq 和 OCSPRequest 以及 OCSPResp 和 OCSPResponse 类之间的区别有点令人困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-11T21:53:18.420

这是一个很好的资源，可以使用 OpenSSL 拥有一个简单的 OCSP 客户端或 OCSP 响应程序：http: [//backreference.org/2010/05/09/ocsp-verification-with-openssl/](http://backreference.org/2010/05/09/ocsp-verification-with-openssl/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T12:25:07.937

您可以按照附录 A 中的规范通过 HTTP 对其进行测试吗？如果是这样，那么您可以使用任何 Web 测试工具。既然您提到了 Java，就会想到[JMeter 。](http://jakarta.apache.org/jmeter/)使用 JMeter，您可以创建您的 java 代码来进行验证等，并在您的测试用例中重新使用它。

您可以使用 CMD 行以外的其他内容，例如通过[Cygwin](http://cygwin.com)的 BASH 脚本吗？

您仍然需要编写一些脚本来验证测试，也许使用[openssl](http://www.openssl.org/docs/apps/ocsp.html)？

```
curl http://some.ocsp.url/ > resp.der
openssl ocsp -respin resp.der -text

```

见页面[http://www.ietf.org/rfc/rfc2560.txt](http://www.ietf.org/rfc/rfc2560.txt)

# java - Spring 2.5 中的枚举和依赖注入图

> ID：71469
> 
> 赞同：3
> 
> 时间：2008-09-16T11:44:28.877
> 
> 标签：java, spring, enums, maps

假设我们有以下 Java 代码：

```
public class Maintainer {
   private Map<Enum, List<Listener>> map;

   public Maintainer() {
      this.map = new java.util.ConcurrentHashMap<Enum, List<Listener>>();
   }

   public void addListener( Listener listener, Enum eventType ) {
      List<Listener> listeners;
      if( ( listeners = map.get( eventType ) ) == null ) {
         listeners = new java.util.concurrent.CopyOnWriteArrayList<Listener>();
         map.put( eventType, listeners );
      }
      listeners.add( listener );
   }
} 
```

这段代码片段只不过是稍微改进的侦听器模式，其中每个侦听器都在告诉它感兴趣的事件类型，并且提供的方法维护这些关系的并发映射。

最初，我希望通过我自己的注释框架调用此方法，但遇到了各种注释限制的砖墙（例如，您不能将*java.lang.Enum*作为注释参数，还有一组各种类加载器问题）因此决定使用Spring。

谁能告诉我如何 Spring_ify_ 这个？我想要实现的是：
1\. 将*维护者*类定义为 Spring bean。
2\. 使各种监听器都可以使用*addListener*方法通过XML注册到*Maintainer 。*Spring doc 和 Google 在示例中都非常慷慨。

 *有没有办法轻松实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T11:51:23.773

执行以下操作会有什么问题：

使用 addListener(Listener, Enum) 方法定义“Maintainer”接口。

创建一个实现维护者的 DefaultMaintainer 类（如上）。

然后，在每个 Listener 类中，“注入”Maintainer 接口（构造函数注入可能是一个不错的选择）。然后侦听器可以向维护者注册自己。

除此之外，我还不是 100% 清楚你目前在 Spring 上的困难是什么！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T15:13:51.167

稍微偏离主题（因为这与 Spring 无关），但在您的 AddListener 实现中存在竞争条件：

```
 if( ( listeners = map.get( eventType ) ) == null ) {
     listeners = new java.util.concurrent.CopyOnWriteArrayList<Listener>();
     map.put( eventType, listeners );
  }
  listeners.add( listener ); 
```

如果两个线程同时调用此方法（对于以前没有侦听器的事件类型），map.get( eventType ) 将在两个线程中返回 null，每个线程将创建自己的 CopyOnWriteArrayList（每个线程都包含一个侦听器），一个线程将替换另一个线程创建的列表，第一个监听器将被遗忘。

要解决此问题，请更改：

```
private Map<Enum, List<Listener>> map;

...

map.put( eventType, listeners ); 
```

到：

```
private ConcurrentMap<Enum, List<Listener>> map;

...

map.putIfAbsent( eventType, listeners );
listeners = map.get( eventType ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T18:05:30.113

> 1）将Maintainer类定义为Spring bean。

标准 Spring 语法适用：

```
<bean id="maintainer" class="com.example.Maintainer"/> 
```

> 2) 使各种监听器都能够使用 addListener 方法通过 XML 将自己注册到维护者。Spring doc 和 Google 在示例中都非常慷慨。

这更棘手。您*可以*使用`MethodInvokingFactoryBean`单独调用`maintainer#addListener`，如下所示：

```
<bean id="listener" class="com.example.Listener"/>

<bean id="maintainer.addListener" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
  <property name="targetObject" ref="maintainer"/>
  <property name="targetMethod" value="addListener"/>
  <property name="arguments">
    <list>
      <ref>listener</ref>
      <value>com.example.MyEnum</value>
   </list>
 </property>
</bean> 
```

然而，这是笨重的，并且可能容易出错。我在一个项目上尝试了类似的东西，并创建了一个 Spring 实用程序类来提供帮助。我目前没有可用的源代码，所以我将描述如何实现我所做的。

1）将监听的事件类型重构为`MyListener`接口

```
public interface MyListener extends Listener {
  public Enum[] getEventTypes()
} 
```

这将注册方法更改为

```
public void addListener(MyListener listener) 
```

2）创建Spring帮助类，在上下文中找到所有相关的监听器，并为找到的每个监听器调用maintainer#addListener。我将从 , 开始`BeanFilteringSupport`，并在所有 bean 都被实例化后实现`BeanPostProcessor`（或）注册 bean。`ApplicationListener`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T14:46:54.867

> 你说“......你不能将 java.lang.Enum 作为”注解参数......”

我认为你错了。我最近在一个项目上使用了这样的东西：

```
public @interface MyAnnotation {
    MyEnum value();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T09:48:20.753

谢谢大家的回答。首先，快速跟进所有答案。
1\. (alexvictor) 是的，您可以将具体*枚举*作为注释参数，但不能使用*java.lang.Enum*。
2\. flicken提供的答案是正确的，可惜有点吓人。我不是 Spring 专家，但以这种方式做事（创建方法以便于 Spring 访问）这似乎有点矫枉过正，*MethodInvokingFactoryBean*解决方案也是如此。尽管我想对您的时间和精力表示衷心的感谢。
3\. Phill 的回答有点不寻常（不是注入侦听器 bean，而是注入它的维护者！），但我相信，这是所有可用的最干净的。我想我会沿着这条路走下去。

再次，非常感谢您的帮助。

# c++ - 虚拟文件从 Internet 临时文件打开

> ID：71475
> 
> 赞同：0
> 
> 时间：2008-09-16T11:45:43.240
> 
> 标签：c++, windows, shell32

我创建了一个以 Desktop 为根的命名空间扩展。扩展的主要目的是提供一个虚拟的 ZIP 文件列表，代表一个可配置目录的列表。当用户单击其中一项时，相关目录的内容将被压缩到位，并且生成的 ZIP 文件存储在缓存文件夹中。

除了一个小问题，所有这些都很好。如果我们转到 Windows 资源管理器，打开扩展并双击一个项目，打开的文件是缓存中的那个。[正确的]

另一方面，如果我们通过打开对话框打开它，则打开的文件是来自 Internet 临时文件目录的文件。[不正确]

为了从缓存文件夹而不是从 Internet 临时文件中打开文件，我必须为打开对话框（例如通过 notepad.exe 使用时）更改什么。我试图在 IShellFolder::GetDisplayNameOf 中始终发送合格的文件名，但没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-18T14:31:08.257

听起来您没有传入正确的初始目录（在 OPENFILENAME 结构的 lpstrInitialDir 或 lpstrFile 参数中）。

在 lpstrInitialDir 中输入您的缓存目录并将 lpstrFile 留空，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-29T07:40:29.423

该问题已通过屏蔽接口方法[IShellFolder::GetAttributesOf](http://msdn.microsoft.com/en-us/library/bb775068(VS.85).aspx)`SFGAO_FILESYSTEM`的实现返回的属性得到解决。

# ssis - 使用 SSIS 从 Hyperion 7.3 中提取数据的选项有哪些？

> ID：71476
> 
> 赞同：0
> 
> 时间：2008-09-16T11:46:03.240
> 
> 标签：ssis, etl, hyperion, essbase

我们需要使用 SSIS 从一些 Hyperion 多维数据集（数据库）中获取数据。是否有任何可用的连接管理器？有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-26T19:13:05.950

那里有一些第三方连接器。不要认为甲骨文或微软存在任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:55:58.730

我知道这是一个非常古老的问题，但我只是碰巧遇到了它，并认为我会提供一些观点。没有内置支持使用 SSIS 从 Hyperion 获取数据。然而，有几种方法可以走。

您可以使用计算或报告脚本相当轻松地将 Hyperion 数据导出到文本/SQL。您可以使用 SSIS 运行一个批处理文件，该批处理文件启动加载 SQL 数据库或文本文件的 Hyperion 作业，*然后*使用 SSIS 加载它。

有一些带有 Essbase 适配器的工具，因此如果您不使用 SSIS，您可以使用这些工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:54:05.210

我没有任何使用 Hyperion 的经验，但是您可以使用 SSIS 中的脚本任务吗？

# php - 在 PHP 中定义类方法

> ID：71478
> 
> 赞同：7
> 
> 时间：2008-09-16T11:46:15.207
> 
> 标签：php, class

是否可以在OUTSIDE中`PHP (as it is in C++)`声明`class method``class definition?`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T11:59:55.937

不，从 PHP 5.2 开始。但是，您可以使用`__call`魔术方法将调用转发到任意函数或方法。

```
class A {

    public function __call($method, $args) {
        if ($method == 'foo') {
            return call_user_func_array('bar', $args);
        }
    }

}

function bar($x) {
    echo $x;
}

$a = new A();
$a->foo('12345'); // will result in calling bar('12345') 
```

在 PHP 5.4 中支持*traits*。Trait 是不能作为独立对象实例化的方法的实现。相反，特征可用于扩展具有包含实现的类。[在此处](http://www.stefan-marr.de/artikel/rfc-traits-for-php.html)了解有关特征的更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-08-12T16:23:08.880

是的，可以在定义 PHP 类后添加一个方法。您想使用[classkit](http://www.php.net/manual/en/ref.classkit.php)，这是一个“实验性”扩展。但是，默认情况下似乎未启用此扩展，因此这取决于您是否可以在 Windows 上编译自定义 PHP 二进制文件或加载 PHP DLL（例如 Dreamhost 确实允许自定义 PHP 二进制文件，并且它们很容易设置）。

```
<?php
class A { }
classkit_method_add('A', 'bar', '$message', 'echo $message;', 
    CLASSKIT_ACC_PUBLIC); 
$a = new A();
$a->bar('Hello world!'); 
```

PHP手册中的示例：

```
<?php
class Example {
    function foo() {
        echo "foo!\n";
    }
}

// create an Example object
$e = new Example();

// Add a new public method
classkit_method_add(
    'Example',
    'add',
    '$num1, $num2',
    'return $num1 + $num2;',
    CLASSKIT_ACC_PUBLIC
);

// add 12 + 4
echo $e->add(12, 4); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T12:01:09.523

您也许可以覆盖[__call 或 __callStatic](http://php.net/manual/en/language.oop5.overloading.php)以在运行时定位丢失的方法，但您必须构建自己的系统来定位和调用代码。例如，您可以加载“Delegate”类来处理方法调用。

下面是一个例子——如果你试图调用$foo->bar()，这个类会试图创建一个FooDelegate_bar 类，并用相同的参数调用它的bar()。如果您设置了类自动加载，则委托可以保存在单独的文件中，直到需要...

```
class Foo {

    public function __call($method, $args) {
        $delegate="FooDelegate_".$method;
        if (class_exists($delegate))
        {
             $handler=new $delegate($this);
             return call_user_func_array(array(&$handler, $method), $args);
        }

    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-11-05T13:28:05.513

由于 PHP 5.3 支持闭包，您可以将实例方法动态定义为持有闭包的变量：

```
$class->foo = function (&$self, $n) {
  print "Current \$var: " . $self->var . "\n";
  $self->var += $n;
  print "New \$var:     " .$self->var . "\n";
}; 
```

以`$self`（不能使用`$this`外部对象上下文）作为参考（`&`），您可以修改实例。

但是，当您尝试正常调用该函数时会出现问题：

```
$class->foo(2); 
```

你得到一个致命的错误。由于语法，PHP 认为`foo`是一种方法。`$class`此外，您必须将实例作为第一个参数传递。

幸运的是，有一个特殊的函数可以按名称调用函数`call_user_func`：

```
call_user_func($class->foo, &$class, 2);
# => Current $var: 0
# => New $var:     2 
```

只要记住放在`&`实例变量之前。

如果您使用`__call`魔术方法，则更容易：

```
class MyClass {
  public function __call ($method, $arguments)  {
    if (isset($this->$method)) {
      call_user_func_array($this->$method, array_merge(array(&$this), $arguments));
    }
  }
} 
```

现在你可以打电话`$class->foo(2)`了。魔术`__call`方法捕获对未知方法的调用，并调用`$class->foo`与被调用方法同名的变量中的闭包。

当然，如果`$class->var`是私有的，存储在`$class->foo`变量中的闭包将无法访问它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T11:51:11.637

不。

但是，如果有帮助，您可以扩展先前声明的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T12:00:33.660

不，这是不可能的。如果您在类构造之外定义函数/方法，它将成为全局函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T12:02:24.700

C++ 也无法做到这一点。您是否将声明与*定义混淆*了？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T12:13:16.030

不，正如大家所说，严格来说不可能。

但是，您可以执行[类似](http://www.symfony-project.org/book/1_0/17-Extending-Symfony)的操作来模拟 PHP 中的 mixin 或在运行时将方法添加到类中，这与您将获得的差不多。基本上，它只是使用设计模式来实现相同的功能。Zope 3 做了类似于在 Python 中模拟 mixins 的事情，Python 是另一种不直接支持它们的语言。

# sql-server - 从 SQL Server 2005 Reporting Services 报表调用 .Net 程序集？

> ID：71488
> 
> 赞同：2
> 
> 时间：2008-09-16T11:47:52.067
> 
> 标签：sql-server, reporting-services

我目前有一组报告，其中包含许多位于 .rdl 文件中的代码块中的常用函数。这显然会带来可维护性问题，我想知道是否有人知道这些不同报告共享公共代码库的方法？

理想情况下，我希望在我的 Reporting Services 项目中附加一个 .Net 程序集，我的所有报告都可以从中访问和调用函数。这将省去每次需要对公共功能进行更改时尝试更新和重新部署大约 100 个报告的麻烦。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T12:17:27.940

在报表属性的 Visual Studio 中，在“引用”选项卡上添加包含托管代码的程序集的详细信息。可以使用指定的实例名称从报表中的表达式调用此代码。

此程序集可以存储在 GAC 或 Visual Studio 的 PrivateAssemblies 目录中，并部署到 Reporting Services 服务器上的 Report Service 'bin' 目录。有关详细信息，请参阅[如何在 Reporting Services 中使用自定义程序集或嵌入代码](http://support.microsoft.com/kb/920769)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-10T01:30:22.557

我对此感到很痛苦，所以我希望这对某人有所帮助。您可以从 MSDN 文章中获得它，但我认为以下几点可以帮助您更快地完成此任务。

不要忘记将其添加到您的 rssrvpolicy.config 文件中：

```
<CodeGroup class="UnionCodeGroup"
   version="1"
   PermissionSetName="FullTrust"
   Name="MyCodeGroup"
   Description="Code group for my data processing extension">
      <IMembershipCondition class="UrlMembershipCondition"
         version="1"
         Url="C:\pathtocustomassembly\customassembly.dll"
       />
</CodeGroup> 
```

我忘了这样做，我讨厌它一段时间。

另外，不要忘记使用您的新 dll 访问 2005 年的以下两个文件夹：

```
Program Files\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies 
Program Files\Microsoft SQL Server\MSSQL.3\Reporting Services\ReportServer\bin 
```

另外，不要在您的程序集中使用 log4net。我无法让它工作。也许有人可以，但我不行。

另外，如果您像我一样搞砸了，您将无法删除文件，直到您关闭 Visual Studio。

另外，使您的方法共享或静态。这更容易。

创建部署批处理文件。就像是：

```
@ECHO OFF
REM   Name: SRSDeploy_Local.bat
REM
REM   This batch files copies my custom assembly to my Reporting Services folders.
REM
REM   This is the SQL Server 2005 version:
copy "C:\Projects\Common\lib\SCI.Common.SSRSUtils.dll" "C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies"
copy "C:\Projects\Common\lib\SCI.Common.SSRSUtils.dll" "C:\Program Files\Microsoft SQL Server\MSSQL.2\Reporting Services\ReportServer\bin" 
```

最后，在预览之前构建您的报告。

如果它建立起来，您很可能正在上路。

除了...

您无法将其部署到您的生产报表服务器，因为您总是会收到以下错误：

加载代码模块时出错

这就是我现在正在做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T11:57:27.957

以下文章列出了从 SSRS 报告中调用 .Net 代码的几乎所有不同方式。[使用自定义代码扩展 Microsoft SQL Server 2000 Reporting Services](http://technet.microsoft.com/en-us/library/aa902641(SQL.80).aspx)

如果所有这些报告在同一台服务器上运行，另一个需要考虑的选择是在数据库中使用 .Net 存储过程来保存您的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:23:10.907

非常感谢你们，我现在可以从我的报告中调用我的程序集了。

**补充问题：** 当我创建我的程序集时，是否可以包含一个命名空间，使其了解报表设计器中的对象，例如字段和参数？如果我能以强类型的方式将一组字段传递给我的程序集，那就太好了。

**答案是：**几个小时的搜索表明，在我的程序集中添加 \Program Files\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies\Microsoft.ReportingServices.ProcessingObjectModel.dll 作为参考可以让我访问各种 Reporting Services 类型，例如字段和参数。请注意，在 Reporting Services 2008 中，[命名空间更改](http://msdn.microsoft.com/en-us/library/ms143380.aspx)为.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T11:56:33.480

您必须部署到 GAC。 [http://www.developerdotstar.com/community/node/333](http://www.developerdotstar.com/community/node/333)

# java - 你如何从网页（Java）中获取文本？

> ID：71491
> 
> 赞同：3
> 
> 时间：2008-09-16T11:48:33.127
> 
> 标签：java, html, html-content-extraction

我打算编写一个简单的 J2SE 应用程序来聚合来自多个 Web 源的信息。

我认为，最困难的部分是从网页中提取有意义的信息，如果它不能作为 RSS 或 Atom 提要提供的话。例如，我可能想从 stackoverflow 中提取问题列表，但我绝对不需要那个巨大的标签云或导航栏。

你会建议什么技术/图书馆？

**更新/备注**

*   速度并不重要——只要它可以在 10 分钟内解析大约 5MB 的 HTML。
*   这真的很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T11:57:03.713

您可以结合使用 HTMLParser ( [http://htmlparser.sourceforge.net/](http://htmlparser.sourceforge.net/)in) ) 和 URL#getInputStream() 来解析托管在 Internet 上的 HTML 页面的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T11:54:49.647

你可以看看 httpunit 是如何做到的。他们使用了几个不错的 html 解析器，一个是 nekohtml。至于获取数据，您可以使用 jdk (httpurlconnection) 内置的内容，或使用 apache

[http://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T12:25:35.173

如果您想利用任何结构或语义标记，您可能想探索将 HTML 转换为 XML 并使用 XQuery 以标准形式提取信息。查看[IBM developerWorks 文章](http://www.ibm.com/developerworks/xml/library/j-jtp03225.html)中的一些典型代码，摘录如下（它们输出的是 HTML，当然，这不是必需的）：

```
<table>
{
  for $d in //td[contains(a/small/text(), "New York, NY")]
  for $row in $d/parent::tr/parent::table/tr
  where contains($d/a/small/text()[1], "New York")
  return <tr><td>{data($row/td[1])}</td> 
           <td>{data($row/td[2])}</td>              
           <td>{$row/td[3]//img}</td> </tr>
}
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T12:31:41.790

您可以使用[nekohtml](http://sourceforge.net/projects/nekohtml)来解析您的 html 文档。您将获得一个 DOM 文档。您可以使用 XPATH 来检索您需要的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T13:12:29.693

您是否考虑过利用 RSS/Atom 提要？当内容通常以可消耗的格式提供给您时，为什么要抓取内容？有一些库可用于以您能想到的任何语言使用 RSS，与尝试抓取内容相比，它对页面标记的依赖要少得多。

如果您绝对必须抓取内容，请在标记中查找[微格式](http://microformats.org)，大多数博客（尤其是基于 WordPress 的博客）默认都有此功能。还有一些库和解析器可用于从网页中定位和提取微格式。

[最后， Yahoo Pipes](http://pipes.yahoo.com/pipes/)等聚合服务/应用程序可以为您完成这项工作，而无需重新发明轮子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T11:51:56.363

简而言之，您可以解析整个页面并选择您需要的东西（为了速度，我建议查看 SAXParser）或通过修剪所有 HTML 的正则表达式运行 HTML ...您也可以将其全部转换为 DOM，但这会很昂贵，尤其是如果您希望获得不错的吞吐量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T11:52:13.943

你似乎想要屏幕刮。您可能希望通过每个源站点的适配器/插件编写一个框架（因为每个站点的格式会有所不同），您可以解析 html 源并提取文本。您可能会使用 java 的 io API 连接到 URL 并通过 InputStreams 流式传输数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T12:06:24.160

如果你想用老式的方式来做，你需要用一个套接字连接到网络服务器的端口，然后发送以下数据：

```
GET /file.html HTTP/1.0
Host: site.com
<ENTER>
<ENTER> 
```

然后使用`Socket#getInputStream`, 然后使用 BufferedReader 读取数据，并使用您喜欢的任何内容解析数据。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T13:05:42.957

如果您的“网络资源”是使用 HTML 的常规网站（而不是像 RSS 这样的结构化 XML 格式），我建议您查看[HTMLUnit](http://htmlunit.sourceforge.net/)。

这个库虽然是针对测试的，但实际上是一个通用的“Java 浏览器”。它建立在 Apache httpclient、Nekohtml 解析器和 Rhino 之上，以支持 Javascript。它为网页提供了一个非常好的 API，并允许轻松地遍历网站。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-01-30T07:41:28.527

看看这个[http://www.alchemyapi.com/api/demo.html](http://www.alchemyapi.com/api/demo.html)

他们返回了相当不错的结果，并且有一个适用于大多数平台的 SDK。不仅是文本提取，它们还进行关键字分析等。

# windows - 我应该在 Windows 上使用哪个版本的 Perl？

> ID：71513
> 
> 赞同：100
> 
> 时间：2008-09-16T11:53:41.210
> 
> 标签：windows, perl, debugging, strawberry-perl

win32.perl.org网站提供了几个用于 MS Windows 的 Perl 发行版的参考[。](http://win32.perl.org/)

很长一段时间以来，我一直在使用 [ActiveState](http://www.activestate.com/)中的 ActivePerl，但最近我改用了 [Strawberry Perl](http://strawberryperl.com/)。

恕我直言，Active Perl 相对于 Strawberry Perl 的唯一优势是它带有 Perl Tk，这意味着它易于安装 [Devel::ptkdb](http://search.cpan.org/dist/Devel-ptkdb/)图形调试器。除此之外，我认为 Strawberry Perl 具有所有优点。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2008-09-16T12:10:28.113

[Strawberry Perl](http://strawberryperl.com/)正在变得越来越好。我在 ActiveState 中反复遇到的一个问题是我的模块有时无法安装，因为我需要升级到核心模块，但他们不允许这样做。因此，每个*不*使用 Windows 的人都可以使用我的代码，但他们不能使用 ActiveState 的 Perl 来做到这一点。

ActiveState 还有一个非常狡猾的构建系统，它经常无法准确报告模块构建失败的原因。我厌倦了通过电子邮件询问这些信息，最终放弃了。我希望我的代码在 Windows 上运行，但如果 ActiveState 没有为我提供该信息并且没有给我任何升级核心模块的选项，我就无法使用它。我的一些模块在任何操作系统上都没有构建失败——除了那些使用 ActiveState Perl 的模块。支持 Strawberry Perl，不用担心 ActiveState。

如果 ActiveState 已经修复了他们的构建系统和他们的“不升级核心模块”政策，那么值得重新审视。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-09-16T14:16:29.197

没有单一的最佳 Perl 发行版。[Vanilla Perl](http://vanillaperl.com)（可重定位、可再分发的 Perl）和它对开发人员更友好的[Strawberry Perl](http://strawberryperl.com/)具有巨大的潜力。

[然而， ActivePerl](http://activestate.com/perl)如此受欢迎是有充分理由的。优势主要体现在最终用户易于部署（无需编译器即可使用其包管理器 PPM）。ActiveState PDK（Perl 开发工具包）也是一种非常好的打包完整 Windows 二进制文件的方法，不需要在用户机器上安装任何 Perl。

不幸的是，许多非常好的 CPAN 模块（如 OpenSSL 的 Perl 绑定）无法通过 ActiveState 的存储库获得。

像大多数事情一样，您应该根据最能满足您需求的发行版进行选择。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-09-16T13:17:39.120

我主要使用 ActivePerl，但我真的很喜欢 Strawberry Perl 的发展方向。我喜欢 cpan shell “正常工作”，而且我不必跳过一堆箍来安装 XS 模块。（例如 ExtUtils::FakeConfig，尽管在最近的 ActivePerl 构建中这不是必需的。）我也对 Perl 在拇指驱动器上的可能性感到兴奋。[Portable Perl](http://portableapps.com/node/12404#comment-73751)的开发版已经非常有用了。

我同意 ActivePerl 的主要优点是 Tk 开箱即用，但请注意，从 5.10 开始，ActivePerl 默认不再附带 Tk。它与 Tkx 一起提供。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-09-16T13:42:37.283

未来肯定是草莓 Perl。无论您选择哪种（并且此问题并非 Windows 独有），如果您将最终结果分发到其他机器，则必须小心您提供的安装程序/安装说明。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-10-17T17:20:22.233

[Strawberry Perl](http://strawberryperl.com/)更像是 *nix 上的 Perl。它带有[MinGW](http://www.mingw.org/)，可以单独使用。Perl 模块也可以使用 ppm 或 cpan 安装。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-01T15:14:30.057

我总是使用 Cygwin（带有 bash 的 xterms 比 cmd windows 好得多）和它附带的 Perl。我使用 CPAN shell（“cpan”命令）安装 Perl 模块；它工作正常。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-08-24T18:23:13.163

到目前为止，我更喜欢草莓 Perl。一方面，它将 gcc 作为 mingwin 的一部分安装，因此您可以直接从 CPAN 安装。

我使用了 ActiveState 的 perl 一段时间，但是尽管它们（看似）配置相同，但从一台机器到另一台机器我有很多脆弱性。他们的 PPM 模块包装也留下了不好的味道。它使管理包变得非常简单，但您依赖它们在 CPAN 更新后更新 PPM。此外，PPM 绝不是 CPAN 的全部内容。上次我使用 ActivePerl 时，我很难找到我需要的所有模块，而且那里的模块通常是旧版本。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-16T13:24:49.977

ActiveState Perl 被认为是事实上的 Windows Perl 已经有一段时间了。虽然它有很多缺陷，而且我们很多人都使用其他东西，但它仍然很受欢迎。如果您正在构建要在 Windows 机器（不是您自己的机器）上执行的 Perl 代码，我会考虑在编写它时着眼于默认（或尽可能默认）作为执行它的 Perl 安装。其他任何事情，您都会为以后尝试使用您的应用程序的其他人引入进入障碍。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-10-17T07:08:51.173

我对草莓有很大的问题，我觉得没有支持。PerlMonks 的好人帮不了我，我放弃了。如果[此页面](http://strawberryperl.com/support.html)让您缺乏信心，这就是您的答案。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-23T19:19:09.660

我编写的代码是在财富 500 强公司中使用的，因此“公司”的感觉很有帮助。到目前为止，我一直在使用 ActivePerl，它对于内部工具和分发给那些大客户的工作都很好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-02-25T02:02:42.460

我正在使用 Active State Perl 5.014，它工作正常。

问题是，它没有最新版本的 Padre（IDE，调试环境）。

# .net - 是否有自定义 FxCop 规则可以检测未使用的 PUBLIC 方法？

> ID：71518
> 
> 赞同：9
> 
> 时间：2008-09-16T11:54:53.687
> 
> 标签：.net, code-analysis, fxcop, public-method

我刚试过 FxCop。它确实检测到未使用的私有方法，但未检测到未使用的公共方法。是否有我可以下载的自定义规则，插件将检测未从同一程序集中调用的公共方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-16T12:59:41.240

Corey，我对使用 FxCop 的回答假设您有兴趣删除未使用的私有成员，但是要解决其他情况下的问题，您可以尝试使用[NDepend](http://www.ndepend.com/)。这是一些用于检测未使用的公共成员的 CQL（改编自下面列出的文章）：

```
// <Name>Potentially unused methods</Name>
WARN IF Count > 0 IN SELECT METHODS WHERE
 MethodCa == 0 AND            // Ca=0 -> No Afferent Coupling -> The method 
                              // is not used in the context of this
                              // application.

 IsPublic AND                 // Check for unused public methods

 !IsEntryPoint AND            // Main() method is not used by-design.

 !IsExplicitInterfaceImpl AND // The IL code never explicitely calls 
                              // explicit interface methods implementation.

 !IsClassConstructor AND      // The IL code never explicitely calls class
                              // constructors.

 !IsFinalizer                 // The IL code never explicitely calls
                              // finalizers. 
```

资料来源：[Patrick Smacchia 的“关于耦合、死代码、设计缺陷和重新设计的代码指标](http://codebetter.com/blogs/patricksmacchia/archive/2008/02/15/code-metrics-on-coupling-dead-code-design-flaws-and-re-engineering.aspx)。文章还讨论了检测死字段和类型。

*（编辑：使答案更容易理解）*

* * *

编辑 2012 年 6 月 11 日：*解释有关未使用代码的新 NDepend 设施。免责声明：我是这个工具的开发者之一。*

自 2012 年 5 月 NDepend v4 发布以来，该工具提出了编写[代码规则 over LINQ Query (CQLinq)](http://codebetter.com/blogs/patricksmacchia/archive/2008/02/15/code-metrics-on-coupling-dead-code-design-flaws-and-re-engineering.aspx)。提出了大约[200 条默认代码规则](http://www.ndepend.com/DefaultRules/webframe.html)，其中 3 条专用于*未使用/死代码*检测：

*   [潜在的死类型](http://www.ndepend.com/DefaultRules/webframe.html?Q_Potentially_dead_Types.html)（因此检测未使用的类、结构、接口、委托......）
*   **[潜在的死方法](http://www.ndepend.com/DefaultRules/webframe.html?Q_Potentially_dead_Methods.html)**（因此检测未使用的方法、ctor、属性 getter/setter...）
*   [潜在死区](http://www.ndepend.com/DefaultRules/webframe.html?Q_Potentially_dead_Fields.html)

这些 CQLinq 代码规则比以前的 CQL 更强大。如果你点击上面这3个链接查看这些规则的源代码，你会发现关于类型和方法的部分有点复杂。这是因为它们不仅检测未使用的类型和方法，还检测*仅*由未使用的死类型和方法（递归）使用的类型和方法。

这是*静态分析*，因此规则名称中的前缀*可能是。*如果*仅*通过反射使用代码元素，则这些规则可能会将其视为未使用，但事实并非如此。

除了使用这 3 条规则之外，我还建议通过测试来衡量代码覆盖率并争取完全覆盖。通常，您会看到测试无法覆盖的代码实际上是可以安全丢弃的*未使用/死代码。*这在不清楚代码分支是否可达的复杂算法中特别有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T12:31:22.150

如果一个方法未被使用并且公共 FxCop 假定您已将其公开以供外部事物访问。

如果未使用的公共方法导致 FxCop 警告，编写 API 之类的东西会很痛苦 - 对于您打算让其他人使用的方法，您会收到大量的 FxCop 警告。

如果您不需要任何外部的东西来访问您的程序集/exe，请考虑`public`使用`internal`. 您的应用程序将运行相同，FxCop 将能够找到未引用的内部方法。

如果您确实需要外部访问，请找出真正需要外部访问的方法，并将其余所有方法设置为内部。

您使外部可见的任何方法也可以进行单元测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T11:58:32.650

[NDepend](http://www.ndepend.com/)是你这种事情的朋友

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T12:08:30.893

它怎么知道公共方法未被使用？

通过将方法标记为公共的，任何引用您的库的应用程序都可以访问它。

# topology - 拓扑绘图工具

> ID：71525
> 
> 赞同：1
> 
> 时间：2008-09-16T11:56:12.420
> 
> 标签：topology

我需要绘制一些简单的网络拓扑图，感谢一些好的工具的建议。

编辑：爱免费软件:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T11:59:07.470

试试[Dia](http://live.gnome.org/Dia) - 它是开源和跨平台的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T12:00:26.420

[SmartDraw](http://www.smartdraw.com)是最好的。它的成本，但值得dosh。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T03:54:38.153

易于使用，功能齐全，美观且免费 - [yEd](http://www.yworks.com/en/products_yed_about.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T11:58:01.543

如果您希望布局是自动的，那么[Graphviz非常棒。](http://www.graphviz.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T11:58:16.673

Omnigraffle 如果您想手动操作并拥有一台 Mac。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T14:45:30.097

NetworkNotepad 是一个很有用的程序，虽然有点古怪。

# dependencies - 如何使用一个 Makefile 有效地构建组件的不同版本

> ID：71534
> 
> 赞同：2
> 
> 时间：2008-09-16T11:57:47.050
> 
> 标签：dependencies, makefile

我希望我没有把自己画到角落里。我已经通过实现 Makefile 获得了似乎大部分的方法，但我无法让最后一点工作。我希望这里有人可以提出一种技术来做我想做的事情。

我在源存储库的版本控制文件中有我称之为“材料清单”的东西，我构建了类似的东西：

```
make VER=x 
```

我希望我的 Makefile 使用 $(VER) 作为标签来从存储库中检索 BOM，生成要包含在 Makefile 中的依赖文件，重新扫描包含该依赖项，然后构建产品。

更一般地说，我的 Makefile 可能有几个目标——A、B、C 等——我可以构建每个目标的不同版本，所以我可以这样做：

```
make A VER=x
make B VER=y
make C VER=z 
```

依赖文件包含所有三个目标的信息。

但是，创建依赖文件有点昂贵，所以如果我这样做：

```
make A VER=x
...make source (not BOM) changes...
make A VER=x 
```

我真的很希望 Makefile 不重新生成依赖项。为了使事情尽可能复杂，我可能会这样做：

```
make A VER=x
.. change version x of A's BOM and check it in
make A VER=x 
```

所以我需要重新生成对第二个构建的依赖。

签出弄乱了用于重新生成依赖项的时间戳，所以我认为我需要一种方法让依赖项文件不依赖于 BOM，而是依赖于 BOM 更改的某些指示。

我所做的是让 BOM 签出发生在 .PHONY 目标中（因此它总是被签出）并跟踪“.sig”文件中最后一次签出的内容（如果签名文件丢失或内容与新文件的签名不同，然后 BOM 更改），并且依赖项生成取决于签名）。在我的 Makefile 顶部，我有一些设置：

```
BOMS = $(addsuffix .bom,$(MAKECMDGOALS)
SIGS = $(subst .bom,.sig,$(BOMS))

DEP = include.d
-include $(DEP) 
```

看来我总是需要做：

```
.PHONY: $(BOMS)

$(BOMS):
     ...checkout TAG=$(VER) $@ 
```

但是，如上所述，如果我这样做，然后继续：

```
$(DEP) : $(BOMS)
     ... recreate dependency 
```

然后每次我调用 make 时都会更新依赖项。所以我尝试：

```
$(DEP) : $(SIGS)
     ... recreate dependency 
```

和

```
$(BOMS):
     ...checkout TAG=$(VER) $@
     ...if $(subst .bom,.sig,$@) doesn't exist
     ...  create signature file
     ...else
     ...  if new signature is different from file contents
     ...    update signature file
     ...  endif
     ...endif 
```

但是当签名改变时，依赖生成不会被触发。我认为这是因为 $(SIGS) 不是目标，所以 make 不会注意到 $(BOMS) 规则何时更新签名。

我尝试创建一个 .sig:.bom 规则并通过触摸管理签出 BOM 的时间戳，但这不起作用。

有人提出了类似的建议：

```
$(DEP) : $(SIGS)
    ... recreate dependency
$(BOMS) : $(SIGS)
    ...checkout TAG=$(VER) $@
$(SIGS) :
    ...if $(subst .bom,.sig,$(BOMS)) doesn't exist
    ...  create it
    ...else
    ...  if new signature is different from file contents
    ...    update signature file
    ...  endif
    ...endif 
```

但是当 SIG 是从 BOM 创建时，BOM 如何依赖于 SIG？正如我读到的那样，“从 BOM 创建 SIG，如果 SIG 比 BOM 更新，则检查 BOM”。我如何引导该过程？第一个 BOM 来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T20:30:02.613

Make 在检测实际文件更改方面非常糟糕，而不仅仅是更新的时间戳。

在我看来，问题的根源在于 bom-checkout 总是会修改 bom 的时间戳，从而导致重新生成依赖项。我可能会尝试解决这个问题——尝试在不弄乱时间戳的情况下签出 bom。结帐工具周围的包装脚本可能会起作用；首先将 bom 签出到一个临时文件，将其与已签出的版本进行比较，仅当新版本不同时才替换它。

如果您没有严格限制使用 make，那么还有其他工具可以更好地检测实际文件更改（例如 SCons）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:15:39.473

我不是制造专家，但我会尝试让 $(BOMS) 依赖于 $(SIGS)，并使 $(SIGS) 目标执行您当前在 $(BOMS) 目标下拥有的 if/else 规则。

```
$(DEP) : $(SIGS)
    ... recreate dependency
$(BOMS) : $(SIGS)
    ...checkout TAG=$(VER) $@
$(SIGS) :
    ...if $(subst .bom,.sig,$(BOMS)) doesn't exist
    ...  create it
    ...else
    ...  if new signature is different from file contents
    ...    update signature file
    ...  endif
    ...endif 
```

**编辑：**你是对的，当然，你不能让 $(BOM) 依赖于 $(SIGS)。但是为了重新创建 $(DEP)，您需要将 $(SIG) 作为目标。也许有一个依赖于 $(BOM) 和 $(SIG) 的中间目标。

```
$(DEP) : $(SIGS)
    ... recreate dependency
$(NEWTARGET) : $(BOMS) $(SIGS)
$(BOMS) : 
    ...checkout TAG=$(VER) $@
$(SIGS) :
    ...if $(subst .bom,.sig,$(BOMS)) doesn't exist
    ...  create it
    ...else
    ...  if new signature is different from file contents
    ...    update signature file
    ...  endif
    ...endif 
```

$(SIGS) 可能还需要依赖于 $(BOMS)，我会用它看看。

# user-interface - 如何使用 Selenium 在 html 文本输入中模拟按 Enter 键？

> ID：71561
> 
> 赞同：9
> 
> 时间：2008-09-16T12:03:23.650
> 
> 标签：user-interface, selenium, selenium-rc

在网络界面中，我有一个文本字段。当用户输入文本并按回车接受时，应用程序执行一个操作。

我想用 Selenium 测试行为。不幸的是，使用 chr(13) 调用 'keypress' 会将字符的表示插入到字段中。

除了提交表格还有其他方法吗？我想模仿预期的用户交互，没有任何快捷方式......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T12:56:56.660

此 Java 代码适用于我：

```
selenium.keyDown(id, "\\13"); 
```

注意逃跑。您可能需要类似 chr(\13)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-10T03:56:20.763

我最终使用了 selenium.keyPress(id, "\\13");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:06:53.080

虽然我没有对此进行测试，但我想您可以使用附加到字符串的“\r\n”来模拟新行。如果不是，请寻找与“Environment.NewLine;”等价的语言 ?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T12:53:12.003

自从我不得不这样做已经有一段时间了，但我似乎记得必须使用 javascript 片段来执行 carrage return 而不是使用 Selenium 按键功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-16T04:50:22.433

你可以使用 Webelement.sendkeys(Keys.Enter);

# sql-server - 使 SQL Server 索引小数字

> ID：71562
> 
> 赞同：6
> 
> 时间：2008-09-16T12:03:30.483
> 
> 标签：sql-server, full-text-search

我们在一个项目中使用 SQL Server 2005。系统的用户有能力通过使用“关键词”来搜索一些对象。我们实现这一点的方法是为每个表中可能包含这些“关键字”的重要列创建一个全文目录，然后使用 CONTAINS 在该索引的搜索框中搜索用户输入的关键字。

因此，例如，假设您有 Movie 对象，并且您想让用户在文章的标题和正文中搜索关键字，那么我们将索引 Title 和 Plot 列，然后执行以下操作：

```
SELECT * FROM Movies WHERE CONTAINS(Title, keywords) OR CONTAINS(Plot, keywords) 
```

（它实际上比这更先进一点，但没有什么特别复杂的）

一些用户在他们的搜索中添加数字，例如他们想要找到“终结者 2”。这里的问题是，据我所知，默认情况下 SQL Server 不会索引短词，因此进行如下搜索：

```
SELECT * FROM Movies WHERE CONTAINS(Title, '"Terminator 2"') 
```

实际上相当于这样做：

```
SELECT * FROM Movies WHERE CONTAINS(Title, '"Terminator"') <-- notice the missing '2' 
```

我们得到了大量的虚假结果。

有没有办法强制 SQL Server 索引小单词？最好，我宁愿只索引像 1、2、21 等这样的*数字*。我不知道在哪里定义索引标准，或者即使可以像那样具体。

* * *

好吧，我这样做了，从列表中删除了“干扰词”，现在行为有点不同，但仍然不是你所期望的。

不会搜索“终结者 2”（我只是在编造这个，如果我透露我们在做什么，我的雇主可能不会真的很高兴......无论如何，术语有点不同但原理相同） , 我*什么*也没得到，但我知道有些对象包含这两个词。

也许我做错了什么？我从 ENG、ENU 和 NEU（中性）的噪声配置中删除了所有数字 1 ... 9，重新生成索引并尝试搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:11:49.513

这些“小词”被全文索引视为“干扰词”。您可以自定义干扰词列表。此[博客文章](http://arcanecode.wordpress.com/2008/05/29/creating-and-customizing-noise-words-in-sql-server-2005-full-text-search/)提供了更多详细信息。当您更改干扰词文件时，您需要重新填充全文索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T21:51:03.927

我知道噪音词文件，但我不是为什么您的“终结者 2”示例仍然给您带来问题。您可能想尝试在[MSDN 数据库引擎论坛](http://forums.microsoft.com/Forums/ShowForum.aspx?ForumID=93&SiteID=1)上问这个问题，专门从事这类事情的人在那里闲逛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-23T23:18:39.450

您可以将 CONTAINS（或 CONTAINSTABLE）与简单的 where 条件结合使用：

SELECT * FROM Movies WHERE CONTAINS(Title, '"Terminator 2"') 和 Title like '%Terminator 2%'

当 CONTAINS 找到所有终结者时，哪里会消除“终结者 1”。

当然，引擎足够聪明，可以在 CONTAINS 而不是类似的条件下启动。

# sql-server-2005 - MS-SQL Server 2005 和 Oracle 中的存储过程

> ID：71563
> 
> 赞同：0
> 
> 时间：2008-09-16T12:03:35.943
> 
> 标签：sql-server-2005, oracle, stored-procedures

如何将 MS-SQL Server 2005 存储过程转换为 Oracle 存储过程？将每个环境中的相应特征相互对比的图表会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T12:08:39.410

[http://vyaskn.tripod.com/oracle_sql_server_differences_equivalents.htm](http://vyaskn.tripod.com/oracle_sql_server_differences_equivalents.htm)是一个很好的资源

# .net - 创建多个对象的一种方法还是创建单个对象的几种方法？

> ID：71565
> 
> 赞同：0
> 
> 时间：2008-09-16T12:03:49.907
> 
> 标签：.net, database, performance

如果我有以下情况：

```
Public Class Product
    Public Id As Integer
    Public Name As String
    Public AvailableColours As List(Of Colour)
    Public AvailableSizes As List(Of Size)
End Class 
```

我想从数据库中获取产品列表并在页面上显示它们以及可用的尺寸和颜色，我应该

1.  有一种方法 (GetProducts())，它使用连接相关表的单个视图，然后循环遍历每一行并根据需要创建对象？或者……</li>
2.  有几种方法只负责创建一个对象？例如。GetProducts()、GetAvailableColoursForProduct(id) 等

我目前正在做a）但是当我添加其他其他属性（多个图像、可选流苏等）时，代码变得非常混乱（必须检查这与前一行的产品是否相同，已经有这种颜色了已添加等）所以我很想选择 b）但是，这确实会增加到数据库的往返次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T12:15:36.540

你说对了。解决方案 b 不会扩大，因此解决方案 a 是关键，就性能而言。同时，为什么要限制 GetProductDetails() 方法在单个请求中获取每个数据（因此是 SQL 视图方法）？为什么不让这个方法执行 3 个请求并告别你凌乱的逻辑：

*   一个用于 id 和 name 检索
*   一个用于颜色列表
*   一个用于尺寸列表

根据您使用的 SQL 引擎，这 3 个请求可以组合在一个批处理查询中（一次往返）或需要 3 次往返。在向您的类添加其他属性时，您必须决定是增强第一个请求还是添加一个新请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:56:19.670

您最好对两者进行基准测试并找出答案。我已经看到了只执行多个查询（MySQL 喜欢这样）比 JOIN 更快的情况，而一个大的慢查询会占用大量内存并导致数据库服务器崩溃。我说基准是因为它将取决于您的数据库服务器、它有多少内存和并发连接、表的大小、索引的优化方式以及典型记录集的大小。大型未索引列上的 JOIN 非常昂贵（因此您不应该这样做或添加索引）。

如果您至少编写两种实现中的一小部分（您不需要编写方法，只需编写一堆测试查询）然后进行基准测试，那么您最终可能还会学到更多/更满意与其中一个一起去。测试中最棘手（但重要）的部分是模拟同时访问数据库的并发用户——真实的生产内存和 cpu 负载。

请记住，您正在处理 2 个问题：一个是 DBA 问题，我如何使其最快和最有效。第二个是想要漂亮、可维护的代码的程序员。(b) 使您的代码比仅仅使用复杂的 JOIN 进行大型查询更具可读性和可扩展性，因此您可能会决定更喜欢它而不是 (a)，只要它不会太慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:12:04.020

就个人而言，我会通过更少的方法从数据库中获取更多数据，然后仅将 UI 绑定到我当前想要显示的数据集的那些部分。管理大量获取特定数据块的小方法比获取大块数据并仅使用您需要的部分更难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T12:15:43.560

在上述情况下，我可能只有一个静态加载方法，尤其是在通常需要所有或大部分属性的情况下：

```
Public static function Load(Id as integer) as Product

Product.Load(Id) 
```

如果说 color 属性很少使用并且加载起来相当昂贵，那么您可能希望仍然使用上面的但不从那里加载 color 属性，而是从 getter 动态加载它，如下所示：

```
private _Colors as list(Of Color)
public property Colors() as List(Of Color)
    get
        if _Colors is nothing 
            . .. . load colors here
        end if
    end get. . . . . 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T12:16:31.437

选择选项 b）它使您的属性独立于数据的呈现（例如表格）

我认为你会从更多地了解[MVC-Architecture](http://en.wikipedia.org/wiki/Model-view-controller)中受益。它代表**模型**（您的数据 -> 产品）、**视图**（演示文稿 -> 表）和控制器（一个新的类，它将从模型中收集数据并处理它以获得视图输出**）**

使困惑？没那么复杂。您的代码片段来自哪种语言？许多框架，如 Ruby on Rails、Java Struts 或 CakePHP 都在实践这种程序层分离。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T12:18:45.923

b 在阅读您的设置时会更快（性能方面），但是当您更新您的类（更新每个功能）时，它将需要您更多的维护代码。

现在，如果性能是您的真正目标，只需对其进行基准测试。写 a 和 b，用几（几十）万条记录加载你的数据库并进行测试。然后选择您的最佳解决方案。:)

/维

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T12:21:13.953

如果您在编码实践中使用任何敏捷租户，那么“a”现在就可以了，但随着查询复杂性的增加，您应该考虑重构，即根据您现在所知道的构建代码并在必要时重构.

如果您确实进行了重构，我建议您将[工厂模式](http://www.dofactory.com/Patterns/PatternFactory.aspx)引入您的代码中。工厂模式管理复杂对象的创建，并允许您从使用对象的代码（在本例中为您的 UI）中隐藏对象构造的细节。这也意味着，随着您的对象变得更加复杂，消费者将受到保护，避免您为管理复杂性而可能需要进行的更改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T13:15:52.993

您应该查看[Castle](http://www.castleproject.org/activerecord/index.html)的 ActiveRecord [ORM ，它在](http://en.wikipedia.org/wiki/Object-relational_mapping)[NHibernate](http://www.hibernate.org/343.html)之上工作。您开发了一个继承自 AR 基类的数据模型（就像您对“产品”所做的那样），它提供了强大的查询能力。AR/NHibernate 提供积极的查询优化和缓存。性能和可伸缩性问题可能会消失。至少你有一个体面的框架来调整。您可以轻松地将数据模型拆分为测试 B。

# xml - 什么是学习 XML 的最佳指南

> ID：71566
> 
> 赞同：14
> 
> 时间：2008-09-16T12:04:01.420
> 
> 标签：xml

我正在学习 XML，目前是 Wikibooks，但这有点庞大且无法监督...

有人知道更好的地方吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T12:06:11.040

[W3Schools](http://www.w3schools.com/xml/default.asp)通常适合这种类型的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T12:08:22.440

如果您正在寻找一本书，[O'Reilly](http://oreilly.com/)有几[本 XML book](http://xml.oreilly.com/)。由于我是在工作中学习 XML 的，所以我只是将[XML in a Nutshell](http://oreilly.com/catalog/9780596007645/index.html)用作参考。您也许可以使用它们为像[Learning XML](http://oreilly.com/catalog/9780596004200/index.html)这样的初学者找到一本很好的 XML 教程书，如果您正在寻找的话。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T12:19:55.657

我发现 Tim Bray 的[Annotated XML Specification](http://www.xml.com/axml/testaxml.htm)很有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T14:15:50.963

我不确定您是否正在构建不需要 JavaScript 的 Web 应用程序，但如果您是，我发现 wikibooks 非常有帮助：

[http://en.wikibooks.org/wiki/XQuery](http://en.wikibooks.org/wiki/XQuery) [http://en.wikibooks.org/wiki/XForms](http://en.wikibooks.org/wiki/XForms)

XQuery 书使用 eXist-db.org XML 数据库，我发现它是一个很好的学习工具。

*   担

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T12:05:52.693

取决于你的背景和你已经知道的。

我发现这是一本有用的书：http: [//www.ineasysteps.com/books/details/?1840781246](http://www.ineasysteps.com/books/details/?1840781246)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T12:28:41.530

zvon.org 有很多关于 xml 技术的很好的教程

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-16T12:08:49.083

尽管有很多关于 XML 的教程，但我同意 Galwegian 的观点。我从[W3Schools](http://www.w3schools.com/xml/default.asp)学习了 XML 。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-11-19T00:06:32.927

我认为 www.w3schools.com 是一个非常好的开始学习 XML 的地方

# asp.net - 如何在连接字符串中将 Access DB 从 ISO-8859-2 更改为 UTF-8？

> ID：71578
> 
> 赞同：0
> 
> 时间：2008-09-16T12:06:26.093
> 
> 标签：asp.net, ms-access

我有一个 ISO-8859-2 格式的数据库，但我需要以 UTF-8 创建 XML。这意味着我必须在以 UTF-8 打印之前对数据库进行编码。我对 ASP.Net 知之甚少，所以我希望有人能提供帮助。

在 PHP 中，我会做这样的事情：

```
db_connect();
mysql_query("SET NAMES 'UTF8'");
mysql_query("SET character_set_client='UTF8'"); 
```

这是我用于数据库连接的 ASP.Net 代码：

```
 'CONNECTION TO DATABASE
 dim dbconn,sql,dbcomm
 dbconn=New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;" & _
      "Data Source=" & Server.MapPath("../baze/test.mdb"))

 dbconn.Open()          

 sql="SELECT * FROM nekretnine, tipovinekretnina WHERE nekretnine.idtipnekretnine = tipovinekretnina.idtipnekretnine ORDER BY nekretnine.idnekretnine"
 dbcomm=New OleDbCommand(sql,dbconn)
 dbread=dbcomm.ExecuteReader()

 while dbread.Read() 
```

我在哪里以及如何编码为 UTF-8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:17:35.210

假设您在 中有一个值字符串`str`，这是纯 .NET 执行此操作的方式。

```
var encoding = System.Text.Encoding.GetEncoding("iso-8859-2");

var bytes = System.Text.Encoding.Convert(encoding, System.Text.Encoding.Default, encoding.GetBytes(str));

var newString = System.Text.Encoding.Default.GetString(bytes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:17:30.233

.NET Framework 的内部字符串类型是 UTF-16。所有数据库访问都将转换为 UTF-16，以便您可以适当地查看数据：数据库或 OLE DB 提供程序将转换为 UTF-16。

XML 编写器类（您使用*的是*XmlDocument 或 XmlWriter，对吗？）然后将在输出中转换为 UTF-8。

基本上，您不需要做任何额外的事情。

# java - 如何获取参数化的类实例

> ID：71585
> 
> 赞同：9
> 
> 时间：2008-09-16T12:08:21.830
> 
> 标签：java, generics

由于引入了泛型，Class 被参数化，因此 List.class 产生 Class<List>。这很清楚。

我无法弄清楚的是如何获得一个自身参数化的类的实例，即 Class<List<String>>。就像在这个片段中一样：

```
public class GenTest {
    static <T> T instantiate(Class<T> clazz) throws Exception {
        return clazz.newInstance();
    }
    public static void main(String[] args) throws Exception {
        // Is there a way to avoid waring on the line below
        // without using  @SuppressWarnings("unchecked")?
        // ArrayList.class is Class<ArrayList>, but I would like to
        // pass in Class<ArrayList<String>>
        ArrayList<String> l = GenTest.instantiate(ArrayList.class);
    }
} 
```

我经常遇到这个问题的变体，但我仍然不知道是我错过了什么，还是真的没有更好的方法。感谢您的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T12:35:42.310

Class 类是一种类型的运行时表示。由于参数化类型在运行时会进行类型擦除，因此 Class 的类对象将与 Class<List<Integer>> 和 Class<List<String>> 相同。

不能使用 .class 表示法实例化它们的原因是这是用于类文字的特殊语法。当类型被参数化时， [Java 语言规范](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.8.2)明确禁止这种语法，这就是不允许 List<String>.class 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:43:09.967

类表示由类加载器加载的类，它们是原始类型。要表示参数化类型，请使用 java.lang.reflect.ParameterizedType。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T12:43:22.870

我不认为你可以做你正在尝试的事情。首先，您的实例化方法不知道它处理的是参数化类型（您可以很容易地将它传递给 java.util.Date.class）。其次，由于擦除，在运行时对参数化类型做任何特别具体的事情是困难或不可能的。

如果您要以不同的方式解决问题，您还可以使用其他一些小技巧，例如类型推断：

```
public class GenTest
{
    private static <E> List<E> createList()
    {
        return new ArrayList<E>();
    }

    public static void main(String[] args)
    {
        List<String> list = createList();
        List<Integer> list2 = createList();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:04:13.117

您唯一能做的就是`List<String>` *直接*实例化并调用它`getClass()`：

```
instantiate(new List<String>() { ... }.getClass()); 
```

对于具有多个抽象方法的类型，例如`List`，这是非常尴尬的。但不幸的是，调用子类构造函数（如`new ArrayList<String>`）或工厂方法（`Collections.<String>emptyList()`）不起作用。

# jquery - 如何在 jQuery 中显示服务器脚本的进度？

> ID：71590
> 
> 赞同：6
> 
> 时间：2008-09-16T12:08:45.807
> 
> 标签：jquery, ajax

使用此代码，我可以在服务器脚本运行时显示动画 gif：

```
function calculateTotals() {
    $('#results').load('getResults.php', null, showStatusFinished);
    showLoadStatus();
}

function showLoadStatus() {
    $('#status').html('');
}

function showStatusFinished() {
    $('#status').html('Finished.');
} 
```

但是，我想显示脚本有多远的状态，例如“正在处理 20000 的第 342 行 ...”并让它计数直到完成。

我怎样才能做到这一点？我可以制作一个服务器脚本，它不断包含更新的信息，但是我在哪里放置命令来读取这个，比如说，每秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T06:11:10.200

阅读您对安德鲁回答的评论后。

你会读到这样的状态：

```
function getStatus() {
    $.getJSON("/status.php",{"session":0, "requestID":12345}, 
    function(data) { //data is the returned JSON object from the server {name:"value"}
          setStatus(data.status);
          window.setTimeout("getStatus()",intervalInMS)
    });
} 
```

使用这种方法，您可以在服务器上同时打开多个 XHR 请求。

你所有的 status.php 输出是：

```
{"status":"We are done row 1040/45983459"} 
```

但是，您可以在响应中输出尽可能多的信息并相应地处理它（例如提供进度条或执行动画..）

有关 $.getJSON 的更多信息，请参阅[http://docs.jquery.com/Ajax/jQuery.getJSON](http://docs.jquery.com/Ajax/jQuery.getJSON)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:31:11.213

我对 jQuery 的细节并不满意，但不涉及轮询的一般答案是：使用[永久框架](http://cometdaily.com/2007/11/05/the-forever-frame-technique/)技术的变体。基本上，创建一个隐藏的 iframe，并将其 src 设置为“getresults.php”。在 getresults 中，您“流式传输”返回脚本块，这些脚本块是对父文档中的 javascrpt 函数的调用，该函数实际上更新了进度。这是[一个示例](http://www.codeproject.com/KB/aspnet/ASPNETAJAXPageLoader.aspx)，显示了永久框架背后的基本思想。（不过我不建议使用他的实际 JS 或 HTML，这是相当平均的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:19:17.670

您的服务器端脚本应该以某种方式将其进度保持在服务器上的某个位置（文件、数据库中的字段、memcached 等）。

您应该有 AJAX 函数返回当前进度。每秒轮询一次此函数并相应地呈现结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T12:22:33.513

在不知道您的服务器端代码如何工作的情况下很难说。但是，该过程分为三个阶段。首先，您需要调用一个工作创建脚本。这将返回一个 ID 号并设置服务器工作。接下来，每隔一秒左右，您需要调用一个状态脚本，该脚本返回您要显示的状态消息。该状态脚本还需要返回一个值，指示作业是否已完成。当状态脚本显示作业已完成时，您将停止轮询。

如何获取此状态脚本是了解作业的状态很大程度上取决于服务器的设置方式，但可能涉及在作业期间的各个时间点将消息写入数据库表。然后状态脚本从数据库中读取此消息。

# c# - 如何让 IKVM 在 Visual Studio 2008 中构建？

> ID：71599
> 
> 赞同：7
> 
> 时间：2008-09-16T12:10:59.593
> 
> 标签：c#, visual-studio-2008, compiler-errors, ikvm

我已经从[http://sourceforge.net/cvs/?group_id=69637下载了 IKVM 源代码 (](http://sourceforge.net/cvs/?group_id=69637) [http://www.ikvm.net/](http://www.ikvm.net/) )

现在我正试图让它在 Visual Studio 2008 中构建并被卡住。有谁知道如何构建这个东西的文档，或者甚至可以给我指点？

我尝试打开 ikvm8.sln，它会打开所有项目，但尝试构建解决方案会导致一堆“找不到类型或命名空间”错误。

正如您可能猜到的那样，我不是 Visual Studio 专家，而是习惯于在 Eclipse 中使用 Java。

同样，我正在寻找：分步说明或有关如何在 Visual Studio 中构建 IKVM 的文档链接。

如果您需要更多信息，请告诉我。谢谢你的帮助！

**编辑：**我也试过手册“MsBuild.exe IKVM8.sln”，但也得到了一堆：

```
JniInterface.cs(30,12): error CS0234: The type or namespace name 'Internal' does not exist in the namespace 'IKVM' (a
re you missing an assembly reference?)
JniInterface.cs(175,38): error CS0246: The type or namespace name 'ClassLoaderWrapper' could not be found (are you mi
ssing a using directive or an assembly reference?)
JniInterface.cs(175,13): error CS0246: The type or namespace name 'ClassLoaderWrapper' could not be found (are you mi
ssing a using directive or an assembly reference?) 
```

**编辑#2**：我注意到一个“ikvm.build”文件，所以我下载并在该文件夹上运行了 nant，这让我更进一步。一些东西开始成功构建，不幸的是我现在收到以下错误：

ikvm-native-win32：

```
 [mkdir] Creating directory 'C:\Documents and Settings\...\My Documents\ikvm\ikvm\native\Release'.
               [cl] Compiling 2 files to 'C:\Documents and Settings\...\My Documents\ikvm\ikvm\native\Release'.
        BUILD FAILED
        C:\Documents and Settings\...\My Documents\ikvm\ikvm\native\native.build(17,10):
        'cl' failed to start.
           The system cannot find the file specified
        Total time: 0.2 seconds. 
```

**编辑#3**：OK 通过放入`cl.exe`路径解决了这个问题，但仍然出现其他错误。***请注意，这一切都是为了在控制台上构建它，例如使用 Nant。有没有办法让它在 Visual Studio 中构建？那会很难过...***

**编辑#4**：下一步是安装 GNU 类路径 0.95，现在看来我需要一个特定的 OpenJDK 安装……Linux AMD64？！

```
 [exec] javac: file not found: ..\..\openjdk6-b12\control\build\linux-amd64\gensrc\com\sun\accessibility\internal\resources\accessibility.java
             [exec] Usage: javac <options> <source files>
             [exec] use -help for a list of possible options 
```

**编辑#5**：得到作者的回答。见下文或[http://weblog.ikvm.net/CommentView.aspx?guid=7e91b51d-6f84-4485-b61f-ea9e068a5fcf](http://weblog.ikvm.net/CommentView.aspx?guid=7e91b51d-6f84-4485-b61f-ea9e068a5fcf) 让我们看看它是否有效......

**编辑#6**正如我所担心的，下一个问题：“无法打开 windows.h”，请参见[此处](https://stackoverflow.com/questions/80788/fatal-error-c1083-cannot-open-include-file-windowsh-no-such-file-or-directory)的单独问题。

**最终编辑：找到解决方案！**在 Lib 和 Path 环境变量中获取 Platform SDK 文件夹后，我在下面描述的解决方案对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T12:33:50.130

我不知道这会为你做，但你可以尝试从命令行构建吗？

msbuild ________

由于同样的问题，我认为这就是我构建应用程序的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T06:15:32.060

OK 刚收到作者回复如下：[http ://weblog.ikvm.net/CommentView.aspx?guid=7e91b51d-6f84-4485-b61f-ea9e068a5fcf](http://weblog.ikvm.net/CommentView.aspx?guid=7e91b51d-6f84-4485-b61f-ea9e068a5fcf)

> 如果你想从 cvs 构建，你只能靠你自己。但是，如果您使用官方版本，则可以更轻松地从源代码构建。
> 
> 如果您从 SourceForge 下载 ikvm-0.36.0.11.zip、classpath-0.95-stripped.zip 和 openjdk-b13-stripped.zip（最后两个在 ikvm 0.36.0.5 版本下），您就拥有了所有需要的源。
> 
> 现在您必须打开一个 Visual Studio 2008 命令提示符（即路径中有 cl.exe 和 peverify 的命令提示符）。
> 
> 然后在 ikvm 根目录中，执行“nant clean”，然后执行“nant”。那应该构建整个项目。完成之后，您应该能够在 Visual Studio 中构建（仅限调试目标），但您可能需要修复项目中的程序集引用（除非您在 c:\ikvm 中安装了 ikvm）。
> 
> 问候，杰伦

**编辑**：确保 Platform SDK 文件夹位于 Path 和 Lib 环境变量中后，这对我有用。谢谢，杰伦！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T13:37:36.657

这就是我从源代码构建 IKVM 8.1.5717.0 的方式。不需要 Visual Studio。

*   创建文件夹：c:\ikvm\

*   将上述文件夹添加到 PATH（例如，设置 PATH=%PATH%;c:\ikvm 并让命令提示符打开以供稍后使用）。

*   下载：ikvmsrc-8.1.5717.0.zip ( [http://www.frijters.net/ikvmsrc-8.1.5717.0.zip](http://www.frijters.net/ikvmsrc-8.1.5717.0.zip) )

*   解压并将“ikvm-8.1.5717.0”文件夹放在c:\ikvm\

*   下载：openjdk-8u45-b14-stripped.zip ( [http://www.frijters.net/openjdk-8u45-b14-stripped.zip](http://www.frijters.net/openjdk-8u45-b14-stripped.zip) )

*   解压并将“openjdk-8u45-b14”文件夹放在 c:\ikvm\

*   下载：Java 8 SDK ( [http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) )

*   安装并确保将位置添加到路径

*   下载：NAnt 0.92（[https://sourceforge.net/projects/nant/files/nant/0.92/nant-0.92-bin.zip/download](https://sourceforge.net/projects/nant/files/nant/0.92/nant-0.92-bin.zip/download)）

*   解压并将“nant-0.92”文件夹放在 c:\ikvm\

*   ICSharpCode.SharpZipLib.dll ( [http://www.icharpcode.net/opensource/sharpziplib/Download.aspx](http://www.icsharpcode.net/opensource/sharpziplib/Download.aspx) )

*   将“ICSharpCode.SharpZipLib.dll”放在 C:\ikvm\ikvm-8.1.5717.0\bin\

*   在文本编辑器中打开以下文件并更改版本号：C:\ikvm\ikvm-8.1.5717.0\CommonAssemblyInfo.cs.in

*   使用之前的命令提示符，cd 到：C:\ikvm\ikvm-8.1.5717.0\ikvm\

*   运行：..\nant-0.92\bin\NAnt.exe

*   如果成功，所有二进制文件都将位于：C:\ikvm\ikvm-8.1.5717.0\bin

# asp.net - 网站中引用的程序集

> ID：71602
> 
> 赞同：3
> 
> 时间：2008-09-16T12:11:23.570
> 
> 标签：asp.net

我是否正确假设我总是需要在源代码更改时显式部署引用的程序集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:15:51.483

是的你是。如果您在 Visual Studios 中使用发布命令，它将在您选择发布站点的文件夹中包含您需要的所有程序集。

如果 .dll 已更改并且您需要更新站点，则可以再次发布或复制 .dll。

# c# - 您如何设置您的 .NET 开发树？

> ID：71608
> 
> 赞同：15
> 
> 时间：2008-09-16T12:12:34.283
> 
> 标签：c#, .net, development-environment

您如何设置您的 .NET 开发树？我使用这样的结构：

```
-projectname
--config (where I put the configuration files)
--doc    (where I put all the document concerning the project: e-mails, documentation)
--tools  (all the tools I use: Nunit, Moq)
--lib    (all the libraries used by the solution: ninject or autofac)
--src
---app   (sourcefiles)
---test  (unittests)
solutionfile.sln
build.csproj 
```

符号“-”标记目录。

我认为在这些东西上有一个好的结构是非常重要的。您应该能够从源代码控制系统获取源代码，然后构建解决方案，而无需打开 Visual Studio 或安装任何第三方库。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T12:23:54.383

我们使用的布局与 JP Boodhoo 的题为“[项目目录结构](http://blog.developwithpassion.com/2007/10/01/directory-structure-for-projects/)”的博文中介绍的非常相似。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T12:23:51.340

查看这些其他 StackOverflow 问题...

*   [版本控制中的项目结构](https://stackoverflow.com/questions/16829/structure-of-projects-in-version-control#16915)
*   [最佳实践：协作环境、Bin 目录、SVN](https://stackoverflow.com/questions/265/best-practice-collaborative-environment-bin-directory-svn)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T12:58:52.707

[TreeSurgeon](http://www.codeplex.com/treesurgeon)是一个工具，它将为您设置一个目录树，其中包含所有必需的依赖项和一个骨架 nant 文件。在该链接中，您还可以找到其原始创建者 Mike Roberts 的一系列博客文章，其中解释了 TreeSurgeon 为您提供的结构背后的一些深思熟虑的选择，例如为什么在 lib 和工具之间存在重复是可以的，为什么它很重要存在所有依赖项等。

我已经有一段时间没有使用它了，所以不记得我是否仍然同意它所做的所有选择，但我认为你不会有太大的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T12:39:17.183

我们使用这样的结构：

*   公司名称或核心项目名称
    *   分支
        *   分店名称
            *   CopyOfTrunk
    *   树干
        *   桌面
        *   引用的程序集
        *   共享
        *   解决方案
        *   测试
        *   网站

然后只需确保所有项目/解决方案文件仅使用相对路径并且分支运行良好。Desktop/Webs 用于各自类型的项目，Test 用于任何单元测试项目，Solutions 文件夹为每个解决方案都有一个文件夹，其中只有解决方案文件。ReferencedAssemblies 包含我们未包含在解决方案中的所有程序集（这些有时是我们每次构建解决方案时不想构建的本地项目或第三方程序集，如 rhinomocks 或 log4net 等。共享用于跨多个解决方案使用的任何核心库（数据访问、业务逻辑等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T12:25:42.273

在我的工作地点，我们有多个项目，每个项目都有自己的子目录，如下所示： -proj1
--proj1.csproj
-proj2
--proj2.csproj
-proj3
--proj3.csproj
solutionfile.sln

您的其余设置看起来不错，但我认为您应该弄清楚如何合并多个项目，例如多个解决方案之间的共享源库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T12:32:42.503

如果我正确理解您的结构，我认为您的开发树中将有许多与“工具”和“lib”相关的重复项。这些很可能是不同项目共享的外部工具和库。

对我们有用的是：
`solutionfile.sln
-src
--projectname
---config
---doc
---source files (structure representing namespaces)
-test
--testprojectname (usually, a test project per source project)
---unit test files (structure mirroing the structure in the source project)
-lib
--libraryname (containing the libraries)
-tools` 

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T12:33:05.547

我在项目中没有工具。工具位于网络共享中。是的，这些天磁盘空间很便宜，但是......来吧:)

我在项目名称下面还有一个数据库脚本文件夹（当它是数据驱动的应用程序时）

当然，如何设置并不重要，重要的是使用符合逻辑的有组织的标准来适应项目并遵守良好的纪律。无论您是单人还是团队，这都很有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T13:17:30.883

我们也使用 TreeSurgeon 并且对它非常满意。我们的结构看起来像：

分支

*   建造
*   库
*   源代码
    *   < 用于应用程序、测试、数据库迁移等的各种 src 目录）
*   工具

树干

*   和上面一样

# eclipse - 比较 Eclipse 中的两个 CVS 修订版

> ID：71615
> 
> 赞同：8
> 
> 时间：2008-09-16T12:14:10.927
> 
> 标签：eclipse, cvs

它终于开始让我恼火地问这个问题：如何在 CVS 中的文件的两个修订之间进行基本差异？通常我想比较最新版本和一些随机的旧版本。我正在使用 Eclipse CVS 插件。当我从所选文件的（来自 HEAD 或另一个分支的最新修订版）上下文菜单中使用“比较 - > 另一个分支或版本...”时，我得到一个分支、标签和日期的列表，但不是修订版。通常我刚刚创建了一个我知道过去足够远的日期，因此我可以比较所需的修订，但我认为必须有更好的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T12:16:22.607

答案是使用上下文菜单->团队->显示历史来显示文件的历史，然后选择两个修订和上下文菜单进行选择->相互比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T11:23:03.453

似乎有两种主要方式：

**上下文菜单->团队->显示历史**

它显示了线性历史，您可以在它们之间进行选择和比较，但是当您的项目有很多分支/标签时，它可能会非常臃肿且难以阅读。就我个人而言，我发现它的用处不及：

**上下文菜单->团队->显示提交历史**

这似乎显示了对您所在的特定分支/标签所做的承诺的历史。您可以按文件或按文件夹执行此操作。输出非常相似，但我发现它更清晰。您可以单击提交日期，它将显示在该日期提交的所有文件（您感兴趣的）。

如果您双击该文件，它将弹出另一个菜单，以便您可以将其与提交历史记录中的另一个文件进行比较

**编辑** （我发现如果你双击“其他”文件，它不会做任何事情，你需要在对话框中单击“确定”，这对我来说似乎很愚蠢。这可能是由于我有无可比拟的事实3 插入，我不确定没有它它的行为是否相同） **编辑**

提交历史记录窗口的右上角还有一个小按钮，可让您切换到历史记录视图（但如果我这样做，我总是发现它比普通的历史记录视图更容易阅读）

两者都应该向您显示提交时添加的评论，并且您应该尝试阅读但我个人没有的和我更喜欢提交历史的唯一形式的个人体验之间的差异。

我很抱歉没有给出每个的正式描述，这纯粹是我个人使用它们的经验，我自己还没有真正研究过它们......

# java - 为什么要在 Java 中使用静态嵌套接口？

> ID：71625
> 
> 赞同：240
> 
> 时间：2008-09-16T12:15:45.307
> 
> 标签：java, interface, static

我刚刚在我们的代码库中找到了一个静态嵌套接口。

```
class Foo {
    public static interface Bar {
        /* snip */
    }
    /* snip */
} 
```

我以前从未见过这种情况。原始开发人员遥不可及。因此我不得不问：

静态接口背后的语义是什么？如果我删除`static`? 为什么会有人这样做？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2008-09-16T16:46:07.700

上例中的 static 关键字是多余的（嵌套接口自动为“静态”），可以删除而不影响语义；我建议将其删除。接口方法上的“public”和接口字段上的“public final”也是如此——修饰符是多余的，只会给源代码添加混乱。

无论哪种方式，开发人员都只是简单地声明了一个名为 Foo.Bar 的接口。与封闭类没有进一步的关联，除了无法访问 Foo 的代码也将无法访问 Foo.Bar。（从源代码 - 字节码或反射可以访问 Foo.Bar 即使 Foo 是包私有的！）

如果您希望它仅在外部类中使用，那么以这种方式创建嵌套接口是可以接受的样式，这样您就不会创建新的顶级名称。例如：

```
public class Foo {
    public interface Bar {
        void callback();
    }
    public static void registerCallback(Bar bar) {...}
}
// ...elsewhere...
Foo.registerCallback(new Foo.Bar() {
    public void callback() {...}
}); 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2008-10-16T15:53:35.483

这个问题已经得到解答，但是使用嵌套接口的一个很好的理由是它的功能是否与其所在的类直接相关。一个很好的例子就是`Listener`. 如果您有一个类`Foo`，并且希望其他类能够监听其上的事件，则可以声明一个名为 的接口`FooListener`，这可以，但声明一个嵌套接口并让其他类实现可能会更清楚`Foo.Listener`（嵌套类`Foo.Event`也不错）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-17T09:51:15.333

成员接口是隐式静态的。可以在不更改代码语义的情况下删除示例中的 static 修饰符。另请参阅 Java 语言规范[8.5.1。静态成员类型声明](http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.5.1)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-16T12:20:51.067

内部接口必须是静态的才能被访问。该接口不与类的实例相关联，而是与类本身相关联，因此可以使用 访问它`Foo.Bar`，如下所示：

```
public class Baz implements Foo.Bar {
   ...
} 
```

在大多数情况下，这与静态内部类没有什么不同。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-16T08:23:48.067

Jesse 的回答很接近，但我认为有更好的代码来演示为什么内部接口可能有用。在继续阅读之前，请查看下面的代码。你能找到为什么内部接口有用吗？答案是 DoSomethingAlready 类可以用**任何**实现 A 和 C 的类来实例化；不仅仅是具体的动物园类。当然，即使 AC 不是内部的，这也可以实现，但想象一下连接较长的名称（不仅仅是 A 和 C），并为其他组合（例如，A 和 B、C 和 B 等）这样做，你很容易看看事情是如何失控的。更不用说审查您的源代码树的人会被仅在一个类中有意义的接口所淹没。所以总结一下，*内部接口支持自定义类型的构造并改进它们的封装*。

```
class ConcreteA implements A {
 :
}

class ConcreteB implements B {
 :
}

class ConcreteC implements C {
 :
}

class Zoo implements A, C {
 :
}

class DoSomethingAlready {
  interface AC extends A, C { }

  private final AC ac;

  DoSomethingAlready(AC ac) {
    this.ac = ac;
  }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T12:21:31.907

要非常直接地回答您的问题，请查看 Map.Entry。

[地图入口](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)

这也可能有用

[静态嵌套接口博客条目](http://littletutorials.com/2008/03/06/static-nested-interfaces/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T12:23:20.110

通常我会看到静态内部类。静态内部类不能引用包含类，而非静态类可以。除非您遇到一些包冲突（在与 Foo 相同的包中已经有一个名为 Bar 的接口），否则我想我会将其设为自己的文件。强制 Foo 和 Bar 之间的逻辑连接也可能是一个设计决策。也许作者打算 Bar 仅与 Foo 一起使用（尽管静态内部接口不会强制执行此操作，只是逻辑连接）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-14T14:50:06.477

如果您将类 Foo 更改为接口 Foo 上面示例中的“public”关键字也将是多余的，因为

> 在另一个接口内定义的接口将**隐式地公开静态。**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-11T21:45:38.730

1998 年，Philip Wadler 提出了静态接口和非静态接口的区别。

> 据我所知，使接口成为非静态的唯一区别是它现在可以包含非静态内部类；因此更改不会使任何现有的 Java 程序无效。

例如，他提出了一种[表达问题](https://en.wikipedia.org/wiki/Expression_problem)的解决方案，即一方面表达为“你的语言能表达多少”，另一方面表达为“你试图用你的语言表达的术语”之间的不匹配。 .

[在他的示例代码](http://homepages.inf.ed.ac.uk/wadler/papers/expression/expression.txt)中可以看到静态和非静态嵌套接口之间的区别示例：

```
// This code does NOT compile
class LangF<This extends LangF<This>> {
    interface Visitor<R> {
        public R forNum(int n);
    }

    interface Exp {
        // since Exp is non-static, it can refer to the type bound to This
        public <R> R visit(This.Visitor<R> v);
    }
} 
```

他的建议从未在 Java 1.5.0 中提出。因此，所有其他答案都是正确的：静态和非静态嵌套接口没有区别。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-09-16T12:28:00.253

在 Java 中，静态接口/类允许接口/类像顶级类一样使用，即可以由其他类声明。所以，你可以这样做：

```
class Bob
{
  void FuncA ()
  {
    Foo.Bar foobar;
  }
} 
```

如果没有静态，以上将无法编译。这样做的好处是您不需要新的源文件来声明接口。它还在视觉上将接口 Bar 与类 Foo 相关联，因为您必须编写 Foo.Bar 并暗示 Foo 类对 Foo.Bar 的实例执行某些操作。

[Java 中类类型的描述](http://www.javaworld.com/javaworld/javaqa/1999-08/01-qa-static2.html)。

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2008-09-16T12:26:41.083

静态意味着包（项目）的任何类部分都可以在不使用指针的情况下访问它。根据具体情况，这可能是有用的，也可能是阻碍的。

“静态”方法有用的完美示例是 Math 类。Math 中的所有方法都是静态的。这意味着您不必特意去创建一个新实例、声明变量并将它们存储在更多变量中，您只需输入数据并获得结果。

静态并不总是那么有用。例如，如果您正在进行案例比较，您可能希望以几种不同的方式存储数据。您不能创建三个具有相同签名的静态方法。你需要3个不同的实例，非静态的，然后你可以比较，因为如果它是静态的，数据不会随着输入而改变。

静态方法适用于一次性返回和快速计算或易于获取的数据。

# perl - 如何检查文件大小并将结果添加到 Perl 中的 Excel 电子表格中？

> ID：71643
> 
> 赞同：2
> 
> 时间：2008-09-16T12:18:13.303
> 
> 标签：perl, unix, shell, ksh

目前，我使用简单的 shell 单线监视特定文件：

```
filesize=$(ls -lah somefile |  awk '{print $5}') 
```

我知道 Perl 有一些很好的模块来处理 Excel 文件，所以我们的想法是，比如说，每天运行检查，也许使用 cron，然后将结果写入电子表格以供进一步统计使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T12:23:00.377

您可以使用[运算符](http://p3rl.org/-X)[获取`-s`](http://p3rl.org/-X)文件的大小，并使用[Spreadsheet::ParseExcel](http://search.cpan.org/perldoc?Spreadsheet::ParseExcel)和[Spreadsheet::WriteExcel](http://search.cpan.org/perldoc?Spreadsheet::WriteExcel)模块生成包含信息的更新电子表格。[Spreadsheet::ParseExcel::SaveParser](http://search.cpan.org/perldoc?Spreadsheet::ParseExcel::SaveParser)让您可以轻松地将两者结合起来，以防您想用新信息更新现有文件。如果您在 Windows 上，您可能想要自动化 Excel 本身，可能借助[Win32::OLE](http://search.cpan.org/perldoc?Win32::OLE)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T12:29:18.923

您可以使用 -s 运算符检查文件的大小。

```
使用严格；
使用警告；

使用 File::Slurp qw(read_file write_file);
使用电子表格::ParseExcel；
使用电子表格::ParseExcel::SaveParser；
使用电子表格::WriteExcel；

我的 $file = 'path_to_file';
我的 $size_file = 'path_to_file_keeping_the_size';
我的 $excel_file = 'path_to_excel_file.xls';

我的 $current_size = -s $file;
我的 $old_size = 0;
如果（-e $size_file）{
   $old_size = read_file($size_file);
}

if ($old_size new;
        我的 $excel = $parser->Parse($excel_file);
        我的 $row = 1;
        $row++ while $excel->{Worksheet}[0]->{Cells}[$row][0];
        $excel->AddCell(0, $row, 0, 标量(本地时间));
        $excel->AddCell(0, $row, 1, $current_size);

        我的 $workbook = $excel->SaveAs($excel_file);
        $工作簿->关闭；

    } 别的 {
        我的 $workbook = Spreadsheet::WriteExcel->new($excel_file);
        我的 $worksheet = $workbook->add_worksheet();
        $worksheet->write(0, 0, '日期');
        $worksheet->write(0, 1, '大小');

        $worksheet->write(1, 0, 标量(本地时间));
        $worksheet->write(1, 1, $current_size);
        $工作簿->关闭；
    }
}

write_file($size_file, $current_size);

```

编写 Excel 文件的一种简单方法是使用 [Spreadsheet::Write](http://search.cpan.org/dist/Spreadsheet-Write/)。但是如果您需要更新现有的 Excel 文件，您应该查看 [Spreadsheet::ParseExcel](http://search.cpan.org/dist/Spreadsheet-ParseExcel/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T13:35:17.377

您还可以跳过编写 .xls 格式文件的麻烦，并使用更通用（但对 Excel 非常友好）的格式，例如 CSV：

```
#!/bin/bash
date=`date +%Y/%m/%d:%H:%M:%S`
size=$(ls -lah somefile |  awk '{print $5}')
echo "$date,$size" 
```

然后，在您的 crontab 中：

```
0 0 * * * /path/to/script.sh >/data/sizelog.csv 
```

然后像任何其他电子表格一样将该 .csv 文件导入 Excel。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T14:25:08.600

Perl 也有非常好（而且非常*快*）的[Text::CSV_XS](http://search.cpan.org/search?query=text%3A%3Acsv_xs&mode=module)，它允许您轻松地制作 Excel 友好的 CSV 文件，这可能是比创建适当的 XLS 文件更好的解决方案。

例如（过度评论的指导价值）：

```
#!/usr/bin/perl
package main;
use strict; use warnings; # always!

use Text::CSV_XS;
use IO::File;

# set up the CSV file
my $csv = Text::CSV_XS->new( {eol=>"\r\n"} );
my $io  = IO::File->new( 'report.csv', '>')
  or die "Cannot create report.csv: $!\n";

# for each file specified on command line
for my $file (@ARGV) {
    unless ( -f $file ) {
        # file doesn't exist
        warn "$file doesn't exist, skipping\n";
        next;
    }

    # get its size
    my $size = -s $file;

    # write the filename and size to a row in CSV
    $csv->print( $io, [ $file, $size ] );
}

$io->close; # make sure CSV file is flushed and closed 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T12:24:03.307

您应该使用的模块是[Spreadsheet::WriteExcel](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel.pm)。

# c# - 在 ASP.NET MVC 中使用 Universe 数据库处理身份验证的最佳方法是什么？

> ID：71644
> 
> 赞同：3
> 
> 时间：2008-09-16T12:18:24.333
> 
> 标签：c#, asp.net-mvc, u2, universe

我们使用一个名为 Universe 的 IBM 数据库，它在一个名为 USERINFO 的表中保存了我们所有的用户 ID、密码和个人资料信息。

我可以使用 Membership Provider 连接到这个数据库并对用户进行身份验证吗？

数据库访问实际上是通过 Web 服务，因为我们没有直接连接到数据库。

我们有一个名为 GetUserInfo 的 Web 服务方法，它接受用户名参数。该方法将返回密码和配置文件信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T12:56:53.990

如上所述，您需要创建一个相当简单的自定义成员资格提供程序。您将创建一个继承自 System.Web.Security.MembershipProvider 的 .NET 类。在你的类中有几个方法需要重写，但大多数方法甚至都没有被 MVC 帐户控制器使用。您要覆盖的主要方法是 ValidateUser(username, password)，它将让用户登录。实现类后，您需要在 web.config 中注册它，这也很容易。

您可以在此处找到自定义提供程序的示例：http: [//msdn.microsoft.com/en-us/library/6tc47t75 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/6tc47t75(VS.80).aspx)

以及整个过程的教程： [http ://www.15seconds.com/issue/050216.htm](http://www.15seconds.com/issue/050216.htm)

请记住，为 MVC 创建自定义提供程序的过程对于标准 ASP.NET 网站是相同的，但是 MVC 并没有完全利用 MembershipProvider 类的所有方法，因此它更容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:20:52.487

您必须为此创建一个自定义提供程序。这并不难，只要您可以毫无问题地访问 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-29T22:43:06.730

你研究过 UniObjects 接口吗？它与 Universe 一起提供，但需要安装。它可以完全访问所有数据库功能。登录、选择文件、读取、写入、删除、创建新文件等。

# asp.net - ASP.Net Session_Start 事件未触发

> ID：71647
> 
> 赞同：10
> 
> 时间：2008-09-16T12:18:58.997
> 
> 标签：asp.net, iis, session, global-asax

我有一个 ASP.Net 2.0 应用程序，其中 Session_Start 事件没有在我的 Global.asax 文件中触发。谁能告诉我为什么会发生这种情况以及我怎样才能让它工作？

该应用程序在我的 Windows XP 开发机器上运行良好，但在部署到服务器时停止运行（Win Server 2003/IIS 6/ASP.Net 2.0）。

我不确定这是否相关，但服务器还托管了一个 SharePoint 安装 (WSS 3.0)，我知道它确实会更改默认网站级别的一些设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:23:34.820

在添加 global.asax 之前网站是否已预编译？尝试再次编译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-10T17:50:00.743

是`<session />`web.config 中的部分吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:21:56.993

您确定 IIS 中的网站设置为使用 ASP.NET 2.0 而不是 1.1？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-12T16:39:29.043

我必须在 SharePoint 2010 web.config 中删除以下标记：

< 删除名称="会话" />

# c++ - 如何将 WTL 和 ATL 添加到 Visual Studio C++ Express 2008

> ID：71659
> 
> 赞同：24
> 
> 时间：2008-09-16T12:21:20.520
> 
> 标签：c++, visual-studio, atl, wtl

我开始在家里使用 Visual Studio C++ Express 2008，但里面没有 ATL。
如何将 ATL 添加到 Visual Studio C++ Express 2008？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2010-06-26T08:22:37.827

ATL 7.1 现在是[Windows Driver Kit](http://www.microsoft.com/whdc/DevTools/WDK/WDKpkg.mspx)的一部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T12:34:58.083

ATL 仅包含在较旧版本的 SDK 中。ATL 的最新版本与 MFC 共享许多代码，并且仅适用于真实版本的 Visual Studio，即不适用于 VS Express。

所以：要使用 ATL 和/或 MFC，您需要购买专业版的 Visual Studio。如果您对旧版本的 ATL 感到满意，您可以从 Microsoft 网站下载旧版本的平台 SDK。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-14T21:04:55.357

[http://codegem.org/2008/09/wtl-wizard-for-visual-studio-2008](http://codegem.org/2008/09/wtl-wizard-for-visual-studio-2008)

In his modified script, replace VisualStudio to VCExpress.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-29T03:01:11.950

您只需要按照[此处所述安装 Windows 平台 SDK](http://www.codeproject.com/KB/wtl/WTLExpress.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T12:26:06.687

您需要下载平台 SDK 并使用一些依赖项来获取 ATL。

可能有一些更“令人讨厌”的方式来获得 MFC ;) 如果你明白我的意思。许多机构也有免费的教育 VS 许可证。

# java - 制作模块化 Java Web 应用程序的最佳方法是什么

> ID：71692
> 
> 赞同：6
> 
> 时间：2008-09-16T12:25:45.767
> 
> 标签：java, spring-mvc, module

我正在用 Java（带有 JSP 视图的 Spring MVC）构建小型网站，并试图找到制作和包含少数可重用模块的最佳解决方案（如“最新消息”“即将发生的事件”......）。

所以问题是：Portlet、tile 还是其他一些技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T13:24:51.553

如果您使用的是 Spring MVC，那么我建议您使用 Portlets。在 Spring 中，portlet 只是轻量级控制器，因为它们只负责整个页面的一个片段，并且非常容易编写。如果您使用的是 Spring 2.5，那么您可以享受新注解支持的所有好处，并且它们很好地适合整个 Spring 应用程序，具有依赖注入和使用 Spring 的其他好处。

portlet 控制器与 servlet 控制器几乎相同，这是一个简单的示例：

```
@RequestMapping("VIEW")
@Controller
public class NewsPortlet {

    private NewsService newsService;

    @Autowired
    public NewsPortlet(NewsService newsService) {
        this.newsService = newsService;
    }

    @RequestMapping(method = RequestMethod.GET)
    public String view(Model model) {
        model.addAttribute(newsService.getLatests(10));
        return "news";        
    }
} 
```

在这里，一个 NewsService 将被自动注入到控制器中。view 方法将 List 对象添加到模型中，该对象将在 JSP 中以 ${newsList} 的形式提供。Spring 将根据方法的返回值查找名为 news.jsp 的视图。RequestMapping 告诉 Spring 这个控制器用于 portlet 的 VIEW 模式。

XML 配置只需要指定视图和控制器的位置：

```
<!-- look for controllers and services here -->
<context:component-scan base-package="com.example.news"/>

<!-- look for views here -->
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/news/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

如果您只想将 portlet 嵌入到现有应用程序中，您可以捆绑一个 portlet 容器，例如[eXo](http://www.exoplatform.com)、[Sun](https://portlet-container.dev.java.net/)或[Apache](http://portals.apache.org/pluto/)。如果您想将您的应用程序构建为一组 portlet，您可能需要考虑一个完整的门户解决方案，例如[Liferay Portal](http://liferay.com)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T12:32:20.960

瓷砖可能是一种痛苦。与以前相比有很大的改进（即没有），但相当有限。

[Wicket](http://wicket.apache.org/)可能更符合您的需求，除非您已选择 JSP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-08T19:28:57.037

我不推荐使用 Portlets，除非您的应用程序确实是一个[Web 门户](http://en.wikipedia.org/wiki/Web_portal)。

如果您只想让“可重用组件”使用[JSP 标记文件](http://java.sun.com/j2ee/1.4/docs/tutorial/doc/JSPTags5.html)，它们非常简单但非常强大，因为它们与常规 JSP 相同。

我有使用瓷砖的经验，所涉及的复杂性根本不值得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T12:45:16.907

[我是GWT](http://code.google.com/webtoolkit/)的忠实粉丝。它允许您将组件编写为普通的 Java 类，然后您可以随意将它们插入到您的页面中。整个事情最终被编译成Javascript。

这是一个例子：

```
public class MyApplication implements EntryPoint, HistoryListener
{
    static final String INIT_STATE = "status";

    /**
     * This is the entry point method.  Instantiates the home page.
     */
    public void onModuleLoad ()
    {
        RootPanel.get ().setStyleName ("root");
        initHistorySupport ();
    }

    private void initHistorySupport ()
    {
        History.addHistoryListener (this);

        // check to see if there are any tokens passed at startup via the browser’s URI
        String token = History.getToken ();
        if (token.length () == 0)
        {
            onHistoryChanged (INIT_STATE);
        }
        else
        {
            onHistoryChanged (token);
        }
    }

    /**
     * Fired when the user clicks the browser's 'back' or 'forward' buttons.
     *
     * @param historyToken the token representing the current history state
     */
    public void onHistoryChanged (String historyToken)
    {
        RootPanel.get ().clear ();
        Page page;
        if (Page1.TOKEN.equalsIgnoreCase (historyToken))
        {
            page = new Page1 ();
        }
        else if (Page2.TOKEN.equalsIgnoreCase (historyToken))
        {
            page = new Page2 ();
        }
        else if (Page3.TOKEN.equalsIgnoreCase (historyToken))
        {
            page = new Page3 ();
        }
        RootPanel.get ().add (page);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-21T15:33:35.207

我有很多与 Ajax JSF (IceFaces) 和 Liferay Portal 结合使用的 portlet 的经验，我不会向任何人推荐它们 - 阅读教程和实践中的真正地狱时一切看起来都很好。当然，我认为它们使用 Spring MVC 和 JSP 更加方便和轻量级，但无论如何，portlet 并没有得到很好的支持技术恕我直言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T12:33:43.407

[Tapestry](http://tapestry.apache.org)是一个 Java Web 应用程序框架，强调轻松创建可重用组件。

我使用过sitemesh，它非常适合将一组页面包装在标准页眉和页脚中，但Tapestry 更适合创建在许多页面上使用的组件，每页可能多次使用。Tapestry 组件可以将其他组件作为参数，这允许 Sitemesh 样式的包装。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T09:04:14.213

我不是 100% 确定“可重用组件”在这种情况下是什么意思，但如果你的意思是你希望某些常见元素出现在每个页面上，例如横幅、页脚、导航链接等，那么别无所求[站点网格](http://www.opensymphony.com/sitemesh/)。我的团队已经在几个国际化的 Web 应用程序上成功使用了它。

# c# - 以编程方式处理 Vista 侧边栏

> ID：71694
> 
> 赞同：0
> 
> 时间：2008-09-16T12:25:57.217
> 
> 标签：c#, windows-vista, sidebar

是否有一个 api 以编程方式将 vista 侧栏带到前面（Win + Space）并执行相反的操作（将其发送到后台）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T12:42:05.383

可能使用 SetWindowPos 您可以将其更改为放置在 z 顺序的顶部/底部，甚至作为最顶部的窗口。您需要使用 FindWindow 或 WinSpy 等应用程序找到侧边栏的句柄。

但在那之后类似。

将窗口设置在顶部，但不是最顶部。

```
SetWindowPos(sidebarHandle, HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE | SWP_NORESIZE); 
```

将窗口设置在底部。

```
SetWindowPos(sidebarHandle, HWND_BOTTOM, 0, 0, 0, 0, SWP_NOMOVE | SWP_NORESIZE); 
```

这是我对实现您的要求的最佳猜测，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:49:15.053

您可能根本不应该这样做，因为在错误的时间执行此类操作可能会惹恼用户（95% 的情况*），就像用“是/否”提示窃取焦点一样。

除非您的产品的任务当然是切换侧边栏。;)

无论如何，没有官方的API。

*纯属假设数字

# integration - 与 Siebel On-Premise CRM 集成？

> ID：71715
> 
> 赞同：2
> 
> 时间：2008-09-16T12:29:15.383
> 
> 标签：integration, crm, siebel

有没有人将外部 Web 应用程序与 Siebel On-Premise CRM 集成？请注意，我不是在谈论 Siebel On-Demand SaaS，而是他们的防火墙后产品。具体来说，我试图在我的 Web 应用程序和客户的内部 Siebel 设置之间实现 CRM 对象（联系人、帐户、销售机会）的双向同步。是否有任何众所周知的技术可用于从 Siebel On-Premise 安装启动或接收外部连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T10:48:51.590

Siebel On-Premise 提供了丰富的集成选项。从 Siebel Bookshelf 开始，特别是集成平台技术：Siebel Enterprise Application Integration。

如需更多静态数据，请查看 MDM。在这种情况下，请参阅行业应用程序的 Siebel 主数据应用程序参考。

否则，webservices 或 Siebel 的预建 ASI 会提供替代方案。通过将数据映射到 Siebel 集成对象（映射到 Siebel 业务组件）的 Web 服务交换 XML，从体系结构的角度来看，这是非常标准的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:35:43.887

我必须将一个应用程序与 Siebel 集成，这确实非常困难。最后，我不得不使用 CTI 接口，该接口设计用于处理电话呼叫并将它们路由到 siebel。我基本上不得不欺骗它认为它正在接到一个电话并将数据捎带到这个上面。显然，这只有在您已经使用 CTI 界面并进行设置时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-05T00:41:38.953

为我的罪参与了几个 Siebel 项目。标准的接口方式包括： - Web 服务（我认为 MoMo 指的是） - 您需要与 Siebel 应用程序团队核实，看看是否/可以打开；此外，可能需要修改普通服务以反映对 Siebel 数据结构的任何修改；即使在 Siebel 中，这也已成为 Web 应用程序之间接口的标准方式 - 从 Siebel 数据库表中直接读取（尽管出于非常特殊和可悲的原因，您不能写入它们）；快速且无需修改 - 直接写入 Siebel EIM 数据库表（您可以写入它们，然后让 Siebel 服务器运行数据加载作业）；快，但需要数据加载作业才能运行 - 我认为有一些 JBeans 支持，但我不知道它是否有效

访问 Oracle 支持站点并查找名为“概述：Siebel 企业应用程序集成”的文档

好的 - 所以你还需要记住 Siebel 有点奇怪，所以你需要一个 Siebel 开发人员来帮助你了解到底发生了什么......

# directx - 如何使用 Direct3D 使灯光在世界上保持固定

> ID：71720
> 
> 赞同：6
> 
> 时间：2008-09-16T12:29:59.750
> 
> 标签：directx, direct3d, lighting

我已经使用 OpenGL 很多年了，但是在第一次尝试使用 D3D 之后，我浪费了大量时间试图弄清楚如何让我的场景灯光保持固定在世界上而不是固定在我的对象上。

在 OpenGL 中，灯光位置会像使用 MODELVIEW 矩阵的其他所有内容一样进行转换，因此要在空间中固定灯光，您可以按照您想要的灯光方式设置您的 MODELVIEW，然后调用 glLightPosition，然后为您的几何体设置它并进行几何体调用. 在 D3D 中这无济于事。

（评论——我最终想出了这个问题的答案，但我在网络或 MSDN 上找不到任何有用的东西。如果我当时能找到这个答案，它会节省我几个小时的时间。 )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:44:27.377

我最终发现的答案是，虽然 OpenGL 只有一个合并`MODELVIEW`矩阵，但在 D3D 中，“世界”和“视图”变换是分开的，放置灯光似乎是造成这种情况的主要原因。所以答案是你`D3DTS_VIEW`用来设置应该应用于你的灯光`D3DTS_WORLD`的矩阵，并设置应用于你的几何体在世界中的位置的矩阵。

所以实际上 D3D 系统比 OpenGL 方式更有意义。它允许您随时随地指定您的灯光位置，一劳永逸，而无需不断地重新定位它们，以便它们通过您当前的“视图”变换进行变换。OpenGL 必须以这种方式工作，因为它根本不知道您认为您的“视图”与您的“模型”是什么。这对 GL 来说只是一个模型视图。

（评论 - 如果我不应该在这里回答我自己的问题，我们深表歉意，但这是我几周前提出的一个真实问题，并且认为值得在这里发布以帮助其他人从 OpenGL 转向 D3D。基本概述D3D 照明和渲染管道的一部分似乎很难获得。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:53:55.247

对于固定功能管线，灯光的位置和方向是在世界空间中设置的。轻型结构的文档确实告诉您这一点，但是您在文档中错过了它我并不感到惊讶。由于焦点必须集中在可编程着色器上，因此关于固定功能管道的信息已经不多了。

# visual-studio-2008 - VSTS 中的分支和合并

> ID：71722
> 
> 赞同：1
> 
> 时间：2008-09-16T12:30:07.783
> 
> 标签：visual-studio-2008, tfs, visual-studio-2005

在您的解决方案中重命名文件夹和项目后，合并的效果如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T12:54:02.580

根据我的经验，只要您在 SourceControlExplorer (TFS) 中进行所有重命名，TFS 就可以跟踪重命名。

当您让其他人对原始文件进行更改而其他人进行大量重命名/移动，而其他人正在编辑重命名的版本时，往往会出现问题。

在可能的情况下，我会说，如果您要进行大规模的重命名和移动，则值得通知队友，并且如果可能的话，让他们推迟进行更改，直到您签入为止。

与所有分支/合并问题一样，通过很少且经常签入和合并可以大大减少问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T13:38:08.027

在文件删除/重命名方面，我们在 TFS 2005 上取得了很多成功，但有一些非常具体的例外情况，即：

1.  已在源分支和目标分支中重命名的文件（这通常可以通过单击“忽略服务器更改”轻松解决）；
2.  已在目标分支中重命名但在源分支中删除的文件。我记得有一种情况，无论我们尝试什么，合并都不起作用，我们被迫“恢复”源分支上的更改并在合并后重新执行。

据说 TFS 2008 解决了很多这样的问题，但老实说，除了偶尔的合并问题之外，TFS 是稳定的，而且分层合并比使用 SVN 更简单、更快捷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T18:04:03.147

我们在使用 TFS 2005 和删除时遇到了很多问题。我还没有确定原因，但是我的一些团队成员在合并涉及重命名或删除文件夹的更改时遇到了问题。如果发生重命名的分支中有大量重构（以及重命名和重命名），这似乎尤其正确。我还没有弄清楚原因或复制步骤，因为我没有亲自参与任何它不起作用的情况。

我见过一些其他的一般删除问题是这样的： 1 在分支 A 中，将子目录 1 中的权限减少为只读 2\. 创建分支 B（从 A 分支到 B）（签入） 3\. 删除分支 B（签入) 4\. 从 A 创建一个新分支，将其命名为与分支 B 相同的名称 5\. 得到一个与 TFS 相关的奇怪权限错误，仍然“看到”已删除分支 B 上的只读权限。

我们发现避免它的唯一方法是插入步骤 2a：将分支 B 重命名为 _Branch B（签入）

总体而言，TFS 对我们来说非常棒，但在删除、重命名和合并方面存在一些问题。我们希望尽快升级到 2008，我希望它能解决我们的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-23T18:28:25.930

我有使用 TFS 2008 进行大量文件和文件夹移动的经验。这样做是为了使我们的源代码结构更加一致。我所要做的就是在 Team Explorer 中拖放（并等待），然后提交更改。

# java - Java Applet 崩溃 .NET Webbrowsercontrol

> ID：71740
> 
> 赞同：0
> 
> 时间：2008-09-16T12:32:56.200
> 
> 标签：java, browser, applet, controls

在我们的应用程序中，我们有一个在 .NET 浏览器控件中运行的 Java 小程序。Sun 的一个已知问题是，以这种方式运行小程序可能会使控件崩溃。

有没有人遇到过同样的问题并解决了？

Atm 我们在 Web 浏览器中运行小程序，但我们需要在浏览器控件中运行它。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T17:10:00.127

过了一段时间，问题自己解决了。这确实是 java 运行时中的一个错误，现在已由 sun 修复。只需确保您的 JRE > 1.6.10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T13:20:06.870

如果您编写了小程序并且有源代码，那么您可以尝试将 Java Applet 迁移到 J# 浏览器控件并将其填充到您的 .net 应用程序中。

```
Here is a link - http://msdn.microsoft.com/en-us/library/aa290083(VS.71).aspx 
```

# winforms - 使用 White 进行集成测试

> ID：71746
> 
> 赞同：9
> 
> 时间：2008-09-16T12:33:57.150
> 
> 标签：winforms, testing, integration-testing, white-framework

有没有人有白色框架的经验？

[www.codeplex.com/white](http://www.codeplex.com/white) ?

我正在考虑将它用于下一个项目，用于我们的 Windows 客户端的基本烟雾测试。我想对文章或您自己的经历提出一些建议。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-10T01:42:50.643

我最近使用白色为一个相当复杂的 WinForms 应用程序构建了几个（20 多个）UI 测试，其中包含大量用户控件、动态创建的和第 3 方控件。

以下是我的印象：

*   使用起来非常简单直观。
*   很少或没有质量问题。
*   这是一个年轻的项目，因此缺少一些功能，但它们已经涵盖了基础知识。
*   有时，如果控件没有已知的 AutomationID，我不得不使用击键来导航和操作控件（例如“选项卡、选项卡、输入”），这有点令人沮丧，但仍然很容易做到在白色。这通常只发生在第 3 方或动态生成的控件中。
*   White 的记录器很有帮助（实际上会为您生成代码），但经常会被复杂或不寻常的控件弄糊涂。为此，我建议你...
*   ...将 UISpy 放在附近，这样您就可以看到正在使用的控件的 AutomationID。
*   最后，如果您像我一样，希望设置一些自动化测试。这可能很棘手，因为自动化测试通常由 CI 工具运行，例如 CruiseControl，它作为 Windows 服务运行，因此没有活动的图形环境（Windows 会话）......这是白色需要的。[建议](http://www.codeplex.com/white/Wiki/View.aspx?title=Using%20with%20Continuous%20Integration&referringTitle=Home)的解决方法是使用虚拟机。这就是我失去动力的地方，因为我的工具链对于我的目的来说太大了：CruiseControl->NAnt->NUnit->white + virtual machine。

无论如何，希望这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:59:33.003

我最近评估了它，但不得不拒绝它，因为它不支持我们正在使用的第三方控件（janus 网格）。

# svn - 与 Team System 相互迁移的工具有多好？

> ID：71749
> 
> 赞同：4
> 
> 时间：2008-09-16T12:35:07.490
> 
> 标签：svn, migration, cruisecontrol.net

我想知道是否有人尝试在 TS 和 SVN/CC 之间迁移。我所说的迁移是在源控制系统之间导入和导出存储库而不丢失历史记录。

迁移到 VSTS 和从 VSTS 迁移的工具有多好？

我也有兴趣了解 SVN 和持续集成用户对使用 Team System 的任何意见。

编辑：假设我需要历史，否则为什么要使用 SCM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-07T16:21:02.693

尝试 tfs2svn... 非常适合具有 1200 个 TFS 变更集的项目。启用 svn 身份验证时设置有点繁琐，但其他方面都很好。

[http://sourceforge.net/projects/tfs2svn/](http://sourceforge.net/projects/tfs2svn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:51:14.940

我不是团队系统方面的专家，但我发现团队服务器上最近的 dotnetrocks 节目非常有趣：

[http://www.dotnetrocks.com/default.aspx?showNum=373](http://www.dotnetrocks.com/default.aspx?showNum=373)

我认为它可能包含一些可能对您有用的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:54:49.770

在[最近一集中的 DotNetRocks！](http://www.dotnetrocks.com/default.aspx?showNum=373)Brian Randell 和 Martin Woodward 认为，在采用新的源代码控制/SCM 系统时，最好从头开始（从最新版本开始，不要尝试迁移历史，并使用原始版本）只读查看更改历史/责备的系统）。

他们的讨论集中在 Visual Source Safe 而不是 SVN 上，显然从/到 SVN 的迁移不会有那么大的问题，但我仍然认为这是个好建议。问自己一个问题“我*真正*需要历史多久？”。它是否比证明收益合理的工作更多？你只是在为自己的背部做一根棍子吗？（……在这里插入比喻……）

**更新：**哇！有人刚刚和我同时给出了[完全相同的答案](https://stackoverflow.com/questions/71749/migrating-to-team-system-from-svn-cruise-controlnet-and-back#71859)——吓人！

# java - 在 Java 中将 ChartFX7 导出为 SVG

> ID：71755
> 
> 赞同：0
> 
> 时间：2008-09-16T12:36:02.310
> 
> 标签：java, xml, export, chartfx

任何人都可以举一个将 ChartFX7 图表导出到 SVG 的例子吗？

我试过了：

```
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    m_chart.setOutputWriter(new SvgWriter());
    m_chart.exportChart(FileFormat.EXTERNAL, baos);

```

和 ：

```
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    m_chart.setRenderFormat("SVG");
    m_chart.renderToStream();

```

但两者都会导致空指针异常。

以下成功输出到 XML：

```
    FileOutputStream fos = new FileOutputStream(Debug.getInstance().createExternalFile("chart.xml"));
    m_chart.exportChart(FileFormat.XML, fos);

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T22:56:30.260

[batik](http://xmlgraphics.apache.org/batik/)是一个库，您可以将其导入您的 java 库以转换或创建 svg 图像。我不知道 chartfx7 但这是在 java 中创建 svg 的标准方法。

# sql - 即使删除了 ' 字符，是否有某种方法可以注入 SQL？

> ID：71756
> 
> 赞同：12
> 
> 时间：2008-09-16T12:36:16.787
> 
> 标签：sql, database, sql-injection

如果我从 SQL 查询中删除所有 ' 字符，还有其他方法可以对数据库进行 SQL 注入攻击吗？

如何做呢？谁能给我例子？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-16T12:41:20.487

就在这里。摘自[维基百科](http://en.wikipedia.org/wiki/SQL_injection)

`"SELECT * FROM data WHERE id = " + a_variable + ";"`

从该声明中可以清楚地看出，作者希望 a_variable 是与“id”字段相关的数字。但是，如果它实际上是一个字符串，那么最终用户可以根据他们的选择来操作语句，从而绕过对转义字符的需要。例如，将 a_variable 设置为

`1;DROP TABLE users`

将从数据库中删除（删除）“用户”表，因为 SQL 将呈现如下：

`SELECT * FROM DATA WHERE id=1;DROP TABLE users;`

SQL注入*不是*简单的攻击。如果我是你，我会做非常仔细的研究。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-16T12:38:59.353

是的，取决于您使用的语句。您最好通过使用存储过程或至少参数化查询来保护自己。

有关预防样本，请参见[Wikipedia 。](http://en.wikipedia.org/wiki/SQL_injection#Preventing_SQL_Injection)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T13:01:08.707

是的，这绝对是可能的。

如果您有一个表单，其中您希望一个整数来创建您的下一个 SELECT 语句，那么您可以输入任何类似的内容：

SELECT * FROM `thingy`WHERE 属性 ID=

*   5（好答案，没问题）
*   5个；删除表`users`；（糟糕，糟糕，糟糕……）

以下网站详细介绍了经典的 SQL 注入技术：[SQL Injection cheat sheet](http://www.0x000000.com/index.php?i=14)。

使用参数化查询或存储过程也好不到哪里去。这些只是使用传递参数的预制查询，也可以是注入源。本页也对此进行了描述：[攻击 SQL 中的存储过程](http://www.0x000000.com/?i=148&bin=10010100)。

现在，如果你禁止简单的引用，你只能阻止一组给定的攻击。但不是全部。

一如既往，不要相信来自外部的数据。在这 3 个级别过滤它们：

*   显而易见的东西的界面级别（下拉选择列表比自由文本字段更好）
*   与数据性质（整数、字符串、长度）、权限（此用户是否可以在此页面上使用此类数据）相关的检查的逻辑级别...
*   数据库访问级别（转义简单引号...）。

玩得开心，别忘了查看[维基百科](http://en.wikipedia.org/wiki/SQL_injection#Preventing_SQL_Injection)的答案。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-16T13:53:18.847

我建议您将变量作为参数传递，而不是构建自己的 SQL。否则，总会有一种方法来进行 SQL 注入，以我们目前不知道的方式进行。

您创建的代码类似于：

```
' Not Tested
var sql = "SELECT * FROM data WHERE id = @id";
var cmd = new SqlCommand(sql, myConnection);
cmd.Parameters.AddWithValue("@id", request.getParameter("id")); 
```

如果你有一个像我这样的名字，里面有一个'。所有 ' 字符都被删除或标记为无效是非常烦人的。

您可能还想查看[有关 SQL 注入的 Stackoverflow 问题](https://stackoverflow.com/questions/1284/catching-sql-injection-and-other-malicious-web-requests)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T13:48:19.187

参数化内联 SQL 或参数化存储过程是保护自己的最佳方式。正如其他人指出的那样，仅仅剥离/转义单引号字符是不够的。

您会注意到我专门讨论了“参数化”存储过程。如果您恢复将过程传递的参数连接在一起，那么仅使用存储过程是不够的。换句话说，将完全相同的易受攻击的 SQL 语句包装在存储过程中并不会使其更安全。您需要在存储过程中使用参数，就像使用内联 SQL 一样。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T12:40:46.493

. . . 呃大约 50000000 其他方式

也许像`5; drop table employees; --`

生成的 sql 可能类似于： `select * from somewhere where number = 5; drop table employees; -- and sadfsf`

（`--`开始评论）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T13:06:54.840

此外 - 即使您只是寻找撇号，您也不想删除它。你想*逃避*它。您可以通过用两个撇号替换每个撇号来做到这一点。

但是参数化查询/存储过程要好得多。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-09T19:39:24.717

由于这是一个相对较旧的问题，我不会费心写一个完整而全面的答案，因为该答案的大部分方面都已被一位或另一位海报提到过。
然而，我确实认为有必要提出另一个在这里没有人提到的问题——SQL Smuggling。*在某些情况下，即使您尝试将*引号字符 ' 删除，也有可能将其“走私”到您的查询中。事实上，即使您使用了正确的命令、参数、存储过程等，这也是可能的。

[在http://www.comsecglobal.com/FrameWork/Upload/SQL_Smuggling.pdf](http://www.comsecglobal.com/FrameWork/Upload/SQL_Smuggling.pdf)上查看完整的研究论文（披露，我是这方面的主要研究人员）或者只是谷歌“SQL Smuggling”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T12:41:16.743

是的，绝对是：根据您的 SQL 方言等，有很多方法可以实现不使用撇号的注入。

针对 SQL 注入攻击的唯一可靠防御是使用数据库接口提供的参数化 SQL 语句支持。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T12:57:01.963

而不是试图找出要过滤掉的字符，我会坚持使用参数化查询，并完全消除问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T12:41:10.520

这取决于您如何组合查询，但本质上是的。

例如，在 Java 中，如果你要这样做（故意令人震惊的例子）：

```
 String query = "SELECT name_ from Customer WHERE ID = " + request.getParameter("id"); 
```

那么你很有可能会面临注射攻击。

Java 有一些有用的工具来防止这些，例如 PreparedStatements（您在其中传递一个字符串，例如“SELECT name_ from Customer WHERE ID = ?”，并且 JDBC 层在替换 ? 标记时为您处理转义），但还有一些其他语言对此没有太大帮助。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T12:47:51.173

事情是撇号可能是真正的输入，当您在代码中使用内联 SQL 时，您必须通过将它们加倍来逃避它们。您正在寻找的是一个正则表达式模式，如：

```
\;.*--\ 
```

一个分号用于过早结束正版语句，一些注入的 SQL 后跟双连字符以注释掉原始正版语句中的尾随 SQL。连字符可以在攻击中省略。

因此答案是：不，简单地删除撇号并不能保证您免受 SQL 注入的影响。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T13:52:15.963

我只能重复别人说过的话。参数化的 SQL 是要走的路。当然，对它进行对接编码有点痛苦 - 但是一旦你完成了一次，那么剪切和粘贴该代码并进行所需的修改并不难。我们有很多 .Net 应用程序允许网站访问者指定整个范围的搜索条件，并且代码动态构建 SQL Select 语句 - 但用户可能输入的所有内容都进入了参数。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T17:39:35.590

当您期望一个数字参数时，您应该始终验证输入以确保它是数字的。除了帮助防止注入之外，验证步骤将使应用程序更加用户友好。

如果您在期望 id = 1044 时收到 id = "hello"，那么最好向用户返回一个有用的错误，而不是让数据库返回一个错误。

# delphi - Delphi中的类/静态常量

> ID：71766
> 
> 赞同：16
> 
> 时间：2008-09-16T12:38:14.270
> 
> 标签：delphi

在 Delphi 中，我希望能够创建一个与类关联的私有对象，并从该类的所有实例中访问它。在Java中，我会使用：

```
public class MyObject {
    private static final MySharedObject mySharedObjectInstance = new MySharedObject();
} 
```

或者，如果 MySharedObject 需要更复杂的初始化，我可以在 Java 中实例化并在静态初始化块中初始化它。

（你可能已经猜到了……我知道我的 Java，但我对 Delphi 还很陌生……）

无论如何，我不想在每次创建 MyObject 实例时都实例化一个新的 MySharedObject，但我确实希望从 MyObject 的每个实例都可以访问一个 MySharedObject。（实际上是日志记录促使我尝试解决这个问题 - 我正在使用 Log4D，并且我想将 TLogLogger 作为每个具有日志记录功能的类的类变量存储。）

在 Delphi 中做这样的事情的最简洁的方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-16T13:14:43.997

下面是我使用类变量、类过程和初始化块的方法：

```
unit MyObject;

interface

type

TMyObject = class
   private
     class var FLogger : TLogLogger;
   public
     class procedure SetLogger(value:TLogLogger);
     class procedure FreeLogger;
   end;

implementation

class procedure TMyObject.SetLogger(value:TLogLogger);
begin
  // sanity checks here
  FLogger := Value;
end;

class procedure TMyObject.FreeLogger;
begin
  if assigned(FLogger) then 
    FLogger.Free;
end;

initialization
  TMyObject.SetLogger(TLogLogger.Create);
finalization
  TMyObject.FreeLogger;
end. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T13:54:29.937

去年，Hallvard Vassbotn 写了一篇关于我为此制作的 Delphi hack 的博客，它分为两部分：

1.  [技巧 #17：虚拟类变量，第一部分](http://hallvards.blogspot.com/2007/05/hack17-virtual-class-variables-part-i.html)
2.  [技巧 #17：虚拟类变量，第二部分](http://hallvards.blogspot.com/2007/05/hack17-virtual-class-variables-part-ii.html)

是的，读起来很长，但很有收获。

总之，我重用了（已弃用）名为 vmtAutoTable 的 VMT 条目作为变量。VMT 中的这个槽可以用来存储任何 4 字节的值，但是如果你想存储，你总是可以分配一个包含所有你想要的字段的记录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T12:55:21.733

```
 TMyObject = class
    private
      class var FLogger : TLogLogger;
      procedure SetLogger(value:TLogLogger);
      property Logger : TLogLogger read FLogger write SetLogger;
    end;

procedure TMyObject.SetLogger(value:TLogLogger);
begin
  // sanity checks here
  FLogger := Value;
end; 
```

请注意，此类变量可以从任何类实例写入，因此您可以在代码中的其他位置设置它，通常基于某些条件（记录器的类型等）。

编辑：在班级的所有后代中也将是相同的。在其中一个孩子中更改它，它会为所有后代实例更改。您还可以设置默认实例处理。

```
 TMyObject = class
    private
      class var FLogger : TLogLogger;
      procedure SetLogger(value:TLogLogger);
      function GetLogger:TLogLogger;
      property Logger : TLogLogger read GetLogger write SetLogger;
    end;

function TMyObject.GetLogger:TLogLogger;
begin
  if not Assigned(FLogger)
   then FLogger := TSomeLogLoggerClass.Create;
  Result := FLogger;
end;

procedure TMyObject.SetLogger(value:TLogLogger);
begin
  // sanity checks here
  FLogger := Value;
end; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T13:07:08.320

您正在寻找的关键字是“class var” - 这会在您的类声明中启动一个类变量块。如果您希望在其后包含其他字段，则需要以“var”结束该块（否则该块可能以“private”、“public”、“procedure”等说明符结束）。例如

（编辑：我重新阅读了这个问题并将引用计数移到 TMyClass 中 - 因为如果它来自其他人的库，您可能无法编辑要共享的 TMySharedObjectClass 类）

```
 TMyClass = class(TObject)
  strict private
    class var
      FMySharedObjectRefCount: integer;
      FMySharedObject: TMySharedObjectClass;
    var
    FOtherNonClassField1: integer;
    function GetMySharedObject: TMySharedObjectClass;
  public
    constructor Create;
    destructor Destroy; override;
    property MySharedObject: TMySharedObjectClass read GetMySharedObject;
  end;

{ TMyClass }
constructor TMyClass.Create;
begin
  if not Assigned(FMySharedObject) then
    FMySharedObject := TMySharedObjectClass.Create;
  Inc(FMySharedObjectRefCount);
end;

destructor TMyClass.Destroy;
begin
  Dec(FMySharedObjectRefCount);
  if (FMySharedObjectRefCount < 1) then
    FreeAndNil(FMySharedObject);

  inherited;
end;

function TMyClass.GetMySharedObject: TMySharedObjectClass;
begin
  Result := FMySharedObject;
end; 
```

请注意，上面不是线程安全的，可能有更好的引用计数方法（例如使用接口），但这是一个简单的示例，应该可以帮助您入门。注意 TMySharedObjectClass 可以替换为 TLogLogger 或任何你喜欢的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-24T13:13:10.200

好吧，这不是美，但在 Delphi 7 中可以正常工作：

```
TMyObject = class
pulic
    class function MySharedObject: TMySharedObject; // I'm lazy so it will be read only
end;

implementation 
```

...

```
class function MySharedObject: TMySharedObject;
{$J+} const MySharedObjectInstance: TMySharedObject = nil; {$J-} // {$J+} Makes the consts writable
begin
    // any conditional initialization ...
   if (not Assigned(MySharedObjectInstance)) then
       MySharedObjectInstance = TMySharedOject.Create(...);
  Result := MySharedObjectInstance;
end; 
```

我目前正在使用它来构建单例对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:20:38.950

对于我想做的事情（一个私有类常量），我能想出的最简洁的解决方案（基于迄今为止的响应）是：

```
unit MyObject;

interface

type

TMyObject = class
private
  class var FLogger: TLogLogger;
end;

implementation

initialization
  TMyObject.FLogger:= TLogLogger.GetLogger(TMyObject);
finalization
  // You'd typically want to free the class objects in the finalization block, but
  // TLogLoggers are actually managed by Log4D.

end. 
```

也许更面向对象会是这样的：

```
unit MyObject;

interface

type

TMyObject = class
strict private
  class var FLogger: TLogLogger;
private
  class procedure InitClass;
  class procedure FreeClass;
end;

implementation

class procedure TMyObject.InitClass;
begin
  FLogger:= TLogLogger.GetLogger(TMyObject);
end;

class procedure TMyObject.FreeClass;
begin
  // Nothing to do here for a TLogLogger - it's freed by Log4D.
end;

initialization
  TMyObject.InitClass;
finalization
  TMyObject.FreeClass;

end. 
```

如果有多个这样的类常量，这可能更有意义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T09:23:48.770

在提出“完美”解决方案之前，我认为需要回答两个问题。

*   首先，是 TLogLogger 是否是线程安全的。可以从多个线程调用相同的 TLogLogger*而不*调用“同步”吗？即使是这样，以下内容仍可能适用
*   类变量是线程范围内的还是真正全局的？
*   如果类变量是真正的全局变量，并且 TLogLogger 不是线程安全的，则最好使用单元全局线程变量来存储 TLogLogger（尽管我不喜欢以任何形式使用“全局”变量），例如

代码：

```
interface
type
  TMyObject = class(TObject)
  private
    FLogger: TLogLogger; //NB: pointer to shared threadvar
  public
    constructor Create;
  end;
implementation
threadvar threadGlobalLogger: TLogLogger = nil;
constructor TMyObject.Create;
begin
  if not Assigned(threadGlobalLogger) then
    threadGlobalLogger := TLogLogger.GetLogger(TMyObject); //NB: No need to reference count or explicitly free, as it's freed by Log4D
  FLogger := threadGlobalLogger;
end; 
```

*编辑：似乎类变量是全局存储的，而不是每个线程的实例。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/82113/are-delphi-class-vars-global-or-thread-in-storage)。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T12:45:30.120

在版本 7 之前，Delphi 没有静态变量，您必须使用全局变量。

为了使其尽可能私密，请将其放在`implementation`您单位的部分。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T12:48:38.100

在 Delphi 中，静态变量被实现为*变量类型常量*:)

这可能有点误导。

```
procedure TForm1.Button1Click(Sender: TObject) ;
const
   clicks : Integer = 1; //not a true constant
begin
  Form1.Caption := IntToStr(clicks) ;
  clicks := clicks + 1;
end; 
```

是的，另一种可能性是在`implementation`模块的一部分中使用全局变量。

这仅在全局或使用`{$J+}`语法 (tnx Lars) 打开编译器开关“Assignable Consts”时才有效。

# database - Unix shell 脚本可以用来操作数据库吗？

> ID：71775
> 
> 赞同：1
> 
> 时间：2008-09-16T12:39:49.163
> 
> 标签：database, shell, unix

我必须从一些文件中读取数据并将数据插入数据库中的不同表中。Unix shell 脚本是否强大到足以胜任这项工作？

在 shell 脚本中完成这项工作是否容易，还是我应该在 Java 中完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T13:10:00.467

如果您尝试导入的数据采用合理的格式（例如，逗号分隔）并且您的数据库服务器具有合理的命令行实用程序，那么这应该没有问题。MySQL 有“mysqlimport”命令行工具，可以接受描述文件格式的各种参数：

```
mysqlimport \
    --fields-terminated-by=, \
    --ignore-lines=1 \
    --fields-optionally-enclosed-by='"' < datafile.txt 
```

通过 perl/sed/awk 单行程序传递数据有助于以正确的格式获取数据，并且 shell 脚本可以轻松处理提示文件名、处理参数等。

使用 Unix 提供的各种命令行工具是 bash 脚本的重点。Perl、mysql 等都是该工具包的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T12:43:46.660

有可能：使用您的 unix shell 脚本，生成一个 sql 脚本并使用 cli 到数据库来执行 sql 脚本。

如果信息量足够小，您可以在内存中构建 SQL，但我建议您不要这样做，因为您永远不知道未来会发生什么（而且它可能是非常大量的数据）。每个请求使用一个调用不允许您从有时可用的批量操作中受益。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T12:44:10.823

你可以，但它可能有点难看，例如，如果你使用 mysql 并假设你有一个 SQL 字符串存储在 $sql

```
echo $sql | mysql -u[user] -p[password] -h[host] 
```

ps 告诉我们您使用的是什么数据库可能是个好主意，这样我们可以提供更具体的帮助：p

编辑：更改了示例行，使其实际工作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T12:50:34.943

当然可以，前提是您手边有一个命令行 SQL 客户端！我已经用 Sybase 和 isql 命令行客户端完成了它。您甚至可以变得聪明并通过 awk 发送内容并发送脚本以即时生成命令。这可能不是做所有事情的最有效方式，但有很多机会来发挥你的 Unix 黑客魔力。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T12:48:07.430

管道是你的朋友。

例如，在 MySQL 中：

```
echo 'load data infile /path/to/the/file into table table_name ...' | 
    mysql -u mysql_user_id -p 
```

应该做的工作。

如果您的文件以某种方式结构化，例如逗号/制表符分隔等。

有关详细信息，请查看您的数据库的手册。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T12:42:39.003

现在无法测试，但类似：

```
echo "INSERT INTO foo (b,a,r) VALUES (1,2,3);" | 
    mysql -u user -psecret -h host database 
```

在 shell 脚本中应该可以工作。虽然不知道如何从中获取数据

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T19:07:24.880

这取决于您的数据库管理系统。他们中的大多数都有强大的 shell 工具来导入数据，甚至执行一些 ETL 功能。如果这些工具支持批量加载，它们甚至可能非常高效——通常 Java JDBC 不能那么容易地做到这一点。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2008-09-16T12:44:46.190

Shell 脚本（Bash 或类似）的主要目的不是处理数据库。选择 Java 甚至更好，利用这个机会学习 Python 或 Ruby 等脚本语言的基础知识。

# bash - 抓取每 4 个文件

> ID：71776
> 
> 赞同：3
> 
> 时间：2008-09-16T12:40:11.050
> 
> 标签：bash, scripting

我有 16,000 张来自 webcan 屏幕抓取器的 jpg，我让它们运行了一年，指向后一年。我想找到一种方法来抓取每 4 个图像，以便我可以将它们放入另一个目录，以便以后将它们变成电影。linux下是否有一个简单的bash脚本或其他方式可以做到这一点。

他们的名字是这样的......

frame-44558.jpg

frame-44559.jpg

frame-44560.jpg

frame-44561.jpg

感谢需要帮助的新手。

* * *

似乎奏效了。我的原始帖子中有几个错误。实际上有 280,000 张图像，命名是。/home/baldy/Desktop/webcamimages/webcam_2007-05-29_163405.jpg /home/baldy/Desktop/webcamimages/webcam_2007-05-29_163505.jpg /home/baldy/Desktop/webcamimages/webcam_2007-05-29_163605.jpg

我跑了。cp $(ls | awk '{nr++; if (nr % 10 == 0) print $0}') ../newdirectory/

似乎复制了图像。从外观上看每天70-900。

现在我正在运行 mencoder mf://*.jpg -mf w=640:h=480:fps=30:type=jpg -ovc lavc -lavcopts vcodec=msmpeg4v2 -nosound -o ../output-msmpeg4v2.avi

我会让你知道这部电影的效果如何。

更新：电影没有工作。尽管目录中也有 2008 年，但其中只有 2007 年的图像。webcam_2008-02-17_101403.jpg webcam_2008-03-27_192205.jpg webcam_2008-02-17_102403.jpg webcam_2008-03-27_193205.jpg webcam_2008-02-17_103403.jpg webcam_2008-03-27_194205.jpg webcam_2008-02-17_104403.jpg webcam_2008 -03-27_195205.jpg

如何修改我的 mencoder 线以使其使用所有图像？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-16T12:45:22.023

一种简单的方法是：

```
$ touch abcdefghijklmnopqrstu vwxyz
$ mv $(ls | awk '{nr++; if (nr % 4 == 0) print $0}') destdir

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T12:46:35.280

创建一个包含以下内容的脚本 move.sh：

```
#!/bin/sh
mv $4 ../newdirectory/ 
```

使其可执行，然后在文件夹中执行此操作：

```
ls *.jpg | xargs -n 4 ./move.sh 
```

这需要文件名列表，一次将四个传递给 move.sh，然后忽略前三个并将第四个移动到新文件夹中。

即使数字不完全按顺序，这也会起作用（例如，如果缺少某些帧编号，则使用 mod 4 算法将不起作用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T14:46:17.940

如建议的那样，您应该使用

```
seq -f 'frame-%g.jpg' 1 4 number-of-frames 
```

生成文件名列表，因为 'ls' 将在 280k 文件上失败。所以最终的解决方案是这样的：

```
for f in `seq -f 'frame-%g.jpg' 1 4 number-of-frames` ; do
  mv $f destdir/
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T12:43:50.200

perl 中的一种简单方法（可能很容易适应 bash）是将文件名全局化到一个数组中，然后获取序列号并删除那些不能被 4 整除的

像这样的东西会打印你需要的文件：

```
ls -1 /path/to/files/ | perl -e 'while (<STDIN>) {($seq)=/(\d*)\.jpg$/; print $_ if $seq && $seq % 4 ==0}' 
```

您可以通过移动替换打印...

如果文件按顺序编号，即使位数不是恒定的（如`file_9.jpg`后跟 `file_10.jpg`） ，这也将起作用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T12:48:09.473

```
seq -f 'frame-%g.jpg' 1 4 number-of-frames 
```

…将打印您需要的文件的名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T14:38:44.417

鉴于masto关于排序的警告：

`ls | sed -n '1~4 p' | xargs -i mv {} ../destdir/`

我喜欢这个解决方案的一点是，一切都在按照它的设计目的做，所以对我来说感觉很单一。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T12:52:51.863

只需遍历文件列表：

```
files=( frame-*.jpg )
i=0
while [[ $i -lt ${#files} ]] ; do
  cur_file=${files[$i]}
  mungle_frame $cur_file
  i=$( expr $i + 4 )
done 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T12:58:55.030

这很俗气，但它应该可以完成工作。假设您当前 cd'd 进入包含所有文件的目录：

```
mkdir ../outdir
ls | sort -n | while read fname; do mv "$fname" ../outdir/; read; read; read; done 
```

假设您的`sort -n`文件名并非都具有相同的位数；否则`ls`将按词汇顺序排序，`frame-123.jpg`我`frame-4.jpg`认为这不是你想要的。

请小心，在尝试我的解决方案之前备份您的文件等。我不想为您丢失一年的数据负责。

请注意，与大多数其他解决方案不同，此解决方案确实处理名称中带有空格的文件。我知道这不是示例文件名的一部分，但是很容易编写不能安全处理空格的 shell 命令，所以我想在这个示例中这样做。

# windows - 适合初学者的 Windows IDE/编辑器

> ID：71786
> 
> 赞同：-1
> 
> 时间：2008-09-16T12:42:21.700
> 
> 标签：windows, ide, editor

我正在向研究生教授（或尝试教授）计算机编程。她以前的经验只不过是编写电子表格公式而已。我应该推荐哪个 IDE 或文本编辑器？

请记住：

*   我每周只见我的学生一次。
*   她使用 Windows，我使用 Linux。
*   她手头没有用户社区。
*   她没有太多钱可以花。

* * *

**编辑：**她目前正在学习的语言是*Perl*和*R*。（对不起......因为忘了早点提到它们。）

* * *

**编辑：**感谢您的所有回答！

最强烈推荐的编辑器是*jEdit*和*Notepad++*。

如果我能找到一种方法为我的学生提供对*Notepad++*的充分支持（例如，通过在*Wine*下运行它），或者如果我认为她可以在没有我支持的情况下进行管理，那么我会推荐它。如果没有，我会选择*jEdit*。

再次向那些在我开始列出我正在教授的语言之前看到这个问题的人道歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T12:44:12.460

[Visual Studio Express](http://www.microsoft.com/Express/)产品都是免费的。除非您使用 Linux 的事实改变了一切：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T12:52:33.283

从简单开始。不要用 IDE 吓唬她！它们一开始是压倒性的，并不是开发软件的核心。[我通过Crimson Editor](http://www.crimsoneditor.com/)学习了基本的 Java 。如果我重新开始，我可能会选择[Notepad++](http://notepad-plus.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T12:44:31.570

Eclipse 可能是一个不错的选择（如果一开始有点不知所措）。

您显然需要查看跨平台 IDE。Eclipse 是这方面最好的之一，并且支持多种语言。它还附带了一套很好的教程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T12:48:36.960

由于您没有提到您在教什么编程语言（猜这没关系），我会坚持支持多种编程语言和多个平台的东西。鉴于您的情况，我会使用 jEdit ( [http://www.jedit.org](http://www.jedit.org) )。

jEdit 是一个程序员的文本编辑器，具有数百个插件、自动缩进和语法高亮，适用于 130 多种语言，并且由于它是用 Java 编写的，因此它可以在 Linux、Windows 或 MAC 上完美运行。希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T12:49:17.957

我已经多次使用 Notepad++] [1](http://notepad-plus.sourceforge.net/uk/site.htm)进行各种编辑任务，我发现它非常有用且能胜任。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T12:55:00.937

在我看来，最好的、文档最多的免费 IDE 是 Visual Studio Express。有大量的博客、howtos、视频、培训等。您可以在此处找到有关它们的更多信息：

[http://www.microsoft.com/Express/](http://www.microsoft.com/Express/)

此外，如果您是学生，Microsoft 会为此免费向学生提供一整套软件。这是通过一个名为 DreamSpark 的程序实现的。包括操作系统、专业版 IDE、SQL Server、XNA Game studio 和 Expression。任何学生都可以得到这个。更多信息在这里：

[https://downloads.channel8.msdn.com/](https://downloads.channel8.msdn.com/)

希望有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T12:47:12.203

取决于编程语言。对于 C/C++ 和任何 .net Visual Studio 都是可行的方法。Express 版是免费的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T12:47:43.483

Eclipse 或 Jedit，如果 Eclipse 太复杂的话。[jEdit](http://www.jedit.org/)是跨平台的、免费的并且支持多种不同的语言。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T12:48:29.067

Crimson Editor 也很不错；它类似于 Edit Plus。语法高亮、制表符等。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T13:04:49.963

[用于编辑的Notepad++](http://notepad-plus.sourceforge.net/)对我来说很棒：它仅适用于 Windows，但也许您可以在 Linux 下将其与 Wine 一起使用。但是如果你想要一个更像 IDE 的东西，那么 Eclipse 或[NetBean](http://www.netbeans.org/)（两者都使用 java）会非常有用，尽管它们在旧 PC 上的资源非常昂贵。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T12:44:46.640

我的建议是[Textpad](http://www.textpad.com/)。你可以教她 javascript，所有的基本概念和一些高级概念都在那里。学生在浏览器中查看输出很有趣，如果心情好，您甚至可以教一些 HTML。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T12:45:27.950

Active Vision 的 Komodo Edit 是免费的、开源的，可用于 Windows 和 Linux。非常好的功能。

否则，Emacs 在两个平台上都可用，并且可以配置用于 CUA 控件。

VIM 的 Cream 版本也是一个不错的选择。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T12:45:47.810

这真的取决于你教她的语言。

EditPlus 是一个很好的简单编辑器。免费试用版和相当便宜的许可证。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T12:46:28.230

[Dev-C++](http://www.bloodshed.net/devcpp.html)作为非 MS 替代方案。

引用：“Bloodshed Dev-C++ 是用于 C/C++ 编程语言的全功能集成开发环境 (IDE)。它使用 GCC (GNU Compiler Collection) 的 Mingw 端口作为编译器。Dev-C++ 也可以组合使用与 Cygwin 或任何其他基于 GCC 的编译器一起使用。”

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T12:47:34.187

[Code::Blocks](http://www.codeblocks.org)也是另一个不错的，免费且跨平台的。除非您需要使用 VB/C# 或其他 .NET 语言的东西，因为它主要是 C/C++。对于 linux 上的 .NET 语言，我会推荐[MonoDevelop](http://monodevelop.com/Main_Page)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T12:47:37.163

Aptana 对于面向 Web 的编程非常方便。

[http://www.aptana.com](http://www.aptana.com)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T12:51:17.453

这至少部分取决于您打算教她的编程语言。也就是说，您可能想看看[Eclipse](http://www.eclipse.org/)。虽然它最初是作为一个 Java IDE 开始的，但它已经通过插件进行了扩展以支持许多其他语言（包括 C/C++、Flex、Haskell 和 ColdFusion，仅举几例），并且如果支持不支持，可以相当容易地适应新语言还没有。

除此之外，IDE 是跨平台的，因此您可以在您选择的平台上使用相同的工具，看起来这可能是一个不错的选择。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T12:51:18.950

我推荐[SciTE](http://www.scintilla.org/SciTE.html)，因为它可用于 *nix 和 Windows 并且免费（如啤酒）。它几乎支持您对一个体面的编辑器所期望的任何东西，如果她继续使用它，它可以完全自定义。它也不是太复杂，所以她应该很容易上手。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-16T12:51:38.887

+1 对 Notepad++ 的建议 - 我所做的任何与 .Net 无关的事情。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-16T12:54:55.947

对于 Java，BlueJ 是一款出色的教学 IDE。它不会让新学生混淆许多高级功能（他们将在未来几年内不会使用的东西）。Eclipse 是一个很棒的 IDE，但其中有很多东西可以让他们淹没。Visual Studio 也是如此，但我不知道有一个更简单的 .NET 语言 IDE。

您也可以考虑将 Ruby 与 Scite 作为教学选择。IDE 并没有那么花哨，但是随着学习 Ruby 的易于启动，这可以很好地工作。对于初学者来说，Ruby 肯定比 Java/C#/C++ 有一些优势（主要是因为您不必为了让程序运行而创建一个带有 main 方法的完整类）。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-16T12:56:55.317

对于易于教授的 Component Pascal 语言（Niklaus Wirth 的 Pascal 和 Oberon 的继任者），请尝试免费的开源[BlackBox IDE](http://www.oberon.ch/blackbox.html)和Stan Warford的《[计算基础》一书。](https://rads.stackoverflow.com/amzn/click/com/3528058285)

问候，坦伯格

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-16T12:57:06.330

如果您正在编写针对 Windows 平台的软件，那么 Visual Studio 或多或少是标准 IDE。由于您正在教研究生，因此如果他们要编写大量软件，我建议您获得[专业版的学术许可证，否则](http://msdn.microsoft.com/en-us/vs2008/products/bb894671.aspx)[速成版](http://www.microsoft.com/express/)应该足以用于学习目的。

在文本编辑器方面，我目前使用最多的是[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)，它是免费的、开源的，并且支持对软件开发有用的各种功能。还有许多有用的插件可供它使用。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-16T13:05:47.557

我不敢相信没有人提到过vi。我会争辩说，你的工具在开始时为你做的越少，你最终会成为更好的编码器。对于新手，给他们语法高亮和一些处理块和行的帮助。vi 之类的东西很棒，emacs 也很好，或者如果你绝对必须在 Windows 上，notepad++ 或 jedit 之类的东西会很不错。重点是在你学会让你的IDE插入你不理解的代码之前先学会编程。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-16T13:31:29.820

[多重编辑](http://www.multieditsoftware.com)

非常强大（并且在 emacs 级别上可扩展）文本编辑器，具有许多 IDE 功能（与编译器/调试器等集成）。在各个方面都击败了所有其他建议的编辑器。

比 vi 或 Emacs 等具有 UNIX/终端根目录的编辑器更易于学习和使用。

不是免费的（虽然不是太贵），并且需要一些学习才能有效地使用。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-16T13:41:15.680

另一个成熟的 IDE 是 SharpDevelop。它是开源的。

[http://www.icsharpcode.net/OpenSource/SD/](http://www.icsharpcode.net/OpenSource/SD/)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-17T02:28:06.960

宙斯 - [http://www.zeusedit.com](http://www.zeusedit.com)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-17T08:42:40.223

我不得不提到[PSPad](http://www.pspad.com/)。
它非常好，功能丰富的免费编辑器。我用过[UtraEdit](http://www.ultraedit.com/)，终于在[PSPad中找到了免费的替代品](http://www.pspad.com/)

# emacs - 让 Emacs 填充段落与类似 javadoc 的注释配合得很好

> ID：71788
> 
> 赞同：11
> 
> 时间：2008-09-16T12:42:34.727
> 
> 标签：emacs, elisp

我正在为我在工作中使用的 APL 方言编写 Emacs 主模式。我已经获得了基本的字体锁定功能，并且在设置评论开始和评论开始跳过后，评论/取消评论区域和填充段落也可以工作。

但是，注释块通常包含 javadoc 样式的注释，我希望填充段落以避免以此类命令开头的行粘合在一起。

如果我有这个（\ 而不是 javadoc @）：

```
# This is a comment that is long and should be wrapped.
# \arg Description of argument
# \ret Description of return value 
```

MQ给我：

```
# This is a comment that is long and
# should be wrapped. \arg Description
# of argument \ret Description of
# return value 
```

但我想要：

```
# This is a comment that is long and
# should be wrapped.
# \arg Description of argument
# \ret Description of return value 
```

我尝试将段落开头和段落分隔设置为适当的值，但填充段落在注释块中仍然不起作用。如果我删除注释标记，Mq 会按我的意愿工作，所以我用于段落开头的正则表达式似乎可以工作。

我必须为我的主要模式编写自定义填充段落吗？cc-mode 有一个可以处理这样的情况，但它真的很复杂，如果可能的话我想避免它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T07:45:37.363

问题是段落开始正则表达式必须匹配整行才能工作，包括实际的注释字符。以下 elisp 适用于我给出的示例：

```
(setq paragraph-start "^\\s-*\\#\\s-*\\\\\\(arg\\|ret\\).*$") 
```

这里有一个用于 php-mode 的示例正则表达式的页面：http: [//barelyenough.org/blog/2006/10/nicer-phpdoc-comments/](http://barelyenough.org/blog/2006/10/nicer-phpdoc-comments/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T14:05:31.673

还有其他模式使用的功能不太复杂`fill-paragraph-function`。浏览我的安装，看起来 ada-mode 和 make-mode 是很好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T16:03:02.170

在这些情况下，我所做的是在段落行和参数行之间打开一个空白行，然后使用 Mq 换行段落行，然后删除它们之间的空白行。不理想，但如果您需要重复它，它可以工作并且很容易在宏中录制。

# windows - 如何使用 Windows Core API 制作无限滚动条控件？

> ID：71801
> 
> 赞同：0
> 
> 时间：2008-09-16T12:44:26.580
> 
> 标签：windows, visual-studio, winapi, visual-c++

我怎么做一个？我是 Windows API 的新手。这种事情有什么手册吗？我对核心 API 特别感兴趣。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-13T13:24:54.583

滚动条的三种方式： 窗口的滚动条；滚动条控件；或自定义控件。

Windows 在非客户端 (NC) 区域中有滚动条。这些是窗框的一部分，因此它们没有自己的窗把手或任何东西。

滚动条控件是滚动条的子窗口实现。因为它们是子窗口，所以它们为您提供了更多的灵活性。您可以对这些控件之一进行子类化或超类化以实现“无限”功能。

最后一个选项是自定义控件：您只需从头开始创建自己的滚动条。创建单个子窗口，自己绘制，自己处理所有的鼠标和键盘输入，自己实现滚动条消息。这实际上并不像听起来那么难。

我可能会推荐[超类化](http://msdn.microsoft.com/en-us/library/ms633569.aspx)滚动条控件。在您自己的滚动条 wndproc 中处理滚动消息，并回退到标准滚动条 wndproc 进行绘画等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:48:53.637

“无限”是什么意思？

如果您的意思是用户永远无法滚动到末端的滚动条，您必须处理滚动条的位置更改通知并将位置重置到中间。

# eclipse - 如何配置 Eclipse 以在 subversion 树中处理基于 Qt 的应用程序？

> ID：71815
> 
> 赞同：1
> 
> 时间：2008-09-16T12:46:16.607
> 
> 标签：eclipse, svn, qt

我公司的大部分工作都是基于 Qt 的 C++，并且都被检入到一个 Subversion 存储库中。到目前为止，代码库上的所有工作都是纯粹使用 nano 或 Kate 完成的。作为新手，我想利用设置 Eclipse 的优势——正确地——编辑我的本地树副本。我有 Eclipse 的 CDT“版本”、Qt 集成和 Subclipse 模块。不过，此时此刻，我不知道该怎么办。我是否将项目“导入”到 Eclipse 控制的工作区中？我是否就地编辑它们？我尝试做的任何事情都没有让 Eclipse 识别出“项目”是一个 Qt 应用程序，这样我就可以让集成工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:49:41.700

我会在 Eclipse 中创建一个新的 QT 项目，然后将透视图切换到 subclipse 并简单地将 SVN 签出到新的 Eclipse 项目中。你应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-29T20:47:16.087

我在工作中遇到了完全相同的情况（使用 CVS 而不是 subversion，团队的其他成员使用 KDevelop，但这没什么大不了的）。只需使用 Qt - Eclipse 集成功能启动一个新的 Qt Gui 项目，然后删除所有自动生成的文件。现在使用 Eclipse 的“团队”功能并选择共享您的项目，输入存储库的路径就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T17:07:11.907

好的，我一直在玩这个想法，它有一些优点。我可以切换到“SVN Project Exploring”视角（我之前没有注意到），并从我想要的子项目的负责人那里进行检查。我在我的 Eclipse 工作区中获得了一个很好的 SVN 链接的树副本以进行编辑。Eclipse 甚至“理解”类，并且可以完成方法等。但是，我仍然无法让 Eclipse 了解该项目是一个“QT Gui”项目，以便我可以查看属性，并控制各种 Qt 库的链接等。通过扩展，它也不知道如何构建我的项目，就像我从头开始创建一个空的 Qt Gui 项目一样。我如何让这部分工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T11:29:09.883

我可以让它工作的唯一方法是使用 eclipse 检查项目，然后从另一个 Qt 项目复制 .project 和 .cdtproject 文件。然后对项目进行刷新。这是一个可怕的黑客，但它让你开始。您可能需要为“make”定义另一个构建器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-19T12:55:40.643

我会说与最后一个相同，但不是两个第一步，我将设置 Qt-Eclipse 集成： 在查找 *.pro 文件之前进行[Qt-Eclipse 集成。](http://www.qtsoftware.com/developer/eclipse-integration)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T21:55:28.903

签出项目。它会询问您一些选项，例如您是想从一个空白项目开始，还是想使用树来创建一个新项目。选择后者，你应该没问题:)。它似乎对我有用 Ganymed 和颠覆性（不确定 subclipse，我不记得了。）:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T14:22:30.660

第二个nikolavp - Checkout，并标记使用新项目向导的选项，然后选择Qt项目。我已经完成了这个（使用 ganymede），它成功地找到了所有内容并正确构建。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-29T12:53:14.810

我的解决方案：

1.  转到 svn-view 并为您的项目添加存储库位置
2.  使用 svn 或您喜欢的任何客户端检查项目的一些临时位置
3.  选择“文件->导入...”并说“Qt->Qt 项目”
4.  浏览到 *.pro 文件的位置，选择并点击 OK 按钮
5.  您在游戏中拥有合适的 Qt 项目和该项目的 Subversion 访问权限

# python - 使用一种方法的文档字符串自动覆盖另一种方法的文档字符串

> ID：71817
> 
> 赞同：4
> 
> 时间：2008-09-16T12:46:28.150
> 
> 标签：python, metaclass

问题：我有一个类，其中包含一个`execute`调用另一个方法的模板方法`_execute`。子类应该被覆盖`_execute`以实现某些特定功能。此功能应记录在`_execute`. 高级用户可以创建自己的子类来扩展库。但是，处理此类子类的另一个用户应该只使用`execute`，因此如果他使用 ，他将看不到正确的文档字符串`help(execute)`。

因此，最好修改基类，使子类中的文档字符串`execute`自动替换为`_execute`. 任何想法如何做到这一点？

我正在考虑使用元类来做到这一点，以使其对用户完全透明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T14:02:38.390

好吧，如果您不介意在子类中复制原始方法，则可以使用以下技术。

```
import new

def copyfunc(func):
    return new.function(func.func_code, func.func_globals, func.func_name,
                        func.func_defaults, func.func_closure)

class Metaclass(type):
    def __new__(meta, name, bases, attrs):
        for key in attrs.keys():
            if key[0] == '_':
                skey = key[1:]
                for base in bases:
                    original = getattr(base, skey, None)
                    if original is not None:
                        copy = copyfunc(original)
                        copy.__doc__ = attrs[key].__doc__
                        attrs[skey] = copy
                        break
        return type.__new__(meta, name, bases, attrs)

class Class(object):
    __metaclass__ = Metaclass
    def execute(self):
        '''original doc-string'''
        return self._execute()

class Subclass(Class):
    def _execute(self):
        '''sub-class doc-string'''
        pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T13:31:44.953

您是否有理由不能`execute`直接覆盖基类的函数？

```
class Base(object):
    def execute(self):
        ...

class Derived(Base):
    def execute(self):
        """Docstring for derived class"""
        Base.execute(self)
        ...stuff specific to Derived... 
```

如果您不想执行上述操作：

方法对象不支持写入`__doc__`属性，因此您必须更改`__doc__`实际的函数对象。由于您不想覆盖基类中的那个，因此您必须为每个子类提供其自己的副本`execute`：

```
class Derived(Base):
    def execute(self):
        return Base.execute(self)

    class _execute(self):
        """Docstring for subclass"""
        ...

    execute.__doc__= _execute.__doc__ 
```

但这类似于重新定义`execute`...的迂回方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T15:19:05.897

查看 functools.wraps() 装饰器；它完成了所有这些，但我不知道你是否可以让它在正确的上下文中运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:25:12.177

那么文档字符串被存储在其中，因此根据事后的`__doc__`文档字符串重新分配它不会太难。`_execute`

基本上：

 `````
class MyClass(object):
    def execute(self):
        '''original doc-string'''
        self._execute()

class SubClass(MyClass):
    def _execute(self):
        '''sub-class doc-string'''
        pass

    # re-assign doc-string of execute
    def execute(self,*args,**kw):
        return MyClass.execute(*args,**kw)
    execute.__doc__=_execute.__doc__

````  `Execute 必须重新声明为文档字符串附加到执行的版本`SubClass`而不是 for `MyClass`（否则会干扰其他子类）。

这不是一种非常整洁的方式，但从图书馆用户的 POV 来看，它应该会给出预期的结果。然后，您可以将其包装在一个元类中，以使子类化的人更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T14:17:43.780

我同意最简单、最 Pythonic 的解决方法是在子类中重新定义 execute 并让它调用基类的 execute 方法：

```
class Sub(Base):
    def execute(self):
        """New docstring goes here"""
        return Base.execute(self) 
```

这是很少的代码来完成你想要的；唯一的缺点是您必须在扩展 Base 的每个子类中重复此代码。但是，这是为您想要的行为付出的很小的代价。

如果您想要一种草率且冗长的方式来确保动态生成执行的文档字符串，您可以使用描述符协议，这将比这里的其他建议少得多的代码。这很烦人，因为您不能只在现有函数上设置描述符，这意味着 execute 必须编写为带有`__call__`方法的单独类。

这是执行此操作的代码，但请记住，我上面的示例更简单，更 Pythonic：

```
class Executor(object):
    __doc__ = property(lambda self: self.inst._execute.__doc__)

    def __call__(self):
        return self.inst._execute()

class Base(object):
    execute = Executor()

class Sub(Base):
    def __init__(self):
        self.execute.inst = self

    def _execute(self):
        """Actually does something!"""
        return "Hello World!"

spam = Sub()
print spam.execute.__doc__  # prints "Actually does something!"
help(spam)                  # the execute method says "Actually does something!" 
```

# c++ - 在不调用 read() 的情况下确定管道的大小

> ID：71820
> 
> 赞同：7
> 
> 时间：2008-09-16T12:47:04.467
> 
> 标签：c++, c, linux, unix

我需要一个调用的函数`SizeOfPipe()`，它应该返回管道的大小——我只想知道管道中有多少数据，而不是实际从管道本身读取数据。

我认为下面的代码会起作用：

```
fseek (pPipe, 0 , SEEK_END);
*pBytes = ftell (pPipe);
rewind (pPipe); 
```

但`fseek()`不适用于文件描述符。另一种选择是读取管道然后将数据写回，但如果可能的话希望避免这种情况。有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-16T13:10:04.990

根据您的 unix 实现，ioctl/FIONREAD 可能会成功

```
错误 = ioctl(pipedesc, FIONREAD, &bytesAvailable);

```

除非这返回“无效参数”（或任何其他错误）的错误代码，否则 bytesAvailable 包含当时可用于解除阻塞读取操作的数据量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T12:59:17.713

`st_size`一些 UNIX 实现在调用 之后返回可以在字段中读取的字节数`fstat()`，但这不是可移植的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T12:53:09.757

不幸的是，系统并不总是知道管道的大小——例如，如果您将一个长时间运行的进程通过管道传输到另一个命令中，那么源进程可能还没有完成运行。在这种情况下，（即使在理论上）不可能知道还有多少数据会从中产生。

如果您想知道*当前*可用于从管道中读取的数据量，这将取决于操作系统缓冲和其他难以控制的因素。这里最常见的方法是继续阅读，直到没有任何内容为止（如果你没有得到 EOF，那么源进程还没有完成）。但是，我认为这不是您要寻找的。

所以恐怕没有通用的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T16:41:05.310

几乎不需要知道管道中有多少字节：也许您只想在管道上执行非阻塞 read() ，即。检查是否有任何字节准备好，如果是，则读取它们，但永远不要停止并*等待*管道准备好。

您可以分两步完成。首先，使用 select() 系统调用来确定数据是否可用。一个例子在这里：[http ://www.developerweb.net/forum/showthread.php?t=2933](http://www.developerweb.net/forum/showthread.php?t=2933)

其次，如果 select 告诉您数据可用，则调用 read() 一次，并且只调用一次，并且块大小很大。它只会读取*可用*的字节数，或者读取块的大小，以较小者为准。如果 select() 返回 true，read() 将始终立即返回。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T12:52:50.570

通常，仅从管道句柄就无法知道可以从管道中读取的数据量。数据可能通过网络传入，或者由另一个进程动态生成。如果您需要预先知道，您应该安排将信息发送给您 - 通过管道或带外 - 通过管道另一端的任何进程。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T12:52:58.913

没有通用的、可移植的方法来判断管道中有多少数据可用，而无需读取它。至少不在 POSIX 规范下。

管道不可搜索，也不可能将数据放回管道的读取端。

不过，特定于平台的技巧可能是可能的。如果您的问题是特定于平台的，那么编辑您的问题并这样说可能会提高您获得有效答案的机会。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:22:02.357

没有可移植的方法来判断来自管道的数据量。您唯一能做的就是读取和处理数据。

为此，您可以使用类似[循环缓冲区的东西](http://en.wikipedia.org/wiki/Circular_buffer)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-08T18:55:20.693

您可以将其包装在带有可以倒带的缓冲的对象中。这仅适用于少量数据。

在 C 中执行此操作的一种方法是定义 stuct 并包装所有在管道上为您的结构运行的函数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T12:53:05.390

我认为这是不可能的，不是管道的目的是提供两端之间的进程间通信（在一个方向上）。如果我在那个断言中是正确的，那么发送可能还没有完成将数据推送到管道中——所以不可能确定长度。

你用的是什么平台？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T13:02:04.603

我不认为这是可能的。管道呈现面向流的协议，而不是面向数据包的协议。IOW，如果您向管道写入两次，一次使用 250 字节，一次使用 520 字节，则无法确定在一个读取请求中您将从另一端获得多少字节。你可以得到 256、256，然后是其余的。

如果您需要将数据包强加到管道上，则需要自己编写预定（或定界）字节数作为数据包长度，然后写入数据包的其余部分。使用**select()**找出是否有要读取的数据，使用 read() 获得一个合理大小的缓冲区。当您拥有缓冲区时，您有责任确定数据包边界。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T13:02:17.347

如果你想知道它预计到达的数据量，你总是可以在管道发送的每个 msg 的开头写上 msg 的大小。因此，例如在每个 msg 的开头写入 4 个字节以及数据的长度，然后只读取前 4 个字节。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-20T02:05:11.263

正如许多人所回答的那样，您无法便携地告诉要读取多少字节，OTOH您可以做的是轮询管道以获取要读取的数据。首先确保打开管道`O_RDWR|O_NONBLOCK`- POSIX 要求管道必须打开以进行读取和写入以便能够轮询它。

每当您想知道是否有可用数据时，只需选择/轮询要读取的数据。您还可以通过检查写入来了解管道是否已满，但请参阅下面的注释，具体取决于类型或写入可能不准确。

您不会知道有多少数据，但请记住，写入`PIPE_BUF`字节数保证是原子的，因此如果您担心管道上有完整的消息，只需确保它们适合其中或将它们拆分.

**注意：**当您选择写入时，即使 poll/select 说您可以写入管道，如果没有足够的空间进行完整写入，写入`<= PIPE_BUF`也会返回。`EAGAIN`我不知道如何判断是否有足够的空间来写......这就是我正在寻找的东西（我可能会用`\0`'s 来结束填充`PIPE_BUF`......在我的情况下，它只是用于测试）。

我有一个旧的示例应用程序 Perl，它可以在非阻塞模式下读取一个或多个管道[OCP_Daemon](https://github.com/dermoth/misc-code/blob/master/nagios/OCP_Daemon/OCP_daemon)。该代码非常接近您在 C 中使用事件循环执行的操作。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-09-16T21:35:29.487

在 Windows 上，您始终可以使用`PeekNamedPipe`，但我怀疑这就是您想要做的。

# c# - Infragistics.Win.UltraWinGrid.UltraGrid 中的 DataGridView.HitTestInfo 等效项？

> ID：71838
> 
> 赞同：3
> 
> 时间：2008-09-16T12:48:25.213
> 
> 标签：c#, .net, infragistics, ultrawingrid

有谁知道 Infragistics UltraGrid 控件是否提供类似于 DataGridView.HitTestInfo 的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T14:17:29.680

看看[这个](http://www.abstraction-systems.com/ttf/HTML/TTFactory_TaskBasedTutorials_UltraWinGrid.htm)。

他们不转换坐标，但他们使用特殊的 Infragistics 网格事件 ( [MouseEnterElement](http://help.infragistics.com/Help/NetAdvantage/NET/2008.2/CLR2.0/html/Infragistics2.Win.v8.2~Infragistics.Win.UltraComponentControlManagerBase~MouseEnterElement_EV.html) ) 来获取鼠标当前悬停在其上的元素。

也许它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T13:52:57.350

有一个`.MousePosition`属性返回`System.Drawing.Point`和“获取鼠标光标在屏幕坐标中的位置”，但我使用的是旧版本的 UltraWinGrid (2003)。

他们提供[免费试用下载](http://www.infragistics.com/downloads/default.aspx)，因此您可以查看他们是否已将其添加到最新和最棒的 :o)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T14:10:56.183

如果您有 UltraGrid 的 MouseEventHandler，那么您可以执行以下操作：

```
UltraGrid grid = (UltraGrid)sender;

UIElement element = grid.DisplayLayout.UIElement.ElementFromPoint(new Point(e.X, e.Y)); 
```

然后，您可以使用 element.GetContext() 根据其预期类型转换元素：

```
 UltraGridCell cell = (UltraGridCell)element.GetContext(typeof(UltraGridCell)); 
```

# java - 如何从 Swing 应用程序中检测到 PC 正在关闭？

> ID：71842
> 
> 赞同：2
> 
> 时间：2008-09-16T12:48:45.260
> 
> 标签：java, swing, operating-system

表现良好的 Windows 程序需要允许用户在关闭 PC 时保存他们的工作。

如何让我的应用检测到关闭事件？如果用户选择“取消”，任何解决方案都应允许用户中止关机。

正常的 Swing 窗口关闭钩子不起作用，添加关闭钩子也不起作用。

在测试中，不会调用 WindowListener 的方法（windowClosing、windowClosed 等）。

我接受的答案需要使用平台特定代码（JNI 注册 WM_QUERYENDSESSION ）。这不是 Swing 上的错误吗？

见[http://forums.sun.com/thread.jspa?threadID=481807&messageID=2246870](http://forums.sun.com/thread.jspa?threadID=481807&messageID=2246870)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T13:00:55.137

将一些 JNI 代码写入 WM_QUERYENDSESSION 消息。您可以从 MSDN 文档或通过谷歌搜索获得详细信息。

如果您不想为此编写太多 C++ 代码，我可以推荐 JNA 库[单击此处](https://jna.dev.java.net/)。这为您提供了一些不错的 C 代码 Java 抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:57:35.003

[How-do-i-get-my-java-application-to-shutdown-nicely-in-windows](https://stackoverflow.com/questions/61692/how-do-i-get-my-java-application-to-shutdown-nicely-in-windows)

这可能会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:59:05.280

以上似乎是更好的答案。

我找不到任何关于检测窗口关闭事件的好信息。我想最好的方法是检测您的应用程序试图关闭的天气，使用窗口关闭事件等然后提出问题。

[http://www.javalobby.org/java/forums/t17933](http://www.javalobby.org/java/forums/t17933)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T12:59:16.060

在 java 中寻找信号处理。当 Windows 关闭时，它会向应用程序发送一个信号，要求它终止很可能是一个 sigterm

有关此的更多信息，请参见[此处](http://twit88.com/blog/2008/02/06/java-signal-handling/)（我不是该网站的所有者）

# dsl - 如何在 Visual Studio DSL（域特定语言）工具中为装饰器添加显示名称？

> ID：71843
> 
> 赞同：1
> 
> 时间：2008-09-16T12:48:48.520
> 
> 标签：dsl, vsx

在我的 DSL 项目中，我有一个带有许多装饰器的形状，这些装饰器链接到我的域类上的属性。但即使 ieach 装饰器具有 DisplayName 属性（设置为有意义的值），它也不会出现在生成的 DSL 项目中。（我没有忘记使用重新生成 t4 文件。）

我是否必须为每个仅将显示名称作为我希望显示的值的属性创建另一个装饰器，或者是否有其他一些我现在无法弄清楚的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T14:59:28.657

我假设装饰器的显示名称意味着您希望生成的 DSL 中的元素显示为“Example = a_value”，其中 a_value 是实际值，Example 是属性名称。

我过去所做的是创建第二个不可浏览的属性“ExampleDisplay”，它是装饰器实际指向的。然后我将 ExampleDisplay 的 Kind 属性设置为“Calculated”。然后，您需要提供工具包尝试调用的方法来显示您可以执行部分​​类的装饰器。

```
partial class ExampleElement
{
    string GetExampleDisplayValue()
    {
        return "Example : " + this.Example;
    }
} 
```

这并不理想，因为您没有在 DSL 图上设置属性的好方法，您必须使用属性窗口。（属性窗口有时会出现滞后，除非您也挂钩基础属性的更新）。在 GUI 中进行实际 DSL 工具包所做的流畅编辑可能是可能的，但我还没有找到方法。

如果您还没有这样做，可能值得询问[VSX 论坛。](http://social.msdn.microsoft.com/forums/en-US/vsx/threads/)

# testing - 用于 NUnit 的 TAP？

> ID：71848
> 
> 赞同：2
> 
> 时间：2008-09-16T12:49:23.243
> 
> 标签：testing, nunit, tap

任何人都知道在任何地方都有一个 dll/runner 可以从 NUnit 测试套件返回 TAP 输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T13:05:43.330

对我来说似乎不太可能，因为存在阻抗不匹配。TAP 对 NUnit 所谓的测试没有概念，TAP 所谓的测试通常对应于 NUnit 断言，但并不精确。所以我不确定你要找的东西是如何工作的。（但也许启发式方法可以很好地工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:19:02.167

至少，每次 TestFixture 运行的简单通过/失败将允许输出被吸收到其他 TAP 结果中以汇总结果/报告。将xml报告转换成TAP可能就像xslt一样简单

# sql - 如何使用 Sql Server XQuery 搜索不区分大小写的单词？

> ID：71853
> 
> 赞同：2
> 
> 时间：2008-09-16T12:49:45.833
> 
> 标签：sql, sql-server, xquery, contains

我在我的 Sql Server 数据库表中使用 Xml 字段。我正在尝试使用 XQuery **contains**方法搜索一个单词，但它似乎**只**在区分大小写的模式下搜索。lower 方法也没有在 Sql Server XQuery 实现上实现。¿ 这个问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T17:05:11.850

如果您使用的是 SQL Server 2005，恐怕您不走运。

如果您使用的是 SQL Server 2008，则可以像这样使用大写函数：

```
DECLARE @x xml = N'abcDEF!@4';
SELECT @x.value('fn:upper-case(/text()[1])', 'nvarchar(10)'); 
```

这是 MSDN 上大写语法的链接和几个搜索示例：

[http://msdn.microsoft.com/en-us/library/cc645590.aspx](http://msdn.microsoft.com/en-us/library/cc645590.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:57:40.603

从谷歌指向 MSDN 页面的第一个链接*[：](http://www.google.ru/search?complete=1&hl=en&newwindow=1&client=firefox-a&rls=org.mozilla%3Aen-US%3Aofficial&hs=MdF&q=Sql+Server+contains+function+xquery+case-insensitive&btnG=%CF%EE%E8%F1%EA&lr=&aq=f&oq=)*

[包含函数 (XQuery)](http://msdn.microsoft.com/en-us/library/ms178026.aspx)

> 为了获得不区分大小写的比较，可以使用[大写](http://msdn.microsoft.com/en-us/library/cc645590.aspx)或小写函数。

# bash - 删除除 4 个最新目录之外的所有目录

> ID：71864
> 
> 赞同：4
> 
> 时间：2008-09-16T12:52:22.613
> 
> 标签：bash, shell

我想删除父目录中除 4 个最新目录之外的所有目录。你会如何在 Bash 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T12:55:29.923

```
ls -atrd */ | head --lines=-4 | xargs rm -rf 
```

**编辑：**向 ls 添加了 'a' 参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T12:56:27.050

请澄清您的意思是“删除除四个最新目录之外的所有目录”还是“删除除四个最新目录之外的所有目录（文件和目录）”。

另请注意，目录的创建时间是未知的。只能知道目录最后一次修改的时间，即添加、删除或重命名文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T13:05:21.180

您可以执行以下操作：

```
#!/bin/bash

#store the listing of current directory in var
mydir=`ls -t`
it=1

for file in $mydir
    do
        if [ $it -gt 5 ]
        then
            echo file $it will be deleted: $file
            #rm -rf $file
        fi
        it=$((it+1))
    done 
```

（删除 rm 之前的 # 以使其真正发生；））

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:24:35.283

另一种 BSD 安全的方法，使用数组（为什么不呢？）

```
#!/bin/bash
ARRAY=( `ls -td */` )
ELEMENTS=${#ARRAY[@]}
COUNTER=4
while [ $COUNTER -lt $ELEMENTS ]; do
  echo ${ARRAY[${COUNTER}]}
  let COUNTER=COUNTER+1
done 
```

# .net - .NET 框架版本

> ID：71885
> 
> 赞同：3
> 
> 时间：2008-09-16T12:54:52.857
> 
> 标签：.net, installation

我进行了一些搜索，我想知道 .NET 框架是否具有向后兼容性。

真正的问题是，如果有一个使用 .NET Framework 1.1 的程序，我可以安装 3.5 并完成，还是我必须安装 1.1，然后如果使用 3.5，我也必须安装 3.5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T12:56:32.370

不幸的是，您将不得不安装这两个版本。旧版本的框架不会自动与新版本捆绑在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T13:42:20.433

我相信如果你安装了 3.5 框架，你会得到一切回到 2.0 框架。3.5（和 3.0）框架在 2.0 CLR 上运行，因此您真正获得了 2.0 运行时，并在其之上具有 3.0 和 2.5 的额外优点。

您必须单独安装 1.1 框架。

您可以在此处查看已安装的版本：C:\Windows\Microsoft.NET\Framework

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T12:57:01.120

如果您安装的东西需要 3.5，那么您将不得不安装它。不过，.Net 的工作方式是，您可以同时安装 1.1、2.x 和 3.5。程序指定它们需要的框架版本，并为它们加载该版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:01:03.047

尤其是在 .NET 2.0 中，.NET 框架中的许多东西都发生了变化（不仅在语言级别）。您将需要 1.1 版才能运行与该版本链接的程序。

现在，如果您的程序的某些部分使用 .NET 3.5，并且您可以访问所有源代码，我建议您将整个应用程序移植到 .NET 3.5 并完成它。这会让你花更长的时间，但向前迈进是值得的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:56:51.040

许多（也许是大多数）为 .NET 1.1 构建的应用程序将在更高版本的框架上运行。

但是有一些重大更改，因此要确定您为 .NET 1.1 构建的应用程序是否可以在 .NET 2.0 或更高版本上运行的唯一方法是对其进行测试。

Microsoft 记录了 .NET 1.1 和 .NET 2.0 之间已知的重大更改（请参阅[http://blogs.msdn.com/brada/archive/2005/11/14/492561.aspx](http://blogs.msdn.com/brada/archive/2005/11/14/492561.aspx)） - 但此内容的链接似乎是破碎的 ：（

而且我知道至少有一个由于错误而导致的未记录的重大更改。

# embed - 访问隐藏的嵌入式 Quicktime 音频

> ID：71899
> 
> 赞同：1
> 
> 时间：2008-09-16T12:56:42.790
> 
> 标签：embed, quicktime

我正在尝试为网站编写一个简单的音频播放器，并且正在使用 EMBED... 标签嵌入音频并设置 HIDDEN="true" 并使用各种 JavaScript 命令来控制音频播放。它适用于 realplayer 和 mplayer，但如果设置了隐藏位，quicktime 插件不会响应 javascript - 有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T13:22:34.787

首先，我建议你使用`object`标准化的 html 标签，`embed`不是。

`hidden`然后你可以简单地使用 CSS 而不是这个参数来隐藏你的嵌入音频。

更好的是，你应该通过 JavaScript 使用 CSS 隐藏它，因为如果你这样做，没有启用 JavaScript 但支持 CSS 的人可以直接使用插件播放器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T13:18:11.147

我发现设置 height=0 width=0 与 hidden=true 相同并解决了问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-22T06:02:40.087

实际上，Quicktime 插件要求至少显示一个 12px 的平方区域，否则它不会加载，并且 JavaScript API 也不会暴露。区域检测以较短的间隔进行，如果可见区域减少，则立即停止播放。该插件非常擅长确定它是否真的可以看到，你不能用其他元素覆盖它。

# c - 为什么我们要使用额外的表达式？

> ID：71913
> 
> 赞同：1
> 
> 时间：2008-09-16T12:58:07.920
> 
> 标签：c

以下是 Kernighan & Ritchie 的“The C Programming Language”中的一个示例：

```
int getline(char s[], int lim)
{
   int c, i = 0;

   while (--lim > 0; && (c=getchar()) !=EOF && c !='\n')
   {
      s[i++] = c;
   }

   if (c =='\n') 
   {
      s[i++] = c;
   }

   s[i] = '\0';

   return i;
} 
```

为什么我们应该检查 if `c != '\n'`，尽管我们`s[i++] = c`在那之后使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T13:08:00.080

这些函数从标准输入读取字符，直到找到 EOF 或换行符。

第二个检查确保将唯一的换行符放入 char 数组中。EOF 不应出现在正确的 c 字符串中。此外，如果字符不是换行符，则意味着我们可能已经填满了 c 字符串，在这种情况下，我们不应该在其中添加更多字符。

请注意，我们仍然附加 '\0'。我们已经确保在我们的 c 字符串中还有一个字符的空间，因为我们使用前缀减量器，它在比较之前进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T13:02:39.140

比较是为了确保 readline 在遇到换行符（'\n'）时终止。在它执行的迭代中，它在不向字符串添加换行符的情况下终止，因此之后的语句确保字符串始终以换行符终止，即使达到其他终止条件之一也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T13:36:57.130

代码中有一个错误。

如果 s 的大小是 N 字节并且用户键入换行符作为第 (N-1) 个字符，则第 N 个字符将变为 '\n' 并且第 (N+1) 个字符（未分配）将变成'\0'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:00:42.313

您这样做只是为了在新行上退出 while 循环。否则，您将不得不在正文中检查它并使用中断。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T13:02:45.880

这可以确保您在行尾停止，即使它不是输入的结尾。然后，如果有换行符，则将 \n 添加到行尾，并且我再增加一次以避免用 \0 覆盖它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T13:06:44.497

```
int getline(char s[], int lim)
{
   int c, i;
   i=0;
   /* While staying withing limit and there is a char in stdin and it's not new line sign */
   while (--lim > 0; && (c=getchar()) !=EOF && c !='\n')
   /* Store char at the current position in array, advance current pos by one */
      s[i++] = c;
   /* If While loop stopped on new-line, store it in array, advance current pos by one */
   if (c =='\n') 
      s[i++] = c;
   /* finally terminate string with \0 */
   s[i] = '\0';
   return i;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T13:09:50.467

我不确定我是否理解这个问题。`c !='\n'`用于在出现行尾（换行）时停止读取行。否则，即使它之前结束，我们也会一直阅读它直到极限。`s[i++] = c;`如果已到达换行符，则不会出现 while 循环中的第一个。这就是为什么之后进行特殊测试的原因，而另一个测试是`s[i++] = c;`为了防止换行中断了循环。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T13:17:47.920

没有回答你的问题，但我还是会写一些评论：

我不记得所有的 K&R 规则，但是如果 lim 等于 1，您列出的函数将失败。然后您将不会运行使 c 未初始化的循环，但您仍将在 if (c == '\n') 检查中使用该变量。

while (--lm > 0; ...) 也不会通过编译器。去除那个 ';' 它确实如此。

# .net - 如何在 WPF 画布上获取字符串的文本大小？

> ID：71919
> 
> 赞同：2
> 
> 时间：2008-09-16T12:58:55.563
> 
> 标签：.net, wpf

我试图找到一个字符串在 WPF 画布上绘制时所占用的空间/宽度量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T13:08:12.403

我可能已经找到了我自己问题的答案。[FormattedText](http://msdn.microsoft.com/en-us/library/system.windows.media.formattedtext.aspx)类似乎有我所追求的。

# sql - 如何实现类似 Digg 的算法？

> ID：71920
> 
> 赞同：10
> 
> 时间：2008-09-16T12:59:00.897
> 
> 标签：sql, algorithm, recommendation-engine, digg

如何用类似于stackoverflow/digg/reddit的推荐系统来实现一个网站？即，用户提交内容，网站需要根据项目的受欢迎程度来计算某种“热度”。流程如下：

*   用户提交内容
*   其他用户查看内容并对内容进行投票（假设 90% 的用户只查看内容，而 10% 的用户对内容积极投赞成票或反对票）
*   新内容不断提交

如何实现一个算法来计算提交项目的“热度”，最好是实时计算？是否有任何最佳实践或设计模式？

我假设该算法考虑了以下因素：

*   提交项目时
*   每次投票时
*   查看项目的时间

例如，一个获得持续不断的投票的项目会一直保持一定的“热度”，而一个在首次提交时获得大量投票的项目将跳到“热度”列表的顶部，但随后随着投票而下降别进来了

（我使用的是 MySQL+PHP，但我对一般设计模式感兴趣）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T13:05:05.407

您可以使用类似于[Reddit 算法](http://redflavor.com/reddit.cf.algorithm.png)的东西——其基本原理是根据帖子发布的时间和分数计算帖子的值。Reddit 算法的巧妙之处在于，您只需要在帖子分数发生变化时重新计算该值。当您想要显示您的首页时，您只需根据该分数从数据库中获取前 n 个帖子。随着时间的推移，分数自然会增加，因此您无需进行任何特殊处理即可将项目从首页中删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T17:04:36.047

在我自己的网站上，我从单调递增的系列中为每个条目分配一个唯一的整数（较新的帖子获得更高的数字）。每次投赞成票都会将数字加一，每次投反对票会减一（当然，您可以调整这些值）。然后，只需按数字排序即可显示“最热门”条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T17:25:27.960

我开发了一个社交书签网站[Sites Favoritos](http://www.sites-favoritos.com)，并使用了一个复杂的算法：

1.  首先，投票是有限的，一个用户只有有限的票数，票数取决于用户的积分。要获得积分，每个用户都必须添加获得正面投票的链接。
2.  然后，用户可以为每个链接投 -3、-2、-1、1、2 或 3 票。由于投票是有限的，每个用户只会对他们喜欢的链接进行投票。
3.  为了防止用户仅对同一用户的链接进行投票，创建支持组，每次投票添加到链接的点数取决于总票数和对已投票链接所有者的链接的投票之间的比率。如果您总是对相同的用户链接进行投票，您的投票将失去价值。
4.  选票会随着时间而失去价值。
5.  来自没有积分的用户（新用户）的新链接的起始积分为 0。来自老用户的新链接将根据他们的积分获得积分。范围从 +3 到 -infinite。来自负分用户的链接将具有负起点，来自具有正分用户的链接将具有正起点。

当他们的链接被投票时，用户将获得随机积分。正票给正分，负票给负分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-11T14:56:50.657

Paul Graham 写了一篇关于他在[开发 Hacker News](http://www.paulgraham.com/hackernews.html)中学到的东西的文章。重点更多的是他试图吸引/创造的人/互动，而不是算法本身，但仍然值得一读。例如，他讨论了故事从底部冒泡（HN）与爆炸到首页顶部（Digg）时的不同结果。（尽管从我对 HN 的了解来看，故事似乎也在那里爆发了）。

他提供了这样的报价：

> 性能的关键是优雅，而不是各种特殊情况。

根据用于生成 HN 首页的[所谓算法：](http://www.seomoz.org/blog/reddit-stumbleupon-delicious-and-hacker-news-algorithms-exposed)

> (p - 1) / (t + 2)^1.5
> 
> 在哪里
> 
> p =一篇文章的观点和
> 
> t = 文章提交时间

可能是一个很好的起点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T13:46:19.260

我为视频聚合器实现了 Reddit 排名算法的 SQL 版本，如下所示：

```
SELECT id, title
FROM videos
ORDER BY 
    LOG10(ABS(cached_votes_total) + 1) * SIGN(cached_votes_total)   
    + (UNIX_TIMESTAMP(created_at) / 300000) DESC
LIMIT 50 
```

*cached_votes_total* 会在每次投票时由触发器更新。它在我们当前的站点上运行得足够快，但我计划添加一个排名值列并使用与 *cached_votes_total* 列相同的触发器对其进行更新。在优化之后，它对于大多数任何规模的网站都应该足够快。

# c# - Silverlight 中的编程绑定

> ID：71932
> 
> 赞同：7
> 
> 时间：2008-09-16T13:00:10.130
> 
> 标签：c#, .net, silverlight, data-binding

孩子们，我在这里错过了一些东西。这一直在抬头，我不知道这是怎么回事，所以我希望我的家人们能帮上忙。

在 Silverlight 中工作时，当我在我的 c# 代码中创建绑定时，它们在应用程序运行时永远不会停止。我的 xaml 中的声明性绑定似乎没问题，但是当我在 C# 中创建绑定时我做错了。我希望我遗漏了一些非常明显的东西。这是一个典型的绑定被粉碎：

```
TextBlock tb = new TextBlock();
Binding b = new Binding("FontSize");
b.Source = this;
tb.SetBinding(TextBlock.FontSizeProperty, b); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T13:25:29.040

我刚刚尝试了您刚刚发布的确切代码，它运行良好，并进行了一些更改。我认为问题在于您用于 SetBinding 调用的元素不是您要绑定的文本块。它应该是：

```
TextBlock tb = new TextBlock();
Binding b = new Binding("FontSize");
b.Source = this;
tb.SetBinding(TextBlock.FontSizeProperty, b); 
```

确保在“this”上还有一个 double 类型的 FontSize 公共属性。如果“this”是用户控件，我建议重命名该属性，以免隐藏继承的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-02-02T19:13:52.120

至少从 Silverlight 3.1 开始，这不再是问题。无论如何，我无法复制它。

# asp.net - 如何验证文件上传的文件类型？

> ID：71944
> 
> 赞同：36
> 
> 时间：2008-09-16T13:01:15.260
> 
> 标签：asp.net, javascript, validation, file, upload

我正在使用`<input type="file" id="fileUpload" runat="server">`在 ASP.NET 应用程序中上传文件。我想限制上传的文件类型（例如：限制为 .xls 或 .xlsx 文件扩展名）。

JavaScript 或服务器端验证都可以（只要在上传文件之前进行服务器端验证 - 可能上传了一些非常大的文件，因此需要在上传实际文件之前进行任何验证） .

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-16T13:34:40.967

似乎您的选择有限，因为您希望在上传之前进行检查。我认为你会得到的最好的方法是使用 javascript 来验证文件的扩展名。您可以构建有效扩展名的哈希，然后查看正在上传的文件的扩展名是否存在于哈希中。

HTML：

```
<input type="file" name="FILENAME"  size="20" onchange="check_extension(this.value,"upload");"/>
<input type="submit" id="upload" name="upload" value="Attach" disabled="disabled" /> 
```

Javascript：

```
var hash = {
  'xls'  : 1,
  'xlsx' : 1,
};

function check_extension(filename,submitId) {
      var re = /\..+$/;
      var ext = filename.match(re);
      var submitEl = document.getElementById(submitId);
      if (hash[ext]) {
        submitEl.disabled = false;
        return true;
      } else {
        alert("Invalid filename, please select another file");
        submitEl.disabled = true;

        return false;
      }
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2010-07-06T17:59:58.977

使用正则表达式验证器非常简单。

```
<asp:RegularExpressionValidator
id="RegularExpressionValidator1"
runat="server"
ErrorMessage="Only zip file is allowed!"
ValidationExpression ="^.+(.zip|.ZIP)$"
ControlToValidate="FileUpload1"
> </asp:RegularExpressionValidator> 
```

[允许上传的文件类型的客户端验证](http://patelshailesh.com/index.php/client-side-validation-of-file-types-permissible-to-upload)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T13:09:28.733

从 javascript，您应该能够在 onsubmit 处理程序中获取文件名。因此，在您的情况下，您应该执行以下操作：

```
<form onsubmit="if (document.getElementById('fileUpload').value.match(/xls$/) || document.getElementById('fileUpload').value.match(/xlsx$/)) { alert ('Bad file type') ; return false; } else { return true; }">...</form> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-16T14:28:24.550

我同意 Chris 的观点，无论您以何种方式查看扩展名，都不会验证文件的类型。[Telerik 的 radUpload](http://www.telerik.com/products/aspnet-ajax/controls/upload/overview.aspx)可能是您最好的选择，它提供了正在上传的文件的 ContentType 属性，您可以将其与已知的 mime 类型进行比较。您应该检查：

应用程序/vnd.ms-excel，

应用程序/excel，

应用程序/x-msexcel

对于新的 2k7 格式：

应用程序/vnd.openxmlformatsofficedocument.spreadsheetml.sheet

Telerik 以前将 radUpload 作为单独的组件出售，但现在将其封装在控件套件中，这使得它有点贵，但到目前为止它是检查真实类型的最简单方法

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T13:12:56.450

您可以在上传控件上使用正则表达式验证器：

```
 <asp:RegularExpressionValidator id="FileUpLoadValidator" runat="server" ErrorMessage="Upload Excel files only." ValidationExpression="^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))(.xls|.XLS|.xlsx|.XLSX)$" ControlToValidate="fileUpload"> </asp:RegularExpressionValidator> 
```

还有输入标签的accept属性：

```
<input type="file" accept="application/msexcel" id="fileUpload" runat="server"> 
```

但是当我尝试这个（使用FF3和IE7）时并没有取得太大的成功

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T14:03:30.120

正如一些人所提到的，Javascript 是要走的路。请记住，此处的“验证”仅通过文件扩展名进行，它不会验证该文件是否为真正的 Excel 电子表格！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-07-04T11:01:57.210

根据 kd7 建议您检查文件内容类型的回复，这是一个包装方法：

```
private bool FileIsValid(FileUpload fileUpload)
{
    if (!fileUpload.HasFile)
    {
        return false;
    }
    if (fileUpload.PostedFile.ContentType == "application/vnd.ms-excel" ||
        fileUpload.PostedFile.ContentType == "application/excel" ||
        fileUpload.PostedFile.ContentType == "application/x-msexcel" ||
        fileUpload.PostedFile.ContentType == "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" //this is xlsx format
        )
        return true;

    return false;
} 
```

如果要上传的文件是 .xls 或 .xlsx，则返回 true

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-01T11:23:47.210

确保您始终检查服务器端的文件扩展名，以确保没有人可以上传**恶意文件**，例如 .aspx、.asp 等。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T13:06:44.060

好吧-您将无法在回发时在服务器端执行此操作，因为文件将在回发期间提交（上传）。

我认为您可以使用 JavaScript 在客户端上执行此操作。[就个人而言，我使用Telerik 的名为 radUpload 的](http://www.telerik.com/products/aspnet-ajax/controls/upload/overview.aspx)第三方组件。它具有良好的客户端和服务器端 API，并为大文件上传提供进度条。

我确信也有可用的开源解决方案。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T13:18:46.077

我认为有不同的方法可以做到这一点。由于我不熟悉 asp，我只能给你一些提示来检查特定的文件类型：

1）安全的方法：获取有关您希望传递的文件类型的标头的更多信息。解析上传的文件并比较标题

2）快速方法：将文件名分成两部分->文件名和文件结尾。检查文件的结尾并将其与您要允许上传的文件类型进行比较

希望能帮助到你 ：）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T13:41:11.873

避免使用标准的 Asp.Net 控件并使用 Brettle Development 的 NeadUpload 组件：[http](http://www.brettle.com/neatupload)

://www.brettle.com/neatupload 更快，更易于使用，无需担心配置文件中的 maxRequestLength 参数，并且非常易于集成。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-02-18T09:59:16.387

作为替代选项，您能否使用 HTML 文件输入的“接受”属性来定义可接受的 MIME 类型。

定义[在这里](http://www.w3schools.com/jsref/dom_obj_fileupload.asp)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T13:09:08.953

您唯一的选择似乎是客户端验证，因为服务器端意味着文件已经上传。此外，MIME 类型通常由文件扩展名决定。

使用像 jQuery 这样的 JavaScript 框架来重载表单的 onsubmit 事件。然后检查扩展名。这将限制大多数尝试。但是，如果有人将图像更改为扩展 XLS，那么您将遇到问题。

我不知道这是否适合您，但是在使用 Silverlight 或 Flash 之类的东西进行上传时，您有更多的客户端控制。您可以考虑在上传过程中使用其中一种技术。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-10-23T19:37:15.087

正如另一位受访者所说，文件类型可以被欺骗（例如，.exe 重命名为 .pdf），这不会阻止检查 MIME 类型（即，如果重命名为 .exe 将显示“application/pdf”的 MIME。 pdf)。我相信对真实文件类型的检查只能在服务器端进行；此处描述了一种使用 System.IO.BinaryReader 进行检查的简单方法：

[http://forums.asp.net/post/2680667.aspx](http://forums.asp.net/post/2680667.aspx)

和这里的VB版本：

[http://forums.asp.net/post/2681036.aspx](http://forums.asp.net/post/2681036.aspx)

请注意，您需要知道要检查的文件类型的二进制“代码”，但您可以通过实施此解决方案并调试代码来获取它们。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-09T16:58:24.207

客户端验证检查：-

HTML：

```
<asp:FileUpload ID="FileUpload1" runat="server" />
<asp:Button ID="btnUpload" runat="server" Text="Upload" OnClientClick = "return ValidateFile()"  OnClick="btnUpload_Click"  />
<br />
<asp:Label ID="Label1" runat="server" Text="" /> 
```

Javascript：

```
<script type ="text/javascript">

    var validFilesTypes=["bmp","gif","png","jpg","jpeg","doc","xls"];

    function ValidateFile()

    {

      var file = document.getElementById("<%=FileUpload1.ClientID%>");

      var label = document.getElementById("<%=Label1.ClientID%>");

      var path = file.value;

      var ext=path.substring(path.lastIndexOf(".")+1,path.length).toLowerCase();

      var isValidFile = false;

      for (var i=0; i<validFilesTypes.length; i++)    
      {    
        if (ext==validFilesTypes[i])    
        {    
            isValidFile=true;    
            break;    
        }    
      }

      if (!isValidFile)    
      {    
        label.style.color="red";    
        label.innerHTML="Invalid File. Please upload a File with" +    
         " extension:\n\n"+validFilesTypes.join(", ");    
      }    
      return isValidFile;    
     }    
</script> 
```

# nhibernate - 选择 ORM 时，LINQ to SQL 或 LINQ to Entities 是否比 NHibernate 更好？

> ID：71955
> 
> 赞同：7
> 
> 时间：2008-09-16T13:03:05.723
> 
> 标签：nhibernate, linq-to-sql, orm

我发现使用 NHibernate 甚至 Castle 比使用 Linq to Entities 或 linq to SQL 可以做更多的事情。

我疯了吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-16T13:05:34.547

不，你没有疯。nHibernate 是一个完整的 OR 映射器，Linq to SQL 和 Linq to Entities 并没有实现您对 OR 映射器所期望的所有内容，而是针对稍微不同的开发人员群体。

但是不要让它让你离开 linq。Linq 仍然是一个不错的主意.. 尝试使用 Linq 到 nHibernate :-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T13:08:26.723

NHibernate、Castle 等的最大缺点是它们并不完全是轻量级的（尤其是 NHibernate。）

Linq to SQL 适用于轻量级、有限使用的 ORM。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T13:18:20.150

我使用过 NHibernate 和 LINQ to SQL。从我的角度来看，这取决于项目，如果我需要快速的东西，我会选择 L2S，创建 dbml 映射并开始使用它非常简单。如果我正在开发更高级的企业解决方案，我会选择久经考验且值得信赖的 ORM - NHibernate，我发现日志记录和事务功能易于使用。

LINQ to SQL 的学习曲线相对较短，NHibernate 的学习曲线要​​陡峭得多。

LINQ to SQL 仅支持 SQL Server，因此如果您有一个 Oracle 数据库，那么您已经做出了决定 - NHibernate。

我建议查看[http://www.summerofnhibernate.com/](http://www.summerofnhibernate.com/)以获取有关学习 NHibernate 的优秀截屏视频。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T13:15:22.433

要记住的一件事是，NHibernate 可以是一个绝对的配置猪 - 特别是因为它主要基于 XML 配置文件，因为它的根源是原始的 Hibernate。

[Fluent NHibernate](http://code.google.com/p/fluent-nhibernate/)在某种程度上减轻了这种痛苦。

Linq 当然适合 .NET 工作的一般“方式”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-06-10T16:20:47.110

> Blockquote Linq 当然符合 .NET 工作的一般“方式”

哎呀，这种情绪吓到我了。.net 中内置的 RAD 东西不是 dot net 的工作方式，它只是一个用于构建原型的工具集。.NET 允许我们执行完整的 DDD 应用程序，具有高水平的内聚、关注点分离，并允许我们编写解耦代码，尽管 ms 尝试将事物耦合起来。我强烈不同意.net 喜欢耦合，某些工具喜欢耦合，我将在这场战斗中包括 linq to sql。linq to sql 破坏了拥有单独域模型的想法。想到使用我的数据库模式作为底层模型对象，我感到畏缩。适当的 ORM 工具应该允许我们首先对我们的域进行建模，然后将我们的关系数据库链接到这些模型。不是相反。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T13:24:31.257

我没有尝试过实体框架，但我肯定会推荐 NHibernate 而不是 Linq to SQL；我能给出的最大理由就是控制权。Linq to SQL 喜欢对所有内容进行更多控制，加载对象并维护有关对象的各种跟踪信息。如果您序列化/反序列化，跟踪信息可能会丢失，再次保存时可能会发生奇怪的事情。NHibernate 更像是一个存储库应该工作 - 您将任何您想要的对象交给它（当然，您已经将其配置为可以理解），并且无论您使用它做了什么，它都会将它放在数据库中。

# c++ - 一个文件无法识别 C++ 中其他文件的类

> ID：71959
> 
> 赞同：0
> 
> 时间：2008-09-16T13:04:14.347
> 
> 标签：c++, class, header

我在文件“Particles.h”中有自己的类，该类的实现在“Particles.cpp”中

我希望文件“Load.h”能够识别其中的类，所以我添加了这一行

```
#include "Particles.h" 
```

并且该文件无法识别它，并且过去一切正常（我没有在该类中进行任何更改）。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T13:06:33.000

听起来您的包含路径 - 编译器扫描以查找您 #include 的文件的目录列表 - 设置不正确。您使用的是哪个编译器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T13:23:10.887

好吧，如果您列出了错误代码，它可能会有所帮助。在我的脑海中，你在 Particles.h 中有什么东西可以确保该文件只包含一次吗？有两种方法可以做到这一点。第一个是使用#pragma 一次，但我认为这可能是微软特有的。第二种是使用#define。例子：

```
#ifndef PARTICLES_H 
#define PARTICLES_H

class CParticleWrapper
{
...
};

#endif 
```

此外，除非您从 Particles.h 中的类派生或使用类的实例而不是指针，否则您可以使用类的前向声明并跳过将头文件包含在头文件中，这将节省您编译时间。

```
#ifndef LOAD_H
#define LOAD_H

class CParticleWrapper;

class CLoader
{
   CParticleWrapper * m_pParticle;

public:

   CLoader(CParticleWrapper * pParticle);
   ...
};  

#endif 
```

然后，在 Load.cpp 中，您将包含particle.h 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T14:40:57.720

听起来您需要包含 Stone 类的定义，但如果没有更多细节就不可能说出来。您可以通过删除不相关的代码并发布它来缩小错误范围吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:10:02.027

确保文件“Particles.cpp”也包含“Particles.h”，并且这些文件在同一个文件夹中，并且它们都是同一个项目的一部分。如果您还分享您从编译器获得的错误消息，这将有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T13:10:06.207

Dev C++，它使用 GCC，该行是：

```
Stone *stone[48]; 
```

它说：“预期的构造函数、析构函数或在'*'标记之前的类型转换”。

# asp.net - IIS 保留了我生成的文件

> ID：71971
> 
> 赞同：2
> 
> 时间：2008-09-16T13:05:20.740
> 
> 标签：asp.net, iis

我的 Web 应用程序生成 pdf 文件，然后通过电子邮件或传真将它们发送给我们的客户。IIS6 以某种方式保留该文件并阻止任何其他声称旧的“..进程无法访问文件”xxx.pdf，因为它正被另一个进程使用。

当我回收应用程序池时一切正常。有谁知道为什么会发生这种情况，我该如何阻止它。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T13:38:26.917

正如大家所说，在读取/写入 PDF 文件时，请在打开的任何 IO 对象上调用`Close`and方法。`Dispose`

But I suppose you'd incorporated a **3rd party component?** to do the PDF writing for you? If that's the case you might want to check with the vendor and/or its documentation to make sure that you are doing things in the way the vendors intended them to be. Don't trust the black box you got from someone else unless it has proven itself.

Another place to look might be what happens during multiple web request to the PDF files, are you sure that the file is not written simultaneously from multiple places? e.g. 2-3 requests genrating PDF simultaneously? or 2-3 pages along the PDF generation process?

最后，您可能需要检查异常日志以确保没有发生崩溃/线程退出并在您没有​​注意到的情况下保持文件句柄打开。它在多线程场景中经常发生，有时线程只是崩溃并退出 - 这可能会发生，特别是如果您使用 3rd 方组件，它们可能正在执行一些*魔术*，您永远不会知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T13:11:52.410

听起来，文件 - 在创建后 - 仍然被工作进程锁定。确保关闭文件的所有连接。（请记住，使用 using 块会解决这个问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T13:08:50.967

我会查看您的代码并确保打开（生成）文件的所有句柄都已正确关闭。有时你不能依靠垃圾收集器来整理这些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:21:07.520

使用 finally 子句中的正确 .Close() 或通过 C# 的“using”子句检查磁盘上所有写入文件的代码是否正确关闭每个句柄

```
byte[] asciiBytes = getPdf(...);
try{
BinaryWriter bw = new BinaryWriter(File.Create(filename));
bw.Write(pdfBytes);
}
finally {
  if(null != bw)
    bw.Close();
} 
```

使用 Response 和 Content-Disposition 子句发送文件

```
Response.ContentType = "application/pdf";
Response.AppendHeader("Content-disposition", "attachment; filename=" + PDID + ".pdf");
Response.WriteFile(filename);
Response.Flush(); 
```

显示的代码从大约 18 个月开始创建并向客户发送 Pdf 文件，我们从未见过文件被锁定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T13:33:45.370

1.  如前所述：注意关闭所有打开的处理程序。

2.  有时 Microsoft 的索引服务会阻止文件。排除您的目录

# c++ - 数据流编程 - 模式和框架

> ID：71979
> 
> 赞同：16
> 
> 时间：2008-09-16T13:06:07.557
> 
> 标签：c++, design-patterns, dataflow

我刚刚遇到了提议的[Boost::Dataflow](http://web.archive.org/web/20171008232044/http://dancinghacker.com:80/code/dataflow/dataflow/introduction/dataflow.html)库。这似乎是一种有趣的方法，我想知道是否还有其他类似的 C++ 替代框架，以及是否有任何相关的设计模式。我没有排除 Boost::Dataflow，我只是在寻找任何可用的替代方案，以便更好地了解域和我的选择（或者在必要时自行选择）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-04-07T08:38:13.190

**维基百科**

维基百科中有几篇关于数据流编程理论的好文章：

*   [数据流](http://en.wikipedia.org/wiki/Dataflow)
*   [数据流编程](http://en.wikipedia.org/wiki/Dataflow_programming)
*   [基于流的编程](http://en.wikipedia.org/wiki/Flow-based_programming)
*   [演员模型](http://en.wikipedia.org/wiki/Actor_model)
*   [可视化编程](http://en.wikipedia.org/wiki/Visual_programming)

这些文章是由不同的作者写的，所以有一些重叠，并且缺少一些重要的东西，但这是一个很好的起点。

**小操作系统**

这是一个基于数据流原理的开源操作系统。我对此有不好的感觉：他们甚至没有提到“数据流”这个词。无论如何，就是这样，也许[值得研究它](http://www.tinyos.net/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T23:15:08.917

您还可以查看两个主要的开源机器人框架，[ROS](http://ros.org "活性氧")和[Orocos](http://www.orocos.org)。还有[Rock](http://rock-robotics.org)，但它是基于 Orocos 的，所以如果你只是在寻找一个 C++ 组件框架，它是等价的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T12:54:06.340

查看[Intel Threading Building Blocks](http://threadingbuildingblocks.org/)，特别是它的`tbb::flow`命名空间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-10T15:16:35.903

我发现了一些数据流 C++ 库：

*   [cellspp](https://github.com/benkard/cellspp) - 允许使用电子表格评估模型。
*   [DSPatch](http://www.flowbasedprogramming.com)和[Route11](https://github.com/MarcusTomlinson/Route11) - C++ 数据流框架。允许以数据流方式编写程序。看起来很有趣。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T13:52:30.970

if you want this design for image processing or visulization, you can find a good ressource in [itk](http://www.itk.org/). And if you want a gui for this (data/work)flow you can use [devide](http://devidenews.wordpress.com/). My 2cents, Johan

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-06-29T23:56:14.430

只是为了记录，您还可以考虑[gstreamermm ，它是](http://developer.gnome.org/gstreamermm/0.10/)[gstreamer](http://gstreamer.freedesktop.org/)的 C++ 包装器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-06-30T00:27:43.620

[数据流编程](http://en.wikipedia.org/wiki/Dataflow_programming)是潜伏了数十年但从未完全起飞的东西之一……无论如何，对于软件来说；在 VHDL/Verilog 世界中，您会发现自己更容易自然地采用数据流思维方式。但是在软件世界中……不知何故，它似​​乎永远不会扩展到玩具系统之外，也许是因为人们坚持将它与可视化编程结合在一起（我看到 boost 数据流[也走这条路](http://dancinghacker.com/code/dataflow/dataflow/blueprint/examples/fltk_gui.html)）。有些人希望通过数据流编程来解决软件危机，使其更像具有可插拔组件和可互连引脚的硬件设计......*但是坚持下去，硬件设计也真的很难！*（有趣的是，虽然在硬件世界中确实[存在可视化编程系统，但](http://www.cadence.com/rl/Resources/datasheets/virtuoso_vse_fam_ds.pdf)*实际上*没有人*用它们来建造任何大的东西）。*

 *我所知道的使用数据流原理的最有趣、最活跃的现代示例是[PureData](http://en.wikipedia.org/wiki/Puredata)视听编程环境。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-18T17:14:54.083

您可以在这里查看我的数据流实现：http: [//ambient.comp-phys.org](http://ambient.comp-phys.org)

它支持 MPI 和线程，并基于通过运行时对象版本控制系统工作的自定义数据流类型（即环境::向量）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-06-28T20:17:26.880

Visual Studio 并发运行时包含 C++ 中的异步数据流框架。

图像处理数据流示例：http: [//msdn.microsoft.com/en-us/library/ff398050.aspx](http://msdn.microsoft.com/en-us/library/ff398050.aspx)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-20T23:10:26.190

也许 Pure Data (pd) 有一个 C++ API ......

[http://en.wikipedia.org/wiki/Pure_Data](http://en.wikipedia.org/wiki/Pure_Data)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-09-03T22:23:04.877

如果您的领域是声音生成/处理，请使用[http://www.synthedit.com/](http://www.synthedit.com/)

它看起来很有希望，我在 SDK 文档（复音）中找到了一个很好的解决方案。有趣，但他们没有提到*dataflow*这个词。

# c++ - 如何有效地将 BSTR 复制到 wchar_t[]？

> ID：71980
> 
> 赞同：6
> 
> 时间：2008-09-16T13:06:09.197
> 
> 标签：c++, com, wchar-t, bstr

我有一个 BSTR 对象，我想将其转换为复制到 wchar__t 对象。棘手的是 BSTR 对象的长度可能从几千字节到几百千字节不等。有没有一种有效的方法来复制数据？我知道我可以只声明一个 wchar_t 数组并始终分配它需要保存的最大可能数据。然而，这意味着为可能只需要几千字节的东西分配数百千字节的数据。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T15:59:55.610

First, you might not actually have to do anything at all, if all you need to do is read the contents. A BSTR type is a pointer to a null-terminated wchar_t array already. In fact, if you check the headers, you will find that BSTR is essentially defined as:

```
typedef BSTR wchar_t*; 
```

So, the compiler can't distinguish between them, even though they have different semantics.

There is are two important caveat.

1.  ~~BSTRs are supposed to be immutable. You should never change the contents of a BSTR after it has been initialized. If you "change it", you have to create a new one assign the new pointer and release the old one (if you own it).~~
    *[**UPDATE**: this is not true; sorry! You can modify BSTRs in place; I very rarely have had the need.]*

2.  BSTRs are allowed to contain embedded null characters, whereas traditional C/C++ strings are not.

If you have a fair amount of control of the source of the BSTR, and can guarantee that the BSTR does not have embedded NULLs, you can read from the BSTR as if it was a wchar_t and use conventional string methods (wcscpy, etc) to access it. If not, your life gets harder. You will have to always manipulate your data as either more BSTRs, or as a dynamically-allocated array of wchar_t. Most string-related functions will not work correctly.

Let's assume you control your data, or don't worry about NULLs. Let's assume also that you really need to make a copy and can't just read the existing BSTR directly. In that case, you can do something like this:

```
UINT length = SysStringLen(myBstr);        // Ask COM for the size of the BSTR
wchar_t *myString = new wchar_t[lenght+1]; // Note: SysStringLen doesn't 
                                           // include the space needed for the NULL

wcscpy(myString, myBstr);                  // Or your favorite safer string function

// ...

delete myString; // Done 
```

If you are using class wrappers for your BSTR, the wrapper should have a way to call SysStringLen() for you. For example:

```
CComBString    use .Length();
_bstr_t        use .length(); 
```

**UPDATE**: This is a good article on the subject by someone far more knowledgeable than me:
["Eric [Lippert]'s Complete Guide To BSTR Semantics"](http://blogs.msdn.com/ericlippert/archive/2003/09/12/52976.aspx)

**UPDATE**: Replaced strcpy() with wcscpy() in example

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T13:10:07.407

BSTR 对象包含一个长度前缀，因此找出长度很便宜。找出长度，分配一个足够大的新数组来保存结果，处理它，并记住在完成后释放它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T14:16:21.490

永远不需要转换。`BSTR`指针指向字符串的第一个字符，它以空值结尾。长度存储在内存中第一个字符之前。`BSTR`s 始终是 Unicode (UTF-16/UCS-2)。曾经有一个称为“ANSI BSTR”的东西——在遗留 API 中有一些引用——但在当前的开发中你可以忽略这些。

这意味着您可以将 a`BSTR`安全地传递给任何期望 a 的函数`wchar_t`。

在 Visual Studio 2008 中，您可能会遇到编译器错误，因为`BSTR`它被定义为指向 的指针`unsigned short`，而`wchar_t`它是本机类型。您可以强制转换或关闭`wchar_t`对`/Zc:wchar_t`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T14:25:07.150

要记住的一件事是，`BSTR`字符串可以并且经常包含嵌入的空值。null 并不意味着字符串的结尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T13:12:59.273

使用 ATL 和 CStringT 然后你可以只使用赋值运算符。或者您可以使用USES_CONVERSION 宏，这些宏使用堆分配，因此您可以确保不会泄漏内存。

# emacs - Emacs 相当于 Vim 的 yy10p？

> ID：71985
> 
> 赞同：22
> 
> 时间：2008-09-16T13:06:39.053
> 
> 标签：emacs, editor, shortcuts

如何在 Emacs 中轻松复制一行 10 次？我找不到复制行快捷方式或功能。我可以使用 C-aC-spcC-eM-w 费力地复制该行，但是我怎样才能将其粘贴多次？

在我去编写自己的函数之前的任何想法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-16T13:13:53.327

您可以为此使用键盘宏：-

Ca Ck Cx ( Cy Cj Cx ) Cu 9 Cx e

**解释：-**

*   Ca : 转到行首
*   Ck : 杀戮线
*   Cx ( : 开始录制键盘宏
*   Cy : Yank 杀线
*   Cj : 移动到下一行
*   Cx ) : 停止录制键盘宏
*   Cu 9 : 重复 9 次
*   Cx e : 执行键盘宏

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-16T13:30:57.700

**复制**：

如果您经常使用线条，您可能希望在未选择任何区域时使复制 ( `kill-ring-save`) 和剪切 ( ) 在线条上工作：`kill-region`

```
(defadvice kill-ring-save (before slickcopy activate compile)
  "When called interactively with no active region, copy a single line instead."
  (interactive
   (if mark-active (list (region-beginning) (region-end))
     (list (line-beginning-position)
           (line-beginning-position 2)))))
(defadvice kill-region (before slickcut activate compile)
  "When called interactively with no active region, kill a single line instead."
  (interactive
   (if mark-active (list (region-beginning) (region-end))
     (list (line-beginning-position)
           (line-beginning-position 2))))) 
```

然后，您可以仅使用 Mw 复制该行。

**粘贴**：

通常一个前缀参数只是多次执行一个动作，所以你希望 Cu 10 Cy 可以工作，但在这种情况下，Cy 使用它的参数来表示要“拉”（粘贴）的 kill-ring 的哪个元素。我能想到的唯一解决方案是 kronoz 所说的：用 Cx ( Cy Cx ) 记录一个宏，然后让 Cu 的参数`kmacro-end-and-call-macro`改为 ( 那是 Cu 9 Cx e 甚至只是 C-9 Cx e 或 M-9 Cx e)。

**另一种方式**：您也可以留在`M-x viper-mode`并使用 yy10p :)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-16T14:02:53.957

您可能知道这一点，但对于**许多**命令，“Cu 10”前缀就可以解决问题。不幸的是，对于 Cy yank 命令，“Cu”被重新定义为“返回杀伤环中的那么多物品，然后猛拉该物品”。

我认为您可能可以将复制注册和插入注册命令与 Cu 前缀命令一起使用，但显然这也不起作用。

Cx z，“重复上一个命令”似乎对 Cu 免疫。

另一个想法是使用 M-: 来获得 Eval 提示并输入一些省略号。我认为像 (dotimes '10 'yank) 这样的东西可能会这样做，但似乎没有。

所以看起来在宏上使用 Cu 可能确实是你能做的最好的事情，而不是编写自己的小函数。

如果我投票，我会投票给 kronoz 答案。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-10-14T17:57:43.727

在此示例中，您不需要同时使用 Cx ) 和 Cx e 。

您可以直接将重复参数提供给 Cx ）。这将停止录制并在一个步骤中重复宏。或者您可以跳过 Cx ) 并直接转到 Cx e，因为 Cx e 将在重复之前结束录制。

选择哪种方式取决于您喜欢重复计数的工作方式。对于 Cx ）你说你总共想要多少次重复（在这种情况下是 10 次）。对于 Cx e，您需要说明还剩下多少重复（即 9）。

* * *

Ca Ck Ck 也会杀死尾随的换行符，所以你以后不必自己放回去。它比使用标记更快，并且不需要您更改任何变量。

更好的是（除非您在终端中），您可以使用 CS-Backspace* 来杀死整条线路，无论您在其中的哪个位置。

[* 如果您使用的是 X windows，请确保键入 shift（**而不是**alt），否则您可能会终止会话！]

说到终端，如果您发现无法键入 C-9，M-9 是一个不错的选择。

* * *

在 Emacs 22 及更高版本中，默认情况下 F3 启动一个宏， F4 结束/重复一个宏。您只需按 F3 开始录制，完成后按 F4，然后再次按 F4 重复宏。（F4 也接受一个参数。）

* * *

把这些放在一起，得到当前行的 10 个副本：

*   CS-Backspace : 杀死这一行
*   F3 : 启动宏
*   Cy：拉线
*   C-1 C-0 F4 : 做 10 次猛拉

不如 yy 10 p 短，但非常接近。:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T15:37:06.493

这是我从 Emacs 的 OS/2 端口获取的功能。（是的，我使用 Emacs 已经有一段时间了。）

```
;; Author: Eberhard Mattes <mattes@azu.informatik.uni-stuttgart.de>
(defun emx-dup-line (arg)
  "Duplicate current line.
Set mark to the beginning of the new line.
With argument, do this that many times."
  (interactive "*p")
  (setq last-command 'identity) ; Don't append to kill ring
  (let ((s (point)))
    (beginning-of-line)
    (let ((b (point)))
      (forward-line)
      (if (not (eq (preceding-char) ?\n)) (insert ?\n))
      (copy-region-as-kill b (point))
    (while (> arg 0)
      (yank)
      (setq arg (1- arg)))
    (goto-char s)))) 
```

我已经绑定到 F9 d：

```
(global-set-key [f9 ?d]    'emx-dup-line) 
```

然后我会用 Cu 10 F9 d 复制一条线10次。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T13:32:40.787

我知道重复任意命令的唯一方法是使用键盘宏的“按参数重复”功能。

Ca C-space down Mw Cx ( Cy Cx ) C-9 Cx e

*   Ca : 转到行首
*   C-space : 设置标记
*   down : 转到下一行的开头
*   Mw : 复制区域
*   Cx ( : 启动键盘宏
*   Cy : Yank 复制的行
*   Cx ) : 结束键盘宏
*   C-9 Cx e ：执行键盘宏九次。

与vim相比，这有点弱。但这仅仅是因为 vim 在这类事情上的效率惊人。

如果您真的很喜欢模态 vi 类交互，您可以使用 vi 仿真模式之一，例如 viper 模式。检查在线 emacs 手册的“仿真”部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T13:08:53.213

你会想要杀死这条线：Ca Ck，然后是 Cy 或？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T13:26:45.620

我不知道直接等效（Cy 10 次是我所知道的最好的），但您可能对 Viper 感兴趣，它是 emacs 的 vi 仿真包。它是标准 emacs 发行版的一部分。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-10-29T02:40:15.203

根据 Baxissimo 的回答，我取消了这个：

```
(defun yank-n-times (arg)
  "yank prefix-arg number of times. Not safe in any way."
  (interactive "*p")
  (dotimes 'arg (yank))) 
```

将其设置为某个键，使用前缀参数调用它，然后就可以了。

**编辑**（还修改了上面的交互调用，使其不那么糟糕）

或者，这是一个可以替代 yank-pop 的版本：

```
(defun yank-n-times (&optional arg)
  "yank prefix-arg number of times. Call yank-pop if last command was yank."
  (interactive "*p")
  (if (or (string= last-command "yank")
      (string= last-command "yank-pop"))
      (yank-pop arg)
    (if (> arg 1)
    (dotimes 'arg (yank))
      (message "Previous arg was not a yank, and called without a prefix.")))) 
```

该消息是一种谎言，但无论如何你都不应该在没有大于 1 的前缀的情况下调用它，所以。

不确定这是否是一个好主意，但我用这个替换了我的，我会看看情况如何。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-09-16T18:26:10.173

你得到 Ck 行，你用 Cu 10 使下一个命令发生十次，然后你用 Cy 粘贴该行。很简单。

如果你总是想让 Ck 做整行，你可以设置 kill-whole-line 为 t。不再摆弄 Ca 或 Ce。

你可以用花哨的杀戮环、寄存器和宏做很多事情，我鼓励你学习它们，但拉线十次并不一定很难或很奇怪。

# unit-testing - 如何运行用 Guile 编写的 TAP::Harness 测试？

> ID：71989
> 
> 赞同：1
> 
> 时间：2008-09-16T13:06:46.010
> 
> 标签：unit-testing, guile

通常的做法

```
测试：
    $(PERL) "-MExtUtils::Command::MM" "-e" "test_harness($(TEST_VERBOSE), '$(INCDIRS)')" $(TEST_FILES)
```

无法运行 Guile 脚本，因为它向 Guile 传递了额外的参数“-w”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T13:33:10.720

一种可能的方法是按如下方式设置您的项目。

你的目录结构如下：

```
./project 你的项目文件
./project/t/*.t 你的单元测试脚本
./project/t/scripts/* 单元测试使用的辅助脚本
```

您的*./project/Makefile*包含以下内容：

```
PERL = /usr/bin/perl
TEST_LIBDIRS = ./lib
RUN_GUILE_TESTS = ./t/scripts/RunGuileTests.pl
TEST_FILES = ./t/*.t

测试：
    $(PERL) -I$(TEST_LIBDIRS) $(RUN_GUILE_TESTS) $(TEST_FILES)
```

您的*./project/t/scripts/RunGuileTests.pl*内容是：

```
#!/usr/bin/perl -w
# 运行 Guile 测试 - 文件名作为脚本的参数给出。

使用 TAP::Harness；
我的@tests = @ARGV;
我的 %args = (
    冗长=> 0，
    计时器 => 1，
    show_count => 1,
    exec => ['/usr/bin/guile', '-s'],
    );
我的 $harness = TAP::Harness->new( \%args );
        $harness->runtests(@tests);

# RunGuileTests.pl 结束
```

您的 Guile 测试脚本应以：

```
#!/usr/bin/guile -s
!#
; 您的测试说明
```*``****