# StackOverflow 问答 10243000-10243999

# eclipse - Eclipse RCP MessageBox.open 在 Ubuntu 11.10 上不起作用

> ID：10243006
> 
> 赞同：0
> 
> 时间：2012-04-20T08:49:03.600
> 
> 标签：eclipse, ubuntu, gtk, eclipse-rcp, messagebox

正如标题所说，当我调用实例的方法`open`时，什么也没有发生。`MessageBox`这是代码：

```
Shell dialog = new Shell(SWT.TITLE | SWT.BORDER | SWT.APPLICATION_MODAL | SWT.ON_TOP);
shell.open(); 
```

在此对话框中，一些操作让我打开此消息框：

```
MessageBox box = new MessageBox(dialog, SWT.ICON_WARNING | SWT.OK);
box.setText("Warning");
box.setMessage(label);
box.open(); 
```

我在带有 Unity (Ubuntu2D) 和 Compiz 0.9.6 以及 OpenJDK 1.7.0_147 的 Ubuntu 11.10 上为 RCP 和 RAP 开发人员使用 Eclipse Indigo 3.7.2。[这里](https://superuser.com/questions/67643)和[这里](http://mou.me.uk/2009/10/31/fixing-eclipse-in-ubuntu-9-10-karmic-koala/)有一些解决这个问题的技巧，（通过设置环境变量来修复`GDK_NATIVE_WINDOWS`），但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:00:28.697

也许您可以包含更多关于您的运行配置和您使用的语言的信息，尽管我假设 java.... 此外，您不必费心加载整个代码，只加载一个片段。如果代码相对较短，500 行或更少，请将其发布在键盘或其他东西上。

但是，如果这是一个 java 项目，那么这就是您现在显示消息框的方式。在这里寻找： http: [//docs.oracle.com/javase/tutorial/uiswing/components/dialog.html](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:45:22.453

好的，我解决了。由于某些原因，在 Linux 下，消息框绘制*在*使用标志创建的组件下方`SWT.ON_TOP`（在 Windows 下，消息框*始终*位于任何组件上方）。我刚刚`SWT.ON_TOP`从父对话框中删除了，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T05:29:19.103

使用新的标准消息对话框

```
org.eclipse.jface.dialogs.MessageDialog 
```

```
MessageDialog.openConfirm(shell, "Confirm", "Please confirm");
MessageDialog.openError(shell, "Error", "Error occured");
MessageDialog.openInformation(shell, "Info", "Info for you");
MessageDialog.openQuestion(shell, "Question", "Really, really?");
MessageDialog.openWarning(shell, "Warning", "I warn you"); 
```

# c++ - 将 Uint8 转换为 unsigned char RGB 值

> ID：10243009
> 
> 赞同：0
> 
> 时间：2012-04-20T08:49:10.073
> 
> 标签：c++, sdl, rgb, uint32

我已经在下面回答了我的问题。感谢 gavinb 的帮助。

问题：我试图复制纹理只是为了学习体验。我正在使用 24 位 TGA 图像，并且正在使用 SDL 加载它。我已经创建了自己的结构

```
struct Colour24
{
    unsigned char r;
    unsigned char g;
    unsigned char b;
}

unsigned char* texture = new unsigned char[width * height * 3];

    for (int y = 0; y < height; y++)
    {
        for (int x = 0; x < width; x++)
        {
            int index = (y * width) + x;

            Colour24 colour = getColourAt(x, y);

            newTexture[index] = colour.r;
            newTexture[index + 1] = colour.g;
            newTexture[index + 2] = colour.b;
        }
    }

Colour24 getColour(int x, int y)
{
    Uint32 pixel;
    Uint8 red, green, blue;
    Colour24 rgb;

    pixel = getPixel(m_surface, x, y);  // using the SDL get pixel function

    SDL_GetRGB(pixel, m_surface->format, &red, &green, &blue);

    rgb.r = red;
    rgb.b = blue;
    rgb.g = green;

    return rgb;
} 
```

OLD：我打算将它发送到 OpenGL 纹理中，当我直接发送表面-> 像素时它确实有效。但我想自己创建数据数组。非常感谢您的帮助！

编辑：对不起，我没有很好地解释自己。我正在尝试从包含 24 位 TGA 图像的 SDL_Surface 手动重新创建纹理，然后将其交给 opengl 以创建纹理。我用表面->像素测试了我的opengl代码，它工作正常。我只是想弄清楚我在哪里出错了加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:49:33.250

除非您使用一些令人难以置信的深奥体系结构，否则`unsigned char`几乎可以肯定它等同于。`uint8_t`

但是代码中存在一些问题，尽管尚不清楚您正在尝试做什么或问题是什么。

首先，您在调用 getColourAt() 时已转置了 x,y 坐标。您正在使用 i 来索引高度和 j 来索引宽度，因此您应该使用 j,i ：

```
Colour24 colour = getColourAt(j, i); 
```

也许坚持使用 x,y 命名会更简单。

其次，纹理缓冲区的索引是错误的。它应该是：

```
texture[i*width+j+0] = colour.red;
texture[i*width+j+1] = colour.green;
texture[i*width+j+2] = colour.blue; 
```

因为您将拥有`i`完整的`width`字节行，以及`j`不完整行上的字节。

此外，您在`SDL_GetRGB`调用中缺少像素格式，因此甚至无法编译。

最后，您的 getColour() 函数将无法正常工作；它将始终返回 0,0 处的像素值，因为您没有将 x,y 偏移到图像中。为此，您可以使用与上述相同的技术。请注意您的索引，就好像您使用带有 SDL 的 UInt32 暗示 RGBA（32 位）像素格式，但您使用的是 RGB（24 位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:29:51.977

最后编写了我自己的 TGA 加载器，然后发现我需要将高度乘以每个像素的字节数。仍然不是 100% 确定原因（请随时发表评论），但它现在有效。

代码：

```
TGAReader* reader = new TGAReader();
reader->readSurface("MyTexture.tga");

int height = reader->height;
int width = reader->width;
int bpp = reader->bpp;

unsigned char* texture = new unsigned char[width * height * bpp];

for (int y = 0; y < height * bpp; y++)
{
    for (int x = 0; x < width; x += 3)
    {
        int index = (y * width) + x;

        Colour24 colour = reader->getColourAt(x, y);

        newTexture[index] = colour.r;
        newTexture[index + 1] = colour.g;
        newTexture[index + 2] = colour.b;
    }
}
// create OpenGL texture
unsigned int = createTextureFromData(newTexture, width, height, bpp);

// reading tga data
Colour24 TGAReader::getColourAt(int x, int y)
{
    Colour24 rgb;

    rgb.r = m_data[((y * width) + x)];
    rgb.g = m_data[((y * width) + x) + 1];
    rgb.b = m_data[((y * width) + x) + 2];

    return rgb;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:44:04.593

的大小`Uint8`取决于它的声明。另一方面，`unsigned char`尽管在许多平台上它是 8 位，但在 C++ 标准中也没有将其大小指定为精确的 8 位。

最好`Uint8`直接在你的中使用，`Colour24`以避免转换错误。

# c# - .XLSX 文件不是使用超过 8K 记录的工作表生成的

> ID：10243012
> 
> 赞同：0
> 
> 时间：2012-04-20T08:49:36.687
> 
> 标签：c#, excel, oledb, excel-interop

我正在使用 Excel 2007 和 OLE-DB 提供程序来生成 .xlsx 文件。这些文件有 2 张，第 1 张包含图表，第 2 张包含数据。

我正在使用以下连接字符串来生成 excel：

```
using (OleDbConnection conn = new OleDbConnection ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Test.xlsx;Extended  Properties=\"Excel 12.0 XML;HDR=Yes;IMEX=0\"")) 
```

使用 Excel-Interop 生成图表，然后关闭工作簿。随后将启动一个新的工作流程，该工作流程打开同一个 Excel 文件并插入数据。

守则是这样的。

```
using (OleDbConnection conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strFilename + ";Extended Properties=\"Excel 12.0 XML;HDR=Yes;IMEX=0\""))
            {
                clsCommon.LogMessages("Excel Connection opening");
                conn.Open();
                clsCommon.LogMessages("Connection opened.");

                using (OleDbCommand cmd_createTable = new OleDbCommand("CREATE TABLE [" + SheetName + "](" + sb.ToString() + ")", conn))
                {
                    cmd_createTable.ExecuteNonQuery();
                    //cmd_createTable.CommandTimeout = 14000;
                }

                clsCommon.LogMessages("Excel Sheet Created.");

                //write the data
                List<string> lstRowData = new List<string>();
                string rowdata = string.Empty;

                foreach (DataRow row in dt.Rows)
                {
                    for (int i = 0; i < dt.Columns.Count; i++)
                    {
                        if (row[i].ToString().Contains("'"))
                        {
                            rowdata = rowdata + "'" + row[i].ToString().Replace("'", "''") + "',";
                        }
                        else
                        {
                            rowdata = rowdata + "'" + row[i].ToString() + "',";
                        }
                    }
                    rowdata = rowdata.Remove(rowdata.Length - 1, 1);
                    lstRowData.Add(rowdata);
                    rowdata = string.Empty;
                }

                #region Creating Single Command to execute multiple statements.
                using (OleDbCommand cmd_Insert = new OleDbCommand())
                {
                    clsCommon.LogMessages("Data Rows for Sheet:" + SheetName + ", is: " + lstRowData.Count.ToString());                                                
                    cmd_Insert.Connection = conn;
                    cmd_Insert.CommandTimeout = 14000;

                    foreach (string item in lstRowData)
                    {
                        cmd_Insert.CommandText = "Insert into [" + SheetName + "$] values(" + item + ")";
                        cmd_Insert.ExecuteNonQuery();
                    }                        
                    cmd_Insert.Dispose();
                }
                #endregion

                conn.Close();
                conn.Dispose(); 
            } 
```

问题是，在数据量较小的工作表中正确生成了 excel。

对于数据超过8k（大约）的工作表，上面的代码行正在正确地将数据写入excel，但是当文件缓冲到网页时，不存在具有大量记录的数据表。

文件缓存到网页的代码如下：

```
 Response.Clear();
   Response.ClearContent();
   Response.ClearHeaders();
   Response.BufferOutput = true;
   Response.ContentType = "application/vnd.ms-excel";
   Response.AppendHeader("Content-Disposition", string.Format("attachment; filename={0}", Path.GetFileName(newFilePath)));
   Response.WriteFile(newFilePath);
   if (Response.IsClientConnected)
   {
   Response.Flush();
   }
   try
   {
   Response.Close();
   HttpContext.Current.ApplicationInstance.CompleteRequest();
   }
   catch
   {
   // Eat Exception
   } 
```

**奇怪的事实：**

相同的代码在我的本地开发环境中运行良好，并且所有工作表都已正确填充。我的机器和服务器上也安装了 Excel 2007。我已经使用 DCOM 配置管理器（在组件服务下）检查了服务器上的权限，它们看起来是正确的。

**尝试过的解决方法**

*   1) 更改了连接字符串

从

> ## 扩展属性=\"Excel 12.0 XML；HDR=是；IMEX=0\""))
> 
> 至
> 
> ## 扩展属性=\"Excel 12.0 ;HDR=Yes;IMEX=0\""))
> 
> 没有运气。

* * *

你能帮我解决这个问题吗？我是否需要更改服务器上 Excel 2007 的某些设置才能启用大数据导出。

感谢您的快速帮助

——沙拉布·古普塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:53:20.160

**重要提示**：[MS 在服务器场景（如 ASP.NET 或类似）中](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)[**不支持**](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)[互操作（用于代码中的第一个工作表](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)**） 。**

 **有许多选项可以在没有 Interop 的情况下读取/编辑/创建 Excel 文件：

MS 提供免费的 OpenXML SDK V 2.0 - 请参阅[http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)（仅限 XLSX）

这可以读写 MS Office 文件（包括 Excel）。

另一个免费选项参见[http://www.codeproject.com/KB/office/OpenXML.aspx](http://www.codeproject.com/KB/office/OpenXML.aspx)（仅限 XLSX）

如果您需要更多处理旧 Excel 版本（如 XLS，不仅是 XLSX）、渲染、创建 PDF、公式等，那么有不同的免费和商业库，如[ClosedXML](http://closedxml.codeplex.com/)（免费，仅限 XLSX）、[EPPlus](http://epplus.codeplex.com/)（免费，仅限 XLSX） , [Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx) , [SpreadsheetGear](http://www.spreadsheetgear.com/) , [LibXL](http://www.libxl.com/)和[Flexcel](http://www.tmssoftware.com/site/flexcelnet.asp)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T06:34:31.593

对于超过 6k 条记录，我面临同样的问题，

更改`.xlsx`为`.xls`对我有用。**

# jquery - 如何创建一个弹出 div 弹出时不会一直滚动到顶部？

> ID：10243014
> 
> 赞同：0
> 
> 时间：2012-04-20T08:49:46.813
> 
> 标签：jquery, html, css

这是代码

```
 <html>
        <head>
            <style>
                #container {
                    border: 1px solid black;
                    width: 100px;
                    height: 20px;
                    margin: 0 auto;
                    text-align: center;
                }

                #fade {
                    display: none;
                    background: black;
                    opacity:0.4;
                    filter:alpha(opacity=50);
                    z-index: 1;
                    position: fixed; left: 0; top: 0;
                    width: 100%; height: 100%;
                }

                #window {
                    width: 200px;
                    height: 50px;
                    background: white;
                    position:absolute;
                    left:40%;
                    top:40%;
                    z-index: 2;
                    text-align: center;
                }
            </style>
            <script type="text/javascript" src='/libs/jquery/jquery.js'></script>
            <script>
                $(document).ready( function() {
                    $('#view').click( function() {
                        $('#fade').fadeIn();

                        var addWindow = "<div id='window'><h3>This is a popup window.</h3></div>"
                        $(addWindow).appendTo('body');
                    });

                    $('#fade').click( function() {
                        $('#fade, #window').fadeOut();
                    });
                });
            </script>
        </head>

        <body>
            <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
            <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
            <div id="container">
                <a href="#" id="view">
                    View window
                </a>
            </div>
            <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
            <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
            <div id="fade"></div>
        </body>
    </html> 
```

放了很长的<br>之后有一个链接，我是故意的，就是说我的页面挤满了不同的对象，我的链接在页面的中间。这里发生的是，当您单击“查看窗口”时，会出现一个 div / 窗口，但我的窗口始终出现在页面顶部。它会一直向上滚动，然后我的窗口就会出现。我希望我的窗口出现在我单击“查看窗口”链接的同一位置，而无需一直滚动到顶部。是否可以？我认为这只是css的问题，请帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:56:37.527

在我看来有两个问题：

1.  单击链接将带您到页面顶部
2.  弹出位置设置取自它的容器

1很简单，防止触发默认点击事件

2 您可以通过在单击时动态设置顶部值来修复，以便弹出窗口根据屏幕定位。或者您可以改用固定位置。

我在这里设置了一个示例：http: [//jsfiddle.net/A2YjS/](http://jsfiddle.net/A2YjS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:09:00.690

将您的代码更改为以下代码

```
 #window {
                width: 200px;
                height: 50px;
                background: white;
                position:absolute;
                left:40%;
                z-index: 2;
                text-align: center;
            }

        <script>
            $(document).ready( function() {
                $('#view').click( function() {
                    $('#fade').fadeIn();

                    var addWindow = "<div id='window'><h3>This is a popup window.</h3></div>"
                    $(addWindow).appendTo('body');

                    $('#window').css("top", ($('#view').offset().top) + "px");
                });

                $('#fade').click( function() {
                    $('#fade').fadeOut();
                    $('#window').remove();
                });
            });
        </script>

        <div id="container">
            <div id="view">
                View window
            </div>
        </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:17:17.620

是的，你必须做类似 sp00m 所写的事情。

就这样你知道，

top 和 left 应该是 50%，margin left 和 margin top 应该分别是宽度和高度的一半。这用于将弹出 div 准确地居中到中心。

# android - Android ContentProvider URI 方案以通知 CursorAdapters 侦听 OUTER JOIN 查询

> ID：10243017
> 
> 赞同：11
> 
> 时间：2012-04-20T08:49:56.780
> 
> 标签：android, sqlite, join, android-contentprovider, android-cursor

我有一个`ContentProvider`允许对`LEFT OUTER JOIN`SQLite 数据库进行查询的 Android。

假设在数据库中我有 3 个表`Users`，`Articles`和`Comments`。`ContentProvider`类似于以下内容：

```
public class SampleContentProvider extends ContentProvider {
    private static final UriMatcher sUriMatcher;
    public static final String AUTHORITY = "com.sample.contentprovider";
    private static final int USERS_TABLE = 1;
    private static final int USERS_TABLE_ID = 2;
    private static final int ARTICLES_TABLE = 3;
    private static final int ARTICLES_TABLE_ID = 4;
    private static final int COMMENTS_TABLE = 5;
    private static final int COMMENTS_TABLE_ID = 6;
    private static final int ARTICLES_USERS_JOIN_TABLE = 7;
    private static final int COMMENTS_USERS_JOIN_TABLE = 8;

    // [...] other ContentProvider methods

    @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
        String table = getTableName(uri);

        // SQLiteWrapper is a wrapper class to manage a SQLiteHelper
        Cursor c = SQLiteWrapper.get(getContext()).getHelper().getReadableDatabase()
                .query(table, projection, selection, selectionArgs, null, null, sortOrder);

        c.setNotificationUri(getContext().getContentResolver(), uri);
        return c;
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {
        String table = getTableName(uri);

        // SQLiteWrapper is a wrapper class to manage a SQLiteHelper
        long id = SQLiteWrapper.get(getContext()).getHelper().getWritableDatabase()
                .insert(table, null, values);

        Uri itemUri = ContentUris.withAppendedId(uri, id);
        getContext().getContentResolver().notifyChange(itemUri, null);

        return itemUri;
    }

    private String getTableName(Uri uri) {
        switch (sUriMatcher.match(uri)) {
        case USERS_TABLE:
        case USERS_TABLE_ID:
            return "Users";

        case ARTICLES_TABLE:
        case ARTICLES_TABLE_ID:
            return "Articles";

        case COMMENTS_TABLE:
        case COMMENTS_TABLE_ID:
            return "Comments";

        case ARTICLES_USERS_JOIN_TABLE:
            return "Articles a LEFT OUTER JOIN Users u ON (u._id = a.user_id)";

        case COMMENTS_USERS_JOIN_TABLE:
            return "Comments c LEFT OUTER JOIN Users u ON (u._id = c.user_id)";

        default:
            throw new IllegalArgumentException("Unknown URI " + uri);
        }
    }

    static {
        sUriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
        sUriMatcher.addURI(AUTHORITY, "users", USERS_TABLE);
        sUriMatcher.addURI(AUTHORITY, "articles", ARTICLES_TABLE);
        sUriMatcher.addURI(AUTHORITY, "comments", COMMENTS_TABLE);
        sUriMatcher.addURI(AUTHORITY, "users" + "/#", USERS_TABLE_ID);
        sUriMatcher.addURI(AUTHORITY, "articles" + "/#", ARTICLES_TABLE_ID);
        sUriMatcher.addURI(AUTHORITY, "comments" + "/#", COMMENTS_TABLE_ID);
        sUriMatcher.addURI(AUTHORITY, "???", ARTICLES_USERS_JOIN_TABLE); // what uri here?
        sUriMatcher.addURI(AUTHORITY, "???", COMMENTS_USERS_JOIN_TABLE); // what uri here?
    }
} 
```

`CursorAdapter`每次我在表中插入（或更新）一行时，通知所有监听连接和非连接查询的最佳 URI 方案是`Users`什么？

换句话说，如果我在其中一个表中添加或更新新行，我想发送一个**通知**，`getContext().getContentResolver().notifyChange(itemUri, null)`以便所有`CursorAdapter`侦听任何查询 ( `USERS_TABLE`, `ARTICLES_USERS_JOIN_TABLE`, `COMMENTS_USERS_JOIN_TABLE`) 的 s 都会收到更新其内容的通知。

如果这不可能，是否有另一种方法来通知所有观察者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T03:18:22.727

您可以使用特殊的 Uri 进行查询：

```
 sUriMatcher.addURI(AUTHORITY, "articlesusers", ARTICLES_USERS_JOIN_TABLE);
    sUriMatcher.addURI(AUTHORITY, "commentsusers", COMMENTS_USERS_JOIN_TABLE); 
```

但我想不出一种发送单个通知的方法。似乎您最好的选择是为每个引用正在修改的表的 Uri 发送通知。因此，您的插入/更新/删除方法将根据受影响的表多次调用 notifyChange。对于“用户”的更改，它将是 3 个通知——用户、文章用户和评论用户——因为它们都依赖于“用户”表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T12:18:17.923

正如[prodaea](https://stackoverflow.com/a/23199869/1113196)所回答的，这是您可以用于通知 Uri 的另一种选择。这不是一个完美的解决方案，但它只使用一个 Uri 进行通知。

解决方案是使用不带任何表名的主Uri（例如：content://com.example.app.provider/）作为and的查询方法中的通知`ARTICLES_USERS_JOIN_TABLE`Uri `COMMENTS_USERS_JOIN_TABLE`。因此，只要任何表中发生更改，都会通知相关游标。不过有一个限制。也就是说，即使表格`ARTICLES_USERS_JOIN_TABLE`发生变化，也会通知游标。`Articles`

对于表格、`Users' and`文章，您可以使用其特定的 Uris 进行通知。

# objective-c - 内联函数“未定义符号”错误

> ID：10243018
> 
> 赞同：27
> 
> 时间：2012-04-20T08:50:06.640
> 
> 标签：objective-c, c, compiler-errors, inline, linker-errors

我想写一个内联函数，但我得到一个错误。我该如何解决？

错误信息：

```
Undefined symbols for architecture i386:
  "_XYInRect", referenced from:
      -[BeginAnimation ccTouchesEnded:withEvent:] in BeginAnimation.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

代码：

```
CGPoint location = CGPointMake(60, 350);

if (XYInRect(location, 53, 338, 263, 369)) {

}

inline BOOL XYInRect(CGPoint location, float MixX, float MixY, float MaxX ,float MaxY){
    if (location.x >MixX && location.y >MixY && location.x <MaxX && location.y <MaxY) {
        return YES;
    } else {
        return NO;

    }
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-20T12:09:05.957

Clang[默认为 C99](http://clang.llvm.org/compatibility.html#inline)而不是[GNU sematics](http://gcc.gnu.org/onlinedocs/gcc/Inline.html#Inline)，这意味着 raw与 和`inline`不同。`static inline``extern inline`

特别是，原始`inline`意味着该函数仍然具有外部链接，但内联定义不提供外部链接（您需要这样做`extern inline`）。

这意味着您需要`extern`在不同的翻译单元中添加额外的定义，否则链接将失败。但是，您可能正在寻找`static inline`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:55:13.190

我认为`XYInRect()`在使用之前需要了解。在调用之前将函数定义移动到文件中的某个位置。

# windbg - Livekd 文档和教程

> ID：10243022
> 
> 赞同：3
> 
> 时间：2012-04-20T08:50:28.667
> 
> 标签：windbg, crash-dumps, sos, livekd

我知道 LiveKd 是一种创建转储以进行分析的工具。

有人可以帮助我提供一些帮助我学习如何使用 LiveKd 的链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:11:38.597

绝对最好的起点是 Windows Internals 书。从头到尾阅读并遵循包含的 WinDBG 相关示例，所有这些示例都以某种方式使用 LiveKD。

不过，最终，使用 LiveKD 与在 WinDBG 中分析完整的内存转储（有效地）相同。因此，您可以通过搜索 WinDBG 教程找到很多信息。然后，您可以就您要分析的内容提出更具体的问题。作为起点，我在 NT Insider 中有一个名为“分析师视角”的专栏，其中涵盖了许多与 WinDBG 相关的内容：

[http://www.osronline.com/section.cfm?section=17](http://www.osronline.com/section.cfm?section=17)

我尝试在我的博客 (http://analyze-v.com) 上涵盖广泛的 WinDBG 调试相关主题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:21:08.217

LiveKD 是一个 sysinternals 应用程序，它位于 WinDbg 和 kd 之上，所以很多输出是相同的，但它提供实时更新，所以我同意 snoone 和他的建议。建议您查找 Windows Internals、Advanced Windows Debugging、Windows Debugging Notebook 和以下网站：http [:](http://www.dumpanalysis.org/blog/) //www.dumpanalysis.org/blog/、http [:](http://blogs.msdn.com/b/ntdebugging/) [//blogs.msdn.com/b/tess/、http](http://blogs.msdn.com/b/tess/) [://blogs.msdn.com/b/ntdebugging/](http://blogs.msdn.com/b/ntdebugging/)

# java - 在运行时更改android中ListView的背景颜色

> ID：10243027
> 
> 赞同：2
> 
> 时间：2012-04-20T08:50:40.850
> 
> 标签：java, android, listview, android-listview

我在**Android**做项目。我想从***ListView***`background`更改颜色以及`textcolor`所选项目的颜色。这是我的代码

 *```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="right"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="265dp"
            android:layout_height="366dp"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="20dp"
            android:layout_weight="0.00"
            android:drawSelectorOnTop="true" >

        </ListView>
    </LinearLayout>

</LinearLayout> 
```

所以，我有`ListView`一些学生的名字，并且可以使用`checkbox`.

```
ListView stud_lst=(ListView) findViewById(R.id.listView1);

stud_lst.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

我想更改所选学生的背景和文字颜色。我已经看到了一些答案，但我没有得到它。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:06:35.393

使用自定义适配器并在您的活动类中执行以下操作：

```
 //  mListview is ur listview object.
   mListview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                    view.setBackgroundColor("your bg's color id");
            }
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T10:59:17.290

您必须创建一个自定义适配器来更改项目的背景颜色。这是自定义适配器的示例：

```
public class PaListAdapter  extends BaseAdapter{
        private LayoutInflater mInflater;

         private ArrayList<String> platevalue = new ArrayList<String>();

           ViewHolder holder;
        public PaListAdapter(Context context,ArrayList<String> value)
        {
            // Cache the LayoutInflate to avoid asking for a new one each time.
            mInflater = LayoutInflater.from(context);

            //mycontext = context;
            platevalue.clear();
            platevalue =value;

        }

        public int getCount() 
        {
            return platevalue.size();
        }

        public Object getItem(int position) 
        {
            return position;
        }

        public long getItemId(int position) 
        {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) 
        {

            if (convertView == null) 
            {
                 convertView = mInflater.inflate(R.layout.select_dialog, null);

                holder = new ViewHolder();
                holder.hTransID =(TextView) convertView.findViewById(R.id.txtChoice);

                convertView.setTag(holder);
            }
            else 
            {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.hTransID.setText(platevalue.get(position));

            return convertView;
        }

        static class ViewHolder 
        {      
              TextView    hTransID;

        }
    } 
```

select_dialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:descendantFocusability="blocksDescendants"
 android:background="#000000"
    >

    <TextView
        android:id="@+id/txtChoice"

        android:layout_gravity="center_vertical|left"
        android:gravity="center_vertical|left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:textColor="#000000"/> 

</LinearLayout> 
```

在 Activity Class.Define 它像：

```
simpleefficientadapter efficientadapter;

  efficientadapter=new simpleefficientadapter(CLASSNAME.this, VALUES);
   listView.setAdapter(efficientadapter); 
```*

# java - 导出为 CSV 编码问题

> ID：10243029
> 
> 赞同：10
> 
> 时间：2012-04-20T08:50:41.003
> 
> 标签：java, gwt, encoding, jboss, export

我有一个列表网格，其中所有项目都用变音符号正确显示，因为它们在本地和 jboss 服务器上的 db 中。

但是，在 jboss 服务器上，当我尝试导出为 csv 时，所有变音符号都被替换了，所以我得到了 Ã^Â~coala 而不是 Școala 之类的东西，尽管变音符号在列表网格中正确显示。

在 listgrid 中显示和导出时，本地都可以正常工作。

这是我的导出代码：

```
private void Export() {
  String exportAs = (String) m_ExportForm.getField("exportType").getValue();  
  FormItem item = m_ExportForm.getField("showInWindow");  
  boolean showInWindow =  item.getValue() == null ? false : (Boolean) item.getValue();  

  // exportAs is either XML or CSV, which we can do with requestProperties
  Map<String,String> params= new java.util.HashMap<String, String>();
  params.put("Accept-Charset","utf-8");

  DSRequest dsRequestProperties = new DSRequest();
  dsRequestProperties.setHttpHeaders(params);
  dsRequestProperties.setExportValueFields(true);
  dsRequestProperties.setExportAs((ExportFormat)EnumUtil.getEnum(ExportFormat.values(), exportAs));  
  dsRequestProperties.setExportDisplay(showInWindow ? ExportDisplay.WINDOW : ExportDisplay.DOWNLOAD);

  // TODO: move in user-config
  dsRequestProperties.setExportTitleSeparatorChar("_");
  dsRequestProperties.setExportDelimiter(";");

  dsRequestProperties.setExportFilename("export." + extensionsValueMap.get(exportAs));
  dsRequestProperties.setContentType("text/csv; charset=UTF-8");
  m_Target.Export(dsRequestProperties);

  Close();
} 
```

另外，在我的 jboss 7 属性文件中，我有这个：

```
<system-properties>
  <property name="org.apache.catalina.connector.URI_ENCODING" value="UTF-8"/>
  <property name="org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING" value="true"/>
</system-properties> 
```

当列表网格正确显示变音符号时，它起作用。

另外，在我的 web.xml 中，我的 servlet

```
<init-param>
  <param-name>encoding</param-name>
  <param-value>UTF-8</param-value>
</init-param> 
```

也许我走错了路，这是由其他原因引起的。

本地导出的文件和从 jboss 服务器导出的文件都具有准确的文件大小。

另外，对于我的 Jboss jvm，我设置了 java_opts 的属性

```
-Dfile.encoding=UTF-8 
```

**编辑：**由于建议添加了参数映射。依然没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:38:58.150

听起来这是一个字符编码/解码问题。

您的代码以 UTF-8 编码生成了一个 CSV 文件。但是，您使用什么程序来*读取*CSV？视窗记事本？如果它是一个 Windows 应用程序，很可能假设文本文件采用[ISO-8859-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1)编码。

选项1：

告诉记事本或您的 Windows 应用程序编码。使用记事本，文件/打开对话框中有一个编码下拉菜单。将此切换为 UTF-8。

选项 2：

将源代码中的编码从 更改`UTF-8`为`ISO-8859-1`，这与 Windows 的默认编码相匹配。换行：

```
dsRequestProperties.setContentType("application/csv; charset=UTF-8"); 
```

至

```
dsRequestProperties.setContentType("application/csv; charset=ISO-8859-1"); 
```

希望能解决问题。该`org.apache.catalina.connector.URI_ENCODING`设置不影响文件编码，应保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:56:25.550

我必须承认，在这个星座中我没有看到过`charset=...`。但是字符集对文本更有意义，所以先试试：

```
dsRequestProperties.setContentType("text/csv; charset=UTF-8"); 
```

可以很好地指示二进制数据的原因`application`会使字符集字节编码变得危险。

* * *

***补充：我对错误的解释***

也许字符串`asExport`得到了 UTF-8，但给出了一个多字节字符而不是两个字符。这些也在非 ASCII 范围内，并且您的响应以某种方式希望提供 ISO-8859-1（默认 latin-1），并写入`??`. *那是2个错误。*

你可以检查`asExport`. 为什么尽管 charset=UTF-8 以 UTF-8 写入不成功...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:10:09.113

您的 JBoss 设置中可能有一些额外的 FilterServlet 会干扰编码。可能与身份验证或压缩有关。

# asp.net - 如何将 ASP.Net 成员资格与我自己的表一起使用？

> ID：10243030
> 
> 赞同：1
> 
> 时间：2012-04-20T08:50:45.390
> 
> 标签：asp.net, asp.net-membership, asp.net-authentication

通常，为了使用 ASP.Net 成员 API，我将 API 的表导入我的数据库并使用它。但是有很多表格和字段我不想要它们。我只想让我的用户表具有三个字段（例如；用户 ID、用户名、密码。就这个）。那么如何将此 API 连接到我自己的表呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:58:29.753

您必须实现自己的 custom `MembershipProvider`。

请参阅：http: [//msdn.microsoft.com/en-us/library/f1kyba5e.aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:58:35.857

您可以创建自定义成员资格提供程序。asp.net 上有一个视频向您展示如何做到这一点： [http ://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership -提供者](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

# c# - 为什么 PlaybackState 在 PlaybackStopped 触发后仍保持在 Playing 状态？

> ID：10243031
> 
> 赞同：3
> 
> 时间：2012-04-20T08:50:46.670
> 
> 标签：c#, .net, audio, naudio

我对使用 NAudio 有点陌生，所以我肯定错过了一些重要的东西，因此这个问题。

从示例/演示代码开始，我整理了一个尽可能简单的类来播放 MP3 或 WAV 文件：

```
public class AudioPlayer : IDisposable
{
    WaveStream _waveStream; // sound data stream
    WaveChannel32 _waveChannel32; // sound channel ??
    IWavePlayer _iWavePlayer; // sound output driver

    public bool IsPlaying
    {
        get { return _iWavePlayer != null 
                     && _iWavePlayer.PlaybackState 
                         != Wave.PlaybackState.Stopped; }
    }

    public PlaybackState PlaybackState
    {
        get { return _iWavePlayer.PlaybackState; }
    }

    public void LoadMp3(byte[] mp3Bytes)
    {
        Load(CreateInputStreamFromMp3Bytes(mp3Bytes));
    }

    public void LoadFile(string filename)
    {
        Load(CreateInputStream(filename));
    }

    void Load(WaveStream waveStream)
    {
        if (_iWavePlayer != null)
            Dispose();
        _iWavePlayer = new WaveOut();
        _iWavePlayer.PlaybackStopped += 
            new EventHandler(_iWavePlayer_PlaybackStopped);
        _waveStream = waveStream;
        _waveChannel32 = new WaveChannel32(_waveStream);
        _waveChannel32.PadWithZeroes = false;
        _iWavePlayer.Init(_waveChannel32);
    }

    void _iWavePlayer_PlaybackStopped(object sender, EventArgs e)
    {
        Stop();
    }

    static WaveStream CreateInputStreamFromMp3Bytes(byte[] mp3Bytes)
    {
        return new Mp3FileReader(new MemoryStream(mp3Bytes), false);
    }

    static WaveStream CreateInputStream(string fileName)
    {
        if (fileName.EndsWith(".wav"))
            return new WaveFileReader(fileName);
        else if (fileName.EndsWith(".mp3"))
            return new Mp3FileReader(fileName);
        else
            throw new InvalidOperationException("Unsupported extension");
    }

    public void Play()
    {
        _iWavePlayer.Play();
    }

    public void Stop()
    {
        if (_iWavePlayer != null 
                && _iWavePlayer.PlaybackState != PlaybackState.Stopped) { 
            _iWavePlayer.Stop();
            _waveStream.Position = 0;
        }
    }

    public void Dispose()
    {
        Stop();
        if (_iWavePlayer != null) {
            _iWavePlayer.Dispose();
            _iWavePlayer = null;
        }
        if (_waveChannel32 != null) {
            _waveChannel32.Dispose();
            _waveChannel32 = null;
        }
        if (_waveStream != null) {
            _waveStream.Dispose();
            _waveStream = null;
        }
    }
} 
```

我正在使用有问题的代码播放 MP3 文件（不是 WAV）。

它在大多数情况下都可以正常工作，考虑到我将能够在我的项目中替换 MediaElements，这非常棒。我遇到的问题是，一旦 PlaybackStopped 发生火灾，就会`PlaybackState`停留在`Playing`而不是改变。`Stopped`为了解决这个问题，我订阅并从那里`PlaybackStopped`打电话。`Stop()`

我必须这样打电话是正常的`Stop()`，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:24:08.200

看起来像一个错误。如果您查看 NAudio 代码将`WaveOut`不会更改`PlaybackState`. `RaisePlaybackStoppedEvent`但`DirectSoundOut`将其更改为停止。有点疯狂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T14:01:25.820

尝试这个：

在 Load 方法中更改此行：

```
_iWavePlayer = new WaveOut(); 
```

这样：

```
_iWavePlayer = new WaveOut(WaveCallbackInfo.FunctionCallback()); 
```

# iphone - Apple OTA 应用分发：应用下载问题

> ID：10243032
> 
> 赞同：1
> 
> 时间：2012-04-20T08:50:46.827
> 
> 标签：iphone, ios, xcode4.3, ota

我有一个关于通过 OTA 管理下载应用程序的问题。

这个[链接](http://www.paradeofrain.com/2010/11/taking-the-pain-out-of-ad-hoc-testing/)很好地展示了如何开始，这与我在以下步骤中所做的相同：

在 Xcode 4.3.1 中使用开发人员配置文件创建用于存档（产品 -> 存档）的应用程序后，我能够在管理器中看到该应用程序。选择并单击“分发...”按钮后，我选择了“企业或临时部署安全”选项。下一步，我选择了代码签名身份，并使用（开发人员配置文件）编译了应用程序。然后我选择了“保存以供企业分发”复选框并填写了应用程序 URL（http://www.mycompany.com/test/MyApp.ipa）和标题（“我的应用程序”）（这是必需的）。将 ipa 文件保存到特定文件夹后，我在给定资源 URL (http://www.mycompany) 的服务器上上传了 mobileprovisionprofile、ipa ("MyApp.ipa") 和 plist ("MyApp.plist") .

然后我必须创建一个页面（index.html），其中添加了指向应用程序清单（MyApp.plist）的链接：

```
<a href="itms-services://?action=download-manifest&url=http://www.mycompany.com/test/MyApp.plist"> 
```

顺便说一句，还添加了配置文件的链接，因此也很容易安装配置文件。

我可以很好地使用移动 safari 安装 Provisioning Profile，但是当我单击 Manifest Link 时，会弹出一个错误对话框并显示“无法连接到 www.mycompany.com”。

ipa oder plist 文件有问题吗？

提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:54:47.573

好的，我在另一个[帖子](https://stackoverflow.com/questions/4695180/wireless-iphone-app-distribution-problem-with-itms-services-protocol)中找到了答案。

答案之一是，服务器可能有问题，这对我来说是正确的答案。

我们所做的只是确保 MIME 类型设置正确并且文件可访问。

谢谢肖罗布

# android - Android SQLite 连接检查的测试用例

> ID：10243036
> 
> 赞同：0
> 
> 时间：2012-04-20T08:50:57.640
> 
> 标签：android, testcase

我是android测试用例的新手。我想为 SQLite 数据库编写测试用例。我如何编写测试用例以及如何检查该用例。请任何人帮助我。有没有可能？

在使用Robotium的android中，我们可以测试应用程序，但是这里可以检查在sqlite中创建的表，并将数据插入到数据库中，这种类型意味着如何为android数据库连接编写测试用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:17:11.720

这不是很好，我可以证明你收到的反对票是合理的。

但是，如果我让您正确地处理了 Android 测试中的一个大问题：您将无法模拟数据库（以及私有文件存储）。`InstrumentationTestCase`允许您使用特殊和`Context`使用测试项目的`asset`和`raw`文件夹，但不定义私有文件存储和数据库。

前段时间我正在与这个问题作斗争，但无法解决。最后，我原来使用的是真实应用程序的数据库，并确保最终删除了所有测试数据。丑陋的不稳定且难以维护，但没有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:16:56.733

您必须清楚地了解应用程序才能编写测试用例。没有人可以在不了解系统的情况下帮助您编写测试用例。请参阅[此](http://inderpsingh.blogspot.in/2011_02_01_archive.html)示例测试用例。您可以使用[Robotium](http://code.google.com/p/robotium/)自动执行您的 android 测试用例。

# c++ - 在没有进行任何代码更改的情况下突然出现错误“调试断言失败错误”。（在 C++ 代码中）

> ID：10243037
> 
> 赞同：0
> 
> 时间：2012-04-20T08:50:59.013
> 
> 标签：c++, visual-studio-2008, visual-c++, visual-studio-debugging, assertions

我的 VC++ 代码可以正常工作（执行），现在突然间我不明白为什么会出现错误“调试断言失败”。

```
file:f\dd\vctools\crt_bld\self_x86\crt\src\fclose.c. 
```

我在 WIn7 64 位操作系统上使用 VS2008。

一个运行良好的代码突然开始以这种方式中断而没有任何代码更改的原因可能是什么？

任何人都可以帮助我摆脱这个错误吗？

我在调用堆栈中看到之前的代码在文件中

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\crt\src\crt0dat.c 
```

```
while ( pfbegin < pfend )              
    {                
        /*             
         * if current table entry is non-NULL, call thru it.               
         */                      
        if ( *pfbegin != NULL )                  
            (**pfbegin)();              
        ++pfbegin;                       
    } 
```

是的，`fclose()`正在接收一个空文件指针。我真的不明白为什么会突然出现错误的文件指针值，而我却没有对代码或环境进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:10:11.133

你能提供调用的代码`fclose()`吗？我可能猜到`fopen()`无法打开返回 NULL 的文件，例如因为文件不存在。您没有检查此错误并将 NULL 句柄传递给`fclose()`.

# android - ActionBarSherlock onClick 监听器

> ID：10243039
> 
> 赞同：0
> 
> 时间：2012-04-20T08:51:07.437
> 
> 标签：android, actionbarsherlock, android-actionbar

我已经阅读了 android ActionBar 文档并且没有找到如何将 onClick 侦听器设置为 actionbar menuitem？这是我创建操作栏按钮的方式（来自 abs 示例项目的代码）。如何为此列表中的每个菜单项设置侦听器？

```
 public boolean onCreateOptionsMenu(Menu menu) {           
          menu.add("Save")
          .setIcon(R.drawable.ic_compose_inverse)
          .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

      menu.add("Share")
          .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

      menu.add("Refresh")
          .setIcon(R.drawable.ic_refresh_inverse)
          .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);  

       return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:00:14.497

覆盖片段/活动中的 onOptionsItemSelected() 方法

# jquery - jQuery 幻灯片 div

> ID：10243042
> 
> 赞同：1
> 
> 时间：2012-04-20T08:51:12.440
> 
> 标签：jquery, css, slide

我喜欢幻灯片 jQuery 效果，当您[在某些产品上移动光标时](https://www.decide.com/)

我试图用类似的功能做同样的效果，但有一个区别 - 当我在盒子上移动光标时，我想显示带有信息的新 DIV（这对我有用），但我想将其显示为幻灯片从下到上，与链接地址完全相同。

```
$('div.box_data').hover( function() {
  $(this).find('div.box_data_info').toggle();
}); 
```

如何添加幻灯片效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:54:05.950

请参阅[http://jsfiddle.net/ePSdq/](http://jsfiddle.net/ePSdq/)

html。

```
<div class="box_data">
    <div class="box_data_info">
        <p> Loren ipsum....</p>
    </div>
</div>
​ 
```

css

```
.box_data{
 position:relative;
 height:200px;
 background-color:Red;
    overflow:hidden;
}
.box_data_info{
    position:absolute;
    bottom:-100px;
    height:80px;
    background-color:#000;
    color:#fff;
    padding:10px;
    width:100%;
}​ 
```

js。

```
$(function(){$('div.box_data').hover( function() {
      $(this).find('div.box_data_info').stop().animate({bottom:0},500);
    },
    function() {
      $(this).find('div.box_data_info').stop().animate({bottom: -100}, 200);
    });
}); 
```

​</p>

# c# - Ninject 从 IBinding 获取目标类型

> ID：10243047
> 
> 赞同：5
> 
> 时间：2012-04-20T08:51:35.607
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject

我有一个由多种类型实现的接口。但在我做之前，`kernel.GetAll<IAmServiceable>()`我希望能够思考注射的目标类型。

我知道该函数`kernel.GetBindings(typeof(IAmServiceable))`存在，但这会返回一个`IBinding`'s 列表。

有谁知道我如何从 中获取目标类型`IBinding`？

我想知道在`IAmServiceable`实例化之前绑定的类型。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-14T14:16:55.500

我知道您的问题现在可能有点晚了，但是自从我今天遇到这个问题以来，我认为其他人也可能会这样做。

那是我最终想出的代码-我认为它并不完美（远非如此），尤其是在性能方面，但它适用于我的情况，并且由于我不打算经常调用此方法，因此似乎可以我。

```
public Type GetBoundToType(IKernel kernel, Type boundType)
{
    var binding = kernel.GetBindings(boundType).FirstOrDefault();
    if (binding != null)
    {
        if (binding.Target != BindingTarget.Type && binding.Target != BindingTarget.Self)
        {
            // TODO: maybe the code  below could work for other BindingTarget values, too, feelfree to try
            throw new InvalidOperationException(string.Format("Cannot find the type to which {0} is bound to, because it is bound using a method, provider or constant ", boundType));
        }

        var req = kernel.CreateRequest(boundType, metadata => true, new IParameter[0], true, false);
        var cache = kernel.Components.Get<ICache>();
        var planner = kernel.Components.Get<IPlanner>();
        var pipeline = kernel.Components.Get<IPipeline>();
        var provider = binding.GetProvider(new Context(kernel, req, binding, cache, planner, pipeline));
        return provider.Type;
    }

    if (boundType.IsClass && !boundType.IsAbstract)
    {
        return boundType;
    }
    throw new InvalidOperationException(string.Format("Cannot find the type to which {0} is bound to", boundType));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:02:42.483

这是不可能的。例如，在这种情况下，类型是什么？

```
Bind<IX>().ToMethod(c => RandomBool() ? new Foo() : new Bar()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T14:30:33.510

如果您正在使用`NinjectModule`（或可以访问`IKernel`其他方式）一个不错的简单方法是：

```
var concreteType = Kernel.Get<InterfaceType>().GetType(); 
```

显然，缺点是您创建了具体类型的实例。尽管如此，它还是很好很简单，而且我认为它非常健壮。显然，如果接口派生自 IDisposable 您将使用 using 语句：

```
using(var obj = Kernel.Get<InterfaceType>())
{
    var concreteType = obj.GetType();
    .
    .
    .
} 
```

# android - 如何在 MapView 上进行 3DTransition？

> ID：10243056
> 
> 赞同：1
> 
> 时间：2012-04-20T08:52:10.037
> 
> 标签：android, android-layout

在我的应用程序中，我有一个事件列表及其描述，现在我想在 MapView 上显示事件位置。因此，我使用了 Android api 演示（ApiDemo > Views > Animation > 3D Transition）中描述的 3dTransition。3D 转换工作正常，但问题是在 MapView 显示的转换之后，它被翻转了 180 度（见下面的屏幕截图）。如何在不进一步旋转地图的情况下正常显示地图？我使用[Rotate3DAnimation.java](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.html) 以下是我的代码：请帮助...

```
public class EventsActivity extends MapActivity implements DialogInterface.OnDismissListener {

    private EventsItemModel     eventsItemModel;
    private Integer             eventItemId;
    private Integer             eventCategoryId;
    private static MapOverlay   mapOverlay;
    Drawable                    marker;
    Context                     context;
    private static String       MY_LOCATION = "My Location";
    private ViewGroup           mContainer;
    private ImageView           mImageView;
    private MapView             mMapView;
    private static boolean      isFlipped   = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.event_item_detail);
        mContainer = (ViewGroup) findViewById(R.id.event_container);
        // Since we are caching large views, we want to keep their cache
        // between each animation
        mContainer.setPersistentDrawingCache(ViewGroup.PERSISTENT_ANIMATION_CACHE);
        mMapView = (MapView) findViewById(R.id.mapview);
        mImageView = (ImageView) findViewById(R.id.mapPreview);

        mImageView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                isFlipped = true;
                applyRotation(1, 0, 90);
            }
        });

        try {
            eventCategoryId = getIntent().getIntExtra(AppConstants.EVENT_CATEGORY, 0);
            eventItemId = getIntent().getIntExtra(AppConstants.EVENT_ID, 0);
        }
        catch (Exception e) {
            e.printStackTrace();
        }

    }

    public void onResume() {
        super.onResume();
        WeakReference<EventsActivity> weakContext = new WeakReference<EventsActivity>(this);
        EventsAsyncTask task = new EventsAsyncTask(weakContext);
        task.execute(eventItemId, eventCategoryId);
    }

    public void onTaskComplete(EventsItemModel eiModel) {
        this.eventsItemModel = eiModel;
        TextView calTitle = (TextView) findViewById(R.id.news_title);
        TextView eventTitle = (TextView) findViewById(R.id.cal_event_title);
        TextView calDate = (TextView) findViewById(R.id.cal_date);
        TextView calTime = (TextView) findViewById(R.id.cal_time);
        TextView calAddress = (TextView) findViewById(R.id.cal_address);
        TextView calDescription = (TextView) findViewById(R.id.cal_description);

        try {
            calTitle.setText(eventsItemModel.getEventsCategory().getTitle());
            calTitle.setVisibility(View.VISIBLE);
            eventTitle.setText(eventsItemModel.getEventTitle());
            calDate.setText(eventsItemModel.getFormattedDateRange());
            // TODO:Format start and end time
            calTime.setText("Time: " + eventsItemModel.getFormattedStartTime() + " - " + eventsItemModel.getFormattedEndTime());
            calAddress.setText(eventsItemModel.getAddress());
            calDescription.setText(eventsItemModel.getDescription());
            System.out.println("<<<<<<<<< EventsActivity >>>>>>>>> isRead? " + eventsItemModel.getReadUnread());
            eventsItemModel.setReadUnread(true);
            System.out.println("<<<<<<<<<< EventsActivity >>>>>>>>>> isRead? " + eventsItemModel.getReadUnread());
        }
        catch (Exception e) {
            e.printStackTrace();
        }

        mMapView.setBuiltInZoomControls(true);
        setMapParameters();
        createItemizedOverlay();
        setLocationMarker(createMarker(R.drawable.location_marker));
        showLocationPointOnMap();
    }

    @Override
    public void onDismiss(DialogInterface dialog) {

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public void createItemizedOverlay() {
        mapOverlay = new MapOverlay(this);
    }

    public void setLocationMarker(Drawable marker) {
        mapOverlay.setLocationMarker(marker);
    }

    public void showLocationPointOnMap() {

        GeoPoint geoPoint = new GeoPoint(0, 0);
        if (eventsItemModel != null && eventsItemModel.getLatitude() != null && eventsItemModel.getLatitude().length() > 0 && eventsItemModel.getLongitude() != null
                && eventsItemModel.getLongitude().length() > 0) {
            try {
                geoPoint = new GeoPoint((int) (Double.parseDouble(eventsItemModel.getLatitude()) * 1E6), (int) (Double.parseDouble(eventsItemModel.getLongitude()) * 1E6));
            }
            catch (NumberFormatException e) {
                e.printStackTrace();
            }
            OverlayItem item = new OverlayItem(geoPoint, MY_LOCATION, null);
            mapOverlay.addItem(item);
            mMapView.getOverlays().add(mapOverlay);

            // move to location
            mMapView.getController().animateTo(geoPoint);
            // redraw map
            mMapView.postInvalidate();
        }

    }

    public void setStreetView(boolean isStreetView) {
        mMapView.setStreetView(isStreetView);
    }

    public void setSatelliteView(boolean isSatelliteView) {
        mMapView.setSatellite(isSatelliteView);
    }

    public void setZoom(int zoomLevel) {
        mMapView.getController().setZoom(zoomLevel);
    }

    private void setMapParameters() {
        // setStreetView(true);
        // setSatelliteView(false);
        setZoom(17);
    }

    private Drawable createMarker(int iconID) {
        // Initialize icon
        Drawable icon = getResources().getDrawable(iconID);
        icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon.getIntrinsicHeight());
        return icon;
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    /**
     * Setup a new 3D rotation on the container view.
     * 
     * @param position
     *            the item that was clicked to show a picture, or -1 to show the list
     * @param start
     *            the start angle at which the rotation must begin
     * @param end
     *            the end angle of the rotation
     */
    private void applyRotation(int position, float start, float end) {
        // Find the center of the container
        final float centerX = mContainer.getWidth() / 2.0f;
        final float centerY = mContainer.getHeight() / 2.0f;

        // Create a new 3D rotation with the supplied parameter
        // The animation listener is used to trigger the next animation
        final Rotate3dAnimation rotation = new Rotate3dAnimation(start, end, centerX, centerY, 310.0f, true);
        rotation.setDuration(500);
        rotation.setFillAfter(true);
        rotation.setInterpolator(new AccelerateInterpolator());
        rotation.setAnimationListener(new DisplayNextView(position));

        mContainer.startAnimation(rotation);
    }

    /**
     * This class listens for the end of the first half of the animation. It then posts a new action that effectively swaps the views when the container is rotated 90 degrees and thus invisible.
     */
    private final class DisplayNextView implements Animation.AnimationListener {
        private final int   mPosition;

        private DisplayNextView(int position) {
            mPosition = position;
        }

        public void onAnimationStart(Animation animation) {
        }

        public void onAnimationEnd(Animation animation) {
            mContainer.post(new SwapViews(mPosition));
        }

        public void onAnimationRepeat(Animation animation) {
            // Do nothing!!
        }
    }

    /**
     * This class is responsible for swapping the views and start the second half of the animation.
     */
    private final class SwapViews implements Runnable {
        private final int   mPosition;

        public SwapViews(int position) {
            mPosition = position;
        }

        public void run() {
            final float centerX = mContainer.getWidth() / 2.0f;
            final float centerY = mContainer.getHeight() / 2.0f;
            Rotate3dAnimation rotation;

            if (mPosition > -1) {
                mImageView.setVisibility(View.GONE);
                mMapView.setVisibility(View.VISIBLE);
                mMapView.requestFocus();

                rotation = new Rotate3dAnimation(90, 180, centerX, centerY, 310.0f, false);
                rotation.reset();
            }
            else {
                mMapView.setVisibility(View.GONE);
                mImageView.setVisibility(View.VISIBLE);
                mImageView.requestFocus();

                rotation = new Rotate3dAnimation(90, 0, centerX, centerY, 310.0f, false);
            }

            rotation.setDuration(100);
            rotation.setFillAfter(true);
            rotation.setInterpolator(new DecelerateInterpolator());

            mContainer.startAnimation(rotation);
        }
    }

    @Override
    public void onBackPressed() {
        if (isFlipped) {
            applyRotation(-1, 180, 90);
            isFlipped = false;
        }
        else {
            super.onBackPressed();
        }
    }

} 
```

![在此处输入图像描述](../Images/ac9ca33594ea5f53e18039565dc9bb8e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:03:16.310

我找到的解决方案如下，任何其他优雅的解决方案都受到高度赞赏：

改变旋转度数如下：

```
if (mPosition > -1) {
                mImageView.setVisibility(View.GONE);
                mMapView.setVisibility(View.VISIBLE);
                mMapView.requestFocus();

                rotation = new Rotate3dAnimation(-90, 0, centerX, centerY, 310.0f, false);
                rotation.reset();
            } 
```

和

```
@Override
    public void onBackPressed() {
        if (isFlipped) {
            applyRotation(-1, 0, -90);
            isFlipped = false;
        }
        else {
            super.onBackPressed();
        }
    } 
```

就是这样！！:)

# javascript - 如何使用 node.js 创建用户模型？

> ID：10243058
> 
> 赞同：1
> 
> 时间：2012-04-20T08:52:22.613
> 
> 标签：javascript, node.js, architecture, resources, models

我想创建一个模型来处理与用户相关的一切，从 findOne() 函数开始。

应用程序.js：

```
var u = new User(client);
u.findOne(function(error, user) {
  console.log(error, user);
}); 
```

模型/用户.js：

```
var User = function (client) {
  this.client = client
};
User.prototype.findOne = function (id, callback) {
  client.connect();
  client.get('testkey', function(error, result) {
    var test = "hello@world.com";
    callback(null, test);
    client.close();
  });
};
module.exports = User; 
```

node.js 抱怨 findOne() 未定义。

创建此类模型并向它们提供对象（如数据库池等）的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:00:15.447

您的代码包含各种错误：

*   `new`创建实例时不要使用
*   您将函数与对象文字语法混合在一起：

    ```
    var User = function (client) {
      client: client
    }; 
    ```

    你想要`this.client = client;`。现在，函数体什么也不做，因为它只是定义了一个名为的标签`client`，对变量不做任何事情`client`。

我建议您搜索 node.js 的现有 ORM，而不是尝试自己编写一个。

# wcf - WCF customBinding 与客户端证书

> ID：10243060
> 
> 赞同：1
> 
> 时间：2012-04-20T08:52:29.243
> 
> 标签：wcf, soap, certificate

我正在尝试`customBinding`使用 SOAP 1.2、TLS 和客户端证书创建一个调用 Web 服务。据我了解，这仅适用于`customBinding`.

我已经定义了以下行为：

```
<behaviors>
    <endpointBehaviors>
        <behavior name="TehRightBehaviour">
            <clientCredentials>
                <serviceCertificate>
                    <defaultCertificate findValue="WebInterface" x509FindType="FindBySubjectName" />
                    <authentication revocationMode="NoCheck" certificateValidationMode="None" />
                </serviceCertificate>
            </clientCredentials>
        </behavior>
    </endpointBehaviors>
</behaviors> 
```

客户端确实找到了证书，如果我指定了错误的名称，它会引发错误。我的绑定看起来像：

```
<customBinding>
    <binding name="TehRealBinding">
        <transactionFlow />
        <textMessageEncoding messageVersion="Soap12" />
        <security authenticationMode="MutualCertificate" />
        <httpsTransport requireClientCertificate="true" />
    </binding>
</customBinding> 
```

我把它结合在终点，比如：

```
<client>
    <endpoint address="https://hestia1:8081/cm/main"
        behaviorConfiguration="TehRightBehaviour"
        binding="customBinding"
        bindingConfiguration="TehRealBinding"
        contract="BrightMain.CMMainService"
        name="cmmain" />
</client> 
```

问题是，如果我调用 Web 服务，它会引发一个异常说

> “未提供客户端证书。在 ClientCredentials 中指定客户端证书。”

我发现有几点可以指定证书，显然我用错了。所以我的问题是：哪个是正确的？

在此先感谢，克里斯托夫

**Edit:** Perhaps, I should learn to read, because specifying the `<serviceCertificate>` is obivously not suffictient. I will check this now...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:26:39.057

I should be like this

```
<behavior name="TehRightBehaviour">
    <clientCredentials>
        <!-- clientCertificate not defaultCertificate -->
        <clientCertificate findValue="WebInterface" x509FindType="FindBySubjectName" />
        <serviceCertificate>
            <authentication revocationMode="NoCheck" certificateValidationMode="None" />
        </serviceCertificate>
    </clientCredentials>
</behavior> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:00:34.880

I Installed the certificate under "Personal" and used following code and it worked for me.

```
X509Store keystore = new X509Store(StoreName.My, StoreLocation.CurrentUser);              
keystore.Open(OpenFlags.ReadOnly);

var certificates = keystore.Certificates;
foreach (var certificate in certificates)
{
    var friendlyName = certificate.FriendlyName;
    var xname = certificate.GetName();
}
X509Certificate certificatex = certificates[0];
X509Certificate2Collection certs = keystore.Certificates.Find(X509FindType.
            FindBySubjectName, "Name of subject", false); 
```

and then you will pass it in your client request

```
xyzClient.ClientCredentials.ClientCertificate.Certificate = certs[0]; 
```

# jquery - 根据元素的高度更改样式

> ID：10243062
> 
> 赞同：1
> 
> 时间：2012-04-20T08:52:40.603
> 
> 标签：jquery

我想根据我的 h3 标签的高度更改锚标签的位置。下面的代码不起作用，我做对了吗？

它只是说，如果我的 h3 标签大于 17px，则查找父 div (.'news') 并在元素中设置锚标签的样式。

```
 if ($('.news h3').height() > 17){
$(this).parent('a').css("bottom","20px");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:59:46.383

您的选择器`$('.news h3')`返回一个 jQuery 元素数组。如果您有多个`h3`（在 内`.news`）`.height()`将返回第一个的高度。

让我们说每个..

```
$('.news h3').each(function () {
  if ($(this).height() > 17) {
    $(this).parent('a').css('bottom', '20px');
  }
}); 
```

请注意，`.parent('a')`在这里使用，您`<h3>`必须在 下`<a>`，如果不是，请尝试`$(this).parents('a').eq(0).css('bottom', '20px');`

# javascript - 带有大图像的画布drawImage

> ID：10243063
> 
> 赞同：1
> 
> 时间：2012-04-20T08:52:46.293
> 
> 标签：javascript, html, canvas

我想做的是某种可滚动的视口，其中加载了一个非常大的图像（如 10.000 x 10.000 像素或更大），我应该能够在此图像上绘制一些线条/形状。

我可以想到两种方法来绘制图像/允许绘制形状：

*   使用标签绘制图像并在其上方绘制图像大小的画布。
*   使用 drawImage() 方法绘制图像，只需使用画布即可。

我已经尝试了这两种情况，但是当我加载图像（在 img 标记中或使用 javascript Image() 对象）时，它会消耗大约 500MB 的内存。

我想知道是否有更有效的方法来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:23:27.100

除非万不得已，否则永远不要*让*用户下载这么大的图像。

制作图像的 100 个较小的图块（或附近）并将图块绘制到画布上，仅绘制当前时间可以看到的图块（如谷歌地图等）。

# python - 自动解析 numpy recarray

> ID：10243064
> 
> 赞同：0
> 
> 时间：2012-04-20T08:52:47.920
> 
> 标签：python, numpy, scipy

嗨，我有一些在 IDL（交互式数据语言）中创建的二进制文件，可以通过 scipy 使用

```
scipy.io.readsav 
```

特别是我使用它如下

```
data = scipy.io.readsav("input.sav", python_dict=True) 
```

所以输出是一个标准的python字典。特别是输出我可以访问存储在字典中的 numpy.recarray

```
du = data.keys()
duV = data[du[0]] 
```

所以duV现在是一个rearray。我不知道存储在recarray 中的变量和名称。我可以访问变量的名称

```
names = duV.dtype.names 
```

现在假设名称等于

```
('V', 'T', 'THETA', 'ERR') 
```

我想找到一个自动程序来读取具有相应名称的所有变量，即自动执行的操作

```
v = duV.field('V')
t = duV.field('T') 
```

等等。等等。所以我想创建被命名为recarray名称的变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:22:40.167

如果要将所有字段放入全局变量中，可以执行以下操作：

```
for name in duV.dtype.names:
    globals()[name.lower()] = duV.field(name) 
```

# proxy - 代理如何绕过防火墙过滤？

> ID：10243068
> 
> 赞同：1
> 
> 时间：2012-04-20T08:53:20.350
> 
> 标签：proxy, network-protocols

我想知道代理如何绕过防火墙内的内容过滤器？

例如，如果您在中国并尝试连接 facebook，GFW 将阻止它。但是如果你使用代理服务器，那么你可以通过连接。这里的逻辑是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:54:26.377

防火墙阻止访问该 Web 地址。代理具有不同的网址，因此可以访问。但是，代理能够访问该 Web 地址，因为它位于防火墙之外。它将要访问的网页中的 HTML 代码发送到您的计算机。

将代理视为中间人。它会为您提供所需的内容，然后将其发送给您，而无需您直接访问网页并警告防火墙。

# selenium - org.openqa.selenium.internal.SocketLock 异常

> ID：10243070
> 
> 赞同：0
> 
> 时间：2012-04-20T08:53:21.787
> 
> 标签：selenium

我正在使用常春藤进行依赖管理。我现在收到以下异常，突然出现了这个异常，但在它正常工作之前..

java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V 在 org.openqa.selenium.remote.internal。 HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:64) at org.openqa.selenium.remote.internal.HttpClientFactory.(HttpClientFactory.java:50) at org.openqa.selenium.remote.HttpCommandExecutor.(HttpCommandExecutor.java:111) at org .openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:78) at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:187) at org.openqa.selenium.remote.RemoteWebDriver.( RemoteWebDriver.java:93) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:142) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:88) 在 com.ensarm.crawler.web.browser.FirefoxBrowser.initialize(FirefoxBrowser.java:296) 在 com.ensarm.crawler.navigator.IpProxyNavigator.initialize(IpProxyNavigator.java:46) 在 com.ensarm.crawler.Crawler .run(Crawler.java:23) 在 java.lang.Thread.run(Thread.java:619)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:31:10.130

selenium 的 firefox 驱动程序没有修复[临时套接字问题](http://code.google.com/p/selenium/wiki/ScalingWebDriver)，这通常会导致上面的堆栈跟踪。ivy 可能会运行一些测试用例，如果您关闭这些用例，将解决这个特定问题。

# https - HTTPS 是否应该用于所有涉及授权的调用

> ID：10243075
> 
> 赞同：0
> 
> 时间：2012-04-20T08:53:46.763
> 
> 标签：https

通常使用 HTTPS 进行身份验证，因此无法嗅探来自客户端的身份验证详细信息。但是，一旦用户登录，随后对 Web 应用程序的调用就会传递某种身份验证 ID，然后 Web 应用程序将使用该身份验证 ID 进行授权，那不应该也是 HTTPS 吗？这在 Facebook 之类的东西中是如何完成的？使所有流量都使用 HTTPS 似乎更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:01:03.593

杰夫阿特伍德的回答：

[http://www.codinghorror.com/blog/2012/02/should-all-web-traffic-be-encrypted.html](http://www.codinghorror.com/blog/2012/02/should-all-web-traffic-be-encrypted.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:08:24.757

假设服务器可以处理它，我会更进一步，对**所有内容都**使用 SSL ，无论用户是否登录。

这样做的好处是窃听者甚至不知道用户是作为访客还是作为经过身份验证的用户访问您的站点/应用程序。它还使您不必决定何时使用 SSL，何时不使用。

# c# - 字符解析换行符 (C#)

> ID：10243079
> 
> 赞同：1
> 
> 时间：2012-04-20T08:53:56.420
> 
> 标签：c#, split, newline, string-parsing

问题很简单，但我想不出解决这个问题的方法。我的应用程序收到一个字符串（stringID），它是一个 ID 列表，可以是分隔的“;”+换行符，也可以只是换行符，如：

```
ID1;
ID2;
ID3; 
```

或者

```
ID1
ID2
ID3 
```

我想要的是获得一张包含所有这些 ID 的表格；

我试过 ：

```
string[] tabID = stringID.Split(';', char.Parse(Environment.NewLine)); 
```

和

```
string[] tabID = stringID.Split(';', '\r\n')); 
string[] tabID = stringID.Split(';','\n'); 
```

没有任何效果，有人可以帮助我吗？多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:56:07.910

使用 StringReader 类及其方法 ReadLine 单独读取每一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:05:06.070

换行属性是一个字符串，长度可以是一两个字符，所以拆分时使用字符串。使用该`RemoveEmptyEntries`选项，否则您将获得分号和换行符之间的空字符串。

```
string[] tabID = stringID.Split(
  new string[] { ";", Environment.NewLine },
  StringSplitOptions.RemoveEmptyEntries
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T08:56:19.953

这应该有效：

```
 string [] split = words.Split(new Char [] {';','\n'}); 
```

[Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)有一个重载，它需要`char[]`许多分隔符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T09:05:31.517

尝试：

```
String test = "ID1;ID2;ID3;";
String[] testarr = test.Split(';'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T09:04:54.543

试试这个：

```
string[] tabID = stringID.Split(new Char[] { ';', '\n', '\r'},
                            StringSplitOptions.RemoveEmptyEntries); 
```

# ruby-on-rails - 在 many_to_many 关联范围内？

> ID：10243087
> 
> 赞同：0
> 
> 时间：2012-04-20T08:54:12.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这种关系

```
class House
 has_many :apartments
end 

class Apartments
 belongs_to :house
 has_many :category_join_table
 has_many :categories, :through => :category_join_table
end 
```

我在我的房屋模型中制作了一个范围方法，目的是“仅显示带公寓的房屋”

```
scope :with_apartments, lambda { joins(:appartments).group('appartments.id').uniq { |h| h[:id] }} 
```

所以我可以在控制器逻辑中制作 house.with_apartments。这很好用，所以我只在页面上得到带公寓的房子。没有显示没有公寓的房子。

但现在我想与我的类别模型（many_to_many）建立关联。所以“只显示带有公寓和类别 = X 的房子”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:13:35.273

试试这个：

```
# in category.rb

has_many :category_join_table
has_many :apartments, :through => :category_join_table
has_many :houses, :through => :apartments 
```

# iphone - 如何制作 iPhone 时间表应用程序

> ID：10243093
> 
> 赞同：0
> 
> 时间：2012-04-20T08:54:50.397
> 
> 标签：iphone, ios, xcode, uitableview

我想创建一个 Iphone 应用程序来查看我的健身房的时间表，我目前正在学习目标 C。这是一个简单的应用程序来查看现在的时间表。

带有标题（一天中的时间）和静态左行的界面`UITableView`显示一周中的哪一天，中间的数据（健身房课程信息），因此用户可以向右/向左和向上/向下滚动。

类似：“iPhone 上的 Sky 应用程序” [http://www.ko-muaythai.com/appview.jpg](http://www.ko-muaythai.com/appview.jpg)（我还不能上传图片。）

我知道如何在我的`UITableView`使用中加载数据，`JSON`并且我正在关注来自的教程

[http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizo](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1) ​​ntal-tables-like-the-pulse-news-app-part -1 制作水平表格，

但是我需要一些关于如何制作标题和左行的指导，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:05:19.010

如果您想拥有静态标题和左侧列，我将创建两个单独的视图控制器，一个用于标题，一个用于左列，并将它们放置在具有通用可滚动磁贴视图控制器的主视图控制器（作为子视图）中。

# objective-c - 从数组中读取 int 值 - 加载时顺序不正确

> ID：10243096
> 
> 赞同：0
> 
> 时间：2012-04-20T08:55:04.017
> 
> 标签：objective-c, xcode, arrays

如果有人可以提供帮助，我在从数组中读取文件 int 值时遇到问题。这些 int 用于更改 UILables 在不同视图上的值。直到 objectAtIndex:29 之后一切正常，订单不正确并且缺少值，我不知道为什么。我试图为每个视图创建一个数组，但这不起作用。我使用的代码如下，如果有人能看到问题，我将不胜感激。

```
-(NSString *) saveFilePath{

    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    return [[path objectAtIndex:0] stringByAppendingPathComponent:@"savefilee.plist"];
}

-(void) applicationDidEnterBackground: (UIApplication *) application{

    NSArray *values = [[NSArray alloc] initWithObjects:
    [NSNumber numberWithInt:smaWin],
    [NSNumber numberWithInt:medWin],
    [NSNumber numberWithInt:larWin],
    [NSNumber numberWithInt:halfBotWin],
    [NSNumber numberWithInt:fullBotWin],
    [NSNumber numberWithInt:smaSpi],
    [NSNumber numberWithInt:larSpi],
    [NSNumber numberWithInt:alcPop],
    [NSNumber numberWithInt:hp],
    [NSNumber numberWithInt:hc],
    [NSNumber numberWithInt:bb],
    [NSNumber numberWithInt:addUnit],
    [NSNumber numberWithInt:borg],
    [NSNumber numberWithInt:savedTenValue],
    [NSNumber numberWithFloat:addOne],
    [NSNumber numberWithFloat:pinCid],
    [NSNumber numberWithFloat:pinLag],//nil];

    [NSNumber numberWithInt:svdsmaWin],
    [NSNumber numberWithInt:svdmedWin],
    [NSNumber numberWithInt:svdlarWin],
    [NSNumber numberWithInt:svdhalfBotWin],
    [NSNumber numberWithInt:svdfullBotWin],
    [NSNumber numberWithInt:svdsmaSpi],
    [NSNumber numberWithInt:svdlarSpi],
    [NSNumber numberWithInt:svdalcPop],
    [NSNumber numberWithInt:svdhp],
    [NSNumber numberWithInt:svdhc],
    [NSNumber numberWithInt:svdbb],
    [NSNumber numberWithInt:svdaddUnit],
    [NSNumber numberWithInt:savedTenValue],
    [NSNumber numberWithInt:warningmessage],
    //[NSNumber numberWithInt:continueall],
    [NSNumber numberWithInt:continueFemale],
    [NSNumber numberWithInt:continueMale],
    [NSNumber numberWithFloat:svdpinLag],
    [NSNumber numberWithFloat:svdpinCid],
    [NSNumber numberWithFloat:svdTotal],

    [NSNumber numberWithInt:malesmaWin],

    [NSNumber numberWithInt:malemedWin],
    [NSNumber numberWithInt:malelarWin],
    [NSNumber numberWithInt:malehalfBotWin],
    [NSNumber numberWithInt:malefullBotWin],
    [NSNumber numberWithInt:malesmaSpi],
    [NSNumber numberWithInt:malelarSpi],
    [NSNumber numberWithInt:malealcPop],
    [NSNumber numberWithInt:malehp],
    [NSNumber numberWithInt:malehc],
    [NSNumber numberWithInt:malebb],
    [NSNumber numberWithInt:maleaddUnit],
    [NSNumber numberWithInt:maleborg],
    [NSNumber numberWithInt:malesavedTenValue],
    [NSNumber numberWithInt:maleaddOne],
    [NSNumber numberWithInt:malepinLag],
    [NSNumber numberWithInt:malepinCid],
    [NSNumber numberWithInt:malehalfpinCid],
    [NSNumber numberWithInt:malehalfpinLag],
    [NSNumber numberWithFloat:maleaddOne],
    [NSNumber numberWithInt:malesvdsmaWin],

    [NSNumber numberWithInt:malesvdmedWin],
    [NSNumber numberWithInt:malesvdlarWin],
    [NSNumber numberWithInt:malesvdhalfBotWin],
    [NSNumber numberWithInt:malesvdfullBotWin],
    [NSNumber numberWithInt:malesvdsmaSpi],
    [NSNumber numberWithInt:malesvdlarSpi],
    [NSNumber numberWithInt:malesvdalcPop],
    [NSNumber numberWithInt:malesvdhp],
    [NSNumber numberWithInt:malesvdhc],
    [NSNumber numberWithInt:malesvdbb],
    [NSNumber numberWithInt:malesvdaddUnit],
    [NSNumber numberWithInt:malewarningmessage],
    [NSNumber numberWithInt:continueall],
    [NSNumber numberWithInt:continueFemale],
    [NSNumber numberWithInt:continueMale],
    [NSNumber numberWithInt:malesvdTotal],
    [NSNumber numberWithInt:malesvdpinLag],
    [NSNumber numberWithInt:malesvdpinCid],

    [NSNumber numberWithInt:ukOrUsa],
    [NSNumber numberWithInt:ukonce],
    [NSNumber numberWithInt:usaonce],
    [NSNumber numberWithInt:maleukonce],
    [NSNumber numberWithInt:maleusaonce],nil];

    [values writeToFile:[self saveFilePath] atomically:YES];
    [values release];

}

- (void)viewDidLoad {

    //NSNumber *num = [[NSNumber alloc]initWithInt:count];
    NSString *myPath = [self saveFilePath];

    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];
    if (fileExists) {
        NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];
        smaWin = [[values objectAtIndex:0] intValue];
        medWin = [[values objectAtIndex:1] intValue];
        larWin = [[values objectAtIndex:2] intValue];
        halfBotWin = [[values objectAtIndex:3] intValue];
        fullBotWin = [[values objectAtIndex:4] intValue];
        smaSpi = [[values objectAtIndex:5] intValue];
        larSpi = [[values objectAtIndex:6] intValue];
        alcPop = [[values objectAtIndex:7] intValue];
        hp = [[values objectAtIndex:8] intValue];
        hc = [[values objectAtIndex:9] intValue];
        bb = [[values objectAtIndex:10] intValue];
        addUnit = [[values objectAtIndex:11] intValue];
        borg = [[values objectAtIndex:12] intValue];
        savedTenValue  = [[values objectAtIndex:13] intValue];
        addOne = [[values objectAtIndex:14] floatValue];
        pinCid = [[values objectAtIndex:15] floatValue];
        pinLag = [[values objectAtIndex:16] floatValue];

        svdsmaWin = [[values objectAtIndex:17] intValue];
        svdmedWin = [[values objectAtIndex:18] intValue];
        svdlarWin = [[values objectAtIndex:19] intValue];
        svdhalfBotWin = [[values objectAtIndex:20] intValue];
        svdfullBotWin = [[values objectAtIndex:21] intValue];
        svdsmaSpi = [[values objectAtIndex:22] intValue];
        svdlarSpi = [[values objectAtIndex:23] intValue];
        svdalcPop = [[values objectAtIndex:24] intValue];
        svdhp = [[values objectAtIndex:25] intValue];
        svdhc = [[values objectAtIndex:26] intValue];
        svdbb = [[values objectAtIndex:27] intValue];
        svdaddUnit = [[values objectAtIndex:28] intValue];
        warningmessage = [[values objectAtIndex:29] intValue];
        //continueall = [[values objectAtIndex:30] intValue];
        continueFemale = [[values objectAtIndex:31] intValue];
        continueMale = [[values objectAtIndex:32] intValue];
        svdpinLag = [[values objectAtIndex:33] floatValue];
        svdpinCid = [[values objectAtIndex:34] floatValue];
        svdTotal = [[values objectAtIndex:35] floatValue];

        malesmaWin = [[values objectAtIndex:36] intValue];
        malemedWin = [[values objectAtIndex:37] intValue];
        malelarWin = [[values objectAtIndex:38] intValue];
        malehalfBotWin = [[values objectAtIndex:39] intValue];
        malefullBotWin = [[values objectAtIndex:40] intValue];
        malesmaSpi = [[values objectAtIndex:41] intValue];
        malelarSpi = [[values objectAtIndex:42] intValue];
        malealcPop = [[values objectAtIndex:43] intValue];
        malehp = [[values objectAtIndex:44] intValue];
        malehc = [[values objectAtIndex:45] intValue];
        malebb = [[values objectAtIndex:46] intValue];
        maleaddUnit = [[values objectAtIndex:47] intValue];
        maleborg = [[values objectAtIndex:48] intValue];
        malesavedTenValue = [[values objectAtIndex:49] intValue];
        maleaddOne = [[values objectAtIndex:50] intValue];
        malepinLag = [[values objectAtIndex:51] intValue];
        malepinCid = [[values objectAtIndex:52] intValue];
        malehalfpinLag = [[values objectAtIndex:53] intValue];
        malehalfpinCid = [[values objectAtIndex:54] intValue];

        malesvdsmaWin = [[values objectAtIndex:55] intValue];
        malesvdmedWin = [[values objectAtIndex:56] intValue];
        malesvdlarWin = [[values objectAtIndex:57] intValue];
        malesvdhalfBotWin = [[values objectAtIndex:58] intValue];
        malesvdfullBotWin = [[values objectAtIndex:59] intValue];
        malesvdsmaSpi = [[values objectAtIndex:60] intValue];
        malesvdlarSpi = [[values objectAtIndex:61] intValue];
        malesvdalcPop = [[values objectAtIndex:62] intValue];
        malesvdhp = [[values objectAtIndex:63] intValue];
        malesvdhc = [[values objectAtIndex:64] intValue];
        malesvdbb = [[values objectAtIndex:65] intValue];
        malesvdaddUnit = [[values objectAtIndex:66] intValue];

        malewarningmessage = [[values objectAtIndex:67] intValue];
        continueall = [[values objectAtIndex:68] intValue];
        continueFemale = [[values objectAtIndex:69] intValue];
        continueMale = [[values objectAtIndex:70] intValue];

        malesvdTotal = [[values objectAtIndex:71] intValue];
        malesvdpinLag = [[values objectAtIndex:72] intValue];
        malesvdpinCid = [[values objectAtIndex:73] intValue];

        ukOrUsa = [[values objectAtIndex:74] intValue];
        ukonce = [[values objectAtIndex:75] intValue];
        usaonce = [[values objectAtIndex:76] intValue];
        maleukonce = [[values objectAtIndex:77] intValue];
        maleusaonce = [[values objectAtIndex:78] intValue];

        [values release]; 
    }

    UIApplication *myApp = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector (applicationDidEnterBackground:)name:UIApplicationDidEnterBackgroundNotification object:myApp];

    if (continueMale == 0) {
        UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"Please read App info." message:@"Select the 'Info' button below." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [myAlert show];
        [myAlert release];
        continueMale = 1;
        [super viewDidLoad];

    }

    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:57:19.397

您`,nil];`在索引 36 处的项目之后。删除它，其余的数组元素应该正确插入。

# java - 蚀。恢复项目“.settings”目录

> ID：10243105
> 
> 赞同：1
> 
> 时间：2012-04-20T08:55:37.357
> 
> 标签：java, eclipse

不小心我从 Java 项目所在的目录中删除了项目“.settings”文件夹。在这个目录中，有如下文件：

```
org.eclipse.jdt.core.prefs
org.eclipse.m2e.core.prefs
org.eclipse.wst.common.project.facet.core.xml 
```

ETC..

我可以恢复它们吗？现在 Eclipse 在标有注释的方法时显示错误`@Override`（Eclipse 不明白我实现了一些接口）。它不是完整的错误列表。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T11:23:43.677

我曾经也遇到过这个问题。有一个解决方案。

```
 Just delete the project from Eclipse workspace and import it again.
    the settings will be created for the project. 
```

> 注意：不要从磁盘中删除它（当你尝试删除时它会要求，所以不要选中复选框）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:09:05.060

除非您有备份或从某个构建系统生成 Eclipse 项目设置，否则您应该在 Eclipse 中再次手动设置项目首选项（打开项目属性并查看设置）。例如，注释的问题是编译器的 Java 版本设置不正确（您需要 java 1.6 或更高版本）。

也许您的项目非常简单，然后您可以使用适当的设置创建新项目并将源代码从损坏的项目复制到新项目。

如果您想避免与工作区设置类似的情况，您可以导出它们并备份生成的文件（请参阅文件/导出/常规/首选项）。

从构建配置生成 Eclipse 项目通常非常方便（例如所有 Maven、Gradle、Leiningen 都可以这样做）。除非您需要构建系统尚不支持的 Eclipse 项目中的某些特定设置，否则此方法效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:58:38.350

它需要很多时间。您应该删除所有 eclipse 文件并再次导入/创建该项目。有一次我遇到了一些问题，我花了 3 个小时来恢复。我尝试使用硬盘恢复工具进行恢复，然后手动检查了一些参数。但结果我没有解决所有问题，因为在我的案例中文件已损坏。

# jquery - 没有锁定 IE 的同步 jquery $.ajax？

> ID：10243107
> 
> 赞同：3
> 
> 时间：2012-04-20T08:55:52.920
> 
> 标签：jquery, ajax, asynchronous

花了一些时间试图实现这一点，并有一个我认为在 Firefox 中运行良好的解决方案，但是在 IE 中进行测试时发现使用 async: false 会导致浏览器被锁定（停止响应并似乎已冻结）通话时长。

要求基本如下。我提供了一系列用户可以检查的复选框。在特定时间，我调用我的函数“selectedSeriesData()”，该函数用于一个接一个地向我的服务发送请求，获取请求的数据。我特别选择使用同步，以便在方法执行时向浏览器输出状态消息和警告。

例如。“加载数据 1/3”，然后“加载数据 2/3”，“加载数据 3/3”

当然，我现在知道这会锁定某些浏览器，因此 IE 中的体验不仅会锁定浏览器，而且我尝试显示的任何消息都不会显示。是否有任何简单的 doEvents 之类的动作，我可以在每次 ajax 调用后调用，或者只是重组我的 ajax 调用的问题。如果是这样的话，根据我的要求有什么实施建议吗？

以下是代码的简化摘录以供参考。

```
function selectedSeriesData() {

    var seriesData = [];
    var index = 0;

    $.each($("input[name='idCheckBox']:checked"), function () {

        var id = $(this).val();

        $("#loadingMessage").text("Loading " + id + "...");

            $.ajax({
                type: 'POST',
                async: false,
                url: '<%: loadSeriesDataPath %>',
                dataType: 'json',
                data: {
                    Id: id
                },
                success: function (data) {
                    seriesData[index] = data;
                    index++;
                },
                error: function (xhr, ajaxOptions, error) {
                    $("#warnings ul").append('<li>A communication error occured while attempting to load data for the series.</li>');

                }
            });
        }
    });
    return seriesData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:10:33.400

您可以使用[jQuery Deferred 对象](http://api.jquery.com/category/deferred-object/)继续使用异步请求，然后在所有请求完成后“加入”结果。

```
function selectedSeriesData(cb) {
    var reqs = [];
    $("#loadingMessage").text("Loading...");
    $("input[name='idCheckBox']:checked").each(function () {
        var id = $(this).val();

        var req = $.ajax({
            type: 'POST',
            url: '<%: loadSeriesDataPath %>',
            dataType: 'json',
            data: {
                Id: id
            },
            error: function(xhr, ajaxOptions, error) {
                $("#warnings ul").append('<li>A communication error occured while attempting to load data for the series.</li>');

            }
        });
        reqs.push(req);
    });
    $.when(reqs).done(function() {
        cb($.makeArray(arguments));
    });
} 
```

现在，您只需将回调传递给您的函数，该函数将在所有成功完成后立即接收包含来自 AJAX 请求的所有结果的数组。

注意：`$.when`关于它是否接受包含延迟的单个数组的文档并不清楚。如果它不起作用，请尝试`$.when.apply($, reqs)`代替`$.when(reqs)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T16:32:29.127

我认为我的问题的最佳答案是......你做错了。正如建议的那样，我对 $.when 没有任何运气（也许是由于我对它的理解），所以我自己想出了以下答案。

基本上，使用回调来实现一种递归排队。这对你们所有人来说可能听起来很明显，但对我来说是新的，我认为那里有经验的 jqueryer 会同意我的实现（如果我做得对，请告诉我！）

首先，不是循环通过我的复选框并发出 ajax 请求，而是建立一个请求数组。这消除了从原始方法返回结果的需要，并开始了一系列方法执行，最终导致所需的结果。

```
function selectedSeriesData() {

    var requests = [];

    $.each($("input[name='somethingCheckBox']:checked"), function () {

        var id = $(this).attr('value');

        var request = {
            id: id
        };

        requests.push(request);

    });

    loadRequests(requests);
} 
```

从请求数组中，开始调用 loadRequests，它初始化递归回调实现以从我的服务加载数据。

```
function loadRequests(requests)
{
    $("#loader").show();
    var seriesData = [];
    loadRequestAt(requests, 0, seriesData);
} 
```

调用的递归方法是 loadRequestAt，它跟踪请求数组、加载此迭代的特定索引以及在调用方法时添加的 seriesData。Anon 方法 Success 用于构建我的 seriesData，Error 用于报告错误，而 Complete 最重要的是用于开始下一次请求迭代，或者如果所有请求都已发出，则将结果呈现到屏幕上。

```
function loadRequestAt(requests, loadAtIndex, seriesData) {
    var currentRequest = requests[loadAtIndex];

    $("#loadingMessage").text("Loading " + currentRequest.id + "...");

    $.ajax({
        type: 'POST',
        url: '<%: loadSeriesDataPath %>',
        dataType: 'json',
        data: {
            Id: currentRequest.id
        },
        success: function(data) {
            seriesData.push(data);
        },
        error: function(xhr, ajaxOptions, error) {
            $("#warnings ul").append('<li>A communication error occured while attempting to load ' + currentRequest.id'.</li>');
        },
        complete: function() {
            var nextIndex = loadAtIndex + 1;
            if (nextIndex < requests.length) {
                loadRequestAt(requests, nextIndex, seriesData);
            } else {
                $("#loader").hide();
                renderResults(seriesData);
            }
        }
    });
} 
```

重要的经验教训。使用 AJAX（异步 JavaScript 和 XML）时，请务必使用异步调用。一定要使用提供的匿名回调方法来实现渐进式排队功能（我确定有一个可接受的名称，但我不确定）。希望我的学习步骤可以帮助那些不熟悉 jquery 和 ajax 调用的人。谢谢！

# android - Android，如何显示有意图的图像地址数组？

> ID：10243113
> 
> 赞同：0
> 
> 时间：2012-04-20T08:56:19.977
> 
> 标签：android, image, android-intent, navigation

我有一个数组，其中包含例如 20 个图像的 URL 地址。当用户单击按钮时，我需要以全屏模式显示图像，如果用户触摸屏幕并且他的手指指向右侧或左侧，则显示下一个或上一个图像（例如从图库加载图像并导航到右侧或左侧）。

是否可以通过意图来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:00:40.407

是的，你可以做到，在[Android Universal Image loader](https://github.com/nostra13/Android-Universal-Image-Loader)中找到 Gallery 示例。

# web-services - 如何检查在 J2EE 平台上运行的应用程序的 Web 服务的可用性检查？

> ID：10243115
> 
> 赞同：0
> 
> 时间：2012-04-20T08:56:25.170
> 
> 标签：web-services, jakarta-ee

如何检查在 J2EE 平台上运行的应用程序的 Web 服务的可用性检查？基础设施人员认为只是 URL 检查，但我认为还不够，最好在 Web 服务内部调用“虚拟代码”。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:43:53.050

您有很多选择，但我认为要实际检查，您可以创建一个虚拟方法并继续调用它以检查它是否已启动并运行，即使我有类似的情况要解决。最好是执行上述操作，否则您可以使用 ping 或 httpWebResponse 和 HttpWebRequest 检查。请参阅之前发布的这篇文章： [如何在不使用 ping 的情况下检查 Web 服务是否已启动并运行？](https://stackoverflow.com/q/10206951/1278315)并[检查网络服务的方法是否正在连接](https://stackoverflow.com/q/9923846/1278315)

# android - eclipse IDE Android 开发问题

> ID：10243118
> 
> 赞同：0
> 
> 时间：2012-04-20T08:56:38.727
> 
> 标签：android, eclipse, ide

长期以来，我一直在使用 Eclipse EE IDE 进行 android 开发，今天我面临一个问题：IDE 无法使用模拟器进行调试；它只启动应用程序，然后什么也不做。同时我查看了LogCat，发现：

```
W/ActivityThread(  475): Application com.onlineeducation is waiting for the debugger on port 8100...
I/System.out(  475): Sending WAIT chunk
I/dalvikvm(  475): Debugger is active  
I/System.out(  475): Debugger has connected
I/System.out(  475): waiting for debugger to settle...
I/System.out(  475): waiting for debugger to settle...
I/System.out(  475): waiting for debugger to settle...
I/System.out(  475): waiting for debugger to settle...
I/System.out(  475): debugger has settled (1478)
I/ActivityManager(   61): Displayed com.onlineeducation/.OnlineEducationActivity: +9s764ms
W/ActivityManager(   61): Launch timeout has expired, giving up wake lock! 
```

# wpf - 将用户控件绑定到 WPF ComboBox？

> ID：10243120
> 
> 赞同：0
> 
> 时间：2012-04-20T08:56:50.570
> 
> 标签：wpf, binding, user-controls, combobox

我想将用户控件绑定为 ComboBox 的一项，这可能吗？

我想得到一个像这样的组合框：

![组合框](../Images/254726b4714770a14bb1a7051918e92b.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:15:00.403

您是否希望组合框中的所有项目都像您的图片一样呈现？所以如果你有 4 个项目，它应该是这样的？

![在此处输入图像描述](../Images/3394e914d136a806b79b9e909815a0bc.png)

如果是，最简单的方法是为您想在组合框中显示的对象类型创建数据模板。

如果不是，您应该指定您的问题

# android - Android子网扫描

> ID：10243122
> 
> 赞同：4
> 
> 时间：2012-04-20T08:57:12.327
> 
> 标签：android, process, ping, subnet, network-scan

在我的应用程序中，我需要扫描本地子网 (192.168.1.*) 以收集所有连接设备的 MAC 地址列表。

我目前使用以下策略：

1.  同时启动 255 个 ping 命令`Runtime.exec("ping -c 1 <addr>")`
2.  在每个返回的进程上使用`waitFor()`以收集退出代码
3.  关闭进程的输入流并销毁它们
4.  读取`/proc/net/arp`文件并解析 MAC 地址

在大多数情况下，这非常有效并提供了快速扫描。

但是在某些设备上（例如 android 1.5，有时在 >=4.0 上），执行会在进程创建时卡住（在成功启动几个之后），并且无法终止正在运行的线程。

您看到我可以尝试解决此问题的任何方法吗？或者任何其他不会花费太长时间的策略？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T14:55:06.507

这可以通过使用运行[INetAddress.isReachable()](https://developer.android.com/reference/java/net/InetAddress.html#isReachable(int))方法的线程池来解决（而不是`ping`在本机进程中运行命令）。

```
private static final int NB_THREADS = 10;

public void doScan() {
    Log.i(LOG_TAG, "Start scanning");

    ExecutorService executor = Executors.newFixedThreadPool(NB_THREADS);
    for(int dest=0; dest<255; dest++) {
        String host = "192.168.1." + dest;
        executor.execute(pingRunnable(host));
    }

    Log.i(LOG_TAG, "Waiting for executor to terminate...");
    executor.shutdown();
    try { executor.awaitTermination(60*1000, TimeUnit.MILLISECONDS); } catch (InterruptedException ignored) { }

    Log.i(LOG_TAG, "Scan finished");
}

private Runnable pingRunnable(final String host) {
    return new Runnable() {
        public void run() {
            Log.d(LOG_TAG, "Pinging " + host + "...");
            try {
                InetAddress inet = InetAddress.getByName(host);
                boolean reachable = inet.isReachable(1000);
                Log.d(LOG_TAG, "=> Result: " + (reachable ? "reachable" : "not reachable"));
            } catch (UnknownHostException e) {
                Log.e(LOG_TAG, "Not found", e);
            } catch (IOException e) {
                Log.e(LOG_TAG, "IO Error", e);
            }
        }
    };
} 
```

# html - 为什么 contenteditable 不是一种风格？

> ID：10243123
> 
> 赞同：26
> 
> 时间：2012-04-20T08:57:15.497
> 
> 标签：html, css, contenteditable

我最近在一个网页上摆弄，`contenteditable`当我需要用它设置大量`span`标签时感到恼火（我最终使用 JavaScript 来做这件事）。如果我可以通过 CSS 设置它...

有谁知道为什么`contenteditable`被设计为属性而不是样式的原因？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-20T09:01:52.390

大多数人会争辩说，它`contentEditable`定义了行为，而不是风格（这是真的）。

WebKit 有一个类似于`contentEditable`:的 CSS 属性[`-webkit-user-modify`](http://css-infos.net/property/-webkit-user-modify)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-03-24T07:55:30.677

尝试

```
span {
    -webkit-user-modify: read-write;
    -moz-user-modify: read-write;
    user-modify: read-write;
} 
```

它适用于 Firefox、Chrome。[您可以找到有关用户修改的](https://developer.mozilla.org/en-US/docs/Web/CSS/-moz-user-modify)更多信息

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-20T09:01:41.873

用户是否编辑某些内容的能力与演示无关。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-20T09:03:06.947

样式是可选的；你可以（理论上）在没有 CSS 的情况下渲染每个页面，它应该仍然可以正常工作。事实上，这就是许多纯文本浏览器或纯音频浏览器所做的。

`contentEditable`改变元素的*行为*。不使用样式但解释 JavaScript 的浏览器仍应受益于该属性。

# ruby-on-rails - Ruby 路由和自定义操作

> ID：10243127
> 
> 赞同：1
> 
> 时间：2012-04-20T08:57:35.477
> 
> 标签：ruby-on-rails, devise, routes, ruby-1.8.7

我正在尝试将 Devise 和 Cancan 合并到一个网络应用程序中。我希望具有 :role => "admin" 的用户能够删除用户，而 Devise 的销毁操作只允许用户删除自己，因此我为此创建了一个自定义操作。（为了覆盖插件的控制器文件，我已将注册控制器复制到 app/controllers/registrations_controller.rb。）

这是我在 registrations_controller.rb 中的自定义操作：

```
def destroy_user_account
    @user = User.find_by_id(params[:user])        
    @user.destroy
    redirect_to profiles_path, :flash => { :success => "User deleted!" }
    authorize! :destroy, User, :message => "You don't have authorisation to delete this user."          
end 
```

这是我尝试使用它的方式，在您查看用户个人资料的页面上的链接中。（我设置了一些东西，以便每个用户都有一个配置文件；配置文件是您在前端看到的。配置文件会在用户注册时在配置文件表中自动创建。）

```
 <% if can? :update, @profile %>
        | <%= link_to 'Edit Profile', edit_profile_path(@profile) %>
        | <%= link_to 'Edit Settings', edit_settings_path %>
    <% end %>               
    <% if can? :destroy, @profile.user %>
        | <%= link_to "Delete User", destroy_user_account(@profile.user), 
                        :class => "delete", 
                        :confirm => "Are you sure?",
                        :title => "Delete #{@profile.user.name}"
    %>
    <% end %> 
```

我的测试显示 2 个我无法解决的故障：

> 1) ProfilesController GET show 以管理员身份登录时应该有一个链接来编辑配置文件 Failure/Error: get :show, :id => @profile ActionView::Template::Error: undefined method `destroy_user_account' for #<#<Class:0x105b474a8>:0x1057f32e8> # ./app/views/profiles/show.html.erb:41:in`_app_views_profiles_show_html_erb___917863454_2195331000_0' # ./spec/控制器/profiles_controller_spec.rb:143
> 
> 2) ProfilesController GET show 以管理员身份登录时应该有一个删除用户帐户的链接（使用注册控制器中的 destroy_user_account 操作）失败/错误：get :show, :id => @profile ActionView::Template::错误：未定义的方法`destroy_user_account' for #<#<Class:0x105b474a8>:0x105806d20> # ./app/views/profiles/show.html.erb:41:in`_app_views_profiles_show_html_erb___917863454_2195331000_0' # ./spec/controllers/profiles_controller_spec.rb:148

此外，当我在浏览器中尝试时，单击“删除用户”链接会出现以下错误：

> 路由错误
> 
> 没有路由匹配“/destroy-user-account/2”

以下是应涵盖此的路线：

> devise_for :users, #:path => '', :skip => [ :confirmations, :passwords, :registrations ], :controllers => { :registrations => "registrations" } 做
> 
> ```
> # Routes for ACCOUNT REGISTRATIONS
> get     "join",                           :to => "registrations#new",    :as => :new_user_registration
> post    "join",                           :to => "registrations#create", :as => :user_registration
> get     "settings/account",               :to => "registrations#show",   :as => :settings
> get     "settings/account/edit",          :to => "registrations#edit",   :as => :edit_settings
> put     "settings/account",               :to => "registrations#update", :as => :update_settings
> delete  "close-my-account/:id",           :to => "registrations#destroy", :as => :close_my_account
> delete  "destroy-user-account/:id",      :to => "registrations#destroy_user_account", :as => :destroy_user_account 
> ```

谁能帮助我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:07:42.100

在浏览器中，它与路由不匹配，因为您正在发送`GET`请求，但路由仅匹配`DELETE`请求。测试失败，因为路由给出了名称`destroy_user_account_path`而不是`destroy_user_account`.

尝试：

```
<%= link_to "Delete User", destroy_user_account_path(@profile.user), 
                        :class => "delete", 
                        :confirm => "Are you sure?",
                        :title => "Delete #{@profile.user.name}"
                        :method => :delete
%> 
```

# javascript - 获取复选框中选中的元素的名称

> ID：10243128
> 
> 赞同：0
> 
> 时间：2012-04-20T08:57:40.347
> 
> 标签：javascript, jquery, html

我有一个动态创建的 html 表。根据搜索结果，每次搜索的行数和列数会有所不同。这就是我创建表格的方式

```
for(count = 0 ; count < facetList.length ;){
    facetsString+="<div id='test'>";
    facetsString+="<table id='facetTable' border='1' width='830px' style='margin-left:30px; margin-top:30px; font-family:Tahoma; '>";
    for( var i=0 ; i< 6 && count < facetList.length ; i++  ){
        facetsString+="<tr>";
        for(var j=0;j<4 && count < facetList.length ; j++){

            facetsString+="<td><form><input type='checkbox'></form>&nbsp;&nbsp;"+facetList[count].term+  "(" + facetList[count].count + ")" + "</td>";

            count++;
        }
    facetsString+="</tr>";
    }
facetsString+="</table>";

facetsString+="</div>";
}

return facetsString;
}; 
```

现在表格中的每个条目之前都有一个复选框..我想显示其框被选中的元素的名称...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:11:29.110

这是出错的代码。

```
function checkCount()
{

 var allVals = new Array();
    var newVals = new Array();

    $('#panel :input[type=checkbox]:checked').each(function() 
    {
        $("#slctFacet").empty();
         newVals.push($(this).parent().text());
         allVals.push($(this).val());

    });
    //alert(allVals);
   // alert(newVals);

    var fctArrayLength=newVals.length;
    //alert(fctArrayLength);
    if(fctArrayLength==0)
        {
        $("#slctFacet").empty();
        }
    else
        {
            for(var i=0;i<fctArrayLength;i++)
                {
            $("#slctFacet").append(newVals[i]);

                }
        }
}
$(":checkbox").click(checkCount);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:15:33.440

```
// Get the form from its name
var form = document.forms.formName,
// Prepare an array to get the values
    vals = []

// For each element in the form
[].forEach.call( form.elements, function ( el ) {

    // Check if it's a checkbox. If it is, check if it's checked
    if ( el.type === 'checkbox' && el.checked === true ) {

        // Add the value to the "vals" array
        vals.push( el.value )
    }
} )

// Now all the values are available in the "vals" array
console.log( vals ) 
```

# html - CSS 960 网格系统布局问题

> ID：10243129
> 
> 赞同：0
> 
> 时间：2012-04-20T08:57:41.153
> 
> 标签：html, css, 960.gs

我一直在尝试使用 class="grid_x alpha omega clear 等多年......但无论我尝试了什么，我都无法让登录框@http://ci2.totalshopuk.com/login[正确](http://ci2.totalshopuk.com/login)排列。任何人都能够看到我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:09:50.743

尝试更改`.blockheader { padding: 2px; }`为`.blockheader { padding: 1px; }` 对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:12:05.663

这两个元素都以 div 为中心。您需要将标签放入或标签中，以控制其在父 div 中的位置。然后相应地设置宽度以使其对齐。

网格系统并不总是设置表单元素宽度的最佳选择。

# sharepoint - 将列表实例部署到 SharePoint 2010 错误“无法找到列表的默认新表单”

> ID：10243131
> 
> 赞同：2
> 
> 时间：2012-04-20T08:57:59.660
> 
> 标签：sharepoint

我知道，通过功能部署列表实例时遇到问题，这应该是一项非常重要的任务。我遇到过很多相同问题的帖子，但没有解决方案。

*   我在 UI 中创建了包含内容和视图的列表。
*   将站点模板导出为 WSP。
*   将列表实例、页面模块和属性包导入 Visual Studio。

*   复制到我的新解决方案中。
*   将列表实例部署为站点范围的功能。

列表可以很好地部署内容和视图。但是，我在尝试添加新项目时收到以下错误：“无法找到列表的默认新表单”。这同样适用于编辑项目。

奇怪的是，通过 web 范围的功能进行部署工作得很好。

我在想这可能是一件很简单的事情，但看不到它也找不到令人满意的解决方案。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:49:17.310

今天下午我发现了几乎同样的事情，并解决了它。由于某种原因，schema.xml 有一个空的 Forms 标记。您需要用 Microsoft 描述的 stock forms 标签替换它 - 我在这里写了它；

[http://notes.jonbeckett.com/2012/04/20/missing-forms-schema-with-sharepoint-2010-visual-studio/](http://notes.jonbeckett.com/2012/04/20/missing-forms-schema-with-sharepoint-2010-visual-studio/)

我发现它的微软页面在这里；

[http://msdn.microsoft.com/en-us/library/ms459356.aspx](http://msdn.microsoft.com/en-us/library/ms459356.aspx)

# sql - 获取时隙列（SQL 查询）

> ID：10243132
> 
> 赞同：2
> 
> 时间：2012-04-20T08:58:01.737
> 
> 标签：sql, sql-server, database, sql-server-2008

我有这个表，其中包含一个包含 DateTime 值的 ScheduledTime 列；这些是 3 小时测试的开始时间。该列看起来像这样：

```
SELECT ScheduledTime from Schedule;

2012-03-16 16:34:36.000
2012-03-16 16:34:36.000
2012-03-16 16:34:36.000
2012-03-16 16:34:36.000
2012-03-16 16:34:36.000
2012-03-16 16:34:36.000
2012-03-16 16:34:36.000
2012-03-16 16:34:36.000
2012-03-20 09:14:48.000
2012-03-20 13:14:48.000
2012-03-20 17:14:48.000
2012-03-20 21:14:48.000
2012-04-14 17:13:19.000
2012-04-14 21:13:19.000
2012-04-15 01:13:19.000
2012-04-15 05:13:19.000
2012-04-15 09:13:19.000
2012-04-15 13:13:19.000
2012-04-15 17:13:19.000
2012-04-15 21:13:19.000
2012-04-16 01:13:19.000
2012-04-16 05:13:19.000
2012-04-16 13:13:19.000
2012-04-16 17:13:19.000
2012-04-17 01:13:19.000
2012-04-17 05:13:19.000
2012-04-17 13:13:19.000
2012-04-18 18:29:16.000
2012-04-19 15:48:12.000
2012-04-19 19:10:00.000
2012-04-19 23:47:00.000
2012-04-20 10:27:28.000
2012-04-20 17:27:00.000 
```

上面列出的日期时间值是 3 小时测试的开始时间。所以我需要获得下一个可用插槽进行 3 小时测试。如果它可以容纳在现有测试或 currentTime+1hr 中，则最好。

任务是生成一个列（比如 SlotsColumn），它保存从 ScheduledTime 列获得的 3 小时时隙的开始时间，并且 SlotsColumn 的值 > {fn Now()} 即 CurrentTime。

可选的是，如果它没有任何这样的值，它应该给 CurrentTime+1hr

使用 SQL Server 2008。

```
I have tried this:  
WITH rows AS 
        (
        SELECT  *, ROW_NUMBER() OVER (ORDER BY [ScheduledTime] ) AS rn 
        FROM    [dbo].[Schedule]  
        WHERE [ScheduledTime] IS NOT NULL               
        ) 
SELECT  TOP(1)
DATEADD(second,10800, mc.ScheduledTime) AS NextTime 
FROM    rows mc 
JOIN    rows mp   
ON      mc.rn = mp.rn - 1   
WHERE (DATEDIFF(SECOND, mc.ScheduledTime, mp.ScheduledTime) - 10800) >= 10800 
order by mc.ScheduledTime DESC 
```

查询返回未来一个有效开始时间的列表，前提是它存在。

对于上面的示例数据，它返回 '2012-04-20 03:47:00.000' 这是错误的，因为它不认为在 '2012-04-20 17:27:00.000' 有另一个测试。它们不应重叠。所需的输出是：“2012-04-20 12:27:00.000”，因为它是在“2012-04-20 10:27:28.000”测试之后和“2012-04-20 17”测试之前： 27:00.000'，非常适合 3 小时测试。我的 CurrentTime 是 '2012-04-20 11:45:23.393'

如果不存在这样的有效时间，我如何确保它返回 CurrentTime+1hr？

它可以在 C# 中完成，但尝试使用 SQL 查询。

请提供任何帮助/提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:15:50.027

```
DECLARE @now DATETIME2 = '2012-04-20 11:45:23.393'
DECLARE @schedule TABLE
        (
        ScheduledTime DATETIME2 NOT NULL
        )

INSERT
INTO    @schedule
VALUES 
('2012-03-16 16:34:36.000'),
('2012-03-16 16:34:36.000'),
('2012-03-16 16:34:36.000'),
('2012-03-16 16:34:36.000'),
('2012-03-16 16:34:36.000'),
('2012-03-16 16:34:36.000'),
('2012-03-16 16:34:36.000'),
('2012-03-16 16:34:36.000'),
('2012-03-20 09:14:48.000'),
('2012-03-20 13:14:48.000'),
('2012-03-20 17:14:48.000'),
('2012-03-20 21:14:48.000'),
('2012-04-14 17:13:19.000'),
('2012-04-14 21:13:19.000'),
('2012-04-15 01:13:19.000'),
('2012-04-15 05:13:19.000'),
('2012-04-15 09:13:19.000'),
('2012-04-15 13:13:19.000'),
('2012-04-15 17:13:19.000'),
('2012-04-15 21:13:19.000'),
('2012-04-16 01:13:19.000'),
('2012-04-16 05:13:19.000'),
('2012-04-16 13:13:19.000'),
('2012-04-16 17:13:19.000'),
('2012-04-17 01:13:19.000'),
('2012-04-17 05:13:19.000'),
('2012-04-17 13:13:19.000'),
('2012-04-18 18:29:16.000'),
('2012-04-19 15:48:12.000'),
('2012-04-19 19:10:00.000'),
('2012-04-19 23:47:00.000'),
('2012-04-20 10:27:28.000'),
('2012-04-20 17:27:00.000')

SELECT  COALESCE
        (
        (
        SELECT  TOP 1
                DATEADD(hour, 3, scheduledTime)
        FROM    @schedule s
        WHERE   s.scheduledTime >= DATEADD(hour, -3, @now)
                AND NOT EXISTS
                (
                SELECT  NULL
                FROM    @schedule sn
                WHERE   sn.scheduledTime > s.scheduledTime
                        AND sn.scheduledTime < DATEADD(hour, 6, s.scheduledTime)
                )

        ORDER BY
                scheduledTime
        ),
        DATEADD(hour, 1, @now)

-- This is redundant

        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:43:41.973

最终起作用并达到预期结果的查询是：

```
 WITH rows AS 
                (
                SELECT  *, ROW_NUMBER() OVER (ORDER BY [ScheduledTime] ) AS rn 
                FROM    Schedule
                WHERE [ScheduledTime] IS NOT NULL                     
                ) 
    SELECT  COALESCE 
            ( 
            (
            SELECT  Top 1
            DateAdd(SECOND,-10800,mp.ScheduledTime) AS NewNextTime
            FROM    rows mc 
            JOIN    rows mp   
            ON      mc.rn = mp.rn - 1   
            WHERE (DATEDIFF(SECOND, mc.ScheduledTime, mp.ScheduledTime) - 10800) >= 10800 
            And mp.ScheduledTime >= GETDATE()
            And DateAdd(SECOND,-10800,mp.ScheduledTime)>= GETDATE()
            order by mc.ScheduledTime
            ),
            ( 
            SELECT  TOP 1 
                    DATEADD(hour, 3, scheduledTime) AS NewNextTime 
            FROM    Schedule s 
            WHERE   s.scheduledTime >= DATEADD(hour, -3, GetDate()) 
                    AND NOT EXISTS 
                    ( 
                    SELECT  NULL 
                    FROM    Schedule sn 
                    WHERE   sn.scheduledTime > s.scheduledTime 
                            AND sn.scheduledTime < DATEADD(hour, 6, s.scheduledTime) 
                    ) 

            ORDER BY 
                    scheduledTime 
            ),
           (
                SELECT  TOP 1 
                DATEADD(SECOND, (3600), GetDate()) AS NewNextTime 
            )  
            ) 
```

这将返回一个有效时间，或者在最坏的情况下返回最后一次测试结束后的时间。

SELECT COALESCE 的第一部分从现有时隙中返回一个时隙。SELECT COALESCE 的第二部分，在所有测试时隙的末尾返回一个时隙。SELECT COALESCE 的第三部分，返回为 CurrentTime+1hr。

大家对此的讨论对达成这一点非常有帮助。我仍然会寻找更好的建议，截至目前将使用这个。

PS 很抱歉延迟发布此解决方案。

# tsql - 更新表查找

> ID：10243133
> 
> 赞同：0
> 
> 时间：2012-04-20T08:58:04.920
> 
> 标签：tsql

我有一个临时表（#WorkTable），如下所示：

```
InstrID  CountryName  CreditRating
1        UK           AA
2        UK           Unclassified
3        South Africa A
4        South Africa A
5        South Africa Unclassified 
```

我想要做的是用它的实际信用评级更新这个表，其中列 CreditRating 是“未分类”。因此，在上面的示例中，未分类的英国将变为“AA”，而南非的将变为“A”。

我不确定这个编码，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:06:13.193

我认为这个例子会对你有所帮助。

```
String sql = "update table_name set CreditRating = (select unique CreditRating  from table_name where CountryName = ? and CreditRating != 'classifie...') where CountryName = ? and CreditRating  = 'classifie...'"; 
```

在这里，您可以将 countryName 作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:08:06.823

您似乎对 SQL 很陌生。您需要做的是将表“加入”到查找值。您可以在很多地方找到很多关于 SQL 基础知识的帮助，但如果您需要快速解决方案，请尝试以下方法：

如果您有一个包含国家和信用评级的单独表，（我假设该表的名称是评级，并且国家名称和评级匹配。）

```
update #WorkTable
  Set w.Creditrating = r.CreditRating
  from #WorkTable w join Rating r on w.CountryName=r.CountryName
    where w.CreditRating='Unclassified' 
```

另一方面，如果不存在单独的表，并且您想根据同一个临时表更新未分类的值，那么您需要假设表中已经存在一些具有该国家/地区的 CreditRating 的条目（其中，在您发布的案例，有。）每个国家/地区也需要只有一个 CreditRating。在这种情况下，以下应该起作用：

```
update #WorkTable
  Set w.Creditrating = w2.CreditRating
  from #WorkTable w join 
    (Select distinct CountryName, CreditRating from #WorkTable where CreditRating<>'Unclassified') w2
      on w.CountryName=w2.CountryName
  where w.CreditRating='Unclassified' 
```

这使用表本身来查找值，通过查看表两次 - 一次作为要更新的表，其中最后一行将更新内容限制为仅未分类的项目，一次作为源表，其中只有分类评级用过的。如果这对您不起作用，请发表评论并提供更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:33:25.663

下面的 sql 脚本将更新任何未分类的“实际”信用评级。我希望这有帮助。

```
CREATE TABLE #WorkTable
(
    InstrID INT,
    CountryName VARCHAR(50), 
    CreditRating VARCHAR(20)
)

INSERT INTO #WorkTable VALUES ( 1, 'UK','AA');
INSERT INTO #WorkTable VALUES ( 2, 'UK','Unclassified');
INSERT INTO #WorkTable VALUES ( 3, 'South Africa','A');
INSERT INTO #WorkTable VALUES ( 4, 'South Africa','A');
INSERT INTO #WorkTable VALUES ( 5, 'South Africa','Unclassified');

WITH cteUnclassified
AS

(
    SELECT  InstrID,
        CountryName,
        CeditRating

    FROM    #WorkTable
    WHERE   CreditRating != 'Unclassified'
)

UPDATE  #WorkTable 
SET CreditRating = u.CreditRating 
FROM    #WorkTable wt
    INNER JOIN cteUnclassified u
ON  wt.CountryName = u.CountryName

WHERE   wt.CreditRating = 'Unclassified'

SELECT *
FROM  #WorkTable 
```

查询结果如下：

InstrID CountryName CreditRating 1 英国 AA 2 英国 AA 3 南非 A 4 南非 A 5 南非 A

# c# - 如何将一批 .NET DLL 反编译成 Visual Studio 项目

> ID：10243134
> 
> 赞同：6
> 
> 时间：2012-04-20T08:58:06.387
> 
> 标签：c#, .net, visual-studio, decompiling, decompiler

我只需要在我的 C# 代码中搜索一些文本。

我已经有了 .NET Reflector 和 File Disassembler Add-In，但这些似乎只是反编译了一个 DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-23T23:18:51.083

**实际上，这些答案都不是正确的。**

是的，所有工具都可以将文件反编译`*.dll`成`*.csproj`文件，但**它们都不支持 CLI 或批处理**。您可以节省安装时间。

到目前为止，最好的解决方案是使用[dotPeek](https://www.jetbrains.com/decompiler/)，将所有`*.dll`文件放入一个文件夹并使用*Explore Folder*选项。

[![在 dotPeek 中探索文件夹](../Images/62c5651105631e9f8d2b08fb535ab8e3.png)](https://i.stack.imgur.com/eUWhU.png)

dotPeek 将分析给定文件夹并显示`DLL`位于文件夹内的 s 树。您可以`csproj`为每个`dll`加载的单个手动生成。

[![DLL 树](../Images/1c615cf10467a531b47931677dab874e.png)](https://i.stack.imgur.com/Ffvxa.png)

* * *

如果您遇到这篇文章是因为您正在寻找如何在您的或第 3 方中找到特定指令的答案`dll`，特别是反射的使用，您可以使用此 PowerShell 脚本将`dll`s 反编译为 IL 并查找指令（`System.Reflection.Assembly::Load(string)`用于反射）。

### 笔记

它使用 .NET Framework SDK 工具包中的中间语言 DisASseMbler (ILDASM)。根据您的 SDK 版本相应地调整路径。

```
function Get-LibDump
{
    Param(
# Specifies a path to one or more locations. Wildcards are permitted.
    [Parameter(Mandatory=$true,
            Position=0,
            ParameterSetName="Basic",
            ValueFromPipeline=$true,
            ValueFromPipelineByPropertyName=$true,
            HelpMessage="Path to one or more locations.")]
    [ValidateNotNullOrEmpty()]
    [SupportsWildcards()]
    [ValidateScript({$_ | Test-Path})]
    [System.IO.FileInfo]
    $Path
    )
    process
    {
        $dumpFileFilePath = $Path.BaseName + '.il'
        $outFile = "C:\LibDump\$dumpFileFilePath"
        Start-Process -FilePath 'c:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.7.2 Tools\ildasm.exe' -ArgumentList "/UNICODE /OUT=`"$outFile`" `"$($Path.FullName)`"" -Wait
        "Dump from:`n$(Resolve-Path -Path $Path.FullName -Relative)" | Out-File -FilePath $outFile -Encoding:unicode -Append
    }
}

# Use
Get-ChildItem -Path $PathToLibFolder -Filter '*.dll' -File -Recurse | Get-LibDump 
```

# c# - 无法调试windows服务VS2010 Win7

> ID：10243135
> 
> 赞同：2
> 
> 时间：2012-04-20T08:58:13.733
> 
> 标签：c#, .net, visual-studio-2010, windows-7, service

从 XP 和 VS2005 迁移到 Win7 和 VS2010 后，我无法调试我的任何服务。

我可以编译，我可以安装，我可以正确运行服务。

但是，我需要调试它们。当我尝试附加到该进程时，我像往常在 VS2005 上一样选择正在运行的进程，我收到一条错误消息，告诉我我需要管理员权限。

我已经是管理员了。另外，在网上搜索了很多之后，我发现以管理员身份运行 VS2010（通过右键单击）应该可以修复它，但我仍然不能。

我还尝试在 vslauncher.exe 属性上标记复选框以始终以管理员身份运行它。VS2010 窗口在顶部显示它实际上是以管理员身份运行的，但同样，当我尝试附加到该进程时，它说我需要管理员权限。

有人知道如何进行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:15:00.707

编辑您的服务并将以下行放入 OnStart() 方法中：

调试器.Launch(); 在 OnStart() 中而不是在 OnStart() 启动的线程中执行此操作很重要，这样如果有任何错误，您可以在服务崩溃之前捕获它。

当您的服务启动时，调试器将打开。然后，Windows 将提供自动启动提升的视觉工作室，以便您可以附加到您的服务。我发现将此行与 app.config 设置一起放入非常有用，这样您就可以根据需要启用它（即启动并将调试器附加到服务）。

仅供参考，当您使用 Vista / Windows 7 时，您可以以管理员身份运行应用程序。但是，这些应用程序明确拒绝管理权限，除非您使用“提升”权限启动它们。这是一种称为 UAC 的安全功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:43:45.567

这是一个权限问题。Win7 带有一个新的安全系统，我必须在我的个人资料（即使是管理员）中添加以下权限：

控制面板 -> 管理工具 -> 本地安全策略 -> 本地策略 -> 用户权限分配 -> 调试程序 -> 添加用户或组。

在那里，我添加了自己的用户。重启机器（重要！！不重启就不行）。

之后，我能够附加进程来调试它们。解决这个问题已经很长时间了，我希望能帮助其他发现同样问题的人。

谢谢大家的帮助。

# asp.net - ASP.NET Razor：表单（在对话框中）未提交

> ID：10243136
> 
> 赞同：0
> 
> 时间：2012-04-20T08:58:17.223
> 
> 标签：asp.net, asp.net-mvc-3, razor

我正在尝试在 jquery 对话中提交一个（AJAX（现在没有 AJAX））表单。但由于某种原因，标签永远不会被渲染。

包含的脚本：

```
 <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />

    <link href="@Url.Content("~/Content/jquery-ui-1.8.19.custom.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.19.custom.min.js")" type="text/javascript"></script
    >
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMVCAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/ckeditor/ckeditor.js")" type="text/javascript"></script>
<script src="@Url.Content("~/ckeditor/adapters/jquery.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/jquery.inputfocus-0.9.min.js")" type="text/javascript"></script>
 <link href="@Url.Content("~/Content/progress.css")" rel="stylesheet" type="text/css" />
 <script src="@Url.Content("~/Scripts/multiform.js")" type="text/javascript"></script> 

 <div id="hidden" style="display:none;">
    <div id="coinDialogue" title="New Coin">
        @using(Html.BeginForm("CreateCoin", "Home"))
        {
             @Html.ValidationSummary(true)
            <div style="display: inline;">
                <label for="FaceValue">
                    Coin value</label>
                <input type="text" name="FaceValue" id="FaceValue" value="" style="width: 35px;" />
                <select id="currency_type" name="currency_type">
                    <option value="USD" selected="selected">USD</option>
                    <option value="EUR">EUR</option>
                </select>
            </div>
            <br />
            <label for="ReusePeriod">
                Usage:</label>
            <select id="ReusePeriod" name="ReusePeriod">
                <!-- Loop with for and values from Model (gotten from Paycento API) -->
                <option value="o" selected="selected">Once</option>
                <option value="w" >Weekly</option>
            </select>
            <br />
            <label for="ValidFrom">
                Validate from</label>
            <br />
            <input type="text" id="ValidFrom" name="ValidFrom" value="" />
            <br />
            <label for="ValidUntil">
                Validate To</label>
            <input type="text" id="ValidUntil" name="ValidUntil" value="" />
            <br />
            <input type="submit" value="Create new coin" />
        }
    </div>
    <script type="text/javascript">
        $('#coinDiaLink').click(function () {
            $('#coinDialogue').dialog({
                buttons: {
                    Cancel: function () {
                        $(this).dialog('close');
                    },
                    Create: function () { 
                        $('#createCoinForm').trigger('submit');
                    }
                }
            });
        });
    </script>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:02:40.390

您能否将 Ajax.Beginform 替换为 Html.BeginForm 并查看它是否发布了整个页面，如果发布了，那么问题之一可能是 - Ajax.Beginforms 需要一些脚本文件包含在视图或主视图中，看看是否那些不见了

```
jquery.unobtrusive-ajax.min.js
MicrosoftAjax.js
MicrosoftMvcAjax.js 
```

# python - Python None and if conditions

> ID：10243137
> 
> 赞同：4
> 
> 时间：2012-04-20T08:58:19.640
> 
> 标签：python

I have some code here:

```
m = None
n = None

if not m:
    print "Something happens"
>>> Something happens 
```

if I do:

```
if not m and n:
    print "Something happens" 
```

Nothing happens.

But I can do:

```
m, n = 1,2
if m and n:
    print "Something happens"
>>> Something happens 
```

Why are if and if not handled the same way? Does 'if not', not take 'and' statements?

Thank you

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T08:59:35.993

You have an [operator precedence](http://docs.python.org/reference/expressions.html#summary) problem.

`if not m and n` is equivalent to `if (not m) and n`. What you want is `if not m and not n` or `if not (m or n)`.

[*See also: [De Morgan's Laws](http://en.wikipedia.org/wiki/De_Morgan's_laws)*]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:06:28.450

`not` applied to its closet operand. You wrote `if not m and n` where `not` applies to `m` which is `True`, and because of `and`, `n` is evaluate to `False`, hence the entire statement is evaluated to `False`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T09:11:45.667

I think you are looking for this article: [Truth Value Testing](http://docs.python.org/library/stdtypes.html#truth-value-testing)

> Any object can be tested for truth value, for use in an if or while condition or as operand of the Boolean operations below. The following values are considered false:
> 
> *   None
> *   False
> *   zero of any numeric type, for example, `0`, `0L`, `0.0`, `0j`.
> *   any empty sequence, for example, `''`, `()`, `[]`.
> *   any empty mapping, for example, `{}`.
> *   instances of user-defined classes, if the class defines a `__nonzero__()` or `__len__()` method, when that method returns the integer zero or bool value False.
> 
> All other values are considered true — so objects of many types are always true. Operations and built-in functions that have a Boolean result always return `0` or `False` for false and `1` or `True` for true, unless otherwise stated. (Important exception: the Boolean operations or and and always return one of their operands.)

Especially the next chapter explains your case ([Boolean Operations — `and`, `or`, `not`](http://docs.python.org/library/stdtypes.html#boolean-operations-and-or-not)):

> not has a lower priority than non-Boolean operators

# asp.net-mvc - 在 asp.net mvc 中更新 ajax 中的 div

> ID：10243138
> 
> 赞同：1
> 
> 时间：2012-04-20T08:58:28.597
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, razor

我已经通过 ajax 编写了我的代码如下：而不是更新 div，而是重定向到部分视图。根据设置了ajax选项的更新目标ID，它不能更新。请帮我

```
public class SearchController : Controller
{
   public ActionResult search()
   {
       return View();
   }

    public PartialViewResult _search()
    {
        Thread.Sleep(3000);
        ViewBag.message = "test";
        return PartialView("_search");
    }

}
@{
ViewBag.Title = "search";
}
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<h2>search</h2>

@Ajax.ActionLink("Click",
             "_search",
                     new AjaxOptions
                     {
                         UpdateTargetId = "_search",
                         InsertionMode = InsertionMode.InsertAfter,
                         HttpMethod = "GET"
                     }
            )

 <div id="_search">

 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:04:35.797

试试这个

```
@Ajax.ActionLink("Click",
             "_search",
              null,
                     new AjaxOptions
                     {
                         UpdateTargetId = "_search",
                         InsertionMode = InsertionMode.InsertAfter,
                         HttpMethod = "GET"
                     }
            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:07:04.510

确保您已将以下脚本添加到您的视图或主视图中

```
jquery.unobtrusive-ajax.min.js
MicrosoftAjax.js
MicrosoftMvcAjax.js 
```

# time - CakePHP 2.1 测量页面执行时间

> ID：10243141
> 
> 赞同：3
> 
> 时间：2012-04-20T08:58:34.077
> 
> 标签：time, execution, cakephp-1.2

如何在 CakePHP 2.1 中测量页面执行时间？在 1.3 中，它在调试模式下呈现在代码中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T06:30:09.497

您可以使用[DebugKit 插件](https://github.com/cakephp/debug_kit)来找出执行时间。

或者您可以在 app/ 中编辑 index.php 并添加：

```
// top of file
$starTime = microtime(true);
// bottom of file
echo '<!-- Exec time: ', microtime(true) - $startTime, ' -->'; 
```

该时间将以微秒为单位，因此您可以根据需要将其转换为 ms，但 DebugKit 为您提供了更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T05:03:26.320

请注意，根据文档，从 microtime 返回的时间实际上是秒而不是微秒。

# javascript - PGRFileManager 在 Google Chrome 中最小化

> ID：10243146
> 
> 赞同：0
> 
> 时间：2012-04-20T08:58:59.383
> 
> 标签：javascript, google-chrome, ckeditor

我对 CKeditor (http://ckeditor.com/) 的 PGRilManager 插件 (http://pgrfilemanager.sourceforge.net/) 有一个非常不寻常的问题

这仅在 Google Chrome 中发生，当我在 CKeditor 的“图像属性”窗口中选择“浏览器服务器”打开 PGRFileManager 时，它会打开，但随后会立即最小化到 Windows 中的任务栏。

有没有其他人遇到过这个问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:31:29.413

这是 Chrome 18 中的一个错误（它在 17 和 19 中运行良好），[CKEditor 3.6.3中包含一个解决方法](http://ckeditor.com/blog/CKEditor_3.6.3_released)

# c - 为什么是“typedef struct foo foo;” 被认为是有害的？

> ID：10243149
> 
> 赞同：12
> 
> 时间：2012-04-20T08:59:10.880
> 
> 标签：c, coding-style

在[C 与 C++ 中](https://stackoverflow.com/questions/10240577/typedef-and-struct-namespaces-in-c-vs-c#comment13161479_10240577)的 typedef 和 struct 命名空间中，其中一条评论似乎暗示暴露一些`struct foo`比使用 typedef 更可取...

```
typedef struct foo foo; 
```

...然后在整个 API 中使用`foo`而不是使用。`struct foo`

后一种变体有什么缺点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T09:03:44.217

唯一的缺点（*）是它隐藏了`foo`一个结构的事实，而不是某些内置类型的别名。

注意（*）：这是否对您不利，这取决于您的口味。

*   它有利于完全不透明（见下面的第一条评论）。
*   要了解为什么有些人认为这是一个缺点，请查看[linux 内核编码风格](http://www.kernel.org/doc/Documentation/CodingStyle)（typedefs 章节）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T09:12:18.953

这取决于你有多喜欢这个词`struct`。如果你觉得你的程序会通过自由洒`struct that`和`struct tother`（当然你不能`struct this`在 C++ 中）使你的程序更清晰，那么一定要使用这个`struct`版本。

就个人而言，我不认为重复`struct`提供任何好处，我很高兴只使用这个`typedef`名字。而且因为 C++`typedef struct xyz xyz;`自动有效地提供了声明（它不是很准确，尤其是因为你可以用 C++ 显式编写它，但它足够接近，你可能不必担心它），我认为它是完美的在 C 中使用相同的东西是有意义的。C 编译器对此很满意，所以我通常使用`typedef struct tag tag;`然后在需要的地方使用`tag`和。`tag *`

* * *

如需另一种但完全站得住脚的观点，请阅读[Linux 内核编码风格](https://www.kernel.org/doc/Documentation/process/coding-style.rst)指南。

* * *

请注意，C2011 允许您重新定义 a `typedef`，只要它别名相同的类型：

> ### ISO/IEC 9899:2011 §6.7 声明
> 
> **语义**
> 
> ¶5 声明指定一组标识符的解释和属性。标识符的定义是该标识符的声明：
> 
> — 对于一个对象，导致为该对象保留存储空间；
> 
> — 对于函数，包括函数体；^(119))
> 
> — 对于枚举常量，是标识符的（唯一）声明；
> 
> — 对于 typedef 名称，是标识符的第一个（或唯一一个）声明。

与 C99 相比，这是不可能的：

### ISO/IEC 9899:1999 §6.7 声明

> **语义**
> 
> ¶5 声明指定一组标识符的解释和属性。标识符的定义是该标识符的声明：
> 
> — 对于一个对象，导致为该对象保留存储空间；
> 
> — 对于函数，包括函数体；^(98))
> 
> — 对于枚举常量或 typedef 名称，是标识符的（唯一）声明。

只要您保持一致，这就会简化类型定义的创建（但前提是您在与您相关的每个平台上都有足够兼容的 C2011 编译器）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-20T09:19:16.643

关于是否 typedef 结构类型：

这里有一些意见（都反对 typedefing 结构）：

来自 OpenBSD 风格指南：

> “避免对结构类型使用 typedef。这使得应用程序不可能不透明地使用指向这种结构的指针，这在使用普通结构标记时既可行又有益。”

从 Linux 内核编码风格：

> “将 typedef 用于结构和指针是*错误的。”*

来自 Peter Van der Linden 的 Expert C Programming：

> “不要为结构体的 typedefs 烦恼。他们所做的只是省去你写“结构体”这个词的麻烦，这是一个你可能不应该隐藏的线索。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T09:13:15.797

这或多或少是一个品味问题。

通过仅声明一个`struct`标签，该名称也可用于同一范围内的变量、函数或枚举器（如果您喜欢混淆，甚至可以是另一种类型）；并且用户必须写这个词`struct`，这使得他们的代码更加明确。

通过还声明类型名称，您可以允许人们在不想键入`struct`时不键入。

我在另一个问题中的评论是指与结构标记同名的*指针类型的声明：*

```
typedef struct foo * foo; 
```

从风格上讲，这有点令人不快，因为它隐藏了它是指针的事实。这隐藏了它是一个指针的事实；在那个问题的上下文中，这可能很好，这是由 API 定义的不透明类型，但在我看来，对于非透明类型来说是相当粗鲁的。它还破坏了与 C++ 的兼容性。在那种语言中，这样的声明是无效的，因为`struct foo`引入`foo`了当前命名空间而不是单独的标记空间，并防止在该命名空间中声明任何其他具有相同名称的类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T09:06:20.487

只要坚持命名约定，你就会没事的。

```
typedef struct
{
  //...
}              t_mytype;
//...
t_mytype thing; 
```

这样你就会知道它是一个自定义类型。至于它是一个结构，只需使用显式名称而不是真正使用`t_mytype`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-31T09:49:57.077

反对 typedef 的另一个论点是它编写干净的标头的难度。让我们看一个标题的例子：

```
#ifndef HEADER_H
#define HEADER_H
#include "s.h"
void f(struct s *);
#endif 
```

这个标题可以改进。确实，`struct s`不需要定义。所以可以写成：

```
#ifndef HEADER_H
#define HEADER_H
struct s;
void f(struct s *);
#endif 
```

因此，用户可以使用`struct s`不透明的结构，我们可以保持`"s.h"`私有。

让我们做同样的事情，但使用`typedef`：

```
#ifndef HEADER_H
#define HEADER_H
typedef struct s s_t;
void f(s_t *);
#endif 
```

该行将`typedef struct s s_t`出现在每个要使用的标题中，`s_t *`我不喜欢冗余代码。有多种方法可以避免这种情况，但最简单的可能是摆脱 typedef。

# c# - windows phone 中分钟提醒的重复间隔

> ID：10243152
> 
> 赞同：3
> 
> 时间：2012-04-20T08:59:43.533
> 
> 标签：c#, windows-phone

我有一个程序会在 30 分钟后触发提醒。我想更改它，以便每 30 分钟触发一次提醒，无需任何用户交互。我不希望他们必须按下按钮来触发计时器，就像他们目前必须做的那样。这是我到目前为止所拥有的：

```
 Reminder r = new Reminder("REMINDER..");
            r.Title = "REMINDER..";
            r.Content = "YOU CAN SMOKE AT THIS TIME";
            r.BeginTime = DateTime.Now.AddMinutes(30);
            r.ExpirationTime = DateTime.Now.AddDays(1);
            ScheduledActionService.Add(r); 
```

# c# - 使用 C# 在 Selenium RC 中按 Enter 键

> ID：10243153
> 
> 赞同：8
> 
> 时间：2012-04-20T08:59:45.967
> 
> 标签：c#, selenium, selenium-rc, keypress, enter

如何使用 C# 使用 Selenium RC 按 Enter？

我正在`SearchBox`使用 using `Selenium`。我必须在其中输入一些名称，并且必须按下`Enter`才能进行搜索。

没有`Submit`按钮。所以，我必须使用`Enter`.

我尝试过这样的事情

```
selenium.KeyPress("quicksearchtextcriteria", "13"); 
```

但不起作用。

请帮忙。

注意：我收集了一些可能的方法来做到这一点。见这里：[在硒中按回车键](http://coding-issues.blogspot.com/2012/11/press-enter-key-in-selenium.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T11:00:22.890

This can be achieved by [`Keys`](https://seleniumhq.github.io/selenium/docs/api/dotnet/html/T_OpenQA_Selenium_Keys.htm), and [`Enter`](https://seleniumhq.github.io/selenium/docs/api/dotnet/html/F_OpenQA_Selenium_Keys_Enter.htm).

Example in Java as I don't know C#:

```
import org.openqa.selenium.Keys;

//...

// this sends an Enter to the element
selenium.type("locator", Keys.ENTER);

// or even this - this sends the "Any text" and then confirms it with Enter
selenium.type("locator", "Any text" + Keys.ENTER); 
```

From the [`Keys`](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/Keys.html) enum.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T05:36:40.050

尝试这个：

> 导入 org.openqa.selenium.Keys
> 
> WebElement.sendKeys(Keys.RETURN)

**参考：**

**[在 Selenium 中键入 Enter/Return 键](https://stackoverflow.com/questions/1629053/typing-enter-return-key-in-selenium)**

**[http://asynchrony.blogspot.com/2008/11/enter-key-press-in-selenium.html](http://asynchrony.blogspot.com/2008/11/enter-key-press-in-selenium.html)**

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-29T18:21:05.053

这是用 C# 完成的：

webElement.SendKeys(Keys.Return);

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T23:47:35.947

我相信您也可以使用“提交”方法。（虽然我使用 Selenium 2，所以我猜这在 Selenium RC 中可能是不可能的？如果是这样，对不起）。

```
//First you need to find the searchBox and fill it, once doing so call
searchBox.Submit(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T09:16:11.447

尝试这个：

```
selenium.KeyPressNative("13"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T10:00:18.053

您可以使用 clickAt("locator",""); 如果按键不工作。它肯定会起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T10:51:21.087

用这个

```
selenium.keyDown("locator of element", "\\13"); 
```

# php - 传递变量以单击函数 jquery 轻松确认

> ID：10243155
> 
> 赞同：0
> 
> 时间：2012-04-20T08:59:47.040
> 
> 标签：php, jquery

> **可能重复：**
> [如何在 jquery 中轻松传递变量确认](https://stackoverflow.com/questions/10242437/how-pass-variable-in-jquery-easy-confirm)

传递变量以单击函数 jquery 轻松确认

通过使用 javascript confim，我已经完成了暂停。现在我想把它变成 jquery 容易确认我该怎么做

我的 PHP 代码（此函数在循环中调用）：

```
function prepareRow( $flag, $Id )
{
$rowResponse = '<tr>    
                    <td style="width:12%"> ' . $Id . ' </td>
                    <td><a href="javascript:void(0);" id="suspend" ></a> </td>
                </tr>'; 
return  $rowResponse            
} 
```

Jquery 轻松确认链接：[http ://projectshadowlight.org/jquery-easy-confirm-dialog/](http://projectshadowlight.org/jquery-easy-confirm-dialog/)

我试过这样，但如果点击“**是**”，我想将“ **$id** ”传递给它。这样我就可以暂停行。

请帮帮我

```
$("#suspend").easyconfirm({locale: {
    title: 'Are you sure?',
    text: 'Are you sure, you want to suspend?',
    button: ['No',' Yes'],
    closeText: 'Close'
}});
$("#suspend").click(function() {
    $.post("suspend.php", { "Id" : Id }, 
            function(data){
                $.ajax({
                    type:"POST",
                    url: "prepareTable.php",
                    success: function(data){
                    $("#example").html(data);
                }
                });
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:57:06.707

我在本地系统中尝试过有关 jquery easy confirm 的示例，发现其中有错误。所以我不再担心这个问题并使用**了 jConfirm**。

# java - 安卓端口扫描不工作

> ID：10243156
> 
> 赞同：0
> 
> 时间：2012-04-20T08:59:48.290
> 
> 标签：java, android, sockets, textview, port-scanning

我正在开发一个 android 端口扫描仪，但它似乎没有工作。这是 PortScan 类的代码。

```
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.UnknownHostException;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class PortScan extends Activity
{

    String targetHost;

    /* Starting port for scan */
    public int startPort = 1;

    /* Ending port for scan */
    public int endPort = 100;

    /* Adapter for ListView */
    //private PortScanAdapter scanAdapter;

    /* Intent which invoked this class */
    private Intent scanIntent;

    /* Address of the host to scan */
    InetAddress targetAddress;

    /* Hostname of the target */
    String targetHostName;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        scanIntent = getIntent();
        prepareScan();
        setContentView(R.layout.port_scan_result);
        startScan();
    }

    private void prepareScan()
    {
        targetHost = scanIntent.getStringExtra("targetAddress");

        /* Get the IP Address of the target */
        try
        {
            targetAddress = InetAddress.getByName(targetHost);
        }
        catch(UnknownHostException e)
        {
            e.printStackTrace();
        }

        /* Get the hostname of the target */
        try
        {
            targetHostName = targetAddress.getHostName();
        }
        catch(Exception e)
        {
            targetHostName = targetHost;    
        }

       /*TextView hostName = (TextView)findViewById(R.id.host);
        hostName.setText(targetHostName); */
    }

    private void startScan()
    {
        /* Socket to connect to the remote machine */
        Socket portSocket;

        /* Textview which displays the scanresult */
        TextView scanText = (TextView)findViewById(R.id.portscanresult);

        scanText.setText("Scanning host "+ targetHost + "\n");

        for (int i = startPort; i == endPort; i++)
        {
            try
            {
                portSocket = new Socket();
                portSocket.connect(new InetSocketAddress(targetAddress, i), 1000);
                scanText.append("Target is listening on port "+ i + ": Port Open\n");
                portSocket.close();

            }   
            catch(Exception exception)
            {
                scanText.append("Target is not listening on port "+ i + ": Port Closed\n");
            }
        }
    }

} 
```

我正在模拟器（Android 2.3.3）上测试此代码。我不知道问题出在套接字连接还是 TextView 上。当我运行程序时，我得到的唯一输出是`for`循环开始之前的字符串，即`"Scanning host "+ targetHost + "\n"`然后什么也没有发生。

任何帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:05:41.140

好吧……这永远行不通……

```
for (int i = startPort; i == endPort; i++) 
```

第二个是条件`if i==endport`，i等于，`startPort`因为你一开始就这么说...... `int i=startPort`

它必须是这样的：

```
for (int i = startPort; i <= endPort; i++) 
```

# php - 如何使用图表制作实时仪表板

> ID：10243160
> 
> 赞同：2
> 
> 时间：2012-04-20T09:00:10.470
> 
> 标签：php, javascript, charts, dashboard

我想为我们拥有的定制 Web 服务创建一个仪表板，以便我们可以实时监控使用情况。如果您已经看到，类似于沙发底座仪表板的东西。如果不是，它基本上是一个折线图，随着时间的推移从右到左滚动，沿着图的底部和 y 轴上的使用情况。

为了最小化数据带宽，我假设有一种方法可以只传递更改的数据来更新图形，而不是每次都发送新的图像/矢量。这将使用 javascript 图表库绘制。

我不清楚的是如何从服务器获取数据。让javascript代码每秒使用AJAX轮询服务器的正常方法是（如果您是在逐秒更新之后）还是使用了其他方法？

我使用 PHP 作为后端，使用 HTML/JS 作为客户端。

有没有人有任何可能有用的示例或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-05T08:30:31.280

为了从后端获取数据，我认为你可以调用它 using `Ajax`，每秒重新加载 using `setInterval()`，看起来像：

```
setInterval(function() {
   $.ajax({
        url: url of your backend server,
        type: 'GET',
        success: function (data) {
           //data returned from the server, use it to draw your chart
        }
      });
}, 1000); // recall ajax every second 
```

# iphone - 画一个圆并用动画把它变成一个矩形

> ID：10243162
> 
> 赞同：-2
> 
> 时间：2012-04-20T09:00:11.687
> 
> 标签：iphone, objective-c, animation, cocos2d-iphone, geometry

所以我用draw方法创建了一个圆：

```
glLineWidth(16);
glColor4ub(0, 255, 0, 255);
drawCircle( ccp(s.width/2,  s.height/2), 100, 0, 10, NO); 
```

我想知道是否可以将此形状转换为**带有动画**的矩形形状。谢谢你 。对不起我的英语我是法国人：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:01:28.367

为简单起见，我将使用 4 条三次贝塞尔曲线 - 每个圆的象限一条曲线。（这不是一个完美的圆，但也不是一个 100 段的圆！）然后，使用`schedule:`cocos2d 提供的功能，我会随着时间的推移逐渐移动每条曲线的**控制点**，直到它们与曲线的**起点**和**终点**垂直或水平对齐. 这会将曲线变成 4 条直线：一个矩形！

嗯，确切地说是一个正方形。您还必须移动所有 4 条曲线的**起点**和**终点**以形成一个不是正方形的矩形，但您明白我希望的意思吗？

有关其他信息，请参阅这些链接：

*   贝塞尔圆数学 - [http://www.cgafaq.info/wiki/Bezier_Circle](http://www.cgafaq.info/wiki/Bezier_Circle)
*   cocos2d - `ccDrawCubicBezier`- [http://www.cocos2d-iphone.org/api-ref/2.0.0/_c_c_drawing_primitives_8h.html#a5a391711c0aa611a06167bdd7637571f](http://www.cocos2d-iphone.org/api-ref/2.0.0/_c_c_drawing_primitives_8h.html#a5a391711c0aa611a06167bdd7637571f)
*   cocos2d -`schedule:`示例代码 - [http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:lesson_2._your_first_game#making_things_move](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:lesson_2._your_first_game#making_things_move)

*编辑：添加图像*

![贝塞尔圆](../Images/933890706e2c53ba0499265b68144621.png)

***d*** = d 值从以下公式计算得出： [http ://www.cgafaq.info/wiki/Bezier_Circle](http://www.cgafaq.info/wiki/Bezier_Circle)

***start***、 ***control 1***、 ***control 2***和***end***是在 cocos2d 中制作三次贝塞尔曲线所需的 4 个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:47:11.397

您将不得不为此编写代码。

例如，您可以在圆周围创建多个控制点。这些控制点中的每一个都可以由 3 个点组成。两个点代表圆上的两个点，一个点控制在两点之间绘制的线的曲线。现在为曲线上控制点之间的运动设置动画，使它们移动成为矩形上的控制点，同时为第三个控制点的运动设置动画，使边缘从曲线变为直线。

# java - 禁止maven deploy的上传消息

> ID：10243165
> 
> 赞同：5
> 
> 时间：2012-04-20T09:00:19.473
> 
> 标签：java, maven, bamboo

我们正在使用 Bamboo 进行持续集成，并通过一个简单的`mvn deploy`语句将成功的测试部署到我们的快照存储库。不幸的是，这会产生数千行这样的：

```
20-Apr-2012 10:38:44    28688 KB   
20-Apr-2012 10:38:44    28692 KB   
20-Apr-2012 10:38:44    28696 KB
...
20-Apr-2012 10:38:57    Uploaded: https://xxx (31932 KB at 7496.0 KB/sec) 
```

这出现在 Bamboo 中：

```
The Build generated 14,979 lines of output. The output is too long and has been
truncated to the last 1,000 lines. Download full Build log. 
```

因此，可以下载完整的日志，但其中充满了上传消息。是否可以抑制上面的行`mvn deploy`并只输出摘要？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T13:51:40.037

抑制行输出的最简单解决方案：

```
20-Apr-2012 10:38:44    28688 KB   
20-Apr-2012 10:38:44    28692 KB   
20-Apr-2012 10:38:44    28696 KB 
```

对你来说是命令上的 -B 选项。这是 Maven 的 --batch-mode 选项，它抑制上述输出。

# mysql - 使用 mySQL 比较 2 个表

> ID：10243171
> 
> 赞同：2
> 
> 时间：2012-04-20T09:00:41.467
> 
> 标签：mysql, compare

我正在尝试比较 2 个 mySQL 表以找出它们之间的差异。一条记录可以在 TableA 中找到，但在 TableB 中找不到，反之亦然。

我的表格如下：

表A

```
Name    A1  A2  B1  B2
------------------------
John    11  12  21  23
John    11  12  21  22
John    33  34  31  33
Mary    41  42  54  55
Mary    71  72  81  82
Mary    41  42  51  52 
```

表B

```
Name    A1  A2  B1  B2  C   D
---------------------------------
John    11  12  21  22  999 999
John    21  23  11  12  999 999
John    31  32  33  34  999 999
Mary    41  42  51  52  999 999
Mary    54  55  41  42  999 999 
```

A1 和 A2 列被视为一个组，B1 和 B2 列被视为另一个组。对于要考虑在两个表中找到的记录，我需要

```
- TableA(A1,A2) = TableB(A1,A2) AND TableA(B1,B2) = TableB(B1,B2) 
```

或者

```
- TableA(A1,A2) = TableB(B1,B2) AND TableA(B1,B2) = TableB(A1,A2) 
```

对于上面的 2 个表，我会将 TableA 的所有 John 与 TableB 的所有 John 进行比较，并将 TableA 的所有 Mary 与 TableB 的所有 Mary 进行比较。

我应该得到输出

```
Name    A1  A2  B1  B2  C   D
-----------------------------------------------
John    31  32  33  34  999 999 (from TableB)
Mary    41  42  54  55          (from TableA)
Mary    71  72  81  82          (from TableA)
Mary    54  55  41  42  999 999 (from TableB) 
```

我是 mySQL 的新手，上面的内容对我来说似乎很复杂，我什至不知道从哪里开始。

我真的很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:06:53.980

如果我理解正确，您需要发出两个查询：一个用于查找`TableA`不存在于的记录`TableB`，第二个用于相反的情况。请注意，在一种情况下它是`LEFT JOIN`，在第二种情况下它是`RIGHT JOIN`.

```
SELECT a.*, '' AS C, '' AS D, '(from TableA)' AS 'table'
FROM TableA AS a
LEFT JOIN TableB AS b
  ON ((a.A1 = b.A1 AND a.A2 = b.A2 AND a.B1 = b.B1 AND a.B2 = b.B2)
      OR (a.A1 = b.B1 AND a.A2 = b.B2 AND a.B1 = b.A1 AND a.B2 = b.A2))
    AND a.Name = b.Name
WHERE b.Name IS NULL

UNION

SELECT b.*, '(from TableB)' AS 'table'
FROM TableA AS a
RIGHT JOIN TableB AS b
  ON ((a.A1 = b.A1 AND a.A2 = b.A2 AND a.B1 = b.B1 AND a.B2 = b.B2)
      OR (a.A1 = b.B1 AND a.A2 = b.B2 AND a.B1 = b.A1 AND a.B2 = b.A2))
    AND a.Name = b.Name
WHERE a.Name IS NULL 
```

# php - SQL 建议 - 从表中选择多行作为 innerJoin

> ID：10243174
> 
> 赞同：0
> 
> 时间：2012-04-20T09:00:50.867
> 
> 标签：php, mysql, sql, doctrine

我一直在做一个项目，直到现在只需要从连接表中找到 1 行。但现在我需要抓取多行..

所以就目前而言，我的 sql 的工作方式类似于：

为该特定项目选择每个公司的行，仅此项目就可以找到公司详细信息（姓名、ID、电话……等等）。然后我加入一个表，其中包含为每个公司提交的表单数据（多个表单 - 所以多个记录）

到目前为止，我一直在指定要在联接中查找的一种形式，但现在我需要指定多个形式。

如果我使用`WHERE form_id = 1 OR form_id = 2 OR form_id = 3 ...`我只得到每个公司找到的第一个表单匹配的结果..

如果我混淆了查询，那么它会查找第一个表单并为每个公司返回具有不同表单数据的多条记录——这在这个意义上是有效的。

但是我随后在视图中循环遍历该数组并为每条记录创建一个表行（以前每行都是一家新公司），但使用后者会导致同一公司显示多条记录。

我有什么办法可以做到这一点？我尝试`group by`了后一种方法，但这再次导致只有 1 条记录。

```
 SELECT DISTINCT p.project_company_has_user_id, p.project_company_has_user_project_id, p.project_company_has_user_user_id, c.company_id, c.company_hall_no, c.company_company_name, c.company_type, c.company_country, c.company_stand_number, c.company_image_file_1, p2.project_id, p2.project_name, u.user_id, u.user_username, o.orders_id, o2.order_detail_id, o2.order_detail_product_id, f2.form_question_has_answer_id, f2.form_question_has_answer_request, f2.form_question_has_answer_form_id, f2.form_question_has_answer_user_id 
    FROM project_company_has_user p 
    INNER JOIN company c ON p.project_company_has_user_company_id = c.company_id 
    INNER JOIN project p2 ON p.project_company_has_user_project_id = p2.project_id 
    INNER JOIN user u ON p.project_company_has_user_user_id = u.user_id 
    INNER JOIN form f ON p.project_company_has_user_project_id = f.form_project_id 
    LEFT JOIN orders o ON p.project_company_has_user_user_id = o.orders_user_id 
    LEFT JOIN order_detail o2 ON ((o2.order_detail_orders_id = o.orders_id AND (o2.order_detail_product_id = 65 OR o2.order_detail_product_id = 68 OR o2.order_detail_product_id = 64))) 
    LEFT JOIN form_question_has_answer f2 ON ((f2.form_question_has_answer_form_id = 297 AND f2.form_question_has_answer_user_id = p.project_company_has_user_user_id)) 
    WHERE (f.form_template_name = "custom" AND p.project_company_has_user_garbage_collection = 0 AND p.project_company_has_user_project_id = 48) AND (LCASE(c.company_country) LIKE "%uk%" OR LCASE(c.company_country) LIKE "%uk%") ORDER BY company_company_name asc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:35:30.670

您需要 order_detail 中的另一个字段作为 o2 。该字段为row_index(position)等定位记录

```
LEFT JOIN order_detail o2 ON (o2.row_index=1 AND (o2.order_detail_orders_id = o.orders_id AND (o2.order_detail_product_id = 65 OR o2.order_detail_product_id = 68 OR o2.order_detail_product_id = 64))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:29:50.150

就我个人而言，我会使用外部联接来列出您需要列出所有匹配项的元素。如果他们需要清理该数据，您可以将逻辑构建到联接条件中（如步骤 2）。根据您正在处理的数据量以及您是否需要稍后在同一个过程中重用它，您可能希望将该主数据集发布到临时表中并将其用作您以后逻辑的源（主）。

希望有帮助。如果您需要代码，请告诉我，但这很简单。

问候

苹果电脑

# java - Android 服务大约需要 5 分钟才能启动

> ID：10243179
> 
> 赞同：0
> 
> 时间：2012-04-20T09:01:10.520
> 
> 标签：java, android, android-emulator, android-service

我的应用程序有一个奇怪的问题。App由一个Service和一个Activity组成，服务必须“一直”运行，而Activity只是一个控制服务的接口，不需要运行很多。`onCreate()`因此，如果它尚未运行，我想在我的 Activity 中创建该服务，然后绑定到它。代码如下所示：

```
private ServiceConnection mConnection = new ServiceConnection() {

        public void onServiceConnected(ComponentName className, IBinder binder) {
            mService= ((MyService.LocalBinder) binder).getService();
            mService.setView(ChatdroidActivity.this);
        }

        public void onServiceDisconnected(ComponentName className) {
            Controler = null;
        }
    }; 

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        initUI();

        if(!MyService.isRunning()){
            Intent s= new Intent(this, MyService.class);
            startService(s);

        }

        bindService(new Intent(this, MyService.class), mConnection,
                Context.BIND_AUTO_CREATE);  

        while(mService == null){
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        mService.doSomeStuff();
} 
```

问题是服务似乎没有启动。该应用程序处于while循环中，直到我在Android消息之后断开调试器，我的应用程序冻结了。当我在网上搜索解决方案时，突然我的 Eclipse 出现了，在我的 Service 方法中有一个活动断点`onCreate()`，持续了大约 2 秒钟，然后它终止了。在我断开调试器之前，Logcat 不会显示任何错误。我的服务的第一行`onCreate()`是`android.os.Debug.waitForDebugger();` 在我添加该调用之前，调试器从未附加到服务。

有谁知道这个问题或更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:11:50.243

*   如果将 mService.doSomeStuff() 移动到 onServiceConnected() 会发生什么？你不需要做一个 while() 循环来等待它

*   bindService 返回什么？如果没有发生任何错误，它应该返回 true

*   在 onServiceConnected() 中输入一些日志以查看它何时被调用

*   您的服务在承包商中做什么？它挂在那里的某个地方吗？

# php - 动作缓存在 CakePHP 的控制器中

> ID：10243187
> 
> 赞同：0
> 
> 时间：2012-04-20T09:01:28.007
> 
> 标签：php, cakephp, cakephp-2.0

当我试图达到`/controllername/action1`

它找到并运行它，当我将一些代码添加到中时`action1`，浏览器会显示旧操作的结果。似乎函数被缓存了。

但是在我的`app/tmp/cache`文件夹中没有带有动作或控制器名称的文件。

我试过`Cache::clear()`了——但结果是一样的。我的调试级别是`2`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:40:16.890

我发现问题出在我的网卡上。我解决了问题。谢谢。

# iphone - iAd 无法在 iPad 上运行

> ID：10243188
> 
> 赞同：4
> 
> 时间：2012-04-20T09:01:37.643
> 
> 标签：iphone, ios, xcode, ipad, iad

我制作了一个使用 iAd的**iPhone 应用程序。**在 iPhone 模拟器和设备上它工作正常。它已经在 App Store 上。

今天，我的一位客户告诉我，iAd 没有出现在 iPad 上。所以我在 iPad 模拟器上构建了我的应用程序，但它没有出现，而 iPhone 模拟器/iPhone 设备按预期工作。

在显示某些内容之前，我从不测试它是哪个设备，所以这不可能是错误。

这个没有显示任何错误：`- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error`

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-03T03:20:35.970

如果你想使用 iAd，你几乎需要成为一个通用的应用程序。我的仅 iPhone 的 iAd 应用程序在 iPad 上以兼容模式（在模拟器或真实 iPad 上）运行时会调用 bannerViewDidLoadAd，但随后会显示空白而不是广告。Apple“iAd 实施最佳实践”文档说：

```
Create Universal Apps

To ensure your app is capable of displaying iAd banners for all your users, 
make sure you’ve developed a universal app that supports all possible devices. 
**iPhone apps running in compatibility mode on iPad will not display a test ad
in development or live ads in deployed apps.** 
```

[https://developer.apple.com/library/ios/technotes/tn2264/_index.html](https://developer.apple.com/library/ios/technotes/tn2264/_index.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T14:43:49.383

我有一个类似的问题。对我来说唯一的解决方案是使应用程序通用。一旦应用程序通用，iAd 就会开始工作。

您可能会注意到，即使是来自 Apple 的 iAds 套件中的一些应用程序也无法正常工作。他们在这里的描述中提到了这方面的一些东西：

[http://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html)

> BasicBanner 和 ContainerBanner 配置为同时支持 iPhone 和 iPad 惯用语，TabbedBanner 和 NavigationBanner 仅支持 iPhone 惯用语，SplitViewBanner 仅支持 iPad 惯用语。

我发现的唯一区别是通用与 iPhone 应用程序设置（目标->摘要->设备组合框）。

然而，如果我没记错的话，我的`- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error`被称为。错误是说没有可用的 iAds。

另外，我只在 iOS5（模拟器和设备）上尝试过。

希望这会对您有所帮助；）

更新：如果您使用的是一些较旧的 SDK，还要检查这个 SO 问题： [iPad 应用程序不提供 iAds 吗？](https://stackoverflow.com/questions/4468069/is-iads-not-available-for-ipad-apps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T01:41:34.853

作为替代答案，这对我有用……因为我忘记了。很久以前，我在“设置/开发者”页面中将 iAds 的填充率设置为 0%……DOOH！

所以请在那里三重检查。

# iphone - 如何在iphone应用程序中将饼图保存为pdf文件

> ID：10243195
> 
> 赞同：0
> 
> 时间：2012-04-20T09:02:01.077
> 
> 标签：iphone

我有创建饼图的 iphone 应用程序，我希望该图表应保存在 iphone 的 pdf 文件中。

以下是 PieChart 的代码，但我如何将其保存为 pdf 我已阅读我们可以将文本保存为 pdf 但如何保存

```
 -(void)createGraph{

  PieClass *myPieClass=[[PieClass alloc]initWithFrame:CGRectMake(400,40, 320, 230)];

  myPieClass.itemArray=[[NSArray alloc]initWithObjects:textFieldOne.text,textFieldTwo.text,textFieldThree.text, nil];

 myPieClass.myColorArray=[[NSArray alloc]initWithObjects:[UIColor purpleColor],[UIColor redColor],[UIColor orangeColor], nil];

 myPieClass.radius=100;
 [self.view addSubview:myPieClass];

  [self creatPDFFromView:@"mydata.pdf"];

 }

    -(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename

     { 
```

// 创建一个可变数据对象，用于使用二进制数据进行更新，例如字节数组

```
 NSMutableData *pdfData = [NSMutableData data]; 
```

// 将 pdf 转换器指向可变数据对象和要转换的 UIView

```
 UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
 UIGraphicsBeginPDFPage();
 CGContextRef pdfContext = UIGraphicsGetCurrentContext(); 
```

// 将矩形绘制到视图中，因此这由 UIGraphicsBeginPDFContextToData 捕获

```
 [aView.layer renderInContext:pdfContext]; 
```

// 移除 PDF 渲染上下文

```
 UIGraphicsEndPDFContext(); 
```

// 从 iOS 设备检索文档目录

```
 NSArray* documentDirectories =   NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

  NSString* documentDirectory = [documentDirectories objectAtIndex:0];
  NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename]; 
```

// 指示可变数据对象将其上下文写入磁盘上的文件

```
 [pdfData writeToFile:documentDirectoryFilename atomically:YES];
 NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:08:06.163

您要在该视图中创建为 pdf 的视图执行以下更改

```
NSString *fileName=@"PdfFromView.pdf";
[self createPDFfromUIView:self.view saveToDocumentsWithFileName:fileName];

-(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
// Creates a mutable data object for updating with binary data, like a byte array
NSMutableData *pdfData = [NSMutableData data];

// Points the pdf converter to the mutable data object and to the UIView to be converted
UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
UIGraphicsBeginPDFPage();
CGContextRef pdfContext = UIGraphicsGetCurrentContext();

// draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

[aView.layer renderInContext:pdfContext];

// remove PDF rendering context
UIGraphicsEndPDFContext();

// Retrieves the document directories from the iOS device
NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

NSString* documentDirectory = [documentDirectories objectAtIndex:0];
NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

// instructs the mutable data object to write its context to a file on disk
[pdfData writeToFile:documentDirectoryFilename atomically:YES];
NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename); 
```

}

执行此代码后，转到文档文件夹，您将找到包含与您传入的视图相同内容的 pdf 文档

> 块引用

[self createPDFfromUIView: **self.view** saveToDocumentsWithFileName:fileName]

> 块引用

这个方法调用。这段代码运行良好感谢安东尼奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:06:58.533

取自这里：

[如何在 iOS 中将 UIView 转换为 PDF？](https://stackoverflow.com/questions/5443166/how-to-convert-uiview-to-pdf-within-ios)

```
(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
    NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
} 
```

# wpf - 带有复选框和列表框的树视图

> ID：10243196
> 
> 赞同：1
> 
> 时间：2012-04-20T09:02:25.150
> 
> 标签：wpf, listbox, treeview

我有一个树视图，其中复选框绑定到相应视图模型中名称为 Ischecked 的属性，其内容将按需加载。现在，当用户选中该框时，在 Ischecked setter 属性中，我将选中的树视图项添加到另一个通用列表（当一个节点未被选中时，它从列表中删除）。现在我有两个按钮，即选择和取消选择按钮。所以当用户检查不同的节点并按下选择时，我将使用通用更新同一用户控件中的列表框我以前的清单。
当用户想要从列表框中删除一些项目时，如何取消选中相应的树视图项目。我也做对了吗？

# android - 自定义对话框不显示 - Android

> ID：10243198
> 
> 赞同：0
> 
> 时间：2012-04-20T09:02:32.860
> 
> 标签：android, dialog, customdialog

当我单击一个按钮时，我试图弹出一个自定义对话框，但它根本不会弹出。我的应用程序基本上是一个日历，我将使用 sqlite 使用对话框将约会和内容添加/保留到日历中的日期，这是指定约会详细信息的地方。

我为此使用的代码如下：

```
public void onClick(View v) {
        // TODO Auto-generated method stub
        //long a = calendar.getDate();
        switch(v.getId()){
        case R.id.createButton:
            openCreateAppointmentDialog();
            break;
        }
    }

    private void openCreateAppointmentDialog(){
        Context mContext = getApplicationContext();
        Dialog createAppmntDialog = new Dialog(mContext);

        createAppmntDialog.setContentView(R.layout.create);
        createAppmntDialog.setTitle(R.string.createTitle);

        appointmentTitle = (EditText) createAppmntDialog.findViewById(R.id.titleTextBox);
        appointmentTitle.setText("hello");

        appointmentTime = (EditText) createAppmntDialog.findViewById(R.id.timeTextBox);

        appointmentDetails = (EditText) createAppmntDialog.findViewById(R.id.detailsTextBox);

        saveAppointment = (Button) createAppmntDialog.findViewById(R.id.saveButton);
        saveAppointment.setOnClickListener(this);
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:05:43.573

调用[`show()`](http://developer.android.com/reference/android/app/Dialog.html#show%28%29)对话框的方法。

```
createAppmntDialog.show(); //when you want the dialog to appear on the screen 
```

# java - 在实体类的枚举中使用 Entitymanager

> ID：10243202
> 
> 赞同：0
> 
> 时间：2012-04-20T09:02:50.150
> 
> 标签：java, annotations, ejb, entity, enumeration

我有以下问题。也许设计不是那么好，但我想不出更好的。

我有一个实体类**Device.java**

```
@Entity (name = "device")
public class Device {

public enum DeviceType {
    STROM,
    LICHT,
    TEMPERATUR,
    LUFTFEUCHTIGKEIT,
    BEWEGUNG,
    DIMMEN
};

public static enum HomematicAttribute {
    STATE,
    TEMPERATURE,
    HUMIDITY,
    LOWBATTERY,
    MOVEMENT,
    LEVEL
}

@Id
@GeneratedValue (strategy = GenerationType.IDENTITY)
private Integer id;

    // Some other fields and getter and setter 
```

我在那个类/实体中有这个枚举

```
public static enum HomematicDeviceName {
    LICHT_FRONT("HM_DEVICE_LICHT_FRONT", DeviceType.DIMMEN, HomematicAttribute.LEVEL), 
    LICHT_GANG("HM_DEVICE_LICHT_GANG", DeviceType.DIMMEN, HomematicAttribute.LEVEL), 
    ...

    // constructor and getters

    @PersistenceContext
    EntityManager em;

    @EJB
    private DatabaseServiceLocal databaseService;

    public Device getDevice() {
        if(em == null) System.out.println("Entitymanager ist null innerhalb der Enumeration ...");
        if(databaseService == null) System.out.println("databaseService ist null innerhalb der Enumeration ...");

        System.out.println("----");
        return (Device) em.createNamedQuery(Device.findByIdentifier).setParameter("identifier", databaseKey).getSingleResult();
    }
} 
```

em 和 databaseService 都为空。目标是从枚举和其他方式中获取实体。我不想与实体合作。相反，我想使用枚举，但有时我需要实体。所以我想我可以做这样的事情来从我的枚举中获取设备实体。

有人有想法吗？

谢谢，豪克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:18:36.683

依赖注入仅支持由容器创建的对象，例如 EJB。这是依赖框架（包括 Spring 和 Google Guice）工作的通常方式。

您可以将服务（当前未使用？）或 EntityManager 作为参数传递。

# javascript - ckeditor 中的图像上传弹出窗口在 Google chrome 中无法正常工作

> ID：10243206
> 
> 赞同：0
> 
> 时间：2012-04-20T09:03:06.913
> 
> 标签：javascript, ckeditor

当我在 ckeditor 中单击浏览服务器时，不会出现图像浏览器弹出窗口。我只在 Google Chrome 中遇到问题。我使用的是 18.0.1025.152 m 版本的 Google Chrome ![在此处输入图像描述](../Images/3c00eb7560a89914d4676cad8e10c607.png)

我在 ckeditor/plugins/popup/plugin.js 中进行了更改

```
 try
    {
        // Chrome 18 is problematic, but it's not really needed here (#8855).
        var ua = navigator.userAgent.toLowerCase();
        if ( ua.indexOf('chrome/18' ) == -1 )
        {
            popupWindow.moveTo( left, top );
            popupWindow.resizeTo( width, height );
        }
        popupWindow.focus();
        popupWindow.location.href = url;
    }
    catch ( e )
    {
        popupWindow = window.open( url, null, options, true );
    } 
```

我点击此链接[在此处输入链接描述](https://dev.ckeditor.com/changeset/7448) 但我无法解决问题。谁能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:33:30.473

如果您编辑源文件，您必须再次[重新打包](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/CKPackager)它们。[更新到CKEditor 3.6.3](http://ckeditor.com/blog/CKEditor_3.6.3_released)并获得所有其他错误修复要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:45:14.870

我正在使用 opencart 1.5.1.3 ckeditor。[我编辑 /admin/view/javascript/ckeditor/ckeditor.js 并将 javascript 代码与http://jsbeautifier.org/](http://jsbeautifier.org/)重新对齐

我已经尝试使用 ckeditor 社区的补丁并进行少量修改。有用！ [http://dev.ckeditor.com/ticket/8855](http://dev.ckeditor.com/ticket/8855)

因此，如果有人在 opencart 中遇到像我这样的类似问题，您可以尝试以下更改。

```
+++ b/v1.5.1.3/admin/view/javascript/ckeditor/ckeditor.js
@@ -9190,8 +9190,21 @@ For licensing, see LICENSE.html or http://ckeditor.com/license
         var s = window.open('', null, p, true);
         if (!s) return false;
         try {
-             s.moveTo(r, q);
-             s.resizeTo(n, o);
+             // s.moveTo(r, q);
+             // s.resizeTo(n, o); 
+             // Chrome 18 is problematic, but it's not really needed here (#8855). 
+             var ua = navigator.userAgent.toLowerCase(); 
+             var useResize = true; 
+             if (ua.indexOf('chrome') > -1) { 
+                 var chromeVersion = ua.replace(/^.*chrome\/([\d]+).*$/i, '$1') 
+                 if(chromeVersion >= 18) { 
+                     useResize = false; 
+                 } 
+             }  
+             if (useResize) {
+                 s.moveTo( r, q ); 
+                 s.resizeTo( n, o ); 
+             } 
              s.focus();
              s.location.href = m;
         } catch (t) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:28:17.517

我正在使用与 primefaces-extensions 捆绑在一起的 CKEditor 3.6.2，因此升级并不容易。但是对页面执行以下修复也有效。我将它粘贴到配置文件中，以确保在初始化 CKEDITOR 变量后触发它。

```
 CKEDITOR.editor.prototype['popup'] = function( url, width, height, options ) {
        width = width || '80%';
        height = height || '70%';

        if ( typeof width == 'string' && width.length > 1 && width.substr( width.length - 1, 1 ) == '%' )
            width = parseInt( window.screen.width * parseInt( width, 10 ) / 100, 10 );

        if ( typeof height == 'string' && height.length > 1 && height.substr( height.length - 1, 1 ) == '%' )
            height = parseInt( window.screen.height * parseInt( height, 10 ) / 100, 10 );

        if ( width < 640 )
            width = 640;

        if ( height < 420 )
            height = 420;

        var top = parseInt( ( window.screen.height - height ) / 2, 10 ),
                left = parseInt( ( window.screen.width  - width ) / 2, 10 );

        options = ( options || 'location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes' ) +
                ',width='  + width +
                ',height=' + height +
                ',top='  + top +
                ',left=' + left;

        var popupWindow = window.open( '', null, options, true );

        // Blocked by a popup blocker.
        if ( !popupWindow )
            return false;

        try
        {
            // Chrome 18 is problematic, but it's not really needed here (#8855).
            var ua = navigator.userAgent.toLowerCase();
            if ( ua.indexOf( ' chrome/18' ) == -1 )
            {
                popupWindow.moveTo( left, top );
                popupWindow.resizeTo( width, height );
            }
            popupWindow.focus();
            popupWindow.location.href = url;
        }
        catch ( e )
        {
            popupWindow = window.open( url, null, options, true );
        }

        return true;
    }

    $(document).ready(
            function() {
                setContentHeight();
                makeInstructionsTogglable();
                window.onbeforeunload = function() {
                    if (editor.isDirty()) {
                        return "Are you sure you want to navigate away? You have unsaved changes."
                    }
                };
            }
    );
    $(window).resize(function() {
        setContentHeight();
    }); 
```

# eclipse - 日食没有开始

> ID：10243209
> 
> 赞同：6
> 
> 时间：2012-04-20T09:03:28.823
> 
> 标签：eclipse

当我尝试启动 Eclipse 时，出现以下错误窗口：

```
Java was started but returned exit code=1<br>
C:\Program Files\Java\jdk1.7.0_03\bin\javaw.exe<br>
-Xms40m<br>
-Xmx384m<br>
-XX:-UseCompressedOops<br>
XMaxPermSize=256m<br>
-jar C:\Eclipse\\plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar<br>
-os win32<br>
-ws win32<br>
-arch x84_64<br>
-showsplash<br>
-launcher C:\Eclipse\eclipse.exe<br>
-name Eclipse<br>
--launcher.library C:\Eclipse\\plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502\eclipse_1406.dll<br>
-startup plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar<br>
-launcher.overrideVmargs<br>
-Xms40m<br>
-Xmx384m<br>
-XX:-UseCompressedOops<br>
-XX:MaxPermSize=256m<br>
-jar C:\Eclipse\\plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar<br> 
```

背景：

操作系统：Wndows 7 64 位 SP1
Java：jdk1.7.0_03
Eclipse：eclipse-SDK-3.7.2-win32-x86_64
Java 安装文件夹：C:\Program Files\Java\jdk1.7.0_03\
路径：C:\Program Files (x86)\PC Connectivity Solution\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;% SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files\Dell\DW WLAN Card;C:\Program Files\TortoiseSVN\bin;C:\Program Files\Perforce;C:\Program Files (x86)\Windows Live\Shared ;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;D:\Nitin Personal\Softwares\;C:\Windows\System32\;C:\Program Files\Java \jdk1.7.0_03\bin;C:\Program Files\Java\jre7\bin

以下是eclipse.ini的内容：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
openFile
-vm 
C:\Program Files\Java\jdk1.7.0_03\bin\javaw.exe
--launcher.defaultAction
-vmargs
-Xms40m
-Xmx384m
-XX:-UseCompressedOops 
```

请帮忙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T19:57:20.283

我遇到了同样的问题，并通过将值更改`-Xmx`为较低的值来解决`eclipse.ini.`

**旧的配置是：**

```
-vm C:/your_appication/jvm/jvm160_32/jre/bin/javaw.exe -vmargs -Xms128m -Xmx1024m 
```

**新的配置是：**

```
-vm C:/your_appication/jvm/jvm160_32/jre/bin/javaw.exe -vmargs -Xms128m -Xmx256m 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T09:46:51.677

我通过删除 javaw.exe 解决了这个问题。我的在 C:/Windows/system32/javaw.exe

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T07:58:29.350

在命令提示符下，调用

日食-清洁

这将成功启动 Eclipse。它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T21:53:27.190

这是默认的 eclipse.ini，还是已编辑？“openFile”应该在“--launcher.defaultAction”之后

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-06T12:08:06.513

所有响应都表明此问题可能基于您的 eclipse 配置或 java.util. 我认为应该有某种日志或弹出窗口让用户知道 IDE 无法启动的原因。就我而言，重新启动计算机解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-11T18:56:02.200

I have tried all of the above but nothing worked .Finally i re Installed my Java updates it worked

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T09:10:33.660

将此行添加到 .ini

`-vm`

`c:/apps/java/jdk1.6.0_21/jre/bin/server/jvm.dll`如果这没有帮助，请检查并查看您是否下载了正确的 Eclipse（32/64 位） 将 JDK 和 JRE 重新安装到最新版本，看看是否有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-04T15:28:01.047

-vm C:\Program Files (x86)\Java\jdk1.6.0_20\bin\javaw.exe 适用于 32 位

如果您已经下载了 64 位 eclipse 安装，请下载 JDK1.7，它会默认安装在 C:\Program Files\Java 下。

更改指向 C:\Program Files\Java\jre7\bin\javaw.exe 的 eclipse.ini 文件中的 -vm 参数。

您的问题应该以此解决。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-12T07:38:31.417

eclipse-workspace 中可能出现了问题。我让 eclipse 在启动时只显示启动画面，然后消失（=崩溃）。

通过重命名旧工作区，我能够恢复我宝贵的 RemoteSystemsExplorer 连接。然后启动 Eclipse，它会创建一个空的工作区。然后关闭eclipse。从旧工作区复制：workspace3.metadata.plugins\org.eclipse.rse.core 文件夹到新工作区文件夹。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-03T19:29:12.220

我经常遇到这个问题 - 但只是我第二次在没有重新启动 Windows 的情况下启动 Eclipse。

我正在为 Android 开发并通过确保我的测试设备在第二次和后续时间启动 Eclipse 时没有通过 USB 连接来解决问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-06T04:58:12.460

根据[Eclipse Wiki - eclipse.ini vm_value（windows 示例）](http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Windows_Example)

> 这可能不适用于所有系统。如果在启动 eclipse 时遇到“Java was started but returned exit code=1”错误，修改 -vm 参数指向 jvm.dll

所以在你的情况下

```
-vm
C:\Program Files\Java\jre7\bin\client\jvm.dll 
```

另请注意

> -vm 选项必须出现在 -vmargs 选项之前，因为 -vmargs 之后的所有内容都直接传递给 JVM

我使用 -Xmx1024m 成功运行

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-29T21:49:33.970

另一种选择是尝试降低为 -Xmx 指定的值。

在 Windows XP 机器上启动 Eclipse Helios 时我遇到了同样的错误（因此，32 位操作系统和 32 位 JDK）。我有一段时间没有在我的机器上更改任何配置，所以我很难过。

唯一的区别是我通过 RDP 连接到机器。我相信这样做会导致 Windows 在限制可用连续内存的位置加载一些额外的 DLL。就我而言，当我坐在机器前时，我始终能够启动 JVM -Xmx1280m，但我只能在通过 RDP 连接时管理 -Xmx1024m。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-10T07:31:55.510

我通过从我的 Win7 PC 中删除所有 Java 组件并为 64 位重新安装“Java SE Runtime Environment 7”来解决此问题，因为我的 Eclipse 安装也是 64 位的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-04-20T09:35:25.323

确保不要将 64 位 Java 运行时与 32 位 Eclipse IDE 混为一谈（反之亦然）。这曾经给我造成了类似的问题

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-10-08T09:37:04.400

刚变

-Dosgi.requiredJavaVersion=1.6 到 1.7

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-02-01T13:55:09.327

删除此行

-vm C:\Program Files\Java\jdk1.6.0_33\bin\javaw.exe

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-01-16T09:43:36.257

我通过添加以下行解决了这个问题

-vm C:\Program Files (x86)\Java\jdk1.6.0_24\bin\javaw.exe

我的 jbdevstudio.ini 文件中没有这一行。

我认为问题的发生是因为我已将“Java”文件夹从 C: 复制到 D:，因此现在我的系统中存在两个 javaw.exe。

注意：- 请按照上面给出的两行添加它们。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-06-03T05:45:10.593

在我的情况下，我通过在 eclipse.ini 文件中添加以下行来解决此问题

-vm C:\Program Files\Java\jdk1.8.0_91\jre\bin\javaw.exe

谢谢

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2012-12-26T23:13:50.903

我已经通过卸载所有 java 组件并重新安装 jdk 来修复它。

# visual-foxpro - vfp 报告中页面更改前的打印行

> ID：10243213
> 
> 赞同：0
> 
> 时间：2012-04-20T09:04:08.287
> 
> 标签：visual-foxpro

我正在 vfp 中创建报告。报告包含分组。在每组的最后，我画一条线。详细信息带中的每一行不包含任何行，仅在每个组的末尾。问题是当组扩展到下一页时，在上一页中我想在底部画一条线。像这样 ：

（第 1 页）

A组

> 姓名等

x1等

x2等

???如何在这里添加行？

（第2页）

A组

> 姓名等

x3等

x4等

* * *

B组

> 姓名等

y1等

y2等

* * *

我试图将该行放在页脚带中，但报告的最后一行没有确切的位置，所以看起来不太好。希望我描述的情况足够清楚。谢谢你花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:54:29.957

没有一些重要的烟雾和镜子技巧：运行报告两次，一次隐藏并通过报告中的函数调用跟踪中断的位置，然后再次用于生产，这并不容易完成。

我唯一能建议的就是在每页打印的页脚顶部放置一行。您使用 VFP 有多久了。视情况而定，我可能能够指导您完成它。

好的，这是我要采取的步骤。这是在您预先查询报表的结果并通过某种方式将它们排序到临时报表游标中的假设下。您需要在查询中添加 2 列作为占位符，并确保将光标设置为“INTO CURSOR READWRITE”，因为我们将从报告中写入……这就是诀窍。

接下来，修改您的报告。转到细节带并在其底部放置一条线。如果您在最后一个细节元素下需要几个像素，请根据需要进行调整。双击该行并进入允许您为该行输入“打印时间”条件的选项卡。输入名为“ShowLine”的新列名称之一（但不带引号）。

现在，烟雾和镜子的“钩子”。在报告详细信息中创建另一个文本框字段输出。它可以小到 2 像素宽，并且从不实际打印任何内容。可以放在报表详细信息的开头或结尾，不管，只要它在详细信息带中即可。双击它以显示它将打印的内容。在表达式中，输入以下内容... WhatPageAmIOn( _PageNo ) 这实际上将调用一个我们将添加到您的程序中的函数，该函数会写回您的报告光标...接下来我会点击它。

现在，代码。以下是我编写的代码示例片段，用于查询报告的数据、拥有额外的列并放入 READWRITE 游标。从那以后，我运行报告，但运行到 NOCONSOLE，所以它实际上并没有在视觉上做任何事情，只是在后台运行。然后它循环遍历并查找每页之间的中断并从中断处向后退 1 条记录并标记记录为“ShowLine”= .T... 然后正常再次运行报告，您的一行出现在detail band 与数据组无关，但始终是每页末尾的最后一个数据行。

这是代码

*/ 查询您的数据，按任何顺序排序，*/ 但添加两个额外字段并将其设为 READWRITE

```
select;
      YourData,;
      AnotherField,;
      MoreData,;
      .f. as ShowLine,;
      00000 as WhatPage;
   FROM ;
      YourData;
   ORDER BY ;
      WhateverForYourReport
   INTO ;
      CURSOR C_RptData READWRITE

*/ Pre-run the report NOCONSOLE so your windows don't get messed up / scrolled      
REPORT FORM YourReport NOCONSOLE 

*/ now, go back to the cursor that your report ran with 
SELECT C_RptData
*/ set a variable for the first page you are looking to find a break for.
*/ in this case, the first detail that APPEARED on page 2.
lnLastPage = 2

*/ Start at top of the report cursor file and keep going until we reach
*/ the end of file where the LOCATE can no longer find "Pages".
GO TOP
DO WHILE NOT EOF()
   */ find the first record on ex: Page 2
   LOCATE FOR WhatPage = lnLastPage
   */ Did we find one?
   IF FOUND()
      */ Yes, go backwards 1 record
      SKIP -1
      */ This is the last detail that appeared on the page before it (ie: pg 1)
      */ Mark this line as ok to "ShowLine" the next time the report is run.
      replace ShowLine WITH .T.
      */ Now, advance the page counter to look for the NEXT page break...
      */ ex: between page 2&3,  3&4,  4&5,   etc...
      lnLastPage = lnLastPage +1
   ENDIF 
ENDDO

*/ Run your final version of the report
REPORT FORM YourReport Preview  (or print)

RETURN 
```

这是下面唯一一个跟踪/更新与详细信息关联的页面的钩子。我不知道您的项目中是否有一个主要的“SET PROCEDURE TO”文件，或者只是一堆免费的 .PRG 文件，或者即使您的报告是从 PRG 文件本身完成的。但是，您只需要将此功能包含在任何这些位置中即可。对于最简单的测试，我只会将其创建为独立的 .prg 文件（如果您不使用 SET PROCEDURE，或者在 PRG 文件中而不是在类方法/事件中进行报告）。

```
FUNCTION WhatPageAmIOn
LPARAMETERS lnPage
    replace whatPage WITH lnPage
RETURN "" 
```

与原始描述一样，报表将基于函数“WhatPageamIOn”在详细信息带中包含一个字段，并传递 _PageNo 的参数，该参数是跟踪当前报表页面的内部 VFP 变量，通常用于报告页眉/页脚。因此，随着每个细节的处理，我们都在用任何页面“标记”细节数据。我们返回一个空字符串“”，因此实际上没有打印任何内容，但我们已经挂钩了我们需要的内容。由此，循环在每一页的开头（从第 2 页开始）找到第一条记录，然后向后跳到前一页的最后一个条目，我们就完成了。

祝你好运。

# vba - VBA 输入框过滤器增强功能

> ID：10243216
> 
> 赞同：1
> 
> 时间：2012-04-20T09:04:41.240
> 
> 标签：vba, excel

下面的代码工作正常。但是，当用户未在 InputBox 中包含任何内容**或**单击“关闭”按钮**或**输入不存在的值时，我希望它显示一个说明原因的 msgbox 并删除工作表“PreTotal”。

有没有更好的方法来处理用户输入？需要一些帮助来了解如何去做。谢谢你。

```
Sub Filterme()
    Dim wSheetStart As Worksheet
    Dim rFilterHeads As Range
    Dim strCriteria As String

    Set wSheetStart = ActiveSheet
    Set rFilterHeads = Range("M1", Range("M1").End(xlToLeft))

    With wSheetStart
        .AutoFilterMode = False

        rFilterHeads.AutoFilter

        strCriteria = InputBox("Enter Date - MMDDYY")

        If strCriteria = vbNullString Then Exit Sub

        rFilterHeads.AutoFilter Field:=13, Criteria1:="=*" & strCriteria & "*"
    End With

    Worksheets("PreTotal").UsedRange.Copy

    Sheets.Add.Name = "Total"

    Worksheets("Total").Range("A1").PasteSpecial

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:11:00.343

这是你正在尝试的吗？

改变

```
If strCriteria = vbNullString Then Exit Sub 
```

至

```
If strCriteria = vbNullString Then
    MsgBox "You choose not to continue"
    Application.DisplayAlerts = False
    Worksheets("PreTotal").Delete
    Application.DisplayAlerts = True
    Exit Sub
End If 
```

**跟进**

> > > 谢谢@Rout - 这工作。如果工作表中不存在输入条件怎么办？我应该如何解决这个问题？– user823911 11 分钟前

这是你正在尝试的吗？此外，如果您根据**Col M**（范围中的第一个 Col）过滤范围，则更改该行

```
rFilterHeads.AutoFilter Field:=13, Criteria1:="=*" & strCriteria & "*" 
```

至

```
rFilterHeads.AutoFilter Field:=1, Criteria1:="=*" & strCriteria & "*" 
```

**代码**

```
Sub Filterme()
    Dim wSheetStart As Worksheet
    Dim rFilterHeads As Range, aCell As Range
    Dim strCriteria As String

    Set wSheetStart = ActiveSheet
    Set rFilterHeads = Range("M1", Range("M1").End(xlToLeft))

    With wSheetStart
        .AutoFilterMode = False

        strCriteria = InputBox("Enter Date - MMDDYY")

        If strCriteria = vbNullString Then
            MsgBox "You choose not to continue"
            Application.DisplayAlerts = False
            Worksheets("PreTotal").Delete
            Application.DisplayAlerts = True
            Exit Sub
        End If

        Set aCell = .Columns(13).Find(What:=strCriteria, LookIn:=xlValues, _
        LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
        MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            MsgBox "Search Criteria Not Found"
            Exit Sub
        End If

        rFilterHeads.AutoFilter

        rFilterHeads.AutoFilter Field:=13, Criteria1:="=*" & strCriteria & "*"

        Sheets.Add.Name = "Total"
        Worksheets("PreTotal").UsedRange.Copy
        Worksheets("Total").Range("A1").PasteSpecial
    End With
End Sub 
```

# java - Java：标记/标记文件

> ID：10243217
> 
> 赞同：1
> 
> 时间：2012-04-20T09:04:41.833
> 
> 标签：java, file, flags, marker, file-conversion

我想知道是否有某种方法可以标记文件以识别文件是否包含**x**。

*考虑以下示例：*

在批量转换过程中，我正在创建一个日志文件，其中列出了单个转换的成功/失败。

所以过程如下：

*   开始转换过程
*   创建名为 batch_XXX_yyyy_mm_dd.log 的日志文件
*   **尝试转换'a'**
*   *将成功写入日志文件*
*   **尝试转换'b'**
*   *将成功写入日志文件*
*   ...
*   **尝试转换'z'**
*   *将成功写入日志文件*
*   关闭并保留日志文件

我想做的是以某种方式标记文件，以识别文件中记录的任何转换是否不成功。

我不想更改文件名（可见），也不想打开文件来检查标记。

有没有人对如何实现这一点有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:29:41.070

您可以通过[java.nio.file.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)类在[Java 7](http://docs.oracle.com/javase/7/docs/api/)中添加文件属性。

因此可以使用以下[`Files.setAttribute()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setAttribute%28java.nio.file.Path,%20java.lang.String,%20java.lang.Object,%20java.nio.file.LinkOption...%29)方法标记文件是否包含 X：

```
Files.setAttribute( "path/to/file", "containsX", true ); 
```

然后使用以下方法检查文件是否包含 X [`Files.getAttribute( )`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#getAttribute%28java.nio.file.Path,%20java.lang.String,%20java.nio.file.LinkOption...%29)：

```
Files.getAttribute( "path/to/file", "containsX" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:15:56.517

如果你正在调查说

```
file.log 
```

创建另一个将维护此信息的文件说

```
file.log.status 
```

然后，您的状态文件可以包含您需要的所有信息。将更容易获得所有文件的转换状态，并且在给定状态文件的情况下更容易映射回原始文件。

# php - PHP、HTML 文件的编辑器内拼写检查

> ID：10243220
> 
> 赞同：2
> 
> 时间：2012-04-20T09:04:45.150
> 
> 标签：php, html, xhtml, spell-checking, komodoedit

我总是无法通过编辑器检查网站的拼写，因为他们总是会拿起代码并抱怨诸如`stylesheet`或之类的事情`css`。

有什么方法可以在不使用在线工具检查内容的情况下检查所有文件的拼写？动态文本也需要检查。

我的编辑是`Komodo Edit`FWIW。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:18:58.310

尝试使用这个编辑器，它易于使用.. 尺寸更小.. 它有拼写检查器和很多东西..

[http://www.sublimetext.com/](http://www.sublimetext.com/)

下载一个编辑器..

# php - 如何为投标网站制作倒计时

> ID：10243221
> 
> 赞同：0
> 
> 时间：2012-04-20T09:04:46.353
> 
> 标签：php, javascript, jquery, mysql

我必须为投标网站创建一个倒数计时器。当我将它放在 while 循环之外时，计时器可以正常工作。但是， id 在循环内不起作用。我究竟做错了什么？这是我的代码：

```
<script>
var before=""
var current="ended"
var montharray=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

function countdown(yr,m,d,id){
theyear=yr;themonth=m;theday=d
var today=new Date()
var todayy=today.getYear()
if (todayy < 1000)
todayy+=1900
var todaym=today.getMonth()
var todayd=today.getDate()
var todayh=today.getHours()
var todaymin=today.getMinutes()
var todaysec=today.getSeconds()
var todaystring=montharray[todaym]+" "+todayd+", "+todayy+" "+todayh+":"+todaymin+":"+todaysec
futurestring=montharray[m-1]+" "+d+", "+yr
dd=Date.parse(futurestring)-Date.parse(todaystring)
dday=Math.floor(dd/(60*60*1000*24)*1)
dhour=Math.floor((dd%(60*60*1000*24))/(60*60*1000)*1)
dmin=Math.floor(((dd%(60*60*1000*24))%(60*60*1000))/(60*1000)*1)
dsec=Math.floor((((dd%(60*60*1000*24))%(60*60*1000))%(60*1000))/1000*1)
if(dday==0&&dhour==0&&dmin==0&&dsec==0){
document.getElementById(id).value=current
return
}
else
document.getElementById(id).value="Only "+dday+ " days, "+dhour+" hours, "+dmin+" minutes, and "+dsec+" seconds left "+before
setTimeout("countdown(theyear,themonth,theday,id)",1000)
}
</script>
<?php 
include('../connection.php');
    $rs = mysql_query("select * from datepic") or die(mysql_error());

    if(mysql_num_rows($rs)){

        while($row = mysql_fetch_array($rs))
        {
            $date = str_replace('-',',',$row['date']);

            echo '<input type="text" id="'.$row['id'].'" size=80>';
            ?>
            <script>
                countdown(<?php echo $date.','.$row['id'];?>)

            </script>

            <?php           

        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:09:14.677

用这个改变 setTimeout：

```
setTimeout(function(){countdown(theyear,themonth,theday,id);},1000) 
```

你可以像这样将你的函数变成 jQuery 函数：

```
jQuery.fn.countdown = function(yr,m,d){
   $that = $(this);
   theyear=yr;themonth=m;theday=d
   var today=new Date()
   var todayy=today.getYear()
   if (todayy < 1000)
      todayy+=1900
   var todaym=today.getMonth()
   var todayd=today.getDate()
   var todayh=today.getHours()
   var todaymin=today.getMinutes()
   var todaysec=today.getSeconds()
   var todaystring=montharray[todaym]+" "+todayd+", "+todayy+" "+todayh+":"+todaymin+":"+todaysec
   futurestring=montharray[m-1]+" "+d+", "+yr
   dd=Date.parse(futurestring)-Date.parse(todaystring)
   dday=Math.floor(dd/(60*60*1000*24)*1)
   dhour=Math.floor((dd%(60*60*1000*24))/(60*60*1000)*1)
   dmin=Math.floor(((dd%(60*60*1000*24))%(60*60*1000))/(60*1000)*1)
   dsec=Math.floor((((dd%(60*60*1000*24))%(60*60*1000))%(60*1000))/1000*1)
   if(dday==0 && dhour==0 && dmin==0 && dsec==0){
      $that.val(current);
      return
   }
   else
     $that.val("Only "+dday+ " days, "+dhour+" hours, "+dmin+" minutes, and "+dsec+" seconds   left "+before);
 setTimeout(function(){ $that.countdown(theyear,themonth,theday);},1000)
}

<?php 
include('../connection.php');
    $rs = mysql_query("select * from datepic") or die(mysql_error());

    if(mysql_num_rows($rs)){

        while($row = mysql_fetch_array($rs))
        {
            $date = str_replace('-',',',$row['date']);

            echo '<input type="text" id="'.$row['id'].'" size=80>';
            ?>
            <script>
                $("?php echo $row['id'] ?>").countdown(<?php echo $date?>);

            </script>

            <?php           

        }
    }

?> 
```

# iphone - NSMutableDictionary 在插入后重新排序元素

> ID：10243223
> 
> 赞同：1
> 
> 时间：2012-04-20T09:04:53.417
> 
> 标签：iphone, objective-c, ios, nsdictionary, xmppframework

> **可能重复：**
> [带有有序键的 NSDictionary](https://stackoverflow.com/questions/376090/nsdictionary-with-ordered-keys)

我在 iOS 上使用 XMPPFramework，当每次插入新的占用者/元素时，包含房间占用者的 NSDictionary 都会改变其内容的顺序，这让我感到非常惊讶。

这是每次插入后的输出。

```
<CFBasicHash 0xbccbd60 [0x1f02400]>{type = mutable dict, count = 2,entries =>
1 : <CFString 0xbcd90b0 [0x1f02400]>{contents = "4ee90610e4b08c62894a648c"} = <XMPPRoomOccupant: 0xbcd9360>
2 : <CFString 0xbe5a160 [0x1f02400]>{contents = "4eea53a6e4b08c62894a6c90"} =     <XMPPRoomOccupant: 0xbca7cc0>
}

<CFBasicHash 0xbccbd60 [0x1f02400]>{type = mutable dict, count = 3,entries =>
0 : <CFString 0xbe60710 [0x1f02400]>{contents = "4ee8fca3e4b08c62894a6489"} = <XMPPRoomOccupant: 0xbe61370>
1 : <CFString 0xbcd90b0 [0x1f02400]>{contents = "4ee90610e4b08c62894a648c"} = <XMPPRoomOccupant: 0xbcd9360>
2 : <CFString 0xbe5a160 [0x1f02400]>{contents = "4eea53a6e4b08c62894a6c90"} = <XMPPRoomOccupant: 0xbca7cc0>
}

<CFBasicHash 0xbccbd60 [0x1f02400]>{type = mutable dict, count = 4,entries =>
0 : <CFString 0xbe5a160 [0x1f02400]>{contents = "4eea53a6e4b08c62894a6c90"} = <XMPPRoomOccupant: 0xbca7cc0>
4 : <CFString 0xbe71eb0 [0x1f02400]>{contents = "4f7ade44e4b09cb64dc33b90"} = <XMPPRoomOccupant: 0xbe72950>
5 : <CFString 0xbe60710 [0x1f02400]>{contents = "4ee8fca3e4b08c62894a6489"} = <XMPPRoomOccupant: 0xbe61370>
6 : <CFString 0xbcd90b0 [0x1f02400]>{contents = "4ee90610e4b08c62894a648c"} = <XMPPRoomOccupant: 0xbcd9360>
} 
```

正如您在最后一个插入中看到的那样，它改变了 2 个元素的顺序，它也改变了它的索引。这是正常的吗？我查看了代码及其插入使用：

> [居住者 setObject:occupant forKey:aNickName];

我需要按照插入的顺序存储元素。而且我还需要通过字符串访问元素。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:11:02.057

NSDictionary 不准备包含任何顺序，而是准备包含键对象对，如果要保留顺序，则需要不同的解决方案，例如 NSArray 。

也许您需要重新考虑您的实施！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:11:27.987

我认为 NSDictionary 不记得键值对是如何插入的。您可以通过类似的方式对键或值进行排序`sortedArrayUsingSelector:`，但如果顺序很重要，则应使用 NSArray 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:12:05.997

您不必担心密钥在 中的存储顺序，因为*它*`NSDictionary`是一个没有顺序的映射。您确实关心*检索*值的顺序，因此您必须对键进行排序并按排序顺序访问值。

这是按字母顺序对键进行排序并按顺序检索值的示例：

```
NSArray *sortedKeys =[[dict allKeys] sortedArrayUsingSelector:@selector(compare:)];
for (NSString *key in sortedKeys)
{
    NSString *value = [dict objectWithKey:key];
} 
```

# java - 使用spring将http响应作为字符串获取

> ID：10243225
> 
> 赞同：2
> 
> 时间：2012-04-20T09:04:54.867
> 
> 标签：java, spring

是他们将模型传递给j​​sp、渲染jsp并使用Spring将html作为字符串返回的一种巧妙方法。然后在以编程方式触发的电子邮件中使用 html，[我不想使用 freemarker](https://stackoverflow.com/q/10242625/106261)，但也许我应该？

请求的 url 是同一个应用程序的一部分。

我希望我的服务层类之一能够调用视图并将 html 用作字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:20:15.947

您可以调用[requestDispatcher.include(request, response)](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#include%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)方法。

您将需要实现请求和响应对象。请求对象将向调度程序提供应该呈现哪个页面的所有信息，然后您将传递给调用的响应对象将结果捕获到一个字符串（例如使用 StringBuilder）。

有关更多信息，请参见[本教程](http://technologicaloddity.com/2011/10/04/render-and-capture-the-output-of-a-jsp-as-a-string/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:17:47.703

我猜一个servlet过滤器可以解决问题吗？不是真正的 Spring 解决方案，但很容易做到。

[这个答案](https://stackoverflow.com/a/1719549/211197)似乎也很相关，尽管您可能不一定想在这种情况下使用 DWR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T08:00:14.257

您可以使用 Velocity 创建[电子邮件模板](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mail.html#mail-templates-example)：

```
String text = VelocityEngineUtils.mergeTemplateIntoString(
           velocityEngine, "emailTemplate.vm", model); 
```

[Spring 参考文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mail.html)中有一个完整的章节介绍了如何使用 Spring 发送各种类型的电子邮件。

# perl - 语句修饰符在 Template Toolkit 中如何工作？

> ID：10243238
> 
> 赞同：1
> 
> 时间：2012-04-20T09:05:47.553
> 
> 标签：perl, template-toolkit

考虑这些[TT](http://template-toolkit.org/)命令（按顺序运行）：

```
[% x = "foo" %]        # x == "foo" 
[% x = "bar" IF 1 %]   # x == "bar"
[% x = "bar" IF 0 %]   # x == "" 
```

为什么`x`在第三条语句中分配给一个空字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T09:46:12.550

[http://template-toolkit.org/docs/manual/Syntax.html#section_Capturing_Block_Output](http://template-toolkit.org/docs/manual/Syntax.html#section_Capturing_Block_Output)

请注意将这种语法与副作用表示法结合使用的一个重要警告。以下指令的行为不像预期的那样：

```
[% var = 'value' IF some_condition %]   # does not work 
```

在这种情况下，该指令被解释为（为清楚起见添加了间距）

```
[% var = IF some_condition %]
   value
[% END %] 
```

而不是

```
[% IF some_condition %]
    [% var = 'value' %]
[% END %] 
```

该变量分配给 IF 块的输出，如果为 true，则返回“value”，如果为 false，则不返回任何内容。换句话说，下面的指令总是会导致 'var' 被清除。

```
[% var = 'value' IF 0 %] 
```

为了达到预期的行为，指令应该写成：

```
[% SET var = 'value' IF some_condition %] 
```

# android - 如何制作翻转效果？

> ID：10243242
> 
> 赞同：0
> 
> 时间：2012-04-20T09:06:06.117
> 
> 标签：android, android-layout, animation

我有一个图像视图，我想制作这样的翻转效果：http: [//4pda.info/uploads/posts/2012-02/1330251745_3d.png](http://4pda.info/uploads/posts/2012-02/1330251745_3d.png)

我该怎么做？

PS：

我需要动画，比如翻书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:51:56.093

您可以尝试[http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)。

# jquery - 将参数传递给jquery函数

> ID：10243243
> 
> 赞同：0
> 
> 时间：2012-04-20T09:06:07.753
> 
> 标签：jquery, parameters

```
<script>
  $(document).ready(function () {
    $("#pid1").click(function () {
        $(this).hide(SpeedEnteredByUser);
    });
});
</script>

<body>
<p id = "pid1">This is paragraph</p>
</body> 
```

单击段落时，我想调用 jquery 隐藏函数。但我想通过用户输入的速度（即慢/快）。它是如何实现的？这里**SpeedEnteredByUser**是用户输入的值（使用某种形式），我想将此值传递给隐藏函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:09:44.927

使用`.val()`jQuery 方法获取文本输入的值（应该保存您的速度值！）

```
$(this).hide(parseInt($("#hide_speed").val(),10)); 
```

**[`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)**用于确保输入的值确实是一个数字。该函数接受 2 个参数、值本身和要验证的基数值（10 表示十进制数，2 表示二进制数，16 表示六进制数等）。

也可以使用`<select>`s 和其他类型的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:09:33.797

通过 val() 函数修复您的 ID 选择器并使用表单元素的值

```
 <script>
      $(document).ready(function () {
        $("#pid1").click(function () {
            $(this).hide(parseInt($("#youtextinput").val(),10));
        });
    });
    </script>

    <body>
    <p id = "pid1">This is paragraph</p>
    <input type="text" id="youtextinput"/>
    </body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:16:32.980

你的问题很模糊......但是这里有......为了使用户能够选择速度，请将其添加到您的 HTML 中：

```
<select id="UserSelectedSpeed">
  <option value="slow">Slow</option>
  <option value="fast">Fast</option>
</select> 
```

然后执行以下操作：

```
$(document).ready(function () {
    $("#pid1").click(function () {
        $(this).hide($('#UserSelectedSpeed').val());
    });
}); 
```

`$('#UserSelectedSpeed').val()``select`从列表中获取当前选定的值。

[这里的工作示例](http://jsfiddle.net/jwvY3/)

# android - 如何在 sqlite(android) 中创建 sql 视图 (CREATE VIEW) 并进行查询？

> ID：10243249
> 
> 赞同：11
> 
> 时间：2012-04-20T09:06:22.323
> 
> 标签：android, sql, sqlite

所以我有一个表，我想使用 sql 中的“CREATE VIEW”创建另一个表。我需要制作我正在使用的表格的副本，以便我可以使用它 2x。我的 sql 查询必须是这样的：

```
SELECT A.time AS Start, B.time AS Stop
FROM time A, time B
WHERE A.id+1=B.id
AND A.bool=1
AND B.bool=0 
```

我的初始表是：

```
 String sql="create table "+TABLE+" ( "+C_ID+" INTEGER PRIMARY KEY AUTOINCREMENT, "
+C_TIME+" TEXT, "+C_BOOL+" NUMERIC)"; 
```

所以任何人都有任何想法（在我的代码中）我可以在哪里创建视图以及如何在 android 中查询它？

如果需要，我可以提供代码

谢谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T09:35:29.783

基于[此](http://www.sqlite.org/lang_createview.html)，您将使用以下语句创建视图：

```
CREATE VIEW view_name AS 
    SELECT A.time AS Start, B.time AS Stop
    FROM time A, time B
    WHERE A.id+1=B.id
        AND A.bool=1
        AND B.bool=0 
```

您可以在创建“基本”表后立即创建它。

您可以像查询任何其他表一样查询它。

# java - Java - 通过鼠标拖动滚动图像

> ID：10243257
> 
> 赞同：10
> 
> 时间：2012-04-20T09:06:42.423
> 
> 标签：java, swing, mouseevent, jscrollpane, drag

我想在 Java 中创建一个 join.me。

我已经制作了屏幕截图部分，但现在我想通过拖动鼠标来滚动图像。

这是我所做的屏幕： ![在此处输入图像描述](../Images/d49ec3aa59f534d8a3e7b8e2da812507.png)

首先，我想通过鼠标拖动图像来替换滚动条。是否可以？然后我想删除那些滚动条。

如今，用户可以更改缩放并使用鼠标滚轮进行放大/缩小。

你可以帮帮我吗？

谢谢。

* * *

编辑：我找到了隐藏滚动条的方法：

```
this.jScrollPane1.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
this.jScrollPane1.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-20T11:49:14.973

最后，我自己做了。如果有人需要，这是解决方案：

创建一个`HandScrollListener`使用以下代码命名的新类：

```
import java.awt.Cursor;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JLabel;
import javax.swing.JViewport;

public class HandScrollListener extends MouseAdapter
{
    private final Cursor defCursor = Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR);
    private final Cursor hndCursor = Cursor.getPredefinedCursor(Cursor.HAND_CURSOR);
    private final Point pp = new Point();
    private JLabel image;

    public HandScrollListener(JLabel image)
    {
        this.image = image;
    }

    public void mouseDragged(final MouseEvent e)
    {
        JViewport vport = (JViewport)e.getSource();
        Point cp = e.getPoint();
        Point vp = vport.getViewPosition();
        vp.translate(pp.x-cp.x, pp.y-cp.y);
        image.scrollRectToVisible(new Rectangle(vp, vport.getSize()));
        pp.setLocation(cp);
    }

    public void mousePressed(MouseEvent e)
    {
        image.setCursor(hndCursor);
        pp.setLocation(e.getPoint());
    }

    public void mouseReleased(MouseEvent e)
    {
        image.setCursor(defCursor);
        image.repaint();
    }
} 
```

然后在你的框架中放置：

```
HandScrollListener scrollListener = new HandScrollListener(label_to_move);
jScrollPane.getViewport().addMouseMotionListener(scrollListener);
jScrollPane.getViewport().addMouseListener(scrollListener); 
```

它应该工作！

# apache - Apache 的活动和空闲连接是否有助于 MaxClients？

> ID：10243258
> 
> 赞同：0
> 
> 时间：2012-04-20T09:06:51.017
> 
> 标签：apache

有没有一种方法/命令可以运行以查看：

1.  活跃的 Apache 工作人员及其总数
2.  由于其 KeepAlive 超时值 (TIME_WAIT???) 而未使用的等待工作人员
3.  由于 Apache 已达到 MaxClients 限制而排队的访客总数？
4.  任何关于排队是否正在发生，或者我的 MaxClients 设置是否正常的指示。
5.  Apache MaxClients 是设置活动和空闲 Apache 进程的总数，还是只是活动的？

我们目前有一个服务器似乎正在访问 MaxClients，但不是活动连接，而是等待连接。这可能吗？

感谢一百万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:30:54.107

可能 mod_status 是您正在寻找的？

[http://www.apache.org/server-status](http://www.apache.org/server-status)

# android - 我收到此错误（InputDispacher），但为什么？

> ID：10243264
> 
> 赞同：1
> 
> 时间：2012-04-20T09:07:16.280
> 
> 标签：android, android-logcat

我的 Android 应用程序崩溃了，在 LogCat 中留下了这个不太有见地的消息：（关于应用程序的信息：它应该成为一个游戏。有一天。在我的渲染循环中，一切正常，大约 100 帧。这个问题发生在我添加了 OpenGL 方法之后绘制形状。）

```
04-20 10:45:12.714: I/DEBUG(31): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
04-20 10:45:12.714: I/DEBUG(31): Build fingerprint: 'generic/sdk/generic:2.3.3/GRI34/101070:eng/test-keys'
04-20 10:45:12.714: I/DEBUG(31): pid: 950, tid: 960  >>> game.main <<<
04-20 10:45:12.714: I/DEBUG(31): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 002ba000
04-20 10:45:12.714: I/DEBUG(31):  r0 80000000  r1 ffffff99  r2 0000008e  r3 00010000
04-20 10:45:12.714: I/DEBUG(31):  r4 002b9ff8  r5 002a5300  r6 0000000e  r7 002b9ff8
04-20 10:45:12.714: I/DEBUG(31):  r8 0000000c  r9 00000012  10 00000000  fp 002a4060
04-20 10:45:12.724: I/DEBUG(31):  ip 00000029  sp 43fceae0  lr ac405980  pc ac405984  cpsr a0000010
04-20 10:45:12.824: I/DEBUG(31):          #00  pc 00005984  /system/lib/egl/libGLES_android.so
04-20 10:45:12.824: I/DEBUG(31):          #01  pc 0000416c  /system/lib/egl/libGLES_android.so
04-20 10:45:12.824: I/DEBUG(31):          #02  pc 00005540  /system/lib/egl/libGLES_android.so
04-20 10:45:12.824: I/DEBUG(31):          #03  pc 000060a8  /system/lib/egl/libGLES_android.so
04-20 10:45:12.824: I/DEBUG(31):          #04  pc 00017d74  /system/lib/libdvm.so
04-20 10:45:12.824: I/DEBUG(31): code around pc:
04-20 10:45:12.824: I/DEBUG(31): ac405964 e5920000 e1a05001 e1a04002 ebfff8f6 
04-20 10:45:12.824: I/DEBUG(31): ac405974 e5850000 e5940004 ebfff8f3 e5850004 
04-20 10:45:12.824: I/DEBUG(31): ac405984 e5940008 ebfff8f0 e5850008 e8bd8070 
04-20 10:45:12.834: I/DEBUG(31): ac405994 e92d4070 e5920000 e1a05001 e1a04002 
04-20 10:45:12.834: I/DEBUG(31): ac4059a4 ebfff8e9 e5850000 e5940004 ebfff8e6 
04-20 10:45:12.834: I/DEBUG(31): code around lr:
04-20 10:45:12.834: I/DEBUG(31): ac405960 e92d4070 e5920000 e1a05001 e1a04002 
04-20 10:45:12.834: I/DEBUG(31): ac405970 ebfff8f6 e5850000 e5940004 ebfff8f3 
04-20 10:45:12.834: I/DEBUG(31): ac405980 e5850004 e5940008 ebfff8f0 e5850008 
04-20 10:45:12.834: I/DEBUG(31): ac405990 e8bd8070 e92d4070 e5920000 e1a05001 
04-20 10:45:12.834: I/DEBUG(31): ac4059a0 e1a04002 ebfff8e9 e5850000 e5940004 
04-20 10:45:12.834: I/DEBUG(31): stack:
04-20 10:45:12.834: I/DEBUG(31):     43fceaa0  419036d8  /dev/ashmem/dalvik-LinearAlloc (deleted)
04-20 10:45:12.834: I/DEBUG(31):     43fceaa4  80049123  /system/lib/libdvm.so
04-20 10:45:12.834: I/DEBUG(31):     43fceaa8  4057b168  /dev/ashmem/dalvik-heap (deleted)
04-20 10:45:12.834: I/DEBUG(31):     43fceaac  80085704  /system/lib/libdvm.so
04-20 10:45:12.834: I/DEBUG(31):     43fceab0  00000007  
04-20 10:45:12.834: I/DEBUG(31):     43fceab4  0000001c  
04-20 10:45:12.834: I/DEBUG(31):     43fceab8  002a3920  [heap]
04-20 10:45:12.834: I/DEBUG(31):     43fceabc  0000001c  
04-20 10:45:12.834: I/DEBUG(31):     43fceac0  002a3920  [heap]
04-20 10:45:12.834: I/DEBUG(31):     43fceac4  0000e810  [heap]
04-20 10:45:12.834: I/DEBUG(31):     43fceac8  002a4c00  [heap]
04-20 10:45:12.834: I/DEBUG(31):     43fceacc  00000010  
04-20 10:45:12.844: I/DEBUG(31):     43fcead0  002a5200  [heap]
04-20 10:45:12.844: I/DEBUG(31):     43fcead4  ac410788  /system/lib/egl/libGLES_android.so
04-20 10:45:12.844: I/DEBUG(31):     43fcead8  df002777  
04-20 10:45:12.844: I/DEBUG(31):     43fceadc  e3a070ad  
04-20 10:45:12.844: I/DEBUG(31): #00 43fceae0  002a5300  [heap]
04-20 10:45:12.844: I/DEBUG(31):     43fceae4  002a3920  [heap]
04-20 10:45:12.844: I/DEBUG(31):     43fceae8  0000000e  
04-20 10:45:12.844: I/DEBUG(31):     43fceaec  ac404170  /system/lib/egl/libGLES_android.so
04-20 10:45:12.844: I/DEBUG(31): #01 43fceaf0  00000012  
04-20 10:45:12.844: I/DEBUG(31):     43fceaf4  002a4c00  [heap]

04-20 10:45:12.844: I/DEBUG(31):     43fceaf8  002a3920  [heap]
04-20 10:45:12.844: I/DEBUG(31):     43fceafc  00000012  
04-20 10:45:12.844: I/DEBUG(31):     43fceb00  00000012  
04-20 10:45:12.844: I/DEBUG(31):     43fceb04  00000000  
04-20 10:45:12.844: I/DEBUG(31):     43fceb08  00003f3f  
04-20 10:45:12.844: I/DEBUG(31):     43fceb0c  00000542  
04-20 10:45:12.844: I/DEBUG(31):     43fceb10  442c89f7  /dev/ashmem/dalvik-jit-code-cache (deleted)
04-20 10:45:12.844: I/DEBUG(31):     43fceb14  ac405544  /system/lib/egl/libGLES_android.so
04-20 10:45:13.974: I/BootReceiver(61): Copying /data/tombstones/tombstone_00 to DropBox (SYSTEM_TOMBSTONE)
04-20 10:45:14.004: D/Zygote(33): Process 950 terminated by signal (11)
04-20 10:45:14.004: E/InputDispatcher(61): channel '406bdbd0 game.main/game.main.Game (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
04-20 10:45:14.004: E/InputDispatcher(61): channel '406bdbd0 game.main/game.main.Game (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

# php - 如何使用php计算jqgrid新增记录的页面

> ID：10243265
> 
> 赞同：0
> 
> 时间：2012-04-20T09:07:20.343
> 
> 标签：php, jquery, jqgrid

我在计算后端 jqgrid 新添加记录的页码时遇到问题，以便在重新加载网格时可以专注于该行。谁能告诉我这样做的逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:36:07.517

当您添加新行时，它会自动生成页码和所有页码。我不知道你是如何实现 jqgrid 的。你能在这里展示你的代码吗？

# android - 安卓复选框

> ID：10243269
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:07:25.547
> 
> 标签：android, checkbox

我需要一个用于以下内容的 xml 文件：我有一个复选框按钮。当我单击它时，屏幕上将出现另外 3 个复选框按钮。怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:12:50.237

取决于你怎么做。您可以在布局文件中添加三个额外的复选框，然后将它们设置为不可见，直到选中正确的复选框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:12:58.277

只需将所有复选框添加到布局中，使它们都可见，然后使用这样的代码使一些动态可见/不可见：

```
findViewById(R.id.checkbox5).setVisibility(View.VISIBLE)

findViewById(R.id.checkbox5).setVisibility(View.GONE) 
```

`android:visibility="gone"`您可以在 XML 中使用设置默认可见性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:11:03.933

您可以使新复选框可见。

或者

您可以扩充新的复选框并添加到所需的布局。

如下是添加多个图像的代码

```
p

rivate LayoutInflater  inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

                            circleLinearLayout.removeAllViews();

                while (circlesNeedToDisplay > 0) {
                    ImageView imageView = (ImageView) inflater.inflate(
                            R.layout.circle_item, null);
                    circleLinearLayout.addView(imageView);
                    circles.add(imageView);
                    circlesNeedToDisplay--;
                } 
```

* * *

**R.layout.circle_item**的 xml 代码

 **```
<?xml version="1.0" encoding="utf-8"?>
<ImageView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:paddingTop="10dip"
        android:background="@drawable/circle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/> 
```

通过使用相同的过程，您也可以添加复选框。**

# iphone - 如何访问作为对象实例属性的可变数组并用值填充该数组

> ID：10243272
> 
> 赞同：0
> 
> 时间：2012-04-20T09:07:47.330
> 
> 标签：iphone, ios5, nsmutablearray, xcode4.3

我有一个卡片对象，它有 4 个实例变量，即 name(NSString)、pin(NSString)、points(NSNumber)、pointsToDeduct(NSMutableArray)。

卡片.h

```
@interface Card : NSObject

    @property (nonatomic, strong) NSString *name;
    @property (nonatomic, strong) NSString *pin;
    @property (nonatomic, strong) NSNumber *points;
    @property (nonatomic, strong) NSMutableArray *pointsToDeduct;

@end 
```

这个 pointsToDeduct 数组总是存在于我制作的每个新的 Card 实例中。我想要的是用另一个数组的值填充它的值，这些值通过单击按钮是静态的。但在此之前，在下面的代码中，我将这些静态值转换为 NSNumber，这样 pointsToDeduct 的值将是 NSNumber 类型。我正在考虑委派这样做，但不确定是否最好。现在我想访问该 pointsToDeduct 数组，以便在其中添加值。

*这是 PerksDetailsViewController.m 的一部分

```
- (IBAction)redeemPressed:(id)sender {

     NSNumber *pointsRequired;
     NSNumberFormatter * formatter = [[NSNumberFormatter alloc] init];
     [formatter setNumberStyle:NSNumberFormatterDecimalStyle];

     pointsRequired = [formatter numberFromString: (self.pointsLabel.text)];

     NSLog(@"points required by the perk %@", pointsRequired);

    // now insert pointsRequired's value to pointsToDeduct array instance variable of a Card 
```

以下是我拥有的其他代码。

主视图 CardWalletViewController.h

```
#import <UIKit/UIKit.h>

@interface CardWalletViewController : UITableViewController 

@property (nonatomic, strong) NSMutableArray *myWallet;

-(void) printArrayContents; 
```

CardWalletViewController.m

```
#import "CardWalletViewController.h"
#import "AddCardViewController.h"
#import "Card.h"
#import "CardDetailsViewController.h"

@interface CardWalletViewController () <AddCardDelegate>

@end

@implementation CardWalletViewController

@synthesize myWallet = _myWallet;

- (NSMutableArray *) myWallet
{
    if (_myWallet == nil) _myWallet = [[NSMutableArray alloc] init]; 
    return _myWallet;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showAddCardVC"]) {
        AddCardViewController *addCardVC = (AddCardViewController *)segue.destinationViewController;

        addCardVC.delegate = self;

    }
}

- (void)printArrayContents 
{

    // I want to show the name of each instance

    for ( int i = 0; i < self.myWallet.count; i++) {
        Card *cardDummy = [self.myWallet objectAtIndex:i];
        NSLog(@"Element %i is %@", i,cardDummy.name );
    }
}

- (void)addCardViewController:(AddCardViewController *)sender didCreateCard:(Card *)newCard
{
    // insert a new card to the array

    [self.myWallet addObject:newCard];

    [self printArrayContents];
    [self.tableView reloadData];
}

- (void)saveMyWallet: (NSMutableArray *)myWallet
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject:self.myWallet forKey:@"myWalletArray"];

    [defaults synchronize];
    NSLog(@"I am saved");
}

- (NSMutableArray *)loadWallet 
 {
    NSMutableArray *boom;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    boom = [defaults objectForKey: @"myWalletArray"];

    if (!boom) {
        boom = [[NSMutableArray alloc] init];
    }

 return boom;

}

- (void)viewDidLoad
{
    [self loadWallet];
    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];

    // Release any retained subviews of the main view.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    //this method will return the number of rows to be shown
    return self.myWallet.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }

    Card *cardDummy = [self.myWallet objectAtIndex:indexPath.row];
    cell.textLabel.text = cardDummy.name;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%@", cardDummy.points]; 

    return cell;
}

- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //this method is responsible for showing the details of a selected card
    //make another view controller - DetailVC perhaps

    CardDetailsViewController *details = [self.storyboard instantiateViewControllerWithIdentifier:@"cardDetails"];

    Card *cardDummy = [self.myWallet objectAtIndex:indexPath.row];

    details.myPoints = [NSString stringWithFormat:@"%@", cardDummy.points];

    [self.navigationController pushViewController:details animated:YES];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 60;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

我创建新卡的方式

AddCardViewController.m

```
#import "AddCardViewController.h"
#import "Card.h"
#import "CardWalletViewController.h"

@interface AddCardViewController ()

@end

@implementation AddCardViewController 

@synthesize cardNameTextField = _cardNameTextField;
@synthesize pinTextField = _pinTextField;
@synthesize pointsTextField = _pointsTextField;

@synthesize delegate = _delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.cardNameTextField becomeFirstResponder];

}    

- (BOOL) textFieldShouldReturn:(UITextField *)textField{

    if ([textField.text length]) {
    [self.cardNameTextField resignFirstResponder];

    [self.pinTextField resignFirstResponder];

    [self.pointsTextField resignFirstResponder];

    return YES;
    }

    else {
        return NO;
    }
}

- (void)viewDidLoad
{
    self.cardNameTextField.delegate = self;
    self.pinTextField.delegate = self;
    self.pointsTextField.delegate = self;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setCardNameTextField:nil];
    [self setPinTextField:nil];
    [self setPointsTextField:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)addCard:(id)sender 
{
    Card *myNewCard = [[Card alloc] init];

    myNewCard.name = self.cardNameTextField.text;

    myNewCard.pin = self.pinTextField.text;

    NSNumber *myPoints;
    NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
    [f setNumberStyle:NSNumberFormatterDecimalStyle];

    myPoints = [f numberFromString: (self.pointsTextField.text)];

    myNewCard.points = myPoints;

    //method here that will dismiss the modal view
    // if condition forces the user to fill up all the text field

    if ([self.cardNameTextField.text length] && [self.pinTextField.text length] && [self.pointsTextField.text length]) 
    {
        //method here that will dismiss the modal view
        [[self presentingViewController] dismissModalViewControllerAnimated:YES];

        //checking...
        NSLog(@"name saved %@", myNewCard.name);
        NSLog(@"pin saved %@", myNewCard.pin);
        NSLog(@"points saved %@", myNewCard.points);

        [self.delegate addCardViewController:self didCreateCard:myNewCard];

        // to check if there is a delegate
        /*
         if (self.delegate){
            NSLog(@"delegate is not nil");
        }
         */
    }
}

@end 
```

AddCardViewController.h

```
#import <UIKit/UIKit.h>
#import "Card.h"

@class AddCardViewController;

@protocol AddCardDelegate <NSObject>

- (void)addCardViewController:(AddCardViewController *)sender
                didCreateCard:(Card *) newCard;

@end

@interface AddCardViewController : UIViewController <UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITextField *cardNameTextField;
@property (strong, nonatomic) IBOutlet UITextField *pinTextField;
@property (strong, nonatomic) IBOutlet UITextField *pointsTextField;

@property (nonatomic, strong) id <AddCardDelegate> delegate;

@end 
```

CardDetailsViewController.m

```
#import "CardDetailsViewController.h"
#import "PerksDetailsViewController.h"
#import "Card.h"

@interface CardDetailsViewController ()

@end

@implementation CardDetailsViewController

@synthesize pointsLabel = _pointsLabel;
@synthesize myPoints  = _myPoints;

@synthesize perks = _perks;
@synthesize datasource = _datasource;
@synthesize datasourcePoints = _datasourcePoints;

-(void)setupArray
{
    self.perks = [[NSMutableDictionary alloc] init];
    [self.perks setObject:@"200" forKey:@"10% Discount"];
    [self.perks setObject:@"100" forKey:@"250Php Off"];

    self.datasource = [self.perks allKeys]; //contains perk's description
    self.datasourcePoints = [self.perks allValues]; //contains perk's required points
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return 2;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [self.datasource objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [self.datasourcePoints objectAtIndex:indexPath.row];

    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PerksDetailsViewController *perksDetails = [self.storyboard instantiateViewControllerWithIdentifier:@"detailsOfMyPerks"];
    [self.navigationController pushViewController:perksDetails animated:YES];

    perksDetails.perkDetailsLabel.text = [self.datasource objectAtIndex:indexPath.row];
    perksDetails.pointsLabel.text = [self.perks objectForKey:perksDetails.perkDetailsLabel.text];
}

- (void)viewDidLoad
{

    //show the number of points of the selected Card

    self.pointsLabel.text = self.myPoints;
    self.navigationItem.title = @"Your Points";

    [self setupArray];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setPointsLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

@end 
```

CardDetailsViewController.h

```
#import <UIKit/UIKit.h>

@interface CardDetailsViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> 
{

}

@property (nonatomic, retain) NSMutableDictionary *perks;
@property (nonatomic, retain) NSArray *datasource;
@property (nonatomic, retain) NSArray *datasourcePoints;

-(void)setupArray;

@property (strong, nonatomic) IBOutlet UILabel *pointsLabel;
@property (nonatomic, weak) NSString *myPoints;

@end 
```

PerksDetailsViewController.m

```
#import "PerksDetailsViewController.h"
#import "Card.h"
#import "CardWalletViewController.h"

@interface PerksDetailsViewController ()

@end

@implementation PerksDetailsViewController

@synthesize pointsLabel = _pointsLabel;
@synthesize perkDetailsLabel = _perkDetailsLabel;
@synthesize perkDetailText = _perkDetailText;
@synthesize pointsText = _pointsText;

- (IBAction)redeemPressed:(id)sender {
    // get required points of a perk selected
    // cast the NSString value to an int/NSInteger

     NSNumber *pointsRequired;
     NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
     [f setNumberStyle:NSNumberFormatterDecimalStyle];

     pointsRequired = [f numberFromString: (self.pointsLabel.text)];

    NSLog(@"points required by the perk %@", pointsRequired);

    // now insert this value to points array instance variable of a Card        

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    //self.perkDetailsLabel.text = self.perkDetailText;
    //self.pointsLabel.text = self.pointsText;
    NSLog(@"perk detail:%@", self.perkDetailText);
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setPerkDetailsLabel:nil];
    [self setPointsLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

PerksDetailsViewController.h

```
#import <UIKit/UIKit.h>

@interface PerksDetailsViewController : UIViewController
{
    NSString *perkDetailText;
    NSString *pointsText;
    IBOutlet UILabel *perkDetailsLabel;
    IBOutlet UILabel *pointsLabel;
}

@property (nonatomic, retain) IBOutlet UILabel *perkDetailsLabel, *pointsLabel;

@property (nonatomic, retain) NSString *perkDetailText, *pointsText;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:13:03.473

在当前类 [NSMutable Array 从一个类到 iPhone 中的另一个类](https://stackoverflow.com/questions/10242241/nsmutable-array-from-one-class-to-another-class-in-iphone/10242282#10242282)

```
#import "SecondViewController"
 SecondViewController *NextViewController = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

        NextViewController.nextClasssArray = thisClassarray; 
```

在二等舱.h

```
@property(nonatomic,retain) NSMutableArray *nextClasssArray;
in second class .m

@synthesize nextClasssArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:24:00.430

您的 PerksDetailViewController 需要具有当前 Card 对象的属性。那么，这只是一个问题

```
[self.card.pointsToDeduct addObject:pointsRequired]; 
```

我无法在您的所有示例代码中看到您实际使用任何 Card 对象的位置。

# ios - 应用程序运行后台时的IOS Http post

> ID：10243275
> 
> 赞同：0
> 
> 时间：2012-04-20T09:08:01.080
> 
> 标签：ios

我来自android背景..当应用程序在后台运行时，我们可以每5分钟做一次http post吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:05:48.393

从技术上讲：是的。这是可能的。您可以在越狱设备以及企业部署 Aoo 上执行此操作。您可以使用[VOIP 应用程序模式](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)。

如果您想通过 iTunes App Store 部署该应用程序，您将收到来自苹果的“拒绝”。苹果目前不允许使用后台应用程序（仅限真正的 VOIP 应用程序、后台音乐和 GPS 跟踪应用程序）。知道为什么？因为在后台运行的每个应用程序都会消耗大量电池电量。

# jquery - Json modelbinder不适用于嵌套列表 ASP.NET MVC 3

> ID：10243282
> 
> 赞同：0
> 
> 时间：2012-04-20T09:08:25.960
> 
> 标签：jquery, ajax, json, asp.net-mvc-3, model-binding

我正在将 JSON 对象发送到操作方法。客户端一切正常，JSON 对象看起来正确，但设置的唯一值是简单属性。List 上的计数始终为 0。

这是发送到服务器的 JSON 对象的示例。我刚刚提醒了整个 JSON 字符串并将其粘贴在下面：

```
{"Tags":"
[{\"Id\":0,\"Title\":\"Windows 8\",\"TagType\":\"Generic\"},{\"Id\":0,\"Title\":\"Dreamweaver\",\"TagType\":\"Generic\"},{\"Id\":0,\"Title\":\"Word\",\"TagType\":\"Generic\"}]",
"CurrentPage":"5",
"ItemsPerPage":"10",
"SearchPhrase":"blaha"} 
```

以下是 C# 类：

```
public class SearchParams
{
    public List<Tag> Tags { get; set; }
    public string ItemsPerPage { get; set; }
    public string SearchPhrase { get; set; }
    public string CurrentPage { get; set; }
}

public class Tag
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string TagType { get; set; }
} 
```

下面是动作方法：

```
 public JsonResult Search(SearchParams searchParams)
 {
    //Stuff happens here
 } 
```

模型绑定适用于三个字符串属性：

```
ItemsPerPage == 10
SearchPhrase == "blaha"
CurrentPage == 5
Tag.Count == 0 ???? 
```

这里应该有 3 个标签项 :(

我在这里遗漏了一些明显的东西吗？

br

金

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:15:50.620

首先检查你的 json ..

```
{     "Tags": " [{\"Id\":0,\"Title\":\"Windows 8\",\"TagType\":\"Generic\"},{\"Id\":0,\"Title\":\"Dreamweaver\",\"TagType\":\"Generic\"},{\"Id\":0,\"Title\":\"Word\",\"TagType\":\"Generic\"}]",     "CurrentPage": "5",     "ItemsPerPage": "10",     "SearchPhrase": "blaha" } 
```

我通过 json 验证器对其进行了测试，您的 json 中有一些错误..

```
 http://jsonlint.com/

http://jsonformatter.curiousconcept.com/ 
```

核实..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T16:56:59.087

这是旧的，但为了记录，创建通用列表的默认构造函数是我所做的，它总是有效的：

```
public class SearchParams
{
    public List<Tag> Tags { get; set; }
    public string ItemsPerPage { get; set; }
    public string SearchPhrase { get; set; }
    public string CurrentPage { get; set; }

    public SearchParams() {
        Tags = new List<Tag>();
    }
} 
```

# jasper-reports - parent_table.field_name 的表达式语法

> ID：10243287
> 
> 赞同：0
> 
> 时间：2012-04-20T09:08:47.640
> 
> 标签：jasper-reports

如果我的 JasperReport 报告显示来自 SQL 查询的数据，如下所示：

```
SELECT 
"invoices"."invoice_id", 
"invoices"."name", 
"invoices"."contact_id", 
"relationship_contacts"."name", 
FROM "invoices"
LEFT JOIN "contacts" AS "relationship_contacts" ON ("invoices"."contact_id" = "relationship_contacts"."contact_id") 
```

我应该如何在 JRDesignExpression.setText() 中指定 invoices.name 和 relationship_contacts.name？这似乎无效：

```
$F{relationship_contacts.name} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:29:48.187

通常在 iReport 中，您只需单击“读取字段”即可运行查询并让 iReport 定义报告中的所有返回字段和字段。在您的情况下，该字段的名称似乎与您在 SQL 结果集中的想法不完全一样。尝试明确指定它：

```
SELECT
  "relationship_contacts"."name" as the_name
FROM ... 
```

那么这肯定会起作用：`$F{the_name}`

# haskell - 在 Haskell 中确定匹配的括号

> ID：10243290
> 
> 赞同：2
> 
> 时间：2012-04-20T09:09:08.603
> 
> 标签：haskell, parentheses

假设我有一个字符串，例如：

```
abc(def(gh)il(mn(01))afg)lmno(sdfg*) 
```

如何确定第一个匹配的括号？（意思`(def(gh)il(mn(01))afg)`）

我试图通过计算开括号的数量直到第一个')'来创建一个 between 函数，但它不适用于像这样的字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T09:35:01.557

您可以使用一个函数来简单地遍历字符串，同时跟踪一堆左括号的索引。每当您遇到右括号时，您就知道它与堆栈顶部的索引匹配。

例如：

```
parenPairs :: String -> [(Int, Int)]
parenPairs = go 0 []
  where
    go _ _        []         = []
    go j acc      ('(' : cs) =          go (j + 1) (j : acc) cs
    go j []       (')' : cs) =          go (j + 1) []        cs -- unbalanced parentheses!
    go j (i : is) (')' : cs) = (i, j) : go (j + 1) is        cs
    go j acc      (c   : cs) =          go (j + 1) acc       cs 
```

此函数返回属于匹配括号对的所有索引对的列表。

将该函数应用于您的示例字符串给出：

```
> parenPairs "abc(def(gh)il(mn(01))afg)lmno(sdfg*)"
[(7,10),(16,19),(13,20),(3,24),(29,35)] 
```

您感兴趣的左括号出现在索引 3。返回的列表显示匹配的右括号将在索引 24 处找到。

以下函数为您提供了字符串的所有正确括号段：

```
parenSegs :: String -> [String]
parenSegs s = map (f s) (parenPairs s)
  where
    f s (i, j) = take (j - i + 1) (drop i s) 
```

例如：

```
> parenSegs "abc(def(gh)il(mn(01))afg)lmno(sdfg*)"
["(gh)","(01)","(mn(01))","(def(gh)il(mn(01))afg)","(sdfg*)"] 
```

按照 Frerich Raabe 的建议，我们现在也可以编写一个只返回最左边段的函数：

```
firstParenSeg :: String -> String
firstParenSeg s = f s (minimum (parenPairs s))
  where
    f s (i, j) = take (j - i + 1) (drop i s) 
```

例如：

```
> firstParenSeg "abc(def(gh)il(mn(01))afg)lmno(sdfg*)"
"(def(gh)il(mn(01))afg)" 
```

请注意，`firstParenSeg`如果输入字符串不包含至少一对匹配的括号，则会失败。

最后，对该函数的一个小修改`parenPairs`让它在不平衡的括号上失败：

```
parenPairs' :: String -> [(Int, Int)]
parenPairs' = go 0 []
  where
    go _ []        []         = []
    go _ (_ : _ )  []         = error "unbalanced parentheses!"
    go j acc       ('(' : cs) =          go (j + 1) (j : acc) cs
    go j []        (')' : cs) = error "unbalanced parentheses!"
    go j (i : is)  (')' : cs) = (i, j) : go (j + 1) is        cs
    go j acc       (c   : cs) =          go (j + 1) acc       cs 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:34:54.587

使用辅助`go`函数的简单新手解决方案。

```
brackets :: String -> String
brackets string = go string 0 False
  where go (s:ss) 0 False | s /= '(' = go ss 0 False
        go ('(':ss) 0 False = '(' : go ss 1 True
        go (')':_) 1 True = ")"
        go (')':ss) n True = ')' : go ss (n-1) True
        go ('(':ss) n True = '(' : go ss (n+1) True
        go (s:ss) n flag = s : go ss n flag 
        go "" _ _ = "" 
```

这个想法是为每个 记住一些左括号的计数器`Char`。当该计数器等于 1 并且`Char`等于`)`时 - 是时候返回所需的字符串了。

```
> brackets "abc(def(gh)il(mn(01))afg)lmno(sdfg*)"
"(def(gh)il(mn(01))afg)" 
```

请注意，对于不平衡的字符串，此函数将返回带有未闭合括号的字符串，如下所示：

```
> brackets "a(a(a"
"(a(a" 
```

可以通过另一个模式匹配条件来避免。

* * *

**更新**：

更具可读性的解决方案是如果括号平衡以及在其他情况下返回需要子字符串的`balancedSubstring`函数。`:: String -> Maybe String``Just``Nothing`

```
brackets :: String -> String
brackets string = go string 0 False
  where go (s:ss) 0 False | s /= '(' = go ss 0 False
        go ('(':ss) 0 False = '(' : go ss 1 True
        go (')':_) 1 True = ")"
        go (')':ss) n True = ')' : go ss (n-1) True
        go ('(':ss) n True = '(' : go ss (n+1) True
        go (s:ss) n flag = s : go ss n flag
        go "" _  _ = ""

isBalanced :: String -> Bool
isBalanced string = go string 0
  where go ('(':ss) n = go ss (n+1)
        go (')':ss) n | n > 0 = go ss (n-1)
        go (')':_ ) n | n < 1 = False
        go (_:ss) n = go ss n
        go "" 0 = True
        go "" _ = False

balancedSubstring :: String -> Maybe String
balancedSubstring string | isBalanced string = Just $ brackets string
balancedSubstring string | otherwise         = Nothing 
```

所以现在`balancedSubstring`函数的结果更容易理解：

```
> balancedSubstring "abc(def(gh)il(mn(01))afg)lmno(sdfg*)"
Just "(def(gh)il(mn(01))afg)"

> balancedSubstring "a(a(a"
Nothing 
```

# junit4 - 如何通过我们自己的跑步者而不是 BlockJUnit4ClassRunner

> ID：10243292
> 
> 赞同：1
> 
> 时间：2012-04-20T09:09:23.450
> 
> 标签：junit4

实际上我想覆盖 BlockJUnit4ClassRunner 的 runChild() 方法，因此我创建了一个类（MyRunner.java）并扩展了 BlockJUnit4ClassRunner 并覆盖了 runChild() 方法。

```
public class MyRunner extends BlockJUnit4ClassRunner
{

@Override
public void runChild(final FrameworkMethod method, RunNotifier notifier) {
    System.out.println("<--------- Inside MyRunner.runChild() -------->");
    // my code goes here
}

} 
```

但是该调用不会转到我的重写方法（它甚至不会转到 MyRunner.java）并且仅调用 BlockJUnit4ClassRunner.runChild() 方法。我调试了一下，发现这是因为传递给JunitCore.run(Runner runner)方法的runner是BlockJUnit4ClassRunner。我对此不确定，但我认为这可能来自 JUnit4Builder.runnerForClass() 方法。

```
// This is JUnit4Builder.runnerForClass(Class<?>) method
public Runner runnerForClass(Class<?> testClass) throws Throwable 
{
    return new BlockJUnit4ClassRunner(testClass);
} 
```

我也尝试覆盖 JUnit4Builder.runnerForClass() 但这也没有帮助。谁能告诉我是否有任何方法可以通过 MyRunner 或任何方法来覆盖 BlockJUnit4ClassRunner.runChild() 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:00:17.930

您可能没有使用[@RunWith](http://api.dpml.net/junit/4.2/org/junit/runner/RunWith.html)注释。为了使用您自己的 Runner，您需要使用 @RunWith 注释对每个 TestClass 进行注释。这将确保您的测试与该跑步者一起执行。

例子：

```
@RunWith(MyRunner .class)
public class MyTest
{ 
  ....
} 
```

# ruby - 如何在 ruby 中搜索正则表达式并替换字符串中的字符？

> ID：10243295
> 
> 赞同：0
> 
> 时间：2012-04-20T09:09:37.067
> 
> 标签：ruby, regex, string, gsub

假设我有一个字符串：

```
asd;;%$@#!G'{}[] 
```

现在我想转义特殊符号：

```
;&|><*?`$(){}[]!# 
```

因此，输出将类似于：

```
asd\;\;%\$@\#\!G\'\{\}\[\] 
```

如何`gsub/sub`在 Ruby 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:32:25.607

```
test_value = "asd;;%$@#!G'{}[]"
SPEC_REGEXP = /((;)|(\&)|(\|)|(>)|(<)|(\*)(\?)|(`)|(\$)|(\()|(\))|({)|(})|(\[)|(\])|(!)|(#))/
test_value.gsub!(SPEC_REGEXP,'\\\\\1') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:47:32.453

这与 soundar 的解决方案中的想法几乎相同（但使用字符类且不捕获）：

```
"asd;;%$@#!G'{}[]".gsub(/[;&|><*?`$(){}\[\]!#]/, '\\\\\\0') 
```

# android - 在 android nfc 应用程序上启动浏览器的操作类型记录

> ID：10243309
> 
> 赞同：1
> 
> 时间：2012-04-20T09:10:38.517
> 
> 标签：android, browser, nfc

我想在我`NDEFmessage`的 Android NFCDemo 上添加操作以在我单击 URL 时启动浏览器。

我有这样的代码：

```
public static final byte[] SMART_POSTER_URL_NO_TEXT = 
    /**/new byte[] {
    (byte) 0xd1, (byte) 0x02, (byte) 0x0f, (byte) 0x53, (byte) 0x70, (byte)  0xd1,(byte) 0x01,     
    (byte) 0x0b, (byte) 0x55, (byte) 0x01,(byte) 0x67, (byte) 0x6f, (byte) 0x6f, (byte) 0x67,      
    (byte) 0x6c, (byte) 0x65, (byte) 0x2e, (byte) 0x63,(byte) 0x6f, (byte) 0x6d,
    /*the action type record*//         
    (byte) 0x11,(byte) 0x01,(byte) 0x61,(byte) 0x63 ,(byte) 0x74, (byte) 0x00
}; 
```

但这不起作用。

# php - Heroku 实例中的 PHP 和 django

> ID：10243310
> 
> 赞同：1
> 
> 时间：2012-04-20T09:10:40.900
> 
> 标签：php, python, django, wordpress, heroku

是否可以在一个heroku 实例中与django 一起运行一些php 应用程序（例如wordpress），以便应用程序的url 部分由php 提供，其余部分由django 提供？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:31:17.350

不，应用程序类型是在应用程序被推送到 Heroku 时在 slug 编译时确定的。不确定您是否可以使用自定义构建包做任何事情，但我会这么认为。

# django - 如何从 iOS 应用程序登录 Django 帐户？

> ID：10243311
> 
> 赞同：0
> 
> 时间：2012-04-20T09:10:43.683
> 
> 标签：django, login

在我的应用程序中，我需要与我的 Django 网站进行通信。有些资源需要身份验证，所以我需要用户登录。

但这不会发生在浏览器或 Web 视图中。我需要使用 Object-C 发出登录请求并处理响应 - 基本上是为了存储我猜的会话 ID。

在 Web 服务器端，我应该如何在 Django 中执行此操作？有一个独立的视图并返回 JSON 可能吗？我怎样才能获得新生成的会话 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:21:23.187

我不会得到会话ID。我相信登录用户更适合网络界面。我将创建一个 API，为您的应用程序中所需的资源提供服务。 [http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer) 身份验证可能最适合私钥/公钥对或其他类似的流行 api 身份验证系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T23:46:32.313

您无需对身份验证系统进行任何更改，除非确保登录表单在较小的屏幕上可用。Cookie 在 iOS 上的工作方式与在 Web 上的工作方式相同。您可以使用登录表单显示模态 UIWebView。用户登录后，大概您正在设置会话 cookie。如果您向 cookie 匹配的域发出后续请求，则应该发送 cookie。您想查看 HTTP 'Accept' 标头字段，该字段指定客户端期望接收的内容类型。在您的控制器（视图？）中，您需要检查“接受”标头，并返回适当的内容类型，可能是“应用程序/json”（或您的 API 的自定义类型）。

# c# - 用“>”替换列选择删除代码行

> ID：10243316
> 
> 赞同：2
> 
> 时间：2012-04-20T09:11:02.790
> 
> 标签：c#, visual-studio-2010

我有几行属性定义，例如：

```
public InputProp<string CsProtocol { private get; set; }
public InputProp<string CsHost { private get; set; }
public InputProp<string CsPort { private get; set; }
public InputProp<string CsService { private get; set; } 
```

现在我想`>`在 s 之后插入一个`string`。
所以我使用列选择（*Alt+DrawLeftMouse*）在所有行中选择*字符串后的列。*之后，我按下`>`并期望`>`将在`string`所有行的 s 之后插入。
但不幸的是，第一行被删除，`>`只插入到最后一行。
有什么特别之处`>`？它适用于其他角色。

`>`在列选择中插入是否有解决方法或修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:14:04.850

为什么不选择行并使用查找和替换功能？

*   查找：（`InputProp<string`不要忘记字符串后面的空格）
*   代替：`InputProp<string>`

# java - 刷新一个 xhtml 页面

> ID：10243326
> 
> 赞同：0
> 
> 时间：2012-04-20T09:11:50.427
> 
> 标签：java, jsf, jakarta-ee, jsf-2

我有registration.xhtml 页面，用户将在其中输入数据以进行注册。我以这样的方式编写代码，如果用户单击注册或取消按钮，页面将刷新并且字段变为空。但是假设如果用户在注册屏幕中提供了一些数据，由于某种原因用户转到其他一些page(menu1) 在应用程序中返回注册页面，输入的数据仍在显示中。

我需要一些建议，这样每次用户单击标题中的链接时，页面都应该刷新，我的标题页面有很多链接，每个链接都是一个 xhtml 页面以下是我的标题页面

```
<html>
<f:view>
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Untitled Document</title>
      <link rel="stylesheet" href="css/styles.css" type="text/css">
      <title>JSP Page</title>
    </head>
    <body bgcolor="#FFFFFF" >
     <h:form>
     <div id="navigation">
      <ul id="mainMenu">                     
       <li class="cat-item cat-item-3"><span>&nbsp;</span>
        <h:outputLink value="register.jsp" >
         <h:outputText value="Registration"/></h:outputLink>
        </li> 
        <li class="cat-item cat-item-2"><span>&nbsp;</span>
         <h:outputLink value="menu1.jsp">
          <h:outputText value="MENU1"/></h:outputLink>
        </li>
        <li class="cat-item cat-item-2"><span>&nbsp;</span>
         <h:outputLink value="menu2.jsp">
          <h:outputText value="MENU2"/></h:outputLink>
        </li>
       </div>
       </h:form>
      </body>
     </f:view>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:38:12.630

如果支持 bean 在会话范围内，就会发生这种情况。会话范围的 bean 实例与客户端和服务器之间建立的 HTTP 会话一样长。因此，该会话中的每个 HTTP 请求都使用相同的会话范围 bean 实例。这不是你想要的。

将 bean 放在请求或视图范围内。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# .net - RaiseProperty如何改变 找出属性名称？

> ID：10243327
> 
> 赞同：12
> 
> 时间：2012-04-20T09:11:55.313
> 
> 标签：.net, c#-4.0, lambda

此方法有一个重载`NotificationObject`：-

```
protected void RaisePropertyChanged<T>(Expression<Func<T>> propertyExpression); 
```

我们在property的setter中这样写：

```
RaisePropertyChanged(() => PropertyVariable); 
```

它是如何工作的？它如何从这个 Lambda 表达式中找到属性名称？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T09:15:57.873

An`Expression<TDelegate>`表示 lambda 表达式的抽象语法树。因此，您只需分析此语法树即可找出属性名称：

```
protected void RaisePropertyChanged<T>(Expression<Func<T>> propertyExpression)
{
    var memberExpr = propertyExpression.Body as MemberExpression;
    if (memberExpr == null)
        throw new ArgumentException("propertyExpression should represent access to a member");
    string memberName = memberExpr.Member.Name;
    RaisePropertyChanged(memberName);
} 
```

# objective-c - 在 UIScrollView 中滚动时如何触发动作？

> ID：10243328
> 
> 赞同：2
> 
> 时间：2012-04-20T09:11:57.237
> 
> 标签：objective-c, uiscrollview, uiscrollviewdelegate

我正在编写一个关于显示新闻网站图像的小应用程序。假设有很多图像。但每次加载时，我只想加载 3 张图像，然后将它们显示在屏幕上。只有当用户从左向右滚动时，它才会继续加载另外 3 张图像。

滚动时如何触发该操作？

请帮帮我。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:19:58.077

您可以实现 UIScrollView 委托，它有一些您想要实现的方法：

[UIScrollView 委托](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)

例如：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView 
```

# javascript - jqPlot 到图像

> ID：10243332
> 
> 赞同：1
> 
> 时间：2012-04-20T09:12:07.207
> 
> 标签：javascript, jquery, html, jqplot

我知道这个问题已经在这里了，但我认为它没有得到正确的回答。到目前为止，我正在使用这种方法 100% 可以正常工作，对于我必须走的任何 Plot。

请评论代码的效率等，我想知道它是否还有错误。

非常感谢。

```
function jqplotToImg(obj) {
    var newCanvas = document.createElement("canvas");
    newCanvas.width = obj.find("canvas.jqplot-base-canvas").width();
    newCanvas.height = obj.find("canvas.jqplot-base-canvas").height()+10;
    var baseOffset = obj.find("canvas.jqplot-base-canvas").offset();

    // make white background for pasting
    var context = newCanvas.getContext("2d");
    context.fillStyle = "rgba(255,255,255,1)";
    context.fillRect(0, 0, newCanvas.width, newCanvas.height);

    obj.children().each(function () {
    // for the div's with the X and Y axis
        if ($(this)[0].tagName.toLowerCase() == 'div') {
            // X axis is built with canvas
            $(this).children("canvas").each(function() {
                var offset = $(this).offset();
                newCanvas.getContext("2d").drawImage(this,
                    offset.left - baseOffset.left,
                    offset.top - baseOffset.top
                );
            });
            // Y axis got div inside, so we get the text and draw it on the canvas
            $(this).children("div").each(function() {
                var offset = $(this).offset();
                var context = newCanvas.getContext("2d");
                context.font = $(this).css('font-style') + " " + $(this).css('font-size') + " " + $(this).css('font-family');
                context.fillStyle = $(this).css('color');
                context.fillText($(this).text(),
                    offset.left - baseOffset.left,
                    offset.top - baseOffset.top + $(this).height()
                );
            });
        } else if($(this)[0].tagName.toLowerCase() == 'canvas') {
            // all other canvas from the chart
            var offset = $(this).offset();
            newCanvas.getContext("2d").drawImage(this,
                offset.left - baseOffset.left,
                offset.top - baseOffset.top
            );
        }
    });

    // add the point labels
    obj.children(".jqplot-point-label").each(function() {
        var offset = $(this).offset();
        var context = newCanvas.getContext("2d");
        context.font = $(this).css('font-style') + " " + $(this).css('font-size') + " " + $(this).css('font-family');
        context.fillStyle = $(this).css('color');
        context.fillText($(this).text(),
            offset.left - baseOffset.left,
            offset.top - baseOffset.top + $(this).height()*3/4
        );
    });

    // add the title
    obj.children("div.jqplot-title").each(function() {
        var offset = $(this).offset();
        var context = newCanvas.getContext("2d");
        context.font = $(this).css('font-style') + " " + $(this).css('font-size') + " " + $(this).css('font-family');
        context.textAlign = $(this).css('text-align');
        context.fillStyle = $(this).css('color');
        context.fillText($(this).text(),
            newCanvas.width / 2,
            offset.top - baseOffset.top + $(this).height()
        );
    });

    // add the legend
    obj.children("table.jqplot-table-legend").each(function() {
        var offset = $(this).offset();
        var context = newCanvas.getContext("2d");
        context.strokeStyle = $(this).css('border-top-color');
        context.strokeRect(
            offset.left - baseOffset.left,
            offset.top - baseOffset.top,
            $(this).width(),$(this).height()
        );
        context.fillStyle = $(this).css('background-color');
        context.fillRect(
            offset.left - baseOffset.left,
            offset.top - baseOffset.top,
            $(this).width(),$(this).height()
        );
    });

    // add the rectangles
    obj.find("div.jqplot-table-legend-swatch").each(function() {
        var offset = $(this).offset();
        var context = newCanvas.getContext("2d");
        context.fillStyle = $(this).css('background-color');
        context.fillRect(
            offset.left - baseOffset.left,
            offset.top - baseOffset.top,
            $(this).parent().width(),$(this).parent().height()
        );
    });

    obj.find("td.jqplot-table-legend").each(function() {
        var offset = $(this).offset();
        var context = newCanvas.getContext("2d");
        context.font = $(this).css('font-style') + " " + $(this).css('font-size') + " " + $(this).css('font-family');
        context.fillStyle = $(this).css('color');
        context.textAlign = $(this).css('text-align');
        context.textBaseline = $(this).css('vertical-align');
        context.fillText($(this).text(),
            offset.left - baseOffset.left,
            offset.top - baseOffset.top + $(this).height()/2 + parseInt($(this).css('padding-top').replace('px',''))
        );
    });

    // convert the image to base64 format
    return newCanvas.toDataURL("image/png");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:21:41.330

这不是错误，但如果您尝试将图像保存为 png，它会为图像生成透明背景。由您负责处理背景图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T08:30:25.183

首先感谢分享，根据我的测试，这个脚本丢失了：

1.  某些类型图表（甜甜圈）的数据点标签
2.  传奇色板丢失。

现在有这个选项： [https ://bitbucket.org/cleonello/jqplot/src/538695e6a66a/src/jqplot.toImage.js?at=default](https://bitbucket.org/cleonello/jqplot/src/538695e6a66a/src/jqplot.toImage.js?at=default)

[在这里](https://skydrive.live.com/redir?resid=9EF5ED80C5BF6F6C!1168)使用我的图表查看测试

# php - 在 CSS 中对图像进行 base64 编码的 PHP/Python 脚本

> ID：10243336
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:12:35.757
> 
> 标签：php, python, css, base64

我发现自己经常在 base64 的 css 中手动编码背景图像。

当我的意思是手动时，我的意思是我对图像进行编码，复制生成的字符串，将其粘贴到 css 文件中等等。这是愚蠢的！

我得出的结论是，用 PHP 或 Python 编写一个自动执行的脚本并不难，只需解析 css，在 HD 上找到图像，将其编码为 base64，将结果替换为原始字符串在css文件中并保存一个新文件。

然后我想：“怎么还没人做过呢？也许做之前先问问比较好。”

所以我在这里，是否存在类似的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-20T09:23:48.653

好吧，**[Chris Coyer @ CSS-Tricks 发表了一篇关于 Data URIs 的文章](http://css-tricks.com/data-uris/)**，他解释了如何使用它们以及它们如何有用。接近尾声时，他说使用 PHP 动态生成这些非常容易，就像这样

> *   如果您使用 PHP（或 PHP 作为 CSS），您可以像这样动态创建数据 URI
>     
>     
>     
>     ```
>     <?php echo base64_encode(file_get_contents("../images/folder16.gif")) ?> 
>     ```

但是，不要认为您不应该在网站`base64_encode`上的**所有**图像上使用。生成的字符串的大小`base64_encode`大约是原始图像的 33%。当您有小图片并且不想在它们上浪费请求时，数据 URI 非常有用。

# xml - 我不能在我的 XML 模式中包含属性。（http://www.w3.org/2001/XMLSchema-instance 使用）

> ID：10243341
> 
> 赞同：1
> 
> 时间：2012-04-20T09:12:57.767
> 
> 标签：xml, visual-studio-2010, xsd

我正在尝试制作一个 XML Schema 来验证我的 XML，这是第一次。

我的 XML 的开始（注意“ `-instance`”和“ `SectionNumber="0"`”）：

```
<?xml version="1.0" encoding="utf-8"?>
<CrystalReport 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="urn:crystal-reports:schemas:report-detail  
                   http://www.businessobjects.com/products/xml/CR2008Schema.xsd" 
  xmlns="urn:crystal-reports:schemas:report-detail"
>

  <ReportHeader>
    <Section SectionNumber="0">
      <Text Name="Text9">
        ... 
```

我的 XML 模式（注意第 2、3 和 20 行）：

```
<?xml version="1.0" encoding="utf-8"?>
<xsi:schema  id="XMLSchema_varslings1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="urn:crystal-reports:schemas:report-detail"
    elementFormDefault="qualified"
    targetNamespace="urn:crystal-reports:schemas:report-detail">

    <xsi:element name="CrystalReport" type="CrystalReportType"/>

    <xsi:complexType name="CrystalReportType">
        <xsi:sequence maxOccurs="unbounded">
            <xsi:element name="ReportHeader"  type="ReportHeaderType"/>
        </xsi:sequence>
    </xsi:complexType>

    <xsi:complexType name="ReportHeaderType">
        <xsi:sequence>
            <xsi:element name="Section" type="SectionType"/>
            <!-- This is line 19....................................... -->
            <xsi:attribute name="SectionNumber" type="xsi:Integer"/>
        </xsi:sequence>
    </xsi:complexType>

    <xsi:complexType name="SectionType">
        <xsi:sequence maxOccurs="unbounded">
            <xsi:element name="Text" type="TextType" />
        </xsi:sequence>
    </xsi:complexType>

    <xsi:complexType name="TextType">
        <xsi:sequence maxOccurs="unbounded">
            <xsi:element name="TextValue" type="xsi:string" />
        </xsi:sequence>
    </xsi:complexType>
</xsi:schema> 
```

我收到此错误，我无法解决：“ `The root element of a W3C XML Schema should be <schema> and its namespace should be 'http://www.w3.org/2001/XMLSchema'.`”

如果我`-instance`从架构中删除“”，我会摆脱上述错误，但我不能使用属性“ `<xsi:attribute name="SectionNumber" type="xsi:Integer"/>`”的代码。

我什至不知道我真正的问题是`-instance`部分还是有另一种方法可以在模式中写入/包含属性。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:13:23.020

您混淆了两个名称空间：`XMLSchema`和`XMLSchema-instance`. 这两个服务于不同的目的，`XMLSchema`（通常带有前缀`xs`）用于*声明*您的架构。这就是为什么没有它您的 XSD 文件就无法工作的原因。

当您想在文档中*使用*某些 XML 模式时，将使用名称空间`XMLSchema-instance`（通常带有前缀）。例如，前缀在此命名空间中。`xsi`*`schemaLocation`*

 *类型`integer`（小写`i`）在`XMLSchema`命名空间中，所以你必须这样使用它。

此外，您的元素顺序不正确。`<xs:attribute>`应该是后`<xs:sequence>`。

因此，您的架构应如下所示：

```
<xs:schema id="XMLSchema_varslings1"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns="urn:crystal-reports:schemas:report-detail"
    elementFormDefault="qualified"
    targetNamespace="urn:crystal-reports:schemas:report-detail">

  …

  <xs:complexType name="ReportHeaderType">
    <xs:sequence>
      <xs:element name="Section" type="SectionType"/>
    </xs:sequence>
    <xs:attribute name="SectionNumber" type="xs:integer"/>
  </xs:complexType>

</xs:schema> 
```

我还将命名空间前缀更改为`xs`，因为这很有意义，但从技术上讲，它不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:43:49.900

嗯，我发现了这个：

[链接到 w3](http://www.w3.org/2001/XMLSchema-instance)

“这个模式永远不应该这样使用：XML 模式建议禁止在这个命名空间中声明属性”

我想我当时遇到了麻烦，因为那时我需要更改 XML。问题是 XML 是从我们拥有的旧程序生成的。任何人都可以确认/不确认我找到了解决方案，否则我会应用其他人的答案吗？*

# asp.net - Orchard cms视图中如何包含样式表和js文件

> ID：10243345
> 
> 赞同：0
> 
> 时间：2012-04-20T09:13:05.830
> 
> 标签：asp.net, c#-4.0, orchardcms

如何在Orchard cms视图中包含样式表和js文件，加载资源失败：服务器响应状态为404（未找到）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T12:55:16.223

1.  在您的主题或模块中创建一个 ResourceManifest.cs 文件。

    ```
    using Orchard.UI.Resources;
    namespace MyNameSpace {
        public class ResourceManifest : IResourceManifestProvider {

            public void BuildManifests(ResourceManifestBuilder builder) {
                var manifest = builder.Add();
                manifest.DefineStyle("MyScriptName").SetUrl("~/Modules/MyModule/Scripts/scripts.js");
                manifest.DefineScript("MyStyleName").SetUrl("~/Themes/MyTheme/Styles/site.css");
            }
        }
    } 
    ```

在您看来，包括这样的脚本和样式：

```
 @{
        Style.Require("MyStyleName");
    }

    @using(Script.Foot()) {
        Script.Require("MyScriptName");
    } 
```

您还可以使用 Script.Head() 将 .js 包含在`<head>`标记中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T17:39:41.270

如果您不想创建清单但想直接引用文件但仍要消除双打，您也可以使用`Script.Include`and 。`Style.Include`

这`404`很可能是由于您未能包含`web.config`允许提供文件的文件。您可以从现有脚本目录之一复制一个。

# php - 代码点火器。一些基础课程在哪里？

> ID：10243347
> 
> 赞同：0
> 
> 时间：2012-04-20T09:13:12.980
> 
> 标签：php, codeigniter

我刚开始使用 codeIgniter，想知道 CodeIgniter 的情况如何？如

1.  这个扩展类在哪里？

    ```
    class Mystations extends CI_Controller{
    //--- class content } 
    ```

2.  在哪里可以找到“负载”和“模型”？

    ```
    $this->load->model('user_model'); 
    ```

3.  虽然我知道使用 CI 主动查询，但我不知道事情在后台是如何工作的，也不知道 mysql_conect 在 CI 中的使用位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:22:25.093

1.  您自己的扩展库位于`application/libraries`. [在此处阅读有关扩展的信息](http://codeigniter.com/user_guide/general/creating_libraries.html#footer)。
2.  这个问题比较不清楚。您的模型位于`application/models`. [在此处阅读有关模型的信息](http://codeigniter.com/user_guide/general/models.html)。
3.  `config/database.php`您通过提供您的设置连接到您的数据库。您将其自动加载到`config/autoloads.php`.

请注意，我的回答主要包括参考 CodeIgniters 用户指南。他们的指南非常好，可以帮助您自己走很远。

CodeIgniter + Google + 知道要搜索什么 = 成功！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:36:04.227

由于源代码托管在 GitHub 上，因此您可以搜索实际代码以查找所需内容。例如：

1.  [CI_Controller 搜索](https://github.com/search?utf8=%E2%9C%93&q=repo%3aEllisLab/CodeIgniter%20CI_Controller&repo=&langOverride=&start_value=1&type=Code&language=)：[结果](https://github.com/EllisLab/CodeIgniter/blob/a920fbe473ba265f86c974f4c4d1b95ad0fdb2b8/system/core/Controller.php) （`system/core/Controller.php`）

2.  [函数模型搜索](https://github.com/search?utf8=%E2%9C%93&q=repo%3aEllisLab/CodeIgniter%20%22function%20model%22&repo=&langOverride=&start_value=1&type=Code&language=)：[结果](https://github.com/EllisLab/CodeIgniter/blob/d56be70257696d0bbf2dcc880888d8dc17cba21c/system/core/Loader.php) （`system/core/Loader.php`）

3.  [mysqli连接搜索](https://github.com/search?utf8=%E2%9C%93&q=repo%3aEllisLab/CodeIgniter%20mysqli&repo=&langOverride=&start_value=1&type=Code&language=)：[结果](https://github.com/EllisLab/CodeIgniter/blob/bb2e2ed4ac4200c12dae08018e932c65256e8701/system/database/drivers/mysqli/mysqli_driver.php)（`system/database/drivers/mysqli/mysqli_driver.php`）

# javascript - 拖动 amchart 时显示光标

> ID：10243351
> 
> 赞同：0
> 
> 时间：2012-04-20T09:13:50.857
> 
> 标签：javascript, ios, amcharts

我想在通过 UIWebView 中显示的 AMChart 拖动时显示一个 AMChartCursor。我该如何实施？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:23:04.213

通过将 Amcharts 对象的 panEventsEnabled 属性设置为 true，我们可以实现这个功能。

# actionscript-3 - 还有另一个“actionscript-3 中的本地文件访问”问题

> ID：10243353
> 
> 赞同：2
> 
> 时间：2012-04-20T09:14:03.887
> 
> 标签：actionscript-3, flash, apache-flex, directory

我希望我能在我的动作脚本问题上得到一些帮助。

（inb4：*'你到底想完成什么（除了在未经用户许可的情况下打开任意文件）？'[链接](https://stackoverflow.com/q/7623348/277826)*）

我正在尝试协助学生练习 - 所以我想我会想出一个随机画廊的例子。这样做的想法是学生将能够生成一个 SWF 文件，并且在同一目录中，他们将拥有一个包含图像的文件夹。然后 SWF 电影将读取目录的内容；选择一个随机图像，并显示它。

我希望这可以在本地完成（在学生发展的同时）——而且，如果他们选择这样做，他们应该能够在线上传整个目录——并且希望该示例能够以任何方式工作。事实证明这并不容易 - 所以这些是我的**问题**：

*   他们说，为了获得本地目录列表，我应该使用 AIR - 这是什么意思？如果它使用 AIR ，是否有一些可执行文件 -*除了*`flashplayerdebugger`- 我应该调用以重现 SWF？
    *   是否可以在不使用此 AIR 的情况下获取本地目录列表（类似于下面的 Flex 代码？）
*   看来我可以加载本地文本文件；但我无法加载本地位图文件。是否也可以加载位图文件？
*   如果碰巧您无法访问 Internet，因此您无法访问，您如何授予文件/文件夹的本地访问权限`settings_manager04.html`- 但您希望将 Flash 应用程序与本地文件和网络套接字一起使用在本地网络上？

现在，一件事是大多数学生都使用 Flash CSx 版本——另一方面，我在 Linux 上，所以我尝试制作一个 Flex 示例；所以我将示例作为 Flex 代码提供，但我也想知道 Flash CS 环境的可能答案。目录结构、编译行和代码在本文末尾给出 - 但“应用程序”目录如下所示：

![rgaltest_dir.png](../Images/a5b792d906046655c2558511ee67a046.png)

* * *

好的，所以这里是更详细的问题。首先，我想我会尝试读取目录内容 - 所以我在这里尝试了代码：[AS3 Basics: List all files in a folder including subdirectories (AIR ...](http://www.wuup.co.uk/as3-basics-list-all-files-in-a-folder-including-subdirectories-air) on students' Flash CS - 但这似乎失败了。

所以我想 - 好吧，那么让我们在 .swf 所在的同一目录中放入一个文本文件，其中将包含图像列表；例如

```
cat > fileslist.txt <<EOF
img/01.jpg
img/02.jpg
EOF 
```

然后，Flash 应用程序将首先读取此文件 - 然后继续从内容中选择一个随机图像。但在第一刻，我得到：

```
An ActionScript error has occurred:
SecurityError: Error #2148: SWF file file:///home/rgaltest/rgaltest.swf cannot access local resource file:///home/rgaltest/fileslist.txt. Only local-with-filesystem and trusted local SWF files may access local resources.
  at flash.net::URLStream/load()
  at flash.net::URLLoader/load()
  at rgaltest()[/home/rgaltest/rgaltest.as:23] 
```

所以，这个问题的答案似乎是：

*   "*如果您在使用 flash.net.URLLoader 和免费的 flex 编译器时遇到该错误，请在编译时添加以下选项以使您的 swf 工作：-use-network=false* " ( [juicy tidbits - Only local-with-文件系统和受信任的本地 SWF 文件可以访问本地资源。](http://jnunemaker.tumblr.com/post/8358496/only-local-with-filesystem-and-trusted-local-swf-files)）
*   "*原来解决方案是配置您的 Flash Player 以信任项目的 /bin-debug 目录中的 swfs ... 1) 转到[http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04 .html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html) ...* "（[解决方案 – 错误 #2010：本地文件系统 SWF 文件不允许使用套接字。» Mark Lapasa](http://knowledge.lapasa.net/?p=123)）

现在，我不想**拥有**-`-use-network=false`因为学生可能需要在该示例中集成其他基于网络的东西。然后，如果您在浏览器中打开 SWF，然后右键单击，然后选择“全局设置”，则会显示类似于“ `settings_manager04.html`”（“*全局安全设置面板*”）页面的内容 - 但它是否适用于显示的 SWF 文件作为 Ctrl-Enter 在 Flash CS 中构建的一部分（或相应地，那些打开的`flashplayerdebugger`？）所以我尝试一下 - 选择“编辑位置”，“浏览文件夹”，`/home/rgaltest`在“始终允许”下选择：

![flash_settings](../Images/ab7abd2617184671d42e22cdb6720769.png)

...现在`fileslist.txt`加载好了；当 .swf 与`flashplayerdebugger`.

对，所以现在加载了文件列表，我将继续加载位图..所以我添加了相应的代码（使用`onImgLoaded`等），这就是我在日志中得到的：

```
At frame #1
file onTextLoaded: img/01.jpg,img/02.jpg,
At frame #2
file onImgLoaded: [object URLLoader]
TypeError: Error #1034: Type Coercion failed: cannot convert "ÿØÿà
...
¿ÿÙ" to flash.display.Bitmap.
  at rgaltest/onImgLoaded()[/home/rgaltest/rgaltest.as:64]
  at flash.events::EventDispatcher/dispatchEventFunction()
  at flash.events::EventDispatcher/dispatchEvent()
  at flash.net::URLLoader/onComplete()
At frame #3
At frame #4
... 
```

有趣的是——图像**确实**被读取了——因为它的所有二进制内容都被转储到了日志中！然而，它不能被解释为位图数据？？？！

* * *

首先，这是我的目录布局：

```
mkdir /home/rgaltest
cd /home/rgaltest
touch rgaltest.as
touch fileslist.txt
mkdir img
cd img
convert -size 320x240 gradient:\#4b4-\#bfb 01.jpg
convert -size 320x240 gradient:\#b44-\#bff 02.jpg
chmod -R 777 /home/rgaltest   # to ensure no problem with file permissions 
```

下面`rgaltest.as`给出; 我编译它：

```
/path/to/flex_sdk_4.6.0.23201_mpl/bin/mxmlc -static-link-runtime-shared-libraries -use-network=true -verbose-stacktraces -debug=true rgaltest.as 
```

...并且我在本地检查（*确保`mm.cfg`已正确设置，另请参阅[使用 Flash Player 调试器](http://www.videosoftware.pro/forum/THREAD-Using-Flash-Player-debugger)*）：

```
# in one terminal:
tail -f ~/.macromedia/Flash_Player/Logs/flashlog.txt

# in another terminal:
/path/to/flashplayer_11/flashplayerdebugger rgaltest.swf 
```

最后，这里是`rgaltest.as`：

```
package {
  import flash.display.Sprite;
  import flash.text.TextField;
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.IEventDispatcher;
    import flash.net.*; //URLLoader;
    import flash.display.Bitmap;
    import flash.display.BitmapData;

    [SWF(width="550", height="400")]
    public class rgaltest extends MovieClip {

    public var _pictureArray:Array;
    public var frameCnt:Number = 0;

    public var myTextLoader:URLLoader;
    public var isFileslistLoaded:Boolean = false;

    public var myImgLoader:URLLoader;
    public var isImgLoading:Boolean = false;

        // constructor - create/initialize objects here
        public function rgaltest() {
      this.stage.frameRate = 10; // frames per second

      // load the text file with image list
      myTextLoader = new URLLoader();
      myTextLoader.addEventListener(Event.COMPLETE, onTextLoaded);
      myTextLoader.load(new URLRequest("fileslist.txt"));

            // add event listener for onEnterFrame
            configureListeners(this);
    }

    private function configureListeners(dispatcher:IEventDispatcher):void {
      dispatcher.addEventListener(Event.ENTER_FRAME, my_OnEnterFrame);
        }

    public function onTextLoaded(e:Event):void {
      _pictureArray = e.target.data.split(/\n/);
      trace("file onTextLoaded: " + _pictureArray);
      isFileslistLoaded = true;
    }

        public function my_OnEnterFrame(event:Event):void {
      frameCnt++;
      trace("At frame #" + frameCnt);
      if (isFileslistLoaded) {
        if (!isImgLoading) {
          //load a random image
          var rndChoice:Number = Math.floor(Math.random()*2) + 1;
          myImgLoader = new URLLoader();
          myImgLoader.addEventListener(Event.COMPLETE, onImgLoaded);
          myImgLoader.load(new URLRequest(_pictureArray[rndChoice]));
          isImgLoading = true;
        }
      }
    } // end onEnterFrame

    public function onImgLoaded(e:Event):void {
      trace("file onImgLoaded: " + e.target);
      var _image:Bitmap = Bitmap(e.target.data);
      var _bitmap:BitmapData = _image.bitmapData;
      addChild(_image);
    }

  } //end class
} //end package 
```

* * *

其他一些相关链接：

*   [flex - 在 Actionscript 中添加本地文件名/引用到数组 - 代码日志](https://stackoverflow.com/questions/2346547/adding-local-filenames-references-to-array-in-actionscript)
*   [flash - 有没有办法“静默”地读取 ActionScript 3 中的本地文件？- 堆栈溢出](https://stackoverflow.com/questions/7450888/is-there-a-way-to-read-local-files-in-actionscript-3-silently)
*   [adobe flash cs4 as3：获取正在运行的项目的当前目录？- 堆栈溢出](https://stackoverflow.com/questions/2155021/adobe-flash-cs4-as3-get-current-directory-of-a-running-project)
*   [flex - 在 AS3 中打开本地文件 - 代码日志](https://stackoverflow.com/questions/1361200/open-local-files-in-as3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:12:33.180

凹凸 - 似乎我解决了位图加载问题（将其放在单独的帖子中，这样我就不会过多地阻塞 OP）；我只是用`Loader`class 而不是`URLLoader`; 请参见下面的代码（*还要注意 OP 中随机计算的错误，下面已更正*）。

无论如何 - 事情就是这样：当我`Loader`在学生的 Flash CSx 上尝试课程时，它往往会惨遭失败！但是，也许那是因为在那些情况下，我们没有从“ `settings_manager04.html`”授予文件夹的任何权限？当在 Flash 中生成类似这样的代码时，有什么特别需要注意的吗？

这是重做的`rgaltest.as`：

```
package {
  import flash.display.Sprite;
  import flash.text.TextField;
  import flash.display.MovieClip;
  import flash.events.Event;
  import flash.events.IEventDispatcher;
  import flash.net.*; //URLLoader;
  import flash.display.Bitmap;
  import flash.display.BitmapData;
  import flash.display.Loader; //*

  [SWF(width="550", height="400")]
  public class rgaltest extends MovieClip {

    public var _pictureArray:Array;
    public var frameCnt:Number = 0;

    public var myTextLoader:URLLoader;
    public var isFileslistLoaded:Boolean = false;

    public var myImgLoader:Loader;
    public var isImgLoading:Boolean = false;

    // constructor - create/initialize objects here
    public function rgaltest() {
      this.stage.frameRate = 10; // frames per second

      // load the text file with image list
      myTextLoader = new URLLoader();
      myTextLoader.addEventListener(Event.COMPLETE, onTextLoaded);
      myTextLoader.load(new URLRequest("fileslist.txt"));

      // add event listener for onEnterFrame
      configureListeners(this);
    }

    private function configureListeners(dispatcher:IEventDispatcher):void {
      dispatcher.addEventListener(Event.ENTER_FRAME, my_OnEnterFrame);
    }

    public function onTextLoaded(e:Event):void {
      _pictureArray = e.target.data.split(/\n/);
      trace("file onTextLoaded: " + _pictureArray);
      isFileslistLoaded = true;
    }

    public function my_OnEnterFrame(event:Event):void {
      frameCnt++;
      trace("At frame #" + frameCnt);
      if (isFileslistLoaded) {
        if (!isImgLoading) {
          //load a random image
          var rndChoice:Number = Math.floor(Math.random()*2) + 0;
          trace("Loading: " + rndChoice + " / " + _pictureArray[rndChoice]);
          myImgLoader = new Loader();
          myImgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImgLoaded);
          myImgLoader.load(new URLRequest(_pictureArray[rndChoice]));

          isImgLoading = true;
        }
      }
    } // end onEnterFrame

    public function onImgLoaded(e:Event):void {
      trace("file onImgLoaded: " + e.target);
      var _image:Bitmap = Bitmap(myImgLoader.content);
      var _bitmap:BitmapData = _image.bitmapData;
      addChild(_image);
    }

  } //end class
} //end package 
```

# api - 使用 java 邮件 api 到 Exchange 服务器的 pop3 连接失败

> ID：10243358
> 
> 赞同：0
> 
> 时间：2012-04-20T09:14:15.787
> 
> 标签：api, email, ssl, jakarta-mail, pop3

我面临问题，使用 pop3 通过 JAVAMAIL api 连接客户端 Exchange 服务器。它适用于 gmail。请看一下这个，如果是熟悉的东西。

以下异常我们在尝试连接客户端的 Exchange 服务器时遇到

```
 javax.mail.MessagingException: Connect failed;
nested exception is:
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connecti
on?
at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:210)
at javax.mail.Service.connect(Service.java:295)
at TestPOP3Connection.run(TestPOP3Connection.java:23)
Caused by: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext conne
ction?
at com.sun.net.ssl.internal.ssl.InputRecord.handleUnknownRecord(Unknown
Source)
at com.sun.net.ssl.internal.ssl.InputRecord.read(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Un
known Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Sou
rce)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Sou
rce)
at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java
:507)
at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:238)
at com.sun.mail.pop3.Protocol.<init>(Protocol.java:107)
at com.sun.mail.pop3.POP3Store.getPort(POP3Store.java:261)
at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:206)
... 2 more 
```

在此先感谢罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:16:22.987

您正在尝试使用 SSL 进行连接，但您正在连接到不支持 SSL 的端口。

Gmail 需要 SSL，因此您的程序可能已设置为执行此操作，但是当您更改为使用 Exchange 服务器时，您可能更改了主机名并将端口号设置为 110。POP3 的 SSL 端口号为 995。当然，确保您的 Exchange 服务器配置为接受该端口上的 SSL 请求。

# javascript - 原型 1.6.0.2 UTF-8，HTML £ 返回 Â £10.00

> ID：10243359
> 
> 赞同：0
> 
> 时间：2012-04-20T09:14:22.557
> 
> 标签：javascript, html, utf-8, prototypejs

我正在使用原型将新元素注入到文档中。我的文件是 UTF-8 编码的，没有添加 BOM。

编码：

```
<div id=\"ItemINDEX_IDTotal\">&pound;0.00</div></td></tr> 
```

正在将其返回给浏览器：

10.00 英镑

关于如何删除'Â'的任何建议？

# c++ - mpg123 链接错误“_read”和“_lseek”

> ID：10243360
> 
> 赞同：2
> 
> 时间：2012-04-20T09:14:26.877
> 
> 标签：c++, visual-studio-2008

我在win32中编译mpg123 lib。它不希望它链接到 MSVCR90.DLL

我将：C/C++ ->“忽略所有默认库”改为YES

添加“其他依赖项”==> libcmt.lib

“C/C++ -> Runtime Library”从“多线程DLL”到“多线程”

但我仍然收到此错误：

请帮我。

```
readers.obj : error LNK2001: unresolved external symbol _read
readers.obj : error LNK2001: unresolved external symbol _lseek 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:22:53.443

也许您应该链接到`LIBCPMT.LIB`哪个是 CPP 标准库。

# php - .在jquery中发布

> ID：10243363
> 
> 赞同：0
> 
> 时间：2012-04-20T09:14:51.170
> 
> 标签：php, jquery

我在 jquery 中使用下面的代码，但是我的页面本身重新加载，我不知道我在哪里犯了错误。

```
var newstr = $.trim($('#umail').val()); 
```

newstr 保存电子邮件地址

```
$.post("coding/unsub.php",{email:newstr},function(result){
$("#d_result").html(result);
}); 
```

我有

```
<span id="d_result"></span> 
```

显示结果

我的 php 代码是

```
<?php
include ("../includes/dbcon_.php");
$unsub_sql = mysql_query("Delete FROM TblNewsLetter WHERE Email = '$_GET[email]'");
if (!$unsub_sql)
{
    $ds_result = "<p style='font-size:200%;color:red;'>Some Error Occurred! Try Later.</p>";
}
else
{
    $ds_result = "<p style='font-size:200%;color:green;'>Successfully Unsubscribed</p>";
}
mysql_close($con);
echo $ds_result;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:24:01.590

您在评论中说您从表单提交处理程序执行 Ajax 调用。您需要通过使用事件对象的[`.preventDefault()`方法](http://api.jquery.com/event.preventDefault/)或`false`从处理程序返回来防止默认提交行为：

```
$("#yourFormSelectorHere").submit(function(e) {
    var newstr = $.trim($('#umail').val());

    $.post("coding/unsub.php",{email:newstr},function(result){
        $("#d_result").html(result);
    });

    e.preventDefault();
    // and/or
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:20:23.397

在你的 sql 查询中

```
$mail = $_GET['email'];
$query = "DELETE FROM TblNewsLetter WHERE Email = $mail"; 
```

`$_GET`应该改为`$_POST`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:22:47.680

像这样使用

```
$unsub_sql = mysql_query("Delete FROM TblNewsLetter WHERE Email = '".$_POST['email']."'"); 
```

# php - 在 wordpress 小部件中调用函数

> ID：10243366
> 
> 赞同：1
> 
> 时间：2012-04-20T09:15:06.330
> 
> 标签：php, wordpress, function

我正在为我的主题编写一个基本的 wordpress 小部件。我需要在函数小部件中调用我的函数。我的功能位于小部件之外例如：

```
function my_function( $arg ) {
    ...
}

function widget( $args, $instance ) {
    my_function($arg);
} 
```

它会给我错误

```
Fatal error: Call to undefined function my_function() in... 
```

但是，如果我将 my_function 放在小部件函数中，那么它可以工作。例如：

```
function widget( $args, $instance ) {

    function my_function( $arg ) {
        ...
    }

    my_function($arg);
} 
```

我想知道如果将它放在小部件功能之外，为什么这不起作用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:53:59.090

我想当你声明你的函数时你可能在一个 PHP 类（插件类）中。

所以试着像这样修改你的代码：

```
function my_function( $arg ) {
    ...
}

function widget( $args, $instance ) {
    $ClassName->my_function($arg);
} 
```

我想那可能会更好！让我知道！

# java - Struts 2 子动作

> ID：10243368
> 
> 赞同：2
> 
> 时间：2012-04-20T09:15:23.807
> 
> 标签：java, struts2, struts-action

我有一个 struts2 表格。在此表单中，要求用户填写几个字段。其中 2 个字段是通过从另一个操作中选择一个对象来填充的。

实际上：主窗体 => 拾取按钮 => 新动作用新窗体填充 => 返回主窗体并填充相应字段。

我的问题是，在用户完成子操作后，我想返回主窗体但不会丢失他之前填写的所有内容......

我不知道如何处理这个问题，我应该将主表单中的每个字段都传递给子动作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:01:37.547

有几种方法浮现在脑海中，具体取决于因素将确定最适合您的方法。

1) 每次发送你想要保留的所有参数。最简单的方法是使用隐藏字段。模型驱动在这里也可能有意义，或者将多个动作放在一个类中，无论哪种方式，它都强调这些动作共享一组共同的属性。

2）像 Vasily 推荐的那样将值存储在会话中，但是 Struts2 具有范围拦截器......如果您需要经常这样做，那么值得一看（参见页面上的最后一个示例）：[http ://struts.apache.org/ 2.3.1.2/docs/scope-in​​terceptor.html](http://struts.apache.org/2.3.1.2/docs/scope-interceptor.html)但是要做到这一点有点棘手，因为如果这是一个办公应用程序并且用户像我一样，我们将在任何给定时间打开十几个窗口。在这种情况下，您还需要考虑添加一个令牌（请参阅：[struts2 令牌标签](http://struts.apache.org/2.3.1.2/docs/token.html)( 还有其他一些处理流程/对话的方法......例如，有人写了一个插件，我想它可以实现刚刚解释的内容：[http ://code.google.com/p/struts2-conversation/](http://code.google.com/p/struts2-conversation/)

总是值得快速浏览一下 struts2 插件，以确保您没有重新发明轮子，尽管我必须说我不能保证该插件。

3）根本不要让他们离开页面。这很漂亮......如果您需要选择其他参数，当他们点击“pickup”按钮时，表单会展开并包含必填字段，然后当他们点击本小节中的“update”时，它会关闭并更新其余参数的领域。您需要将客户端的 JS 与通常的 XML 或 JSON 响应相结合。对于您自己的页面，JSON 是更简单的方法，要生成 JSON 响应，请参阅[struts2-json-plugin](https://cwiki.apache.org/confluence/display/WW/JSON%20Plugin)。

在大多数情况下，我会选择#3。如果我知道该操作只能从调用操作中使用和/或我想要一个非常安全的书签形式（如果可能，请使用 GET 传递所有参数），可能是 #1。#2 在更复杂的场景中，需要多个操作进行协作，并且由于某些奇怪的原因我无法使用 ajax。注意 #3 和 #2 对书签不是很友好，而且在不使用客户端存储的情况下，它们通常对状态不太友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:49:18.137

将您的主窗体存储在会话中。

```
public class Test extends ActionSupport implements Preparable {

  private MainForm form;

  public void prepare(){
    form =     (MainForm)ServletActionContext.getRequest().getSession().getAttribute("mainForm");
    if(form == null) {
      form = new MainForm();
    }
  }

  public String execute(){
    //Do something useful
    //Do something useful
    //Do something useful
    return SUCCESS;
  }

  public MainForm getForm() {
    return form;
  }

  public void setForm(MainForm form) {
    this.form = form;
  } 
```

“prepare”方法是Preparable接口的一部分。每次调用动作时，它将在所有参数读数之前和“执行”方法之前执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:58:46.977

您需要以下内容才能拥有一个工作的 struts2 平台：

1.  2个带有字段的struts表单类
2.  一个struts动作类
3.  一个jsp页面
4.  一个struts配置文件

然后进行以下流程：

*   加载第一个表单时，通过字段将其 bean 保存在第二个表单中
*   从第一个表单返回后，通过上述字段在第二个表单中加载其字段

# xdebug - 带有 XDebug 堆栈跟踪的完整文件路径

> ID：10243369
> 
> 赞同：3
> 
> 时间：2012-04-20T09:15:29.207
> 
> 标签：xdebug

当 XDebug 捕获错误时，是否可以在堆栈跟踪中显示文件的完整路径？

目前我只是得到这个：

> ../stack.php:47

但我宁愿看到类似的东西：

> C:\inetpub\wwwroot\mysite\stack.php:47

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:48:39.897

不，但是有一个鼠标悬停。如果将鼠标悬停在文件名上，整个路径应该会在工具提示中弹出。如果您想默认使用完整路径，则必须在[http://bugs.xdebug.org](http://bugs.xdebug.org)发送功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:02:12.230

为时已晚，但我认为这对很多人都会很有用:)

```
var xtable = document.getElementsByClassName('xdebug-error');
if(xtable.length){
    for(var k=0;k<xtable.length;k++){
        var xbody = xtable[k].getElementsByTagName('tbody');
        var xtr = xbody[0].getElementsByTagName('tr');
        for(var i=0;i<xtr.length;i++){
        var xtd = xtr[i].getElementsByTagName('td');
        for(var j=0;j<xtd.length;j++){
                if(xtd[j].title){
                    xtd[j].data = xtd[j].innerHTML;
                    xtd[j].innerHTML = xtd[j].title;
                    xtd[j].title = "";
                }else if(xtd[j].data){
                    var data = xtd[j].data;
                    xtd[j].data = xtd[j].innerHTML;
                    xtd[j].innerHTML = data;
                }
        }
        }
    }
} 
```

这个脚本的书签：

```
javascript:(function(){var%20xtable%20=%20document.getElementsByClassName(%27xdebug-error%27);if(xtable.length){for(var%20k=0;k<xtable.length;k++){var%20xbody%20=%20xtable[k].getElementsByTagName(%27tbody%27);var%20xtr%20=%20xbody[0].getElementsByTagName(%27tr%27);for(var%20i=0;i<xtr.length;i++){var%20xtd%20=%20xtr[i].getElementsByTagName(%27td%27);for(var%20j=0;j<xtd.length;j++){if(xtd[j].title){xtd[j].data%20=%20xtd[j].innerHTML;xtd[j].innerHTML%20=%20xtd[j].title;xtd[j].title%20=%20%22%22;}else%20if(xtd[j].data){var%20data%20=%20xtd[j].data;xtd[j].data%20=%20xtd[j].innerHTML;xtd[j].innerHTML%20=%20data;}}}}}})(); 
```

只需在浏览器中**创建书签**，当您想要获取完整文件路径时单击它；）

# web-services - 通过 HTTP 代理使用 WS 调用 Web 服务

> ID：10243372
> 
> 赞同：1
> 
> 时间：2012-04-20T09:15:44.247
> 
> 标签：web-services, proxy, playframework-2.0

我正在尝试从运行在需要通过代理服务器访问外部 Web 服务的环境中的 playframework 2 应用程序调用 Web 服务。在我的 application.conf 文件中，我添加了以下属性：

http.proxyPort=8000

http.proxyHost=myproxyhost.innitech.com

在我的 play 应用程序代码中，我可以访问系统属性并验证它们是否已被拾取。然而，在运行时代理配置没有被使用。如果我在不需要使用代理来访问服务的环境中运行应用程序，则服务调用可以正常工作。

是否可以使用 play 框架通过代理调用 Web 服务，如果可以，如何？

下面是一个调用示例：

```
def watched(username: String, password: String): Promise[Seq[Repo]] = {
  val promiseResponse = WS.url(baseUrl + "/user/watched")
    .withAuth(username, password, com.ning.http.client.Realm.AuthScheme.BASIC)
    .get

    promiseResponse.map(_.json.as[Seq[Repo]])
} 
```

以下堆栈跟踪代表我在运行时看到的内容：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[Connec
tException: https://api.github.com/user]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:82) [p
lay_2.9.1.jar:2.0]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:63) [p
lay_2.9.1.jar:2.0]
    at akka.actor.Actor$class.apply(Actor.scala:290) [akka-actor.jar:2.0]
    at play.core.ActionInvoker.apply(Invoker.scala:61) [play_2.9.1.jar:2.0]
    at akka.actor.ActorCell.invoke(ActorCell.scala:617) [akka-actor.jar:2.0]

    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:179) [akka-actor.jar:2.0]
Caused by: java.net.ConnectException: https://api.github.com/user
    at com.ning.http.client.providers.netty.NettyConnectListener.operationCo
mplete(NettyConnectListener.java:100) ~[async-http-client.jar:na]
    at org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultCh
annelFuture.java:397) ~[netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelFuture.addListener(DefaultChann
elFuture.java:143) ~[netty.jar:na]
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider.doConnect
(NettyAsyncHttpProvider.java:1004) ~[async-http-client.jar:na]
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider.execute(N
ettyAsyncHttpProvider.java:829) ~[async-http-client.jar:na]
    at com.ning.http.client.AsyncHttpClient.executeRequest(AsyncHttpClient.j
ava:499) ~[async-http-client.jar:na]
Caused by: java.nio.channels.UnresolvedAddressException: null
    at sun.nio.ch.Net.checkAddress(Net.java:30) ~[na:1.6.0_25]
    at sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:480) ~[na
:1.6.0_25]
    at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink.connec
t(NioClientSocketPipelineSink.java:142) ~[netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink.eventS
unk(NioClientSocketPipelineSink.java:105) ~[netty.jar:na]
    at org.jboss.netty.handler.ssl.SslHandler.handleDownstream(SslHandler.ja
va:459) ~[netty.jar:na]
    at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream
(OneToOneEncoder.java:55) ~[netty.jar:na] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:41:27.003

The current snapshot in github should fix this problem, as it builds a AsyncHttpClientConfig using the Play context, then initializes the AsynchHttpClient using the config:

```
lazy val client = {
  import play.api.Play.current
  val config = new AsyncHttpClientConfig.Builder()       
    .setConnectionTimeoutInMs(current.configuration.getMilliseconds("ws.timeout").getOrElse(120000L).toInt)
    .setFollowRedirects(current.configuration.getBoolean("ws.followRedirects").getOrElse(true))
    .setUseProxyProperties(current.configuration.getBoolean("ws.useProxyProperties").getOrElse(true))

  current.configuration.getString("ws.useragent").map { useragent =>
    config.setUserAgent(useragent)
}
new AsyncHttpClient(config.build()) 
```

}

# android - textview在android中切断一个字母

> ID：10243374
> 
> 赞同：26
> 
> 时间：2012-04-20T09:15:51.517
> 
> 标签：android

![http://dl.dropbox.com/u/24856/Screenshots/android/cutoff.png](../Images/88be4eb4152f97ce9491b7f828839cf1.png)

这是我的android的屏幕截图。文本是“asd”。但是“d”被略微切断。这是相关的观点：

```
 <TextView
            android:id="@+id/stuff"
            android:padding="2dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/other_stuff"
            android:layout_marginTop="33dp"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textStyle="italic" /> 
```

关于是什么原因造成的任何想法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T03:23:49.897

最终得到了一个 hacky 解决方案，在最后一个斜体字符后添加一个空格

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-24T05:51:55.540

好的，这很奇怪，但我从 更改`android:maxLines="1"`为`android:singleLine="true"`现在文本没有被截断。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T07:29:38.613

我通过将 TextView 的宽度设置为 fill_parent 而不是 wrap_content 来修复它...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-01T17:14:53.830

这是由 Android`TextView`为标准文本设置剪切矩形而您使用斜体文本引起的。斜体文本向右倾斜，超出文本范围。出于某种原因，Android 不考虑这一点。

为了防止这种情况，您可以通过给它一个文本阴影来强制`TextView`它在其边界之外绘制。如果将阴影颜色设置为透明，则结果只是未剪辑的文本。将这些添加到您的`TextView`：

```
android:shadowColor="#00FFFFFF"
android:shadowDx="48"
android:shadowDy="0"
android:shadowRadius="1" 
```

另外，如果这不起作用，请尝试`android:clipChildren=false`在父布局上进行设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-06T09:55:18.643

这是我的解决方案：格式化 textview 并测量。之后设置宽度为 1 像素的 textview 添加到测量的宽度。

```
 TextView textView = new TextView(this);
    textView.setText("Text blah blah");
    textView.setTypeface(typeface, Typeface.BOLD_ITALIC)
    textView.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);
    textView.setLayoutParams(new LayoutParams(textView.getMeasuredWidth() + 1, LayoutParams.WRAP_CONTENT)); 
```

为我工作。希望这些帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T09:19:18.920

您可以使用 。

```
android:layout_width="fill_parent" 
```

而不是

```
android:layout_width="wrap_content" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T09:22:22.497

我怀疑如果您不使用斜体文本，则不会出现此问题。我会先测试一下，如果使用非斜体文本正确呈现它，那么它看起来像一个呈现问题，需要在 TextView 中使用额外的填充来解决斜体字母的空间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T09:22:27.710

这里的问题是斜体属性。你必须为你的文本视图设置一个特定的宽度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-23T15:01:33.397

您始终可以创建将使用例如此字体的自定义 TextView（因为实际上这是*斜体*类型的问题）：

```
Typeface tf = Typeface.createFromAsset(context.getAssets(), "fonts/Roboto-LightItalic.ttf");
setTypeface(tf); 
```

更多细节[在这里](https://github.com/afollestad/Cards-UI/blob/master/library/src/com/afollestad/cardsui/LightItalicTextView.java)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-21T15:06:49.843

我遇到了同样的问题，但是`EditText`使用了一些字体。我的解决方案也适用于`TextView`：

1.  使用填充

2.  与`TextView`使用`Canvas.clipRect(float, float, float, float)`in`onDraw`方法进行裁剪一样 - 创建自定义`Canvas`类并覆盖此方法（将其留空）。

3.  接下来创建自定义`TextView`并覆盖两个方法`onSizeChanged`和`onDraw`.

在`onSizeChanged`创建具有`TextView`我们自定义大小的位图`Canvas`。

首先通过将我们的自定义传递给方法 super.onDraw 来`onDraw`绘制位图。`Canvas`之后将位图绘制到目标 сanvas。

[在我对类似问题的](https://stackoverflow.com/a/53848612/8816298)回答中更详细

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-24T13:06:24.960

要缩小错误的来源，请尝试设置`android:letterSpacing="0"`这就是我的案例中截断字母的原因。字母间距过大的另一个提示是，当文本中有更多字母时，被截断的部分会变大。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-19T07:48:59.937

使用此代码：

```
textview.setShadowLayer(25f, 0f, 0f, 0) 
```

# ruby - 正则表达式 - Ruby vs Perl

> ID：10243377
> 
> 赞同：24
> 
> 时间：2012-04-20T09:15:55.520
> 
> 标签：ruby, regex, perl

我注意到我的 Ruby (1.9) 脚本中有一些极端的延迟，经过一番挖掘，它归结为正则表达式匹配。我在 Perl 和 Ruby 中使用以下测试脚本：

**珀尔：**

```
$fname = shift(@ARGV);
open(FILE, "<$fname" );
while (<FILE>) {
    if ( /(.*?) \|.*?SENDING REQUEST.*?TID=(.*?),/ ) {
        print "$1: $2\n";
    }
} 
```

**红宝石：**

```
f = File.open( ARGV.shift )
while ( line = f.gets )
    if /(.*?) \|.*?SENDING REQUEST.*?TID=(.*?),/.match(line)
        puts "#{$1}: #{$2}"
    end
end 
```

我对两个脚本使用相同的输入，一个只有 44290 行的文件。每一项的时间是：

**珀尔：**

```
xenofon@cpm:~/bin/local/project$ time ./try.pl input >/dev/null

real    0m0.049s
user    0m0.040s
sys     0m0.000s 
```

**红宝石：**

```
xenofon@cpm:~/bin/local/project$ time ./try.rb input >/dev/null

real    1m5.106s
user    1m4.910s
sys     0m0.010s 
```

我想我在做一些非常愚蠢的事情，有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T09:28:39.760

```
regex = Regexp.new(/(.*?) \|.*?SENDING REQUEST.*?TID=(.*?),/)

f = File.open( ARGV.shift ).each do |line|
    if regex .match(line)
        puts "#{$1}: #{$2}"
    end
end 
```

或者

```
regex = Regexp.new(/(.*?) \|.*?SENDING REQUEST.*?TID=(.*?),/)

f = File.open( ARGV.shift )
f.each_line do |line|
  if regex.match(line)
    puts "#{$1}: #{$2}"
  end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T18:57:56.937

一种可能的差异是正在执行的回溯量。Perl 在回溯时可能会更好地修剪搜索树（即注意何时可能无法匹配模式的一部分）。它的正则表达式引擎是高度优化的。

首先，添加前导 « `^`» 可能会产生巨大的影响。如果模式从位置 0 开始不匹配，那么它也不会在开始位置 1 匹配！所以不要试图在位置 1 匹配。

同样，« `.*?`» 并不像您想象的那样具有限制性，并且将它的每个实例替换为更具限制性的模式可以防止大量回溯。

你为什么不试试：

```
/
    ^
    (.*?)                       [ ]\|
    (?:(?!SENDING[ ]REQUEST).)* SENDING[ ]REQUEST
    (?:(?!TID=).)*              TID=
    ([^,]*)                     ,
/x 
```

（不确定用« »替换第一个« »是否安全`.*?`，`[^|]`所以我没有。）

（至少对于匹配单个字符串的模式来说，`(?:(?!PAT).)`是 to `PAT`as `[^CHAR]`is to `CHAR`。）

如果允许« » 匹配换行符，使用`/s`可能会加快速度`.`，但我认为它很小。

在 Ruby 中使用 « » 而不是 « » 来匹配下面的空格可能会稍微快一些。（在最近的 Perl 版本中它们是相同的。）我使用后者是因为它更具可读性。`\*space*``[*space*]``/x`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T09:48:29.610

来自[perlretut 章节：在 Perl 部分中使用正则表达式](http://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl)- “搜索和替换”

> （即使正则表达式出现在循环中，Perl 也足够聪明，只编译一次。）

我不太了解 Ruby，但我怀疑它确实会在每个循环中编译正则表达式。
（尝试从 LaGrandMere 的答案中验证它的代码）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T14:18:22.577

尝试使用`(?>re)`扩展。有关详细信息，请参阅[Ruby 文档](http://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html#UN)，此处引用：

> 这种结构 [..] 禁止回溯，这可以提高性能。例如，`/a.*b.*a/`当匹配一个包含 an`a` 后跟多个`b`s 但没有尾随 s的字符串时，该模式需要指数时间`a`。但是，这可以通过使用嵌套的正则表达式来避免 `/a(?>.*b).*a/`。

```
File.open(ARGV.shift) do |f|
  while line = f.gets
    if /(.*?)(?> \|.*?SENDING REQUEST.*?TID=)(.*?),/.match(line)
      puts "#{$1}: #{$2}"
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T19:33:39.530

红宝石：

```
File.open(ARGV.shift).each do |line|
    if line =~ /(.*?) \|.*?SENDING REQUEST.*?TID=(.*?),/
        puts "#{$1}: #{$2}"
    end
end 
```

`match`将方法更改为`=~`操作员。它更快，因为：

（Ruby 有 Benchmark。我不知道你的文件内容，所以我随机输入了一些内容）

```
require 'benchmark'

def bm(n)
    Benchmark.bm do |x|
    x.report{n.times{"asdfajdfaklsdjfklajdklfj".match(/fa/)}}
    x.report{n.times{"asdfajdfaklsdjfklajdklfj" =~ /fa/}}
    x.report{n.times{/fa/.match("asdfajdfaklsdjfklajdklfj")}}
    end
end

bm(100000) 
```

输出报告：

```
 user     system      total        real
   0.141000   0.000000   0.141000 (  0.140564)
   0.047000   0.000000   0.047000 (  0.046855)
   0.125000   0.000000   0.125000 (  0.124945) 
```

中间的一个正在使用`=~`. 它需要不到其他人的1/3。其他两个正在使用`match`方法。所以，`=~`在你的代码中使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-20T20:19:00.650

与其他形式的匹配相比，正则表达式匹配比较耗时。由于您希望匹配行中间有一个长的静态字符串，因此请尝试使用相对便宜的字符串操作过滤掉不包含该字符串的行。这应该会减少需要通过正则表达式解析的工作（当然，这取决于您的输入内容）。

```
f = File.open( ARGV.shift )
my_re = Regexp.new(/(.*?) \|.*?SENDING REQUEST.*?TID=(.*?),/)
while ( line = f.gets )
    continue if line.index('SENDING REQUEST') == nil
    if my_re.match(line)
        puts "#{$1}: #{$2}"
    end
end
f.close() 
```

因为我没有您的输入数据，所以我没有对这个特定版本进行基准测试。不过，我过去曾成功地做这样的事情，特别是对于冗长的日志文件，其中预过滤可以消除绝大多数输入而无需运行任何正则表达式。

# php - 如何存储 php 对象以在点击时使用 javascript 访问其数据

> ID：10243381
> 
> 赞同：0
> 
> 时间：2012-04-20T09:16:05.240
> 
> 标签：php, javascript, json, codeigniter, onclick

我试图找出最不显眼且计算成本最低的方式来存储来自我的 MySQL 数据库的 PHP 对象，这样它们的数据就可以在用户点击时由 JavaScript 呈现。

目前，我将数据存储为按钮上的自定义属性。但这会产生很多代码，我听说是“慢”。我想知道我是否应该对我的 PHP 对象进行 JSON 编码`$items`（见下文），以及 JavaScript 的外观。注意我正在为 PHP 使用 Codeigniter，所以这就是备用`foreach`循环语法。

到目前为止，这是我使用 HTML/PHP 的地方：

```
<img id="img"></img><a id="url"></a> <!--elements where data is rendered on click-->
<? foreach($items as $item):?>  
<button data-id="<?=$item->id?>" data-url="<?=$item->url?>" data-img="<?=$item->img?>">click<?=$item->id?></button>
<?endforeach;?> 
```

这是我的 JS：

```
$(document.body).on('click', 'button', function(){
   var $this=$(this), id=$this.data('id'), url=$this.data('url'), img=$this.data('img');
   $('#img').attr('src', img);
   $('#url').attr('href', url).html(url);
}); 
```

我网站的大部分数据都是通过 MySQL 来自 PHP，长期以来我一直对何时应该将该数据转换为 JavaScript 数组/JSON 的问题感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:24:27.853

如果您`json_encode`的`$items`数组（假设它仅包含您在 JS 中需要的数据），您可以将其分配给 JS 变量：

```
<script>var items = <?php echo json_encode($items); ?></script> 
```

然后，您可以删除`data-url`和`data-img`属性。然后，在您的 JS 代码中：

```
var $this = $(this), id = $this.data('id'), url = items[id].url, img = items[id].img;
// the rest of your code 
```

编辑：当你在一个单独的文件中移动点击处理程序时，你会得到这样的东西：

```
function setup_click(items) {
    var $img = $('#img'), $url = $('#url');

    $('button').click(function(evt) {
           var id = $(this).data('id'),
           url = String(items[id].url),
           img=String(items[id].img);
       $url.attr('href', url).html(url);         
           $img.attr('src', img);
    });
} 
```

这是一个展示 javascript/JSON 部分的 JSfiddle：http: [//jsfiddle.net/fz5ZT/55/](http://jsfiddle.net/fz5ZT/55/)

要从您的模板中一次性调用它：

```
<script src="[your ext script file path].js"></script>
<script>setup_click(<?php echo json_encode($items); ?>);</script> 
```

希望有帮助:)

# c# - 如何防止被零除？

> ID：10243382
> 
> 赞同：8
> 
> 时间：2012-04-20T09:16:08.870
> 
> 标签：c#, linq, divide-by-zero

```
ads = ads.Where(x => (x.Amount - x.Price) / (x.Amount / 100) >= filter.Persent); 
```

如果 x.Amount == 0 我有错误“遇到除以零错误。”

像我这样的要求是避免吗？

**更新：**

这有帮助，但我不喜欢这个决定：

```
ads = ads.Where(x => (x.Amount - x.Price) / ((x.Amount / 100)==0?0.1:(x.Amount / 100)) >= filter.Persent); 
```

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-06T22:08:47.353

当然，你总是可以实现一个通用的安全划分方法，并一直使用它

```
using System;

namespace Stackoverflow
{
    static public class NumericExtensions
    {
        static public decimal SafeDivision(this decimal Numerator, decimal Denominator)
        {
            return (Denominator == 0) ? 0 : Numerator / Denominator;
        }
    }

} 
```

我选择了**十进制**类型，因为它解决了我知道的所有不可为空的数字类型。

用法：

```
var Numerator = 100;
var Denominator = 0;

var SampleResult1 = NumericExtensions.SafeDivision(Numerator , Denominator );

var SampleResult2 = Numerator.SafeDivision(Denominator); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T09:18:03.863

```
ads = ads.Where(x => x.Amount != 0 &&
                    (x.Amount - x.Price) / (x.Amount / 100) >= filter.Persent); 
```

# vector - Borland C++ Builder 6 - E2316 'vector' 不是 'std' 的成员

> ID：10243383
> 
> 赞同：3
> 
> 时间：2012-04-20T09:16:10.287
> 
> 标签：vector, compiler-errors, borland-c++

对 c++ 来说相当新，我正在尝试在我的应用程序中使用向量。我在用

```
#include <vector> 
```

在头文件中，但是当我编译它在这一行失败：

```
std::vector<Shot> shot_list; 
```

注意错误 E2316 'vector' is not a member of 'std'

如果我随后删除 std::，则会导致未定义符号“向量”编译器错误消息。对这个真的很茫然。使用没有问题

```
std::list<Shot> shot_list; 
```

在使用向量之前。

这是一个简单的示例，但无法实现：

```
//---------------------------------------------------------------------------

#ifndef testclassH
#define testclassH
//---------------------------------------------------------------------------
#include <vector>
class TestClass {
        private:
        std::vector<int> testVect(1); // removing std:: and adding using namespace std; below the include for the vector it still fails to compile;

};

#endif 
```

[对我来说，我看不出这个和这个例子](http://www.neoseeker.com/forums/86/t199422-vectors-in-borland/)有什么区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T19:26:10.050

在不明确向量所在的命名空间的情况下，您不能单独使用“向量”。（使用命名空间std；）也许您可以粘贴相关代码以获得更多特殊帮助。

编辑：

您不能在 .h 中初始化向量。您需要在 .cpp 中执行此操作，可能使用向量的 resize() 函数。这可以是您的一个选项（使用类的构造函数）：

```
 #ifndef testclassH
    #define testclassH
    //---------------------------------------------------------------------------
    #include <vector>
    class TestClass {

    private:
    std::vector<int> testVect;

    public:
    TestClass()
    {
        testVect.resize(4);
    }

    };

    #endif 
```

如果您进行更改，您给出的简单示例将编译。

# objective-c - 如何在带有块和 Xcode 的新行上用大括号格式化源代码？

> ID：10243389
> 
> 赞同：11
> 
> 时间：2012-04-20T09:16:40.793
> 
> 标签：objective-c, xcode, objective-c-blocks, uncrustify

有没有办法让 Xcode 不重新格式化格式化的代码，或者有没有像 uncrustify 这样的工具可以格式化使用块的源代码？

使用 Objective-c 中的块，代码变得难以阅读。一种解决方案是写出块定义并将花括号放在新行上，如下所示：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^(void)
{
    //block of code
}); 
```

和：

```
[dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id value, BOOL *stop)
{
    //block of code
}]; 
```

美丽而轻松！

但是 Xcode 不保留这种格式，我找不到一种方法来使输出代码变得不可信。Uncrustify 真的很好，但也许块太新了？

有任何想法吗？

[免责声明：我知道这可能会变成“巨魔小时”，但代码应该尽可能易于阅读，并且在同一列上使用大括号会使事情变得更加清晰（对我来说）。特别是如果您在一个块中有多个块。所以如果你不喜欢这样的代码，请试着忽略这个问题。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T10:21:40.420

最新的（大约 2 个月左右）更新 unrustify 几乎解决了这个问题。只需在配置文件中设置以下项目：

```
indent_oc_block                          = true 
indent_with_tabs                         = 0        
indent_columns                           = 4        # set to the same as indent_switch_case
indent_switch_case                       = 4        # set to the same as indent_columns 
```

（我使用 indent_with_tabs = 0 因为我无法让它与标签一起使用。可能没有必要。）

当然，对于 {} 之后/之前的新行，请将 nl_some_parameter_brace 的所有内容设置为“强制”。

现在 uncrustify 将处理*您的*代码，它不会为您将新行插入块中，这样的代码将保持丑陋：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^(void) {
    //code
} 
```

如果有人找到一种让它适当地插入新行的方法，请告诉我。

感谢@ipmcc 对 uncrustify 的更新。

编辑：是的，每当您复制/粘贴时，xCode 都会混淆代码。我使用这个很棒的 xCode 插件来简化工作流程：[https ://github.com/benoitsan/BBUncrustifyPlugin-Xcode](https://github.com/benoitsan/BBUncrustifyPlugin-Xcode)

编辑 2：Uncrustify 不能很好地处理嵌套块（仍然比 Xcode 好）。例如，嵌套块变为：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^(void)
{
    [array enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop)
        {
            [array enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop)
                {
                    NSLog(@"the pumpkin pie!");
                }];
        }];
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T19:31:40.957

XCode 使用内置的“代码片段”进行自动完成。通过单击`{}`库窗格中的图标打开代码片段库。您不能直接在 XCode 本身内编辑片段，但应用程序[SnippetEdit](http://cocoaholic.com/snippet_edit/)允许您编辑它们。

我建议您在编辑之前备份“codesnippets”文件。它位于`/Applications/Xcode.app/Contents/PlugIns/IDECodeSnippetLibrary.ideplugin/Contents/Resources/SystemCodeSnippets.codesnippets`

# sql - 不要软删除包含其他表外键的表中的行

> ID：10243390
> 
> 赞同：0
> 
> 时间：2012-04-20T09:16:51.277
> 
> 标签：sql, sql-server, sql-server-2008

我正在我所有的表中进行软删除。当其他表中引用该 ID 时，我不应该软删除一行。此外，当引用的子表被删除时，即 Isdeleted = 1，那么我应该能够软删除父记录。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:01:41.717

您需要从架构中生成一些动态 sql。我没有时间在这里将所有项目都转换为动态 sql，但您可以使用游标循环，也可以使用`PIVOT`动态 SQL：

```
-- parent/child schemas, tables, columns
select parent_schema=p.TABLE_SCHEMA
, parent_table=p.TABLE_NAME
, parent_pk_column=p.COLUMN_NAME
, child_schema=c.TABLE_SCHEMA
, child_table=c.TABLE_NAME
, child_fk_column=c.COLUMN_NAME
from INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE p
inner join INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS pc
    on pc.UNIQUE_CONSTRAINT_SCHEMA=p.CONSTRAINT_SCHEMA
    and pc.UNIQUE_CONSTRAINT_NAME=p.CONSTRAINT_NAME
inner join INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE c
    on c.CONSTRAINT_SCHEMA=pc.CONSTRAINT_SCHEMA
    and c.CONSTRAINT_NAME=pc.CONSTRAINT_NAME
where exists(
    select 1 from INFORMATION_SCHEMA.COLUMNS
    where COLUMN_NAME='IsDeleted' and TABLE_SCHEMA=p.TABLE_SCHEMA and TABLE_NAME=p.TABLE_NAME
)

-- tables/pk columns having IsDeleted column but no children
select parent_schema=p.TABLE_SCHEMA
, parent_table=p.TABLE_NAME
, parent_column=p.COLUMN_NAME
from INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE p
where not exists(
    select 1 from INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS 
    where UNIQUE_CONSTRAINT_SCHEMA=p.CONSTRAINT_SCHEMA
    and UNIQUE_CONSTRAINT_NAME=p.CONSTRAINT_NAME
)
and exists(
    select 1 from INFORMATION_SCHEMA.COLUMNS
    where COLUMN_NAME='IsDeleted' and TABLE_SCHEMA=p.TABLE_SCHEMA and TABLE_NAME=p.TABLE_NAME
) 
```

# ruby-on-rails - ActiveRecord.joins 添加不需要的 sql

> ID：10243394
> 
> 赞同：0
> 
> 时间：2012-04-20T09:17:00.763
> 
> 标签：ruby-on-rails, activerecord, spree

我是 Rails 新手，所以如果它很愚蠢，请原谅这个问题：S

我使用 Spree 作为我选择的电子商务平台。

在 Rails 控制台中，我运行：

```
Spree::Product.joins(:product_properties, :taxons, :variants).limit(10) 
```

这将返回 sql：

```
SELECT `spree_products`.* FROM `spree_products` INNER JOIN `spree_product_properties` ON `spree_product_properties`.`product_id` = `spree_products`.`id` INNER JOIN `spree_products_taxons` ON `spree_products_taxons`.`product_id` = `spree_products`.`id` INNER JOIN `spree_taxons` ON `spree_taxons`.`id` = `spree_products_taxons`.`taxon_id` INNER JOIN `spree_variants` ON `spree_variants`.`product_id` = `spree_products`.`id` AND `spree_variants`.is_master = 0 AND `spree_variants`.deleted_at IS NULL LIMIT 10 
```

但是，我需要 sql 来设置值

```
 `spree_variants`.is_master = 1 AND `spree_variants`.deleted_at IS NOT NULL 
```

有人知道该怎么做吗？我努力了

```
Spree::Product.joins(:product_properties, :taxons, :variants).limit(10).where("`spree_variants`.is_master = 1 AND `spree_variants`.deleted_at IS NOT NULL") 
```

但这不起作用并生成以下sql

```
SELECT `spree_products`.* FROM `spree_products` INNER JOIN `spree_product_properties` ON `spree_product_properties`.`product_id` = `spree_products`.`id` INNER JOIN `spree_products_taxons` ON `spree_products_taxons`.`product_id` = `spree_products`.`id` INNER JOIN `spree_taxons` ON `spree_taxons`.`id` = `spree_products_taxons`.`taxon_id` INNER JOIN `spree_variants` ON `spree_variants`.`product_id` = `spree_products`.`id` AND `spree_variants`.is_master = 0 AND `spree_variants`.deleted_at IS NULL WHERE (`spree_variants`.is_master = 1 AND `spree_variants`.deleted_at IS NOT NULL) LIMIT 10 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:01:36.600

[使用squeel](http://erniemiller.org/projects/squeel/) gem可以节省大量时间。它广泛使用块，并允许您在纯 Ruby 上编写（以及其他功能）这样的查询：

```
.where{(spree_variants.is_master == 1) & (spree_variants.deleted_at != nil)} 
```

注意方括号的使用和符号的缺失。

要使用这些功能，只需将此行添加到您的`Gemfile`：

```
gem 'squeel' 
```

并运行`bundle install`。

# objective-c - 比较数组的两个对象时遇到问题

> ID：10243395
> 
> 赞同：0
> 
> 时间：2012-04-20T09:17:03.460
> 
> 标签：objective-c, arrays, comparison, compare, elements

这个问题可能看起来是重复的，但它有一种特定的时刻，可能与其他类似的问题不同......

所以...我有两张图片。两者都是在同一个屏幕上捕获的。在我的代码中，将两个（screenCaptureFirst 和 screenCaptureSecond）大图像裁剪成小的裁剪图像（每个裁剪图像都有 32x32 尺寸）。然后我将它们推入两个数组。现在我必须比较两个数组的每个元素。 `- (void) differenceDetector{`

 ````
int index=0;

for (int currentGridY=0; currentGridY<newCapturedImage.size.height; currentGridY+=gridSize) {
    for (int currentGridX=0; currentGridX<newCapturedImage.size.width; currentGridX+=gridSize) {

        CGRect rect=CGRectMake(currentGridX, currentGridY, gridSize, gridSize);
        UIImage *croppedNewImage=[self croppedImage:rect anImage:newCapturedImage];
        [arrayOfNewImageGrids addObject:croppedNewImage];
        UIImage *croppedOldImage=[self croppedImage:rect anImage:oldCapturedImage];
        [arrayOfOldImageGrids addObject:croppedOldImage];

        if ([[arrayOfNewImageGrids objectAtIndex:index]isEqual:[arrayOfOldImageGrids objectAtIndex:index]]) {
            NSLog(@"Index=%d",index);
        }
        NSLog(@"newGridArray=%@",[arrayOfNewImageGrids objectAtIndex:index]);
        NSLog(@"oldGridArray=%@",[arrayOfOldImageGrids objectAtIndex:index]);
        index++;
    }
} 
```` 

`问题是，如果比较结果为 FALSE，尽管在数组中是同一大图像的裁剪图像，但它何时到达。
提前致谢....`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:44:12.960

我非常怀疑`UIImage`实现`-isEqual:`（和`-hash`）来比较图像内容！几乎可以肯定，它们只是依赖于`NSObject`指针标识的标准相等语义（它们只与自己比较相等）。

如果你想比较两个图像是否相等，你必须自己做。比较它们的所有元数据属性。然后，在您确定所有元数据都相等后，获取底层图像位并使用`memcmp()`or进行比较`NSData`。`

# javascript - Facebook Graph API - 离线访问的访问令牌（弃用）

> ID：10243396
> 
> 赞同：0
> 
> 时间：2012-04-20T09:17:10.740
> 
> 标签：javascript, facebook, facebook-graph-api

我试图让我的头脑了解 Facebook 最近弃用的带有访问令牌的 offline_access。我正在使用一个名为 neosmart FB Wall 的 JS 插件，它使用附加访问令牌的 AJAX 调用来请求墙数据。据我了解，从今天早上的测试来看，现在如果 Facebook 用户注销，将需要一个新的访问令牌，而之前的访问令牌将失效。

所以基本上我认为我必须扩展插件，以便它检查来自 Facebook 的响应，并在必要时发送登录凭据以请求新的访问令牌。对我来说有点令人困惑的是，我有 5 个网站已经使用同一个插件一年多了，即使 Facebook 帐户已经登录和注销，他们都没有遇到访问令牌过期的任何问题好几次！任何人都可以阐明这里可能发生的事情吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:16:35.773

由于不推荐使用 offline_access，您可以创建一个长期使用的 Facebook 访问令牌。fb.wall 的开发人员发布了一个新插件：neosmart STREAM - fb.wall 的官方继任者 - 该插件包含一个 Facebook 访问令牌创建器，可创建长寿命访问令牌。项目网站：[https ://neosmart-stream.de](https://neosmart-stream.de)

# vb.net - dll与程序集不匹配

> ID：10243399
> 
> 赞同：0
> 
> 时间：2012-04-20T09:17:31.900
> 
> 标签：vb.net

当我在 C# 应用程序中添加一个 .dll 文件作为引用时，它显示一个错误：

```
A reference to the "....dll" could not be added.
Please make sure that the file is accessible and that it is a valid assembly
or COM component. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:20:19.803

您确定您的 dll 不在受保护的文件夹中吗？例如，您需要某些文件夹的管理员权限。尝试将您的 dll 移动到另一个文件夹中，然后尝试添加并编译它

# c# - OpenPop.Pop3 错误

> ID：10243400
> 
> 赞同：0
> 
> 时间：2012-04-20T09:17:33.990
> 
> 标签：c#

我正在尝试使用 OpenPop 库连接到交换服务器，当我尝试连接时显示“服务器不可用”，这是我的代码：

```
 Pop3Client Client = new Pop3Client();
            Client.Connect("srv", 25, false);
            Client.Authenticate("usr", "pass"); 
```

你能告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:59:41.927

端口不对。

请为 POP3 使用以下端口：端口 110 或端口 995 用于安全 SSL。

还请检查“srv”是否是一个有效的主机名，我认为这也是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:20:51.617

“srv”是一个有效的主机名吗？尝试在命令行中 ping 主机名。

而 25 端口通常是发送电子邮件的端口。

我建议也验证端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:22:29.713

如果您使用用户名和密码进行身份验证，则需要传递`AuthenticationMethod.UsernameAndPassword`给`Authenticate`：

```
using(var client = New OpenPop.Pop3.Pop3Client())
{
   // Connect to the server
   client.Connect(Pop3Server, Pop3Port, false);
   // Authenticate towards the server
   client.Authenticate("usr", "pass", OpenPop.Pop3.AuthenticationMethod.UsernameAndPassword);
   // Get the number of messages in the inbox
   int messageCount = client.GetMessageCount();
} 
```

请注意，我使用了 using 语句，当 onject 实现时总是推荐使用该语句`IDisposable`。

# sql - 选择 Oracle 字典视图中可能不存在的列

> ID：10243404
> 
> 赞同：3
> 
> 时间：2012-04-20T09:17:51.283
> 
> 标签：sql, oracle, compatibility, information-schema

我想在`SYS.ALL_ARGUMENTS`. 在 Oracle 11g 中，`ALL_ARGUMENTS.DEFAULTED`添加了有用的列。现在，如果我对 Oracle 10g 运行此查询：

```
SELECT defaulted FROM all_arguments 
```

当然，我得到一个错误。

> ORA-00904: "SYS"."ALL_ARGUMENTS"."DEFAULTED": 标识符无效

我想做的是：

```
SELECT CASE WHEN column_exists("defaulted") 
            THEN defaulted 
            ELSE 'N'
       END
FROM all_arguments 
```

甚至更好

```
SELECT evaluate_column_on_current_row(column_name           => "defaulted", 
                                      default_if_not_exists => 'N')
FROM all_arguments 
```

有没有办法在单个 SQL 查询中做到这一点，而不使用 PL/SQL？或者我应该像这样首先检查 Oracle 版本：

```
SELECT count(*) 
FROM all_tab_cols
WHERE owner = 'SYS'
AND table_name = 'ALL_ARGUMENTS'
AND column_name = 'DEFAULTED' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:24:12.977

引用不存在的列的查询无法生成有效的计划。

您需要选择一种提交的查询始终有效的方法。无论是动态生成/执行它们，还是其他一些方法。

但是，如果您提交要解析的查询，并且它在存在的表上包含不存在的字段，则解析器会将其返回给您。

# java - 时间选择器在 android 上给出不寻常的时间格式

> ID：10243408
> 
> 赞同：1
> 
> 时间：2012-04-20T09:18:28.937
> 
> 标签：java, android

我在我的 android 项目中使用了时间选择器。在 onTimeChange 方法中，我做了这样的事情：

```
@Override
    public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {

        long PICK = ((hourOfDay * 60 * 60) + (minute * 60)) * 1000;
        String delegate = "hh:mm aaa";
        timemode = (String) DateFormat.format(delegate, PICK);
        Toast.makeText(getApplicationContext(), timemode, Toast.LENGTH_LONG).show();
    } 
```

但是当我敬酒时，它显示不寻常的时间（6小时差异），如何在时间选择器中获取原始时间？

# java - 错误：包含版本的项目 部署描述符需要 XMI 格式的绑定或扩展文件。ibm-web-bnd.xml

> ID：10243424
> 
> 赞同：8
> 
> 时间：2012-04-20T09:19:57.827
> 
> 标签：java, jakarta-ee, websphere, ibm-rad

我已将编辑器从**Rad 7.5 升级到 8**和**maven 2 到 3**。这发生在 RAD 8 中**导入现有 maven 项目**之后，但我在任何 pom 文件上都没有错误。

问题在于两个 xml 文件：

包含版本部署描述符的项目需要 XMI 格式的绑定或扩展文件。**ibm-web-bnd.xml** /DocViewerWeb/WebContent/WEB-INF 未知验证消息

包含版本部署描述符的项目需要 XMI 格式的绑定或扩展文件。**ibm-web-ext.xml** /DocViewerWeb/WebContent/WEB-INF 未知验证消息

这两个文件的内容是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-bnd 
    xmlns="http://websphere.ibm.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://websphere.ibm.com/xml/ns/javaee http://websphere.ibm.com/xml/ns/javaee/ibm-web-bnd_1_0.xsd"
    version="1.0">

    <virtual-host name="default_host" />

  <ejb-ref name="ejb/MaintenanceServices" binding-name="ejblocal:com.tscdv.document.b.MaintenanceServices" />
  <ejb-ref name="ejb/ServiceTipsDocumentServices" binding-name="ejblocal:com.tscdv.document.b.ServiceTipsDocumentServices" />
  <ejb-ref name="ejb/ActivityDocumentServices" binding-name="ejblocal:com.tscdv.document.b.ActivityDocumentServices" />
  <ejb-ref name="ejb/BulletinDocumentServices" binding-name="ejblocal:com.tscdv.document.b.BulletinDocumentServices" />
  <ejb-ref name="ejb/CommonService" binding-name="ejblocal:com.tscdv.document.b.CommonService" />
  <ejb-ref name="ejb/AdminServices" binding-name="ejblocal:com.tscdv.document.b.AdminServices" />

</web-bnd> 
```

**和**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-ext
    xmlns="http://websphere.ibm.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://websphere.ibm.com/xml/ns/javaee http://websphere.ibm.com/xml/ns/javaee/ibm-web-ext_1_0.xsd"
    version="1.0">

    <reload-interval value="3"/>
    <context-root uri="DocViewerWeb" />
    <enable-directory-browsing value="true"/>
    <enable-file-serving value="true"/>
    <enable-reloading value="true"/>
    <enable-serving-servlets-by-class-name value="true" />

</web-ext> 
```

这里可能是什么问题？

我发布了**另一个可能相关的问题**： [JSR250: CommonAnnotations for Java, 2.3: @Resource 方法必须是遵循标准 JavaBeans 约定的设置器](https://stackoverflow.com/questions/10243455/jsr250-commonannotations-for-java-2-3-resource-methods-must-be-setters-that)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T13:34:55.530

包含 web.xml`version="2.4"`或更低的项目需要 ibm-web-bnd。**xmi**和 ibm-web-ext。**小米**。

包含 web.xml`version="2.5"`或更高版本的项目需要 ibm-web-bnd。**xml**和 ibm-web-ext。**.xml** _

也许工具版本的更改已将您的 web.xml 版本升级到 2.5，现在 RAD 警告说这与您的 web.xml 不兼容？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T16:48:13.983

如果您想使用 web.xml 2.5 版，作为对 bkail 答案的评论的扩展（这很有帮助），您应该使用以下序言和父节点。从技术上讲，注释是不准确的，因为命名空间缺少 http://，如果您不使用它会导致额外的错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app
  xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  version="2.5"> 
```

# javascript - 使用 JavaScript 刷新内部页面

> ID：10243426
> 
> 赞同：0
> 
> 时间：2012-04-20T09:20:00.750
> 
> 标签：javascript, jquery

我有一个表单，每次执行 onchange() 事件时，页面应该再次运行我的 javascript 代码（但不能使用新的 url 请求刷新页面）。

任何想法？我知道这一定很简单。

我的javascript代码：

```
 $(document).ready(function(){

    formObject = document.forms['newBom'];
    var vendor = formObject.elements['inptHardware'].value;
    console.log('selected vendor: ' + vendor);

    var product = formObject.elements['inptProduct'].value;
    console.log('selected product: ' + product); 

 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:23:41.443

这应该可以解决问题：

```
$('form[name="newBom"] :input').change(function() {
    // your code there
}); 
```

# python - 在 Python 数据集中搜索单词模式

> ID：10243428
> 
> 赞同：2
> 
> 时间：2012-04-20T09:20:14.670
> 
> 标签：python, regex, string, count

我希望我能够清楚地解释这个问题。我是一名 python 实验者（以防下面的查询显得幼稚）

假设我有一个形式的数据集：

```
a = ( ('309','308','308'), ('309','308','307'), ('308', '309','306', '304')) 
```

让我把每一个都`('309','308','308')`称为一条路径。

我想找到以下计数：

一个。`Count('309','308', <any word>)`

湾。`Count('309',<any word>,'308')`

和所有可能的排列。

我在想它是某种正则表达式，可以帮助我实现这个搜索。而且，我拥有的路径数达到 50000。

谁能建议我如何在 python 中进行这种操作？我探索了 trie，radix，但我认为这对我没有帮助。

谢谢，萨加尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:27:03.960

您可以使用它[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)来执行此操作：

```
>>> from collections import Counter
>>> a = ( ('309','308','308'), ('309','308','307'), ('308', '309','306', '304'))
>>> Counter((x, y) for (x, y, *z) in a)
Counter({('309', '308'): 2, ('308', '309'): 1})
>>> Counter((x, z) for (x, y, z, *w) in a)
Counter({('308', '306'): 1, ('309', '308'): 1, ('309', '307'): 1}) 
```

我在这里也使用了扩展元组解包，它在 Python 3.x 之前不存在，只有当你有不确定长度的元组时才需要它。在 python 2.x 中，您可以改为：

```
Counter((item[0], item[1]) for item in a) 
```

但是，我不能说这会有多有效。我不相信它应该是坏的。

A`Counter`有一个类似`dict`的语法：

```
>>> count = Counter((x, y) for (x, y, *z) in a)
>>> count['309', '308']
2 
```

编辑：您提到它们的长度可能大于一，在这种情况下，您可能会遇到问题，因为如果它们短于所需长度，它们将无法解包。解决方案是更改生成器表达式以忽略任何不符合要求的格式：

```
Counter((item[0], item[1]) for item in a if len(item) >= 2) 
```

例如：

```
>>> a = ( ('309',), ('309','308','308'), ('309','308','307'), ('308', '309','306', '304'))
>>> Counter((x, y) for (x, y, *z) in a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3.2/collections.py", line 460, in __init__
    self.update(iterable, **kwds)
  File "/usr/lib/python3.2/collections.py", line 540, in update
    _count_elements(self, iterable)
  File "<stdin>", line 1, in <genexpr>
ValueError: need more than 1 value to unpack
>>> Counter((item[0], item[1]) for item in a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3.2/collections.py", line 460, in __init__
    self.update(iterable, **kwds)
  File "/usr/lib/python3.2/collections.py", line 540, in update
    _count_elements(self, iterable)
  File "<stdin>", line 1, in <genexpr>
IndexError: tuple index out of range
>>> Counter((item[0], item[1]) for item in a if len(item) >= 2)
Counter({('309', '308'): 2, ('308', '309'): 1}) 
```

如果您需要可变长度计数，最简单的方法是使用列表切片：

```
start = 0
end = 2
Counter(item[start:end] for item in a if len(item) >= start+end) 
```

当然，这只适用于连续运行，如果你想单独选择列，你必须做更多的工作：

```
def pick(seq, indices):
    return tuple([seq[i] for i in indices])

columns = [1, 3]
maximum = max(columns)
Counter(pick(item, columns) for item in a if len(item) > maximum) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:50:02.687

如果您想以 CS 风格的高效方式执行此操作，您应该查看[Trys](http://en.wikipedia.org/wiki/Trie)。您需要稍作修改才能将每个子树的大小存储在其根上，但这应该不会太难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:28:11.500

如果您是 Python 2.7 之前的版本，则可以使用列表推导：

```
#Number of: ('309','308', <any word>)
>>> len([i[0] for i in a if i[0]=='309' and i[1]=='308'])
2
#Number of:('309',<any word>,'308')
>>> len([i[0] for i in a if i[0]=='309' and i[-1]=='308'])
1 
```

使用列表理解似乎也比使用快一些`Counter`，虽然元组解包很好，但它也会减慢速度。`defaultdict`可以更快地完成类似的事情：

```
from collections import Counter, defaultdict

a = []
for i in range(500000):
    a.append(('309','308','308'))

def ww(a):
    return Counter((item[0], item[1]) for item in a)

def xx(a):
    return len([i[0] for i in a if i[0]=='309' and i[1]=='308'])

def yy(a):
    g = defaultdict(int)
    for i in a:
        g[(i[0],i[1])] += 1
    return g

def zz(a):
    return Counter((i, j) for (i, j, *k) in a)

from timeit import timeit
print('Counter..:',timeit("ww(a)", "from __main__ import ww, a", number=100))
print('compreh..:',timeit("xx(a)", "from __main__ import xx, a", number=100))
print('defdict..:',timeit("yy(a)", "from __main__ import yy, a", number=100))
print('Count+un.:',timeit("zz(a)", "from __main__ import zz, a", number=100))
#output:
Counter..: 8.411258935928345
compreh..: 2.8653810024261475
defdict..: 4.256785154342651
Count+un.: 18.45333218574524 
```

# java - 如何使用超时机制中断正在进行的任务？

> ID：10243432
> 
> 赞同：0
> 
> 时间：2012-04-20T09:20:22.210
> 
> 标签：java, multithreading, ftp, download

我目前正在开发基于包 commons.net 的 ftp 客户端，以便运行测试以查看连接速度。基本上我的 ftp 测试包括连接到服务器，登录它，然后根据需要开始一个下载/上传周期，直到用户决定通过按钮停止它，然后当前周期将结束，所以测试。

但是，在运行这些测试时，出现了需要超时机制的情况。服务器正在传输文件，并在它确实完成之前发送返回码 226（传输完成）。

所以我的线程仍然卡住，当它不再可能时试图清空 inputStream。

我的想法是在下载过程中启动一个线程计时器，每次将一个字节传输到我的客户端时都会重置该计时器。当超时发生时，会引发一个异常左右，我的客户会对此做出反应，中止下载。

我已经阅读并尝试了许多解决方案，其中包括： - 从线程引发异常 -> 线程捕获异常而不是客户端；- 从线程中中断客户端，因此客户端引发了一个 interruptedException -> 似乎不起作用；- 使用超时的执行器 -> 因为我不知道下载的“正常”持续时间，所以我不能在我开始任务时把它交给执行器，而且，当我收到时必须重置计时器数据。

我在许多论坛上阅读了很多关于它的内容，但没有找到任何似乎适合并在这种情况下工作的解决方案。如果有人有另一种方法的想法？

这是我正在执行的操作的代码：

```
public double get(String fileName) {
    [...]
    org.apache.commons.net.io.Util.copyStream(stO,stD,client.getBufferSize(),
                this.localSize,
                new org.apache.commons.net.io.CopyStreamAdapter() {
                    public void bytesTransferred(long totalBytesTransferred,
                            int bytesTransferred,long streamSize) {
                        setProgressDL(totalBytesTransferred);
                        //reset the timer here
                    }
        });
[...]
} 
```

这是我的一些测试代码，启动我的客户端：

```
public class TestFtp extends Thread {
[...]
public void run() {
    System.out.println("Launching FTP test");
    FtpClient client = new FtpClient(this.model, this, this.model.getFtpServer());
    try {
                    //Attempting connection on the server
        client.connect();
        try {
            // Attempting login
            client.login(this.model.getUsername(), this.model.getPassword());
            do {
                client.changeDirectory("get");
                                    // start timer
                client.get(this.model.getDistantFileName());
                                    // stop timer

                client.changeToParentDirectory();
                client.changeDirectory("put");
                client.set(this.model.getDistantFileName(),
                        this.model.getNewFileName());

                client.changeToParentDirectory();
                try {
                    // Little pause between each test
                    Thread.sleep(500);
                } catch (InterruptedException e) {}
                // Continue test until the user stops it
            } while (this.continuous);
            // Once the test is over, logout
            client.logout();

            } catch (FTPLoginException e) {
            // If login fails, the test ends
            System.out.println("Unable to login to the server.");
        }
    } catch (FTPConnectException e) {
        // If connection error, the test ends
        System.out.println("Unable to connect to the server.");
    }
} 
```

如果有人可以提供帮助，请提前感谢您，如果您需要有关我的实际代码的更多信息，我可以在此处提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:20:09.227

如果您不想抛出不必要的异常，您应该使用一个布尔标志来控制线程（或可运行）的执行：

```
public class TestFtp extends Thread {
[...]
boolean abort;
public void run() {
    [...]
    do{
      [...]
    } while (this.continuous && !abort);
    if (abort){
      // You might want to do something here
    }else{
      // The stuff you normally do
    }
}
} 
```

然后只需将`abort`标志设置为`false`从外部。这样，您可以更好地控制线程将如何终止，以及`thread.interrupt();`未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:34:52.153

好吧，我很抱歉，但我承认我还没有阅读您的所有代码，但是如果您想中断正在运行的线程，请做两件事：

1.  在 try/catch 块中运行线程代码，如下所示：

例子：

```
public void run() {
    try {
        // code to run
    } catch (InterruptedException ie) {
        // thread interrupted, may want to do some clean up
        // but must return as quickly as possible to avoid halting external code
    }
} 
```

1.  需要时在外部调用上面线程的interrupt()方法。

例子：

```
thread.interrupt(); 
```

这将告诉虚拟机在你的线程中抛出 InterruptedException，无论它在做什么，让你有机会做一些事情。

我希望这就是你要找的...

编辑

好的，一个有效的具体示例：

```
public class Driver {

private static int count = 0;

public static void main(String[] args) {

    Thread t = new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                bigTask();
            } catch (InterruptedException ie) {
                System.out.println("Interrupted thread! Count is " + count);
            }
        }
    });

    t.start();

    try {
        Thread.sleep(1000);
        System.out.println("Trying to interrupt thread");
        t.interrupt();
    } catch (InterruptedException e) {}

}

private static void bigTask() throws InterruptedException {
    List<BigDecimal> bigs = new ArrayList<BigDecimal>();
    for (int i = 0; i < 10000000; i++) {
        bigs.add(BigDecimal.valueOf(i));
        if (Thread.interrupted()) {
            throw new InterruptedException();
        }
        count = i;
    }
    System.out.println("Ok, added ten million items, count is " + count);
} 
```

}

# c - C/C++ - 理解音频插值代码

> ID：10243435
> 
> 赞同：1
> 
> 时间：2012-04-20T09:20:31.297
> 
> 标签：c, audio, interpolation, packets

下面的代码旨在实现两种策略来插入丢失的数据包 - 这两种策略是 1) 用静音填充间隙，或 2) 重复前一个数据包，如果超过一个数据包，则用静音填充其余数据包。该代码有广泛的评论，但我似乎无法理解不同变量的含义。有人介意帮我理解这段代码吗？感谢任何指导！

```
#include "interpolate.h"
#include "assert.h"

/* write a packet's worth of silence */
void write_silence(FILE *ofile, int num_samples) {
  short missing_pkt[num_samples];
  int i;
  for (i=0; i < num_samples; i++) {
    missing_pkt[i]=0;
  }
  fwrite(missing_pkt, 1, num_samples*2, ofile);
}

/* simulate the reception of a packet, and apply a loss repair strategy */
void recv_packet(int seqno, int len, char *data, FILE *ofile, int strategy) {
  static int prev_seqno = -1;
  static short* prev_samples = 0;

  /* interpret the data as signed 16 bit integers */
  short *samples = (short*)data; 
  int num_samples = len/2;

  printf("recv_packet: seqno=%d\n", seqno);

  if (prev_seqno != -1 && (prev_seqno+1 != seqno)) {
    int i, missing_seqno;
    /* there was missing data */

    printf("s=%d\n", strategy);
    switch(strategy) {
    case SILENCE: 
      {
    /* create a packet containing silence */
    missing_seqno = prev_seqno + 1;
    while (missing_seqno < seqno) {
      write_silence(ofile, num_samples);
      missing_seqno++;
    }
    break;
      }
    case REPEAT_PREV: 
      {
    /* repeat the previous packet */
    fwrite(prev_samples, 2, num_samples, ofile);
    missing_seqno = prev_seqno + 2;
    while (missing_seqno < seqno) {
      /* repeating the same packet more than once sounds bad */
      write_silence(ofile, num_samples);
      missing_seqno++;
    }
    break;
      }

    default:
      abort();
    }
  }

  fwrite(samples, 1, num_samples*2, ofile);

  /* hold onto the last received packet - we may need it */
  if (prev_samples != 0)
    free(prev_samples);
  prev_samples = samples;
  prev_seqno = seqno;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:31:00.063

变量约定：

*   `seqno`： 序列号
*   `samples`: 音频数据作为样本
*   `prev_`： 以前的
*   `ofile`： 输出文件

如果不理解代码，你怎么知道它应该做什么？这个想法是数据包具有递增的序列号，从 0 到无穷大。-1 是初始状态，甚至没有收到任何数据包。当您收到一个数据包并

```
 if (prev_seqno != -1 //it is not the first packet 
      && 
     (prev_seqno+1 != seqno) //the packet is not the one we expected  
      ){ 
   //there are (seqno - prev_seqno - 1) packet missing.
   //do something about it. 
```

当你进入这个条件时，你就有了差距。根据策略，您可以`ofile`使用静音或收到的最后一个样本的副本填充输出文件。在音频`silence = 0`中。

例如，如果最后一个数据包是 0，而您收到了数据包 4，则意味着数据包 1、2 和 3 丢失。在这种情况下，根据策略，您会将 1、2、3 视为静音数据包或重复 0。

# windows - 有没有办法在文件系统上伪造文件或编写仅对我的 EXE 文件可见的文件

> ID：10243436
> 
> 赞同：3
> 
> 时间：2012-04-20T09:20:30.837
> 
> 标签：windows, winapi, filesystems, adobe, activex

好的，我编写了使用 Adob​​e ActiveX 控件来显示 PDF 文件的应用程序。

Adobe ActiveX 控件仅从文件系统加载文件。所以我需要为这个控件提供一个文件路径。

问题是我不想在文件系统上存储 PDF 文件。活动临时！**我不想将我的 PDF 文件只存储在内存**中，我想使用 Adob​​e ActiveX 控件。

**所以我需要：**

1）一种在文件系统上伪造文件的方法。所以这个控件会“认为”有一个文件，但会从内存中加载它

2）一种在文件系统上创建文件的方法，该文件仅对一个应用程序“可见”，因此我的 PDF 控件可以加载它，而其他用户甚至看不到它。

3) 别的东西

**PS：我不是要“完成我的家庭作业”，我只是在问 - 有没有办法做到这一点？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:28:44.263

你*几乎*可以做到（意思是：不，你不能，但你可以做一些接近的事情）。

创建文件原则上`FILE_ATTRIBUTE_TEMPORARY` *会*临时创建一个文件。但是，只要有足够的缓冲区缓存（通常情况下总是如此，除非您的文件是几十到几百兆字节），系统*就不会写入磁盘*。这不仅仅是偶然发生的事情，而是这个标志的实际指定行为。

此外，指定`0`为共享模式`FILE_FLAG_DELETE_ON_CLOSE`并将阻止任何其他进程打开您的文件，只要您保持打开状态，即使有人知道它在那里，并且当您关闭它时文件将“消失”。即使您的应用程序崩溃，操作系统也会在您身后清理（如果 DRM 是原因）。如果您处于超级偏执模式并担心文件存在时系统蓝屏，您也可以另外安排待处理的移动。如果系统崩溃，这将在引导期间删除文件。

最后，给定 NTFS，您可以在任何文件甚至目录上创建一个具有随机的、最好是唯一的名称（例如文档的 SHA1 或 UUID）的备用流。目录上的备用流是......一种讨厌的黑客，但完全合法，它们工作得很好，并且不会出现在资源管理器中。这不会*真正*使您的文件不可见，但几乎如此（几乎在每个实际方面，无论如何）。如果你是一个好公民，你会想要使用系统临时文件夹来做这样的事情，而不是程序文件夹或其他你不应该写的地方。
创建备用流也非常简单，只需使用普通文件或目录名称并附加一个冒号 ( `:`) 和您想要的流的名称。不需要额外的 API。

除此之外，它变得有点困难。当然，您总是可以创建类似 ramdisk 之类的东西（虽然很难隐藏它），或者尝试使用内存流功能之一来欺骗应用程序，使其根据文件的指控从内存缓冲区读取...但这不是微不足道的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:19:32.710

您可以创建虚拟磁盘并将对其的访问限制为仅特定应用程序。为此，您必须编写文件系统驱动程序或文件系统过滤器驱动程序。两者都在内核模式下工作，并且很难编写和维护。我们公司提供的组件让您避免自己编写驱动程序并在用户模式下编写业务逻辑（我们在这些产品中提供驱动程序）。

您最明显的选择是摆脱 Adob​​e Reader 控制并使用一些第三方组件来显示 PDF 并可以从内存中加载它们。

但总的来说，聪明的黑客能够捕获您的数据，除非您有 (a) 非标准数据格式，和/或 (b) 从服务器动态流式传输数据，而不是将完整数据保存在计算机上。这些也不是万无一失的解决方案，但它们使黑客的工作更加困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:32:41.250

如果某些东西需要在文件系统上传递给另一个应用程序，您不能将其隐藏/限制到某些进程。您的应用程序可以看到的任何内容，相同权限级别的其他任何内容也可以查看/访问。您可能可以锁定它，但如何锁定它取决于您要保护的原因。

请记住，用户的 PC 是他们的，而不是您的，因此他们可以完全访问其中的所有内容。

# php - Mysql如何选择所有订单和订单中的项目

> ID：10243438
> 
> 赞同：0
> 
> 时间：2012-04-20T09:20:40.840
> 
> 标签：php, mysql, sql

好的，我有 3 个表，其中一个包含产品，一个包含订单，并使用订单 ID 和产品 ID 连接表以将产品与订单相关联。

但是我如何设置一个查询来选择并返回所有订单以及每个订单中的项目。所以我最终在每一行都有一列 order_items。

到目前为止，我有：

```
SELECT
  intOrderID AS Order_ID, 
  strPaymentMethod AS Payment_Method,
  strPaymentRef, AS Payment_Ref, 
  strPaymentStatus AS Payment_Status,
  dtmDate AS Date, 
  curPaymentAmount AS Net_Price, 
  curShippingFee AS Shipping_Fee 
FROM tbl_mod_ShopOrders 
```

另一个表是`tbl_mod_ShopOrderItems`，我需要选择

```
intProductID
strProductTitle
curPrice
intQty 
```

对于订单中的每个项目。

我知道我需要做某种子查询，但要注意如何构造它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:27:00.297

假设您的表是`PRODUCT`，`ORDER`并且连接表`PRODUCTORDER`有键`product_id`和`order_id`，您可以：

```
SELECT o.id, GROUP_CONCAT(po.product_id) AS products_list
FROM PRODUCT p, PRODUCTORDER po
WHERE o.id = po.order_id
GROUP BY o.id
ORDER BY o.id 
```

作为聚合函数使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function%5Fgroup-concat)。上述结果，例如：

```
id | products_list
---|--------------
01 | 1,4,9
02 | 2,4,6
03 | 5
04 | 3,5 
```

`id`订单编号在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:35:16.440

每个订单将有几个项目。这意味着当您选择订单时，每一行可能有一个或多个项目。

如果您需要简单地显示每个订单中的商品数量等简单信息，您可以通过一个查询轻松检索所有这些信息。

但是，如果您需要在每个订单中显示有关商品的详细信息（例如商品、数量、价格），则执行第二次查询会更容易，检索商品信息。第二个查询可以对每个订单执行一次，也可以对所有显示的订单执行一次（使用显示的订单 ID 创建一个数组，并使用该`IN`子句选择属于这些 ID 的所有项目）。

详细场景示例：

```
//$orders = array of orders retrieved by your query

// loop through the orders to collect all ids
$order_ids = array();
foreach($orders as $order) {
    $order_ids[] = $order->Order_ID;
}

// build the select to retrieve all items
$items = array();

// make the select only if there are orders available
if(count($order_ids) > 0) {
      $q = "SELECT * from tbl_mod_ShopOrderItems WHERE order_id IN (" . implode(',', $order_ids) . ") ";
       // ...
       // assign result to $items
} 
```

稍后，在显示订单时，您可以遍历`$items`并检查是否`order_id`与您当前的匹配`order`

```
foreach($orders as $order) {
    // ...
    // display order info

    // display order items
    foreach($items as $item) {
         // if the item belongs to the current order
         if($item->order_id == $order->order_id) {
             // ...
             // display the current item
         }
    }
} 
```

# google-play - 为已在 Android 市场上可用和销售的应用程序添加许可

> ID：10243439
> 
> 赞同：0
> 
> 时间：2012-04-20T09:20:44.377
> 
> 标签：google-play

我有一个应用程序已经在市场上销售了一段时间并且已经售出。至今未获许可。

现在我喜欢添加许可。

有什么需要考虑的吗，或者我可以添加许可并确保实际购买该应用程序的用户在更新应用程序时不会有任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:24:50.310

是的，您可以轻松做到这一点。只需制作包含所有信息的许可证屏幕并将其投放市场，以便用户可以对其进行更新。当他们更新它时，首先考虑何时启动应用程序应该是带有许可证文本和接受按钮的屏幕，然后您在基础中为某些用户保留信息并允许他们访问应用程序。

PS 您不需要为已接受这是选项之一的用户保留数据。

享受编程:)

# css - 将鼠标悬停在纯 CSS 中的文本上时如何创建一个框？

> ID：10243440
> 
> 赞同：21
> 
> 时间：2012-04-20T09:20:49.917
> 
> 标签：css

我已经尝试了很多次，但还没有成功。

当我将鼠标悬停在此文本上时

![在此处输入图像描述](../Images/9925d80d174e2b58b78c880fb5ad3bf7.png)

那么它必须给我看这个盒子

![在此处输入图像描述](../Images/373aadba4989392bce68ccf5df03b033.png)

如果有人可以做到这一点，我想纯粹用 CSS 来实现这个效果。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-20T09:33:27.673

你可以这样写：

**CSS**

```
span{
    background: none repeat scroll 0 0 #F8F8F8;
    border: 5px solid #DFDFDF;
    color: #717171;
    font-size: 13px;
    height: 30px;
    letter-spacing: 1px;
    line-height: 30px;
    margin: 0 auto;
    position: relative;
    text-align: center;
    text-transform: uppercase;
    top: -80px;
    left:-30px;
    display:none;
    padding:0 20px;

}
span:after{
    content:'';
    position:absolute;
    bottom:-10px;
    width:10px;
    height:10px;
    border-bottom:5px solid #dfdfdf;
    border-right:5px solid #dfdfdf;
    background:#f8f8f8;
    left:50%;
    margin-left:-5px;
    -moz-transform:rotate(45deg);
    -webkit-transform:rotate(45deg);
    transform:rotate(45deg);
}
p{
    margin:100px;
    float:left;
    position:relative;
    cursor:pointer;
}

p:hover span{
    display:block;
} 
```

**HTML**

```
<p>Hover here<span>some text here ?</span></p> 
```

检查这个 [http://jsfiddle.net/UNs9J/1/](http://jsfiddle.net/UNs9J/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:44:25.150

您可以通过简单的代码轻松制作此**CSS 工具提示：-**

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
a.info{
    position:relative; /*this is the key*/
    color:#000;
    top:100px;
    left:50px;
    text-decoration:none;
    text-align:center;
  }

a.info span{display: none}

a.info:hover span{ /*the span will display just on :hover state*/
    display:block;
    position:absolute;
    top:-60px;
    width:15em;
    border:5px solid #0cf;
    background-color:#cff; color:#000;
    text-align: center;
    padding:10px;
  }

  a.info:hover span:after{ /*the span will display just on :hover state*/
    content:'';
    position:absolute;
    bottom:-11px;
    width:10px;
    height:10px;
    border-bottom:5px solid #0cf;
    border-right:5px solid #0cf;
    background:#cff;
    left:50%;
    margin-left:-5px;
    -moz-transform:rotate(45deg);
    -webkit-transform:rotate(45deg);
    transform:rotate(45deg);
  }

</style>
</head>
<body>
<a href="#" class="info">Shailender Arora <span>TOOLTIP</span></a>
  </div>
</body>
</html> 
```

[http://jsbin.com/ebucoz/25/edit](http://jsbin.com/ebucoz/25/edit)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T09:29:57.103

您也可以通过在**display: block** on hover 和**display:none**之间切换来实现，而不用 hover 来产生效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T15:20:15.737

这是对其他答案的一个小调整。如果您有嵌套的 div，您可以在弹出窗口中包含更多令人兴奋的内容，例如 H1。

CSS

```
div.appear {
    width: 250px; 
    border: #000 2px solid;
    background:#F8F8F8;
    position: relative;
    top: 5px;
    left:15px;
    display:none;
    padding: 0 20px 20px 20px;
    z-index: 1000000;
}
div.hover  {
    cursor:pointer;
    width: 5px;
}
div.hover:hover div.appear {
    display:block;
} 
```

HTML

```
<div class="hover">
<img src="questionmark.png"/>
    <div class="appear">
       <h1>My popup</h1>Hitherto and whenceforth.
    </div>
</div> 
```

这些解决方案的问题在于，当显示弹出窗口时，页面中的所有内容都会发生偏移，即页面的其余部分会向下跳转以“腾出空间”。我可以解决此问题的唯一方法是设置 position:absolute 并删除顶部和左侧的 CSS 标记。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-19T22:25:36.387

正如他们所说，它会起作用。

在父元素中建立一个最大高度。

我以**Sandeep**为例并添加 max-height ，如果需要，您可以添加 max-width 属性。文本将保留在应该保留的位置（如果可能，在某些情况下，您需要更改一些值以使其保留在那里）

```
span{
    background: none repeat scroll 0 0 #F8F8F8;
    border: 5px solid #DFDFDF;
    color: #717171;
    font-size: 13px;
    height: 30px;
    letter-spacing: 1px;
    line-height: 30px;
    margin: 0 auto;
    position: relative;
    text-align: center;
    text-transform: uppercase;
    top: -80px;
    left:-30px;
    display:none;
    padding:0 20px;
}

span:after{
    content:'';
    position:absolute;
    bottom:-10px;
    width:10px;
    height:10px;
    border-bottom:5px solid #dfdfdf;
    border-right:5px solid #dfdfdf;
    background:#f8f8f8;
    left:50%;
    margin-left:-5px;
    -moz-transform:rotate(45deg);
    -webkit-transform:rotate(45deg);
     transform:rotate(45deg);
}

p{
    margin:100px;
    float:left;
    position:relative;
    cursor:pointer;
    max-height: 10px;
}

p:hover span{
    display:block;
} 
```

> **p**段中的最大高度，倒数第二个，最后一行。

在评价它无用之前对其进行测试。

# wpf - 如何在 UserControl 中使用 TwoWay 绑定？

> ID：10243445
> 
> 赞同：6
> 
> 时间：2012-04-20T09:21:15.580
> 
> 标签：wpf, data-binding, user-controls, controltemplate

我有自己的 UserControl，a`LabeledTextBox`是 a`Label`和 a..well,的组合`TextBox`。此控件有两个属性：`Caption`将绑定到 的标题`Label`，以及`Value`将绑定到`Text`的`TextBox`。

代码：

```
public class LabeledTextBox : Control
{
    static LabeledTextBox()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(LabeledTextBox), new FrameworkPropertyMetadata(typeof(LabeledTextBox)));
    }

    public string Caption
    {
        get { return (string)GetValue(CaptionProperty); }
        set { SetValue(CaptionProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Caption.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty CaptionProperty =
        DependencyProperty.Register("Caption", typeof(string), typeof(LabeledTextBox), new UIPropertyMetadata(""));

    public string Value
    {
        get { return (string)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Value.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ValueProperty =
        DependencyProperty.Register("Value", typeof(string), typeof(LabeledTextBox), new UIPropertyMetadata(""));

} 
```

XAML：

```
<Style TargetType="{x:Type local:LabeledTextBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:LabeledTextBox}">
                <Grid>
                    <Grid>

                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <Label Grid.Row="0" Content="{TemplateBinding Caption}" />
                    <TextBox  Name="Box" Margin="3,0,3,3" Grid.Row="1" Text="{Binding Value, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />

                    </Grid>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

用法：

```
<uc:LabeledTextBox Caption="Code:" Value="{Binding ExpenseCode}"  /> 
```

最初我以为我在这里找到了答案：[WPF TemplateBinding vs RelativeSource TemplatedParent](https://stackoverflow.com/q/1131222/466903)

`TemplateBinding`这详细说明了和之间的区别`RelativeSource TemplatedParent`。我已经相应地更改了我的代码，但仍然感觉我错过了一步。OneWay 绑定确实有效，我的文本框绑定到 Value 属性，但更改不会注册。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T10:04:31.793

在此处更改模式。

```
<uc:LabeledTextBox Caption="Code:" Value="{Binding ExpenseCode,Mode=TwoWay}"  /> 
```

它对我有用

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-17T20:21:09.417

以防万一有人遇到这个问题：

另一种方法（可能更优雅）是以某种方式声明用户控件的依赖属性，使其默认为双向绑定（例如，框架 TextBox 默认情况下）。

这可以通过以下方式实现（取自[这个 Stackoverflow 问题](https://stackoverflow.com/questions/4237454/is-there-a-way-to-declare-a-property-dependencyproperty-to-use-twoway-binding-by)的答案）：

```
 public DependencyProperty SomeProperty =
        DependencyProperty.Register("Some", typeof(bool), typeof(Window1),
            new FrameworkPropertyMetadata(default(bool),
                FrameworkPropertyMetadataOptions.BindsTwoWayByDefault)); 
```

这里的关键是使用`FrameworkPropertyMetadata`.

# database - Lotus Notes - 压缩文件数据库

> ID：10243447
> 
> 赞同：0
> 
> 时间：2012-04-20T09:21:46.163
> 
> 标签：database, compression, lotus-notes, attachment, lotusscript

我正在增强一个 Lotus Notes 应用程序数据库 (mainApp)，该数据库涉及存储在不同数据库（数据存储库 DB）中的文件附件。当前的实现是在主服务器中有一个主dataRepDB，然后在许多本地服务器上都有副本。当用户在 mainApp 中附加文件时，它实际上是附加到本地 dataRepDB 中的一个文档中。然后本地 dataRepDB 复制到主数据库。反复出现的问题是，只要相关的dataRepDB文档不完整，mainApp中的文档就不会被处理。有时，replcation 失败，因此 mainApp 文档被卡住。我的建议是对附件使用文件压缩，以便可以更快地将其上传到主 dataRepDB，而无需使用任何副本。你能给我一些关于如何做到这一点的提示吗？我将使用 java 进行文件压缩（代码已准备好），我的问题是如何实现流程（流程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:08:50.117

在修改现有流程之前，值得尝试“对附件使用 LZ1 压缩”数据库属性。考虑因素包括：

1) 您应该使用 Domino 6 或更高版本以及[ODS 43 或更高版本](http://www-10.lotus.com/ldd/dominowiki.nsf/dx/use-lz1-compression-for-attachments)的数据库格式。

[2) 如果用户从 Web 浏览器而不是 Notes 客户端上传文件，则必须启用](http://www-01.ibm.com/support/docview.wss?uid=swg21090049)“上传文件压缩”服务器设置。

3) 启用该属性后，现有附件不会自动压缩。您必须在数据库上执行 compact -ZU 以[应用 LZ1 压缩](http://www.lntoolbox.com/en/categories/notes-domino/39-huffmanntolz1.html)。（对于大型数据库，某些版本的 Domino 存在此命令的问题，但[有一种解决方法](http://www.leadershipbynumbers.com/ms.nsf/d6plinks/BMAA-7C9KES)。）

# iphone - 如何将带有逗号分隔项的字符串转换为数组

> ID：10243449
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:21:47.333
> 
> 标签：iphone, objective-c, ios, arrays

> **可能重复：**
> [如何将字符串转换为带分隔符的数组？](https://stackoverflow.com/questions/6111543/how-can-i-convert-string-to-an-array-with-separator)

认为：

```
string = @"Abc, Def, Ghi, Lmno"; 
```

我希望将这些以逗号分隔的单词放在这样的数组中：

> 元素 0 = Abc，
> 
> 元素 1 = 定义，
> 
> 元素 2 = Ghi，
> 
> 元素 3 = Lmno。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T09:24:36.783

```
NSArray *myArray = [myString componentsSeparatedByString:@","];

[myArray objectAtIndex:0];//Abc
[myArray objectAtIndex:1];//Def
[myArray objectAtIndex:2];//Ghi
[myArray objectAtIndex:3];//Lmno 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T09:23:24.460

试试这个代码：

`NSArray *words = [string componentsSeparatedByString:@","];`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T09:26:24.577

```
yourstring = @"Abc, Def, Ghi, Lmno";
NSArray *array = [yourstring componentsSeparatedByString:@","];

Nslog (@"%@",array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:58:49.017

我想用`componentsSeparatedByString`。这些方法很容易在[苹果文档中找到](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/componentsSeparatedByString:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T10:11:33.083

```
`NSString *str = @"这个，是，测试，字符串";
NSArray *myArray= [[NSArray alloc]initWithObjects:[NSString stringWithFormat:@"%@",str ], nil];
NSLog(@"%@", myArray);`

```

# c# - 如何像网格一样拆分堆栈面板

> ID：10243450
> 
> 赞同：3
> 
> 时间：2012-04-20T09:22:11.547
> 
> 标签：c#, wpf, xaml, .net-4.0

我需要在 ui 中显示对象的详细信息。我有以下代码，它定义了一个类的数据模板`Category`。我正在尝试获得一个布局，其中成对的成员名称和值将垂直堆叠。但是我希望成员名称具有相同的宽度和相同的值。我应该怎么做才能得到这个布局？

```
 <DataTemplate DataType="{x:Type local:Category}">
        <Grid HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4*" SharedSizeGroup="a" />
                <ColumnDefinition Width="6*" SharedSizeGroup="b" />
            </Grid.ColumnDefinitions>
            <StackPanel>
                <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" Grid.ColumnSpan="2">
                    <TextBlock Text="Id" Grid.Column="0" Grid.IsSharedSizeScope="True" />
                    <TextBlock Text="{Binding Path=Id}" Grid.Column="1"/>
                </StackPanel>
                <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" Grid.ColumnSpan="2">
                    <TextBlock Text="Name" Grid.Column="0" Grid.IsSharedSizeScope="True" />
                    <TextBlock Text="{Binding Path=Name}" Grid.Column="1"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T09:25:42.720

我认为您可以将 Grid 分成两行并消除 StackPanels 的使用？

# mongodb - Mongo 查询必须匹配 1 个子集中的 2 个字段

> ID：10243454
> 
> 赞同：2
> 
> 时间：2012-04-20T09:22:20.140
> 
> 标签：mongodb, nested

我目前有以下数据集（简化）：

```
{  
    'component_id':1,  
    '_locales':[   
        {  
            'url': 'dutch',  
            'locale': 'nl_NL'  
        },  
        {  
            'url': 'english',  
            'locale': 'en_US'  
        }  
    ]  
} (etc more rows similar to this but unique urls) 
```

现在我想执行一个查询，看看对于语言环境'en_US'，url'english 是否存在：

```
db.find({'_locales.locale':'en_US','_locales.url':'english'}) 
```

这确实为我提供了数据集行。但是，如果我想检查语言环境是否为“nl_NL”，则网址为“english”；

```
db.find({'_locales.locale':'nl_NL','_locales.url':'english'}) 
```

我仍然得到了我不想要的数据集，因为查询不匹配。因为我只希望它在语言环境是 nl_NL 并且在同一行中的 url 是“english”时匹配

我试过了

```
 db.find({'_locales.locale':'en_US','_locales.$.url':'english'}) 
```

这不起作用，有什么办法可以做到这一点吗？以便它匹配 1 行中的 2 个字段而不是分别匹配 2 个字段？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:32:56.083

尝试使用[`$elemMatch`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24elemMatch)

```
db.find({'_locales': { '$elemMatch': { 'locale': 'nl_NL', 'url': 'english' } }}); 
```

`$elemMatch`当数组中的单个元素必须匹配匹配表达式时使用。否则（如您所见），每个条件都可以匹配不同的数组元素。

# java - JSR250：Java 的 CommonAnnotations，2.3：@Resource 方法必须是遵循标准 JavaBeans 约定的设置器

> ID：10243455
> 
> 赞同：3
> 
> 时间：2012-04-20T09:22:21.583
> 
> 标签：java, spring, jakarta-ee, websphere

**我在这条线上遇到了问题：**

```
@Resource 
public void setMessageDrivenContext(MessageDrivenContext context) {
    this.context = context;
} 
```

**消息是：**

JSR250：Java 的 CommonAnnotations，2.3： **@Resource**方法必须是遵循标准 JavaBeans 约定的设置器。即 void "setProperty(value)" for "property"。

ProjGatewayBean.java /DocViewerEJB/src/main/java/com/tscdv/document/b/beans 第72行注释问题

**可能是什么问题，我该如何解决？**

我已将编辑器从 Rad 7.5 升级到 8，将 maven 2 升级到 3。这发生在导入 maven 项目之后，但我在任何 pom 文件上都没有错误。

我对两个可能相关的 xml 文件**还有其他一些问题，这些文件被分成了一个新帖子：**

[错误：包含版本 <unknown> 部署描述符的项目需要 XMI 格式的绑定或扩展文件。ibm-web-bnd.xml](https://stackoverflow.com/questions/10243424/error-projects-containing-version-unknown-deployment-descriptors-require-xmi)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:22:22.673

在您的类中重命名上下文属性 messageDrivenContext 并更改您的方法，如下所示：

```
@Resource 
public void setMessageDrivenContext(MessageDrivenContext context) {
   this.messageDrivenContext = context;
} 
```

问候。

# linq - 在 where 子句中委托

> ID：10243458
> 
> 赞同：4
> 
> 时间：2012-04-20T09:22:25.517
> 
> 标签：linq, delegates, where-clause, lambda

我可以定义一个委托并像这样编写查询。

```
Func<string, bool>   filter  = s => s.Length == 5;

IEnumerable<string> query = names.Where(filter)                                  
                                 .Select(x => x.ToUpper()); 
```

我的问题是，如果`Func<T, TResult>`是一个将字符串作为参数并返回布尔值的委托，我为什么不能说：

```
delegate bool D(string s);
D d = new D(delegate(string s) { return s.Length == 1; });

IEnumerable<string> query = names.Where(d).Select... 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:28:24.583

因为它们是不同的类型。

给出相同类型错误的较短版本：

```
delegate bool D(string s);
delegate bool F(string s);

D d = new D(delegate(string s) { return s.Length == 1; });
F f = d; 
```

> 错误 1 ​​无法将类型“Program.D”隐式转换为“Program.F”

扩展方法`Where`定义为

```
Where<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate); 
```

所以你需要一个`Func<string, bool>`和`D`相似但不兼容的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:29:26.140

这是因为两种不同的委托类型（`Func<TSource, TResult>`也是委托类型）被认为是不同的类型，即使它们的签名相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T09:33:05.943

即使它们兼容，它们也不是同一类型。

您需要“投射”它：

```
var query = names.Where(new Func<string, bool>(d)) 
```

我通常只是这样做：

```
var query = names.Where(x => d(x)) 
```

# html - Nivo Slider 偶尔跳跃

> ID：10243462
> 
> 赞同：1
> 
> 时间：2012-04-20T09:22:40.720
> 
> 标签：html, css, position, slideshow, nivo-slider

我的滑块可以工作，但有时幻灯片会向下跳约 40 像素，然后自行纠正。

有问题的页面是：http: [//www.streetstyles4all.co.uk](http://www.streetstyles4all.co.uk)

我不得不观看它几次才能发生，但它发生在 Firefox、Chrome 和 IE9 中

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:29:14.533

可能是图像/链接上方有一些文字。

> 2012 年年终秀-bg-

您可以尝试删除它。使用 Chrome 开发工具将其删除后，我无法再次重现该问题...

# php - 如何在共享主机上获取 PHP 中的服务器 Mac 地址？（禁用执行和系统功能）

> ID：10243463
> 
> 赞同：0
> 
> 时间：2012-04-20T09:22:40.600
> 
> 标签：php, mac-address

我想在php中获取服务器的mac地址。我搜索并发现这个问题很有帮助：[如何在 PHP 中获取已连接客户端的 MAC 和 IP 地址？](https://stackoverflow.com/questions/1420381/how-can-i-get-the-mac-and-the-ip-address-of-a-connected-client-in-php)

并编写了在我本地工作的这些代码：

```
<?php 
$ip=$_SERVER['SERVER_ADDR'];
echo "Server IP: {$ip}<br />
Server Mac: ";
$conf=exec('netstat -ie');
$prots=explode("\n\n",$conf);
if($ip=='127.0.0.1')$ip='192.168.';
foreach($prots as $prot){
    if(strpos($prot,' addr:'.$ip) && preg_match('/(?:\s+)HWaddr(?:\s+)(?P<mac>[a-f0-9\:]+)/',$prot,$match)){
    echo $match['mac'];
    }
}
?> 
```

但在许多共享主机中，exec、shell_exec、系统功能被禁用，这些代码不起作用。你对这些好心的主人有什么解决方案吗？

# java - java混合主动和被动渲染

> ID：10243464
> 
> 赞同：4
> 
> 时间：2012-04-20T09:22:41.897
> 
> 标签：java, swing

我正在开发一个有两个 JPanel 的应用程序。第一个 JPanel 用作绘图板，第二个用作属性/设置面板。所以绘图板应该使用主动渲染和第二个被动渲染。它们都被添加到 JFrame 中。

我一直在阅读有关 java 中的主动渲染的信息，但我注意到 JPanel 不支持 createBufferStrategy。这是否意味着我需要使用画布？画布的问题在于它不是容器，因此我无法向其中添加组件。我也可以使用 JFrame 缓冲策略（但是由于标题，我必须修复位置偏移量？）.. 我可以使用 JPanel 主动渲染但仍然让第二个 JPanel 使用被动渲染吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:07:21.370

下面是结合“被动”Swing 组件和主动动画的一些示例：

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();

    JPanel view = new JPanel ( null );
    view.setPreferredSize ( new Dimension ( 500, 500 ) );
    frame.add ( view );

    JButton button1 = new JButton ( "Button 1" );
    button1.setBounds ( 10, 10, 100, 40 );
    button1.setOpaque ( false );
    view.add ( button1 );

    Animator animator = new Animator ();
    animator.setBounds ( 0, 0, 500, 500 );
    view.add ( animator );

    JButton button2 = new JButton ( "Button 2" );
    button2.setBounds ( 390, 450, 100, 40 );
    button2.setOpaque ( false );
    view.add ( button2 );

    frame.setResizable ( false );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
}

public static class Animator extends JComponent
{
    private float angle = 0;

    public Animator ()
    {
        super ();
        setOpaque ( false );

        new Timer ( 1000 / 24, new ActionListener ()
        {
            public void actionPerformed ( ActionEvent e )
            {
                angle += 0.2f;
                if ( angle > 360 )
                {
                    angle = 0;
                }

                repaint ();
            }
        } ).start ();

        addMouseListener ( new MouseAdapter ()
        {
            //
        } );
    }

    protected void paintComponent ( Graphics g )
    {
        super.paintComponent ( g );

        Graphics2D g2d = ( Graphics2D ) g;
        g2d.setRenderingHint ( RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON );

        GeneralPath shape = getShape ();

        g2d.setPaint ( Color.BLACK );
        g2d.fill ( shape );
    }

    public boolean contains ( int x, int y )
    {
        return getShape ().contains ( x, y );
    }

    private GeneralPath getShape ()
    {
        GeneralPath gp = new GeneralPath ( GeneralPath.WIND_EVEN_ODD );
        gp.append ( new Rectangle2D.Double ( -250, 150, 1000, 200 ), false );

        AffineTransform at = new AffineTransform ();
        at.rotate ( angle * Math.PI / 90, 250, 250 );
        gp.transform ( at );
        return gp;
    }
} 
```

正如您所看到的，黑色旋转区域不仅覆盖了右下角的按钮，而且还阻止了被条纹按钮覆盖的部分上的鼠标事件。这是因为重写了 Animator 的 contains() 方法：

```
public boolean contains ( int x, int y )
{
    return getShape ().contains ( x, y );
} 
```

默认情况下，组件会在父级的整个边界上捕获鼠标事件，但是通过更改此方法，您可以按照自己喜欢的方式进行操作。

还可以进行很多优化，例如在每次重绘后将形状保存到某个变量，并在检查“包含”值时返回它。

无论如何，希望这至少对您的问题有所帮助...

# ruby-on-rails - 具有分叉行为的 rails mongo 项目

> ID：10243465
> 
> 赞同：1
> 
> 时间：2012-04-20T09:22:44.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, rubygems, mongoid

使用 Rails 和 MongoBD (mongoid) 我有一个项目，用户可以为给定的地方提交评论。地方可以有很多人的多个评论，但我正在考虑的另一个选择是另外有一个功能，用户可以“分叉”另一个用户的评论。在基本层面上，它只是一个新的评论，其中复制了文本，但我想知道是否存在任何可以模仿 git 分叉行为的东西（宝石？），所以分叉评论知道它的父级（基本版本控制，也许它甚至可以选择向原始所有者提出拉取请求等）

我使用 mongoid-history 来跟踪特定评论的版本控制，但想知道是否有类似我提到的内容？

# smartgwt - 如何在 Smart gwt 的 ListGrid 中将列显示为行？

> ID：10243466
> 
> 赞同：1
> 
> 时间：2012-04-20T09:22:45.033
> 
> 标签：smartgwt, listgrid

我是 Smart gwt 的新手。基本上我的数据结构为：

一个
|_____ B1

```
 |__C1
  |__C2
  |__C3 
```

|_ B2

![数据结构](../Images/39a98da7fbad747f420d2a09250d8a52.png) 所以我创建了我的 ListGridRecord，如下所示：

公共类 VEPAreaRecord 扩展 ListGridRecord{

```
public VEPAreaRecord(){

}

/**
 * @param vepAreaName
 * @param checkStations
 */
public VEPAreaRecord(String vepAreaName, String[] checkStations) {
    setVepAreaName(vepAreaName);
    setCheckStations(checkStations);
}

/**
 * @return the vepAreaName
 */
public final String getVepAreaName() {
    return getAttribute("vepAreaName");
}
/**
 * @param vepAreaName the vepAreaName to set
 */
public final void setVepAreaName(String vepAreaName) {
    setAttribute("vepAreaName",vepAreaName);
}
/**
 * @return the checkStations
 */
public final String[] getCheckStations() {
    return getAttributeAsStringArray("checkStations");
}
/**
 * @param checkStations the checkStations to set
 */
public final void setCheckStations(String[] checkStations) {
    setAttribute("checkStations",checkStations);
} 
```

}

但是在我的 ListGrid 中，我希望 tp 将我的数据显示为

区域 1 区域 2 区域 3

检查1 检查2 检查3

检查4

检查5

所以基本上我想要的是将我的行显示为列，反之亦然。但我不知道如何实现这一点。还是有其他组件可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:01:33.557

是的，CubeGrid 可供 Isomorphic 的 Power 和 Enterprise 许可证持有者使用。查看 CubeGrid 和 Facets 类并查看 smartgwt 页面上的展示案例。

[http://www.smartclient.com/smartgwtee/showcase/#cube_analytics](http://www.smartclient.com/smartgwtee/showcase/#cube_analytics)并遵循示例。

如果您只能使用 ListGrid，则可以通过遍历记录来实现相同的目的。如果您能够使用数据库，则可以输入 customSQL

如：

```
<operationBindings>
<operationBinding operationType="fetch" operationId="VEP_AREA_RECORD">

<customSQL>

SELECT * FROM (SELECT SUBSTRING(MeasurementTime,7,4) [Year], CASE SUBSTRING(Time,1,2) WHEN '01' THEN 'Jan' WHEN '02' THEN 'Feb' WHEN '03' THEN 'Mar' WHEN '04' THEN 'Apr'  WHEN '05' THEN 'May' WHEN '06' THEN 'Jun' WHEN '07' THEN 'Jul' WHEN '08' THEN 'Aug' WHEN '09' THEN 'Sep'  WHEN '10' THEN 'Oct'  WHEN '11' THEN 'Nov'  WHEN '12'THEN 'Dec' END as [Month],      [value] , [col1] as col1,
  col1 [col1_name], col2 [col2_name], col3 [col3], [col4_name] FROM your_table  WHERE MeasurementValue IS NOT NULL) TableDate  PIVOT <what you want in rows>  FOR [Month] IN (
    [Jan],[Feb],[Mar],[Apr],
    [May],[Jun],[Jul],[Aug],
    [Sep],[Oct],[Nov],[Dec]
  )
) AS PivotTable
 ORDER BY groupCol1, groupCol2

</customSQL> 
```

显然，这些列可能是您的记录/数据库中的实际值或派生的（在我的情况下是从日期字段派生的。我不是 SQL 专家，所以如果有更好的方法，我很想听听。

在上面的例子中，输出将是

```
 [jan]  [feb]  [mar]  etc.....in your case

[col1_valA] [col2_val1]    valx    valy
[col1_valB] [col2_val2 
```

# c# - POST 返回 Http 400 错误请求

> ID：10243475
> 
> 赞同：1
> 
> 时间：2012-04-20T09:23:33.413
> 
> 标签：c#, .net, asp.net-mvc, http-status-code-400

当我向 ASP.NET MVC 应用程序发出 POST 请求时，我收到 HTTP 400 错误请求。我已经用 装饰了 post 操作`[ValidateInput(false)]`，但我仍然收到此错误。

我有一个模型，它是 POST 方法的参数。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:35:59.797

[使用Viewmodel Pattern](https://stackoverflow.com/questions/1361092/asp-net-mvc-viewmodel-pattern)代替 Model 作为操作的参数，它会更清楚您发布的数据。贴出 View 的代码，以及 Model 的代码。

# java - 哪种布局可以做到这一点？

> ID：10243482
> 
> 赞同：22
> 
> 时间：2012-04-20T09:23:59.010
> 
> 标签：java, swing, layout, grid-layout, miglayout

我正在尝试在我的应用程序中布局一些 JLabel，如下例所示：

![在此处输入图像描述](../Images/2b0c94d08d2a46b59f8468266824a9d6.png)

我总是在中间有这个 JLabel，其他 JLabel 的数量是可变的，它可以从 1 到 30。我尝试了网格布局，方法是选择大量的列/行并在空白处设置一些空的 JLabel，但我不能得到一个好的结果，也找不到如何用[MigLayout 来做](http://www.miglayout.com/)，有没有人有一个好的布局解决方案或任何其他解决方案。

**PS**：我不想显示圆圈，这只是为了显示 JLabels 排列在一个圆圈中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T11:19:25.717

您不需要专门支持此功能的布局管理器。您可以使用一些相当简单的三角函数自己计算 x、y 位置，然后使用常规布局，例如`SpringLayout`.

```
import java.awt.Point;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SpringLayout;

public class CircleLayout {

  /**
   * Calculate x,y positions of n labels positioned in
   * a circle around a central point. Assumes AWT coordinate
   * system where origin (0,0) is top left.
   * @param args
   */
  public static void main(String[] args) {
    int n = 6;  //Number of labels
    int radius = 100;
    Point centre = new Point(200,200);

    double angle = Math.toRadians(360/n);
    List<Point> points = new ArrayList<Point>();
    points.add(centre);

    //Add points
    for (int i=0; i<n; i++) {
      double theta = i*angle;
      int dx = (int)(radius * Math.sin(theta));
      int dy = (int)(-radius * Math.cos(theta));
      Point p = new Point(centre.x + dx, centre.y + dy);
      points.add(p);
    }

    draw(points);
  }

  private static void draw(List<Point> points) {
    JFrame frame = new JFrame("Labels in a circle");
    frame.setSize(500, 500);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel panel = new JPanel();;
    SpringLayout layout = new SpringLayout();

    int count = 0;
    for (Point point : points) {
      JLabel label = new JLabel("Point " + count);
      panel.add(label);
      count++;
      layout.putConstraint(SpringLayout.WEST, label, point.x, SpringLayout.WEST, panel);
      layout.putConstraint(SpringLayout.NORTH, label, point.y, SpringLayout.NORTH, panel);
    }

    panel.setLayout(layout);

    frame.add(panel);
    frame.setVisible(true);

  }
} 
```

![数学](../Images/a62072567c79824fa6343c3a7a4543fa.png) ![截屏](../Images/8f7468c9580975753ca59a1574f0c77f.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-20T09:34:20.787

我怀疑您的要求非常专业，以至于没有 LayoutManager 可以满足您的要求。[尝试创建自己的！](http://docs.oracle.com/javase/tutorial/uiswing/layout/custom.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-20T09:41:13.380

JH 实验室有一个[ClockLayout](http://huxtable.com/java/layout/index.html)：

> 这是为特殊目的而创建的非常愚蠢的布局。它只是将其组件从顶部顺时针排列成一个圆圈。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-20T11:17:59.497

我喜欢@Baqueta 和@sacha 的想法：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CircleLayoutTest {
  public JComponent makeUI() {
    JPanel panel = new JPanel() {
      @Override protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Insets i = getInsets();
        g.translate(i.left, i.top);
        g.setColor(Color.RED);
        int w = getWidth() - i.left - i.right;
        int h = getHeight() - i.top - i.bottom;
        g.drawOval(0, 0, w, h);
        g.translate(-i.left, -i.top);
      }
    };
    panel.setLayout(new FlowLayout() {
      @Override public void layoutContainer(Container target) {
        synchronized(target.getTreeLock()) {
          int nmembers  = target.getComponentCount();
          if(nmembers<=0) return;
          Insets i = target.getInsets();
          double cx = .5 * target.getWidth();
          double cy = .5 * target.getHeight();
          Component m = target.getComponent(0);
          Dimension d = m.getPreferredSize();
          m.setSize(d.width, d.height);
          m.setLocation((int)(cx+.5-.5*d.width),(int)(cy+.5-.5*d.height));
          if(nmembers-1<=0) return;
          double rw = .5 * (target.getWidth() - i.left - i.right);
          double rh = .5 * (target.getHeight() - i.top - i.bottom);
          double x = 0, y = 0, r = 0;
          double radian = 2.0 * Math.PI / (nmembers-1);
          for(int j=1; j<nmembers; j++) {
            m = target.getComponent(j);
            if(m.isVisible()) {
              d = m.getPreferredSize();
              m.setSize(d.width, d.height);
              x = cx + rw * Math.cos(r) - .5 * d.width;
              y = cy + rh * Math.sin(r) - .5 * d.height;
              m.setLocation((int)(x+.5), (int)(y+.5));
              r += radian;
            }
          }
        }
      }
    });
    JPanel p = new JPanel(new BorderLayout());
    p.add(initPanel(panel));
    return p;
  }
  private static JComponent initPanel(JComponent p) {
    p.setBorder(BorderFactory.createEmptyBorder(50,50,50,50));
    for(int i=0; i<6; i++) {
      p.add(new JLabel("No."+i));
    }
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new CircleLayoutTest().makeUI());
    f.setSize(320 ,320);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-20T09:59:58.537

我使用的是 Windows 表单，因为我没有安装 Java 工具，但想法是一样的，您只需想象您添加的是 JLabel 而不是 Buttons 并且这是一个 JFrame 或 JWindow 而不是一个.NET 表单。

代码应该是这样的，如果我们假设一个 800 x 800 像素的区域来布局东西

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.Load += new EventHandler(Form1_Load);
    }

    void Form1_Load(object sender, EventArgs e)
    {
        int numberItems = 18;
        int centreX = 400;
        int centreY = 400;

        double offset = Math.PI;
        double step = Math.PI * 2 / numberItems;

        Button b = null;
        for (int i = 0; i < numberItems; i++)
        {
            b = new Button();
            b.Width = 30;
            b.Height = 30;
            SetPosition(b, 370, offset, i, step);
            this.Controls.Add(b);
        }

        b = new Button();
        b.Width = 30;
        b.Height = 30;
        b.Location = new Point(centreX, centreY);
        this.Controls.Add(b);
    }

    private void SetPosition(Button button, int legLength, double offset, double posOffSet, double step)
    {

        int x = (int)(legLength + Math.Sin(offset + posOffSet * step) * legLength);
        int y = (int)(legLength + Math.Cos(offset + posOffSet * step) * legLength);

        button.Location = new Point(x, y);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-20T14:02:11.923

1.  MigLayout 可以使用“pos xy [x2] [y2]”作为组件约束进行绝对定位。MigLayout 确实是管理它们的布局管理器。查看他们首页上的 webstart 演示，它很好地展示了绝对定位。您仍然需要像自定义布局管理器的想法一样计算组件的位置。

2.  您也可以[关闭布局](https://stackoverflow.com/questions/869245/how-to-locate-jlabels-to-an-absolute-position-on-java-gui)。

3.  如果你想真正有创意，你可以看看[JHotDraw](http://sourceforge.net/projects/jhotdraw/)。

# silverlight-4.0 - 如何使 Silverlight Out Of Browser 应用程序启动最大化

> ID：10243485
> 
> 赞同：1
> 
> 时间：2012-04-20T09:24:10.163
> 
> 标签：silverlight-4.0

是否可以最大限度地启动 Out of Browser 应用程序？

您可以在配置 Out of Browser 设置时设置 Left、Top、Height 和 Width 属性，但我看不到使应用程序最大化的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:20:31.123

```
if (Application.Current.IsRunningOutOfBrowser)
{
     Application.Current.MainWindow.WindowState = WindowState.Maximized;
     Application.Current.MainWindow.TopMost = true;
} 
```

# ios - 表格视图单元格无法加载两个表格视图

> ID：10243487
> 
> 赞同：0
> 
> 时间：2012-04-20T09:24:14.613
> 
> 标签：ios, uitableview, nsexception

如果我只加载一个表格视图，我的视图中必须有两个表格视图，它工作正常。但是，当我尝试使用以下方法加载两个表格视图时，它给出了以下异常。

未捕获的异常 'NSRangeException'，原因：' *** -[NSArray objectAtIndex:]: index 2 beyond bounds [0 .. 1]'

```
- (void)viewDidLoad {
[super viewDidLoad];

array1 = [[NSArray alloc]initWithObjects:@"Start",@"End",@"Frequency",@"Time of Day",nil];
array2 =[[NSArray alloc]initWithObjects:@"Alarm",@"Tone",nil];

table1.scrollEnabled =NO;
table2.scrollEnabled =NO; 
```

}

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
if (tableView == table1) ;
   return 1;

if (tableView == table2); 
    return 1; 
```

}

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
if (tableView == self.table1) ;
    return [array1 count];
if (tableView == self.table2) ;
    return [array2 count]; 
```

}

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...

if (tableView == self.table1){
    cell.textLabel.text = [array1 objectAtIndex:indexPath.row];     

}
if (tableView == self.table2){
    cell.textLabel.text = [array2 objectAtIndex:indexPath.row];     

}
return cell;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:32:20.677

您可能在索引处请求一个大于您的数组之一的对象。您是否正确实施`– numberOfSectionsInTableView:`并`– tableView:numberOfRowsInSection:`检查它们调用哪个表并根据您的数据数组返回适当的值？
**更新**
以这种方式编辑方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    if (tableView == self.table1)
       return 1;

    if (tableView == self.table2)
       return 1;

    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView == self.table1)
        return [array1 count];
    if (tableView == self.table2)
        return [array2 count];

    return 0;
} 
```

# java - 如何从键盘获取 dtd 和 xml 文件？

> ID：10243490
> 
> 赞同：0
> 
> 时间：2012-04-20T09:24:25.373
> 
> 标签：java, swing, jakarta-ee, saxparser, jaxm

我正在做一些 xml 验证工具。所以我需要代码如何从键盘获取 dtd 和 xml 文件作为参数。我的代码如下。请给我提意见。我是java新手。

```
 public class ValidateXML
 {
public static void main(String args[]) {
try{
    File x = new File(args[0]);
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setValidating(true);
DocumentBuilder builder = factory.newDocumentBuilder();
builder.setErrorHandler(new org.xml.sax.ErrorHandler() {
//To handle Fatal Errors
public void fatalError(SAXParseException exception)throws SAXException {
System.out.println("Line: " +exception.getLineNumber() + "\tColumn: "+e.getColumnNumber() + "\nFatal Error: "+exception.getMessage());
}
//To handle Errors
public void error(SAXParseException e)throws SAXParseException {
System.out.println("Line: " +e.getLineNumber() + "\tColumn: "+e.getColumnNumber() + "\nError: "+e.getMessage());
}
//To Handle warnings
public void warning(SAXParseException err)throws SAXParseException{
System.out.println("Line: " +err.getLineNumber() + "\tColumn: "+e.getColumnNumber() + "\nWarning: "+err.getMessage());
}
});
Document xmlDocument = builder.parse(new FileInputStream(x));
System.out.println("execute!!");
}
catch (Exception e) {
System.out.println(e.getMessage());
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:35:34.427

用于编译

> javac ValidateXML.java

用于执行程序

```
 java ValidateXML <fileName> 
```

我从您的程序中意识到了这一点，您接受 arg(0) 作为字符串，这是您文件的位置。

# java - Java多线程：执行对象方法的线程是否依赖于创建它的线程上的线程？

> ID：10243492
> 
> 赞同：0
> 
> 时间：2012-04-20T09:24:29.810
> 
> 标签：java

执行对象方法的线程是否依赖于创建它的线程上的线程？

想象一下，您的 Java 应用程序 Thread1 和 Thread2 中有两个线程以及两个类 ClassA 和 ClassB。

您在 Thread1 上创建 ObjectOfClassA，然后在 Thread2 上创建 ObjectOfClassB，ObjectOfClassB 包含对 ObjectOfClassA 的引用。当 ObjectOfClassB 运行 ObjectOfClassA 的方法时，该方法将在哪个线程上执行？

在您的回答中，请提供相关文档的链接。

根据我所见，我觉得对象方法的执行与创建它的线程完全正交，但我不确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T09:26:56.817

没有自动线程切换之类的东西，因此每个方法调用都发生在“当前线程”上，无论对象是在哪个线程上创建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:28:04.600

> 您在 Thread1 上创建 ObjectOfClassA，然后在 Thread2 上创建 ObjectOfClassB，ObjectOfClassB 包含对 ObjectOfClassA 的引用。当 ObjectOfClassB 运行 ObjectOfClassA 的方法时，该方法将在哪个线程上执行？

在运行 ObjectOfClassB 本身的调用方方法的同一个线程上（我猜这将是 Thread2 ......但正如@Andrzej 指出的那样，它也可以是另一个第三个线程）。这完全独立于哪个线程创建了哪个对象。重要的只是给定对象是否*发布*（即可用）给给定线程。如果是，它可以由该线程运行。

# c++ - C++ 中的非线性编程库

> ID：10243493
> 
> 赞同：8
> 
> 时间：2012-04-20T09:24:29.980
> 
> 标签：c++, mathematical-optimization

我正在寻找有关用于非线性编程的 C++ 库的建议（*不仅仅是整数！*）。

优先考虑积极维护的 F/OSS 解决方案，但积极维护的商业解决方案提供免费评估版本是可以接受的。

提前致谢！

**编辑：**根据要求，这里有更多细节：

我正在处理的应用程序很简单，它是关于最小化 4 次或更高次数（最多 11 个）的多项式，并使用一组 (~20) 表示为不等式的约束（同样，作为多项式，次数 <= 4）。不过，我有时也可能不得不加入一些三角函数。无论如何，我要处理的总是连续的、可微的函数。目前，变量的数量范围从 1 到 12，并且不会超出此范围。

最后，我需要一个适用于 Windows 的解决方案，但跨平台的解决方案会更好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T10:59:11.460

我不确定，但也许CERN 的[ROOT](http://root.cern.ch/drupal/)会适合你。这是来自 CERN 本身的非常庞大的库（例如[ROOT::Math::Polynomial](http://root.cern.ch/root/html/ROOT__Math__Polynomial.html)类）。

我必须说，它确实不是一个“一分钟学习”的库，但两者都有：实时处理所有数学内容的**控制台**（看起来类似于 MathCAD cmd 行）以及您可以链接的**库**和**dll**静态代码。它是一个跨平台库。更要说的是，ROOT 最强大的功能是可以构建几乎所有类型的图表和绘图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T07:58:29.420

我所知道的最强大的此类库是[IPOPT](https://projects.coin-or.org/Ipopt)。

它非常强大，它为我提供了即使使用商业求解器也无法解决的化学工程问题的结果。查看[成功案例](https://projects.coin-or.org/Ipopt/wiki/SuccessStories)以获取更多应用示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T17:19:54.267

[NLopt](http://ab-initio.mit.edu/wiki/index.php/NLopt)为十几种算法提供了可靠的 C 代码，包括[COBYLA](http://ab-initio.mit.edu/wiki/index.php/NLopt_Algorithms#COBYLA_.28Constrained_Optimization_BY_Linear_Approximations.29)，由 MJD Powell 编写的具有非线性不等式和等式约束的无导数优化的线性逼近约束优化。
补充：[这里](https://github.com/denis-bz/opt/tree/master/nlopt) 有几个非衍生优化器在`NLopt`.
对于 5d 和 10d 的 Rosenbrock 和 Powell 测试函数，它们都对随机起点*非常*敏感；ymmv。

# facebook - Facebook：测试未发布页面的用户

> ID：10243494
> 
> 赞同：2
> 
> 时间：2012-04-20T09:24:31.417
> 
> 标签：facebook, admin, facebook-apps, facebook-page

让我们先建立常数；

*   应用页面为 720 像素或流体宽度。
*   时间轴应用的宽度为 810 像素。
*   要将应用程序作为时间线应用程序查看，您需要将其添加到页面。
*   在测试/开发时，您希望页面未发布。
*   因此，要将该页面和应用程序视为该页面的一部分/选项卡，任何测试人员都需要成为该页面的管理员。

我的问题是；

1.  一些测试人员可能是外部的，我们不希望他们成为页面的管理员。
2.  我们希望能够将应用程序显示为 810px 布局中页面的选项卡/应用程序以进行签核。

有没有办法为未发布的页面设置不同的权限，就像应用程序一样。即管理员，开发人员，测试人员是否只是为了给他们查看权限，如果没有别的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:53:07.857

该功能尚不存在，但这是 FB 意识到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T13:19:33.490

最后的问题。现在已过时且不再相关。

# spring - Grails 2.0.1 和二进制插件依赖

> ID：10243496
> 
> 赞同：1
> 
> 时间：2012-04-20T09:24:44.687
> 
> 标签：spring, grails, dependencies

在 grails progect 上，我想构建一个带有“hook”的二进制插件，可以在每个特定项目上实现

**二进制插件结构**

```
我的服务（服务）
  MyHookClassInterface myHookClass
  MyHookServiceInterface myHookService

MyHookClassInterface（接口）
MyHookServiceInterface（接口）

```

**主要项目结构**

```
ProjectHookClass 实现 MyHookClassInterface (groovy 类)
ProjectHookService 实现 MyHookServiceInterface（服务）

资源.groovy
豆子= {
  myHookClassInterface(ProjectHookClass)
  myHookServiceInterface(ProjectHookService)
}

```

该解决方案使用源插件就像一个魅力，但不会以二进制模式注入 MyService 依赖项。我还启动了 grails 控制台并 ctx.getBean('myHookClassInterface') 返回：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“myHookClassInterface”的bean
    在 org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition（DefaultListableBeanFactory.java:529）
    在 org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:269)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    在 org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1093)
    在 org.springframework.beans.factory.BeanFactory$getBean.call（未知来源）
    在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    在 ConsoleScript0.run(ConsoleScript0:1)

```

谢谢

法比奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:45:26.257

已解决：问题与二进制插件上存在 resources.groovy 有关。在这种情况下，grails 启动过程无法合并插件和项目 resources.groovy。如果可以的话，删除插件的resources.groovy 就足够了。

# javascript - javascript中乘法的错误结果

> ID：10243498
> 
> 赞同：1
> 
> 时间：2012-04-20T09:24:51.027
> 
> 标签：javascript, multiplication

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

我有两个变量

```
var first : float = 200;
var next : float;
next = first * 1.2; 
```

当我在调试日志中写入“下一个”时，它给出了 40,00002。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:29:01.790

浮点计算的精度仅与其使用的精度（位数和尾数）一样精确。 [http://en.wikipedia.org/wiki/Floating_point#Machine_precision_and_backward_error_analysis](http://en.wikipedia.org/wiki/Floating_point#Machine_precision_and_backward_error_analysis)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:29:56.333

这给你240。我认为你没有遵循标准。我什至用浮点数解析它

```
var first =parseFloat(200.0);
var next ;
next = parseFloat(first * 1.2);
alert(next); 
```

​</p>

```
​ 
```

# php - 为什么我通过 jquery ajax 和 codeigniter 得到验证错误？

> ID：10243501
> 
> 赞同：7
> 
> 时间：2012-04-20T09:25:07.983
> 
> 标签：php, jquery, ajax, codeigniter

为什么我的 ajax 请求确实得到一个**FALSE**字符串（它应该从控制器获取错误消息）？

这是控制器的片段

```
 function ajax_verify(){
    $this->form_validation->set_rules('username', '', 'max_length[25]|min_length[4]|trim|required|xss_clean');
    $this->form_validation->set_rules('email', '', 'valid_email|required|trim|xss_clean');  

    if($this->form_validation->run()==FALSE){
             $errors = $this->form_validation->error_array();
             echo json_encode($this->form_validation->error_array());
    }else{
            echo "Success!";
       }

    } 
```

我扩展了库以获取错误消息（它在 php 验证中工作得非常好）

```
class MY_Form_validation extends CI_Form_validation{

function __construct(){
    parent::__construct();
}

function error_array(){
    if(count($this->_error_array)===0){
        return FALSE;
    }else{
        return $this->_error_array;
    }
}

function get_tae(){
    return "TAE!";
 }
} 
```

最后是视图和 jquery ajax 代码（返回 false 而不是错误）。

```
 <!DOCTYPE HTML>
     <html>
     <head>
          <meta charset="utf-8">
          <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
         <title>Title</title>
     <body>

    <?php //echo validation_errors('<div class="error">', '</div>');?>
    <?php echo form_open('ajax/ajax_verify', array('id'=>'my_form'));?>
    <?php echo form_label('Username'); ?>
    <?php echo form_input('username', '', array('id' => 'username'));?>
    <?php echo form_label('Email Address'); ?>
    <?php echo form_input('email', '', array('id' => 'email')); ?>
    <?php echo form_submit('submit', 'Submit'); ?>
    <?php echo form_close();?>

    <script type="text/javascript">
     $(function(){
          $('#my_form').submit(function(e){
                $.get('ajax_verify', function(data){
                    $('#contents').append(data);
                }, 'json') ;                   
                e.preventDefault();
            })

      });
           </script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T09:43:21.210

尝试这个。它会正常工作。

在控制器中添加这两个方法

```
 public function CreateStudents() {

        $this->load->helper('form');

        $data['title'] = "Create Students Page";
        $data['success'] = "";
        $this->load->view('templates/header', $data);
        $this->load->view('createstudents', $data);
        $this->load->view('templates/footer', $data);

    }

    public function CreateStudentsAjax() {

        $this->load->helper('form');
        $this->load->library('form_validation');
        $this->form_validation->set_error_delimiters('', '');

        $this->form_validation->set_rules('roll', 'Roll Number', 'required');
        $this->form_validation->set_rules('name', 'Name', 'required');
        $this->form_validation->set_rules('phone', 'Phone', 'required');

        if ($this->form_validation->run()) {

            $this->welcome_model->InsertStudents();
            echo json_encode("Oks");
        } else {

            $data = array(
                'roll' => form_error('roll'),
                'name' => form_error('name'),
                'phone' => form_error('phone')
            );

            echo json_encode($data);
        }
    } 
```

在视图中添加*表单*和一个名为“**消息**”的*DIV*

 **```
<div id="message">

        </div> 

        <?php echo form_open('welcome/CreateStudentsAjax'); ?>

        <label for="roll">Student Roll Number</label>
        <input type="text" id="txtRoll" value="" name="roll"/>

        <label for="Name">Students Name</label>
        <input type="text" id="txtName" value="" name="name"/>

        <label for="Phone">Phone Number</label>
        <input type="text" id="txtPhone" value="" name="phone"/>

        <input type="submit" name="submit" value="Insert New Students"  />

        <?php echo '</form>'; ?> 
```

现在脚本包含

```
<script type="text/javascript">

            $(document).ready(function(){

                $('form').submit(function(){
                    //alert('ok');      
                    $.ajax({
                        url:this.action,
                        type:this.method,
                        data:$(this).serialize(),
                        success:function(data){
                            var obj = $.parseJSON(data);

                            if(obj['roll']!=null)
                            {                               
                                $('#message').text("");
                                $('#message').html(obj['roll']);
                                $('#message').append(obj['name']);
                                $('#message').append(obj['phone']);
                            }
                            else
                            {                               
                                $('#message').text("");
                                $('#message').html(obj); 
                            }

                        },
                        erro:function(){
                            alert("Please Try Again");
                        }                        
                    });
                    return false;
                });                        
            });

        </script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T01:02:53.973

它的：

```
echo json_encode(validation_errors()); 
```

或 - 单独

```
$arr = array(
    'field_name_one' => form_error('field_name_one'),
    'field_name_two' => form_error('field_name_two')
);

echo json_encode($arr); 
```**

# xpath - PMD xpath 教程

> ID：10243502
> 
> 赞同：0
> 
> 时间：2012-04-20T09:25:17.297
> 
> 标签：xpath, pmd, static-code-analysis

我即将为我的 Java EE 代码库编写自定义规则，谁能帮忙从哪里开始编写 xpath 规则？有没有可用的完整教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:43:36.407

[w3schools](http://www.w3schools.com/xsl/xpath_intro.asp "w3schools")有一个非常好的教程/示例。

# ssis - 如何使用派生列转换将字符串 (YYMMDD) 转换为日期时间？

> ID：10243505
> 
> 赞同：7
> 
> 时间：2012-04-20T09:25:28.953
> 
> 标签：ssis

我有一个输入文本文件，它由几列组成，即`TransactionID`，`receiveddt`等`description`。该`recieveddt`列具有以下格式的日期值**`120419` `(yymmdd)`**。我想将 .txt 输入文件加载到数据库中，但目标列`recieveddt`是数据类型`DateTime`。我使用派生列转换将传入的receiveddt列值转换为日期时间，如下所示

```
Derived Column Name  Derived Column     Expression            Data Type 
-------------------  -----------------  --------------------  ---------
receiveddate         replace reciveddt  (DT_DATE)[reciveddt]  datetime 
```

我尝试了不同的组合，但在尝试执行类型转换时不断出错。

如何使用派生列转换将字符串 (YYMMDD) 转换为日期时间？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T09:48:13.550

### 表达：

```
(DT_DATE)("20" + SUBSTRING([ReceivedDt], 1, 2) + "-" + SUBSTRING([ReceivedDt], 3, 2) + "-" + SUBSTRING([ReceivedDt], 5, 2)) 
```

### 为了可读性：

```
(DT_DATE)("20" + 
    SUBSTRING([ReceivedDt], 1, 2)  + "-" + 
    SUBSTRING([ReceivedDt], 3, 2)  + "-" +
    SUBSTRING([ReceivedDt], 5, 2)) 
```

### 问题原因：

您无法将格式中的字符串转换*`YYMMDD`*为有效的日期值。使用上面的表达式为值添加前缀以将值转换为可以转换为日期**`20`**的格式。*`YYYYMMDD`*

### SSIS 2012 包说明了上述给定的表达式：

*使用OLE DB 源*、*派生列转换*和两个*多播转换*配置数据流任务。

![数据流任务](../Images/5c0c3ea43892e96f2223d5a9022b753e.png)

使用以下查询配置*OLE DB 源*，该查询具有*YYMMDD*格式的值。

```
SELECT  '120304' AS ReceivedDt UNION
SELECT  '120107' AS ReceivedDt UNION
SELECT  '121211' AS ReceivedDt UNION
SELECT  '121312' AS ReceivedDt; 
```

配置*派生列转换*以将列*ReceivedDt*格式中的传入值转换*`YYMMDD`*为*ReceivedDate*格式*`YYYYMMDD`*。

![派生列转换](../Images/ab3008a28f14b88eeb55859fd0a05722.png)

在派生列转换和多播转换之间附加数据查看器。将错误输出配置为*重定向*行而不是*失败组件*。

执行包将在派生列转换和成功多播转换之间的数据查看器中显示可以转换为有效日期值的字符串值。

![成功组播转型](../Images/36ad72d62b7bb6115346279503832d59.png)

执行包将在数据查看器中显示无法在派生列转换和错误多播转换之间转换的字符串值。

![错误组播转换](../Images/d6ad0a896bb0b0257be37f0478480133.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:48:00.430

试试这个：

```
(DT_DATE)("20" + SUBSTRING(receivedt,1,2) + "-" + SUBSTRING(receivedt,3,2) + "-" + SUBSTRING(receivedt,5,2)) 
```

请注意，此转换假定所有日期都在当前世纪。如果你有上个世纪的日期，你应该添加一个条件来检查它。

还为派生列转换定义错误路径以捕获格式错误的日期。例如，您可以给它们一个默认值。

# facebook-javascript-sdk - Facebook Javascript SDK - 分数发布需要应用程序密钥

> ID：10243506
> 
> 赞同：1
> 
> 时间：2012-04-20T09:25:35.077
> 
> 标签：facebook-javascript-sdk

我正在使用带有 javascript SDK 的 facebook score api。我需要将登录 fb 用户的分数发布到我的应用程序的 facebook。我的代码需要 Javascript 中的应用程序 ID 和应用程序密钥。它没有获取用户的访问令牌并给出 oAuth 错误。在 JS 中放置密钥不是一个好习惯，我需要有一个解决方案，让 FB 提供一些东西来避免这种循环漏洞。

我正在使用以下代码，其中 data_box 包含应用程序 ID、秘密密钥和分数。

```
 FB.api("/"+FB.getUserID()+"/scores", 'post', data_box, function(responsedata){
          FB.api("/"+data_box.app_id+"/scores", 'get', {}, responsefunction);
    }); 
```

任何人都可以帮我更新代码，以便它使用用户访问令牌而不是应用程序密钥来提交分数。

提前致谢，

雅各布

# php - php UPDATE QUERY 失败 my_fetch_array

> ID：10243509
> 
> 赞同：-3
> 
> 时间：2012-04-20T09:25:41.120
> 
> 标签：php, mysql, arrays, variables

我正在尝试在表格中更新我的供应商信息

这是我的editsupplier表单代码

```
<?php   
$SupplierID = $_GET['SupplierID'] = $row['SupplierID'];
//Connect and select a database
mysql_connect ("localhost", "root", "");
mysql_select_db("supplierdetails");
//Run query
$result1 = mysql_query("SELECT * FROM suppliers WHERE SupplierID=$SupplierID"); 
while($row = mysql_fetch_array($result1)){
$SupplierID = $_GET['SupplierID'] = $row['SupplierID']; 
$SupplierName = $row['SupplierName'];
$Currency = $row['Currency'];
$Location = $row['Location'];
$ContactNumber = $row['ContactNumber'];
$Email = $row['Email'];
  }
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-    strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <meta name="description" content="" />
 <meta name="keywords" content="" />
<meta name="author" content="" />
 <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
 <title>Harrison Spinks</title>
  </head>
   <body>
   <div id="wrapper">
 <?php include('includes/header.php'); ?> 
 <?php include('includes/nav.php'); ?>
 <div id="content">
 <h3><center>Edit Supplier Information</center></h3>
<p>Please enter all the following details to edit a supplier</p>
 </div>
<div>
 <br>
 </br>
<form action="Edit_Supp.php" method="post">
 <br>
 </br>
 <input type="hidden" name="SupplierID" value="<?php echo $SupplierID;?>"/> 

 Supplier Name: <input type="text" name="SupplierName" value="<?php echo $SupplierName ;?>" />
 <br>
 </br>
 Currency: <input type="text" name="Currency" value="<?php echo $Currency ;?>" />
 <br>
 </br>
  Location: <input type="text" name="Location" value="<?php echo $Location ;?>" />
  <br>
  </br>
 Contact Number:<input type="text" name="ContactNumber" value="<?php echo $ContactNumber ;?>" /> 
<br>
</br>
 Email:<input type="text" name="Email" value="<?php echo $Email ;?>" />
 <br>
 </br>
 <input type="submit" value= "Edit Supplier Information"/>

 </form>
 </div>
</body>
 </html> 
```

错误是：

```
Notice: Undefined variable: row in E:\xampp\htdocs\EditSupForm.php on line 2
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in E:\xampp\htdocs\EditSupForm.php on line 8 
```

这是表单背后的代码：

```
<?php
 $con = mysql_connect("localhost", "root", "");  
    mysql_select_db("supplierdetails");   
      if (!$con)     
          {       
        die('Could not connect: ' . mysql_error());        
         }    
  //Run a query        
    $SupplierID= $_POST['SupplierID'] = $row ["SupplierID"];
$result1 = mysql_query ("SELECT * FROM suppliers WHERE SupplierID= '".$SupplierID."'")         or die(mysql_error());     
$row = mysql_fetch_array($result1); 
$SupplierID = $_POST['SupplierID'] = $row ["SupplierID"];
$SupplierName = $_POST['SupplierName'];
$Currency = $_POST['Currency'];
$Location = $_POST['Location'];
$ContactNumber = $_POST['ContactNumber'];
$Email = $_POST['Email'];  
$SupplierID = $row['SupplierID'];         
    $query = "UPDATE suppliers SET SupplierID = '".$SupplierID."', SupplierName= '".$SupplierName."', Currency = '".$Currency."', Location = '".$Location."', ContactNumber = '".$ContactNumber."', Email = '".$Email."' WHERE SupplierID = '".$id."'";     
$result1 = mysql_query($query);           
//Check whether the query was successful or not    
 if($result1) 
 {          
 echo "Supplier Updated"; 
 header ("Location: Supplier.php");    
 }
else 
{        
 die ("Query failed");    
  }    
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:45:53.963

`$row ["SupplierID"];`在执行 mysql 查询之前，在您使用的两个代码中，`$row ["SupplierID"];' 这就是你得到错误的原因。

# html - IE 错误使用 :active 选择器

> ID：10243511
> 
> 赞同：0
> 
> 时间：2012-04-20T09:25:46.963
> 
> 标签：html, css, internet-explorer, css-selectors

我正在使用`:active`选择器来尝试设置链接样式，同时按下鼠标按钮。

这在很酷的浏览器中运行良好，但是 IE 8/7（我可以测试的唯一版本）设法显示样式，但是在`:active`按下按钮后元素保持其样式，并且`:active`当元素有键盘时样式也会触发`:focus`（我相信这与`:focus`单击元素后获取键盘的错误相同）。

有谁知道非javascript解决方法？

可以在以下位置看到一个实时示例：[http](http://rcnhca.org.uk/sites/first_steps/communication/) ://rcnhca.org.uk/sites/first_steps/communication/ （尝试面包屑导航下方的按钮）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:40:34.103

无法`:active`在 IE7 中按您的意愿工作。如果你可以让它与 javascript 一起工作，那将是你最好的选择。IE8 和 9 应该可以在上面的示例页面中完美运行，这在我看来肯定是这样。的其他实现`:active`可能无法按预期工作，例如在嵌套元素中，但在您的情况下，它似乎工作正常。

有关兼容性的信息，请参阅[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)。

# javascript - Google Maps Javascript v3：折线作为图像？

> ID：10243512
> 
> 赞同：1
> 
> 时间：2012-04-20T09:25:49.560
> 
> 标签：javascript, google-maps, google-maps-api-3, polyline

在 Google Maps Javascript API v3 中是否可以将折线作为具有空白/白色背景的图像？

菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T01:33:13.390

可能不是本身，但您可以使用 Google Maps API 循环遍历所有点并将它们转换为屏幕坐标。这样，您可以将它们绘制到画布元素中，并从那里获取位图数据。

# c# - 避免 UserControl 捕捉鼠标滚轮滚动

> ID：10243513
> 
> 赞同：3
> 
> 时间：2012-04-20T09:26:08.433
> 
> 标签：c#, wpf, .net-4.0, user-controls, mouseevent

我们有一个`UserControl`显示枚举的所有可能值，表示为`RadioButton`a`ListBox`以选择其中一个。当此控件`ScrollViewer`与其他控件（例如文本框或其他控件）一起位于内部时，并且您尝试通过鼠标滚轮滚动`ScrollViewer`时，当鼠标光标位于 EnumBox 上方时，它将不会滚动表单。

这是它在 UI 中的样子：

![UI 中的枚举框](../Images/3489178d124b970a2a88e392806bb69e.png)

为了演示，`RadioButton`s 有黄色背景，`WrapPanel`' 的背景是绿色的。当鼠标光标位于彩色区域内（例如在 内`WrapPanel`）时，通过鼠标滚轮滚动无效。

EnumBox 的模板如下所示：

```
 <UserControl.Template>
    <ControlTemplate TargetType="{x:Type clientsWpf:EnumBox}">
      <StackPanel>
        <GroupBox Header="{Binding Header, RelativeSource={RelativeSource AncestorType={x:Type clientsWpf:EnumBox}}}" IsReadOnly="{Binding IsReadOnly, RelativeSource={RelativeSource AncestorType={x:Type clientsWpf:EnumBox}}}">
          <Border x:Name="InvalidBorder"  BorderBrush="Red" BorderThickness="0" >
            <ListBox x:Name="PART_ListBox" HorizontalAlignment="Left" KeyboardNavigation.DirectionalNavigation="Cycle" Background="Transparent" BorderThickness="0" SelectedValuePath="." SelectedValue="{Binding Path=SelectedValue, RelativeSource={RelativeSource AncestorType={x:Type clientsWpf:EnumBox}}}" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
              <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                  <WrapPanel Orientation="Horizontal" Background="Green"/>
                </ItemsPanelTemplate>
              </ListBox.ItemsPanel>
              <ListBox.Resources>
                <Style x:Key="{x:Type ListBoxItem}" TargetType="{x:Type ListBoxItem}" >
                  <Setter Property="Template">
                    <Setter.Value>
                      <ControlTemplate>
                        <Border Background="Transparent" Background="Yellow">
                          <RadioButton Margin="3" Focusable="False" Content="{TemplateBinding ContentControl.Content,Converter={StaticResource enumValueDescriptionConverter}}" 
                                     IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}},Path=IsSelected}" />
                        </Border>
                      </ControlTemplate>
                    </Setter.Value>
                  </Setter>
                </Style>
              </ListBox.Resources>
            </ListBox>
          </Border>
        </GroupBox>
      </StackPanel>
    </ControlTemplate>
  </UserControl.Template> 
```

我试图在,和it上设置`ScrollViewer.VerticalScrollBarVisibility="Disabled"`and没有效果。`ScrollViewer.CanContentScroll="False"``ListBox``WrapPanel``RadioButton``Border`

我试图`ScrollBar.Scroll="WrapPanel_Scroll"`在所有四个控件上捕捉事件，但没有一个被击中。

我试图设置`SelectiveScrollingGrid.SelectiveScrollingOrientation="None"`没有`RadioButton`任何效果。

有没有人知道是什么阻止了 UI 中的滚动？

说清楚：这不是在 EnumBox 内滚动，而是滚动整个表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:21:53.963

问题是`ListBox`有它自己的`ScrollViewer`。复制模板`ListBox`并删除嵌入的`ScrollViewer`.

这是一个完整的示例，其中嵌入的`ScrollViewer`注释掉了：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <SolidColorBrush x:Key="ListBorder" Color="#828790"/>
        <Style x:Key="ListBoxStyleNoScrollViewer" TargetType="{x:Type ListBox}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ListBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
            <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBox}">
                        <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="1" SnapsToDevicePixels="true">
                            <!--<ScrollViewer Focusable="false" Padding="{TemplateBinding Padding}">-->
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            <!--</ScrollViewer>-->
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            </Trigger>
                            <Trigger Property="IsGrouping" Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <ScrollViewer>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="200"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="200"/>
            </Grid.RowDefinitions>

            <ListBox Grid.Row="1" Style="{StaticResource ListBoxStyleNoScrollViewer}" >
                <ListBox.Items>
                    <ListBoxItem>One</ListBoxItem>
                    <ListBoxItem>Two</ListBoxItem>
                    <ListBoxItem>Three</ListBoxItem>
                    <ListBoxItem>Four</ListBoxItem>
                </ListBox.Items>
            </ListBox>
        </Grid>
    </ScrollViewer>
</Window> 
```

如果列表框有，`Style="{StaticResource ListBoxStyleNoScrollViewer}"`则滚轮在列表框上方时起作用。如果不是，那么示例会出现您提到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:35:07.800

我认为您的问题是您将背景设置为透明`ListBox`等`Border`。它阻止它接收焦点以及鼠标事件。给你`ListBox`一种颜色，但在它上面翻转 RGBA 的 A 部分。试试这个，例如：#000A0A09（它的黑色，A = 0%，这使它看起来透明）

# command-line - 如何在 wmic 输出中设置列顺序？

> ID：10243515
> 
> 赞同：3
> 
> 时间：2012-04-20T09:26:16.660
> 
> 标签：command-line, batch-file, wmic

我主要以这种方式将 wmic 用作 linux-ps 等效项：

`wmic process where (name="java.exe") get processId, commandline`

但是输出列是按字母顺序排列的，所以我得到：

```
CommandLine                            ProcessId
java -cp ... some.Prog arg1 arg2 ...   2345
java -cp ... other.Prog arg1 arg2 ...  3456 
```

当我想要的是：

```
ProcessId  CommandLine
2345       java -cp .... some.Prog arg1 arg2 ...
3456       java -cp .... other.Prog arg1 arg2 ... 
```

当命令行很长时，这将更具可读性。

我正在考虑编写一个 ps.bat 来简化我使用的语法，因此非常欢迎任何用于后处理 wmic 输出的批处理脚本解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T23:57:07.327

另一种选择是直接通过 VBS 访问 WMI 的**Win32_Process SQL 表**，而不使用 WMIC。然后，您可以准确管理哪些列、列排序及其输出格式。

**这是 CSV 输出的 VBS 代码：** `processList.vbs`

```
' === Direct access to Win32_Process data ===
' -------------------------------------------
Set WshShell = WScript.CreateObject("WScript.Shell")
Set locator = CreateObject("WbemScripting.SWbemLocator")
Set service = locator.ConnectServer()
Set processes = service.ExecQuery ("select ProcessId,CommandLine,KernelModeTime,UserModeTime from Win32_Process")

For Each process in processes
   Return = process.GetOwner(strNameOfUser) 
   wscript.echo process.ProcessId & "," & process.KernelModeTime & "," & process.UserModeTime & "," & strNameOfUser & "," & process.CommandLine
Next

Set WSHShell = Nothing 
```

**命令行用法：** `cscript //NoLogo processList.vbs`

Win32_Process 列列表： http: [//msdn.microsoft.com/en-gb/library/windows/desktop/aa394372 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa394372(v=vs.85).aspx)

原始Java代码在这里：[http ://www.rgagnon.com/javadetails/java-0593.html](http://www.rgagnon.com/javadetails/java-0593.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:59:58.827

一个简单的批处理文件就可以完成这项工作（仅适用于您的情况）。

它通过搜索来确定第二列的起始位置`ProcessId`，然后每一行都会重新排序

```
@echo off
setlocal EnableDelayedExpansion
set "first=1"
for /F "usebackq delims=" %%a in (`"wmic process where (name="cmd.exe") get processId, commandline"`) DO (
    set "line=%%a"
    if defined first (
        call :ProcessHeader %%a
        set "first="
        setlocal DisableDelayedExpansion
    ) ELSE (
        call :ProcessLine
    )
)
exit /b

:ProcessHeader line
set "line=%*"
set "line=!line:ProcessID=#!"
call :strlen col0Length line
set /a col1Start=col0Length-1
exit /b

:ProcessLine
setlocal EnableDelayedExpansion
set "line=!line:~0,-1!"
if defined line (
    set "col0=!line:~0,%col1Start%!"
    set "col1=!line:~%col1Start%!"
    echo(!col1!!col0!
)
Endlocal
exit /b

:strlen <resultVar> <stringVar>
(   
    setlocal EnableDelayedExpansion
    set "s=!%~2!#"
    set "len=0"
    for %%P in (4096 2048 1024 512 256 128 64 32 16 8 4 2 1) do (
        if "!s:~%%P,1!" NEQ "" ( 
            set /a "len+=%%P"
            set "s=!s:~%%P!"
        )
    )
)
( 
    endlocal
    set "%~1=%len%"
    exit /b
) 
```

# javascript - jQuery在编辑DOM后获取最后一个元素

> ID：10243518
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:26:33.610
> 
> 标签：javascript, jquery

我有以下函数，可以将输入添加到 DOM，并根据屏幕上的最后一个为它们提供顺序 id。然而，它似乎只计算了预编辑 DOM 中的实际最后一个......因此，例如，如果我默认有 5 个输入，它将给出所有新闻和 6 的 id 而不是 6、7、8 等。如何我要计算添加的吗？

```
addInput: function () {

    // Get the last input num
    $lastNum = $('.inputs input:last-child').length;

    // Num is last input plus 1
    $num = $lastNum + 1;

    // Input HTML
    $input = '<input type="text" name="iam' + $num + '" id="iam' + $num +'" />';

    // Only allow 10 inputs to be added
    if ( $('.inputs input').length > 9 ) {
        alert('You can only have a maximum of 10');
        return false;
    }

    // Append the input to the inputs list
    $('.inputs').append($input);

}, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T09:28:52.553

`$('.inputs input:last-child').length`总会回来`1`的，因为只有*最后一个孩子*。改为使用`$('.inputs input').length`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:32:10.303

几年前我在我的一个项目中使用了这个基本逻辑。

放置一个隐藏字段，其中包含可用输入的计数。

初始阶段隐藏字段 = 0。

然后如果我添加 3 个新输入，我的隐藏字段将具有 value = 3

我将根据要求将三个输入的详细信息保存在我的数据库中。

当我再次打开页面时，默认情况下我将不得不加载三个输入。所以我也可以在隐藏字段中传递相同的值。

我添加新输入的函数将使用隐藏字段值来增加输入...

**编辑：**

在 jQuery 中，您必须有一个 Parent 块，其中包含所有输入。

因此，您还可以在父 div 中找到输入。

```
$(".inputs input:[type=text]").length. 
```

请参考这个[小提琴](http://jsfiddle.net/URbws/13/)

# ios - iPad - 如何检测是否启用了多任务手势？

> ID：10243520
> 
> 赞同：7
> 
> 时间：2012-04-20T09:26:38.777
> 
> 标签：ios, ipad, multitasking-gestures

我创建了一个 iPad 应用程序，如果未启用多任务手势，它会很有帮助。我知道您不能从应用程序本身禁用它们（感谢上帝应用程序无法自行决定）。但是我想要做的是在启动时显示一个警告，如果启用了多任务手势，并建议用户关闭它们以获得最佳使用。

我已经看到应用程序做同样的事情，比如 Apple 的 GarageBand。例如，在该应用程序中，多任务手势可能会在您弹钢琴时干扰应用程序的工作。Garageband 显示的警告与我要显示的完全一样。

我正在谈论的多任务手势设置位于“设置”>“常规”>“多任务手势”中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:30:17.607

在我看来，这是不可能的.. 一个具有相同主题的分支

[https://stackoverflow.com/a/10193865/1209976](https://stackoverflow.com/a/10193865/1209976)

# kindle - 在 kindle fire 上播放声音

> ID：10243523
> 
> 赞同：0
> 
> 时间：2012-04-20T09:26:40.187
> 
> 标签：kindle, kindle-fire

问题是，在尝试播放音乐时，他的演奏并不总是如此。同时日志发出以下几行

（声音不播放）

```
04-20 10:59:44.944: WARN/ASFDummyExtractor(11743): ASF 解析器不可用
04-20 10:59:44.944: 错误/MPEG4Extractor(11743): 未找到 mdat、ftyp

```

（声音播放）

```
04-20 11:07:50.335: WARN/ASFDummyExtractor(11743): ASF 解析器不可用
04-20 11:07:50.342: 错误/MPEG4Extractor(11743): 未找到 mdat、ftyp
04-20 11:07:50.358: DEBUG/AudioResampler(11743): 强制 AudioResampler 质量为 2
04-20 11:07:50.358: DEBUG/Omap4ALSA(11743): 在模式 0 中打开调用设备 00000002
频道 00000000...
04-20 11:07:50.366：INFO/Omap4ALSA(11743)：使用乒乓球！
04-20 11:07:50.366：INFO/Omap4ALSA（11743）：缓冲区大小：4096
04-20 11:07:50.366：INFO/Omap4ALSA（11743）：延迟：92879
04-20 11:07:50.428: INFO/Omap4ALSA(11743): 初始化 ALSA 播放设备 'plughw:0,0'
04-20 11:07:50.428: 错误/AudioHardwareALSA(11743): 待机后重新打开:: 耗时 69 毫秒

```

在其他安卓设备上没有问题（三星平板...）

```
MediaPlayer mp = MediaPlayer.create(mContext, R.raw.buttonclick);
if (mp != null)
mp.start(); 
```

有人遇到这个问题吗？使用 *.ogg 声音文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:24:57.220

好吧，我想我发现不可用的东西是由于 Kindle 上媒体播放器的内部工作原理。它首先扫描 asf 文件，然后扫描 mp4，如果文件不是该类型，则给出错误日志。在我的设备上，它可以很好地播放所有文件，但是在播放大量声音后我遇到了一些奇怪的噪音问题。我认为无关。

# c# - 标记具有太多项目的枚举；最后一个值太大。我该如何解决这个问题？

> ID：10243527
> 
> 赞同：5
> 
> 时间：2012-04-20T09:26:53.243
> 
> 标签：c#, enums, flags

> **可能重复：**
> [当您使用标志（枚举）时，您的限制为 64。当您达到限制时，还有什么替代方案？](https://stackoverflow.com/questions/2372227/when-you-use-flagenum-you-have-a-limit-of-64-what-are-the-alternative-when-yo)

我有以下`[Flags] enum`必须包含 33 个元素：

```
[Flags]
public enum Types
{
    None = 0,
    Alarm = 1,
    Exit = 2,
    Panic = 4,
    Fire = 8,
    Tamper = 16,
    Key = 32,
    Line = 64,
    FTC = 128,
    Unused = 256,
    tech_1 = 512,
    //... tech_2 through _7 omitted for brevity
    tech_8 = 65536,
    fire_1 = 131072,
    //... fire_2 through _11 omitted for brevity
    fire_12 = 268435456,
    Key = 536870912,
    Exit = 1073741824,
    Gas = 2147483648, // Cannot convert source type uint to target type int
} 
```

最后一项的值似乎太大。以前有没有人处理过这个问题？有什么想法可以解决/解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T09:27:52.470

您可以将枚举的类型指定为具有更大范围的类型。

```
[Flags]
public enum Types : long 
```

# spring - 由于自定义异常类，避免通过 JVisualVM 在 JMX 调用中出现 ClassNotFoundException

> ID：10243528
> 
> 赞同：2
> 
> 时间：2012-04-20T09:26:54.267
> 
> 标签：spring, exception, jmx, jvisualvm

我们的应用程序通过 JMX 公开了一些方法，我们使用 JVisualVM 调用这些方法。

这通常工作得很好，但有时方法调用会在应用程序内部出现异常而中止。在这种情况下，JVisualVM 不会显示来自异常的错误消息，而是显示错误消息

```
java.rmi.UnmarshalException [...] error unmarshaling return; 
nested exception is: java.lang.ClassNotFoundException [...] 
```

这是相当无益和令人困惑的；我们希望 JVisualVM 显示真正的错误消息。

**到目前为止，我们发现了什么：**

JMX 似乎会序列化和反序列化调用期间抛出的任何异常。然而，在我们的例子中，异常是不属于 JDK 的自定义异常。因此，当通过 JVisualVM 调用方法时，JVisualVM 无​​法显示异常，因为由于未知的自定义异常类导致反序列化失败。

现在，作为一种解决方法，我们将通过 JMX 公开的所有方法包装在一个`try-catch`块中

```
 throw new RuntimeException("Error invoking method:"+e); 
```

这是可行的，因为它将任何异常转换为字符串，但看起来相当不优雅和冗长。

*   是否有一些通用的方法来告诉 JMX 不序列化异常？诸如“始终将异常转换为字符串”之类的东西？
*   我们使用 Spring 的[MBeanExporter](http://static.springsource.org/spring/docs/3.1.0.M2/javadoc-api/org/springframework/jmx/export/MBeanExporter.html)。Spring中是否有一种机制来处理这个问题？

**编辑**

我们知道我们可以配置 JVisualVM 来加载有问题的类。但是，我们希望 JVisualVM 在没有特殊配置的情况下工作。此外，它可能运行一个应用程序代码甚至不可用的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:49:10.857

您可以尝试`-Djava.rmi.server.codebase`在 JVisualVM 上使用，以便它可以从远程 JVM 加载异常类吗？

编辑：如果你不想这样做，你可以使用一个方面来做你的 try-catch 块。然后你只需要在一个地方。如果您已经在使用 Spring，那么 Spring AOP 将使这变得非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T21:47:59.197

看看[java.io.Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)。您可以实现一个名为[writeReplace](https://stackoverflow.com/questions/10070769/behavior-mbeanserverforwarder)的可选方法，该方法可以放置在您的自定义异常中。返回原始消息的通用异常。当异常被序列化时，它将发送泛型。或者你也可以发送一个字符串，但我不确定这是否适用于 VisualVM。我想这取决于数据检查的严格程度。

> 在将对象写入流时需要指定要使用的替代对象的可序列化类应使用精确签名实现此特殊方法：
> 
> ANY-ACCESS-MODIFIER 对象 writeReplace() 抛出 ObjectStreamException；

**===== 更新 =====**

知道了。第 3 方库.... 总结.... 这里的挑战是调用*setAttribute[s]*并通过 JVisualVM 在 MBean 上*调用*会导致抛出 JVisualVM 的类路径不可用类型的异常。

如果您在 MBeanServer 上实现了某种拦截器，它可以捕获任何抛出的异常（可能是任何类名*不*以**java.**或**javax.**开头的异常，并将它们作为 RuntimeExceptions 重新抛出，并带有表示原始异常的非常丰富的错误消息. （如果有用，您甚至可以包含堆栈跟踪的字符串渲染）。这基本上就是您现在正在做的事情，除了它具有集中在一个地方的优点并且不依赖于您如何实现您的类。

尽管标准 JMX 规范中仍然缺少 MBeanServer 拦截器，但您可以通过创建自己的 MBeanServer 实现来模仿它们，该实现只是简单地委托给真正的 MBeanServer，但是对于*setAttribute[s]*和*调用*调用，您可以使用“catch-and-重新投掷”技术。这听起来像是大手术，但除了复杂的应用程序服务器 JMX 实现的棘手问题外，它实际上相当简单。

有关示例，请参阅此[stackoverflow 帖子](https://stackoverflow.com/questions/10070769/behavior-mbeanserverforwarder)和此[要点。](https://gist.github.com/2366862)

.....话虽如此，您正在使用 Spring，您可以指定注册 MBean 的确切 MBeanServer 实例，以及向 JVisualVM 使用的 JMXConnectorServer 公开的 MBeanServer。所以会更简单：

1.  使用 gist 中概述的 MBeanServer 包装器思想，在 Spring 中构造它，将真正的 MBeanServer 作为委托注入
2.  在 Spring JMX 导出器中引用包装器 bean。
3.  在您的 JMXConnectorServer 中引用包装器 bean。

如果您使用自动引导的默认 JMXConnectorServer，则需要切换到使用[Spring 定义的一个](http://static.springsource.org/spring/docs/2.0.5/api/org/springframework/jmx/support/ConnectorServerFactoryBean.html)。

基于 Spring 的方法还有一个额外的好处，即只有远程 MBeanServer 调用（如 JVisualVM 调用）会经历异常重写，而应用程序中的内部调用将获得真正的异常，因为它们可以直接转到*真正的*MBeanServer。

**===== 又一次更新 =====**

Spring JMX 支持确实有一个[MBean 拦截器实现](http://static.springsource.org/spring/docs/2.0.5/api/org/springframework/jmx/access/MBeanClientInterceptor.html)。我不知道，但当我在思考这个问题时，听起来像是 Spring 会实现的东西，而且它就是......

# regex - Perl/TCL 中的正则表达式

> ID：10243531
> 
> 赞同：2
> 
> 时间：2012-04-20T09:27:00.313
> 
> 标签：regex, perl, tcl

我有一个字符串，想得到它的一部分。假设我有一个字符串说“设置辅助 ODU4-4-3”。我只想从中获取ODU。而字符串的模式不是固定的。它可能有些像ODU、ODU4、ODUX。我不知道如何获取这个

```
$aid = "ODU4-9-1";
$aid =~ /(\w)+\d*-\d-\d/;
print " value is $1" 
```

输出

```
value is ODU4 
```

我只需要 ODU 的值，而字符串模式可能会改变。它可能只是 ODU-4-3，也可能是 ODU4-4-3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:06:51.003

和 Tcl：

```
if {[regexp {^[[:alpha:]]+} $string letters]} {
    puts $letters
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:33:44.707

返回所有匹配项的@M42 答案版本：

```
my @allmatches = $aid =~ /([A-Z]{3}).*?\-\d\-\d/; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:36:10.423

怎么样：

```
$aid =~ /([A-Z]{3}).*?-\d-\d/; 
```

对于任何大于 0 且不区分大小写的长度，请使用

```
$aid =~ /([a-zA-Z]+).*?-\d-\d/; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T09:41:28.670

如果您只想要**odu**中的字母，那么这应该可以解决问题

```
$aid =~ /([[:alpha:]]+)/; 
```

# asp.net-mvc - Asp.net 和 Azure - 无法再显示我的 Web 应用程序

> ID：10243533
> 
> 赞同：0
> 
> 时间：2012-04-20T09:27:09.967
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure

昨晚我更新了我的天蓝色项目后，我再也看不到我的页面了，我只得到 403 - 禁止访问：访问被拒绝。

我正在使用 asp.net mvc - 过去两周它运行良好，但路由似乎不再工作。

如果我直接转到一个页面，它可以工作，但由于安全性，它会重定向到 cloudapp.net/login？- 给出错误 404 - 找不到文件或目录。

如何再次启用路由？它在我的本地计算机上使用 azure 模拟器运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:49:01.243

你改变了什么？如果您使用任何类型的源代码控制，请检查 web.config 文件和 global.asax.cs 文件的更改。为 .NET Framework 4.0 项目自动加载路由模块。有人不小心更改了项目的目标框架版本的可能性很小。丢失路由的其他可能崩溃是使用 Global.asax 的 Application_Start 事件处理程序中的 RouteTable 注册路由。

# ios - 如何取消 UIView 动画并跳到最后？

> ID：10243536
> 
> 赞同：1
> 
> 时间：2012-04-20T09:27:23.320
> 
> 标签：ios, uiview, uiviewanimation

我想取消正在运行的 UIView 块动画并跳到它的末尾。

我知道使用选项 UIViewAnimationOptionBeginFromCurrentState 开始一个新动画会停止上一个动画，但不是从当前状态开始，而是从上一个动画的“最终状态”开始。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:47:10.153

如果您向视图层发送 removeAllAnimations 消息，它应该删除当前活动的动画。此外，由于系统将视图属性设置为其最终值作为动画的一部分，因此视图应该跳转到它的最终位置，而无需您执行任何其他操作。

# cakephp-1.3 - CakePHP 多选“选中”不起作用

> ID：10243537
> 
> 赞同：12
> 
> 时间：2012-04-20T09:27:23.473
> 
> 标签：cakephp-1.3

我的编辑表单中有一个多选输入：-

```
<?php echo $this->Form->input('Article.tags', array('type' => 'select', 'multiple' => true, 'options' => $tags, 'selected' => array($selected))); ?> 
```

回显时，**`$selected`**变量将如下所示：-

```
"MySQL", "PHP" 
```

但是，输入不会自动选择与标签匹配的选项。

但是，当我手动输入选择的选项时，它会自动选择这两个选项；例如

```
<?php echo $this->Form->input('Article.tags', array('type' => 'select', 'multiple' => true, 'options' => $tags, 'selected' => array("MySQL", "PHP"))); ?> 
```

有没有什么办法解决这一问题？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-21T02:11:29.637

啊，我解决了这个问题。

我看错了方向。我假设选择的值应该是字符串形式，用引号和逗号分隔。（例如“MySQL”、“PHP”、“jQuery”）。

相反，它应该是数组格式，没有任何引号和逗号。例如

```
Array
(
    [0] => MySQL
    [1] => PHP
    [2] => jQuery
) 
```

整理好数组后，我将其传递给视图；例如 $this->set('selected', $myArray);

然后在表格上，我只需要像这样回应它：-

```
<?php echo $this->Form->input('Article.tags', array('type' => 'select', 'multiple' => true, 'options' => $tags, 'selected' => $selected)); ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-07T06:51:00.453

使用默认关键字：

```
<?php echo $this->Form->input('Article.tags',array('options'=>$tags,'type'=>'select','label'=>'TDSP','class'=>'distributeSelect','multiple'=> 'true','default' => $selected));?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-23T04:32:52.933

> 在**CakePHP 3.x**版本中，您可以设置`value`从列表中预选

```
echo $this->Form->select(
    'Article.tags',
    ['PHP','MySQL','jQuery','AJAX'],
    [
        'multiple' => true,
        'value' => ['MySQL','AJAX']
    ]
); 
```

具有值的 HTML 元素，`MySQL`将`AJAX`呈现为预选

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-27T14:30:00.157

不需要做选择的属性

例如：

在控制器中：

```
$this->request->data = $this->Article->read(null, $id);

$this->set(array(
        'centers' => $this->Center->find('list'),
        'shopCategories' => $this->ShopCategory->find('list'),
        'brands' => $this->Brand->find('list')
    )); 
```

鉴于：

```
echo $this->Form->input('Center', array('multiple' => 'multiple')); 
```

就这样！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T09:36:01.577

cake php 完全基于命名约定和数组格式。

尝试这样做： -

```
<?php echo $this->Form->input('Article.tags',array('options'=>$tags,'type'=>'select','label'=>'TDSP','class'=>'distributeSelect','multiple'=> 'true','selected' => $selected));?> 
```

# ruby - 在 Ruby 中转义特殊字符

> ID：10243538
> 
> 赞同：0
> 
> 时间：2012-04-20T09:27:28.510
> 
> 标签：ruby, escaping

如何将字符串附加`'\x'`到 Ruby 中的数字？我已经尝试过`'\\x'`，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:37:27.533

大概是这样的：

```
my_string = 'foo 123 456 bar'
my_string.gsub(/(\d+)/, '\\x\1') # "foo \\x123 \\x456 bar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:50:32.377

如果您使用的是单引号字符串，`'\x'`那么您可能已经拥有了您想要的东西。当 Ruby（或者更准确地说，IRB）打印带有文字反斜杠的字符串时，它显示它默认转义，这就是`#p`行为方式（这就是 IRB 用来显示结果的方式）。但是字符串可能只有一个黑斜线。

```
num = 123
s = '%d\x' % num  #=> "123\\x" (using the short-hand form for sprintf)

print s #=> 123\x
p s #=> "123\\x"
puts '%d\x' % num #=> 123\x - what the string actually contains

puts num.to_s + '\x' 
```

请注意，在 Ruby 中，单引号字符串文字的替换比双引号字符串要少得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:37:42.570

如果没有上下文，很难知道您要达到的目标。这里有一些方法（如果你真的想追加）：

```
"%d\\x" % num
"#{num}\\x" 
```

如果您尝试输出十六进制数字，这很好：

```
"\\x%s" % num.to_s(16) 
```

# c++ - 链接器错误：未定义对“QGLViewer 的 vtable”的引用

> ID：10243540
> 
> 赞同：0
> 
> 时间：2012-04-20T09:27:37.240
> 
> 标签：c++, gcc, qt4, linker-errors

我正在做一个可视化项目。它应该在 QGLViewer 上查看 3d 模型。我有一个像这样定义的 QGLViewer 子类：

```
class GLViewer : public QGLViewer
{
    Q_OBJECT
public:
    explicit GLViewer(QWidget *parent = 0,const QGLWidget* shareWidget=0, Qt::WFlags flags=0);
protected:
    void initializeGL();
    void resizeGL(int width, int height);
    void paintGL();
signals:
public slots:
}; 
```

像这样实现c'tor：

```
GLViewer::GLViewer(QWidget *parent, const QGLWidget* shareWidget, Qt::WFlags flags):
    QGLViewer(parent,shareWidget,flags)
{
} 
```

我收到链接器错误：

```
glviewer.o: In function `GLViewer::GLViewer(QWidget*, QGLWidget const*, QFlags<Qt::WindowType>)':
glviewer.cpp:(.text+0x18): undefined reference to `vtable for GLViewer'
glviewer.cpp:(.text+0x20): undefined reference to `vtable for GLViewer' 
```

**编辑：** 这是`.pro`文件的内容：

```
QT       += core gui opengl xml

TARGET = qglviewer-test
TEMPLATE = app

LIBS += -lqglviewer-qt4 -lGLU -lGLEW

SOURCES += main.cpp\
        mainwindow.cpp \
        glviewer.cpp

HEADERS  += mainwindow.h \
        glviewer.cpp 
```

表格 += 主窗口.ui

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:57:29.473

您没有发布 GLViewer 类的完整实现（仅构造函数），但出现此错误的原因：

```
undefined reference to `vtable for GLViewer' 
```

是你没有实现一些虚函数（我假设是`initializeGL()`,`resizeGL(int width, int height)`或`paintGL()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T01:45:49.657

您没有通过 moc 运行 glviewer.h。这就是错误所说的。在您的 .pro 文件中，更改

```
HEADERS  += mainwindow.h \
        glviewer.cpp 
```

至

```
HEADERS  += mainwindow.h \
        glviewer.h               <------ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:08:14.827

正如 VJovic 所说，这种问题通常是由未实现的虚函数引起的。我注意到没有`GLViewer`析构函数的声明/定义。is的析构函数`QGLViewer`是`virtual`函数吗？如果是这种情况，请尝试为`GLViewer`类提供析构函数，这可能会解决您的问题。

# c++ - 如何将 SafeArray 从 C++ (ATL) 返回到 VB.NET

> ID：10243541
> 
> 赞同：2
> 
> 时间：2012-04-20T09:27:46.330
> 
> 标签：c++, vb.net, atl

我创建了一个 ATL 项目，我得到了一个类似的函数

idl 文件：

```
[id(1)] HRESULT COM_TEST( [in] int parm_count, [in, out] SAFEARRAY(PARM) *parm, [out, retval] short *return_code ) 
```

cpp文件：

```
STDMETHODIMP CTEST::COM_TEST( int parm_count, SAFEARRAY **parm, short *return_code
{
    *return_code = 0;
    for( long i = 0 ; i < parmc ; i++ )
    {
        PARM value;
        value.data = _bstr_t("This is a ACK" );  //data is BSTR type 
        SafeArrayPutElement( *parm, &i, &value );
    }

return S_OK;
} 
```

然后我从VB调用它。网

vb 文件：

```
Dim RetCode As Short
Dim TestArray As ATL_TESTLib.ITEST
Dim parm() As ATL_TESTLib.PARM
TestArray = New ATL_TESTLib.TEST

ReDim parm(1)
parm(0).data = "This is request A"
parm(1).data = "This is request B"
RetCode = TestArray.COM_TEST( 2, parm ) 
```

但是，我得到了 AccessViolationException。

我的问题是如何输入一个数组并输出它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:33:16.303

您不应该在此调用中提供第三个参数吗？

```
RetCode = TestArray.COM_TEST( 2, parm ) 
```

你在你的函数中使用了这个参数（*return_code = 0;），也许这就是它中断的原因？

# php - 缓存的拇指第一次不显示

> ID：10243543
> 
> 赞同：0
> 
> 时间：2012-04-20T09:27:49.860
> 
> 标签：php, caching, thumbnails, phpthumb

我将 phpThumb 与 mrPHPs 缓存脚本一起使用。生成拇指时（第一次加载），它不会显示在浏览器中 - 但所有下一次加载都可以。这对客户来说真的很令人沮丧，但我似乎找不到解决方案。

如果我用萤火虫检查图像，它说它存在并且显示得很好。问题是什么？

这是截图[http://shrani.si/?1C/117/4K2CNJFQ/thumbproblem-copy.jpg](http://shrani.si/?1C/117/4K2CNJFQ/thumbproblem-copy.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:01:55.683

看来升级到 PHP 5.4.3 解决了这个问题。

# python - Python - 列表连接

> ID：10243548
> 
> 赞同：0
> 
> 时间：2012-04-20T09:28:05.740
> 
> 标签：python, list

我对 Python 中的列表连接有疑问，我有这段代码：

```
def lista():
    word = sys.argv[1]
    l = []
    m = []
    for file_name in sys.argv[2:]:
        with open(file_name, "r") as f:
            for line in f:
                l + [len(re.findall(word, line))] #doesn't work
                m.append(len(re.findall(word, line))) #works
    print l
    print m
    return l 
```

当我运行这个函数时，我总是得到空列表 l，但是 m 中有元素，为什么 l+[elem] 对我不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:31:35.007

您永远不会为 l 分配新值。你应该使用赋值。试着打电话`l = l + [len(re.findall(word,line))]`

编辑：另一种选择是使用 += 运算符：`l+=[len(re.findall(word,line))]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:32:27.400

因为`l+[len(re.findall(word,line))]`只是添加两个列表但丢弃了结果。你可能想要

```
l+=[len(re.findall(word,line))] 
```

一般意见：

*   您的变量名称不符合[PEP-8](http://www.python.org/dev/peps/pep-0008/)
*   附加列表的成本很高，而且通常不是 Python 的。为此，您可以使用生成器。
*   您应该对文件使用[with](http://www.python.org/dev/peps/pep-0343/)语句，以确保即使发生异常也将其关闭。

这是带有建议编辑的程序。

```
def lista():
    word=sys.argv[1]
    def search():
        for file_name in sys.argv[2:]:
            with open(file_name,"r") as fin:
                for line in fin:
                    yield len(re.findall(word,line))
    return [l for l in search()] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T09:37:35.270

在这里你只想使用`l.append()`- 你正在做的事情具有相同的效果，除了它的可读性和速度更慢。

```
python -m timeit -s "l=[]" "for i in range(1000):" "  l.append(i)"
10000 loops, best of 3: 106 usec per loop

python -m timeit -s "l=[]" "for i in range(1000):" "  l += [i]"
10000 loops, best of 3: 124 usec per loop 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T09:34:31.650

```
l = l+[len(re.findall(word,line))] #works 
```

# vim - 转到行首而不在 VI 中打开新行

> ID：10243551
> 
> 赞同：261
> 
> 时间：2012-04-20T09:28:15.563
> 
> 标签：vim, vi

多年来，我一直使用`SHIFT``O`and`SHIFT``$`移动到`vi`.

然而`SHIFT``O`更多的是在光标上方打开一个新行。

是否有任何命令可以将您带到行首？

* * *

## 回答 #1

> 赞同：475
> 
> 时间：2012-04-20T09:33:49.407

您可以在正常模式下使用`^`或`0`（零）移动到行首。

`^`将光标移动到行的第一个非空白字符
`0`总是将光标移动到“第一列”

您还可以使用`Shift``i`移动并切换到插入模式。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-20T09:33:17.917

一个简单`0`的带你到一行的开头。

`:help 0`了解更多信息

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-11-12T22:02:08.877

试试这个[Vi/Vim 备忘单](http://worldtimzone.com/res/vi.html)解决许多问题。

对于正常模式：
`0`- [零] 到行首，第一列。
`$`- 到行尾

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-03-08T12:13:51.040

您可以使用`0`或`^`移动到行首。
并且可以使用`Shift`+`I`移动到开头并切换到编辑模式（**插入**）。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-10-02T23:13:55.590

还有另一种方法：

```
| 
```

那就是“管道”——在[ANSI 布局](https://deskthority.net/wiki/ANSI_vs_ISO)中的退格下找到的符号。

Vim quickref ( `:help quickref`) 将其描述为：

> ```
> N      |      to column N (default: 1) 
> ```

### 包裹线呢？

如果您启用了换行，`0`将`|`不再将您带到屏幕行的开头。在这种情况下使用：

```
g0 
```

同样，vim quickref 文档：

> ```
>  g0   to first character in screen line (differs from "0"
>       when lines wrap) 
> ```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-05-23T08:55:47.787

**使用插入模式将光标移动到开头或结尾**

*   `I`- 将光标移动到当前行中的第一个非空白字符并启用插入模式。
*   `A`- 将光标移动到当前行的最后一个字符并启用插入模式。

这里`I`相当于`^`+ `i`。同样`A`等价于`$`+ `a`。

**只需将光标移动到开头或结尾**

*   `^`- 将光标移动到当前行的第一个非空白字符
*   `0`- 将光标移动到当前行的第一个字符
*   `$`- 将光标移动到当前行的最后一个字符

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-04-20T09:29:04.377

键入“^”。并获得一个好的“Vi”教程:)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-04-20T09:32:15.750

我刚刚发现 0（零）和 shift+0 在 vi​​m 上工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-25T00:30:19.703

`0`带您到行首

`Shift` `0`带你到行尾

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-08-20T19:43:13.963

你也可以使用

```
:-0 
```

这会将光标设置在当前行（此处为空白）的 0 列。

# android - 如何在 Android 中的两个活动之间应用幻灯片动画？

> ID：10243557
> 
> 赞同：71
> 
> 时间：2012-04-20T09:28:40.853
> 
> 标签：android, android-activity, android-animation

当我从一个活动移动到另一个活动时，我想实现从左到右的滑动效果。为此，我正在使用以下代码，但没有得到任何结果。请纠正我。

在java中这两个文件：

```
super.onCreate(savedInstanceState);
overridePendingTransition(R.anim.fadein, R.anim.fadeout);
setContentView(R.layout.main); 
```

res/anim 目录下的两个文件：

**淡入淡出.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<alpha
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="5000"
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/slide_out_right"
    android:toAlpha="1.0" >
</alpha> 
```

**淡出.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<alpha
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="5000"
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/slide_in_left"
    android:toAlpha="1.0" >
</alpha> 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-10-15T05:40:40.577

在 res/anim 文件夹中添加这两个文件。

**R.anim.slide_out_bottom**

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:shareInterpolator="false">
<translate
    android:duration="@integer/time_duration_max"
    android:fromXDelta="0%"
    android:fromYDelta="100%"
    android:toXDelta="0%"
    android:toYDelta="0%" />
</set> 
```

**R.anim.slide_in_bottom**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:shareInterpolator="false">
<translate
    android:duration="@integer/time_duration_max"
    android:fromXDelta="0%"
    android:fromYDelta="0%"
    android:toXDelta="0%"
    android:toYDelta="100%" /> 
</set> 
```

并在您的视图单击侦听器中编写以下代码行。

```
startActivity(new Intent(MainActivity.this, NameOfTargetActivity.class));
overridePendingTransition(R.anim.slide_out_bottom, R.anim.slide_in_bottom); 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2016-10-09T12:53:01.950

[![在此处输入图像描述](../Images/293e4e5f9ca6ad9437813b790c8122b7.png)](https://i.stack.imgur.com/qxHeT.gif)

您可以覆盖您的默认活动动画，它比 overridePendingTransition 执行得更好。我使用适用于每个 android 版本的解决方案。只需复制粘贴 4 个文件并添加 4 行样式，如下所示：

创建一个“CustomActivityAnimation”并通过“windowAnimationStyle”将其添加到您的基本主题中。

```
<!-- Base application theme. -->
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorPrimary</item>
    <item name="android:windowAnimationStyle">@style/CustomActivityAnimation</item>

</style>

<style name="CustomActivityAnimation" parent="@android:style/Animation.Activity">
    <item name="android:activityOpenEnterAnimation">@anim/slide_in_right</item>
    <item name="android:activityOpenExitAnimation">@anim/slide_out_left</item>
    <item name="android:activityCloseEnterAnimation">@anim/slide_in_left</item>
    <item name="android:activityCloseExitAnimation">@anim/slide_out_right</item>
</style> 
```

然后在 res 文件夹下创建 anim 文件夹，然后将这四个动画文件创建到 anim 文件夹中：

slide_in_right.xml

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="100%p" android:toXDelta="0"
        android:duration="@android:integer/config_mediumAnimTime"/>
</set> 
```

slide_out_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="0" android:toXDelta="-100%p"
        android:duration="@android:integer/config_mediumAnimTime"/>
</set> 
```

slide_in_left.xml

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="-100%p" android:toXDelta="0"
        android:duration="@android:integer/config_mediumAnimTime"/>
</set> 
```

slide_out_right.xml

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="0" android:toXDelta="100%p"
        android:duration="@android:integer/config_mediumAnimTime"/>
</set> 
```

如果您遇到任何问题，您可以[从 github 下载我的示例项目](https://github.com/ShohanAhmed/Android-Activity-Transition-Custom-Animation.git)。

谢谢

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-04-20T09:31:19.300

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splashscreen);

         new Handler().postDelayed(new Runnable() {
             public void run() {

                     /* Create an intent that will start the main activity. */
                     Intent mainIntent = new Intent(SplashScreen.this,
                             ConnectedActivity.class);
                     mainIntent.putExtra("id", "1");

                     //SplashScreen.this.startActivity(mainIntent);
                     startActivity(mainIntent);
                     /* Finish splash activity so user cant go back to it. */
                     SplashScreen.this.finish();

                     /* Apply our splash exit (fade out) and main
                        entry (fade in) animation transitions. */
                     overridePendingTransition(R.anim.mainfadein,R.anim.splashfadeout);
             }
     }, SPLASH_DISPLAY_TIME);   
    } 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-10-05T04:04:46.253

使用带有一些音符的 alpha 动画向上/向下滑动

[![在此处输入图像描述](../Images/5799551e4c0ebf2c3c1b60258290f0b5.png)](https://i.stack.imgur.com/itcsl.gif)

**slide_up.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@integer/activity_transition_time"
    >
    <translate
        android:fromYDelta="100%p"
        android:toYDelta="0"/>
    <alpha
        android:fromAlpha="0.5"
        android:toAlpha="1"/>
</set> 
```

**slide_down.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@integer/activity_transition_time"
    >
    <translate
        android:fromYDelta="0"
        android:toYDelta="100%p"/>
    <alpha
        android:fromAlpha="1"
        android:toAlpha="0.5"/>
</set> 
```

**no_animation.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@integer/activity_transition_time"
    android:fromYDelta="0"
    android:toYDelta="0"/> 
```

**第一个活动**

```
startActivity(new Intent(this, SecondActivity.class));
overridePendingTransition(R.anim.slide_up,  R.anim.no_animation); // remember to put it after startActivity, if you put it to above, animation will not working
// document say if we don't want animation we can put 0\. However, if we put 0 instead of R.anim.no_animation, the exist activity will become black when animate 
```

**第二次活动**

```
finish();
overridePendingTransition(R.anim.no_animation, R.anim.slide_down); 
```

**完毕**

**更多**
我尝试在呈现视图模型（如[https://www.youtube.com/watch?v=deZobvh2064](https://www.youtube.com/watch?v=deZobvh2064)）时制作像 iOS 动画一样的幻灯片动画但失败了。

查看 iOS 当前动画，您会看到： 带有 alpha 的底部动画（大约 50%）然后它变得非常快然后变慢，动画时间大约 > 500 毫秒（我使用修剪视频工具来计算动画时间 [https:// www.kapwing.com/trim-video](https://www.kapwing.com/trim-video)所以它不能完全 100%）

然后我尝试申请android。
为了使我使用`<alpha>`和成功的 alpha。
为了使动画开始的速度比我使用的慢，`android:interpolator="a decelerate interpolator"`但它几乎失败了。

`decelerate interpolator`Android中有 3 个默认值
`@android:interpolator/decelerate_quad`-> 因子 = 1
`@android:interpolator/decelerate_cubic`-> 因子 = 1.5
`@android:interpolator/decelerate_quint`_> 因子 = 2.5
（因子越高 <=> 动画从开始时开始越快，结束时越慢）
这是一个很好的教程[http://cogitolearning。 co.uk/2013/10/android-animations-tutorial-5-more-on-interpolators/](http://cogitolearning.co.uk/2013/10/android-animations-tutorial-5-more-on-interpolators/)理解它

我试过上面的3个我不能像iOS那样实​​现，动画不能像iOS那样启动更快。然后我创建一个自定义 decelerateInterpolator 和 factor = 3 like

```
<?xml version="1.0" encoding="utf-8"?>
<decelerateInterpolator xmlns:android="http://schemas.android.com/apk/res/android"
    android:factor="3" /> 
```

我从 增加持续时间`500 -> 750`。它运行良好（与 iOS 非常相似）。但是，它只在某些设备上运行良好，在某些设备上动画很慢。后来，我知道不同设备上的动画可能会有所不同（例如：某些设备会更快，而某些设备会更慢）所以我不能让它在所有 Android 设备上都相似。因此我不使用`interpolator`. 我不知道我的测试是否准确 100%，但我希望这次经验对您有所帮助

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-15T19:37:12.340

# 这是给你的幻灯片动画。

[![在此处输入图像描述](../Images/7dc6600f9c17b57a40e02fd59b60795e.png)](https://i.stack.imgur.com/wPT7l.gif)

假设您有两个活动。

1.  MovieDetailActivity
2.  AllCastActivity

点击一个按钮，就会发生这种情况。

[![在此处输入图像描述](../Images/975a2e5cf83e1c7a3d105bd1bc87f572.png)](https://i.stack.imgur.com/9Wkaz.png)

## 您可以通过 3 个简单的步骤实现此目的

**1) 启用内容转换**

转到您的`style.xml`并添加此行以启用内容转换。

```
<item name="android:windowContentTransitions">true</item> 
```

**2) 为您的 AllCastActivity 编写默认进入和退出转换**

```
public void setAnimation()
{
    if(Build.VERSION.SDK_INT>20) {
        Slide slide = new Slide();
        slide.setSlideEdge(Gravity.LEFT);
        slide.setDuration(400);
        slide.setInterpolator(new AccelerateDecelerateInterpolator());
        getWindow().setExitTransition(slide);
        getWindow().setEnterTransition(slide);
    }
} 
```

**3）有意图地开始活动**

在 Your 中编写此方法`MovieDetailActivity`以启动`AllCastActivity`

```
public void startActivity(){

Intent i = new Intent(FirstActivity.this, SecondActivity.class);
i.putStringArrayListExtra(MOVIE_LIST, movie.getImages());

  if(Build.VERSION.SDK_INT>20)
   {
       ActivityOptions options = ActivityOptions.makeSceneTransitionAnimation(BlankActivity.this);
       startActivity(i,options.toBundle());
   }
   else {
       startActivity(i);
   }
} 
```

## 最重要的！

将您的方法放在`setAnimation()`方法之前，`setContentView()`否则动画将不起作用。
所以你`AllCastActivity.java`应该看起来像这样

```
 class AllCastActivity extends AppcompatActivity {

   @Override
   protected void onCreate(Bundle savedInstaceState)
   {
      super.onCreate(savedInstaceState);

      setAnimation();

      setContentView(R.layout.all_cast_activity);

      .......
   }

   private void setAnimation(){

      if(Build.VERSION.SDK_INT>20) {
      Slide slide = new Slide();
      slide.setSlideEdge(Gravity.LEFT);
      ..........
  }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-10-27T18:20:37.783

科特林示例：

```
 private val SPLASH_DELAY: Long = 1000

    internal val mRunnable: Runnable = Runnable {
        if (!isFinishing) {
            val intent = Intent(applicationContext, HomeActivity::class.java)
            startActivity(intent)
            overridePendingTransition(R.anim.slide_in, R.anim.slide_out);
            finish()
        }
    }

   private fun navigateToHomeScreen() {
        //Initialize the Handler
        mDelayHandler = Handler()

        //Navigate with delay
        mDelayHandler!!.postDelayed(mRunnable, SPLASH_DELAY)

    }

    public override fun onDestroy() {

        if (mDelayHandler != null) {
            mDelayHandler!!.removeCallbacks(mRunnable)
        }

        super.onDestroy()
    } 
```

将动画放在 anim 文件夹中：

幻灯片输入.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="@android:integer/config_longAnimTime"
        android:fromXDelta="100%p"
        android:toXDelta="0%p">
</translate> 
```

幻灯片输出.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="@android:integer/config_longAnimTime"
        android:fromXDelta="0%p"
        android:toXDelta="-100%p">
</translate> 
```

用法

```
 navigateToHomeScreen(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-10T13:15:57.060

您可以使用`overridePendingTransition`in`startActivity`代替`onCreate`. 至少，这对我有用！

[在此处](https://stackoverflow.com/questions/39711666/activity-navigation-custom-animation-with-popenter-and-popexit-like-fragments)查看完整示例。它包括一个（反向）动画 onBackPressed，所以在返回上一个活动时！在您的特定示例（淡入和淡出）中，这可能是不必要的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-19T10:52:27.137

希望它对你有用。

```
startActivityForResult( intent, 1 , ActivityOptions.makeCustomAnimation(getActivity(),R.anim.slide_out_bottom,R.anim.slide_in_bottom).toBundle()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-01T03:59:37.353

通过调用 overridePendingTransition 并为进入和退出活动传递动画资源，可以将幻灯片动画应用于活动转换。

幻灯片动画可以向右滑动、向左滑动、向上滑动和向下滑动。

**向上滑动**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator">
    <scale
        android:duration="800"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:toXScale="1.0"
        android:toYScale="0.0" />
</set> 
```

**滑下**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator">
    <scale
        android:duration="800"
        android:fromXScale="1.0"
        android:fromYScale="0.0"
        android:toXScale="1.0"
        android:toYScale="1.0" />
</set> 
```

overridePendingTransition(R.anim.slide_down, R.anim.slide_up);

有关更多活动转换示例，请参阅[活动转换动画](http://www.zoftino.com/android-activity-transition-animation-examples)示例。

# c# - 运行 Excel 加载项时，如果我之前的运行以断点结束，我总是会收到错误消息

> ID：10243558
> 
> 赞同：2
> 
> 时间：2012-04-20T09:28:41.540
> 
> 标签：c#, visual-studio-2010, excel, add-in, ribbon

我是第一次制作功能区插件。

有时，当我从 VS10 运行和启动 Excel 时，我会收到此错误/警告。

" `Excel experienced a serious problem with the 'exceladdin1' add-in. If you have seen this message multiple times, you should disable this add-in and check to see if an update is available. Do you want to disable this add-in?`"（我总是回答不，但还是很烦人）

最近几天我以为我是随机得到的，但在写这个问题之前我做了 ekstra 测试。

我发现如果我之前的运行遇到断点，我总是会收到错误/警告。我觉得很奇怪，不应该是这样的。有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:00:32.623

如果您从 Visual Studio 中停止调试会话而不是关闭 excel，您应该会收到此消息。通过从 VS 停止会话，您可以杀死 excel，excel 会在下次启动时注意到这一点，甚至可以确认您的插件正在运行，因此建议禁用它。

# android - 什么方法可以捕获在自定义视图（布局）中选择的上下文菜单项？

> ID：10243559
> 
> 赞同：2
> 
> 时间：2012-04-20T09:28:42.927
> 
> 标签：android, android-layout, contextmenu, android-linearlayout, android-context

我有扩展 LinearLayout 的自定义视图

```
public class IntelligentComponent extends LinearLayout implements OnCreateContextMenuListener{ 
```

我已经覆盖了 onCreateContextMenu 来创建上下文菜单，但我找不到 onConextItemSelected 方法来捕获所选项目。

> IntelligentComponent 类型的 onConextItemSelected(MenuItem) 方法必须覆盖或实现超类型方法

我应该使用什么方法？有某种听众吗？

我像这样创建我的菜单：

```
 @Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
      if (v != this) return;
      menu.add(Menu.NONE, ValueType.SPEED.ordinal(), 0 , ValueType.SPEED.name());
      menu.add(Menu.NONE, ValueType.HEARTRATE.ordinal(), 1 , ValueType.HEARTRATE.name());
      menu.add(Menu.NONE, ValueType.DISTANCE.ordinal(), 2 , ValueType.DISTANCE.name());
      //v.setO
} 
```

另外我没有使用 registerForContextMenu 方法，有问题吗？菜单显示正常，但我无法捕捉到项目选择事件。
感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:49:17.713

这可能是一个愚蠢的答案，但是您是否修复了方法名称中的错字？

# android - Android中的复杂视图动画

> ID：10243560
> 
> 赞同：0
> 
> 时间：2012-04-20T09:28:51.733
> 
> 标签：android, android-animation, android-view

在我的 android 应用程序中，我想显示动画以使视图从其位置弹出

更详细地说，我想实现这样的目标 -

*   单击视图（这可以是任何类型的视图，比如 ImageView），它将移向屏幕顶部
*   一定距离后，它会再次移动到屏幕中心，同时稍微放大

我对 Android 中的 Animation 类、Animation Listener 和 AnimationSet 知之甚少。但仍在寻求实现此功能的指南

您能否建议实现这一目标的方法？

编辑部分 -

主要问题是在移动到顶部后获得正确的视图坐标，下一个问题是将该视图从最后一个位置带到屏幕中心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:02:00.077

following code will have an animation - which will move down and come to middle with zoom effect

```
 @Override
    public void onClick(final View view) {
        TranslateAnimation translateAnimation1 = new TranslateAnimation(
                TranslateAnimation.RELATIVE_TO_PARENT,
                0.0f,
                TranslateAnimation.RELATIVE_TO_PARENT,
                0.8f,
                TranslateAnimation.RELATIVE_TO_PARENT,
                0.0f,
                TranslateAnimation.RELATIVE_TO_PARENT,
                0.8f);
        translateAnimation1.setDuration(1000);
        translateAnimation1.setAnimationListener(new Animation.AnimationListener() {
            @Override
            public void onAnimationStart(Animation arg0) {}
            @Override
            public void onAnimationRepeat(Animation arg0) {}
            @Override
            public void onAnimationEnd(Animation arg0) {
                TranslateAnimation translateAnimation2 = new TranslateAnimation(
                        TranslateAnimation.RELATIVE_TO_PARENT,
                        0.8f,
                        TranslateAnimation.RELATIVE_TO_PARENT,
                        0.5f,
                        TranslateAnimation.RELATIVE_TO_PARENT,
                        0.8f,
                        TranslateAnimation.RELATIVE_TO_PARENT,
                        0.5f);
                translateAnimation2.setDuration(1000);
                AnimationSet animationSet = new AnimationSet(false);
                ScaleAnimation scaleAnimation = new ScaleAnimation(1.0f, 2.0f,1.0f,2.0f,ScaleAnimation.RELATIVE_TO_SELF ,0.5f,ScaleAnimation.RELATIVE_TO_SELF,0.5f);
                scaleAnimation.setDuration(1000);
                animationSet.addAnimation(scaleAnimation);
                animationSet.addAnimation(translateAnimation2);
                view.startAnimation(animationSet);

            }
        });
        view.startAnimation(translateAnimation1);
    } 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:15:41.373

尝试这个，

```
ScaleAnimation animScale = new ScaleAnimation(0, 2, 0, 5);
animScale.setDuration(2000);
AnimationSet animation = new AnimationSet(false);
animation.addAnimation(animScale);
view.startAnimation(animation); 
```

更改 ScaleAnimation 构造函数中的值以获得所需的输出

# google-maps-api-3 - 当动画标记距离目的地 1 公里时如何自动缩放地图

> ID：10243562
> 
> 赞同：0
> 
> 时间：2012-04-20T09:28:56.777
> 
> 标签：google-maps-api-3

我正在使用谷歌地图 v3 动画，我有一个问题

这是我的示例[http://gidzior.net/map/v3_animate_marker_directions.html](http://gidzior.net/map/v3_animate_marker_directions.html)（我在输入中使用占位符），GM 代码来自这里

当动画标记距离目的地 1 公里时如何自动缩放地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:38:15.337

创建一个新的全局变量`zoomed`
将以下内容添加到`function animate(d)`：

```
if (d>eol-1000 && zoomed!=true) {
  map.setZoom(14); // or whatever value
  zoomed=true;
} 
```

使用简单标志而不是测试`map.getZoom()`的原因是因为该函数调用会更慢，所以我们不想在`getZoom()`每个动画步骤中调用。请注意，如果在动画继续时需要加载图块，则执行缩放可能会出现问题。

# database - 从 Windows Azure 中访问 SQLServer

> ID：10243567
> 
> 赞同：1
> 
> 时间：2012-04-20T09:29:04.533
> 
> 标签：database, azure, servicestack

我正在与我的几个朋友在 Windows Azure 上使用 ServiceStack 为我们的服务创建一个 RESTful API 的项目。我们使用 SQLAzure 保存用户提供的空间数据，然后我们的服务查询数据库，执行一些计算，然后返回位置或索引。我正在起诉我的同事为与数据库进行通信而写的图书馆。配置设置存储在 Web.config 中。当我在本地和 Azure 模拟器上测试服务时，一切正常，但是一旦我们的代码上传并运行，它就会在尝试连接到我们的 SQLAzure 服务器时不断抛出异常。是否需要包含任何特殊配置设置才能使实例能够连接？我已经将本地服务例外添加到防火墙规则中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:48:35.660

之前引起我注意的一件事是“网络配置转换”，我正在更新我的 web.config 连接字符串，但没有更新发布模式的 web.config 转换，这花了我一整天的时间来诊断，很痛苦！

# actionscript-3 - 使用 AS 录制声音并保存

> ID：10243571
> 
> 赞同：0
> 
> 时间：2012-04-20T09:29:38.187
> 
> 标签：actionscript-3, apache-flex, adobe, flash, mxml

如何从麦克风录制声音并从以下代码中保存

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import flash.events.SampleDataEvent; 
        import flash.media.Microphone;
        import flash.net.FileReference;
        import mx.controls.Alert;
        import flash.net.FileReference;

        [Bindable] private var microphoneList:Array;
        protected var microphone:Microphone;
        protected var isRecording:Boolean = false;
        protected function setupMicrophoneList():void
        { 
            microphoneList = Microphone.names; 
        } 
        protected function setupMicrophone():void 
        {       
            microphone = Microphone.getMicrophone(comboMicList.selectedIndex);
        } 
        protected function startMicRecording():void 
        { 
            Alert.show("In recording");
            isRecording = true;
            Alert.show("In recording1");
            microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
            Alert.show("In recording22");
        }
        protected function stopMicRecording():void 
        { 
            isRecording = false;
            microphone.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
        } 
        private function gotMicData(micData:SampleDataEvent):void 
        { 
            Alert.show("In mic data");
            // micData.data contains a ByteArray with our sample. }
            try{
            var file:FileReference = new FileReference();
            file.save(micData.data ,"Testsound.flv");
            }
            catch(e:Error)
            {
                Alert.show("In gotomicdataexception"+e);
            }
        }

        ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<mx:ComboBox x="150" id="comboMicList" dataProvider="{microphoneList}" />
<mx:Button x="250" id="startmicrec" label="Start Rec" click="startMicRecording()"/>
<mx:Button x="350" id="stopmicrec" label="Stop Rec" click="stopMicRecording()"/> 
<mx:Button x="50" id="setupmic" label="Select Mic" click="setupMicrophone()"/>
<mx:Button x="450" id="playrecsound" label="Play sound" click="playbackData()"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:46:41.027

这是您更新的代码，可让您在录制文件后保存文件。但无论如何，您需要将 bytearray 编码为 wav 或 mp3 等格式：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600"
               creationComplete="this_creationCompleteHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            [Bindable] private var microphoneList:Array;
            protected var microphone:Microphone;
            protected var isRecording:Boolean = false;
            private var soundBytes:ByteArray = new ByteArray();
            protected function setupMicrophoneList():void
            { 
                microphoneList = Microphone.names; 
            } 
            protected function setupMicrophone():void 
            {       
                microphone = Microphone.getMicrophone(comboMicList.selectedIndex);
            } 
            protected function startMicRecording():void 
            { 
                trace("In recording");
                isRecording = true;
                trace("In recording1");
                microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
                trace("In recording22");
            }
            protected function stopMicRecording():void 
            { 
                isRecording = false;
                microphone.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
                saveMicData();
            } 

            private function saveMicData():void
            {
                trace("In mic data");
                // micData.data contains a ByteArray with our sample. }
                try{
                    var file:FileReference = new FileReference();

                    file.save(/*You need encoded soundBytes here*/soundBytes ,"Testsound.wav");
                }
                catch(e:Error)
                {
                    trace("In gotomicdataexception"+e);
                }
            }

            private function gotMicData(event:SampleDataEvent):void 
            { 
                while(event.data.bytesAvailable)
                {
                    var sample:Number = event.data.readFloat();
                    soundBytes.writeFloat(sample);
                }
            }

            private function playbackData():void
            {

            }

            protected function this_creationCompleteHandler(event:FlexEvent):void
            {
                setupMicrophoneList();
            }

        ]]>
    </fx:Script>
    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <mx:ComboBox id="comboMicList" dataProvider="{microphoneList}" />
    <mx:Button id="setupmic" label="Select Mic" click="setupMicrophone()"/>
    <s:HGroup>
        <mx:Button id="startmicrec" label="Start Rec" click="startMicRecording()"/>
        <mx:Button id="stopmicrec" label="Stop Rec" click="stopMicRecording()"/> 
        <!--<mx:Button id="playrecsound" label="Play sound" click="playbackData()"/>-->
    </s:HGroup>
</s:Application> 
```

# node.js - 使用 mongoose mongodb nodejs 通过索引变量增加数组中的值

> ID：10243572
> 
> 赞同：2
> 
> 时间：2012-04-20T09:29:38.593
> 
> 标签：node.js, mongodb, mongoose

我有一个数字数组：

```
readersNum : {type: [Number], default: []}, 
```

我想将**indexVariable**中的值增加1。

这有效：

```
Posts.update({"readerID":readerID},{$inc:{"readersNum.0":1}},{upsert:true,safe:true},
              function(err){
                  console.log(err);
              }); 
```

但问题是我的值不在特定（常量）索引中它是一个变量..假设索引变量是`indexVariable`而不是0，我应该如何增加它？

我也试过这个：

```
Posts.findOne({"readerID":readerID },['readersNum'],function(err, readerID){
    readerID.readersNum[indexVariable] = readerID.readersNum[indexVariable]+1;
    try { 
        Posts.save(readerID,function(err) {
        if (err) {
            console.log("ERROR while saving reader num: " + err);
        }
        else {
            console.log('saved reader num successfully');           

        }
        });
    }
    catch(e){
        console.log("ERROR while saving reader num: " + e);
    }
    }); 
```

执行上面的代码会在控制台中打印更改的值并“成功保存阅读器编号”，但数据库中的值保持不变！如果有人能告诉我我做错了什么，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:53:43.460

假设您知道索引，您可以这样做：

```
var update = {};

update['readersNum.' + index] = 1; // update now has property like `readersNum.3`

Posts.update({"readerID":readerID},{$inc: update},{upsert:true,safe:true}, function(err){ console.log(err); }); 
```

# jquery - Jquery Mobile - 检测页面刷新 - 返回首页

> ID：10243573
> 
> 赞同：5
> 
> 时间：2012-04-20T09:29:44.007
> 
> 标签：jquery, jquery-mobile

是否可以在 Jquery 移动 HTML5 页面中检测页面刷新？

我正在构建一个测验作为客户端项目的一部分 - 测验在一个 html 页面中通过 jquery 移动 div 页面导航。例如，如果用户在 index.html#quizpage3 上并刷新我想检测刷新和将导航返回到 index.html。

这可能吗？

干杯保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:54:26.813

这是我正在使用的解决方案。在撰写本文时， tt 似乎工作正常，因此可能会对某人有所帮助。但是，这只是一个快速修复，为了获得更好的功能，最好在服务器端进行。

首先；请注意，此代码位于 JQM 代码之前。（来自 JQM 网站：因为 mobileinit 事件是立即触发的，所以您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。”）。我们获得了当前页面的哈希值，但我们不想刷新某些页面主页之类的页面。

```
<script type="text/javascript">
        var needRedirect = false;
        $(document).bind("mobileinit", function(){
            var thisPage = location.hash;
            if (thisPage != '' && thisPage != '#homepage' && thisPage != '#page1') {
                needRedirect = true;
            }
        });
    </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

然后在您自己的代码开始时：

```
if (needRedirect) {
    $.mobile.changePage("#homepage");
    needRedirect = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T00:35:11.957

我的答案与 Patch 的类似，但我所做的只是将以下内容添加到我本地引用的 js 文件顶部的 $(document).ready 行之前。您还可以将它添加到我相信的标题中的任何位置的 HTML 脚本标记中。

```
if (location.hash != "" && location.hash != "pageHome") {
    var url = location.href;
    url = url.replace(location.hash,"");
    location.replace(url);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:15:42.780

好吧，这是一个开始，每次您导航到另一个页面时，您都应该获得刷新控制台日志：

*   [http://jsfiddle.net/nkZQQ/5/](http://jsfiddle.net/nkZQQ/5/)

JS

```
$("div:jqmData(role='page')").live('pagehide',function(){
    console.log('page refreshed, redirect to home');
    $.mobile.changePage( "#home", { transition: "slideup"} );
});​ 
```

HTML

```
<div data-role="page" id="home">
    <div data-role="content">
        Hello Refresh
        <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="f">
            <li data-role="list-divider">Home</li>
            <li><a href="#page2">Page 2</a></li>
        </ul>
    </div>
</div>

<div data-role="page" id="page2" data-theme="a">
    <div data-role="content">
        Hello Page 2
        <ul data-role="listview" data-inset="true" data-theme="a" data-dividertheme="a">
            <li data-role="list-divider">Page 2</li>
            <li><a href="#home">Home</a></li>
        </ul>
    </div>
</div>​ 
```

也许另一个事件会更好：

*   [http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T09:00:19.083

我有点晚了，但我按照 Patch 的想法创建了一个非常简单的解决方案。在 $(document).ready() 之前将其放入脚本标记或 JS 文件中

```
checkPage();

function checkPage() {
    var _hash = location.hash;

    if (_hash != '' && _hash != "#home") {
        var _url = location.href.replace(_hash, "");
        window.location.href = _url;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T10:20:31.840

您可以在您的`$(function() {});`方法中获取 URL（仅在页面加载时运行），如果它包含**#**则重定向到主页。

*编辑：或`window.onload = function ...`用作纯 JS 替代品。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-15T03:18:41.477

我想，这更简单

```
$(document).on("pagebeforeshow", function() {
    window.location = "page";
}); 
```

# javascript - jquery如何检查url是否包含单词？

> ID：10243576
> 
> 赞同：12
> 
> 时间：2012-04-20T09:29:47.410
> 
> 标签：javascript, jquery

我希望能够检查 url 是否包含单词 catalogue。

这就是我正在尝试的...

```
 $(document).ready(function () {
        if (window.location.href.indexOf("catalogue"))
        {
            $("#trail").toggle();
        }
    }); 
```

该网站的网址可能是..

```
http://site.co.uk/catalogue/ 
```

或者

```
http://site.co.uk/catalogue/2/domestic-rainwater.html 
```

等等

但它不起作用。有人可以指出我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-20T09:32:32.760

尝试：

```
if (window.location.href.indexOf("catalogue") > -1) { // etc 
```

indexOf 不返回真/假，它返回搜索字符串在字符串中的位置；如果未找到，则为 -1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-22T17:02:07.840

鉴于 OP 已经在寻找布尔结果，另一种解决方案可能是：

```
if (~window.location.href.indexOf("catalogue")) {
    // do something
} 
```

波浪号 ( `~`) 是按位 NOT 运算符，执行以下操作：

`~n == -(n+1)`

简单来说，上面的公式将 -1 转换为 0，使其为假，其他任何东西都变为非零值，使其为真。因此，您可以将 的结果`indexOf`视为布尔值。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#(Bitwise_NOT)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#(Bitwise_NOT))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-09T12:20:34.607

您可以简单地使用includes()。请参考以下代码。

```
$(document).ready(function () {
    if(window.location.href.includes('catalogue')) {
        $("#trail").toggle();
    }
}); 
```

# android - 使用设备的内存

> ID：10243579
> 
> 赞同：0
> 
> 时间：2012-04-20T09:29:56.370
> 
> 标签：android

我可以使用内部存储器来存储您的应用程序文件吗？换句话说，当突然，设备将没有 SD 卡。特别是，我需要在那里创建一个文件夹，稍后我将在其中复制您的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:49:12.547

利用：

```
String packagePath = "/data/"+getApplicationInfo().packageName+"/<your folder name>" 
```

将在应用程序的包中创建一个文件夹。其他应用程序将无法访问此文件夹，因此它是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:55:47.537

```
String path=context.getFilesDir().getAbsolutePath()+"/filename"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:35:55.380

```
path =/data/data/your.package.name/

ex: path =/data/data/com.pack1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:41:06.377

是的，当然，您可以使用内部存储器来存储目的。但根据我的观点，你不应该使用它，因为某些设备的内部存储器非常少。

# asp.net-mvc - OrderBy 的 Lambda 表达式

> ID：10243582
> 
> 赞同：1
> 
> 时间：2012-04-20T09:30:01.907
> 
> 标签：asp.net-mvc, linq, lambda

```
///  Model
public class MenuModels
{
    public Int32 MenuId { get; set; }
    public string MenuName { get; set; }
    public Int32 MenuLevel { get; set; }
    public Int32 MenuParent { get; set; }
    public string MenuUrl { get; set; }
}

///    In my Controller I have this code
Menus = menuRepository.GetAll().OrderBy(y=>y.menu_id+y.menu_parent+y.menu_level).ToList() 
```

我想通过 3 个字段（id、parentId、level）的总和按升序获取所有菜单。

或者连接 2 个字段（id，parentId）

```
menuRepository.GetAll().OrderBy(y=>int.parse(y.menu_id.ToString+y.menu_parent.ToString)).ToList() 
```

基本上我创建了一个菜单创建控制器，因为我有一个下拉列表来填充所有菜单，但我想在下拉列表中填充菜单

```
Home
--submenu1
--submenu2
Contact
--submenu1
--submenu2 
```

为此，我在下面编写了代码

```
 var menuModel = new MenuModels()
        {
            Menus = menuRepository.GetAll().ToList().Select(x =>
                           {
                               var level = x.menu_level;
                               return (level == 0)
                                          ? new SelectListItem {Text = x.menu_name, Value = x.menu_id.ToString()}
                                          : new SelectListItem {Text = "-- "+x.menu_name, Value = x.menu_id.ToString()};
                           })
         };
        return View(menuModel); 
```

但这并没有给我我的期望，我知道为什么，在数据库中我有类似的表

```
id   level   parent   name
---------------------------
1    0       0        Home
2    0       0        About
3    1       1        submenu1
4    1       1        submenu2
5    1       2        submenu1 
```

我为此进行了 sql 查询以更好地理解我的问题

```
select *,( Convert(nvarchar(50),(case when menu_parent=0 then menu_id else menu_parent end))  + '' +  Convert(nvarchar (50),(menu_parent)))
 as Sort from menu order by Sort,menu_id 
```

这个查询结果像

```
id   level   parent   name      Sort
------------------------------------
1    0       0        Home       10
3    1       1        submenu1   11
4    1       1        submenu2   11
2    0       0        Abount     20
5    1       2        submenu1   22 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:41:49.253

利用

```
menuRepository.GetAll().
        select(y= new MenuDatastructure() 
        {
            //rest of the properties like menuid,menuName etc,
            sortColumn = //concat the fields to get sort column like 10,11,11,20,22
        }
        ).OrderBy(y=>y.sortColumn).ToList() 
```

# c# - 控制通过服务运行的应用程序实例的数量

> ID：10243584
> 
> 赞同：0
> 
> 时间：2012-04-20T09:30:16.680
> 
> 标签：c#, .net, windows, service

我有一个 Windows 服务，它监视正在创建的新文件的文件夹。放入文件后，该服务将启动另一个应用程序，将此文件路径作为参数发送。

我正在寻找一种方法来控制 Windows 服务可以生成的第二个应用程序的实例数量，例如，如果有一种方法可以设置只生成第二个应用程序的 5 个实例。

我曾尝试在第二个应用程序中使用值为 1 的信号量，但这会使第二个应用程序在删除多个文件时一次执行一个文件，但 Windows 服务将实例数作为文件数启动在热文件夹中。我不想打扰第二个应用程序并想从中删除信号量。

Windows 服务和第二个应用程序都是 .NET 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:11:20.320

如果您可以使用信号量，您是否尝试将其初始值设置为 5？这将允许在信号量阻塞之前对信号量进行 5 次并发访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:36:01.457

Quick & Dirty：使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类并监控具有特定名称的进程数量。您可以订阅 Process.Exited 事件或只是循环轮询。

正确的解决方案：使用基于[WCF](http://www.switchonthecode.com/tutorials/wcf-tutorial-events-and-callbacks)的 IPC 并在服务和客户端之间创建握手

# html - HTML解析：如何从远程站点获取链接标签

> ID：10243585
> 
> 赞同：0
> 
> 时间：2012-04-20T09:30:20.217
> 
> 标签：html, objective-c, xml, xcode, parsing

我有一个包含链接标签的网站（例如[apple.com](http://www.apple.com/)），例如

```
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://images.apple.com/main/rss/hotnews/hotnews.rss" /> 
```

那么我如何从中获取标题“RSS”和href？

**更新 1：** 我尝试使用将网站转换为字符串

```
NSData *data = [NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://apple.com/"]] returningResponse:NULL error:NULL];
NSString *HTMLWithFeeds = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

但是我现在不知道该怎么办...

**更新 2：**

从我的帖子中不清楚，但另外应该在这个站点上找到 type="application/rss+xml" 的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:39:55.570

您可以尝试使用正则表达式

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<link.*?href="(.*?)".*?>"
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];

NSArray *matches = [regex matchesInString:string
                                  options:0
                                    range:NSMakeRange(0, [string length])];
for (NSTextCheckingResult *match in matches) {
     NSRange matchRange = [match range];
     NSRange firstHalfRange = [match rangeAtIndex:1];
     NSRange secondHalfRange = [match rangeAtIndex:2];
} 
```

Apples 文档中有一些关于如何进一步使用和访问匹配项的示例：

[https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

例如，像下面的正则表达式应该为 hrefs 做一些事情：

```
<link.*?href="(.*?)".*?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:35:22.307

如果你使用 jquery， $("link").attr("title"） --> print "RSS" $("link").attr("href") --> print http:// *****

如果要获取href 内容，请使用jquery ajax。$.get("http:// *** ", function(result){});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:34:51.077

使用该选项创建一个`NSXMLDocument`using 。然后，您可以导航以 开头的节点层次结构。或者，您可以使用 XPath，例如.`-initWithContentsOfURL:options:error:``NSXMLDocumentTidyHTML``-rootElement``[doc nodesForXPath:@"//link@title"]`

# ruby-on-rails - 在 Rails 3 中查询 belongs_to 关联中的列的最有效方法是什么？

> ID：10243587
> 
> 赞同：1
> 
> 时间：2012-04-20T09:30:24.043
> 
> 标签：ruby-on-rails, activerecord

在 Rails 3 应用程序中，我试图查找父关联中的列相等的记录是特定字符串。例如，类别名称 =“my_category”的帖子。

```
class Post
  belongs_to Category
end

class Category
  has_many Posts
end 
```

类别包含一个名称列，这是我可用于运行搜索的唯一数据。所以我不能直接在 category_id 上过滤。

什么是最有效的 Rails-y 方式来做到这一点。我尝试了几个看起来应该可行的选项，但没有！

```
Post.joins(:category).where('category.name'=>'my_category')
Post.joins(:category).where(:category=>{:name=>'my_category'})
Post.includes(:category).where('category.name'=>'my_category')
Post.includes(:categories).where('category.name'=>'my_category')
Post.includes(:category).where(:category=>{:name=>'my_category'}) 
```

我可以在两行中看到如何做到这一点

```
category=Category.where(:name=>"my_category")
Post.where(:category_id=>category) 
```

但我想知道我是否忽略了一些 Rails 魔法？对不起，如果这是一个菜鸟问题，我还在学习！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:06:30.983

```
Post.joins(:category).where( :categories => { :name => "my_category" } ) 
```

请注意，参数`:categories`在 WHERE 部分是复数形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:35:47.783

使用 has_many 关系给你的方法；

原文根据评论不正确

```
Category.where(:name => "my_category").posts 
```

已更正

```
Category.find_by_name("my_category").posts 
```

或者

```
Category.where(:name => "my_category").first.posts 
```

前提是您`category_id`在 Post 模型上有一个专栏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:07:21.340

@blackbird07 对@John Beynon 答案的评论是正确的。

你应该试试

```
Category.find_by_name("my_category").posts 
```

find_by 帮助器返回单个对象而不是数组。

# javascript - 在客户端重置 Web 表单

> ID：10243588
> 
> 赞同：0
> 
> 时间：2012-04-20T09:30:36.787
> 
> 标签：javascript, asp.net

我有一个带有 3 个文本框、一个复选框和一个重置按钮的网络表单。当我单击“重置”按钮时，我需要将它们重置为空值，并且我需要它是客户端操作。我为此尝试过的JS代码如下，但由于某种原因它不起作用。有什么帮助吗？

```
<code>
    <script type="text/javascript">
        function resetForm() {
            document.getElemenyById("<%=txtbox1.ClientID%>").value = "";
            return false;
        }

    </script>

    <asp:LinkButton ID="wbtnReset" runat="server" Text="RESET PAGE"     CssClass="stdHyperlink" Font-Bold="True" OnClientClick="javascript:return resetForm()"/>

</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:35:14.943

要使用 javascript 重置表单，您需要在表单对象上调用 reset 方法。

下面应该可以帮助你做你需要的。

```
<asp:LinkButton ID="wbtnReset" runat="server" Text="RESET PAGE" CssClass="stdHyperlink" Font-
Bold="True" OnClientClick="javascript:this.form.reset(); return false;"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:35:53.123

你不需要 JS。试试`<input type="reset" value="Reset Form">`或`<button type="reset">Reset Form</button>`。这不会删除所有数据，但会恢复表单的初始状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:39:18.983

试试下面的代码

```
<script type="text/javascript">
function resetForm() {
       document.getElemenyById("<%=txtbox1.ClientID%>").value = "";
}
</script>
<asp:LinkButton ID="wbtnReset" runat="server" Text="RESET PAGE"     CssClass="stdHyperlink" Font-Bold="True" OnClientClick="resetForm()" CausesValidataion = "false"/> 
```

如果您使用的是 .NET 4.0，您可以通过简单的方式完成此操作。使用**ClientIDMode="Static"**并在 javascript 中使用下面的行

```
document.getElemenyById("txtbox1").value = ""; 
```

希望能帮助到你

# facebook - 如何在粉丝页面上获取用户喜欢的数量

> ID：10243589
> 
> 赞同：3
> 
> 时间：2012-04-20T09:30:44.593
> 
> 标签：facebook

我想通过图形 api 或 FQL 获取粉丝页面上用户喜欢的总数，无论用户是否喜欢该粉丝页面上的评论、帖子或任何其他活动，计数应该是任何喜欢的，例如我喜欢 10 个活动（评论，其他用户帖子）在某个粉丝页面上，现在我想要的是通过图形 api 或 fql 在该页面上的喜欢计数，这将是 10。

在此先感谢或绝对感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:38:01.323

参考：[Facebook 开发文档页面](https://developers.facebook.com/docs/reference/api/page/)

使用图形 API [http://graph.facebook.com/19292868552](http://graph.facebook.com/19292868552) 将为您提供带有 ID 的页面的点赞数`19292868552`

**问题解答：**

`likes`是表中的列，`Page`其中包含一个页面的点赞数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:51:57.977

它非常简单，只需将您的 facebook id 即页面或相册或照片的特定 id 放入 URL 中的 FQL（Facebook 查询语言）：[https://api.facebook.com/method/fql.query?query=SELECT%20like_info %20FROM%20photo%20WHERE%20object_id=10151134287325803](https://api.facebook.com/method/fql.query?query=SELECT%20like_info%20FROM%20photo%20WHERE%20object_id=10151134287325803)

# unix - 在 FTP 中是否可以将文件从一个位置移动到另一个位置

> ID：10243590
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:30:45.953
> 
> 标签：unix, ftp

我正在创建一个从 FTP 获取平面文件并将文件加载到数据库中的进程。是的，我能够将所需文件从 FTP 复制到 Unix，但无法在 FTP 服务器中移动文件。

请协助。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:37:15.287

您可以使用`rename`带有完整路径的 FTP 命令来移动文件。例如

```
rename /old/path/yourfile.txt /new/path/yourfile.txt 
```

请参阅：[http ://www.webcom.com/help/ftp/rename.shtml](http://www.webcom.com/help/ftp/rename.shtml)

# php - 查找给定 IP 是否存在于 CIDR 中

> ID：10243594
> 
> 赞同：9
> 
> 时间：2012-04-20T09:31:01.493
> 
> 标签：php, codeigniter

我正在使用 $_SERVER['REMOTE_ADDR'] 获取试图访问我的站点的用户的 IP 地址。我的数据库中有不同的盒子，每个盒子都有不同的 IDS 和不同的 CIDR 条目。我想检查特定框的用户 IP 是否存在于任何 CIDR 中。如果存在，则允许他进入，否则不允许。假设用户IP是

```
127.0.0.1 
```

假设框 12 的 CIDR 条目是

```
192.168.1.20/27
192.168.0.10/32 
```

CIDR 条目存储在数据库的列中

如果他的 IP 在此范围内，则应允许他进入该站点，否则不允许。我想根据每个 CIDR 条目检查他的 ip。

请问有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T09:37:28.200

好的，请尝试按照以下 5 个简单步骤操作...

**1.**将您的 CIDR 存储到数组中（从数据库中读取它们；猜你知道如何获取它）

```
$cidrs = array(
  '192.168.1.20/27', 
  '192.168.0.10/32'
  ); 
```

**2.**获取用户IP（远程地址）

```
$user_ip = $_SERVER['REMOTE_ADDR']; 
```

**3.**增加这个功能

```
function IPvsCIDR($user_ip, $cidr) {
  $parts = explode('/', $cidr);
  $ipc = explode('.', $parts[0]);
  foreach ($ipc as &$v)
    $v = str_pad(decbin($v), 8, '0', STR_PAD_LEFT);
  $ipc = substr(join('', $ipc), 0, $parts[1]);
  $ipu = explode('.', $user_ip);
  foreach ($ipu as &$v)
    $v = str_pad(decbin($v), 8, '0', STR_PAD_LEFT);
  $ipu = substr(join('', $ipu), 0, $parts[1]);
  return $ipu == $ipc;
  } 
```

**4.**将用户的 IP 地址与**$cidrs进行比较**

```
$validaddr = false;
foreach ($cidrs as $addr)
  if (IPvsCIDR($user_ip, $addr)) {
    $validaddr = true;
    break;
    } 
```

**5.**决定如何处理用户

```
if ($validaddr) {
  echo "CORRECT IP ADDRESS";
  }
else {
  echo "INCORRECT IP ADDRESS";
  } 
```

而已！

这个函数是如何工作的。它将 CIDR 地址部分 (xxxx) 转换为二进制字符串并取前 N 位数字。然后它对用户的 IP 执行相同的工作并检查值是否匹配。

## 示例 2（从函数完成作业）

```
function testUserIP($user_ip, $cidrs) {
  $ipu = explode('.', $user_ip);
  foreach ($ipu as &$v)
    $v = str_pad(decbin($v), 8, '0', STR_PAD_LEFT);
  $ipu = join('', $ipu);
  $res = false;
  foreach ($cidrs as $cidr) {
    $parts = explode('/', $cidr);
    $ipc = explode('.', $parts[0]);
    foreach ($ipc as &$v) $v = str_pad(decbin($v), 8, '0', STR_PAD_LEFT);
    $ipc = substr(join('', $ipc), 0, $parts[1]);
    $ipux = substr($ipu, 0, $parts[1]);
    $res = ($ipc === $ipux);
    if ($res) break;
    }
  return $res;
  } 
```

## 用法：

```
$user_ip = $_SERVER['REMOTE_ADDR'];
$cidrs = array('192.168.1.20/27', '192.168.0.10/32'); 
if (testUserIP($user_ip, $cidrs)) {
  // user ip is ok
  }
else {
  // access denied
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T09:35:46.987

我使用这个功能已经有一段时间了：

```
<?php

/**
 * Returns TRUE if given IPv4 address belongs to given network, FALSE otherwhise
 *
 * @param string $str_ip IP address in '127.0.0.1' format
 * @param string $str_range Network and mask as '127.0.0.0/8', '127.0.0.0/255.0.0.0' or '127.0.0.1'
 * @return bool
 *
 * @version v2011-08-30
 */
function ip_belongs_to_network($str_ip, $str_range){
    // Extract mask
    list($str_network, $str_mask) = array_pad(explode('/', $str_range), 2, NULL);
    if( is_null($str_mask) ){
        // No mask specified: range is a single IP address
        $mask = 0xFFFFFFFF;
    }elseif( (int)$str_mask==$str_mask ){
        // Mask is an integer: it's a bit count
        $mask = 0xFFFFFFFF << (32 - (int)$str_mask);
    }else{
        // Mask is in x.x.x.x format
        $mask = ip2long($str_mask);
    }

    $ip = ip2long($str_ip);
    $network = ip2long($str_network);
    $lower = $network & $mask;
    $upper = $network | (~$mask & 0xFFFFFFFF);

    return $ip>=$lower && $ip<=$upper;
} 
```

* * *

**更新：**

> 实际上，就我而言，所有 CIDR 条目都在数据库中。如何检查具有所有 tose CIDR 条目的 IP，foreach 循环是否可以工作？

这取决于您有多少条目。PHP 循环适用于几个范围，但有 50 个范围意味着启动 50 个 SQL 查询！在这种情况下，您可能应该切换到数据库方法。例如，您可以将范围存储在两列（较低的 IP 地址和较高的 IP 地址）中。这样，您需要做的就是：

```
$sql = 'SELECT COUNT(1) AS belongs_to_at_least_one_range
    FROM ranges
    WHERE :remote_address BETWEEN lower_address AND upper_address
    LIMIT 1';
$params = array(
    'remote_address' => ip2long($_SERVER['REMOTE_ADDR']),
); 
```

（或者，如果需要，可以获取所有匹配项。）

> 你能解释一下这行代码吗`list($str_network, $str_mask) = array_pad(explode('/', $str_range), 2, NULL);`

```
explode('/', $str_range)
// Split the string at `/` characters

array_pad(explode('/', $str_range), 2, NULL);
// Fill with NULLs if we have less than 2 items

list($str_network, $str_mask) =
// Store first part in `$str_network` and second part in `$str_mask` 
```

# jquery - 无法让 div 停留在 div 的底部

> ID：10243595
> 
> 赞同：0
> 
> 时间：2012-04-20T09:31:12.670
> 
> 标签：jquery, css, html

示例代码

```
<section id="loadGallery" style="overflow:hidden;">

<?php foreach ($this->imgs as $p)  
{ ?>
<article>
<a href="<?= $C->SITE_URL ?>pics/<?= $p->pic_id ?>">
<img src="/uploads/<?= $p->img ?>"/>
</a>
</article>
<?php }?>

<div class="more" id="<?= $p->pic_id ?>">load more</div>

</section> 
```

文章有**浮动：左**和图像**高度：150px**

首先，我加载**11 个****imgs**，当单击 .more 时，获取最后一个 id 并加载更多 imgs **。**删除 .more div，然后用新的**.more** div更改它

目前，当 ajax 成功时，我正在使用**$('#loadGallery').append(e);**

问题是**.more** div 不在图像下方，而是在最后一个 img 旁边

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:34:40.947

您应该添加一个清除浮动的元素，以便重置浮动

```
<div style="clear:both;"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:39:58.853

`.more { clear: both; }`应该做的伎俩。我不建议将空标记用于清除/样式目的

# java - 2 个哈希的 Java 哈希

> ID：10243599
> 
> 赞同：6
> 
> 时间：2012-04-20T09:31:33.080
> 
> 标签：java, hashcode

我有两个对象列表，用户和产品

用户拥有产品，每个产品关联到 1 个用户

但是一个产品类型可以是多个并且由不同的用户拥有

*   用户： Ed, Rob
*   产品：古柯、雪碧(1)、雪碧(2)、啤酒
*   Ed 有 Coca and Sprites (1)、Rob Sprites (2) 和 Beer

我需要为每个唯一的（用户+产品）生成一个 ID

这可能不是一个好主意

```
user.hashCode() + product.hashCode() 
```

有什么好的方法可以继续？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T09:39:54.880

`hashCode`如果用户和产品都创建伪随机哈希码，你的情况还不错。如果您因为`user`或中的错误 hashCode 实现而担心哈希冲突`product`，则将源哈希码之一乘以素数：

```
public int hashCode() {
  final int prime = 31;
  int result = 1;
  result = prime * result + ((product == null) ? 0 : product.hashCode());
  result = prime * result + ((user == null) ? 0 : user.hashCode());
  return result;
} 
```

Eclipse 在选择*Source |时构建了这个非常代码。生成 hashCode() 和 equals()*。

正如 Thilo 所提到的，您也可以简单地使用`Arrays.hashCode(new Object[]{ user, product })`; 此调用处理`null`用户或产品的值，并将结果乘以 31 - 与手写代码相同。如果您使用的是 Google Guava，则可以`Objects.hashCode(Object...)`使用 varargs 让您的意图更加清晰，但它也仅代表`Arrays.hashCode`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T09:40:16.657

您可以让 Apache Commons [HashCodeBuilder](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html)为您完成工作。

它可以让你写类似

```
return new HashCodeBuilder(17, 37).
   append(user).
   append(product).
   toHashCode(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:39:17.740

一个常见的解决方案是将第一个散列乘以一个素数，然后加上第二个散列。

# oracle - 通过 LDAP / Oracle 表进行身份验证

> ID：10243604
> 
> 赞同：1
> 
> 时间：2012-04-20T09:31:49.333
> 
> 标签：oracle, authentication, frameworks, ldap, unboundid-ldap-sdk

我需要通过 LDAP 进行身份验证，并拥有一个包含用户名和散列密码的 Oracle 表。

是否可以让 LDAP 使用这些表？

我只想模拟一个`fake`LDAP。当客户端尝试登录时，服务器只需对密码进行哈希处理并将其与存储在数据库表中的密码进行比较。

只是它。是否有实现所有 LDAP 协议的框架。我只想让它调用我的 Java 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:43:38.610

您应该使用 UnboundID LDAP SDK。SDK 提供了一种机制，其中可以创建一个内存目录服务器，它就像一个真正的目录服务器（因为它是）。这是一个比模型更好的过程，因为内存服务器是一个成熟的服务器，没有所有的安装麻烦。完全兼容的服务器允许 LDAP 客户端测试真实的 LDAP 环境，这将产生更健壮的代码。

### 也可以看看

*   [内存目录服务器](http://ff1959.wordpress.com/2011/11/01/ldap-in-memory-directory-server-using-unboundid-ldap-sdk/)

# php - PHP 中的回发和 Subid 实现？

> ID：10243605
> 
> 赞同：1
> 
> 时间：2012-04-20T09:31:52.453
> 
> 标签：php

我正在实施一个新的回发和基于 subid 的脚本。研究了一下，发现了。开源[http://prosper.tracking202.com](http://prosper.tracking202.com)脚本。

但我无法理解这个系统是如何工作的？

我需要提取 Postback 和 Subid Mechanism。

# javascript - imagemap onMouseOver 解决方案

> ID：10243606
> 
> 赞同：3
> 
> 时间：2012-04-20T09:31:53.647
> 
> 标签：javascript, html, imagemap, onmouseover

我想用几个区域创建图像映射。

```
<img src="map.png" alt="map" usemap="#planetmap" />

<map name="planetmap" id="map">
  <area onMouseover="showtext('New York!')" 
        shape="circle" 
        coords="90,58,3" 
        href="#" alt="NY"/>
</map> 
```

我希望在克服形状时显示文本（如提示）。你能告诉我问题出在哪里吗？我找到了结合 css / javascript 的解决方案，但我更喜欢最简单的解决方案。

谢谢你。

朱拉伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:39:36.160

尝试这个

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; 
            charset=iso-8859-1" />
        <title>Map Document</title>
        <script type="text/javascript">
            function showtext(text){
                alert(text);
            }
         </script>
    </head>

    <body>
        <img src="map.png" width="145" height="126" alt="Map" 
             usemap="#planetmap" />

        <map name="planetmap" id="map">
            <area shape="circle" 
                  coords="90,58,3" 
                  alt="Venus" 
                  href="#" 
                  onmouseover="showtext('New York!')" />
        </map>
    </body>
</html> 
```

# jboss - 如何在两个不同的服务器上运行集群 JBoss

> ID：10243607
> 
> 赞同：0
> 
> 时间：2012-04-20T09:31:58.443
> 
> 标签：jboss

我有两台 linux 服务器，每台服务器上都有 JBoss。我需要在两台服务器上运行集群 JBoss。

我已经尝试以下命令在两台服务器上进行集群：

在服务器一上：

```
./run.sh -c all -g DocsPartition  -u 239.255.100.100 \ -b server1'sIP -Djboss.messaging.ServerPeerID=1 
```

在服务器二上：

```
./run.sh -c all -g DocsPartition  -u 239.255.100.100 \ -b server1's  -Djboss.messaging.ServerPeerID=2 
```

因此，执行这些命令后，它会显示如下消息：

> 06:11:28,688 INFO [ServerImpl] JBoss (Microcontainer) [5.1.1 (build: SVNTag=JBPAPP_5_1_1 date=201105171607)] 开始于 40s:289ms

这表明服务器已成功启动。**那么我如何检查 JBoss 是否是集群的呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:04:10.870

请登录`http://<ipaddress>:<port>/jmx-console`并查找以下参数， `org.jboss.ha.framework.server.ClusterPartitionMBean`其中包含一个名为 getCurrentView() 的方法，该方法返回形成集群的成员列表。它返回一个字符串向量，表示节点的主机：端口值

# java - Java Scanner 跳过一行破折号

> ID：10243608
> 
> 赞同：1
> 
> 时间：2012-04-20T09:32:04.263
> 
> 标签：java, regex, java.util.scanner

我有一个包含两列的文件，一列用于全名（名字和姓氏），另一列用于 ID 号。该文件还有一个带有“名称”和“ID”的标题，在标题下方和所有条目的上方，有一行由空格分隔的破折号。它看起来像这样：

```
NAME        ID
------      ------
John Snow   0001
Tyrion      0002 
```

我希望能够跳过这行破折号，我一直在尝试使用`Scanner.skip()`但无济于事。我已经在 while 循环中设置了一个正则表达式来分割列之间的空格，并设置了一个 if 语句来绕过列标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:40:22.390

您可以使用 a`BufferedReader`而不是 Scanner。它有一个 readLine() 方法，可以用来跳过那些破折号。

```
BufferedReader reader = new BufferedReader(... your input here...);
String s;
while((s=reader.readLine())!=null) {
   if (s.startWith("--")
       continue;
   // do some stuffs

} 
```

编辑：如果您想确保这些行仅包含破折号和空格，您可以使用：

```
s.matches("[\\- ]+") 
```

仅当您的行包含破折号和空格时才会匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:46:52.347

如果前两行总是静态的，试试这个 -

```
reader.readLine(); //reads first line, Name ID and does nothing
reader.readLine(); //reads second line, ---- ---- and does nothing
//start scanning the data from now.
while(!EOF){
String line = reader.readLine();
//process the data.
} 
```

通过这种方式，您可以消除将每一行与“--”进行比较的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:56:22.257

```
FileReader fileReader = new FileReader(//File with Exension);

Scanner fileScan = new Scanner(fileReader);

fileScan.useDelimiter("\\-")

while(fileScan.hasNext()){

   //Store the contents without '-'
   fileScan.next();
} 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T10:26:14.143

如果您已经在使用 Scanner，请尝试以下操作：

```
String curLine;

while (scan.hasNext()){
    curLine = scan.readLine();
    if(!curLine.startsWith("----") {
        .... //whatever code you have for lines that don't contain the dashes

    }
} 
```

# java - 浮点函数和双精度值

> ID：10243613
> 
> 赞同：2
> 
> 时间：2012-04-20T09:32:24.433
> 
> 标签：java, math

如何将楼层函数应用于浮点数或双精度值以获取整数。我从函数中得到了双精度值：4.4497083717E10 浮点值：4.4497084E10。我得到了作为双精度值的楼层值：4.4497083717E10 浮点值楼层：4.4497084416E10.Is有可能地板导致整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:42:21.677

> .有没有可能 floor 导致整数？

从类型的角度来看 - 不。 [`Math.floor`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#floor%28double%29)被声明为返回 a `double`，因此永远不会返回静态类型为`int`.

也就是说，该方法的文档声明返回值*等于*一个整数。因此，简单地将返回的结果转换为 an`int`将始终为您提供您期望的输出。

（也就是说，假设您的结果在范围内。A`double`可以容纳更大的数字，an`int`可以表示。请查看[Narrowing primitive conversions](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)了解技术细节。您可能需要对数据进行边界检查，以确保转换为 始终是明智的`int`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:11:02.557

4.4497083717E10 太大而不能成为`int`，您必须强制转换为`long`。

转换为 long 会保留 double 的整个部分，使其与`Math.floor`可以表示为 long 的值相同。IE

```
long l = (long) Math.floor(4.4497083717E10); 
```

是相同的

```
long l = (long) 4.4497083717E10; 
```

* * *

```
System.out.println((int) Math.floor(4.4497083717E10));
System.out.println((long) Math.floor(4.4497083717E10));
System.out.println((long) 4.4497083717E10); 
```

印刷

```
2147483647   -- due to an overflow
44497083717
44497083717 
```

# xml - 如何使用 XQuery 打印“<”和“>”？

> ID：10243615
> 
> 赞同：3
> 
> 时间：2012-04-20T09:32:26.980
> 
> 标签：xml, xquery, xquery-sql

例如

我正在使用动态数据创建一个元素 -

```
XQUERY
let $sttag:=  concat('<', '/')
return concat ($sttag, "newTag") 
```

上面的 XQuery 返回输出`&lt;/newTag`而不是`</newTag`.

有什么方法可以使用 xquery 打印“<”和“>”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:28:38.127

**这是构造元素的最动态方式的图示——名称在编译时是未知的，并且通常在每次执行时都不同**：

```
let $name := translate(concat('N', current-time()), ':','_')
  return
      element {$name} {} 
```

**产生**：

```
<N21_26_40.708-07_00/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:29:38.303

我推荐使用[XQuery 的元素构造函数](http://www.w3.org/TR/xquery/#id-constructors)。您可以使用[计算的元素构造函数](http://www.w3.org/TR/xquery/#id-computedConstructors)动态创建元素：

```
element book { 
    attribute isbn {"isbn-0060229357" }, 
    element title { "Harold and the Purple Crayon"},
    element author { 
        element first { "Crockett" }, 
        element last {"Johnson" }
    }
} 
```

结果是

```
<book isbn="isbn-0060229357">
    <title>Harold and the Purple Crayon</title>
    <author>
        <first>Crockett</first>
        <last>Johnson</last>
    </author>
</book> 
```

[（来自W3C XQuery 规范](http://www.w3.org/TR/xquery/)的示例）

在你的情况下，你可以使用

```
element newTag { ... } 
```

# php - 如何在计时器结束时从禁用我的提交按钮的 jquery 中保存表单状态？

> ID：10243620
> 
> 赞同：0
> 
> 时间：2012-04-20T09:32:39.300
> 
> 标签：php, javascript, jquery, state

我在我的网站上运行了一个 javascript，它会将计时器计时为零，然后显示一条消息并禁用我的提交按钮，以防止更多数据输入到我的数据库中。当计时器完成时，我可以禁用提交按钮，但是当重新加载页面时，它会启用提交按钮。我知道我需要保存表单状态，但是我不知道该怎么做？

这是我禁用的 javascript 的一部分

```
function CountBack(secs) {
if (secs < 0) {
document.getElementById("cntdwn").innerHTML = FinishMessage;
$("input[type=submit]").attr("disabled", "disabled");

return; 
```

这是我的表格

```
<form id="MakeBid" action="MakeBid.php" method="POST">
<input type="hidden" name="propertyID" value ="1"/>
<div>Bid Now <input type="text" name="pricesoldfor"/></div> 
<input id = "submit" input type="submit" value="Submit" /> 
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:39:24.403

您可以使用`.serialize()`jquery 的方法来存储表单的状态。然后你可以使用反序列化插件来反序列化（恢复）你的表单

[http://archive.plugins.jquery.com/project/deserialize](http://archive.plugins.jquery.com/project/deserialize)

存储您的表格

```
var formState = $("#MakeBid").serialize(); 
```

然后将其`formState`作为字符串存储在 cookie 中。重新加载页面后，您可以从 cookie 中读取 formState 并反序列化表单。

恢复形式：

```
$("#MakeBid").deserialize(formState ,
callback: function(name,value){
$('input[name="'+name+'"]').val(value);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:46:35.147

在您的 HTML 页面中包含此文件：[https ://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)

然后，在花费时间设置 cookie 之后： `$.cookie('block','1')`

在您的页面打开时，您可以使用以下命令激活或停用提交

```
jQuery(function($){
  if($.cookie('block'))
    $('#submit').attr("disabled","disabled");
}); 
```

但请记住，这种方法只是客户端，所以不要用它来保护你的网站，如果你想防止表单被发布，那就在服务器端做。

**编辑：**这里[是完整的解决方案](http://jsfiddle.net/ErkA3/)

```
var bidDuration = 10000
  , bidFinishedMessage = "C'est fini !!";

jQuery(function($){        
  var finishBid = function() {
    $("#submit").attr("disabled", "disabled");
    $("#cntdwn").html(bidFinishedMessage);
    $.cookie('blockBid','1');
  };

  if($.cookie('blockBid'))
    $('#submit').attr("disabled","disabled");

  setTimeout(finishBid, bidDuration);
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:13:04.760

您绝对应该在**服务器端**启用提交或不启用。如果提交了足够多的数据，在服务器端禁用表单并禁用监听，你就不用担心了。

伪代码示例：

```
If enough datas are in the database, don't write to it and leave the script
Else write normally, it means the countdown's not reached the end 
```

因为即使表单被禁用，我仍然可以启用它并向您发送一些数据。

**永远不要相信客户。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:58:22.413

我的建议：

1.  保持服务器上的状态。
2.  在将表单发送给客户之前，请检查是否允许他写入您的数据库。
3.  发送带有嵌入参数的表单，如`MyForm.noSubmit = true;`.
4.  可选 - 轮询服务器并检查它是否接受更多数据。

因此，假设您在服务器上有 PHP，您会得到如下*内容*：

```
var MyForm.noSubmit = <?php echo ($MyDB->acceptsData()) ? "false" : "true"; ?> 
```

或者

```
<input <?php if (!$MyDB->acceptsData()) {echo "disabled=\"disabled\"";} ?> /> 
```

当然取决于你的实施。

上述建议适用于页面重新加载。

# c# - 为什么是 Graphics.Clear(); 不能在 C# 中工作

> ID：10243631
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:33:38.470
> 
> 标签：c#, .net, winforms, system.drawing

我正在为我的 comp103 论文做一些修改，但我无法使用 Graphics.Clear(); 清除图形纸的方法。有人可以指出我的代码中的错误，因为我花了大约一个小时试图在网上找到答案。

很抱歉问了这样一个菜鸟问题。

这是代码：

```
namespace Week_4_Ex1
{
    public partial class Form1 : Form
    {
        const int height1 = 150; // A constant that stores the flags height
        const int width1 = 100; // A constant that stores the flags width

        public Form1()
        {
            InitializeComponent();
        }

        /// <summary>
        /// Button event that Draws a flag
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnDraw_Click(object sender, EventArgs e)
        {
            Graphics Paper = this.CreateGraphics(); // Creates graphics paper to draw on
            Brush br1 = new SolidBrush(Color.Blue); // Creates a blue brush to draw with
            Brush br2 = new SolidBrush (Color.Orange); // Creates a orange brush to draw with
            Brush br3 = new SolidBrush (Color.Red); // Creates a red brush to draw with

            Pen Pen1 = new Pen(Color.Blue);         // Creates a blue pen to draw with
            Pen Pen2 = new Pen(Color.Orange);       // Creates a orange pen to draw with
            Pen Pen3 = new Pen(Color.Red);          // Creates a red pen to draw with

            //The following code draws a flag
            Paper.DrawRectangle(Pen1, 10, 10, width1, height1); // Draws a blue rectangle
            Paper.FillRectangle(br1, 10, 10, width1, height1); // Fills the rectangle with blue
            Paper.DrawRectangle(Pen2, 110, 10, width1, height1); // Draws a blue rectangle
            Paper.FillRectangle(br2, 110, 10, width1, height1); // Fills the rectangle with blue
            Paper.DrawRectangle(Pen3, 210, 10, width1, height1); // Draws a blue rectangle
            Paper.FillRectangle(br3, 210, 10, width1, height1); // Fills the rectangle with blue

        }
        /// <summary>
        /// Button that closes the form
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnExit_Click(object sender, EventArgs e)
        {
            this.Close(); // Closes the form
        }

        /// <summary>
        /// Clears the picturebox
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnErase_Click(object sender, EventArgs e)
        {
            Graphics.Clear(); //**THIS DOESN'T WORK**
        }

    }
} 
```

干杯，拉布

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T09:40:39.417

尝试使用以下颜色的[Graphics.Clear](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.clear.aspx)方法。

```
this.CreateGraphics().Clear(Form1.ActiveForm.BackColor); 
```

# c# - 如何在 Ninject 中绑定泛型接口

> ID：10243632
> 
> 赞同：22
> 
> 时间：2012-04-20T09:33:40.917
> 
> 标签：c#, generics, dependency-injection, ninject, generic-interface

我对 Ninject 还很陌生，当我开始实现通用存储库模式时，我发现自己磕磕绊绊。我想将依赖**项 IRepository<IEntityType>**绑定到**ConcreteRepository<EntityType>**类，其中 ConcreteRepository<T> 实现 IRepository<T> 并且 EntityType 实现 IEntityType。我试过这个：

```
kernel.Bind<IRepository<IEntityType>>().To<ConcreteRepository<EntityType>>(); 
```

...但是 Ninject 不会接受，因为它不知道也不关心 EntityType 实现了 IEntityType。我该如何去绑定这个依赖？

**更新**

这是我得到的错误：

> 错误 3 类型“ICM.Dependency.Repository.ConcreteRepository”不能用作泛型类型或方法“Ninject.Syntax.IBindingToSyntax.To()”中的类型参数“TImplementation”。没有从“ConcreteRepository<EntityType>”到“IRepository<IEntityType>”的隐式引用转换。

**解决方案**

我仍然不太明白为什么我的绑定不起作用，但显然我在那里错误地使用了泛型。因此，该解决方案与 NInject 并不真正相关。我结束了指定 ConcreteRepository 以将 IEntityType 与 TEntityType 显式连接：

```
public class ConcreteRepository<TInterface, TEntity> : IRepository<TInterface> where TEntity : TInterface { ... } 
```

那么注入可以写成如下：

```
kernel.Bind<IRepository<IEntityType>>().To<ConcreteRepository<IEntityType,EntityType>>() 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-20T09:37:42.757

```
kernel.Bind(typeof(IRepository<>)).To(typeof(SimpleRepository<>)); 
```

如果你想在这里看看我的：http: [//blog.staticvoid.co.nz/2011/10/staticvoid-repository-pattern-nuget.html](http://blog.staticvoid.co.nz/2011/10/staticvoid-repository-pattern-nuget.html)我有绑定示例

编辑：

您得到的错误是说您的具体存储库不是您要绑定到的通用存储库的实例，即您需要这样做

```
public class ConcreteRepository<ConcreteEntity> : IRepository<IEntity>{} 
```

不是

```
public class ConcreteRepository<ConcreteEntity> : IRepository<ConcreteEntity>{} 
```

# objective-c - 用作全局变量的 AppDelegate 变量不起作用

> ID：10243635
> 
> 赞同：2
> 
> 时间：2012-04-20T09:33:53.527
> 
> 标签：objective-c, ios, xcode, class

我想使用我的 AppDelegate 来存储一个可以被任何其他类访问的对象。我已经像这样声明了这个 AppDelegate：

```
@interface MyAppDelegate : UIResponder <UIApplicationDelegate>
{
    MyClass *tracker;
}

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ICViewController *viewController;
@property (retain, nonatomic) MyClass *tracker;

@end 
```

我合成跟踪器并在应用程序中：didFinishLaunchingWithOptions：我在该对象中设置了一个 NSString，如下所示：

```
self.tracker = [[MyClass alloc] init];
self.tracker.testGlobal = @"global funguje"; 
```

当我需要在其他类的其他地方访问跟踪器时，我使用以下代码：

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];    
MyClass *trackerTEST = appDelegate.tracker;
NSLog(@"TEST : %@",trackerTEST.testGlobal); 
```

问题是 testGlobal 是 NULL。我究竟做错了什么？这里还有 MyClass 的类文件：

```
@interface MyClass : NSObject
{
    NSString *testGlobal;
}
@property (retain, nonatomic) NSString *testGlobal;
@end

@implementation MyClass
@synthesize testGlobal = _testGlobal;
@end 
```

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:20:43.763

也许我迟到了，但是，你可以看看[Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)。

> 在软件工程中，单例模式是一种用于实现单例数学概念的设计模式，通过将类的实例化限制为一个对象。当需要一个对象来协调整个系统的动作时，这很有用。这个概念有时被推广到当只有一个对象存在时运行效率更高的系统，或者将实例化限制为一定数量的对象。

这是一个 ObjC 实现：[http ://getsetgames.com/2009/08/30/the-objective-c-singleton/](http://getsetgames.com/2009/08/30/the-objective-c-singleton/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:10:43.930

通过添加一个来检查是否`application:didFinishLaunchingWithOptions:`被调用`NSLog(@"...")`。如果`trackerTEST`为 nil，则可能未正确初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:52:24.353

```
@interface MyAppDelegate : UIResponder <UIApplicationDelegate>
{
    MyClass *tracker;
}

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ICViewController *viewController;
@property (retain, nonatomic) MyClass *tracker;

@end 
```

为什么你有 @property 跟踪器和 var 跟踪器？

尝试`MyClass *tracker;`仅删除属性就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:04:07.300

更改并重`@synthesize testGlobal = _testGlobal;`试`@synthesize testGlobal;`。

# java - 如何使用 Play 转换 Java 对象以供 jqplot 使用！2.0？

> ID：10243636
> 
> 赞同：2
> 
> 时间：2012-04-20T09:34:00.953
> 
> 标签：java, javascript, json, jqplot, playframework-2.0

我对 Play 很陌生！2.0、Scala 和 JavaScript（或多或少），我尝试使用 jqPlot 将我查询的对象从数据库渲染到一些图表图形。

到目前为止，我有我的查询...

```
public static List<UserAction> thisYear() {
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy");
    return find.where().eq("YEAR(timestamp)", sdf.format(new Date())).findList();
} 
```

...和我的结果...

```
public static Result home() {
    List<UserAction> all = UserAction.all();
    List<UserAction> thisyear = UserAction.thisYear();
    return ok(index.render(all, thisyear));
} 
```

...所以我的数据在我的视野之内。后来我想要这样的东西（[带有 jqPlot 的日期轴示例](http://www.jqplot.com/tests/date-axes.php)）：

```
$(document).ready(function(){
  var line1=[['2008-09-30 4:00PM',4], ['2008-10-30 4:00PM',6.5], ['2008-11-30     4:00PM',5.7], ['2008-12-30 4:00PM',9], ['2009-01-30 4:00PM',8.2]];
  var plot1 = $.jqplot('chart1', [line1], {
    title:'Default Date Axis',
    axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer}},
    series:[{lineWidth:4, markerOptions:{style:'square'}}]
  });
}); 
```

所以我可能会用一些东西（一年中的几个月/动作计数）替换第一个数组。我必须为此使用 JSON，还是有其他/更简单的选择？

我根本不确定我是否遵循正确的方法。一些关于我应该如何进行的提示或向正确的方向稍微推动会非常有帮助。请询问是否缺少任何信息。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:17:04.897

我认为我的问题的解决方案相当简单，也许我应该为此使用 JSON（如果没有，请告诉我）。

[我](http://ketiljensen.wordpress.com/2010/04/26/create-good-looking-charts-with-play-flot-and-jquery/)会这样做。这是 Play 的一个例子！使用 Flot，我当然需要稍微改变它，因为不再有 renderJSON()，但我相信这会做到。

我将在测试后更新这篇文章。

# flash - 是否可以通过基于 nullsoft SHOUTCAST 的另一个网络服务器的 Flash .pls 广播文件进行播放？

> ID：10243639
> 
> 赞同：2
> 
> 时间：2012-04-20T09:34:13.637
> 
> 标签：flash, media-player, shoutcast

例如，在我的网站上，我想嵌入一些 Flash 播放器，它将播放来自 Shoutcast 网站的播放列表文件，例如：

```
http://91.121.31.188:8030/    ====> pls file ====> http://91.121.31.188:8030/listen.pls
http://garbagepanda.net/   
http://213.186.47.190:9000/listen.pls
http://199.16.186.34:8244/listen.pls 
```

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:58:31.610

绝对地。这就是通常的做法。将以下代码放入您的 ActionScript 中：

```
player = new Sound();
player.loadSound("http://91.121.31.188:8030/;", true); 
```

注意分号 ( `;`)... 如果你把它放在那里，你一定会得到流回来，而不是管理界面的 web 面板。另请注意，根据您运行此 Flash 对象的位置，您可能需要添加参数以避免缓存...`?nocache=982734987234`等。

最后，请注意 Flash 会将所有内容都加载到内存中。仅具有这两行代码的播放器在流播放时实际上存在内存泄漏。解决此问题的常用方法是创建两个声音对象，并定期在它们之间交叉淡入淡出。这些天来，您可能只需要每半小时或更长时间执行一次。对于内存较小的设备（Wii、Android 等），您必须每隔几分钟执行一次。

# javascript - 如何使用javascript记录两次按下按钮之间的响应时间（以秒为单位）

> ID：10243648
> 
> 赞同：1
> 
> 时间：2012-04-20T09:34:54.290
> 
> 标签：javascript, html

我需要 javascript 代码，这将允许我以秒为单位记录响应时间并输出结果（到文档，例如 task_times），以便按下数字开始和完成按钮。我有一个在线测试，其中包含 10 个简单的 html 问题页面，其中一个包装器居中并显示带有回答选项的问题。

一个开始按钮出现在一个新页面上，用户点击它会显示要回答的问题。当用户完成时，他按下 DONE 按钮为下一个问题移动一个新的开始页面。我想以秒为单位记录这些开始和完成按钮的按下时间，并将时间之间的差异写入文本文件（可能带有页面名称）

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:38:09.567

```
var start = Date.now();  
// do something
var end = Date.now();  
alert(end-start) 
```

请注意，如果您不希望您的用户篡改这些数据，您最好在服务器端计算时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T21:50:05.867

因为有人仍在寻求这个问题的答案......您需要将事件侦听器添加到“开始”和“完成”按钮并使用`new Date()`. [jsfiddle](http://jsfiddle.net/qXe8s/1/)

```
function E(id) {
    return document.getElementById(id);
}
E('startButton').addEventListener('click', function () {
    var startTime = new Date();
    E('startButton').style.display = 'none';
    E('hidden').style.display = 'block';
    E('doneButton').addEventListener('click', function() {
        document.body.innerHTML += 'Time taken (ms): '
            + (new Date() - startTime);
    });
}); 
```

在客户端 javascript 中，无法使用户无法看到文本文件；您需要将时间提交给服务器端脚本，该脚本将记录它并在某处输出文本文件。

# c++ - 最后一次 EOL 后如何删除文件内容？

> ID：10243653
> 
> 赞同：3
> 
> 时间：2012-04-20T09:35:10.387
> 
> 标签：c++, file, fstream

我有一些内部文件，只能附加到每个附加`\n`字符添加到文件之后。但从理论上讲，附加到文件可能会失败并损坏。这就是为什么每次打开文件时我都想在最后一个 EOL 之后寻找它的最后一个有效位置。此代码将执行此操作：

```
// Not using ios::app instead of ios::ate | ios::out because it will
// put print pointer to the EOF every time before writing.
fstream file(name.c_str(), ios::binary | ios::ate | ios::out | ios::in);
if(!file.is_open()) {
    cerr << "Error in oppening file " << name << endl;
    exit(EXIT_FAILURE);
} else {
    while(0 != file.tellp()) //if file is not empty
    {
        file.seekg(-1, ios_base::cur);
        if(0 == file.tellg() || file.get() == '\n') {
            break;
        }
        file.seekg(-1, ios_base::cur);
    }
    file.seekp(of.tellg());
}
//{1}
//Use file for appending to... 
```

但是如果应该附加到文件的部分的长度小于从文件中最后一个 EOL 字符开始的部分的长度，则它不会正常工作。这就是为什么`{1}`我想删除从 file.tellp() 开始到最后的文件内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:09:54.830

你不能，便携。不同的系统有不同的方法来做到这一点，但通常只在系统文件句柄上。缩短文件的唯一保证方法是将其复制到另一个文件中，而不是复制您不想要的文件，然后删除原始文件并重命名新文件。

如果它是一个文本文件（不是二进制文件），并且您在 Windows 下，则在该位置写入 0x1A 可能会起作用。然而，在 Unix 下没有类似的东西。

在您的情况下，仅覆盖结尾就足够了。如果情况变得更糟，并且您需要附加的内容不足以覆盖尾随数据，您可能会尝试用一些无害且易于识别的内容覆盖它，例如`'\0'`. （正式地，将这样的内容或 0x1A 写入文本文件是未定义的行为。实际上，它会起作用。）

（当我不得不解决类似的问题时，我采用了在记录的开头写入块的 CRC 的策略；在读取时，我忽略了 CRC 错误的任何内容。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:49:52.887

没有可移植的方法来做到这一点（有关更全面的解释，请参阅 James Kanze 更好的答案）。

如果您在 POSIX 系统上，那么您可以使用`ftruncate`（参见[此处](http://pubs.opengroup.org/onlinepubs/007908799/xsh/ftruncate.html)）将文件的长度设置为特定长度。我不知道 C++ 等价物（有关更多信息，请参阅[此问题）](https://stackoverflow.com/questions/2261635/partially-truncating-a-stream-fstream-or-ofstream-in-c)

# sql - SQL技巧：跨行查找范围内的值

> ID：10243656
> 
> 赞同：0
> 
> 时间：2012-04-20T09:35:21.153
> 
> 标签：sql, range, self-reference

我正在使用一个汇率数据库，该数据库的值仅在特定日期内有效。例如，如果我想将美元兑换成欧元，我必须使用特定日期内的特定汇率。汇率会随着时间而变化，最终会被另一种更新的汇率所取代。这是我拥有的汇率数据库的示例：

```
Exchange_Rate_History
Valid-From  Exchange-rate  From-Currency  To-Currency
2012-04-16  0.8            USD            EUR
2012-04-18  0.82           USD            EUR
2012-04-20  0.81           USD            EUR 
```

现在，如果您注意到，我只有一个“有效期至”日期，但我没有“有效期至”日期。

现在我有另一个表需要加入 Exchange_Rate_History 表。此表包含购物交易

```
Purchases
Transaction-ID  Transaction-Date  Amount-In-USD
1               2012-04-16        100
2               2012-04-17        100 
```

对于上述两个交易，我们有两个不同的日期，即 2012 年 4 月 16 日和 17 日。但是对于这两个日期，我们需要使用标记为 Valid-From 2012-04-16 的汇率。因为我只有一个起始日期，所以我不能使用 BETWEEN..AND 来执行连接。因此，以下联接是不可能的

```
SELECT 
    * 
FROM
    Exchange_Rate_History
INNER JOIN Purchases ON (Purchases.Transaction-Date BETWEEN Exchange_Rate_History.Valid-From AND Exchange_Rate_History.???) 
```

我正在考虑对 Exchange_Rate_History 表进行自联接（递归/自引用关系），以便获得两个相邻的 Valid-From 列。第一个 Valid-From 将是原始的，而第二个将是垂直移动的。结果表如下所示：

```
Exchange_Rate_History
Valid-From  Exchange-rate  From-Currency  To-Currency Valid-From-1 (aliased to Valid-To)  
2012-04-16  0.8            USD            EUR         2012-04-18
2012-04-18  0.82           USD            EUR         2012-04-20
2012-04-20  0.81           USD            EUR 
```

我想使用 Valid-From-1 字段，就好像它是 Valid-To 字段一样，以便我可以执行上面的 SQL 语句。现在请注意，Valid-From 字段的日期为 4 月 16 日，而 Valid-To 的日期为 4 月 18 日。但是在这个阶段我不知道如何做垂直“移动”记录的递归关系！

请问有什么帮助吗？这不是一件容易的事！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:02:12.120

```
CREATE FUNCTION GetExchangeRate
(
  @TransactionDate  DATETIME,
  @FromCurrency VARCHAR(3),
  @ToCurrency VARCHAR(3)
 )
RETURNS TABLE
AS
RETURN
    SELECT TOP 1
        Rate
    FROM
        ExchangeRates
    WHERE
        FromCurrency = @fromCurrency
    AND ToCurrency = @toCurrency
    AND ValidFrom <= @transactionDate
    ORDER BY
        ValidFrom DESC 
```

Then:

```
SELECT
    Purchases.ID,
    Purchases.Transaction-Date,
    Purchases.Amount-In-USD,
    ExchangeRate.Rate,
    Purchases.Amount-In-USD * ExchangeRate.Rate As ConvertedAmount
FROM
    Purchases
    CROSS APPLY dbo.GetExchangeRate(Purchases.Transaction-Date, 'USD', 'EUR') ExchangeRate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:31:45.867

假设每个汇率从下一个开始时开始有效，`valid-from`并在下一个开始时结束，您希望选择`valid-from`比交易日期早的最新汇率。那将是当时最新的行。

您可以使用子查询直接获取交易的汇率，如下所示。假设变量`@currencyFrom`和：`@currencyTo``@transactionDate`

```
select top 1 
  exchange-rate 
from Exchange_Rate_History erh
where erh.currency-from = @currencyFrom
  and erh.currency-to = @currencyTo
  and erh.valid-from < @transactionDate
order by erh.valid-from desc 
```

您可以将其放在子查询中，通过用外部字段名称替换变量来获取交易的费率。

例如：

```
Select p.Transaction-ID, p.Transaction-Date, p.Amount-in-USD,
(select top 1 
  exchange-rate 
from Exchange_Rate_History erh
where erh.currency-from = 'USD'
  and erh.currency-to = 'CHF'
  and erh.valid-from < p.Transaction-Date
order by erh.valid-from desc) as exchange-rate,
(select top 1 
  exchange-rate 
from Exchange_Rate_History erh
where erh.currency-from = 'USD'
  and erh.currency-to = 'CHF'
  and erh.valid-from < p.Transaction-Date
order by erh.valid-from desc) * p.Amount-In-USD as Amount-In-CHF

from Purchases p 
```

即使您正在执行两个子查询，您可能会发现它执行得很好。你可以重写它来避免这种情况，但它可能不值得付出努力。

没有办法避免循环连接，但是你的聚集索引应该在`currency-from`, `currency-to`,上`valid-from`，然后它应该可以执行。如果您无法更改聚集索引，请在这些字段上创建一个 idex 并将其也包含`exchange-rate`在索引中 - 这也将提供良好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:02:06.913

窗口函数使您能够使用 lag() 和 lead() 函数：

```
DROP SCHEMA tmp CASCADE;

CREATE SCHEMA tmp ;
SET search_path='tmp';

CREATE TABLE exchange
        ( valid_from DATE NOT NULL
        , cur_from CHAR(3)
        , cur_to CHAR(3)
        , rate FLOAT
        ,PRIMARY KEY(cur_from,cur_to,valid_from)
        );
INSERT INTO exchange(valid_from,rate,cur_from,cur_to) VALUES
  ('2012-04-16',  0.8,        'USD', 'EUR' )
, ('2012-04-18',  0.82,       'USD', 'EUR' )
, ('2012-04-20',  0.81,       'USD', 'EUR' )
, ('2012-04-16',  800,        'USD', 'YEN' )
, ('2012-04-18',  820,       'USD', 'YEN' )
, ('2012-04-20',  810,       'USD', 'YEN' )
        ;

WITH next AS (
        SELECT valid_from
        , lead (valid_from) OVER nxt AS valid_to
        , cur_from
        , cur_to
        , rate
        FROM exchange
        WINDOW nxt AS (
           PARTITION BY cur_from,cur_to
           ORDER BY cur_from,cur_to,valid_from)
           )
SELECT * from next
        ; 
```

结果：

```
NOTICE:  drop cascades to table tmp.exchange
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "exchange_pkey" for table "exchange"
CREATE TABLE
INSERT 0 6
 valid_from |  valid_to  | cur_from | cur_to | rate 
------------+------------+----------+--------+------
 2012-04-16 | 2012-04-18 | USD      | EUR    |  0.8
 2012-04-18 | 2012-04-20 | USD      | EUR    | 0.82
 2012-04-20 |            | USD      | EUR    | 0.81
 2012-04-16 | 2012-04-18 | USD      | YEN    |  800
 2012-04-18 | 2012-04-20 | USD      | YEN    |  820
 2012-04-20 |            | USD      | YEN    |  810
(6 rows) 
```

（更新：添加了日元和 PARTITION BY）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:47:20.190

下面的呢？

```
SELECT *
    , (SELECT TOP 1 Valid-From
        FROM Exchange_Rate_History ex2
        WHERE ex2.From-Currency = ex1.From-Currency
            AND ex2.To-Currency = ex1.To-Currency
            AND ex2.Valid-From > ex1.Valid-From
        ORDER BY ex2.Valid-From ASC) Valid-To
FROM Exchange_Rate_History ex1 
```

关于如何处理它可能还有许多其他选项，但这是一个简单的子查询方法。

方法二：

使用交叉应用可能会提高效率。

```
SELECT *
FROM Exchange_Rate_History ex1
    CROSS APPLY (SELECT TOP 1 Valid-From
        FROM Exchange_Rate_History ex2
        WHERE ex2.From-Currency = ex1.From-Currency
            AND ex2.To-Currency = ex1.To-Currency
            AND ex2.Valid-From > ex1.Valid-From
        ORDER BY ex2.Valid-From ASC) Valid-To 
```

# android - 在android中计算三点之间的角度

> ID：10243663
> 
> 赞同：1
> 
> 时间：2012-04-20T09:35:43.977
> 
> 标签：android, math, angle

我很难理解我的代码有什么问题。

```
Point A = new Point((int)CENTER_X, (int)CENTER_Y);
Point B = new Point((int)me.getX(), (int)me.getY());
Point C = new Point((int)CENTER_X, (int)B.y);
double AB;
double AC;
double BC;
AB = Math.sqrt(Math.pow(B.x - A.x, 2) + Math.pow(B.y - A.y, 2));
AC = Math.sqrt(Math.pow(C.x - A.x, 2) + Math.pow(C.y - A.y, 2));
BC = Math.sqrt(Math.pow(C.x - B.x, 2) + Math.pow(C.y - B.y, 2));
degre = (AB * AB - AC * AC - BC * BC) /( 2 * AC * AB);
degre = Math.acos(degre*(180/Math.PI)); 
```

我总是得到`degre = 0`或`NaN`。这是为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:54:15.887

您对何时进行弧度到度数的转换感到困惑，您需要计算比率，然后执行[arccos](http://en.wikipedia.org/wiki/Law_of_cosines#Applications)（它将以弧度返回角度），然后转换为度数，如下所示：

```
double float ratio = (AB * AB + AC * AC - BC * BC) /( 2 * AC * AB);
degre = Math.acos(ratio)*(180/Math.PI); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-17T11:38:36.473

我知道这是一个老问题，但在查看这个问题时它对我有帮助，所以我分享了一个有效的 Kotlin 示例，并且还明确显示了正在计算的角度，因为我发现这可能会导致混淆。

如果您认为这三个点构成一个三角形，那么您可以使用此处问题和答案中讨论的方法获得三角形的“内部”角度，但您需要注意您正在关注角度的正确方程你要。

我发现您所指的确切角度在查看时可能会令人困惑，因此能够根据一些已知或工作示例检查您的代码很有用，这些示例可以让您可视化您想要的角度。

在撰写本文时，下面的链接是一个出色的在线工具，可让您在三角形中输入三个点并计算内角等。它还包括对如何完成计算的解释，以及插入的示例值，这在调试代码时非常有用：

*   [https://www.triangle-calculator.com/?what=vc](https://www.triangle-calculator.com/?what=vc)

下面是经过测试的 Kotlin 代码，用于计算像这样的三角形中顶点“b”处的角度（不必等边）：

[![在此处输入图像描述](../Images/4e7055a1c438a0ac8192a53a2439ced2.png)](https://i.stack.imgur.com/aq0wb.png)

Kotlin 代码如下 - 显然不需要日志记录，但在使用上述站点之类的工具测试结果时很有用：

```
 private fun angleBetweenThreePoints(a: CirclePoint, b: CirclePoint, c:CirclePoint): Double {
        var ab:Double = Math.sqrt(Math.pow((a.x - b.x).toDouble(), 2.0) + Math.pow((a.y - b.y).toDouble(), 2.0))
        var ac:Double = Math.sqrt(Math.pow((a.x - c.x).toDouble(), 2.0) + Math.pow((a.y - c.y).toDouble(), 2.0))
        var bc:Double = Math.sqrt(Math.pow((b.x - c.x).toDouble(), 2.0) + Math.pow((b.y - c.y).toDouble(), 2.0))

        var cosValue = (ab * ab + bc * bc - ac * ac) /( 2 * bc * ab)
        val angle = acos(cosValue) *(180/Math.PI)

        //Optional logging to help test and debug
        Log.d(TAG,"ab: " + ab)
        Log.d(TAG,"ac: " + ac)
        Log.d(TAG,"bc: " + bc)
        Log.d(TAG,"a: " + a.x +"," + a.y)
        Log.d(TAG,"b: " + b.x +"," + b.y)
        Log.d(TAG,"c: " + c.x +"," + c.y)
        Log.d(TAG,"angle: " + angle)

        return angle
    } 
```

请注意，这不会测试非相交线等边缘情况。

# xamarin.android - 如何使用 MvvmCross 框架使用 MonoDroid TabActivity

> ID：10243672
> 
> 赞同：4
> 
> 时间：2012-04-20T09:35:59.893
> 
> 标签：xamarin.android, mvvmcross

我正在尝试将 TabActivity 与 MvvmCross 一起使用，但我在框架代码中收到 NullReferenceException，因为传入 OnViewCreate 的 viewModelLoader 为 null

```
namespace Cirrious.MvvmCross.ExtensionMethods
{
    public static class MvxViewExtensionMethods
    {
        public static void OnViewCreate<TViewModel>(this IMvxView<TViewModel> view, Func<TViewModel> viewModelLoader)
            where TViewModel : class, IMvxViewModel
        {
            if (view.ViewModel != null)
                return;

            var viewModel = viewModelLoader();
            viewModel.RegisterView(view);
            view.ViewModel = (TViewModel)viewModel;
        } 
```

我怀疑这是因为我试图直接加载视图而不是通过 ViewModel。我的 TabHost Activity 中的代码如下所示：

```
[Activity(Label = "TabHost")]
    public class TabHostView : MvxBindingTabActivityView<TabHostViewModel>
    {
        protected override void OnViewModelSet()
        {
            SetContentView(Resource.Layout.Page_TabHostView);
            var tabHostWidget = this.TabHost;

            TabHost.TabSpec spec;     // Resusable TabSpec for each tab
            Intent intent;            // Reusable Intent for each tab
            // Create an Intent to launch an Activity for the tab (to be reused)
            intent = new Intent(this, typeof(HomeView));
            intent.AddFlags(ActivityFlags.NewTask);

            // Initialize a TabSpec for each tab and add it to the TabHost
            spec = tabHostWidget.NewTabSpec("home");
            spec.SetIndicator("Home", Resources.GetDrawable(Resource.Drawable.icon_home));
            spec.SetContent(intent);
            tabHostWidget.AddTab(spec);
//... more tabs 
```

我将如何解决这个问题？

此外，我的 ViewModel 已设置为 TabHostViewModel 具有每个标签页 ViewModel 的属性。这些是惰性的，因为它们仅在调用属性的 get 访问器时从模型中获取数据。

因此，如果我的标签页 axml 布局中有数据绑定，大概路径必须假定 TabHostViewModel 是上下文（根）？

非常感谢，杰森

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T10:49:50.417

在微不足道的层面上，我认为您可以通过要求框架为您创建意图来解决当前的问题：

```
 TabHost.TabSpec spec;     // Resusable TabSpec for each tab
        Intent intent;            // Reusable Intent for each tab
        // Create an Intent to launch an Activity for the tab (to be reused)
        intent = base.CreateIntentFor<HomeViewModel>();
        intent.AddFlags(ActivityFlags.NewTask); 
```

* * *

在更完整的水平...

* * *

在 Android 和 MvvmCross 中处理标签页的方法不止一种。

在 Android 中，您选择使用直接包含每个单独选项卡内视图的所有 axml 的布局来处理 TabActivity。如果您使用这种方法，那么我*相信*您可以像“通常”一样直接使用数据绑定 - 每个单独的选项卡都应该像普通的子 Android Widget/View 一样工作......我已经读过有性能以这种方式与 Android 选项卡一起工作的优势，但通常我不会这样工作。

其次-我通常的工作方式-您可以选择通过将每个选项卡视为单独的活动并将这些活动中的每一个链接到主选项卡 ViewModel 的子 ViewModel 来处理 TabActivity。（我会试着画一张这个结构的图，今天晚些时候上传！）

如果您选择这样做，那么一个很好的例子就是会议 - [https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views /HomeView.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views/HomeView.cs)

在此会议示例中发生的情况是，`spec.SetContent(intent)`使用选项卡活动基类方法创建意图的位置初始化选项卡规范`CreateIntentFor`- 这是相关代码：

```
 protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.Page_Home);

        TabHost.TabSpec spec;     // Resusable TabSpec for each tab
        Intent intent;            // Reusable Intent for each tab

        // Initialize a TabSpec for each tab and add it to the TabHost
        spec = TabHost.NewTabSpec("welcome");
        spec.SetIndicator(this.GetText("Welcome"), Resources.GetDrawable(Resource.Drawable.Tab_Welcome));
        spec.SetContent(CreateIntentFor(ViewModel.Welcome));
        TabHost.AddTab(spec);

        spec = TabHost.NewTabSpec("sessions");
        spec.SetIndicator(this.GetText("Sessions"), Resources.GetDrawable(Resource.Drawable.Tab_Sessions));
        spec.SetContent(CreateIntentFor(ViewModel.Sessions));
        TabHost.AddTab(spec);

        spec = TabHost.NewTabSpec("favorites");
        spec.SetIndicator(this.GetText("Favorites"), Resources.GetDrawable(Resource.Drawable.Tab_Favorites));
        spec.SetContent(CreateIntentFor(ViewModel.Favorites));
        TabHost.AddTab(spec);

        spec = TabHost.NewTabSpec("tweets");
        spec.SetIndicator(this.GetText("Tweets"), Resources.GetDrawable(Resource.Drawable.Tab_Tweets));
        spec.SetContent(CreateIntentFor(ViewModel.Twitter));
        TabHost.AddTab(spec);
    } 
```

其中对应的顶级 ViewModel 有点像：

```
public class HomeViewModel
    : MvxBaseViewModel
{
    public HomeViewModel()
    {
        Welcome = new WelcomeViewModel();
        Sessions = new SessionsViewModel();            
        Twitter = new TwitterViewModel();
        Favorites = new FavoritesViewModel();
    }

    public FavoritesViewModel Favorites { get; private set; }
    public WelcomeViewModel Welcome { get; private set; }
    public SessionsViewModel Sessions { get; private set; }
    public TwitterViewModel Twitter { get; private set; }
} 
```

...

作为第二种选择的变体（看起来这是您在这个问题中尝试做的事情），如果您的各个选项卡 ViewModel 并不真正相互关联或与“父”TabHost ViewModel 相关，那么您可以将每个选项卡链接到按需创建的新 ViewModel。我不认为任何公共样本都这样做，但如果你需要它，那么它的格式将是：

```
 spec = TabHost.NewTabSpec("newTab");
        spec.SetIndicator("new tab text"), Resources.GetDrawable(Resource.Drawable.Tab_Icon));
        spec.SetContent(CreateIntentFor<NewViewModel>(new { constructorParameter1 = "value1", constructorParameter2 = "value2" }));
        TabHost.AddTab(spec); 
```

*请注意，这里有一个基本的哲学——这是 MvvmCross观点*的一部分——mvx 中的导航/链接总是关于 ViewModels，而不是关于 Views。这个想法是应用程序首先构建 ViewModel - 每个客户端平台简单地决定如何在屏幕上表示这些 ViewModel。这可能会在 iPad 和 WinRT 开发中继续并进一步发展，其中拆分视图、弹出窗口等将很常见。

进一步说明...如果您有复杂的 ViewModel 构造，或者您需要为某些 ViewModel（例如单例）使用特殊的生命周期，那么也可以在您的“核心应用程序”中使用自定义 ViewModelLocators - 这些将允许如果您愿意，您可以更改/控制动态 ViewModel 创建......但我怀疑这个问题并非如此。

* * *

感谢您问题中的详细信息 - 抱歉提供高级选项。我将在今天晚些时候或本周末尝试通过更好的解释来增强这个答案。

* * *

Mvx 也仍然对想法持开放态度......所以我们可以修改代码以使用您的原始代码......这不会那么难，我可以看到一些理由......我会有一个想一想……

# java - JAXB unmarshaller.unmarshal 何时返回 JAXBElement 还是一个 MySchemaObject？

> ID：10243679
> 
> 赞同：30
> 
> 时间：2012-04-20T09:36:18.180
> 
> 标签：java, jaxb, unmarshalling

我有两个代码，在两个不同的 java 项目中，做几乎相同的事情，（根据 xsd 文件解组 web 服务的输入）。

但在一种情况下，我应该这样写：（输入是占位符名称）（元素是 OMElement 输入）

```
ClassLoader clInput = input.ObjectFactory.class.getClassLoader();
JAXBContext jc = JAXBContext.newInstance("input", clInput);
Unmarshaller unmarshaller = jc.createUnmarshaller();
Input input = (Input)unmarshaller.unmarshal( element.getXMLStreamReader() ); 
```

在另一个库中，我必须使用 JAXBElement.getValue()，因为它是一个返回的 JAXBElement，并且一个简单的 (Input) 强制转换只会崩溃：

```
Input input = (Input)unmarshaller.unmarshal( element.getXMLStreamReader() ).getValue(); 
```

你知道是什么导致了这种差异吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-20T20:42:26.217

如果根元素唯一对应于一个 Java 类，则将返回该类的实例，如果不是，则`JAXBElement`返回 a。

如果您想确保始终获得域对象的实例，您可以利用`JAXBInstrospector`. 下面是一个例子。

**演示**

```
package forum10243679;

import java.io.StringReader;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    private static final String XML = "<root/>";

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        JAXBIntrospector jaxbIntrospector = jc.createJAXBIntrospector();

        Object object = unmarshaller.unmarshal(new StringReader(XML));
        System.out.println(object.getClass());
        System.out.println(jaxbIntrospector.getValue(object).getClass());

        Object jaxbElement = unmarshaller.unmarshal(new StreamSource(new StringReader(XML)), Root.class);
        System.out.println(jaxbElement.getClass());
        System.out.println(jaxbIntrospector.getValue(jaxbElement).getClass());
    }

} 
```

**输出**

```
class forum10243679.Root
class forum10243679.Root
class javax.xml.bind.JAXBElement
class forum10243679.Root 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T10:01:15.250

这取决于根元素的类上是否存在[XmlRootElement 注释。](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlRootElement.html)

如果从 XSD 生成 JAXB 类，则应用以下规则：

*   如果根元素的类型是匿名类型 -> XmlRootElement 注解添加到生成的类
*   如果根元素的类型是顶级类型 -> 从生成的类中省略 XmlRootElement 注释

出于这个原因，我经常为根元素选择匿名类型。

您可以使用自定义文件自定义此匿名类型的类名。例如，像这样创建一个 bindings.xjc 文件：

```
<jxb:bindings version="1.0"
              xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
              xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <jxb:bindings schemaLocation="yourXsd.xsd" node="/xs:schema">
        <jxb:bindings  node="//xs:element[@name='yourRootElement']">
            <jxb:class name="YourRootElementType"/>
        </jxb:bindings> 
    </jxb:bindings>
</jxb:bindings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:56:45.147

您需要适当地添加到您的 JAXB 生成的类中`@XMLRootElement`- 它应该具有命名空间：

```
@XmlRootElement(namespace="http://your.namespace.com/", name="yourRootElement") 
```

看看相关的问题（有很多好的提示）：[Class Cast Exception when trying to unmarshall xml?](https://stackoverflow.com/questions/707084/class-cast-exception-when-trying-to-unmarshall-xml)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T15:45:05.853

感谢您的所有解释和链接，我已经写了这个，以便使用 Annotation Introspection 来处理这两种情况。

这样做的好处是：

*   不修改生成的 java 类
*   允许所有可能的 xsd 格式

它适用于输出和输入，在我看来更通用：

```
public class JaxbWrapper {

    private static boolean isXmlRootElement(Class classT){

        Annotation[] annotations = classT.getAnnotations();

        for(Annotation annotation : annotations){
            if(annotation instanceof XmlRootElement){
                return true;
            }
        }       

        return false;
    }

    public static Object unmarshall(Class classObjectFactory, Class classObject, XMLStreamReader xmlStreamReader){

        Package pack = classObjectFactory.getPackage();
        String strPackageName = pack.getName();

        Object returnObject = null;

        try {
            JAXBContext jc = JAXBContext.newInstance(strPackageName, classObjectFactory.getClassLoader());

            Unmarshaller unmarshaller = jc.createUnmarshaller();

            returnObject = unmarshaller.unmarshal( xmlStreamReader );

            boolean bIsRootedElement = isXmlRootElement(classObject);
            if(!bIsRootedElement)
            {
                JAXBElement jaxbElement = (JAXBElement) returnObject;
                returnObject = jaxbElement.getValue();              
            }
        }
        catch (JAXBException e) {
            /*...*/
        }   

        return returnObject;
    }

    private static void writeToXml(Class classObjectFactory, Object obj, XMLStreamWriter xmlStreamWriter){

        Package pack = classObjectFactory.getPackage();
        String strPackageName = pack.getName();

        try {       
            JAXBContext jc = JAXBContext.newInstance(strPackageName, classObjectFactory.getClassLoader());
            Marshaller marshaller = jc.createMarshaller();
            marshaller.marshal(obj, xmlStreamWriter);
        }
        catch(JAXBException e) {
            /*...*/
        }       
    }

    public static String marshall(Class classObjectFactory, Class classObject, Object obj){

        Object objectToMarshall = obj; 

        boolean bIsRootedElement = isXmlRootElement(classObject);
        if(!bIsRootedElement)
        {
            Package pack = classObjectFactory.getPackage();
            String strPackageName = pack.getName();

            String strClassName = classObject.getName();

            QName qName = new QName(strPackageName, strClassName);

            JAXBElement jaxbElement = new JAXBElement(qName, classObject, null, obj);

            objectToMarshall = jaxbElement; 
        }

        StringWriter sw = new StringWriter();
        XMLOutputFactory xmlOutputFactory = XMLOutputFactory.newInstance();
        XMLStreamWriter xmlStreamWriter = null;

        try {
            xmlStreamWriter = xmlOutputFactory.createXMLStreamWriter(sw);

            writeToXml(classObjectFactory, objectToMarshall, xmlStreamWriter);

            xmlStreamWriter.flush();
            xmlStreamWriter.close();
        } 
        catch (XMLStreamException e) {
            /*...*/
        }

        return sw.toString();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-02T07:39:29.613

我也有同样的问题。JAXB unmarshaller.unmarshal 返回 a`JAXBElement<MyObject>`而不是 desired `MyObject`。

我找到并删除了`@XmlElementDecl`. 问题已经解决了。

# c# - 我可以让许多类似对象的实体共享界面吗？

> ID：10243680
> 
> 赞同：0
> 
> 时间：2012-04-20T09:36:18.290
> 
> 标签：c#, .net, sql, service, entities

我有一个连接到 4 个数据库的程序。在其中三个数据库中，实体对象非常相似。现在我的问题很简单，但我不知道如何继续。

我有三个数据库让我们称它们为 1 2 和 3 在那些我有几个表 ab 和 c

我在问，因为 1a 和 2a 和 3a 几乎相同，有没有办法让我做这样的事情。?

```
Using(interfaceDB DB = new DB1())
{
   var getTabelA = (from a in DB.a select a);
}
Using(interface DB = new DB2())
{
   var getTabe2A = (from a in DB.a select a);
}
Using(interface DB = new DB3())
{
   var getTabe3A = (from a in DB.a select a);
}
foreach(interfaceDBTableA in getTabelA)
{
   //do something here
}
foreach(interfaceDBTableA in getTabe2A )
{
   //do something here
}
foreach(interfaceDBTableA in getTabe3A )
{
   //do something here
} 
```

基本上我的希望是我可以将循环部分放入它自己的方法中并重用它而不需要将它定制到单个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:40:25.310

您可以定义一个接口，其中包含您的对象共有的成员，如下所示：

```
public interface ICommonStuff
{
    int CommonInt
    {
        get;
    }

    string CommonString
    {
        get;
    }
} 
```

...然后在类中实现该接口`A`，`B`并且`C`：

```
public class A : ICommonStuff
{
    public int AInt { get; set; }

    public string AString { get; set; }

    public int CommonInt
    {
        get { return this.AInt; }
    }

    public string CommonString
    {
        get { return this.AString; }
    }
}

public class B : ICommonStuff
{
    public int BInt { get; set; }

    public string BString { get; set; }

    public int CommonInt
    {
        get { return this.BInt; }
    }

    public string CommonString
    {
        get { return this.BString; }
    }
}

... (same for C) 
```

然后你应该能够像这样选择它们：

```
using (interfaceDB DB = new DB1())
{
    var getTable1A = (from a in DB.a select a).Cast<ICommonStuff>();
}

using (interface DB = new DB2())
{
    var getTable2A = (from a in DB.a select a).Cast<ICommonStuff>();
}

using (interface DB = new DB3())
{
    var getTable3A = (from a in DB.a select a).Cast<ICommonStuff>();
}

var everythingLikeA = getTable1A.Concat(getTable2A).Concat(getTable3A);

foreach (ICommonStuff commonStuff in everythingLikeA)
{
    // do something here with commonStuff.CommonInt and commonStuff.CommonString
} 
```

# jquery - 使用 ajax 加载页面时硬刷新/重新加载 #

> ID：10243681
> 
> 赞同：0
> 
> 时间：2012-04-20T09:36:19.513
> 
> 标签：jquery, ajax

我正在构建一个移动应用程序，并且正在努力通过 ajax 了解整个加载页面，并且正在努力让页面重新加载/刷新数据。

例如，如果我在一个页面上有一个产品列表，所有产品的 URL 看起来都是`#/product/123232`为了确保页面是使用 ajax 加载的。我选择一个产品带我到产品页面，这个页面是用ajax加载的。在产品页面上，我可以删除产品或更新产品详细信息。如果产品被删除，我会尝试使用`window.location.href = redirect;` 将我带到列出产品的上一页。但是，由于页面仍在通过 ajax 加载，我删除的产品仍然存在。我需要刷新页面以加载更新产品列表。我怎样才能让它自动执行此操作？

另一个例子是消息被标记为已读/未读，但是当从一个页面浏览到另一个页面时，无论它们是已读还是未读消息都不会更新，因为我使用 f5 刷新/重新加载页面。我怎样才能让它使用jquery自动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:46:33.297

我认为您错过了整个异步部分的重点。当您通过 ajax 提交一些内容时，您应该收到更新的 html 或 someting 作为您将插入到 dom 中的答案，或者您会收到一个 ok 并自己更新它，例如从列表中删除一个条目。

# php - 使用 PHP 防止链接在 Outlook 等中自动超链接

> ID：10243682
> 
> 赞同：1
> 
> 时间：2012-04-20T09:36:21.420
> 
> 标签：php, regex, email, encoding, hyperlink

我知道这可以使用 Outlook 中的设置来完成，但这只会为我自己解决问题。

我想做的是使用 PHP 来防止文本被超链接仅仅因为有一个 @ 符号等......

据我所知，对我来说唯一的选择是将所有 @ 符号编码为它们的 HTML 数字实体，如下所示：

像这样的东西：

```
$message = str_replace('@','&#64;',$message); 
```

但是，如果可能的话，如果@ 符号是电子邮件地址的一部分，我不希望这种情况发生。

因此我需要这样的东西：

```
// SOME_REGEX will match any @ sign that is NOT part of an email address
$message = preg_replace('SOME_REGEX','&#64;',$message); 
```

有人能想到其他更好的方法吗？这个计划有什么缺陷吗？任何人都可以为此建议一个好的正则表达式吗？**如果它不是电子邮件地址的一部分，**我正在努力编写与 @ 符号匹配的正则表达式

 **提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:51:23.407

如果电子邮件地址包含在修剪列表中未定义的任何内容中，这将不起作用。

```
$chunked_message = explode(" ", $message);

foreach($chunked_message as $chunk) {
    $clean_chunked_message[] = 
               (!filter_var(trim($chunk, " -().?!\t\r\n", FILTER_VALIDATE_EMAIL)) 
               ? str_replace('@', '&#64;' $chunk) : $chunk;
}

$clean_message = implode(" ", $clean_chunked_message); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:39:29.987

这是邮件应用程序的一项功能，可在找到链接时检测链接并使其可点击。

逃避这种情况的一个肮脏技巧是在链接之间使用空间。

例子：

```
http://ww w.you tube.com/v=....... 
```**

# ruby-on-rails-3 - 我如何将 country_select gem 与 best_in_place 编辑集成

> ID：10243683
> 
> 赞同：3
> 
> 时间：2012-04-20T09:36:24.600
> 
> 标签：ruby-on-rails-3, inline-editing, best-in-place

我正在使用[best_in_place](https://github.com/bernat/best_in_place) gem 在线编辑记录，并使用[country_select](https://github.com/purcell/country-select)来呈现可供选择的国家列表。当使用 best_in_place 编辑选择字段时，我这样做：

```
<%= best_in_place(@home, :country_name, :type => :select, :collection => [[1, "Spain"], [2, "Italy"]]) %> 
```

现在我想获取 country_select 拥有的所有国家/地区的列表，并将其传递到集合参数中。country_select gem 提供了一个简单的助手来呈现选择字段：

```
<%= country_select("home", "country_name") %> 
```

我想替换 best_in_place 助手中的 :collection 参数以包含由 country_select 提供的国家/地区列表。我知道 best_in_place 期望 [[key, value], [key, value],...] 输入到 :collection 中，但我不知道该怎么做。请指教。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T16:27:49.447

只需执行以下操作，它将起作用：

```
<%= best_in_place @home, :country, type: :select, collection: (ActionView::Helpers::FormOptionsHelper::COUNTRIES.zip(ActionView::Helpers::FormOptionsHelper::COUNTRIES)) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T11:55:26.513

如果您在几年后使用 rails 4，这可以解决问题：

```
<%= best_in_place @cart.order, :country_name, type: :select, :collection =>  ActionView::Helpers::FormOptionsHelper::COUNTRIES%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T10:06:14.757

在 Rails 5.2 中，假设你有 Country gem，你应该这样做：

```
<%= best_in_place @home, :country, type: :select, collection: ISO3166::Country.all_names_with_codes.fix_for_bip, place_holder: @home.country %> 
```

fix_for_bip 是我插入到 Array 类中的自定义函数，因为 best_in_place 要求所有选择框数组以与常规选择框相反的顺序提供：对于常规 Rails 选择，您将给出一个数组`[["Spain", "ES"], ["Sri Lanka", "SR"], ["Sudan", "SD"]...]`（首先是什么用户看到，然后是选项值）。所以这就是国家宝石返回的东西。但是，`best_in_place collection:`只接受反向类型的数组：`[["ES", "Spain"], ["SR", "Sri Lanka"], ["SD", "Sudan"]]`. 当并非所有数组项本身都是两项数组时，它也会出现问题——Rails 选择框会自动处理这些问题。因此，我创建了一个 fix_for_bip 函数，当将它们提供给 best_in_place 时，我会调用所有数组：

```
class Array
  def fix_for_bip
    self.map { |e| e.is_a?(Array) ? e.reverse : [e, e] }
  end
end 
```

# c++ - push_back std::pair into std::vector 错误

> ID：10243685
> 
> 赞同：1
> 
> 时间：2012-04-20T09:36:35.763
> 
> 标签：c++, stl, malloc, assertion, memory-corruption

当我尝试将一对添加到向量时，我收到此错误：

```
table: malloc.c:3096: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Aborted 
```

这是方法：

```
std::vector<std::pair <int, int> > AI::genPosNormal(int p, int dice)
{
  std::vector<std::pair <int, int> > pos;
  std::pair<int, int> step;

  for(int i = p; i < 25-dice; i++){
    if(board[BLACK][i] > 0 && board[WHITE][i+dice] < 2){
      step.first = i;
      step.second = dice;
      pos.push_back(step);
    }
  }
  return pos;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T19:36:52.177

有点晚了。但我发现在 std::pair 的 std::vector 中使用 .reserve() 可以解决问题。我仍然必须弄清楚为什么会导致错误，但似乎在 stl_uninitialized.h 中会引发错误标志。

# iphone - 将多个图像发送到服务器的问题 - iphone 应用程序

> ID：10243688
> 
> 赞同：0
> 
> 时间：2012-04-20T09:36:58.840
> 
> 标签：iphone, ios, ios4, nsdata

我们的应用程序中有一个功能，用户可以从摄像头拍摄多张照片。所有这些照片都添加到 NSMuteArray 对象中，并在用户单击保存按钮后发送到服务器。

目前这个过程对我们不起作用，每当用户点击保存时，应用程序就会崩溃。我们正在使用下面的代码添加元素 NSMuteArray

```
 UIImage *img=[info objectForKey:UIImagePickerControllerOriginalImage];

self.picData=UIImageJPEGRepresentation([[self scaleAndRotateImage:img] fixOrientation], 1.0);

[self.addPhotosBtn setImage:[UIImage imageWithData:self.picData] forState:UIControlStateNormal];
[self.addPhotosBtn setImage:[UIImage imageWithData:self.picData] forState:UIControlStateHighlighted];
[self.addPhotosBtn setImage:[UIImage imageWithData:self.picData] forState:UIControlStateHighlighted];

 NSString *ImgData =[[NSString alloc] initWithData:self.picData encoding:NSUTF8StringEncoding];

if (appDelegate.selectedPhotos) {
    [self.selectedPhotos addObject:self.picData];
    [appDelegate.selectedPhotos addObject:self.picData];
}else{
    appDelegate.selectedPhotos=[NSMutableArray arrayWithCapacity:0];
    self.selectedPhotos=[NSMutableArray arrayWithCapacity:0];    
} 
```

这也是我们在保存时使用的代码..

```
 NSDateFormatter *df1=[[NSDateFormatter alloc]init];
[df1 setDateFormat:@"MMMM dd, yyyy"];
NSDate *dd=[df1 dateFromString:self.date.text];
[df1 setDateFormat:@"yyyy-MM-dd"];

NSDictionary *data=[NSDictionary dictionaryWithObjectsAndKeys:
                    //appDelegate.selectedPhotos,@"photos",
                    [appDelegate.allcatches objectForKey:@"catches"],@"allcatches",
                    [appDelegate.selectedPlace objectForKey:@"id"],@"currentplace",
                    [df1 stringFromDate:dd ],@"currentdate",
                    [self.description.text isEqualToString:@""] ? @"NULL" : self.description.text,@"description",
                    self.fbBtn.selected ? @"Y":@"N",@"facebookshare",
                    self.twBtn.selected ? @"Y":@"N",@"twittershare",
                    appDelegate.selectedPhotos,@"photos",
                    nil];
[appDelegate performSelectorInBackground:@selector(uploadPostDataToServer:) withObject:data]; 
```

有人可以帮我们解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:52:11.220

在您的情况下，最好使用一些多重上传解决方案。例如，你可以试试[http://www.aurigma.com/iphone/](http://www.aurigma.com/iphone/)起来。顺便说一句，它是完全免费的。

# ios - 使用检查新实例的谓词进行提取不起作用

> ID：10243689
> 
> 赞同：0
> 
> 时间：2012-04-20T09:37:00.213
> 
> 标签：ios, core-data, predicate

我正在尝试使用下一个谓词进行获取：

```
request.predicate = [NSPredicate predicateWithFormat:@"forPeople == %@", self.people]; 
```

当人员实体与我正在获取的实体具有一对多关系时。奇怪的是，这个谓词完美地适用于人的旧实例，但是当我创建一个新的人实例（并将其连接到获取对象的实例）时，我得到一个空的 fetchedObjects 数组。但如果我再次运行该应用程序，相同的谓词会给我一个有效的 fetchedObjects 数组。

我专门保存并检查人员新实例，所以我不知道运行之间有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:27:33.760

尝试这个：

```
request.predicate = [NSPredicate predicateWithFormat:@"%@ IN forPeople", self.people]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:05:18.047

您确定先连接实体，然后再获取它吗？在创建 ir 后尝试记录新的**entety.forpPeople**，也许你只是还没有连接它？

# android - 未触发 ViewPager 上的 onClick

> ID：10243690
> 
> 赞同：59
> 
> 时间：2012-04-20T09:37:08.203
> 
> 标签：android, android-viewpager

我在 a 上设置了一个单击侦听`ViewPager`器，但从不调用 onClick 事件。我猜触摸事件检测`ViewPager`是干扰，但我不知道如何解决它......

有人可以帮忙吗？

谢谢

```
mViewPager.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        // never called
    }
}); 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-26T09:51:15.840

我通过使用 GestureDetector 解决了类似的问题

将 MotionEvent 发送到 GestureDetector

```
tapGestureDetector = new GestureDetector(this, new TapGestureListener());

viewPager.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            tapGestureDetector.onTouchEvent(event);
            return false;
        }
}); 
```

如果您使用的是兼容性库，您可以将第一行更改为：

```
tapGestureDetector = new GestureDetectorCompat(this, new TapGestureListener()); 
```

您可以在 GestureListener 中处理您的事件：

```
 class TapGestureListener extends GestureDetector.SimpleOnGestureListener{

         @Override
         public boolean onSingleTapConfirmed(MotionEvent e) {
           // Your Code here
         }
        } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-07T06:37:25.390

我就那样做...

```
mViewPager.setOnTouchListener(new View.OnTouchListener() {
    float oldX = 0, newX = 0, sens = 5;

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            oldX = event.getX();
            break;

        case MotionEvent.ACTION_UP:
            newX = event.getX();
            if (Math.abs(oldX - newX) < sens) {
                itemClicked(mViewPager.getCurrentItem());
                return true;
            }
            oldX = 0;
            newX = 0;
            break;
        }

        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-07-03T01:52:48.227

事实上，viewpager 正在干扰。但是您可以覆盖 viewpager 的方法以使其执行您想要的操作。您需要覆盖[ViewGroup.onInterceptTouchEvent(MotionEvent ev)](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)方法。

您可以始终返回 false 以允许触摸事件通过。我还建议调用 super.onInterceptTouchEvent(ev) 以允许滑动继续工作。

它传入一个[MotionEvent](http://developer.android.com/reference/android/view/MotionEvent.html)，因此您可以根据需要检查点击。

希望有帮助。它至少应该让你开始。发回问题或进一步的问题。

编辑：

另请注意，ViewPager 不消耗点击次数。因此，如果您想捕获点击并可能为自己节省大量工作，您可以轻松地在 viewpager 的任何或所有子级上设置 onclicklistener。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-08T06:51:10.867

我知道这是一个老话题，但我认为这是更容易的解决方案。

```
ViewPager viewPager = new ViewPager(this);
viewPager.setAdapter(yourPagerAdapter);

// somewhere where you setup your viewPager add this
viewPager.setOnTouchListener(
    new View.OnTouchListener() {
        private boolean moved;

        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
                moved = false;
            }
            if (motionEvent.getAction() == MotionEvent.ACTION_MOVE) {
                moved = true;
            }
            if (motionEvent.getAction() == MotionEvent.ACTION_UP) {
                if (!moved) {
                    view.performClick();
                }
            }

            return false;
        }
    }
);

// then you can simply use the standard onClickListener ...
viewPager.setOnClickListener(
    new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            Log.i(LOG, "Dayum!");
        }
    }
); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-20T09:54:58.637

虽然这不是如何触发 onClick 的直接答案，但它很可能是相关问题的有用答案 - 在 ViewPager 中捕获点击事件。

只需在页面项目的布局 xml 文件中添加 onClick 属性，然后在活动中添加方法。

示例代码：

*寻呼机适配器：*

```
class SamplePagerAdapter extends PagerAdapter {
    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        // Inflate a new layout from our resources
        View view = getActivity().getLayoutInflater().inflate(R.layout.pager_item,
                container, false);
        // Add the newly created View to the ViewPager
        container.addView(view);
        // ... 
```

布局*pager_item.xml*

```
<?xml version="1.0" encoding="utf-8"?>

  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    // usual attributes
  >

    <ImageButton 
      // usual attributes
      android:onClick="handleAction"
    />

 </LinearLayout> 
```

*主要活动*：

```
 public class MainActivity extends Activity {
  /* 
   ...
  */
    public void handleAction(View view) {
      // do your stuff
    }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T09:46:09.400

您可以设置的可聚焦性，`ViewPager`以便它的孩子无法接收触摸事件并取而代之。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-05T21:56:13.220

确保页面内的意外视图之一没有消耗点击事件。我遇到了一个问题，即图像视图上的 android:clickable 为 true，我无法从其父级获取单击事件。从图像视图中删除该 android:clickable 后，单击事件现在将发送到其父级 (BannerView)。查看示例代码

```
public ViewPagerAdapter extends PagerAdapter {
...

public Object instantiateItem (ViewGroup container, int position) {

    MyItem item = this.myItems.get(position);

    BannerView bannerView = new BannerView(container.getContext());
    ImageView imageView = (ImageView) bannerView.findViewById(R.id.header_image);

    this.setupClickListener(bannerView, position);

     container.addView(bannerView);
     return bannerView;
}

private void setupClickListener(final BannerView view, final int position) {

    view.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

               // Page is clicked!
               MyItem item = ViewPagerAdapter.this.myItems.get(position);
               ViewPagerAdapter.this.showNextActivity(view.getContext(), item);               
            }
     });

} 
```

}

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-03-07T19:05:54.190

正确的方法是在您的 Activity 中实现 ViewPager.OnPageChangeListener。这是一个例子：

```
public class MyActivity implements ViewPager.OnPageChangeListener
{

    private ViewPager mViewPager;
    private int mLastPagePosition = -1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ...

        mViewPager = (ViewPager) findViewById(R.id.viewpager);
        mViewPager.addOnPageChangeListener(this);

        ...
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if (mLastPagePosition != position) {
            // the selected page is changed
            mLastPagePosition = position;
        }
    }

    @Override
    public void onPageSelected(int position) {
        if (mLastPagePosition != position) {
            // the selected page is changed
            mLastPagePosition = position;
        }
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

} 
```

# android - 复制 SD 卡上的现有数据库

> ID：10243700
> 
> 赞同：0
> 
> 时间：2012-04-20T09:37:58.967
> 
> 标签：android, database, copy

当我运行 android 应用程序时，它将其数据库直接存储在模拟器的内部存储器中。应用程序（.apk 文件）存储在外部存储中。数据库大小为 230MB。我的 manifest.xml 中有以下几行：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<manifest android:installLocation="preferExternal" > 
```

以及导致错误的以下代码 INSTALL_FAILED_DEXOPT ：

```
public void copyDatabase() throws IOException 
    {
        if(!Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()))
        {
            Toast.makeText(mycontext,"External Sd card not mounted", Toast.LENGTH_LONG).show();
        }
        try
        {
            InputStream in=mycontext.getAssets().open("Demo.db");
            File outFile =new File(Environment.getExternalStorageDirectory()+File.separator+ "Demo.db);
            outFile.createNewFile();
            OutputStream out= new FileOutputStream(outFile);
            byte[] buf = new byte[1024];
            int len;
            while((len = in.read(buf))> 0)
            {
                out.write(buf,0,len);
            }
            out.close();
            in.close();
            Log.i("copyDatabase","Database Has been transferred");

        }
        catch(IOException e)
        {
            Log.i("CopyDatabase","could not copy database");
        }

    }
    public  boolean checkDatabase() 
    {   
        SQLiteDatabase checkdb=null;
    try
    {
        String myPath="/sdcard/demo.db";
        checkdb=SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        Log.i("checkDatabase database path",checkdb.getPath());
    }
    catch(SQLiteException e)
    {
        Log.e("Database doesn`t exist",e.toString());
    }
    if(checkdb!=null)
    {
        checkdb.close();
    }
    return checkdb != null ? true : false;

    }
    public void openDatabase() throws SQLException
    {
        String myPath="/sdcard/demo.db"
        myDatabase=SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    } 
```

# c# - 自定义反汇编管道不起作用

> ID：10243703
> 
> 赞同：0
> 
> 时间：2012-04-20T09:38:10.643
> 
> 标签：c#, biztalk, biztalk-2010

我拿了[这个](http://blogs.msdn.com/b/brajens/archive/2006/12/03/how-to-develop-biztalk-custom-pipeline-components-part2.aspx)管道组件，稍作改动，现在看起来像[这样](http://pastebin.com/YrWjYV19)。

在构建 dll 并将其复制到后`C:\program files (x86)\Microsoft BizTalk Server 2010\Pipeline Components`，我将组件添加到管道的反汇编阶段。

这就是我实现组件的方式：

[我如何实现组件 http://img267.imageshack.us/img267/2758/biztalk.png](http://img267.imageshack.us/img267/2758/biztalk.png)

当我部署项目并尝试对其进行测试时，调试输出为：

*   [1932] 调试：构造函数
*   [1932] 调试：加载
*   [1932] 调试：ReadPropertyBag，propName：BatchSize
*   [1932] 调试：批量大小：5

看起来该`Disassemble`方法不会被调用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:25:06.350

Receive Pipeline 的 Disassemble 阶段中的组件按从上到下的顺序执行，但是执行模式是“FirstMatch”。这意味着一旦您的平面文件反汇编器识别并处理该文档，它将不再继续执行任何其他“反汇编”阶段组件。

解决方案是重构您的管道组件并将其置于管道的验证阶段。这将要求您将逻辑放在`Execute()`方法中，而不是`Disassemble()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T02:05:25.817

只是想知道您是否实现了 IProbe 接口。在反汇编阶段，BizTalk 将调用 IProbe 来确定您的组件是否符合该消息，如果符合，则反汇编将运行，否则不运行。

# cakephp - 深度可包含关联在 cakephp 1.3.0 中不起作用

> ID：10243704
> 
> 赞同：1
> 
> 时间：2012-04-20T09:38:13.060
> 
> 标签：cakephp, cakephp-1.3, containable

我的模型中有以下关系

基本索引属于申请人

申请人有很多请求

因此，我想检索 BasicIndexing 模型并包含申请人模型和申请人相应的请求，如下面的代码所示

```
$fullCondition = array(
    'contain' => array(
        'Applicant' => array(
            'Request',
            'fields'=>array('Applicant.surname','Applicant.first_name','Applicant.id')
        )
    ),
    'conditions' =>  $conditions,
    'fields'=>array('BasicIndexing.application_date','BasicIndexing.application_number')
);
$this->loadModel('BasicIndexing');
$searchResult = $this->BasicIndexing->find('all',$fullCondition); 
```

问题是返回的结果`$searchResult`根本不包含 Request 模型。它只包含申请者模型并忽略请求模型。我尝试使用与申请人无关的模型，但我收到模型未与申请人模型关联的警告。

```
Array
(
    [0] => Array
        (
            [BasicIndexing] => Array
                (
                    [application_date] => 2012-04-17
                    [application_number] => BIA170420124356
                )

            [Applicant] => Array
                (
                    [surname] => Kermit
                    [first_name] => Frog
                    [id] => 4f8d3b63-c2bc-48a1-9fb5-0290c982293d
                )
        )
) 
```

我做错了什么还是蛋糕 1.3.0 版本有问题？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:53:17.400

我*认为*这是因为你的`fields`阵列。您需要添加`Request.*`到现有`fields`数组或添加一个`fields`数组到`Request`

所以它应该看起来像以下两个示例之一：

```
$fullCondition = array(
    'contain' => array(
        'Applicant' => array(
            'fields'=>array('Applicant.surname','Applicant.first_name','Applicant.id'),
            'Request' => array(
                'fields' => array('*')
            )
        )
    ),
    'conditions' =>  $conditions,
    'fields'=>array('BasicIndexing.application_date','BasicIndexing.application_number')
); 
```

* * *

```
$fullCondition = array(
    'contain' => array(
        'Applicant' => array(
            'fields'=>array('Applicant.surname','Applicant.first_name','Applicant.id', 'Request.*'),
            'Request'
        )
    ),
    'conditions' =>  $conditions,
    'fields'=>array('BasicIndexing.application_date','BasicIndexing.application_number')
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T16:08:21.853

我只是有同样的问题。基本上，contain 是不稳定的，会返回关联的“belongsTo”关系的结果，而不是“hasMany”的结果。我只需要一个级别的递归，事实证明'1'对于递归声明来说是一个特殊的东西（以及-1和0）。因此，我获得所需数据的唯一方法是使用笨重的“递归”声明，但将其设置为不必要的高“2”。

我知道这是一个老问题，但我只是花了一整天的时间来解决这个问题，我希望把这个问题留给其他一些被那个过时版本的蛋糕卡住的可怜的笨蛋……

# iphone - 我的精灵在使用 CCAction 移动时未检测到触摸

> ID：10243710
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:38:38.560
> 
> 标签：iphone, xcode, cocos2d-iphone, touch, sprite

我的问题是：当我在特定位置创建一个精灵时`CCActionMoveTo`，我让它移动另一个位置。在移动过程中，精灵检测触摸事件。但是当我在移动过程中触摸我的精灵时它不起作用：

```
-(void)caca
{
    target = [CCSprite spriteWithFile:@"boulerouge_06.png"];
    target.position=(300,10);
    [self addChild:target];

    id actionMove = [CCMoveTo actionWithDuration:3 
                                        position:ccp(240, 160)];
    [target runAction:actionMove];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:43:13.953

精灵不检测触摸事件。您需要创建一个控制层，然后他们可以通过您的游戏层告诉您的精灵做其他事情。

# sql-server - SSRS BIDS 表达式语言 Month Part from Current date

> ID：10243712
> 
> 赞同：2
> 
> 时间：2012-04-20T09:38:47.343
> 
> 标签：sql-server, reporting-services, ssrs-2008, bids, ssrs-expression

在`BIDS`我需要一个日期`expression`的**YEAR**部分，它是当前日期的负 1 个月。

**例如**今天的日期是`20/04/2012`所需的表达式将返回：

***2012***

如果今天的日期是`05/01/2012`确定的表达式将返回：

***2011***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:23:01.530

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION YearRollOver 
(

    @dDateIn DATETIME
)
RETURNS DATETIME

AS

BEGIN

    declare @dDATEOut  DATETIME

    SELECT @dDATEOut = CAST(CAST(YEAR(@dDateIn)+1 AS varchar)+'/'+CAST(MONTH(@dDateIn) as varchar)+'/'+cast(DAY(@dDateIn) as varchar)  AS DATETIME)

    RETURN @dDATEOut

END
GO 
```

试试这个功能。只需将要增加的日期传递给它，它就会将您的 YEAR 增加 1。

如果您满意，请记住关闭线程。

干杯

苹果电脑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:08:25.560

所以规则是：

*   如果是一月 -> 去年返回
*   else -> 今年返回

对？

```
=IIf(Datepart("m", Fields!date.Value)=1,Datepart("YYYY", Fields!date.Value)-1,Datepart("YYYY", Fields!date.Value)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:58:27.173

如果您要做很​​多事情，我会创建一个函数来执行此操作，该函数将提取年、月和日-每个都提取到自己的变量中。增加年份，将日期重建为字符串并将字符串转换为 DATE。如果您需要帮助，请告诉我。

苹果电脑

# mahout - Mahout 的推荐不是基于相似性而是基于“良好匹配”

> ID：10243719
> 
> 赞同：1
> 
> 时间：2012-04-20T09:39:26.870
> 
> 标签：mahout, recommendation-engine

我们为特定的利基构建了协作/业务网络工具。

所以我们想介绍一个推荐引擎，它会建议连接到哪些用户。

所有用户同时是供应商和消费者。提供类似物品的用户是竞争对手，对合作没有兴趣。对其他用户提供的物品有需求的用户非常适合。

因此，理想的情况不是基于相似性而是基于 2 个用户在供应和需求方面相互补充的程度。

这是 mahout 的一个很好的用例，还是整个概念都基于相似性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:03:18.253

虽然您可以采用推荐方法在这里做一些有意义的事情，但从您的描述来看，这听起来不像是推荐问题。您正在尝试向用户推荐用户，但不是基于任何用户与用户的交互。我也认为这里几乎没有意外或接近匹配的空间：如果我需要一件物品，我想要能够提供该物品的人，而不是类似的东西。

我不会多想的。使用简单的方法，直到你知道它对你不起作用。只需匹配那些提供用户需要的最不同东西的用户（反之亦然）。

# actionscript-3 - 通过 php 保存和加载时间并在舞台上显示时间

> ID：10243724
> 
> 赞同：0
> 
> 时间：2012-04-20T09:39:51.500
> 
> 标签：actionscript-3

在通过 php 上传到我的服务器时，我从游戏结束时节省了时间，并且能够将时间带回来并跟踪它们。

我的问题是如何放置数据 O 跟踪...

```
trace (event.target.data); 
```

进入一个名为 TimeText 的文本字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:52:48.487

相当简单...

TimeText.text = String(event.target.data);

# jquery - 等到这个动画完成后再在另一个链接上重复

> ID：10243725
> 
> 赞同：0
> 
> 时间：2012-04-20T09:39:53.330
> 
> 标签：jquery, jquery-animate

我对这段代码有点麻烦

```
 $('.tree-item').hover(function() {

    $('#_'+this.id).fadeIn().delay(500).animate({ left: "0px" }, 200);

},function () {
    $('#_'+this.id).animate({ left: "3000px" }, 200, function(){
        $(this).fadeOut().css('display', 'none').animate({ left: "-3000px" }, 300);
    });
    $(this).stop();    
}); 
```

我有一棵带有链接的树，当链接悬停在上面时，这段代码会带来带有内容的云。

我需要它等到最后一个链接悬停操作完成后再开始当前链接操作，因为如果用户快速将鼠标悬停在链接上，它看起来会非常混乱。

你可以在这里查看我的意思[http://foc.dev.lemon-fresh.co.uk/#program](http://foc.dev.lemon-fresh.co.uk/#program)

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T09:45:27.220

所有 jQuery 动画函数都有一个`complete`回调方法，该方法将在动画完成时执行。

> .animate（属性[，持续时间] [，缓动] [，完成]）

参考：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

```
$(this).animate({}, 200, null, function() {
    //do this when ready...
}); 
```

# java - 从 servlet 中的服务方法调用 init() 方法

> ID：10243730
> 
> 赞同：2
> 
> 时间：2012-04-20T09:40:05.017
> 
> 标签：java, servlets

我们可以从 servlet 中的 service() 方法调用 init() 方法吗？我得到了这个作为面试问题。为什么会有人这样做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T09:51:30.523

没有理由调用`init`from `service`，`init`意味着由容器调用 - 使用配置初始化它（顾名思义）并允许它执行它需要执行的任何昂贵的操作（设置与数据库的连接或其他）。

如果您想以编程方式重新配置您的 servlet 以从 servlet 本身调用 ，这可能是有道理的`init`，但我很难看到这个用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:54:10.687

在典型的 servlet 生命周期中，在调用 init() 方法之前不会调用 service() 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:55:28.170

您可以将 init 作为一种方法调用，而不是您希望在 servlet 的生命周期中调用它。

甚至服务方法也只会在初始化之后被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:07:37.253

`init()`方法被调用以在 servlet 开始工作之前初始化所有需要的东西。

面试中提出的问题旨在让他们了解您在以下领域的知识：

1.  什么是`init()`
2.  为什么要求
3.  我们在哪里称呼它
4.  如果我们从服务中调用它会发生什么

第四，就像建造一座建筑物，然后召集买家在里面安顿下来，然后开始建造它的结构。他们要求这了解您在项目处理方面的管理和组织才能。

换句话说，这样做是无济于事的，您的 servlet 将不会受到影响！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T10:43:23.567

```
void init(ServletConfig config)throws ServletException 
```

`servlet`容器在`init method`实例化`servlet`. 必须在`init method`servlet 可以接收任何请求之前成功完成。如果
_`servlet``init method.`

**但是：**如果你想`init`显式调用而不是你调用类的正常函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-27T10:11:35.437

init 方法被设计为只被调用一次。它在第一次创建 servlet 时调用，而不是为每个用户请求再次调用。因此，它用于一次性初始化，就像小程序的 init 方法一样。

servlet 通常在用户第一次调用与 servlet 对应的 URL 时创建，但您也可以指定在服务器首次启动时加载 servlet。

当用户调用 servlet 时，会创建每个 servlet 的单个实例，每个用户请求都会产生一个新线程，该线程会酌情移交给 doGet 或 doPost。init() 方法只是创建或加载一些将在 servlet 的整个生命周期中使用的数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-27T08:13:48.473

不，我建议不要调用，因为 init() 方法应该只调用一次以进行一些初始化（如数据库连接代码，这必须只调用一次，没有理由多次调用它）作为服务方法将为每个用户请求调用（带有用户特定的请求和响应对象）。想象一下，如果你从服务方法调用 init，那么 init 会调用很多次。所以这样调用不是一个好主意。

# python - 在python中读取文件期间的无限循环

> ID：10243745
> 
> 赞同：0
> 
> 时间：2012-04-20T09:41:22.293
> 
> 标签：python

我有一个包含单词列表的文件，我正在尝试逐行查找单词阅读。common_words 文件的示例是：

```
yourself
yourselves
z
zero 
```

该列表按字典顺序排序。

```
def isCommonWord(word):

    commonWordList = open("common_words", 'r')
    commonWord = commonWordList.readline()
    commonWord = commonWord.rstrip("\n")

    while commonWord <= word:
        if commonWord == word:
            return True 
        commonWord =  commonWordList.readline()
        commonWord = commonWord.rstrip("\n")

    return False

if isCommonWord("zeros"):
    print "true"
else:
    print "false" 
```

现在这个函数进入了一个无限循环。我不知道这是怎么回事。任何帮助将不胜感激。**如果我尝试除“零”之外的其他变量，那么它工作得很好。只有“零”我才会遇到麻烦。**感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:46:06.540

问题是它`zeros`会出现*在*你文件中的最后一个单词之后——但你不检查这个。此外，`readline()`如果您已到达文件末尾，只会给您一个空字符串，因此循环只会一直认为“还没有”并永远持续下去。

顺便说一句，有更好的方法来做到这一点，利用列表已排序的事实：看看**二分搜索**。

事实上，如果您有大量可用内存，您甚至可以做得更好：只需将整个文件读入一个大文件`set`，然后检查成员资格需要持续的时间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:45:05.913

`readline`当您尝试读取文件末尾时将返回空字符串，并且空字符串会比较`''`任何单词，因此如果您要查找的`>`单词是文件中的任何单词，则您的循环条件始终为真。

这可以通过将循环重写为来解决

```
def isCommonWord(word):
    with open("common_words") as f:
        for w in f:
            w = w.rstrip()
            if w == word:
                return True
            elif w > word:
                break

    return False 
```

尽管问题的真正解决方案是读取文件一次并从中构建`set`：

```
common = set(ln.rstrip() for ln in open("common_words"))
print("true" if "zeros" in common else "false") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:45:23.053

最有可能的`"zeros"`是，在您的文件 common_words 中的所有单词后面，因此没有匹配项。当输入文件的 EOF 时，commonWord（您使用 阅读`<fobj>.readline()`）将为空（`""`），并且空字符串（返回“永远”）小于“零”，因此您的循环条件永远不会终止。

将循环条件更改为：

```
while commonWord and commonWord <= word:
    ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T09:56:15.860

因为`"yourself"<="zeros"`条件为真，while 循环将无限继续。

因此，如果将任何`lexicographically`大于其他单词的单词传递给该函数，那么您的程序将进入无限循环。例如。for `"zz"` "yourself"<="zz" 将陷入无限循环，因为`zz`它`lexicographically`比文件中的所有其他单词都大`common_words`。

更好的版本`isCommonword()`将是：

```
def isCommonWord(word):

    commonWordList = open("common_words.txt")
    commonWord = [x.rstrip() for x in commonWordList]
    if word in commonWord:
        return True
    else:return False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T09:45:44.637

如果找不到单词并且在文件中的最后一个单词之后按字典顺序排列，您还没有添加循环退出的方法。“零”在文件中，但不是“零”

可以工作的 while 循环的相当直接的翻译可能是

```
for commonWord in commonWordList:
    commonWord = commonWord.rstrip("\n")
    if commonWord <= word:
        break
    elif commonWord == word:
        return True 
return False 
```

到达文件末尾时，for循环自动终止

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T09:47:11.107

问题可能与您的情况有关`commonWord <= word`。尝试使用`!=`并检查 readline 是否正在返回某些内容。如果单词在列表中，则返回 true，如果不是，则打破循环:)

# loading - 我如何快速加载我的网站，比如 Apple 的？

> ID：10243748
> 
> 赞同：0
> 
> 时间：2012-04-20T09:41:34.830
> 
> 标签：loading, yslow, pagespeed

我一直很好奇 Apple 加载主页的速度有多快——在 Chrome 上，它说 2.98 秒。

现在，我对 CDN 和 gzipping 以及 Yahoo! 的推荐了如指掌，但我知道除此之外我还遗漏了一些东西，因为在检查了几乎所有 YSlow 推荐并为我的网站评分 84 后，它仍然没有加载足够快（Chrome 上 4.48 秒）。Apple 在 YSlow 上得分 82，但加载速度几乎是我网站的两倍。所以我确定我错过了一些东西。

该领域的任何专家都可以告诉我如何使我的网站加载速度更快，例如平均在 3 秒内？欢迎任何建议/帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:43:06.437

您是否考虑过实际加载的内容量？

我对 YSlow 的体验是，它提出了在不影响网站显示的情况下提高网站效率的方法。例如。通过确保您在浏览器中进行缓存、缩小 CSS、减少外部脚本的数量等，从而使网站在许多情况下加载速度更快（尤其是在后续加载中）。但是，如果您的网站是媒体繁重的，那么无论它的效率如何，在第一次加载时下载内容都需要时间。例如，我的个人博客站点包含一些从我的 Flickr 个人资料中发布的图像，YSlow 检查以确保这些图像被缓存，但它没有建议“加载较少的图像”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:27:58.870

查看 Firebug 的网络面板。如果 HTML 资源的第一个栏很长，而其他栏开始较晚，则您的性能受限于后端。然后你必须查看服务器代码，看看是什么占用了这么多时间。

当第一个条相对较小并且其他条在第一个之后开始时，那么您的性能是前端有界的，您应该查看 ySlow 的缺失点，它只关心优化前端性能。

（在这种情况下，前端和后端性能的使用就像 Steve Souders 在他的书中定义的那样。）

# c# - Asp.net Web API 返回非描述性错误 500

> ID：10243754
> 
> 赞同：36
> 
> 时间：2012-04-20T09:42:02.140
> 
> 标签：c#, iis-7.5, asp.net-web-api

在我的设置中，如果我的 Web API 请求出现任何问题，我会收到错误 500。

例如这个简单的代码。

```
public IQueryable<Article> Get(){
    throw new Exception("error");
    return db.Articles; //yeah i know.. unreachable, not the point
} 
```

我的期望（以及在常规 MVC 控制器中会发生什么）：

![在此处输入图像描述](../Images/4f01864152952041ada532bd356b5e74.png)

我得到的（在 Web API 中）：

![在此处输入图像描述](../Images/afe197bc28e857d8fc957800345284ff.png) 我的网络配置：

```
<customErrors mode="Off"/>
<compilation debug="true" targetFramework="4.5">

//under webserver
<httpErrors errorMode="detailed"/> 
```

应用程序池在集成模式下运行 4.0。启用 32 位应用程序。

如何在浏览器中显示错误？或者至少在调试期间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-16T12:03:05.583

有同样的问题。

对我来说添加

```
 GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always; 
```

在`WebApiConfig` `Register`方法帮助。

之后，我得到了关于错误的详细信息。

[这是MSDN](https://msdn.microsoft.com/en-us/library/system.web.http.includeerrordetailpolicy(v=vs.118).aspx "MSDN")上的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:59:09.367

如果它是 WCF Web 服务，则必须将 ServiceBehavior 属性的 IncludeExceptionDetailInFaults 标志设置为 true，以使错误以您想要的方式出现。

# c# - 如何在 LINQ 中返回 firstchild 值

> ID：10243755
> 
> 赞同：0
> 
> 时间：2012-04-20T09:42:03.193
> 
> 标签：c#, xml, vb.net, linq

使用 LINQ，如何仅获取以下 XML 的作者元素值：

```
<?xml version="1.0" encoding="utf-8"?>
<quotes>
  <category name="Sport">
    <author>James Small
      <quote>Quote One</quote>
      <quote>Quote Two</quote>
    </author>
  </category>
  <category name="Music">
     <author>
      Stephen Swann
     <quote />
    </author>
  </category>
</quotes> 
```

我是 LINQ 的新手，但我尝试过

```
 Dim quotesXMLList As IEnumerable(Of XElement) = From n In q.Descendants("category") _
                                                   Select n
    For Each n In quotesXMLList

        authorList.Add(n.Value)
    Next 
```

但 n.value 返回作者和所有子元素值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:50:28.207

此查询返回所有作者姓名：

```
var authorNames =
    from category in q.Elements("category")
    from author in category.Elements("author")
    from textNode in author.Nodes().OfType<XText>()
    select textNode.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:51:42.433

这将安全地检索第一个孩子：

```
list.Where(x => x.Children.Any()).Select(x => x.Children.First()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:03:00.433

您可以通过更改 XML 让您的生活更轻松：

```
<?xml version="1.0" encoding="utf-8"?>
<quotes>
  <category name="Sport">
    <author>
      <name>James</name>
      <quote>Quote One</quote>
      <quote>Quote Two</quote>
    </author>
  </category>
  <category name="Music">
     <author>
      <name>Stephen</name>
     <quote />
    </author>
  </category>
</quotes> 
```

然后，您可以通过以下方式获取名称：

```
var nodes = 
from item in xdoc.Descendants("name")
select new {author = item.Value}; 
```

# jquery - 使用 jquery 或 javascript 的动态 div 滚动条（适用于 android phonegap）

> ID：10243756
> 
> 赞同：2
> 
> 时间：2012-04-20T09:42:10.540
> 
> 标签：jquery, android, cordova, iscroll

我已经在 android phonegap 中创建了应用程序。在我的应用程序中，我在 div 中动态添加了列表。我想使用 iscroll 为动态 div 添加滚动条。我的代码是

html:

```
 <div class="sidemenu" ></div>
   <div class="searchsidemenu"></div> 
```

风格：

```
 #scroller 
 {
 top:90px;
 position:absolute; z-index:1;
 width:90%;
 height:40px;
 background-color:#FFFFFF;
 }
 li
  {
 list-style:none;
 } 
```

脚本：

*   滚动：

    ```
    var myScroll;
    function loaded() {
        myScroll = new iScroll('scroller', {
            useTransform: false,
            vScroll: true,
            onBeforeScrollStart: function (e) {
                var target = e.target;
                while (target.nodeType != 1) target = target.parentNode;

                if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA')
                    e.preventDefault();
            }
        });
    }
    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
    document.addEventListener('DOMContentLoaded', setTimeout(function () { loaded(); }, 0), false);
    /** scrollbar for dynamic div*/ 
    function doIscrollRefresh () {  
        setTimeout(function () {
            myScroll.refresh();
        }, 0);
    } 
    ```

    清单 1：- 动态 div（我已从本地数据库检索值并动态附加到 div 中）：

    ```
    function list1(alphabet)
    {
          doIscrollRefresh ();
         document.addEventListener("deviceready", onDeviceReady, false);
         function onDeviceReady() 
         {

                var db = window.openDatabase("createdb", "1.0", "PhoneGap Demo", 200000);

                db.transaction(queryDB, errorCB,successCB);

          } 
          function queryDB(tx) 
         {
                 var a=alphabet;
                 tx.executeSql("SELECT Textvalue FROM TextValue WHERE Textvalue LIKE '" + a + "%'",[], querySuccess, errorCB);
         }

         function querySuccess(tx,results)
          {
               $(".sidemenu").append("<li>"+"<label style='background-color:#C1CDD9' >"+alphabet+ "</label>"+"</li>");
               for (i = 0; i < results.rows.length; i++) 
                {
                     $(".sidemenu").append("<li>"+"<a id='"+i+"'  href='#'>" +results.rows.item(i).Textvalue +  "</a>"+ "<hr/>"+ "</li>");
                }
                $(".sidemenu").append("<hr/>");
           }
      function errorCB(err) 
      {
                  alert("Error processing SQL: "+err.code);
      }
      function successCB() 
      {
             //alert("appended");   
      }
    } 
    ```

    清单 2：- 动态 div（我已从本地数据库检索值并动态附加到 div 中）：

    ```
     function retrieveservercauses(arr)
            {

       document.addEventListener("deviceready", onDeviceReady, false);
       function onDeviceReady() 
       {
             var db = window.openDatabase("createdb", "1.0", "PhoneGap Demo", 200000);
             db.transaction(populateDB, errorCB,successCB);
       } 
       function populateDB(tx) 
       {
              tx.executeSql('CREATE TABLE IF NOT EXISTS Name (Name)');
              for(i=0;i<arr.length;i++){
              var arra=arr[i];
              tx.executeSql('INSERT INTO Name (Name)VALUES(?)',[arra]);
              }
       }
       function errorCB(err) 
       {
          //    alert("Error processing SQL: "+err.code);
       }
       function successCB() 
       {
           var db = window.openDatabase("createdb", "1.0", "PhoneGap Demo", 200000);
           db.transaction(queryDB, errorCB);
       }
       function queryDB(tx) 
      {
            var text=$("#searchbox").val();
            tx.executeSql("SELECT * FROM Name WHERE Name LIKE '%" + text + "%'",[], querySuccess1, errorCB);
      }
        function querySuccess1(tx,results) 
        {
            var ar=new Array();
            for (i = 0; i < results.rows.length; i++) 
            {
                 var text=$("#searchbox").val();
                 var name=results.rows.item(i).Name;
                 ar.push(name);
            }
            list2(ar);
            droptextvalue();
            insertTextvalue(text,ar);
        } 
         }

           function list2(ar)
            {

        for(i=0;i<ar.length;i++)
            {

        $(".searchsidemenu").append("<li>"+"<a href='#'>" +ar[i] +"</a>"+"</li>"); 

           }    
             doIscrollRefresh ();
              $(".searchsidemenu").hide();

                } 
    ```

    如何动态添加滚动条？它在 logcat 中显示错误。错误是 myScroll 未定义不是对象。请告诉我解决方案。如何为动态div添加滚动条。请指导我。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:03:04.660

看起来在文档完成加载之前调用了 doIscrollRefresh 函数。我无法从您的代码中准确判断 list1 函数在哪里被调用，但您应该按照以下顺序执行操作：

1：等待文档加载，以便在创建滚动条时 div 存在（您已经这样做了）
2：创建滚动对象。
3：在文档准备好并创建滚动条后声明您的 doIscrollRefresh 函数。
4：最后在所有的火名单1之后，做你的事。

尝试删除 list1 顶部的 doIscrollRefresh 并将其移动到 querySuccess （就像我在下面评论的那样）。像这样：

```
function querySuccess(tx,results)
  {
       $(".sidemenu").append("<li>"+"<label style='background-color:#C1CDD9' >"+alphabet+ "</label>"+"</li>");
       for (i = 0; i < results.rows.length; i++) 
        {
             $(".sidemenu").append("<li>"+"<a id='"+i+"'  href='#'>" +results.rows.item(i).Textvalue +  "</a>"+ "<hr/>"+ "</li>");
        }
        $(".sidemenu").append("<hr/>");
        doIscrollRefresh();
   } 
```

# jquery - jQuery函数替换臃肿的代码

> ID：10243757
> 
> 赞同：1
> 
> 时间：2012-04-20T09:42:12.147
> 
> 标签：jquery

我有以下代码来隐藏/显示 div。首先我将它们全部隐藏，然后显示一个相关的。

```
$('.cart').children().hide();                                                           

$('.product1').click(function() {
    $('.cart').children().hide();               
    $('.pro1').show();
});

$('.product2').click(function() {
    $('.cart').children().hide();               
    $('.pro2').show();
});

$('.product3').click(function() {
    $('.cart').children().hide();  
    $('.pro3').show();
}); 
```

有没有一种方法可以让我创建一个函数，该函数接受一个正在单击的类的输入并显示相关的 div？

product1 将控制 pro1 product2 将控制 pro2

依此类推 - 最后的数字将始终保持一致。

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:54:28.643

如果您使用某个属性（例如“data-id”）标记所有相关元素：

```
<a class="product" data-id="1">...</a>
<a class="product" data-id="2">...</a>
<a class="product" data-id="3">...</a>
...
<div class="cart">
   <div class="pro" data-id="1">...</div>
   <div class="pro" data-id="2">...</div>
   <div class="pro" data-id="3">...</div>
</div> 
```

那么这应该工作：

```
$('.product').click (function() {
   $('.cart').children().hide();
   $('.pro[data-id="' + $(this).attr('data-id') + '"]').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:45:44.583

```
var children = $('.cart').children(); 
children.hide().click(function() {
    /* assuming classes are in the form of product1... product<n> */
    var index = $(this).attr('class').replace(/^product/, '');

    children.hide();               
    $('.pro' + index).show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:45:58.927

`.product1`为您的三个 HTML 元素中的每一个添加另一个类，例如，`.product2`然后尝试：`.product3``common-class`

```
$('.common-class').click(function() {
    $('.cart').children().hide();               
    $(this).show();
}); 
```

**编辑：**或者甚至更好，没有添加类，这也应该工作：

```
$('.cart').children().each(function() {
    $(this).click(function() {
        $('.cart').children().hide();
        $(this).show();
    });
}); 
```

**重新编辑：被**误解了，见 F. Calderan 的回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T09:46:09.727

当然。如果您知道所讨论的元素将**只有**一个类（`product1`等），那么：

```
$('.cart').children().hide();                                                           
$('.product1, .product2, .product3').click(function() {
    var num = this.className.substring(7);
    $('.cart').children().hide();               
    $('.pro' + num).show();
} 
```

如果他们也可能有其他类（更可能的情况）：

```
$('.cart').children().hide();                                                           
$('.product1, .product2, .product3').click(function() {
    var classes = this.className.split(' ');
    $.each(this.className.split(' '), function(index, cls) {
        var num;
        if (cls.substring(0, 7) === "product") {
            num = cls.substring(7);
            $('.cart').children().hide();               
            $('.pro' + num).show();
        }
    }
} 
```

但我可能会考虑重构一下。也许是给出产品编号的`product`类和`data-num`属性：

```
<div class="product" data-num="1">Product 1</div> 
```

...这使得它更容易：

```
$('.cart').children().hide();                                                           
$('.product').click(function() {
    var num = $(this).attr('data-num');
    $('.cart').children().hide();               
    $('.pro' + num).show();
} 
```

[`data-*`以前缀](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)开头的属性对任何元素都有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T09:48:24.173

我不会这样做。所有的`productx`都是类`product`，因此都应该有类`product`，并且应该以另一种方式引用产品 ID/编号。

我会使用`rel`属性：

```
<div class="product" rel="1">Product 1</div>
<div class="product" rel="2">Product 2</div>
<div class="product" rel="3">Product 3</div> 
```

现在你可以这样做：

```
$('.product').click(function(){
  var rel = $(this).attr('rel');
  $('.cart').children().hide();
  $('.pro'+rel).show();
  // this is for show however
  // as above I probably wouldn't
  // use the class to reference
  // these elements. Classes can
  // be applied to many elements.
  // I would use id rather than
  // class. e.g. <div id="pro1">
}); 
```

# sql - 将主键列值插入非主键列

> ID：10243758
> 
> 赞同：0
> 
> 时间：2012-04-20T09:42:20.033
> 
> 标签：sql, sql-server

我试图将表 A 中的主键列值插入表 B 中的非主可空列列。是否可能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:43:49.183

只要数据适合目标列（按类型），就可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:45:31.323

当然，可以将一个表值插入到另一个表中。从您的问题来看，您并不清楚您要完成什么，而是从一个表插入到另一个表（无论它们是否是键），您可以执行以下操作：

```
INSERT INTO Table (Column) 
SELECT Id FROM AnotherTable; 
```

由于您提到了主键，因此您可能正在尝试读取刚刚插入的自动增量 ID，如果这样您可以使用 SCOPE_IDENTITY()

```
 INSERT INTO Table (Column) 
 SELECT SCOPE_IDENTITY() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:45:42.223

只要您没有在目标表 ID 列中放置任何相反的约束，您就不应该有任何问题。如果表已经存在，您需要在上面的代码中添加列名。

苹果电脑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:45:44.573

只要列类型匹配，它就像您认为的那样简单。我假设您的意思是您的 PK 也仅涵盖一列。

```
INSERT INTO TableB (destinationColumn)
SELECT pkcolumn
FROM TableA 
```

# c++ - 从 HBITMAP 中删除边框

> ID：10243762
> 
> 赞同：0
> 
> 时间：2012-04-20T09:42:26.993
> 
> 标签：c++, bitmap

我有一个使用 Excel 互操作的 CopyPicture 方法创建的 HBITMAP。出于某种原因，这会在图像的顶部和左侧边缘放置一个灰色边框，即使它们不是电子表格的一部分。有人能告诉我从图像中删除这些边框的简单方法吗？我想到的方法是获取字节数组中的位，从该字节数组中删除第一行和第一列，然后将数组转换回位图。有没有更简单或更好的方法？就像一个简单的修剪功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:48:36.220

如果您知道边框的尺寸，您可以通过创建一个[`clone`](http://msdn.microsoft.com/de-de/library/ms141944.aspx#Y0)应用了新边界框的副本来裁剪位图：

```
int croppedWidth = x;
int croppedHeight = y;
Rectangle r = Rectangle(0, 0, croppedWidth, croppedHeight);
System::Drawing::Imaging::PixelFormat format = src->PixelFormat;
Bitmap^ result = src->Clone(r, format); 
```

这会裁剪`src`位图`r`并将副本放入`result`.

# c++ - 嵌入式容器的渲染性能

> ID：10243765
> 
> 赞同：0
> 
> 时间：2012-04-20T09:42:48.793
> 
> 标签：c++, qt, rendering, x11, xlib

我有一个使用 SDL 在小部件中显示网络摄像头输出的应用程序。我得到了每秒 20-25 帧的输出。

然后将此输出嵌入到在另一个进程中创建的 QX11EmbedWidget 容器中。（或者在另一个使用 XLib 的实现中，我将 SDL 窗口的这个输出重新设置为原生 X11 窗口）。

在这种情况下，我获得的输出约为每秒 2-5 帧。

平台：I.MX-53 上的 Ubuntu

Q1。有人可以解释这两种情况的性能差异。

Q2。当我们将应用程序的输出嵌入到另一个窗口时，是否会发生两次渲染？一次，通过嵌入的应用程序，然后通过嵌入此窗口的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:05:49.360

> Q1。有人可以解释这两种情况的性能差异。

不，不是。也许嵌入 SDL 窗口不起作用。或者您平台上 X 服务器中的错误。它可以是任何东西。

> Q2。当我们将应用程序的输出嵌入到另一个窗口时，是否会发生两次渲染？一次是通过嵌入的应用程序，然后是嵌入此窗口的应用程序？

不，渲染仅在嵌入的窗口中完成。

嵌入窗口只会改变父级。

> 然后将此输出嵌入到在另一个进程中创建的 QX11EmbedWidget 容器中。

您应该使用[QX11EmbedContainer](http://doc.qt.nokia.com/4.7-snapshot/qx11embedcontainer.html)作为容器，而不是 QX11EmbedWidget。

# bluetooth - 哪些范围的蓝牙 UUID 可用于供应商定义的配置文件？

> ID：10243769
> 
> 赞同：16
> 
> 时间：2012-04-20T09:43:12.993
> 
> 标签：bluetooth, uuid, bluetooth-lowenergy

我想使用自定义配置文件构建一个简单的基于*蓝牙低功耗*的应用程序。采用的配置文件/服务/特性/描述符使用 16 位 UUID，如[官方网站上](http://developer.bluetooth.org/gatt/profiles/Pages/ProfilesHome.aspx)所示。

16 位 UUID 是对应 128 位 UUID 的快捷方式，翻译为

```
128-bit UUID = 16-bit Attribute UUID * 2^96 + Bluetooth_Base_UUID 
```

与`Bluetooth_Base_UUID`存在`00000000-0000-1000-8000-00805F9B34FB`。*（来源：蓝牙核心规范第 3 卷第 F 部分第 3.2.1 节）*

由于我使用的是自定义配置文件，我想知道我可以使用哪些 UUID。

*   哪个 128 位 UUID 范围可用于描述*低功耗蓝牙*中供应商定义的属性？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T19:20:45.777

您在上面显示的基本 UUID 之上的所有 16 位和 32 位 UUID 都是为规范（或未来规范）中的项目保留的。因此，供应商应用程序可以免费使用任何小于基本 UUID 的 128 位 UUID。供应商没有保留空间来使用 16 位或 32 位 UUID。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-06T05:31:16.283

您可以向蓝牙 SIG 注册 16 位 UUID： [https](https://www.bluetooth.org/en-us/Pages/LoginRestrictedAll/16-bit-UUIDs-member.aspx) ://www.bluetooth.org/en-us/Pages/LoginRestrictedAll/16-bit-UUIDs-member.aspx 如果您需要保存字节（出于空间、能源或其他性能原因）。

我对蓝牙规范的解释是，您可以自由地使用蓝牙 UUID Base“范围”**之外**的任何 128 位 UUID ：

```
 xxxxxxxx-0000-1000-8000-00805F9B34FB 
```

我已将范围放在引号中，因为您引用的规范的 16 位到 128 位转换公式表明最左边的字节是最重要的（大端字节序！）。请注意，如果您将 UUID 视为 128 位整数，则蓝牙 UUID 基本“范围”不是一个连续的值范围。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-12T22:41:35.057

您不得使用 16 位或 32 位 UUID，除非它们是通过 [注册](https://www.bluetooth.com/specifications/assigned-numbers/16-bit-uuids-for-members)分配给您的。

使用未注册的短 UUID 将导致与您的设备和未来标准以及/或其他设备的注册号码不兼容。蓝牙资格将需要有效的数字。

未注册时，生成您自己的有效 128 位 UUID：

*   使用工具，例如
    *   [https://www.uuidgenerator.net](https://www.uuidgenerator.net)
    *   [`uuidgen`](https://linux.die.net/man/1/uuidgen)或[`guidgen.exe`](https://msdn.microsoft.com/en-us/library/ms241442(v=vs.80).aspx)命令行工具
*   了解 UUID 格式[https://en.wikipedia.org/wiki/Universally_unique_identifier](https://en.wikipedia.org/wiki/Universally_unique_identifier)
    *   版本 4 变体使用随机数，您可以通过将前 8 个十六进制字符替换为 0 来创建自己的基本 UUID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-08T06:26:53.007

这是FAQ\谈论BLE UUID

[http://www.cypress.com/forum/psoc-4-ble/how-can-i-get-uuid-services-and-characteristics](http://www.cypress.com/forum/psoc-4-ble/how-can-i-get-uuid-services-and-characteristics)

# powershell - 运行 .NET 4 管理单元的托管 PowerShell

> ID：10243773
> 
> 赞同：1
> 
> 时间：2012-04-20T09:43:29.097
> 
> 标签：powershell, .net-4.0, powershell-2.0

我创建了一个 .NET 库，我想创建一个通过 PowerShell 调用该库的 GUI。为了调用 cmdlet，我必须在 Windows 注册表中添加[一个条目](https://stackoverflow.com/questions/2094694/how-can-i-run-powershell-with-the-net-4-runtime)，因为该库是针对 .NET 4 编译的。

它工作正常，但不适用于 GUI 中的 PowerShell 主机。如何设置 PowerShell 主机以运行 CLR 4 管理单元？

```
var rsConfig = RunspaceConfiguration.Create();
var myAssembly = new AssemblyConfigurationEntry("AssemblyName", "C:\...\Assembly.dll");
rsConfig.Assemblies.Append(myAssembly);
var runSpace = RunspaceFactory.CreateRunspace(rsConfig);
runSpace.Open();

using (var ps = PowerShell.Create()) {
    ps.Runspace = runSpace;
    ps.AddCommand("Get-MyCmdlet");
    ps.AddParameter("Param1");
    ps.AddParameter("Param2");
    foreach (var result in ps.Invoke()) { // CommandNotFoundException
        Debug.WriteLine(result.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:19:37.160

问题解决了。这有点复杂。我写[了一篇](http://dajbych.net/double-layered-application-with-powershell-in-the-middle)关于它的文章。基本上附加一个程序集是一种错误的方法。更简单的方法是注册该程序集。

# php - JS/PHP 交叉 urlencoding 和 urldecode

> ID：10243775
> 
> 赞同：1
> 
> 时间：2012-04-20T09:43:29.663
> 
> 标签：php, javascript, escaping, urlencode, urldecode

好吧，我已经搞砸了好几个小时了，但我仍然无法做到这一点，所以我要问你们。

我在 html 中有一个 textarea，需要使用 ajax(jquery) 将值发送到 php，然后输入到数据库中，并使用 php 再次打印。问题是我希望打印时与您输入的内容 100% 相同。包括像`'`和`\`

我现在怎么做：

```
var comment = escape( box.find('#newCommentArea').val() ).replace(new RegExp( "\\+", "g" ),"%2B"); 
```

价值在哪里`box.find('#newCommentArea').val()`。我`comment`使用 ajax 函数传递给 php 并将其作为 POST 数据提交。

使用萤火虫这似乎是要发送的：`comment=asdf%27asdf`

`$_POST['comment']`用php打印给了我`asdf\'asdf`

添加`\`是一个问题。我需要摆脱它。

无论哪种方式，因为只有 javascript 转义在 php 中是不安全的，所以我也这样做`urlencode()`

打印时我使用`rawurldecode()`

你们能否指出这种方法是否很好，或者是否可以做得更好。

我如何摆脱新`\`的`$_POST['comment']`

提前致谢，

真仓夜美

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:52:53.723

斜线是自动添加的，PHP 或服务器的设置可以更改（但通常不应该）。您可以使用`stripslashes()`( [PHP: stripslashes](http://php.net/manual/en/function.stripslashes.php) ) 反转它。在显示之前立即使用此功能，因此不要在存储到数据库之前。

如果已经发送，则不再需要在 PHP 中进行 urlencode（urlencode 需要在发送之前进行），您只需要确保它是数据库安全的。

不幸的是，我无法就 URL 编码的最佳方式向您提供建议，我自己往往会对此感到困惑 :) 希望其他人能够澄清这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:50:53.407

当您将打印保存在数据库中的文本时，`\'`将显示为`'`. 因此，可以将 value 保存到数据库中`\'`。

此外，如果您使用 jQuery 发出请求，则不需要`'`在请求之前对字符进行转义，这应该正确打包。

但是，在将其保存到数据库之前，您确实需要小心清理 PHP 中的文本（使用`mysql_real_escape_string` [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)）。

# jquery - jQuery animate 中使用的 IE 8 中的不透明度 css 问题

> ID：10243777
> 
> 赞同：0
> 
> 时间：2012-04-20T09:43:34.203
> 
> 标签：jquery, asp.net, internet-explorer-8, opacity, master-pages

我为我的朋友设计了这个网站：http: [//noorjamali.info/](http://noorjamali.info/)

我对这个站点有一个问题 - 为什么这些行在 IE 8 中不起作用？

```
$j('#lveis-wrapper_3').animate({
    opacity: 0.0,
    height : 740
}, 1200, function () {
    // Animation complete.
)}; 
```

这是 jQuery - 那么为什么在 IE 8 中不起作用？

什么是替代品？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:49:08.253

如果您的代码正确：-

IE兼容性有一些问题给这个元代码

```
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:20:39.847

你为什么不能试试[http://jsfiddle.net/9FBrx/](http://jsfiddle.net/9FBrx/)

```
$('#lveis-wrapper_3').animate({
                height : '300px',
opacity:'0'                  
            }, 1200, function () {
                // Animation complete.
}) 
```

# c# - 正则表达式在 C# 中不起作用

> ID：10243788
> 
> 赞同：1
> 
> 时间：2012-04-20T09:44:32.077
> 
> 标签：c#, regex

这是我的正则表达式：

```
href\\s*=\\s*(?:\"(?<1>[^\"]*)\"|(?<1>\\S+)) 
```

这就是我所拥有的：

```
"<p>dfhdfh</p>\r\n<p><a href=\"/Content/blabla/345/344\">najnov</a></p>\r\n<p>&nbsp;</p>\r\n<p><a href=\"/Content/blabla/345/323:test 1\">test 1&nbsp;</a></p>" 
```

但是 m.Groups 是：

```
{href="/Content/blabla/345/344"}
{/Content/blabla/345/344} 
```

如何获得m中的第二个href？

这是我的代码：

```
Match m = Regex.Match(myString, "href\\s*=\\s*(?:\"(?<1>[^\"]*)\"|(?<1>\\S+))", RegexOptions.IgnoreCase);
                if (m.Success)
                {
                    for (int ij = 0; ij < m.Groups.Count; ij++)
                        myString = myString.Replace(m.Groups[ij].Value.Substring(7), m.Groups[ij].Value.Substring(m.Groups[ij].Value.LastIndexOf("/") + 1));
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:56:31.453

使用[RAD 软件 RegEx 设计](http://www.radsoftware.com.au/regexdesigner/)器对此进行测试。

此正则表达式返回多个**匹配项**，每个匹配项中有一个**组**。所以你不应该试图从组（命名为“1”）中得到你的结果，你应该迭代匹配的集合并检索每个（或每个组中的组）的值。

这是获得输出的结果：

![RAD RegEx 设计器的输出](../Images/b528cdfc0f0ab75c35738723c114f703.png)

所以你应该`Regex.Matches`在你的代码中调用，并遍历结果，而不是`Regex.Match`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:56:44.523

除了 html/regex 的东西，要一次获得所有结果，使用`Matches`，该方法返回一个`MatchCollection`包含所有找到的`Match`对象。

请参阅msdn 上[的 MatchCollection 和匹配对象](http://msdn.microsoft.com/en-us/library/30wbz966.aspx#Match_and_MCollection)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:29:42.687

我将假设原始字符串是这样的：

```
<p>dfhdfh</p>
<p><a href="/Content/blabla/345/344">najnov</a></p>
<p>&nbsp;</p>
<p><a href="/Content/blabla/345/323:test 1">test 1&nbsp;</a></p> 
```

..您发布的是用于创建该字符串的*字符串文字。*从中获取所有`href`属性就像这样简单：

```
Regex r = new Regex(@"href\s*=\s*(?:""(?<HREF>[^""]*)""|(?<HREF>\S+))");

foreach (Match m in r.Matches(htmlString))
{
  Console.WriteLine(m.Groups["HREF"].Value);
} 
```

我将捕获组的名称更改为`HREF`以清楚地表明我们正在按其*名称*检索该组，而不是按其编号。

正如你所看到的，你正在做很多你不需要做的工作。

# ios - Apple iOS App 图标标题：最大长度？

> ID：10243796
> 
> 赞同：11
> 
> 时间：2012-04-20T09:45:22.167
> 
> 标签：ios

我只是想知道 iOS Apple 应用程序图标标题（即显示名称）是否有限制（以字符为单位）。我想避免中间那些丑陋的点（例如“Long..pple Name”）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-23T17:09:38.903

这取决于显示名称中每个字符的宽度。介于 11（代表“wwwwwww…”）和 15（代表“iiiiii…”）之间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-29T08:32:57.930

这不仅取决于每个字符的宽度，而且设备和 iOS 版本也会有所不同。例如：

iPhone 4 到 5 将比带有 iOS 8 的 iPhone 5s 更快地截断名称（而带有 iOS 7 的 iPhone 5s 也会截断长标题）。iPhone 6 和 6 plus 的显示屏更宽，但只显示 4 个图标，这意味着您的标题有更多空间。

对此进行测试的最佳方法是使用 iOS 模拟器。

因此，作为对您问题的回答：没有真正的限制，因为它取决于字符长度、设备宽度和 iOS 版本......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-15T15:32:09.220

1.  确定您希望为您的应用程序或网络剪辑使用的名称
2.  在 iOS 设备上打开 Safari
3.  转到任何网页
4.  点击“分享”按钮（带有向上箭头的框）
5.  点击操作下方的“添加到主屏幕”
6.  输入预期的名称（从笔记中复制/粘贴是我最喜欢的方法）
7.  点击“添加”，您将被带回 SpringBoard（又名主屏幕），您将看到名称适合或被省略。如果它变得黯然失色，`GoTo Step 1`. 如果没有椭圆，`Return`

# windows - 对 system() 的调用不会在我的 Windows 进程之间创建父子关系

> ID：10243802
> 
> 赞同：1
> 
> 时间：2012-04-20T09:45:41.233
> 
> 标签：windows, perl, process, windows-services

我正在使用 Perl 创建 Windows 服务。我正在`Win32::Daemon`为此目的使用。

处理服务的 Perl 脚本（接受启动和停止回调等）使用`system()`命令调用 .bat 文件，最终调用我的最终 Perl 程序。

问题是，当我停止服务时，由 启动的进程`system()`没有关闭，最终进程也没有关闭（由 生成的进程启动`system()`）。

这就像进程之间没有“父子”关系（停止Windows服务通常会导致所有相关进程同时关闭）。

编辑：我添加了上面的代码。我刚刚展示了注册服务回调和调用 StartService 的主函数，以及三个主要回调：启动、运行、停止。

```
sub main {
        #registering service callbacks
        Win32::Daemon::RegisterCallbacks( {
            start       =>  \&Callback_Start,
            running     =>  \&Callback_Running,
            stop        =>  \&Callback_Stop,
            pause       =>  \&Callback_Pause,
            continue    =>  \&Callback_Continue,
         } );
        my %Context = (
            last_state => SERVICE_STOPPED,
            start_time => time(),
      );

      Win32::Daemon::StartService( \%Context, 2000 );

      # Here the service has stopped
      close STDERR; close STDOUT;
}

#function called after the start one
sub Callback_Running
{
   my( $Event, $Context ) = @_;

#Here I had to make an infinite loop to make the service "persistant". Otherwise it stops automatically (maybe there's something important I missed here?

   if( SERVICE_RUNNING == Win32::Daemon::State() )
   {
       Win32::Daemon::State( SERVICE_RUNNING );

   }
}   

#function first called by StartService
sub Callback_Start
{

#above is stated the system() call where I trigger the .bat script

       my( $Event, $Context ) = @_;

        my $cmd = "START \"\" /Dc:\\path\\to\\script\\dir\\ \"script.bat\"";

    print $cmd."\n";
    system($cmd);

   $Context->{last_state} = SERVICE_RUNNING;
   Win32::Daemon::State( SERVICE_RUNNING );
}

sub Callback_Stop
{
   my( $Event, $Context ) = @_;

   #Things I should do to stop the service, like closing the generated processes (if I knew their pid)

   $Context->{last_state} = SERVICE_STOPPED;
   Win32::Daemon::State( SERVICE_STOPPED );

   # We need to notify the Daemon that we want to stop callbacks and the service.
   Win32::Daemon::StopService();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:32:42.863

在 Windows 中，进程之间没有父子关系。Windows 将所有进程视为对等进程，尤其是杀死“父进程”永远不会杀死“子进程”。

当服务收到停止请求时，它负责关闭/杀死它可能已经创建的任何进程，如果这样做合适的话。

您说“停止 [原文如此] Windows 服务通常会导致所有相关进程关闭”，但通常情况并非如此；也许 Win32::Daemon 正在为您执行此操作，但是它当然无法知道从您的批处理文件启动的任何进程。

如果可能的话，正确的解决方案是在单个进程中实现您的服务。由于在这种情况下，两个进程都是用 Perl 编写的，因此将它们组合成一个程序应该相对简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T02:17:30.160

Harry Johnston 的回答基本上是正确的。如果很难跟踪“孩子”，您可以做的一件事是将您创建的所有进程放入[Windows Job](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684161%28v=vs.85%29.aspx)对象中，而不是通过 启动它们`system`，然后在进程的服务关闭代码中终止该作业.

我不确定从 Perl 中做到这一点有多容易，但从 C 中来说并不太难。看起来确实有一些 CPAN 模块可以帮助您解决这个问题，例如[Win32::Job](http://search.cpan.org/~jdb/Win32-Job-0.04/Job.pm)和[Win32： :JobAdd](http://search.cpan.org/~djoos/Win32-JobAdd-1.00/lib/Win32/JobAdd.pm)，但我自己没有任何经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T16:02:16.590

如果批处理文件在最终的 Perl 程序之前终止，那么最终的 Perl 程序将没有父程序，因为它的父程序（批处理文件的命令处理器（如 cmd.exe））死了。

*（更新以包括可能发生这种情况的特定场景）*

一种情况：

1.  批处理文件 B 启动 Perl 程序 P1。
2.  Perl 程序 P1 启动 Perl 程序 PFINAL。
3.  Perl 程序 P1 无需等待 PFINAL 终止就终止。
4.  批处理文件 B 继续执行下一个命令，因为 P1 已终止。
5.  如果批处理文件 B 然后在 PFINAL 终止之前终止，那么 PFINAL 就没有父级了，因为它的父级（Perl 程序 P1）和它的祖父级（批处理文件 B）都已终止。

创建守护进程时的一个常见习惯用法是分叉，然后让父进程死亡，这样子进程（实际的守护进程）就没有父进程了。这避免了守护进程仍与控制终端连接的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T14:50:31.747

我有同样的问题。

我的 perl 脚本调用 java 应用程序，同时应用程序应该被杀死。

我用`Win32::Process`了模块

```
Win32::Process::Create($ProcessObj,
    "C:/Java/bin/java.exe",
    "java.exe -cp bin/blablabla.jar",
    0,
    CREATE_NEW_CONSOLE,
    ".")

$ProcessObj->GetExitCode($retCode);         
$ProcessObj->Kill($retCode); 
```

希望这可以帮助

# jquery - 我可以将一些变量存储到悬停功能中吗？

> ID：10243813
> 
> 赞同：0
> 
> 时间：2012-04-20T09:46:16.637
> 
> 标签：jquery, hover

似乎我无法将`linguettaCorrente`变量存储到悬停处理程序中：

```
$('.navigatore_blocco').hover(
    var linguettaCorrente=$(this).find('linguetta');

    function() {
        linguettaCorrente.animate( { height: 33 }, 600);
    },

    function() {
        linguettaCorrente.animate( { height: 23 }, 600);
    }
); 
```

为什么？我该如何存储它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:49:23.237

在悬停外部声明相同的 var 并在内部定义它。

```
var linguettaCorrente = null;
$('.navigatore_blocco').hover(
    function() {
        linguettaCorrente = $(this).find('linguetta');
        linguettaCorrente.animate( { height: 33 }, 600);
    },
    function() {
        linguettaCorrente.animate( { height: 23 }, 600);
    }
); 
```

`.hover`函数有 2 个参数，而这 2 个是函数。它不可能是别的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:51:39.400

为什么不使用`.data()`存储所需的数据？

```
$('.navigatore_blocco').hover(
    var linguettaCorrente=$(this).find('linguetta');
    $(this).data('linguetaaCorrente', linguettaCorrente);
    ....
); 
```

# c# - 如何使用 C# 在 UrlRewriting 中获取浏览器的完整 URL

> ID：10243814
> 
> 赞同：0
> 
> 时间：2012-04-20T09:46:16.863
> 
> 标签：c#, url

我使用过 URL 重写。我有一个问题是我有类似的网址

```
http://localhost/learnmore.aspx 
```

这是 URL 覆盖，所以我想要这个完整的 URL，所以我这样编码。

```
string url=Request.RawUrl; 
```

在这段代码之后，我进入`/learnmore.aspx`了 url 变量，但我想要完整的 URL`http://localhost/learnmore.aspx`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:54:12.470

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;
// http://localhost/learnmore.aspx

string path = HttpContext.Current.Request.Url.AbsolutePath;
// /localhost/learnmore.aspx

string host = HttpContext.Current.Request.Url.Host;
// localhost 
```

编辑：删除查询字符串项：（从[Get url without querystring](https://stackoverflow.com/questions/4630249/get-url-without-querystring)中找到）

```
var uri = new Uri(HttpContext.Current.Request.Url.AbsoluteUri);
string path = uri.GetLeftPart(UriPartial.Path); 
```

或者

```
Uri url = new Uri("http://www.somesite.com/mypage.aspx?myvalue1=hello&myvalue2=goodbye");
string path = String.Format("{0}{1}{2}{3}", url.Scheme, 
    Uri.SchemeDelimiter, url.Authority, url.AbsolutePath); 
```

或者

```
string url = "http://www.somesite.com/mypage.aspx?myvalue1=hello&myvalue2=goodbye";
string path = url.Substring(0, url.IndexOf("?")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:13:51.193

您可以通过这种方式获取主机和方案：

```
Request.Url.GetLeftPart(UriPartial.Authority) 
```

有了这个，你会得到：

> [http://localhost/](http://localhost/)

然后你可以附加 RawUrl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:53:46.240

您可以尝试获取基本网址：

```
string baseUrl = Request.Url.Scheme + "://" + Request.Url.Authority + 
    Request.ApplicationPath.TrimEnd('/') + "/"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:54:17.350

`Request.Url.AbsoluteUri`会成功的。

# java - 如何在 Netbeans 中打开检查员组？

> ID：10243818
> 
> 赞同：6
> 
> 时间：2012-04-20T09:46:31.247
> 
> 标签：java, netbeans

我正在使用 netbeans ide 7.1.1 并且所有组都是开放的。我找不到督察组。我打开了导航器组，打开了文件、调色板、程序和导航器组。我需要督察组。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T11:04:16.197

问题是 NetBeans 7.1.1 已将检查器组重命名为 Navigator。以前为了添加 jFilechooser，您必须在检查器中右键单击表单并从右键菜单中添加它。现在为了获得相同的结果，您左键单击 jForm，然后查看导航器并右键单击附加组件并从那里添加 jFilechooser。这对于学习使用以前版本的 NetBeans 制作的教程的人很有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T09:57:33.650

要转到检查器窗口，请使用 NetBeans 菜单中的 Window > Inspector。出现的窗口如下所示：

![](../Images/e6001ec5f2bc81ea8b01adcfc84b1059.png)

图片来自[链接](http://www.homeandlearn.co.uk/java/databases_and_java_forms.html)，可能与您的项目不完全匹配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T14:18:56.920

行，

1.  双击您的 Jframe.java（来自项目树，通常是左侧）
2.  选择“设计”选项卡（看起来像主选项卡下的一个按钮）
3.  您应该在右侧看到两个选项卡，导航（以前的检查器）和属性。

在同一个面板中似乎有一个导航器和一个属性选项卡（两者都是上下文相关的），但是它们很难区分，因为选项卡名称以当前选择的任何对象的名称开头。（ObjName-Navigator 和 ObjName-Properties）由于它们都代表同一个对象，除非拉伸视图/面板，否则它们无法区分。此外，选择源子选项卡（Toggle-Button）时，还有一个不同的导航器，具有不同的图标和相同对象的不同选项。

我正在使用 NetBeans IDE 7.1.2 并且在尝试更改变量名称时遇到了同样的问题，遵循 Oracle's [Converter Example](http://docs.oracle.com/javase/tutorial/uiswing/learn/logic.html "使用 NetBeans IDE 学习 Swing")。我在 Java 1.3 中学习了 AWT，并且仍在追赶所有这些花哨的新工具，我喜欢这些功能，但我并不总是欣赏它们是如何实现的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T18:47:03.093

一种可能的出路是自定义 netbeans 的行为，使键盘快捷键激活检查器窗口。

我也遇到了类似的问题（Netbeans 6.9），我这样做了：

转到**工具**->**选项**。选择**键盘映射**选项卡。搜索`inspector window`. 分配了一个新的快捷方式组合（`CTRL+J`在我的例子中）。

所以本质上，每当我想要所需的窗口时，我的快捷方式组合都会调用它:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-18T11:39:55.377

在新的 netbeans 7.3 中执行`Ctrl+7` 或转到 Window->Navigating->Navigator

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-03T19:19:08.043

1）窗口+重置窗口

“其他组件”窗口将在项目窗口下方打开

2) 点击[JFrame]

准备好！有旧检查器窗口的组件:)

问候。亚历杭德罗

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-07T21:51:14.627

对我来说，它不被称为 Inspector，而是被称为 Navigator，在我的情况下，它位于 Windows > Navigator。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-05T11:59:04.587

我在 NetBeans IDE 8.1 中遇到了同样的问题，但通过这个菜单解决了：Windows>Reset Windows。

# android - 在谷歌地图上找到最近的药店

> ID：10243822
> 
> 赞同：4
> 
> 时间：2012-04-20T09:46:44.357
> 
> 标签：android, google-maps, location

我正在开发一个在 Android 上查找最近的药房、医院等的应用程序。

我可以在手机上获取我的位置详细信息，但我如何才能找到我附近的地方？谷歌地图可以按地名提供对 mapview 的搜索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:21:59.377

最好的方法是在数据库中列出药房。可能在本地或在服务器上，在查询数据库时使用以下查询，该查询使用 harvesine 公式找到离您最近的药房。

```
SELECT id, ( 3959 * acos( cos( radians(37) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(-122) ) + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance FROM markers HAVING distance < 25 ORDER BY distance LIMIT 0 , 20; 
```

[https://developers.google.com/maps/articles/phpsqlsearch](https://developers.google.com/maps/articles/phpsqlsearch)

上面的教程不是针对 android 的，但它是一个很好的教程，可以帮助你了解如何找到离用户最近的位置，我开发了一些类似于你自己的东西，发现该教程非常有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:56:09.363

这将是搜索 Pharmacy 一词的一种方法

```
String url = "http://maps.google.co.uk/maps?q=Pharmacy&hl=en"
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(url));      intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");
startActivity(intent); 
```

您可以查看 maps.google.com 以获取有关如何为搜索定义边界框的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T00:41:11.697

看看 Google Places API，它允许您通过一些简单的 REST 端点搜索给定位置（纬度、经度）周围的地方，您可能正在寻找的是[Near me 搜索](https://developers.google.com/places/documentation/search#PlaceSearchRequests)或[雷达搜索](https://developers.google.com/places/documentation/search#RadarSearchRequests)

[https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T09:53:21.847

我开发了相同类型的应用程序，可以找到最近的 ATM 机。逻辑很简单，你需要先将所有phamesy的lat-lon存储在一个表中，然后通过当前的lat-lon细节计算找到最近的距离。

# web-services - Joomla 2.5 网络服务

> ID：10243827
> 
> 赞同：0
> 
> 时间：2012-04-20T09:47:00.310
> 
> 标签：web-services, joomla2.5

我目前正在使用 Joomla 2.5，我需要将我们的网站与其他一些应用程序集成。我们基本上需要网络服务，但我似乎没有找到关于此事的任何资源。我可以找到有关 1.5/1.6 但不是 2.5 的信息。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:24:01.120

我意识到我必须使用一些定制的东西，所以我将 Slim REST 框架与 Joomla 集成。在下面的脚本中，我在我的服务脚本中初始化了 Joomla 应用程序：

```
error_reporting(0);
ini_set('display_errors', '0');

define( '_JEXEC', 1 );
define( '_VALID_MOS', 1 );

// Point JPATH_BASE to root directory    
define( 'JPATH_BASE', substr($_SERVER['SCRIPT_FILENAME'], 0, strrpos($_SERVER['SCRIPT_FILENAME'], '/administrator')));    
define( 'DS', DIRECTORY_SEPARATOR );

// Include the Slim REST framework
require_once ( JPATH_BASE .DS.'libraries/slim/Slim.php' );
// Include the Joomla framework
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );    

$application = & JFactory::getApplication('site');
$application->initialise();

$app = new Slim();
$app->get('/resource/car/:id', 'getCar');  
$app->put('/resource/car/:id', 'updateCar');
$app->run(); 
```

我现在可以在我的代码中使用 Joomla API 来实现安全性、数据访问等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T12:20:39.323

从 Joomla 1.6 开始，不需要激活 web 服务。

因此，配置页面中没有相应的选项可用。

# mysql - MySql 查询 - 计算行数和百分比

> ID：10243831
> 
> 赞同：1
> 
> 时间：2012-04-20T09:47:20.830
> 
> 标签：mysql, count, left-join, percentage, cross-join

我正在尝试列出学生及其测试效率。在`MySql`数据库中我有表

`users`- 与学生同桌

```
id | name
_________
1  | Joe
2  | Marry
3  | Max
4  | Anna
---------- 
```

`courses`- 课程表

```
id | name
_____________
1  | Course 1
2  | Course 2
---------- 
```

`questions`- 每门课程的问题表。行 course_id 指示该问题属于哪个课程

```
id | cours_id | question
_________________________________
1  | 1        | Course 1 - question 1
2  | 1        | Course 1 - question 2
3  | 1        | Course 1 - question 3
4  | 1        | Course 1 - question 4
5  | 2        | Course 2 - question 1
6  | 2        | Course 2 - question 2
7  | 2        | Course 2 - question 3
8  | 2        | Course 2 - question 4 
```

* * *

`cours_invitations`- 每个学生都会收到课程邀请。行 user_id 显示受邀参加课程的用户的 ID。cours_id 代表学生应该学习的课程的id。当行状态值为 0 时，表示学生未开始学习课程（待定），如果值为 1，则表示学生已开始（或完成）。

```
id | user_id | cours_id | status
________________________________
1  | 1       | 1        | 1
2  | 1       | 2        | 0
3  | 2       | 1        | 0
4  | 3       | 1        | 1
5  | 4       | 1        | 1
6  | 4       | 2        | 1 
```

**示例：** Joe 和 Anna 被邀请参加课程 1 和课程 2，Marry 和 Max 被邀请参加课程 1。Joe 参加了课程 1 但没有参加课程 2，Marry 什么也没做，Max 参加了课程 1

`courses_stats`- 是学生完成的课程问题的统计数据。状态代表答案的准确性。0 代表错误答案，1 代表正确答案。

```
id | user_id | question_id | status

___________________________________
1  | 1       | 1           | 1
2  | 1       | 2           | 1
3  | 1       | 3           | 0
4  | 2       | 1           | 1
5  | 2       | 2           | 1
6  | 2       | 3           | 1
7  | 2       | 4           | 1
8  | 4       | 1           | 1
9  | 4       | 2           | 1
10 | 4       | 3           | 0
11 | 4       | 4           | 0
12 | 4       | 5           | 1
13 | 4       | 6           | 1 
```

**示例：** Joe 完成了第一门课程的 3 个问题。请注意，他没有完成该课程的所有问题，而且其中一个是不正确的。

麦克斯做的所有问题都正确，安娜完成了第一道菜的所有问题（一半不正确）和第二道菜的一半（全部正确）

我需要一个查询，其中包含学生姓名、完成课程的百分比、他们完成的课程的正确答案百分比（不是所有课程）以及按这些百分比对学生进行排序的可能性。像这样的东西：

```
name  | completed courses | completed questions
______________________________________________
Max   |100%               |100%
Anna  |100%               |50%
Joe   |50%                |50%
Marry |0%                 |0% 
```

这样的事情甚至可能吗？我需要在表中添加更多行来进行此查询吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T14:48:00.633

我认为这应该是你需要的：

```
SELECT
    users.name,
    CONCAT(COUNT(
        DISTINCT CASE
        WHEN cours_invitations.status = 1 THEN
            cours_invitations.id
        ELSE
            NULL
        END
    ) / COUNT(
        DISTINCT cours_invitations.id
    ) * 100, '%') AS completed_courses,
    CONCAT(COUNT(
        DISTINCT CASE
        WHEN courses_stats.status = 1 THEN
            courses_stats.id
        ELSE
            NULL
        END
    ) / COUNT(DISTINCT questions.id) * 100, '%') AS completed_questions
FROM
    users
LEFT JOIN cours_invitations ON cours_invitations.user_id = users.id
LEFT JOIN questions ON cours_invitations.cours_id = questions.cours_id
AND cours_invitations.status = 1
LEFT JOIN courses_stats ON users.id = courses_stats.user_id
GROUP BY
    users.id
ORDER BY
    completed_courses DESC,
    completed_questions DESC 
```

作为一个问题，为什么表名被称为`cours_*`而不是`course_*`？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T15:06:45.667

在这里您可以找到表模式和示例数据以及查询结果。MichaelRushton 有完美的答案，但我认为 course_stats 必须是 LEFT 加入。因为如果学生有 cours_invitations 但没有 course_stats，则该查询将不会返回该用户。

[http://sqlfiddle.com/#!2/019dc/1](http://sqlfiddle.com/#!2/019dc/1)

```
SELECT
    users.name,
    COUNT(
        DISTINCT CASE
        WHEN course_invitations.status = 1 THEN
            course_invitations.id
        ELSE
            NULL
        END
    ) / COUNT(
        DISTINCT course_invitations.id
    ) * 100 AS completed_courses,
    COUNT(
        DISTINCT CASE
        WHEN courses_stats.status = 1 THEN
            courses_stats.id
        ELSE
            NULL
        END
    ) / COUNT(DISTINCT questions.id) * 100 AS completed_questions
FROM users
INNER JOIN course_invitations ON course_invitations.user_id = users.id
INNER JOIN questions ON course_invitations.cours_id = questions.cours_id
LEFT JOIN courses_stats ON users.id = courses_stats.user_id
GROUP BY
    users.id 
```

**结果：**

```
NAME    COMPLETED_COURSES   COMPLETED_QUESTIONS
Joe 50  25
Marry   0   100
Max 100 0
Anna    100 50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:43:49.493

我猜你的意思是“正确答案的百分比”。好的，通过巧妙地使用`count(distinct if(..))`构造，您可以避免使用不同的 group-by 子句的复杂子查询。例如，这段代码

```
count(distinct if(cours_invitations.status and courses_stats.status, 
                      NULL, questions.id)) 
```

计算满足条件的（不同）问题的数量`cours_invitations.status and courses_stats.status`。使用这个技巧，整个查询就像这样简单而优雅：

```
select users.name, 
    count(distinct if(cours_invitations.status, 
                         NULL, 
                         cours_invitations.cours_id)) 
        / count(distinct cours_invitations.cours_id) 
        * 100 as courses_completed,
    count(distinct if(cours_invitations.status and courses_stats.status, 
                          NULL, 
                          questions.id)) 
        / count(distinct if(cours_invitations.status, 
                               NULL, 
                               questions.id)) 
        * 100 as correct_answers
from users
    left join cours_invitations on users.id = cours_invitations.user_id
    left join questions using (cours_id)
    left join courses_stats on users.id = courses_stats.user_id 
                               and questions.id = courses_stats.question_id
group by users.id
order by correct_answers 
```

我建议在 mysql 之外添加百分号，因为它在那里更加优雅，它会给 mysql 查询增加不必要的复杂性。

# amazon-ec2 - 如何从亚马逊 vpc 连接到外部世界？

> ID：10243833
> 
> 赞同：54
> 
> 时间：2012-04-20T09:47:23.050
> 
> 标签：amazon-ec2, amazon-web-services, connectivity, vpc, amazon-vpc

我通过向导将亚马逊 VPC 设置为“仅限公共网络”，因此我的所有实例都在公共子网中。

VPC 中分配有弹性 IP 的实例可以毫无问题地连接到互联网。

但是没有弹性 IP 的实例无法连接到任何地方。

存在 Internet 网关。aws 控制台中的路由表看起来像

```
Destination Target 
10.0.0.0/16 local
0.0.0.0/0   igw-nnnnn 
```

并从内部实例显示路线

```
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
10.0.0.0        *               255.255.255.0   U     0      0        0 eth0
default         10.0.0.1        0.0.0.0         UG    100    0        0 eth0 
```

我试图在实例所属的安全组中打开所有入站和出站流量到 0.0.0.0/0。仍然没有成功。

```
~$ ping google.com
PING google.com (74.125.224.36) 56(84) bytes of data.
^C
--- google.com ping statistics ---
6 packets transmitted, 0 received, 100% packet loss, time 5017ms 
```

我还可以做些什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-15T04:43:01.220

似乎从没有弹性 IP 的实例中退出的唯一方法是：

*   添加一个 NAT（从 ami-vpc-nat-beta 启动一个额外的 m1.small 实例）并为其分配 EIP
*   创建一个额外的“私有”子网
*   将非 EIP 实例移动到该私有子网
*   修改路由表：来自私有子网的 0.0.0.0/0 应该去 NAT

因此，仅添加 NAT 是不够的。应停止实例并将其从另一个子网移至另一个 IP。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-12T03:31:15.027

文档告诉您应该添加一个[NAT 实例](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_NAT_Instance.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-30T06:07:23.683

> **Q. 没有 EIP 的实例如何访问 Internet？**
> 
> 没有 EIP 的实例可以通过以下两种方式之一访问 Internet 没有 EIP 的实例可以通过 NAT 实例路由其流量以访问 Internet。这些实例使用 NAT 实例的 EIP 来遍历 Internet。NAT 实例允许出站通信，但不允许 Internet 上的计算机使用 NAT 发起与私有地址计算机的连接，并且

[http://aws.amazon.com/vpc/faqs/](http://aws.amazon.com/vpc/faqs/)

您可以在此处找到有关如何设置 nat 实例的详细说明：http: [//docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_NAT_Instance.html](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_NAT_Instance.html) ![在此处输入图像描述](../Images/5136a685f983b7d3b131bac1a38c1561.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-16T16:41:41.563

或者在公共 VPC 中创建一个 NAT 实例，并添加一个静态路由到该 NAT 实例

路由添加 -net 0.0.0.0 网络掩码 0.0.0.0 gw 1​​0.0.0.5 eth0

其中 10.0.0.5 是您的 nat 实例，只需确保包含 NAT 实例的安全组可以接受来自您需要 Internet 访问权限的盒子的内部流量

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-20T12:13:04.103

您可以在您的 VPC 中具有 EIP 的任何实例上执行此操作。[我在这里](https://serverfault.com/a/568478/206117 "DIY：带 NAT 的 VPC")描述的一些说明应该可以帮助你。顺便说一句：不要忘记禁用源/目标。查看

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-16T16:38:41.717

没有 EIP 的实例可以通过以下两种方式之一访问 Internet 没有 EIP 的实例可以通过 NAT 实例路由其流量以访问 Internet。这些实例使用 NAT 实例的 EIP 来遍历 Internet。NAT 实例允许出站通信，但不允许 Internet 上的计算机使用 NAT 启动与私有地址计算机的连接。

[https://docs.aws.amazon.com/vpc/latest/userguide/VPC_NAT_Instance.html](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_NAT_Instance.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T17:10:59.590

您是否检查了子网上的网络 ACL？

交叉检查安全组的规则。

路由表看起来不错。它应该工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-19T12:23:09.310

解决此问题所需要做的就是为您配置为执行 NAT 的实例禁用“源/目标检查”。这可以在 AWS 控制台的“实例操作”下完成。

[参考](https://forums.aws.amazon.com/thread.jspa?messageID=363695)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-28T12:55:46.603

这对我有用：

*   VPC 子网 172.20.0.0/16
*   EC2“nat”网关 172.20.10.10 与 EIP

去做 ：

*   设置禁用的源/目标。检查你的“nat gw”
*   创建一个新的“nat-sub”子网，例如：172.20.222.0/24
*   将“nat-sub”的路由 0.0.0.0/0 修改为 172.20.10.10（我的 nat gw）
*   使用“nat-sub”创建一个 EC2
*   在您的 nat 网关上以 root 身份，尝试：

> root@gw:~# sysctl -q -w net.ipv4.ip_forward=1 net.ipv4.conf.eth0.send_redirects=0
> 
> root@gw:~# iptables -t nat -C POSTROUTING -o eth0 -s 172.20.222.0/24 -j MASQUERADE 2> /dev/null || iptables -t nat -A POSTROUTING -o eth0 -s 172.20.222.0/24 -j MASQUERADE

如果可行，请在 /etc/rc.local 中添加这 2 行

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-25T07:01:28.767

**安全组 -> 出站**

```
*   ALL Traffic ALL     ALL     0.0.0.0/0   Allow 
```

如果您想连接到 google.com 等外部服务器，甚至想更新 - sudo apt-get update，请允许出站

您可以使用 AWS 前端 goto Security Groups -> Outbound 允许出站

确保为您的 AWS 实例选择正确的组

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-26T20:22:35.030

他们有一个相对较新的产品，称为 NAT 网关，它正是这样做的，在您的 pub/private 子网边缘创建一个托管 NAT 实例。

# umbraco - 无法从 Umbraco 内容中删除页面

> ID：10243836
> 
> 赞同：1
> 
> 时间：2012-04-20T09:47:32.937
> 
> 标签：umbraco, packages

我使用 Webmatrix 建立了一个 Umbraco 网站。后来我将所有文件集成到一个 Visual Studio 2010 项目中，在本地开发和测试了整个网站。

我使用该网站并确保虚拟主机提供商 (OpenHost) 提供 our.umbraco 上建议的所有权限。

CMS 内的 GoLive 检查成功！

**问题：**

*   不幸的是，我无法从内容区域中删除页面。（错误处理动作）
*   开发人员部分中的包文件夹也是空的。

正如某些论坛所建议的，OpenHost 无法再提供帮助，也无法更改 Windows 临时文件夹的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:04:16.010

我以这种方式找到了解决类似问题的方法。我在尝试删除宏时发现了问题，但经过进一步调查后，后台没有任何内容会删除包括内容。

HTTP 响应包含一个通用的 500 服务器错误，因此我对失败的请求进行了跟踪（有关如何设置失败请求跟踪的说明在[这里](http://learn.iis.net/page.aspx/266/troubleshooting-failed-requests-using-tracing-in-iis/)） 跟踪指向 LiveStreamingHandler 模块中的错误，某种无效索引。谷歌搜索这个错误给了我一个讨论 IIS 媒体服务 4.1 中的无效索引错误的结果列表。我完全卸载了媒体服务并在 Umbraco 中删除了工作。我现在不需要媒体服务，但我尝试重新安装 IIS 媒体服务 4.0，一切似乎都还不错。

我无法确定 Media Services 4.1 失败的确切原因，但这可能是在解决此问题时需要检查的内容。

our.umbraco.com 上的原始线程可在[此处](http://our.umbraco.org/forum/core/umbraco-5-general-discussion/30167-500-Server-Error-when-deleting-a-macro)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:51:03.367

很可能您在 bin 文件夹中丢失了一些包引用的程序集。我猜当您从开发环境转移项目时，在此过程中丢失了一些文件。

# makefile - 交叉编译选项“--prefix”的确切目的是什么

> ID：10243837
> 
> 赞同：2
> 
> 时间：2012-04-20T09:47:38.833
> 
> 标签：makefile, arm, cross-compiling, prefix

这可能听起来像*谷歌第一*或*咨询 --help*有点问题，但我两者都做了，但仍然确实得到了一个令人满意的答案。

`i686`想象以下场景：我的硬盘上有一个交叉编译的 RootFileSystem，位于`/tftpboot/rfs`. 我正在用我的 ARM 平台启动`RFS`它`NFS`。我现在想编译`libxml`，`sqlite`并`php`扩展`ARM-RFS`已经安装的`thttpd`服务器。据我了解，`--prefix`为 定义了不同的位置`/`，因此在我的情况下，我的配置应如下所示：

```
//libxml

./configure --build=i686-linux --host=arm-926ejs-linux-gnueabi --prefix=/tftpboot/rfs
make
make install

//sqlite
./configure --build=i686-linux --host=arm-926ejs-linux-gnueabi --prefix=/tftpboot/rfs   CFLAGS="-lpthread -lrt -Os -ldl" CPPFLAGS="-DSQLITe_THREADSAFE=1 -DSQLITE_TEMP_STORAGE=3"
make
make install

//php
./configure --build=i686-linux --host=arm-926ejs-linux-gnueabi --target=arm-926ejs-linux-gnueabi --prefix=/tftpboot/rfs
    --with-thttpd=/usr/local/sbin --without-pear --with-pdo-sqlite=/usr/local --disable-all --enable-pdo 
    --with-sqlite3=/usr/local --with-config-file-path=/data --enable-libxml --with-libxml-dir=/usr/local
make
make install 
```

因为：

*   我想安装在正常的`rootfs`层次结构中，但在`/tftpboot/rfs`.
*   `thttpd`已经安装在`/tftpboot/rfs`. 所以我想把它链接在那里
*   ？？？

所以我不得不承认我完全不知道我必须在哪里使用绝对路径以及我必须在哪里使用相对路径。还是我完全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:30:27.957

`--prefix`告诉 configure 安装程序的位置，以及安装的程序在运行时应在何处查找其文件。

如果特定项目/程序在运行时不使用前缀（很多不使用），那么它只是安装位置，您可以忽略以下内容。您*通常*可以通过 grep 已安装的二进制文件的目录名称来判断编译程序是否使用了前缀（尝试以独特的前缀进行实验性安装），但如果文件有调试信息，这可能不起作用。

否则，如果您想从编译它的不同位置运行它，那么技巧如下：

假设：

*   您想从`/usr/bin`目标系统的视图中运行它。
*   您想`/tftpboot/rfs/usr/bin`在构建系统的视图下安装它。

脚步：

```
./configure --prefix=/usr --build=i686-linux --host=arm-926ejs-linux-gnueabi
make
make DESTDIR=/tftpboot/rfs install 
```

**警告**:`DESTDIR`是一个传统名称，但有些项目可能会选择其他名称（或根本不选择，在这种情况下，快乐的 makefile hacking）。

# liferay - 在 liferay 门户中加载任何静态站点

> ID：10243840
> 
> 赞同：0
> 
> 时间：2012-04-20T09:47:48.633
> 
> 标签：liferay, static-site

我是 Liferay 的新手，正在查看它提供的各种功能。

我们是否可以加载任何静态内容网站，只需将其 URL 传递给 liferay 门户。就像门户网站可以像浏览器一样运行，只是它总是必须加载相同的 url，并在该站点内提供导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:50:59.367

如果我对您的理解正确，是的，您可以这样做。

您需要在您的页面上安装一个 IFrame Portlet 并使其`src`属性指向您的静态站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:31:07.137

iframe portlet 就是专门为此目的而设计的。您需要做的就是指定 url 并且 iframe 可以添加到主页中。

这还不是全部。您还可以将 iframe 的可见性限制为少数角色或用户。您可以将用户分类到特定组，并可以为特定角色提供权限，以便只有他们可以看到 iframe。

您可以手动设置 iframe 的大小，也可以让它自动适应屏幕。

Liferay 中还有许多与 iframe portlet 相关的功能。

# php - 如何在 PHP 中获取用户代理

> ID：10243841
> 
> 赞同：93
> 
> 时间：2012-04-20T09:47:50.190
> 
> 标签：php, user-agent

我正在使用这个 JS 代码来了解用户使用的是什么浏览器。

```
<script>
  document.write(navigator.appName);
</script> 
```

我想把这个 navigator.appName 转换为 php 代码来使用它：

```
if ($appName == "Internet Explorer") {
  // blabla
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-04-20T09:48:33.497

请改用本机 PHP`$_SERVER['HTTP_USER_AGENT']`变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-27T07:00:20.837

您还可以使用 php 原生函数[get_browser()](https://secure.php.net/manual/en/function.get-browser.php)

重要提示：您应该有一个 browscap.ini 文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-20T09:51:50.960

如果要将数据从客户端传递到服务器，可以使用 jQuery ajax 方法[链接。](http://api.jquery.com/jQuery.ajax/)在这种情况下，您可以使用`$_SERVER['HTTP_USER_AGENT']`变量来找到浏览器用户代理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-07T17:12:41.920

我用：

```
<?php
$agent = $_SERVER["HTTP_USER_AGENT"];

if( preg_match('/MSIE (\d+\.\d+);/', $agent) ) {
  echo "You're using Internet Explorer";
} else if (preg_match('/Chrome[\/\s](\d+\.\d+)/', $agent) ) {
  echo "You're using Chrome";
} else if (preg_match('/Edge\/\d+/', $agent) ) {
  echo "You're using Edge";
} else if ( preg_match('/Firefox[\/\s](\d+\.\d+)/', $agent) ) {
  echo "You're using Firefox";
} else if ( preg_match('/OPR[\/\s](\d+\.\d+)/', $agent) ) {
  echo "You're using Opera";
} else if (preg_match('/Safari[\/\s](\d+\.\d+)/', $agent) ) {
  echo "You're using Safari";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-13T14:05:41.780

PHP 8 有这个特性`$_SERVER['HTTP_SEC_CH_UA']` [Sec-CH-UA](https://wicg.github.io/ua-client-hints/#sec-ch-ua) 让你直接检测浏览器名称

```
if (  strpos ( $_SERVER['HTTP_SEC_CH_UA'],'Opera'   ){
       //        
    } 
```

# xslt - xsl 条件签入应用模板

> ID：10243842
> 
> 赞同：0
> 
> 时间：2012-04-20T09:47:55.803
> 
> 标签：xslt

我的 xsl 就像

```
<root>
    <tests>
        <test id="222">
         <actionId>233</actionId>
        </test>
        <test id="22">
         <actionId>23333</actionId>
        </test>
    </tests>
    <confs>
        <conf id="2211"></conf>
    </confs>
</root>

    <xsl:key name="confId" 
        match="confs/conf" 
        use="@id" /
<xsl:template match="main">
Test:
<xsl:apply-templates select="tests/test" />
</xsl:template>
 <xsl:template match="tests/test">
<xsl:choose>
            <xsl:when test="actionId[.='']">
                <li>
                    <xsl:choose>
                        <xsl:when test="key('confId', @id)">
                            Used </xsl:when>
                        <xsl:otherwise> Not found</xsl:otherwise>
                    </xsl:choose>
                </li>
            </xsl:when> 
            <xsl:otherwise> <li>Not at all found</li></xsl:otherwise>
        </xsl:choose>
 </xsl:template> 
```

现在，在此模板匹配的每次迭代中都会打印“根本找不到”消息，因为 actionId 不为空，如果不执行条件，我只需要打印一次。

预期输出是

*   完全没有找到当测试/测试模板中的 actionId 从未找到匹配项时仅打印一次，即*   完全没有找到不在模板中迭代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:17:34.147

每次激活 match="test" 模板时，它只能使用通过源文档中的测试元素、模板参数或全局变量获得的信息。它不能使用任何先前激活的知识，因为 XSLT 是无状态的。

如果您想以与其他元素不同的方式处理第一个测试元素，请编写两个不同的模板规则。

如果你想特别处理第一个带有 actionId[.=''] 的测试元素，那么编写一个与之匹配的模板规则：

```
<xsl:template match="test[actionId[.=''][1]"> 
```

# bash - 用于在循环中打开和关闭界面的 Bash 脚本

> ID：10243845
> 
> 赞同：1
> 
> 时间：2012-04-20T09:48:08.090
> 
> 标签：bash, shell, unix, networking, scripting

我使用 Ubuntu 服务器作为 NAT 路由器。WAN接口是`eth1`，LAN接口是`eth0`。我在 LAN 端使用 ucarp 虚拟 ip 进行故障转移。我正在编写一个脚本，`eth0`如果 WAN 链接或默认网关出现故障，它将关闭 LAN 接口（如果 LAN 接口出现故障，那么 ucarp 可以将 NAT 网关 ip 释放到网络上的另一个路由器）。此外，如果 WAN ip 被 ping 通，则 LAN 接口应该会出现并且应该保持开启，直到可以 ping 通 WAN ip。

**重击脚本：**

```
#!/bin/bash
t1=$(ifconfig | grep -o eth0)
t2="eth0"
#RMT_IP = "8.8.8.8"
SLEEP_TIME="10"

ping -c 2 8.8.8.8 > /dev/null
   PING_1=$?

if [ $PING_1 = 1 ]; then
    if [ "$t1" != "$t2" ]; then
        ifconfig eth0 up
        echo "Iface brought up"
    else
        echo "Iface is already up"
    fi
else
    if [ "$t1" = "$t2" ]; then
        ifconfig eth0 down
        echo "Iface brought down"
    else
        echo "iface already down"
    fi
fi

sleep $SLEEP_TIME 
```

该脚本对我不起作用。我想要的是，如果可以 ping 通 WAN ip，那么 LAN 接口`eth0`应该保持打开状态。如果无法 ping 通 WAN ip，则应关闭接口。该脚本应每 10 秒循环运行一次。如果 WAN ip 长时间无法 ping 通，`eth0`则应仅保持关闭状态，如果 WAN ip 在一段时间后 ping 通，`eth0`则应启动。我还计划在启动时运行脚本作为新贵的工作。

**编辑 1：** 我的最终脚本：

```
#!/bin/bash

timeout=5         # delay between checks
pingip='8.8.8.8'   # what to ping
iface="eth0"
LOG_FILE="/var/log/syslog"
isdown=0            # indicate whether the interface is up or down
                   # start assuming interface is up

while true; do
    LOG_TIME=`date +%b' '%d' '%T`
    if ping -q -c 2 "$pingip" >> /dev/null ; then      # ping is good - bring iface up
        if [ "$isdown" -ne 0 ] ; then
            ifup $iface && isdown=0
            printf "$LOG_TIME $0: Interface brought up: %s\n" "$iface" | tee -a $LOG_FILE
        fi
    else                                 # ping is bad - bring iface down
        beep -f 4000
        if [ "$isdown" -ne 1 ] ;  then
            ifdown $iface && isdown=1
            printf "$LOG_TIME $0: Interface brought down: %s\n" "$iface" | tee -a $LOG_FILE
        fi
    fi
    sleep "$timeout"
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:43:55.000

如果 ping 成功，请尝试这个，然后 如果 ping 失败，则`$iface`启动
`$iface`

```
#!/bin/bash

timeout=3               # delay between checks
iface="eth0"            # which interface to bring up/down
pingip='8.8.8.8'        # what to ping
isdown=-1               # indicate whether the interface is up(0) or down(1)
                        # start in unknown state

while true; do
    if ping -q -c 2 "$pingip"; then       # if ping is succeeds bring iface up
        if [ "$isdown" -ne 0 ]; then      # if not already up
            ifconfig "$iface" up && isdown=0
            printf ":: iface brought up: %s\n" "$iface"
        fi
    elif [ "$isdown" -ne 1 ]; then        # if ping failed, bring iface down, if not already down
        ifconfig "$iface" down && isdown=1
        printf ":: iface brought down: %s\n" "$iface"
    fi
    sleep "$timeout"
done 
```

# c# - 正确使用封装在类内的属性中的字段

> ID：10243851
> 
> 赞同：2
> 
> 时间：2012-04-20T09:48:36.137
> 
> 标签：c#, .net-2.0

我应该使用哪种方案来更改类方法/属性中的私有字段：

```
public class Example
{
 private int intVar = 0;
 private string stringVar = string.Empty;

 public int IntVar
 {
  get { return this.intvar; }
  set { this.intvar = value; }
 }

 public string StringVar 
 {
  get { return this.stringVar ; }
  set { this.stringVar = value; }
 }

 private void SomeMethod()
 {
  //change fields in this way:
  this.intVar = 50;
  this.stringVar = "changed";
  //or that way(through properties):
  this.IntVar = 50;
  this.StringVar = "changed";
 }
} 
```

也许在这个例子中没有什么区别，但是如果有人在属性中添加了额外的代码，并且通过属性改变字段会改变一些其他的东西呢？

你能说哪种方式更好，还是真的没有区别？

我知道从 C# 3.0 开始我可以编写自动实现的属性，但这是 C# 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:52:33.567

我会说使用属性通常更好。如果 getter 和 setter 很简单，它们可能会在运行时被抖动内联。正如您所说，可能会对属性代码进行其他更改。

一个常见的更改是通过实现 INotifyPropertyChanged 添加更改通知。如果您直接设置字段，那么侦听器将不会收到通知。

我更喜欢我的类使用他们自己的公共接口而不是内部。对我来说，一个例外是当我明确不想要任何副作用时。但这种情况很少见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:52:38.290

根据我的经验，始终使用属性，不要尝试直接访问您的 var。如果将来有人向属性访问器添加代码，则它有责任检查其更改的副作用。

在这种情况下，您将促进测试工作。变更实施者只需要检查公共名称而不是内部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:54:16.563

如果您进行某种验证，例如当 intVar 超过 100 值时将 Example 对象标记为无效，那么您应该使用 Properties。

```
public int IntVar
 {
  get { return this.intvar; }
  set 
      { 
         if ( value > 100)
            // handle this corner case
         else      
           this.intvar = value; 
      }
 } 
```

假设您的私有方法进行了一些计算

```
private void SomeMethod()
 {
   int result = ...;
   IntVar = result;
 } 
```

调用 SomeMethod 时最好在此处使用该属性，因此该属性将处理验证，因为该字段无法执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:51:50.657

它没有任何区别，是个人喜好。
我更喜欢使用属性。

# sql-server - 确定列值字符串是否以数字开头

> ID：10243852
> 
> 赞同：12
> 
> 时间：2012-04-20T09:48:37.287
> 
> 标签：sql-server

我有一个`Questions`带有列的表`Description`。它的列值是这样的：

```
This is First Heading, 
1 This is Subheading one, 
1.2 This is subheading Question
This is Second heading
2 This is subheading Two.
2.1 This is Subheading Question1 
```

对于每一行，我如何确定其列值是否以数字 0-9 开头？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T09:54:36.797

```
SELECT CASE WHEN ISNUMERIC(SUBSTRING(LTRIM(Description), 1, 1)) = 1 
         THEN 'yes' 
         ELSE 'no' 
       END AS StartsWithNumber
FROM Questions 
```

*   [数字](http://msdn.microsoft.com/en-us/library/ms186272.aspx)
*   [子串](http://msdn.microsoft.com/de-de/library/ms187748%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-24T19:24:26.507

```
SELECT * FROM Questions WHERE Description LIKE '[0-9]%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:52:59.057

您可以使用以下查询。首先从左侧删除多余的空间并获得第一个左侧字符。如果不是数字，则此查询返回 0，否则返回 1。

```
Select ISNUMERIC(Left(Ltrim('1 This is Subheading'),1)) As Number 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:54:27.840

```
select true where cast(substring('1 This is Subheading', 1, 1) as int) between 0 AND 9 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-06-28T05:37:17.710

select * from TABLE_NAME where (YourColName like '0%' or YourColName like '1%' or YourColName like '2%' or YourColName like '3%' or YourColName like '4%' or YourColName like '5%' or YourColName like '6%' 或 YourColName like '7%' 或 YourColName like '8%' 或 YourColName like '9%')

# android - 在 android 上使用 protobuf 将数据发送到 WCF 服务（使用 protobuf.net）

> ID：10243854
> 
> 赞同：1
> 
> 时间：2012-04-20T09:48:45.843
> 
> 标签：android, .net, wcf, blob, protocol-buffers

我需要将包含 256kb 到 18Mb 数据的对象从 android 设备发送到 WCF 服务。我刚刚发现了 protobuf.net 并同意这是要走的路。我发现显示在 android 上使用 protobuf 的大多数示例都旨在进行如下查询：

> www.webservice.com/API/MaxItems=10。我需要一种将整个 BLOB 发送到我的网络服务的方法，而不仅仅是参数。谁能指出我使用 android 2.3.3 和 WCF.Net 进行编码的正确方向？

我的情况如下：

Webservice 正在为使用 .Net 和 Silverlight 的客户端以及 android 平台上的客户端提供服务。Webservice 将使用 protobuf 将来自文件系统和 SQL 的数据提供给客户端。提供的数据将包含基本类型和较小的二进制块。4-50Kb 作为 protobuf 对象。将有 17 个函数以基本类型为参数，6 个函数以 protobuf 对象为参数。其中一个函数将采用一个 protobuf 对象，该对象具有 4 byte[]，总和最大为 18Mb。

服务数据的特性使 protobuf 成为完美匹配。

WebService API 的要求之一是将所有这些功能保存在一个接口中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:44:28.403

*就个人而言，我认为在这种情况下*（使用 android 等）你最好的选择是使用常规的内存序列化来创建一个 BLOB，然后使用任何可用的工具（http-post、WSE、套接字等）发送它BLOB，并在另一端反序列化。让 WCF 拥有序列化/反序列化是一个巨大的痛苦，特别是如果您没有使用完整的 .NET。如果需要，这种方法还应该可以很容易地在传输类型之间完全切换，因为您并没有真正要求 WCF 做很多事情。

# javascript - 谷歌地图：在markerclusterer上方渲染标记

> ID：10243855
> 
> 赞同：13
> 
> 时间：2012-04-20T09:48:56.583
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, markerclusterer

我有一组标记聚集在我的地图上。另一组标记单独显示，我碰巧需要将这些标记显示在群集上方。我尝试在集群选项对象中设置 zIndex，低于第二组标记，但无济于事。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:01:46.250

它可以完成，但在你到达那里之前这是一个相当颠簸的方式......正如 Rick 所说，问题在于 MarkerClusterer 添加了一个自己的 OverlayView，其群集图标位于较高的窗格中作为常规标记。在集群上方添加标记的唯一方法是用他自己的武器击败集群并添加自己的 OverlayView 并将标记图标标记添加到更高的窗格（[在此处](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)阅读有关窗格的信息）。我真的不喜欢它——但这是我找到的唯一方法。

为此，您必须创建一个实现 google.maps.OverlayView（[参考](https://developers.google.com/maps/documentation/javascript/reference#OverlayView)）的自定义叠加层，可以在[此处](http://nickjohnson.com/b/google-maps-v3-how-to-quickly-add-many-markers)找到一个很好的示例（带有解释，我使用了其中的一些代码）。

这是一个粗略的 CustomOverlay 原型：

```
// build custom overlay class which implements google.maps.OverlayView
function CustomOverlay(map, latlon, icon, title) {
    this.latlon_ = latlon;
    this.icon_ = icon;
    this.title_ = title;
    this.markerLayer = jQuery('<div />').addClass('overlay');
    this.setMap(map);
};
CustomOverlay.prototype = new google.maps.OverlayView;
CustomOverlay.prototype.onAdd = function() {
    var $pane = jQuery(this.getPanes().floatPane); // Pane 6, one higher than the marker clusterer
    $pane.append(this.markerLayer);
};
CustomOverlay.prototype.onRemove = function(){
    this.markerLayer.remove();
};
CustomOverlay.prototype.draw = function() {
    var projection = this.getProjection();
    var fragment = document.createDocumentFragment();

    this.markerLayer.empty(); // Empty any previous rendered markers

    var location = projection.fromLatLngToDivPixel(this.latlon_);
    var $point = jQuery('<div class="map-point" title="'+this.title_+'" style="'
                            +'width:32px; height:32px; '
                            +'left:'+location.x+'px; top:'+location.y+'px; '
                            +'position:absolute; cursor:pointer; '
                        +'">'
                        +'<img src="'+this.icon_+'" style="position: absolute; top: -16px; left: -16px" />'
                    +'</div>');

    fragment.appendChild($point.get(0));
    this.markerLayer.append(fragment);
}; 
```

此叠加层获取地图、LatLng 对象和图标的 URL。好处是您可以将自己的 HTML 写入图层，坏处是您必须自己处理 Maps API 为您所做的所有事情（例如标记图像锚点处理）。该示例仅适用于锚点位于图像中间的 32x32px 图像，因此仍然很粗糙。

要使用 CustomOverlay，只需像这样实例化它：

```
// your map center / marker LatLng
var myLatlng = new google.maps.LatLng(24.247471, 89.920990);

// instantiate map
var map = new google.maps.Map(
    document.getElementById("map-canvas"),
    {zoom: 4, center: myLatlng, mapTypeId: google.maps.MapTypeId.ROADMAP}
);  

// create the clusterer, but of course with markers
//var markerClusterer = new MarkerClusterer(map, []);

// add custom overlay to map
var customCustomOverlay = new CustomOverlay(map, myLatlng, 'http://www.foo.bar/icon.png'); 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T10:22:59.330

我有同样的问题，但不想处理新的覆盖。

无需创建特定的叠加层，您只需切换叠加层的父容器 z-index。

这可以通过使用以下函数来实现：

```
_changeOverlayOrder = function(map) {
    var panes = map.getPanes();
    var markerOverlayDiv = panes.overlayImage.parentNode;
    var clusterOverlayDiv = panes.overlayMouseTarget.parentNode;
    // Make the clusters clickable.
    if(!markerOverlayDiv.style.pointerEvents) {
        markerOverlayDiv.style.cssText += ";pointer-events: none;";
    }
    // Switch z-indexes
    if(markerOverlayDiv.style.zIndex < clusterOverlayDiv.style.zIndex) {
        var tmp = markerOverlayDiv.style.zIndex;
        markerOverlayDiv.style.zIndex = clusterOverlayDiv.style.zIndex;
        clusterOverlayDiv.style.zIndex = tmp;
    }
}; 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T14:57:19.600

据我所知，这是做不到的。簇位于比标记图像更高的窗格中。

[https://developers.google.com/maps/documentation/javascript/reference#MapPanes](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-12T07:11:14.700

您可以使用 CSS 覆盖它。

CSS

```
.gm-style-pbc + div > div > div:first-child{ z-index: 108 !important; } 
```

SCSS

```
.gm-style-pbc{
   + div{
     > div{
       >div{
         &:first-child{
            z-index: 108 !important;
         }
       }
     }
   }
} 
```

# c++ - gcc 4.7 STL库对实现的不足？

> ID：10243856
> 
> 赞同：1
> 
> 时间：2012-04-20T09:49:01.787
> 
> 标签：c++, gcc, g++

以下代码在 gcc 4.6 但不是 4.7 上编译。是4.7的问题还是4.6的问题？使用 -std=gnu++0x 编译。

```
#include <utility>

using namespace std;

struct Z {
};

struct X {
    operator Z*() const { return nullptr; }
};

struct Y {
    Y(Z*) {}
};

int main() {
    pair<int, Y> p(make_pair(0, X()));
} 
```

错误信息：

```
[hidden]$ g++-mp-4.6 -std=gnu++0x e.cpp 
[hidden]$ g++-mp-4.7 -std=gnu++0x e.cpp 
e.cpp: In function 'int main()':
e.cpp:17:37: error: no matching function for call to 'std::pair<int, Y>::pair(std::pair<int, X>)'
e.cpp:17:37: note: candidates are:
In file included from /opt/local/include/gcc47/c++/utility:72:0,
                 from e.cpp:1:
/opt/local/include/gcc47/c++/bits/stl_pair.h:204:9: note: template<class ... _Args1, long unsigned int ..._Indexes1, class ... _Args2, long unsigned int ..._Indexes2> std::pair::pair(std::tuple<_Args1 ...>&, std::tuple<_Args2 ...>&, std::_Index_tuple<_Indexes1 ...>, std::_Index_tuple<_Indexes2 ...>)
/opt/local/include/gcc47/c++/bits/stl_pair.h:204:9: note:   template argument deduction/substitution failed:
e.cpp:17:37: note:   'std::pair<int, X>' is not derived from 'std::tuple<_Args1 ...>'
In file included from /opt/local/include/gcc47/c++/utility:72:0,
                 from e.cpp:1:
/opt/local/include/gcc47/c++/bits/stl_pair.h:153:9: note: template<class ... _Args1, class ... _Args2> std::pair::pair(std::piecewise_construct_t, std::tuple<_Args1 ...>, std::tuple<_Args2 ...>)
/opt/local/include/gcc47/c++/bits/stl_pair.h:153:9: note:   template argument deduction/substitution failed:
e.cpp:17:37: note:   cannot convert 'std::make_pair(_T1&&, _T2&&) [with _T1 = int; _T2 = X; typename std::__decay_and_strip<_T2>::__type = X; typename std::__decay_and_strip<_T1>::__type = int]((* & X()))' (type 'std::pair<int, X>') to type 'std::piecewise_construct_t'
In file included from /opt/local/include/gcc47/c++/utility:72:0,
                 from e.cpp:1:
/opt/local/include/gcc47/c++/bits/stl_pair.h:148:12: note: template<class _U1, class _U2, class> constexpr std::pair::pair(std::pair<_U1, _U2>&&)
/opt/local/include/gcc47/c++/bits/stl_pair.h:148:12: note:   template argument deduction/substitution failed:
/opt/local/include/gcc47/c++/bits/stl_pair.h:145:38: error: no type named 'type' in 'struct std::enable_if<false, void>'
/opt/local/include/gcc47/c++/bits/stl_pair.h:142:12: note: template<class _U1, class _U2, class> constexpr std::pair::pair(_U1&&, _U2&&)
/opt/local/include/gcc47/c++/bits/stl_pair.h:142:12: note:   template argument deduction/substitution failed:
e.cpp:17:37: note:   candidate expects 2 arguments, 1 provided
In file included from /opt/local/include/gcc47/c++/utility:72:0,
                 from e.cpp:1:
/opt/local/include/gcc47/c++/bits/stl_pair.h:136:12: note: template<class _U2, class> constexpr std::pair::pair(const _T1&, _U2&&)
/opt/local/include/gcc47/c++/bits/stl_pair.h:136:12: note:   template argument deduction/substitution failed:
e.cpp:17:37: note:   cannot convert 'std::make_pair(_T1&&, _T2&&) [with _T1 = int; _T2 = X; typename std::__decay_and_strip<_T2>::__type = X; typename std::__decay_and_strip<_T1>::__type = int]((* & X()))' (type 'std::pair<int, X>') to type 'const int&'
In file included from /opt/local/include/gcc47/c++/utility:72:0,
                 from e.cpp:1:
/opt/local/include/gcc47/c++/bits/stl_pair.h:131:12: note: template<class _U1, class> constexpr std::pair::pair(_U1&&, const _T2&)
/opt/local/include/gcc47/c++/bits/stl_pair.h:131:12: note:   template argument deduction/substitution failed:
e.cpp:17:37: note:   candidate expects 2 arguments, 1 provided
In file included from /opt/local/include/gcc47/c++/utility:72:0,
                 from e.cpp:1:
/opt/local/include/gcc47/c++/bits/stl_pair.h:122:7: note: std::pair<_T1, _T2>::pair(std::pair<_T1, _T2>&&) [with _T1 = int; _T2 = Y; std::pair<_T1, _T2> = std::pair<int, Y>]
/opt/local/include/gcc47/c++/bits/stl_pair.h:122:7: note:   no known conversion for argument 1 from 'std::pair<int, X>' to 'std::pair<int, Y>&&'
/opt/local/include/gcc47/c++/bits/stl_pair.h:119:17: note: constexpr std::pair<_T1, _T2>::pair(const std::pair<_T1, _T2>&) [with _T1 = int; _T2 = Y; std::pair<_T1, _T2> = std::pair<int, Y>]
/opt/local/include/gcc47/c++/bits/stl_pair.h:119:17: note:   no known conversion for argument 1 from 'std::pair<int, X>' to 'const std::pair<int, Y>&'
/opt/local/include/gcc47/c++/bits/stl_pair.h:116:12: note: template<class _U1, class _U2, class> constexpr std::pair::pair(const std::pair<_U1, _U2>&)
/opt/local/include/gcc47/c++/bits/stl_pair.h:116:12: note:   template argument deduction/substitution failed:
/opt/local/include/gcc47/c++/bits/stl_pair.h:113:38: error: no type named 'type' in 'struct std::enable_if<false, void>'
/opt/local/include/gcc47/c++/bits/stl_pair.h:104:26: note: constexpr std::pair<_T1, _T2>::pair(const _T1&, const _T2&) [with _T1 = int; _T2 = Y]
/opt/local/include/gcc47/c++/bits/stl_pair.h:104:26: note:   candidate expects 2 arguments, 1 provided
/opt/local/include/gcc47/c++/bits/stl_pair.h:100:26: note: constexpr std::pair<_T1, _T2>::pair() [with _T1 = int; _T2 = Y]
/opt/local/include/gcc47/c++/bits/stl_pair.h:100:26: note:   candidate expects 0 arguments, 1 provided 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:00:24.213

那不应该编译。

的初始化需要从到`p.second`的隐式转换。隐式转换最多只能涉及一个用户定义的转换。所需的转换需要两个；通过转换运算符，并通过转换构造函数。`X``Y``X``Z*``Z*``Y`

仅允许通过隐式转换从另一对初始化对元素。C++11 说：

> 20.3.2/12 此构造函数不应参与重载决议，除非`const U&`它可以隐式转换为`first_type`并且`const V&`可以**隐式转换**为`second_type`。

和 C++98 说：

> 20.2.2/4 从参数的相应成员初始化成员，根据需要**执行隐式转换**。

据推测，旧版本有一个允许考虑此转换的错误，并且该错误已在较新的版本中修复。

# android - 在应用程序启动时下载 XML 文件并切换到无缝使用它

> ID：10243865
> 
> 赞同：0
> 
> 时间：2012-04-20T09:49:29.703
> 
> 标签：android, download, android-xml

我正在构建一个查找附近 wifi 热点的 android 应用程序。我有一个包含热点地理位置的 xml 文件，该 xml 文件位于应用程序的 res/xml 文件夹中。我想在应用程序启动时下载更新的 xml 文件。我有两个问题：

1.  我应该将 xml 文件下载到内部存储还是外部存储中，为什么？如果我应该将 xml 文件下载到内部存储中，我该怎么做？
2.  我希望用户能够在应用程序首次启动时使用最初嵌入的 xml 文件，并在下载完成时切换到新下载的 xml 文件。我怎样才能无缝地实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:11:35.460

查看 Google 关于 Android 数据存储的页面。 [http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

您可以通过非常简单的方式下载 XML 文件。另一个像你这样的问题在这里被问到：

[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

在该示例中，文件被保存到 SD 卡中。请务必更改指向 SD 卡的 OutputStream，使其指向私有存储，如参考页面所述：

```
FileOutputStream fos = openFileOutput(your_xml_filename, Context.MODE_PRIVATE); 
```

为了尽可能简单地切换到新的 XML，我将所有与 XML 相关的功能封装在一个类中，并提供一种简单的方法来切换到新的 XML。例如，

```
class XMLUser {
    private Location someLocation;

    public XMLUser(String pathToXml) { 
        readxmlAndSetLocations(pathToXml);      
    }
} 
```

然后在需要更改 XML 文件时初始化一个新的 XMLUser 对象。像这样：

```
XMLUser xmlStuff = new XMLUser(PATH_TO_RES_FILE);
//... do something with it
//... update found
XMLUser xmlStuff = new XMLUser(PATH_TO_PRIVATEDATA_FILE); 
```

另一种方法是使用相同的对象并仅更新 XML 文件中的位置：

```
 class XMLUser {
        private Location someLocation;

        public void updateLocations(String pathToXml) { 
            //Read your xml here and update the locations accordingly.      
        }
    } 
```

例如

```
XMLUser xmlStuff = new XMLUser(PATH_TO_RES_FILE);
//... do something with it
//... update found
xmlStuff.updateLocations(PATH_TO_UPDATED_XML); 
```

您的问题可以提供多种答案，因此我无法给出快速准确的答案。

是的，我确实建议将 XML 数据保存到内部存储中。XML 文件的大小应该足够小，不会造成问题，并且从逻辑上讲，它与应用程序的内部功能有关。用户不应篡改。另外，内部存储是不可移动的，所以如果用户更换了 SD 卡，更新的数据仍然存在。

# c# - C#：在父控件中临时捕获 OnClick 事件

> ID：10243866
> 
> 赞同：0
> 
> 时间：2012-04-20T09:49:34.190
> 
> 标签：c#, winforms, events

我有一个 Windows 窗体应用程序，我希望能够在用户执行特定操作时显示“便利贴”类型的东西。

例如：用户做了一些自动隐藏控件的操作。

我的应用程序应该： o 弹出一个便条，解释发生了什么。o 当用户单击表单上的任意位置时，再次隐藏 post it note。

我已经将便笺实现为一个带有标签的简单面板，当特定事情发生时它会显示和隐藏。

但是，我似乎无法捕获父 UserControl 的 OnClick 事件。父控件是一个嵌套控件，包含一个拆分容器，其中一侧包含面板和一个选项卡控件，每个控件都包含一个用户控件，其中包含各种内容。

除了处理每个子控件的单击事件之外，任何人都可以想到我可以在父控件上捕获的事件，当用户单击父控件中的任何位置时，我可以使用它来隐藏便笺？

谢谢，里克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:00:51.717

这就是 Capture 属性的设计目的。弹出注释时将其设置为*true 。*现在，任何鼠标事件都将被定向到您的控件，即使鼠标移出窗口也是如此。这也是例如组合框下拉列表的工作方式。请记住，它仅适用于单击一次。

如果弹出窗口本身包含任何控件，则鼠标捕获不是解决方案。改为使其成为拥有的表单，只需在 Deactivate 事件的事件处理程序中调用 Close()。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T09:57:41.387

Windows窗体中的事件冒泡，当您单击子事件时，会为子事件引发事件，然后为父事件引发事件。除非您将“handleEvnet”属性指定为 true。因此，只需将其保留为假，直到事件到达父级。

# php - yii 框架填充 textarea 中的值

> ID：10243867
> 
> 赞同：4
> 
> 时间：2012-04-20T09:49:37.413
> 
> 标签：php, frameworks, yii

我需要在 textarea 中填充值。

对于文本字段，我使用了以下命令`$form->textField($model,'phone',array('value'=>$savedvalues['varPhone']))`

它工作正常。但对于 textarea，不支持 'value' 参数。

在这里我必须显示我的值参数

```
$form->textArea($model, 'corporateaddress', array('rows'=>6, 'cols'=>50)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T10:41:58.807

如果您绝对必须使用`$savedvalues`数组，您可以这样做：

```
$model->corporateaddress=$savedvalues['varCorporateAddress'];
$form->textArea($model, 'corporateaddress', array('rows'=>6, 'cols'=>50)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:54:52.873

textarea 的值将设置为`$model->corporateaddress`. 如果是这种情况，您可以在模型中设置默认值。

我在这里发现了一个类似的问题：

[http://www.yiiframework.com/forum/index.php/topic/10454-textarea-set-default-text/](http://www.yiiframework.com/forum/index.php/topic/10454-textarea-set-default-text/)

# asp.net-mvc-3 - Devexpress 网格中的下拉过滤器

> ID：10243871
> 
> 赞同：0
> 
> 时间：2012-04-20T09:49:51.857
> 
> 标签：asp.net-mvc-3, razor, devexpress

我想按列过滤行，以便我可以在过滤列下拉列表中选择多个项目（下拉列表中的项目最好是复选框）。你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:18:37.747

目前，ASPxGridView/MVC GridView Extension 都不支持多选过滤器。

有关于此改进的请求：

[像多选过滤器一样旋转](http://www.devexpress.com/Support/Center/p/S90968.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:39:54.377

将列设置`OptionsFilter.FilterPopupMode`为 CheckedList。

[http://www.devexpress.com/Support/Center/p/Q250696.aspx](http://www.devexpress.com/Support/Center/p/Q250696.aspx)

# jquery - 使用 ORBEON.xforms.Document.setValue 更新底层 xml

> ID：10243873
> 
> 赞同：0
> 
> 时间：2012-04-20T09:49:56.683
> 
> 标签：jquery, orbeon, xforms

我有一个绑定到 xml 节点集的 xforms 字段。当我手动将数据输入字段时，它会完美地更新底层 xml。

但我正在尝试使用一些 jquery 来填充该字段。这只有一半有效，因为它确实填充了字段，但不会更改底层 xml

这是我正在使用的js（用于测试目的的focus（））。

```
$(".myinput").focus(function() {
    var myId = $(this).attr('id');
    alert("i am trying to update " + myId);
    ORBEON.xforms.Document.setValue(myId, "test");
    }); 
```

有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:55:45.397

是的。这个有可能。浏览下面的链接并在您的代码中进行一些调整。它确实有效。

[http://wiki.orbeon.com/forms/doc/developer-guide/xforms-javascript-integration](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-javascript-integration)

基本上使用 JS，我们将更新控件的值，这将触发实例的重新计算，从而触发底层 xml 更改。

# networking - UDP 或 HTTP over TCP/IP 用于简单的多人游戏

> ID：10243874
> 
> 赞同：1
> 
> 时间：2012-04-20T09:49:57.850
> 
> 标签：networking, web-applications, tcp, udp, multiplayer

我正在构建一个多人游戏，玩家同时被问到一个问题，他们必须选择一个答案。他们有几秒钟的时间来回答，当时间到或每个人都回答时，他们会被问到下一个问题。

我计划在服务器端使用 Java（或 nodeJS，如果我想学习一个新框架），在客户端使用 JS（jQuery 和 jQuery Mobile）。我以后也可能会构建原生应用程序，所以我想保持该选项处于打开状态。

我的问题是：你会建议什么服务器通信协议？

我正在考虑常规的 TCP（带有 Ajax 的 HTTP）调用，因为延迟并不是真正的问题，但如果您提出其他建议，我已准备好审查此选择。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:44:56.337

使用 UDP 时，实现重试和拥塞控制的负担将落在*您身上*。因此，我建议您坚持使用可靠且简单的 TCP，直到有特定原因切换。如果延迟被证明是不可接受的，我怀疑你的情况，你可以切换到 UDP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T15:55:41.583

TCP/IP 上的 HTTP 流和 WebSockets 是最好的方法。利用 HTTP 和 WebSockets 的 Lightstreamer 使用 TCP，但试图通过一些智能算法来克服它的一些限制，以减少延迟（这似乎对您描述的游戏至关重要）和带宽优化。因此，它可以用于任何复杂的多人游戏（例如，包括 MMORPG）。乍一看它似乎可以满足您的要求，如果您还计划在第二步中开发原生应用程序，它可能是一个很好的解决方案。

Lightstreamer 基于发布/订阅模型，其中每个项目都由一组字段定义，其值可以随时间变化（以毫秒为单位）。这些可以包括“一般项目”，由任何用户订阅（例如游戏倒计时；谁是第一响应者）并实时交付。这样，您的游戏逻辑底层的数据传输机制似乎很容易使用 Lightstreamer 实现。

看看最近的这篇文章（[通过 Web 优化多人 3D 游戏同步](http://blog.lightstreamer.com/2013/10/optimizing-multiplayer-3d-game.html)）。您可以浏览一个简单的多人 3D 世界的在线演示，其中集成了 Lightstreamer 以实现实时同步。

该演示允许您调整场景的每个参数并模拟任何类型的数据传输，同时检查实际带宽消耗。当然，完整的源代码可以在 GitHub 上免费获得。你可以试一试。如果您需要帮助，请告诉我：）

[全面披露：我为 Lightstreamer 工作]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:32:36.283

还有一点要记住，如果您是在移动设备上创建游戏并且不想失去通过 3G 连接的玩家，则需要确保使用标准端口连接到服务器端，否则运营商会断开连接你。

# memory - 了解文件映射

> ID：10243875
> 
> 赞同：0
> 
> 时间：2012-04-20T09:49:58.190
> 
> 标签：memory, system, mmap

我尝试理解 mmap 并阅读以下链接：http:
[//duartes.org/gustavo/blog/post/page-cache-the-affair-between-memory-and-files](http://duartes.org/gustavo/blog/post/page-cache-the-affair-between-memory-and-files)

我总体上理解文本，这对我来说很有意义。但最后是一段，我不是很理解或者不符合我的理解。

> 上面显示的只读页表条目并不意味着映射是只读的，它们只是共享物理内存直到最后一刻的内核技巧。您可以看到“私人”是多么用词不当，直到您记住它仅适用于更新。这种设计的结果是，映射文件的虚拟页面私下看到其他程序对该文件所做的更改*，只要该页面仅被读取过*. 一旦写时复制完成，其他人的更改将不再可见。内核不保证这种行为，但这是您在 x86 中得到的，并且从 API 的角度来看是有意义的。相比之下，共享映射只是映射到页面缓存，仅此而已。更新对其他进程可见并最终保存在磁盘中。最后，如果上面的映射是只读的，页面错误将触发分段错误而不是写时复制。

对线的跟随与我不匹配。我看没有道理。

> 这种设计的一个结果是，一个映射文件的虚拟页面私下看到其他程序对该文件所做的更改*，只要该页面仅被读取过*。

它是私人的。所以它看不到别人的变化！

> 最后，如果上面的映射是只读的，页面错误将触发分段错误而不是写时复制。

不知道作者这句话是什么意思。他们的标志是“MAP_READ_ONLY”吗？在发生写入之前，从程序虚拟页面到页面缓存中的页面表条目的每个指针都是*只读的*。

你能帮我理解这两行吗？谢谢

**更新**
它似乎得到了它，有一些帮助。

> 这种设计的结果是，映射文件的虚拟页面私下看到其他程序对该文件所做的更改，只要该页面仅被读取过。

尽管映射是私有的，但虚拟页面确实可以看到其他人的更改，直到它修改自己的页面。修改变为**私有**，只对编写程序的虚拟页面可见。

> 最后，如果上面的映射是只读的，页面错误将触发分段错误而不是写时复制。

我被告知页面本身也可以具有权限（读/写/执行）。

如果我错了，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:10:16.523

这个片段：

> 这种设计的一个结果是，一个映射文件的虚拟页面私下看到其他程序对该文件所做的更改*，只要该页面只是从*.

是在告诉你内核以优化的名义作弊。即使您已经要求私有映射，内核实际上也会首先给您一个共享映射。然后，如果您编写该页面，它就会变成私有的。

请注意，如果正在访问文件的所有进程都在使用 执行此操作，则此“作弊”无关紧要（没有任何区别）`MAP_PRIVATE`，因为在这种情况下不会发生对文件的实际更改。根据每个进程首次写入文件的时间，不同进程的映射将在不同时间简单地从“假作弊 MAP_PRIVATE”升级为真正的“MAP_PRIVATE”。这可能是一种常见的情况。只有通过其他方式（`MAP_SHARED`使用`PROT_WRITE`或其他常规的非`mmap`I/O 操作）同时更新文件时，它才会有所作为。

> 我被告知页面本身也可以具有权限（读/写/执行）。

当然，他们可以。您必须在最初映射文件时询问您想要的权限，事实上：第三个参数是`mmap`，它将是`PROT_READ`、`PROT_WRITE`、`PROT_EXEC`和的组合`PROT_NONE`。

# python - 使用不是列表长度的可分割因子的形状进行整形

> ID：10243878
> 
> 赞同：1
> 
> 时间：2012-04-20T09:50:12.603
> 
> 标签：python, numpy

我会用一种简单的方法（最好是一行）来重塑列表

```
[1,2,3,4,5,6,7,8,9,10,"prime"] 
```

进入

```
[[1,2],[3,4],[5,6],[7,8],[9,10],["prime"]] 
```

或者

```
[[1,2,3],[4,5,6],[7,8,9],[10,"prime"]] 
```

或者

```
[[1,2,3,4],[5,6,7,8],[9,10,"prime"]] 
```

...

当我传递不同的参数时（上面的示例为 2,3,4）。

numpy.reshape 不能这样做，因为列表的长度不能被 2、3、4 整除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T09:52:48.997

```
>>> l = [1,2,3,4,5,6,7,8,9,10,"prime"]
>>> [l[i:i+2] for i in xrange(0, len(l), 2)]
[[1, 2], [3, 4], [5, 6], [7, 8], [9, 10], ['prime']]
>>> [l[i:i+3] for i in xrange(0, len(l), 3)]
[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 'prime']]
>>> [l[i:i+4] for i in xrange(0, len(l), 4)]
[[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 'prime']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:08:16.737

取自[Python 文档](http://docs.python.org/py3k/library/itertools.html#itertools-recipes)，适用于任何可迭代的答案：

在 Python 3 中：

```
from itertools import zip_longest

def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return zip_longest(*args, fillvalue=fillvalue) 
```

在 Python 2.x 中：

```
from itertools import izip_longest

def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:33:40.270

或者你可以使用 numpy.split：

```
data = np.array([1,2,3,4,5,6,7,8,9,10,"prime"], dtype=np.object)
np.split(data, np.r_[:len(data):3][1:]) 
```

# math - 在整数环中使用 FFT 进行乘法

> ID：10243885
> 
> 赞同：2
> 
> 时间：2012-04-20T09:50:52.037
> 
> 标签：math, fft, multiplication, arbitrary-precision

我需要在整数环中使用 FFT 将长整数与任意 BASE 数字相乘。`n = 2^k`some的操作数总是有长度的`k`，并且卷积向量具有`2n`分量，因此我需要一个`2n'th`原始单位根。

我不是特别关心效率问题，所以我不想使用 Strassen & Schönhage 的算法——只计算基本卷积，然后进行一些进位，仅此而已。

尽管对很多数学家来说似乎很简单，但我对代数的理解真的很糟糕，所以我有很多问题：

1.  `2^n + 1`在整数环模（可能是复合）和整数 FIELDS 模一些素数中执行 FFT 之间有什么本质区别或细微差别`p`？

    我问这个是因为在这样一个环中`2`是一个`(2n)th`原始的统一根，因为`2^n == -1 (mod 2^n+1)`。相反，整数字段需要我搜索这样的原始根。

    但也许还有其他细微差别会阻止我将这种形式的环用于 FFT。

2.  `2^n`如果我选择整数环，那么在这个领域中存在 -th 单位根的 充分条件是什么？

    所有其他`2^k`小阶单位的根都可以通过平方这个根来获得，对吧？..

3.  环模乘法有哪些基本限制？也许在它们的长度上，也许在数字基础上，甚至可能在用于乘法的数字类型上。

    我怀疑如果通过模运算减少卷积的系数，可能会丢失一些信息。这是真的吗？为什么？.. 有哪些一般条件可以让我避免这种情况？

4.  `long`对于 FFT 向量、它们的乘积和卷积向量，是否有可能仅原始类型的动态列表（即）就足够了？或者我应该将系数转换为`BigInteger`以防万一（我真正应该的“情况”是什么）？

如果对这些问题的一般回答需要太长时间，我会特别满意在以下条件下的回答。我`2^30`在字段 Z_70383776563201 中找到了顺序统一的原始根表：

[http://people.cis.ksu.edu/~rhowell/calculator/roots.html](http://people.cis.ksu.edu/~rhowell/calculator/roots.html)

因此，如果我使用`2^30`th 单位根来乘以 length 的数量，`2^29`我应该考虑哪些精度/算法/效率的细微差别？..

非常感谢您！我将奖励最佳答案 - 请考虑帮助提供一些示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:36:17.977

首先，关于你的身份的算术线索：`70383776563201 = 1 + 65550 * 2^30`。而那个长数是素数。[在How the FFT constants were found](http://people.cis.ksu.edu/~rhowell/calculator/how.html)页面上有很多关于您的模数的见解。

这是您应该知道的群论事实。整数模 N 的乘法群是循环群的乘积，循环群的阶数由 N 的素数因子决定。当 N 为素数时，有一个循环。然而，这种循环群中元素的阶数与 的素因子有关`N - 1`。`70383776563201 - 1 = 2^31 * 3^1 * 5^2 * 11 * 13`, 指数给出了元素的可能顺序。

(1) 您不一定需要一个原始根，您需要一个其阶数至少足够大的根。有一些用于查找“高”阶元素的概率算法。它们用于密码学，以确保您拥有强大的密钥材料参数。特别是对于 2^n+1 形式的数字，它们受到了很多因式分解的关注，您可以查看结果。

(2) 模数示例说明了 2^n 阶元素的充分（和必要）条件。条件是模数的某个素因子`p`必须具有 的性质`2^n | p - 1`。

(3) 信息丢失仅发生在元素不是乘法可逆的情况下，而素数模的循环乘法群则不是这种情况。如果您在具有复合模数的模环中工作，则某些元素不是那么可逆。

(4) 如果您想使用 的数组`long`，您实际上将重写您的大整数库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T18:05:04.120

假设我们需要计算两个 n 位整数乘法，其中

```
n = 2^30;
m = 2*n; p = 2^{n} + 1 
```

现在， `w = 2, x =[w^0,w^1,...w^{m-1}] (mod p)`.

问题是，对于每个 x[i]，它都会太大，我们无法在 O(1) 时间内完成 w*a_i。

# android - android从相机预览中保存图像

> ID：10243890
> 
> 赞同：0
> 
> 时间：2012-04-20T09:51:14.337
> 
> 标签：android, android-camera

嗨，我正在尝试使用此代码保存图像，

[谷歌相机预览](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/CameraPreview.html)

但我有问题。我应该在哪里添加代码来保存图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:56:56.623

> [http://www.android10.org/index.php/articlesmultimedia/278-using-camera-api-in-android](http://www.android10.org/index.php/articlesmultimedia/278-using-camera-api-in-android)

# lazy-loading - Datamapper 中的上下文延迟加载 - 如何？

> ID：10243894
> 
> 赞同：1
> 
> 时间：2012-04-20T09:51:23.233
> 
> 标签：lazy-loading, datamapper

Datamapper 文档很好地告诉我如何在[此处](http://datamapper.org/articles/spotlight_on_laziness.html)设置上下文延迟加载，但不幸的是它没有告诉我如何在记录检索中实际传递上下文。

我想它会是这样的：

```
id = 10
hotel = Hotel.get(id, :context => :detailed) 
```

或类似的东西。有人可以提供一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:06:37.010

读取惰性属性时，同一上下文中的所有属性都将加载到同一查询中。没有其他方法可以指定上下文。也许您应该修补 Datamapper 或编写功能请求。

# spring - 指向 Spring @RequestMapping 的切入点

> ID：10243896
> 
> 赞同：0
> 
> 时间：2012-04-20T09:51:27.267
> 
> 标签：spring, mapping, aop, pointcut

我现在正试图在我的 Spring 项目上启用 AOP。我想在@RequestMapping 完成后执行代码（会话清理）。这是我的**applicationContext.xml**（只需加载引用的资源

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><beans 
xmlns="http://www.springframework.org/schema/beans"  
xmlns:aop="http://www.springframework.org/schema/aop"  
xmlns:context="http://www.springframework.org/schema/context"  
xmlns:jee="http://www.springframework.org/schema/jee" 
xmlns:tx="http://www.springframework.org/schema/tx" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.springframework.org/schema/beans       
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-2.5.xsd
http://www.springframework.org/schema/jee
http://www.springframework.org/schema/jee/spring-jee-2.5.xsd">

    <!-- ******************************************************************** -->
    <!-- Include context files from different layers -->
    <!-- ******************************************************************** -->
    <import resource="classpath:appname-security-context.xml"/>
    <import resource="classpath:appname-service-context.xml"/>
    <import resource="classpath:appname-dao-context.xml"/>

</beans> 
```

**安全上下文：**

```
<?xml version="1.0" encoding="UTF-8"?>
    <beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security" 
    xmlns:lang="http://www.springframework.org/schema/lang"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security    http://www.springframework.org/schema/security/spring-security-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<http auto-config="true">
<intercept-url pattern='/pages/login.jsp' />
<intercept-url pattern="/secure/*" access="IS_AUTHENTICATED_REMEMBERED" />
<intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
<form-login login-page="/pages/login.jsp" authentication-failure-url="/pages/login.jsp?login_error=true"  /> 
        <logout logout-success-url="/pages/logout-redirect.jsp" invalidate-session="true" />
        <remember-me key="appnameRMKey" user-service-ref="userDetailsService" />
    </http>
    <authentication-manager alias="authenticationManager" >
    <authentication-provider user-service-ref='userDetailsService' >
        <password-encoder hash="plaintext"/>
    </authentication-provider>
    </authentication-manager>

    <beans:bean id="userDetailsService" class="org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl">
        <beans:property name="rolePrefix" value="ROLE_" />
        <beans:property name="dataSource" ref="springSecurityDataSource" />
        <beans:property name="usersByUsernameQuery" value="SELECT username,password,enabled FROM Users WHERE username = ?" />
        <beans:property name="authoritiesByUsernameQuery" value="SELECT u.username, a.authorityname FROM Users u JOIN Users_Authorities ua on u.id = ua.user_id JOIN Authorities a on ua.authorities_id = a.id WHERE u.username = ?" />
    </beans:bean>   

    <!-- ******************************************************************** -->
    <!-- Apply security for all beans where security was set -->
    <!-- ******************************************************************** -->

    <global-method-security jsr250-annotations="enabled" proxy-target-class = "true" secured-annotations="enabled">
        <protect-pointcut expression="execution(* appname.UsersDAO.*(..))" access="IS_AUTHENTICATED_REMEMBERED"/>
        <protect-pointcut expression="execution(* appname.AuthoritiesDAO.*(..))" access="IS_AUTHENTICATED_REMEMBERED"/>
    </global-method-security>
</beans:beans> 
```

**我的服务上下文：**

```
<?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:lang="http://www.springframework.org/schema/lang"
      xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd   
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd   
        http://www.springframework.org/schema/jee 
        http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
        http://www.springframework.org/schema/lang
        http://www.springframework.org/schema/lang/spring-lang-3.0.xsd">
    <!-- ******************************************************************** -->
    <!-- Scan for service layer annotated beans -->
    <!-- ******************************************************************** -->
<context:component-scan base-package="appname" scoped-proxy="interfaces" />
<aop:config  proxy-target-class="true">
    </aop:config>
    <aop:aspectj-autoproxy proxy-target-class="true">
    </aop:aspectj-autoproxy>
    <!-- ******************************************************************** -->
    <!-- Mark bean transactions as annotation driven -->
    <!-- ******************************************************************** -->
    <tx:annotation-driven transaction-manager="transactionManager" />

</beans> 
```

**我的网络上下文：（**由于简短而省略了 Bean 定义！！）

```
<mvc:annotation-driven/>
    <mvc:default-servlet-handler/>    
    <tx:annotation-driven transaction-manager="transactionManager" />
    <bean id="multipartResolver" class="org.skyway.spring.util.web.binary.ModelBindingMultipartResolver" />
    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />
    <bean id="streamedBinaryContentView" class="org.skyway.spring.util.web.binary.ModelAttributeStreamer" />
    <bean id="beanNameViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver" />
    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/pages/" />
    </bean>
    <bean id="iPhoneUserAgentViewResolver" class="org.skyway.spring.util.viewresolution.UserAgentViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="agentSubstring" value="iPhone" />
    <property name="prefix" value="/WEB-INF/iphone/" />
    <property name="order" value="0" />
    </bean><bean id="webInfViewResolver" class="org.skyway.spring.util.viewresolution.AbsolutePathViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="order" value="-1" />
    </bean>
    <context:component-scan base-package="appname" scoped-proxy="interfaces" />
    <aop:config  proxy-target-class="true">
    </aop:config>
    <aop:aspectj-autoproxy proxy-target-class="true">
    </aop:aspectj-autoproxy>
    </beans> 
```

这是**方面**类的接口

```
package appname;
import it.pstmarche.model.HibernateSessionFactory;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.AfterReturning;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;
@Component
@Aspect
public interface SessionInterceptor {

@Pointcut("execution(public * appname.ImplantManager+.*(..))")
public void pc() ;

@Before("pc()")
public void print();
} 
```

实现很简单 *@Before("pc()") public void print(){ System.out.println("About to make call to print Hello World" }*

我还尝试了其他一些表达方式，例如：

*   @Pointcut("执行(@org.springframework.web.bind.annotation.RequestMapping public * appname.*(..))")
*   和许多其他人

没有运气。我开始认为问题不在于表达式（我已经尝试了大约 10-15 种类型……），而是上下文中没有考虑到的类。

对于答案，请考虑：

*   例如，名称 appname 显然是
*   插入 aop:config 和 aop:aspectj-autoproxy 只是一个尝试，因为我还在其他线程中读到，必须在 applicationContext 加载的每个文件中启用配置。我也试过只插入一个但没有结果
*   控制器具有带注释的接口+带注释的实现。我也尝试过不注释界面或完全删除而没有结果

有什么帮助吗？:)

编辑：作为对 axtavt 的回应 .. 对不起，我忘了添加我的 web.xml，这是其中的一部分

```
<servlet>
<description>context-servlet</description>
    <servlet-name>appname Servlet</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:appname-web-context.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

我通过 web-context.xml 文件正确加载了 contextConfigLocation。抱歉我忘记了:-(

EDIT2：我在axtavt的建议下得到了错误的答案！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:17:50.047

AOP 是在每个上下文的基础上配置的。

您有两个上下文 - 根 Web 应用程序上下文（`applicationContext.xml`包含导入其中的配置文件）和应用程序上下文`DispatcherServlet`，其中声明了控制器 bean。

因此，为了将方面应用于控制器，您需要添加`<aop:aspectj-autoproxy>`到特定于 servlet 的上下文中。

另请注意，您不应该`<context:component-scan>`在不同的上下文中使用相同的基础包，请参阅[@Service areConstructed 两次](https://stackoverflow.com/questions/4333390/service-are-constructed-twice)。

# xml - XML Schema 和 XMI 之间的区别

> ID：10243897
> 
> 赞同：4
> 
> 时间：2012-04-20T09:51:29.947
> 
> 标签：xml, xsd, xmi

XML Schema (XSD) 和 XMI 有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-02T16:20:25.860

很抱歉在这个超级旧的帖子中发帖，但我刚刚遇到同样的问题，发现接受的答案是超级错误的，这很好奇，因为接受答案的作者显然对 XMI 或 XMI 根本没有了解在最近的过去。

XMI 2.5.1 实际上是一个标准，它描述了如何从给定的 MOF 模型创建 XML Schema，以及如何实现对象之间的交叉引用，因为 XML 只允许分层结构。

因此，XMI 可以应用于任何领域，而不仅仅是软件建模 (UML) 或业务流程 (BPMN)。但是，请注意 XMI 通常应用于元模型级别，而不是实例模型级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:13:22.930

这有点像字典和园艺目录之间的区别。换句话说，它们几乎没有共同之处。

XML Schema 是一种描述 XML 文档类的结构和约束的方法。

XMI 是 UML 模型的 XML 表示。

如果您不了解其中的区别，那么您还没有了解这些规范中的任何一个，或者您可能还没有了解其中任何一个。

# ios - 如何获取所选自定义 TableViewCell 的节号？

> ID：10243900
> 
> 赞同：1
> 
> 时间：2012-04-20T09:51:33.750
> 
> 标签：ios, xcode, uitableview

我怎样才能知道我点击了哪个部分？我需要将项目发送到另一个视图的号码：

```
- (IBAction)mapButton:(id)sender {

    UIButton * myButton = sender;
    int row=myButton.tag;

    NSIndexPath * indexPath = [NSIndexPath indexPathForRow:row inSection:0];

    MapViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"mapView"];

    self.selectedStandort = [self.fetchedResultsController objectAtIndexPath:indexPath];

    detail.currentStandort = self.selectedStandort;

    [self.navigationController pushViewController:detail animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:02:32.197

mapButton 是 UITableViewCell 的子视图吗？然后我会做以下事情：

```
NSView *contentView = [sender superview];
NSTableViewCell *cell = (UITableViewCell *)[contentView superview];
NSIndexPath *cellIndexPath = [myTableView indexPathForCell:cell];

NSInteger section = cellIndexPath.section; 
```

您还可以使用 cellIndexPath 中的行，这样您就不必使您的标签值保持最新（例如，在重用、重新排序和删除时），这使您的实现更不容易出错。

# android - 在适配器的构造函数中传递片段

> ID：10243909
> 
> 赞同：1
> 
> 时间：2012-04-20T09:51:58.897
> 
> 标签：android, fragment, android-viewpager

由于永远不会在 a 上触发 onClick 事件`ViewPager`（请参阅[此问题](https://stackoverflow.com/questions/10243690/onclick-on-viewpager-not-triggered)），我将`onClickListener`在适配器中将 设置为项目容器。

这个想法是，当单击一个项目时，从适配器调用来自该适配器设置为的 Fragment 的方法`ViewPager`。

对于一个`Activity`我会传递上下文并使用这个上下文调用方法（类似于`((myActivity)context).itemContainerOnClick()`）。

但是我该如何处理片段？将 Fragment 作为参数传递给适配器的构造函数时，我会遇到任何问题吗？

谢谢

**分段**

```
public class MyFragment extends Fragment {

    ViewPager mViewPager;

    int mPosition = 0;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        view = (RelativeLayout) inflater.inflate(R.layout.my_fragment_container, container, false);

        ViewPager viewPager = (ViewPager) view.findViewById(R.id.viewpager);

        mViewPager.setAdapter(new MyAdapter(getActivity(), myObjectArray);

        mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int position) {
                mPosition = position;
            }

            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {}

            @Override
            public void onPageScrollStateChanged(int state) {}
        });

        mViewPager.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // I want to start some activity, passing mPosition
                // but this is never called
            }
        }); 

        return view;
    }

    // Alternative to mViewPager.setOnClickListener, called from the adapter
    public void onViewPagerClick()
    {
        // start some activity, passing mPosition
    } 
} 
```

**页面适配器**

```
class MyAdapter extends PagerAdapter {

    private MyObject[] mItemArray;
    private Context mContext;

    public SejoursWidgetAdapter(Context context, MyObject[] itemArray) {
        mContext = context;
        mItemArray = itemArray;
    }

    @Override
    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View row = inflater.inflate(R.layout.item, null);      

        // Add click listener here because setting it directly on the ViewPager does not work (onClick not triggered)       
        row.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // How can I call MyFragment's onViewPagerClick() ?
            }
        }); 

        ((ViewPager) collection).addView(row);        

        return row;
    }

    /* More stuff */

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:16:57.610

使用 ItemClick 的更改检查我的以下代码。

```
 class MyAdapter extends PagerAdapter {

   private MyObject[] mItemArray;
   private Context mContext;

public SejoursWidgetAdapter(Context context, MyObject[] itemArray) {
    mContext = context;
    mItemArray = itemArray;
}

@Override
public Object instantiateItem(View collection, int position) {

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View row = inflater.inflate(R.layout.item, null);      
     row .setTag(position);
    // Add click listener here because setting it directly on the ViewPager does not work (onClick not triggered)       
    row.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // How can I call MyFragment's onViewPagerClick() ?

          int position=(Integer) v.getTag();
     Log.v("Log_tag", "Here image is clicked"+ position);
        //now you known which Page is click you can do what you want.
        }
    }); 

    ((ViewPager) collection).addView(row);        

    return row;
}

/* More stuff */

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:05:41.033

您还可以通过 mViewPager 获取当前页面的位置

```
int position = mViewPager.getCurrentItem(); 
```

代替

```
int position=(Integer) v.getTag(); 
```

# android - IntentService 类上的错误

> ID：10243911
> 
> 赞同：0
> 
> 时间：2012-04-20T09:52:04.867
> 
> 标签：android, service, httpclient

我有一个 IntentService 类，它解析来自服务器的 JSON 文件并将属性保存到 SQLite 数据库中。但是每当我启动它时，应用程序就会崩溃，并且堆栈跟踪中会显示一个错误。有人可以帮我解决错误吗？谢谢

这是我的课：

```
public class DBSync extends IntentService {

    //holds new Location[] temporarily, well be released after storing data to DB
    public static VideoLocation[] videoLocations = null;

    private static VideoLocationReceiver receiver = null;

    public DBSync() {
        super("DBSync");
    }

    @Override
    protected void onHandleIntent(Intent intent) {

        VideoLocationList locations = null;
        videoLocations = null;

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet(
                "http://historyvision.solutions.smfhq.com/api/locations.json");
        try {
            HttpResponse response = httpClient.execute(request);
            if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                InputStream instream = response.getEntity().getContent();
                BufferedReader r = new BufferedReader(new InputStreamReader(
                        instream, "UTF-8"), 8000);
                StringBuilder total = new StringBuilder();
                String line;
                while ((line = r.readLine()) != null) {
                    total.append(line);
                }
                instream.close();

                //parse to gson here
                String JSON_Result = total.toString();

                JSON_Result = "{ locations:"+JSON_Result+"}";

                Log.d("DBSync", "JSON_Result:"+JSON_Result);
                Gson gson = new Gson();
                locations = (VideoLocationList)gson.fromJson(JSON_Result, VideoLocationList.class);

                VideoLocationItem[] vidLocItems = locations.getVideoLocations();
                int numLocations = vidLocItems.length;

                videoLocations = new VideoLocation[numLocations];
                for(int i=0; i<vidLocItems.length; i++ ){
                    videoLocations[i] = vidLocItems[i].location;
                }
                if (receiver!=null) {
                    receiver.receivedVideoLocationData(videoLocations);
                }
//              Log.d("DBSync", "resulting json: "+gson.toJson(locations, VideoLocationList.class));
            }
        } catch (ClientProtocolException e) {
            // TODO HANDLE THIS EXCEPTION, E.G. CHECK NETWORK/INFORM USER ETC.
            receiver.receivedVideoLocationData(null);
            e.printStackTrace();
        } catch (IOException e) {
            // TODO HANDLE THIS EXCEPTION, E.G. CHECK NETWORK/INFORM USER ETC.
            e.printStackTrace();
        }

        //only after sucessfully retrieving the remote json we open and update the db
        if (videoLocations != null) {

            JsonDB dbhelper = WWHApplication.getInstance().getJsonDBInstance();
            SQLiteDatabase db = dbhelper.getWritableDatabase();

            //begin transaction for insert
            db.beginTransaction();
            dbhelper.InsertLocationArray(db,videoLocations);
            db.setTransactionSuccessful();//end transaction
            db.endTransaction();
        }

        //fetch db content just for debugging

        JsonDB dbhelper = WWHApplication.getInstance().getJsonDBInstance();
        SQLiteDatabase db = dbhelper.getWritableDatabase();
        VideoLocation[] dbLocations = dbhelper.getVideoLocations(db);
        Gson gs = new Gson();
        for(VideoLocation vl : dbLocations){
            Log.d("DBSync", gs.toJson(vl));
        }
    }

    public static VideoLocation[] getVideoLocations(){
        return videoLocations;
    }

    public static void setVideoLocationReceiver(VideoLocationReceiver vr){
        receiver = vr;
    }

    public interface VideoLocationReceiver {

        public void receivedVideoLocationData(final VideoLocation[] vidLocs);
    }
} 
```

这是堆栈跟踪：

```
04-20 11:20:32.960: W/System.err(2732): java.net.UnknownHostException: historyvision.solutions.smfhq.com
    04-20 11:20:32.960: W/System.err(2732):     at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
    04-20 11:20:32.960: W/System.err(2732):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
    04-20 11:20:32.960: W/System.err(2732):     at java.net.InetAddress.getAllByName(InetAddress.java:256)
    04-20 11:20:32.960: W/System.err(2732):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
    04-20 11:20:32.960: W/System.err(2732):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
    04-20 11:20:32.960: W/System.err(2732):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
    04-20 11:20:32.960: W/System.err(2732):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
    04-20 11:20:32.960: W/System.err(2732):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
    04-20 11:20:32.960: W/System.err(2732):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
    04-20 11:20:32.960: W/System.err(2732):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
    04-20 11:20:32.960: W/System.err(2732):     at com.wwh.Sync.DBSync.onHandleIntent(DBSync.java:49)
    04-20 11:20:32.960: W/System.err(2732):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
    04-20 11:20:32.960: W/System.err(2732):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-20 11:20:32.960: W/System.err(2732):     at android.os.Looper.loop(Looper.java:130)
    04-20 11:20:32.960: W/System.err(2732):     at android.os.HandlerThread.run(HandlerThread.java:60)
    04-20 11:20:33.040: W/dalvikvm(2732): threadid=9: thread exiting with uncaught exception (group=0x40015560)
    04-20 11:20:33.040: E/AndroidRuntime(2732): FATAL EXCEPTION: IntentService[DBSync]
    04-20 11:20:33.040: E/AndroidRuntime(2732): java.lang.NullPointerException
    04-20 11:20:33.040: E/AndroidRuntime(2732):     at com.wwh.Sync.DBSync.onHandleIntent(DBSync.java:110)
    04-20 11:20:33.040: E/AndroidRuntime(2732):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
    04-20 11:20:33.040: E/AndroidRuntime(2732):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-20 11:20:33.040: E/AndroidRuntime(2732):     at android.os.Looper.loop(Looper.java:130)
    04-20 11:20:33.040: E/AndroidRuntime(2732):     at android.os.HandlerThread.run(HandlerThread.java:60) 
```

堆栈跟踪显示以下行的错误：**for(VideoLocation vl : dbLocations){**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:05:35.843

它是由于未知的主机异常。您可以通过两种方式修复它：

1.  重新启动您的模拟器或设备以刷新其 DNS 缓存
2.  为`UnknownHostException`. 更可取的是，我建议您添加一般`Exception`捕获

例如：

```
...
...
catch (UnknownHostExceptione) {
      Log.e("test", "unknown host connection error");
}
catch (Exception) {
      Log.e("test", "an error occurred: " + e.toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:07:11.793

检查您的互联网连接、网址、mainfest.xml（让您从那里获得互联网许可）。错误表明您在调用 Web 服务时遇到问题，而不是存储在 sqlite 中。这里的问题，

```
http://historyvision.solutions.smfhq.com/api/locations.json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:10:43.670

确保在 manifest.xml 中声明网络权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# objective-c - 有没有办法将 uicolor 转换为 int 值？

> ID：10243914
> 
> 赞同：1
> 
> 时间：2012-04-20T09:52:11.390
> 
> 标签：objective-c, int, uicolor

我正在尝试在我的应用程序中实现洪水填充算法。我从 GitHub 获得了一些代码。我需要以 int 的形式传递目标颜色和替换颜色。我尝试如下，

```
const CGFloat *components = CGColorGetComponents(color.CGColor);
NSString *colorAsString = [NSString stringWithFormat:@"%f,%f,%f,%f", components[0], components[1], components[2], components[3]];
 NSLog(@"colors original is %f %f %f %f",components[0],components[1], components[2], components[3]);
NSLog(@"original color is %d",[colorAsString intValue]);
UIColor *targetColor=[UIColor redColor];
const CGFloat *target = CGColorGetComponents(targetColor.CGColor);
NSString *colorAstarget = [NSString stringWithFormat:@"%f,%f,%f,%f", target[0], target[1], target[2], target[3]];
NSLog(@"colors target is %f %f %f %f",target[0], target[1], target[2], target[3]);

NSLog(@"target color is %d",[colorAstarget intValue]); 
```

但是我在 NSLogs 中将两者都设为 1，以便洪水填充返回 0。请帮助我，谢谢

# php - 如何使用PHP检查文件夹是否存在

> ID：10243915
> 
> 赞同：0
> 
> 时间：2012-04-20T09:52:19.167
> 
> 标签：php, file-io, directory

我有这段代码来检查一个文件夹是否存在使用 PHP 并且它在 Windows 中与 xampp 一起正常工作，但是当我尝试将该页面移动到服务器时，它不起作用。

这是我的代码：

> ```
>  function validate (&$valores, &$errores, $campo, $carpeta)
>     {
>     $valores [$campo] = $carpeta;
>             if ((file_exists($carpeta) && is_dir($carpeta))==false)
>             {
>                     $errores[$campo] = true;                   
>             }
>             else
>             {
>                     $errores[$campo] = false;
>             }
>     } 
> ```

我正在做的代码有替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:55:59.347

解决方案：我添加到 PHP open_basedir 文件夹和我想更改的文件，然后使用 Filezilla 我修改了读/写权限并修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:55:10.663

您可以使用[http://de.php.net/manual/en/function.opendir.php](http://de.php.net/manual/en/function.opendir.php)并检查是否为假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:55:29.307

您的代码应该在两个平台上都可以正常运行，所以不是这个问题。

通常，此类问题是由于`naming system`. 基于 linux 的操作系统使用严格区分大小写的命名系统。

所以尝试解决这个问题。

# php - mysql 函数概念

> ID：10243916
> 
> 赞同：0
> 
> 时间：2012-04-20T09:52:21.530
> 
> 标签：php, mysql, sql, concept

我是 MySQL 和 PHP 的新手。当我们在 if/else 语句中检查给定条件时，我无法理解一件事。与该条件相反的情况是否会自动运行？

我是说：

```
<?php
    $link = mysqli_connect('localhost', 'root', 'password');
    if (!$link)
    {
    $output = 'Unable to connect to the database server.';
    include 'output.html.php';
    exit();
    }
?> 
```

这里 mysqli_connect 是一个函数，要连接我们必须运行该函数。所以这里的误解是它是如何连接到服务器的。因为我没有单独运行 mysqli_function。我的意思是应该有一个单独的行。

或者给定条件的反面自动运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:04:37.827

> 我已经在一个变量中声明了 mysqli_connect。

不，你没有。

您已调用`mysqli_connect`并将其返回值分配给变量。

[手册](http://php.net/mysqli_connect)说：

> 返回一个表示与 MySQL 服务器的连接的对象。

如果连接失败，那将是一个错误的值（`if`语句会检查它，所以它只会在连接成功的情况下做一些事情）。

# iphone - 如何为 UIBarButtonItem 实现等效的 setUserInteractionEnabled:

> ID：10243919
> 
> 赞同：0
> 
> 时间：2012-04-20T09:52:28.273
> 
> 标签：iphone, ios, ipad, uibarbuttonitem

`UIBarButtonItem`有一个`setEnabled:`方法（除了后退按钮之外的所有方法）按预期工作，但它没有`setUserInteractionEnabled:`方法。但在未启用时，`UIBarButtonItems`可以接收触摸，重新启用时，它们会尝试处理。我想`setUserInteractionEnabled: NO` 为我的导航栏按钮做相当于（在有时可能需要一段时间的操作期间）。

有没有一种我想念的简单方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:58:38.300

你需要做很少的定制，你可以做到......

// 在你的 viewDidLoad 中添加这段代码

```
UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom];   
[leftButton setUserInteractionEnabled:NO];
[leftButton setImage:[UIImage imageNamed:@"navigationbutton.png"] forState:UIControlStateNormal];    
leftButton.frame = CGRectMake(0, 0, 30, 30);
[leftButton addTarget:self action:@selector(yorrmethod) forControlEvents:UIControlEventTouchUpInside];        
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:leftButton];
[leftButton release];

UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
[rightButton setUserInteractionEnabled : NO];
[rightButton setImage:[UIImage imageNamed:@"navigationbutton.png"] forState:UIControlStateNormal];    
rightButton.frame = CGRectMake(0, 0, 30, 30);
[rightButton addTarget:self action:@selector(yourmethod) forControlEvents:UIControlEventTouchUpInside];        
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:rightButton];
[rightButton release]; 
```

希望对你有帮助...

# c# - 如何解决 WPF 中的 XAML 解析器异常？

> ID：10243924
> 
> 赞同：1
> 
> 时间：2012-04-20T09:52:37.947
> 
> 标签：c#, wpf, xaml, telerik

您好我正在使用带有 MVVM 模型的 WPF 应用程序。打开申请表时出现 XAML 解析器异常。它说像

> 无法加载文件或程序集“Telerik.Windows.Controls.DataVisualization，PublicKeyToken=5803cfa389c90ce7”或其依赖项之一。该系统找不到指定的文件。

我在引用文件夹下的项目中有这个 DLL 文件引用，并且我在我的 XAML 中将它引用为

```
 "xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation " 
  .
  .
  .

 <DataTemplate>

  // The Below line i am getting that exception

 <telerik:RadColumnSparkline ShowAxis="False" ShowFirstPointIndicator="False" ShowLastPointIndicator="False" ShowHighPointIndicators="False" ShowLowPointIndicators="False" EmptyPointBehavior="DropPoint" ItemsSource="{Binding SizeProfileSparkLine}" Width="140" Height="24"/>

 </DataTemplate> 
```

我在我的项目中引用了那个 dll，但我得到了这个异常。我无法找到解决此问题的方法。谁能告诉我这个问题的解决方案？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:57:33.067

正如 Dave 所提到的，您可能没有引用 Telerik.Windows.Controls.DataVisualization 所依赖的程序集。您可以使用[Dependency Walker](http://www.dependencywalker.com/)找出您应该引用哪些其他程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:04:51.333

我猜 Telerik.Windows.Controls.DataVisualization 引用了您未包含的另一个程序集。Telerik 文档应该让您知道依赖的 DLL。

# c++ - OpenCV2.4 错误：未知函数文件中不支持 GPU

> ID：10243928
> 
> 赞同：1
> 
> 时间：2012-04-20T09:52:42.907
> 
> 标签：c++, opencv, cuda, gpu, nvidia

我正在运行 Visual Stadio2010，并使用 Cmake2.8 构建了 OpenCV2.4，在配置期间设置了：

```
WITH_CUDA flag on 
CUDA_SDK_ROOT_DIR :C:/ProgramData/NVIDIA Corporation/NVIDIA GPU Computing SDK 4.2
CUDA_TOOLKIT_ROOT_DIR: C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v4.2 
```

然后在visual studio中构建整个项目，成功。我正在使用 NVIDIA Quadro 5000，并测试了“OpenCV-2.4.0-GPU-demos-pack-win32”中的示例，所有这些都可以正常工作。核心和 highgui 库功能也可以正常工作。但我无法在 openCV 中运行与 GPU 功能相关的任何内容。此代码返回我 0，根据文档，这意味着没有找到设备：

```
int deviceCount =cv::gpu::getCudaEnabledDeviceCount();
  std::cout << "index " << deviceCount <<"\n"; 
```

这与 GPUdemopack 示例中的设备编号相同，但任何其他 gpu 函数都会向我显示以下错误：

> OpenCV 错误：未知函数文件 c:\slave\wininstallerMegaPack\src\opencv\modules\core\src\gpumat.cpp,line193 中没有 GPU 支持

任何机构有任何想法？请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:06:25.733

**OpenCV 2.4 仍处于测试阶段**，还没有准备好用于严肃的项目。据我测试，它在*Windows*和*Mac OS X*上有几个构建问题。

我建议您**坚持使用最后一个稳定版本 2.3.1**。不要使用 2.4，除非那里有你真正需要的功能。

**编辑：**

顺便说一句，OpenCV 2.3.1 只支持 CUDA 4.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:26:58.060

1.  您是说您自己构建了 OpenCV，但错误消息 ( `c:\slave\wininstallerMegaPack\...`) 中的文件路径清楚地表明您正在使用来自 sourceforge 的预构建 OpenCV。如果您确实自己构建了 OpenCV，那么您必须对环境进行故障排除并找出使用错误二进制文件的原因。（您可以做的最简单的事情 - 从您的 PC 中删除所有 OpenCV 二进制文件，然后对 OpenCV 和您的应用程序进行干净的完整构建。）

2.  OpenCV 2.4 beta 有一个打包错误，使启用 gpu 的二进制文件无用。所以你必须从源代码重建库或使用 OpenCV 2.3.1（确实是 CUDA 4.0）。

3.  GPU 演示包很棘手——它拥有自己可能需要的所有二进制文件的副本。但是它不能用于开发。

4.  最终的 OpenCV 2.4 版本将在几天内等待。Windows 软件包将包括工作 CUDA 二进制文件。

**编辑：**

OpenCV 2.4.0 出来了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:51:40.593

`devicequery.exe`从 Cuda SDK ( )运行`CUDA sdk 4.1\C\bin\win32\Release`并检查您的卡的计算能力值。

然后在 cmake for opencv 中，检查`CUDA_ARCH_BIN`包含这个值。

早期的卡只有 1.1 并且没有 ARCH_PTX（新的 CUDA 二进制格式）——可以只为新格式构建 opencv——不需要太多的运行时编译

# sharepoint - 如何在文档库的 Web 部件标题旁边显示文档数？

> ID：10243930
> 
> 赞同：0
> 
> 时间：2012-04-20T09:52:48.357
> 
> 标签：sharepoint, sharepoint-2010, web-parts

我们项目中的一个要求是，我们必须在 Web 部件标题名称旁边显示文档数。我尝试使用数据视图 Web 部件（使用 XSLT），但无法在标题旁边显示计数。

您能否在不使用自定义代码的情况下建议任何其他替代方案来满足上述要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:21:27.727

如果您想要文档库中的文档总数，您可以从

**xsl:value-of select="count(/dsQueryResponse/Rows/Row)"**

或者

打开数据视图 Web 部件属性，然后在常规选项卡上选择显示视图页脚。它将显示文件的数量

# jquery - 即时更新隐藏字段值

> ID：10243934
> 
> 赞同：0
> 
> 时间：2012-04-20T09:53:01.070
> 
> 标签：jquery, ruby-on-rails

我正在使用 jquery smartupdater 用 json 数据更新 i div。我必须在请求中发送隐藏字段的值并根据响应更新相同隐藏字段的值。

问题在于，当我收到响应时，字段值在 dom 中更新，但更新后的值不会再次附加到 url。

这是我的代码：---

```
<div id="device_activities"  class="hl_synopsis">
    <p id="no_update">;No Updates Available </p>;
</div>
<%= hidden_field_tag 'last_act', ''%> 
```

和javascript代码：--

```
$(document).ready(function(){
    var temp = $('#last_act_id').val();
    console.log("temp-->"+temp);
    $("#device_activities").smartupdater({
        url : '<%= get_activity_path%>',
        data: {"last_act_id":$("#last_act").val()},
        dataType : 'json',
        minTimeout : 6000
    }, function(data) {
            $('#last_act').val(data[data.length-1].id);
            console.log(data[data.length-1].id);
            console.log($('#last_act').val());
        $.each(data, function() {
            $('div#device_activities p#no_update').remove();
            $.each(this, function(key, value) {
                $("div#device_activities").append("<p id='activity'><strong>" + key + " :</strong> " + value + "</p>");
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:39:32.493

谢谢回复。我遇到了问题，它是 smartupdator 请求格式。智能更新器重复发送第一次配置的请求。为了发送具有更新字段值的请求，您必须更新 smartupdator url。

我通过添加：--

$(文档).ready(函数(){

```
$("#device_activities").smartupdater({
    url : '<%= get_activity_path%>',
    dataType : 'json',
    minTimeout : 10000
}, function(data) {
        <!-- Get last activity id from json and update smartupdater url using it, after that delet id element from json data -->
        $("#device_activities").smartupdater("alterUrl", '<%= get_activity_path%>', {"last_act_id": data[data.length-1].id});   

        $.each(data, function() {
            if(data[0] != undefined && $('div#device_activities p#no_update')){
                $('div#device_activities p#no_update').remove();
            }
            $.each(this, function(key, value) {<!-- update activity div from json -->
                $("div#device_activities").append("<p id='activity'><strong>" + key + " :</strong> " + value + "</p>");
            });
        });
}); 
```

});

# java - 在 S3 上托管图像的 Web 服务？

> ID：10243935
> 
> 赞同：0
> 
> 时间：2012-04-20T09:53:16.590
> 
> 标签：java, amazon-s3, amazon

我使用 Amazon S3 存储在我的其他 Java 应用程序中使用的图像。最近我不得不更新我的应用程序以引入类别、标签等功能。目前，这已解决为存储在 S3 中的 JSON 配置。这些由其他应用程序获取并用作某种数据库替换:)。

评级和用户反馈等其他改进仍有待完成。所以转移到带有一些 web 服务的 DB + 后端是下一个合乎逻辑的步骤。首先，由于额外的成本和维护问题，我没有使用过 EC2 实例之类的东西。

我需要一些建议如何以最少的时间和精力来实现这一点。所以基本要求是： - 图像存储在 s3 上 - Web 服务提供获取类别列表的方法、类别中图像的 s3 链接列表、更新某些图像评级的方法，以及将来可能将图像调整为提供的尺寸的方法.

我的想法是： - 使用 s3，因为它已经存在。- 添加一些 Java 托管来运行提到的 Web 服务（我不喜欢使用 EC2 的想法，因为我愿意花费更多时间进行配置，也许我在这里错了）。- 使用“普通”javaee 或一些轻量级框架来获得大部分硬件。

我也考虑过使用一些图像托管服务，但我还没有找到类似的东西。或者也许有一些可用于图像托管的开源解决方案。

对此的任何想法都将受到高度赞赏，因为这只是让我在试图决定如何实施时发疯。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T20:30:14.007

我认为 S3 和 JSON 可以继续很好地为您工作，而无需使用完整的关系数据库系统。

如果您以关系形式设想您的解决方案，您可以通过将表映射到 S3 中的目录、将行映射到 S3 中的单个文件以及每行中的列值作为存储在该文件中的 JSON 结构来将其转换为 S3 表示。在每个“行”= S3 文件中存储少量数据可让您轻松更新数据。由于向 S3 的传输要么成功，要么完全失败，您的更新将保持一致。

要了解表中有多少行，您将使用 S3 列表功能列出具有该表的公共前缀的文件。

S3 控制台使您能够查看和探索您的文件结构。

Amazon IAM 可以提供安全性。

可以通过使用生命周期规则复制到 Amazon Glacier 来完成自动备份。

如果您使用这种方法，您将获得许多类似关系的功能，但不会产生运行 EC2 服务器或使用 Amazon RDS 的额外费用和复杂性。

最后，对这一切进行编程很简单，因为您已经拥有了之前工作中的工具。我怀疑你会有这样的包来在 S3 上执行所有必要的操作：

```
 //---------------------------------------------------------------------     
    // Amazon S3
    //---------------------------------------------------------------------     
        class S3 extends AmazonS3Client
         {final String bucket;
          S3(String u, String p, String Bucket)
           {super(new BasicAWSCredentials(u, p));
            bucket = Bucket;
           }
          boolean put(String k, String v)      
           {try 
             {final ByteArrayInputStream b = new ByteArrayInputStream(v.toString().getBytes());
              putObject(bucket, k, b, new ObjectMetadata());
              setObjectAcl(bucket, k, CannedAccessControlList.PublicRead);  // Has to be here to allow change to reduced redundancy
              changeObjectStorageClass(bucket, k, StorageClass.ReducedRedundancy);
              setObjectAcl(bucket, k, CannedAccessControlList.PublicRead);  // Has to be repeated because it is now a new object again
              return true; 
             }
            catch(Exception e) {log("Cannot put "+bucket+"/"+k+" to S3 because "+e);}
            return false; 
           }
          String get(String k) 
           {try 
             {final S3Object f = getObject(bucket, k);
              final BufferedInputStream i = new BufferedInputStream(f.getObjectContent());  
              final StringBuilder s = new StringBuilder(); 
              final byte[]b = new byte[1024];
              for(int n = i.read(b); n != -1; n = i.read(b)) {s.append(new String(b, 0, n));}
              return s.toString(); 
             }
            catch(Exception e) {log("Cannot get "+bucket+"/"+k+" from S3 because "+e);}
            return null; 
           }
          String[]list(String d) 
           {try 
             {final ObjectListing l = listObjects(bucket, d);
              final List<S3ObjectSummary> L = l.getObjectSummaries(); 
              final int n = L.size();
              final String[]s = new String[n];  
              for(int i = 0; i < n; ++i)
               {final S3ObjectSummary k = L.get(i);
                s[i] = k.getKey();
               } 
              return s; 
             }
            catch(Exception e) {log("Cannot list "+bucket+"/"+d+" on S3 because "+e);}
            return new String[]{}; 
           }
         }
       } 
```

# email - Java 电子邮件：如何在电子邮件中添加投票按钮，例如“是”或“否”？

> ID：10243940
> 
> 赞同：1
> 
> 时间：2012-04-20T09:53:24.747
> 
> 标签：email

你能帮我如何在 JAVA 中发送电子邮件，其中收到的电子邮件应该有投票按钮，例如“是”或“否”？

谢谢，杰姆鲁达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:56:57.253

看看[JTNEF](http://www.freeutils.net/source/jtnef/)：

> 传输中性封装格式 (TNEF) 是 Microsoft 用于封装具有任何非纯文本内容或属性（例如富文本、嵌入式 OLE 对象、投票按钮，有时只是附件）的邮件的非标准格式。是否使用 TNEF 对给定邮件进行编码取决于 Outlook 默认设置、每个收件人的设置、Exchange Server 设置以及邮件类型和内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:55:12.710

您的投票按钮将是指向实际投票发生的网站的链接。当然按钮只能在电子邮件的 HTML 版本中使用，文本版本应该回退到简单的文本链接（如果是，请单击此处：[http://blah](http://blah) ...）

# haskell - 类型类的默认值中的类型注释会导致“无法推断”类型错误

> ID：10243942
> 
> 赞同：4
> 
> 时间：2012-04-20T09:53:27.483
> 
> 标签：haskell, type-inference, typeclass

这是一个初学者的问题，但我无法在任何地方找到任何答案。
以下代码：

```
class A a where
  foo :: a
class A a => B a where
  bar :: a
  bar = (foo :: a) 
```

无法在 GHC 中编译，并显示错误消息：

```
Could not deduce (A a1) arising from a use of `foo'
from the context (B a)
  bound by the class declaration for `B'
... 
```

GHC 似乎不相信 typeclass B 定义中的所有 a 都是相同的。谁能解释一下它的推理路线到底是什么？

删除第 5 行中的类型注释当然可以避免这个问题，但我仍然想了解这里发生了什么......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T10:02:38.533

您确实应该摆脱类型注释。类型变量在 Haskell 中没有作用域，所以`(foo :: a)`. 被解释为“已经为任何类型`foo`生成类型值”，这是无法完成的，因为只会生成类中那些类型的值。`a``a``foo``a``A`

换句话说，您的声明`B`相当于

```
class A a => B a where
  bar :: a
  bar = (foo :: c) 
```

也就是说，您对类型变量`a`的使用与声明中的其他使用之间没有联系。

删除显式注释可以解决您的问题：

```
class A a => B a where
  bar :: a
  bar = foo 
```

现在，编译器可以确定您要调用`foo`的类型`a`，即您在签名中写入的类型，`bar`并且出现在类声明的头部。

Glasgow Haskell 编译器 (GHC) 带有一个允许范围类型变量的扩展。启用该扩展后，您的片段将像您最初预期的那样进行类型检查：

```
{-# LANGUAGE ScopedTypeVariables #-}
class A a where
  foo :: a
class A a => B a where
  bar :: a
  bar = (foo :: a) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:07:23.467

```
Prelude> :set -XScopedTypeVariables
Prelude> :{
Prelude| class A a where
Prelude|   foo :: a
Prelude| class A a => B a where
Prelude|   bar :: a
Prelude|   bar = (foo :: a)
Prelude| :}
Prelude> :t bar
bar :: B a => a
Prelude> 
```

但正如 dblhelox 所说，这里没有必要使用范围类型变量。

# mysql - 选择没有其他行匹配的行

> ID：10243943
> 
> 赞同：3
> 
> 时间：2012-04-20T09:53:32.000
> 
> 标签：mysql, sqlite

这看起来很简单，但它变得很尴尬。

假设我们有一个包含...

```
+---------+-----------+
| chat_id | friend_id |
+---------+-----------+
| A       |         1 |
| A       |         2 |
| A       |         3 |
| B       |         1 |
| B       |         2 |
| C       |         1 |
| C       |         2 |
| C       |         3 |
| D       |         1 |
| D       |         2 |
| D       |         3 |
| D       |         4 |
| D       |         5 |
| E       |         0 |
| E       |         1 |
| E       |         2 |
| E       |         3 |
| E       |         4 |
| E       |         5 |
| E       |         6 |
| E       |         7 |
| F       |         0 |
| F       |         1 |
| G       |         1 |
| G       |         2 |
+---------+-----------+ 
```

我希望只选择那些有friend_ids 1和2而没有其他friend_id的chat_id，返回B和G的SQL是什么？

到目前为止，我想出的最好的是：

```
SELECT DISTINCT a.chat_id, COUNT(*) 
FROM tt2 a 
LEFT JOIN tt2 b 
ON a.chat_id = b.chat_id 
AND b.friend_id NOT IN (1,2) 
WHERE a.friend_id in (1,2) 
and b.chat_id IS NULL GROUP BY a.chat_id HAVING COUNT(*) = 2;

+---------+----------+
| chat_id | count(*) |
+---------+----------+
| B       |        2 |
| G       |        2 |
+---------+----------+
2 rows in set (0.00 sec) 
```

以防万一我在寻找只有 1,2,3 存在的 chat_id ......

```
SELECT DISTINCT a.chat_id, COUNT(*) 
FROM tt2 a 
LEFT JOIN tt2 b 
ON a.chat_id = b.chat_id 
AND b.friend_id not in (1,2,3) 
WHERE a.friend_id IN (1,2,3) 
AND b.chat_id IS NULL 
GROUP BY a.chat_id 
HAVING COUNT (*) = 3;

+---------+----------+
| chat_id | count(*) |
+---------+----------+
| A       |        3 |
| C       |        3 |
+---------+----------+ 
```

但是这个表可能会变得很大，我需要 SQL 很快，有没有人知道更好的方法？

尝试澄清......我得到了一堆friend_id，我想得到chat_id，其中*只有*那些friend_id存在于那个chat_id...... SQL很快（在sqlite上）

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:37:52.447

这是一个应该能够限制所需数据量的选项

```
SELECT 
    d.chat_id,
    COUNT(DISTINCT s.friend_id) AS matchedFriends,
    COUNT(DISTINCT d.friend_id) AS totalFriends
FROM tt2 AS d
INNER JOIN tt2 AS s
    ON s.chat_id = d.chat_id
    AND s.friend_id IN (1,2)
GROUP BY d.chat_id
HAVING matchedFriends = 2
AND totalFriends = matchedFriends 
```

INNER JOIN`s`确保它只命中至少有一个请求的朋友进入的行。matchedFriends 计数检查找到了多少请求的朋友。

然后，totalFriends 计数会检查该聊天中总共有多少朋友。

最后 HAVING 首先确定有 2 个匹配的好友，然后检查好友总数是否等于匹配好友的数量。

这将要求您提供朋友列表和您正在寻找的朋友的数量，但应该是有效的。

为了提高效率，有一个索引`(chat_id,friend_id)`（如果你还没有，假设在撰写本文时它是一个 2 部分的 PK）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:20:35.840

尝试这个：

```
SELECT chat_id, GROUP_CONCAT(DISTINCT friend_id ORDER BY friend_id) AS friends 
FROM table_1
GROUP BY chat_id
HAVING friends = '1,2' 
```

注意：这适用于 mysql，但我怀疑它是否适用于 sqlite。

# android - ActionBar 选项卡 - 固定和可滚动？

> ID：10243945
> 
> 赞同：15
> 
> 时间：2012-04-20T09:53:39.900
> 
> 标签：android, android-actionbar

在[Android 设计指南](http://developer.android.com/design/patterns/actionbar.html#elements)中，它声明*“有两种类型的选项卡：固定的和可滚动的”。*

[我在ActionBar 文档](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)中找不到任何文档来支持指定任一类型选项卡的能力。

您如何指定要固定或可滚动的选项卡组？如果你不能，是什么决定了标签是固定的还是可滚动的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T16:04:46.740

选项卡的数量决定了选项卡组是固定的还是可滚动的。例如，如果您有一个选项卡，它们将被固定，但如果您有六个选项卡，那么它们将变为可滚动的，因为所有六个选项卡都不能放在一个屏幕上。

如果您想在 3.0 之前的设备上查看它的运行情况，请[下载 Action Bar Sherlock 示例](http://actionbarsherlock.com/download.html)并从主列表中选择功能切换，然后选择“选项卡”作为您的导航模式。现在您可以将标签添加到栏，起初它们会变小以将它们全部塞入，然后一旦您有足够的内容，您就可以滚动浏览它们。

**更新：**官方文档中现在有一个页面显示“固定选项卡显示为相等宽度，基于最宽选项卡标签的宽度。如果没有足够的空间来显示所有选项卡，选项卡标签本身将是可滚动。” [在这里阅读更多。](http://developer.android.com/design/building-blocks/tabs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:01:25.740

值得注意的是，设置

```
 android:showAsAction 
```

至少在 4.0+ 设备中，也会影响选项卡的显示方式。环境

```
 <item name="android:showAsAction">always</item> 
```

作为主题的一部分，如果有可用空间，所有选项卡在屏幕上的间距相等，无需滚动。

# amazon-ec2 - 如何进行延迟直播（使用 FMS + FMLE）？

> ID：10243955
> 
> 赞同：0
> 
> 时间：2012-04-20T09:54:06.817
> 
> 标签：amazon-ec2, video-streaming, flash-media-server

我已经尝试使用本[教程](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/LiveStreamingAdobeFMS4.5.html)使用 FMS 4.5 和 FMLE 3.2 提供来自摄像机的 HTTP 实时流媒体，并且我成功了。

现在我需要在 HTTP 流上添加延迟（1~10 分钟）。我的目的是让客户可以比第一次从相机获取视频时晚 10 分钟观看视频

我正在使用 Amazon Cloud，特别是 EC2（包括 FMS 4.5）。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:20:40.177

将服务器设置为具有 DVR 缓冲区。您可以将 dvrinfo 标记添加到 manifest.xml 文件中，然后将 beginOffset 指定为您想要的延迟。

# javascript - 通过变量引用 JS 值与为 JSON 解析目的通过文字值引用不同吗？

> ID：10243968
> 
> 赞同：0
> 
> 时间：2012-04-20T09:55:02.450
> 
> 标签：javascript, json, parsing

我在这里遇到了 Facebook JS SDK 的一些问题， http: [//facebook.stackoverflow.com/questions/10243785/fb-ui-call-throws-json-parsing-error-serializing-then-deserializing-input-ob](http://facebook.stackoverflow.com/questions/10243785/fb-ui-call-throws-json-parsing-error-serializing-then-deserializing-input-ob)，但我在这里把它当作一个更通用的 JSON 问题。

如果我要将以下 javascript 值序列化为 JSON 字符串，是否有任何情况或任何解析器会以不同方式对待它们？如果有任何解析器无法对 b 版本进行字符串化，我会特别感兴趣。

```
var value = {"value":"one"};
var a = {"data1":{"value":"one"},"data2":{"value":"one"}};
var b = {"data1":value,"data2":value}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:00:25.333

Afaik：现代浏览器的默认 JSON 解析器正在“字符串化” b 示例正确，因此对的引用也`value`被字符串化。

```
console.log('a: '+JSON.stringify(a));
console.log('b: '+JSON.stringify(b));
/* all browsers I know (for IE restriction is IE>7) show
a: {"data1":{"value":"one"},"data2":{"value":"one"}} 
b: {"data1":{"value":"one"},"data2":{"value":"one"}}
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:04:26.287

根据我的经验，JSON 解析器不会因您的任何示例而失败。
JSON 解析器的主要威胁是循环引用，例如：

```
var object = {};
object.value = object; 
```

你似乎没有。

# wix - DPInst 找不到路径

> ID：10243969
> 
> 赞同：1
> 
> 时间：2012-04-20T09:55:05.403
> 
> 标签：wix, driver, dpinst

根据[本教程](http://www.codeproject.com/Articles/44191/Drivers-Installation-With-WiX)，我正在使用带有[DPInst](http://www.codeproject.com/Articles/44191/Drivers-Installation-With-WiX)的 WiX 安装驱动程序。它在 Windows 7 上运行良好，但我在 Windows XP 上尝试它，我得到一个错误对话框弹出：

> 错误：找不到路径“C:\Program Files\My Driver\package\driver.inf”

之后它会打印一条长使用消息。

`C:\Program Files\My Driver\package\driver.inf`如果我在关闭对话框之前导航到该位置，则该文件*就*在那里。在`InstallExecuteSequence`,`InstallDriver`被设置为发生 之前`InstallServices`。怎么了？

**注意：**我尝试从命令行运行 DPInst，但我得到了同样的错误。

另外，我尝试将 DPInst 移动到与 相同的目录中，并尝试在没有参数`.inf`的情况下运行它。`/PATH`奇怪的是，我仍然得到同样的错误（也就是说，它给出了`.inf`它“找不到”的确切路径。这确实很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:02:01.523

我认为，当您想使用带有 /path 的 DPInst.exe 安装驱动程序时，您应该只提供包含 .inf 文件的目录的路径。即：`dpinst.exe /path "C:\Program Files\My Driver\package\"`。

# iphone - iPhone：在 Objective-C 对象和核心基础类型之间转换时的内存管理

> ID：10243970
> 
> 赞同：2
> 
> 时间：2012-04-20T09:55:06.680
> 
> 标签：iphone

当我使用 cast 时发生了什么？我应该在使用 cast 时释放一些东西吗？例如：

```
CTFontRef font = CTFontCreateWithName((CFStringRef)
    @"Helvetica", 16, NULL);
 CFRelease(font); 
```

我这里有内存泄漏..为什么？我应该发布 Helvetica CFStringRef 吗？

另一个例子：

```
 CTFramesetterRef frameSetter =
    CTFramesetterCreateWithAttributedString(
    (CFAttributedStringRef)attrString);
 CFRelease(frameSetter); 
```

这里我也有内存泄漏。为什么 ？我应该如何解决这个问题？

PS我不使用ARC

# objective-c - UIViewController 的默认视图（作为 UIScrollView） - 无法设置其内容偏移量

> ID：10243973
> 
> 赞同：1
> 
> 时间：2012-04-20T09:55:15.283
> 
> 标签：objective-c, ios, cocoa-touch

根据我的项目，我将绑定到一个 UIViewController 的默认视图从**UIView**更改为**UIScrollView**，因为它必须更改其偏移量和内容大小。我从 UIView 更改为 UIScrollView 的方式是通过**Interface Builder > Custom Class**

如果我想在控制器中以编程方式更改它的偏移量和内容大小，除非我投射它，否则它不能以通常的方式完成

```
[((UIScrollView *)self.view) setContentSize:CGSizeMake(1024, 2000)];
[((UIScrollView *)self.view) setContentOffset:CGPointMake(0, 150)]; 
```

但是对于应用程序中的其他 UIScrollView，可以像其他任何方式一样更改它们的偏移量和内容大小，

```
// Assume that sv is scroll view object
[sv setContentSize:CGSizeMake(1027, 2000)];
[sv setContentOffset:CGPointMake(0, 150)]; 
```

当我打印该滚动视图对象时，它显示为 UIScrollView

```
NSLog(@"%@", self.view);
NSLog(@"%@", [self.view class]);

-> <UIScrollView: 0x6d3d3f0; frame = (0 0; 1024 768); autoresize = RM+BM; layer = <CALayer: 0x6d52ce0>; contentOffset: {0, 0}>
-> UIScrollView 
```

任何人都知道我错过或忘记做什么而不是更改视图的自定义类？

最好的，谢谢你，焦油

PS 除了需要额外的代码，一切正常。但是，我不能冒险将来可能出现错误。这位客户超级疯狂，不接受任何错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:05:08.767

对此的替代方法（这将避免强制转换）是将 UIViewController 自定义类设置回界面构建器中的 UIView。然后，插入一个新的 UIScrollView 作为子视图（只需在 Interface Builder 中拖放），通过 IBOutlet 将 UIScrollView 连接到 UIViewController 子类，如下所示：

```
@property (nonatomic, weak) IBOutlet UIScrollView *scrollView; 
```

（当您连接插座时，XCode 应为您生成属性声明）。

然后，在您的 UIViewController 子类中，您可以执行以下操作：

```
[[self scrollView] setContentSize:CGSizeMake(1024, 2000)];
[[self scrollView] setContentOffset:CGPointMake(0, 150)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:55:22.200

我不确定最好的解决方案是什么，但一个快速的解决方法是创建一个在 UIViewController 中投射视图的方法。那是：

```
- (UIScrollView *)scrollView {
   return (UIScrollView *)self.view;
} 
```

然后，不再将 ViewController 中的视图称为 self.view，而是将其称为 self.scrollView。

# objective-c - SKPaymentTransaction transactionState 在购买后不会变为 SKPaymentTransactionStatePurchased

> ID：10243978
> 
> 赞同：1
> 
> 时间：2012-04-20T09:55:39.730
> 
> 标签：objective-c, macos, storekit, in-app-purchase

我已经实现了 Apple 文档中关于 IAP 中描述的应用内付款，但是当我在沙盒模式下尝试它们时，“transactionState”永远不会更改为 SKPaymentTransactionStatePurchased。（它永远保留在 SKPaymentTransactionStatePurchasing 上。）

有人知道出了什么问题吗？

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        NSLog(@"%ld", transaction.transactionState);
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
            default:
                break;
        }
    }
}

- (void)completeTransaction:(SKPaymentTransaction *)transaction
{
    [self recordTransaction:transaction];
    [self provideContent:transaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
}

- (void)failedTransaction:(SKPaymentTransaction *)transaction
{
    if (transaction.error.code != SKErrorPaymentCancelled) {
        [NSAlert alertWithError:transaction.error];
    }
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
}

- (void)restoreTransaction:(SKPaymentTransaction *)transaction
{
    [self recordTransaction:transaction];
    [self provideContent:transaction.originalTransaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
}

- (void)recordTransaction:(SKPaymentTransaction *)transaction
{
    NSLog(@"Record Transaction...");
    // ToDo: Implement 'recordTransaction'.
}

- (void)provideContent:(NSString *)productIdentifier
{
    NSLog(@"Provide Content");
    // ToDo: Implement 'provideContent'.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:17:44.000

在不同的机器上测试相同的代码。它适用于我的开发机器上的每一个期望。似乎不是我的代码。

# php - 在php中创建自过期的字母数字ID

> ID：10243982
> 
> 赞同：0
> 
> 时间：2012-04-20T09:55:50.633
> 
> 标签：php

我正在创建一个自过期的 id，字母数字，可以在设定的时间范围后过期。但我不知道如何在 php 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:57:11.640

在数据库中保存一个随机数字 id 和一个时间戳。如果时间戳+超时是过去还是将来，请检查每次使用 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:57:28.363

尝试使用[Cookie](http://www.w3schools.com/php/php_cookies.asp)，

```
setcookie("id", "XD67KJKKJK65DD", time()+3600); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:57:57.320

使用**[`uniqid()`](http://il.php.net/manual/en/function.uniqid.php)**PHP 函数生成 ID。至于有效期，将其与有效期一起保存在数据库中，并在使用 ID 时对其进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:58:22.803

使用所有字母数字 ID 设置时间戳。

```
$id = array(id => 'id', "timeframe" => '23435476575'); 
```

然后检查，当你需要。

```
if($id['timeframe'] < time()) {
   echo "expired";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T10:00:17.920

你肯定在寻找这个[网络安全：使用 crumbs 保护你的 PHP API (Ajax) 调用免受跨站点请求伪造 (CSRF/XSRF) 和其他漏洞](http://abhinavsingh.com/blog/2009/10/web-security-using-crumbs-to-protect-your-php-api-ajax-call-from-cross-site-request-forgery-csrfxsrf-and-other-vulnerabilities/)

这解释了如何创建简短的、自过期的字母数字 ID，您可以在处理与它们关联的任何请求之前在后端对其进行验证。

# css - position: absolute without setting top/left/bottom/right?

> ID：10243991
> 
> 赞同：28
> 
> 时间：2012-04-20T09:56:24.940
> 
> 标签：css, css-position

## Case #1:

I want to put a logo above the photo in the header in the default WordPress theme ( [http://twentyelevendemo.wordpress.com/](http://twentyelevendemo.wordpress.com/) )

My solution: add the logo before the photo, and set `position: absolute` on it, **without** setting any of the `top/left/bottom/right` properties:

[http://jsfiddle.net/TsAJp/](http://jsfiddle.net/TsAJp/)

Html:

```
<a id="header">
  <img id="logo"> 
  <img id="photo">
</a> 
```

Css:

```
#logo {
  position: absolute;
  margin: 10px;
  /* or padding: 10px; */
  /* or border: 10px solid transparent;
     only this works with my elderly iPhone Simulator.app */
} 
```

## Case #2:

Another example is a horizontal multi-level menu which is 100% wide and laid out with `display: table-*`, but `table-cell`s don't support `position: relative`, so my only solution was this: [http://jsfiddle.net/pCe49/](http://jsfiddle.net/pCe49/)

It works on IE6-7, Firefox1.5, not working on Firefox 0.8, etc.

Do you think it is a good solution, or is it a non-standard piece of hack, which can fall apart any minute?

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-20T11:02:22.880

The standard generally says if top/bottom, left/right are auto, then default them to their `position: static` values:

[http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width)

[http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-height](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-height)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:00:54.333

AFAIK, you should pay attention of hierarchical css rules, beacuse if you don't specify top, left and other attributes, they are inherited from parent element, or are set by defaults in browser's css. IMHO, it's better to initialize elements with your values.

# c# - 将某些位置从双精度数组复制到另一个双精度数组

> ID：10243992
> 
> 赞同：-1
> 
> 时间：2012-04-20T09:56:25.303
> 
> 标签：c#, arrays

所以，我有一个数组 Double[] inputx，它有 100 个元素。

我想要做的是复制到另一个数组中，比如说 Double[] inputxx，但只有位于符合条件的位置的元素： i%5 == 0 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:02:36.053

使用 Linq：

```
Double[] inputxx = inputx.Where((x, i) => i % 5 == 0).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:00:59.997

好吧，一般来说：如果您的数组索引从 0 开始，您可以安全地`i`使用`0`, as进行初始化`0 % 5 == 0`。然后，添加 5 直到到达数组的末尾。

C# 代码可能如下所示：

```
Double[] inputxx = new Double[inputx.Length / 5];
int x = 0;
for (int i = 0; i < inputx.Length; i += 5)
{
     inputxx[x] = inputx[i];
     x++;
} 
```

# javascript - IE 的 JavaScript 问题

> ID：10243993
> 
> 赞同：1
> 
> 时间：2012-04-20T09:56:25.313
> 
> 标签：javascript, jquery, internet-explorer

我正在尝试让一些 JavaScript 操作在 Internet Explorer 中工作，但到目前为止它们还没有工作。

该脚本使用`id`属性来加载与其关联的页面。例如：`id="4"`将用于查找页面`getinfo.php?vid=4`的值并使用此页面的值来更改站点上的某些内容。

```
function btcd() {
var id;
$('.btcd').each(function(i) {
    id = $(this).attr('id');
    id = id.replace('v','');
    $(this).load('js/timeleft.php?vid='+id);
});
$('.btp').each(function(i) {
    id = $(this).attr('id');
    id = id.replace('z','');
    $(this).load('js/price.php?vid='+id);
});
$('.button_bied_nu').each(function(i) {
    id = $(this).attr('id');
    id = id.replace('b','');
    $.get('js/you.php?vid='+id, function(data){
        var res = data.split(' ');
        if(res[1] == '1') {
            $('#b'+res[0]).css('background-image','url(images/button_bied_nu_you.png)');
        }else{
            $('#b'+res[0]).css('background-image','url(images/button_bied_nu.png)');
        }
    });

});

var d = new Date();
var n = d.getMilliseconds();
setTimeout("btcd()",(900-n));
} 
```

HTML部分：

```
<div class="veilingen">
    <div class="box">
        <div class="box_top">
            <h3><span class="btcd" id="v1" style="float:right;margin-right:10px">202:50:09</span>Testveiling</h3>
        </div>
    <div class="box_bg">
        <div class="box_image">
            <img src="images/veilingen/test.png" alt="Afbeelding" />
            <br />
            <div class="veiling_lint">
                <b>&euro;<span class="btp" id="z1">36</span></b>
                <span style="font-size:8pt;">(Elk bod verhoogt de prijs met &euro;1)</span>
            </div>
        </div>
        <a href="#" onclick="bied(1);" class="button_bied_nu" id="b1">BIED NU!</a><br />
        Klik <a href="?vid=1">hier</a> voor meer informatie over deze veiling.
    </div>
    <div class="box_bottom"></div>
</div> 
```

页面本身：[http ://project.browsertech.nl/001/index.php](http://project.browsertech.nl/001/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:37:10.790

我认为这是有效的，但正在缓存。要么使用不同的 ajax 调用，要么你可以把这个糟糕的代码放在：

```
$.ajaxSetup ({
    cache: false
}); 
```

这将停止加载缓存（以及任何 jQuery ajax 调用缓存）

# objective-c - 如何处理自定义 UIViewController 委托 (ARC)？

> ID：10243995
> 
> 赞同：1
> 
> 时间：2012-04-20T09:56:32.903
> 
> 标签：objective-c, ios, uiviewcontroller, delegates, automatic-ref-counting

我有以下代码：

```
- (IBAction)mapPressed:(id)sender
{
    MapViewController *mapVC = [[MapViewController alloc] initWithNibName:@"MapViewController" bundle:[NSBundle mainBundle]];
    mapVC.delegate = self;
    [self.navigationController pushViewController:mapVC animated:YES];
} 
```

对于 MapViewController：

```
//MapViewController.h
@protocol MapViewDelegate
@required
- (void)selectedPlacemark:(MKPlacemark*)placemark;
@end
//...
@property (nonatomic, weak) id<MapViewDelegate> delegate;
//... 
```

如果启用了 ARC，我还需要将 mapVC.delegate 设置为 nil 吗？如果是这样，这是否意味着我不应该在本地创建 MapViewController 而是为对象设置一个实例变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:10:04.660

刚刚通过[this question](https://stackoverflow.com/questions/7246513/zeroing-weak-references-in-arc)确认您不需要将引用设置为nil。上面的代码一切都应该没问题。