# StackOverflow 问答 11221000-11221999

# c# - 传递类实例而不引用

> ID：11221000
> 
> 赞同：5
> 
> 时间：2012-06-27T07:04:31.070
> 
> 标签：c#, reference, pass-by-reference, ref

我有这个关于是否通过 ref 传递一些实例的问题：这是我的问题：

**案例1：简单的var `int`：**

```
private void button2_Click(object sender, EventArgs e)
{
    int nTest = 10;

    testInt(nTest);
    MessageBox.Show(nTest.ToString());
    // this message show me 10

    testIntRef(ref nTest);
    MessageBox.Show(nTest.ToString());
    // this message show me 11
}

private void testInt(int nn)
{
    nn++;
}

private void testIntRef(ref int nn)
{
    nn++;
} 
```

这正是我的想法，如果我使用ref，参数是通过引用传递的，所以如果改变了，当我退出函数时，值就会改变......

**案例2：类：**

```
// simple class to understand the reference..
public class cTest
{
    int nTest;
    public cTest()
    {
        setTest(0);
    }

    public void setTest(int n)
    {
        nTest = n;
    }

    public int getTest()
    {
        return nTest;
    }
}

// my main code
private void button3_Click(object sender, EventArgs e)
{
    cTest tt = new cTest();
    tt.setTest(2);

    testClass(tt);

    // I expect that the message shows me 2, 'cause testClass
    // doesn't have (ref cTest test)
    MessageBox.Show(tt.getTest().ToString());
}

private void testClass(cTest test)
{
    test.setTest(55);
} 
```

并且，正如代码评论中所写，我没有通过我的 cTest 作为参考，但结果是一样的，消息显示我 55 而不是 2..

如何在没有参考的情况下通过课程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T07:06:18.613

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T07:07:17.167

如果你想要这样的东西，你想使用 struts 而不是类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-14T15:52:23.940

如果您只想确保方法不能修改参数，那么您可以创建一个只读基类：

```
public abstract class ReadOnlyUser
{
    public string GetName() { ... }
}

public class User : ReadOnlyUser
{
    public void SetName(string name) { ... }
} 
```

然后你可以把方法写成方法体不能误修改参数：

```
public void Register(ReadOnlyUser user)
{
    string name = user.GetName();
    user.SetName("John"); // doesn't compile
} 
```

当然，您可以使用`User`该类的实例调用此方法：

```
var user = new User(...);
Register(user); 
```

您还可以实现只读接口：

```
public interface IReadOnlyUser
{
    string GetName();
}

public interface IUser : IReadOnlyUser
{
    void SetName(string name);
}

public class User : IUser
{
    public string GetName() { ... }
    public void SetName(string name) { ... }
}

public void Register(IReadOnlyUser user)
{
    string name = user.GetName();
    user.SetName("John"); // doesn't compile
} 
```

# mysql - 当我只想在搜索查询中获取结果数量时，MySQL 是否接受 ORDER BY "nothing" LIMIT "all"？

> ID：11221003
> 
> 赞同：1
> 
> 时间：2012-06-27T07:04:59.130
> 
> 标签：mysql, search, sql-order-by, limit

我已将 Coldfusion 中的搜索移植到 MySQL 存储过程中。

实际搜索在网站上运行两次。一次获取记录数，第二次获取实际结果显示。

所以这两种 MySQL 语法在最后两行不同：

获取记录数：

```
 SELECT COUNT(*) ...
 GROUP BY a, b, c
 HAVING ... 
```

实际结果：

```
 SELECT "rows"...
 GROUP BY a, b, c
 HAVING ... 
 ORDER BY var1, var2
 LIMIT var_start, var_end 
```

**我的问题**：
由于我需要运行两次，有没有办法至少使用相同的存储过程=我可以将默认值添加到 order/grouping **"ORDER BY 'nothing' LIMIT 'all'**和 SELECT 的参数?

有点像 if 语句

```
WHERE 1
AND IF( var_x = '', '.', var_x = some_value ) 
```

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:07:34.483

如果它只是你想要的行数，你为什么不使用额外的参数来使用 count(*)。

```
SELECT count(a) as number_of_a, count(b) as number_of b ...
 GROUP BY a, b, c
 HAVING ... 
 ORDER BY var1, var2
 LIMIT var_start, var_end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:10:39.650

你看过 sql_calc_found_rows 吗？

```
select sql_calc_found_rows mytable.* ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:12:06.763

第一个查询是错误的——你不应该让 MySQL 引擎实际返回行，然后计算它们，你应该让 MySQL 直接计算它们：

```
SELECT COUNT(*)
FROM ...
GROUP BY a, b, c
HAVING ... 
```

试图在同一个 SQL 语句或存储过程中同时塞入记录*计数*和记录*检索是一种不必要的优化。*

# sql - if...else 在 sql 中

> ID：11221008
> 
> 赞同：2
> 
> 时间：2012-06-27T07:05:28.580
> 
> 标签：sql, tsql

我是 SQL 的初学者，遇到了一个相当简单的条件问题：数据库中的每个安装号都有一个客户。但有人告诉我，客户要么在 AUDEB 表中，要么在 AFORD 表中。我应该首先在 AUDEB 中查找 CUSTOMER_NO 并在它不为 NULL 时使用它。如果为 NULL，则从 AFORD 表中获取 CUSTOMER_NO。

如果 CUSTOMER_NO 不为 NULL，则使用它

```
 SELECT CUSTOMER_NO
  FROM AUDEB
  WHERE INST_NO = 2 
```

否则使用此 CUSTOMER_NO

```
 SELECT CUSTOMER_NO
  FROM AFORD
  WHERE INST_NO = 2 
```

我看到 SQL 中存在 IF...ELSE 条件，但是如果结果不为空，是否有更简单的方法可以在两个查询的值之间进行选择，如果结果不为空，我想使用第一个，否则使用另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:08:06.043

您可以`union`使用子查询来检索完整的客户列表：

```
select  CUSTOMER_NO
from    (
        select  CUSTOMER_NO
        ,       INST_NO
        from    AUDEB
        union all
        select  CUSTOMER_NO
        ,       INST_NO
        from    AFORD
        ) as all_customers
where   INST_NO = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:14:09.750

如果这两个表遵循相同的模式并且customrer_no 中没有重叠，则可以使用UNION：

```
SELECT T.CUSTOMER_NO
  FROM (SELECT CUSTOMER_NO, INST_NO FROM AUDEB
        UNION
        SELECT CUSTOMER_NO, INST_NO FROM AFORD) AS T
  WHERE T.INST_NO = 2 
```

或者如果 inst_no 可以在两个表中，则加入它们（即使模式不同）

```
SELECT COALESCE(T1.Customer_no, T2.CUSTOMER_NO)
FROM AUDEB as T1
FULL OUTER JOIN AFORD as T2
ON T1.INST_NO = T2.INST_NO
WHERE T1.INST_NO = 2 OR T2.INST_NO = 2 
```

COALESCE 将返回第一个非空结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:09:24.470

只需连接两个表并使用 ISNULL() 从相应表中获取值。

```
SELECT ISNULL(A.CUSTOMER_NO, B.CUSTOMER_NO) AS CUSTOMER_NO
  FROM AUDEB A INNER JOIN AFORD B
    ON A.INST_NO = B.INST_NO
 WHERE A.INST_NO = 2 
```

**编辑：**这假设 INST_NO 是主键，但现在评论中已经说明它不是。OP 应该使用正确的字段来加入这两个表。

# php - 为什么在执行 sql 脚本之前我 getConnection() 时 zend_db 不起作用

> ID：11221014
> 
> 赞同：1
> 
> 时间：2012-06-27T07:05:42.627
> 
> 标签：php, zend-db

```
try
 {
    $dbAdapter = Zend_Db::factory($config->general->db->adapter, $config->general->db-        >config->toArray());

    // first 
    $sql = 'select * from department';
    $results = $dbAdapter->fetchAll($sql);

    // second 
    $db = $dbAdapter->getConnection();
    $sql = 'select * from department';
    $results = $db->fetchAll($sql);
}
catch (Zend_Db_Adapter_Exception $exc)
{
     echo $exc->getTraceAsString();
}
catch (Zend_Exception $exc)
{
   echo $exc->getTraceAsString();
} 
```

当我使用第一种方式时，应用程序运行良好，但是当我使用第二种方式 - 获取连接然后运行 ​​sql 脚本时，它不起作用，更糟糕的是应用程序被阻止在线（$db-> fetchAll($sql)) 并且不返回任何错误。是什么原因？有人遇到过这个问题吗？顺便说一句，我是一个学习PHP的大一新生，我想结交一些朋友一起学习它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:29:33.593

Zend_Db 本质上是许多 RDBMS PHP 模块的包装器，为 Zend 框架提供单一的数据库抽象接口。这意味着您最终将使用 Zend_Db 以几乎相同的方式编写 SQL 请求，即使您使用的是 MySQL、MSSQL、PostgreSQL 等。

该`getConnection()`方法将强制数据库连接，并将返回数据库层的实际底层资源/对象。即如果你使用mysqli getConnection() 将返回一个mysqli 类型的对象。(http://www.php.net/manual/en/class.mysqli.php)

然后将 mysqli 实例类分配给`$db`变量，并尝试调用一个`fetchAll()`但`fetchAll()`在 mysqli 类中不存在的类。此时它可能会抛出一个错误，如果您没有错误报告，则会导致空白页。

例如检查这段代码：

```
<?php
class A {}

$a = new A();
$a->doesNotExist(); 
```

这将抛出：

> PHP 致命错误：在第 5 行的 foobar.php 中调用未定义的方法 A::doesNotExist()

因此，您可以调用`getConnection()`来强制数据库层连接到 RDBMS，但据我所知，不需要`getConnection()`. 您可以在 Zend_Db 文档的“管理惰性连接”部分阅读有关 getConnection() 以及为什么有人需要该资源的更多信息 - [http://framework.zend.com/manual/en/zend.db.adapter .html](http://framework.zend.com/manual/en/zend.db.adapter.html)

您应该像往常一样继续您的申请：

```
$sql = 'select * from department';
$resource = $dbAdapter->getConnection();
$results = $dbAdapter->fetchAll($sql); 
```

顺便说一句，问得很好。

# mongodb - Mongodb 间歇性抛出 No space left on device 错误

> ID：11221015
> 
> 赞同：1
> 
> 时间：2012-06-27T07:05:43.420
> 
> 标签：mongodb, nosql

MongoDB 在系统日志中引发以下错误：-

LogFile::synchronousAppend 失败，16384 字节中有 16384 字节未写入；b=0x7fed27ffe000 errno:28 设备上没有剩余空间 Tue Jun 26 00:13:42 Got signal: 6 (Aborted)

它是 64 位 Cent OS 机器。我的磁盘使用率仅为 65%。

发生这种情况，mongodb 崩溃，需要重新启动。

问题和解决方法是什么？

# vb.net - 通过 VB.NET 在 Word 表中邮件合并数据

> ID：11221016
> 
> 赞同：0
> 
> 时间：2012-06-27T07:05:43.960
> 
> 标签：vb.net, interop, mailmerge

```
wrdMergeFields.Add(wrdSelection.Range, "ProductName") 
```

上面的代码在合并期间基本上显示了 word Document 中不同页面中的所有 productName。

请帮助我如何将数据放入表格中。我必须为我的 ProductName、AccountNo、OutBalance、AccountName 等编写多个代码。我的问题是我不知道如何将它们放在一个表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:15:12.400

如果您也对解决问题的 3rd 方库感兴趣，可以尝试我们的[GemBox.Document](http://www.gemboxsoftware.com/document/overview)组件。

这是一个示例 VB.NET 代码如何做到这一点（通过从代码创建模板文档并从文件加载它）：

```
' Use the component in free mode.
ComponentInfo.SetLicense("FREE-LIMITED-KEY")

' Define DataTable with two columns: 'Name' and 'Surname', and fill it with some data.
' You don't have to do this if you already have a DataTable instance.
Dim dataTable = New DataTable("People")
dataTable.Columns.Add(New DataColumn("Name", GetType(String)))
dataTable.Columns.Add(New DataColumn("Surname", GetType(String)))
dataTable.Rows.Add("John", "Doe")
dataTable.Rows.Add("Fred", "Nurk")
dataTable.Rows.Add("Hans", "Meier")
dataTable.Rows.Add("Ivan", "Horvat")

' Create and save a template document. 
' You don't have to do this if you already have a template document.
' This code is only provided as a reference how template document should look like.
Dim document = New DocumentModel()
document.Sections.Add(
    New Section(document,
        New Table(document,
            New TableRow(document,
                New TableCell(document,
                    New Paragraph(document, "Name")),
                New TableCell(document,
                    New Paragraph(document, "Surname"))),
            New TableRow(document,
                New TableCell(document,
                    New Paragraph(document,
                        New Field(document, FieldType.MergeField, "RangeStart:People"),
                        New Field(document, FieldType.MergeField, "Name"))),
                New TableCell(document,
                    New Paragraph(document,
                        New Field(document, FieldType.MergeField, "Surname"),
                        New Field(document, FieldType.MergeField, "RangeEnd:People")))))))
document.Save("TemplateDocument.docx", SaveOptions.DocxDefault)

' Load a template document.
document = DocumentModel.Load("TemplateDocument.docx", LoadOptions.DocxDefault)

' Mail merge template document with DataTable.
' Important: DataTable.TableName and RangeStart/RangeEnd merge field names must match.
document.MailMerge.ExecuteRange(dataTable)

' Save the mail merged document.
document.Save("Document.docx", SaveOptions.DocxDefault)

' Open the documents with MS Word.
Process.Start("TemplateDocument.docx")
Process.Start("Document.docx") 
```

# java - 在 swing 中实现 CTRL-F（查找）功能

> ID：11221017
> 
> 赞同：-5
> 
> 时间：2012-06-27T07:05:49.867
> 
> 标签：java, swing

我正在 Java Swing 中创建一个开源文档编辑器，我想在 swing 中实现 CTRL-F（查找）功能。如果没有从头开始，是否有任何可用的开源 Java 代码可供我在已经实现此功能的地方借用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:50:53.230

**键绑定**是您正在寻找的。这是教程：[http ://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

**JDialog**（或 frame.showInputDialog）是在触发 ctrl+F 操作后应该使用的。在此处输入搜索字符串，并从返回的字符串中搜索文档。本教程再次在 java 文档中。

突出显示非常复杂，取决于您编写的代码。使用 seBackgroundColor(Color color) 后，您将不得不在某些选定文本上使用 repaint 方法

您没有放置任何代码，所以我无法用任何代码回答。但最好自己查看教程并理解它，而不是复制粘贴代码。

# c++ - Qt 显示一半的小部件

> ID：11221018
> 
> 赞同：0
> 
> 时间：2012-06-27T07:05:53.257
> 
> 标签：c++, qt, animation

我有一个 QGroupBox 小部件，我正在屏幕上制作动画。问题是我只想显示组框的某些部分。例如，如果小部件的宽度为 200 像素，我如何只显示前 100 像素而不改变小部件的大小并使布局变得有趣？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:57:26.167

我想出了一个解决方案。通过将小部件放置在另一个组框内并为其设置动画以移出组框的边界会产生所需的结果。

# java - 如何防止 solr 在索引时解码 url？

> ID：11221019
> 
> 赞同：0
> 
> 时间：2012-06-27T07:06:02.383
> 
> 标签：java, solr, solrj

我正在使用 Solrj 来索引 Solr 中的文档，其中一个字段是 url。在创建 solr 文档并随后将其传递给 SolrServer 时，我没有进行任何显式解码，以保持 url 的原始格式。但是，一旦它被编入索引，网址就会被解码。

这是一个包含撇号的测试示例。

```
 http://test.com/test/Help/What%e2%80%99s_N1 
```

在 solr 索引中，它被解码为

```
 http://test.com/test/Help/What's_N1 
```

这是一个示例代码：

```
 SolrServer solrServer = new StreamingUpdateSolrServer(solrPostUrl, solrQueueSize, solrThreads);
SolrInputDocument solrDoc = new SolrInputDocument();
solrDoc.addField("url", "http://test.com/test/Help/What%e2%80%99s_N1");
UpdateResponse solrResponse = solrServer.add(solrDoc); 
```

我查看了 SolrInputDocument 对象，它确实具有正确的格式，即编码版本。

如果有人可以为此提供指针，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:17:56.587

我认为这是因为您的标记器

> 一个很好的通用标记器，可以去除许多无关字符并将标记类型设置为有意义的值。标记类型仅对识别相同标记类型的后续标记过滤器有用。没有任何过滤器使用 StandardTokenizer 的类型。

关于标准分词器

在[这里查看](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)

您可以在 solr/schema.xml 中更改所有这些行为

# ruby-on-rails-3 - 密码文本框rails 3中的值为空？

> ID：11221020
> 
> 赞同：3
> 
> 时间：2012-06-27T07:06:03.340
> 
> 标签：ruby-on-rails-3

`<%=password_field 'email_setting','emailpasswd' %>`

在此@email_setting.emailpasswd 的值是密码（@email_setting.emailpasswd="password"）。

但是在 email_setting 表单中编辑密码文本框是空的。我需要显示一些字符（#######）来指示密码已经输入。

我正在使用 Rails 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-06T15:09:27.733

你也可以这样做：

在 /config/initializers/my_constants.rb 中，使用您希望在密码输入框中向用户显示的值设置一个常量。

```
STARS_PASSWORD = '*******' 
```

在 User 模型中，创建一个我们将从表单调用的方法，以确定在密码输入框中向用户显示的内容。

```
class User < ActiveRecord::Base
    def password_form_value
        password.present? ? STARS_PASSWORD : ''
    end
end 
```

在表单中，将 STARS_PASSWORD 显示为输入表单上的值，如果实际上用户已经设置了密码。

```
<%=form.password_field :password, :value => @user.password_form_value %> 
```

在 UsersController 中，如果提交的密码是 STARS_PASSWORD，则在更新之前删除提交的密码。

```
params[:user].delete :password if params[:user][:password] == STARS_PASSWORD 
```

注意：如果您在 User 模型上有密码验证器（例如，密码需要包含字母和数字），您还需要修改该验证器以允许 STARS_PASSWORD。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:43:00.593

这是 Rails 的一项安全预防措施，即未预先填充密码字段。否则，它们将在页面源代码中以纯文本形式显示。

如果你真的想在那里显示它，你需要绕过表单助手并回退到纯 HTML：

```
<input type="password" name="email_setting[emailpasswd]" value="<%= @email_setting.emailpasswd %>" /> 
```

但是，如果您对密码进行哈希处理，那将无法正常工作。您无法“解密”散列密码，因此您无法在此处以纯文本形式显示它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-10T03:20:51.500

`password_field``nil`默认情况下以值呈现。这使得默认情况下使用密码是安全的。如果要呈现 的值，则`password_field`必须执行例如

```
f.password_field(:password, :value => @user.password) 
```

[https://github.com/rails/rails/commit/1851af84c1c7244dc416be9c93a4700b70e801e3](https://github.com/rails/rails/commit/1851af84c1c7244dc416be9c93a4700b70e801e3)

# unit-testing - 由于找不到“TechTalk.SpecFlow”文件，SpecFlow 单元测试失败

> ID：11221023
> 
> 赞同：4
> 
> 时间：2012-06-27T07:06:11.117
> 
> 标签：unit-testing, tfs, mstest, specflow

我有一个 VS2010 单元测试项目设置为使用 SpecFlow 1.8.1 和 mstest。为了让 SpecFlow 单元测试正常工作，我做了以下工作：-

1.  我在我的项目中添加了对以下文件的引用：-

    ```
    Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll
    TechTalk.SpecFlow.dll
    ```

    请注意，TechTalk.SpecFlow.dll 已添加到我的项目中，并且引用指向该文件。

2.  我已将 TechTalk.SpecFlow.dll 引用的“复制本地”属性设置为 True。

3.  我还添加了一个 App.Config，将“MsTest.2010”指定为提供者，并为 SpecFlow 功能重新生成了所有代码隐藏。

在我的 VS2010 中一切正常，测试在 SpecFlow 测试运行器和 mstest 测试运行器中都成功运行。但是当我尝试在 TFS 2008 中运行 mstests（使用 .vsmdi 测试列表文件）时，它失败了，出现以下异常：-

```
Class Initialization method MyNamespace.MyTestFeature.FeatureSetup threw exception.
System.Configuration.ConfigurationErrorsException:
System.Configuration.ConfigurationErrorsException: An error occurred creating the
configuration section handler for specFlow: Could not load file or assembly
'TechTalk.SpecFlow' or one of its dependencies. The system cannot find the file
specified. (D:\Projects\TestProject\TestResults\administrator_MYPC 2012-06-27
18_30_05_Any CPU_Debug\Out\TestProject.DLL.config line 4) --->
System.IO.FileNotFoundException: Could not load file or assembly 'TechTalk.SpecFlow'
or one of its dependencies. The system cannot find the file specified. 
```

请注意，TFS 很好地构建了项目，并且它在同一个项目中运行其他单元测试（正常的 mstests，而不是 SpecFlow）没有问题。它仅在 SpecFlow 测试运行时失败。

那么我做错了什么？

编辑：我的 App.Config 文件的内容如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section
       name="specFlow"
       type="TechTalk.SpecFlow.Configuration.ConfigurationSectionHandler, TechTalk.SpecFlow"/>
  </configSections>
  <specFlow>
    <unitTestProvider name="MsTest.2010" />

    <runtime detectAmbiguousMatches="true"
         stopAtFirstError="false"
         missingOrPendingStepsOutcome="Inconclusive" />

    <trace traceSuccessfulSteps="true"
           traceTimings="false"
           minTracedDuration="0:0:0.1" />
  </specFlow>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:35:30.177

按照[本网站](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)和[本网站](https://github.com/techtalk/SpecFlow/wiki/Setup-SpecFlow-Projects)上的说明：

该命令 `Tools > Library Package Manager > Package Manager Console` 允许您输入`PM> Install-Package SpecFlow`

当提示返回“安装成功”时，SpecFlow 组件现在出现在项目的引用中。并且 MSTest 项目现在可以成功编译（至少对我而言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T12:41:13.003

我也遇到了这个错误，在我的情况下，问题是我使用 \...\obj\Debug||Release\ 文件夹作为目标，而不是 \...\bin\Debug||Release\ 文件夹。查看这些文件夹，我发现前者缺少 TechTalk.dll 程序集。只需切换到我的 .bat 文件，问题就解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-15T09:05:01.257

有时 VS2013 不是在项目文件夹中寻找 SpecRun dll，而是在`C:\Users\**YOUR_USER**\AppData\Local\Temp\VisualStudioTestExplorerExtensions\SpecRun.Runner.1.3.0\tools`. 所以你只需要把所有必要的 SpecFlow 库放在那里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:50:33.203

我发现让它工作的一个技巧是为我在项目中创建的每个 SpecFlow 功能添加另一个类。该课程如下所示：-

```
[DeploymentItem(@"TechTalk.SpecFlow.dll")]
partial class MyTestFeature { }

// The above class-name needs to come from the auto-generated code behind
// (.feature.cs) for each SpecFlow feature. 
```

我认为这是一个非常讨厌的 hack，但它确实提供了为什么它不起作用的线索。如果有人想出一个更优雅的解决方案，那就太好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T01:17:22.220

我终于找到了解决这个问题的更合适的方法。我只需要添加一个构建后事件即可从构建输出中删除 .config 文件。（App.config 文件仅用于在设计时生成代码隐藏。在运行时根本不使用它，因此可以将其删除。）

构建后事件的命令如下所示：-

```
del /f /q "$(TargetDir)$(TargetFileName).config" 
```

更正：.config 文件用于生成不确定的结果，因此更好的构建后事件命令如下：-

```
if "$(IsDesktopBuild)"=="false" del /f /q "$(TargetDir)$(TargetFileName).config" 
```

# excel - 需要使用 VBA 从 AutoCAD 将值写入 Excel 工作表

> ID：11221031
> 
> 赞同：1
> 
> 时间：2012-06-27T07:06:53.683
> 
> 标签：excel, vba, autocad

我在 Autocad 中使用 VBA 来计算图形中的块。通过互联网的一些搜索和一些尝试，我设法完成了以下代码并计算了任何图形中的所有块，或者按层或选定的块。

```
 Sub BlockCount_Test()
    dispBlockCount "COUNT_ALL"
    dispBlockCount "COUNT_BY_LAYER"
    dispBlockCount "COUNT_BY_FILTER"
End Sub
Sub dispBlockCount(ByVal strAction As String)
On Error Resume Next
Dim objBlkSet As AcadSelectionSet
Dim objBlkRef As AcadBlockReference
Dim strBlkNames() As String
Dim iGpCode(0) As Integer
Dim vDataVal(0) As Variant
Dim iSelMode As Integer
Dim iBlkCnt As Integer
iGpCode(0) = 0
vDataVal(0) = "INSERT"
iSelMode = 0  '|-- Selection Modes (0 = Select All, 1 = Select On Screen) --|
Set objBlkSet = getSelSet(iGpCode, vDataVal, iSelMode)
If objBlkSet.Count <> 0 Then
Select Case strAction
Case "COUNT_ALL"
    ReDim strBlkNames(objBlkSet.Count - 1)
    iBlkCnt = 0
    For Each objBlkRef In objBlkSet
        strBlkNames(iBlkCnt) = objBlkRef.Name
        iBlkCnt = iBlkCnt + 1
    Next
    MsgBox getUniqBlockCount(strBlkNames), , "Count All"
Case "COUNT_BY_LAYER"
    Dim objCadEnt As AcadEntity
    Dim vBasePnt As Variant
    ThisDrawing.Utility.GetEntity objCadEnt, vBasePnt, "Pick a block reference:"
    If Err.Number <> 0 Then
        MsgBox "No block references selected."
        objBlkSet.Delete
        Exit Sub
    Else
        If objCadEnt.ObjectName = "AcDbBlockReference" Then
            Dim objCurBlkRef As AcadBlockReference
            Dim strLyrName As String
            iBlkCnt = 0
            Set objCurBlkRef = objCadEnt
            strLyrName = objCurBlkRef.Layer
            For Each objBlkRef In objBlkSet
                If StrComp(objBlkRef.Layer, strLyrName, vbTextCompare) = 0 Then
                    ReDim Preserve strBlkNames(iBlkCnt)
                    strBlkNames(iBlkCnt) = objBlkRef.Name
                    iBlkCnt = iBlkCnt + 1
                End If
            Next
           MsgBox getUniqBlockCount(strBlkNames), , "Count by Layer"
        Else
            ThisDrawing.Utility.prompt "The selected object is not a block reference."
        End If
    End If
Case "COUNT_BY_FILTER"
    Dim strFilter As String
    iBlkCnt = 0
    strFilter = ThisDrawing.Utility.GetString(False, "Enter a filter option:")
    If strFilter <> "" Then
        For Each objBlkRef In objBlkSet
            If UCase(objBlkRef.Name) Like UCase(strFilter) Then
                ReDim Preserve strBlkNames(iBlkCnt)
                strBlkNames(iBlkCnt) = objBlkRef.Name
                iBlkCnt = iBlkCnt + 1
            End If
        Next
        MsgBox getUniqBlockCount(strBlkNames), , "Count by Filter"
    Else
        ThisDrawing.Utility.prompt "Search criteria should not be empty."
    End If
Case Else
    ThisDrawing.Utility.prompt "Invalid action mode."
End Select
Else
    ThisDrawing.Utility.prompt "No block references were found."
End If
objBlkSet.Delete
If Err.Number <> 0 Then
    ThisDrawing.Utility.prompt Err.Description
End If
End Sub

Function getSelSet(ByRef iGpCode() As Integer, vDataVal As Variant, iSelMode As Integer) As AcadSelectionSet
Dim objSSet As AcadSelectionSet
Set objSSet = ThisDrawing.SelectionSets.Add("EntSet")
Select Case iSelMode
Case 0
    objSSet.Select acSelectionSetAll, , , iGpCode, vDataVal
Case 1
ReSelect:
    objSSet.SelectOnScreen iGpCode, vDataVal
    If objSSet.Count = 0 Then
        Dim iURep As Integer
        iURep = MsgBox("No entities selected, Do you want to select again?", _
        vbYesNo, "Select Entity")
        If iURep = 6 Then GoTo ReSelect
        objSSet.Delete
        Set getSelSet = Nothing
        Exit Function
    End If
Case Else
    ThisDrawing.Utility.prompt "Invalid selection mode...."
End Select
Set getSelSet = objSSet
End Function

Function getUniqBlockCount(ByRef strBlkNames() As String) As String
Dim strUniqBlkNames() As String
Dim iBlkCount() As Integer
Dim iArIdx1, iArIdx2 As Integer
iArIdx1 = 0: iArIdx2 = 0
For iArIdx1 = LBound(strBlkNames) To UBound(strBlkNames)
    If iArIdx1 = 0 Then
        ReDim strUniqBlkNames(iArIdx2)
        strUniqBlkNames(iArIdx2) = strBlkNames(iArIdx1)
        iArIdx2 = iArIdx2 + 1
    End If
    Dim iUnqArIdx As Integer
    Dim blUniq As Boolean
    blUniq = True
    For iUnqArIdx = LBound(strUniqBlkNames) To UBound(strUniqBlkNames)
        If StrComp(strBlkNames(iArIdx1), strUniqBlkNames(iUnqArIdx), vbTextCompare) = 0 Then
            blUniq = False
            Exit For
        End If
    Next
    If blUniq Then
        ReDim Preserve strUniqBlkNames(iArIdx2)
        strUniqBlkNames(iArIdx2) = strBlkNames(iArIdx1)
        iArIdx2 = iArIdx2 + 1
    End If
Next
iArIdx1 = 0: iArIdx2 = 0
For iArIdx1 = LBound(strUniqBlkNames) To UBound(strUniqBlkNames)
    For iArIdx2 = LBound(strBlkNames) To UBound(strBlkNames)
        If StrComp(strBlkNames(iArIdx2), strUniqBlkNames(iArIdx1), vbTextCompare) = 0 Then
            ReDim Preserve iBlkCount(iArIdx1)
            iBlkCount(iArIdx1) = iBlkCount(iArIdx1) + 1
        End If
    Next
Next
For iUnqArIdx = LBound(iBlkCount) To UBound(iBlkCount)
    strUniqBlkNames(iUnqArIdx) = strUniqBlkNames(iUnqArIdx) & vbTab & vbTab & vbTab & iBlkCount(iUnqArIdx) & vbCrLf
Next
Dim strTitle, strBlkCount As String
strBlkCount = Join(strUniqBlkNames)
strTitle = "Block Name" & vbTab & vbTab & "Count" & vbCrLf
strTitle = strTitle & String(14, "-") & vbTab & vbTab & String(8, "-") & vbCrLf
getUniqBlockCount = strTitle & strBlkCount
End Function 
```

我的目标是获取这些块编号并将它们自动插入到 Excel 工作表以及某个工作表和单元格中。有人可以帮我找到解决这个问题的方法吗？我以某种方式设法调用了一个 excel 表，但我目前不知道如何将块数放在正确的位置。即，假设我希望它们出现在我从代码中的计数中获得的表格中，我该如何实现呢？

PS我是新来的，如果您需要更多信息，我很乐意添加更多信息以找到解决方案。

在此先感谢格鲁吉亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:00:35.297

我自己不使用 AutoCad VBA，但根据您问题的简单性质，我猜这可能会对您有所帮助：

如果要创建新的 Excel 应用程序：

```
Dim oApp_Excel as Excel.Application
Dim oBook as Excel.workbook

Set oApp_Excel = CreateObject("EXCEL.APPLICATION")
set oBook = oApp_Excel.workbooks.add

oBook.sheets("<Name>").cells(<Counter>, <Column_Number>).value = <BlockNr (based on counter)> 
oBook.SaveAs(<Path>) 
oBook.close
oApp_Excel.quit

set oBook = nothing 
```

您可以将值放置在您想要的任何单元格或表单中；这些是 Excel VBA 的基础知识。另一种方法是首先将 BlockNumbers 加载到数组中（在您当前的代码中），然后填充值。这样，您可以动态设置范围并将数组中的所有数据一次加载到范围中。我希望我没有误解您的问题，并且我的回复符合您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T05:44:15.187

'创建新的excel实例。设置 excelApp = CreateObject("Excel.Application")

```
If err <> 0 Then
    MsgBox "Could not start Excel!", vbExclamation, "Warning"
    End
Else
    excelApp.Visible = True
    excelApp.ScreenUpdating = False

    'Add a new workbook and set the objects.
    Set wkbObj = excelApp.Workbooks.Add(1)
    Set shtObj = excelApp.Worksheets(1)

    shtObj.Name = "Measured Polylines"

    With shtObj.Range("A1:D1")
        .Font.Bold = True
        .Autofilter
    End With 
```

# c# - Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息

> ID：11221033
> 
> 赞同：60
> 
> 时间：2012-06-27T07:06:55.113
> 
> 标签：c#, asp.net

我的页面上有一个网格视图，我想将其导出到 Excel 工作表，下面是我为执行此任务而编写的代码，这里我已经将数据集传递给绑定网格的方法，并且`btnExcelExport`是按钮将网格内容导出到 Excel 表：-

```
private void BindGridView(DataSet ds)
{
    if (ds.Tables.Count > 0)
    {
        if (ds.Tables[0].Rows.Count > 0)
        {
            GVUserReport.DataSource = ds;
            GVUserReport.DataBind();
            btnExcelExport.Visible = true;
        }
    }
}

protected void btnExcelExport_Click(object sender, EventArgs e)
{
    Response.Clear();
    Response.AddHeader("content-disposition","attachment;filename=FileName.xls");
    Response.Charset = "";
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = "application/vnd.xls";
    System.IO.StringWriter stringWrite = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
    GVUserReport.RenderControl(htmlWrite);
    Response.Write(stringWrite.ToString());
    Response.End();
}

public override void VerifyRenderingInServerForm(Control control)
{
    return;
} 
```

现在，当我调试时，我发现网格已成功绑定，但是在尝试将其导出到 Excel 时，出现此错误：

> “Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。”

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-06-27T07:43:05.397

我解决了这个问题。当我使用`UpdatePanel`时，我在页面事件中添加了以下代码，`Page_Load`它对我有用：

```
protected void Page_Load(object sender, EventArgs e) {
  ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
  scriptManager.RegisterPostBackControl(this.btnExcelExport);
  //Further code goes here....
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-25T11:54:36.577

就我而言，问题是由网站**母版页上的一些****Response.Write**命令引起的（代码隐藏）。他们在那里只是为了调试目的（我知道这不是最好的方法）......

 *** * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-29T21:53:16.107

我将控件添加到`Triggers`更新面板中的标签中：

```
 </ContentTemplate>
    <Triggers>
        <asp:PostBackTrigger ControlID="exportLinkButton" />
    </Triggers>
</asp:UpdatePanel> 
```

这样，exportLinkBut​​ton 将触发 UpdatePanel 进行更新。
更多信息[在这里](http://www.asp.net/web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-06T20:53:58.583

1-**永远不要**使用 Response.Write。

2-我在创建（不在Page_Load中）一个LinkBut​​ton（动态）后将代码放在下面并解决了我的问题：

```
ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
scriptManager.RegisterPostBackControl(lblbtndoc1); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-11-30T20:28:59.463

对于我的 VB.Net 朋友 -

```
Dim scriptManager As ScriptManager = scriptManager.GetCurrent(Me.Page)
scriptManager.RegisterPostBackControl(Me.YourButtonNameHere) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-19T05:59:56.280

我有同样的错误，然后我尝试**`<asp:PostBackTrigger ControlID="xyz"/>`**而不是**AsyncPostBackTrigger**。这对我有用。这是因为我们不想要部分回发。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-06T12:27:38.817

将此添加到您的 PageLoad 中，它将解决您的问题：

```
ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
scriptManager.RegisterPostBackControl(this.lblbtndoc1); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-20T14:03:06.077

[这](https://stackoverflow.com/a/11221536/641833)对我也有用，但有一个补充（下）。

```
protected void Page_Load(object sender, EventArgs e) {
  ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
  scriptManager.RegisterPostBackControl(this.btnExcelExport);
  //Further code goes here....
} 
```

我在按钮上注册了一个脚本，以便在其事件处理完成后单击另一个按钮。为了让它工作，我不得不从更新面板中删除另一个按钮（以防万一有人遇到同样的问题）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-17T15:00:37.057

对我有用的是在 inetpub VirtualDirectories\443\web.config 文件的 appSettings 标记上将 aspnet:MaxHttpCollectionKeys 设置为高值：

```
<configuration>
    <appSettings>
        <add key="aspnet:MaxHttpCollectionKeys" value="100000" />
    </appSettings>
</configuration> 
```**

# jasper-reports - jasperreport 高度带内容依赖

> ID：11221041
> 
> 赞同：1
> 
> 时间：2012-06-27T07:07:17.500
> 
> 标签：jasper-reports

如何让报表引擎调整带高以适应内容所占用的真实空间？

如果您使用“pageHeader”部分，您可以在此论坛中找到回复。 [http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=83728](http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=83728)

但在“columnFooter”或“pageFooter”中不起作用。

我想在第一页的底部显示信息，而不是在后续页面中保留空白。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:07:47.967

里卡多·马里亚卡。此代码是解决方案，感谢 Ricardo 和 Dynamic Report

```
 private void build() {
    try {
        JasperPdfExporterBuilder pdfExporterBuilder = export
                .pdfExporter(PDF_FILE);
        JasperReportBuilder jasperReportBuilderMain = report()
                .columns(
                        col.column("Item", "item", type.stringType()),
                        col.column("Quantity", "quantity",
                                type.integerType()),
                        col.column("Unit price", "unitprice",
                                type.bigDecimalType()))
                .setDataSource(createSubreportDataSource())
                // .detail(cmp.subreport(createSubreport()))
                .setWhenNoDataType(WhenNoDataType.ALL_SECTIONS_NO_DETAIL);

        JasperReportBuilder jasperReportBuilderDisclaimer = report()
                .setPageFormat(PageType.A4, PageOrientation.LANDSCAPE)
                .summary(cmp.subreport(jasperReportBuilderMain))
                .summaryWithPageHeaderAndFooter()
                .setWhenNoDataType(WhenNoDataType.ALL_SECTIONS_NO_DETAIL)
                .columnHeader(
                        cmp.text("first page header").setFixedHeight(50))
                .columnFooter(
                        cmp.text(DISCLAIMER).setStretchWithOverflow(true)
                                .setFixedHeight(250))
                .pageHeader(
                        Templates
                                .createTitleComponent("Ricardo Mariaca Approach"))
                .pageFooter(Templates.footerComponent).show()
                .toPdf(pdfExporterBuilder);

    } catch (DRException e) {
        e.printStackTrace();
    }
}

private JRDataSource createSubreportDataSource() {
    DRDataSource dataSource = new DRDataSource("item", "quantity",
            "unitprice");
    for (int i = 0; i < 180; i++) {
        dataSource.add("Book", (int) (Math.random() * 10) + 1,
                new BigDecimal(Math.random() * 100 + 1));
    }
    return dataSource;
} 
```

}

# c# - 为什么 BitmapImages 无法在我的 GridView 中正确加载和显示？

> ID：11221045
> 
> 赞同：1
> 
> 时间：2012-06-27T07:07:33.623
> 
> 标签：c#, gridview, windows-8, windows-runtime, microsoft-metro

我有一个 GridView，其元素包含一个 TextBlock 和一个图像。TextBlock 总是可以很好地填充，但有时不会为一两个项目加载图像。如果我刷新数据源，图像会正确显示。我认为问题在于时间（所有数据获取都是异步完成的）。这是从磁盘获取图像的代码。所有图像均为 140x140 像素，为 PNG 文件。

```
public async Task<List<BitmapImage>> getPhotos()
        {
            photos.Clear(); //clears list of photos

            IReadOnlyList<IStorageFile> files = (IReadOnlyList<IStorageFile>)await folderHierarchy.Last().GetFilesAsync(); //reads in all files from current working directory

            foreach (StorageFile currentFile in files) //for each file in that directory
            {
                if (currentFile.Name.EndsWith(".png")) //only handle png files
                {
                    photos.Add(await getBitmapImageAsync(currentFile)); //actually read in image from separate async method (bellow)
                }
            }

            return photos;
        }

        public async Task<BitmapImage> getBitmapImageAsync(StorageFile storageFile)
        {
            BitmapImage image = new BitmapImage();
            FileRandomAccessStream stream = (FileRandomAccessStream) await storageFile.OpenAsync(FileAccessMode.Read);
            image.SetSource(stream);

            return image;
        } 
```

我使用以下方法运行此方法： List tilePicturesArray = await dataFetcherClass.getPhotos(); 原始照片列表不包含所有照片。第一个代码块（上图）中发生了错误。下一步是当我在我的列表中填充图像和文本框时（GridViewCell 是我在我的 GridView 中绑定数据的类） GridViewCell 对象的列表是绑定到我的 GridView 的。我不相信这是问题所在。

```
for (int x = 0; x < tileTitlesArray.Count; x++) //this IS running inside of an async method
            {
                GridViewCell singleCell = new GridViewCell();

                singleCell.tileName = tileTitlesArray.ElementAt(x);
                singleCell.tileImage = tilePicturesArray.ElementAt(x);

                tileCells.Add(singleCell); //tileCells is the datasource for gridview
            } 
```

您认为会导致问题的原因是什么？我添加了一个小刷新按钮，它基本上重新运行上述循环（重新填充 gridview 数据源和图块）但不重新获取 tilePicturesArray，因此使用相同的原始 BitmapImages 列表完成绑定（并且相同的图块仍然缺少图片）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:32:08.933

发布后大约 20 分钟，msdn 论坛上的某个人回答了我的问题。从大约一周前开始，这个问题就一直困扰着我的程序，但在过去的 3 天里，我才真正开始研究这个令人愤怒的问题。

如何修复：从本地磁盘填充 ListView 或 GridView 数据绑定图像时，不要使用 Stream 作为 BitmapImage 源 - 使用带有指向目标图像的 Uri 对象的 BitmapImage 构造函数。

就是这样：

`BitmapImage tempBitmap = new BitmapImage(new Uri(currentFile.Path));

照片.添加（tempBitmap）；`

# hadoop - 如何在 Pig 中进行条件 JOIN？

> ID：11221054
> 
> 赞同：1
> 
> 时间：2012-06-27T07:08:11.397
> 
> 标签：hadoop, user-defined-functions, apache-pig

我有两个关系A，B

```
DESCIBE A
A:{ip_num:long,data:int}

DESCIBE B
B:{ip_start_num:long,ip_end_num:long} 
```

我想要产品：

```
C:{group:(ip_start_num:long, ip_end_num:long), B:{(ip_num:long, data:int)}}

where ip_num >ip_start_num && ip_num < ip_end_num 
```

有可能与 PigLatin 有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T15:53:52.307

恐怕在 Pig 中没有 theta-joins。您可以进行交叉连接，然后进行过滤。警惕由此产生的数据爆炸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:32:47.020

但是，您需要`FILTER`在嵌套内部进行操作`FOREACH`；似乎有一个错误，所以这样的句子甚至不会解析。[https://issues.apache.org/jira/browse/PIG-1798](https://issues.apache.org/jira/browse/PIG-1798)。这篇文章也提到了同样的问题。[在 PIG 的嵌套 FOREACH 中使用过滤器](https://stackoverflow.com/questions/8235236/using-filter-in-a-nested-foreach-in-pig)

我昨天遇到了同样的问题，有两种解决方案：第一个是编写一个 UDF 来按 ip 范围进行过滤。第二个是找到在两个关系之间进行简单连接的方法，以便您可以拥有另一个关系：

`D:{ip_num:long,data:int,ip_start_num:long,ip_end_num:long}`.

在那里，您可以在没有嵌套 foreach 的情况下进行过滤。我选择了第二个选择，但这并不总是一种加入方式。

# c# - 如何在网格单元中使用编辑蒙版？

> ID：11221065
> 
> 赞同：2
> 
> 时间：2012-06-27T07:08:55.703
> 
> 标签：c#, .net, gridview, devexpress

我有一个 DevExpress Grid，想在列的每个单元格上设置一个编辑掩码。这样用户就可以在这个单元格中输入一个值，我的程序通过编辑 Mask RegEx 来检查它。我知道我可以在每个单元格上设置一个文本框控件，在那里我可以使用掩码。但这不适用于我必须遵守的其他要求。在我的单元格中，所有允许的值都是 x<10。我希望如果用户键入 99，我的单元格会自动使 9,9 像编辑掩码一样。是否有在每个输入单元格的值后触发的事件？然后我可以自己编程，不需要面具。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:00:39.013

您可能只想在用户完成编辑单元格后进行此编辑，即用户不应在键入过程中被打断。您要使用的事件是`DataGridView.CellValueChanged`，您可以使用`DataGridView.SelectedCell`属性找到编辑的单元格，并且可以相应地获取/设置值。希望这能回答你的问题。

# c++ - 在 C++ 库中动态阻止函数的使用

> ID：11221068
> 
> 赞同：2
> 
> 时间：2012-06-27T07:09:16.080
> 
> 标签：c++, visual-c++, dynamic, dll, c++03

我们有一个创建为**.lib**和**.dll**的库（这是一个完全用 C++ 编写的 Windows 平台的大型库）。用户可以在他们的程序或库中或他们想要使用的任何地方使用该库。

但是我想将*某些*功能限制为*某些*用户。
例如，让我们说，

*   我们的库有 3 个函数`foo()`，`bar()`和`hoo()`.
*   用户**A**为这些功能付费`foo()`，`bar()`并且`hoo()`。
*   用户**B**为功能`bar()`和`hoo()`.

因此，当我们向**B**提供库文件（headers/libs/dlls 等）时，

1.  我们可以创建我们库的副本并删除 foo() 函数及其相关内容并将其发送给**B**
2.  **或者**我们可以将整个库发送给他，并通过某种方式阻止他使用`foo()`.

    *   第一种方法不好，因为它是一项巨大的工作，并且必须小心依赖关系。即使我们确实知道`bar()`并且`hoo()`不依赖于`foo()`，删除东西并给他们一个定制版本的 lib 仍然是一件令人头疼的事情，其中​​还包括更多的测试。维护将更加成问题。SVN也会很混乱。
    *   第二种方法是我猜的最好方法。但是怎么做呢？

如果**B**`foo()`以后为功能付费怎么办？那我就得让他用了。

我想现在你明白了这个问题。这两种方式只是我的观点，也许我对它们的结论也可能是错误的。所以，我问是否有人对此事有任何想法/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:06:10.400

我会尝试使用[Windows Forwared-Library 机制](http://msdn.microsoft.com/en-us/magazine/cc301808.aspx)（部分导出转发）来实现此机制。这种机制允许您构建一种可以分发的代理库，它“什么都不做”，只是将真正的代码执行转发给其他库。这将有利于提供一个单一的通用接口，但区分用户及其在其他库层中使用 API 的“权限”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:36:28.970

我将只创建一个版本的`.dll`包含标头，并让用户下载他所支付的导入库。对于其他一切，律师是最好的工具。

有人买了一个额外的模块？让他们下载额外的导入库。

您构建的任何类型的保护/锁定（无论是对`has_paid`布尔值、公钥方案还是代理库的简单检查）都*可以*被规避。有些更容易绕过，有些则更难绕过。

通过不给他们必要的导入库，比如 module `foo`，你给诚实的客户一个温和的提示。

*有些人还会*为了你的钱骗你吗？他们当然会（如果你的产品足够有趣的话），但无论哪种方式，这些人都会这样做。他们不妨从一开始就盗版完整的软件包。他们是那种无论如何都不会为你的产品买单的人。*那就是你使用律师的地方*。

*大多数*人会为了你的钱而欺骗你吗？不太可能。愿意为您的产品付费的人不太可能以一半的许可费欺骗您，至少是故意的。这是大风险的小收益。你可以很容易地发现有人在欺骗你。
他们是有身份的人，他们会失去一些东西。他们不想卷入一场花费数十万的诉讼（这意味着失去他们的资产），也不想涉及负面宣传。
这可能只是*无意中*发生的，但由于您没有提供必要的导入库，所以这是不可能的。

您可以以非常简化的方式将您的用户视为以下三个类别之一：

*   我们是一家拥有5名开发人员的小型软件公司，我们已经经营了3年，我们公司拥有50,​​000的股权。我们已经为`foo`许可证支付了 500 美元，`bar`许可证将花费我们另外 500 美元。您知道我们正在使用您的库，因为我们购买了`foo`. *我们知道你知道*。一场诉讼将花费我们大约 50,000 - 哦该死，让我们多付 500。
*   我们是微软。如果有人发现我非法使用这个库，我会被解雇。现在，如果我在他午饭后的睡眠中打扰他，超出另外 500 的预算，我的主管会怎么说？该死，我们可能需要另外两次无聊的会议来决定。让我们看看，我想我们可以在这个帐户上预订...
*   我是一个酷酷的cracka d00d。我很酷，但我仍然会使用你的图书馆来做一个我在学校的 5 个朋友会使用的程序。执照？许可证是给失败者的。反正你不会知道我的名字的。

前两个有损失，第三个没有。前两个会付钱给你，不会（故意）欺骗你。最后一个你不能关心的少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:10:53.813

第三方许可库**正是**为此目的而存在的。我可以命名 Flex（无从属关系），我知道它具有您正在寻找的确切功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:07:40.713

您可以发明一种公钥/私钥“解锁”机制。但这可能是很多工作却收效甚微。我提出的任何建议都不是不可能有人破解的。

为什么不根据您提供的不同许可方案将代码二进制文件拆分？即：上面的客户 A 得到 foo.lib、bar.lib 和 hoo.lib。客户 B 只获得 bar.lib 和 hoo.lib。两者都得到一个具有所有常见依赖项的“sharedcode.lib”。

# tridion - Anguilla - 获取版本和用户信息

> ID：11221071
> 
> 赞同：2
> 
> 时间：2012-06-27T07:09:32.610
> 
> 标签：tridion, tridion-2011

我在功能区工具栏上创建了一个命令按钮。当我选择一个组件并单击“显示信息”按钮时，应该会打开一个弹出窗口，告诉我组件的最新版本、修改日期和最后修改它的用户。

我确实使用以下代码获得了组件：

`var item = $models.getItem(selection.getItem(0));`

我怎样才能从这里获得其他信息。

第2部分：

当我尝试在 Firebug 中查看 JS 代码时，我会在一行中看到它们。我无法在代码中的执行函数上设置断点。

关于以上几点的任何建议。?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:16:04.097

要消除 JS、允许您添加断点以及允许您使用 JS 控制台检查可用的对象，您可以按照[http://code.google.com/p/tridion-2011上的说明进行操作-power-tools/wiki/DeactivateJSMinifier](http://code.google.com/p/tridion-2011-power-tools/wiki/DeactivateJSMinifier)。

[可以使用如何获取 Tridion 中当前登录用户的用户 ID 中的](https://stackoverflow.com/questions/10891689/how-to-get-the-user-id-of-the-currently-logged-user-in-tridion)信息检索用户信息？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:48:41.720

我发现使用 Anguilla 找到任何东西的唯一方法是使用像 Chrome 一样的 JS 控制台。

一旦你得到了当前的物品——就像你现在做的那样——你可以做这样的事情：

```
var version = item.getVersion();
var lastModifiedDate = item.getLastModifiedDate();
var lastEditorId = item.getStaticRevisorId(); 
```

getStaticRevisorId() 为您提供最后一个用户的 Tridion URI 以更改项目，然后您可以加载它以从中检索更多信息。

# hibernate - JPA 事务的工作原理

> ID：11221072
> 
> 赞同：13
> 
> 时间：2012-06-27T07:09:49.497
> 
> 标签：hibernate, jpa, transactions, jpa-2.0

每当我想保留任何实体时，都会执行以下代码。事情似乎工作正常，但我不明白它是如何工作的！

```
EntityManager em = getEntityManager();
EntityTransaction userTransaction = em.getTransaction();
userTransaction.begin();
em.persist( ent );
userTransaction.commit(); 
```

上面的 EntityManager 是整个应用程序共享的单个实例。开始交易后；我只是说em.persist(entity).. hibernate怎么知道它属于哪个事务！

假设我的应用程序上有 10 个并发用户，并且所有 10 个线程都在执行上述代码。因此，创建并提交了 10 个独立事务。但是所有 10 个不同的实体我都没有将它们与各自的交易相关联；那么JPA是如何解决的！

基于答案；我们有以下；我们是说每个线程都应该有一个 EntityManager 实例吗？这不会是服务器上的杀戮！我们应该汇集这些实例吗？它不等于再次实施某种连接池吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T08:16:05.133

它为事务使用[ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)变量。

另请参阅[UserTransaction](http://docs.oracle.com/javaee/6/api/javax/transaction/UserTransaction.html)的文档：

> begin()
> 创建一个新事务并将其与当前线程相关联。

不过，您不应该共享 EntityManager，因为它不能保证是线程安全的。

但是，如果您将其注入 EJB，则不必担心线程安全： http: [//www.adam-bien.com/roller/abien/entry/is_in_an_ejb_injected](http://www.adam-bien.com/roller/abien/entry/is_in_an_ejb_injected)

如果您使用 Spring 注入它，您将获得一个线程安全代理：[http ://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/html/orm.html #orm-jpa-直](http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/html/orm.html#orm-jpa-straight)

> 尽管 EntityManagerFactory 实例是线程安全的，但 EntityManager 实例不是。注入的 JPA EntityManager 的行为类似于从应用程序服务器的 JNDI 环境中获取的 EntityManager，如 JPA 规范所定义。它将所有调用委托给当前事务 EntityManager，如果有的话；否则，它会回退到每个操作新创建的 EntityManager，实际上使其使用线程安全。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T08:13:37.557

它之所以有效，是因为你足够幸运。足够幸运意味着以正确的顺序调用 commit 和 begin —— 意外。

您确实使用来自多个线程的实体管理器的单个实例。这是错误的做法，因为不能保证它是线程安全的。通过 EntityTransaction 访问资源级事务绑定到实体管理器实例，而不是线程。

所以结果是您共享相同的 EntityTransaction 并幸运地连续使用它进行多个事务。连续使用它来启动和结束多个事务是可以的，但从多个线程中使用它不是。

在休眠（4.1.4）中，引用存储到 AbstractEntityManageImpl 类中的 tx 实例字段，但这只是实现细节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T07:16:19.070

事务以某种方式与当前线程相关联，使用 ThreadLocal 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:48:24.527

我建议您了解[JTA](http://www.oracle.com/technetwork/java/javaee/jta/index.html)是如何工作的，而不管 Hibernate 是什么——理解这一点非常重要。
此外，请阅读有关容器管理事务和 bean 管理事务的信息。
如果你在一个容器管理的事务中工作，你可以为你注入 EntityManager 的 bean 指定事务范围 -
例如 - 如果范围是必需的，这意味着如果另一个 bean 调用这个 bean，而不是在事务的上下文中，将打开一个新事务。如果交易已经存在，那么您将使用相同的交易。理解这一点很重要，因为事务在您的系统中是一种昂贵的资源。

事务对象与 ThreadLocal 相关联，但是，另一个线程可能会恢复暂停的事务，这取决于您的 TransactionManager 的实现（我说的是[JBossTransactionManager](http://docs.jboss.org/jbossas/jboss4guide/r4/html/ch4.chapt.html)）

# asp.net - 绑定方法 - 提供格式字符串作为常量

> ID：11221073
> 
> 赞同：1
> 
> 时间：2012-06-27T07:09:57.123
> 
> 标签：asp.net

当将值绑定到控件时，我有很多这样的：

```
Text='<%# Bind("StartDate", "{0:dd.MM.yyyy}") %>' 
```

但是，我想将这种格式（以及其他几种格式）提取给助手。这就是我所做的：

```
public static class DateTimeExtension
{
    public const string CalendarDateFormat = "{0:dd.MM.yyyy}";
    public const string CalendarMonthFormat = "{0:MM.yyyy}";

    public static string ToCalendarDate(this DateTime dateToFormat)
    {
        return string.Format(CalendarDateFormat, dateToFormat);
    }

    public static string ToCalendarMonthDate(this DateTime dateToFormat)
    {
        return string.Format(CalendarMonthFormat, dateToFormat);
    }
} 
```

然而现在，当我将 Bind 调用更改为以下内容时：

```
Text='<%# Bind("StartDate", DateTimeExtension.CalendarDateFormat) %>' 
```

我得到一个例外：

```
System.Web.HttpException: A call to Bind was not well formatted.  Please refer to documentation for the correct parameters to Bind. 
```

我在 web.config 中配置了命名空间，所以这应该不是问题。有没有办法实现我喜欢的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:31:39.793

尝试使用 Eval 作为 Bind 表达式是 ASP.NET 代码生成的一个非常特殊的部分，它有一个限制，即格式参数必须是文字。

```
Text='<%# Eval("StartDate", DateTimeExtension.CalendarDateFormat) %>' 
```

[在此处](http://weblogs.asp.net/leftslipper/archive/2007/06/29/how-asp-net-databinding-deals-with-eval-and-bind-statements.aspx)阅读有关 Bind 和 Eval的更多信息。

# node.js - 玉没有在不同的文件夹中找到视图

> ID：11221074
> 
> 赞同：1
> 
> 时间：2012-06-27T07:09:59.467
> 
> 标签：node.js, express, pug

我有一个这样的目录

```
/Workspace
  /app
    app.js
  /lib
    /public
      /styles
        *.css
      /scripts
        *.js
    /views
      *.jade 
```

从`app.js`in `app`，我有以下代码：

```
libPath = __dirname + '/../lib'

... express stuff ...

app.configure(function() {
  app.set('view', libPath + '/views')
  ... express stuff ...
  app.use(express.static(libPath + '/public'))

... rest of the app ... 
```

现在，问题是 Jade 找不到任何视图，但找到了所有静态资产。因此，`app.set('view')`不工作，但是`express.static`。`views`如果我将目录复制到`app`，则使用`__dirname + '/views'`效果很好。有谁知道为什么会这样？

这样做`app.get('view')`，我得到一个这样的目录：`/Users/jong/Workspace/app/../lib/views`. 我也尝试过绝对路线`/Users/jong/Workspace/lib/views`，但无济于事。这个目录适用于静态资产但不适用于模板，这很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:18:59.413

您输入错误，正确的选项名称是`views`，而不是`view`。

像这样配置您的应用程序

```
 app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.set('view options', { layout: true }); 
```

但问题的主要根源是您似乎误解了`express`（以及 MVC 的工作原理）。

`express``express.static`一旦请求 url 与现有的静态文件路径匹配，使用您的配置指令将静态数据发送到浏览器。

否则，它会尝试为请求的路径找到任何已定义的路由并执行关联的控制器（它可能会或可能不会依次使用模板引擎）。

因此，为了显示例如索引页面（即使它没有参数），假设您的文件夹中有一个`index.js`，`views`您必须执行类似的操作

```
app.get('/', function (req, res, next) {
    res.render('index', {});
}); 
```

# html - 如何在 IE 中使用溢出自动

> ID：11221075
> 
> 赞同：0
> 
> 时间：2012-06-27T07:10:01.973
> 
> 标签：html, css, internet-explorer

我在网站上还有其他几个页面，使用溢出自动调整高度没有问题。

我注意到的一件事是页面可以在一个 div 上正常工作。不工作的页面有两个或更多的 div，我也用容器尝试过，但我仍然得到垂直和水平滚动条。

```
<div class="content">
    <div class="container">
        <div class="a">
            <div class="left">List Items</div>
            <div class="right">List Items</div>
        </div>
        <div class="b">
            This div is a FORM.
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:13:12.707

当 css 在其他浏览器中有效但在 IE9 中无效时，可能是您的标题不正确。检查这个：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:12:44.180

制作了一个仅限 IE 的样式表并将 .content 更改为溢出：隐藏。还取消了几个类的宽度，以使内容正确地适合其他浏览器。

# python - python模块导入中的继承与类实例

> ID：11221078
> 
> 赞同：4
> 
> 时间：2012-06-27T07:10:07.610
> 
> 标签：python, oop, inheritance, module

抱歉，如果这没有意义，我不是一个有经验的程序员。

考虑以下代码：

```
import mymodule

class MyClass:
    def __init__(self):
        self.classInstance = myModule.classInstance() 
```

进而 ......

```
from mymodule import classInstance

class MyClass(classInstance):
    def __init__(self):
        pass 
```

如果我只想在 MyClass 中使用一个 classInstance，是否可以从模块中导入特定的类并让 MyClass 继承这个类？

在这两种方法之间做出决定时，是否有任何最佳实践或我应该考虑的事情？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T09:49:21.020

请允许我提出一个不同的例子。

想象一下有类 Vector。现在你想要一个班级点。点可以用向量定义，但它可能具有向量没有的其他额外功能。在这种情况下，您从 Vector 派生 Point。

现在你需要一个 Line 类。Line 不是上述任何类的特化，因此您可能不想从它们中的任何一个派生它。但是 Line 使用点。在这种情况下，您可能希望以这种方式开始 Line 类：

```
class Line(object):
    def __init__(self):
        self.point1 = Point()
        self.point2 = Point() 
```

点将是这样的：

```
class Point(Vector):
    def __init__(self):
        Vector.__init__(self) 
```

所以答案真的是：取决于你需要做什么，但是当你清楚地知道你在编码什么时，在子类之间进行选择就变得很明显了。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:12:21.413

你听起来像是在尝试在这两种方法之间“做出选择”，但它们做的事情完全不同。第二个定义了一个类，该类继承自一个（令人困惑的）名为`classInstance`. 第一个定义了一个名为的类`MyClass`（不继承自基`obect`类型以外的任何东西），它有一个名为 的实例变量`self.classInstance`，它恰好被设置为`classInstance`该类的一个实例。

你为什么要命名你的班级`classInstance`？

# c# - ASP.NET 页面中 JQuery 的动态数据

> ID：11221080
> 
> 赞同：1
> 
> 时间：2012-06-27T07:10:13.010
> 
> 标签：c#, jquery, asp.net, ajax

**问题**

我有一些页面需要来自网站的动态数据来为用户生成输出。

一个简单的解决方案是一个 aspx(php, ...) 页面来生成数据并创建另一个 html 页面作为 GUI 从第一页检索数据并将其显示给用户。在这种方法中，我可以调用我的 GUI 页面，例如 form1.aspx 和我的数据页面 form1.json.aspx。虽然我个人很喜欢这种方法，但是在为它创建组件的时候并不适合。

目前我正在使用的另一种方法是使用相同的 GUI 页面调用自身并使用查询字符串来检索数据。此页面应检查该查询字符串，如果存在，则仅生成数据并从页面中删除其他所有内容。作为此方法的示例，如果我调用我的页面 form1.aspx，要检索数据，我需要像 form1.aspx?JSON 一样调用它

这是我正在做的一个例子：

```
protected void Page_Load(object sender, EventArgs e) {
    if (Request.QueryString.ToString().IndexOf("JSON") == 0){
        this.Controls.Clear();
        Response.Clear();
        // send pure data to client
    } else {
      // render page as GUI
    }
} 
```

但是，如果我添加母版页和/或从某个模板页面继承我的页面，则此方法变得过于混乱。母版页只能删除`Page_PreInit`，这增加了另一种额外的方法。

安全控制会导致另一个问题，如果用户长时间保持页面打开直到会话到期，任何检索数据的尝试都会失败，导致安全模块将请求重定向到登录页面。

下一个问题是我无法将我的组件合并到包中，因为它需要在页面中进行修改（删除母版页，清除页面组件......）。

**我在找什么：**

1-我正在寻找一种解决方案，我可以调用我的页面并获取纯数据（JSON 或 XML 格式）并运行生成数据的服务器端方法，因此我不必担心其他设计师放什么在他们的母版页或模板中。

2-我认为可以使用`axd`扩展来执行此操作，但我对此一无所知，也找不到帮助文档。

3-有没有更好的方法来做到这一点。任何改善这一点的建议或解决方案都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:31:15.083

*   页面方法。查看这篇文章：[http](http://weblogs.asp.net/craigshoemaker/archive/2008/09/29/using-jquery-to-call-asp-net-ajax-page-methods.aspx) ://weblogs.asp.net/craigshoemaker/archive/2008/09/29/using-jquery-to-call-asp-net-ajax-page-methods.aspx或[http://encosia。 com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

*   WCF JSON 服务： http: [//www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON](http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON)

其他方法是使用 HTTP 处理程序。实现 IHttpHandler 接口并在 Web.config 文件中注册您的实现。稍后使用 jQuery ($.get / $.post) 调用它：

*   [http://msdn.microsoft.com/en-us/library/46c5ddfy.aspx](http://msdn.microsoft.com/en-us/library/46c5ddfy.aspx)

**编辑** 正如 OP 指出的那样，为了在页面方法中访问*会话状态*，您应该使用`WebMethodAttribute`这种方式：

```
[WebMethod(EnableSession = true)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:36:49.070

我认为您可以使用 webservice 而不是 aspx 页面来返回 JSON 或 XML 字符串，然后调用方页面（任何 aspx 页面）将在进程成功后响应。

因此，使用此 Web 服务，任何第三方页面都可以访问您的服务器端方法。

要创建 Web 服务，请检查此链接：[创建和使用 Asp.net Web 服务基本](http://gugiaji.wordpress.com/2012/04/05/quickly-mastering-create-and-use-asp-net-web-service-from-basic-database-access-to-ajax-enabled/)

问候

# java - jaxws 导入。绑定文件被忽略

> ID：11221081
> 
> 赞同：2
> 
> 时间：2012-06-27T07:10:13.157
> 
> 标签：java, maven, wsdl, jaxb

我正在尝试使用 jaxws 生成我的 java 类。问题是我的绑定文件被忽略了。我在 bindingDirectory 中有两个绑定文件。也许有人可以帮忙？

```
 <profiles>

    <profile>
        <id>Generate model (POJOS) from wsdl</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>

        <build>
            <!-- JAX-WS provides a tool called wsimport which takes the WSDL of a 
                web service and generates proxy classes or the WSDL's service and port definitions. 
                These can then be used to access the web service endpoint. -->
            <plugins>

                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                        <artifactId>jaxws-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>Id1</id>
                                <goals>
                                    <goal>wsimport</goal>
                                </goals>
                                <configuration>
                                <wsdlUrls>
                                    <wsdlUrl>http://intan.local:8080/toa/ws/airService?wsdl</wsdlUrl>
                                </wsdlUrls>
                                <target>2.1</target>
                            <xjcArgs>
                                <xjcArg>-XautoNameResolution</xjcArg>
                            </xjcArgs>
                            <verbose>true</verbose>
                            <extension>true</extension>
                            <bindingFiles>
                                <bindingFile>src/main/resources/schemas/2011b/xjb/global.xjb</bindingFile>
                                <bindingFile>src/main/resources/schemas/2011b/xjb/TPA_ExtensionsType.xjb</bindingFile>
                            </bindingFiles>
                            <keep>true</keep>
                                    <packageName>gr.intan.toa._2011b</packageName>
                                    <sourceDestDir>src/main/generated</sourceDestDir>
                                <extension>true</extension>
                                </configuration>
                            </execution>
                        </executions>
                        <dependencies>
                    <dependency>
                            <groupId>javax.xml</groupId>
                                <artifactId>webservices-api</artifactId>
                                <version>1.4</version>
                            </dependency>
                            <dependency>
                                <groupId>com.sun.xml.bind</groupId>
                                <artifactId>jaxb-xjc</artifactId>
                                <version>2.1.12</version>
                            </dependency>
                            <dependency>
                                <groupId>com.sun.xml.ws</groupId>
                                <artifactId>jaxws-rt</artifactId>
                                <version>2.1.4</version>
                            </dependency>
                    </dependencies>
                        <configuration>
                            <target>2.1</target>
                            <xjcArgs>
                                <xjcArg>-XautoNameResolution</xjcArg>
                            </xjcArgs>
                            <bindingDirectory>src/main/resources/schemas/2011b/xjb</bindingDirectory>
                            <keep>true</keep>
                        </configuration>
                </plugin>
            </plugins>
        </build>
    </profile> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:26:36.197

我认为 bindingDirectory 仅在显式配置 xjc 插件时才有效。您应该尝试 bindingFile 语义：

```
<configuration>
 <wsdlOptions>
  <wsdlOption>
   <wsdl>${basedir}/src/main/wsdl/myService.wsdl</wsdl>
   <bindingFiles>
    <bindingFile>${basedir}/src/main/resources/wsdl/async_binding.xml</bindingFile>
   </bindingFiles>
  </wsdlOption>
 </wsdlOptions>
</configuration> 
```

> [http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)

# java - 如何知道消息是否已读

> ID：11221085
> 
> 赞同：4
> 
> 时间：2012-06-27T07:10:18.917
> 
> 标签：java, jakarta-mail

我正在理解 javax.mail 以阅读电子邮件帐户并获取所有收到的消息。这是一个例子：

```
Properties properties = System.getProperties();  
         properties.setProperty("mail.store.protocol", "imaps");  
             try {  
                 Session session = Session.getDefaultInstance(properties, null);
                 //create session instance
                 Store store = session.getStore("imaps");//create store instance  
                 store.connect("pop.gmail.com", "mail@gmail.com", "***");  
                 //set your user_name and password 
                 System.out.println(store);   
                 Folder inbox = store.getFolder("inbox");
                 //set folder from where u wants to read mails  
                 inbox.open(Folder.READ_ONLY);//set access type of Inbox  
                 Message messages[] = inbox.getMessages();// gets inbox messages

                 for(Message message:messages) {
                 System.out.println(message.getContent().toString());  
             }
                 store.close();
              } catch (Exception e) {  
             System.out.println(e);    
         } 
```

我的问题是：

从`Message messages[]`是否可以知道消息是否是新消息？就像是：

```
for(Message message: messages){
   if(message.isNew()) OR if(!message.isRead()){
      System.out.println("Message is not still read");
   }
} 
```

有人能帮我吗？谢谢！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:25:57.160

把它放在你的代码中

```
Folder inbox = store.getFolder("inbox");
inbox.open(Folder.READ_ONLY);
// search for all "unseen" messages
Flags seen = new Flags(Flags.Flag.SEEN);
FlagTerm unseenFlagTerm = new FlagTerm(seen, false);
Message messages[] = inbox.search(unseenFlagTerm);

if (messages.length == 0) System.out.println("No messages found."); 
```

一个很好的教程可以在[这里找到](http://www.devdaily.com/java/javamail-search-unseen-unread-messages-mailbox-pop3)

# sql-server-2008 - 使用相关和非相关子查询的场景是什么

> ID：11221093
> 
> 赞同：-1
> 
> 时间：2012-06-27T07:10:54.250
> 
> 标签：sql-server-2008, correlated-subquery

今天我了解了SQL Server的一个特性，称为关联查询和非关联查询。然后我想到了某个问题：

SQL Server 中的关联查询和子查询有什么区别？SQL Server 中是否存在关联子查询和非关联子查询？

如果是的话，这和我们应该在哪里使用其中之一？如果可以的话，用简单的插图来解释这个概念。

我想知道。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T07:18:09.430

**相关子查询**是主外部查询引用的内部子查询，因此内部查询被认为是重复执行的。

**例子：**

```
USE DatabaseName;
GO
SELECT e.EmpID
FROM HumanResources.Emp e
WHERE e.ContactID IN
(
SELECT c.ContactID
FROM Person.Contact c
WHERE MONTH(c.ModifiedDate) = MONTH(e.ModifiedDate)
)
GO 
```

**非相关子**查询是独立于外部查询的子查询，它可以在不依赖主外部查询的情况下自行执行。

**例子：**

```
USE DatabaseName;
GO
SELECT e.EmpID
FROM HumanResources.Emp e
WHERE e.ContactID IN
(
SELECT c.ContactID
FROM Person.Contact c
WHERE c.Title = 'Mr.'
)
GO 
```

更多在[链接。](http://weblogs.foxite.com/andykramek/2009/03/14/getting-to-grips-with-sql-sub-queries/)

# .net - ExecuteScalar 可以返回 null 吗？

> ID：11221094
> 
> 赞同：-3
> 
> 时间：2012-06-27T07:10:55.090
> 
> 标签：.net, executescalar

我有一个查询：“从 ItemID = 12313 的项目中选择 IsNull(ItemBarcode,0)”如果在我的数据库中，我的表上不存在 12312 ID，那么“.NET ExecuteScalar”将返回给我什么（如果我分配它到对象变量？

```
 private Object Result = Command.ExecuteScalar(sql); 
```

结果值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:15:39.383

从内存中（未选中），如果它返回的行在第一个单元格中具有数据库空值，那么它将返回`DBNull.Value`; 如果它不返回任何行，它将返回`null`. 如果没有行，`IsNull`则不适用，因为这适用于返回的每个零行，也就是说：根本不适用。

但正如乔恩所说：运行它。如果它返回 a `null`，那么这相当确定地回答了“ExecuteScalar 可以返回 null 吗？”这个问题。

# objective-c - 根据时间更改 UILabel 背景颜色

> ID：11221102
> 
> 赞同：0
> 
> 时间：2012-06-27T07:11:10.227
> 
> 标签：objective-c, xcode, colors, background, uilabel

我正在用 Xcode 和 Objective C 开发一个 iPhone 应用程序。

我想要实现的是根据一天中的时间更改不同标签的背景颜色。

我在 XIB 文件中设置了几个 UILabel 并设置了它们的背景颜色。在我的 .m 文件中，我设置了一个每 3 秒运行一次的操作。代码片段：

```
- (void)updateTime
{
    NSDate *currentTime = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HHmm"];
    NSString *resultTime = [dateFormatter stringFromDate: currentTime];

    if([resultTime compare:@"0819"] == NSOrderedDescending)
    { //IF THE TIME IS AFTER 0820AM
        if([resultTime compare:@"0850"] == NSOrderedAscending)
        { // IF THE TIME IS BEFORE 0850AM
            labelOne.backgroundColor = [[UIColor alloc] initWithRed:160 green:160
                                                           blue:160 alpha:1.0];     
        }
    }
    if([resultTime compare:@"0849"] == NSOrderedDescending)
    { 
        if([resultTime compare:@"0945"] == NSOrderedAscending)
        { 
            labelTwo.backgroundColor = [[UIColor alloc] initWithRed:160 green:160
                                                            blue:160 alpha:1.0];  
        }
    } 
```

这似乎适用于更改背景颜色，但是，当 if 语句旨在返回 false（它不在那个时间括号内）时，背景颜色不会变回 XIB 文件中的颜色。

有人可以阐明我如何在特定时间段内让不同的 UILabel 改变颜色。

# perl - 如何传递存储在变量中的 xpath？

> ID：11221104
> 
> 赞同：2
> 
> 时间：2012-06-27T07:11:18.953
> 
> 标签：perl, selenium, selenium-rc, xpath

```
my $V1 = $sel->get_text("//body[\@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div/table/tbody/tr/td/div/div");
print($V1 . "\n"); 
```

当我执行上述命令时，我可以毫无错误地打印 v1。

我的目标是打印这些值（比如 20 左右）。但是每个变量的 xpath 仅因`div`元素而异（即，在每次迭代中，`div`元素前面`table`应该被替换`div[2],`并且`div[2]`应该被替换。`div[3]`

以下代码段执行替换 div[] 元素。但是说是无效的xpath。

```
my $xpath = q(//body[\@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div/table/tbody/tr/td/div/div);  
for my $i (0,2) 
{     
my @nodes = split qr'/', $xpath;     
$nodes[16] .= "[$i]" unless 0 == $i;     
#say join '/', @nodes; }
my @somenames = join('/',@nodes);
#print "\n";
#print @somenames ;
foreach my $val (@somenames) {
    chomp($val);
    #my @new_arr = $sel->get_text($val);
    print "\n";
    print $val; ***this prints the xpath value which i needed***
    my $V1 = $sel->get_text("$val"); ***#i'm passing the same xpath here within double quotes but says as invalid xpath***
     print($V1 . "\n");
    my @new_arr = $sel->get_text("$val");
  } 
} 
```

我是否按照错误的方式传递 xpath ？我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:49:12.470

将您对 XPath 字符串的定义[与我在上一个答案中的](https://stackoverflow.com/a/11206978)定义进行比较。您在不属于的广告前面插入了一个反斜杠。

# objective-c - 我的 isa-swizzling 打破了 KVO

> ID：11221110
> 
> 赞同：5
> 
> 时间：2012-06-27T07:11:38.977
> 
> 标签：objective-c, key-value-observing, objective-c-runtime, swizzling, isa-swizzling

我正在尝试实现 isa swizzling，因为我需要在某些对象的 dealloc 方法中发生一些操作。我正在覆盖 - (Class)class; 返回原始类的方法（如 KVO 所做的那样）。一切正常，直到我尝试将观察者添加到 swizzled 对象。它只是崩溃。

1.  0x00000000 在 0x00000000 ()
2.  _NSKeyValueRetainedObservationInfoForObject()中的0x0091d22a
3.  0x0092ec88 在 -[NSObject(NSKeyValueObserverRegistration) _addObserver:forProperty:options:context:] ()
4.  0x0092d6fd 在 -[NSObject(NSKeyValueObserverRegistration) addObserver:forKeyPath:options:context:] ()

这是混合的实现

```
- (void)swizzleClass
{
    NSString *proxyClassName = [NSString stringWithFormat:@"MDSwizzled_%@", NSStringFromClass(self->isa)];
    Class proxyClass = NSClassFromString(proxyClassName);

    if (!proxyClass)
        proxyClass = [self createProxyClassWithName:proxyClassName];

    object_setClass(self, proxyClass);
}

- (Class)createProxyClassWithName:(NSString *)proxyClassName
{
    const char *c_proxyClassName = [proxyClassName cStringUsingEncoding:NSUTF8StringEncoding];
    Class proxyClass = objc_allocateClassPair(self->isa, c_proxyClassName, 0);

    Class dummyClass = [MDDummy class];
    class_addMethodFromClass(proxyClass, dummyClass, @selector(dealloc));
    class_addMethodFromClass(proxyClass, dummyClass, @selector(class));

    objc_registerClassPair(proxyClass);
    return proxyClass;
} 
```

MDDummy 它只是一个以 convinietn 方式保存的类方法（这与添加原始函数没有区别）。

```
@implementation MDDummy
- (void)dealloc
{

    //Special thinngs

    [super dealloc];
}

- (Class)class
{
    return //original class;
}
@end 
```

编辑：

下面是 class_addMethodFromClass 函数的实现：

```
void class_addMethodFromClass(Class class, Class sourceClass, SEL selector)
{
    Method method = class_getInstanceMethod(sourceClass, selector);
    IMP methodImplementation = method_getImplementation(method);
    const char *types = method_getTypeEncoding(method);
    class_addMethod(class, selector, methodImplementation, types);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:58:38.983

你应该看看 Mike Ash 是如何处理这个问题的：[https ://github.com/mikeash/MAZeroingWeakRef](https://github.com/mikeash/MAZeroingWeakRef)

总结：以不同的方式处理 KVO 混合子类的混合——你必须修补 KVO 子类中的 KVO 方法......

# compiler-construction - HLL 转机器码

> ID：11221111
> 
> 赞同：1
> 
> 时间：2012-06-27T07:11:45.640
> 
> 标签：compiler-construction

如果汇编语言只是机器语言的一种可读方式，那么为什么要先将 HLL 转换为汇编，然后再转换为机器代码。HLL不应该直接转换为机器码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:51:43.170

在小的离散阶段中编译比将多个通道组合在一起更简单、更清晰。汇编器不仅是对机器代码的抽象，它还可以解析标签和文字。

您不希望在编译器后端与指令选择和寄存器调度一起执行此操作，因为它是完全独立的传递。当然，许多编译器后端会包含自己的汇编程序传递（即所有 JIT 编译器），而不是序列化为文本流并将其传递给单独的汇编程序，但它仍然是专用传递，根本没有意义将它与其他代码生成通道融合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:16:52.613

你说的是什么平台？

除了名称之外，.NET 或 Java 程序集与汇编语言没有任何共同之处。

虽然汇编语言可能被认为只是机器语言的一种可读方式，但 .NET 程序集（通过编译像 C# 这样的高级 .NET 语言创建）只是 CIL（通用中间语言）中的另一个程序，它也是高级语言。级别的机器独立语言，尽管它不是为人类阅读或修改而设计的。

# android - 如何访问项目外的方法

> ID：11221114
> 
> 赞同：0
> 
> 时间：2012-06-27T07:11:52.253
> 
> 标签：android

我想访问不同项目中的方法。
例如，我
`Test(name,age);`
在 TestActivity中调用了一个方法，
然后如何访问此方法及其在
`DemoActivity`
不同项目中的参数。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:25:08.563

您应该为 DemoActivity 项目配置构建路径。在“项目”选项卡中添加 TestProject。现在您可以访问测试项目的数据。

# vb.net - 使用 VB.NET 通过 URL 发送 SMS 消息

> ID：11221115
> 
> 赞同：0
> 
> 时间：2012-06-27T07:12:03.130
> 
> 标签：vb.net, url

我想向很多人发送 SMS 消息。我有 MySQL 表中每个人的人员类型和电话号码。使用存储过程，我调用数据库中的存储过程来获取特定类型的所有人的电话号码列表并将其存储在一个`DataTable`对象中。我有一个 URL，我需要使用它来为所有同一类型的人发送所有消息。以下代码中的变量`s`是来自下拉控件的人员类型：

```
Dim ta As New dataset1TableAdapters.pro_selectsmsTableAdapter
Dim dt As dataset1.pro_selectsmsDataTable = ta.GetData(s) 
```

如何遍历结果`DataTable`并使用 URL 将 SMS 消息发送给每个人？该变量`dt`具有与存储在中的类型匹配的人员的电话号码列表`s`。请帮我解决这个问题。我是 VB.NET 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:49:36.723

这是你要找的东西吗？

```
Private Sub sendSmsMessage(ByVal message As String, ByVal s As String)
    Dim ta As New dataset1TableAdapters.pro_selectsmsTableAdapter
    Dim dt As dataset1TableAdapters.pro_selectsmsDataTable = ta.GetData(s)
    For Each dr As DataSet1.pro_selectsmsRow In dt
        Dim client As System.Net.WebRequest = System.Net.HttpWebRequest.Create(getSmsUrl("", "")) 'dr.fld_phone, message))
        Dim response As System.Net.WebResponse = client.GetResponse()
        Dim reader As StreamReader = New StreamReader(response.GetResponseStream())
        Dim responseText As String = reader.ReadToEnd()
        ' look at response text from website to see if operation succeeded
    Next
End Sub

Private Function getSmsUrl(ByVal phone As String, ByVal message As String) As String
    ' build proprietary url and return it here
End Function 
```

# performance - 使用 Akka 从 Play 应用程序调用 Web 服务

> ID：11221119
> 
> 赞同：10
> 
> 时间：2012-06-27T07:12:23.523
> 
> 标签：performance, playframework, akka

我对使用 Play 框架和 Akka 进行编程相当陌生，尽管我已经阅读了一段时间。我现在正在默认/基本 Play 环境中启动概念验证应用程序。我的问题源于 Play (http://www.playframework.org/documentation/2.0.1/ScalaWS) 中的 web 服务客户端 api。

此应用程序基本上需要以尽可能可扩展和高性能的方式调解对远程 SOAP Web 服务的调用。浏览器在 JSON 中进行 ajax 调用，Play 应用程序需要将它们转换为 SOAP/XML，反之亦然。

如果我直接通过控制器使用 play web 服务客户端，这些调用可以是异步的，这比我们现在做的（阻塞）要好得多。但是，我不清楚这在重负载下究竟会如何表现。并发/线程管理会很大程度上留给底层的 Netty 服务器吗？我有办法调吗？

另一种方法是使用控制器中的 Akka Actor 系统，在那里我可以控制路由策略、池大小、容错等。如果我采用这种方法，使用 Play 的异步 WS 客户端是否仍然有意义？如果是这样，这种方法（组成期货？）会是推荐的模式吗？

另一个似乎使 Akka 方法更具吸引力的因素是该应用程序最终将承担其他一些职责，因此我们可以控制/调整允许给该 ActorSystem 的资源并降低整个应用程序被 SOAP 服务拖累的风险。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:05:44.980

您正在详细说明的两个选项将起作用：

*   使用 WS 的 play API 异步处理请求/响应
*   使用 Akka 做同样的事情并在你的 actor 中同步管理你的 WS 调用

首先，没有正确或错误的解决方案。

表演！WS API 解决方案最容易实现和测试。社区中的许多人都依赖它（我确实如此）。

另一方面，即使 Akka 解决方案的设置接缝较重（不是那么多），它也会在未来为您带来更多的灵活性。您可以简单地使用[异步播放！块](http://www.playframework.org/documentation/2.0/ScalaAsync)并使用 Promise 进行异步计算。[play promise 和 akka future 之间](http://www.playframework.org/documentation/2.0/ScalaAkka)也有隐式转换。最后，要监控您的演员，您可以查看[Typesafe 控制台](http://resources.typesafe.com/docs/console/)。

如果最重要的是性能，那么过早的优化通常会导致更多（和不必要的）复杂性。就我而言，我会从 API WS 开始，如果将来需要，我会转向 Akka 解决方案。

# python-3.x - osx狮子python 3 pygame

> ID：11221120
> 
> 赞同：2
> 
> 时间：2012-06-27T07:12:27.557
> 
> 标签：python-3.x, osx-lion, pygame

显然这是可能的，但我不确定该怎么做。在本教程之后，我最接近为 python3 安装 pygame 是[http://florian-berger.de/en/articles/installing-pygame-for-python-3-on-os-x](http://florian-berger.de/en/articles/installing-pygame-for-python-3-on-os-x) 在终端中安装 python3。然而，当我打电话时（从教程，接近尾声）`/usr/local/share/python3/pip install hg+http://bitbucket.org/pygame/pygame`我得到了错误。我想那是因为本教程是针对雪豹的？如果您碰巧有其他方法，请分享。

编辑：之前不想发这个，因为它有点长，如果事实上它太长了，我把中间剪掉了，但我认为线索要么在开头，要么在结尾……！这就是我运行时得到的结果，`/usr/local/share/python3/pip install hg+http://bitbucket.org/pygame/pygame`其他一切似乎都像我想象的那样运行。

```
$ /usr/local/share/python3/easy_install pip
Searching for pip
Best match: pip 1.1
Processing pip-1.1-py3.2.egg
pip 1.1 is already the active version in easy-install.pth
Installing pip script to /usr/local/share/python3
Installing pip-3.2 script to /usr/local/share/python3

Using /usr/local/lib/python3.2/site-packages/pip-1.1-py3.2.egg
Processing dependencies for pip
Finished processing dependencies for pip
Jenss-MacBook-Pro:documents jensdonlin$ /usr/local/share/python3/pip install hg+http://bitbucket.org/pygame/pygame
warning: bitbucket.org certificate with fingerprint 24:9c:45:8b:9c:aa:ba:55:4e:01:6d:58:ff:e4:28:7d:2a:14:ae:3b not verified (check hostfingerprints or web.cacerts config setting)
warning: bitbucket.org certificate with fingerprint 24:9c:45:8b:9c:aa:ba:55:4e:01:6d:58:ff:e4:28:7d:2a:14:ae:3b not verified (check hostfingerprints or web.cacerts config setting)
warning: bitbucket.org certificate with fingerprint 24:9c:45:8b:9c:aa:ba:55:4e:01:6d:58:ff:e4:28:7d:2a:14:ae:3b not verified (check hostfingerprints or web.cacerts config setting)
warning: bitbucket.org certificate with fingerprint 24:9c:45:8b:9c:aa:ba:55:4e:01:6d:58:ff:e4:28:7d:2a:14:ae:3b not verified (check hostfingerprints or web.cacerts config setting)
warning: bitbucket.org certificate with fingerprint 24:9c:45:8b:9c:aa:ba:55:4e:01:6d:58:ff:e4:28:7d:2a:14:ae:3b not verified (check hostfingerprints or web.cacerts config setting)
Downloading/unpacking hg+http://bitbucket.org/pygame/pygame
  Cloning hg http://bitbucket.org/pygame/pygame to /var/folders/v2/wmhjfmyj1fs9kwyf35mdvf600000gn/T/pip-j_nu8r-build
  Running setup.py egg_info for package from hg+http://bitbucket.org/pygame/pygame

    WARNING, No "Setup" File Exists, Running "config.py"
    Using Darwin configuration...

    /bin/sh: smpeg-config: command not found
    /bin/sh: smpeg-config: command not found
    /bin/sh: smpeg-config: command not found
    WARNING: "smpeg-config" failed!
    Hunting dependencies...
    SDL     : found 1.2.15
    Framework SDL found
    FONT    : found
    Framework SDL_ttf found
    IMAGE   : found
    Framework SDL_image found
    MIXER   : found
    Framework SDL_mixer found
    SMPEG   : not found
    Framework smpeg not found
    Framework CoreMIDI found
    Framework QuickTime found
    PNG     : found
    JPEG    : not found
    SCRAP   : not found
    PORTMIDI: found
    FREETYPE: found 2.4.7
    AVFORMAT: not found
    SWSCALE : not found

    If you get compiler errors during install, doublecheck
    the compiler flags in the "Setup" file.

    Continuing With "setup.py"
    Skipping module _numericsurfarray for Python 3.2.3 (default, May 18 2012, 21:24:12)
    [GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] build.
    Skipping module _numericsndarray for Python 3.2.3 (default, May 18 2012, 21:24:12)
    [GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] build.

    no previously-included directories found matching '*/CVS'
    no previously-included directories found matching '*/*/CVS'
Installing collected packages: pygame
  Running setup.py install for pygame
    Skipping module _numericsurfarray for Python 3.2.3 (default, May 18 2012, 21:24:12)
    [GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] build.
    Skipping module _numericsndarray for Python 3.2.3 (default, May 18 2012, 21:24:12)
    [GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] build.
    building 'pygame.font' extension
    /usr/bin/clang -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -w -pipe -march=native -Qunused-arguments -Ddarwin -D_THREAD_SAFE -I/usr/X11R6/include -I/usr/local/include/SDL -I/usr/local/include/SDL -I/usr/local/Cellar/python3/3.2.3/include/python3.2m -c src/font.c -o build/temp.macosx-10.4-x86_64-3.2/src/font.o
    /usr/bin/clang -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.2.2/lib build/temp.macosx-10.4-x86_64-3.2/src/font.o -L/usr/local/lib -L/usr/local/lib -lSDLmain -lSDL -lSDL_ttf -o build/lib.macosx-10.4-x86_64-3.2/pygame/font.so -Wl,-framework,Cocoa
    building 'pygame.mixer' extension 
```

...点点点...

```
building 'pygame.image' extension

/usr/bin/clang -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -w -pipe -march=native -Qunused-arguments -Ddarwin -D_THREAD_SAFE -I/usr/X11R6/include -I/usr/local/include/SDL -I/usr/local/Cellar/python3/3.2.3/include/python3.2m -c src/image.c -o build/temp.macosx-10.4-x86_64-3.2/src/image.o

/usr/bin/clang -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.2.2/lib build/temp.macosx-10.4-x86_64-3.2/src/image.o -L/usr/local/lib -lSDLmain -lSDL -o build/lib.macosx-10.4-x86_64-3.2/pygame/image.so -Wl,-framework,Cocoa

building 'pygame.overlay' extension

/usr/bin/clang -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -w -pipe -march=native -Qunused-arguments -Ddarwin -D_THREAD_SAFE -I/usr/X11R6/include -I/usr/local/include/SDL -I/usr/local/Cellar/python3/3.2.3/include/python3.2m -c src/overlay.c -o build/temp.macosx-10.4-x86_64-3.2/src/overlay.o

/usr/bin/clang -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.2.2/lib build/temp.macosx-10.4-x86_64-3.2/src/overlay.o -L/usr/local/lib -lSDLmain -lSDL -o build/lib.macosx-10.4-x86_64-3.2/pygame/overlay.so -Wl,-framework,Cocoa

building 'pygame.transform' extension

/usr/bin/clang -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -w -pipe -march=native -Qunused-arguments -Ddarwin -D_THREAD_SAFE -D_NO_MMX_FOR_X86_64 -I/usr/X11R6/include -I/usr/local/include/SDL -I/usr/local/Cellar/python3/3.2.3/include/python3.2m -c src/transform.c -o build/temp.macosx-10.4-x86_64-3.2/src/transform.o

/usr/bin/clang -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -w -pipe -march=native -Qunused-arguments -Ddarwin -D_THREAD_SAFE -D_NO_MMX_FOR_X86_64 -I/usr/X11R6/include -I/usr/local/include/SDL -I/usr/local/Cellar/python3/3.2.3/include/python3.2m -c src/rotozoom.c -o build/temp.macosx-10.4-x86_64-3.2/src/rotozoom.o

/usr/bin/clang -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -w -pipe -march=native -Qunused-arguments -Ddarwin -D_THREAD_SAFE -D_NO_MMX_FOR_X86_64 -I/usr/X11R6/include -I/usr/local/include/SDL -I/usr/local/Cellar/python3/3.2.3/include/python3.2m -c src/scale2x.c -o build/temp.macosx-10.4-x86_64-3.2/src/scale2x.o

/usr/bin/clang -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -w -pipe -march=native -Qunused-arguments -Ddarwin -D_THREAD_SAFE -D_NO_MMX_FOR_X86_64 -I/usr/X11R6/include -I/usr/local/include/SDL -I/usr/local/Cellar/python3/3.2.3/include/python3.2m -c src/scale_mmx.c -o build/temp.macosx-10.4-x86_64-3.2/src/scale_mmx.o

In file included from src/scale_mmx.c:33:

src/scale_mmx64.c:424:27: error: invalid instruction mnemonic 'movsxl'

        asm __volatile__( " /* MMX code for inner loop of X bilinear filter */ "

                          ^

<inline asm>:1:191: note: instantiated into assembly here

         /* MMX code for inner loop of X bilinear filter */  movl             -44(%rbp),      %ecx;            pxor          %mm0,      %mm0;           1:                                           movsxl         (%rdi),      %rax;            add              $4,         %rdi;            movq           (%r10),      %mm1;            add              $8,         %r10;            movq           (%rbx),      %mm2;            add              $8,         %rbx;            movd   (%r15,%rax,4),      %mm4;            movd  4(%r15,%rax,4),      %mm5;            punpcklbw     %mm0,      %mm4;            punpcklbw     %mm0,      %mm5;            pmullw        %mm1,      %mm4;            pmullw        %mm2,      %mm5;            paddw         %mm4,      %mm5;            psrlw            $8,      %mm5;            packuswb      %mm0,      %mm5;            movd          %mm5,       (%r9);            add              $4,         %r9;            decl          %ecx;                        jne              1b;                        emms;

                                                                                                                                                                                                     ^~~~~~

In file included from src/scale_mmx.c:33:

src/scale_mmx64.c:499:27: error: invalid instruction mnemonic 'movsxl'

        asm __volatile__( " /* MMX code for inner loop of X bilinear filter */ "

                          ^

<inline asm>:1:191: note: instantiated into assembly here

         /* MMX code for inner loop of X bilinear filter */  movl             -44(%rbp),      %ecx;            pxor          %mm0,      %mm0;           1:                                           movsxl         (%rdi),      %rax;            add              $4,         %rdi;            movq           (%r10),      %mm1;            add              $8,         %r10;            movq           (%rbx),      %mm2;            add              $8,         %rbx;            movd   (%r15,%rax,4),      %mm4;            movd  4(%r15,%rax,4),      %mm5;            punpcklbw     %mm0,      %mm4;            punpcklbw     %mm0,      %mm5;            pmullw        %mm1,      %mm4;            pmullw        %mm2,      %mm5;            paddw         %mm4,      %mm5;            psrlw            $8,      %mm5;            packuswb      %mm0,      %mm5;            movd          %mm5,       (%r9);            add              $4,         %r9;            decl          %ecx;                        jne              1b;                        emms;

                                                                                                                                                                                                     ^~~~~~

2 errors generated.

error: command '/usr/bin/clang' failed with exit status 1

----------------------------------------
Command /usr/local/Cellar/python3/3.2.3/bin/python3.2 -c "import setuptools;__file__='/var/folders/v2/wmhjfmyj1fs9kwyf35mdvf600000gn/T/pip-j_nu8r-build/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/v2/wmhjfmyj1fs9kwyf35mdvf600000gn/T/pip-wo729f-record/install-record.txt failed with error code 1 in /var/folders/v2/wmhjfmyj1fs9kwyf35mdvf600000gn/T/pip-j_nu8r-build
Storing complete log in /Users/jensdonlin/.pip/pip.log 
```

# javascript - 如何在 beforeunload 显示它自己之前显示一个模态对话框？

> ID：11221121
> 
> 赞同：4
> 
> 时间：2012-06-27T07:12:33.727
> 
> 标签：javascript, jquery, dom-events, onbeforeunload

我明白不可能`beforeunload`用自定义对话框替换对话框，如果我们需要为用户设置自定义消息，我们必须在 beforeunload 处理程序中返回一个字符串：

```
{Custom message here set by returning a string in our beforeunload handler}
Are you sure you want to leave this page?
[Leave this page] [Stay on this page] 
```

那么，在浏览器显示实际的 beforeunload 对话框之前显示一个自定义模式对话框（可能是 jQuery）怎么样？

我当前的代码使用 Fancybox：

```
window.onbeforeunload = function() {
    $.fancybox({ 'type':'iframe', 'href':'/PopupOnExit.php' });
    return "Special offer! Stay on this page for more details.";
}; 
```

但是，这首先显示浏览器的对话框，并且只有在单击“停留”或“离开”按钮后，浏览器才会显示我的模式对话框。

有没有办法让我的模式对话框在浏览器对话框之前显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:25:21.270

DOM 修改仅在脚本结束执行时生效。在这种情况下，出于明显的安全原因，本机对话框首先被触发。

请注意，由于此未指定功能（请参阅[MDN 文档](https://developer.mozilla.org/en/DOM/window.onbeforeunload)）引入了许多安全问题，它可能会被删除（我认为最快的最好的），拥有它（保存数据）的旧理由在阿贾克斯时代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:27:45.083

unload 和 onBeforeUnload 不是跨浏览器事件。当心。它在 Opera 中不起作用，有时在 Chrome 中不起作用。

# c# - Sharepoint Webpart 自定义工具部分

> ID：11221124
> 
> 赞同：1
> 
> 时间：2012-06-27T07:12:44.000
> 
> 标签：c#, asp.net, visual-studio-2010, sharepoint, web-parts

我在 webpart main.cs 中添加了一个属性

```
 public override ToolPart[] GetToolParts()

        {
            ToolPart[] toolparts = new ToolPart[4];
            WebPartToolPart wptp = new WebPartToolPart();
            CustomPropertyToolPart custom = new CustomPropertyToolPart();

            CalendarToolPart datumswahl = new CalendarToolPart("Coutdown Datum Wahl");

            toolparts[0] = datumswahl;
            toolparts[1] = custom;
            toolparts[2] = wptp;

            return toolparts;
        } 
```

然后我建立了这个类 toolpartClass.cs

```
using System;  
using System.Collections.Generic;  
using System.Linq;  
using System.Text;  
using System.ComponentModel;  
using System.Web;  
using System.Web.UI;  
using System.Web.UI.WebControls;  
using System.Web.UI.WebControls.WebParts;  
using Microsoft.SharePoint;  
using Microsoft.SharePoint.WebControls;  
using Microsoft.SharePoint.WebPartPages;  

namespace Custom_Toolpart.toolparttest  
{    
    class CalendarToolPart : ToolPart     
{  
        public Calendar datumWahl = null;  
        private void CalendarToolPart_Init(object sender, EventArgs e)  
        {  
            datumWahl = new Calendar();  
            datumWahl.ID = "datumWahl";  

            SyncChanges();  
        }  

        public CalendarToolPart(string strTitle)
        {
            this.Title = strTitle;
            this.Init += new EventHandler(CalendarToolPart_Init);
        }

        public override void ApplyChanges()
        {
            //base.ApplyChanges();
            EnsureChildControls();  
        }

        public override void SyncChanges()
        {
            EnsureChildControls();
        }

        protected override void CreateChildControls()
        {
            base.CreateChildControls();
            Controls.Add(datumWahl);
            this.ChildControlsCreated = true;   //?
        }
    } 
```

我的问题是，我无法从 toolpartClass.cs 中使用/调用日历

我想要做的是，将所选日期提供给“toolpartUserControl.ascx.cs”（后面的代码），我想在其中使用日期并在 toolpart.ascx 中显示结果

在toolpartUserControl.ascx.cs中使用“正常”添加的webpart属性是没有问题的，像这里

```
namespace Custom_Toolpart.toolparttest  

{  

    public partial class toolparttestUserControl : UserControl  

    {  

        public toolparttest WebPart { get; set; }  

        protected void Page_Load(object sender, EventArgs e)
        {
        }
        protected override void OnPreRender(EventArgs e)
        {

            base.OnPreRender(e);

            DateTime datumAuswahl1 = DateTime.Parse(Calendar1.SelectedDate.ToString("MM") + "/" + Calendar1.SelectedDate.ToString("dd") + "/" + Calendar1.SelectedDate.ToString("yyyy"));
            DateTime datumJetzt = DateTime.Now;

            TimeSpan mySpan = new TimeSpan(-24, 0, 0);
            datumJetzt = datumJetzt.Add(mySpan);

            TimeSpan laufzeit = datumAuswahl1 - datumJetzt;
            string ausgabeLaufzeit = string.Format("{0}", laufzeit.Days);

            int i = Convert.ToInt32(ausgabeLaufzeit);
            if (i >= 2)
            {
                lbl_6.Text = "Tage";
            }
            if (i == 1)
            {
                lbl_6.Text = "Tag";
            }
            if (i == 0)
            {
                lbl_6.Text = "Tage";
                lbl_hide.Visible = true;
                lbl_1.Visible = false;
                lbl_2.Visible = false;
                lbl_3.Visible = false;
                lbl_6.Visible = false;
            }

            lbl_2.Text = ausgabeLaufzeit;

            if (this.WebPart != null && this.WebPart.CountDown_Text != null)
            {
                lbl_1.Text = this.WebPart.CountDown_Text.ToString();
            }

            if (this.WebPart != null && this.WebPart.Event_Text != null)
            {
                lbl_3.Text = this.WebPart.Event_Text.ToString();
            }

            if (this.WebPart != null && this.WebPart.Header_Text != null)
            {
                lbl_4.Text = this.WebPart.Header_Text.ToString();
            }

            if (this.WebPart != null && this.WebPart.Main_Text != null)
            {
                lbl_5.Text = this.WebPart.Main_Text.ToString();
            }

            if (this.WebPart != null && this.WebPart.Link_Edit != null)
            {
                hyplnk_1.NavigateUrl = this.WebPart.Link_Edit.ToString();
            }

            if (this.WebPart != null && this.WebPart.Ablauf_Text != null)
            {
                lbl_hide.Text = this.WebPart.Ablauf_Text.ToString();
            }
        }
    }
} 
```

如何将所选日期发送到 toolpartUserControl.ascx.cs 类？

# twitter-bootstrap - 无法更改打开的插入符号的颜色？

> ID：11221125
> 
> 赞同：1
> 
> 时间：2012-06-27T07:12:55.247
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap，我想在打开时更改插入符号的颜色。

我的 HTML 代码：

```
 <li class="dropdown">
          <a href="#" class="dropdown-togle" data-toggle="dropdown">
          <b>Download</b>
          <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li>...</li>
          </li> 
```

我试过这段代码：

```
 .dropdown  .caret .open {
    border-top: 8px solid black;
} 
```

还有一个问题 - 我可以更改下拉列表的形式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:18:52.143

插入符号的正确选择器如下：

```
.dropdown.open a.dropdown-toggle .caret {  } 
```

您应该使用开发人员工具或 Firebug 等工具来检查您的文档，并查看当您更改其状态时哪些类会应用于哪些元素。当试图弄清楚如何定位某些元素时，它真的很有帮助。

不确定您所说的“*更改下拉列表的形式*”是什么意思，您能详细说明一下吗？

# python - 如何在 Python 中使用 lxml 提取 xml 中的值

> ID：11221130
> 
> 赞同：0
> 
> 时间：2012-06-27T07:13:28.060
> 
> 标签：python, lxml

```
<XMLReport><Report>
<Preflight errors="0" criticalfailures="0" noncriticalfailures="0" signoffs="0" fixes="0" warnings="10">
  <PreflightResult type="Check" level="warning">
    <PreflightResultEntry xml:lang="en-US">
      <Message>PDF/X-1a:20000 : PDF/X-1a:20000 output intent is missing </Message>
      <StringContext>
        <BaseString>PDF/X-1a:20000 : %PDFXVersion% output intent is missing</BaseString>
      </StringContext>
    </PreflightResultEntry>
  </PreflightResult>
</Preflight></Report> 
```

我想`<Message> </Message>`在 Python 中使用 lxml 获取元素中的所有值/文本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:38:57.417

从[lxml tuto](http://lxml.de/tutorial.html)很容易：

```
>>> from lxml import etree
>>> s = """<Report>
<Preflight errors="0" criticalfailures="0" noncriticalfailures="0" signoffs="0" fixes="0" warnings="10">
  <PreflightResult type="Check" level="warning">
    <PreflightResultEntry xml:lang="en-US">
      <Message>PDF/X-1a:20000 : PDF/X-1a:20000 output intent is missing </Message>
      <StringContext>
        <BaseString>PDF/X-1a:20000 : %PDFXVersion% output intent is missing</BaseString>
      </StringContext>
    </PreflightResultEntry>
  </PreflightResult>
</Preflight></Report>
"""
>>> root = etree.XML(s)
>>> for message in root.findall('Preflight/PreflightResult/PreflightResultEntry/Message'):
    print message.text

PDF/X-1a:20000 : PDF/X-1a:20000 output intent is missing 
>>> 
```

# hadoop - 将数据写入hbase

> ID：11221134
> 
> 赞同：1
> 
> 时间：2012-06-27T07:13:35.770
> 
> 标签：hadoop, hbase

我在hbase中写入数据时遇到问题。我有4个区域服务器。当我写入数据并使用随机密钥时，数据写入任何区域但它们在一个区域服务器中。一个服务器忙，三个服务器空闲。如何在所有区域服务器中写入规律性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:23:57.943

HBase 跨区域服务器对其表进行分区。看 ：

*   [HBase 如何跨 regionservers 分区表？](https://stackoverflow.com/questions/3410896/how-hbase-partitions-table-across-regionservers)
*   [http://www.larsgeorge.com/2009/10/hbase-architecture-101-storage.html](http://www.larsgeorge.com/2009/10/hbase-architecture-101-storage.html)

我不确定您的随机密钥应该有多随机或相距多远才能写入不同的分区。

请参阅有关`hbase.hregion.max.filesize`并`base.hregion.maxfilesize`建议在达到适当数据大小时将表拆分到新区域的讨论。

# java - 使用 jaxb (unmarshal) 将 xml 转换为 java 对象

> ID：11221136
> 
> 赞同：39
> 
> 时间：2012-06-27T07:13:41.257
> 
> 标签：java, jaxb

我有以下 XML，我需要将其转换为 java 对象。

```
<tests>
    <test-data> 
         <title>BookTitle</title> 
         <book>BookName</book> 
         <count>64018</count> 
         <test-data> 
            <title>Book title1</title> 
            <book>Book Name1</book> 
            <count>5</count> 
         </test-data> 
         <test-data> 
            <title>Book title2</title> 
            <book>Book Name3</book> 
            <count>5</count> 
         </test-data> 
         <test-data> 
            <title>Book title3</title> 
            <book>Book Name3</book> 
            <count>4</count> 
         </test-data> 
    </test-data>
</tests> 
```

当我使用 JAXB 进行转换时，我不确定我的 pojo 会是什么。

根据我的理解，我创建了以下 POJO：

```
public class Tests {

    TestData testData;

    public TestData getTestData() {
        return testData;
    }

    public void setTestData(TestData testData) {
        this.testData = testData;
    }
}

public class TestData {
    String title;
    String book;
    String count;

    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getBook() {
        return book;
    }
    public void setBook(String book) {
        this.book = book;
    }
    public String getCount() {
        return count;
    }
    public void setCount(String count) {
        this.count = count;
    }
} 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-06-27T09:55:36.477

**测试**

在`Tests`类上，我们将添加一个`@XmlRootElement`注释。这样做会让您的 JAXB 实现知道当一个文档以这个元素开始时，它应该实例化这个类。JAXB 是异常配置，这意味着您只需要在映射与默认值不同的地方添加注释。由于该`testData`属性与默认映射不同，我们将使用`@XmlElement`注释。您可能会发现以下教程很有帮助： [http ://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted)

```
package forum11221136;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Tests {

    TestData testData;

    @XmlElement(name="test-data")
    public TestData getTestData() {
        return testData;
    }

    public void setTestData(TestData testData) {
        this.testData = testData;
    }

} 
```

**测试数据**

在这个类中，我使用`@XmlType`注释来指定元素的排序顺序。我添加了一个`testData`似乎缺少的属性。出于与课堂`@XmlElement`相同的原因，我还使用了注释。`Tests`

```
package forum11221136;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlType(propOrder={"title", "book", "count", "testData"})
public class TestData {
    String title;
    String book;
    String count;
    List<TestData> testData;

    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getBook() {
        return book;
    }
    public void setBook(String book) {
        this.book = book;
    }
    public String getCount() {
        return count;
    }
    public void setCount(String count) {
        this.count = count;
    }
    @XmlElement(name="test-data")
    public List<TestData> getTestData() {
        return testData;
    }
    public void setTestData(List<TestData> testData) {
        this.testData = testData;
    }
} 
```

**演示**

下面是一个示例，说明如何使用 JAXB API 读取（解组）XML 并填充您的域模型，然后将结果写回（编组）回 XML。

```
package forum11221136;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Tests.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11221136/input.xml");
        Tests tests = (Tests) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(tests, System.out);
    }

} 
```

# iphone - iAd 在某些设备上显示测试广告

> ID：11221138
> 
> 赞同：0
> 
> 时间：2012-06-27T07:14:01.690
> 
> 标签：iphone, ipad, iad

1 周前，我发布了一款带有 iAd 横幅的 iOS 应用。在我妻子的 iPad 上，iAd 正常显示。但是在我的 iPad 和 iPhone 上，他们一直在显示测试广告。

我已经通过网站和谷歌搜索，删除了开发版本并从应用商店下载了分发的应用程序，甚至重置了我的 iPad 的设置仍然显示测试广告。

我认为这不是苹果的问题，因为我妻子的设备正在看到真实的广告，这一定是我的 iPad 的问题，但我无法弄清楚......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:06:55.720

好的，我自己找到了解决方案 -> 我所做的是在 iTunes 中使用“恢复”来擦除我的设备 - 这解决了问题。如果您遇到与我相同的问题并且找不到其他方法，这将解决问题:)

# iphone - 如何自定义 UIWebView？

> ID：11221144
> 
> 赞同：2
> 
> 时间：2012-06-27T07:14:52.480
> 
> 标签：iphone

实际上我有一个表格视图，当 Select`rowAtIndexPath`然后它加载我的 webView 并播放我的视频，如何从`UIWebView`我的 tableView 返回？

```
 -(void)playButtonPressed1:(UIButton*)sender
 {

 Video *currentVideo= [[xmlParservideo videoNames] objectAtIndex:btn1.tag];

  NSLog(@"content============== %@", [currentVideo content2]);

 CGRect webFrame = CGRectMake(0.0, 0.0, 320.0, 460.0);
 UIWebView *webView = [[UIWebView alloc] initWithFrame:webFrame];
 [webView setBackgroundColor:[UIColor greenColor]];
 NSString *urlString=currentVideo.content2;

 NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];
[[self view] addSubview:webView];  
//    [self.navigationController popViewControllerAnimated:YES];

NSLog(@"jointed2 jjjjjjjjj  %d",btn1.tag); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:17:03.110

将 Uiwebview 放在另一个视图控制器中，并在选择一行并且视频完成时将其推送回 tableview 控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:48:04.357

在 didSelectRowAtIndexPath 上

```
videoViewController *newView = [videoViewController alloc]initWithNibName:@"videoViewController" bundle:nil];
[self.navigationController pushViewController:newView animated:YES]; 
```

并在视图控制器的 init 方法中以编程方式创建 webView

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    self.title = @"Video Player";
UIWebView  *videoWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 290)];

[videoWebView setDelegate:self];

NSString *urlAddress = @"http://www.google.com"; 

NSURL *url = [NSURL URLWithString:urlAddress];

NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

[videoWebView loadRequest:requestObj];

[[self view] addSubview:videoWebView];  

}

return self;
} 
```

好的，现在只需在完成视频后弹出您的视图

```
 [self.navigationController popViewControllerAnimated: NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:44:29.127

一个可能有效的解决方法是使用这个：`[webView setHidden:YES];`

这会从视图中隐藏 webView，因此只要您希望 webview 消失，请使用该行代码。当您希望它返回视图时，请使用以下命令：`[webView setHidden:NO];`

# perl - Perl UTF8 编码错误。LWP::UserAgent->decoded_content 或 Encode::decode 都不起作用。其他想法？

> ID：11221145
> 
> 赞同：4
> 
> 时间：2012-06-27T07:15:06.797
> 
> 标签：perl, utf-8, character-encoding, decode, lwp-useragent

尝试使用 LWP::Useragent 和 Encode 进行字符编码从网页中拉回全局地址时，我在 perl 中遇到编码问题。我试过谷歌搜索解决方案，但似乎没有任何效果。我正在使用草莓 Perl 5.12.3。

以美国驻捷克大使馆地址页面为例（http://prague.usembassy.gov/contact.html）。我想要的只是拉回地址：

> 地址：Tržiště 15 118 01 Praha 1 - Malá Strana 捷克共和国

哪个 firefox 使用与网页标题字符集相同的字符编码 UTF-8 正确显示。但是，当我尝试使用 perl 将其拉回并将其写入文件时，尽管在 Useragent 或 Encode::decode 中使用了 decoded_content，但编码看起来还是一团糟。

我尝试在数据上使用正则表达式来检查错误不是在打印数据时（即在 perl 中内部正确），但错误似乎在于 perl 如何处理编码。

这是我的代码：

```
#!/usr/bin/perl

require Encode;
require LWP::UserAgent;
use utf8;

my $ua = LWP::UserAgent->new;
$ua->timeout(30);
$ua->env_proxy;

my $output_file;
$output_file = "C:/Documents and Settings/ian/Desktop/utf8test.txt";
open (OUTPUTFILE, ">$output_file") or die("Could not open output file $output_file: $!" );
binmode OUTPUTFILE, ":utf8";
binmode STDOUT, ":utf8";

# US embassy in Czech Republic webpage
$url = "http://prague.usembassy.gov/contact.html";

$ua_response = $ua->get($url);
if (!$ua_response->is_success) { die "Couldn't get data from $url";}

print 'CONTENT TYPE: '.$ua_response->content_charset."\n";
print OUTPUTFILE 'CONTENT TYPE: '.$ua_response->content_charset."\n";

my $content_not_decoded;
my $content_ua_decoded;
my $content_Endode_decoded;
my $content_double_decoded;

$ua_response->content =~ /<p><b>Address(.*?)<\/p>/;
$content_not_decoded = $1;
$ua_response->decoded_content =~ /<p><b>Address(.*?)<\/p>/;
$content_ua_decoded = $1;
Encode::decode_utf8($ua_response->content) =~ /<p><b>Address(.*?)<\/p>/;
$content_Endode_decoded = $1;
Encode::decode_utf8($ua_response->content) =~ /<p><b>Address(.*?)<\/p>/;
$content_double_decoded = $1;

# get the content without decoding
print 'UNDECODED CONTENT:'.$content_not_decoded."\n";
print OUTPUTFILE 'UNDECODED CONTENT:'.$content_not_decoded."\n";

# print the decoded content
print 'DECODED CONTENT:'.$content_ua_decoded."\n";
print OUTPUTFILE 'DECODED CONTENT:'.$content_ua_decoded."\n";

# use Encode to decode the content
print 'ENCODE::DECODED CONTENT:'.$content_Endode_decoded."\n";
print OUTPUTFILE 'ENCODE::DECODED CONTENT:'.$content_Endode_decoded."\n";

# try both!
print 'DOUBLE-DECODED CONTENT:'.$content_double_decoded."\n";
print OUTPUTFILE 'DOUBLE-DECODED CONTENT:'.$content_double_decoded."\n";

# check for #-digit character in the strings (to guard against the error coming in the print statement) 
if ($content_not_decoded =~ /\&/) {
    print "AMPERSAND FOUND IN UNDECODED CONTENT- LIKELY ENCODING ERROR\n";
    print OUTPUTFILE "AMPERSAND FOUND IN UNDECODED CONTENT- LIKELY ENCODING ERROR\n";
}
if ($content_ua_decoded =~ /\&/) {
    print "AMPERSAND FOUND IN DECODED CONTENT- LIKELY ENCODING ERROR\n"; 
    print OUTPUTFILE "AMPERSAND FOUND IN DECODED CONTENT- LIKELY ENCODING ERROR\n"; 
}
if ($content_Endode_decoded =~ /\&/) {
    print "AMPERSAND FOUND IN ENCODE::DECODED CONTENT- LIKELY ENCODING ERROR\n";
    print OUTPUTFILE "AMPERSAND FOUND IN ENCODE::DECODED CONTENT- LIKELY ENCODING ERROR\n";
}
if ($content_double_decoded =~ /\&/) {
    print "AMPERSAND FOUND IN DOUBLE-DECODED CONTENT- LIKELY ENCODING ERROR\n";
    print OUTPUTFILE "AMPERSAND FOUND IN DOUBLE-DECODED CONTENT- LIKELY ENCODING ERROR\n";
}

close (OUTPUTFILE);
exit; 
```

这是终端的输出：

> 内容类型：UTF-8 未解码内容：：
> Tr├à┬╛išt├ä┬¢ 15
> 118 01 Praha 1 - Malá Strana
> 捷克共和国 解码内容：：
> Tr┼╛išt─¢ 15
> 118 01 Praha 1 - Malá Strana
> 捷克共和国编码::解码内容::
> Tr┼╛išt─¢ 15
> 118 01 Praha 1 - Malá Strana
> 捷克共和国 双解码内容::Tr┼╛išt─¢ 15
> 118 01 Praha 1 - Malá StranaCzech Republic AMPERSAND 在未解码内容中发现-在解码内容中发现可能的编码错误和符号 - 在编码::解码内容中发现可能的编码错误和符号 - 在双重解码的内容中发现可能的编码错误和符号 - 可能是编码错误

和文件（注意这与终端略有不同但不正确）。OK WOW-这在堆栈溢出中显示为正确，但在 Bluefish、LibreOffice、Excel、Word 或我计算机上的任何其他内容中显示为正确。所以数据在那里只是被错误地编码。我真的不明白发生了什么事。

> 内容类型：UTF-8 未解码内容：：
> TrÅ¾ištÄ 15
> 118 01 Praha 1 - Malá Strana
> Czech Republic DECODED CONTENT::
> Tržiště 15
> 118 01 Praha 1 - Malá Strana
> Czech Republic ENCODE::DECODED CONTENT::
> Tržiště 15
> 118 01 Praha 1 - Malá Strana
> 捷克共和国双解码内容::Tržiště 15
> 118 01 Praha 1 - Malá StranaCzech Republic 在未解码的内容中发现 & 符号 - 可能在解码内容中发现 & 符号 - 可能是编码错误 & 在编码中发现::解码内容 - 可能是编码错误在双重解码内容中发现 & 符号 - 可能存在编码错误

任何如何做到这一点的指针都非常感激。

谢谢，伊恩/蒙特克里斯托

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:01:48.210

错误是使用正则表达式来解析 HTML。至少，您缺乏[对 HTML 实体的解码。](http://p3rl.org/HTML%3a%3aEntities)您可以手动执行此操作，也可以将其留给强大的解析器：

```
use strictures;
use Web::Query 'wq';
use autodie qw(:all);

open my $output, '>:encoding(UTF-8)', '/tmp/embassy-prague.txt';
print {$output} wq('http://prague.usembassy.gov/contact.html')->find('p')->first->html; # or perhaps ->text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:40:50.907

```
#!/usr/bin/env perl

use v5.12;
use strict;
use warnings;
use warnings qw(FATAL utf8);
use open     qw(:std :utf8);

use LWP::Simple;
use HTML::Entities;

my $content = get 'http://prague.usembassy.gov/contact.html';

my ($address) = ($content =~  m{<p><b>Address(.*?)</p>});
decode_entities($address);

say $address; 
```

从命令行：

```
C:\temp> uu > tt.txt

C:\temp> gvim tt.txt
```

并以 GVim（UTF8 模式）显示以下文本：

`</b>:<br />Tržiště 15<br />118 01 Praha 1 - Malá Strana<br />Czech Republic`

另见[Tom Christiansen 的标准序言](http://www.perl.com/pub/2012/04/perlunicook-standard-preamble.html)。

# jquery - 如何将下拉列表访问到 jqgrid 并获取值

> ID：11221146
> 
> 赞同：0
> 
> 时间：2012-06-27T07:15:08.553
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-formatter

大家好，我有 jqgrid 并设置更新内联。我写了这段代码

```
 $(function () {

         var  localstr="2:Dolar;3:Pond;4:Rial";

 var rows;
            var lastSel;
            var grid = $('#list');

            grid.jqGrid({
                url: 'jQGridHandler.ashx',

                postData: { ActionPage: 'ClearanceCost', Action: 'Fill' },
                ajaxGridOptions: { cache: false },
                loadonce: true,
                direction: "rtl",

                datatype: 'json',
                height: 490,
                colNames: ['RequestId', 'WaybillNo', 'CostId', 'NameCost', 'Amount', 'CurrencyTypeId ', 'Remark'],
                colModel: [
                        { name: 'REQUEST_ID', width: 100, sortable: true, hidden: true },
                        { name: 'WAYBILL_NO', width: 100, sortable: true, hidden: true },
                        { name: 'COST_ID', width: 200, sortable: true, hidden: true },
                        { name: 'COST_NAME', width: 200, sortable: true },
                        { name: 'COST_AMOUNT', width: 100, sortable: true, editable: true },
                        { name: 'CURRENCY_ID', width: 100, sortable: true, editable: true, edittype: 'select', formatter: 'select', editoptions: {
                            value: localstr
                            //,

                        },
                        { name: 'REMARK', width: 200, sortable: true, editable: true }
                       ],

                gridview: true,
                rowNum: 30,
                rowList: [30, 60, 90],
                pager: '#pager',
                sortname: 'REQUEST_ID',
                viewrecords: true,
                sortorder: 'ASC',

                rownumbers: true,
                loadComplete: function () {

                    var $this = $(this);
                    rows = this.rows;
                    var l = rows.length, i, row;

                    for (i = 0; i < l; i++) {
                        row = rows[i];

                        var selRowId = grid.jqGrid('getGridParam', row.id);
                        console.log(selRowId);
                        console.log(grid.jqGrid('getCell', row.id, 'CURRENCY_ID'));

                        if ($.inArray('jqgrow', row.className.split(' ')) >= 0) {
                            $this.jqGrid('editRow', row.id, true);
                        }

                    }
                },
                editurl: "jQGridHandler.ashx"

            });
            grid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true }, {}, {}, {}, { multipleSearch: true, overlay: false, width: 460 });

            $("#btnsave").click(function () {
                var l = rows.length, i, row;

                for (i = 1; i < l; i++) {
                    row = rows[i];

//                    var $this = grid.jqGrid('getCell', row.id, 'COST_AMOUNT');
//                    var $id = $($this).attr("id");
//                    var COST_AMOUNT = $("#" + $id).val();

//                    console.log(grid.jqGrid('getCell', row.id, 'COST_ID'));
//                    $this = grid.jqGrid('getCell', row.id, 'COST_ID');
//                    $id = $($this).attr("id");
//                    var COST_ID = $("#" + $id).val();

                   alert(grid.jqGrid('getCell', row.id, 'CURRENCY_ID'));
//                    $this = grid.jqGrid('getCell', row.id, 'CURRENCY_ID');
//                    $id = $($this).attr("id");
//                    var CURRENCY_ID = $("#" + $id).val();

//                    $this = grid.jqGrid('getCell', row.id, 'REMARK');
//                    $id = $($this).attr("id");
//                    var REMARK = $("#" + $id).val();

//                    console.log(COST_ID + ",  " + COST_AMOUNT + ",  " + CURRENCY_ID + ",  " + REMARK);

                }

            });

        }); 
```

我想在用户单击 btn 时获取 CURRENCY_ID 下拉列表值，请帮助我。谢谢大家

编辑01：

![在此处输入图像描述](../Images/466753a3cf3cbffebba191ce3122d9f0.png)

奥列格先生，我想要这样[的设计](https://stackoverflow.com/questions/10404303/solution-for-design-this-forms-in-jqgrid)

谢谢你帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:10:22.683

可以看到您在 JSON 数据中使用了错误的列顺序。像“EURO”这样的文本在**第三**列中，但您在网格中的第 6 列中有该列。还必须计算所有隐藏的列。也许您只需要更改列的顺序并将 'WAYBILL_NO' 和 'COST_ID' 移动到`colModel`.

可能是您遇到的错误？

此外，您不应忘记定义您使用的所有变量。例如线条

```
var $this = $(this);
rows = this.rows; 
```

应固定为

```
var $this = $(this),
    rows = this.rows; 
```

这与

```
var $this = $(this), rows = this.rows; 
```

当前代码做

```
var $this = $(this);
window.rows = this.rows; 
```

或在 JavaScript 的严格模式下产生错误。

# javascript - onclick 监听器如何调用另一个活动

> ID：11221147
> 
> 赞同：0
> 
> 时间：2012-06-27T07:15:10.820
> 
> 标签：javascript, onclicklistener

如何在以下代码中调用另一个活动？

```
btnNext.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // check if next song is there or not
            s2=val.size();  

            if(++s1>=s2){               
            s1=0;           

            }else{

                uri2=tid.get(s1);
                System.out.println("tid=="+uri2);

                uri1=val.get(s1);
                uri = uri1.replace(" ", "%20");             
                url="http://192.168.0.5/music/songs/mp3/"+uri;  
                playSong(url);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:42:07.713

所以你想开始另一个活动`onClick(View arg0)`吗？您需要创建一个新的意图，然后使用该意图启动新的活动。确保你在你的 android manifest 中定义了新的活动。看看这个链接。它应该有很大帮助。

[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

# cordova - 是否可以在将 appMobi 启动画面图像发送到应用商店之前更改它？

> ID：11221151
> 
> 赞同：0
> 
> 时间：2012-06-27T07:15:21.033
> 
> 标签：cordova, appmobi

主题说明了一切。试图看看我是否不能将“加载”“启动画面”图像更改为更个性化的图像。如果是这样，我该怎么做？我知道当我打包图像并将其发送出去时，我应该包括屏幕截图、闪屏和其他任何内容，但也不完全确定它是如何工作的。任何人都可以为我哑巴吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:52:28.600

是的你可以。在构建过程中，系统会要求您提供所有信息（包括目标设备特定分辨率的闪屏）。向导是不言自明的。要管理它，请登录[http://apphub.appmobi.com](http://apphub.appmobi.com)

# mysql - cakephp比较查找中的数据库字段

> ID：11221152
> 
> 赞同：1
> 
> 时间：2012-06-27T07:15:21.083
> 
> 标签：mysql, cakephp, cakephp-2.1, cakephp-model

我正在使用 CakePHP 2.1

我在数据库中有以下字段。

```
id
views
max_views 
```

我想获取`views < max_views`使用查找查询的记录。那么它的查询应该是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:30:06.847

我会那样做。

```
$this -> find('all', array('conditions' => array('views < max_views'))); 
```

# php - 谷歌在 iframe

> ID：11221153
> 
> 赞同：0
> 
> 时间：2012-06-27T07:15:25.340
> 
> 标签：php, iframe

我们如何在 iframe 上返回结果，页面填充在 iframe 容器内。

```
<form action="what.php" method="POST">
<center><input type="text" name="search"/><br/>
<input type="submit" value="Search google" name="submit">
</center></form>
<?php if (isset($_POST['submit'])) 
{ 
$a = '<iframe width="500" height="400" src="http://www.google.com/search?q='.$_POST['search'].'"></iframe>';
echo htmlentities($a);
echo $a;
}
?> 
```

过载：自动不起作用，通过我的 iframe 上的谷歌搜索可以显示我感到幸运的结果 :) 如果我问一个愚蠢的问题，请原谅我的无知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:27:21.890

在响应标头中，您将获得“X-Frame-Options：SAMEORIGIN”。查看这个[Mozilla 的文档](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)

[其他一些类似的帖子](https://stackoverflow.com/questions/7800370/how-to-open-google-links-inside-iframe)

# .htaccess - 如何添加从主 url 到 url-on-sub-domain 的重定向？

> ID：11221155
> 
> 赞同：0
> 
> 时间：2012-06-27T07:15:36.067
> 
> 标签：.htaccess, redirect, url-rewriting, http-status-code-301

我`sub-domain forum.new4u.com`为该站点创建了一个`new4u.com`.

实际上是 `/web/forum`目录中的论坛。所以论坛也可以访问`http://news4u.com/forum/index.php`，也可以在`http://forum.news4u.com/index.php`

现在，我想将所有旧论坛 URL 重定向到新论坛 URL。

例子：

```
http://news4u.com/forum/post_id=225 
```

是`http://forum.news4u.com/post_id=225`

我怎样才能实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:19:17.200

取决于您的服务器技术。

IIS - [ISAPI 重写](http://www.isapirewrite.com/)

阿帕奇 - [mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

nginx - [HttpRewriteModule](http://wiki.nginx.org/HttpRewriteModule)

编辑 -

由于您应该使用 mod_rewrite，因此您可以执行以下操作：

```
RewriteRule ^forum/([^/.]+) http://forum.news4u.com/$1 
```

编辑2 -

```
RewriteCond %{HTTP_HOST} ^forum.news4u.com [NC]
RewriteRule ^/(.*)$ /forum/$1 [L] 
```

# ksh - 如何在 Aix 或 Unix 的目录中获取非目录文件的列表？

> ID：11221165
> 
> 赞同：2
> 
> 时间：2012-06-27T07:16:22.740
> 
> 标签：ksh, aix

我想获取目录中的非目录文件列表。该`find`命令有效，但该`maxdepth 1`选项无效，可能是因为 Aix 不支持它。

这个命令：

```
find . -maxdepth 1 -type f 
```

返回：

```
find: bad option -maxdepth 
```

我使用了这个命令：

```
ls -l | grep ^- | awk '{print $9}' 
```

但如果文件名包含空格，这将不起作用。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:47:18.927

离开你的最后一次尝试，这似乎工作正常：

```
ls -l | grep ^- | awk '{for(i=1;i<9;i++) $i="";print}' | sed 's/^        //' 
```

可能有更好的方法（我希望有！）但这会折叠前八个字段，留下八个空格，然后是行的其余部分（所以文件名中的空格是可以的），然后删除前八个空格.

我更喜欢这个切入正题的 bash 版本：

```
for f in *; do if [ -f "$f" ]; then echo "$f"; fi; done 
```

我相信你可以为 ksh 调整它（我不熟悉）。

我仍然希望其他人会知道更直接的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T19:53:32.583

对于名称中包含多个空格的文件，这似乎对我有用。将其缩减为单个管道。
我个人想找到更优雅的东西。

```
ls -l | awk '/^-/ {for(i=9;i<=NF;i++){printf "%s ", $i}print "";}' 
```

# java - Eclipse 中的类限制

> ID：11221167
> 
> 赞同：1
> 
> 时间：2012-06-27T07:16:29.757
> 
> 标签：java, eclipse-plugin, restriction

我正在尝试 Google App Engine 使用 Eclipse 插件构建示例应用程序。我尝试在我的代码中创建一个 HttsURLConnection 类，编辑器显示一个红色标记，抱怨“Google App Engine 的 Java 运行时环境不支持 javax.net.ssl.HttpsURLConnection”，我想知道这是如何完成的，是否完成通过我安装的 GAE 插件？这是如何实现的？我的类路径中有 JRE 系统库[jdk1.6.0_27]。

我认为这是编译时检查？

他们是否使用我认为是运行时行为的策略文件来限制访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:24:42.367

这可能与 Google App Engine 平台的沙盒环境有关，其中“应用程序在安全环境中运行，提供对底层操作系统的有限访问”。此外，您似乎不是唯一遇到此问题的人：请参阅[this](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/ZEskGLwyE_0)，特别是“HttpsURLConnection 当前不可用，我们应该从文档中删除对它的引用”的部分

# c# - 当copylocal属性为false时如何从引用dll中获取类型

> ID：11221169
> 
> 赞同：4
> 
> 时间：2012-06-27T07:16:49.463
> 
> 标签：c#, visual-studio, visual-studio-2005, c#-2.0

我需要做一些类似的事情：

```
Type CustomType = Type.GetType("instanceName"); 
```

它总是返回 null。instanceName 是一个字符串，它表示添加到 References 的 dll 中包含的类型（将 copyLocal 属性设置为 false）。

我也试过：

```
Type CustomType = Type.GetType("instanceName, dllFile.dll"); 
```

但也返回 null。

非常感谢

亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:20:52.310

如果程序集已经加载，你可以试试这个：

```
Type customType = Type.GetType("namespace.typename, assembly"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T07:20:53.030

如果您没有将程序集部署到 GAC 并且`CopyLocal`设置设置为`false`，那么您打算从哪里加载程序集？

如果您计划将程序集部署到驱动器上的固定位置，您可以使用`Assembly.LoadFrom`：

```
var assembly = Assembly.LoadFrom(@"C:\Path\To\Assembly.dll");
var type = assembly.GetType("InstanceName"); 
```

这允许您加载绝对程序集。如果您正在使用`Type.GetType`，它会使用标准的融合程序集加载规则来尝试查找匹配的程序集（但如果它不是 GAC'd 或`CopyLocal`= `true`），那么它将不会与您的输出一起部署，并且`GetType`将返回 null。

此外，如果您没有在类型名称中指定程序集名称，例如`instanceName, assemblyName`，而不是`instanceName`，我*相信*只检查当前正在执行的程序集。

# c# - 使用 asp.net 使 div/htmlgeneric 控件可见

> ID：11221171
> 
> 赞同：1
> 
> 时间：2012-06-27T07:16:52.593
> 
> 标签：c#, asp.net

我有一个带有这样的 div 的用户控件：

```
 <div runat="server" id="pnlShippingMethods" class="checkoutstep">
                            <div class="steptitle">
                                <%=GetLocaleResourceString("CheckoutOnePage.ShippingMethods.Title")%>
                                <div style="float: right;">                                  
                                </div>
                                Date from checkout page one for ship method update panel is <%= DateTime.Now.ToString() %>
                            </div>
                            <asp:Panel runat="server" ID="pnlShippingMethodsContent" class="stepcontent">
                                <nopCommerce:CheckoutShippingMethod ID="ctrlCheckoutShippingMethod" runat="server"
                                    OnePageCheckout="true" />
                            </asp:Panel>
                        </div> 
```

我在放置此控件的页面加载时设置为可见 = false。然后从同一页面上的另一个控件，我试图让它像这样可见：

```
HtmlGenericControl pnlShippingMethods = this.Parent.Parent.Parent.Parent.Parent.FindControl("pnlShippingMethods") as HtmlGenericControl;              

        pnlShippingMethods.Visible = true; 
```

我能够从其他用户控件而不是 div 使可见/不可见用户控件 CheckoutShippingMethod 。请建议如何使其可见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:20:59.490

您可以使用公共方法代替它。

1）在要显示/隐藏面板的自定义控件中创建公共方法/属性。

```
public void ShowPanel(bool isVisible)
{
   this.pnlShippingMethods.Visible = isVisible;
} 
```

2）从另一个控件调用它以显示隐藏面板。

```
yourCustomrControlObject.ShowPanel(true); 
```

# php - TCPDF 在多个页面上拆分 html 表

> ID：11221174
> 
> 赞同：7
> 
> 时间：2012-06-27T07:16:54.157
> 
> 标签：php, html, html-table, tcpdf

我使用 TCPDF 来输出一个 html 表格，在我的示例中，这不是我唯一需要修改的表格，所以我需要一些规则来渲染我的页面。到目前为止，TCPDF 在我看来是一个功能强大的库，所以我希望不要尝试另一个库。

我的问题是我需要将表格标题添加到表格将出现的每个新页面，但我还有其他信息要写入此 pdf，必须没有表格标题，所以我不能使用重写标题方法tcpdf。

```
<table border="0" cellspacing="0" cellpadding="0" align="center" width="100%" ><tr><td><table border="0" cellspacing="0" cellpadding="3" align="left" width="100%" ><tr><td class="TableHeader"  width="5%" style="padding: 5px; border-top: 1px solid #000000; border-left: 1px solid #000000; border-bottom: 1px solid #E4E9EC;" >Nr.</td><td class="TableHeader" width="40%" style=" padding: 5px; border-top: 1px solid #000000; border-bottom: 1px solid #E4E9EC;" >Denumire</td><td class="TableHeader" width="20%" align="left" style=" padding: 5px; border-top: 1px solid #000000; border-bottom: 1px solid #E4E9EC;" >Cod</td><td class="TableHeader" width="10%" align="center" style=" padding: 5px; border-top: 1px solid #000000; border-bottom: 1px solid #E4E9EC;" >Cant.</td><td class="TableHeaderLast" align="right" width="13%" style=" padding: 5px; border-top: 1px solid #000000; border-bottom: 1px solid #E4E9EC;" >Pret unitar<br />fara TVA (RON)</td><td class="TableHeaderLast" align="right" width="13%" style=" padding: 5px; border-bottom: 1px solid #E4E9EC; border-top: 1px solid #000000; border-right: 1px solid #000000;" >Pret total<br />fara TVA (RON)</td></tr></table></td></tr></table><table border="0" cellspacing="0" cellpadding="0" align="center" width="100%" id="Container"><tr><td><table border="0" cellspacing="0" cellpadding="3" align="left" width="100%" ><tr><td class="TableHeader"  width="5%" style="padding: 5px; border-left: 1px solid #000000;" >&nbsp;</td><td class="TableHeader" width="40%" style=" padding: 5px;" >&nbsp;</td><td class="TableHeader" width="20%" style=" padding: 5px;" >&nbsp;</td><td class="TableHeader" width="10%" style=" padding: 5px;" >&nbsp;</td><td class="TableHeaderLast" align="right" width="13%" style=" padding: 5px;" >&nbsp;</td><td class="TableHeaderLast" align="right" width="13%" style=" padding: 5px; border-right: 1px solid #000000;" >&nbsp;</td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #E4E9EC; border-left: 1px solid #000000; ">1</td><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #E4E9EC;"><b>sectiune1</b></td><td class="TableRow" colspan="5" style="padding: 5px; border-bottom: 1px solid #E4E9EC; border-right: 1px solid #000000;">&nbsp;</td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-left: 1px solid #000000;border-bottom: 1px solid #E4E9EC; ">1.1</td><td class="TableRow" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">UNI-Cazan mixt AIREX 25 2S BICOMB MODUL  </td><td class="TableRow" align="left" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">94456&nbsp;</td><td class="TableRow"  align="center" style="padding: 5px;border-bottom: 1px solid #E4E9EC;">99999</td><td class="TableRow" align="right" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">24.623,00</td><td class="TableRow" align="right"  style="padding: 5px;  border-right: 1px solid #000000;border-bottom: 1px solid #E4E9EC;">2.462.275.377,00</td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-left: 1px solid #000000;border-bottom: 1px solid #E4E9EC; ">1.2</td><td class="TableRow" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">UNI-Cazan mixt AIREX 25 2S BICOMB MODUL  </td><td class="TableRow" align="left" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">94456&nbsp;</td><td class="TableRow"  align="center" style="padding: 5px;border-bottom: 1px solid #E4E9EC;">99999</td><td class="TableRow" align="right" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">24.623,00</td><td class="TableRow" align="right"  style="padding: 5px;  border-right: 1px solid #000000;border-bottom: 1px solid #E4E9EC;">2.462.275.377,00</td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #000; border-left: 1px solid #000000; ">&nbsp;</td><td class="TableRow" width="40%" style="padding: 5px; border-bottom: 1px solid #000; "><b> TOTAL sectiune1:</b></td><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #000; "> &nbsp;</td><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #000; "> &nbsp;</td><td class="TableRowLast" colspan="2" align="right" style="padding: 5px; border-bottom: 1px solid #000; border-right: 1px solid #000000; "><b>4.924.550.754,00</b></td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-top: 1px solid #000; border-bottom: 1px solid #000; ">&nbsp;</td><td class="TableRow" style="padding: 5px; border-top: 1px solid #000; border-bottom: 1px solid #000;">&nbsp;</td><td class="TableRow" colspan="5" style="padding: 5px; border-top: 1px solid #000; border-bottom: 1px solid #000; ">&nbsp;</td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-top: 1px solid #000; border-bottom: 1px solid #E4E9EC; border-left: 1px solid #000000; ">2</td><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #E4E9EC; border-top: 1px solid #000;"><b>sectiune2</b></td><td class="TableRow" colspan="5" style="padding: 5px; border-bottom: 1px solid #E4E9EC; border-right: 1px solid #000000; border-top: 1px solid #000;">&nbsp;</td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-left: 1px solid #000000;border-bottom: 1px solid #E4E9EC; ">2.1</td><td class="TableRow" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">ICI-Cazan condensatie MONOLITE 75-JB</td><td class="TableRow" align="left" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">81020076&nbsp;</td><td class="TableRow"  align="center" style="padding: 5px;border-bottom: 1px solid #E4E9EC;">99999</td><td class="TableRow" align="right" style="padding: 5px;border-bottom: 1px solid #E4E9EC; ">34.719,00</td><td class="TableRow" align="right"  style="padding: 5px;  border-right: 1px solid #000000;border-bottom: 1px solid #E4E9EC;">3.471.865.281,00</td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #000; border-left: 1px solid #000000; ">&nbsp;</td><td class="TableRow" width="40%" style="padding: 5px; border-bottom: 1px solid #000; "><b> TOTAL sectiune2:</b></td><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #000; "> &nbsp;</td><td class="TableRow" style="padding: 5px; border-bottom: 1px solid #000; "> &nbsp;</td><td class="TableRowLast" colspan="2" align="right" style="padding: 5px; border-bottom: 1px solid #000; border-right: 1px solid #000000; "><b>3.471.865.281,00</b></td></tr><tr style="border-bottom: 1px solid #ccc"><td class="TableRow" style="padding: 5px; border-top: 1px solid #000; border-bottom: 1px solid #000; ">&nbsp;</td><td class="TableRow" style="padding: 5px; border-top: 1px solid #000; border-bottom: 1px solid #000;">&nbsp;</td><td class="TableRow" colspan="5" style="padding: 5px; border-top: 1px solid #000; border-bottom: 1px solid #000; ">&nbsp;</td></tr><tr><td class="TableTotal"  style=" padding: 5px; border-left: 1px solid #000000;"></td><td colspan="3" class="TableTotal"  style=" padding: 5px; " ><b>Total sectiune1:</b></td><td align="right" class="TableTotal" style=" padding: 5px; " ><b>&nbsp;</b></td><td class="TableTotal" align="right" style=" padding: 5px; border-right: 1px solid #000000;" ><b>4.924.550.754,00 </b></td></tr><tr><td class="TableTotal"  style=" padding: 5px; border-left: 1px solid #000000;"></td><td colspan="3" class="TableTotal"  style=" padding: 5px; " ><b>Total sectiune2:</b></td><td align="right" class="TableTotal" style=" padding: 5px; " ><b>&nbsp;</b></td><td class="TableTotal" align="right" style=" padding: 5px; border-right: 1px solid #000000;" ><b>3.471.865.281,00 </b></td></tr><tr><td class="TableTotal"  style=" padding: 5px; border-left: 1px solid #000000;border-top: 1px solid #E4E9EC; "></td><td colspan="4" class="TableTotal"  style=" padding: 5px;border-top: 1px solid #E4E9EC; " ><b>Total oferta (RON):</b></td><td colspan="2" align="right" class="TableTotal" style=" padding: 5px; border-right: 1px solid #000000;border-top: 1px solid #E4E9EC; " ><b>8.396.416.035,00 </b></td></tr><tr><td class="TableTotal"  style=" padding: 5px; border-left: 1px solid #000000;border-bottom: 1px solid #000000;"></td><td colspan="4" class="TableTotal"  style=" padding: 5px;border-bottom: 1px solid #000000;" ><b>Total oferta (RON cu TVA inclus):</b></td><td colspan="2" align="right" class="TableTotal" style=" padding: 5px; border-right: 1px solid #000000;border-bottom: 1px solid #000000;" ><b>10.411.555.883,40 </b></td></tr></table></td></tr></table> 
```

我想到了以下解决方案：如果我能以某种方式将这个 html 拆分为行并逐行写入 pdf，以便在我覆盖页脚时可以回滚，然后添加一个新页面，但是有一个主要问题，我收到各种警告，因为 html 表格标签未关闭。这是我的代码：

```
$pdf->setAutoPageBreak(false);
$pdf->startTransaction();
$html = new simple_html_dom();
$html->load($data);
$single = $html->find('#Container', 0);
if($single){

 $rows = $single->getElementsByTagName('tr');
 $rows = $rows[0]->getElementsByTagName('tr');

 if($rows)
   for($i=1;$i<(count($rows)-1);$i++){
     $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', '<table>', $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);
     $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $rows[$i]->outertext, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);
     $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', '</table>', $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);

   if ($pdf->getY() > $pdf->getPageHeight() - 30) {
       $pdf->rollbackTransaction(true);
       $pdf->AddPage();
       $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', '<table>', $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);
       $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $rows[$i]->outertext, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);
       $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', '</table>', $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);
        }
    }
   }

    $pdf->commitTransaction();
    $pdf->setAutoPageBreak(true, 30); 
```

我快速浏览了这 2 篇文章，也许有人会觉得这很方便： [Some paging with multicell](http://www.onemoretake.com/2009/03/27/revisited-tcpdf-variable-height-table-rows-with-multicell/) 和[Another paging with multicell](http://www.jonathanlbrown.com/2011/07/17/tcpdf-paging-those-multicells/)。我发现这 2 值得作为解决方案逻辑的示例，但与 tcpdf 一起使用的方法在我看来有点奇怪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T08:55:19.700

我认为您的解决方案是一个很好的解决方案。我能想到的唯一其他方法是使用固定宽度的多单元格，这可能会很痛苦，但会给你静态的列宽。

然而，我注意到了一些问题：

1.  您的事务包装了整个文档，回滚应该将文档重置为空。
2.  您的警告很可能是由于您传递的部分 html 代码无法呈现到 writeHTMLCell 的事实引起的。（您只传递 <table> 或 </table> 单独时无法呈现）
3.  如果您将每一行包装在表格标签中，您的列将不会排列。最好的办法是将该页面上的行包装在一个表格块中。

试试这些改变，让我知道结果如何

```
$pdf->setAutoPageBreak(false);
//$pdf->startTransaction(); // Moved
$html = new simple_html_dom();
$html->load($data);
$single = $html->find('#Container', 0);
if($single){

    $rows = $single->getElementsByTagName('tr');
    $rows = $rows[0]->getElementsByTagName('tr');

    if($rows) {
        $pdf->startTransaction(); // Start transaction only because we may need it
        // Header for html, this starts the html and can optionally insert the header row as the first row on every new page.
        $html_header = '<tr><td>Name</td><td>Age</td></tr>'; 
        $html_buffer = '<table>'.$html_header;
        for($i=1;$i<(count($rows)-1);$i++){
            $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html_buffer.$rows[$i]->outertext.'</table>', $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);

            if ($pdf->getY() < ($pdf->getPageHeight() - 30)) { // Note the less-than operator
                // We might be able to add some more text, so undo that
                $pdf->rollbackTransaction(true);
                // And store the html
                $html_buffer .= $rows[$i]->outertext;
            }else{
                // We exceeded our limit
                $pdf->rollbackTransaction(true);
                // Write last known good table
                $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html_buffer.'</table>', $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);
                // Add a new page
                $pdf->AddPage();
                // End this transaction
                $pdf->commitTransaction();
                // Start a new transaction
                $pdf->startTransaction();
                // Reset html buffer
                $html_buffer = '<table>'.$html_header;
                // Add line we couldn't fit on last page to html buffer
                $html_buffer .= $rows[$i]->outertext;
            }
        }
        // There is still information in our buffer and it fits on a single page
        $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html_buffer.'</table>', $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=false);
        // Final commit
        $pdf->commitTransaction(); 
    }
}
$pdf->setAutoPageBreak(true, 30); 
```

这会将页面上的所有内容包装在一个表格块中，因此列将在该页面上对齐。（它们可能仍然因页面而异）另外，我让您能够根据需要将自己的标题添加到每个新页面。只需将 $html_header 更改为您自己的标题行代码。

当您说 TCPDF 可能会令人困惑时，您是对的，但它也非常强大，一旦您掌握了它，您就可以制作一些非常好的文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-07T18:41:22.360

转到 TCPDF 并选择[Example 48](http://www.tcpdf.org/examples/example_048.pdf)，您将看到一个带有`<thead>`元素的示例。

# visual-studio-2010 - VS2010/VS2012 默认的 Doctypes 和哪些是面向未来的

> ID：11221175
> 
> 赞同：3
> 
> 时间：2012-06-27T07:16:57.447
> 
> 标签：visual-studio-2010, html, xhtml, doctype, visual-studio-2012

我想知道为什么 VS2010 和 VS2012 对母版页和 web 表单使用不同的 doctype 声明。

即 VS2010 对母版页使用“XHTML 1.0 Strict”文档类型，对 Web 表单使用“XHTML 1.0 Transitional”文档类型。

VS2012 使用 HTML5“DOCTYPE html”作为母版页，并将 XHTML 命名空间 (xmlns="http://www.w3.org/1999/xhtml") 添加到 Web 表单的正文标记中。

这种行为有什么原因吗？

我试图找出我应该使用什么文档类型来重新启动一个网站。我也想支持旧的 IE 和 FF 版本，但我不想使用新的 HTML5 标签/属性（目前，但我可能会在将来的某个时候使用它们）。

该网站是在 VS2010 中使用 ASP.NET 4.0 开发的，但我会尽快更改为使用 ASP.NET 4.5 的 VS2012。这正是令我不安的问题。如前所述，这两个版本使用不同的 doctype 声明，现在我不知道该怎么做才能适应未来并容忍旧浏览器。

提前感谢您的回答

PS：我不想使用除 text/html 以外的 MIME 类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:24:16.770

我过去通常严格遵守 Xhtml 1.0，但这些天我`<!DOCTYPE html>`用于所有网站。

对我来说，这可能是未来证明您的文档类型的最佳方式，并且如果您使用通过 javascript 为新标签提供兼容性的 HTML5 垫片，那么在旧浏览器中支持新标签很容易。

# actor - 多个阅读器 - Akka 中的单个编写器

> ID：11221177
> 
> 赞同：0
> 
> 时间：2012-06-27T07:17:04.830
> 
> 标签：actor, akka

我想使用 Akka 在数据结构上实现多读/单写模式，但我陷入了角色模型的设计。

我最初的想法是有一个主管 Actor 来接收外部请求（读取或写入）。读取请求将被转发给读取器参与者以进行异步处理。写请求将等待所有读者完成，然后同步处理。

我的问题是如何实现“等待所有读者完成”部分。

我首先想到的是在主管那里设一个柜台。每次主管将消息转发给读者时，计数器都会增加。阅读器完成后会向主管发送一条“我完成了”的消息，这将减少计数器。但是，我认为这会导致死锁，因为“我完成了”消息将与外部请求发送到同一个邮箱。如果主管正在同步处理一个写请求，那么“我完成了”将永远不会到达它。

我真的被设计困住了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:43:43.913

根据上面的评论。

将队列添加到您的主管 Actor 以对传入请求进行排队。当读者发回完成的消息时，从队列中取出一个任务并将其交给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T14:25:34.263

这篇文章很旧，但它可能会对某人有所帮助。使用带有 Await 的[Futures以及未来完成的位置（onComplete 或 onSuccess），处理写入操作。](http://doc.akka.io/docs/akka/snapshot/java/futures.html)

# sql - SQL Server 2008 比较两个不同的数据库表的列名、数据类型和长度

> ID：11221183
> 
> 赞同：2
> 
> 时间：2012-06-27T07:17:40.550
> 
> 标签：sql, sql-server-2008

我正在使用 SQL Server 2008 R2。

我创建了两个不同的数据库`Master`和`Test`. 它们一开始都有相同的表和列，但后来`master`被用于一些稳定的环境，`test`并被我用于持续的开发。

现在由于开发，我更改了一些列的数据类型，向表中添加了一些新列，删除了一些列，添加了一些新表并删除了。现在我想`Master`和`test`. 我无法删除并重新创建`Master`，因为它包含一些敏感的实时数据。所以我需要比较每个表`master`以及`test`列名、数据类型、约束和长度。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T07:16:29.870

我自己解决了：

```
SELECT  
    T.[name] AS [table_name], AC.[name] AS [column_name],  
        TY.[name] AS system_data_type
FROM    [master].sys.[tables] AS T  
    INNER JOIN [master].sys.[all_columns] AC ON T.[object_id] = AC.[object_id] 
    INNER JOIN [master].sys.[types] TY ON AC.[system_type_id] = TY.[system_type_id]

EXCEPT

SELECT  
    T.[name] AS [table_name], AC.[name] AS [column_name],  
        TY.[name] AS system_data_type
FROM    test.sys.[tables] AS T  
    INNER JOIN test.sys.[all_columns] AC ON T.[object_id] = AC.[object_id] 
    INNER JOIN test.sys.[types] TY ON AC.[system_type_id] = TY.[system_type_id] 
```

这将为您提供列的列表以及表名、列名和数据类型，它们在主目录中但不存在或与测试不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:26:25.613

你做过搜索吗？

[http://www.codeproject.com/Articles/205011/SQL-Server-Database-Comparison-Tool](http://www.codeproject.com/Articles/205011/SQL-Server-Database-Comparison-Tool)

# wpf - 在 WPF TreeView 中隐藏元素

> ID：11221184
> 
> 赞同：0
> 
> 时间：2012-06-27T07:17:42.627
> 
> 标签：wpf, treeview, hierarchicaldatatemplate

我有以下情况：

我有一个带有分层元素的 ViewModel 可以在 TreeView 中显示。到目前为止，一切都很好。我现在要做的是根据 ViewModel-Element 上设置的某些属性（例如 IsConfigurable 等）从 TreeView 隐藏/删除元素。如果我禁用了 DataTemplate，则元素将被删除，而且所有子元素也会被删除，这不是我想要的。

这甚至可能吗？

问候，

于尔根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:42:04.973

这听起来有些奇怪，但是……

您应该考虑您的应用程序应保持可测试性和可调试性。
您的模型包含原始数据（集合），因为它是 - 这里没有干预。在您绑定到的对象 ViewModel 中，您可以根据需要计算转换，以显示您的层次结构。这种方法的好处是，您可以“轻松”测试/调试您的转换。现在将您的 TreeView 绑定到计算的层次结构，而无需进行晦涩的实验。如果 ViewModel 中的属性（您提到 IsConfigurable 或其他）发生更改，您知道何时重新计算绑定层次结构。

# c - 给定 FILE 指针，我如何找到文件名？

> ID：11221186
> 
> 赞同：22
> 
> 时间：2012-06-27T07:17:50.210
> 
> 标签：c, file

> **可能重复：**
> [从 C 中的文件描述符](https://stackoverflow.com/questions/1188757/getting-filename-from-file-descriptor-in-c)
> [获取文件名 从 C 中的文件指针获取文件名](https://stackoverflow.com/questions/9937645/obtain-filename-from-file-pointer-in-c)

我在这里有一个功能：

```
handle_file(FILE *file)
{
    if(condition)
    {
        print filename and other msg;
    }
} 
```

我们在这里唯一知道的是指向文件的指针；是否可以根据指针获取文件名？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T07:19:27.243

查看[此答案](https://stackoverflow.com/a/3167301/15165)以获取文件描述符，并查看此[答案](https://stackoverflow.com/a/1189582/15165)以从文件描述符中获取文件名。在 Linux 上应该没问题（不确定其他操作系统）。

这是一个快速工作示例（在 Cygwin/Win7 下测试）：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main()
{
    int MAXSIZE = 0xFFF;
    char proclnk[0xFFF];
    char filename[0xFFF];
    FILE *fp;
    int fno;
    ssize_t r;

    // test.txt created earlier
    fp = fopen("test.txt", "r");
    if (fp != NULL)
    {
        fno = fileno(fp);
        sprintf(proclnk, "/proc/self/fd/%d", fno);
        r = readlink(proclnk, filename, MAXSIZE);
        if (r < 0)
        {
            printf("failed to readlink\n");
            exit(1);
        }
        filename[r] = '\0';
        printf("fp -> fno -> filename: %p -> %d -> %s\n",
                fp, fno, filename);
    }
    return 0;
} 
```

输出：

```
fp -> fno -> filename: 0x80010294 -> 3 -> /tmp/test.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:34:05.777

这可以分2个阶段完成。首先，您需要获取文件描述符，然后需要恢复文件名。下面是一个例子，但是有一些严重的缓冲区溢出漏洞！

```
#include <stdio.h>
#include <unistd.h>

char * recover_filename(FILE * f) {
  int fd;
  char fd_path[255];
  char * filename = malloc(255);
  ssize_t n;

  fd = fileno(f);
  sprintf(fd_path, "/proc/self/fd/%d", fd);
  n = readlink(fd_path, filename, 255);
  if (n < 0)
      return NULL;
  filename[n] = '\0';
  return filename;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T09:09:30.060

否则，如果要分析文件夹中的所有目录和文件，可以使用 opendir 和 struct dirent。这不使用文件指针，但可能对您有用，具体取决于您的代码的工作方式。

```
DIR *BaseDIR;
struct dirent *curentDir;
BaseDIR = opendir("path/to/the/directory");
while((curentDir = readdir(BaseDIR)) != NULL){
      printf("directory or file name : %s\n",curentDir->d_name);
}
closedir(BaseDIR); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T08:26:10.543

正如我搜索的那样，如果您是 root 并且`lsof`您的系统中存在命令，那么您可以使用`fileno(fp)`来获取打开文件的描述符，`lsof -d descriptor`. 你可以试试。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-27T09:00:45.287

我认为这是可能的。
用于`fileno(fp)`获取描述符。
然后，您可以使用`fstat()`函数。

```
The fstat() function shall obtain information about an open file  asso‐
       ciated  with the file descriptor fildes, and shall write it to the area
       pointed to by buf. 
```

`int fstat(int fildes, struct stat *buf);`

然后，您可以在`*buf`.

# iphone - 根据单元格索引在表格视图单元格中放置进度视图

> ID：11221189
> 
> 赞同：0
> 
> 时间：2012-06-27T07:17:59.633
> 
> 标签：iphone

我是 iphone 新手。我有一个小问题，我有一个类 CustomCell，我已经声明了我需要的所有元素，如下所示

```
// CustomCell.h 
```

在这个类中，我将 getter 和 setter 方法设置为 TitleLabel、PercentageLabel、ProgressView、downloadButton

```
//  CustomCell.m 
```

在这个类中将框架设置为最重要，并将图像设置为下载按钮也在此处

我的输出屏幕的屏幕截图是![模拟器中的图像是我的输出屏幕](../Images/b6c17100d40237c976a8420fcd2dbd9d.png)

// 在我的表格视图中，当我们单击将执行以下方法时，我有一个下载按钮

```
-(void)downloadButtonClicked:(id)sender
{
    NSLog(@"download button clicked");
    int index = [sender tag];
    NSLog(@"index of the cell is %d",index);
    UIButton *button = (UIButton*)sender;

    UITableViewCell *cell = (UITableViewCell *)[[button superview] superview];

    UILabel *titleLabel = (UILabel *)[cell viewWithTag:100];

    NSLog(@"label text =%@",titleLabel.text);

    UIView *senderButton = (UIView*) sender;
    NSIndexPath *indexPath = [tableView indexPathForCell: (UITableViewCell*)[[senderButton superview]superview]]; 
    NSLog(@"indexpath is %d",indexPath.row);

    CustomCell *customCell = [[CustomCell alloc]init];
    progressView = [[UIProgressView alloc]init];
   // [customCell.contentView insertSubview:progressView atIndex:indexPath.row];
    [customCell.contentView addSubview:progressView];

    selectedBookTitle = titleLabel.text;

    NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSMutableArray *allDownloadLinks;
    biblePlayerViewController = [[BiblePlayerViewController alloc]init]; 
    allDownloadLinks = [biblePlayerViewController allDownloadLinks];
    NSLog(@"all Download Links are %@",allDownloadLinks);

    biblePlayerViewController.indexOfSelectedBookTitle = [[appDelegate getBookNames]indexOfObject:selectedBookTitle];

    Download* download = [Download downloadWithTitle:selectedBookTitle url:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.audiotreasure.com/%@.zip",[allDownloadLinks objectAtIndex:(biblePlayerViewController.indexOfSelectedBookTitle)]]]PathtoSave:documentsPath];
    [[DownloadManager sharedDownloadManager] queueDownload: download];

} 
```

// 在 cellForRowAtIndexPath tableview 委托方法中，我编写了这样的代码

```
- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CustomCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }    
    NSLog(@"indexpath.row is %d",indexPath.row);
    NSLog(@"downloadmanager is %d",[[[DownloadManager sharedDownloadManager]getDownloads]count]);
  /*  if (indexPath.row<[[[DownloadManager sharedDownloadManager] getDownloads]count]) 
    {
        cell.TitleLabel.text = ((Download*)[[[DownloadManager sharedDownloadManager] getDownloads] objectAtIndex:indexPath.row]).title_;    
        cell.ProgressView.progress = (float)(((Download*)[[[DownloadManager sharedDownloadManager] getDownloads] objectAtIndex:indexPath.row]).PercentageDownloaded_ )/100.0f;
        cell.PercentageLabel.text = [NSString stringWithFormat:@"%d %%",((Download*)[[[DownloadManager sharedDownloadManager] getDownloads] objectAtIndex:indexPath.row]).PercentageDownloaded_];     
    }
    else
    {
        [tableView reloadData];
    }*/
    NSString *titleLabel = [[appDelegate getBookNames]objectAtIndex:indexPath.row];
    cell.TitleLabel.text = titleLabel;
    cell.downloadButton.tag = indexPath.row;
    NSLog(@"tag is %d",cell.downloadButton.tag);
  [cell.downloadButton addTarget:self action:@selector(downloadButtonClicked:) forControlEvents:UIControlEventTouchUpInside];

    return cell;
} 
```

我的问题是屏幕截图中的表格视图中有 66 个单元格，我们有一个名为 Revelation 的书名。它在我的表格视图中有第 66 个单元格（索引为 65）。在这里，当我单击该单元格中的下载按钮时，我必须显示进度视图仅在该特定单元格（第 65 个单元格）中。我每 1 秒重新加载一次表格视图，因为在放置进度视图后，我们必须在该单元格中显示该进度视图的进度。那么，我们如何放置进度视图在那个特定的单元格索引中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:29:49.727

为什么不从头开始在单元格中添加进度视图？最初隐藏它，当您触摸下载按钮时，您会告诉单元格显示它。

我看到您将单元格的 indexPath.row 存储在下载按钮标签中。您可以使用它来找出选择了哪个单元格，如下所示。

```
NSIndexPath *cellIndexPath = [NSIndexPath indexPathForRow:sender.tag inSection:0];
CustomCell *cell = (CustomCell *)[tableView cellForRowAtIndexPath:nowIndex];
[cell showProgressBar]; 
```

我写了我头顶的代码..没有测试它。

# semantic-web - 图数据库：TinkerPop/Blueprints vs W3C 链接数据

> ID：11221193
> 
> 赞同：14
> 
> 时间：2012-06-27T07:18:27.137
> 
> 标签：semantic-web, graph-databases

寻找用于异构（多节点类型（多模式）、多边缘类型（多关系）和多描述性特征（多特征））网络的网络分析基础设施，我注意到有两个标准堆栈图数据库世界：

*一方面*，我们有[ThinkPop/Blueprint](https://github.com/tinkerpop/blueprints/wiki/) [属性图模型](https://github.com/tinkerpop/blueprints/wiki/Property-Graph-Model)。[Neo4j](http://neo4j.org/)、[OrientDB GraphDB](http://www.orientdb.org/orient-db.htm)、[Dex](http://www.sparsity-technologies.com/dex.php)、[Titan](http://thinkaurelius.github.com/titan/)、[InfiniteGraph](http://objectivity.com/products/infinitegraph/overview)等都支持它。

Tinkerpop 堆栈包括[Blueprint](https://github.com/tinkerpop/blueprints/wiki/)属性图模型接口、[Gremlin](https://github.com/tinkerpop/gremlin/wiki)图遍历语言和[Furnace](https://github.com/tinkerpop/furnace/wiki)图算法包。

*另一方面*，我们有[W3C 的 Linked Data 技术栈](http://www.w3.org/standards/semanticweb/data)，得到[AllegroGraph](http://www.franz.com/agraph/allegrograph/)、[4store](http://4store.org/)、[Oracle Database Semantic Technologies](http://www.oracle.com/technetwork/database/options/semantic-tech/index.html)、[OWLIM](http://www.ontotext.com/owlim)、[SYSTap BigData](http://www.systap.com/bigdata.htm)等的支持。

语义数据使用[RDF](http://www.w3.org/RDF/) / [RDFS](http://www.w3.org/TR/rdf-schema/) / [OWL](http://www.w3.org/TR/owl2-overview/)表示，并且可以使用[SPARQL](http://www.w3.org/2009/sparql/wiki/Main_Page)进行查询。此外，它还提供[规则](http://www.w3.org/Submission/SWRL/)和[推理](http://www.w3.org/standards/semanticweb/inference)能力。

现在，假设我想在图形数据库中表示异构数据，并分析这些数据（统计、关系发现、结构、演化等）（我知道这些术语很宽泛） -**每个的相对优势是什么各种类型的网络分析任务的模型？这两种模式是否相互补充？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T18:40:22.680

结合一些事情，您的链接数据堆栈示例都是三重存储。您将通过首先设置三重存储来开始构建链接数据应用程序，但是调用数据库链接数据堆栈是不正确的 imo。这也是三重商店的不完整列表，还有[Sesame](http://openrdf.org)、[Jena](http://jena.sourceforge.net)、[Mulgara](http://mulgara.org)和[Stardog](http://stardog.com). Sesame 和 Jena 有点双重职责，它们是语义 Web 的两个事实上的标准 Java API，但都提供与 API 捆绑在一起的三重存储。我也知道 Cray 和 IBM 都在开发三重商店，但目前我对任何一家都不太了解。我确实知道 Stardog 与 TinkerPop 堆栈配合得很好，而且它基本上是一个插入并开始针对 RDF 编写 Gremlin 查询。

我认为 RDF/OWL 的优势在于您 1) 获得真正的查询语言 2) 它们是 w3c*标准*3) 如果三重存储支持它，您可以免费（或多或少 - 您仍然拥有写一个本体）。

使用 RDF/OWL/SPARQL 作为标准，如果您需要，可以很容易地选择并迁移到具有不同功能集的新三元存储，您的数据已经采用每个人都可以理解的通用格式，并且任何应用程序逻辑都已编码因为查询是完全可移植的。在大多数情况下，您将针对 Sesame 或 Jena API 编写代码，或者使用 SPARQL 协议，因此您可能只需要更改 config/init。我认为这是早期原型设计阶段的一大胜利。

我还认为，RDF/OWL 特别结合了推理和您可以使用新的 SPARQL 1.1 创建的各种复杂 SPARQL 查询，非常适合构建复杂的分析应用程序。此外，我认为大多数人认为 RDF 三重商店无法扩展的印象不再正确。在这一点上，大多数三合一商店很容易扩展到数十亿三合一，并且具有非常有竞争力的吞吐量数字。

因此，根据我认为您可能正在做的事情，我认为 semweb 对您来说可能是一个更好的选择。几年前我做了一个类似的项目，使用 RDF 和 RDFS 作为后端，前端是一个简单的基于 Pylons 的 web 应用程序，并且对结果非常满意。

# javascript - Skype 链接到 echo123

> ID：11221199
> 
> 赞同：5
> 
> 时间：2012-06-27T07:19:01.870
> 
> 标签：javascript, hyperlink, skype

我正在尝试在 html 页面中插入一个链接，这样当您单击它时，Skype 会调用“回声测试服务”。“callto://echo123”是否适用于所有浏览器和几乎操作系统？如果没有安装Skype，我可以显示一个很好的错误吗？我读过 js 中的 skypedetection，但它从 Skype 网站上消失了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:58:40.527

你最好使用 Skype URI Scheme (Skype:echo123?call) 这适用于 windows 上的 mac，我没有 Linux 来检查它，但它应该可以在这里工作。callto:// 是许多 voip 呼叫软件使用的通用处理程序，其中 Skype uri 仅适用于 Skype 客户端。

请注意，此方案的支持仅限于移动平台。

更多信息：[https ://dev.skype.com/skype-uri](https://dev.skype.com/skype-uri)

谢谢

# wordpress - Wordpress 自定义帖子元查询

> ID：11221200
> 
> 赞同：0
> 
> 时间：2012-06-27T07:19:03.217
> 
> 标签：wordpress, meta

我正在尝试使用动态字段“comment_ID”为每个评论查询自定义帖子类型。我正在使用下面的代码。这目前显示了我不想要的评论 ID，但没有像我想要的那样显示“付费”。

```
<?php 
$commID = comment_ID();
$args = array( 'post_type' => 'paidbriefs', 'meta_key' => 'Comment_ID', 'meta_value' => 'echo $commID', 'posts_per_page' => 10 );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
    echo 'paid';
endwhile; ?>
</p> 
```

我显然在回显变量时做错了，`$commID`因为这没有显示任何内容。如果我将其更改为仅对`$commID`具有 Comment_ID 元的每条评论返回“付费”，无论它是否与实际评论 ID 匹配。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:52:35.807

我认为你需要做的是一个循环，在一个循环中，

第一个循环生成标准循环，这将在该循环中包含您的帖子信息、评论等，您需要声明您的 comment_ID；

然后从那里，您设置另一个内部循环，使用您的自定义字段的 comment_ID，

```
<?php
$args = array( 'post_type' => 'paidbriefs', 'posts_per_page' => 10 );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
   $commID = comment_ID();
   $innerargs = array( 'post_type' => 'paidbriefs', 
                       'meta_key' => 'Comment_ID', 
                       'meta_value' => $commID, 
                       'posts_per_page' => 10 );

   $innerloop = new WP_Query( $innerargs );
   while ( $innerloop ->have_posts() ) : $innerloop ->the_post();
      echo 'paid Comment';
   endwhile;

endwhile; 
?> 
```

未经测试。希望这会有所帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T07:27:46.970

```
<?php
        $args = array( 'post_type' => 'ait-dir-item',
                       'meta_query' => array(
                            array(
                                'key' => 'location',
                                'value' => 'annapolis'
                            ),
                            array(
                                'key' => 'item_tags',
                                'value' => 'non-marine'
                            )
                        ),
                        'orderby' => 'title',
                        'order' => 'ASC',
                       'posts_per_page' => 300 );
        $loop = new WP_Query( $args );
        while ( $loop->have_posts() ) : $loop->the_post();
            the_title('<h3 class="entry-title"><a href="' . get_permalink() . '" title="' . the_title_attribute( 'echo=0' ) . '" rel="bookmark">', '</a></h3>');
            echo '<div class="entry-content">';
            the_content();
            echo '</div>';
        endwhile;?> 
```

你可以试试这个

# java - 使用apache POI将数据写入java中的excel文件

> ID：11221202
> 
> 赞同：0
> 
> 时间：2012-06-27T07:19:12.593
> 
> 标签：java, apache-poi

我在使用 Apache POI 将一些数据写入 Excel 工作表时遇到问题。我想多次调用一个函数，它将数据写入我创建的 Excel 工作表中。

有什么方法可以在函数末尾每次将指针移动到下一行？？？

我的代码如下...

```
public static void excelLog(String filename , String message)
  {  

    String dest="D:\\testexcel.xls";
    HSSFWorkbook myWorkBook = new HSSFWorkbook();
    HSSFSheet mySheet = myWorkBook.createSheet();
    HSSFRow myRow = null;
    HSSFCell myCell = null;
    String excelData [][] = new String [1][2];
    excelData[0][0]=filename;
    excelData[0][1]=message;

    myRow = mySheet.createRow(rowNum);

    for (int cellNum = 0; cellNum < 2 ; cellNum++){
    myCell = myRow.createCell((short) cellNum);
    myCell.setCellValue(excelData[rowNum][cellNum]);      

    }
    rowNum++;

    try{
        FileOutputStream out = new FileOutputStream(dest);
        myWorkBook.write(out);
        out.close();
    }catch(Exception e){
        e.printStackTrace();
    }           
 } 
```

请帮助我。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:30:37.140

这是修改后的代码，因此它支持动态列大小。这个想法是创建一次行并在该行已经存在时重用它。

```
import java.io.FileOutputStream;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;

public class PoiSample {

private static String dest = "D:\\testexcel.xls";
private static HSSFWorkbook myWorkBook = new HSSFWorkbook();
private static HSSFSheet mySheet = myWorkBook.createSheet();

private static void excelLog(int row, int col, String value) {
    HSSFRow myRow = mySheet.getRow(row);

    if (myRow == null)
        myRow = mySheet.createRow(row);

    HSSFCell myCell = myRow.createCell(col);
    myCell.setCellValue(value);
}

public static void main(String[] args) {
    int numCol = 10; // assume 10 cols

    for (int i = 0; i < 10; i++) {
        for (int j = 0; j < numCol; j++) {
            excelLog(i, j, "Row : " + i + ", Cell : " + j);
        }
    }

    try {
        FileOutputStream out = new FileOutputStream(dest);
        myWorkBook.write(out);
        out.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T09:03:07.937

您的代码的问题在于每次调用`excelLog`方法时，它都会生成新的 excel 文件。我改变了你的代码如下。

```
import java.io.FileOutputStream;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;

public class PoiSample {

private static String dest = "D:\\testexcel.xls";
private static HSSFWorkbook myWorkBook = new HSSFWorkbook();
private static HSSFSheet mySheet = myWorkBook.createSheet();

public static void excelLog(String filename, String message, int rowNum) {

    HSSFRow myRow = null;
    HSSFCell myCell = null;
    String excelData[][] = new String[1][2];
    excelData[0][0] = filename;
    excelData[0][1] = message;

    myRow = mySheet.createRow(rowNum);

    for (int cellNum = 0; cellNum < 2; cellNum++) {
        myCell = myRow.createCell(cellNum);
        myCell.setCellValue(excelData[0][cellNum]);

    }

    try {
        FileOutputStream out = new FileOutputStream(dest);
        myWorkBook.write(out);
        out.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static void main(String[] args) {
    for (int i = 0; i < 10; i++)
        excelLog("filename " + i, "message " + i, i);
} 
```

}

# xcode - 编辑核心数据中的属性

> ID：11221210
> 
> 赞同：0
> 
> 时间：2012-06-27T07:19:38.283
> 
> 标签：xcode, core-data, ios5

这是我编辑特定属性并将其保存到 sqlite 数据库的代码，但我无法将更改保存到数据库。

```
-(void)changeMemberKey
{
  NSEntityDescription *entityDesc=[NSEntityDescription entityForName:@"Table1" inManagedObjectContext:context];
  NSFetchRequest *request=[[NSFetchRequest alloc] init];
  NSPredicate *predicate=[NSPredicate predicateWithFormat:@"(member_id=Null)"];
  [request setPredicate:predicate];
  [request setEntity:entityDesc];
  Table1 *matches;
  NSError *error;

  NSArray *objects=[context executeFetchRequest:request error:&error];
  NSLog(@"Object count===%d",[objects count]);
  for(int i=0;i<[objects count];i++)
  {
    matches=[objects objectAtIndex:i];
    Table1 *data=(Table1 *)matches;
    NSLog(@"Data before===%@",data);
    [data setValue:memberKey forKey:@"member_id"];
    [context save:&error];
    NSLog(@"Data after====%@",data);
    data=nil;
  }

  entityDesc=nil;
  request=nil;
  matches=nil;
  error=nil;
  objects=nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:32:25.197

尝试将`for`循环替换为

```
for(Table1 * data in objects)
  data.member_id = memberKey;

if (! [context save:&error])
  NSLog(@"Couldn't save data! Error:%@", [error description]); 
```

不确定它是否会起作用，只是尝试一下。无论如何，它更干净。

# c# - 如何使用 XMLTextWriter 在指定位置写入 XML 节点

> ID：11221211
> 
> 赞同：0
> 
> 时间：2012-06-27T07:19:45.510
> 
> 标签：c#, xml, xmltextreader, xmltextwriter

我有一个如下所示的 xml 文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<Book>
  <Title>Title</Title>
  <Content>Content</Content>
</Book> 
```

我想在“内容”之后写一个新节点，我知道如何使用 XMLDocument 来做到这一点，有没有办法使用 XMLTextWriter 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:31:33.023

您将不得不编写整个 Xml 文档，即所有元素和属性以及使用`XmlTextWriter`. 编写`<Content>`元素后，您可以编写附加元素。

像这样的东西：

```
writer.WriteStartDocument();
writer.WriteStartElement("Book");
writer.WriteStartElement("Title");
writer.WriteString("Title");
writer.WriteEndElement();
writer.WriteStartElement("Content");
writer.WriteString("Content");
writer.WriteEndElement();
// insert your new data here
writer.WriteEndElement();
writer.WriteEndDocument(); 
```

# node.js - Node.js 的类似 WAMP 的包？

> ID：11221212
> 
> 赞同：0
> 
> 时间：2012-06-27T07:19:46.943
> 
> 标签：node.js, cross-platform

我想试试 node.js 的热点，我目前是本地环境中 WAMP 的用户。然后我只是毫不费力地将更改推送到 centos 生产服务器。有没有像 node.js 的 WAMP 之类的东西，我不必担心 mysql 和其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:28:46.533

WAP 部分是节点本身，因为它具有集成的 Web 服务器。

M 部分取决于您要使用什么数据库。在您的机器（节点和数据库）上安装两个软件包时，我没有发现任何问题。

# javascript - 如何使用javascript隐藏和显示菜单？

> ID：11221215
> 
> 赞同：0
> 
> 时间：2012-06-27T07:20:20.830
> 
> 标签：javascript, html

这是一个菜单项，我只需要在 browserName='mybrowser' 时显示菜单，否则我需要隐藏菜单。请帮我如何隐藏和显示菜单？我使用 javascript 代码来检查条件。

```
<div id="ddtopmenubar" class="mattblackmenu">
        <ul>
          <li><a href="web-hosting.php" rel="ddsubmenu1">HOSTING SERVICES</a> </li>
          <li><a href="price-match.php" rel="ddsubmenu2">PRICE MATCH</a> </li>
          <li><a href="ircd-accounts.php" rel="ddsubmenu3">IRC/UNIX</a> </li>
          <li><a href="https://clients.santrex.net/knowledgebase.php" rel="ddsubmenu4">SUPPORT</a></li>
          <li id="last"><a href="ourhistory.php" rel="ddsubmenu5">ABOUT SANTREX</a></li>
        </ul>
      </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:23:10.393

隐藏菜单的代码：

```
document.getElementById('ddtopmenubar').style.display = 'none'; 
```

显示菜单的代码：

```
document.getElementById('ddtopmenubar').style.display = 'block'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:43:11.783

**见演示：http:** [//jsfiddle.net/rathoreahsan/cQPtk/2/](http://jsfiddle.net/rathoreahsan/cQPtk/2/)

**Javascript：**

```
 var mybrowser = navigator.appName;

    if (mybrowser == 'Netscape') /* Change browser name accordingly */
        { document.getElementById('ddtopmenubar').style.display = 'block' }
    else
        { document.getElementById('ddtopmenubar').style.display = 'none' } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:47:15.400

```
document.getElementById('ddtopmenubar').style.display = 'none';
document.getElementById('ddtopmenubar').style.display = 'block'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:25:26.100

检测浏览器：

```
var isOpera = !!(window.opera && window.opera.version);  // Opera 8.0+
var isFirefox = testCSS('MozBoxSizing');                 // FF 0.8+
var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
    // At least Safari 3+: "[object HTMLElementConstructor]"
var isChrome = !isSafari && testCSS('WebkitTransform');  // Chrome 1+
var isIE = /*@cc_on!@*/false || testCSS('msTransform');  // At least IE6
        if(isIE==true)//If IE, change it to any other as per need
        document.getElementById('ddtopmenubar').style.display = 'none'; 
```

除 Safari-Chrome 测试外，每个测试都完全独立于另一个测试。要以可靠的方式检测 Chrome，您必须排除 Safari，因为两者共享 webkit 前缀。但是，如果您只想知道用户是否使用 Chrome 15+，也可以使用以下方法：

```
 var isChrome = !!(window.chrome && chrome.webstore && chrome.webstore.install); 
```

在这里小提琴：http: [//jsfiddle.net/9zxvE/9/](http://jsfiddle.net/9zxvE/9/)

或者如果您不需要浏览器检测

```
if( browserName='mybrowser' )
 document.getElementById('ddtopmenubar').style.display = 'none'; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T07:27:57.067

使用 jQuery。

这是一种方法：

[http://jsfiddle.net/S8rtj/](http://jsfiddle.net/S8rtj/)

# rest - 谁能说出 SOAP 和 REST 之间的区别？

> ID：11221218
> 
> 赞同：3
> 
> 时间：2012-06-27T07:20:39.803
> 
> 标签：rest, soap

我有 Web 服务 URL、登录名和密码，但我不明白这是 SOAP 还是 REST 服务。

我知道 SOAP 是一种协议，而 REST 只是一种架构，但我无法理解它们之间的机制之间的区别。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:46:49.943

SOAP 是一组用于 Web 服务协议的[W3C 规范。](http://www.w3.org/TR/soap/)简单来说，这些协议定义了一个用于提供和使用 Web 服务的 XML“包装器”。

REST 是一种不同的概念（如您所述）；[维基百科](http://en.wikipedia.org/wiki/Representational_state_transfer)将其定义为“分布式系统架构”；对于 Web 开发人员来说，这是一种配置 URI 方案以检索和更新资源的便捷方式。*到server/customers/1*的HTTP GET获取有关客户 1 的信息，而对同一 URI 的 HTTP PUT 更新该客户。

用通俗的话来说，REST 是一种轻量级的 SOAP 替代方案。也许您不需要 SOAP 提供的所有标头、安全性和模式；或者，您可能正在对带宽敏感的区域（例如移动网络）工作，而您不希望所有这些开销。REST 是一种替代范式的简写方式，并且倾向于与 JSON 和 AJAX 等其他技术混为一谈，即使它们在技术上并不相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-19T11:43:42.760

```
SOAP 与 REST

SOAP 是一种协议。
REST 是一种架构风格。

SOAP 代表简单对象访问协议。  
REST 代表代表性状态转移。

SOAP 不能使用 REST，因为它是一种协议。   
REST 可以使用 SOAP Web 服务，因为它是一个概念，可以使用任何协议，例如 HTTP、SOAP。

SOAP 使用服务接口来公开业务逻辑。
REST 使用 URI 来公开业务逻辑。

SOAP 定义了要严格遵循的标准。
REST 没有像 SOAP 那样定义太多的标准。

SOAP 定义了自己的安全性。  
RESTful Web 服务从底层传输继承安全措施。

SOAP 只允许 XML 数据格式。  
REST 允许不同的数据格式，例如纯文本、HTML、XML、JSON 等。

```

# c# - Linq to find the length of the value of the column in the list

> ID：11221219
> 
> 赞同：-5
> 
> 时间：2012-06-27T07:20:47.683
> 
> 标签：c#, linq

I have a list and a column; the column might have many values, and each value's length may vary.

If the length exceeds 100, I want to append /n at the end of it.

Need your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:50:15.933

I give it a try, though a lot of questions are open (what type of list, what a column, ...).

In short: you can use **[`String.Insert`](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)** to insert text at a specified postition.

Assuming you have a `List<Foo>`, the class `Foo` has a `string` property `Value` (your column). If it's `Length` exceeds 100 the line should be wrapped:

```
foreach(Foo foo in foos)
{
    if(foo.Value.Length > 100)
        foo.Value = foo.Value.Insert(100, Environment.NewLine);
} 
```

[http://msdn.microsoft.com/en-us/library/system.string.insert.aspx](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)

Here's running code with sample data.

[http://ideone.com/sUKLk](http://ideone.com/sUKLk)

# mysql - 不同的mysql查询组合

> ID：11221223
> 
> 赞同：2
> 
> 时间：2012-06-27T07:20:56.357
> 
> 标签：mysql

```
select m.*, c.NAME as CORP_NAME 
from MAIL_LOG as m, CORP as c 
where m.SEND_DATE >= '$term_from' and m.SEND_DATE <= '$term_end' "; 
```

和

```
Select DISTINCT `TO_NAME_F_KANA` from MAIL_LOG group by m.SEND_DATE; 
```

`TO_NAME_F_KANA`我喜欢使用as 参考从第一个查询中获取唯一值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:26:09.573

以下查询应该可以解决问题

```
Select DISTINCT t.`TO_NAME_F_KANA` from 
     (
     select m.*, c.NAME as CORP_NAME 
     from MAIL_LOG as m, CORP as c 
      where 
           m.SEND_DATE >= '$term_from'
                  and
           m.SEND_DATE <= '$term_end'
     ) t
group by t.SEND_DATE; 
```

# javascript - 在类似事件中获取 Facebook 页面名称

> ID：11221225
> 
> 赞同：0
> 
> 时间：2012-06-27T07:20:59.690
> 
> 标签：javascript, facebook, facebook-javascript-sdk, dom-events, facebook-like

我在一页中有多个 Facebook 类似框。

假设，我有两次潜水，其中包含

```
<div class="some">
Facebook like widget,
<input name="test_1" value="1" />
</div>

<div class="some">
Facebook like widget,
<input name="test_2" value="2" />
</div> 
```

因此，当用户喜欢其中一个页面时，我可以使用`FB.event`.

**问题是当发生类似页面的事件时，我想得到相应的`input:value`**

例如用户喜欢我想要的第一个按钮：

> test_1 值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:34:28.633

所以我像这样为我的输入元素分配一个id

```
<input id="test_<?= $fb_id;?>" value="1" /> 
```

然后在`FB.Event.subscribe('edge.create', function(href, response) {`

我像这样访问元素

```
var r = href.split('/');
document.getElementById("test_"+r[3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:06:12.913

如果您捕获了 like 事件，则响应包含喜欢的 URL。

您应该能够以这种方式获得所需的信息。

# java - 使用 Java 或 iText 生成两个完全相同的 PDF

> ID：11221226
> 
> 赞同：0
> 
> 时间：2012-06-27T07:21:06.403
> 
> 标签：java, pdf-generation, itext

我通过使用此[示例](http://www.vogella.com/articles/JavaPDF/article.html)（FirstPDF）删除了“new Date()”语句生成了两个 PDF。

它们看起来相等，但是在对它们计算 md5 哈希时，它们确实不同。

我已经检查了它们并且它们注册了一个`creationDate`，即使该句子`document.addCreationDate()`不包含在源代码中。

问题非常简单：是否可以通过任何 API 以任何方式生成两个字节对字节完全相同的 PDF？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:36:41.180

> 这是应该的。除了元数据中的日期外，每次从头开始生成 PDF 时，还会添加一个唯一 ID。

[从](http://itext-general.2136553.n4.nabble.com/Itext-question-about-hash-calculation-from-plain-PDF-files-without-digital-signatures-td2541520.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T08:18:40.673

[如此处](https://stackoverflow.com/questions/20039691/reason-why-pdf-files-have-differences/20043028#20043028)所述，文件不相等，因为它们具有不同的标识符（在不同时刻创建的两个文件应具有 PDF 规范中定义的不同 ID）。

文件标识符通常是根据日期、路径名、文件大小、PDF 文件的部分内容（例如信息字典中的条目）创建的散列。
.
文件标识符涉及（并且是强制性的）文档加密。因此，具有不同文件标识符的加密 PDF 文件将具有完全不同的流。

按照设计，您永远不能使用相同的代码创建两个相同的 PDF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T16:12:08.247

如果您需要两个相同的文件给您相同的 MD5 哈希，为什么不***复制***一个已经创建的文件呢？

如果您需要通过两个单独的 API 调用创建两个相同的文件，那么您可以使用*任何*物有所值的 PDF 创建 API：

*   因为这些 API 中的每一个都包含一个调用，以将输出 PDF 的创建和修改日期设置为您需要的任何值......只是不要让这个设置自动发生！使用相同的设置两次。
*   注意力！PDF 还支持文档 UUID 的设置。其中一些 API 还会为每个新文档设置任意 UUID（这会破坏您的 MD5 哈希），除非您主动阻止这种情况发生。

# entity-framework-4 - Code First 和 Model First 在同一个项目中？

> ID：11221229
> 
> 赞同：2
> 
> 时间：2012-06-27T07:21:10.380
> 
> 标签：entity-framework-4, ef-code-first

我有两个正在访问的数据库。第一个是针对我使用 EF Model First 连接到的联系人数据库；创建 edmx。从那以后，我在使用实体框架时开始学习 CODE First 的优点，所以我决定在同一个项目中使用 Code First 技术编写 Product 数据库，允许从我正在编写的代码生成数据库。

一切都编译得很好。当我点击我的线束并尝试创建产品数据库并从其中一个表中检索值列表时，就会出现问题......

当我尝试枚举 ProductLines 属性（下面的 Line3）时，出现以下错误“*找不到 'Core.Data.Account' 的概念模型类型” 。*

```
1\.    using (var ctx = new ProductDb())
2\.    {
3\.        var lines = ctx.ProductLines.ToList();
4\.        this.litOne.Text = lines.Count.ToString();
5\.    } 
```

经过一些研究，似乎此消息可能是由于多个具有相同名称的实体（无论名称空间如何）而出现的，但是 ProductDb 上下文中没有任何名称为“Account”的实体。

在 OTHER 上下文中有一个由 Model First 方法创建的名为“Account”的类。但是如何/为什么会有所作为？它们各自指向不同的数据库，即不同的连接字符串。为什么 ProductDb 会尝试创建一个名为 Account 的表，而它应该完全不知道它的存在？

想法？

一如既往地谢谢你！，-G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:11:48.917

我遇到了同样的问题，但反过来：首先是一个 DbContext + 生成的数据库，然后从数据库中生成一个 edmx（只是为了做一点介绍）。这似乎是 EF 中的一个限制：[EF 当前有一个限制，即不能从包含具有 EF 属性的类的程序集中加载 POCO 类](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/b87815ff-6569-4559-8268-7ae6433b8aa8)。

您现在唯一能做的就是将上下文保存在单独的程序集中。

# google-maps - 在谷歌地图中从纬度经度创建折线？

> ID：11221234
> 
> 赞同：0
> 
> 时间：2012-06-27T07:21:43.780
> 
> 标签：google-maps, google-maps-api-3

我正在尝试从谷歌地图 v3 api 创建一条折线。我知道如何在点击时添加折线，但我想从纬度和经度值创建折线，这将在循环中。我怎样才能做到这一点 ？

```
 var network_url = decodeURIComponent(document.URL);
    //var network_url = " http://testNetwork.com?param[]=(12.983147333223707, 77.49687217431642)&param[]=(12.95035965289418, 77.54871391015627)";

    var location_array = split_url(network_url);
    for(var i = 0; i<location_array.length; i++)
    {

         //(12.960062579720846,%2077.48313926416017)
        var loc = location_array[i] ; //==>(12.77,  24.87)

        var split_arr1 = loc.split("(");
        var result_split_arr1 = split_arr1[1].split( ")" );

        var split_latLon = result_split_arr1[0];
        var result_split = split_latLon.split(",");

        var split_lat = result_split[0];
        var split_lon = result_split[1];

        marker = new google.maps.Marker({
        position: new google.maps.LatLng(split_lat, split_lon),
        map: map
        });

        ///////////POLYLINE DRAWing /////////////////////////////

        /////////////END OF POLYLINE ////////////////////

     }

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:14:56.070

查看折线的文档。它需要一个 LatLng 的数组。

循环遍历您的和点，将它们放入数组中，然后通过构造函数或 .setPath() 将它们传递给折线。

[https://developers.google.com/maps/documentation/javascript/reference#Polyline](https://developers.google.com/maps/documentation/javascript/reference#Polyline)

编辑：示例。（我没有运行它）。

```
 var location_array = split_url(network_url);
    var path = [];
    for(var i = 0; i<location_array.length; i++)
    {

         //(12.960062579720846,%2077.48313926416017)
        var loc = location_array[i] ; //==>(12.77,  24.87)

        var split_arr1 = loc.split("(");
        var result_split_arr1 = split_arr1[1].split( ")" );

        var split_latLon = result_split_arr1[0];
        var result_split = split_latLon.split(",");

        var split_lat = result_split[0];
        var split_lon = result_split[1];
        var latLng = new google.maps.LatLng(split_lat, split_lon);
        path.push(latLng)
        marker = new google.maps.Marker({
        position: latLng,
        map: map
        });

     }

    var flightPath = new google.maps.Polyline({
       path: path,
       strokeColor: "#FF0000",
       strokeOpacity: 1.0,
       strokeWeight: 2,
       map: map
    });

} 
```

# c# - 在 Azure 辅助角色中使用 Lucene.NET 引发未处理的异常

> ID：11221235
> 
> 赞同：1
> 
> 时间：2012-06-27T07:21:47.960
> 
> 标签：c#, asp.net, azure, lucene.net, azure-worker-roles

我正在尝试创建一个 Azure 辅助角色来索引 Lucene.NET 中的文档。

但是，当我创建一个 时`IndexWriter`，它会失败并出现以下异常：

```
System.ExecutionEngineException was unhandled
Message: An unhandled exception of type 'System.ExecutionEngineException'
         occurred in mscorlib.dll 
```

如果我将项目构建为`.exe`，则一切正常 - 不会引发异常。我正在使用 .NET Framework 4.0。

我的代码：

```
var cloudAccount = CloudStorageAccount.FromConfigurationSetting("LuceneBlobStorage");
var cacheDirectory = new RAMDirectory();
var azureDirectory = new AzureDirectory(
                                cloudAccount,"SnowballIndex", cacheDirectory);
var analyzer = new SnowballAnalyzer("English");

// !-- Exception thrown after this call
this.indexWriter = new IndexWriter(
             azureDirectory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED); 
```

任何想法，将不胜感激。我在网上搜索，一无所获。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:57:05.997

鉴于 blob 容器名称应为小写[http://msdn.microsoft.com/en-us/library/windowsazure/dd135715.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135715.aspx)。

尝试将目录/索引名称从“SnowballIndex”更改为“snowball-index”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T06:23:12.853

我刚刚用我的工人角色用确切的代码进行了测试（只是使用标准分析器并且工人角色 DLL 是没有任何问题创建的。如果这可能是使用自定义分析器的问题，请您尝试隔离一下吗？也碰巧，你有.net 4.5 安装在同一台机器上？

如果你能提供你的工人角色项目，我很想看看，看看可能有什么问题。

**2012 年 6 月 28 日已编辑**

在我的基于 SDK 1.6 的辅助角色中，我只安装了**Lucene.Net.Store.Azure**包，然后在 OnStart() 函数中添加了以下代码，并且没有错误：

```
StorageCredentialsAccountAndKey creds = new StorageCredentialsAccountAndKey(_azure_storage_name_, _azure_storage_key);
CloudStorageAccount cloudAccount = new CloudStorageAccount(creds, true);
Lucene.Net.Util.Version version = Lucene.Net.Util.Version.LUCENE_29;
var cacheDirectory = new RAMDirectory();
IndexWriter indexWriter = null;
AzureDirectory azureDirectory = new AzureDirectory(cloudAccount, "SnowballIndex", cacheDirectory);
Analyzer analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29);
indexWriter = new IndexWriter(azureDirectory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED); 
```

我认为您的问题可能是特定于机器的，因为没有错误并且工作人员角色运行良好。

# c# - 为什么我的应用程序如此等待同步？

> ID：11221236
> 
> 赞同：9
> 
> 时间：2012-06-27T07:21:58.087
> 
> 标签：c#, .net, wcf, sql-server-2008, concurrency

我正在进行一项性能测试，其中涉及多个客户端以尽可能快的速度轰炸服务器，每个客户端发出 150 个请求。

服务器由 3 个 WCF 服务构成，其中一个通过 httpbinding 对外开放，它通过 net.pipe (IPC) 与其他 2 个服务通信。其中一项服务负责数据库连接（SQL server 2008 R2）。

此数据库连接服务使用以下连接字符串增强功能：

```
Min Pool Size=20; Max Pool Size=1000; Connection Timeout=20; 
```

并且受到 WCF 限制（与所有其他 WCF 服务一样）。

我注意到当我激活 1 个客户端时可能需要 3 秒，但是当我激活 3 个客户端时可能需要 8-9 或更多。

我使用 SQL 服务器分析器检查了使用了多少并发进程，我看到只有大约 8 个进程正在使用。

所以我意识到在服务器的某个地方，请求被排队而不是同时处理。

为了深入了解它，我使用了性能分析器（确切地说是 ANTS），它告诉我大约 70% 的时间浪费在**“等待同步”上**

当我打开调用图时，我发现有两件事看起来很奇怪，但我不确定它们的含义：

1.  System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke 正在树的顶部使用，这可以用于并发处理吗？
2.  所有同步问题都涉及某种 SQL Server 活动，例如 ExecuteNonQuery、ExecuteReader 等（当我到达调用树的底部时）

我注意到数据库连接服务使用了一个完全静态的 DAL 项目（不幸的是一些遗留代码）。

读完后[我](https://stackoverflow.com/questions/3037637/c-sharp-what-if-a-static-method-is-called-from-multiple-threads)不确定 DAL 的代码是否有问题，这里是一个存储过程调用的示例。

```
 public static int PerformStoredProcedure(string storedP,string ext,out string msg)
    {
        msg = "";
        SqlCommand command = GetSqlCommand(storedP,ext);
        command.Connection.Open();
        int result = (int)PerformStoredProcedure(command,out msg);
        command.Connection.Close();
        return result;
    } 
```

此方法通常从数据库连接服务调用：

```
 public static int PerformStoredProcedureWithParams(string storedP,string ext,out string msg, params object[] pars)
    {
        msg = "";
        SqlCommand command = GetSqlCommand(storedP,ext);
        UpdateCommandParams(command, pars);
        command.Connection.Open();
        int result = (int)PerformStoredProcedure(command,out msg);
        command.Connection.Close();
        return result;
    } 
```

那么，这里有什么问题吗？

或者也许我应该看看别的地方？

**编辑：**

在 Brijesh 发表评论后，我意识到我没有更改 WCF 服务的默认 InstanceContextMode 和 ConcurrencyMode ......我猜这是初学者的错误。

我仍然不确定我应该使用 PerSession/Multiple 还是 PerCall/Single。正如我所看到的，无论客户端如何，每个服务都应该将每个请求作为对象处理。

我应该使用什么？

**第二次编辑：**

使用 PerCall 和 PerSession/Multiple 后，我注意到仍然没有变化（至少在 DB 服务中）。我看到的是主入口点服务可能会打开很多线程，但在 DB 连接服务上只打开了几个（仍然是大约 8-10 个线程）。

还有其他原因导致这种情况发生吗？我排除了 DAL 是一个问题，因为数据库服务中没有足够的请求，所以我认为它在服务中的某些东西或客户端中的某些东西......

**第三次编辑：**

以下是配置文件：

经理的配置 wcf 服务部分：

```
<services>
  <service behaviorConfiguration="ServicesBehavior" name="Verifone.GenericPP.GPPManagerService.GPPManagerServiceImpl">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:9090/GPPManagerService/"/>
      </baseAddresses>
    </host>
    <endpoint contract="Verifone.GenericPP.GPPManagerService.IGPPManagerService"  binding="basicHttpBinding" address="GPPManagerService"></endpoint>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServicesBehavior">
      <!--amith 13-05-2012-->
      <serviceThrottling
        maxConcurrentCalls="1000"
        maxConcurrentSessions="1000"
        maxConcurrentInstances="1000"
      />
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpBinding" maxBufferSize="10000000" maxReceivedMessageSize="10000000">
      <readerQuotas maxStringContentLength="10000000" maxArrayLength="10000000"/>
      <security mode="None">
        <transport clientCredentialType="None"/>
      </security>
    </binding> 
```

经理的客户：

```
 <endpoint name="endpoint1" contract="IDBConnectionContract"  bindingConfiguration="basicHttpBinding"  binding="basicHttpBinding" address="http://localhost:9010/DBConnectionService/DBService"></endpoint>
  <endpoint name="endpoint2" contract="IGPPService"  bindingConfiguration="basicHttpBinding"  binding="basicHttpBinding" address="http://localhost:9095/GenericPPService/GenericPPService"></endpoint> 
```

数据库连接服务：

```
<service behaviorConfiguration="ServicesBehavior" name="Verifone.DBConnectionService.DBConnectionContracImpl">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:9010/DBConnectionService/"/>
        <add baseAddress="net.pipe://localhost/DBConnectionService/"/>
      </baseAddresses>
    </host>
    <endpoint contract="Verifone.DBConnectionService.IDBConnectionContract"  binding="basicHttpBinding" address="DBService"></endpoint>

    <endpoint contract="Verifone.DBConnectionService.IDBConnectionContract"  binding="netNamedPipeBinding"  bindingConfiguration="NetNamedPipeBinding_Configuration"  address="" name="pipeEndpoint"/>
  </service> 
```

业务逻辑服务的客户端与 Manager 的客户端几乎相同。

所有服务都是自托管的，我在经理和业务代码中有一个 DBConnectionProxy 类，它们像这样激活：

```
 DBConnectionContractClient _dbConnectionContractClient = null;
        try
        {
            objDBConnectionContractClient = new DBConnectionContractClient();
            objDBConnectionContractClient.ExecuteStoredProcedure(input, out result);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:17:58.087

PerCall 您可以在这些情况下考虑这种实例化模式。

*   如果您的服务是无状态的

*   如果您的服务具有轻量级初始化代码（或根本没有
    ）。

*   如果您的服务是单线程的。

一些不错的教程。请参阅有关调整的第三个链接。

[WCF 实例化、并发和限制——第 1 部分](http://blogs.msdn.com/b/rickrain/archive/2009/06/15/wcf-instancing-concurrency-and-throttling-part-1.aspx)

[WCF 实例化、并发和限制——第 2 部分](http://blogs.msdn.com/b/rickrain/archive/2009/06/17/wcf-instancing-concurrency-and-throttling-part-2.aspx)

[WCF 实例化、并发和限制——第 3 部分](http://blogs.msdn.com/b/rickrain/archive/2009/06/26/wcf-instancing-concurrency-and-throttling-part-3.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:18:26.383

宁愿每次通话。如果您想要最小化初始化资源密集型对象或为每个请求运行一些预处理路由或想要维护状态，会话将很有用。会话可以为您提供更好的性能，但每次调用总是可以更好地扩展。在每次通话中，您不必担心并发性。而 persession/multiple 的缺点是您必须始终考虑代码中的线程安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:11:17.060

如果您不关心服务状态并且在初始化时没有完成繁重的工作，那么最好的选择是每次调用，我认为这描述了您的情况。尝试删除那些 DAL 调用，看看你的服务是如何运行的，这样你就可以确定这是否是你的瓶颈。

# c# - 然而，另一个“查询'GetUsers'的加载操作失败”异常

> ID：11221237
> 
> 赞同：0
> 
> 时间：2012-06-27T07:21:58.640
> 
> 标签：c#, silverlight, deployment, wcf-ria-services

最近我正在部署 Silverlight RIA 应用程序。应用程序在测试机器上运行良好，当我将它移到生产服务器时出现问题。应用程序使用 Windows 身份验证。基本上我复制了测试机的环境 IIS 设置，然后复制了整个应用程序文件夹并修改了 web 配置。下面我列出了我遇到的问题和症状：

*   当我尝试从 PRODUCTION 服务器登录应用程序时，会出现登录框。显然服务器适用于 Windows 域。我**无法**使用我的域凭据登录。

*   当我尝试从外部机器登录应用程序时，还会出现日志框，但这次我**可以**使用我的凭据登录。出现提到的异常 ( `System.ServiceModel.DomainServices.Client.DomainOperationException`)。这很奇怪，因为在测试服务器中我从来不需要传递我的 Windows 域凭据。

我使用提琴手检查 AuthenticationService.svc 调用的服务器响应：

```
@Fault5http://schemas.microsoft.com/ws/2005/05/envelope/none@Code@Value�Sender@Reason@Textxmllang�pl-PL@Detail@DomainServiceFaultDomainServices i)http://www.w3.org/2001/XMLSchema-instance@    ErrorCode��@ErrorMessage.nil�@IsDomainException� 
```

此外，我还向应用程序添加了跟踪：

```
 <source name="LANOS.Web.AuthenticationContext"
            switchValue="Information, ActivityTracing"
            propagateActivity="true">
            <listeners>
                <add name="xml" />
            </listeners>
        </source>
        <source name="System.ServiceModel"
                switchValue="Information, ActivityTracing"
                propagateActivity="true" >
            <listeners>
                <add name="xml"/>
            </listeners>
        </source>
        <source name="LANOS.Web"
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
            <listeners>
                <add name="xml" />
            </listeners>
        </source>
    </sources> 
```

[*.svclog 可在此处获得。](http://pastebin.pl/03182f20a3fc8ddb5de6a9ae34be03cc)

我知道谷歌有很多答案。然而，这个例外是相当普遍的，我还没有发现类似的问题。我已经尝试根据网络中的不同解决方案处理 DLL 并修改网络配置。没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:12:15.983

我设法找到了解决这个问题的方法。 [http://support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861) 方法 2。

# jenkins - “Jenkins URL”在配置设置中是什么意思？

> ID：11221238
> 
> 赞同：29
> 
> 时间：2012-06-27T07:21:58.633
> 
> 标签：jenkins

在“Jenkins URL”部分的 Jenkins 配置页面上，我将此选项设置为“ [http://name_of_my_machine.jenkins:8080/](http://name_of_my_machine.jenkins:8080/) ”通常我通过以下方式打开 jenkins：“ [http://localhost:8080/](http://localhost:8080/) ”但是这个新选项确实不适合我 - 詹金斯没有打开。那么这是什么意思呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T08:26:55.660

Jenkins 无法自行确定其 URL。因此，当它需要创建完整的链接时，就是 URL 的来源。通常，即使您指定了错误的 URL，它也不应该以任何重要的方式影响 Jenkins 的工作方式。它当然不会影响您在浏览器中输入以连接到 Jenkins 服务器的 URL。您可以指定`http://localhost:8080`（从您的机器连接并假设您在端口 8080 上启动 Jenkins）或`http://<machine_hostname>:8080`从任何地方连接时。

因此，无论您指定什么，它都不会影响连接到 Jenkins，因此`http://name_of_my_machine.jenkins:8080/`不会起作用，因为`.jenkins`它不是名称的一部分（例如`ping name_of_my_machine.jenkins`，不会找到主机）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T20:57:40.120

每当 Jenkins 需要创建一个指向自身的 URL 时，Jenkins 都会从全局配置中的“Jenkins URL”设置中选择它。

Jenkins 可以尝试通过获取主机名并将其与运行它的端口相结合来猜测 URL。但有时主机名与 DNS 名称不同。如果您在 Jenkins 之前放置了一个前端或代理，例如终止 SSL 连接，并且您真的希望人们在[https://company.com/jenkins/](https://company.com/jenkins/)上使用 Jenkins，该怎么办。运行在 8080 端口的 Jenkins 无法了解前端。Jenkins 获取自身 URL 的唯一可靠方法是管理员在 Jenkins 配置中设置它。

Jenkins 在创建指向自身的链接时需要知道自己的 URL。例如，当它发送包含构建结果的直接链接的电子邮件时，它会这样做。此外，如果您有 JNLP 类型的从站，从站会启动与主站的连接，并且主站会返回一条消息，其中包含返回 Jenkins 的链接，用于下载从站代理软件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T07:35:52.613

您是指电子邮件配置部分中的选项吗？这只是为了在 Jenkins 发送的电子邮件中生成链接（请参阅选项帮助 - 单击带有问号的符号）。如果更改后您无法再访问您的服务器，则它必须是别的东西。

# wpf - 将 UserControl 中元素的 ItemSource 绑定到父 ViewModel 中的项目

> ID：11221239
> 
> 赞同：1
> 
> 时间：2012-06-27T07:22:02.177
> 
> 标签：wpf, mvvm, binding, user-controls, itemssource

抱歉，我正在纠结于同时学习 MVVM、WPF 和 XAML。

我有一个我创建的问题，我完全不知道应该如何在 MVVM 中处理这个问题。

我所拥有的是一个父窗口，其中包含一个绘制图形的用户控件。图形绘制 XAML 曾经是父窗口的一部分，但由于父窗口非常大，我将其移至用户控件以进行组织。

在父窗口 XAML 我有.....

```
<Window ....>
     <Window.Resources>
         <ViewModel:DropGraphViewModel x:Key="myViewModel"/>
     </Window.Resources>

     <!-- Set the data context to the view model. -->
     <Window.DataContext>
         <Binding Source="{StaticResource myViewModel}"/>
     </Window.DataContext>
     .....
</Window> 
```

然后在新的用户控件 XAML 类中，我创建了一个资源，它是一个“生成器”类，它提供将由图的某些部分使用的东西。看起来像这样...

```
<UserControl ......
    <!-- Graph resources -->
        <Grid.Resources>
            <!-- The binding here for ItemsSource represents the collection the graph will be bound to -->

            <!-- THIS LINE DOESN'T WORK ANYMORE  -->
            <Graphs:LineChartGenerator x:Key="generator" ItemsSource="{Binding Source={StaticResource myViewModel}, Path=SampleData}" Width="500"  Height="200"> -->
        </Grid.Resources> 
```

然后当我想做一些事情时，比如绘制图形线，我曾经通过绑定来引用生成器。

```
 <!-- Connect the points -->
    <Polyline Points="{Binding Source={StaticResource generator}, Path=Points}" Stroke="Blue" /> 
```

现在我正在使用嵌套用户控件的问题是，当我在资源中创建“生成器”类的实例时，我无法传入**ItemsSource="{Binding Source={ StaticResource myViewModel}, Path=SampleData}"**因为我不再有权访问父窗口的静态资源中的视图模型（myViewModel）！所以我不能像以前那样在资源创建期间设置绑定。

**处理这种模式的正确 MVVM 方法是什么？**

如何将 ItemsSource 注入到我的新用户控件中，以便它可以在创建 LineChartGenerator 类实例时将其传入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:04:33.757

1.  `DataContext`是可继承的`DependencyProperty`，这意味着它会向下渗透视觉层次结构。
2.  资源在托管之前不是可视化树的一部分。

因此，在您的情况下，您`Graphs:LineChartGenerator`必须托管在您`UserControl`的资源部分中，而不是在资源部分中删除。一旦你这样做，它就会`DataContext`从 parent获取它自己的`Window`，就像@GazTheDestroyer，指出你只需要一个隐式绑定`ItemsSource="{Binding SampleData}"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:55:53.513

由于您将 ViewModel 设置`DataContext`为外部的`Window`，它也将`DataContext`是您的`UserControl`，因此您应该能够通过简单的方式访问它：

```
<Graphs:LineChartGenerator x:Key="generator" ItemsSource="{Binding SampleData}" Width="500"  Height="200"> 
```

# c++ - 这是一个复制构造函数吗？

> ID：11221242
> 
> 赞同：3
> 
> 时间：2012-06-27T07:22:11.983
> 
> 标签：c++

```
class A {};
class B { public: B (A a) {} };

A a;
B b=a; 
```

从技术上讲，复制构造函数是否在此处应用于创建`b`?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T07:28:09.707

是的，理论上。这是*复制初始化*。首先`B`从初始化器 ( ) 构造一个临时实例`a`，然后`b`通过复制构造函数从这个临时实例初始化。

但是，编译器被允许并且经常这样做，省略临时和复制构造，并`b`直接`a`使用构造函数进行`B(A)`构造。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T07:27:25.953

> 从技术上讲，这里是否在创建 b 时应用了复制构造函数？

是的……但可能不是你想的那样。 `A`的复制构造函数在创建 b 时被调用，以便将参数的值传递`A a`作为 B 构造函数的参数。

~~*但是*，它并没有在创建 b 时运行 B 的复制构造函数。~~

* * *

**编辑：**一个人每天都会学到新东西。显然，从技术上讲，正如@CharlesBailey 指出的那样……如果您使用`B b = a;`语法（“复制初始化”）而不是语法（“直接初始化”），则*可能*需要创建`B b (a);`B 类型的临时值。此时 B 的复制构造函数将被调用。

 *研究这种现象有点困难，但 Charles 指出 gcc 有一个`-fno-elide-constructors`选项（也：[Wikipedia on Copy Elision](http://en.wikipedia.org/wiki/Copy_elision)）@JesseGood 的链接有详尽的解释和一些演示代码：

[复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T07:23:25.367

不，复制构造函数引用同类型的对象。

**C++03 12.1 构造函数**

> 1.  类 X的*复制构造函数*`X&`是第一个参数类型为or的构造函数`const X&`。

编辑：好的，公平地说（在阅读其他答案之后），正在调用复制构造函数，但它*是*`A`复制构造函数。我以为你的意思是`B`'s。

EDIT2：为了公平起见，根本没有必要调用它：

```
A a;
B b = a;   //called
B c = A(); //probably not called due to copy elision 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:28:38.617

不，它**不是**复制构造函数。

如果您通过使用**相同类的对象来****初始化**对象来创建对象，那就是复制构造函数。

 **```
A a;
A b=a; 
```

上面的代码是复制构造函数。***

# ruby-on-rails - Rails 中大量 CSV 导出的内存问题

> ID：11221249
> 
> 赞同：3
> 
> 时间：2012-06-27T07:22:47.383
> 
> 标签：ruby-on-rails, fastercsv

我正在尝试将大量数据从数据库导出到 csv 文件，但这需要很长时间，并且担心我会遇到严重的内存问题。

有谁知道在不增加内存的情况下导出 CSV 的更好方法？如果是这样，你能告诉我怎么做吗？谢谢。

这是我的控制器：

```
def users_export
  File.new("users_export.csv", "w")           # creates new file to write to
  @todays_date = Time.now.strftime("%m-%d-%Y")
  @outfile = @todays_date + ".csv"

  @users = User.select('id, login, email, last_login, created_at, updated_at')

  FasterCSV.open("users_export.csv", "w+") do |csv|
    csv << [ @todays_date ]

    csv << [ "id","login","email","last_login", "created_at", "updated_at" ]
    @users.find_each do |u|
      csv << [ u.id, u.login, u.email, u.last_login, u.created_at, u.updated_at ]
    end
  end

  send_file "users_export.csv",
    :type => 'text/csv; charset=iso-8859-1; header=present',
    :disposition => "attachment; filename=#{@outfile}"
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:46:19.927

您正在构建一个巨大的字符串，因此您必须将整个 csv 文件保存在内存中。您还将加载所有用户，这些用户也将占用大量内存。如果您只有几百或几千个用户，这不会有任何区别，但在某些时候您可能需要做两件事

利用

```
User.find_each do |user|
  csv << [...]
end 
```

这会分批加载用户（默认为 1000 个），而不是全部加载。

您还应该考虑将 csv 写入文件，而不是在内存中缓冲整个内容。假设您已经创建了一个临时文件，

```
FasterCSV.open('/path/to/file','w') do |csv|
  ...
end 
```

会将您的 csv 写入文件。然后，您可以使用`send_file`发送它。如果您已经打开了文件，`FasterCSV.new(io)`也应该可以使用。

最后，在 Rails 3.1 及更高版本上，您可能可以在创建 csv 文件时对其进行流式传输，但这不是我之前尝试过的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:53:41.053

除了生成 csv 的技巧之外，一定要优化对数据库的调用。仅选择您需要的列。

```
@users = User.select('id, login, email, last_login, created_at, updated_at').order('login')
@users.find_each do |user|
   ...
end 
```

例如，如果您有 1000 个用户，并且每个用户都有密码、password_salt、城市、国家/地区……那么从数据库中传输的对象会少 1000 个，创建为 ruby​​ 对象，最后被垃圾收集。

# ios - iOS 旋转手机崩溃

> ID：11221252
> 
> 赞同：1
> 
> 时间：2012-06-27T07:23:05.093
> 
> 标签：ios, xcode

我只支持纵向 ATM，旋转设备时出现以下错误：

```
[__NSCFData setProperRotation]: unrecognized selector sent to instance 0x2dc890
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFData setProperRotation]: unrecognized selector sent to instance 0x2dc890' 
```

这是在iOS5.1 中。最初我只是保留了默认的 Portrait 子句，但将其更改为：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if (interfaceOrientation == UIInterfaceOrientationPortrait) { // Or whatever orientation it will be presented in.
        return YES;
    }
    return NO;
} 
```

我正在使用 ARC 顺便说一句。

希望这将有助于阻止崩溃。我的 info.plist 有纵向和纵向颠倒。除了我的主视图有多个 ViewController 并将其设置为：

```
self.wantsFullScreenLayout=YES; 
```

有什么想法吗？提前致谢。

我的项目从 appdelegate 添加主视图，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
mainViewController=[[MainViewController alloc] init];

[self.window addSubview:mainViewController.view]; 
```

我在那个 mainViewController 上有 2 个 ViewController，我使用 Navigation 控制器来推送几个 ViewController：

```
- (void) loadActionsView {

NSArray* views = [self.navigationController viewControllers];

if ([views containsObject: actionsPanelViewController])
{
    [self.navigationController popToViewController:actionsPanelViewController animated:YES];
} else {

    [self.navigationController pushViewController:actionsPanelViewController animated:YES];
}

[[StateModel stateModel] setCurrentScreenIndex:0]; 
```

}

这是第一个称为 btw 的视图。

**找到解决方案/问题的更新 2：**

我正在使用 SHK 的 SHKActivityIndi​​cator 的一部分，它有一个通知正在捕获屏幕旋转及其导致问题的选择器：

```
[[NSNotificationCenter defaultCenter] addObserver:currentIndicator selector:@selector(setProperRotation) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:28:44.317

听起来您的 ViewController 已释放，另一个 Object 收到 setProperRotation 消息。检查您的 ViewController 是否还活着。

```
mainViewController=[[MainViewController alloc] init];
[self.window addSubview:mainViewController.view]; 
```

这就是问题所在。您只添加视图。ARC 认为您不再需要 MainViewController。

*   将 MainViewController 设为 Class 变量或
*   设置 window.rootViewController

    ```
    self.window.rootViewController = mainViewController; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:30:30.853

该异常表明您可能过度释放了一个应该响应的对象`-setProperRotation`。查找该对象并尝试了解您忘记保留它的位置（例如，使用对象分配工具跟踪其保留和释放）

# actionscript-3 - bitmapdata.draw 静默失败

> ID：11221259
> 
> 赞同：2
> 
> 时间：2012-06-27T07:23:29.497
> 
> 标签：actionscript-3, flash, actionscript

我正在尝试使用 Loader（变量名称为 faceimage）读取图像，并尝试将该图像的位图数据传递给一个名为检测的函数。但是，它在我试图获取位图的行中失败了。

```
 bmpTarget = new Bitmap( new BitmapData( faceImage.width, faceImage.height, false ) )
    bmpTarget.bitmapData.draw( faceImage ); // Fails, no errors shown
    detector.detect( bmpTarget.bitmapData ); 
```

我通过在失败行的上方和下方放置跟踪语句来缩小到这一行。faceImage 包含我通过在屏幕上显示内容验证的有效数据。我也试过

```
 bmpTarget = Bitmap(BitmapData(faceImage.content)) 
```

但徒劳无功。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:32:07.760

如前所述： [为什么 Loader 对象会杀死 bitmapdata draw();？](https://stackoverflow.com/questions/9883850/why-do-loader-objects-kill-bitmapdata-draw)

您可能需要一个`LoaderContext`.

```
loader.load("http://www.example.com/myimage.jpg", new LoaderContext(true)); 
```

否则，您可以从其他站点加载图像，但不能访问实际的 bitmapData，这是必需的`draw()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:42:58.457

我想知道您是否尝试在加载位图数据之前访问它？

也许尝试使用一个完整的监听器......

```
var _urlRequest:URLRequest = new URLRequest("urlToImage");
var faceImage:Loader = new Loader;
faceImage.load(_urlRequest);
faceImage.addEventListener(IOErrorEvent.IO_ERROR, function(e:IOErrorEvent):void{ trace(e) });
faceImage.contentLoaderInfo.addEventListener(Event.COMPLETE, imageLoaded, false, 0, true);

function imageLoaded(e:Event):void {

faceImage.contentLoaderInfo.removeEventListener(Event.COMPLETE, imageLoaded);
var bmpTarget:Bitmap = e.target.content;
detector.detect( bmpTarget.bitmapData );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:27:45.530

这可能是沙盒/跨域问题。某些跨域设置禁止将加载图像的内容绘制到 bitmapData。您可以通过加载原始图像数据`URLLoader`然后使用`loadBytes`on来解决它`Loader`。

# java - android xml拉解析器？

> ID：11221261
> 
> 赞同：0
> 
> 时间：2012-06-27T07:23:49.707
> 
> 标签：java, android, xmlpullparser

android 开发者网站推荐使用 xml pull 解析器。所以我尝试了它的代码（将其复制到 eclipse）并且它没有给出任何错误。但是，如果您尝试运行它，它会给出：

`Error occurred during initialization of VM java/lang/NoClassDefFoundError: java/lang/ref/FinalReference`

所以我在网上搜索，尝试了网上发布的“解决方案”，但没有帮助。一时兴起，我尝试找到 org.xml，但它不存在！所以我下载了它，现在想知道在哪里保存臭虫！

但也许问题根本不在于这个。如果您将代码保存为一个简单的 java 文件，它会说它找不到包（org.xml...）

所以我想这件事的重点是......

你如何在 eclipse (indigo) 中运行这个程序？

```
import java.io.IOException;
import java.io.StringReader;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

public class Xml_readActivity
 {

 public static void main (String args[])throws XmlPullParserException, IOException
 {
     XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
     factory.setNamespaceAware(true);
     XmlPullParser xpp = factory.newPullParser();

     xpp.setInput( new StringReader ( "<foo>Hello World!</foo>" ) );
     int eventType = xpp.getEventType();
     while (eventType != XmlPullParser.END_DOCUMENT) {
      if(eventType == XmlPullParser.START_DOCUMENT) {
          System.out.println("Start document");
      } else if(eventType == XmlPullParser.START_TAG) {
          System.out.println("Start tag "+xpp.getName());
      } else if(eventType == XmlPullParser.END_TAG) {
          System.out.println("End tag "+xpp.getName());
      } else if(eventType == XmlPullParser.TEXT) {
          System.out.println("Text "+xpp.getText());
      }
      eventType = xpp.next();
     }
     System.out.println("End document");
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:41:34.810

您的代码没有问题，您只是缺少正确运行它的东西。显示你的 logcat

# amazon-rds - Amazon RDS 的多可用区部署是如何实现的？

> ID：11221266
> 
> 赞同：12
> 
> 时间：2012-06-27T07:24:06.107
> 
> 标签：amazon-rds

最近我正在考虑在生产环境中使用 Amazon RDS Multi-AZ 部署服务，并且我已经阅读了相关文档。

但是，我有一个关于故障转移的问题。在 Amazon RDS 的 FAQ 中，failover 是这样描述的：

> 问：多可用区故障转移期间会发生什么，需要多长时间？
> 
> 故障转移由 Amazon RDS 自动处理，因此您可以在无需管理干预的情况下尽快恢复数据库操作。故障转移时，Amazon RDS 只需翻转您的数据库实例的规范名称记录 (CNAME) 以指向备用数据库实例，而备用数据库又被提升为新的主数据库实例。我们鼓励您遵循最佳实践并在应用层实现数据库连接重试。故障转移时间是完成崩溃恢复所需时间的函数。从头到尾，故障转移通常在三分钟内完成。

从上面的描述，我想肯定有一个监控服务可以检测到主实例的故障并进行翻转。

我的问题是，这个监控服务托管在哪个AZ？有 3 种可能性： 1\. 与主 AZ 相同 2\. 与备用 AZ 相同 3\. 另一个 AZ

显然 1&2 不会是这种情况，因为它无法处理整个 AZ 不可用的情况。那么，如果是3的话，监控服务的AZ宕机了怎么办？是否有其他服务可以监控此监控服务？这似乎是一个无尽的多米诺骨牌。

那么，亚马逊如何确保 RDS 在多可用区部署中的可用性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-12T20:27:55.753

> 那么，亚马逊如何确保 RDS 在多可用区部署中的可用性？

鉴于 RDS 是一种 PaaS 服务，我认为这种情况下的“如何”是通过设计从用户中抽象出来的。多可用区部署有很多隐藏的内容，但以下情况是正确的：

*   您无权访问辅助实例，除非发生故障转移
*   保证辅助实例位于与主实例不同的 AZ

在他的[博客文章](https://aws.amazon.com/blogs/database/amazon-rds-under-the-hood-multi-az/)中，John Gemignani 提到了`observer`在多可用区架构中管理哪个 RDS 实例处于活动状态的概念。但就您而言，什么*是*`observer`？它从哪里观察？

根据我对 AWS 的经验，这是我的猜测：

> RDS 多可用区部署中的`observer`高可用性服务部署在 RDS 多可用区可用的每个区域的每个可用区中，并利用现有 AWS 平台服务来监控所有基础设施的运行状况和状态可能会影响 RDS 实例。构成 AWS 平台的某些服务`observer`可能是 AWS 平台本身的一部分，并且对用户隐藏。

我愿意打赌，构成 CloudWatch Events 的相同底层服务在 RDS 多可用区的某些容量中使用`observer`。在 Jeff Barr 宣布 CloudWatch Events 的[博客文章](https://aws.amazon.com/blogs/aws/new-cloudwatch-events-track-and-respond-to-changes-to-your-aws-resources/)中，他这样描述该服务：

> 您可以将 CloudWatch Events 视为 AWS 环境的中枢神经系统。它连接到受支持服务的每个角落，并在发生操作变化时意识到它们。然后，在您的规则驱动下，它会激活功能并发送消息（如果您愿意，可以激活肌肉）以响应环境、进行更改、捕获状态信息或采取纠正措施。

以同样的方式思考`observer`- 它是 AWS 平台的一个组件，提供了我们作为平台用户不需要考虑的功能。这是 AWS 在责任共担[模型](https://aws.amazon.com/compliance/shared-responsibility-model/)中的职责的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T18:30:26.743

我们无法确定故障转移实例所在的位置，但我们的主实例位于 US-West-2c，辅助实例位于 US-West-2b。

使用 PostgreSQL，我们的数据由于 Amazon 卷的物理问题而损坏（据我们所知）。当时我们没有设置多可用区，因此为了恢复，我们必须尽可能接近事件的时间点执行时间点恢复。亚马逊支持向我们保证，如果我们继续使用多可用区，它们会自动滚动到另一个可用区。这就引出了他们如何确定这一点的问题，以及数据损坏是否会传播到其他可用区？

因为那个 shisaster，我们还添加了一个只读副本，这对我来说似乎更有意义。我们还将 RO 副本用于读取和其他功能。我从我的 Amazon 代表那里了解到，可以将 Multi-AZ 设置视为一种 RAID 情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:56:38.367

有根据的猜测 - 监控服务在所有 AZ 上运行，并引用运行实例的共享列表（跨 AZ 同步复制）。一旦一个 AZ 上的监控服务注意到另一个 AZ 已关闭，它会将所有正在运行的实例的 CNAMES 翻转到当前已启动的 AZ。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-23T20:23:21.947

从文档中，如果满足**以下条件**，则会发生故障转移：

*   主可用区中的可用性丢失
*   与主节点的网络连接丢失
*   主计算单元故障
*   主存储故障

**这推断监控不在同一个 AZ**中。最有可能的是，只读副本正在使用 mysql 函数 ( [https://dev.mysql.com/doc/refman/5.7/en/replication-administration-status.html](https://dev.mysql.com/doc/refman/5.7/en/replication-administration-status.html) ) 来监控主服务器的状态，并在主变得无法访问。

当然，这就带来了一个问题，如果副本 AZ 发生故障会发生什么？亚马逊很可能会检查副本的故障检测，以确定它是失败还是主要是失败。

# asp.net - 关于单词搜索和lucene.net c#

> ID：11221274
> 
> 赞同：1
> 
> 时间：2012-06-27T07:25:07.967
> 
> 标签：asp.net, lucene.net

我将第一次使用 lucene.net，所以当看到这行代码时会产生一些困惑。我得到了一个使用 lucene 搜索单词的示例代码，我不清楚几行。这里是下面的示例代码。

## 问题 1

```
ListBox1.Items.Clear();
var searcher = new Lucene.Net.Search.IndexSearcher(MapPath("~/searchlucene/"));
var oParser = new Lucene.Net.QueryParsers.QueryParser("content", new StandardAnalyzer());

string sHeader = " OR (header:" + TextBox1.Text + ")";
string sType = " OR (type:" + TextBox1.Text + ")";
string sSearchQuery = "(" + TextBox1.Text + sHeader + sType + ")";

var oHitColl = searcher.Search(oParser.Parse(sSearchQuery));
for (int i = 0; i < oHitColl.Length(); i++)
{
    Document oDoc = oHitColl.Doc(i);
    ListBox1.Items.Add(new ListItem(oDoc.Get("header") + oDoc.Get("type") +  oDoc.Get("content")));            
}

searcher.Close(); 
```

## 问题2

这下面的行不清楚发生了什么......！请讨论下面每一行的目标。

```
string sHeader = " OR (header:" + TextBox1.Text + ")";
string sType = " OR (type:" + TextBox1.Text + ")";
string sSearchQuery = "(" + TextBox1.Text + sHeader + sType + ")";

var oHitColl = searcher.Search(oParser.Parse(sSearchQuery));
for (int i = 0; i < oHitColl.Length(); i++)
{
    Document oDoc = oHitColl.Doc(i);
    ListBox1.Items.Add(new ListItem(oDoc.Get("header") + oDoc.Get("type") +  oDoc.Get("content")));            
} 
```

## 问题 3

**什么是标题：**

**什么是类型：**

**为什么在搜索关键字（如字符串** **sSearchQuery = "(" + TextBox1.Text + sHeader + sType + ")" 之后连接头和类型）；**

## 问题 4

为什么搜索查询内容中缺少内容如果我这样写会是什么结果

```
string sHeader = " OR (header:" + TextBox1.Text + ")";
string sType = " OR (type:" + TextBox1.Text + ")";
string sContent = " OR (content:" + TextBox1.Text + ")";
string sSearchQuery = "(" + TextBox1.Text + sHeader + sType + sContent ")"; 
```

**为什么标题，类型和内容正在阅读....为什么？** * *oDoc.Get("header") + oDoc.Get("type") + oDoc.Get("content")* *

为什么我需要阅读像 **oDoc.Get("header") + oDoc.Get("type") + oDoc.Get("content")**这样的标题、类型和内容， 我们只能读取内容......为什么类型和标题也需要？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:23:22.327

第一个代码构建一个搜索多个字段的查询，假设 TextBox1 中的输入不会与查询混淆（例如包含括号或空格）。使用字符串连接构建搜索查询通常很难正确，我会使用它`MultiFieldQueryParser`来代替。

```
var fields = new[] { "content", "header", "type" };
var analyzer = new StandardAnalyzer(Version.LUCENE_30);
var queryParser = new MultiFieldQueryParser(Version.LUCENE_30, fields, analyzer);
var query = queryParser.Parse(TextBox1.Text);
var result = searcher.Search(query, 25); /* find 25 best matches */ 
```

您的 for 循环遍历结果并读取*存储*字段的值并将它们添加到列表框。这需要索引的字段`Field.Store.YES`才能工作。

# php - 对象不显示值

> ID：11221276
> 
> 赞同：2
> 
> 时间：2012-06-27T07:25:10.760
> 
> 标签：php

我有以下类型的对象：

```
[RateInfo] => stdClass Object
                            (
                               [@rateChange] => false
                               [@promo] => false
                               [@priceBreakdown] => true
                            ) 
```

当我试图在 php 中打印数组时：

```
echo $res->rateInfo->@rateChange; 
```

它显示了 php 中的语法错误，当我显示像没有 @

```
echo $res->rateInfo->rateChange; 
```

它没有显示价值。这有什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:35:20.523

试试`echo $res->rateInfo->{'@rateChange'};`，注意你需要引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:32:20.613

试试`echo $res->rateInfo->{@rateChange}`；

# mysql - 使用 create table with select 在表之间复制数据

> ID：11221281
> 
> 赞同：0
> 
> 时间：2012-06-27T07:25:36.863
> 
> 标签：mysql

我有 aitisi（id、name1、surname1、father1、birthdate1、name2、surname2、father2、birthdate2... 到 5、cost、begins、expires、plan、address、phone、city、zip），我想复制 surnameX , nameX,fatherX,birthdateX (X= 1 to 5) 列到新表成员 (id, tid, name, surname, Father,birthdate) 其中 tid 是 table1.id 的查找键

我用 MySQL 试过，但没有做对，所以我最后用 PHP 做了 id：

```
$query_aitisi = "SELECT * FROM aitisi order by id asc";
$aitisi = mysql_query($query_aitisi, $connection) or die(mysql_error());
$row_aitisi = mysql_fetch_assoc($aitisi);
$totalRows_aitisi = mysql_num_rows($aitisi);

do {
  for($i=1; $i<=5; $i++){
    if ($row_aitisi['on_te'.$i]<>'') { 
    $query_copy = "insert into members (symbid, name, surname, father, birthdate) 
    values ('".$row_aitisi[id]."','".$row_aitisi['surname'.$i]."','".$row_aitisi['name'.$i]."','".$row_aitisi['father'.$i]."','".$row_aitisi['birthdate'.$i]."')";
$copy = mysql_query($query_copy, $connection) or die(mysql_error());
    }
  }
} while ($row_aitisi = mysql_fetch_assoc($aitisi)); 
```

但是，我真的很想知道正确使用“create table as select”语句以供将来使用。有人吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:31:37.777

以下查询应该可以正常工作

```
create table members (symbid, surname, name, father, birthdate)
    (select id, surname1, name1, father1, birthdate1 from aitisi where on_te1 != ''
    union all
    select id, surname2, name2, father2, birthdate2 from aitisi where on_te2 != ''
    union all
    select id, surname3, name3, father3, birthdate3 from aitisi where on_te3 != ''
    union all
    select id, surname4, name4, father4, birthdate4 from aitisi where on_te4 != ''
    union all
    select id, surname5, name5, father5, birthdate5 from aitisi where on_te5 != '') 
```

# iphone - 我试图在地图视图上放置多个图钉但出现错误

> ID：11221291
> 
> 赞同：2
> 
> 时间：2012-06-27T07:26:27.610
> 
> 标签：iphone, objective-c, ios

```
for (int i = 0; i < self.businessArray.count; i++) {
        Business *business = [self.businessArray objectAtIndex:i];
        MapAnnotation *mapAnnotation = [[MapAnnotation alloc] init]; 
        NSLog(@"%f %f", business.coordinate.latitude, business.coordinate.longitude);
        mapAnnotation.title = business.name;
        mapAnnotation.subtitle = business.address1;
        mapAnnotation.coordinate = business.coordinate;
        [bMapView addAnnotation:mapAnnotation];
        NSLog(@"ti %@", mapAnnotation.title);
        NSLog(@"sub %@", mapAnnotation.subtitle);
        NSLog(@"coo %f %f", mapAnnotation.coordinate.latitude, mapAnnotation.coordinate.longitude);
    }

- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKPinAnnotationView *pinView;

    if (annotation != mapView.userLocation) {
        static NSString *defauleID = @"myLocation";
        //        pinView = (MKPinAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier:defauleID];
        if (pinView == nil) {
            pinView = [[MKPinAnnotationView alloc] initWithAnnotation: annotation reuseIdentifier:defauleID];
        }
        pinView.pinColor = MKPinAnnotationColorGreen;
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;

        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        [rightButton setTitle:annotation.title forState:UIControlStateNormal];
        [rightButton addTarget:self 
                        action:@selector(showDetails:) forControlEvents:UIControlEventTouchUpInside];
        pinView.rightCalloutAccessoryView = rightButton;
    }

    return pinView;
} 
```

错误：类 MapAnnotation 的实例 0x1cdd97b0 已被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在 NSKVODeallocateBreak 上设置断点以在调试器中停止。这是当前的观察信息：（上下文：0x0，属性：0x1cd97a30>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:30:43.117

每次在循环内释放注释

```
 for (int i = 0; i < self.businessArray.count; i++) {
            Business *business = [self.businessArray objectAtIndex:i];
            MapAnnotation *mapAnnotation = [[MapAnnotation alloc] init]; 
            NSLog(@"%f %f", business.coordinate.latitude, business.coordinate.longitude);
            mapAnnotation.title = business.name;
            mapAnnotation.subtitle = business.address1;
            mapAnnotation.coordinate = business.coordinate;
            NSLog(@"ti %@", mapAnnotation.title);
            NSLog(@"sub %@", mapAnnotation.subtitle);
            NSLog(@"coo %f %f", mapAnnotation.coordinate.latitude, mapAnnotation.coordinate.longitude);
            [bMapView addAnnotation:mapAnnotation];
            [mapAnnotation release];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:47:02.853

我认为您已通过添加观察者收到通知。当您收到该通知并执行与该观察者相关联的函数时，会释放您的 MapAnnotation 但您没有删除该观察者，请在释放中也删除观察者...

```
 [[NSNotificationCenter defaultSenter] removeObserver:self]; 
```

希望对你有帮助..

# html - local (file://) website favicon works in Firefox, not in Chrome or Safari- why?

> ID：11221292
> 
> 赞同：37
> 
> 时间：2012-06-27T07:26:28.427
> 
> 标签：html, google-chrome, webkit, cross-browser, favicon

## The Question

When my website is local (using the `file://` protocol), the favicon doesn't show up in Chrome or Safari, but it works in Firefox (all on a mac). However, when the exact same site is actually hosted, the favicon works fine in all of the browsers I tried. Why do the webkit browsers not display local favicons?

## Details

The favicon.ico file is in the same directory as the index.html page. I am using the following code, although I've tried several variations of it:

```
 <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /> 
```

Since the favicon works when accessed over `http://`, I doubt that there's something wrong with the way I'm including it, but you never know...

## Update

I've found a few forum posts (nothing too official) that suggest that this is by design, but none of them give the rationale. Also, it sounds like some versions of IE have the same problem. Is there some security risk with local favicons? (I know that some browsers have issues with local cookies, for example.)

**Disclaimer:** There seem to be a ton of questions in a similar vein, but I haven't found exactly this one. (In fact I have basically the same question as [this one](https://stackoverflow.com/questions/3054747/favicon-issue-with-webkit-browsers), but none of the answers there worked for me.)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-23T15:13:32.650

You can use Base64 data of an image. Put something like this:

```
<link href="data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAD9/f0F/Pz8DP///wD///8P////Dv///xL///8P////A////wD///8A/v7+Cf///wX///8A////APv7+wr9/f0D+/v7Dv///wb///81+vv8i/v7/Iv3+PqL4+nxi+ru9JHy9Piu5+zzru3w9ZD+/v5x/v7+H////wr///8A9/f3H/7+/g7///8J////HNDX5Pyaq8j/m6zJ/5esy/+QpcX/larK/5uwzv+MoMH/mqrG/5qlv+7Q0Nty/f3+Af///wD///8A/v7+A////wz+/v6b2d/q/4abvf+Emr7/jKHD/5Gnyf+Uqsz/fpW5/4mXuP/U1OL/e3ui+MPE0l7///8A////AP///wD///8P////Xa680/9/lrr/kafJ/5yy0/+WrM7/nbPT/52uyv+ktM7/1NTi/8LC1f+lpr3n////AP///wD///8A////AP7+/mDo7PL/ytPi/5yv0fehsuXuuMvl0Kq81drS2uf8+/z9bff3+SG5uM1r8vL1ff///wD///8A////AP///wr+/v4H/v7+jufq8umIg/Sut7L9YKul/W7PzvlMnZn03Ozq/x/+/v4H////AP///wD///8A////AP///wD///8A5OH/IpuS/pF3cfPploz/hH5y/6F/dP+gl47/gkw++e7Hwv9Fta//XPj4/gf///8A////AP///wD///8A+vn/BoyB/pGlnf5vfHfxy4mA/JlIOf/lmZD+f1lK/89kWPrPmZD+f9zY/yu3sP5ar6j/ZP///wD///8A6uj/GbSt/l6imv9yVkf/1HBm+MJ5eOrlhX/1s2JY+dRpYPfPv7/zb4+F/41WR//Uloz/hI6E/47///8A////AOro/xmnn/9teW3/qH5y/6HKxf9B9/n7Fc3N9VfMyvlQraj6cbWv/1zj4f4h2tf/Lks7/+NmWP+/0s7/OP///wCvqP9kjoT/jo6E/46Sif+I+vn/Bt3a/ypsX/+5////AH90/6Dj4f4h0Mz/OrWv/1yyq/9gkon/iNzY/yv///8A19P/MvLx/g////8A////APX0/wxvYv6119P/MtzY/ytmWP+/oZj/df///wBQQP/dt7D+Wv///wD///8A////AP///wD///8A////AKyk/2makf9+UUL/283J/z/l4/8f1dH/M////wD///8At7D+Wv39/gH///8A////AP///wD///8A////AP///wDa1/8u2tf/LtrX/y719P8M////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAOAfAADgBwAA4AMAAPABAADwHwAA8d8AAPAfAADonwAA8CEAAOf5AADGvQAA/bcAAP3/AAD//wAA//8AAA==" rel="icon" type="image/x-icon" /> 
```

into the `<head>` section of an html file.
Base64 data can be received, for example, by [favicon.cc](http://www.favicon.cc)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-04T18:15:38.493

# Local `file://` and chrome:

For a **local** favicon in Chrome - according to an old thread found on [linux command](http://lcorg.blogspot.co.at/2011/07/google-chromebooks-some-helpful-tips.html) it should be possible to place a local favicon with the `file://` if it's in the your `/Downloads/` directory. So I tried it like this:

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <link rel="shortcut icon" type="image/x-icon" href="file://localhost/Users/dominikangerer/Downloads/favicon.ico">
</head>
<body>
    <h1>Testing</h1>
</body>
</html> 
```

I don't have a apache or anything running. It's simply the way chrome can access local files using the `file://`. If I try using the favicon from another part of my filesystem it doesn't seems to work - so maybe that's a solution for chrome.

![enter image description here](../Images/f81eab0601c8767a31c42f33117622b3.png)

* * *

# Local `file://` and Safari:

Still looking for a way - above code doesn't work for my up2date safari.

* * *

# Interesting topic's:

*   [Security in depth loca web pages (Chromium Blog)](http://blog.chromium.org/2008/12/security-in-depth-local-web-pages.html)

* * *

# General troubleshooting guide for your favicons:

Have a look at: [https://stackoverflow.com/a/16375622/1581725](https://stackoverflow.com/a/16375622/1581725)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-04T14:56:52.830

This is a known issue for years. Your code is right, and I don't think you'll find any way to allow Chrome or IE to include a favicon with a non-remotely way.

Some time ago, I tried a lot of ways, none works, and I wasn't able to find any browser documentation on this point.

```
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.png" type="image/png" />
<link rel="shortcut icon" href="C:/files/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="file:///C:/files/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="file:///C|/files/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="file://localhost/C:/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="file://127.0.0.1/C:/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="file://localhost/C|/favicon.ico" type="image/x-icon" /> 
```

For Chrome, favicons are stored in a file : `User\AppData\Local\Google\Chrome\User Data\Default\Favicons`. We can guess local favicons aren't stored in.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T02:50:12.133

Once I've solved it using two lines of code

```
<link rel="icon" href="favicon.ico" type="image/x-icon"> 
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"> 
```

and also keep the favicon.ico named exatly this and in the webroot folder, if it helps.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-10T06:32:09.880

Well I have the problem similar with Google Chrome the favicon don't show correctly the problem was the .ico I was using was 16x16 and 32x32 I just used a bigger image and it works for all browsers.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-26T07:03:20.560

I solved this by renaming `favicon.ico` as `new_name.ico`. And it works in Safari and Chrome.

```
<head>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='logo.ico') }}">
</head> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-02-18T02:53:57.463

Works In Chrome All you need is a folder with the icon and the website then the html should look like this (MAKE SURE THE ICON IS NAMED favicon.ico !)

link rel='shortcut icon' type='image/x-icon' href='C:\Website/favicon.ico

# java - 在java中删除一个文件夹

> ID：11221295
> 
> 赞同：-2
> 
> 时间：2012-06-27T07:26:44.393
> 
> 标签：java

我需要删除的文件夹是从我的程序创建的文件夹。每台电脑上的目录都不一样，所以我使用的文件夹代码是

```
userprofile+"\\Downloads\\Software_Tokens" 
```

里面会有文件，所以我想我需要递归删除它。我在这里查看了一些示例，但它从不接受我的路径。该路径在代码中作为环境变量可以正常工作，因为我为它添加了代码

`static String userprofile = System.getenv("USERPROFILE");`

那么有人可以向我展示我的路径插入的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:34:03.050

如果您的目录不为空，您可以使用[Apache Commons IO API](http://commons.apache.org/io/)的方法[deleteDirectory(File file)](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#deleteDirectory%28java.io.File%29)：

```
String toDelete = userprofile + File.separator + "Downloads" + 
        File.separator + "Software_Tokens";
FileUtils.deleteDirectory(new File(toDelete)); 
```

请注意与系统相关的`/`or并改为使用。`\``File.separator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:18:23.433

如果您不想使用 apache 库！您可以递归地执行此操作。

```
 String directory = userprofile + File.separator + "Downloads" + File.separator + "Software_Tokens";
  if (!directory.exists()) {
      System.out.println("Directory does not exist.");
      System.exit(0);
  } else {
      try {
          delete(directory);
      } catch (IOException e) {
          e.printStackTrace();
          System.exit(0);
      }
  }
  System.out.println("Done");
  }
  public static void delete(File file)
   throws IOException {
      if (file.isDirectory()) {
          //directory is empty, then delete it
          if (file.list().length == 0) {
              file.delete();
              System.out.println("Directory is deleted : " + file.getAbsolutePath());
          } else {
              //list all the directory contents
              String files[] = file.list();
              for (String temp: files) {
                  //construct the file structure
                  File fileDelete = new File(file, temp);

                  //recursive delete
                  delete(fileDelete);
              }
              //check the directory again, if empty then delete it
              if (file.list().length == 0) {
                  file.delete();
                  System.out.println("Directory is deleted : " + file.getAbsolutePath());
              }
          }
      } else {
          //if file, then delete it
          file.delete();
          System.out.println("File is deleted : " + file.getAbsolutePath());
      } 
```

# google-maps-api-3 - Google 地图：将 cid 转换为新的 Google+ 本地 ID

> ID：11221299
> 
> 赞同：4
> 
> 时间：2012-06-27T07:27:04.040
> 
> 标签：google-maps-api-3, google-plus

Google Maps API 似乎发生了变化。Google 地方信息现已更改为 Google+ 本地。我的问题是这个问题的扩展：

[Google Places API：从 CID 到参考？](https://stackoverflow.com/questions/9333613/google-places-api-from-cid-to-reference)

他的问题是将 CID 存储在他的数据库中，以便能够放置一个链接到他的地图中已知地点的单个 pin。

示例： http://maps.google.com/maps?cid= [998657413562662319](http://maps.google.com/maps?cid=998657413562662319)

可以直接使用 CID 参数链接，它会自动删除 pin 并链接到该位置。

过去，点击地图上的 Places 链接会带您到这里：链接：maps.google.com/maps/place?cid=998657413562662319

然而，现在情况发生了变化。它现在将链接到 Google+：链接：[http ://plus.google.com/100968423062387177527/about](http://plus.google.com/100968423062387177527/about)

（对不起，我仅限于 2 个超链接）

我的问题是，您现在如何检索 CID？我打算做的是事先使用普通的谷歌地图手动搜索这些地方。然后我想检索这些地方的 CID 并将其手动存储在我的数据库中。但是，CID 不再可用。我能做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:19:18.440

这个答案是从原始问题之后的发布者评论中复制的，只是为了让问题得到回答，因为看起来用户还没有获得足够的声誉来自我回答问题。它也在这里向其他 StackOverflow 用户明确表示该问题已得到解决：

**只需单击地图上的标记，即可从 Google+ 本地页面检索 CID。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T21:05:16.183

这不再是查找 CID 的方法。

一种选择是使用此服务： [https ://cidfinder.view3.com/](https://cidfinder.view3.com/)

你给他们 google+ url，他们会返回 CID

另一种手动方法是单击“查看源代码”并搜索“CID”，您会发现如下内容： div role=button data-cid="18434216952359358766"

所以“data-cid”的值就是你要找的cid。

# java - 访问网络服务

> ID：11221301
> 
> 赞同：0
> 
> 时间：2012-06-27T07:27:10.083
> 
> 标签：java, web-services

我已经创建并注册了一个 Web 服务。现在我想制作一个简单的网络应用程序来访问网络服务。我使用axis2作为Web服务服务器。客户端以xml格式文件（data.xml）的形式提供要由Web服务处理的数据。我的 jsp 表单有一个文本框（用于提供 data.xml 的位置）和一个“调用”按钮，可以访问调用 Web 服务。我假设 jsp 将首先将请求发送到 servlet，然后 servlet 将负责调用 Web 服务。Web 服务托管在 PC1 中，包含访问 Web 服务的 JSP 的 Web 应用程序位于 PC2 中，data.xml 位于 PC3 中。因此用户将在 PC3 上工作，在 PC3 中打开 Web 浏览器以访问 PC2 中的 jsp，然后调用 PC1 中的 Web 服务。

1.  从 servlet 调用 Web 服务的语法是什么？我想知道axis2是否可以在客户端使用。
2.  如何构造 SOAP 请求（我假设 SOAP 请求是在 servlet 中构造的）？希望我不需要逐个字符串构造 SOAP 请求字符串。
3.  关于data.xml，我假设jsp会将文件上传到servlet，所以servlet将接收一个文件作为参数。这是正确的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:34:21.583

由于您使用的是 Axis2，因此使用它生成客户端代理（wsdl2java 是您最好的朋友），并将为您的 Web 服务创建一个标准的 java 代理。无需手动创建 SOAP 信封……（至少在 99% 的情况下）。

只需生成一个 WSDL（编写它或使用 java2wsdl 生成它），然后使用它来生成一个 java 代理来调用您的 Web 服务。

关于如何使用代理...

恕我直言，来自 jsp 的直接调用是禁止的。最好让 JSP 收集数据并将它们发布到 servlet，然后在 servlet 中执行 WebService 调用，管理响应（如果使用 Axis2 框架，这将是一个纯 java 对象），处理错误，然后转发给另一个 JSP 给出结果.

JSP 有点容易编写，但从长远来看，最好将它们用于计划中的内容，并将业务逻辑保留在 servlet 中

这里有两个用于执行 WSDL 和客户端生成的 ant 任务。

```
<!-- create the wsdl file -->
<target name="genwsdl">
    <echo message="Generate the WSDL file"/>
    <taskdef name="java2wsdl" classname="org.apache.ws.java2wsdl.Java2WSDLTask" classpathref="axis2.classpath"/>
    <java2wsdl className="org.stackoverflow.YourWebServiceClassName"
               servicename="YourServiceName"
               description="Whatever..."
               outputLocation="./wsdl"
               locationuri="http://localhost:8081/NameMe/CoolService">
            <classpath>
                <pathelement path="${axis2.classpath}"/>
                <pathelement location="./build/classes"/>
            </classpath>
    </java2wsdl>
    <echo message="Generation of the WSDL file complete"/>
</target>

<target name="genclient" depends="genwsdl">
    <taskdef name="axis2-wsdl2java" classname="org.apache.axis2.tool.ant.AntCodegenTask" classpathref="axis2.classpath"/>
    <axis2-wsdl2java wsdlfilename="./wsdl/YourWsdl.wsdl" output="./client overwrite="true"/>
</target> 
```

生成客户端类（代理）后，您可以使用它们来调用 Web 服务。

它会是这样的：

```
YourServiceStub stub = new YourServiceStub(wsEndPointUrl); 
```

然后在存根中，您将为每个远程发布的方法提供一个方法，并为包装的请求/响应对象提供静态类。但此时必须阅读 Axis2 客户端文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:30:34.263

除非您想手动完成，否则您应该使用 Web 服务堆栈。Apache CXF 和 Metro 是不错的选择。

也就是说，我不知道你想用你的 data.xml 做什么。

1.  取决于框架
2.  你没有。这就是框架的用途。
3.  如果您需要多部分支持，您应该四处寻找现成的 servlet。或者更好的是，使用 Spring 框架:)

# php - php显示法语字符

> ID：11221302
> 
> 赞同：0
> 
> 时间：2012-06-27T07:27:13.087
> 
> 标签：php, encoding

我遇到了一段时间的问题，我不知道如何解决它。这是关于在网页中显示法语字符。所以，我有一个带有标签的文件（一个用于法语，另一个用于英语），例如：

```
define("email_sent","L'email a été envoyé"); 
```

我的网站是一种混合类型。我的意思是，在某些页面上，我使用 Ajax 显示内容，而在其他一些没有 Ajax 的页面上显示内容。

```
 include('myFile.php') 
```

问题是：

如果我在 myFile.php 中使用：

```
utf8_encode(constant("Email_Sent")); 
```

使用 Ajax 加载我的文件时，法语标签显示 Ok，但在非 Ajax 页面（包括同一个文件）上显示错误（“？”而不是“é”）。

如果我只使用

```
constant("Email_Sent"); 
```

在我的 Ajax 上，标签显示错误，但在我的非 Ajax 上，它显示正确。所以，我不知道如何解决这个问题。

任何人，一些想法？

谢谢。

# java - 类的实例如何递归创建并因此导致stackoverflow错误

> ID：11221306
> 
> 赞同：0
> 
> 时间：2012-06-27T07:27:29.793
> 
> 标签：java

考虑以下 2 个给出相同错误的程序
第一次调用：

```
public class Testing {    
    Testing t=new Testing();        
    public static void main(String args[]){   
        testing t1=new testing();  
    }
} 
```

二等：

```
class foo{
    void baz(){
        new testing();
    }
}
public class testing {
    testing t=new testing();    
    public static void main(String args[]){
    foo f=new foo();
        f.baz();
    }       
} 
```

上面的代码如何给出以下错误？
我知道类的实例是递归创建的，但我想知道如何？

```
Exception in thread "main" java.lang.StackOverflowError
    at com.Testing.<init>(Testing.java:4)
    at com.Testing.<init>(Testing.java:4) 
```

如果我们这样做，为什么不会发生这种情况

```
 public class testing { 
    testing t2=new testing(); 
    testing t1=new testing(); 
    public static void main(String args[])
    {//anything}
    } 
```

因为 t1 需要初始化 t2 对象，反之亦然？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:28:59.880

这就是问题：

```
public class Testing {    
    Testing t=new Testing();  
} 
```

这与以下内容大致相同：

```
public class Testing {
    Testing t;

    public Testing() {
        t = new Testing();
    }
} 
```

这使得递归更清晰——构造函数无条件地调用自己。

的每个实例都`Testing`包含对 的另一个实例的引用`Testing`。这*不一定*是问题 - 但它就在这里，因为它*正在*创建`Testing`. 因此，创建“最外层”实例会立即触发另一个实例的创建......这会触发另一个实例的创建，等等。

你的两个类在这方面没有显着不同 - 创建任何实例`Testing`都会导致堆栈溢出。

编辑：关于此代码（改进了名称和格式）：

```
public class Testing { 
    Testing t1 = new Testing(); 
    Testing t2 = new Testing(); 

    public static void main(String[] args) {
        //anything
    }
} 
```

*如果您*尝试创建`Testing`. 但是，您说“t1 将需要初始化 t2 对象”是错误的-这里的变量之间没有相互依赖关系。每个变量初始值设定项都会创建一个单独的对象……但*这些*对象中的每一个都会依次尝试创建`Testing`.

请注意，运行该方法不需要`Testing`的*实例*`main`- 但如果该`main`方法`new Testing`直接调用或调用*其他*调用的方法`new Testing()`，那么您将获得堆栈溢出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T07:29:38.030

有没有想过你的程序什么时候结束……它永远不会。它实例化您的第一个对象，同时实例化它需要为第一个对象实例化另一个对象，依此类推。所以你的堆栈有时会爆炸。

**第一个对象（需要第二个对象（需要第三个对象（需要第四个对象）））并且它继续......**

# jmonkeyengine - 如何测试运行 jMonkey？

> ID：11221308
> 
> 赞同：0
> 
> 时间：2012-06-27T07:27:45.067
> 
> 标签：jmonkeyengine

我正在尝试基本的 jMonkey 但我得到了这个异常

```
jun 27, 2012 9:25:08 FM com.jme3.system.JmeDesktopSystem initialize
Info: Running on jMonkeyEngine 3.0.0 Beta
jun 27, 2012 9:25:08 FM com.jme3.system.Natives extractNativeLibs
Info: Extraction Directory: C:\prv_workspace_8\DungeonWorldAdventure
jun 27, 2012 9:25:13 FM com.jme3.system.lwjgl.LwjglAbstractDisplay run
Info: Using LWJGL 2.8.3
jun 27, 2012 9:25:13 FM com.jme3.system.lwjgl.LwjglDisplay createContext
Info: Selected display mode: 640 x 480 x 0 @0Hz
jun 27, 2012 9:25:13 FM com.jme3.app.Application handleError
Allvarlig: Failed to create display
org.lwjgl.LWJGLException: Pixel format not accelerated
    at org.lwjgl.opengl.WindowsPeerInfo.nChoosePixelFormat(Native Method)
    at org.lwjgl.opengl.WindowsPeerInfo.choosePixelFormat(WindowsPeerInfo.java:52)
    at org.lwjgl.opengl.WindowsDisplay.createWindow(WindowsDisplay.java:214)
    at org.lwjgl.opengl.Display.createWindow(Display.java:306)
    at org.lwjgl.opengl.Display.create(Display.java:873)
    at org.lwjgl.opengl.Display.create(Display.java:782)
    at com.jme3.system.lwjgl.LwjglDisplay.createContext(LwjglDisplay.java:137)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.initInThread(LwjglAbstractDisplay.java:113)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.run(LwjglAbstractDisplay.java:205)
    at java.lang.Thread.run(Thread.java:722)

jun 27, 2012 9:25:13 FM com.jme3.app.Application handleError
Allvarlig: Uncaught exception thrown in Thread[LWJGL Renderer Thread,5,main]
java.lang.IllegalStateException
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.runLoop(LwjglAbstractDisplay.java:147)
    at com.jme3.system.lwjgl.LwjglDisplay.runLoop(LwjglDisplay.java:182)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.run(LwjglAbstractDisplay.java:223)
    at java.lang.Thread.run(Thread.java:722)

Exception: java.lang.NullPointerException thrown from the UncaughtExceptionHandler in thread "LWJGL Renderer Thread" 
```

我试图运行的代码是

```
package adventure;

import com.jme3.app.SimpleApplication;
import com.jme3.material.Material;
import com.jme3.math.Vector3f;
import com.jme3.scene.Geometry;
import com.jme3.scene.shape.Box;
import com.jme3.math.ColorRGBA;

/** Sample 1 - how to get started with the most simple JME 3 application.
 * Display a blue 3D cube and view from all sides by
 * moving the mouse and pressing the WASD keys. */
public class Test extends SimpleApplication {

    public static void main(String[] args){
        Test app = new Test();
        app.start(); // start the game
    }

    @Override
    public void simpleInitApp() {
        Box b = new Box(Vector3f.ZERO, 1, 1, 1); // create cube shape at the origin
        Geometry geom = new Geometry("Box", b);  // create cube geometry from the shape
        Material mat = new Material(assetManager,
          "Common/MatDefs/Misc/Unshaded.j3md");  // create a simple material
        mat.setColor("Color", ColorRGBA.Blue);   // set color of material to blue
        geom.setMaterial(mat);                   // set the cube's material
        rootNode.attachChild(geom);              // make the cube appear in the scene
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:17:11.683

这似乎是显卡驱动程序的问题。确保更新您的驱动程序。如果这不起作用，你的显卡可能已经过时了。

# javascript - head.js 完成加载脚本后如何加载一些页面内容

> ID：11221311
> 
> 赞同：0
> 
> 时间：2012-06-27T07:27:52.807
> 
> 标签：javascript, head.js

我目前正在使用 head.js 来延迟为我的网站加载 js 文件。我在我的项目中使用彩盒。问题是，有时，颜色框没有完全加载（它在新页面而不是在对话框中打开颜色框），但是当我进行几次刷新时，它终于加载了。

我想这可能是为了打开颜色框对话框的页面内容甚至在 head.js 完全加载颜色框 js 文件之前就已加载。这是真正的原因吗？

我希望每次都能正确显示彩盒，而无需刷新。

如何仅在 head.js 完成加载其所有依赖文件后才执行彩盒页面代码？

谢谢。尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:32:58.730

将您的颜色框 html 代码放在一个 div 中。

```
<div id="colorBoxDiv" style="display:none;">
</div> 
```

在 head.js 的最后一行，添加以下代码：

```
$("#colorBoxDiv").html($("#colorBoxDiv").html()).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T12:06:49.237

head.js 有很多不同的选项来做到这一点。您可以在加载所需文件时运行回调函数，或使用`test`功能 api 调用。例如：

```
// queue scripts and fire a callback when loading is finished
head.load("file1.js", "file2.js", function() {
    // do something
 });

// same as above, but pass files in as an Array
head.load(["file1.js", "file2.js"], function() {
    // do something
});

// you can also give scripts a name (label)
head.load({ label1: "file1.js" }, { label2: "file2.js" }, function() {
    // do something
});

// same as above, but pass files in as an Array
head.load([{ label1: "file1.js" }, { label2: "file2.js" }], function() {
    // do something
});                   

// Labels are usually used in conjuntion with: head.ready()
head.ready("label1", function() {
    // do something
});

 // Actually if no label is supplied, internally the filename is used for the label
 head.ready("file1.js", function() {
    // do something
}); 
```

[更多文档](http://headjs.com/site/api/v1.00.html#load)

# java - 从 Swing 布局开始

> ID：11221313
> 
> 赞同：0
> 
> 时间：2012-06-27T07:28:01.903
> 
> 标签：java, swing

我是一名网络开发人员，现在正在开发一个摇摆应用程序。我正在使用 Netbeans。目前布局设置为自由布局。但是在运行时存在太多问题。

最好的建议方法是什么？将有多个层/级别的表单/选项/按钮/选项卡。有很多布局。我应该选择哪种布局。我会同时使用这两个。Netbeans + 手工编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:53:00.607

除了爱好编程之外，绝对是第 3 方：虽然三巨头（FormLayout、DesignGridLayout、MigLayout）中的任何一个都可以，但我个人目前最喜欢的是[MigLayout](http://www.miglayout.com/)。对我来说，它比 FormLayout 在更直观的填充处理和跨单元格组件布局中的问题更少方面略胜一筹。

就像绝对的手工编码一样——根据我的经验，视觉构建器的供应商锁定会比你想象的更快地咬你……

我的 2 (Euro :-) 美分，当然，里程会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:02:46.580

在调整容器大小或操作（添加、删除、设置可见/不可见）放置在框架（或其他容器）中的组件时，自由布局并不好。使用具有不同类型布局的布局管理器可以完美地在简单编码和个性化之间提供所需的融合。

这是 LayoutManager 的教程（以及库类的更多链接等）：

[http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

但是，您将无法修改 netbeans IDE 生成的代码。您必须要么完全使用手写代码，要么完全使用 NetBeans 生成的代码。不可能两者兼而有之。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:26:53.910

对于表格，我强烈建议[`FormLayout`（JGoodies 的）第 3 方](http://www.jgoodies.com/freeware/libraries/forms/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:36:40.897

您应该使用的布局实际上取决于您要执行的操作。话虽如此，也许[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)会更容易掌握，并且还可以让您很好地定位组件。

由于您还提到您将有很多表单，因此您还可以查看
[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。这将允许您使用相同的框架来显示不同的内容。

# delphi - Delphi DirectX 组件安装

> ID：11221314
> 
> 赞同：0
> 
> 时间：2012-06-27T07:28:06.237
> 
> 标签：delphi, directx, delphi-xe2

我从论坛下载了一个 DirectX 动画项目。
当我尝试在 Delphi XE2 中加载项目时，我收到一条错误消息：

> 未找到“类 TDXDraw”和“类 TDXDDIB”。

然后我忽略错误消息加载项目。我再次收到以下组件的错误消息，例如“DXDraw1：TDXDraw”、“DXDIB1：TDXDIB”和“背景：TDXDIB”。因此我已经下载并安装了“DXSDK_Jun10.exe”。但错误是一样的。

我认为，由于 DirectX 组件未在 DelphiXE2 中导入而发生错误。

要导入哪些组件以及如何导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:12:42.580

这些看起来像（非）DelphiX 组件名称。查看[http://www.micrel.cz/Dx/index.html](http://www.micrel.cz/Dx/index.html)以获得 DelphiXE2 支持。

# android - 在android上播放rtsp视频流后出现异常

> ID：11221315
> 
> 赞同：1
> 
> 时间：2012-06-27T07:28:09.667
> 
> 标签：android, video, stream, live, android-videoview

我正在制作一个可以在 android 盒子上播放实时流的 android 应用程序。我拥有的盒子有 android OS 2.3 并且适用于带有 url 之类的流

> http:// 服务器 /abc/abc/def.m3u8

但是来自客户端的流就像

> rtsp: // 服务器 /abc/abc.stream

即使它们玩得很好，但是任何像回到主屏幕这样的活动都会使我的应用程序崩溃。我无法在任何地方捕获异常/错误，它只是要求强制关闭/等待。

甚至 ACRA 也无法帮助我解决这个问题。

任何知道如何解决此问题或解决此问题甚至将带有`rtsp://xxxxxxx.yyyyy.stream`扩展名的网址转换为的人`http://xxxxxxx.yyyy.m3u8`，请帮助我。

非常感谢您提前。

哦！我为此目的使用 VideoView。具有表面视图的 Mediaplayer 并没有帮助我进行直播。

如果有人确定在高于 3.0 的操作系统版本中不会出现此问题，请支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T13:16:23.303

您需要通过创建相应的方法和清理资源来响应视频的 Activity 生命周期的变化

```
protected void onPause(){//Clear up resources or pause video}
protected void onDestroy(){}
protected void onStop(){} 
```

在您的活动生命周期中适当地响应这些调用。当然应该有帮助

# xquery - 如何为 Marklogic 安装和运行 Versi 设计模板？

> ID：11221319
> 
> 赞同：1
> 
> 时间：2012-06-27T07:28:31.387
> 
> 标签：xquery, marklogic

谁能告诉我如何为 Marklogic 安装和运行 Versi 设计模板？我按照入门指南中的说明进行操作，但它给了我错误。Versi 设计模板可在以下链接中找到：-

```
http://community.marklogic.com/code/versi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:31:29.403

据我所知，Versi 项目已经存在很长时间了。不确定它的更新情况如何。如果您正在考虑使用它来更快地开发 Web 应用程序，您可能还会对 RunDMC 感兴趣，它肯定会得到更积极的维护：

[http://community.marklogic.com/code/rundmc](http://community.marklogic.com/code/rundmc)

！

# asp.net-mvc - Automapper with NHibernate - 如何持久化映射对象？

> ID：11221328
> 
> 赞同：0
> 
> 时间：2012-06-27T07:28:54.613
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, automapper, automapper-2

我有一个使用 Fluent NHibernate 和 AutoMapper 的 ASP.NET MVC 应用程序。我主要使用 AutoMapper 将我的模型映射到 ViewModel，反之亦然。

在执行后者时，从我的视图模型映射回模型，我想知道如何将其映射到数据库中的特定实例，所以当我将更改提交回数据库时（使用我的 NHibernate 存储库层，通过我的服务层），更改将保持不变。

例子：

```
var advert = Mapper.Map<AdvertViewModel, Advert>(model);
_advertService.UpdateAdvert(advert); // then calls repo which commits current NHibernate trans * Nothing in the DB changes * 
```

如果我尝试提交我的 NHibernate 会话，以便在数据库中更新这个广告，尽管广告被分配了正确的 Key/Id 作为映射的一部分，我猜是因为 NHibernate 会话对这个广告实例一无所知（？）它不会写掉更改。

因此，我想知道如何与 NHibernate 一起处理这种映射场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:31:19.963

您可以执行以下操作：

```
// fetch the domain model to update
var domainModelToUpdate = _advertService.Get(viewModel.Id);

// Map the properties that are present in the view model to the domain model
// leaving other properties intact
Mapper.Map<AdvertViewModel, Advert>(viewModel, domainModelToUpdate);

// Update the domain model
_advertService.UpdateAdvert(domainModelToUpdate); 
```

但如果视图模型已经包含所有内容，则无需在更新之前获取域模型。您所要做的就是`unsaved-value`在您的身份列映射上指定 ，以便 NHibernate 知道实例是否是瞬态的，然后使用`SaveOrUpdate`：

```
Id(x => x.ID).WithUnsavedValue(0); 
```

或者，如果您使用可空整数作为您的身份 pass `null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:30:30.733

如果确实是会话问题 - 以下单例可能会帮助您

```
/// <summary>
/// Handles creation and management of sessions and transactions.  It is a singleton because 
/// building the initial session factory is very expensive. Inspiration for this class came 
/// from Chapter 8 of Hibernate in Action by Bauer and King.  Although it is a sealed singleton
/// you can use TypeMock (http://www.typemock.com) for more flexible testing.
/// </summary>
public sealed class NHibernateSessionManager
{
    #region Thread-safe, lazy Singleton

    System.IO.StreamWriter ConsoleWriter = null;

    /// <summary>
    /// This is a thread-safe, lazy singleton.  See http://www.yoda.arachsys.com/csharp/singleton.html
    /// for more details about its implementation.
    /// </summary>
    public static NHibernateSessionManager Instance
    {
        get
        {
            return Nested.NHibernateSessionManager;
        }
    }

    /// <summary>
    /// Initializes the NHibernate session factory upon instantiation.
    /// </summary>
    private NHibernateSessionManager()
    {
        InitSessionFactory();
    }

    /// <summary>
    /// Assists with ensuring thread-safe, lazy singleton
    /// </summary>
    private class Nested
    {
        static Nested() { }
        internal static readonly NHibernateSessionManager NHibernateSessionManager =
            new NHibernateSessionManager();
    }

    #endregion

    private void InitSessionFactory()
    {
        // Hold the config var
        FluentConfiguration config = Fluently.Configure();

        // Set the DB config
        MsSqlConfiguration dbConfig = MsSqlConfiguration.MsSql2005.ConnectionString(ConfigurationManager.ConnectionStrings["iSearchConnection"].ConnectionString);
        config.Database(dbConfig);

        // Load mappings from this assembly
        config.Mappings(m => m.FluentMappings.AddFromAssembly(Assembly.GetExecutingAssembly()));

        // Create session factory
        sessionFactory = config.BuildSessionFactory();
    }

    /// <summary>
    /// Allows you to register an interceptor on a new session.  This may not be called if there is already
    /// an open session attached to the HttpContext.  If you have an interceptor to be used, modify
    /// the HttpModule to call this before calling BeginTransaction().
    /// </summary>
    public void RegisterInterceptor(IInterceptor interceptor)
    {
        ISession session = ContextSession;

        if (session != null && session.IsOpen)
        {
            throw new CacheException("You cannot register an interceptor once a session has already been opened");
        }

        GetSession(interceptor);
    }

    public ISession GetSession()
    {
        return GetSession(null);
    }

    /// <summary>
    /// Gets a session with or without an interceptor.  This method is not called directly; instead,
    /// it gets invoked from other public methods.
    /// </summary>
    private ISession GetSession(IInterceptor interceptor)
    {
        ISession session = ContextSession;

        if (session == null)
        {
            if (interceptor != null)
            {
                session = sessionFactory.OpenSession(interceptor);
            }
            else
            {
                session = sessionFactory.OpenSession();
            }

            ContextSession = session;
        }

        return session;
    }

    /// <summary>
    /// Flushes anything left in the session and closes the connection.
    /// </summary>
    public void CloseSession()
    {
        ISession session = ContextSession;

        if (session != null && session.IsOpen)
        {
            session.Flush();
            session.Close();
        }

        if (ConsoleWriter != null)
        {
            ConsoleWriter.Flush();
            ConsoleWriter.Close();
        }

        ContextSession = null;
    }

    public void BeginTransaction()
    {
        ITransaction transaction = ContextTransaction;

        if (transaction == null)
        {
            transaction = GetSession().BeginTransaction();
            ContextTransaction = transaction;
        }
    }

    public void CommitTransaction()
    {
        ITransaction transaction = ContextTransaction;

        try
        {
            if (HasOpenTransaction())
            {
                transaction.Commit();
                ContextTransaction = null;
            }
        }
        catch (HibernateException)
        {
            RollbackTransaction();
            throw;
        }
    }

    public bool HasOpenTransaction()
    {
        ITransaction transaction = ContextTransaction;

        return transaction != null && !transaction.WasCommitted && !transaction.WasRolledBack;
    }

    public void RollbackTransaction()
    {
        ITransaction transaction = ContextTransaction;

        try
        {
            if (HasOpenTransaction())
            {
                transaction.Rollback();
            }

            ContextTransaction = null;
        }
        finally
        {
            CloseSession();
        }
    }

    /// <summary>
    /// If within a web context, this uses <see cref="HttpContext" /> instead of the WinForms 
    /// specific <see cref="CallContext" />.  Discussion concerning this found at 
    /// http://forum.springframework.net/showthread.php?t=572.
    /// </summary>
    private ITransaction ContextTransaction
    {
        get
        {
            if (IsInWebContext())
            {
                return (ITransaction)HttpContext.Current.Items[TRANSACTION_KEY];
            }
            else
            {
                return (ITransaction)CallContext.GetData(TRANSACTION_KEY);
            }
        }
        set
        {
            if (IsInWebContext())
            {
                HttpContext.Current.Items[TRANSACTION_KEY] = value;
            }
            else
            {
                CallContext.SetData(TRANSACTION_KEY, value);
            }
        }
    }

    /// <summary>
    /// If within a web context, this uses <see cref="HttpContext" /> instead of the WinForms 
    /// specific <see cref="CallContext" />.  Discussion concerning this found at 
    /// http://forum.springframework.net/showthread.php?t=572.
    /// </summary>
    private ISession ContextSession
    {
        get
        {
            if (IsInWebContext())
            {
                return (ISession)HttpContext.Current.Items[SESSION_KEY];
            }
            else
            {
                return (ISession)CallContext.GetData(SESSION_KEY);
            }
        }
        set
        {
            if (IsInWebContext())
            {
                HttpContext.Current.Items[SESSION_KEY] = value;
            }
            else
            {
                CallContext.SetData(SESSION_KEY, value);
            }
        }
    }

    private bool IsInWebContext()
    {
        return HttpContext.Current != null;
    }

    private const string TRANSACTION_KEY = "CONTEXT_TRANSACTION";
    private const string SESSION_KEY = "CONTEXT_SESSION";
    private ISessionFactory sessionFactory;
} 
```

从一些 NHibernate 大师网站上得到了这个——虽然我不记得是哪一个了——它基本上在你所处的任何应用程序上下文中为你跟踪和重建会话——对我的项目非常有用。

然后你只需在管理器上调用标准方法：

```
ISession ctx = NHibernateSessionManager.Instance.GetSession();

try
{
    ctx.BeginTransaction();
    ctx.Update(entity);
    ctx.CommitTransaction();
} 
```

您可能已经实现了一个很好的会话处理 - 但从信息来看，您遇到的问题听起来像是一个会话问题，所以如果这有帮助，请告诉我

# wordpress - 如何修改我的主题以响应 Wordpress 3.4 对图像标题的更改？

> ID：11221329
> 
> 赞同：0
> 
> 时间：2012-06-27T07:28:56.580
> 
> 标签：wordpress

Wordpress 3.4 版本对如何处理带有标题的附件进行了一些重大更改。特别是，附件按钮插入的标记已从这里更改

```
[caption id="####" caption="caption goes here"]<img.....>[/caption] 
```

对此

```
[caption id="####" ]<img src="abc">caption goes here[/caption] 
```

结果我的主题被打破了。

我了解主题设计师可能需要更新他们的主题作为回应。但是需要改变什么？

我的 wordpress 网站上有一个自定义主题，所以不能简单地点击更新主题。我需要自己进行必要的更改，但我需要更改什么？我在寻找模板中的哪些钩子或代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:09:05.023

Nacin 最近在[WordPress.org 论坛上](http://wordpress.org/support/topic/caption-broken-in-new-34-posts)发布了有关此内容的信息。你最好的办法是联系你的主题作者，让他们知道你遇到的问题——我相信他们已经知道了。

> 大家好。
> 
> 这是 WordPress 3.4 中的故意更改。WordPress 没有将 caption="" 作为 [caption] 短代码的属性，而是将标题插入到短代码的主要内容中，在图像之后以及 [caption] 和 [/caption] 之间。
> 
> 3.4 中的这种更改对于允许在标题中使用 HTML 是必要的。但是，就像我们开发的所有东西一样，它是故意编码的，因此它可以向后兼容。任何使用“img_caption_shortcode”过滤器来覆盖字幕生成方式的主题都可以正常工作，即使格式发生了变化。
> 
> 如果我不得不猜测，所有这些主题的共同问题是它们调用 add_shortcode('caption', 'some_function_in_their_theme'); 自定义标题，而不是使用上述过滤器。这是错误的。主题不应该这样做。如果您使用的主题这样做，请联系主题作者。如果他们不同意这是他们主题的问题，我很乐意向他们解释。
> 
> 我在看到错误报告后来到这里，但请注意，在两周和 250 万次下载之后，这是我在这个问题上看到的唯一线程，所以谢天谢地，它似乎没有对许多网站产生不利影响。如果它影响了你，我很抱歉。如果您确实知道任何其他线程，请将它们链接到我。
> 
> 谢谢， 纳辛

# sed - 破译这个 sed 单线

> ID：11221331
> 
> 赞同：4
> 
> 时间：2012-06-27T07:29:00.160
> 
> 标签：sed

我想从文件中删除重复的行，而不对文件进行排序。

为什么这对我有用的示例：在`$HISTFILE`不更改时间顺序的情况下从 Bash 中删除重复项。

这个页面有一个单行来做到这一点：

```
http://sed.sourceforge.net/sed1line.txt 
```

这是单线：

```
sed -n 'G; s/\n/&&/; /^\([ -~]*\n\).*\n\1/d; s/\n//; h; P' 
```

我问了一个系统管理员，他告诉我“你只需复制脚本就可以了，不要对此进行哲学思考”，这很好，所以我在这里问，因为它是一个开发者论坛，我相信人们可能会像我一样，怀疑使用他们不理解的东西：

请你提供一个伪代码解释那个“黑魔法”脚本在做什么，好吗？我试着解析我脑海中的咒语，但尤其是中央部分相当困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:33:22.807

我会注意到，在我当前的语言环境中，这个脚本似乎不适用于我的`sed`(GNU sed 4.1.5) 副本。如果我用它运行`LC_ALL=C`它工作正常。

这是脚本的注释版本。 `sed`基本上有两个寄存器，一个称为“模式空间”，用于（基本上）当前输入行，另一个是“保持空间”，可由脚本用于临时存储等。

```
sed -n '                    # -n: by default, do not print
    G                       # Append hold space to current input line
    s/\n/&&/                # Add empty line after current input line
    /^\([ -~]*\n\).*\n\1/d  # If the current input line is repeated in the hold space, skip this line
                            # Otherwise, clean up for storing all input in hold space:
    s/\n//                  # Remove empty line after current input line
    h                       # Copy entire pattern space back to hold space
    P                       # Print current input line' 
```

我想添加和删除一个空行是为了让中心模式保持相对简单（你可以指望在当前行之后和匹配行开头之前有一个换行符）。

所以基本上，整个输入文件（没有重复）被保存（以相反的顺序）在保持空间中，如果模式空间的第一行（当前输入行）在模式空间的其余部分（其中当脚本开始处理这一行时从保留空间中复制），我们跳过它并重新开始。

条件中的正则表达式可以进一步分解；

```
^    # Look at beginning of line (i.e. beginning of pattern space)
\(   # This starts group \1
[ -~] # Any printable character (in the C locale)
*     # Any number of times
\n    # Followed by a newline
\)   # End of group \1 -- it contains the current input line
.*\n # Skip any amount of lines as necessary
\1   # Another occurrence of the current input line, with newline and all 
```

如果此模式匹配，脚本将丢弃模式空间并从下一个输入行 ( `d`) 重新开始。

您可以通过更改`[ -~]`为使其独立于语言环境工作`[[:print:]]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T08:50:17.073

该代码对我不起作用，可能是由于某些语言环境设置，但这确实：

```
 vvv
sed -n 'G; s/\n/&&/; /^\([^\n]*\n\).*\n\1/d; s/\n//; h; P'
                          ^^^ 
```

让我们首先将这本书（即 sed 信息页面）翻译成一些有害的东西。

```
# The standard sed loop
my $hold = "";
while ($my pattern = <>) {
    chomp $pattern;

    $pattern = "$pattern\n$hold";           # G
    $pattern =~ s/(\n)/$1$1/;               # s/\n/&&/
    if ($pattern =~ /^([^\n]*\n).*\n\1/) {  # /…/
        next;                               # d
    }
    $pattern =~ s/\n//;                     # s/\n//
    $hold = $pattern;                       # h
    $pattern =~ /^([^\n]*\n?)/; print $1;   # P
} 
```

好的，基本思想是保持空间包含到目前为止看到的所有行。

1.  **`G`**：在每个循环开始时，将保留空间附加到当前行。现在我们有一个由当前行和它之前的所有唯一行组成的字符串。
2.  **`s/\n/&&/`**：将分隔它们的换行符变成双换行符，以便我们可以匹配后续和非后续重复项，请参见下一步。
3.  **`^\([^\n]*\n\).*\n\1/`**: 在当前文本中查找以下内容：在所有行的开头 ( `^`) 查找第一行，包括尾随换行符 ( `\([^\n]*\n\)`)，然后是任何内容 ( `.*`)，然后是换行符 ( `\n`)，然后是相同的第一行，包括重复的换行符再次（`\1`）。如果后续两行相同，则`.*`正则表达式中的 将匹配空字符串，但`\n`由于上一步中的换行符重复，两者仍将匹配。所以基本上这会询问第一行是否再次出现在其他行中。
4.  **`d`**：如果有匹配，这是一个重复的行。我们丢弃这个输入，将保持空间保持原样，作为目前看到的所有唯一行的缓冲区，然后继续下一行输入。
5.  **`s/\n//`**：否则，我们继续，然后将双换行符变回单换行符。
6.  **`h`**：我们将当前行包含在所有唯一行的列表中。
7.  **`P`**: 最后打印这个新的唯一行，直到换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T10:09:48.373

对于要解决的实际问题，这是一个使用 awk 的更简单的解决方案（至少看起来如此）：

```
awk '!_[$0]++' FILE 
```

简而言之`_[$0]`，对于每条唯一行的（外观）计数器，对于`$0`第二次出现的任何行 ( ) `_[$0] >= 1`，`!_[$0]`计算结果为`false`，导致它除了第一次出现外不会被打印。

请参阅[https://gist.github.com/ryenus/5866268](https://gist.github.com/ryenus/5866268)（归功于我最近访问的一个论坛。）

# iphone - 如何更改标签栏控制器项目名称的字体大小？

> ID：11221333
> 
> 赞同：16
> 
> 时间：2012-06-27T07:29:07.267
> 
> 标签：iphone, objective-c, xcode

我正在做一个基于 tabbarController 的应用程序。我有 3 个标签栏项目。

我的问题是：如何更改标签栏项目标题的字体样式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T08:23:24.303

```
[self.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                            [UIFont fontWithName:@"AmericanTypewriter" size:20.0f], UITextAttributeFont,
                                            [UIColor blackColor], UITextAttributeTextColor,
                                            [UIColor grayColor], UITextAttributeTextShadowColor,
                                            [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                            nil]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-03T16:13:11.360

这将在整个应用程序中一劳永逸地更改您的 UITabBarItem 字体

对于 Swift，在 AppDelegate 的 didFinishLaunching 中使用它：

斯威夫特 3：

```
UITabBarItem.appearance().setTitleTextAttributes([NSForegroundColorAttributeName:UIColor.blue,NSFontAttributeName: UIFont(name: "Montserrat", size: 11)!], for: .normal)

UITabBarItem.appearance().setTitleTextAttributes([NSForegroundColorAttributeName:UIColor.red,NSFontAttributeName: UIFont(name: "Montserrat", size: 11)!], for: .selected) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:33:36.587

对不起，我不认为有办法做到这一点。如果你很绝望，你需要编写自己的标签栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:36:48.447

遗憾的是，目前这在 iOS 上是不可能的，除非您构建自己的自定义标签栏，这对于 iOS5 上的故事板来说并不是很困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T07:39:19.350

不可能，创建自定义标签栏子类化 UITabbar

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-07T09:30:02.080

如果你看到这个错误：`'UITextAttributeTextShadowOffset' is deprecated: first deprecated in iOS 7.0 - Use NSShadowAttributeName with an NSShadow instance as the value.`，试试这个。

```
NSShadow *shadow = [[NSShadow alloc] init];
shadow.shadowColor = [UIColor grayColor];
shadow.shadowOffset = CGSizeMake(0.0, 0.5);

NSDictionary *attribute = [NSDictionary dictionaryWithObjectsAndKeys:
[UIFont fontWithName:@"AmericanTypewriter" size:10.0f], NSFontAttributeName,
[UIColor blackColor], NSForegroundColorAttributeName,
 shadow,NSShadowAttributeName,nil];
[[UITabBarItem appearance] setTitleTextAttributes:attribute forState:UIControlStateNormal]; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-05-19T11:43:42.760

试试这个。

```
[[UITabBarItem appearanceWhenContainedIn:[UITabBar class], nil]
  setTitleTextAttributes:@{NSForegroundColorAttributeName:
    [UIColor colorWithRed:0/255.0f green:130/255.0f blue:202/255.0f alpha:1.0],
    NSFontAttributeName:[UIFont fontWithName:@"Signika-Semibold" size:20.0]
  }
forState:UIControlStateNormal]; 
```

# image - Imagemagick 比例和图像质量

> ID：11221336
> 
> 赞同：4
> 
> 时间：2012-06-27T07:29:20.633
> 
> 标签：image, resize, imagemagick, scale

我使用 convert 命令和 -scale 参数将图像缩小到其比例的 50%。生成的图像质量很差。我可以使用任何额外的选项来获得更好的结果吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:46:28.393

`-scale`很快，但我相信`-resize`或者`-thumbnail`更好，你可以使用任何你喜欢的过滤器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T09:26:57.450

使用`-sharpen 0x1.2`with `-resize x%`with`-quality 95`对我来说效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-14T14:05:19.983

我试图创建 PDF 的缩略图，但结果很差，直到我添加`-density 400`，这是我在[这里](http://www.imagemagick.org/discourse-server/viewtopic.php?t=12235#p40279)找到的建议。以下是它可以产生的差异的示例。我从[这里](http://ankn.uaf.edu/publications/clipart/)得到了 PDF 。看看熊和鸟背后的线条。

# 没有`-density 400`

完整命令：`convert -resize 500x500 catalog.pdf[0] catalog-page1-resized.png`

文件大小：180 KB

[![没有-密度 400 的图像](../Images/0be9f10ed70b91f31b266bfa3e1b26a1.png)](https://i.stack.imgur.com/LchGd.png)

# 和`-density 400`

完整命令：`convert -density 400 -resize 500x500 catalog.pdf[0] catalog-page1-resized.png`

文件大小：185 KB

[![密度为 400 的图像](../Images/c0fa8cb516cb16cabdf6d32580cf907a.png)](https://i.stack.imgur.com/ZBvFp.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T14:15:46.003

使用`-quality 80 -adaptive-resize`更适合较大的照片。

如果您需要模糊输出，请使用`-interpolative-resize`而不是`-adaptive-resize`

# android - android：如何在编辑文本上解释用户输入

> ID：11221339
> 
> 赞同：0
> 
> 时间：2012-06-27T07:29:40.153
> 
> 标签：android, android-edittext

**当用户输入值**以编辑文本时，我用来替换以下`.(dot)`代码`,(coma)`

 **InputFilter[] FilterArray = new InputFilter[1]; FilterArray[0] = new InputFilter(){

```
 @Override
        public CharSequence filter(CharSequence arg0, int arg1, int arg2,
                Spanned arg3, int arg4, int arg5) {
            String temp =arg0.toString();
            temp=temp.replace('.',',');

            return temp;
        }

    };

        etxt_kg.setFilters(FilterArray); 
```

上面的代码成功地解释了用户的每个输入。但它什么都不能代替 .(dot)

现在：输入：12.45 输出：1245

我想要什么：输入 12.45 输出：12,45

任何帮助（TIA）

编辑：

问题出在 xml 中。 EditText inputType="number" 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:42:21.613

我面临同样的情况。这是一个解决方案

使用以下片段

```
InputFilter filter = new InputFilter() {

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        for (int i = start; i < end; i++) {
            if (source.charAt(i) == '.') {
                return ",";
            }
        }
        return null;
    }
};

EditText editText = (EditText) findViewById(R.id.rg);
editText.setFilters(new InputFilter[] {filter}); 
```

**下面是我的工作片段**

```
package org.vipul;

import android.app.Activity;
import android.os.Bundle;
import android.text.InputFilter;
import android.text.Spanned;
import android.widget.EditText;

public class AbcActivity extends Activity {
    EditText text;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        EditText etxt_kg = (EditText) findViewById(R.id.rg);
        etxt_kg.setMaxHeight(etxt_kg.getHeight());
        InputFilter filter = new InputFilter() {

            @Override
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
                for (int i = start; i < end; i++) {
                    if (source.charAt(i) == '.') {
                        return ",";
                    }
                }
                return null;
            }
        };

        // EditText editText = (EditText) findViewById(R.id.rg);
        etxt_kg.setFilters(new InputFilter[] {
            filter
        });

    }
} 
```**

# file - 如何解密使用 SSIS 包中的 GNU 隐私助手加密的文件

> ID：11221341
> 
> 赞同：1
> 
> 时间：2012-06-27T07:29:41.143
> 
> 标签：file, encryption, ssis

我必须使用 SSIS 包解密文件夹中的所有文件，然后我必须处理这些解密的文件。

我在我的系统中安装了 GNU 隐私帮助，它允许手动加密/解密文件。但是如何以编程方式解密文件？

欢迎任何帮助或建议。谢谢。

# ios - 在 settings.bundle 中按下多值按钮后没有表格视图

> ID：11221344
> 
> 赞同：0
> 
> 时间：2012-06-27T07:29:50.900
> 
> 标签：ios, inappsettingskit

我在我的应用程序中添加了一个“Settings.Bundle”和 InAppSettingsKit，它工作了一半；-) 我的问题：我在 Root.plist 中添加了一个 MultiValue 列表，如果我按下按钮转到这个列表，我总是“后退” " 到我的应用程序的 MainView。

这是应该发生的事情：MainView -> SettingsView ->“设置中的下一个视图（例如多值）”->“多值表视图”。

这就是发生的事情：MainView -> SettingsView ->“设置中的下一个视图” -> MainView

仅当我从我的应用程序中调用设置时才会发生这种情况。如果我通过“设置-> MyApp”一切都很好。

如果我使用“setModalTransitionStyle:UIModalTransitionStylePartialCurl”调用 SettingsView，然后按下按钮转到多值列表，我只会看到黑色背景和向上卷曲的 MainView，并且无法再返回。

有人知道我的代码中缺少的部分可能在哪里！？

```
[self.appSettingsViewController setModalTransitionStyle:UIModalTransitionStylePartialCurl];
UINavigationController *aNavController = [[UINavigationController alloc]       initWithRootViewController:self.appSettingsViewController];

appSettingsViewController.showDoneButton = YES;
[self presentModalViewController:aNavController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:02:43.617

您需要`-modalTransitionStyle`为导航控制器设置，而不是视图控制器。

```
UINavigationController *aNavController = [[UINavigationController alloc]       initWithRootViewController:self.appSettingsViewController];
[aNavController setModalTransitionStyle:UIModalTransitionStylePartialCurl];
appSettingsViewController.showDoneButton = YES;
[self presentModalViewController:aNavController animated:YES]; 
```

# ruby-on-rails - Rails 控制台无提示运行

> ID：11221345
> 
> 赞同：6
> 
> 时间：2012-06-27T07:29:50.993
> 
> 标签：ruby-on-rails, console, jruby

当我运行我的rails控制台时，我得到了这样的东西：

```
Loading development environment (Rails 3.2.3)
/Users/sebastiannowak/.rvm/gems/jruby-1.6.7@global/gems/bundler-1.1.0/lib/bundler.rb:254 warning: shadowing outer local variable - path
Switch to inspect mode.
Time.now
Time.now
2012-06-27 09:27:21 +0200 
```

如您所见，我可以与控制台交互，但这很不舒服。我运行 JRuby 1.6.7。有人有这样的问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T07:59:47.953

很可能在你的某个地方`~/.irbrc`，你正在做：

```
IRB.conf[:PROMPT_MODE] = :XMP 
```

尝试删除该行。或将其更改为：

```
IRB.conf[:PROMPT_MODE] = :SIMPLE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-04T22:46:52.360

在较新版本的 JRuby 上，Rails 控制台对我来说还有很多其他问题：

*   命令在下一行重复
*   退出需要多个 Enter 键
*   键入时第一个命令不显示

使用以下命令运行控制台为我修复了它：

```
jruby -Xlaunch.inproc=true -S rails c 
```

# android - 蜂巢平板App底部标签栏最佳布局设计

> ID：11221350
> 
> 赞同：0
> 
> 时间：2012-06-27T07:30:19.013
> 
> 标签：android, android-layout, android-3.0-honeycomb

我想在 HoneyComb Tablet 的底部设计 Tab Bar。那么，是否有任何特定的方式或栏可用于设计底部标签栏的布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:39:23.577

只需在 Android 中使用默认 TabHosts 并添加属性

`android:layout_alignParentBottom="true"`对于 TabWidget

有关更多信息，请参见下面的链接

1.  [如何在屏幕底部对齐 TabHost](http://envyandroid.com/archives/326/align-tabhost-at-bottom)
2.  [Android：底部的标签](https://stackoverflow.com/questions/2395661/android-tabs-at-the-bottom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:39:24.530

绘制 iphone 类型的标签栏

我通常在 LinearLayout Horizo​​ntal 中使用 TextView 和 Background Gardients。

TextView 具有可绘制的顶部属性，可以帮助包含图标。

我不推荐默认选项卡布局

```
public void setFooterStyle(Context c,TextView profile,TextView parking,TextView taxi,TextView history,TextView help,int flag)
{   
    if(flag==0)
    {
        profile.setBackgroundResource(R.drawable.grey_background_gradient);
        profile.setTextColor(Color.rgb(255, 255, 255));
        profile.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.profile1, 0, 0);
    }
    else if(flag==1)
    {
        parking.setBackgroundResource(R.drawable.grey_background_gradient);
        parking.setTextColor(Color.rgb(255, 255, 255));
    }
    else if(flag==2)
    {
        taxi.setBackgroundResource(R.drawable.grey_background_gradient);
        taxi.setTextColor(Color.rgb(255, 255, 255));
        taxi.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.taxi_on, 0, 0);
    }
    else if(flag==3)
    {
        history.setBackgroundResource(R.drawable.grey_background_gradient);
        history.setTextColor(Color.rgb(255, 255, 255));
        history.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.history_on, 0, 0);
    } 
```

在你的活动中

```
Global.getInstance().setFooterStyle(getApplicationContext(),(TextView) findViewById(R.id.btnprofile),(TextView)findViewById(R.id.btnparking),(TextView)findViewById(R.id.btntaxi),(TextView) findViewById(R.id.btnhistory),(TextView) findViewById(R.id.btnhelp), 4); 
```

# service - OSGi 中的服务和包之间如何交换数据？

> ID：11221351
> 
> 赞同：4
> 
> 时间：2012-06-27T07:30:29.007
> 
> 标签：service, osgi, bundle

我是 OSGi 的新手。无论我阅读什么教程，我都无法找到服务和捆绑包之间的数据交换方式。我知道一个包必须在服务注册表中注册，以便其他包可以使用它们。但是我无法了解服务和捆绑包之间的数据是如何交换的。与 Web 服务一样，数据以 XML 格式或类似并使用 Http 协议进行交换。那么数据是如何在服务和使用它的包之间交换的。它也是通过某种协议还是如何？而且它是否涉及任何开销。请帮忙

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T08:32:03.407

不涉及任何协议。您执行标准的 Java 方法调用。

它的工作原理基本上是这样的：

1.  您为您的服务定义一个 Java 接口。只是一个普通的接口，没有什么特别的实现。例如

    接口 TimeService { public String getCurrentTime(); }

2.  你实现了接口（在一个单独的包中，你不会从你的包中导出）

3.  您在 OSGi 服务注册表中注册此接口：

    timeServReg = bc.registerService(TimeService.class.getName(), new TimeServiceSimple(), props);

4.  在第二个捆绑包 - 想要使用它的捆绑包中，您搜索此服务：

    timeRef = bc.getServiceReference(TimeService.class.getName()); if (timeRef != null) { timeService = (TimeService) bc.getService(timeRef); }

5.  您只需使用刚刚获得的 Java 对象即可使用该服务。您调用方法：

    System.out.println("当前时间为：" + timeService.getCurrentTime());

当然有很多细节和好的做法，例如使用 ServiceTracker 来查找服务等，但这是基础。

你可以[在这里找到很多例子。](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T08:30:17.377

OSGi 服务注册表就像一个对象注册表。过于简单化，它就像一个带有字符串键和对象值的映射。任何捆绑软件都可以使用服务对象实现的接口名称将服务对象放入该映射中。然后其他包可以使用接口名称查找服务对象。它都在同一个 Java VM 进程中运行。因此，除了直接使用对象之外，没有其他通信。OSGi 服务注册表添加了新的 API 以使用 Java 泛型和类文字。这使得使用 OSGi 服务注册表更安全。

另一个特性是 OSGi 远程服务。它允许向运行在不同 Java 进程（通常在不同主机上）中的其他 OSGi 框架公开服务。可用的通信有多种实现方式。有些使用 Web 服务 (xml/http)，有些使用直接 RPC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:35:54.153

数据在 JVM 内部交换，基于服务生产者和服务消费者都必须导入的服务接口（Java 接口 .class 文件）。开销应该与标准 java 调用几乎相同（但如果我错了，请有人纠正我）。

现在，至于查找此类服务，使用 OSGi 服务注册表和服务跟踪器是一种方法，但您可能希望查看声明式服务，或者它的包装器，即 maven [SCR](http://felix.apache.org/site/apache-felix-maven-scr-plugin.html)及其注释，作为处理更多的方法轻松，并提供服务注入功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T10:23:33.607

对于 OSGi 中的包之间的通信，有三种方式：1）蓝图 2）声明式服务 3）IPOJO

Blueprint 类似于 Spring 中的 DI，使用 Blueprint(xml 文件) 声明式服务同时支持注解和 xml。IPOJO 还支持注解和 xml。

# database - 如何从oracle数据库中导出用户。（Oracle 10g 快捷版）

> ID：11221353
> 
> 赞同：3
> 
> 时间：2012-06-27T07:30:33.437
> 
> 标签：database, oracle, oracle10g, export

我正在尝试从数据库中导出用户，但它的显示

![在此处输入图像描述](../Images/dfaf4b2c2bb60d9ef3af0211c9aa8b27.png)

但如果我试图导出整个数据库，那么它会成功完成。我只想导出一个用户。如何解决此 Oracle 字符集的问题。

感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:03:03.987

要仅导出 1 个用户，您可以键入以下内容：

```
exp system/<system_password>@<database> file=<user>.dmp owner=<user> 
```

导出实用程序不会再询问任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T06:02:57.600

前一个对我不起作用，但下面对我有用。好心检查

```
exp system/<system_password> file=<export_filename>.dmp owner=<schema_user_name> 
```

**例子**

```
exp system/oracle file=test_database.dmp owner=test_database 
```

干杯！！

# mysql - 想为mysql数据库设计国家、货币、时区表？

> ID：11221356
> 
> 赞同：0
> 
> 时间：2012-06-27T07:30:39.903
> 
> 标签：mysql, database, database-design, phpmyadmin

我正在从事国际项目，并希望根据我的项目要求设计 3 个主要表格结构：

1.  国家表（包含所有`country_name`, `iso_code`, `calling_codes`）
2.  货币表（包含所有`currency_name`, `currency_code`）
3.  时区表（包含所有`GMT_coordinates`及其`GMT_fullname`类似`-10.0` `(GMT-10:00)-Hawaii`：）

我对表数据类型结构感到困惑。我搜索并谷歌它，但许多混淆的答案和不同的结构。

因此，请建议具有适当字段数据类型的适当表结构，我将感谢您的所有建议和答案。

提前感谢所有的小伙伴！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T08:11:52.253

使用世界上每个国家/地区的货币和时区时都会有一些惊喜。我会查看 Geonames 及其数据，以了解会发生什么。

根据 Geonames 数据的经验，您将需要以下字段：

> **国家信息**
> 
> *   国家名称 - VARCHAR(50)
> *   ISO 代码 - CHAR(2)
> *   调用代码 - INTEGER(4)
> 
> **货币**
> 
> *   代码 - CHAR(3)
> *   名称 - VARCHAR(10)

借助 Geonames 数据库中的数据，这些数据字段及其各自的大小应涵盖世界上每个国家/地区。我没有制作实际模型或其链接，因为您没有指定您正在使用的语言。我不确定时区字符串的适当长度应该是多少，我想你需要查一下。

如果您还需要用所有国家/地区填充表格，Geonames 就是这样。

国家名称、ISO 代码、呼叫代码和货币：http: [//download.geonames.org/export/dump/countryInfo.txt](http://download.geonames.org/export/dump/countryInfo.txt)

时区有点棘手，因为许多国家/地区都有多个时区。数据在那里，但您必须迭代数据集以找到每个国家/地区的不同时区。

Geonames 的数据转储：http: [//download.geonames.org/export/dump/](http://download.geonames.org/export/dump/)

这是关于将 Geonames 数据导入 MySQL 数据库的论坛主题：http: [//forum.geonames.org/gforum/posts/list/15/732.page](http://forum.geonames.org/gforum/posts/list/15/732.page)

# php - PHP：评估字符串中的变量，然后更改变量的值

> ID：11221360
> 
> 赞同：0
> 
> 时间：2012-06-27T07:31:03.000
> 
> 标签：php

我有一个字符串，如下所示：

```
$s1 = "Apples";
$s2 = "$s1 are great";
echo $s2; 
```

我对 PHP 的理解是，第二行的双引号会导致 $s1 在字符串中被求值，输出会是

```
Apples are great 
```

但是，如果我想将 $s2 保留为“模板”，在其中更改 $s1 的值，然后重新评估它以获取新字符串，该怎么办？这样的事情可能吗？例如：

```
$s1 = "Apples";
$s2 = "$s1 are great";
echo $s2 . "\n";

$s1 = "Bananas";
$s3 = "$s2";
echo $s3 . "\n"; 
```

我发现以下输出是：

```
Apples are great 
Apples are great 
```

我希望得到的更像是：

```
Apples are great 
Bananas are great 
```

使用 PHP 是否可以做到这一点，我可以保持“模板”字符串相同，更改输入变量，然后重新评估为新字符串？或者这对 PHP 来说是不可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:35:49.630

好吧，你可以做这样的事情：（只是一个快速的混搭）。

```
$template = "{key} are great";
$s1 = "Apples";
$s2 = "Bananas";

echo str_replace('{key}',$s1,$template) . "\n";
echo str_replace('{key}',$s2,$template) . "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:47:35.927

您可以尝试使用[匿名函数（闭包）](http://www.php.net/manual/en/functions.anonymous.php)来获得类似的结果：（仅限 PHP 5.3 以上！）

```
$s1 = function($a) { 
    return $a . ' are great';
};

echo $s1('Apples');
echo $s1('Bananas'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:59:34.777

您还可以使用引用传递（尽管当您希望修改原始内容时，它更常用于函数中）：

```
<?php

$s4 = " are great";
$s1 = "Apples";
$s2 = &$s1;

echo $s2.$s4;

$s1 = "Bananas";
$s3 = $s2;
echo $s3.$s4;

?> 
```

输出：

```
Apples are great
Bananas are great 
```

# android - 在画布位图android ics中快速绘制

> ID：11221368
> 
> 赞同：0
> 
> 时间：2012-06-27T07:31:42.267
> 
> 标签：android, bitmap, draw, android-canvas, invalidation

我一直在开发一个应用程序来绘制 ics android 平板电脑，我遇到了一个我不知道如何解决的问题。

问题是我绘制正确并且实时绘制但是当我走得非常快（在真正的平板电脑上测试）时，圆圈并不是真正的圆圈，它们看起来像 5 或 6 边的 pilygons ......

在这里，我声明位图并将其分配给画布：

```
 Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    width = size.x;
    height = size.y;
    bm = Bitmap.createBitmap(width, height-50,Bitmap.Config.ARGB_8888); 
    c = new Canvas(bm); 
```

这里是我用来获取 x, y 的代码：（layP 是“Painter”，你将在这里看到

```
class SaveOnTouchListener implements OnTouchListener{

    public boolean onTouch(View v, MotionEvent e) {
        final float x = e.getX();
        final float y = e.getY();
        if(e.getAction() == MotionEvent.ACTION_DOWN){  
            startx.add(x);
            starty.add(y);
            x1 = x;
            y1 = y;
        } else if(e.getAction() == MotionEvent.ACTION_MOVE){  
            endx.add(x);
            endy.add(y);
            x2 = x;
            y2 = y;
            if (id == 1) strokes.add(sb.getProgress()+1);
            else strokes.add(4*(sb.getProgress()+1));
            layP.draw();
            startx.add(x);
            starty.add(y);
            x1 = x;
            y1 = y;
        } else if(e.getAction() == MotionEvent.ACTION_UP){  
            x2 = x;
            y2 = y;
            endx.add(x);
            endy.add(y);
            strokes.add(stroke);
            layP.draw();
            return false;
        }
        return true;
    }

} 
```

最后是“画家”的代码，它是画布和 onDraw() 方法（我使用 invalidate(t,l,r,b) 对其进行优化......）

```
private class Painter extends View{
    public Painter(Context context){
        super(context);
    }

    public void draw() {
        if (firstPainting) {
                            //paint the canvas white just once
            Paint paint = new Paint();
            paint.setStyle(Paint.Style.FILL);
            paint.setColor(Color.WHITE);
            c.drawPaint(paint);
            firstPainting = false;
            layP.invalidate();
        }
        else {
                Paint paint = new Paint();
                paint.setStyle(Paint.Style.FILL);
                paint.setAntiAlias(true);
                int r = startx.get(startx.size()-1).intValue();
                int t = starty.get(starty.size()-1).intValue();
                int l = endx.get(endx.size()-1).intValue();
                int b = endy.get(endy.size()-1).intValue();
                int n = strokes.get(strokes.size()-1);
                paint.setStrokeWidth(n);
                paint.setColor(COLOR.BLACK);
                c.drawLine(r, t, l, b, paint);
                c.drawCircle(r, t, n/2, paint);

                if (l > r) {
                    int aux = l;
                    l = r;
                    r = aux;
                }
                if (t > b) {
                    int aux = t;
                    t = b;
                    b = aux;
                }
                r += n;
                l -= n;
                t -= n;
                b += n;
                if (t < 0) t = 0;
                if (l < 0) l = 0;
                layP.invalidate(l,t,r,b);
        }
    }

    @Override 
    protected void onDraw(Canvas c) {
            c.drawBitmap(bm, 0, 0, null);
    }
}
} 
```

正如你所看到的，我使用了一个位图，我只是使需要失效的区域无效，我不知道还能做什么。

有没有正确绘制的方法？即使我必须更改所有位图和画布..

我试图实现贝塞尔，但我不知道该怎么做，因为在画线之前我需要下一点。

我找到了贝塞尔方法，我想我要试试这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:47:28.653

我根本不清楚你想做什么。从您的文字中，听起来您正在尝试进行基本的“手指绘画”，您基本上只是绘制与输入匹配的曲线。您的代码对我来说看起来不太像，但是在您使用的变量之间，我们没有看到 (`stroke`和`strokes`) 的声明和单字母变量名称，我有点迷茫。当然是这两行：

```
c.drawLine(r, t, l, b, paint);
c.drawCircle(r, t, n/2, paint); 
```

让您看起来不仅仅是简单地绘制用户用手指绘制的内容。

Still, I'd like to try to help. `drawCircle()` really should always draw circles. Drawing lines between points is going to give you sharp corners (polygons if you close a shape). If you want to draw paths like this smoothly, then Bézier curves are indeed what you want.

If you download the [sample code from the SDK](http://developer.android.com/tools/samples/index.html), there's an example called "FingerPaint" that does a very good job demonstrating how to draw arbitrary curves smoothly.

# c# - Android中DataInputStream是否只接收2048字节的数据？

> ID：11221369
> 
> 赞同：0
> 
> 时间：2012-06-27T07:31:53.770
> 
> 标签：c#, java, android, .net, datainputstream

从 PC（服务器端）C#.Net 应用程序必须通过 Wi-Fi 将 22000 字节的数据发送到 Android 设备（客户端）。但`dataInputStream`在 Android 设备中仅显示 2048 字节。

```
dataInputStream = new DataInputStream(workerSocket.getInputStream());
byte[] rvdMsgByte = new byte[dataInputStream.available()];
for (int i = 0; i < rvdMsgByte.length; i++)
    rvdMsgByte[i] = dataInputStream.readByte();
String rvdMsgStr = new String(rvdMsgByte); 
```

我对以下内容感到困惑：

1.  PC只能发送2048字节的数据吗？
2.  或者，Android 设备是否只有 2048 字节的容量来接收数据？
3.  或者，`dataInputStream`即使在设备收到所有字节后，是否也只显示 2048 字节？

    If (data_received <= 2048 bytes) 以上代码完美运行；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:35:16.960

你基本上不应该使用`InputStream.available()`. *这告诉你现在*有多少数据可用——如果它仍然通过网络传输，这可能不是全部信息。

如果流将在消息末尾结束，您应该简单地继续循环，一次读取一个块，直到您完成（最好*不*只是一次读取一个字节！）。例如：

```
byte[] readFully(InputStream input) throws IOException {
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    byte[] buffer = new byte[8 * 1024]; // 8K buffer
    int bytesRead;
    while ((bytesRead = input.read(buffer)) > 0) {
        output.write(buffer, 0, bytesRead);
    }
    return output.toByteArray();
} 
```

如果您需要将流分解为消息，您应该考虑如何做到这一点 - 在数据之前发送“消息长度”前缀通常是最佳选择。

一旦你阅读了所有的数据，你不应该*这样*做：

```
String rvdMsgStr = new String(rvdMsgByte); 
```

这将使用平台默认编码将字节转换为文本。如果这是真正的文本数据，您应该使用字符串构造函数重载，它可以让您明确指定编码。

如果它*不是*真正的文本数据，你不应该试图这样对待它。如果您确实需要将其表示为字符串，请使用 base64。

`DataInputStream`另请注意，据我所知，这里没有必要使用。

# namespaces - SQL Server 2008：如何从元素中删除命名空间，但让它显示在根目录上

> ID：11221375
> 
> 赞同：3
> 
> 时间：2012-06-27T07:32:23.530
> 
> 标签：namespaces, for-xml

我正在使用 SQL Server2008 FOR XML 子句使用 bcp 生成 XML 文件。

当我使用以下查询时，结果很好：

```
WITH XMLNAMESPACES (        
   'http://base.google.com/ns/1.0' AS g,
   DEFAULT 'http://www.w3.org/2005/Atom'
    )
select ID, Name AS "g:Name" from PaymentMethods For XML PATH ('entry'), Root('feed') 
```

结果：

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
  <entry>
    <ID>1</ID>
    <g:Name>BPay</g:Name>
  </entry>
  <entry>
    <ID>2</ID>
    <g:Name>Cash</g:Name>
  </entry>
</feed> 
```

但我还想在根之后添加一些静态元素，比如标题和日期。我能够做到这一点，但是随后，命名空间标签也出现在我不想要的元素中。请注意，我想要一些带有命名空间前缀的元素，例如，

我为此使用的查询是：

```
WITH XMLNAMESPACES (
    'http://base.google.com/ns/1.0' AS g,
    DEFAULT 'http://www.w3.org/2005/Atom'
    )
SELECT 
'Google Feed' As Title,
CONVERT(Date, getdate()) As Updated,
(   
select ID, Name AS "g:Name" from PaymentMethods For XML PATH ('entry'), TYPE
)

FOR XML PATH(''),   Root('feed') 
```

我得到的结果是：

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
  <Title>Google Feed</Title>
  <Updated>2012-06-27</Updated>
  <entry xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
     <ID>1</ID>
    <g:Name>BPay</g:Name>
  </entry>
 <entry xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
    <ID>2</ID>
    <g:Name>Cash</g:Name>
  </entry>
</feed> 
```

而我想要这样的结果：

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
  <Title>Google Feed</Title>
  <Updated>2012-06-27</Updated>
  <entry>
    <ID>1</ID>
    <g:Name>BPay</g:Name>
  </entry>
  <entry>
    <ID>2</ID>
    <g:Name>Cash</g:Name>
  </entry>
</feed> 
```

请帮忙...

谢谢，

附言

# regex - 从字符串中提取各种字符（替代方法）

> ID：11221376
> 
> 赞同：1
> 
> 时间：2012-06-27T07:32:25.887
> 
> 标签：regex, lua, text-extraction

好的，我有一些乱码的文本字符串，我想从字符串中提取小写字符、大写字符和数值为三个子字符串，然后将它们用于我的目的。我目前有这样的代码：

```
sInput = "AWSEDRGY VGIYCfry2345ewScfvg gyiFvyGXSCyuI^RSfv GYD&K^dfyUODvl234SDv8p7ogYHS"
local sLower, sUpper, sNumbers = "", "", ""
sInput:gsub("%l", function(s)  sLower=sLower..s end)
sInput:gsub("%u", function(s)  sUpper=sUpper..s end)
sInput:gsub("%d", function(s)  sNumbers=sNumbers..tostring(s) end)
print( sLower, sUpper, sNumbers ) 
```

这工作正常。我只是不确定将这三个单独的提取用于近 30,000 行此类乱码文本。有没有更有效的方法？还是我的方式是最好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:52:07.087

尝试使用*补充类*：

```
sInput = "AWSEDRGY VGIYCfry2345ewScfvg gyiFvyGXSCyuI^RSfv GYD&K^dfyUODvl234SDv8p7ogYHS"
local sLower = sInput:gsub("%L","")
local sUpper = sInput:gsub("%U","")
local sNumbers = sInput:gsub("%D","")
print( sLower, sUpper, sNumbers ) 
```

# python - 如何在apache上部署python webservice

> ID：11221380
> 
> 赞同：2
> 
> 时间：2012-06-27T07:32:42.987
> 
> 标签：python, web-services, apache

我是 Python 的新手。我有一个简单的 Python 网络服务，如下所示：

```
enter code here

import soaplib
from soaplib.core.service import rpc, DefinitionBase
from soaplib.core.model.primitive import String, Integer
from soaplib.core.server import wsgi
from soaplib.core.model.clazz import Array
from soaplib.core.service import soap

class HelloWorldService(DefinitionBase):

    @soap(String,Integer,_returns=Array(String))
    def say_hello(self,name,times):
        results = []
        for i in range(0,times):
            results.append('Hello, %s'%name)
        return results
if __name__=='__main__':

    try:

        from wsgiref.simple_server import make_server
        soap_application = soaplib.core.Application([HelloWorldService], 'tns')
        wsgi_application = wsgi.Application(soap_application)
        server = make_server('10.44.138.231', 9999, wsgi_application)
        server.serve_forever()

    except ImportError:

        print "Error: example server code requires Python >= 2.5" 
```

当我在localhost中访问服务时它非常快，但是从局域网中的另一台主机它会变得非常慢。

所以我想在apache中部署这个程序，但是似乎很难，我在google上搜索了很长时间，现在让我很累。谁能帮帮我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:06:29.980

我建议使用[`mod_wsgi`](http://code.google.com/p/modwsgi/)（而不是`mod_python`），因为 WSGI 是托管 Python Web 应用程序的标准方式。

在您的情况下，您需要`application`在全局范围内调用一个函数：

```
 # ....
        return results

soap_application = soaplib.core.Application([HelloWorldService], 'tns')
application = wsgi.Application(soap_application)

if __name__ == "__main__":
    # .... 
```

然后在 Apache 中启用 mod_wsgi 并在 (`WSGIScriptAlias`是主要的) 中添加指令。如果您以前配置过 Apache，则可以合理地访问[帮助页面。](http://code.google.com/p/modwsgi/wiki/WhereToGetHelp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:58:46.817

由于您的 Web 服务使用[WSGI](http://wsgi.readthedocs.org/)来提供文件，因此您可以使用任何符合 WSGI 的 Apache 模块，例如[mod_wsgi](http://code.google.com/p/modwsgi/)。

您还可以使用像[Gunicorn](http://gunicorn.org/)这样的独立 WSGI 服务器，然后将来自主 Web 服务器的请求传递给 Gunicorn 服务器进程。

如果您不需要使用 Apache：[Nginx](http://nginx.org/)与 Gunicorn 或 uwsgi 相结合是一种非常广泛使用的服务于 WSGI 应用程序的解决方案。

# sql - 如何计算 startdate=today-30 天？

> ID：11221382
> 
> 赞同：1
> 
> 时间：2012-06-27T07:32:46.183
> 
> 标签：sql, sql-server, sql-server-2008

我正在编写一个存储过程，我需要将开始和结束日期作为参数传递，默认情况下开始名称应该是今天日期前 30 天。给我一些建议来做到这一点..

开始日期=今天-30 天。结束日期=今天。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:37:02.937

```
Declare @startdate datetime 
```

`set @startdate = DATEADD(day,-30,getdate())`会给你你的开始日期

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:38:44.873

尝试这个：

如果您更喜欢使用**日期**数据类型：

```
 set @startdate=dateadd(day,-30,convert(date,getdate()))
    set @enddate= convert(date,getdate()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:54:43.267

`select DATEADD(dd,-30,getdate())` 会给你开始日期。`select getdate()`如果您想从前端传递结束日期，则会给您 enddate(current date) 然后只需将getdate **()**替换为来自前端的 Enddate。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T07:41:32.013

查看传入 -30 的 DATEADD 作为移动和 d 作为日期部分参数。我不在计算机附近，无法为您提供完整的语法

# collections - ORMLite : Dao.getEmptyForeignCollection 总是返回急切的集合

> ID：11221391
> 
> 赞同：0
> 
> 时间：2012-06-27T07:33:28.197
> 
> 标签：collections, ormlite

```
public class Account {
    …
    @ForeignCollectionField(eager = false, columnName = "orders")
    ForeignCollection<Order> orders;
    …
}

Account account = new Account();
account.orders = accountDao.getEmptyForeignCollection("orders"); 
```

我有订单的懒惰收集。但是`getEmptyForeginCollection()`正在返回一个`EagerForeignCollection`对象。为什么？有什么理由吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:41:19.843

我相信这是故意的。从那时起，惰性集合更加复杂，具有底层 DAO 引用。由于您正在使用该集合，因此您可以调用`account.orders.add(order1)`等，因此您的想法是您不需要“假”集合变得懒惰。

但是，我确实看到，由于它是一个惰性集合，因此意外地让另一个实体为一个帐户添加一个订单并且因为它很渴望而让`orders`字段*看不到它。*我已将以下错误添加到列表中，并且我将询问用户群是否有任何理由不修复此问题。

> [https://sourceforge.net/tracker/?func=detail&aid=3538474&group_id=297653&atid=1255989](https://sourceforge.net/tracker/?func=detail&aid=3538474&group_id=297653&atid=1255989)

# asp.net - 使用 c# 发送电子邮件时出错

> ID：11221392
> 
> 赞同：0
> 
> 时间：2012-06-27T07:33:36.173
> 
> 标签：asp.net, c#-4.0

我正在使用**relay-hosting.secureserver.net**作为 smtp 服务器，但出现以下错误：不允许使用邮箱名称。服务器响应是：抱歉，从您的位置拒绝中继 [212.78.237.157] (#5.7.1)

我需要更改 smtp 设置或其他任何东西吗？

这是代码：

```
var mailClient = new SmtpClient();

mailClient.Credentials = new NetworkCredential { UserName = "alerts@mycloudcctv.com", Password = "xyz" };

mailClient.Host = "relay-hosting.secureserver.net";
mailClient.EnableSsl = false;
mailClient.DeliveryMethod=SmtpDeliveryMethod.Network;

var mail = new MailMessage("alerts@mycloudcctv.com", "azharmalik3@yahoo.com", "Test Smtp server", "Testing mycloudcctv server") { IsBodyHtml = true };

mailClient.Send(mail); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:44:06.540

确保，

1.  您在主机 SMTP 设置部分指定了正确的用户名和密码
2.  在您的用户帐户中使用有效的电子邮件地址，
3.  检查是否允许从 SMTP 服务器发送邮件。

# java - 如何根据条目集过滤地图条目

> ID：11221395
> 
> 赞同：9
> 
> 时间：2012-06-27T07:33:46.320
> 
> 标签：java, map, set, guava, predicate

我正在使用 google guava 12 并有一张地图：

```
Map<OccupancyType, BigDecimal> roomPrice; 
```

我有一套：

```
Set<OccupancyType> policy; 
```

如何过滤`roomPrice map`基于`policy`并返回过滤后的地图中的条目？

`filteredMap`需要具有来自 的所有值`policy`。如果 roomPrice 地图没有政策条目，我想输入默认值。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-27T08:09:34.767

由于您有一组键，您应该使用[Maps.filterkeys()](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Maps.html#filterKeys%28java.util.Map,%20com.google.common.base.Predicate%29)，Guava 还提供了一组非常好的谓词，您可以开箱即用。在您的情况下，[Predicates.in() 之](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#in%28java.util.Collection%29)类的东西应该可以工作。

所以基本上你最终得到：

```
Map<OccupancyType, BigDecimal> filteredMap
    = Maps.filterKeys(roomPrice, Predicates.in(policy)); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:47:30.177

*   覆盖并实施[`equals`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)和[`hashcode`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode%28%29)在 `OccupancyType`.
*   循环遍历`roomPrice`的键集并收集过滤器中包含的元素。

像这样的东西：

```
Map<OccupancyType, BigDecimal> filteredPrices = new HashMap<OccupancyType, BigDecimal>();
for(OccupancyType key : roomPrice.keySet()) {
    if(policy.contains(key) {
        filteredPrices.put(key, roomPrice.get(key));
    }
} 
```

**更新**

好的，在 Google Guava 上阅读了一些内容之后，您应该能够执行以下操作：

```
Predicate<OccupancyType> priceFilter = new Predicate<OccupancyType>() {
    public boolean apply(OccupancyType i) {
        return policy.contains(i);
    }
}; 
```

接着

```
return Maps.filterValues(roomPrice, priceFlter); 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-29T11:11:21.763

无需使用 Guava，Maps.filterKeys() 也可以为大型 Maps产生**性能非常差的结果。**

```
// (new map can be initialized to better value to avoid resizing)
Map<OccupancyType, BigDecimal> filteredMap = new HashMap<>(roomPrice.size());
for (OccupancyType key: policy) {
    // contains() and get() can usually be combined
    if (roomPrice.contains(key)) {
       filteredMap.put(key, roomPrice.get(key));
    }
} 
```

# java - 最佳实践：在哪里重新采样 PCM 以及使用哪个工具？

> ID：11221397
> 
> 赞同：9
> 
> 时间：2012-06-27T07:33:56.267
> 
> 标签：java, c, java-native-interface, kernel-module, resampling

我开发了一个内核模块（Android），它为我提供：

```
PCM
16-bit
48000 Hz
2 channel 
```

我想用java将它流式传输到Apple的机场快线（AEX）。

AEX 需要 44.1 kHz PCM，所以我必须重新采样 PCM 流。

我有以下可能性，但哪个是最好的？

## 1\. 使用 C 程序“raop_play”（[raop-play](http://raop-play.sourceforge.net/)的一部分）

```
advantages: 
            high-performant due to native C
            already uses libsamplerate to resample wav, mp3, ogg, flac, aac, pls
            openssl as static library
            usable via command-line from my java-program via Runtime.exec()

disadvantages:
            I am relative new to C
            overloaded: I don't need wav, mp3.. only PCM
            many dependencies with GPL-libraries which I have to compile for Android
            only supports PCM already with 44.1 kHz, no resampling for PCM implemented yet 
            -> have to implement resampling for PCM 
```

## 2.在java中重采样和流（使用[libresample JNI-bridge](https://github.com/intervigilium/libresample)）

```
advantages: 
            I CAN java :)
            middle-performant due to resamling in C , but streaming in java
            just one dependency to LGPL-library
            no Runtime.exec() needed

disadvantages:
            needs [bouncycastle][3] for AES which is a bit larger than openssl
            less performant than solution #1 (but maybe fast enough) 
```

## 3\. 内核模块中已经重采样

```
advantages: 
            most performant
            no resampling at higher level

disadvantages:
            I am relative new to C
            Is it possible to use libsamplerate or libresample in kernel-space?! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:41:23.357

我是一个内心深处的 java 人，但这个任务（尤其是在 cpu 受限的设备上，比如手持设备）正在为 C 哭泣。我建议简单地使用 libsamplerate。它有一个简单的 API，即使您是 C 的新手，您也可以通过谷歌搜索找到大量示例。

*当然，基于 java 的解决方案可以并且会起作用，只是因为你是 C 的新手，所以对用户消耗电池似乎并不礼貌：)*

编辑：我可能有点自相矛盾，但即使性能是一个严重的问题，我也会避免在内核空间做*任何事情，除非我***非常**了解内核和硬件。鉴于此，我将使用与 libsamplerate 相关联的用户空间程序。经过一番谷歌搜索后，我找到了这个例子（*注意输出是插孔接口，显然它对你来说必须不同*）

```
#include <jack/jack.h>
#include <samplerate.h>

int channels;
float data_samplerate;

/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
void getDasData(float **dst,int num_frames){
/* Provide sound data here, and only here. */
}
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////

long getDasResampledData_callback(void *cb_data, float **data){
  static float ret[1024];
  static float ret3[1024];
  static float *ret2[2]={&ret[0],&ret[512]};
  getDasData(ret2,512);
  for(int i=0;i<512;i++){
    ret3[i*2]=ret2[0][i];
    ret3[i*2+1]=ret2[1][i];
  }
  *data=&ret3[0];
  return 512;
}

void getDasResampledData(float **dst,int num_frames){
  double ratio=samplerate/getSourceRate();
  float outsound[num_frames*2];
  long read=src_callback_read(dassrc_state,ratio,num_frames,outsound);
  //fprintf(stderr,"read: %d, num_frames: %d\n",read,num_frames);
  for(int i=0;i<read;i++){
      dst[0][i]=outsound[i*2];
      dst[1][i]=outsound[i*2+1];
  }
  if(read<num_frames){
    float *newdst[2]={dst[0]+read,dst[1]+read};
    getDasResampledData(newdst,num_frames-read);
  }
}

static int process (jack_nframes_t nframes, void *arg){
  int ch;
  sample_t *out[channels];

  for(ch=0;ch<channels;ch++){
    out[ch]=(sample_t*)jack_port_get_buffer(ports[ch],nframes);
  }

  if( (fabs(data_samplerate - jack_samplerate)) > 0.1)
    getDasResampledData(out,numSamples);
  else
    getDasData(outputChannelData,numSamples);
  return;

  audioCallback(NULL,0,out,channels,nframes);
}

int main(){
  dassrc_state=src_callback_new(getDasResampledData_callback,SRC_QUALITY,2,NULL,NULL);
  jack_set_process_callback(client, process,NULL);
} 
```

> 来自[http://old.nabble.com/Example-of-using-libresample-with-jack-td8795847.html](http://old.nabble.com/Example-of-using-libresample-with-jack-td8795847.html)

这个例子看起来很简单，我希望你可以使用它。

# jquery - Joomla！1.5.26 来自 JEditor 或 Javascript 的 TinyMCE 初始化

> ID：11221410
> 
> 赞同：2
> 
> 时间：2012-06-27T07:34:37.717
> 
> 标签：jquery, joomla, tinymce

基本上，Joomla！当用户加载特定页面时，可以启用或禁用基于参数的编辑器（JCE/TinyMCE）。禁用表示：内容不可编辑，必须设置不透明背景。

在 default.php 中：

```
<?php
    $editor =& JFactory::getEditor();
    /*
    Parameter Type Default  Description
    $name string The control name
    $html string The contents of the text area
    $width string The width of the text area (px or %)
    $height string The height of the text area (px or %)
    $col int The number of columns for the textarea
    $row int The number of rows for the textarea
    $buttons boolean    true    True and the editor buttons will be displayed
    $params array array()   Associative array of editor parameters
    */
    echo $editor->display('emailText', $this->articleFullText, '960', '700', '20', '20', false);
?> 
```

是否可以在 default.php （视图）中设置编辑器设置？（我没有找到任何具体的参数）

我创建了以下启用或禁用编辑器的函数（感谢stackoverflow）

```
function setEditorEditable(editable) {
    if (editable == 1) {
        tinymce.get(tinymce.activeEditor.id).getBody().setAttribute('contenteditable', 'true');
        J('#' + tinymce.activeEditor.id + '_parent').fadeTo(0, 1);
    } else {
        tinymce.get(tinymce.activeEditor.id).getBody().setAttribute('contenteditable', 'false');
        J('#' + tinymce.activeEditor.id + '_parent').fadeTo(0, 0.5);
    }
} 
```

但是，如果我在 jQuery .ready 中调用该函数，则编辑器 DOM obj 为空。

我可以如何以及在代码中的何处设置/更改编辑器设置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:48:37.540

这取决于您要更改的编辑器设置和时间点。可以设置编辑器的一些参数onInit。之后无法更改其他一些参数。

# codeigniter - 如何在 Codeigniter 中经过几次迭代后从模型的递归函数中获取价值

> ID：11221412
> 
> 赞同：0
> 
> 时间：2012-06-27T07:34:51.270
> 
> 标签：codeigniter, recursion

我有一个搜索顶级父类别的 category_id 的功能。但在 1 次迭代后，它不会将值返回给控制器。

控制器：

```
$top_parent = $this->catalog_model->top_parent($catalog_id); 
```

模型：

```
function top_parent($category_id)
    {
        $data = $this->db->select('category_id, title, parent')
                         ->where('category_id',$category_id)
                         ->get('categories')
                         ->row_array();              

        if($data['parent'] == 0){
            return $data['category_id'];   
        }
        else{
            $this->top_parent($data['parent']);
        }

    } 
```

如何将找到的值返回给控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:29:43.467

如果您确实需要按自己的方式行事..您所需要做的就是返回递归调用

```
function top_parent($category_id)
{
    $data = $this->db->select('category_id, title, parent')
                     ->where('category_id',$category_id)
                     ->get('categories')
                     ->row_array();              

    if($data['parent'] == 0){
        return $data['category_id'];   
    }
    else{
        return $this->top_parent($data['parent']); 
    }

} 
```

注意线`return $this->top_parent($data['parent']);`

您应该返回此处，因为最终将满足条件的递归调用`$data['parent'] == 0`实际上将返回`$data['category_id'];`到调用模型函数本身而不是控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:03:03.117

使用这个简单的函数而不是递归。不要用递归来做你可以用简单查询做的事情。

```
function top_parent($category_id)
{
    $data = $this->db->select('category_id')
                     ->where('category_id',$category_id)
                     ->where('parent',0)
                     ->get('categories')
                     ->row_array();              

    return $data['category_id']; 
} 
```

这里只添加了 parent = 0 的 where 条件

# google-maps - 从谷歌获取经纬度

> ID：11221413
> 
> 赞同：1
> 
> 时间：2012-06-27T07:34:52.787
> 
> 标签：google-maps, latitude-longitude, coords

我有这个功能的问题

```
public function getCoords($address){
    $coordinatesSplit=array(0=>0,1=>0);
    $request_url = $this->_baseUrl . "&oe=utf-8&q=" . urlencode($address);
        $xml = simplexml_load_file($request_url);      
        if (! empty($xml->Response)) {
            $point= $xml->Response->Placemark->Point;

                $coordinatesSplit = explode(",", $point->coordinates);
                // Format: Longitude, Latitude, Altitude

            }  
         $this->latitude = $coordinatesSplit[1];
         $this->longitude= $coordinatesSplit[0];   
} 
```

效果很好，但是如果我把它放入一个地址循环中，有时会跳过一个地址（完全随机）。如果我两次启动循环，有时会跳过一个结果，有时会跳过另一个。我相信这是由超时引起的。我可以等到这个功能准备好了吗？

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:31:52.577

用 sleep(5) 再次尝试，似乎还可以。我用谷歌搜索，发现你每秒可以进行 20 次查询。我添加了usleep（500000），现在它完美运行

谢谢阿法辛！

# c# - 在我的 VS2010 Professional 中找不到 MonoDroid

> ID：11221417
> 
> 赞同：0
> 
> 时间：2012-06-27T07:35:07.790
> 
> 标签：c#, android, mono, monodevelop, xamarin.android

我刚刚注册了我的 VS 2010 Professional 的密钥，Android 的 Mono 也已经安装，并且完成了本教程的所有内容：[this](http://docs.xamarin.com/android/getting_started/installation/Installation_for_Windows) 但是似乎 VS 2010 Pro“不知道”关于 MonoDroid 已经安装。这是一个证明：http: [//img16.imageshack.us/img16/4971/89774099.png](http://img16.imageshack.us/img16/4971/89774099.png)

我已经尝试在 MonoDevelop IDE 中打开一个新的 Mono for android 应用程序，它似乎没问题，那么 VS 不知道我的 MonoDroid 可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:41:10.767

两个问题：首先，您在安装 MonoDroid 后尝试重新启动 VS 对吗？其次，Visual Studio 是在安装 MonoDroid 之前还是之后安装的？

# networking - 在网络中使用什么技术进行通信？

> ID：11221418
> 
> 赞同：0
> 
> 时间：2012-06-27T07:35:08.273
> 
> 标签：networking, rpc, zeromq

什么技术更好地获得服务器到服务器和服务器-客户端之间的通信？ZeroMQ，直接RPC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:43:55.663

如果您阅读有关这两种技术的一些资源会更好。

没有“一种”更好的技术，但其中一种可能更适合您的需求。

继续阅读：

*   [优秀的 ZMQ 指南](http://zguide.zeromq.org/page%3aall)
*   [早期伟大的介绍之一](http://nichol.as/zeromq-an-introduction)
*   [我在我的迷你教程上的无耻插件](http://learning-0mq-with-pyzmq.readthedocs.org/en/latest/)

我的印象是您已经使用 RPC 并且非常了解其他技术，例如基于 HTTP 的通信。

# java - 我如何比较两个图像以知道它们是否具有相同的部分

> ID：11221419
> 
> 赞同：-3
> 
> 时间：2012-06-27T07:35:09.447
> 
> 标签：java, android, image, compare

我有两个图像 - A，B。如果 B 是 A 的一部分，我需要在 java 代码中知道。

PS：有人告诉我用“反向图像搜索”来处理这个问题，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:49:15.060

Image 可以定义为 BufferedImage 的抽象，它只保存类似标题的信息。在读取图像像素之前，将图像与其大小进行比较。 [跟着我](https://stackoverflow.com/questions/4409282/compare-two-images-is-same-or-not)

# node.js - 需要 towerjs "Mailers" 工作示例

> ID：11221425
> 
> 赞同：0
> 
> 时间：2012-06-27T07:35:21.313
> 
> 标签：node.js, mailer, towerjs

我[使用了 Tower.js](http://towerjs.org/)文档并且完全看不到 - 我如何才能获得工作邮件？

邮件部分说：

```
class App.Notification extends Tower.Mailer
  # app/views/mailers/welcome.coffee template
  @welcome: (user) ->
    @mail to: user.email, from: "me@gmail.com" 
```

但是示例没有标记需要放置此代码的位置。

请任命我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:06:15.847

我相信邮件应该进入`app/mailers`，基于[邮件生成器](https://github.com/viatropos/tower/blob/026416121143dd9a7caf35e9dd1ec5e3ca195dae/src/tower/server/generator/generators/tower/mailer/mailerGenerator.coffee)：

```
class Tower.Generator.MailerGenerator extends Tower.Generator
  sourceRoot: __dirname

  run: ->
    @inside "app", '.', ->
      @inside "mailers", '.', ->
        @template "mailer.coffee", "#{@model.name}Mailer.coffee", ->

module.exports = Tower.Generator.MailerGenerator 
```

# javascript - 需要在每个循环中访问 jQuery 之外的变量

> ID：11221426
> 
> 赞同：2
> 
> 时间：2012-06-27T07:35:22.410
> 
> 标签：javascript, jquery

所以我有一个看起来像这样的 json 字符串

```
var jsonString = '[{"name":"John Smith","uid":1234,{"name":"Susie Something","uid":4567"}]'; 
```

我正在制作一个函数，它将返回所有用逗号分隔的 UID。例如：1234,4567。

我现在做的是这个

```
function getUIDS(json){
var uids = '';
parsed = JSON.parse(json);

$.each(friends, function() {
        uids = uids + this.uid.toString() + ',';
 });
 reuturn uids;

} 
```

然而，没有任何回报。如何在 jquery 线程之外访问由 jquery 线程创建的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:38:08.397

传递解析而不是朋友，如果这是完整的代码并且朋友没有在任何地方定义

```
function getUIDS(json){
var uids = '';
parsed = JSON.parse(json);

$.each(parsed, function() {
        uids = uids + this.uid.toString() + ',';
 });
 reuturn uids;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:38:49.163

尝试：

```
function getUIDS(json){
  var uids = [];
  var friends = JSON.parse(json);

  $.each(friends, function(i) {
     uids.push(friends[i].uid);
  });

  return uids.join(',');
} 
```

**您的代码中的问题是：（**请参阅代码注释）

```
function getUIDS(json){
var uids = '';
parsed = JSON.parse(json);

$.each(friends, function() { // using friends instead of parsed
        uids = uids + this.uid.toString() + ','; // using this here
 });
 reuturn uids; // spelling mistake for return keyword

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:40:37.413

尝试修复您的 json：

```
var jsonString = '[{"name":"John Smith","uid":1234},{"name":"Susie Something","uid":4567"}]'; 
```

并稍微更改您的代码：

```
function getUIDS(json) {
   var uids = '',
       friends = JSON.parse(json);

   $.each(friends, function() {
       uids += this.uid + ',';
   });

   return uids;
} 
```

重要的部分是循环`friends`和正确拼写`return`。

您还应该考虑`join`按照某人的建议使用。这将确保您的`uids`字符串末尾没有尾随的“，”（除非这是您想要的）。

# drag-and-drop - 将电子邮件附件文件从 Outlook 拖放到 Web 应用程序

> ID：11221427
> 
> 赞同：14
> 
> 时间：2012-06-27T07:35:24.110
> 
> 标签：drag-and-drop, outlook

我们将 Excel 文件中的数据导入 Java Web 应用程序。

用户希望将在 Outlook（2003 和 2007）中作为电子邮件附件传入的 Excel 文件拖放到 Web 应用程序和浏览器（Chrome）中。

Outlook 不允许将 Excel 文件附件拖放到浏览器窗口中。启用此功能的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-11T18:10:43.753

*免责声明 - 我是这个产品的创造者。*

您可以使用[Outlook2Web](http://outlook2web.com)来执行此操作。它让您可以将电子邮件中的文件或电子邮件本身直接拖到 Web 应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:01:16.743

不幸的是，我想不出任何可以直接回答您的问题的方法，但是可以使用替代方案。也就是说，如果您使用的是交换服务器，则可以使用 WebUI 来做您需要的事情。如果您使用的是 Google 应用程序或任何其他网络邮件服务，请使用它们的 WebUI。如果您使用简单的 POP 和 SMTP，那么我会在 LAMP 安装上设置 Squirrel Mail，它会为任何 POP 和 SMTP 可访问的电子邮件服务创建一个 WebUI。

抱歉，我无法直接回答您的问题，但我希望这些替代方案会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:51:06.770

不幸的是（基于对这个问题的回答：[https](https://superuser.com/questions/441747/dragging-attachments-from-outlook-into-applications) ://superuser.com/questions/441747/dragging-attachments-from-outlook-into-applications ）Outlook没有添加所需的“接受格式”来做这个（CF_HDROP）。

他们建议的替代方案也可能对您不太好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-24T13:23:47.907

看来 Outlook 文件拖动是您正在寻找的。 [https://github.com/tonyfederer/OutlookFileDrag](https://github.com/tonyfederer/OutlookFileDrag)

它适用于附件，但不适用于内置邮件图片。享受

# android - 如何在 C++ 内联成员函数中添加 Android 调试函数（LOGE、LOGW...）？

> ID：11221430
> 
> 赞同：2
> 
> 时间：2012-06-27T07:35:27.090
> 
> 标签：android, c++, inline, member-functions

我正在开发 Android 音频驱动程序。如果我需要在构造函数中添加调试函数“LOGD” `Mutex::Autolock::Autolock(Mutex& mutex)`，它定义在`"frameworks/base/include/utils/threads.h"`

我已经包含了，但仍然存在编译错误：

> frameworks/base/include/utils/threads.h:244:1：错误：宏“LOG”传递了 6 个参数，但只需要 1 个

我猜这是因为关键字`inline`阻止了外部宏，但不确定。

我怎么解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:50:51.930

尝试像这样定义 LOGD：

```
#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG, "my module name", __VA_ARGS__) 
```

请记住，您必须`#include <android/log.h>`为此工作。

# php - 数据保护

> ID：11221431
> 
> 赞同：0
> 
> 时间：2012-06-27T07:35:30.050
> 
> 标签：php, android, mysql, mysqli

我正在构建一个使用 php 脚本与 mySQL 服务器通信的 Android 应用程序。我有点担心，一旦我的应用程序发布，人们可能会使用我自己的应用程序以外的工具使用我数据库中的数据。如何确保我的应用程序是唯一可以与服务器通信的应用程序？

谢谢！

# jsp - 在 JSP 中获取最后一页访问的页面 URL

> ID：11221435
> 
> 赞同：0
> 
> 时间：2012-06-27T07:35:51.157
> 
> 标签：jsp, servlets, back-button

我有三个名为**a.jsp**、**b.jsp**和**c.jsp**的 JSP 。

从 **a.jsp**我要去**b.jsp**。

**然后b.jsp** 中的以下代码`request.getHeader("Referer")`返回**a.jsp**

再次从**b.jsp**我要去**c.jsp**。

从**c.jsp**我按浏览器后退按钮来到**b.jsp**。

**然后b.jsp** 中的以下代码再次`request.getHeader("Referer")`返回**a.jsp**

为什么它不返回**c.jsp**？

有什么方法可以让我在浏览器后退按钮上获得**c.jsp 。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:05:03.490

原因可能是您的页面被缓存。

您可以使用 firebug 检查 http 标头。

![查看 http 请求标头](../Images/fd55dfd960111e58dc7ba4b70c60e6b7.png)

**更新 1**

我用 a.jsp、b.jsp、c.jsp 创建了一个新项目，代码如下：

一个.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8" language="java"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>a</h1>
        <a href="b.jsp">b</a><br/>
        <a href="c.jsp">c</a><br/>
        <b><%=request.getHeader("Referer")%></b>
    </body>
</html> 
```

b.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>b</h1>
        <a href="a.jsp">a</a><br/>
        <a href="c.jsp">c</a><br/>
        <b><%=request.getHeader("Referer")%></b>
    </body>
</html> 
```

c.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8" language="java"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>c</h1>
        <a href="a.jsp">a</a><br/>
        <a href="b.jsp">b</a><br/>
        <b><%=request.getHeader("Referer")%></b>
    </body>
</html> 
```

它运作良好。您可以使用代码创建一个新项目并对其进行测试。我不确定，你的情况是什么，也许你正在使用 AJAX，那么引用者只会应该是最后一页的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T13:39:09.527

如果我没记错的话，当您按下浏览器上的后退按钮时，您会删除堆栈中的最后一页，这意味着您不请求该页面，您只需删除顶部的一页。这意味着您永远不会收到 c 对 b 的请求。

# mahout - 在 mahout 中使用 SGD 分类器

> ID：11221436
> 
> 赞同：1
> 
> 时间：2012-06-27T07:35:52.517
> 
> 标签：mahout

按照 mahout 中的甜甜圈分类示例，我构建了如下模型：

构建模型：

```
./mahout trainlogistic --input donut.csv --output ./model --target color --categories 2 --predictors x y a b c --types numeric --features 20 --passes 100 --rate 10 
```

我这样评估模型：

```
./mahout runlogistic --input donut.csv --model model  --auc --confusion 
```

输出是：

```
AUC = 0.97
confusion: [[27.0, 13.0], [0.0, 0.0]]
entropy: [[-0.4, -0.3], [-1.2, -0.7]] 
```

第一个命令在本地磁盘上生成了一个模型文件。如何使用此模型对新数据进行分类？有这个命令吗？还是我需要编写 Java 代码来加载该模型并对其进行分类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T07:29:25.903

```
./mahout runlogistic --input new_data.csv --model model  --auc --confusion 
```

For example, I fetch ten recodes from donut.csv, and it is renamed as donut2.csv. Then I test it as follows.

```
[double@double mahout-distribution-0.7]$ bin/mahout runlogistic --input donut2.csv  --model donut.model --auc --scores --confusion 
```

The output is:

```
"target","model-output","log-likelihood"
0,0.496,-0.685284
0,0.490,-0.674055
0,0.491,-0.675162
1,0.495,-0.703361
1,0.493,-0.706289
0,0.495,-0.683275
0,0.496,-0.685282
0,0.492,-0.677191
1,0.494,-0.704222
1,0.492,-0.708679
AUC = 0.50
confusion: [[6.0, 4.0], [0.0, 0.0]]
entropy: [[-0.7, -0.4], [-0.7, -0.4]]
13/06/04 15:22:50 INFO driver.MahoutDriver: Program took 1402 ms (Minutes: 0.023366666666666668) 
```

# php - 如何反序列化数组字符串

> ID：11221438
> 
> 赞同：0
> 
> 时间：2012-06-27T07:35:54.063
> 
> 标签：php, jquery, serialization

这就是我创建数组的方式

```
var list = $("#sortable").sortable('toArray');

$.ajax({
       type: 'POST',
       url: " some path ",
       data: { "list" : JSON.stringify(list) },
       success: function(data) {}
}); 
```

在数据库中它看起来像这样

```
["34","37","38","40","41","42","43","44","45","48","49","50"] 
```

不，我想在 php 中使用它作为数组。如何将此字符串转换为数组？我尝试了`unserialize()`方法，但这似乎不是要走的路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:37:05.330

您可以使用以下[`json_decode`](http://php.net/manual/en/function.json-decode.php)功能：

```
$arr = json_decode($_POST["list"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:37:26.577

不要对 json 对象进行字符串化，让 jQuery 为您处理。

```
$.ajax({
       type: 'POST',
       url: " some path ",
       data: { "list" : list }, // here, it's not necessary to stringify the json object.
       success: function(data) {}
}); 
```

然后你在 php 中通过`$_POST['list']`.

# jquery - 单击提交后滚动到 div 的底部

> ID：11221441
> 
> 赞同：1
> 
> 时间：2012-06-27T07:36:15.577
> 
> 标签：jquery, forms, submit

我写了一个表格，需要用户编译才能进行一些计算。AJAX 脚本使结果出现在“提交”按钮之后的 div 中。但是我注意到不耐烦的用户倾向于多次单击“提交”，因为他们没有看到结果显示在按钮本身之后。我想知道如何滚动到 div ([id=results]) 的底部，其中包含用户单击“提交”时的结果。当然，提交按钮不能包含 href 属性，所以我不知道如何创建一个 html 锚点......我想我还需要一点 jquery。

编辑：源代码：calculator1.php

```
<form name="formpeso" id="formpeso" action="" method="post">
        <div>
            <label for="altezza">Inserisci la tua altezza <strong>(in cm)</strong></label>
            <input type="text" name="altezza" id="altezza" onkeyup="commadot(this)" value="" />
[FOO... FOO...]     
            <input type="submit" id="submit" value="send data" />
     </div>   
    </form>

<div id="results">RESULTS WILL APPEAR HERE AFTER CLICKING ON SUBMIT</div> 
```

这是验证文本字段并将结果（处理为calculator2.php）显示为的函数

```
$(document).ready(function(){
    $("#formpeso").validate({
        debug: false,
        rules: {
            altezza: {min:20, required: true},
            peso: {min:1, required: true},
            vita: {min:1, required: true},
            fianchi: {min:1, required: true},
            collo: {min:1, required: true},
            polso: {min:1, required: true},
        },
        messages: {
            altezza: "Non hai compilato il campo!<br />",
            peso: "Non hai compilato il campo!<br />",
            vita: "Non hai compilato il campo!<br />",
            fianchi: "Non hai compilato il campo!<br />",
            collo: "Non hai compilato il campo!<br />",
            polso: "Non hai compilato il campo!<br />",

        },
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('calculator2.php', $("#formpeso").serialize(), function(data) {
                $('#results').html(data);
            });
        }
    });
}); 
```

演示：[链接](http://www.flapane.com/calcolatore.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:56:26.917

使用@Zee Tee 的版本，但您必须记住，在将数据加载到 div 之后，您必须滚动到底部。

这意味着这样做

```
 var div = $('div#results')
  var o = div.offset().top; //gets the top position of the div
  var h = div.outerHeight(); // gets the height of the div

   div.scrollTop( o + h ); //scrolls page to the bottom of the div 
```

在 $.post 旁边的部分

```
 $.post('calculator2.php', $("#formpeso").serialize(), function(data) {
            $('#results').html(data);
            // do positioning here AFTER loading the data!
        }); 
```

试试看 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:42:39.597

这会将页面滚动到 div 的底部。

```
 $('button[type="submit"]').click(){
  var div = $('div#results')
  var o = div.offset().top; //gets the top position of the div
  var h = div.outerHeight(); // gets the height of the div

   div.scrollTop( o + h ); //scrolls page to the bottom of the div

 }); 
```

您还可以在 ajax 调用之前禁用提交按钮，然后在 ajax 完成后重新启用它，只是为了采取额外措施。

```
 $('button[type="submit"]').attr('disabled',true);
 $.get(url,function(){
   $('button[type="submit"]').attr('disabled',false);        
 }); 
```

这也将在您的点击功能中。

所以它看起来像这样完整：

```
 submitbutton = $('button[type="submit"]')

 submitbutton.click(){

 $(this).attr('disabled',true);

  var div = $('div#results')
  var o = div.offset().top; //gets the top position of the div
  var h = div.outerHeight(); // gets the height of the div

   div.scrollTop( o + h ); //scrolls page to the bottom of the div

    //your ajax request
    $.get(url,function(){
      submitbutton.attr('disabled',false);        
    });

 }); 
```

# objective-c - 使 UILabel 激活 UITextfields

> ID：11221442
> 
> 赞同：0
> 
> 时间：2012-06-27T07:36:21.797
> 
> 标签：objective-c, ios5, uitextfield, uilabel

我是 Objective C 的新手，目前正在做一个小项目。我有一个带有登录屏幕的 IB。在该登录屏幕中，我的 UITextfields 旁边有标签（显示名称、电子邮件、密码）。我的问题是，如何让点击标签的人激活文本字段？到目前为止，我已经为我的标签创建了出口，但我坚持使用我需要实施的方法。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:46:33.417

最好的选择是创建一个“自定义”类型的按钮（它将是透明的）并将其放在标签的顶部。

然后，您检测到该按钮已被按下，并激活文本字段！

# python - django 应用程序的每晚单元测试

> ID：11221443
> 
> 赞同：1
> 
> 时间：2012-06-27T07:36:22.373
> 
> 标签：python, django, unit-testing

我想对我的 django 应用程序进行每晚的单元测试。应该这样做：

1.  将存储库（svn 和 git）更新为 HEAD（至少是我的代码。Django 来自稳定分支）
2.  运行单元测试
3.  通过电子邮件向自上次成功的单元测试以来提交的人员报告错误（但仅限于我们公司的人员）
4.  创建一个带有报告的 HTML 页面（上次成功运行，......）

到目前为止，这是由一个小的自制 python 脚本完成的。但我喜欢使用既定的解决方案。

环境：仅限Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:09:28.963

[使用适当插件的Jenkins](http://jenkins-ci.org/)会做得很好。

*   在 django 应用程序中创建单元测试脚本
*   [设置 Jenkins 以使用插件](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Sourcecodemanagement)从 GIT/SVN 获取您的代码。
*   将测试作为“执行 shell”命令运行：

```
 python manage.py test myapp --settings=settings 
```

*   您可以使用覆盖率进行测试运行，然后使用 Jenkins 中的“Html 发布报告”[插件](https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin)来获取代码覆盖率的 html 报告
*   有很多用于单元测试统计的[插件](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Buildreports)，报告，电子邮件插件，用于向提交者发送电子邮件等。

# java - 休眠查询错误

> ID：11221451
> 
> 赞同：0
> 
> 时间：2012-06-27T07:36:45.650
> 
> 标签：java, hibernate

```
<query name="getStudyTasksByParticipantId">
            from StudyTask st 
            join (select max(lastUpdatedDate)as lastUpdatedDate, study, clinicalStudyRegistration from
                     StudyTask where clinicalStudyRegistration.participant.id in (:participantIds) 
                     group by study, clinicalStudyRegistration ) lst 
            where st.lastUpdatedDate = lst.lastUpdatedDate 
            order by st.lastUpdatedDate desc

        </query> 
```

当我运行此查询时，它会给出类似`unexpected token: ( at line 3 col 30`.

这个查询有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:43:16.417

查询不是有效的 HQL。[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-subqueries)说：

> 请注意，HQL 子查询只能出现在 select 或 where 子句中。

连接只能通过两个实体之间的关联来完成。

# php - PHPmailer 和附件表单 - 不发送

> ID：11221457
> 
> 赞同：2
> 
> 时间：2012-06-27T07:36:57.260
> 
> 标签：php, phpmailer, email-attachments

嗨，我有一个问题，我用附件输入制作了简单的表格，我想通过邮件将此附件发送到我的邮箱，但我总是看到附件文件未在文件系统上找到的错误。

这是php中的代码：

```
<? 
   require('phpmailer/phpmailer.inc.php');

    $mail = new PHPMailer();

    $mail->From= $_POST['email'];
    $mail->FromName= $_POST['contact'];
    $mail->Sender= $_POST['email'];
    $mail->AddReplyTo("xxxx", "Porozumienie");

    $mail->AddAddress("xxxxx");
    $mail->Subject = "Your invoice";

    $mail->IsHTML(false); 

    $plik_tmp = $_FILES[contr][tmp_name];
    $plik_nazwa = $_FILES[contr][name];
    $plik_rozmiar = $_FILES[contr][size];

    $target_path = "uploads/";

    $target_path = $target_path . basename( $_FILES['contr']['name']); 

    if(move_uploaded_file($_FILES['contr']['tmp_name'], $target_path)) {
        echo "The file ".  basename( $_FILES['contr']['name']). 
        " has been uploaded";
    } else{
        echo "There was an error uploading the file, please try again!";
    }

    $mail->AddAttachment(basename($target_path));

    $mail->Body = "Please find your invoice attached.";
    if(!$mail->Send())
    {
       echo "Error sending";
    }
    else
    {
       echo "Letter is sent";
       unlink($target_path);
    } 
?> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:49:20.063

@arclite：由于您收到未找到附件的错误。检查您的上传文件夹权限，如果没有，则使其可写。

@pari：由于他使用的是“require”，因此如果所需文件不退出，php 将抛出错误。所以这不可能是一个问题。

# objective-c - 在Objective C中存储调整大小的图像

> ID：11221461
> 
> 赞同：0
> 
> 时间：2012-06-27T07:37:06.370
> 
> 标签：objective-c, ios, image-resizing

我正在编写一个应用程序，让用户可以选择调整他们拍摄的图像大小并将其上传到服务。调整大小似乎工作正常，但它没有将重新创建的图像存储在适当的位置，因为应用程序似乎不认为有照片加载。

请注意，if 语句中的第一个函数（关于“normal_size”）工作正常。我试图在附加大小参数中重新创建这两行，但我似乎无法弄清楚为什么它不存储它。这真让我抓狂。这是代码：

```
// Set image dictionaries
iInfoDict = [[NSDictionary alloc] initWithDictionary:info];
NSLog(@"infor ===== %@", info);
UIImage* image =[info objectForKey:@"UIImagePickerControllerOriginalImage"];
NSLog(@"iImage name === %@", iImage);

// Determines path of image taken / chosen
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"image.jpg"];

CGSize size;

// Not sure what this does other than dismissing the pickerViewController

NSData* data = UIImageJPEGRepresentation(image, 0.9);
[data writeToFile:appFile options:nil error:nil];
NSLog(@"Documents ==== %@", documentsDirectory);
[picker dismissModalViewControllerAnimated:YES];
//    photo.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"]; 

// IMAGE RESIZE CODE

if ([[NSUserDefaults standardUserDefaults] boolForKey:@"normal_image"])    
{
    [photoData setObject:[iInfoDict objectForKey:@"UIImagePickerControllerOriginalImage"] forKey:@"image"];
     photo.image = [iInfoDict objectForKey:@"UIImagePickerControllerOriginalImage"];
}
else if ([[NSUserDefaults standardUserDefaults] boolForKey:@"small_image"])
{
    CGSize size = CGSizeMake (600, 450);
    UIImage *origImage = [iInfoDict objectForKey:@"UIImagePickerControllerOriginalImage"];
    UIImage *destImage = [origImage resizedImage:size interpolationQuality:kCGInterpolationHigh];

    NSLog(@"Image Size: %@", NSStringFromCGSize(destImage.size));
    [photoData setObject:destImage forKey:@"image"];

    photo.image = destImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:24:55.290

要么我不理解你的问题，要么你不明白你在做什么。我怀疑后者，基于评论`// Not sure what this does other than dismissing the pickerViewController`，紧随其后的两行将未调整大小的图像写入文档目录。

你可能想在写出来*之前*调整图像的大小，所以我建议在你调整大小之后将文字移到最后。

删除两行：

```
NSData* data = UIImageJPEGRepresentation(image, 0.9);
[data writeToFile:appFile options:nil error:nil]; 
```

最后，插入这两行（不保证，从内存中写入）：

```
NSData* data = UIImageJPEGRepresentation(photo.image, 0.9);
[data writeToFile:appFile options:nil error:nil]; 
```

# jquery - 检测画布上的变化

> ID：11221463
> 
> 赞同：0
> 
> 时间：2012-06-27T07:37:16.963
> 
> 标签：jquery, html, node.js, canvas, drawing

我正在使用画布和 node.js 创建一个小型绘图应用程序。假设有很多用户连接到我的应用程序 - 用户 A、用户 B 等。

当用户 A 在画布上绘制任何东西时，我想通过在其他用户的画布上输出绘图来让其他用户知道用户 A 已经绘制了一些东西。

我所取得的成就是`click`在画布元素上附加一个事件。它可以工作，但问题是它只有在用户一键完成绘图时才有效。我希望在运行时将绘图共享给其他用户，例如逐像素更改。有像画布这样的活动`.canvaschange()`吗？

我的点击事件代码是 -

```
$("#imageTemp").click(function(){
      var can = document.getElementById("imageView");
      var img = can.toDataURL("image/png");
      socket.emit('emit_draw', img, function (data){
        console.log('Emit Broadcast draw', data);
      });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:46:31.433

无论您调用实际绘图图元的任何地方，您都没有发出绘图消息的任何原因？您要分享的是绘画内容，而不是点击次数？您甚至可以根据相同类型的消息进行自己的绘图（在本地收听相同的消息并仅根据这些消息进行绘图）。

另一件您可能想要做的事情是避免过多的网络流量；将绘图事件捕获到某种队列中，并且仅在收到最后一次添加到队列后至少 1 秒（或其他时间）时才发出（通过网络）消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:44:04.277

我想确认您是否使用过

在客户端

```
$("#imageTemp").click(function(){
  var can = document.getElementById("imageView");
  var img = can.toDataURL("image/png");
  socket.emit('emit_draw', img); 
```

});

在服务器端

```
io.sockets.on('connection', function (socket) {
    socket.on('emit_draw',function(img){
         socketioId = socket.id;
         socket.broadcast.emit('drawed',socketioId,img);
    }); 
```

并在客户端保存每个用户的套接字 ID，还包括

```
 socket.on('drawed',function(friendId,img){
         // handle your picture
    }); 
```

# scala - 由于未解决的依赖关系，无法构建 sbt 0.12.0-RC1

> ID：11221464
> 
> 赞同：4
> 
> 时间：2012-06-27T07:37:20.317
> 
> 标签：scala, build, sbt

我正在尝试按照[https://github.com/harrah/xsbt](https://github.com/harrah/xsbt)上的说明构建 sbt 0.12.0-RC1，但它无法下载以前版本的 sbt。

```
Getting org.scala-sbt sbt_2.9.1 0.12.0-M2 ...

:: problems summary ::
:::: WARNINGS
                module not found: org.scala-sbt#sbt_2.9.1;0.12.0-M2

        ==== local: tried

          /home/k/.ivy2/local/org.scala-sbt/sbt_2.9.1/0.12.0-M2/ivys/ivy.xml

        ==== typesafe-ivy-releases: tried

          http://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt_2.9.1/0.12.0-M2/ivys/ivy.xml

        ==== Maven Central: tried

          http://repo1.maven.org/maven2/org/scala-sbt/sbt_2.9.1/0.12.0-M2/sbt_2.9.1-0.12.0-M2.pom

        ==== sonatype-snapshots: tried

          https://oss.sonatype.org/content/repositories/snapshots/org/scala-sbt/sbt_2.9.1/0.12.0-M2/sbt_2.9.1-0.12.0-M2.pom

                ::::::::::::::::::::::::::::::::::::::::::::::

                ::          UNRESOLVED DEPENDENCIES         ::

                ::::::::::::::::::::::::::::::::::::::::::::::

                :: org.scala-sbt#sbt_2.9.1;0.12.0-M2: not found

                ::::::::::::::::::::::::::::::::::::::::::::::

:: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS
unresolved dependency: org.scala-sbt#sbt_2.9.1;0.12.0-M2: not found
Error during sbt execution: Error retrieving required libraries
  (see /home/k/.sbt/boot/update.log for complete log)
Error: Could not retrieve sbt 0.12.0-M2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:47:47.483

在构建 sbt 0.12-RC1 之前，您需要安装 sbt 0.12-M2。

这是在“[从源代码构建](https://github.com/harrah/xsbt/tree/0.12.0#build-from-source)”第 3 点下：

> 请注意，sbt 始终使用以前的稳定版本构建。例如，**0.12 分支用 0.12.0-M2**构建，v0.11.2 标签用 0.11.1 构建，v0.11.0 标签用 0.10.1 构建。

我想您只需从[他们的存储库](http://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt/0.12.0-RC1/jars/)下载就会感觉更好。

# apache - 正在安装 Xampp，xampp 中的 apache 服务未正确安装

> ID：11221466
> 
> 赞同：0
> 
> 时间：2012-06-27T07:37:33.873
> 
> 标签：apache

正在安装 Xampp，由于“端口 80 或 443 已在使用”错误，xampp 中的 apache 服务未正确安装。我的系统中没有 IIS 或Skype。在 443 运行的进程是 svchost，我无法停止它并且无法解决问题...请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:48:01.093

SQL server 报告服务可能使用了 80 端口，您应该禁用它，运行>services.msc> 搜索 SQL Server 报告服务 (MSSQLSERVER) 并将其禁用，然后重新启动您的 Xampp，希望对您有所帮助！:)

# ruby-on-rails - Rails 中如何渲染链接

> ID：11221468
> 
> 赞同：2
> 
> 时间：2012-06-27T07:37:35.373
> 
> 标签：ruby-on-rails, ruby

我对渲染有点困惑，不太确定它选择链接哪个路径。

根据文档： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

我们可以有明确的链接：

```
render "/u/apps/warehouse_app/current/app/views/products/show" 
```

但是，在 /apps/view/layouts/application.html.erb 中，如果我有 _header 和 _footer 的垫片，我必须去：

```
render 'layout/header' 
```

因此它会查找从 ../app/view/ 开始的路径，然后附加 layout/_header.html.erb 以获取文件。但是在 ruby​​onrails.org 上列出的使用显式链接的规则中，由前导 / 指示，具有从根文件夹 (/u/apps/...) 开始的路径。

所以我的问题是当使用带有前导 / 哪个是起始导演的渲染时？它总是根，布局只是规则的一个例外吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:43:04.500

```
render '/layout/header' 
```

应该只是

```
render 'layout/header' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:49:22.230

我想你错过了这一点。render 方法还可以使用完全在您的应用程序之外的视图（也许您正在两个 Rails 应用程序之间共享视图）：

```
render "/u/apps/warehouse_app/current/app/views/products/show" 
```

由于前导斜杠字符，Rails 确定这是文件渲染。

通常，如果您要从另一个控制器添加视图文件，则它需要

```
render "prodcucts/show" 
```

它将自动采用路径直到查看文件夹。对于布局，您可以与上述相同

```
render "layouts/header" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:50:20.343

`render`我认为关于正确路径的混淆是由于您使用第一个选项指向布局文件这一事实引起的。这不是应该使用布局的方式。

相反，您会像这样使用它们：

```
render 'users/show', layout: 'mylayout' 
```

但是，在您的情况下，您真正​​想要使用的似乎是**[partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)**。

像这样的东西会起作用：

```
render 'shared/header' 
```

文件名为`_header.html.erb`

文档中的两个重要说明：

> 对于应用程序中所有页面之间共享的内容，您可以直接从布局中使用部分内容。

和：

> 部分可以使用自己的布局文件，就像视图可以使用布局一样。例如，您可能会像这样调用部分：

```
<%= render :partial => "link_area", :layout => "graybar" %> 
```

# php - 在 php 中使用 Paypal Pro Directpayment

> ID：11221473
> 
> 赞同：0
> 
> 时间：2012-06-27T07:38:20.487
> 
> 标签：php

我正在用 curl 测试贝宝沙箱，但每次它都给我沙箱的登录页面。有什么问题？我想在我的网站上使用 paypal pro。我不想去贝宝网站。所有付款必须我在网站上完成。

```
function PPHttpPost($methodName_, $nvpStr_){ 
                global $environment;
                // Set up your API credentials, PayPal end point, and API version.
                $API_UserName = urlencode('XXXXXXXXXXXXXX');
                $API_Password = urlencode('XXXXXXXX');
                $API_Signature = urlencode('XXXXXXXXXXXXX');

                $version = urlencode('51.0');

                // Set the curl parameters.
                $ch = curl_init("https://www.sandbox.paypal.com/cgi-bin/webscr");
                //curl_setopt($ch, CURLOPT_URL, "");
                //curl_setopt($ch, CURLOPT_VERBOSE, 1);

                // Turn off the server and peer verification (TrustManager Concept).
                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
                //curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
                curl_setopt($ch, CURLOPT_HEADER, false);
                curl_setopt($ch, CURLOPT_USERAGENT, 'cURL/PHP');
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($ch, CURLOPT_POST, 1);

                // Set the API operation, version, and API signature in the request.
                $nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

                // Set the request as a POST FIELD for curl.
                curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

                // Get response from the server.
                $httpResponse = curl_exec($ch);
                   print_r($httpResponse); die;
                if(!$httpResponse) {
                    exit("$methodName_ failed: ".curl_error($ch).'('.curl_errno($ch).')');
                }

                // Extract the response details.
                $httpResponseAr = explode("&", $httpResponse);

                $httpParsedResponseAr = array();
                foreach ($httpResponseAr as $i => $value) {
                    $tmpAr = explode("=", $value);
                    if(sizeof($tmpAr) > 1) {
                        $httpParsedResponseAr[$tmpAr[0]] = $tmpAr[1];
                    }
                }

                if((0 == sizeof($httpParsedResponseAr)) || !array_key_exists('ACK', $httpParsedResponseAr)) {
                    //exit("Invalid HTTP Response for POST request($nvpreq) to $API_Endpoint.");
                }

                return $httpParsedResponseAr;
            } 
```

# c# - 检测 https 流量，然后通过 sslstream 进行握手

> ID：11221489
> 
> 赞同：0
> 
> 时间：2012-06-27T07:39:45.197
> 
> 标签：c#, .net, ssl

我有通过从流中读取一些字节来检测 Ssl 流量的功能：

```
private bool IsSslContent(Stream stream)
    {
        var firstLineBytes = new byte[1];
        firstLineBytes = stream.ReadByte();
        if (firstLineBytes != null)
        {
            if ((firstLineBytes[0] == 0x80)||(firstLineBytes[0] == 0x16))
            {
                return true;
            }
        }
        return false;
    } 
```

如果是 ssl，那么我们必须进行握手，但没有这个字节 - 握手不应该发生。

如何解决这个问题呢？

# java - 如何将多行字符串变为单行字符串？

> ID：11221491
> 
> 赞同：12
> 
> 时间：2012-06-27T07:39:53.203
> 
> 标签：java, java-11

我有以下字符串

```
String str="select * from m_menus;

select * from m_roles"; 
```

我想在一行中使用上面的字符串

```
String str="select * from m_menus;select * from m_roles"; 
```

我试过了

```
str1=str.replace("[\r\n]+", " "); 
```

并且

```
str1=str.replace("\n"," "); 
```

两者都不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T07:44:09.503

改为使用[`String.replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)。

```
str1=str.replaceAll("[\r\n]+", " "); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-14T07:50:05.093

没有正则表达式和操作系统独立：

```
str1.replaceAll(System.lineSeparator(), " "); 
```

Windows 使用 \r\n 作为换行符，而 *nix 系统仅使用 \n。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T07:44:00.140

如果要使用正则表达式，则应使用该`String.replaceAll()`方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T07:44:19.757

你为什么不使用`str.replaceAll("\r\n", " ")`？

应该工作并替换所有发生的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-02T06:04:47.260

**使用 Java 11 行（）**

Java 11 添加了新方法`String::lines`，`lines`方法使用专门`Spliterator`用于从源字符串中延迟提供行

```
yourMultilineString.lines().collect(Collectors.joining(";")); 
```

**注意**该字符串使用 Windows' `\r\n`，即使我在 Linux 上，lines() 仍然会拆分它。这是因为无论操作系统如何，**该方法都将 \r、\n 和 \r\n 视为行终止符并在那里拆分**——即使它们混合在同一个字符串中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-01-02T06:15:08.443

```
str1=str.replaceAll("[\r\n]+", " "); 
```

# hadoop - 在 cygwin 上运行 bin/haoop jobtracker 时 hadoop 文件丢失

> ID：11221493
> 
> 赞同：0
> 
> 时间：2012-06-27T07:40:04.013
> 
> 标签：hadoop, file-not-found

我正在关注本教程[http://ebiquity.umbc.edu/Tutorials/Hadoop/14%20-%20start%20up%20the%20cluster.html](http://ebiquity.umbc.edu/Tutorials/Hadoop/14%20-%20start%20up%20the%20cluster.html) 他们使用的是 hadoop 版本 hadoop-0.19.1。我安装的版本是hadoop-0.20.204.0。我可以使用这个命令很好地格式化 HDFS `bin/hadoop namenode -format`。

当我想使用 jobtracker 时出现问题，当我使用此命令时，它说没有这样的文件或目录 b`in/haoop jobtracker.`同样，当我尝试运行数据节点和 tasktracker 时，也会返回相同的错误消息。文件是否被移动到不同的地方或者我没有正确安装它。

下载包中缺少该文件。错误消息是当我在 cygwin 系统上的文件夹 hadoop-0.20.204.0 中时。

这是正在格式化的hdfs

```
$ bin/hadoop namenode -format
bin/hadoop: line 301: C:\Program: command not found
12/06/27 22:17:51 INFO namenode.NameNode: STARTUP_MSG:
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = ALEXDEV-PC/192.168.1.2
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 0.20.204.0
STARTUP_MSG:   build = git://hrt8n35.cc1.ygridcore.net/ on branch branch-0.20-se                                                                                                                                                                                               curity-204 -r 65e258bf0813ac2b15bb4c954660eaf9e8fba141; compiled by 'hortonow' o                                                                                                                                                                                               n Thu Aug 25 23:35:31 UTC 2011
************************************************************/
Re-format filesystem in \tmp\hadoop-ALEXDEV\dfs\name ? (Y or N) Y
12/06/27 22:17:57 INFO util.GSet: VM type       = 32-bit
12/06/27 22:17:57 INFO util.GSet: 2% max memory = 19.33375 MB
12/06/27 22:17:57 INFO util.GSet: capacity      = 2^22 = 4194304 entries
12/06/27 22:17:57 INFO util.GSet: recommended=4194304, actual=4194304
12/06/27 22:17:57 INFO namenode.FSNamesystem: fsOwner=ALEXDEV
12/06/27 22:17:57 INFO namenode.FSNamesystem: supergroup=supergroup
12/06/27 22:17:57 INFO namenode.FSNamesystem: isPermissionEnabled=true
12/06/27 22:17:57 INFO namenode.FSNamesystem: dfs.block.invalidate.limit=100
12/06/27 22:17:57 INFO namenode.FSNamesystem: isAccessTokenEnabled=false accessK                                                                                                                                                                                               eyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
12/06/27 22:17:57 INFO namenode.NameNode: Caching file names occuring more than                                                                                                                                                                                                10 times
12/06/27 22:17:58 INFO common.Storage: Image file of size 113 saved in 0 seconds                                                                                                                                                                                               .
12/06/27 22:17:58 INFO common.Storage: Storage directory \tmp\hadoop-ALEXDEV\dfs                                                                                                                                                                                               \name has been successfully formatted.
12/06/27 22:17:58 INFO namenode.NameNode: SHUTDOWN_MSG:
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at ALEXDEV-PC/192.168.1.2 
```

环境变量 C:\Program Files (x86)\Java\jdk1.6.0_32 的路径

我再次运行命令

ALEXDEV@ALEXDEV-PC ~/hadoop-0.20.204.0 $ bin/hadoop namenode 错误：未设置 JAVA_HOME。

我不确定如何为路径（x86）部分中的括号处理转义字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:35:56.430

听起来像是它推断的路径名中的未转义空格。尝试将 hadoop 目录移动到驱动器的根目录（例如 c:\hadoop\" 或类似的东西。

# objective-c - 如何在 UIAlertView 的消息中使用 UIWebView？

> ID：11221496
> 
> 赞同：0
> 
> 时间：2012-06-27T07:40:21.737
> 
> 标签：objective-c

谁能帮我解决这个问题？我试过了，但是 webview 的框架不合适，我想在我的应用程序的开头使用警报作为条款和条件，所以文本会更大，这就是为什么我想使用 webview 而不是使用字符串消息和正在使用的文本不是英语它的阿拉伯语这就是为什么如果使用普通字符串它看起来不好

请任何人都可以帮助我....这是它的外观：

```
 UIAlertView* alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Terms and Condition", @"Terms and Condition") message:terms delegate:self cancelButtonTitle:NSLocalizedString(@"Accept", @"Accept")                                             otherButtonTitles:NSLocalizedString(@"Cancel",@"Cancel"), nil];

 [alert setFrame:CGRectMake(alert.frame.origin.x,alert.frame.origin.y, alert.frame.size.width, 150)];
 UIWebView *webView = [[UIWebView alloc] init];
 [webView setFrame:CGRectMake(12,45,260,100)];
  [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]];
 [alert addSubview:webView];
 [alert show]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:33:29.193

您不想这样做，因为如果您这样做，Apple 可能会拒绝您的应用程序。在人机界面指南中，它指出您应该

> “避免创建太长的警报消息。如果可能，请保持消息足够短以显示在一两行。如果消息太长，它会滚动，这不是一个好的体验。”

对于您想要在这里实现的目标，我会说您显示一个带有 UIScrollView 或 UIWebView 的模态视图控制器，其中包含您的条款和协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:44:25.277

不幸的是你不能这样做，最好的选择是创建一个看起来与你的 AlertView 完全一样的 UIView，然后在里面放一个 UIView。

如果您需要帮助，请告诉我们，祝您好运！

# actionscript-3 - 将 DataGrid 行拖入其他 DataGrid 行

> ID：11221498
> 
> 赞同：0
> 
> 时间：2012-06-27T07:40:27.650
> 
> 标签：actionscript-3, apache-flex, datagrid, drag-and-drop

我有 2 个数据网格，标准拖动的实现方式我不知道是否易于提供下面的功能：

我想将第二个 DataGrid 中的 1 个 datagrid 行拖入第一个 DataGrid 中的一行。您可以轻松设置拖放功能，但这似乎仅适用于将行放置在其他 DataGrid 中的一行之上或之下。

启用拖动时，另一个 DataGrid 中的行必须亮起，如果通过释放鼠标完成拖动，则应将该行添加到该行中。

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:16:57.510

你应该看看这个[http://blog.flexexamples.com/2007/09/19/dragging-rows-between-two-different-flex-datagrid-controls/](http://blog.flexexamples.com/2007/09/19/dragging-rows-between-two-different-flex-datagrid-controls/)

希望这对您有所帮助。

# eclipse - Eclipse RCP 中的应用程序设计

> ID：11221499
> 
> 赞同：0
> 
> 时间：2012-06-27T07:40:36.357
> 
> 标签：eclipse, rcp

您在大型 Eclipse RCP 应用程序中使用的插件约定是什么？ui 和 code-behind 应该分开，还是把程序的不同部分分成插件项目就足够了？数据库连接呢？这也应该是一个插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:55:11.500

最大的惯例是使产品发布和修补更加简单。比如plugin.A有bug，修复和打补丁只是plugin.A相关的改动，而不是整个产品的重建和分发。

最佳实践可以从著名的 eclipse 项目插件组织中学习，如 CDT 或其他项目。但是，您的应用程序的要求是最重要的。

# c# - c# implicit conversion from base class

> ID：11221500
> 
> 赞同：8
> 
> 时间：2012-06-27T07:40:36.603
> 
> 标签：c#, .net-4.0, implicit-conversion

I have a collection class like this:

```
public class SomeDataCollection : List<ISomeData>
{
    // some method ...
} 
```

but I can't do this:

```
SomeDataCollection someDatas = new List<ISomeData>(); 
```

> Cannot **implicitly** convert type `List<ISomeData>` to `SomeDataCollection`. An explicit conversion exists (are you missing a cast?)

so I try to create an implicit coverter inside `SomeDataCollection` collection class:

```
public static implicit operator SomeDataCollection(List<ISomeData> l)
{
    var someDatas = new SomeDataCollection();
    someDatas.AddRange(l);
    return someDatas;
} 
```

but it said that I can't create such converter:

> `SomeDataCollection.implicit operator SomeDataCollection(List<ISomeData>)`: **user-defined conversions to or from a base class are not allowed**

And when I cast it like this:

```
SomeDataCollection someDatas = (SomeDataCollection)new List<ISomeData>(); 
```

it throws an error that said:

> **System.InvalidCastException:** Unable to cast object of type `List<ISomeData>` to type `SomeDataCollection`.

How can I do this:

```
SomeDataCollection someDatas = new List<ISomeData>(); 
```

without getting an error? Please help. Thanks in advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T07:46:58.327

A `new List<ISomeData>();` is still just a `List<ISomeData>`. It isn't a `SomeDataCollection`. The point of subclassing is that the subclass could have extra state etc, but an object (once created) **never** changes type.

You are not allowed to create operators between types in the same hierarchy, as that would subvert the usual and expected casting behaviour.

You could use simply:

```
var data = new SomeDataCollection(); 
```

However I should add that frankly it is rarely useful to subclass `List<T>`. Not least, it doesn't expose any useful `virtual` methods, so you can't tweak the behaviour. I would honestly just use a `List<ISomeData>` (and remove `SomeDataCollection` completely) unless I have a clear and demonstrable purpose for it. And then: I might either *encapsulate* the list, or inherit from `Collection<T>`.

You could always just add the method as an extension method?

```
public static class Utils {
    public static void SomeMethod(this IList<ISomeData> list) {
      ...
    }
} 
```

then:

```
var list = new List<ISomeData>();
...
list.SomeMethod(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:42:36.147

First of all, why do you want to write `new List<ISomeData>` into a variable defined as `SomeDataCollection`? It is possible that you actually wanted to `SomeDataCollection someDatas = new SomeDataCollection();`

As for error messages, the first error message tells you that `List<ISomeData>` is not derived from `SomeDataCollection`, therefore you can't do with it something you would do with `SomeDataCollection`, therefore you can't write it to the variable which is defined as `SomeDataCollection` (imagine e.g. if `SomeDataCollection` had `public void someMethod()` in it, and later in the code you'd call `someDatas.someMethod()`).

The second error message tells you that converters are intended for converting between completely different types, not between the based and derived type. Otherwise, what would you expect to get e.g. in the following example:

```
SomeDataCollection a = new SomeDataCollection();
List<ISomeData> b = (List<ISomeData>)a;
SomeDataCollection c = (SomeDataCollection)b; 
```

Should it call your converter or not?

Basically code you're trying to write is very wrong to begin for, so we need to know what're you trying to do, and then maybe well'be able to tell you the solution of your root problem (and not of the problem "how to make this code compile").

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T07:47:38.547

Isn't it better to implement a constructor in `SomeDataCollection`?

```
public SomeDataCollection() : base() { } 
```

This could of course be complemented with

```
public SomeDataCollection(IEnumerable<ISomeData> collection) 
    : base(collection) { } 
```

Then you should be able to initialize your `SomeDataCollection` like this instead:

```
SomeDataCollection someData = new SomeDataCollection();
SomeDataCollection someOtherData = 
    new SomeDataCollection(collectionOfSomeData); 
```

and still have access to all the public methods and properties in `List<ISomeData>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:51:38.487

It does not problem with generics. In C# you are not allowed to explicitely convert a base class into a derived class.

# xcode - UITableViewCell - heightForRowAtIndexPath - 动画速度 xcode 目标 c

> ID：11221501
> 
> 赞同：1
> 
> 时间：2012-06-27T07:40:37.167
> 
> 标签：xcode, animation, uitableview, heightforrowatindexpath

更改单元格的行高时

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  if (a)
    return 55
  else
    return 266
} 
```

然后，

```
[aTableView beginUpdates]; 
```

如果表格单元格发生变化，表格单元格将动画到高度。

有没有办法控制这个动画的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:50:31.580

不，无法控制表格视图动画的速度。也许你可以写一个自定义的表格视图，然后你可以随心所欲地控制很多东西。

# c# - StreetAddress 和 Zipcode 是唯一考虑在谷歌地图中获取地理编码的字段吗？

> ID：11221505
> 
> 赞同：0
> 
> 时间：2012-06-27T07:41:04.200
> 
> 标签：c#, google-maps

我在我的 C# web 服务应用程序中使用 GoogleMaps API。我有一个网页，用户在其中输入涉及 streetline1、streetline2、城市、州、邮政编码的地址。我写的方法接受这个地址并返回纬度/经度（地理编码）。我面临的问题是它没有验证整个地址。比如说。我正在尝试获取有效地址 No 1 Main Street, Chicago, IL, 60612 的地理编码，它返回有效的纬度/经度。如果我将地址更改为 No 1 Main Street, San Jose, CA, 60612 它仍然返回相同的地理编码。我怀疑它只使用 StreeLine1 和 Zipcode 来获取地理编码。我的理解对吗？如果是这样，如果我给出这样的无效地址但有效的 Addressline1 和邮政编码它仍然给出纬度/经度 - 我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:11:19.913

地理编码器不是地址验证器。它返回给定输入的最佳匹配。也许你得到了多个结果。对于您提供的两个示例，我没有得到相同的坐标。

# c# - 用户在预定时间在 Facebook 墙上发帖

> ID：11221506
> 
> 赞同：-1
> 
> 时间：2012-06-27T07:41:06.467
> 
> 标签：c#, facebook

嗨，我开发了一个应用程序，最终用户可以使用 access_token 在他的墙上发布一些东西。但问题是最终用户想要安排时间并且他想在该预定时间发布。我应该如何在 c# 中实现这一点。紧急等待回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:46:13.077

使用计时器，并检查该人要发布的日期时间，然后简单地发布消息

# sql-server - 用户授权——新用途？

> ID：11221508
> 
> 赞同：0
> 
> 时间：2012-06-27T07:41:13.047
> 
> 标签：sql-server, ms-access-2007

我有一个应用程序（恰好在 Access 2007 中），我在其中实现了经典的用户授权结构：用户->角色->对象类->对象

因此，每个用户都注册为一个或多个角色，该角色映射到一个或多个对象类，该对象类映射到经典多对多关系中的一个或多个对象。对象通常是用户表单，但包括“F11”，例如，打开访问导航窗格的能力。

为了使用该结构，我创建了一个查询（实际上是一个 SQL Server 的“视图”，因为后端是 SQL Server ...），它“扁平化”了它，并且基本上允许调用单个“授权（用户，对象）”返回给定用户是否对给定对象授权的函数......没有麻烦，没有大惊小怪。

现在，我只是被要求建立一个结构，其中用户可以被授权为“发起者”、“批准者”、“管理员”，或者给定供应商时间表的任何组合。我想我会尝试使用我的标准授权结构来满足这个新要求，但我对如何最好地构建它有点困惑。

这会立即引起任何人的共鸣吗？我不必将结构暴露给用户，我只需制作一个在幕后完成工作的表单。你怎么看？太复杂？太简单？

# sqlite - SQlite 时差使用函数 strftime 和日期并使用触发器在插入时更新

> ID：11221509
> 
> 赞同：3
> 
> 时间：2012-06-27T07:41:22.780
> 
> 标签：sqlite, function, time, strftime

我想要两个时间戳之间的区别，比如

```
Endtime = strftime('%Y-%m-%d %H:%M:%S','now','localtime') 
firsttime = strftime('%Y-%m-%d %H:%M:%S','2012-01-27 02:34:56') 
```

即如果我的第一次是 2012-06-15 14:54:33 而结束时间是 2012-06-15 14:54:40 那么时间差异将是这样的 =00:00:14;

我想在时间戳之间有这样的差异，比如`Endtime-firsttime`

我还想使用触发器在 Android 的 SQLite 数据库中使用。

在 SQL 中，我们可以通过使用`time to second`函数和`second to time`函数进行转换来实现。

任何建议都将不胜感激，但是我可以轻松获得 Java 中的时差，但我的应用程序还有很多其他工作。所以我希望我可以使用 SQLite 内置函数来实现相同的功能，从而减少应用程序的负担。

# c# - 为 DataContractSerializer 预定义 XML 命名空间

> ID：11221511
> 
> 赞同：7
> 
> 时间：2012-06-27T07:41:23.417
> 
> 标签：c#, xml-serialization, xml-namespaces, datacontractserializer

我正在构建一个自托管的 WCF 服务。我正在为非常灵活的数据传输构建一个特殊的数据结构。到目前为止，我使用 DataContractSerializer 测试我的结构是否可序列化。这很好用，我很高兴，但有一些让我烦恼的事情：

在我的 XML 输出中有几十个重新定义的 xmlns 属性，例如：

```
xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
xmlns:b="http://www.w3.org/2001/XMLSchema" 
```

这应该在根元素中更好地定义一次，以便可以简单地优化字节。有没有办法将自定义命名空间信息添加到根元素？

这是一个更大的例子来说明我的意思：

```
<DataObject xmlns="http://schemas.datacontract.org/2004/07/Test"
            xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <Data xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
    <a:KeyValueOfstringanyType>
      <a:Key>ID</a:Key>
      <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1</a:Value>
    </a:KeyValueOfstringanyType>
    <a:KeyValueOfstringanyType>
      <a:Key>Value</a:Key>
      <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">42</a:Value>
    </a:KeyValueOfstringanyType>
  </Data>
  <Data xmlns:a="...">...</Data>
  <Data xmlns:a="...">...</Data>
  <Data xmlns:a="...">...</Data>
</DataObject> 
```

我想要的是这样的：

```
<DataObject xmlns="http://schemas.datacontract.org/2004/07/Test"
            xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
            xmlns:b="http://www.w3.org/2001/XMLSchema">
  <Data>
    <a:KeyValueOfstringanyType>
      <a:Key>ID</a:Key>
      <a:Value i:type="b:int">1</a:Value>
    </a:KeyValueOfstringanyType>
    <a:KeyValueOfstringanyType>
      <a:Key>Value</a:Key>
      <a:Value i:type="b:int">42</a:Value>
    </a:KeyValueOfstringanyType>
  </Data>
  <Data>...</Data>
  <Data>...</Data>
  <Data>...</Data>
</DataObject> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T08:12:52.097

```
static void Main()
{
    var o = new Foo {
        Prop = new Dictionary<string,string> { {"foo","bar"} }
    };

    var ms = new MemoryStream();

    var slz = new DataContractSerializer(typeof(Foo));
    slz.WriteObject(ms, o,
        new Dictionary<string,string>
        {
            { "arr", "http://schemas.microsoft.com/2003/10/Serialization/Arrays" },
        });

    string data = Encoding.UTF8.GetString(ms.ToArray());
    Console.WriteLine(data);
}

public static class Extensions
{
    public static void WriteObject(
        this DataContractSerializer serializer,
        Stream stream, object data,
        Dictionary<string,string> namespaces)
    {
        using (var writer = XmlWriter.Create(stream))
        {
            serializer.WriteStartObject(writer, data);
            foreach (var pair in namespaces)
            {
                writer.WriteAttributeString("xmlns", pair.Key, null, pair.Value);
            }
            serializer.WriteObjectContent(writer, data);
            serializer.WriteEndObject(writer);
        }
    }
}

[DataContract]
class Foo
{
    [DataMember]
    public Dictionary<string,string> Prop;
} 
```

输出：

```
<?xml version="1.0" encoding="utf-8"?>
<Foo xmlns:arr="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
     xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
     xmlns="http://schemas.datacontract.org/2004/07/">
    <Prop>
        <arr:KeyValueOfstringstring>
            <arr:Key>foo</arr:Key>
            <arr:Value>bar</arr:Value>
        </arr:KeyValueOfstringstring>
    </Prop>
</Foo> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T16:58:39.490

我成功地使用了这里描述的解决方案：http: [//blogs.msdn.com/b/youssefm/archive/2009/07/24/optimizing-away-repeat-xml-namespace-declarations-with-datacontractserializer.aspx](http://blogs.msdn.com/b/youssefm/archive/2009/07/24/optimizing-away-repeat-xml-namespace-declarations-with-datacontractserializer.aspx)

您基本上创建了一个为您将命名空间添加到根元素的行为。

来自文章：

> 只需创建一个继承自 XmlObjectSerializer 的序列化程序，该序列化程序对其所有方法都使用 DataContractSerializer，但它在顶层注册了额外的命名空间。然后创建一个从返回您刚刚创建`DataContractSerializerOperationBehavior`的方法的方法派生的行为并插入该行为。`CreateSerializer``XmlObjectSerializer`

如果您想在 Silverlight 中执行此操作，您还可以使用此处描述的解决方案：http: [//blogs.msdn.com/b/carlosfigueira/archive/2011/05/24/wcf-extensibility-custom-serialization-in -silverlight.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/24/wcf-extensibility-custom-serialization-in-silverlight.aspx)

# java - JAVA 字符串转字符

> ID：11221515
> 
> 赞同：6
> 
> 时间：2012-06-27T07:41:46.090
> 
> 标签：java, string, char

我有一个表示字符的十六进制值的字符串，例如：“0x6d4b”。我怎样才能得到它表示为字符的字符？

```
String c = "0x6d4b";
char m = ??? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T07:55:53.367

```
// Drop "0x" in order to parse
String c = "6d4b";
// Parse hexadecimal integer
int i = Integer.parseInt( c, 16 );
// Note that this method returns char[]
char[] cs = Character.toChars( i );
// Prints 测
System.out.println( cs ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:01:58.210

```
String s = "6d4b";
int i = Integer.parseInt( s, 16 );   // to convert hex to integer
char ca= (char) i;
System.out.println(ca); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:05:31.340

```
System.out.println((char)Integer.parseInt("6d4b",16)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T07:47:51.127

尝试这个，

```
String s ="0x6d4b" ;
        char[] c = s.toCharArray();

        for (char cc : c){

            System.out.print(cc);
        } 
```

# c# - 在 asp.net 的 datagridview 中更改子字符串的前景色

> ID：11221516
> 
> 赞同：0
> 
> 时间：2012-06-27T07:41:56.333
> 
> 标签：c#, asp.net, datagridview

我想在我的**gridview中更改一个****子字符串前景色**。

 **我试过这样的事情：

```
 TaskGridView.Rows[i]
               .Cells[j + 2]
               .Text.Substring(firstInd, length)
               .ForeColor =System.Drawing.Color.DarkSalmon; 
```

**但String 类**没有**ForeColor**属性

 **我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:50:49.267

您必须自己通过 a`span`和`style`标签将 html 添加到您的字符串中，例如：

```
TaskGridView.Rows[i].Cells[j + 2].Text =     
    TaskGridView.Rows[i].Cells[j + 2].Text.Substring(0,firstInd) + 
    "<span style=\"color:salmon\">" + 
    TaskGridView.Rows[i].Cells[j + 2].Text.Substring(firstInd, length) + 
    "</span>" 
```****

# php - 使用 php 系统命令调用时处理 jpegtran 的错误输出

> ID：11221522
> 
> 赞同：0
> 
> 时间：2012-06-27T07:42:30.283
> 
> 标签：php, jpeg

```
 $cmd = 'jpegtran a.jpg > b.jpg';
    system($cmd);
    $newsize = filesize('b.jpg');
    if($newsize != 0) {
       copy('b.jpg','a.jpg');
    } 
```

我想在一堆图像上运行**jpegtran并仅在命令成功的情况下将输出复制到原始文件。**

当我运行上述 php 代码时，对于某些图像，我会收到诸如**“jpg 文件过早结束”**或**“输入文件为空”**等错误。

如何捕获这些错误并在我的代码中采取相应措施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:00:52.373

我不确定如何`jpegtran`返回错误，但更常见的错误返回代码与 0 不同。

如果是这样，您可以使用`exec()`- [http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)代替并在 return_var 中`system()`获取结果，如下所示：`jpegtran`

```
exec('jpegtran a.jpg > b.jpg', $result, $return_var);

if( $return_var ) {
  // Error log here
} 
```

编辑：我也忘了`system()`返回 return_var 。所以同样可以用`system('jpegtran a.jpg > b.jpg', $return_var);`

# javascript - 将对象插入空数组

> ID：11221523
> 
> 赞同：1
> 
> 时间：2012-06-27T07:42:32.390
> 
> 标签：javascript, arrays, json

运行以下代码时出现问题。`stock50`是一个非常普通的数组，其中包含 50 个带有名称和编号的对象（非空）。

`AAA, BBB, CCC, DDD`在 console.log 中一切看起来都很好，但`EEE`只显示 9 个元素，最后一个元素未定义。我试图将 9 更改为任何数字，但最后一个总是显示未定义。但是，在 JsFiddle 中很好。

stock50 数组如下所示....

```
runStockDraw : function(option){
  var pickingStock = stock50,
      tempArray = function(){
        var array =[],
            i = 0;

        while(i<10){
       // AAA  console.log(array[i-1]);
       // BBB  console.log(i);
          array[i] = {};
       // CCC  console.log(array[i]);
          array[i] = $.extend({},stock50[i]);
       // DDD  console.log(array[i]); 
          i++;
        }
       // EEE  console.log(array);
        return array; 
      }();

  var updateData = function(){
    var i = 0,j=0,
        temp = tempArray.shift(), 
```

# mysql - 如果不存在 mysql 创建触发器的解决方法？

> ID：11221524
> 
> 赞同：0
> 
> 时间：2012-06-27T07:42:33.327
> 
> 标签：mysql

在我的应用程序中，我有一个动态系统，所以我必须检查一个表是否已经存在，并根据需要特别创建它。如果不存在则创建表是没有问题的。

但是由于mysql不支持create trigger语句中的“if not exists”，所以想问一下除了drop trigger还有其他的解决方法吗？每次都删除触发器以重新创建它对我来说毫无意义，我只想创建一个丢失的触发器。这个事件应该发生一次，而 drop 和 recreate 会经常发生。触发器对于审计/记录目的是必需的。

也许我们可以用 oracle 的方式来做，您可以将 create ddl 包装在 begin/end 中，然后在异常处理程序中执行 null ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:29:33.323

使用 CREATE TRIGGER 语句。如果触发器存在，您将得到一个异常，只需捕获它。

如果您不想捕获错误，那么您可以检查存在 -

```
SELECT TRIGGER_NAME
FROM information_schema.triggers
WHERE TRIGGER_SCHEMA = 'db_name' AND TRIGGER_NAME = 'trigger_name' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:27:08.037

你可以在创建表的时候创建触发器，如果​​你删除一个带有触发器drop失败的表，你必须先删除触发器。

创建表时创建触发器，如果​​表存在则触发器存在

# passwords - html密码缓存在RAM中？

> ID：11221531
> 
> 赞同：-2
> 
> 时间：2012-06-27T07:42:47.893
> 
> 标签：passwords, encryption

我的服务器配置了 https。但是所有凭据都缓存在 RAM（客户端计算机）中。

如果我们有客户端机器的 IP 地址，我们可以轻松获取存储在 RAM 中的用户凭据。我知道除非您关闭/重新启动客户端计算机，否则 RAM 不会被清除。

如何停止在 RAM 中缓存凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:34:23.097

运行 Web 服务器时，您接受来自客户端计算机上的 Chrome、Safari 或 Internet Explorer 等 Web 浏览器的连接。当您的客户端通过 https 连接时，浏览器发送给您的信息以及您发送回该浏览器的信息在传输过程中被加密隐藏。

用户将她的用户名和密码提供给浏览器软件中的对话框，该对话框然后管理其传输（加密）到您的服务器。浏览器确实存储了未加密的用户名和密码。它需要这样做，因为 BASIC 身份验证要求对服务器的每个请求都携带（加密的）用户名/密码对。

如果用户在开机时失去对她的机器的控制，那么坏人确实可以发现密码。

退出时由浏览器软件清除 RAM 中的密码。大多数商业浏览器软件包在退出之前都会清除该 RAM。

如果您正在创建一个特殊用途的浏览器（一个特殊用途的 https 客户端软件包），您可能希望这样做。

您的担忧是有道理的：这是病毒和其他恶意软件如此危险的原因之一。但是，如果您是一名普通的 Web 开发人员，则除了建议您的用户安装和维护防病毒软件外，您对这种客户端风险无能为力。

# android - 通过网络服务上传安卓相机拍摄

> ID：11221534
> 
> 赞同：0
> 
> 时间：2012-06-27T07:42:54.467
> 
> 标签：android, web-services

我正在编写一个必须通过网络服务上传图片的安卓应用程序。我的 Web 服务部分正在运行（使用控制台应用程序进行测试）。所以我想我的错误是在 android 部分。

Android 代码用于拍照：

```
public void TakePicture(){          
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    //outputFileUri = Uri.fromFile( new File(Environment.getExternalStorageDirectory(), "appicture.jpeg"));
    //Log.i("URI", outputFileUri.toString());
    i.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
    startActivityForResult(i, cameraData);
} 
```

活动结果：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    try{
        super.onActivityResult(requestCode, resultCode, data);
        //if I got information from Activity result
        if(resultCode == RESULT_OK){

            Bundle extras = data.getExtras();
            _bmp = (Bitmap) extras.get("data"); 

        }else{
            //log
            Log.v("Phone", "Error picture");
        }
    }
    catch (Exception e) {
        Log.i("Cam error", e.toString());
    }
} 
```

现在发送部分：

```
public void SendReport(){
    File img;
    try {
        //Web service URL
        String url = "http://10.0.2.2:51136/API/picture";

        //Convert the picture
        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        _bmp.compress(Bitmap.CompressFormat.JPEG, 100, bao);
        byte[] data = bao.toByteArray();

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        //Add the picture
        entity.addPart("image",new ByteArrayBody(data, "image/jpeg", "image"));
        httppost.setEntity(entity);

        //Call
        HttpResponse response = httpclient.execute(httppost);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:27:10.570

试试这样：

```
 entity.addPart("image",new ByteArrayBody(data, "image.jpg")); 
```

# java - HashMap 到 JSONArray 并在 jquery 中处理响应

> ID：11221537
> 
> 赞同：1
> 
> 时间：2012-06-27T07:43:07.787
> 
> 标签：java, javascript, jquery, arrays

我有这个 HashMap< String,Employee>() 对象，我将它转换为 JSONArray 如下

```
JSONArray jarray = JSONArray.fromObject(myHashMap); 
```

请注意，映射中的键始终是数字文字，但其数据类型是字符串。

下面是用于将 json 字符串设置为响应的代码。

```
response.setContentType("text/text;charset=utf-8");
response.setHeader("cache-control", "no-cache");
PrintWriter out = response.getWriter();
out.println(jarray.toString());
out.flush(); 
```

我得到的json字符串是

```
[{"1":{"empAge":32,"empEmail":"name@mail.com","empId":1,"empName":"myname","empTel":"33445"}] 
```

如何在键值为 1 的地图中获取 empName 的值？

```
$.ajax({
type: "POST",
url: "/MyApp/TestAction.do",
dataType :"json",
success: function(response){
     alert(response.1[0].empName);// I get java script error in this statement
    },
    error: function(e){
        alert('Error: ' + e);
    }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:17:59.667

您使用了错误的标题：

```
 response.setContentType("text/text;charset=utf-8"); 
```

将其更改为：

```
response.setContentType("application/json;charset=utf-8"); 
```

目前您将其作为字符串获取，因此您不能将其用作对象，一旦更改标头，您将获得它作为 json 对象并且能够使用它。

作为旁注，“1”不是一个很好的键，如果您可以将其替换为更具描述性的字符串，我建议您这样做。

# jquery - 计算项目 jquery 模板

> ID：11221539
> 
> 赞同：2
> 
> 时间：2012-06-27T07:43:12.063
> 
> 标签：jquery, templates, count, compare

我如何计算每个 jquery 模板中的项目并将 if 应用于该变量

就像是

```
<script id="inventorySummaryTmpl" type="text/x-jquery-tmpl"> 
<tr>
{{each response}}
    {{if response.length === 2 }}
        </tr><tr>
    {{/if}}
        <td><img src='${icon}'> ${title} </td>
{{/each}}

</tr> 
```

这是加载 JSON 并与 jquery.TMPL 交互的 javascript

```
 var ip = window.location.hash;

    var request = $.ajax({
        type: 'GET',
        url: 'ajax/dashboard/widgets/inventorySummary.xsp?ip='+ip.substring(1),
        dataType: 'json'
    });

    request.done(function(data){
        $("#inventorySummaryTmpl").tmpl(data).appendTo("#inventorySummaryContent");
    });

    request.fail(function(jqXHR, textStatus, errorThrown) {
        console.log(errorThrown);
        console.log(textStatus)
    }); 
```

和 JSON

```
{

"response": [
    {
        "icon": "workstation",
        "nbItems": "38",
        "title": "Workstations"
    },
    {
        "icon": "server",
        "nbItems": "2",
        "title": "Servers"
    }
] 
```

}

如果有人有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:46:00.427

你非常接近。语句中的变量`each`需要是您正在循环的完整集合。您还可以为集合中每个项目的索引和值传递自定义变量名称。根据您的代码，以下内容应该有效，但如果您发布了收藏的结构，我们将能够确保它确实有效

```
<script id="inventorySummaryTmpl" type="text/x-jquery-tmpl"> 
<tr>
    {{each(index,resp) responses}}
        {{if resp.length === 2 }}
            </tr><tr>
        {{/if}}
        <td><img src='${resp.icon}'> ${resp.title} </td>
    {{/each}}
</tr> 
```

jQuery 文档：[http ://api.jquery.com/template-tag-each/](http://api.jquery.com/template-tag-each/)

**更新**

现在我已经更新了我的解决方案，因为我看到了你所追求的。如果您想在数组中的每三个（或六个，或其他）元素之后开始一个新的`ul`（或） ，请检查当前元素的索引，而不是完整响应数组的长度。`tr``response`

```
<script id="inventorySummaryTmpl" type="text/x-jquery-tmpl"> 
  <ul>
    {{each(i,el) response}}
      {{if (i > 0 && i % 3 === 0) }}
        </ul><ul>
      {{/if}}
      <li class="inventoryWrap">
        <img src='blueprint/images/wrap/icons/${icon}.png' class="inventoryPic"> 
        <span class="inventoryCount">${el.nbItems}</span> 
        <span class="inventoryText">${el.title}</span>
      </li>
    {{/each}}
  </ul>
</script> 
```

**演示**： http: [//jsfiddle.net/jackwanders/ZzddF/​​1 /](http://jsfiddle.net/jackwanders/ZzddF/1/)

# c++ - 从对象指针调用重载运算符（）

> ID：11221540
> 
> 赞同：41
> 
> 时间：2012-06-27T07:43:13.213
> 
> 标签：c++

考虑以下：

```
class MyClass {
public:
   int operator ()(int a, int b);
}; 
```

当有：

```
MyClass* m = new MyClass(); 
```

我想访问该`operator()`方法，所以我可以：

```
(*m)(1,2); 
```

但我可以这样做吗？

```
m->(1,2); 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-27T07:45:29.053

不是用那种语法，但你可以做

```
 m->operator()(1,2); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-20T18:20:55.713

如果您不会更改`m`（它指向的内容），您可以`(*m)`通过引用替换：

```
MyClass *m = new MyClass();
MyClass &r = *m;
r(1, 2); 
```

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/46328727/3341238)。

# android - java.net.SocketException：将文件上传到restful wcf（Web服务）时管道损坏？

> ID：11221543
> 
> 赞同：1
> 
> 时间：2012-06-27T07:43:27.147
> 
> 标签：android, wcf, rest, broken-pipe

嗨，我遇到了吹笛者错误日志是：

```
06-27 12:45:49.144: E/Debug(2526): error: Broken pipe
06-27 12:45:49.144: E/Debug(2526): java.net.SocketException: Broken pipe
06-27 12:45:49.144: E/Debug(2526):  at org.apache.harmony.luni.platform.OSNetworkSystem.write(Native Method)
06-27 12:45:49.144: E/Debug(2526):  at dalvik.system.BlockGuard$WrappedNetworkSystem.write(BlockGuard.java:284)
06-27 12:45:49.144: E/Debug(2526):  at org.apache.harmony.luni.net.PlainSocketImpl.write(PlainSocketImpl.java:472)
06-27 12:45:49.144: E/Debug(2526):  at org.apache.harmony.luni.net.SocketOutputStream.write(SocketOutputStream.java:57)
06-27 12:45:49.144: E/Debug(2526):  at org.apache.harmony.luni.internal.net.www.protocol.http.FixedLengthOutputStream.write(FixedLengthOutputStream.java:40)
06-27 12:45:49.144: E/Debug(2526):  at java.io.DataOutputStream.write(DataOutputStream.java:99)
06-27 12:45:49.144: E/Debug(2526):  at org.awarebase.tina.mobile.ui.ObjectDescriptionActivity$CheckInAsync.doInBackground(ObjectDescriptionActivity.java:903)
06-27 12:45:49.144: E/Debug(2526):  at org.awarebase.tina.mobile.ui.ObjectDescriptionActivity$CheckInAsync.doInBackground(ObjectDescriptionActivity.java:1)
06-27 12:45:49.144: E/Debug(2526):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-27 12:45:49.144: E/Debug(2526):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
06-27 12:45:49.144: E/Debug(2526):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
06-27 12:45:49.144: E/Debug(2526):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
06-27 12:45:49.144: E/Debug(2526):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
06-27 12:45:49.144: E/Debug(2526):  at java.lang.Thread.run(Thread.java:1019) 
```

Android Async 上传文件的任务是：

```
class CheckInAsync extends AsyncTask<String, String, String> {

            HttpEntity responseEntity = null;

            OutputStream mystream;

            String resposeCheckin = new String();
            String existingFileName = "/mnt/sdcard/abtemp/" + objrid
                    + fileExtension;
            private Activity context;
            private FragmentManager fmgr;

            public void updateActivity(Activity c, FragmentManager fm) {
                context = c;
                fmgr = fm;
            }

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                File direct = new File(Environment.getExternalStorageDirectory()
                        + "/abtemp");

                if (!direct.exists()) {
                    if (direct.mkdir())
                        ; // directory is created;
                    existingFileName = "/mnt/sdcard/abtemp/" + objrid
                            + fileExtension;// add "." to make file or folder hidden
                }
                if (isOnline(ObjectDescriptionActivity.this).equals("false")) {
                    Toast.makeText(getBaseContext(), "no Internet Connection",
                            Toast.LENGTH_LONG).show();
                } else {
                    ProgressDialogFragment po = new ProgressDialogFragment(
                            CheckInAsync.this);

                    FragmentTransaction fragmentTransaction = fmgr
                            .beginTransaction();
                    po.show(fragmentTransaction, "DIALOG_F3");

                }
            }

            @Override
            protected String doInBackground(String... param) {
                if ((isOnline(ObjectDescriptionActivity.this).equals("true"))) {
                    try {

                        URL url = null;
                        HttpURLConnection conn = null;
                        DataOutputStream dos = null;
                        DataInputStream inStream = null;

                        StringBuffer sb;

                        int bytesRead, bytesAvailable;

                        int maxBufferSize = Integer.MAX_VALUE;
                        try {

                            url = new URL(
                                    getResources().getString(R.string.ServiceBaseUrl)+"ServiceMobile.svc/Service/uploadRequestMobile?"+
                                            "userName="                                     
                                            + param[0]
                                            + "&clientname="
                                            + param[2]
                                            + "&password="
                                            + param[1]
                                            + "&filename="
                                            + param[4]
                                            + "&fileExtension="
                                            + param[5]
                                            + "&objrid=" + param[3]);
                            // 
                        } catch (MalformedURLException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        System.gc();

                        try {
                            // ------------------ CLIENT REQUEST
                            File file = new File(existingFileName);

                            if (file.isFile()) {
                                FileInputStream fileInputStream = new FileInputStream(
                                        file);

                                //
                                // Open a HTTP connection to the URL
                                conn = (HttpURLConnection) url.openConnection();
                                // Allow Inputs
                                conn.setDoInput(true);
                                // Allow Outputs
                                conn.setDoOutput(true);
                                // Don't use a cached copy.
                                conn.setUseCaches(false);
                                // Use a post method.
                                conn.setRequestMethod("POST");                      

                                maxBufferSize = 6 * 1024;

            conn.setFixedLengthStreamingMode((int) file.length());// works fine till 24 mb file
                                conn.setRequestProperty("Connection", "Keep-Alive");
                                conn.setRequestProperty("Content-Type",
                                        "application/stream");

                                dos = new DataOutputStream(conn.getOutputStream());

                                bytesAvailable = fileInputStream.available();
                                int bufferSize = Math.min(bytesAvailable,
                                        maxBufferSize);
                                bytesAvailable = fileInputStream.available();

                                bufferSize = Math
                                        .min(bytesAvailable, maxBufferSize);

                                byte[] buffer = new byte[bufferSize];

                                bytesAvailable = fileInputStream.available();
                                int downloadedSize = 0;
                                while ((bufferSize = fileInputStream.read(buffer)) > 0) {

                                    dos.write(buffer, 0, bufferSize);

                                    downloadedSize += bufferSize;
                                    publishProgress(""
                                            + (int) ((downloadedSize * 100) / bytesAvailable));
                                e

                                }
                                String lineEnd = "";

                                dos.writeBytes(lineEnd);

                                fileInputStream.close();
                                dos.flush();
                                dos.close();
                            } else {
                                return "file not found";
                            }
                        } catch (MalformedURLException ex) {
                            Log.e("Debug", "error: " + ex.getMessage(), ex);
                        } catch (IOException ioe) {
                            Log.e("Debug", "error: " + ioe.getMessage(), ioe);
                        }
                        // ------------------ read the SERVER RESPONSE
                        try {
                            inStream = new DataInputStream(conn.getInputStream());
                            String str = new String();
                            sb = new StringBuffer(str);
                            while ((str = inStream.readLine()) != null) {
                                sb.append(str);

                            }
                            inStream.close();
                 Log.e("Debug","Server Response "+sb.toString());
                            resposeCheckin = new String(sb);

                        }

                        catch (IOException e) {

                            resposeCheckin = "UnSuccess";
                             e.printStackTrace();
                        }

                        String str_raj = resposeCheckin.substring(1,
                                resposeCheckin.length() - 1);

                        Log.e("hhguyuyjjhyjhjyhjhjhjh", str_raj);

                        return str_raj;

                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                        return "Sorry,Illegal state error";
                    } 
                }
                return null;

            }

            protected void onProgressUpdate(String... progress) {
                ProgressDialogFragment d1 = (ProgressDialogFragment) fmgr
                        .findFragmentByTag("DIALOG_F3");
                d1.dialog
                        .setMessage("Uploading File....  "
                                + CommenUtil.Round((Float.parseFloat(progress[0])
                                        * filesize / (100 * 1024 * 1024)), 2)
                                + "MB of "
                                + CommenUtil.Round(
                                        ((new Integer((int) filesize).floatValue()) / (1024 * 1024)),
                                        2) + " MB");
                d1.dialog.setProgress(Integer.parseInt(progress[0]));

            }

            @Override
            protected void onPostExecute(String responsestr) {
                ProgressDialogFragment d1 = (ProgressDialogFragment) fmgr
                        .findFragmentByTag("DIALOG_F3");
                d1.dismiss();
                Log.e("in post execute", responsestr);
                int objrid = -1;
                if (responsestr.equals("exception") == false) {
                    try {
                        objrid = Integer.parseInt(responsestr);

                        Log.e("my integer", "my integer value " + objrid);
                    } catch (NumberFormatException e) {
                        e.printStackTrace();
                        if (responsestr == null
                                || responsestr.equalsIgnoreCase("UnSuccess")
                                || responsestr.equalsIgnoreCase("null")
                                || responsestr.equalsIgnoreCase("0")
                                || responsestr.equalsIgnoreCase("Exception")
                                || responsestr.equalsIgnoreCase("file not found")) {
                            Toast.makeText(ObjectDescriptionActivity.this,
                                    "Checkin UnSuccessful ::  " + responsestr,
                                    Toast.LENGTH_SHORT).show();
                        } else {
                            Toast.makeText(
                                    getBaseContext(),
                                    "Exception in background task message is"
                                            + responsestr, Toast.LENGTH_LONG)
                                    .show();
                        }
                    }
                    if (objrid >= 0) {
                        if (isOnline(ObjectDescriptionActivity.this).equals("true")) {

                            File file = new File(existingFileName);
                            file.delete();
                            file.list();
                            isLock = "false";
                            File file_data = new File(
                                    "/data/data/org.awarebase.tina.mobile/databases/Myobject.db");
                            file_data.delete();
                            Toast.makeText(
                                    ObjectDescriptionActivity.this,
                                    "Checkin Successful :"
                                            + "New object Rid is::  " + responsestr,
                                    Toast.LENGTH_SHORT).show();
                            Log.e("system", "is before sleep mode");

                            Log.e("system", "is sleep mode");
                            Intent myObjects_Intent = new Intent(ObjectDescriptionActivity.this,MyObjectsActivity.class);
                            startActivity(myObjects_Intent);

                        }

                    }
                } else {
                    Toast.makeText(ObjectDescriptionActivity.this, "exception",
                            Toast.LENGTH_SHORT).show();
                }
            }
        } 
```

**.net wcf 代码上传：**

```
public string uploadRequestMobile(string userName, string clientname, string password, string filename, string fileExtension, long objrid, Stream data)
       {
           MobileClientEntity clientEntity = new MobileClientEntity();
           clientEntity.ClientName = clientname;
           clientEntity.UserName = userName;
           clientEntity.Password = password;

           LoadMetaDataService objLoadMetaData = new LoadMetaDataService();
           Membership.ApplicationName = clientEntity.ClientName;
           MessageType status = MessageType.None;
           string GuId;
           if (Membership.ValidateUser(clientEntity.UserName, clientEntity.Password))
           {
               UserProfileService obj_userprofile_Service = new UserProfileService();
               GuId = obj_userprofile_Service.GetGuid(clientEntity.ClientName, clientEntity.UserName, out status);
               if (status == MessageType.Error && GuId == null)
               {
                   return null;
               }
               UserProfileEntity objUser = obj_userprofile_Service.GetUserInfo(GuId, clientEntity.ClientName, out status);
               if (status == MessageType.Error)
               {
                   return null;
               }

               MessageType status2 = MessageType.None;

               try
               {
                   byte[] bytedata;
                   byte[] buffer = new byte[6 * 1024];
                   using (MemoryStream ms = new MemoryStream())
                   {
                       int read;
                       while ((read = data.Read(buffer, 0, buffer.Length)) > 0)
                       {
                           ms.Write(buffer, 0, read);
                       }
                       bytedata= ms.ToArray();
                   }

                   bool IsAdmin = false;  

                   ObjectEntity objDocumentObjectEntity = objLoadMetaData.LoadMetaDataMobile(clientEntity, objrid);
                   DocumentManagementEntity objDocumentMgmtEntity = new DocumentManagementEntity();
                   if (objUser.ObjectRid == objDocumentObjectEntity.OwnerRid)
                   {
                       objDocumentMgmtEntity.IsOwner = true;
                   }
                   if (bytedata != null)
                   {
                       objDocumentMgmtEntity.ObjRid = objrid;
                       objDocumentMgmtEntity.ObjThd = objrid;
                       objDocumentMgmtEntity.ClassIcon = null;
                       objDocumentMgmtEntity.CheckinFileName = filename;
                       objDocumentMgmtEntity.FileData = bytedata;
                       objDocumentMgmtEntity.FileExtension = fileExtension; // will be get from android client as new file name and extention
                       objDocumentMgmtEntity.FileName = filename;
                       objDocumentMgmtEntity.FunctionName = "SaveMetaData";
                       objDocumentMgmtEntity.FileSize = bytedata.Length;
                       objDocumentMgmtEntity.ObjEntity = new ObjectEntity();
                       objDocumentMgmtEntity.ObjEntity.Description1 = objDocumentObjectEntity.Description1;
                       objDocumentMgmtEntity.ObjEntity.Description2 = objDocumentObjectEntity.Description2;
                       objDocumentMgmtEntity.ObjEntity.FileExt = fileExtension;
                       objDocumentMgmtEntity.ObjEntity.FileName = filename;
                       objDocumentMgmtEntity.ObjEntity.ObjectRid = objrid;
                       objDocumentMgmtEntity.ObjEntity.ObjectThread = objrid;
                       objDocumentMgmtEntity.ObjEntity.OwnerRid = objDocumentObjectEntity.OwnerRid;
                       objDocumentMgmtEntity.ObjRid = objrid;
                       objDocumentMgmtEntity.ObjThd = objrid;
                       objDocumentMgmtEntity.UsrRid = objUser.ObjectRid;

                       long newobjrid = new DocumentManagementService().ProcessCheckinRequest(objDocumentMgmtEntity, clientEntity.ClientName, out status2);
                       if (status2 == MessageType.Success)
                           return newobjrid.ToString();

                   }
               }

               catch (Exception ex)
               {

                   return ex.Message;
               }
           }

           return "UnSuccess";

       } 
```

我已经尝试了一切，请指导。有时相同的代码工作正常，有时它会抛出损坏的管道错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:32:44.097

问题出在网址中。我在 url 中发送一些文件名。但只要文件名包含空格，它就会变成错误的 url，在这种情况下它会抛出损坏的管道错误。

# python - django 会存储多长时间的临时文件？

> ID：11221544
> 
> 赞同：2
> 
> 时间：2012-06-27T07:43:40.253
> 
> 标签：python, django, file-upload

> “如果上传的文件太大，Django 会将上传的文件写入存储在系统临时目录中的临时文件中。在类 Unix 平台上，这意味着您可以期望 Django 生成一个名为 /tmp/tmpzfp6I6 之类的文件。上传。如果上传足够大，你可以看到这个文件随着 Django 将数据流式传输到磁盘而增长。

这取自 Django 的文档。

我的问题是这个文件会在内存中保留多久？并且无论同一个文件是否被上传两次，每次上传都会有一个唯一的名称吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:52:23.293

> 该文件将在内存中保留多长时间？

您是在谈论文件系统上的临时文件吗？在这种情况下，在 Unix 平台上，通常直到您重新启动。如果您谈论的是在 RAM 中上传的文件，它可能至少会保留在那里，直到请求/响应周期完成。但这对您来说并不重要，无论如何您都必须在响应处理代码中处理上传的文件。否则，您将不再有任何参考。

> 无论同一个文件是否被上传两次，每次上传都会有一个唯一的名称吗？

是的。

# blackberry - 黑莓替换字段向右和向下移动

> ID：11221548
> 
> 赞同：0
> 
> 时间：2012-06-27T07:43:53.883
> 
> 标签：blackberry

在`GridFieldManager`主屏幕中或在主屏幕中，当我尝试用另一个字段替换一个字段时（`LabelField`例如，特别是现有字段），另一个字段向右和底部移动 3-5 像素。在 10 次迭代循环中，这种转变非常明显。

这是什么 ？

# java - Google App Engine 部署错误 409

> ID：11221557
> 
> 赞同：6
> 
> 时间：2012-06-27T07:44:23.837
> 
> 标签：java, google-app-engine, deployment

我收到`error 409 Conflict`以下消息

> 此版本的部署尚未开始

我尝试部署到新版本，更新现有版本并尝试回滚，但在部署过程中一切正常，直到最后一步，它最终显示

> 上传 0 个文件
> 
> 此版本的部署尚未开始

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T23:14:13.053

这是 1.7.0 管理控制台中的一个已知错误。我们正在努力修复。此问题现已修复。2012 年 10 月 11 日

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:36:27.040

我认为他们正在为 1.7.0 准备生产环境（并且可能在早上准备一些与 I/O 相关的恶作剧）。我有适用于 Windows 的 1.6.5 python SDK，它阻止了我（和你一样）。1.7.0，同样的错误。抓住 1.6.6，它似乎工作正常：

[http://code.google.com/p/googleappengine/downloads/detail?name=GoogleAppEngine-1.6.6.msi&can=1&q=python+1.6.6](http://code.google.com/p/googleappengine/downloads/detail?name=GoogleAppEngine-1.6.6.msi&can=1&q=python+1.6.6)

# java - Java 迭代器对 Next() 施加条件

> ID：11221559
> 
> 赞同：1
> 
> 时间：2012-06-27T07:44:27.723
> 
> 标签：java, iterator

我对Java中的迭代器有点困惑。如何使 next() 仅返回某些值？比如说我有一个由 10 个元素组成的布尔数组，我只想返回那些为真的。我是否在 next() 方法中放置了一个条件来检查该条件并在满足时返回？还是在我实际使用迭代器时检查条件并继续调用 next() 直到我得到合适的值，然后使用该值？

同样，如果我有一个整数数组，并且我想创建数组的字符串表示形式，其中每个元素用空格分隔，但我只想使用负元素。如果我想使用迭代器执行此操作，我是在 next() 方法中检查负元素并仅返回下一个负值，还是检查何时进行字符串表示，并继续调用 next( ) 直到我得到一个负值，然后将该值添加到字符串中？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T07:49:26.817

[普通的 Java 迭代器](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)只是迭代集合的每个元素。因此，您必须在每次迭代时自己检查值。

您编写的内容可以使用[Apache Commons Collections](http://commons.apache.org/collections/)[`FilterIterator`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/iterators/FilterIterator.html)中的类来完成。

来自 JavaDoc：

> 这个迭代器装饰了底层迭代器，只允许通过那些匹配指定的元素[`Predicate`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/iterators/FilterIterator.html)。

这是一个帮助您入门的示例：

```
// Create a predicate class, like this:
class MyAwesomePredicate implements Predicate {

    @Override
    public boolean evaluate(Object object) {

        // If the condition is satisfied, return true.
        // Return false otherwise.

    }     
}

// and pass it to the FilterIterator:
Iterator<SomeClass> matchingObjects = 
    new FilterIterator(myCollection.iterator(), new MyAwesomePredicate());

// Now iterate the maching objects:
while (machingObjects.hasNext() {

    // do your stuff

} 
```

**更新：**如果您愿意，还有[`Iterators#filter(Iterator<T>, Predicate<? super T>)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterators.html#filter%28java.util.Iterator,%20com.google.common.base.Predicate%29)来自[Guava](http://code.google.com/p/guava-libraries)的。与 Apache Commons 不同，它支持泛型，并且（可以说）更高的*酷度因子*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:47:22.827

`Iterator`用于迭代集合，并将逐个返回每个元素。没有其他方法可以使用`Iterator`，因此请检查迭代或创建自己的特殊迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:48:52.103

迭代器的概念非常简单：它在元素集合上隐藏（封装）遍历算法的实现。您调用 next - 它获取集合中的下一个元素，由您决定如何使用此值。通过使用迭代器，您不依赖集合的内部实现。当然，您可以创建自己的迭代器（它应该实现 java.util.Iterator 接口），但我相信您的要求不是必需的 :) 希望这会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T07:50:00.167

从技术上讲，两者都是可行的，所以这实际上是一个设计问题。如果您确定每次迭代该 Iterable 结构时都需要该条件，而不是使用 Iterator 子类的 next() 方法中的条件，否则，您最好在 Iterator 之外签入您的应用程序。

此外，next() 方法中的测试可能会提高性能，因为您将在应用程序代码中迭代较少数量的元素。因此，如果性能是一个问题，也许这是一个好主意。

# debian - 是否有关于 debian 或日志的服务器崩溃报告？

> ID：11221561
> 
> 赞同：0
> 
> 时间：2012-06-27T07:44:36.040
> 
> 标签：debian, crash-reports

我的服务器有时会无缘无故地崩溃（Debian 挤压）。

是否有任何全局报告或日志可以让我得到提示，为什么？

我只知道`/var/log/syslog` 但没有任何提示

或者有没有工具，下次应该安装以获得更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:05:06.983

全局错误记录在 /var/log/messages 中。可以使用 dmesg 访问它。

# jquery - 使用 jscrollpane 应用 scrollTo 或 scrollToX 的问题 - 不会滚动到 x 坐标

> ID：11221563
> 
> 赞同：0
> 
> 时间：2012-06-27T07:44:40.863
> 
> 标签：jquery, scroll, scrollto, jquery-jscrollpane

我有一个水平滚动站点，我希望导航中的一些链接来控制 x 坐标，因此相关的工作将滚动到设定的位置。

我只使用锚点使其工作，但问题是锚点位于顶部（或在本例中为侧面），并且由于设计原因，图像位于导航下方，您无法正确看到它。我有两个想要控制的锚 #1 和 #2，所以当点击它们时，它们会转到 x 轴上的 580px。

我正在调整 scrollTo 插件来实现这一点，但是当我点击按钮时，滚动没有到达正确的位置，我不明白为什么。

我用于 scrollTo 的 javascript 如下

```
 <script type="text/javascript" src="includes/jquery.scrollTo-1.4.2-min.js"></script>
    <script type="text/javascript">
    $(function() {
$('#1', '#2').scrollTo( {top:'0px', left:'580px'}, 800 );
    });
    </script> 
```

我还阅读了我正在使用的 jscrollpane，他们有一个 scrollToX 并尝试了这个，但结果相似，滚动没有到达我想要的位置。

```
 <script type="text/javascript">
     $(function() {
var element = $('#1', '#2').jScrollPane({top:'0px', left:'580px'});
 var api = scrollToX(580, animate).bind('click', function () { ('.jsp');
        });  }); 
```

我正在使用的 jscrollpane 的 javascript 可以在这里找到

```
 <!-- the mousewheel plugin -->
    <script type="text/javascript" src="includes/jscrollpane/jquery.mousewheel.js"></script>
    <!-- the jScrollPane script -->
    <script type="text/javascript" src="includes/jscrollpane/jquery.jscrollpane.min.js"></script>
    <!-- the jScrollPane script to resize window and scroll bar -->
    <script type="text/javascript">
        $('.scroll-pane').each(function(){
$this = $(this);
$this.jScrollPane({
    showArrows: false,
    autoReinitialise: true,
    animateScroll: true,
    horizontalDragMinWidth: 100,
    horizontalDragMaxWidth: 100,
    hijackInternalLinks: true
});
var api = $this.data('jsp');
var throttleTimeout;
$(window).bind( 'resize', function() {
    if ($.browser.msie) {
        if (!throttleTimeout) {
            throttleTimeout = setTimeout(
                function(){
                    api.reinitialise();
                    throttleTimeout = null;
                }, 
                50
            );
        }
    } else {
        api.reinitialise();
    }
     });
   });

     </script> 
```

我的 html 片段在这里

```
 <div id="eventsNav" style="visibility:visible;">
    <ul class="accordion">
    <li><a href="#1">name 1</a></li>
    <li><a href="#1">name 2</a></li>
    <li><a href="#">name 3</a></li>
   <li><a href="page.html#anchor">name 4</a></li>
   <li><a href="#">name 4</li>
    </ul> 

     <div id="content-holder" class="scroll-pane horizontal-only">
      <div id="events">
       <div class="first-content-holder"><a name="anchor" id="first"><img src="images/image.jpg /></a></div><div id="button">
       <div id="expandText" style="display: none;"><div class="expandDiv"><p><span class="redbold">name 1</span><br />
         description
     </p></div></div></div><div class="content-holder"><a name="1" id="1"></a><img src="images/image.jpg"" /></div><div class="text-expander"><a href="#" title="" class="expand"><p><span class="redbold">name 2</span><br />
      description
  </p></a></div><div class="content-holder"><a name="2" id="2"></a><img src="images/image.jpg" /></div><div class="text-expander"><a href="#" title="" class="expand"><p><span class="redbold">name2</span><br />
       description
     </p></a></div>
    </div><!--end events-->
    </div><!--end content holder--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:13:31.500

我就是这样做的：

```
var location = $(scrollToElement).offset().top;
$('.jspPane').animate({'top': -top}); 
```

# iphone - 如何复制 UITableView？

> ID：11221564
> 
> 赞同：0
> 
> 时间：2012-06-27T07:44:42.983
> 
> 标签：iphone, objective-c, uitableview, ios5

我有一个 UIPageControl，它允许用户在几个 UITableView 之间滑动。我在 StoryBoard 中设计了表格视图，然后将其连接到我的代码中。问题是，这些表视图不会有相同的行数。所以，我想知道如何复制我在 StoryBoard 中制作的表格视图以保留其设计。

我已经尝试过了：

```
// self.theTableView is the tableview made in StoryBoard
UITableView *myTableView = self.theTableView;

NSData *tmpArchive = [NSKeyedArchiver archivedDataWithRootObject: myTableView];
UITableView *newTableView = [NSKeyedUnarchiver unarchivedObjectWithData:tmpArchive]; 
```

问题是我有多个表视图，但都有相同的行数（我认为这实际上是内存中的同一个表视图，我不希望这样）。

简而言之，我想复制我在 Storyboard 中制作的表格视图以保持其风格。

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:06:44.653

如果您需要在控制器中添加两个表视图，您应该给它们两个不同的名称，并在委托和数据源方法中检查相同的名称，并在条件内执行您想要的任何操作。

# html - 我可以在 html 中使用未编码的 & 符号吗？

> ID：11221565
> 
> 赞同：11
> 
> 时间：2012-06-27T07:44:46.303
> 
> 标签：html, html-entities, ampersand

我正在建立一个网站，我必须使用不那么完美的主数据（我想我不是唯一一个:-)）

就我而言，我必须将 xml 过滤器呈现为 html（使用 xsl）。有时，masterdata 已经使用 html-enitites（例如`&eacute;`，法语单词），所以我必须在那里使用'disable-output-escaping='yes'）以避免双重编码。

最简单的解决方案是一起禁用输出转义，因此我永远不会冒双重编码的风险。

唯一缺少此主数据编码的字符是 & 符号。但是当我解析它们'原始'时（所以不是`&amp;`所有的浏览器似乎都可以接受它。

所以问题是：在 html 中使用未编码的 & 符号有什么后果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T07:51:09.900

**这取决于**

我在这个主题上看到的最好的研究可以在[这里找到](http://mathiasbynens.be/notes/ambiguous-ampersands)

在 HTML5 中，您应该转义所有不属于以下类别的 & 符号：

> 不明确的 & 符号是 U+0026 与字符 (&) 后跟一个或多个字符，范围为​​ U+0030 数字零 (0) 到 U+0039 数字九 (9)、U+0061 拉丁小写字母 A 到U+007A 拉丁小写字母 Z 和 U+0041 拉丁大写字母 A 到 U+005A 拉丁大写字母 Z，后跟 U+003B 分号字符 (;)，其中这些字符与命名字符引用部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T07:52:14.870

AFAIK 裸 & 符号在 HTML 中是非法的。有了这个，让我们看看后果：

*   您现在依靠浏览器的功能来检测问题并从容地恢复。请注意，为了做到这一点，浏览器必须*猜测*: `& `“显然”是一个 & 后跟一个空格，并且`&copy;`显然是版权符号。但是文本片段`edit&copy`呢？我现在使用的浏览器会破坏它。
*   如果您正在使用 XHTML，或者如果内容将被插入到 XML 文档中，那么结果将是一个硬解析器错误。

由于手动检测和解释这些情况比替换所有不属于实体的＆符号（例如使用正则表达式）更困难，因此您应该真正做后者。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T07:53:40.717

请参阅[我真的需要将“&”编码为“&”吗？](https://stackoverflow.com/questions/3493405/do-i-really-need-to-encode-as-amp)

总结一下：是的，你可以，但严格来说它是不合法的（除了在 HTML5 中它是合法的，只要它不“看起来”像一个字符实体）。

# yii - 函数 fastcgi_finish_request 花费了大部分执行时间

> ID：11221566
> 
> 赞同：4
> 
> 时间：2012-06-27T07:44:54.543
> 
> 标签：yii, php

我用 yii + php-fpm + nginx 建了一个站点。然后我试图用 xhprof 找到瓶颈。xhprof 的结果表明，在某些请求（不是全部）中，函数 fastcgi_finish_request 花费了所有执行时间的 80% 以上。这很奇怪。

[单击以查看 xhprof 的完整图形输出](http://i.stack.imgur.com/du0IR.png)

[点击查看 xhprof 的表单输出](http://i.stack.imgur.com/EWZ1Q.png)

我使用的版本是：

php：5.3.8

nginx：1.0.10

xhprof：从它的 github 源构建

为什么函数 fastcgi_finish_request 需要这么多时间？我应该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:01:04.107

从 php-fpm.org 页面：

> fastcgi_finish_request() 是一个 php 功能，可以停止响应输出。Web 服务器立即开始“缓慢而悲伤”地向客户端传输响应，同时 php 可以在查询的上下文中做很多有用的事情，例如保存会话、转换下载的视频、处理各种统计等

我自己还没用过`fastcgi_finish_request()`，但是如果时间，服务器需要发回到目前为止做出的响应输出，在PHP脚本中算作这个方法的“执行时间”；看起来很清楚，为什么这个功能“消耗”这么多时间，因为它取决于您的服务器和客户端网络连接（例如 ping）。

使用本地开发环境时执行时间会有所不同吗？

# internet-explorer - 单击进程外COM（Active Document Server）组件中的按钮会挂起IE，为什么？

> ID：11221567
> 
> 赞同：1
> 
> 时间：2012-06-27T07:44:57.723
> 
> 标签：internet-explorer, windbg, activex-documents

这是问题所在：我开发了一个活动文档服务器并在 IE 中使用它。活动文档有一个名为“工作”的按钮，单击它时，它会工作约 3 秒。在此期间，我无法以任何方式使用 IE。像切换标签或关闭标签。我的问题是：按钮在另一个进程的com对象中的一个组件中，为什么它会挂IE？如果我使用 ProcessXP 或 WinDBG 挂起 com 服务器，那么 IE 将永远不会做出反应，直到 com 服务器恢复。我在下面得到了 IE 的堆栈，两个都是 iexplore.exe。任何人告诉我 IE 正在等待什么？开发环境：Win server 2008 standard 64 bit/IE 8 32bit

**主 iexplore.exe：**

```
0:009> ~*k
0  Id: 1140.d4c Suspend: 1 Teb: 00000000`7efdb000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0011dca8 00000000`7513ab53 wow64win!NtUserPeekMessage+0xa
00000000`0011dcb0 00000000`7518cf87 wow64win!whNtUserPeekMessage+0x37
00000000`0011dd20 00000000`7511276d wow64!Wow64SystemServiceEx+0xd7
00000000`0011e5e0 00000000`7518d07e wow64cpu!TurboDispatchJumpAddressEnd+0x24
00000000`0011e6a0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0011e6f0 00000000`774d84c8 wow64!Wow64LdrpInitialize+0x429
00000000`0011ec40 00000000`774d7623 ntdll!LdrpInitializeProcess+0x17e2
00000000`0011f140 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bea0
00000000`0011f1b0 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   1  Id: 1140.10f8 Suspend: 1 Teb: 00000000`7efd8000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0283e998 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`0283e9a0 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`0283ea60 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0283eab0 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`0283f000 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`0283f070 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   2  Id: 1140.1298 Suspend: 1 Teb: 00000000`7ef9d000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0288e968 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`0288e970 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`0288ea30 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0288ea80 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`0288efd0 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`0288f040 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   3  Id: 1140.13d0 Suspend: 1 Teb: 00000000`7ef9a000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`029eec28 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`029eec30 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`029eecf0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`029eed40 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`029ef290 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`029ef300 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   4  Id: 1140.e64 Suspend: 1 Teb: 00000000`7ef97000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`02b6f0f8 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`02b6f100 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`02b6f1c0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`02b6f210 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`02b6f760 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`02b6f7d0 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   5  Id: 1140.3b0 Suspend: 1 Teb: 00000000`7ef91000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0292ee08 00000000`75112bcd wow64cpu!CpupSyscallStub+0x9
00000000`0292ee10 00000000`7518d07e wow64cpu!Thunk0ArgReloadState+0x1a
00000000`0292eed0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0292ef20 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`0292f470 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`0292f4e0 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   6  Id: 1140.1290 Suspend: 1 Teb: 00000000`7ef8b000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`02bdf088 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`02bdf090 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`02bdf150 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`02bdf1a0 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`02bdf6f0 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`02bdf760 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   7  Id: 1140.c80 Suspend: 1 Teb: 00000000`7ef79000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0474e7c8 00000000`751aa2df ntdll!NtWaitForWorkViaWorkerFactory+0xa
00000000`0474e7d0 00000000`7518cf87 wow64!whNtWaitForWorkViaWorkerFactory+0x23
00000000`0474e820 00000000`7511276d wow64!Wow64SystemServiceEx+0xd7
00000000`0474f0e0 00000000`7518d07e wow64cpu!TurboDispatchJumpAddressEnd+0x24
00000000`0474f1a0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0474f1f0 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`0474f740 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`0474f7b0 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   8  Id: 1140.17f0 Suspend: 1 Teb: 00000000`7efd5000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`036ce5e8 00000000`751aa2df ntdll!NtWaitForWorkViaWorkerFactory+0xa
00000000`036ce5f0 00000000`7518cf87 wow64!whNtWaitForWorkViaWorkerFactory+0x23
00000000`036ce640 00000000`7511276d wow64!Wow64SystemServiceEx+0xd7
00000000`036cef00 00000000`7518d07e wow64cpu!TurboDispatchJumpAddressEnd+0x24
00000000`036cefc0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`036cf010 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`036cf560 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`036cf5d0 00000000`00000000 ntdll!LdrInitializeThunk+0xe

#  9  Id: 1140.d44 Suspend: 1 Teb: 00000000`7ef94000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0337faa8 00000000`77588638 ntdll!DbgBreakPoint
00000000`0337fab0 00000000`774f39cb ntdll!DbgUiRemoteBreakin+0x38
00000000`0337fae0 00000000`00000000 ntdll!RtlUserThreadStart+0x25 
```

**包含 com 组件的子进程：**

```
0:009> ~*k

   0  Id: 10fc.76c Suspend: 1 Teb: 00000000`7efdb000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`001ae708 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`001ae710 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`001ae7d0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`001ae820 00000000`774d84c8 wow64!Wow64LdrpInitialize+0x429
00000000`001aed70 00000000`774d7623 ntdll!LdrpInitializeProcess+0x17e2
00000000`001af270 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bea0
00000000`001af2e0 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   1  Id: 10fc.d18 Suspend: 1 Teb: 00000000`7efd8000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`005befb8 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`005befc0 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`005bf080 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`005bf0d0 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`005bf620 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`005bf690 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   2  Id: 10fc.c70 Suspend: 1 Teb: 00000000`7ef9d000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`027ced18 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`027ced20 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`027cede0 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`027cee30 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`027cf380 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`027cf3f0 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   3  Id: 10fc.90c Suspend: 1 Teb: 00000000`7ef9a000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`02a2eb58 00000000`7511282c wow64cpu!CpupSyscallStub+0x9
00000000`02a2eb60 00000000`7518d07e wow64cpu!WaitForMultipleObjects32+0x32
00000000`02a2ec20 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`02a2ec70 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`02a2f1c0 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`02a2f230 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   4  Id: 10fc.12ac Suspend: 1 Teb: 00000000`7ef97000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`029eed58 00000000`75112d92 wow64cpu!CpupSyscallStub+0x9
00000000`029eed60 00000000`7518d07e wow64cpu!Thunk0Arg+0x5
00000000`029eee20 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`029eee70 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`029ef3c0 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`029ef430 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   5  Id: 10fc.b6c Suspend: 1 Teb: 00000000`7efd5000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`031de438 00000000`7513ac48 wow64win!ZwUserGetMessage+0xa
00000000`031de440 00000000`7518cf87 wow64win!whNtUserGetMessage+0x30
00000000`031de4a0 00000000`7511276d wow64!Wow64SystemServiceEx+0xd7
00000000`031ded60 00000000`7518d07e wow64cpu!TurboDispatchJumpAddressEnd+0x24
00000000`031dee20 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`031dee70 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`031df3c0 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`031df430 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   6  Id: 10fc.15fc Suspend: 1 Teb: 00000000`7ef8b000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0295e938 00000000`75112bcd wow64cpu!CpupSyscallStub+0x9
00000000`0295e940 00000000`7518d07e wow64cpu!Thunk0ArgReloadState+0x1a
00000000`0295ea00 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0295ea50 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`0295efa0 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`0295f010 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   7  Id: 10fc.16f4 Suspend: 1 Teb: 00000000`7ef7f000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0390edb8 00000000`75112bcd wow64cpu!CpupSyscallStub+0x9
00000000`0390edc0 00000000`7518d07e wow64cpu!Thunk0ArgReloadState+0x1a
00000000`0390ee80 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0390eed0 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`0390f420 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`0390f490 00000000`00000000 ntdll!LdrInitializeThunk+0xe

   8  Id: 10fc.fb0 Suspend: 1 Teb: 00000000`7ef94000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`0366e138 00000000`751aa2df ntdll!NtWaitForWorkViaWorkerFactory+0xa
00000000`0366e140 00000000`7518cf87 wow64!whNtWaitForWorkViaWorkerFactory+0x23
00000000`0366e190 00000000`7511276d wow64!Wow64SystemServiceEx+0xd7
00000000`0366ea50 00000000`7518d07e wow64cpu!TurboDispatchJumpAddressEnd+0x24
00000000`0366eb10 00000000`7518c549 wow64!RunCpuSimulation+0xa
00000000`0366eb60 00000000`7750d177 wow64!Wow64LdrpInitialize+0x429
00000000`0366f0b0 00000000`774c308e ntdll! ?? ::FNODOBFM::`string'+0x2bfe4
00000000`0366f120 00000000`00000000 ntdll!LdrInitializeThunk+0xe

#  9  Id: 10fc.c5c Suspend: 1 Teb: 00000000`7ef91000 Unfrozen
Child-SP          RetAddr           Call Site
00000000`036cf748 00000000`77588638 ntdll!DbgBreakPoint
00000000`036cf750 00000000`774f39cb ntdll!DbgUiRemoteBreakin+0x38
00000000`036cf780 00000000`00000000 ntdll!RtlUserThreadStart+0x25 
```

欢迎任何建议！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:15:22.000

您可以通过运行来识别挂起的线程：

```
!analyze -hang 
```

或更好：

```
!locks 
```

这将需要一些时间，但是，查看您的调用堆栈，您的组件显示正在等待多个对象的线程，那么它们正在等待的事件是否正确发出信号？您应该能够检查您的代码并遵循逻辑。

你也有`NtWaitForWorkViaWorkerFactory`我不知道这是做什么的，但它也是值得一试的。

# java - 在 XML 文档中查找自身和父标记

> ID：11221568
> 
> 赞同：-1
> 
> 时间：2012-06-27T07:45:05.647
> 
> 标签：java, xml, dom, xml-parsing

我有一个给定 XML 文档中可能存在或不存在的术语（字符串）列表。我需要在属性值中查找这个字符串，如果找到，返回它自己的标签和它的父标签。我怎样才能在 Java 中做到这一点？

编辑：我遇到了多种使用 DOM Parser 或 SAX Parser 或自己编写的方法。我想知道最有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:59:12.103

您可以在 Xml 文档上运行 XPath 表达式：

```
InputSource source= new InputSource(new FileInputStream(doc)));
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
NodeList nodes = (NodeList)xpath.evaluate("//@*[. = \'" + myString + "\']", source, XPathConstants.NODESET); 
```

然后，您可以使用生成的 NodeList 来获取包含的节点对象及其父节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:54:19.677

您可以使用 XPath；例如，`//*[@* = 'something']`将匹配所有 eg`<a b="something"/>`等`<a b="c" d="something"><e f="g"/></a>`。

至于在 Java 中使用 XPath，请查看以下页面：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/package-summary.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:43:07.127

自己找到了答案。我用这个

```
SAXParserFactory spfac = SAXParserFactory.newInstance();
SAXParser sp = spfac.newSAXParser();
EMSAXParser handler = new EMSAXParser(this.terms); 
```

然后我实现了以下方法，同时使用堆栈为每个开始推入并为每个结束标记弹出。当找到文本时，搜索完成，然后如果在文本中找到该术语，则查看堆栈的上两个元素。

```
startElement(String uri, String localName, String qName, Attributes attributes);
characters(char[] buffer, int start, int length);
endElemnet(String uri, String localName, String qName); 
```

感谢大家的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:54:50.563

[用于 XML 处理的 Java API (JAXP)](http://jaxp.java.net/)

> 用于 XML 处理的 Java API (JAXP) 使应用程序能够使用独立于特定 XML 处理器实现的 API 来解析、转换、验证和查询 XML 文档。JAXP 提供了一个可插拔层，使供应商能够提供他们自己的实现，而无需在应用程序代码中引入依赖关系。

[Java XPath API](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)

> XPath 表达式比详细的文档对象模型 (DOM) 导航代码更容易编写。当您需要从 XML 文档中提取信息时，最快和最简单的方法是在您的 Java 程序中嵌入一个 XPath 表达式。Java 5 引入了 javax.xml.xpath 包，这是一个独立于 XML 对象模型的库，用于使用 XPath 查询文档。

# python - 如何在python中优化以下算法的内存和时间使用

> ID：11221573
> 
> 赞同：2
> 
> 时间：2012-06-27T07:45:56.290
> 
> 标签：python, performance, sorting, memory, networkx

我正在尝试在 Python 中完成以下逻辑操作，但遇到了内存和时间问题。因为，我对 python 很陌生，所以关于如何以及在哪里优化问题的指导将不胜感激！（我明白下面的问题有些抽象）

```
import networkx as nx 
    dic_score = {}
    G = nx.watts_strogatz_graph(10000,10,.01) # Generate 2 graphs with 10,000 nodes using Networkx
    H = nx.watts_strogatz_graph(10000,10,.01)
    for Gnodes in G.nodes()
        for Hnodes in H.nodes ()  # i.e. For all the pair of nodes in both the graphs
           score = SomeOperation on (Gnodes,Hnodes)  # Calculate a metric 
           dic_score.setdefault(Gnodes,[]).append([Hnodes, score, -1 ]) # Store the metric in the form a Key: value, where value become a list of lists, pair in a dictionary 
```

[然后根据这里提到的标准sorting_criterion](https://stackoverflow.com/questions/11219770/how-to-sort-the-outer-and-inner-sublist-of-a-nested-list-in-python "sorting_criterion")对生成的字典中的列表进行排序

我的问题/问题是：

1）有没有比使用for循环进行迭代更好的方法来解决这个问题？

2）解决上述问题的最优化（最快）方法应该是什么？我应该考虑使用字典以外的其他数据结构吗？或者可能是文件操作？

3）由于我需要对这个字典中的列表进行排序，它有 10,000 个键，每个键对应于 10,000 个值的列表，内存需求很快变得巨大，我用完了它。

3) 有没有办法将排序过程集成到字典本身的计算中，即避免单独循环排序？

任何输入将不胜感激！谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:56:26.257

1）您可以使用`itertools`模块中的功能之一。让我提一下，您可以阅读手册或致电：

```
from itertools import product
help(product) 
```

这是一个例子：

```
for item1, item2 in product(list1, list2):
    pass 
```

2）如果结果太大而无法放入内存，请尝试将它们保存在某个地方。您可以将其输出到 CSV 文件中，例如：

```
with open('result.csv') as outfile:
   writer = csv.writer(outfile, dialect='excel')
   for ...
       writer.write(...) 
```

这将释放你的记忆。

3）我认为最好在事后对结果数据进行排序（因为`sort`函数相当快）而不是使事情复杂化并即时对数据进行排序。

您可以改为使用[NumPy](http://numpy.org/)数组/矩阵运算（求和、乘积，甚至将函数映射到每个矩阵行）。这些速度如此之快，以至于有时过滤数据的成本比计算所有内容的成本更高。

如果您的应用程序仍然很慢，请尝试对其进行分析，以准确查看哪些操作很慢或执行次数过多：

```
from cProfile import Profile
p = Profile()

p.runctx('my_function(args)', {'my_function': my_function, 'args': my_data}, {})
p.print_stats() 
```

你会看到表格：

```
 2706 function calls (2004 primitive calls) in 4.504 CPU seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     2    0.006    0.003    0.953    0.477 pobject.py:75(save_objects)
  43/3    0.533    0.012    0.749    0.250 pobject.py:99(evaluate)
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T07:56:03.500

**使用返回列表的函数时，请检查返回迭代器的函数。**

这将提高内存使用率。

在您的情况下，`nx.nodes`返回完整列表。请参阅：[节点](http://networkx.lanl.gov/reference/generated/networkx.classes.function.nodes.html#networkx.classes.function.nodes)

**使用`nodes_iter`**，因为它返回一个迭代器。这应该确保您在 for 循环中的节点上迭代时没有内存中的完整节点列表。

参见：[nodes_iter](http://networkx.lanl.gov/reference/generated/networkx.classes.function.nodes_iter.html#networkx.classes.function.nodes_iter)

一些改进：

```
import networkx as nx 
    dic_score = {}
    G = nx.watts_strogatz_graph(10000,10,.01) 
    H = nx.watts_strogatz_graph(10000,10,.01)
    for Gnodes in G.nodes_iter() ----------------> changed from G.nodes()
        for Hnodes in H.nodes_iter()  -----------> changed from H.nodes()
           score = SomeOperation on (Gnodes,Hnodes) 
           dic_score.setdefault(Gnodes,[]).append([Hnodes, score, -1 ]) 
```

您也可以使用另一个习惯用法，因为现在您有两个迭代器：使用[itertools.products](https://stackoverflow.com/questions/3034014/in-python-how-to-apply-itertools-product-to-elements-of-a-list-of-lists)

```
product(A, B) returns the same as ((x,y) for x in A for y in B). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:10:37.130

其他人也提到过`itertools.product`。很好，但是在您的情况下，还有另一种可能性：内部循环的生成器表达式和`sorted`函数。（当然，代码未经测试。）

```
import networkx as nx
from operator import itemgetter 
dic_score = {}
G = nx.watts_strogatz_graph(10000,10,.01) # Generate 2 graphs with 10,000 nodes using Networkx
H = nx.watts_strogatz_graph(10000,10,.01)
for Gnodes in G.nodes():
    dic_score[Gnodes] = sorted([Hnodes, score(Gnodes, Hnodes), -1] for Hnodes in H.nodes(), key=operator.itemgetter(1)) # sort on score 
```

内部循环被生成器表达式替换。它也是动态排序的（假设您想对每个内部列表进行排序`score`）。您可以轻松地将每个内部列表写入文件，而不是存储在字典中，这将有助于记忆。

# sql-server - 2个关于使用alter schema的2个表之间的触发器和相同性的问题

> ID：11221574
> 
> 赞同：0
> 
> 时间：2012-06-27T07:46:01.453
> 
> 标签：sql-server, tsql, triggers, schema

我不确定如何描述我想要做的事情，但无论如何我都会尝试，我有 2 个表，分别称为 XYZ 和 bckXYZ。bckXYZ 是为 XYZ 创建的备份表。它们具有相同的列，但列顺序不同。当我在 XYZ 上创建触发器（带星号）时，SQL 给了我一个与列顺序相关的错误。正如我所说，他们的列是相同的，但顺序不同！

我有两个选择，要么将列名一一放入选择脚本而不是使用星号，要么将 bckXYZ 的架构更改为 XYZ。

问题1：为什么触发器需要相同的列顺序？可笑吗？

问题 2：我需要做的是让他们的模式看起来一样，那么有没有脚本可以做到这一点？

**不工作**

```
ALTER TRIGGER [dbo].[XYZ_Ins]
ON [dbo].[XYZ]
FOR  INSERT

AS
INSERT INTO dbo.bckXYZ 
SELECT    inserted.*
FROM         inserted 
```

**有用**

```
ALTER TRIGGER [dbo].[XYZ_Ins]
ON [dbo].[XYZ]
FOR  INSERT

AS
INSERT INTO dbo.bckXYZ (a,b,c,d,e)
SELECT    (a, b, c, d, e)
FROM         inserted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:59:53.200

> 问题1：为什么触发器需要相同的列顺序？这很荒谬吗？

不，这并不荒谬——在构成命令一部分的语句中不需要列名（列*可以*被计算和未命名）。它所要做的（在这种情况下）是列顺序。`select``INSERT ... SELECT`

> 问题 2：我需要做的是让他们的模式看起来一样，那么有没有脚本可以做到这一点？

没有用于重新排列表中列的 SQL 命令。如果您想更改表中列的顺序 - 您不能。如果您使用例如SSMS，它在幕后所做的是创建一个具有调整布局的*新*表，复制所有数据，删除旧表并重命名新表。

* * *

尽管如此，*即使*两个表具有相同的列顺序，我仍然会在`INSERT ... SELECT`语句中写出明确的列名。我唯一满意的地方`select *`是 a) 在`EXISTS()`测试中，和 b) 在一次性/临时查询中。

# java - java.lang.RuntimeException：无法启动活动 ComponentInfo java.lang.NullPointerException

> ID：11221576
> 
> 赞同：-4
> 
> 时间：2012-06-27T07:46:05.590
> 
> 标签：java, android

我创建了一个应用程序来使用 SAXParser 解析 XML 文件，代码如下。

以下是我的主要活动的代码。

```
public class XMLAppActivity extends Activity{
 ArrayList<Question> questionList = new ArrayList<Question>();          
 TextView tvXmlReader;
 InputSource xmlSource;
 InputStream xmlIs;
 String xmlFile;

  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      tvXmlReader=(TextView)findViewById(R.id.my_xml);

      try 
        {
          xmlIs= getAssets().open("surveyquestions.xml");
          xmlFile = convertStreamToString(xmlIs);
        } 
        catch (IOException e1)
        {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 

     xmlSource=  new InputSource(new StringReader(xmlFile));
      tvXmlReader.setText(parseXML().toString());
  }

 private String parseXML() {

        try {

            /** Handling XML */
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            QuestionXMLHandler myXMLHandler = new QuestionXMLHandler();
            xr.setContentHandler(myXMLHandler);

            xr.parse(xmlSource);

            questionList= myXMLHandler.getQuestionList();
            return "Success";

        }
        catch (Exception e) {
          return "Failure due to " + e.toString();
        }
   }

 public  String convertStreamToString(InputStream is)
            throws IOException {
            Writer writer = new StringWriter();

            char[] buffer = new char[2048];
            try {
                Reader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
                int n;
                while ((n = reader.read(buffer)) != -1) {
                    writer.write(buffer, 0, n);
                }
            } finally {
                is.close();
            }
            String text = writer.toString();
            return text;
    }
} 
```

这是我的 XMLhandler 的代码。

```
public class QuestionXMLHandler extends DefaultHandler {

private ArrayList<Question> questionL= new ArrayList<Question>();
Question cQuestion;
Boolean cElement = false;
String cValue = "";

public ArrayList<Question> getQuestionList() {
    return questionL;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    cElement = true;
    cValue = "";

    // if current element is Question , create new question
    // clear tmpValue on start of element

    if (qName.equalsIgnoreCase("Question")) {
        cQuestion = new Question();
        cQuestion.setQuestionId(attributes.getValue("id"));
        cQuestion.setQuestionName(attributes.getValue("name"));
        cQuestion.setQuestionType(attributes.getValue("type"));
        cQuestion.setQuestionIsRequired(Boolean.parseBoolean(attributes.getValue("isRequired")));
    }

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
      if (qName.equalsIgnoreCase("Question")) {
          questionL.add(cQuestion);
        }
        if (qName.equalsIgnoreCase("QuestionText")) {
            cQuestion.setQuestionText(cValue);
        }

        if(qName.equalsIgnoreCase("Answer")){
            cQuestion.getAnswers().add(cValue);
        }

}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub
    cValue = new String(ch,start,length);
}
} 
```

这是我的问题课。

```
public class Question 
{
private String qId;
private String qName;
private String qType;
private String qText;
private Boolean isRequired;
private String qSurveyId;
private List<String> answers;

public Question()
{
    qId="";
    qName="";
    qType="";
    qText="";
    isRequired=false;
    qSurveyId="";

}
 //getters and setter methods
} 
```

但我收到以下错误：

```
06-27 14:44:36.148: W/System.err(591): java.lang.NullPointerException
06-27 14:44:36.187: W/System.err(591):  at com.optimus.mobile.xml.QuestionXMLHandler.endElement(QuestionXMLHandler.java:52)
06-27 14:44:36.187: W/System.err(591):  at org.apache.harmony.xml.ExpatParser.endElement(ExpatParser.java:160)
06-27 14:44:36.187: W/System.err(591):  at org.apache.harmony.xml.ExpatParser.append(Native Method)
06-27 14:44:36.187: W/System.err(591):  at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:505)
06-27 14:44:36.197: W/System.err(591):  at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:492)
06-27 14:44:36.197: W/System.err(591):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:308)
06-27 14:44:36.197: W/System.err(591):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:264)
06-27 14:44:36.197: W/System.err(591):  at com.optimus.mobile.xml.XMLAppActivity.parseXML(XMLAppActivity.java:68)
06-27 14:44:36.197: W/System.err(591):  at com.optimus.mobile.xml.XMLAppActivity.onCreate(XMLAppActivity.java:52)
06-27 14:44:36.197: W/System.err(591):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-27 14:44:36.197: W/System.err(591):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-27 14:44:36.197: W/System.err(591):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-27 14:44:36.197: W/System.err(591):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-27 14:44:36.197: W/System.err(591):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-27 14:44:36.197: W/System.err(591):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-27 14:44:36.207: W/System.err(591):  at android.os.Looper.loop(Looper.java:123)
06-27 14:44:36.207: W/System.err(591):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-27 14:44:36.207: W/System.err(591):  at java.lang.reflect.Method.invokeNative(Native Method)
06-27 14:44:36.207: W/System.err(591):  at java.lang.reflect.Method.invoke(Method.java:521)
06-27 14:44:36.207: W/System.err(591):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-27 14:44:36.207: W/System.err(591):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-27 14:44:36.207: W/System.err(591):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:51:55.187

试试这个

```
xmlIs= this.getResources().getAssets().open("surveyquestions.xml"); 
```

代替

```
xmlIs= getAssets().open("surveyquestions.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:46:28.593

> 我发现了我的错误！它在我的 XML 处理程序类的 End Element 方法中。基本上是下面一行中的一些问题。if(qName.equalsIgnoreCase("Answer")) { cQuestion.getAnswers().add(cValue); }

为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:58:59.547

我认为“ `questionL`”未在您的代码中初始化.........

在下面的代码中使用.......

```
 @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
          if (qName.equalsIgnoreCase("Question")) {
              questionL.add(cQuestion);
            }
            if (qName.equalsIgnoreCase("QuestionText")) {
                cQuestion.setQuestionText(cValue);
            }

            if(qName.equalsIgnoreCase("Answer")){
                cQuestion.getAnswers().add(cValue);
            }

    } 
```

# facebook - 带有照片/视频的 Facebook 帖子

> ID：11221580
> 
> 赞同：0
> 
> 时间：2012-06-27T07:46:19.177
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk

我有一个具有 Facebook 功能的网站（发送个人消息、发布到墙上）。我同时使用 PHP 和 JavaScript Facebook SDK。对于发布到用户墙/FanPages，我使用以下 JavaScript SDK`feed`对话框：

```
function generalPost(producerID, producerName, fanPageID)
{ 
   var obj =
   {
      method: 'feed',
      link: '<?php echo SEAT_NEAR_ME; ?>?producerID='+ producerID,
      type: 'video',
      picture: 'https://<?php echo DOMAIN; ?>/DATA/producersPic/<?php echo $_SESSION["IMG"];?>',
      from: fanPageID,
      to: fanPageID, //fan page ID
      show_error: true,
      name: producerName,
      caption:'    ',
      description: '                     '
   };

      FB.ui(obj, function(response){
               if (response && response.post_id) 
               {
                   //post success
               } 
               else 
               {
                   //alert('Post was not published.');
               }
           }); 
} 
```

这会产生以下对话框：（我已经模糊了个人信息）

![提要对话框](../Images/57a914851bb6881e37ef827433922d5f.png)

我想为我的对话框添加“照片/视频”上传功能，就像（或类似于）facebook 上的一样：

![用视频发帖](../Images/b8951ccc233cd5e63b773d0211436f40.png)

我已经用谷歌搜索了它并检查了 Facebook 文档，只发现了这个：

[照片批量上传](https://developers.facebook.com/blog/post/493/)

我有两个问题：

1.  这是我需要的还是有更好的方法来编写照片/视频对话框？
2.  从我发现的[Facebook 文档](https://developers.facebook.com/blog/post/493/)`$my_url = "YOUR_POST_LOGIN_URL"`中，这是什么意思： 什么是`POST_LOGIN_URL`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:50:32.120

如果您想发布照片/视频，则必须使用 cURL 或其他方法将实际文件发布到 Facebook。这篇[博](https://developers.facebook.com/blog/post/498/)文详细介绍了上传照片的过程。您将无法使用 JavaScript Feed 对话框上传照片/视频。

这`POST_LOGIN_URL`是您希望用户登录后去的地方。

# c# - 使用 WSFederationHttpBinding 的性能非常差

> ID：11221583
> 
> 赞同：2
> 
> 时间：2012-06-27T07:46:31.667
> 
> 标签：c#, wcf, wif, ws-federation

我使用 WSFederationHttpBinding 的性能很差 - iis 每秒只处理 250 个请求。

捆绑：

```
public class CustomFactoryActive : ServiceHostFactory
    {
        protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
        {
            ServiceHost host = new ServiceHost(serviceType, baseAddresses);
            CommonConf.ConfigureServiceHost(host);

            string issuerAddress = ConfigManager.ActiveSTS;
            string issuerMexAddress = issuerAddress + "/mex";

            WSFederationHttpBinding wsFedBinding = new WSFederationHttpBinding();
            wsFedBinding.Security.Mode = WSFederationHttpSecurityMode.Message;
            wsFedBinding.ReliableSession.Enabled = false;

            wsFedBinding.MaxReceivedMessageSize = wsFedBinding.MaxBufferPoolSize = Constants.MaxFileSize;

            XmlDictionaryReaderQuotas quotas = wsFedBinding.ReaderQuotas;
            quotas.MaxArrayLength = quotas.MaxBytesPerRead = quotas.MaxStringContentLength =
                quotas.MaxNameTableCharCount = quotas.MaxDepth = (int)Constants.MaxFileSize;

            var messageSecurity = wsFedBinding.Security.Message;

            messageSecurity.IssuedTokenType = "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1";
            messageSecurity.IssuedKeyType = SecurityKeyType.SymmetricKey;
            messageSecurity.EstablishSecurityContext = false;
            messageSecurity.NegotiateServiceCredential = false;

            messageSecurity.IssuerAddress = new EndpointAddress(new Uri(issuerAddress));
            messageSecurity.IssuerMetadataAddress = new EndpointAddress(new Uri(issuerMexAddress));

            WS2007HttpBinding ws2007HttpBinding = new WS2007HttpBinding(SecurityMode.TransportWithMessageCredential);
            var wsHttpSecurity = ws2007HttpBinding.Security;
            wsHttpSecurity.Message.ClientCredentialType = MessageCredentialType.UserName;//авторизация по логину и паролю
            wsHttpSecurity.Message.NegotiateServiceCredential = true;
            wsHttpSecurity.Message.AlgorithmSuite = SecurityAlgorithmSuite.Default;

            messageSecurity.IssuerBinding = ws2007HttpBinding;

            ContractDescription contractDescription = ContractDescription.GetContract(typeof(ISignService));

            EndpointAddress endpointAddress = new EndpointAddress(baseAddresses[0]);
            ServiceEndpoint endpoint = new ServiceEndpoint(contractDescription, wsFedBinding, endpointAddress);
            host.Description.Endpoints.Add(endpoint);

            return host;
        }
    } 
```

我的 wcf 测试方法什么都不做——它只返回 1 个字节。

但是当我在没有任何 WIF saml 令牌的情况下使用具有消息安全性的简单 WSHttpBinding 时，我得到了大约。每秒 4000 个请求

我不明白为什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T09:58:24.920

您应该设置和配置 WCF 跟踪以查看在 WCF 体系结构中花费的时间的概要，有关更多详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)。

当您启用跟踪并查看请求时，您*可能*会看到（在单个调用者多次调用同一服务的测试环境中）STS 仅被调用一次，并且后续调用包含缓存的令牌。但是，所有调用仍将建立安全连接，从而为每次调用验证令牌（这将花费一些 CPU 时间）。或者，您可以/可以通过方法级别分析服务主机来验证所有这些，这将更清楚地显示时间究竟花在了哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:58:18.470

模拟安全令牌（不要使用实际的 STS），看看你的表现如何。我认为那部分是你的瓶颈。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T07:06:56.457

证书的验证也可能需要很多时间。您可以尝试更改客户端的行为，从而跳过证书验证和吊销。

```
//Client
var clientCredentialsBehavoir = behaviors.Find<FederatedClientCredentials>();
clientCredentialsBehavoir.ServiceCertificate.Authentication.CertificateValidationMode =                     X509CertificateValidationMode.None;
clientCredentialsBehavoir.ServiceCertificate.Authentication.RevocationMode = X509RevocationMode.NoCheck;

//The same can be done on the server
var serviceConfiguration = new ServiceConfiguration();
serviceConfiguration.CertificateValidationMode =   X509CertificateValidationMode.None; 
```

这不应该在生产环境中完成！

您也可以通过 appconfig 执行此操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-05T05:20:31.887

我看到一个`NegotiateServiceCredential = true`在打开频道时添加了多个网络往返的案例。尝试更改`wsHttpSecurity.Message.NegotiateServiceCredential`并`false`指定客户端的服务证书。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-09T23:14:08.550

SAML 令牌已加密 - 如何取决于您的配置。在您的情况下，您似乎正在使用`SecurityAlgorithmSuite.Default`，我认为是`AES256`。

每当发生解密/加密时，CPU 都需要时间进行数字运算。它所花费的时间/精力取决于多种因素，但我认为您看到的请求处理能力的差异并不是那么不寻常*。*

正如其他响应所提到的，即使令牌被缓存，令牌仍然必须经过验证和解密，其中每个都涉及通过一种或多种算法运行令牌的内容。

我的建议：使用不同的`SecurityAlgorithmSuite`常量执行一些分析，并比较结果。

一个开始的地方可能是`SecurityAlgorithmSuite.Basic128`比较`.Basic256`。该`256`常量等效于默认选项。

# c++ - 如何在 NS2 中查找节点 ID？

> ID：11221589
> 
> 赞同：5
> 
> 时间：2012-06-27T07:46:58.570
> 
> 标签：c++, ns2

我想知道如何获取正在处理数据包的节点 ID。

我尝试了 name()，但它没有给出节点的 id，就像在跟踪文件中显示的那样，其中显示了数据包跃点的源和目标。在来自 format() 的跟踪文件中，源和目标是可用的，但是如何访问它们，这也可能有助于了解当前处理正在哪个节点上进行。

这是关于NS2的。有人可以提供一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:20:28.173

```
MobileNode *thisnode = (MobileNode *) ((Node::get_node_by_address(id)));
printf("%d\n",thisnode->address()); 
```

你可以得到这个节点的id！试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:53:20.727

尝试这个：

```
Node *thisnode = Node::get_node_by_address(id);
printf("%d\n",thisnode->nodeid()); 
```

其中 id 只是您的节点的编号：例如节点（1）：

```
Node *thisnode = Node::get_node_by_address(1)
printf("%d\n",thisnode->nodeid()); 
```

# android - Android不支持的操作异常文件输出流？

> ID：11221591
> 
> 赞同：0
> 
> 时间：2012-06-27T07:47:01.563
> 
> 标签：android, fileoutputstream

我想从原始文件夹中读取一个文件并将其写入 SD 卡。我使用以下代码：

```
byte buf[] = new byte[1000000];
int readLen = 0;

InputStream resStream = context.getResources()
.openRawResource(R.raw.diction_index);
OutputStream os = new FileOutputStream(indexFile);

while ((readLen = resStream.read(buf)) > 0)
os.write(buf, 0, readLen);

os.close();
resStream.close(); 
```

当我使用时`API level 5`，我在运行时（in `OutputStream os = new FileOutputStream(indexFile);`）得到这个错误，当我使用更高的 API 级别时，一切都很好。我该如何解决这个问题？是什么原因导致这个问题？

# iphone - IF 语句比较

> ID：11221592
> 
> 赞同：0
> 
> 时间：2012-06-27T07:47:01.423
> 
> 标签：iphone, ios, xcode

在我的 IF 语句中，它有点奇怪，因为每次我的代码在其中循环时，只有 SLOT1 被调用并显示在我的调试器中，为什么会这样？我的陈述有问题吗？谢谢。

```
 choiceSlot1 = TRUE;
    choiceSlot2 = TRUE;
    choiceSlot3 = TRUE;
    choiceSlot4 = TRUE;   

    if (slot1 != [(UIImageView*)[self.carousel1 currentItemView] tag] || twoSlot1 != [(UIImageView*)[self.carousel2 currentItemView] tag] || choiceSlot1 ) {

        NSLog(@"Slot1");
        choiceSlot1 = FALSE;

    } 
    else if (slot2 != [(UIImageView*)[self.carousel1 currentItemView] tag] || twoSlot2 != [(UIImageView*)[self.carousel2 currentItemView] tag] || choiceSlot2) {

        NSLog(@"Slot2");
        choiceSlot2 = FALSE;

    }
    else if (slot3 != [carousel1 indexOfItemViewOrSubview:carousel1.superview] || twoSlot3 != [(UIImageView*)[self.carousel2 currentItemView] tag] || choiceSlot3) {

        NSLog(@"Slot3");
        choiceSlot3 = FALSE;

    }
    else if (slot4 != [(UIImageView*)[self.carousel1 currentItemView] tag] || twoSlot4 != [(UIImageView*)[self.carousel2 currentItemView] tag] || choiceSlot4) {

        NSLog(@"Slot4");
        choiceSlot4 = FALSE;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:50:41.007

因为只有在第一个语句是`else if`的情况下才有效。`if``false`

例子：

```
if (true) 
{
    // Will be executed
} 
else if (true) 
{
    // Will not be executed
}

if (false) 
{
    // Will not be executed
} 
else if (true) 
{
    // Will be executed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:50:52.417

这简单，

```
 if (slot1 != [(UIImageView*)[self.carousel1 currentItemView] tag] || twoSlot1 != [(UIImageView*)[self.carousel2 currentItemView] tag] || choiceSlot1 ) 
```

如果choiceSlot1 为TRUE，则第一个语句将始终为真（使用OR，如果其中一个元素为真，则为真）。

当第一个语句为真时，其余的 else/if 不会被调用！

# struts2 - struts2 ognl 表达式

> ID：11221594
> 
> 赞同：1
> 
> 时间：2012-06-27T07:47:11.563
> 
> 标签：struts2

在我的 JSP 中，我有：

```
<s:textarea name="${param.objId}"/> 
```

这将呈现以下内容：

```
<textarea name="categoryObject.linkAttrValue[#ddAttr.id].link.id" 
   cols="" rows=""
   id="browseCategoryObject_categoryObject_linkAttrValue_#ddAttr_id__link_id">7</textarea> 
```

同样，我有一个属性标签：

```
<s:property value="${param.objId}"/> 
```

呈现：

```
7 
```

最后，一个提交标签：

```
<s:submit action="addRepeatingCategoryObject" value="addNew"
   onclick="$('input[name=ddRepeatingAttrId]').val(%{#${param.objId}}); alert(%{#${param.objId}});   $('input[name=ddRepeatingAttrId]').val(%{#${param.innerDdAttr}.id}); " /> 
```

呈现：

```
<input type="submit" id="browseCategoryObject_addRepeatingCategoryObject"
       name="action:addRepeatingCategoryObject" value="addNew"  
       onclick="$('input[name=ddRepeatingAttrId]').val(); alert();   $('input[name=ddRepeatingAttrId]').val(4); "/> 
```

表达式`%{#${param.innerDdAttr}.id}`在 中解析`s:submit`，但`%{#${param.objId}}`不是在中解析，`s:submit`而是在`s:property`and 中解析`s:textarea`。

有谁知道它为什么以这种方式工作？

* * *

我试过`%{${param.objId}}`而不是`%{#${param.objId}}`它，它奏效了。

但我无法解释为什么它会起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:10:48.897

在没有检查的情况下，我认为以下解释应该会有所帮助：

考虑到在 OGNL 中`%{}`转义了 OGNL 表达式，以下适用：

在 OGNL 中，您有一个表达式`#beanName`或从根上下文`${beanName}`中获取 bean 的值。`beanName`如果您执行以下操作：`#${beanName}`，您实际上将首先查找 bean 的名称，然后使用该字符串在 OGNL 根上下文中查找一个值。

因此，对于`#${param.innerDdAttr}.id`，会发生以下情况：

*   `param`在 OGNL 上下文中查找
*   获取`innerDdAttr`属性的值（大概会给你一个“ddRepeatingAttrId”的值）
*   这意味着`#${param.innerDdAttr}.id`将解析为`#ddRepeatingAttrId.id`，那么
*   `ddRepeatingAttrId`在 OGNL 上下文中查找
*   获取`id`属性的值（它为您提供“4”的值）。

相反，`#${param.objId}`发生的事情是：

*   `param`在 OGNL 上下文中查找
*   获取`objId`属性的值（大概是你的值“7”）
*   这意味着`#${param.innerDdAttr}.id`将解析为`#7`，那么
*   在 OGNL 上下文中查找`7`，它没有找到任何内容，因此它不打印任何内容。

`%{#${param.objId}}`恕我直言，您可能想要`%{#param.objId}`或只是想要而不是`%{param.objId}`（不同之处在于`#`它只会考虑根上下文，否则搜索 OGNL 上下文）。

希望有帮助。

# java - XML 到 POJO，反之亦然

> ID：11221595
> 
> 赞同：7
> 
> 时间：2012-06-27T07:47:14.607
> 
> 标签：java, xml, pojo

> **可能重复：**
> [在 Java 应用程序中读取 XML 文件的最佳/最简单方法是什么？](https://stackoverflow.com/questions/428073/what-is-the-best-simplest-way-to-read-in-an-xml-file-in-java-application)

如何将 XML 转换为 POJO，反之亦然？axis2 是否提供该功能？或者java是否已经有内置功能？或任何其他框架？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:58:29.987

我真的鼓励您使用**JAXB**。

> > JAXB 是一个注释框架，它将 Java 类映射到 XML 和 XML 模式（反之亦然）。它非常有用，因为您可以使用更接近您正在建模的领域的真实 Java 对象，而不是与 XML 文档的抽象表示进行交互。

如果您还需要构建一个 RESTful Web 服务，通过 JAXB 将 Java 对象自动序列化/反序列化为 XML，我还建议您阅读本书：

*带有 JAX-RS 的 Oreilly RESTful Java* -（第 6 章。JAX-RS 内容处理程序）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T07:49:53.730

如果您需要一个现成的框架，请查看[xstream](http://xstream.codehaus.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T07:51:27.623

有多种框架：Jaxb、XStream、JiBX 等。

可能对您有所帮助的教程：

[http://thomassundberg.wordpress.com/2010/01/19/how-to-convert-a-pojo-to-xml-with-jaxb/](http://thomassundberg.wordpress.com/2010/01/19/how-to-convert-a-pojo-to-xml-with-jaxb/)

[http://numberformat.wordpress.com/2009/11/01/using-jaxb-to-convert-between-xml-and-pojos/](http://numberformat.wordpress.com/2009/11/01/using-jaxb-to-convert-between-xml-and-pojos/)

[http://soadev.blogspot.com/2011/07/jaxb-converting-pojo-to-xml-and-vice.html](http://soadev.blogspot.com/2011/07/jaxb-converting-pojo-to-xml-and-vice.html)

[http://jibx.sourceforge.net/binding/tutorial/binding-tutorial.html](http://jibx.sourceforge.net/binding/tutorial/binding-tutorial.html)

这里有[一篇文章](http://onjava.com/onjava/2007/09/07/schema-less-java-xml-data-binding-with-vtd-xml.html)，解释了如何仅使用 XPath 来完成。

[还可以在这里](https://stackoverflow.com/questions/1651924/simple-java-xml-to-pojo-mapping-binding)查看关于 SO 的类似讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T07:54:02.313

您可以尝试 JAXB [http://jaxb.java.net/](http://jaxb.java.net/)或 XMLBeans [http://xmlbeans.apache.org/](http://xmlbeans.apache.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T08:56:11.780

一个简单的版本使用`XMLEncoder`and`XMLDecoder`类内置在 java >=1.4 中。

* * *

## 一个简单的例子

用法很简单，大致如下

```
XMLEncoder xmlEncoder = new XMLEncoder( outputStream );
xmlEncoder.writeObject( myObject ); 
```

会给你类似的东西

```
<?xml version="1.0" encoding="UTF-8"?> 
<java> 
 <object class="your.class.Name"> 
  <void property="fieldName"> 
   <boolean>true</boolean> 
  </void> 
  etc. etc. etc. 
 </object> 
</java> 
```

读回你简单做的对象

```
XMLDecoder xmlDecoder = new XMLDecoder( inputStream );
MyClass thing = (MyClass) xmlDecoder.readObject(); 
```

这是我在谷歌上找到的一个随机教程：
[http ://www.avajava.com/tutorials/lessons/how-do-i-write-a-javabean-to-an-xml-file-using-xmlencoder.html](http://www.avajava.com/tutorials/lessons/how-do-i-write-a-javabean-to-an-xml-file-using-xmlencoder.html)

这种方法不是非常灵活，但它是内置的，无需配置且非常可预测。可能是一个很好的起点。

## *一些附加说明：*

这是一个概述 xml 格式的文档：http: [//java.sun.com/products/jfc/tsc/articles/persistence3/](http://java.sun.com/products/jfc/tsc/articles/persistence3/)

这是我刚刚找到的另一个链接，它解释了如何从`xmlencoder`jaxb（内置于 jdk >= 1.6）获得更大的灵活性： [http ://en.newinstance.it/2010/08/05/javabeans-to-xml -没有图书馆/](http://en.newinstance.it/2010/08/05/javabeans-to-xml-with-no-libraries/)

# cdi - 将事务与 CDI 对话一起使用

> ID：11221597
> 
> 赞同：0
> 
> 时间：2012-06-27T07:47:16.757
> 
> 标签：cdi, jboss7.x, jboss-weld

我正在构建一个使用 CDI (Weld Container) 和 @ConversationScope 作为视图的应用程序。我需要在对话开始时启动 JTA 事务并在最后提交/回滚。所以我编码了这个：

```
@Named 
@ConversationScoped
public class ConversationBean implements Serializable {

 private @Inject UserTransaction utx;
 private @Inject Conversation conversation;

 public void startConversation(){
    conversation.begin();
    try {
        utx.begin();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
 }
 public void stopConversation(){
    conversation.end();
    try {
        utx.commit();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
 }

} 
```

然而结果是当我开始对话/交易时

**09:23:33,795 错误 [org.jboss.as.txn] (http--127.0.0.1-8180-1) JBAS010152：应用程序错误：事务在请求中仍处于活动状态，状态为 0**

当我发出提交时：

**09:23:56,513 错误 [stderr] (http--127.0.0.1-8180-1) java.lang.IllegalStateException: BaseTransaction.commit - ARJUNA016074: 没有交易！**

知道这怎么可能吗？我的环境是 JBoss 应用服务器 7.1.1（焊接容器）。谢谢琳达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:19:35.823

我觉得你这里的想法有点问题。当事务绑定到服务器上的线程时，会话跨越多个请求（否则您将使用请求范围）。多个请求不会（必然，尤其是在服务多个客户端的 Web 应用程序上）绑定到同一个线程。当您使用数据库或其他事务资源时，您需要该事务。您可能应该重新考虑一下。

# android - android模拟器上的jquery ajax调用失败

> ID：11221604
> 
> 赞同：0
> 
> 时间：2012-06-27T07:47:39.160
> 
> 标签：android, jquery, ajax

我正在尝试使用 jquery ajax 调用来调用 web 服务。我使用 jasonp 作为数据类型来解决跨域问题。

它在所有浏览器中都能正常工作。我在其他域上对其进行了测试。我得到了有效的回应。当我尝试从 android 设备模拟器运行它时，webservice 调用失败。

请建议。

代码 ：

```
function getJsonData()
{
    alert("Within get json function.. ");
    (function($) {
    var url = 'http://localhost:8080/mobile-services/rest/languages.json?callback=callback';
    $.ajax({
       type: 'GET',
        url: url,
        async: false,
        contentType: "application/json",
        dataType: 'jsonp'
    });
})(jQuery);
}
function callback(data)
        {
            alert(data);
        } 
```

网络服务响应。

```
callback([{"language":"English","id":1},{"language":"Hindi","id":2},{"language":"Marathi","id":3}]) 
```

这是一个有效的 jsonp 响应。

Android 清单文件权限。

```
<uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:58:14.200

在 Web 服务 URL 中尝试使用 `10.0.2.2` 而不是`localhost`.
`localhost`或`127.0.0.1`指向模拟器/安卓设备，同时`10.0.2.2`是主机环回接口的特殊别名（即`127.0.0.1`在您的开发机器上）。检查此[链接](http://juristr.com/blog/2009/10/accessing-host-machine-from-your/)以获取更多详细信息。

# compression - 无损图像压缩工具

> ID：11221607
> 
> 赞同：5
> 
> 时间：2012-06-27T07:47:56.697
> 
> 标签：compression, imaging, pagespeed, image-compression

在公共网站上运行[Google Page Speed](https://developers.google.com/speed/)，我看到了该工具的一些建议，如下所示：

无损压缩[http://g-ecx.images-amazon.com/images/G/01/electronics/detail-page/Acer-120x120._V137848950_.gi](http://g-ecx.images-amazon.com/images/G/01/electronics/detail-page/Acer-120x120._V137848950_.gi)可以节省 4.8KiB（减少 26%），他们还提供了一个链接到优化的内容。但他们是在每张图片的基础上做的。我看到压缩后文件大小显着减小。所以问题是：

有没有我可以使用的工具或 Web 服务，以便我给它一个未压缩图像的目录（比如 .gif），它会返回一个所有图像都压缩的目录？

[我在这里](https://stackoverflow.com/questions/5451597/how-does-googles-page-speed-lossless-image-compression-work)找到了关于 SO 的一个有点相关的问题，但它不是完全重复的。

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T20:22:37.537

在 Mac 上，我使用[ImageOptim](http://imageoptim.com/)取得了很好的成功。它以拖放方式处理 PNG、JPEG 和 GIF 文件，还可以处理整个目录。它也是开源的，并且有多种语言版本。

在 Windows 上，我使用了[PngOptimizer](http://psydk.org/PngOptimizer)和[PNGGauntlet](http://pnggauntlet.com/)。与 ImageOptim 不同，这些程序会将其他格式转换为 PNG，因此如果您的目标是减少 GIF 或 JPEG 并使其保持该格式，那么这些将不是一个选项。

您还可以尝试使用 Yahoo 网站/服务[smush.it](http://smush.it/)，它可以处理单个文件上传以及目录 zip。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-14T12:21:42.617

无损压缩网络图像（JPG、PNG 和 GIF）的最佳工具是[FileOptimizer](http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer)。它有时可以将图像压缩到原始大小的 10%。一些更好的在线工具是用于 PNG 的[压缩器](http://www.giftofspeed.com/png-compressor/)[和](https://kraken.io/web-interface)用于 JPG 的压缩器。

如果你有很多图像，我会选择 FileOptimzer。如果您只有几个，则使用在线工具会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:56:22.527

可以进行 GIF、PNG 甚至 JPEG 无损优化。因为，这些格式包含足够的冗余。至于 PNG 格式，我使用[cryopng](http://encode.ru/threads/1260-CryoPNG-short-introduction)脚本。[您可以在此处](http://www.encode.ru/)找到其他一些与压缩相关的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-14T11:00:24.920

我最近开始使用无损 Jpegoptim ( [GitHub](https://github.com/tjko/jpegoptim) )，我使用这个工具获得了最好的结果，通常接近 Google Page Speed 建议，有时甚至更好。

我在 Linux 上，所以如果我导航到包含图像的文件夹，我只需使用此命令来压缩所有图像：

```
jpegoptim *.jpg -s 
```

或者如果您只想压缩特定图像，请使用它：

```
jpegoptim image.jpg -s 
```

它基本上会从输出文件中删除所有标记，有时甚至可以将图像大小减小 50%！图像质量保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-21T20:19:11.223

我目前正在使用[highcompress](http://www.highcompress.com)，这个是我最喜欢的，因为最好的部分是质量和大小。我与许多在线工具进行了比较，在大多数情况下，它提供了最好的压缩和最好的质量，所以现在我不会到处去直接使用它。如果有其他更好的你知道请分享

# sonarqube - 自定义 XPath 规则在 pmd 中引发违规，但在声纳中没有

> ID：11221618
> 
> 赞同：0
> 
> 时间：2012-06-27T07:48:32.710
> 
> 标签：sonarqube, pmd

我有一个很奇怪的行为。

我在名为 pmd-extensions.xml 的文件中为 PMD 4.2.6 创建了 XPath 规则：

```
...
<rule name="AvoidPrintStackTrace-XPath"
  message="Avoid to use printStackTrace - XPath"
  class="net.sourceforge.pmd.rules.XPathRule">
  <description>Avoid to use printStackTrace - XPath</description>
  <properties>
    <property name="xpath">
     <value>
<![CDATA[
//Name[contains (@Image, "printStackTrace")]
]]>
     </value>
    </property>
  </properties>
  <example>
  <![CDATA[
    // don't do this! 
    myException.printStackTrace() 
   ]]>
   </example>
</rule>
... 
```

我有一个单元测试验证这个规则并且工作正常：

```
 ...
 @Before
 public void setUp() {
     addRule("rulesets/pmd-extensions.xml", "AvoidPrintStackTrace-XPath");
 }
 ... 
```

但是当我在 Sonar 中嵌入这条规则时，这条规则并没有触发任何违规行为，而我期望的是：

```
 ...
 <rule key="AvoidPrintStackStrace-XPath" >
  <name>AvoidPrintStackStrace-XPath</name>
  <configKey>rulesets/pmd-extensions.xml/AvoidPrintStackTrace-XPath</configKey>
  <category name="Usability"/>
  <description>Avoid to use printStackTrace - XPath</description>
 </rule>
 ... 
```

如果我直接在 Sonar 中声明此规则（使用相同的 XPath 表达式），该规则会按预期触发违规：

```
...
<rule key="AvoidPrintStackStrace-XPath-Sonar" priority="MAJOR">
 <name><![CDATA[AvoidPrintStackStrace-XPath-Sonar]]></name>
 <configKey><![CDATA[net.sourceforge.pmd.rules.XPathRule]]></configKey>
 <category name="Maintainability"/>
 <description>Avoid to use printStackTrace - XPath-Sonar</description>
 <param key="xpath" type="s">
  <description><![CDATA[XPath expressions.]]></description>
  <defaultValue>//Name[contains (@Image, "printStackTrace")]</defaultValue>
 </param>
 <param key="message" type="s">
  <description><![CDATA[Message to display when a violation occurs.]]></description>
  <defaultValue>Prevent use of printStackTrace</defaultValue>
 </param>
</rule>
... 
```

怎么了 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:56:40.873

您可能尚未将此新规则添加到您用于项目的配置文件中。

您提供了“pmd-extensions.xml”文件这一事实仅意味着您将此规则添加到规则存储库中。但是，如果您没有在单个配置文件上激活此规则，它将保持非活动状态并且永远不会被执行。

# c++ - 程序作为子进程执行时sqlite无法打开数据库文件

> ID：11221627
> 
> 赞同：1
> 
> 时间：2012-06-27T07:49:15.823
> 
> 标签：c++, python, sqlite, permissions, subprocess

我面临以下问题：当我直接启动我的 C++ 编写的应用程序时，使用 sqlite3_open_v2() 连接到 sqlite 数据库文件没有问题。但是当我通过 python 脚本（使用 subprocess.Popen）执行应用程序时，我总是得到一个

> 调用 sqlite3_open_v2() 时出现“无法打开数据库文件”错误

我认为这可能是文件权限的问题。但是我为每个人设置了数据库文件和包含文件夹的读写权限。

有人知道问题可能是什么吗？

# .net - HtmlDecode 方法的参数无效？

> ID：11221633
> 
> 赞同：0
> 
> 时间：2012-06-27T07:49:30.440
> 
> 标签：.net

嗨，我正在使用 RichEditor。此编辑器将跨度和样式保存在表中。所以，我使用以下方法来避免这种情况：`HtmlDecode(DataBinder.Eval(Container.DataItem, "ImageDesc"))`

但它给出的错误如下：

> HtmlCode 有一些无效参数

我该如何解决这个问题。c#代码是：

```
public string HtmlDecode(string strValue)
    {
        string functionReturnValue = null;
        try
        {
            functionReturnValue = Server.HtmlDecode(strValue);

        }
        catch (Exception exc)
        {
           // ProcessModuleLoadException(this, exc);
        }
        return functionReturnValue;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:54:30.833

strValue 可以为 Null 吗？尝试添加一个空测试。如果为空，则替换为空字符串。

# facebook - Facebook 应用程序流并不总是显示

> ID：11221642
> 
> 赞同：0
> 
> 时间：2012-06-27T07:50:19.270
> 
> 标签：facebook, post, stream

我刚刚创建了一个新的 Facebook 应用程序。但是当我们测试它时，它并不总是显示流帖子。有时它可以工作，但是当我从我的个人 Facebook 中删除该应用程序并再次尝试时，它不会再次显示流帖子。有人熟悉这个问题吗？

亲切的问候，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:55:31.950

当您重新授权应用程序时，您是否要求`read_stream`延长许可？[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

# c# - Autofac具有相同类型的两个属性

> ID：11221645
> 
> 赞同：0
> 
> 时间：2012-06-27T07:50:26.790
> 
> 标签：c#, autofac

如果我在一个类中有两个具有相同接口类型的属性，并且我想向每个属性注入两种不同的具体类型，我该如何使用 autofac 使用属性或构造函数注入来做到这一点。

例如。

```
class A : IA
{
    public IB PropertyB { get; set; }
    public IB PropertyC { get; set; }

    public A(IB b, IB c)
    {
        PropertyB = b;
        PropertyC = c;
    }

    public void PrintB()
    {
        PropertyB.Print();
    }

    public void PrintC()
    {
        PropertyC.Print();
    }
} 
```

我已经尝试过了，但当然我只是将 C 注入到这两个属性中

```
 var builder = new ContainerBuilder();

    builder.RegisterType<B>().As<IB>();
    builder.RegisterType<C>().As<IB>();
    builder.RegisterType<A>().As<IA>();

    var container = builder.Build();
    var a = container.Resolve<IA>(); 
```

或者这具有相同的结果：

```
 builder.RegisterType<B>().As<IB>();
    builder.RegisterType<C>().As<IB>();
    builder.RegisterType<A>().As<IA>().PropertiesAutowired();

    var container = builder.Build();
    var a = container.Resolve<IA>(); 
```

有没有办法告诉 autofac 我想要 PropertyB 中的 B 和 PropertyC 中的 C ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:18:11.517

使用属性注入，您可以执行以下操作：

```
builder.RegisterType<A>()
    .As<IA>()
    .OnActivating(e =>
{
    e.Instance.PropertyB = e.Context.Resolve<BImpl1>();
    e.Instance.PropertyC = e.Context.Resolve<BImpl2>();
}); 
```

# lucene - 使用 Lucene 索引复合类型

> ID：11221648
> 
> 赞同：0
> 
> 时间：2012-06-27T07:50:39.927
> 
> 标签：lucene, indexing

目前我正在构建一个搜索工具作为一个项目，其中我索引从多个数据库表创建的对象（即他们所做的人和事）。我想知道是否有更好的方法来解决这个问题，而不是创建与每个人/事物组合相对应的对象（每个都有数千个）。

例如，为 Person 1 所做的所有 N 件事创建一个对应于 Person 1 - Thing 1 的对象，以及另一个对应于 Person 1 - Thing 2 的对象。然后，索引该对象集合。然后对第 2 个人做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:42:30.127

如果您不想对记录进行非规范化，则可以使用 Join 功能。看看[这篇文章](http://www.searchworkings.org/blog/-/blogs/405872/maximized)的初学者。性能会比非规范化更差，但它可能已经足够好了。

# neo4j - 在 gremlin 上使用关系索引比较慢

> ID：11221653
> 
> 赞同：1
> 
> 时间：2012-06-27T07:51:00.640
> 
> 标签：neo4j, cypher, gremlin

在 Neo4j 中，我有一个关系索引“index_e_ASSOC_sMETHdGEXP”，其中包含大约 180000 条边，所有边都有一个属性“属性”。我想做一个简单的查询，列出索引中的 200 条边，此时无论属性值如何（稍后执行查询，例如为边属性 <= 0.01 的 200 个第一边输出顶点获取相同的属性值），并从 out 节点获取一些属性值：

```
time = System.currentTimeMillis();
t = new Table(); g.idx('index_e_ASSOC_sMETHdGEXP')[[property: Neo4jTokens.QUERY_HEADER + "*"]][0..200].outV().id.as('nodeId').back(1).alias.as("alias").back(1).chr.as('chr').table(t,["nodeId","alias","chr"]).iterate();
System.currentTimeMillis() - time 
```

**=713ms**

从索引中获取 200 条第一条边需要**262 毫秒**：

```
time = System.currentTimeMillis();
g.idx('index_e_ASSOC_sMETHdGEXP')[[property: Neo4jTokens.QUERY_HEADER + "*"]][0..200];
System.currentTimeMillis() - time 
```

为什么第一个查询完成这么慢？从“预定列表”中获取 200 条边并从每个输出节点获取一些属性值应该不会花费这么长时间。当涉及到 Cypher 和 Gremlin 时，我是一个完整的新手，那么在 Cypher 或 Gremlin 中是否有更快的方法来执行此查询？

编辑：运行查询 (1) 23 次：

```
==> 1124
==> 983
==> 951
==> 864
==> 1175
==> 1189
==> 889
==> 917
==> 822
==> 872
==> 795
==> 736
==> 840
==> 1189
==> 723
==> 756
==> 691
==> 44609
==> 644
==> 640
==> 1110
==> 1007
==> 819 
```

Edit2：我已经使用以下配置重新导入了数据库：

```
dump_configuration=true
cache_type=gcr
neostore.nodestore.db.mapped_memory=100M
neostore.relationshipstore.db.mapped_memory=4G
neostore.propertystore.db.mapped_memory=200M
neostore.propertystore.db.strings.mapped_memory=1G
neostore.propertystore.db.arrays.mapped_memory=1G
neostore.propertystore.db.index.keys.mapped_memory=1G
neostore.propertystore.db.index.mapped_memory=1G
relationship_cache_array_fraction=8
node_cache_array_fraction=8
node_cache_size=3G
relationship_cache_size=6G 
```

现在 query(1) 实际上需要更长的时间：**23849 ms**。它开始看起来像一个缓存问题。

数据库日志的有趣片段：

```
2012-07-06 10:51:49,149 DEBUG [neo4j.diagnostics]: System memory information:
2012-07-06 10:51:49,152 DEBUG [neo4j.diagnostics]: Total Physical memory: 26,37 GB
2012-07-06 10:51:49,152 DEBUG [neo4j.diagnostics]: Free Physical memory: 11,99 GB
2012-07-06 10:51:49,153 DEBUG [neo4j.diagnostics]: Committed virtual memory: 16,43 GB
2012-07-06 10:51:49,153 DEBUG [neo4j.diagnostics]: Total swap space: 27,00 GB
2012-07-06 10:51:49,153 DEBUG [neo4j.diagnostics]: Free swap space: 26,96 GB
2012-07-06 10:51:49,154 DEBUG [neo4j.diagnostics]: JVM memory information:
2012-07-06 10:51:49,154 DEBUG [neo4j.diagnostics]: Free  memory: 1,84 GB
2012-07-06 10:51:49,154 DEBUG [neo4j.diagnostics]: Total memory: 1,87 GB
2012-07-06 10:51:49,154 DEBUG [neo4j.diagnostics]: Max   memory: 13,33 GB
2012-07-06 10:51:49,588 DEBUG [neo4j.diagnostics]: Storage files:
2012-07-06 10:51:49,589 DEBUG [neo4j.diagnostics]: messages.log: 304,72 kB
2012-07-06 10:51:49,589 DEBUG [neo4j.diagnostics]: neostore.propertystore.db.index: 1,02 kB
2012-07-06 10:51:49,589 DEBUG [neo4j.diagnostics]: neostore.propertystore.db: 401,18 MB
2012-07-06 10:51:49,590 DEBUG [neo4j.diagnostics]: neostore.relationshipstore.db.id: 9,00 B
2012-07-06 10:51:49,590 DEBUG [neo4j.diagnostics]: index.db: 1,42 kB
2012-07-06 10:51:49,590 DEBUG [neo4j.diagnostics]: tm_tx_log.1: 0,00 B
2012-07-06 10:51:49,590 DEBUG [neo4j.diagnostics]: neostore.relationshiptypestore.db.names.id: 9,00 B
2012-07-06 10:51:49,591 DEBUG [neo4j.diagnostics]: neostore.propertystore.db.id: 9,00 B
2012-07-06 10:51:49,591 DEBUG [neo4j.diagnostics]: neostore.nodestore.db: 478,88 kB
2012-07-06 10:51:49,591 DEBUG [neo4j.diagnostics]: nioneo_logical.log.active: 4,00 B
2012-07-06 10:51:49,591 DEBUG [neo4j.diagnostics]: neostore.nodestore.db.id: 9,00 B
2012-07-06 10:51:49,591 DEBUG [neo4j.diagnostics]: neostore.propertystore.db.strings.id: 9,00 B
2012-07-06 10:51:49,592 DEBUG [neo4j.diagnostics]: neostore.id: 9,00 B
2012-07-06 10:51:49,592 DEBUG [neo4j.diagnostics]: neostore.propertystore.db.strings: 34,15 MB
2012-07-06 10:51:49,592 DEBUG [neo4j.diagnostics]: neostore.relationshiptypestore.db.id: 9,00 B
2012-07-06 10:53:01,486 INFO  [neo4j]: GC Monitor: Application threads blocked for an additional 14826ms [total block time: 14.826s]
2012-07-06 10:54:24,019 INFO  [neo4j]: GC Monitor: Application threads blocked for an additional 875ms [total block time: 15.701s]
2012-07-06 10:55:25,441 INFO  [neo4j]: GC Monitor: Application threads blocked for an additional 559ms [total block time: 16.26s]
2012-07-06 11:00:16,962 INFO  [neo4j]: GC Monitor: Application threads blocked for an additional 775ms [total block time: 17.035s] 
```

JVM参数包括

```
-XX:+DisableExplicitGC
-Xms2000m,
-Xmx15360m 
```

似乎垃圾收集器干扰了执行，这是为什么呢？使用 JVM 参数，我告诉服务器实例使用最大数量的 ~15GB 内存，这应该足够了。

Edit4：执行查询（1）将以下内容添加到日志中：

```
2012-07-06 11:40:31,973 INFO  [neo4j]: GC Monitor: Application threads blocked for an additional 23745ms [total block time: 23.745s]
2012-07-06 11:40:33,961 INFO  [neo4j]: RelationshipCache array size: 17895751 purge count: 0 size is: 0b, 100.0% misses, NaN% collisions (0).
2012-07-06 11:40:33,966 INFO  [neo4j]: NodeCache array size: 17895751 purge count: 0 size is: 0b, 100.0% misses, NaN% collisions (0). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:21:06.070

您是否尝试过多次运行查询，因此您正在对暖图和索引进行操作？

# c++ - 获取尺寸较小的矩阵的子矩阵

> ID：11221660
> 
> 赞同：3
> 
> 时间：2012-06-27T07:51:28.477
> 
> 标签：c++, algorithm, boost, stl

我使用来自 stl 的 bitset 或来自 boost 的 dynamic_bitset<> 用位表示地图（矩阵行 x 列）（我可以使用任何我想要的东西）。我需要获得具有较小尺寸的该矩阵的子矩阵（例如 a(2,2) a(2,3) a(3,2) a(3,3) 尺寸为 2 ）。是否有任何有效的结构可以用位表示矩阵并从 startindex 和 length 获取子矩阵而无需迭代？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:11:36.107

可以在矩阵和子矩阵之间有效地共享数据。诀窍是跟踪班级中的三个变量。

*   row_stride
*   开始
*   数据

`data`需要是类似的`shared_ptr`结构，以便在完成后可以销毁基础数据。`start`将是指向 引用的数据的指针`data`，`row_stride`告诉您要移动多远才能到达下一行。

您可能想要跟踪的其他内容是

*   column stride（这可以让您将其他有趣的视图带入矩阵，并有效地支持转置）。
*   行和列的长度 - 这些对于调试或者如果你想使你的循环和乘法更容易使用这些可以很方便。

以下是如何寻找一种非基于位的方法（我省略了很多......但希望你能明白要点）。

```
template<typename T>
struct MatrixData
{
   T * data;
   explicit MatrixData( size_t N ) { new T[N]; }
   ~MatrixData() { delete [] data; }
private:
    MatrixData( const MatrixData & );
    MatrixData& operator=( const MatrixData & );
};

template<typename T>
class Matrix
{
    Matrix(size_t nni, size_t nnj) :
      data( new MatrixData( nni*nnj ) ),
      ni(nni),
      nj(nnj),
      row_stride(ni),
      col_stride(1)
    {
    }

    T operator()( size_t i, size_t j)
    {
       assert( i < ni );
       assert( j < nj );
       return start + i * col_stride + j * row_stride;
    }

    Matrix submatrix( size_t i_start, size_t j_start, size_t new_ni, size_t new_nj )
    {
       assert( i_start + new_ni < ni );
       assert( j_start + new_nj < nj );

       Matrix retval(*this);
       retval.start += i_start * col_stride + j_start * row_stride;
       retval.ni = new_ni;
       retval.nj = new_nj;
       return retval;
    }

    Matrix transpose()
    {
       Matrix retval(*this);
       std::swap(retval.ni,retval.nj);
       std::swap(retval.row_stride,retval.col_stride);
    }

  private:
    shared_ptr<MatrixData> data;
    T* start;
    size_t ni;
    size_t nj;
    size_t row_stride;
    size_t col_stride;

}; 
```

使这项工作适用于基于位的版本意味着将 更改`MatrixData`为保存基于机器人的结构之一，更改`start`为结构的索引并更改您`operator()`以正确访问数据。

# windows - 如何在不禁用子控件功能的情况下从其客户区域拖动我的表单？

> ID：11221665
> 
> 赞同：4
> 
> 时间：2012-06-27T07:51:43.813
> 
> 标签：windows, delphi, winapi, delphi-xe2

我有一个 Delphi XE2 项目，其中包含`Label1`,`BitBtn1`和`Image1`. 我已经实现了表单拖动，而没有标题栏编写以下代码：

```
 private
    { Private declarations }
    procedure WMNCHitTest(var Msg: TWMNCHitTest) ; message WM_NCHitTest; 
```

和

```
procedure TMainForm.WMNCHitTest(var Msg: TWMNCHitTest) ;
begin
  inherited;
  if Msg.Result = htClient then Msg.Result := htCaption;
end; 
```

在我的表单中，`Image1.OnMouseMove`和`Label1.OnClick`事件对于我的项目是强制性的，但它们不起作用。如何从客户区拖动表单，除了`Image1`和`Label1`区？我可以做一件事，我可能会使用 one `TPanel`，但它会破坏我的表单的`GlassFrame`和`SheetOfGlass`属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T11:17:58.470

您将需要使用消息中包含的位置信息`WM_NCHITTEST`。使用它来确定此时是否存在控件。例如，您可以使用该`ControlAtPos`方法。

```
procedure TMainForm.WMNCHitTest(var Msg: TWMNCHitTest);
begin
  inherited;
  if ControlAtPos(ScreenToClient(Msg.Pos), True, True, True)=nil then
    if Msg.Result=htClient then
      Msg.Result := htCaption;
end; 
```

仅当您单击表单上没有控件的点时，才允许拖动。您可能希望使用替代标准，但使用`Msg.Pos`是关键思想。

# linux - 在 c++ 链接期间，在 Ubuntu 12.04 中找不到库

> ID：11221672
> 
> 赞同：0
> 
> 时间：2012-06-27T07:52:08.597
> 
> 标签：linux, gcc, ubuntu, ubuntu-12.04

当我构建一个简单的程序链接`pthread`时，我遇到了一个奇怪的问题：

将`-lpthread`参数放在源文件之前，构建失败并返回

> ld 返回 1 个退出状态

`-lpthread`但是，当我最后编写参数时，它成功构建了程序。

我是新手，很抱歉我不能上传图片。以下是两个版本命令：

**失败**：`gcc **-lpthread** maintest.cpp`

**成功**：`gcc maintest.cpp **-lpthead**`

我之前在 Ubuntu 11.04 中遇到过同样的问题，但在 Ubuntu 10.10 中我无法重现该问题。

我不确定这是否是较新的 Ubuntu 中的错误，或者只是对 Makefile 进行规范化的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:50:26.203

这当然很有趣。

我在 Linux Mint 12 上，它们似乎都在为我工作。

您是否使用 .c 文件而不是 cpp 进行了尝试？你能做到这一点并发布你的结果吗？（我很确定这没有什么区别，但只是想检查一下！）

我不是 100% 肯定，但我非常肯定它不能成为规范化 makefile 的约束，因为在 linux 中，您不需要具有正确的扩展名来使用正确的编译器编译文件。（这就是为什么我很确定上述说法的原因）。正在使用的编译器。所以从逻辑上讲，限制它没有任何意义，因为 pthread 只会由编译器加载（库将被链接），然后它可以跳转到编译源代码。如果我没有错（纠正我的人，如果我错了！），那么基本上它不会有什么不同，因为位于命令中任何位置的标志会在编译源文件之前加载/链接库。

所以我的赌注是这个错误，但我没有来源支持我。这正是逻辑解释所说的！（如果我错了，请纠正我......再次！）

# python - 谷歌应用引擎中的图像 exif 数据

> ID：11221677
> 
> 赞同：5
> 
> 时间：2012-06-27T07:52:26.087
> 
> 标签：python, google-app-engine, exif

在谷歌应用引擎开发环境中，我无法获取 exif 数据。我按照这里的指南 [https://developers.google.com/appengine/docs/python/images/imageclass](https://developers.google.com/appengine/docs/python/images/imageclass)

我已经在代码中完成了以下操作

```
def getResizedImage(self, image, imagemaxWidth, imagemaxHeight):
    img = images.Image(image_data=image)
    logging.error(img.get_original_metadata()) 
```

我只得到无。img 对象很好，因为我可以执行 img.resize 等。我需要获取 Exif 信息。

**更新：通过这样做，我能够获得元数据，**

```
def getResizedImage(self, image, imagemaxWidth, imagemaxHeight):
    img = images.Image(image_data=image)
    img.rotate(0)
    img.execute_transforms()
    logging.error(img.get_original_metadata()) 
```

就像文档中解释的那样，我得到了非常“有限”的设置

```
{u'ImageLength': 480, u'ImageWidth': 640} 
```

显然你在真实环境中得到了更大的设置，但我不知道为什么这不能成为 dev env 的特性。这很令人沮丧。只要我能获得 pyexiv2 级别的 exif 我就可以，但如果它只是使用 PIL 就不够好。目前 PIL 提供的 exif 信息很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:10:10.553

开发环境使用 PIL 来解释你所看到的。生产环境不使用 PIL，并且会为您提供映像中的大部分标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:32:23.130

取自文档`get_original_metadata`

```
回报：
  带有字符串键的dict。如果用 parse_metadata 调用了 execute_transform
  为真，这本词典包含有关各种属性的信息
  原始图像，例如尺寸、颜色配置文件和属性
  来自 EXIF。
  即使 parse_metadata 为 False 或图像没有任何元数据，
  字典将包含一组有限的元数据，至少
  'ImageWidth' 和 'ImageLength', 对应的尺寸
  原始图像。
  如果在成功之前调用它，它将返回 None
  执行转换。

```

You want to pass `parse_metadata=True` to `execute_transform` in order to get more metadata including the exif data.

Also The bottom note about it returning `None` explains why you had to call `execute_transforms` in order to get anything back

# ruby-on-rails - rails generate --h 不显示其文档

> ID：11221679
> 
> 赞同：0
> 
> 时间：2012-06-27T07:52:43.043
> 
> 标签：ruby-on-rails

当我运行 rails generate --help 而不是显示文档时，控制台会输出以下内容：

```
/home/ab/.rvm/gems/ruby-1.9.3-p194/gems/tlsmail-0.0.1/lib/net/smtp.rb:806: warning: already initialized constant SMTPSession
/home/ab/.rvm/gems/ruby-1.9.3-p194/gems/tlsmail-0.0.1/lib/net/pop.rb:687: warning: already initialized constant POP
/home/ab/.rvm/gems/ruby-1.9.3-p194/gems/tlsmail-0.0.1/lib/net/pop.rb:688: warning: already initialized constant POPSession
/home/ab/.rvm/gems/ruby-1.9.3-p194/gems/tlsmail-0.0.1/lib/net/pop.rb:689: warning: already initialized constant POP3Session
/home/ab/.rvm/gems/ruby-1.9.3-p194/gems/tlsmail-0.0.1/lib/net/pop.rb:702: warning: already initialized constant APOPSession
/home/ab/finalcrowd/config/environments/development.rb:29: warning: already initialized constant VERIFY_PEER
Usage: rails [options]
    -p, --port=port 
```

这很奇怪，因为我之前能够运行 rails generate --help 。我尝试使用 rails g -h, rails g --help, rails generate -h 但还是一样。但是， rails --help 工作正常。

编辑：使用 phoet 建议的 git bisect 后，我​​发现这个问题的原因可能来自瘦服务器，因为我添加了两个 gemthin 和 private_pub。这就是为什么它一直告诉我有关添加 --port 参数的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:32:04.960

运行`rails generate --help`应该可以正常工作。

如果您使用的是 git 之类的 scm，则可以使用 git bisect 找出哪个提交破坏了该命令。[http://git-scm.com/book/en/Git-Tools-Debugging-with-Git](http://git-scm.com/book/en/Git-Tools-Debugging-with-Git)

我认为某些 gem/plugin 会导致您的 rails 项目出现问题。看起来所有内容都加载了两次。

你确定你在正确的目录中运行正确的命令吗？

# c - SDL 可以与纯 C 一起使用吗？

> ID：11221680
> 
> 赞同：-4
> 
> 时间：2012-06-27T07:52:53.877
> 
> 标签：c, sdl

如何设置 SDL 以在 C 中工作？我的意思是在纯 C 中没有类。我在 C 中看到很少使用 SDL 的项目，但是当我尝试设置或下载它时，只有 C++ 版本。您能否指导我如何在 Mac（Xcode）或 Windows 环境中安装 SDL for C？

编辑：我知道 SDL 是用 C 编写的，但它没有成为 C 库。第一个教程（以及我检查过的所有其他教程都大量使用类。第一个来自网站教程部分，在第二页使用类代码[。http://www.sdltutorials.com/sdl-tutorial-basics](http://www.sdltutorials.com/sdl-tutorial-basics)

LazyFoo 教程虽然很旧，但它们也使用 c++。

您能否将我链接到使用 C 的教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:56:12.650

SDL 是一个 C 库，所以是的，您可以将它与“纯 C”一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T07:57:06.270

SDL 是一个带有 C API（任何其他）的 C 库。网上有很多[demo 。](http://www.libsdl.org/demos.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T08:05:22.483

试试[这个教程](http://content.gpwiki.org/index.php/SDL%3aTutorials)- 在页面上的“常规”下查看[设置开发环境](http://content.gpwiki.org/index.php/SDL%3aTutorials%3aSetup)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:09:32.890

如果您对学习 SDL 感兴趣，但希望所有代码都包含在其中，`pure C`那么您只需将 LazyFoo 教程中的 C++ 概念转换为 C 等效项。回答您的问题：是的，您可以在不使用 C++ 的情况下使用 SDL 编写代码。但是，如果您正在查看其他人用 C++ 编写的代码并且想要使用 C，那么您将不得不做一些工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T09:19:28.610

你可以使用 Vala/Genie，它像 c 一样快，像 python 一样简单。见这里： [手册 de Genie-Valac](http://www.manualgenie.blogspot.com)！

# c# - Crystal Reports 将当前日期替换为空值

> ID：11221681
> 
> 赞同：1
> 
> 时间：2012-06-27T07:53:00.780
> 
> 标签：c#, .net, postgresql, crystal-reports

我在 Crystal Reports 中打印报表时遇到问题。报告中的数据取自 PostgreSQL 数据库。Crystal Reports 由 C# .net 4.0 Windows 窗体应用程序使用。我放置了 DateTime 字段的报告字段 - 在数据库中字段为 null(mostly) 。但是，如果我打印报告，水晶报告会改为空值当前日期，这是不正确的，因为该日期是与客户签订合同的时间。空值表示未完成。我怎样才能获得报告：如果字段为空，字段必须为空白？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:07:48.540

你说得对 - 在数据库中我有价值'-infinity'。我正在使用 NHibernate 对数据进行操作，当我保存新项目时，nhibernate 将该值放在未分配的位置。我必须解决这个问题。感谢您的帮助 - 这不是水晶的错

对于遇到同样问题的任何人。要解决我的 NHibernate 问题，您必须允许 DateTime 为空值。这很容易 - 您必须声明如下字段：DateTime？日期;

# node.js - 使用带有 socketio 的节点的问题

> ID：11221683
> 
> 赞同：0
> 
> 时间：2012-06-27T07:53:12.060
> 
> 标签：node.js, socket.io

我被困在使用带有套接字 IO 的 nodejs。

我使用的是windows机器，下载了Node可执行文件，正确设置了环境变量。

这样我就能够在命令下运行一个简单的节点服务器。

然后我使用 npm install socketio 即使我安装了 socketio（路径为 c:\Aakash\Users\nodemodules....）

现在，当我使用示例代码运行配备套接字的节点服务器时，它会在 socketio js 中引发错误，说“未定义第 1324 行的 indexOf”。

这个错误出现在我写的 server.js 中的行

`require("socket.io");`

可能是无法执行socket.io。

困惑：1）socketio文件在Users\nodemodules中的某个地方......它将如何在require语句中获取socketio？

2）同样在客户端我需要socket.io.js，也就是在那个Users..目录中，但是在这里我复制了socket.io.js并将它放在clientfile.html附近。

我在socketio的目录结构中做错了吗？客户端文件附近应该包含哪些文件？

我搜索了上述问题，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:11:46.307

首先

回答1：

1.创建你的项目文件夹（任何地方）

2.在cmd中导航你的项目主管

3.安装socket.io（npm install socket.io）

安装 socket.io 后，您将在项目文件夹中找到 node_module 目录。

回答2：

现在您的客户端将获取 socket.io 文件（只需包含 src='/socket.io/socket.io.js'）

你有没有用过这样的东西：

如果您使用`http`模块，那么

```
var app = require('http').createServer(handler)
  , 
io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(1324);

function handler (req, res) {
   // your handler
} 
```

我认为您应该使用[express](http://expressjs.com/)模块了解更多关于[socket.io的详细信息](http://socket.io/#how-to-use)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T08:20:04.633

如果您安装了一个全局模块（npm install module -g），然后您将尝试将其安装在项目的文件夹中（没有 -g），它将不会再次安装，因为它已经安装了。但是，如果没有全局安装它，您可以在多个文件夹中多次安装它。有关节点如何加载模块的更多信息，您可以阅读[此](http://nodejs.org/api/modules.html)内容和[此内容](http://www.bennadel.com/blog/2169-Where-Does-Node-js-And-Require-Look-For-Modules-.htm)

# visual-studio - 与服务器建立连接成功，但在登录过程中出现错误

> ID：11221685
> 
> 赞同：1
> 
> 时间：2012-06-27T07:53:19.670
> 
> 标签：visual-studio, sql-server-express

我收到前面的错误。我知道这个问题与此处回答的另一个问题重复。但我的问题与某些点不同。当我尝试从 Sql Management Studio 连接时，没有问题，但是从 Visual Studio.it 尝试时给我错误：

> 与服务器成功建立连接，但在登录过程中出现错误。

# jpa - JPA Criteria API 多集合连接

> ID：11221686
> 
> 赞同：0
> 
> 时间：2012-06-27T07:53:22.473
> 
> 标签：jpa

多个连接可以是一个条件吗？

```
final CriteriaBuilder builder = entityManager.getCriteriaBuilder();

CriteriaQuery<Game> query = builder.createQuery(Game.class);

final Root<Game> game = query.from(Game.class);
final ListJoin<Game, Store> store = game.join(Game_.stores);
final ListJoin<Game, Category> category = game.join(Game_.categories); 
```

即使没有谓词，第二个连接（类别）也会使结果不同。

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:02:35.463

默认情况下，连接是内部连接。所以查询只会选择至少有 1 个类别的游戏。使其成为左连接，它将选择所有游戏（即使是那些没有任何类别的游戏）。

# c# - 在 ASP.net/C# 中编写 PDF

> ID：11221701
> 
> 赞同：0
> 
> 时间：2012-06-27T07:54:20.770
> 
> 标签：c#, asp.net, pdf-generation

我需要一个好的库来用 C# 编写 PDF。

我需要的是放置图像标题，编写和格式化一些文本（有些行应该左对齐，有些会右对齐......选择字体等等）并将其导出为 pdf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:59:12.543

iTextSharp 功能非常齐全，但不再是 100% 免费，而且有一点学习曲线：

[http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:59:28.613

只需检查[iTextSharp](http://sourceforge.net/projects/itextsharp/)。似乎是一个不错的。

提供，

1.  将 PDF 提供给浏览器

2.  从 XML 文件或数据库生成动态文档

3.  使用 PDF 的许多交互功能

4.  添加书签、页码、水印等。

5.  拆分、连接和操作 PDF 页面

6.  自动填写 PDF 表单

7.  将数字签名添加到 PDF 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:19:44.243

虽然这不是一个库，但我的公司有一个名为 DocRaptor 的产品，它使用 HTTP POST 请求将 HTML 转换为 PDF。我们使用 Prince XML 生成 PDF，我们的服务生成的文档质量高于类似解决方案。

DocRaptor 按月订阅运行，我们提供免费计划，允许用户每月创建多达 5 个文档。

这是我们的 C# 编码示例的链接：

[使用 C# 将 HTML 转换为 PDF](http://docraptor.com/documentation/examples_csharp)

以及 DocRaptor 主页的链接：

[猛禽博士](http://docraptor.com)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T07:59:44.823

开源 PDF 库列表

[http://csharp-source.net/open-source/pdf-libraries](http://csharp-source.net/open-source/pdf-libraries)

# java - Java，将日期转换为字符串并返回产生错误的日 期

> ID：11221703
> 
> 赞同：3
> 
> 时间：2012-06-27T07:54:21.347
> 
> 标签：java, date-format, simpledateformat

我正在尝试将 a 转换`Date`为`String`然后再转换回`Date`. 但是我发现最终日期与原始日期不同，这是什么原因？

```
 //1975-06-20
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.YEAR, 1975);
    cal.set(Calendar.MONTH, 5);
    cal.set(Calendar.DAY_OF_MONTH, 20);
    cal.set(Calendar.HOUR, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    System.out.println(cal);

    Date originalDate = cal.getTime();
    System.out.println("Date 1: " + originalDate.toString());

    SimpleDateFormat sdf = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
    Date date = sdf.parse(originalDate.toString());
    System.out.println("Date 2: " + date.toString()); 
```

上述代码的输出是：

```
cal: java.util.GregorianCalendar[time=?,areFieldsSet=false,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Asia/Singapore",offset=28800000,dstSavings=0,useDaylight=false,transitions=9,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=1975,MONTH=5,WEEK_OF_YEAR=26,WEEK_OF_MONTH=5,DAY_OF_MONTH=20,DAY_OF_YEAR=179,DAY_OF_WEEK=4,DAY_OF_WEEK_IN_MONTH=4,AM_PM=1,HOUR=0,HOUR_OF_DAY=16,MINUTE=0,SECOND=0,MILLISECOND=333,ZONE_OFFSET=28800000,DST_OFFSET=0]
Date 1: Fri Jun 20 12:00:00 SGT 1975
Date 2: Fri Jun 20 11:30:00 SGT 1975 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T07:58:32.780

可能是因为 1982 年新加坡的时区变化（+ 30 分钟）。

[http://www.timeanddate.com/worldclock/timezone.html?n=236&syear=1980](http://www.timeanddate.com/worldclock/timezone.html?n=236&syear=1980)

SimpleDateFormat 在解析日期时将 SGT 视为 UTC+8，并将其转换为 UTC+7.5，即 1982 年之前的 SGT。因此日期相差 30 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:11:58.360

你确定你粘贴的代码正确吗？

> 日期日期 = DateFormat.format(originalDate.toString(), "EEE MMM dd HH:mm:ss zzz yyyy");

似乎有问题：据我所知，没有签名 Date DateFormat.format(String, String) 的方法

# c# - 如何获取单元格值作为excel表的货币

> ID：11221707
> 
> 赞同：1
> 
> 时间：2012-06-27T07:54:37.113
> 
> 标签：c#, excel, datagridview

我将列中的 excel 表之一设置为货币格式 $ 和小数位 2。比如 $0.00。

但是在 datagridview 中显示时，它显示为：0.0000。如果将货币设置为无，则显示 0.00。如果我添加 $ 符号。它显示了额外的数字值。

您能否帮助我如何仅在 Windows 应用程序中按原样显示（意思是：0.00 美元）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:01:45.527

您必须为您的货币数据网格字段提供格式。也就是说，为该列分配一个名为的属性`DataFormatString`和值`{0:c}`

有关其他信息：检查该链接[http://msdn.microsoft.com/en-us/library/aa479342.aspx](http://msdn.microsoft.com/en-us/library/aa479342.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:09:10.407

试试看

```
<asp:BoundField DataField="Money" DataFormatString="{0:c2}" HeaderText="Money"
                    SortExpression="Money" /> 
```

# dropbox - Dropbox Java SDK。如何隐藏应用程序公钥和密钥

> ID：11221708
> 
> 赞同：1
> 
> 时间：2012-06-27T07:54:39.453
> 
> 标签：dropbox, dropbox-api

这最初是在 Dropbox 开发者论坛上发布的，但没有得到任何回应，所以我在这里尝试 SO。

使用 dropbox java sdk 开发应用程序时，文档建议编写如下内容：

```
final static private String APP_KEY = "...";
final static private String APP_SECRET = "..."; 
```

即使在应用程序已经编译和/或仅通过查看类文件进行签名之后，找出这两个字符串是否相对容易？

换句话说，一旦我发布我的应用程序，密钥就不再是秘密了？

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:02:49.823

**我的猜测是 Dropbox 文档意味着如果您编写java 服务器代码**，则应该实现此代码。如果您部署 java 应用程序，您应该在允许客户端盲目访问 Dropbox 之前创建与您的服务器的身份验证。

# paypal - 没有交易ID的支付自适应支付returnurl

> ID：11221713
> 
> 赞同：2
> 
> 时间：2012-06-27T07:54:45.333
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

我是 paypal API 的新手，现在我正在尝试将 paypal 自适应支付与我的网站集成。

1.  我在贝宝沙箱中创建了测试业务贝宝帐户和用户帐户。
2.  我将自动回复和数据传输设置为开启。

一切正常，直到贝宝重定向到我的返回 url，但我没有将 tx(Trasaction ID) 作为 POST 或 GET 数据。

有人知道吗？非常感谢所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T08:43:20.963

使用 paypal 自适应支付 api，IPN 将附带一个支付密钥而不是交易 ID，因此请在您的代码中使用它。

这是格式为 JSON 的真实 IPN

```
{"payment_request_date":"Sun Jun 24 06:12:20 PDT 2012",
"return_url":"http://redacted/paypal/transactions/3?status=completed",
"fees_payer":"EACHRECEIVER",
"ipn_notification_url":"http://redacted/paypal/notifications",
"sender_email":"redacted",
"verify_sign":"AFcWxVredacted",
"test_ipn":"1",
"transaction[0].id_for_sender_txn":"redacted",
"transaction[0].receiver":"redacted",
"cancel_url":"http://redacted/paypal/transactions/3?status=canceled",
"transaction[0].is_primary_receiver":"false",
"pay_key":"AP-redacted",
"action_type":"PAY",
"transaction[0].id":"redacted",
"transaction[0].status":"Completed",
"transaction[0].paymentType":"SERVICE",
"transaction[0].status_for_sender_txn":"Completed",
"transaction[0].pending_reason":"NONE",
"transaction_type":"Adaptive Payment PAY",
"transaction[0].amount":"USD 1.00",
"status":"COMPLETED",
"log_default_shipping_address_in_transaction":"false",
"charset":"windows-1252",
"notify_version":"UNVERSIONED",
"reverse_all_parallel_payments_on_error":"true"} 
```

# android - 在不同的类中访问我的方法

> ID：11221719
> 
> 赞同：1
> 
> 时间：2012-06-27T07:55:02.733
> 
> 标签：android

我创建了一个类

```
public class FormActivity extends Activity 
{
    TextView tv =new TextView(this);
    GridLayout gl=new GridLayout(this);

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        paint();
    }

    public void paint()
    {
        tv.setText("In new File");
        gl=(GridLayout) findViewById(R.id.gl);
        gl.addView(tv);
    }
} 
```

我想`paint()`从不同的类（同一个包中的java文件）访问该方法。我试过这个：

```
public class FileSystemDemoActivity extends Activity 
{

    FormActivity f1=new FormActivity();
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        f1.paint();
    }
} 
```

但这不起作用。模拟器给出了不幸的停止错误。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:06:39.497

您得到的错误可能是因为`gl`为空。您无法访问 Activity 的视图，因为它尚未正确初始化。要从另一个活动开始并显示 FormActivity `startActivity()`，它`onCreate`会被调用并最终调用你的“paint”方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:39:29.730

```
sorry.i have not understood can you give an example? 
```

您不应该尝试访问其他 Activity 功能

1-您不应该尝试在您的活动中创建其他活动的实例。

2- findViewById(R.id.gl) 与当前活动布局链接，它将在编写活动代码的特定活动中搜索 id。

...

```
 public class FileSystemDemoActivity extends Activity 
        {
        FormActivity f1=new FormActivity();
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            f1.paint();
        }

            public void paint()
            {
                 tv.setText("In new File");
                 gl=(GridLayout) findViewById(R.id.gl);
                 gl.addView(tv);
            }

        } 
```

# backbone.js - Backbone 和 Strophe muc 插件：处理传入事件

> ID：11221725
> 
> 赞同：0
> 
> 时间：2012-06-27T07:55:32.067
> 
> 标签：backbone.js, xmpp, strophe

我收到了发送到房间的最后一条消息，这些消息也将显示在视图中，但是如果有新消息进入 Strophe 事件处理程序，则尽管我通过线路看到传入的消息节（连接上的 xmlInput），但不会触发。

这可能是什么原因？

连接后，我创建 MessageList 并注册 Strophe 处理程序：

```
 Messages = new MessageList();
 XMPPConnection.addHandler(Messages.onMessageReceived, null, "message", "groupchat");
 XMPPConnection.send($pres({to: "room@conference.server.local/user1"}).c("x", {xmlns: "http://jabber.org/protocol/muc"}));
 window.App = new AppView(); 
```

和 MVC：

```
// ----------------- Message Model  ----------------   
var Message = Backbone.Model.extend({
  body: "default message",

  initialize: function(body) {
      if (body) {
        this.set({body: body});
      }
  }      
});

// ----------------- Message Collection  ----------------   
var MessageList = Backbone.Collection.extend({
 model: Message,

 initialize: function(body) {       
 },

 onMessageReceived: function(body) {
     var message = new Message($(body).text());
     Messages.add(message);
     return true;
 }           
});

  // ---------------- Message View -------------------  
var MessageView = Backbone.View.extend({
  tagName: "li",

  template: _.template($("#message-template").html()),
  events: {},
  initialize: function() {
      this.model.bind("change", this.render, this);
   //   this.model.bind("remove", this.remove, this);
  },

  render: function() {
      this.$el.html(this.template(this.model.toJSON()));
      return this;    
  }        
});  

// ---------------- App View -------------------  
var AppView = Backbone.View.extend({
    el: $("#myapp"),

    initialize: function() {              
       Messages.bind("add", this.addOneMessage, this);
       this.main = $('#main');
    },

    addOneMessage: function(message) {
        var view = new MessageView({model: message});
        this.$("#message-list").append(view.render().el);
    },
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:46:24.513

有一些事情会出错，这里有一些提示：

你的`Message`模型应该写成：

```
var Message = Backbone.Model.extend({
  defaults: {
      body: "default message",
  }
}); 
```

不需要初始化，如果您传递属性，它们将被分配。

您的收藏：

```
var MessageList = Backbone.Collection.extend({
    model: Message,
}); 
```

我还将 onMessageReceived 放在 MessageList 之外：

```
 var onMessageReceived = function(body) {
     Messages.add({body: $(body).text()});
     return true;
 } 
```

您的 MessageView 可以更简单，MUC 消息不会改变，它们只是被添加：

```
var MessageView = Backbone.View.extend({
  tagName: "li",

  template: _.template($("#message-template").html()),
  render: function() {
      this.$el.html(this.template(this.model.toJSON()));
      return this;    
  }        
}); 
```

希望这能给你足够的继续......

# mysql - 选择左连接两个表，其中今天在第二个表中的两个日期时间列之间

> ID：11221727
> 
> 赞同：0
> 
> 时间：2012-06-27T07:55:35.760
> 
> 标签：mysql

**编辑**为了进一步简化这一点。

我们来看看这个结构：

> 表 1：idProduct (int) | 名称（varchar）
> 
> 表 2：idDay (int) | idProduct (int) | 日期开始（日期时间） | date_end（日期时间）

idProduct 是两个表中的公共列。表二包含与此类似的数据：

```
0, 2, 11/22/2012, 11/22/2012
1, 2, 11/23/2012, 11/23/2012
2, 2, 11/24/2012, 11/24/2012
3, 2, 00/00/0000, 11/25/2012
4, 2, 11/25/2012, 00/00/0000 
```

请注意，date_start、date_end 或两者都可能全为零，在这种情况下，此上限或下限被视为不受限制/不受限制。

在上述情况下，我只想选择 ID 为 2 的 idProduct，前提是今天的日期介于时间段之间 - date_start 中的最早日期和 date_end 中的最晚日期。如果 date_start 是 00/00/0000 总是返回产品但是如果 date_end 在未来。相反适用于 date_end 全为零并且 date_start 被设置。如果两列都为零，则返回产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:12:50.960

我在您的问题中没有看到“LEFT JOIN”要求：就在您的标题中。所以

```
SELECT t1.idProduct, t1.Name
FROM table1 t1
INNER JOIN table2 t2 ON t1.idProduct = t2.idProduct
WHERE DATE(t2.date_start) < DATE(NOW())--this will also take values with DATETIME = 0000
AND (DATE(t2.date_end) > DATE(NOW()) OR YEAR(t2.date_end) = 0)
GROUP BY t1.idProduct, t1.Name 
```

或者如果您想检查产品是否至少有一个 start_date 小于今天（或 0）和至少一个 end_date 大于今天（或 0），即使 start_date 和 end_date 不共享相同的 idDay ：

```
SELECT t1.idProduct, t1.Name
FROM table1 t1
WHERE t1.idProduct IN
    (SELECT t2.IdProduct
    FROM table t2
    GROUP BY t2.IdProduct
    HAVING 
    MIN(t2.date_start) <= DATE(NOW()) AND 
    (MAX(t2.date_end) >= DATE(NOW()) OR YEAR(MAX(t2.date_end)) = 0)) 
```

这将需要：

最小开始日期 = 0 和最大结束日期 = 0

min start_date = 0 和 max end_date >= 今天

min start_date <= 今天和 max end_date =0

min start_date <= 今天和 max end_date >= 今天

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:10:14.300

```
select
  t1.idproduct,
  t1.name
from table as t1
  left join table2 as t2
    on t1.idproduct = t2.idproduct
where date(date_start) < date(now())
    and date(date_end) > date(now()) 
```

已编辑

```
select
  t1.idproduct,
  t2.idproduct,
  t2.name
from table as t1
  left join (select
               max(idproduct),
               name
             from table2
             where date(date_start) < date(now())
                 and date(date_end) > date(now())) as t2
    on t1.idproduct = t2.idproduct 
```

当然，它不会选择结束日期为 00:00:00 的那些记录

# python - 与独立 Python 脚本相比，为什么 Jython 需要更多执行时间

> ID：11221728
> 
> 赞同：3
> 
> 时间：2012-06-27T07:55:39.940
> 
> 标签：python, performance, python-2.7, jython

我对 Python/Jython 非常陌生，刚开始 4 周。与独立的相同 python 脚本相比，jython 脚本的执行时间要多 14 倍。根据我的项目要求，我们需要将 python/Jython 脚本与 Java 应用程序集成. 根据 Jython 文档，我创建了 JythonFacory 类来调用 jython 脚本并获得脚本结果。但是当我看到执行时间（59 秒）时，这是一个很大的性能问题。当我在 Eclipse 中运行相同的独立 python 脚本时，它非常快（大约 3 秒）。

您能否建议我应该怎么做才能获得更好的性能。由于性能问题，看起来 Jython 对我来说不是一个好选择。是否有任何其他选项可以直接从 java 调用纯 Python 脚本而不使用 Jython.jar

```
public class JythonFactory {

private static JythonFactory instance = null;

public synchronized static JythonFactory getInstance() {

    if(instance == null){

        instance = new JythonFactory();

    }

    return instance;

}

public static Object getJythonObject(String interfaceName,Map<String, Object> 

    requestTable, String pathToJythonModule) {

   Object javaInt = null;
   PythonInterpreter interpreter = new PythonInterpreter();
   interpreter.set("REQUEST_TABLE", requestTable);

   interpreter.execfile(pathToJythonModule);

   String tempName = pathToJythonModule.substring(pathToJythonModule.lastIndexOf("/")+1);
   tempName = tempName.substring(0, tempName.indexOf("."));
   //System.out.println(tempName);
   String instanceName = tempName.toLowerCase();
   String javaClassName = tempName.substring(0,1).toUpperCase() + tempName.substring(1);
   String objectDef = "=" + javaClassName + "()";
   //System.out.println("instanceName"+instanceName + " objectDef"+objectDef);
   interpreter.exec(instanceName + objectDef);
   try {
       Class JavaInterface = Class.forName(interfaceName);
       javaInt = interpreter.get(instanceName).__tojava__(JavaInterface);
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();  
    }

   return javaInt;
   }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:34:49.233

好吧，我认为这些结果是意料之中的...... Jython 正在解释 Java 之上的 Python 代码，我认为它目前没有被优化为使用 Java 7 上可用的更快的方法调度（invokeDynamic）：参见：[https： //us.pycon.org/2012/schedule/presentation/446/](https://us.pycon.org/2012/schedule/presentation/446/)（即使这样，也不清楚它是否会比 CPython 更快）。

尽管如此，如果您针对 Java 进行分析和调整，您的程序可能会获得更好的性能（即：可能优化将这些热点转换为 Java 的所需热点——在 CPython 上也是如此，您可能会将其转换为 C /C++）。

您可以尝试在 Java 中使用 CPython（请参阅：http: [//jepp.sourceforge.net/](http://jepp.sourceforge.net/)）或直接调用 Python 可执行文件...（不确定您的要求）。

# ruby - 将整数添加到 ruby 中的数组中的值

> ID：11221729
> 
> 赞同：0
> 
> 时间：2012-06-27T07:55:45.620
> 
> 标签：ruby, arrays

这是我的数组

```
arr = [1,2,3,4,5,6,7,8] 
```

我想在 ruby​​ 中编写一个方法，将 5 添加到数组中的每个值。我该怎么做？

请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:57:59.193

你可以`Array#map`这样使用：

```
arr = [1,2,3,4,5,6,7,8]
arr.map {|n| n+5 } 
```

请参阅[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)。

**编辑：** `map`将返回一个新数组，如果你想修改这个数组，`map!`即使我不推荐它也可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:01:06.597

请参阅[Ruby API 文档了解`Array`](http://ruby-doc.org/core-1.9.3/Array.html)

```
arr.map! {|i| i+5} 
```

# rubymotion - RubyMotion：如何在控制台中调用函数？

> ID：11221731
> 
> 赞同：2
> 
> 时间：2012-06-27T07:55:50.193
> 
> 标签：rubymotion

我有两个控制器 - 如何从控制台调用其中的函数？

`(main)>`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T23:52:43.887

我能弄清楚如何做到这一点的唯一方法是使用 UIApplication sharedApplication 类方法并从那里向下钻取，这很恶心。

```
(main)> UIApplication.sharedApplication.delegate
=> #<AppDelegate:0x6c8a800 @window=#<UIWindow:0x6e71280>> 
```

不幸的是，要访问该窗口，我必须在`attr_reader :window`我的 AppDelegate 类中添加一个来访问这个私有变量，然后进一步深入了解视图控制器：

```
(main)> vc = UIApplication.sharedApplication.delegate.window.rootViewController
=> #<TouchesViewController:0x8c747c0> 
```

现在您应该能够调用该视图控制器上的任何公共方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T17:39:57.293

我通常在视图控制器中添加一个临时全局变量，以便更容易从控制台访问它。

```
def viewDidLoad
  $temp_view = self
end 
```

它不漂亮，但可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:52:48.303

大多数时候都有`UIViewController`-s的层次结构，你可以利用它们。从`UIWindow#rootViewController`实例开始，并在`childViewControllers`. 我建议使用`BubbleWrap`访问窗口 ( `App.window`) 或委托 ( `App.delegate`)。我维护的`SugarCube`gem 也提供了一种查看视图或 viewController 层次结构的简单方法 - REPL 中的`tree`和`tree root`命令可用于此目的。

# itextsharp - 从 HTML 代码制作 pdf 时如何隐藏样式为“display:none”的元素？

> ID：11221734
> 
> 赞同：0
> 
> 时间：2012-06-27T07:56:02.250
> 
> 标签：itextsharp

我从 URL 获取响应并尝试从响应中创建 pdf。我正在使用 iTextSharp。URL 的 HTML 中有一些图像的样式定义为 style="display:none"。在 pdf 中，这些图像是可见的。如何使它们不可见。

我尝试用“可见性：隐藏”替换“显示：无”。但这没有用。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:57:14.293

尝试将`width`and设置`height`为`0px`

您可以使用 CSS 媒体类型来执行此操作，仅用于打印

```
@media print {
   /* styles for printing */
} 
```

# php - 如何解决这个示例需要一个 Mysql 数据库。请编辑配置文件：application.config.php?

> ID：11221744
> 
> 赞同：0
> 
> 时间：2012-06-27T07:56:56.923
> 
> 标签：php, hybridauth

我正在使用 hybridauth 从社交网站（如 facebook、twitter 等）获取用户信息。[PHP lib 连接](http://hybridauth.sourceforge.net/) 我使用 install.php 配置，它在 lib 本身中可用。

当我尝试使用一些可用的示例时，我得到以下错误`This sample requires a Mysql database. Please edit the configuration file: application.config.php`

我真的不知道这个文件在哪里`application.config.php`可用。

我也明白了`got an error! Hybridauth Library needs the CURL PHP extension.`

因为我对 PHP 很陌生，闪烁着下一步该做什么。

请帮我解决这个问题。

问候托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:21:44.040

首先，你需要 php-curl.. 大多数 repo 的 php 安装都包含这个，所以很奇怪你没有得到它。您已经指定了您正在使用的操作系统，但是快速的谷歌搜索将为您提供安装说明。如果您正在使用基于 RHEL 的系统，请执行以下操作；

```
yum install php-common
yum install php-curl 
```

前者安装所有php常用包，后者专门安装curl。

同样，您需要找到 application.config.php 的位置——同样，在基于 RHEL 的系统上，您可以运行；

```
find -name application.config.php 
```

- 否则，请了解如何在您当前正在使用的操作系统上进行系统搜索。看起来这只是一个标准问题，您尚未定义您的 mysql 信息（数据库名称、用户名、密码）；一旦你将这些输入到你的 application.config.php 中，你应该很高兴。

祝你好运。

*   伊根

# android - 如何防止屏幕自动旋转但防止活动旋转

> ID：11221745
> 
> 赞同：2
> 
> 时间：2012-06-27T07:57:00.300
> 
> 标签：android, android-activity, accelerometer, autorotate

无论如何，这听起来可能是一个新手问题，我是 Android 开发的新手。

基本上我需要做的是防止活动改变它的旋转，但同时我需要检测设备方向的变化，即设备方向是否从顶部更改为底部，或从顶部更改为左纵向等。

在 iOS 中有一个类似物`- (BOOL)shouldAutorotateToInterfaceOrientation`，您可以在其中处理设备方向更改并告诉视图是否要自动旋转。请注意，加速度计数据没有任何手动数据处理。

所以基本上我想检测 DEVICE 的方向变化并防止 Activity 旋转。我还在使用来自传感器的数据来检测抖动。但在内部，Android 会对信号进行一些过滤，以决定何时旋转 UI。所以基本上我需要赶上那个事件。任何人都可以帮忙吗？

* * *

我的问题的简单表述：**我需要在不手动播放传感器数据的情况下检测 android 设备方向的变化，同时保持活动方向坚持某个方向**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:11:03.970

如果您想将一个方向固定为横向，这就是您需要做的事情，进入 AndroidManifest 并在您的活动中

```
<activity
    android:label="@string/app_name"
    android:name=".LoginScreen" 
    android:screenOrientation="landscape"
    android:configChanges="keyboardHidden|orientation">
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

添加这个...如果它的肖像然后将其更改为 android:screenOrientation="portrait"

对于运动，请参阅@thepoosh 链接，即 [http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:02:27.297

您正在寻找的是 XML`android:screenOrientation="portrait"`并使用传感器来查找手机的位置。

[安卓方向。](http://developer.android.com/guide/topics/manifest/activity-element.html)

[加速度计。](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T07:20:04.007

想办法解决。

[http://android-er.blogspot.in/2010/08/orientationeventlistener-detect.html](http://android-er.blogspot.in/2010/08/orientationeventlistener-detect.html)

# wordpress - 如何使导航成为 list without a plugin? I have tried several solution for this, but none of them worked. I managed to make the nav list into <select><option>list, but without only with names of the pages, without any indication of their URL A ID：11221752 赞同：0 时间：2012-06-27T07:57:22.110 标签：wordpress, navigation, wordpress-theming 回答 #1 赞同：0 时间：2012-06-27T15:01:55.927 您可以尝试使用get_pages( $args )函数来获取页面列表及其各自的链接。然后使用@Spencer Hoffman 列出的 jQuery 应该可以得到我相信你正在寻找的东西。 http://codex.wordpress.org/Function_Reference/get_pages#Displaying_pages_in_dropdown_list 该示例应该是完美的示例（除了内联 javascript）。 回答 #2 赞同：0 时间：2012-06-27T08:35:36.160 如果您还没有自定义脚本加载器，请在主题的 functions.php 中添加如下内容： function addScripts() { if ( !is_admin() ) { wp_register_script('navScript', get_template_directory_uri() . "/js/navScript.js")); wp_enqueue_script('navScript'); } } add_action( 'wp_print_scripts', 'addScripts'); 在您的 WordPress 仪表板中，转到外观->我的自定义小部件，创建一个新小部件（给它一个名称，选择 HTML 作为类型），然后添加您的版本（省略 div，因为您可以包含/样式你的喜好）： <form> <select id="superNav"> <option value="">Choose a destination...</option> <option value="http://www.yahoo.com/">YAHOO</option> <option value="http://www.google.com/">GOOGLE</option> <option value="http://www.amazon.com/">AMAZON</option> </select> </form> 然后，在外观->小部件下，将新的自定义小部件添加到您想要的任何位置。 在 navScript.js 中（在适当的模板 JS 目录中，如上所示），您可以添加类似于以下代码的代码。我正在使用 jQuery 执行此操作，但使用 addEventListener() 可以轻松地为纯 JavaScript 重新设计： $(document).ready(function() { $('#superNav').change(function() { var curUrl = $("option:selected", this).val(); if (curUrl) { window.open(curUrl, '_top') } });</option></select>

# php - 处理在 JavaScript 中动态生成的输入文本数组

> ID：11221756
> 
> 赞同：0
> 
> 时间：2012-06-27T07:57:47.007
> 
> 标签：php, javascript, html, forms

我想以动态生成输入文本的形式获取客户的电话号码。我做了这个

```
<HTML>
<HEAD>
<TITLE> get telephones </TITLE>

<SCRIPT language="javascript">
function add(type) {

//Create an input text dynamically.

    if(typeof add.counter=='undefined')
    {
        add.counter=0;
    }
    add.counter++;
    var element = document.createElement("input");

    //Assign different attributes to the element.
    element.setAttribute("type", type);
    element.setAttribute("value", "");
    element.setAttribute("name", type.concat(add.counter));

    var foo = document.getElementById("fooBar");

    //Append the element in page (in span).
    foo.appendChild(element);
    return add.counter;

  }
</SCRIPT>
</HEAD>
<BODY>
<FORM action="test1.php" method="post">
 //here I think there is a problem
<INPUT type="button" value="Add" onclick="<?php echo "add('text')";?>"/>
<INPUT type="submit" value="Add" />
<span id="fooBar">&nbsp;</span>

</FORM>
</BODY>
</HTML> 
```

我想获取输入文本名称的数组，或计数器的最后一个值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:16:18.843

这里回答

```
 <INPUT type="button" value="Add" onclick="add('text')"/>
 <INPUT type="button" value="allPhoneNumbers" onclick="allPhoneNumbers()"/>
<script type="javascript">
  function add(type) 
  {
  if(typeof add.counter=='undefined')
 {
    add.counter=0;
 }
 add.counter++;
 var element = document.createElement("input");

 //Assign different attributes to the element.
 element.setAttribute("type", type);
 element.setAttribute("value", "");
 element.setAttribute("id", type.concat(add.counter));
 element.setAttribute("name", 'phonenumbers[]');

 var foo = document.getElementById("fooBar");

 //Append the element in page (in span).
 foo.appendChild(element);
 return add.counter;
}
 function allPhoneNumbers()
 {
var phonenumbers=document.getElementsByName('phonenumbers[]');

    for(var i=0;i<phonenumbers.length;i++)
    {
        alert(phonenumbers[i].value);
    }     }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:13:47.740

如果您将输入名称设置为“whatever[]”，那么 PHP 将自动从输入数据创建数组，因此您只需更改

```
element.setAttribute("name", type.concat(add.counter));
// to
element.setAttribute("name", "thename[]"); 
```

而且你真的不想重用元素类型的名称 - 这是两个非常不同的东西，想出更好的东西

扔掉所有反面的东西

# http - 为什么 Chrome 会以新窗口为目标自动关闭指向我网站的链接？

> ID：11221761
> 
> 赞同：5
> 
> 时间：2012-06-27T07:58:10.253
> 
> 标签：http, google-chrome, redirect, https

我对此感到非常困惑，所以如果有人能提供线索，我将不胜感激。

这是我的网站（内置 Rails）： http: [//floating-autumn-3174.herokuapp.com/](http://floating-autumn-3174.herokuapp.com/)

当有人试图通过 Facebook 或 Twitter 上的链接访问该网站时，基本上会加载一个新标签，但随后会立即关闭。这只发生在 Chrome 中。在 Firefox 中运行良好。

如果我右键单击该链接，然后选择“在新选项卡中打开”它加载正常。

如果我右键单击并复制链接，它就可以正常工作。

我认为这可能与 SSL 重定向有关，但我用我的登台环境（无 SSL）进行了测试，它工作得很好。

所以基本上这种自动关闭只发生在 Chrome 中，并且在单击加载新标签的链接时发生。

任何线索发生了什么或如何更好地解决这个问题？

**编辑**

好的，在进一步研究了我们包含的 javascripts 之后，我相信我已经找到了问题所在。它涉及我们用来处理弹出窗口的一些 JS。首先让我解释一下我们要做什么。我们通过 Facebook 进行身份验证。当用户单击“通过 Facebook 登录”时，会弹出一个弹出窗口并进行身份验证。成功后，弹出窗口关闭，主窗口刷新为登录状态。这一切都很好，但我意识到弹出关闭代码正在杀死所有其他新窗口。下面是完整的代码片段：

```
function popupCenter(url, width, height, name) {
 var left = (screen.width/2)-(width/2);
 var top = (screen.height/2)-(height/2);
 return window.open(url, name,     "menubar=no,toolbar=no,status=no,width="+width+",height="+height+",toolbar=no,left="+left+",top="+top);
}

$(document).ready(function(){
$("a.popup").click(function(e) {
popupCenter($(this).attr("href"), $(this).attr("data-width"), $(this).attr("data-height"), "authPopup");
e.stopPropagation(); return false;
});

if(window.opener) {
 window.opener.location.reload(true);
 window.close()
}
}); 
```

最后一个 if 语句是我认为导致问题的原因。我是一个严肃的 JS 菜鸟，所以我不知道如何解决这个问题。基本上，如果链接用于弹出窗口，我只希望触发最后一个条件。我怎么能这样做呢？再次感谢所有帮助。

**编辑 2**

我在下面继续 Rob 的回答，并认为它正在工作，但实际上遇到了一个我希望得到帮助的边缘案例。显然，当用户第一次通过 Facebook 身份验证时，window.name 不再是“authPopup”。我认为那是因为弹出窗口实际上经历了多个步骤，并以请求权限的屏幕结束。在这种情况下，弹出窗口不会关闭。在任何后续登录时，弹出窗口都会关闭，因为它不需要完成所有步骤并且“authPopup”条件保持为真。我怎么能处理这个？

**编辑 3**

我已经找到了一个我认为可行的解决方案。根据 Rob 的建议，我首先查看了 Facebook auth 屏幕的窗口名称，但发现它每次都会更改并且不容易预测。所以我决定走全局变量路线。这是我正在使用的最终代码，以防其他人发现它有用。

```
function popupCenter(url, width, height, name) {
 var left = (screen.width/2)-(width/2);
 var top = (screen.height/2)-(height/2);
 popupValue = "on";
 return window.open(url, name, "menubar=no,toolbar=no,status=no,width="+width+",height="+height+",toolbar=no,left="+left+",top="+top     );
}

$(document).ready(function(){
$("a.popup").click(function(e) {
popupCenter($(this).attr("href"), $(this).attr("data-width"), $(this).attr("data-height"), "authPopup");
e.stopPropagation(); return false;
});

if(window.opener && window.opener.popupValue === 'on') {
 delete window.opener.popupValue;
 window.opener.location.reload(true);
 window.close()
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:02:11.937

只需检查[`window.name`](https://developer.mozilla.org/en/DOM/window.name)属性的值：

```
if (window.opener && window.name === 'authPopup') {
    window.opener.location.reload();
    window.close();
} 
```

此外，您还可以验证打开器的 URL，以便其他网站在名为“authPopup”的窗口中打开您的网站时不会刷新。由于页面在同一个域中，您还可以在原始窗口中设置一个变量，以便在用户导航离开时页面不会刷新到另一个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:59:28.047

附加到页面的 jQuery 副本存在一个神秘问题`line 23`：

```
 <script src="/assets/application-21790dbf22ce0f60b3dc6f16af392f76.js" type="text/javascript"></script> 
```

[使用来自jquery.com](http://docs.jquery.com/Downloading_jQuery)的当前版本的 jQuery 替换此文件的内容可解决此问题，或者您可以使用 CDN 托管副本：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

使用下载的页面副本测试此修复。

胭脂 jQuery 脚本被缩小了，因此几乎不可能/真的很愚蠢地弄清楚它到底有什么问题......我看到的主要区别是损坏的副本包含`window.close()`而当前的 jQuery 副本不包含。可能是一个损坏的插件。

**编辑：**

进一步检查，这解决了问题，但揭示了另一个问题：**在滑块中更改页面会关闭打开的选项卡。**您是否将远程内容拉入轮播元素？我现在也懵了！

# joomla - Virtuemart 丢失类别绕过 shop.browse

> ID：11221763
> 
> 赞同：1
> 
> 时间：2012-06-27T07:58:15.837
> 
> 标签：joomla, virtuemart

我不敢相信，以前没有人遇到过我的问题。使用 joomla 1.5 和 VM 1.1.9。我想要一个直接链接产品的个人菜单（jquery）（只是一个投资组合/目录）。但是如果我不关注 shop.browse 页面，我会丢失类别 ID，并且我无法前进和后退到其他元素。谢谢特鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:23:06.713

一个产品可以属于多个类别，因此您必须指定所需的 category_id。一旦 VM 在查询字符串中找到它，它就可以按照您期望的方式导航该类别。它在 shop_browse 中正常工作，因为 VM 包含它为产品找到的第一个 category_id。

# rrdtool - RRDtool 在导出数据时强制使用 step 参数

> ID：11221766
> 
> 赞同：0
> 
> 时间：2012-06-27T07:58:33.430
> 
> 标签：rrdtool, collectd

我正在使用 javascript 库来可视化 rrdtool 数据并使用 rrdtool xport 从 rrd 文件中检索数据。

今天我注意到以下情况：查看now-1day的数据时：数据点为100
，但是查看now-31day的数据时，无处可见100的数据点...

使用 xport 时，如何确保在指定时间内获得所有数据点？
我正在使用--step 10，但它没有任何区别。无论我设置什么--step，它都不会被使用。我读到这是因为如果它小于 1 像素就会被忽略，那么这个问题的建议解决方案是什么？

附加信息：
我正在使用带有默认 RRDtool 插件选项的 Collectdtool：[http ://collectd.org/documentation/manpages/collectd.conf.5.shtml#plugin_rrdtool](http://collectd.org/documentation/manpages/collectd.conf.5.shtml#plugin_rrdtool)

编辑：似乎RRDtool的本质是一个月、一天、一年等有多个档案，所以我不能在一个月内获得档案的每个数据点是有道理的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:20:32.120

数据点的数量还取决于可用数据......因此，如果您的高分辨率 RRA 仅涵盖 30 天（例如），您将在请求超过 30 天的数据后从较低分辨率的 RRA 获取数据。

# android - 以编程方式创建的 RelativeLayout 中的 Webview

> ID：11221777
> 
> 赞同：5
> 
> 时间：2012-06-27T07:59:21.080
> 
> 标签：android, android-layout, android-webview

我需要在代码中创建以下 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical" android:gravity="right"
            android:layout_width="wrap_content" android:layout_height="wrap_content" android:background="#00000000"
            >
            <android.webkit.WebView android:layout_width="fill_parent"
            android:id="@+id/adview"
            android:scrollbars="none"
            android:layout_height="50dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentBottom="true"
            ></android.webkit.WebView>
            <Button android:layout_width="wrap_content" android:text="x" android:textColor="#000000" 
            android:layout_height="wrap_content" android:id="@+id/hide_popup_button" android:background="#00000000" 
            android:layout_alignTop="@+id/adview" android:layout_alignParentRight="true"></Button>

        </RelativeLayout> 
```

我使用下面的代码，但我得到`Force close`：

```
RelativeLayout popwindow=new RelativeLayout(this);

        RelativeLayout.LayoutParams rl= new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 50);
        popwindow.setLayoutParams(rl);
        WebView w= new WebView(this);
        w.setId(0X100);
        w.setScrollContainer(false);
        android.widget.RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)w.getLayoutParams();
        params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
        Button b=new Button(this);
        b.setId(0X101);
        b.setText("X");
        b.setBackgroundColor(Color.TRANSPARENT);
        b.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        android.widget.RelativeLayout.LayoutParams paramsbut = (RelativeLayout.LayoutParams)b.getLayoutParams();
        paramsbut.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        paramsbut.addRule(RelativeLayout.ALIGN_TOP,w.getId() );
        popwindow.addView(w,params);
        popwindow.addView(b,paramsbut);
        setContentView(popwindow); 
```

我需要有关如何通过 java 代码制作该 xml 布局的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:08:38.457

您应该发布您在问题中遇到的任何异常。看看这是否有帮助：

```
 RelativeLayout popwindow=new RelativeLayout(this);
    FrameLayout.LayoutParams rl= new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, 50);
    popwindow.setLayoutParams(rl);
    WebView w= new WebView(this);
    w.setId(0X100);
    w.setScrollContainer(false);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, 50);
    params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    w.setLayoutParams(params);
    Button b=new Button(this);
    b.setId(0X101);
    b.setText("X");
    b.setBackgroundColor(Color.TRANSPARENT);
    RelativeLayout.LayoutParams bparams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, ReloativeLayout.LayoutParams.WRAP_CONTENT);
    bparams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    bparams.addRule(RelativeLayout.ALIGN_TOP, w.getId());
    b.setLayoutParams(bparams);        
    popwindow.addView(w);
    popwindow.addView(b);
    setContentView(popwindow); 
```

`WebView`包含和 的自定义组件`Button`：

```
public class CustomRelativeLayout extends RelativeLayout {

        private WebView mWebView;
        private Button mButton;

        public CustomRelativeLayout(Context context) {
            super(context);
            mWebView = new WebView(context);
            mWebView.setId(0X100);
            mWebView.setScrollContainer(false);
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.FILL_PARENT, 50);
            params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
            mWebView.setLayoutParams(params);
            mButton = new Button(context);
            mButton.setId(0X101);
            mButton.setText("X");
            mButton.setBackgroundColor(Color.TRANSPARENT);
            RelativeLayout.LayoutParams bparams = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            bparams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            bparams.addRule(RelativeLayout.ALIGN_TOP, mWebView.getId());
            mButton.setLayoutParams(bparams);
            addView(mWebView);
            addView(mButton);
        }

        public WebView getTheWebView() {
            return mWebView;
        }

        public Button getTheButton() {
            return mButton;
        }

    } 
```

要使用该组件：

```
CustomRelativeLayout popWindow = new CustomRelativeLayout(this);
    FrameLayout.LayoutParams rl= new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, 50);
setContentView(popWindow);
// get a reference to the WebView and the Button
WebView w = popWindow.getTheWebView();
Button b = popWindow.getTheButton(); 
```

# javascript - 几次点击后jquery动画消失

> ID：11221779
> 
> 赞同：0
> 
> 时间：2012-06-27T07:59:30.607
> 
> 标签：javascript, jquery

我正在做淡入淡入的jquery小动画以进行表单验证

这工作得很好，但在几次点击后，div 不透明度变为最低，直到它完全消失

这是我的淡入代码

```
$("#edit-username check").addClass("right").css("display","none").stop().fadeIn(); 
```

在这里我做了什么来隐藏这个类效果

```
$("#edit-username #check").removeClass("right"); 
```

这是我的代码的 jsfiddle（问题出现在选项卡上点击几次） [http://jsfiddle.net/77BbA/20/](http://jsfiddle.net/77BbA/20/) 提前非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:50:42.167

为什么要添加额外的课程？试试这个来显示标签：

`$("#edit-username #check").hide().stop().fadeIn();`

这要隐藏：

`$("#edit-username #check").hide();`

另外你忘记了`#`前面的第一个`#check`。您还可以使用`.animate`更灵活的动画

# jquery - jquery克隆表单元素并将其插入表单中

> ID：11221788
> 
> 赞同：2
> 
> 时间：2012-06-27T08:00:05.333
> 
> 标签：jquery, forms, insert, clone

嗨，我的问题是这个[http://jsfiddle.net/VZ2MK/1/](http://jsfiddle.net/VZ2MK/1/)

```
(function(){

    var input = $('.test').clone();

    $('a.add_input').on('click', function(e){

        $(this).before(input);

        e.preventDefault();

    });

})(); 
```

我需要动态添加表单的某些部分，我想我会克隆它然后添加它。它第一次工作，但如果我想添加不止一次，它会停止，我的意思是它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T08:07:33.427

您应该通过每次单击来克隆它。[演示](http://jsfiddle.net/VZ2MK/10/)。_

```
var input = $('.test');

$('a.add_input').on('click', function(e){
    $(this).before(input.clone());

    e.preventDefault();

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T08:08:24.207

问题在于`before`，在将元素插入到所选元素之前，它会从当前位置分离元素。您需要每次都进行克隆，而不是一次：

```
(function(){
    $('a.add_input').on('click', function(e){
        var input = $('.test').last().clone();    

        $(this).before(input);

        e.preventDefault();
    });
})(); 
```

您的原始代码第一次插入了克隆，但在随后的情况下将其删除，然后将其重新添加到完全相同的位置。

请注意，我只是克隆项目以避免`last`第`$('.test')`一次添加 1，第二次添加 2，第三次添加 4，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:08:12.560

克隆每次点击都有效：

```
(function(){
    $('a.add_input').on('click', function(e){
var input = $('.test').clone();
        $(this).before(input);

        e.preventDefault();

    });  
})(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-27T08:06:15.703

这应该有效：

[http://jsfiddle.net/VZ2MK/4/](http://jsfiddle.net/VZ2MK/4/)

但是我没用`clone()`

```
 (function(){
     input = $('.test').html();   
     $('a.add_input').click(function(e){   
         $(this).before('<div>' + input + '</div>');       
         e.preventDefault();      
     });   
 })(); 
```

# c# - 从 C# 应用程序的 Powershell 脚本访问共享点

> ID：11221791
> 
> 赞同：1
> 
> 时间：2012-06-27T08:00:11.947
> 
> 标签：c#, sharepoint, c#-4.0, powershell, sharepoint-2010

您好，我正在尝试从 powershell 访问共享点列表。powershell 脚本从 ac# 应用程序执行。

如果我从 c# 应用程序运行，我会得到以下异常：

> 使用“1”参数调用“.ctor”的异常：“`http://pc/websites/Test4/`找不到 Web 应用程序。验证您输入的 URL 是否正确。如果 URL 应为现有内容提供服务，系统管理员可能需要添加映射到预期应用程序的新请求 URL。”

**我的代码：**

**C＃**

```
 string cmdArg = "C:\\Scripts\\GroupChangeGroup.ps1 1";
                    Runspace runspace = RunspaceFactory.CreateRunspace();
                    runspace.ApartmentState = System.Threading.ApartmentState.STA;
                    runspace.ThreadOptions = PSThreadOptions.UseCurrentThread;
                        runspace.Open();
                    Pipeline pipeline = runspace.CreatePipeline();

 Command newcom = new Command("Add-PSSnapin");
                      newcom.Parameters.Add("Name", "microsoft.exchange.management.powershell.e2010");
                      pipeline.Commands.Add(newcom);

                  Command newcom2 = new Command("Add-PSSnapin");
                  newcom2.Parameters.Add("Name", "Microsoft.SharePOint.POwershell");
                  pipeline.Commands.Add(newcom2);

                    pipeline.Commands.AddScript(cmdArg);
                    pipeline.Commands[0].MergeMyResults(PipelineResultTypes.Error, PipelineResultTypes.Output);
                    Collection<PSObject> results = pipeline.Invoke();
                    var error = pipeline.Error.ReadToEnd();
                    runspace.Close(); 
```

**电源外壳**

```
$site = New-Object Microsoft.SharePoint.SPSite("http://pc/websites/Test4/")
$web = $site.OpenWeb()
$list = $web.Lists["GroupsList - ListInstance1"]
$listitem = $list.Items.GetItemByID(3) 
```

如果我从 PS 执行应用程序就没有问题。（相同的用户上下文）

用户是会员`WSS_ADMIN_WPG`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:20:50.720

SharePoint 不适用于 .Net 4.0。PowerShell 与 .Net 3.5 一起运行，这就是它与 PS 一起使用的原因。

您应该切换回 .Net 3.5 SP1。

此外，请务必将您的项目设置为不使用 X86 编译设置运行。

将其设置为 AnyCPU 或 x64。

# c++ - 使用 string::reverse_iterator 检索子字符串

> ID：11221796
> 
> 赞同：1
> 
> 时间：2012-06-27T08:00:36.490
> 
> 标签：c++, string

由两个 std::string::reverse_iterators 表示的子字符串，我如何将它们复制出来并分配给具有正常序列的新字符串，而不是相反？

一个场景可能是：一串“Hello world-John”，从尾部探测并遇到'-'，使用：

```
 std::string::reverse_iterator rIter
         = std::find(str.rbegin(), str.rend(), isDelimiterFunc); 
```

rIter 指向'-'。我想把“约翰”拿出来，但如果我这样做：

```
 std::string out(str.rbegin(), rIter - 1); 
```

我会得到“nhoj”。

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:03:24.830

您可能想使用[string::rfind](http://en.cppreference.com/w/cpp/string/basic_string/rfind)来解决该问题。

```
std::string f;
auto pos = f.rfind("-");
std::string f2= f.substr(pos); 
```

否则，您可以通过成员函数获取`iterator`a 的基础，它返回一个非一的迭代器。`reverse_iterator``base()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:25:30.220

按照要求...

`std::string`按照@pmr's answer的引导，它提供了一种更简单的方法，可以使用以下方法搜索多个字符之一[`std::string::find_last_of()`](http://en.cppreference.com/w/cpp/string/basic_string/find_last_of)：

```
std::string str("Hello world-John");
const size_t idx = str.find_last_of("-x!@~");
if (std::string::npos != idx)
{
    std::cout << str.substr(idx+1) << "\n";
} 
```

# symfony - symfony2 表单验证和约束

> ID：11221798
> 
> 赞同：2
> 
> 时间：2012-06-27T08:00:54.353
> 
> 标签：symfony, validation

我刚刚创建了一个表单，它必须“捕获”数据以将它们传输到“用户对象”并将其保存到数据库。

为了做到这一点，我遵循以下步骤：

1.  创建用户对象
2.  创建一个 UserRepository 以使其持久化并获取它（通过实体管理器）
3.  创建一个“映射”表单的类
4.  创建用于渲染整个事物的路线和模板

所以跳过其中的前两个，让我们一起看看第三步

```
<?php
namespace Sestante\UserBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Validator\Constraints\Email;
use Symfony\Component\Validator\Constraints\MinLength;
use Symfony\Component\Validator\Constraints\Collection;

class AddUserType extends AbstractType
{
    public function BuildForm(FormBuilder $builder, array $options)
    {
        $builder->add('username','text')
                ->add('email','email')
                ->add('id','hidden')
                ->add('password','text')
                ;
    }

    public function getName()
    {
        return 'AddUser';
    } 
```

这是我为“表单句柄”创建的类的一部分。
显然我想在我的表单中添加某种验证，并且按照[symfony2 的书](http://symfony.com/doc/current/book/index.html)我已经完成了这个

```
public function getDefaultOptions(array $options)
{
    $collectionConstraint = new Collection(array(
        'username'=> new MinLength(4),
        'email'=>new Email(array('message'=>'invalid email address')),
    ));

    return array(
        'data_class' => 'Sestante\UserBundle\Entity\User',
        'validation_constraint' => $collectionConstraint
    );
} 
```

据我了解，将在`$form->bindRequest(...)`or`->bind(...)`调用上检查约束。

所以，进入我的控制器，我已经做到了

```
public function insertAction(Request $request)
{
   if($request->getMethod() == 'POST'){
       $em = $this->getDoctrine()->getEntityManager();
       $user = $em->getRepository('SestanteUserBundle:User');
       $userObj = new User();
       $userObj->setSalt('prova');
       $parameters = $request->request->get('AddUser');
       $parameters['password'] = sha1($parameters['password']);
       $userObj->setGroups($em->getRepository('SestanteUserBundle:Groups')->find(3));
       $form = $this->createForm(new AddUserType(), $userObj);
       $logger = $this->get('logger');
       $logger->info('PROVA: '.gettype($parameters));
       $form->bind($parameters); /* al posto che fare un bind della form, faccio un bind normale con i parametri presi dalla post e modificati
                                 vedi la password che deve subire uno sha1 */
       $em->persist($userObj);
       $em->flush();
       return $this->redirect($this->generateUrl('SestanteUserBundle_homepage'));
   } 
```

但是当我提交表格时，我将不得不与这个错误作斗争

> 数组或 Traversable 和 ArrayAccess 类型的预期参数，给定对象

最奇怪的是，此操作中涉及的唯一两个对象（绑定参数和约束集合）是请求类型。所以我不知道如何超越这个。
任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:01:40.670

尝试这样的事情：

```
public function insertAction(Request $request)
{
    // First: Create you're object with only what you need
    $userObj = new User();

    // Then, build you're form
    $form = $this->createForm(new AddUserType(), $userObj);

    // Form submitted?
    if ($request->getMethod() == 'POST') {
        $request = $this->getRequest();
        $em = $this->getDoctrine()->getEntityManager();

        // Bind $request now !
        $form->bindRequest($request);

        // Your object is updated (not saved, ofc). You can now do what you want.
        $userObj->setPassword(sha1($user->getPassword());
        $userObj->setGroups($em->getRepository('SestanteUserBundle:Groups')->find(3));

        // Finish, save user
        $em->persist($userObj);
        $em->flush();

        return $this->redirect($this->generateUrl('SestanteUserBundle_homepage'));
    }
} 
```

其他一些事情：

*   您无需将 id 字段放入表单中。
*   您可能应该看看 sf2 安全性。在控制器中手动编码密码不是一个好主意。

**编辑：**

您收到此异常是因为您不能`validation_constraint`在处理对象的表单中使用该选项。

此选项只能与数据数组一起使用。

# iphone - 如何在 Graph API 中为 Facebook 发布消息“名称”参数添加链接？

> ID：11221799
> 
> 赞同：0
> 
> 时间：2012-06-27T08:01:01.563
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api

在 Facebook 墙贴中，如何为“名称”参数添加 URL（链接）。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               StrImg, @"picture",
                               StrName, @"name",
                               emailBody, @"description",
                               actionLinksStr, @"actions",
                               nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:19:58.897

以键为链接向字典添加另一个参数

仅供参考：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:55:30.087

你可以这样做：

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"]; 
ASIFormDataRequest *newRequest = [ASIFormDataRequest requestWithURL:url]; 
[newRequest setPostValue:message forKey:@"message"];
[newRequest setPostValue:accessToken forKey:@"access_token"]; 
[newRequest setPostValue:imageURL forKey:@"picture"];
[newRequest setPostValue:attachmentName forKey:@"name"]; 
[newRequest setPostValue:attachmentCaption forKey:@"caption"]; 
[newRequest setPostValue:attachmentDescription forKey:@"description"]; 
[newRequest setPostValue:href forKey:@"link"];
//[newRequest setPostValue:@"http://www.foo.com/bar.swf" forKey:@"source"];
[newRequest setDidFinishSelector:@selector(postToWallFinished:)]; 
[newRequest setDelegate:self]; 
[newRequest startAsynchronous]; 
```

或者您可以在共享资源的元标记中设置参数：

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"]; 
ASIFormDataRequest *newRequest = [ASIFormDataRequest requestWithURL:url]; 
[newRequest setPostValue:message forKey:@"message"]; 
[newRequest setPostValue:href forKey:@"link"]; 
[newRequest setPostValue:accessToken forKey:@"access_token"]; 
[newRequest setDidFinishSelector:@selector(postToWallFinished:)]; 
[newRequest setDelegate:self];
[newRequest startAsynchronous]; 
```

和：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" xmlns:og="http://ogp.me/ns#">

<head>
    <title>Foobar</title>
    <!-- Facebook meta tags -->
    <meta property="og:title" content="meta title"/>
    <meta property="og:url" content="http://www.foo.com"/>
    <meta property="og:image" content="http://www.foo.com/bar.png"/>
    <meta property="og:site_name" content="meta site name"/>
    <meta property="fb:admins" content="123"/>
    <meta property="og:description" content="meta description"/>
    <meta property="og:type" content="website"/>
    <!-- <meta property="og:video" content="http://www.foo.com/bar.swf"/> -->
    <!-- <meta property="og:video:width" content="1200"/> -->
    <!-- <meta property="og:video:height" content="800"/> -->
    ... 
```

# android - 在浏览器中模拟 Android .apk 文件

> ID：11221800
> 
> 赞同：0
> 
> 时间：2012-06-27T08:01:05.737
> 
> 标签：android, browser, compiler-construction

我最近访问了这个网站 -> [http://appsurfer.com/apps/1-sudoku](http://appsurfer.com/apps/1-sudoku) 如您所见，它可以帮助您在浏览器本身中模拟您的 android 应用程序。

我知道我们可以在服务器端编译 andoird-java 代码并向用户显示命令行结果。但是知道这个模拟是如何完成的吗？

任何信息都会非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:30:07.707

您可以在服务器上运行模拟器并流式传输显示。如果有人点击屏幕，将点击映射到模拟器。有趣的想法，我应该自己尝试一下...

# ios - 笔尖但没有得到 UITableView

> ID：11221802
> 
> 赞同：62
> 
> 时间：2012-06-27T08:01:08.083
> 
> 标签：ios, ios6

我的应用程序适用于 iOS 5.1，但对于 iOS 6 模拟器，我收到以下错误。

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UITableViewController loadView] 加载了“MainListViewController”nib 但没有获得 UITableView。

我是子类化`UITableViewController`，我不想改变它。

tableview 是以编程方式创建的，有一个从Tab Bar Controller`MainListViewController.xib`加载的虚拟对象。`Mainwindow.xib`

我还尝试删除`MainListViewController.xib`，从`MainWindow.xib`标签栏控制器中删除它，`MainListViewController`在 AppDelegate 中创建并将其添加到标签栏控制器`UITabBarItem`以摆脱这个笔尖问题，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-06-27T08:28:21.817

如果您有`UITableViewController`子类的 NIB，则其`view`出口*必须*连接到`UITableView`.

您可以删除`MainListViewController.xib`并在代码中执行所有操作，但它对您不起作用的原因是因为旧的 XIB 在您构建和运行时不会被删除。因此，从模拟器中删除应用程序并重试。它应该工作。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-10-07T20:03:41.113

我在使用故事板时遇到了类似的问题。为了他人的利益，我将发布我的解决方案。关键是，如果您正确地将文件的所有者设置为 UITableView 的子类，您仍然必须确保将视图属性设置为表视图。我正在使用故事板，但同样的事情也应该适用于笔尖。展开“文档大纲”，以便您可以看到情节提要的层次结构。我将在下面包含一些屏幕截图。解决此问题的快速方法是您要*查看*文档大纲中的视图。删除您作为其子级的任何 tableview。将另一个 tableview 拖到 view 属性的顶部。完毕。我将在屏幕截图中向您展示。

![在此处输入图像描述](../Images/2ec2f7ca6cd3d7f4fa85055c90c68194.png)

注意这两个表。您要删除 table1 及其单元格。

![在此处输入图像描述](../Images/a9571660745e587ab96f0056e8168946.png)

好的。现在将 table2 拖到视图中，您就完成了。现在应该可以工作了。基本上如果你有一个 UITableViewController 的子类，那么它必须有表格视图来代替视图，否则它会崩溃。

![在此处输入图像描述](../Images/0397dcdc7380091faf1de27531a55dcb.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-05-31T11:00:39.397

原因可能是：

.h 文件检查它是否是 UIViewController 的子类。它将解决问题。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-09-02T15:20:34.153

简而言之，您将自定义 UITableViewController 子类设置为 UIViewController ！你不可以做这个。你应该给 UIViewController 一个 UIViewController 子类。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-06-25T23:38:05.847

如果你使用 UITableView 作为你的 Top View。

像这样 ：

[![在此处输入图像描述](../Images/3562c5ff39af1d284c34342a5360ba43.png)](https://i.stack.imgur.com/Y5jsg.jpg)

您需要在控制器中使用 UITableViewController

```
class ItemsViewController: UITableViewController 
```

如果您在 Storyboatd 的视图下使用 UITableView。

像这样 ：

[![在此处输入图像描述](../Images/a8dc4df9d278ef27ce882289260af0b5.png)](https://i.stack.imgur.com/7aPDJ.jpg)

您需要将 UITableViewDelegate 和 UITableViewDataSource 与 UIViewController 一起使用

```
class ItemsViewController: UIViewController, UITableViewDelegate, UITableViewDataSource 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-29T05:47:24.290

我在使用 Storyboards 和 1 table View 时找到了解决方案。

关键是当你创建一个自定义类（newViewController）时，只需检查它是 UITableViewController 的子类。创建后转到表视图控制器（我们的表）并在 Identity Inspector 中选择刚刚创建的自定义类（newViewController）。

这对我行得通。希望我的评论对某人有所帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-11-07T02:30:15.377

发生这种情况有几个原因。

1.  您可能尚未将 UITableViewDelegate 和 UITableViewDataSource 添加到您的 .h

    @interface 表控制器：UIViewController {

2.  您可能尚未将声明的插座连接到情节提要/笔尖中的组件

3.  您可能会在 .h 中调用 UIViewController 而不是 UITableView 或 vide verser

`@interface TableController : UIViewController`

或者

```
 @interface TableController : UITableViewController 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-02T12:38:02.507

请将您的表格视图连接为 View outlet。outlet 必须连接到 UITableView。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-25T20:14:58.723

我遇到了这个问题，解决它只是一件简单的事情。

如果您已经创建了笔尖，请保留...

转到（XIB 文件）并将对象库中的 tableView 组件添加到 XIB 文件的 iPhone 屏幕，它应该可以工作:)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-18T05:56:59.490

@smileBot 的回答帮助我意识到解决方案非常简单，iOS 引发的错误是有道理的

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UITableViewController loadView] 加载了“MainListViewController”nib 但没有获得 UITableView。

他们基本上说 nib 的视图控制器没有返回 UITableView，因为它不是，大多数情况下 - 你的 nib 正在返回一个**View** - 当你在 Xcode IDE 中创建一个新的 ViewController 时，它默认为你创建。

解决方案就像删除那个**视图**一样简单——这可能会让人觉得不正常——但继续选择它并退格——然后在你的 ViewController 中拖放一个 UITableView，这个 UITableView 现在将作为你在 TableViewController 中的根视图。

请记住，这只对直接继承 UITableViewController 的类是必需的。

祝你好运。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-04T04:15:07.503

这对我有用。希望它可以帮助你。

在 AppDelegate-->

```
#import "TableViewController.h" // name of your TableViewController class

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//PUT
TableViewController *controller = [[TableViewController alloc]
                                  initWithStyle:UITableViewStylePlain];
    self.window = [[UIWindow alloc]
                   initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = controller;
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    // Override point for customization after application launch.
    return YES;
} 
```

确保在情节提要中您的视图控制器指向此类：

![故事板](../Images/df92b25a010e71eaf98052e7f973a563.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-30T02:19:15.700

我也遇到了这个问题，但是我在xcode 6.2中使用了storyboard。我从情节提要中删除了相应的视图，并将表视图控制器从对象库重新拖到情节提要中，然后它就可以工作了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-11T18:20:39.143

我有同样的问题，浪费了 3 个小时后我发现它......“这是错误的”我使用 tableviewcontroller 类并提供此类的 uiviewcontroller 参考，而不是视图控制器类，我使用 tableviewcontroller 类，因为我在情节提要中使用 uiviewcontroller。所以删除 tableviewcontroller 类并将 tableviewcontroller 类的代码粘贴到视图控制器类，“不粘贴整个代码只粘贴逻辑”之后在身份检查器的情节提要中给出当前视图控制器类的类引用。

# c# - 如何调整 truecrypt 驱动器的大小？

> ID：11221804
> 
> 赞同：0
> 
> 时间：2012-06-27T08:01:25.783
> 
> 标签：c#, truecrypt

我开发了使用 truecrypt 的 C# 应用程序。首先，我使用 truecrypt 向导制作 truecrypt 文件并将大小设置为（例如 500gb）。然后我将该文件安装为 truecrypt 驱动器并将文件和文件夹复制到该驱动器。没关系。但是我想知道当来自该 truecrypt 驱动器的数据超过 500gb 时，我需要调整该驱动器的大小（例如，将大小增加到 500 到 1000）。我怎样才能用 C# 代码做那个员工？

# objective-c - 尝试将参数添加到 initWithNibName -> 错误没有可见的@interface

> ID：11221807
> 
> 赞同：0
> 
> 时间：2012-06-27T08:01:51.060
> 
> 标签：objective-c, xcode

这是我的第一篇文章，谢谢，你很有帮助。但我被困住了。我试图实现：[xcode init controller with data](https://stackoverflow.com/questions/7787395/xcode-init-controller-with-data)

当我用新参数初始化控制器时，我得到：没有可见的@interface for 'VisiteViewController' 声明选择器'initWithNibName:bundle:texte:'

在 VisiteViewController.m 我有：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil texte:(NSString *)chaine{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;} 
```

我这样称呼它：

```
- (IBAction)goToVisite: (id)sender{
NSLog(@"Button pushed");
VisiteViewController *visiteViewController = [[VisiteViewController alloc] initWithNibName:@"VisiteViewController" bundle:nil texte:@"lkj"];
[self.navigationController pushViewController:visiteViewController animated:YES];
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:09:02.380

您好，欢迎来到 StackOverflow！

正如@janusfidel 提到的，您需要将声明添加到头文件（.h）中。

您没有*更改*方法，而是创建了一个全新的方法（巧合的是，它的名称看起来有点像现有方法之一，但计算机对此没有概念）。您现在必须向使用您的类的每个人宣布有一个新方法，其选择器（名称，基本上）是`initWithNibName:bundle:texte:`. 这不会覆盖、删除或以其他方式与方法交互`initWithNibName:bundle:`，也不会与方法`init`或任何其他方法交互。名称的相似性基本上只是为了给人类读者（即你）一个关于这些方法做什么的线索[1]。

请不要把它当成个人，但请帮自己一个忙，并获得一本关于 Objective-C 编程（或一般的面向对象编程）的好书。这将使您的第一步*更*容易和更快。The Big Nerd Ranch Guides 是一本优秀的系列书籍，我建议你尽快购买*iOS Programming: The Big Nerd Ranch Guide*。

[1]：从技术上讲，有一些命名指南也为编译器提供了有关如何在 Objective-C 中处理内存管理的线索，但现在进入这些内容只会让人感到困惑。

# java - 使用 XMLBeans 编译 2 WSDL 使用的共享模式

> ID：11221809
> 
> 赞同：4
> 
> 时间：2012-06-27T08:01:52.120
> 
> 标签：java, xsd, cxf, xmlbeans

我有以下目录结构

```
Root
   CommonSchema
      1.xsd
      2.xsd

   Service1
      XSD
        3.xsd ( importing 1 and 2 xsd )
      WSDL
        A.wsdl ( importing 3.xsd )

   Service2
      XSD
        4.xsd ( importing 1 and 2 xsd )
      WSDL
        B.wsdl ( importing 4.xsd ) 
```

我正在尝试生成源代码并使用 XMLBeans+CXF 将它们编译到单个 jar 中。CommonSchema 文件夹包含由 Service1 和 2 共享的模式。

当我尝试生成源源时，似乎 1 和 2 xsd 的源有命名冲突，可以在下面看到：

**第一代 WSDL**

![在此处输入图像描述](../Images/c9fba46a2f29e3c8617945430470ea53.png)

**第二代 WSDL**

![在此处输入图像描述](../Images/b74dd887f4b75cfb4d14316be5e6d609.png)

关于我应该如何编译这个通用模式的任何想法？

这是我的蚂蚁脚本：

```
<target name="cxfWSDLToJava">
  <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
    <arg value="-databinding"/>
    <arg value="xmlbeans"/>
    <arg value="-client"/>
    <arg value="-d"/>
    <arg value="cxfsrc"/>
    <arg value="D:\Generation\Services\CBS-CustAccountInfo-I\WSDL\CBS-CustAccountInfo-I-Concrete.wsdl"/>
    <classpath>
      <path refid="cxf.classpath"/>
    </classpath>
  </java>
</target>

<target name="cxfWSDLTXNToJava">
  <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
    <arg value="-databinding"/>
    <arg value="xmlbeans"/>
    <arg value="-client"/>
    <arg value="-d"/>
    <arg value="cxfsrc"/>
    <arg value="D:\Generation\Services\CBS-DirectDebCredTransfer-C\WSDL\CBS-DirectDebCredTransfer-C-Concrete.wsdl"/>
    <classpath>
      <path refid="cxf.classpath"/>
    </classpath>
  </java>
</target> 
```

我的项目位于：[在](https://www.dropbox.com/sh/chiq6oi5uk91i66/X-OQtVnL91)CXF-Generation 下。

整个架构 + WSDL 可以在 CXF-Generation/Generation 下找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:59:45.810

我不是蚂蚁专家，所以我不确定我是对的，但我认为问题在于一个目标超越了另一个。

运行 XmlBeans 命令时，如果您像 2 个单独的命令一样运行它：

```
wsdl2java -uri my_service1.wsdl
wsdl2java -uri my_service2.wsdl 
```

第一个命令将生成一个 jar，第二个命令将使用来自第二个 wsdl 的新代码覆盖它。

我认为您正在像这样运行它，这就是为什么您只获得一个 wsdl 的代码。

您需要将它们组合成一个 wsdl（可能是包装器 wsdl），然后从中生成代码。

或者您可以生成 2 个不同的 jar。

**编辑：**

稍作修正，显然[只有 IBM 支持从另一个 wsdl 导入 wsdl](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/cwbs_wsdl.html)。

所以包装器选项不在讨论范围内。恕我直言，这些是您的选择：

1.  更改通用模式的目标命名空间，这样就不会发生冲突并生成 2 个 jar。
2.  将两个 wsdl 合并为一个（简单的复制粘贴） - 如果存在具有不同用途的相同名称的方法/参数，可能会有点棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:02:33.293

使用 xsdconfig 解决我的问题。最后我复制了包，但它适合我的需要。

我的 Maven 生成冲突包

```
<executions>
<execution>
    <id>generate-sources</id>
    <phase>generate-sources</phase>
    <configuration>
        <wsdlOptions>
            <wsdlOption>
                <wsdl>${basedir}\..\Generation\Services\CBS-DirectDebCredTransfer-C\WSDL\CBS-DirectDebCredTransfer-C-Concrete.wsdl</wsdl>
                <extraargs>
                    <extraarg>-db</extraarg>
                    <extraarg>xmlbeans</extraarg>
                    <extraarg>-p</extraarg>
                    <extraarg>com.xxx.txnpos.ws</extraarg>
                </extraargs>
                <bindingFiles>
                    <bindingFile>${basedir}/txnpos.xsdconfig</bindingFile>
                </bindingFiles>
            </wsdlOption>
        </wsdlOptions>
    </configuration>
    <goals>
        <goal>wsdl2java</goal>
    </goals>
</execution>
</executions> 
```

我的 xsd 配置：

```
<?xml version="1.0"?>
<xb:config xmlns:xb="http://xml.apache.org/xmlbeans/2004/02/xbean/config">
<xb:namespace uri="http://schemas.xxx.com/soa/emf/common/aggregates/">
<xb:package>com.xxx.schemas.soa.emf.txnpost.aggregates</xb:package>
</xb:namespace>
<xb:namespace uri="http://schemas.xxx.com/soa/emf/common/body/">
<xb:package>com.xxx.schemas.soa.emf.txnpost.body</xb:package>
</xb:namespace>
<xb:namespace uri="http://schemas.xxx.com/soa/emf/common/elements/">
<xb:package>com.xxx.schemas.soa.emf.txnpost.elements</xb:package>
</xb:namespace>
<xb:namespace uri="http://schemas.xxx.com/soa/emf/common/envelope/">
<xb:package>com.xxx.schemas.soa.emf.txnpost.envelope</xb:package>
</xb:namespace>
<xb:namespace uri="http://schemas.xxx.com/soa/emf/common/header/">
<xb:package>com.xxx.schemas.soa.emf.txnpost.header</xb:package>
</xb:namespace>
<xb:namespace uri="http://schemas.xxx.com/soa/emf/common/monetaryErrorReponse/">
<xb:package>com.xxx.schemas.soa.emf.txnpost.monetaryErrorReponse</xb:package>
</xb:namespace>
</xb:config> 
```

# php - 获取邮政编码可选的国家/地区列表 - magento

> ID：11221815
> 
> 赞同：0
> 
> 时间：2012-06-27T08:02:18.177
> 
> 标签：php, magento

我正在尝试以编程方式获取邮政编码可选的国家/地区列表。这些设置在magento的后端。（系统->配置->国家选项）。

到目前为止，我还没有发现任何有用的东西。任何线索如何做到这一点？

谢谢！

Krt_马耳他

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:06:32.227

目录助手包含一个方便的方法来检索这些国家代码作为一个数组（或 json 如果你传入 true）：

```
Mage::helper('directory')->getCountriesWithOptionalZip() 
```

您还可以使用 getStoreConfig 来检索值 - 尽管这会给您一个逗号分隔的字符串，但您可能最终会转入一个数组来处理：

```
Mage::getStoreConfig('general/country/optional_zip_countries') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:26:53.400

好的，找到了。`Mage::getStoreConfig('general/country/optional_zip_countries')`获取具有可选邮政编码的国家/地区代码列表。

# image - JFreeChart & iText：创建 pdf 时的黑色图像

> ID：11221816
> 
> 赞同：2
> 
> 时间：2012-06-27T08:02:22.793
> 
> 标签：image, pdf, itext, jfreechart

我正在使用 JFreeChart 1.0.9 创建图表，并使用 iText 1.3.1 在 PDF 文件中显示此图表。为此，我正在创建一个 JFreeChart，然后将其转换为字节数组：

```
final TimeSeriesCollection dataset = new TimeSeriesCollection();
final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
s1.add(new Minute(0, 0, 7, 12, 2003), 1.2);
s1.add(new Minute(30, 12, 7, 12, 2003), 3.0);   // 12h30  => value = 3
s1.add(new Minute(15, 14, 7, 12, 2003), 8.0);

final TimeSeries s2 = new TimeSeries("Series 2", Minute.class);
s2.add(new Minute(0, 3, 7, 12, 2003), 0.0);
s2.add(new Minute(30, 9, 7, 12, 2003), 0.0);
s2.add(new Minute(15, 10, 7, 12, 2003), 0.0);

dataset.addSeries(s1);
dataset.addSeries(s2);
XYDataset dataset2 = dataset;

final JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Sample Chart",
            "Date", 
            "Value",
            dataset2,
            true,
            true,
            false
);
chart.setBackgroundPaint(Color.white);
ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection());

BufferedImage originalImage = chart.createBufferedImage(500, 300, info);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write( originalImage, "jpg", baos );
byte[] imageInByte = baos.toByteArray(); 
```

然后我只是使用 iText 将此字节数组放入 PDF 文件中，如下所示：

```
Document document=new Document();
PdfWriter.getInstance(document,new FileOutputStream("hello.pdf"));
document.open(); 

Image image = Image.getInstance(imageInByte);
document.add(image);

document.close(); 
```

但是当我打开我的 PDF 文件时，我的图像应该是全黑的区域。

你知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:07:04.163

看起来图像在转换过程中被反转了。试试下面的代码

```
package demo;

import java.awt.Color;
import java.io.ByteArrayOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.JFreeChart;
import org.jfree.data.time.Minute;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.xy.XYDataset;

import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.pdf.PdfWriter;

public class PDF {

    public static void main(String[] args) {
        final TimeSeriesCollection dataset = new TimeSeriesCollection();
        final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
        s1.add(new Minute(0, 0, 7, 12, 2003), 1.2);
        s1.add(new Minute(30, 12, 7, 12, 2003), 3.0);   // 12h30  => value = 3
        s1.add(new Minute(15, 14, 7, 12, 2003), 8.0);

        final TimeSeries s2 = new TimeSeries("Series 2", Minute.class);
        s2.add(new Minute(0, 3, 7, 12, 2003), 0.0);
        s2.add(new Minute(30, 9, 7, 12, 2003), 0.0);
        s2.add(new Minute(15, 10, 7, 12, 2003), 0.0);

        dataset.addSeries(s1);
        dataset.addSeries(s2);
        XYDataset dataset2 = dataset;

        final JFreeChart chart = ChartFactory.createTimeSeriesChart(
                    "Sample Chart",
                    "Date", 
                    "Value",
                    dataset2,
                    true,
                    true,
                    false
        );
        chart.setBackgroundPaint(Color.white);
        java.awt.Image originalImage = chart.createBufferedImage(500, 300);
        try {           
            Document document=new Document();
            PdfWriter.getInstance(document,new FileOutputStream("hello.pdf"));
            document.open(); 
            com.lowagie.text.Image image1 = com.lowagie.text.Image.getInstance(originalImage,Color.white);
            document.add(image1);
            document.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (DocumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

使用最新版本的 iText 你我得到这个 PDF

![在此处输入图像描述](../Images/3a66b8ccf28e2499023a1d392be58323.png)

希望你会得到同样的结果

我已对您的代码进行了以下更改

```
java.awt.Image originalImage = chart.createBufferedImage(500, 300); 
```

已删除

```
ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection()); 
```

因为它不需要。我也删除了`ByteArrayOutputStream`并替换为

```
 com.lowagie.text.Image image1 = com.lowagie.text.Image.getInstance(originalImage,Color.white); 
```

`com.lowagie.text.Imag`请注意e使用全名，`java.awt.Image`因为 AWT 和 Lowagie 都有名为 Image 的类。

# eclipse - Eclipse Indigo SR2 附带 m2e，我需要安装更多东西吗？

> ID：11221819
> 
> 赞同：1
> 
> 时间：2012-06-27T08:02:31.497
> 
> 标签：eclipse, maven, eclipse-indigo, m2e

当您安装 eclispe indigo SR2 时，m2e 似乎已经安装，您可以访问“Maven 存储库”选项卡...但是当我在市场上查看“maven”时，eclipse 告诉我可以安装 2 个新插件：1-Maven WTP 的集成 WTP 的 Maven 集成（又名 m2e-wtp）旨在提供 Eclipse 的 Maven 集成（又名 m2e）和 eclipse Web ...

2-Eclipse 的Maven 集成 m2e 提供了全面的Eclipse Maven 集成。您可以使用 m2e 来管理简单和多模块的 Maven 项目，...

这非常令人困惑。

我真正需要什么？我正在使用 WTP 和 JBoss Tools 3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:05:15.760

1 - 如果你真的想在 eclipse 中集成你的 JBoss 环境（例如从 eclipse 启动它，启用自动部署，...），m2e-wtp 真的会帮助你。Maven 在类路径中保存应用程序的生命周期（编译、打包……）和依赖项。如果没有该插件，您可能会面临例如类路径问题，或不一致的部署战争。

这就是 WTP 的 Maven 集成的目的。

2 - 我不确定每个插件的角色，但这个会添加一些额外的功能/额外的菜单，超过 m2e，提供“基本功能”（确实比基本功能更多）。Eclipse m2e 的 Maven 集成可能会添加平滑功能。我不知道你是否真的需要它。我认为你应该这样做，但你可以没有它。

# javascript - 无法设置 HTML5 Android 4 浏览器中的音量

> ID：11221822
> 
> 赞同：1
> 
> 时间：2012-06-27T08:02:42.600
> 
> 标签：javascript, android, html, html5-audio

我有一个使用标签播放音频文件的网络应用程序，在 Android 4.0.3 浏览器中，我似乎无法设置音量。音量控制也根本不显示。

任何人都知道这是一个错误还是其他什么？

该应用程序在桌面 chrome/firefox 上运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:59:06.917

这是 Android 的冰淇淋三明治中的一个错误。如果您检查值但从未设置物理卷，则 getter/setter 将起作用。随意将此错误输入他们的开发网络。

# android - 用新的时间android重新启动倒数计时器

> ID：11221829
> 
> 赞同：2
> 
> 时间：2012-06-27T08:02:59.473
> 
> 标签：android, countdowntimer

当倒数计时器完成时，我想用新的时间重新启动倒数计时器。我在下面给出代码：

```
futureInMillis = newTime();

            CountDownTimer remainingTimeCounter = new CountDownTimer(futureInMillis, 1000) {

            public void onTick(long millisUntilFinished) {
                remainingTime = calculateRemainingTime(millisUntilFinished / 1000);
                runOnUiThread(updateTime);
            }

            public void onFinish() {
                // TODO: restart counter
                cancel();
                futureInMillis = newTime();
//              remainingTimeCounter = null;
                this.start();
            }
        }.start(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T08:32:01.760

我们应该知道`newTime()`做什么，你不必调用方法`cancel()`，因为定时器在`onFinish()`方法中，这意味着定时器已经完成倒计时：

```
CountDownTimer remainingTimeCounter = new CountDownTimer(futureInMillis, 1000) {

            public void onTick(long millisUntilFinished) {
                remainingTime = calculateRemainingTime(millisUntilFinished / 1000);
                runOnUiThread(updateTime);
            }

            public void onFinish() {
                // TODO: restart counter
                //cancel();  // there is no need the call the cancel() method here
                futureInMillis = newTime();
//              remainingTimeCounter = null;
                this.start();
            }
        }.start(); 
```

**编辑 ：**

类中没有要使用的属性`CountDownTimer`来更改 futureInMillis ，如果你想使用它，你应该使用两个`CountDownTimer`；您应该创建两个类，每个类都有一个计时器和一个 futureInMillis 属性，然后当第一个 Class 的计时器完成时，实例化第二个类，将 futureInMillis 传递给它，并启动她的计时器，反之亦然。

```
**EDIT 2 :** 
```

或者简单地从源代码 android 编辑类 CountDownTimer 的代码源，并为属性 futureInMillis 添加 setter 和 getter，如下所示：

```
/*
 * Copyright (C) 2008 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//add your package declaration here

import android.util.Log;

/**
 * Schedule a countdown until a time in the future, with
 * regular notifications on intervals along the way.
 *
 * Example of showing a 30 second countdown in a text field:
 *
 * <pre class="prettyprint">
 * new CountdownTimer(30000, 1000) {
 *
 *     public void onTick(long millisUntilFinished) {
 *         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
 *     }
 *
 *     public void onFinish() {
 *         mTextField.setText("done!");
 *     }
 *  }.start();
 * </pre>
 *
 * The calls to {@link #onTick(long)} are synchronized to this object so that
 * one call to {@link #onTick(long)} won't ever occur before the previous
 * callback is complete.  This is only relevant when the implementation of
 * {@link #onTick(long)} takes an amount of time to execute that is significant
 * compared to the countdown interval.
 */
public abstract class MyCountDownTimer {

    /**
     * Millis since epoch when alarm should stop.
     */
    private long mMillisInFuture;

    /**
     * The interval in millis that the user receives callbacks
     */
    private long mCountdownInterval;

    private long mStopTimeInFuture;

    /**
     * @param millisInFuture The number of millis in the future from the call
     *   to {@link #start()} until the countdown is done and {@link #onFinish()}
     *   is called.
     * @param countDownInterval The interval along the way to receive
     *   {@link #onTick(long)} callbacks.
     */
    public MyCountDownTimer(long millisInFuture, long countDownInterval) {
        mMillisInFuture = millisInFuture;
        mCountdownInterval = countDownInterval;
    }

    public void setMillisInFuture(long millisInFuture) {
        this.mMillisInFuture = millisInFuture;
    }

    public void setCountdownInterval(long countdownInterval) {
        this.mCountdownInterval = countDownInterval;
    }

    /**
     * Cancel the countdown.
     */
    public final void cancel() {
        mHandler.removeMessages(MSG);
    }

    /**
     * Start the countdown.
     */
    public synchronized final MyCountDownTimer start() {
        if (mMillisInFuture <= 0) {
            onFinish();
            return this;
        }
        mStopTimeInFuture = SystemClock.elapsedRealtime() + mMillisInFuture;
        mHandler.sendMessage(mHandler.obtainMessage(MSG));
        return this;
    }

    /**
     * Callback fired on regular interval.
     * @param millisUntilFinished The amount of time until finished.
     */
    public abstract void onTick(long millisUntilFinished);

    /**
     * Callback fired when the time is up.
     */
    public abstract void onFinish();

    private static final int MSG = 1;

    // handles counting down
    private Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {

            synchronized (MyCountDownTimer.this) {
                final long millisLeft = mStopTimeInFuture - SystemClock.elapsedRealtime();

                if (millisLeft <= 0) {
                    onFinish();
                } else if (millisLeft < mCountdownInterval) {
                    // no tick, just delay until done
                    sendMessageDelayed(obtainMessage(MSG), millisLeft);
                } else {
                    long lastTickStart = SystemClock.elapsedRealtime();
                    onTick(millisLeft);

                    // take into account user's onTick taking time to execute
                    long delay = lastTickStart + mCountdownInterval - SystemClock.elapsedRealtime();

                    // special case: user's onTick took more than interval to
                    // complete, skip to next interval
                    while (delay < 0) delay += mCountdownInterval;

                    sendMessageDelayed(obtainMessage(MSG), delay);
                }
            }
        }
    };
} 
```

然后您可以像这样轻松更改millisInFuture：

```
MyCountDownTimer remainingTimeCounter = new MyCountDownTimer(futureInMillis, 1000) {

                public void onTick(long millisUntilFinished) {
                    remainingTime = calculateRemainingTime(millisUntilFinished / 1000);
                    runOnUiThread(updateTime);
                }

                public void onFinish() {
                    // TODO: restart counter with millisInFuture = 4000 ( 4 seconds ) 
                    //cancel();  // there is no need the call the cancel() method here

                    this.setMillisInFuture(4000); // here we change the millisInFuture of our timer
                    this.start();
                }
            }.start(); 
```

# php - PHP代码优化（重构）

> ID：11221831
> 
> 赞同：1
> 
> 时间：2012-06-27T08:03:04.440
> 
> 标签：php, optimization, refactoring, profiling

好吧，我知道我可以使用哪种工具进行优化、分析等……所以现在我知道了我所有的瓶颈。但我无法无限优化它们。我的意思是说 ？例如，我将点 A 作为我的主要瓶颈，我应用了优化，之后 CPU 时间、内存时间等变得更小，但与整个项目相关，它仍然是瓶颈。我的意思是，每次在任何项目中都有瓶颈，那么我应该停止优化的最后一点在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:11:16.107

如果你的代码的某个部分导致了瓶颈，也许最好的办法是退后一步，看看整个画面，我指的是你的整体设计。有时，摆脱***无法修复的***瓶颈的最佳方法是重新考虑您的设计模式。

这里有一些很好的来源

1.  [http://en.wikipedia.org/wiki/Software_design_pattern](http://en.wikipedia.org/wiki/Software_design_pattern)
2.  [http://www.phptechi.com/php-design-patterns.html](http://www.phptechi.com/php-design-patterns.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:13:04.517

在我看来，这取决于要求。如果用户等待几秒钟加载页面，没关系。但如果用户在聊天时等待几秒钟，则需要优化。当我登录谷歌时，它需要超过 5 秒（它很长），但之后它很快。但如果聊天时需要同样的时间，那么我会更喜欢其他一些电子邮件 ID。一般来说，mysql、web-services、loops等都需要优化。当有很多图片时，比如在google图片搜索时，需要时间。用户可以等待。转到页面，看看你自己，你在加载页面时的感受。它长吗？如果是那么你需要优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:34:01.680

假设您发现了一个“瓶颈”，当您修复它时，可以节省 30% 的时间。例如，时间从 10 秒缩短到 7 秒。

然后假设您找到另一个，当您修复它时，可以节省 30% 的 7 或 2.1 秒。这将时间缩短到 4.9 秒。

注意几件事。

*   第二个问题只占原始 10 的 21%，所以最初它是一个不太大的问题，但在解决第一个问题后，第二个问题变得更大，以百分比表示。

*   将其视为加速比。解决第一个问题后，您的加速比为 10/7 或 1.43 倍。修复第二个给你一个 7/4.9 或 1.43x 的比率。总加速比为 10/7 乘以 7/4.9，即 10/4.9 或 2.04 倍。您将程序的速度提高了一倍以上。

*   这两个问题分别占了原始 10 的 30% 和 21%。如果还有两个，分别占 14.7% 和 10.3%，它们在配置文件中看起来会很小。但是如果你修复了所有四个，你的程序速度就会提高四倍！如果你错过其中任何一个，你不会。

事情就是这样。在你真正达到最低点之前，你总是可以让程序更快，而那些起初看起来微不足道的问题后来变得有价值。你得到的最终加速比会让你大吃一惊。

并非所有分析器都能找到所有问题。如果其中一个问题是您的探查器找不到的问题，那么您将达到您认为已尽可能优化但实际上没有的地步。

如果您想超越这一点，您需要一种能够发现*所有*问题的分析技术。 [*这是我的做法。*](https://scicomp.stackexchange.com/a/1870/1262)

# c - 运行时服务器的 ip 地址

> ID：11221843
> 
> 赞同：1
> 
> 时间：2012-06-27T08:04:11.950
> 
> 标签：c

我在 C 中开发了一个客户端任务，在 C 中开发了一个服务器任务。客户端需要服务器 IP 地址才能连接到服务器。问题是：我事先不知道哪台机器将运行客户端以及哪台机器将运行服务器，所以我只能在运行时知道服务器的 ip 地址我的问题：客户端如何在运行时知道 ip服务器的地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:44:33.723

正如评论者所指出的，您可能只使用 DNS。如果由于某种原因您无法获得 DNS 条目，或者服务器和客户端将在同一网络上运行，您可能会考虑使用某种 mDNS，这样您就不需要带有记录的 DNS 服务器和运行。访问[http://en.wikipedia.org/wiki/MDNS#Multicast_DNS](http://en.wikipedia.org/wiki/MDNS#Multicast_DNS)了解介绍性概述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:10:34.540

首先你必须记住你要搜索多大的网络？如果这对您来说有点问题，那么您可以使用 DNS，它真的很有用.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:08:17.747

使用客户端和服务器都事先知道的第三方代理服务器。

只需在任何地方使用已知 IP 地址设置服务器即可。（使用云服务器是一种既便宜又快捷的选择。）

当服务器启动时，它会将其 IP 地址发送到代理服务器，当客户端启动时，它会向代理服务器查询要连接的服务器。

当然，你必须为此编写一个协议，但它可以非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:37:21.240

如果您的服务器和客户端将在您的本地网络上运行，请使用这个漂亮的 MAC 地址：FF-FF-FF-FF-FF-FF ... ;) 但是如果名称保持不变，则最好使用 DNS。

# random - 使用 sed 在随机行数中生成随机数

> ID：11221845
> 
> 赞同：-3
> 
> 时间：2012-06-27T08:04:26.850
> 
> 标签：random, sed, numbers, rows

如何使用 sed 在随机行数（但不超过 150 行）中生成随机数（1 行最多 5 个字段的长度）？是否有可能或更好地使用 Perl？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:16:50.130

我不认为`sed`是这个工具，但如果你想在随机行上生成随机数`unix`，这样的事情会做：

```
od -An -t d2 -w10 /dev/urandom | head -n $(( RANDOM % 150 )) 
```

注意：这些是带符号的 16 位数字，更新`-t`并`-w`更改它。

**选项**

*   `-An` 不输出地址。
*   `-t d2`输出 2 字节数字并转换为十进制。
*   `-w10` 字段数乘以字节长度。

**perl 解决方案**

用于`int rand(n)`获取从 0 到 n 的随机整数（请参阅 参考资料`perldoc -f rand`）。

```
for ( 1 .. int rand(150) ) {
    print int rand(10), " " for (1 .. 5);            
    print "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:11:24.247

sed 是关于解析和编辑现有的文本流，而不是真正生成它们。几乎任何编程语言（包括 perl）都更适合这项任务。

# joomla - 通过 joomla php 邮件向我发送一份副本

> ID：11221849
> 
> 赞同：0
> 
> 时间：2012-06-27T08:05:03.677
> 
> 标签：joomla

我正在构建一个有多个条目的站点，以及一个基于 Joomla 的 php 邮件程序的联系表单扩展。此表格可用于联系条目所有者，但我还需要能够将副本发送到我自己的地址。我发现在 joomla 核心中更改的代码是：

```
// Add recipients
        if ($bcc) {
            $mailer->addBCC($rows);
            $mailer->addRecipient($app->getCfg('mailfrom'));
        } else {
            $mailer->addRecipient($rows);
        } 
```

我只是不明白怎么做。

# flash - 降级 SWF 文件

> ID：11221859
> 
> 赞同：0
> 
> 时间：2012-06-27T08:05:45.057
> 
> 标签：flash, 3d, actionscript-2

所以我使用（AS3 和 flashPlayer 10+）在 flash cs5.5 中制作了 3D 动画，但我需要它在 flash player 9 或更小的版本中。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:12:09.537

据我所知，您有两种方法：

1.  时间线一：右键 tween > **Convert to Frame by Frame Animation**。这将增加您的文件大小，此外，如果您已命名符号，则需要确保该符号在**所有**帧上都有一个实例名称。此外，对补间进行更改意味着在文档之间来回切换并一直转换
2.  使用与 Flash Player 9 兼容的 3D 库。如果它是简单/轻量级的东西，[FIVe3D](http://five3d.mathieu-badimon.com/)非常棒（小/易于使用（模仿 Flash 绘图 API））。您也可以尝试旧版本的[Away3D](http://away3d.com)或[Papervision3D](http://blog.papervision3d.org/)，尽管我不确定您是否获得了 actionscript 2 版本的矢量支持。我建议先尝试 FIVe3D。这种方法的主要优点是，一旦您用代码重做补间，更改/调整就容易得多。如果您对一些 Flash IDE 脚本感到满意，您可以抽出脚本来[导出 tween](http://flashthusiast.com/2008/11/04/understanding-flash-cs4-motion-xml/)。

# ios - 核心数据实体属性和关系，我想我很困惑

> ID：11221860
> 
> 赞同：0
> 
> 时间：2012-06-27T08:05:45.587
> 
> 标签：ios, core-data

好的，所以我的应用程序正在运行，我可以创建帐户，并使用新创建的帐户登录。我还有一个 root 帐户，可以显示所有帐户的列表。在开发这个应用程序的过程中，我在模拟器上创建了 25 个帐户（不要问）。所以对我来说下一个合乎逻辑的步骤是实现一个删除这些帐户的功能。好吧，我开始看东西，并意识到这将比最初计划的要困难得多。起初我以为我可以做一个 fetch 请求并删除用户名，所有与之相关的数据都将被删除。我很快意识到我从未在实体中的属性之间建立关系。

所以我知道你的想法，（核对核心数据数据库中的所有对象）。我不反对这样做，但我已经在钥匙串中存储了用户帐户的密码/pin。所以我不确定我是否删除了 Core Data DB 中的所有对象，然后用用户帐户创建的 pin 在某个地方的钥匙串边缘。我有一种删除/删除帐户钥匙串的方法，但它需要与它关联的用户名（这就是我部分反对对所有内容进行核对的原因）。

因此，在我进一步创建更多帐户或将这个东西放到野外（还有很多开发工作要做）之前**，将属性关联在一起的最佳方法是什么，即在它们之间建立关系？** 就目前而言，我有一个名为**Account**的实体，在该实体中我有 4 个属性：*credit*、*email*、*phoneNumber*、*username*。我有一个用户创建用户名、输入密码、电子邮件和电话号码的表单。我希望能够通过删除用户名来删除所有这些属性，所以我想必须进行某种排序关系设置。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:37:38.330

我认为您不了解 Core Data 属性和实体的概念。在聊天中与您交谈后，您有 1 个实体，即**帐户**，您只需从实体中删除该对象。

您可以通过执行以下操作来做到这一点

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:[[CoreDataHelper sharedInstance] managedObjectContext]];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"username == %@", usernameString];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entity];
[request setPredicate:predicate];

NSError *error = nil;
Account *account = (Account*) [[[[CoreDataHelper sharedInstance] managedObjectContext] executeFetchRequest:request error:&error] objectAtIndex:0];

[[[CoreDataHelper sharedInstance] managedObjectContext] deleteObject:account];
[[[CoreDataHelper sharedInstance] managedObjectContext] processPendingChanges]; 
```

请注意，您的 CoreData 上下文可能不同。

通过执行上述操作，这将删除具有属性（*信用、电子邮件、电话号码、用户名）的***Account**对象。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:27:01.557

好吧，由于以下代码，我现在可以删除模拟器上的用户帐户，FWIW 当我删除帐户时，它也会删除与帐户关联的属性（奖励）。我猜这些属性是被删除的对象的一部分（不确定）。但这是我一直在寻找的功能。

```
- (IBAction)deleteAccount:(id)sender {

// TODO - implement method / code to delete a user account

// CORE DATA
// setup up the fetch request
NSFetchRequest *request = [[NSFetchRequest alloc] init];

// define our table / entity to use
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];
[request setEntity:entity];

// Fetch the records and handle an error
NSError *error;
NSMutableArray *mutableFetchResults = [[_managedObjectContext executeFetchRequest:request error:& error] mutableCopy];

if (!mutableFetchResults) {
    // handle error.
    // should advise user to restart
}

// compare text field text / string with results in an array
for (Account *anAccount in mutableFetchResults) {
    if([anAccount.username isEqualToString:self.tfDeleteAccount.text]) {
        NSLog(@"username found.");

        // delete keychain for account
        [anAccount prepareForDeletion];

        // delete account object
        [_managedObjectContext deleteObject:anAccount];

        // save the managed object context
        NSError *error = nil;
        if (![_managedObjectContext save:&error])
        {
            NSLog(@"error %@", error);
        }
    }
}
} 
```*

# iphone - 如何在另一个视图中加载 xib 文件？

> ID：11221862
> 
> 赞同：0
> 
> 时间：2012-06-27T08:05:54.853
> 
> 标签：iphone, ios, nib

我有 3 个 xib 文件，所有 xib 文件上有 3 个按钮，并且在按下按钮时动态加载视图。

例如，当单击按钮 1 时，会出现视图 1，按钮 2 和按钮 3 也是如此。有什么方法可以保留这些视图，例如我选择了一个表格单元，然后导航到视图 2，然后返回按钮 1 和表格单元被选中？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:29:06.720

我建议使用 Storyboard 来拥有多个视图控制器。然后，您可以使用 segue 在控制器之间进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:04:44.757

您将使用 UINavigationController 从一个视图转到另一个视图。你必须阅读如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:59:02.750

在一个视图控制器中，用于`addSubview:`添加新视图，使用`bringSubviewToFront:`或`sendSubviewToBack:`显示不同的视图，可选`removeFromSuperview`。UIView 类参考中有更多选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:07:59.670

使用 UINAvigtionController 并在 DidSelectRowAtIndexPath { [myTableView selectRowAtIndexPath:indexpath animated:NO scrollPosition:0]; }

当你回来时它会帮助你。

# android - 使用数据库助手时出错

> ID：11221865
> 
> 赞同：0
> 
> 时间：2012-06-27T08:06:09.467
> 
> 标签：android, database, sqlite

我正在使用数据库助手，但出现错误提示

> “/”附近的 SQLiteException 语法错误；

我`DB_PATH`的是

```
/data/data/com.mypackage/databases/ 
```

我的`DB_NAME is`加载`。我看不出是什么导致了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:33:39.210

好的，您应该执行以下操作：

```
private static String DB_PATH = "/data/data/com.mypackage/databases/";

private static String DB_NAME = "DBNAME.db";

String myPath = DB_PATH + DB_NAME; 
```

然后使用这样的路径：

```
SQLiteDatabase checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY); 
```

但是请记住确保在数据库名称的末尾添加“.db”，并且实际的数据库具有 .db，这是一种明显的做法，但有时是主要问题 :)

祝你好运

# c++ - 在 c++11 中编写自定义迭代器的最佳方法是什么

> ID：11221871
> 
> 赞同：2
> 
> 时间：2012-06-27T08:06:21.000
> 
> 标签：c++, c++11, iterator, rvalue-reference

我曾经使用转换构造函数编写类似结构的指针（如智能指针、迭代器等），它允许一种非 const 到 const 转换的方式。这种风格可以防止 const/non-const 版本的代码重复。例如

```
template<class T>
struct ptr_like
{
  using self_type = ptr_like<T>;
  using nonconst_self = ptr_like<remove_const<T>>;
  ptr_like() : ptr_(){}
  //a friendship may be needed to access private member
  ptr_like(nonconst_self const& rhs) : ptr_(rhs.ptr_){//implementation} 1)
  //ptr_like(ptr_like const& rhs) = default; 2)
  T* ptr_;//exposition only
}; 
ptr_like<int> x1,x2 = x1;//converting constructor
ptr_like<int const> x3,x4 = x3;//default constructor
//ptr_like<int> x5 = x3; //error as intended
ptr_like<int const> x6 = x1;//converting constructor, allowed conversion. 
```

然而，在 c++11中，`is_trivially_copy_constructible`对于 是 false `ptr_like<T>`，而对于`ptr_like<T const>`，实际上使用`ptr_like<T>`作为类的成员变量会删除默认的移动构造函数（因为它具有非平凡的复制构造函数，并且没有可用的移动构造函数），而它是完美的用作`ptr_like<T const>`类的成员，因为它具有简单的复制构造函数。例如

```
struct holder
{
 ptr_like<int> p;//(3
 holder(holder const&) = delete;
 holder(holder&&) = default; 
};
is_move_constructible<holder>() == false
std::vector<holder> v; 
holder h;
v.push_back(std::move(h)); //this fails as no move constructor possible. 
```

为（如 2）提供一个默认的复制构造函数`ptr_like`也是无用的，因为它已经实现了一个复制构造函数`ptr_like<T>`

这种效果可以在许多提升类（例如`boost::circular_buffer<T>::iterator`）中看到，其中将它们存储在一个类中会禁用该类的移动构造函数。而且，当复制构造函数没有被删除时，它会默默地复制。

那么，问题是，在 c++11 中编写带有重复代码的类指针的最佳方法是什么？（作为一个辅助问题，我正在寻找当成员变量具有非平凡的复制构造函数时为类禁用移动构造函数的原因）

# c# - 如何验证签名，从 CRT 文件加载公钥？

> ID：11221877
> 
> 赞同：25
> 
> 时间：2012-06-27T08:06:39.487
> 
> 标签：c#, cryptography, digital-signature, public-key-encryption, x509

我查看了许多论坛和示例，但没有一个对我有帮助。我需要验证任何网络服务的签名。我有带有公钥的 test.crt 文件进行验证。

```
static bool Verify(string text, string signature)
{
  X509Certificate2 cert = new X509Certificate2(
      HttpContext.Current.Server.MapPath("test-server.cert"));
  RSACryptoServiceProvider csp = (RSACryptoServiceProvider) cert.PublicKey.Key;

  // Hash the data
  SHA1Managed sha1 = new SHA1Managed();
  UnicodeEncoding encoding = new UnicodeEncoding();
  byte[] data = encoding.GetBytes(text);
  byte[] sign = Convert.FromBase64String(signature);
  byte[] hash = sha1.ComputeHash(data);

  return csp.VerifyHash(hash, CryptoConfig.MapNameToOID("SHA1"), sign);
} 
```

但结果总是错误的:(

我有一个 OpenSSL 示例：

```
openssl base64 -d -in signature -out signature.bin
openssl dgst -sha1 -verify test-server.pub -signature signature.bin from_gateway 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:16:24.190

我怀疑使用 UnicodeEncoding 可能是失败的原因。如下所示，ASCIIEncoding 和 UnicodeEncoding 的字节不相同，因为 ASCII 是 8 位编码，而在 Windows 中，Unicode 编码是 16 位宽。在您的另一个问题中，您使用了 ASCIIEncoding[无法获得签名。](https://stackoverflow.com/questions/11184890/can-not-get-signature)因此，假设在文本/字符串的 ASCIIEncoding 字节上计算签名并使用 UnicodeEncoding 进行验证显然不匹配。

```
string text = "Hello";
Console.WriteLine("ASCIIEncoding bytes length: {0}", new ASCIIEncoding().GetBytes(text).Length);
Console.WriteLine("UnicodeEncoding bytes length: {0}", new UnicodeEncoding().GetBytes(text).Length); 
```

输出

```
ASCIIEncoding bytes length: 5
UnicodeEncoding bytes length: 10 
```

# php - 能PHP中的元素有大写字母和空格

> ID：11221879
> 
> 赞同：2
> 
> 时间：2012-06-27T08:06:45.687
> 
> 标签：php, forms

表单中的元素是否`<input>`需要是一个单词，无论是整体还是使用下划线，还是可以有空格？

```
<input name="This is a name" />

<?php var_dump($_POST['This is a name']); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:21:16.837

表单名称属性可能包含空格，但您会发现在 PHP 中，空格（和句点）在 // 数组中被替换`$_GET`为下划线`$_POST`：`$_REQUEST`

```
<pre><?php var_dump($_REQUEST, $_GET, $_POST); ?></pre>

<form method="get">
    <input name="This is a name" value="This is a value" />
    <input type="submit" />
</form> 
```

使用“get”或“post”方法，输入将被键入`This_is_a_name`。

参考：[PHP：来自外部源的变量](http://uk3.php.net/manual/en/language.variables.external.php#example-83)（注意下面的示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:12:18.333

是的，表格中的输入应该是一个单词。它们可以有下划线或数字，也可以是大写字母，但您指定的名称中不应有空格。还要确保您没有在名称中输入特殊字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:42:53.380

不应使用空格，因为它们已替换为`_`. 您可以使用下划线代替空格来避免强制替换。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T08:09:02.203

它们必须是一个单词，但可以有数字和下划线。

# facebook - 使用 OmniAuth 和 Rails 获取用户当前的 Facebook 状态

> ID：11221880
> 
> 赞同：0
> 
> 时间：2012-06-27T08:06:47.263
> 
> 标签：facebook, ruby-on-rails-3, oauth-2.0, omniauth

正如您可能从标题中猜到的那样，我正在尝试使用 OmniAuth 来获取我的用户当前的 Facebook 状态（用于新的选择加入功能）。我已将必要的范围选项传递给提供程序方法，在omniauth 初始化程序中。我知道那是一口，对不起。这段代码应该有帮助：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_ID'], ENV['FACEBOOK_SECRET'], { scope: 'user_status' }
end 
```

我知道这部分有效，因为在 OAuth 对话期间，Facebook 会提示用户允许访问他们的状态消息。所以，问题是我希望他们的状态与其他用户信息一起在 Auth Hash 中返回，但它只是不存在。

```
def callback
  raise request.env['omniauth.auth'].to_yaml
end 
```

是的，这过于简单了，但我认为您并不关心我的 before_filters 等。

我已经用谷歌搜索了大约 2 小时，我发现的所有示例都是人为设计的。涵盖范围的只提到如何请求权限，而不是如何实际获取数据。

SO上有[一个类似的未回答的问题](https://stackoverflow.com/questions/8268395/how-do-i-get-facebook-profile-data-from-an-omniauth-login-request)，但它太老了，我认为复活它不是一个好主意。

我会很感激任何帮助。谢谢！

* * *

**7月3日更新：**

谢谢你的帮助！我听取了您的建议，并使用来自 auth 哈希的令牌来请求用户的当前状态，如下所示：

```
FbGraph::User.me(@auth[:credentials][:token]).posts.first.message 
```

**对于未来的读者：**重要的是要注意令牌在大约 2 个月后过期，并且每次用户更改密码时。您*可能*希望在用户的令牌即将到期时通知他们。根据我在 FB 文档中收集到的信息，到期日期以**Unix Timestamp**的形式表示。您可以将其转换为更有用的东西，例如像这样的**Ruby DateTime**：

```
expires_at = Time.at(@auth[:credentials][:expires_at]).to_datetime 
```

然后，您可以将令牌保存在模型中并调用**过去吗？**以确保您的应用不会尝试使用无效令牌。

```
do_something unless expires_at.past? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:58:44.350

当您设置`user_status`权限（并且用户批准）时，Facebook 会授予您的应用程序读取该用户状态消息的权限。在身份验证过程中不会返回任何用户状态消息，您必须发出单独的调用来检索用户的状态更新。

在您的应用获得许可后，您可以使用[fb_graph 之](https://github.com/nov/fb_graph)类的 gem向 Facebook 发出后续请求。这是一个如何将其与 OmniAuth 集成的示例：

```
user = FbGraph::User.new('me', :access_token => session[:omniauth]["credentials"]["token"])
user.fetch 
```

您可以使用的其他宝石是[koala](https://github.com/arsduo/koala)和[oauth2](https://github.com/intridea/oauth2)。[这是使用 oauth2 w/Facebook 的示例](http://www.intridea.com/blog/2010/4/22/oauth2-gem-just-in-time-for-facebook-graph)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:39:43.293

据我所知，状态（stati）不会作为身份验证哈希的一部分返回。您必须在获得令牌后提出此请求。例如（使用考拉宝石）：

```
api = Koala::Facebook::API.new(auth.credentials.token)
api.get_connections('me', 'statuses').first 
```

您可以使用图形资源管理器检查它：

[http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fstatuses](http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fstatuses)

# django - 在不使用上下文处理器的情况下从模板访问模型的常量

> ID：11221881
> 
> 赞同：2
> 
> 时间：2012-06-27T08:06:48.753
> 
> 标签：django

我有一个模型，它定义了一些常量，如下所示：

```
class Order(models.Model):
    WAITING = 0
    APPROVED = 1
    DISAPPROVED =2 
```

我想在我的模板中显示一些条件标签，例如，如果显示的订单状态为 WAITING，则显示沙漏图标。

目前我正在像下面那样做，但我不喜欢它，因为那样，我需要跟踪每个常量的值：

```
{% if order.status == 0 %}
    your order is waiting approval.
{% endif 
```

如何从我的模板中访问 Order.WAITING、Order.APPROVED 和 Order.DISAPPROVED 常量？我想要实现的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T08:57:01.887

大概`order`是 的一个实例`Order`，因此它已经可以访问类常量。所以这会起作用：

```
if order.status == order.WAITING 
```

# c# - 获取所有出现的子字符串匹配模式

> ID：11221883
> 
> 赞同：1
> 
> 时间：2012-06-27T08:06:56.023
> 
> 标签：c#, regex

我有一个在这个表单上的字符串：

```
"Some text [asd](fgh) Lorem Ipsum [qwert](y)" 
```

您可能会将其识别为降价语法。

我想用这样的链接替换所有出现的模式：

```
<a href="fgh">asd</a> 
```

最好的方法是什么？我可以毫无问题地进行实际替换，但我不确定如何识别子字符串。我怀疑正则表达式是要走的路？

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:23:06.410

是的，我认为正则表达式在这里是可以的：

```
resultString = Regex.Replace(subjectString, 
    @"\[     # Match [
    (        # Match and capture in group 1:
     [^][]*  #  Any number of characters except brackets
    )        # End of capturing group 1
    \]       # Match ]
    \(       # Match (
    (        # Match and capture in group 2:
     [^()]*  #  Any number of characters except parentheses
    )        # End of capturing group 2
    \)       # Match )", 
    "<a href=\"$2\">$1</a>", RegexOptions.IgnorePatternWhitespace); 
```

# c# - 从文件中读取字节并使用 if else 语句的值来设置布尔变量。C＃

> ID：11221887
> 
> 赞同：0
> 
> 时间：2012-06-27T08:07:17.123
> 
> 标签：c#

很基本的问题。我使用`ByteReader`. 该字节是两个值之一（`0x42`或`0x4C`）。现在取决于我想设置一个布尔值。现在我有这个：

```
byte myByte = br.readByte();
bool myBoolean = true;

if(myByte == 0x4C) myBoolean = true;
else if(myByte == 0x42) myBoolean = false;
else return; 
```

我要避免的是这两个变量。我只想有一个布尔值。像这样

```
myBoolean = myByte == 0x4C ? true : false; 
```

问题是这个表达式只检查`0x4c`而不是`0x42`

我只能调用 ReadByte() 一次，因为读取位置增加了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:15:52.423

您想考虑三个不同的值（`0x42`和`0x4C`其他任何值）和三个不同的结果（`myBoolean = true`、`myBoolean = false`、`return`）。因此，单一的比较是不够的。

但是，您可以使用 switch 语句使代码更整洁，并避免使用`byte`变量：

```
bool myBoolean;
switch (br.ReadByte()) {
    case 0x4C:
        myBoolean = true;
        break;
    case 0x42:
        myBoolean = false;
        break;
    default:
        return;
} 
```

# javascript - 字符串可用签入for循环

> ID：11221889
> 
> 赞同：0
> 
> 时间：2012-06-27T08:07:19.743
> 
> 标签：javascript, string, if-statement, for-loop

我有这些猫品种

```
cats = [
'Abyssinian',
'Balinese',
'Bombay',
'Birman']; 
```

现在写的代码一般是这样的

```
 for(var i in cats)
 {
  ... do
 } 
```

现在我必须在 javascript 中修改相同的函数。我只能修改看看是否`i`是任何`Balinese`或`Bombay`..然后做这些

我在想

```
 for(var i in cats)
 {
  if(i == 'Balinese' || i == 'Bombay'){
  ... do
  }
 } 
```

相反，我想要像`i`contains之类的东西，而不是在中间`Balinese,Bombay`写子句？`|`

```
 for(var i in cats)
 {
  if(i.contains('Balinese', 'Bombay'){   //this would be better, suggestions?
  ... do
  }
 } 
```

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:40:33.150

**试试这个代码，**

*这会在不支持的浏览器中添加 .indexOf()*

```
if (!Array.prototype.indexOf) {  
    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {  
        "use strict";  
        if (this == null) {  
            throw new TypeError();  
        }  
        var t = Object(this);  
        var len = t.length >>> 0;  
        if (len === 0) {  
            return -1;  
        }  
        var n = 0;  
        if (arguments.length > 0) {  
            n = Number(arguments[1]);  
            if (n != n) { // shortcut for verifying if it's NaN  
                n = 0;  
            } else if (n != 0 && n != Infinity && n != -Infinity) {  
                n = (n > 0 || -1) * Math.floor(Math.abs(n));  
            }  
        }  
        if (n >= len) {  
            return -1;  
        }  
        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);  
        for (; k < len; k++) {  
            if (k in t && t[k] === searchElement) {  
                return k;  
            }  
        }  
        return -1;  
    }  
} 
```

*在 Array 原型中添加 contains 方法*

```
 Array.prototype.contains = function(){ 
       for(var i=0,len=arguments.length;i<len;i++){
          if(this.indexOf(arguments[i]) !== -1){ 
              return true;
          } 
       }
       return false;
    } 
```

现在，你可以这样使用，

```
var cats = [
'Abyssinian',
'Balinese',
'Bombay',
'Birman'];

if(cats.contains('Balinese')){
  console.log('Balinese');
}

if(cats.contains('Balinese','Bombay')){
  console.log('Balinese,Bombay');
}

if(cats.contains('lines','Bombay')){
  console.log('lines,Bombay');
}

if(cats.contains('lines','mbay')){
  console.log('lines,mbay');
} 
```

如果您使用的是 jQuery，这段代码可以变得更简单:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:17:09.363

尝试嵌套循环？

```
var cats = ["Abyssinian", "Balinese", "Bombay", "Birman"];
var thisAndThat = ["Abyssinian", "Apple", "Siberian", "Windows", "StackOverflow"];

for(var i in cats) {
    for(var x in thisAndThat) {
        if(cats[i] == thisAndThat[x]){
            ... do
        }
    }
} 
```

**使用 jQuery**

```
$.each(thisAndThat, function(key, value){
  if( $.inArray(value, cats) > -1 ){
    alert(value+" is inside the cats array.");
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:28:00.373

首先，重要的是要意识到，如果您正在遍历一个 javascript 数组，`for...in`那么您必须使用该`hasOwnProperty`方法：

```
for(var i in cats){
    if(cats.hasOwnProperty(i))
        console.log(cats[i]);        
} 
```

你真的应该`for(;;)`像这样使用：

```
for(var i=0;i<cats.length;i++){
   console.log(cats[i]);
} 
```

除此之外，您正在寻找`Array.indexOf`现代浏览器支持但在旧浏览器中的支持可能较少 - 这就是为什么大多数框架（jQuery、Moo、原型等）定义了他们自己的这种方法的变体（参见这个问题的[答案](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)更多详情）。

```
var cats = ["Abyssinian","Balinese","Bombay","Birman"];

var test = ["Abyssinian","Balinese"];

for(var i in cats){
    if(cats.hasOwnProperty(i) && test.indexOf(cats[i]) != -1)
        console.log(cats[i]);        
} 
```

现场示例：http: [//jsfiddle.net/4xJsg/](http://jsfiddle.net/4xJsg/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T08:32:54.333

不建议使用 for-in 循环，因为它们比 for、while 或 do-while 慢七倍。除了 for-in，您也可以使用 for-each，它不如 for 或 while 快，但更类似于 for-in 循环。

将它与正则表达式结合起来，我的方法是：

```
var cats = [
    'Abyssinian',
    'Balinese',
    'Bombay',
    'Birman'
];

cats.forEach(function(cat, index){
    if(cat.match(/Abyssinian|Birman/)){
    // Do what you want
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T08:24:25.430

检查此代码，

```
var cats=['Abyssinian', 'Balinese', 'Bombay', 'Birman'];

Array.prototype.contains=function(incattype){

    for(var i=0; i<cats.length;i++){

        if(cats[i]==incattype) {
            return true;
        } else{
             return false;
        }      
    }
};

  var catslist=['Abyssinian', 'Balinese', 'Bombay11' ];

    for(var i=0; i<catslist.length;i++){

        document.write(cats.contains(catslist[i]));
    } 
```

关联;-

[http://jsfiddle.net/fPdej/2/](http://jsfiddle.net/fPdej/2/)

# c# - 在 REST Api 调用中传递字典或对象？

> ID：11221890
> 
> 赞同：3
> 
> 时间：2012-06-27T08:07:23.740
> 
> 标签：c#, json, rest

我正在为我的业务开发一个 REST Api（使用 C#）并试图保持它相当干净和简单。我正在努力的设计决策之一是说你有一个资源 uri：

www.mydomain.com/Api/Orders

因此，要创建一个订单，您需要通过以下 json 对此 uri 进行 POST：

```
{
   "ProductNumber": "12345A",
   "Quantity": 5
   "Cost" : 250.5
   "CustomerId" : "912AFD52-8F2F-43A2-87FF-EB65D0A8FD8C"
   ...etc
} 
```

但是在服务器端，我最初认为确保传入的 json 序列化到底层对象模型是一个多么好的主意，然后我可以直接使用该对象。然而，像 Id、CreatedOn、ModifiedOn 等这样的问题一直存在。

在我的对象模型中，我希望在创建对象时生成 Id，并在将其插入数据库时​​设置 CreatedOn 等。所以理想情况下，我希望这些属性是只读的，但是如果它们是只读的，那么当 json 序列化为一个对象时，就不会填充 Id。如果不让它们只读，那么可能有人可以在 json 中触发并更改这些属性。

所以我在想我是否最好将json序列化为字典，然后创建从字典中提取属性的对象？

老实说，我对整件事有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:15:14.447

仅仅因为有人在对您的服务的请求中说了些什么并不意味着您必须这样做。一种简单的方法是创建一个他们可以设置的属性的白名单，并通过对象的键并删除白名单上的所有内容。然后，在其中填写您需要但由服务器生成的值。（您还应该验证允许的键值的格式是否符合您的预期。）

# c# - 如何在按钮点击中设置事件的优先级？

> ID：11221895
> 
> 赞同：1
> 
> 时间：2012-06-27T08:07:55.767
> 
> 标签：c#, javascript, asp.net

在这里，我需要先调用一个 javascript 函数，一段时间后，我需要在同一个按钮单击事件上调用 ac# 函数。是否可以？

```
 <asp:ImageButton ID="imgBTNExportPPT" runat="server" Width="15" Height="15" border="0" 
 OnClientClick="JavaScript:exportCharts('JPG');" OnClick="imgBTNExportPPT_Click" ImageUrl="~/Images/PPT_icon.png" /> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:36:36.383

Javascript函数在客户端执行。C# 函数在服务器端执行。如果没有进一步的临时化或异步请求，客户端 onClick 处理函数将在服务器端 onClick 处理函数之前执行。

如果我明白了，您要导出的图像在客户端处理后可用，不是吗？因此，只有在客户端处理完成后才执行服务器端处理。

没有 AJAX？看看[这里](https://stackoverflow.com/questions/4219240/asp-net-button-click-w-javascript-are-you-sure-prior-to-post-back)。

这是一些代码：

```
<script>
  function exportCharts(input)
  {
    //business here
    if(business works)
      return true;
    else
      return false;
  }

</script>

  <asp:ImageButton ID="imgBTNExportPPT" runat="server" Width="15" Height="15" border="0"  ImageUrl="~/Images/PPT_icon.png"
    OnClientClick="return exportCharts('JPG');"
    OnClick="imgBTNExportPPT_Click" /> 
```

仅当 exportCharts 返回 true 时，才会执行服务器端 imgBTNExportPPT_Click 处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:12:47.713

为什么不通过 Ajax 调用来调用服务器端方法

你可以把它放在你的 JavaScript 方法的末尾

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:18:24.120

如果“一段时间后”您的意思是“必须在 3 秒后执行一个动作”，那么您可以使用[setTimeout](http://www.w3schools.com/js/js_timing.asp) `setTimeout(functionToCallAfterIntervalToWait, intervalToWait)`

如果您想调用服务器端方法，您可以在 functionToCallAfterIntervalToWait 中使用 ajax 调用 - 如果您需要有关 ajax 调用的帮助，请发表评论

有关如何从 javascript 调用您的 asp.net 服务器方法的示例，请参阅[此](http://weblogs.asp.net/karan/archive/2010/09/12/calling-server-side-method-using-jquery-ajax.aspx)博文（google call asp .net server method from javascript for more examples/tutorials）

假设您正在使用 jQuery，您将编写（使用[.ajax()](http://api.jquery.com/jQuery.ajax/)）：

```
$.ajax( { 
url:"yourAspxPage/NameofTheMethodToCall", 
data: {"nameOfParameter": valueOfParameter}, 
success: function (data) {
//this function will be called after the server side function executes successfuly
}); 
```

如果您希望在其他客户端操作之后进行此函数调用，请确保在其他命令下方（之后）编写。

# python - M2Crypto RSA.sign 与 OpenSSL rsautl -sign

> ID：11221898
> 
> 赞同：2
> 
> 时间：2012-06-27T08:08:11.423
> 
> 标签：python, openssl, digital-signature, pki, m2crypto

M2Crypto 和 OpenSSL CLI 似乎没有创建相同的数字签名。这是我在 Python 中使用的代码：

```
import M2Crypto
rsa = M2Crypto.RSA.load_key("privkey.pem")
open("sig_m2crypto", "w").write(rsa.sign("md5-digest", "md5")) 
```

这是 OpenSSL 的命令行：

```
echo "md5-digest" | openssl rsautl -sign -inkey privkey.pem > sig_openssl 
```

相同的输入，和的结果`sig_m2crypto`总是`sig_openssl`不同的。意义在于我无法验证使用 M2Crypto 和 OpenSSL 生成的签名，反之亦然。

我的代码中是否缺少任何使它们彼此不兼容的内容？

*附加信息：*我在 Windows 7 下使用 M2Crypto 0.21.1 和 OpenSSL 1.0.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:12:34.880

试试这个：

```
echo -n "test" | openssl md5 -sign privkey.pem > sig_openssel 
```

（这`-n`很重要，因此不会在字符串后添加额外的换行符）*

在python方面：

```
import M2Crypto
import hashlib
rsa = M2Crypto.RSA.load_key("privkey.pem")
digest = hashlib.new('md5', 'test').digest()
open("sig_m2crypto", "w").write(rsa.sign(digest, "md5")) 
```

现在你的签名应该是相同的。

要查看签名文件中的实际内容，您可以使用：

```
openssl rsautl -inkey privkey.pem -verify -in sig_m2crypto -asn1parse 
```

和

```
openssl rsautl -inkey privkey.pem -verify -in sig_m2crypto -raw -hexdump 
```

正确的签名包含有关使用的摘要的信息，如果您只是使用，则不包含这些信息`openssl rsautl -sign ...`

*编辑：至少在linux上，因为你在windows上，我真的不知道你是否需要它。

# objective-c - 目标 C NSStack 和 NSQueue？

> ID：11221902
> 
> 赞同：10
> 
> 时间：2012-06-27T08:08:20.170
> 
> 标签：objective-c, nsmutablearray, stack

在 Java 中有一个很好的库类 java.util.Stack 实现了 push 和 pop 方法。Objective C中有类似的东西吗？

我发现只有 MutableArray。看起来很奇怪，我必须实现像堆栈这样的基本东西，必须有“NSStack”、“NSQueue”和其他类似的东西。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T09:26:04.067

没有人应该忘记 Objective-C 提供了一个非常好的变体：Objective-C++。并且 C++ 标准库提供了您需要的、经过良好测试、调试、稳定且尽可能快的数据结构。最好，他们将与 ARC 完美配合。最好的是，如果您有感觉，您甚至可以在指针`__weak`或指针之间进行选择。`__strong`

看看`<queue>`和`<stack>`。

也就是说，它`NSMutableArray`非常适合 stacks: `-addObject:`，`-lastObject`并且`-removeLastObject`会以良好的性能很好地完成这项工作。

C++ 可能很冗长。非常冗长。但它也有一些优雅，还有一些非常强大的结构。标准库的某些部分真正闪耀，一旦掌握了外星语法，数据结构就是其中的明珠。无论如何，它可以用一些 typedef 隐藏。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-27T08:12:41.317

我在[这里](https://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Model/MJGStack.h)有一个堆栈实现。它`NSMutableArray`用来做肮脏的工作，这真的不是那么糟糕。但是Foundation没有内置任何东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-03T01:20:20.677

你（和我一样）可能会担心使用 NSMutableArray 的出队性能，因为在出​​队时你必须移除 NSMutableArray 中的第一个对象，而移除会导致数组中所有对象的移位。[但是根据我在这里](https://github.com/jackjia1/qbean)所做的测试，这不是必需的：对于包含 100000 个对象的 NSMutableArray，通过连续删除第一个对象来删除所有对象比连续删除最后一个对象慢 100 毫秒。我还将使用一个 NSMutableArray 与使用两个 NSMutableArray 进行了比较。虽然可以通过使用两个 NSMutableArrays 来避免删除第一个对象，这两个 NSMutableArrays 用作两个堆栈，但双堆栈解决方案实际上更慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T08:13:59.317

据我所知，sdk 中没有堆栈和队列之类的东西。[这里](https://stackoverflow.com/questions/817469/how-do-i-make-and-use-a-queue-in-objective-c)
有一个队列实现的例子。

# javascript - 覆盖 jquery .load() 函数 - 处理回调

> ID：11221905
> 
> 赞同：0
> 
> 时间：2012-06-27T08:08:27.003
> 
> 标签：javascript, jquery, overriding

我已经重载了 jQuery 的 .load() 函数来满足我的 CrossDomain 要求。

```
(function ($) { 
    var _load = $.fn.load; 
    $.fn.load = function(url, params, callback) { 
        if (url.match('^http')) { 
            $(this).load("read_page.php?p="+url);
            return this;
        }
        else{
            return _load.apply(this, arguments); 
        }
    }
})(jQuery); 
```

“read_page.php”调用 PHP curl 从跨域获取页面。

调用上述重写函数的代码部分是：

```
$(trg).load(user_folder+shw+qs, function(){
                        showErr("Updation Successfull", trg);
                        $(".divErr").css("border-color","#4F8A10");
                        $(".divErr").css("background","url(images/img_suc.png) no-repeat 10px 50%, left;");
                        $(".divErr").css("background-color","#DFF2BF");
                    }).html(vLoading); 
```

**.html(vLoading)**部分运行良好，因为我的代码返回**this**的值。

**function(){...}**部分不起作用，因为我的代码没有处理**回调**的部分

 **需要帮助来处理我的自定义覆盖函数中的**回调**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:16:21.297

试试这个版本：

```
(function ($) { 
    var _load = $.fn.load; 
    $.fn.load = function(url, params, callback) { 
        if ( url.match('^http') ) {
            var params = params || {},
                callback = callback || function () {};
            _load.call(this, "read_page.php?p="+url, params, callback );
            return this;
        }
        else {
            return _load.apply(this, arguments);
        }
    }
})(jQuery); 
```**

# websocket - 我们使用一个 websocket 端口来处理多种请求是否合理？

> ID：11221908
> 
> 赞同：0
> 
> 时间：2012-06-27T08:08:47.850
> 
> 标签：websocket, phpwebsocket

当socket中有很多用户在线时，我们使用一个websocket端口来处理多种请求是否合理？
这在安全性和性能方面怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:32:17.177

如果您的服务器是正确的多线程或多进程，那么在一个或多个端口上运行之间没有性能差异。此外，即使您的套接字服务器（Websocket 与否）在单个端口上进行响应，实际通信也发生在每个连接的不同服务器端口上。

为了与现有的 Web 基础设施兼容，您可能希望在标准 HTTP 端口（80 和 443）上运行 WebSocket 服务器，因此这已经意味着多个客户端连接到一个端口（并且可能使用处理或可以代理 WebSocket 连接的 Web 服务器）。

您的 WebSocket 服务器应用程序的安全性与您的应用程序的设计方式有关，而不是与您使用多个侦听端口还是仅使用一个端口来运行它有关。

有一些[WebSocket 特定的安全注意事项](https://stackoverflow.com/questions/11132897/are-websockets-secure-or-not/11141595#11141595)，但在大多数情况下，WebSocket 服务器与 HTTP 服务器（或实际上任何 TCP 服务）相同的安全问题和最佳实践。

# php - LiveSearch PHP、JavaScript 并在多个领域使用

> ID：11221910
> 
> 赞同：2
> 
> 时间：2012-06-27T08:08:58.887
> 
> 标签：php, javascript, mysql, livesearch

我是 JavaScript 新手，一直在使用 PHP、Ajax、Javascript 和 mysql 进行实时搜索。

它适用于第一个 ID 字段，但我总共需要使用 8 个输入字段，我尝试编辑 getElementById 但搜索不起作用。

我应该如何编辑 JavaScript 以允许在 8 个输入字段中的每一个上使用实时搜索，并且仍然将所选搜索项作为字段值提供？

JavaScript：

```
function liveSearch()
{
var url = "livesearch.php";
var s = document.getElementById('med1').value;
var params = "&s="+s;
http.open("POST", url, true);

http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");

http.onreadystatechange = function() {
if(http.readyState == 4 && http.status != 200) {
document.getElementById('searchResults1').innerHTML='<li>Loading...</li>';
}
if(http.readyState == 4 && http.status == 200) {
document.getElementById('searchResults1').innerHTML = http.responseText; 
} 
}
http.send(params);
}

function sendToSearch(str){
document.getElementById('med1').value = str;
document.getElementById('searchResults1').innerHTML = "";
} 
```

PHP：

```
$s = $_REQUEST["s"];
$output = "";
$s = str_replace(" ", "%", $s);
$query = "SELECT * FROM drug_list WHERE NAME LIKE '%" . $s . "%' or COMMON_NAME LIKE '%" . $s."%' or ALIAS LIKE '%" . $s . "%' LIMIT 10";
$squery = mysql_query($query);
if((mysql_num_rows($squery) != 0) && ($s != "")){
while($sLookup = mysql_fetch_array($squery)){
$displayName = $sLookup["COMMON_NAME"];
$product_name = $sLookup['NAME'];
$dose = $sLookup["DOSAGE"];
$units = $sLookup["UNITS"];
$output .= '<li onclick="sendToSearch(\''.$product_name.' (' . $displayName .') '.$dose.' '.$units. '\')">'.$product_name.' (' . $displayName .') '.$dose.' '.$units.'</li>';
}
}   

echo $output; 
```

HTML 表格（部分 - 使用 ID='med(n)' 的 8 种药物）：

```
<td size='20'>Medication 1</td><td><input type='text' name='med1' id='med1' size='40' title='i.e.-Metoprolol 50 mg twice a day' onkeyup='liveSearch()' /></td><td size='40'><input type='text' name='med1_reason' size='40' title='i.e.-Highblood Pressure' /></td>
</tr>
<tr><td colspan='3' align='left'><span style='color:blue; cursor:pointer'><ul id="searchResults1"></ul></span></td></tr>
<tr>
<td size='20'>Medication 2</td><td><input type='text' name='med2' id='med2' size='40' title='i.e.-Metoprolol 50 mg twice a day' onkeyup='liveSearch()' /></td><td size='40'><input type='text' name='med2_reason' size='40' title='i.e.-Highblood Pressure' /></td>
</tr>
<tr><td colspan='3' align='left'><span style='color:blue; cursor:pointer'><ul id="searchResults2"></ul></span></td></tr>
<tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:01:09.170

这是因为您明确使用了 id 为“med1”的对象。您必须像这样修改您的代码：

Javascript：

```
function liveSearch(obj, no) { 
    var url = "livesearch.php"; 
    var s = obj.value; 
    var params = "&s="+s+"&no=" + no; 
    http.open("POST", url, true); 

    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
    http.setRequestHeader("Content-length", params.length); 
    http.setRequestHeader("Connection", "close"); 

    http.onreadystatechange = function() { 
        if(http.readyState == 4 && http.status != 200) { 
            document.getElementById('searchResults' + no).innerHTML='<li>Loading...</li>'; 
        } 
        if(http.readyState == 4 && http.status == 200) { 
            document.getElementById('searchResults' + no).innerHTML = http.responseText;  
        }  
    } 
    http.send(params); 
} 

function sendToSearch(str, no){ 
    document.getElementById('med' + no).value = str; 
    document.getElementById('searchResults' + no).innerHTML = ""; 
} 
```

HTML：

```
<td size='20'>Medication 1</td><td><input type='text' name='med1' id='med1' size='40' title='i.e.-Metoprolol 50 mg twice a day' onkeyup='liveSearch(this,1)' /></td><td size='40'><input type='text' name='med1_reason' size='40' title='i.e.-Highblood Pressure' /></td> 
</tr> 
<tr><td colspan='3' align='left'><span style='color:blue; cursor:pointer'><ul id="searchResults1"></ul></span></td></tr> 
<tr> 
<td size='20'>Medication 2</td><td><input type='text' name='med2' id='med2' size='40' title='i.e.-Metoprolol 50 mg twice a day' onkeyup='liveSearch(this,2)' /></td><td size='40'><input type='text' name='med2_reason' size='40' title='i.e.-Highblood Pressure' /></td> 
</tr> 
<tr><td colspan='3' align='left'><span style='color:blue; cursor:pointer'><ul id="searchResults2"></ul></span></td></tr> 
<tr> 
```

PHP：

```
$s = mysql_real_escape_string($_REQUEST["s"]); 
$output = ""; 
$s = str_replace(" ", "%", $s); 
$query = "SELECT * FROM drug_list WHERE NAME LIKE '%" . $s . "%' or COMMON_NAME LIKE '%" . $s."%' or ALIAS LIKE '%" . $s . "%' LIMIT 10"; 
$squery = mysql_query($query);

if((mysql_num_rows($squery) != 0) && ($s != "")){ 
    while($sLookup = mysql_fetch_array($squery)){ 
        $displayName = $sLookup["COMMON_NAME"]; 
        $product_name = $sLookup['NAME']; 
        $dose = $sLookup["DOSAGE"]; 
        $units = $sLookup["UNITS"]; 
        $output .= '<li onclick="sendToSearch(\''.$product_name.' (' . $displayName .') '.$dose.' '.$units. '\',' . $_REQUEST['no'] . ')">'.$product_name.' (' . $displayName .') '.$dose.' '.$units.'</li>'; 
    } 
}    

echo $output; 
```

我认为这应该对你有用，祝你好运！

# sql-server-2005 - vb.net 中的日期时间格式

> ID：11221921
> 
> 赞同：-1
> 
> 时间：2012-06-27T08:09:42.767
> 
> 标签：sql-server-2005, vb.net-2010

我正在使用以下查询使用 VB.NET 4.0 从 SQL Server 2005 获取数据

```
strSQL = "SELECT EmpNo,
                 Sum(Cast(Substring(OTHours, 0, 3)AS FLOAT)) AS Hour,
                 Sum(Cast(Substring(OtHours, 4, 5)AS FLOAT)) AS Minutes
          FROM   TMSTrans
          WHERE  CONVERT(VARCHAR, datein, 103) >= '01/06/2012'
                 AND CONVERT(VARCHAR, datein, 103) <= '27/06/2012'
          GROUP  BY EmpNo" 
```

但是返回了不正确的数据——我认为这是一个日期范围问题。在表中，我有一个日期时间字段，其中存在数据，例如`01/04/2012 00:00:00`. 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:53:29.640

我建议您`year month day`在查询中使用日期格式。US`Month Day Year`用作其日期格式，因此如果您`01/06/2012`在查询中使用，系统可能会识别`6 Jan 2012`. 因此，您查询实际上是获取 和 之间的日期`6 January`范围`27 June`。

试试这个：

```
strSQL = "SELECT EmpNo,
             Sum(Cast(Substring(OTHours, 0, 3)AS FLOAT)) AS Hour,
             Sum(Cast(Substring(OtHours, 4, 5)AS FLOAT)) AS Minutes
      FROM   TMSTrans
      WHERE  CONVERT(VARCHAR, datein, 112) >= '20120601'
             AND CONVERT(VARCHAR, datein, 112) <= '20120627'
      GROUP  BY EmpNo" 
```

# sql - 如何在 SQL 报告服务中自定义我的查询

> ID：11221923
> 
> 赞同：1
> 
> 时间：2012-06-27T08:09:52.940
> 
> 标签：sql, sql-server-2008, reporting-services

> 我想在 SQL Reporting services 中自定义我的查询。它没有从数据集中添加和删除代码的选项。

我的查询是：

```
WITH Requests AS
(
SELECT
CASE

WHEN Request LIKE '%greenhopper%'  THEN 'GreenHopper' 
WHEN Request LIKE '%gadget%'  THEN 'Dashboard' 
WHEN Request LIKE '%admin%'  THEN 'Admin'
WHEN Request LIKE '%AssignIssue%' or  Request LIKE '%AttachFile%'  THEN 'Update Issue'
WHEN Request LIKE '%Create%' THEN 'Create Issue'
WHEN Request LIKE '%EditIssue%'  THEN 'Edit Issue'
WHEN Request LIKE '%GET /browse%'  THEN 'Browse Project'
WHEN Request LIKE '%GET /sr/jira.issueviews:searchrequest-xml%'  THEN 'Export'
WHEN Request LIKE '%logout%' or Request LIKE '%Logout!default.jspa%'  THEN 'Logout' 
WHEN Request LIKE '%AddComment.jspa%'  THEN 'Comment'
WHEN Request LIKE 'GET /secure/projectavatar?pid%' THEN 'Project Avatar'

ELSE 'Others'
END RequestType
FROM LogData where (convert(nvarchar(10), TimeLog, 120) between (@StartDate) and  (@EndDate))
and ( CAST(TimeLog AS TIME) between  (@StartTiming) and  (@EndTiming))
)
SELECT
RequestType,
COUNT(*) RequesCount
FROM Requests
GROUP BY RequestType order by RequesCount DESC 
```

> 我希望有人可以根据自己的标准添加和删除“When Remove LIKE .........”语句。但问题是在报表服务的报表生成器中没有选项可以做这样的事情。
> 
> 我打算用 Java 制作一个单独的 GUI-Application 来进行配置，但是没有包含查询的文件。我不知道它存储在哪里以及如何存储。
> 
> 请有人告诉我如何找到此代码或一些解决方案来执行此操作。我附上报表生成器的屏幕截图

![报告生成器](../Images/812bf2d67c4ab31132bf4f21954cd861.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:07:47.937

做到这一点的唯一方法是从您的查询中创建一个表达式。单击查询框右侧的 Fx 按钮。您必须创建一个类似这样的表达式：

```
="With Requests as....When request like" + Parameters!QueryCriteria.Value + "Else 'Others'..." 
```

创建一个参数来存储来自用户的值（本例中为 QueryCriteria）。您需要在将查询转换为表达式之前构建报表，以便报表生成器可以正确构建数据集的字段。

# php - php imagick gif 调整所有帧的大小

> ID：11221927
> 
> 赞同：0
> 
> 时间：2012-06-27T08:10:21.013
> 
> 标签：php, resize, gif, imagick

我在使用 php imagick 调整所有框架的大小时遇到​​问题。它取自官方 php 文档示例[http://ir.php.net/manual/en/imagick.examples-1.php](http://ir.php.net/manual/en/imagick.examples-1.php)

```
/* Create a new imagick object and read in GIF */
$im = new Imagick("/tmp/bbb.gif");

/* Resize all frames */
foreach ($im as $frame) {
    /* 50x50 frames */
    $frame->thumbnailImage(50, 50);

    /* Set the virtual canvas to correct size */
    $frame->setImagePage(50, 50, 0, 0);
}

/* Notice writeImages instead of writeImage */
$im->writeImages("/tmp/zb.gif", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:01:00.863

试试这个页面上的例子：[http ://www.php.net/manual/en/imagick.coalesceimages.php](http://www.php.net/manual/en/imagick.coalesceimages.php)

根据 gif 的创建方式，您可能需要 Coalesce；也不是关于版本问题的评论。

# c# - Sharepoint 和 Excel 建议

> ID：11221928
> 
> 赞同：0
> 
> 时间：2012-06-27T08:10:33.127
> 
> 标签：c#, html, excel, sharepoint

大家，早安

我在使用 sharepoint 和 excel 时遇到了一些问题。

这是我的情况：

1.  我有一个共享点站点。

2.  我已经上传了一个 Excel 工作簿，其中包含我的文档库中的信息。

3.  我想在 excel 工作簿中**以表格格式（不是电子表格）**在页面上显示数据。并且表格**不能被编辑**。这意味着当我想编辑一些东西时，我必须去文档库并编辑excel文件。编辑 excel 文件后，该页面上的表格将自动更新为最新值。

4.  请帮助大家，我现在真的束手无策了。

祝大家有个美好的一天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:04:33.927

我建议使用 OpenXML 2.0 SDK 以编程方式打开电子表格并从电子表格中读取数据并使用 HTML 输出。

也许这篇文章会有所帮助：

[http://blogs.msdn.com/b/brian_jones/archive/2008/11/10/reading-data-from-spreadsheetml.aspx](http://blogs.msdn.com/b/brian_jones/archive/2008/11/10/reading-data-from-spreadsheetml.aspx)

# android - Android中PowerRequirement（位置）的含义

> ID：11221933
> 
> 赞同：3
> 
> 时间：2012-06-27T08:10:50.007
> 
> 标签：android, geolocation, location

标准类（http://developer.android.com/reference/android/location/Criteria.html）有电源要求标准。但显然没有解释它是如何工作的。有了 ACCURACY 就更清楚了。ACCURACY_HIGH - 需要 GPS 提供商。ACCURACY_MEDIUM -WiFi/移动网络。ACCURACY_Low - 移动网络。但是权力呢？如果它满足准确性要求，为什么我们需要这个标准？例如，如果我询问标准，将使用哪个提供程序： *locationCriteria.Accuracy = Accuracy.Fine; （仅需要 GPS）* 和 creteria： *locationCriteria.PowerRequirement = Power.Low; （它只需要非 GPS-priveder）*

根据这些要求，不应满足任何位置提供者的要求。然而，该程序尝试使用 GPS 提供程序。这其中没有什么是清楚的，也没有在网络中的任何地方没有解释。那么我需要挖掘Android源代码还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:19:09.910

> 根据这些要求，不应满足任何位置提供者的要求。然而，该程序尝试使用 GPS 提供程序。

[方法](http://developer.android.com/reference/android/location/LocationManager.html#getBestProvider%28android.location.Criteria,%20boolean%29)文档中对此进行[了`getBestProvider()`](http://developer.android.com/reference/android/location/LocationManager.html#getBestProvider%28android.location.Criteria,%20boolean%29)解释。`getBestProvider()`-- 几乎所有使用 a 的东西，`Criteria`除了`getProviders()`-- 都会放宽约束以尝试找到匹配项。功率要求是第一个放宽的。

# r - r中的单个游戏图

> ID：11221934
> 
> 赞同：1
> 
> 时间：2012-06-27T08:10:57.240
> 
> 标签：r, plot, gam

我使用了一个广义的加法模型来分析一些数据，现在希望绘制结果。

```
library(mgcv)
set.seed(2) ## simulate some data... 
dat <- gamSim(1,n=400,dist="normal",scale=2)
b <- gam(y~s(x0)+s(x1)+s(x2)+s(x3),data=dat)
plot(b,pages=1) 
```

从上面的示例中，如何将各个图保存到不同的 pdf 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:34:22.540

?plot.gam 告诉你有一个选择参数

```
library(mgcv)
set.seed(2) ## simulate some data... 
dat <- gamSim(1,n=400,dist="normal",scale=2)
b <- gam(y~s(x0)+s(x1)+s(x2)+s(x3),data=dat)
plot(b,pages=1)
plot(b, select = 1)
plot(b, select = 2) 
```

# php - MQL - 检查主题是否有关联的图像

> ID：11221938
> 
> 赞同：0
> 
> 时间：2012-06-27T08:11:03.963
> 
> 标签：php, freebase, mql

我正在使用 Freebase Image Service，例如。

[阿尼的形象](https://usercontent.googleapis.com/freebase/v1/image/m/0tc7)

但是，许多主题没有图像，例如。

[伏地魔](https://usercontent.googleapis.com/freebase/v1/image/m/0c8lv)

如何使用 MQL（和 PHP）检查主题以查看它是否具有关联的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:14:39.657

查看`/common/topic/image`属性 - 例如，

```
{
  "id": "/en/snow_leopard",
  "/common/topic/image": [{
    "id":   null,
    "name": null
  }]
}​ 
```

[查询编辑器链接](http://www.freebase.com/queryeditor?q=%7B%22id%22%3A%22%2Fen%2Fsnow_leopard%22%2C%22%2Fcommon%2Ftopic%2Fimage%22%3A%5B%7B%22id%22%3Anull%2C%22name%22%3Anull%7D%5D%7D)- 将其包装到 PHP 中应该很容易。

# iphone - ASIHTTPRequest iOS 调用一次但响应多次

> ID：11221941
> 
> 赞同：0
> 
> 时间：2012-06-27T08:11:16.170
> 
> 标签：iphone, ios, asihttprequest, response

我在我的 iOS 项目中遇到了 ASIHTTPRequest 的问题。我开始一个请求，但有时它响应两次或更多次。

当我开始请求时：

```
 [request addRequestHeader:@"User-Agent" value:@"ASIHTTPRequest"]; 
[request addRequestHeader:@"Content-Type" value:@"application/json; charset=utf-8"];
[request setRequestMethod:@"GET"];
request.timeOutSeconds = 60;
[request setShouldAttemptPersistentConnection:NO];
[request setDelegate:self];
[request setDidFinishSelector:@selector(getListProduct_OnSuccess:)];
[request setDidFailSelector:@selector(getListProduct_OnError:)];
[request startAsynchronous]; 
```

但它有时会遇到一次 getListProduct_OnSuccess ，但有时会遇到两次或更多。你能帮助我吗？谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:36:58.103

试试这个

```
NSURL *url = [NSURL URLWithString:@"yoururl"];    
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setRequestMethod:@"POST"];
    [request setPostValue:email forKey:@"username"];
    [request setPostValue:pasw forKey:@"pass"];
    [request setDelegate:self];
    [request startAsynchronous]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:01:03.490

使用这个 ASIHTTPRequestDelegate 方法，

```
// These are the default delegate methods for request status
// You can use different ones by setting didStartSelector / didFinishSelector / didFailSelector

- (void)requestFinished:(ASIHTTPRequest *)request; 

- (void)requestFailed:(ASIHTTPRequest *)request; 
```

在这些方法中，您可以设置选择器方法。

我认为这可能会帮助你

# actionscript-3 - 如何使用 as3 将舞台上的所有内容转换为影片剪辑

> ID：11221942
> 
> 赞同：0
> 
> 时间：2012-06-27T08:11:19.050
> 
> 标签：actionscript-3, flash, actionscript

我希望能够通过 ActionScript 将我在舞台上添加的所有内容转换为 MovieClip。

所以可以说我现在有：

```
stage.addChild(pic1);
stage.addChild(pic2); 
```

我拥有的 MovieClip 的实例在哪里`pic1`，`pic2`现在在这之后，我想通过代码将它们一起制作成一个 MovieClip，并能够访问该 MovieClip 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:56:46.583

如果您正在寻找一种快速的方法来为舞台上的*所有内容*重新设置父级，无论您是否知道实例名称，您都必须遍历舞台的所有子级。

```
var myMovieClip:MovieClip = new MovieClip(); // the MovieClip to contain your children
var l:int = stage.numChildren; // how many things are on the stage
for (var i:int = 0; i<l; i++){ // loop through all of them
     myMovieClip.addChild(stage.getChildAt(0)); //removes the bottom DisplayObject from the stage and adds it to your container
}
addChild(myMovieClip); //adds the complete MovieClip back to the stage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:51:30.893

允许交互的容器，例如。点击检测

```
var sprite:Sprite = new Sprite();
sprite.addChild(pic1);
sprite.addChild(pic2); 
```

根据上面的 crooksy88 回答，虽然我不确定在这种情况下使用 MovieClip 有什么好处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:30:25.560

```
var newMC:MovieClip = new MovieClip();
newMC.addChild(pic1);
newMC.addChild(pic2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:22:35.850

`Stage`并且`MovieClip`都继承自`DisplayObjectContainer`，它定义了方法[`addChild()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#addChild%28%29)。

这意味着您可以轻松地创建一个`MovieClip`并将其添加到阶段：

```
var container:MovieClip = new MovieClip();
stage.addChild(container); 
```

然后将其他 DisplayObjects 添加到其中：

```
container.addChild(pic1);
container.addChild(pic2); 
```

操纵位置、比例、旋转和其他类似属性会影响容器的内容。

# api - 如何检索商店的“单位制”公制（公斤，厘米）/英制（磅，英寸）

> ID：11221948
> 
> 赞同：1
> 
> 时间：2012-06-27T08:11:52.410
> 
> 标签：api, e-commerce, shopify

想知道获取为商店设置的“单位系统”的方法。商店从常规设置中设置单位系统，调整您的标准和格式。

我检查了 Shop、Cart、Order API 调用，但没有此信息。商店电话确实有`currency`信息，但没有单位系统信息。使用 API 调用获取 Shops Unit System 的方法是什么？

问候，

尼莱什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:43:52.860

目前无法通过 API 获得此功能，但将来可能会添加。仅供参考，所有重量均以克为单位。

# ruby-on-rails - 设计允许任何人通过其电子邮件地址查找用户！如何防止这种情况？

> ID：11221953
> 
> 赞同：5
> 
> 时间：2012-06-27T08:12:01.583
> 
> 标签：ruby-on-rails, devise, confirmation

设计允许用户电子邮件查找。

这是一个特定的隐私问题。问题是，如果您要求新的确认电子邮件，您可以输入您想要的任何电子邮件地址，如果在数据库中找不到它，您会得到“未找到”，因此任何人都可以检查某个电子邮件是否已注册。

有什么好的方法可以解决这个问题？我还没有将此发布到设计组，但我不确定这是否是“通缉”行为。

违规路线：/users/confirmation

我不能选择禁用设计的确认模块。任何人都有一个很好的解决方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T02:40:10.613

Devise 有一个偏执模式，可以帮助您避免用户枚举。您可以在 Devise wiki 上获得更多信息：

[https://github.com/plataformatec/devise/wiki/How-To:-Using-paranoid-mode,-avoid-user-enumeration-on-registerable](https://github.com/plataformatec/devise/wiki/How-To:-Using-paranoid-mode,-avoid-user-enumeration-on-registerable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-16T17:58:22.670

正如 Devise 在他们的文档中指出的那样，偏执模式不会避免用户在注册时枚举。如果您正在使用`confirmable`，您可以通过在所有用户尝试注册时显示检查其电子邮件的通知来解决此问题。

```
class RegistrationsController < Devise::RegistrationsController

  def create
    super do |resource|
      handle_nonunique_email if resource.errors.added?(:email, :taken)
      return if performed?
    end
  end

  private

  def handle_nonunique_email
    resource.errors.delete(:email)

    if resource.errors.empty?
      user = User.find_by_email(resource.email)
      user.send_confirmation_instructions unless user.confirmed?
      respond_with resource, location: after_inactive_sign_up_path_for(resource)
    end
  end
end 
```

我[在这里](http://vivianbrown.net/blog/rails-email-privacy.html)写了更多关于这个的内容。

# facebook - 使用 Open Graph API 创建生活事件

> ID：11221957
> 
> 赞同：1
> 
> 时间：2012-06-27T08:12:18.473
> 
> 标签：facebook, facebook-opengraph, facebook-timeline

通过 Facebook UI，用户可以在他的时间轴上创建一个所谓的“生活事件”（实际上是一个 Open Graph 活动）并为该活动添加特定属性，例如：

开始了新的工作；属性：雇主、职位、地点、时间、故事

Facebook[内置操作类型](https://developers.facebook.com/docs/opengraph/actions/builtin/)和[内置对象类型](https://developers.facebook.com/docs/opengraph/objects/builtin/)不包含任何会导致类似上述活动的内容。所以我的问题是：是否可以使用 Open Graph API 创建这样的“生活事件”，看起来类似于通过 Facebook UI 创建的那些，而无需定义我自己的操作和对象类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T20:28:43.350

无法为用户创建生活事件。虽然页面是可能的：

[https://developers.facebook.com/docs/graph-api/reference/life-event](https://developers.facebook.com/docs/graph-api/reference/life-event)

# java - 提供与旧版本 ECore 的向后兼容层

> ID：11221958
> 
> 赞同：1
> 
> 时间：2012-06-27T08:12:34.997
> 
> 标签：java, eclipse-emf

我使用 EMF 来存储我的应用程序的主要数据。但是，ECore 模型会随着时间而发展。每次发布新版本时，我都会为我的包使用不同的基本 URI。这样，文件存储在哪个版本中仍然非常清楚。

我想添加一个向后兼容层。这样，我还可以阅读旧版本并将它们转换为模型的新版本。我该怎么办？我可以只使用旧版本的 .Ecore 反射性地解析文件并尝试自动创建新模型吗？你们如何在实践中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:35:56.353

看看[EMF 食谱](http://wiki.eclipse.org/EMF/Recipes#XMI.2FXML_Serialization_Recipes)

# android - 循环处理程序

> ID：11221964
> 
> 赞同：0
> 
> 时间：2012-06-27T08:12:52.970
> 
> 标签：android, for-loop, handler

我必须更新需要大量时间的不同服务器数据。我必须根据条件更新数据。当我运行 for 循环时，它会卡住设备一分钟。我想通过处理程序来做其他任何其他选项（我想不出）。目前我正在做：

```
for(int i=0;i>10;i++)
{
if(i==0)
handler.post(runable-1);//Different server data
if(i==1)
handler.post(runable-2);//different server data
if(i==2)
handler.post(runable-3);//different server data
...
} 
```

我该怎么办？另外我必须向用户展示哪个可运行正在加载数据......请帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:23:05.913

你可能想要的是`AsyncTask`. 在您的 Activity 类中添加

```
class UpdateServerTask extends AsyncTask<Void, Void, Void> {
    private Object obj = null;
    private ProgressDialog dlg;

    @Override
    protected voide onPreExecute() {
        dlg = ProgressDialog.show (MyActivity.this, "", "Please wait, updating server...", true, false);     
    }

    @Override
    protected Void doInBackground(Void... params) {
        for(int i=0; i<10; i++) {
            switch(i) {
                case 0: ...;
                        break;
                case 1: ...;
                        break;
                ...
            }
        }
    }

    protected void onPostExecute(Void result) {

        dlg.dismiss();
    }
} 
```

然后，当您需要进行更新时：

```
new UpdateServerTask().execute(null); 
```

阅读更多关于[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的内容。

另外，请注意，您的`for`循环不正确，它应该是`<10`而不是`>10`. 最后，我建议您使用`switch`案例而不是`if-else if-else`构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:20:20.997

您应该使用服务来实现这些服务器数据，而不是在活动中发布任务。为此制作自定义服务，您将可以自由地做任何事情。

# ios - 如何以编程方式更改 UISlider 拇指图像的大小

> ID：11221966
> 
> 赞同：9
> 
> 时间：2012-06-27T08:12:56.883
> 
> 标签：ios, objective-c, uiimage, uislider

我想做自定义 UISlider，像这样

|o----------| -> |-----O------| -> |------------〇|

最小值会`thumbImage`很小，在滑块值增加的过程中会增加大小，否则会减小。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T08:16:24.577

您可以使用以下代码：

```
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return newImage;
} 
```

取自[这里](https://stackoverflow.com/questions/2658738/the-simplest-way-to-resize-an-uiimage)。

您将拥有的额外工作将是一个**方法 A**`imageWithImage:scaledToSize:` ，该方法将在`UISlider's`值更改时调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-02T15:48:26.260

斯威夫特 3：

```
extension UIImage {

    func scaleToSize(newSize: CGSize) -> UIImage {
        UIGraphicsBeginImageContextWithOptions(newSize, false, 0.0)
        draw(in: CGRect(x: 0, y: 0, width: newSize.width, height: newSize.height))
        let newImage: UIImage = UIGraphicsGetImageFromCurrentImageContext()!
        UIGraphicsEndImageContext();
        return newImage
    }
} 
```

# java - 先学 Struts 还是 EJB？

> ID：11221968
> 
> 赞同：-5
> 
> 时间：2012-06-27T08:13:00.800
> 
> 标签：java

我是一名中级java程序员。知道如何使用类、接口、枚举。知道如何创建 GUI 事件驱动的应用程序。现在我想了解 Struts、EJB 和 java web 编程。根据您的经验，我应该首先关注哪个技能？我需要什么要求才能顺利学习该技能？

附言。我是本科生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:17:15.903

这取决于您最终希望从事哪种工作。EJB 通常用于大型过时的企业。如今，越来越多的公司正在使用 Spring 框架及其相关的子项目。[您可以通过访问ITJobsWatch](http://www.itjobswatch.co.uk)并搜索特定术语来了解人们正在招聘的技术。

我建议完全避开 Struts，因为我敢肯定没有多少人会认为它是一种未来的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:28:41.637

如果你想学习一些新东西，我建议你试试 Spring 框架，以及 Hibernate。

EJB-s 通常用于喜欢坚持旧的大公司（就像他们会考虑的那样 - “更稳定”的技术）。

Struts... 坦率地说，Struts 并不是什么大不了的事（如果你问我的话）。您可以使用 Spring MVC、Spring Web、Spring Webflow 等来做同样的事情（如果不是更好的话）。

这真的只取决于***你***想学什么。

# c# - SET_NLS 故障转移 Oracle ODP.net

> ID：11221971
> 
> 赞同：1
> 
> 时间：2012-06-27T08:13:05.000
> 
> 标签：c#, oracle, ado.net, odp.net

我尝试使用 ODP.NET 从 ac# 程序执行以下语句：

```
string sql = "BEGIN dbms_session.set_nls('NLS_NUMERIC_CHARACTERS','''.,'''); END;";
        using (OracleConnection connection = new OracleConnection("Data Source=db;User Id=a;Password=b"))
        {
            connection.Open();
            using (OracleCommand command = new OracleCommand(sql, connection))
            {
                command.ExecuteNonQuery();
            }
            connection.Close();
        } 
```

我检索以下错误消息：

*ORA-02074: 无法在分布式事务中设置 NLS*

我的代码中没有使用任何事务。OracleConnection 是隐式分布式事务吗？如果我将*enlist=false*添加到连接字符串中，它就可以工作。但我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:44:20.243

我对 C# 了解不多，但是您确定需要 connection.Open() 和 connection.Close() 语句吗？我会假设 using 语句会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T10:44:19.760

我的环境中不需要分布式事务，所以我只是通过附加`enlist=false`到我的连接字符串来解决这个问题。希望它可能对某人有用。

# c++ - 缓存高效的多线程归并排序

> ID：11221973
> 
> 赞同：0
> 
> 时间：2012-06-27T08:13:26.647
> 
> 标签：c++, multithreading, caching, merge

```
void AFCQueue::ExtractValuesSecComplex(int startIndex, int endIndex,int helperIndex)
{

int size = 0,i,index;
TimeType min_timestamp;
bool is_singleQueue = false;
TimeType* local_queue_time = helper_queue_time[helperIndex];
int* local_queue_value = helper_queue_value[helperIndex];
volatile int& in_local_helper = in_sec[helperIndex];
volatile int& out_local_helper = out_sec[helperIndex];

NodeArrayBlock * heads_local[_MAX_THREADS];
NodeArrayBlock *tails_local[_MAX_THREADS];
int outs_local[_MAX_THREADS];
int ins_local[_MAX_THREADS];
TimeType local_timearray[_MAX_THREADS];
int min_index = 0;

min_timestamp = timestamps_arr[startIndex];
for (i=startIndex,index=startIndex ; i < endIndex; i++){
    heads_local[i] = (NodeArrayBlock *)heads[i];
    outs_local[i]  = outs[i];
    tails_local[i] = (NodeArrayBlock *)tails[i];
    ins_local[i]   = ins[i];
    local_timearray[i] = timestamps_arr[i];

    if (local_timearray[i] < min_timestamp){
        min_timestamp = local_timearray[i];
        index = i;
    }
}

do{
    //if central queue is full 
    while((out_local_helper-1)==in_local_helper || 
        (out_local_helper==0 && in_local_helper == HELPERS_QUEUE_SIZE_1) || _gIsStopThreads){
        if (_gIsStopThreads)
            return;
    }

    local_queue_time[in_local_helper] = heads_local[index]->_timestamp_arr[outs_local[index]];
    local_queue_value[in_local_helper] = heads_local[index]->_values_arr[outs_local[index]++];

    if (in_local_helper < HELPERS_QUEUE_SIZE_1)
        in_local_helper++;
    else
        in_local_helper = 0;    

    if (outs_local[index] == _INIT_SIZE){
        heads_local[index]->_free = true;
        heads_local[index] = heads_local[index]->_next;
        if (heads_local[index]==null)
        {
            tails_local[index] = null;
            ins_local[index]=0;
        }
        outs_local[index] = 0;
    }
    if (ins_local[index] == outs_local[index] &&
        heads_local[index]==tails_local[index])
    {
        //if it was not the last local queue in the array of snapshots
        if (--endIndex != index){
            heads_local[index]                  = heads_local[endIndex];
            tails_local[index]                  = tails_local[endIndex];
            outs_local[index]                   = outs_local[endIndex];
            ins_local[index]                    = ins_local[endIndex];
            local_timearray[index]              = local_timearray[endIndex];
        }
        if ((endIndex-startIndex)==1)
            is_singleQueue = true;
        heads_local[endIndex]                   = null;
    }else{
        local_timearray[index] = heads_local[index]->_timestamp_arr[outs_local[index]];
    }
    //If a single Queue left, no need to check timestamps
    if (is_singleQueue){
        int out = outs_local[startIndex];
        int in  = ins_local[startIndex];
        NodeArrayBlock* he = heads_local[startIndex];
        NodeArrayBlock* ta = tails_local[startIndex];
        int* value_arr = he->_values_arr;
        TimeType* time_arr = he->_timestamp_arr;
        while (true){
            if ((in == out && he==ta))
            {
                //heads[startIndex] = null;
                return;
            }
            if (out == _INIT_SIZE){
                he->_free = true;
                he = he->_next;
                if (he==null)
                {
                    //heads[startIndex]=null;
                    return;
                }
                value_arr = he->_values_arr;
                time_arr = he->_timestamp_arr;
                out = 0;
            }   
            while((out_local_helper-1)==in_local_helper || 
                (out_local_helper==0 && in_local_helper == HELPERS_QUEUE_SIZE_1) || 
                _gIsStopThreads){
                if (_gIsStopThreads)
                    return;
            }

            if (he==ta){
                if (out_local_helper <= in_local_helper){
                    min_index = Math::Min(HELPERS_QUEUE_SIZE-in_local_helper,in-out);
                }else{
                    min_index = Math::Min(out_local_helper-1-in_local_helper,in-out);
                }
            }else{
                if (out_local_helper <= in_local_helper){
                    min_index = Math::Min(HELPERS_QUEUE_SIZE-in_local_helper,_INIT_SIZE-out);
                }else{
                    min_index = Math::Min(out_local_helper-1-in_local_helper,_INIT_SIZE-out);
                }
            }
            memcpy(&local_queue_time[in_local_helper],&time_arr[out],min_index * sizeof(*time_arr));
            memcpy(&local_queue_value[in_local_helper],&value_arr[out],min_index * sizeof(*value_arr));
            in_local_helper+=min_index;
            out+=min_index;
            if (in_local_helper == HELPERS_QUEUE_SIZE)
                in_local_helper = 0;
        }
    }
    if (endIndex==startIndex)
        break;

    min_timestamp = local_timearray[startIndex];
    for(i = startIndex+1,index=startIndex; i < endIndex ;i++){
        if (local_timearray[i] < min_timestamp){
            min_timestamp = local_timearray[i];
            index = i;
        }
    }
}while(true);
} 
```

这是我的算法的一个片段，该函数专用于迭代队列数量的单个线程（有带有时间戳的队列，并且分别有带有值的队列）

执行此方法的每个线程都会遍历 X 个队列并将它们合并到时间戳和值的单个循环队列中。

这个函数有很多缓存未命中，

如何改进以减少缓存未命中（多个线程同时使用不同的 id 执行此方法 - helperIndex）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:46:04.040

当然，您有很多缓存未命中。您必须记住的是，CPU 与 L3 缓存和 RAM 之间只有一条总线。因此，如果线程一忙于读取内存，然后被挂起以允许另一个线程执行相同的操作但使用不同的内存，则需要重新加载缓存。当进程暂停时也会发生这种情况 - 当进程恢复执行时，缓存需要重新加载。

要限制缓存未命中，请将线程数限制为物理内核数（忽略超线程内核）。如果您的线程数多于内核数，则每次有线程切换时都需要更新缓存。如果您拥有相同数量的线程和内核，则可以减少将缓存丢失给另一个线程/进程的机会。您想尝试 num_cores - 1 个线程，看看是否有帮助。

此外，您的代码非常大且未注释。很难看出你到底在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:03:40.653

这不是真正的代码问题，因此发布代码无效。

要限制缓存未命中，请更改 DATA 以便每个线程一次只需要处理自己的 [L1 缓存大小] 块。这对于合并排序来说相当容易。

一个典型的、有效的合并排序将使用一个线程池和合并任务，这些任务拆分它们的输入分区并产生子合并，直到任务得到一个小于 [L1 缓存大小] 的分区，然后使用就地排序，像快速排序一样，完成最后的位。

拆分可以通过一个额外的 [数据大小] 缓冲区来完成，任务在完成快速排序后在执行插入排序时在该缓冲区之间移动数据。应该不需要任何内存复制。

仅仅采用单线程内联代码并在不考虑数据的情况下使其在多个线程上工作是无效的。

# r - 使用嵌套函数“找不到函数”

> ID：11221974
> 
> 赞同：0
> 
> 时间：2012-06-27T08:13:33.400
> 
> 标签：r

我遇到了嵌套函数的问题，无法弄清楚为什么，因为我将它放在另一个函数内的代码之前。如果我在主函数中运行代码一切都很好，但是如果我调用该函数，我会得到“找不到函数”InstanceFromLocation“

```
 MatchLocationsInstances = function (resultSheet1) {
    #load required libraries
    require(plyr)
    #declare functions
    InstanceFromLocation = function (v_string) {
    #load libraries
    require(stringr)
    require(gdata)
    #variables
    stringLenth = nchar(v_string)
    #find positions of the ":"
    v_positions = data.frame(str_locate_all(v_string, ':'), stringsAsFactors = F)
    positions_length = length(v_positions[, 1])
    #substract and trim the result if there are entries in v_positions
    if (positions_length != 0) {
      result = trim(substr(v_string, v_positions[positions_length, 1] + 1, stringLenth))
    } else {
      result = ''
    }
    return(result)
    }

    #add a new dataframe with 
    tmpResult = ddply(resultSheet1, .(`Col 1`), transform, FromLocation = toupper(InstanceFromLocation(`Col 1`)))[, 2:9]

    return(tmpResult)
    } 
```

可复制的数据集

```
 resultSheet1 = structure(list(`File Name` = c("file_name2.txt", 
            "file_name.txt", "file_name.txt", 
            "file_name.txt", "file_name.txt", 
            "file_name.txt"), `Col 1` = c("sometext2", 
            "sometext2", "sometext2", "sometext2", "sometext2", "sometext2"), Hostname = c("sometext", 
            "sometext", "sometext", "sometext", "sometext", 
            "sometext"), `Schema Name` = c("schema", "schema", 
            "schema", "schema", "schema", "schema"), 
                `text Targets` = c("***File Error!***", "sometext_LOCATION / sometext / sometext:port:sometext2 ", 
                "sometext5 / / :port:sometext2 ", "sometext3 / sometext3 / sometext:port:sometext2 ", 
                "sometext4 / textI / sometext:port:sometext2 ", "textI_LOCATION / textI / sometext:port:sometext2 "
                ), `Number of Objects Deployed` = c(963, 963, 963, 963, 963, 
                963), `No. of jobs that were run on this instance` = c(342623, 
                337803, 337803, 337803, 337803, 337803)), .Names = c("File Name", 
            "Col 1", "Hostname", "Schema Name", "text Targets", 
            "Number of Objects Deployed", "No. of jobs that were run on this instance"
            ), row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:37:51.147

`InstanceFromLocation`仅在函数内定义，`MatchLocationsInstances`您可以在主函数之外声明它

```
 InstanceFromLocation = function (v_string) {
    #load libraries
    require(stringr)
    require(gdata)
    #variables
    stringLenth = nchar(v_string)
    #find positions of the ":"
    v_positions = data.frame(str_locate_all(v_string, ':'), stringsAsFactors = F)
    positions_length = length(v_positions[, 1])
    #substract and trim the result if there are entries in v_positions
    if (positions_length != 0) {
      result = trim(substr(v_string, v_positions[positions_length, 1] + 1, stringLenth))
    } else {
      result = ''
    }
    return(result)
    }

MatchLocationsInstances = function (resultSheet1) {
    #load required libraries
    require(plyr)
    #declare functions

    #add a new dataframe with 
    tmpResult = ddply(resultSheet1, .(`Col 1`), transform, FromLocation = toupper(InstanceFromLocation(`Col 1`)))[, 2:9]

    return(tmpResult)
    } 
```

# mysql - 如果第一个没有结果，如何在 mysql 上运行两个查询

> ID：11221975
> 
> 赞同：0
> 
> 时间：2012-06-27T08:13:33.517
> 
> 标签：mysql

这是我第一次来这里，我是一个初学者，所以请忍受我的白痴主义:)

我想在 mysql 中从两个数据库中运行两个查询，如果第一个查询没有生成任何结果，那么第二个查询应该在第二个数据库中搜索相同的内容。

我们有汽车保险数据，有两个数据库，一个用于个人客户，第二个用于企业客户。我们需要通过车辆`chasis`编号或发动机编号来搜索车辆。来自两个数据库，但如果从第一个数据库中没有找到结果，那么它应该去第二个数据库。

第一个查询：

```
SELECT * FROM skpoly_vw4 WHERE CHASIS = 878933 
```

第二个查询：

```
SELECT * FROM vw_motorschedule where sw_skpoly_chasis = 878933 
```

我们有一个数据库，但其中有两个不同的视图，分别是针对个人客户的 skpoly_vw4 和针对企业客户的 vw_motorschedule

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:45:50.477

这个怎么样？

```
SELECT SQL_CALC_FOUND_ROWS * 
FROM DATABASE1
WHERE database1_CHASIS = 12345**

UNION ALL

SELECT * 
FROM DATABASE2 
WHERE FOUND_ROWS() = 0 AND database2_chasis= 12345** 
```

## [演示](http://sqlfiddle.com/#!2/df91d/3)

## 更新 1

每个对话，你得到 mysql 错误号 1222。发生这种情况是因为表`skpoly_vw4`和`vw_motorschedule`字段数不同。对于 UNION ALL，字段必须相同。

例如，在 table1 中有 id 和 name，在 table2 中有 id、fname、lname，那么如果你尝试使用`UNION ALL`它`select *`，它将无法工作，因为在 table1 中有 2 列，但在 table2 中有 3 列。

希望你明白我的意思。

**[还要从具有不同列数的两个表中](https://stackoverflow.com/questions/10660788/select-from-two-tables-with-different-of-columns)**读取select * **。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:24:14.443

尝试这个

```
$query = mysql_query("SELECT * FROM DATABASE1 WHERE database1_CHASIS = 12345");

if(mysql_num_rows($query)==0){
   $query = mysql_query("SELECT * FROM DATABASE2 where database2_chasis= 12345");
}

$customer = mysql_fetch_assoc($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:18:37.350

`SELECT FOUND_ROWS( )`在执行第一个查询之后使用。

也就是说，在运行第二个查询之前检查是否`SELECT FOUND_ROWS( )>0`

编辑：这是一个例子

```
SELECT * FROM skpoly_vw4 WHERE CHASIS = 878933

DECLARE @rows INT
SET @rows= FOUND_ROWS();
if (@rows>0)
SELECT * FROM vw_motorschedule where sw_skpoly_chasis = 878933 
```

# php - 使用 PHP 打开远程文件

> ID：11221980
> 
> 赞同：0
> 
> 时间：2012-06-27T08:14:10.363
> 
> 标签：php, remote-file-inclusion

我有一个 PHP 页面，我想在远程机器上打开一个文件并读取其内容。我必须指定远程机器的 IP 地址。如何在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:17:25.287

`echo file_get_contents("http://1.1.1.1/file.txt")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:17:10.487

您可以读取任何文件的内容`file_get_contents()`。

文档： http: [//php.net/file_get_contents](http://php.net/file_get_contents)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:18:27.317

您不需要指定远程机器的 ip。你可以使用

```
file_get_contents('http path to file'); 
```

# php - 网站域名 htaccess

> ID：11221981
> 
> 赞同：0
> 
> 时间：2012-06-27T08:14:19.313
> 
> 标签：php, .htaccess, redirect, dns

我有一个主机为 www.mydomainhost.com 的域。现在我有了另一个名为 www.newdomain.com 的域

我想，当用户连接到 www.newdomain.com 时，url 必须保持 www.newdomain.com 但我想使用 www.mydomainhost.com 的主机。

这就像与 2 个域共享主机。

我的主机 IP 是静态的（我们可以重定向）

据说我必须更改 .htaccess 但是当我搜索时，我看到 .htaccess 通常用于域名链接重定向。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:20:36.630

这是 DNS 的问题，只有 DNS 可以根据需要进行操作，如果您可以操作 DNS 记录，则操作起来很容易。否则，您将需要让 DNS 条目的相关管理器一起工作，以确保 newdomain.com 指向 domain.com 的 IP，并且配置 domain.com 的服务器接受它。

# wpf - 奇怪的交互触发行为

> ID：11221983
> 
> 赞同：0
> 
> 时间：2012-06-27T08:14:26.837
> 
> 标签：wpf, command, interaction, eventtrigger

我有两个数据网格。您可以通过双击一行或多行来切换项目。双击事件由将选定项目列表发送到视图模型的命令处理。

所以我有带触发器的 Datagrid 1：

```
<i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseDoubleClick" SourceName="lstProducts">
                    <cmd:EventToCommand Command="{Binding Path=Add}" 
                                        CommandParameter="{Binding ElementName=lstProducts, Path=SelectedItems}" />
                </i:EventTrigger>
</i:Interaction.Triggers> 
```

和 Datagrid 2 触发器：

```
<i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseDoubleClick"  SourceName="dgProducts">
                    <cmd:EventToCommand Command="{Binding Path=Remove}"
                                    CommandParameter="{Binding ElementName=dgProducts,Path=SelectedItems}" />
                </i:EventTrigger>
            </i:Interaction.Triggers> 
```

每次我双击 Datagrid 时，它都会调用 Add AND Remove 命令。但是当我在两个委托命令方法中设置一个调试点时，它只输入一个。如果我只设置一个，不管是哪一个，它都会进入它。

例如，在第一个数据网格中单击它应该调用添加命令，因此它会在断点处停止。而且当我将断点设置为删除时，但两者都没有。

我尝试应用**SourceName**甚至**SourceObject**但它无济于事..

也许有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:45:16.140

我想我的场景可以正常工作：

```
public partial class MainWindow : Window
{
    public ObservableCollection<Product> Added { get; set; }

    public ObservableCollection<Product> Available { get; set; }

    public ICommand Add { get; set; }

    public ICommand Remove { get; set; }

    public MainWindow()
    {
        Added = new ObservableCollection<Product>();
        Available = new ObservableCollection<Product>();
        Available.Add(new Product { Id = 1 });
        Available.Add(new Product { Id = 2 });
        Available.Add(new Product { Id = 3 });
        Available.Add(new Product { Id = 4 });
        Available.Add(new Product { Id = 5 });
        InitializeComponent();
        DataContext = this;

        Add = new RelayCommand<IEnumerable>(x =>
        {
            foreach (Product item in x.Cast<Product>().ToArray())
            {
                Added.Add(item);
                Available.Remove(item);
            }

            Console.WriteLine("add");
        });

        Remove = new RelayCommand<IEnumerable>(x =>
        {
            foreach (Product item in x.Cast<Product>().ToArray())
            {
                Added.Remove(item);
                Available.Add(item);
            }
            Console.WriteLine("remove");
        });
    }
}

public class Product
{
    public int Id { get; set; }
} 
```

和 xml：

```
<StackPanel >

    <DataGrid ItemsSource="{Binding Available}" SelectionUnit="FullRow" x:Name="lstProducts">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseDoubleClick" SourceName="lstProducts">
                <cmd:EventToCommand Command="{Binding Path=Add}"
                                    CommandParameter="{Binding ElementName=lstProducts, Path=SelectedItems}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>

    </DataGrid>

    <DataGrid ItemsSource="{Binding Added}" SelectionUnit="FullRow" x:Name="lstProductsAdded" >
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseDoubleClick" SourceName="lstProductsAdded">
                <cmd:EventToCommand Command="{Binding Path=Remove}"
                                    CommandParameter="{Binding ElementName=lstProductsAdded, Path=SelectedItems}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>

    </DataGrid>

</StackPanel> 
```

这是你做过/想做的吗？在我的示例中，只执行了一个命令。您可以在输出窗口中看到它。

我想出了如何打破这段代码来重现你的行为：在两个 i:EventTrigger 标记中，你有相同的 SoruceName，所以你绑定到单个网格。

# php - 如何使用 Zend 为 Facebook 共享器、PHP 制作自定义缩略图

> ID：11221984
> 
> 赞同：0
> 
> 时间：2012-06-27T08:14:27.570
> 
> 标签：php, facebook, zend-framework

如何使用我的自定义图像作为 Facebook 共享者的缩略图？因为我想为它分享其他图像。我还想在其中添加一些功能，例如每当用户共享时，缩略图会显示他/她所在位置的标志。或者我什至有可能这样做吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:25:12.600

您必须在要共享的页面上添加一些元标记，有点像这样：

```
<link rel="image_src" type="image/jpeg" href="IMAGE_URL_GOES_HERE"/>    
<meta itemprop="image" content="IMAGE_URL_GOES_HERE"/>
<meta property="og:image" content="IMAGE_URL_GOES_HERE"/> 
```

或者，实现相同结果的更好方法是使用 Javascript SDK 中的 FB.ui 函数：

```
var link = {};
link.method = 'feed';
link.link = url;
link.picture = imageURL;
link.name = title;
link.caption = caption;
link.description = description;
FB.ui(link,callback); 
```

这样，您可以更好地控制共享的内容。

如果您受限于 JS 的使用，也可以使用直接链接而不是 FB.ui：

```
http://www.facebook.com/dialog/feed?
  app_id=123050457758183&
  link=http://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=http://www.example.com/response 
```

更多信息在这里：http: [//developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

# asp.net - 部署到服务器后的严重问题 - 页面上的随机文本

> ID：11221985
> 
> 赞同：0
> 
> 时间：2012-06-27T08:14:31.800
> 
> 标签：asp.net, deployment

我已将一些网站更新从登台迁移到实时，但是现在，当我查看实时站点时，我在页面上看到以下随机文本：

这仅在我登录后出现，因此我可以显示登录页面。我将最新的 dll 从 dev 上传到 staging 然后再上线，现在 staging 也有同样的问题。但是，staging 以前可以正常工作，而 dev 没有问题！

���<code>I�%&/m�{J�J��t��$ؐ@��������iG#)�<em>��eVe]f@�흼��{ ����{����;�N'����?\fdl��J�ɞ!���?~|?"��Ey')=��y6�����h� ��f����ӏ��o''g�UU�O'/����i�\Vm:��j�/��6��ԸhӢI����X��� w��i����I5�N�y�l�ϳEQ^?��'�z�-����ӫ������U��J��)~�?J���� �</em>��Ѥ̦oI��]�P�"�/��v[����W�~���m`N�rvk���Mqz3���wV�vR��{_ ��IW�2����������,KO�eS��יy�/����m^+E eB��c*�j�w��,�Vu���Q ����a�2��*����E�]�-/%��j�j�(��Y���{�ʖ�lR���n���,��ć ����2����uC� ԡO��w}V|W�L�d��\0��>��m���ւh�����=z��4� ��GV,ӏ�~��Ve1elǏ�uzU���g�;;�{�Y�lW���)Jz���]���a�w�>.�!a/�0� =����uB����4��������Q���pki��s}I?_����e��*�X�Y=J���uq�FH49J�� ʹ.V�0��N����z�)����4���jJsi����by������ͧk���?�&��U>I����� �/�ĩ��"��fMK욶5 ���N�G�<�P1�lR�[��'��I��y�T���X3k �L����h ����A��a=�۬(������c����/*Oʂ��l�G�72�è����5Q�y�pG���1���? �g:ń�o�Ku�C��7b��@^�~�5��&����<'��g����EV���2�<�e%�j�����x1#��yA���i����$/�+�8;�Ș��B�v� Ga"S�^F�����>&�8|���tk��������;�w���>�1(hd������K��!;� ��IE�s_��[�������������=����ٲ��e��������΃ =��5/����ͼ��,���� ��Y�$���M�I����Ox�-����4$����r���$�g�)��N4^, R����,��1 ��"3K�rF��ni������_�U��ʛuپ�i��s�&��=  i����bY4�SV����A��� 克莱尔*2��H���� @����l�D@�� :�k��]�KKV�4k��SB������7���n���j6J�N� ��L:J?����r"��)�/��O����z+����l�;,�|9{S�,V9�p�v�w�Ż�! �n>����̵x����.�v��P��-Ϋ-m�>m������7��* <�3���n�>9� f�f ��差 n>��[�

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:27:39.650

好的，问题是由于我使另一个数据库脱机（即使该数据库已过时且未包含在任何连接字符串中。

将为该问题打开一个新问题

# android - 使用 nativePath 的 flex 移动应用程序中未显示图像

> ID：11221990
> 
> 赞同：3
> 
> 时间：2012-06-27T08:14:54.220
> 
> 标签：android, actionscript-3, apache-flex, air, flex4.5

我正在使用 windows 上的 4.1 SDK 在 flash builder 4 中创建一个 android 应用程序。该应用程序首先从 Internet 下载一些图像并将它们保存在 desktopDirectory 中。现在我想在我的 flex 移动应用程序中显示下载的图像。

问题：

正在从 Internet 成功下载图像并成功保存在 desktopDirectory 中。

现在，当我尝试使用 nativePath 显示图像时，它不会显示。将显示一个带有问号的蓝色小图标，而不是图像。我正在使用的代码如下：

```
displayContainer.removeAllElements();
var image:spark.components.Image = new spark.components.Image();
var imageFile:File = File.desktopDirectory.resolvePath(desktopFilePath);
if(imageFile.exists)
{
    var imagePath:String = File.desktopDirectory.resolvePath(desktopFilePath).nativePath;

    image.source = imagePath;
    trace("Image Path: " + imagePath);
    displayContainer.addElementAt(image,1);
} 
```

当我跟踪图像文件是否存在时，它表明该文件在那里。但该文件未显示在应用程序中。

但是，当我在代码中硬编码图像路径时，会显示图像，如下所示：

```
<s:Image id="a1" source="data/02.jpg" /> 
```

因此图像在那里，但路径没有以编程方式解析。

我究竟做错了什么？请指导。

我正在安卓平板电脑上测试我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:43:01.143

我没有使用文件 nativePath，而是使用了文件 url，我得到了解决问题的方法。请参阅下面的有效代码：

```
displayContainer.removeAllElements();
var image:spark.components.Image = new spark.components.Image();
var imageFile:File = File.desktopDirectory.resolvePath(desktopFilePath);
if(imageFile.exists)
{
    var imagePath:String = File.desktopDirectory.resolvePath(desktopFilePath).url;

    image.source = imagePath;
    trace("Image Path: " + imagePath);
    displayContainer.addElementAt(image,1);
} 
```

# mysql - SQL Server 限制允许的主机

> ID：11221995
> 
> 赞同：0
> 
> 时间：2012-06-27T08:15:20.270
> 
> 标签：mysql, sql-server

在 MySQL 中，我可以在配置文件中设置允许哪些主机连接到服务器。有没有办法在 SQL Server 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:27:38.347

是的，您可以通过

*   SQL Server 管理工作室
*   直接通过 SQL（参见[http://msdn.microsoft.com/de-de/library/ms173463.aspx](http://msdn.microsoft.com/de-de/library/ms173463.aspx)）

您可以为域用户、组授予访问权限，或者只创建一个独立用户。网络上有很多信息，所以请随意谷歌一些howtos。

# javascript - 尝试使用 jQuery 设置 Text-Shadow 属性

> ID：11221998
> 
> 赞同：0
> 
> 时间：2012-06-27T08:15:31.267
> 
> 标签：javascript, jquery, html, css

我正在尝试通过从用户那里获取值并使用 JQuery 更改它来设置 text-shadow 属性。我的代码如下

HTML 代码

```
<td width="13%">
H-Shadow::<input id="hshadow" onchange="setShadow();"/>
</td>

<td width="13%">
V-Shadow::<input id="vshadow" onchange="setShadow();"/>
</td>

<td width="12%">
Blur::<input id="blur" onchange="setShadow();"/>
</td>

<td width="12%">
Color::<input id="shadowcolor" class="color" onchange="setShadow();"/>
</td> 
```

我的函数 setShadow 如下

```
function setShadow() {
var horShadow = document.getElementById('hshadow');
var verShadow = document.getElementById('vshadow');
var blurShadow = document.getElementById('blur');
var colorShadow = document.getElementById('shadowcolor');
$('.blue3d > textarea').css('textShadow', horShadow.value+"px "+verShadow.value+"px "+blurShadow.value+"px "+'#'+colorshadow.color); 
```

}

同样到第四个选择颜色..我正在使用 jscolor 选择器..所以我需要在第四个添加 class=color ..你可以在这里看到 jscolor 选择器[jsColor](http://jscolor.com/)

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:21:38.283

使用`text-shadow`而不是`textShadow`？

```
 $('.blue3d > textarea').css('text-shadow', horShadow.value+"px "+verShadow.value+"px "+blurShadow.value+"px "+'#'+colorshadow.color); 
```