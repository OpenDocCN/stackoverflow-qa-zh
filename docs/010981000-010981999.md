# StackOverflow 问答 10981000-10981999

# javascript - 使用 CSS 和 JavaScript 使用总客户端宽度

> ID：10981001
> 
> 赞同：2
> 
> 时间：2012-06-11T13:25:03.210
> 
> 标签：javascript, asp.net, css, width

我有一个与 iGoogle 类似的仪表板页面。我需要让页面在可用的客户端宽度上工作。我编写了一个 JavaScript 来获取宽度并将其均匀地分布在 div 中。该脚本为 div 设置*element.style{width: 540px;}*并且在页面加载时运行良好。它类似于：

`window.onload = function SetWidth(){ document.getElementById(dashCell.id).style.width = (Math.round(window.innerWidth / 2)) + 'px';};`

现在是痛点。该页面有一个带有*Timer的**UpdatePanel* ，它每 5000 毫秒执行一次 PostBack。当页面再次加载并且*element.style*丢失时，这会破坏设计。

 **我已经阅读了有关流体 CSS 的内容，并且还考虑过使用*min-width*和*max-width* CSS 属性。但现在需要的是让它以这种方式工作。我现在需要一个可行的解决方案，但是绝对欢迎更好和正确的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:30:52.633

您必须重新运行脚本并在每个 UpdatePanel 上重新修复您的 css 样式

```
 <script type="text/javascript">     
   function SetWidth(){ 
      document.getElementById(dashCell.id).style.width = (Math.round(window.innerWidth / 2)) + 'px';
    }
    // set the onload call
    window.onload = SetWidth;

    // capture the UpdatePanel javascript events
    var prm = Sys.WebForms.PageRequestManager.getInstance();    
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);

    function InitializeRequest(sender, args) {      
    }

     // after the updatepanel complet refix the css
    function EndRequest(sender, args) {
         SetWidth();
    }
    </script> 
```

或者将初始化值保存在某处，然后在更新面板重新调整后应用它们。**

# php - Symfony2：未在数据库中创建的实体

> ID：10981002
> 
> 赞同：0
> 
> 时间：2012-06-11T13:25:04.160
> 
> 标签：php, symfony, doctrine-orm

我正在使用 Symfony2 和 Doctrine2 制作实体。我制作了一些实体来代表我的两个实体之间的多对多关系。

这些实体之一的示例：

```
/**
 * @ORM\Entity
 */
class Contact_Conference_Invitation
{
    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Aurae\UserBundle\Entity\Contact")
     */
    private $contact;

    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Aurae\ConferenceBundle\Entity\Conference")
     */
    private $conference;

    /**
     * @var datetime dateInvitation
     *
     * @ORM\Column(name="dateInvitation", type="datetime")
     */
    private $dateInvitation;

    //Getters and setters
} 
```

我尝试更新我的 sql 架构，但没有出现与这些实体对应的表。有没有我必须声明它们的地方（配置或类似）？如果不是，有什么问题？

非常感谢

编辑：我忘记了这些类的名称空间，这就是 Doctrine 省略它们的原因。另一个案例已关闭:) 感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:06:13.453

**假设...**

不，您不需要在 Entity 目录之外的任何地方声明它们。

*   你收到的错误信息是什么？

*   我猜你加了

    使用 Doctrine\ORM\Mapping 作为 ORM；

在你的类的顶部，让它们被映射。

**我试过 ...**

我试图通过添加一个简单的联系人和会议实体来生成你的实体，它工作正常。以下是代码片段：

**Contact_Conference_Invitation.php**

```
namespace Ahsio\StackBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Contact_Conference_Invitation
{
    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Ahsio\StackBundle\Entity\Contact")
     */
    private $contact;

    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Ahsio\StackBundle\Entity\Conference")
     */
    private $conference;

    /**
     * @var datetime dateInvitation
     *
     * @ORM\Column(name="dateInvitation", type="datetime")
     */
    private $dateInvitation;

    //Getters and setters
} 
```

**联系方式.php**

```
namespace Ahsio\StackBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Contact
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @param $id
     */    
    public  function setId($id)
    {
        $this->id = $id;
    }

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

**会议.php**

```
namespace Ahsio\StackBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Conference
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @param $id
     */
    public  function setId($id)
    {
        $this->id = $id;
    }

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

以下是生成的表：

![在此处输入图像描述](../Images/a364f47e2444a077161a036475532add.png)

注意：我为实体生成使用了一个特定的命名空间来正常工作，您需要更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:02:07.103

在您提供的代码示例中，我没有看到您的 ManyToMany 关系的定义。

例如，这是我为一个项目实现的多对多关系

**实体项目.php**

```
/**
 * @var Provider[]
 *
 * @ORM\ManyToMany(targetEntity="Provider", mappedBy="projects")
 */
protected $providers = null; 
```

**实体提供者.php**

```
/**
 * @var Project[]
 *
 * @ORM\ManyToMany(targetEntity="Project", inversedBy="providers")
 * @ORM\JoinTable(name="PROVIDER_PROJECT")
 */
protected $projects = null; 
```

如您所见，您在此处为 ManyToMany 关系定义连接表。

当然，这些实体是特定于我的特定项目的，但你明白了，你可以根据自己的需要轻松调整它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T09:28:48.157

另外不要忘记检查您是否启用了自动映射。

在你的 config.yml 你应该有

```
doctrine:
    orm:
        auto_mapping: true 
```

遇到这个问题是因为我的实体也没有生成，这是我的问题，它可以为那些在同样问题上苦苦挣扎的人节省一些时间。

# c# - 如何在没有零的情况下将 Oracle 数值获取到 .NET？

> ID：10981003
> 
> 赞同：1
> 
> 时间：2012-06-11T13:25:07.720
> 
> 标签：c#, .net, oracle, numbers, decimal

我尝试从 Oracle 数据库中读取数据。问题是在某些情况下，接收数据在数字后添加零，我不知道为什么会发生这种情况？！？

例如我想读这样的数据

1

1,1

1,12

1,123

当我用 Oracle-Datareader 阅读它时，我得到

1

1,10 <-

1,12

1,1230 <-

每次小数位为 1,3,5,7 时，它都会在结果中添加一个 0。但是为什么会这样？？有谁知道这种问题？

**编辑：**

```
Dim cmd As OracleCommand = New OracleCommand(Select_Statement, Connection)

Dim dr As OracleDataReader

dr = cmd.ExecuteReader

While dr.Read()

            If dr("C1").ToString = V1 Then

                Me.Txt_1.Text = dr.GetDecimal(3).ToString("G0")

                Me.Txt_2.Text = dr(c4)

                Me.Txt_3.Text = dr(c5)

                Me.Txt_4.Text = dr(c6)

            End If

            If dr("C2").ToString = V2 Then

                Me.Txt_5.Text = dr(c3)

                Me.Txt_6.Text = dr(c4)

                Me.Txt_7.Text = dr(c5)

                Me.Txt_8.Text = dr(c6)

            End If

        End While

dr.Close() 
```

这是我从数据库中读取数据的方式，如果有更好的方式，我会很高兴一些提示！因为 dr.GetDecimal() 的方式只排除了行索引的数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T13:55:06.053

它在 C# 中，而不是在数据库中。

从[文档](http://msdn.microsoft.com/en-us/library/fzeeb5cd.aspx)：

> 如果 format 为 null 或空字符串，则此实例的返回值使用通用数字格式说明符 (G) 进行格式化

`general format`包含您要避免的零。
如果要删除它，只需执行以下操作：

```
string sd = dr.GetDecimal(0).ToString("G0"); 
```

我的 OracleDataReader 博士在哪里

# php - mysql 获取数组时，empty() 不起作用

> ID：10981004
> 
> 赞同：-2
> 
> 时间：2012-06-11T13:25:09.217
> 
> 标签：php, mysql

不知道为什么这不起作用。我假设这是因为我正在获取一个数组，但不确定为什么会阻止它。

无论如何，这是代码；

```
<?php  

include ("../database.php");
$result = mysql_query("SELECT * FROM gigs WHERE artisturl='$artistname'");

while($row = mysql_fetch_array($result)){

if (empty($row['gigname'])){echo  '<p2>'.$row['artistname']. 'has not posted any gigs     yet. Check back later.</p2>';}
else {
echo     $row['gigname'].$row['venue'].$row['lineup'].$row['date'].$row['time'].$row['price'].$row['    purchase'].'<br><br>';}}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:32:16.883

Empty 对字符串有意想不到的结果，我建议你阅读[这篇](http://www.zachstronaut.com/posts/2009/02/09/careful-with-php-empty.html)文章。

例如 ：

```
 $mystring = '0';
if (empty($mystring)) {
    // this code will run
    // what if this was code to take action when $mystring is undefined?
} 
```

所以确保 gigname 不为 0。

考虑使用`is_null($row['gigname']))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:37:53.863

> 不知道为什么这不起作用

您还没有说明您的“工作”标准是什么。

你的代码没有任何意义。empty() 不是在这里使用的正确函数——实际上没有函数可以在这里工作，因为如果没有匹配的记录，那么循环体将永远不会执行。

有很多方法可以处理这种情况。这是一个简单的：

```
if (mysql_num_rows($result)) {
   while($row = mysql_fetch_array($result)){
      echo ....
   }
} else {
   echo  '<p2>'.$row['artistname']. 'has not posted any gigs...'
} 
```

# php - 将 php 变量传递给 google.maps javascript 方法

> ID：10981006
> 
> 赞同：1
> 
> 时间：2012-06-11T13:25:10.020
> 
> 标签：php, javascript, google-maps

我试图将两个变量（纬度和经度）传递给 google.maps.StreetViewPanorama 方法但没有成功。有可能这样做还是我失败了？

变量通过 url 传递：

```
http://mydomain/street.php?lat=41.653048&lon=-0.880677 
```

street.php 的代码是：

```
<?php
$lat = $_GET["lat"];
$lon = $_GET["lon"];
?>

<html>
    <head>

        <meta name='viewport' content='width=320,user-scalable=no'/>

        <script src='http://maps.google.com/maps/api/js?sensor=false' type='text/javascript' >
          jlat = <?php echo $lat; ?>
          jlon = <?php echo $lon; ?>
        </script>

    </head>

    <body onload="new google.maps.StreetViewPanorama(document.getElementById('p'),
        {position:new google.maps.LatLng(jlat, jlon)
        });"

     style='padding:0px;margin:0px;'>

     <div id='p' style='height:100%;width:100%;'></div>

    </body>
</html> 
```

我已经确定了新的 javescript 变量

```
jlat = <?php echo $lat ?>
jlon = <?php echo $lon ?> 
```

母鸡我传递给 google.maps.LatLng(jlat, jlon)，但它不起作用。

有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:35:58.147

现在在 JavaScript 中添加分号...

```
var jlat = <?php echo $lat ?>;
var jlon = <?php echo $lon ?>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:27:47.550

你没忘记$lat = $_GET["lat"]后面的分号吗

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:32:01.587

我认为您编写 javascript 的方式行不通。具体来说，如果您从外部文件中包含 javascript，则不应在其中包含更多代码。尝试将您的代码更改为：

```
<?php
$lat = $_GET["lat"];
$lon = $_GET["lon"];
?>

<html>
    <head>
        <meta name='viewport' content='width=320,user-scalable=no'/>

        <script type="text/javascript">
            var jlat = <?php echo $lat ?>;
            var jlon = <?php echo $lon ?>;
        </script>

        <script src='http://maps.google.com/maps/api/js?sensor=false' type='text/javascript' >
        </script>
    </head>

    <body onload="new google.maps.StreetViewPanorama(document.getElementById('p'),
        {position:new google.maps.LatLng(jlat, jlon)});" style='padding:0px;margin:0px;'>

     <div id='p' style='height:100%;width:100%;'></div>

    </body>
</html> 
```

# mysql - 'Query' MySQL 数据文件有什么用途？

> ID：10981010
> 
> 赞同：0
> 
> 时间：2012-06-11T13:25:24.033
> 
> 标签：mysql, file

我在找出 MySQL 数据目录中某个文件的确切用途时遇到了一些真正的困难。（使用带有文件名的 Google 毫无意义！）

基本上，我需要在托管所有 MySQL 数据的驱动器上创建一些空间，并注意到一个大小接近 16GB 的文件！

我在我的配置文件中看不到对查询文件的任何引用，也无法将其大小与任何日志文件等的大小相匹配（以防它的日志文件缺少 .log 扩展名）。我完全被难住了！

![在此处输入图像描述](../Images/445c404fc83a6ead81d33e09cf33aa3a.png)

我想知道这个文件是什么以及如果可能的话如何减小它的大小？

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:20:26.360

那可能是通用查询日志（我说“可以”是因为名称可以自己配置）。在您的 my.ini 中查找条目

```
log=/path/to/query 
```

或启动 MySQL 管理员，转到“启动变量->日志文件”并查找“查询日志文件”

该文件完全不适合您的服务器运行（如果您确认条目 log=... 存在于您的配置中。它对调试很有用。

尝试停止您的 mysql 服务器，将其删除并再次重新启动您的服务器。该文件将被重新创建。

我还注意到慢查询日志（“diamond-slow-log”）也很大。该文件仅记录耗时超过 x 秒的查询（默认为 2 秒）。该文件也可以删除或停用。但我会保留它，因为它包含可以通过额外索引轻松优化的查询。

**更新**

还有一种方法，可以确认这是通用查询日志。`tail`下载unix 命令的 windows 端口。例如这个[http://tailforwin32.sourceforge.net/](http://tailforwin32.sourceforge.net/)

我经常在我的开发机器上使用它来查看发生了什么。

打开 shell (cmd.exe) 并浏览该文件所在的文件夹。然后输入

```
tail -f query 
```

这将打印文件的最后几行以及文件是否每新行都更改。因此，如果您执行操作，`SELECT * FROM table`您应该会在控制台输出中看到查询。

# regex - JSON 中 15 个字符的字母数字字符的 RegEx

> ID：10981012
> 
> 赞同：1
> 
> 时间：2012-06-11T13:25:36.067
> 
> 标签：regex, json, testing, assertion

我正在使用 RegEx 来断言 API 调用的响应，但它目前有点过于“贪婪”并且最终匹配各种响应。需要 RegEx 位，因为响应中的实际 ID 每次都会不同。

RegEx 断言是这样的：

```
{data:\[{"name":"Mat","~id":"(.*)"},{"name":"Laurie","~id":"(.*)"}\]},"something":true} 
```

与此正确响应相匹配：

```
{data:[{"name":"Mat","~id":"4fd5ec146fc2ee0fff234234"},{"name":"Laurie","~id":"4fd5ec146fc2ee0fff234227"}]},"something":true} 
```

以及这个不正确的回应：

```
{data:[{"name":"Mat","~id":"4fd5ec146fc2ee0fff234234"},{"name":"Laurie","~id":"4fd5ec146fc2ee0fff234227"},{"name":"John","~id":"4fd5ec146fc2ee0fff234237"},{"name":"Paul","~id":"4fd5ec146fc2ee0fff234238"},{"name":"George","~id":"4fd5ec146fc2ee0fff234239"}]},"something":true} 
```

第二个`(.*)`不仅匹配第二个项目的 ID，而且匹配 ID*和*所有其他*不需要的*对象。

`~id`所以我想我需要让我的 RegEx 在字段方面更加严格。由于 ID 始终是 24 个十六进制字符，我想`(.*)`用更合适的东西替换。

*   我在[Go](http://www.golang.org/)中写这个，因此使用 Go 的[RegExp](http://golang.org/pkg/regexp/)包。
*   我正在使用[http://regexpal.com/](http://regexpal.com/)来测试 RegEx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:32:12.700

您可以使用`[^"]*`,`[^"]{24}`或`[0-9a-fA-F]{24}`代替`.*`您的 ID 字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T13:39:44.490

`.`正则表达式中的 (dot) 将匹配任何内容，因为 RegEx 中的点是匹配任何单个字符的特殊字符（换行符除外）。

您应该使用此 RegEx 始终只匹配 24 个十六进制字符：

`^[A-Fa-f0-9]{24}$`

和平

# mysql - 提高“更新”子查询性能？

> ID：10981017
> 
> 赞同：0
> 
> 时间：2012-06-11T13:25:48.950
> 
> 标签：mysql, sql, database

我有一个这样的查询：

```
UPDATE table1 SET status = 'ANSWERED' WHERE table1.number IN (select table2.number from table2) 
```

如果已经存在，它应该更新`status`为 ANSWERED`table1.number``table2.number`

它需要永远，仍然挂着..

在`table1`表中，300,000 行。

在`table2`表中，24,000 行。

`table1.number`并且`table2.number`是唯一的数字。

如何提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:28:45.097

在 table1.number 和 table2.number 字段上创建索引并使用以下查询。

```
UPDATE table1 
       INNER JOIN table2 
               ON table1.number = table2.number 
SET    table1.status = 'ANSWERED' 
```

# eclipse - JAR 文件被视为文件夹

> ID：10981019
> 
> 赞同：6
> 
> 时间：2012-06-11T13:25:54.163
> 
> 标签：eclipse, tomcat, maven, jar

我的项目目录中有一个 JAR 文件，`WEB-INF/lib`当我将项目部署到 Tomcat 时，该文件显示为文件夹。

我使用 Maven 获取 JAR 文件，使用 Eclipse 构建我的应用程序并部署到 Tomcat。

为什么 JAR 文件显示为文件夹？我不能以这种方式使用该文件，并且 Tomcat 看不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T14:37:04.670

![子项目的设置（使用 wtp）](../Images/997a79f6f76e8014ce5baa0075785b35.png)

如果我们为他有一个父 maven 项目并且我们想使用 wtp，则此设置适用于任何子模块。

Eclipse 从工作区获取更改。

例如，我们在 maven 模块中进行更改，我们不需要安装它并更新父模块的依赖项。Eclipse 会自动更新更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:37:40.240

因为如果您使用 Eclipse Web Tools Platform 进行部署，它会将您在 Eclipse 工作区中作为项目的工件展开。它允许 WTP 通过就地替换类文件来做一些魔术，而不是在每次小的更改时重新打包整个工件。对于容器来说，真的无所谓。

# java - 为什么仅对某些数据解密失败

> ID：10981021
> 
> 赞同：0
> 
> 时间：2012-06-11T13:26:02.333
> 
> 标签：java, aes

我使用了用户在本网站上提供的示例代码。我需要加密密码并存储在文件中以备将来使用。当用户尝试使用系统时，我从文件中获取密码，解密并使用它进行进一步处理。所以我不能在每个加密/解密请求期间使用不同的密钥。所以我使用fixed byte[]来存储key，而不是调用KeyGenerator.generateKey()。以下是完整代码。

```
public class App 
{
    static byte[] seckey=null;
    static
    {
        try
        {
            KeyGenerator kgen = KeyGenerator.getInstance("AES");
              kgen.init(128); 

                        // Generate the secret key specs.             
                        // SecretKey skey = kgen.generateKey();
                        // seckey = skey.getEncoded();
                        // above won't work as can't generate new secret key for decrypt. Have to use same key for encrypt and decrypt

                        // seckey = new byte[]{0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f};
                        seckey = new byte[]{(byte)172,(byte)236,(byte)125,(byte)222,(byte)188,(byte)33,(byte)210,(byte)4,(byte)202,(byte)31,(byte)188,(byte)152,(byte)220,(byte)104,(byte)62,(byte)64};

        } catch (NoSuchAlgorithmException e)
        {           
            e.printStackTrace();
        }

    }
    public static void main( String[] args )
    {   

        String password = encrypt("A123456"); //working
        System.out.println(password);
        System.out.println(decrypt(password));

        String password = encrypt("A*501717"); //NOT working
        System.out.println(password);
        System.out.println(decrypt(password));

    }    
    public static String encrypt(String passwd)
    {
        SecretKeySpec key = new SecretKeySpec(seckey, "AES");
        byte[] output;
        try
        {
            Cipher cipher = Cipher.getInstance("AES");

            // encryption pass
            cipher.init(Cipher.ENCRYPT_MODE, key);
            output = cipher.doFinal(passwd.getBytes());
        } catch (Exception e)
        {
            System.out.println("Unable to encrypt password.");
            output = "".getBytes();
        }

        return new String(output);

    }

    public static String decrypt(String passwd)
    {
        if (!StringUtils.isNotBlank(passwd))
            return "";

            SecretKeySpec key = new SecretKeySpec(seckey, "AES");

        byte[] output;
        try
        {
            Cipher cipher = Cipher.getInstance("AES");
            // decryption pass
            cipher.init(Cipher.DECRYPT_MODE, key);
            output = cipher.doFinal(passwd.getBytes());
        } catch (Exception e)
        {
            System.out.println("Unable to decrypt password");
            output = "".getBytes();
        }

        return new String(output);

    }
   } 
```

问题是，它在大多数情况下都有效，但对于某些字符序列，它无法解密。例如，目前不适用于 A123456。然后我将密钥更改为以下

```
seckey = new byte[]{0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f}; 
```

之后它适用于 A123456，但随后对 A*3qwe 失败（它与早期的密钥一起使用。所以我完全不明白为什么它只对某些数据不起作用？

有人可以帮我请我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:15:47.210

我通过使用 Base64Encoder 解决了这个问题。基本上加密的数据可能有一些无法存储在普通 txt 文件中的字符，因此解密将失败。所以我使用 Base64Encoder 对加密字符串进行编码。这个编码的字符是普通的 ascii 字符，可以很容易地存储在 txt 文件中。获取原始数据需要反向操作，即首先解码然后解密存储在文件中的字符串。

# css - 动态替换 css 标题图像

> ID：10981024
> 
> 赞同：1
> 
> 时间：2012-06-11T13:26:15.500
> 
> 标签：css, ruby-on-rails

我`css`在 Rails 应用程序的页面顶部有一个基于通用标题图像的布局。有一个课程模型将有一个可选的徽标图像，当用户查看课程材料时，它有望替换标题图像（如果存在）。这可能吗？我该怎么做？

标题的css如下...

```
#header{height:116px;width:100%;background:url('logo.jpg') top center no-repeat;} 
```

该应用程序位于...，当用户登录并单击课程时，我希望课程徽标替换标题图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:39:31.160

如果我正确理解了您的问题，则*某些模型定义了 logo*。在这种情况下，我不会弄乱 CSS - 或者至少不会弄乱资产文件，因为它们应该是静态的。

您可以在布局中定义徽标：`app/viev/layouts/application.html.erb`只需在此处创建如下内容：

```
<head>
  ..
  <style type="text/css">
    #header { background-image: url("<%= @logo_path || 'logo.jpg' %>"); }
  </style> 
```

或者

```
<head>
  <% if @logo_path %>
    <style type="text/css"> #header { .... } </style>
  <% end %> 
```

然后，在某些控制器或动作或某些视图中，`@logo_path`如果您希望徽标与默认值不同，只需设置实例变量即可。

在您的静态 CSS 中，您可以定义默认的背景图像，并确保您的布局中的这条规则比静态资产中的规则更重要。如有疑问，`!important`请在布局规则中添加子句。

当然，如果说*动态*是指 JavaScript，那么您可以直接在`onclick`给定元素的属性中包含脚本和徽标路径，方式类似于：

```
<span onclick="replace_logo('<%= model.logo_path %>')">....</span> 
```

这个函数`replace_logo`写起来不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:45:42.053

你可以通过两种方式为你想在标题中显示的每个图像定义不同的类，然后根据某些变量（控制器或操作名称...等）更改 claa 或通过在 head 中添加 yield :style 并覆盖标题样式取决于根据您的要求使用 content_for :style。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:15:57.700

我只会在我的主代码中包含 css 的那一小部分，并使用一个简单的 if...else 语句，并根据用户是否登录来更改“logo.jpg”。

例如，如果用户已登录，则徽标的变量将从默认值更改。如果用户未登录，则使用原始徽标。

由于没有可使用的代码，因此无法真正提供更多细节。

# c# - 如何以编程方式访问数据绑定数据集以进行控制？

> ID：10981025
> 
> 赞同：1
> 
> 时间：2012-06-11T13:26:15.973
> 
> 标签：c#, asp.net, data-binding, webforms

我有一个`DropDownList`控件，该控件通过`SqlDataSource`其查询返回 3 个字段（`Label`、、`Value`和`Active`）进行数据绑定 - 有没有办法以编程方式访问数据绑定数据集以检查`Active`标志是真还是假？

我知道这可以在数据绑定期间完成，但我需要`Active`在阶段检查标志，`PreRender`因为控件可能需要选择一个值，`Active=false`如果加载已进行此选择的旧记录。（在 期间`PreRender`，我将删除所有`Active=false`项目，除非它是我设置的值`DropDownList`）。

我通过填充 a 来完美地`DataView`工作`SqlDataSource`。基于此选择和比较/删除项目，但两次访问数据库以再次为每个控件获取此信息似乎效率低下。

此外，我无法为所有控件编写一段可重用/通用代码，因为我当前的方法仅在`SqlDataSource`不需要任何`SelectArguments`. 如果我可以直接访问数据绑定数据，这也将绕过这个问题。

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:27:31.017

我认为您遇到的主要问题来自使用 SqlDataSource 作为您的数据访问。SqlDataSource 易于设置并为您提供即时结果，但它们非常不灵活，需要跨页面重用。

我将创建一个从数据库中获取数据并将其存储在 List 或 IEnumerable 中的函数。如果数据在 List 中，那么您可以通过编程方式访问它，并且验证更容易实现。

下面是一个使用实体框架访问数据库的示例

**标记**

```
<asp:DropDownList ID="ddlTest" runat="server"></asp> 
```

**代码背后**

```
public List<Record> GetAllRecordsByUserName(string credentials)
{
    List<Record> recordList;
    using (CustomEntities context = new CustomEntities())
    {

        IQueryable<Record> recordQuery = from records in context.Records
                                              where records.UserName == credentials
                                              select records; 
        recordList = recordQuery.ToList<Record>();
    }
    return recordList;
}

public void ValidateAndBind(string username)
{
    List<Record> recordList = GetAllRecordsByUserName(username);

    // Do validation here

    ddlTest.DataSource = recordList;
    ddlTest.DataBind();
}

protected void Page_Load(object sender, EventArgs e)
{
    ValidateAndBind("test.username");
} 
```

您可以使用所需的任何数据访问方法，但以编程方式设置它允许您跨页面重用它。在上面的方法中，我在页面中为空间创建了它。在实践中，您应该创建一个处理特定数据检索的类，通常称为*数据访问层*。

# ruby-on-rails - 测试控制器使用多态资源创建操作（多个父级）

> ID：10981030
> 
> 赞同：1
> 
> 时间：2012-06-11T13:26:25.027
> 
> 标签：ruby-on-rails

**我有一个可以属于项目、任务和子任务的讨论（多态资源）。**我在测试以下创建操作时遇到了麻烦：

```
 26   def create               
 27     @discussion = @parent.discussions.build(params[:discussion])
 28     @discussion.user_id = current_user.id
 29     if @discussion.save    
 30       current_user.discussions.push(@discussion)
 31       redirect_to [@parent, @discussion], :notice => 'Discussion started' 
 32     else                   
 33       render 'new'         
 34       flash.now[:alert] = 'Unable to start discussion'
 35     end                    
 36   end 
```

这些是在创建操作**之前发生的过滤器之前（这些找到必要的东西）**

```
 63   private
 64 
 65   def find_cached_parent_or_from_something_id
 66     @parent || find_parent_from_something_id # this does a bit of caching
 67   end
 68 
 69   def find_parent_from_something_id
 70     @parent = nil
 71     params.each do |name, value|
 72       if name =~ /(.+)_id$/
 73         @parent = name.humanize.constantize.find(value)
 74       end
 75     end
 76     @parent
 77   end
 78
 79   def find_project_from_parent_belonging_project
 80     @project = @parent.belonging_project
 81     unless current_user.projects.include?(@project)
 82       redirect_to projects_path
 83       flash[:alert] = msg_page_not_found
 84     end
 85   end 
```

如您所见，我可以找到父项和所需的所有变量。现在这就是我的**RSpec 控制器对创建操作的测试的样子：**它们都通过了：

```
104         it "can create discussion on project using valid attributes" do                                                                   
105           lambda do
106             post :create, :project_id => project,         
107                           :discussion => valid_attributes
108             flash[:notice].should == 'Discussion started'
109           end.should change(Discussion, :count).by(1)                                                                                     
110         end
111   
112         it "can create discussion on task using valid attributes" do                                                                      
113           lambda do
114             post :create, :task_id => task,               
115                           :discussion => valid_attributes
116             flash[:notice].should == 'Discussion started'
117           end.should change(Discussion, :count).by(1)                                                                                     
118         end
119 
120         it "can create discussion on subtask using valid attributes" do                                                                   
121           lambda do
122             post :create, :subtask_id => subtask,         
123                           :discussion => valid_attributes
124             flash[:notice].should == 'Discussion started'
125           end.should change(Discussion, :count).by(1)                                                                                     
126         end 
```

但是，我更喜欢**尽可能 DRY 测试所有父母的讨论创建**，类似于下一个测试的内容。

```
104         ['project', 'task', 'subtask'].each do |parent|
105           it "can create discussion on #{parent} using valid attributes" do
106             lambda do      
107               post :create, :parent_id => parent,
108                             :discussion => valid_attributes 
109               flash[:notice].should == 'Discussion started'
110             end.should change(Discussion, :count).by(1)
111           end
112         end 
```

**如何正确编写此测试？**

我正在使用 FactoryGirl 顺便说一句。上面的这个测试返回 > **NameError: uninitialized constant Parent**

另外，如果有更好的方法/做法，请务必纠正我:)

编辑：我已经使用下面接受的答案解决了这个问题，并且偶然发现了另一个非常相似的问题，我再次不知道......

```
142           it "can access show action for discussion for #{parent}" do
143             get :show, :"#{parent}_id" => self.send(parent),
144                        :id => "disucussion_by_another_user_for_#{parent}"    
146             response.should be_successful   
147           end 
```

这个 :id 参数写错了……你能帮我写正确吗？（这个讨论_by_another_user_for_#{parent} 是我定义的3个不同的工厂......）

这是我的工厂的样子：

```
16   let!(:discussion_by_another_user_for_project) { FactoryGirl.create(:discussion,
 17                                                                      :user => another_user,
 18                                                                      :discussionable => project) }
 19   let!(:discussion_by_another_user_for_task) { FactoryGirl.create(:discussion,
 20                                                                      :user => another_user,
 21                                                                      :discussionable => task) }
 22   let!(:discussion_by_another_user_for_subtask) { FactoryGirl.create(:discussion,
 23                                                                      :user => another_user,
 24                                                                      :discussionable => subtask) } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:35:15.393

过去，我在尝试执行类似的“技巧”时遇到过类似的困境，但你犯了同样的错误。您应该一次只测试一件事，这样您就知道测试失败时出了什么问题。您要做的是在一次测试中测试 3 种不同的东西，这违背了测试的目的。你应该留下 3 个“非 DRY”测试来测试你正在测试的东西，而不是 1 个会让人困惑的 DRY 测试。

话虽这么说，你可以尝试这样的事情，但如果它失败了，你就会遇到必须调试测试*和*代码的问题，以便知道哪个是错误的：

```
let!(:project) { FactoryGirl.create(:project) }
let!(:task) { FactoryGirl.create(:task) }
let!(:subtask) { FactoryGirl.create(:subtask) }

it "can create discussion on #{parent} using valid attributes" do
  parents = [project, task, subtask]
  parents.each do |parent|
    expect {
      post :create, :parent_id => parent,
                    :discussion => valid_attributes
      flash[:notice].should == 'Discussion started'
    }.to change(Discussion).by(3)
  end
end 
```

注意：如果您使用的是旧版本的 RSpec，请将“expect”更改为“lambda”。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:51:09.383

我想你几乎在那里：

```
["project", "task", "subtask'].each do |parent|
  it "can create discussion on #{parent} using valid attributes" do                                                                      
    lambda do   
      post :create, :"#{parent}_id" => self.send(parent),               
                    :discussion => valid_attributes
      flash[:notice].should == 'Discussion started'
    end.should change(Discussion, :count).by(1)                                                                                     
  end
end 
```

希望这可以帮助。

[编辑]您的额外问题：我不太确定您如何相信仅传递一个字符串实际上会创建一个对象。您使用 FactoryGirl 创建一个对象，如下所示：

```
FactoryGirl.create(:factory_name) 
```

因此，如果您考虑到这一点，您的测试将变为：

```
it "can access show action for discussion for #{parent}" do
  discussion_by_another_user = FactoryGirl.create("discussion_by_another_user_for_#{parent}".to_sym)    
  get :show, :"#{parent}_id" => self.send(parent),
      :id => discussion_by_another_user.id
  response.should be_successful   
end 
```

当然，您可以内联参数`discussion_by_another_user`，但我认为这更具可读性。希望这可以帮助。

[编辑] 澄清问题后：这实际上与您之前提出的完全相同*。*您构建了一个字符串，但该字符串实际上是您要调用的方法，并且和以前一样，您只需编写：

```
it "can access show action for discussion for #{parent}" do
  get :show, :"#{parent}_id" => self.send(parent),
             :id => self.send("discussion_by_another_user_for_#{parent}")
  response.should be_successful   
end 
```

高温高压

# php - 关于折旧的eregi的错误

> ID：10981034
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:26:39.433
> 
> 标签：php

这是我收到的错误

```
Deprecated: Function eregi() is deprecated in /home/socia125/public_html/profile.php on                  
line231 
```

这是我的代码

```
// Loop through the array of user agents and matching operating systems
   foreach($OSList as $CurrOS=>$Match) {
    // Find a match
    if (eregi($Match, $agent)) {
            break; 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:34:39.097

好吧，[正如手册引用的那样](http://de.php.net/manual/en/function.eregi.php)，

> 自 PHP 5.3.0 起，该函数已被弃用。强烈建议不要依赖此功能。

改为使用[`preg_match()`](http://de.php.net/manual/en/function.preg-match.php)。不过要小心一点，因为您无法将搜索模式 1:1 从[`eregi`](http://de.php.net/manual/en/function.eregi.php)转换为[`preg_match()`](http://de.php.net/manual/en/function.preg-match.php).

显示差异的示例：

```
$t = "this is a test...";
if (preg_match("/test/i", $t)) echo "match!";
if (eregi('test', $t)) echo "match!"; 
```

php 手册中有一[整章](http://de.php.net/manual/en/reference.pcre.pattern.syntax.php)专门介绍 PCRE 语法。

但是，如果您只是简单地尝试查找字符串，请使用[`strstr`](http://de.php.net/manual/en/function.strstr.php)or之类的东西[`stristr`](http://de.php.net/manual/en/function.stristr.php)，它们会更快更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:34:07.273

使用`preg_match`而不是`eregi`.

但似乎它所做的只是搜索一个字符串，所以你也许可以使用它`stripos`。

```
// Loop through the array of user agents and matching operating systems
   foreach($OSList as $CurrOS=>$Match) {
    // Find a match
    if (stripos($Match, $agent) !== FALSE ) {
            break; 
```

我不能保证它可以正常工作，因为我们看不到所有代码（尤其是 and 的内容和示例`$Match`值`$agent`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:32:29.847

从 5.3 开始不推荐使用 eregi()。您可以忽略它，因为它只是一个警告。

我建议改用 preg_match() 。

[请参阅此处](http://www.devthought.com/2009/06/09/fix-ereg-is-deprecated-errors-in-php-53/)的链接

# python - 函数式编程——for和while循环

> ID：10981037
> 
> 赞同：5
> 
> 时间：2012-06-11T13:26:40.793
> 
> 标签：python, functional-programming

我正在尝试用 Python 编写`for`和`while`循环——函数式编程风格。

我认为`for`构造很好，但`while`不起作用，它会无限运行。

```
# for loop
lst = [1, 2, 3]
def fun(e):
   return e
print map(fun, lst)

# while loop
i = 1
def whileloop():
    global i
    print i
    i = i+1
while_FP = lambda: ((i < 5) and whileloop()) or while_FP()
while_FP() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T13:53:02.867

FP 风格不使用全局状态（全局变量）并最小化副作用（例如 IO）。While-loop 喊叫看起来像这样：

```
fp_while = lambda pred, fun, acc: (lambda val: fp_while(pred, fun, val) if pred(val) else val)(fun(acc))

print fp_while(lambda x: x < 5, lambda x: x + 1, 1) 
```

如果您需要副作用：

```
def add_and_print(x):
   print x
   return x + 1

fp_while(lambda x: x < 5, add_and_print, 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-06T15:38:28.553

如果迭代次数过多，使用@aleksei-astynax-pirogov 回答的递归将导致递归错误。相反，您可以隐藏函数内部状态的副作用。

```
def fp_while(pred, fun, acc):
    v = acc
    while(pred(v)):
        v = fun(v)
    return v 
```

使用示例：

```
fp_while(lambda x: x < 5, lambda x: x + 1, 1)
print(fp_while(lambda x: x < 5, lambda x: x + 1, 1))
# outputs 5 
```

**使用生成器方法**

下面的生成器方法将允许您在每次迭代时存储状态

```
def fp_while_generator(pred, fun, acc):
    v = acc
    while(pred(v)):
        yield v
        v = fun(v)
    yield v # remove this if you do not want the last value that fails the check 
```

使用示例：

```
my_while_generator = fp_while_generator(lambda x: x < 5, lambda x: x + 1, 1)
print([i for i in my_while_generator])
# outputs [1,2,3,4,5] 
```

有关生成器的更多信息 [https://realpython.com/introduction-to-python-generators/](https://realpython.com/introduction-to-python-generators/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T13:45:24.660

可能你需要：

```
i = 1
def whileloop():
    global i
    print i
    i = i+1
    return True

while_FP = lambda: ((i < 5) and whileloop()) and while_FP()
while_FP() 
```

从功能的角度来看`and`，如果左侧是 ，则评估右侧字段`True`。您也可以使用重写它`or`。顺便说一句，使用全局变量不是一个好习惯。

# ios - 设置输出视频设置时出错

> ID：10981040
> 
> 赞同：1
> 
> 时间：2012-06-11T13:26:48.373
> 
> 标签：ios, xcode, avcapturesession

```
output.videoSettings = [NSDictionary dictionaryWithObject:
    [NSNumber numberWithInt:kCVPixelFormatType_32BGRA]
    forKey:(id)kCVPixelBufferPixelFormatTypeKey]; 
```

我在此特定行上收到此错误

```
No known class method for selector "dictionaryWithObject:forKey: 
```

这个错误有什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:55:24.840

试试这个：

```
videoOutput.videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA], (id)kCVPixelBufferPixelFormatTypeKey,
                             nil]; 
```

# asp.net-mvc - 电话号码或社会保险号的 DisplayFormat.DataFormatString

> ID：10981049
> 
> 赞同：12
> 
> 时间：2012-06-11T13:27:03.357
> 
> 标签：asp.net-mvc, formatting, data-annotations, asp.net-mvc-4

有没有办法可以使用`DisplayFormat`视图模型属性上的属性来应用`DataFormatString`社会保险号或电话号码的格式？我知道我可以用 javascript 来做到这一点，但如果可能的话，我更愿意让模型来处理它。

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "???????")]
public string Ssn { get; set; } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T14:11:08.030

以下应该有效，但请注意 Ssn 属性的类型差异。

```
[DisplayFormat(DataFormatString = "{0:###-###-####}")]
public long Phone { get; set; }

[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:###-##-####}")]
public long Ssn { get; set; } 
```

请注意，为了应用格式，您需要在视图中使用以下 html 帮助程序：

```
@Html.DisplayFor(m => m.Property) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-13T14:23:04.197

如果类型是整数，则接受的答案很好，但是很多 id 最终被键入为字符串以防止丢失前导零。您可以通过将字符串分成几部分来格式化字符串，`Substring`并通过将其粘贴在 DisplayTemplate 中使其可重用。

在里面`/Shared/DisplayTemplates/`，添加一个名为`Phone.vbhtml`：

```
@ModelType String
@If Not IsNothing(Model) AndAlso Model.Length = 10 Then
    @<span>@String.Format("({0}) {1}-{2}",
              Model.Substring(0, 3),
              Model.Substring(3, 3),
              Model.Substring(6, 4))</span>
Else
    @Model
End If 
```

您可以通过以下几种方式调用它：

1.  只需使用同名数据类型注释模型上的属性：

    ```
    <DataType("Phone")> _
    Public Property Phone As String 
    ```

    然后使用简单的调用`DisplayFor`：

    ```
     @Html.DisplayFor(Function(model) model.Phone) 
    ```

2.  或者，您可以按名称指定要使用的 DisplayTemplate：

    ```
     @Html.DisplayFor(Function(model) model.VimsOrg.Phone, "Phone") 
    ```

# internet-explorer - 如何让 TCM 自定义协议处理程序在 64 位 Internet Explorer 中工作？

> ID：10981052
> 
> 赞同：2
> 
> 时间：2012-06-11T13:27:33.230
> 
> 标签：internet-explorer, tridion, protocol-handler

我经常使用的 Tridion 的功能之一是它的“协议处理程序”。对于那些不熟悉该功能的人：如果您将 TCM URI（例如`tcm:1-23-32`）粘贴到安装了 Tridion Content Manager 的机器上 Internet Explorer 的地址栏中，它将显示该项目的 XML。

但我注意到此功能在 64 位版本的 Internet Explorer 9 中不起作用。这里有没有人知道我需要做什么才能使其在 64 位版本中也起作用？

我正在使用 Tridion 2011 SP1 + HR1，但我不认为这个问题/问题特定于该版本的 Tridion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:29:46.713

The problem that "protocol handler" is 32-bit COM object, so as workaround you can put COM component to COM+ application, but anyway the described feature is only side effect of main purpose of the protocol handler (handling TCM URIs in XSLT templates). And most probably this side effect feature won't be there anymore in upcoming version(s).

# python - Django 相当于 mako 的可调用块

> ID：10981054
> 
> 赞同：1
> 
> 时间：2012-06-11T13:27:38.097
> 
> 标签：python, django, django-templates, mako

是否有与 Mako 的可调用块等效的 Django？

在 Mako 中，如果我想重用某个特定的 HTML，我可以将它放在一个“可调用块”中，该块可以从模板中的多个位置调用。

```
<%def name="makerow(row)">
    <tr>
    % for name in row:
        <td>${name}</td>\
    % endfor
    </tr>
</%def> 
```

Django有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:31:00.330

在 Django 中，您可以包含其他 HTML 模板来完成此操作：

```
{% include "main/includes/subtemplate.html" %} 
```

您可以在包含的模板中访问与包含它的父模板中相同的变量。这允许您在模板中的多个位置重用 HTML。

另一种方法是创建自定义模板标签：[https](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/) ://docs.djangoproject.com/en/dev/howto/custom-template-tags/这允许您创建自己的标签来生成 HTML 输出。Django 文档提供了有关如何执行此操作的各种示例。

# .net - 如何在 ADO.Net 中实现按需加载？

> ID：10981055
> 
> 赞同：1
> 
> 时间：2012-06-11T13:27:41.513
> 
> 标签：.net, ado.net, lazy-loading

我想在没有分页的情况下在网格视图中显示大量数据，但是通过提供“加载更多”选项来检索下一页并保留前一页。

如何使用 EF 或 ADO.Net 组件实现此功能？

我认为，`.Skipe`L2SQL`.Take`或 EF 中的方法无济于事，因为它们会在每次*加载*请求时重新执行查询。但是我想要实现的是类似于打开的 DataReader 的东西，它保存结果而不管数据库中发生了什么（添加/删除记录）。DataReader 的唯一问题是它不应该保持打开状态。

标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:55:32.353

**标准方法是使用 Skip/Take 并为每个加载的段重新执行查询。**这个解决方案很简单，更重要的是，它是无状态的。您当然不希望保持打开的连接/命令/查询的时间超过当前 HTTP 请求执行所需的时间。这是一种反模式，因为您的应用程序变得有状态且脆弱。

如果查询非常昂贵，请考虑将前 5 页左右存储在为此目的而制作的新表中，以便您可以快速检索它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:05:21.697

正常分页也会重新执行查询，所以我认为这无关紧要。

您唯一的两个选择是进行某种分页（跳过/采取是一种很好的实现，尽管实际分页可能有性能优势）

或者

将其全部保存到数据表或其他东西中。以这种方式分页不会带来任何性能优势，但您确实让用户能够一次仅加载一些记录，这可能是一个很好的可用性奖励。

# android - 软键盘不显示且不关闭时

> ID：10981056
> 
> 赞同：0
> 
> 时间：2012-06-11T13:27:45.693
> 
> 标签：android, android-softkeyboard

我有一个用于过滤列表的edittext。我的问题是，当我点击edittext时，键盘没有出现，当我按下回车键时，它就不会关闭。

我正在使用以下代码进行过滤：

```
adapt = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,veik);
    lv.setTextFilterEnabled(true);
ed.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                // veikali.this.veik.getFilter().filter(s);
                 adapt.getFilter().filter(s);
            }
        });

          ed.setClickable(true); 
```

你能告诉我如何在单击edittext时显示键盘并在按Enter时隐藏它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:37:32.807

如果您使用的是触屏手机，则在触摸编辑文本时会出现软键盘。至于查询的第二部分，请尝试以下操作：

```
ed.setOnKeyListener(new View.OnKeyListener()
    {

        @Override
        public boolean onKey(View editView, int keyCode, KeyEvent event)
        {
            Context mContext = MyClass.this;
            if( keyCode == KeyEvent.KEYCODE_ENTER ){
                InputMethodManager imm = (InputMethodManager) mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(ed.getWindowToken(),0);
                return true;
            }
            return false;
        }
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:43:12.897

这似乎是很多额外的工作。我不记得必须为我的编辑文本提供此功能，因为它应该默认执行此操作。

你确定edittext可以聚焦并且没有某种类型的视图阻止它吗？如果您在列表视图中使用，您可能需要在 ListView 中查看此线程[Focusable EditText](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T23:46:07.757

作为简单的解决方案，尝试在 AndroidManifest.xml 中为活动标签添加以下属性：

```
android:windowSoftInputMode="stateVisible|adjustResize" 
```

检查[此文档。](http://developer.android.com/guide/topics/manifest/activity-element.html)

# security - 如何保护 .ASPXAUTH 令牌

> ID：10981061
> 
> 赞同：12
> 
> 时间：2012-06-11T13:27:58.920
> 
> 标签：security, .net

如何保护 .ASPXAUTH 令牌以便通过 SSL 发送。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T19:48:44.980

直接来自[msdn 文档](http://msdn.microsoft.com/en-us/library/ms998310.aspx#paght000012_step3)：

> 为防止表单身份验证 cookie 在通过网络时被捕获和篡改，请确保您对所有需要身份验证访问的页面使用 SSL，并通过设置元素`requireSSL="true"`将表单身份验证票证限制为 SSL 通道。`<forms>`
> 
> `requireSSL="true"`将表单身份验证 cookie 限制为在元素上设置的 SSL 通道`<forms>`，如以下代码所示：
> 
> `<forms loginUrl="Secure\Login.aspx" requireSSL="true" ... />`
> 
> 通过设置`requireSSL="true"`，您可以设置确定浏览器是否应将 cookie 发送回服务器的安全 cookie 属性。设置了安全属性后，浏览器只会将 cookie 发送到使用 HTTPS URL 请求的安全页面。

**注意：**使用 时`requireSSL="true"`，auth cookie 仅针对通过 SSL 请求的页面发送。因此，如果您通过 HTTP（非 SSL）访问页面，您可能看起来没有登录。本文讨论了该问题并提出了与 SharePoint 网站相关的解决方案（但理论是可转移的）：[保护混合 SSL SharePoint 网站的身份验证 cookie](http://www.sharepointconfig.com/2010/04/partial-ssl-sharepoint-sites-securing-the-authentication-cookie/)

# jquery - 内存管理：删除 jquery 对象的容器（插件）

> ID：10981064
> 
> 赞同：0
> 
> 时间：2012-06-11T13:28:09.187
> 
> 标签：jquery, memory, jquery-plugins, plugins, memory-leaks

我只想确认我在我的应用程序中所做的事情。

我创建了一些 jquery 插件，它们在我的页面的 DOM 中添加了一些元素和事件。

例如，我在页面的 DOM 元素中初始化插件：

```
$("#myplugin_container").myplugin('init', {'data':mydata}); 
```

我想知道的：如果我用移除功能移除容器

```
$("#myplugin_container").remove(); 
```

，我会在插件上有内存泄漏还是会正确删除 jquery 对象？

我希望我的解释清楚...

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:38:41.917

当您使用 .remove() 时，jQuery 将删除与该元素相关的所有事件处理程序和其他数据，因此不应该有任何内存泄漏。

来自remove() 的[jQuery 文档：](http://api.jquery.com/remove/)

> 与 .empty() 类似，.remove() 方法将元素从 DOM 中取出。当您想要删除元素本身以及其中的所有内容时，请使用 .remove()。除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。要删除元素而不删除数据和事件，请改用 .detach()。

# c# - 如何通过用户凭据访问 AD FS 声明？

> ID：10981065
> 
> 赞同：4
> 
> 时间：2012-06-11T13:28:23.917
> 
> 标签：c#, .net, wcf, web-services, adfs2.0

当我正在开发 WCF Web 服务以在用户的​​登录操作与其活动目录角色和权限之间建立中介时。我不希望我的主机应用程序直接与 AD FS 对话。我希望任何主机应用程序都可以使用我的 Web 服务，它会根据给定的凭据提供必要的信息。

在我的网络方法中，我需要通过用户的登录凭据从 AD FS (WIF) 获取声明。

我的 web 方法将有两个输入参数，Window 用户的电子邮件 ID/Windows 帐户名和密码。

因此，我想通过给定用户的凭据在我的 Web 方法中访问 AD FS 声明。

如何通过给定用户的凭据获得 AD FS 声明？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T19:35:07.253

您应该对使用集成 Windows 身份验证的 AD FS 2.0 的 https://.../adfs/services/trust/13/usernamemixed 端点执行 Web 服务调用，提供用户凭据以便可以设置连接。在此端点上，调用[http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue](http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue)操作。（更多详细信息在[WS-Trust 1.3 规范的第 4.1 节中](https://docs.oasis-open.org/ws-sx/ws-trust/200512/ws-trust-1.3-os.html#_Requesting_a_Security_Token)。）此操作的输入是 RequestSecurityToken 请求。响应包含一个 SAML 令牌，其中包含您需要的声明。

请注意，AD FS 2.0 WSDL 在 https://.../adfs/services/trust/mex 上可用：如果您将 Visual Studio[添加服务引用](http://msdn.microsoft.com/en-us/library/bb628652.aspx)向导或 Java [wsimport](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)指向该 URL，那么您将很容易生成可用于执行 RST 问题操作的客户端代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T07:47:31.737

您可以从 ADFS 请求 DisplayTokem 并使用它，它与您在令牌中的信息基本相同。

```
public DisplayClaimCollection GetDisplayClaims(string username, string password)
        {
            WSTrustChannelFactory factory = null;
            try
            {

                // use a UserName Trust Binding for username authentication
                factory = new WSTrustChannelFactory(
                    new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential),
                    "https://.../adfs/services/trust/13/usernamemixed");

                factory.TrustVersion = TrustVersion.WSTrust13;

                factory.Credentials.UserName.UserName = username;
                factory.Credentials.UserName.Password = password;

                var rst = new RequestSecurityToken
                              {
                                  RequestType = RequestTypes.Issue,
                                  AppliesTo = "Relying party endpoint address",
                                  KeyType = KeyTypes.Symmetric,
                                  RequestDisplayToken = true
                              };

                IWSTrustChannelContract channel = factory.CreateChannel();
                RequestSecurityTokenResponse rstr;
                SecurityToken token = channel.Issue(rst, out rstr);

                return rstr.RequestedDisplayToken.DisplayClaims;
            }
            finally
            {
                if (factory != null)
                {
                    try
                    {
                        factory.Close();
                    }
                    catch (CommunicationObjectFaultedException)
                    {
                        factory.Abort();
                    }
                }
            }
        } 
```

但这不是正确的做法！您应该使用您的 RelyingParty 证书来解密加密的令牌并从中读取声明。

# internet-explorer - CSS 在 Internet Explorer 中不起作用

> ID：10981067
> 
> 赞同：-4
> 
> 时间：2012-06-11T13:28:26.227
> 
> 标签：internet-explorer, css

我在这个页面上遇到了 IE 中的 CSS 问题：

[http://www.carby.cz/index1.php](http://www.carby.cz/index1.php)

它适用于除 IE 之外的所有浏览器。我很无奈；我已经尝试了我在论坛上找到的所有内容，但页面中的所有样式都没有显示在 IE 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:50:54.347

如果您删除以下内容，您的网站主要在 IE9 中运行：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/> 
```

这告诉 IE 以 IE7 模式显示页面。你猜怎么着？IE7 很烂。

例如，这在 IE7 中不起作用：

```
.bg1 {
    background-color: rgba(255,255,255,0.8);
} 
```

您可以使用半透明`.png`作为后备，这将在 IE7 中工作。或者，您可以使用`background-color: #fff; background-color: rgba(255,255,255,0.8);`，它只会`rgba()`在支持它的浏览器中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:23:58.347

Internet Explorer 8 及更低版本不支持太多 CSS3。

如果您集成[CSS3 PIE](http://css3pie.com/)，您可以添加对[某些东西](http://css3pie.com/documentation/supported-css3-features/)的支持。

# .net - .Net 简单的内存缓存

> ID：10981069
> 
> 赞同：8
> 
> 时间：2012-06-11T13:28:31.483
> 
> 标签：.net, caching

简而言之，.Net 生态系统中存在哪些简单的内存缓存？

我正在寻找的是：

*   无配置（除了简单的 API 调用）。我不想弄乱外部配置文件，因为它们只会使部署复杂化。
*   同一进程（不是某些外部进程或服务器）。最好像创建一样容易
    `var myCache = new SimpleCache(1024 * 1024 * 100); // 100 MB`
*   指定的内存限制
*   根据最少使用量从缓存中清除的项目
*   基于时间的过期（不是必需的，但在其他场景中可能有用）
*   适用于 .Net 3.5

我已经研究过这些选项：

*   ASP.Net System.Web.Caching
    *   它的 API 不支持对缓存大小进行任何形式的控制，也不支持基于使用的优先级。因此，当它决定有足够的内存压力来清空缓存时，您将完全受其支配。
*   系统.运行时.缓存
    *   不是一个选项，因为这是在 .Net 4.0 中添加的，并且这篇文章似乎表明它的性能很差：[System.runtime.caching 的性能](https://stackoverflow.com/questions/3157340/performance-of-system-runtime-caching)
*   Microsoft 企业库 - 缓存块
    *   除了拥有重量级的声誉外，我不喜欢使用 XML 文件或 app.config 进行配置。此外，虽然它支持根据存储的对象的数量来限制缓存的大小，但它没有限制这些对象的大小的机制。
*   NCache
    *   对于我想要的用例来说可能有点矫枉过正，但最重要的是，它是一种付费产品，我不想处理（与我只在一两天内写一个相比）。像往常一样，它的速成版有使用限制，不鼓励将其用于任何生产目的。
*   内存缓存D
    *   与我想要的完全相反（外部分布式进程）

我正在使用 Google Protocol Buffers (protobuf-net)，所以我确实对每个项目的内存占用量有一个相对准确的估计。我正在缓存从数据库访问返回的数据，但我不想使用正式的 ORM（我实际上正在使用 PetaPoco，但这不是重点）。

在这个阶段，我计划实现我自己的缓存，使用双链表和散列（字典）在达到缓存限制后从缓存中删除最近最少使用的项目。但是，在我推出自己的选项之前，我想看看是否有人知道任何合适的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:03:50.310

那么你最终对缓存做了什么？

我有一个我正在研究的通用缓存原型，除了缓存限制是容量（项目数）而不是内存使用量之外，它几乎可以满足您的需求，但它有一个您可能会喜欢的额外功能：本地持久性。

缓存是按层构造的，你可以有一层：内存，双层：内存+本地持久性，或三层：内存+本地持久性+网络共享。您可以根据需要使用任何图层组合。尽管网络共享被设计为 .net 远程服务，可以安装在网络上的任何计算机上并且可以被客户端缓存自我发现，但功能还不是很完善。

缓存是通过接口 ICache<TKey,TValue> 访问的通用类。本地持久缓存使用 SQL Express Compact 4 创建动态数据库和表，其中包含 TKey 的所有字段、时间戳和序列化为 Image 列的 TValue。在多层配置的情况下，当您在顶级缓存上使用 TryGetValue( TKey key, out TValue value ) 方法时，如果第一层（内存缓存）没有它内部与下一层（本地持久的），然后下一个......直到没有更多的缓存可用于提供数据。当内存缓存丢弃一个项目时，它让下一个缓存有机会将该项目添加到其层，因此在持久缓存的情况下，数据被存储以供将来的请求使用。

缓存具有使用定义的保留时间参数（即内存缓存为几分钟，本地持久缓存为 30 天）和容量。

如果有人感兴趣，我可以将其发布为公共域代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:13:10.177

It is quite old, but i resembles what you are talking about

[Generic cache with memory consumption](http://www.codeproject.com/Articles/7684/Using-C-Generics-to-implement-a-Cache-collection)

and here is another SO with a relevant scenario:

[performance of system runtime caches](https://stackoverflow.com/questions/3157340/performance-of-system-runtime-caching)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:22:29.590

AppFabric for Windows Server 中的缓存功能怎么样？试试看 ！[http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)和[http://msdn.microsoft.com/en-us/library/hh334364.aspx](http://msdn.microsoft.com/en-us/library/hh334364.aspx)

但是，如果市场上没有提供所需行为的产品，您将不得不使用设计模式实现自己的自定义缓存层。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T09:04:32.317

查看[MemoryCache和](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)[CodeProject](http://www.codeproject.com/Articles/290935/Using-MemoryCache-in-Net-4-0)上关于使用 MemoryCache的这篇文章。

# s#arp-architecture - s#arp 架构 + 命令和处理程序

> ID：10981070
> 
> 赞同：1
> 
> 时间：2012-06-11T13:28:33.560
> 
> 标签：s#arp-architecture

这是我第一次在项目中使用 S#arp Architecture 2.0。

任务项目中有两个文件夹：Commands 和 CommandHandlers。

我对此进行了研究，并试图通过食谱项目来理解我必须在那里放什么。我想象我必须像以前一样做一些事情：“viewToModel”函数和 IRepository 中的 SaveOrUpdate。

有人可以解释“命令和命令处理程序”或/并给我一个很好的文档吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:10:56.673

你看过食谱维基吗？[使用命令？](https://github.com/sharparchitecture/Sharp-Architecture-Cookbook/wiki/Using-commands)

根据您的问题，我了解您正在使用某种 CRUD 功能，在这种情况下，使用命令和处理程序方法可能是过大的，只需将实体加载到您的控制器中，从表单中复制值并保存它。使用命令更适合[基于任务的 UI](http://cqrs.wordpress.com/documents/task-based-ui/)以及您想要在实体上执行某些行为的地方。

# jpa-2.0 - JPA2：使用 TemporalType=TIMESTAMP 作为复合主键的一部分

> ID：10981071
> 
> 赞同：3
> 
> 时间：2012-06-11T13:28:36.727
> 
> 标签：jpa-2.0

在 JavaEE 6 教程 (http://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#bnbqf) 中说明了如何映射主键：

> 主键或复合主键的属性或字段必须是以下 Java 语言类型之一：
> --cut--
> java.util.Date（时间类型应为 DATE）
> --cut--

写“应该是日期”是什么意思？使用 TemporalType=TIMESTAMP 的含义是什么？

我有一个复合主键，它有两个字段，一个 long 和一个 java.util.Date。在实体中，我有以下映射（未列出 ID 类）：

```
@Id
@Temporal(TemporalType.TIMESTAMP)
private Date startDate;

@Id
private long id; 
```

以上在单元测试中工作正常，但我担心上面关于使用哪种时间类型的措辞。

评论和见解表示赞赏！

# java - Railo 上的 JavaMelody：没有 SQL 统计信息？

> ID：10981080
> 
> 赞同：0
> 
> 时间：2012-06-11T13:29:34.027
> 
> 标签：java, tomcat, monitoring, railo, java-melody

我刚刚将 JavaMelody 添加到我的 Railo 应用程序服务器，但我无法获得 SQL 统计信息。

我关注了这篇出色的帖子：[http ://aarongreenlee.com/share/monitor-tomcat-performance-with-open-source-software](http://aarongreenlee.com/share/monitor-tomcat-performance-with-open-source-software)

也许问题可以导出到 Railo 以外的其他 AS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:11:06.140

您是否尝试过此处关于配置 JDBC 监控的说明：[http ://code.google.com/p/javamelody/wiki/UserGuide#7._JDBC](http://code.google.com/p/javamelody/wiki/UserGuide#7._JDBC)

如果您不在 JNDI 中使用数据源，它看起来就像使用 JDBC 代理。我最近有理由了解 Railo 如何处理数据源而它不处理 JNDI，因此您可能必须设置一个新的数据源并按照说明进行操作。请让我知道它是否有效。

[更新]我自己试过了。虽然我可以让数据源正常工作，但我仍然没有得到任何统计信息。看起来我们可能会遇到这个错误：

[http://code.google.com/p/javamelody/issues/detail?id=142](http://code.google.com/p/javamelody/issues/detail?id=142)

# android - 通过选择复选框计算距离并单击按钮提交然后转到下一个xml布局android

> ID：10981083
> 
> 赞同：1
> 
> 时间：2012-06-11T13:29:41.950
> 
> 标签：android

请有人帮我找到解决方案..如何计算我的距离？..我有距离值..例如我有 4 个地方 A、B、C 和 D。

```
distance(A,A,0);
distance(A,B,10.1);
distance(A,C,10.3);
distance(A,D,10.9);
distance(B,A,9.1);
distance(B,B,0);
distance(B,C,0.2);
distance(B,D,5.3);
distance(C,A,9.2);
distance(C,B,0.2);
distance(C,C,0);
distance(C,D,4.9);
distance(D,A,10.8);
distance(D,B,4.5);
distance(D,C,4);
distance(D,D,0); 
```

这是我的 distance.xml

```
<CheckBox
    android:id="@+id/A_checkbox"
    android:layout_width="match_parent"
    android:layout_height="15dp"
    android:text="@string/A"
    android:textSize="5pt" />

<CheckBox
    android:id="@+id/B_checkbox"
    android:layout_width="match_parent"
    android:layout_height="15dp"
    android:text="@string/B"
    android:textSize="5pt" />

<CheckBox
    android:id="@+id/C_checkbox"
    android:layout_width="match_parent"
    android:layout_height="15dp"
    android:text="@string/C"
    android:textSize="5pt" />

<CheckBox
    android:id="@+id/D_checkbox"
    android:layout_width="match_parent"
    android:layout_height="15dp"
    android:text="@string/D"
    android:textSize="5pt" />

<Button
    android:id="@+id/submit_button"
    android:layout_width="wrap_content"
    android:layout_height="34dp"
    android:text="@string/submit"
    android:textSize="5pt" /> 
```

result.xml布局会做..选择并提交后..距离将从最小距离和总距离计算并显示所选地点。

```
for example--> i select A,B,C and D..
the result will show --> B->C->D->A..
the total distance --> 15.9km.. 
```

所以，这是我的想法。我需要创建多少个activity.java？

# asp.net - ASP.net 的虚拟列表视图？

> ID：10981084
> 
> 赞同：2
> 
> 时间：2012-06-11T13:29:46.473
> 
> 标签：asp.net, listview, virtualmode

ASP.net 有虚拟列表视图吗？

* * *

我为 asp.net 找到的大多数表（和网格、列表视图、数据表、数据网格、网格视图、列表网格）都希望用户对数据进行分页。

我想要一个包含例如 10,000 个项目的列表视图；我不想要 10 页。

1994 年，使用“虚拟”模式下的列表视图解决了长列表的问题。控件只需要给出要显示的项目数。根据需要（即当用户将它们滚动到视图中或尝试对列进行排序时）有关这些项目的控制信息。

有没有人创建了一个虚拟列表视图（大概使用异步 Javascript 和 XML，或同步 Javascript 和 XML）？

* * *

如果答案是**“否”**：不要害怕回答问题。答案没有错：

> **不。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:12:09.513

我只制作了一个虚拟 ListView 示例。

我从渲染 div 的转发器开始，其属性包含需要加载的数据库 ID。

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate>
        <div data-id="<%# GetID(Container.DataItem) %>" class="DataLine"> 
        loading...
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

接下来是检查此 div 是否可见的 javascript，并使用 ajax 获取数据。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script>
function isScrolledIntoView(elem)
{
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = elem.offset().top;
    var elemBottom = elemTop + elem.height();

    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

var cTimerID = null;
function RunWithSomeDelay()
{
    if(cTimerID) 
        clearTimeout(cTimerID);

    cTimerID = setTimeout(CheckWhatToShow, 1000);
}

function CheckWhatToShow()
{
    $(".DataLine").each(function(i, selected) {

        var ThisOne = $(selected);

        if(ThisOne.attr("Done") != "1")
        {
            if(isScrolledIntoView(ThisOne))
            {                   
                ThisOne.attr("Done", "1");
                // here you can use a simple ajax load, to load your data.
                ThisOne.text(ThisOne.attr("data-id"));
            }
        }
    });
}

$(document).ready(function() {  
    // first time run
    CheckWhatToShow();
    // run on scrool
    $(window).scroll(RunWithSomeDelay);
}); 

</script> 
```

这是我的代码作为测试

```
public partial class Dokimes_StackOverFlow_VirtualList : System.Web.UI.Page
{
    List<int> oMainIds = new List<int>();

    protected void Page_Load(object sender, EventArgs e)
    {
        for (int i = 0; i < 3000; i++)            
            oMainIds.Add(i);            

        Repeater1.DataSource = oMainIds;
        Repeater1.DataBind();
    }

    public int GetID(object oItem){
        return (int)oItem;
    }
} 
```

我测试了它的工作原理。

这是源代码：[http ://www.planethost.gr/VirtualList.rar](http://www.planethost.gr/VirtualList.rar)

可以做的改进：

*   根据滚动点优化搜索可见性的 div。
*   加载一组数据并将它们放在 div 上

**更新** 我做了一些速度优化，并添加了ajax调用测试。对于此优化工作，包含数据的 div 的高度在整个页面中必须相同。左加载一组数据，将它们以json形式获取并放置在正确的位置。

[http://www.planethost.gr/VirtualList2.rar](http://www.planethost.gr/VirtualList2.rar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:55:20.187

尝试查看 [无限滚动 jQuery 插件](https://github.com/paulirish/infinite-scroll "无限滚动jQuery插件")。我认为这就是你要找的东西。

# apache - 如何让 Apache 读取到不同分区的符号链接？

> ID：10981085
> 
> 赞同：3
> 
> 时间：2012-06-11T13:29:47.130
> 
> 标签：apache, lamp

我有带有两个 ext4 分区的 Linux Mint 13，一个用于 /，一个用于 /home。我刚刚安装了 LAMP。它工作正常，只是 Apache 不会读取针对第二个分区的符号链接。服务器的文档根目录设置为 /var/www。

我要做的是为 www 中的每个网站创建符号链接以链接到，`/home/my-username/Documents/mywww/website_name`以便我可以通过 localhost/website_name 访问它。

我启用`FollowSymLinks`并删除了`SymLinksIfOwnerMatch`. 我还为符号链接本身以及 mywww 文件夹及其所有内容授予了 777 权限。但它只是行不通。

错误日志显示“ `Symbolic link not allowed or link target not accessible`”。将文档根设置为`/home/my-username/Documents/mywww/website_name`也不起作用并将“ `(13) Permission denied: Access to / denied`”打印到错误日志。

我希望有人可以在这里帮助我。

编辑：添加了一些段落

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:09:35.653

如果您已经在 httpd.conf 中设置了 Options FollowSymLinks，这听起来像是一个权限/所有权问题。您对 Documents 目录的权限是什么？默认情况下通常为 700。将其设置为 chmod 705 或 chmod 755 可能会起作用。

# delphi - 如何从系统快捷方式获取快捷方式外壳图标？

> ID：10981088
> 
> 赞同：2
> 
> 时间：2012-06-11T13:29:54.900
> 
> 标签：delphi, winapi, explorer, windows-shell

前段时间，我曾询问过一种[最快的获取 shell 图标的方法来](https://stackoverflow.com/questions/9229804/fastest-way-to-get-shell-icon)调整获取图标的速度，但问题是某些系统快捷方式（lnk 文件）没有显示正确的图标。

作为示例之一可能是`Windows Fax and Scan.lnk`文件，如果您使用以下代码...

```
procedure TForm2.Button1Click(Sender: TObject);
var
  Icon: TIcon;
  FileInfo: TSHFileInfo;
begin
  FillChar(FileInfo, SizeOf(FileInfo), 0);
  SHGetFileInfo(PChar('C:\Windows Fax and Scan.lnk'), FILE_ATTRIBUTE_NORMAL, 
    FileInfo, SizeOf(FileInfo), SHGFI_USEFILEATTRIBUTES or SHGFI_ICON or
    SHGFI_SMALLICON);
  Icon := TIcon.Create;
  try
    Icon.Handle := FileInfo.hIcon;
    Canvas.Draw(10, 10, Icon);
  finally
    Icon.Free;
  end;
end; 
```

显示而不是这个图标...

![在此处输入图像描述](../Images/4775dfdfb0ebdaf5752684f900625633.png)

某种默认的快捷方式图标...

![在此处输入图像描述](../Images/f1c3e8fc4f9d422b13eb3866aa64c29c.png)

您知道如何从该快捷方式文件中获取系统图标（第一个图像中的那个）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:57:02.297

`SHGFI_USEFILEATTRIBUTES`尝试不访问磁盘，这意味着您可以告诉它在`a.txt`该文件实际不存在的情况下进行查找，并且仍然为您提供 .txt 文件的通用图标。[安装类似这样](http://www.codeproject.com/Articles/797/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens#intro)的东西可能不会给出正确的结果，这需要调用自定义图标处理程序并可能访问磁盘。由于 .lnk 文件存储图标的位置，因此如果不访问磁盘（不包括可能的缓存），您将无法访问此信息。

[根据 MSDN， IExtractIcon](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761854%28v=vs.85%29.aspx)比 SHGetFileInfo 快，但如果你真的想要速度，你应该显示通用图标并在后台线程上获取真正的图标......

# php - 显示表中的休假总数

> ID：10981090
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:29:59.250
> 
> 标签：php, mysql, date

我有两张表，分别称为 work_details 和 Holy_days。

Holy_days 表包含每年每个假期的一行。work_details 包含每个员工每天的工作报告的行。

我想获得所有员工的休假报告（每年和每月）。

我想显示他们每年和每月请假多少天（带日期）

计算除周六、周日和 Holy_days 表中的日期以外的休假天数。我正在使用以下代码，但这不能正常工作..任何人请帮忙。

```
if ($request->isPost()) {
    $sdate1 = $request->get('txt_date1','post');
    $d1=explode('/', $sdate1);
    $sdate= $d1['2'].'-'.$d1['0'].'-'.$d1['1'];
    $edate1 = $request->get('txt_date2','post');
    $d2=explode('/', $edate1);
    $edate= $d2['2'].'-'.$d2['0'].'-'.$d2['1'];
$count=dates_between($emp_id,$sdate,$edate);

echo $count;

  }

function dates_between($emp_id,$start_date, $end_date = false)
 {
     if ( !$end_date )
     {
         $end_date = date("Y-m-d");
     }

     $test_date = $start_date;
     $day_incrementer = 1;
     $count_leaves=0;
     $flag=0;
     echo "SELECT DISTINCT date FROM `work_details` WHERE  employee_id='".$emp_id."' and date between '".$start_date."' and '".$end_date."'";
 $work_res = mysql_query("SELECT DISTINCT date FROM `work_details` WHERE  employee_id='".$emp_id."' and date between '".$start_date."' and '".$end_date."'");

 do
     {
             while($row=mysql_fetch_array($work_res))
                {
                 while((date("Y-m-d",$test_date)<$row['date'])&&($flag=0))

                 {

                     if(!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6))
                     {
                         echo  "<tr><td align=center class=fontclass style=color:FF0000>".date("Y-m-d", $test_date)."</td></tr>";
                           $count_leaves++;
                     }
                        $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

                 }
                 $flag=1;

                 while((date("Y-m-d",$test_date)!=$row['date']))
                    {
                   if(!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6))
                   {
                      echo  "<tr><td align=center class=fontclass style=color:FF0000>".date("Y-m-d", $test_date)."</td></tr>";
                       $count_leaves++;
                   }
                       $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

                    }
                     $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

                 }
                if(!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6)&&($test_date <= $end_date))
                    {
                         echo  "<tr><td align=center class=fontclass style=color:FF0000>".date("Y-m-d", $test_date)."</td></tr>";
                         $count_leaves++;
                         $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

                    }

}
while ( $test_date <= $end_date);

return($count_leaves);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:24:06.143

娜塔莎。看一下这个！你一定会感到惊讶:)

```
function dates_between($emp_id,$start_date, $end_date = false)
 {
    $qsdate=$start_date;
    $qedate=$end_date;
    //echo $start_date.$end_date;
     if ( !$end_date )
     {
         $end_date = date("Y-m-d");
     }

     $start_date = is_int($start_date) ? $start_date : strtotime($start_date);
     $end_date = is_int($end_date) ? $end_date : strtotime($end_date);

     $test_date = $start_date;
     $day_incrementer = 1;
     $count_leaves=0;
     $flag=0;

 $work_res = mysql_query("SELECT DISTINCT date FROM `work_details` WHERE  employee_id='".$emp_id."' and date between '".$qsdate."' and '".$qedate."'");

             while($row=mysql_fetch_array($work_res))
                {
                 while((date("Y-m-d",$test_date)<$row['date'])&&($flag=0))

                 {

                    if(!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6))

                     {
                         echo  "<tr><td align=center class=fontclass style=color:FF0000>".date("Y-m-d", $test_date)."</td></tr>";
                           $count_leaves++;
                     }
                        $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

                 }
                 $flag=1;

                 while((date("Y-m-d",$test_date)!=$row['date']))
                    {
                 if(!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6))

                   {
                      echo  "<tr><td align=center class=fontclass style=color:FF0000>".date("Y-m-d", $test_date)."</td></tr>";
                       $count_leaves++;
                   }
                       $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

                    }
                     $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

                 }

                 while ( date("Y-m-d", $test_date) <= date("Y-m-d", $end_date))
     {
          if(!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6))

                    {
                         echo  "<tr><td align=center class=fontclass style=color:FF0000>".date("Y-m-d", $test_date)."</td></tr>";
                       $count_leaves++;

                    }
                    $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);

     }

return($count_leaves);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:08:58.007

```
SELECT DISTINCT date 
FROM `work_details` 
WHERE  employee_id='".$emp_id."' 
and date between '".$start_date."' and '".$end_date."'
and date NOT IN(SELECT date from Holy_Days) 
```

假设 Holy_Days 表中有一个日期列。

# c# - ContentControl 的格式泄漏超出控制范围

> ID：10981096
> 
> 赞同：2
> 
> 时间：2012-06-11T13:30:29.317
> 
> 标签：c#, vsto, word-2007

我正在为 Word 2007 开发应用程序级加载项插件。不幸的是，我遇到了动态添加内容样式的小问题：

我创建了内容控件，并使用以下代码更改了它的样式：

```
PlainTextContentControl plainTextControl =
   extendedDocument.Controls.AddPlainTextContentControl(
   currentDocument.ActiveWindow.Selection.Range,"ptcc1");

plainTextControl.Text = "hello world";

plainTextControl.Range.Font.Shading.BackgroundPatternColor = (WdColor)ColorTranslator.ToOle(Color.LightGray);
plainTextControl.Range.Borders.Enable = (int)WdLineStyle.wdLineStyleSingle;
plainTextControl.LockContents = true; 
```

它有效 - 插入的文本控件具有边框和灰色背景，但是当我在插入元素之后键入文本时，这种样式仍然存在 - 新键入的字符也有边框和背景颜色。如何仅将格式更改限制为 ContentControl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:55:58.857

```
var document = Globals.ThisDocument.InnerObject;

PlainTextContentControl plainTextControl = Controls.AddPlainTextContentControl(
document.ActiveWindow.Selection.Range, "ptcc1"); 
```

在 word 2010 中为我工作 - 所以不能保证！:)

欢呼

# .net - 无法使 HTTPS MEX 端点工作

> ID：10981100
> 
> 赞同：0
> 
> 时间：2012-06-11T13:30:54.350
> 
> 标签：.net, wcf, wcf-binding, wcf-security, custom-binding

我一直在尝试将 WCF 配置为与 Azure ACS 一起使用。此 WCF 配置有 2 个错误：

1.  它不发布 MEX 端点。
2.  它不调用自定义行为扩展。（在我做了一些我不记得的改变后，它就停止了）

这里可能有什么问题？

```
<configuration>
  <configSections>
    <section name="microsoft.identityModel"
             type="Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </configSections>
  <location path="FederationMetadata">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="production" behaviorConfiguration="AccessServiceBehavior">
        <endpoint contract="IMetadataExchange"
                  binding="mexHttpsBinding"
                  address="mex" />
        <endpoint address=""
                  binding="customBinding"
                  contract="Samples.RoleBasedAccessControl.Service.IService1"
                  bindingConfiguration="serviceBinding" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="AccessServiceBehavior">
          <federatedServiceHostConfiguration />
          <sessionExtension/>
          <useRequestHeadersForMetadataAddress>
            <defaultPorts>
              <add scheme="http" port="8000" />
              <add scheme="https" port="8443" />
            </defaultPorts>
          </useRequestHeadersForMetadataAddress>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpsGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceCredentials>
            <!--Certificate added by FedUtil.  Subject='CN=DefaultApplicationCertificate', Issuer='CN=DefaultApplicationCertificate'.-->
            <serviceCertificate findValue="XXXXXXXXXXXXXXX" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <extensions>
      <behaviorExtensions>
        <add name="sessionExtension"
             type="Samples.RoleBasedAccessControl.Service.RsaSessionServiceBehaviorExtension, Samples.RoleBasedAccessControl.Service, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
        <add name="federatedServiceHostConfiguration"
             type="Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </behaviorExtensions>
    </extensions>
    <protocolMapping>
      <add scheme="http" binding="customBinding" bindingConfiguration="serviceBinding" />
      <add scheme="https" binding="customBinding" bindingConfiguration="serviceBinding"/>
    </protocolMapping>
    <bindings>
      <customBinding>
        <binding name="serviceBinding">
          <security authenticationMode="SecureConversation"
          messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
          requireSecurityContextCancellation="false">
            <secureConversationBootstrap
              authenticationMode="IssuedTokenOverTransport"
              messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10">
              <issuedTokenParameters>
                <additionalRequestParameters>
                  <AppliesTo xmlns="http://schemas.xmlsoap.org/ws/2004/09/policy">
                    <EndpointReference xmlns="http://www.w3.org/2005/08/addressing">
                      <Address>https://127.0.0.1:81/</Address>
                    </EndpointReference>
                  </AppliesTo>
                </additionalRequestParameters>
                <claimTypeRequirements>
                  <add claimType="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" isOptional="true" />
                  <add claimType="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" isOptional="true" />
                  <add claimType="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier" isOptional="true" />
                  <add claimType="http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider" isOptional="true" />
                </claimTypeRequirements>
                <issuerMetadata address="https://XXXXYYYY.accesscontrol.windows.net/v2/wstrust/mex" />
              </issuedTokenParameters>
            </secureConversationBootstrap>
          </security>
          <httpsTransport />
        </binding>
      </customBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <microsoft.identityModel>
    <service>
      <audienceUris>
        <add value="http://127.0.0.1:81/" />
      </audienceUris>
      <issuerNameRegistry type="Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
        <trustedIssuers>
          <add thumbprint="THUMBPRINT HERE" name="https://XXXYYYY.accesscontrol.windows.net/" />
        </trustedIssuers>
      </issuerNameRegistry>
      <certificateValidation certificateValidationMode="None" />
    </service>
  </microsoft.identityModel>
  <appSettings>
    <add key="FederationMetadataLocation" value="https://XXXYYYY.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata.xml " />
  </appSettings>
</configuration> 
```

编辑：进一步的实现细节我有以下行为扩展元素（目前没有被调用）

```
 public class RsaSessionServiceBehaviorExtension : BehaviorExtensionElement
{
    public override Type BehaviorType
    {
        get
        {
            return typeof(RsaSessionServiceBehavior);
        }
    }
    protected override object CreateBehavior()
    {
        return new RsaSessionServiceBehavior();
    }
} 
```

命名空间和程序集在配置中是正确的。检查令牌验证涉及更多代码，但我认为至少应该发布 MEX 并且应该调用 CreateBehavior() 以便我继续进行。

# jsf-2 - 使用 backing bean 的单一属性绑定两个 JSF 输入字段

> ID：10981107
> 
> 赞同：3
> 
> 时间：2012-06-11T13:31:20.857
> 
> 标签：jsf-2

假设我有两个`h:inputText`组件。我想将两个文本字段与支持 bean 中的单个属性绑定。问题是提交给支持 bean 的值是来自第二个文本字段的值。我希望应该从用户输入文本的那个字段提交值。

我的代码：

```
<h:inputText id="text1" value="#{bean.value}">
    ......
</h:inputText>

<h:inputText id="text2" value="#{bean.value}">
    .......
</h:inputText> 
```

**请注意**，上述两个 fiekds 中的值都是`bean.value`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:52:14.397

添加`<f:ajax event="blur"...`或`<f:ajax event="keyup"...`

像这样

```
<h:inputText id="text1" value="#{inningBean.dismissalName}">
    <f:ajax event="blur" render="typeWhatYouWant" listener="#{optionalBean.someMethod}"/>
</h:inputText>

<h:inputText id="text2" value="#{inningBean.dismissalName}">
    <f:ajax event="blur" render="typeWhatYouWant" listener="#{optionalBean.someMethod}"/>
</h:inputText> 
```

或使用 js（使用 viewsource 检查您的真实身份`text1`）`text2`

```
<h:inputText id="text1" value="#{inningBean.dismissalName}" onkeyup="$('#yourFormID\\:text2').val($('#yourFormID\\:text1').value)"/>

<h:inputText id="text2" value="#{inningBean.dismissalName}" onkeyup="$('#yourFormID\\:text1').val($('#yourFormID\\:text2').value)"/> 
```

# silverlight - Silverlight XAML 绑定抛出空引用异常

> ID：10981108
> 
> 赞同：1
> 
> 时间：2012-06-11T13:31:33.433
> 
> 标签：silverlight, unit-testing

我的问题与上一篇文章继续[我](https://stackoverflow.com/questions/6217435/why-is-my-unit-test-of-my-silverlight-xaml-bindings-is-failing) 将我的组合框放在其他子网格中，名为“grid_SortPart”。所以，我试图设置 GetUIElement("grid_SortPart").DataContext = _viewModel; 这对我不起作用。

我也尝试将 _target.Loaded 更改为 _target.LayoutUpdated，但仍然存在同样的问题。在调试期间我发现，我收到错误“对象引用未设置为对象的实例”。对于对象_target。

以下是我通过引用[帖子](https://stackoverflow.com/questions/6217435/why-is-my-unit-test-of-my-silverlight-xaml-bindings-is-failing)设置的代码。请建议我做错的事情以及纠正它的方法。

```
public ObservableCollection<ReturnStatus> _status;
[TestInitialize]
public void TestInit()
{
  _target = new EfileView();
  efvm = new EfileViewModel();
  var p1 = new ReturnStatus { Status = "Completed" };
  var p2 = new ReturnStatus { Status = "Not Completed" };
  _status = new ObservableCollection<ReturnStatus> { p1, p2 };
  GetUIElement<Grid>("grid_SortPart").DataContext = efvm;
}

private T GetUIElement<T>(string name) where T : UIElement
{ return (T)_target.FindName(name); }

[Asynchronous]
[TestMethod]
public void TestCurrencySelection()
{
  _target.LayoutUpdated += (s, e) => 
   {
     // Set the currency list explicitly
     efvm.ItemSource_ReturnStatus = _status;
     var currencyCombo = GetUIElement<ComboBox>("cmb_Returns_2");
     // This assert fails as Items.Count == 0     
     CollectionAssert.AreEquivalent(currencyCombo.Items, _status, "Failed to data-bind currencies.");
      EnqueueTestComplete();
    };
    TestPanel.Children.Add(_target);
} 
```

# html - 元素不会像告诉的那样向左浮动

> ID：10981112
> 
> 赞同：2
> 
> 时间：2012-06-11T13:31:45.677
> 
> 标签：html, css

我有一点 CSS 问题。这发生在 IE、FF 和 Chrome 中。但是在 iPhone Safari 浏览器上，它看起来不错。问题是第二个“块”跨度标签`id="myDiv"`（如何删除`id="myDiv"`span 标签左侧的填充？

```
<head>
 <style>
    .plansHeader{
      font-weight:bold;color:rgb(73,102,145);font-size:12pt;margin-bottom:6px;line-  
      height:14pt;
     }
 </style>
</head>
<body>
  <span style="display: block">
    <img src="http://m.v4m.mobi/uni/thumbs/arrow.png" border="none" style="vertical-align: middle; float: left;"/>
    <span id="plansHeader">e-phone to e-phone calls: R0.40 p/m</span> 
  </span>
  <span id="myDiv" style="display: block">
    <img src="http://m.v4m.mobi/uni/thumbs/arrow.png" border="none" style="vertical-align: middle; float: left;" />
    <span class="plansHeader">0 minutes call time included(to Any mobile/landline)</span>
  </span>           
</body> 
```

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:34:22.047

在您的 span 之后添加：

```
<div style="clear:both;"></div> 
```

它应该是这样的：

```
<span style="display: block">
   <img src="http://m.v4m.mobi/uni/thumbs/arrow.png" border="none" style="vertical-align: middle; float: left;"/>
   <span id="plansHeader">e-phone to e-phone calls: R0.40 p/m</span> 
   <div style="clear:both;"></div>
</span>

<span id="myDiv" style="display: block">
  <img src="http://m.v4m.mobi/uni/thumbs/arrow.png" border="none" style="vertical-align: middle; float: left;" />
  <span class="plansHeader">0 minutes call time included(to Any mobile/landline)</span>
  <div style="clear:both;"></div>
</span> 
```

并记住：**始终清除浮动！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:39:07.080

确实如此，但是您的图像比图像出现的行略高，因此第二行浮动在图像的边缘。

您需要清除浮动（通过在具有样式的行之间添加一个 div`clear: both`或在第二个块上设置 CSS 以清除浮动）以防止这种情况发生。您也可以将第一行设置为`line-height: 21px`图像的高度（无论如何我建议您这样做），这样就可以解决问题，但最终您需要清除浮动以确保安全。

# php - MySQL最后一个条目PHP按日期排序

> ID：10981115
> 
> 赞同：1
> 
> 时间：2012-06-11T13:31:54.840
> 
> 标签：php, mysql, database

我想用 PHP 显示 MySQL 数据库中的最新条目。

**表 (bird_playlog) 如下所示：**

```
interpret: Tiny Dancers 

title: Bonfire Of The Night                 

date: 2012-06-11 14:30:58 
```

截屏：

![在此处输入图像描述](../Images/d40ee819d9a6d5d3297e8f84beba208a.png)

**MySQL 连接脚本：**

```
<?php
class mw_sql{

    private $host;
    private $user;
    private $pass;
    private $db;
    private $connection = null;
    public $connected = false;

    public function __construct($data){
        $this->host = $data['host'];
        $this->user = $data['user'];
        $this->pass = $data['pass'];
        $this->db = $data['db'];
    }

    public function __destruct(){
        if($this->connected) mysql_close($this->connection);
    }

    public function connect(){
        $this->connection = mysql_connect($this->host, $this->user, $this->pass, true);
        if(!$this->connection){
            echo '<pre>MySQL connect failed</pre>';
            $this->connected = false;
        }else{
            if(@mysql_select_db($this->db, $this->connection)){
                $this->connected = true;
            }else{
                echo '<pre>MySQL select db failed</pre>';
                echo '<pre>'.mysql_error($this->connection).'</pre>';
                $this->connected = false;
            }
        }
        return $this->connected;
    }

    public function select($table, $fields=null, $key=null, $where=null, $sort=null, $sort_dir='ASC', $limit=null){
        $cols = (is_array($fields) && $fields != null) ? mysql_real_escape_string(implode(', ', $fields), $this->connection) : '*';
        $where_clause = ($where != null) ? ' WHERE '.$where : '';
        $sort_clause = ($sort != null) ? ' ORDER BY '.$sort.' '.$sort_dir : '';
        $limit_clause = ($limit != null) ? ' LIMIT '.$limit : '';
        $query = "SELECT ".$cols." FROM ".$table.$where_clause.$sort_clause.$limit_clause;
        $res = @mysql_query($query, $this->connection);
        if(!$res){
            return false;
        }else{
            $data = array();
            if(mysql_num_rows($res) > 0){
                while($dat = mysql_fetch_assoc($res)){
                    if($key == null) array_push($data, $dat);
                    else $data[$dat[$key]] = $dat;
                }
            }
            return $data;
        }
    }

    public function query($query){
        $res = @mysql_query($query, $this->connection);
        if(!$res){
            echo mysql_error();
            return false;
        }else{
            return $res;
        }
    }

    public function insert($table, $fields, $values){
        $vals = array();
        foreach($values as $value){
            array_push($vals, mysql_real_escape_string($value, $this->connection));
        }
        $query = "INSERT INTO ".$table." (".mysql_real_escape_string(implode(', ', $fields), $this->connection).") VALUES ('".implode("', '", $vals)."')";
        $res = @mysql_query($query, $this->connection);
        if(!$res){
            pre(mysql_error($this->connection));
            return false;
        }
        return true;
    }

    public function update($table, $fields, $values, $where, $error_no_rows=true){
        $update = array();
        foreach($fields as $key => $value){
            if($values[$key] == 'increment'){
                array_push($update, $value."=".$value.'+1');
            }else{
                array_push($update, mysql_real_escape_string($value, $this->connection)."='".mysql_real_escape_string($values[$key], $this->connection)."'");
            }
        }
        $query = "UPDATE ".$table." SET ".implode(', ', $update)." WHERE ".$where;
        $res = @mysql_query($query, $this->connection);
        if(!$res){
            pre(mysql_error($this->connection));
            return false;
        }
        if(mysql_affected_rows($this->connection) == 0 && $error_no_rows){
            return false;
        }
        return true;
    }

    public function delete($table, $where){
        $query = "DELETE FROM ".$table." WHERE ".$where;
        echo '<pre>'.$query.'</pre>';
        $res = @mysql_query($query, $this->connection);
        if(!$res) return false;
        return true;
    }

} ?> 
```

**显示最新条目的脚本如下所示：**

```
<?php

require_once('mw_sql.class.php');

$cuelist_db_conf = array(
    'host'  => 'w00b2ffc.kasserver.com',
    'user'  => 'd0144421',
    'pass'  => '****',
    'db'    => 'd0144421',
    'table' => 'bird_playlog'
);

$cuelist_db = new mw_sql($cuelist_db_conf);
$cuelist_db->connect();

$last_track = $cuelist_db->select('bird_playlog', array('interpret', 'title'), 'date', 'DESC', 1);

echo $last_track[0]['interpret']; ?> 
```

但是脚本没有显示 $last_track[0]['interpret'];，那么有什么问题吗？我没有错误信息...

谢谢你的帮助！大卫

**更新：**

这有效：

```
$con = mysql_connect("w00b2ffc.kasserver.com","d0144421","****");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("d0144421", $con);

$last_track = mysql_query("SELECT * FROM bird_playlog ORDER BY date DESC LIMIT 1");

while($row = mysql_fetch_assoc($last_track)) {
 extract($row);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:23:52.357

我认为如果你不想，你应该通过 null 。因为该函数最初有 7 个要接受的参数，而您只传递了 5 个，所以它不会按您的意愿使用。似乎你不想要的 $key 比 for $key 你应该传递 null 。因为如果你传递 5 个参数，那么函数会将它作为前 5 个参数，即使你不想要，最后两个也会被作为默认参数。我希望这能解决你的问题。

# jquery - jquery.validate.js javascript错误

> ID：10981120
> 
> 赞同：2
> 
> 时间：2012-06-11T13:32:06.613
> 
> 标签：jquery, validation, tinymce

尝试运行以下验证代码，但 jquery.validate.js 失败。有没有人经历过这个？我正在使用 jquery 1.7.2。在 Firefox 12.0 上。在进一步调查问题后，我了解到只有当表单中有 tinymce 元素时才会出现问题。

```
<script>
$(document).ready(function() {
    $('#simple_form').validate();
});
</script> 
```

这是错误。

```
classes.split is not a function
classes && $.each(classes.split(' '), function() { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:16:18.210

事实证明，我使用的 jquery.tinymce.js 与目前在 tinymce.com 上托管的有点不同。替换该文件解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T17:20:01.990

尝试这个：

```
<script>
$(document).ready(function() {
    tinyMCE.triggerSave(true, true);
    $('#simple_form').validate();
});
</script> 
```

# php - 使用 codeigniter 编码删除斜线 ("/")

> ID：10981123
> 
> 赞同：2
> 
> 时间：2012-06-11T13:32:27.693
> 
> 标签：php, codeigniter, url, uri

我必须对我的一部分代码进行编码以通过电子邮件发送，并且当用户单击我的链接时我需要在此之后对其进行解码。但问题是编码函数放斜杠（“/”）例如：

```
$email_info =  $this->encrypt->encode($email.':'.$token); 
///if I ECHO $email_info I got this --> BmJXYlIlBQxbOwRsUiYEYQcxUBRXbgA/VXZQOg40VW4GPVB9AmRUPgVnVT9QNQNsC3cFagI3Bz4DZgViXD8CMVRuVToOMVYwAjAHdQk4A3IGbldyUj4FJVsrBHBSJQR8BzpQbVcxAGNValBuDmdVfQY5UCUCflQ1BXJVdA%3D%3D 
```

在我的另一个页面中，我这样做：`$key = $this->uri->segment(3);`

所以我只得到这部分`BmJXYlIlBQxbOwRsUiYEYQcxUBRXbgA` 是因为字母 A 之后的 / 所以我的下一部分代码将不起作用（我的解码功能`$array_info = $this->encrypt->decode($key);`）

我尝试了很多东西`urlencode()`，例如，`rawencode()`我的网址上总是有“/”，

我该如何编码这个“/”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:37:38.367

尝试原始替换：

```
str_replace("/", "%2F", $email_info) 
```

或者试试

```
rawurlencode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-22T21:07:01.687

只需使用

```
 $new_email_info = str_replace( "/", "", $email_info ); 
```

打印 $new_email_info。

# php - 是否可以从一台服务器 (sftp) 下载文件并使用 php 将其上传到我的服务器？

> ID：10981127
> 
> 赞同：1
> 
> 时间：2012-06-11T13:32:44.790
> 
> 标签：php, sftp

有人告诉我这是不可能的，但我想在这里得到一些其他的意见。当涉及到这样的事情时，我有点新手。

我的网站：ExampleSiteA.com

要下载的文件：ExampleSiteB.com

基本上，我正在从 ExampleSiteB.com 下载一个 csv 文件来更新我的站点 ExampleSiteA.com。为此，我通过 CoreFTP 手动下载 csv 文件，然后手动将其上传到 ExampleSiteA.com。文件每天都在变化，我想跳过这一步，这样我就可以自动化这个过程。

请记住，我需要通过 SFTP 从 ExampleSiteB.com 下载 csv 文件...

如果一个服务器是 SFTP，我不确定是否可以直接将文件从一台服务器下载/上传到另一台服务器。文件大小也相当大，平均约为 25,000 KB / 25 MB。

我尚未探索的另一个选项是要求或包含来自另一台服务器的文件......这是一个选项还是可能性？该文件位于我的站点专用的文件夹中，SFTP 下载需要登录。

任何见解将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T15:34:20.877

去这里下载你需要的东西：http: [//phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)

***更新***

*   *对于 SFTP*

然后在你的脚本中：

```
<?php
include('Net/SFTP.php');

$url = 'http://www.downloadsite.com';
$fileToDownload = "yourCSV.csv";
$cmd = "wget -q \"$url\" -O $fileToDownload";
exec($cmd);

$sftp = new Net_SFTP('www.uploadsite.com');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

echo $sftp->pwd() . "\r\n";
$sftp->put('remote.file.csv', 'yourCSV.csv', NET_SFTP_LOCAL_FILE);
print_r($sftp->nlist());
?> 
```

如果您需要连接到第二台服务器进行下载：

```
$sftp2 = new Net_SFTP('www.serverFromWhichToDownload.com');
if (!$sftp2->login('username', 'password')) {
    exit('Login Failed');
}

echo $sftp2->pwd() . "\r\n";
$sftp2->get('localFileName.csv', 'remoteFileName.csv');
print_r($sftp2->nlist()); 
```

阅读文档以获取更多帮助和示例： http: [//phpseclib.sourceforge.net/documentation/net.html#net_sftp_get](http://phpseclib.sourceforge.net/documentation/net.html#net_sftp_get)

要记录连接失败时的操作等，请使用以下命令：

```
include('Net/SSH2.php');
define('NET_SSH2_LOGGING', true);
$ssh = new Net_SSH2('www.domain.tld');
$ssh->login('username','password');
echo $ssh->getLog(); 
```

*   *对于FTP 上传*- SO 已经发疯了，不想格式化我的代码，但无论如何都在这里：

```
$file = 'somefile.txt';
$remote_file = 'readme.txt';
$conn_id = ftp_connect($ftp_server);
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) {
    echo "成功上传$file\n";
} 别的 {
    echo "上传$file时出现问题\n";
}
ftp_close($conn_id);

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:37:24.303

是的，这可以使用 ssh2_sftp。

[http://php.net/manual/en/function.ssh2-sftp.php](http://php.net/manual/en/function.ssh2-sftp.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T13:49:41.293

过去我在 cURL 上运气不错。如果您使用的是 Linux 机器，那么设置一个[CRON 作业](http://www.pantz.org/software/cron/croninfo.html)来为您执行此更新过程将是微不足道的。可以在[此处](http://curl.haxx.se/docs/httpscripting.html)找到 cURL 中 CLI HTTP 脚本的一个很好的参考，但是您可能需要 -T 标志（用于文件传输）来完成上传部分。说到上传，如果你可以从你想更新的服务器上运行脚本/进程/crontab，我建议你*从*网络服务器下载，以避免一次旅行和第三方。或者，如果您需要按需更新，您可以编写一个使用内置[PHP cURL 函数](http://www.php.net/manual/en/book.curl.php)的 PHP 脚本。如果您采用 Linux+CLI 路线，您也可以使用[sftp](http://linux.die.net/man/1/sftp)。

**更新：**在使用 sftp ( `curl -u uname:pword sftp://domain.tld`) 测试 curl 时，我收到以下错误：`curl: (1) Protocol sftp not supported or disabled in libcurl`在 Kubuntu 12.04 上。所以 cURL 可能不是一个好主意。我还测试了 CLI sftp ( `sftp uname@domain.tld:/dir/file.ext`)，但找不到发送身份验证的方法（没有使用 ssh 密钥）。因此，除非您确实在服务器之间设置了 ssh 密钥，否则这必然是一个手动过程。由于听起来您没有对 ExampleSiteB.com 的那种访问权限，因此这可能是不可接受的。

**更新 2：**由于我最初的答案没有什么用，我想我会扩展上述答案之一。我试图找到一个不涉及 PECL 扩展的解决方案，但我对[ftp_ssh_connect()](http://pear.php.net/manual/en/installation.checking.php)运气不佳。我建议您尝试一下，您可能会有更好的运气并且可以放弃 PECL 扩展路线。

叹了口气，进一步阅读，可以理解的是，它似乎`ftp_ssh_connect`与 sftp 协议不兼容。`ssh2_connect()`但是，我发现了一篇关于使用和的不错的博客文章`ssh2_sftp()`（如先前的答案中所述），并认为我会发布该文章来为您提供一些额外的帮助。它不像调用大多数 PHP 发行版的函数那么简单。 [这是博客文章。](http://zaemis.blogspot.com/2009/10/setting-up-sftp-from-php.html)[其中一些步骤可能不是必需的，或者您可能需要执行我在此处](http://kevin.vanzonneveld.net/techblog/article/make_ssh_connections_with_php/) 遇到的另一篇博客文章中列出的一些其他事情。

在我的系统上，我所要做的就是运行`apt-get install libssh2-1-dev libssh2-php`并且能够在我的`php -m`输出中找到 ssh2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:36:07.897

拥有一个包含，只要您在从中获取文件的网站上具有读/写权限就应该可以工作，但这只是猜测工作 atm，因为我没有任何检查它的方法。不过祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T13:37:08.143

是的，你应该能够做到这一点。

告诉您不能执行此操作的人可能会对 JavaScript 和跨站点脚本浏览器限制感到困惑，这些限制会阻止从一个域下载的 JavaScript 访问不同域中的内容。

话虽这么说，如果您使用的是 PHP，这对我来说意味着您正在谈论在 Web 服务器上运行的 PHP，您应该能够使用 PHP 或任何其他脚本或编程语言从 SiteB.com 下载文件，然后更新文件，然后最后将文件 FTP 到不同的 Web 服务器 (SiteA.com)。

# r - 对连续的元素组进行采样而不进行替换

> ID：10981129
> 
> 赞同：1
> 
> 时间：2012-06-11T13:32:53.483
> 
> 标签：r, sampling

我有以下数据框

```
ddd<-data.frame(minutes=1:15,positive=c(0,1,0,1,1,0,1,0,0,0,1,1,1,0,1)) 
```

使用采样，我想找出在*k次试验中，从**j*长度的 ddd$minutes 的连续间隔中至少`ddd$positive`出现一个的概率是多少。例如，对于*j=2*（2 分钟间隔），样本空间将为 `ddd$minutes[1:2, 2:3, 3:4, 4:5, 5:6, 6:7, …:14:15]`. 但是，如果在 k 次试验的第一次中对区间`ddd$minutes[1:2]`进行采样（一次成功），`ddd$minutes[2:3]`则从采样空间中删除区间（在下一次随机采样之前），因为两组相交（`ddd$minutes[2]`两者都存在）。

这不是一个简单的无放回抽样问题，因为在下一次抽样发生之前，不仅要从样本空间中删除已抽样的组，还应从样本空间中删除所有与已抽样的组相交的组。

**编辑（来自 Tim P 的评论）**：`length(ddd$minutes)`可以在 1000-1200 之间；*k*介于 1 和 16之间。 *j*介于 1 和 30 之间

**EDIT2（蒂埃里评论）**

我正在举一个例子，遵循蒂埃里的评论和回答

```
ddd<-data.frame(minutes=1:15,positive=c(0,1,0,1,1,0,1,0,0,0,1,1,1,0,1)) 
l=3;k=3 
```

样本空间 S0（第一次采样前）：S0:{1:3, 2:4, 3:5, 4:6, 5:7, 6:8, 7:9, 8:10, 9:11, 10 :12, 11:13, 12:14, 13:15} S0 的长度为 13 (n-k+1)

k 中的第一次试验：元素 8:10 被选中。

然后将 S1 重新定义为 S0，但不包含与采样元素 8:10 相交的元素 6:8、7:9、8:10、9:11、10:12

所以，S1 是：{ 1:3, 2:4, 3:5, 4:6, 5:7, 11:13, 12:14, 13:15}

k 中的第二次试验：元素 4:6 被选中

S2 被重新定义为 S1 没有元素 2:4, 3:5, 4:6, 5:7,

所以，S2：{1:3, 11:13, 12:14, 13:15}

依此类推，直到*k*th 个样本。最终我的目标是多次运行这种抽样，看看至少出现一个 ddd$success 的概率是多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:35:25.277

您可以使用递归函数。

```
n <- 1000
j <- 10
set.seed(12345)
ddd <- data.frame(minutes=seq_len(n), positive = rbinom(n, 1, 0.1))
dataset <- ddd
k <- 16
sillySampling <- function(dataset, k, j){
  i <- sample(nrow(dataset) - j + 1, 1)
  thisSample <- max(dataset$positive[i - 1 + seq_len(j)])
  if(k > 1){
    toRemove <- i + -j:j
    toRemove <- toRemove[toRemove >= 1 & toRemove <= nrow(dataset)]
    thisSample <- c(thisSample, sillySampling(dataset[-toRemove, ], k  = k - 1, j = j))
  }
  return(thisSample)
}
rowMeans(replicate(100, {
  sapply(1:16, function(k){
    sum(sillySampling(ddd, k, 10)) / k
  })
})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:52:35.610

我宁愿将数据集聚合为 k 分钟的样本。然后对聚合数据集进行采样。您希望从您的抽样中获得更多信息？您的采样方式会丢弃更多数据。

```
n <- 1000
j <- 10
set.seed(12345)
ddd <- data.frame(minutes=seq_len(n), positive = rbinom(n, 1, 0.1))
ddd$group <- ddd$minutes %/% j
AGR <- aggregate(ddd$positive, by = ddd[, "group", drop = FALSE], FUN = max)
rowMeans(replicate(1000, {
    sapply(1:16, function(k){
        sum(sample(AGR$x, k, replace = FALSE)) / k
    })
})) 
```

# facebook - Facebook重新请求访问令牌可能吗？

> ID：10981132
> 
> 赞同：0
> 
> 时间：2012-06-11T13:33:01.407
> 
> 标签：facebook, authentication

我正在玩 Facebook-API。对于身份验证，用户将被发送到 oauth-dialog。允许访问后，用户的浏览器将被重定向到 facebook-application 设置中指定的地址。我们已经请求了 scope=offline_access 和 response_type=token，所以 post-auth 重定向包含一个有效的访问令牌。到现在为止还挺好。现在我的问题是：是否可以在没有用户交互的情况下重新请求此访问令牌？（例如：服务器没有捕捉到来自 oauth-dialog 的认证后请求）

感谢您的任何启发:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:02:21.060

offline_access 已弃用，很快将被删除。

在这里查看您可能必须如何调整您的应用程序：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:59:35.960

首先，offline_access 已被弃用 - 请参阅此处了解更多详细信息：[https](https://developers.facebook.com/roadmap/offline-access-removal/) ://developers.facebook.com/roadmap/offline-access-removal/ 。您现在可以获得的最多是 60 天令牌。

回答您的问题 - 没有用户交互就无法请求访问令牌 - 为什么我们需要登录对话框呢？

# git - 没有用户的Git远程服务器none-bare

> ID：10981135
> 
> 赞同：0
> 
> 时间：2012-06-11T13:33:08.890
> 
> 标签：git, push, git-bare

好的，看看这个。我有一个安装了 git 的 mac osx 服务器。我们用它来合作项目。我们想要的是能够推送到服务器上的非裸存储库，以便我们可以查看其上的网站。问题是，一个非裸存储库的用户已签出主节点，因此无法推送到主节点。

我发现工作的唯一方法是推送到另一个分支，然后将其合并到主分支中，这既耗时又无聊。

那么，有没有办法推送到远程服务器上的master分支，并且能够在服务器上查看网页呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:41:01.437

处理此问题的一种常见方法是拥有一个带有挂钩的裸存储库，该挂钩将检出`HEAD`到正确的目录，[如此处所述](http://toroid.org/ams/git-website-howto)。本质上，您将创建一个`post-receive`钩子来执行以下操作：

```
GIT_WORK_TREE=/var/www/whatever git checkout -f 
```

然后，您只需推送到该裸存储库即可进行部署。与推送到非裸存储库相比，这种方法的优势在于您最终不会得到一个`.git`目录`/var/www/whatever`，而只是项目中的文件。

# c# - SoapHttpClientProtocol，该方法调用是否每次都打开一个新连接？

> ID：10981136
> 
> 赞同：0
> 
> 时间：2012-06-11T13:33:18.613
> 
> 标签：c#, .net

我已经导入了wsdl。我得到了带有网络服务方法的课程。该类派生自 SoapHttpClientProtocol。

谁能告诉我每个方法调用是否都会打开一个新连接，或者该连接是否被重用？

如果不重用怎么能重用？

最后一个问题，我可以让客户成为 WCF 客户吗？以及如何为 wcf 导入 wsdl？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:52:07.707

要使其成为 WCF 服务，您必须创建一个接口，而不是简单地装饰方法。要将其导入您的项目，它的工作方式相同。

我不确定 2.0 服务，但对于 WCF，这取决于您如何调用服务客户端。据我所知，一般来说，连接会保持打开状态，直到您关闭它，或者直到它失去范围（不一致）。因此，一旦它是 WCF 服务，就实例化客户端，进行所有调用，然后关闭它。我想现在最好的做法是将它包装在 try/catch 中并让 catch 块 .abort 客户端。不过，根据我的经验，如果您的服务是松散耦合的，并且您不想通过管道传输大量数据，那么重复连接并不是什么大问题。

不过有一个想法：如果您的服务正在执行诸如打开 SQL 连接之类的操作，请记住，无论客户端的连接状态如何，每次服务调用都会建立 sql 连接。这是您可能想要在服务内部使用 sql 连接以完成操作并返回数据集或某种形式的 DTO 以节省客户端和服务之间的网球比赛的肮脏情况之一。

# iphone - 加载具有严格多媒体的页面时，uiwebview 会自动全屏显示

> ID：10981137
> 
> 赞同：0
> 
> 时间：2012-06-11T13:33:23.513
> 
> 标签：iphone, ios, ipad

我创建了一个带有 uiwebview 的 uitableview，它加载了一个直接转到多媒体文件链接的网页，但我不希望它自动全屏显示。只需加载它，然后允许用户播放它，然后根据需要进入全屏状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:36:30.950

您不能使用 UIWebView 来做到这一点，您可以做的是将链接更改为包含播放按钮覆盖图像的图像（就像 youtube 一样），然后当用户单击该图像时，开始播放视频。

# c++ - 为什么我的 C++ 可执行文件这么大？

> ID：10981140
> 
> 赞同：3
> 
> 时间：2012-06-11T13:33:42.747
> 
> 标签：c++, size

> **可能重复：**
> [GCC C++“Hello World”程序 -> .exe 在 Windows 上编译时有 500kb 大。我怎样才能减小它的大小？](https://stackoverflow.com/questions/1042773/gcc-c-hello-world-program-exe-is-500kb-big-when-compiled-on-windows-how)

我刚刚开始阅读一些 C++ 在线教程，第一课是 Hello World 程序。当我将程序编译为可执行文件时，即使它只是一个简单的 Hello World 控制台程序，大小也超过 400kb。应该这么大吗？如果不是，为什么会这样？难道我做错了什么？

这是来源：

```
#include <iostream>
using namespace std;
int main()
{
    cout<<"Hello World";
    cin.get();
} 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T13:36:15.210

静态链接 C 和/或 C++ 运行时可以大大增加大小。此外，编译程序以包含调试信息可能会增加大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T13:39:28.413

这几乎可以肯定是因为您创建了一个静态可执行文件，即一个可以独立运行且不依赖运行时库的可执行文件。有关如何避免这种情况，请参阅编译器/链接器的文档。

编辑：

从您的代码中，动态链接的可执行文件（Linux 上的 gcc 4.3.2）得到 13540 个字节，而静态链接的可执行文件得到 6.7Mb。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T13:37:08.297

它可能与调试信息有关。如果你去掉它（通过在 Visual Studio 中构建发布模式，或者[`strip`](http://linux.die.net/man/1/strip)在 Linux 中使用命令），它会小得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:37:46.533

不要链接你的应用程序静态。试着让它充满活力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T13:40:20.813

在调试模式下构建将编译和链接未以任何方式优化的代码（速度/大小），最终会得到包含调试版本的系统库的臃肿 exec。

如果您切换到发布模式，编译器和链接器可以优化为仅使用它们在最终 exec 中所需的功能，并使用它们的发布版本。这样，如果您选择了优化空间，那么您最终将“希望”得到一个较小的执行程序。

# objective-c - 排序表日期Objective-C

> ID：10981143
> 
> 赞同：0
> 
> 时间：2012-06-11T13:33:58.470
> 
> 标签：objective-c, macos, sorting, date, nstableview

我有一个包含两列的表：日期和名称。我使用此代码对元素进行排序：

```
-(id)tableView:(NSTableView *)aTableView

objectValueForTableColumn:(NSTableColumn *)aTableColumn
       row:(NSInteger)rowIndex {

NSDictionary *itemDictionary = [itemListArray objectAtIndex:rowIndex];

if (aTableColumn == itemName) 
    return [itemDictionary valueForKey:@"ItemNameBrowser"];
else if (aTableColumn == dateCare)
{   
    NSDate *date_to_set;
    if ([[itemDictionary valueForKey:@"ItemdateCare"] isKindOfClass:[NSString class]])
    {
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setTimeStyle:NSDateFormatterMediumStyle]; 
        [dateFormatter setDateStyle:NSDateFormatterMediumStyle]; 
        [dateFormatter setLocale:[NSLocale currentLocale]]; 

        date_to_set = [dateFormatter dateFromString:[itemDictionary valueForKey:@"ItemdateCare"]];
    }
    else
    {
        date_to_set = [itemDictionary valueForKey:@"ItemdateCare"];
    }

    return date_to_set;
}

else 

    return nil;

}

//sorting table view
-(void)tableView:(NSTableView *)tableView sortDescriptorsDidChange: (NSArray *)oldDescriptors 
{   

[itemListArray sortUsingDescriptors: [tableView sortDescriptors]];
[tableView reloadData];

}

-(void)addItem {
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
[dateFormatter setDateStyle:NSDateFormatterShortStyle]; 
[dateFormatter setLocale:[NSLocale currentLocale]];  

//Valori da aggiungere
NSString *newItemNameBrowser = @"Item";
NSString *newItemDateCare = [NSDate date];

NSMutableDictionary *newItem = [NSMutableDictionary dictionary];
[newItem setValue:newItemNameBrowser forKey:@"ItemNameBrowser"];
[newItem setValue:newItemDateCare forKey:@"ItemdateCare"];

[itemListArray addObject:newItem];
[tableList reloadData];

[dateFormatter release];

} 
```

在 MainMenu.xib 中的列是：

```
Sort Key ItemName
Selector compare: 
```

和

```
Sort Key ItemDate
Selector compare: 
```

列名没问题。问题是对日期列进行排序，因为没有正确重新排序日期。元素仅被视为数字。

![在此处输入图像描述](../Images/8e7bcfa903dfbe3a02b3e7ee087d1724.png)

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:43:46.110

我假设您将日期存储在`itemListArray`as 字符串中。不。将它们存储为 NSDates，然后它们将显示正确排序。

您需要将 NSDateFormatter 附加到 NSTableColumn 文本字段单元格，以将它们转换为字符串以供查看。

# sorting - 使用奇怪的 groovy 代码进行排序

> ID：10981145
> 
> 赞同：2
> 
> 时间：2012-06-11T13:34:06.147
> 
> 标签：sorting, groovy

我是 groovy 的初学者，我似乎无法理解这段代码。你能告诉我这段代码是如何运作的吗？

```
def list = [ [1,0], [0,1,2] ]
list = list.sort { a,b -> a[0] <=> b[0] }
assert list == [ [0,1,2], [1,0] ] 
```

我知道第二行应该返回值 1 因为宇宙飞船运算符，但它有什么用？这是什么类型的？（gdk api 中有 6 种排序方法，我不确定这里使用的是哪一种）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T14:13:31.570

该代码正在使用[`Collection#sort(Closure)`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28groovy.lang.Closure%29). 请注意，此方法有两种变体：

1.  如果闭包是二进制的（即它有两个参数），`sort`将其用作典型的比较器接口：当第一个参数小于、等于或大于第二个参数时，它应该分别返回负整数、零或正整数.

    这是那段代码中使用的变体。它通过第一个元素来比较列表中的元素，而这些元素又是列表。

2.  如果闭包是一元的（即它只需要一个参数），则它用于生成将用于比较的值（在某些语言中，这称为“键”函数）。

    因此，您发布的代码片段可以重写为：

    ```
    def list = [[1,0], [0,1,2]]
    list = list.sort { it[0] } // or { it.first() }
    assert list == [[0,1,2], [1,0]] 
    ```

    请注意，当您想通过某个值或某个“权重”来比较元素时，使用这种一元闭包变体非常方便，每个元素的计算方式都相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T13:43:41.153

在`sort`您的代码片段中使用比较器参数方法调用 - 请参阅[http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort(java.util.Comparator](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort(java.util.Comparator) )

因此，您正在使用自己的比较器对集合进行排序。现在比较器只是使用内部集合的第一个元素来决定外部集合的顺序。

# encryption - 密码加密以使用 phpbb3 密码

> ID：10981147
> 
> 赞同：0
> 
> 时间：2012-06-11T13:34:07.953
> 
> 标签：encryption, passwords, phpbb3

我有一个问题，如何从我的网站加密密码以使用 phpbb3 密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:13:38.723

这将允许您设置基本用户。

```
define('IN_PHPBB', true);
global $db;
global $config;
global $user;
global $auth;
global $cache;
global $template;

global $phpbb_root_path;
global $phpEx;

include('forums/common.php');   // THIS NEEDS TO BE CHANGED TO MATCH YOUR PHPBB3 INSTALL LOCATION;
                                // Currently, I am assuming you have this page at the root of your domain
                                // and PHPBB3 is install in the 'forums' subdirectory

// Start session management
$user->session_begin();
$auth->acl($user->data);
$user->setup();

require($phpbb_root_path .'includes/functions_user.php');

$username = $_POST['user'];
$password = $_POST['password'];     // Do not encrypt this password, it is handled later by an MD5 function and PHPBB3's own code
$email = $_POST['email'];

// You should add in a check to verify that the username is unique to your PHPBB3 install, otherwise you'll get errors
// I left this as an exercise for you so that you can handle it how you want (reload the page, fail completely, offer suggestions, etc)

$user_row = array(
    'username' => $username,
    'user_password' => md5($password), 'user_email' => $email,
    'group_id' => 2,                    // This is the 'Registered Users' group. Change this as you feel is appropriate
    'user_timezone' => '0.00',          // GMT
    'user_dst' => 0,                    // No Day Light Saving
    'user_lang' => 'en',
    'user_type' => '0',                 // This means 'Normal User'
    'user_actkey' => '',
    'user_dateformat' => 'd M Y H:i',
    'user_style' => 1,
    'user_regdate' => time(),
);

$id = user_add($user_row);              // Returns the ID of the new user 
```

假设：

*   该文件位于您域的根目录中，而论坛位于`forums`子目录中。如果不是这种情况，我添加了注释以显示需要更改的内容
*   没有对重复的用户名执行错误检查。假设您有处理此问题的方法或可以适当修改此脚本

# c# - 展开/关闭用户控制树

> ID：10981149
> 
> 赞同：1
> 
> 时间：2012-06-11T13:34:14.520
> 
> 标签：c#, winforms, tree, treeview

下面的代码用于在用户控件中加载树视图的 xml 文件。不知何故，我觉得展开/关闭的代码编码不好。有没有其他方法可以以更简洁的形式对此进行编码？

```
try{
    this.tvTraceSelect.Progress = true;
    this.tvTraceSelect.UnitsPath = unitsPath;
    this.tvTraceSelect.TracesPath = tracesPath;
    this.tvTraceSelect.View = Traces.View.Files;
    this.tvTraceSelect.TreeView.CollapseAll();
    if (this.tvTraceSelect.TreeView.Nodes.Count > 0)
    {
        this.tvTraceSelect.TreeView.Nodes[0].Expand();
        if (this.tvTraceSelect.TreeView.Nodes[0].Nodes.Count > 0)
        {
            this.tvTraceSelect.TreeView.Nodes[0].Nodes[0].Expand();
            if (this.tvTraceSelect.TreeView.Nodes[0].Nodes[0].Nodes.Count > 0)
            {
                this.tvTraceSelect.TreeView.Nodes[0].Nodes[0].Nodes[0].Expand();
                if (this.tvTraceSelect.TreeView.Nodes[0].Nodes[0].Nodes[0].Nodes.Count > 0)
                {
                    this.tvTraceSelect.TreeView.Nodes[0].Nodes[0].Nodes[0].Nodes[0].Expand();
                }
            }
        }
    }
}catch (Exception _excep)
{
    MessageBox.Show(this, "An error occured during the initialization of the InitTracesView .\nDetails: " 
            + _excep.Message + "\n\n" + _excep.StackTrace, "Initialization error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:39:46.063

```
public void ExpandFirst(TreeNodeCollection nodes)
{
   if (nodes.Count > 0)
   {
      nodes[0].Expand();
      ExpandFirst(nodes[0].Nodes);
   }
} 
```

像这样称呼它：

```
ExpandFirst(this.tvTraceSelect.TreeView.Nodes) 
```

# install4j - 我可以使用 install4j 启动器重新启动 java 应用程序吗？

> ID：10981152
> 
> 赞同：3
> 
> 时间：2012-06-11T13:34:21.407
> 
> 标签：install4j

我需要重新启动 java GUI 应用程序以响应用户操作，其方式类似于 eclipse 在切换工作区时自行重新启动。

我们目前使用 install4j 启动器，所以我想知道如果我使用特定的返回码或类似的东西退出应用程序，启动器是否可以配置为保持运行并重新启动应用程序？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:33:39.593

这不是 install4j 中的功能。但是，您可以使用 java.lang.ProcessBuilder 再次启动启动器并调用 System.exit()。

如果启动器是单实例 GUI 启动器，您必须使用另一个可执行文件等待启动器关闭，然后重新启动原始可执行文件。这可以通过在其“启动”节点中包含“执行启动器”操作的自定义安装程序应用程序轻松完成。自定义安装程序应用程序通过带有参数的 API 启动

```
-q -wait 20 
```

即它以无人值守模式（无 GUI）执行，并等待最多 20 秒以关闭所有已安装的启动器。要显示进度条，请添加

```
-splash "Restarting application" 
```

到论点。启动自定义安装程序应用程序的代码如下所示：

```
import java.io.IOException;
import com.install4j.api.launcher.ApplicationLauncher;

try {
    ApplicationLauncher.launchApplication("ID", new String[] {
       "-q","-wait","20"
    }, false, null);
} catch (IOException e) {
    e.printStackTrace();
    //TODO handle invocation failure
} 
```

其中 ID 必须替换为自定义安装程序应用程序的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-06T10:51:52.820

确保配置可执行文件名称。

否则它只会静默失败：安装程序编译和`launchApplication()`调用不会引发任何错误。并且没有任何错误消息或日志文件可供查看，这让我花了一天的时间试错才能弄清楚。

[![在此处输入图像描述](../Images/2c94d7a78d6e9530105f869f09625dab.png)](https://i.stack.imgur.com/qt3r6.png)

此外，可以设置自定义 ID 以避免神秘的应用程序 ID：

```
 ApplicationLauncher.launchApplication("restarter", new String[] { "-q", "-wait", "20", "-splash", "Restarting..." }, /* blocking */ false, /* callback */ null); 
```

[![在此处输入图像描述](../Images/55783e3154f3d536e2034d906dd1bd5a.png)](https://i.stack.imgur.com/ECBEQ.png)

# vb.net - 如何从 unix shell 脚本调用 vb.net 程序

> ID：10981154
> 
> 赞同：0
> 
> 时间：2012-06-11T13:34:23.227
> 
> 标签：vb.net, unix, aix

我需要能够从 AIX 服务器上的 unix shell 脚本启动 Windows 服务器上的 vb.net 程序。我需要做什么才能使这成为可能？我是 .Net 方面的新手，但我在想，也许可以让 vb.net 程序成为某种 Web 服务，然后让 unix shell 脚本以某种方式调用它。但不知道我是否走在正确的轨道上。将不胜感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:39:19.607

在 Windows 端，安装 PHP，然后使用该`exec()`函数或其朋友启动 vb.net 程序。`wget`通过或从 AIX 启动它`curl`。

`nc.exe`如果您对安全隐患感到满意，也可以将 netcat 用于 windows ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:49:21.153

为您提供了多种选择。

1.  正如 Eugen Rieck 所建议的，您可以拥有一个轻量级的 http 应用程序（使用 asp.net 或 php，但我认为 asp.net 更符合逻辑）。该应用程序将包含一个非常简单的 http 处理程序，该处理程序将在到达页面时触发程序 `System.Diagnostics.Process.Start(processStartInfo)`（谨防 DOS 攻击）。要到达该页面，wget 或 curl 将完成这项工作（我相信 Eugen，因为我从未在 *nix 中编写过脚本）
2.  您可以修改您的程序以作为服务运行（或创建一个新程序），该程序可以使用您知道的任何可互操作技术来监听“命令”。它可以是一个简单的 http 监听器、一个 WCF REST 服务、一个消息队列系统，甚至是一个文件系统监视器（监听文件夹中的文件）。
3.  反转逻辑（可能不适用）。在 unix 端发布一个包含要做的工作的网页，并从 vb 程序中汇集这个工作。

# ios - iOS：GPUImage 库和 VBO

> ID：10981156
> 
> 赞同：3
> 
> 时间：2012-06-11T13:34:33.117
> 
> 标签：ios, opengl-es, vbo, gpuimage

我正在使用[Brad Larson 出色的 GPUImage 库](https://github.com/BradLarson/GPUImage)进行图像处理。到目前为止，一切都很好。但是，我正在尝试添加一个过滤器以允许网格变形并遇到很多问题。具体来说，我想要一个使用 VBO 渲染四边形的过滤器，这样我最终可以动态地更改顶点以进行变形。

使用 VBO 的第一步是导致崩溃。

我创建了一个`GPUImageFilter`重写该`- (void)newFrameReadyAtTime:(CMTime)frameTime`方法的子类，以通过 VBO 呈现四边形。**注意**：我只是尝试渲染单个 Quad 而不是完整的网格，这样我可以一次解决一个问题。

```
@implementation GPUMeshImageFilter {
    GLuint _positionVBO;
    GLuint _texcoordVBO;
    GLuint _indexVBO;

    BOOL isSetup_;
}

- (void)setupBuffers
{
    static const GLsizeiptr verticesSize = 4 * 2 * sizeof(GLfloat);
    static const GLfloat squareVertices[] = {
        -1.0f, -1.0f,
        1.0f, -1.0f,
        -1.0f,  1.0f,
        1.0f,  1.0f,
    };

    static const GLsizeiptr textureSize = 4 * 2 * sizeof(GLfloat);
    static const GLfloat squareTextureCoordinates[] = {
        0.0f, 0.0f,
        1.0f, 0.0f,
        0.0f,  1.0f,
        1.0f,  1.0f,
    };

    static const GLsizeiptr indexSize = 4 * sizeof(GLushort);
    static const GLushort indices[] = {
      0,1,2,3,  
    };

    glGenBuffers(1, &_indexVBO);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexVBO);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, indexSize, indices, GL_STATIC_DRAW);

    glGenBuffers(1, &_positionVBO);
    glBindBuffer(GL_ARRAY_BUFFER, _positionVBO);
    glBufferData(GL_ARRAY_BUFFER, verticesSize, squareVertices, GL_STATIC_DRAW);

    glEnableVertexAttribArray(0);
    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 2*sizeof(GLfloat), 0);

    glGenBuffers(1, &_texcoordVBO);
    glBindBuffer(GL_ARRAY_BUFFER, _texcoordVBO);
    glBufferData(GL_ARRAY_BUFFER, textureSize, squareTextureCoordinates, GL_DYNAMIC_DRAW);

    glEnableVertexAttribArray(1);
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 2*sizeof(GLfloat), 0);

    NSLog(@"Setup complete");
}

- (void)newFrameReadyAtTime:(CMTime)frameTime;
{
    if (!isSetup_) {
        [self setupBuffers];
        isSetup_ = YES;
    }

    if (self.preventRendering)
    {
        return;
    }

    [GPUImageOpenGLESContext useImageProcessingContext];
    [self setFilterFBO];

    [filterProgram use];

    glClearColor(backgroundColorRed, backgroundColorGreen, backgroundColorBlue, backgroundColorAlpha);
    glClear(GL_COLOR_BUFFER_BIT);

    glActiveTexture(GL_TEXTURE2);
    glBindTexture(GL_TEXTURE_2D, filterSourceTexture);

    glUniform1i(filterInputTextureUniform, 2);  

    if (filterSourceTexture2 != 0)
    {
        glActiveTexture(GL_TEXTURE3);
        glBindTexture(GL_TEXTURE_2D, filterSourceTexture2);

        glUniform1i(filterInputTextureUniform2, 3); 
    }

    NSLog(@"Draw VBO");
    glDrawElements(GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_SHORT, 0);

    [self informTargetsAboutNewFrameAtTime:frameTime];
}

@end 
```

插入此过滤器，我看到：“设置完成”和“绘制 VBO”显示在控制台上。但是，在它调用目标（在本例中为 a `GPUImageView`）之后，它会在目标的绘图调用中崩溃，该调用使用`glDrawArrays`.

```
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

这是包含此行的完整方法。

```
- (void)newFrameReadyAtTime:(CMTime)frameTime;
{
    [GPUImageOpenGLESContext useImageProcessingContext];
    [self setDisplayFramebuffer];

    [displayProgram use];

    glClearColor(backgroundColorRed, backgroundColorGreen, backgroundColorBlue, backgroundColorAlpha);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    static const GLfloat textureCoordinates[] = {
        0.0f, 1.0f,
        1.0f, 1.0f,
        0.0f, 0.0f,
        1.0f, 0.0f,
    };

    glActiveTexture(GL_TEXTURE4);
    glBindTexture(GL_TEXTURE_2D, inputTextureForDisplay);
    glUniform1i(displayInputTextureUniform, 4); 

    glVertexAttribPointer(displayPositionAttribute, 2, GL_FLOAT, 0, 0, imageVertices);
    glVertexAttribPointer(displayTextureCoordinateAttribute, 2, GL_FLOAT, 0, 0, textureCoordinates);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

    [self presentFramebuffer];
} 
```

任何帮助将不胜感激，我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:47:37.717

看起来很可能发生崩溃，因为执行`GL_ARRAY_BUFFER`时仍然绑定`GPUImageView-newFrameReadyAtTime:`。

`0`尝试在结尾处取消绑定缓冲区（即绑定到） `-setupBuffers`：

```
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

这是一个问题的原因是因为 GPUImage 从一个`GPUImageInput`（例如`GPUImageFilter`，`GPUImageView`）到另一个使用相同的 OpenGL 上下文。我相信主要是为了每个步骤都可以输出到 OpenGL 纹理，然后让该纹理直接提供给下一个`GPUImageInput`.

因此，由于`GL_ARRAY_BUFFER`仍然绑定了`glVertexAttribPointer`内部`GPUImageView-newFrameReadyAtTime`更改的行为，因此有效地尝试将`displayPositionAttribute`属性指向偏移量为 的填充 VBO `imageVertices`，这是无意义的并且可能导致崩溃。请参阅[glVertexAttribPointer 文档](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glVertexAttribPointer.xml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:28:51.213

下面的这段代码对我来说根本不合适。为什么要启用顶点属性数组 4 和 5？您应该在您打算使用的属性位置启用该数组。

```
//position vbo
glEnableVertexAttribArray(4);
glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 2*sizeof(GLfloat), 0);

//texcoord vbo
glEnableVertexAttribArray(5);
glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 2*sizeof(GLfloat), 0); 
```

如果您的顶点属性在位置 0，您应该启用属性 0 并为属性 0 设置指针。如果它在位置 4（我怀疑），那么您应该启用属性 4 并为位置 4 设置指针。我不能想一想它应该像您一样不匹配的任何原因。

您应该通过布局属性设置它、`glBindAttribLocation`在着色器链接之前使用或`glGetAttribLocation`在链接之后使用来获得正确的位置。

让我知道这是否没有意义。

# delphi - 将数据共享到 LinkedIn 用户的个人资料以更新状态

> ID：10981160
> 
> 赞同：1
> 
> 时间：2012-06-11T13:34:48.920
> 
> 标签：delphi, linkedin

我正在开发一个将数据共享到 LinkedIn 用户个人资料的程序。我正在使用 Delphi XE2、OAuth 和 LinkedIn API。我能够访问令牌。但是我在尝试时遇到错误。我正在为 Delphi 使用 OAuth。对于我使用的 SSL，TIdSSLIOHandlerSOcketOpenSSL 和方法 sslvSSLv3。我正在尝试发布以下内容：

我将 (https://api.linkedin.com/v1/people/~/shares) 作为 Url 和 ('; hiSir `anyone`) 作为 Xml 发布。

还有我的 Idhttp 自定义标头*** ('oauth_consumer_key='+xxxxxxxxxxx+ ',oauth_signature_method="HMAC-SHA1"'+',oauth_timestamp='+QuotedStr(ARequest.GenerateTimeStamp)+ ',oauth_nonce='+QuotedStr(ARequest.GenerateNonce )+',oauth_version="1.0"'+',oauth_token='+xxxxxxxxxx+',oauth_signature='+QuotedStr(sign));

我从 Indy Http 得到的结果是：Http/1.1 401 – Unauthorized 谁能帮我解决这个问题？请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:28:58.657

看看这个[问题](https://stackoverflow.com/questions/10828270/delphi-oauth-and-linked-api-access-token-giving-unauthorized)和这篇[文章](http://chuckbeasley.wordpress.com/2009/04/29/using-oauth-for-delphi/)

```
IdSSLIOHandlerSocketOpenSSL := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
with IdSSLIOHandlerSocketOpenSSL do begin 
 SSLOptions.Method := sslvSSLv3;
 SSLOptions.SSLVersions := [sslvSSLv3]; 
 SSLOptions.Mode := sslmBoth; 
 SSLOptions.VerifyMode := []; 
 SSLOptions.VerifyDepth := 0; 
 host := ''; 
end; 
```

# javascript - 将脚本附加到 div

> ID：10981162
> 
> 赞同：0
> 
> 时间：2012-06-11T13:34:55.707
> 
> 标签：javascript, jquery, html, append

我有一个小问题，我坚持了几天。我下载了一个`Javascript`日历插件（[日期输入](http://www.dynamicdrive.com/dynamicindex7/jasoncalendar.htm)）来在我的表单中添加一个小日历。在此表单中，我添加了一个按钮，在此表单中添加另一行以让用户设置多个日期。

```
<input type="button" value="Ajouter" onclick="ajoutChamp('creneau')" /> 
```

我做了一个小脚本：

```
var s = document.createElement('script');
s.type = "text/javascript";
s.text = "DateInput('creneau_2',true,'DD-MON-YYYY')";
$("#test").append(s); 
```

但是当我这样做时，每次按下按钮时，我的日历都会全屏显示。看起来脚本已经执行但没有出现在 html 页面中。

我的 html 代码的一小部分：

```
<table id="liste_creneau" class="add_champ">
    <tr id="tr_creneau_1">
        <td><label for="creneau_1">creneau 1</label></td>
        <td><script id="ref_date">DateInput('creneau_1', true, 'DD-MON-YYYY')</script></td>
    </tr>
</table>
<div id="test">

</div> 
```

Atm 我想将日历附加到 div 中，但最后日历将在表中。

我也做过其他测试，但我所做的每一段代码都以同样的方式结束......

所以也许你可以帮助我！:)

**编辑：**

好的，我做了一个小测试

```
var g = document.getElementById('test');
var s = document.getElementById('ref_date');
nb++;
var clone = s.cloneNode(true);
var param = clone.firstChild.data.split('\'');
param[1] = 'creneau_'+nb;
clone.firstChild.data = param.join('\'');
g.appendChild(clone); 
```

之后，当我单击按钮时，在 div 中插入了一个脚本标签，但没有显示任何内容。当我检查我的 html 页面时，我可以看到它，但没有出现日历...

再见

爱德华

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:46:15.487

我不明白你为什么不只是运行日期输入行。它应该具有相同的效果。

```
DateInput('creneau_2',true,'DD-MON-YYYY'); 
```

无论如何，您可以尝试在 jQuery 中完成所有操作，而不是混合使用 javascript 选择器。

```
$("#test").append("<script type='text/javascript'>DateInput('creneau_2',true,'DD-MON-YYYY');</script>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:27:13.807

好吧，我选择使用 jQuery-UI 日期选择器...所以我想它已经解决了，非常感谢 Agentminlindu 和所有其他人:)

# iphone - 如何在 iphone 的 xcode 4.2 中自定义 PushNotificaion？

> ID：10981164
> 
> 赞同：0
> 
> 时间：2012-06-11T13:35:08.897
> 
> 标签：iphone, push-notification

我对推送通知有疑问。我可以在收到时自定义 PushNotification。我想通过在我的应用程序中使用 PushNotification 获取当前地理点添加/附加该距离来计算距离。在 iPhone 上可以吗？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:24:40.313

一开始，我无法完全理解您的问题，但是您可以通过 APNS 在推送通知中发送特定信息（即使很难，这也不是一个好主意）。推送通知的有效负载可以达到 256 字节，它使用 JSON 字典，您可以根据需要自定义字典。如果我是你，我会按照以下步骤操作：

1.  自定义您的推送通知正文以发送特定位置（作为 JSON）
2.  获取设备的当前位置并计算差异（或做任何你想做的事）
3.  在警报视图或其他内容中显示这些变量（来自推送和当前位置之一）的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:47:24.143

如果您想通知您的应用程序是否在后台，那么 APN 是唯一的方法。

Apple Push Notification 是后台处理的替代品（应用程序在后台）。由于 iPhone 不允许后台处理超过 6 分钟，除了 VOIP 或音频播放。

因此，如果您想在应用程序处于后台状态（暂停状态）时通知它。APN 是通知应用程序的最佳方式。并且您可以使用 APN 为 256 字节的数据包进行 paas。

# ruby - 模块 == ruby 中的 mixins 吗？

> ID：10981166
> 
> 赞同：5
> 
> 时间：2012-06-11T13:35:11.510
> 
> 标签：ruby

我读过很多教科书

*在 Ruby 中，一个类只能是一个类的子类。然而，mixin 允许没有共同祖先的类共享方法。*

在实践中，每当我需要实现多重继承时。我有使用`Modules`而不是混合。例如：

```
Module name_goes_here
  def method_name_goes_here
    .....
  end
end 
```

然后，我只是将它们包含在一个类中

```
class MySubClass < MySuperClass
  include module_name
end 
```

现在，我参考了多本关于 mixins 的 ruby​​ 书籍，然后突然间，所有这些书籍都开始谈论模块，但没有明确说明 mixins 和模块的关系是什么。

所以，问题是：模块 == ruby​​ 中的 mixins 吗？如果是，那么为什么。如果没有，那有什么区别？

PS：对不起，如果这是一个愚蠢的问题

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T13:39:48.693

Mixins 是一种允许将一些代码注入到类中的语言概念。

这是在 Ruby 中通过`include`将 a`Module`作为参数的关键字实现的。

所以是的，在 Ruby 中，mixin 是用模块实现的。但是模块除了 mixin 之外还有其他用途。

例如，模块也可以用于命名你的类或封装实用程序函数以防止污染全局命名空间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T13:38:17.327

来自[维基百科文章](http://en.wikipedia.org/wiki/Mixin)

> 在面向对象的编程语言中，mixin 是一个类，它提供了可以被子类继承或重用的特定功能，而不是用于实例化（生成该类的对象）。

所以是的，Ruby 中的模块提供了一种重用功能的方法，而无需实例化模块本身。我会说，“ruby 中的 mixins 是用模块实现的”，但不是“mixins 是模块，反之亦然”。

# mercurial - 在 Mercurial 中，有没有办法通过克隆/拉/推来保存/提交未完成的更改，但对其他人不可用？

> ID：10981167
> 
> 赞同：2
> 
> 时间：2012-06-11T13:35:26.900
> 
> 标签：mercurial

我经常发现自己需要在当前正在处理的更改完成之前切换到进行不同的更改。我想知道在 Mercurial 中是否有一种方法可以保存/提交我未完成的更改，其他人无法使用该更改（即不可克隆/可推/可拉）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:07:17.220

Mercurial[`phases`](https://www.mercurial-scm.org/repo/hg/help/phases)可能是这个问题的答案。

从 Mercurial v2.1 开始，您可以将`mq`变更集配置为自动标记为`secret`. `secret`传入/拉取和传出/推送命令会忽略变更集。

要启用此行为，您需要将以下内容添加到您的配置中：

```
[mq]
secret = True 
```

启用后，它的行为如下：

```
$ hg qpush --all
applying my-patch
now at: my-patch

$ hg phase -r .
16873: secret

$ hg outgoing
comparing with https://www.mercurial-scm.org/repo/hg
searching for changes
no changes found (ignored 1 secret changesets) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:38:58.833

看看[Shelve Extension](https://www.mercurial-scm.org/wiki/ShelveExtension)。这为您提供了基础知识，并且可能足以满足您的需要。

还有[Mercurial Queues Extension](https://www.mercurial-scm.org/wiki/MqExtension)，但我发现使用它可能有点奇怪。

作为最后的选择，您始终可以将更改提交到另一个分支，这样它们就不会影响主线开发，但我认为这些可能仍然可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T01:40:28.117

你可以将你的 repo 克隆到一个新的地方来处理新的变化。这样，您的未决更改将保留在本地计算机上，并且永远不会被推送。当然，这取决于您的仓库的大小。如果它太大，克隆就会变得有点令人望而却步。

正如其他人所建议的那样，您可以将不可用的更改标记为私有分支。推送时，您可以使用`-b`参数推送显式分支。因此，如果您的私有分支是`TimPrivateBranch`，并且其他更改正在进行`default`：

```
 hg push -b default 
```

`TimPrivateBranch`留在您的本地计算机上。当然，这要求你`-b`每次推送时都要记住参数。

完成私有分支后，只需合并回默认分支：

```
hg up default
hg merge TimPrivateBranch 
```

# apache - Apache VirtualHost 和本地主机

> ID：10981174
> 
> 赞同：75
> 
> 时间：2012-06-11T13:35:42.077
> 
> 标签：apache, localhost, virtualhost

我在 Mac OS X 上使用 XAMPP。

我正在尝试为客户正确运行[Symfony](https://en.wikipedia.org/wiki/Symfony)网站，但我真的不了解 Symfony（还）。我只想安装并启动它。

我以这种方式更改了我的*[/etc/hosts](https://en.wikipedia.org/wiki/Hosts_(file))*文件：

```
127.0.0.1 www.mysite.local 
```

而*httpd.conf*文件是这样的：

```
<VirtualHost *:80>
  ServerName www.mysite.local
  DocumentRoot /Applications/MAMP/htdocs/mysite/web
  DirectoryIndex index.php
  <Directory /Applications/MAMP/htdocs/mysite/web>
    AllowOverride All
    Allow from All
  </Directory>
  Alias /sf /Applications/MAMP/htdocs/mysite/lib/vendor/symfony/data/web/sf
  <Directory "/Applications/MAMP/htdocs/mysite/lib/vendor/symfony/data/web/sf">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost> 
```

现在，该站点正在运行（耶！），但我无法再访问任何其他本地站点，因为**localhost**呈现为**[www.mysite.local](http://www.mysite.local)**。

我哪里错了？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-10-25T20:02:24.893

这对我有用！

运行项目，如`http://localhost/projectName`：

```
<VirtualHost localhost:80>
   ServerAdmin localhost
    DocumentRoot path/to/htdocs/
    ServerName localhost
</VirtualHost> 
```

要在`http://somewebsite.com`本地运行项目：

```
<VirtualHost somewebsite.com:80>
     ServerAdmin webmaster@example.com
     DocumentRoot /path/to/htdocs/somewebsiteFolder
     ServerName www.somewebsite.com
     ServerAlias somewebsite.com
</VirtualHost> 
```

其他网站也一样：

```
<VirtualHost anothersite.local:80>
     ServerAdmin webmaster@example.com
     DocumentRoot /path/to/htdocs/anotherSiteFolder
     ServerName www.anothersite.local
     ServerAlias anothersite.com
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-20T04:10:44.540

`localhost`将始终重定向到`127.0.0.1`. 您可以通过将其他 VirtualHost 命名为其他本地环回地址来欺骗这一点，例如`127.0.0.2`. 确保您还更改了相应的`hosts`文件来实现这一点。

例如，我的`httpd-vhosts.conf`样子是这样的：

```
<VirtualHost 127.0.0.2:80>
    DocumentRoot "D:/6\. App Data/XAMPP Shared/htdocs/intranet"
    ServerName intranet.dev
    ServerAlias www.intranet.dev
    ErrorLog "logs/intranet.dev-error.log"
    CustomLog "logs/intranet.dec-access.log" combined

    <Directory "D:/6\. App Data/XAMPP Shared/htdocs/intranet">
        Options Indexes FollowSymLinks ExecCGI Includes
        Order allow,deny
        Allow from all
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost> 
```

（请注意，在`<VirtualHost>`我输入的部分中`127.0.0.2:80`。这意味着这个 VirtualHost 块只会影响对 IP 地址`127.0.0.2`port的请求`80`，这是 HTTP 的默认端口。

要正确路由名称`intranet.dev`，我的`hosts`输入行是这样的：

```
127.0.0.2 intranet.dev 
```

这样，它将阻止您创建另一个 VirtualHost 块`localhost`，这是不必要的。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-12T11:59:29.490

如果你看到它，这是正常的。由于它是第一个虚拟主机条目，它将显示本地主机。

例如，假设您不希望显示该页面。您想要显示的只是“Apache，它可以工作”页面，因此您可以在 mysite.local 作为本地主机之前创建一个*vhost*条目并将其指向“它可以工作”页面。

但这是正常的。我以前也遇到过这个问题，不用担心！

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-07-08T00:42:12.413

你可能想用这个：

```
<VirtualHost *:80>
    DocumentRoot "somepath\Apache2.2\htdocs"
    ServerName localhost
</VirtualHost>
<VirtualHost *:80> 
```

作为您的第一个虚拟主机（将其放在其他虚拟主机之前）。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-08-19T11:20:08.407

在使用 virtualHost 时，我遇到了访问 localhost 的相同问题。我通过在 virtualHost 监听代码中添加名称来解决它，如下所示：

在我的**主机**文件中，我添加了以下代码（**C:\Windows\System32\drivers\etc\hosts**） -

```
127.0.0.1   main_live 
```

在我的**httpd.conf**中，我添加了以下代码：

```
<VirtualHost main_live:80>
    DocumentRoot H:/wamp/www/raj/main_live/
    ServerName main_live
</VirtualHost> 
```

而已。它可以工作，我可以同时使用**localhost**、**phpmyadmin**和**main_live**（我的虚拟项目）。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-03-12T06:20:01.613

[官方文档中对](http://httpd.apache.org/docs/2.0/vhosts/name-based.html)[约翰·史密斯的回答](https://stackoverflow.com/questions/10981174/apache-virtualhost-and-localhost/17517799#17517799) 的附加描述。了解为什么会这样。

> **主要主人走了**
> 
> **如果要将虚拟主机添加**到现有 Web 服务器，还必须**为现有主机创建一个块**。此虚拟主机中包含的 ServerName 和 DocumentRoot 应与全局 ServerName 和 DocumentRoot 相同。首先在配置文件中列出此虚拟主机，以便它将充当默认主机。

例如，要与 XAMPP 一起正常工作，以防止 VirtualHost 覆盖主主机，请将以下行添加到文件*httpd-vhosts.conf 中*：

```
# Main host
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "/xampp/htdocs"
</VirtualHost>

# Additional host
<VirtualHost *:80>
    # Over directives there
</VirtualHost> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-03-28T17:55:32.580

对于执行此处描述的所有操作但仍无法访问的人：

XAMPP 与 Apache 2.4：

在文件*httpd-vhost.conf 中*：

```
<VirtualHost *>
    DocumentRoot "D:/xampp/htdocs/dir"
    ServerName something.dev
   <Directory "D:/xampp/htdocs/dir">
    Require all granted #apache v 2.4.4 uses just this
   </Directory>
</VirtualHost> 
```

这里不需要端口或 IP 地址。Apache 在自己的文件上配置它。不需要 NameVirtualHost *:80; 它已被弃用。你可以使用它，但它没有任何区别。

然后要编辑主机，您必须***以管理员身份******运行[记事本](https://en.wikipedia.org/wiki/Notepad_%28software%29)***（如下所述）。如果您在不执行此操作的情况下编辑文件，则您正在编辑伪文件，而不是原始文件（是的，它保存等，但它不是真实文件）

在 Windows 中：

**找到记事本图标，右键，以管理员身份运行，打开文件，进入*C:/WINDOWS/system32/driver/etc/hosts*，勾选*“查看所有文件”*，打开主机。**

如果您之前编辑过它，您可能会看到它不是您之前在未以管理员身份运行时编辑的文件。

然后**检查 Apache 是否正在读取您的 httpd-vhost.conf**，转到文件夹*xampFolder/apache/bin*，`Shift`+ 右键单击​​，在此处打开终端命令，打开 XAMPP（如您通常所做的那样），启动 Apache，然后在命令行，输入`httpd -S`。您将看到虚拟主机列表。只需检查您的*something.dev*是否​​在那里。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-11T22:31:46.530

根据此文档：[基于名称的虚拟主机支持](http://httpd.apache.org/docs/2.0/vhosts/name-based.html)

您可能缺少以下指令：

```
NameVirtualHost *:80 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-03-25T15:26:39.590

只需更改`<VirtualHost *:80>`为`<VirtualHost 127.0.0.1:80>`.

然后，默认值`DocumentRoot`将为指向您的服务器并指定的所有域或 IP 地址提供服务`VirtualHost`。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-27T07:48:33.400

这可能是因为您的网络文件夹（如前所述“/Applications/MAMP/htdocs/mysite/ **web** ”）是空的。

我的建议是先制作你的项目，然后再制作虚拟主机。

我遇到了类似的情况。我在**httpd-vhosts.confiz的****DocumentRoot**中使用了一个空文件夹，但我无法访问我的**shahg101.com**站点。

 ***** * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-09T21:32:13.937

我正在运行[Ubuntu 16.04](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_16.04_LTS_.28Xenial_Xerus.29)（Xenial Xerus）。这对我有用：

1.  打开终端并*cd*到`/etc/apache2/sites-available`. 在那里你会找到一个名为`000-default.conf`.
2.  复制该文件：`cp 000-default.conf example.local.conf`
3.  打开那个新文件（我使用[Nano](https://duckduckgo.com/html/?q=Wikipedia%20Nano)；使用你喜欢的）。
4.  您会看到很多注释行，您可以将其删除。
5.  更改`<VirtualHost *:80>`为`<VirtualHost example.local:80>`
6.  更改文档根目录以反映文件的位置。
7.  添加以下行：`ServerName example.local`如果需要，请添加以下行：`ServerAlias www.example.local`
8.  保存文件并重新启动 Apache：`service Apache2 restart`

打开浏览器并导航到`example.local`。你应该看到你的网站。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-29T11:37:07.363

对于使用 Windows 和[Bitnami](https://en.wikipedia.org/wiki/Bitnami#Technology_overview) [WAMP](https://en.wikipedia.org/wiki/LAMP_(software_bundle)#Variants)堆栈管理器工具的任何人，此虚拟主机配置应进入`Bitnami\apache2\conf\bitnami\bitnami.conf`

注意：**目录**部分中的某些设置不是必须的。

例如，我对**site.com**的虚拟主机配置如下：

```
<VirtualHost site.com:80>
  DocumentRoot "C:/Bitnami/apache2/htdocs/site/docroot"

  <Directory "C:/Bitnami/apache2/htdocs/site/docroot">
    Options Indexes FollowSymLinks
    AllowOverride All
    <IfVersion < 2.3 >
      Order allow,deny
      Allow from all
    </IfVersion>
    <IfVersion >= 2.3 >
      Require all granted
    </IfVersion>
  </Directory>
</VirtualHost> 
```

请记住，其他朋友提到的 vhost 配置，需要[sagits 的答案](https://stackoverflow.com/a/22719971/7995302)。****

# haskell - 使用 Yampa 和 yampa-glut 获取关键输入

> ID：10981178
> 
> 赞同：2
> 
> 时间：2012-06-11T13:35:59.267
> 
> 标签：haskell, glut, freeglut, yampa

AFRP 的整个主题听起来非常令人兴奋，我正在尝试在其中开始我自己的项目。我找到了[Yampa](http://hackage.haskell.org/packages/Yampa)和[yampa-glut](http://hackage.haskell.org/packages/yampa-glut)，这似乎是与 GLUT 的良好绑定（看起来，[GLUT](http://hackage.haskell.org/packages/GLUT)是唯一同时在 Windows 和 Linux 上运行的图形库）。

`yampa-glut`源码附带了一个简单的例子[，](https://github.com/ony/yampa-glut/blob/master/example.lhs)我复制过来学习了。然后我想扩展它，为关键事件添加一个简单的测试。它的完整来源在[这里](https://gist.github.com/2910094)，除了第 23 行和 keys 函数外，没有什么新东西：

```
keys = proc ev -> do
    rec
        e <- keyAction -< ev
        let s = event Nothing (Just . show) e
        res <- identity -< s
    returnA -< res 
```

每当我按下或释放一个键时，预期的结果是外壳上的简单输出。但它没有发生，没有输出。

如果我将最后一行之前的行更改为：

```
res <- delay 0.2 Nothing -< s 
```

然后我得到一些关键输入，但不是全部，很多都被跳过了。

我找不到对此的解释，所以我希望有人能向我解释我哪里出错了，我可以做些什么来获得键盘和鼠标按钮输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:55:54.953

过了一段时间，我发现我一直在思考完全错误的方式。这里将是上面的扩展，用于测试按下“ESC”按钮：

```
simple :: Reaction
simple = proc ev -> do
    r <- integral -< 50
    displayAction <- arr (uncurry tag) <<< first redisplay -< (ev, actionIO . display $ r)
    reshapedAction <- arr (fmap (actionIO . reshape)) <<< reshaped -< ev
    returnA -< mconcat [reshapedAction, displayAction]

anim :: Reaction
anim = switch (simple &&& keyPressed) route
    where
        route (Left '\ESC') = arr (\_ -> Event actionExit)
        route _ = simple 
```

这似乎工作正常。（将使用上述解决方案进行编辑）

# c# - WPF CreateBitmapSourceFromHBitmap 内存泄漏

> ID：10981179
> 
> 赞同：3
> 
> 时间：2012-06-11T13:36:00.300
> 
> 标签：c#, wpf, memory, memory-leaks

因此，我的 C# 代码存在一些内存泄漏问题，我已经进行了相当彻底的搜索，并且确实意识到这里还有另一个问题[WPF CreateBitmapSourceFromHBitmap() 内存泄漏](https://stackoverflow.com/questions/1546091/wpf-createbitmapsourcefromhbitmap-memory-leak)（以及许多其他问题）涵盖了相同的主题但不满足我的标准或解决我的问题。

所以这是我的代码，不久前我从另一个项目中得到了这个我相当肯定这个问题与`// Here's the WPF glue to make it all work. It converts from an // hBitmap to a BitmapSource. Love the WPF interop functions bitmap = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap( compatibleBitmapHandle, IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());`

这是完整的方法代码，它是这样调用的

`BitmapSource captured = CaptureRegion( hWnd, rect.X, rect.Y, rect.Width, rect.Height, true);`

并且每秒也被调用多次。（每次调用 70-100 毫秒）

```
 // capture a region of a the screen, defined by the hWnd
        public static BitmapSource CaptureRegion(
            IntPtr hWnd, int x, int y, int width, int height, bool addToClipboard)
        {
            IntPtr sourceDC = IntPtr.Zero;
            IntPtr targetDC = IntPtr.Zero;
            IntPtr compatibleBitmapHandle = IntPtr.Zero;
            BitmapSource bitmap = null;
            //IntPtr hBitmap = bitmap.GetHbitmap();
//            IntPtr hBitmap;

            try
            {
                // gets the main desktop and all open windows
                sourceDC = User32.GetDC(User32.GetDesktopWindow());

                //sourceDC = User32.GetDC(hWnd);
                targetDC = Gdi32.CreateCompatibleDC(sourceDC);

                // create a bitmap compatible with our target DC
                compatibleBitmapHandle = Gdi32.CreateCompatibleBitmap(sourceDC, width, height);

                // gets the bitmap into the target device context
                Gdi32.SelectObject(targetDC, compatibleBitmapHandle);

                // copy from source to destination
                Gdi32.BitBlt(targetDC, 0, 0, width, height, sourceDC, x, y, Gdi32.SRCCOPY);

                // Here's the WPF glue to make it all work. It converts from an 
                // hBitmap to a BitmapSource. Love the WPF interop functions
                bitmap = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                    compatibleBitmapHandle, IntPtr.Zero, Int32Rect.Empty,
                    BitmapSizeOptions.FromEmptyOptions());

            }
            catch (Exception ex)
            {
                throw new ScreenCaptureException(string.Format("Error capturing region {0},{1},{2},{3}", x, y, width, height), ex);
            }
            finally
            {
                Gdi32.DeleteObject(compatibleBitmapHandle);
                // Gdi32.DeleteObject(hBitmap);
                User32.ReleaseDC(IntPtr.Zero, sourceDC);
                User32.ReleaseDC(IntPtr.Zero, targetDC);
            }

            return bitmap;
        } 
```

我真的无法理解如何将上述线程中提到的修复程序应用于我的问题，因为我的 BitmapSource 似乎不是从位图创建的，我看不出删除位图对象有什么帮助。

非常感谢你的帮助。

# database - 设计决策：（VB.NET）我应该创建一个类或模块来轻松连接到多个数据库之一吗？

> ID：10981183
> 
> 赞同：3
> 
> 时间：2012-06-11T13:36:08.927
> 
> 标签：database, vb.net

基本上，我们有三个数据库可以从中获取数据。一个是 SQL Server 数据库，一个是 Access 数据库（连接起来特别烦人，因为我们必须映射网络驱动器等），最后一个是 Oracle 数据库，当 IT 最终授予我们权限时。

我正在考虑创建一个帮助函数，使查询这些数据库中的任何一个尽可能容易。理想情况下，我想创建一个二维数组

```
Dim myEasyResultArray(10,10) as String
myEasyResultArray = DatabaseHelper("Access", "SELECT * FROM Employee") 
```

这是一个好的设计决策吗？另外，我怎样才能让数组的大小合适？我可以这样做吗？

`Dim myEasyResultArray = DatabaseHelper("Access", "SELECT * FROM Employee")`

这应该是一个模块还是一个类？我真的不需要共享变量，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:17:22.280

我会尝试将所有数据访问逻辑放入数据访问层。理想情况下，这将位于单独的库和命名空间中，但并非必须如此。我会使用类，通常每个表/实体一个，并将所有类设计为无状态（因此您不必重用数据访问对象的同一实例，您可以在需要时随时实例化一个新实例访问数据库）。

我不会让它返回数组，而是让它返回数据对象（通常称为 DTO - 数据传输对象）。如果可能的话，我会保持 DTO 类尽可能干净，只包含公共属性而不包含方法。数据访问类都应该实现接口，以便可以创建每个接口的多个版本。一个用于 Access，一个用于 Oracle，一个用于 SQL，等等。然后，无论我需要在哪里访问数据库（希望只在我的业务层中，而不是在我的 UI 层中），我都会通过它们“请求适当的数据访问对象”通用”接口类型（因此需要一个工厂类将正确的具体数据访问对象类型注入我的业务对象）。

这是一个真正简单的 DTO 示例：

```
Public Class Employee
    Public Id As Guid
    Public Name As String
    Public StartDate As Date
End Class 
```

这是一个示例数据访问接口

```
Public Interface IEmployeeDataAccess
    Function GetEmployee(id As Guid) As Employee
    Function GetEmployees() As List(Of Employee)
End Interface 
```

下面是一个数据访问类的示例：

```
Public Class SqlEmployeeDataAccess
    Inherits IEmployeeDataAccess

    Public Function GetEmployee(id As Guid) As Employee Implements IEmployeeDataAccess.GetEmployee
        Dim employee As New Employee()
        ' Connect to SQL DB and populate employee DTO object
        Return employee
    End Function

    Public Function GetEmployees() As List(Of Employee) Implements IEmployeeDataAccess.GetEmployees
        Dim employees As New List(Of Employee)()
        ' Connect to SQL DB and populate list of employee DTO objects
        Return employees
    End Function
End Interface 
```

然后，您可能会调用类似的类`AccessEmployeeDataAccess`，`OracleEmployeeDataAccess`这些类也实现了 IEmployeeDataAccess 接口。然后，同样在数据访问层，我将为每个受支持的 DB 提供程序创建一个工厂类。我会让所有 DataAccess 工厂实现相同的接口，如下所示：

```
Public Interface IDataAccessFactory
    Function NewEmployeeDataAccess() As IEmployeeDataAccess
End Interface

Public Class SqlDataAccessFactory
    Implements IDataAccessFactory

    Public Function NewEmployeeDataAccess() As IEmployeeDataAccess
        Return New SqlEmployeeDataAccess()
    End Function
End Class 
```

然后，在我的商务舱中，我可能会做这样的事情：

```
Public Class EmployeeBusiness
    Public Sub New(employeeDataAccess As IEmployeeDataAcess)
        _employeeDataAccess = employeeDataAccess
    End Sub

    Private _employeeDataAccess As IEmployeeDataAcess

    Public Function GetEmployee(id As Guid) As Employee
        Return _employeeDataAccess.GetEmployee(id)
    End Function
End Class 
```

然后在我的商业工厂中，我会做这样的事情：

```
Public Class BusinessFactory
    Public Sub New()
        Select Case dataAccessType
            Case "SQL"
                _dataAccessFactory = New SqlDataAccessFactory()
            Case "Oracle"
                _dataAccessFactory = New OracleDataAccessFactory()
            Case "Access"
                _dataAccessFactory = New AccessDataAccessFactory()
        End Select
    End Sub

    _dataAccessFactory As IDataAccessFactory

    Public Function NewEmployeeBusiness() As IEmployeeBusiness
        Return New EmployeeBusiness(_dataAccessFactory.NewEmployeeDataAccess())
    End Function
End Class 
```

这可以通过使用一组可与任何数据库提供程序一起使用的数据访问对象来大大简化。为此，您只需要使用基本 ADO 类型，例如 IDbConnection 而不是 SqlConnection，以及 IDbCommand 而不是 SqlCommand。然后，只要 DataAccess 类需要一个，您的数据访问对象就可以请求一个可以创建新连接等的 DB Provider 工厂。但是，当您只是调用存储过程或其他东西时，这更容易做到。通常，尤其是当您在代码中动态构建 SQL 语句时，提供程序之间存在太多差异，因此您不能只对所有数据库提供程序使用相同的 DataAccess 类。

但是，这只是我...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:30:27.577

我看到你的提议存在一个大问题。

第一个是我经常看到程序员想要使用类似于这种形式的方法来构建数据库帮助：

```
DataTable GetData(string sql) 
```

这里的重点是该方法接受一个 sql 字符串，不提供查询参数。这是*错误*的。这是一种*反模式*，因为它鼓励您（几乎强迫您）将 sql*数据*编码为查询*代码*的一部分。您**必须**提供一些机制，以便将查询参​​数作为单独的数据正确传递。数组很常见，但这不是唯一的方法。我通常也不提供只接受字符串的重载，因为它不可避免地会导致滥用。如果要发送不带参数的查询，则传递一个空数组。这样就很清楚这就是您想要的，并且将鼓励使用您的数据库助手的任何人学习以正确的方式使用参数。

还有其他可以改进的地方，但在我看来，这是主要问题。

# javascript - $.getJSON 没有进入函数也没有得到任何数据

> ID：10981186
> 
> 赞同：0
> 
> 时间：2012-06-11T13:36:18.187
> 
> 标签：javascript, jquery, json

我有以下 jquery 代码：

```
$(document).ready(function() 
{
    $('button').click(function() 
    {
        $.getJSON('http://world.needforspeed.com/SpeedAPI/ws/game/nfsw/server/status?output=json', function(json)
        {
            alert("Entered getJSON");

            $("#output").append("working...");            
            if(json.status.indexOf("success")===0)
            {
                alert("success");
                $.each(json.results, function(i, data) 
                {
                    $("#output").append(data.text);
                });
            }else
            {
                alert("Failed to load url");
            }
        });
    });
}); 
```

从 url 中提取的 json 如下所示：

```
{"worldServerStatus": {
 "customMessage": "",
 "lastChangedDate":  {
  "date": 31,
  "day": 4,
  "hours": 17,
  "minutes": 48,
  "month": 4,
  "nanos": 0,
  "seconds": 32,
  "time": 1338486512000,
  "timezoneOffset": 0,
  "year": 112
 },
 "localizedMessage": "The servers are currently up and running.",
 "message": "ALL_SYSTEMS_GO",
 "status": "UP"
}} 
```

我的 jquery 只是拒绝输入 $.getJSON 函数，“enetered getJSON”警报不会触发。

怎么了？

解决了。谢谢你们 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:39:38.203

你检查控制台了吗？您可能遇到了访问控制来源错误

[jQuery.getJSON - 访问控制允许来源问题](https://stackoverflow.com/questions/6396623/jquery-getjson-access-control-allow-origin-issue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:40:19.830

您不能从另一个域获取 JSON，除非它们支持[CORS](https://developer.mozilla.org/en/http_access_control)，因为它们具有[相同的来源策略](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)。

api 支持[jsonp](http://api.jquery.com/jQuery.getJSON/#jsonp)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:46:03.130

我不认为你能做到这一点。对于跨域 ajax 请求，api 提供者必须使用 jsonp。您可以做的是为请求创建一个 php 文件。让我们调用文件 request.php

```
<?php   
/* gets the data from a URL */
function get_data($url)
{
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}

$query = $_SERVER['QUERY_STRING'];
$url = ('http://world.needforspeed.com/SpeedAPI/ws/game/nfsw/server/status?'.$query);

echo get_data($url);

?> 
```

然后在你的 javascript

```
$.getJSON('http://myserver.com/request.php?output=json', function(json) 
```

# android - 如何在android中向另一个视图添加视图？

> ID：10981188
> 
> 赞同：1
> 
> 时间：2012-06-11T13:36:20.060
> 
> 标签：android, view, add, android-view

有什么方法可以在指定位置向另一个视图添加视图？即我想在父视图的 (x, y) 位置添加一个子视图。请帮我。

```
 parentView.addView(childView); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:44:00.117

您可以通过使用`LayoutParams`in a`RelativeLayaout`

一个例子：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
params.leftMargin = 50; //Your X coordinate
params.topMargin = 60; //Your Y coordinate
parentView.addView(childView,params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:42:16.440

您不能在父级的 (x,y) 位置添加视图。但是，您可以欺骗它以实现以下目标：

1.  让你的父母成为`RelativeLayout`

2.  定义您的子视图`android:layout_alignParentLeft="true", android:layout_alignParentTop="true", android:layout_marginLeft="X" android:layout_marginTop="Y"`（或通过代码定义相同的东西`LayoutParams`）

3.  将您的孩子添加到您的父母：`parentView.addView(childView)`

# c# - 比较日期，寻找特定时间的下一个实例

> ID：10981189
> 
> 赞同：0
> 
> 时间：2012-06-11T13:36:22.027
> 
> 标签：c#, datetime, nunit, nservicebus

根据我的单元测试，我试图计算下一个 0400 小时实例的时间并返回它；

```
public void when_given_a_date_i_should_return_next_time_of_day_that_equals_04_hrs()
{
    var dateTimeNow = new DateTime(2012, 6, 11, 14, 22, 0);
    var dateTimeExpected = new DateTime(2012, 6, 12, 4, 0, 0);

    Assert.AreEqual(dateTimeExpected, t.CalculateIncremental(dateTimeNow));
} 
```

CalculateIncremental 的要点是每 24 小时，在凌晨 04:00 使用 RequestUtcTimeout 使用 nservicebus 发布一条消息。这再次触发一些功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:40:24.747

像这样的东西：

```
private static DateTime GetNext4AM(DateTime input)
{
    var result = new DateTime(input.Year, input.Month, input.Day, 4, 0, 0);

    if (result > input)
    {
        return result;
    }
    else
    {
        return result.AddDays(1);   
    }
} 
```

应该返回下一个 4 AM，可以是同一天（如果输入早于 04:00）或下一个。然而：

> 要点 [..] 是使用 RequestUtcTimeout 每 24 小时在凌晨 04:00 使用 nservicebus 发布一条消息。这再次触发一些功能。

您应该为此使用调度程序，例如[Quartz.NET](http://quartznet.sourceforge.net/)或只是 Windows 任务调度程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:39:29.050

检查 的小时`dateTimeNow`，如果小于 4，则返回其日期和凌晨 4 点作为小时。如果是 4 或更多，则返回第二天的日期，并将凌晨 4 点作为小时。决定你想用 4:00:00 做什么——无论是今天还是下一天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:40:31.370

```
var now = new DateTime();
var dateTimeExpected = new DateTime(now.GetFullYear(), 
    now.GetMonth(), now.GetDay(), 4, 0, 0);
if (dateTimeExpected.CompareTo(now) > 0)
    dateTimeExpected = dateTimeExpected.AddDays(1); 
```

# jsp - 使用 servlet 和 JSP 创建示例登录页面？

> ID：10981191
> 
> 赞同：4
> 
> 时间：2012-06-11T13:36:27.940
> 
> 标签：jsp, servlets

我开发了一个用于验证用户名和密码的示例登录页面。如果用户提供了正确的凭据，该页面将导航到其他页面，否则将一条消息从该页面返回`servlet`到相同的登录页面。

我在`code`这里附上了样本：

### FirstJSP.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>`
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org   /TR/html4/loose.dtd">`
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Insert title here</title>`
    </head>
    <body>
        <form action="Login" method="post">
            <input type="text" name="Name"/><br>
            <input type="password" name=Pass><br><br><br>
            <input type="submit" value="submit"/><br>
            <%if(request.getAttribute("message")!=(""))
            out.println(request.getAttribute("message"));
            else
            out.println("");%>
            <h1>Hi This is JSP sample code </h1>
            <font color="blue" size="25">
            <marquee>Please login to Work with JSP</marquee></font>
            <%java.text.DateFormat df = new java.text.SimpleDateFormat("MM/dd/yyyy"); %>
            <h1>Current Date: <%= df.format(new java.util.Date()) %> </h1>
        </form>
    </body>
</html> 
```

和`servlet`代码，Login.java：

```
package com.controller;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public class Login extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public Login() {
        super();
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("Name");
        String password = request.getParameter("Pass");
        response.setContentType("text/html");
        if(username.equals("sugan") && password.equals("raj")) {
            response.getWriter().println("<html><body><Marquee>Welcome to JSP!!!</marquee></body></html>");                
        } 
        else {                
            String message = "OOps!!! Invalid Username/Password";
            request.setAttribute("message", message);
            request.getRequestDispatcher("/FirstJSP.jsp").forward(request, response);                
        }
    }
} 
```

它工作正常，但在加载登录页面时它会自动显示`Null`. 然后，如果用户提供了错误的凭据，它会显示实际消息。如何`Null`在运行时禁用消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:42:32.330

您正在使用 . 将消息与空字符串进行比较`==`。

首先，您的比较是错误的，因为消息将为空（而不是空字符串）。

其次，这是错误的，因为 Objects 必须与`equals()`而不是与进行比较`==`。

第三，这是错误的，因为您应该避免在 JSP 中使用 scriptlet，而应使用 JSP EL、JSTL 和其他自定义标签：

```
<c:id test="${!empty message}">
    <c:out value="${message}"/>
</c:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:39:16.133

您并没有真正使用 doGet() 方法。当您打开页面时，它会发出 GET 请求，而不是 POST。

尝试将 doPost() 更改为 service() ...然后您使用相同的方法来处理 GET 和 POST 请求。

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T05:15:22.650

如我所见，您正在使用 == 将消息与空字符串进行比较。

编写完整的代码非常困难，但我可以告诉代码流 - 首先，在将返回连接的内部创建 db 类和方法。其次，创建一个 serverlet(ex-login.java) 并将该 db 类导入该 servlet。第三，在 new 运算符的帮助下创建导入的 db 类的实例并调用该 db 类的连接方法。第四，创建prepared statement & execute statement & 将此代码放入try catch块中进行异常处理。在try块中使用if-else条件根据成功或失败导航您的登录页面。

我希望，它会帮助你。如果有任何问题，请恢复。

尼基尔·帕哈里亚

# python - 如何从从perl调用的python传递字符串？

> ID：10981196
> 
> 赞同：3
> 
> 时间：2012-06-11T13:36:47.223
> 
> 标签：python, perl

假设 perl 代码是这样的......

```
open(STDOUT, ">$PName") || die "Can't redirect stdout";
$status = system("python Example.py $PName.txt"); 
```

（取自[http://www.linuxquestions.org/questions/programming-9/perl-script-call-python-linux-551063/](http://www.linuxquestions.org/questions/programming-9/perl-script-call-python-linux-551063/)）

我必须在 python 中做什么才能将字符串传递给 perl 脚本？

我需要简单地返回字符串吗？或打印到控制台？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:40:41.900

您可以打印到控制台，并在 perl 中使用：

```
my $from_py = `python foo.py bar`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:40:59.987

该`system`命令在 Perl 中对于捕获命令的输出没有用。您应该使用反引号来执行命令并写入 Python 脚本中的标准输出。

```
#-- returns one string
$result = `command arg1 arg2`;

#-- returns a list of strings
@result = `command arg2 arg2`; 
```

有关更多信息，请参阅下面的链接源。

来源：[在 Perl 中执行外部命令](http://www.perlhowto.com/executing_external_commands)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:01:02.787

最简单的方法是使用[反引号 ( ````)](http://perldoc.perl.org/perlop.html#qx/STRING/)，如

```
my $output = `python Example.py $PName.txt`;
print "Backticks:\n", $output; 
```

同义方法涉及[`qx//`](http://perldoc.perl.org/perlop.html#qx/STRING/).

```
my $output = qx/python Example.py $PName.txt/;
print "Backticks:\n", $output; 
```

要读取每一行，请从 Python 子进程中打开一个管道。

```
print "Pipe:\n";
open my $fh, "python Example.py $PName.txt |";
while (<$fh>) {
  print "Perl got: ", $_;
}
close $fh or warn "$0: close: $!"; 
```

如 perlipc 文档的[“安全管道打开”部分](http://perldoc.perl.org/perlipc.html#Safe-Pipe-Opens)所述，您可以通过将命令拆分为参数来绕过 shell。

```
open my $fh, "-|", "python", "Example.py", "$PName.txt"; 
```

输出：

```
反引号：
Python 程序：Example.py
参数：pname-value.txt

管道：
Perl 得到：Python 程序：Example.py
Perl 得到： 参数：pname-value.txt
```

# excel - 在两列中比较并添加值

> ID：10981197
> 
> 赞同：1
> 
> 时间：2012-06-11T13:36:54.810
> 
> 标签：excel

我有 2 列如下所示：

```
Column 1   Column 2
1             x
x             2
2             2
x             x
1             2 
```

我想做两件事；

1.  对于每行匹配（第 n 行第 1 行 = 第 n 行第 2 列），如果匹配，则应将第 1 列中的单元格 n 标记为绿色，否则标记为红色。
2.  它应该创建一个总和单元格，其中每个匹配值 1 分，在这种情况下，第 1 列应该得到 2 分。

这甚至可以用 excel 实现吗？如果可以，它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:11:45.590

对于您问题的第一部分：

> 如果匹配，则应将第 1 列中的单元格 n 标记为绿色，如果不匹配则标记为红色

您可以使用[条件格式](http://www.contextures.com/xlCondFormat01.html)来做到这一点。

前任：

假设 A 列和 B 列的值从第 2 行开始。

如果 A 列值与同一行中 B 列中的相应值匹配，则以下条件格式将以绿色突出显示 A 列值，否则以红色突出显示。

![条件格式示例](../Images/564064c245351fb2e9fe5241d655eadc.png)

突出显示 A 列中的值，然后应用此条件格式。

对于你问题的第二部分

> 它应该创建一个总和单元格，其中每个匹配值 1 分，在这种情况下，第 1 列应该导致 2 分

以下数组公式将统计所有匹配项并显示有多少：

**=SUM(IF(A2:A6=B2:B6,1,0))**

再次假设我们与您的样本数据在 A 列和 B 列中。

请记住使用++[提交](http://www.mrexcel.com/articles/CSE-array-formulas-excel.php)此公式。`Ctrl``Shift``Enter`

根据[andy holaday](https://stackoverflow.com/questions/10981197/compare-in-two-columns-and-add-value/10982853#comment14356057_10982853)的评论，这是另一个可行的公式：

**=SUMPRODUCT(N(A2:A6=B2:B6))**
或
**=SUMPRODUCT(--(A2:A6=B2:B6))**

这些不是 CSE 公式，因此您不需要`Ctrl`++`Shift`来`Enter`提交它们。

# java - dom4j-java-如何获取根中具有特定元素名称的所有元素（父或子）

> ID：10981198
> 
> 赞同：0
> 
> 时间：2012-06-11T13:36:55.550
> 
> 标签：java, xml, dom4j

我想获取 xml 中具有特定名称的元素的数量，例如。名称=“同时”）

问题是，如果我使用以下代码——我只会得到具有此名称的顶级元素——

```
 for ( Iterator i = root.elementIterator( "while" ); i.hasNext(); ) {
            Element foo = (Element) i.next(); 
```

但是任何较低级别的“while”元素都不是迭代器的一部分......

获取具有 name="while" 的所有元素（无论是顶级还是低级）的最有效方法是什么？为此，我是否必须解析文档中的所有元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:44:19.087

您可以为此使用 XPath`//while`或`name()`函数和通配符节点`*`：`//*[name() = 'while']`

```
List list = document.selectNodes("//*[name() = 'while']"); // or "//while"
int numberOfNodes = list.size();
for (Iterator iter = list.iterator(); iter.hasNext(); ) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T14:28:57.240

这个正则表达式对我有用：

```
document.selectNodes(".//*") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T11:18:59.563

Element Iterator 仅适用于 xPath 中的下一级。为了能够解析所有 XML 并获取所有元素，您必须使用一些递归。例如，下一个代码将返回具有“名称”的所有节点的列表

```
public List<Element> getElementsByName(String name, Element parent, List<Element> elementList)
{
    if (elementList == null)
        elementList = new ArrayList<Element>();

    for ( Iterator i = parent.elementIterator(); i.hasNext(); ) {
        Element current = (Element) i.next();
        if (current.getName().equalsIgnoreCase(name))
        {
            elementList.add(current);
        }

        getElementsByName(name, current, elementList);
    }
    return elementList;
} 
```

# sql - 使用字符串作为 PK 与使用 GUID 或具有名称唯一约束的 int Id

> ID：10981200
> 
> 赞同：0
> 
> 时间：2012-06-11T13:37:06.630
> 
> 标签：sql, database-design, relational-database

嗨，我想知道对于您的记录必须是唯一的表的最佳做法是什么。我已经看到了两种方法：使用主键或向列添加唯一约束。

如果您使用主键，那么使用 varchar(*) 之类的主键是否是不好的做法？这对性能的影响是否足以导致问题？是否最好使用对用户名具有唯一约束的整数 id？

我看到了一些其他因素可能会影响选择列作为 PK 与 Unique。我对这些正确吗？

PK - 列应该是永远不需要更改的列

唯一 - 列可以稍后更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:48:50.807

在 UserName 上设置主键并不是最好的主意，但它的性能并没有您想象的那么糟糕。

最好的办法是使用 ID (INT) 作为 PRIMARY KEY，使用 UserName 作为 UNIQUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:00:41.070

用户名会随着时间而变化，这就是为什么它们不适合进行 PK，尤其是因为您极有可能有与用户名相关联的子记录。例如，假设我的用户名包含我真实姓名的一些变体。如果我后来离婚并恢复了我的娘家姓，我最不想做的就是提醒我结婚的那个 SOB，所以我改变了我的用户名。你真的想改变我在过去十年中发布的 200 万个帖子吗？我不这么认为。

是的，字符串比较速度较慢，但​​这可能是也可能不是问题，具体取决于数据库将获得的总体操作量。少于 200 个用户的小型数据库，可能不是问题，拥有数百万用户的 Internet 站点，更可能是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:31:33.320

正如其他人已经讨论过的那样，这可能是一个好主意，也可能不是一个好主意。让我再补充一个细节......

> 我看到了一些其他因素可能会影响选择列作为 PK 与 Unique。

主要区别通常与[聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)有关。大多数 DBMS（支持集群）自动使用 PK 作为集群索引。例如 MySQL/InnoDB**总是**集群数据并且你不能关闭它，而 MS SQL Server 默认集群（你必须使用特殊的语法来关闭它）。

如果您选择使用集群（或被您的 DBMS 强制），通常使用更少的索引会更好（例如，请参阅[本文](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)中的“集群的缺点” ），即使会导致“更胖”的外键。

# java - Java将日期转换为EST时区以尊重DST

> ID：10981203
> 
> 赞同：1
> 
> 时间：2012-06-11T13:37:09.480
> 
> 标签：java, datetime, timezone

我想将当前日期转换为美国/蒙特利尔时区。我这样做是这样的：

```
Date date = new Date();
TimeZone timeZone = TimeZone.getTimeZone ("America/Montreal");
Calendar cal = new GregorianCalendar(timeZone);
cal.setTime(date);
String whatIWant = "" + cal.get(Calendar.HOUR_OF_DAY) + ':'+ 
                   cal.get(Calendar.MINUTE)+ ':'+ cal.get(Calendar.SECOND);

log.info(whatIWant); 
```

转换很好，但我想知道这段代码有多健壮。没有夏令时会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T13:43:51.280

那个代码很好。Java 自动将冬季时间或夏季时间考虑在内。

您还可以通过使用`DateFormat`对象将日期转换为字符串来执行此操作，并在对象上设置所需的时区`DateFormat`：

```
Date date = new Date();

DateFormat df = new SimpleDateFormat("HH:mm:ss");

// Tell the DateFormat that you want the time in this timezone
df.setTimeZone(TimeZone.getTimeZone("America/Montreal"));

String whatIWant = df.format(date); 
```

# c# - WebBrowser Control 导致整个应用程序变得无响应

> ID：10981206
> 
> 赞同：5
> 
> 时间：2012-06-11T13:37:23.137
> 
> 标签：c#, browser

我有一个带有嵌入式 Web 浏览器的 C# .NET 3.5 应用程序。浏览器旨在指向远程站点（而不是任何本地站点）。一切正常，但是当页面响应缓慢时，这会导致我的整个应用程序在页面加载之前变得无响应。

我不介意浏览器在做它的事情时没有响应，但应用程序也远非理想。

有什么好的方法可以防止这种情况吗？在单独的线程上运行 WebBrowser 是否有益 - 这有点超出我现在的技能范围，我不认为 WebBrowser 控件真的喜欢多线程？但如果需要，我可以学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:56:28.757

有关如何在单独的线程上运行它的解决方案，请参阅此问题的答案 #2：[BackgroundWorker 和 WebBrowser Control](https://stackoverflow.com/questions/2491236/backgroundworker-and-webbrowser-control)

您也不妨阅读答案 #1，它解释了您所看到的行为（WebBrowser 控件阻止 UI 标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:24:55.627

碰巧我发现这个的根本原因是我的应用程序以管理员身份运行。使用 Internet Explorer 时出现了完全相同的问题 - 因此，我只是重写了需要管理员权限的位，因此我现在不再看到原始问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T04:40:17.513

这只发生在 win7 上；我使用 fiddler2 来监控 HTTP/HTTPS 流量。我找到嵌入式 Web 浏览器来访问这个网站：[http://ctldl.windowsupdate.com/msdownload/update/v3/static/trustedr/en/disallowedcertstl。 cab?50ff94e72ac1a75c；](http://ctldl.windowsupdate.com/msdownload/update/v3/static/trustedr/en/disallowedcertstl.cab?50ff94e72ac1a75c;the)解决方法如下： http: [//support.microsoft.com/kb/2730040/en](http://support.microsoft.com/kb/2730040/en)（方法2或方法3）。你可以试试。其他你可以使用.net framework4.0，然后你就避风港不是这个问题。

# git - github 分叉和上游更改

> ID：10981209
> 
> 赞同：1
> 
> 时间：2012-06-11T13:37:28.407
> 
> 标签：git, open-source, github

假设我想为一个名为`SuperOSS`. 我将创建自己的分叉，我们称之为`MyOSS`。我将对`MyOSS`repo 进行更改并提出拉取请求。那时我的 git repo 看起来像这样：

```
remote.origin = MyOSS
remote.upstream = SuperOSS 
```

假设我的拉取请求永远不会被添加并且几个月过去了。那时，我需要做什么来提交另一个拉取请求？我是否需要重新`SuperOSS`设置基础`MyOSS`并覆盖我从未添加的拉取请求？有没有更好的办法？

起初我打算删除`MyOSS`repo 并重新分叉`SuperOSS`，但肯定有比这更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:41:38.457

理想情况下，您的主人应该是干净的（意思是反映原始回购状态），并且您的功能建议在每个功能的单独分支中。这样，如果您的功能永远不会被接受，它不会阻止您从 master 启动另一个功能分支。

# c# - 以编程方式禁用 Outlook 2003 Toast 通知？

> ID：10981210
> 
> 赞同：0
> 
> 时间：2012-06-11T13:37:29.153
> 
> 标签：c#, outlook, outlook-2003

Hopefullay 一个简单的答案，但是否可以通过编程方式禁用 Outlook 2003 toast 弹出通知？

注意：我在 c# 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:41:06.890

```
HKEY_CURRENT_USER\Software\Microsoft\Office\<version number here>\Outlook\Preferences\NewmailDesktopAlerts 
```

将其更改为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:20:27.897

感谢 Frank White 给了我最初的线索 :)

这是我问题的完整答案。

```
using Microsoft.Win32;

//this will create the subkey or if it already exists will just get the location. there is //no getsubkey in the registryclass

RegistryKey rkRegOutlookPreferences = Registry.CurrentUser.CreateSubKey(@"Software\Microsoft\Office\11.0\Outlook\Preferences");

//this will add in or change a value in that subkey

rkRegOutlookPreferences.SetValue("NewmailDesktopAlerts", "0", RegistryValueKind.DWord);

//there is also getValue; this will return a null if the value doesnt exist

rkRegOutlookPreferences.GetValue("NewmailDesktopAlerts")

//and deleting 

rkRegOutlookPreferences.DeleteValue("NewmailDesktopAlerts"); 
```

还有更多，但这完成了我的问题的完整答案。再次感谢弗兰克怀特给我的第一步。

# php - 直接加入zend框架

> ID：10981215
> 
> 赞同：0
> 
> 时间：2012-06-11T13:37:46.783
> 
> 标签：php, mysql, zend-framework, join

我使用 Zend 框架/mysql 使用 Zend_Db_Table::getDefaultAdapter 使用左连接。这也支持直接加入吗？如果是，我该怎么做？我尝试检查文档。找不到。谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T18:03:11.347

我使用 Zend_Db_Select 的这个技巧：

```
$select->from($tableName, array(new Zend_Db_Expr(' STRAIGHT_JOIN ' . $tableName . '.*')); 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:40:32.597

看 Zend 源码，似乎是不支持`STRAIGHT_JOIN`when using的`Zend_Db_Select`。但是，您可以自己编写 SQL 语句，然后使用 DB 适配器直接执行它：

```
$db = Zend_Db_Table::getDefaultAdapter();

//Taken from: http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.select.fetchall
$sql = 'SELECT * FROM bugs WHERE bug_id = ?';
$result = $db->fetchAll($sql, 2); 
```

如果您已经使用 进行了复杂的查询`Zend_Db_Select`，则可以使用该`__toString()`方法并将该字符串用作修改后的查询的基础。

```
//Taken from: http://framework.zend.com/manual/en/zend.db.select.html#zend.db.select.execute.tostring
$select = $db->select()->from('products');
$sql = $select->__toString(); 
```

# ios - 在 iOS 上的 flex 中更改 StageVideo 的音量

> ID：10981226
> 
> 赞同：2
> 
> 时间：2012-06-11T13:38:30.653
> 
> 标签：ios, apache-flex, mobile, netstream

有没有办法更改/设置我在 Flex 4.6 for iOS 中添加到 StageVideo 的视频音量？我向 StageVideo 添加了一个网络流。当我更改 soundTransform 音量时，我设备上的音量根本不会改变。

即使我设置了 SoundMixer soundtransform-volume，它也不会在设备上改变。

我认为通过在 iOS 设备上设置 netStream 的音量存在一个小问题，但我无法找到确切的问题。

提前致谢！

```
var videoPath:String = "mymovie.mp4";                   
var netConnection:NetConnection = new NetConnection();
netConnection.addEventListener(NetStatusEvent.NET_STATUS, netConnectionStatusHandler);
netConnection.connect(null);

var netStream:NetStream = new NetStream(netConnection);
netStream.addEventListener(NetStatusEvent.NET_STATUS, netStreamStatusHandler);
netStream.play(videoPath);

var obj:Object = new Object();                  
netStream.client = obj;                 
netStream.soundTransform = new SoundTransform(0);           
obj.onMetaData = onMetaData;

var vidDisplay:StageVideo = stage.stageVideos[0];                   
vidDisplay.viewPort = new Rectangle(0, 0, stage.stageWidth, stage.stageWidth);
vidDisplay.attachNetStream(netStream); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:28:05.343

您需要使用原生扩展来控制 iOS 音量。我推荐 Volume Native 扩展[https://github.com/nweber/SystemVolumeNativeExtension](https://github.com/nweber/SystemVolumeNativeExtension)。将音量（值）设置为中间的简单示例：

```
VolumeController.instance.setVolume( 0.5 ) 
```

# php - Delphi、MSXML2.XMLHTTP、PHP 和 Win-1250 字符集编码

> ID：10981227
> 
> 赞同：1
> 
> 时间：2012-06-11T13:38:33.257
> 
> 标签：php, xml, delphi, unicode, non-ascii-characters

喂！

我试图在 Windows 中创建网络服务。

客户端是Delphi 6，调用MSXML2.XMLHTTP，另一端是PHP。

首先我测试：我可以接收匈牙利 XML 吗？

PHP 源代码是 UTF-8 编码文件 (PSPAD)。

```
$s = 'alma árvíztűrő tükörfúrógép beta';
$doc = new DOMDocument('1.0', 'utf-8');
$doc->formatOutput = true;
$m = $doc->createElement('package');
$doc->appendChild($m);
$n = $doc->createElement('Msg');
$m->appendChild($n);
$n->nodeValue = $s;
$xs = $doc->saveXML();
header('Content-Type: text/xml');
echo($xs); 
```

这个包我完全在Delphi方面得到的，口音还可以。

因此，我尝试从 xml 注入数据（将 xml 发布到带有重音符号的 php）。

```
global $HTTP_RAW_POST_DATA;
$xmlstr = $HTTP_RAW_POST_DATA;
$xml = new SimpleXMLElement($xmlstr);
$msg = $xml->msg;
#$msg = 'ÁRVÍZTŰRŐ TÜKÖRFÚRÓGÉP'; 
```

好的，我得到了“msg”字段，但是我尝试转换它，每次我得到一些转换通知，结果与我直接设置变量时的结果不同......

调试是：

```
echo(utfCharToNumber($sinput).'<br>');
echo(utfCharToNumber($sdefined).'<br>');

Input:   195[   ]8286195141908419717682197[   ]328419
Defined: 195[129]8286195141908419717682197[144]328419
Input:   5156751951508270195154821951477119513780<br>
Defined: 5156751951508270195154821951477119513780<br> 
```

如您所见，当我从 MSXML2 转换输入时，变量中有两个孔。

我真的不明白这个。

从输入 XML 中获取数据时，我无法重现与直接在 PHP 代码中设置时相同的 XML 输出...

为什么？

感谢您的每一个帮助、想法、链接、文档、小例子！

dd

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:26:31.990

由于您没有包含 Delphi 源，我怀疑您是直接从字符串发布数据作为请求的内容主体，在 Delphi 6 中默认情况下以当前的 ANSI 编码编码。我建议您`Utf8Encode`之前在字符串上使用您将其添加为请求的正文数据，或添加带有 ANSI 编码名称的“内容编码”请求标头（如果我没记错的话[GetLocaleInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373858%28v=vs.85%29.aspx)可以给您这个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:34:57.737

问题的根源在于 Delphi 代码。

之前我使用 AnsiToUTF8 对 XML 文本进行编码。但我认为 COM 对象使用的是 UTF16。

工作代码是这样的：

```
procedure TForm1.Button4Click(Sender: TObject);
var
    mhttp : variant;
    ws : WideString;
    tosend : OleVariant;
    xml : TXMLDocument;
    n : IXMLNode;
begin
    mhttp := CreateOleObject('MSXML2.XMLHTTP');
    mhttp.Open('POST', 'http://127.0.0.1/test_xmlgen.php', False);

    xml := CreateANewDocument(Self, '', 'a');
    n := xml.DocumentElement.AddChild('msg');
    n.NodeValue := 'ÁRVÍZTŰRŐ TÜKÖRFÚRÓGÉP';
    xml.SaveToXML(ws);
    tosend := ws;

    mhttp.send(tosend);
    Memo1.Lines.Text :=
        IntToStr(mhttp.Status) + #13 +
        mhttp.responseText + #13;
end; 
```

这可以重新发送我发送的 XML - 带有良好的口音。

感谢您的帮助：dd

# android - 在使用广播接收器和 ActionBar 中的选项卡开发 UI 中使用 NPE

> ID：10981228
> 
> 赞同：0
> 
> 时间：2012-06-11T13:38:33.260
> 
> 标签：android, tabs, nullpointerexception, broadcastreceiver, android-actionbar

我正在使用`ActionBar Tabs`. `Android 4`我有 5 个`Broadcast receivers`，它们都更新了 UI 的一部分。我的应用程序中有两个选项卡，两个选项卡都有不同的 UI 关联（即两个选项卡有不同的`xml`文件关联，这将`inflated`根据选项卡选择）。对于每个选项卡，我都在膨胀一个`fragment`.

最初，我只显示一个选项卡。单击与该选项卡关联的 UI 中的按钮时，我添加了另一个选项卡，并收到 5 个广播接收器。我以任何顺序获得广播接收器。现在说有以下广播接收器：`A B C D E`

```
A, B, D and E updates the UI which is part of Tab 1\.   

C updates the UI which is part of Tab 2. 
```

每当创建一个新选项卡时，它的 UI 都会被前一个选项卡的 UI 替换，所以当比如说`A and B`被调用时，它们会更新来自 的 UI `Tab 1`，但是当`C`接收到时，UI 现在会被`Tab2's`UI 替换，并且它会更新 UI，但是当`D and E`收到时，他们会尝试更新 的 UI `tab 1`，但由于现在已膨胀，因此我在尝试进行更改`tab 2`的语句上出现空指针异常。`D and E`

所以请告诉我，我应该如何根据`broadcasters`？

**更新：**现在，我在以下方面得到了 NPE：这是在我的一个接收器内，在这里我正在创建新选项卡并希望从广播接收器中插入一个表。

```
ActionBar actionbar = getActionBar();
actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
ActionBar.Tab bTab = actionbar.newTab().setText("B");
bFragment = new BFragment();
bTab.setTabListener(new MyTabsListener(bFragment));
actionbar.addTab(bTab, true);

final LinearLayout linearLayout = (LinearLayout) findViewById(R.id.mdsTable); // NPE linearLayout is not getting initialized. 
```

我不明白为什么会这样，因为我已经实现`MyTabsListener`了：

```
class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(StartActivity.appContext, "Reselected!",
                Toast.LENGTH_LONG).show();
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }
} 
```

**更新：**如果我评论接收器部分（只是检查我是否可以动态创建选项卡）并且如果我在接收器之外编写相同的东西，它运行没有任何问题。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:49:32.260

好吧，很可能您没有将带有 id 的视图关联`mdsTable`到当前布局。仅凭这些代码示例很难确定问题的根源。哪个布局`mdsTable`在其中，你在哪里膨胀这个布局？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:13:41.140

我已经通过以下方式解决了这个问题：

当我`BroadCastReceivers`被调用时，我保存`onReceive()`方法中传入的所有数据，当用户移动到任何选项卡时，它`onCreateView()`被调用，所以我在这个方法中更新 UI，所以没有问题直接从 Tab2 直接进入 Tab1，它会一切都基于用户的选择，当他想从 tab2 转到 Tab1 时，UI 将得到更新并因此`NPE`得到解决。

# c# - 在 C# 中将全部转换为 JPG

> ID：10981230
> 
> 赞同：2
> 
> 时间：2012-06-11T13:38:45.847
> 
> 标签：c#, png, type-conversion, jpeg, bmp

我有如下功能：

```
 // Convert To JPG 
    // 
    public string AlltoJPG(FileInfo foo)
    {
        // Get file extension
        string fileExtension = foo.Extension;

        // Get file name without extenstion
        string fileName = foo.Name.Replace(foo.Extension, string.Empty) + ".jpg";

        /*------------------------------------------------------------------------*/

        /// <Check for PNG File Format>
        if (fileExtension == ".png" || fileExtension == ".PNG")
        {
            System.Drawing.Image img = System.Drawing.Image.FromFile(foo.FullName);

            // Assumes img is the PNG you are converting
            using (Bitmap b = new Bitmap(img.Width, img.Height))
            {
                using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(b))
                {
                    g.Clear(System.Drawing.Color.White);
                    g.DrawImageUnscaled(img, 0, 0);
                }

                // Save the image as a JPG
                b.Save(fileName, System.Drawing.Imaging.ImageFormat.Jpeg);
            }

        }

        /*------------------------------------------------------------------------*/

        /// <Check for GIF File Format>
        if (fileExtension == ".gif" || fileExtension == ".GIF")
        {
            System.Drawing.Image img = System.Drawing.Image.FromFile(foo.FullName);

            // Construct a bitmap from the image resource.
            Bitmap bmp1 = new Bitmap(img.Width, img.Height);

            // Save the image as a JPG
            bmp1.Save(fileName, System.Drawing.Imaging.ImageFormat.Jpeg);
        }

        /*------------------------------------------------------------------------*/

        /// <Check for BMP File Format>
        if (fileExtension == ".bmp" || fileExtension == ".BMP")
        {
            System.Drawing.Image img = System.Drawing.Image.FromFile(foo.FullName);

            // Construct a bitmap from the image resource.
            Bitmap bmp1 = new Bitmap(img.Width, img.Height);

            // Save the image as a JPG
            bmp1.Save(fileName, System.Drawing.Imaging.ImageFormat.Jpeg);
        }

        /*------------------------------------------------------------------------*/

        /// <Check for TIFF File Format>
        if (fileExtension == ".tiff" || fileExtension == ".TIFF")
        {
            System.Drawing.Image img = System.Drawing.Image.FromFile(foo.FullName);

            // Construct a bitmap from the image resource.
            Bitmap bmp1 = new Bitmap(img.Width, img.Height);

            // Save the image as a JPG
            bmp1.Save(fileName, System.Drawing.Imaging.ImageFormat.Jpeg);
        }

        /*------------------------------------------------------------------------*/
        fileName = foo.DirectoryName + "\\" + fileName;
        return fileName;
    } 
```

我正在尝试将`bmp`, `png`, `gif`,`tiff`文件格式转换为`jpg`, 但`GDI+`如下所示：

> System.OutOfMemoryException 未处理
> Message=Bellek Yetersiz。
> Source=System.Drawing
> StackTrace:
> konum: System.Drawing.Image.FromFile(String filename, Boolean useEmbeddedColorManagement)
> konum: System.Drawing.Image.FromFile(String filename)

`PNG`那么我怎样才能避免这种情况并至少将`BMP`文件转换为`JPG`？

这是错误的图片：

![在此处输入图像描述](../Images/8f9b8703b0168f449c80f4b0afc29d86.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:58:35.890

我发现了问题！它是由 PNG alpha 通道引起的。

感谢max，下面的链接解决了我的问题：

[如何将透明 PNG 加载到位图并忽略 alpha 通道](https://stackoverflow.com/questions/6809442/how-to-load-transparent-png-to-bitmap-and-ignore-alpha-channel)

* * *

```
public static void SetAlpha(this Bitmap bmp, byte alpha)
{
    if(bmp == null) throw new ArgumentNullException("bmp");

    var data = bmp.LockBits(
        new Rectangle(0, 0, bmp.Width, bmp.Height),
        System.Drawing.Imaging.ImageLockMode.ReadWrite,
        System.Drawing.Imaging.PixelFormat.Format32bppArgb);

    var line = data.Scan0;
    var eof = line + data.Height * data.Stride;
    while(line != eof)
    {
        var pixelAlpha = line + 3;
        var eol = pixelAlpha + data.Width * 4;
        while(pixelAlpha != eol)
        {
            System.Runtime.InteropServices.Marshal.WriteByte(
                pixelAlpha, alpha);
            pixelAlpha += 4;
        }
        line += data.Stride;
    }
    bmp.UnlockBits(data);
} 
```

用法：

```
var pngImage = new Bitmap("filename.png");
pngImage.SetAlpha(255); 
```

* * *

设置 alpha 后，它开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:02:01.577

gif、png 和 tiff 代码块缺少`using`子句并且正在泄漏 GDI 引用。

# mysql - 如果数据库中没有条目，则避免 JSP 表文本框中的空值

> ID：10981232
> 
> 赞同：0
> 
> 时间：2012-06-11T13:38:47.303
> 
> 标签：mysql, jsp

```
String sql="SELECT a.ID,a.VISITOR_TEXT,a.COMPANY_TEXT,a.CONTACT,a.PERSON_TO_MEET,a.DEPARTMENT_TEXT,a.FLOOR,b.BELONGING_TYPE,b.BELONGING_TEXT ,a.INTIME, c.EXIT_TIME FROM tm_visitor a  LEFT JOIN tm_belonging b ON b.BID=a.ID LEFT JOIN tm_exit c ON c.ID=a.ID limit "+i+",10";

System.out.println(sql);
ResultSet rs=st.executeQuery(sql);
while(rs.next())
    {
    ar.add(rs.getInt("ID"));
    ar.add(rs.getObject("VISITOR_TEXT"));
    ar.add(rs.getObject("COMPANY_TEXT"));
    ar.add(rs.getObject("CONTACT"));
    ar.add(rs.getObject("PERSON_TO_MEET"));
    ar.add(rs.getObject("DEPARTMENT_TEXT"));
    ar.add(rs.getObject("FLOOR"));
    ar.add(rs.getObject("BELONGING_TYPE"));
    ar.add(rs.getObject("BELONGING_TEXT"));
    ar.add(rs.getObject("INTIME"));
    ar.add(rs.getObject("EXIT_TIME"));

    }

<tr>
    <td align="center"><input type="text" name="id" value="<%=itr.next()%>" readonly size="15"></td>
    <td align="center"><input type="text" name="visitorname" value="<%=itr.next()%>" readonly size="20"></td>
    <td align="center"><input type="text" name="company" value="<%=itr.next()%>" readonly size="20"></td>
    <td align="center"><input type="text" name="contact" value="<%=itr.next()%>" readonly size="10"></td>
    <td align="center"><input type="text" name="whometomeet" value="<%=itr.next()%>" readonly size="20"></td>
    <td align="center"><input type="text" name="department" value="<%=itr.next()%>" readonly size="20"></td>
    <td align="center"><input type="text" name="floor" value="<%=itr.next()%>" readonly size="7"></td>
    <td align="center"><input type="text" name="btype" value="<%=itr.next()%>" readonly size="15"></td>
    <td align="center"><input type="text" name="bel" value="<%=itr.next()%>" readonly size="15"></td>
    <td align="center"><input type="text" name="intime" value="<%=itr.next()%>" readonly size="20"></td>
    <td align="center"><input type="text" name="exittime" value="<%=itr.next()%>" readonly size="20"></td>

</tr> 
```

执行上述查询后，如果 tm_exit.EXIT_TIME 中的值不存在，则在 JSP 表文本框中显示 NULL 我该如何避免这种情况

我试过了：

```
<%!
String blanknull(String s) {
  return (s == null) ? "" : s;
}
%> 
```

但没有用，请帮忙？

这是我用来获取数据的查询

```
SELECT a.ID,a.VISITOR_TEXT,a.COMPANY_TEXT,a.CONTACT,a.PERSON_TO_MEET,a.DEPARTMENT_TEXT,‌​a.FLOOR,b.BELONG ING_TYPE,b.BELONGING_TEXT ,a.INTIME, c.(ifnull(EXIT_TIME,'NA')) as EXIT_TIME FROM tm_visitor a LEFT JOIN tm_b elonging b ON b.BID=a.ID LEFT JOIN tm_exit c ON c.ID=a.ID; 
```

但给出以下错误

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 '(ifnull(EXIT_TIME,'NA')) 作为 EXIT_TIME FROM tm_visitor a LEFT JOI N tm_belonging 附近使用的正确语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:50:32.773

你可以避免空值，使用 MySQL 的 ifnull 函数，

具有空值的表：

```
mysql> select * from test;
+------+---------+
| id   | name    |
+------+---------+
|    1 | Jcho360 |
|    1 | NULL    |
+------+---------+
2 rows in set (0.00 sec) 
```

带有 IFNULL 函数的表

```
mysql> select id, ifnull(name,'Its NOT NULL')as name from test;
+------+--------------+
| id   | name         |
+------+--------------+
|    1 | Jcho360      |
|    1 | Its NOT NULL |
+------+--------------+
2 rows in set (0.00 sec) 
```

而不是 'its NOT NULL' 你可以放 ' ' 或其他任何东西，你不会再有 null

编辑：

尝试

```
String sql="SELECT a.ID,a.VISITOR_TEXT,a.COMPANY_TEXT,a.CONTACT,a.PERSON_TO_MEET,
a.DEPARTMENT_TEXT,a.FLOOR,b.BELONGING_TYPE,b.BELONGING_TEXT ,a.INTIME,
 ifnull(c.EXIT_TIME,0) FROM tm_visitor a  
LEFT JOIN tm_belonging b ON b.BID=a.ID 
LEFT JOIN tm_exit c ON c.ID=a.ID limit "+i+",10"; 
```

# internet-explorer - 如何使用 Visual Basic 在 Internet Explorer 中“制表”和“向下箭头”

> ID：10981246
> 
> 赞同：0
> 
> 时间：2012-06-11T13:39:33.350
> 
> 标签：internet-explorer, vba, internet-explorer-9

有人知道如何在 Visual Basic 中模拟选项卡和向下箭头按钮吗？我在 VB 中使用 Internet Explorer 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:59:51.337

Sendkeys 成功了

```
Dim numberoftabs as Long
Dim numberofdownarrows1 as long

numberoftabs = yourvalue
numberofdownarrows1 = yourvalue

Application.SendKeys "{TAB " & numberoftabs & "}", True
Application.SendKeys "{DOWN " & numberofdownarrows1 & "}", True
Application.SendKeys "~", True 
```

# php - PHP 数组：如何找到最低/最高值

> ID：10981256
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:39:54.083
> 
> 标签：php, arrays

我有两个这样的数组：

```
$array1 = array(1,1,2,3,3,4,5); //remember that i have two '1' value in this array
$array2 = array($url1, $url2, $url3, $url4, $url5, $url6); 
```

我希望在 $array1 中找到最低/最高值，然后像这样链接到 $url1/$url5：

```
<a href="$url1">1</a> or <a href="$url6">5</a> 
```

如何使用 PHP 实现这一点？任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:43:11.507

使用[max()](http://php.net/manual/en/function.max.php) & [min()](http://www.php.net/manual/en/function.min.php)函数

> max - 查找最大值
> min - 查找最小值

示例代码：

```
$max = max($array);
$min = min($array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:32:47.917

如果数组已经排序，请使用`$array2[0]`and `$array2[count($array2)-1]`。

如果它尚未排序，您可以使用它对数组进行排序。

```
array_multisort($array1, SORT_NUMERIC, $array2);
$lowest = $array2[0];
$highest = $array2[count($array2)-1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:45:23.533

据我了解，您需要这两个功能：[max](http://php.net/manual/en/function.max.php)，[min](http://www.php.net/manual/en/function.min.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:46:00.263

尝试这个

```
$maxValueKeys = array_keys($array1, max($array1)); // Your min value indexes
$minValueKeys = array_keys($array1, min($array1)); // Your max value indexes 
```

但它不是关联数组

# regex - 如何在 Python 3.2 正则表达式中指定西里尔字符范围？

> ID：10981258
> 
> 赞同：8
> 
> 时间：2012-06-11T13:40:02.087
> 
> 标签：regex, unicode, python-3.x

曾几何时，我发现[这个问题](https://mathoverflow.net/questions/17778/books-you-would-like-to-see-translated-into-english/21045#21045)很有趣。

今天我决定玩弄那本书的文字。

我想在这个脚本中使用正则表达式。当我在西里尔文字上使用脚本时，它会清除所有西里尔字符，只留下标点符号和空格。

```
#!/usr/bin/env python3.2
# coding=UTF-8

import sys, re

for file in sys.argv[1:]:
    f = open(file)
    fs = f.read()
    regexnl = re.compile('[^\s\w.,?!:;-]')
    rstuff = regexnl.sub('', f)
    f.close()
    print(rstuff) 
```

[在这个答案](https://stackoverflow.com/a/1571251/408070)中已经做了一些非常相似的事情。

基本上，我只想能够指定一组不是字母、字母数字、标点符号或空格的字符。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T14:07:19.187

这并不能完全回答您的问题，但该[`regex`模块](http://pypi.python.org/pypi/regex)比内置模块具有*更好*`re`的 unicode 支持。eg`regex`支持`\p{Cyrillic}`属性及其否定`\P{Cyrillic}`（以及大量[其他 unicode 属性](https://code.google.com/p/mrab-regex-hg/wiki/UnicodeProperties)）。此外，它正确处理 unicode 不区分大小写。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-11T14:41:11.207

您可以很容易地指定 unicode 范围：`\u0400-\u0500`. 另请参见[此处](http://en.wikipedia.org/wiki/Cyrillic_characters_in_Unicode)。

这是一个来自俄罗斯维基百科的文本示例，以及来自英语维基百科的一个句子，其中包含一个西里尔字母单词。

```
#coding=utf-8
import re

ru = u"Владивосток находится на одной широте с Сочи, однако имеет среднегодовую температуру почти на 10 градусов ниже."
en = u"Vladivostok (Russian: Владивосток; IPA: [vlədʲɪvɐˈstok] ( listen); Chinese: 海參崴; pinyin: Hǎishēnwǎi) is a city and the administrative center of Primorsky Krai, Russia"

cyril1 = re.findall(u"[\u0400-\u0500]+", en)
cyril2 = re.findall(u"[\u0400-\u0500]+", ru)

for x in cyril1:
    print x

for x in cyril2:
    print x 
```

输出：

```
Владивосток
------
Владивосток
находится
на
одной
широте
с
Сочи
однако
имеет
среднегодовую
температуру
почти
на
градусов
ниже 
```

## 添加：

其他两种方式也应该有效，并且比指定 unicode 范围要少一些骇人听闻的方式：

*   `re.findall("(?u)\w+", text)`应该匹配西里尔字母和拉丁字母字符。
*   `re.findall("\w+", text, re.UNICODE)`是等价的

因此，更具体地说，对于您的问题： *`re.compile('[^\s\w.,?!:;-], re.UNICODE')`应该可以解决问题。

见[这里](http://effbot.org/zone/unicode-objects.htm)（第 7 点）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-11-15T12:21:05.693

出于实际原因，我建议使用确切的现代俄语字形子集，而不是一般的西里尔字母。这是因为俄罗斯网站从不使用完整的西里尔字母子集，其中包括白俄罗斯语、乌克兰语、斯拉夫语和马其顿语字形。由于历史原因，我保留“u\0463”。

//用于俄罗斯网站的基本 Cyr Unicode 范围。0401,0406,0410,0411,0412,0413,0414,0415,0416,0417,0418,0419,041A,041B,041C,041D,041E,041F,0420,0421,0422,0423,0424,0425,0426, 0427,0428,0429,042A,042B,042C,042D,042E,042F,0430,0431,0432,0433,0434,0435,0436,0437,0438,0439,043A,043B,043C,043D,043E,043F, 0440,0441,0442,0443,0444,0445,0446,0447,0448,0449,044A,044B,044C,044D,044E,044F,0451,0462,0463

在多语言网站上使用此子集与使用原始全范围相比，将为您节省 60% 的带宽，并相应地提高页面加载速度。

# objective-c - 在 Objective-c 中是否有任何内置的排序方法？

> ID：10981260
> 
> 赞同：0
> 
> 时间：2012-06-11T13:40:06.703
> 
> 标签：objective-c, cocoa-touch, sorting

我有两个**排序** `NSMutableArrays`（或者我可以使用任何其他集合，不是关键的），我需要将对象从第一个数组插入到第二个数组中，并在第二个数组中保留排序顺序。做到这一点的最佳（最快）方法是什么？我可以实现所有已知的好算法，但我的问题是，是否已经有一些内置方法？如果不是，在我的情况下最好的算法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:46:19.103

真正的答案是：**这取决于**您，因为您在问：在保持排序顺序的同时将对象从一个数组插入另一个数组的最快方法是什么。

* * *

没有内置的插入排序数组的正确位置的方法。只需将两个数组相加即可达到相同的效果，但这不是“最快的方法”。

实际上更快取决于许多事情，例如：数组包含多少数据，数组[1]与数组[2]中的数据比例是多少（一个数组包含的数据是否比另一个数组多）？等等。

*注意：您可能应该从简单的解决方案开始，并且只有在遇到性能问题时才进行优化。但是，使用大型数据集进行测量，以查看您的解决方案是否适用于您的用户可能拥有的任何数据。*

## 将一个排序数组中的项目插入另一个排序数组

如果您想通过在正确的位置插入对象来合并两个数组，则应用普通算法。您应该将较小的数组插入到较大的数组中，并尝试在可能的情况下插入整个排序序列，而不是一个一个地插入每个项目。

为了获得最佳性能，您应该尝试使用`insertObjects:atIndexes:`而不是一个一个地插入对象来进行批量插入。

如果您为选项指定，您可以使用它`indexOfObject:inSortedRange:options:usingComparator:`来查找每个项目应插入到另一个数组中的索引。`NSBinarySearchingInsertionIndex`此外，您使用的比较器*必须*与对数组排序的比较器相同，否则结果为“未定义”。

考虑到这一点，你会做这样的事情

```
Create mutable index
For every ITEM in SMALLER ARRAY
    Find the index where to insert ITEM in LONGER ARRAY
    Add (the insertion location + the location in the short array) as the index in the mutable set.
Next item.

Batch insert all items. 
```

[的文档`insertObjects:atIndexes:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/insertObject:atIndex:)告诉您“已进行较早插入后在索引中指定的相应位置”。在您使用两个排序数组的情况下，这意味着所有具有较低索引的项目都已添加，因此您应该将短数组中对象的索引添加到从`indexOfObject:inSortedRange:options:usingComparator:`.

您可以做的另一个（可能非常过早的优化）是减少循环中每个项目的 sortedRange，这样您就不必搜索您知道要插入的项目大于的数组部分。

可能还可以进行许多其他优化。你还是应该先测量！希望这会让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:46:35.537

```
NSArray *newArray=[firstArray arrayByAddingObjectsFromArray:secondArray];
newArray = [newArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T15:13:04.893

我会先简单地将第一个数组的所有对象添加到第二个数组中，然后再使用第二个数组。时间需要多长时间。如果可以接受，就停在那里。

如果没有，您可以尝试[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)以在第二个数组中为第一个数组中的每个项目找到插入点。由于两个数组都已排序，因此您可以通过使用最后一个插入点作为每次循环的下限来优化搜索。像这样的东西：

```
NSInteger insertionPoint = -1;
for (id object in array1)
{
    insertionPoint = [self binarySearch: array2 for: object lowerBound: insertionPoint + 1];
    [array2 insertObject: object atIndex: insertionPoint];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:46:11.167

Cocoa 类`NSSortDescriptor`和`sortedArrayUsingDescriptors:`from`NSArray`应该做你所追求的。

由于您使用的是可变数组，因此您可能希望使用`sortUsingDescriptors:`which 对可变数组进行排序而不创建新数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T13:48:14.610

查看此处的文档，看看是否有任何 NSArray 排序方法适合您。[http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)。您可以向下滚动到方法，并且有 7 个用于排序的内置方法。您可能只需组合这两个数组并运行 sortedArrayUsingComparator: 或其他方法之一。

# regex - 数值范围的正则表达式

> ID：10981270
> 
> 赞同：1
> 
> 时间：2012-06-11T13:40:33.617
> 
> 标签：regex

寻找覆盖数字范围的正则表达式。更具体地说，考虑一种数字格式：

```
NN-NN 
```

其中 N 是一个数字。所以例子是：

```
04-11
07-12
06-06 
```

我希望能够指定一个范围。例如，介于以下之间的任何内容：

`01-27` 和`02-03`

当我说范围时，就好像`-`不存在一样。所以范围：`01-27`范围 `02-03`

将涵盖： `01-28, 01-29, 01-30, 01-31`和`02-01`

我想要正则表达式，以便我可以很容易地插入范围的值。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:48:28.537

验证日期不是正则表达式的优势所在。

例如，您将如何验证关于闰年的二月。

解决方案是以您的语言使用可用的日期 API

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:04:29.553

`'0[12]-[0-3][1-9]'`将匹配所有必需的日期，但是，它也将匹配像 01-03 这样的日期。如果您想完全匹配并且仅匹配该范围内的日期，则需要做一些更高级的事情。

这是一个易于配置的 Python 示例：

```
from calendar import monthrange
import re

startdate = (1,27)
enddate = (2,3)

d = startdate
dateList = []

while d != enddate:
    (month, day) = d
    dateList += ['%02i-%02i' % (month, day)]
    daysInMonth = monthrange(2011,month)[1] # took a random non-leap year
                            # but you might want to take the current year
    day += 1
    if day > daysInMonth:
        day = 1
        month+=1
        if month > 12:
            month = 1
    d = (month,day)

dateRegex = '|'.join(dateList)

testDates = ['01-28', '01-29', '01-30', '01-31', '02-01',
              '04-11', '07-12', '06-06']

isMatch = [re.match(dateRegex,x)!=None for x in testDates]

for i, testDate in enumerate(testDates):
    print testDate, isMatch[i] 
```

`dateRegex`看起来像这样：

```
'01-27|01-28|01-29|01-30|01-31|02-01|02-02' 
```

输出是：

```
01-28 True
01-29 True
01-30 True
01-31 True
02-01 True
04-11 False
07-12 False
06-06 False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:42:43.403

这对我来说并不完全清楚，你也没有提到语言，但在 PHP 中它看起来像这样：

```
if (preg_match('~\d{2}-\d{2}~', $input, $matches) {
 // do something here
} 
```

您有任何用例，以便我们可以根据您的需要调整代码吗？

# c# - asp:hyperLink NavigateURL 和 Eval 函数

> ID：10981280
> 
> 赞同：1
> 
> 时间：2012-06-11T13:41:07.313
> 
> 标签：c#, asp.net, hyperlink, eval

将 Eval() 函数添加到 asp:HyperLink 的 NavigateURL 属性的正确语法是什么？

我正在努力实现以下目标：

```
NavigateUrl="http://home/?<%# Eval("U_ID") %>" 
```

链接应该是“http://home？+ U_ID 的值” 但我知道语法不正确。正确的写法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T13:44:47.640

试试这个

```
 NavigateUrl='http://home/?<%# Eval("U_ID") %>' 
```

或者

```
 NavigateUrl='<%# "http://home/?" + (string)Eval("U_ID") %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T13:21:45.990

这不是我的网站。我找到了以下解决方案：

```
NavigateUrl='<%# string.Format("~/Home.aspx?{0}", HttpUtility.UrlEncode(Eval("U_ID").ToString())) %>' 
```

# mdx - 如何创建跨维度过滤数据的成员？

> ID：10981283
> 
> 赞同：0
> 
> 时间：2012-06-11T13:41:26.507
> 
> 标签：mdx

我想创建一个计算成员（或任何最好的成员），它将根据一组条件过滤数据。
示例：如果 [dimension1].[attribute1] = 'Y'，并且如果 [dimension2].[attribute2] 介于 0 和 8 之间，则“称此成员为“红色”，否则称此成员为“黑色”。

然后我希望能够将我需要的任何成员拖到 MDX 语句的 where 子句中，并让它根据我指定的条件过滤数据。
我是新手，如果有人可以给我一个示例查询来执行此操作，我一定会很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:31:27.663

```
WITH
MEMBER A AS
STRTOVAL( [dimension2].[attribute2].currentmember.name)

MEMBER B AS
IIF(A >=0 AND A < 9 AND [dimension1].[attribute1].currentmember IS [dimension1].[attribute1].&[y],'Red', 'Black' 
```

我创建了两个成员。第一个处理范围。属性存储为文本，需要进行转换。这是它自己的成员，因为需要在成员 B 中引用它两次。成员 B 是一个基本的 IIF，包括指定的条件和输出。

要使这些成员起作用，您的 select 语句中需要存在 Dimension1.attribute1 和 dimension2.Attribute2。

# android - 扩展活动只改变布局

> ID：10981285
> 
> 赞同：3
> 
> 时间：2012-06-11T13:41:26.983
> 
> 标签：android, android-layout

是否可以扩展现有活动，仅更改其布局（例如颜色）？

因为我使用的是共享库，所以我不应该修改活动，因为其他人正在使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:46:58.477

您必须将该新 Activity 放入清单中，然后确保将意图解析转到您的子类。您不仅能够扩展活动并在不修复此问题的情况下调用它（至少我不这么认为）。

您也可以只在 java 或 xml 中设置背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:45:28.793

是的。有可能，只要用这个词 `extends`。

如果你有 2 个活动 Activity1 和 2nd Activity2。你可以使用`Activity2 extends Activity1` 然后你可以使用的属性`Activity1.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:46:09.803

是的，您可以扩展它，并通过覆盖 onCreate 方法并通过您的自定义布局在其中调用 setContentView 方法，您将更改它的布局。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:48:47.830

是的，它可以这样完成：

你的共同活动：

```
public class BaseActivity extends Activity {
 ..
 ..
} 
```

您的具体活动：

```
public class YourActivity extends BaseActivity {
 ..
  @Override
    public void onCreate(Bundle savedInstanceState) {
        //call the base class constructor FIRST 
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_layout); //then change the layout
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T13:55:04.660

是的，您可以扩展您的活动，这是一个演示：

```
 package com.test.intentdemo; 

import android.app.Activity; 
import android.graphics.Color; 
import android.os.Bundle; 
import android.widget.RelativeLayout; 

public class intentDemo extends Activity { 
    public static final String TAG="MyActivity"; 
    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 
        RelativeLayout lLayout = (RelativeLayout) findViewById(R.layout.the_id); 
        lLayout.setBackgroundColor(Color.parseColor("#000000")); 
    } 
} 

            if (Log.isLoggable(TAG,0)) 
            { 
                Log.e(TAG,"ERROR BEFORE"); 
                Log.i(TAG,"INFO BEFORE"); 
                Log.d(TAG,"DEBUG BEFORE"); 

                    lLayout.setBackgroundColor(Color.parseColor("#000000")); 
                    //SystemClock.sleep(2000); 
                    try 
                    { 
                    Thread.currentThread(); 
                    Thread.sleep(2000); 
                    } 
                    catch (Exception e) 
                    { 
                    //e.message(); 
                    } 

                Log.e(TAG,"ERROR AFTER"); 
                Log.i(TAG,"INFO AFTER"); 
                Log.d(TAG,"DEBUG AFTER"); 
            } 
        } 
    } 
```

希望这可以帮助 ：）

# c# - C# 数组作为 MySQL Select 语句的一部分？

> ID：10981287
> 
> 赞同：0
> 
> 时间：2012-06-11T13:41:34.690
> 
> 标签：c#, mysql, arrays

好的，这是我的场景 - 我想查询本地数据库并将 GUID 选择查询的结果存储到数组中。

然后我想查询远程服务器以返回一个结果集，该结果集基本上显示任何新记录

这是查询，但显然这只适用于同一台服务器。

```
SELECT  *
FROM    remotetable remote
WHERE   NOT EXISTS
        (
        SELECT  1
        FROM    localtable local
        WHERE   local.guid = remote.guid
        ) 
```

并将此查询的结果插入到我的本地数据库中以合并它。

所以它会像

```
ArrayList myArrayList = new ArrayList();
OdbcConnection local = new OdbcConnection("DSN=local");
local.Open();
OdbcCommand guidSelect = new OdbcCommand("SELECT GUID from localtable",local);
OdbcDataReader DbReader = guidSelect.ExecuteReader();
while (DbReader.Read())
{
String guid = (string)DbReader[0];
myArrayList.Add(guid);
}
local.Close();
OdbcConnection local = new OdbcConnection("DSN=remote");
"SELECT * FROM remotetable remote WHERE NOT EXISTS (SELECT  1 FROM"+ myArrayList() +" local       WHERE   local.guid = remote.guid) 
```

显然这不会按原样工作，但它应该概述 id 想要完成的工作

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:57:46.673

我知道如何做到这一点的唯一方法是实际传递这样的 Guid 表：

```
string guids = "''" + string.Join("'',''", myArrayList) + "''"; 
string query = string.format("SELECT * FROM remotetable WHERE NOT id IN ({0})", guids); 
```

在我看来，如果您尝试跟踪新记录，您应该只添加一个顺序列，然后在本地获取高于该列的 MAX 的所有内容。

# html - 无法垂直和水平拉伸 css div 100 %

> ID：10981290
> 
> 赞同：0
> 
> 时间：2012-06-11T13:41:41.677
> 
> 标签：html, css, layout, stretch

我正在尝试将我的表格设计转换为 css div 设计。

什么不起作用：

1.）黑色 div 将有列表项，因此我需要目前显示的滚动条。没关系。但我不想将高度限制为 400px。我以前的设计有 100% 的高度，所以它占据了屏幕上的所有垂直空间。

2.) 红色的 div (rightContent) 应该有 200px 的固定宽度；当我设置这个时，我必须设置什么，leftContent 占据所有水平空间。

最重要的是，在旧表格布局中，整个布局周围没有可见的外部垂直滚动条。

我在IE9上测试过

[http://jsfiddle.net/pEMwP/4/](http://jsfiddle.net/pEMwP/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:43:17.413

**对于问题1：** 如果你想要一个滚动条，你不应该将height属性设置为auto。相反，您可以像这样通过 Javascript 动态设置 Div 高度。

```
document.getElementById("ListData").style.height=<your Size>; 
```

**对于问题 2：** 如果要将高度设置为 Red Div。你可以这样指定。

```
height: 200px;
overflow:hidden; 
```

这会将 div 限制为 200px。现在你可以增加你的其他 div/divs 宽度来占据这个空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:49:03.650

如果我从头开始这样的事情，我会重新考虑布局，这样我就没有这么严格的限制，但是当您转换现有网站时，我很感激这可能不是一个选择。

您可以使用`display: table;`,`display: table-row;`和`display: table-cell`; 声明以获得语义正确的（它不是表格数据，对吗？）结构，其行为就像过去经常被滥用一样`<table>`。诚然，您必须为 IE6 和 7（可能是 2-3% 的用户）实施一些变通方案，但也许您可以接受它在那些浏览器中可用但不完美的事实？

[http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/](http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/)

# bash - Bash Autocomplete Ubuntu 列出所有而不是循环

> ID：10981291
> 
> 赞同：1
> 
> 时间：2012-06-11T13:41:42.287
> 
> 标签：bash, ubuntu, autocomplete, terminal, tab-completion

在全新的 Ubuntu 12.04 安装中，我的终端选项卡完成设置被配置为在第二个选项卡上循环选项而不是我习惯的选项（列出所有选项并仅完成可以确定的选项）

例如，在包含 listPixels.html 和 listPublishers.html 的目录中，我希望一个选项卡从

```
l 
```

简单地完成

```
listP 
```

然后第二个选项卡应列出所有可能的匹配项，而不是在每个后​​续选项卡上循环遍历 listPixels.html 和 listPublishers.html。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:51:53.480

你已经`menu-complete`开启了。只需重新绑定`Tab`到`complete`.

```
bind '"\C-i":complete' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:50:31.357

我相信这是您的 .inputrc 中的设置。

使用该行：

```
set show-all-if-ambiguous On 
```

# java - 为什么不能在 Java 中注释所有语句？

> ID：10981295
> 
> 赞同：7
> 
> 时间：2012-06-11T13:41:58.347
> 
> 标签：java, annotations, element

我天真地尝试这样做时遇到了一个简单的问题：

```
public void someMethod(){    
  int x = 0;
  ...
  @SuppressWarnings({"rawtypes", "unchecked"})
  x = ((Comparable)lhs).compareTo(rhs);
  ...
} 
```

这是非法的，必须改写编译：

```
public void someMethod(){  
  ...  
  @SuppressWarnings({"rawtypes", "unchecked"})
  int x = ((Comparable)lhs).compareTo(rhs);
  ...
} 
```

我已将问题追溯到[ElementType](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/ElementType.html)：语句似乎不是有效的程序元素。这相当令人困惑 - 我认为语句类似于所有编程元素的超类型。

1.  限制有效元素是否有理论或技术原因？

2.  能否以不同的方式完成 - 即假设我可以`ElementType`用我自己的班级取代并掌握涟漪变化，我可以注释任何陈述吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T13:48:03.273

如果您查看[Javadoc，`@SuppressWarnings`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/SuppressWarnings.html)您会看到答案：它声明的目标是

```
@Target(value={TYPE,FIELD,METHOD,PARAMETER,CONSTRUCTOR,LOCAL_VARIABLE}) 
```

换句话说，*它不能合法地应用于陈述。*但是，它可以应用于变量声明。它与语句是否是程序元素无关；基本上是因为这个注解只适用于事物的声明。

此外，如果您查看[Javadoc 中描述可以具有注释的事物的枚举，则](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/ElementType.html)语句和表达式不在选择之列。一般来说，注释可以应用于事物的声明，而不是代码。

这样做的理论原因只是注释被存储为类文件中声明的单个项目的属性。陈述不合格；当你的代码被编译时，语句已经不存在了。只有一个字节码流，它来自的语句的唯一提醒是（可选的）行号表。为了解决这个问题，他们需要在类文件中添加一个新属性来引用各个字节码，就像在[这个提案中一样，](http://code.google.com/p/jsr308-langtools/wiki/AnnotationsOnStatements#New_Class_File_Attributes)并处理由此产生的许多复杂性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T14:26:36.070

我知道答案已经被接受，只是把它扔在那里。[这是JSR-175](http://jcp.org/aboutJava/communityprocess/final/jsr175/index.html)的常见问题解答的摘录，它最初为 Java 添加了注释：

> **为什么不能注释任意程序元素，例如块和单个语句？**
> 
> 这将使注解语法大大复杂化：我们将不得不牺牲说注解只是修饰符的简单性，它可​​以用于声明。

换句话说，因为工作量太大:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T13:53:34.603

它[已被提议](http://code.google.com/p/jsr308-langtools/wiki/AnnotationsOnStatements)作为[JSR-308](http://jcp.org/en/jsr/detail?id=308)的一部分以允许对语句进行注释，但目前它不受支持并且不会成为下一个 Java 语言版本（即 Java 8）的一部分。

我猜在语言中添加注释时，主要的目标类和方法级信息主要围绕运行时用例（例如 Java EE、JPA、JAX-WS 等）制作，而语句级注释主要是在编译时有用（请参阅上面的 wiki 链接以获取用例列表）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T13:51:10.050

Java 中的声明是具有标识符并且可以从程序的其他部分引用的实体。声明不符合该标准 - 它是一个可能导致将值分配给某个声明的实体的操作。

[Java 规范 ( http://docs.oracle.com/javase/specs/jls/se5.0/html/names.html#6.1](http://docs.oracle.com/javase/specs/jls/se5.0/html/names.html#6.1) )的第 6.1 节列出了与`ElementType`枚举值一致的声明类型。

# java - 如何处理GMail的投递状态通知

> ID：10981298
> 
> 赞同：1
> 
> 时间：2012-06-11T13:42:23.927
> 
> 标签：java, gmail, jakarta-mail, dsn

1.  gmail 是否支持 RFC1892（交付状态通知）？

2.  如果是这样，我如何使用 JavaMail 来解析 DSN。（示例代码非常感谢）

3.  如果没有，当无法通过 gmail 发送电子邮件时，将返回失败消息。如何检测这些“退回”的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:16:07.813

1 - 我不知道。

2 - 将 dsn.jar 从 JavaMail 添加到您的类路径。然后使用这样的东西：

```
 if (msg.isMimeType("multipart/report")) {
        MultipartReport r = (MultipartReport)msg.getContent();
        // see com.sun.mail.dsn package javadocs for MutlipartReport
    } 
```

3 - [http://www.oracle.com/technetwork/java/javamail/faq/index.html#bounce](http://www.oracle.com/technetwork/java/javamail/faq/index.html#bounce)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:51:33.340

与[这个问题有关](https://stackoverflow.com/questions/5298285/detecting-if-an-email-is-a-delivery-status-notification-and-extract-informatio/12623903)。

标`X-Failed-Recipients`头似乎是识别 gmail DSN 的最快方法。之后，您似乎必须解析文本/纯内容。

主题似乎是`Delivery Status Notification (*status*)`我看到的状态是：`Failure`，`Delay`。

# c# - File.Copy() 时的 Windows 服务异常

> ID：10981299
> 
> 赞同：0
> 
> 时间：2012-06-11T13:42:27.397
> 
> 标签：c#, file, exception, windows-services, io

我的服务代码位于`OnStart()`throws Exception(I) 中并且服务已停止。我不知道为什么会有前任。抛出？..这是我的代码：

```
public Service1()
{
    InitializeComponent();
}

Thread thread;

protected override void OnStart(string[] args)
{
    thread = new Thread(delegate()
    {
        string path = @"D:\levani\FolderListenerTest\ListenedFolder";
        FileSystemWatcher listener;
        listener = new FileSystemWatcher(path);
        listener.Created += new FileSystemEventHandler(listener_Created);
        listener.EnableRaisingEvents = true;
    });
    thread.Start();
}

public void listener_Created(object sender, FileSystemEventArgs e)
{
    File.Copy(e.FullPath, @"D:\levani\FolderListenerTest\CopiedFilesFolder\F" + e.Name);
}

protected override void OnStop()
{
    thread.Abort();
} 
```

**日志**

```
Log Name:      Application
Source:        .NET Runtime
Date:          6/11/2012 5:33:27 PM
Event ID:      1026
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      Levan-PC
Description:
Application: FolderListenerService.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.IOException
Stack:
   at System.IO.__Error.WinIOError(Int32, System.String)
   at System.IO.File.InternalCopy(System.String, System.String, Boolean)
   at System.IO.File.Copy(System.String, System.String)
   at FolderListenerService.Service1.listener_Created(System.Object, System.IO.FileSystemEventArgs)
   at System.IO.FileSystemWatcher.OnCreated(System.IO.FileSystemEventArgs)
   at System.IO.FileSystemWatcher.NotifyFileSystemEventArgs(Int32, System.String)
   at System.IO.FileSystemWatcher.CompletionStatusChanged(UInt32, UInt32, System.Threading.NativeOverlapped*)
   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*)

Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name=".NET Runtime" />
    <EventID Qualifiers="0">1026</EventID>
    <Level>2</Level>
    <Task>0</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2012-06-11T14:33:27.000000000Z" />
    <EventRecordID>18314</EventRecordID>
    <Channel>Application</Channel>
    <Computer>Levan-PC</Computer>
    <Security />
  </System>
  <EventData>
    <Data>Application: FolderListenerService.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.IOException
Stack:
   at System.IO.__Error.WinIOError(Int32, System.String)
   at System.IO.File.InternalCopy(System.String, System.String, Boolean)
   at System.IO.File.Copy(System.String, System.String)
   at FolderListenerService.Service1.listener_Created(System.Object, System.IO.FileSystemEventArgs)
   at System.IO.FileSystemWatcher.OnCreated(System.IO.FileSystemEventArgs)
   at System.IO.FileSystemWatcher.NotifyFileSystemEventArgs(Int32, System.String)
   at System.IO.FileSystemWatcher.CompletionStatusChanged(UInt32, UInt32, System.Threading.NativeOverlapped*)
   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*)
</Data>
  </EventData>
</Event> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:50:46.997

这可能是多种原因。请参阅[File.Copy()](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)文档，尤其是记录所有可能引发的异常的**异常部分。**

您需要包装您的 File.Copy() 并捕获任何异常，以便您可以做出适当的反应：

```
public void listener_Created(object sender, FileSystemEventArgs e)
{
    try
    {
        File.Copy(e.FullPath, @"D:\levani\FolderListenerTest\CopiedFilesFolder\F" + e.Name);
    }
    catch {FileNotFoundException e)
    { 
        //do something if file isn't there
    }
    catch {UnauthorizedAccessException e)
    { 
        //do something if invalid permissions
    }

    //etc 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:49:01.913

如果文件已经存在，额外的参数 true in`File.Copy`将覆盖文件。我认为错误是文件已经存在。

```
File.Copy(e.FullPath, @"D:\levani\FolderListenerTest\CopiedFilesFolder\F" + e.Name,true); 
```

将代码放入`try..catch block`并捕获`IOException`异常。您可以登录文件以进行进一步调试。

`WinIOError`当文件名、目录名或卷标语法不正确时，我们会收到错误（当我们进入调用堆栈时）。所以只需检查正确的路径和文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:56:43.833

如果您创建一个新线程，您需要确保处理该线程上抛出的所有异常。 **在由 Thread.Start() 创建的线程上发生的任何未处理的异常都会导致您的应用程序终止。**

具体来说，构造函数[FileSystemWatcher(string path)](http://msdn.microsoft.com/en-us/library/b36854c3.aspx)和[File.Copy(string sourceFileName, string destFileName)](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)会引发一些您在当前代码中未处理的异常。这两个都在一个单独的线程上调用。由于文件已经存在，您很可能会收到 IOException（对同一文件的多次更改将导致您的代码尝试多次复制它，从而导致第一次之后的任何副本发生冲突）。

您可能应该更新您的 File.Copy 调用以使用[File.Copy(string sourceFileName, string destFileName, bool overwrite)](http://msdn.microsoft.com/en-us/library/system.io.file.copy.aspx)并将您的函数包装`listener_Created`在一个 try/catch 块中，该块会处理异常（而不是重新抛出它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:57:56.047

我不知道为什么，但是在我用**try {} catch {}**包围我的代码之后，它工作得很好，你知道吗？这是代码：

```
public Service1()
        {
            InitializeComponent();
        }

        Thread thread;

        protected override void OnStart(string[] args)
        {
            try
            {
                thread = new Thread(delegate()
                {
                    string path = @"D:\levani\FolderListenerTest\ListenedFolder";
                    FileSystemWatcher listener; listener = new FileSystemWatcher(path);
                    listener.Created += new FileSystemEventHandler(listener_Created);
                    listener.EnableRaisingEvents = true;
                });
                thread.Start();
            }
            catch (Exception ex)
            {
                File.WriteAllText(@"D:\levani\bussite.txt", "thread: " + ex.ToString());
            }
        }

        public void listener_Created(object sender, FileSystemEventArgs e)
        {
            try
            {
                File.Copy(e.FullPath, @"D:\levani\FolderListenerTest\CopiedFilesFolder\F" + e.Name);
            }
            catch (Exception ex)
            {
                File.WriteAllText(@"D:\levani\bussite.txt", "File copy ex: " + ex.ToString());
            }
        }

        protected override void OnStop()
        {
            thread.Abort();
        } 
```

# c# - 这些是用于互操作还是用于 COM 编码？

> ID：10981311
> 
> 赞同：0
> 
> 时间：2012-06-11T13:43:13.407
> 
> 标签：c#, winapi, c#-4.0, com, com-interop

我有下面的代码，但我不知道它是什么意思或它是如何工作的。

我只知道它调用了函数，而这些都只是声明，那么我在哪里可以找到这段代码的定义呢？

```
 [ComImport, Guid("341A80AC-5FC6-4B$6-8380-4D70279300CZ"), TypeLibType((short) 2), ClassInterface((short) 0)]
    public class WjbJobClass : abc, xyz
    {
        [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType=MethodCodeType.Runtime), DispId(0x20)]
        public virtual extern int somefunction();
    } 
```

我可以使用相同的方法从其他应用程序调用函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:22:50.897

它是由 Tlbimp.exe 工具自动生成的声明。来自 COM 组件的类型库。该方法的实现隐藏在一些本机 DLL 中，您几乎可以肯定没有源代码。如果该组件已正确注册，那么您可以通过使用 Regedit.exe 在注册表中找到它。

导航到 HKCR\Classes\CLSID 并查找您在声明中看到的 {guid}。InProcServer32 键给出了 DLL 的路径。您可以使用 OleView.exe 工具查看 DLL 中的类型库。这将告诉您从 Tlbimp 生成的声明中您已经知道的内容。如果您需要支持来解决问题，请联系 COM 组件的所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:35:32.720

要查看包装的 COM 对象的定义，您可以做的一件事是运行“OleView.exe”。它是 Windows SDK 的一部分，将向您展示 Windows 系统中的所有 COM 类、接口和类型库。您可能还必须使用 RegEdit 来查找与 GUID 关联的类 ID。当您这样做时，您将能够看到的只是 COM 库接口的 C 定义，而不是实现。如果您需要弄清楚某些东西是如何实现的，您可以使用反汇编程序，例如 IDA。

# xslt - XML 元素有命名空间，我的 XPATH 不起作用

> ID：10981312
> 
> 赞同：14
> 
> 时间：2012-06-11T13:43:15.407
> 
> 标签：xslt, xpath, xml-namespaces

我得到了以下 XML：

```
<root>
  <items>
    <item>
      <title>Item</title>
      <details>
        <data xmlns="http://some_url">
          <length>10</length>
          <weight>1.2</weight>
        </data>
      </details>
    </item>
  </items>
</root> 
```

遵循 XPath 不起作用，这意味着不会像“数据”元素那样打印任何内容：

```
/root/items/item/details/data 
```

但是当我删除“数据”元素的“xmlns”命名空间属性时，它的内容就会被打印出来。在不删除“data”元素的“xmlns”命名空间属性的情况下，xpath 表达式应该如何工作？

我正在使用 SAXON 和 XSL 1.0。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T03:40:41.887

**这是 XPath / XSLT 中最常见的问题之一**：

XPath 将不带前缀的元素名称解释为属于“无命名空间”，这就是在 XPath 表达式中仅将其不带前缀的名称指定为节点测试时，不选择属于默认（非空）命名空间的不带前缀名称的元素的原因.

**解决方案是**：

1.  创建一个命名空间绑定，其中前缀（比如`"x"`）与默认命名空间相关联，然后指定`x:elementName`而不是`elementName`.

2.  使用冗长、丑陋和不可靠的表达方式，例如：`*[name() = 'elementName']`

**这是使用上述方法 1 进行的 XSLT 转换**。：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:a="http://some_url">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:value-of select=
  "/root/items/item/details/a:data/a:weight"/>
 </xsl:template>
</xsl:stylesheet> 
```

**在提供的 XML 文档上应用此转换时（使用 Saxon 6.5.4 或任何其他兼容的 XSLT 1.0 处理器）**：

```
<root>
    <items>
        <item>
            <title>Item</title>
            <details>
                <data xmlns="http://some_url">
                    <length>10</length>
                    <weight>1.2</weight>
                </data>
            </details>
        </item>
    </items>
</root> 
```

**选择正确/想要的节点并将其字符串值复制到输出**：

```
1.2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:47:30.360

在 XPath 中，您必须为命名空间分配一个前缀。如何执行此操作取决于您使用的 XPath 软件/库，但假设您将命名空间 URI`http://some_url`与命名空间前缀相关联`someUrl`，您可以更改 XPath 表达式，如下所示：

```
/root/items/item/details/someUrl:data 
```

# windows - 使用 Kinect for Windows SDK 1.5 的多个 Kinect

> ID：10981317
> 
> 赞同：1
> 
> 时间：2012-06-11T13:43:40.063
> 
> 标签：windows, sdk, kinect, hresult

我试图让两个 Kinect 在同一个应用程序下相处。我尝试启动所有连接的 Kinect（通过调用 Start() 方法），但只有一个将“isRunning”标志设置为 true。有谁知道为什么只有一个传感器在运行？

LE：我将两个 kinect 连接在不同的 USB 控制器上……同样的问题。我已经启用了所有异常，并且在为第二个 kinect 调用 start 方法时得到了这个：

```
This API has returned an exception from an HRESULT: 0x830100AA 
```

堆栈跟踪：

```
 at Microsoft.Kinect.KinectExceptionHelper.CheckHr(Int32 hr)
   at Microsoft.Kinect.NuiSensor.NuiInitialize(UInt32 dwFlags)
   at Microsoft.Kinect.KinectSensor.Initialize(SensorOptions options)
   at Microsoft.Kinect.KinectSensor.Start() 
```

问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T22:05:54.390

Kinect 传感器需要大量 USB 带宽，因此每个 Kinect 都应连接到单独的 USB 控制器。尝试将它们都连接到不同的 USB 主机控制器。您还可以在设备管理器中的“Microsoft.Kinect”节点下验证状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:52:58.043

我禁用了骨骼跟踪，现在两个 kinect 传感器都在运行。但是现在出现的问题是：为什么不能同时启用骨骼跟踪？

# r - 具有范围值颜色的 ggplot2 热图

> ID：10981324
> 
> 赞同：31
> 
> 时间：2012-06-11T13:44:03.830
> 
> 标签：r, ggplot2, heatmap

我想在 ggplot2 中制作热图。我的玩具数据和代码是：

```
set.seed(12345)
dat <- 
  data.frame(
      Row = rep(x = LETTERS[1:5], times = 10)
    , Col = rep(x = LETTERS[1:10], each = 5)
    , Y = rnorm(n = 50, mean = 0, sd = 1)
    )
library(ggplot2)
p <- ggplot(data =  dat, aes(x = Row, y = Col)) + 
      geom_tile(aes(fill = Y), colour = "white") +
      scale_fill_gradient(low = "white", high = "steelblue")
p 
```

我想为这样的范围值设置配色方案：

```
-3 <= Y < -2  ---> Dark Blue
-2 <= Y < -1  ---> Blue
-1 <= Y <  0  ---> Light Blue
 0 <= Y <  1  ---> Light Green
 1 <= Y <  2  ---> Green
 2 <= Y <= 3  ---> Dark Green 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-20T18:38:01.163

目前尚不清楚您是否需要离散颜色，或者您列出的颜色是否只是范围内的标记`Y`。我会展示两者。

对于离散的颜色，使用`Y1`joran 定义它

```
dat$Y1 <- cut(dat$Y,breaks = c(-Inf,-3:3,Inf),right = FALSE) 
```

然后，您可以使用手动比例获得具有您列出的特定颜色的图

```
p <- ggplot(data =  dat, aes(x = Row, y = Col)) + 
      geom_tile(aes(fill = Y1)) +
      scale_fill_manual(breaks=c("\[-Inf,-3)", "\[-3,-2)", "\[-2,-1)", 
                                 "\[-1,0)", "\[0,1)", "\[1,2)", 
                                 "\[2,3)", "\[3, Inf)"),
                        values = c("white", "darkblue", "blue",
                                   "lightblue", "lightgreen", "green",
                                   "darkgreen", "white"))
p 
```

![](../Images/4e6ebb4ca012a1cf9a118268cd15d51c.png)

我不知道你想要 -3 和 3 以外的颜色，所以我使用了白色。

如果您想要连续的颜色，从负片上的蓝色到 0 处的白色再到正片上的绿色，`scale_fill_gradient2`都可以。

```
ggplot(data =  dat, aes(x = Row, y = Col)) + 
  geom_tile(aes(fill = Y)) +
  scale_fill_gradient2(low="darkblue", high="darkgreen", guide="colorbar") 
```

![在此处输入图像描述](../Images/a3893b3107330ebf6d3ef0686c9e2168.png)

如果您想要对颜色进行精细的细节控制，例如映射在 3 处为“深蓝色”，在 2 处为“蓝色”，在 1 处为“浅蓝色”，在 0 处为“白色”等，那么`scale_fill_gradientn`将为您工作：

```
library("scales")
ggplot(data =  dat, aes(x = Row, y = Col)) + 
  geom_tile(aes(fill = Y)) +
  scale_fill_gradientn(colours=c("darkblue", "blue", "lightblue", 
                                 "white",
                                 "lightgreen", "green", "darkgreen"),
                       values=rescale(c(-3, -2, -1,
                                        0,
                                        1, 2, 3)),
                       guide="colorbar") 
```

![](../Images/9c12ab4f31dd2453f34c70dbbc50f278.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-11T14:42:16.570

对于这样的事情，您有多种选择，但这里有一个作为起点。

首先，用于`cut`创建`Y`具有适当范围的因子：

```
dat$Y1 <- cut(dat$Y,breaks = c(-Inf,-3:3,Inf),right = FALSE) 
```

然后使用**RColorBrewer**的调色板进行绘图：

```
ggplot(data =  dat, aes(x = Row, y = Col)) + 
      geom_tile(aes(fill = Y1), colour = "white") +
      scale_fill_brewer(palette = "PRGn") 
```

![在此处输入图像描述](../Images/b5ae814547eb19eab5d2e8566c4d2c9f.png)

这种配色方案在低端比蓝色更紫色，但它是我在啤酒调色板中能找到的最接近的。

如果您想构建自己的，您可以简单地使用`scale_fill_manual`并为参数指定所需的颜色向量`values`。

# apache - 禁用 httpd.conf 中的目录浏览与 apache 上的 .htaccess

> ID：10981326
> 
> 赞同：1
> 
> 时间：2012-06-11T13:44:10.303
> 
> 标签：apache, apache2

在 apache2 网络服务器上禁用目录浏览的最佳做法是什么？我想在 httpd.conf 禁用此功能会限制浏览，即使有人获得了对网络服务器上 .htaccess 文件的访问权限并启用了目录浏览？想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:47:13.970

通过服务器配置更简单，但 htaccess 通常是唯一的方法。特别是在共享主机上。

如果有人操纵 htaccess 文件，您不需要保护您的文件。在那种情况下，已经为时已晚。

# objective-c - 如何使用点符号指定 NSArray 的 lastObject？

> ID：10981327
> 
> 赞同：0
> 
> 时间：2012-06-11T13:44:10.777
> 
> 标签：objective-c, cocoa

如何使用点符号指定 NSArray 的 lastObject ？

例如：

```
@"myArray.lastObject" 
```

是错的。

但我需要在我的代码中用点符号表示路径。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:04:00.227

```
NSArray* foo = [NSArray arrayWithObject: @"bar"];
id baz = foo.lastObject; 
```

以上对我来说很好。

因此，如果您使用 lastObject 来获取排序键，您可以执行以下操作。请注意，除非编译器知道对象是什么类型并且 lastObject 返回 id，否则点表示法不起作用，因此您必须进行类型转换才能获取`Order`或使用正常语法。

```
NSSortDescriptor *rankSortDescriptor = [[NSSortDescriptor alloc] initWithKey: ((MyObject*)managedItems.lastObject).Order 
                                                                   ascending: YES]; 
```

或者（我认为更好）

```
NSSortDescriptor *rankSortDescriptor = [[NSSortDescriptor alloc] initWithKey: [[managedItems lastObject] Order] 
                                                                   ascending: YES]; 
```

# android - 无法将 int 转换为 String

> ID：10981331
> 
> 赞同：2
> 
> 时间：2012-06-11T13:44:32.933
> 
> 标签：android

这不起作用：

```
int number = 1;
String numberstring = IntToString(number); 
```

我得到“方法 IntToString(int) 未定义类型 (myclassname)”

我在这里一定很累。我到底忘记了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:47:20.303

尝试这个。

```
int number = 1;
String numberstring = Integer.toString(number); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T13:49:56.427

您可以执行以下任一操作：

```
 String numberstring = number.toString(); 
```

或者

```
String numberstring = Integer.toString(number) 
```

或（有时我会这样做很棘手）

```
String numberstring = 1 + ""; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T10:36:50.750

这些似乎是“开箱即用”的，无需导入任何特殊类：

```
String numberstring = String.valueOf(number);
String numberstring = Integer.toString(number);
String numberstring = number + ""; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T13:50:05.910

为什么不这样：

```
int number = 1;
String numberstring = number+""; 
```

还要确保：

你的类文件中有`IntToString`方法`myclassname`吗？争论类型是否匹配？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T13:51:27.730

你期待这个——

```
int numb = 1;
String val = String.valueOf(numb); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T15:30:22.790

在 Java 中，int 到 String 很简单

```
String numberstring = String.valueOf(number); 
```

这也适用于安卓。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-11T14:03:10.663

```
int number=1;
String S = String.valueOf(number); 
```

试试这个代码......对我有用:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-11T13:48:47.993

用很少的代码做到这一点的一种方法是这样的：

```
整数 = 1;
字符串数字字符串 = 数字 + "";

```

# javascript - Google Charts Api 同一画布中的多个图表

> ID：10981334
> 
> 赞同：0
> 
> 时间：2012-06-11T13:44:55.187
> 
> 标签：javascript, pie-chart, google-visualization

我正在使用谷歌图表 api。它非常适合我的需求。我现在正在尝试在同一页面中合并多个饼图。我已将图表移至页面底部。如何在同一个画布中添加四个饼图，或者我应该在同一页面上创建多个画布。

```
var chart = new google.visualization.PieChart(document.getElementById('chart_div')); 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:13:30.480

Do not understand what you means by canvas. But if you've 4 Google charts, each chart can be displayed in its own DIV. So you'll need 4 'chart_div'. For example, this is how the [Web Reporting](http://demo3.iccube.com/icCube/doc/tutorial/ic3report-tutorial.html?ic3demo) of [icCube](http://www.icCube.com) is working.

# oauth - 使用 OAuth 从 Google Apps 站点中链接的 Google Apps 脚本中检索“消费者”电子邮件

> ID：10981337
> 
> 赞同：0
> 
> 时间：2012-06-11T13:44:57.203
> 
> 标签：oauth, google-apps-script

虽然[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)的描述性很强，但我似乎无法理解如何翻译成 Google Apps 脚本。

最终目标是让用户点击一个链接，授权访问他们的用户信息。然后，我将使用他们的电子邮件地址或用户 ID 将适当的电子表格分配给其他 Google Apps 脚本 UI。

我确信一些示例代码会让我上路。

甚至可能吗？

可以使用链接来实现这一点吗？[http://support.google.com/sites/bin/answer.py?hl=en&answer=1224166&topic=1224152&ctx=topic](http://support.google.com/sites/bin/answer.py?hl=en&answer=1224166&topic=1224152&ctx=topic)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:41:28.450

问题在于，当您将脚本作为服务发布时，它会在您的 ID 下执行。所有授权都必须在脚本编辑器中完成。因此，当第三人单击按钮或链接或其他任何内容时，脚本会在您的用户 ID 下运行，而您得到的只是您自己的用户 ID。

简而言之，答案是否定的。悲伤，但真实:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:53:08.040

查看[Google 代码站点](http://code.google.com/p/oauth/)上的 OAuth 代码。有一些很好的示例以及几种不同编程语言的客户端（和服务器）代码。按照示例了解如何获取所需的令牌。

# c++ - 开始 Direct3D，简单三角形不渲染

> ID：10981341
> 
> 赞同：2
> 
> 时间：2012-06-11T13:45:19.977
> 
> 标签：c++, hlsl, direct3d11

我一直在玩游戏制作一段时间，首先使用 SDL，然后使用 SFML。为我完成了基础工作真是太好了，但现在我想再迈出一步，学习如何从头开始制作图形。因此，我正在尝试学习 Direct3D 的基本原理，并且已经阅读了一些关于 D3D 11 的教程以开始使用。我只是想通过在深色背景上绘制一个白色三角形来获得绝对的基础知识......但我无法让它工作。

我使用的是 Visual Studio 2012 RC 和 Windows 8 SDK，所以这里有一些 C++11 语法，而且没有 D3DX。我已经成功地设置了窗口并且 Direct3D 的初始化似乎进行得很好。它运行主循环的渲染部分，因为它以我指定的颜色清除屏幕。但是，我的花哨的白色三角形不会出现。我已经多次检查了我的代码，由于缺乏经验，我无法判断它有什么问题。我已经剪掉了窗口初始化/d3d 关闭和其他不相关的部分，但我害怕剪掉太多，以防其中一些与我的问题有关，所以...... big-wall-of-code-warning .

我认为我已经完成了所有必需的步骤；我创建设备、设备上下文、交换链和渲染目标。然后我创建一个顶点着色器+输入布局和一个像素着色器。之后我创建一个顶点缓冲区，为我的三角形添加顶点并将原始拓扑设置为 TRIANGLELIST，这就是初始化。在我的主循环中，我将 D3D 指向我的顶点/像素着色器，并告诉它绘制我插入缓冲区的 3 个顶点。但是只显示调用 ClearRenderTargetView 的深蓝色背景；没有三角形。我是否错过了任何步骤，或者在途中做错了什么？

这是我拥有的代码（我承认在这个代码约定上有点松懈，所以在指针变量之前没有 p 等）：

主循环：

```
while ( msg.message != WM_QUIT )
{
    if ( PeekMessage( &msg, 0, 0, 0, PM_REMOVE ))
    {
        TranslateMessage( &msg );
        DispatchMessage( &msg );
    }
    else
    {
        g_d3dContext->ClearRenderTargetView( g_renderTarget, clearColor );
        g_d3dContext->VSSetShader( g_vertexShader, nullptr, 0 );
        g_d3dContext->PSSetShader( g_pixelShader, nullptr, 0 );
        g_d3dContext->Draw( 3, 0 );
        g_swapChain->Present( 0, 0 );
    }
} 
```

Direct3D 初始化：

```
HRESULT hr = S_OK;

RECT rc;
GetClientRect( g_hWnd, &rc );
float width = static_cast<float>( rc.right - rc.left );
float height = static_cast<float>( rc.bottom - rc.top );

uint createDeviceFlags = 0;

const uint numDriverTypes = 3;
D3D_DRIVER_TYPE driverTypes[ numDriverTypes ] =
{
    D3D_DRIVER_TYPE_HARDWARE,
    D3D_DRIVER_TYPE_WARP,
    D3D_DRIVER_TYPE_REFERENCE
};

const uint numFeatureLevels = 3;
D3D_FEATURE_LEVEL featureLevels[ numFeatureLevels ] =
{
    D3D_FEATURE_LEVEL_11_0,
    D3D_FEATURE_LEVEL_10_1,
    D3D_FEATURE_LEVEL_10_0
};

DXGI_SWAP_CHAIN_DESC sd = { 0 };
sd.BufferCount                          = 1;
sd.BufferDesc.Width                     = static_cast<uint>( width );
sd.BufferDesc.Height                    = static_cast<uint>( height );
sd.BufferDesc.Format                    = DXGI_FORMAT_R8G8B8A8_UNORM;
sd.BufferDesc.RefreshRate.Numerator     = 60;
sd.BufferDesc.RefreshRate.Denominator   = 1;
sd.BufferUsage                          = DXGI_USAGE_RENDER_TARGET_OUTPUT;
sd.OutputWindow                         = g_hWnd;
sd.SampleDesc.Count                     = 1;
sd.SampleDesc.Quality                   = 0;
sd.Windowed                             = true;

for( uint driverTypeIndex : driverTypes )
{
    g_driverType = driverTypes[ driverTypeIndex ];
    hr = D3D11CreateDeviceAndSwapChain( nullptr, g_driverType, nullptr, createDeviceFlags, featureLevels, numFeatureLevels,
                                        D3D11_SDK_VERSION, &sd, &g_swapChain, &g_d3d, &g_featureLevel, &g_d3dContext );
    if( SUCCEEDED( hr ))
        break;
}
if( FAILED( hr ))
    return hr;

// Create a render target view
ID3D11Texture2D* backBuffer = nullptr;
hr = g_swapChain->GetBuffer( 0, __uuidof( ID3D11Texture2D ), reinterpret_cast<void**>( &backBuffer ));
if( FAILED( hr ))
    return hr;

hr = g_d3d->CreateRenderTargetView( backBuffer, nullptr, &g_renderTarget );
backBuffer->Release();
if( FAILED( hr ))
    return hr;

g_d3dContext->OMSetRenderTargets( 1, &g_renderTarget, nullptr );

// Setup the viewport
D3D11_VIEWPORT vp = { 0 };
vp.Width    = width;
vp.Height   = height;
vp.MinDepth = 0.0f;
vp.MaxDepth = 1.0f;
vp.TopLeftX = 0;
vp.TopLeftY = 0;
g_d3dContext->RSSetViewports( 1, &vp );

// Create vertex shader and input layout
ID3DBlob* vsBlob = nullptr;
ID3DBlob* errorBlob = nullptr;
hr = D3DCompileFromFile( L"VertexShader.hlsl", nullptr, nullptr, "main", "vs_4_0", 0, 0, &vsBlob, &errorBlob );
if ( FAILED( hr ))
    return hr;

hr = g_d3d->CreateVertexShader( vsBlob->GetBufferPointer(), vsBlob->GetBufferSize(), nullptr, &g_vertexShader );
if ( FAILED( hr ))
{
    vsBlob->Release();
    return hr;
}

D3D11_INPUT_ELEMENT_DESC ied = { 0 };
ied.AlignedByteOffset       = 0;
ied.Format                  = DXGI_FORMAT_R32G32B32_FLOAT;
ied.InputSlotClass          = D3D11_INPUT_PER_VERTEX_DATA;
ied.InputSlot               = 0;
ied.InstanceDataStepRate    = 0;
ied.SemanticIndex           = 0;
ied.SemanticName            = "POSITION";

hr = g_d3d->CreateInputLayout( &ied, 1, vsBlob->GetBufferPointer(), vsBlob->GetBufferSize(), &g_inputLayout );
vsBlob->Release();
if ( FAILED ( hr ))
    return hr;

g_d3dContext->IASetInputLayout( g_inputLayout );

// Create pixel shader
ID3DBlob* psBlob = nullptr;
errorBlob = nullptr;
hr = D3DCompileFromFile( L"PixelShader.hlsl", nullptr, nullptr, "main", "ps_4_0", 0, 0, &psBlob, &errorBlob );
if ( FAILED( hr ))
    return hr;

hr = g_d3d->CreatePixelShader( psBlob->GetBufferPointer(), psBlob->GetBufferSize(), nullptr, &g_pixelShader );
psBlob->Release();
if ( FAILED( hr ))
    return hr;

// Put some vertices up in this bitch
Vector3f vertices[] =
{
    Vector3f( 0.5f, -0.5f, 0.5f ),
    Vector3f( 0.5f, -0.5f, 0.5f ),
    Vector3f( -0.5f, -0.5f, 0.5f )
};

D3D11_BUFFER_DESC bd = { 0 };
bd.BindFlags            = D3D11_BIND_VERTEX_BUFFER;
bd.ByteWidth            = sizeof( Vector3f ) * 3;
bd.CPUAccessFlags       = 0;
bd.MiscFlags            = 0;
bd.StructureByteStride  = 0;
bd.Usage                = D3D11_USAGE_DEFAULT;

D3D11_SUBRESOURCE_DATA initData = { 0 };
initData.pSysMem            = vertices;
initData.SysMemPitch        = 0;
initData.SysMemSlicePitch   = 0;

hr = g_d3d->CreateBuffer( &bd, &initData, &g_vertexBuffer );
if ( FAILED( hr ))
    return hr;

uint stride = sizeof( Vector3f );
uint offset = 0;

g_d3dContext->IASetVertexBuffers( 0, 1, &g_vertexBuffer, &stride, &offset );
g_d3dContext->IASetPrimitiveTopology( D3D_PRIMITIVE_TOPOLOGY_TRIANGLELIST );

return S_OK; 
```

我的顶点类型：

```
struct Vector3f
{
    Vector3f( float ix, float iy, float iz )
        : x( ix ), y( iy ), z( iz ) {}

    float x;
    float y;
    float z;
}; 
```

我的顶点着色器：

```
float4 main( float4 pos : POSITION ) : SV_POSITION
{
    return pos;
} 
```

我的像素着色器：

```
float4 main() : SV_TARGET
{
    return float4( 1.0f, 1.0f, 1.0f, 1.0f );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:08:56.783

当然，这是一个非常愚蠢的疏忽。我只是输入了错误的顶点数据——所有的顶点都在同一个 Y 维度上；前两个甚至是相同的。

改为：

```
Vector3f( -0.5f, 0.5f, 0.5f ),
Vector3f( 0.5f, 0.5f, 0.5f ),
Vector3f( -0.5f, -0.5f, 0.5f ) 
```

还有很多歌舞和幸福。

# windows-phone-7 - 导航到新页面而不将当前页面放在后台堆栈？

> ID：10981344
> 
> 赞同：6
> 
> 时间：2012-06-11T13:45:26.810
> 
> 标签：windows-phone-7, navigation

在一个 Windows Phone 7 应用程序中，我得到了一个 CurrentPage，它在特殊事件中使用 NavigationService 导航到一个新页面：

```
NavigationService.Navigate(new Uri("/NewPage.xaml", UriKind.Relative)); 
```

现在，当用户单击 NewPage 时，我希望应用程序跳过 CurrentPage 并直接转到应用程序的 MainPage。

我尝试使用 NavigationService.RemoveBackEntry，但这会删除 MainPage 而不是 CurrentPage。

如何导航到新页面而不将当前页面放在后台堆栈中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T15:01:28.553

当导航到 NewPage.xaml 时，传递一个参数，以便您知道何时从后台堆栈中删除前一页。

您可以这样做：

从**CurrentPage.xaml**导航到**NewPage.xaml**时，传递**参数**

```
    布尔删除=真；
    字符串 removeParam = 删除？bool.TrueString : bool.FalseString;

    NavigationService.Navigate(new Uri("/NewPage.xaml?removePrevious="+removeParam , UriKind.Relative));

```

在 NewPage.xaml 的**OnNavigatedTo****事件**中，检查是否移除上一页。

 **```
    布尔删除 = 假；

    if (NavigationContext.QueryString.ContainsKey("removePrevious"))
    {
        remove = ((string)NavigationContext.QueryString["removePrevious"]).Equals(bool.TrueString);
        NavigationContext.QueryString.Remove("removePrevious");
    }

    如果（删除）
    {
        NavigationService.RemoveBackEntry();
    }

```

这样，您可以决定是否要将**CurrentPage.xaml从后台堆栈中删除。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:01:02.210

您在哪里调用了“NavigationService.RemoveBackEntry()”？我认为你必须在新页面上做，而不是在你想跳过的页面上！

编辑：所以为了获得更好的图片：你有主页->第一个子页面（应该在后退导航中跳过）->第二个子页面，它独立于第一个子页面。

2个想法：1）尝试在第一个子页面的OnNavigatedFrom-Event中调用“NavigationService.RemoveBackEntry（）” 2）如果NavigationMode（参见事件参数）==返回，请检查第一个子页面的OnNavigatedTo-Event再次导航回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:58:05.893

听起来您很早就调用了 RemoveBackEntry（当您仍在 CurrentPage.xaml 时）。这就是它删除 MainPage.xaml 的原因。当您导航到 NewPage.xaml 时，在 OnNavigatedTo 事件中调用 NavigationService.RemoveBackEntry，这应该可以解决问题。**

# css - 没有更多空间时将 Div 换行

> ID：10981348
> 
> 赞同：8
> 
> 时间：2012-06-11T13:45:39.527
> 
> 标签：css, asp.net-mvc-3, html, position

我正在开发一个 Web 应用程序（asp.net mvc3）

我有一个主 div。我想在那个主 div 中添加很多 div。

但我希望它们是这样的： div 应该在一行中彼此相邻出现，当没有更多空间时，下一个 div 将换行。（类似于写文本，当这一行没有更多空格时，下一个单词将换行）

我试图用它`display: inline;`来使它们彼此相邻出现，但是当它们到达主 div 的末尾时，我怎样才能让它们换行呢？

有没有办法在不对位置进行硬编码的情况下做到这一点？因为 div 是动态添加的，所以我不知道它们有多大或它们的数量

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T13:51:13.800

试试`display: inline-block`- [http://jsfiddle.net/7FJRr/1/](http://jsfiddle.net/7FJRr/1/)

**更新**如果 IE7 仍然是一个问题：

```
div {
    display: inline-block;
    zoom: 1; 
    *display: inline;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:53:18.257

你是这个意思吗？

[http://jsbin.com/uzoruq/edit#javascript,html,live](http://jsbin.com/uzoruq/edit#javascript,html,live)

我曾经`float:left`安排内容div

我不知道将包装 div 的解决方案，但这会使 div 内联

**编辑**

如果您愿意使用跨度，您可以这样做：

[http://jsbin.com/uzoruq/2/edit](http://jsbin.com/uzoruq/2/edit)

我用于`display:inline`跨度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-20T18:36:37.847

在 flex 的帮助下可以做到这一点。

```
display: flex;
flex-wrap: wrap; 
```

例如：

```
.flex{
  width: 5rem;
  background: yellow;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

.flex > div{
  width: 2rem;
  background: black;
  color: white;
  margin-top: 1rem;
  margin-bottom: 1rem;
}
```

```
<div class="flex">
  <div>1</div>
  <div>2</div>
  <div>3</div>
  <div>4</div>
  <div>5</div>
</div>
```

# javascript - URL 更改事件 - JavaScript

> ID：10981351
> 
> 赞同：0
> 
> 时间：2012-06-11T13:45:44.523
> 
> 标签：javascript, dom-events, settimeout

我有一个`setTimeout`将 URL 记录在一个名为`newURL`.

```
function checkURL() {
    var newURL = window.location;
} setInterval(checkURL, 1000); 
```

我想要发生的是，当 URL 更改时，必须执行某个功能。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:48:34.223

不知道为什么在你能捕捉到 URL 的变化之前页面不会重新加载。你也可以看看[window.onunload](https://developer.mozilla.org/en/DOM/window.onunload)

```
var checkURL = (function () {
    var oldURL = location.href;
    return function (fn) {
        var newURL = location.href;
        if (fn && oldURL !== newURL) {
            fn(oldURL, newURL);
        }
        oldURL = newURL;
    };
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:52:55.863

据我了解，当 url 更改时，将在该页面中重新执行 JS 脚本。"window.location" 将返回当前 URL，但 JavaScript 不会在脚本中记录 /register 数据，或者从一个页面到另一个页面的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:50:10.027

使用全局变量来存储旧 url。您可以检查 url 是否已更改并执行某些功能。

# git - 使用 Mac osx 推送到 github 时出错？

> ID：10981358
> 
> 赞同：0
> 
> 时间：2012-06-11T13:46:07.737
> 
> 标签：git, github, git-push

我在终端上采取的步骤

转到我要推送的项目目录：

```
>git remote add origin git@github.com:hackrvinchi/jquery.checkbox.git
>git push origin master 
```

但我得到这个错误，我不知道为什么

**ssh: connect to host github port 22: Operation timed out fatal: 远端意外挂断**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:50:17.590

git URL 错误。它应该是：

git@github.com/hackrvinchi/jquery-checkbox.git

不是 jquery.checkbox.git

见这里：[https ://github.com/hackrvinchi/jquery-checkbox](https://github.com/hackrvinchi/jquery-checkbox)

编辑2：（固定网址）

因此，要修复它，请执行以下操作：

```
git remote rm origin
git remote add origin git@github.com:hackrvinchi/jquery-checkbox.git 
```

然后再次尝试推动

# javascript - 浮动表格页眉和页脚

> ID：10981370
> 
> 赞同：0
> 
> 时间：2012-06-11T13:46:42.113
> 
> 标签：javascript, jquery, html

我正在处理表格，我想修改 javascript 代码，使表格末尾的“页脚”浮动在底部，类似于标题浮动在顶部的方式。

```
function UpdateTableHeaders() {
  $("div.divTableWithFloatingHeader").each(function() {
    var originalHeaderRow = $(".tableFloatingHeaderOriginal", this);
    var floatingHeaderRow = $(".tableFloatingHeader", this);
    var offset = $(this).offset();
    var scrollTop = $(window).scrollTop();
    if ((scrollTop > offset.top) && (scrollTop < offset.top + $(this).height())) {
      floatingHeaderRow.css("visibility", "visible");
      floatingHeaderRow.css("top", Math.min(scrollTop - offset.top, $(this).height() - floatingHeaderRow.height()) + "px");

      // Copy cell widths from original header
      $("th", floatingHeaderRow).each(function(index) {
        var cellWidth = $("th", originalHeaderRow).eq(index).css('width');
        $(this).css('width', cellWidth);
      });

      // Copy row width from whole table
      floatingHeaderRow.css("width", $(this).css("width"));
    } else {
      floatingHeaderRow.css("visibility", "hidden");
      floatingHeaderRow.css("top", "0px");
    }
  });
}

$(document).ready(function() {
  $("table.tableWithFloatingHeader").each(function() {
    $(this).wrap("<div class=\"divTableWithFloatingHeader\" style=\"position:relative\"></div>");

    var originalHeaderRow = $("tr:first", this)
    originalHeaderRow.before(originalHeaderRow.clone());
    var clonedHeaderRow = $("tr:first", this)

    clonedHeaderRow.addClass("tableFloatingHeader");
    clonedHeaderRow.css("position", "absolute");
    clonedHeaderRow.css("top", "0px");
    //clonedHeaderRow.css("left", $(this).css("margin-left"));
    clonedHeaderRow.css("visibility", "hidden");

    originalHeaderRow.addClass("tableFloatingHeaderOriginal");
  });
  UpdateTableHeaders();
  $(window).scroll(UpdateTableHeaders);
  $(window).resize(UpdateTableHeaders);
});
```

```
th {
  background-color: lightgrey;
  border: 1px solid black;
}

td {
  border: 1px solid black;
}
```

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<br/><br/><br/>
<table class="tableWithFloatingHeader" style="border: 3px" align="center">
  <thead>
    <tr>
      <th>t2 col header</th>
      <th>t2 col header</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>t2 data1</td>
      <td>t2 data1</td>
    </tr>
    <tr>
      <td>t2 data2</td>
      <td>t2 data2</td>
    </tr>
    <tr>
      <td>t2 data3</td>
      <td>t2 data3</td>
    </tr>
    <tr>
      <td>t2 data4</td>
      <td>t2 data4</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <tr>
      <td>t2 data5</td>
      <td>t2 data5</td>
    </tr>
    <tr>
      <td>t2 data6</td>
      <td>t2 data6</td>
    </tr>
    <tr>
      <td>t2 data7</td>
      <td>t2 data7</td>
    </tr>
    <tr>
      <td>t2 data8</td>
      <td>t2 data8</td>
    </tr>
    <tr>
      <td>t2 data9</td>
      <td>t2 data9</td>
    </tr>
    <tr>
      <td>t2 data10</td>
      <td>t2 data10</td>
    </tr>
    <thead>
      <tr>
        <th>t2 col footer</th>
        <th>t2 col footer</th>
      </tr>
    </thead>
  </tbody>
</table>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:31:50.690

使用插件 [http://fixedheadertable.com/](http://fixedheadertable.com/)

# perl - 如何对 Ghostscript 使用 CGI 请求

> ID：10981371
> 
> 赞同：1
> 
> 时间：2012-06-11T13:46:46.263
> 
> 标签：perl, cgi, ghostscript

我需要在我们的一个 cgi 中调用 Ghostscript 将 PDF 文件转换为 PNG 图像。此 cgi 在请求中有编码的 PDF 流，然后对其进行解码，例如

```
我的 $PDF_ENCODED = $q->param('PDF_ENCODED');
我的 $PDF_DECODED = decode_base64($PDF_ENCODED);

```

它会通过调用'gs'命令在磁盘上生成一个PNG图像。

我的问题是我不知道如何将 $PDF_DECODED 传递到 gs 命令行。我试过了

```
系统（“$PDF_DECODED | gs -dNOPAUSE -q -r300 -sDEVICE=png16m -dBATCH -sOutputFile=/tmp/ghostscript/new-test.png-”）

```

但它不起作用。

谢谢。

再次感谢 golimar 和 simbabque。它正在与

```
$SIG{管道} = '忽略';
open(FH, "| gs -dNOPAUSE -q -r300 -sDEVICE=png16m -dBATCH -sOutputFile=/tmp/ghostscript/new-test.png -") 或者死 "不能分叉：$!";
print FH "$PDF_DECODED\n" 或 die "can't write: $!";
关闭 FH 或死“无法关闭：status=$？”；

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:55:59.443

在 Perl 中，您可以像打开文件一样打开进程，并且当您写入“文件”句柄时，不是将数据写入文件，而是将数据通过管道传输到进程，请[*参阅*在`perlipc`](http://p3rl.org/ipc#Using-open%28%29-for-IPC).

# math - 四的幂 - utf-8 代码？

> ID：10981373
> 
> 赞同：1
> 
> 时间：2012-06-11T13:46:56.833
> 
> 标签：math, utf-8

是否存在 x(4) 的 utf8 代码，适用于跨浏览器/操作系统。

根据[http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts) ^4 应该在 U+2074 但不能让它工作（在 xp 上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:52:46.237

对我有用，但您的里程可能因字体而异。[http://www.fileformat.info/info/unicode/char/2074/browsertest.htm](http://www.fileformat.info/info/unicode/char/2074/browsertest.htm)

如果你想可靠地跨浏览器渲染更复杂的数学，你需要使用[mathjax](http://www.mathjax.org/)

# java - 安全角色引用无法正常工作

> ID：10981375
> 
> 赞同：4
> 
> 时间：2012-06-11T13:47:01.350
> 
> 标签：java, jsp, tomcat, servlets, web.xml

这些是我的 web.xml 的内容

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0" metadata-complete="true">
  <servlet>
    <security-role-ref>
      <role-name>MY_GROUP_NAME</role-name>
      <role-link>REGISTERED_USER</role-link>
    </security-role-ref>
  </servlet>
  <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
      <param-name>config</param-name>
      <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <resource-ref>
    <description>My datasource</description>
    <res-ref-name>jdbc/XXXXXXXX</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref>
  <security-constraint>
    <display-name>Example Security Constraint</display-name>
    <web-resource-collection>
      <web-resource-name>Protected Area</web-resource-name>
      <!-- Define the context-relative URL(s) to be protected -->
      <url-pattern>/protected/`*`</url-pattern>
      <!-- If you list http methods, only those methods are protected -->
      <http-method>DELETE</http-method>
      <http-method>GET</http-method>
      <http-method>POST</http-method>
      <http-method>PUT</http-method>
    </web-resource-collection>
    <auth-constraint>
      <!-- Anyone with one of the listed roles may access this area -->
      <role-name>tomcat</role-name>
      <role-name>role1</role-name>
      <role-name>REGISTERED_USER</role-name>
    </auth-constraint>
  </security-constraint>
  <!-- Default login configuration uses form-based authentication -->
  <login-config>
    <auth-method>FORM</auth-method>
    <realm-name>Example Form-Based Authentication Area</realm-name>
    <form-login-config>
      <form-login-page>/protected/login.jsp</form-login-page>
      <form-error-page>/protected/error.jsp</form-error-page>
    </form-login-config>
  </login-config>
  <!-- Security roles referenced by this web application -->
  <security-role>
    <role-name>role1</role-name>
  </security-role>
  <security-role>
    <role-name>tomcat</role-name>
  </security-role>
  <security-role>
    <role-name>REGISTERED_USER</role-name>
  </security-role>
</web-app> 
```

当我使用 ldap 中组 MY_GROUP_NAME 中的有效用户执行登录时，request.getRemoteUser() 和 request.getUserPrincipal() 工作正常。针对 MY_GROUP_NAME 测试用户

```
String role = request.getParameter("role"); 
request.isUserInRole(role); 
```

工作正常。

问题是当针对角色 REGISTERED_USER 测试用户时不起作用。有人看到我在这里缺少的东西吗？

**一些附加信息**

我使用 Apache Tomcat v7.0.22

LDAP 是 OpenDJ 2.4.5

视窗 7 操作系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:32:52.183

我没有使用 OpenDJ 的经验，但根据[https://wikis.forgerock.org/confluence/display/OPENDJ/Configure+Apache+Tomcat+with+OpenDJ+as+an+Identity+Store](https://wikis.forgerock.org/confluence/display/OPENDJ/Configure+Apache+Tomcat+with+OpenDJ+as+an+Identity+Store) 没有“地图" 在 tomcat 角色和 LDAP 规则之间，因为映射是一对一的并且名称应该相同。这就是您要使用的 LDAP 组应该定义为 Tomcat 角色，并且您应该在 Web 描述符 (web.xml) 的 security-role 部分使用它们的名称。

# encoding - 在 Cobol 中解析 USS XML 文件？

> ID：10981376
> 
> 赞同：1
> 
> 时间：2012-06-11T13:47:06.780
> 
> 标签：encoding, xml-parsing, cobol, zos

我正在使用 Cobol XML Parser 通过批处理 JCL 解析源自 HFS (USS) 文件系统的 xml 文档。

我的问题是 XML Parser 返回“XML DOCUMENT ERROR 0000000317”，这似乎是一个编码问题。

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:31:23.647

您需要确保 XML 声明上的编码标记有效并且与实际文档一致。您还需要确保正在运行的 LPAR 具有在 Unicode Conversion Services for z/OS 中定义的正确代码页转换。

# iphone - ios中的FBConnect应用邀请

> ID：10981378
> 
> 赞同：1
> 
> 时间：2012-06-11T13:47:16.597
> 
> 标签：iphone, objective-c, ios

嗨，我正在尝试向我的 facebook 朋友执行应用请求。我尝试了以下代码来发送应用邀请：

```
SBJSON *jsonWriter = [[SBJSON new] autorelease];
NSDictionary *testingDic = [NSDictionary dictionaryWithObjectsAndKeys:
                             @"5", @"wow",
                             @"1", @"testing",
                             nil];

NSString *testStr = [jsonWriter stringWithObject:testingDic];
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Learn how to make your iOS apps invite.",  @"message",
                               @"Check this out", @"notification_text",
                               testStr, @"data",
                               nil];

AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[[delegate facebook] dialog:@"apprequests"
                  andParams:params
                andDelegate:self]; 
```

我可以看到上面的代码执行没有错误，但是我没有从 Facebook 获得请求 ID 作为响应，而且我在 Facebook 中看不到我的应用程序请求。

请帮帮我。

# c# - 我应该在#if (DEBUG) 中包装对 Debugger.Log() 的调用吗？

> ID：10981380
> 
> 赞同：10
> 
> 时间：2012-06-11T13:47:20.740
> 
> 标签：c#, visual-studio, debugging, logging, compiler-optimization

是否有必要`Debugger.Log()`在`#if (DEBUG)`预处理器指令中包装调用以进行代码优化，还是 C# 编译器在构建`RELEASE`配置时仍会生成优化代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:03:53.593

*在RELEASE*模式下，*此*调用没有**任何**类型的优化。

 **呼叫出现在`IL`. 唯一的区别是如果没有*DEBUGGER*存在，它没有任何效果。

从文档[Debugger.Log](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.log.aspx)：

> 如果没有附加调试器，则此方法无效。

我建议衡量您的应用程序的性能，然后选择要遵循的步骤。

如果没有显着差异（从您的应用程序的角度来看），我会保留该日志。

这样，在需要的时候，您可以使用调试器附加到您的应用程序，并从日志中获取您可能需要的消息，就像`Debugger.Log`那时*那样*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:55:06.777

这是 Debugger.Log() 的声明，从参考源中检索到：

```
// Posts a message for the attached debugger.  If there is no
// debugger attached, has no effect.  The debugger may or may not
// report the message depending on its settings.
[MethodImplAttribute(MethodImplOptions.InternalCall)]
public static extern void Log(int level, String category, String message); 
```

请注意，该方法没有 [Conditional] 属性，它带有 [MethodImplAtttribute] 属性。这意味着该方法实际上是在 CLR 中实现的，用 C++ 代码编写。

因此，无论配置如何，*都会*进行方法调用。您可以从 SSCLI20 源代码分发版 clr/src/vm/debugdebugger.cpp 中找到该方法的实现。它使用 OutputDebugString()，这是一个在调试器中显示字符串的 winapi 函数（如果附加了字符串）。或者在像 SysInternals 的 DbgView.exe 这样的实用程序中。如果两者都不存在，则 api 调用什么也不做，并迅速返回。您只需支付函数调用开销，几纳秒。

方法调用没有什么值得优化的地方，无论您构建 Debug 还是 Release 配置，它都会以相同的方式执行。在发布版本中访问调试信息当然很方便，您可以决定是否要关闭该功能。很难说这些纳秒是否对您的程序有明显的影响。衡量，不要假设任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:12:50.577

以下代码的快速测试（.NET 4、Release、Any CPU）

```
class Program
{
    static void Main(string[] args)
    {
    #if (DEBUG)
        Debugger.Log(0, "category", "msg");
    #endif
    }
} 
```

产生这个 IL

```
.method private hidebysig static void Main(string[] args) cil managed
{
    .entrypoint
    .maxstack 8
    L_0000: ret 
} 
```

如您所见，没有调用`Debugger.Log`.**

# r - 使用 ffdfdply 拆分数据并获取拆分中每个 id 的特征

> ID：10981384
> 
> 赞同：1
> 
> 时间：2012-06-11T13:47:26.353
> 
> 标签：r

在 R 中，我`ffdf`用来处理大型数据集。我想`ffdfdply`从`ffbase`包中使用根据某个变量（var）拆分数据，然后为所有具有 var 唯一值的观察值计算一些特征（例如：var 的每个唯一值的观察次数）。为了看看这是否可行，`ffdfdply`我执行了下面描述的示例。

我希望它会在每个 Species 上拆分，然后计算每个 Species 的最小值`Petal.Width`，`Species`然后返回两列，每列包含三个条目，其中列出了那个和`Species`最小值。预期输出：`Petal.Width``Species`

```
 Species    min_pw
1 setosa     0.1       
2 versicolor 1.0       
3 virginica  1.4 
```

然而，`BATCHBYTES=5000`它将使用两个拆分，一个包含两个 Species，另一个包含一个 Species。这导致以下结果：

```
 Species   min_pw
1 setosa    0.1      
2 virginica 1.4 
```

当我更改`BATCHBYTES`为 2000 时，这将强制`ffdfdply`使用三个拆分，从而导致上面发布的预期输出。但是，我希望有另一种方法来强制拆分为分配给“拆分”的变量的每个唯一值。有没有办法做到这一点？或者您有任何其他建议来获得我需要的结果吗？

```
ffiris <- as.ffdf(iris)
result <- ffdfdply(x = ffiris,
                   split = ffiris$Species,
                   FUN = function(x) {
                      min_pw <- min(x$Petal.Width)
                      data.frame(Species=x$Species, min_pw= min_pw)
                   },
                   BATCHBYTES = 5000,
                   trace=TRUE
)
dim(result)
dim(iris)
result 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:35:54.970

ffdfdply 功能是在您有很多拆分元素时设计的，例如当您有 1000000 个客户并且您希望内存中的数据至少按客户拆分但可能有更多客户，如果您的 RAM 允许这样内部不需要做ff 其中 1000000 次。这就是为什么 ffdfdply 的文档指出：

> 请确保您的 FUN 涵盖这样一个事实，即多个拆分元素可以位于应用 FUN 的一大块数据中。因此，您的问题的解决方案是在 FUN 中涵盖这一点，如下所示

```
FUN=function(x){
  require(doBy)
  summaryBy(Petal.Width ~ Species, data=x, keep.names=TRUE, FUN=min)
} 
```

# php - 已弃用：函数 session_is_registered() - 有关如何解决此错误的任何想法

> ID：10981389
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:47:43.790
> 
> 标签：php, session, php-5.3, deprecated

> 已弃用：第 37 行的 /home/socia125/public_html/logout.php 中已弃用函数 session_is_registered()
> 
> 警告：无法修改标头信息 - 第 38 行 /home/socia125/public_html/logout.php 中的标头已由（输出开始于 /home/socia125/public_html/logout.php:37）发送

这是我正在使用的代码

```
<?php

session_start();
// Force script errors and warnings to show on page in case php.ini file is set to not     
display then
error_reporting(E_ALL);
ini_set('display_errors', '1');

// Unset all of the session variables
$_SESSION = array();
// If it's desired to kill the session, also delete the session cookie
if (isset($_COOKIE['idCookie'])) {
setcookie("idCookie", '', time()-42000, '/');
setcookie("passCookie", '', time()-42000, '/');
 }
 // Destroy the session variables
 session_destroy();
 // Check to see if their session is in fact destroyed
 if(!session_is_registered('firstname')){ 
 header("location: index.php"); // << makes the script send them to any page we set
 } else {
 print "<h2>Could not log you out, sorry the system encountered an error.</h2>";
  exit();
  } 
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:48:33.770

只需检查是否设置了会话变量：

```
if(!session_is_registered('firstname')){ 
```

变成

```
if (!isset($_SESSION['firstname'])) { 
```

# macos - SVN 使用错误的 sqlite 版本

> ID：10981391
> 
> 赞同：10
> 
> 时间：2012-06-11T13:47:50.973
> 
> 标签：macos, sqlite, svn

从 /usr/local/bin/ 运行我的 svn 时，它说：

> svn：E200029：无法执行原子初始化 svn：E200030：为 3.7.13 编译的 SQLite，但使用 3.6.12 运行

sqlite3 --version 给我 3.7.13

出了什么问题，我该如何解决？我在 Mac OS X (10.6.8) 上。

//编辑1：

/usr/local/bin/sqlite3 --version 3.7.13

/usr/bin/sqlite3 --version 3.7.13

//edit2：我通过自制软件安装 svn 并明确使用 /usr/local/bin/svn 来“修复”这个问题

## 让我总结一下以下答案中的修复和建议：

（请为相应的答案投票）

**对于 Mac 用户：**

*   （重新）通过自制软件或您使用的任何方式安装 svn（您可能需要`brew link --force sqlite3`）

**对于 Fedora 用户：**

*   尝试`yum update sqlite3`或`yum install sqlite`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:15:52.097

我遇到了同样的问题，我解决了下载[http://www.sqlite.org/sqlite-amalgamation-3.7.6.3.tar.gz](http://www.sqlite.org/sqlite-amalgamation-3.7.6.3.tar.gz)，使用 tar/gunzip 解压缩存档并将结果目录中的 sqlite3.c 处理到 $svn -src-文件夹/sqlite-amalgamation/sqlite3.c。

运行 configure/make/sudo make install 你应该解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-27T11:19:29.370

重新链接颠覆后，我也不得不重新链接`sqlite3`

```
brew link --force sqlite3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T17:57:01.057

我有 brew，svn 1.8，在 OSX 10.8 中运行良好。

我升级到10.9，坏了。`/usr/local/bin`出于某种原因，10.9 安装删除了brew 中的符号链接？

`brew update` 没修好。

`brew install svn` 固定svn，或者我是这么想的。然后实际上使用 svn 1.8（`/usr/local/bin`我的路径中的第一个）我也有上面的 sqlite 错误消息。一个较新的 sqlite 在 中`/usr/local/Cellar`，但没有符号链接`/usr/local/bin`或任何东西。

`brew install sqlite3` ...没有解决它。我注意到 brew 说这个组件没有符号链接。好的。

但是，在重新安装之后，进一步重新安装 svn brew svn uninstall brew svn install

确实修复了它。不知道为什么。现在可以svn co成功了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T21:04:38.040

这意味着 subversion 是使用 SQLite 版本 3.7.13 编译的，但现在您运行的是 SQLite 3.6.12。

您需要做的就是重新编译/重新安装您的颠覆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T00:58:22.437

更新sqlite3！！

我在 Fedora Core 20 上遇到过类似的问题

做了以下事情：

```
yum update sqlite3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-02T08:16:16.207

对我来说，`yum install sqlite`在 Fedora 中解决了这个问题。

# iphone - 手动调用 applicationDidEnterBackground

> ID：10981392
> 
> 赞同：0
> 
> 时间：2012-06-11T13:47:56.170
> 
> 标签：iphone, ios, cocoa-touch

我想将我的应用程序发送到后台，只需单击应用程序中的按钮即可。有什么方法可以手动或任何其他方式调用 applicationdidenterbackground 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:51:41.580

[iOS 人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)说“不要以编程方式退出”，因此必须将退出理解为包括“暂停”：

> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。
> 
> 显示一个有吸引力的屏幕，描述问题并提出更正建议。屏幕提供反馈，让用户确信您的应用程序没有问题。它使用户处于控制之中，让他们决定是否要采取纠正措施并继续使用您的应用程序，或者按下主页按钮并打开另一个应用程序
> 
> 如果您的应用程序的某些功能无法正常工作，请在人们激活该功能时显示屏幕或警报。仅当人们尝试访问不起作用的功能时才显示警报。

如果你真的想以编程方式退出你的应用程序，那么你可以调用`exit(0);`，但我怀疑你的应用程序会通过 Apple 审查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:50:55.127

不幸的是，没有任何官方方法可以强制应用程序进入后台状态（暂停状态）。

# batch-file - 批量启动持久化特定变量

> ID：10981395
> 
> 赞同：0
> 
> 时间：2012-06-11T13:48:00.530
> 
> 标签：batch-file, dos

我有 a.bat ，它有一个 variable `%errorlevel%`，下面的行调用 b.bat：

```
start /wait cmd /c b.bat 
```

如果`b.bat`设置`%errorlevel%`（例如`errorlevel = 5`）

我怎么可能只保留这个`%errorlevel%`变量`a.bat`，而不使用 CALL 命令。

我不想使用 CALL 的原因是因为`b.bat`包含一些我不想保留的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:44:22.753

*自最初发布以来，此答案已被大量编辑。*

您的命令应该按照当前编写的方式运行，尽管我认为使用 START 没有任何优势。简单地使用会更简单，更有效：

```
cmd /c "b.bat" 
```

由 b.bat 设置的 ERRORLEVEL 应该由 CMD 命令返回。当然，如果您创建了自己的名为 ERRORLEVEL 的环境变量来掩盖 Windows 维护的动态值，那么这将不起作用。

但是，我认为（如果可能）修改 b.bat 使其`SETLOCAL`位于顶部会更好。b.bat 定义的任何变量都是临时的，一旦脚本结束就会被遗忘。然后您可以使用 CALL 并且 b.bat 中的变量将消失，但将为调用者正确设置 ERRORLEVEL。

**b.bat**

```
@echo off
setlocal
set var=This value will be "forgotten" when b.bat ends
dir "This does not exist so ERRORLEVEL will be set to 1" 
```

**调用者.bat**

```
@echo off
set var=
call b.bat
echo ERRORLEVEL=%errorlevel%
set var 
```

但是根据您的评论，听起来好像您在 b.bat 中有一行，如下所示：

```
set errorlelvel=%errorsaved% 
```

你永远不应该像那样为 ERRORLEVEL 定义自己的值，因为它破坏了 ERRORLEVEL 应该用于的功能。

相反，您应该使用 EXIT /B 在脚本末尾设置错误级别

```
@echo off
setlocal
...
set someVar=anything. This value will be gone at script end because of SETLOCAL
...
someCommandThatGeneratesAnError
set errorsaved=%errorlevel%
...
exit /b %errosaved% 
```

* * *

如果您尝试从 b.bat （而不是 ERRORLEVEL）有选择地保留用户定义的变量，那么您确实应该修改 b.bat 以使其`SETLOCAL`位于顶部，然后`ENDLOCAL`与多种方法中的任何一种结合使用来保留值跨越 ENDLOCAL 障碍。[查看使环境变量在 ENDLOCAL 中存活](https://stackoverflow.com/q/3262287/1012053)的前 3 个投票答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:30:08.730

您不必公开内部变量即可在脚本之间进行通信。您可以使用常规参数将值发送到被调用脚本并从`%ERRORLEVEL%`环境变量中获取其数值结果。在以下示例中，`a.cmd`将参数传递给`b.cmd`并接收其执行结果（来自`%ERRORLEVEL%`）：

```
:: a.cmd ----
SETLOCAL
SET ARGUMENT=123
CALL b.cmd "%ARGUMENT%"
SET RESULT=%ERRORLEVEL%
ECHO B returned this numeric value as result (%RESULT%)

:: b.cmd ----
SETLOCAL
SET OTHERVAR=%~1
ECHO B received this value as argument (%OTHERVAR%)
EXIT /B 33000 
```

我加强了避免对变量使用*保留*名称的建议（正如@dbenham 也评论的那样）。

# jquery - 延迟加载jQuery，自定义触发事件

> ID：10981397
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:48:07.073
> 
> 标签：jquery, events, triggers, preload, lazy-loading

是否可以强制延迟加载“预加载”与延迟加载插件连接的不可见图像？这样当图像可见时，它就已经加载了。

我发现只有需要交互的事件，如鼠标悬停或单击，但我的自定义脚本没有不依赖用户事件的事件。

```
$("img.lazy").lazyload({ 
event : "click"
}); 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-06-14T16:14:56.957

在这里找到了解决方案：

[http://sumanrs.wordpress.com/2011/02/08/jquery-lazy-loading-images-no-scrolling/](http://sumanrs.wordpress.com/2011/02/08/jquery-lazy-loading-images-no-scrolling/)

在您的（例如点击）功能中插入：

```
$("img.lazy").each(function() {
   $(this).attr("src", $(this).attr("data-original"));
   $(this).removeAttr("data-original");
}); 
```

# c# - 我如何使用 vCloud API 1.5？

> ID：10981400
> 
> 赞同：1
> 
> 时间：2012-06-11T13:48:10.670
> 
> 标签：c#, asp.net, api

我正在为提供云解决方案的公司开发门户网站。使用此门户客户（使用 vCloud 服务的公司）创建/修改服务订阅，寻求支持，支付账单等。

现在我想检索虚拟数据中心资源。检索并显示以下服务订阅，例如
**-CPU/gHz
-RAM (GB) -应用程序
和客户端
-操作系统**

同样从这个门户（网站），超级管理员（超级用户）可以创建/修改新公司（组织）并设置 this.etc

管理员可以设置他的组织

- 超级用户是服务提供商 - 管理员是公司/组织用户

我在这个项目中使用 Asp.net。

我在问我该怎么做？通过 vCloud Director API？（他们正在使用 VMWare vCloud Director）还是通过一些 SDK？或任何其他 API 可用于执行上述任务？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T14:00:16.497

有一个可用的[REST api](http://www.vmware.com/pdf/vcd_10_api_guide.pdf)。您可以在 vmware 网站上找到帮助您使用它的代码（您必须获得一个免费帐户）。

您还必须获得您正在使用的 vCloud 版本，1.0 与 1.5 / 5.x 不兼容

我还建议您使用 java，因为 java 中不仅仅是一个 REST api。没有任何帮助，只使用 REST api 很长。所以我喜欢使用 java api-sdk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T12:46:26.447

还有一个用于 C# 的 SDK。您可以从那里获取已经创建的函数来访问 cloudDirectory 基础架构。 [https://www.vmware.com/support/pubs/vcd_pubs.html](https://www.vmware.com/support/pubs/vcd_pubs.html)

# asp.net - 更新面板不适用于视图

> ID：10981402
> 
> 赞同：0
> 
> 时间：2012-06-11T13:48:19.147
> 
> 标签：asp.net, updatepanel

我正在使用 updatepanel 作为链接按钮，这样它就不会刷新整个页面。单击该链接按钮时，我需要在多视图控件中设置一个活动视图，该控件在没有更新面板的情况下可以正常工作。但是当我使用更新面板时它不起作用。你能帮我怎么做吗

更新面板代码

```
 <asp:UpdatePanel ID="UpdatePanel3" runat="server">
    <ContentTemplate>
    <asp:LinkButton ID="changephoto" runat="server" ForeColor="Blue" OnClick="changephoto_Click">Change Photo</asp:LinkButton><br /><br />
    </ContentTemplate>
    <Triggers>
            <asp:AsyncPostBackTrigger ControlID="changephoto" EventName="Click" />
    </Triggers>
   </asp:UpdatePanel> 
```

点击事件

```
 Protected Sub changephoto_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    MultiView_Updates.SetActiveView(View_ChangePhoto)
    'bindprofileimage()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:51:49.477

将多视图放在更新面板中.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:12:34.897

如果您想在点击更新面板内的链接按钮时设置视图，那么您的多视图也必须存在于更新面板内。否则，控件将不会被刷新。

UpdatePanel 控件通过指定无需刷新整个页面即可更新的页面区域来工作。异步回发的行为类似于常规回发，因为生成的服务器页面执行完整的页面和控件生命周期。**但是，对于异步回发，页面更新仅限于页面区域，这些区域包含在 UpdatePanel 控件中并标记为要更新。**服务器仅将受影响元素的 HTML 标记发送到浏览器。

[使用嵌套的 UpdatePanel 控件](http://www.asp.net/ajax/documentation/live/ViewSample.aspx?sref=UpdatePanelTechnologyOverview1#UpdatePanelNestedCS.aspx)

UpdatePanel 控件可以嵌套。如果父面板被刷新，所有嵌套面板也会被刷新。

The following example shows markup that defines an UpdatePanel control inside another UpdatePanel control. A button in the parent panel triggers an update of the content in both the parent and the child panel. The button in the child panel triggers an update of only the child panel.

# linux - 执行多个分支。

> ID：10981403
> 
> 赞同：0
> 
> 时间：2012-06-11T13:48:21.583
> 
> 标签：linux, unix, version-control, perforce

我有一个关于 perforce 的问题。我需要设置一个方案，其中有 2 个版本，一个 QA 和一个生产版本。我需要能够提交代码、测试更改并将其推送到生产环境。开发和生产版本基本相同，但是有一些差异，例如数据库主机名、包含路径等...我也希望能够拥有可以在推送之前测试的个人版本到 QA。

是的，我必须使用 perforce。

有谁知道如何设置这样的东西？这将在基于 *nix 的操作系统上。我想编写一个 bash 或 Perl 脚本来处理这个问题。

谢谢，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:18:52.020

好的，所以生产是“最终目的地”。您将有一个从生产到 QA 的分支，这样当您想从 QA 提交到生产时，您将执行反向集成。同样，您的开发人员可以拥有来自 QA 的个人分支，以便提交给 QA，他们将进行反向集成。

只需双击 Changelist，就可以在 Perforce 中轻松检查提交的更改。

你有什么具体需要帮助的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:51:55.633

我只想补充一点，您可以通过整合 ( `p4 integ`) 来保持分歧，然后使用`-ay`(accept yours) 选项解决。这为您提供了合并信用，但实际上并没有复制更改。这样你就可以告诉 Perforce 你想忽略某些不应该真正合并的更改，然后你就不会再被它们打扰了。

# glassfish - Hello world JAX-RS WAB 示例在 Glassfish 3.1.2 中不起作用

> ID：10981405
> 
> 赞同：2
> 
> 时间：2012-06-11T13:48:27.557
> 
> 标签：glassfish, osgi, jersey

我是泽西岛的新手，我正在尝试在 Glassfish 3.1.2 上运行一个示例项目。该示例包括一个使用 Jersey 1.12 通过 PAX runner 运行测试并且所有测试都通过的任务。Glassfish 为服务器和 servlet 定制了 JAR 文件，版本为 1.11。当我部署时，我收到以下错误消息：

```
[#|2012-06-11T09:30:19.718-0400|SEVERE|glassfish3.1.2|com.sun.jersey.spi.inject.Errors|_ThreadID=24;_ThreadName=Thread-3;|The following errors and warnings have been detected with resource and/or provider classes:
SEVERE: Method, public java.lang.String com.sun.jersey.samples.helloworld.HelloWorldResource.getClichedMessage(), annotated with GET of resource, class com.sun.jersey.samples.helloworld.HelloWorldResource, is not recognized as valid resource method.
SEVERE: Method, public java.lang.String com.sun.jersey.samples.helloworld.AnotherResource.getAnotherMessage(), annotated with GET of resource, class com.sun.jersey.samples.helloworld.AnotherResource, is not recognized as valid resource method.
SEVERE: Method, public synchronized javax.ws.rs.core.Response com.sun.jersey.server.impl.wadl.WadlResource.geExternalGramar(javax.ws.rs.core.UriInfo,java.lang.String), annotated with GET of resource, class com.sun.jersey.server.impl.wadl.WadlResource, is not recognized as valid resource method.
SEVERE: Method, public synchronized javax.ws.rs.core.Response com.sun.jersey.server.impl.wadl.WadlResource.getWadl(javax.ws.rs.core.UriInfo), annotated with GET of resource, class com.sun.jersey.server.impl.wadl.WadlResource, is not recognized as valid resource method.|#] 
```

在上面的错误消息之后还有一个堆栈跟踪：

```
[#|2012-06-11T09:30:19.719-0400|SEVERE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=24;_ThreadName=Thread-3;|WebModule[/helloworld]StandardWrapper.Throwable
com.sun.jersey.spi.inject.Errors$ErrorMessagesException
at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:766)
at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:488)
at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
at javax.servlet.GenericServlet.init(GenericServlet.java:244)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1445)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1242)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5093)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5380)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.deploy(OSGiDeploymentRequest.java:183)
at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.execute(OSGiDeploymentRequest.java:118)
at org.glassfish.osgijavaeebase.AbstractOSGiDeployer.deploy(AbstractOSGiDeployer.java:121)
at org.glassfish.osgijavaeebase.OSGiContainer.deploy(OSGiContainer.java:154)
at org.glassfish.osgijavaeebase.JavaEEExtender.deploy(JavaEEExtender.java:107)
at org.glassfish.osgijavaeebase.JavaEEExtender.access$200(JavaEEExtender.java:61)
at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:151)
at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:148)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

# javascript - Javascript Draw2d - CanvasRenderingContext2D.implement 不是函数

> ID：10981412
> 
> 赞同：0
> 
> 时间：2012-06-11T13:48:35.537
> 
> 标签：javascript, canvas, mootools, compatibility, draw2d

在浏览器控制台中，当加载使用 draw2d 库的页面时，会出现“CanvasRenderingContext2D.implement is not a function”。是一个重要的问题吗？该应用程序似乎运行正常。我使用与 jquery 兼容的 mootools，因为在我的应用程序中已经导入了 jquery，所以问题可能是这样的。提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:52:41.697

这与IE版本<8中缺少的canvas元素有关

该应用程序本身运行良好，但您无法创建“SVGFigures”您可以使用 excanvas 来支持 IE。

问候

# r - 比较字符串并打印 R 行

> ID：10981413
> 
> 赞同：0
> 
> 时间：2012-06-11T13:48:37.683
> 
> 标签：r, for-loop, conditional-statements

我有一个数据框，有两列

```
'V1'     'V2'
joe      hi, my names is *joe*
anne     i was talking to *jake* the other day...
steve    *anne* should have the answer
steve    *joe* and I will talk later 
```

我想获取第 1 列中的名称列表并使用它在第 2 列中搜索它们。

（星号只是表明名称在长字符串中。）

我真正想说的是，对于第一列中的每个条目，如果您也可以在第二列中找到它，则打印该行。

我试过这个

```
for (i in dft[1]) if (i == dft[2]) print(i) 
```

这个想法是计算它们出现在每列中的次数，并最终得到类似

```
V1    V2    V3
joe   1     2
anne  1     1
jake  0     1
steve 2     0 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:29:12.850

假设您要计算第一列的每个元素在每一列中出现的次数，您可以执行以下操作

```
dat <- data.frame(V1=c("joe", "ann", "steve", "steve"),
                  V2=c("hi, my name is *joe*", 
                       "i was talking to *jake* the other day...", 
                       "*anne* should have the answer",
                       "*joe* and I will talk later"), 
                  stringsAsFactors=FALSE)

t(sapply(dat$V1, function(x) cbind(length(grep(x, dat$V1)), length(grep(x, dat$V2)))))

#      [,1] [,2]
#joe      1    2
#ann      1    1
#steve    2    0
#steve    2    0 
```

`sapply`将对 column 的每个元素应用一个函数`V1`。在这种情况下，该函数将计算该元素在列`V1`和列中出现的次数`V2`以及`cbind`它们一起出现的次数。 `sapply`将结果简化为矩阵。最后，`t`将矩阵转置为您要求的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:02:59.727

不幸`grep`的是，它的第一个参数没有向量化，所以你必须这样`mapply`做。

```
dat <- data.frame(V1=c("joe","anny"),V2=c("hi, my name is joe","blah anne"))
mapply( FUN=function(x,y) grepl(x,y), x=dat$V1, y=dat$V2 ) 
```

这为您提供了一个逻辑向量，您可以将其用于子集或求和以用于显示目的。

# c++ - c ++何时将方法放在类之外

> ID：10981417
> 
> 赞同：2
> 
> 时间：2012-06-11T13:48:56.597
> 
> 标签：c++, namespaces

我在 C++ 应用程序中看到了一些时候只使用带有头文件和源文件的命名空间声明，如下所示：

```
#ifndef _UT_
#define _UT_

#include <string>
#include <windows.h>

namespace UT 
{
    void setRootPath(char* program_path, char* file_path);
    char * ConvertStringToCharP(std::string str);
};

#endif

//and then in UT.cpp
#include "UT.h"

namespace UT 
{
    char * ConvertStringToCharP(std::string str)
    {
        char * writable = new char[str.size() + 1];
        std::copy(str.begin(), str.end(), writable);
        writable[str.size()] = '\0';  
        return writable;
    }

    void setRootPath(char* program_path, char* file_path) 
    {
        //...
    }
} 
```

用静态方法定义经典类会更好吗？
还是只是简单的课？
这种方法对编译器链接器有更好的作用吗？

此命名空间中的方法被称为 allot of times 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:51:28.453

在性能方面，`static`在`namespace`. 虽然这是一个逻辑问题。您的功能是否与课程相关？

一个很好的问题要问自己——**你是为了更好的组织而在类中创建`static`成员函数（或者只是为了将它们组合在一起）？**如果答案是肯定的，您可能应该使用`namespace`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T14:02:44.693

巧合的是，我碰巧在 Stack Overflow 中阅读[了这个答案](https://stackoverflow.com/questions/10976312/how-to-integrate-a-library-that-uses-expression-templates/10976686#10976686)，以解决稍微不同的问题。用户 rhalbersma 提供了一个很好的链接，指向[Dobb 博士的一篇文章](http://www.drdobbs.com/184401197)，作者 Scott Meyers 解释了如何在类外实现方法（非友元方法），但在同一个命名空间内实际上*改进*了封装。对我来说，今天是一个很好的学习。希望这对您也有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T13:54:08.607

当方法的含义独立于类时，您将方法放在所有类之外。其他语言（Java、C#）中的静态类是一种弥补无法将方法放在类之外的方法。由于 C++ 通过命名空间开箱即用地提供了这种能力，因此使用额外的“静态类”对代码的读者来说是违反直觉的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:58:13.850

使用静态成员函数的主要原因`class`是与类及其成员的逻辑和概念关系。

另一个原因可能是启用模板*部分*特化，这对于函数模板是不允许的，但对于类。

否则，请使用独立函数（在适当的 中定义`namespace`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T14:03:05.613

默认情况下，您应该始终尝试最小化类上的方法。如果您可以**根据类**而不是在类中实现功能，那么您应该这样做。换句话说，如果您可以通过使用已经发布的公共接口来实现所需的功能，那么您应该这样做。这极大地减少了代码对实现细节的依赖。

因此，如果您随后可以在与该类自然相关的适当命名空间中在该类之外实现它。

编辑：看来 OP 确实在询问是否实现命名空间或静态类作为实用程序/相关功能的持有者对象。在我看来，命名空间是做到这一点的正确方法，因为这就是它们的用途。不需要上课。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T14:31:28.740

没有绝对的规则，但一般来说，除非函数表现出很大程度的连贯性，并且由于某种原因你想关闭“命名空间”，所以客户端不能向其中添加函数，使用`namespace` 通常比使用更可取`class`。当然，除非目的是使它们可用于模板：您可以在类上实例化模板，但不能在命名空间上实例化。（这种技术通常称为“特征”；没有非静态成员的类称为特征类。）

即使您确实使用命名空间，您也应该定义函数：

```
void UT::setRootPath( char const* programPath, char const* filePath)
{
    //  ...
}

char* UT::convertStringToCharP( std::string const& str )
{
    //  ...
} 
```

这样，编译器将检测到函数签名中的任何拼写错误。

# ruby-on-rails - 为什么我的 Rails 控制器不工作？

> ID：10981426
> 
> 赞同：1
> 
> 时间：2012-06-11T13:49:22.393
> 
> 标签：ruby-on-rails

我正在尝试从我的控制器运行 javascript 行作为对 AJAX 调用的响应：

```
respond_to do |format|
  if params[:return_to] == 'monthly_calendar'
    render js: "alert('hey Trip!');"
  else
    format.js   { render :partial => @task, layout: false }
    format.html { redirect_to things_url }
    format.json { render :json => @object.to_json }
    format.xml do
      if @task.new_record?
        render :xml => @task.errors.to_xml
      else
        render :xml => @task.to_xml, :status => '201 Created'
      end
    end
  end 
```

相反，这会返回 406。有什么想法吗？

它肯定会在此声明中进行正确的调用。但不知道如何处理 javascript 调用，并返回 406。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:55:45.947

改成这个

```
respond_to do |format|
   if params[:return_to] == 'monthly_calendar'
      format.js { render js: "alert('hey Trip!');" }
   else
  ..... 
```

因为您没有指定响应的格式，例如 format.html { #your code here } 当 params[:return_to] == 'monthly_calendar' 时。查看[respond_to](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)的文档以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:57:04.380

您可以渲染完整视图`task.js.erb`而不是局部视图。

这是关于您要完成的工作的一个很好的教程：

```
http://blog.bernatfarrero.com/jquery-and-rails-3-mini-tutorial/ 
```

我希望它有所帮助。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:58:07.280

尝试响应js格式：

```
format.js { render js: "alert('hey Trip!');" } 
```

# java - Tomcat中的阻塞与非阻塞主线程

> ID：10981430
> 
> 赞同：1
> 
> 时间：2012-06-11T13:49:38.337
> 
> 标签：java, multithreading, servlets

通常在tomcat中，一个*线程*会运行，当一个请求进来时，它会将服务请求的责任分配给线程池中的一个线程。

就可伸缩性而言，主*线程*是阻塞还是非阻塞有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:47:30.213

非阻塞 IO 具有以下优点：

*   **高度可扩展：**因为不再需要每个客户端一个线程。它可以有效地支持更多的客户端。
*   **High Keep Alive：**阻塞IO需要阻塞直到下一个请求的keepalive时间。非阻塞是通知模型，它可以支持高保活时间。
*   **高负载时更好的性能：**因为在阻塞 IO 中，每个连接有一个线程，所以 n 个连接需要 n 个线程。随着值 n 的增加，性能下降，因为更多的线程上下文切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:35:01.893

当在 tomcat 中处理传入请求时，它会将连接分配给其线程池中的线程。

这里重要的是尽可能快地运行线程。您通常在此线程中运行阻塞 io 调用，用于文件 io、db 等。

您需要适当调整此线程池的大小以处理您的预期流量。

本质上，当使用 Java EE servlet 规范时，您被迫以每个传入连接方式在一个线程中处理您的请求。

有一些非阻塞框架。查看[http://www.playframework.org/](http://www.playframework.org/)和 Jetty（[默认情况下 Jetty 非阻塞？](https://stackoverflow.com/questions/4156420/jetty-nonblocking-by-default)）

# php - 基本 PHP - 从 stdClass 对象中获取数据

> ID：10981433
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:49:41.490
> 
> 标签：php, mysql

我有一个关于我认为一定很容易的问题的快速问题 - 我做了一些研究，发现了一些看起来很有希望的链接，尤其是[this](https://stackoverflow.com/questions/6111481/php-stdclass-object)，但由于某种原因它对我不起作用。

无论如何，我在 MySQL 中创建了一个存储过程，并使用 MySQL Workbench 对其进行了测试，它可以工作 - 它只是添加 num1 和 num2 并返回结果。现在我试图让它在 PHP 中工作，但结果不是一个整数，而是一个包含该整数的 stdClass 对象的数组。从返回大量数据的过程的角度来看，这是有道理的，但是我在仅处理整数时遇到了一些麻烦。

我运行这个：

```
 CALL database.routine(2,7) 
```

我将结果保存到 $var 中。当我运行 print_r($var) 时，我得到：

```
 Array
    (
    [0] => stdClass Object
    (
    [num1+num2] => 9
    )
    ) 
```

因此，为了超越 Array 部分，我通过运行 print_r($var[0]) 专门询问了其中的第一个元素，这让我：

```
 stdClass Object
    (
    [num1+num2] => 9
    ) 
```

现在我需要更深一层...我尝试了上面链接到的页面所说的内容，并尝试访问 $var[0]->[num1+num2]，因为该字段似乎已命名，但是不起作用。我也尝试了一些单引号和双引号的组合，但没有运气。如何从这个对象中得到数字 9？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:53:54.863

尝试...

```
$var[0]->{'num1+num2'} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T13:51:59.920

尝试这个

```
$var[0]->{"num1+num2"} 
```

或者

```
$prop = 'num1+num2';
$var[0]->$prop; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T13:52:05.863

你试过这个吗？

```
$var[0]->{'num1+num2'} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T13:52:10.923

尝试以下`$var[0]->{'num1+num2'}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T14:10:47.153

这很疯狂，但它可能会奏效！

`$var[0]->{'num1+num2'}`

# html - 单个文本重叠在元素上

> ID：10981434
> 
> 赞同：1
> 
> 时间：2012-06-11T13:49:43.540
> 
> 标签：html, twitter-bootstrap

我有以下代码

```
<div class="row-fluid">
    <div class="span6"><img src = "<?php echo $photo ?>"/><?php echo $row['comment'];?></div>
    <div class="span6"></div>
</div> 
```

产生这个：[http ://d.pr/i/g4y7](http://d.pr/i/g4y7)

为什么文本“thissssssss..sss”会与另一个跨度重叠，而带有空格的文本“this this this”会显示得很好？

预期的结果是文本的第一部分。问题是第二个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:52:42.010

因为浏览器不知道如何换行这个长词。

您必须声明：

```
 <element> { word-wrap: break-word } 
```

避免这种情况。

# visual-studio-2010 - 行和列条目

> ID：10981436
> 
> 赞同：0
> 
> 时间：2012-06-11T13:49:50.643
> 
> 标签：visual-studio-2010, mfc

我正在使用 MFC 开发 Visual Studio。我想制作一个有行和列的表格。具有四个条目和列条目的行没有限制。我应该使用哪个工具箱才能继续执行此任务。我尝试了列表框、组合框、mfc vslist，但这些都不能满足我的要求。请指导我应该为此目的使用哪个工具箱。[我从该链接http://www.functionx.com/visualc/controls/listbox.htm](http://www.functionx.com/visualc/controls/listbox.htm)获得了某种信息，但这不是必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:47:23.230

根据您的描述，您可以在报告模式下使用标准[列表控件 (CListCtrl)](http://www.functionx.com/visualc/controls/listcontrol.htm)，或者，如果需要更高级的功能，可以使用成熟的网格控件。在 codeproject 你可以找到这两个，它们被广泛使用：

*   [MFC 网格控件](http://www.codeproject.com/Articles/8/MFC-Grid-control-2-27)
*   [终极网格](http://www.codeproject.com/Articles/20183/The-Ultimate-Grid-Home-Page)

我不知道它们是否适用于 VS 2010，但根据提供的链接，第一个可以。Ultimate Grid 说它适用于 VS2005，但我将它与 VS2008 一起使用。不过，我不记得是否必须更改任何内容才能使其正常工作。

无论如何，我会首先尝试标准 CListCtrl，如果您发现需要更多，请尝试其他任何一个。

# sharepoint-2010 - 搜索结果显示来自用户没有权限的网站

> ID：10981438
> 
> 赞同：1
> 
> 时间：2012-06-11T13:49:58.043
> 
> 标签：sharepoint-2010, sharepoint-search

**我有的？**

我有一个配置了 FBA 的 SharePoint 2010 Web 应用程序，它向 Internet 公开。根网站集具有巨大的层次结构，每个网站都有包含许多文档的文档库。

定义了 10 多个站点组，其中一些只能访问某些站点。

**我面临什么问题？**

一切正常，突然间我在企业搜索中遇到了问题。

当用户搜索时，搜索结果会显示所有内容（包括用户没有权限的网站）并单击结果，它会打开项目（页面/文档）或显示**访问被拒绝**错误，具体取决于用户是否具有该权限物品。

有人能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T06:48:28.570

我们终于解决了这个问题。

我们已在相关 Web 应用程序的用户策略中授予`Full Read`权限。我不确定给予此许可的原因。我们删除了它。然后，完全爬网解决了这个问题。`NT AUTHORITY\Authenticated Users``All zones`

谢谢！

# bash - 将文件名读入数组

> ID：10981439
> 
> 赞同：74
> 
> 时间：2012-06-11T13:50:00.743
> 
> 标签：bash, unix, cygwin

我想获取一个文件列表，然后将结果读入一个数组，其中每个数组元素对应一个文件名。这可能吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-06-11T13:53:40.937

不要使用`ls`，它[不是](https://mywiki.wooledge.org/ParsingLs)用于此目的。使用通配符。

```
shopt -s nullglob
array=(*)
array2=(file*)
array3=(dir/*) 
```

`nullglob`如果没有匹配项，该选项会导致数组为空。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-11T13:53:23.367

以下将在当前目录中创建一个带有 ls 输出的数组 arr：

```
arr=( $(ls) ) 
```

尽管使用的输出`ls`根本不安全。

比`ls`您可以使用的更好、更安全`echo *`：

```
arr=( * )

echo ${#arr[@]} # will echo number of elements in array

echo "${arr[@]}" # will dump all elements of the array 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-04T07:53:35.080

*在 bash 中，您可以使用路径名扩展（通配符）*创建一个文件名数组，如下所示：

```
#!/bin/bash
SOURCE_DIR=path/to/source
files=(
   "$SOURCE_DIR"/*.tar.gz
   "$SOURCE_DIR"/*.tgz
   "$SOURCE_DIR"/**/*
) 
```

上面将创建一个名为的数组`files`并向其添加 N 个数组元素，其中数组中的每个元素对应于以or`SOURCE_DIR`结尾的项目，或者其子目录中的任何项目，如丹尼斯在评论中[指出](https://stackoverflow.com/questions/10981439/reading-filenames-into-an-array/51683629?noredirect=1#comment90332542_51683629)的那样，子目录递归可能。`.tar.gz``.tgz`

然后，您可以使用`printf`来查看数组的内容，包括路径：

```
printf '%s\n' "${files[@]}" # i.e. path/to/source/filename.tar.gz 
```

或者使用*参数替换*来排除路径名：

```
printf '%s\n' "${files[@]##*/}" # i.e. filename.tgz 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T03:45:00.703

其实，`ls`也不是办法。尝试这个：

```
declare -a FILELIST
for f in *; do 
    #FILELIST[length_of_FILELIST + 1]=filename
    FILELIST[${#FILELIST[@]}+1]=$(echo "$f");
done 
```

要从数组中获取文件名，请使用：

```
echo ${FILELIST[x]} 
```

要从从 x 开始的数组中获取 n 个文件名，请使用：

```
echo ${FILELIST[@]:x:n} 
```

有关 bash 数组的精彩教程，请参阅： [http ://www.thegeekstuff.com/2010/06/bash-array-tutorial/](http://www.thegeekstuff.com/2010/06/bash-array-tutorial/ "bash 数组教程")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-15T19:03:42.550

尝试这个，

```
path="" # could set to any absolute path
declare -a array=( "${path}"/* ) 
```

我假设您稍后会从列表中取出不需要的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-23T22:18:37.693

如果您需要一个无法通过通配符返回的更具体的文件列表，那么您可以使用进程替换来使用以空字符分隔`find`的循环来替换命令。`while`

例子：

```
files=()
while IFS= read -r -d $'\0' f; do
    files+=("$f")
done < <(find . -type f -name '*.dat' -size +1G -print0) 
```

# php - Twitter API - 在 PHP 中确定本地时间

> ID：10981443
> 
> 赞同：2
> 
> 时间：2012-06-11T13:50:10.127
> 
> 标签：php, twitter

twitter API 以 UTC 时间提供所有推文。您还可以获取登录用户的 UTC 偏移量和“时区”：

例如

created_at = Mon Jun 11 13:17:11 +0000 2012
utc_offset = -18000
time_zone = 东部时间（美国和加拿大）

我将 created_at 时间转换为时间戳然后添加 utc_offset 没有问题，但 utc_offset 不考虑夏令时。所以在 DST 期间，我所有的时间都减少了 1 小时。

另一个问题是 Twitter API 提供的 time_zone 值与 php 时区格式 (http://www.php.net/manual/en/timezones.america.php) 不匹配。

有没有人知道如何考虑 DST 以向用户显示准确的本地时间？

我开始认为也许使用客户端脚本来转换 UTC 时间是我最好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:50:12.343

我想你是对的。你真的只有两个选择：

*   手动创建一个数组（除非其他人已经在某个地方为您完成了这项工作..），其中包含 Twitter API time_zone 字符串和索引以及 PHP 等效值作为值，或者
*   使用简单的 JavaScript 在客户端修改标准化的时间字符串。

我知道我更喜欢什么。

这篇文章的第二个答案有一个很好的例子，用于 javascript
[Parsing Twitter API Datestamp](https://stackoverflow.com/questions/2611415/parsing-twitter-api-datestamp)

# java - 在java中，是否可以在执行期间的任何特定时间点找到内存堆上的当前对象？

> ID：10981445
> 
> 赞同：0
> 
> 时间：2012-06-11T13:50:16.830
> 
> 标签：java, memory, object

说我有课

```
class A{
  //code for class A
}

class B{
  //code for class B
}

class A{
  public static void main(String a[]){
    //Initialize m instances of A and n instances of B and store each in arrays
    //Equate any arbit index in the array to null
  }
} 
```

在这种情况下，我的主要目标是随时在内存中找到 A 类和 B 类的所有活动实例。

我想必须可以使用调试器。

但是，由于某种原因（原因超出了问题的范围），我需要从*代码本身*中获取实例。因此，我需要一个像

```
public void getAllActiveInstances(){
  //Print values
} 
```

* * *

编辑：我不需要实例来操作它们。我只需要知道它们是否*存在*。这主要用于调试目的。如果这是不可能的，那么请解释如何使用调试器来做同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:53:58.813

简短的回答是否定的，您不应该在任何时候使用 java 查看内存。

长答案是，如果在 GC 收集对象后有任何方法可以访问对象，那么您就违反了 GC 的原则，即只收集执行代码无法以任何方式到达的东西。垃圾收集的内存被释放并返回给程序来做它想做的任何事情。这意味着如果您已经对对象 A 进行了 GC，则允许 java 将任意数量的东西写入该位置，从而破坏该内存块的“A-ness”。尝试读取现在存储在该内存块中的对象 B 并假装它是 A 会导致各种问题。

展望未来：要跟踪您创建的所有类，我建议修改类本身。您的类可以有一个`static`容器（如 a `HashMap`），并且构造函数将构造的类添加到`HashMap`. 但是，请注意，由于您正在使用对所有已创建对象的引用，垃圾收集将永远不会收集这些对象并释放该内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:56:55.437

“在这种情况下，我的主要目标是随时在内存中找到 A 类和 B 类的所有活动实例，而不管垃圾收集器是否删除了对象。”

如果垃圾收集器已将其删除，则它不会是活动实例，也不会是任何类型的实例。

没有用于此的 Java API，当然 JRockit Flight Control 和/或调试器可以为您执行此操作，但如果您想要一种实际的编程方式，您将不得不手动滚动它。祝你好运，让它可靠。您可能需要使用构造函数和终结器来增加和减少对象数量。

不要尝试实现自己的对象池，除非你真的，真的认为你可以在自己的游戏中击败热点优化器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:01:20.937

正如您提到的，您可以使用调试器来完成。Java 提供调试 API。您可以实现自己的调试器并连接到应用程序本身。

另一种方法是检测你的课程。我知道以下技术：

1.  使用存储对必须监视的所有实例的引用的特殊工厂来实例化它们。
2.  使用 AOP（例如 AspectJ）。方面会将创建的实例注册到存储库中（如上所述）
3.  使用[java 检测包动态](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html)更改类。看看[SizeOf](http://sizeof.sourceforge.net/) - 一个使用 java 检测 API 的非常简单的项目。你可以用它作为例子来学习这个问题。

# nsarray - NSDictionary + NSArray + plist

> ID：10981450
> 
> 赞同：1
> 
> 时间：2012-06-11T13:50:40.310
> 
> 标签：nsarray, plist, nsdictionary

我有一个 plist 文件，其中包含 6 个项目。

![在此处输入图像描述](../Images/26f8c04d5bf50a23b56a24f401490835.png)

当我将它加载到一个数组中并在表格视图中显示它时，它没有像上面那样排序，看起来像这样：

![在此处输入图像描述](../Images/5dfe0a6bf5f17920ed404391a4f10730.png)

这是我正在使用的代码：

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"ghazal2" ofType:@"plist"];
myDictionary = [[NSDictionary alloc] initWithContentsOfFile:plistPath];
myArray = [myDictionary allKeys]; 
```

我使用时它仍然未排序`allValues`

我怎样才能使它正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:25:57.147

据我了解，NSDictionary（具有讽刺意味）不会以任何特定方式（字母、数字、值、索引等）从 plist 中对项目进行排序，您必须使用 NSArray 才能保留 plist 中的顺序.

我无法修复我的，但这个链接似乎显示其他人已经......

[Plist 数组到 NSDictionary](https://stackoverflow.com/questions/1343121/plist-array-to-nsdictionary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:44:31.873

这是解决方案：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if (!myArray2) // myArray2 is NSMutableArray
    {
        myArray2 = [[NSMutableArray alloc] init];
    }

    NSString *path = [[NSBundle mainBundle] pathForResource:@"list" ofType:@"plist"];
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];

    NSArray *sortedArray = [[dict allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

    for(NSString *key in sortedArray) 
    {      
        [myArray2 addObject:[dict objectForKey:key]];
    }

    for(NSString *key in myArray2) 
    {      
        NSLog(@"it is: %@", key);
    }   
} 
```

# android - android textview 之间的换行符。和 ”

> ID：10981457
> 
> 赞同：0
> 
> 时间：2012-06-11T13:51:04.070
> 
> 标签：android, textview, newline, line-breaks

我有一个引号中的句子，例如“我有一个引号中的句子。”。如果句子对我的文本视图来说有点太长，则句子在点和引号之间会被打断，看起来很难看。我总共有几百个句子，所以如果我改变大小或设备，它会发生在其他句子上。这是一个错误吗？有没有人有解决方案如何解决这个问题？

谢谢

“这是另一个更长的描述。”
“就是这句话。”

第一个看起来不错，像这样：
“这是另一个更长的
描述。”

第二个是这样的：
“这是句子。
”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:06:53.077

我建议您将 TextView 的大小增加 1dp，但如果这不是一个选项，您可以设置 maxLines = 1。

# ios - 需要一些帮助来配置我的项目架构

> ID：10981463
> 
> 赞同：4
> 
> 时间：2012-06-11T13:51:28.560
> 
> 标签：ios, xcode

我的 iOS 项目有两个依赖项。

*   第一个名为 LK，它是一个通用框架，具有我所有项目中使用的一些功能（0 依赖项）。
*   第二个叫LKS，它是一个包含共享功能的特定框架（1个对LK的依赖）

**问题**：我当前的项目有 2 个依赖项（LK 和 LKS），而 LKS 与 LK 有依赖关系。所以我设置了 LKS 标头搜索路径以包含 LK 标头。但我认为这样做很肮脏。

您是否有更好的解决方案来设置我的项目架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:18:12.473

其实它一点也不“脏”。如果您使用“#import”，Objective-C 将防止标题被多次包含。

如果您打算在任何地方包含 LK，您可以将它添加到您的“projectName-Prefix.pch”文件中。这将强制它包含在您的所有项目标头中，这样就无需在 LKS 中明确包含它。

# c - Snow Leopard 上的组装器损坏

> ID：10981464
> 
> 赞同：1
> 
> 时间：2012-06-11T13:51:30.417
> 
> 标签：c, xcode, gcc, osx-snow-leopard

这是雪豹（gcc 4.2.1）上的 XCode 3.2.6。试图编译一个[Hello World 程序](http://c.learncodethehardway.org/book/learn-c-the-hard-waych2.html#x7-150002)并得到一个段错误，并带有如下所示的崩溃报告（这是在尝试 Learn C the Hard Way 中的第一个示例）。任何可能的解决方案的提示都会很棒。

此外，当您尝试打开或创建项目时，XCode 会崩溃并显示“+entityForName: could not locate an NSManagedObjectModel for entity name 'DTExtensionPointDescription'”。

```
Process:         as [44911]
Path:            /usr/bin/as
Identifier:      as
Version:         ??? (???)
Code Type:       X86-64 (Native)
Parent Process:  i686-apple-darwin10-gcc-4.2.1 [44909]

Date/Time:       2012-06-11 08:47:14.521 -0400
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   libSystem.B.dylib               0x00007fff851cdad2 rindex + 8
1   as                              0x0000000100000775 0x100000000 + 1909
2   as                              0x00000001000006d4 0x100000000 + 1748

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000000  rbx: 0x00007fff5fbff2a0  rcx: 0x000000000000002f  rdx: 0x0000000000000000
  rdi: 0x0000000000000000  rsi: 0x000000000000002f  rbp: 0x00007fff5fbfee40  rsp: 0x00007fff5fbfee40
   r8: 0x0000000000000001   r9: 0x8080808080808080  r10: 0x00007fff8a96c169  r11: 0x00007fff851cdaca
  r12: 0x00007fff5fbfee98  r13: 0x0000000000000000  r14: 0x00007fff5fbff708  r15: 0x0000000000000007
  rip: 0x00007fff851cdad2  rfl: 0x0000000000010246  cr2: 0x0000000000000000

Binary Images:
       0x100000000 -        0x100002fff  as ??? (???) <44A4A2BA-257C-914C-FA97-714D15FFDBE1> /usr/libexec/gcc/i686-apple-darwin10/4.2.1/as
    0x7fff5fc00000 -     0x7fff5fc3be0f  dyld 132.1 (???) <DD3F7F3E-8612-A7BD-F508-9EF29132C419> /usr/lib/dyld
    0x7fff82f8a000 -     0x7fff82f8eff7  libmathCommon.A.dylib 315.0.0 (compatibility 1.0.0) <95718673-FEEE-B6ED-B127-BCDBDB60D4E5> /usr/lib/system/libmathCommon.A.dylib
    0x7fff85191000 -     0x7fff85352fef  libSystem.B.dylib 125.2.11 (compatibility 1.0.0) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib
    0x7fffffe00000 -     0x7fffffe01fff  libSystem.B.dylib ??? (???) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib 
```

这里有一些有趣的东西——这里是我系统上所有的“as”二进制文件（和/或链接）：

```
/Developer/usr/bin/as
/Developer/usr/libexec/gcc/darwin/i386/as
/Developer/usr/libexec/gcc/darwin/ppc/as
/Developer/usr/libexec/gcc/darwin/ppc64/as
/Developer/usr/libexec/gcc/darwin/x86_64/as
/Developer/usr/libexec/gcc/i686-apple-darwin10/4.0.1/as
/Developer/usr/libexec/gcc/i686-apple-darwin10/4.2.1/as
/Developer/usr/libexec/gcc/powerpc-apple-darwin10/4.0.1/as
/Developer/usr/libexec/gcc/powerpc-apple-darwin10/4.2.1/as
/Developer/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin10/4.2.1/as
/Developer/usr/llvm-gcc-4.2/libexec/gcc/powerpc-apple-darwin10/4.2.1/as 
```

段错误是 i686 的（即使在没有输入的情况下调用）。有没有办法（一个环境变量）我可以用来告诉 GCC 使用 x86_64 架构（我在 i7 上，所以无论如何它应该是合适的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:06:54.880

[Hello World 程序](http://en.wikipedia.org/wiki/Hello_world_program)的重点是确认您的编译系统正在工作并且您知道如何使用它。

用 Hello World 炸毁汇编器非常清楚地表明您的编译系统无法正常工作。

# ubuntu - 如何将 phpMyAdmin 安装到 Ubuntu

> ID：10981466
> 
> 赞同：2
> 
> 时间：2012-06-11T13:51:48.710
> 
> 标签：ubuntu, phpmyadmin

我运行命令： `sudo apt-get install phpmyadmin`安装 phpMyAdmin。

然后我输入地址：localhost/phpmyadmin/ 但我看不到任何东西，所以我关注了这个线程：

[https://github.com/phpmyadmin/phpmyadmin/issues/15515](https://github.com/phpmyadmin/phpmyadmin/issues/15515) 现在当我输入地址 localhost/phpmyadmin/ 浏览器想要下载一些 PHTML 文件 (5.7 KB)

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:56:22.913

```
sudo apt-get install php 
```

还要检查 apache 服务是否应该运行，如果不是这样运行

```
/etc/init.d/apache2 restart 
```

或安装阿帕奇

```
sudo apt-get install apache 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-05T21:59:59.520

如果您收到消息`Package 'phpmyadmin' has no installation candidate`，请尝试：

```
sudo add-apt-repository ppa:phpmyadmin/ppa 
sudo apt-get update
sudo apt-get install phpmyadmin 
```

**但是，首先，检查您是否安装了 MySQL：**

```
mysql --version
mysql  Ver 8.0.19-0ubuntu0.19.10.3 for Linux on x86_64 ((Ubuntu)) 
```

如果没有，请使用以下命令安装它：

```
sudo apt install mysql-server 
```

# java - 将 .tar.gz 文件复制到文件夹

> ID：10981470
> 
> 赞同：0
> 
> 时间：2012-06-11T13:51:52.430
> 
> 标签：java, vfs, truezip

我想将 .tar.gz 文件的内容复制到 2 个文件夹，它有大约 20 个文件，解压缩后的总大小将 > 20 GB。
我为此使用了 Truezip。

```
 TFile archive = new TFile(absoluteZipName); // archive with .tar.gz
    TFile[] archFiles = archive.listFiles(); // takes too much time 
    for (TFile t : archFiles) {
         String fileName = t.getName();
          if(fileName.endsWith(".dat"))
              t.cp(new File(destination1+ t.getName()));
          else if(fileName.endsWith(".txt")){
               t.cp(new File(destination2+ t.getName()));
          }
    }
 It takes 3 times above tar xzf command (untar linux) . Have any way to optimize this code for fast copying, memory not an issue.  

    The following code allows fast copying Thanks npe for the good advice.
    (NB: I have no previledge to post the answe now that's why editing question itself)

InputStream is = new FileInputStream(absoluteZipName);
            ArchiveInputStream input = new ArchiveStreamFactory()
               .createArchiveInputStream(ArchiveStreamFactory.TAR, new GZIPInputStream(is));

            ArchiveEntry entry;
            while ((entry = input.getNextEntry()) != null) {
                OutputStream outputFileStream=null;
                if(entry.getName().endsWith(".dat")){
                 File outFile1= new File(destination1, entry.getName());
                     outputFileStream = new FileOutputStream(outFile1); 
                }
                else if(entry.getName().endsWith(".txt")){
                File outFile2= new File(destination2, entry.getName());
                     outputFileStream = new FileOutputStream(outFile2);   
                }
                // use ArchiveEntry#getName() to do the conditional stuff...
                IOUtils.copy(input, outputFileStream,10485760);
            }

    Is threading In file copy will reduce time..? In TZip didn't reduced as they already threading it. anyway I will try tomorrow and will let you Know. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:11:08.217

似乎`listFiles()`解压缩您的`gzip`文件以便能够扫描`tar`文件以获取所有文件名，然后`cp(File, File)`再次扫描它以将流定位在给定文件上。

我要做的是使用[Apache Commons Compress](http://commons.apache.org/compress/examples.html)并对输入流进行类似迭代器的扫描，有点像这样：

```
InputStream is = new FileInputStream("/path/to/my/file");
ArchiveInputStream input = new ArchiveStreamFactory()
   .createArchiveInputStream(ArchiveStreamFactory.TAR, new GZIPInputStream(is));

ArchiveEntry entry;
while ((entry = input.getNextEntry()) != null) {

    // use ArchiveEntry#getName() to do the conditional stuff...

} 
```

阅读 javadoc 以[`ArchiveInputStream#getNextEntry()`](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/ArchiveInputStream.html#getNextEntry%28%29)获取[`ArchiveEntry`](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/ArchiveEntry.html)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:15:26.423

您目睹的性能问题的原因是 TAR 文件格式缺少中央目录。但是因为 TrueZIP 是一个虚拟文件系统，它无法预测客户端应用程序的访问模式，所以它必须在第一次访问时将整个 TAR 文件解压缩到一个临时目录。这就是在 TFile.listFiles() 上发生的事情。然后将条目从临时目录复制到目标目录。所以总而言之，每个条目字节将被读取或写入四次。

为了获得最佳性能，您有两种选择：

(a) 您可以切换到 ZIP 文件格式并坚持使用 TrueZIP File* API。ZIP 文件有一个中央目录，因此读取它们不涉及创建临时文件。

(b) 您可以将 TAR.GZ 文件作为流处理，如 npe 所示。然后我会将它与 java.util.zip.GZIPInputStream 结合起来，因为该实现基于快速 C 代码。我还会使用 TrueZIP 的 Streams.copy(InputStream, OuputStream) 方法，因为它将使用多线程进行真正快速的批量复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T03:38:16.230

谢谢 npe ，这是我完成的最后一个，无论如何它比 tar xzf 花费的时间更少。像这样的最终代码片段。

```
InputStream is = new FileInputStream(absoluteZipName);
ArchiveInputStream input = new ArchiveStreamFactory()
   .createArchiveInputStream(ArchiveStreamFactory.TAR, new GZIPInputStream(is));

ArchiveEntry entry;
while ((entry = input.getNextEntry()) != null) {
    OutputStream outputFileStream=null;
    if(entry.getName().endsWith(".dat")){
     File outFile1= new File(destination1, entry.getName());
         outputFileStream = new FileOutputStream(outFile1); 
    }
    else if(entry.getName().endsWith(".txt")){
    File outFile2= new File(destination2, entry.getName());
         outputFileStream = new FileOutputStream(outFile2);   
    }
    // use ArchiveEntry#getName() to do the conditional stuff...
    IOUtils.copy(input, outputFileStream,10485760);
} 
```

希望我可以做更多的优化，以后会做。非常感谢

# solr - 升级到 solr3.6 后 defaultSearchField 不起作用

> ID：10981477
> 
> 赞同：2
> 
> 时间：2012-06-11T13:52:21.843
> 
> 标签：solr

我们刚刚从 solr3.5 迁移到 solr3.6，一直以来我们一直在查询 solr，

```
http:/localhost:8080/solr/<<corename>>/?q=apple 
```

但是现在这不起作用，并且每次都需要提供搜索字段的名称，而之前的情况并非如此。这可能是什么情况？

问候， 罗希特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:02:32.340

在 solrconfig.xml 中，您可以提供 Solr 默认参数。我认为你应该配置它们。

您可以在 aolrconfig.xml 的评论中找到此信息。只需配置它们，它就会工作。您还可以通过在 solrconfig.xml 中定义处理程序时放置 default="true" 来配置默认处理程序

在您的确切情况下，您必须在标准搜索处理程序标签中添加该行

```
<lst name="defaults">  
   <str name="fl">default_fieldname</str>
   <!-- more default params -->
</lst> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:58:09.517

Solr 3.6 中似乎已弃用默认搜索字段。
检查[SOLR-2724 - 弃用 schema.xml 中定义的 defaultSearchField 和 defaultOperator](https://issues.apache.org/jira/browse/SOLR-2724)。

您可以`qf`在请求处理程序中添加要搜索的字段的参数。

# sql-server - Microsoft SQL Server 双字节字符

> ID：10981481
> 
> 赞同：1
> 
> 时间：2012-06-11T13:52:43.813
> 
> 标签：sql-server, string, double-byte

在 Microsoft SQL Server 中，尝试在查询中将双字节字符放入字符串中会弄乱双字节字符串，除非字符串前面有 N，如下所示：

```
SELECT 'double-byte string'    -- puts question marks if string is double-byte
SELECT N'double-byte string'   -- works with double-byte strings 
```

问题是：有什么方法可以使 N 成为隐式默认值，这样我就不必将 N 放在每个字符串的前面？

# android - 如果不支持 EGL_NATIVE_RENDERABLE，如何通过 C++/NDK 访问 OpenGL ES 2？

> ID：10981483
> 
> 赞同：4
> 
> 时间：2012-06-11T13:52:46.413
> 
> 标签：android, c++, opengl-es, android-ndk, opengl-es-2.0

我的应用程序（用 Java 引导代码用 C++ 编写）在我的 Android MID 设备上运行良好，但它不能在朋友的 Moto MB865 手机上运行。在使用 GL 上下文创建过程进行挖掘之后，我发现`EGL_NATIVE_RENDERABLE`它`GL_FALSE`适用于所有支持 OpenGL ES 2.0 的配置

这意味着我无法使用本机代码访问 OpenGL ES 2.0。

为什么系统会有这种奇怪的限制？在此之前，我认为本机代码可以访问所有 OpenGL 配置。

有没有办法解决这个限制？还是我必须编写一个委托才能通过 JNI 访问 EGL2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:21:47.407

`EGL_NATIVE_RENDERABLE`与NDK无关。

它只是表示本机渲染 API 绘制到缓冲区的能力。

请参阅 EGL 规范：[http](http://www.khronos.org/registry/egl/specs/eglspec.1.4.pdf) ://www.khronos.org/registry/egl/specs/eglspec.1.4.pdf 段落`2.2.3 Interaction With Native Rendering`：

> 像素图表面始终支持本机渲染（在本机渲染 API 可以绘制到本机像素图的范围内）。当需要混合本地和客户端 API 渲染时，通常使用像素图表面，因为不需要在客户端 API 可见的后台缓冲区和本地渲染 API 可见的本地像素图之间移动数据。然而，出于同样的原因，像素图表面相对于窗口和 pbuffer 表面可能具有受限的功能和性能。pbuffer 表面不支持原生渲染，因为 pbuffer 的颜色缓冲区是由 EGL 在内部分配的，并且无法通过任何其他方式访问。

您的问题的原因应该不同（不支持 GLES 2.0 等）。

# json - 节点 JSON API 测试

> ID：10981484
> 
> 赞同：0
> 
> 时间：2012-06-11T13:52:52.020
> 
> 标签：json, node.js, rest, testing

我正在寻找一个用于测试服务器的框架。该服务器将提供基于 REST 和 JSON 有效负载的各种服务。服务器是用 node.js 编写的（我还在学习）。

我一直在尝试[APIEasy](https://github.com/flatiron/api-easy)，但遇到了它的局限性，因为它无法将数据从测试传递到测试。我也不相信[誓言](http://vowsjs.org/)（养蜂场的基础）真的让我的生活更轻松。

因此，我正在寻找人们对以下标准的任何建议：

1.  提供控制台和 CI 服务器可以理解的其他一些输出格式。我希望能够从命令行手动运行并从 CI 框中自动运行。

2.  提供一个简单的“语法”，用于向具有 JSON 有效负载的服务器发出 REST 请求。

3.  可以在测试之间传递数据。这使我可以调用创建记录，取回它的 id，然后在后续测试中使用它。

4.  被编写为 javascript 节点包。最后一个只是因为我更喜欢使用与被测试代码相同的语言和 API 的测试框架。从长远来看，这会让事情变得简单得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:24:33.893

最后最终使用了 Restify http 客户端和 mocka。

# visual-studio-2010 - HTML5 - 强制使用元素作为松散文本？

> ID：10981486
> 
> 赞同：1
> 
> 时间：2012-06-11T13:53:02.320
> 
> 标签：visual-studio-2010, html

我似乎在 HTML5 规范中找不到这个，但是现在是否有必要将所有文本都`<body>`包含在其他元素中？（即`<span>` `<div>`，等）

![在此处输入图像描述](../Images/dd1a9a92e4ef1e126b5630204c8ddea9.png)

我正在使用 Visual Studio 的 HTML5 解析器，所以我试图弄清楚它是解析错误还是合法的规范更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:57:00.743

这是有效的。该[`body`](http://www.w3.org/TR/2010/WD-html5-20100624/sections.html#the-body-element-0)元素的 HTML5 规范规定其中允许的内容是“[流内容](http://www.w3.org/TR/2010/WD-html5-20100624/content-models.html#flow-content)”。构成“流内容”的东西之一是“[文本](http://www.w3.org/TR/2010/WD-html5-20100624/content-models.html#text-content)”和“文本”：

> 在内容模型的上下文中，文本是指文本节点。

文本节点正是您所拥有的。

[W3C 验证器](http://validator.w3.org/)同意，并将您的示例作为有效的 HTML5 传递。

# android - Android：如何获取将视频上传到您的视频的请求 url？

> ID：10981490
> 
> 赞同：1
> 
> 时间：2012-06-11T13:53:18.667
> 
> 标签：android, youtube-api

我有一个应用程序，我需要在其中将视频从设备上传到您的管子。我需要发送客户端 ID、开发人员 ID、请求 url、重定向 url 作为参数来将视频上传到你的管。我得到了所有的值，但我无法获取请求 url。如何得到它？你们中的任何人都可以提出解决方案吗？

我遵循以下网址： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:56:32.803

您检查过[YouTube API](http://code.google.com/apis/youtube/2.0/developers_guide_protocol.html#Sending_a_Browser_Upload_API_Request)吗？看起来他们支持在那里上传视频。

# postgresql - Postgres：如果存在关联，则阻止删除

> ID：10981491
> 
> 赞同：0
> 
> 时间：2012-06-11T13:53:19.280
> 
> 标签：postgresql

如果存在另一条包含外键的记录，postgres 中是否有办法防止记录被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:58:33.800

您可以在此示例 SQL 中使用第二行限制删除

```
CREATE TABLE order_items (
    product_no integer REFERENCES products ON DELETE RESTRICT,
    order_id integer REFERENCES orders ON DELETE CASCADE,
    quantity integer,
    PRIMARY KEY (product_no, order_id)
); 
```

# opencl - 具有相同实时体素光线投射器实现的 opencl c99 和 c++ 之间的不同行为

> ID：10981493
> 
> 赞同：1
> 
> 时间：2012-06-11T13:53:26.063
> 
> 标签：opencl, raycasting, octree

我正在与 opencl 合作开发体素光线投射引擎。我正在尝试做类似于[Crassin](http://maverick.inria.fr/Publications/2011/Cra11/)的 Gigavoxels 的事情。在本文中，他们使用八叉树来存储体素数据。目前我只是试图在八叉树内下降，直到到达包含渲染数据的叶子。

我做了两个实现：一个在 GPU 上的 OpenCl 中，另一个在 CPU 上的 C++ 中。我遇到的问题是，在 GPU 上，算法正在经历错误数量的级别，直到到达八叉树内的叶子。CPU 版本给出了正确的结果。两个版本的算法相同，代码几乎相似。

你们知道可能是什么问题吗？可能是硬件问题、OpenCl 问题还是我做错了什么？我在三个不同的 nVidia GPU 上遇到了相同的结果。

这是 C++ 代码：

```
// Calculate actual ray stepping position
glm::vec4 pos = eyeRay_o + eyeRay_d * t;

uint offset = 0;
//check if root is leaf
uint leafFlag = GetLeafBit(octreeNodes[0]);
//get children address of root
uint childrenAddress = GetChildAddress(octreeNodes[0]);

while (iterations < 30) {  
    iterations++; 

    // Calculate subdivision offset
    offset = (uint)(pos.x * 2) + (uint)(pos.y * 2) * 2 + (uint)(pos.z * 2) * 4;

    if (leafFlag == 1) {
         //return some colour and exit the loop
         break;
    }
    else 
    {
         glm::uvec4 off = glm::uvec4(pos.x * 2, pos.y * 2, pos.z * 2, pos.w * 2);
         pos.x = 2 * pos.x - off.x;
         pos.y = 2 * pos.y - off.y;
         pos.z = 2 * pos.z - off.z;
         pos.w = 2 * pos.w - off.w;   
    }

    // Extract node data from the children
    finalAddress = childrenAddress + offset;    
    leafFlag = GetLeafBit(nodes[finalAddress]);
    childrenAddress = GetChildAddress(nodes[finalAddress]);
} 
```

这是 OpenCL 代码：

```
// Calculate actual ray stepping position
float4 position = rayOrigin + rayDirection * t;
uint offset = 0;
//check if root is leaf
uint leafFlag = extractOctreeNodeLeaf(octreeNodes[0]);
//get children address of root
uint childrenAddress = extractOctreeNodeAddress(octreeNodes[0]);

//position will be in the [0, 1] interval
//size of octree is 1
while (iterations < 30) {  
    iterations++; 

    //calculate the index of the next child based on the position in the current subdivision
    offset = (uint)(position.x * 2) + (uint)(position.y * 2) * 2 + (uint)(position.z * 2) * 4;

    if (leafFlag == 1) {
        //return some colour and exit the loop
        break;
    }
    else 
    {
         //transform the position inside the parent 
         //to the position inside the child subdivision
         //size of child will be considered to be 1
         uint4 off; 
         off.x = floor(position.x * 2);
         off.y = floor(position.y * 2);
         off.z = floor(position.z * 2);
         off.w = floor(position.w * 2);
         position = 2 * position - off;  
    }

    // Extract node data from the children
    finalAddress = childrenAddress + offset; 
    leafFlag = extractOctreeNodeLeaf(octreeNodes[finalAddress]);
    //each node has an index to an array of 8 children - the index points to the first child
    childrenAddress = extractOctreeNodeAddress(octreeNodes[finalAddress]);
} 
```

这是extractOctreeNodeAddress，根据要求：

这两个函数都只是做一些位操作：

OpenCL 版本：

```
inline char extractOctreeNodeLeaf(uint value) {
 value = value >> 1;
 return value & 1;
}

inline uint extractOctreeNodeAddress(uint value) {
 return value >> 2;
} 
```

C++ 版本：

```
inline byte GetLeafBit(uint value)
{
 value = value >> 0x1;
 return value & 0x1;
}

inline uint GetChildAddress(uint value)
{
 return value >> 0x2;
} 
```

嗨，我发现了一些有趣的东西。我尝试手动测试不同的变量，比较它们在单个精确像素和相机位置和方向上的 CPU 和 GPU 版本。在下面的代码中，如果我像现在这样运行程序，像素被打印为白色，并且值（> 5.5 与 CPU 实现相比完全错误），但是如果我注释最后一个 if 结构，并取消注释第一个，我得到的结果是红色的......这对我来说有点无法解释。有任何想法吗？

```
if ((x == 265) && (y == 209)) {
    /*float epsilon = 0.01f;
    float4 stuff = (float4)(0.7604471f, 0.9088342f, 0.9999924f, 0);
    if(fabs(pos.x - stuff.x) < epsilon)  
        temp = (float4)(1, 0, 0, 1);
    else
        temp = (float4)(1, 1, 1, 1);

    break;*/

    if(pos.x > 5.5)
    {
        temp = (float4)(1, 1, 1, 1);
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:11:06.087

主要问题是从 float4 到 uint4 的隐式转换。

逐个元素进行强制转换（仍然是隐式的）解决了这个问题。

# android - 从Android ICS中的内存读取图像不起作用

> ID：10981494
> 
> 赞同：1
> 
> 时间：2012-06-11T13:53:32.973
> 
> 标签：android, android-4.0-ice-cream-sandwich

我有一个从图库中检索图像的程序。这是我的代码：

```
String[] id = {MediaStore.Images.Thumbnails._ID};
Cursor imageCursor = managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, id, null, null, MediaStore.Images.Thumbnails.IMAGE_ID);
int image_col_index = imageCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
int count = imageCursor.getCount();
//in a loop the below code goes {
    ImageView i = new ImageView(mContext.getApplicationContext());
    imageCursor.moveToPosition(position);
    int id = imageCursor.getInt(image_col_index);
    i.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, ""+ id));
    i.setScaleType(ImageView.ScaleType.CENTER_CROP);
    i.setLayoutParams(new GridView.LayoutParams(70, 70));
    //here I am storing this image i to a list for further use
}//here loop ends 
```

上面的代码在**Emulator**以及带有**Android 2.2 或 2.3的****Galaxy S**中运行良好。但是现在当我在**Galaxy Nexus**中运行它时，它无法从内存中读取图像。

 ****唯一的区别是 Galaxy Nexus 在**Android 4.0**中运行并且不支持**SDCard**，而是它具有 13 GB 的内部存储。

所以我的问题是我应该在上面的代码中改变什么，以便它可以在 Nexus 上运行。

我认为由于 Nexus 不支持外部存储，因此可以通过将 URI 从更改`MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI`为`MediaStore.Images.Thumbnails.INTERNAL_CONTENT_URI`. 这对我有用还是我必须做其他事情。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:03:10.477

> 唯一的区别是 Galaxy Nexus 在 Android 4.0 中运行并且不支持 SDCard，而是它具有 13 GB 的内部存储。

你正在尝试从外部存储中读取:)

改变

```
i.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, ""+ id)); 
```

至

```
i.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.INTERNAL_CONTENT_URI, ""+ id)); 
```****

# javascript - 使用 jQuery 更改选定的 XML 文件

> ID：10981496
> 
> 赞同：0
> 
> 时间：2012-06-11T13:53:34.597
> 
> 标签：javascript, jquery, xml, rss

我正在使用以下代码来选择和解析 XML 文件。效果很好，但是因为我有 3 个不同的 XML 文件，所以我也有 3 个不同的页面。如果我可以将 url 替换为 XML 文件，而不是加载一个全新的页面，这将使我正在构建的应用程序更快。

```
$(document).ready(function(){
                $.ajax({
                    type: "GET",
                    url: "rss/page1",
                    dataType: "xml",
                    success: function(xml) { 
```

所以，我想知道的是：是否可以`url:`通过一个简单的 jQuery 事件来更改 url？在伪代码中它会是这样的：

```
<a id="index" href="#">Index</a>
<a id="page1" href="#">Page 1</a>
<a id="page2" href="#">Page 2</a> 
```

如果单击`<a>`带有 的标签`id="index"`，则更`url: "rss/what_ever_it_is_now"`改为`url: "rss/index"`

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:03:53.963

只需在这些元素上挂钩 click 事件即可使用适当的文件名调用函数？

[http://jsfiddle.net/saluce/6rBjX/](http://jsfiddle.net/saluce/6rBjX/)

像这样的东西：

```
<a href="#" class="parseButton" data-filename="rss/index">Index</a>
<a href="#" class="parseButton" data-filename="rss/page1">Page 1</a>
<a href="#" class="parseButton" data-filename="rss/page2">Page 2</a>

​function parseFile(fileName) {

}

$(document).ready(function() {
    $(".parseButton").click(function(s,e) {
        $.ajax({
            type: "GET",
            url: $(this).attr("data-filename"),
            dataType: "xml",
            success: function(xml) {
            ... 
       });
       e.preventDefault();
    }
    }​ 
```

`data-filename`通过这样做，您实际上甚至可以通过简单地更改属性中的值来添加更多链接来解析额外的 XML 文件（如果您需要的话） 。如果您使用标签，该行`e.preventDefault()`用于防止页面重新加载。`a`如果您确实想要导致页面重新加载，只需将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:11:03.530

嗨，

尝试这样的事情：

```
$(document).ready(function(){
     $('.lnk').click(function(){
      var pag = 'rss/'+ $(this).attr('id');
                    $.ajax({
                        type: "GET",
                        url: pag,
                        dataType: "xml",
                        success: function(xml) {
      //....
    });
}); 
```

和链接：

```
<a class="lnk" id="index" href="#">Index</a>
<a class="lnk" id="page1" href="#">Page 1</a>
<a class="lnk" id="page2" href="#">Page 2</a> 
```

# database - 使用 Oracle 提示“FIRST_ROWS”提高 Oracle 数据库性能

> ID：10981505
> 
> 赞同：9
> 
> 时间：2012-06-11T13:54:02.993
> 
> 标签：database, oracle, performance, query-hints

我有一个在 Oracle 数据库服务器上运行的语句。该语句有大约 5 个连接，那里没有什么异常。它看起来很像下面：

```
SELECT field1, field2, field3, ...  
FROM table1, table2, table3, table4, table5  
WHERE table1.id = table2.id AND table2.id = table3.id AND ...  
      table5.userid = 1 
```

**问题（有趣的是）是 userid = 1 的语句需要 1 秒才能返回 590 条记录。userid = 2 的语句需要大约 30 秒才能返回 70 条记录。**

我不明白为什么差异如此之大。

似乎为 userid = 1 的语句选择了不同的执行计划，而为 userid = 2 选择了不同的执行计划。

在我实施 Oracle Hint FIRST_ROW 后，性能明显提高。两个语句（对于 id 1 和 2）都在 1 秒内产生返回。

```
SELECT /*+ FIRST_ROWS */
       field1, field2, field3, ...  
FROM table1, table2, table3, table4, table5  
WHERE table1.id = table2.id AND table2.id = table3.id AND ...  
      table5.userid = 1 
```

**问题：**

1.  当 userid = 2（不使用提示时）时性能不佳的可能原因是什么？
2.  为什么一个语句和另一个语句的执行计划会不同（不使用提示时）？
3.  在决定将此提示添加到我的查询时，我应该注意什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T14:09:53.680

> 1）当 userid = 2（不使用提示时）时性能不佳的可能原因是什么？

因为 Oracle 认为使用来自 (userid=1) 的计划的中间结果集之一将非常大 - 可能是错误的。

> 2）为什么一个语句和另一个语句的执行计划会不同（当不使用提示时）？

基于直方图的索引

> 3) 在决定将此提示添加到我的查询时，我应该注意什么？

只要返回的记录数量很少，这个提示就应该是故障安全的——与推动优化器使用特定索引不同，这种方法允许 Oracle 在索引发生更改时选择不同的计划。

# c# - 正则表达式从字符串 c# 中获取名称

> ID：10981508
> 
> 赞同：0
> 
> 时间：2012-06-11T13:54:38.247
> 
> 标签：c#, regex, string

大家好我怎么能得到`NGG - Acid`

从这个字符串

```
"????log L 06/11/2012 - 06:45:28: \"NGG - Acid<5><STEAM_ID_PENDING><>\" connected, address \"46.49.70.30:27005\"\n\0" 
```

我试过这个

```
int start = Data.ToString().IndexOf('"') + 1;
            int end = Data.ToString().IndexOf('<');
            return Data.ToString().Substring(start, end - start); 
```

当用户名包含空格或符号时，这不起作用

谢谢

`Update` 此代码获取用户名，但有更好的解决方案：

```
if (Data.EndsWith("\"")) Data = Data.Substring(0, Data.Length - 1);
            int start = Data.IndexOf("\"");
            int end = Data.IndexOf("<");
            var val = Data.Substring(start + 1, end - 1 - start); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:09:55.820

您的比赛将在第 1 组

```
\\"(.*?)< 
```

如果我们假设您想要的匹配在 \" 和 <

在 C# 中，这变成

```
var c = Regex.Match(@"""????log L 06/11/2012 - 06:45:28: \""NGG - Acid<5><STEAM_ID_PENDING><>\"" connected, address \""46.49.70.30:27005\\""\n\0"""
, @"\\""(.*?)<").Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:11:08.537

如果你想使用正则表达式：

```
Match match = Regex.Match(Data, @"\\""(.+?)<\d+?><ST");

if (match.Success) {
    Console.WriteLine(match.Groups[1].Value);
} 
```

# linux - 减去两个日期以给出年龄

> ID：10981510
> 
> 赞同：2
> 
> 时间：2012-06-11T13:54:45.737
> 
> 标签：linux, solaris, csh

我需要以'yyyymmdd'（研究日期 - 出生日期）的形式减去两个日期才能找到患者的年龄，我该如何在 C shell 中做到这一点？

我在网上查看过，但我只能找到 bash 和 korn 脚本，我对任何一个都不太熟悉，无法更改它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:00:52.667

在 csh 中并不容易，但你可以这样做：

```
% @ sec1 = `date -d '20050902' +'%s'`
% @ sec2 = `date -d '20090809' +'%s'`
% @ diffsec = `expr $sec2 - $sec1`
% @ age = `expr $diffsec / 365 / 24 / 3600`
% echo $age
3 
```

# spring - 使用 spring 注释验证表单

> ID：10981511
> 
> 赞同：0
> 
> 时间：2012-06-11T13:54:50.940
> 
> 标签：spring, spring-form

我是 spring 新手，我正在使用 spring 3.0.5 RELEASE。我的要求是我想使用 spring 注释验证表单中的字段。我用来执行此操作的代码如下。这是实现验证器接口的验证器类。

```
public class FluctuationValidator implements Validator{

    @Override
    public boolean supports(Class<?> clazz) {
         return ReportsCommand.class.isAssignableFrom(clazz);
    }
    @Override
    public void validate(Object command, Errors errors) {
        ReportsCommand reportsCommand = (ReportsCommand) command;
        System.out.println("Inside the validate method of validator class");
        ValidationUtils.rejectIfEmpty(errors, "callType", "PackageNameIsRequired");
    }
    } 
```

这里的 ReportsCommand 是在表单中输入数据的类。在控制器中，代码如下所示。

```
@Autowired
    FluctuationValidator fluctuationValidator;
public ModelAndView showForm(@ModelAttribute("reports") ReportsCommand model, ModelAndView modelAndView,BindingResult result,
            HttpServletRequest request, HttpServletResponse response) throws Exception {

        fluctuationValidator.validate(modelAndView,result);
        if (result.hasErrors()) {
           modelAndView = new ModelAndView("report-generate-form");
        return modelAndView;
        } 
       } 
```

在我正在使用的 jsp 文件中

```
<form:errors path="callType" cssClass="error" /> 
```

我的代码中有任何问题。如果我这样使用，我会得到 org.springframework.beans.NotReadablePropertyException：bean 类 [org.springframework.web.servlet.ModelAndView] 的无效属性“callType”：bean 属性“callType”不是可读或具有无效的 getter 方法：getter 的返回类型是否与 setter 的参数类型匹配？例外。

对于属性 callType，它不是在 ReportsCommand 类中搜索，而是在 spring ModelAndView 类中搜索。可能是什么 pbm。谁能告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:34:39.757

如果您想使用注释进行验证，听起来您可能对使用`@Valid`.

见[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#validation-beanvalidation-overview](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#validation-beanvalidation-overview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:45:08.337

代替

`fluctuationValidator.validate(modelAndView,result);`

你需要

`fluctuationValidator.validate(model,result);`

模型是 ReportsCommand 对象

如果我理解正确，您要验证的实际对象是 ReportsCommand 对象。

您可以让您的控制器使用 @Valid 注释验证您的 bean，并通过覆盖 initBinder 方法来设置验证器。请参阅下面的示例

```
@Controller    
public class MyController{
      @Autowired
      private MyValidator myValidator;

      @Override
      @InitBinder
      public void initBinder(WebDataBinder binder) {
        binder.setValidator(myValidator);
      }

      @Override
      @RequestMapping(method = RequestMethod.POST)
      public String create(@ModelAttribute("myBean") @Valid MyBean myBean, 
                BindingResult bindingResult,
                Model uiModel) {
       .....
      }
    } 
```

# mysql - 如何运行插入查询脚本（.sql）来创建表和列或预填充少量数据

> ID：10981512
> 
> 赞同：0
> 
> 时间：2012-06-11T13:54:57.343
> 
> 标签：mysql, cloud-foundry

我需要使用一些默认数据创建表和列，以在 CloudFoundry 中运行我的 Java Web 应用程序。

我无法使用任何**MySQL 客户端**连接到我收到的数据库 ip。

```
java.lang.System.getenv("VCAP_SERVICES"); 
```

是否可以从 STS 或 Eclipse 连接到数据库，或者是否有 VMware 发布的任何客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:09:44.397

您可以使用 VMC cli 工具创建通往 MySQL 服务的隧道。连接隧道后，您可以选择启动一个 mysql 客户端，该客户端将自动连接到实例。

有关连接到 CloudFoundry 上的 MySQL 服务的示例，请参阅[http://docs.cloudfoundry.com/tools/vmc/caldecott.html 。](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

# php - php4 中的 Stripos 问题

> ID：10981513
> 
> 赞同：0
> 
> 时间：2012-06-11T13:54:59.230
> 
> 标签：php, php4

请我有以下联系表格的功能，但它显示以下错误“致命错误：调用未定义的函数：stripos() in”我该如何解决它

```
function checkEmail($vEmail) {   

                    $invalidChars ="/:,;" ; 
                    if(strlen($vEmail)<1) return false;                                         //Invalid Characters
                    $atPos = stripos($vEmail,"@",1);                                    //First Position of @
                    if ($atPos != false) $periodPos = stripos($vEmail,".", $atPos);         //If @ is not Found Null . position
                    for ($i=0; $i<strlen($invalidChars); $i++) {                            //Check for bad characters 
                        $badChar = substr($invalidChars,i,1);       //Pick 1
                        if(stripos($vEmail,$badChar,0) != false)    //If Found
                            return false;
                    }
                    if ($atPos == false)                            //If @ is not found
                        return false;       
                    if ($periodPos == "")                           //If . is Null
                        return false;
                    if (stripos($vEmail,"@@")!=false)               //If @@ is found
                        return false;
                    if (stripos($vEmail,"@.") != false)             //@.is found
                        return false;
                    if (stripos($vEmail,".@") !=  false)            //.@ is found
                        return false;

                    return true;    
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:00:43.113

[从文档](http://php.net/manual/en/function.stripos.php)中可以看出，`stripos()`仅存在于 PHP5 中。无论如何，您的代码不需要不区分大小写，因为它只检查`. @ / : , ;`- 所以您可以替换`stripos()`为[`strpos()`](http://www.php.net/manual/en/function.strpos.php).

你也可以`stripos()`在你的代码库中添加一个自己的，看起来像下面的（使用[`strtolower()`](http://de.php.net/manual/en/function.strtolower.php)and [`function_exists()`](http://de.php.net/manual/en/function.function-exists.php)）：

```
if(!function_exists("stripos")){
  function stripos($haystack, $needle, $offset = 0){
    return strpos(strtolower($haystack), strtolower($needle), $offset)
  }
} 
```

请注意，这是一个非常基本的替换，并且可能不会`stripos()`在每种情况下都给出与真实相同的结果。它对基本用法有效，但我没有做过广泛的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:57:33.487

stripos 是 PHP 5 的功能，需要升级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:58:32.197

stripos() 在 PHP 4 中不可用

[手动的](http://php.net/manual/en/function.stripos.php)

> 脱衣舞
> 
> （PHP 5）
> 
> stripos — 查找字符串中第一次出现不区分大小写的子字符串的位置

手册中的一条注释显示了此代码，这可能会对您有所帮助：

```
if(!function_exists("stripos")){
    function stripos(  $str, $needle, $offset = 0  ){
        return strpos(  strtolower( $str ), strtolower( $needle ), $offset  );
    }/* endfunction stripos */
}/* endfunction exists stripos */

if(!function_exists("strripos")){
    function strripos(  $haystack, $needle, $offset = 0  ) {
        if(  !is_string( $needle )  )$needle = chr(  intval( $needle )  );
        if(  $offset < 0  ){
            $temp_cut = strrev(  substr( $haystack, 0, abs($offset) )  );
        }
        else{
            $temp_cut = strrev(    substr(   $haystack, 0, max(  ( strlen($haystack) - $offset ), 0  )   )    );
        }
        if(   (  $found = stripos( $temp_cut, strrev($needle) )  ) === FALSE   )return FALSE;
        $pos = (   strlen(  $haystack  ) - (  $found + $offset + strlen( $needle )  )   );
        return $pos;
    }/* endfunction strripos */
}/* endfunction exists strripos */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:02:18.170

如前所述，它只是 PHP5 ......

但这是一个讨厌的电子邮件验证功能，试试这个！

```
function validateEmail($email)
{
    return(preg_match("/^([a-zA-Z0-9_\.\-+])+\@([a-zA-Z0-9\-])+(\.[a-zA-Z0-9]{2,7})+$/", $email));
} 
```

# c# - 更改显示亮度 (C#)

> ID：10981518
> 
> 赞同：6
> 
> 时间：2012-06-11T13:55:13.763
> 
> 标签：c#

> **可能重复：**
> [C# 设置屏幕亮度 Windows 7](https://stackoverflow.com/questions/8194006/c-sharp-setting-screen-brightness-windows-7)

我在网上搜索了一些关于通过 C# 更改显示器亮度的主题。
在大多数情况下，我获得了在 Windows 中更改 gamma 的链接（[此处](http://www.codeproject.com/Articles/47355/Setting-Screen-Brightness-in-C)和[此处](https://stackoverflow.com/questions/4013622/adjust-screen-brightness-using-c-sharp)），这对我来说效果很好。但我想知道这是否是降低亮度或调暗显示器的正确方法（这是否像降低显示器亮度一样节省电力？）

这是降低亮度的好方法还是有更好的方法来做同样的事情？我在 Windows 7 上（我忘记了 Windows 的默认伽马值是多少？！有人吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:08:44.683

对比度/亮度是物理监视器内部的属性；不是软件。Windows 只知道 Gamma。您会发现的大多数工具和指南都会秘密编辑伽玛，这显然与亮度/对比度不同。

但我确实找到了这个链接：[“如何通过软件控制显示器的'真实'亮度和对比度”](http://www.instantfundas.com/2011/10/how-to-control-real-brightness-and.html)

这不是关于它是如何完成的技术解释，它只列出了声称能够做到这一点的常见“工具”的问题。相反，它演示了几个实际与监视器通信的程序的使用。但是显示器和显卡一样，都需要支持DDC协议。

也许您可以使用此[DDC 协议](http://en.wikipedia.org/wiki/Display_Data_Channel)在 C# 中推出您自己的方法。甚至可能已经有图书馆，但如果没有的话；我猜这将是一个困难的实现。

# java - 在 Java 中动态更改 ResourceBundle 语言环境

> ID：10981521
> 
> 赞同：2
> 
> 时间：2012-06-11T13:55:21.197
> 
> 标签：java, tomcat, locale, resourcebundle

是否可以在 ResourceBundle 已加载后执行此操作？我在 Tomcat 下工作并尝试了不同的代码示例，但没有一个对我有用。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:03:26.160

不，您不能更改捆绑软件的语言环境。但是您可以使用其他语言环境重新加载相同的包基本名称：

```
bundle = ResourceBundle.getBundle("my.base.name", otherLocale); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:01:53.330

称呼

```
ResourceBundle.clearCache(); 
```

然后使用您想要的语言环境再次加载您的包。

# c# - 使用 .NET 将 HTML 转换为 PDF 文件的免费工具

> ID：10981527
> 
> 赞同：2
> 
> 时间：2012-06-11T13:55:38.420
> 
> 标签：c#, .net, html, pdf

我需要使用 .NET 4.0 创建我的 HTML 页面的 pdf 版本。有什么好的免费工具可以使用吗？

我见过一些商业工具，但没有任何好的免费工具；ITextSharp 似乎表现不佳或无法处理表格格式等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:02:22.427

我们在 2011 年 9 月为一个项目对此进行了广泛的研究（和测试），并得出结论认为没有工具既好（即一致、可靠的渲染）又免费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:59:16.977

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/) 这是一个控制台实用程序，可以为您完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:51:32.293

也许你可以试试[Amyuni WebkitPDF](http://www.webkitpdf.com)。它可免费用于个人和商业用途，并提供 C# 和 C++ 的绑定。

这是使用此库的此页面的屏幕截图： ![在此处输入图像描述](../Images/7a90cfca4d07071b247be418ff024142.png)

*通常的免责声明适用*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-30T07:52:50.203

[Aspose.Words Cloud SDK for .NET](https://products.aspose.cloud/words/net)是一款商业产品，但其免费试用计划提供每月 150 次免费 API 调用。也许它适合你的要求。它的转换是可靠和一致的。

```
// Get App Key and App SID from https://dashboard.aspose.cloud/
WordsApi wordsApi = new WordsApi(MyAppSid, MyAppKey);

var request = new ConvertDocumentRequest(
    document: File.OpenRead("C:/Temp/Test.html"),
    format: "pdf"
);

var result = wordsApi.ConvertDocument(request);
var fileStream = System.IO.File.Create("C:/Temp/Test.pdf");
result.CopyTo(fileStream);
fileStream.Close(); 
```

PS：我是 Aspose 的开发布道者。

# php - 如何在 PHP 中将 UTF8 字符串转换为代码页？

> ID：10981538
> 
> 赞同：1
> 
> 时间：2012-06-11T13:56:07.127
> 
> 标签：php, utf-8

我有一个 UTF-8 格式的字符串，并且有代码页（数字）。如何将 UTF-8 字符串转换为代码页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:25:42.737

好的，看起来我找到了：

```
$out = iconv("UTF-8", 'Windows-1252//TRANSLIT//IGNORE', $out); 
```

需要一个 Windows- 前缀。也很好翻译和忽略

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:04:19.250

```
$string = "äöå"; //File is saved as UTF-8
$codepage = unpack("N*",mb_convert_encoding( $string, "UTF-32BE", "UTF-8" ));

var_dump( $codepage );

//array(3) { [1]=> int(228) [2]=> int(246) [3]=> int(229) } 
```

# c# - 通过 Authorize.Net C# SDK 使用银行账户

> ID：10981540
> 
> 赞同：29
> 
> 时间：2012-06-11T13:56:19.743
> 
> 标签：c#, payment-gateway, authorize.net

在使用[Authorize.Net CIM XML API C# 示例代码](http://developer.authorize.net/downloads/samplecode/)之后，我开始使用[Authorize.Net C# SDK](http://developer.authorize.net/downloads/)。我可以使用 CIM XML API 示例代码将信用卡和银行帐户添加到客户资料中。不过，我看不到如何使用 SDK 添加银行帐户。

使用 CIM XML API 添加银行账户：

```
...
customerPaymentProfileType new_payment_profile = new customerPaymentProfileType();
paymentType new_payment = new paymentType();

bankAccountType new_bank = new bankAccountType();
new_bank.nameOnAccount = "xyz";
new_bank.accountNumber = "4111111";
new_bank.routingNumber = "325070760";
new_payment.Item = new_bank;

new_payment_profile.payment = new_payment;

createCustomerPaymentProfileRequest request = new createCustomerPaymentProfileRequest();
XmlAPIUtilities.PopulateMerchantAuthentication((ANetApiRequest)request);

request.customerProfileId = profile_id.ToString();
request.paymentProfile = new_payment_profile;
request.validationMode = validationModeEnum.testMode;
... 
```

使用 SDK 我只看到一个`.AddCreditCard()`方法，但没有办法添加银行帐户。当我遍历所有我`PaymentProfiles`的它遇到银行帐户时也会引发异常：

```
CustomerGateway cg = new CustomerGateway("xxx", "yyy");

foreach (string cid in cg.GetCustomerIDs())
{
    Customer c = cg.GetCustomer(cid);
    foreach (PaymentProfile pp in c.PaymentProfiles)
    {
        Console.WriteLine(pp.ToString());
    }
} 
```

例外：

```
Unable to cast object of type 'AuthorizeNet.APICore.bankAccountMaskedType' to type 'AuthorizeNet.APICore.creditCardMaskedType'. 
```

![在此处输入图像描述](../Images/09ab5bc044abfb0eaf4b4123427de717.png)

如何使用 Authorize.Net C# SDK 将银行帐户添加到 CIM 配置文件？

**更新：**

CIM可以存储银行账户信息的证明：

![在此处输入图像描述](../Images/ae7617adf973ce9c8a3a987dc0f3d67f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T17:58:31.540

以下内容经过测试，但仅就原始问题提出的内容（为我测试更多？）而言，我使用提供的 XML 示例并通过复制 AddCreditCard 代码的代码来编写它。

完成更新后，以下代码将起作用：

```
 var cg = new CustomerGateway("login", "transkey", ServiceMode.Test);
        var c = cg.CreateCustomer("peter@example.com", "test customer");
        //just to show that we didn't break CC
        cg.AddCreditCard(c.ProfileID, "cc#", 07, 2011);
        cg.AddBankAccount(c.ProfileID, "Peter", "bankaccoung#", "routing#");
        //tostring doesn't actually do much... but if you break on it you can see the details for both the CC and the bank info.
        foreach (PaymentProfile pp in cg.GetCustomer(c.ProfileID).PaymentProfiles)
        {
            Console.WriteLine(pp.ToString());
        } 
```

[首先，从http://developer.authorize.net/downloads/](http://developer.authorize.net/downloads/)下载 API 的 C# 源代码。

在查看代码时，我可以看到 4 个使用“creditCardType”的文件，它们是 SubscriptionRequest.cs、CustomerGateway.cs、PaymentProfile.cs 和 AnetApiSchema.cs（最后一个我们不必接触）。我们还需要注意在 PaymentProfile.cs、Transaction.cs 和 AnetApiSchema.cs 中使用的“creditCardMaskedType”。这些文件出现在任何地方，我们都需要确保我们也支持 bankAccount 等价物。

打开 AuthorizeNET 解决方案。我们将跳过上面列出的文件。

在 CustomerGateway.cs 添加以下代码块：

```
 /// <summary>
    /// Adds a bank account profile to the user and returns the profile ID
    /// </summary>
    /// <returns></returns>
    public string AddBankAccount(string profileID, string nameOnAccount, string accountNumber, string routingNumber)
    {
        var req = new createCustomerPaymentProfileRequest();
        req.customerProfileId = profileID;
        req.paymentProfile = new customerPaymentProfileType();
        req.paymentProfile.payment = new paymentType();

        bankAccountType new_bank = new bankAccountType();
        new_bank.nameOnAccount = nameOnAccount;
        new_bank.accountNumber = accountNumber;
        new_bank.routingNumber = routingNumber;

        req.paymentProfile.payment.Item = new_bank;

        var response = (createCustomerPaymentProfileResponse)_gateway.Send(req);

        return response.customerPaymentProfileId;
    } 
```

在 PaymentProfile.cs 添加一些公共属性

```
 public string BankNameOnAccount {get; set; }
    public string BankAccountNumber { get; set; }
    public string BankRoutingNumber { get; set; } 
```

修改构造函数的以下块`PaymentProfile(customerPaymentProfileMaskedType apiType)`：

```
 if (apiType.payment != null) {
            if(apiType.payment.Item is bankAccountMaskedType) {
                var bankAccount = (bankAccountMaskedType)apiType.payment.Item;
                this.BankNameOnAccount = bankAccount.nameOnAccount;
                this.BankAccountNumber = bankAccount.accountNumber;
                this.BankRoutingNumber = bankAccount.routingNumber;
            }
            else if (apiType.payment.Item is creditCardMaskedType)
            {
                var card = (creditCardMaskedType)apiType.payment.Item;
                this.CardType = card.cardType;
                this.CardNumber = card.cardNumber;
                this.CardExpiration = card.expirationDate;
            }
        } 
```

将此块添加到`PaymentProfile.ToAPI()`方法中：

```
 if (!string.IsNullOrEmpty(this.BankAccountNumber))
        {
            bankAccountType new_bank = new bankAccountType();
            new_bank.nameOnAccount = BankNameOnAccount;
            new_bank.accountNumber = BankAccountNumber;
            new_bank.routingNumber = BankRoutingNumber;

            result.payment.Item = new_bank;
        } 
```

将以下公共属性添加到 SubscriptionRequest.cs > SubscriptionRequest 类（大约第 187 行）

```
 public string BankNameOnAccount {get; set; }
    public string BankAccountNumber { get; set; }
    public string BankRoutingNumber { get; set; } 
```

将以下 else if block **TWICE**添加到 SubscriptionRequest。第一次是在 ToAPI 方法中，第二次是在 ToUpdateableAPI 方法中，在这两种情况下，它都在 CC 编号 null 检查之后。

```
 else if (!String.IsNullOrEmpty(this.BankAccountNumber))
        {
            bankAccountType new_bank = new bankAccountType();
            new_bank.nameOnAccount = BankNameOnAccount;
            new_bank.accountNumber = BankAccountNumber;
            new_bank.routingNumber = BankRoutingNumber;

            sub.payment = new paymentType();
            sub.payment.Item = new_bank;
        } 
```

将以下公共属性添加到 Transaction.cs

```
 public string BankNameOnAccount { get; set; }
    public string BankAccountNumber { get; set; }
    public string BankRoutingNumber { get; set; } 
```

在静态 NewFromResponse(transactionDetailsType trans) 方法中的 Transaction.cs 中，找到检查`trans.payment != null`和调整的块，如下所示：

```
 if (trans.payment != null) {
            if (trans.payment.Item.GetType() == typeof(creditCardMaskedType))
            {
                var cc = (creditCardMaskedType)trans.payment.Item;
                result.CardNumber = cc.cardNumber;
                result.CardExpiration = cc.expirationDate;
                result.CardType = cc.cardType;
            } 
            else if (trans.payment.Item.GetType() == typeof(bankAccountMaskedType))
            {
                var bankAccount = (bankAccountMaskedType)trans.payment.Item;
                result.BankNameOnAccount = bankAccount.nameOnAccount;
                result.BankAccountNumber = bankAccount.accountNumber;
                result.BankRoutingNumber = bankAccount.routingNumber;
            }
        } 
```

# ios - 使用 iOS SDK 连接到 Exchange

> ID：10981541
> 
> 赞同：3
> 
> 时间：2012-06-11T13:56:20.330
> 
> 标签：ios, exchangewebservices

我正在创建一个需要连接到 Exchange 并检索信息的应用程序。是否有从 iOS SDK 连接到 Exchange Web 服务的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T06:14:14.973

您可以将 EWS、EAS 或 OWA 用于 Exchange 服务。

1）如果您想使用 OWA 服务，请检查以下链接，您将获得 OWA 交换的包装类。

[https://github.com/jgallen23/OWAParser](https://github.com/jgallen23/OWAParser)

2)EWS

对于 Ews，我使用 sudzc 将 Services.wsdl（描述客户端和服务器之间的合同）转换为 objetiveC，并在 Sudzc 生成的代码中进行了更改。

也检查下面的链接

// 请求阅读邮件

[http://msdn.microsoft.com/en-us/library/exchange/aa566107(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/aa566107(v=exchg.140).aspx)

// 请求获取文件夹列表

/ [http://msdn.microsoft.com/en-us/library/exchange/aa564829(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/aa564829(v=exchg.140).aspx)

3)EAS

希望以下lnik对EAS交流发展有所帮助。[http://blogs.msdn.com/b/webdav_101/archive/2011/09/28/new-to-exchange-activesync-development.aspx](http://blogs.msdn.com/b/webdav_101/archive/2011/09/28/new-to-exchange-activesync-development.aspx)

# nhibernate - Nhibernate + nuget + syscache

> ID：10981546
> 
> 赞同：2
> 
> 时间：2012-06-11T13:56:32.083
> 
> 标签：nhibernate, nuget, syscache

如果我通过 nuget 安装 NHibernate 和 Syscache，我会收到一个很大的“无法加载文件或程序集”错误。基本上 Syscache 是针对 NH 3.2 构建的，但 nuget 上的当前 NH 版本是 3.3。

顺便说一句，我对 NHibernate Validator 有完全相同的问题。似乎其他人也有同样的问题：[NHibernate 3.3 and SysCache](https://stackoverflow.com/questions/10491876/nhibernate-3-3-and-syscache)

为什么是这样？我认为 nuget 应该解决所有这些依赖问题。为什么无法使用 nuget 从全新安装中获取 NH + Syscache？

除了下载 Syscache 的源代码并针对 NH 3.3 构建之外，还有什么可做的吗？我真的很希望能够仅使用 nuget 来管理我的所有依赖项......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:22:07.563

由于 NHibernate.Caches 的维护者没有为 3.3 发布新的 bin，所以我也没有更新包。

我的建议是您自己编译并创建包（您可以添加自定义源）。这样，当它实际发布时，您就可以删除自定义源并继续使用它。

# windows - 在清单中指定公钥令牌

> ID：10981551
> 
> 赞同：2
> 
> 时间：2012-06-11T13:56:57.890
> 
> 标签：windows, winapi, visual-c++, manifest, executable

我从 SO 中发布的其中一个答案中获取了一份清单，并将其嵌入到我的 exe 中，并稍作修改。它运作良好。清单包含以下代码

```
version="6.0.0.0"        
processorArchitecture="*"         
publicKeyToken="6595b64144ccf1df"         
language="*" 
```

我的疑问是publickeyToken。我在有关公钥的 msdn 链接中找到了公钥，并用我的证书令牌替换了公钥，该证书令牌由 Pktextract.exe 提取。但是，一旦我添加了提取的公钥，就会出错。使用上面的有什么问题吗`publicKeyToken="6595b64144ccf1df"`？我应该用同一个吗..

还是有任何其他方法可以从我的清单中删除 publickeytoken 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:20:33.090

该公钥令牌值适用于通用控件库的 V6+ 版本，与您的应用程序本身无关。假设它在`dependency`/`dependentAssembly`块中，保持原样，一切都会好起来的。

如果它在主`assemblyIdentity`节点中，则将其留空或指定您自己的公钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:45:06.930

[我认为您可以使用PE Explorer](http://www.heaventools.com/download.htm)编辑清单（但不能使用演示版）

# html - 无法验证 HTML5 样板元标记

> ID：10981556
> 
> 赞同：2
> 
> 时间：2012-06-11T13:57:06.313
> 
> 标签：html, google-chrome, meta-tags, microsoft-edge

我一直无法提交我的 HTML 以进行验证，并返回此错误：

```
Bad value X-UA-Compatible for attribute http-equiv on element meta.
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

这有什么问题？老实说，我什至不知道它的作用。我应该从代码中删除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:18:31.117

如果您检查了您的页面在“怪癖模式”和“标准模式”下的最新版本 IE 上都可以正常工作，则可以删除该标签。否则，保留这部分：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

这是假设您的页面是为“标准模式”编写的，就像任何新页面一样。该`meta`标签有助于将 IE 置于该模式，请参阅[http://hsivonen.iki.fi/doctype/#ie8](http://hsivonen.iki.fi/doctype/#ie8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:42:53.347

由于它仅针对 IE，我相信您可以将其包装在条件 IE 标记中，这样您就可以通过验证器。

```
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:00:37.007

您可以删除线条。它只是告诉 IE 使用最新的渲染引擎。

阅读更多 - [http://blog.yjl.im/2011/01/bad-value-x-ua-compatible-for-attribute.html](http://blog.yjl.im/2011/01/bad-value-x-ua-compatible-for-attribute.html)

# javascript - 如何更改代码中的值

> ID：10981559
> 
> 赞同：1
> 
> 时间：2012-06-11T13:57:14.673
> 
> 标签：javascript, html, spring, spring-mvc

在我的html中使用我遇到了麻烦。实际上我在 message.property 文件中定义了一些错误。

## 消息属性：

```
spraying_schedule_master_unq1=Duplicate Record.
post_role_master_unq1=Record for This Applicable Date Already Exists. 
```

如果控制器类中发生任何错误，我已将该错误设置为会话：

## 控制器：

```
session.setAttribute(SessionAttribute.error.toString(), error); 
```

我在 html 上显示的那个错误消息：

## html:

```
<spring:message code="${error}" /> 
```

当属性文件中定义的错误发生时，它工作正常，但是当 sessoin 错误包含与属性文件不同的错误时，问题就开始了，此时它显示错误。所以我的问题是当属性文件中不存在错误消息时，它应该显示默认消息。我可以这样做吗，如果可以，怎么做？请给我一个解决方案，我被困在这里。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:16:04.603

```
<spring:message code="${error}" text="your default text here" /> 
```

# jsf-2 - 如何在素数面上更改 p:fileupload 的大小（宽度）

> ID：10981560
> 
> 赞同：0
> 
> 时间：2012-06-11T13:57:18.070
> 
> 标签：jsf-2, primefaces

我有 ap:fileupload 但它的大小不能减小。我查看了 primefaces3.1 用户手册，但找不到减小组件大小的属性。因此，我的 fileUpload 组件剪切穿过面板。请帮助。我尝试了 width= 但它没有成功。下面是我使用的代码：

```
<p:fileUpload fileUploadListener="#{editBean.editFileUpload}" width="10px"
                        process="studyPlanEditForm:displayname1"
                        update=":studyPlanEditForm">
                    </p:fileUpload> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:08:25.517

您可以将属性 styleClass 与您自己的 css 类一起使用并重新定义 CSS 内的宽度。

# jquery - 通过 jQuery ui 手风琴隐藏所有正文

> ID：10981563
> 
> 赞同：0
> 
> 时间：2012-06-11T13:57:35.283
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

我在我的 html 结构上尝试手风琴菜单，但我遇到了问题。我想要，在关闭模式下隐藏所有正文，当单击标题 div 时获取所有正文元素。但是你可以看到这个链接：

[http://jsfiddle.net/Rochefort/yF9bB/](http://jsfiddle.net/Rochefort/yF9bB/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:06:11.383

您可以使用[nextAll()](http://api.jquery.com/nextAll/)代替选择后选择所有兄弟姐妹。正如@Ales 指出的那样，您只选择了 thead 元素并切换它。这是我认为您正在寻找的内容的更新小提琴[http://jsfiddle.net/yF9bB/1/](http://jsfiddle.net/yF9bB/1/)

```
jQuery(document).ready(function(){
    $('caption').click(function() {
        $(this).nextAll().toggle('slow');
        return false;
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:01:44.900

您正在隐藏“下一个”标签，即`<thead>`. 考虑`<caption>`从表中分离，然后它将隐藏整个表。否则，您不能同时选择 thead 和 tbody 以在其上应用 jquery 切换。

# java - 如何使用 java 获取 XML 格式的推文更新

> ID：10981568
> 
> 赞同：0
> 
> 时间：2012-06-11T13:58:03.380
> 
> 标签：java, xml, twitter

我有以下代码在 java 中输出我和我的用户 twitter 时间线消息。我按照本教程获取以下代码

[http://namingexception.wordpress.com/2011/09/12/how-easy-to-make-your-own-twitter-client-using-java/](http://namingexception.wordpress.com/2011/09/12/how-easy-to-make-your-own-twitter-client-using-java/)

```
import java.io.IOException;
import java.util.List;

import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;

public class SimpleTweet {

List<Status> statuses;
private final static String CONSUMER_KEY = "XXXXXX";
private final static String CONSUMER_KEY_SECRET = "XXXXXXX-123";

public void start() throws TwitterException, IOException {

Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_KEY_SECRET);

String accessToken = getSavedAccessToken();
String accessTokenSecret = getSavedAccessTokenSecret();
AccessToken oathAccessToken = new AccessToken(accessToken,accessTokenSecret);

twitter.setOAuthAccessToken(oathAccessToken);

twitter.updateStatus("Hello world :).");    

statuses = twitter.getHomeTimeline();
for (Status each : statuses) {

    System.out.println("Sent by: @" + each.getUser().getScreenName()
        + " - " + each.getUser().getName() + "\n" + each.getText()
        + "\n");
}

  }// start method ends here

private String getSavedAccessTokenSecret() {

return "vxcvvxcvxcvx";
}

private String getSavedAccessToken() {

return "eweweqweqweqwe";
}

  public static void main(String[] args) throws Exception {
new SimpleTweet().start();
  }  
 } 
```

我得到以下输出

```
Sent by: @tweetrr - rr
Hello to all :).

Sent by: @addthis - AddThis
Just in time for @wordcampnyc, we have updated the AddThis WordPress plugin! Check it:    
http://t.co/cgOgRwyl 
```

现在我希望输出为 XML 格式。我想知道是否有 API 可以做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:15:16.527

您可以使用`betwixt`from `apache`（[Bitwix 示例](http://commons.apache.org/betwixt/guide/examples.html)），使用它可以轻松地将 bean 或 hashmap 转换为 XML 格式。因此，您创建使用、等`UserStatusBean`字段调用的 bean ，填充 bean 并使用.`sentBy``status``message``[BeanWriter][2]`

# matlab - 在 MATLAB 中加入矩阵

> ID：10981570
> 
> 赞同：2
> 
> 时间：2012-06-11T13:58:05.860
> 
> 标签：matlab, join, dataset, inner-join, outer-join

我有两个矩阵，如下所示：

```
'01/01/2010'          1
'02/01/2010'          2
'03/01/2010'          3
'05/01/2010'         11
'06/01/2010'         17

'01/01/2010'          4
'02/01/2010'          5
'04/01/2010'          6
'05/01/2010'          7 
```

，在 MATLAB 中做了一些棘手的事情后，我想创建以下三个矩阵：

```
'01/01/2010'          1          4
'02/01/2010'          2          5
'03/01/2010'          3        NaN
'04/01/2010'        NaN          6
'05/01/2010'         11          7
'06/01/2010'         17        NaN

'01/01/2010'          1          4
'02/01/2010'          2          5
'05/01/2010'         11          7 
```

关于如何加入这些表的任何想法？干杯。

编辑：真的很抱歉我的错别字，伙计们。我更新了问题和输入/输出数据。请随时提供建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T15:09:39.160

我相信您要实现的目标在数据库世界中称为**内部联接**和**完全外部联接。**

首先我们从两个数据集开始：

```
d1 = {
 '01/01/2010'          1
 '02/01/2010'          2
 '03/01/2010'          3
 '05/01/2010'         11
 '06/01/2010'         17
};
d2 = {
 '01/01/2010'          4
 '02/01/2010'          5
 '04/01/2010'          6
 '05/01/2010'          7
}; 
```

下面是执行这两种类型的连接的代码：

```
%# get all possible dates, and convert them to indices starting at 1
[keys,~,ind] = unique( [d1(:,1);d2(:,1)] );

%# full outer join
ind1 = ind(1:size(d1,1));
ind2 = ind(size(d1,1)+1:end);

fullOuterJoin = cell(numel(keys),3);
fullOuterJoin(:) = {NaN};           %# fill with NaNs
fullOuterJoin(:,1) = keys;          %# union of dates
fullOuterJoin(ind1,2) = d1(:,2);    %# insert 1st dataset values
fullOuterJoin(ind2,3) = d2(:,2);    %# insert 2nd dataset values

%# inner join
loc1 = ismember(ind1, ind2);
loc2 = ismember(ind2, ind1);

innerJoin = cell(sum(loc1),3);
innerJoin(:,1) = d1(loc1,1);        %# intersection of dates
innerJoin(:,2) = d1(loc1,2);        %# insert 1st dataset values
innerJoin(:,3) = d2(loc2,2);        %# insert 2nd dataset values 
```

或者，我们可以通过简单地删除具有任何`NaN`值的行来从外连接数据集中提取内连接：

```
idx = all(~isnan(cell2mat(fullOuterJoin(:,2:end))), 2);
innerJoin = fullOuterJoin(idx,:); 
```

无论哪种方式，结果：

```
>> fullOuterJoin
fullOuterJoin = 
    '01/01/2010'    [  1]    [  4]
    '02/01/2010'    [  2]    [  5]
    '03/01/2010'    [  3]    [NaN]
    '04/01/2010'    [NaN]    [  6]
    '05/01/2010'    [ 11]    [  7]
    '06/01/2010'    [ 17]    [NaN]

>> innerJoin
innerJoin = 
    '01/01/2010'    [ 1]    [4]
    '02/01/2010'    [ 2]    [5]
    '05/01/2010'    [11]    [7] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T15:28:14.753

在 MATLAB 中，不能将字符串作为矩阵元素。为此，您需要使用元胞数组。这是使用元胞数组和`containers.Map`s 的解决方案。

```
FirstCellArray = {
'01/01/2010', 1;
'02/01/2010', 2;
'03/01/2010', 3;
'05/01/2010', 11;
'06/01/2010', 17
};

SecondCellArray = {
'01/01/2010', 4;
'02/01/2010', 5;
'04/01/2010', 6;
'05/01/2010', 7;
};

AllDatesCellArray = union(FirstCellArray(:,1), SecondCellArray(:,1)); 
```

% 为两个元胞数组创建`containers.Map`s。`containers.Map`s 是哈希表。

```
DateToFirstNumberMap = containers.Map(FirstCellArray(:,1), FirstCellArray(:,2));
DateToSecondNumberMap = containers.Map(SecondCellArray(:,1), SecondCellArray(:,2));

WithNaNsCellArray = AllDatesCellArray;

for Index = 1:size(WithNaNsCellArray, 1)
    Key = AllDatesCellArray{Index, 1};
    try
        NumberOne = cell2mat(values(DateToFirstNumberMap, cellstr(Key)));
    catch
        NumberOne = NaN;
    end
    WithNaNsCellArray{Index, 2} = NumberOne;
    try
        NumberTwo = cell2mat(values(DateToSecondNumberMap, cellstr(Key)));
    catch
        NumberTwo = NaN;
    end
    WithNaNsCellArray{Index, 3} = NumberTwo;
end

WithoutNaNsCellArray = WithNaNsCellArray;
NaNIndicesVector = (isnan([WithNaNsCellArray{:,2}]) | isnan([WithNaNsCellArray{:,3}]));
WithoutNaNsCellArray(NaNIndicesVector == 1, :) = []; 
```

然后`WithNaNsCellArray`包含有`NaN`行的结果并`WithoutNaNsCellArray`包含没有`NaN`行的结果。

```
WithNaNsCellArray = 
'01/01/2010'    [  1]    [  4]
'02/01/2010'    [  2]    [  5]
'03/01/2010'    [  3]    [NaN]
'04/01/2010'    [NaN]    [  6]
'05/01/2010'    [ 11]    [  7]
'06/01/2010'    [ 17]    [NaN]

WithoutNaNsCellArray = 
'01/01/2010'    [ 1]    [4]
'02/01/2010'    [ 2]    [5]
'05/01/2010'    [11]    [7] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:13:23.343

统计工具箱包含一个名为 JOIN 的函数，它基本上可以满足您的需求。

[http://www.mathworks.de/de/help/stats/dataset.join.html](http://www.mathworks.de/de/help/stats/dataset.join.html)

不幸的是，它可能无法处理字符串和多类型矩阵。但是您也许可以使用 JOIN 来缩短其他答案提出的解决方案。

# c# - 从库中捕获主线程 SynchronizationContext 或 Dispatcher

> ID：10981574
> 
> 赞同：11
> 
> 时间：2012-06-11T13:58:13.393
> 
> 标签：c#, winforms, multithreading, synchronization

我有一个 C# 库，它希望能够将工作发送/发布到“主”ui 线程（如果存在）。该库可用于：

*   一个winforms应用程序
*   本机应用程序（带有 UI）
*   控制台应用程序（没有 UI）

在库中，我想在初始化期间捕获一些东西（A SynchronizationContext、Dispatcher、Task Scheduler 或其他东西），这将允许我（稍后）将工作发送/发布到主线程（如果主线程具有这种能力——即它有一个消息泵）。例如，当且仅当主应用程序有能力让我进入主线程时，库才会在主线程上放置一些 Winforms UI。

我尝试过的事情：

1.  [SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx) ：捕获这对于Winforms 应用程序很好（[WindowsFormsSynchronizationContext](http://msdn.microsoft.com/en-us/library/system.windows.forms.windowsformssynchronizationcontext.aspx)将作为[当前](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)SynchronizationContext 安装。这也适用于控制台应用程序 - 因为我可以检测到 Current SynchronizationContext 为空（因此，知道我没有'没有能力向主线程发送/发布工作）。这里的问题是本机 UI 应用程序：它有能力（即它有一个消息泵），但当前同步上下文为空，因此我可以' t将它与控制台应用案例区分开来。如果我能区分，那么我可以简单地在主线程上安装一个 WindowsFormsSynchronizationContext，我很高兴。
2.  [Dispatcher](http://msdn.microsoft.com/en-us/library/ms615907) ：使用[Current](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)捕获它会创建一个新的 SynchronizationContext。因此，在所有情况下，我都会取回一个 Dispatcher。但是，对于控制台应用程序，`Dispatcher.Invoke`从后台线程使用将挂起（如预期的那样）。我可以使用[`Dispatcher.FromThread`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.fromthread)（如果线程不存在，它不会为线程创建 Dispatcher）。但是本机 UI 应用程序将使用此方法返回一个 null Dispatcher，因此我再次陷入无法区分 UI 应用程序和控制台应用程序的问题。
3.  一个[TaskScheduler](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)：我可以使用[FromCurrentSynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)。这与 SynchronizationContext 有相同的问题。即在调用 FromCurrentSynchronizationContext 之前，我必须检查 Current SynchronizationContext 是否为空（控制台应用程序和本机 ui 应用程序就是这种情况）。所以，我再次无法区分本机 ui 应用程序和控制台应用程序。

当然，我可以让我的库的用户在调用我的方法时指定它是否是 UI 应用程序`Initialize`，但我希望尽可能避免库用户出现这种复杂情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T16:29:30.353

这通常是不可能的，易于在线程中使用的库不能对哪个特定线程是 UI 线程做出任何假设。您可以捕获 Synchronization.Current 但只有在从 UI 线程调用您的初始化方法时才能正常工作。这不是很不寻常的工作，就像 TaskScheduler.FromCurrentSynchronizationContext() 往往会偶然工作，但不能保证。您可以添加一个检查，如果 Thread.CurrentThread.GetApartmentState() 没有返回 STA，那么您没有被 UI 线程调用的可能性非常高。SynchronizationContext.Current 在这种情况下也通常为 null，这是另一种检查方式。

（可以说）更好的方法是不用担心它并让客户端代码解决它，它在编组回调时不会有任何问题。或者公开一个 SynchronizationContext 类型的属性，以便客户端代码可以分配它。或者将其添加为构造函数参数。如果您准备好发布但发现它仍然为空，则抛出 InvalidOperationException，这是客户端程序员仅进行一次的疏忽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:12:07.090

我认为您*应该*将其作为您的方法的一个选项`Initialize`（或者以某种方式允许您的调用者请求 UI 交互），对我来说这更有意义。我不知道具体细节，但在我看来，这些似乎是一件“礼貌”的事情，让你的来电者决定他们是想要你还是想要支持你的 UI。我会更进一步，甚至作为提供同步上下文的调用者。但这是我的看法。

要回答您的问题，您可以使用一些“技巧”来确定您是否在控制台应用程序中运行。这个SO问题有一些信息：[C#/.NET：检测程序是作为服务运行还是作为控制台应用程序运行](https://stackoverflow.com/questions/207896/c-net-detect-whether-program-is-being-run-as-a-service-or-a-console-applicati)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-08T21:39:12.290

将库初始化更改为具有 SyncronizationContext 参数。如果参数为 null，则库不需要做任何特殊的事情，如果不是 null，则在那里发布/发送 GUI 更新。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-11-10T17:59:05.130

我认为这正是[`AsyncOperationManager.CreateOperation()`](https://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperationmanager.createoperation%28v=vs.110%29.aspx)它的用途。[“实现基于事件的异步模式”</a> 指出：](https://msdn.microsoft.com/en-us/library/e7a34yad%28v=vs.110%29.aspx)

[](https://msdn.microsoft.com/en-us/library/e7a34yad%28v=vs.110%29.aspx)

> [](https://msdn.microsoft.com/en-us/library/e7a34yad%28v=vs.110%29.aspx)
> 
> [基于事件的异步模式提供了一种标准化的方式来打包具有异步特性的类。](https://msdn.microsoft.com/en-us/library/e7a34yad%28v=vs.110%29.aspx)[如果使用AsyncOperationManager](https://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperationmanager%28v=vs.110%29.aspx)[等辅助类实现](https://msdn.microsoft.com/en-us/library/e7a34yad%28v=vs.110%29.aspx)，您的类将在任何应用程序模型下正常工作，包括 ASP.NET、控制台应用程序和 Windows 窗体应用程序。

由调用者决定是否要在 UI 线程上调用您的 API。如果他们这样做，这将捕获上下文，并且事件将按顺序通过消息泵。在控制台应用程序中，如果您安装 SynchronizationContext，您可以获得相同的行为，这样您可以通过使用 nuget 包免费[`AsyncContext.Run()`](https://github.com/StephenCleary/AsyncEx/wiki/AsyncContext)获得`Nito.AsyncEx`。不需要额外的属性或必须自己编写条件代码。如果没有可用的序列化同步上下文，[`AsyncOperation.Post()`](https://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperation.post%28v=vs.110%29.aspx)将使用控制台应用程序可用的假同步上下文，这些应用程序只是将事件排队到线程池中（这意味着帖子可能不会按顺序执行）。只记得打电话`AsyncOperation.OperationCompleted()`或`AsyncOperation.PostOperationCompleted()`完成后。

> 在库中，我想在初始化期间捕获一些东西（一个 SynchronizationContext、一个调度程序、一个任务调度程序或其他东西）

这正是这样[`AsyncOperationManager.CreateOperation()`](https://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperationmanager.createoperation%28v=vs.110%29.aspx)做的，并且以与环境无关的方式。但是您应该尝试将此与调用配对，`OperationCompleted()`考虑到您要公开的 API，这可能会更加困难。最简单的使用方法`AsyncOperation`是在库实际启动操作时而不是在初始化期间启动操作。或者通过让初始化例程返回一个`IDisposable`上下文对象句柄，该句柄将向消费者发出他们需要管理其生命周期的信号。

# ruby-on-rails - rails - 如何向 url 发出 GET 请求

> ID：10981577
> 
> 赞同：2
> 
> 时间：2012-06-11T13:58:23.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

您好，我希望这个问题是一个相当简单的问题，因为我对 Rails 开发比较陌生。我正在尝试向 URL 发出 get 请求。例如，在某些操作上成功时，我需要使用我的参数向 URL 发出 get 请求

> [http://abc.com/xyz.php?to=](http://abc.com/xyz.php?to=) <%user.number%>&sender=TESTHC&message="MY MESSAGE"！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:46:39.190

这可能会有所帮助。有一种宝石叫[法拉第](https://github.com/technoweenie/faraday)。它用于发出http请求。这是一个示例用法：

**建立连接**

```
conn = Faraday.new(:url => 'http://sushi.com') do |builder|
  builder.use Faraday::Request::UrlEncoded  # convert request params as "www-form-urlencoded"
  builder.use Faraday::Response::Logger     # log the request to STDOUT
  builder.use Faraday::Adapter::NetHttp     # make http requests with Net::HTTP

  # or, use shortcuts:
  builder.request  :url_encoded
  builder.response :logger
  builder.adapter  :net_http
end 
```

**提出您的获取请求**

```
conn.get '/nigiri', { :name => 'Maguro' } # GET /nigiri?name=Maguro 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:00:47.317

阅读这个[http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)你会得到很好的例子来参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:05:10.497

您提出的问题与 Rails 或路线无关。如果要发出 HTTP 请求，无论是来自 Rails 控制器还是独立的 Ruby 程序，都可以使用标准库，例如[open-uri](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)。

举个例子：

```
require 'open-uri'
to, sender, message = 12345, 'foo', 'bar'
uri='http://abc.com/xyz.php?to=%d&sender=%s&message="%s"' % [to, sender, message]
open(uri).readlines 
```

# javascript - 在某些情况下使用 Javascript 添加分页符

> ID：10981578
> 
> 赞同：1
> 
> 时间：2012-06-11T13:58:24.330
> 
> 标签：javascript, css, printing-web-page

我正在处理 HTML 格式的可打印表单，该表单旨在从数据库应用程序中提取数据并将其显示为配置为打印的网页。我设置了许多表来从数据库中提取各种数据并以可打印的格式显示它们。可打印页数必须始终为偶数，因为页面必须支持双面打印。

我遇到了一个问题，当字段中显示大量数据时，表格会溢出到下一页，从而创建 3 页。我对此的解决方案是在表单底部插入一个分页符以保持偶数页。我正在考虑使用 Javascript 来计算表格的大小并在必要时添加中断。

我现在得到的代码是

```
<script type="text/javascript">
    var compleHeight= document.getElementById("complete").scrollHeight;
    var incomHeight=document.getElementById("incomplete").scrollHeight;
    var totalHeight= compleHeight+incomHeight;

    if(totalHeight>300)
    {
        var newdiv = document.createElement('div');
        newdiv.setAttribute('style', 'page-break-after:always');
    }
</script> 
```

我知道计算和 if 工作正常，但没有生成分页符。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:01:50.483

您没有在任何地方附加新创建的元素。

```
document.body.appendChild(newdiv); 
```

# php - WideImage 无法在我的服务器上运行

> ID：10981579
> 
> 赞同：0
> 
> 时间：2012-06-11T13:58:25.830
> 
> 标签：php, ubuntu

它适用于 Xampp localhost ，但是当我在我的服务器上尝试时，它不起作用。

```
require_once "lib/WideImage.php";

$img = WideImage::load('i/big.jpg');
$res = $img ->resize(400, 300);
$res->saveToFile("i/small.jpg"); 
```

**服务器版本**：5.1.61-0ubuntu0.10.10.1

**gd**安装在服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:21:06.117

经过一番研究，我发现了这一点：

> WideImage 是一个面向对象的图像处理库。它需要带有 GD2 扩展的**PHP 5.2+ 。**

但是您服务器上的 php 版本是 <5.2 更新它会对您有所帮助。

也许问题出在权限上（您没有创建新文件的权限）。

# jquery - 如何停止在萤火虫中显示错误？

> ID：10981582
> 
> 赞同：1
> 
> 时间：2012-06-11T13:58:35.767
> 
> 标签：jquery

下面的代码可以正常工作，但是当我输入不正确的登录详细信息时，我得到 ' `NetworkError: 403 Forbidden - http://.....`'

它也出现在错误计数中。是否可以不显示此错误？

```
 $(document).ready(function() {
          $("#login").click(function(event){
              $.get( 
                 loginURL,
                 { authaccountid: $('#authaccountid').val(), authemail:$('#authemail').val(), authpassword:$('#authpassword').val()},function() {})
                .success(function() { alert("success"); })
                .error(function() { alert("error"); })
          });
       }); 
```

# assembly - 无条件分支和无条件跳转（MIPS 中的指令）有什么区别？

> ID：10981593
> 
> 赞同：48
> 
> 时间：2012-06-11T13:59:25.533
> 
> 标签：assembly, mips

您可以查看[Wikipedia](http://en.wikipedia.org/wiki/MIPS_architecture#MIPS_assembly_language)或[针对学生的简短摘要](http://logos.cs.uic.edu/366/notes/MIPS%20Quick%20Tutorial.htm)。每个人都说同一件事有两条指令。但是没有人说为什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-11T14:10:20.507

分支允许条件。但是允许条件在指令中占用更多位。因此，一个分支的地址只有 2^16 位，并且只允许您向后分支 2^15 - 1 条指令或向前分支 2^15 条指令。

跳转是无条件的，通过省略条件保存的位可用于地址。跳转允许 26 位地址，因此可以在代码中跳转比分支更远的地方。以没有条件为代价。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-11T14:18:22.247

分支 ( `b`) 使用 PC 相对位移，而跳转 ( `j`) 使用绝对地址。这种区别对于与位置无关的代码很重要。此外，只有跳转可用于间接控制传输（`jr`，使用寄存器值）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-11T15:05:35.790

如前所述，分支的位数更少，范围更短并且是相对的。Jump 有更多的位并且是绝对的。

举这个例子

```
b l0
nop
beq $0,$1,l1
nop
j l2
nop

l0: .word 0,0
l1: .word 0,0
l2: .word 0,0 
```

你得到这个

```
00000000 <l0-0x1c>:
   0:   10000006    b   1c <l0>
   4:   00000000    nop
   8:   10010006    beq zero,at,24 <l1>
   c:   00000000    nop
  10:   0800000b    j   2c <l2>
  14:   00000000    nop
  18:   00000000    nop

0000001c <l0>:
    ...

00000024 <l1>:
    ...

0000002c <l2>:
    ... 
```

现在其他答案可能没有提到的是，无条件*分支*至少由 gnu 汇编程序编码为具有相同寄存器的分支（如果相等）。mips 中没有无条件分支，据我所知，如果相等则有分支，如果不相等则有分支。

您在上面看到跳转使用 0xB 是字地址，0xB*4 = 0x2C 是目标地址，其中条件使用相对寻址 pc+(signed_offset*4) 其中 pc=instruction_address+4; 或者取指令地址 + 4 + (signed_offset*4) 得到目的地址。

将别名 b 用于分支而不是 j 用于跳转将创建与位置无关的代码。如果你四处走动，跳转不会，必须重新链接，因为近距离跳转可能更好地使用分支而不是跳转，即使它是别名。如果你是一个纯粹主义者，那么你可以使用真正的指令 beq $0,$0,label 或选择任何寄存器 beq $4,$4,label。寄存器 0 特殊且快速可能是更好的选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-10T22:23:36.067

在 MIPS 中，跳转和无条件分支是不一样的。

分支和跳转指令都将数据写入程序计数器寄存器，以便在下一个取指周期时，将取指不同的指令，而不是程序存储器中的下一条指令。从这个意义上说，它们执行相同类型的操作。

它们的不同之处在于分支是有条件的，如果满足某个条件，它们只会更改要执行的下一条指令。这可以通过`if`语句中执行代码的差异或调用函数来说明。

```
if (a == 0) {
    a = 1
}
setAtoOne() 
```

该`if`语句仅跳转到要设置的指令`a = 1`if `a == 0`。无论如何，该函数将跳转到该指令。

在这种情况下，我们讨论的是条件始终为真的分支。这只是另一种写作方式

```
beq $zero, $zero, (int)offset 
```

$zero 总是等于 $zero，所以它总是分支到指定的偏移量。就像这样的 if 语句

```
if (true) { a = 1 } 
```

分支和跳转指令之间还有另一个区别。跳转指令指定 PC 将设置到的绝对地址，而分支指令偏移程序计数器中的地址。

```
PC = 32-bit address # Jump
PC += 16-bits lower 
```

实际上，这并不完全正确。我们用绝对地址和偏移量编写程序集，但在跳转和分支中，它都被编译为偏移量。这就是为什么你不能跳转或跳转到内存中的任何地方，期望使用跳转到寄存器`jr`指令。这是因为 MIPS 的基本设计，固定长度的单字指令。

所有 MIPS 指令都是 1 个字（即 4 个字节/32 位）长。它们包含一个 6 位指令 ID（称为操作码）以及执行指令所需的其他信息。这可能是寄存器的 id 或“立即”值，基本上是指令中编码的整数。

MIPS 中内存中的每个字节在`0x00000000`-之间都有一个地址`0xFFFFFFFF`。要获取其中一个字节，我们需要指定地址。如果幸运地将地址存储在寄存器中，我们将只`jr`使用已存储在寄存器中的地址。然而，我们不是。

这变得有问题，我们的指令只有 32 位，我们需要所有这些位来指定该范围内的地址。我们还必须放弃 6 位供处理器用来识别指令。现在我们剩下 26 位。

更糟糕的是，当我们进行分支时，我们需要 10 个额外的位来指定我们正在比较的两个寄存器以适应我们的条件。解决方案是使用偏移量。

假设我们在 address`0x12345678`并且我们正在执行无条件跳转到 memory 中的下一个地址`j 0x1234567c`。这是汇编代码，我将展示如何将其转换为机器代码并执行。

首先我们作弊一点。我们知道指令是一个字（4 个字节），并且在 MIPS 中指定它们必须在字边界内。这意味着所有指令都具有相隔 4 个字节的地址，这意味着它们在二进制表示中始终以 00 结尾。太好了，我们可以剃掉那两个无意义的部分。我们还剃掉了前 6 个，但别担心，我们稍后会取回它们。

```
`jump **0001 0010 0011 0100 0101 0110 0111 11**~~00~~
jump ~~0001~~ **0010 0011 0100 0101 0110 0111 11**~~00~~
*0000 10***00 1000 1101 0001 0101 1001 1111** #in machine code # jump op = 0000 10`
```

`当我们执行这个时，我们采取 ````
00 1000 1101 0001 0101 1001 1111
0000 00**00 1000 1101 0001 0101 1001 1111**  # extend >> 6
0000 00**10 0011 0100 0101 0110 0111 11**00  # << 2 
```

然后我们和PC（我们正在执行的地方）和0xf0000000

```
0001 0010 0011 0100 0101 0110 0111 1000
1111 0000 0000 0000 0000 0000 0000 0000
AND
0001 0000 0000 0000 0000 0000 0000 0000 
```

我们知道将结果与我们的指令整数相或

```
0001 0000 0000 0000 0000 0000 0000 0000
0000 0010 0011 0100 0101 0110 0111 1100
OR
0001 0010 0011 0100 0101 0110 0111 1100 
```

这是`0x1234567c`十六进制的，我们想去的地方，现在我们跳到那里。这就是为什么你不能从当前指令跳转到超过 256MB（2^28 位）的地方（除非你跳转到寄存器的值`jr`）

相同的基本思想适用于分支，除了现在您还比较了 2 个寄存器（需要 10 位），因此您只有 16 位可用于偏移，因此您不能用分支跳得那么远。

一般来说，这很好，因为我们主要在过程中使用分支来实现循环和执行条件赋值。

这都是 MIPS 架构设计的结果。完全有可能有指令，其中分支和跳转之间的唯一区别是条件方面，而“无条件”分支的行为与无条件跳转相同。``

# java - 如何使交付的基于 Eclipse 的应用程序使用用户计算机上的所有内存？

> ID：10981595
> 
> 赞同：0
> 
> 时间：2012-06-11T13:59:37.763
> 
> 标签：java, memory-management

我正在发布一个基于 Eclipse 的应用程序，并希望拥有最大堆大小。如何让我的应用程序使用不同机器上的所有可用内存。到目前为止，我发现的只是设置 heapsize 的参数，我可以发送 JVM，但这些是硬编码的。基本上我希望 JVM 使用机器上可用的任何内存。硬编码还不够好。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:10:51.647

无法使用标准 JVM 功能。JVM 参数指定要保留的内存量（-Xmx...），不能指定“获取所有可用内存”。您可以尝试一个合理的值，例如 1.2GB，这是 Windows XP 32 位的上限。问题是操作系统无法保留 JVM 所需的所有内存，因此您必须更加保守。

另一种方法是在外部计算可用内存（脚本、本机实用程序），然后使用该值设置 JVM 参数。不知道是否有像 Install4J 这样的安装程序可以实现这一点。

# linux - PlayFramework 无法运行 VPS 服务器

> ID：10981597
> 
> 赞同：1
> 
> 时间：2012-06-11T13:59:39.947
> 
> 标签：linux, ubuntu, playframework, vps

我有一个 xen-vps 服务器，我试图在其中运行 play-framework 应用程序。

但是一旦我设置了 PATH 环境。多变的

导出 PATH=$PATH:/path_to_play/

并尝试创建一个新的播放应用程序，它给出了“非法指令”

请参考截图：

![在此处输入图像描述](../Images/5833fcd2241ed3935d44cf55357b8c82.png)

# php - 执行部分存储在字符串中的 PHP 代码

> ID：10981600
> 
> 赞同：0
> 
> 时间：2012-06-11T14:00:08.513
> 
> 标签：php

假设我有一个字符串“一些文本 [login_form] 一些其他文本”。如何将 '[login_form]' 替换为 PHP 代码“require('somescript.php');” 并运行“要求”功能。

我不想使用 'eval' 因为我的字符串包含 HTML 和其他代码，并且也很有可能出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:07:13.263

你可以这样做：

1.  用正则表达式搜索`[\[(.*)\]]`
2.  `$replace = include_once($matched_string);`
3.  替换`[\[(.*)\]]`为`$replace`

唔？

也许这也可以工作：

```
$string = preg_replace_callback(
    '/\[(.*)\]/',
    function($matches) {
        ob_start();
        include $matches[1].'.php';
        return ob_get_clean();
    },
    $string
); 
```

**编辑：**我在一些“自制” CMS 中看到了这种方法，但不是`include`ing 文件，它们都称为类或函数。它可以使用诸如`Hey, check out this new gallery: [gallery, 15, 200, 200]`.

您解析该字符串并发现您必须调用 object `$gallery`，可能是一个方法`view`，其参数`15, 200, 200`将是每页显示多少张图像和图像缩略图分辨率......所以您将调用`$gallery->view(15, 200, 200);`.

在这种情况下，上面的 PHP 代码将被扩展为：

```
$string = preg_replace_callback(
    '/\[(.*)\]/',
    function($matches) {
        $params = explode(', ', $matches[1]); // by this we get an array with object name and all the parameters
        $object = array_shift($params);
        return ${$object}->view($params); // for simplicity we pass parameters as an array
    },
    $string
); 
```

这是你想要达到的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:05:44.610

只要 somescript.php 格式正确并且如果存在打开的 php 标记时有一个结束标记，eval 就可以工作，尽管我并不完全支持 eval。

```
eval('?>'.file_get_contents('somescript.php').'<?'); 
```

您能否用您拥有的代码示例替换 [login_form] 来澄清一下您的意思？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:02:09.793

我认为 eval 是您在这里唯一的选择。如果你因为某些原因不想使用它（这可能是很好的理由），你就被卡住了。也许您可以提供更多背景信息，以便我们可以为您提供其他选择？

# javascript - JavaScript 在错误返回后执行代码

> ID：10981604
> 
> 赞同：2
> 
> 时间：2012-06-11T14:00:20.600
> 
> 标签：javascript

我正在使用一个函数来检查是否填写了必填字段。我有这两个功能，应该做同样的事情，但是第一个没有。javascript 在遇到返回后不应该停止执行代码吗？

此函数返回 true：

```
//Checks if various stages are ready
function trnReady(area) {
    switch (area)
    {
        case 'settings':
            $('input.required').each(function(){

                if($(this).val() == '')
                {
                    return false;
                }
            }); 
        break;
    }
    return true;
} 
```

虽然这个返回错误：

```
//Checks if various stages are ready
function trnReady(area) {
    var r = true;
    switch (area)
    {
        case 'settings':
            $('input.required').each(function(){

                if($(this).val() == '')
                {
                    r = false;
                }
            }); 
        break;
    }
    return r;
} 
```

我以为第一次返回会停止执行代码？我想知道它是否与范围有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:12:13.823

在第一个代码片段`return false;`中，仅停止执行传递给 jquery*每个*方法的内部函数。它还根据 jquery API 停止 jquery 迭代。但在任何情况下 trnReady 都会返回 true。

第二个代码片段是正确的，但您可以对其进行优化，替换`r = false;`为`return r = false;`（当您已经知道其中一个字段未填充时，它将停止 jquery 迭代）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:06:24.820

在第一个片段中，`return`应用于作为 的参数的函数`each`。`return`不适用于该功能`trnReady`。因此，`return false`是用于`each`.

在第二个片段中，`return`是正确`return`的`trnReady`函数，所以它工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T14:04:21.863

这些函数中的每一个都包含嵌套在其中的第二个函数，并且您期望在嵌套函数中生效的返回值 - 但它们没有。您不能从内部函数返回到外部函数的调用者。您可以做的最好的事情是在内部函数中设置一个变量，然后从外部函数返回该变量的值，就像您的第二个示例一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T14:05:24.997

在第一个示例中，您的函数返回`false`但仅在当前 case 语句的范围内。你`false`有任何效果，任何动作在发生时都不会被调用。

编辑： return false 仅在您传递给的匿名函数内有效`.each`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T14:08:25.557

[jQuery each](http://api.jquery.com/jQuery.each/)是一个迭代器，它将每个对象传递给您定义的函数。

当定义的函数返回 true 时，迭代继续（到下一个对象） l 当函数返回 false 时，迭代停止。

***但只有迭代停止***

代码命中`break`，但`return`在这种情况下没有要执行的其他语句。

# algorithm - 情绪分析的好算法

> ID：10981605
> 
> 赞同：7
> 
> 时间：2012-06-11T14:00:21.353
> 
> 标签：algorithm, sentiment-analysis

我尝试了朴素贝叶斯分类器，它的工作非常糟糕。SVM 工作得更好一些，但仍然很糟糕。我读过的大多数关于 SVM 和朴素贝叶斯的论文都有一些变化（n-gram、POS 等），但它们都给出了接近 50% 的结果（文章的作者谈论 80% 和高，但我不能得到同样准确真实数据）。

除了词法分析，还有更强大的方法吗？SVM 和贝叶斯假设单词是独立的。这些方法称为“词袋”。如果我们假设这些词是相关联的呢？

例如：使用先验算法检测如果句子包含“bad and wrong”，那么该句子有 70% 的概率是否定的。我们也可以使用单词之间的距离等等。

这是个好主意还是我正在发明自行车？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:07:14.377

您在这里混淆了几个概念。朴素贝叶斯和 SVM 都与词袋方法无关。SVM 和 BOW 方法都没有术语之间的独立性假设。

以下是您可以尝试的一些事情：

*   在你的词袋中包含标点符号；尤其是 ！和 ？可能有助于情感分析，而许多面向文档分类的特征提取器将它们丢弃
*   停用词也一样：像“我”和“我的”这样的词可能表示主观文本
*   建立一个两阶段分类器；先判断有没有表达意见，再判断是正面还是负面
*   尝试使用二次核 SVM 而不是线性 SVM 来捕获特征之间的交互。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T06:07:03.107

SVM、朴素贝叶斯和最大熵等算法是有监督的机器学习算法，程序的输出取决于您提供的训练集。对于大规模的情感分析，我更喜欢使用无监督学习方法，其中可以通过将文档聚类到相同方向的部分来确定形容词的情感，并将聚类标记为正面或负面。更多信息可以从这篇论文中找到。 [http://icwsm.org/papers/3--Godbole-Srinivasaiah-Skiena.pdf](http://icwsm.org/papers/3--Godbole-Srinivasaiah-Skiena.pdf)

希望这对您的工作有所帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-04T17:38:28.850

你可以找到一些关于[使用 python 进行情感分析](http://vumaasha.github.io/pychennai-sentiment-analysis/#/title)的有用材料。本演示文稿将情绪分析总结为 3 个简单的步骤

*   标记数据
*   预处理 &
*   模型学习

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T08:15:31.147

情绪分析是一个正在进行的研究领域。现在有很多研究正在进行。对于最新、最成功的方法的概述，我通常建议您查看 SemEval 的共享任务。通常，他们每年都会在 Twitter 上举办情绪分析比赛。您可以在此处找到描述该任务的论文以及 2016 年的结果（尽管可能有点技术性）：[http ://alt.qcri.org/semeval2016/task4/data/uploads/semeval2016_task4_report.pdf](http://alt.qcri.org/semeval2016/task4/data/uploads/semeval2016_task4_report.pdf)

从那里开始，您可以查看描述各个系统的论文（如那里所引用的）。

# javascript - jquery/javascript 菜单问题 .siblings() .toggle()

> ID：10981606
> 
> 赞同：0
> 
> 时间：2012-06-11T14:00:21.773
> 
> 标签：javascript, jquery

我在 jquery 中编写了一个 3 级下拉菜单，一切正常，除了当我折叠顶层时，它不会折叠第三级，即：

```
level 1
level 2
level 3 
```

当我折叠它时，我得到：

```
level 1
level 3 
```

什么时候应该读：

```
level1 
```

我知道您可以使用 silbing 功能来做到这一点，但是我遇到了问题，因为我也在使用切换类来根据菜单是否打开来更改朝右或朝下的箭头。它关闭了两个子菜单级别，但不会切换它们，因此当您重新打开该菜单时，箭头应该朝右时仍然朝下。

这是我的来源：

```
$(function() {
    $("li.level2").hide();
    $("li.level3").hide();

    $("ul.navigation").delegate(".level1", "click", function() {
        var item=$(this);
        $(this).nextUntil(".level1", ".level2", ".level3").toggle();
        $(this).toggleClass("highlight");
    });

    $("ul.navigation").delegate(".level2", "click", function() {
        var item=$(this);
        $(this).nextUntil(".level2",".level3").toggle();
        $(this).toggleClass("highlight");
    });
}); 
```

[Jsfiddle 在这里](http://jsfiddle.net/qM62Z/)。基本上绿色是 1 级，橙色是 2 级，红色是菜单打开时，如果单击“代数”，然后单击“11 年”，则打开 2 个子菜单，然后再次单击代数，它不会关闭下面的子菜单11 年，当您使用 .siblings() 时，切换功能未激活，因此当您再次单击“代数”重新打开它时，会读取“11 年”，因为它尚未切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:12:20.733

你为什么不尝试嵌套 UL 呢？就像是：

```
<ul class="level1">
    <li>level1</li>
    <li>Level1
        <ul class="level2">
            <li>Level2</li>
            <li>Level2</li>
        </ul>
    </li>
<ul> 
```

这样您就可以隐藏和显示`.children()`，而不必使用`nextUntil()`等。它使 Javascript 更容易，并且是语义上更正确的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:07:13.017

我建议改用 div。请注意，您的类仅用于样式 - javascript 不（也不应该）关心它们。

[http://jsfiddle.net/qM62Z/8/](http://jsfiddle.net/qM62Z/8/)

```
$(function() {
    $(".level2").hide();
    $(".level3").hide();

    $(".navigation").on("click", "div", function() {
        $(this).toggleClass("highlight").children("div").toggle();

        // prevent the event from propogating and collapsing other menus
        return false;
    });
}); ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:13:33.757

尝试这个：

```
$("ul.navigation").delegate(".level1", "click", function() {
    var item=$(this);
    $("li.level2, li.level3").hide();
    $('li.level1').removeClass('highlight');
    $(this).nextUntil(".level1", ".level2", ".level3").toggle();
    $(this).addClass("highlight");
}); 
```

[http://jsfiddle.net/qM62Z/6/](http://jsfiddle.net/qM62Z/6/)

# php - 从其他地方的while循环打印MySQL数据

> ID：10981610
> 
> 赞同：0
> 
> 时间：2012-06-11T14:00:33.287
> 
> 标签：php, mysql, while-loop

我目前有两个下拉菜单和一个 div。我的目标是能够使用`<option>`在 div 内的第二个下拉列表中选择打印的变量。如图所示，我试图用一个数组来做到这一点。

这是我到目前为止所拥有的：

```
$items = array();

// converting day into the date of the next time that day occurs

function getDateString($day) {
        if (date("l") == $day) {
            return date("D j M");
        }
        else {
            $date = strtotime("next $day");
            return date("D j M",$date);
        }
    }

// populating the second dropdown

    function getClubs() {
    connect();

    date_default_timezone_set('Europe/London');

    $day = date("l");
    $time = date("G");

    if ($time >= 21) {
        $day = date('l', strtotime($day .' +1 day'));
        }

    if ($day == Monday) {
        $query = "SELECT * FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY')";
        }

    else if ($day == Tuesday) {
        $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY')";
        }

    else if ($day == Wednesday) {
        $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY')";
        }

    else if ($day == Thursday) {
        $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY')";
        }

    else if ($day == Friday) {
        $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY')";
        }

    else if ($day == Saturday) {
        $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY')";
        }

    else if ($day == Sunday) {
        $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY')";
        }

        $result = mysql_query($query);
        $items = array();

        if($result && mysql_num_rows($result) > 0) { 
            while ($row = mysql_fetch_array($result)) { 
    //          $items[] = array($row['name']);

    $name = $row['name'];
    $day = $row['day'];

// add these two to an array

                array_push($items, $name, $day);

                echo "<option>" . $name . " (" . getDateString($day) . ")</option>";

                }         
        }
    }

// populating div

function printDetails() {

// echo $name (as an example) from the array above

   echo $items[0];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:01:50.740

改变：

```
echo "<option>" . $name . " (" . getDateString($day) . ")</option>"; 
```

至

```
$dropdown .= "<option>" . $name . " (" . getDateString($day) . ")</option>"; 
```

然后在你的下

```
<select><?=$dropdown;?></select> 
```

您正在按照正在打印的 HTML 的顺序在代码中回显选项标签。意思是，您在选择标签之外呼应它。通过使用 .= 您将 $dropdown 变量与循环中的其余选项连接起来。

在一天结束时，您的下拉选项将存在于 $dropdown 中，您可以在页面上的任何位置使用它，无论您放置它。

前任：

```
<div><?=$dropdown;?></div>
<select><?=$dropdown;?></select> 
```

但请注意每个项目周围的标签。

# excel - 根据不同的文件将行从一个文件复制到另一个文件

> ID：10981613
> 
> 赞同：0
> 
> 时间：2012-06-11T14:00:39.090
> 
> 标签：excel, excel-2007, excel-formula, excel-2003

我有一个包含 2 列的 Excel 文件：`Words`& `Definition`（3000 行）。我有另一个 Excel 文件，其中`words`不包含定义（200 行）。

如何仅提取第二个 Excel 文件（200 行）中的那些行（单词和定义 - 来自 3000）？

基本上我想过滤那些。

在 SQL 中我会写

```
Select * from table1 where table1.words=table2.words 
```

我如何在excel中实现这个？也请给我程序...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:06:43.120

如果它只是您需要复制的 2 列中的值，我会使用第二个文件中的[VLOOKUP()](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)函数来查找并返回第一个文件中的匹配项。不要忘记将 `range_lookup`参数设置为`false`.

如果您确实需要复制整行，那么 VBA 宏中的循环将是更好的选择。

# asp.net-mvc - NHibernate + Spring.NET 延迟加载失败 - 没有会话

> ID：10981625
> 
> 赞同：1
> 
> 时间：2012-06-11T14:01:33.300
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, spring.net

我使用 Spring.NET AOP 与 NHibernate 进行事务和会话管理。当用户太快提出多个请求时 - 延迟加载失败，异常“没有会话或会话已关闭”。

我在 NHibernate 配置中使用 SpringSessionContext 作为 CurrentSessionContext

```
public class FluentSessionFactory : LocalSessionFactoryObject
{
    protected override ISessionFactory NewSessionFactory(Configuration config)
    {
        var conf = Fluently
            .Configure()
            .Database(
                MsSqlConfiguration
                    .MsSql2008
                    .ConnectionString(c => c.FromConnectionStringWithKey("MyConnection"))
                    // TODO: use ExposeConfiguration method
                    .CurrentSessionContext<SpringSessionContext>()
                )
            .Mappings(
                m => m.FluentMappings
                    .AddFromAssembly(this.GetType().Assembly)
            )
            .BuildSessionFactory();
        return conf;
    }
} 
```

在 xml 配置中：

```
<object id="SessionFactory" type="IndustryTracker.NHibernateRepository.FluentSessionFactory, IndustryTracker.NHibernateRepository">
    <property name="DbProvider" ref="DbProvider" />
</object> 
```

和 OpenSessionInView 模块

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true">
        <add name="OpenSessionInView"  type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate31"/>
    </modules>
</system.webServer> 
```

应用程序实现了从 db 获取实体的下一个工作流：视图 -> 控制器 -> 管理器 -> 存储库，与另一端相同。因此，会话是根据请求、事务 - 每次调用管理器创建的。

```
<object id="TransactionManager" type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate31">
    <property name="DbProvider" ref="DbProvider"/>
    <property name="SessionFactory" ref="SessionFactory"/>
</object>

<tx:advice id="TxAdvice" transaction-manager="TransactionManager">
    <tx:attributes>
        <tx:method name="*"/>
    </tx:attributes>
</tx:advice>

<object id="Pointcut" type="Spring.Aop.Support.SdkRegularExpressionMethodPointcut, Spring.Aop">
    <property name="patterns">
        <list>
            <value>MyAppication.Managers.AccountManager</value>
            <value>MyAppication.Managers.CompanyManager</value>
        </list>
    </property>
</object>

<aop:config>
    <aop:advisor advice-ref="TxAdvice" pointcut-ref="Pointcut"/>
</aop:config> 
```

这种行为的可能原因是什么，我该如何解决这个问题（Not.LazyLoad() 和 NHibernateUtil.Initialize() 在我的上下文中是不可接受的变体）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:01:18.950

经过一番搜索，我发现问题出在配置中。配置中有spring WebSupportModule缺少http模块，所以正确的是：

```
 <httpModules>
      <add name="Spring" type="Spring.Context.Support.WebSupportModule, Spring.Web"/>
      <add name="OpenSessionInView" type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate31"/>  
    </httpModules> 
```

所以[Marijn](https://stackoverflow.com/users/322283/marijn) 是对的——它与弹簧的连接很弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:43:16.763

*1\. 会话工厂配置为`OpenSessionInViewModule`？*

您可能忘记为以下对象配置会话工厂`OpenSessionInViewModule`：

```
<appSettings>
  <add key="Spring.Data.NHibernate.Support.OpenSessionInViewModule.SessionFactoryObjectName" 
       value="SessionFactory"/>
</appSettings> 
```

这必须在应用程序设置中完成。

*2\. 正确的基于 FluentNHibernate 的 spring session 工厂？*

您似乎正在代码中配置会话工厂。您是否尝试过像文档和 BennyM[的博客](http://blog.bennymichielsen.be/2009/01/04/using-fluent-nhibernate-in-spring-net/)[中描述的那样配置会话工厂](http://www.springframework.net/doc-latest/reference/html/orm.html#d4e6795)？您的方法直接从 Fluent NHibernate 返回会话工厂，绕过所有 spring.net 支持。`NewSessionFactory`

*3\. 你的会话工厂事务知道吗？*

```
<object id="SessionFactory" 
        type="IndustryTracker.NHibernateRepository.FluentSessionFactory, IndustryTracker.NHibernateRepository">
  <property name="DbProvider" ref="DbProvider" />
  <!-- provides integation with Spring's declarative transaction management features -->
  <property name="ExposeTransactionAwareSessionFactory" value="true" /> 
</object> 
```

*4\. 你的控制器是否有有`scope="application"`或没有范围定义的依赖关系？*

我可能一直在寻找错误的方向。如果您的控制器具有`application`范围依赖性，则意味着快速请求可能会干扰。默认值为`"scope="application"`; 所以你也想检查没有范围定义的合作者。请参阅有关[web 范围](http://www.springframework.net/doc-latest/reference/html/web.html#web-objectscope)的文档。

# c - 对自定义驱动程序使用#ifdef

> ID：10981626
> 
> 赞同：1
> 
> 时间：2012-06-11T14:01:37.467
> 
> 标签：c, c-preprocessor

我正在为嵌入式设备开发 GLCD 库。这个想法是将其分为高级和低级部分。这允许“用户”只为他的显示控制器编写低级函数，并使用高级函数，如线条、线条、字符串绘制等，而无需重写这些函数。

为了简单起见，我决定库的用户只需执行以下操作，例如在他的 main.c 中使用带有 SSD1289 控制器的显示器：

```
#define LCD_USE_SSD1289 
```

示例文件 ssd1289_lld.h：

```
#ifdef LCD_USE_SSD1289

lld_lcdInit(void);

#endif 
```

示例文件 ssd1289_lld.c：

```
lld_lcdInit(void) {
     // do some stuff for this controller
} 
```

示例文件 s6d1121_lld.h：

```
#ifdef LCD_USE_S6D1121

lld_lcdInit(void);

#endif 
```

示例文件 s6d1121_lld.c：

```
lld_lcdInit(void) {
     // do some stuff for this controller
} 
```

在高级文件中，我将执行以下操作：

```
#include "drivers/ssd1289_lld.h"
#include "drivers/s6d1121_lld.h"

void lcdInit(void) {
    lld_lcdInit();
} 
```

但这在某种程度上不起作用：

*   当我不做任何 #define LCD_USE_SSD1289 时，它确实可以正常工作
*   在为不同类型的控制器添加第二个驱动程序后，它仍然可以在不定义任何类型的情况下工作，并且当我定义错误的控制器类型时它也可以工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:05:35.607

确保预处理器将区域放在`#ifdef LCD_USE_SSD1289`后面`#define LCD_USE_SSD1289`。你说`#define LCD_USE_SSD1289`在`main.c`档案里。你真的应该使用一个单独的 definitions.h 文件，它`#include`位于 ssd1289_lld.h 的顶部。希望有帮助。

# javascript - Eclipse - 同一页面中的 Javascript 和 JSTL 不会验证

> ID：10981627
> 
> 赞同：1
> 
> 时间：2012-06-11T14:01:41.280
> 
> 标签：javascript, eclipse, validation, jstl

我在 .jsp 页面中有如下代码：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">
    var TextFields = new Array();

    $(document).ready(function() {
        <c:if test="${fn:length(textProperties) > 0}">
            <c:forEach var="i" begin="0" end="${fn:length(textProperties) - 1}" step="1">
                TextFields[${i}] = "${textProperties[i]}";
            </c:forEach>
        </c:if> 
```

我在我的 JSTL 代码中收到红色，因为它试图将其解释为 javascript。有没有办法让编辑器分别识别 javascript 和 JSTL，例如我的项目中的配置或插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:06:52.900

将此添加到 JSP 页面的顶部

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" %> 
```

如果您仍然遇到问题，您是否将 Eclipse 项目创建为“Web 项目”？它应该适用于您的默认 Eclipse 设置。

# c# - 示例 MVC3 蜜罐项目

> ID：10981640
> 
> 赞同：0
> 
> 时间：2012-06-11T14:02:02.803
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, honeypot

我想知道是否有人有一个 MVC3 项目的 sln 文件，其中包含我可以下载和修改的蜜罐反垃圾邮件功能。我自己尝试将蜜罐添加到项目中，但无济于事；我总是遇到语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:35:33.607

根据[Honeypot MVC 页面](https://github.com/webadvanced/Honeypot-MVC)，您可以从 NuGet 包管理器控制台安装项目 - `Install-Package SimpleHoneypot.MVC`.

我会使用 NuGet 将包安装到现有的 MVC 解决方案中，而不是尝试手动添加它，因为它会拉入引用并修改配置以及它为您做的任何其他事情。

# php - Doctrine2 继承 - 1452：违反完整性约束

> ID：10981647
> 
> 赞同：1
> 
> 时间：2012-06-11T14:02:19.510
> 
> 标签：php, inheritance, symfony, doctrine-orm, mysql-error-1452

我在新服务器上部署了我的项目，当我尝试插入具有继承的类时出现错误“SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败”：

```
/**
 * @ORM\Table(name="prosante")
 * @ORM\Entity
 */

class ProSante extends Base
{

    /**
     * @ORM\Column(type="string")
     */
    protected $firstName;
}

/**
 * @ORM\Table(name="base")
 * @ORM\Entity(repositoryClass="Test\MyBundle\Entity\BaseRepository")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({"base" = "Base",
 *                        "prosante" = "ProSante",
 *                        "pharmacie" = "Pharmacie"})
 */

abstract class Base
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;
} 
```

日志 ：

```
[2012-06-11 15:42:46] doctrine.DEBUG: INSERT INTO base (name) VALUES (?) ({"1":"Blabla"}) [] []
[2012-06-11 15:42:46] doctrine.DEBUG: INSERT INTO prosante (id, firstname) VALUES (?, ?) ({"1":"0","2":"PATRICK"}) [] [] 
```

我不知道该怎么做，因为当我在本地主机上执行相同的 INSERT 时错误不会出现。

**编辑** 我检查“SELECT LAST_INSERT_ID();” 在我的数据库中手动插入一个新的“基础”后，它不返回 0，我不明白。

**解决方案**这是一个驱动程序问题，我改变它并且它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:16:33.837

看来学说正在将“基地”解释为自己的表格。我认为您想要在这里实现的是将您的 Base 类作为映射的超类。

为此，只需将其注释为：

@MappedSuperclass

然后你可以安全地把它扩展到你的其他实体..

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#mapped-superclasses](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#mapped-superclasses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-08T09:16:18.047

我遇到了一个非常相似的问题，并花了很多时间寻找它的原因，所以我允许自己在这里分享我的解决方案，因为这是我在 SO 上找到的最接近的问题。希望这可以帮助一些人:)

## 就我而言

尽管第一个查询（对于基类）中自动生成的键已成功传递给第二个查询（对于子类），但 Doctrine 抛出了相同的外键约束违规异常。第二个查询仍然因违反此约束而失败，并且事务已回滚。

挖掘日志（我在 CentOS 上使用 MariaDB），我发现了这个错误：

`[ERROR] Transaction not registered for MariaDB 2PC, but transaction is active`

## 我的解决方案

原来我的 MariaDB 服务安装或更新不正确（我不确切知道，是其他人做的）。

跑步[`mysql_upgrade`](https://mariadb.com/kb/en/mysql_upgrade/)解决了我的问题。

# internet-explorer - DOJO 增强网格 SCRIPT28：IE 调整大小时出现堆栈空间不足错误

> ID：10981648
> 
> 赞同：0
> 
> 时间：2012-06-11T14:02:20.320
> 
> 标签：internet-explorer, dojo, grid, pagination, stack-overflow

我在我的项目中使用 MVC 3 架构。我有一个母版页和一个主页。在主页中，我有道场分离器。

左窗格包含树控件，右窗格包含带有分页插件的 DOJO 增强网格。它工作得很好，但是当我调整 IE 窗口的大小时，它在 dojo.js 中返回脚本错误（在 IE 开发工具栏脚本窗口中）。我无法调试并且无法找到错误的发生。我尝试使用谷歌，但没有得到任何帮助。谁能指导我找到/修复错误。

```
SCRIPT28: Out of stack space 
dojo.js, line 10904 character 24 
```

我很确定问题出在网格上。当我评论整个网格代码时，IE 中没有错误

编辑：我能够找到问题的确切位置。问题在于分页插件。如果我删除分页插件，它不会引发任何错误。分页插件中是否有任何错误（打开）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:33:20.820

固定的！！！。问题在于 Pagination.js 文件中的 postCreate 函数。用以下代码替换 postCreate 函数函数。

```
postCreate: function () {
this.inherited(arguments);
var _3b = this, g = this.grid;
this.plugin.connect(g, "_resize", function () {
    _3b._resetGridHeight();
});
this._originalResize = function () {
    g._resize();
};
g.resize = function (_3c, _3d) {
    _3b._changeSize = _3c;
    _3b._resultSize = _3d;
    _3b._originalResize();
};
this.focus = _27(this);
this._placeSelf(); 
```

}

这就对了。

有关更多详细信息，请参阅 - [http://bugs.dojotoolkit.org/ticket/14732#comment:9](http://bugs.dojotoolkit.org/ticket/14732#comment:9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T15:58:53.360

好吧，我在增强网格和单元格内的锚点方面遇到了同样的问题，在 ie9 中，堆栈空间错误让我发疯了。我不知道错误在哪里，但我只是停止在 onclick 事件上传播事件，就像这样。

```
_onClick:function(evt){
        if(this.enabled == true){
            dojo.stopEvent(evt);
            this.onClick(evt);
        }
    }, 
```

使用 dojo.stopevent()。并稍后调用我的 onclick 函数。

# java - 来自图像的 JButton

> ID：10981650
> 
> 赞同：1
> 
> 时间：2012-06-11T14:02:22.333
> 
> 标签：java, image, swing, jbutton, imageicon

我想从图像中制作 JButton。但是当我这样做时：

```
private void AddMainActionsButtons(Container powZawartosci){
  JPanel mainActionButtons = new JPanel();
  JButton applyButton = createImageButton("obrazki/apply.png");
  mainActionButtons.add(applyButton);
  powZawartosci.add(mainActionButtons);
  mainActionButtons.setBounds(150,530,400,90);
}

private JButton createImageButton(String imagePath){
  ImageIcon icon = uploadImage(imagePath,"");
  JButton button = new JButton(icon);

  return button;
} 
```

JButton 看起来很糟糕，因为图像在按钮组件内，实际上我在图像上得到了图像。如何创建与我的图像一样大的 JButton，以及如何 100% 覆盖它。换句话说：如何使我的图像成为按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:09:26.373

您需要通过删除边框从按钮中取出空间。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/10862262/418556)。

![](../Images/3dc90ceea9490208da0a4059c2068b99.png)

上图是分割成 9 部分的单个图像。N/S/E/W 是按钮（东部被激活 - 显示为红色边框），其余是标签 - 每个都包含原始图像的相关部分。

另请参阅[此答案](https://stackoverflow.com/a/7360696/418556)以获取使用带有`JToggleButton`实例的更简单图像的版本。

![](../Images/0cb9744231015c2eefa4c23492a9d34c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:10:53.980

您是否尝试将背景设置为透明颜色？这将删除图像周围通常看起来很糟糕的时髦灰色边框。

# asp.net - 过滤我的 ASP.NET MVC 视图的输出

> ID：10981656
> 
> 赞同：1
> 
> 时间：2012-06-11T14:02:38.463
> 
> 标签：asp.net, asp.net-mvc

我想在将所有视图的输出发送给客户端之前对其进行一些额外的处理。

我尝试将视图基类设置为我覆盖的自定义类`Execute`，但这不起作用，因为 Razor 将`Execute`在不调用我的派生类中生成自己的。

是否有另一种特定于 MVC 的方法来做到这一点，或者我唯一的希望是通过在 Global.asax 中设置来诉诸“经典”的`Response.Filter`方法`Application_BeginRequest`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:05:10.653

您应该实施[IResultFilter](http://msdn.microsoft.com/en-us/library/system.web.mvc.iresultfilter.aspx)。常见的方法是从[ActionFilterAttribute派生](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.aspx)

```
void OnResultExecuted(
    ResultExecutedContext filterContext
) 
```

# hash - 为什么 md5 和 sha-* 在其哈希结果中只使用字母数字字符？

> ID：10981660
> 
> 赞同：2
> 
> 时间：2012-06-11T14:02:53.317
> 
> 标签：hash, ascii, sha, md5sum

我知道不想使用 '\0'，但扩展 ASCII 范围内的所有其余部分都可以使用，对吗？

这不会提供更好/安全/“更少的冲突”哈希吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:14:52.437

您是从错误的前提开始的——它们产生的结果可以（确实）包括从 0 到 255 的所有 8 位值。例如，SHA-256 的测试向量之一是“abc”的输入。结果（十六进制）是：

```
ba7816bf 8f01cfea 414140de 5dae2223 b00361a3 96177a9c b410ff61 f20015ad 
```

就在该测试中，结果包括值从 0x03 到 0xff 的字节。

为了显示，可能（通常）以十六进制的形式呈现。对于在电子邮件中传输，它们通常使用 MIME 或 UUENCODE 之类的东西进行编码。然而，散列本身不限于这种方式。

以这种方式转换结果对抗碰撞性没有影响——你仍然有 160/256/任何位的实际数据，但表示被扩展了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:05:00.030

结果只是十六进制编码以便更好地阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:07:56.230

事实上，那些哈希算法输出的是数字，而不是字符串。它们仅使用字母 af 与数字 0-9 组合，这使得输出成为十六进制数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:14:07.763

MD5 产生一个 128 位的散列。（16 字节）sha，取决于是 sha1 还是 sha256 产生 160 位（20 字节）或 256 位（32 字节）散列。请注意，我说的是二进制长度/强度。时间越长，发生碰撞的可能性就越小。

大多数用户将其粘贴到 DB 字段或诸如此类的事实使得使用 varions binary-ascii 转换算法将其转换为 ASCII 变得很方便。这根本不应该影响碰撞概率的强度，因为您最终会得到一个更大的 ASCII 字符串。

FWIW 我已经在二进制形式的加密产品中使用 SHA1、SHA256 超过 5 年了，我建议按照以下顺序选择哈希，从最强到最弱：SHA256、SHA1、MD5。有一个网站可以“反转” MD5，所以我强烈建议不要这样做。

# python - 浮点数反转十六进制？

> ID：10981661
> 
> 赞同：0
> 
> 时间：2012-06-11T14:02:56.827
> 
> 标签：python, floating-point, hex

我有一个浮点数（可以是正数或负数，让我们使用 0.5）并希望将其转换为倒序十六进制。所以对于上面的例子：

```
0.5 would output 0000003F 
```

请解释我可以使用什么方法来解决上述问题。

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:09:45.417

从[这个问题](https://stackoverflow.com/questions/10974062/converting-a-32-bit-int-value-into-a-float)中，您已经了解[了该`struct`模块](http://docs.python.org/library/struct.html)。只需以其他方式应用它即可获得答案：

```
struct.pack("<f", .5).encode('hex') 
```

# image - QLabel 在 QScrollArea 内显示图像

> ID：10981662
> 
> 赞同：7
> 
> 时间：2012-06-11T14:02:58.260
> 
> 标签：image, qt, scrollbar, qlabel, qscrollarea

我已经在 Qt 中成功实现了一个图像查看器（用于 DICOM）。我可以看到图像，并且可以正确放大和缩小。

现在，如果图像太大而无法在放大时显示，我想查看滚动条。

我用过用户界面。我放置了一个**QScrollArea**。在里面，**QLabel**。*verticalScrollBarPolicy*是*ScrollBarAsNeeded*。_ Horizo *​​ntalScrollBarPolicy*是*ScrollBarAsNeeded*。

问题是：它不起作用。我放大，但没有出现滚动条。

# 第二次尝试：使用 QScrollArea 内的布局。

所以现在在 QScrollArea 和 QLabel 之间有一个**QWidget ：一个水平布局。**打开相同的图像，现在我可以在右侧看到一个垂直滚动条。图像从左到右拉伸。当我缩放图像时，它的比例是正确的。

但是...我缩小了滚动条，即使我可以看到整个图像。水平滚动条永远不会出现。

调整 QLabel 的大小似乎没有影响。但是，如果我调整 QScrollArea 的大小（调整主窗口的大小），则会出现水平滚动条。

# 我一直在检查一些数字：

## 在 QScrollArea 中

*   它的大小发生变化：低于 599 宽度（为什么是这个数字？我在任何地方都看不到它）出现水平条。
*   *sizeHint()*总是返回相同的值：33x41

## 在 QLabel

*   尺寸会发生变化，但这并不影响。
*   *sizeHint()*总是返回相同的值：560x1558

这是来自 UI 设计器的 XML 代码：

```
<widget class="QWidget" name="centralWidget">
   <property name="autoFillBackground">
    <bool>false</bool>
   </property>
   <layout class="QVBoxLayout" name="verticalLayout">
    <property name="margin">
     <number>0</number>
    </property>
    <item>
     <widget class="QScrollArea" name="scrollArea">
      <property name="widgetResizable">
       <bool>true</bool>
      </property>
      <property name="alignment">
       <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
      </property>
      <widget class="QWidget" name="scrollAreaWidgetContents">
       <property name="geometry">
        <rect>
         <x>0</x>
         <y>0</y>
         <width>637</width>
         <height>649</height>
        </rect>
       </property>
       <layout class="QHBoxLayout" name="horizontalLayout_2">
        <item>
         <widget class="QLabel" name="miImagen">
          <property name="sizePolicy">
           <sizepolicy hsizetype="Preferred" vsizetype="Preferred">
            <horstretch>0</horstretch>
            <verstretch>0</verstretch>
           </sizepolicy>
          </property>
          <property name="autoFillBackground">
           <bool>true</bool>
          </property>
          <property name="scaledContents">
           <bool>true</bool>
          </property>
          <property name="alignment">
           <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
          </property>
         </widget>
        </item>
       </layout>
      </widget>
     </widget>
    </item>
   </layout>
  </widget> 
```

我错过了什么？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:20:23.127

我知道这是一篇旧帖子 - 但如果您或任何人仍有问题，设置`QScrollArea::widgetResizable`为 false 可能会有所帮助。

至少，当我尝试类似的事情时，我的垂直滚动条总是被禁用（即使我将可滚动小部件的大小设置为大于视口的高度），直到我将其设置为 false。

如果是真的，我认为它会更新可滚动小部件的大小，因此不需要滚动条。这使您可以执行我猜想的示例中的操作，并实现拉伸以适应功能。（实际上我想要做的是适合宽度，只有一个垂直滚动条）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:58:08.420

您是否尝试过遵循[Qt 的滚动区域示例](http://doc.qt.io/qt-5/qtwidgets-widgets-imageviewer-example.html)？如果您使用 QLabel 来显示图像，那么使用 QScrollArea 几乎是实现您想要的标准的方法。你像这样使用它（来自示例）：

```
 imageLabel = new QLabel;
 imageLabel->setBackgroundRole(QPalette::Base);
 imageLabel->setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);
 imageLabel->setScaledContents(true);

 scrollArea = new QScrollArea;
 scrollArea->setBackgroundRole(QPalette::Dark);
 scrollArea->setWidget(imageLabel);
 setCentralWidget(scrollArea); 
```

然后像这样处理缩放：

```
 void ImageViewer::zoomIn() { 
    scaleImage(1.25);
 }

 void ImageViewer::zoomOut() {
     scaleImage(0.8);
 }

 void ImageViewer::scaleImage(double factor)
 {
     Q_ASSERT(imageLabel->pixmap());
     scaleFactor *= factor;
     imageLabel->resize(scaleFactor * imageLabel->pixmap()->size());

     adjustScrollBar(scrollArea->horizontalScrollBar(), factor);
     adjustScrollBar(scrollArea->verticalScrollBar(), factor);

     zoomInAct->setEnabled(scaleFactor < 3.0);
     zoomOutAct->setEnabled(scaleFactor > 0.333);
 }

 void ImageViewer::adjustScrollBar(QScrollBar *scrollBar, double factor) {
     scrollBar->setValue(int(factor * scrollBar->value()
                         + ((factor - 1) * scrollBar->pageStep()/2)));
 } 
```

当然，通过查看示例，您可以更好地了解正在发生的事情，但这就是它的要点。我认为也许 adjustScrollBar() 函数可能对您最有帮助。

您对原始帖子的最后评论是正确的， QScrollArea 不会神奇地注意到其内容大小的变化。看看该示例如何使用 adjustScrollBar() 来弥补这一事实。

# c++ - 延迟加载 Dylib

> ID：10981664
> 
> 赞同：3
> 
> 时间：2012-06-11T14:03:03.823
> 
> 标签：c++, xcode

我正在使用 XCode 3.2.5 为 Mac OS 10.5+ 编写一个 c++ 命令行工具，其编写方式如下：-

```
int main()
{
    ...
    if (a == b)
    {
        doWork() // defined in my.dylib
        doOtherWork() // defined in his.dylib
    }
} 
```

但是，即使 a 和 b 不相等，它也会崩溃：-

```
Lab-Computer-9adf72:tmp labuser$ ./myapp 
dyld: Library not loaded: ./my.dylib
  Referenced from: /private/tmp/./myapp
  Reason: image not found
Trace/BPT trap 
```

有没有办法让应用程序至少在不调用函数时工作？或者让加载只是懒惰地发生？

从多个 dylib 调用了多个这样的函数，因此每个函数检查将是最后的手段，但即使这样也会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:10:04.743

我想您使用`dlopen`. 然后，您应该使用`dlsym`按名称获取符号（函数）的地址。所以你会这样做：

```
void (*doWork)();
void (*doOtherWork)();

int main() {
    doWork = dlsym(RTLD_DEFAULT, "doWork");
    doOtherWork = dlsym(RTLD_DEFAULT, "doOtherWork");
    if (a == b) {
        if (doWork) doWork();
        if (doOtherwork) doOtherWork();
    }
} 
```

您可以在此处获取更多信息：[Mac OS X ABI 动态加载器参考](https://developer.apple.com/library/mac/#documentation/developertools/Reference/MachOReference/Reference/reference.html)。

# css - Bootstrap折叠用css选择第一个和最后一个孩子

> ID：10981670
> 
> 赞同：2
> 
> 时间：2012-06-11T14:03:26.340
> 
> 标签：css, twitter-bootstrap

任何建议如何选择 Bootstrap 折叠模块的第一个和最后一个孩子？我需要首先和最后选择“.accordion-heading”..

```
 <div id="accordion2" class="accordion">
<div class="accordion-group">
  <div class="accordion-heading"><a class="accordion-toggle" href="#collapseOne" data-toggle="collapse" data-parent="#accordion2"><br />
    Toggle Accordion 1<br />
    </a></div>
  <div id="collapseOne" class="accordion-body in collapse" style="height: auto;">
    <div class="accordion-inner">
      <p>Content 1</p>
    </div>
  </div>
</div>
<div class="accordion-group">
  <div class="accordion-heading"><a class="accordion-toggle" href="#collapseTwo" data-toggle="collapse" data-parent="#accordion2"><br />
    Toggle Accordion 2<br />
    </a></div>
  <div id="collapseTwo" class="accordion-body collapse" style="height: 0px;">
    <div class="accordion-inner">
      <p>Content 2</p>
    </div>
  </div>
</div>
<div class="accordion-group">
  <div class="accordion-heading"><a class="accordion-toggle" href="#collapseThree" data-toggle="collapse" data-parent="#accordion2"><br />
    Toggle Accordion 3<br />
    </a></div>
  <div id="collapseThree" class="accordion-body collapse" style="height: 0px;">
    <div class="accordion-inner">
      <p>Content 3</p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:06:44.380

[http://jsfiddle.net/PzB8D/1/](http://jsfiddle.net/PzB8D/1/)

你必须先去`accordion-group`，然后参考`accordion-heading`There's gonna be the only one element with class `accordion-heading`:)

```
.accordion-group:first-child .accordion-heading a{color: #f00;}
.accordion-group:last-child .accordion-heading a{color: #0f0;} 
```

# c# - 关于属性最佳实践的 Ndoc？

> ID：10981671
> 
> 赞同：0
> 
> 时间：2012-06-11T14:03:30.180
> 
> 标签：c#, ndoc

我的项目经理上周暗示在类中的属性上使用 ndoc。这是应该做的事情吗？这样做是否被认为是最佳实践？我目前正在为我正在处理的项目部分扩展我的所有 ndoc，但不知道我需要多深。我当然已经为类和每个方法提供了摘要、参数、返回和备注，但是属性也需要 ndoc 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:11:56.167

就像任何其他成员一样，属性的含义应该被记录下来。这不仅应包括属性的作用或可用于什么，还应包括其初始值、特殊情况（例如，不得分配的值；会导致异常或自动被其他值替换的值），如以及在可能的情况下覆盖派生类中的属性的后果和目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:21:21.067

公共财产是与外界的合同，我认为它们应该记录在案。

内部属性将仅在同一个程序集中使用，因此您可以不记录它们而侥幸逃脱。

受保护的属性将仅在派生类（内部或公共）中使用，因此它们可能需要一些文档。

私有属性只会在类本身中使用，所以你可以再次摆脱它。

请注意，“逃避不记录它”暗示了我对此的感受：您应该记录。同时我意识到有时你需要做一件事或另一件事......

也许你应该在[http://programmers.stackexchange.com上问这个](http://programmers.stackexchange.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:24:29.023

无论您选择的文档工作流使用 GhostDoc、NDoc 还是其他任何东西，都应该始终记录公共属性。公共属性和方法的 XML 注释会在人们使用时出现在 Intellisence 中，因此没有理由不在那里添加一些东西。即使属性的名称解释了它的作用，也很高兴在那里有 XML 注释来确认这一点。大量代码中有很多陷阱，因此让使用您的代码的人知道他们没有陷入其中是有礼貌的。

私有财产可以去任何一种方式。我会犹豫将其称为特别的最佳实践，因为要查看您必须在课堂上发表的评论，此时您可以简单地查看它的用法。也就是说，我仍然将 XML 注释放在私有属性上，如果不是为了别人，也是为了我自己。从现在起 6 个月后，您将无法记住自己在做什么，并且您可以添加的任何结构性注释都将使您更容易从中断的地方继续学习。

# ios - 如何使用 Delphi/Freepascal 从 iOS 应用程序中读取捆绑文件

> ID：10981673
> 
> 赞同：2
> 
> 时间：2012-06-11T14:03:46.963
> 
> 标签：ios, delphi, freepascal, fpc

我的 iOS 应用程序中捆绑了一个 *.txt 文件，需要阅读其内容。我已经找到了这个 Objective-C 代码：

`NSString *myFilePath = [[NSBundle mainBundle] pathForResource:@"MyFile" ofType:@"txt"];`

是否有有效的德尔福解决方案？

# java - jLayer 1.0.1 getPosition 并不总是返回 ms

> ID：10981682
> 
> 赞同：0
> 
> 时间：2012-06-11T14:04:19.943
> 
> 标签：java, jlayer

我在我的程序（播放/停止，显示进度）上实现了 jLayer 的简单用法，效果很好。

但是，我遇到了 getPosition() 的问题，它在我的 Windows XP 机器上以 ms 为单位返回值（如文档所述），但在我的 Ubuntu 机器上以 SECONDS 为单位。

有谁知道为什么会有这样的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:42:07.390

看看源代码吧！我想你说的是 Player 类。

它的 getPosition() 直接调用 AudioDevice.getPosition()，而 JavaAudioDevice 实现返回 SourceDataLine.getMicroSecondPostion() / 1000。后一个类是 JRE 的一部分，所以我假设特定的 JRE 版本有问题或操作系统有问题不提供更高的分辨率。也可能是导致此问题的硬件平台的特定音频驱动程序。

除了更新 JRE 和操作系统之外，您无能为力。如果这没有帮助，您只能提交错误报告。

编辑：对于错误报告，我指的是 VM 的供应商，因为 JLayer 的家伙对 JRE 返回的虚假值无能为力。

# android - 提高android中录制声音的质量

> ID：10981687
> 
> 赞同：2
> 
> 时间：2012-06-11T14:04:38.727
> 
> 标签：android, audio-recording

> **可能重复：**
> [提高android中的录音质量？](https://stackoverflow.com/questions/9389572/improve-audio-recording-quality-in-android)

我想将音频录制到 3gp 文件中。我可以毫无问题地做到这一点，并且可以听到声音。但是我能听到的声音很慢而且不清楚。为了提高语音质量，我编写了一个程序但得到 java.lang.RuntimeException: start failed

```
public void onClick(View arg0) 
        {
            root=Environment.getExternalStorageDirectory();
            audiofile=new File(root,"sound.3gp");
            if(!audiofile.exists())
            {
                Log.w(TAG, "File doesn't exists");
                try 
                {
                    audiofile.createNewFile();

                } catch (IOException e) 
                {
                    Log.w(TAG, "Unable to create audio file",e);
                }                   
            }

            recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);           
            recorder.setOutputFile(audiofile.getAbsolutePath());

            try 
            {
                recorder.setAudioSamplingRate(10);
                recorder.setAudioEncodingBitRate(20);
                recorder.prepare();

            } catch (IllegalStateException e) 
            {
                Log.w(TAG, "This is IllegalStateException");
            } catch (IOException e) 
            {
                Log.w(TAG, "This is IoException");
            }
            recorder.start();
        } 
```

我的代码有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:08:33.680

根据我[在 Stackoverflow 上的现有答案，](https://stackoverflow.com/a/9390035/940096)我为您提供了以下代码来提高您的音质。

```
recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setAudioEncoder(MediaRecorder.getAudioSourceMax());
recorder.setAudioEncodingBitRate(16);
recorder.setAudioSamplingRate(44100);
recorder.setOutputFile(path);
recorder.prepare();
recorder.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:12:38.350

> 我写了一个程序但得到 java.lang.RuntimeException: start failed

您是否确保在第一次运行您调用 onStop 的应用程序时

```
recorder.stop();
recorder.reset();
recorder.release(); 
```

我很确定当您尝试运行此程序时已经使用了记录器。这就是您收到此错误的原因。始终确保您在 onStop 中调用上述方法。Camera 也是如此。

# flash - 在运行时加载 MovieClip

> ID：10981693
> 
> 赞同：0
> 
> 时间：2012-06-11T14:05:19.030
> 
> 标签：flash, apache-flex, load, runtime, movieclip

我创建了一个影片剪辑，我希望将其加载到 flex 中。但我不能使用我的任何影片剪辑属性。

为什么？

这就是我所做的：

```
var loader:Loader;
private function init():void{
   loader = new Loader();
   loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);
   loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
   loader.load(new URLRequest("myClip.swf"));
}

private function completeHandler(event:Event):void{
   trace(loader.content.myElement); // getting exception
} 
```

在我的 flash fla 文件中，我创建了该影片剪辑，并为其中一个元素设置实例名称 - myElement。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:07:24.467

查看 loader.content 是否确实已加载，并且是 MovieClip。

# php - php + oauth：是否可以在没有 SSL 的情况下进行测试

> ID：10981696
> 
> 赞同：0
> 
> 时间：2012-06-11T14:05:31.040
> 
> 标签：php, oauth

我是这个东西的新手，所以如果问题是转储，请原谅。我正在尝试使用 oAuth 与 Google（Facebook、Twitter、...）登录 api 一起使用。我在本地没有 SSL。是否可以在本地进行测试，或者无论如何我都需要一个带有 SSL 的远程服务器？

先感谢您！

# database - 如何在 postgres 中设置同步流复制？

> ID：10981701
> 
> 赞同：5
> 
> 时间：2012-06-11T14:05:44.657
> 
> 标签：database, postgresql, database-replication, postgresql-9.1

我正在尝试使用 Postgres 9.1 设​​置同步复制，但我无法让它工作。我能够配置流复制，但不是同步的。我希望我没有错过任何明显的东西。我已经仔细阅读了管理员指南中第 17、18、14、25、26 和 29 章的许多部分。

我正在运行 ubuntu 12.04，我的主 postgresql.conf 具有这些，以及所有其他标准设置：

```
listen_addresses = '*'              # what IP address(es) to listen on;
wal_level = archive                 # minimal, archive, or hot_standby
archive_mode = on                   # allows archiving to be done
archive_command = 'test ! -f /data/pgWalArchive/%f && cp %p /data/pgWalArchive/%f'
wal_keep_segments = 100             # in logfile segments, 16MB each; 0 disables ??? What should this be ???? 
max_wal_senders = 3                 # max number of walsender processes 
```

我的 pg_hba.conf 有这个，除了标准的东西：

```
host    all             all             XX.6.35.0/24            md5
host    replication     postgres        XX.6.35.0/24            md5 
```

我的主数据库只有一个序列，所以它很小。我成功地在主服务器中创建了主服务器的备份并恢复了它：

```
sudo -u postgres pg_basebackup -D ~/backup -F tar -x -z -l ~/backup/base1 -v -h XX.6.35.51 -U postgres 
```

我还将 WAL 归档文件复制到备用数据库。我的备用 recovery.conf 文件有这个：

```
restore_command = '/usr/lib/postgresql/9.1/bin/pg_standby /data/pgWalArchive %f %p %r'
archive_cleanup_command = '/usr/lib/postgresql/9.1/bin/pg_archivecleanup /data/pgWalArchive %r'
standby_mode = on
primary_conninfo = 'host=XX.6.35.51 port=5432' # e.g. 'host=masterIpAddressOrName port=5432' 
```

两台服务器启动都没有问题，日志看起来还不错。我的待机有这个：

```
2012-06-08 10:23:51 MDT LOG:  shutting down
2012-06-08 10:23:51 MDT LOG:  database system is shut down
2012-06-08 10:23:53 MDT LOG:  database system was shut down in recovery at 2012-06-08 10:23:51 MDT
2012-06-08 10:23:53 MDT LOG:  entering standby mode
2012-06-08 10:23:53 MDT LOG:  consistent recovery state reached at 0/1D000078
2012-06-08 10:23:53 MDT LOG:  record with zero length at 0/1D000078
2012-06-08 10:23:53 MDT LOG:  streaming replication successfully connected to primary
2012-06-08 10:23:53 MDT LOG:  incomplete startup packet
2012-06-08 10:23:54 MDT FATAL:  the database system is starting up
2012-06-08 10:23:54 MDT FATAL:  the database system is starting up
2012-06-08 10:23:55 MDT FATAL:  the database system is starting up
2012-06-08 10:23:55 MDT FATAL:  the database system is starting up
2012-06-08 10:23:56 MDT FATAL:  the database system is starting up
2012-06-08 10:23:56 MDT FATAL:  the database system is starting up
2012-06-08 10:23:57 MDT FATAL:  the database system is starting up
2012-06-08 10:23:57 MDT FATAL:  the database system is starting up
2012-06-08 10:23:58 MDT FATAL:  the database system is starting up
2012-06-08 10:23:58 MDT FATAL:  the database system is starting up
2012-06-08 10:23:59 MDT FATAL:  the database system is starting up
2012-06-08 10:23:59 MDT LOG:  incomplete startup packet
2012-06-08 10:24:40 MDT LOG:  redo starts at 0/1D000078 
```

问题是当我对主人发表声明时，它们会永远挂起。我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T19:23:18.190

两年前推出 9.0 时，我是第一个将流式复制（又名“二进制复制”）投入生产的人，但由于 Postgres 的复制功能处于不断变化的状态，因此跳过了 9.1。现在，大约在 9 月的第二周左右，9.2 已经发布 - 你想知道它！

在 9.2 中，复制已被简化并得到了极大的改进！

现在您可以进行复制级联了！以前，您必须让主服务器直接为所有从服务器服务。现在，您可以通过流式传输到一个从属设备来卸载主设备，然后将该从属设备流式传输到您喜欢的任意数量！这使您可以将第一级从站设置为潜在的热备用系统，在您的主站发生故障时将接管该系统。

配置它的整个策略已经过修改，我发现了你的问题，因为我自己正在寻找一种快速设置指南类型的东西，因为我已经知道所有的基础知识。但是，您可以在此处开始使用新的 9.2 内容：

[Postgres 9.2 高可用性、负载平衡和复制](http://www.postgresql.org/docs/9.2/static/high-availability.html)

与此同时，至少有一家供应商推出了一些东西来帮助普通人充分利用这一点：Science Tools 宣布“双模式”已添加到他们的 PolyglotSQL 产品中。PolyglotSQL 允许应用程序对大多数 SQL 数据库进行操作，而忽略方言差异。同样，“双模式”功能允许您拥有一个只读连接和另一个用于写入的连接，而无需重新编写您的应用程序（！！），因此您可以利用 Postgres 同步复制，卸载主所有写入，并将负载放在您配置的任何阅读器上。

我强烈建议您迁移到 Postgres v 9.2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-27T10:58:01.287

回答太晚了，但这[是](https://www.youtube.com/watch?v=XFp8wHNtP3s)一个很棒的视频教程，其中涵盖了为 postgresql 进行流复制的步骤步骤过程。这真的很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T16:02:17.447

我没有看到有关 synchronous_standby_names 的任何信息 - 您需要告诉它主服务器将等待哪些服务器。

[http://www.postgresql.org/docs/9.1/static/warm-standby.html#SYNCHRONOUS-REPLICATION](http://www.postgresql.org/docs/9.1/static/warm-standby.html#SYNCHRONOUS-REPLICATION)

[http://www.postgresql.org/docs/9.1/static/runtime-config-replication.html#GUC-SYNCHRONOUS-STANDBY-NAMES](http://www.postgresql.org/docs/9.1/static/runtime-config-replication.html#GUC-SYNCHRONOUS-STANDBY-NAMES)

`wal_level`哦 -如果您想在从属服务器上运行查询，请不要忘记调整您的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-23T18:59:25.597

我也有类似的问题——对于 Postgres 9.3，我必须先添加`hot_standby = on`到我的备用数据库服务器的`postgresql.conf`文件中，然后我的备用服务器才能接受读取查询/客户端。

# javascript - KeyDown/KeyUp 70-120ms 延迟。如何减少？

> ID：10981702
> 
> 赞同：-1
> 
> 时间：2012-06-11T14:05:47.227
> 
> 标签：javascript, canvas, keyboard, keyboard-events

我们正在使用画布开发**街机**（大量动作和速度）浏览器 2d 游戏。

有时我们的测试玩家会报告我们存在延迟：在键位后玩家仍然移动 5-10 像素。

我已经挖掘了这个问题，你可以看到自己延迟[http://jsfiddle.net/C4ev3/7/](http://jsfiddle.net/C4ev3/7/)（尽可能快地尝试 keydown/up 任何键）。我的结果是从 70 到 120 毫秒。我认为这很多。（仅供参考，我们的网络延迟为 10-20 毫秒）。

任何想法如何减少这种延迟？

**upd**我注意到在好的硬件上这个延迟低于 30-40 毫秒。但我正在 core2duo、winxp、chrome 19 上进行测试——它不是带有 IE6 的 P4 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:30:56.297

嗨，您可以做的一件事是尝试使用定义的函数，而不是使用匿名函数，

[http://jsfiddle.net/C4ev3/10/](http://jsfiddle.net/C4ev3/10/) - 对我来说这个报告在 50-100 MS

但是我不推荐 jQuery 用于 Canvas 应用程序，它对于你使用的很少，你应该尝试使用原生 Javascript

[http://jsfiddle.net/C4ev3/11/](http://jsfiddle.net/C4ev3/11/) - 对我来说这报告了 30-70 MS

**Javascript 线程** 我在评论中注意到的一件事 Javascript 不是多线程的，嗯，Urm-Arr，它有点是 setInterval 是异步而不是同步，但是影响窗口是单线程 EG，如果你有一个有一些数字的类是它使用 setInteval 将使用另一个线程并且没有问题改变数学但是在任务中然后需要在页面上绘制它将进入 JS 句柄 Que 的底部，

Javascript 的某些部分位于不同的线程上，如果您的线程想要更​​改表单，那么任何更改页面的操作都必须在主线程上运行，就像任何 Windows 应用程序一样，您必须调用主线程来为您完成

但是它不像其他任何东西一样多线程，你不能在给定的 Wim（如 windows）上处理或中止，

其他异步任务包括 AJAX 可以选择异步和同步

**更新以显示我对 FPS 限制的评论：**

请多多包涵。这链接到一个已经为显示示例而构建的项目：所以我的游戏完全是 OOP

```
var elem = document.getElementById('myCanvas');
var context = elem.getContext("2d");
context.fillStyle   = '#888';
context.lineWidth   = 4;
// Draw some rectangles.
context.fillRect(0,   0, 800, 600);
context.fillStyle = '#f00';

var ball = new Ball();
var leftPadel = new Padel(10, 60, 40, 120);
var rightPadel = new Padel(750, 520, 40, 120);

pong = new Pong();
pong.draw();

setTimeout("ball.move()", pong.redrawTime()); 
```

在我的乒乓球课内是游戏的所有主要工作原理，但这里是你需要看到的 FPS 位

```
this.fps = 30;
this.maxFPS = 60;

this.redrawTime = function(){
    return (1000 / this.fps)
}

this.lastDraw = (new Date)*1 - 1; 
```

然后你可以看到我的间隔在球上。移动这在重绘结束时再次调用主 pong 类我有 FPS 检查和限制代码

```
this.fps = ((now=new Date) - this.lastDraw);
if(this.fps > this.maxFPS){
    this.fps = this.maxFPS;
}
this.lastDraw = (new Date)*1 - 1;
if(this.reporting = true){
    console.clear();
    console.log("FPS: "+this.fps.toFixed(1))
}
setTimeout("ball.move()", pong.redrawTime()); 
```

然后，这会迫使您在不排队主线程的情况下获得最佳 FPS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:38:15.793

试试这个：

**e.stopPropagation()**

> 停止将事件冒泡到父元素，防止任何父处理程序收到事件通知。

**e.preventDefault()**

> 阻止浏览器执行默认操作。使用方法 isDefaultPrevented 了解是否曾调用过此方法（在该事件对象上）。

我的分钟。谷歌浏览器的结果：7ms

# wpf - 我可以将数据绑定到 DataGridRow.DetailsVisibility 吗？

> ID：10981705
> 
> 赞同：2
> 
> 时间：2012-06-11T14:05:53.983
> 
> 标签：wpf, xaml, data-binding, wpfdatagrid, rowdetailstemplate

我有一个带有 RowDetailsTemplate 的 WPF 数据网格控件。我希望能够在绑定到该行的对象上设置一个属性，以设置该特定行是否应显示详细信息。

因此，例如，如果我有一个如下所示的基本布局，并且“Detail”对象有一个名为“Expanded”的布尔属性，我可以在某处绑定该属性以在值更改时显示其行的详细信息吗？

```
<DataGrid ItemsSource="{Binding CollectionOfDetailObjects}">
    <DataGrid.Columns>
        <!--My columns here-->
    </DataGrid.Columns>
    <DataGrid.RowDetailsTemplate>
        <DataTemplate>
            <!--Details to show sometimes-->
        </DataTemplate>
    </DataGrid.RowDetailsTemplate>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:08:08.610

您可以[`DetailsVisibility`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridrow.detailsvisibility.aspx)在[`DataGrid.RowStyle`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.rowstyle.aspx).

# iphone - 将相机视频从 iOS 设备流式传输到另一台 iOS 设备

> ID：10981723
> 
> 赞同：1
> 
> 时间：2012-06-11T14:06:57.167
> 
> 标签：iphone, ios, avfoundation

是否有任何开源库或代码或处理将一台 iOS 设备的相机视频流式传输到另一台设备的流式传输？或者至少有一些最佳实践？

我在这里发现了一些问题，但它们都处理纯音频流。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:36:28.417

在 github 中查看[这个项目。](https://github.com/nicnocquee/iPad-iPhone-Photo-Booth--iPhone-as-Wireless-Cam-for-iPad-)

# javascript - 我如何遍历项目列表并将它们的数据值推送到数组中？

> ID：10981724
> 
> 赞同：0
> 
> 时间：2012-06-11T14:07:04.643
> 
> 标签：javascript, jquery

尝试遍历所有添加了数据 ID 的项目列表，我基本上想将这些值中的每一个推送到一个数组中，但不确定如何实现这一点或我需要在哪里放置循环索引，我的代码到目前为止是：

JS

```
// Find all boxes and length
var box = _.els.grid.children(),
          box_l = box.length,
          i = 0;
          box_arr = [];

//create array of all box datas
for ( i; i <= box_l; i++ ) {
  box_arr.push( box.data('id')[i] );
}
console.log( box_arr ); 
```

HTML

```
<ul id="grid" class="clearfix">
    <li class="a" data-id="1"></li>
    <li class="b" data-id="2"></li>
    <li class="c" data-id="3"></li>
    <li class="d" data-id="4"></li>
    <li class="e" data-id="5"></li>
    <li class="f" data-id="6"></li>
    <li class="g" data-id="7"></li>
    <li class="h" data-id="8"></li>
    <li class="i" data-id="9"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:14:24.203

您需要做的就是修复此行：

```
box_arr.push( box.data('id')[i] ); 
```

您只想获取框中第 i 个元素的 ID：

```
for (i = 0; i < box_l; i++) {
  box_arr.push( box.eq(i).data('id') );
} 
```

但是，利用 map() 等的不同方法可能是更好（更清洁）的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:09:40.460

您可以使用 jQuery[`map`](http://api.jquery.com/map/)方法：

```
​var arr = $("#grid li").map(function() {
        return $(this).data("id");
}).get();​​​​​​​ 
```

这是一个[工作示例](http://jsfiddle.net/xjeUz/)。

您现有代码的问题在于，`data`在您的情况下，它只返回一个字符串，而不是一个数组，因此`box.data('id')[i]`未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:09:22.853

```
var ids = [];

$('li[data-id]').each(function (index, value) {
    ids.push($(value).data('id'));
}); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-11T14:22:30.140

由于从未接受过问题答案，因此已更新。

这：似乎搞砸了：（见每个评论）

```
var box = _.els.grid.children(), // what is "_.els.grid."? _ is undefined
          box_l = box.length, 
          i = 0; //semi colon?
          box_arr = []; //no var? 
```

我将 var 放在每个变量上的一个原因。（但这不是问题）

jQuery 答案：

```
var box = $('#grid > li');
var box_arr = [];

box.each(function() {
  box_arr.push($(this).data('id'));
});
console.log(box_arr);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<ul id="grid" class="clearfix">
  <li class="a" data-id="1"></li>
  <li class="b" data-id="2"></li>
  <li class="c" data-id="3"></li>
  <li class="d" data-id="4"></li>
  <li class="e" data-id="5"></li>
  <li class="f" data-id="6"></li>
  <li class="g" data-id="7"></li>
  <li class="h" data-id="8"></li>
  <li class="i" data-id="9"></li>
</ul>
```

注意：我一直对此投反对票，但它的编写方式`box_arr = [];`默认`window.box_arr = [];`为部分（我真的不关心这两种方式）

但更重要的是，也许`_.els.grid.children()`这`_`在问题中是未定义的，所以这是一条无用的行，也可能`var box = undefined,`这就是 OP 代码实际上失败的原因。

更新为片段以显示代码确实有效。

HTML5 示例：

```
var box = document.getElementById('grid').children,
  box_l = box.length,
  i = 0,
  box_arr = [],
  numbersArray = []; // actual numbers
//put data in arrays
for (i; i < box_l; i++) {
  box_arr.push(box[i].dataset.id);
  numbersArray.push(box[i].dataset.id * 1);
}
console.log("Array:", box_arr, numbersArray);
```

```
<ul id="grid" class="clearfix">
  <li class="a" data-id="1"></li>
  <li class="b" data-id="2"></li>
  <li class="c" data-id="3"></li>
  <li class="d" data-id="4"></li>
  <li class="e" data-id="5"></li>
  <li class="f" data-id="6"></li>
  <li class="g" data-id="7"></li>
  <li class="h" data-id="8"></li>
  <li class="i" data-id="9"></li>
</ul>
```

没有 jQuery：

```
var box = document.getElementById('grid').children,
  box_l = box.length,
  i = 0,
  box_arr = [];
//console.log(box, box_l);
//create array of all box datas
for (i; i < box_l; i++) {
  box_arr.push(box[i].getAttribute('data-id'));
}
console.log("Array:", box_arr);
```

```
<ul id="grid" class="clearfix">
  <li class="a" data-id="1"></li>
  <li class="b" data-id="2"></li>
  <li class="c" data-id="3"></li>
  <li class="d" data-id="4"></li>
  <li class="e" data-id="5"></li>
  <li class="f" data-id="6"></li>
  <li class="g" data-id="7"></li>
  <li class="h" data-id="8"></li>
  <li class="i" data-id="9"></li>
</ul>
```

# jsp - 所有单选按钮都在 struts 1.3.8 中被选中

> ID：10981731
> 
> 赞同：1
> 
> 时间：2012-06-11T14:07:22.110
> 
> 标签：jsp, radio-button, struts-1

我正在使用struts1.3.8。我的应用程序中有两个单选按钮。
当我尝试选择一个然后另一个时，两者都被选中。
但是在任何时候都应该只选择一个......
如何解决？
示例代码是...

```
<tr>
  <td>
    <html:radio property="allPersons" value="AllPersons"/>
    <b><bean:message key="register.allPersons"/></b>
  </td>
</tr>
<tr>
  <td>
    <html:radio property="selectedPersons" value="Selected Persons"/>
    <b><bean:message key="register.selectedPersons"/></b>
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:14:32.873

如果它们引用相同的属性，它们将相互排斥。由于它们的属性不同，因此可以同时选择它们。

互斥单选按钮的要点是在多个值中进行选择，并设置一个属性。代码应如下所示：

```
<tr>
  <td>
    <html:radio property="kindOfPersonSelection" value="AllPersons"/>
    <b><bean:message key="register.allPersons"/></b>
  </td>
</tr>
<tr>
  <td>
    <html:radio property="kindOfPersonSelection" value="Selected Persons"/>
    <b><bean:message key="register.selectedPersons"/></b>
  </td>
</tr> 
```

# database - 休眠和日期比较

> ID：10981736
> 
> 赞同：0
> 
> 时间：2012-06-11T14:07:42.213
> 
> 标签：database, hibernate, date, comparison

假设我有一个*截止日期*和一个*提醒时间跨度*。如何使用 Hibernate 3.6 条件查询找到到期日期小于当前日期 + 提醒的日期？换句话说，我想找到我已显示提醒的事件。当提醒应该在几天或毫秒内发送时，提醒是一个长标记，以更容易者为准。

总而言之，我的实体如下：

```
java.util.Date Event.DueDate
Long Event.Type.Reminder.Before // (in days or millis) 
```

例子

```
Today is 2012-06-11.
Included:
  DueDate is 2012-06-15 and Before is 30 days.
Excluded:
  DueDate is 2012-06-15 and Before is 1 day. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:30:14.287

最终，这正是 ANSI SQL 所称的**日期/时间算术**，特别是您正在寻找**INTERVAL**数据类型处理。不幸的是，数据库对 INTERVAL 数据类型的支持差异很大。我真的想在 HQL 中支持这一点（可能还有标准，尽管这取决于 JPA 规范委员会的协议）。就像我说的那样，困难在于对间隔的各种（如果有的话）支持。

目前最好的选择（通过 Hibernate 4.1）是提供一个自*定义***函数**（您可能希望它以间隔呈现给您的数据库特定的日期算法表示。`org.hibernate.dialect.function.SQLFunction``Dialect`*`org.hibernate.cfg.Configuration#addSqlFunction`*

 *以下是使用 Oracle函数的**示例：**`NUMTODSINTERVAL`

```
public class MySqlFunction implements SQLFunction
{
    public Type getReturnType(Type firstArgumentType,
                              Mapping mapping) throws QueryException
    {
        return TimestampType.INSTANCE;
    }

    public String render(Type firstArgumentType,
                         List arguments, 
                         SessionFactoryImplementor factory) throws QueryException
    {
        // Arguments are already interpreted into sql variants...
        final String dueDateArg = arguments.get( 0 );
        final String beforeArg = arguments.get( 1 );

        // Again, using the Oracle-specific NUMTODSINTERVAL
        // function and using days as the unit...
        return dueDateArg + " + numtodsinterval(" + beforeArg + ", 'day')";
    }

    public boolean hasArguments() { return true; }
    public boolean hasParenthesesIfNoArguments() { return false; }
} 
```

您可以在 HQL 中使用它，例如：

```
select ...
from   Event e
where  current_date() between e.dueDate and
       interval_date_calc( e.dueDate, e.before ) 
```

其中 'interval_date_calc' 是您注册 SQLFunction 的名称。*

# ruby-on-rails - Ruby on Rails 错误 Errno::EPIPE: Broken pipe

> ID：10981740
> 
> 赞同：1
> 
> 时间：2012-06-11T14:07:56.550
> 
> 标签：ruby-on-rails, passenger

我`Errno::EPIPE: Broken pipe`经常在我的 rails 应用程序的日志中看到这个错误。我看到很多人有同样的错误，但问题是 MySQL、Mongo 或Passenger，正如他们的堆栈跟踪所证明的那样。我的似乎无法与 ruby​​ 交谈。任何人都可以帮我破译这个堆栈跟踪或帮助我朝着正确的方向前进吗？

```
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/protocol.rb:177:in `write'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/protocol.rb:177:in `write0'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/protocol.rb:153:in `write'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/protocol.rb:168:in `writing'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/protocol.rb:152:in `write'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/http.rb:1546:in `send_request_with_body'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/http.rb:1531:in `exec'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/http.rb:1049:in `request'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/http.rb:1037:in `request'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/http.rb:543:in `start'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/http.rb:1035:in `request'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/net/http.rb:845:in `post'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:154:in `rescue_action_without_handler'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:74:in `rescue_action'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:162:in `perform_action_without_flash'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/flash.rb:146:in `perform_action'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `send'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `process_without_filters'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/filters.rb:606:in `process'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/base.rb:391:in `process'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/base.rb:386:in `call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/routing/route_set.rb:437:in `call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:87:in `dispatch'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:121:in `_call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
vendor/ruby/1.8/gems/haml-3.0.4/rails/../lib/sass/plugin/rack.rb:41:in `call'
vendor/ruby/1.8/gems/haml-3.0.4/rails/../lib/sass/plugin/rack.rb:41:in `call'
vendor/ruby/1.8/gems/rack-ie-redirect-fix-0.0.1/lib/rack-ie-redirect-fix.rb:11:in `call'
vendor/ruby/1.8/gems/rack-git-version-0.0.2/lib/rack-git-version.rb:14:in `call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
vendor/ruby/1.8/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
vendor/ruby/1.8/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/session/abstract_store.rb:122:in `call'
vendor/ruby/1.8/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
vendor/ruby/1.8/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
vendor/ruby/1.8/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
vendor/ruby/1.8/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
vendor/ruby/1.8/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
vendor/ruby/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
vendor/ruby/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
vendor/ruby/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
vendor/ruby/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:106:in `call'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/classic_rails/application_spawner.rb:99:in `spawn_application'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/utils.rb:479:in `safe_fork'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/classic_rails/application_spawner.rb:84:in `spawn_application'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/spawn_manager.rb:230:in `spawn_rails_application'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/gems/1.8/gems/passenger-3.0.2/helper-scripts/passenger-spawn-server:99 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:25:20.300

我认为在您的情况下，外部程序或服务器在您的程序尝试写入时断开连接。当您执行特定操作时会发生该错误吗？

# jquery - Safari 和 chrome 中的灯箱窗口问题

> ID：10981741
> 
> 赞同：0
> 
> 时间：2012-06-11T14:08:04.123
> 
> 标签：jquery, height, lightbox

我在使用 jquery novice to ninja 一书中的简单灯箱示例的 chrome 和 safari 中遇到问题

![在此处输入图像描述](../Images/5cb62966db21dd80c3c64ca38ded4844.png)

```
$('body').css('overflow-y', 'hidden'); // hide scrollbars!
    $('<div id="overlay"></div>')
      .css('top', $(document).scrollTop())
      .css('opacity', '0')
      .animate({'opacity': '0.5'}, 'slow')
      .appendTo('body'); 
```

问题是如果页面比窗口长，我可以滚动并看到覆盖层和 jquery 计算到窗口高度的位置之间有一条明显的线，

在Firefox中，我无法滚动。所以这不是一个真正的问题；Colorbox 或其他不是一个选项，因为我需要对 lootbox 进行太多自定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:14:20.190

`position: fixed`因为覆盖很好地解决了这个问题！

# java - 扩展/模拟枚举

> ID：10981743
> 
> 赞同：3
> 
> 时间：2012-06-11T14:08:09.937
> 
> 标签：java, enums, junit4

> **可能重复：**
> [模拟 Java 枚举以添加一个值来测试失败案例](https://stackoverflow.com/questions/5323505/mocking-java-enum-to-add-a-value-to-test-fail-case)

我有一个适用于枚举的 switch 语句。开关的“默认”情况是抛出运行时异常。它的编码是这样的，以捕获有人向枚举添加值但忘记更新 switch 语句的情况。

我想测试这个执行路径，但我正在努力寻找一种方法，而不是将未使用的枚举值放入我的实时代码中。这是对枚举的滥用，还是有一种可接受的方式来编写这个测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:17:15.283

我认为你可以做的测试是有一个测试用例，你基本上可以得到你的枚举的所有值，比如

```
T[] allEnumValues = enumValue.getDeclaringClass().getEnumConstants(); 
```

或者

```
T[] allEnumValues = enumType.values(); 
```

然后把每一个都拿出来放在`switch`声明中。如果你得到一个异常，你就有问题了。

PS：[链接](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getEnumConstants%28%29)到`getEnumConstants()`方法。

# c# - MVVM 中空行的网格

> ID：10981751
> 
> 赞同：0
> 
> 时间：2012-06-11T14:08:36.427
> 
> 标签：c#, wpf, mvvm, prism

我想要一个带有空行（n 行）的类似网格的 excel。GridView 绑定到 m 个模型对象的集合。如果用户在空行中输入新数据，则必须将新模型对象添加到绑定集合中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:33:47.913

每个人都建议您将空模型对象引入集合中以创建空行，但您的最后一条评论说您不希望模型中有任何空行。这正是拥有`ViewModel`遗嘱允许你做的事情。您`ViewModel`包含您的显示集合，该集合可以具有额外的空模型对象，但仍不能将它们保留回您的`Model`层。关键是你的收藏和你的`ViewModel`收藏不一样`Model`。

如果您需要将此数据重新加载到此屏幕并保留所有内容，那么您需要为每个模型对象保留一个行号，然后您可以在需要的地方插入空模型对象。

# php - 验证来自 html 表单文本框的数值范围。PHP 或 Javascript

> ID：10981752
> 
> 赞同：0
> 
> 时间：2012-06-11T14:08:42.623
> 
> 标签：php, range, forms, http-post

我有一个包含许多文本框的表单，即音量、增益、高音、中音和低音。只能输入整数，这是用 javascript 验证的，并且 Maxlength 设置为，所以没有问题。但是如何确保只输入 0 到 65535 之间的数字。

```
<?php
        $name = $_POST['ampMod'];
        $volume = 'Volume = '. $_POST['volume'];
        $gain = 'Gain = '. $_POST['gain'];
        $treble = 'Treble = '. $_POST['treble'];
        $middle = 'Middle = '. $_POST['middle'];
        $bass = 'Bass = '. $_POST['bass'];

if($volume != null && $gain != null && $treble != null && $middle != null && $bass != null)
{

        echo "<h3> $name </h3>";
        echo "<table><tr>";
        echo "<td>$volume</td>";
        echo "<td>$gain</td>";
        echo "<td>$treble</td>";
        echo "<td>$middle</td>";
        echo "<td>$bass</td>";
}
else
{echo ("Please try again. Values must be between 0-65535\. 0=Off 65535=Full On 10<br><a href = \"ampchoice.php\">Click here to try again!</a>");}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:10:31.203

只是做这样的事情？不知道您为什么要介于两者之间`0`，`65535.`我怀疑您是否希望他们走得那么高。如果您只是更改`10`为`65535`

```
if($value > 10 || $value < 0)
{
    echo "Value cant be higher then 10 or lower then 0";
} 
```

这确保该值介于`10`和`0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:27:15.923

在这种情况下，我通常更喜欢默默地清理表单输入。您已经进行了客户端验证。如果该值高于允许值，只需将该值设置为允许的最大值，而不是显示错误消息。

```
// Clean the posted data and prevent notices if not set
$volume = (isset($_POST['volume'])) ? (int) $_POST['volume'] : 0;

// Make sure the value is within a certain range
$min = 0;
$max = 10;
$volume = min($max, max($min, $volume)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:43:41.470

我会用javascript来做。这样，您就不必提交表单，如果用户输入更高的数字，则会显示警报（或更好的东西）：

在输入字段中，只需调用 javascript 函数：

```
<input id="thefirstnumbervalue" type="text"  onchange="checknumber('thefirstnumbervalue')" />

<input id="thesecondnumbervalue" type="text"  onchange="checknumber('thesecondnumbervalue')" /> 
```

在函数中：

```
function checknumber(theid){
var mynumbervalue = document.getElementById(theid).value;
if (mynumbervalue > 65535){

document.getElementById(theid).value = "65535";

alert("Please try again. Values must be between 0-65535\. ...");
}

if(mynumbervalue < 0){

document.getElementById(theid).value = "0";

alert("Please try again. Values must be between 0-65535 ...");
}
} 
```

这是原始 javascript 中的一种简单方法。如果您使用 ajax 和 jquery，结果可能会更容易更好。这是对 php 解决方案的补充，因为您还应该在插入数据库之前检查数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:49:07.440

您可以使用`filter`扩展（自 5.2 起默认捆绑）：

```
$FILTER_VALIDATE_KNOB = array(
        'filter' => FILTER_VALIDATE_INT,
        'options' => array(
                'min_range' => 0,
                'max_range' => 65535,
        )
);

$res = filter_input_array(INPUT_POST, array(
  'ampMod' => $FILTER_VALIDATE_KNOB,
  'volume' => $FILTER_VALIDATE_KNOB,
  'gain' => $FILTER_VALIDATE_KNOB,
  'treble' => $FILTER_VALIDATE_KNOB,
  'middle' => $FILTER_VALIDATE_KNOB,
  'bass' => $FILTER_VALIDATE_KNOB,
));

if (is_null($res) || in_array(null, $res, true)) {
    // some or all fields are missing
    // - missing fields have null value
} elseif (in_array(false, $res, true)) {
    // some or all fields have a wrong value
    // - wrong values have false value
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T14:58:19.687

重要的是要提到您的 $volume、$gain、$treble、$middle 和 $bass 实际上永远不会为空，因为除了 $_POST 值之外，您还为它们分配了一个字符串。此外，在尝试使用 $_POST 值之前，您应该始终检查它们是否存在（否则您将收到未定义的通知消息）。

这是基于您拥有的代码的 PHP 版本的示例（未经测试，但应该可以正常工作）。

```
<?php

function isValidRange( $value, $low = 0, $high = 65535) {
  // validate / cast value as int (add additional validation here
  $value = (int)$value;
  if ( $value > $high || $value < $low ) {
    // return null (not a valid value)
    return null;
  }
  // otherwise the value is valid so return it
  return $value; 
}

// make sure the $name var is safe to use
$name = ( isset($_POST['ampMod']) ) ? htmlentities($_POST['ampMod'],ENT_QUOTES,'UTF-8') : null;
$volume = ( isset($_POST['volume']) ) ? isValidRange($_POST['volume']) : null; 
$gain = ( isset($_POST['gain']) ) ? isValidRange($_POST['gain']) : null; 
$treble = ( isset($_POST['treble']) ) ? isValidRange($_POST['treble']) : null; 
$middle = ( isset($_POST['middle']) ) ? isValidRange($_POST['middle']) : null; 
$bass = ( isset($_POST['bass']) ) ? isValidRange($_POST['bass']) : null; 

if( isset($volume) && isset($gain) && isset($treble) && isset($middle) && isset($bass) )
{

        echo "<h3> $name </h3>";
        echo "<table><tr>";
        echo "<td>Volume = $volume</td>";
        echo "<td>Gain = $gain</td>";
        echo "<td>Treble = $treble</td>";
        echo "<td>Middle = $middle</td>";
        echo "<td>Bass = $bass</td>";
        echo "</tr></table>";
} else {
  echo ("Please try again. Values must be between 0-65535\. 0=Off 65535=Full On 10<br><a href = \"ampchoice.php\">Click here to try again!</a>");}
?> 
```

最后，我不建议仅依靠 JavaScript 来实际检查您的值是否可以安全使用（即回显它们），而是使用 js 作为对用户的预警，然后使用 PHP 进行正确验证是最好的方法。

# nhibernate - 升级到 Nhibernate 3.2 后，虽然映射的私有变量具有值，但公共属性值为 null

> ID：10981754
> 
> 赞同：0
> 
> 时间：2012-06-11T14:08:56.447
> 
> 标签：nhibernate, mapping

我们将 Nhibernate 升级到 3.2 并在以下情况下遇到问题：返回映射的私有字段值的公共属性返回 NULL

// 映射

```
<many-to-one lazy="no-proxy" name="Agent" cascade="none" column="`AgentId`" not-null="false" access="field.camelcase-underscore"/> 
```

// 属性声明如下

```
private Agent _agent;

public Agent Agent
{
   get{ return _agent; }
} 
```

从会话中获取实体后，在快速观看中我可以看到 _agent 的值，但 Agent 属性返回 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:23:43.727

我认为 Agent 属性应该是虚拟的，因为 NH 需要创建一个代理来以正确的方式处理“无代理”设置。

# windows-8 - 如何在 Windows 8 Metro 应用动态磁贴中禁用徽标？

> ID：10981755
> 
> 赞同：4
> 
> 时间：2012-06-11T14:08:57.813
> 
> 标签：windows-8, microsoft-metro, live-tile

我正在尝试禁用 Metro 应用程序动态磁贴中的徽标，以便显示磁贴通知中的最后一行文本。[Windows 8 文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868263%28v=win.10%29.aspx "Windows 8 文档") 说有一种方法可以在文件中禁用此徽标`Package.appxmanifest`。但是，它没有具体说明如何。我已经设置了`ShortName`我的`.appxmanifest`并且我还将“显示名称”字段设置为“所有徽标”；但是，默认徽标仍然出现在动态磁贴的左下角，并遮盖了我的磁贴通知中的最后一行文本。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:37:44.753

动态磁贴可以有图像、文本或没有品牌。默认值为应用程序徽标，您可以在创建动态磁贴更新时通过指定品牌“无”来覆盖它，如下所示：

```
var templateContent = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideImage);
   var imageElement = (XmlElement) templateContent.GetElementsByTagName("image").Item(0);
   imageElement.SetAttribute("src", string.Concat(imagePath, "wide_tile.png"));

   var bindingElement = (XmlElement) templateContent.GetElementsByTagName("binding").Item(0);
   bindingElement.SetAttribute("branding", "none");

   var tile = new TileNotification(templateContent);
   TileUpdateManager.CreateTileUpdaterForApplication().Update(tile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:57:59.090

您不能同时拥有最后一行文本和短名称。它是徽标/短名称或文本的最后一行。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d7ed6580-0528-4a28-a475-731b37f2c89b](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d7ed6580-0528-4a28-a475-731b37f2c89b)

# html - 将字体样式添加到 jquery 中的弯曲文本

> ID：10981758
> 
> 赞同：-1
> 
> 时间：2012-06-11T14:09:06.560
> 
> 标签：html

我正在向弯曲的形状文本添加字体样式，例如（小写字母、全大写字母、无大写字母和正常），但在这些样式中，只有小写字母、全大写字母和无大写字母有效，但正常情况下它不起作用。为什么？

普通文本应该看起来像“普通”，意味着第一个字母应该是大写字母，剩余的应该很小。请尽快给我答案。有没有人回答我的问题。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<form>
Top Center:<input type="text" name="Location 3" id="ta3" class="changeMe2" maxlength="15"><br /><br />

Bottom Center:<input type="text" name="Location 4" id="ta4" class="changeMe2" maxlength="25">

      <font color="#000000">Font Style :</font>
        <select id="size" >
            <option value="0">[No Engraving]</option>
            <option value="variant">Small Caps</option>
            <option value="uppercase">All Caps</option>
            <option value=" lowercase">No Caps</option>
            <option value="capitalize">Normal</option>
        </select>
</form>

 <div id="container3" class="changeMe2" style="left:112px; font-size:18px; text-align:center;letter-spacing:-1px;
    position: absolute;
    top:117px;
    z-index: 999;">

        <div id="float3">

               <p>              
                </p>   
        </div>
    </div>

 <div id="container4" class="changeMe2" style="left:109px; font-size:18px; text-align:center;letter-spacing:-1px;
    position: absolute;
    top: 217px;
    z-index: 999;">
        <div id="float4">
            <p>           
             </p>
        </div>
    </div>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="arctext.js"></script>
<script type="text/javascript">
$(window).load(function(){
    function curveTop(){
        var text = '<p>' + $('#ta3').val() + '</p>',
               size = $('#size').val();

        $('#float3')
            .css({
               fontStyle: size
            })
            .html(text)
            .find('p')
            .arctext({radius:80});

        }

    $('#ta3').keyup( curveTop );
    $("#size").change( curveTop );

    function curveBottom(){
        var text = '<p>' + $('#ta4').val() + '</p>',
            size  = $('#size').val();

        $('#float4')
            .css({
               fontStyle: size
            })
            .html(text)
            .find('p')
            .arctext({radius: 80, dir: +2});

        }

    $('#ta4').keyup( curveBottom );
    $("#size").change( curveBottom );
});

$('#ta3').keyup(function(){
                $('#float3').html("<p align = 'center'>"+$(this).val()+"</p>");
            });

             $("#size").change(function() {
                 if($("#size option:selected").val()=="variant") {
                  $('#float3').css("font-variant", "small-caps");
                  }

                  else{
                  $('#float3').css("font-variant", "normal");
                  $('#float3').css("text-transform", $(this).val());

                  }
            });

             $('#ta4').keyup(function(){
                $('#float4').html("<p align = 'center'>"+$(this).val()+"</p>");
            });
                        $("#size").change(function() {
                 if($("#size option:selected").val()=="variant") {
                  $('#float4').css("font-variant", "small-caps");
                  }

                  else{
                  $('#float4').css("font-variant", "normal");
                  $('#float4').css("text-transform", $(this).val());

                  }
            });

</script>
</head>

</body>

</html> 
```

请参阅此代码，请做必要的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:46:56.410

我把你的例子放在 jsFiddle 上：http:
[//jsfiddle.net/h5c6Y/2/](http://jsfiddle.net/h5c6Y/2/)

正如您在 Firefox 和 Chrome 中所期望的那样，文本是大写的。除非您在应用文本转换后更新文本，否则它在 IE 8 中不起作用。因此，我修改了您的代码以在应用转换后更新文本。

```
$("#size").change(function() {
    if($("#size option:selected").val()=="variant") {
        $('#float3,#float4').css("font-variant", "small-caps");
    } else {
        $('#float3,#float4').css("font-variant", "normal");
        $('#float3,#float4').css("text-transform", $(this).val());
    }
    // Added the next two lines to force IE to refresh the text
    $('#float3').html("<p align = 'center'>"+$(this).val()+"</p>");
    $('#float4').html("<p align = 'center'>"+$(this).val()+"</p>");
}); 
```

# sql - 选择年月日格式的最大日期

> ID：10981759
> 
> 赞同：0
> 
> 时间：2012-06-11T14:09:08.683
> 
> 标签：sql, sql-server, tsql, sql-server-2005, max

我有一张桌子，我从中提取了以下样本：

```
Item    <other columns> year month day
----    -- ------------ ---- ----- ---
VX4O    GL 630.5938     2012 7     20
BX2T    GL 0            2012 7     13
MWB806I GL 92004.72     2012 6     15
4XU     GL 17.125       2012 7     20
VL4O    GL 130.5        2012 7     20
MWB806I GL 92004        2012 10    26
MWB806I GL 92005        2012 11    30
3PU     GL 25           2012 7     20
VC4O    GL 630.6094     2012 7     20
MWB806I GL 92005        2012 11    2 
```

第一列是项目，后三列是年、月、日。

如何选择每件商品的最大日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:14:43.073

```
SELECT Item, MAX(CONVERT(DATETIME, RTRIM([year]) 
  + RIGHT('0'+RTRIM([month]), 2) 
  + RIGHT('0'+RTRIM([day], 2)
)
FROM dbo.table
GROUP BY Item; 
```

现在你真的应该考虑修复这个模式。为什么要分别存储年/月/日？它所做的只是使这样的计算变得更加困难，并阻止任何适当的验证（您可以对基本内容进行检查约束，但对于闰年之类的事情要复杂得多）。而且它不会为您节省任何空间（实际上，如果月/日为整数，或者您可以使用 smalldatetime，您会丢失空间）。

# java - 如何从另一个类访问和更改 JTextArea

> ID：10981761
> 
> 赞同：0
> 
> 时间：2012-06-11T14:09:13.530
> 
> 标签：java, swing, oop, class, jtextarea

我已经用 PHP 和其他 Web 编程语言编程了很长时间，但我对 Java 真的很陌生。由于我在使用 PHP 编程时一直使用程序化方法，因此我对 OOP 也很陌生。现在我正在学习一个非常基本的 Java 教程。

我有这个代码用于显示不同的“银行账户”：

```
public class UseAccount extends JFrame {

public static void main(String[] args) {

    Account myAccount = new Account();
    Account yourAccount = new Account();

    myAccount.name = "Jimmy";  
    myAccount.address = "Arjeplogsvägen 1";
    myAccount.balance = 1250.70;

    yourAccount.name = "Greg Giraldo";
    yourAccount.address = "Fishermans friend's 4";
    yourAccount.balance = -5820.30;

    myAccount.display();
    System.out.println();
    yourAccount.display();
}
} 
```

这是“帐户”类：

```
public class Account{
    String name;
    String address;
    double balance;

    void display() {
        System.out.print(name);
        System.out.print(" (");
        System.out.print(address);
        System.out.print(") has $");
        System.out.print(balance);
    }     
} 
```

这真的很好用。但现在我想将此信息输出到 JTextArea。所以我为 UseAccount 类编写了这段代码：

```
import java.awt.*;
import javax.swing.*;

public class UseAccount extends JFrame {
        JTextArea output = new JTextArea();

    public UseAccount() {
        setLayout(new BorderLayout());
        add(output, BorderLayout.CENTER);
    }

    public static void main(String[] args) {
    UseAccount frame = new UseAccount();
    frame.setTitle("Account");
    frame.setSize(500,400);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    Account myAccount = new Account();
    Account yourAccount = new Account();

    myAccount.name = "Jimmy";  
    myAccount.address = "Arjeplogsvägen 1";
    myAccount.balance = 1250.70;

    yourAccount.name = "Greg Giraldo";
    yourAccount.address = "Fishermans friend's 4";
    yourAccount.balance = -5820.30;

    myAccount.display();
    System.out.println();
    yourAccount.display();
    }
} 
```

然后我试图让“Account”类扩展“UseAccount”类，然后使用 output.append("the_text") 来显示文本。但这显然不起作用：

```
public class Account extends UseAccount{
    String name;
    String address;
    double balance;

    void display() {
        output.append(name);
        output.append(" (");
        output.append(address);
        System.out.print(") has $");
        System.out.print(balance);
    }     
} 
```

我没有将每个 system.out.print() 都更改为 output.append，因为它无论如何都不起作用。

我想知道如何从其他类访问和更改我的 textarea("output") 的文本？

我希望有人能够帮助我解决这个小问题。

**我知道之前已经在这里提出了类似的问题。我试图查看针对这些问题的解决方案来解决我的问题。但是大多数其他问题对我来说太复杂了，无法理解它的全部内容。因此，我现在尝试发布我自己的问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:12:58.393

继承不是所有事情的答案，这里根本*不是*答案。继承应该模拟“is-a”，并且无论如何想象都是`Account`a `UseAccount`。

相反，只需将签名更改为`display()`a`JTextArea`作为参数；然后在`display()`代码中你可以`JTextArea`使用。当你打电话时`display()`，传`JTextArea`进去。

换句话说：

```
void display(JTextArea ta) {
    ta.append(name);
    ... 
```

进而

```
// "frame" is the UseAccount object that contains the JTextArea variable `output`
myAccount.display(frame.output); 
```

大多数时候，正确的问题不是“X 怎样才能访问 Y 的一部分”，而是“Y 怎样才能让 X 访问自己的一部分？”

最后一点：在命名变量上付出的小努力确实有回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:29:08.400

该类`Account`可能应该更符合。

```
public class Account extends UseAccount{
    String name;
    String address;
    double balance;

    @Override
    public String toString() {
        return name + 
          " (" +
          address +
          ") has $" + 
          balance;
    }     
} 
```

通过覆盖`toString()`，我们可以简单地执行以下操作：

```
Account account = //...
System.out.println(account);
output.setText(account.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:40:07.167

在阅读以前的答案时，我正在考虑另一种方法（差别不大）：

-class Account 提供将放置在 TextArea 上的文本

- 框架获取该文本并将其放置在 TextArea

在您需要的类帐户中

```
public class Account {
    String name;
    String address;
    double balance;

    public String toString() {
        return name + address + balance; // This string should follow your desired format
    }     
} 
```

在框架中：

```
...
output.append(account.toString())
... 
```

# linq - 如何在 Entity SQL 中使用基于方法的语法编写正确连接的查询？

> ID：10981762
> 
> 赞同：0
> 
> 时间：2012-06-11T14:09:18.283
> 
> 标签：linq, entity-framework, dbcontext

我正在使用实体框架开发一个更大的系统。就个人而言，我确实喜欢用于编写 LINQ/ESQL 查询的基于方法的语法。

但我不知道如何正确编写以下连接查询。

假设，我有以下实体类和 DbContext 存储库：

```
public class A
{
    [Key]
    public int ID{get;set;}
    public virtual ICollection<B> BCollection { get; set; }
}
public class B
{
    [Key]
    public int ID { get; set; }
    public virtual A A { get; set; }
    public virtual ICollection<C> CCollection { get; set; }
    public virtual ICollection<D> DCollection { get; set; }
}
public class C
{
    [Key]
    public int ID { get; set; }
    public virtual B B { get; set; }
}
public class D
{
    [Key]
    public int ID { get; set; }
    public virtual B B { get; set; }
}
public class Entities : DbContext
{
    public DbSet<A> SetA { get; set; }
    public DbSet<B> SetB { get; set; }
    public DbSet<C> SetC { get; set; }
    public DbSet<D> SetD { get; set; }
} 
```

现在我想得到“整个”树：A类的所有项目，以及它们附加的B类项目，其中B类的每个项目都配备了C类和D类的项目。

我可以用这个查询来做到这一点：

```
var x = db.SetA
            .Include(a => a.BCollection.Select(b => b.CCollection))
            .Include(a => a.BCollection.Select(b => b.DCollection))
            .ToList(); 
```

但我认为这可以更容易地完成，对吧？

请注意：我确实想急切加载整个树，因为我不想使用延迟加载。

**编辑：**

这不是一个关于单个问题的问题，我的问题更多是关于方法。当我编写如上所示的查询时，EF 会生成一个巨大的查询：

```
 SELECT [Project3].[ID] AS [ID],
   [Project3].[C9] AS [C1],
   [Project3].[C2] AS [C2],
   [Project3].[C3] AS [C3],
   [Project3].[C4] AS [C4],
   [Project3].[C1] AS [C5],
   [Project3].[C5] AS [C6],
   [Project3].[C6] AS [C7],
   [Project3].[C7] AS [C8],
   [Project3].[C8] AS [C9]
FROM   (SELECT [Extent1].[ID]     AS [ID],
           [UnionAll1].[C1]   AS [C1],
           [UnionAll1].[ID]   AS [C2],
           [UnionAll1].[ID1]  AS [C3],
           [UnionAll1].[A_ID] AS [C4],
           [UnionAll1].[ID2]  AS [C5],
           [UnionAll1].[B_ID] AS [C6],
           [UnionAll1].[C2]   AS [C7],
           [UnionAll1].[C3]   AS [C8],
           CASE
             WHEN ([UnionAll1].[ID] IS NULL) THEN CAST(NULL AS int)
             ELSE 1
           END                AS [C9]
    FROM   [dbo].[A] AS [Extent1]
           OUTER APPLY (SELECT CASE
                                 WHEN ([Extent3].[ID] IS NULL) THEN CAST(NULL AS int)
                                 ELSE 1
                               END               AS [C1],
                               [Extent2].[ID]    AS [ID],
                               [Extent2].[ID]    AS [ID1],
                               [Extent2].[A_ID]  AS [A_ID],
                               [Extent3].[ID]    AS [ID2],
                               [Extent3].[B_ID]  AS [B_ID],
                               CAST(NULL AS int) AS [C2],
                               CAST(NULL AS int) AS [C3]
                        FROM   [dbo].[B] AS [Extent2]
                               LEFT OUTER JOIN [dbo].[C] AS [Extent3]
                                 ON [Extent2].[ID] = [Extent3].[B_ID]
                        WHERE  [Extent1].[ID] = [Extent2].[A_ID]
                        UNION ALL

                        SELECT 2                 AS [C1],
                               [Extent4].[ID]    AS [ID],
                               [Extent4].[ID]    AS [ID1],
                               [Extent4].[A_ID]  AS [A_ID],
                               CAST(NULL AS int) AS [C2],
                               CAST(NULL AS int) AS [C3],
                               [Extent5].[ID]    AS [ID2],
                               [Extent5].[B_ID]  AS [B_ID]
                        FROM   [dbo].[B] AS [Extent4]
                               INNER JOIN [dbo].[D] AS [Extent5]
                                 ON [Extent4].[ID] = [Extent5].[B_ID]
                        WHERE  [Extent1].[ID] = [Extent4].[A_ID]) AS [UnionAll1]) AS [Project3]
ORDER  BY [Project3].[ID] ASC,
      [Project3].[C9] ASC,
      [Project3].[C3] ASC,
      [Project3].[C1] ASC 
```

但实际上我自己会写的是这样的：

```
SELECT     *
FROM         D RIGHT OUTER JOIN
                  B ON D.B_ID = B.ID LEFT OUTER JOIN
                  C ON B.ID = C.B_ID RIGHT OUTER JOIN
                  A ON B.A_ID = A.ID 
```

我希望这有助于澄清我的问题。重点是：如何让实体框架生成更高效的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:10:30.780

我认为以下 LINQ 会生成您正在寻找的“大型”查询：

```
 var query =
        db.SetA
            .Join(db.SetB, a => a, b => b.A, (a, b) => new
                                                           {
                                                               A = a,
                                                               B = b
                                                           })
            .Join(db.SetC, ab => ab.B, c => c.B, (ab, c) => new
                                                                {
                                                                    A = ab.A,
                                                                    B = ab.B,
                                                                    C = c
                                                                })
            .Join(db.SetD, abc => abc.B, d => d.B, (abc, d) => new
                                                                   {
                                                                       A = abc.A,
                                                                       B = abc.B,
                                                                       C = abc.C,
                                                                       D = d
                                                                   });

    foreach (var abcd in query)
    {
        Console.WriteLine("{0}-{1}-{2}-{3}", abcd.A.ID, abcd.B.ID, abcd.C.ID, abcd.D.ID);
    } 
```

# css - IE7 'float: right' drop bug 的干净 CSS 修复

> ID：10981767
> 
> 赞同：8
> 
> 时间：2012-06-11T14:09:43.703
> 
> 标签：css, internet-explorer, internet-explorer-7, css-float

我不断发现自己在 IE7 中浮动的元素存在问题。

我已经阅读了许多与此类似的 Stack Overflow 问题，但似乎没有任何始终如一的干净 CSS 答案。

我的意思是我想看到**不改变 HTML 的**答案。例如：

*   先放浮动元素
*   在浮动元素之后添加一个 'clear: both' div。

我知道有时浮动元素不考虑其父母的高度，因此有时无法正确包含它。有时我发现自己用 zoom: 1 为元素“添加布局”，有时会修复它。其他时候，我发现自己在一个有条件的 IE7 样式表中搞砸了，这在我看来并不是最好的解决方法。

注意：我所说的“有布局”是什么意思 - [http://www.satzansatz.de/cssd/onhavelayout.html](http://www.satzansatz.de/cssd/onhavinglayout.html)

我还阅读了与使用相对和绝对定位（分别为父 div 和子 div）有关的其他答案。这会将其拉起，但通常会影响周围的 div。

如果有人可以深入解释发生这种情况的原因以及对各种修复的详细讨论，我很乐意为这个问题添加赏金，理想情况下**仅限 CSS！**

非常感谢！

编辑

我遇到的最常见的问题是当我遇到这样的事情时：

左侧边栏 - 主要 - 右侧边栏

浮动时，权利通常会下降。理想情况下，这应该是 Left - Right - Main 的格式，但我不断发现自己的样式开发人员工作（主要是 Drupal）在这种情况下，让他们改变他们的工作太麻烦了。有道理？因为我在为开发人员设计样式，所以他们也从来没有把透明块放进去（我个人认为这无论如何都是可怕和肮脏的！）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-11T16:59:46.253

## 介绍

你的标题表明希望看到解决`float: right`drop bug 的愿望，但你的文字暗示了一些更广泛的希望看到“在 IE7 中浮动元素的问题”的解决方案。该浏览器中的浮动元素（`right`或）存在许多一般问题。`left`尽管有人可能会质疑对IE7浏览器的支持是否值得更多关注，但对于某些人来说无疑会持续一段时间。因此，我将借此机会一次解决有关该浏览器中浮动的许多问题。请注意，下面的许多实验和参考资料都来自一个极好的资源：[http](http://www.brunildo.org/test/index.html) ://www.brunildo.org/test/index.html 。

## 包含元素的 CSS

对于浮动元素的包含父级，应设置以下 css：

```
.container {
    overflow: auto; /* forces clearing of the child float */
    zoom: 1; /* give it layout (this can be some other css that does likewise) */
} 
```

确保它 hasLayout 对于防止类型的边距和填充错误、一种 peek-a-boo 错误以及允许`overflow`清除很重要。对于一系列浮动，如果`padding`希望容器正常工作，可能需要更改一些 html。

关于 的一个“丢弃”问题`float: right`，您可能希望避免在容器上设置显式`height`或。`max-height`A`min-height`没问题。设置 a`height`然后设置`float`比容器高会使 IE7 无法处理以下元素。我发现没有纯 css 解决方案。

如果容器本身就是容器，则`position: absolute`定位浮动可能会出现问题，这可能需要将浮动本身设置为`position: absolute`而不是浮动。

参考：

*   为了`overflow`清除——http: [//www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)
*   边距——http: [//www.brunildo.org/test/IEFloatAndMargins.html](http://www.brunildo.org/test/IEFloatAndMargins.html)
*   Peek-a-boo -- [http://www.brunildo.org/test/iew_boo.html](http://www.brunildo.org/test/iew_boo.html)和[http://www.brunildo.org/test/iew_boo3.html](http://www.brunildo.org/test/iew_boo3.html)
*   浮点序列填充——http: [//www.brunildo.org/test/IEmfloa.html](http://www.brunildo.org/test/IEmfloa.html)
*   避免——http `height`: [//austinmatzko.com/2007/07/25/internet-explorer-7-float-bug/，http](http://austinmatzko.com/2007/07/25/internet-explorer-7-float-bug/) : [//www.brunildo.org/test/fenc7.html](http://www.brunildo.org/test/fenc7.html)（以及他类似的问题链接该页面）。
*   容器是`absolute`——[浮动太右了！](https://stackoverflow.com/questions/428862/floating-too-far-right)

## 浮动孩子的 CSS

对于浮动的子元素，`float: right`要设置的 css （除了 ）取决于两件事：

**绝对容器**

同样，如上所述，包含父级`absolute`可能需要更改处理子级的方式。

**浮动也是一个清算元素**

如果`float`它也将有一个`clear`集合，那么可能会出现许多问题，这完全取决于它`html`周围`css`的元素。没有单一的规范修复，因此请查看下面的参考资料。

参考：

*   容器是`absolute`——[浮动太右了！](https://stackoverflow.com/questions/428862/floating-too-far-right)
*   还有——http `clear`: [//www.brunildo.org/test/IEWfc.html、http](http://www.brunildo.org/test/IEWfc.html) : [//www.brunildo.org/test/IEWfc2.html、http](http://www.brunildo.org/test/IEWfc2.html) : [//www.brunildo.org/test/IEWfc3。 html](http://www.brunildo.org/test/IEWfc3.html)

## 浮动前容器子元素的 CSS

如果结构中`float: right`的元素`html`后面应该在它的左边（而不是在它上面），那么前面的元素必须是`float: left`。

## 浮动后容器子元素的 CSS

**清晰的元素**

对于设置*后*的元素，如果它有*and*，请确保它也有布局以避免加倍; 这也可以防止容器上方的额外空间，并避免其他问题。`float``clear``padding` *`background-color``padding``clear``padding``margin`*

 *参考：

*   对于`padding`-- [http://www.brunildo.org/test/IEClearPadding.html](http://www.brunildo.org/test/IEClearPadding.html)和[http://www.brunildo.org/test/IEFloatClearPadding.html](http://www.brunildo.org/test/IEFloatClearPadding.html)
*   对于`margins`-- [http://www.brunildo.org/test/Op7_margins_float.html](http://www.brunildo.org/test/Op7_margins_float.html)（查看IE7页面）

**清晰元素之前的段落**

`margin-bottom`在浮动元素和清除元素之间有一个高度比 更短的段落，可以在和等于`float`之间产生额外的间隙。除了给段落一个零底部边距（如果段落可能比浮动更高，这可能是不可接受的）之外，没有已知的纯 css 修复。`clear``float``margin`

参考：

*   以下段落——http: [//www.brunildo.org/test/IEFloatClearMargin.html](http://www.brunildo.org/test/IEFloatClearMargin.html)

## 结论

我不能保证我已经解决了右浮动对象可能出现的所有问题，但肯定涵盖了许多主要问题。至于“为什么”会发生这些事情，完全是 IE7 中的“bugginess”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:20:35.823

您是否尝试过使用 clearfix 解决方案来折叠 div？对此有一些变化，并且有一个较新的版本，但我手头没有 url，但这是标准的 clearfix css，您将其添加到正在折叠并导致浮动元素出现问题的父元素[http://www。 webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)。Chris Coyer 在[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)有一个更好的版本。

您说“我知道有时浮动元素不考虑其父元素的高度，因此有时无法正确包含它”这是真的，如果所有子元素都浮动，则父元素会崩溃。这是由于元素被从正常流程中删除，当这种情况发生时，父 div 无法计算其高度并崩溃，就好像 div 内部没有任何东西一样。

但是在没有看到页面和您遇到的问题的情况下，我只能估计问题是由于 IE6-IE7 的 haslayout 属性造成的，这真的很烦人，他们从版本 8 开始对其进行了整理，但它确实为您的构建增加了额外的开发时间。

但在大多数情况下，clearfix 解决方案是最好的，因为它不会向页面添加额外的标记，例如

```
<div style="clear: both"></div> 
```

这是旧的和过时的，应该避免。

如果您需要更多信息或者我没有回答刚刚提出的问题，我希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:47:53.573

多年来，我们一直在使用 clearfix 解决方案。

```
.cf:after { content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; }
.cf { display: inline-block; }
html[xmlns] .cf { display: block; }
* html .cf { height: 1%; } 
```

这是一个简单的 CSS 类，理想情况下，它必须应用于具有任何子浮动元素的容器。由于您完全不更改 HTML，因此您可以：

1.  `.cf`用你自己的 div 的选择器替换所有出现的[or]
2.  使用 JS 应用类（这很糟糕，因为用户会在页面完全加载前几秒钟看到一个损坏的布局）[或]
3.  使用 PHP `ob_start()`+ regex 应用类 [或]
4.  只需复古并使用表格重写所有内容（就像我们在 90 年代所做的那样）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T11:30:02.650

这很简单：

在你有的地方`float:right`，添加`*clear:left`。或者你有的地方`float:left`，添加`*clear:right`。

`*`对于 IE7-

或用于验证 `*+html .class{clear:left/right}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T17:44:42.607

我知道这已经发布一年了，但我找到了一个我喜欢的解决方案。要点是在 IE7 的 CSS 中使用“表达式”标签，仅将浮动元素移动为 DOM 中父元素的第一个元素。对于所有其他浏览器，它在语义上是正确的，但对于 IE7，我们修改 DOM 以移动浮动元素。

就我而言，我有：

```
<div>
    <h1></h1>...<p>any other content...</p>
    <small class="pull-right"></small>
</div> 
```

在我的 CSS for pull-right 中，我使用：

```
.pull-right {
    float:right;
    *zoom: ~"expression( this.runtimeStyle.zoom='1',parentNode.insertBefore( this,parentNode.firstChild ))";
} 
```

结果是 IE7 将 my 移动`<small>`为第一个元素，`<div>`但所有其他浏览器都将标记单独保留。

这可能不适用于所有人。从技术上讲，它正在修改标记，但仅在 IE7 的 DOM 中，它也是一个 javascript 解决方案。

另外，我知道表达式可能存在一些性能问题（它很慢），所以可能有很多这样的浮点数并不理想。就我而言，它运行良好，让我能够保持语义正确的 HTML。*

# sql - 如何在不通过“对象资源管理器”的情况下获得表格的设计模式？

> ID：10981775
> 
> 赞同：0
> 
> 时间：2012-06-11T14:09:57.783
> 
> 标签：sql, database, ssms, sql-server-2012-express

我正在尝试使用 SQL Server Management Studio 来编辑数据库表。但我似乎无法通过“对象资源管理器”访问数据库本身（[SQL Server Management Studio 2012 挂起](https://stackoverflow.com/questions/10970989/sql-server-management-studio-2012-hangs)）。

如何在不经过的情况下获得表格的设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:12:57.057

使用命令行：

例如，如果您的用户名是 bobby，密码是 foo，请使用：

```
C:> sqlcmd -U bobby -P foo 
```

`use whatever_your_db_name_is` 然后使用#选择**您**的数据库`use`

然后描述 [table_name]

列出所有表格： `sp_help`有效，您也可以使用
`select * from SYSOBJECTS where TYPE = 'U' order by NAME`
显然可以更改以满足您的需求的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T12:54:43.327

看起来不可能在设计模式下为表或视图从 TSQL 打开任何新选项卡，唯一的方法是通过对象资源管理器：

[https://docs.microsoft.com/en-us/sql/ssms/visual-db-tools/open-the-query-and-view-designer-visual-database-tools](https://docs.microsoft.com/en-us/sql/ssms/visual-db-tools/open-the-query-and-view-designer-visual-database-tools)

# android - Android ActionBarSherlock 如何添加三个menuItems？

> ID：10981779
> 
> 赞同：0
> 
> 时间：2012-06-11T14:10:19.277
> 
> 标签：android, actionbarsherlock

我只能添加两个 menuItems。为什么不能`t I add more? I`以常见的方式这样做：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.step_menu,  menu);
    return super.onCreateOptionsMenu(menu);
} 
```

但在我的 xml 中有四个项目。充气机只充气两个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:18:23.680

尝试添加到 your_menu.xml 中的项目：

```
<item
     ...
     android:showAsAction="always" /> 
```

如果这没有帮助发布您的 menu.xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:32:38.573

这些项目始终存在，但不可见。如果您按下菜单按钮（或没有实际菜单按钮的设备的操作栏中的更多按钮），则会显示其余按钮。这是因为 ActionBar 认为它没有足够的空间容纳所有按钮。

通过将项目显示`always`为 bondoleg 提议的项目，您可能会在较小的设备上存在项目重叠的风险。因此建议使用`never`or `ifRoom`。

# asp.net-mvc - MVC3 (Razor) Json Stringified 数据返回 null (ArgumentNullException)

> ID：10981788
> 
> 赞同：0
> 
> 时间：2012-06-11T14:10:51.560
> 
> 标签：asp.net-mvc, json, razor, stringify

我有： **查看**

```
<script type="text/javascript">
function postData() {
    var urlact = '@Url.Action("createDoc")';
    var model = '@Html.Raw(Json.Encode(Model))';

    alert(model);

    $.ajax({
        data: stringify(model),
        type: "POST",
        url: urlact,
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            window.location.href = '@Url.Action("CreateWordprocessingDocument","Movies")'
        }
    });
}
</script> 
```

**控制器**

```
[HttpPost]
        public void createDoc(string mov)
        {
            var movies = new JavaScriptSerializer().Deserialize<IEnumerable<Movie>>(mov);
            //using movies...
        } 
```

**模型**

```
//[Serializable]
public class Movie
{
    //Added Data Annotations for Title & Genre
    public int ID { get; set; }
    [Required(ErrorMessage = "Insert name")]
    public string Title { get; set; }
    [DataType(DataType.Date)]
    public DateTime ReleaseDate { get; set; }
    [Required(ErrorMessage = "Inserist genre")]
    public string Genre { get; set; }
    [DataType(DataType.Currency)]
    public decimal Price { get; set; }
} 
```

为什么当我将字符串化数据从视图（通过 Ajax 发布函数）发布到控制器（createDoc）时，它停止抛出 ArgumentNullException（似乎传递的模型为空）？任何解决方法/解决方案？

注意：没有对模型进行字符串化，一切正常，但我试图对其进行字符串化，否则我在 DateTime 格式方面遇到了一些问题。

注意/2：我也尝试将Controller 操作的输入参数中的*字符串 mov替换为**IEnumerable movies*，但它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:26:57.603

添加评论@Jaimal关于JSON.NET配置的答案。我使用以下内容：

```
public class JsonNetResult : JsonResult
    {
            public JsonNetResult()
            {
                Formatting = Formatting.None;
            }

            public Encoding ContentEncoding { get; set; }

            public string ContentType { get; set; }

            public object Data { get; set; }

            public JsonSerializerSettings SerializerSettings { get; set; }

            public Formatting Formatting { get; set; }

            public override void ExecuteResult(ControllerContext context)
            {
                if (context == null)
                    throw new ArgumentNullException("context");

                var response = context.HttpContext.Response;
                response.ContentType = !string.IsNullOrEmpty(ContentType) ? ContentType : "application/json";
                if (ContentEncoding != null)
                    response.ContentEncoding = ContentEncoding;

                if (Data == null)
                    return;
                // If you need special handling, you can call another form of SerializeObject below
                var serializedObject = JsonConvert.SerializeObject(Data, Formatting, new JavaScriptDateTimeConverter());

                response.Write(serializedObject);
            }
    } 
```

和

```
public abstract class BaseController : Controller
{

            /// <summary>
            /// Use JSON.NET
            /// </summary>
            protected override JsonResult Json(object data, string contentType, Encoding contentEncoding)
            {
                var result = new JsonNetResult
                                {
                                    Data = data,
                                    ContentType = contentType,
                                    ContentEncoding = contentEncoding,
                                                Formatting = Formatting.Indented
                                };

                return result;
            }

} 
```

和

```
public JsonResult Get()
    {
            return Json(myModel, null, null);
    } 
```

您可以使用不同的[转换器](https://stackoverflow.com/questions/7109967/using-json-net-as-default-json-serializer-in-asp-net-mvc-3-is-it-possible)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:16:36.600

您的模型已经是 JSON 编码的，因此您不需要对其进行字符串化。这可能导致无效的 Json 数据，因此它没有被解码。

如果您的 DateTime 格式是问题，请解释该问题，以便我们帮助解决它。

# sockets - Unix：Epoll，在服务器中捕获 ctrl+d 和 ctrl+c

> ID：10981790
> 
> 赞同：0
> 
> 时间：2012-06-11T14:10:52.333
> 
> 标签：sockets, unix, networking, epoll

我使用 epoll 构建服务器，这是我初始化 epoll 的代码：

```
core->fd_epoll = epoll_create(LIMIT_CLIENT);
ev.events = EPOLLIN | EPOLLPRI | EPOLLERR | EPOLLHUP;
ev.data.fd = core->socket_main;
epoll_ctl(core->fd_epoll, EPOLL_CTL_ADD, core->socket_main, &ev);
while (1)
{
  nfds = epoll_wait(core->fd_epoll, &ev, 90000, -1);
  ...
} 
```

当我用它来检查我的 fds 上是否有新东西时：

```
for (i = 0; i < nfds; i++)
{
  fd = ev[i].data.fd;
  if (fd == core->socket_main)
    {
      socket_fils = socket_accept(core->socket_main, 0);
      event.data.fd = socket_fils;
      event.events = EPOLLIN | EPOLLET | EPOLLRDHUP;
      xepoll_ctl(core->fd_epoll, EPOLL_CTL_ADD, socket_fils, &event);
      printf("Incoming => FD fils %d\n", socket_fils);
    }
  else
    printf("Event %x\n", ev[i].events);
} 
```

当我使用 netcat 向服务器发送消息时，位域事件等于 1 (EPOLLIN) 当我发送 ctrl+c 时，netcat 退出并且我的位域等于 2001 (EPOLLIN 和 EPOLLRDHUP) 当我发送 ctrl+d ，netcat 没有退出，但我的位域也等于 2001 ......

在 ctrl+d 之后，我的服务器关闭了套接字。这不正常... ctrl+d 不应该关闭套接字并返回不同的位域。

在服务器中，我怎么知道它是 ctrl+c 还是 ctrl+d ？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T16:39:56.720

`ctrl`您的服务器无法直接“看到”正在运行 netcat 的终端上的+`c`和`ctrl`+按键。`d`它们分别导致将 SIGINT 信号发送到 netcat，并导致 netcat 在其标准输入上看到 EOF 条件。netcat 对此的作用实际上取决于 netcat，而不是取决于您的服务器。以下是他们为我做的事情：

*   **`ctrl`+`c`将 SIGINT 发送到 netcat**： netcat 被杀死，因为这是 SIGINT 的默认操作，而 netcat 不会更改它。当 netcat 死掉时，套接字会自动关闭。服务器将此感知为可用的传入数据，与`EPOLLIN|EPOLLRDHUP`您看到的情况一致。如果你阅读socket，你会发现一个EOF在等着你。

*   **`ctrl`+`d`在 netcat 的标准输入上发送 EOF**：netcat 注意到了 EOF。它不会通过套接字发送更多数据。但是，如果服务器有更多数据要发送，它会继续运行并从套接字读取。

换句话说，我无法重现您看到的 netcat 行为（使用 Linux 2.6 和 netcat v1.10-38）。也许您的 netcat 版本在读取标准输入上的 EOF 后会关闭套接字以进行写入？

# objective-c - 使用哈希标签搜索打开本机 Twitter 应用程序

> ID：10981794
> 
> 赞同：3
> 
> 时间：2012-06-11T14:11:00.263
> 
> 标签：objective-c, ios, twitter, nsurl, hashtag

在 iOS 5 上，我正在尝试使用动态标签搜索词打开本机 twitter 应用程序。

我试过了：

```
- (void)openForHashTag:(NSString *)hashTag {
UIApplication *app = [UIApplication sharedApplication];

NSURL *twitterURL = [NSURL URLWithString:[NSString stringWithFormat:@"twitter://search?q=%@", hashTag]];
DLog(@"Hashtag URL: %@ ", twitterURL);

if ([app canOpenURL:twitterURL]) {
    [app openURL:twitterURL];
}
else {
    NSURL *safariURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://mobile.twitter.com/search?q=%@", hashTag]];
    [app openURL:safariURL];
} 
```

}

它似乎进入主题标签搜索页面，但永远加载......`twitter://search?q=%@`格式错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:44:17.543

```
- (void)openForHashTag:(NSString *)hashTag {
    UIApplication *app = [UIApplication sharedApplication];

    // NOTE: you must percent escape the query (# becomes %23)
    NSString *cleanQuery = [hashTag stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *twitterURL = [NSURL URLWithString:[NSString stringWithFormat:@"twitter://search?query=%@", cleanQuery]];
    if ([app canOpenURL:twitterURL]) {
        [app openURL:twitterURL];
    } else {
        NSURL *safariURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://mobile.twitter.com/search?q=%@", cleanQuery]];
        [app openURL:safariURL];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:18:26.553

打开 Twitter 应用程序和搜索主题标签的正确 URL 是

```
twitter://search?query=hashtag 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:05:47.240

好吧，经过一番摸索，我意识到哈希标签的搜索查询不应该包含实际的哈希标签......因此通过添加行

```
 NSString *cleanString = [hashTag stringByReplacingOccurrencesOfString:@"#" withString:@""]; 
```

它现在工作正常......谜团解决了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-27T12:59:23.403

## 斯威夫特 3.0+

更新上述代码的快速版本

```
 private func openTwitterHashTag() {

           // self.viewModel.programInfo.twitterHash = "#tag"

            guard let hashTagQuery = self.viewModel.programInfo.twitterHash.addingPercentEncoding(
                withAllowedCharacters: .urlHostAllowed
            ) else { return }

            // CASE: OPEN IN NATIVE TWITTER APP
            if let twitterUrl = URL(string: "twitter://search?query=\(hashTagQuery)"),
                UIApplication.shared.canOpenURL(twitterUrl) {
                UIApplication.shared.open(twitterUrl, options: [:], completionHandler: nil)
                return
            }

            // CASE: OPEN ON SAFARI VIEW CONTROLLER
            if let twitterWebUrl = URL(string: "http://mobile.twitter.com/search?q=\(hashTagQuery)") {
                let svc = SFSafariViewController.init(url: twitterWebUrl)
                self.present(svc, animated: true, completion: nil)
            }
        } 
```

还在**info.plist中添加权限**

```
<key>LSApplicationQueriesSchemes</key>
<array>
    <string>twitter</string>
</array> 
```

# android - 无法获取 Android 资源 - 连接被拒绝

> ID：10981796
> 
> 赞同：0
> 
> 时间：2012-06-11T14:11:04.660
> 
> 标签：android, git, repository

我正在尝试根据[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)获取 Android 源，但在 repo init 期间获取以下内容：

```
android.git.kernel.org[0: 149.20.4.77]:errno=Connection refused 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:55:25.163

`android.git.kernel.org`是旧的，已经下降了一段时间。获取最新的`repo`并使用`android.googlesource.com`.

# ios - viewWillAppear 上 statusBarOrientation 的值错误

> ID：10981800
> 
> 赞同：4
> 
> 时间：2012-06-11T14:11:10.923
> 
> 标签：ios, uiinterfaceorientation, viewwillappear, uistatusbar

我需要根据方向更改视图的图像背景。为此，我使用 statusBarOrientation 方法`viewWillAppear`：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    UIInterfaceOrientation currentOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    if (UIInterfaceOrientationIsPortrait(currentOrientation)) {
        NSLog(@"PORTRAIT");
    } else if (UIInterfaceOrientationIsLandscape(currentOrientation)) {
        NSLog(@"LANDSCAPE");
    }   
} 
```

问题是控制台总是显示 PORTRAIT，即使 iPad 处于横向模式。相同的代码`viewDidAppear`可以正常工作，但是为时已晚，用户可以看到图像的变化。这让我认为 statusBarOrientation 的正确状态仍然不可用`viewWillAppear`，但我已经阅读了其他一些问题，该代码应该在那里工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T14:17:32.880

尝试

```
int type = [[UIDevice currentDevice] orientation];
    if (type == 1) {
        NSLog(@"portrait default");
    }else if(type ==2){
        NSLog(@"portrait upside");
    }else if(type ==3){
        NSLog(@"Landscape right");
    }else if(type ==4){
        NSLog(@"Landscape left");
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:39:24.827

您不应该使用 statusBarOrientation 来确定应用程序的当前方向。根据苹果的文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

> 此属性的值是一个常数，指示接收器状态栏的方向。有关详细信息，请参阅 UIInterfaceOrientation。设置此属性会将状态栏旋转到指定的方向，而不会为过渡设置动画。但是，如果您的应用程序具有可旋转的窗口内容，则不应使用此方法任意设置状态栏方向。如果设备改变方向，此方法设置的状态栏方向不会改变。

尝试使用 UIViewController 的**interfaceOrientation**属性来获取当前应用程序的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T22:53:53.350

下面是一个有用的代码片段，用于记录设备的 interfaceOrientation：

```
NSArray* orientations = @[ @"nothing", @"UIInterfaceOrientationPortrait", @"UIInterfaceOrientationPortraitUpsideDown", @"UIInterfaceOrientationLandscapeLeft", @"UIInterfaceOrientationLandscapeRight”];
NSLog(@"Current orientation := %@", orientations[self.interfaceOrientation]); 
```

希望这可以帮助某人！

# iphone - Cocos2d：引用的使用 vs getChild 性能

> ID：10981801
> 
> 赞同：1
> 
> 时间：2012-06-11T14:11:15.913
> 
> 标签：iphone, ios, performance, cocos2d-iphone

我不确定哪种方法会给我带来更好的表现：

我有一个 GameScene 类，我倾向于在其中分配一个对象，然后将它们作为子类添加到带有标签的类中。在我研究的许多示例中都使用了这种方法，但我不确定当我需要频繁访问子对象时它是否是最好的（例如更新 GameScene 中的分数标签）。在这些情况下，我想知道在性能方面声明指向那些常用对象的指针并使用它来访问对象而不是通过标签获取子对象是否是一种更好的方法。

**使用 getChildByTag 或通过指针访问这些对象是否更有效？**

```
As example I provide a label that I frequently update during the game, e.g. it could be the score label:

@interface GameScene : CCLayer 
{
    CCLabelTTF *frequentlyUsedLabel;
}

//Implementation

-(id) initWithId:(int)sceneId
{
    if ((self = [super init]))
    {
        //..code
        frequentlyUsedLabel = [CCLabelTTF labelWithString:@"Hearths:" fontName:@"Arial" fontSize:20];
        [self addChild:frequentlyUsedLabel]; 
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:01:59.297

1.  编写易于维护的代码。
2.  任何值得优化的东西都值得衡量。

时间使用这两种方法渲染一帧所需的时间。问问自己是否重要。

额外的内存开销更难测量（特别是，如果您的 CCLayer 子类没有声明任何额外的 ivars ，Cocos2D*可能会使用更高效的巧妙分配器）。*我的看法是 4 个字节是*单个像素*使用的内存量。

使用 UIKit，我个人发现使用 ivars 比担心标签的唯一性要容易得多（尤其是在不同的应用程序中重用代码或在多个地方使用视图时）。ARC 尤其如此，因为您不再需要担心 getters/setters/retain/release。

# javascript - Highcharts - 显示多个轴时出现负值问题

> ID：10981802
> 
> 赞同：5
> 
> 时间：2012-06-11T14:11:16.113
> 
> 标签：javascript, highcharts

我们试图在同一张图表上显示两个系列的数据。第一个系列（即：引用数）只能包含正整数（和0）。第二个系列（即：销售价值）可以包含正浮动值和负浮动值（如果您想知道，负值是由发行信用票据产生的）。

如附图所示，我们遇到的问题是，当第二个系列包含负值时，这两个系列数据的 0 点“基线”不再共享。

![一只忙碌的猫](../Images/cfbf679b1281bfeaa2243be1312854b2.png)

我们尝试将 Y 轴的“最小”选项设置为 0，但随后我们失去了对负值的洞察力。

我们还尝试将第一个系列的最小值设置为第二个系列的最小值，但不幸的是，这并不能很好地缩放列（因为每个 Y 轴的值都在完全不同的比例上，即：10 秒与 1000 秒）。

我们如何配置图表以便共享 0 点“基线”？换句话说，我们如何使蓝色列与绿色 0 点在同一基线处开始？

**更新**

灵儿的回答是朝着正确方向迈出的一步。为两个轴设置`min`and就可以了。`tickinterval`但是，需要根据可变数据动态确定这些值，这就是我现在卡住的地方。

在生成图表之前如何确定这些`min`和值的任何提示？`tickinterval`

在此期间，我已经对此进行了一些思考。与左轴（蓝色/引号）关联的值始终为正并从零开始。因此，右轴（绿色/销售）指示在零点下方显示的刻度数。现在由于 highcharts 自动确定蓝色和绿色的最佳比例，我需要做的就是找到一种方法来设置左轴的最小值，如下所示（请原谅伪代码）：

```
var factor = right_axis.min / right_axis.tickinterval;

left_axis.min = factor * left.tickinterval; 
```

注意：我看到参考 API 在 Axis 下有一个 setExtremes() 方法，但这需要我先初始化图表，然后返回并更新其左轴。我希望在绘制图表之前做到这一点。也许我忽略了一些明显的东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:41:42.833

[**您可以使用 yaxis 上的tickInterval**](http://www.highcharts.com/ref/#yAxis--tickInterval)和[**min**](http://www.highcharts.com/ref/#yAxis--min)的组合来控制您要求的内容，如此[**jsfiddle**](http://jsfiddle.net/J5xTE/)模型中所示。

**编辑**

在读取 XML 的代码中，您必须跟踪最低值是多少，以及销售方面的最高值是多少。然后决定如果它们满足某个值，您希望如何显示这些值。之后使用 if 语句来设置值。这里有几个例子。

```
Low less than -50 and greater -90
With High less than 400
Primary Axis: min: -2, tickInterval: 1,
Secondary Axis: min: -100, tickInterval: 50 
```

[**例子**](http://jsfiddle.net/J5xTE/2/)

```
Low less than -50 and greater -90
With High greater than 400
Primary Axis: min: -1, tickInterval: 1,
Secondary Axis: min: min: -100, tickInterval: 100, 
```

[**例子**](http://jsfiddle.net/J5xTE/4/)

要弄清楚主轴上的最小值应该是多少，您只需将辅助轴上的最小值除以它的 tickInterval。那么主轴的 tickInterval 将始终为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T09:00:59.133

您还可以根据与此轴相关的最大系列值和第一个轴的刻度位置计算第二个轴刻度位置，以获得相同数量的刻度和 0 行共享。

使用`axis.update()`方法在第二个轴上使用属性更新刻度位置`tickPositions`。

带有加载事件的示例。请注意，当您动态添加点时，您必须在每次第一个轴刻度发生变化时进行这些计算并更新刻度位置：

```
 chart: {
    type: 'column',
    events: {
      load: function() {
        var chart = this,
          yAxis = this.yAxis,
          max = yAxis[1].dataMax,
          positiveTicksAmount = 0,
          negativeTicksAmount = 0,
          tickPositions = [],
          tickInterval,
          min,
          i;

        yAxis[0].tickPositions.forEach(function(tick) {
          if (tick > 0) {
            positiveTicksAmount++;
          } else if (tick < 0) {
            negativeTicksAmount++;
          }
        });

        tickInterval = max / positiveTicksAmount;

        for (i = negativeTicksAmount; i > 0; i--) {
          tickPositions.push(-tickInterval * i);
        }

        for (i = 0; i <= positiveTicksAmount; i++) {
          tickPositions.push(
            tickInterval * i
          );
        }

        yAxis[1].update({
          tickPositions: tickPositions
        });
      }
    }
  }, 
```

**Jsfiddle 示例：**
[https:](https://jsfiddle.net/wchmiel/84q0sxrt/)
[//jsfiddle.net/wchmiel/84q0sxrt/ http://jsfiddle.net/wchmiel/nuj7fagh/](http://jsfiddle.net/wchmiel/nuj7fagh/)

**Api 参考：**
[https ://api.highcharts.com/class-reference/Highcharts.Axis#update](https://api.highcharts.com/class-reference/Highcharts.Axis#update)
[https://api.highcharts.com/highcharts/yAxis.tickPositions](https://api.highcharts.com/highcharts/yAxis.tickPositions)

# r - gWidgets的ggplot2渲染问题

> ID：10981803
> 
> 赞同：2
> 
> 时间：2012-06-11T14:11:23.790
> 
> 标签：r, ggplot2, gwidgets

ggplot2 和 gWidgets 似乎有些奇怪。请参阅下面的示例和生成的图像。

有没有办法让分面标签在 gWidgets 中正确呈现？

```
library(gWidgets)
library(ggplot2)

win <- gwindow("Graphics example")
ggraphics(cont = win)

p <- ggplot(mtcars, aes(mpg, wt)) + 
    geom_point() +
    facet_grid(. ~ cyl)
p 
```

![在此处输入图像描述](../Images/5414328b3133b0333d87b6b387120cbe.png)

# postgresql - 自动化 postgresql 数据迁移，最好是一个结构任务

> ID：10981806
> 
> 赞同：1
> 
> 时间：2012-06-11T14:11:33.187
> 
> 标签：postgresql, deployment, data-migration, fabric

我的网络堆栈是 django/python + postgresql + linux + apache。我使用*fabric*来自动化从本地到服务器的部署。对于部署自动化，我希望我可以包括从本地数据库到服务器上相应数据库的数据迁移。有没有办法做到这一点？如果可能的话，我更愿意看到数据迁移成为一项*结构*任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:12:17.037

我认为您需要以某种方式将数据导出到文件/文件，复制到目标服务器，然后导入它们。在 Django（[文档](https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model)）中执行此操作的实用程序是`dumpdata`和`loaddata`。

所以在本地数据库上：

```
django-admin.py dumpdata > mydata.json 
```

然后到服务器：

```
fabric.api.put('mydata.json','/server/data/dir/')
fabric.api.run('django-admin.py loaddata mydata.json') 
```

您还应该看看[South](http://south.readthedocs.org/en/latest/index.html)，它是 Django 的数据库迁移工具。

# html - 立式扩展台

> ID：10981811
> 
> 赞同：0
> 
> 时间：2012-06-11T14:11:50.903
> 
> 标签：html, css

我是 HTML 和 CSS 的新手，我在水平扩展时遇到了问题，而我希望它垂直扩展。我已经固定了 Th 的宽度，但它没有解决任何问题。这是我的代码。

```
<div id="resBox">
    <table id="resTable">
            <tr>
                <th class="frame">a</th>
                <th class="frame">b</th>
                <th class="frame">c</th>
                <th class="frame">d</th>
                <th class="frame">e</th>
            </tr>
    </table>
</div> 
```

每当一个 th 包含一个长字符串时，它都会花费使其他帧更小。

这是CSS代码：

```
#resTable{
width:100%;
margin:auto;}

.frame{
width:19%;
border: 1px solid black;} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:16:45.780

写这个 CSS -

```
table th{
    width: 100px;
    word-wrap: break-word;
    display: inline-block;
    border: 1px solid #f00;
}​ 
```

演示：http: [//jsfiddle.net/Scec9/3/](http://jsfiddle.net/Scec9/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:33:03.150

没有明确的方法可以做到这一点，而不涉及某种形式的代码或类似的可以制作子字符串的代码，这是针对长连续字符串的。

您得到的最接近的是类似于本文中解释的内容：

[http://www.cs.tut.fi/~jkorpela/html/nobr.html](http://www.cs.tut.fi/~jkorpela/html/nobr.html)

然而，这些方法可能会有过多的错误。

# java - 即使将对象添加到容器中，您也可以更改其属性吗？

> ID：10981814
> 
> 赞同：1
> 
> 时间：2012-06-11T14:12:01.330
> 
> 标签：java, user-interface, applet, awt, java-2d

我有一个 GOval 对象，可以将其称为我在小程序中使用的圆。我将 GOval 对象添加到容器中，然后在将其添加到容器的行下方，我在其中键入了以下代码行：

```
circle.setFilled(true);
circle.setFilledColor(Color.WHITE); 
```

但我不明白为什么这有效？因为我已经在这两行之前将圆圈添加到容器中，所以当我的小程序显示时，圆圈如何填充白色？

那么这是否意味着即使将各种对象组织到不同的层中，例如将对象发送到后面或将对象带到前面，也可以在将这些相应的对象添加到容器后完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:16:17.653

容器没有添加对象的副本，而是引用原始对象，因此您可以更改原始对象并在绘制/重新绘制时在容器中看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:16:28.770

您创建了一个名为 circle 的变量。或者更准确地说，您引用了一个名为 circle 的变量。（变量指向变量的内存位置）

当您将它添加到容器时，容器现在链接到容器中该位置的内存地址（假设您有一个基本数组，数组中的位置 0 指向该内存地址）

当您更改该内存地址处的对象时（无论您是从名为 circle 的变量还是容器对象 0 更改它）...事实是，它们指向相同的内存位置 - 相同的对象！

# java - DataInputStream 不读取小文件

> ID：10981816
> 
> 赞同：1
> 
> 时间：2012-06-11T14:12:09.983
> 
> 标签：java, blackberry, datainputstream

我正在编写一个读取存储在设备上的小文件的黑莓应用程序。出于某种原因，DataInputStream 只会读取大于 3kb 的文件（经过几次测试后我的估计）。有谁知道为什么会这样？

```
try 
{
    fconn = (FileConnection)Connector.open(seedDataLocation);
    if (fconn.exists())
    {
        UiApplication.getUiApplication().getActiveScreen().add(new RichTextField("Read?: " + fconn.canRead()));
        UiApplication.getUiApplication().getActiveScreen().add(new RichTextField("Write?: " + fconn.canWrite()));
        UiApplication.getUiApplication().getActiveScreen().add(new RichTextField("Open?: " + fconn.isOpen()));

        int dataSize = (int) fconn.fileSize();
        DataInputStream dis = fconn.openDataInputStream();
        UiApplication.getUiApplication().getActiveScreen().add(new RichTextField("Data Available: " + dataSize));
        byte[] b = new byte[dataSize];
        dis.readFully(b);
        String data = new String(b);
        UiApplication.getUiApplication().getActiveScreen().add(new RichTextField("Data: " + data));

        fconn.close();
    }
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    UiApplication.getUiApplication().getActiveScreen().add(new RichTextField(e.getMessage()));
} 
```

编辑：我试着做 dis.available(); 对于不从文件中读取的小文件，它返回 0，从将要读取的较大文件中返回 0。这令人困惑，因为它应该读取文件中的字节数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:25:21.013

该`getActiveScreen().add`调用容易出错，如果您尝试从 GUI 线程外部调用它，它将失败。它为您工作的事实意味着您实际上是从 GUI 线程进行这些调用，这是一种可怕的做法，因为您还从那里打开一个文件。

将连接代码移动到另一个工作线程并根据需要使用`UiApplication.invokeLater`或`UiApplication.invokeAndWait`将与 GUI 相关的代码包装在参数 Runnables 中访问 GUI。或者使用`synchronized(application.getEventLock()`.

也就是说，您没有仅读取小文件中的数据这一事实可能是由这一行引起的：

```
dis.readFully(b); 
```

~~也许您需要刷新流。~~此调用将阻塞，直到`b.length`字节可用。在该文件可读之前检查`fconn.isReadable`.

更新：
您也可以尝试`IoUtilities.streamToBytes(dis)`，但不要将其用于大文件，否则可能会出现内存不足错误。

# .net - 使用实体框架进行模型验证

> ID：10981823
> 
> 赞同：0
> 
> 时间：2012-06-11T14:12:35.600
> 
> 标签：.net, entity-framework, validation, data-annotations, system.componentmodel

我有一个实体框架模型类，它具有创建该模型类实例的视图。我想验证该类的日期，以便用户添加满足特定条件的日期。我有一个元数据类，它使用`System.ComponentModel`和`System.ComponentModel.DataAnnotations`命名空间中的属性。

那里有任何属性可以用来执行验证，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:20:53.887

您可以使用`CustomValidationAttribute`来执行您想要的任何其他验证。如果您需要客户端验证来配合它，您将不得不更加努力！

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:13:41.393

您将需要一个 CustomValidationAttribute，因为现有属性不知道它们的“对象”（每个属性都不知道实例的其他属性）。

但我的选择是 FluentValidation，它有一个很好的流畅界面，让您可以选择在要验证的对象的属性之间进行交互。

[http://fluentvalidation.codeplex.com](http://fluentvalidation.codeplex.com)

# php - PHP MySQL 多个 id 插入和设置名称

> ID：10981826
> 
> 赞同：0
> 
> 时间：2012-06-11T14:12:42.183
> 
> 标签：php, mysql, forms, post, syntax

我的网站上有这个 POST 表单，旨在将未指定数量的用户分组。它的工作原理是在我的数据库中使用他们姓名旁边的复选框循环出所有用户。您勾选您想要的用户框，为组命名，然后提交表单。

为了完成上述操作，由于数据库的设置方式，我需要执行两个查询。该表称为 Participant/Group，它包含 3 列：idParticipant、idGroup 和 GroupName。这是我到目前为止所拥有的，但它有缺陷：

```
$aParticipants = array_map('mysql_real_escape_string', $_POST['check']);
$pIn = implode("),(", $aParticipants);
$gIn = implode("', '", $aParticipants);
$query1 = mysql_query("INSERT INTO `Participant/Group` (`idParticipant`) VALUES ($pIn);");
$query2 = mysql_query("UPDATE `Participant/Group` SET GroupName = '".$_POST['group']."' WHERE idParticipant IN ('$gIn')"); 
```

因此，第一个查询将用户的 id 插入数据库，第二个查询将组名添加到每个新插入的 id 中。如果您可以结合这两个查询，我认为它可以解决我所有的问题，但我很确定语法不允许这样做。

无论如何，上述代码的问题在于它会用任何后续的重叠查询覆盖数据库。这里要记住的重要一点是用户不限于一个组。id 为 7 的用户可以在一个名为 Group A 的组中，也可以在一个名为 Group C 的组中。需要有两个单独的行来记录这一点。使用上面的代码，它创建了单独的行，但它们都将具有上次在表单中提交的组名。

任何人都知道如何调整我的代码（如果需要，可以重新编写）来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:24:51.890

在 implode 中添加组名

```
$aParticipants = array_map('mysql_real_escape_string', $_POST['check']);
$group = mysql_real_escape_string($_POST['group']);
$pIn = implode(", {$group}),(", $aParticipants);
$query1 = mysql_query("INSERT INTO `Participant/Group` (`idParticipant`, `GroupName`) VALUES ($pIn);"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:23:46.807

它可以只使用一个查询来完成。此外，`group`还必须使用该字段进行清理`mysql_real_escape_string`以避免 SQL 注入攻击。

```
$aParticipants = array_map('mysql_real_escape_string', $_POST['check']);
$group = mysql_real_escape_string($_POST['group']);
$sqlvalues = array();
foreach ($aParticipants as $p) {
    $sqlvalues[] = "('$p', '$group')";
}
$values = implode(',', $sqlvalues);
mysql_query("INSERT INTO `Participant/Group` (`idParticipant`, GroupName)
        VALUES $values"); 
```

为了完整起见，为了性能和安全性，最好使用 MySQLi 或 PDO 来利用准备好的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:25:45.900

```
$aParticipants = array_map('mysql_real_escape_string', $_POST['check']);
$participants = array();
foreach(aParticipants as $p) {
    $participants[] = $p . ', ' . mysql_real_escape_string($_POST['group']);
}
$pIn = implode("),(", $participants);

$query1 = mysql_query("INSERT INTO `Participant/Group` (`idParticipant`, `GroupName`) VALUES ({$pIn})"); 
```

**编辑**这里的问题是`$iPn`字符串将包含`,(`在导致 SQL 错误的末尾（在仅将一个值插入一列时它没有）。

因此一条线

```
$pIn = implode("),(", $participants); 
```

必须替换为

```
$pIn = substr(implode("),(", $participants), 0, -3); 
```

现在它应该可以在没有任何 SQL 错误的情况下工作......

# javascript - Javascript：在为动态创建的对象设置 onClick 处理程序时避免使用 eval()

> ID：10981831
> 
> 赞同：0
> 
> 时间：2012-06-11T14:13:06.420
> 
> 标签：javascript, dynamic, onclick, raphael, eval

我目前正在尝试使用 RaphaelJS 矢量库开发交互式图表。我已经成功地创建了一个图表（[http://lmhbc.com/newsite/trial1.html](http://lmhbc.com/newsite/trial1.html)需要一段时间才能加载），但在这个过程中不得不重复使用 eval() 函数。

这是我使用的一个简化示例：（这里的项目和类是动态创建的，并且没有链接，即多个项目具有相同的类）

```
thisArray[item] = paper.path("M"+xStart+" "+yStart+"L"+xEnd+" "+yEnd);
eval("thisArray[item].click(function() {clickHandler("+class+");}"); 
```

这是我在实践中使用的一个非常简化的版本，因为我使用 3 层数组等。我创建了超过 15000 个这些对象，我不仅添加了单击处理程序，而且还添加了鼠标悬停和鼠标移出，这是领先的到不少 eval() 的弹出。

所以我的问题是如何避免这些评估。我相信它们是速度的主要问题之一。由于我的项目是动态命名的，因此一旦单击它们就无法检索它们的名称，因为它们没有真正的“名称”。

谢谢您的帮助，

乔什

注意： paper.path(...) 创建了一条我想要点击的矢量线

实际代码示例：

```
var crew = crewOrders[year][day][position]['crew'];
crewOrders[year][day][position]['line'] = canvas.path("M"+xStart+" "+yStart+"L"+xEnd+" "+yEnd)
                                                    .attr({stroke: 'white', 'stroke-width': 2, 'stroke-linecap': 'round'});
eval("crewOrders[year][day][position]['line'].mouseover(function() {mouseOverCrew("+crew+");document.body.style.cursor = 'hand';})"+
                                                            ".mouseout(function() {mouseOutCrew("+crew+");document.body.style.cursor = 'default';})"+
                                                            ".click(function() {selectedCrew("+crew+");})"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:15:58.457

尝试：

```
thisArray[item].click = function(class) {
  return function() { clickHandler(class); };
}(class); 
```

这允许您保留“类”的副本以供处理程序函数使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:21:56.830

Javascript 闭包会帮助你。

```
function getOnClickHandler(class) {
  return function() {
    clickHandler(class);
  }
}
thisArray[item].click(getOnClickHandler(class)); 
```

请参阅[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

# sql-server - 将 WHERE 子句中的子查询转换为 LINQ

> ID：10981838
> 
> 赞同：0
> 
> 时间：2012-06-11T14:13:39.157
> 
> 标签：sql-server, linq, select, where-clause

我在将包含 select 语句的 where 子句转换为 LINQ-to-SQL 时遇到问题。这是 SQL 片段：

```
WHERE
(p.prioid IS NULL
OR p.prioid IN (SELECT prioid FROM mc.PRIORITY WITH (NOLOCK) WHERE prioid LIKE '1%' ))
AND s.id IN(@site)
AND (LTRIM(sv.glseg) IN ('703', '704', '705'))
AND (c.crewid IS NULL
OR c.crewid IN (SELECT crewid FROM mc.CREW WITH (NOLOCK) WHERE crewid NOT LIKE '2-%'
AND (crewid LIKE '%MAINT%'
OR crewid LIKE '%ELECT%'
OR crewid LIKE '%INST%')))
AND wot.id IN (SELECT id FROM mc.WORKORDERTYPE WITH (NOLOCK) WHERE id NOT LIKE '%Standing%') 
```

具体来说，我遇到了以下问题：

```
 WHERE
(p.prioid IS NULL
OR p.prioid IN (SELECT prioid FROM mc.PRIORITY WITH (NOLOCK) WHERE prioid LIKE '1%' )) 
```

我将它翻译成以下 LINQ 语句，但我确定它是不正确的：

```
where (p.prioid = null || p.prioid == "1%") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:34:45.420

可以使用 Contains() 或 Any() 关键字处理子查询，但性能可能很差，具体取决于您的提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:27:59.567

Linq-To-SQL 中 LIKE 的等价物是 Contains、StartsWith、EndsWith。L2S 将它们转换为等效的 LIKE 语句。

在此处查看类似问题[如何在 Linq 中执行 SQL Like %？](https://stackoverflow.com/questions/835790/how-to-do-sql-like-in-linq)

**编辑：**

您可能能够获得与原始子查询完全相同的结果，使用

```
Any(pr=>pr.prioid.StartsWith("1") 
```

如果 p 是 Persons 集中的一个对象，你可以写一些东西

Persons.Any(pr=>pr.prioid.StartsWith("1"))

我不确定 L2S 是否可以翻译此内容或生成的 SQL 将如何执行。

# c# - 从 VSPackage 获取 Visual Studio 配色方案

> ID：10981840
> 
> 赞同：7
> 
> 时间：2012-06-11T14:13:48.293
> 
> 标签：c#, .net, vsix, vs-extensibility, vspackage

有人知道如何在 C# 中使用 VSPackage 以编程方式获取配色方案？

我知道我可以`IVsUIShell5.GetThemedColor`用于 VS2011，但我不知道如何从 VS2005、VS2008 或 VS2010 中获取它。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:15:54.343

有两种方法，使用 IVSShell 和 IVSShell2：

```
 private List<Color> GetColorList1()
    {
        IVsUIShell uiShell = (IVsUIShell)this.GetService(typeof(IVsUIShell));

        List<Color> result = new List<Color>();

        foreach (VSSYSCOLOR vsSysColor in Enum.GetValues(typeof(VSSYSCOLOR)))
        {
            uint win32Color;
            uiShell.GetVSSysColor(vsSysColor, out win32Color);
            Color color = ColorTranslator.FromWin32((int)win32Color);
            result.Add(color);
        }

        return result;
    }

    private List<Color> GetColorList2()
    {
        IVsUIShell2 uiShell = (IVsUIShell2)this.GetService(typeof(IVsUIShell2));

        List<Color> result = new List<Color>();

        foreach (__VSSYSCOLOREX vsSysColor in Enum.GetValues(typeof(__VSSYSCOLOREX)))
        {
            uint win32Color;
            uiShell.GetVSSysColorEx((int)vsSysColor, out win32Color);
            Color color = ColorTranslator.FromWin32((int)win32Color);
            result.Add(color);
        }

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-02T03:56:31.157

我找到了一个解决方案：

```
[Guid("0D915B59-2ED7-472A-9DE8-9161737EA1C5")]
interface SVsColorThemeService
{
} 
```

然后：

```
dynamic colorThemeService = _serviceProvider.GetService(typeof(SVsColorThemeService));
Guid id = colorThemeService.CurrentTheme.ThemeId;
// should be one of the Microsoft.VisualStudio.Shell.KnownColorThemes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:39:17.580

我意识到这实际上是一个答案。

IVsUIShell4 及以下未公开您要检索的内容

我想将这一点添加到我的知识中，Visual Studio 2005-2010 甚至没有每个说的主题。至少 Visual Studio 2012 改变了这个机制。您可以加载设置文件，但它们不是每个说的主题。

**Microsoft.VisualStudio.Shell.Interop**甚至没有必需的枚举。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T08:29:14.573

我想如果那里没有合适的 API，您总是可以直接在注册表中执行此操作。

你也可以看看这些链接：[如何：访问内置字体和配色方案](http://msdn.microsoft.com/en-us/library/bb165737%28v=vs.90%29.aspx)

# java - 如何直接在类而不是集合上调用包含

> ID：10981841
> 
> 赞同：0
> 
> 时间：2012-06-11T14:13:48.817
> 
> 标签：java, contains

我想知道如何能够`contains`直接在我的类而不是它的 ArrayList 变量上调用该方法。最好的解释方法是使用下面的代码。

谢谢你的帮助。

```
public class Chord {
    ArrayList<Note> notes;
    // some more stuff not here
}

cmaj = new Chord("Cmaj");
cnote = new Note("C");

// what I have
cmaj.getNotes().contains(cnote);

// what I would like, is this possible, how?
cmaj.contains(cnote); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T14:15:56.943

好吧，您可以自己编写方法：

```
public class Chord {
    private final List<Note> notes;

    ...

    public boolean contains(Note note) {
        return notes.contains(note);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T14:16:14.347

这是代理方法的典型示例（[参见代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)）。

```
public class Chord {
    private final List<Note> notes = new ArrayList();

    public boolean contains(Note note) {
      return notes.contains(note);
    }

} 
```

当您使用这种类型的方法时，您应该在将对象交付给客户端之前仔细检查是否设置了引用。如果你不注意你会得到 NullPointerException。并尽量保持一致，如果您决定以这种方式使用包含`add`，`remove`并且`reset`也应该实施。然后不再需要吸气剂。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T14:16:17.667

在 chord 中编写一个 contains() 方法，该方法简单地将调用委托给 arraylist，如下所示：

```
public class Chord {
    ArrayList<Note> notes;

    public boolean contains(Object o) {
       return notes.contains(o);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-11T14:18:21.797

添加一个`contains`封装 arrayList 的方法包含：

```
public class Chord {
    ArrayList<Note> notes;
    // some more stuff not here

    public boolean contains(Note note){
        return notes.contains(note);
    }
} 
```

# yii - Yii框架，如何为后端定义一个url

> ID：10981842
> 
> 赞同：2
> 
> 时间：2012-06-11T14:13:56.437
> 
> 标签：yii, url-routing

我正在使用 yii 框架开发一个 CMS。有前端和后端。我希望用户能够像这样访问后端：[http](http://www.mysite.com/admin) ://www.mysite.com/admin ，现在它的工作方式是这样的：[http](http://www.mysite.com/admin.php) ://www.mysite.com/admin.php 。

对于后端，我已经定义了不同的部分，它有自己的配置、控制器和......以及用于访问 admin.php 中的后端的页面

这是我的目录结构：

```
...
admin
     --components
     --config
         ---main.php
     --controllers
         ---NewsController.php
         ---ShowCOntroller.php
         ---SiteController.php
     --models
         ---LoginForm.php
         ---News.php
         ---Show.php
         ---User.php
     --runtime
     ...
     --Views
        ---layouts
        ---news
        ---show
        ---site

protected

    -commands
    -data
    -extentions
    -messages
    -migrations
    -models
    -modules
       --image
    -runtime
    -views

themes
uploads
admin.php
index.php
.htaccess 
```

这是我的 .htaccess 文件：

```
Options +FollowSymLinks
IndexIgnore */*
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteRule admin admin\.php [T=application/x-httpd-php]

 # if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

 # otherwise forward it to index.php
RewriteRule . index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:36:12.633

你可以看看我是如何在 @bool.dev [Yii 的帮助下解决的： .htaccess 和 urlManager 用于单独的后端和前端](https://stackoverflow.com/questions/10649266/yii-htaccess-and-urlmanager-for-separate-backend-and-frontend)。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:32:18.993

您可以考虑的一件事是将后端创建为前端内的[Yii 模块。](http://www.yiiframework.com/doc/guide/1.1/en/basics.module)模块就像应用程序中的应用程序。您将创建模型、控制器和视图，可能会重用前端的代码。访问模块的 URL 将包含模块名称；例如[http://www.example.com/admin/controller/action](http://www.example.com/admin/controller/action)。

另一方面，如果您只想将发出的请求映射`/admin`到脚本`admin.php`，您可以在 mod_rewrite 中进行。例如：

```
# .htaccess
RewriteEngine On

RewriteRule ^admin admin.php     # route requests for /admin to admin.php

# Rest of Yii's rewrite rules:
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:08:20.847

我还建议采用模块方式。

然后，您可以使用 URL 管理器为管理员管理您的 URL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T08:05:09.850

您确实需要通过 index.php 引导所有请求。

使用 URL 管理器路由管理员请求。看看这里，[http://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T10:45:01.823

我建议你使用 Yii 模块基本概念。因此，管理页面将成为您应用程序中的一个模块。

请看这个链接[http://www.yiiframework.com/doc/guide/1.1/en/basics.module](http://www.yiiframework.com/doc/guide/1.1/en/basics.module)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T10:48:01.743

使用最好的 yii Url Manager，如果后端的所有配置和控制器都不同，那么您可以构建一个名为 AdminController 的控制器。

# mysql - 如何基于多列对 CASE 求和

> ID：10981846
> 
> 赞同：0
> 
> 时间：2012-06-11T14:14:15.053
> 
> 标签：mysql, sum, case

我已经花了很长时间试图为我得到的这个 SUM 查询找到一个解决方案：

```
SELECT o.id, o.ordernr, o.datetime, o.status, CONVERT(ROUND(o.shipping,2), CHAR(8)) AS shippingcosts, 
u.id AS uid, u.name, u.surname, u.address, u.number, u.zipcode, u.country, u.email, 
GROUP_CONCAT(CONVERT(op.amount, CHAR(8))) AS amount,         
GROUP_CONCAT(CONVERT(ROUND(op.pprice,2), CHAR(8))) AS pprice, 

IF(     
        u.country!= 'NL', 
        ROUND(SUM(
            CASE
                WHEN op.discount > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discount/100)))
                WHEN op.discountf > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discountf/100)))
                WHEN op.discountf = 0 && op.discount = 0 THEN (op.amount * op.pprice)
            END
        ) + o.shipping,2),
        ROUND((SUM(
            CASE
                WHEN op.discount > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discount/100)))
                WHEN op.discountf > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discountf/100)))
                WHEN op.discountf = 0 && op.discount = 0 THEN ((op.amount * op.pprice)*1.19)
            END
        )*1.19) + o.shipping,2)
) AS total, 

GROUP_CONCAT(CONVERT(p.id, CHAR(8))) AS pid, 
SUM(p.weight) AS weight, 
FROM orders AS o
INNER JOIN users AS u ON o.uid = u.id 
INNER JOIN order_products AS op ON op.oid = o.id
INNER JOIN products AS p ON op.pid = p.id
GROUP BY o.id 
```

我想要实现的是，如果 op.discount 不为空或 op.discountf 不为空，并且对于 op.discount 和 op.discountf 都为空的每一行，则获取每一行的总和......

在这一点上，mysql似乎正在对所有总数求和..??

有人可以帮我一把吗？？

Thnx提前（很多）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:46:51.947

只是我在这里注意到的一些事情......

--您正在将所有整数或浮点数据类型转换为字符？你希望 MySQL 如何对字符求和？

```
SELECT o.id, o.ordernr, o.datetime, o.status, CONVERT(ROUND(o.shipping,2), CHAR(8)) AS shippingcosts, 
u.id AS uid, u.name, u.surname, u.address, u.number, u.zipcode, u.country, u.email, 
GROUP_CONCAT(CONVERT(op.amount, CHAR(8))) AS amount,         
GROUP_CONCAT(CONVERT(ROUND(op.pprice,2), CHAR(8))) AS pprice, 
```

-- 从未见过 group_concat 中的 CONVERT 函数，这是参考手册显示的代码 GROUP_CONCAT([DISTINCT] expr [,expr ...] [ORDER BY {unsigned_integer | col_name | expr} [ASC | DESC] [,col_name ...]] [SEPARATOR str_val]) -- 另外，如果你继续四舍五入，你不会得到正确的结果，只是把它扔在那里不确定你是否关心。我认为有太多的聚合正在进行，并且这可能会令人困惑。

```
IF(     
    u.country!= 'NL', 
```

——你不是已经在你的选择中四舍五入了吗？你需要在这里再圆吗？-- 每行是否也可能有折扣和折扣？如果它们两者都有，它们将适合您的前两个 CASE 结构，两次... - 看起来您还想要基于重量的运输成本，

```
 ROUND(SUM(
        CASE
            WHEN op.discount > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discount/100)))
            WHEN op.discountf > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discountf/100)))
            WHEN op.discountf = 0 && op.discount = 0 THEN (op.amount * op.pprice)
        END) + o.shipping,2), 
```

-- 为什么你两次运行相同的 CASE 结构？一个要加*1.19？

```
 ROUND((SUM(
        CASE
            WHEN op.discount > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discount/100)))
            WHEN op.discountf > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discountf/100)))
            WHEN op.discountf = 0 && op.discount = 0 THEN ((op.amount * op.pprice)*1.19)
        END)*1.19) + o.shipping,2)
) AS total, 

GROUP_CONCAT(CONVERT(p.id, CHAR(8))) AS pid, 
SUM(p.weight) AS weight, 
FROM orders AS o
INNER JOIN users AS u ON o.uid = u.id 
INNER JOIN order_products AS op ON op.oid = o.id
INNER JOIN products AS p ON op.pid = p.id
GROUP BY o.id 
```

我个人会尝试做这样的事情（可能只是调整内部连接不起作用）：

```
SELECT * FROM products as p
(SELECT o.id, o.ordernr, o.datetime, o.status, CONVERT(ROUND(o.shipping, 2), CHAR(8)) AS     ShippingCosts,
u.id AS U_ID, u.name, u.surname, u.address, u.number, u.zipcode, u.coutnry, u.email, 
op.amount as Amount, op.pprice as Price, 
SUM((op.amount * op.pprice)-(op.discount/100)) as SubTotal, 
SUM((op.amount * op.pprice)-(op.discountf/100)) as SubTotal2,
SUM(p.weight * o.shipping) as Shipping_Charges,
SUM(SubTotal + SubTotal2 + Shipping_Charges)) as o
inner join users AS u ON o.U_ID = u.id
WHERE u.country != 'NL'; 
```

-- 抱歉，我意识到现在有 3 个内部连接。我会将所有这些总和汇总到另一个表中，上面写着

SELECT Order Number Order ID Order Date from Orders as O inner join Order Products as OP ON Order ID = 订单产品 ID 或订单 ID 中的任意一个，总和（小计），按订单 ID 分组；

创建一个表来保存这些字段，然后只对与订单号或订单 ID 对应的 user_ID 进行内部连接，应该在某处有一个外键以使连接更容易

SELECT Order Id, Order Number, Order DATE, Order Shipping, Order Product, Order Amount, SUM(Order SubTotal) FROM Orders_Total internal join users as U on o.U_ID = u.id

我没有考虑到听起来像是客户端可以做的一些前端事情的舍入或组转换，但计算很简单，但我真的很喜欢你的查询，我只是想为你分解它，对不起，这里有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:02:19.483

您说，“我想要实现的是，如果 op.discount 不为 null 或 op.discountf 不为 null 并且对于 op.discount 和 op.discountf 都为 null 的每一行，则获取每一行的总和。 ..” 如果是这种情况，我建议在您的 case 语句的 WHEN 条件中添加条件，专门测试 NULL 值，而不是将 op.discount 和 op.discountf 视为它们持有的值在与0\. 又名，“NULL < 0”的计算结果为 NULL，而不是零……我不确定这将如何影响您的案例陈述？可以在[此处](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)找到有关在控制语句中使用 NULL 值的详细信息。

当我第一次看到这个查询时，我想我可能会反对它的存在……但在我仔细观察之后，我实际上并没有被冒犯。这没什么好说的，因为我喜欢写这样的查询。可能有一种更清洁的方式来做你正在做的事情，但我不明白为什么你的方式不应该工作。我确实在这一行的末尾看到了一个逗号：

```
SUM(p.weight) AS weight, 
```

...我认为你不想在那里？我重新格式化了查询......不是更好，只是有点不同。帮助我更清楚地看到你在做什么。可能对其他人有帮助，所以我将其包括在下面。其他人可能不喜欢这种格式，所以我没有把它作为对问题的编辑来介绍。现在发布这个答案是因为我到目前为止所做/注意到的事情可能会帮助其他人。如果/当我看到其他任何内容时，将进行编辑以改进我的“答案”。

```
SELECT
    o.id,
    o.ordernr,
    o.datetime,
    o.status,
    CONVERT(ROUND(o.shipping,2), CHAR(8)) AS shippingcosts, 
    u.id AS uid,
    u.name,
    u.surname,
    u.address,
    u.number,
    u.zipcode,
    u.country,
    u.email, 
    GROUP_CONCAT(CONVERT(op.amount, CHAR(8))) AS amount,         
    GROUP_CONCAT(CONVERT(ROUND(op.pprice, 2), CHAR(8))) AS pprice, 
    IF(     
        u.country != 'NL', 
        ROUND(SUM(
            CASE
                WHEN op.discount > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discount / 100)))
                WHEN op.discountf > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discountf / 100)))
                WHEN op.discountf = 0 && op.discount = 0 THEN (op.amount * op.pprice)
            END
        ) + o.shipping, 2),
        ROUND((SUM(
            CASE
                WHEN op.discount > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discount / 100)))
                WHEN op.discountf > 0 THEN ((op.amount * op.pprice) - ((op.amount * op.pprice) * (op.discountf / 100)))
                WHEN op.discountf = 0 && op.discount = 0 THEN ((op.amount * op.pprice) * 1.19)
            END
        ) * 1.19) + o.shipping, 2)
    ) AS total, 
    GROUP_CONCAT(CONVERT(p.id, CHAR(8))) AS pid, 
    SUM(p.weight) AS weight,
FROM
    orders o INNER JOIN users u
        ON o.uid = u.id 
    INNER JOIN order_products op
        ON o.id = op.oid
    INNER JOIN products p
        ON op.pid = p.id
GROUP BY o.id 
```

# geometry - 从点找到最远的点

> ID：10981850
> 
> 赞同：1
> 
> 时间：2012-06-11T14:14:32.900
> 
> 标签：geometry

我正在尝试找到从 2D 空间中的指定点获取圆的最远点的最佳方法。到目前为止，我发现的是如何获得点与圆位置之间的距离，但我不完全确定如何扩展它以找到圆的最远点。

已知的变量是：

*   点a
*   b点（圆位置）
*   半径 r（圆半径）

为了找到点和圆位置之间的距离，我发现了这个：

> xd = x2 - x1
> 
> yd = y2 - y1
> 
> 距离 = 平方根（xd * xd + yd * yd）

在我看来，这是解决方案的一部分。这将如何扩展以获得下图中点 x 的位置？

![此处以图形方式解释了该问题。 期望的结果是点 x 的位置。](../Images/e0c0eb2cc4ff039024c234ff25026be7.png) 作为问题的附加但可选的部分：我在某些地方读到，可以在不使用平方根的情况下获得距离部分，这是非常性能密集型的，如果需要快速代码，应该避免使用。就我而言，我会经常进行这种计算；也欢迎在主要问题的背景下对此发表任何评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:22:45.787

那这个呢？

1.  计算 AB。
    我们现在有一个从圆心指向 A 的向量（如果 B 是原点，跳过这个，只考虑点 A 一个向量）。
2.  标准化。现在我们有一个*明确定义*的长度（长度为 1）
3.  如果圆*不是*单位半径，则乘以半径。如果是单位半径，则跳过此。现在我们有了*正确的*长度。
4.  Invert sign (can be done in one step with 3., just multiply with the negative radius)
    Now our vector points in the correct direction.
5.  Add B (if B is the origin, skip this).
    Now our vector is offset correctly so its endpoint is the point we want.

(Alternatively, you could calculate B-A to save the negation, but then you have to do one more operation to offset the origin correctly.)

By the way, it works the same in 3D, except the circle would be a sphere, and the vectors would have 3 components (or 4, if you use homogenous coords, in this case remember -- for correctness -- setting *w* to 0 when "turning points into vectors" and to 1 at the end when making a point from the vector).

**编辑：（**
作为伪代码的回复）
假设你有一个 vec2 类，它是一个由两个浮点数组成的结构，带有用于向量减法和标量乘法的运算符（非常简单，大约十几行代码）和一个`normalize`不需要的函数与乘以的简写相比`inv_sqrt(x*x+y*y)`，伪代码（我的伪代码类似于 C++/GLSL 混合）可能看起来像这样：

```
vec2 most_distant_on_circle(vec2 const& B, float r, vec2 const& A)
{
    vec2 P(A - B);
    normalize(P);
    return -r * P + B;
} 
```

您将使用的大多数数学库都应该内置所有这些函数和类型。HLSL 和 GLSL 将它们作为第一类原语和内在函数。一些 GPU 甚至有专门的规范化指令。

# java - 在 DialogFragment 中使用 FragmentManager 和 FragmentTransaction

> ID：10981852
> 
> 赞同：6
> 
> 时间：2012-06-11T14:14:36.430
> 
> 标签：java, android, fragment, android-dialogfragment, android-fragmentactivity

问题的要点是：我正在尝试从 FragmentActivity 启动 DialogFragment。这个 DialogFragment 的视图包含一个 FrameLayout，我想用 Fragment 填充它。基本上，FragmentActivity 启动 DialogFragment，然后 DialogFragment 用 Fragment 填充它的 FrameLayout。我已经在互联网上搜索了教程，并且拼凑了一些（在我看来）应该有用的东西。但是，无论我尝试什么，我都会不断出错。这是我到目前为止所拥有的：

这是我的 FragmentActivity 的布局（文件名为“activity_interact”）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="@style/activity" >
<Button
        android:id="@+id/btnLaunchDialog"
        style="@style/btn" /> 
```

这是我的 DialogFragment 的布局（文件名为“dialog_overview”）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="@style/dialog" >
<FrameLayout
    android:id="@+id/frameDisplay"
    style="@style/frame" /> 
```

这是我的 Fragment 的布局（文件名为“fragment_stats”）：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="@style/table" >
<TableRow style="@style/table" >
    <TextView
        style="@style/display"
        android:gravity="right"
        android:text="@string/textStr" />
</TableRow> 
```

这是我的 FragmentActivity 的 java 代码：

```
public class ActivityInteract extends FragmentActivity implements
    OnClickListener {

Button btnLaunchDialog;

@Override
protected void onCreate(Bundle b) {
    super.onCreate(b);
    setContentView(R.layout.activity_interact);
    btnLaunchDialog = (Button) findViewById(R.id.btnLaunchDialog);
    btnLaunchDialog.setOnClickListener(this);
}

public void onClick(View v) {
    switch (v.getId()) {
        case R.id.btnLaunchDialog:
            FragmentManager fm = getSupportFragmentManager();
            DialogOverview dialogOverview = new DialogOverview();
            dialogOverview.show(fm, "dialog_overview");
            break;
    }
} 
```

}

这是我的 DialogFragment 的代码：

```
public class DialogOverview extends DialogFragment implements OnClickListener {

public DialogOverview() {

}
@Override
public View onCreateView(LayoutInflater li, ViewGroup vg, Bundle b) {
    View view = li.inflate(R.layout.dialog_overview, vg);
    FragmentManager fm = getFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ft.add(R.id.frameDisplay, new FragmentStats());
    ft.commit();
    return view;
} 
```

}

这是我的片段的代码：

```
public class FragmentStats extends Fragment {

@Override
public View onCreateView(LayoutInflater li, ViewGroup vg, Bundle b) {
    View view = li.inflate(R.layout.fragment_stats, vg);
    return view;
} 
```

}

最后，这是 logcat 错误：

```
06-11 10:07:29.382: E/AndroidRuntime(30013): java.lang.IllegalArgumentException: No view found for id 0x7f060003 for fragment FragmentStats{4169c928 #1 id=0x7f060003} 
```

我可以看到它说我对 Fragment 没有看法，但我有……（或者我有吗？）我在这里迷路了，任何帮助将不胜感激。另外，我是否以正确的方式进行此操作？重用 FragmentManager 会更有效吗？（即将它从 FragmentActivity 传递到 DialogFragment 中）

更新：我删除了将我的 Fragment 加载到 DialogFragment 的代码，DialogFragment 现在显示没有问题。所以很明显（正如 logcat 错误所暗示的那样）我的 Fragment 本身有问题......但是，它与我在互联网上看到的示例相匹配。这让我想知道：以这种方式嵌套片段是否存在问题？显示 Fragment 的 DialogFragment 的 FragmentActivity 让我想打趣说“我们不能再深入了”，但我不知道。我可以嵌套更多的片段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-01T15:59:31.940

实际上，您可以将嵌套添加`fragment`到 a`DialogFragment`中，但它不能基于包装的 Dialog。

而不是覆盖`onCreateDialog`，膨胀包含将使用片段的 ViewGroup 的视图`onCreateView`。

这样做的结果是您不能使用包装 AlertDialog 的 DialogFragment - 因此，如果您想要正面和负面按钮，您需要在内容视图中手动创建它们。

另外，请记住，您不能在 XML 中设置片段。您需要在 XML 中声明容器视图并以编程方式执行片段事务。

公共类 MyDialogFragment 扩展 DialogFragment { [...]

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    final View view = inflater.inflate(R.layout.dialog_layout, container);

    if (savedInstanceState == null) {
        final ChildFragment fragment = [...];
        getChildFragmentManager()
                .beginTransaction()
                .replace(R.id.fragment_container, fragment)
                .commit();
    }

    return view;
    }
} 
```

# oracle - 使用执行立即参数和可选参数在 PL/SQL 中创建对象实例

> ID：10981861
> 
> 赞同：1
> 
> 时间：2012-06-11T14:15:07.537
> 
> 标签：oracle, plsql, execute-immediate

我有一个这样定义的对象：

```
create or replace type MYOBJ as object (
    field1 varchar2(100);
    field2 varchar2(100);
    field3 varchar2(100);
); 
```

和这样的函数（我知道我可以使用构造函数，无论如何）：

```
create or replace function new_myobj ( field1 varchar2 default null
                                     , field2 varchar2 default null
                                     , field3 varchar2 default null) 
                                       return myobj is
v_obj MYOBJ;
begin
    v_obj := myobj(field1, field2, field3);
    return v_obj;
end new_obj; 
```

我正在尝试像这样创建该对象类型的实例

```
declare
   v_plsql_block varchar2(200);
   v_my_obj MYOBJ;
   v_field varchar2(200);
   v_some_value varchar2(200) := 3;
begin 
    v_field := 'field1'
    v_plsql_block := 'begin :a := new_myobj('||v_field||' => :b); end;';
    execute immediate v_plsql_block using in v_some_value, out v_my_obj;
end; 
```

但我收到一个错误： `PLS-00306: wrong number or types of arguments in call to 'NEW_MYOBJ'`

甚至有可能做我想做的事吗？

实际代码中的 FTR v_field 应该是动态定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:38:11.397

只需替换 using 子句中参数的顺序即可：

```
execute immediate v_plsql_block using out v_my_obj, in v_some_value; 
```

# java - 使用 URLEncoder.encode() 对将通过 REST 发送的文本进行编码

> ID：10981863
> 
> 赞同：1
> 
> 时间：2012-06-11T14:15:10.493
> 
> 标签：java, iphone, character-encoding

我正在通过 SMS 网关向我的手机发送短信。我使用 REST 发送它们，所以我只是构建我的请求并使用 HttpClient 发送它。

```
String encodedUrl = host + URLEncoder.encode(text,"utf-8"). 
```

在这里，文本对应于我通过网关发送的文本。

一切正常，短信接收正常。我的 iPhone 显示回车和正确的格式。但是，其他手机（如 Blackberry 或 Windows phone）显示文本消息时没有任何回车或格式化。

# javascript - 运行前判断数据是否为新数据（用JSON比较数组）

> ID：10981864
> 
> 赞同：0
> 
> 时间：2012-06-11T14:15:11.467
> 
> 标签：javascript, jquery, arrays, compare

好吧，我有一个有趣的问题。我的页面每隔一段时间就会发出一个 JSON 请求。如果数据没有改变，它不需要做任何事情。问题是，我无法找到一种方法来证明它是否已经改变。

我尝试过这样的事情无济于事：

var站=空；

```
function parseDynamicData(ard) {
    //this was something that gave me problems for days
    //nice little hack to fix it
    if (ard['details']['enabled'] == 'true' && ard['song']['art'] != 'undefined');
    {
        //turns off the 'server offline' page
        if (document.location.toString().indexOf('#offline') != -1)
            document.location = '/#tracks';
        //update UI
        $('#track-title').html(htmlDecode(ard['song']['title']));
        $('#track-artist').html(htmlDecode(ard['song']['artist']));
        $('#track-album').html(htmlDecode(ard['song']['album']));
        $('#track-art').attr('src', htmlDecode(ard['song']['art']));
        //set if it's play or pause visible
        if (htmlDecode(ard['details']['playing']) == 'true') {
            $('#control-pauseplay').html('Pause');
            $('#control-pauseplay').attr('href', '/track?proc=2');
        } else {
            $('#control-pauseplay').html('Play');
            $('#control-pauseplay').attr('href', '/track?proc=3');
        }
        //Now update all of the stations
        if (stations == null || stations != ard['stations']) {
            $.each(ard['stations'], function (key, value) {
                alert(key);
            });
            stations = ard['stations'];
        }
    }
} 
```

这是正常的 JSON 响应的样子：

```
{
    "song": {
        "art": "http://cont-sjl-1.pandora.com/images/public/amz/6/2/3/3/886978533326_500W_500H.jpg",
        "title": "Hold It Against Me",
        "artist": "Britney Spears",
        "album": "Femme Fatale Deluxe"
    },
    "details": {
        "playing": "true",
        "enabled": "true"
    },
    "stations": {
        "undefined": "False",
        "Alex Clare Radio": "False",
        "Rap Strength Training Radio": "False",
        "Drops Of Jupiter Radio": "False",
        "Tween Radio": "False",
        "Today's Hits Radio": "True"
    }
} 
```

然而，无论我做什么，它仍然会通过 JSON 为每个键发出警报。有人知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:30:46.287

您可以尝试使用 JSON.Stringify 吗？显然，您从 JSON 请求返回的是 JSON，并且我假设您已将最后一个请求转换为实际的 Object。所以只需调用：

```
JSON.Stringify(Object) === JSONresult 
```

并比较两个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:39:30.390

我怀疑`stations`和`ard['stations']`是结构相同的不同对象。如果您`ard`在每次 JSON 请求后进行重建，同时`stations`保留*前一个* `ard`的数组，那么这两个对象*不是同一个对象*，因此无论对象是否具有相同的键值对，精确匹配都会失败。

我要做的是保留最后一条 JSON 消息的*精确字符串副本*，并在解析之前将其与当前 JSON 字符串消息进行比较。否则，您需要将当前对象的每一个键值对与预期的新对象进行比较——如果其中一些值本身就是对象，事情可能会变得有点（不必要的）麻烦。

如果您可以确定服务器将始终以相同的方式对给定对象*O*进行字符串化（并且假设您无需担心检查*客户端上*的对象是否已发生变异），那么您可以简单地比较 JSON 字符串版本来自服务器的对象。

# javascript - 在黑莓上更改 CSS

> ID：10981867
> 
> 赞同：0
> 
> 时间：2012-06-11T14:15:16.873
> 
> 标签：javascript, css, dom, blackberry

我有以下受 twitter bootstrap 启发的代码。它在除 Blackberry Curve 8200 之外的所有设备上都能完美运行。

基本上是打开和关闭导航。

事件正在触发，状态正在正确获取，但是当我调整 css 时没有任何反应:( 我尝试添加和删除类，同样的问题。

如果我也手动向折叠的元素添加样式属性，折叠的元素会正确显示。

```
$('[data-toggle="collapse"]').bind('click', collapse);

function collapse (e) {
    var $this = $(this);
    var target = $this.data('target');
    var state = $this.data('state');
    if ( ! state ) state = 'closed'; 

    if ( state === 'closed' ) {
        $(target).css('height', 'auto');
        $this.data('state', 'open');
    } else {
        $(target).css('height', '0');
        $this.data('state', 'closed');
    }
    return false;
} 
```

基本上看起来像以下行

```
$(target).css('height', 'auto'); 
```

只是没有做任何事情。即使目标变量是正确的。

我的 html 基本上看起来像这样

```
<style>
    .nav { height: 0; }
</style>
<div data-toggle="collapse" data-target=".nav">...</div>
<div class="nav">...</div> 
```

-更新-

我正在使用 zepto，刚刚尝试使用 jQuery ......同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:28:54.817

这是OS5还是OS6？如果是 OS5，支持 DOM 重新渲染的浏览器存在各种缺陷。`height: auto`作为其中之一。我使用的解决方案是在页面加载时显示它们，测量然后通过`data-*`属性缓存它们的原始高度，然后将它们全部折叠。这样，当需要展示它们时，`auto`我可以给出精确的像素尺寸，而不是。

# php - Retrieving and storing data from pls file in PHP

> ID：10981869
> 
> 赞同：0
> 
> 时间：2012-06-11T14:15:24.393
> 
> 标签：php, regex, stream, store

I need to create a series of regular expressions to get data out of a pls file in PHP (a language I've only just started learning).

The file will output data similar to this:

```
[playlist]
numberofentries=1
File1=http://203.150.225.71:8000
Title1=(#1 - 3687/5000) Example Radio Station 
Length1=-1
Version=2 
```

I need to retrieve and store the location of the stream with the port number included as well as the title.

I need advice on the best way to do this.

Any help will be appreciated. Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:18:57.000

You can use PHPs buit in function [`parse_ini_file`](http://php.net/manual/en/function.parse-ini-file.php) to parse the ini formatted file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:18:47.410

Looks like an INI file to me. Maybe Zend_Config_Ini would be a useful way to parse it..

[http://framework.zend.com/manual/en/zend.config.adapters.ini.html](http://framework.zend.com/manual/en/zend.config.adapters.ini.html)

# magento - Magento：如何检查是否使用了单页或多页结帐？

> ID：10981871
> 
> 赞同：0
> 
> 时间：2012-06-11T14:15:25.763
> 
> 标签：magento, checkout

我有一个附加到 completeOrder 事件的触发器，所以通过 $observer 对象我可以获取报价和当前订单。

问题是 - 我如何才能 100% 准确地检查用户是使用单页结帐还是多页结帐？

如果他使用多页，则将创建 2 个或更多订单，并且我的触发器将运行几次。

检查东西的一种方法是检查报价对象的地址总数

```
 $quote->getAllAddresses(); 
```

因此，如果它有超过 2 个地址（不仅仅是 1 个帐单和 1 个运输），那么它是多页的，否则是一页的。问题是如果通过多页结账流程，其中一个订单是虚拟的，而另一个是常规的。虚拟订单没有地址，所以我的条件在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:27:38.890

如果您可以获取当前订单，则获取订单报价对象。
然后你可以使用`$quote->getIsMultiShipping()`

# c# - SqlParameter 已被另一个 SqlParameterCollection 包含 - command.Parameters.Clear() 不起作用

> ID：10981872
> 
> 赞同：1
> 
> 时间：2012-06-11T14:15:27.940
> 
> 标签：c#, .net, sql-server, exception, ado.net

我在这里越来越绝望。我无法弄清楚为什么会发生此异常。我搜索并阅读了这个问题，似乎每个人都设法用 command.Parameters.Clear() 解决了这个问题，但这对我不起作用。这是我的代码：

```
 public class ProductsDataAccess : Connection 
{
    public static SqlParameter[] createParams(Products prod)
    {
        SqlParameter idParam = new SqlParameter("@id", prod.prodID);
        idParam.SqlDbType = System.Data.SqlDbType.VarChar;
        idParam.Size = 45;
        idParam.IsNullable = false;
        idParam.Direction = ParameterDirection.Input;

        SqlParameter nameParam = new SqlParameter("@name", prod.prodName);
        nameParam.SqlDbType = System.Data.SqlDbType.VarChar;
        nameParam.Size = 45;
        nameParam.IsNullable = false;
        nameParam.Direction = ParameterDirection.Input;

        SqlParameter demandParam = new SqlParameter("@demand", prod.demand);
        demandParam.SqlDbType = System.Data.SqlDbType.Int;
        demandParam.IsNullable = false;
        demandParam.Direction = ParameterDirection.Input;

        SqlParameter demandLTParam = new SqlParameter("@demandLT", prod.demandLT);
        demandLTParam.SqlDbType = System.Data.SqlDbType.Int;
        demandLTParam.IsNullable = false;
        demandLTParam.Direction = ParameterDirection.Input;

        SqlParameter leadTimeParam = new SqlParameter("@leadTime", prod.leadTime);
        leadTimeParam.SqlDbType = System.Data.SqlDbType.Int;
        leadTimeParam.IsNullable = false;
        leadTimeParam.Direction = ParameterDirection.Input;

        SqlParameter fixedCoastParam = new SqlParameter("@k", prod.k);
        fixedCoastParam.SqlDbType = System.Data.SqlDbType.Float;
        fixedCoastParam.IsNullable = false;
        fixedCoastParam.Direction = ParameterDirection.Input;

        SqlParameter cParam = new SqlParameter("@c", prod.c);
        cParam.SqlDbType = System.Data.SqlDbType.Float;
        cParam.IsNullable = false;
        cParam.Direction = ParameterDirection.Input;

        SqlParameter chPrecentageParam = new SqlParameter("@chPrecent", prod.precentOfC);
        chPrecentageParam.SqlDbType = System.Data.SqlDbType.Int;
        chPrecentageParam.IsNullable = false;
        chPrecentageParam.Direction = ParameterDirection.Input;

        SqlParameter chParam = new SqlParameter("@ch", prod.ch);
        chParam.SqlDbType = System.Data.SqlDbType.Float;
        chParam.IsNullable = false;
        chParam.Direction = ParameterDirection.Input;

        SqlParameter optimalQParam = new SqlParameter("@q", prod.q);
        optimalQParam.SqlDbType = System.Data.SqlDbType.Int;
        optimalQParam.IsNullable = false;
        optimalQParam.Direction = ParameterDirection.Input;

        SqlParameter annualChParam = new SqlParameter("@annualCh", prod.annualCh);
        annualChParam.SqlDbType = System.Data.SqlDbType.Float;
        annualChParam.IsNullable = false;
        annualChParam.Direction = ParameterDirection.Input;

        SqlParameter annualKParam = new SqlParameter("@annualK", prod.annualK);
        annualKParam.SqlDbType = System.Data.SqlDbType.Float;
        annualKParam.IsNullable = false;
        annualKParam.Direction = ParameterDirection.Input;

        SqlParameter optimalTACParam = new SqlParameter("@tac", prod.tac);
        optimalTACParam.SqlDbType = System.Data.SqlDbType.Float;
        optimalTACParam.IsNullable = false;
        optimalTACParam.Direction = ParameterDirection.Input;

        SqlParameter rParam = new SqlParameter("@r", prod.r);
        rParam.SqlDbType = System.Data.SqlDbType.Int;
        rParam.IsNullable = false;
        rParam.Direction = ParameterDirection.Input;

        SqlParameter inventoryLvlParam = new SqlParameter("@invLvl", prod.inventoryLvl);
        inventoryLvlParam.SqlDbType = System.Data.SqlDbType.Int;
        inventoryLvlParam.IsNullable = false;
        inventoryLvlParam.Direction = ParameterDirection.Input;

        SqlParameter statusParam = new SqlParameter("@status", prod.status);
        statusParam.SqlDbType = System.Data.SqlDbType.VarChar;
        statusParam.Size = 10;
        statusParam.IsNullable = false;
        statusParam.Direction = ParameterDirection.Input;

        SqlParameter[] paramList = {idParam, nameParam, demandParam, demandLTParam,
                                   leadTimeParam, fixedCoastParam, cParam,
                                   chPrecentageParam, chParam, optimalQParam,
                                   annualChParam, annualKParam, optimalTACParam, 
                                   rParam, inventoryLvlParam, statusParam };
        return paramList;

    }

    public static void insertProduct(Products product)
    {

        String comStr = "insert into Products(prodID, name, demand, demandLT, leadTime, fixedCoast, " + 
            "c, chAsPrecentage, ch, optimalQ, annualCh, annualK, optimalTAC, r, inventoryLvl, prodStatus) " + 
            "values(@id, @name, @demand, @demandLT, @leadTime, @k, @c, @chPrecent, " + 
            "@ch, @q, @annualCh, @annualK, @tac, @r, @invLvl, @status)";

        createConncetion();

        SqlCommand command = new SqlCommand(comStr, con);
        command.Parameters.AddRange(createParams(product));

        openConnection();

        command.ExecuteNonQuery();
        closeConnection();

        command.Parameters.Clear()
        command.Dispose();
    }

    public static DataTable getAllProducts()
    {
        String comStr = "select prodID, name, demand, demandLT, leadTime, fixedCoast, c, chAsPrecentage, " + 
            "ch, optimalQ, annualCh, annualK, optimalTAC, r, inventoryLvl, prodStatus from Products";

        createConncetion();

        SqlCommand command = new SqlCommand(comStr, con);

        DataTable table = new DataTable("allProduct");
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand=command;

        openConnection();

        adapter.Fill(table);
        command.Dispose();
        closeConnection();
        return table;
    }

} 
```

这是我使用 sqlParameters 的另一个类：

```
 public class StatisticsDataAccess : Connection
{

    public static SqlParameter[] createParams(Statistics stat, string prodID)
    {

        SqlParameter idParam = new SqlParameter("@id", prodID);
        idParam.SqlDbType = System.Data.SqlDbType.VarChar;
        idParam.Size = 45;
        idParam.IsNullable = false;
        idParam.Direction = ParameterDirection.Input;

        SqlParameter m1Param = new SqlParameter("@m1", stat.month1);
        m1Param.SqlDbType = System.Data.SqlDbType.Int;
        m1Param.IsNullable = false;
        m1Param.Direction = ParameterDirection.Input;

        SqlParameter m2Param = new SqlParameter("@m2", stat.month2);
        m2Param.SqlDbType = System.Data.SqlDbType.Int;
        m2Param.IsNullable = false;
        m2Param.Direction = ParameterDirection.Input;

        SqlParameter m3Param = new SqlParameter("@m3", stat.month3);
        m3Param.SqlDbType = System.Data.SqlDbType.Int;
        m3Param.IsNullable = false;
        m3Param.Direction = ParameterDirection.Input;

        SqlParameter m4Param = new SqlParameter("@m4", stat.month4);
        m4Param.SqlDbType = System.Data.SqlDbType.Int;
        m4Param.IsNullable = false;
        m4Param.Direction = ParameterDirection.Input;

        SqlParameter m5Param = new SqlParameter("@m5", stat.month5);
        m5Param.SqlDbType = System.Data.SqlDbType.Int;
        m5Param.IsNullable = false;
        m5Param.Direction = ParameterDirection.Input;

        SqlParameter m6Param = new SqlParameter("@m6", stat.month6);
        m6Param.SqlDbType = System.Data.SqlDbType.Int;
        m6Param.IsNullable = false;
        m6Param.Direction = ParameterDirection.Input;

        SqlParameter m7Param = new SqlParameter("@m7", stat.month7);
        m7Param.SqlDbType = System.Data.SqlDbType.Int;
        m7Param.IsNullable = false;
        m7Param.Direction = ParameterDirection.Input;

        SqlParameter m8Param = new SqlParameter("@m8", stat.month8);
        m8Param.SqlDbType = System.Data.SqlDbType.Int;
        m8Param.IsNullable = false;
        m8Param.Direction = ParameterDirection.Input;

        SqlParameter m9Param = new SqlParameter("@m9", stat.month9);
        m9Param.SqlDbType = System.Data.SqlDbType.Int;
        m9Param.IsNullable = false;
        m9Param.Direction = ParameterDirection.Input;

        SqlParameter m10Param = new SqlParameter("@m10", stat.month10);
        m10Param.SqlDbType = System.Data.SqlDbType.Int;
        m10Param.IsNullable = false;
        m10Param.Direction = ParameterDirection.Input;

        SqlParameter m11Param = new SqlParameter("@m11", stat.month11);
        m11Param.SqlDbType = System.Data.SqlDbType.Int;
        m11Param.IsNullable = false;
        m11Param.Direction = ParameterDirection.Input;

        SqlParameter m12Param = new SqlParameter("@m12", stat.month12);
        m12Param.SqlDbType = System.Data.SqlDbType.Int;
        m12Param.IsNullable = false;
        m12Param.Direction = ParameterDirection.Input;

        SqlParameter[] paramList = {idParam, m1Param, m2Param, m3Param, m4Param,
                                   m5Param, m6Param, m7Param, m8Param, m8Param,
                                   m10Param, m11Param, m12Param };
        return paramList;
    }

    public static void insertStatistic(Statistics stat, string prodID)
    {

        String comStr = "insert into LTDStatistic(prodID, month1, month2, month3, month4, month5, " +
            "month6, month7, month8, month9, month10, month11, month12)" +
            "values(@id, @m1, @m2, @m3, @m4, @m5, @m6, @m7, @m8, @m9, @m10, @m11, @m12)";

        createConncetion();

        SqlCommand command = new SqlCommand(comStr, con);
        command.Parameters.AddRange(createParams(stat, prodID));

        openConnection();

        command.ExecuteNonQuery();
        closeConnection();
        command.Parameters.Clear();
        command.Dispose();

    }

} 
```

WCF 服务使用这些类中的方法来修改数据库

```
 public void create(ProductsData product)
    {

        Statistics statDLT = new Statistics(product.demandLTStat.month1, product.demandLTStat.month2,
            product.demandLTStat.month3, product.demandLTStat.month4, product.demandLTStat.month5,
            product.demandLTStat.month6, product.demandLTStat.month7, product.demandLTStat.month8,
            product.demandLTStat.month9, product.demandLTStat.month10, product.demandLTStat.month11,
            product.demandLTStat.month12);

        Products newProd = new Products(product.prodID, product.prodName,
            product.leadTime, product.k, product.c, product.precentOfC, 
            product.demand, statDLT);

        newProd.callculate();
        newProd.determineR();
        ProductsDataAccess.insertProduct(newProd);
        //String plsWork = newProd.prodID;
        StatisticsDataAccess.insertStatistic(newProd.demandLTStat, newProd.prodID);
    } 
```

也许我错过了事情如何运作的一些重要方面......我不知道。希望有人可以帮助我，并对长代码段感到抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:38:00.177

`m8Param`在 .返回的数组中出现两次`StatisticsDataAccess.createParams()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T14:41:36.807

```
 SqlParameter[] paramList = {
            idParam, m1Param, m2Param, m3Param, m4Param,                            
            m5Param, m6Param, m7Param, **m8Param**, **m8Param**,
                             m10Param, m11Param, m12Param }; 
```

# c# - C# 中的别名资源文件命名空间

> ID：10981873
> 
> 赞同：1
> 
> 时间：2012-06-11T14:15:31.110
> 
> 标签：c#, asp.net-mvc-3, c#-4.0, resources, namespaces

我有一个 ASP.net MVC 3 项目，其资源文件设置在以下文件夹中：

```
/Resources/EntityName/Views/
/Resources/EntityName/Models/ 
```

这意味着访问强类型资源值的命名空间是：

`Resources.EntityName.Models.ModelA.Property1`

如果我尝试包含命名空间“resources.xxx”，Visual Studio 会给出编译时错误，并且它也不允许使用别名语法。

无论如何要包含或至少别名资源文件的强类型命名空间，就像它是一个普通的命名空间一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:24:12.100

没有理由不能在一个类中使用这些对象之一：

```
using YourProject.Resources.EntityName.Models; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:26:36.770

您可以尝试这样的事情（未经测试，只是一个想法）

```
public class myModelA : Resources.EntityName.Models.ModelA
{ /*Leave empty here, nothing to do*/ } 
```

然后，您可能能够调用`myModelA`资源的最短而不是完整、详细的名称。请注意，如果您像这样继承原始模型，您将无法访问`private`它的成员。

# android - 是否可以在 SimpleDateFormat 中插入两个日期值？

> ID：10981875
> 
> 赞同：0
> 
> 时间：2012-06-11T14:15:43.367
> 
> 标签：android, date, time, simpledateformat

在我的应用程序中，我曾经有一个时间选择器和一个日期选择器。日期和时间使用 SimpleDateFormat 存储。它看起来像这样：

```
public static final String DATE_TIME_FORMAT = "dd-MM-yyyy kk:mm:ss";

new SimpleDateFormat(DATE_TIME_FORMAT); 
```

现在我想进行一些更改，而不是有一个时间和一个日期选择器，我想有两个日期选择器。问题是我不能像这样存储两个日期。为什么这是不可能的：

```
public static final String DATE_TIME_FORMAT = "dd-MM-yyyy dd-MM-yyyy";

new SimpleDateFormat(DATE_TIME_FORMAT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:35:34.617

我不知道您要做什么，但是屏幕上有 2 个日期选择器意味着 2 个对象。每个都有自己的格式（可能相同，也可能不同）。

```
public static final String DATE_TIME_FORMAT = "dd-MM-yyyy";

public static SimpleDateFormat format = new SimpleDateFormat(DATE_TIME_FORMAT);
public static Date date1 = new Date();
public static Date date2 = new Date();

static {
    System.out.println(format.format(date1));
    System.out.println(format.format(date2));
} 
```

# objective-c - UIWebView 和 UISwipeGestureRecognizer

> ID：10981881
> 
> 赞同：0
> 
> 时间：2012-06-11T14:16:10.570
> 
> 标签：objective-c, ios, webkit

我有一个附加了滑动手势识别器的 web 视图，并且手势被正确拾取。

现在我在 webview 中加载了一个 HTML 文件，其中包含一些可拖动的内容（HTML/JQuery）。当内容被拖动时，它也会触发滑动手势，这是我不想要的。

**在 HTML 中拖动内容时，如何防止触发滑动？**

```
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self  action:@selector(swipeRightAction:)];
    swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
    swipeRight.delegate = self;
    [_webView addGestureRecognizer:swipeRight];

- (void)swipeRightAction:(id)ignored
{
NSLog("triggered");
} 
```

蒂亚！S。

# c# - C# 中的 const 函数参数

> ID：10981888
> 
> 赞同：17
> 
> 时间：2012-06-11T14:16:23.520
> 
> 标签：c#

> **可能重复：**
> [C# 的只读（类似“const”）函数参数](https://stackoverflow.com/questions/3826542/read-only-const-like-function-parameters-of-c-sharp)
> [为什么 C# 中没有 const 成员方法和 const 参数？](https://stackoverflow.com/questions/4150478/why-there-is-no-const-member-method-in-c-sharp-and-const-parameter)

过去用 C++ 编程过，我记得我们可以在方法中创建一个常量引用/指针参数。

如果我的记忆是正确的，下面的意思是，该方法不能改变引用并且引用本身是一个常量引用。

## C++ 示例

```
void DisplayData(const string &value) const
{
   std::count << value << endl;
} 
```

类中的方法在 C# 中是否有等价物？

我问的原因是，我试图通过引用传递一个对象（为了速度），同时不希望任何人改变它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-11T14:19:31.933

***2020 年 16 月 9 日更新***

现在似乎有表现出这种行为的[`in`参数修饰符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/in-parameter-modifier)`ref readonly`（本质上是 a ）。简要搜索您何时会使用它会产生以下答案：

[为什么有人会在 C# 中使用“in”参数修饰符？](https://stackoverflow.com/questions/52820372/why-would-one-ever-use-the-in-parameter-modifier-in-c)

***原始答案***

C# 没有等价物，它之前已经被[问](https://stackoverflow.com/questions/3263001/why-const-parameters-are-not-allowed-in-c-sharp)过[很多](https://stackoverflow.com/questions/4150478/why-there-is-no-const-member-method-in-c-sharp-and-const-parameter)[很多](https://stackoverflow.com/questions/8236358/const-objects-in-c-sharp-as-parameter)次[了](https://stackoverflow.com/questions/3826542/read-only-const-like-function-parameters-of-c-sharp)。

如果您不希望任何人更改“引用”，或者您的意思是对象的内容，请确保该类不公开任何公共设置器或改变该类的方法。如果您无法更改该类，请让它实现一个仅以只读方式公开公开成员的接口，并改为传递接口引用。

如果您的意思是要阻止该方法更改引用，那么默认情况下，如果您“通过引用”传递它，您实际上是通过值传递引用。方法中更改引用指向的任何尝试只会影响本地方法副本，而不是调用者的副本。这可以通过`ref`在引用类型上使用关键字来更改，此时该方法*可以*将引用指向新的底层对象，*它将*影响调用者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:30:28.847

对于值类型（`int`, `double`, `byte`, `char`,..., `struct`），参数作为值出现，因此保证不会影响调用模块。

对于`string`类型，虽然它是引用类型，但它在 CLR 中是不可变的，因此您在过程中所做的任何事情都不会影响原始字符串。

对于其他引用类型 ( `class`)，无法保证类中的更改来自方法。

# linux - 为什么 SunOS 说它不能执行这个 KornShell 脚本？

> ID：10981902
> 
> 赞同：1
> 
> 时间：2012-06-11T14:17:25.703
> 
> 标签：linux, shell, scripting, solaris, ksh

我在服务器 A 中有一个 KornShell (ksh) 脚本，它将在服务器 B 中运行一个脚本。

```
 #!/bin/ksh/
    ssh user@server "/path/script.sh" 
```

脚本权限如下：

```
 -rwxrwxrwx   1 user    dba           75 Jun 11 10:00 script.sh 
```

我检查了 /bin 中是否存在“ksh”及其存在。（bash 不是）

当我尝试运行脚本时，我得到 `./script.sh: cannot execute`

会发生什么？我手动测试了 ssh 命令，它可以工作。

它是一个 SunOS 系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:19:41.277

删除结尾`/`的 `#!/bin/ksh/`.. 将其留在那里也会对我造成错误。

这是我在 Linux 下使用斜杠得到的消息（比它出现的 SunOS 更具描述性）：

```
ksh: ./so2.sh: cannot execute [Not a directory] 
```

# java - 使用哈希图 在安卓中

> ID：10981905
> 
> 赞同：-1
> 
> 时间：2012-06-11T14:17:40.080
> 
> 标签：java, android-xml

我正在解析 XML 文件并将数据写入 hashmap，但是当我使用下面的代码时，我遇到了错误

> “HashMap 类型中的 put(String, Double[]) 方法不适用于参数 (String, double)”

```
ArrayList<HashMap<String, Double[]>> mylist = new ArrayList<HashMap<String, Double[]>>();
for (int i = 0; i < children.getLength(); i++) {                            

HashMap<String, Double[]> map = new HashMap<String, Double[]>();
Element e = (Element)children.item(i);
    HashMap<String, Double[]> map = new HashMap<String, Double[]>();
    map.put("id",(Double.parseDouble(ParseXMLMethods.getValue(e, "EMP_ID"))));
    mylist.add(map);
} 
```

如何更改以使其与方法定义匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:20:40.577

由于您要存储 Double 的价值。

改变

```
HashMap<String, Double[]> map = new HashMap<String, Double[]>(); 
```

到

```
HashMap<String, Double> map = new HashMap<String, Double>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:46:19.320

这是因为这一行：

```
map.put("id",(Double.parseDouble(ParseXMLMethods.getValue(e, "EMP_ID")))); 
```

正在尝试将“Double”类型放入需要“Double []”类型的地图中。以下是正确的：

```
map.put("id",new Double[] { Double.valueOf(ParseXMLMethods.getValue(e, "EMP_ID")) }); 
```

因为您将单个值包装到一个数组中，该数组与您的地图中预期的类型相匹配。

# html - 如何制作固定大小的表格单元格而不考虑其内容

> ID：10981907
> 
> 赞同：4
> 
> 时间：2012-06-11T14:17:43.260
> 
> 标签：html, css, html-table

我有一个包含动态内容的表格，因此每行的高度都是不同的——我想要的是固定表格的高度，而不管内容如何。内容可以是任意长度，也可以有图像。

我在 CSS 中尝试了以下内容：

```
table {
  border-collapse: collapse;
}
table td {
  border: 1px solid #ccc;
  padding: 4px;
}
table td:nth-child(2n+2) {
  width: 200px;
}
table td:last-child {
  width: 100px;
}
table tr {
  height: 80px;
  display: block;
  overflow: auto;
  background-color: red;
  border: 2px solid #ccc;
}

<table>
  <tr>
    <td>content1</td>
    <td>content 2</td>
    <td>content 3</td>
  </tr>
  <tr>
    <td>content1</td>
    <td>Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum.</td>
    <td></td>
  </tr>
  <tr>
    <td>content1</td>
    <td></td>
    <td>content 3</td>
  </tr>
</table> 
```

它工作得很好，但是当任何单元格中没有内容时，或者如果内容减少了一个单元格，它就会崩溃。这是[小提琴](http://jsfiddle.net/bipin000/YD9Gg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:33:08.967

您可以使用类似（[示例](http://jsfiddle.net/CfdJK/)）的内容：

```
table td
{
    width: 60px;
    height: 60px;
    display: inline-block;
    overflow: auto;
}​ 
```

使用支持`inline-block`. （尽管我不确定这是否是一个好的解决方案。）

# android - 此布局或其父布局可能没用（AnDroid）

> ID：10981908
> 
> 赞同：1
> 
> 时间：2012-06-11T14:17:51.997
> 
> 标签：android, android-linearlayout

我想在每个选项卡中使用多个`CheckBox`，但即使我在 LinearLayout 下有三个框，也只有一个框显示在选项卡中。

我也为每个复选框设置了 ID。

这是正在使用的代码。

主文件

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:id="@+id/widget43"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:orientation="vertical"
             >

            <CheckBox
                android:id="@+id/root"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Tortillas" />

            <CheckBox
                android:id="@+id/root1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Tortillas1" />

            <CheckBox
                android:id="@+id/roo2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Tortillas2" />

        </LinearLayout>

    </FrameLayout>

</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:42:17.440

我认为您需要将 CheckBox 的宽度和高度更改为“wrap_content”而不是“fill_parent”。第一个填充父母，其余的没有任何东西。

**编辑**

将 LinearLayout 的高度也更改为 wrap_content （看看我自己的一些，这就是我设置它们的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:19:09.490

除了@Barak，您还缺少 TabHost 之后的线性布局

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <LinearLayout
                android:id="@+id/widget43"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <CheckBox
                    android:id="@+id/root"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Tortillas" />

                <CheckBox
                    android:id="@+id/root1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Tortillas1" />

                <CheckBox
                    android:id="@+id/roo2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Tortillas2" />
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

# sql - SQL - 搜索 2 个表并从一个返回结果

> ID：10981912
> 
> 赞同：1
> 
> 时间：2012-06-11T14:18:02.777
> 
> 标签：sql

我目前有两张票。表 1 是票证，表 2 是响应。

我目前做

```
select id, subject, description 
from tickets 
where subject like '%hello%'; 
```

这可行，但我也想返回相同的字段，但 hello 与响应表中的消息字段匹配。

例如，我希望我能做到：

```
select id, subject, description 
from tickets, responses 
where tickets.subject like '%hello%' OR responses.message like '%hello%'; 
```

响应表中的ticketid 与tickets 表中的id 相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:20:54.553

如果我理解正确，您只需要门票表中的结果吗？您可以使用`tableName.*`或使用 tableName.columnName 来仅从该原始表中获取结果。

```
select tickets.id, tickets.subject, tickets.description 
from tickets, responses 
where tickets.id = responses.id
AND (tickets.subject like '%hello%' 
OR responses.message like '%hello%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:22:06.560

您可能需要左连接 -

```
select id, subject, description 
from tickets left join responses on tickets.id = responses.ticketid
where tickets.subject like '%hello%' OR responses.message like '%hello%'; 
```

[更正] 左连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:23:02.860

您需要加入表格：

```
SELECT `tickets`.`id`, `tickets`.`subject`, `tickets`.`description`, `responses`.`message` 
LEFT JOIN `responses` ON `tickets`.`id` = `responses`.`id` 
WHERE `tickets`.`subject` like '%hello%' OR responses.message like '%hello%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:23:03.210

如果总是有响应记录：

```
 select tickets.id, tickets.subject, tickets.description 
  from tickets, responses 
  where
    tickets.id = responses.id and
    ( tickets.subject like '%hello%' or 
      responses.message like '%hello%' ) 
```

如果票证可以在没有响应的情况下存在：

```
 select tickets.id, tickets.subject, tickets.description 
  from tickets left outer join responses on tickets.id = responses.id
  where
    tickets.subject like '%hello%' or 
    responses.message like '%hello%' 
```

# objective-c - ObjC valueForKey 不适用于 NSNumber 和 UDT

> ID：10981913
> 
> 赞同：1
> 
> 时间：2012-06-11T14:18:06.047
> 
> 标签：objective-c, nsdictionary, objective-c-runtime

我正在尝试将我自己的对象集合深度解析为 NSDictionary（用于 JSON）。

我有一个基础对象类，我的***所有***模型都扩展了它，而这个基础对象又扩展了 NSObject：

```
@interface BaseObj : NSObject <DICTMaker>
    - (NSMutableDictionary *) toDICT;
@end 
```

在该方法中，我使用 objc-runtime 来获取属性列表。任何可以引用 using 的属性，我都会`[self valueForKey:]`将属性的名称和值插入到我的字典中。

但是，到目前为止我注意到的是`NSNumber`s 和用户定义的类没有添加到字典中！我的解析器最有把握地识别它们，因为我让它把所有东西都吐到日志中；但`[self valueForKey:]`返回`nil`所有`NSNumbers`和用户定义的对象。

```
- (NSMutableDictionary *)toDICT {
    NSMutableDictionary *props = [NSMutableDictionary dictionary];
    unsigned int outCount, i;
    objc_property_t *properties = class_copyPropertyList([self class], &outCount);
    for (i = 0; i < outCount; i++) {
        objc_property_t property = properties[i];

        // Both of these work, I promise:
        NSString *propertyName = [NSString stringWithUTF8String:property_getName(property)];
        NSString *propertyType = [NSString stringWithUTF8String:getPropertyType(property)];

        NSLog( @"%@ of Type: %@", propertyName, propertyType );
        id propertyValue = [self valueForKey:propertyName];
        if ( [ propertyValue respondsToSelector:@selector(toDICT:) ] )
            [ props setObject:[propertyValue toDICT] forKey:propertyName ];
        else if ( propertyValue )
            [ props setObject:propertyValue forKey:propertyName ];
        else
            NSLog( @"Unable to get ref to: %@", propertyName );
    }
    free(properties);
    return props;
} 
```

这是我扔给创建者的示例对象：

```
@interface UserRegistrationLocation : BaseObj {
    NSString *address, *street, *street_2, *city;
    NSNumber *addr_state, *addr_zip;
}

@interface UserRegistrationContact : BaseObj {
    NSString *first_name, *last_name;
    NSString *p_phone_area, *p_phone_first_3, *p_phone_last_4;
    NSString *s_phone_area, *s_phone_first_3, *s_phone_last_4;
}

@interface UserRegistration : BaseObj {
    NSString *email, *password, *password_confirm;
    NSNumber *referral;

    UserRegistrationContact *primary, *secondary;
    UserRegistrationLocation *address;
}

NSMutableDictionary *mydict = [myUserRegistration toDICT]; 
```

生成的字典仅包含 email、password 和 password_confirm 的条目：

```
[11012:f803] Unable to get ref to: referral
[11012:f803] Unable to get ref to: primary
[11012:f803] Unable to get ref to: secondary
[11012:f803] Unable to get ref to: address
[11012:f803] {"user":{"password":"haxme123","password_confirm":"haxme123","email":"my@email.com"}} 
```

请提供任何帮助=}！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:41:41.413

您只为值声明了 ivars，而不是属性。`class_copyPropertyList`需要`@property`声明。您可以使用 ivar 访问函数，例如`class_getInstanceVariable`.

但是，我认为这种方法有点太聪明了。我将实现一个方法，该方法返回要序列化的键数组，例如`-(NSArray *)keysForJSONSerialization`. 这将更清楚地揭示意图，并允许您防止某些属性的序列化（我怀疑您在某些时候会想要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:27:28.637

也许我理解错了问题，但是您的推荐、主要等不只是空吗？如果它们不在键值存储中，你会得到一个异常。如果在键值存储中找到该属性但分配了 nil，则仅调用 else 部分。至少从您的示例代码中，无法确定是否设置了值。

如果我将您的示例简化为下面的代码，我会得到以下带有值的输出测试：(null) Unable to get ref to: test aNumber with Value: 5

test 为空，并且会给您的消息“无法...”。aNumber 是正确的。如果我将测试更改为某些文本，“无法...”部分就会消失。此处不会出现不是属性的附加成员变量 _noProp，因为 copyPropertyList 仅复制属性。

```
@interface TestValueForKey : NSObject {
     NSString* _test;
     NSString* _noProp;
     NSNumber* _aNumber;
}

@property (retain) NSString* test;
@property (retain) NSNumber* aNumber;

-(void)myTest;

@implementation TestValueForKey

@synthesize test = _test;
@synthesize aNumber = _aNumber;

-(id)init
{
    if( (self = [super init]) != nil) {
       _test = nil;
       _aNumber = [NSNumber numberWithInt:5];
    }

    return self;
}

-(void)myTest
{
    NSMutableDictionary *props = [NSMutableDictionary dictionary];
    unsigned int outCount, i;
    objc_property_t *properties = class_copyPropertyList([self class], &outCount);
    for( i = 0; i < outCount; i++) {
       objc_property_t property = properties[i];

       // Both of these work, I promise:
       NSString *propertyName = [NSString stringWithUTF8String:property_getName(property)];

      id propertyValue = [self valueForKey:propertyName];
      NSLog( @"%@ with Value: %@", propertyName, propertyValue );
      if ( propertyValue )
          [ props setObject:propertyValue forKey:propertyName ];
      else
          NSLog( @"Unable to get ref to: %@", propertyName );
  }
  free(properties);
}
@end 
```

# android - 为什么 startActivityForResult 使用 Intent 而不是 Bundle 来传递数据？

> ID：10981915
> 
> 赞同：0
> 
> 时间：2012-06-11T14:18:14.737
> 
> 标签：android, design-patterns

正如您从[文档](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)中看到的那样，开始将`Activity`数据传回的方式如下：

1.  开始`Activity`使用通话`startActivityForResult(Intent intent, int requestCode)`。
2.  在开始的`Activity`通话`setResult(int resultCode, Intent data)`中。
3.  `onActivityResult(int, int, Intent)`在调用上实现`Activity`。

问题是：它们是`Intent`在这种情况下使用的一种模式或设计考虑因素，而在其他任何地方，交互活动数据都表示为 a `Bundle`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:07:34.810

在我得到更详细的答案之前，我唯一能想到的就是这样做是为了让被调用的 Activity 增加对结果操作的控制。

我可以看到以这种方式完成的唯一情况是，如果被调用的 Activity 在另一个沙箱中，并且可以使用显式`Class`引用而不是通过使用`Action`锁定结果调用来构造 Intent明确指定`Activity`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:27:04.410

通过传回一个意图而不仅仅是一个包，调用者可以接收到一些东西来直接启动另一个活动、服务等。尽管在所有（甚至大多数）情况下可能都不需要，但它仍然允许一个包在意图的附加内容中交付。

# powershell - 找不到位置参数

> ID：10981923
> 
> 赞同：1
> 
> 时间：2012-06-11T14:18:32.497
> 
> 标签：powershell

我不确定为什么会出现以下错误

`Copy-Item : A positional parameter cannot be found that accepts argument 'C:\Code\PS\Auths\2.jpg'. At C:\Code\PS\auth-grab.ps1:9 char:12`

**C:\Code\PS\Auths\2.jpg 是正确的路径。**

（我正在为管道中的每个项目获取其中一个）

当我回显 $rv 时，我得到了正确的路径并且 $_ 应该是正确的。我哪里错了？

哎呀脚本如下：

```
function Generate-FileName($fi)
{           
    $rv = "C:\Code\PS\New\"+ $fi.Name
    #echo rv    
}

Get-ChildItem Auths\*.* -include 1.jpg, 2.jpg | 
ForEach-Object {        
    Copy-Item $_ -destination Generate-FileName(Get-ChildItem $_)       
} 
```

注意如果我回显 $rv 我得到了我想要的路径

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:56:33.523

包装函数 - *Generate-FileName*像这样用**括号括**起来 -

```
ForEach-Object {        
    Copy-Item $_ -destination (Generate-FileName(Get-ChildItem $_))      
} 
```

将其括在括号中会强制[表达式](http://www.microsoft.com/en-us/download/details.aspx?id=9706).

**或者**

* * *

将函数的返回值复制到一个变量中，并在 Copy-Item 中使用该变量，如下所示 -

```
function Generate-FileName($fi)
{           
    "C:\Code\PS\New\"+ $fi.Name
}

Get-ChildItem Auths\*.* -include 1.jpg, 2.jpg | 
ForEach-Object {   
    $destination =  Generate-FileName(Get-ChildItem $_)           
    Copy-Item $_ -destination $destination
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:31:22.213

我认为您的函数`Generate-FileName`不会返回任何内容。

我认为您的脚本使用复制项生成这一行：

```
Copy-Item C:\Code\PS\Auths\2.jpg -destination 
```

试试这样：

```
function Generate-FileName($fi)
{           
    $rv = "C:\Code\PS\New\"+ $fi.Name
    return $rv # here is the change
} 
```

# python - 使用 Python 2.7 在 Mac 上安装 PyEnchant 模块很困难

> ID：10981924
> 
> 赞同：6
> 
> 时间：2012-06-11T14:18:34.440
> 
> 标签：python, import, installation, python-module, pyenchant

我无法在我的 Mac 上安装一个名为 PyEnchant 的 Python 模块。我正在使用 Python 2.7。当我打开并运行 pyenchant setup.py 文件时，我收到以下错误消息：

```
Traceback (most recent call last):
File "/Applications/Python 2.7/pyenchant-1.6.5/setup.py", line 195, in <module>
    import enchant

File "/Applications/Python 2.7/pyenchant-1.6.5/enchant/__init__.py", line 90, in <module>
    from enchant import _enchant as _e

File "/Applications/Python 2.7/pyenchant-1.6.5/enchant/_enchant.py", line 133, in <module>
    raise ImportError("enchant C library not found")

ImportError: enchant C library not found 
```

我尝试运行 pyenchant 网站上提供的 .dmg 文件。安装过程继续进行，没有任何错误消息，但是一旦完成，我仍然无法将 pyenchant 导入 Python，也无法在 Finder 中的任何位置找到已安装的软件。

我还尝试使用 .egg 安装程序，它打开了一个 Python 窗口，顶部用黑色大写字母“PK”。我不知道这是什么意思。

正如您可能知道的那样，我不是经验丰富的 Python 用户，因此非常感谢您对此提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:18:26.067

安装附魔首先对我有用

```
brew install enchant 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T10:53:16.553

Try this - It worked for me on Ubuntu.

```
 sudo apt-get install libenchant1c2a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:08:23.690

有很多方法可以安装 PyEnchant，例如使用 MacPorts：

`sudo port install py27-enchant`

这将额外安装 enchant、aspell 和 hunspell 库。您必须单独安装字典，才能运行它们的列表

```
port search aspell-dict 
```

例如，安装德语词典

```
sudo port install aspell-dict-de 
```

你完成了！

（我希望你现在已经在别处找到了答案）

# php - 共享主机上的 GeoIP

> ID：10981925
> 
> 赞同：2
> 
> 时间：2012-06-11T14:18:38.793
> 
> 标签：php, spam-prevention, geoip

我制作的一些网站存在垃圾邮件发送者的问题。我已经确保消息在发布之前必须得到批准，但最近情况变得更糟了。

在所有垃圾邮件之间我只能看到一个链接。据 称，所有 IP 地址都`geoiplookup`来自中国（还有一些来自乌克兰）。我想“嗯，这很容易。只需屏蔽这两个国家。无论如何，这是一个荷兰网站。”。问题是[GeoIP](http://php.net/manual/en/book.geoip.php)扩展没有安装在有问题的共享主机上。

我更喜欢这种解决方案，而不是像 Captcha （反正没人能读到那些血腥的东西）或需要注册和登录之类的东西。我也不想依赖其他网站，因为它们可能会离线或窃取信息。

还有其他方法吗？这个国家是我能找到的唯一链接。用户代理同样是随机的，因此 IP 地址也属于同一 2 个国家/地区。我已经实现了阻止用户在 Tor 网络上发帖的功能，但他们似乎没有使用 Tor。

我知道我可以使用 Javascript 获取某人的位置，但那是客户端，很容易被禁用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:23:02.923

> 可能重复： [如何阻止来自中国的请求到我的应用程序？](https://stackoverflow.com/questions/5994773/how-can-i-block-requests-from-china-to-my-app)

巧合的是，这个[问题](https://stackoverflow.com/questions/5994773/how-can-i-block-requests-from-china-to-my-app)上的 OP 也有同样的问题。建议执行以下操作：（感谢 Lawrence Cherone）

您可以尝试在 .htaccess 中阻止整个中国 IP 范围

```
#China
deny from 203.135.96.0/19
deny from 203.208.32.0/19
deny from 202.165.176.0/20
deny from 59.108.0.0/14
deny from 210.25.0.0/16
deny from 202.95.252.0/22
deny from 219.216.0.0/13
deny from 202.170.128.0/19
deny from 60.247.0.0/16
deny from 221.13.0.0/16
deny from 125.96.0.0/15
deny from 202.38.0.0/20
deny from 203.192.0.0/19
deny from 202.122.128.0/24
deny from 218.56.0.0/13
deny from 203.166.160.0/19
deny from 202.122.112.0/21
deny from 203.190.96.0/20
deny from 219.72.0.0/16
deny from 124.172.0.0/15
deny from 210.79.64.0/18
deny from 198.17.7.0/24
deny from 202.168.160.0/19
deny from 203.91.120.0/21
deny from 220.160.0.0/11
deny from 202.127.192.0/20
deny from 202.127.216.0/21
deny from 60.253.128.0/17
deny from 58.82.0.0/15
deny from 202.85.208.0/20
deny from 124.249.0.0/16
deny from 202.90.224.0/20
deny from 59.192.0.0/10
deny from 192.83.122.0/24
deny from 202.38.152.0/22
deny from 202.69.16.0/20
deny from 210.14.128.0/17
deny from 124.240.0.0/17
deny from 222.240.0.0/13
deny from 221.176.0.0/13
deny from 203.191.16.0/20
deny from 124.200.0.0/13
deny from 202.60.112.0/20
deny from 203.94.0.0/19
deny from 221.12.0.0/17
deny from 221.14.0.0/15
deny from 202.152.176.0/20
deny from 121.4.0.0/15
deny from 210.82.0.0/15
deny from 203.152.64.0/19
deny from 121.76.0.0/15
deny from 59.191.0.0/17
deny from 221.196.0.0/15
deny from 202.165.208.0/20
deny from 125.254.128.0/18
deny from 210.14.64.0/19
deny from 203.212.80.0/20
deny from 202.112.0.0/13
deny from 58.87.64.0/18
deny from 61.45.128.0/18
deny from 122.51.0.0/16
deny from 210.32.0.0/12
deny from 202.93.252.0/22
deny from 202.90.0.0/22
deny from 125.216.0.0/13
deny from 222.64.0.0/11
deny from 60.194.0.0/15
deny from 210.23.32.0/19
deny from 124.196.0.0/16
deny from 203.158.16.0/21
deny from 192.124.154.0/24
deny from 122.0.128.0/17
deny from 203.208.16.0/22
deny from 202.127.16.0/20
deny from 202.38.184.0/21
deny from 210.192.96.0/19
deny from 210.56.192.0/19
deny from 202.173.224.0/19
deny from 222.125.0.0/16
deny from 202.20.120.0/24
deny from 58.32.0.0/11
deny from 202.164.0.0/20
deny from 210.5.0.0/19
deny from 202.8.128.0/19
deny from 202.150.16.0/20
deny from 203.86.64.0/19
deny from 202.63.248.0/22
deny from 203.174.96.0/19
deny from 220.252.0.0/16
deny from 210.185.192.0/18
deny from 203.156.192.0/18
deny from 203.110.160.0/19
deny from 203.95.0.0/21
deny from 222.16.0.0/12
deny from 59.172.0.0/15
deny from 202.38.136.0/23
deny from 121.224.0.0/12
deny from 203.191.64.0/18
deny from 221.129.0.0/16
deny from 121.40.0.0/14
deny from 210.21.0.0/16
deny from 59.151.0.0/17
deny from 202.170.216.0/21
deny from 203.130.32.0/19
deny from 121.100.128.0/17
deny from 202.127.12.0/22
deny from 124.254.0.0/18
deny from 203.135.160.0/20
deny from 124.250.0.0/15
deny from 202.14.88.0/24
deny from 202.181.112.0/20
deny from 202.38.160.0/23
deny from 219.242.0.0/15
deny from 203.191.144.0/20
deny from 220.242.0.0/15
deny from 61.29.128.0/17
deny from 221.133.224.0/19
deny from 203.196.0.0/21
deny from 202.0.176.0/22
deny from 122.0.64.0/18
deny from 220.154.0.0/15
deny from 222.168.0.0/13
deny from 220.248.0.0/14
deny from 218.185.192.0/19
deny from 124.160.0.0/13
deny from 202.38.168.0/21
deny from 121.56.0.0/15
deny from 121.55.0.0/18
deny from 202.91.128.0/22
deny from 121.59.0.0/16
deny from 123.49.128.0/17
deny from 220.232.64.0/18
deny from 203.100.32.0/20
deny from 202.122.32.0/21
deny from 202.38.138.0/24
deny from 202.14.235.0/24
deny from 203.171.224.0/20
deny from 202.4.252.0/22
deny from 124.224.0.0/12
deny from 202.38.128.0/21
deny from 121.51.0.0/16
deny from 202.127.112.0/20
deny from 166.111.0.0/16
deny from 124.108.40.0/21
deny from 203.207.128.0/17
deny from 218.104.0.0/14
deny from 58.30.0.0/15
deny from 124.156.0.0/16
deny from 202.14.236.0/23
deny from 125.31.192.0/18
deny from 203.90.128.0/18
deny from 124.66.0.0/17
deny from 202.136.208.0/20
deny from 210.16.128.0/18
deny from 221.0.0.0/13
deny from 203.128.32.0/19
deny from 61.128.0.0/10
deny from 58.116.0.0/14
deny from 202.130.0.0/19
deny from 192.83.169.0/24
deny from 202.94.0.0/19
deny from 202.46.32.0/19
deny from 60.232.0.0/15
deny from 61.87.192.0/18
deny from 203.222.42.64/26
deny from 60.255.0.0/16
deny from 124.20.0.0/15
deny from 121.32.0.0/13
deny from 202.38.140.0/22
deny from 203.184.80.0/20
deny from 58.144.0.0/16
deny from 210.15.0.0/17
deny from 124.68.0.0/14
deny from 219.128.0.0/11
deny from 121.204.0.0/14
deny from 202.127.128.0/19
deny from 218.64.0.0/11
deny from 124.108.8.0/21
deny from 125.213.0.0/17
deny from 202.74.8.0/21
deny from 61.236.0.0/15
deny from 61.48.0.0/13
deny from 219.224.0.0/12
deny from 121.0.16.0/20
deny from 125.98.0.0/16
deny from 222.192.0.0/11
deny from 202.180.128.0/19
deny from 121.89.0.0/16
deny from 202.96.0.0/12
deny from 203.100.80.0/20
deny from 203.88.192.0/19
deny from 121.248.0.0/14
deny from 221.200.0.0/13
deny from 202.38.158.0/23
deny from 202.38.149.0/24
deny from 162.105.0.0/16
deny from 210.15.128.0/18
deny from 221.172.0.0/14
deny from 125.215.0.0/18
deny from 218.192.0.0/12
deny from 202.131.48.0/20
deny from 202.92.252.0/22
deny from 220.192.0.0/12
deny from 202.38.146.0/23
deny from 203.95.96.0/19
deny from 202.69.4.0/22
deny from 58.128.0.0/13
deny from 203.118.192.0/19
deny from 203.128.96.0/19
deny from 202.136.224.0/20
deny from 222.126.128.0/17
deny from 122.200.64.0/18
deny from 61.8.160.0/20
deny from 202.38.150.0/23
deny from 58.192.0.0/11
deny from 203.212.0.0/20
deny from 124.248.0.0/17
deny from 222.128.0.0/12
deny from 203.92.0.0/22
deny from 202.38.192.0/18
deny from 221.199.224.0/19
deny from 210.79.224.0/19
deny from 202.91.0.0/22
deny from 221.224.0.0/12
deny from 203.208.0.0/20
deny from 203.207.64.0/18
deny from 202.149.160.0/19
deny from 202.149.224.0/19
deny from 202.189.80.0/20
deny from 203.80.144.0/20
deny from 58.66.0.0/15
deny from 202.70.0.0/19
deny from 210.78.0.0/16
deny from 203.209.224.0/19
deny from 202.131.16.0/21
deny from 58.24.0.0/15
deny from 202.179.240.0/20
deny from 202.4.128.0/19
deny from 202.14.238.0/24
deny from 222.176.0.0/12
deny from 222.160.0.0/14
deny from 220.112.0.0/14
deny from 167.139.0.0/16
deny from 122.4.0.0/14
deny from 202.153.48.0/20
deny from 221.12.128.0/18
deny from 211.144.0.0/12
deny from 211.64.0.0/13
deny from 124.6.64.0/18
deny from 125.112.0.0/12
deny from 203.83.56.0/21
deny from 124.29.0.0/17
deny from 124.16.0.0/15
deny from 202.136.48.0/20
deny from 61.47.128.0/18
deny from 124.40.128.0/18
deny from 202.127.212.0/22
deny from 203.148.0.0/18
deny from 59.64.0.0/12
deny from 122.48.0.0/16
deny from 124.42.0.0/17
deny from 218.249.0.0/16
deny from 124.242.0.0/16
deny from 203.132.32.0/19
deny from 203.79.0.0/20
deny from 202.38.176.0/23
deny from 202.43.144.0/20
deny from 202.123.96.0/20
deny from 203.175.192.0/18
deny from 125.171.0.0/16
deny from 211.136.0.0/13
deny from 203.128.128.0/19
deny from 192.188.170.0/24
deny from 122.8.0.0/13
deny from 124.67.0.0/16
deny from 202.91.176.0/20
deny from 124.243.192.0/18
deny from 221.122.0.0/15
deny from 203.90.0.0/22
deny from 210.28.0.0/14
deny from 202.122.64.0/19
deny from 220.231.0.0/18
deny from 210.52.0.0/15
deny from 220.234.0.0/16
deny from 202.38.164.0/22
deny from 202.127.224.0/19
deny from 203.81.16.0/20
deny from 202.127.48.0/20
deny from 134.196.0.0/16
deny from 218.0.0.0/11
deny from 60.63.0.0/16
deny from 203.93.0.0/16
deny from 124.72.0.0/13
deny from 61.240.0.0/14
deny from 202.127.40.0/21
deny from 202.127.208.0/23
deny from 125.210.0.0/16
deny from 211.96.0.0/13
deny from 61.28.0.0/17
deny from 60.235.0.0/16
deny from 202.158.160.0/19
deny from 121.46.0.0/15
deny from 59.80.0.0/14
deny from 203.176.168.0/21
deny from 121.60.0.0/14
deny from 202.143.16.0/20
deny from 58.154.0.0/15
deny from 221.208.0.0/12
deny from 210.51.0.0/16
deny from 218.108.0.0/15
deny from 61.232.0.0/14
deny from 121.201.0.0/16
deny from 124.88.0.0/13
deny from 221.198.0.0/16
deny from 203.161.192.0/19
deny from 203.119.32.0/22
deny from 202.38.156.0/24
deny from 202.92.0.0/22
deny from 221.130.0.0/15
deny from 168.160.0.0/16
deny from 222.32.0.0/11
deny from 203.86.0.0/18
deny from 121.16.0.0/12
deny from 203.92.160.0/19
deny from 202.46.224.0/20
deny from 121.8.0.0/13
deny from 59.107.0.0/16
deny from 203.91.96.0/20
deny from 122.198.0.0/16
deny from 221.8.0.0/14
deny from 219.82.0.0/16
deny from 202.93.0.0/22
deny from 60.55.0.0/16
deny from 125.64.0.0/11
deny from 203.187.160.0/19
deny from 58.14.0.0/15
deny from 124.64.0.0/15
deny from 202.38.64.0/18
deny from 125.58.128.0/17
deny from 203.119.24.0/21
deny from 203.100.192.0/20
deny from 202.165.96.0/20
deny from 202.160.176.0/20
deny from 221.192.0.0/14
deny from 202.120.0.0/15
deny from 203.100.96.0/19
deny from 202.127.160.0/21
deny from 202.75.208.0/20
deny from 125.62.0.0/18
deny from 124.220.0.0/14
deny from 202.91.224.0/19
deny from 202.10.64.0/20
deny from 202.90.252.0/22
deny from 202.127.0.0/21
deny from 220.231.128.0/17
deny from 60.208.0.0/12
deny from 218.96.0.0/14
deny from 203.222.192.0/20
deny from 60.200.0.0/13
deny from 210.87.128.0/18
deny from 125.208.0.0/18
deny from 210.22.0.0/16
deny from 125.32.0.0/12
deny from 121.58.0.0/17
deny from 202.136.252.0/22
deny from 221.199.0.0/17
deny from 203.99.16.0/20
deny from 203.175.128.0/19
deny from 203.91.32.0/19
deny from 210.76.0.0/15
deny from 60.245.128.0/17
deny from 121.192.0.0/14
deny from 203.89.0.0/22
deny from 220.152.128.0/17
deny from 210.72.0.0/14
deny from 58.16.0.0/13
deny from 202.0.110.0/24
deny from 121.68.0.0/14
deny from 202.41.152.0/21
deny from 202.131.208.0/20
deny from 221.199.192.0/20
deny from 203.223.0.0/20
deny from 124.112.0.0/13
deny from 202.125.176.0/20
deny from 203.90.192.0/19
deny from 123.99.128.0/17
deny from 221.199.128.0/18
deny from 60.0.0.0/11
deny from 202.142.16.0/20
deny from 161.207.0.0/16
deny from 202.130.224.0/19
deny from 159.226.0.0/16
deny from 210.5.128.0/19
deny from 58.100.0.0/15
deny from 124.47.0.0/18
deny from 221.136.0.0/15
deny from 218.240.0.0/13
deny from 203.134.240.0/21
deny from 58.240.0.0/12
deny from 202.141.160.0/19
deny from 210.12.0.0/15
deny from 203.88.32.0/19
deny from 202.148.96.0/19
deny from 202.95.0.0/19
deny from 222.248.0.0/15
deny from 211.160.0.0/13
deny from 203.99.80.0/20
deny from 60.160.0.0/11
deny from 202.41.240.0/20
deny from 122.49.0.0/18
deny from 211.80.0.0/12
deny from 123.199.128.0/17
deny from 202.192.0.0/12
deny from 202.22.248.0/21
deny from 219.244.0.0/14
deny from 202.122.0.0/21
deny from 59.32.0.0/11
deny from 125.104.0.0/13
deny from 124.192.0.0/15
deny from 124.147.128.0/17
deny from 124.128.0.0/13
deny from 202.173.8.0/21
deny from 210.26.0.0/15
deny from 121.48.0.0/15
deny from 220.101.192.0/18 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:58:13.197

Maxmind - 它是 GeoIP 扩展所基于的数据的背后 - 已经制作了一个完美运行的 API 实现。

您可以通过他们的免费 G​​eoIP 产品 (GeoIP Lite) 自由使用它。

[http://www.maxmind.com/app/php](http://www.maxmind.com/app/php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:50:34.907

您不需要 geoip 扩展。只需转到 geopip 网站并下载其他选项之一，例如，创建一个 mysql 数据库或使用二进制文件选项。

# java - java代码读取邮件内容中的xml内容

> ID：10981927
> 
> 赞同：1
> 
> 时间：2012-06-11T14:18:49.773
> 
> 标签：java, email

这是获取内容的代码（如果是纯文本或 html）。我想知道如果邮件正文是xml，如何处理内容？

```
MimeBodyPart mbp = (MimeBodyPart)part;    
if (mbp.isMimeType("text/plain")) {
    body += mbp.getContent().toString();
}
else if (mbp.isMimeType("TEXT/HTML")) {
    body += mbp.getContent().toString(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:24:59.787

```
MimeBodyPart mbp = (MimeBodyPart)part;
if (mbp.isMimeType("text/plain")) {
    body += mbp.getContent().toString();
} else if (mbp.isMimeType("TEXT/HTML")) {
    body += mbp.getContent().toString(); 
}else if(mbp.isMimeType("text/xml")) {
    body += mbp.getContent().toString(); 
} 
```

这是你想要的吗？你能详细说明一下吗？

# entity-framework - 首先使用 EF 代码更改数据库架构时最简单的操作是什么

> ID：10981932
> 
> 赞同：6
> 
> 时间：2012-06-11T14:19:07.420
> 
> 标签：entity-framework, ef-code-first

我是 EF 代码的新手。我在生产中有一个现有的数据库，我首先使用了 EF 4.3.1 代码，一切正常。现在我刚刚更新了我的数据库模式并得到了异常

```
System.InvalidOperationException: The model backing the 'MyDbContext' context has changed since the database was created. Consider using Code First Migrations to update the database (http://go.microsoft.com/fwlink/?LinkId=238269). 
```

我不能使用`DropCreateDatabaseIfModelChanges`，因为它在生产中，应对架构更改的最简单方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:13:29.213

由于 EF-CF 迁移是一个相当新的概念，我建议采用一个久经考验的过程并对其进行修改以使用我们的新工具，如 EF。这是我们所做的：

1.  用于`DropCreateDatabaseIfModelChanges`本地开发。这将允许您保持本地开发副本与您的模型（在代码中）同步。每次构建/运行时，您都会获得更新的本地数据库。您还可以使用 Initializer 来加载测试数据等。`Database.SetInitializer<DBContextNameHere>(new DBContextInitializerNameHere());`

2.  使用 RedGate 的 SQLCompare 工具将本地开发与生产进行比较，并自动生成用于部署的更改脚本。（注意：您也可以从该工具自动部署）

[http://www.red-gate.com/products/sql-development/sql-compare/index-b](http://www.red-gate.com/products/sql-development/sql-compare/index-b)

主要好处是您不必更改本地开发流程，并且您可以通过生成的脚本获得可重复的版本化部署。您还可以将其与他们的 SQL 源代码控制工具结合使用，以将所有 SQL 对象和部署脚本（甚至数据）保留在源代码控制中。

不，我不为这些人工作，我只是喜欢他们的工具以及它如何帮助我解决同样的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T14:22:08.753

您可以查看使用 Entity Framework 迁移来自动更新数据库以匹配您的新模型。

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-04T22:29:19.733

我发现运行以下脚本

```
truncate table __MigrationHistory 
```

当您的代码/数据库不同步时，在数据库上删除此问题。

也许我只是习惯了老派，构建和修改数据库设计，相应地修改代码，或者在编码等时发现我需要一个新领域......只需在两个地方添加。

我承认我是新的（ish），`MVC`但有时这些功能是无用的，因为它们隐藏了事情在基本层面上的工作方式。当您了解所有内容如何组合在一起时，拥有生成器和工具来帮助一切都很好，但是当您开始时……我认为这并不好。

我遇到过许多不理解简单概念的开发人员，因为他们使用代码生成器、向导等。当涉及到真正的编程或维护遗留系统时，他们有点迷失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T14:56:01.063

发生这种情况时，我通常会运行迁移以指向一个新数据库，一旦创建了该数据库，然后将新数据库的结构与现有数据库的结构进行比较，如果需要手动进行更改（否则它可能会给你一个指示是什么导致了错误 - 意外的架构更改或索引等）然后删除原始数据库上的 __MigrationHistory 表中的条目并从新数据库复制条目，以便 __MigrationHistory 变得正确并且 Code First 现在将正确同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T09:15:00.523

我通过添加解决了这个问题

```
Database.SetInitializer<MyContext>(null); to Application_Start() inside Global.asax.cs 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-12T05:09:37.103

我希望这段代码对你有帮助

[EF-代码优先迁移](http://sarasaerp.freeforums.org/ef-code-based-migrations-t12.html)

# asp-classic - 发布日历

> ID：10981933
> 
> 赞同：0
> 
> 时间：2012-06-11T14:19:10.093
> 
> 标签：asp-classic, calendar, icalendar

我有一个管理学校活动日历的 webapp（经典 ASP）。事件要么是一般性的（适用于所有人），要么是特定于某些学生的（例如，孩子正在参加的体育比赛）。

我想“发布”日历，以便父母可以在他们的 iPhone 或其他设备上进行活动。如果我可以突出显示属于他们孩子的事件（这目前在父母登录时在网站上发生），那将是一个奖励，但这不是必需的。

至关重要的是，如果基础事件发生变化（日期/时间更改或取消），家长的日历也会更新以反映这一点（而不是使用修改后的信息创建重复条目）。

我快速浏览了 iCal，我认为我可以以这种格式发布（包括修订条目和删除），但有人说需要 .Mac 或 WebDAV，我不确定其后勤工作。

因此，我正在寻求有关将日历数据获取到人们的 iPhone 和 Outlook 等并保持最新的合适机制的建议，以及您推荐的任何技术教程。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:18:02.443

发布 .ics 文件是您所需要的。该文件的链接成为您的“订阅”链接。然后人们可以订阅任何接受 .ics 文件的应用程序（现在几乎是任何日历应用程序）。

**取消和更新：**

订阅应用程序和订阅个人的设置将决定检查更新的频率（对此无能为力）。

因此，对于取消和更新，人们可能还应该有一些其他方法来改变人们对事件已被取消或删除的事实（电子邮件、短信、推文等），因为他们可能会注意到它在他们的日历应用程序中发生了变化。

**突出显示**

ics 规范中有一个 CATEGORY 字段，您可以将其设置为父级....但是...我认为您无法控制订阅应用程序上的“突出显示”。

您可以做的是为每个分类/父级提供多个提要/文件，以便他们订阅他们“自己的”提要，如果这有意义的话。

EG：在我的 wordpress 插件中，它允许使用各种 wordpress 分类（例如：标签、类别、作者）来提供 ics 提要，这些提要是主要提要的子集，因此人们可以订阅他们感兴趣的事件集。

**测试一下**

可以使用测试谷歌日历来测试这个概念，以生成 ics 提要和您自己的智能手机、Outlook 等日历应用程序。当你有一个 ics 文件时，Google 也会使用它来测试你的文件，因为它对格式相当迂腐。（例如：从谷歌日历导入或订阅您制作的 ics 文件）。

PS。我在 icalevents.com 主页的右下角列出了其他 ics 规范和 ics 测试资源。

# c# - 如何以编程方式将访问键（快捷方式）添加到 WPF ContextMenu？

> ID：10981936
> 
> 赞同：5
> 
> 时间：2012-06-11T14:19:28.793
> 
> 标签：c#, wpf, menu, shortcut

我已经有以下内容：

```
var myContextMenu = new System.Windows.Controls.ContextMenu();

var exitItem = new MenuItem();
exitItem.Header = "E_xit";
exitItem.Item.Click += new RoutedEventHandler(new System.EventHandler(ExitProgram));
myContextMenu.Items.Add(exitItem); 
```

这会导致我的上下文菜单显示“退出”菜单项，并带有下划线“x”。但是，按 x 没有任何作用。单击菜单项工作正常。

如何将事件与 x 键关联？请注意，这必须在我的上下文中以编程方式完成。我无法在前面的 XAML 中编写此解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:11:22.003

添加快捷方式的常用方法如下：

```
var exitCommand = new RelayCommand(_ => ExitProgram());
        var exitItem = new MenuItem(); 
        exitItem.Header = "E_xit";
        exitItem.Command = exitCommand;
        myContextMenu.Items.Add(exitItem);

        InputBindings.Add(new KeyBinding(exitCommand, new KeyGesture(Key.X, ModifierKeys.Alt)); 
```

此处使用的[RelayCommand](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030) 类不是 WPF 的一部分，但它广泛用于基于 MVVM 的应用程序中。

但请注意，您不能在没有修饰符的情况下将快捷方式设置为 X。引用自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.input.keygesture.aspx)

> 在大多数情况下，KeyGesture 必须与一个或多个 ModifierKey 相关联。此规则的例外是功能键和数字键盘键，它们本身可以是有效的 KeyGesture。例如，您可以仅使用 F12 键创建 KeyGesture，但要在 KeyGesture 中使用 X 键，它必须与修饰键配对。

如果由于某种原因您需要使用 X w/o 修饰符 - 您将不得不处理键盘事件（例如 KeyDown）并做出相应的反应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:23:31.747

这对我来说很好：

```
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication5
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            Loaded += new RoutedEventHandler(MainWindow_Loaded);
        }

        private void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            // Create menu item.
            MenuItem exitMenuItem = new MenuItem();
            exitMenuItem.Header = "E_xit";
            exitMenuItem.Click +=new RoutedEventHandler(exitMenuItem_Click);

            // Create contextual menu.
            ContextMenu contextMenu = new ContextMenu();
            contextMenu.Items.Add(exitMenuItem);

            // Attach context-menu to something.
            myButton.ContextMenu = contextMenu; // Assuming there's a button on window named "myButton".
        }

        public void exitMenuItem_Click(object sender, RoutedEventArgs e)
        {
            // This gets executed when user right-clicks button, and presses x down on their keyboard.
            // TODO: Exit logic.
        }
    }
}

<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow">
    <Grid>
        <Button x:Name="myButton" />
    </Grid>
</Window> 
```

当用户右键单击按钮并按下键盘上的“x”时，exitMenuItem_Click 处理程序将被执行。你没有看到这种情况发生吗？

# sql - 将审计日期返回到日期类型 110

> ID：10981937
> 
> 赞同：0
> 
> 时间：2012-06-11T14:19:31.910
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试编写一个查询，它将“审核日期”字段返回为 MM-DD-YYYY。我搜索了几个论坛，但只能找到如何将当前日期转换为该格式。如何以这种格式返回所有日期？

这是我发现转换当前日期的内容：

```
convert(varchar, getdate(), 110) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:22:28.640

请参阅 msdn 文档以了解[Convert 和 Cast](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
SELECT convert(varchar, [audit date], 110) as audit_date
FROM [your table here] 
```

# php - php+mysql：提取每篇文章的所有标签

> ID：10981941
> 
> 赞同：0
> 
> 时间：2012-06-11T14:19:43.133
> 
> 标签：php, mysql

我正在尝试显示最后 20 篇文章及其各自的标签（每篇文章大约有 3-4 个标签）。我有一个文章表和一个标签表，每篇文章都有 3-4 行带有文章 ID 的标签。

我知道该怎么做是：

```
$result = $mysqli->query("SELECT * FROM items  LIMIT 0,24 ");
while ($row = $result->fetch_object()) {
       $result2 = $mysqli->query("SELECT tag FROM tags WHERE item_id = ".$row->id);
               while ($row2 = $result2->fetch_object()) {
                      echo $row2 . '<br>';
                }
 } 
```

当我尝试加入时，我得到每篇文章出现在 3-4 行中。

这似乎真的不干净。有没有更优雅的方法来提取每篇文章的标签？我也愿意听到存储数据的不同方式，我刚刚开始了这个项目......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:26:33.200

你可以试试 SELECT DISTINCT itemID FROM items LIMIT 0,24

每个 itemID 只会返回一个结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:33:22.083

好的做法是将两个表连接起来，但是因为理论上一篇文章可以有很多标签，这会产生一些开销。

所以在这种情况下，你能做的最好的就是；将第一个查询的结果存储在关联数组中，其中键是项目 ID：

```
 $items = array();
    $result = $mysqli->query("SELECT * FROM items  LIMIT 0,24 ");
    while ($row = $result->fetch_object()) {
      $items[$row->item_id] = $row;
      $items[$row->item_id]->tags = array();
    } 
```

在此迭代之后，您执行第二个查询，但在所有项目 ID 上都有一个选择器：

```
 $result2 = $mysqli->query("SELECT item_id, tag FROM tags WHERE item_id IN (".implode(',', array_keys($items)).")");

    while ($row2 = $result2->fetch_object()) {
      $items[$row2->item_id]->tags[] = $row2->tag;
    } 
```

这样，您只需 2 个查询即可填充完整的多维数组。

# android - 是否可以使用异步任务弹出对话框

> ID：10981948
> 
> 赞同：0
> 
> 时间：2012-06-11T14:20:24.517
> 
> 标签：android, android-layout, dialog, android-asynctask

假设我正在运行活动 A。我想编写一个`AsyncTask`将在活动 A 上弹出一个对话框的对话框。正在考虑创建一个可以执行此操作的广播接收器，但对我来说似乎有点倒退。不太熟悉`AsyncTask`

```
Intent topop = this.getIntent();
String str = topop.getStringExtra("key1");
if(str.equals("message"))
    dialog.show(); 
```

另一件事：如何`getIntent()`工作？如果我发送重复的意图？它只会抓住第一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:24:19.373

> 是否可以使用异步任务弹出对话框

是的，很有可能:)

您可以在 in`onPreExecute`或 in 中执行此操作，`onPostExecute`因为这两个方法是在 UI Thread 中调用的。

**永远不要尝试在 doInBackground 方法中弹出对话框，因为此方法在非 ui 线程中运行**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:25:41.713

AsyncTask 被设计为一种便利（帮助类），允许您做一些后台工作并将结果传递给 UI。在 Android 中，您 1) 在收到“应用程序未响应”消息之前，您无法阻塞主（“ui”）线程超过几秒钟；2）您无法从主线程之外操作 UI；因此 asynctask 背后的想法。解释了这一点，并且假设我正确理解了您的问题，您可以在 AsyncTask 中以`onPreExecute`或中的任何一个弹出一个对话框`onPostExecute`。您只能在`doInBackground`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:33:38.977

当然，只需调用`dialog.show()`runOnUiThread()。

```
yourActivity.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        dialog.show();
    }
}); 
```

更多关于 UI 线程：http: [//developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

# javascript - qTip2 如果内容为空则隐藏

> ID：10981951
> 
> 赞同：0
> 
> 时间：2012-06-11T14:20:43.667
> 
> 标签：javascript, jquery, qtip2

我从自定义标签 data-tooltip 加载工具提示的文本。如果数据工具提示不存在，我希望隐藏工具提示。这可能吗？

示例[jsfiddle](http://jsfiddle.net/SAswt/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:24:54.403

试试这个：

```
$(document).ready(function() {
    $('#menu a').qtip({
        content: {
            attr: "data-tooltip"
        }
    });
}); 
```

qtip2 文档说明了使用“text”而不是“attr”：

```
Custom functions that return no valid content will still cause the tooltip to be created! Replace these with an each() loop if this is not the desired behaviour. 
```

如果你看一下“attr”的用法，它会说：

```
If no valid content is found within the elements attribute, and content.text is not defined, no tooltip will be rendered. 
```

# iphone - 在 xcode 4.2 中按下后退按钮时导航栏颜色变为黑色

> ID：10981958
> 
> 赞同：1
> 
> 时间：2012-06-11T14:21:03.413
> 
> 标签：iphone, ios5, xcode4.2

我有两个视图控制器。第一个视图控制器被添加到隐藏导航栏的窗口上。从那里我加载另一个视图控制器，它有一个蓝色的导航栏并且没有隐藏。按下后退按钮时，此导航栏的颜色在隐藏前变为黑色。我应该怎么做才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:02:42.613

要隐藏导航栏，您必须这样做

```
[self.navigationController setNavigationBarHidden:YES]; 
```

应用这个

```
-(void)viewWillAppear:(BOOL)animated
{  

     [self.navigationController setNavigationBarHidden:YES animated:YES];

} 
```

# qt - wkhtmltopdf 修补了 qt？

> ID：10981960
> 
> 赞同：15
> 
> 时间：2012-06-11T14:21:12.240
> 
> 标签：qt, ubuntu-12.04, wkhtmltopdf

我正在尝试将多个 URL 转换为 PDF。但是，当我编译 wkhtmltopdf 或运行`apt-get install wkhtmltopdf`并尝试时，它说：

> 错误：此版本的 wkhtmltopdf 是针对未打补丁的 QT 版本构建的，并且不支持多个输入文档。

如果我使用静态版本，我会收到分段错误错误。

如何针对 QT 的补丁版本构建 wkhtmltopdf，或者除了一一转换和重新组合之外还有其他解决方案吗？

我的操作系统是 Ubuntu 12.04 64 位。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-16T10:58:36.810

首先查看源码

```
 git clone git://gitorious.org/~antialize/qt/antializes-qt.git wkhtmltopdf-qt
 cd wkhtmltopdf-qt
 git checkout 4.8.4
 QTDIR=. ./bin/syncqt 
```

必须配置 Qt，通过查看输出可以找到一组很好的 qt 配置选项

```
cat ../wkhtmltopdf/static_qt_conf_base ../wkhtmltopdf/static_qt_conf_linux | sed -re 's/#.*//'
cd wkhtmltopdf-qt
./configure -nomake tools,examples,demos,docs,translations -opensource -prefix "../wkqt" 
```

并编译并安装了 Qt（这需要一段时间）

```
make -j3 && make install
cd .. 
```

您现在必须在 wkhtmltopdf 文件夹中运行 qmake。

```
cd wkhtmltopdf
../wkqt/bin/qmake 
```

[存档的 Google 代码链接](https://web.archive.org/web/20130727035829/http://code.google.com/p/wkhtmltopdf/wiki/compilation)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-25T13:14:09.163

转到[http://wkhtmltopdf.org/downloads.html](http://wkhtmltopdf.org/downloads.html)并下载适当的构建。它已经用QT修补了。

```
wkhtmltopdf --help
    or
wkhtmltopdf -V 
```

应该显示

```
Description:
  Converts one or more HTML pages into a PDF document, using wkhtmltopdf patched qt. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-12T17:07:16.567

[从wkhtmltopdf.org](https://wkhtmltopdf.org/downloads.html)下载适当的 debian (*.deb) 包。

*刚接触 Ubuntu？要安装，请双击下载的 *.deb 文件。*

# cuda - cudaStreamDestroy() 不同步/阻塞？

> ID：10981961
> 
> 赞同：1
> 
> 时间：2012-06-11T14:21:19.097
> 
> 标签：cuda, gpgpu

我在 Win7 x64 机器上的 Quadro NVS 295 上使用 CUDA 4.2。从 CUDA C Programming Manual 我读到：

*“...通过调用 cudaStreamDestroy() 释放流。*

```
for (int i = 0; i < 2; ++i)
cudaStreamDestroy(stream[i]); 
```

*cudaStreamDestroy() 等待给定流中的所有先前命令完成，然后销毁流并将控制权返回给主机线程。”*

这是真的吗？我写了一个小代码，我或多或少做了以下事情（我只会放伪代码）：

```
//transfer input buffer to device
cudaMemcpyToArrayAsync( ... , stream[1]);

//launch kernel
my_kernel <<<dimGrid, dimBlock, 0, stream[1]>>> (...);

//transfer from device to host
cudaMemcpyAsync(.., cudaMemcpyDeviceToHost, stream[1]);

//Destroy stream. In theory this should block the host until everything on the stream is completed!
ret = cudaStreamDestroy(stream[1]); 
```

在这个例子中，cudaStreamDestroy() 调用似乎立即返回到主机，即不等待 cudaMemcpyAsync() 调用和其他 strem 指令完成。如果我放一个“cudaStreamSynchronize(stream[1]);” 在销毁流之前调用，一切顺利，但速度较慢。那么，我做错了什么？

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:46:43.563

我不确定您正在查看哪个版本的文档，但它与我的不同。我的 CUDA 4.2 文档是这样说的：

> 销毁并清理 stream 指定的异步流。
> 
> 如果调用 cudaStreamDestroy() 时设备仍在流流中工作，则该函数将立即返回，一旦设备完成流中的所有工作，与流相关的资源将自动释放。

而且，根据我的经验，这正是它的作用。驱动程序一直等到流为空并销毁它。但`cudaStreamDestroy` *不会*阻塞调用线程。

您可以通过运行以下示例来确认这一点：

```
#include <stdio.h>
#include <assert.h>
#include <unistd.h>

__global__ void kernel(int * inout, const int N)
{
    int gid = threadIdx.x + blockIdx.x * blockDim.x;
    int gstride = gridDim.x * blockDim.x;

   for (; gid < N; gid+= gstride) inout[gid] *= 2;
}

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
   if (code != cudaSuccess) 
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
}

int main(void)
{
    const int N = 2<<20, sz = N * sizeof(int);

    int * inputs, * outputs, * _inout;

    gpuErrchk( cudaMallocHost((void **)&inputs, sz) );
    gpuErrchk( cudaMallocHost((void **)&outputs, sz) );
    gpuErrchk( cudaMalloc((void **)&_inout, sz) );

    for(int i=0; i<N; i++) { inputs[i] = i; outputs[i] = 0; }

    cudaStream_t stream[2];
    for (int i = 0; i < 2; i++)
        gpuErrchk( cudaStreamCreate(&stream[i]) );

    gpuErrchk( cudaMemcpyAsync(_inout, inputs, sz, cudaMemcpyHostToDevice, stream[1]) );

    kernel<<<128, 128, 0, stream[1]>>>(_inout, N);
    gpuErrchk(cudaPeekAtLastError());

    gpuErrchk( cudaMemcpyAsync(outputs, _inout, sz, cudaMemcpyDeviceToHost, stream[1]) );

    for(int i = 0; i < 2; i++)
        gpuErrchk( cudaStreamDestroy(stream[i]) );

    sleep(1); // remove the sleep and see what happens....

    for(int i = 0; i < N; i++)
        assert( (2 * inputs[i]) == outputs[i] );

    cudaDeviceReset();

    return 0;
} 
```

没有`sleep()`代码会失败，因为 GPU 还没有完成，但是有了它，`assert`就会通过。请注意，这与`sleep`在调用之前使用显式流同步原语略有不同`cudaStreamDestroy`，即使结果相同。如果流在销毁时不为空，则结果检查永远不会通过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T17:46:10.690

CUDA 流只是设备任务的执行队列。所有接受流的函数只将新任务添加到队列中，而不等待执行结果。`cudaStreamDestroy`是一项特殊任务，这意味着需要销毁流，然后完成所有先前的设备任务。话

> “cudaStreamDestroy() 等待给定流中的所有先前命令完成，然后再销毁流并将控制权返回给主机线程。”

意味着在您的设备代码完成之前无法销毁流。

# r - 如何将文本恰好放置在 ggplot2 生成的绘图下方 1 英寸处？

> ID：10981963
> 
> 赞同：4
> 
> 时间：2012-06-11T14:21:27.033
> 
> 标签：r, ggplot2

我需要找到一种方法将文本放置在绘图下方 1 英寸处。即使我更改绘图的边距或使用不同的数据，我也需要该文本位于绘图下方 1 英寸处。我一直在用修改过的 x 和 y 值调用网格文本，但我想要一些能够适应 ggplot 尺寸的东西。另一种方法是使用 grobs（参见[相关帖子](https://stackoverflow.com/questions/10014187/displaying-text-below-the-plot-generated-by-ggplot2)），但这需要根据数据设置 Y 位置。

这是基本代码：

```
library(ggplot2)
test= data.frame(
x = c(1:10 ),
y = c(1:10)
)

qplot(x=x, y=y, data=test)+  
opts(plot.margin = unit(c(1,3,8,1), "lines")) +  
geom_line() 
```

![在此处输入图像描述](../Images/9125c1527a8b4f6db6c3877ec210497f.png)

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T15:04:18.137

如果您知道在下边距中添加了多少行（在本例中为 8 行），那么我认为您只需进行一些`unit`数学运算即可：

```
grid.text("Here",y = unit(8,"lines") - unit(1,"inches")) 
```

# .net - C# WinForms，删除未使用的控件

> ID：10981967
> 
> 赞同：3
> 
> 时间：2012-06-11T14:21:32.743
> 
> 标签：.net, winforms, visual-studio-2008, c#-3.0

我正在开发一个 C# 项目（.net 3.5，visual studio 2008），并有一个简单的问题要问大家：

是否可以删除从未使用过的控件？

我的意思是，是否可以删除已添加到表单但尚未在代码库中的任何位置（设计器之外）引用的控件？

我正在查看的 WinForms 内容有数十个具有通用名称（“textBox1、按钮 4 等）的控件，这些控件不被代码库使用（甚至不被用户看到）。

大多数表单在控件之上都有控件（不是我的决定），并且面板和拆分器有很多分层。这导致了一些控件隐藏在视图中的情况，这些控件永远不会被使用或附加到任何事件处理程序。

我担心这些额外的控件会留下很大的内存占用，或者导致性能问题——我已经看到表单在使用约 10 分钟后变得迟钝。

显然，我不想跳入设计器文件并开始删除对不必要控件的引用。代码库被检入到源代码控制中，但是自从它第一次被检入以来，已经有很多很多很多的提交**。**

我正在考虑迭代以下模式：

*   切割面板
*   将其粘贴到一个新的（空）项目中
*   删除我知道在主项目中未使用的任何控件（任何具有通用名称的控件）
*   将面板粘贴回主项目并重新构建（以检查错误）

有没有（可能）更快的方法来做到这一点？有没有更安全的方法来做到这一点？是否有任何我可以针对代码库运行的第三方工具（可能类似于分析器？）可以告诉我应该删除哪些控件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:44:12.313

@它的坏习惯。保持项目中未使用的控制..

作为技术视图，它在页面加载/母版页加载时会产生问题......它向您显示异常......

注意：永远不要在母版页中保留注释代码......如果服务器不理解发布的代码..它会显示页面但我们无法执行它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T02:47:33.303

您可能不想删除所有未编码的控件。然后，您将删除对 UI 有贡献但从未从设计器外部引用的面板和标签。

我在这里看到两个不同的问题。

一个是你有一个“滞后”的形式。为此，只需运行一个分析器，也许还有一个内存分析器来找到这个问题的根源。然后解决这个问题。工作完成，用户满意。

另一个是如果有额外的控件对用户体验没有任何贡献，例如它们总是隐藏的。这不会给用户带来任何问题，但意味着使用更多控件来维护代码可能会更加困难。我建议手动检查并识别这些并删除它们。任何自动化工具都会出错。

第一个问题可能是更高的优先级。

# php - PHPMailer 不工作：无法发送消息

> ID：10981968
> 
> 赞同：2
> 
> 时间：2012-06-11T14:21:35.140
> 
> 标签：php, smtp, phpmailer, contact-form

我正在尝试使用 PHPMailer 在我的网站上创建一个联系表格。我在设置它时遇到了一些麻烦。我正在尝试使用 G-mail 作为我的 smtp 主机。我想知道是否有人可以帮助解决这个问题？

这是我的邮件代码：

```
<?php
require("class.phpmailer.php");
require("class.smtp.php");

$mail = new PHPMailer();

$mail->IsSMTP();   
$mail->SMTPAuth = true;     // turn on SMTP authentication      
$mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail        
$mail->Host = 'smtp.gmail.com';
$mail->Port = 467;  

$mail->Username = "validmail@gmail.com";  // SMTP username
$mail->Password = "workingpassword"; // SMTP password

$mail->From = "validmail@gmail.com";
$mail->FromName = "Mailer";
$mail->AddAddress("josh@example.net", "Josh Adams");
$mail->AddAddress("ellen@example.com");                  // name is optional
$mail->AddReplyTo("info@example.com", "Information");

$mail->WordWrap = 50;                                 // set word wrap to 50 characters

// $mail->AddAttachment("/var/tmp/file.tar.gz");         // add attachments
   // $mail->AddAttachment("/tmp/image.jpg", "new.jpg");    // optional name
    $mail->IsHTML(true);                                  // set email format to HTML

$mail->Subject = "Here is the subject";
$mail->Body    = "This is the HTML message body <b>in bold!</b>";
$mail->AltBody = "This is the body in plain text for non-HTML mail clients";

if(!$mail->Send())
{
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
}

echo "Message has been sent";
?> 
```

错误信息：

```
Message could not be sent.
Mailer Error: The following From address failed: validmail@gmail.com 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T14:27:18.117

您是否查看并尝试过此 Q 中的信息？

[PHPMailer：SMTP 错误：无法连接到 SMTP 主机](https://stackoverflow.com/questions/3477766/phpmailer-smtp-error-could-not-connect-to-smtp-host)

特别是，这是否提供任何其他信息？

```
$mail->SMTPDebug = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:29:47.093

smtp.gmail.com 要求您使用 SSL 和端口 587 或 465。

查看他们的配置页面： http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:38:40.163

你在 Windows 上运行 PHP 吗？那么这可能会有所帮助：

[http://www.devcha.com/2010/01/php-fsockopen-unable-to-connect-ssl.html](http://www.devcha.com/2010/01/php-fsockopen-unable-to-connect-ssl.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-27T21:25:13.847

得到了同样的错误，问题是我试图从“boy333@in**”帐户假装“girl333@in**”发送电子邮件。我刚变

```
$mail->From = 'girl333@in**' 
```

到我实际上正在连接的用户名。所以我改为：

```
$mail->From = 'boy333@in**' 
```

这个想法是这两个字段具有相同的用户名。

```
$mail->Username   = "boy333";
$mail->From = 'boy333@in**'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-04T15:23:26.413

```
<?php

require_once('class.phpmailer.php');
include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

    $nameField = $_POST['name'];
    $emailField = $_POST['email'];
    $messageField = $_POST['message'];
    $phoneField = $_POST['contactno'];
    $cityField = $_POST['city'];

$mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch

$mail->IsSMTP(); // telling the class to use SMTP

$body .= $nameField;

try {
     //$mail->Host       = "mail.gmail.com"; // SMTP server
      $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
      $mail->SMTPAuth   = true;                  // enable SMTP authentication
      $mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
      $mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
      $mail->Port       = 465;   // set the SMTP port for the GMAIL server
      $mail->SMTPKeepAlive = true;
      $mail->Mailer = "smtp";
      $mail->Username   = "xxxxx@gmail.com";  // GMAIL username
      $mail->Password   = "********";            // GMAIL password
      $mail->AddAddress('sendto@gmail.com', 'abc');
      $mail->SetFrom('xxxxxx@gmail.com', 'def');
      $mail->Subject = 'PHPMailer Test Subject via mail(), advanced';
      $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
      $mail->MsgHTML($body);
      $mail->Send();
      echo "Message Sent OK</p>\n";
      header("location: ../test.html");
} catch (phpmailerException $e) {
      echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
      echo $e->getMessage(); //Boring error messages from anything else!
}

?> 
```

转到谷歌设置并启用“不太安全”的应用程序。它对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-15T16:38:13.657

```
ping smtp.gmail.com 
```

出于某种原因，谷歌将 SMTP 请求重定向到 gmail-smtp-msa.l.google.com

```
PING gmail-smtp-msa.l.google.com (74.125.133.108): 56 data bytes
64 bytes from 74.125.133.108: icmp_seq=0 ttl=43 time=72.636 ms
64 bytes from 74.125.133.108: icmp_seq=1 ttl=43 time=68.841 ms
64 bytes from 74.125.133.108: icmp_seq=2 ttl=43 time=68.500 ms 
```

所以你应该把最终目的地放在你的配置中，因为 PHPMailer 不遵循重定向。您也可以尝试通过将该字段保留为空白来发送没有 SMTPSecure 的电子邮件。

```
$mail->Host = 'gmail-smtp-msa.l.google.com';  
$mail->SMTPAuth = true;                            
$mail->Username = 'email';   
$mail->Password = 'password';    
$mail->SMTPSecure = '';   
$mail->Port = 25; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-17T08:59:11.843

如果您在 gsuite 中的电子邮件检查两个步骤： [https ://support.google.com/a/answer/6260879?hl=en](https://support.google.com/a/answer/6260879?hl=en) [https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)

PHP邮件设置；PHPMailer 版本 5.2.22 检查 class.phpmailer.php，

```
 var $Host = 'smtp.gmail.com';
  var $Port = 465;
  var $Helo ='domain.net';
  public $SMTPSecure = 'ssl';
  public $SMTPAutoTLS = true;
  public $SMTPAuth = true;
  public $SMTPOptions = array();
  public $Username = 'gmail-username';//or domain credentials on google mail
  public $Password = 'gmail-password';
  public $Timeout = 10;
  public $SMTPDebug = true; 
```

邮件发送php

```
<?php
require('PHPMailer/class.phpmailer.php');
require('PHPMailer/class.smtp.php');

$headers = "Content-Type: text/html; charset=UTF-8";    
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
$mail = new PHPMailer();
$mail->IsSMTP();
$mail->CharSet="SET NAMES UTF8";
$mail->SMTPDebug  = 0;
$mail->CharSet="utf8";
$mail->Debugoutput = 'html';
$mail->host       = "smtp.gmail.com";
$mail->port       = 465;
$mail->smtpauth   = true;
$mail->smtpsecure = 'ssl';
$mail->username   = "gmail-username"; //or domain credentials on google mail
$mail->password   = "gmail-password";
$mail->SetFrom('from-email', 'from-name');
$mail->AddAddress('to-address', 'to-address');
$mail->Body = 'your-text'; //emailbody
if(!$mail->Send()) 
        {
            mysql_close();
        echo "<script>alert('Error: " . $mail->ErrorInfo."');</script>";
        } 
        else 
        {
        mysql_close();
        echo "<script>alert('success');</script>";
        }

?> 
```

这对我来说是工作。希望能帮助到你。

# java - 为什么运行进程需要通过 getErrorStream() ？

> ID：10981969
> 
> 赞同：4
> 
> 时间：2012-06-11T14:21:50.783
> 
> 标签：java, process

我正在使用 Process 类执行一个进程。似乎需要通过错误流才能成功执行该过程。为什么要通过流程正确运行所必需的错误流？有什么我做错了吗？

```
Process wkstdin = Runtime.getRuntime().exec(command);
BufferedWriter wkstdin_writer = new BufferedWriter(
            new OutputStreamWriter(wkstdin.getOutputStream()));
//write data 
```

代码的必要部分：

```
BufferedReader input = new BufferedReader(new InputStreamReader(
            wkstdin.getErrorStream()));
String ch;
while ((ch = input.readLine()) != null)
{
  System.out.println(ch);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:28:23.547

当进程写入 stderr 时，输出将转到固定大小的缓冲区。如果缓冲区填满，则进程阻塞，直到缓冲区中有剩余输出空间。因此，如果缓冲区不为空，则进程将挂起。

此外，如果您想了解的过程出现问题，错误流可能包含实际有用的信息。

一些建议：

*   命名字符串 ch 似乎具有误导性，因为 ch 通常用于字符。
*   我喜欢将从 stderr 读取的代码放在专用的工作线程中。这样，读取输入流和错误流之间的切换会自动发生，而无需我允许。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:24:38.167

这实际上取决于您正在执行的目标进程。

很多时候目标进程会**阻塞**直到流被消耗（**目标进程的流缓冲区需要被耗尽**）。因此，如果您不处理错误/输出流，那么目标进程可能会因为它被阻塞而被挂起，以便排出流。

# google-chrome - 用于将焦点从 Web 开发人员工具切换到 Chrome 页面的键盘快捷键

> ID：10981973
> 
> 赞同：66
> 
> 时间：2012-06-11T14:22:08.593
> 
> 标签：google-chrome, google-chrome-devtools

我使用 Vimium for Chrome，它允许我用 `r`密钥刷新。当我使用开发工具时，我失去了页面的焦点，并且必须单击页面才能`r`再次使用（尽管我显然只是用按钮刷新）。有谁知道从开发工具切换回页面的键盘快捷键？我知道您可以使用`cmd [`在开发工具中切换窗格，但找不到切换回页面的方法。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-10-27T14:37:15.507

*   当 Chrome DevTools 获得焦点时，`Shift + F6`会关注页面内容。
*   当 Chrome DevTools 打开并且页面内容被聚焦时，`F6`将聚焦于 Chrome DevTools。

参考： https: [//support.google.com/chrome/answer/157179](https://support.google.com/chrome/answer/157179)

> **谷歌浏览器功能快捷方式**
> 
> `F6`在地址栏、书签栏（如果显示）和页面内容之间向前切换焦点 在地址栏、书签栏（如果显示）和页面内容
> `Shift + F6`之间向后切换焦点

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-03T09:44:33.150

我仍然没有找到从开发工具集中页面的方法，同时让开发工具保持*打开*状态，但是：

*   如果 dev-tools 已打开，请使用`Cmd`++将其`Opt`聚焦`c`
*   `Cmd`使用+ `Opt`+关闭开发工具和焦点页面`i`
*   如果开发工具关闭，直接跳转到控制台：`Cmd`++`Opt``j`
*   `Cmd`使用+`[`和`Cmd`+切换选项卡`]`
*   `Esc`在开发工具中切换控制台

参考：[https ://developers.google.com/chrome-developer-tools/docs/shortcuts](https://developers.google.com/chrome-developer-tools/docs/shortcuts)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-04-26T15:07:46.530

无耻地抄袭[休·李](https://stackoverflow.com/a/30567119/298240)

* * *

1.  按**F6**或**Cmd + L**或**Ctrl + L**并聚焦地址栏
2.  输入**javascript:**并按回车键。

现在您只能使用 j 将焦点移至页面。

* * *

但是 javascript: 太长了，不是吗？然后按照这个。

```
Go to Chrome Settings page
Click "Manage search engines..." in the Search section
Add a new search engine with
    any name e.g. Back to page
    any keyword e.g. j
    URL - javascript: 
```

[![在此处输入图像描述](../Images/a56012f66546971fdd08b00e4e588d2f.png)](https://i.stack.imgur.com/WPOgi.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-02-09T11:40:17.430

> 有谁知道从开发工具切换回页面的键盘快捷键？

`Tab`是您正在寻找的钥匙。按下`Esc`打开控制台后使用它来聚焦页面。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-07T14:43:08.977

OS X 你可以在应用程序窗口之间循环使用：

> 将焦点移到下一个窗口：`⌘</kbd> + ````
> 
> 将焦点移到最后一个窗口：`⌘</kbd> + `⇧</kbd> + `````

如果这不起作用，请检查它是否已启用

**系统偏好设置**>**键盘**>**键盘快捷键**选项卡 >**键盘**部分

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-03T13:09:34.647

Chrome 版本 35.0.1916.114

在网页上，F12。应该显示元素选项卡，如果不使用 ctrl+[ 切换到它。一旦您从页面获得要在 F12 上显示的元素选项卡，如果需要，您可以使用 Esc 进入控制台。

然后，当元素面板聚焦时，在您遇到任何有趣的东西之前的三个选项卡，我得到样式面板，“用户代理样式表”。另外两个选项卡，我在右上角得到一个小点图标，空间来显示它。

在这一点上，我们距离开始 5 个标签。再两个选项卡，我得到“在样式中查找”，再一个选项卡，我得到计算属性面板。然后另一个选项卡到达它下面的过滤器。

现在我们有 9 个标签。

猜猜第十个标签是什么。

或者，如果您的小指累了，则只有 8 个 shift-tabs 向后退。

这就是我们在业务中所说的“可发现性”。

再说一次，这里是 AutoHotkey 脚本：

```
; Match any part of title
SetTitleMatchMode, 2
#IfWinActive - Google Chrome
;#IfWinActive ahk_class Chrome_WidgetWin_1
  +F10::  ; goto html body, use upper left corner mouse click
    CoordMode, Mouse, Screen
    MouseGetPos, xpos, ypos
    CoordMode, Mouse, Relative
    MouseClick, left,10, 95, 1, 0
    CoordMode, Mouse, Screen
    MouseMove, %xpos%, %ypos%, 0
    Return
  F10:: ; from html, goto dev tools (Elements Panel must be default here, with console open ESC), 
        ; might need to adjust tab number to suit your icons to the right of location bar
    Send, ^l
    Send, {tab 7}
    Return
  ^F10:: ; from html, goto dev tools - previously opened console (Elements Panel must be default here, with console open ESC)
    Send, ^l
    Send, {tab 7}
    Send, {tab 13}
    Return
#IfWinActive ;Chrome 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-11T03:04:49.657

无法从开发窗格切换到窗口，但`cmd r`可以完成所需的操作（刷新页面）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-09T11:29:30.613

我也对此感到非常沮丧，但我的问题有点不同。我已经分离了开发工具（在一个单独的窗口中），我总是需要单击才能返回该页面。

我写了一个适合我的小applescript：

```
tell application "Google Chrome"
    activate second window -- if I have dev tools open "second window" is the page
    tell second window to tell active tab
        set the URL to "Javascript:window.focus();"
    end tell
end tell 
```

我将它绑定到使用[Spark](http://www.shadowlab.org/Software/spark)的快捷方式。

因此，每当我在一个分离的开发工具窗口中时，我点击我的快捷方式并将焦点放回页面，我可以再次使用 Vimium。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-29T15:00:19.617

在 Linux 上，从开发工具切换到地址栏`Alt+D`，然后按`Shift+Tab`两次。这将带您回到主页。可惜它在Mac上不起作用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-09-01T13:40:31.760

如果使用 Windows，以下 AHK 脚本将完成这项工作：

```
#IfWinActive ahk_exe chrome.exe
  !a::Send +{F6}
#IfWinActive 
```

验证：

*   专注于 Chrome 开发工具。
*   按`Alt`+ `A`。
*   现在应该关注网页。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-08-15T06:30:14.803

就像我在[这里回答的那样](https://stackoverflow.com/a/68789191/4499781)
**新更新：**在 chrome 版本 92.0.4515.131 中。

*   ***当 DevTools 打开并聚焦时。***

*   按 ( `⌘ Command`+ `⌥ Option`+ `↓ Down`)**两次。**
    第一次按下 - 焦点将转移到 URL。
    第二次按下 - 焦点将转移到页面。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-08-24T15:14:13.070

按 f6 聚焦地址栏，按 return 或 f5 刷新，然后按 tab 聚焦浏览器窗口元素...

这是迂回的，可能在所有情况下都没有帮助，但是如果您正在测试标签索引或其他东西并且不喜欢使用鼠标，这是我想出如何在不关闭控制台的情况下切换回来的唯一方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-06T12:53:42.817

点击 Control + L 聚焦地址栏。然后按 F6 一次聚焦书签栏（如果有的话），再次按 F6 聚焦页面。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-28T03:25:43.153

我的解决方案基于上层答案（适用于 Mac 用户）：

1.  将抽屉设置为控制台
2.  在 DevTools 中聚焦，按下`Esc`以打开抽屉（控制台）
3.  按`Tab`, 切换页面焦点
4.  在页面输入中具有焦点，`Shift + Tab`在 DevTools 中按下可切换焦点

# ios - iOS：如何知道实时音频流是否“播出”？

> ID：10981980
> 
> 赞同：1
> 
> 时间：2012-06-11T14:22:33.120
> 
> 标签：ios, avplayer, live-streaming

我正在开发一个必须流式传输实时音频（来自 m3u 远程文件）的应用程序，并且我正在寻找一种方法来检查实时流是“播出”还是“播出”。音频播放器使用`AVPlayer`.

我做了功课，但没有找到关于那个主题的任何东西......

非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:34:57.873

当你使用 AVPlayer 和 AVPlayerItem 时，像下面这样添加观察者：

```
-(void) addMediaObservers {
    [_playerItem addObserver:self forKeyPath:@"player_buffer_empty" options:0 context:@"player_buffer_empty"];
    [_playerItem addObserver:self forKeyPath:@"item_status" options:0 context:@"item_status"];

    [_player addObserver:self forKeyPath:@"player_status" options:0 context:@"player_status"];
} 
```

请不要忘记在停止流式传输时或在 dealloc 方法中删除这些观察者。

```
- (void)stop
{
    [_playerItem removeObserver:self forKeyPath:@"player_buffer_empty"];
    [_playerItem removeObserver:self forKeyPath:@"item_status"];
    [_player removeObserver:self forKeyPath:@"player_status"];
} 
```

在以下方法中，您将管理音频流：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                  ofObject:(id)object
                    change:(NSDictionary *)change
                   context:(void *)context
{
    if (context && ([context isEqualToString:@"item_status"] || [context isEqualToString:@"player_status"] || [context isEqualToString:@"player_buffer_empty"]))
    {
        [self checkStatus];
    }
}

- (void)checkStatus
{
    AVPlayerItemStatus ps = _playerItem && _playerItem.status ? _playerItem.status : AVPlayerItemStatusUnknown;
    AVPlayerStatus s = _player && _player.status ? _player.status : AVPlayerStatusUnknown;

    BOOL isReady = ps == AVPlayerItemStatusReadyToPlay && s == AVPlayerStatusReadyToPlay;

    if (_isPlaying) {
        if (!_isLoading && _player && _playerItem && _playerItem.playbackBufferEmpty) {
            _isLoading = YES;
            [self performSelector:@selector(unpause) withObject:nil afterDelay:20];
        }
        if (!isReady)
            [self stop];
    } else {
        if (isReady)
            [self play];
    }
} 
```

方法范围内未声明的方法中使用的所有变量都是全局变量。我希望这有帮助！

# uinavigationcontroller - MVVMCross MonoTouch UITabBarController 无法访问导航栏

> ID：10981985
> 
> 赞同：1
> 
> 时间：2012-06-11T14:23:04.813
> 
> 标签：uinavigationcontroller, xamarin.ios, uitabbarcontroller, mvvmcross

我正在尝试创建一个实现 UINavigationBar 的 UITabBarController，这是我在 Xcode 中几分钟内要做的事情。但是，我正在努力将 MVVMCross 与 MonoTouch 一起使用。一些代码如下 -

从第一个 VC 开始（这是为了让用户接受条款和条件，所以一旦接受，就没有选择返回它，因此是 true 标志） -

```
this.RequestNavigate<TabHostViewModel>(true); 
```

我的 tabBar 是这样设置的，效果很好 -

```
ViewControllers = new UIViewController[]
{
    CreateTabFor("Home", "", ViewModel.homeViewModel),
    CreateTabFor("History", "", ViewModel.journeyHistoryViewModel),
    CreateTabFor("Contacts", "", ViewModel.contactsViewModel),
    CreateTabFor("About", "", ViewModel.aboutViewModel),
}; 
```

...ETC。

我尝试在 ViewDidLoad 中设置第一个视图（在本例中为 HomeView）-

```
this.NavigationController.NavigationBar.TintColor = myNavBarColour; 
```

但是，似乎 NavigationController 未定义，除非我在设置 TabBar 时创建自己的 -

```
UIViewController HomeViewController = CreateTabFor("Home", "", ViewModel.homeViewModel);
UINavigationController HomeNavController = new UINavigationController(HomeViewController);

ViewControllers = new UIViewController[]
{
    HomeNavController,
    CreateTabFor("History", "", ViewModel.journeyHistoryViewModel),
    CreateTabFor("Contacts", "", ViewModel.contactsViewModel),
    CreateTabFor("About", "", ViewModel.aboutViewModel),
}; 
```

现在我可以用导航栏做任何我喜欢的事情，但问题是我有两个导航栏，一个在顶部没有标题，另一个是我刚刚在它下面创建的新导航栏。

有任何想法的人吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:40:34.320

我对你的设置并不完全清楚。

但是，我认为您正在寻找的是会议样本的作用

*   [http://slodge.blogspot.co.uk/2012/03/update-on-mvvmcross-sqlbits-conference.html](http://slodge.blogspot.co.uk/2012/03/update-on-mvvmcross-sqlbits-conference.html)
*   [https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CirriousConference](https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CirriousConference)

在此示例中：

*   主视图承载标签栏
*   每个选项卡都有自己的嵌入式 NavigationController
*   每个子视图都托管在其中一个导航控制器中

这段代码是：

```
 private UIViewController CreateTabFor(string title, string imageName, IMvxViewModel viewModel)
    {
        var controller = new UINavigationController();
        controller.NavigationBar.TintColor = UIColor.Black;
        var screen = this.CreateViewControllerFor(viewModel) as UIViewController;
        SetTitleAndTabBarItem(screen, title, imageName);
        controller.PushViewController(screen, false);
        return controller;
    }

    private void SetTitleAndTabBarItem(UIViewController screen, string title, string imageName)
    {
        screen.Title = ViewModel.TextSource.GetText(title);
        screen.TabBarItem = new UITabBarItem(title, UIImage.FromBundle("Images/Tabs/" + imageName + ".png"),
                                             _createdSoFarCount);
        _createdSoFarCount++;
    }

    public override void ViewDidLoad()
    {
        base.ViewDidLoad();

        if (ViewModel == null)
        {
            _needViewDidLoadCall = true;
            return;
        }

        _needViewDidLoadCall = false;

        var viewControllers = new UIViewController[]
                              {
                                CreateTabFor("Welcome", "home", ViewModel.Welcome),
                                CreateTabFor("Sessions", "sessions", ViewModel.Sessions),
                                CreateTabFor("Favorites", "favorites", ViewModel.Favorites),
                                CreateTabFor("Tweets", "twitter", ViewModel.Twitter),
                              };
        ViewControllers = viewControllers;
        CustomizableViewControllers = new UIViewController[] { };
        SelectedViewController = ViewControllers[0];
    } 
```

然后在 Presenter 逻辑（在 AppDelegate 中配置）中截获导航 - [ConferencePresenter](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch/ConferencePresenter.cs)将 ShowView 逻辑推迟到：

```
 public bool ShowView(IMvxTouchView view)
    {
        if (TryShowViewInCurrentTab(view))
            return true;

        return false;
    }

    private bool TryShowViewInCurrentTab(IMvxTouchView view)
    {
        var navigationController = (UINavigationController)this.SelectedViewController;
        navigationController.PushViewController((UIViewController)view, true);
        return true;
    } 
```

* * *

这个逻辑有点复杂，但是这个导航和演示器设计的目的是允许您自定义演示以适应应用程序。这也可以在运行时动态更改 - 例如，您可以选择在 iPad 而不是 iPhone 上使用不同的表示逻辑。

# ajax - IE、Firefox、Opera 没有在 ajax 调用中调用完整的函数

> ID：10981986
> 
> 赞同：0
> 
> 时间：2012-06-11T14:23:09.177
> 
> 标签：ajax, internet-explorer, firefox, coffeescript

在 Rails 3 应用程序中使用 CoffeeScript 我有一个简单的 ajax 调用：

```
$(document).ready ->

fetchProfile = (profile_id) ->

    fetchingProfile = null

    if fetchingProfile
        fetchingProfile.abort()

    fetchingProfile = $.ajax
        type: "GET"
        dataType: "json"
        url: "/api/profiles/" + profile_id
        cache: false
        timeout: 8000

        beforeSend: ->
            $("#loading-div").show()

        complete: ->
            $("#loading-div").hide()
            $("#info-box").show()

        success: (result) ->
            $("span#name").text(result.name)
            $("span#position").text(result.position)
            $("span#number").text("#" + result.number)
            $("span#experience").text(result.experience)
            $("span#nationality").text(result.nationality)
            $("span#height").text(result.height_feet + "' " + result.height_inches + "\"")
            $("span#age").text(result.age)
            $("span#weight").text(result.weight + "lbs")
            $("span#favteam").text(result.favourite_nfl_team)
            $("#photo-wrapper > img}").attr("src", result.photo.player.url)

        error: (result) ->
            if (result.statusText != "abort")
                $("#error").show()

$("a#fancybox-link").click ->
    $("a.profile-link").removeClass("selected")
    $(@).addClass("selected")
    fetchProfile($(@).data("profile"))

$("a#error-link").click (e) ->
    e.preventDefault
    fetchProfile($("a.selected").data("profile"), $("a.selected").data("user")) 
```

此调用在 Chrome 和 Safari 中运行良好，但在上述浏览器中运行良好。

我尝试在完整的函数中发出警报，但在 FF、IE 或 Opera 中根本没有调用该函数。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:15:25.140

几个月后重新审视这个，因为它不是高优先级。

原来这是一个简单的错字。嗬！

这是`}`在这条线上`$("#photo-wrapper > img}").attr("src", result.photo.player.url)`

我猜chrome比firefox更宽容一些。

# core-data - 检索关系核心数据中的值

> ID：10981988
> 
> 赞同：0
> 
> 时间：2012-06-11T14:23:19.823
> 
> 标签：core-data, ios5, xcode4.3

我一直在制作一个使用核心数据的程序。它有两个实体，Medicine 和 Log 药物有一组日志

我有它在第一次添加时向药物添加日志。该日志包含一个日期。我想显示药物的最新日期（可能有多个日志），但不知道如何检索适当的日志。我发现的教程只显示了如何添加而不是检索。

这是我到目前为止所拥有的，它显示了药物名称。我想更改 detailtextlabel 以显示最新日志条目的日期

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSLog(@"%@",object);
    cell.textLabel.text = [object valueForKey:@"name"];
    cell.detailTextLabel.text = [[object valueForKey:@"active"] stringValue];
}

- (NSFetchedResultsController *)fetchedResultsController
    {
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *medicines = [NSEntityDescription entityForName:@"Medicines" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:medicines];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"active" ascending:NO];
    NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor1, sortDescriptor2, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:30:26.513

您提供的设置细节很少，因此很难给您详细的答案。

让我们告诉你有这样的事情：

```
Medicine:
- name: string
- logs: ->> Log

Log:
- medicine: -> Medicine
- date: NSDate 
```

在某些时候，你有一个 NSFetchRequest。它应该如下所示：

```
NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName: @"Log"];
fetchRequest.predicate = [NSPredicate predicateWithFormat: ... 
```

现在魔术开始了。

```
fetchRequest.sortDescriptors = @[
    [NSSortDescriptor sortDescriptorWithKey: @"date" ascending: NO]
]; 
```

结果集中的第一个条目将是最新的。'fetchedLogs'.firstObject.date 将返回最近的日志条目日期。

正如我所说，我不能给你一个更量身定制的答案，因为你的问题不是很详细。

编辑：哦，你在我写这篇文章时添加了一些细节。好吧，我不知道药物和日志条目之间的关系如何。可能接近我上面提出的建议。所以你只需要：

```
[medicine.logs valueForKeyPath: @"@max.date"]; 
```

这将返回日志集中的最高日期。

编辑：哎呀，我的错，valueForKeyPath，不仅仅是valueForKey。

# sql - 计算数据表和临时存储之间的差异

> ID：10981992
> 
> 赞同：0
> 
> 时间：2012-06-11T14:23:23.543
> 
> 标签：sql, sql-server

我正在建立一个用于数据表比较的新系统。这是发生的事情：

我的软件查询第三方数据库，我们无法在其中写入数据或更改结构。结果是一个数据表。此时，此数据表已同步，然后以 XML 格式保存到磁盘。下一次同步，查询再次返回一个 DataTable。然后我们从磁盘加载存储的数据表并开始计算差异：新的、更改的和删除的记录。只有差异记录被同步，存储的 XML 被最新的查询替换。

这工作正常，但对于较大的查询性能很差。因此，我们希望将数据切换并存储在 SQL Server（2008 及更高版本）数据库中。为此，我们正在寻找最佳实践。我们想到的一件事是为记录计算某种哈希值并使用它来检查记录是否已更改。该系统必须对所有类型的 DataTables 通用，因此没有严格的列结构。

SQL Server 是否支持这样的事情？还是在代码中计算哈希并将其存储到 SQL 中更好？我们认为没有必要存储整个记录；新记录将在源表中。对于修改过的记录，使用散列来查找更改就足够了，对于删除的记录，存储记录的主键就足够了，以便能够删除目标系统中的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:11:23.133

SQL Server 允许您对数据库中的 INSERT、UPDATE 和 DELETE 记录的查询定义触发器。SQL Server 总是删除然后重新插入记录而不是更新。它将两个虚拟表传递给触发器过程：“Deleted”和“Inserted”。比较这两者之间的主键将告诉您正在发生哪个操作。

我建议创建一个事务历史表，为通过触发器的每个主键插入一条记录。然后，您稍后将运行同步过程以删除并重新插入同步数据表所需的记录并清除事务历史记录。

# python - python中的字典顺序

> ID：10981995
> 
> 赞同：-3
> 
> 时间：2012-06-11T14:23:49.197
> 
> 标签：python, dictionary, nltk

> **可能重复：**
> [Python 字典，保持键/值与声明的顺序相同](https://stackoverflow.com/questions/1867861/python-dictionary-keep-keys-values-in-same-order-as-declared)

祝大家有美好的一天。我正在使用python（我是新手）开发情绪分析应用程序，但遇到了问题。我正在使用词袋特征提取器，但是在调用词袋函数时遇到了一个主要问题。假设我们有以下文本：“他将成为赢家。” 当我调用具有以下代码的函数时：`dict([(word, True) for word in words])`我得到以下结果：

> {'will': True, 'be': True, 'the': True, 'winner': True, 'He': True}

这没关系，除了单词排序已关闭。如果我使用这样的循环：

```
for i in range(0, len(words)): 
```

输出的顺序没问题，但我不知道如何从中创建字典。那么任何人都可以建议一种方法来获取我的词袋而不会弄乱单词的顺序吗？

感谢您的时间和帮助。

张

# wpf - 防止 Scrollviewer 在打印前滚动？

> ID：10981996
> 
> 赞同：0
> 
> 时间：2012-06-11T14:23:53.777
> 
> 标签：wpf, vb.net, xps

我正在尝试将我的视觉效果打印到多页 xps 中。第一页正在工作，但其他页面为空白。

```
Dim xP As Integer = 0
Dim yP As Integer = 0
xP = Math.Ceiling(WorkFlowCanvas.Width / pageWidth)
yP = Math.Ceiling(WorkFlowCanvas.Height / pageHeight)
Dim collator = writer.CreateVisualsCollator()
collator.BeginBatchWrite()
For y = 1 To yP
    For x = 1 To xP
        Dim o As New Canvas
        o = New CanvasCreator().GenerateCanvas()
        Dim sv As New ScrollViewer
        sv.Height = 1200
        sv.Width = 800
        sv.Content = o
        sv.ScrollToHorizontalOffset(x - 1 * sv.Width)
        sv.ScrollToVerticalOffset(y - 1 * sv.Height)
        sv.HorizontalScrollBarVisibility = ScrollBarVisibility.Disabled
        sv.VerticalScrollBarVisibility = ScrollBarVisibility.Disabled
        collator.Write(sv)
    Next
Next
collator.Write(Me)
collator.EndBatchWrite() 
```

通过在 xaml 中制作视觉效果并打印它，我注意到滚动查看器总是在编写内容之前向上滚动内容（滚动条不移动）。有没有办法“冻结”滚动查看器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:09:27.477

这个解决方案很老套，但它似乎对我有用。

```
 sv.IsEnabled = False
            collator.Write(sv)
            sv.IsEnabled = True 
```

如果您知道我为什么要这样做，您仍然可以回答。

# xml - ASP.NET 4 MVC Web API：将接口序列化为 XML

> ID：10981997
> 
> 赞同：2
> 
> 时间：2012-06-11T14:23:57.807
> 
> 标签：xml, asp.net-mvc-4, asp.net-web-api

我使用 IoC 容器 (autofac) 管理我的对象。因此，我只使用接口而不是对象。

如果我的 web api 返回“文档”类型的对象，则框架可以处理 json 和 xml 序列化。我将 [DataContract]-Attributes 添加到 Document-class，但在接口中这是不可能的。

因此，如果我想返回一个 IDocument 类型的对象，我会得到一个 HTTP 代码 500。ASP.NET 4 MVC Web API 现在是 RC，框架仍然不能将接口成员序列化为 xml 吗？Json序列化没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:59:52.953

Web API 接口上公开的类型必须是 DTO - 数据传输对象。也可以称为 ViewModels。

在与客户端无关的 Web API 上公开模型是一种反模式。

如果您的 API 纯粹用于 .NET 客户端的使用，您可以使用 WCF 或使用[KnownType](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.knowntypeattribute.aspx)。也可以将它们与接口一起使用。