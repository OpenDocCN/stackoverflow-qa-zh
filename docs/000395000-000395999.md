# StackOverflow 问答 000395000-000395999

# javascript - 强制 Javascript 编码风格的工具

> ID：395009
> 
> 赞同：6
> 
> 时间：2008-12-27T13:48:47.133
> 
> 标签：javascript, coding-style

我需要自动检查不同人编写的 javascript 源代码的样式。你知道一个很好的工具吗？与 emacs 集成将是一个加分项。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:16:50.910

请参阅[EditorConfig](http://editorconfig.org)。不过这个工具不限于js；您首先[为您的编辑器安装插件](http://editorconfig.org#download)（有一个 emacs 插件），并创建一个名为 的文件`.editorconfig`，其内容是编码样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T13:56:14.997

谷歌[JavaScript 漂亮的打印](http://www.google.co.uk/search?hl=en&q=javascript+pretty+print&meta=&aq=f&oq=)和[JavaScript lint](http://www.google.co.uk/search?hl=en&q=javascript+lint&meta=)。有很多选项，包括[JavaScript Lint](http://www.javascriptlint.com/)和[JSLint](http://www.jslint.com/)等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T04:59:15.023

我最近更新了[CodePainter 项目](https://github.com/jedhunsaker/codepainter)以与 EditorConfig 紧密合作，因此您可以使用 JavaScript 获得两全其美的效果。

请广而告之。该项目可以使用更多的牵引力，我可以使用更多的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-21T10:52:04.090

还有[JSHint](http://www.jshint.com/)，它有 Rhino、JavaScriptCore、Windows Script Host 和 Ruby 的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-21T08:50:11.237

您可能正在寻找 JS 代码嗅探器：[https ://npmjs.org/package/jscodesniffer#a-standard](https://npmjs.org/package/jscodesniffer#a-standard)

# css - 如何在 IE 和 Firefox 中使 textarea 的宽度相同？

> ID：395019
> 
> 赞同：6
> 
> 时间：2008-12-27T13:57:00.407
> 
> 标签：css, cross-browser

我想要一个 textarea `500px`，这是我用于 textarea 的 CSS：

```
width: 498px;
padding: 0px;
margin: 0px; 
```

我注意到 IE 和 Chrome`1px`默认有一个边框，另一方面 FF 有一个`2px`边框，导致 textarea`502px`不是`500px`，有什么解决方法吗？

请注意，我可以明确指定 texarea 边框宽度，即。border-width: `1px`，但这里的问题是它不能很好地与 IE 配合使用（当边框设置为 时，IE 中的默认 textarea 边框在视觉上看起来不正常`1px`），我可以更改边框颜色但我没有不想这样做，我更喜欢保留默认浏览器样式，我只希望所有浏览器的宽度都相同，而不更改默认样式或为边框设置颜色，这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-27T14:01:40.383

您可以使用文档顶部的重置 CSS 表将所有浏览器的默认样式设置为相同。我喜欢[YUI 自己重置 CSS](http://developer.yahoo.com/yui/reset/)。这应该将所有控件的基本样式设置为在所有浏览器中都是相同的，并且应该允许更可预测的布局。

IMO 如果您让每个浏览器都有自己的样式（甚至可以由用户自定义！），那么您的应用程序就会出现不可预知的样式，并且会在您从未想过会出现的地方出现问题。最好使用重置 CSS，然后相应地设置应用程序的样式。如果您查看 yahoo 的网站（参考），他们还将拥有自己的“基础”CSS，您可以从这些 CSS 开始，这非常酷。

```
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/reset/reset-min.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T14:02:25.793

我们倾向于为 IE 和 FF 创建单独的样式表来绕过它们的“怪癖”。然后可以使用一段简单的代码来确保使用正确的样式表。

```
<!--[if lte IE 6]> works for < than IE 6
<link href="/css/IE6Below.css" media="screen" rel="Stylesheet" type="text/css" />
<![endif]--> 
```

还有适用于 IE 6 的作品

ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T14:04:33.700

我们使用 jQuery 来装饰我们的 html 元素并让它处理跨浏览器问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T17:45:31.460

从本质上讲，您很遗憾浏览器默认值与每个浏览器都不相同，但不想自己直接更改这些属性。

这根本不符合逻辑。

像其他人一样，我建议使用重置样式表（我是 Eric Meyer 的忠实粉丝），然后按照您想要的方式设置边框样式。简单的。清除。没有缺点。

# java - 将对象数组转换为我想要的类的数组

> ID：395030
> 
> 赞同：32
> 
> 时间：2008-12-27T14:09:31.333
> 
> 标签：java, collections, casting, object

只是为了审查，有人可以快速解释是什么阻止了它的工作（编译时）：

```
private HashSet data;

...

public DataObject[] getDataObjects( )
{
    return (DataObject[]) data.toArray();
} 
```

...以及是什么使它成为有效的方式：

```
public DataObject[] getDataObjects( )
{
    return (DataObject[]) data.toArray( new DataObject[ Data.size() ] );
} 
```

我不清楚与铸造（或其他任何东西）一起工作的机制是什么。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-12-27T14:19:42.077

因为`toArray()`创建了一个对象数组，而你不能仅仅通过转换它来实现 `Object[]`。创建一个数组。`DataObject[]``toArray(DataObject[])``DataObject`

是的，这是 Collections 类和泛型被硬塞进 Java 的一个缺点。你会期望它`Collection<E>.toArray()`会返回一个 E 数组，但事实并非如此。

关于调用的有趣之处在于`toArray(DataObject[])`：您不必使“a”数组足够大，因此您可以根据需要调用它`toArray(new DataObject[0])`。

如果您稍后使用它来获取数组长度，那么调用它`toArray(new DateObject[0])`实际上会更好。`.length`如果初始长度很大并且返回了您传递的相同数组对象，那么您可能会`NullPointerException`在稍后遇到

我之前问了一个关于 Java 泛型的问题，并指出了这个非常有用的常见问题解答：[http ://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-27T14:20:29.750

为确保在按预期转换数组时类型安全`DataObject[] dataArray = (DataObject[]) objectArray;`（我认为这就是为什么您必须传递数组实例，`toArray()`然后操作会填充该实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-15T19:41:22.840

在 Java 8 引入流和 Lambda 之后，您也可以执行以下操作：

用于投射一个普通的对象数组

```
Stream.of(dataArray).toArray(DataObject[]::new); 
```

用于投射列表

```
dataList.stream().toArray(DataObject[]::new); 
```

# html - 如何防止深度链接到我网站上的文件

> ID：395034
> 
> 赞同：11
> 
> 时间：2008-12-27T14:15:48.717
> 
> 标签：html, hyperlink, download

我拥有一个网站，其中包含许多可供下载的免费软件。我面临的问题是来自世界各地的人们正在获取文件的直接链接（例如 .zip 文件）并将它们发布在他们的网站和一般论坛上。我得到了大量的带宽，这没关系，但是访问的页面数量很少。有没有一种方法或脚本可以添加到链接中，这样当有人按下来自外国网站的链接时，会打开我网站的页面，然后让他下载文件，以便我获得更多访问。

例如，这是我网站上的地址：

> [http://sy-stu.org/stu/PublicFiles/StdLibrary/Exam.zip](http://sy-stu.org/stu/PublicFiles/StdLibrary/Exam.zip)

当任何人按下它时，它将直接开始下载过程。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-27T15:32:00.607

您的站点由 Apache Web 服务器托管，因此您应该能够在站点的 httpd.conf（或虚拟主机块）中执行以下操作

```
RewriteEngine On
RewriteCond   %{HTTP_REFERER} !^$
RewriteCond   %{HTTP_REFERER} !^http://(www\.)?yourdomain\.com/  [NC]
RewriteRule   ^/PublicFiles/  /page-about-direct-links.html 
```

这基本上是在说：

1.  打开 mod_rewrite 引擎
2.  如果 HTTP Referrer 不为空……</li>
3.  并且不包含我的域名（带或不带“www.”）......</li>
4.  将对 /PublicFiles/ 下的任何内容的任何请求重定向到 /page-about-direct-links.html

关于 mod_rewrite 的更多信息可以在这里找到：[mod_rewrite - Apache HTTP Server](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-27T14:20:23.683

如果您使用的是 PHP，您可以拥有一个将用户链接到下载的脚本，但前提是该脚本`$_SERVER['HTTP_REFERER']`来自您的站点。如果不是，您将重定向到您的网站。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-12-27T15:10:30.837

不要提供指向您正在提供的文件的直接链接。提供一个脚本，在您点击提交按钮后通过脚本发送内容。

进行网络搜索以通过 cgi 发送文件。

这是我在网上找到的一个简洁的链接： [这里](http://www.sitepoint.com/article/file-download-script-perl/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T18:28:00.720

为什么不只是使链接动态和间接，例如：

第 X 页：（静态）

```
<a href="Y">SuperNeat Program</a> 
```

在 Y 页上：（动态生成）

```
Click here to download 
<a href="Z.php?timestamp={timestamp}&counter={counter}&hash={hash}">
SuperNeat Program</a> 
```

并将时间戳替换为自 1970 年以来以毫秒为单位的当前时间，计数器 = 每次下载时递增一次的计数器，哈希 = 连接的 MD5 哈希（时间戳，计数器，秘密盐）其中秘密盐 = 您保密的任何喜欢的代码。

然后在 Z.php 页面上，您只需从查询字符串中的计数器和时间戳重新计算哈希，检查它是否与查询字符串中的哈希匹配，并且时间戳是最近的（例如，从前 30 分钟或 60 分钟或任何）。如果是，则提供有问题的文件。如果不是，则抛出错误消息。这使某人只有很短的时间可以直接链接到您的文件。如果您甚至不想这样做，那么请跟踪 Z.php 查询字符串中收到的计数器值，并且不要多次接受它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-27T15:18:38.060

我根本不是网络专家，但我在考虑以下指针 -

如果您使用的是 asp.net，可以 http 处理程序或在网站级别配置的模块提供帮助（有关网络上的大量信息，我最近查找了一些工作，例如，这里有[一篇文章。](http://www.15seconds.com/Issue/020417.htm)

这个想法是在请求到达目标文件之前拦截请求并将其重定向到您希望显示的页面；例如 - 如果有人希望浏览到您发布的网址（“ [http://sy-stu.org/stu/PublicFiles/StdLibrary/Exam.zip](http://sy-stu.org/stu/PublicFiles/StdLibrary/Exam.zip) ”）拦截此调用，请使用一些查找来查找您的页面希望在那里显示和重定向请求；我猜跟随链接的用户不会太恼火（除非他们已经完成“将目标另存为”，这将导致他们保存一些 HTML 而不是 ZIP）。

但是，我的计划中存在一些“漏洞”——您如何实际提供可在您自己的页面上使用的链接？我相信您可以区分来自您网站的请求和来自其他网站的请求，您可以通过检查请求对象来检查处理程序/模块。

# javascript - 跨站 XMLHttpRequest

> ID：395045
> 
> 赞同：12
> 
> 时间：2008-12-27T14:32:59.663
> 
> 标签：javascript, ajax, xmlhttprequest, xss

我想提供一段 Javascript 代码，它可以在包含它的任何网站上运行，但它总是需要在托管 Javascript 的服务器上获取更多数据（甚至修改数据）。我知道出于显而易见的原因存在安全限制。

考虑托管在 xyz.com 上的 index.html，其中包含以下内容：

```
<script type="text/javascript" src="http://abc.com/some.js"></script> 
```

some.js 能否使用 XMLHttpRequest 将数据发布到 abc.com？换句话说，abc.com 是否因为我们从那里加载了 Javascript 而被隐式信任？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-27T17:19:25.133

> some.js 能否使用 XMLHttpRequest 将数据发布到 abc.com？换句话说，abc.com 是否因为我们从那里加载了 Javascript 而被隐式信任？

不，因为脚本被加载到一个单独的域中，所以它无法访问......

如果您信任数据源，那么 JSONP 可能是更好的选择。JSONP 涉及将新的 SCRIPT 元素动态添加到页面，并将 SRC 设置为另一个域，并将回调设置为查询字符串中的参数。例如：

```
function getJSON(URL,success){
    var ud = 'json'+(Math.random()*100).toString().replace(/\./g,'');
    window[ud]= function(o){
        success&&success(o);
    };
    document.getElementsByTagName('body')[0].appendChild((function(){
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = URL.replace('callback=?','callback='+ud);
        return s;
    })());
}

getJSON('http://YOUR-DOMAIN.com/script.php?dataName=john&dataAge=99&callback=?',function(data){
    var success = data.flag === 'successful';
    if(success) {
        alert('The POST to abc.com WORKED SUCCESSFULLY');
    }
}); 
```

因此，您需要托管自己的脚本，该脚本可以使用 PHP/CURL 发布到 abc.com 域，然后以 JSONP 格式输出响应：

我不太擅长 PHP，但可能是这样的：

```
<?php
    /* Grab the variables */
    $postURL = $_GET['posturl'];
    $postData['name'] = $_GET['dataName'];
    $postData['age'] = $_GET['dataAge'];

    /* Here, POST to abc.com */
    /* MORE INFO: http://uk3.php.net/curl & http://www.askapache.com/htaccess/sending-post-form-data-with-php-curl.html */

    /* Fake data (just for this example:) */
    $postResponse = 'blahblahblah';
    $postSuccess = TRUE;

    /* Once you've done that, you can output a JSONP response */
    /* Remember JSON format == 'JavaScript Object Notation' - e.g. {'foo':{'bar':'foo'}} */
    echo $_GET['callback'] . '({';
    echo "'flag':' . $postSuccess . ',";
    echo "'response':' . $postResponse . '})";

?> 
```

因此，您可以控制的服务器将充当客户端和 abc.com 之间的媒介，您将以 JSON 格式将响应发送回客户端，以便 JavaScript 可以理解和使用它......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-27T14:37:38.703

对您来说最简单的选择是通过加载 javascript 的服务器代理调用。所以 some.js 会调用托管服务器，该服务器会将请求转发到 abc.com。

当然，如果这不是一个选项，因为你不控制主机，有一些选项，但它似乎陷入了跨浏览器的困难： [http ://ajaxian.com/archives/how-to-make-xmlhttprequest-calls -到您的域中的另一个服务器](http://ajaxian.com/archives/how-to-make-xmlhttprequest-calls-to-another-server-in-your-domain)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-05T21:53:01.443

你可以使用[easyXSS](http://easyxss.net)。它是一个库，使您能够传递数据并跨域边界调用方法。它非常简单，您应该能够使用它。code.google.com 网站上有很多例子

# javascript - 如果 innerHTML 是邪恶的，那么更改链接文本的更好方法是什么？

> ID：395051
> 
> 赞同：13
> 
> 时间：2008-12-27T14:40:35.110
> 
> 标签：javascript, dom, innerhtml

我知道 innerHTML 被认为是邪恶的，但我认为这是更改链接文本的最简单方法。例如：

```
<a id="mylink" href="">click me</a> 
```

在 JS 中，您可以使用以下方式更改文本：

```
document.getElementById("mylink").innerHTML = new_text; 
```

在原型/jQuery 中：

```
$("mylink").innerHTML = new_text; 
```

工作正常。否则，您必须先替换所有子节点，然后添加一个文本节点。何必？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-27T15:06:52.747

怎么样

```
document.getElementById('mylink').firstChild.nodeValue = new_text; 
```

这不会受到 PEZ 描述的问题的影响。

关于 Triptych 的评论和 bobince 的回复，这里有另一个解决方案：

```
var oldLink = document.getElementById('mylink'),
    newLink = oldLink.cloneNode(false);
newLink.appendChild(document.createTextNode(new_text));
oldLink.parentNode.replaceChild(newLink, oldLink); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-27T14:54:07.547

innerHTML 一点也不邪恶。只要你知道后果，使用它没有任何问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-27T16:09:37.830

对于支持 DOM3 的浏览器，您可以使用[textContent](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Node3-textContent)：

```
document.getElementById("mylink").textContent = new_text; 
```

这适用于 FF（在 3 中测试）、Opera（在 9.6 中测试）和 Chrome（在 1 中测试），但不适用于 MSIE7（尚未在 MSIE8 中测试）

**添加示例**

它不漂亮，但应该可以跨浏览器工作（在 FF3、Opera9.6、Crome1 和 MSIE7 中的 win 中测试）

```
function replaceTextContent(element,text) {
    if (typeof element ==="string") element = document.getElementById(element);
    if (!element||element.nodeType!==1) return;
    if ("textContent" in element) {
        element.textContent = text; //Standard, DOM3

    } else if ("innerText" in element) {
        element.innerText = text; //Proprietary, Micosoft
    } else {
        //Older standard, even supported by Microsoft
        while (element.childNodes.length) element.removeChild(element.lastChild);
        element.appendChild(document.createTextNode(text));
    }
} 
```

（更新：增加了对微软专有的 innerText 的支持）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-27T14:46:48.187

innerHTML 有副作用（比如断开现有的 DOM 节点并重新呈现可能很繁重）。人们需要意识到这些影响。任何维护代码的人都需要注意使用了innerHTML，否则他们可能会遇到奇怪的错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-27T15:04:08.370

直到一年前，innerHTML 还比通过 DOM 操作事件快得多。我自己还没有检查过所有主要浏览器的最新版本。

例如 Firefox 就不能很好地处理这个问题。它有时只更新屏幕以反映更改。如果您在更改后查询 DOM，它仍然具有旧值。

示例：尝试通过 innerHTML 更改文本区域的值，然后发布表单。它会默默地发布 textarea 之前的值。想想这样的事情可能会造成的灾难性后果。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-27T15:03:19.290

也许只是一些标准的瘾君子拒绝了 innerHTML 的想法。

innerHTML 是实用标准，因为所有浏览器都实现了它，尽管它不是 W3C 标准。

就用它吧。它就像一个魅力。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-27T15:04:36.840

另一种选择是拥有两个 div 并使用 .hide() 和 .show()。

# python - 模板标签不刷新

> ID：395053
> 
> 赞同：1
> 
> 时间：2008-12-27T14:43:10.690
> 
> 标签：python, django, django-templates, templatetags

我的应用程序中有两个模板标签，其中包含在数据库中显示条目的表单。当我更改数据或向 db 添加新条目时，表单会显示旧数据。在管理面板中一切都是正确的（更新）。当我重新启动服务器时（我的意思是`manage.py runserver`）表单显示更新的数据库条目。如何使表单显示更新的数据？

关于
克里斯

**编辑：**
文件`templatetags/oceny_tags.py`：：

```
from django import template
from oceny.formularze import StudentFormularz, PrzeniesStudentaFormularz

def dodajStudenta(req):
    formularz = StudentFormularz(req)
    return {'formularz': formularz}

def przeniesStudenta(req):
    formularz = PrzeniesStudentaFormularz(req)
    return {'formularz': formularz}

register = template.Library()
register.inclusion_tag('oceny/formularz_studenta.html', takes_context = False)(dodajStudenta)
register.inclusion_tag('oceny/formularz_przenies_studenta.html', takes_context = False)(przeniesStudenta) 
```

文件：`views.py`视图负责处理表单：

```
def zarzadzajStudentami(request):
    formularze = ['dodaj_studenta', 'przenies_studenta']
    req = {}
    for e in formularze:
        req[e] = None
    if request.POST:
        req[request.POST['formularz']] = request.POST
        if request.POST['formularz'] == 'dodaj_studenta':
            formularz = StudentFormularz(request.POST)
            if formularz.is_valid():
                formularz.save()
                return HttpResponseRedirect(reverse('zarzadzaj_studentami'))
        elif request.POST['formularz'] == 'przenies_studenta':
            formularz = PrzeniesStudentaFormularz(request.POST)
            if formularz.is_valid():
                student = Student.objects.get(id = request.POST['student'])
                grupa = Grupa.objects.get(id = request.POST['grupa'])
                student.grupa = grupa
                student.save()
                return HttpResponseRedirect(reverse('zarzadzaj_studentami'))
    return render_to_response('oceny/zarzadzaj_studentami.html', {'req': req}, context_instance = RequestContext(request)) 
```

我意识到在某些情况下代码可能很蹩脚。我将不胜感激任何其他提示如何更好地写东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-18T09:06:38.287

我的代表太低，无法评论，但`takes_context`默认为 False，使您的分配变得多余。另外，但现在我猜，但这可能与您的问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-29T06:10:09.023

寻找“CACHE_BACKEND= ????” 在您的 settings.py 文件中。该值将根据您使用的缓存机制而改变。将此注释掉并重新启动服务器。如果您的值现在正确显示，那么这是一个缓存问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-12-27T15:24:04.087

你在使用某种缓存系统吗？可能是这样。

# java - 将业务与表示逻辑分开的最佳方法？

> ID：395056
> 
> 赞同：5
> 
> 时间：2008-12-27T14:49:08.727
> 
> 标签：java, business-logic-layer, presentation-layer

我想创建一个可以在本地和在线上运行的游戏。

我的第一个想法是创建一个接口，该接口将包含 GUI 业务逻辑所需的所有方法，然后具有网络实现和本地实现。

这适用于请求-响应消息。但是服务器发送的消息呢，我必须更新一些 GUI 组件（即 JLabels）？

我的第一个解决方案是实现监听器，实现中的每个更改都会触发一个事件。GUI 将适当地注册和更改其组件。但是，在业务逻辑中调用触发事件看起来有点不对劲。

我在正确的轨道上吗？因为我觉得我不是。有什么建议么？

谢谢你。

注意：客户端是一个简单的 Java Swing GUI。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-27T16:18:03.837

您所描述的将有助于保持模型独立于演示问题的目标，这是一件好事。这也将在模型的设计、开发和维护期间为您提供帮助，因为您可以在模型中的某些更改应该触发特定事件的基础上编写单元测试，而不必担心屏幕上可能会是什么样子。

而且，当然，它使您可以为不同的环境使用不同的 GUI 设计。

关键是事件应该是关于模型状态的变化，而**不是**关于表示级别的预期动作/表示。让表示层处理是否/如何响应模型事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T17:21:08.280

我承认我从事 Web 开发，所以我对 Swing 没有太多经验。

但我一直认为我的处理方式是将应用程序分解为 /view、/model 和 /controller 包。这些关系将是单向的：/controller 将知道 /model 和 /view，但两者都不会从 /controller 或彼此导入任何类。

/view 层组件永远不会是 JFrame；它们总是 JPanel 或其他可以根据需要组合成 JFrame 的合适容器。每个都会引用 Listener 接口，在构造函数中初始化，并且会遵循这些接口进行事件处理：

```
public class ExamplePanel extends JPanel implements ActionListener
{
    private JButton button;
    private ActionListener buttonListener;

    public ExamplePanel(ActionListener buttonListener)
    {    
        this.button = new JButton("Do Something");
        this.buttonListener = buttonListener;
        this.button.addListener(this.buttonListener);
    }

    public void actionPerformed(ActionEvent e)
    {
        this.buttonListener.actionPerformed(e);
    }
} 
```

这种安排与依赖注入配合得很好，因为现在控制器可以选择使用该侦听器接口的本地或远程实现，以完全不影响客户端的方式更改行为。

我承认我从来没有一直遵循它。

Spring 的人有一个丰富的 Swing 客户端模块，但它似乎已经失宠了。看起来他们已经决定 BlazeDS 方向是富客户的更好选择。但也许你可以从他们的方法中收集到一些设计理念。

# php - PHP set_inlude_path 并包含最佳实践

> ID：395057
> 
> 赞同：0
> 
> 时间：2008-12-27T14:49:14.093
> 
> 标签：php

哪里会

```
set_include_path("../../"); 
```

指向？

我正在尝试在标准 XAMPP 服务器上运行一些 PHP 代码。并将我的东西放入 htdocs 文件夹中。包含指向相对路径，但它不起作用。是否有包含的最佳实践？代码必须在多个开发人员的机器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-27T15:50:29.773

相对路径应该可以正常工作（警告：Windows 上的 apache，据我所知，不要遵循 simlink 或该操作系统上调用的任何内容）。

也许你应该使用语法（为了避免不同的php版本出现问题）

```
ini_set('include_path', 'yourdir'); 
```

并测试返回值是否一切正常。

转向最佳实践：对我来说，将配置指令设置到脚本中，尤其是在项目范围内，是错误的，或者至少是危险的。

更好的做法是将指令放入包含~~php 文件~~项目的目录中的 .htaccess 文件中。

更好的是，它更快，将指令放入 apache 配置的相应虚拟主机部分。但是，对于开发而言，.htaccess 更灵活，因此更可取。

它应该是这样的： php_value include_path ".:../..:<your path collection>"

这样做可以让您共享 php 配置，而无需在您编写的每个 php 文件中摆弄 ini_set 指令。

更不用说如果你有一个特殊的文件需要自定义的 include_path，你可以在文件中设置它，这对每个人来说都是一目了然的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T15:14:08.160

从文件（或包含它的文件）运行的位置向下的两个目录。

至于最佳实践，我只能给你两个建议。

1.  使用相对路径。
2.  如果相对路径给您带来麻烦，请使用绝对路径作为单个静态变量，开发人员只更改该变量。

# c++ - extern 关键字和未解析的外部符号

> ID：395060
> 
> 赞同：2
> 
> 时间：2008-12-27T14:52:03.213
> 
> 标签：c++, symbols, extern

我用油漆画了一个小图来解释我的问题：

`<img>`但是当我在发布后使​​用标签时似乎没有出现？

图形：

[![http://i44.tinypic.com/103gcbk.jpg](https://i.stack.imgur.com/DkI1T.jpg)](https://i.stack.imgur.com/DkI1T.jpg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-27T16:10:35.443

问题是 db 的声明范围。编码：

```
extern Database db; 
```

真正的意思是“db*在某个地方被全局*声明，只是不在这里”。然后代码不会继续并实际在全局范围内声明它，而是在 main() 中本地声明，这在 main() 之外是不可见的。代码应如下所示，以解决您的链接问题：

## 文件1.c

```
Database db;
int main ()
{
  ...
} 
```

## 文件2.c

```
extern Database db;
void some_function ()
{
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-27T14:55:40.727

您需要在 main() 之外实例化数据库，否则您只需声明一个隐藏全局变量的局部变量。

游戏服务器.cpp：

```
#include GameSocket.h
Database db(1, 2, 3);
int main() {
   //whatever
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T14:58:53.620

extern 被应用于所有 CPP（和生成的 OBJ）文件，因此它们都没有真正实例化数据库。

这是解决这个问题的一种方法。在 Database.h 中，将其更改`extern Database db`为：

```
#ifdef INSTANTIATE_DB
Database db;
#else
extern Database db;
#endif 
```

然后在您的一个 CPP 文件中（如果有的话，Database.cpp 会很好）`#define INSTANTIATE_DB`在`#include "Database.h"`.

# php - 使用 knockd 做事 | 通过 PHP 发送 TCP/UPD 请求

> ID：395065
> 
> 赞同：2
> 
> 时间：2008-12-27T14:53:31.027
> 
> 标签：php, unix, knockd

我想知道，如果不登录 ssh 就可以重新启动 apache ，是否敲了[http://www.zeroflux.org/cgi-bin/cvstrac.cgi/knock/wiki 。](http://www.zeroflux.org/cgi-bin/cvstrac.cgi/knock/wiki)但是我的编程问题是是否有办法通过 PHP 发送 tcp/udp 包，这样我就可以通过 webclient 敲门。

我知道这不是最安全的方法，但我只想做一些事情，比如更新 svn，重新启动 apache 而没有任何密码，就像使用 ssh 那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T03:26:35.610

说真的，你*不想*做你想做的事。

您应该考虑通过某种安全协议（如 SSH）调用远程服务器。在客户端，有一个执行远程 SSH 命令的小型 PHP 实用程序/脚本（最好使用仅基于密钥文件的身份验证机制）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T01:18:50.827

您可以使用 fsockopen() 函数...但是从安全角度来看，您正在做的事情（以及您做这件事的方式）是非常危险的......正如人们所说的那样，ssh 就是这样:)

如果您真的想通过使用远程访问（非 ssh）重新启动 apache 服务器，您可以创建一个小型 php-daemon，它只监视特定文件（例如：/tmp/restart.apache）以及该文件何时出现运行 exec("/etc/init.d/apache restart") （或任何适用于您的发行版的命令）。这个守护进程应该以root身份运行......问题是整个安全事情都取决于你，你必须确保这不能被任意执行......

您的 portknock ideea... 一个简单的端口扫描程序可能会错误地重新启动您的 apache:) portknock 建议与 ssh auth 一起使用，而不是直接与 apache 一起使用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T15:59:00.833

为什么没有一个调用“svn update”的 PHP 脚本？只要文件可由 Apache 运行的用户写入，它就可以很好地工作。只需点击该 URL 即可更新网站

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T20:14:25.980

对于 SVN，你有整个 PHP api，尝试在 php.net 上搜索 SVN

# sql - 递归查询帮助

> ID：395075
> 
> 赞同：1
> 
> 时间：2008-12-27T15:09:28.827
> 
> 标签：sql, sql-server, common-table-expression, recursive-query

我有以下问题，我无法成功完成。您的帮助将不胜感激。我正在使用 SQL 2005，并尝试使用 CTE 执行此操作。

表有以下 2 列

```
DocNum    DocEntry
1              234
2              324
2              746
3              876
3              764
4              100
4              387 
```

预期结果如下

```
1                 234
2                 324, 746
3                 876, 764
4                 100, 387 
```

谢谢拉胡尔耆那教

* * *

从评论中转录的进一步解释：

我正在使用如下查询：

```
WITH ABC (DocNum, DocEntry) AS
   (SELECT DocNum, Cast(DocEntry As VARCHAR(8000))
        FROM Temp5
        WHERE DocNum = 1
    UNION ALL
    SELECT a.DocNum, A.DocEntry + ', ' + B.DocEntry
        FROM ABC B INNER JOIN Temp5 A ON B.DocNum +1= A.DocNum
         WHERE A.DOCNUM > 1)
SELECT * FROM ABC; 
```

上述查询的结果如下

```
1 234
2 234, 324
2 234, 746
3 234, 746, 876
3 234, 746, 764 
```

我不希望这些数字像问题所示那样重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T15:28:14.373

这是一篇描述执行此操作的方法的文章：

[将多行转换为 CSV 字符串](http://www.sqlteam.com/article/converting-multiple-rows-into-a-csv-string-set-based-method)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T16:25:42.697

我不认为 CTE 是您问题的完整答案。您所追求的是一个 PIVOT 查询，其中 PIVOT 中的列数在查询时是未知的。这个问题和答案看起来像你所追求的：

[sql 2005 中的 PIVOT](https://stackoverflow.com/questions/198716/pivot-in-sql-2005)

[sql 2005 中的 PIVOT](https://stackoverflow.com/questions/198716/pivot-in-sql-2005#199763)

从上述答案的示例中，这是为您的表修改的 SQL（我将其命名为 'q395075' - 所以您只需用您的表名替换）：

```
DECLARE @sql AS varchar(max)
DECLARE @pivot_list AS varchar(max) -- Leave NULL for COALESCE technique
DECLARE @select_list AS varchar(max) -- Leave NULL for COALESCE technique

SELECT @pivot_list = COALESCE(@pivot_list + ', ', '') + '[' + CONVERT(varchar, PIVOT_CODE) + ']'
        ,@select_list = COALESCE(@select_list + ', ', '') + '[' + CONVERT(varchar, PIVOT_CODE) + '] AS [col_' + CONVERT(varchar, PIVOT_CODE) + ']'
FROM (
    SELECT DISTINCT PIVOT_CODE
    FROM (
        SELECT DocNum, DocEntry, ROW_NUMBER() OVER (PARTITION BY DocNum ORDER BY DocEntry) AS PIVOT_CODE
        FROM q395075
    ) AS rows
) AS PIVOT_CODES

SET @sql = '
;WITH p AS (
    SELECT DocNum, DocEntry, ROW_NUMBER() OVER (PARTITION BY DocNum ORDER BY DocEntry) AS PIVOT_CODE
    FROM q395075
)
SELECT DocNum, ' + @select_list + '
FROM p
PIVOT (
    MIN(DocEntry)
    FOR PIVOT_CODE IN (
        ' + @pivot_list + '
    )
) AS pvt
'

PRINT @sql

EXEC (@sql) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T21:06:47.077

```
SELECT 
    DocNum,
    STUFF((SELECT ', ' + CAST(DocEntry AS VARCHAR(MAX)) AS [text()]
        FROM Temp5 b
        WHERE a.DocNum = b.DocNum
        FOR XML PATH('')), 1, 2, '') AS DocEntry
FROM Temp5 a
GROUP BY DocNum 
```

Itzik Ben-Gan 在他的优秀著作[T-SQL QUERYING](https://rads.stackoverflow.com/amzn/click/com/0735623139)中为聚合字符串连接提供了一些专门的解决方案。该查询为自己尖叫。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T22:57:55.517

```
create table #a(DocNum int,  DocEntry int)

insert into #a
select 1,234 union all
select 2,324 union all
select 2,746 union all
select 3,876 union all
select 3,764 union all
select 4,100 union all
select 4,387 

select
    DocNum,
    stuff((
        select ',' + convert(varchar(25),t.DocEntry)
        from #a t
        where t.DocNum = t1.DocNum
        order by t.DocEntry
        for xml path('')
    ),1,1,'') as name_csv
from #a t1
group by DocNum
; 
```

## 输出

DocNum name_sv

```
 1    234    
   2    324,746    
   3    764,876    
   4    100,387 
```

# asp.net - 如何强制 asp:table 内的 asp:label 始终具有相同的宽度？

> ID：395082
> 
> 赞同：0
> 
> 时间：2008-12-27T15:14:32.683
> 
> 标签：asp.net, css

我并没有真正*感受到*CSS，而且它并不总是像我想象的那样工作。

这是以下情况之一：

我有一个简单的（2 行，2 列）asp:table 动态生成。在右栏中，它包含一个组合框`(cell (0, 1))`和一个标签`(cell (1,1))`。当我更改组合框的选择时，标签中的文本也会更改。如果单元格太长，它会重新调整表格的大小。我希望文本成行，以便适合单元格的宽度。

我不知道它是否是某个标签的属性可以做到这一点，还是我应该在标签或单元格的 CSS 样式中指定它？我尝试明确设置表格的宽度，CSS 类中单元格的宽度，但没有任何效果，我觉得自己就像迷宫中的盲人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T15:29:12.873

`<label>`如果需要，可以将元素设置为`display: block;`然后通过 CSS 给定固定宽度。这可能是您的最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T18:25:06.090

除非您将 white-space 设置为 nowrap，否则您的文本应该在空格处换行。绳子是牢不可破的吗？

带有 URL 和/或标记的最小示例可能会有所帮助....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T15:26:54.390

首先，我不得不说（作为经验的苦涩之声），如果你不想真正通过 CSS 并学习它来真正理解它，这只是你痛苦的冰山一角'有网络开发经验。

但更重要的是，一个快速而肮脏的解决方案是将标签从 asp:Label 更改为 asp:Literal。这将导致它直接输出到您的 HTML 页面。然后，您应该能够在表格中明确设置单元格的宽度，并且您在 asp:Literal 中的文本很可能会换行（当然，取决于您使用的样式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T17:47:37.430

我发现您必须在标签上专门放置 style="white-space: normal" 才能使其正常工作。

# javascript - 如何以编程方式捕获具有强制更新的网页

> ID：395088
> 
> 赞同：2
> 
> 时间：2008-12-27T15:25:16.250
> 
> 标签：javascript, c++, html

我需要捕获一个网站并正在寻找一个合适的库或程序来执行此操作。该网站使用 Java Script 并将更新推送到页面，我需要捕获这些以及页面本身。我正在使用 curl 来捕获页面本身，但我不知道如何捕获更新。如果可以选择，我会使用 C++。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T16:09:05.990

如果您仍然想使用 c++ 和 curl 尝试弄清楚页面中的 javascript 做了什么 - 我假设它只是使用计时器来发送 AJAX 请求并更新页面（尽管它可能更复杂）。使用带有 firebug 的 firefox 之类的工具（“网络”间谍是你想要的）来查看它是什么类型的请求 - 你会得到：

*   请求的 url
*   参数
*   返回的内容（可以是 html、text、xml 或 json）

运气好的话，您将有足够的能力使用 curl 来模仿 c++ 中的行为。如果您无法从收集的数据中获取任何信息，则必须浏览 javascript 并尝试弄清楚它在做什么（但大多数时候页面更新非常简单）。

执行此操作的简单方法是在浏览器中执行此操作，例如。作为一个 firefox 插件（用 javascript 编写） - 如果除了宠物项目以外的任何东西都需要它，这可能有点“不优雅”，但它应该很容易做到：

*   监视 DOM 树的更新（html DOM level 2 有各种“突变”事件，但我从未使用过它们，所以我不太了解它们，或者它们是否“工作”/受支持 - 请参阅[DOM 突变事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent)）。这种东西甚至有可能在[greasemonkey](http://www.greasespot.net/)中工作，这意味着你不必制作一个完整的firefox插件——例如。[在呈现页面后对页面进行后处理](http://diveintogreasemonkey.org/patterns/onload.html)应该可以帮助您开始（您不想跟踪“加载”，而是跟踪“DOMSubtreeModified”之类的内容）。如果突变事件不起作用，您始终可以使用计时器并比较 html 内容。
*   或者像萤火虫那样做并监控网络请求并对结果做一些事情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T16:42:20.743

安装 Firefox 和[GreaseMonkey](http://www.greasespot.net/)。让 GM 脚本在适当的地方添加 DOM 事件以跟踪修改。[然后，您可以使用 XMLHttpRequest 将信息发送到服务器，或者使用 XPCOM文件 IO](https://developer.mozilla.org/index.php?title=En/Code_snippets/File_I%2F%2FO)操作将它们写入本地文件。

有了这个，你可以在十几行中做你想做的事，几乎不需要逆向工程，而其他人建议的（屏幕抓取）将需要数千行代码用于 JavaScript 繁重的网站 IMO。

附录：这是/不是/ C++ 的工作。无论如何，如果你用 C++ 来做，你最终将不得不对 JS 进行逆向工程，所以你不妨先学习足够的 JS 来使用 GreaseMonkey。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T15:38:27.597

看看[蜘蛛猴](http://www.mozilla.org/js/spidermonkey/)。

我实际上并没有在愤怒中使用它，所以不确定它是否会做你想做的事。我发现它可以与用 Python 编写的[Scrapy](http://scrapy.org/)网络抓取和屏幕抓取框架一起使用。

或者，您能否对 JavaScript 推送更新的执行方式进行逆向工程，并直接访问这些内容。听起来您需要存储这些更新和/或将它们应用到基本 HTML 页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T18:24:07.763

如果您正在寻找静态网页抓取[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/documentation.html) (Python) 是最好和最简单的方法之一。

如果您要抓取一些 javascript 渲染的代码或其他内容，则在渲染页面之前无法完成，因此仅使用 BeautifulSoup 是不可能的。您将不得不使用像[Crowbar - Similie](http://simile.mit.edu/wiki/Crowbar)（使用 XULRunner）这样的无头浏览器，它在无头浏览器上呈现 javascript 内容，并且该呈现内容的输出可以用作 BeautifulSoup 刮板的输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-27T16:02:07.300

问题是您的网页正在更新，因为脚本代码正在页面上执行。使用 curl 不会让你在那里..

不确定您的确切需求..但是您可以编写一个 javascript 注入器书签，向任何网页添加一个按钮，并让您随时手动获取 DOM 或 body html...这就是有多少剪辑标记应用程序可以工作.

如果您需要在更新发生时自动捕获更新的东西——比如电影......那么你将需要更多参与的东西......

# api - 创建 API 对您的服务有什么好处？

> ID：395094
> 
> 赞同：4
> 
> 时间：2008-12-27T15:32:54.707
> 
> 标签：api, twitter

如果我是一个网络服务，比如 Twitter，那么创建一个 API 供人们访问我的数据对我有什么帮助？我可以看到他们正在将您的服务扩展到您可能没有资源扩展的区域（以扩展您自己的服务的方式），但是与访问您的数据相关的所有带宽和基础设施成本是否值得？

所有这些小型 Twitter 应用程序都无法为 Twitter 带来收入。我会假设相反。

编辑：

答案 1：有时间/有钱的人可以让你的服务更受欢迎。您还可以限制 API 的使用（就像 Google 所做的那样）。

答案 2：为您的服务增加价值比克隆您的服务更容易。这个额外的吸引力可以使您的网站成败。您甚至可以收取访问费用。

答案 3：当 API 扩展了已经运行的业务模型时，它是好的。（不要成为推特。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-27T15:42:14.470

好处很明显，你提到了。有时间（或金钱）和某种倾向的人可以让你的产品做一些你认为没有价值的事情，从而使你的产品更受欢迎。您可以通过设置限制来平衡成本/收益比例，就像 Google 对他们的一些 API 所做的那样（例如，每天 1000 个请求）。

这当然不能替代拥有或没有 API 的 Twitter 似乎缺乏的商业计划。

所有这些 Facebook 应用程序肯定会带来大量收入……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T15:45:49.673

除了 alturicity 之外，您还劝阻克隆您的服务。第三方为您现有的基础设施增加价值比克隆整个站点要容易得多。对您的网站的这种额外吸引力可以决定它的成败。

您可以平衡为这些外部数据访问提供服务的成本和基础设施与所获得的收益。甚至可以对访问收费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T16:40:57.517

这是当今必须提出的最重要的问题之一，Twitter 就是一个很好的例子。正如一些用户之前所说，Twitter 80% 以上的流量是通过他们的 API 获得的。但我认为这也是很多人大部分时间无法访问 Twitter 的原因。

这是一个重要的决定，因为您必须正确计划一切。API 代码质量、服务器维护、项目全局性等必须进行规划。为网站创建 API 不是规则，因为每个人都在创建 API。有一些重要的事情需要考虑；

*   真的有必要创建一个API吗？
*   它的成本是多少（代码开发、服务器维护、帮助文档准备等）？
*   API受限时会不会影响使用？

我真的很想感谢 Dove 开启了如此重要的讨论。

# macos - 保存整个桌面状态？

> ID：395107
> 
> 赞同：3
> 
> 时间：2008-12-27T15:57:43.270
> 
> 标签：macos, session, desktop, state, archive

我很想有一个实用程序来保存和恢复我当前的桌面状态，就像 Firefox 中的会话一样。充其量，它会冻结每个应用程序的状态、打开的窗口位置等，并提供一个可编写脚本的界面来随时恢复它们，就像你离开它们一样。

更现实地说，我可以列出打开了哪些应用程序、隐藏/最小化它们、从 Dock 中隐藏它们等，以便恢复它们（如果它们仍然打开）似乎会恢复它们 - 这样它就会很难不小心关闭它们。

最起码，我可以为每个保存的会话向 Leopard Spaces 添加一个新的桌面表面，并将所有内容移到那里，使用 Spaces 本身作为一种堆栈。

用例是：

1.  我开始做一些事情——比如说，这个问题——所以我在 Firefox 中打开了 stackoverflow，我启动了 XCode 和 ScriptDebugger，我写了几行代码，然后意识到我被困住了，直到我找到答案
2.  我将“继续使用 SessionSaver”日历事件添加到 iCal，或将任务添加到 OmniFocus
3.  我保存当前会话
4.  我将 AppleScript 附加到 iCal 事件或 OmniFocus 任务，它将重新打开我在步骤 3 中保存的会话

我在 Carbon 中看到了一些关于归档窗口层次结构的内容，但我希望它能够在 Snow Leopard 中的 64 位 Cocoa 中工作。（我目前在 Mac Pro 上使用 10.5.6。）

[FinderWindowManager](http://www.jonn8.com/fwm/)对 Finder 窗口执行类似的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-27T16:17:36.410

如果您想冻结应用程序的状态，是挂起/休眠的作用吗？

编辑：刚刚意识到您要存档的内容。我正在使用 Linux，如果我想要这样的东西，我会开始一个新的 X 会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T16:45:53.343

你可以用虚拟机做这样的事情，但显然会有性能损失，我不确定你是否可以在虚拟机下运行 Leopard 本身。（您只需暂停虚拟机复制它，然后重新启动它）。

当然，为操作系统本地执行此操作将需要大量存储空间，因为您必须复制内存和整个硬盘驱动器（因为对硬盘驱动器的更改可能与保存的状态不兼容）。

我想在未来的某个时候，可以使用 ZFS 完成类似的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T20:50:49.123

我最近看到了一些尝试...

[重新启动](http://wiredupandfiredup.co.uk/Relaunch "重新启动")

[工作集](http://lonestar.utsa.edu/llee/applescript/worksets.html)

# vim - Vim 语法着色：如何仅突出显示长行？

> ID：395114
> 
> 赞同：19
> 
> 时间：2008-12-27T16:02:31.323
> 
> 标签：vim, configuration, syntax-highlighting

我希望 vim 为我着色“长”行。以 80 列为例，我想突出显示超过该长度的行。以下是我认为 .vimrc 文件应该包含的大致内容，尽管它 (1) 不起作用，并且 (2) 使用 Perl 的正则表达式语法来说明我的观点，因为我不太了解 Vim：

```
...
highlight Excess ctermbg=0
au Syntax * syn match Excess /.{80,}$/
... 
```

这（至少在我看来）应该标记超过 80 列的行。理想情况下，我希望能够仅对超过 80 列的行的部分进行着色，因此如果一行是 85 列，则第 81 到第 85 列将被突出显示。

我确信 Vim 可以做到这一点，只是不能由我掌舵。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-12T09:22:20.317

我需要自动命令为我工作：

```
augroup vimrc_autocmds
  autocmd BufEnter * highlight OverLength ctermbg=darkgrey guibg=#111111
  autocmd BufEnter * match OverLength /\%75v.*/
augroup END 
```

如果您的目标是平均 80 列，也喜欢使用 75 的想法。

取自：

[http://blog.ezyang.com/2010/03/vim-textwidth/](http://blog.ezyang.com/2010/03/vim-textwidth/)

没有 : highlight + match 可能失败的可能原因`BufEnter`只能使用一次。多次使用意味着旧的被覆盖。[如何添加多个亮点](https://superuser.com/questions/211916/setting-up-multiple-highlight-rules-in-vim)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-27T19:38:06.240

我的 vimrc 中有这个。
我在这里找到它：[Vim 80 列布局问题](https://stackoverflow.com/questions/235439/vim-80-column-layout-concerns)

```
highlight OverLength ctermbg=darkred ctermfg=white guibg=#FFD9D9
match OverLength /\%81v.*/ 
```

您可能想根据自己的喜好调整颜色。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-22T10:26:41.813

因为我不喜欢 Vim 7.3 的列标记，所以我只使用第 80 列之后的突出显示文本……至少 95% 的时间我都想要这样。

在另外 5% 的时间里，我写了这个小扩展来快速禁用高亮：

[https://gist.github.com/fgarcia/9704429#file-long_lines-vim](https://gist.github.com/fgarcia/9704429#file-long_lines-vim)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T16:06:19.663

我使用以下方法：

```
hi gitError ctermbg=Red
match gitError /^.*\s$/
2match gitError /^.\{120\}.*$/ 
```

（这些匹配一些 git 预提交钩子）

第二行应该是你感兴趣的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-31T10:16:39.517

这使用自动命令来调整 OverLength 值以匹配您的文件类型。

```
" highlight lines longer than `textwidth` size for each filetype
autocmd FileType *
    \ if &textwidth |
    \    exec 'match OverLength /\%' . string(&textwidth+2) . 'v.*/' |
    \ endif 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-19T17:02:09.777

我喜欢其他答案，但也希望能够打开和关闭它们。我真的不知道自己在做什么，但是今天早上经过一番努力后，我发现了一些似乎可行的方法：

```
highlight OverLength ctermbg=darkgrey ctermfg=white guibg=#292929

fun! LongLineHighlightInit()
    if !exists("w:llh")
        call LongLineHighlightOn()
    endif
endfunction

fun! LongLineHighlightOn()
    let w:llh = matchadd("OverLength", '\%80v.')
endfunction

fun! LongLineHighlightOff()
    call matchdelete(w:llh)
    let w:llh = 0
endfunction

fun! LongLineHighlightToggle()
    if !exists("w:llh") || w:llh == 0
        call LongLineHighlightOn()
    else
        call LongLineHighlightOff()
    endif
endfunction

augroup LongLineHighlight
    autocmd BufWinEnter * call LongLineHighlightInit()
augroup end

nnoremap <silent> <Leader>8 :call LongLineHighlightToggle()<CR> 
```

使用 matchadd 和 matchdelete（而不是简单的“匹配”）意味着高亮不会干扰使用匹配高亮的任何其他内容。

但这也要求我们将返回的匹配组 ID 存储在与高亮机制匹配的范围内，即窗口范围（即同一缓冲区上的两个窗口可以独立使用 match/matchadd/matchdelete 设置不同的高亮）。因此，“w：”范围变量。

当创建一个新窗口时（由 BufWinEnter 事件检测，然后检查 'w:llh' 变量是否未定义），我们默认打开突出显示。

# c++ - C++ 中的 RAII 和智能指针

> ID：395123
> 
> 赞同：201
> 
> 时间：2008-12-27T16:13:09.757
> 
> 标签：c++, smart-pointers, raii

在 C++ 的实践中，什么是[RAII](http://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)，什么是[智能指针](http://en.wikipedia.org/wiki/Smart_pointers)，这些是如何在程序中实现的，以及将 RAII 与智能指针一起使用有什么好处？

* * *

## 回答 #1

> 赞同：332
> 
> 时间：2008-12-27T16:57:37.907

RAII 的一个简单（可能是过度使用）示例是 File 类。如果没有 RAII，代码可能如下所示：

```
File file("/path/to/file");
// Do stuff with file
file.close(); 
```

换句话说，我们必须确保在完成文件后关闭它。这有两个缺点——首先，无论我们在哪里使用 File，我们都必须调用 File::close()——如果我们忘记这样做，我们持有文件的时间就会超过我们需要的时间。第二个问题是如果在我们关闭文件之前抛出异常怎么办？

Java 使用 finally 子句解决了第二个问题：

```
try {
    File file = new File("/path/to/file");
    // Do stuff with file
} finally {
    file.close();
} 
```

或者从 Java 7 开始，一个 try-with-resource 语句：

```
try (File file = new File("/path/to/file")) {
   // Do stuff with file
} 
```

C++ 使用 RAII 解决了这两个问题——即在 File 的析构函数中关闭文件。只要 File 对象在正确的时间被销毁（无论如何都应该如此），关闭文件就为我们处理好了。所以，我们的代码现在看起来像：

```
File file("/path/to/file");
// Do stuff with file
// No need to close it - destructor will do that for us 
```

这在 Java 中无法做到，因为无法保证对象何时会被销毁，因此我们无法保证何时释放文件等资源。

在智能指针上——很多时候，我们只是在堆栈上创建对象。例如（并从另一个答案中窃取示例）：

```
void foo() {
    std::string str;
    // Do cool things to or using str
} 
```

这很好用——但是如果我们想返回 str 怎么办？我们可以这样写：

```
std::string foo() {
    std::string str;
    // Do cool things to or using str
    return str;
} 
```

那么，这有什么问题呢？好吧，返回类型是 std::string - 所以这意味着我们按值返回。这意味着我们复制 str 并实际返回副本。这可能很昂贵，我们可能希望避免复制它的成本。因此，我们可能会想出通过引用或指针返回的想法。

```
std::string* foo() {
    std::string str;
    // Do cool things to or using str
    return &str;
} 
```

不幸的是，这段代码不起作用。我们正在返回一个指向 str 的指针——但是 str 是在堆栈上创建的，所以一旦我们退出 foo()，我们就会被删除。换句话说，当调用者得到指针时，它是无用的（并且可以说比无用更糟糕，因为使用它可能会导致各种时髦的错误）

那么，解决方案是什么？我们可以使用 new 在堆上创建 str - 这样，当 foo() 完成时， str 不会被销毁。

```
std::string* foo() {
    std::string* str = new std::string();
    // Do cool things to or using str
    return str;
} 
```

当然，这个解决方案也不是完美的。原因是我们创建了 str，但我们从不删除它。这在非常小的程序中可能不是问题，但总的来说，我们希望确保删除它。我们可以说调用者在完成对象后必须删除它。缺点是调用者必须管理内存，这增加了额外的复杂性，并且可能会出错，导致内存泄漏，即即使不再需要对象也不会删除它。

这就是智能指针的用武之地。以下示例使用 shared_ptr - 我建议您查看不同类型的智能指针以了解您实际想要使用的内容。

```
shared_ptr<std::string> foo() {
    shared_ptr<std::string> str = new std::string();
    // Do cool things to or using str
    return str;
} 
```

现在，shared_ptr 将计算对 str 的引用数。例如

```
shared_ptr<std::string> str = foo();
shared_ptr<std::string> str2 = str; 
```

现在有两个对同一个字符串的引用。一旦没有对 str 的剩余引用，它将被删除。因此，您不再需要担心自己删除它。

快速编辑：正如一些评论所指出的，这个例子并不完美（至少！）有两个原因。首先，由于字符串的实现，复制字符串往往是廉价的。其次，由于所谓的命名返回值优化，按值返回可能并不昂贵，因为编译器可以做一些聪明的事情来加快速度。

因此，让我们使用我们的 File 类尝试一个不同的示例。

假设我们想使用一个文件作为日志。这意味着我们要以仅附加模式打开文件：

```
File file("/path/to/file", File::append);
// The exact semantics of this aren't really important,
// just that we've got a file to be used as a log 
```

现在，让我们将文件设置为其他几个对象的日志：

```
void setLog(const Foo & foo, const Bar & bar) {
    File file("/path/to/file", File::append);
    foo.setLogFile(file);
    bar.setLogFile(file);
} 
```

不幸的是，这个例子可怕地结束了——一旦这个方法结束，文件就会被关闭，这意味着 foo 和 bar 现在有一个无效的日志文件。我们可以在堆上构造文件，并将指向文件的指针传递给 foo 和 bar：

```
void setLog(const Foo & foo, const Bar & bar) {
    File* file = new File("/path/to/file", File::append);
    foo.setLogFile(file);
    bar.setLogFile(file);
} 
```

但是谁负责删除文件呢？如果两个都没有删除文件，那么我们就有内存和资源泄漏。我们不知道 foo 或 bar 是否会先完成文件，所以我们不能指望自己删除文件。例如，如果 foo 在 bar 完成之前删除了文件， bar 现在有一个无效的指针。

因此，正如您可能已经猜到的那样，我们可以使用智能指针来帮助我们。

```
void setLog(const Foo & foo, const Bar & bar) {
    shared_ptr<File> file = new File("/path/to/file", File::append);
    foo.setLogFile(file);
    bar.setLogFile(file);
} 
```

现在，没有人需要担心删除文件 - 一旦 foo 和 bar 都完成并且不再有任何对文件的引用（可能是由于 foo 和 bar 被破坏），文件将被自动删除。

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2008-12-27T22:30:14.943

**RAII**对于一个简单但很棒的概念来说，这是一个奇怪的名字。更好的是名称**范围绑定资源管理**(SBRM)。这个想法是你经常碰巧在一个块的开始分配资源，并且需要在一个块的出口释放它。退出块可以通过正常的流控制，跳出它，甚至是异常来发生。为了涵盖所有这些情况，代码变得更加复杂和冗余。

只是一个没有 SBRM 的例子：

```
void o_really() {
     resource * r = allocate_resource();
     try {
         // something, which could throw. ...
     } catch(...) {
         deallocate_resource(r);
         throw;
     }
     if(...) { return; } // oops, forgot to deallocate
     deallocate_resource(r);
} 
```

如您所见，我们可以通过多种方式获得 pwned。这个想法是我们将资源管理封装到一个类中。其对象的初始化获取资源（“资源获取即初始化”）。在我们退出块（块范围）时，资源再次被释放。

```
struct resource_holder {
    resource_holder() {
        r = allocate_resource();
    }
    ~resource_holder() {
        deallocate_resource(r);
    }
    resource * r;
};

void o_really() {
     resource_holder r;
     // something, which could throw. ...
     if(...) { return; }
} 
```

如果您有自己的类，这些类不仅仅用于分配/释放资源，那就太好了。分配只是完成工作的另一个问题。但是，只要您只想分配/取消分配资源，上述内容就会变得不方便。你必须为你获得的每一种资源编写一个包装类。为了缓解这种情况，智能指针允许您自动化该过程：

```
shared_ptr<Entry> create_entry(Parameters p) {
    shared_ptr<Entry> e(Entry::createEntry(p), &Entry::freeEntry);
    return e;
} 
```

`delete`通常，智能指针是围绕 new / delete 的瘦包装器，当它们拥有的资源超出范围时恰好调用它们。一些智能指针，比如 shared_ptr 允许你告诉他们一个所谓的删除器，它被用来代替`delete`. 例如，这允许您管理窗口句柄、正则表达式资源和其他任意内容，只要您告诉 shared_ptr 正确的删除器。

有用于不同目的的不同智能指针：

### [**unique_ptr**](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2798.pdf)

是一个独占对象的智能指针。它不在 boost 中，但它可能会出现在下一个 C++ 标准中。它是*不可复制*的，但支持*所有权转移*。一些示例代码（下一个 C++）：

*代码：*

```
unique_ptr<plot_src> p(new plot_src); // now, p owns
unique_ptr<plot_src> u(move(p)); // now, u owns, p owns nothing.
unique_ptr<plot_src> v(u); // error, trying to copy u

vector<unique_ptr<plot_src>> pv; 
pv.emplace_back(new plot_src); 
pv.emplace_back(new plot_src); 
```

与 auto_ptr 不同，unique_ptr 可以放入容器中，因为容器将能够保存不可复制（但可移动）的类型，例如流和 unique_ptr。

### [**scoped_ptr**](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/scoped_ptr.htm)

是一个既不能复制也不能移动的 boost 智能指针。当您想确保指针在超出范围时被删除时，这是一个完美的选择。

*代码：*

```
void do_something() {
    scoped_ptr<pipe> sp(new pipe);
    // do something here...
} // when going out of scope, sp will delete the pointer automatically. 
```

### [**shared_ptr**](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/shared_ptr.htm)

用于共享所有权。因此，它既可复制又可移动。多个智能指针实例可以拥有相同的资源。一旦拥有该资源的最后一个智能指针超出范围，该资源就会被释放。我的一个项目的一些真实世界的例子：

*代码：*

```
shared_ptr<plot_src> p(new plot_src(&fx));
plot1->add(p)->setColor("#00FF00");
plot2->add(p)->setColor("#FF0000");
// if p now goes out of scope, the src won't be freed, as both plot1 and 
// plot2 both still have references. 
```

如您所见，绘图源（函数 fx）是共享的，但每个都有一个单独的条目，我们在其上设置颜色。当代码需要引用智能指针拥有的资源但不需要拥有该资源时，会使用一个 weak_ptr 类。然后，您应该创建一个weak_ptr，而不是传递一个原始指针。当它注意到您尝试通过weak_ptr 访问路径访问资源时，它会抛出异常，即使没有shared_ptr 不再拥有该资源。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2008-12-27T17:12:04.960

## 前提和理由很简单，在概念上。

RAII 是确保**变量在其构造函数中处理所有需要的初始化以及在其析构函数中处理所有需要的清理的设计范例。** 这将所有初始化和清理减少到一个步骤。

C++ 不需要 RAII，但越来越多的人认为使用 RAII 方法会产生更健壮的代码。

RAII 在 C++ 中有用的原因是 C++ 在本质上管理变量进入和离开范围时的创建和销毁，无论是通过正常代码流还是通过异常触发的堆栈展开。这是 C++ 中的免费赠品。

**通过将所有初始化和清理与这些机制联系起来，您可以确保 C++ 也会为您处理这项工作。**

在 C++ 中谈论 RAII 通常会引发对智能指针的讨论，因为指针在清理时特别脆弱。在管理从 malloc 或 new 获取的堆分配内存时，程序员通常负责在指针被销毁之前释放或删除该内存。智能指针将使用 RAII 理念来确保在指针变量被销毁的任何时候都销毁堆分配的对象。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-27T17:08:06.683

智能指针是 RAII 的一种变体。RAII 表示资源获取是初始化。智能指针在使用前获取资源（内存），然后在析构函数中自动将其丢弃。发生两件事：

1.  我们总是在使用它之前分配*内存*，即使我们不喜欢它——很难用智能指针做另一种方式。如果这没有发生，您将尝试访问 NULL 内存，从而导致崩溃（非常痛苦）。
2.  即使出现错误，我们也会释放*内存。*没有任何记忆悬而未决。

例如，另一个例子是网络套接字 RAII。在这种情况下：

1.  *我们总是在使用网络套接字*之前打开它，即使我们不喜欢——很难用 RAII 用另一种方式来做。如果您尝试在没有 RAII 的情况下执行此操作，您可能会打开空套接字，例如 MSN 连接。然后像“今晚就做吧”这样的消息可能不会被转移，用户不会被解雇，你可能会面临被解雇的风险。
2.  即使出现错误，我们也会关闭*网络套接字。*没有任何套接字挂起，因为这可能会阻止响应消息“肯定会在底部”回击发件人。

现在，如您所见，RAII 在大多数情况下是一个非常有用的工具，因为它可以帮助人们上床。

网络上的 C++ 智能指针源数以百万计，包括我上面的响应。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-27T17:22:03.910

Boost 有许多这些，包括[Boost.Interprocess](http://www.boost.org/doc/libs/1_37_0/doc/html/interprocess.html)中用于共享内存的那些。它极大地简化了内存管理，特别是在令人头疼的情况下，例如当您有 5 个进程共享相同的数据结构时：当每个人都使用完一块内存时，您希望它自动被释放而不必坐在那里试图弄清楚谁应该负责调用`delete`一块内存，以免最终导致内存泄漏，或者错误地释放两次并可能破坏整个堆的指针。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-27T16:23:56.740

```
无效的富（）
{
   标准：：字符串栏；
   //
   // 这里有更多代码
   //
}

```

不管发生什么，一旦 foo() 函数的作用域被抛在后面，bar 就会被正确地删除。

在内部 std::string 实现通常使用引用计数指针。因此，仅当其中一个字符串副本发生更改时，才需要复制内部字符串。因此，引用计数智能指针可以仅在必要时复制某些内容。

此外，内部引用计数可以在不再需要内部字符串的副本时正确删除内存。

# user-interface - 在 UI 中决定显式和隐式分页时应该考虑什么？

> ID：395144
> 
> 赞同：1
> 
> 时间：2008-12-27T16:43:47.700
> 
> 标签：user-interface, usability

当列表变得**非常大**时，在 UI 中呈现它会引发设计问题。用户应该获得项目页面，还是应该获得一个列表控件，在项目滚动时隐式分页？

在谷歌搜索中，结果的分页是明确的。您获得一组结果并点击链接以获取下一组结果。在 iPhone 上，应用商店中的应用程序名称是隐式分页的。在这种情况下，滚动会导致它们加载。Outlook 中的收件箱是隐式分页的，但 Outlook Web Access 中的收件箱是显式分页的。

在做出此 UI 设计决策时应考虑哪些因素？

编辑：术语**非常大**需要一些解释。
为了给出一些结构考虑这些不同的情况：

案例 A：清单： 1\. 可能会随着时间的推移而增长。2\. 至少有 20 亿个项目。

案例 B：列表： 1\. 可能会随着时间的推移而增长。2.拥有数千种物品。

我会声称案例 A 和 B 在性质上是不同的，尽管我当然愿意被证明我错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-27T16:51:26.170

假设天空是极限，并且您不受正在工作的本机工具包或框架的限制，有几个考虑因素：

*   **如果您认识到“隐式”分页与“显式”分页相同，其中每页**的最大结果是无限的，那么“隐式”和“显式”分页之间的区别就消失了；
*   您的应用程序会支持**用户偏好**吗？如果是这样，那么您应该考虑让用户决定她的偏好。提供选择每页最大结果数的选项，以及无限结果的选项（又称“隐式”分页）；
*   您的用户通常需要对结果进行**搜索**、**排序**和**过滤**吗？如果是这样，那么您所谓的“隐式”分页可能是必要的，因为对部分模糊的结果集进行排序和过滤是违反直觉的；
*   假设您正在谈论 Web 开发，那么有**预制的 GUI 控件**可以呈现网格。其中一些可以选择在“分页”结果和“非分页”结果之间切换
*   是否允许您的用户以**不同的格式**提取和重新利用结果？如果是这样，那么不受约束的结果集会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T17:42:34.523

我们可以说显式寻呼基本上是在 (1) 带宽有限和 (2) 没有直接可用的过滤/排序/搜索选项的情况下实现的吗？Outlook 就是一个完美的例子：富客户端版本不关心显式分页，并提供过滤/排序/搜索数据的所有花哨选项。网页版实现了显式分页，并没有这样的选项（至少不实现它们是一样的直接方式）。

因此，显式分页是数据分页的“减少/限制”版本，其中隐式格式是原始标准。如果您可以向您的用户建议“隐式”数据分页格式，那就去做吧。查看 Excel 表格以了解有关如何允许数据过滤/排序/搜索的一些想法。您甚至可以查看[我的一篇文章](http://thebis.blogspot.com/2008/11/user-interface-101-displaying-data.html)，其中我绝对受到 Excel 的启发，为我们自己的用户界面设置标准。

编辑：

在史蒂夫施泰纳对我的回答发表评论之后，我应该补充一点，明确的分页很少符合“面向业务”的请求，您想查看上个月的发票或获取 ACME 自去年以来的完整交付清单，最后将论文列表导出到 Excel、Outlook 或 PDF 文件。在这些需要详尽回答请求的情况下，显式寻呼可能会造成混乱或限制用户的工作效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T17:07:31.333

还有一个问题是谷歌是基于网络的。使用基于 Web 的应用程序，您将超过几千行，甚至可能更少。列表框可能支持更多，但如果您像 google 一样渲染 html，您将使用超过几千行响应将大多数浏览器炸到阴暗面，通常需要少得多。

所以技术限制在网络浏览器上是非常真实的。有时大型数据集在大多数浏览器中运行良好，但在其他浏览器中会出现问题。并且没有任何一项可以修复以使其在所有浏览器中都能正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T17:44:41.930

以下是我会考虑的一些问题：

从用户的角度来看，拥有数百或数千个条目（甚至数十个条目）的列表有什么价值？

与只查看列表的第一部分相比，用户必须滚动（或翻页）一大组值的可能性有多大？

是否有一种自然的顺序可以将“最佳”值放在列表的前面？

排序是否应该由用户偏好控制（例如，什么排序键等）？

与其将决策硬连接到应用程序中，不如将其作为用户选择/配置公开？是否允许用户决定（并且应用程序记住！）使用哪种策略，显示多少元素等？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-30T13:13:35.580

与滚动相比，分页没有可用性优势。分页是 Web 界面的人工产物，出于技术原因（例如，网络或服务器负载、拨号上的页面加载率），它试图最大限度地减少一次发送的内容量。如果您没有遇到此类限制，请使用滚动。

与分页相比，滚动具有以下优点：

*   滚动条控件是标准化的，因此大多数用户已经熟悉它。分页缺乏标准化，因此需要注意并学习使用它（例如，页面链接所在的位置，是否有第一个或最后一个链接）。

*   显示的项目数量会随着窗口大小的调整而自动调整，允许用户一步优化可见项目的数量，并避免同时出现滚动*和*分页的情况。

*   无论用户在窗口中的哪个位置，都可以访问滚动条。分页界面通常仅在页面的顶部和/或底部提供页面链接，这些页面链接可以滚动到视图之外。

*   用户一次只能移动一个项目，以显示他们想要一起查看的项目。分页将项目拆分为任意组，这可能导致感兴趣的项目在页面之间拆分。

*   用户可以通过一次拖动滚动到列表中的任何位置。分页仅限于显示的页面链接，通常限制用户只能在附近移动。

*   用户可以多选任何一组项目以对其执行操作（例如，复制、删除），并且用户可以在保持当前选择的同时查看任何其他项目。分页通常只允许并保持对当前页面上项目的选择。

*   无论如何，用户仍然可以通过单击滚动条的“轨道”一次移动一个“页面”。

# c - 关闭 gcc 4.2.2 中特定功能的优化

> ID：395145
> 
> 赞同：13
> 
> 时间：2008-12-27T16:45:21.940
> 
> 标签：c, gcc

是否可以关闭特定功能的优化？我的一个朋友的问题是 gcc 优化使一些（我不知道的）μ-controller-code 不起作用。我们知道它是哪些功能，但我们对代码本身一无所知，因此最简单和最安全的方法可能是为整个功能关闭它。

可悲的是[http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)显示有一个优化函数属性 / pragma，但它需要 gcc 4.4，而我们没有。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-27T16:53:39.927

如果编译指示对您不起作用，请尝试将函数拆分为自己的文件，然后在不设置优化标志的情况下编译该文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-27T16:56:11.340

您可以将该函数放在一个单独的文件中并编译该文件而不进行优化，但更好的解决方案是找出代码有什么问题并修复它。

使用 gcc 启用优化时出现的最常见错误之一是严格别名。确保所有警告都已启用，并查看是否收到任何可能帮助您找出问题所在的警告。如果你想不通，试着把问题简化为一个小而完整的程序，然后在这里发布。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-28T07:24:21.930

除了将函数放在自己的文件中之外，我认为没有任何方法可以使用早期版本的 GCC 按函数级别关闭函数优化。但是，您可以尝试在整个程序中选择关闭某些类型的优化，而不是关闭这一功能的优化。虽然您已经确定了此特定功能中的错误，但这可能表明存在其他未发现的错误。

正如其他人指出的那样，罪魁祸首很可能是关于['strict aliasing' 的](http://www.cellperformance.com/mike_acton/2006/06/understanding_strict_aliasing.html)优化。从长远来看，您可能应该修复有问题的代码，但从短期来看，您可以在命令行中添加“-fno-strict-aliasing”。在 -O2 及以上，编译器对指针之间的交互做出某些假设。添加这个选项告诉它不要做这些假设。

如果失败，并且由于某种原因无法修复代码，您可以尝试禁用其他 [优化选项](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-08-06T08:20:41.867

到目前为止的答案都忽略了原始问题中的关键词，即“微控制器代码”。在编写此类代码以禁用优化时很常见——激进的优化器将“优化掉”整个语句，其副作用是驱动控制器。这是与应用程序编码不同的世界。对于通常编程空间中的应用程序，我来到这里寻找相同的信息，以避免将 Kahan 求和（参见维基百科）的例程优化为虚无。因此，我们不要假设优化级别的变化会自动产生不同的程序行为，这会自动成为错误代码的标志。可以巧妙地使用 volatile 关键字来组合某些东西，在某些情况下，应该生成实际的汇编语言并检查它。（我相信这仍然可以通过 -S 切换到 gcc 来完成）。让我们记住，C 旨在成为一种可移植的汇编程序，而不是一种 COBOL。

戴夫

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-27T16:49:32.773

我不能肯定地说，但据我所知，没有这种可能性。然而，优化不应该改变定义良好的代码的语义。这里唯一可能发生的是变量被内联或读/写顺序被改变。

第一个问题，也可能是两个问题都可以通过将所涉及的变量声明为 来解决`volatile`，从而向编译器表明不应仅根据程序流程对其内容进行假设。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-06-17T18:00:12.513

我知道这是一个旧帖子。OP 提供的 GCC 页面实际上说：为了防止此类调用被优化，请将 asm (""); 在函数中。我想这是一个简单的解决方法。就好了，希望它可以帮助像我这样的其他人。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-04-15T22:04:51.377

对于仍在使用旧版 gcc 的人：新版 gcc 解决了这个问题。我已经在 gcc-4.5.1 中成功使用了它。祝你好运。

# firefox - 如何使用 XUL/Firefox 扩展执行页面的后台加载和抓取

> ID：395157
> 
> 赞同：6
> 
> 时间：2008-12-27T16:57:11.307
> 
> 标签：firefox, firefox-addon, xul

我想抓取 SO 的用户页面，以向我的工具栏的所有者提供有关他们的问题/答案/等的更新信息......

这意味着我需要在后台执行此操作，解析页面，提取内容，将其与上次运行进行比较，然后将结果显示在工具栏或状态栏上，或者在某些弹出窗口上显示种类。所有这些都必须在用户进行他的业务时完成，而不会被打断甚至是在 SO 上。

我在 Google 和 Mozilla Wiki 上都进行了相当彻底的搜索，以寻找某种提示。我什至已经下载了一些我认为可以做同样的其他扩展。不幸的是，我没有时间浏览所有这些和我看过的那些，都使用数据 API（服务、WebServices、XML），而不是 html 报废。

**旧问题文本**

我正在寻找一个好地方来学习如何在一个名为购买臭名昭著的 set_timeout() 的函数中加载页面，以在后台处理屏幕抓取。

我的想法是在状态栏扩展中呈现这种抓取的结果，以防万一上次运行发生任何变化。

是否有隐藏的覆盖或其他一些诡计？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-10T21:16:04.863

对于 XUL/Firefox，您需要的是 nsIIOService 接口，您可以像这样获得它：

```
var mIOS = Components.classes["@mozilla.org/network/io-service;1"].
   getService(Components.interfaces.nsIIOService); 
```

然后你需要创建一个通道，并打开一个异步链接：

```
var channel = mIOS.newChannel(urlToOpen, 0, null);
channel.asyncOpen(new StreamListener(), channel); 
```

这里的关键是`StreamListener`对象：

```
var StreamListener = function() {
    return {
        QueryInterface: function(aIID) {
            if (aIID.equals(Components.interfaces.nsIStreamListener) ||
                aIID.equals(Components.interfaces.nsISupportsWeakReference) ||
                aIID.equals(Components.interfaces.nsISupports))
                return this;
            throw Components.results.NS_NOINTERFACE;

        onStartRequest: function(aRequest, aContext)
           { return 0; },

        onStopRequest: function(aRequest, aChannel /* aContext */, aStatusCode)
           { return 9; },

        onDataAvailable: function(aRequest, aContext, aStream, aOffset, aCount)
           { return 0; }
    };
} 
```

您必须在`onStartRequest`, `onStopRequest`,`onDataAvailable`函数中填写详细信息，但这应该足以让您继续前进。你可以看看我是如何在我的 Firefox 扩展中使用这个接口的（它被称为 IdentFavIcon，它可以在 mozilla 附加组件站点上找到）。

我不确定的部分是如何不时触发此页面请求 `set_timeout()`，但应该可以工作。

**编辑：**

1.  有关如何将下载的数据收集到单个变量中的示例，请参见[此处](https://developer.mozilla.org/en/Code_snippets/Downloading_Files)的示例（请参见*下载图像部分）；*和
2.  请参阅[此页面](https://developer.mozilla.org/en/Code_snippets/HTML_to_DOM)，了解如何将 HTML 源代码转换为 DOM 树。

HTH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-27T18:16:00.867

我不确定我是否完全理解了这个问题，但会尝试回答一些明显的替代问题：

如果您正在寻找静态网页抓取[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/documentation.html) (Python) 是最好和最简单的方法之一。

如果您在基于 Ajax 的页面中寻找随时间变化的变化，您将不得不在无限循环中继续运行代码。但是不要太频繁地轮询站点，它会检​​测到带宽消耗并可能会阻塞您的 IP，因此请间隔一段时间进行轮询。

如果您要抓取一些 javascript 渲染的代码或其他内容，则在渲染页面之前无法完成，因此仅使用 BeautifulSoup 是不可能的。您将不得不使用像[Crowbar - Similie](http://simile.mit.edu/wiki/Crowbar)（使用 XULRunner）这样的无头浏览器，它在无头浏览器上呈现 javascript 内容，并且该呈现内容的输出可以用作 BeautifulSoup 刮板的输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T17:21:56.810

从特权JavaScript，即扩展中的JS，您可以创建隐藏`iframe`的s；下载指定页面就像在这个框架上设置位置一样简单。

如果您要拉下您拥有的简单静态页面，`set_timeout`应该没问题。但在那种情况下，为什么不使用 XHR 呢？

如果您要拉下任意页面，包含动态元素或大量内容的页面，我建议您使用`Document.onload`事件处理程序触发您对页面的抓取。它更可靠，并且您可以在尽可能早的时候巧妙地抓取页面，但是当您知道所需的内容在那里时。

我认为没有专门的教程，但我相信您已经找到了[Mozilla 开发人员中心，它绝对是优秀的——我认为最好的在线技术文档！](https://developer.mozilla.org/en/Extensions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-07T21:14:56.060

看看[XMLHttpRequest](https://developer.mozilla.org/En/Using_XMLHttpRequest)，应该可以帮助您入门。

# javascript - 将css最高值作为数字而不是字符串？

> ID：395163
> 
> 赞同：126
> 
> 时间：2008-12-27T17:04:01.700
> 
> 标签：javascript, jquery, css

在 jQuery 中，您可以将相对于父级的顶部位置作为数字获取，但如果将 css 顶部值设置为`px`.
说我有以下内容：

```
#elem{
  position:relative;
  top:10px;
 } 
```

```
<div>
  Bla text bla this takes op vertical space....
  <div id='elem'>bla</div>
</div> 
```

```
$('#elem').position().top; //Returns the number (10+(the vertical space took by the text))
$('#elem').css('top'); //Returns the string '10px' 
```

但我想将 css top 属性作为 number `10`。
一个人将如何实现这一目标？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2008-12-27T17:10:59.703

您可以使用 parseInt() 函数将字符串转换为数字，例如：

```
parseInt($('#elem').css('top')); 
```

**更新：（**如 Ben 所建议的）：您也应该给出基数：

```
parseInt($('#elem').css('top'), 10); 
```

强制将其解析为十进制数，否则以 '0' 开头的字符串可能会被解析为八进制数（可能取决于所使用的浏览器）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-03-27T18:04:55.757

一个基于 M4N 答案的 jQuery 插件

```
jQuery.fn.cssNumber = function(prop){
    var v = parseInt(this.css(prop),10);
    return isNaN(v) ? 0 : v;
}; 
```

那么你只需使用这个方法来获取数值

```
$("#logo").cssNumber("top") 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-09-01T12:55:32.890

基于 Ivan Castellanos 的回答（基于 M4N 的回答）的稍微实用/高效的插件。使用`|| 0`将在没有测试步骤的情况下将 Nan 转换为 0。

我还提供了 float 和 int 变体以适应预期用途：

```
jQuery.fn.cssInt = function (prop) {
    return parseInt(this.css(prop), 10) || 0;
};

jQuery.fn.cssFloat = function (prop) {
    return parseFloat(this.css(prop)) || 0;
}; 
```

## 用法：

```
$('#elem').cssInt('top');    // e.g. returns 123 as an int
$('#elem').cssFloat('top');  // e.g. Returns 123.45 as a float 
```

## [在http://jsfiddle.net/TrueBlueAussie/E5LTu/](http://jsfiddle.net/TrueBlueAussie/E5LTu/)上测试小提琴

# c# - 三层 Web 应用程序

> ID：395165
> 
> 赞同：4
> 
> 时间：2008-12-27T17:07:30.087
> 
> 标签：c#, redirect, routing, layer

可以 - 最佳实践 - 使用第二层重定向用户吗？

例如：

```
public static void ForceLogin()
{
    HttpCookie cookie = HttpContext.Current.Request.Cookies[cookieName];

    if (cookie != null)
    {
        if (Regex.IsMatch(cookie.Value, "^[0-9]+\\.[a-f0-9]+$"))
        {
            using (EibxDataContext db = new EibxDataContext())
            {
                int count = db.Logins.Count(l => l.Password == cookie.Value);

                if (count == 1)
                {
                    return;
                }
            }
        }
    }

    HttpContext.Current.Response.Redirect("~/Login.aspx");
} 
```

在最后一行，我使用业务/服务逻辑层将用户重定向到登录页面。

这应该在表示层中完成吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-27T17:19:49.890

Absolutely not. The business logic layer should make the decision, the UI layer should do the redirect. The business layer shouldn't know anything about HttpContext nor should it be directly reading cookies. Pass the relevant information into the business layer so that the business layer can make the decision, and pass the decision out to the UI layer so that it can work on the resultant decision.

Here's the reason... what if the business layer is used from a web service? How can the business layer do a redirect in that instance? Or suppose it's used with a non-web client? Redirection has no meaning in that context. If you change your UI layer, that should not affect your business logic layer, and mixing in redirects and cookie reading into the business layer will necessitate that with the proposed design.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-27T17:13:57.187

这取决于您如何定义图层；例如，我的“业务逻辑”通常是与我要解决的问题相关的逻辑，对 UI 一无所知。因此它无法进行重定向，因为它无法访问请求/响应。

Personally, I'd do this at the UI layer; dealing with the raw interactions such as being gate-keeper and custodian is part of the UI layer's job for a web app. IMO. For example, via an http-module, which is (by definition) a UI-level component.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T17:09:01.923

我会说你在业务逻辑中这样做是正确的。表示层不应该做出有关路由的决定。

# c++ - 使用 CMake 生成 Visual Studio C++ 项目文件

> ID：395169
> 
> 赞同：106
> 
> 时间：2008-12-27T17:08:16.840
> 
> 标签：c++, visual-studio, build-process, cross-platform, cmake

我正在开发一个开源 C++ 项目，用于在 Linux 和 Windows 上编译的代码。我使用 CMake 在 Linux 上构建代码。为了便于开发设置和政治原因，我必须坚持使用 Windows 上的 Visual Studio 项目文件/编辑器（例如，我无法切换到[Code::Blocks](http://en.wikipedia.org/wiki/Code::Blocks)）。我看到了使用 CMake 生成 Visual Studio 文件的说明，如下[所示](http://www.opentissue.org/mediawiki/index.php/Using_CMake)。

您之前是否使用过 CMake 生成 Visual Studio 文件？你的经历如何？假设我想在我的项目中添加一个新文件。这个工作流程是什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2008-12-27T18:01:53.737

CMake 实际上对此非常有用。关键部分是 Windows 端的每个人都必须记住在加载解决方案之前运行 CMake，而我们 Mac 端的每个人都必须记住在 make 之前运行它。

最困难的部分是作为 Windows 开发人员，确保您的结构更改在 cmakelist.txt 文件中，而不是在解决方案或项目文件中，因为这些更改可能会丢失，即使没有丢失也不会转移到 Mac 端也需要它们，Mac 人需要记住不要出于同样的原因修改 make 文件。

它只需要一点思考和耐心，但一开始会有错误。但是如果你在双方都使用[持续集成，那么这些会很早就被淘汰，人们最终会养成习惯。](http://en.wikipedia.org/wiki/Continuous_integration)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-02-13T11:39:43.123

不确定它是否与问题直接相关，但我一直在寻找如何从 cmake 项目生成 *.sln 的答案，我发现可以使用这样的东西：

```
cmake -G "Visual Studio 10" 
```

该示例从输入 CMakeLists.txt 文件生成所需的 VS 2010 文件

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2008-12-28T19:03:22.190

我们将我们部门的构建链转移到 CMake，并且我们有一些内部障碍，因为其他部门使用我们的项目文件并且习惯于将它们导入到他们的解决方案中。我们还抱怨 CMake 没有完全集成到 Visual Studio 项目/解决方案管理器中，因此必须手动将文件添加到 CMakeLists.txt；这是人们习惯的工作流程的重大突破。

但总的来说，这是一个相当平稳的过渡。我们很高兴，因为我们不再需要处理项目文件。

将新文件添加到项目的具体工作流程非常简单：

1.  创建文件，确保它在正确的位置。
2.  将文件添加到 CMakeLists.txt。
3.  建造。

如果任何 CMakeLists.txt 文件发生更改，CMake 2.6 会自动重新运行（并且（半）自动重新加载解决方案/项目）。

请记住，如果您正在执行源外构建，则需要注意不要在构建目录中创建源文件（因为 Visual Studio 只知道构建目录）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-01-18T07:41:31.143

CMake 无缝生成 Visual Studio 项目和解决方案。您甚至可以为不同的 Visual Studio 版本生成项目/解决方案，而无需对 CMake 文件进行任何更改。

添加和删​​除源文件只是修改`CMakeLists.txt`具有源文件列表并重新生成项目/解决方案的问题。甚至还有一个 globbing 函数可以查找目录中的所有源（尽管应该谨慎使用）。

以下链接很好地解释了 CMake 和 Visual Studio 的特定行为。

[CMake 和 Visual Studio](http://cognitivewaves.wordpress.com/cmake-and-visual-studio/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-12-27T21:26:02.530

正如亚历克斯所说，它运作良好。唯一棘手的部分是记住在 cmake 文件中进行任何更改，而不是在 Visual Studio 中进行更改。因此，在所有平台上，工作流程都类似于您使用普通的旧 makefile。

但它很容易使用，而且我对 cmake 生成无效文件或类似的东西没有任何问题，所以我不会太担心。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2011-03-22T21:22:04.093

CMake 可以生成非常好的 Visual Studio `.projs`/ `.slns`，但总是存在需要修改`.cmake`文件而不是`.proj`/的问题`.sln`。就像现在一样，我们正在处理它，如下所示：

1.  所有源文件都转到`/src`Visual Studio 中可见的文件只是指向它们的“链接”在`.filter`.
2.  程序员添加/删除文件，记住在定义的`/src`目录上工作，而不是默认项目的目录。
3.  完成后，他运行一个“刷新”各个`.cmake`文件的脚本。
4.  他检查代码是否可以在重新创建的环境中构建。
5.  他提交了代码。

起初我们有点害怕结果如何，但工作流程运行得非常好，每次提交前都有很好的差异可见，每个人都可以很容易地看到他的更改是否正确映射到`.cmake`文件中。

要了解的另一件重要的事情是缺乏对 CMake 中“解决方案配置”的支持 ( *afaik* )。就目前而言，您必须生成**两个**包含项目/解决方案的目录 - 一个用于每种构建类型（调试、发布等）。没有直接支持更复杂的功能 - 换句话说：在配置之间切换不会给你你所期望的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-24T21:31:55.817

[这里有很多很好的答案，但它们可能会被Visual Studio 中的 CMake 支持](https://blogs.msdn.microsoft.com/vcblog/2016/10/05/cmake-support-in-visual-studio/ "CMake support in Visual Studio")所取代（2016 年 10 月 5 日）

# c# - .Owner 属性和 ShowDialog（IWin32Window 所有者）之间的区别？

> ID：395186
> 
> 赞同：9
> 
> 时间：2008-12-27T17:29:53.537
> 
> 标签：c#, winforms, modal-dialog, mdi

我认为可以通过**.Owner**属性或通过在重载方法**ShowDialog(IWin32Window owner)中传递所有者来显式设置 winform 的所有者**

我无法理解为什么这些方法在使用**MDI 表单**时表现出不同的行为。

我创建了一个 MDIParent 和一个 MDIChild。

我还有一个简单的 winform MyDialogBox，它在加载时显示其所有者。

```
MessageBox.Show("Dialog's owner is " + this.Owner.Name); 
```

方法 A - 在加载 MDIChild 我有以下代码，这导致 MyDialogBox 的所有者被设置为**MDIChild**

```
MyDialogBox box = new MyDialogBox();
box.Owner = this; // Set owner as MDIChild
box.ShowDialog(); 
```

方法 B - 或者，在 MDIChild 的加载方法中，我有以下代码，这导致 MyDialogBox 的所有者被设置为**MDIParent**

```
MyDialogBox box = new MyDialogBox();
box.ShowDialog(this); // Pass MyMDIChild as owner 
```

我还在[这里阅读了以下内容](http://vbnet.mvps.org/index.html?code/forms/mdiownedwindows.htm)

*只有 MDI 父窗体可以拥有另一个窗体，无论是 MDI 子窗体、模式对话框还是父窗体设置为 Owner 参数的窗体。*

如果是这样，方法 A 根本不应该工作，不是吗？

我错过了什么？为什么方法 B 不将所有者设置为 MDIChild ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T08:55:37.940

使用 Reflector 查看这两个选项的差异，似乎它们的实现略有不同： `box.Owner = this`只需将提供的 this 值分配给内部所有者字段。但是，在调用 时`ShowDialog(IWin32Window)`，实现会在分配值之前执行以下调用：

```
owner = ((Control) owner).TopLevelControlInternal; 
```

这可能会导致分配 MDIParent。

（**注意**：我远不是 MDI 方面的专家，所以我在这里可能是错的）。

# java - 在码头使用 NIO 与 BIO 的优势？

> ID：395192
> 
> 赞同：3
> 
> 时间：2008-12-27T17:34:04.150
> 
> 标签：java, jetty, nio

当为每个查询执行堆和计算密集型进程且执行时间在（100ms-900ms）范围内时，在 nio 与 bio 方面的权衡有什么经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T07:52:54.573

真正的问题是您希望每个物理服务器能够扩展到多少并发打开连接（例如，支持服务器消息推送 ala Comet 模式 - 现在谁不想这样做？）。NIO 会让你真正进入 10,000 到 20,000 的范围。从操作系统实现的角度来看，线程是一种极其昂贵的资源（每个线程的内存消耗和上下文切换开销）。因此，使用适度的线程池可以维持数千个 NIO 连接。

使用像 MINA 这样的 NIO 框架，滚动 NIO 一点也不差。（实际上非​​常简单。）我推出了自己的 NIO，然后还合并了 MINA。MINA 是一个不错的选择。

[http://mina.apache.org/testimonials.html](http://mina.apache.org/testimonials.html)

> EURid 在 2006 年 4 月 7 日的 .eu 域名抢注期间使用 MINA。在最初的 4 小时内注册了超过 700.000 个域名。一小时后，MINA 处理了超过 50 万个 SSL 连接。
> 
> 我们发现 MINA 的速度和稳定性非常好。虽然我们仍在使用 MINA 0.8.1，但我们发现 API 非常优雅和简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-05-24T19:25:41.573

您应该记住的一件事是，关于 NIO 的 JVM 中的一些错误报告，这会导致 Jetty 挂起并使用 100% 的 CPU。所以，现在，如果你看到这种行为，我建议你继续使用 BIO。相关链接：

[http://jira.codehaus.org/browse/JETTY-937](http://jira.codehaus.org/browse/JETTY-937)

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6403933](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6403933)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T21:21:28.280

除非您发送或接收大量数据，否则 CPU 考虑因素将占主导地位。java.nio 比 java.io 更难使用（JDK 7 中的异步 I/O 介于两者之间）。如果数据量超过缓冲，那么您可能希望在不同的线程中执行 I/O。

# wpf - WPF：如何在对话框单位中指定单位？

> ID：395195
> 
> 赞同：24
> 
> 时间：2008-12-27T17:37:23.037
> 
> 标签：wpf, windows, xaml, dpi

我试图弄清楚如何使用正确的**对话框单元**（DLU）在 WPF 中布局一个简单的对话框。

* * *

> ## 什么是对话单元？
> 
> 对话框是基于用户首选字体大小的度量单位。定义一个对话单元，使*平均字符*为 4 个对话单元宽乘以 8 个对话单元高：
> 
> ![在此处输入图像描述](https://i.stack.imgur.com/yRvvQ.png)
> 
> 这意味着对话单元：
> 
> *   用所选字体更改
> *   使用选定的 DPI 设置更改
> *   不是方形的

* * *

**我花了大约两个小时在 Windows Vista 中使用各种dlu**测量来确定这个示例对话框的尺寸。有人可以提供生成此对话框的相应 XAML 标记吗？

[![替代文字](https://i.stack.imgur.com/PgNaP.png)](https://i.stack.imgur.com/PgNaP.png) （[图片链接](http://i44.tinypic.com/30a7390.jpg)）

现在诚然，我对 WPF XAML 几乎一无所知。每次我开始时，我都会受到阻碍，因为我不知道如何进行任何控制。似乎 WPF 中的所有内容都必须包含在某种面板上。有 StackPanels、FlowPanels、DockPanel、[Grid](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)等。如果您没有其中之一，则无法编译。

到目前为止，我能够提出的唯一 XAML（使用 XAMLPad）：

```
<DockPanel xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Image Width="23" />
    <Label>Are you sure you want to move this file to the Recycle Bin?</Label>
    <Image Width="60" />
    <Label>117__6.jpg</Label>
    <Label>Type: ACDSee JPG Image</Label>
    <Label>Rating: Unrated</Label>
    <Label>Dimensions: 1072 × 712</Label>
    <Button Content="Yes" Width="50" Height="14"/>  
    <Button Content="Cancel" Width="50" Height="14"/>  
</DockPanel> 
```

这呈现为一个华而不实的怪物。没有任何控件放置或调整大小。我无法弄清楚如何在窗口中放置控件，也无法正确调整它们的大小。

有人可以将该屏幕截图转换为 XAML 吗？

**注意：**您不能测量屏幕截图。指定了所有对话单元 (dlu) 的宽度和高度。

**注意：** 1 个水平 DLU ！= 1 个垂直 DLU。水平和垂直 DLU 的大小不同。

* * *

# 也可以看看

*   [调整屏幕和字体设置的 WPF 应用程序（或者，我如何将 DLU 与 WPF 中的单位相关联？）](https://stackoverflow.com/questions/1425509/wpf-applications-that-adjust-to-screen-and-font-settings-or-how-would-i-relate)
*   [WPF 全局字体大小](https://stackoverflow.com/questions/893428/wpf-global-font-size)
*   [WPF 按钮相同/推荐宽度](https://stackoverflow.com/questions/2658511/wpf-buttons-same-recommended-width)
*   [.ScaleControl 的 WPF 版本？](https://stackoverflow.com/questions/6403918/wpf-version-of-scalecontrol)
*   [Microsoft 用户体验指南：推荐的大小和间距](http://msdn.microsoft.com/en-us/library/aa511279.aspx#sizingspacing)
*   [Microsoft 用户体验指南：布局指标](http://msdn.microsoft.com/en-us/library/bb847924.aspx)

**碰撞：** 2011 年 6 月 20 日

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T03:46:12.433

以下 XAML 将为您提供您正在寻找的效果。

请注意，我将标记中的 DLU 单元加倍 - 从而保持相同的方面。按钮高度为 14 个单位看起来很有趣。您可能需要修改市场上提供的数据。

此外，我开始将一些“Vista 布局”删除为单独的样式。您也许可以继续沿着这条路走下去，这样您就有了一组遵循 Vista 指南的可重复使用的样式。我很确定其他人也做过类似的事情。

此外，我对对话框的大小采取了一些自由。你提到你想要 210x96units - 你需要设置这个数量，加上窗口镶边。

无论如何，继续内容：

```
 <Window x:Class="VistaLayout.Dialog"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Delete File" 
      ResizeMode="NoResize"
      Height="212" Width="430">
    <Window.Resources>
      <Style x:Key="FooterButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="Width" Value="100" />
        <Setter Property="Height" Value="28" />
        <Setter Property="Margin" Value="8,0,0,0" />
      </Style>
      <Style x:Key="FooterPanelStyle" TargetType="{x:Type UniformGrid}">
        <Style.Resources>
          <Style TargetType="{x:Type Button}" BasedOn="{StaticResource FooterButtonStyle}" />
        </Style.Resources>
        <Setter Property="Rows" Value="1" />
        <Setter Property="HorizontalAlignment" Value="Right" />
      </Style>
    </Window.Resources>
    <DockPanel Margin="14">
      <!-- Footer -->
      <UniformGrid DockPanel.Dock="Bottom" 
                       Style="{StaticResource FooterPanelStyle}">
        <Button>_Yes</Button>
        <Button>_No</Button>
      </UniformGrid>

      <!-- Main Content -->
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="8" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <Image Width="64" />

        <StackPanel Grid.Column="2">
          <TextBlock Margin="0,6,0,14">Are you sure you want to move this file to the Recycle Bin?</TextBlock>

          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="14" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Image Width="60" />

            <StackPanel Grid.Column="2">
              <TextBlock>117__6.jpg</TextBlock>
              <TextBlock>Type: ACDSee JPG Image</TextBlock>
              <TextBlock>Rating: Unrated</TextBlock>
              <TextBlock>Dimensions: 1072 × 712</TextBlock>
            </StackPanel>

          </Grid>

        </StackPanel>

      </Grid>

    </DockPanel>
  </Window> 
```

与大多数 XAML 一样，这可以通过多种方式完成 - 这只是一种解决方案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-04T02:03:20.213

我知道这已经很老了，但我想我会尝试按照 OP 的要求去做。因此，这是我的尝试。顺便说一句，在我继续之前，我应该指出，由于某种原因，在使用 DLU 时 OPs 测量结果并不完全正确，但我认为我已经相当接近了。另外请记住，当涉及到这些东西时，我仍然是一个相对的n00b......所以如果我做错了什么或亵渎神明......道歉。

![最后结果](https://i.stack.imgur.com/Znqj2.jpg)

首先，我必须找到一种方法来获取给定字体的给定字母的宽度和高度（在我的情况下，Segoe UI 为 10px）......为此我使用了这个 SO 答案：[how-to-calculate-wpf -textblock-width-for-its-known-font-size-and-characters](https://stackoverflow.com/questions/9264398/how-to-calculate-wpf-textblock-width-for-its-known-font-size-and-characters/9266288#9266288)我创建了一个静态类来保存结果双打：

```
public static class Fonts
{
    public static double HorizontalDluMultiplier;
    public static double VerticalDluMultiplier;

    static Fonts()
    {
        var formattedText = new FormattedText(
            "A",
            CultureInfo.CurrentUICulture,
            FlowDirection.LeftToRight,
            new Typeface("Segoe UI"),
            12.0,
            Brushes.Black);
        Fonts.HorizontalDluMultiplier = formattedText.Width / 4;
        Fonts.VerticalDluMultiplier = formattedText.Height / 8;
    }
} 
```

获得指标后，我必须创建一个 WPF 转换器，该转换器采用给定的 ConverterParameter（在本例中为 DLU 中的数字）并输出双倍像素。这是我用的转换器...

```
public class HorizontalDluToPixelConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return (Double.Parse((parameter as string))) * Fonts.HorizontalDluMultiplier;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我认为不用说我有一个单独的垂直版本的转换器。

完成后，我只需在 XAML 中布置窗口，并使用转换器设置高度和宽度。我使用一个网格来布置整个窗口。但是要设置列宽和行高，我使用了转换器，如下所示：

```
<Window.Resources>
    <converters:HorizontalDluToPixelConverter x:Key="HorizontalConverter" />
    <converters:VerticalDluToPixelConverter x:Key="VerticalConverter" />
</Window.Resources>

<Grid.RowDefinitions>
    <RowDefinition Height="{Binding Converter={StaticResource VerticalConverter}, ConverterParameter=7}" />
    etc...
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="{Binding Converter={StaticResource HorizontalConverter}, ConverterParameter=7}" />
    etc... etc...
</Grid.ColumnDefinitions> 
```

希望这对未来的人也有帮助（如果它实际上有帮助的话）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T17:44:15.893

查看[Grid 控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)- 它支持相对大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-22T14:21:23.930

这是我在 MSDN 上找到的关于[Layout Metrics](http://msdn.microsoft.com/en-us/library/bb847924.aspx)的更详细的链接。WPF DIU 定义为 1/96 英寸，DLU 到像素的转换取决于字体，如下表所示。

![从 DLU 转换为相对像素并返回](https://lh3.ggpht.com/_K6uP32RV6wo/S_fjqgehAtI/AAAAAAAAAIE/BineS81CeSQ/s720/DLU%20to%20Pixel%20Conversion%20Table.png)

因此，将这些信息与系统 DPI 设置一起使用，并根据您所定位的字体，您可以计算出有多少 DUI 与垂直或水平 DLU 单位中的给定测量相关。我还没有看到任何基于 javascript 的计算器，但是用任何编程语言创建一个类似的工具来让它变得更容易一点是非常简单的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T19:16:05.507

Canvas 布局元素允许基于坐标的布局，类似于您习惯的布局，如果您有 Canvas，您甚至可以在可视化编辑器中获得一些指导。例如：

```
<Window xmlns:mc='http://schemas.openxmlformats.org/markup-compatibility/2006' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' xmlns:d='http://schemas.microsoft.com/expression/blend/2008' mc:Ignorable='d' Title='Spin-Echo Image Processing' Width='673' x:Class='ImageR2.CLASPmap' Height='961' xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'>
    <Canvas Name='canvas1'>
        <TextBlock Name='TEXT_Program' Canvas.Top='27' Width='133' Height='21' Canvas.Left='875'>CLASPmap:</TextBlock>
        <TextBlock Name='TEXT_Heading' Canvas.Top='27' Width='368' Height='27' Canvas.Left='1008'>Transverse Relaxation Rate Mapping</TextBlock>
        <TextBlock Name='TEXT_XYCoordinates' Canvas.Top='251' Width='139' Height='21' Canvas.Left='869'>X &amp; Y Coordinates</TextBlock> 
```

# database - 与 Mnesia 保持关系完整性

> ID：395198
> 
> 赞同：10
> 
> 时间：2008-12-27T17:43:22.383
> 
> 标签：database, erlang, mnesia

我最近一直在研究 Erlang，我决定使用 Mnesia 来完成我的数据库工作，因为它可以毫无问题地存储任何类型的 Erlang 数据结构、轻松扩展、与列表推导一起使用等。

来自标准 SQL 数据库的大多数行可以并且应该由主键标识，通常是自动递增的整数。默认情况下，Mnesia 将行的第一个字段视为其键。据我所知，它也没有办法拥有一个自动递增的整数键。

鉴于我有这些代表我的表的虚构记录：

```
-record(user, {name, salt, pass_hash, email}).
-record(entry, {title, body, slug}).
-record(user_entry, {user_name, entry_title}). 
```

我认为使用用户名对于某些目的可能已经足够了，就像条目标题一样，为了识别资源，但我该如何保持完整性呢？

假设用户更改了其名称，或者条目的标题在编辑后发生了更改。如何确保我的数据仍然正确相关？在用户名发生变化时使用用户名更新每个表听起来是一个糟糕的主意，无论它是如何放置的。

在 Mnesia 中实施某种主键系统的最佳方法是什么？

另外，如果第一个字段通常是键，那么像“user_entry”这样的中间表会怎么做？否则，在 Mnesia 中表示多对多关系的更好方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-27T19:59:49.787

我更喜欢使用 GUID 而不是自动递增整数作为人工外键。GitHub 上提供了一个[Erlang uuid 模块](http://github.com/travis/erlang-uuid/tree/master)`{now(), node()}`，或者您可以使用，因为该`now/0`文档说：“还可以保证对该 BIF 的后续调用返回不断增加的值。”

在我看来，使用可以改变的东西作为主键似乎是一个独立于数据库系统的坏主意。

不要忘记您不需要将 Mnesia 中的数据标准化为第一范式；在您的示例中，我将考虑以下结构：

```
-record(user, {id, name, salt, pass_hash, email, entries}).
-record(entry, {id, title, body, slug, users}). 
```

其中`entries`和`users`是 id 列表。当然，这取决于您想要的查询。

编辑：固定为多对多而不是多对一。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-28T14:04:28.893

Mnesia 确实支持 . 形式的序列（自动递增整数）`mnesia:dirty_update_counter(Table, Key, Increment)`。要使用它，您需要一个具有两个属性 Key 和 Count 的表。尽管有这个名字，但dirty_update_counter 是原子的，即使它不在事务中运行。

[Ulf Wiger 在他的rdbms 包](http://ulf.wiger.net/rdbms/doc/rdbms.html)中在 mnesia 之上提供了典型的 RDBMS 特性方面做了一些工作。他的代码提供了外键约束、参数化索引、字段值约束等。不幸的是，这段代码已经两年没有更新了，如果没有相当多的 Erlang 经验，可能很难运行。

在设计和使用 mnesia 时，您应该记住 mnesia 不是关系数据库。它是一个事务性的键/值存储，当你不规范化时更容易使用。

如果您的用户名是唯一的，您可以使用以下模式：

```
-record(user, {name, salt, pass_hash, email}).
-record(entry, {posted, title, body, slug, user_name}). 
```

`posted`文章上传时的 erlang:now() 时间在哪里。`user_name`如果您经常需要为用户检索所有文章的列表，则可能需要二级索引。由于此数据被拆分到两个表中，因此您必须在应用程序代码中强制执行任何完整性约束（例如，不接受没有有效用户名的条目）。

mnesia 中的每个字段值都可以是任何 erlang 术语，因此，如果您对任何一个特定字段的唯一键感到茫然，您通常可以组合一些字段来为您提供一个始终唯一的值 - 可能是 {Username,发布日期，发布时间}。Mnesia 允许您通过`mnesia:select(Table, MatchSpec)`. MatchSpecs 很难手动编写，因此请记住，它`ets:fun2ms/1`可以为您将伪 erlang 函数转换为 matchspec。

在这个例子中，fun2ms 为我们生成了一个匹配规范，用于搜索一个博客条目表`-record(entry, {key, title, slug, body}).`，其中 key 是`{Username, {Year, Month, Day}, {Hour, Minute, Second}}`- 作者的用户名以及文章发布的日期和时间。`TargetUsername`下面的示例检索到2008 年 12 月期间所有博客文章的标题。

```
ets:fun2ms(fun (#entry{key={U, {Y,M,_D}, _Time}, title=T})
             when U=:=TargetUsername, Y=:=2008, M=:=12 ->
               T
           end). 
```

# architecture - System.Transactions 中避免事务升级的策略

> ID：395199
> 
> 赞同：7
> 
> 时间：2008-12-27T17:43:49.513
> 
> 标签：architecture, ado.net, transactions, n-tier-architecture, system.transactions

因此，根据[我上一个问题](https://stackoverflow.com/questions/394702/multiple-connections-with-same-connection-string-under-a-single-transaction-ele)的答案，如果在事务期间打开多个连接，即使这些连接都具有相同的连接字符串，事务也会从 LTM 提升到 DTC *。*

那么，我的下一个问题是，可以采用哪些策略来避免这种“功能”？在我看来，根据资源使用情况，我想确保尽可能多地使用 LTM。在正确面向对象的业务逻辑层中，我能想到的唯一方法是在数据访问层创建一个请求级静态连接对象，并在调用之间共享该对象，直到请求完成（这里的隐含知识是业务对象实体是谨慎的并且不知道它们会被调用的顺序，另外一个事实是人们不希望将连接对象冒泡到业务对象层，因为那将是数据存储实现细节渗入另一层）。

还有其他人有什么想法不会完全破坏 n 层系统的层封装吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T18:10:52.297

我使用的是 TransactionHelper 类更新 TableAdapter 中的所有命令，以将连接和事务替换为启动事务的 TableAdapter 中的连接和事务。您可以在 Scott Lanford 的博客[CodeExperiment](http://www.codeexperiment.com/)上找到[一些执行此操作的代码，](http://www.codeexperiment.com/post/Implementing-Transactional-TableAdapters.aspx)您可以根据需要对其进行调整。Ryan Whitaker 也有[类似的做法](http://weblogs.asp.net/ryanw/archive/2006/03/30/441529.aspx)。

请注意，自从我开始使用 LINQToSQL 后，我不再遇到这个问题。您可能需要考虑使用 LINQToSQL 或 nHibernate 作为替代解决方案。两者都可以很好地支持本地交易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T02:06:07.070

我不得不问，为什么要如此努力地避免 DTC？在这个或以前的答案中没有提到为什么，它看起来好像你可能患有过早的优化综合症。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T02:15:47.753

正如 casper 所说，避免 DTC 可能为时过早，尽管它很重要。您可以使用静态工厂实现连接，以便简单地返回新对象，然后如果您确定有问题，您可以实现一种机制，可以将事务存储在 aa TLS（或 httpcontext，如果您在 ASP 中）中。并且不必更改任何代码。

这个问题实际上已经被问到并得到了回答，但是当我这样做时我找不到它，我会更新它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T18:49:16.370

我建议编写一个包装类来管理连接、事务、命令对象，这就是整个数据库。这是一种非常轻量级的 nHibernate。此类将提供 executeStatement(...)、executeQuery(...)、addParameter(...)、startTransaction(...) 等方法。

开始交易时，您可以提供一些（如果需要唯一的）标识符，您可以将所有后续关于同一交易的请求绑定到该标识符。然后，这个包装类将保存一个静态映射到哪个事务正在使用哪个连接运行，并会自动使用正确的映射或根据需要创建一个新的映射。

您将从这种方法中获得一些额外的功能，因为您将集中所有持久性内容：

*   轻松记录所有语句以进行调试、性能测试
*   锁定/网络问题的自动重试逻辑
*   更简单的 DB 提供者切换
*   基本上你可以通过 nHibernate 等持久性框架获得一些东西，但更轻量级且不那么复杂

# c# - 为组合框格式化文本，C#

> ID：395207
> 
> 赞同：5
> 
> 时间：2008-12-27T17:46:54.733
> 
> 标签：c#, winforms, string, combobox

我需要在下拉框中对齐三个值。我怎样才能做到这一点？我一直在尝试这个： `String.Format("{0,-30}{1,-15}{2,-10}{3,-8}", new object[] { cusJob, service, username, time });` 但这使它不均匀，因为它不是等宽字体。我真的不想使用等宽字体，而且我以前见过应用程序对齐它，所以我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-27T18:08:53.800

您需要将 DropDownList 的 DrawMode 设置为 OwnerDrawFixed 并在 DrawItem 事件处理程序中呈现项目。

示例在[此处](http://www.codeproject.com/KB/combobox/CheckComboBox.aspx)、[此处](http://www.mctainsh.com/Articles/Csharp/ComboBoxColor.aspx)和[此处](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/0438b63a-5f6b-401c-8ea9-cd9e950ed6e1/)，但如果您搜索“dropdownlist ownerdraw columns drawmode”，可以在网络上找到更多示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-12-27T18:03:34.060

在您的字符串中，您可以使用**\t**控制字符（制表符）来标记值，尽管可能需要做更多的字符串操作来计算出您需要在字符串中放入多少个制表符。

**编辑：**对于 vb.net，请参见**controlchars**类

# java - Java中的无损视频编解码器播放

> ID：395215
> 
> 赞同：3
> 
> 时间：2008-12-27T18:01:43.113
> 
> 标签：java, video, codec, lossless-compression

我需要使用无损视频编解码器对帧序列进行编码，并在 Java 应用程序中播放它们。我不在乎文件大小。输出帧应与输入帧完全匹配。即使在高比特率下，有损编解码器也不会这样做。

[JMF](http://java.sun.com/javase/technologies/desktop/media/jmf/)或[FMJ](http://fmj-sf.net/)似乎不支持这些著名的无损视频编解码器：

*   HuffYUV
*   核心PNG
*   拉格瑞斯
*   FFV1
*   ...

您知道 Java 支持的任何无损视频编解码器吗？

我考虑过的其他选择：

*   动画 GIF：播放是否保证像真正的视频编解码器一样具有恒定的帧速率？
*   加载并显示单独的帧：以恒定的帧速率执行此操作并且不丢失太多帧有多困难？
*   Proce55ing：视频播放库需要 Quicktime，我的平台上没有。

编辑：我最终决定以最高质量满足 JMF 的（非标准）MotionJPEG。它不是严格无损的，但仍然比 MPEG4 质量好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T10:17:52.470

FMJ 确实支持存储/播放一系列 PNG 图像的实验方法，就像 MJPEG 是一系列 JPEG 图像一样。一种是对 PNG 进行 uuencode 的实验性 XML 文件格式（相当臃肿），另一种是 x-multipart-mixed-replace HTTP 格式，FMJ 支持以扩展名为 .mmr 的文件格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T15:54:39.047

*   GIF 动画：是的，您可以定义动画 GIF 的帧率（实际上您可以为每一帧设置延迟）

*   手动显示帧：取决于硬件、帧速率和图像大小。如果没有硬件支持，30fps 的高清分辨率将很困难，缩略图大小在任何平台上都不是问题。

*   另一种选择：根据您想要做什么，您可以考虑“远程控制”另一个播放器或框架，可能使用一些本机代码。例如，在 *nix/X11 上嵌入 mplayer，或者在 Windows 上使用 COM 控制 WMP 或 DirectShow。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T18:47:51.147

好吧，既然你说文件大小不是问题，gzip/bzip2 可以是一个快速而轻松的选择。它不会提供最大的压缩，但如果您找不到更好的答案，它可能是最后的手段。

Gzipped 文件可以使用 java.util.zip.GZIPInputStream 透明地打开，Bzip2 也可以使用类似的接口。

# emacs - 配置 Emacs FlyMake 以使用 Rakefile 和 Makefile

> ID：395220
> 
> 赞同：4
> 
> 时间：2008-12-27T18:03:52.593
> 
> 标签：emacs, ide, makefile, rake

我已经学习使用 Emacs 有一段时间了。至今非常喜欢。

我的问题是，对于小 C 代码，我更喜欢使用 Rake 而不是 Make。然而，flymake 似乎除了 Make 之外什么都不想要。因为它抱怨它找不到 Makefile。从命令行 Rake 的使用方式与 Make 相同，所以我想知道是否可以输入一些 emacs 配置以允许 flymake 使用 Rake？

纠正一下我正在做的事情。我实际上并没有编辑 Rakefile。flymake-ruby 根本没有帮助。我正在使用 C 代码。我只是使用 RAKE 使用 gcc 而不是 MAKE 编译 c 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-31T01:41:37.503

对，现在明白了；很抱歉之前的混乱。

快速浏览 flymake.el，对于 *.c 文件，“make”调用最终来自这里：

```
(defun flymake-get-make-cmdline (source base-dir)
  (list "make"
    (list "-s"
          "-C"
          base-dir
          (concat "CHK_SOURCES=" source)
          "SYNTAX_CHECK_MODE=1"
          "check-syntax"))) 
```

调用 by `flymake-simple-make-init`，之所以调用它，是因为这就是`*.c`文件映射到 by 的内容`flymake-allowed-file-name-masks`。

因此，*正确*的答案是修改`flymake-allowed-file-name-masks`以将`*.c`文件映射到不同的 init defun，然后编写该 defun 以按照您想要的方式调用 rake。已经为各种事物编写了许多这样的 defun，其中大多数都非常简短和甜美——所以即使你不了解 Emacs Lisp，你也可以用最少的 futzing 得到一些东西。（*真正正确*的答案是更改`flymake-simple-make-init`，以便从 defcustom 变量中读取命令名称，然后将该更改提交回上游......）

鉴于您说您需要做的就是使用与“make”相同的参数调用“rake”，那么快速而肮脏的答案就是获取 flymake.el 的副本，将其尽早粘贴到您的`load-path`, 然后 munge 'make' 字符串`flymake-get-make-cmdline`改为读取 'rake'。这至少会让你进入下一步......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T19:17:43.020

Rake 是 Ruby 语法，因此只需在文件中为 rby 打开 flymake 即可。 [此链接](http://coderepos.org/share/browser/dotfiles/emacs/kentaro/.emacs.d/conf/init-ruby.el)指向某人的 elisp 代码，用于执行此操作。EmacsWiki[也有很多内容](http://www.emacswiki.org/emacs/FlyMake)。（事实上​​，你应该阅读 EmacsWiki，那里有很多有用的东西。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-30T18:52:22.977

继续 Charlie 所说的， EmacsWiki上的[FlymakeRuby](http://www.emacswiki.org/)[节点](http://www.emacswiki.org/emacs/FlymakeRuby)正好有你需要的代码，包括在 rakefiles 上启用它的位。

# exception - 来自 DLL/共享库的异常

> ID：395223
> 
> 赞同：2
> 
> 时间：2008-12-27T18:07:27.000
> 
> 标签：exception, dll, shared-libraries

假设您正在开发一个包含要通过 DLL 导出的类的库（在 Windows 上，或类似的共享库，如 Linux ELF 共享库）。这些类的成员函数从标准库或库定义的异常中抛出异常。

在 DLL 中编码以向映射 DLL 地址空间的模块抛出异常是完全安全的吗？在向客户端模块抛出异常的共享库中开发软件组件时要考虑哪些因素？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T20:15:43.217

我同意期望跨库边界抛出的异常正常工作是完全合理的。但是，如果您遇到一些小故障，请不要太惊讶。谷歌搜索[“gcc shared object exceptions”](http://www.google.com/search?hl=en&ie=UTF-8&q=gcc%20shared%20object%20exceptions&sa=N&tab=gw)（也可以查看组）显示很多人多年来遇到了很多问题。上次我用 gcc（约 2003 年）尝试它时，我放弃了，因为它对我不起作用。希望从那时起情况有所改善。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T20:02:54.193

您的库抛出异常或允许异常从底层框架冒出是完全合理的。但是，您需要小心地为库的用户记录此行为，以便代码的使用者可以采取适当的措施来处理代码可能抛出（或未被捕获）的任何异常。

# javascript - jQuery UI Datepicker 和 datejs

> ID：395230
> 
> 赞同：7
> 
> 时间：2008-12-27T18:10:56.930
> 
> 标签：javascript, jquery, datepicker, datejs

我想要一个 datepicker，你也可以在其中输入，基本上我想将 jQuery UI Datepicker 和 datejs 合二为一。我想输入“明天”，我希望它选择正确的一天。我希望能够输入“星期六”，它实际上是正确的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T19:24:17.970

如果您有任何创建 jQuery 插件的经验，那么这项工作不会太难。使用在 keyup/blur/您认为必要的任何事件上创建 UI 日期选择器和值测试（使用 date.js）所需的代码包装目标输入。您需要确保在值更改时在 datepicker 实例上设置日期（调用 datepicker("setDate", date)）

我在工作中做过非常相似的事情；如果您对代码感兴趣，我应该能够将其提供（以其当前格式 - 缺乏一点润色，但足够清晰）。

# c# - 在多线程代码中读取 .NET Int32 时，我们需要锁定它吗？

> ID：395232
> 
> 赞同：14
> 
> 时间：2008-12-27T18:13:00.547
> 
> 标签：c#, .net, multithreading, locking

我正在阅读以下文章： http: [//msdn.microsoft.com/en-us/magazine/cc817398.aspx](http://msdn.microsoft.com/en-us/magazine/cc817398.aspx) Joe Duffy 的“解决多线程代码中的 11 个可能问题”

它向我提出了一个问题：“在多线程代码中读取 .NET Int32 时，我们需要锁定它吗？”

我知道如果它是 32 位 SO 中的 Int64，它可能会撕裂，正如文章中所解释的那样。但是对于 Int32 我想象了以下情况：

```
class Test
{
  private int example = 0;
  private Object thisLock = new Object();

  public void Add(int another)
  {
    lock(thisLock)
    {
      example += another;
    }
  }

  public int Read()
  {
     return example;
  }
} 
```

我认为没有理由在 Read 方法中包含锁。你？

**更新**基于答案（由 Jon Skeet 和 ctacke 提供）我知道上面的代码仍然容易受到多处理器缓存的影响（每个处理器都有自己的缓存，与其他处理器不同步）。下面的所有三个修改都解决了这个问题：

1.  在“int example”中添加“volatile”属性
2.  插入一个 Thread.MemoryBarrier(); 在实际阅读“int example”之前
3.  在“lock(thisLock)”中读取“int example”

而且我也认为“volatile”是最优雅的解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-12-27T19:15:00.670

锁定完成了两件事：

*   它充当互斥锁，因此您可以确保一次只有一个线程修改一组值。
*   它提供内存屏障（获取/释放语义），确保一个线程进行的内存写入在另一个线程中可见。

大多数人都明白第一点，但不明白第二点。假设您从两个不同的线程中使用了问题中的代码，一个线程`Add`重复调用，另一个线程调用`Read`. 原子性本身将确保您最终只能读取 8 的倍数 - 如果有两个线程调用`Add`您的锁将确保您不会“丢失”任何添加。但是，您的`Read`线程很可能只会读取 0，即使在`Add`多次调用之后也是如此。在没有任何内存屏障的情况下，JIT 可以将值缓存在寄存器中，并假设它在读取之间没有改变。内存屏障的目的是确保某些内容真正写入主存，或真正从主存中读取。

内存模型可能会变得很麻烦，但是如果您遵循每次想要访问共享数据（用于读取*或*写入）时取出锁的简单规则，那么您会没事的。有关更多详细信息，请参阅我的线程教程的[易变性/原子性](http://www.yoda.arachsys.com/csharp/threads/volatility.shtml)部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-27T19:28:22.297

这一切都取决于上下文。在处理整数类型或引用时，您可能希望使用**System.Threading.Interlocked**类的成员。

典型用法如：

```
if( x == null )
  x = new X(); 
```

可以替换为调用**Interlocked.CompareExchange()**：

```
Interlocked.CompareExchange( ref x, new X(), null); 
```

Interlocked.CompareExchange() 保证比较和交换作为原子操作发生。

Interlocked 类的其他成员，例如**Add()**、**Decrement()**、**Exchange()**、**Increment()**和**Read()**都以原子方式执行各自的操作。阅读 MSDN 上的[文档](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-27T18:40:50.303

这完全取决于您将如何使用 32 位数字。

如果您想执行如下操作：

```
i++; 
```

这隐含地分解为

1.  读取值`i`
2.  添加一个
3.  存储`i`

如果另一个线程在 1 之后，但在 3 之前修改了 i，那么你有一个问题，我是 7，你添加一个到它，现在它是 492。

但是，如果您只是读取 i 或执行单个操作，例如：

```
i = 8; 
```

那么你不需要锁定我。

现在，您的问题是，“......读取时需要锁定 .NET Int32......”但您的示例涉及读取*然后写入*Int32。

所以，这取决于你在做什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-27T18:43:25.243

只有 1 个线程锁无济于事。锁的目的是阻塞*其他*线程，但如果没有其他人检查锁，它就不起作用！

现在，您无需担心 32 位 int 的内存损坏，因为*写入*是原子的 - 但这并不一定意味着您可以无锁。

在您的示例中，可能会出现有问题的语义：

```
example = 10

Thread A:
   Add(10)
      read example (10)

Thread B:
   Read()
      read example (10)

Thread A:
      write example (10 + 10) 
```

这意味着 ThreadB在线程 A 开始更新*后*开始读取示例的值 - 但读取了预更新的值。我想这是否是一个问题取决于这段代码应该做什么。

由于这是示例代码，因此可能很难在那里看到问题。但是，想象一下规范的计数器功能：

```
 class Counter {
    static int nextValue = 0;

    static IEnumerable<int> GetValues(int count) {
       var r = Enumerable.Range(nextValue, count);
       nextValue += count;
       return r;
    }
 } 
```

然后，以下场景：

```
 nextValue = 9;

 Thread A:
     GetValues(10)
     r = Enumerable.Range(9, 10)

 Thread B:
     GetValues(5)
     r = Enumerable.Range(9, 5)
     nextValue += 5 (now equals 14)

 Thread A:
     nextValue += 10 (now equals 24) 
```

nextValue 正确递增，但返回的范围将重叠。从未返回 19 - 24 的值。您可以通过锁定 var r 和 nextValue 分配来解决此问题，以防止任何其他线程同时执行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-27T19:29:17.117

如果您需要它是原子的，则锁定是必要的。由于缓存，*不能*保证32 位数字的读取和写入（作为配对操作，例如当您执行 i++ 时）是原子的。此外，个人读取或写入不一定直接进入寄存器（易失性）。如果您希望修改整数（例如，读取、递增、写入操作），使其 volatile 不会给您任何原子性保证。对于整数，互斥锁或监视器可能太重（取决于您的用例），这就是[Interlocked 类](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)的用途。它保证了这些类型操作的原子性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-27T18:16:58.713

一般来说，只有在修改值时才需要锁

编辑：[Mark Brackett](https://stackoverflow.com/users/2199/mark-brackett)的精彩总结更贴切：

> “当您希望其他非原子操作成为原子操作时，需要锁定”

在这种情况下，在 32 位机器上读取 32 位整数大概*已经*是原子操作了……但也许不是！也许[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7.aspx)关键字可能是必要的。

# bash - Makefile 有什么有趣的用途可以分享吗？

> ID：395234
> 
> 赞同：14
> 
> 时间：2008-12-27T18:15:45.033
> 
> 标签：bash, scripting, makefile, gnu-make

“make”不仅对构建您的编程项目有用，而且在其他领域似乎没有得到充分利用。

例如，可以将许多 shell 脚本重写为 Makefile 以允许独立部分并行运行（使用“make -jXX”）以保持所有 CPU 内核繁忙，并显式声明依赖项作为额外的好处，以防万一考虑在你的 shell 脚本中重新排序一些有副作用的任务。

你有什么不寻常的使用 make / Makefiles 的有趣故事要分享吗？您是否使用其他一些实用程序作为廉价的作业调度程序？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-30T09:34:19.313

Make 的并行性对于 shell 脚本特别方便。假设您想获得整套主机的“正常运行时间”（或基本上执行任何缓慢的操作）。您可以循环执行此操作：

```
cat hosts | while read host; do echo "$host: $(ssh $host uptime)"; done 
```

这有效，但速度很慢。您可以通过生成子外壳来并行化：

```
cat hosts | while read host; do (echo "$host: $(ssh $host uptime)")&; done 
```

但是现在您无法控制生成多少线程，并且`CTRL-C`不会完全中断所有线程。

这是 Make 解决方案：将其保存到文件（例如。`showuptimes`）并标记为可执行文件：

```
#!/usr/bin/make -f

hosts:=$(shell cat)
all: ${hosts}

${hosts} %:
        @echo "$@: `ssh $@ uptime`"

.PHONY: ${hosts} all 
```

现在运行`cat hosts | ./showuptimes`将一一打印正常运行时间。`cat hosts | ./showuptimes -j`将并行运行它们。调用者可以直接控制并行化程度 ( `-j`)，或者可以通过系统负载 ( ) 间接指定它`-l`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-30T08:42:55.907

除了在编程中的明显用途之外，我还看到 Makefile 用于在服务器上执行重复性任务以管理系统设置，例如用户/组创建、包升级/更新以及将配置文件复制到位。我还看到（并使用过）rake 在基于 Ruby 的环境中执行此操作。

我听说过的最复杂的例子是[ISConf](http://www.isconf.org/)，一个配置管理工具。[我是从Puppet](http://reductivelabs.com/)的作者 Luke Kanies在[他的博客](http://madstop.com/2008/11/01/a-short-history-of-puppet-pt1/)上听说的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-30T08:51:31.457

根据“make”的种类，您可以通过使用可执行的 makefile 与 shell 脚本来处理任务的依赖关系..即在一个 init 脚本需要启动 10 个服务的场景中......一个接一个（即服务两个需要服务一个在启动之前启动并活着），它很容易通过生成文件完成。

很多 GNU/Linux 打包器都使用这个，例如 debian/rules 和其他。所以，是的，如果操作正确，make 在启动程序和构建程序方面同样出色。

问题是，并不是每个人都安装了构建工具链……所以 shell 脚本或批处理文件仍然是可移植的（因此是“正确的”）方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T22:52:08.267

这可能意味着我的想象力不足，但是很难在 makefile 中获得足够的灵活性来进行此类使用。实现它的“明显”方法是在“ `make`”命令行上指定宏值。

```
make -f script.mk MACRO="list of files on which to operate" 
```

这比一个简单的 shell 脚本更冗长 - 而且你失去了使用 shell 文件名扩展的简单能力。解决方法是：

```
make -f script.mk MACRO="$(echo *[io]*)" 
```

我会提出这个关于[Why not use #!/bin/make at the top of makefiles](https://stackoverflow.com/questions/385539/)作为（可执行）makefile 的奇怪用法的 SO question，但目标不是做不寻常的事情（只是无聊的旧软件构建）；只是为了对`make`.

使用该技术，您可以将调用简化为：

```
script.mk MACRO="$(echo *[io]*)" 
```

这仍然比以下内容更冗长：

```
script *[io]* 
```

我想`script`可以写成调用`make`. 这一切都取决于。我不相信有足够的里程可以从中获得。YMMV。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-15T13:41:49.263

Make 也可以用作同步实用程序。例如：

```
#!/usr/bin/make -f

FILES = *.html *.js *.css images/*.jpg subpage/*.html
LAST_SYNC = .last_sync
SCP = scp webserver.com:/home/john/public_html

.PHONY: sync

sync : $(LAST_SYNC)

$(LAST_SYNC) : $(FILES)
    $(SCP) $?
    touch $(LAST_SYNC) 
```

此 Makefile 创建一个空文件`.last_sync`，用于记录我们上次将本地存储库与远程存储库同步的时​​间。每次运行此脚本时，Make 都会检查`FILES`自上次运行同步以来列出的任何文件是否已被修改，并将它们复制到服务器，然后更新`.last_sync`. 关键是自动变量`$?`，它包含比规则目标更新的所有先决条件的列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-27T18:19:35.383

我的工作使用了一个奇怪的东西：依赖项不存在，所以它总是重建一切。

还不如使用批处理文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T06:24:41.837

make 也用于驱动进程........我最近才知道这一点，不仅仅是个人安装或管理构建，而是整个过程。以前我认为 make 仅用于编译项目，但只要有可能需要执行的依赖项或活动链，make 就可以在那里使用......我最近看到了一个管理代码直到交付/部署的流程的一切，包括数据处理更新（24小时+）....好东西:)

# ruby-on-rails - 是否可以在运行时加载 Rails 助手？

> ID：395237
> 
> 赞同：4
> 
> 时间：2008-12-27T18:17:28.993
> 
> 标签：ruby-on-rails, ruby, helper, view-helpers

我的视图可能会有很大差异，具体取决于特定用户选择的“模式”。

我想我会将不同的行为提取到两个不同的 Helpers 中，然后在 Controller 中编写如下代码：

```
class MyController < ApplicationController

case mode
when 'mode1'
  helper "mode1"
when 'mode2'
  helper "mode2"
else
  raise "Invalid mode"
end

etc... 
```

一旦加载了正确的帮助程序，则在两个帮助程序中定义的类似 <%= edit_item %> 的语句将为特定的“模式”加载正确的表单。

这在开发中效果很好，但在生产中，case 语句只运行一次。然后你就会被第一次加载的任何帮助程序困住（呃！我应该知道的。）

我已经想到了其他方法来实现我需要做的事情，但我仍然认为使用 Helpers 是改变 View 行为的一种很好的干净方式。

有谁知道我如何在运行时加载（或重新加载）助手？

TIA：约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-27T19:48:07.453

在对这个问题进行了更多研究之后，我开始认为这是一个愚蠢的想法......在多用户系统上运行时替换模块的含义看起来并不好。

除非有人提出一个改变我想法的好主意，否则我会在一天结束前收回这个问题。

- 约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T21:55:05.137

我可以想到几种方法来做到这一点，但不确定是否按照您的建议加载模块。

加载不同的部分并根据状态选择要加载的部分。

```
<% if @mode = 'mode1 %>
  Mode 1:
  <%= render :partial => 'mode1' %>
<% else %>
  Mode 2:
  <%= render :partial => 'mode2' %>
<% end %> 
```

或者，如果您想将该逻辑排除在视图之外（这可能是一件好事），您可以在控制器中放置一些东西以根据模式呈现不同的操作：

```
def index
   @mode = params[:query]
   case @mode
     when 'mode1' then render :action => "mode1"
     when 'mode2' then render :action => "mode2"
     else raise "Invalid mode"
   end
end 
```

这似乎比将逻辑放在视图中要好得多。

# c# - 扩展 System.Windows.Forms.ComboBox

> ID：395240
> 
> 赞同：1
> 
> 时间：2008-12-27T18:18:33.670
> 
> 标签：c#, winforms, user-controls, combobox, onpaint

我想使用 ReadOnly 属性扩展 System.Windows.Forms.ComboBox 控件，当 ReadOnly = true 时，它​​将显示所选项目的文本（类似于标签）。（我不喜欢通过设置 Enabled=false 实现的禁用外观）

我如何在winforms中做到这一点？这在 ASP.NET 中非常简单，我所要做的就是重写 Render 方法。然而，使用 winforms 似乎并不那么简单。

从我收集到的我需要

a) 覆盖 OnPaint 方法

b) 调用 this.SetStyle(ControlStyles.UserPaint, true) 以便调用 OnPaint。

但现在看来我必须自己完成所有的绘画。真的吗？当 ReadOnly = false 时，是否不能让基本 ComboBox 处理绘制控件？另外，我应该使用什么 ControlStyles？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-27T19:41:27.700

做 windows 做的事情。
组合框中只有 1 个项目，然后选择并启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T19:19:36.747

将 ComboBox 控件放在 UserControl 上。UserControl 将传递大多数属性和事件，但为了响应 .ReadOnly 属性，它将隐藏 ComboBox 控件并改为显示 ReadOnly 编辑框。

# perl - 是否有 CPAN 模块可以帮助我在 Perl 中解析 RSS 或 ATOM 提要？

> ID：395243
> 
> 赞同：8
> 
> 时间：2008-12-27T18:20:50.407
> 
> 标签：perl, rss, cpan, atom-feed

我需要 Perl 中的代码来请求和解析 ATOM 和 RSS 提要。是否有用于此的 CPAN 模块？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-27T19:56:50.477

几乎每次您问“我如何在 Perl 中执行 X？”时，答案都是查看[CPAN Search](http://search.cpan.org)以找到执行此操作的模块。

要从 Web 下载，[LWP](http://search.cpan.org/dist/libwww-perl)系列模块可以为您提供帮助。要解析文档，请尝试名称中包含[Feed](http://search.cpan.org/search?query=Feed&mode=all)、[RSS](http://search.cpan.org/search?query=RSS&mode=all)或[Atom](http://search.cpan.org/search?query=Atom&mode=all)的内容。

不过，四年后，我现在推荐[Mojolicious](https://www.metacpan.org/module/Mojolicious)，它有自己的用户代理模块，并且对 DOM 解析和提取文档部分的各种方法提供了非常强大的支持。根据您的需要，您可能不再需要特殊的提要模块。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-27T18:25:57.807

[XML::FeedPP](http://search.cpan.org/search?query=XML%3A%3AFeedPP+++%09+&mode=all)很好...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-27T20:16:16.290

[XML::RSS](http://search.cpan.org/dist/XML-RSS)和[XML::Atom](http://search.cpan.org/dist/XML-Atom)都存在。请注意——XML::Atom 似乎没有得到积极维护，据报道存在错误。但是基础知识应该足以让您继续前进。

获取提要 LWP::Simple 是一个不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-23T14:01:55.787

我发现[XML::Feed](http://search.cpan.org/~simonw/XML-Feed/)可以更好地处理如果您尝试解析您无法控制生成的任意提要时将遇到**的错误。**

# usability - 可用性灾难的例子？

> ID：395247
> 
> 赞同：21
> 
> 时间：2008-12-27T18:24:31.757
> 
> 标签：usability

有人有可用性灾难的好例子吗？

这是一个例子。赫克托是一位拥有庞大团队的经理。部门管理员想要向 Hector 发送一份包含团队工资的电子表格。她在 Outlook 的“收件人：”字段中键入“Hector”。它会自动完成到“Hector's Team”，但直到她发送它之后她才注意到这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-27T18:52:48.953

显然有很多糟糕的网站，但老实说，使用`<blink>`文本和动画 GIF 的最坏后果是用户轻微的眼睛疲劳。

[Alan Blackwell](http://www.cl.cam.ac.uk/~afb21/)最喜欢的导致大规模失败的糟糕设计的例子之一是[2000 年棕榈滩选举的失败](http://en.wikipedia.org/wiki/United_States_presidential_election_in_Florida,_2000#Irregularities)。

[![蝴蝶选票](https://i.stack.imgur.com/Hz263.jpg)](https://i.stack.imgur.com/Hz263.jpg)

这张图片显示了 2000 年佛罗里达州某些地区使用的选票，其中存在一些可用性问题。

帕特·布坎南（Pat Buchanan）获得了异常多的选票，而阿尔·戈尔（Al Gore）在采用这种设计的地区获得的选票比预期的要少得多（将官方结果与民意调查进行比较）。很多人推测，这是因为民主党选民看到候选人名单倒数第二的戈尔，自然而然地冲到了倒数第二的标记区，误选了布坎南。

更糟糕的是，在阿尔·戈尔的禁区上方有一条黑线，正好指向布坎南的盯人区。一些选民可能已经遵循的强烈视觉提示，而不是戈尔名字旁边的箭头。

将此与乔治·W·布什的地区进行比较。他的名字是选票的顶部，他的标记区域是选票的顶部。此外，他的标记区域被夹在一侧的极粗黑线和另一侧的箭头之间。

再加上由于多页选票导致的异常大量损坏的纸张，每页都标有“*在所有页面上投票*”，以及[Votomatic](http://www.electionstudies.org/florida2000/ballot/votomatic.htm)机器在完全打选票时遇到的困难，你会发现一些可用性很差这些选择改变了地球上最强大国家的进程。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-27T18:46:50.277

我所知道的最可怕的故事是杀死病人的[Therac放射治疗设备。](http://en.wikipedia.org/wiki/Therac-25)[案例研究](http://computingcases.org/case_materials/therac/therac_case_intro.html)也可用。

一些文章提到用户界面的复杂性是一个促成因素。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-27T21:35:21.653

微软有几个名字

*   MSN hotmail 真是一团糟。这个界面是如此令人费解和不直观。似乎开发人员认为，只要用户可以从 8 个丑陋的配色方案中选择一个就可以了。
*   [Windows vista 塑料盒](http://windowshelp.microsoft.com/Windows/en-US/Help/2e680b8d-211e-41c5-a0bf-9ccc6d7e62a21033.mspx)- 原创并不能成为做坏事的借口。
*   vista windows 资源管理器中没有“向上文件夹”按钮。有人说“删除功能”吗？
*   跨办公应用程序的不一致。（例如）为什么我不能将我在 word 中创建的方程式移动到 power point 并且仍然能够编辑它？
*   办公室圆形按钮。实际上是程序员的好人误以为这只是一种装饰元素。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-12-27T22:23:39.293

Lotus Notes 从头到尾不是一场可用性灾难吗？至少作为一个电子邮件程序（这可能是一个半体面的小组工作系统的附加功能 - 想想带有工作流程的旧式 Wiki）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-12-27T20:18:54.893

*   当网站仅适用于某些浏览器而不适用于 Internet Explorer 时，这是不合原则的。

*   我见过一些需要 Flash 来显示简单表格的商业应用程序，尽管我猜这并不是一个真正的可用性问题。

*   Apple Boot camp 向导在任何步骤中都没有有效的取消按钮，您要么重新分区驱动器要么终止应用程序。

*   一般的 Lotus Notes。

*   Windows Vista 关机按钮 - 您永远不知道它设置为做什么（睡眠、休眠、关机或执行 macarena），因此无论如何您都将使用微小的下拉菜单。

*   问题中提到的 Outlook 内联自动完成功能未链接到通讯簿或 GAL，如果重置用户配置文件，它将丢失。用户倾向于自动依赖该缓存而没有意识到它的高度易失性。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-27T19:19:19.773

对话框中简单的旧“点击返回以接受默认值”必须是最常见的灾难来源之一（尽管默认值应该是安全的，但并非总是如此）。

[风险文摘](http://catless.ncl.ac.uk/Risks/)也是可用性错误以及更普遍风险的一个很好的来源。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-28T04:07:39.893

《[界面耻辱堂》](http://homepage.mac.com/bradster/iarchitect/shame.htm)在这种背景下值得一提……有点老了，但肯定很有趣！

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-12-28T04:27:49.603

几个例子（并非所有计算机相关）：

*   1989 年 12 月在蒙特利尔，一名疯狂的射手开始在 l'École Polytechnique de Montréal（工程学院）开枪射击。后来显示，警方的干预被推迟了，因为 911 需要建筑物的确切地址（找不到他的名字）。那天有 14 名学生遇难。

*   1992 年 1 月 20 日，法航的空客 A320 坠毁。同一个按钮用于 2 个不同的功能（速度和下降角度）。87人死亡。

后果较少的示例：

*   将磁盘拖到垃圾箱以在 Macintosh 上将其弹出

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-12-27T18:45:42.523

我想这不是一场灾难，但我个人的烦恼是你会在大多数操作系统中找到的那种错误对话框......例如“*无法写入磁盘，数据可能已经丢失*”......然后是一个按钮说“确定”。***不行不行！！！***

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-12-28T03:31:05.427

[在 Nielsen 的Prioritizing Web Usability](https://rads.stackoverflow.com/amzn/click/com/0321350316)中有大量的可用性灾难，包括已经提到的一些。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-01-02T23:56:18.373

将文件拖放到 Windows 中的任务栏项目上（当您想在当前最小化的应用程序中打开文件时）。

微软预计用户可能想要这样做，并且......添加了错误消息，说明它不起作用。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-12-27T18:59:06.320

如果您正在寻找可用性灾难，只需在 Google 上搜索“共享软件”或“免费软件”或 download.com 上的任何内容。可悲但真实，99.9% 看起来像是由一个双手反绑在背后的盲人设计的。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-12-28T17:25:30.907

MS Office 2007 中新的“功能区”用户界面。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-12-27T23:27:40.863

表格的重置。:-)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-12-28T07:01:07.110

Donald Norman 的书 The Design of Everyday Things - 是该领域的经典著作之一。在这本书中可以找到很多很多糟糕的可用性设计的优秀例子。

应该是所有 HCI 和可用性课程的必读内容。

干杯，

-理查德

（亚马逊链接：[http](https://rads.stackoverflow.com/amzn/click/com/0385267746) ://www.amazon.com/Design-Everyday-Things-Donald-Norman/dp/0385267746 ）

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-01-02T23:35:23.067

任何需要用户按住超过 1 秒才能采取行动的按钮。

我的老板和我确信他的烤箱和微波炉上的计时器一旦启动就无法取消。按取消没有效果。

有一天我偶然发现你必须按住取消 3 秒钟。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-01-02T23:43:46.387

乔尔不久前已经在他的博客上[发布了它](http://www.joelonsoftware.com/items/2006/11/21.html)，但值得一提的是 Windows 中的关机、睡眠、休眠和挂起

来自参与其中的人：http: [//moishelettvin.blogspot.com/2006/11/windows-shutdown-crapfest.html](http://moishelettvin.blogspot.com/2006/11/windows-shutdown-crapfest.html)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2010-02-18T22:00:28.673

我认为 1980 年代的汽车“意外加速”问题是一场可用性灾难。如果油门和刹车踏板之间没有明显的分离，并且没有安全联锁装置，除非应用刹车，否则不会从停车档切换，这是很容易误踩油门并撞到某人或某物的方式。奥迪-5000 承担了大部分责任，但它确实适用于所有车辆。汽车公司、他们的律师和许多亲商界人士都没有同情心，并指责司机。但就像之前发布的 John Denver 示例一样，一个容易出错的界面，没有考虑到人性并最终导致人死亡，是一个可用性灾难。界面的一个小的重新设计解决了这个问题。如今，所有汽车都有换档安全联锁装置，

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-12-28T04:45:12.220

只要我们不局限于计算机 UI，那么[杀死 John Denver 的可用性缺陷又](http://www.asktog.com/columns/027InterfacesThatKill.html)如何呢？

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-12-28T07:55:56.547

不像这些例子那样灾难性……我有一个博客，专注于对 Web 和桌面应用程序可用性的分析和建设性批评。

[http://www.allaboutbalance.com/](http://www.allaboutbalance.com/)

抢

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-12-28T00:02:30.263

坚持使用 javascript 的网站，哦等等..

我最近遇到的最糟糕的应用程序必须是 scribus，这是一种耻辱，因为我需要做它所做的事情。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-12-28T04:29:26.900

我想乔尔不久前就有这个——但很多人都在思考它……打开手机的红色关闭按钮。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-12-28T17:40:40.597

大型机上的 JCL 是可用性灾难。虽然这对程序员很便宜且计算时间很昂贵的时代来说是件好事，但时代已经改变，JCL 没有跟上向后兼容性的步伐。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-01-02T23:20:00.397

不是灾难，但它可能是。阿波罗[10](http://spaceflight.nasa.gov/history/apollo/apollo10/index.html)号登月器失控，因为两名宇航员都按下了一个只有他们一个人应该有的引导开关。用优秀纪录片*[《月影》](http://www.intheshadowofthemoon.com/)*中宇航员约翰·杨的话来说：

> “计算机系统应该是用户友好的。当你犯错时，它不应该杀死你。”

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-01-02T23:41:30.620

汽车不仅需要两只手，还需要一只脚来操作。

我敢肯定，在过去 100 年的创新中，我们本可以想出比这更好*的*东西。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-10-23T08:32:34.667

我的示例是 stackoverflow 搜索功能，它不会在页面顶部显示结果数：您必须向下滚动才能查看页数，然后才能知道是否需要优化搜索

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-10-23T08:53:22.160

**诺基亚 E61**（我猜还有许多其他型号，但这就是我所拥有的）。

当需要采取明显的行动时，有很多地方和上下文，而不是提供选项，而是弹出一条消息，告诉您应该去哪里做（有时涉及在菜单层次结构中向下 3 级）。

我现在记得两个：

*   连接链接未正确关闭，当您尝试浏览网页时，会显示一条消息（大约）：“有一个打开的连接，请转到连接、连接管理、活动数据连接并选择断开连接”。
*   选择无线网络时，您第一次选择受密码保护的网络，而不是提示输入密码，它会说：“转到连接、连接管理、可用的 WLAN，并创建一个新的接入点”。

这完全糟透了。如果 GUI 设计人员考虑到了这些选项，为什么他们不只是提供在适当位置执行合理任务的选项，而不是提示那些愚蠢的消息？

还有一个...有人会认为文件浏览器的合适位置是“工具”菜单，但不，它在“办公室”下。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2010-06-17T03:17:39.583

我最近写了一篇关于这个主题的文章：9 个 UX 和可用性陷阱，以及如何避免它们。您可以在[http://www.1stwebdesigner.com/development/usability-ux-pitfalls-howto-avoid/ 查看](http://www.1stwebdesigner.com/development/usability-ux-pitfalls-howto-avoid/)。

它有很多不同的站点，这些站点以某种方式缺乏可用性和良好的用户体验，站点范围从 IRS 到戴尔，以及介于两者之间的所有站点。我提到的一些主要问题是难以找到内容、糟糕的布局、混乱的菜单以及糟糕的菜单布局和设计。

我希望这将帮助您对一些损坏的站点以及要避免的事情有一个很好的了解。我正在写一篇关于现在做大部分事情的网站的新文章，我一定会在当时链接到那个，这样你就可以对那些实际工作并做他们应该做的网站有一些好的想法。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2011-05-25T21:49:09.867

![该程序仍然没有响应立即结束。 锁定 30 秒，然后像这样显示另一个窗口。](https://i.stack.imgur.com/sVIli.gif)

（来自[Microsoft 为 Windows XP 对话框提供更好的“广告真相”](http://JonathansCorner.com/windows/)。）

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2008-12-27T18:54:41.303

我最喜欢*的常见*可用性问题是灰色菜单选项。

为什么会变灰？荒谬的。

# c# - 使用 C# WinForms 的透明图像

> ID：395256
> 
> 赞同：24
> 
> 时间：2008-12-27T18:30:58.093
> 
> 标签：c#, .net, image, transparency, picturebox

我正在开发 VS 2008 中的 Windows 窗体应用程序，我想在另一个图像的顶部显示一个图像，顶部图像是 gif 或带有透明部分的东西。

基本上我有一个大图像，如果它，我想在上面放一个小图像，这样它们就有点像一个图像给用户看。

我一直在尝试使用图片框，但这似乎不起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-01-12T07:26:44.943

几天前我也遇到过类似的情况。您可以创建一个透明控件来托管您的图像。

```
using System;
using System.Windows.Forms;
using System.Drawing;

public class TransparentControl : Control
{
    private readonly Timer refresher;
    private Image _image;

    public TransparentControl()
    {
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        BackColor = Color.Transparent;
        refresher = new Timer();
        refresher.Tick += TimerOnTick;
        refresher.Interval = 50;
        refresher.Enabled = true;
        refresher.Start();
    }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x20;
            return cp;
        }
    }

    protected override void OnMove(EventArgs e)
    {
        RecreateHandle();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        if (_image != null)
        {
            e.Graphics.DrawImage(_image, (Width / 2) - (_image.Width / 2), (Height / 2) - (_image.Height / 2));
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
       //Do not paint background
    }

    //Hack
    public void Redraw()
    {
        RecreateHandle();
    }

    private void TimerOnTick(object source, EventArgs e)
    {
        RecreateHandle();
        refresher.Stop();
    }

    public Image Image
    {
        get
        {
            return _image;
        }
        set
        {
            _image = value;
            RecreateHandle();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-10-14T12:17:35.307

PictureBox 有 2 层图像：BackgroundImage 和 Image，可以相互独立使用，包括绘图和清除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-27T19:09:35.160

将大/底部图像放在 a 上`PictureBox`，然后将处理程序添加到`OnPaint`事件并使用其中一个`e.Graphics.DrawImage()`重载。您可以使用加载图像`Image.FromFile()`。

小/顶部图像必须有一个 Alpha 通道并且在背景中是透明的，这样叠加才能起作用。您应该能够在 Photoshop 或类似软件中轻松确保这一点。确保以支持 Alpha 通道的格式保存，例如 PNG。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T17:32:14.337

vb.net 代码（所有归功于 Leon Tayson）：

```
Imports System
Imports System.Windows.Forms
Imports System.Drawing

Public Class TransparentControl
    Inherits Control

    Private ReadOnly Local_Timer As Timer
    Private Local_Image As Image

    Public Sub New()
        SetStyle(ControlStyles.SupportsTransparentBackColor, True)
        BackColor = Color.Transparent
        Local_Timer = New Timer
        With Local_Timer
            .Interval = 50
            .Enabled = True
            .Start()
        End With

        AddHandler Local_Timer.Tick, AddressOf TimerOnClick

    End Sub

    Protected Overrides ReadOnly Property CreateParams() As System.Windows.Forms.CreateParams
        Get
            Dim cp As CreateParams
            cp = MyBase.CreateParams
            cp.ExStyle = &H20
            Return cp
        End Get
    End Property

    Protected Overrides Sub OnMove(ByVal e As System.EventArgs)
        MyBase.OnMove(e)
        RecreateHandle()
    End Sub

    Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)
        MyBase.OnPaint(e)

        If Local_Image IsNot Nothing Then _
            e.Graphics.DrawImage(Local_Image, New Rectangle(0, 0, (Width / 2) - (Local_Image.Width / 2), (Height / 2) - (Local_Image.Height / 2)))

    End Sub

    Protected Overrides Sub OnPaintBackground(ByVal pevent As System.Windows.Forms.PaintEventArgs)
        ' DO NOT PAINT BACKGROUND
    End Sub

    ''' <summary>
    ''' Hack
    ''' </summary>
    ''' <remarks></remarks>
    Public Sub ReDraw()
        RecreateHandle()
    End Sub

    Private Sub TimerOnClick(ByVal sender As Object, ByVal e As System.EventArgs)
        RecreateHandle()
        Local_Timer.Stop()

    End Sub

    Public Property Image As Image
        Get
            Return Local_Image
        End Get
        Set(ByVal value As Image)
            Local_Image = value
            RecreateHandle()
        End Set
    End Property
End Class 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-26T15:32:40.643

此回复底部引用了类似帖子的列表。

此回复涉及图片框和 Winforms（在下面的其他帖子中，有几个重申 WPF 已经很好地解决了这个问题）

1.  创建 Winform
2.  创建 x2 图片框
    *   foreground_pictureBox // “背景”的“前面”图片框
    *   background_pictureBox // 图片框 'behind' 'foreground'
3.  为每个图片框添加 'paint' 事件
    *   在“设计器”中选择对象
    *   选择“属性”选项卡（或右键单击并从弹出菜单中选择）
    *   选择事件按钮（小闪电）
    *   双击“paint”事件右侧的空白字段
4.  将以下代码添加到主窗体的“加载”函数中（如果尚未添加，请使用步骤 3 中的方法并选择“加载时”而不是“绘制”）

=

```
private void cFeedback_Form_Load(object sender, EventArgs e)
{
    ...
    // Ensure that it is setup with transparent background
    foreground_pictureBox.BackColor = Color.Transparent;

    // Assign it's 'background'
    foreground_pictureBox.Parent = background_pictureBox;
    ...
} 
```

5\. 在 'background_pictureBox' 的 'paint' 调用中：

=

```
private void background_pictureBox_Paint(object sender, PaintEventArgs e)
{
    ...foreground_pictureBox_Paint(sender, e);
} 
```

6\. 在“foreground_pictureBox_Paint”调用中，添加您希望在前景中显示的任何图形调用。

这个话题似乎在几篇文章中重复出现：

[如何使图片框透明](https://stackoverflow.com/questions/19910172/how-to-make-picturebox-transparent)

[c-sharp-picturebox-transparent-background-doesnt-seem-to-work](https://stackoverflow.com/questions/5522337/c-sharp-picturebox-transparent-background-doesnt-seem-to-work)

[在 c-net 中制作重叠图片框透明](https://stackoverflow.com/questions/4623165/make-overlapping-picturebox-transparent-in-c-net)

[图片框问题](https://stackoverflow.com/questions/4144371/a-picturebox-problem)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T20:21:43.860

我一直发现我必须自己合成图像，使用单个图片框或控件。拥有两个带有透明部分的图片框对我来说从来没有用过。

# c# - 在 MSBuild 任务中生成代码

> ID：395259
> 
> 赞同：3
> 
> 时间：2008-12-27T18:32:46.513
> 
> 标签：c#, msbuild, code-generation, compilation, itaskitem

我正在创建一个将生成一个或多个文件的 MSBuild 任务，我有一个具有 ITaskItem[] 类型的 [输出] 属性的任务。我的问题是，我需要自己实现那个接口还是有一个我可以使用的类？

我希望它们成为编译任务项，这些任务项被添加到要编译的文件列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T19:10:21.693

事实证明已经有一个 TaskItem 类。它很一般，但应该可以正常工作。如果您在目标文件中的输出元素上设置 ItemName="Compile"，它将创建它们作为编译项并将它们添加到集合中。没问题

# html - 最好的 Rails HTML 解析器

> ID：395261
> 
> 赞同：5
> 
> 时间：2008-12-27T18:34:54.450
> 
> 标签：html, ruby, parsing

我知道 Hpricot 仍然是一个标准，但我记得听说过用于 Ruby 的更快、更具表现力的 HTML 解析器。

有谁知道它叫什么，是否值得从 Hpricot 切换到？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-27T19:33:40.493

您可能正在考虑[Nokogiri](http://nokogiri.org/)。我自己没有使用过它，但是“每个人”都在谈论它，并且[基准](http://gist.github.com/24605)看起来确实很有趣：

```
hpricot:html:doc  48.930000 3.640000 52.570000 ( 52.900035)
hpricot2:html:doc  4.500000 0.020000  4.520000 (  4.518984)
nokogiri:html:doc  3.640000 0.130000  3.770000 (  3.770642) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-02-07T14:08:12.177

有多种工具可用。我用[**Nokogiri**](http://nokogiri.org/)。

演示：

```
require 'rubygems'
require 'nokogiri'

doc = Nokogiri::HTML(%{
  <h1 class="title">Hello, World</h1>
  <p>Some text</p>
  <a href="http://www.google.com/">Some link</a>
})

title   = doc.at_css("h1.title").text
content = doc.at_css("p").text
url     = doc.at_css("a")[:href] 
```

Ryan Bates 制作了一个关于使用它的出色截屏视频：[#190: **Screen Scraping with Nokogiri**](http://railscasts.com/episodes/190-screen-scraping-with-nokogiri)。

**文档**： http: [//nokogiri.org/](http://nokogiri.org/)

**教程**： http: [//nokogiri.org/tutorials](http://nokogiri.org/tutorials)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-27T19:43:52.767

还有[红豆汤](http://www.crummy.com/software/RubyfulSoup/)

它作为一个轻量级的快速而肮脏的解析器出售自己。在过去将其用于项目时，我发现该界面非常直观且“Ruby-ish”，考虑到它是 Python 端口，这可能有点令人惊讶。

编辑：不幸的是，它似乎不再维护，所以它可能不是您要找的那个。看起来 Nokogiri 是你一直听说的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-30T20:18:50.883

不要使用正则表达式——ruby 的正则表达式太慢了。Hpricot 很棒，Nokogiri 看起来很有前途，虽然我还没有直接使用它。

# jquery - 原型中 list.detect 的 jquery 等效项

> ID：395262
> 
> 赞同：2
> 
> 时间：2008-12-27T18:35:12.263
> 
> 标签：jquery, prototypejs

原型中 list.detect 的 jquery 等效项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T19:09:20.370

返回具有“值”的第一个元素的索引：

```
jQuery.inArray(value, array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-11-30T12:28:00.747

Prototype 的检测接受一个迭代器并找到迭代器为其返回 true 的第一个元素。jQuery 的 inArray 不包含此功能。jQuery 的 grep() 更适合 IMO。

# repository - 我在哪里可以找到或捐赠具有历史意义的软件？

> ID：395264
> 
> 赞同：3
> 
> 时间：2008-12-27T18:37:13.493
> 
> 标签：repository, history

计算机科学和编程是一个历史相对较短但发展非常迅速的领域。是否有现有历史软件的存储库或我可以提交具有历史意义的软件的地方？

我已经问过这个问题，并使用标准的 SO 范式进行了回答，因为我认为这会引起社区的普遍兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T18:38:05.113

我知道只有一个历史软件存储库，即[Software Preservation Group](http://www.softwarepreservation.org/)。它包含对[C++](http://www.softwarepreservation.org/projects/c_plus_plus/)、[LISP](http://www.softwarepreservation.org/projects/LISP/)和[Fortran](http://www.softwarepreservation.org/projects/FORTRAN/)以及其他主题感兴趣的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T18:40:43.720

您可能想试试[计算机历史博物馆](http://www.computerhistory.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T20:04:05.190

这取决于软件的确切类型。例如，Multiple Arcade Machine Emulator (MAME) 等项目旨在为特定的街机机器硬件保留处理器级指令集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T20:17:46.287

[Trailing Edge Software](http://www.trailing-edge.com/)维护**老式软件的公共领域档案**。尽管他们的首页让他们听起来好像对任何事情都感兴趣，但他们的**实际收藏似乎仅限于 PDP-10 和 PDP-11 代码**。我希望软件在公共领域的要求是相当有限的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-27T20:33:07.877

对于我自己的代码，我只是将其公开在网络上，然后确保 Internet 存档知道该代码。我通过在[http://web.archive.org/collections/web.html](http://web.archive.org/collections/web.html)上请求它的 URL 来做到这一点- 12-24 个月后，它应该出现在 Internet 档案中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-03T11:30:14.100

谷歌“放弃洁具”

# objective-c - Obj C - 随机 @property 错误

> ID：395271
> 
> 赞同：1
> 
> 时间：2008-12-27T18:44:04.150
> 
> 标签：objective-c

对 Objective C 来说还是新手，我遇到了一些我自己似乎无法解决的问题。以下前三个@properties 中的每一个都会出现两次错误，并且是：错误：“')' 标记之前的语法错误”。

```
#import <Foundation/Foundation.h>    

@interface PolygonShape : NSObject {
    int *numberOfSides;
    int *minimumNumberOfSides;
    int *maximumNumberOfSides;
}

@property (setter = setNumberOfSides) int *numberOfSides;
@property (setter = setMin) int *minimumNumberOfSides;
@property (setter = setMax) int *maximumNumberOfSides;
@property (readonly, getter = angleInDegrees) float *angleInDegrees;
@property (readonly, getter = angleInRadians) float *angleInRadians;
@property (readonly, getter = name) NSString *name;

- (id) init;
- (id) initWithSides: (int*) sides  min: (int*) min  max: (int*) max;
- (void) dealloc;
- (BOOL) setNumberOfSides: (int*) num;
- (void) setMin: (int*) num;
- (void) setMax: (int*) num;
- (void) description;
- (float*) angleInDegrees;
- (float*) angleInRadians;
- (NSString*) name;

@end 
```

不确定这是否会有所不同，但这里是实现的总结版本：

```
#import "PolygonShape.h";

@implementation PolygonShape

@synthesize numberOfSides;
@synthesize minimumNumberOfSides;
@synthesize maximumNumberOfSides;

...

- (BOOL) setNumberOfSides: (int*) num {
    if(num > minimumNumberOfSides && num < maximumNumberOfSides) {
        [numberOfSides release];
        numberOfSides = [num retain];
        return YES;
    } else {
        NSLog(@"Number %i is out of range %i to %i", num, minimumNumberOfSides, maximumNumberOfSides);
        return NO;
    }
}

- (BOOL) setMin: (int*) num {
    if(num > 2 && num <= maximumNumberOfSides) {
        [minimumNumberOfSides release];
        minimumNumberOfSides = [num retain];
        return YES;
    } elseif (num > 2 && maximumNumberOfSides == nil) {
        [minimumNumberOfSides release];
        [self setMax: 12];
        minimumNumberOfSides = [num retain];
        return YES;
    } elseif (num > 2) {
        NSLog(@"Polygons must have more than 2 sides.");
        return NO;
    } else {
        NSLog(@"Please enter a number less than or equal to %i, the current maximum", maximumNumberOfSides);
        return NO;
    }
}

- (void) setMax: (int*) num {
    if(num <= 12 && num < maximumNumberOfSides) {
        [maximumNumberOfSides release];
        maximumNumberOfSides = [num retain];
    } elseif (num <= 12) {
        NSLog(@"Please enter a number less than or equal to 12");
    } else {
        NSLog(@"Please enter a number greater than or equal to %i, the current minimum", minimumNumberOfSides);
    }
}

...

@end 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T19:07:31.030

我在这里看到一些需要清理的东西，但最明显的错误是您将原始类型（例如 int 和 float）视为指针（您还应该使用 NSInteger 和 CGFloat，但这并不重要）。您将需要更改大量代码，因此在担心其他任何事情之前先解决此问题。这是[一个 C 教程](http://cocoadevcentral.com/articles/000081.php)，可以帮助您了解原始类型和指针之间的区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-29T08:01:26.817

关于这段代码的更多内容：

*   指令`;`后有一个分号。`#import`这是一个预处理器指令，而不是语句，因此不需要（也永远不会有）终止分号。

*   你正在写`elseif`而不是`else if`. Objective-C中没有`elseif`关键字，只有`if`关键字和`else`关键字。

*   您同时声明了一个属性（声明了一个 setter）和 setter 方法。Objective-C 不需要在类的接口中为类实现的每个方法声明——当使用属性时，属性声明*是*setter 方法声明。

*   您有一个也有返回值的 setter。不要那样做。

*   您使用的编码风格与 Cocoa 标头和示例不同。

一般来说，在编写 Objective-C 代码时，您应该尝试以与框架头文件和示例相同的风格编写。例如，您在方法参数/返回类型和方法名称的一部分之间放置空格；这不是 Cocoa 中常见的编码风格。习惯通常的编码风格会让其他开发人员更容易拿起你自己的代码，也让你更容易从别人的代码中学习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T01:54:02.317

您在 setter 属性上使用了错误的选择器。完整的选择器名称在末尾包含冒号：`setNumberOfSides:`

它们应该如下所示：

```
@interface Foo
@property (readwrite, setter = setNumberOfSides:) int numberOfSides;
@end 
```

不过有一件事，您指定的名称与自动生成的名称相同，因此您无需指定 setter 属性。

# c# - 尝试设计对象模型 - 使用枚举

> ID：395275
> 
> 赞同：1
> 
> 时间：2008-12-27T18:46:52.023
> 
> 标签：c#, oop, enums

我正在尝试设计一个对象模型（用于 C#），但无法找到存储数据的最佳方式。我将尝试用一个简单的例子来说明这一点！

我有一个对象“pet”，它可以是“cat”、“dog”等之一。所以我创建了一个带有“petType”枚举的“pet”类来存储它。

现在这是变得棘手的地方。如果“宠物”是“猫”，那么它的“食物”可以是“鱼”、“牛奶”等。如果它是“狗”，那么它的“食物”可以是“肉”、“饼干”或者其他的东西。

现在我应该为“fish”、“milk”、“meat”和“biscuits”创建一个大枚举并以某种方式对其进行编码，以便不能将“cat”分配为“food.meat”？我的“宠物”类有一个“catfood”和“dogfood”枚举真的没有意义，因为那是不可扩展的，它最终会存储大量为空的枚举。

有没有我没有看到的优雅解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T19:11:30.740

尝试#2。似乎是正确的

```
interface IPet { }

class Cat : IPet
{
    public void eat(CommonFood food) { }
    public void eat(CatFood food) { }
}

class Dog : IPet
{
    public void eat(CommonFood food) { }
    public void eat(DogFood food) { }
}

interface IFood { }

abstract class CommonFood : IFood { }

abstract class CatFood : IFood { }

abstract class DogFood : IFood { }

class Milk : CommonFood { }

class Fish : CatFood { }

class Meat : DogFood { }

class Program
{
    static void Main(string[] args)
    {
        Dog myDog = new Dog();
        myDog.eat(new Milk()); // ok, milk is common
        myDog.eat(new Fish()); // error
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T19:00:28.780

首先，***cat***和***dog***应该是***pet***的子类，假设所有宠物都有一些共同的属性。

接下来，我不清楚你打算用***食物***做什么。作为一个对象模型，***宠物***是否持有某种食物，或者是否会有诸如***吃***之类的方法将***食物***作为参数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T19:05:45.837

我不知道你的猫，但我的猫只吃肉，其他的很少！

吃饼干之类的餐桌残渣对狗（和猫）有害

但除此之外，你为什么要搞乱枚举？为什么你的“宠物”对象有一个“宠物类型”属性？一个简单/直接的表示是具有 Cat 和 Dog 子类的 Pet 类，但更实际的表示是可以应用于任何*Animal*对象的 Pet*接口。*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T22:04:24.543

我同意同义反复论让 Cat 和 Dog 子类 Pet （或实现 Pet 接口！），而不是拥有明确的 PetType 枚举和字段。显式的“类型标志”与真正的 OO 设计格格不入。

至于食物关系，你可以考虑实现两个概念：

1.  Pet 上的“业务规则”，通过`acceptsFood(FoodEnum food)`方法实现。这种方法将负责检查食物分配的*合法性*。
2.  任何`Pet`（子类）实例的“最喜欢的食物”属性，它允许个体宠物识别出最喜欢的食物（在其物种实际接受的食物集中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T10:17:05.873

听起来您需要将猫/狗粮视为一种策略，并使用简单的工厂将适当的食物与适当的宠物组合在一起。

这是 Ruby 的一种变体。

```
class CatFood
  attr_reader :items

  def initialize
    @items = ['fish', 'milk']
  end
end

class DogFood
  attr_reader :items

  def initialize
    @items = ['meat', 'biscuits']
  end
end

class NoFood
  attr_reader :items

  def initialize
    @items = []
  end
end

class Pet
  attr_reader :food

  def initialize(food)
    @food = food
  end
end

class PetFactory
  def create_dog
    Pet.new(DogFood.new)
  end

  def create_cat
    Pet.new(CatFood.new)
  end

  def create_unknown_pet
    Pet.new(NoFood.new)
  end
end 
```

# javascript - 关于实现 Stack Overflow 风格注释的想法

> ID：395286
> 
> 赞同：7
> 
> 时间：2008-12-27T18:57:50.987
> 
> 标签：javascript, comments, markdown, wmd

我非常喜欢 Stack Overflow 评论 UI，我正在考虑在我自己的网站上实现同样的功能。我查看了代码，看起来这里的主要工具是[WMD](http://wmd-editor.com/)，而 JQuery [TextArea Resizer](http://plugins.jquery.com/project/TextAreaResizer)起到了辅助作用。

WMD 在客户端将 Markdown 转换为 HTML。这非常好，因为它有助于预览，但是在将其发送到服务器时遇到了挑战。如果出现验证错误（比如用户在评论表单的其他部分输入了无效的电子邮件地址，或者他可能没有输入他的姓名），那么服务器会通过重新显示带有错误消息的表单和预先填充的表单字段。只是现在评论文本是 HTML，而不是 Markdown，因为服务器甚至从未见过 Markdown。但我希望它是 Markdown，因为这是用户输入的内容。

这里有什么想法吗？

我考虑了各种想法：

*   进行服务器端[HTML 到 Markdown 的转换](https://stackoverflow.com/questions/59557/html-to-markdown-with-java)。对这个想法并不那么兴奋。从 Markdown 转换为 HTML 再转换回 Markdown 似乎很笨拙，作为用户，当软件重新格式化我的文本/代码时，我总是觉得它很烦人。
*   客户端验证（以增强服务器端验证，我当然会保留）。尽管目前我在评论表单上使用 reCAPTCHA，但这似乎是一个合理的方向，这意味着我至少需要将 reCAPTCHA 部分发布到服务器。
*   丢失 WMD 并使用[MarkdownJ](http://code.google.com/p/markdownj/)将 Markdown 转换为服务器上的 HTML。我需要寻找其他一些机制来完成我想要保留的预览功能。

理想情况下，除了 HTML 之外，还有一些方法可以获取文本的 Markdown 版本并将其提交到服务器，但我还不足以知道这是否是一个真正的可能性。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-27T20:35:56.373

请参阅此问题：[将 HTML 转换回 Markdown 以在 wmd 中进行编辑](https://stackoverflow.com/questions/235224/convert-html-back-to-markdown-for-editing-in-wmd)（对右侧导航中的“相关”框表示欢迎！）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-28T08:03:58.810

我会将数据作为降价发送，然后在验证通过后让服务器将其转换为 html。WMD 有一个选项来指定它将发送到服务器的数据格式。只需添加

```
wmd_options = {
        //Markdown or HTML
        output: "Markdown"
    }; 
```

在调用 wmd 之前

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-27T19:20:41.673

我只是粗略地查看了 WMD，但是将 textarea 提交到服务器似乎很简单——事实上，如果 textarea 是表单的一部分，我几乎看不出如何避免它。据我了解，您的 textarea 包含标记，WMD 将其转换为 HTML 以显示在页面的另一部分。只需在提交的表单中包含 textarea，您就应该在服务器端看到它。

# mainframe - 有人还在用 ObjectStar 编程吗（以前称为 Huron）

> ID：395289
> 
> 赞同：8
> 
> 时间：2008-12-27T19:00:22.790
> 
> 标签：mainframe, legacy, ibm-rad

Huron 是[4GL](http://en.wikipedia.org/wiki/Fourth-generation_programming_language)，起源于1990 年代初期的[IBM 360大型机世界，由](http://en.wikipedia.org/wiki/IBM_System/360)[Amdahl Corporation](http://en.wikipedia.org/wiki/Amdahl_Corporation)创建和销售。它有一种人们喜欢或厌恶的专有解释语言和数据库，其最显着的特点是其不寻常的规则语言语法，以及与其查询语言的紧密集成，您必须编写自己的嵌套循环来实现连接。

通过适当使用间接（例如其原型“CALL TABLE.RULE”），可以快速创建极其紧凑、优雅和可扩展的解决方案。也有可能在坏人手中制造出噩梦般的无法维护的怪物，这些怪物可悲地扩散开来，对其声誉毫无作为。

它在 1990 年代中期更名为 ObjectStar，移植到 Unix 和 Windows NT，并提供了一个 UI 组件，可以创建事件驱动的客户端-服务器应用程序，无需修改即可在 Windows 或 Unix 上运行。

它从未真正获得成为顶级开发工具所需的临界质量，而且在世纪之交它几乎已经失败了。

回想起来，这是一种历史偏差。因此我的问题：

有人还在用吗？

或者甚至听说过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T00:05:21.840

它现在归 Tibco 所有。很确定英国的 Tesco 使用它。澳大利亚有大约 5 个站点，包括银行和政府部门，其中一个站点由不光彩的 Satyam 支持。也仍在新西兰的银行业务中使用。可以肯定的是，银行会尽快重新建立平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-29T08:52:52.173

我知道比利时至少有两家公司仍在使用它。它现在归 TIBCO 所有，称为[Object Service Broker](http://www.tibco.com/software/mainframe_integration/object_service_broker/default.jsp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-02-08T17:41:27.953

我不知道是什么让我在 ObjectStar 上进行全局搜索，但是当这个页面弹出一个相对较新的时间戳时，我必须阅读！看到这么多前同事谈论美好时光的最新消息令人惊喜。

早在 1991 年，我就是 Dave 课程的早期参与者之一，从那时起，Huron/ObjectStar 为我提供了 15 年的面包和黄油。令人遗憾的是，该产品从未达到临界质量，它遭受了对大型机的兴趣直线下降（它们现在不应该已经过时了吗？）和对“购买而不是自己动手”的兴趣增加的双重打击。它在其他平台上的可用性有所帮助，但是那里存在太多既定的竞争。

我想如果我确实开发了一个专业，它最近是在性能分析和调优方面，这是因为我发现如果我努力定位执行不良的代码，修复它通常是微不足道的，而且 CPU 节省是惊人的。我会永远记得我的记录是，在一个长期运行的作业中，通过单行代码更改，CPU 减少了 99.95%，但超过 90% 的节省并不少见。这是一项艰巨但令人兴奋的工作，与我实际从事的相对简单的日常系统管理员任务相比，这是一个很好的变化。

感恩有多种形式和大小——我在 2006 年被带到门口，从那以后我一直在编写 IF 语句。但是，没有一个星期过去了，我不希望由于某种原因我仍然可以访问工作台。这简直是​​我用过的任何类型的临时数据分析的最佳环境。很遗憾，我不得不将这些年来积累的所有知识和经验都封存起来，但我想这就是进步……

所以，对于那些仍在使用它的人，我很羡慕你，确保你充分利用它！

向所有人致以问候和最良好的祝愿，拉吉

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-10T16:02:36.453

我要感谢 Huron / ObjectStar 和 Amdahl 在 1993 年至 2003 年期间带我环游世界 10 年。然后可悲的是，我抬起头来，世界把我抛在了后面。所以现在我是一名商业分析师，为那些令人兴奋的发展日子而苦恼。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-10T05:48:22.007

那可能是萨蒂扬一直要求我在 O* 培训他们的员工，这样他们就可以将其外包给他们的客户，让他们拥有熟练和经验丰富的人员......

它仍然存在，我只是在我的 Windows 盒子上再次启动它。在 Windows 上，它的开销远低于 SQL Server，性能要好得多。与 C 及其所有派生词不同，您也可以阅读代码。至于那些将“尽快重新平台化”的银行——这可能会给我们 O* 人再过 10 年。一般来说，从一个受支持且因 PC 原因运行良好的平台（平台正确）在银行的优先级上排名要低于构建和部署最新的业务应用程序或立法变更。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-01-18T20:13:31.363

ObjectStar 4 号培训师正在登记，这位来自爱尔兰。这是我第一次参加软件开发培训，它把我带到了欧洲和北美。如果只有其他语言和框架采用它的简单性和开发速度。

这是我合作过的最好的团队。我最有趣的回忆是三位欧洲教练抵达希思罗机场飞往加拿大。我忘记了我的 BA 机票，Brian 提前 6 小时到达，因为他以为他要去新加坡。戴夫笑得这么开心，当加拿大移民决定挑选他接受特殊待遇时，你可以理解我们缺乏同情心！我想我什至还有 ObjectStar 的幻灯片，他们还记得 HOSF 和 Promotions！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-11-10T21:27:21.373

我在 AT&T 工作期间曾在 Huron 工作，然后在更名为 ObjectStar 后离开为几个客户工作。我们使用 ObjectStar 开发了很多非常大的应用程序。喜来登预订系统曾经是用 ObjectStar 编写的。新泽西州的 Wakefern Food Corp 正在使用它，迪士尼也在使用它。我开发了一个电话营销应用程序，我们在支持 900 个并发用户的 Unix 上运行它，这对于当时的 ObjectStar 来说是相当大的。自 1998 年左右以来，我还没有听说有人使用它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-30T01:45:38.020

I used to work for Amdahl on the consulting teams that developed applications for many customers here in the states. Pretty easy to pick up, and very powerful back in the early 90's for what it could do at the time. RAD and JAD was the buzz words back in the day. It was really dubbed a great middleware product, which allowed data movement from MF to OS. Biggest problem back then skilled resources to architect the solution, as well as the database component was rather slow in larger installs. I'd be surprised if many installs in states remain.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-01-18T15:03:17.067

哇，有人问 ObjectStar！从 1991 年到 1998 年，我在英国的 Amdahl 担任 Huron/ObjectStar 培训师，在英国非常棒的 Dogmersfield 公园工作，我也环游了世界：在一个令人兴奋的 13 周内，我培训了 10 种不同的人在被送回家睡觉一周之前，他们已经筋疲力尽了。Amdahl 是我工作过的最好的公司，他把我介绍给了我遇到过的最好的经理（嗨，Carole），以及我有过的最好的工作经历。（是的，我想念它！）

该软件也非常好，使用起来非常有趣，与周围的其他任何东西完全不同，而且教学非常棒 - 你从未见过如此多的灯泡突然出现在人们的头上，因为他们经历了越来越强大的实现他们可以做什么的浪潮使用这个看似强大的工具集。ObjectStar 从未达到临界质量，这是一个巨大的耻辱。我在英国为 ObjectStar International “臀部”工作了六个月，然后它被卖给了 Tibco，据我所知，这些家伙还在 Tibco 的某个地方。嗨，我也必须接受过 O* 培训的数千人。三名英国和爱尔兰的教练仍然保持联系，其中一名加拿大人也是。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-10-01T17:14:30.863

Anil，我自 1995 年以来一直与 O* 合作（时断时续），包括与 Tibco Business Works 的集成。还具有 Java EE 经验（架构师和程序员 - WebSphere 和 JBoss...）。悉尼的机会是什么？jp_gravel@yahoo.ca 谢谢

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-01-27T03:15:08.670

嗨，Brian - 我只能说 ObjectStar 在其他方面宠坏了你 - 当然，除了 Assembler。我清楚地记得那些早期的日子——我是 1991 年在古老的 Dogmersfield 上第一门课程（我想是），当“真正的”教练太忙时，我做了一些奇怪的训练。

是的，那些“灯泡”时刻很值得一看——我记得一个聪明的小伙子突然“明白了”，喃喃地说“我需要去散步”，半小时后回来，浓缩了整个规则库到只有七个。他们也工作了。

我还在，在新西兰这里。目前是与 BNZ 签订“3 到 6 个月”合同的第 5 年，但由于他们让我在家工作并且或多或少地做我喜欢的时间，这很好。必须说这是一个居住的好地方。

哦，是的——我记得我也在新加坡教系统管理。伙计，他们把我拖进了我在那里时遇到的性能问题，所以我在 2 周内完成了 160 小时 - 在那之后的 6 个月内我都错了。那是我不得不在午饭后的固定时间开始教学的时间，无论房间里是否有其他人——与会者会去吃午饭，然后被他们的经理绑架。前两天我让他们晚了一个小时回来，但他们很快就学会了准时回来。

快乐的日子，嗯？

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-11-23T20:25:24.800

我在多伦多担任 ObjectStar（现在称为 Tibco OSB）开发人员将近 20 年，直到 2 月 9 日我被 Tibco 解雇。就在我离开 Blue Cross 之后，特拉华州的 Blue Shield 购买了一套 Tibco 产品，仅仅是因为 OSB 可以访问 IMS 大型机数据。如果不是 OSB Tibco 就不会赢得合同。

所以是的，它仍然存在，但不是很多。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-01-18T20:40:00.323

彼得，我想你的记忆已经被太多的黑白东西破坏了。肯定是盖特威克机场，我忘记了护照，所以我必须第二天飞出去？当我在新加坡任教时，我遇到了红眼，早上 8 点开始教书，仍然记得晚上 10 点站着教书时睡着了（客户试图将 5 天的课程塞进 4 天），但即使有人意外-因为我一般都知道我实际上想坐飞机去哪里。我认为。我在多伦多机场被美国移民局赶走了，因为我告诉他们我要在芝加哥教 Certe（还记得吗？），而不仅仅是去度假。戴夫的组织能力太强了，无法陷入那种擦伤！

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2010-01-18T18:31:24.407

我会成为 Dave S 仍然保持联系的那个加拿大人。我衷心附和他的许多言论。我遇到过的最好的老板，这个产品把我带到了世界各地，教它真的很有趣。有一天，我犯了一个错误，告诉我的经理（另一位经理），我可以在余下的职业生涯中愉快地教 Objectstar，并且噗！当公司进行了许多裁员中的第一次裁员时，我被重新组织了教学。我仍然喜欢这个软件，一年前我为一家美国公司完成了一份为期 6 个月的合同，帮助他们对基于 Tibco 的系统的 OSB 组件进行一些设计和编程模块。我仍然可以签订短期教学合同，但似乎没有任何成果……

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-01-20T11:17:58.920

作为“Huronaut”，我想再次与 Objectstar 合作。我最近做的是在维也纳的 PTA。作为荷兰最后一位技术人员并且没有销售，他们早在 1999 年就关闭了业务。切换到甲骨文（足够的工作）但并不开心。对我来说，它仍然是唯一真正的编程环境（在设置框架之后）您可以专注于业务规则。还开发了一个工具箱来构建树和调用其他规则的反向规则树（通过表直接或间接 - 那些 IC-16 字段非常强大），查找孤立的规则甚至孤立的子结构，报告参数不匹配等。这很棒. 我想再次与 Objectstar 合作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2010-02-17T08:45:42.497

我在 S'vale 参加 Huron 的第一次演讲，并成为斯堪的纳维亚的技术人员，直到其他斯堪的纳维亚人赶上来。美好的时光，在哥本哈根、斯德哥尔摩、悉尼和欧洲的各个地方都有项目。你知道休伦的最初发明者是丹麦人吗？我显然指出了这一点，因为我自己是丹麦人，并且个人认识这个人。

那是一段美好的时光，我非常想念它。正如有人所说：当您了解 O* 时，就没有其他编程语言了——当然，除了 Assembler。我现在退休了，但真的很怀念“过去的好日子”！

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2010-01-18T18:56:50.867

是的，我是另一位 Amdahl 培训师（尽管如果 Dave 没有向我指出这个方向，我不会知道这个线程）。嗨贝丝，嗨卡罗尔，嗨戴夫（再次！）......

在我得到承诺以后我再也不用剪一行代码之后，我在休伦编程，然后从那里毕业成为一名培训师。是的，我非常享受使用没有 if 语句（也没有源代码！）的产品所面临的挑战——一旦你适应了范式，规则语言确实是一个强大的包。作为 ObjectStar 培训师的生活方式当然也很好。我从惠特尼山上摔下来，把我的赫兹汽车扔在休伦湖附近的某个地方（还有什么地方？）以及许多其他的冒险活动！

O* 倒闭的主要原因几乎可以肯定是 Amdahl 的销售人员不知道如何销售它。大多数销售实际上最终是通过在客户 IT 部门找到一位有影响力的技术人员来实现的，该技术人员可以在售前阶段由培训师/顾问转换并充当他/她的同事的传教士。这就是它在 M&S 的工作方式！当富士通获得 Amdahl 的控股权并放弃任何不赚钱的东西时，它正式死亡。

我不敢相信我们训练的任何人都会梦想写出意大利面条式的怪物。间接和重用能力确实应该使这样的结果非常反常！

# flash - 显示来自 Google Finance 或 Yahoo! 的股票数据 金融

> ID：395291
> 
> 赞同：13
> 
> 时间：2008-12-27T19:01:31.197
> 
> 标签：flash, charts, stocks, google-finance-api

我可以使用[Google Finance API](http://code.google.com/apis/finance/)获取股票数据吗？

如果有用于此类股票数据的 Flash 或 Javascript 查看器，那就太好了。
我发现了一些可以用于相同的图表组件：

*   [图表](http://www.amcharts.com/stock/)
*   [打开 Flash 图表](http://teethgrinder.co.uk/open-flash-chart/tutorial.php)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-27T19:46:16.100

事实证明，Google 员工 Dion Loy 最近确认在商业网站**上使用 Finance API 是完全合法的。**

> “您可以将我们的 API 用于商业或非商业目的。”

[通过 MarkMail使用 Google Finance Portfolio Data javascript API](http://markmail.org/message/zcglklrtrvc2ms4o#query:google%20finance%20api%20commercial+page:1+mid:dsj26vnsgw7mo6ow+state:results)。

> “是的，可以在商业应用程序中使用组合 API。”

[在商业应用中使用 Google Finance API？](http://markmail.org/message/zcglklrtrvc2ms4o#query:google%20finance%20api%20commercial+page:1+mid:rttoj2jjve67zvji+state:results)，通过 MarkMail。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-28T00:36:31.553

[雅虎！Finance](http://finance.yahoo.com/q/hp)为您提供实时股票报价。数据以 CSV 格式返回。

请参阅此纳斯达克页面[http://finance.yahoo.com/q?s=](http://finance.yahoo.com/q?s=) ^IXIC

1.  单击下载数据按钮以访问实时数据

2.  单击下载到电子表格按钮以访问历史数据

您可以使用 LoadVars 或 URLLoader 类从 Flash 访问该数据。使用 unescape() 从其 URL 编码格式解码字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-30T21:19:07.440

关于通过 API 使用 Yahoo Finance 数据的合法性：

来自 Drupal 项目的 Khalid 最近向我们保证，尽管 Yahoo! 知道第三方（自动脚本等）Yahoo! 对其 CSV 的使用。允许他们接受它，即使是商业网站！

> 官方没有明确许可在脚本中使用来自雅虎的股票数据。然而，实际上，每种可以想象的语言（PHP、Perl、.asp、java 等）都有大量脚本在整个互联网上使用这些数据。只需做一个谷歌搜索，看看有多少。
> 
> 雅虎似乎意识到许多人正在以这种方式使用数据，并且对此视而不见。

~[使用 Yahoo! 的合法性 商业网站上的数据？](http://drupal.org/node/247059)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-10-19T06:22:50.203

作为 Google Finance 的替代方案，请考虑[http://www.mergent.com/servius](http://www.mergent.com/servius)（历史证券数据 API）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-06-02T16:33:05.703

几点：

1) 谷歌最近弃用了金融 API：[http ://code.google.com/apis/finance/](http://code.google.com/apis/finance/)

2) 从论坛上的讨论来看，google 无权提供股票报价，只有投资组合表现数据，因此无法通过 API 直接获取报价

3) 在这一点上，Web 服务中的几个项目被破坏了，例如获得头寸或投资组合的市场价值的能力以及获得投资组合中现金头寸的能力

雅虎金融似乎是目前最好的选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-27T19:36:45.883

不久前看过这个，但据我所知，谷歌不允许你在谷歌本身之外使用他们的财务数据。因此，您可以在 google 小工具中使用它，但不允许在 google 之外重新发布财务数据。我认为这与谷歌关于所有（昂贵的）市场数据的许可条款有关。如果我错了..有人请回复并让我知道，因为我可以做类似的事情;）

马特

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-11-19T08:20:37.770

我遇到了同样的问题，也就是说，如果我在本地执行我的 flex 应用程序一切正常，但是当我在服务器上发布它时，我得到了 2048 沙箱错误。我认为问题是由雅虎财经服务器上的crossdomain.xml文件引起的；如果我是对的，您可以这样解决：您的 flex 应用程序不必直接调用 yahoo Finance 下载页面，而是另一个页面（您可以使用 php、jsp、asp 创建）调用 yahoo Finance 下载页面并返回给您数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-09-23T23:02:40.863

看起来至少雅虎现在正在对实时报价收费：

[http://billing.finance.yahoo.com/realtime_quotes/signup?.src=quote&.refer=quote](http://billing.finance.yahoo.com/realtime_quotes/signup?.src=quote&.refer=quote)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-10-02T20:02:31.227

当我尝试访问 URL 时，我遇到了这个问题..

> 错误 #2044：未处理的安全错误：。text=错误 #2048：违反安全沙箱

# .net - 您认为 Silverlight 有什么潜力？

> ID：395292
> 
> 赞同：35
> 
> 时间：2008-12-27T19:02:52.753
> 
> 标签：.net, silverlight

Silverlight 已经有很长一段时间了，Silverlight 2 允许在前端进行 .Net 编程。我一直在考虑可以使用 Silverlight 制作的应用程序，但我无法决定是否应该在 Silverlight 中进行开发，因为我仍然担心可访问性和接受度。

从目前的趋势来看，您认为 Silverlight 有什么潜力，您认为 Silverlight 在未来几年将用于什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-12-27T19:13:17.180

Silverlight 带来了竞争，这总是一件好事。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-12-28T15:47:43.583

几点

缺点：

1.  尺寸比闪光灯大。
2.  Flash 已经拥有庞大的安装基础。
3.  设计工具（Blend 和 Expression Design）与 Adob​​e 相去甚远。（即 PhotoShop）
4.  缺乏特色。（麦克风支持、位图 API、打印支持等）
5.  缺乏Linux支持。虽然 Moonlight 已经存在或 V 1.0 和 2 (Alpha)。

优点：

1.  用于开发的出色 IDE (Visual Studio 2008)。
2.  可以使用现有的 .net 语言。因此，Web 开发人员可以轻松地转向 Silverlight。
3.  处理 Web 服务和 LINQ 支持的简单方法。
4.  与现有 .net 技术轻松集成。
5.  WCF 支持。（虽然仅限于 basicHttpBinding）。
6.  一些不错的功能，例如 Deepzoom。（我同意这不是杀手级功能）。
7.  微软正在支持它。你喜欢不喜欢。他们不是从零开始的。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-12-27T21:42:20.967

Silverlight**不是闪存杀手**，它是一个工具，它允许大量现有的 Microsoft 开发人员过渡到 Web 应用程序开发，从而使 Microsoft 保持在未来的开发游戏中。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2008-12-27T20:42:18.840

我对此有点怀疑。微软在替代平台上没有很好的声誉，因为他们在 OS X（如 Windows Messenger 或 Windows Media）上的产品与替代平台相比大多低于标准，而在 Linux 上，微软一直是敌人。随着越来越多的人离开 Windows，Silverlight 成为事实上的 Flash 替代品的机会将继续减少。

这似乎也是一种趋势，越来越多的网站正在消除“不必要”的 Flash 使用，以支持 iPhone 等新的移动设备。相反，AJAX 和更多的 JavaScript 编程被用来提供动态的用户体验，即使是在交互性极强的网站中也是如此。

我不会完全打折 Silverlight，我看到了 Netflix 流媒体电影等网站中“杀手级应用”的潜力，尽管还没有真正流行起来。我会采取观望态度，尽管如果你有一个小项目，你觉得 Silverlight 真的会有所帮助，我不会太担心。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-12-27T21:27:32.527

Silverlight 现在最大的问题是插件。它“几乎”不能在 Mac 上运行，而在 Linux 上根本不行。

此外，开发工具（Blend 和 VS）仅适用于 Windows。比较一下 Flex (Flash)，它可以在 Windows、Mac 和 Linux beta Eclipse 插件上运行。或者将 Silverlight 与 Curl 进行比较，后者在所有 3 个平台上运行良好，并且在 Windows 和 Linux 上具有开发工具。

更不用说，MS 因启动项目并将它们挂起而臭名昭著。那么我为什么要花时间在 Silverlight 上呢？我是 MSDN 会员。我有 VS2008 和 Blend（在我的桌面上运行）。所以我远不是一个讨厌MS的人。但同样，我为什么要投入时间？

回答您的问题：如果 MS 证明它确实致力于 SL 并在所有 3 个平台上稳定插件，那么我将其视为 Curl 和 Flash 的竞争对手（也许是 JavaFX，如果 Sun 能做到的话）。但是在 MS 将它的开发工具发布到其他平台之前，它仍然只是另一个 .Net “东西”。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2009-02-26T13:37:27.547

Flash 可能是主流（广泛部署），但对于开发人员来说，Silverlight 每天都击败 Flash，周日两次。

它是为开发人员从头开始构建的，可以使用 .NET Framework 和 Visual Studio 的子集。

ActionScript for Flash 还可以，但显然是在flash 之后开发的，不能坚持.NET Framework。

所以选择是在部署单元（Flash）和更好（Silverlight）之间。Silverlight 的占用空间大小是一个次要但有效的问题（Silverlight 的占用空间比 Flash 大）。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-12-27T20:49:28.827

Silverlight 是讨厌 flashscript 的人的替代品，这很好 - 但未来是[纯 Javascript](https://stackoverflow.com/questions/221710/are-there-any-good-javascript-graphics-libraries)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-12-11T00:10:05.073

我对 Silverlight 最大的挫败感是，微软似乎更关心进行杂耍，而不是做基础工程。例如，为了绑定到支持外键查找的第二个数据源，silverlight 组合框完全被破坏了。通过三个主要版本，他们对此一无所知，同时生产出更加壮观但从根本上无用的多媒体好东西。

但是现在，时间临近了…… Silverlight 业务线 UI 设计工具已经出现在 VS2010 测试版中。瞧，Silverlight4 的测试版同时出现了——大量的基本工程问题要么已修复，要么正在重新设计。

回想起来，我不应该感到惊讶。微软知道构建一个完整的平台需要时间，而且他们知道在酝酿阶段，支持炫目的演示比 LOB 应用程序更重要，因为观看的大批管理傻瓜会指着他们说 ooooh aaaaaah 并告诉他们的朋友如果你向他们展示一个侧面有电影的旋转立方体，但如果你向他们展示绑定的组合框，他们就会睡着。

在测试版中，它还没有为黄金时段做好准备。但它的街道比以前更早。这里的关键词是*beta*。他们正在全力以赴，为真正作为工具的第一次认真使用做好准备，而且它看起来一天比一天好。这太令人鼓舞了，十年来我第一次积极参与测试计划，而不是将其用作免费软件的来源，因为我看到错误报告有所作为。

但什么是 Silverlight，谁在乎呢？浏览器标记 (HTML) 加上脚本 (javascript) 加上 Web 服务是如何为基于服务器的应用程序构建 UI 代理的一个很好的原型，并且是一种真正构建它们的糟糕方法。Silverlight 是 HTML+JS 所暗示的。所有的课程都被保留了：标记、样式表、可编写脚本。

主要差距已被填补：

*   已创建一致且*可共享的安全模型（查找 Windows 身份验证服务）*
*   现在VS2010中有相当不错的工具。
*   艺术部门有一些造型工具可以限制他们的愚蠢选择。
*   RIA 使得在两端进行一致的验证变得简单。

我个人怀疑任何艺术专业的学生都会掌握样式表设计，但那是另一回事。

未来*不是*纯 Javascript。对于 LOB 开发来说，这是金钱所在并且一直都在的地方，脚本是一场灾难。开发是一头猪，调试是一头猪，一场等待发生的安全灾难，一场性能噩梦。

Flash无处不在而Silverlight并非如此的论点是无关紧要的。这就像说 COBOL 无处不在。它曾经是，事实上现在仍然是，但这对下一代的发展绝对没有*意义*。此外，为了让 Silverlight 无处不在，微软所要做的就是通过 Windows 更新将其推出。我会给你*很大*的可能性，它会在 VS2010 进入 RTM 后不久出现在 Windows 7 服务包中。

与 Flash 不同，Silverlight 建立在 XAML 之上，Windows 直接支持 XAML。从 Vista 开始，XAML 受益于硬件加速。此外，Silverlight 的预期用途是 LOB 开发。游戏正在发生变化，因为有史以来第一次，从*技术*角度来看，网络上的 LOB 开始看起来像是一个好主意。

Silverlight 是下一件大事。这是一个非常好的想法，有大笔资金和经验支持，现在是积极参与测试计划的时候了。如果你这样做了，那么在发布版本中就会少很多可抱怨的了。

关于其他平台，我认为微软不太在意，我也不在乎。Mac 用户并不代表重要的市场力量，也永远不会。Unix 用户数量更多，但他们的反微软做法很虔诚，因此不会使用它，而且无论如何微软宁愿卖给你一份 Server 2010 的副本。

Silverlight4 最终成为应用程序开发的可行运行时，我非常希望开始在智能手机等紧凑型设备上看到它。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-12-27T21:33:45.803

一般而言，很难合理化对具有动态媒体的平台的投资。我的意思是，我可以将 Flash 用于视频，但如果我要编写一个商业 Web 应用程序，我仍然会使用 HTML、JavaScript、AJAX 等——而不是使用 Flash/Silverlight/其他任何东西。

在我作为开发人员的职业生涯中，我从来没有以有意义的方式使用过利用 Flash 的网站。另一方面，我看到了很好的 AJAX 使用（例如，Google Mail）。动画在某些情况下是相关的（例如，游戏），但使用 Flash 或 Silverlight 构建合理的 UI……嗯，这**是**可能的，我们知道是的，但是当你可以让 HTML 做同样的事情时，谁需要它们，在更可预测的时尚？

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-02-13T01:44:48.860

对于 Silverlight 目前的竞争力，有不少好评；但是，任何讨论都应该考虑到 Silverlight 正在迅速发展，微软将在今年的 MIX 会议（2009 年 3 月 16 日）上宣布 v3。

恕我直言，最令人兴奋的新功能是对 3D 的 GPU 支持。虽然这只是新的增强功能之一，但它可能会改变游戏开发者的平衡。我强烈推荐这篇文章： [Scott Guthrie 对 Silverlight 3 的一瞥](http://weblogs.asp.net/scottgu/archive/2008/11/16/update-on-silverlight-2-and-a-glimpse-of-silverlight-3.aspx)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-12-27T23:33:34.597

我想说的是，Silverlight 的**潜力**体现在 .Net 开发人员对在该平台上进行试验和构建的极大兴趣中。Microsoft 已经完成了使 Silverlight 2 控制框架易于访问的工作，因此如果您在该平台上构建，您就有可能构建一个非常易于访问的应用程序。自 Silverlight 2 发布以来，我看到了对使用 Silverlight 构建业务线 (LOB) 应用程序的极大兴趣和活动。

我看到的**趋势是，****用户交互很重要**，公司愿意并有兴趣为面向内部和面向外部的应用程序创造出色的用户体验。iPhone 和对[Microsoft Surface](http://www.microsoft.com/surface/index.html)的兴趣已经证明了这一点。我现在看到用户交互设计师在 Silverlight LOB 应用程序上工作。一年前，公司让开发人员而不是设计人员为 LOB 应用程序设计界面。

现在，我的观点是有偏见的，因为我热爱这项技术并为微软工作，但请尝试一下，自己看看。我发现 Silverlight 有一个非常简洁的编程模型，可以很好地分离设计/代码。

迈克尔

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-04-19T06:13:32.760

我在网上冲浪，我〜从来没有看到任何使用或需要 Silverlight 的东西。我到处都能看到 Flash 的东西。我最近看到的一张图片显示，所有平台上 90% 的浏览器都使用了 flash。Silverlight 大约是 25%。[这是一个非常好的表格](http://silverlight.net/forums/t/3015.aspx)，比较了每个人的能力

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-08-14T17:33:35.547

我已经使用 Flash 和 Silverlight 完成了实际项目。我都喜欢。我什至为 CiCi's Pizza 做了一个大型（300 多个小时）项目，其中涉及大量 Flash。实际上，那是一个有趣的项目。

我想说 Flash 有一个更好的 IDE 可以轻松地制作动画。这一直是它的强项，而且它仍然非常好。但是 Silverlight 在后端有一种更好的语言——.NET。从这个角度来看，Silverlight 应该更能吸引已经拥有大量 .NET 经验的程序员类型。但 Flash 仍然更适合需要制作交互式菜单、动画等的艺术类型。

更重要的是，Silverlight 提供了一些 Flash 没有提供的强大功能，反之亦然。但 Silverlight 支持的一件事是多线程。您甚至可以在 Silverlight 应用程序中使用出色的 BackgroundWorker 类来做一些非常酷的类似桌面应用程序的东西。这一直是 Flash 一直缺乏的东西。

在我制作的[Regex Hero 基准测试功能](http://regexhero.net/tester/)中可以看到 Silverlight 应用程序中的多线程示例。只需点击“基准测试”下的开始按钮，即使 UI 的其余部分仍然响应，也会启动一个 BackgroundWorker 线程来对正则表达式进行基准测试。

像这样的小功能我们经常认为是 Flash 根本无法做到的。这就是 Silverlight 和它的 .NET 辉煌的所在。这就是为什么我认为它会继续流行。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-12-27T22:51:25.057

我认为 Silverlight 不会很快成为 Flash 杀手。也就是说，Silverlight 确实为 WPF 应用程序提供了出色的部署模型。我希望看到更多为 Silverlight 编写的业务线应用程序，而不是面向公众的网站中 Silverlight 内容的数量。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-12-28T00:13:07.060

它将允许开发人员浪费（甚至更多）大量时间编辑 XML 文件 :)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-04-09T16:20:44.823

[Silverlight 统治 RIA 世界的 4 种方式](http://codetoglory.com)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-04-09T16:29:36.643

Silverlight 之于 Flash 就像 C# 之于 Java。它的技术做得对，它将在世界的 MS 商店中获得一席之地，但要推翻冠军已经为时已晚。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-12-27T19:07:30.407

在我看来，Silverlight 的潜力与 Flash 及其在 Microsoft 堆栈上提供更好的多媒体体验方面的能力非常相似。有人会找到一种方法来制作令人惊叹的 Silverlight 应用程序，该应用程序将在 YouTube 等网站上一遍又一遍地出现，这将有助于它获得更好的立足点。

Silverlight 将会有更多的发展，微软将拥有更多的软件来更好地利用 Silverlight 的能力。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-12-27T21:02:43.137

我完全可以看到不喜欢 JavaScript 的人开始使用 Silverlight 只是为了使用托管代码进行 DOM 操作。是的，我知道使用 Silverlight 只是为了这样做有点过头了，但是当我完全进入 C# 时，我曾经有过这种感觉。但是现在我已经开始使用 jQuery，我不再有这种感觉了......

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-12-27T23:50:18.713

我一直在研究休闲游戏开发，我看到 Silverlight 在该领域的巨大潜力。Flash 游戏开发显然要广泛得多，但正如您在这个[问题](https://stackoverflow.com/questions/369558/web-based-game-development-flex-builder-or-flash-cs3)中看到的那样，Flash 游戏开发的工作流程涉及多个工具，尽管它们都是由 Adob​​e 制作的，但它们不一定能很好地协同工作。我在 Silverlight 中完成了一些原型设计工作，我认为 Blend 和 VS2008 之间的集成使 Silverlight 成为强有力的竞争者。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-12-11T00:42:58.490

现在，Flash 是行动的所在，Silverlight 仅适用于按照他们的指示行事的 Microsoft 开发人员。真正的问题是，微软在 Silverlight 所在的浏览器大战中严重输了（输了？）。随着明年 ChromeOS 的推出，移动 web 和非微软产品的吸引力将会更大，而所有新的 HTML5 和 CSS3 功能，也是微软的一个弱点，让人考虑是否值得。

Silverlight 在微软不被视为交易破坏者或交易促成者的独家市场中是一个弱项。

# c# - 如何在 MSBuild 任务中获取当前的 CodeDomProvider

> ID：395313
> 
> 赞同：0
> 
> 时间：2008-12-27T19:19:45.887
> 
> 标签：c#, msbuild, code-generation, task, codedom

我有一个任务，我想使用 CodeDom 生成一些代码。如何获取当前项目的当前“语言”或 CodeDomProvider 调用我的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-27T20:24:58.830

好的，我最终设法弄清楚了：

[在 MSBuild 任务中获取 CodeDomProvider](https://justinmchase.com/2008/12/27/getting-a-codedomprovider-in-an-msbuild-task/)

# .net - .NET 反射 - 查找定义静态成员的类型

> ID：395314
> 
> 赞同：0
> 
> 时间：2008-12-27T19:20:25.607
> 
> 标签：.net, reflection, system.reflection

我的反思有问题。我需要找到实例化静态成员的类型。我的代码如下所示：

```
 private class SimpleTemplate : PageTemplate
    {
        internal static readonly IPageProperty NameProperty =
            PropertyRepository.Register("Name");
    } 
```

PropertyRepository 是属性的存储库（显然）。它跟踪使用我正在构建的类型系统注册的所有属性。

为了成功地做到这一点，我需要跟踪所有属性以及定义它们的类型。否则，如果定义了两个具有相同名称的属性，属性存储库将无法区分它们。

所以，我想做的是找出定义 NameProperty 的类型并存储类型和名称。我怎样才能做到这一点？

我想使用强类型，即我不想将类型作为参数发送给PropertyRepository.Register。这很容易出错，因为我无法验证类型参数是否正确。

我想，解决方案将涉及反思。有没有办法使用反射来确定哪种类型调用静态方法？静态属性是使用静态构造函数（编译器生成的）隐式实例化的。有没有办法让我处理那个构造函数？这似乎可行，我只是不知道该怎么做。

换句话说：如果方法 A 调用方法 B，有什么方法 B 可以判断它是使用反射从 A 调用的吗？我想有，但我不知道如何。

有人知道吗？

**编辑：**我查看了 StackFrame 类，虽然它似乎做了我想要的，但它在生产代码中可能不可靠（我需要它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T19:31:56.707

这*几乎是*[这个问题](https://stackoverflow.com/questions/171970/how-can-i-find-the-method-that-called-the-current-method)的重复，但不*完全是*。不过看看那个人的答案。

就个人而言，我认为我会传递类型。另一种方法是使用属性，例如

```
[PropertyName("Name")]
private static readonly IPageProperty NameProperty = null;

static
{
    PropertyRepository.RegisterProperties(typeof(SimpleTemplate));
} 
```

`PropertyRepostiory.RegisterProperties`然后可以使用反射设置只读字段的值（如果这可行 - 我还没有尝试过；可能会强制执行只读）。虽然有点恶心......或者，您可以在需要时从存储库中获取该属性。

# java - 使用 JUnit 4 的预期异常机制导致意外行为的原因？

> ID：395317
> 
> 赞同：9
> 
> 时间：2008-12-27T19:25:25.393
> 
> 标签：java, unit-testing, exception, junit4

我正在尝试测试特定方法是否会从方法中引发预期的异常。根据 JUnit4 文档和[这个答案](https://stackoverflow.com/questions/156503/how-to-assert-that-a-certain-exception-is-thrown-in-junit45-tests)，我将测试写为：

```
@Test(expected=CannotUndoException.class)  
public void testUndoThrowsCannotUndoException() {   
    // code to initialise 'command'

    command.undo();
} 
```

但是，此代码未通过 JUnit 测试，将抛出的（和预期的）异常报告为错误。

我正在测试的方法在正文中只有这个：

```
public void undo() {
    throw new CannotUndoException();
} 
```

此外，以下测试通过：

```
public void testUndoThrowsCannotUndoException() {
    // code to initialise 'command'

    try { 
        command.undo();
        fail();
    } catch (CannotUndoException cue){

    }
} 
```

这意味着实际抛出了预期的异常。

我实际上打算更改方法以实际做某事，而不是仅仅抛出异常，但这让我很好奇是什么导致了问题，以免将来再次发生。

已进行以下检查：

*   导入测试用例的 CannotUndoException 是正确的
*   JUnit 第 4 版是我的类路径中唯一的版本
*   干净和构建的 Eclipse 工作区并没有改变结果

我使用的是 JUnit 4.1，在同一个测试中我使用的是 Mockito。

什么可能导致错误失败？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-27T20:33:22.680

我发现了问题。

我使用的 TestRunner 是正确的（JUnit 4），但是，我将我的测试类声明为：

```
public class CommandTest extends TestCase 
```

我认为这导致测试运行程序将其视为 JUnit 3 测试。我删除`extends TestCase`并收到了预期的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-27T19:44:49.440

您的测试代码对我来说看起来不错。

检查您是否正在使用 junit 4 测试运行程序，而不是 junit 3.8 测试运行程序 - 这很可能是这里的罪魁祸首（尝试从命令行启动或在运行测试时目视检查命令行）。*您的测试运行程序的类路径可能与您的项目类路径不同*

在 IDE 中尤其如此。或者，您也可以尝试推送到 junit 4.4，看看是否能解决您的问题。（junit 4.5 可能会导致其他问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T23:39:24.027

我有一个类似的问题，我通过添加注释来修复它

```
@RunWith(JUnit4ClassRunner.class) 
```

它告诉单元测试人员使用 4er 版本的 Junit 运行它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T19:46:49.547

好奇的。

我写了三个类：

撤消命令：

```
public class UndoCommand
{
    public void undo()
    {
        throw new CannotUndoException();
    }
} 
```

无法撤消异常：

```
// Note: extends the unchecked superclass RuntimeException
public class CannotUndoException extends RuntimeException
{
    public CannotUndoException()
    {
        super();
    }

    public CannotUndoException(String message)
    {
        super(message);
    }

    public CannotUndoException(String message, Throwable cause)
    {
        super(message, cause);
    }

    public CannotUndoException(Throwable cause)
    {
        super(cause);    
    }
} 
```

还有一个 JUnit 4.4 测试类：

```
import org.junit.Test;

public class UndoCommandTest
{
    @Test(expected=CannotUndoException.class)
    public void testUndo()
    {
        UndoCommand command = new UndoCommand();

        command.undo();
    }
} 
```

完美运行 - 所有测试均通过，“绿色”结果。

如果我从注释中删除 (expected=...) 测试失败，正如预期的那样。

我正在使用 Sun JDK 6、JUnit 4.4 和 IntelliJ 7.0.5。

你的有什么不同？

# c# - 是否可以在 .Net 3.5 中进行通用控件？

> ID：395321
> 
> 赞同：10
> 
> 时间：2008-12-27T19:32:45.660
> 
> 标签：c#, .net, winforms, generics, user-controls

我声明了以下通用用户控件：

```
public partial class MessageBase<T> : UserControl
    {
        protected T myEntry;
        public MessageBase()
        {
            InitializeComponent();
        }
        public MessageBase(T newEntry)
        {
            InitializeComponent();
            myEntry = newEntry;
        }    
    }
} 
```

但是编译器不允许我这样做：

```
public partial class MessageControl : MessageBase<Post>
{
    public MessageControl()
    {
        InitializeComponent();
    }
} 
```

如何在 C# 中创建通用用户控件？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-27T21:42:10.500

试试这个

```
public partial class MessageControl : MessageControlBase
{    
    public MessageControl()    
    {
        InitializeComponent();    
    }
}

public class MessageControlBase : MessageBase<Post>
{} 
```

让设计器工作的关键是您正在编辑的类的基类不能是通用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-05T08:32:07.157

是的。这是可能的。请参阅下面的链接以获得一个想法。

[https://web.archive.org/web/20130603104810/http://www.hackersbasement.com/csharp/post/2009/08/29/Generic-Control-Builder-in-ASPNet.aspx](https://web.archive.org/web/20130603104810/http://www.hackersbasement.com/csharp/post/2009/08/29/Generic-Control-Builder-in-ASPNet.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T19:46:42.370

一方面，虽然通用控件在 .NET 下是可能的，但 Visual Studio 设计者不支持它们，因此如果你想使用它们，你只能靠你自己。您必须自己在代码中实例化它们并执行布局。

至于您提到的错误，在我看来，您似乎看错了方向。也许您可以在这里写下整个错误文本？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T20:00:13.543

.NET 框架支持它们，但正如 Vilx 所言，设计人员根本不支持 - 并且任何基于 xml/标记的平台（xaml (wpf) 或 ASP.NET）都不会喜欢泛型。所以最好的建议是：不要使用它们。

一个常见的折衷方案是拥有一个`Type`属性（或`object`您调用的模板属性`GetType()`），并在控件内简单地转换等。同样，这种用法通常会使用`Activator.CreateInstance`, 和`TypeDescriptor`（用于元数据查找等）。

# html - HTML 框架分配

> ID：395322
> 
> 赞同：0
> 
> 时间：2008-12-27T19:32:49.713
> 
> 标签：html, html-table

我在划分 HTML 框架时遇到了麻烦。我一直在 HTML 中使用以下字段：

```
<table  width=900 border="1" cellspacing="10">
  <tr>
    <td width="500" height="170">section1 </td>
    <td width="400" rowspan=2> section2</td> 
  </tr>
  <tr>  
    <td width="500" height="400" valign="left">
      <div id="response">
      </div>
    </td>
  </tr>
</table> 
```

它正在创建一个表，但问题是一个响应元素，它是动态加载的。当它加载 section1 的大小时，section2 也会发生变化。有人会说alter方法划分可变大小的帧，这意味着更改section1中的内容不应该影响section 2，同样#response元素更改不应该影响section1的大小？

有没有解决这种情况的新方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T20:01:25.197

在大多数浏览器中，表格和其他元素会逐渐加载，因此连接速度较慢的人不必等待五分钟就能看到内容。

表格单元格是否改变大小无关紧要。您可以为“响应”部门分配宽度/高度 - 这应该有助于在加载内容时大幅改变大小。

# c# - 寻找 Matlab 到 F#/C# 脚本转换器

> ID：395337
> 
> 赞同：1
> 
> 时间：2008-12-27T19:51:46.743
> 
> 标签：c#, matlab, f#

我有一堆 <5 matlab 脚本。是否有工具可以从中吐出 F# 或 c# 等价物。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T21:45:48.573

Rajiv 我不知道有任何脚本转换器，但您可以编译您的 Matlab 代码，然后从 .NET 调用它。这里有两个链接。希望这可以帮助。 [Net Builder和](http://www.mathworks.com/products/netbuilder/)[Code Project](http://www.codeproject.com/KB/dotnet/matlabeng.aspx)上的一个旧项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-15T22:10:53.923

你检查过 [F# 数学工具](http://www.codeplex.com/fsmathtools)吗？

# python - 我可以在 __unicode__ 返回中使用 ForeignKey 吗？

> ID：395340
> 
> 赞同：12
> 
> 时间：2008-12-27T19:58:22.550
> 
> 标签：python, django, django-models

我有以下课程：成分，食谱和食谱内容......

```
class Ingredient(models.Model):
    name = models.CharField(max_length=30, primary_key=True)
    qty_on_stock = models.IntegerField()

    def __unicode__(self):
        return self.name

class Recipe(models.Model):
    name = models.CharField(max_length=30, primary_key=True)
    comments = models.TextField(blank=True)
    ingredient = models.ManyToManyField(Ingredient)

    def __unicode__(self):
        return self.name

class RecipeContent(models.Model):
    recipe = models.ForeignKey(Recipe)
    ingredients = models.ForeignKey(Ingredient)
    qty_used = models.IntegerField() 
```

但是对于 RecipeContent 中的 __unicode__() 我想使用此 RecipeContent 所属的食谱名称......有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-27T20:02:38.330

```
class RecipeContent(models.Model):
  ...
  def __unicode__(self):
    # You can access ForeignKey properties through the field name!
    return self.recipe.name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-07-16T01:01:29.723

如果您只关心食谱的名称部分，您可以这样做：

```
class Recipe(models.Model):
    name = models.CharField(max_length=30, primary_key=True)
    comments = models.TextField(blank=True)
    ...

    def __unicode__(self):
        return self.name

class RecipeContent(models.Model):
    recipe = models.ForeignKey(Recipe)
    ...

    def __unicode__(self):
        return str(self.recipe) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-31T18:31:53.533

`__unicode__()`是的，你可以（作为 bishanty 点），但要为被叫但 FK 尚未设置的情况做好准备。我来过几次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-12T02:32:35.873

在 Python 3 中没有`__unicode__`，您需要改为使用`__str__`。

```
 class RecipeContent(models.Model):
        ...
        def __str__(self):
            return self.recipe.name 
```

# javascript - 在 JavaScript 中获取元素样式表样式

> ID：395341
> 
> 赞同：4
> 
> 时间：2008-12-27T19:58:36.167
> 
> 标签：javascript, css, stylesheet

我一直在使用`getStyle`来自 Pro JavaScript Techniques 的 John Resig 的函数来获取元素的样式：

```
function getStyle(elem, name) {
    // J/S Pro Techniques p136
    if (elem.style[name]) {
        return elem.style[name];
    } else if (elem.currentStyle) {
        return elem.currentStyle[name];
    }
    else if (document.defaultView && document.defaultView.getComputedStyle) {
        name = name.replace(/([A-Z])/g, "-$1");
        name = name.toLowerCase();
        s = document.defaultView.getComputedStyle(elem, "");
        return s && s.getPropertyValue(name);
    } else {
        return null;
    }
} 
```

但是，如果未指定样式，此方法将返回元素的默认样式：

[http://johnboxall.github.com/test/getStyle.html](http://johnboxall.github.com/test/getStyle.html)

[替代文字 http://img.skitch.com/20081227-8qhxie51py21yxuq7scy32635a.png](http://img.skitch.com/20081227-8qhxie51py21yxuq7scy32635a.png)

是否可以仅获取元素的样式表指定样式（如果样式未定义，则返回 null）？

更新：

为什么我需要这样的野兽？我正在构建一个允许用户设置元素样式的小组件。可以应用的样式之一是`text-align`- `left`, `center`, `right`- 使用`getStyle`无样式元素默认为`center`. 这使得无法判断元素是否居中是因为用户希望它居中，还是因为这是默认样式而居中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-27T20:17:52.540

> 是否可以仅获取元素的样式表指定样式（如果样式未定义，则返回 null）？

这实际上就是您呈现的例程所做的。问题是，在大多数情况下，大多数样式*都不*是未定义的——它们是由单个浏览器的内部样式表继承和/或定义的。

您可以通过大量的努力，在文档当前视图中的*所有*样式表中迭代定义相关样式的*所有*规则，针对相关元素评估它们，如果没有应用...并且如果没有应用于父级（或此特定样式未继承）...则认为它未定义。这会很慢，而且*非常*容易出错。我不建议尝试。

 **也许你最好退后一步，问问你为什么需要这样的东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T20:31:20.597

也许您的组件可以包装它控制的样式？然后，当通过组件设置样式时，组件知道用户想要什么。

# c# - 使用线程池和函数对象

> ID：395349
> 
> 赞同：1
> 
> 时间：2008-12-27T20:03:27.517
> 
> 标签：c#

使用线程池及其 queuecallbackitem 时，我可以不传入 func 对象（来自方法参数）吗？

我没有看到一个接受一个参数但什么也不返回的函数。有`func<T, TResult>`但是如何将 TResult 设置为 null （想指示“此方法返回 void”）？

另外，我如何将线程池用于返回并采用各种参数的方法？我可以不将 Func 对象存储在通用集合中，也可以存储一个 int 来指示优先级，然后执行这些函数吗？

最后，在静态对象（例如集合）中，全局应用程序需要什么同步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T20:04:59.930

唯一类似的`Func<...>`/ delegate是. 它不能直接使用；但是，您可以将委托包装在彼此内部：`Action<...>``WaitCallback``Action<object>`

```
 Action<object> func = // TODO
        ThreadPool.QueueUserWorkItem(state=>func(state)); 
```

要返回结果，一种选择是更新外部状态。Lambdas / anon-methods 对此很有用，因为它们提供闭包支持：

```
 Func<int, int> func = x => x * 5;
        int query = 4, result = 0;
        ThreadPool.QueueUserWorkItem(state=> {
            result = func(query);
        }); 
```

执行后，`result`（从上述上下文）将被更新。但是，回调更常见：

```
 Func<int, int> func = x => x * 5;
        int query = 4;
        Action<int> callback = x =>
        {
            Console.WriteLine(x);
        };
        ThreadPool.QueueUserWorkItem(state=> {
            int result = func(query);
            callback(result);
        }); 
```

回调函数对结果做了一些有用的事情。

希望这也显示了如何在线程池线程中执行任意函数。

重新同步；您在辅助线程上，因此如果与任何共享状态交谈，您肯定需要同步。但是，您可以选择使用 UI 来同步*结果*（如果合适） - 即（来自 winform）：

```
ThreadPool.QueueUserWorkItem(state => {
    // now on worker thread
    int result = ... // TODO

    this.Invoke((Action)delegate {
       // now on UI thread
       this.Text = result.ToString();
    });

}); 
```

# php - 在所有打开的标签中尊重一个 cookie

> ID：395375
> 
> 赞同：1
> 
> 时间：2008-12-27T20:28:24.313
> 
> 标签：php, authentication, cookies

我有一个 Web 应用程序，它针对 SQL 数据库进行身份验证并设置一个带有凭据的 cookie，就像“记住我”之类的东西。该应用程序的一部分涉及使用书签将内容添加到您的另一个数据库的个人切片中。如果您进行身份验证并在 SAME TAB 中开始使用小书签，这将正常工作。但是，如果您进行身份验证，然后尝试在另一个选项卡实例中使用小书签，则系统就像您未登录一样。我已尽我所能尝试跟踪此问题。我意识到如果不发布大量的应用程序代码可能会很长，但这听起来很熟悉吗？cookie 设置为“/”，因此它应该适用于您可能在应用程序中徘徊的任何地方。

顺便说一下，用于 OS X/Windows 的 Firefox 和 Safari。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-31T04:38:25.510

我会使用 Firefox 扩展 LiveHTTPHeaders 来查看标头并验证是否正在发送 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T04:20:37.403

检查 FireFox 中的 network.cookie.cookieBehavior 配置设置

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-01T20:12:44.903

您是否在 JavaScript 中设置 cookie？如果是这样，它将仅对该选项卡有效。

# php - PHP 在 JVM 上真的更快吗？

> ID：395376
> 
> 赞同：3
> 
> 时间：2008-12-27T20:29:37.650
> 
> 标签：php, jvm, resin

最近我听到很多人宣传说，使用 Resin 的 PHP 实际上比使用 mod_php 快得多，但我在任何地方都找不到任何基准。

这是真的还是只是供应商BS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T21:54:33.143

InfoQ 在 2008 年 JVM 语言峰会上有[这个视频演示](http://www.infoq.com/presentations/nicholson-php-jvm)，主题是“P8，在 JVM 上实现 PHP。涵盖的主题包括将 PHP 引入 JVM 的原因，PHP 和 P8 的概述......”

就我目前听到的情况而言，性能是峰会上很多讨论的话题，但我还没有时间完成这个演讲。但是，我相信 PHP 源代码编译成 JVM 字节码然后在热点 JVM 上运行会胜过纯粹的基于解释的实现，我没有任何问题。

# php - 什么设置可能导致 AMP 服务器一次只允许每个浏览器 1 个请求？

> ID：395377
> 
> 赞同：1
> 
> 时间：2008-12-27T20:30:45.993
> 
> 标签：php, mysql, apache, connection

我正在使用 AMP 服务器（Apache 1.3、MySQL 5.0、PHP 5.1.5），我发现它一次只允许每个浏览器 1 个连接/请求。重现这种情况的最简单方法是请求通过 PHP 传递的大型下载，并尝试同时访问另一个页面。您最终将等待第一个请求（文件下载）在其他页面加载之前完成。

我不确定问题是 Apache、MySQL 还是 PHP。我应该从哪里开始寻找任何想法？

我可以通过同一台计算机上的其他浏览器发出其他请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T21:00:32.190

如果您使用的是 PHP 会话，那么这可能是由会话文件被锁定引起的。为了防止会话文件被同时写入损坏，每个会话一次只能运行一个脚本。这意味着后续请求必须等到第一个请求结束。

脚本终止时会自动编写会话，但您可以通过调用`session_write_close()`. 如果您正在编写一个需要一段时间才能运行的脚本，那么明智的做法是在您不再需要访问会话数据时立即调用它。

[这里](http://uk.php.net/manual/en/function.session-write-close.php)的文档中有一些对此的解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T20:35:45.283

我会开始查看 apache 配置。MaxClients 可能设置为 1？

# jquery - 使用 jQuery 检索包含换行符的 JSON 格式文本时出现问题

> ID：395379
> 
> 赞同：44
> 
> 时间：2008-12-27T20:31:23.620
> 
> 标签：jquery, json, tinymce, line-breaks

我在检索 JSON 格式的文本时遇到了一个奇怪的问题。我使用 jQuery`post`将一些数据（也是 JSON 格式）发送到服务器（运行 PHP），效果很好。然后，当我使用 jQuery 从服务器请求相同的数据时`get`，回调方法永远不会执行。仅当数据为 JSON 格式并且数据包含换行符时才会发生这种情况。当我不使用 JSON 格式时，它工作正常。让我感到困惑的是，上传数据没有问题。

上传代码：（作品）

```
$.post("ajax/contents_ajax.php", {
    'title': caption,
    'text': frameText().getContent(),
    'image_id': img
},
//Callback 
```

下载代码：（不适用于换行符）

```
$.get("ajax/contents_ajax.php", { 'get_item': id },
function (data){
    //Never gets executed if data contains line breaks
}
,'json'); 
```

整个问题源于 TinyMCE 富文本编辑器似乎坚持在任何地方插入换行符，即使我启用了该选项

```
remove_linebreaks : true 
```

我确实更喜欢换行，但如果它们破坏了我的代码，我就不喜欢。谁能告诉我这里的问题是什么，也许我可以如何用 PHP 对服务器上的换行符进行编码？

* * *

## 更新

`'\n'`虽然替换为的建议`''`不起作用，但它接近正确的解决方案。此代码删除了违规字符：

```
function parse($text){
    $parsedText = str_replace(chr(10), "", $text);
    return str_replace(chr(13), "", $parsedText);

} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-12-28T00:45:03.733

如果您想**保留**换行符，您可以尝试：

```
function parse($text) {
    // Damn pesky carriage returns...
    $text = str_replace("\r\n", "\n", $text);
    $text = str_replace("\r", "\n", $text);

    // JSON requires new line characters be escaped
    $text = str_replace("\n", "\\n", $text);
    return $text;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-27T21:03:25.787

换行符不是问题，因为它们需要在 JSON 中正确转义。如果您可以使用它，您可以使用[json_encode](http://us2.php.net/manual/en/function.json-encode.php)自动转义换行符。如果做不到这一点，您可以使用类似于上述 Pim Jager 的方法，但最好使用适当的 JSON 编码器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-05-27T18:08:11.090

我在 PHP4 中创建一个类来模拟 json_encode（在 PHP5 中可用）时遇到了这个问题。这是我想出的：

```
class jsonResponse {
    var $response;

    function jsonResponse() {
        $this->response = array('isOK'=>'KO','msg'=>'Undefined');
    }

    function set($isOK, $msg) {
        $this->response['isOK'] = ($isOK) ? 'OK' : 'KO';
        $this->response['msg'] = htmlentities($msg);
    }

    function setData($data=null) {
        if(!is_null($data))
            $this->response['data'] = $data;
        elseif(isset($this->response['data']))
            unset($this->response['data']);
    }

    function send() {
        header('Content-type: application/json');
        echo '{"isOK":"'.$this->response['isOK'].'","msg":'.$this->parseString($this->response['msg']);
        if(isset($this->response['data']))
            echo ',"data":'.$this->parseData($this->response['data']);
        echo '}';
    }

    function parseData($data) {
        if(is_array($data)) {
            $parsed = array();
            foreach ($data as $key=>$value)
                array_push($parsed, $this->parseString($key).':'.$this->parseData($value));
            return '{'.implode(',', $parsed).'}';
        } else
            return $this->parseString($data);
    }

    function parseString($string) {
            $string = str_replace("\\", "\\\\", $string);
            $string = str_replace('/', "\\/", $string);
            $string = str_replace('"', "\\".'"', $string);
            $string = str_replace("\b", "\\b", $string);
            $string = str_replace("\t", "\\t", $string);
            $string = str_replace("\n", "\\n", $string);
            $string = str_replace("\f", "\\f", $string);
            $string = str_replace("\r", "\\r", $string);
            $string = str_replace("\u", "\\u", $string);
            return '"'.$string.'"';
    }
} 
```

我遵循了[这里](http://www.json.org/fatfree.html)提到的规则。我只使用了我需要的东西，但我认为你可以用你使用的语言来适应你的需要。在我的情况下，问题不在于我最初认为的换行符，而在于 / 没有被转义。我希望这可以防止其他人因为我弄清楚我做错了什么而感到头疼。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T20:40:31.030

你有像 <br /> 这样的换行符还是像 \n 这样的换行符？但尝试用 PHP 替换它们。

```
<?php
$string = 'asdfasf<br />asdfasf';
echo str_replace('<br />', '', $strin); // Replace <br /> with '' (nothing)
?> 
```

或查看[urlencode](http://php.net/urlencode "网址代码")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-27T20:50:14.940

像 Terw 但替换 \n

```
<?php
 $json = str_replace('\n', '', $json);
?> 
```

应该删除所有换行符，jquery 不应该故障转移
标签，但换行符不应该在 JSON 中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T21:22:00.310

你试过这个

```
update tablename set field_name_with_\r\n_in_it = replace(field_name_with_\r\n_in_it,"\r\n","<br />") 
```

它对我有用`mysql 5.0.45`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-11T22:09:35.390

简单，试试：

```
<?php
...
function parseline($string){
  $string = str_replace(chr(10), "//n", $string);
  $string = str_replace(chr(13), "//n", $string);
  return $string;
}

echo parseline($string_with_line_breaks);//returns json readable text 
```

我已经对其进行了测试，并且效果很好。无需添加复杂的功能。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-05T03:00:46.320

如果其他响应不起作用，则可以去除除空格之外的所有空白字符。

`PHP $text = trim(preg_replace( "/[\\x00-\\x19]+/" , '' , $text));`

来自：[https ://github.com/joomla/joomla-cms/issues/14502](https://github.com/joomla/joomla-cms/issues/14502)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-16T07:25:51.083

您还可以使用`<pre>`将保留所有换行符和空格的标记。我发布这个答案是因为我也遇到了这个问题，并且我找到了这个问题的解决方案，之后我随机决定使用`<pre>`标签而不是`<div>`通过问题解决，尽管在很多地方都有不需要的反斜杠`\`

# unix - 如何自动创建 ClearCase 视图？

> ID：395388
> 
> 赞同：1
> 
> 时间：2008-12-27T20:37:32.550
> 
> 标签：unix, views, clearcase

我是一名配置经理，我在 Windows 和 UNIX 环境中工作。目前，我必须自己为开发人员和 QA 工程师创建视图。有没有更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T22:16:17.577

是：编写 ClearCase 视图创建脚本或解释 mkview 用法。然后每个用户都可以创建自己的视图。

创建视图绝对不是配置管理器的角色。

1/**确定视图命名约定**

*   username_viewPurpose：非UCM动态视图
*   username_viewPurpose_snap：非UCM快照视图
*   username_streamname：UCM 动态视图
*   username_streamname_snap：UCM 快照视图

我建议视图名称使用小写。

我真的建议始终在视图名称中包含用户名（作为前缀）。当您知道谁拥有视图而无需“ct lsview”时，管理/管理起来非常容易。

2/**确定视图存储约定**

*   一个中央视图存储，具有通用存储名称，或通用 UNC 路径
*   或每个开发人员桌面一个视图存储。

我使用第二个约定，因为我认为他们的视图是他们根据需要创建/删除/重新创建的临时空间。

3/ **“授权”用户**

*   编写一个脚本（就像 Jonathan 的脚本，但有更多的选择，并且能够在 Windows 或 Unix 上工作）
*   在 wiki 页面中描述 mkview 命令

我实际上使用第二个约定，因为每个用户都可以很容易地键入 mkview 并考虑他/她的环境详细信息（Windows/Unix、中央存储/本地存储，...）

您还需要教他们如何配置他们的配置规范（甚至在 UCM 中），以便：

*   不选择“lost+found”目录（在 UCM 中合并时很有用）
*   不选择以前的配置规范规则尚未选择的任何内容，这意味着如果需要添加一个`'element /aVob/* -none'`（在快照视图中很有用，以便没有很多空目录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T22:04:17.333

开发人员和 QA 工程师是否无法自己创建视图？如果是这样，一些（开发人员和 QA 工程师的）教育是必要的。

在工作中，我们创建自己的工作视图。这是我使用的脚本。默认情况下，我请求它创建一个视图，例如 bug129201，它使用我的用户名和主机作为名称的一部分创建一个视图：bug129201.jleffler.black（其中黑色是我的主要机器）。除非我指定替代位置（我几乎总是这样做），否则视图存储来自当前目录：

```
newview -p /work5/atria bug129201 
```

该脚本采用“-x”选项来避免扩展名称；在这种情况下，它会使用命令行标签创建一个（或多个）视图。此外，按照惯例，' `ct`' 不是古老的 Unix '调用终端'程序，而是 ' `cleartool`' 的别名（或者，在我的例子中，是一个执行`cleartool`程序的 shell 脚本）。

然后我可以将配置规范设置为我当时需要的任何内容。我也会很快处理视图，以确保它们不会堆积不需要的碎片。

```
#!/bin/ksh
#
#   @(#)$Id: newview.sh,v 1.8 2008/03/14 23:56:28 jleffler Exp $
#
#   Create a new view

usage(){
echo "`basename $0 .sh`: [-x] [-p path] view-tag" >&2; exit 1
}

umask 002
xflag=yes
path=`pwd`
while getopts xp: option "$@"
do
    case "$option" in
    p)  path="$OPTARG";;
    x)  xflag=no;;
    *)  usage;;
    esac
done

((x=OPTIND-1))
shift $x

[ $# -eq 0 ] && usage

umask 0

if [ $xflag = yes ]
then extn=$LOGNAME.`uname -n`
fi

for view in $*
do
    if [ $xflag = yes ]
    then
        # Check whether user added the extension already and forgot to
        # use -x option.
        case $view in
        *.$extn)    : OK;;
        *)          view=$view.$extn;;
        esac
    fi
    ct mkview -tag $view $path/$view.vws
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T06:20:03.323

我认为最简单和最方便的方法是使用新的 ClearCase 插件 - “ClearEnv”，它会自动为您完成。在这里查看：http: [//gomidjets.com/ClearEnv.html](http://gomidjets.com/ClearEnv.html)

您还可以使用此插件来控制方法。

BR,

塔米尔·格芬

CM 和 ALM

[GoMidjets](http://gomidjets.com) - 自动化您的优势

# java - 很好地打印 Java 集合（toString 不返回漂亮的输出）

> ID：395401
> 
> 赞同：224
> 
> 时间：2008-12-27T20:55:19.563
> 
> 标签：java, debugging, pretty-print

我希望`Stack<Integer>`像 Eclipse 调试器那样打印一个对象（即`[1,2,3...]`），但打印它`out = "output:" + stack`并不会返回这个好的结果。

澄清一下，我说的是 Java 的内置集合，所以我不能覆盖它的`toString()`.

我怎样才能得到一个很好的可打印版本的堆栈？

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2008-12-27T20:59:28.307

您可以将其转换为数组，然后使用以下命令打印出来`Arrays.toString(Object[])`：

```
System.out.println(Arrays.toString(stack.toArray())); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2015-03-10T10:28:50.930

```
String.join(",", yourIterable); 
```

（Java 8）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-08-13T05:02:52.680

使用 java 8 流和收集器可以轻松完成：

```
String format(Collection<?> c) {
  String s = c.stream().map(Object::toString).collect(Collectors.joining(","));
  return String.format("[%s]", s);
} 
```

首先我们使用`map`with`Object::toString`创建`Collection<String>`，然后使用加入收集器将集合中的每个项目`,`作为分隔符加入。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2011-11-15T23:42:11.747

Apache Commons 项目提供的 MapUtils 类提供了`MapUtils.debugPrint`一种可以漂亮地打印您的地图的方法。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-12-04T13:00:42.543

番石榴看起来是个不错的选择：

[`Iterables.toString(myIterable)`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html#toString-java.lang.Iterable-)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2010-09-08T15:39:20.343

System.out.println(Collection c) 已经以可读格式打印任何类型的集合。只有当集合包含用户定义的对象时，才需要在用户定义的类中实现 toString() 来显示内容。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2008-12-27T21:02:11.203

在类上实现 toString()。

我推荐使用[Apache Commons ToStringBuilder](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/builder/ToStringBuilder.html)来简化此操作。有了它，你只需要编写这种方法：

```
public String toString() {
     return new ToStringBuilder(this).
       append("name", name).
       append("age", age).
       toString(); 
} 
```

为了获得这种输出：

> 人@7f54[姓名=斯蒂芬，年龄=29]

还有一个[反射实现](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/builder/ReflectionToStringBuilder.html)。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-12-27T21:47:47.243

我同意上述关于覆盖`toString()`您自己的类（以及尽可能自动化该过程）的评论。

对于您**没有**`ToStringHelper`定义的类，您可以为每个您想要根据自己的喜好处理的库类编写一个具有重载方法的类：

```
public class ToStringHelper {
    //... instance configuration here (e.g. punctuation, etc.)
    public toString(List m) {
        // presentation of List content to your liking
    }
    public toString(Map m) {
        // presentation of Map content to your liking
    }
    public toString(Set m) {
        // presentation of Set content to your liking
    }
    //... etc.
} 
```

编辑：回应 xukxpvfzflbbld 的评论，这里是前面提到的案例的可能实现。

```
package com.so.demos;

import java.util.List;
import java.util.Map;
import java.util.Set;

public class ToStringHelper {

    private String separator;
    private String arrow;

    public ToStringHelper(String separator, String arrow) {
        this.separator = separator;
        this.arrow = arrow;
    }

   public String toString(List<?> l) {
        StringBuilder sb = new StringBuilder("(");
        String sep = "";
        for (Object object : l) {
            sb.append(sep).append(object.toString());
            sep = separator;
        }
        return sb.append(")").toString();
    }

    public String toString(Map<?,?> m) {
        StringBuilder sb = new StringBuilder("[");
        String sep = "";
        for (Object object : m.keySet()) {
            sb.append(sep)
              .append(object.toString())
              .append(arrow)
              .append(m.get(object).toString());
            sep = separator;
        }
        return sb.append("]").toString();
    }

    public String toString(Set<?> s) {
        StringBuilder sb = new StringBuilder("{");
        String sep = "";
        for (Object object : s) {
            sb.append(sep).append(object.toString());
            sep = separator;
        }
        return sb.append("}").toString();
    }

} 
```

这不是一个完整的实现，而只是一个开始。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-01-21T15:46:07.460

您可以使用**JAVA 中的“对象”类**（自 1.7 起可用）

```
Collection<String> myCollection = Arrays.asList("1273","123","876","897");
Objects.toString(myCollection); 
```

输出：1273、123、876、897

另一种可能性是使用**Google Guave 的“MoreObjects”类**，它提供了许多有用的辅助函数：

```
MoreObjects.toStringHelper(this).add("NameOfYourObject", myCollection).toString()); 
```

输出：NameOfYourObject=[1273, 123, 876, 897]

[番石榴文档](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/MoreObjects.html)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-08-01T17:02:00.590

在 Java8 中

```
//will prints each element line by line
stack.forEach(System.out::println); 
```

或者

```
//to print with commas
stack.forEach(
    (ele) -> {
        System.out.print(ele + ",");
    }
); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-12-15T13:26:09.103

使用**Apache Commons 3**，您想调用

```
StringUtils.join(myCollection, ",") 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-08-17T08:57:18.383

如今，大多数集合在 Java 中都有用`toString()`（Java7/8）。因此，无需进行流操作来连接您需要的内容，只需覆盖`toString`集合中的值类即可获得所需的内容。

[AbstractMap](https://docs.oracle.com/javase/8/docs/api/java/util/AbstractMap.html#toString--)和[AbstractCollection](https://docs.oracle.com/javase/8/docs/api/java/util/AbstractCollection.html#toString--)都通过对每个元素调用 toString 来实现 toString()。

下面是一个显示行为的测试类。

```
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;

public class ToString {
  static class Foo {
    int i;
    public Foo(int i) { this.i=i; }
    @Override
    public String toString() {
        return "{ i: " + i + " }";
    }
  }
  public static void main(String[] args) {
    List<Foo> foo = new ArrayList<>();
    foo.add(new Foo(10));
    foo.add(new Foo(12));
    foo.add(new Foo(13));
    foo.add(new Foo(14));
    System.out.println(foo.toString());
    // prints: [{ i: 10 }, { i: 12 }, { i: 13 }, { i: 14 }]

    Map<Integer, Foo> foo2 = new HashMap<>();
    foo2.put(10, new Foo(10));
    foo2.put(12, new Foo(12));
    foo2.put(13, new Foo(13));
    foo2.put(14, new Foo(14));
    System.out.println(foo2.toString());
    // prints: {10={ i: 10 }, 12={ i: 12 }, 13={ i: 13 }, 14={ i: 14 }}
  }
} 
```

## 更新 Java 14（2020 年 3 月）

`toString()`记录现在是一项预览功能，如果您的类只保存数据，则不需要您覆盖。Records 实现了一个数据契约，为它的字段提供公共只读访问权限，并为您的方便实现默认函数，如比较、toString 和哈希码。

所以一旦可以实现`Foo`如下行为：

```
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;

public class ToString {
  static record Foo(int i) { }

  public static void main(String[] args) {
    Foo f = new Foo(10);
    System.out.println(f.toString());
    // prints: Foo[i=10]

    List<Foo> foo = new ArrayList<>();
    foo.add(new Foo(10));
    foo.add(new Foo(12));
    foo.add(new Foo(13));
    foo.add(new Foo(14));
    System.out.println(foo.toString());
    // prints: [Foo[i=10], Foo[i=12], Foo[i=13], Foo[i=14]]

    Map<Integer, Foo> foo2 = new HashMap<>();
    foo2.put(10, new Foo(10));
    foo2.put(12, new Foo(12));
    foo2.put(13, new Foo(13));
    foo2.put(14, new Foo(14));
    System.out.println(foo2.toString());
    // prints: {10=Foo[i=10], 12=Foo[i=12], 13=Foo[i=13], 14=Foo[i=14]}
  }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-03-03T06:11:23.760

**JSON**

另一种解决方案可能是将您的集合转换为[JSON](http://www.json.org/)格式并打印 Json-String。优点是格式良好且可读的对象字符串，无需实现`toString()`.

使用 Google 的[Gson](https://github.com/google/gson)的示例：

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

...

    printJsonString(stack);

...
public static void printJsonString(Object o) {
    GsonBuilder gsonBuilder = new GsonBuilder();
    /*
     * Some options for GsonBuilder like setting dateformat or pretty printing
     */
    Gson gson = gsonBuilder.create();
    String json= gson.toJson(o);
    System.out.println(json);
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-27T21:01:51.797

如果这是你自己的集合类而不是内置的，你需要重写它的 toString 方法。Eclipse 为没有硬连线格式的任何对象调用该函数。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2010-09-08T17:55:12.733

刚刚修改了前面的示例以打印包含用户定义对象的偶数集合。

```
public class ToStringHelper {

    private  static String separator = "\n";

    public ToStringHelper(String seperator) {
        super();
        ToStringHelper.separator = seperator;

    }

    public  static String toString(List<?> l) {
        StringBuilder sb = new StringBuilder();
        String sep = "";
        for (Object object : l) {
            String v = ToStringBuilder.reflectionToString(object);
            int start = v.indexOf("[");
            int end = v.indexOf("]");
            String st =  v.substring(start,end+1);
            sb.append(sep).append(st);
            sep = separator;
        }
        return sb.toString();
    }

    public static String toString(Map<?,?> m) {
        StringBuilder sb = new StringBuilder();
        String sep = "";
        for (Object object : m.keySet()) {
            String v = ToStringBuilder.reflectionToString(m.get(object));
            int start = v.indexOf("[");
            int end = v.indexOf("]");
            String st =  v.substring(start,end+1);
            sb.append(sep).append(st);
            sep = separator;
        }
        return sb.toString();
    }

    public static String toString(Set<?> s) {
        StringBuilder sb = new StringBuilder();
        String sep = "";
        for (Object object : s) {
            String v = ToStringBuilder.reflectionToString(object);
            int start = v.indexOf("[");
            int end = v.indexOf("]");
            String st =  v.substring(start,end+1);
            sb.append(sep).append(st);
            sep = separator;
        }
        return sb.toString();
    }

    public static void print(List<?> l) {
        System.out.println(toString(l));    
    }
    public static void print(Map<?,?> m) {
        System.out.println(toString(m));    
    }
    public static void print(Set<?> s) {
        System.out.println(toString(s));    
    }

} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-08-19T07:55:52.360

在 Collection 上调用 Sop 时要小心，它可能会抛出`ConcurrentModification`异常。因为`toString`每个集合的内部方法在内部调用`Iterator`集合。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-11T22:35:39.150

您可以尝试使用

```
org.apache.commons.lang3.builder.ToStringBuilder.reflectionToString(yourCollection); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-12-27T19:11:43.720

有两种方法可以简化您的工作。1.导入Gson库。2.使用龙目岛。

它们都可以帮助您从对象实例创建字符串。Gson 将解析您的对象，lombok 将覆盖您的类对象 toString 方法。

我举了一个关于 Gson prettyPrint 的例子，我创建了帮助类来打印对象和对象集合。如果您使用的是 lombok，您可以将您的类标记为 @ToString 并直接打印您的对象。

```
@Scope(value = "prototype")
@Component
public class DebugPrint<T> {
   public String PrettyPrint(T obj){
      Gson gson = new GsonBuilder().setPrettyPrinting().create();
      return gson.toJson(obj);
   }
   public String PrettyPrint(Collection<T> list){
      Gson gson = new GsonBuilder().setPrettyPrinting().create();
      return list.stream().map(gson::toJson).collect(Collectors.joining(","));
   } 
```

}

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-01-30T21:55:35.417

较新的 JDK 已经`AbstractCollection.toString()`实现并`Stack`扩展`AbstractCollection`，因此您只需调用`toString()`您的集合：

```
 public abstract class AbstractCollection<E> implements Collection<E> {
    ...
    public String toString() {
        Iterator<E> it = iterator();
        if (! it.hasNext())
            return "[]";

        StringBuilder sb = new StringBuilder();
        sb.append('[');
        for (;;) {
            E e = it.next();
            sb.append(e == this ? "(this Collection)" : e);
            if (! it.hasNext())
                return sb.append(']').toString();
            sb.append(',').append(' ');
        }
    } 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2014-03-29T22:32:15.483

应该适用于除 之外的*任何*集合`Map`，但它也很容易支持。如果需要，修改代码以将这 3 个字符作为参数传递。

```
static <T> String seqToString(Iterable<T> items) {
    StringBuilder sb = new StringBuilder();
    sb.append('[');
    boolean needSeparator = false;
    for (T x : items) {
        if (needSeparator)
            sb.append(' ');
        sb.append(x.toString());
        needSeparator = true;
    }
    sb.append(']');
    return sb.toString();
} 
```

# mysql - 如何在 FreeBSD 上使用 gethostbyname_r 和 DBI 或 DBD::MySQL 解决这个问题？

> ID：395402
> 
> 赞同：2
> 
> 时间：2008-12-27T20:56:32.713
> 
> 标签：mysql, perl, dbi, freebsd

我有一些旧的 perl 代码最近停止在 FreeBSD 机器上工作。失败的代码（以最简单的形式）如下所示：

```
#!/usr/local/bin/perl -w

use strict;
use DBI;

my $datasource = "DBI:mysql:dbname:hostname.domain.com";
my $user = "username";
my $pass = "password";

DBI->connect($datasource, $user, $pass); 
```

这失败并出现以下错误：

```
/libexec/ld-elf.so.1: /usr/local/lib/mysql/libmysqlclient.so.15: Undefined symbol "gethostbyname_r" 
```

如果我将数据源更改为引用“localhost”，则代码成功。

我已经从端口重新安装了 mysql-client、DBI 和 DBD-mysql；没有效果。

此服务器上的其他应用程序（PHP、命令行工具）能够通过主机名访问 mysql 数据库而不会遇到麻烦。

有关如何解决此问题的建议？

编辑添加：我注意到我的盒子有`libmysqlclient.so.15`和`libmysqlclient_r.so.15`。问题可能是 DBD::mysql 在应该使用 libmysqlclient_r 时尝试使用 libmysqlclient 吗？如果是这样，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T21:05:36.283

盲目猜测：

gethostbyname **_r**表明 Perl 使用解析器代码的“可重入”（也称为线程/多线程）版本。似乎有什么不对劲。

从端口树编译依赖项时，您通常可以打开或关闭多线程。您可以`make config`从每个端口应用程序目录更改您之前的选择。

如果您安装了二进制包，则其中某处可能存在版本不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T01:49:03.247

作为一种解决方法，尝试将 hostname.domain.com 添加到 /etc/hosts，或者在 Perl 代码中显式查找 IP 地址并改用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T21:06:20.993

'gethostbyname_r' 是 GNU 扩展，不是 POSIX 标准的一部分。尽管如此，在我的 Freebsd 7 机器上，我的 libc 包含它：

```
nm /usr/lib/libc.a | grep gethostbyname_r
00000eb0 T gethostbyname_r 
```

您的 libc 是否包含此符号？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T21:15:18.150

您的 libmysqlclient 版本对于您的操作系统版本已过期。由于它在 /usr/local 中，我假设它是从源代码编译的，而不是安装的。您可能可以通过重新编译来修复它，但您可能想查看是否有可以通过 OSes 包管理器安装的受支持版本的 mysql。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-27T21:48:09.410

`/usr/local/lib/mysql/libmysqlclient.so.15`暂时移动并`/usr/local/lib/mysql/libmysqlclient.a`移开（重命名或其他）后，尝试从端口重新安装 DBD-mysql 。这可能会强制 DBD-mysql 与`libmysqlclient_r`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-30T11:53:47.837

```
# ldd libmysqlclient.so.15
libmysqlclient.so.15:
        libcrypt.so.3 => /lib/libcrypt.so.3 (0x281bf000)
        libm.so.4 => /lib/libm.so.4 (0x281d7000)
        libz.so.3 => /lib/libz.so.3 (0x281ed000) 
```

FreeBSD 6.4-p3，从端口安装的 mysql-client，重新安装无济于事；（

# ldd 输出中没有 libc ;(

但mysql编译正确：

```
# ldd mysql
mysql:
        libreadline.so.6 => /lib/libreadline.so.6 (0x28089000)
        libncursesw.so.6 => /lib/libncursesw.so.6 (0x280b9000)
        libmysqlclient.so.15 => /usr/local/lib/mysql/libmysqlclient.so.15 (0x28102000)
        libcrypt.so.3 => /lib/libcrypt.so.3 (0x2815c000)
        libz.so.3 => /lib/libz.so.3 (0x28174000)
        libstdc++.so.5 => /usr/lib/libstdc++.so.5 (0x28185000)
        libm.so.4 => /lib/libm.so.4 (0x28250000)
        libc.so.6 => /lib/libc.so.6 (0x28266000)
        libncurses.so.6 => /lib/libncurses.so.6 (0x2834d000) 
```

# string - 是否有可用的开源软件来分析字符串并猜测作者的性别？

> ID：395421
> 
> 赞同：13
> 
> 时间：2008-12-27T21:20:20.013
> 
> 标签：string, file-io, nlp

除了闭源 Web 应用程序之外，我找不到任何东西。有没有活跃的项目？我有兴趣在我正在开发和参与的事情中使用该软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T15:27:17.667

There is a whole set of two-class analyzers that could be adapted here... **spam-blocking and identification software**. It still requires the user to get male-written text (treated as spam) and female text (treated as ham, or the reverse), but many should work.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T00:01:49.063

这是另一个声称这样做的网站：[GenderAnalyzer](http://www.genderanalyzer.com/)。然而，它依赖于另一个名为 uClassify.com 的网站，在我撰写本文时该网站已关闭。他们在底部有一个用于提问的联系链接。

这听起来像是一套学术装备：“在我们的实验室中，它似乎运作良好”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T22:05:34.227

有像“性别精灵”这样的应用程序在合理的成功范围内运行：http: [//bookblog.net/gender/genie.php](http://bookblog.net/gender/genie.php)（尤其是较长的文本）

它不需要完全成功。我需要处理大量数据，而且主要是为了好玩。

如果有人知道任何事情，请分享。

理查德

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-27T22:57:12.830

由于您假设有两个类别，因此几乎任何分类器都可以。一些建议：

*   朴素贝叶斯
*   支持向量机

正如一位较早的评论者所说，从已知的文本样本开始（应该有很多......报纸语料库可能很好），在一些合理的属性（可能存在/不存在或单词或单词对）上进行训练和分类。

这个应该（比较）容易。

如果您使用的是 python，即使是像自然语言工具包（参见：nltk.org）和他们的书这样简单的东西，也应该能让您大有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-22T20:57:08.833

[nlpers](http://nlpers.blogspot.com/2007/10/gender-and-text-gender-and-speech.html)几年前在博客上写过这个；请参阅那里的评论以获取一些建议...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-31T16:17:53.443

您可以在此处尝试对文本字符串进行性别分类：http: [//uclassify.com/browse/uClassify/gender_v3](http://uclassify.com/browse/uClassify/gender_v3)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-27T21:25:57.443

你会遇到一个问题：猜测只是——猜测。甚至没有远程准确的方法可以严格地从作者的作品中分辨出作者的性别，您最多只能得到一个错误的估计。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-27T21:47:06.497

嘿嘿，这个应该可以了。你需要从男性和女性作者那里拿一堆书，提取句子，将它们混合起来，然后将它们输入某种神经网络进行训练。老实说，我很想看看是否有人把它拉下来。哦，我只是好奇**为什么**需要这样一个程序:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-27T22:11:15.840

史蒂芬·贝克 (Stephen Baker) 的书中有一段关于这方面的内容，**The Numerati**。有些公司致力于计算分析博客圈以用于营销目的，他们的部分算法处理决定作者是男性还是女性。我建议阅读这个。

我不相信这样的工作是开源的，但你也许可以自己构建一个压缩版本。但是，由于没有分析大量数据以对此进行编程，我认为它不会非常准确。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-27T22:13:49.500

有一些潜在语义索引/分析的开源实现。如果您有一个与您的应用程序相关的良好的男性和女性写作训练集，它可能能够准确地分类以提供有用的信息。

# directory - 自动复制文件夹，直到达到特定限制

> ID：395424
> 
> 赞同：3
> 
> 时间：2008-12-27T21:25:10.673
> 
> 标签：directory, copying

问候。

1 - 假设我有大约 500 个大小可变的文件夹，总大小为 100 GB。

2 - 我想将这些文件夹自动分配到其他文件夹中，直到达到 700 MB 的大小并优化空间。

示例：在文件夹“CD--01”中，我希望在不超过 700 MB 限制的情况下拥有尽可能多的文件夹，依此类推，在“CD--02”、“CD--03”...

是否有一种工具可以让我“即时”执行此操作，还是我必须自己编写一个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T21:09:14.060

归根结底，您是在寻求解决[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的方法，该问题[有多种形式](http://en.wikipedia.org/wiki/List_of_knapsack_problems)。

一个简单的方法是按照以下伪代码，但这**不会**为所有输入产生最佳解决方案（参见上面的文章）。

```
while (there are unallocated files) {
    create a new, empty directory
    set remaining space to 700,000,000
    while (the size of the smallest unallocated is at most (<=) the remaining space) {
        copy into the current the largest unallocated file with size at most the remaining space
        subtract that file's size from the remaining space
        remove that file from the set of unallocated files
    }
    burn the current directory
} 
```

（当然，这假设单个文件的大小不会超过 700MB。如果可能，请务必从未分配列表中删除任何此类文件，否则上述将产生无限多的空目录！;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T02:14:37.097

这是一个非常幼稚且编码不佳的解决方案，但它确实有效。我的 bash-fu 不强，但 shell 脚本似乎是解决这个问题的最佳方法。

```
#!/bin/bash
dirnum=1
for i in *
    do
    if [ `du -b -s "$i" | cut -f 1` -gt 700000000 ]
        then
        echo "$i is too big for a single folder, skipping"
        continue
    fi
    if [ ! -d "CD_$dirnum" ]
        then
        echo "creating directory CD_$dirnum"
        mkdir "CD_$dirnum"
    fi
    echo "moving $i to CD_$dirnum"
    mv "$i" "CD_$dirnum"
    if [ `du -b -s "CD_$dirnum" | cut -f 1` -gt 700000000 ]
        then
        echo "CD_$dirnum is too big now"
        mv "CD_$dirnum/$i" .
        let "dirnum += 1"
        if [ ! -d "CD_$dirnum" ]
            then
            echo "creating directory CD_$dirnum"
            mkdir "CD_$dirnum"
        fi
        echo "moving $i to CD_$dirnum"
        mv "$i" "CD_$dirnum"
    fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T22:11:36.993

如果你在 UNIX (inc Mac OSX) 上，你可以编写类似的脚本

```
tar cvzf allfolders.tgz ./allfolders
split allfolders.tgz -b 700m 
```

这将创建所有文件夹的（压缩）存档，然后将其拆分为 700M 大小的块。但是，当您想要重构原始文件夹集时，您需要重新组合所有部分，然后使用 tar 再次提取。

如果您想将它们作为单独的操作系统文件夹保存在 CD 上，那是相当困难的（实际上我认为这是一种背包问题，这是 NP 难题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T22:17:19.290

有一些工具可以做到这一点 - 类似于 frankodwyer 的回答，[WinZip](http://www.winzip.com/)会占用你的 100GB，将其压缩并分成你想要的任何大小的“块” - 即 ~700MB

这是[WinZip 拆分功能的页面](http://www.winzip.com/powertips.htm#split)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-14T22:38:21.397

我参加聚会有点晚了，但这是我解决问题的方法：

```
#!/usr/bin/env bash

sourcedir="$1"
destdir_prefix="./disk_"
destdir_suffix=""
mblimit=4100
# bytelimit=$(( mblimit * 1024 * 1024 )) # MB as measured by OS (MiB)
bytelimit=$(( mblimit * 1000 * 1000 )) # MB as measured by marketeers
disk=() # empty array
dir_size=0
find "${sourcedir}" -type f |
  while read file; do

    file_size="$( stat --printf="%s" "${file}" )"
    disk_number=0
    stored=false
    while [[ "${stored}" == "false" ]]; do

      if [[ "${disk[$disk_number]}" == "" ]]; then
        disk[$disk_number]=0
      fi

      if [[ $(( disk[disk_number] + file_size )) -lt ${bytelimit} ]]; then
        dir="${destdir_prefix}${disk_number}${destdir_suffix}"
        mkdir -p "${dir}"
        filedir="$(echo ${file} | sed 's|[^/]*$||g')"
        mkdir -p "${dir}/${filedir}"
        disk[$disk_number]=$(( disk[disk_number] + file_size ))
        echo "${disk[$disk_number]} ${dir}/${file}"
        cp "${file}" "${dir}/${file}"
        stored=true
      else
        disk_number=$(( disk_number + 1 ))
      fi
    done
  done 
```

这将创建名为 disk_0、disk_1 等的文件夹。对于每个文件，它会尝试将文件放入 disk_0，如果不适合，则会尝试 disk_1 等。

# estimation - 您如何处理较小的编程可交付成果中的时间延误？

> ID：395425
> 
> 赞同：2
> 
> 时间：2008-12-27T21:25:17.583
> 
> 标签：estimation

我问的是较小的工作：我认为对于较大的工作，您需要处理各种合同问题。对于较大的工作，如果您还没有考虑到进度延误，那么您基本上已经被淹没了。

较小的可交付成果（10 小时或更少）：如果您正在做一些您以前做过的事情，很容易估计这项工作需要的时间（而且可能需要的时间更少，因为您已经学会了如何去做“最好的”）。但是对于新事物，您如何处理初始估计中可能出现的时间延误？随意加20%的时间，以防万一？给出一个范围，然后在前进时给出更高的精度？做一些 HelloWorlds 计费几个小时并尝试找出未知数？

对于这个问题，我假设您为一个灵活的客户工作，**他们需要尽可能多的信息来完成他们的工作，并且迟早需要一切。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-27T21:37:16.750

在任何新的和不同的事物开始时，任何精确到优于 +/- 50% 的估计要么被填充，要么是猜测，要么具有很好的灵活范围。

也就是说，优先级和时间表通常是灵活的，并且取决于开发团队或客户以外的许多事情。

重要的是有明显的进步，对客户*需求*的响应能力（与*请求*相反- 一个灵活的客户会看到差异），以及一种迭代方法，如果必要的话，你可以使用不到 100% 的功能提前上线（它在第 1 天不需要*全部*），前提是修复和功能发布是频繁的，并提供切实的额外好处。

让客户摆脱“完成，在日期 X 准备好”的心态，进入“足够的，一直在改进”的心态，这是关键。

否则，你必须回到久负盛名的传统……你问四位值得信赖、经验丰富、可靠的同事的估计……

...然后将它们加在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T21:42:54.477

学习需要反馈，所以我建议跟踪你自己的准确性。

保留一个日志，其中包含每个估计任务、原始估计和实际所需时间的简要描述。因此，例如，如果您发现您的估计值少了 25%，请开始进行相应的向上调整。如果您发现**没有**高估或低估的模式，请查看任务本身的特征，看看您是否始终高估或低估某些**类型的任务。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T21:50:11.233

这是一个有点开放的问题，所以答案可能也是如此。

尝试提供尽可能接近所要求的内容，尽最大努力使其运行而不会出现明显的错误（例如，崩溃）。永远不要试图猜测要求，如果没有要求，即使你知道它是必要的，也不要这样做 - 当你需要更多时间来“正确”时，这会给你带来影响 - 这不一定被问到了什么，但你的客户在你交付后真正想要什么。如果你能早点，就这样做，但不要超过 10%——否则你会被认为是无法估计的人。

# processing - 如何使用处理为窗口设置动画？

> ID：395426
> 
> 赞同：5
> 
> 时间：2008-12-27T21:25:44.557
> 
> 标签：processing

我正在使用[Processing](http://processing.org/ "加工：封面")来学习编程，并想知道是否有一种方法可以使 OS 窗口增大、缩小、使其透明或使其边缘变圆。据我所知，Processing 使用 Java 的 Frame 类而不是 JFrame 类，但我就是不知道如何做到这一点。

谢谢你的帮助。

*[作为参考， Re: Forceing a window to stay in front of all other - 回复 #3 上](http://processing.org/discourse/yabb_beta/YaBB.cgi?board=Programs;action=display;num=1228732953 "回复：强制窗口停留在所有其他窗口的前面«回复＃3")*提出了类似的问题**

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T15:52:52.420

`draw()`要调整窗口大小，只需在您的方法中使用以下命令：

```
frame.setSize(x,y); 
```

确保在`setup()`方法中将框架定义为可调整大小：

```
frame.setResizable(true); 
```

使用普通的普通处理，您无法更改其他窗口属性，因为它们是框架为您绘制的框架的一部分。我想如果您在常规 IDE（例如 eclipse）中进行一些处理，您可以以某种方式覆盖此行为并绘制您自己的窗口/框架。

# c# - 阻止第二个实例运行，除非在特定情况下

> ID：395430
> 
> 赞同：1
> 
> 时间：2008-12-27T21:28:20.653
> 
> 标签：c#, multithreading, process

好的，我有这个程序，我不希望它运行多个实例。所以我现在拥有的是它抓取所有与其名称匹配的实例，如果有多个实例，它会退出并让用户知道它已经在另一个实例中运行。

但是，有一种特殊情况，新实例想要更改另一个实例正在执行的操作，然后它将退出。我怎样才能做到这一点？

下面是一个例子：我有一个计时事件的程序。我不希望同时运行多个，因为你不能同时做两件事（对于这个应用程序）。现在假设第三方程序想要通知该线程用户现在正在处理其他事情，因此它再次启动应用程序。如果应用程序已经在运行，它将更新其操作，否则它将正常运行。

如何才能做到这一点？

这是我用来判断是否有另一个实例正在运行的：

```
 string proc = Process.GetCurrentProcess().ProcessName;

            Process[] processess = Process.GetProcessesByName(proc);
            if (processess.Length > 1) {
                MessageBox.Show("There is an instance of the Timer already running");
                return;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T22:28:51.217

使这件事复杂化的事实是，在某些情况下，如果另一个程序正在运行，您希望允许程序的第二次调用来做某事。使用命名互斥体将允许您检测程序是否已经在运行——它应该已经持有互斥体。您仍然需要一种与之通信的方法，以告诉正在运行的程序在第二个程序运行时执行某些操作。异步消息队列可能会起作用，您只需要让正在运行的程序定期检查它以查看是否有任何新消息在等待。该消息需要告诉程序如何更改。查看[System.Threading](http://msdn.microsoft.com/en-us/library/system.threading.aspx)命名空间（因为看起来您已经在使用 .Net），特别是互斥量和信号量类，以及[System.Messaging.MessageQueue](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.aspx)用于消息交换。

基本思想是：

```
 program start
  try to acquire mutex (or semaphore)
  if failed
     send message via message queue to running program
     exit
  else

  set up listener for message queue

  run rest of program 
```

侦听器可以采用计时器的形式，该计时器定期到期，到期回调检查队列中的消息并相应地更新程序操作。计时器需要自动重置，以便重新开始收听。您的程序将需要能够从被计时器中断中恢复并根据更新的配置“重新启动”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T21:44:10.073

您可以为此使用共享（命名）互斥锁。

有关 Mutex 对象，请参阅[Win32 API 文档](http://msdn.microsoft.com/en-us/library/ms684266(VS.85).aspx)（我假设 C# 对此具有语言绑定）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T22:32:09.057

您最好的选择是使用 Mutex 进行检测，然后通过 IPCChannel 使用非常简单的远程处理。

只需要 1 个 MarshalByRefObject 类并在最初启动应用程序时启动远程服务。

# fluent-nhibernate - 流畅的 nHibernate 映射

> ID：395431
> 
> 赞同：1
> 
> 时间：2008-12-27T21:28:25.863
> 
> 标签：fluent-nhibernate, mapping

我正在研究一个遗留系统并引入了流利的 nHibernate，但最后一个映射我似乎无法开始工作。

代码：

```
public class Permit
    {
    public int PermitId { get; set; }
    public char Discipline { get; set; }
    public PermitDetails PermitDetails { get; set; }
    }

public PermitDetails
    {
    public int PermitId { get; set; }
    }

public class GasPermitDetails : PermitDetails
    {
       ... permit details
    }

public class ElectricalPermitDetails : PermitDetails
    {
       ... permit details
    } 
```

架构：

```
*tblPermit*
PermitId, int
Discipline, char
.... some other columns

*tblGas*
PermitId, int
....gasDetails

*tblElectrical*
PermitId, int
....electrical details 
```

如果`tblPermit.Discipline`是`"G"`，我们需要把数据取出来`tblGas`。如果`tblPermit.Discipline`是`"E"`，我们需要把数据取出来`tblElectrical`。我一直在试图弄清楚这一点，但到目前为止还没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-28T10:13:52.073

> （如果 tblPermit.Discipline 是“G”，我们需要从 tblGas 中获取数据。如果 tblPermit.Discipline 是“E”，我们需要从 tblElectrical 中获取数据）。我一直在试图弄清楚这一点，但到目前为止还没有任何运气。

鉴别器字段无关紧要，因为子类型的 PK 字段无论如何都是其超类型表的 FK。所以这是一个每个子类型的表映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T21:54:41.347

在我看来，架构是正确的。您可能需要更具体地了解您遇到的问题，因为我认为所有 PermitDetails 子类的 PermitId 都成为相应关系表的外键。

例如。对于“气体”学科，相关许可证应具有许可证的气体信息。如果 tblGas 中的 PermitID 是 tblPermit 的 id 的外键，则它具有这种关系。像这样：

```
+---------------+         +----------------------+
|               | 1     1 |                      |
|   tblPermit   |<------->| tblGas               |
|               |         | (for gas discipline) |
|               |         |                      |
+---------------+         +----------------------+
|               |         |                      |
| {PK} PermitId |         | {FK} PermitID        | <- ForeignKey to tblPermit.PermitID
|               |         |                      |
+---------------+         +----------------------+ 
```

您不需要“纪律”列来选择正确的数据。您只需要一个查询 tblElectrical, tblGas 在许可证的标识符上。这样，您将获得许可证及其信息。

（PS。不好意思使用UML类图来可视化数据库表，但是乌鸦脚记法在ASCII中翻译得不好）

# ruby-on-rails - 脚本/生成迁移在 Rails 2.2.2 中引发有关 I18n 的错误

> ID：395432
> 
> 赞同：1
> 
> 时间：2008-12-27T21:29:45.517
> 
> 标签：ruby-on-rails

我在 environment.rb 的第 56 行有这个：

```
I18n.load_path += Dir[ File.join(RAILS_ROOT, 'lib', 'locale', '*.{rb,yml}') ] 
```

我可以很好地运行应用程序，但是当我尝试运行时：脚本/生成迁移

我收到此错误：

```
environment.rb:56: uninitialized constant I18n (NameError) 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T16:32:20.267

默认情况下，`active_support`（`I18n`模块所在的位置）不会加载到您的`environment.rb`. 将目录添加到 i18n 加载路径的正确方法是在您的`environment.rb`:

```
config.i18n.load_path << Dir[File.join(RAILS_ROOT, 'my', 'locales', '*.{rb,yml}')] 
```

我认为，作为替代方案，您可以在您的模块`require 'active_support'`引用之前添加a ，但这似乎不是一个好主意。`I18n``environment.rb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T22:06:15.927

谢谢。我使用的行是从教程中复制/粘贴错误代码。

所以通过使用

```
config.i18n.load_path 
```

代替

```
I18n.load_path 
```

我摆脱了错误。

# erlang - 如何确保 mnesia 的快速启动时间

> ID：395433
> 
> 赞同：5
> 
> 时间：2008-12-27T21:32:08.257
> 
> 标签：erlang, mnesia

带有 mnesia/dets 的 Erlang 以崩溃后的缓慢启动时间而闻名。基本上与旧文件系统上的 fsck 问题相同。

但是我在定期关机后也遇到了缓慢的启动时间：在一台强大的机器上，大约 8 分钟的 250 MB 磁盘数据。

所以除了输入“q()”之外，我还必须在关机时做一些特别的事情？有没有办法加快启动时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T22:35:20.663

到目前为止我发现的事情：

*   disk_only_tables 似乎导致比 disk_tables 更长的启动时间
*   使用新表类型调用`mnesia:create_table()`不足以更改表类型。采用`mnesia:change_table_copy_type()`
*   如果您删除项目，似乎 disk_only_tables 不会缩小并且加载速度不会更快。

我通过修复两个表上的表类型问题并将我的数据库大小缩小到 4 MB 来解决我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T21:45:47.263

在您的主管中，在所有写入 mnesia 的进程都停止后，您应该调用：

```
application:stop(mnesia) 
```

这将正确关闭该节点上的 mnesia。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-02T01:04:22.523

q() 应该向 mnesia 应用程序发送停止信号，这与 application:stop(mnesia) 命令相同。我建议尝试使用 mnesia:stop() 命令很好地降低它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-24T15:31:09.607

来自 mnesia 文档：

> `-mnesia no_table_loaders NUMBER`指定启动期间并行表加载器的数量。如果网络延迟很高或者很多表包含很少的记录，则更多的加载器可能会更好。默认值为 2。

如果您有许多表，这将允许您并行加载它们。但它不会加快单个表的开始时间。为此，最好的方法是使用小表，您可以通过将它们分段来完成。

# iphone - 从 iPhone 上的 statfs 块到 KB/MB/GB

> ID：395436
> 
> 赞同：0
> 
> 时间：2008-12-27T21:35:45.690
> 
> 标签：iphone, objective-c, cocoa-touch, unix

我正在使用 statfs() 它为非超级用户提供了可用的空闲块。

我不确定如何将其转换为 KB/MB/GB。

返回的值是：

```
fundamental file system block size: 4096
total data blocks in file system: 3805452
free blocks in fs: 63425
free blocks avail to non-superuser: 63425
total file nodes in file system: 3805450
free file nodes in fs: 63425 
```

我感兴趣的值是 63425，但我不确定这意味着 KB/MB/GB 明智。

我在 iPhone 上运行它，并且我相信一个应用程序应该可以访问 2GB，如果在设备上打开了这么多，就我而言，我会这样做。

所以我想我应该得到一个大约 2G 的值。

我针对在线块到 MB 转换器运行了 63425，但这给了我 30MB 的结果，这不应该是这种情况。

谁能帮我弄清楚如何从这些信息中获取 KB/MB/GB？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T22:27:38.833

我使用以下方法取得了成功：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

struct statfs tStats;

statfs([[paths lastObject] cString], &tStats);

unsigned long long Available = ((unsigned long long)tStats.f_bavail) * ((unsigned long long)tStats.f_bsize);

if (Available > 1024)
{
    //Kilobytes
    Available = Available / 1024;

    diskSpaceLbl.text = [[@"Available Disk Space: " stringByAppendingFormat:@"%llu", Available] stringByAppendingString:@" KB"];
}

if (Available > 1024)
{
    //Megabytes
    Available = Available / 1024;

    diskSpaceLbl.text = [[@"Available Disk Space: " stringByAppendingFormat:@"%llu", Available] stringByAppendingString:@" MB"];
}

if (Available > 1024)
{
    //Gigabytes
    Available = Available / 1024;

    diskSpaceLbl.text = [[@"Available Disk Space: " stringByAppendingFormat:@"%llu", Available] stringByAppendingString:@" GB"];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T21:53:56.623

块大小为 4096 字节，即 4KB。因此 63425 个块是 63425 * 4KB = 253,700KB，大约是 248MB。

# linux - 有哪些尖端的桌面环境？

> ID：395445
> 
> 赞同：3
> 
> 时间：2008-12-27T21:42:06.490
> 
> 标签：linux, desktop, window-managers

Gnome、KDE、Fluxbox、IceWM、XFce 等等等。这些是已经存在很长时间的桌面环境/窗口管理器。

我很想知道那里的一些“尖端”桌面环境/窗口管理器。可能以有用的方式利用 3D 的那些。或者使用其他形式的输入，例如触摸屏、多鼠标或语音。

有哪些尖端的桌面环境？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-27T22:12:32.403

目前最令人兴奋的窗口管理器之一是[Xmonad](http://xmonad.org/)，它以**易于编程**和“**疯狂的稳定性**”而著称。他们似乎在**快速找到窗口**和快速**切换窗口**方面付出了很多努力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-27T21:46:19.273

[颠簸](http://bumptop.com/)很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T21:53:31.817

尽管 KDE 本身已经存在了一段时间，但[KDE 4](http://www.kde.org/)才刚刚发布。KDE 4 有一个非常先进的界面，具有新的外观和桌面小部件。

虽然我没有尝试过，但[Enlightenment](http://www.enlightenment.org/)看起来也很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T21:04:59.683

还有[Metisse](http://insitu.lri.fr/metisse/)，它有一些有趣的，甚至可能有用的 3D-ish 功能。

我从来没有完全弄清楚[槌球](http://www.croquetconsortium.org/index.php/Main_Page)是关于什么的，但它似乎非常具有创新性。或者至少很奇怪。就像来自 90 年代虚拟世界的东西。带着一只毛骨悚然的兔子。

[Sugar](http://sugarlabs.org/go/Main_Page)，为 OLPC 创建的 UI 与其他任何东西都有很大不同。

然后是[Hildon](http://en.wikipedia.org/wiki/Hildon)，诺基亚创建的基于移动 GNOME 的桌面环境。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-27T21:55:10.677

我在研究这个问题时发现了一些： [Looking Glass](http://www.sun.com/software/looking_glass/)、[Compiz](http://en.wikipedia.org/wiki/Compiz)和[Compiz Fusion](http://en.wikipedia.org/wiki/Compiz_Fusion)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-27T22:09:22.240

带有 Compiz 的 Gnome。Linux 最不需要的就是另一个尖端桌面。**认真**的。

## 更新/撤回：

好的，我收回它。我刚刚观看了演示视频，世界需要 BumpTop 尽快。

# python - 如何在 python 3.0 中通过 http 授权下载文件，解决错误？

> ID：395451
> 
> 赞同：9
> 
> 时间：2008-12-27T21:45:47.997
> 
> 标签：python, python-3.x, urllib

我有一个我想继续使用的脚本，但看起来我要么必须为 Python 3 中的错误找到一些解决方法，要么降级回 2.6，因此也不得不降级其他脚本......

希望这里有人已经设法找到解决方法。

问题在于，由于 Python 3.0 中有关字节和字符串的新变化，显然并非所有库代码都经过了测试。

我有一个从 Web 服务器下载页面的脚本。该脚本在 python 2.6 中将用户名和密码作为 url 的一部分传递，但在 Python 3.0 中，这不再起作用。

例如，这个：

```
import urllib.request;
url = "http://username:password@server/file";
urllib.request.urlretrieve(url, "temp.dat"); 
```

失败并出现此异常：

```
Traceback (most recent call last):
  File "C:\Temp\test.py", line 5, in <module>
    urllib.request.urlretrieve(url, "test.html");
  File "C:\Python30\lib\urllib\request.py", line 134, in urlretrieve
    return _urlopener.retrieve(url, filename, reporthook, data)
  File "C:\Python30\lib\urllib\request.py", line 1476, in retrieve
    fp = self.open(url, data)
  File "C:\Python30\lib\urllib\request.py", line 1444, in open
    return getattr(self, name)(url)
  File "C:\Python30\lib\urllib\request.py", line 1618, in open_http
    return self._open_generic_http(http.client.HTTPConnection, url, data)
  File "C:\Python30\lib\urllib\request.py", line 1576, in _open_generic_http
    auth = base64.b64encode(user_passwd).strip()
  File "C:\Python30\lib\base64.py", line 56, in b64encode
    raise TypeError("expected bytes, not %s" % s.__class__.__name__)
TypeError: expected bytes, not str 
```

显然，base64 编码现在需要输入字节并输出一个字符串，因此 urlretrieve（或其中的一些代码）构建一个用户名：密码字符串，并尝试对其进行 base64 编码以进行简单授权，但失败了。

如果我改为尝试使用 urlopen，如下所示：

```
import urllib.request;
url = "http://username:password@server/file";
f = urllib.request.urlopen(url);
contents = f.read(); 
```

然后它失败并出现以下异常：

```
Traceback (most recent call last):
  File "C:\Temp\test.py", line 5, in <module>
    f = urllib.request.urlopen(url);
  File "C:\Python30\lib\urllib\request.py", line 122, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python30\lib\urllib\request.py", line 359, in open
    response = self._open(req, data)
  File "C:\Python30\lib\urllib\request.py", line 377, in _open
    '_open', req)
  File "C:\Python30\lib\urllib\request.py", line 337, in _call_chain
    result = func(*args)
  File "C:\Python30\lib\urllib\request.py", line 1082, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python30\lib\urllib\request.py", line 1051, in do_open
    h = http_class(host, timeout=req.timeout) # will parse host:port
  File "C:\Python30\lib\http\client.py", line 620, in __init__
    self._set_hostport(host, port)
  File "C:\Python30\lib\http\client.py", line 632, in _set_hostport
    raise InvalidURL("nonnumeric port: '%s'" % host[i+1:])
http.client.InvalidURL: nonnumeric port: 'password@server' 
```

显然，这个“下一代 url 检索库”中的 url 解析不知道如何处理 url 中的用户名和密码。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-12-27T22:04:53.013

直接来自 Py3k 文档：[http ://docs.python.org/dev/py3k/library/urllib.request.html#examples](http://docs.python.org/dev/py3k/library/urllib.request.html#examples)

```
import urllib.request
# Create an OpenerDirector with support for Basic HTTP Authentication...
auth_handler = urllib.request.HTTPBasicAuthHandler()
auth_handler.add_password(realm='PDQ Application',
                          uri='https://mahler:8092/site-updates.py',
                          user='klem',
                          passwd='kadidd!ehopper')
opener = urllib.request.build_opener(auth_handler)
# ...and install it globally so it can be used with urlopen.
urllib.request.install_opener(opener)
urllib.request.urlopen('http://www.example.com/login.html') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T01:21:20.337

我的建议是将您的 2.* 分支保持为您的生产分支，直到您可以对 3.0 内容进行排序。

在转到 Python 3.0 之前，我将等待一段时间。似乎有很多人很着急，但我只想把一切都整理好，并选择一些不错的第三方库。这可能需要一年，可能需要18个月，但“升级”的压力对我来说真的很低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-25T09:51:46.573

您可以使用 requests.get 下载文件。试试示例代码：

```
import requests
from requests.auth import HTTPBasicAuth

def download_file(user_name, user_pwd, url, file_path):
    file_name = url.rsplit('/', 1)[-1]
    with requests.get(url, stream = True, auth = HTTPBasicAuth(user_name, user_pwd)) as response:
        with open(file_path + "/" + file_name, 'wb') as f:
            for chunk in response.iter_content(chunk_size = 8192):
                f.write(chunk)

# You will download the login.html file to /home/dan/
download_file("dan", "password", "http://www.example.com/login.html", "/home/dan/") 
```

好好享受！！

同：[https ://stackoverflow.com/a/66796358/9265663](https://stackoverflow.com/a/66796358/9265663)

# c# - 如何遍历复选框列表并找到已选中和未选中的内容？

> ID：395454
> 
> 赞同：21
> 
> 时间：2008-12-27T21:46:54.327
> 
> 标签：c#, .net, checkboxlist

我正在尝试遍历复选框列表的项目。如果选中，我想设置一个值。如果没有，我想设置另一个值。我正在使用以下内容，但它只给了我检查的项目：

```
foreach (DataRowView myRow in clbIncludes.CheckedItems)
{
    MarkVehicle(myRow);
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2010-09-27T12:53:08.440

这将给出一个选定的列表

```
List<ListItem> items =  checkboxlist.Items.Cast<ListItem>().Where(n => n.Selected).ToList(); 
```

这将给出所选框的值列表（如果需要，更改文本的值）：

```
var values =  checkboxlist.Items.Cast<ListItem>().Where(n => n.Selected).Select(n => n.Value ).ToList() 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-12-28T00:13:58.057

```
for (int i = 0; i < clbIncludes.Items.Count; i++)
  if (clbIncludes.GetItemChecked(i))
    // Do selected stuff
  else
    // Do unselected stuff 
```

如果检查处于不确定状态，这仍将返回 true。您可能想要更换

```
if (clbIncludes.GetItemChecked(i)) 
```

和

```
if (clbIncludes.GetItemCheckState(i) == CheckState.Checked) 
```

如果您只想包括实际检查的项目。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-12-27T21:58:49.763

尝试这样的事情：

```
foreach (ListItem listItem in clbIncludes.Items)
{
    if (listItem.Selected) { 
        //do some work 
    }
    else { 
        //do something else 
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-09T13:27:46.373

我认为最好的方法是使用`CheckedItems`：

```
 foreach (DataRowView objDataRowView in CheckBoxList.CheckedItems)
 {
     // use objDataRowView as you wish                
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T07:10:12.833

对中的每个索引使用循环检查它`comboxlist.Items[i]`

```
bool CheckedOrUnchecked= comboxlist.CheckedItems.Contains(comboxlist.Items[0]); 
```

我认为它解决了你的目的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-27T21:57:47.707

使用 CheckBoxList 的 GetItemChecked 或 GetItemCheckState 方法可通过其索引找出是否已检查项目。

# ruby-on-rails - 如何破解 boot.rb 以停止烦人的警告？不推荐使用 Gem::SourceIndex#search 对字符串模式的支持

> ID：395472
> 
> 赞同：2
> 
> 时间：2008-12-27T21:58:42.463
> 
> 标签：ruby-on-rails, rubygems, rake, warnings, deprecated

每次我运行 rake 或大多数 rails 命令时，都会收到一个烦人的警告。我仍然是 Ruby/Rails 的初学者，我想了解如何破解 boot.rb 以停止烦人的警告。我正在使用 Rails 1.2.6 和 RubyGems 1.3.1。（我还没有将 Rails 升级到 2.x，因为我仍在从一本使用 1.2.x 的书中学习 Rails。）我很感激任何建议。我一直无法通过谷歌搜索找到解决方案。谢谢！

boot.rb 第 20 行：

```
rails_gem = Gem.cache.search('rails', "=#{rails_gem_version}.0").sort_by { |g| g.version.version }.last 
```

烦人的消息：

```
boot.rb:20:Warning: Gem::SourceIndex#search support for String patterns is deprecated 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-30T21:29:08.450

在 boot.rb 中有一个对 Gem Source Index 的调用：“Gem.cache.search”，只需将“search”替换为“find_name”即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T03:21:23.450

首先，您应该研究一种可以消除警告的方法（例如升级 rails 或 ruby​​-gems），而不是*尽可能*抑制. 其次，根据警告方法的文档（[http://www.ruby-doc.org/core/classes/Kernel.html#M006017](http://www.ruby-doc.org/core/classes/Kernel.html#M006017)），您可以通过使用 -W0 标志调用 /usr/bin/ruby 来抑制它. 另请注意，此消息是在 STDERR 上输出的，因此您也可以使用普通的 unix 重定向技术（例如将其重定向到 /dev/null 甚至更好的 warnings.log 文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-08T00:28:08.587

答案不断给出。谢谢。这让我发疯了。

关于更新版本的更新，这本书（敏捷开发）因更新版本而失败。

另外，我经常做 rake db:migrate。在这种情况下，我不知道如何通过调用 ruby​​ -W0 来扼杀消息。

# html - 将 html 元素置于其包含元素中的最佳方法是什么？

> ID：395484
> 
> 赞同：5
> 
> 时间：2008-12-27T22:08:06.033
> 
> 标签：html, css, center

假设您有以下代码块：

```
<div id="container">
  <someelement>This is any element.</someelement>
</div> 
```

我可以用来在其包含的 div 中水平居中“someelement”的最佳 CSS 是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-27T22:18:01.410

JaredPar 有正确的想法，但这里有一种更清洁的方法来做你正在寻找的东西；）

```
#container {
    text-align: center;
}

#container someelement {
    margin: 0 auto;
    text-align: left;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-27T23:20:09.617

如果您`<someelement>`是内联元素（即默认显示：内联），则将 text-align: center 应用于其容器。如果`<someelement>`是块元素，则将左右边距设置为自动并记住设置宽度（块元素默认占用所有可用的水平空间，除非明确说明宽度）。如果您希望它也可以在 IE 5.5 及更低版本中工作，您可能必须同时使用这两种方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-27T22:12:46.257

尝试

```
<someelement style="margin-left:auto;margin-right:auto">This is any element</someelement> 
```

# php - 是否有任何用于快速拖放 php 开发的 IDE？

> ID：395485
> 
> 赞同：2
> 
> 时间：2008-12-27T22:08:07.793
> 
> 标签：php, ide

我正在使用带有少量 PHP 开发插件的 Eclipse IDE。我正在使用 PHPEclipse 插件，我知道还有很多其他插件，比如 EasyEclipse。但是有没有像 Visual Studio 这样的 IDE，可以为 PHP 提供很酷的拖放功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-27T23:53:56.067

我使用 APTANA。

你可以在这里得到它[http://www.aptana.com/](http://www.aptana.com/)

这是我选择的 Web IDE。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-27T22:52:02.263

如果你在 Windows 上，你可能想看看 CodeGear / Emabarcadero 的（有点不幸的名字）“ [Delphi for PHP](http://www.codegear.com/products/delphi/php) ”，我听到的大多是好东西——至少对于新开发来说，因为它与一个特定的框架（[用于 PHP 的 VCL](http://sourceforge.net/projects/vcl4php/)，它是开源的），这使得它在维护现有项目方面变得不那么有趣了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T05:14:46.690

我一直更喜欢开源，因为它让我们可以自由地更改代码。所以我强烈推荐有人希望使用拖放IDE [VisualJS](http://www.linb.net/VisualJS/)我认为这是最好的，具有非常快速的开发并且可以自由使用任何服务器端语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T12:11:56.623

你想拖放什么？如果我没记错的话，Visual Studio 中的大多数拖放操作都与 GUI 有关，这与 PHP 的工作方式（渲染网页）完全不同。您可以尝试使用 Dreamweaver（商业）或 Nvu（免费、开源）之类的所见即所得网页设计工具。但这不会帮助您在页面“后面”开发实际的 php。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-20T12:07:43.267

您是否考虑过使用**GUI 拖放式 Web 小部件框架**- TIBCO GI、Rialto 等。
它们本身不是 PHP，但[这个 wikipedia 小部件工具包列表](http://en.wikipedia.org/wiki/List_of_widget_toolkits#Cross-platform)将有很大帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-30T05:36:11.607

根据我的经验，RapidPHP 是伟大的 PHP IDE 之一。它是如此简单而强大。

# file - 您如何管理和组织您的文件？（脚本、repos、下载、pdf 等）

> ID：395486
> 
> 赞同：8
> 
> 时间：2008-12-27T22:08:38.997
> 
> 标签：file, directory, organization

像你们中的许多人一样，我必须处理大量文件：源代码、二进制下载、电子表格、pdf、word 文档、图像、注释文件、快速脚本等等。

这些文件可以分为许多类别：

*   最终应该删除的临时文件
*   应该归档的重要或有用的参考文件
*   与特定雇主的特定项目相关的文件
*   一般雇主文件，例如假期时间表、医疗保健计划、旅行申请表等
*   与任何特定雇主无关的专业文件
*   副项目
*   个人文件（税金、重要收据、票据等）

我想避免巨大的文件夹层次结构，特别是对于我经常通过命令行访问的文件

对于存档文件，索引的、基于标签的分类系统似乎比文件夹方法更适合。

是否有任何推荐的工具或系统来有效地管理文件？我正在考虑将我的下载文件夹变成一种“收件箱”并采用 GTD 方法。此外，像 Hazel 这样的程序可能会有所帮助。

我的重点是 Mac 软件，但我有兴趣了解所有方法。

您使用哪些文件夹结构、系统和工具来管理文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T22:19:17.867

我强烈推荐 PersonalBrain（参见 thebrain.com）来获取那些不容易适应严格层次结构的参考资料、URL、注释等（在我的情况下是大多数事情 - 我讨厌深层次结构）。它可以在 MacOS、Windows 和 Linux 上运行，而且免费版本的功能非常强大（尽管我确实为“核心”版本咳嗽，因为它具有我喜欢的附加功能）。

它还可以链接到操作系统文件夹和操作系统管理的文件，因此您可以将旧式文件夹与您在 PersonalBrain 本身中归档的内容混合和匹配。但是，它对命令行的事情并没有真正的帮助。

我还不知道该怎么处理的东西，我根据一个叫做“未归档”的想法归档，然后不时地对在那里找到的东西进行分类。

我还在 Mac OS X（一种桌面 wiki）上使用 voodopad，但任何桌面 wiki 都可以代替（tomboy、tiddlywiki 等）...... PersonalBrain 也可以被视为一种 wiki。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T23:09:41.260

我选择深层层次结构的方法。最大的问题是我的电子邮件存档，其中许多邮件需要不止一种分类，但只能存储在一个地方。我们迁移到了 Notes，这意味着长期记忆丢失了——我讨厌这样。

我试图按照项目来组织东西——从最宽松的意义上说。我有顶级目录，例如：

*   bin - 可执行命令
*   inc - 头文件（我经常用 C 编程）
*   lib - 库（带有不同库源的子目录）
*   src - 主要源档案（无数的子目录，大约两到三层深，忽略像 RCS 子目录这样的人工制品）
*   etc - 主要是配置文件和相关脚本
*   tmp - 名义上的临时文件（最古老的居民已经过了十年大关，但这是从其他地方导入的；我创建或下载的最古老的居民日期是 2000 年底）

然后我有一些半目的子目录，例如：

*   工作 - 载有与工作相关的子目录
*   pdf - 子目录中的完整 PDF 文件
*   论文 - 充满非 PDF 文件
*   doc - 更多文档（需要处理这一点）

由于这台机器距离我 1500 英里，并且运行的是 Solaris 10，所以我不确定如何使用 Google 桌面之类的工具来管理它。

在我使用的 Windows 笔记本电脑上，我有一个`C:\Filing Cabinet\`目录，该目录下有一个子目录层次结构。我不喜欢 Windows 分散我的文件的方式。我更喜欢按照我想要的方式来负责分散我自己的文件。

我在家里的 Mac 与我的主要工作机器相似——减去特定于工作的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-27T23:34:34.343

一种可能的方法是组织您的文件：

*   按**项目**（如乔纳森的建议：用于共同目的的“连贯文件组”的宽松术语）
*   按**包装**类型，含义：
    *   简单的文件集合（松散和自定义组织），或
    *   预定义的目录结构（每个项目的结构始终相同，适用于开发项目），或
    *   zip 文件（便于同步/备份）

我有一个区域，我将所有重要文件/项目放在压缩文件中，以便在我的不同计算机之间同步该目录及其镜像（压缩文件意味着要同步的文件*更少*，意味着更快的同步过程。也适用于备份）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T22:33:06.747

我发现计算机和硬盘驱动器的速度如此之快，以至于我只需将所有内容都放在 c:\ 或 ~/ 中，而且我不必走很远就能找到任何东西。但这就是我。大多数人可能会不同意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-27T22:36:29.390

我没有使用大量的文件夹层次结构，而是对文件进行分类并将它们组织在以下任一文件夹中：

工作、个人、存档、杂项

然后使用[Google 桌面](http://en.wikipedia.org/wiki/Google_Desktop)管理我的文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-07T11:42:32.867

我不确定这是否会完全解决您的问题，但我希望它可以在很大程度上为您节省一些时间。

我创建了一个以类似方式工作的应用程序。应用程序[排序](https://github.com/giantas/sorter "分拣机")器通过按扩展名（即 pdf 一起但与 docx 分开）对文件进行分组来发挥作用。还有一个添加选项，可以将文档组合在一起，但与视频和音频分开。对您而言，好处是您可以确定文件的目的地；此外，它还有一个递归函数，可以检查子文件夹及其子文件夹，并相对于文件的初始位置对文件进行排序/分组。尝试一下，看看它是否有帮助。

# php - 是否可以减少 MySQL 中的变量？

> ID：395504
> 
> 赞同：5
> 
> 时间：2008-12-27T22:20:24.587
> 
> 标签：php, mysql

我想在每次运行 UPDATE 查询时将 MySQL 表中的变量减一。

我所拥有的是这个，它不起作用：

`UPDATE forum SET replys = reply-- WHERE fid = '$id'`

这是否有可能，或者我将不得不运行 SELECT 并首先获取值，递减它，然后将新值插入到 UPDATE 查询中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-27T22:31:06.063

```
UPDATE forum SET replys = reply - 1 WHERE fid = '$id' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-27T22:33:52.843

当然：

```
UPDATE forum SET replies=replies-1 WHERE fid = ? 
```

# json - JSON编码数据包的压缩算法？

> ID：395505
> 
> 赞同：16
> 
> 时间：2008-12-27T22:21:53.883
> 
> 标签：json, compression, packet

在通过网络发送数据包之前，用于压缩数据包的最佳压缩算法是什么？数据包使用 JSON 编码。LZW 会是一个很好的选择还是有更好的选择？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-28T01:29:45.813

我认为有两个问题会影响你的回答：

1）在不知道程序的任何特定运行会发生什么的情况下，您能在多大程度上预测数据的组成？例如，如果您的数据包如下所示：

```
{
    "vector": {
        "latitude": 16,
        "longitude": 18,
        "altitude": 20
    },
    "vector": {
        "latitude": -8,
        "longitude": 13,
        "altitude": -5
    },
    [... et cetera ...]
} 
```

-- 那么你可能会通过创建一个硬编码的文本字符串字典来获得最好的压缩，这些字典会一直显示在你的数据中，并用适当的字典索引替换每个文本字符串的出现。（实际上，如果您的数据是**这样**常规的，您可能只想通过线路发送**值**，然后只需将一个函数写入客户端，以便在需要 JSON 对象时从这些值构造一个 JSON 对象。）

如果您无法预测将使用**哪些**标头，则可能需要使用 LZW 或 LZ77 或另一种查看已经经过的数据的方法，以找到它可以以特别紧凑的形式表达的数据。然而...

2）数据包是否需要彼此分开压缩？如果是这样，那么 LZW 绝对**不是**您想要的方法；它将没有时间将其字典构建到在单个数据包结束时会产生大量压缩结果的大小。恕我直言，在这种情况下获得真正实质性压缩的唯一机会是使用硬编码字典。

（以上所有内容的附录：正如 Michael Kohne 指出的那样，发送 JSON 意味着您可能正在发送所有文本，这意味着您未充分利用能够发送比您正在使用的字符范围更广的带宽的带宽. 但是，如何将 0-127 范围内的字符打包到包含 0-255 值的容器中的问题相当简单，我认为可以留作“读者练习”，正如他们所说。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-08-30T08:54:12.433

还有另外两种 JSON 压缩算法：[CJson 和 HPack](http://web-resource-optimization.blogspot.com/2011/06/json-compression-algorithms.html) HPack 做得非常好，堪比 gzip 压缩。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-27T22:26:59.927

嗯...如果我错了，请纠正我，但是如果您正在实施在线压缩，那么您可以控制连接的两端，对吗？在那种情况下，如果 JSON 是一个太胖的协议，为什么不选择一个不那么胖的不同有线协议呢？我的意思是，我理解使用像 JSON 这样的标准的吸引力，但是如果您担心带宽，那么您可能应该选择一个不全是文本的有线协议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-27T22:30:50.277

让webserver压缩，浏览器原生解压；gzip 或放气。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-09-24T20:26:35.857

以下是对 JSON 数据原始压缩性的简短测试：crime-data_geojson.json 72844By（您可以在此处获取文件：[https](https://github.com/lsauer/Data-Hub) ://github.com/lsauer/Data-Hub 。该文件是随机挑选的，但不能代表平均 JSON 数据）

除了 zip，所有归档器参数都设置为 ultra

```
* cm/ nanozip: 
  > 4076/72844
  [1] 0.05595519
* gzip:
  > 6611/72844
  [1] 0.09075559
* LZMA / 7zip
  > 5864/72844
  [1] 0.0805008
* Huffman / zip:
  > 7382/72844
  [1] 0.1013398
* ?/Arc:
  > 4739/72844
  [1] 0.06505683 
```

这意味着压缩非常高且有益。JSON 数据通常具有高熵。根据维基百科

> 根据香农基于人体实验的估计，英文文本的熵率在每个字母 1.0 到 1.5 位之间，[1] 或低至每个字母 0.6 到 1.3 位

JSON 数据的熵通常远高于此值。（在使用 10 个大小大致相等的任意 JSON 文件的实验中，我计算出 2.36）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T06:21:19.130

Gzip（deflate 算法）非常擅长压缩，尽管与所有优秀的压缩算法一样，它使用大量 cpu（在我的测试中是 json 读取/写入开销的 3-5 倍）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-09T20:03:33.880

我发现压缩算法往往比选择替代格式更有效。如果这是“实时”压缩，我建议研究较低级别的 Brotli 或 Zstandard 压缩器（高级压缩器占用大量 CPU - 但确实提供了非常好的压缩）。

如果您想了解所有替代方案以及我是如何得出这个结论的，可以[在 Lucidchart 技术博客上](https://www.lucidchart.com/techblog/2019/12/06/json-compression-alternative-binary-formats-and-compression-methods/)找到完整的详细信息。

# javascript - 实现自重置 XMLHttpRequest 对象

> ID：395506
> 
> 赞同：2
> 
> 时间：2008-12-27T22:22:26.033
> 
> 标签：javascript, ajax, xmlhttprequest

我正在尝试使用 XMLHttpResponse 对象实现彗星风格的长轮询连接。这个想法是保持与服务器的开放连接，该服务器在可用时发送数据（假推送）。XHR 对象完成后，我需要生成一个新对象以等待任何新数据。

下面是一段代码，它概述了一个可行的解决方案，但正如评论所说，只是因为我需要摆脱的超时。

```
window.onload = function(){
    XHR.init();
}

XHR = {
    init: function() {
        this.xhr = new XMLHttpRequest();
        this.xhr.open( "GET", "proxy.php?salt="+Math.round( Math.random()*10000 ), true );
        this.xhr.onreadystatechange = this.process.bind( this );
        this.xhr.send( null );
    },
    process: function() {
        if( this.xhr.readyState == 4 ) {

            // firebug console
            console.log( this.xhr.responseText );

            // ** Attempting to create new XMLHttpRequest object to
            // replace the one that's just completed
            // doesn't work without the timeout
            setTimeout( function() { this.init() }.bind( this ), 1000 );
        }
    }
}

Function.prototype.bind = function( obj ) {
    var method = this;
    return function() {
        return method.apply( obj, arguments );
    }
}

// proxy.php - a dummy that keeps the XHR object waiting for a response
<?php
$rand = mt_rand( 1, 10 );
sleep( $rand );
echo date( 'H:i:s' ).' - '.$rand; 
```

我认为问题可能是您不能像这里那样从它自己的事件处理程序（进程）中删除一个对象（xhr）。特别是因为处理程序中的“this”绑定到包含我要删除的对象（xhr）的对象（XHR）。有点圆！

任何人都可以帮忙吗？上面的例子是我能得到的最接近的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T03:19:01.490

只需使用 jquery 并执行以下操作：

```
 function getData() {
    $.getJSON(someUrl, gotData);
  }

  // Whenever a query stops, start a new one.
  $(document).ajaxStop(getData, 0);
  // Start the first query.
  getData(); 
```

我的[晃动](http://github.com/dustin/slosh)示例就是这样做的（因为它几乎是一个彗星服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T22:26:46.383

你正在做的是有效的轮询，为什么让它比它需要的更复杂，并且每隔几秒钟就轮询一次？或者每一秒，你真正节省了多少时间，它真的那么重要吗，如果你有很多用户，你将在服务器端占用大量的套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T22:27:58.270

但是要实际尝试回答您的问题，删除不是这个的东西的方法是设置一个计时器来调用一个执行删除的函数，这样，它本身就不会被删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T22:47:24.503

@stu

在这个应用程序中，响应时间是关键 - 实际上重要的是所有客户端都同时更新（或尽可能接近）

关闭连接的数量将相当有限~50max，更改之间的间隔可能是几分钟。

如果使用轮询，它需要非常短~100ms，这将导致大量不必要的请求（这对于我拼凑在一起的小型 php 套接字服务器来说会很昂贵 - 我知道，我知道 python 会更好服务器，但我不太了解）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T00:02:49.840

您可能根本不应该为此使用 XMLHTTPRequest。

几年前，早在 XMLHTTPRequest 出现之前，我就创建了一个用于普通浏览器的聊天程序。聊天窗口位于数据来自永不结束的 cgi 脚本的框架中。每当有新数据时，我就发送它，它立即显示在客户端。

我想你今天可以使用类似的东西：

*   在您的页面中创建一个将执行更新的函数。
*   创建一个 IFRAME，您可以根据需要使其不可见
*   将 IFRAME 的源设置为生成数据的脚本
*   数据可以封装在 SCRIPT 标记中。如果我没记错的话，浏览器在尝试评估它之前需要拥有脚本标签的全部内容。调用你的更新函数：

    ```
    <script type="text/javascript">myupdate("mydata");</script> 
    ```

*   即使您没有要发送的内容，也请每隔 5 秒左右发送一个空格以重置浏览器的超时时间。
*   如果我没记错的话，你必须在事务开始时发送大约 1K 数据来填充浏览器的预取缓冲区（也许今天的浏览器必须增加这个）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T01:31:57.633

您可能更容易实现重用，添加`abort()`方法：

```
XHR = {
    init: function() {
        if (!this.xhr) { // setup only once
            this.xhr = new XMLHttpRequest();
            this.xhr.onreadystatechange = this.process.bind( this );
        }
        this.xhr.abort(); // reset xhr
        this.xhr.open(/*...*/);
        this.xhr.send(null);
    },
    process: function() {
        if( this.xhr.readyState == 4 ) {

            // firebug console
            console.log( this.xhr.responseText );

            // start next round
            this.init();
        }
    }
}; 
```

* * *

@meouw [评论]

如果您得到相同的结果，那么我猜您遇到了缓存问题（`Math.random()`没有解决），或者您没有标记先前请求发送的内容（每次重新发送相同的数据）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-07T13:07:45.207

只需在函数`xhr = null`内部添加即可。`init`将`xhr`被分配一个新的连接，因此不会采用以前的`HTTPRequest`值。

```
init: function() {
        xhr = null;
        this.xhr = new XMLHttpRequest();
        this.xhr.open( "GET", "proxy.php?salt="+Math.round( Math.random()*10000 ), true );
        this.xhr.onreadystatechange = this.process.bind( this );
        this.xhr.send( null );
    }, 
```

# python - 如何在 OS X Leopard 上安装 MySQL 和 Python MySQL 包？或者我如何了解如何成为一名使用 OS X 的 Web 开发人员？

> ID：395509
> 
> 赞同：6
> 
> 时间：2008-12-27T22:23:48.573
> 
> 标签：python, mysql, django, macos, sysadmin

我是 Mac OS X 的新手，我正准备把我全新的[MacBook Pro](http://en.wikipedia.org/wiki/MacBook_Pro)扔出窗外。[每个关于在Mac OS X Leopard](http://en.wikipedia.org/wiki/Mac_OS_X_Leopard)上设置 Django 开发环境的教程都是非常错误的。他们都跳过了一步，或者假设您已经以一种方式设置了某些东西，或者只是假设我知道一件事我一定不知道。

我非常熟悉如何在 Ubuntu/Linux 上设置环境，而我在[OS X](https://en.wikipedia.org/wiki/OS_X)上遇到的唯一问题是如何安装 MySQL、自动启动和安装 Python MySQL 绑定。我认为我的错误是使用了我不完全理解的大杂烩。我使用 fink 安装 MySQL 及其开发库，然后尝试从源代码构建 Python-MySQL 绑定（但它们不会构建。）

[更新：我从http://dev.mysql.com/downloads/mysql/5.1.html#macosx-dmg](http://dev.mysql.com/downloads/mysql/5.1.html#macosx-dmg)安装了二进制 MySQL 包，并且我运行了 MySQL 服务器（可以使用管理员访问。）我从中获得的 MySQL 版本端口很垃圾，我根本无法让它运行。

我根据我选择的答案修改了 Python-MySQL 包的源代码，但我仍然遇到了我在评论中列出的编译错误。我可以通过将 /usr/local/mysql/bin/ 添加到我的“~/.profile”文件中的路径来解决这些问题。“ PATH=/usr/local/mysql/bin:$PATH”

感谢您的帮助，我对编辑源代码非常谨慎，因为这个操作在 Ubuntu 上非常简单，但我将来会更愿意尝试。我真的很想念 Ubuntu 的“apt-get”命令；有时它使生活变得非常轻松和简单。我已经在我的 Mac 上运行了一个 Ubuntu [VMware](http://en.wikipedia.org/wiki/VMware)映像，所以我总是可以将其用作后备（加上它更接近我的生产机器，因此应该是调试生产问题的良好测试环境。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-27T23:09:42.117

MySQL 和 MySQL-dev 安装是否顺利？你能运行 MySQL，连接它等等吗？是否`/usr/local/mysql/include`包含大量头文件？（我那里有 46 个头文件，供参考）。

如果是这样，MySQL 应该是不错的选择。然而，编译 MySQL-python 仍然需要一些手动步骤。

[这](http://www.keningle.com/?p=11)是一个不错的指南：我已经包含了以下重要步骤。

* * *

1.  下载[MySQL-python 源代码](https://sourceforge.net/projects/mysql-python)（撰写本文时为 v1.2.2：所有后续说明均针对此版本）

    ```
    $ tar xzf MySQL-python-1.2.2.tar.gz && cd MySQL-python-1.2.2 
    ```

2.  编辑`_mysql.c`：删除第 37-39 行并更改第 481-482 行。这是差异：

    ```
    37,39d36
    < #ifndef uint
    < #define uint unsigned int
    < #endif
    484,485c481,482
    <         uint port = MYSQL_PORT;
    <         uint client_flag = 0;
    ---
    >         unsigned int port = MYSQL_PORT;
    >         unsigned int client_flag = 0; 
    ```

3.  将库符号链接到 MySQL-python 期望它们的位置：

    ```
    $ sudo ln -s /usr/local/mysql/lib /usr/local/mysql/lib/mysql 
    ```

4.  在你的 MySQL-python-1.2.2 目录中，重建你的包：

    ```
    $ sudo python setup.py build 
    ```

    **注意：**您将收到警告，请忽略它。

5.  安装包：

    ```
    $ sudo python setup.py install 
    ```

* * *

至于启动 MySQL，这里有[关于](http://dev.mysql.com/doc/refman/5.0/en/mac-os-x-installation.html)将其作为服务启动的说明。就个人而言，我只是跑

```
sudo mysqld_safe 
```

手动，`^Z`在`bg`我输入密码后将其作为后台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T22:53:35.333

您可以使用 BSD-alike(?) [http://macports.org](http://macports.org)，它提供了您希望在 Linux 发行版中找到的大量软件的类似 gentoo 的 build-it-yourself 安装。

或者，您可以在虚拟机中运行 Ubuntu 作为测试阶段。

老实说，这很简单

`# port install <pkgname>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-27T23:15:34.727

假设这只是一个开发环境，您可以尝试使用[SQLite](http://en.wikipedia.org/wiki/SQLite) 3 作为您的数据库。里程可能会有所不同，具体取决于您需要为特定应用程序使用数据库的低级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T22:54:23.490

[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29) mysqldb包[在 fink 中](http://pdb.finkproject.org/pdb/package.php/mysql-python-py25)，但它在不稳定的树中。只需[启用不稳定的树](http://www.finkproject.org/faq/usage-fink.php#unstable)，您就可以安装它。

或者，如果您希望拥有两个备用包管理器，它也在[MacPorts](http://en.wikipedia.org/wiki/MacPorts)中。

上次我不得不这样做时也遇到了问题，最终选择了 fink 版本并省去了很多麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T01:30:00.243

我在一篇可能有帮助的博文中放了一个分步指南：*[Installing Django with MySQL on Mac OS](http://www.djangrrl.com/view/installing-django-with-mysql-on-mac-os-x/)* X。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T01:48:04.293

如果您是 Mac 用户，请安装[MacPorts](http://www.macports.org/)。几乎所有 Linux/Unix 应用程序都可以通过“端口”获得。它简单且易于管理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T21:54:09.990

安装[MacPorts](http://en.wikipedia.org/wiki/MacPorts)。运行`port install mysql`。它对我有用！

# mysql - MySql 查询浏览器的替代品？

> ID：395512
> 
> 赞同：13
> 
> 时间：2008-12-27T22:26:57.600
> 
> 标签：mysql

我一直在使用*MySql 查询浏览器*，[意见]它必须是我见过的最糟糕的 UI。曾经。[/意见] 但它是免费的，所以它**很棒，我喜欢它。**

任何人都可以为 MySql DB 管理员推荐任何更好的免费工具吗？如果可能的话，我希望它在我的本地机器上而不是在浏览器中运行......

**编辑：**我在 Windows 上，但如果在 OSX、Windows 和 Linux 上工作，那就太好了......

**编辑：**我在测试后根据自己的喜好选择了一个最佳答案。Navicat（PC、Mac、Linux）是最好的，HeidiSQL 也很棒（可能更完整，但 UI 有点笨拙），其余的都比较烦人（再次，对于我在 UI 中需要的东西）......这个是相当主观的，但我认为如果你像我一样尝试**所有**这些，你会同意我的前两个选择。

**编辑：**在实际试用它们之后，HeidiSQL 是最好的。再说一次，这是我的看法...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-27T23:11:19.540

去[HeidiSQL](http://www.heidisql.com/)。它是免费的、易于使用的，并且几乎可以完成您可能想到的所有事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-27T22:40:07.230

你打算这个平台是什么？

有一条规则是 MySQL GUI 客户端必须都是错误的，但根据我的经验， **[navicat](http://www.navicat.com/)**仍然比 MySQL Query Browser 可靠得多。（只需获得免费版。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-27T23:44:00.800

我从 www.webyog.com 获得了社区版的 sqlyog。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-27T23:35:16.980

我使用[Toad for MySQL](http://www.toadsoft.com/toadmysql/Overview.htm)，我认为它非常好（虽然只有 Windows）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-13T04:13:56.613

两个非常有价值的竞争者：

[Oracle SQLDeveloper](http://www.oracle.com/technology/products/database/sql_developer/index.html)（是的，由 Oracle 制造，但可与 MySQL 一起使用并且是免费的）

[DBVisualizer](http://www.minq.se/products/dbvis/)（付费版本非常棒，尤其是键盘快捷键骑师，但也有免费版本）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T02:33:26.747

[SQL Squirrel](http://www.squirrelsql.org/)是一个非常好的 Swing 客户端，适用于任何具有 JDBC 驱动程序的关系数据库。我觉得挺好的，而且是免费的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-12-05T02:30:07.990

在 Mac 上，[Sequel Pro](http://www.sequelpro.com/)是一个不错的免费工具。[Querious](http://www.araelium.com/querious/)看起来也不错，尽管它仍处于测试阶段（而且不是免费的）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-01-06T12:41:32.743

仅供参考：另一种解决方案可能是使用[OpenOffice Base](http://www.openoffice.org/download/index.html)并[连接到 MySQL DB](http://wiki.services.openoffice.org/wiki/Connect_MySQL_and_Base#MySQL_settings)（类似于将 MS Access 文件连接到 MySQL），除了 OpenOffice 是免费的。

但我认为[使用上面建议的 HeidiSQL](https://stackoverflow.com/a/395570/260080)是一个更好的解决方案。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-28T19:05:53.287

Jet Profiler 非常适合分析/优化查询

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-28T16:59:04.610

试试[SQLYog MySQL GUI](http://www.webyog.com/en/index.php)。社区版是免费的，并且已被证明足以满足我的需要。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-13T04:15:55.830

我使用[DbVisualizer 免费版](http://www.minq.se/products/dbvis/download/install.jsp)。跨平台，漂亮的gui，易于使用。

# javascript - 如何使用 jQuery 添加 DOM 元素？

> ID：395525
> 
> 赞同：12
> 
> 时间：2008-12-27T22:33:57.930
> 
> 标签：javascript, jquery, dom

我有一个功能，我目前正在使用它来显示隐藏的 div.a_type

如何修改此代码，以便将新的 div 添加到 DOM 而不是隐藏在隐藏的 div 中

```
jQuery(function(){ // 添加答案

    jQuery(".add_answer").click(function(){
      如果（计数> =“4”）{
        alert('只允许 4 个答案');
        }别的{
      var count = $(this).attr("alt");
      计数++；
      $(this).parents('div:first').find('.a_type_'+count+'').fadeIn();
      $(this).attr("alt", count);
    }

    });

});

```

* * *

好的，既然我已经解决了这个问题，我还有一个问题，

如果单击按钮，我还有另一个功能可以删除插入的 div。现在无法在页面加载时将其他 div 加载到 dom 中。我现在如何触发删除这些功能？

jQuery(function(){ // 隐藏答案

```
jQuery(".destroy_answer").click(function(){
  $(this).parents("div:first").fadeOut(function (){ $(this).remove() });
   var count = $(this).parents('div:first').parents('div:first').find('.add_answer').attr("alt");
   count--;
   $(this).parents('div:first').parents('div:first').find('.add_answer').attr("alt", count);

}); 
```

});

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-27T22:38:39.230

如何在最后一个 div 之后添加它。

```
$('.a_type:last').insertAfter('<div class="a_type">content</div>'); 
```

**编辑**
您可以通过 AJAX 调用 somefile.php 获取信息，然后 somefile 应该在 div 中返回您想要的内容：

```
$.get('path/to/somefile.php', function(data){
 $('.a_type:last').insertAfter('<div class="a_type">' + data + '</div>');
}); 
```

Somefile.php 应该是这样的：

```
<?php
 session_start();
 $sessiondata = $_SESSION['data'];
 echo "Whatever you type here will come inside the div bla bla $sessiondata";
?> 
```

**编辑**
好的，试试这个：

```
jQuery(function(){ // 添加答案

jQuery(".add_answer").click(function(){
  如果（计数> =“4”）{
    alert('只允许 4 个答案');
    }别的{
  var count = $(this).attr("alt");
  计数++；
  $('.a_type_'+count-1+'').insertAfter('
       将内容放回此处');
  $(this).attr("alt", count);
}

});

});

```

如果您仍然需要它，只需混合 AJAX。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-27T23:44:16.680

> 如果单击按钮，我还有另一个功能可以删除插入的 div。现在无法在页面加载时将其他 div 加载到 dom 中。我现在如何触发删除这些功能？

您有三个选项来解决您最近遇到的问题。

1.  您可以使用[liveQuery](http://brandonaaron.net/jquery/plugins/livequery/)，这是一个 jQuery 插件，它在添加 DOM 元素时将事件处理程序重新应用于它们。注意：这个插件只有在你使用原生的 jQuery DOM 追加/前置函数（append/prepend/after/before/insertBefore/insertAfter 等）时才有效。

2.  或者，您可以在添加新元素时手动重新应用处理程序......（不是最佳选择）

3.  第三，我认为最好的选择是利用事件委托的强大功能。您所做的是将事件处理程序附加到任何父项，例如，如果您要动态地将列表项添加到无序列表，而不是不断地将事件处理程序重新应用于每个添加的项目，您可以简单地附加事件处理程序到父级，然后找到事件的目标：

    ```
    $('ul').click(function(e){
        var target = e ? e.target : window.event.srcElement;
        if(target.nodeName.toLowerCase() === 'li') {
            // Do Stuff...
        }
    }) 
    ```

# c# - 关于 C# CMS 命名约定的快速问题

> ID：395526
> 
> 赞同：1
> 
> 时间：2008-12-27T22:34:29.503
> 
> 标签：c#, content-management-system, naming-conventions

我正在构建一个 CMS，并且我和其他相关开发人员就类的命名约定进行了辩论。这个问题特别出现在“页面”上，因为它是典型库中可用的公共类。

一个自然的反应是称它为 MVCMSPage（其中 MVCMS 是 cms 的未来名称）或依赖于通过 dll 引用类（想不出 atm 一词..），但两者似乎都有对他们来说有点代码味道。

你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-27T22:52:51.823

我会选择' '以外的东西`Page`。.NET 中内置的“ `Page`”类是一个非常通用的类，通常被称为 ASP.NET 的一部分。您很容易混淆其他开发人员（甚至您自己，如果您暂时不看它，几个月后）。

我通常使用命名约定，例如：

```
ApplicationName + "Page" 
```

我还喜欢遵循 ​​MS .NET 命名准则，即仅将超过 2 个字符的首字母缩写词的首字母大写。由于`MVCMS`如果读取不正确，' ' 可能会与 'MVC' 架构风格混淆，所以我不会使用 ' `MvcmsPage`' 或 ' `MVCmsPage`'，我会这样称呼它：

```
MvCmsPage 
```

这是描述性的并且相当容易阅读和理解。

当然，这真的取决于你。主要是偏好问题。只是不要使用' `Page`'，因为它会让一些开发者生气（比如我自己）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-27T23:03:15.593

我认为您要查找的术语是`namespace`.

对于 System.Web 空间中的这样一个基本类，我认为我不会依赖命名空间区分。如果您正在编写基于控制台的通知机制，那么它可能没问题，但由于您在网络领域工作，我会避免它。我的投票是使用命名空间作为主要区别并将其命名为简单的名称，就像`ContentPage`这样您将拥有类似类`MvcCms.Web.ContentPage`的全名。

如果你这样做，你可以导入你的命名空间，`System.Web`并且仍然能够区分这些类，并且你有一个有意义的短名称，使用或引用也不麻烦（谈到它时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T00:03:33.083

对我来说，由于您正在开发 CMS，因此根目录下的对象就是内容。所以无论是 MvCmsContent、CmsContent 还是只是 Content 对我来说都很好。命名不是项目中最难的部分吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-26T17:01:59.870

我们遇到了类似的问题，只是使用了 CMSPage。它比 MVCMSPage 稍微简单一些，但显然仍然是 CMS，如果需要，您可以在未来进一步扩展该类以用于多个系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-26T17:21:52.233

我认为您所指的“页面”相当于应用程序的数据库记录。正如其他人所说，这是一个相当负荷的术语。这里有一些随机的想法：

*   节点
*   看法
*   页面记录
*   CMS页面
*   网络文档
*   内容页

你的选择应该尽量传达对象类型的本质。我会避免将产品名称放入类名中。我更喜欢命名空间。

# xml - 最佳实践：XML 属性与 XML 元素 - 什么时候应该使用元素，什么时候应该使用属性？

> ID：395527
> 
> 赞同：23
> 
> 时间：2008-12-27T22:35:52.527
> 
> 标签：xml

哪种格式才是这个 XML 数据的正确格式，它们是等价的还是两者之间有权衡？

1.

```
<sitemap>
  <category name="Animals">
    <section title="Dogs">
      <page url="/pics/greatdane.jpg" title="Great Dane"/>
    </section>
  </category>
</sitemap> 
```

2.

```
<sitemap>
  <page>
    <category>Animals</category>
    <section>Dogs</section>
    <title>Great Dane</title>
    <url>/pics/greatdane.jpg</url>    
  </page>
</sitemap> 
```

我已经用我的样式表实现了第一个示例，它似乎工作正常，但我不确定正确的形式应该是什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-27T22:55:47.183

The issue of attributes vs elements has been around for the better part of a decade and there is no right answer. Instead consider the differences and from that you should be able to decide which to use:

*   There can be only one instance of an attribute although you can enforce this with elements using DTD or XML Schema;
*   Attributes are unordered. Elements are not;
*   Attributes lead to a more concise syntax if there are no children. Compare:

    <page name="Sitemap"/>

to:

```
<page>
  <name>Sitemap</name>
</page> 
```

I know which one I prefer;

*   Not really relevant now since DTDs aren't used much (if at all) over XML Schema but I'll add it anyway: DTDs allow default values (implied) for attributes but no such mechanism for elements; and
*   Elements, being elementss, can have children and attributes of their own. Attributes obviously cannot.

So, from your example, your innermost `<page>` element has a URL attribute (although it's an image for some reason--perhaps a preview icon? If so the attribute name is misleading). A webpage only has one URL (generally) so that'd be a good example of something that could be an attribute.

If on the other hand you wanted to list the images on the page, there could obviously be more than one so you'd need elements for that.

But, in the end, most of the time there's no right or wrong answer and it's largely a question of style.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-28T01:46:30.990

The two examples are not equivalent, because they form different hierarchies. Is a sitemap a list of categories, like the first example? Or is it a list of pages like the second example?

The answer to that is orthogonal to the element vs attribute question.

On the Element vs Attribute question: Here is your second example transformed to an attribute approach:

```
<sitemap>
 <page    
  category='Animals'
  section='Dogs'
  title='Great Dane'
  url='/pics/greatdane.jpg'
  /> 
</sitemap> 
```

The above and your second case are equivalent. One consideration for choosing one versus the other is based on whether you may modify the schema in the future. Adding an attribute to the url element as in the following example would likely be a backward compatable change. The semantically same modification would be impossible in the attribute approach, as you cannot attach an attribute to an attribute.

```
<sitemap>
 <page>    
  <category>Animals</category>
  <section>Dogs</section>    
  <title>Great Dane</title>    
  <url nofollow="true">/pics/greatdane.jpg</url>
 </page> 
</sitemap> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-28T02:18:52.860

I think that the answer is quite obvious when you think about how you want to add more dogs:

```
<sitemap>
  <category name="Animals">
    <section title="Dogs">
      <page url="/pics/greatdane.jpg" title="Great Dane"/>
      <page url="/pics/wienerdog.jpg" title="Wiener Dog"/>
    </section>
  </category>
</sitemap> 
```

or

```
<sitemap>
  <page>
    <category>Animals</category>
    <section>Dogs</section>
    <title>Great Dane</title>
    <url>/pics/greatdane.jpg</url>    
  </page>
  <page>
    <category>Animals</category>
    <section>Dogs</section>
    <title>Wiener Dog</title>
    <url>/pics/wienerdog.jpg</url>
  </page>
</sitemap> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-27T22:44:14.803

这类事情通常没有正确或错误的答案。大多数情况下，这取决于您需要如何访问数据。

第一个的一个好处是它很容易（也许稍后）支持一个部分中的多个页面和一个类别中的多个部分。在第二个中，信息跨页面传播。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-27T22:46:29.027

XML is horrible file format and ends up in religious wars. Do whatever you feel is best at the time, provided you can justify it. However, your particular examples are significantly different:

In 1, sitemap encapsulates a category encapsulating a section which encapsulates the page.

In 2, sitemap encapsulates a page which encapsulates three items: category, section, title and URL. None of these three items contains any other, they are siblings, all commonly held within the page.

As two different structures, it depends on which you intended.

A different question would be the preference for attributes versus first-level tags. But as I say, that is a *different* question!

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-28T02:01:45.110

I use elements for data and attributes for [Metadata](http://en.wikipedia.org/wiki/Metadata)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-27T22:55:36.390

I prefer the second. Elements should be used to describe data (which is mostly what you are doing). Attributes are used for values not relevant to the data, such as the max size for an element for example.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-28T01:56:17.413

IBM has posted an article titled [Principles of XML Design](http://www.ibm.com/developerworks/xml/library/x-eleatt.html) that provides some guidelines on when to use attributes vs. elements. I found this article useful, your mileage may vary.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-28T02:08:14.440

The first alternative scales a bit better. Suppose that you need to add another attribute of an animal section, such as the status of the section. I suggest that this representation:

```
<sitemap>
  <category name="Animals">
    <section title="Dogs" status="draft">
      ...
    </section>
  </category>
</sitemap> 
```

does a better job of conveying the following facts:

1.  name is a property of the category
2.  a category could have multiple sections
3.  status is a property of a section; not all sections in the category are required to have the same status.

In short, it makes the hierarchical structure clearer, and shows which attributes apply at each level of the hierarchy.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-31T20:44:51.703

A simple rule of thumb: if you can implement a data structure as an unordered map of name/value pairs, you can use an element's attributes to represent it. If you can't (if, for instance, you'll have multiple names, or a given name will have multiple associated value, or the ordering of the name/value pairs is significant), then an element with attributes is the wrong representation.

Two other things that can make this the wrong representation:

*   The values contain markup. This *can* be represented in attribute values, but it's awkward, because all of the markup characters have to be escaped into entities. Also, the markup won't be parsed.
*   You're using XML Schema validation, and there is more than one allowable set of name/value pairs. XML Schema can only define one set of allowable attributes for an element, whereas it can define multiple mutually-exclusive sets of allowable child elements.

The obvious benefit to using attributes is that they result in terser XML. They're (very) marginally faster to parse than elements, too.

# c# - 给定一个对象，我如何以编程方式判断它支持哪些接口？

> ID：395549
> 
> 赞同：2
> 
> 时间：2008-12-27T22:55:41.943
> 
> 标签：c#, .net, reflection, interface

鉴于这种：

```
Interface IBase {string X {get;set;}}
Interface ISuper {string Y {get;set;}}

class Base : IBase {etc...}
class Super : Base, ISuper {etc...}

void Questionable (Base b) {
  Console.WriteLine ("The class supports the following interfaces... ")
  // The Magic Happens Here
} 
```

我可以用什么替换“The Magic”以在对象 b 上显示支持的接口？

是的，我知道它属于 Base 类，它支持“IBase”，真正的层次结构比这更复杂。:)

谢谢！-DF5

编辑：现在我已经看到了答案，我因为没有通过 Intellisense 绊倒而感到愚蠢。:)

谢谢大家！-DF5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-27T23:03:30.367

b.GetType()。[获取接口](http://msdn.microsoft.com/en-us/library/system.type.getinterfaces.aspx)()

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-27T23:07:48.877

魔法 ：

```
foreach (Type iface in b.GetType().GetInterfaces())
    Console.WriteLine(iface.Name); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-27T23:04:37.760

```
foreach (var t in b.GetType().GetInterfaces())
{
    Console.WriteLine(t.ToString());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-27T23:04:48.103

嘿，我看到了 Console.WriteLine 并认为您正在寻找字符串表示形式。反正就是这里

```
public string GetInterfacesAsString(Type type) { 
  return type.GetInterfaces().Select(t => t.ToString()).Aggregate(x,y => x + "," + y);
} 
```

# arrays - 替换数组中的字符串字符

> ID：395555
> 
> 赞同：1
> 
> 时间：2008-12-27T23:00:29.297
> 
> 标签：arrays, for-loop

我有一个字符串（长度不足），我想复制很多次，一次从字符数组（长度不足）中替换一个字符。

所以说我有这个字符串：'aa'
这个数组：['a', 'b', 'c', 'd']

在一些神奇的for循环之后会有一个数组，如： ['aa', 'ab', 'ac', 'ad', 'ba', 'bb' ... 'dc', 'dd']

你会怎么做？我尝试了使用三个 for 循环的东西，但我似乎无法得到它。

**编辑**
对字符串的依赖如下：

假设字符串是：'ba'，
那么输出应该是：['ba', 'bb', 'bc', 'bd', 'ca' ... 'dd']

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T00:40:14.367

如果结果数组中的字符串顺序无关紧要，并且初始字符串中的所有字符都在替换数组中，则：

```
#!/usr/bin/env python
from itertools import product

def allreplacements(seed, replacement_chars):
    assert all(c in replacement_chars for c in seed)
    for aset in product(replacement_chars, repeat=len(seed)):
        yield ''.join(aset)

print(list(allreplacements('ba', 'a b c d'.split())))
# ['aa', 'ab', 'ac', 'ad', 'ba', 'bb', 'bc', 'bd', 'ca', 'cb', 'cc',
#  'cd', 'da', 'db', 'dc', 'dd'] 
```

* * *

这是一般情况的解决方案。替换按字典顺序执行：

```
#!/usr/bin/env python
from itertools import product

def allreplacements(seed, replacement_chars):
    """Generate all possible replacements (with duplicates)."""
    masks = list(product(range(2), repeat=len(seed))) # e.g., 00 01 10 11
    for subs in product(replacement_chars, repeat=len(seed)):
        for mask in masks:
            # if mask[i] == 1 then replace seed[i] by subs[i]
            yield ''.join(s if m else c for s, m, c in zip(subs, mask, seed))

def del_dups(iterable):
    """Remove duplicates while preserving order.

    http://stackoverflow.com/questions/89178/in-python-what-is-the-fastest-algorithm-for-removing-duplicates-from-a-list-so#282589
    """
    seen = {}
    for item in iterable:
        if item not in seen:
           seen[item] = True
           yield item

print(list(del_dups(allreplacements('ba', 'abcd'))))
print(list(del_dups(allreplacements('ef', 'abcd'))))
# ['ba', 'aa', 'bb', 'ab', 'bc', 'ac', 'bd', 'ad', 'ca', 'cb', 'cc',
#  'cd', 'da', 'db', 'dc', 'dd']

# ['ef', 'ea', 'af', 'aa', 'eb', 'ab', 'ec', 'ac', 'ed', 'ad', 'bf',
#  'ba', 'bb', 'bc', 'bd', 'cf', 'ca', 'cb', 'cc', 'cd', 'df', 'da',
#  'db', 'dc', 'dd'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-27T23:06:58.097

如果字符串和数组不都包含“a”，问题会更清楚。所需的输出不显示对输入字符串的任何依赖性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T00:12:47.280

嗯，应该有两个 for 循环：Python 伪代码——

```
a = "abcd"  
b = "ba"
res = []
for i in a:            # i is "a", "b", ...
   for j in b:         # j is "b", "a"
       res.append(i+j) # [ "ab", "bb",...]
return res 
```

[更新：纠正了愚蠢的错字。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T01:48:46.273

您可以通过两种方式使用以下代码：

1.  将所有字符串作为一个数组
2.  一次拉一根弦

对于用法 (1)，调用该`getStrings()`方法（根据需要多次）。

对于用法 (2)，只要**返回**true ，就调用该`next()`方法。（实现一个方法留给读者作为练习！;-)**`hasNext()``reset()`**

 **```
package com.so.demos;

import java.util.ArrayList;
import java.util.List;

public class StringsMaker {

    private String seed;    // string for first value
    private char[] options; // allowable characters

    private final int LAST_OPTION;  // max options index
    private int[] indices;          // positions of seed chars in options
    private int[] work;             // positions of next string's chars
    private boolean more;           // at least one string left

    public StringsMaker(String seed, char[] options) {
        this.seed = seed;
        this.options = options;
        LAST_OPTION = options.length - 1;
        indices = new int[seed.length()];
        for (int i = 0; i < indices.length; ++i) {
            char c = seed.charAt(i);
            for (int j = 0; j <= LAST_OPTION; ++j) {
                if (options[j] == c) {
                    indices[i] = j;
                    break;
                }
            }
        }
        work = indices.clone();
        more = true;
    }

    // is another string available?
    public boolean hasNext() {
        return more;
    }

    // return current string, adjust for next
    public String next() {
        if (!more) {
            throw new IllegalStateException();
        }
        StringBuffer result = new StringBuffer();
        for (int i = 0; i < work.length; ++i) {
            result.append(options[work[i]]);
        }
        int pos = work.length - 1;
        while (0 <= pos && work[pos] == LAST_OPTION) {
            work[pos] = indices[pos];
            --pos;
        }
        if (0 <= pos) {
            ++work[pos];
        } else {
            more = false;
        }
        return result.toString();
    }

    // recursively add individual strings to result
    private void getString(List<String> result, int position, String prefix) {
        if (position == seed.length()) {
            result.add(prefix);
        } else {
            for (int i = indices[position]; i < options.length; ++i) {
                getString(result, position + 1, prefix + options[i]);
            }
        }
    }

    // get all strings as array
    public String[] getStrings() {
        List<String> result = new ArrayList<String>();
        getString(result, 0, "");
        return result.toArray(new String[result.size()]);
    }

} 
```

# delphi - 框架依赖是个问题吗？

> ID：395557
> 
> 赞同：7
> 
> 时间：2008-12-27T23:02:39.993
> 
> 标签：delphi, frameworks

我认识一个人，他有一家单人公司，用 Delphi 和 Pascal 开发应用程序。他在处理工作量方面遇到了问题。因此，他需要找到一名员工。

由于找不到人，他说他的公司对毕业的学生没有吸引力。原因之一是他使用了一个不那么流行的开发平台，因为很多开发都是在 .NET 或 Java 中完成的。

所以我问，“那为什么不切换到 .NET 或 Java 呢？”

他的回答是他不想依赖微软。MS 可以改变 .NET 框架，破坏他的应用程序。由于糟糕的 UI，Java 也不是一个选择。

由于 Delphi 以 Win32 为目标，如果您想要速度/便携性，它似乎非常有吸引力。也不需要虚拟机。

框架是对应用程序开发人员的“威胁”吗？但是，我对delphi了解不多，但由于它的高级特性，它不也是一个框架吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-27T23:15:56.643

我发现远离微软的理由很薄弱。如果 Microsoft 更改了 .NET 框架并破坏了应用程序，我很确定一切都会崩溃。此外，我不太同意 Java 不是一个选项，因为如果 UI 不好（我想不出比 Eclipse 更好的反例）。

如果您的朋友只知道 Delphi，那将是一个很好的理由。框架绝不会对应用程序开发人员构成威胁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-27T23:59:13.030

你朋友吸引候选人的一些问题可能只是与营销有关。

例如，如果他为“经验丰富的 Delphi 程序员”做招聘广告，他可能不会收到很多以前从未使用过 Delphi 的人的询问，因为他们认为自己没有机会被录用。

如果这不是问题，那么他也许可以通过关注工作的性质和工作环境的优越性来提高招聘人员的机会。

例如，如果这项工作需要使用 Delphi 来构建非常酷的产品，那么它会吸引更多的人。

最后，如果他为程序员建立了一个非常好的工作环境，并且报酬丰厚，那么这也可能会有所帮助。

理想情况下，他将能够提供：

1.  真正令人兴奋的工作
2.  高薪
3.  很棒的工作环境
4.  一种“酷”的编程语言

如果缺少其中一个，他可以通过“加强”其他的来弥补。

然而，缺的越多，他的招募就越困难。我会说，如果他缺少两个或更多，那么他就有麻烦了。

听起来他不想改变“4”。我建议他看看其他 3 个，看看他能不能多吹捧一下。这可能会有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-27T23:14:49.050

他仍然依赖Windows。微软可以、已经（并且可能会再次）改变 Windows，因此它破坏的不仅仅是一些现有的应用程序。但这就是科技界的生活；这是一个不断移动的目标。

但是就像他针对一个版本的 Delphi 进行编译一样，他可以轻松地选择一个版本的 .net 框架或一个版本的 java、Python+pygtk 等并坚持使用它。出于这个原因，可以安装多个版本的框架。

它们*是*依赖关系，但它们并不难满足。它们的好处远远超过任何部署问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-28T00:35:37.577

问题当然是要在 java 或 .net 中获得显着的开发性能，他需要投入大量时间。这正是所缺乏的。这是典型的锁定情况。它并不像之前建议的那样死胡同，因为 FreePascal 正在慢慢达到可以取代 Delphi 的程度，并且是 64 位和多平台的，但仍然很困难。

由于在 Delphi 和 VCL 上投入了大量时间，他现在可能能够非常快速地开发应用程序。使用 java 或 .net 达到同样的目的，了解要使用的习语和模式，对于单人业务来说太昂贵了。

微软和 Sun 给开发人员带来了巨大的变化，以及非常糟糕的建议。对于 Sun，您只需回想一下我们应该如何开发 J2EE 应用程序，Microsoft 会留下易于遵循的经过尝试和放弃的技术的痕迹。

[回复评论] 我向大公司推荐 Delphi 应用程序没有问题。当前 Java 或 .net 中的开发风格不太可能比 Delphi 具有更长的寿命。我可能不会在其中开始新的应用程序开发。我还会仔细查看团队组成，看看它是否可以处理应用程序的预期寿命，但这适用于所有开发环境

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-27T23:17:39.387

恕我直言，这就像在说“我开 Model-A，因为福特不会很快改变它。” 你的朋友不是“依赖”Delphi 编译器吗？他们不进行更新/更改/改进吗？也许不像微软对.NET 做的那样频繁，但我相信他必须做一些继续教育。

自 2.0 以来，Microsoft 没有对 .NET 进行任何框架范围的更改。.NET 3.0 和 3.5 是附加版本，它们添加了新功能，可以根据需要使用或保留。.NET 以开源形式提供，通过反射，您可以深入挖掘它的最深处（出于我自己的目的，我在 ASP.NET 中对模板化服务器控件进行了逆向工程。）

以我的经验，专业发展需要跟上技术的步伐。如果 Microsoft 和 Sun 习惯于在每次更新中进行重大更改，让开发人员的生活陷入困境，那么它们就不会成为价值数十亿美元的公司。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-27T23:29:05.027

对于你的朋友来说，这是一个有趣的立场，因为他的客户正在接受对 Delphi 的依赖（与 .NET 不同，它没有第二来源），更关键的是，他们依赖于一个小而不断缩小的开发和支持池资源（包括你的朋友。）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-28T03:36:07.010

正如 Oli 所指出的，您可以针对您喜欢的任何框架。但是，MS 几乎没有在任何框架中引入重大更改。他们甚至保留了较差的 API (ReaderWriterLock) 以保持后台兼容性。从 3.5 开始，C# 现在具有将复杂任务的开发时间减少至少一个数量级的功能。使用该框架，您可以使用 WCF 创建通信层，使用 WinForms 创建简单漂亮的 UI，并使用具有多个锁定 API 的线程池用于多线程应用程序。对于每个问题，C# 都有多种解决方案，如果没有 .NET 框架，用其他语言实现这些解决方案需要更长的时间。过去一个月我在工作中所做的事情需要一年的时间才能正确使用我非常精通的 C++（我的第一语言）。这家初创公司对他来说可能太贵了，但是任何不认为 .NET 框架是 Windows 开发的未来的人都一头雾水。在某些情况下，您需要推出自己的解决方案，但该框架简化了许多重复的编码任务。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-27T23:22:27.380

每个依赖项，包括一个框架，都是一个成本。每个人都有好处。问题是，收益是否大于成本。这必须在每个项目和每个框架的基础上回答，但根据我的经验，这在几乎所有情况下都是非常值得的。

顺便说一句，可以使 .NET Framework 应用程序（或库等）以任何版本的 Fx 为目标。如果他针对 v3.5 编写代码，而 v4 中的某些内容破坏了它，没问题，只是不要将其更改为针对 v4。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-27T23:30:40.313

嗯，不同版本的 .NET 框架可以共存。

例如，我认为发展到 2.0 版没有真正的问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-28T20:18:16.550

我也是delphi 开发人员，我看不出有人会从delphi 切换到.net 的任何理由。Delphi 基于 VCL，我现在已经稳定了 10 年或更长时间，如果有人开始使用 Delphi 1.0 开发应用程序，它仍然可以在 Delphi 2009 或 Delphi for .Net 中编译。

Delphi 也比 .Net 快得多，如果您开发数据库应用程序，您可能不会注意到速度，但如果您从事图像处理或其他集成算法，delphi 代码与 C#/Vb.net 相比更快。

Delphi cominity 也比.net 更大，VCL 也比.net 有更多的东西。

Microsoft C++ 只与以前的版本兼容，但是用 C++ 编码是可怕的，我知道它的强大但在时间紧迫的时候无法与 delphi 相比，对于那些没有使用 delphi 的人只需在谷歌搜索 VCL 组件，看看如何大是delphi社区。

我也知道程序员在 vb5 中开发应用程序，如果不进行大量更改就无法在 vb6 中继续开发，当 .net 发布时，他们必须坚持使用旧工具，或者重写所有东西。

对不起，我的英语不好。

# windows - 在 Windows 中测量设备驱动程序的内存使用情况

> ID：395569
> 
> 赞同：8
> 
> 时间：2008-12-27T23:10:33.083
> 
> 标签：windows, memory-management, driver

如何确定每个设备驱动程序消耗多少内存？我假设这可以通过一些 Win32 或 .NET API 来完成，但我无法确定是哪一个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-08T07:49:24.657

Windows 使用池标记跟踪设备驱动程序内存使用情况。如果您知道有问题的驱动程序传递给什么池标记[`ExAllocatePoolWithTag`](http://msdn.microsoft.com/en-us/library/ms796989.aspx)，那么您可以使用诸如[`poolmon`](http://msdn.microsoft.com/en-us/library/ms792885.aspx)（来自 Windows 驱动程序工具包）、[PoolTag](http://www.osronline.com/article.cfm?article=98)（来自 OSR）或[WinDbg（或 KD）](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)（来自 Debugging Tools for视窗）。

请注意，设备驱动程序可能会调用间接分配内存的内核 API。例如，调用`IoAllocateMdl`将导致 Windows I/O 管理器使用由 Windows I/O 管理器分配的不同池标记为内存描述符列表分配内存。因此，代表多个设备驱动程序执行的分配可能都使用相同的池标记。

如果您尝试确定哪个驱动程序正在泄漏内存，请使用 poolmon/PoolTag/WinDbg/KD 识别正在泄漏的池标记。然后将内核调试器（WinDbg 或 KD）附加到系统并将变量设置`nt!poolhittag`为泄漏池标记。下次`ExAllocatePoolWithTag`调用该池标记分配内存时，系统将进入内核调试器，然后您可以查看调用堆栈以确定哪个驱动程序正在执行分配。此过程在[使用内核调试器查找内核模式内存泄漏](https://msdn.microsoft.com/en-us/library/ff560189.aspx)中有更详细的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-27T23:46:50.107

我知道这不是微不足道的。以下是密切相关问题的一些起点：

[您可以通过使用VirtualQueryEx](http://msdn.microsoft.com/en-us/library/ms810627.aspx)确定 PE 文件、堆等使用的内存来获得一个（可能不令人满意的）开始。这是一个提供[虚拟内存映射](http://blogs.microsoft.co.il/blogs/pavely/archive/2008/12/07/virtual-memory-map-viewer-update.aspx)视图的程序。这应该回答设备驱动程序的图像大小。

更大的困难在于确定如何标记由分配它的代码动态分配的内存。[最好的方法是使用detours](http://research.microsoft.com/en-us/projects/detours/)之类的东西来跟踪动态内存分配，并遍历堆栈以确定发起者。最后，您希望为设备驱动程序执行此操作的事实更进一步。我怀疑可以为设备驱动程序使用弯路（尽管我不确定）。我知道从设备驱动程序中遍历堆栈是非常重要的。

您还可以从 SysInternals[套件](http://technet.microsoft.com/en-us/sysinternals/default.aspx)中的 ProcExp 获取您想要的数据。运行它转到“系统”，转到查看/显示下部窗格，启用 Dll。然后右键单击列标题并添加工作集的标题，例如“WS Total”。我不确定这可以正确标记它们的内存。在我的盒子上，它为他们提供了设备驱动程序的映射图像大小，但在工作集列中只有 0K。我认为 procexp 没有给出答案是合理的证据，证明解决这个问题不会很快。

祝你好运。

# spring - Grails getSomething(int i) 方法无法编译

> ID：395586
> 
> 赞同：4
> 
> 时间：2008-12-27T23:31:21.433
> 
> 标签：spring, grails, groovy

有人能告诉我为什么这个 Grails 域类不会编译（在运行时）吗？

```
class Person {
    String name

    String getSomething(int i) {
    }
} 
```

当我运行时出现此错误`grails run-app`：

```
2008-12-27 15:26:33.955::WARN:  Failed startup of context org.mortbay.jetty.webapp.WebAppContext@187e184{/asrs2,C:\Steve\asrs2/web-app}
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NullPointerException
        at java.security.AccessController.doPrivileged(Native Method)
        at RunApp_groovy$_run_closure2_closure7.doCall(RunApp_groovy:67)
        at RunApp_groovy$_run_closure2_closure7.doCall(RunApp_groovy)
        at Init_groovy$_run_closure6.doCall(Init_groovy:131)
        at RunApp_groovy$_run_closure2.doCall(RunApp_groovy:66)
        at RunApp_groovy$_run_closure2.doCall(RunApp_groovy)
        at RunApp_groovy$_run_closure1.doCall(RunApp_groovy:57)
        at RunApp_groovy$_run_closure1.doCall(RunApp_groovy)
        at gant.Gant.dispatch(Gant.groovy:271)
        at gant.Gant.this$2$dispatch(Gant.groovy)
        at gant.Gant.invokeMethod(Gant.groovy)
        at gant.Gant.processTargets(Gant.groovy:436)
        at gant.Gant.processArgs(Gant.groovy:372)
Caused by: java.lang.NullPointerException
        at java.lang.Class.isAssignableFrom(Native Method)
        ... 13 more 
```

如果我将方法更改`getSomething`为`doSomething`然后它可以工作。`getSomething(int i)`以某种方式被视为一种bean方法吗？

**跟进**：这是一个[Grails 错误](http://jira.codehaus.org/browse/GRAILS-3760)，将在 1.2 中修复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-02T17:56:01.487

好吧，你有两个问题：

1.  Grails 中的域类尝试确保每个属性在启动期间都有一个 getter 和 setter。它通过查找所有 getter 并确保存在适当的 setter 来做到这一点。所以，如果你有一个getSomething()，你必须有一个setSomething(def something)，**即使类中没有属性“something”**。实际上，通过创建 getSomething() 函数，您已经*暗示*存在这样一个属性，并且您还必须创建一个 setSomething()。

2.  Getter**不接受参数**。你的可以。现在我意识到当你写它时你并没有认为这是一个“吸气剂”，但是你对它的命名使它成为一个。

最好的选择？不要使用“get”或“set”或“is”前缀，除非你真的在制作一个可以获取和设置的完整属性。我也会避免在域类中“查找”，因为它有自己的一组生成方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-22T16:52:05.813

一些笔记...

*   如果你提供了一个 setter，你也不必提供一个 getter。反之亦然。您真正要做的是覆盖 Groovy 为您附加的默认访问器方法。如果您愿意，您可以覆盖一个而不是另一个。
*   如果您在域类上创建以“find”开头的方法没有问题，因为动态查找器方法实际上是静态方法添加（并且它们都以“findBy*”开头）。
*   瞬态解决方案将不起作用。将“某物”设为瞬态值无助于您使用错误参数签名的吸气剂这一事实。当您动态键入返回值时也是如此。
*   这不是 Groovy 的问题，而是 Grails 的问题。

我认为解决方案是将您的方法名称从*getSomething 更改*为*findSomething*或任何您想要的不违反约定的名称。以下工作正常：

```
class Person {
    String name

    String findSomething(int i) {
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-21T22:45:34.697

不要将方法定义为具有返回类型，而是尝试使用`def`：

```
class Person {
    String name

    def getSomething(int i) {
        // foo
    }
} 
```

另一种解决方案可能是定义`something`为瞬态（假设您实际上没有名为“某物”的属性）：

```
class Person {
    String name

    static transients = ['something']

    String getSomething(int i) {
        // foo
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T01:58:57.923

在我回答这个问题之前，让我告诉你我的环境：
Grails 1.0.4
Java 1.6.0_10-beta
Groovy 1.6-RC-1
on a Windows Vista machine

在 grails 中，在运行时为域类中的所有字段添加动态 get 方法。对于问题中提到的 Person 类，将在运行时添加一个 getName() 方法，这将允许人们在不定义它的情况下使用它。现在问题在于 getSomething(int i) 是你的类中没有一个名为 String something 的字段。如果您尝试添加一个名为 getName(int i) 的方法，它将毫无问题地工作，或者如果您添加一个字段 String ，那么 getSomething() 方法将起作用。

我希望这能暂时解决这个问题......我会继续寻找并尽快发布关于确切工作的更新。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-01-15T18:43:06.867

我已经得出结论，这是 Grails 的一个错误。我创建了已在 Grails 1.1.2 中修复的[GRAILS-3760 。](http://jira.codehaus.org/browse/GRAILS-3760)

# javascript - JSON 安全最佳实践？

> ID：395592
> 
> 赞同：77
> 
> 时间：2008-12-27T23:40:07.093
> 
> 标签：javascript, ajax, security, json

在研究[JSON 与 XML](http://www.subbu.org/blog/2006/08/json-vs-xml)的问题时，我遇到了[这个问题](https://stackoverflow.com/questions/325085/when-to-prefer-json-over-xml)。现在，首选 JSON 的原因之一被列为在 Javascript 中易于转换，即使用`eval()`. 现在，从安全角度来看，这立即让我觉得可能存在问题。

因此，我开始对 JSON 的安全方面进行一些研究，并通过这篇博客文章了解[JSON 是如何不像人们想象的那样安全的](http://incompleteness.me/blog/2007/03/05/json-is-not-as-safe-as-people-think-it-is/)。这部分突出：

> **更新：**如果您正确地执行 JSON 100%，那么您将只有顶层的对象。数组、字符串、数字等都将被包装。JSON 对象将无法 eval() 因为 JavaScript 解释器会认为它正在查看一个块而不是一个对象。这对于防止这些攻击大有帮助，但是最好还是使用不可预测的 URL 来保护您的安全数据。

好的，这是一个很好的开始规则：顶层的 JSON 对象应该始终是对象，而不是数组、数字或字符串。听起来对我来说是一个很好的规则。

当涉及到 JSON 和 AJAX 相关的安全性时，还有什么可以做或避免的吗？

上面引用的最后一部分提到了不可预测的 URL。有没有人有这方面的更多信息，特别是你如何在 PHP 中做到这一点？我在 Java 方面比 PHP 更有经验，而且在 Java 中这很容易（因为您可以将整个范围的 URL 映射到单个 servlet），而我所做的所有 PHP 都将单个 URL 映射到 PHP 脚本。

此外，您究竟如何使用不可预测的 URL 来提高安全性？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-01-09T23:56:59.750

有许多针对 JSON 的安全攻击，尤其是 XSRF。

当 Web 服务使用 cookie 进行身份验证并使用包含敏感数据的 JSON 数组来响应 GET 请求时，就会出现该漏洞。

如果攻击者可以欺骗登录到服务 naive-webapp.com 的用户访问他们的网站（或任何嵌入了他们控制的 IFRAME 的网站，例如通过嵌入式广告），那么他们可以插入`<script>`带有 SRC 的标签以naive-webapp.com，并可能窃取用户的数据。这取决于 JavaScript`Array`构造函数的一个 javascript 怪癖，如下所示：

```
 <script>
   // Overload the Array constructor so we can intercept data
   var stolenArrays = [];
   var RealArray = Array;
   Array = function () {
     var arr = RealArray.apply(arguments);
     stolenArrays.push(arr);
     return arr;
   }
 </script>
 <!-- even though the attacker can't access the cookies,
   - he can cause the browser to send them to naive-webapp.com -->
 <script src="//naive-webapp.com/..."></script>
 <script>
   // now stolenArrays contains any data from the parsed JSON
 </script> 
```

`[]`EcmaScript 5 修复了导致查找全局对象的混乱行为，`Array`许多现代浏览器不再容易受到这种攻击。

顺便说一句，Oil 对不可预测的 URL 的看法是错误的。URL 中的加密安全随机标识符是保护资源的好方法。正如石油所说，基于身份的安全并不是万能的。请参阅[http://waterken.sourceforge.net/](http://waterken.sourceforge.net/)以获取基于 URL 中加密安全标识符的安全分布式应用程序方案示例，该标识符不需要身份概念。

编辑：

在考虑 JSON 与 XML 时，您还应该了解 XML 特定的攻击媒介。

[XXE](http://projects.webappsec.org/w/page/13247003/XML%20External%20Entities) , XML 外部实体攻击，使用精心设计的 XML 通过防火墙访问文件系统和网络资源。

> ```
> <!DOCTYPE root 
> [
> <!ENTITY foo SYSTEM "file:///c:/winnt/win.ini">
> ]>
> ...
> <in>&foo;</in> 
> ```
> 
> 应用程序将输入（参数“in”，其中包含 win.ini 文件）嵌入到 Web 服务响应中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-28T04:48:43.650

博客 (CSRF) 中的主要安全漏洞不是 JSON 特定的。改用 XML 就是一个大洞。事实上，完全没有异步调用同样糟糕。常规链接同样容易受到攻击。

当人们谈论唯一 URL 时，他们通常不是指[http://yourbank.com/json-api/your-name/big-long-key-unique-to-you/statement](http://yourbank.com/json-api/your-name/big-long-key-unique-to-you/statement)。相反，更常见的是使请求的其他内容独一无二。即 FORM 帖子中的值或 URL 参数。

通常这涉及在服务器端插入到 FORM 中的随机令牌，然后在发出请求时进行检查。

数组/对象对我来说是新闻：

> Script-Tags：攻击者可以嵌入一个指向远程服务器的脚本标签，浏览器将有效地为你 eval() 回复，但是它会丢弃响应，因为 JSON 是所有响应，所以你是安全的。

在这种情况下，您的网站根本不需要使用 JSON 就容易受到攻击。但是，是的，如果攻击者可以将随机 HTML 插入您的网站，那您就完蛋了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-28T00:00:14.650

> **最好**还是使用不可预测的 URL 来保护您的安全数据。

强调我的。胡说些什么！最好通过一些适当的身份验证以及***最***重要的一些加密来保护您的安全数据。JSON 交换仍然可以使用现有的身份验证技术（例如通过 cookie 的会话）和 SSL。

当您使用 JSON 将数据导出到匿名第三方（例如 Web 服务）时，依靠不猜测 URL（他们实际上在谈论的内容）的人将只是一种合理的技术（即使这样，也只是） . 一个例子是谷歌的各种网络服务 API，其中匿名用户通过其他网站访问谷歌数据。他们使用域引荐来源网址和 API 密钥来确保允许中间人网站提供 Google 数据。

如果您只是使用 JSON 将私人数据发送到直接的、已知的用户代理，请使用一些真正的身份验证和加密。如果您尝试提供 Web 服务，那么它实际上取决于这些数据的*“安全性”*程度。如果它只是公共数据并且您不介意谁可以阅读它，那么我认为制作一个散列 URL 没有意义。

* * *

编辑：为了证明他们的意思，考虑一下。想象一下，您的银行提供了一个 JSON API 来获取报表。如果我只能打字`http://yourbank.com/json-api/your-name/statement`，你可能不会很高兴。

他们可以为您的帐户生成任何 JSON 请求中所需的唯一字符串，例如：`http://yourbank.com/json-api/your-name/big-long-key-unique-to-you/statement`

我猜到的机会要小得多。但是您真的希望它成为您真正安全的数据和潜在的身份窃贼之间的唯一缓冲吗？不。

# actionscript-3 - 斜壁与球的弹性碰撞

> ID：395593
> 
> 赞同：2
> 
> 时间：2008-12-27T23:40:19.077
> 
> 标签：actionscript-3, collision-detection

我无法计算球撞击斜墙的反射角。我正在使用从本[教程](http://www.johanvanmol.org/content/view/45/37/1/6/)中提取的算法。它看起来像这样（在 Actionscript 3 中），p1 是当前速度向量，p2 是墙的法线：

```
private function getReflect2(p1 : Point, p2 : Point) : Point
{

    var wallvec : Point = getNorm(p2);
    var wallnorm  : Point = p2;

    var t : Number = dotProduct(wallvec, p1);
    var n : Number = dotProduct(wallnorm, p1);
    var vt : Point = new Point(wallvec.x * t, wallvec.y * t);
    var vn : Point = new Point(wallnorm.x * -n, wallnorm.y * -n);

    var vx : Number = dotProduct(new Point(1,0), vn) + dotProduct(new Point(1,0), vt);
    var vy : Number = dotProduct(new Point(0,1), vn) + dotProduct(new Point(0,1), vt);
    return new Point(vx, vy);
} 
```

该函数返回新的速度矢量，并且对于与垂直壁的碰撞正确，但对于倾斜的壁则不正确。球可能会从“两侧”击中墙壁（即法线可能会朝另一个方向突出）。

谁能发现我的错误？或者建议更好的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T00:37:31.410

向量 wallvec 和 wallnorm 的大小必须为 1 才能使函数起作用。我怀疑函数 getNorm() 会为您处理 wallvec 的工作，但 wallnorm 似乎得到了任意大小。

此外，您的实现与页面上链接的算法不完全匹配。特别是，页面使用P2作为墙本身的方向。然后它对向量进行归一化（在不改变方向的情况下将幅度减小到 1）并将其复制到 wallvec 中。Wallnorm 接收墙的法线（已经是 1 级）。

我的 C 实现看起来像这样。请注意，即使 wnx 和 wny 与 p2c 和 p2y 的方向相同，我仍然必须除以幅度。

```
void solve (double p1x, double p1y, double p2x, double p2y, double *p3x, double *p3y)
{
double wvx = -p2y / sqrt(p2x*p2x+p2y*p2y);
double wvy = p2x / sqrt(p2x*p2x+p2y*p2y);
double wnx= p2x/ sqrt(p2x*p2x+p2y*p2y);
double wny=  p2y/ sqrt(p2x*p2x+p2y*p2y);

double t = wvx*p1x+wvy*p1y;
double n = wnx*p1x+wny*p1y;

double vtx = wvx*t;
double vty = wvy*t;
double vnx = wnx*-n;
double vny = wny*-n;

*p3x=vnx+vtx;
*p3y=vny+vty;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T03:36:54.437

这不是您所问问题的完全答案，但最后几行不必要地复杂。由于 (1, 0) 代表*x*轴，

```
dotProduct(new Point(1,0), vn) 
```

可以用 vn.x 代替。因此，通过简单地引用 vn 和 vt 的适当成员，可以使函数的最后三行更加清晰：

```
return new Point(vn.x + vt.x, vn.y + vt.y); 
```

我对ActionScript不够熟悉，不知道是否有更方便的方式来表达矢量加法，但最好直接表达矢量加法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-06T22:52:53.737

it's untested, but this should reflect your velocity

```
private function reflectVectors(p1 : Point, p2 : Point) : Point
{
    // get the normalized normal
    var wallNorm:Point = p2.clone();
    wallNorm.normalize(1);

    // v1 = v - 2 * (v.n).n
    var dot:Number = p1.x * wallNorm.x + p1.y * wallNorm.y;
    var diff:Point = wallNorm.clone();
    diff.normalize(dot * -2);
    return p1.add(diff);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T23:51:31.847

如果它适用于垂直，也许 `wallvec`是不正确的。你有没有打印出`wallvec` 其他值？

**编辑**`P1`：你能在is`(1, 0)`和`P2`is时提供所有的向量值`(0, 1)`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T00:00:30.547

我认为答案可能是关于“（即法线可能朝另一个方向突出）”的部分。如果法线指向“进入”墙壁，则反射将*穿过*墙壁，而不是您期望的方向。

# java - 用于多色文本的 Java 图形库

> ID：395599
> 
> 赞同：-1
> 
> 时间：2008-12-27T23:44:33.840
> 
> 标签：java, graphics

我想知道在 Java 中处理多色文本的推荐库或程序。我目前对 java.awt.Graphics 的使用虽然是函数，但似乎比必要的要复杂一些。

主要问题涉及颜色的频繁变化，每当需要新颜色时创建一个新的 java.awt.Colour() 对象（它通常不是预定义的值之一。）我已经跟踪了以前使用的 rgb 值，但是对于我绘制的每个字符，颜色可能会更改为唯一值：

```
java.awt.Color colorRender = new java.awt.Color(rgb);
g.setColor(colorRender); 
```

我还在我的代码上运行了一个分析器，并在极端情况下确定了一个次要瓶颈。我怀疑它可能是用于绘制单个字符的方法，但在确定所述字符时可能会有开销：

```
char[] c = new char[1]; // Created once for many uses
/* ... */
g.drawChars(charRender, 0, 1, x, y); 
```

我看过 BufferedImage 类——虽然它非常适合像素级图形，但它不直接支持绘制字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T01:46:38.227

我假设您正在将文本渲染到任意组件（通过 paintComponent()），而不是尝试修改 JTextPane、JLabel 或其他预先存在的小部件中的文本颜色。

如果是这种情况，您应该考虑使用[AttributedString](http://java.sun.com/javase/6/docs/api/java/text/AttributedString.html)和[TextAttribute](http://java.sun.com/javase/6/docs/api/java/awt/font/TextAttribute.html)。这些允许您为字符串中的各种字符范围分配不同的样式（颜色、字体等），然后使用 Graphics.drawString(...) 渲染整个字符串。这样，底层图形子系统将在渲染期间处理对图形状态的任何必要更改，从而使您的代码更具可读性，并且可能更快。

[这](http://academicjava.com/Java_help/Tutorial_Examples_Graphics_12.html)是一个示例用法。

当然，正如其他人所提到的，您还应该缓存您的 Color 对象，而不是一遍又一遍地重新创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T00:15:01.563

不是一个真正的答案，但如果您认为/衡量创建大量 Color 对象是性能瓶颈，您可以用您自己的缓存已创建颜色的工厂方法替换对 new Color(rgb) 的调用。（我假设 Colors 类是不可变的 - 看起来是这样）

因此，添加一个带有（静态）方法 getColor(rgb) 方法的 ColorsFactory 类，该方法缓存已创建的颜色。您可以简单地将所有颜色放在地图 rgb -> Color(rgb) 中并永远保留它们，或者您可以尝试创建缓存以删除不经常使用的颜色（很多库都可以这样做） - 有点取决于你的程序的使用方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T00:23:51.017

[试试JIDE](http://jidesoft.com/products/oss.htm)组件的开源部分。这包括一个名为 StyledLabel 的类，它是一个支持多色字体的 Swing JLabel。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T01:42:50.530

读者更新：

*   实际问题是由一个经常调用的方法引发运行时异常并使用该异常返回默认值引起的。我更改了此方法的代码以提前避免异常，如果它仍然发生，让调用函数处理它们。
*   由于默认值没有那么有用，我添加了代码以跳过渲染大多数这些字符。

# windows - 是否有（免费）Windows 测试/虚拟打印设备？

> ID：395617
> 
> 赞同：4
> 
> 时间：2008-12-28T00:15:49.613
> 
> 标签：windows, printing, testing, device

我们正在创建一个批处理应用程序，它将其文档（Java Jasperreports）直接发送到在 Windows 服务器上运行的打印机设备。

为了测试应用程序并测量性能，我们在哪里寻找测试或虚拟 Windows 打印设备。该设备不会打印到实际打印机，而是以这样的方式模拟打印机设备，即可以配置其缓冲区、每分钟打印的页数等，并可以生成有关打印页数的报告。

在网络上找到的唯一测试设备打印为 pdf 文件，但所描述的系统似乎很难找到。它存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T00:22:08.057

一个快速的谷歌发现了这个： http: [//www.mabuse.de/tech-vprinter.mhtml](http://www.mabuse.de/tech-vprinter.mhtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T00:19:10.230

我不确定它是否会为您提供所需的所有报告，但您可以在 Windows 上暂停任何已安装的打印机，它只会将作业假脱机到队列中，而不向实际打印机发送任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T00:21:52.347

Adobe PDF 打印机

# c# - 在 C# 中使用 if/else 和 switch-case 有什么显着区别吗？

> ID：395618
> 
> 赞同：253
> 
> 时间：2008-12-28T00:16:47.800
> 
> 标签：c#, .net, switch-statement

在 C#中使用`switch`语句与使用语句的好处/缺点是什么。`if/else`除了代码的外观之外，我无法想象会有那么大的不同。

产生的 IL 或相关的运行时性能有什么根本不同的原因吗？

### 相关：[什么更快，打开字符串或 elseif 类型？](https://stackoverflow.com/questions/94305/what-is-quicker-switch-on-string-or-elseif-on-type)

* * *

## 回答 #1

> 赞同：390
> 
> 时间：2008-12-28T08:06:05.887

SWITCH 语句仅在调试或兼容模式下生成与 IF 相同的程序集。在发布时，它将被编译成跳转表（通过 MSIL 'switch' 语句）- 这是 O(1)。

C#（与许多其他语言不同）也允许打开字符串常量——这有点不同。为任意长度的字符串构建跳转表显然是不切实际的，因此大多数情况下这种开关将被编译成 IF 堆栈。

但是如果条件的数量足以覆盖开销，C# 编译器将创建一个 HashTable 对象，用字符串常量填充它并在该表上进行查找，然后跳转。哈希表查找不是严格的 O(1) 并且具有明显的常数成本，但是如果案例标签的数量很大，它将比比较 IF 中的每个字符串常数要快得多。

综上所述，如果条件数超过5个左右，则优先选择SWITCH而不是IF，否则使用看起来更好的任何东西。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2008-12-28T01:06:51.880

通常（考虑到所有语言和所有编译器）switch 语句有时会比 if / else 语句更有效，因为编译器很容易从 switch 语句生成跳转表。给定适当的约束条件，可以对 if / else 语句做同样的事情，但这要困难得多。

在 C# 的情况下，这也是正确的，但出于其他原因。

对于大量字符串，使用 switch 语句有显着的性能优势，因为编译器将使用哈希表来实现跳转。

用少量的琴弦，两者的性能是一样的。

这是因为在这种情况下，C# 编译器不会生成跳转表。相反，它会生成相当于 IF / ELSE 块的 MSIL。

有一个“switch statement”MSIL指令，当jitted时会使用跳转表来实现switch语句。但是，它仅适用于整数类型（这个问题询问字符串）。

对于少量字符串，编译器生成 IF / ELSE 块比使用哈希表更有效。

当我最初注意到这一点时，我假设因为 IF / ELSE 块与少量字符串一起使用，所以编译器对大量字符串进行了相同的转换。

这是错误的。“IMA”很友善地向我指出了这一点（嗯……他对此并不友善，但他是对的，我错了，这是重要的部分）

我还对 MSIL 中缺少“switch”指令做出了一个愚蠢的假设（我想，如果有 switch 原语，他们为什么不将它与哈希表一起使用，所以一定没有 switch 原语。 ...）。这既是错误的，对我来说也是非常愚蠢的。'IMA' 再次向我指出了这一点。

我在这里进行了更新，因为它是评分最高的帖子，也是公认的答案。

但是，我将其设为 Community Wiki，因为我认为我不应该因为错误而获得 REP。如果您有机会，请为“ima”的帖子投票。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-12-28T00:22:37.697

编译器会将几乎所有内容优化为相同的代码，但差异很小（Knuth，有人吗？）。

不同之处在于 switch 语句比 15 个 if else 语句串在一起更清晰。

朋友不要让朋友堆叠 if-else 语句。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2008-12-28T06:27:55.540

选择的三个理由`switch`：

*   针对本机代码的编译器通常可以将 switch 语句编译为**一个条件分支和一个间接跳转**，而`if`s 序列需要**一系列条件分支**。根据案例的密度，已经写了很多关于如何有效地编译案例陈述的学术论文。有些是从[lcc 编译器页面](http://www.cs.princeton.edu/software/lcc/)链接的。（Lcc 拥有用于开关的更具创新性的编译器之一。）

*   switch 语句是**相互排斥的选项中的一种选择，** switch 语法**使这个控制流对程序员**来说比 if-then-else 语句的嵌套更透明。

*   在某些语言中，包括 ML 和 Haskell，**编译器会检查您是否遗漏了任何情况**。我将此功能视为 ML 和 Haskell 的主要优势之一。我不知道 C# 是否可以做到这一点。

轶事：在他获得终身成就奖的演讲中，我听到托尼·霍尔说，在他职业生涯中所做的所有事情中，他最引以为豪的有三件事：

*   发明快速排序
*   发明 switch 语句（托尼称之为`case`语句）
*   开始和结束他在工业界的职业生涯

我**无法想象没有`switch`**.

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-12-28T00:20:53.783

实际上，switch 语句更有效。编译器会将其优化为使用 if/else 语句无法找到的查找表。不利的一面是 switch 语句不能与变量值一起使用。
你不能这样做：

```
switch(variable)
{
   case someVariable
   break;
   default:
   break;
} 
```

它一定要是

```
switch(variable)
{
  case CONSTANT_VALUE;
  break;
  default:
  break;
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2009-10-15T22:32:16.880

我没有看到其他人提出（显而易见的？）观点，即 switch 语句的假定效率优势取决于各种情况的可能性大致相同。在其中一个（或几个）值更有可能的情况下，if-then-else 阶梯可以更快，方法是确保首先检查最常见的情况：

因此，例如：

```
if (x==0) then {
  // do one thing
} else if (x==1) {
  // do the other thing
} else if (x==2) {
  // do the third thing
} 
```

对比

```
switch(x) {
  case 0: 
         // do one thing
         break;
  case 1: 
         // do the other thing
         break;
  case 2: 
         // do the third thing
         break;
} 
```

如果 x 90% 的时间为零，则“if-else”代码的速度可能是基于开关的代码的两倍。即使编译器将“开关”变成某种聪明的表驱动 goto，它仍然不会像简单地检查零一样快。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-12-28T00:22:54.870

通常它看起来会更好 - 即更容易理解正在发生的事情。考虑到性能优势充其量是极少的，代码的视图是最重要的区别。

因此，如果 if/else 看起来更好，请使用它，否则使用 switch 语句。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-28T04:09:01.560

附带话题，但我经常担心（并且更经常看到）`if`/`else`和`switch`语句在太多情况下变得太大。这些通常会损害可维护性。

常见的罪魁祸首包括：

1.  在多个 if 语句中做太多事情
2.  比人工分析的案例陈述更多
3.  if 评估中的条件太多，无法知道要查找的内容

修理：

1.  提取到方法重构。
2.  使用带有方法指针的 Dictionary 而不是 case，或者使用 IoC 来增加可配置性。方法工厂也很有帮助。
3.  提取条件到自己的方法

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-07-31T17:12:38.057

如果您只是使用 if 或 else 语句，则基本解决方案正在使用比较？操作员

```
(value == value1) ? (type1)do this : (type1)or do this; 
```

您可以在 switch 中执行 or 例程

```
switch(typeCode)
{
   case TypeCode:Int32:
   case TypeCode.Int64:
     //dosomething here
     break;
   default: return;
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-10-27T06:13:39.660

根据此链接，使用 switch 和 if 语句的迭代测试的[IF 与 Switch](http://www.blackwasp.co.uk/SpeedTestIfElseSwitch.aspx)比较就像 1,000,000,000 次迭代，**Switch** Statement 花费的时间 = **43.0s** & **If Statement** = **48.0s**

这实际上是**每秒 20833333**次迭代，所以，我们是否真的需要更多地关注，

PS：只是为了知道一小部分条件的性能差异。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-28T06:21:32.790

这实际上并不能回答您的问题，但鉴于编译版本之间几乎没有区别，我会敦促您以最能描述您的意图的方式编写代码。编译器不仅有更好的机会按照您的预期进行操作，而且还可以让其他人更容易维护您的代码。

如果您的意图是基于一个变量/属性的值来分支您的程序，那么 switch 语句最能代表该意图。

如果您的意图是根据不同的变量/属性/条件来分支您的程序，那么 if/else if 链最能代表该意图。

我承认 cody 关于人们忘记了 break 命令的说法是正确的，但我几乎同样经常看到人们在执行复杂的 if 块时会弄错 {}，所以应该在条件语句中的行不是。这是我*总是*在 if 语句中包含 { } 的原因之一，即使其中只有一行。不仅更容易阅读，而且如果我需要在条件中添加另一行，我不能忘记添加它。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-12-28T11:54:36.237

兴趣问题。几周前在工作中出现了这个问题，我们通过编写示例片段并在 .NET Reflector 中查看它找到了答案（reflector 太棒了！！我喜欢它）。

这就是我们所发现的：除字符串之外的任何内容的有效 switch 语句都被编译为 IL 作为 switch 语句。然而，如果它是一个字符串，它在 IL 中被重写为 if/else if/else。因此，在我们的案例中，我们想知道 switch 语句如何比较字符串，例如区分大小写等，并且反射器很快给了我们一个答案。知道这一点很有用。

如果要对字符串进行区分大小写的比较，则***可以***使用 switch 语句，因为它比在 if/else 中执行 String.Compare 更快。（编辑：阅读[What is faster, switch on string or elseif on type?](https://stackoverflow.com/questions/94305/what-is-quicker-switch-on-string-or-elseif-on-type)对于一些实际的性能测试）但是，如果您想做不区分大小写的操作，那么最好使用 if/else，因为生成的代码并不漂亮。

```
switch (myString.ToLower())
{
  // not a good solution
} 
```

最好的经验法则是在有意义的情况下（认真地）使用 switch 语句，例如：

*   它提高了代码的可读性
*   您正在比较一系列值（浮点数、整数）或枚举

如果您需要操纵该值以输入 switch 语句（创建一个临时变量以进行切换），那么您可能应该使用 if/else 控制语句。

**更新：**

实际上最好将字符串转换为大写（例如`ToUpper()`），因为与`ToLower()`. 这是一个微优化，但是在一个紧密的循环中它可能是有用的。

* * *

**一点旁注：**

要提高 switch 语句的可读性，请尝试以下操作：

*   把最有可能的分支放在第一位，即最常访问的分支
*   如果它们都可能发生，请按字母顺序列出它们，以便更容易找到它们。
*   永远不要对最后剩下的条件使用默认的包罗万象，这是懒惰的，并且会在代码的生命周期中导致问题。
*   使用默认的包罗万象来断言未知条件，即使它极不可能发生。这就是断言的好处。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-10-15T21:30:20.063

switch 语句肯定比 if else if 更快。BlackWasp 提供了速度测试

[http://www.blackwasp.co.uk/SpeedTestIfElseSwitch.aspx](http://www.blackwasp.co.uk/SpeedTestIfElseSwitch.aspx)

- 看看这个

但很大程度上取决于您要考虑的可能性，但我会尽可能使用 switch 语句。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-28T00:21:45.887

我认为不仅仅是 C#，而是所有基于 C 的语言：因为开关仅限于常量，所以可以使用“跳转表”生成非常有效的代码。C 案例确实是一个很好的旧 FORTRAN 计算 GOTO，但 C# 案例仍然是针对常量进行测试。

优化器无法生成相同的代码。考虑，例如，

```
if(a == 3){ //...
} else if (a == 5 || a == 7){ //...
} else {//...
} 
```

因为这些是复合布尔值，所以生成的代码必须计算一个值，然后短路。现在考虑等价的

```
switch(a){
   case 3: // ...
    break;
   case 5:
   case 7: //...
    break;
   default: //...
} 
```

这可以编译成

```
BTABL: *
B3:   addr of 3 code
B5:
B7:   addr of 5,7 code
      load 0,1 ino reg X based on value
      jump indirect through BTABL+x 
```

因为您隐含地告诉编译器它不需要计算 OR 和相等测试。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-28T00:45:37.710

我的 cs 教授建议你不要切换语句，因为人们经常忘记休息或错误地使用它。我不记得他到底说了什么，但在查看一些显示 switch 语句示例的开创性代码库（几年前）也有很多错误。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-10-02T13:48:25.783

我刚刚注意到的是，您可以结合 if/else 和 switch 语句！在需要检查先决条件时非常有用。

```
if (string.IsNullOrEmpty(line))
{
    //skip empty lines
}
else switch (line.Substring(0,1))
{
    case "1":
        Console.WriteLine(line);
        break;
    case "9":
        Console.WriteLine(line);
        break;
    default:
        break;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-08-29T15:52:42.860

我认为 Switch 比 If 条件更快，看看是否有类似的程序：

编写一个程序输入任意数字（1 - 99 之间）并检查它在哪个插槽 a）1 - 9 然后插槽 1 b）11 - 19 然后插槽 2 c）21-29 然后插槽 3 依此类推直到 89- 99

如果你必须做很多条件，但儿子 Switch Case 你必须输入

> 开关（无/10）
> 
> 在案例 0 = 1-9 ，案例 1 = 11-19 等等

会很容易

还有更多这样的例子！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-04-25T01:49:54.417

switch 语句基本上是相等的比较。键盘事件比 switch 语句具有很大的优势，因为它易于编写和读取代码，然后 if elseif 语句会，缺少 {bracket} 也会带来麻烦。

```
char abc;
switch(abc)
{
case a: break;
case b: break;
case c: break;
case d: break;
} 
```

如果（theAmountOfApples 大于 5 && theAmountOfApples 小于 10）如果（theAmountOfApples 大于 10 || theAmountOfApples == 100）出售您的苹果，则 if elseif 语句适用于多于一种解决方案。我不写 c# 或 c++，但我在学习 java 之前确实学习过它，它们是接近的语言。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-06-19T09:43:43.993

switch 语句的一个可能缺点是缺少多个条件。您可以为 if (else) 设置多个条件，但不能在 switch 中设置具有不同条件的多个 case 语句。

Switch 语句不适用于超出简单布尔方程/表达式范围的逻辑运算。对于那些布尔方程/表达式，它非常适合，但不适用于其他逻辑运算。

您对 If 语句中可用的逻辑有更多的自由，但如果 If 语句变得笨拙或处理不当，可读性可能会受到影响。

根据您所面临的情况，两者都有。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-10-18T02:30:10.533

我的 2 美分就可以了。大多数时候，如果性能不是一个标准，那么它更多的是关于代码的可读性。如果 if/else 语句的数量太多，比使用 switch 语句更好。

# haskell - 在 Haskell 中保存图表

> ID：395628
> 
> 赞同：9
> 
> 时间：2008-12-28T00:26:08.797
> 
> 标签：haskell, serialization, graph-theory, directed-graph

我可以轻松地为有向图的节点定义数据类型。

```
data Node = Node String [Node] derving (Show, Read) 
```

我可以使用 show 函数将图形保存到文件中，然后使用 read 恢复它。但是，show 无法应对循环。有没有一种简单的方法来保存和恢复图表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T07:02:47.030

据我所知不是。您必须编写一个图形遍历函数。

首先，决定在哪里打破循环。在这种情况下，这很简单：使用节点名称（假设它们在图中是唯一的）。对于更复杂的结构，例如将节点和边作为单独类型的图，您必须决定是存储边与节点、节点与边，还是将节点和边完全分开。

然后枚举图中的所有节点。在这种情况下，显而易见的方法是遍历有限映射中的图形收集节点（请参阅[Data.Map](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Map.html)）。然后将每个节点存储为一个名称，后跟其他节点名称的列表。

恢复图形意味着使用“打结”模式。将存储的图读入 [(String, [String])] 的结构。然后可以使用以下代码重构原始图：

```
import qualified Data.Map as M

data Node = Node String [Node]

instance Show Node where
   show (Node name others) = "Node " ++ show name ++ 
         " " ++ show (map nodeName others)
      where nodeName (Node n _) = n

restoreGraph :: [(String, [String])] -> M.Map String Node
restoreGraph pairs = table
   where
      table = M.fromList $ map makeNode pairs
      makeNode (name, others) = (name, Node name $ map findNode others)
      findNode str = fromJust $ M.lookup str table 
```

注意相互递归：table调用makeNode，调用findNode，调用table。 [多亏了惰性评估，这才做对了](https://stackoverflow.com/questions/357956/explanation-of-tying-the-knot)。

**编辑：**代码现在经过测试并略微扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-11T17:25:39.633

是和不是。它可以通过你的节点类型结构的领域知识和定义一些你可以测试的平等概念，结合迄今为止看到的节点列表或映射来恢复共享来完成。在病理情况下，GHC 中有一个 StableName 的概念来构建这样的概念。

在另一个方面，Matt Morrow 一直在做一些工作，使用他方便的真空库以汇编语言 .S 文件的形式提取任意循环数据。因此，无论是那个还是真空可能都适合您的需求。

一般来说，避免目前在地图中看到的巫毒和跟踪节点可能是最合理和可维护的解决方案。

# java - 为我的博客/blogspot 博客添加漂亮的 java 代码格式需要采取哪些步骤？

> ID：395630
> 
> 赞同：2
> 
> 时间：2008-12-28T00:35:40.913
> 
> 标签：java, html, formatting, blogger, blogspot

我正在寻找将 java 代码格式添加到我的 blogspot 博客的一系列步骤。

我真的在寻找一个假人指南 - 如果他们在地板上的一张纸上找到它，那么清洁工可以遵循它如此简单的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-28T00:51:45.390

我使用[Google 美化](http://code.google.com/p/google-code-prettify/)脚本（StackOverflow 也使用它），在这里你可以找到一个很好的指南来使用它与博主：

*   [Blogger 中的源代码高亮显示](http://sunday-lab.blogspot.com/2007/10/source-code-high-light-in-blogger.html)

您还有其他选择，例如[SyntaxHighlighter](http://code.google.com/p/syntaxhighlighter/)，[在这里](http://urenjoy.blogspot.com/2008/10/publish-source-code-in-blogger.html)您还可以找到将它与博主（或任何其他博客软件）一起使用的指南

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T01:20:56.347

看看 Syntax Highlighter，也在 google 代码上，Java 是众多支持的语言之一

[http://code.google.com/p/syntaxhighlighter/](http://code.google.com/p/syntaxhighlighter/)

这是 Scott Hanselman 关于如何安装和使用的帖子：[http ://www.hanselman.com/blog/BestCodeSyntaxHighlighterForSnippetsInYourBlog.aspx](http://www.hanselman.com/blog/BestCodeSyntaxHighlighterForSnippetsInYourBlog.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-15T21:41:17.770

SyntaxHighlighter 怎么样？

SyntaxHighlighter 是一个用 JavaScript 开发的功能齐全的自包含代码语法荧光笔。

支持：

ActionScript3 Bash/shell ColdFusion C# C++ CSS Delphi Diff Erlang Groovy JavaScript Java JavaFX Perl PHP 纯文本 PowerShell Python Ruby Scala SQL Visual-Basic XML

[http://alexgorbatchev.com/SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter) - 主页

# php - PHP中的URL映射？

> ID：395650
> 
> 赞同：19
> 
> 时间：2008-12-28T01:02:26.117
> 
> 标签：php, apache, rest

我来自 Java 背景，使用任何基于 servlet 的技术，将一系列 URL（例如 /reports/ *、 /secure/* .do）映射到指定的 servlet 是微不足道的。现在我对 PHP 不太熟悉，但我还没有看到任何与 PHP（或 mod_php）做同样事情的东西。我完全有可能遗漏了一些简单的东西。

你如何在 PHP 中做到这一点？

我想这样做的原因之一是“一次性”URL。现在这可以通过 GET 参数（如 MD5 哈希令牌）来完成，但我对将 URL 映射作为解决许多问题的一般解决方案感兴趣。

使用这样的东西的另一个重要原因是拥有 RESTful URL。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-28T01:11:35.413

使用 Apache，您可以使用 mod_rewrite 为您的 php 页面设置 URL 重写，请查看以下资源：

*   [mod_rewrite：URL 重写初学者指南](http://www.sitepoint.com/article/guide-url-rewriting/)
*   [模块 mod_rewrite](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html)
*   [URL重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-28T02:19:32.467

除了使用 mod_rewrite，正如已经报道的那样，您可以通过一个简单的技巧来做一些魔术。

在 .htaccess 中放入一个像这样的指令

```
<FilesMatch "^servlet$"> 
  ForceType application/x-httpd-php
</FilesMatch> 
```

用您选择的正则表达式替换 ^servlet$（它将是您的调度员的名称）

文件 servlet 应该与此类似

```
<?php
  $data = explode('/',$HTTP_SERVER_VARS['PATH_INFO']); // $data[0] always empty
  $fileToInclude = $data[1].'.php';
  if (file_exists($data[1]) {
     $params=array_slice($data,2); // you can do here something more sophisticated
                                   // for example sanitize parameters or assemble 
                                   // an hash
     include ($fileToInclude);     //Think to this file as a servlet
  } else {
    // issue a 404 error, maybe one of the 500 series
  }
?> 
```

url 可以具有以下形式：[http://yoursite/servlet/reports/sales/2009](http://yoursite/servlet/reports/sales/2009) 您还可以 使用 .htacces 和调度程序访问[http://yoursite/reports/sales/2009形式。](http://yoursite/reports/sales/2009)

此方法的优点是不需要 mod_rewrite，因为 FilesMatch (1.3+) 和 ForceType (2.0+) 在 apache 核心中

请参阅
[http://httpd.apache.org/docs/2.2/mod/core.html#forcetype](http://httpd.apache.org/docs/2.2/mod/core.html#forcetype)
[http://httpd.apache.org/docs/2.2/mod/core.html#filesmatch](http://httpd.apache.org/docs/2.2/mod/core.html#filesmatch)
[http://www .devarticles.com/c/a/Apache/Using-ForceType-For-Nicer-Page-URLs/1/](http://www.devarticles.com/c/a/Apache/Using-ForceType-For-Nicer-Page-URLs/1/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-31T09:12:18.403

我使用的一个技巧是 $ _ SERVER['PATH_INFO'] （我认为你需要 Apache）。这将为您提供 PHP 文件扩展名之后的所有信息。

```
http://www.example.com/page.php/rest/url 
```

$ _ SERVER['PATH_INFO'] 将包含：

```
"/rest/url" 
```

然后页面可以重定向、处理一些代码或基于该字符串的任何内容。

如果您无权访问 Apache Configs 或 .HTACCESS，这很好，此外，如果情况发生变化，您可以将 page.php 设置为静态文件放置的目录名称。哦，PHP 不需要有 .php 扩展名。我过去使用过 .api 或类似的东西。

```
http://www.example.com/worker.api/rest/url 
```

这似乎对我很有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T01:08:29.973

不能在 PHP 中完成。请注意，在 Java 中，映射 URL 的也不是 Servlet，而是 servlet 容器（例如 Tomcat）的配置。

[通过使用URL 重写](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)，您可以为 PHP 应用程序实现类似的结果。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-28T01:10:17.333

这听起来像是 mod_rewrite 通常用于（作为 Apache 的一部分，而不是 PHP 的一部分）。我还没有听说过 PHP 中有任何东西可以实现这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-28T09:31:04.593

Apache 以外的 HTTP 服务器的选项：

如果您使用的是 Lighttpd，那么他们的 mod_rewrite 模块具有完全不同的配置语法。有关详细信息，请参阅[http://redmine.lighttpd.net/wiki/1/Docs:ModRewrite](http://redmine.lighttpd.net/wiki/1/Docs:ModRewrite)。

如果您使用的是 IIS，那么您需要 ISAPI_Rewrite ( [http://www.isapirewrite.com/](http://www.isapirewrite.com/) ) 或 URL 重写模块 ( [http://learn.iis.net/page.aspx/460/using-url-rewrite-模块/](http://learn.iis.net/page.aspx/460/using-url-rewrite-module/)）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-31T04:28:03.253

正如其他人所提到的，您可以使用 mod_rewrite 来执行此操作，但您也可以使用许多 Web 框架使用的前端控制器设计模式。查看可用于 MVC的[Horde 路由](http://dev.horde.org/routes/)或[Zend_Controller_Router_Rewrite ，](http://zendframework.com/manual/en/zend.controller.router.html)

# wpf - ListBoxItems 上的 DataBound WPF ListBox 样式

> ID：395651
> 
> 赞同：1
> 
> 时间：2008-12-28T01:04:09.453
> 
> 标签：wpf, listbox, styles, databound

我有一个`ListBox`在开发过程中我有`ListBox`硬编码和样式的项目。这就是项目的样式。

```
<ComboBoxItem Width="Auto" Height="Auto" Content="ComboBoxItem" >
    <ComboBoxItem.Foreground>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF6F6F6F" Offset="0"/>
            <GradientStop Color="#FFD1D1D1" Offset="1"/>
        </LinearGradientBrush>
    </ComboBoxItem.Foreground>
</ComboBoxItem> 
```

但是当我将`ItemsSource`属性设置为数据对象时，它说我的 xaml 无效。大概是因为它是通过 XAML 添加一个项目。

`Style`将每个项目绑定到数据源后，如何为每个项目创建，如上面的 XAML 中所述？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T01:11:33.167

您可以通过使用样式来实现这一点：

```
<ComboBox ItemsSource="{Binding}">
  <ComboBox.Resources>
    <Style TargetType="{x:Type ComboBoxItem}">
      <Setter Property="Foreground">
        <Setter.Value>
          <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF6F6F6F" Offset="0"/>
            <GradientStop Color="#FFD1D1D1" Offset="1"/>
          </LinearGradientBrush>
        </Setter.Value>
      </Setter>
    </Style>
  </ComboBox.Resources>
</ComboBox> 
```

希望这可以帮助！

# php - 是否有与 Java URL 过滤器/拦截器等效的 PHP？

> ID：395652
> 
> 赞同：2
> 
> 时间：2008-12-28T01:06:50.977
> 
> 标签：php, security

我喜欢 Java servlet 的一件事是使用不显眼的过滤器和拦截器。基本上，您可以使用这些东西来加强安全性，在 上添加额外信息`HttpRequest`，进行监控或其他任何事情。

PHP中有一些等价物吗？

从我目前看到的情况来看，您似乎倾向于在所有页面中包含某个文件，该文件将执行诸如启动会话、强制安全等操作。不是那么优雅。那是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T02:01:39.850

PHP 没有提供任何等效的 servlet API，因此快速回答是您需要自己实现逻辑。

你有很多关于如何做到这一点的空间。实践是在你的应用程序中创建一个特定的控制流，从一个文件开始，所有请求都通过该文件进行初始处理，该文件将初始化一些值，例如常量、文件路径等，之后你开始解析请求并生成请求的内容。

显然，设置一些主文件并解析请求非常快。过去，我们最大限度地采用了“一个 .php 文件来统治它们”的做法。您通常会有一个包含页眉、页脚的文件，并且基于一些传入的 GET 或 POST 参数，您还可以包含一些其他页面，这些页面会生成或显示内容。您可以轻松理解事情会变得多么混乱！

我的建议是，在你开始尝试自己开发一些东西之前，尝试一些已经存在的现有框架并尽快开始生产。我假设 PHP 不是您的主要专业知识，并且您正在购买一个可以快速启动和运行并快速掌握其完整范围的框架。其中两个，[CodeIgniter](http://codeigniter.com/)和[CakePHP](http://www.cakephp.org/)，对于 PHP 来说就像 WordPress 对于博客的框架一样——功能强大、简单而有效。

如果框架不符合您的喜好，您绝对应该阅读[The no-framework PHP MVC framework](http://toys.lerdorf.com/archives/38-The-no-framework-PHP-MVC-framework.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T02:44:53.070

不，也许是一个接近的电话。

有一个配置指令来指示 php 在你的文件中自动包含一个文件

```
auto_prepend_file  string 
```

这对于编写类似的东西很有用。

您应该仔细阅读自 php 5.2（可用的最后一个版本）以来嵌入的过滤器库。
[http://it.php.net/manual/en/filter.configuration.php](http://it.php.net/manual/en/filter.configuration.php)。我还没有使用它，但它似乎很有趣。

顺便说一句，框架提示是有价值的。虽然我不喜欢它们（通常我必须与框架而不是我分配的问题作斗争）。

# c# - WPF：如何使用数据触发器（或等效项）交换 Listview 单元格内容

> ID：395663
> 
> 赞同：3
> 
> 时间：2008-12-28T01:20:43.460
> 
> 标签：c#, .net, wpf, xaml, datatrigger

我有一个实现 ListView 的 WPF 应用程序。我想根据行所代表的数据类型在其中一列中显示图像（一个小图标）。有点像您在 Windows 资源管理器中看到的显示。

我在 XAML 的其他地方使用 DataTriggers，似乎可以使用类似的方法来换出整个单元格内容，但我找不到任何人这样做的示例。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T21:25:40.283

为此，有三种常用技术。

**1）数据触发器：**

```
<DataTemplate x:Key="ImageColumn">
    <Grid>
        <Image x:Name="img" Source="MyImage.png"/>
        <Rectangle x:Name="rect" Fill="Red" Visibility="Hidden"/>
    </Grid>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding TriggerProperty}" Value="2">
            <Setter TargetName="rect" Property="Visibility" Value="Visible"/>
            <Setter TargetName="img" Property="Visibility" Value="Hidden"/>
        </DataTrigger>
        <!--etc...-->
    </DataTemplate.Triggers>
</DataTemplate> 
```

**2）价值转换器：**

```
public class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string strVal = value as string;
        switch (strVal)
        {
            case "2":
                Rectangle rect = new Rectangle();
                rect.Fill = Brushes.Red;
                return rect;

            default:
                Image img = new Image();
                ImageSourceConverter s = new ImageSourceConverter();
                img.Source = (ImageSource)s.ConvertFromString("MyImage.png");
                return img;
        }
    }
} 
```

**3）MVVM（模型-视图-视图模型）：**

创建一个包装数据模型的 ViewModel 类。此 ViewModel 将评估数据模型中的属性并将它们与逻辑组合成一个新属性。

```
public UIElement Icon
{
    get
    {
        if (TriggerProperty == "2")
        {
            Rectange rect = new Rectangle();
            rect.Fill = Brushes.Red;
            return rect;
        }

        else
        {
            Image img = new Image();
            ImageSourceConverter s = new ImageSourceConverter();
            img.Source = (ImageSource)s.ConvertFromString("MyImage.png");
            return img;
        }
    }
} 
```

和 XAML：

```
<DataTemplate x:Key="ImageColumn">
    <ContentControl Content="{Binding Icon}"/>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T04:39:24.010

过去，我使用**ValueConverters**来提供我想要显示的图像，但是我对为此目的使用 DataTriggers 的可能性很感兴趣。

[Beatriz Stollnitz在这里](http://www.beacosta.com/blog/?p=29)发布了一个类似问题的解决方案。

# objective-c - 在实现中创建方法而不在标头中定义

> ID：395667
> 
> 赞同：4
> 
> 时间：2008-12-28T01:23:26.450
> 
> 标签：objective-c, encapsulation

如何在类的@implementation 中创建一个方法而不在@interface 中定义它？

例如，我有一个构造函数，它进行一些初始化，然后从文件中读取数据。我想将文件读取代码分解为一个单独的方法，然后从构造函数中调用该方法。我不想在标头中定义这个方法，因为它只对这个@implementation 上下文是私有的。

这可能吗？

这是我的例子。我有一个从文件中读取 Todo 任务列表的小程序。

这是@interface：

```
@interface TDTaskList : NSObject {
  NSString* name; // The name of this list.
  NSMutableArray* tasks;  // The set of tasks in this list.
}

-(id)initListOfName:(NSString*)aName;
-(NSArray*)loadListWithName:(NSString*)aName;

@end 
```

这是@implementation的一部分：

```
-(id)initListOfName:(NSString*)aName {
  if (self = [super init]) {
    name = aName;

    NSArray* aTasks = [self loadListWithName:aName];
    tasks = [NSMutableArray arrayWithArray:aTasks];
  }

  return self;
}

-(NSArray*)loadListWithName:(NSString*)aName {
  // TODO This is a STUB till i figure out how to read/write from a file ...

  TDTask* task1 = [[TDTask alloc] initWithLabel:@"Get the Milk."];
  TDTask* task2 = [[TDTask alloc] initWithLabel:@"Do some homework."];

  return [NSArray arrayWithObjects:task1, task2, nil];
} 
```

我想要做的是**不必**在界面中定义以下内容：

```
-(NSArray*)loadListWithName:(NSString*)aName; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-30T00:23:11.327

If you place the implementation of a method before any code that calls it you do not need to define it in the header.

So in this case put *loadListWithName:* in front of *initListOfName:* in the @implementation block and it will be good.

**Note:** Just because it is not defined in the header does not mean the method cannot be called by code outside of the object. Objective-C does not have private methods.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-28T10:25:00.397

As Andy hinted in the comments, you can use [Extensions](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/chapter_6_section_5.html#//apple_ref/doc/uid/TP30001163-CH20-SW2) (which look like a category without a name). The difference is that you *must* implement the methods declared in an extension whereas the compiler doesn't verify that you implement methods declared in a category.

.h:

```
@interface MyObject : NSObject
{
    NSNumber *number;
}
- (NSNumber *)number;
@end 
```

.m:

```
@interface MyObject ()
- (void)setNumber:(NSNumber *)newNumber;
@end

@implementation MyObject

- (NSNumber *)number
{
    return number;
}
- (void)setNumber:(NSNumber *)newNumber
{
    number = newNumber;
}
@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T01:30:12.303

您可以使用[类别](http://en.wikipedia.org/wiki/Objective-C#Categories)：

```
// In TDTaskList.m
@interface TDTaskList(TDTaskListPrivate)
-(id)initListOfName:(NSString*)aName;
-(NSArray*)loadListWithName:(NSString*)aName;
@end

@implementation TDTaskList(TDTaskListPrivate)

// implementation of initListOfName and loadListWithName ...

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T18:31:03.180

You have two reasonable options. Both were basically described already but IMHO were a bit unclear or even plain wrong.

Categories are not one of them as they are AFAIK meant for the entirely different purpose of breaking implementations into multiple source files.

*   Do as Nathan described above. Though he is wrong with his last assumption (private methods).*   Use a private method extension definition to allow forward referencing as follows:
    1.  remove the definition of loadListWithName from your header entirely
    2.  add the following into the source (.m) before the @implementation block

    ```
    @interface TDTaskList (PrivateMethods)
    -(NSArray*)loadListWithName:(NSString*)aName;
    @end

    @implementation ...

    ```

# java - 使用 Eclipse 从 Java 类中引用 Groovy 域类？

> ID：395675
> 
> 赞同：4
> 
> 时间：2008-12-28T01:39:30.660
> 
> 标签：java, eclipse, grails, groovy

如何使用 Eclipse 从 Java 类中引用 Groovy 域类？

我已将我的域类放入包中：

```
package com.me.myproject
public class Person {
    String name
    int age
} 
```

然后在我的 Java 类中我尝试引用`com.me.myproject.Person`. 这适用于`grails run-app`（命令行）但不适用于 Eclipse。Eclipse 无法解析 Groovy 域类。

我正在使用最新的 Groovy 和 Grails Eclipse 插件运行 Eclipse 3.4.1：

*   Grails Eclipse 功能 0.1.0 20081120_2330
*   Groovy 功能​​ 1.5.7.20081120_2330

我尝试将 Eclipse 默认输出文件夹设置为与 Groovy 编译器输出位置相同。我还尝试启用和禁用“禁用 Groovy 编译器生成类文件”设置。我也试过不把我的任何课程放在一个包里。这些都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-31T17:39:42.733

我也无法在 Eclipse 中完成这项工作。直到春天得到 groovy / grails eclipse 插件来做一些除了颜色编码之外的事情，你最好的选择是使用像 Intelij 这样的 IDE，它目前具有最好的 groovy 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T06:36:36.247

您尝试过[Groovy 插件](http://groovy.codehaus.org/Eclipse+Plugin)吗？它可能会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T18:00:19.090

虽然我还没有尝试过，但我相信您需要将 Domain 文件夹添加为 Java 构建路径中的 src 文件夹。

右键单击项目选择属性。单击 Java Build Path，然后单击 Source 选项卡。单击 add-folder 并确保您的 project/grails-app/domain 在路径中。

如果这不起作用，那么你是对的，我不确定问题是什么。

仅供参考，Spring-Source 是这样一个 Eclipse 赞助商，我期待在不久的将来有一个大大改进的 Eclipse 插件。但你是对的。目前，这很烦人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-18T14:26:12.940

我也无法使用 Groovy 和 Java 的相同输出文件夹使其工作，但如果您使用不同的输出文件夹，它似乎确实可以工作。

这就是我所做的。通过项目属性对话框：

1.  在**Groovy 项目属性**下，取消选中**禁用 Groovy 编译器生成类文件复选框** *（插件开发人员注意：请在复选框标签上使用正面措辞。“生成 Groovy 类文件”比“禁用禁用选项”更容易理解。）*
2.  在**Groovy 编译器输出位置**输入`web-app/WEB-INF/groovy-classes`
3.  在**Java Build Path -> Libraries**下添加 Groovy 类文件夹。

您现在应该可以使用从 Java 编译的 Groovy 类了。

我认为这更像是一种破解而不是解决方案，但它现在正在为我做这项工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T21:44:25.143

看来我参加这个聚会有点晚了，但我遇到了同样的问题。通过将项目转换为 Groovy 项目，我能够解决从 Java 类引用 Groovy 域类的问题。说明如下：

1.  右键单击项目资源管理器中的项目
2.  从**配置**菜单中选择**转换为 Groovy 项目**

 **我的环境如下：

*   Eclipse Kepler 服务版本 1，内部版本号：20130919-0819
*   Groovy-Eclipse 插件 2.9.0.xx-20130828-1400-e43-RELEASE
*   Grails IDE 3.4.0.201310051518-RELEASE（我不认为这是必要的）

最后，我没有**弄乱**任何“禁用 Groovy 编译器生成类文件”选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-12T02:48:14.410

请升级到 groovy-eclipse 插件的 V2，因为这个问题已经修复。该插件的 V2 不构建存根，并且在 Java 和 Groovy 之间的循环依赖方面没有任何问题。该插件现在附带一个修补 JDT 编译器的功能补丁，以便它可以原生地处理 groovy 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-09-06T19:33:04.560

我不确定引用文件或文件夹是否是好方法。您应该使用模块化。因此，您的域类将存储在单独的“项目”中。可以通过创建插件来做到这一点。[你可以在这里](http://www.nslms.com/2010/03/10/modularizing-your-grails-application-domain-classes/)找到很好的解释和源代码。

# objective-c - Obj C - 理解指针

> ID：395682
> 
> 赞同：2
> 
> 时间：2008-12-28T01:52:28.467
> 
> 标签：objective-c, oop

我在理解 Objective C 中的指针时有一段地狱般的时间。它们的行为不像我根据各种 C 教程所假设的那样。

例子：

```
// Define Name and ID
NSString *processName = [[NSProcessInfo processInfo] processName];
NSNumber *processID = [NSNumber numberWithInt:[[NSProcessInfo processInfo] processIdentifier]];

// Print Name and ID
NSLog(@"Process Name: %@  Process Identifier: %@", processName, processID); 
```

据我了解，processName 是一个指向 NSString 类型对象的指针。processID 是一个指向 NSNumber 类型对象的指针。当两者都在 NSLog() 中调用时，它们的名称前没有星号，因此应该返回指针值。为什么 Obj C 中没有“地址”字符？为什么这段代码有效？

感谢您的时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-28T02:24:19.523

目标 c 中的对象表示为指向包含所有对象数据的 c 结构的指针。如果对象是一个实际的结构体（而不是一个指向结构体的指针），它会使像传递对象作为方法参数这样的事情效率低得多。所以一旦你初始化一个对象：

```
NSString *aString = /* initial value */; 
```

您几乎总是只使用指针aString，而不是取消引用它（即*aString）。

NSLog() 函数中的 %@ 标记需要一个指针类型，并将调用该对象的描述方法以确定要输出的值。当对 NSString 对象调用 description 方法时，它会返回接收者，因此 %@ 标记被替换为输出中字符串的内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-28T02:19:17.197

`%@`格式字符串中的 告诉调用`NSLog`相关`-description`对象并将该字符串用作其显示值。如果您确实想要指针的地址，您应该使用`%x`或`%qx`在 64 位上。

# c++ - 你如何在单例和无名类之间进行选择？

> ID：395685
> 
> 赞同：3
> 
> 时间：2008-12-28T01:58:05.333
> 
> 标签：c++, singleton

我会使用这样的单例：

```
Singleton* single = Singleton::instance();
single->do_it(); 
```

我会使用这样的未命名类：

```
single.do_it(); 
```

我觉得单例模式除了具有可读的错误消息外，似乎与未命名的类相比没有任何优势。使用单例比使用未命名的类对象更笨拙：首先，客户端必须首先获取实例的句柄；其次，实现者`Singleton::instance()`可能需要考虑并发性。

那么为什么以及如何选择单例而不是未命名的类呢？

作为附录，尽管未命名类的明显定义可能是

```
class {
    // ...
}single; 
```

我也可以这样定义：

```
#ifndef NDEBUG
class Singleton__ {   // readable error messages,
#else
class {               // unnamed, clients can't instantiate
#endif
    // ...
}single; 
```

后一种方法具有可读的编译器错误消息的优点，但在调试模式下不是单例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T03:10:33.020

我认为最重要的原因是您不能将未命名的类放在命名空间范围内。因此，以下内容无效（gcc 接受，但警告。comeau 在严格模式下不接受）：

```
class { } single;
int main() { } 
```

的类型`single`没有链接，因为*无法*在另一个引用它的范围内声明它的名称（正是因为它没有名称）。但是使用它来声明`single`具有链接（此处*为*外部）的 是无效的（3.5/8）。`single`必须在没有链接的 main 中本地定义。您也不能将单个传递给函数模板，并且它不能具有静态数据成员（因为无法定义它们）。所有这些限制使它或多或少地不适用于单例的替代品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-28T09:45:11.303

当然，在 C++ 中使用单例对象的主要原因是通过在实例方法中使用“延迟构造”来控制初始化顺序？

例如，我的大部分代码都使用了一个记录器单例，日志消息被写入其中。这在许多个月前作为一个很好的旧“全局”开始，但是在被尝试在构建之前使用它之后被咬了，现在它是一个单例：

前...

```
logger.write("Something bad happened..."); // crash if logger not constructed 
```

...后

```
 Logger &getLogger()
 {
   static Logger logger_;
   return logger_;
 }

 getLogger().write("Something bad happened..."); 
```

我已经阅读了常规的“单身人士很糟糕”的帖子，但没有看到有人建议 C++ 的更好替代方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T02:34:54.027

您可以在标头中声明并在 cxx 中实现的单例类，因此可以跨 cxx 文件共享。对于未命名的类，您不能这样做，因为每个 cxx 都会尝试拥有自己的对象实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T02:11:05.060

像这样更改代码，即使它可能不应该影响代码生成也是一个糟糕的主意。迟早有人会做一个小的调整，在调试或发布中生成不同的代码，然后你会遇到无法在调试版本中复制的发布崩溃。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T09:20:15.193

虽然很方便，但单身人士通常[是个坏主意](http://misko.hevery.com/2008/08/17/singletons-are-pathological-liars/)。有关替换设计，请参阅[此页面](http://misko.hevery.com/2008/08/21/where-have-all-the-singletons-gone/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T12:30:43.293

从您的问题中，我可以看出您并不真正了解单例模式的性质和目的。

如果您想让许多“客户”可以访问**全局**对象，并且您想确保只创建该对象的一个​​实例，则可以使用单例。以记录器对象为例。您希望能够从代码的任何部分进行记录，但您的项目中应该只有一个记录器。这是单身人士的理想场所。

您的示例看起来好像您创建了一个范围较小的本地对象。因为这个单例是不需要的。它使代码更清晰，更易于阅读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T02:12:22.497

如果（除了错误冗长）没有行为差异，则全局实例需要 1 个额外的 LOC，单例将需要一堆非平凡的样板。吻

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-28T16:41:28.437

使用单例。使用常量。在*一个*神类中初始化它们*。*注意并避免静态初始化顺序惨败： http: [//www.parashift.com/c++-faq-lite/ctors.html#faq-10.12](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.12)

 *# svn - 从 SVN 迁移到 Perforce——提示？经验？

> ID：395702
> 
> 赞同：6
> 
> 时间：2008-12-28T02:20:51.530
> 
> 标签：svn, version-control, perforce

我们有一个相当大的 SVN 存储库，我们希望将其迁移到 perforce。我们非常希望保留大约 20k 的修订、分支等，但在一些初始测试中，perforce 提供的 svn2p4 脚本无法复制完整的结构。

人们是否使用此工具取得了成功，或者是否还有其他我的谷歌搜索没有出现？欢迎使用最佳实践和提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T03:07:54.897

Vitalii Pokrovskii 和 Mark Fridrich 创建了 svn2p4，这是一个 perl 脚本，可以“同步和重放”以将每个更改集导入 perforce。

你可以在[perforce wiki](http://public.perforce.com/wiki/SVN2P4)上找到它。他们还在[2007 Perforce 用户大会](http://www.perforce.com/perforce/conferences/us/2007/index.html#migrating)上做了一个关于它的演讲。

2012 年更新：另一个解决方案是使用 p4convert-svn。此处的详细信息：[perforce 站点上的 p4convert-svn](ftp://ftp.perforce.com/perforce/tools/p4convert-svn/p4convert-svn.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T01:21:38.830

正如fuzzymonk 提到的，似乎唯一真正的选择是使用perl 脚本svn2p4。我已经使用了几次，它运行良好，尽管速度很慢，尤其是在有很多分支的情况下。

该脚本非常有用的一件事是能够将停机时间降至几乎为零，而不管服务器之间的地理距离如何。这是可能的，因为 svn2p4 是完全可恢复的。

*   首先，你备份你的 svn 服务器
*   在打开实时服务器的同时，您开始从 svn 导入以使用备份执行。
*   导入完成后，您可以关闭实时服务器并通过将 svn2p4 指向实时服务器而不是备份来完成导入。

这意味着您只需为自上次备份以来发生的少数修订关闭服务器。如果您的迁移跨越较大的地理距离（svn 和 perforce 服务器相距很远），这尤其有用，因为您的大部分导入是在本地完成的，可能在同一台机器上，而不是通过 Internet。

我们目前正处于大规模导入的过程中（20K 修订版，18GB svn root），我很好奇您在最初的测试中遇到了什么样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-12-20T22:30:43.083

这个问题可能已经完全死了，但仅供参考，Scott Bilas 的博客文章中有很多有用的信息：http: [//scottbilas.com/blog/subversion-to-perforce-post-mortem/](https://web.archive.org/web/20171122015310/http://scottbilas.com/blog/subversion-to-perforce-post-mortem/)

他提到了 svn2p4 的一些具体问题以及如何解决这些问题（当这种解决方法可能时。）

在使用 Subversion 多年后，我才开始使用 Perforce，所以我处于学习曲线的陡峭部分。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-12-28T03:27:32.610

我最大的建议是不要这样做。从可用性的角度来看，perforce 比 svn 差很多。我被迫在工作中使用它，而且它比基于文件的/windows explorer svn 界面更不直观。设置工作区是不直观的，并且很难删除。它偶尔会感到困惑，即使它被改变也不会提交任何东西。默认情况下，所有内容都是只读的。它提交已签出但未更改的文件。我可以继续...

# python - Python 中的线程

> ID：395704
> 
> 赞同：6
> 
> 时间：2008-12-28T02:22:38.123
> 
> 标签：python, multithreading

关于如何在 Python 中使用线程的一般教程或良好资源？

何时使用线程，它们如何有效，以及线程的一些一般背景[特定于 Python]？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-28T02:40:43.313

当您想要同时运行两件事情，或者想要在后台运行而不减慢主进程时，应该使用线程。
我的建议是仅在必要时使用线程。它们通常会增加程序的复杂性。
线程的主要文档在这里：[http](http://docs.python.org/library/threading.html)
://docs.python.org/library/threading.html 一些例子在这里： http:
[//www.devshed.com/c/a/Python/Basic-Threading-in- Python/1/](http://www.devshed.com/c/a/Python/Basic-Threading-in-Python/1/)
[http://linuxgazette.net/107/pai.html](http://linuxgazette.net/107/pai.html)
[http://www.wellho.net/solutions/python-python-threads-a-first-example.html](http://www.wellho.net/solutions/python-python-threads-a-first-example.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-28T10:22:05.787

在花费时间和精力编写多线程 Python 应用程序之前要记住的一件事是有一个[全局解释器锁](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)(GIL)，因此您实际上一次不会运行多个线程。

这使得线程不适合尝试利用多个内核或 CPU。您可能会从多路复用其他资源（网络、磁盘等）中获得一些加速，但根据我的经验，它从来没有特别明显。

通常，我只在同时发生多个逻辑上独立的任务时才使用线程，但我希望它们都在同一个 VM 中。一个线程从网络中提取数据并将其放入队列中，而另一个线程从队列中弹出并写入数据库，类似这样。

在 Python 2.6 中，有`multiprocessing`一个非常酷的新模块——它有一个与`threading`模块非常相似的接口，但实际上产生了新的操作系统进程，避开了 GIL。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-28T02:54:56.373

加利福尼亚大学戴维斯分校的 Norman Matloff 和 Francis Hsu有一个很棒的 pdf[教程，使用 Python 进行线程编程。](http://heather.cs.ucdavis.edu/~matloff/158/PLN/ParProcBook.pdf)

应尽可能避免使用线程。它们增加了很多复杂性、同步问题和难以调试的问题。但是有些问题需要它们（即 GUI 编程），但如果可以的话，我会鼓励您寻找单线程解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T02:54:25.237

[这里](http://python.objectis.net/index_html#thread)有几个教程。

# javascript - 除了 Firebug，你还用什么来调试 JavaScript？

> ID：395721
> 
> 赞同：0
> 
> 时间：2008-12-28T02:44:27.020
> 
> 标签：javascript, debugging, firebug, browser

除了 Firebug，你最喜欢的 JavaScript 调试工具是什么？

谢谢，埃里克

## 重复：[JavaScript 调试器](https://stackoverflow.com/questions/103155/javascript-debugger)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T02:50:41.140

对于 IE，[开发者工具栏](http://www.microsoft.com/en-us/download/details.aspx?id=18359)。

对于歌剧，[蜻蜓](http://www.opera.com/dragonfly/)。

对于跨浏览器日志输出，[Blackbird](http://www.gscottolson.com/blackbirdjs/)（尽管它目前有一些[CSS 类命名问题](http://code.google.com/p/blackbirdjs/issues/detail?id=1)需要解决）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-28T02:52:46.410

我使用 Web Developer 扩展——用于 DOM/CSS 的东西，但通常与 JS 相关。对于在 FF 中有效但在 IE 中无效的东西，我在 Visual Studio 中调试。我还在 IE 中安装了开发工具栏，并在 Safari 中打开了开发菜单。

**编辑**：还有[文克曼](http://www.mozilla.org/projects/venkman/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T02:50:57.973

警告 FTW！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T02:54:44.003

[Internet Explorer Developer Toolbar](http://www.microsoft.com/en-us/download/details.aspx?id=18359)绝对是 IE 上用于 Web 开发调试的工具。在我看来，它比 firebug 更适合 DOM 检查和浏览，而在 javascript 方面功能则要弱得多。

[谷歌浏览器](http://www.google.com/chrome)还附带了一些方便的小开发工具，特别是对于 javascript，只需使用页面控制（地址栏旁边的页面图标）-> 开发人员，您就会在那里看到一个 javascript 调试器。

[Opera](http://www.opera.com)还有另一个开发者菜单：工具 -> 高级 -> 开发者工具 ( [http://www.opera.com/dragonfly/](http://www.opera.com/dragonfly/) )。

我最喜欢的是用于 HTML+CSS 的 IE 开发人员工具栏和用于 JavaScript 的 Firebug 和其他更复杂的东西的组合。

# python - 如何检查变量是否是类？

> ID：395735
> 
> 赞同：298
> 
> 时间：2008-12-28T03:08:05.600
> 
> 标签：python, reflection

我想知道如何检查变量是否是类（不是实例！）。

我尝试使用该函数`isinstance(object, class_or_type_or_tuple)`来执行此操作，但我不知道类将具有什么类型。

例如，在下面的代码中

```
class Foo: pass  
isinstance(Foo, **???**) # i want to make this return True. 
```

我试图`class`用**???** ，但我意识到这`class`是python中的一个关键字。

* * *

## 回答 #1

> 赞同：424
> 
> 时间：2008-12-28T03:47:00.810

更好的是：使用该[`inspect.isclass`](https://docs.python.org/library/inspect.html#inspect.isclass)功能。

```
>>> import inspect
>>> class X(object):
...     pass
... 
>>> inspect.isclass(X)
True

>>> x = X()
>>> isinstance(x, X)
True
>>> inspect.isclass(x)
False 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2008-12-28T03:11:54.437

```
>>> class X(object):
...     pass
... 
>>> type(X)
<type 'type'>
>>> isinstance(X,type)
True 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-04-12T12:24:08.543

inspect.isclass 可能是最好的解决方案，而且很容易看出它是如何实际实现的

```
def isclass(object):
    """Return true if the object is a class.

    Class objects provide these attributes:
        __doc__         documentation string
        __module__      name of module in which this class was defined"""
    return isinstance(object, (type, types.ClassType)) 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-04-06T15:34:35.377

```
isinstance(X, type) 
```

`True`如果`X`是类则返回，`False`如果不是。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-22T08:51:47.483

此检查与 Python 2.x 和 Python 3.x 兼容。

```
import six
isinstance(obj, six.class_types) 
```

这基本上是一个包装函数，它执行与 andrea_crotti 答案中相同的检查。

例子：

```
>>> import datetime
>>> isinstance(datetime.date, six.class_types)
>>> True
>>> isinstance(datetime.date.min, six.class_types)
>>> False 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-04T11:57:30.137

`inspect.isclass()`本杰明·彼得森 (Benjamin Peterson)对这项工作的使用是正确的。但请注意，您可以使用内置函数[issubclass](https://docs.python.org/3/library/functions.html#issubclass)`Class`测试对象是否是特定`Class`的，因此隐含地是 a 。根据您的用例，这可能更 Pythonic。`Class`

```
from typing import Type, Any
def isclass(cl: Type[Any]):
    try:
        return issubclass(cl, cl)
    except TypeError:
        return False 
```

然后可以这样使用：

```
>>> class X():
...     pass
... 
>>> isclass(X)
True
>>> isclass(X())
False 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-28T03:48:43.880

Foo 类：称为旧样式类，X(object) 类：称为新样式类。

检查这个[Python 中的旧样式和新样式类有什么区别？](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python). 推荐新款式。阅读“[统一类型和类](http://www.python.org/download/releases/2.2.3/descrintro/)”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-30T07:39:08.483

最简单的方法是使用`inspect.isclass`投票最多的答案中发布的内容。
实现细节可以在[python2 inspect](https://github.com/enthought/Python-2.7.3/blob/master/Lib/inspect.py)和[python3 inspect](https://github.com/python/cpython/blob/master/Lib/inspect.py)找到。
对于新式类：`isinstance(object, type)`
对于旧式类：`isinstance(object, types.ClassType)`
em，对于旧式类，它正在使用，这是[types.py](https://github.com/enthought/Python-2.7.3/blob/master/Lib/types.py#L51:1)`types.ClassType`中的代码：

```
class _C:
    def _m(self): pass
ClassType = type(_C) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-13T16:20:10.793

有另一种检查方法：

```
import inspect

class cls():
     print(None)

inspect.isclass(cls) 
```

参考：[https ://www.kite.com/python/docs/inspect.isclass](https://www.kite.com/python/docs/inspect.isclass)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-07T13:49:46.757

好吧，`inspect.isclass`不适合我，相反，试试这个

```
class foo:
    pass

var = foo()

if str(type(var)).split(".")[0] == "<class '__main__":
    print("this is a class")
else:
    print(str(type(var)).split(".")[0]) 
```

所以基本上，`type(var)`是`<class 'a type'>`

示例：`<class 'int'` 但是，当`var`是一个类时，它会出现类似`<class '__main__.classname'>`

因此，我们将字符串拆分为`<class '__main__`并使用 进行比较`if`，如果字符串完美匹配，则它是一个类

[![在此处输入图像描述](https://i.stack.imgur.com/Ey0ll.png)](https://i.stack.imgur.com/Ey0ll.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-26T01:47:58.580

在某些情况下（取决于您的系统），一个简单的测试是查看您的变量是否具有 __module__ 属性。

```
if getattr(my_variable,'__module__', None):
    print(my_variable, ".__module__ is ",my_variable.__module__)
else:
    print(my_variable,' has no __module__.') 
```

int、float、dict、list、str 等没有 __module__

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-06-24T17:00:17.080

这里已经有一些可行的解决方案，但这里有另一个：

```
>>> import types
>>> class Dummy: pass
>>> type(Dummy) is types.ClassType
True 
```

# php - 你在 PHP 中使用复数还是单数来命名你的数组？

> ID：395739
> 
> 赞同：70
> 
> 时间：2008-12-28T03:10:44.393
> 
> 标签：php, arrays, naming-conventions

当我命名数组类型的变量时，我经常会遇到一个难题：我是使用复数还是单数来命名我的数组？

例如，假设我有一个名称数组： 在 PHP 中我会说：`$names=array("Alice","Bobby","Charles");`

但是，假设我想在这个数组中引用一个名称。对于 Bobby，我会说：`$names[1]`. 然而，这有悖常理。我宁愿叫 Bobby `$name[1]`，因为 Bobby 只是一个名字。

因此，您可以看到细微的差异。有命名数组的约定吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2008-12-28T03:12:05.873

我使用复数形式。然后我可以做类似的事情：

```
$name = $names[1]; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-28T05:25:59.440

名称应始终传达尽可能多的信息，以防读者不熟悉类型声明。因此，数组或集合应以复数形式命名。

我个人认为 $name[1] 具有误导性，因为它的意思是“名称的第一个元素”，这在英语中没有意义。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-12-28T03:54:11.013

我通常在最后给它一些东西，比如**列表**，所以它会是

```
nameList 
```

否则，我将其设为复数。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-12-28T04:28:55.983

复数。

```
sort(name)
sort(names) 
```

显然，这里只有复数是有意义的。

然后，在这里：

```
name[1]
names[1] 
```

在这种情况下，两者都是有意义的。

**因此，在引用整个集合和**引用集合中的一项时，复数是唯一有意义的。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-10-05T06:46:57.653

我总是会去

```
appleList 
appleArray
nameAppleDict 
```

通过正确地命名约定，它将为其他人节省大量时间来阅读代码。因为他们不必回去检查变量类型来理解它。

具有如下变量名：

```
apples 
```

有时可能会令人困惑（列表、数组或集合？）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-28T05:16:55.667

对我来说是复数。

由于上面给出的所有原因，并且因为我工作的约定约定（我参与创建）需要数组/列表/向量等的复数形式。

尽管复数命名在某些情况下可能会导致一些异常，但大多数情况是它提供了增强的清晰度和更易于扫描阅读的代码，而不会在你回去解开你的障碍时让你的大脑捕捉到一个奇怪的结构并打断流程的烦人感觉大脑从任何绊倒它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-28T04:08:48.707

复数虽然在学校教你做单数所以你可以说：

```
value[0] = 42; 
```

真的，如果你仔细想想，这确实比：

```
values[0] = 42 
```

如果你不相信我，就大声说出来。无论如何，我确实使用复数，以便我可以轻松分辨何时扫描代码。这似乎也是人们现在使用的标准。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-28T09:55:41.657

其他人所说的：复数。

在 PHP 中更加明目张胆：

```
$name = 'Bobby';
echo $name[1]; 
```

将显示**o**。:-)

我必须承认几年前我问过自己同样的问题，但是在访问一个成员时，显示数组或集合的复数性质比英文含义更重要......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-28T03:14:36.210

总是复数。对于可以包含多个元素的任何其他数据类型的列表也是如此。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-28T05:35:04.040

总是复数。这样我做的时候就不会乱了...

```
for each (string person in people)
{
    //code
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-07-17T19:40:48.173

我通常使用复数形式，或者有时与此处引用的方式相同，将 List 添加到名称中......

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-11T00:37:13.027

我使用许多不同的语言工作，没有考虑的一件事是具有数组以外的语言。即人：人；人：字典。people 不一定是数组，它可能是另一种类型并导致错误。此外，在某些语言中，不同的类型在不同的操作中会表现得更好，或者可能有不同的方法可供它们使用。

这就是为什么现在在所有语言中，我用名词单数后跟诸如 personArray 或 person_arr 等类型的名称，如果你愿意的话。如果相关，我通常还会在开头包含范围。变量名称应该足够明确，以至于您不需要自动完成或 ctrl+f 即可知道它是什么。

# open-source - 在开源项目中有所作为

> ID：395758
> 
> 赞同：0
> 
> 时间：2008-12-28T03:25:20.057
> 
> 标签：open-source, projects

我可以在开源项目中有所作为吗？

我没有获得学位或任何东西，但我对计算机科学真的很感兴趣，而且我已经掌握了大部分基础知识。

有什么项目可以让我有所作为吗？如果没有，我可以在哪些网站上进一步了解并复习计算机编程的基础知识（以及高级概念）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T03:30:36.990

在[GitHub 上](http://www.github.com)搜索项目，有很多可以使用的帮助。

至少，为未经测试的代码编写测试并将它们提交回来。即使是最小的贡献也会受到赞赏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-28T03:33:45.000

活跃的开源项目的新手常常觉得他们正在走进一个忙碌的厨房。发生了很多不同的事情，你觉得你只是在路上。

但通常情况并非如此。

由于我不知道您的技能或您想要关注的内容，因此我无法为您指出具体的项目。

进入一个开源项目可能需要时间，这主要取决于项目的规模，但通常是试图了解需要什么。

我建议大多数人都这样做，找到一个能激励你让它变得更好的项目（即使它一开始就很好），因为这会让你想在困难时期留下来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T04:17:38.050

绝对地。编写文档和单元测试是个好建议，但我建议您找到您特别感兴趣的东西，也许是您已经使用的开源软件，并添加您自己想要使用的功能。这会更困难，但它实际上会保持你的兴趣并让你获得真实世界的体验。最坏的情况是你的补丁不会被接受，但如果它是一个不错的项目，他们会告诉你为什么以及你需要做什么才能让它被接受。

或者，选择一个您希望解决的小问题，并为它编写一个开源解决方案。关键实际上是对你正在解决的问题感兴趣。

开源软件并不是神奇的高质量代码；事实上，发现草率的代码和做法并不罕见。不要被吓倒，跳进去试一试。10 多年后，我的第一个开源代码仍然有一些用户，但代码质量让我每次看到它都感到畏缩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T10:42:07.180

您可以访问[Sourceforge.net](http://sourceforge.net)并查找[需要帮助的项目](http://sourceforge.net/people/)。

# jquery - Ajax jQuery , 初学者问题

> ID：395759
> 
> 赞同：1
> 
> 时间：2008-12-28T03:25:49.790
> 
> 标签：jquery, ajax

我正在尝试进行ajax调用以获取会话数据以在加载后插入到我的页面中

```
jQuery(function(){ // Add Answer

  jQuery(".add_answer").livequery('click',function(){
    var count = $(this).attr("alt");
    count++;
    var count1 = count-1;

    $.get('quiz/select', function(p_type){  // Ajax Call for Select Data

      $(this).parents('div:first').find('.a_type_'+count1+'').after('' + p_type + '');
      $(this).attr("alt", count);

    });
  });
}); 
```

找到了我正在调用的文件，但它的内容没有被 'p_type' 打印出来，并且`$(this).attr("alt", count);`函数的一部分没有执行

注意：我将 CodeIgniter 用于我的框架，将 jquery 用于 js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T09:29:33.770

我相信您的问题与 $(this) 的范围有关。因为你的 ajax get 函数嵌套在你的 livequery 函数中，在另一个匿名函数中，我愿意打赌 $(this) 现在指的是你的 $.get() 调用或其他东西。

您需要尽快缓存 $(this) 在您知道它选择了正确的对象的位置：

```
jQuery(".add_answer").livequery('click',function()
{
    var add_answer = $(this);

    $.get(...)
    {
        add_answer.parents('div:first')...
    }
} 
```

上面的代码*应该*缓存 add_answer 元素，但是我的 livequery 知识有点生疏。

关于您的代码的一些建议：

*   与使用 jQuery() 或 $() 快捷方式保持一致，它们做同样的事情。
*   围绕整个代码段的匿名函数是怎么回事？这只是一个简化的例子吗？它可能应该被替换为 $(document).ready(function { ... });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T09:52:54.503

“this”是 Javascript 中的一个特殊关键字。在您的外部函数中，它指的是 .add_answer 元素。在您的内部功能中，它指的是窗口。

```
jQuery(".add_answer").livequery('click',function(){
  var self = this;
  // ...
  $.get('quiz/select', function(p_type){
    // ...
    $(self).attr("alt", count); 
```

# bug-tracking - 错误跟踪软件的核心基本功能是什么？

> ID：395766
> 
> 赞同：2
> 
> 时间：2008-12-28T03:31:30.717
> 
> 标签：bug-tracking

> **可能重复：**
> [一个好的 BugTracking 工具应该具备什么能力？](https://stackoverflow.com/questions/318996/what-should-a-good-bugtracking-tool-be-capable-of)

尽管错误跟踪器可以拥有大量功能，但我觉得这有点矫枉过正，并且正在考虑推出我自己的解决方案。话虽如此，我不想删除任何可能在现有解决方案中经常使用的核心功能。

到目前为止我能想到的那些： - 创建错误 - 分配错误 - 关闭错误 - 向错误添加描述

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T03:56:36.000

*   开发者和用户之间的交流。
*   用户能够分配某些信息，例如严重性（该错误与它们的相关程度）。
*   开发人员能够覆盖该优先级，并在可能的情况下给出理由。
*   能够将任务分配给开发人员。
*   能够在错误、增强和功能请求之间进行排序。增强和功能请求之间的区别非常微妙但非常重要。
*   能够附加文件（例如屏幕截图）
*   能够拥有自定义字段（例如能够选择哪个操作系统、哪个服务包级别、应用程序版本等）。
*   能够拥有自定义用户配置文件，这些配置文件还提供有关其硬件的详细信息。能够拥有用户的电话号码（如果他们在您的 LAN 上）也很好，这样您就可以在需要时提出问题。
*   隐私。某些项目，例如安全漏洞或处理财务信息的信息，需要保密。甚至 OSS 也会时不时地这样做，直到他们可以准备好补丁。每个人都有自己的规则。
*   能够显示修订之间的更改，以便您可以通过电子邮件发送更改日志，以便用户知道您有什么和没有做什么。
*   提醒哪些项目未完成并分配给您/根本未分配。

我能想到的就这些了……

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-28T05:37:19.400

**一个很好的搜索引擎。**

令人惊讶的是，有多少花费数千美元的错误跟踪产品会出现这种可怕的错误。

如果没有真正体面的搜索，您的错误跟踪更像是一个“错误记录” - 记录并忘记 - 几乎没有用的系统。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-28T04:36:19.947

1.  创建一个错误
2.  关闭一个错误

这足以关闭“错误”实体的生命周期。它是否足以满足您的目的是另一回事。

看看[Mantis](http://www.mantisbt.org/wiki/doku.php/mantisbt:features)的特性，选择你需要的特性，计算你编写它们需要多长时间，然后*把时间花在更有用的东西上，*除非你绝对必须自己创建。;-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T03:38:05.897

对于大多数系统，例如错误跟踪系统，通常不是数据的创建或编辑使系统有用。这一切都归结为您可以轻松地浏览信息以在收集数据的基础上“增加价值”。

想想将使用系统的人、程序员、经理等。对于每一组人，什么样的信息会让他们值得一遍又一遍地回到系统中。如何让他们更容易获得这些信息？

收集信息很容易，增加价值是困难的部分。

保罗。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T03:36:55.150

错误跟踪器只不过是需要完成的事情的列表。

它可以像软件目录中的文本文件一样简单，也可以是拥有数百名用户的成熟错误跟踪器。

从您需要处理的内容开始，然后根据需要进行扩展。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T03:37:43.870

使用 Jira，您将得到妥善处理。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-28T04:37:05.577

以下是一些重要的功能：

*   为错误分配优先级（例如关键、主要、中等、次要、琐碎）
*   将错误分配给将要修复的特定版本
*   观察者功能（因此您可以在状态更改时收到电子邮件）
*   工作流程（即谁在处理它，状态是什么）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-28T04:52:17.247

FWIW：当我们推出自己的请求跟踪系统时，我们围绕 procmail 和我们现有的内部 Web 身份验证系统构建了它，因为我们希望它使用起来非常不显眼：我们只是向开发人员发送电子邮件（如果需要，使用组别名) 并在主题中添加“[t]”以打开工单。收件人会收到一封修改后的电子邮件，其中包含原始请求以及指向显示票证的网页的附加链接，并允许他们通过单击鼠标将其关闭。所以最常见的任务是通过电子邮件客户端执行的（打开、请求更多信息、回复……），尽管也有一个简单的网络界面用于搜索等。

只花了几个小时就写完了，在 7 年左右的时间里收到了 34000 多张请求票，我想声称它只有基本的核心功能是可以的：

*   创建票证（通过带有标记主题的电子邮件）
*   关闭工单（单击电子邮件中的链接，然后单击“完成”）
*   所有通信都通过电子邮件进行，而不是通过网络界面（！）
*   原始电子邮件（开张票）的收件人或发件人会收到有关已关闭票证的通知（“主题：<旧主题> 已由 <某人> 关闭”+ 正文中的票证链接，对于大多数人来说足够的信息，因此他们不必去查看是哪个票证/错误等）
*   一个简单的网页界面提供了一个搜索自己/打开/发送/团队票的功能

更大的开发团队/更密集的软件开发可能需要的显着缺失功能：

*   门票的灵活状态（dupe、wontfix、reopened 等）
*   优先事项
*   明确地重新分配票证（在我们的开发团队中，电子邮件只会发给不得不这样做的倒霉蛋）
*   向未发送给所有人的工单添加评论
*   将错误分配给特定版本的软件

YMMV，但到目前为止，它对我们来说非常有效，无论是对于错误还是对于发送者想要跟踪的简单请求。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-28T05:36:11.480

**分类、优先级和标准化。**

以及一种**简单的查询方法**，以便您可以从上述三个方面的辛勤工作中获得回报。

另外，确保你所做的一切都是**可扩展**的！我们总是决定在项目期间根据需要/触发添加/编辑我们的错误模板。

那里有很多很棒的解决方案，您可能不需要自己动手。但无论哪种方式，您都必须做出相同的决定。我们使用允许我们推出自己的模板的解决方案，因此在每个项目开始时，我们都会重新讨论相同的讨论。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-28T03:35:03.003

定义错误。

考虑到这一点很可能会让您意识到您将花费大量时间“自己动手”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-28T03:37:13.200

这可能有点超出您的想法，但对我来说，与源代码控制集成是必须的。能够查看与错误/问题相关的版本之间的差异非常方便。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-28T04:32:15.740

请请不要花太多时间“自己动手”。您最好将时间花在研究和学习使用真正的跟踪系统上。

有些要看

Trac、Bugzilla 和 FogBugz。最后一个为小型（一两个人商店？）公司提供免费托管解决方案。

SO有很多关于这个话题的话题。

尽量不要自己滚动，除非它只是一个 word 文档或电子表格。任何时候你自己做都是浪费。

编辑

既然你不会被劝阻，那么我可能会添加一些其他人没有提到的东西。

您需要报告功能 - 用户需要能够运行查询，并且他们应该能够选择他们想要“查看”的字段。

缺陷的工作流程/生命周期也是一个很好的特性。（基本上是缺陷将经历的状态的状态机。）事实上，这是一个有用的练习，可让您定义所有用例和功能。鉴于你在上大学，并没有从 CS 专业开始，我怀疑你自己会想出很多。花一些时间浏览现有产品的功能列表和演示。

能够将电子邮件发送给各个相关方。

匿名用户能够看到他们输入的特定缺陷

不同的访问级别和权限（管理员、经理、开发人员、测试人员、最终用户）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-28T05:20:14.723

我们的错误跟踪系统是我的公司和我们的客户之间的两个重要链接之一（“实时”产品评论，鼓励现有客户提出改进建议，用户界面调整是另一个）。

错误跟踪系统首先必须鼓励与您的客户进行可跟踪的“对话”。它必须回答“您是否解决了我一直遇到的问题（广义定义）？”这个问题。

它必须具有（无特定顺序）：

1.  问题或功能请求的简短描述（标题）
2.  扩展描述的空间
3.  附加文件/图像的能力（截图）
4.  优先考虑错误/功能的能力
5.  将条目分类为错误、功能、查询等的能力。
6.  将错误/功能分配到区域（UI、数据库、文档等）的能力
7.  将错误/功能分配给产品的能力（我们跟踪五个产品的错误）
8.  将错误/功能分配给版本的能力（“将在 5.1 版中修复”）
9.  将错误/功能分配给人员（开发人员/作家）的能力
10.  将错误/功能分配给客户（记者）的能力
11.  重新分配给其他人（开发人员）的能力
12.  解决错误/功能的能力（将它们标记为已完成并准备好进行测试）
13.  标记解决状态的能力（已修复、无法修复、无法重现等）
14.  关闭错误/功能的能力（在解决和测试后将它们从列表中删除）
15.  重新打开错误/功能的能力（如果测试失败，则恢复为“打开”）
16.  通知客户错误已解决的能力（例如通过电子邮件）
17.  每一步的日期和时间戳（打开、解决、关闭、重新打开）
18.  报告开放错误数量的能力！（我们离发布还有多远？）
19.  显示错误报告与解决方案的能力
20.  按日期、优先级、产品、人员等搜索错误/功能的能力。
21.  列出和排序错误以便于扫描的能力！

这些是我们通常在系统中使用的东西 (FogBugz)。虽然这可能看起来很长，但我们确实使用了我在此处列出的所有功能！

# asp.net - 在 ASP.Net 应用程序中执行 Server.MapPath 反向的最有效方法是什么

> ID：395779
> 
> 赞同：27
> 
> 时间：2008-12-28T03:45:51.577
> 
> 标签：asp.net, asp.net-mvc

我正在构建一个 MVC 应用程序，在该应用程序中我正在从文件系统读取文件列表，并且我想将该文件的相对 URL 传递给视图，最好以“~/”为前缀，以便选择任何视图 cab 呈现网址适当。

为此，我需要枚举文件系统中的文件并将它们的物理路径转换回相对 URL。我尝试过一些算法，但我担心效率和最小的字符串操作。另外，我相信 .Net Framework 中没有任何东西可以执行此操作，但是最新的 MVC 版本中有什么可以执行的吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-12-28T04:01:47.487

目前我不知道任何内置方法可以做到这一点，但这并不难，我这样做是这样的：

*   我们需要获取应用程序根目录，并在我们的新路径中将其替换为`~`
*   我们需要将反斜杠转换为斜杠

* * *

```
public string ReverseMapPath(string path)
{
    string appPath = HttpContext.Current.Server.MapPath("~");
    string res = string.Format("~{0}", path.Replace(appPath, "").Replace("\\", "/"));
    return res;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-18T05:33:49.350

这不是 UrlHelper.Content 方法的作用吗？[http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-02-17T15:32:25.047

我做了一些挖掘，试图让 UrlHelper 类在控制器之外工作，然后我想起了一个在 aspx 页面中做同样事情的老技巧：

```
string ResolveUrl(string pathWithTilde) 
```

希望这可以帮助！请参阅： [https ://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl(v=vs.110).aspx)

# ruby-on-rails - 截断降价？

> ID：395783
> 
> 赞同：10
> 
> 时间：2008-12-28T03:47:06.380
> 
> 标签：ruby-on-rails, ruby, markdown

我有一个 Rails 站点，其中的内容是用 markdown 编写的。我希望显示每个片段，并带有“阅读更多..”链接。

我该怎么做？例如，简单地截断原始文本是行不通的。

```
>> "This is an [example](http://example.com)"[0..25]
=> "This is an [example](http:" 
```

理想情况下，我希望允许作者（可选）插入一个标记以指定用作“片段”的内容，如果不是，则需要 250 个单词，并附加“...” - 例如..

```
This article is an example of something or other.

This segment will be used as the snippet on the index page.

^^^^^^^^^^^^^^^

This text will be visible once clicking the "Read more.." link 
```

该标记可以被认为是一个 EOF 标记（在显示完整文档时可以忽略它）

我正在使用[maruku](http://maruku.rubyforge.org/)进行 Markdown 处理（RedCloth 非常偏向于 Textile，BlueCloth 非常有问题，我想要一个排除 peg-markdown 和 RDiscount 的原生 Ruby 解析器）

或者（因为无论如何 Markdown 都被翻译成 HTML）正确截断 HTML 是一种选择——尽管最好不要`markdown()`整个文档，只是为了得到前几行。

所以，我能想到的选项是（按优先顺序）..

*   向 maruku 解析器添加一个“截断”选项，它只会解析前 x 个单词，或者直到“摘录”标记。
*   编写/查找与解析器无关的 Markdown truncate'r
*   编写/查找智能 HTML 截断函数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T04:21:46.497

> *   编写/查找智能 HTML 截断函数

以下来自[http://mikeburnscoder.wordpress.com/2006/11/11/truncating-html-in-ruby/](http://mikeburnscoder.wordpress.com/2006/11/11/truncating-html-in-ruby/)，经过一些修改将正确截断 HTML，并轻松允许在结束标记之前附加字符串。

```
>> puts "<p><b><a href=\"hi\">Something</a></p>".truncate_html(5, at_end = "...")
=> <p><b><a href="hi">Someth...</a></b></p> 
```

修改后的代码：

```
require 'rexml/parsers/pullparser'

class String
  def truncate_html(len = 30, at_end = nil)
    p = REXML::Parsers::PullParser.new(self)
    tags = []
    new_len = len
    results = ''
    while p.has_next? && new_len > 0
      p_e = p.pull
      case p_e.event_type
      when :start_element
        tags.push p_e[0]
        results << "<#{tags.last}#{attrs_to_s(p_e[1])}>"
      when :end_element
        results << "</#{tags.pop}>"
      when :text
        results << p_e[0][0..new_len]
        new_len -= p_e[0].length
      else
        results << "<!-- #{p_e.inspect} -->"
      end
    end
    if at_end
      results << "..."
    end
    tags.reverse.each do |tag|
      results << "</#{tag}>"
    end
    results
  end

  private

  def attrs_to_s(attrs)
    if attrs.empty?
      ''
    else
      ' ' + attrs.to_a.map { |attr| %{#{attr[0]}="#{attr[1]}"} }.join(' ')
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T04:37:00.520

这是一个适用于我的 Textile 解决方案。

1.  将其转换为 HTML
2.  截断它。
3.  删除任何被切成两半的 HTML 标签

    ```
    html_string.gsub(/<[^>]*$/, "") 
    ```

4.  然后，使用 Hpricot 清理它并关闭未关闭的标签

    ```
    html_string = Hpricot( html_string ).to_s 
    ```

我在助手中执行此操作，并且使用缓存没有性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T04:10:20.887

您可以使用正则表达式来查找只包含“^”字符的行：

```
markdown_string = <<-eos
This article is an example of something or other.

This segment will be used as the snippet on the index page.

^^^^^^^^^^^^^^^

This text will be visible once clicking the "Read more.." link
eos

preview = markdown_string[0...(markdown_string =~ /^\^+$/)]
puts preview 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T04:45:04.170

与其尝试截断文本，不如使用 2 个输入框，一个用于“开场白”，一个用于主要“胆量”。这样，您的作者将无需依赖某种时髦的 EOF 标记就可以准确地知道正在显示什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-15T20:39:13.477

我将不得不同意“两个输入”方法，内容编写者不必担心，因为您可以修改后台逻辑以在显示完整内容时将两个输入混合在一起。

```
full_content = input1 + input2 // perhaps with some complementary html, for a better formatting 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T10:26:04.917

不确定它是否适用于这种情况，但为了完整起见，请添加以下解决方案。如果要截断 Markdown 渲染的内容，可以使用 strip_tags 方法：

```
truncate(strip_tags(markdown(article.contents)), length: 50) 
```

来源： [http ://devblog.boonecommunitynetwork.com/rails-and-markdown/](http://devblog.boonecommunitynetwork.com/rails-and-markdown/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-22T00:50:00.070

一个更简单的选择：

```
truncate(markdown(item.description), length: 100, escape: false) 
```

# asp.net - 我应该使用 Replace() 而不是 HtmlEncode() 吗？

> ID：395799
> 
> 赞同：1
> 
> 时间：2008-12-28T04:02:44.927
> 
> 标签：asp.net

是否应该放弃 HtmlEncode() 并使用 Replace() 而不是我想解析帖子/评论中的链接（使用正则表达式）？HtmlEncode() 将 & 替换为 & 我认为这可能会导致链接出现问题，我应该只使用 Replace() 将 < 替换为 < 吗？

例如，如果用户发布如下内容：
请参阅此站点[http://www.somesite.com/somepage.aspx?qs1=1&qs2=2&qs3=3](http://www.somesite.com/somepage.aspx?qs1=1&qs2=2&qs3=3)

我希望它是：
查看此站点 <a href="http://www.somesite.com/somepage.aspx?qs1=1&qs2=2&qs3=3"> [http://www.somesite.com/somepage.aspx ?qs1=1&qs2=2&qs3=3</a>](http://www.somesite.com/somepage.aspx?qs1=1&qs2=2&qs3=3</a&gt) ;

但是使用 HtmlEncode() URL 将变为（注意与号）：
请参阅此站点[http://www.somesite.com/somepage.aspx?qs1=1&qs2=2&qs3=3](http://www.somesite.com/somepage.aspx?qs1=1&amp;qs2=2&amp;qs3=3)

我应该改用 Replace() 来避免这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T05:18:42.107

实际上，您的最后一个示例-您担心的那个-是唯一正确的示例。在 HTML 文档中，& 符号用于引入实体引用，因此必须进行转义。虽然大多数浏览器在不明显属于实体引用的情况下允许它们通过，但如果它们在 URL 中的使用碰巧看起来像实体，您可能会遇到微妙的问题。

让我们`HtmlEncode()`做它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T04:59:55.357

也许您正在寻找 UrlEncode()？ [http://msdn.microsoft.com/en-us/library/zttxte6w.aspx](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T04:52:54.687

您要替换什么，为什么？HtmlEncode()*通常*用于清理用户提供的数据。也就是说，如果您允许用户提交链接，您可能一开始就不想对它们进行 HtmlEncode。您基本上将完全按照用户提供的方式呈现它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T05:18:56.553

将 & 替换为 & 属性内部`href`是正确的。如果你不这样做，那么你的代码在技术上是无效的。此外，即使它在链接内，您也应该将其转义。唯一会遇到问题的情况是，如果您最终多次对其进行 HTMLEncoding。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T05:21:59.667

我建议不要使用 Replace 来完成 HTMLEncode 或 URLEncode 的工作。这些功能是定制设计的，可以解决您在用户输入的内容中看到的大多数问题，如果您尝试用自己的代码替换它们，如果您忘记了，结果可能会变得很难看（我在这里是根据经验说话）至关重要的东西。

# mysql - 在 MySQL 中计算一个单词在一行中的出现次数

> ID：395810
> 
> 赞同：6
> 
> 时间：2008-12-28T04:13:32.223
> 
> 标签：mysql, regex, count

我正在为我的网站创建搜索功能，该功能可以从数据库中查找相关结果。我正在寻找一种计算单词出现次数的方法，但我需要确保单词的两侧都有单词边界（所以当我想要“rip”时，我不会以“triple”结尾）。

有没有人有任何想法？

* * *

人们误解了我的问题：

如何计算***单行中此类事件的数量？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-02-16T17:07:36.497

这不是关系数据库非常擅长的事情，除非您可以使用全文索引，并且您已经声明不能，因为您使用的是 InnoDB。我建议选择您的相关行并在您的应用程序代码中进行字数统计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-16T17:03:00.067

你可以试试这种变态的方式：

```
SELECT 
(LENGTH(field) - LENGTH(REPLACE(field, 'word', ''))) / LENGTH('word') AS `count`
ORDER BY `count` DESC 
```

*   这个查询可能很慢
*   看起来很丑
*   REPLACE() 区分大小写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-17T23:49:06.383

您可以`REPLACE()`通过使用`LOWER()`.

它草率，但在我看来，这个查询运行得非常快。

为了加快速度，我在一个选择中检索结果集，我在“外部”查询中声明为派生表。由于此时 mysql 已经有了结果，因此 replace 方法的工作速度非常快。

我创建了一个类似于下面的查询来在多个表和多个列中搜索多个术语。我获得了一个“相关性”数字，该数字等于搜索的所有列中所有找到的搜索词的所有出现次数的总和

```
SELECT DISTINCT ( 
((length(x.ent_title) - length(replace(LOWER(x.ent_title),LOWER('there'),''))) / length('there')) 
+ ((length(x.ent_content) - length(replace(LOWER(x.ent_content),LOWER('there'),''))) / length('there'))
 + ((length(x.ent_title) - length(replace(LOWER(x.ent_title),LOWER('another'),''))) / length('another')) 
+ ((length(x.ent_content) - length(replace(LOWER(x.ent_content),LOWER('another'),''))) / length('another')) 
) as relevance, 
x.ent_type, 
x.ent_id, 
x.this_id as anchor,
page.page_name
FROM ( 
(SELECT 
'Foo' as ent_type, 
sp.sp_id as ent_id, 
sp.page_id as this_id, 
sp.title as ent_title, 
sp.content as ent_content,
sp.page_id as page_id
FROM sp
WHERE (sp.title LIKE '%there%' OR sp.content LIKE '%there%' OR sp.title LIKE '%another%' OR sp.content LIKE '%another%' ) AND (sp_content.title NOT LIKE '%goes%' AND sp_content.content NOT LIKE '%goes%')
) UNION (
  [search a different table here.....]
)
) as x
JOIN page ON page.page_id = x.page_id 
WHERE page.rstatus = 'ACTIVE'
ORDER BY relevance DESC, ent_title; 
```

希望这可以帮助某人

——西克雷斯特出局

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-26T19:26:38.757

创建一个像这样的用户定义函数并在您的查询中使用它

```
DELIMITER $$

CREATE FUNCTION `getCount`(myStr VARCHAR(1000), myword VARCHAR(100))
    RETURNS INT
    BEGIN
    DECLARE cnt INT DEFAULT 0;
    DECLARE result INT DEFAULT 1;

    WHILE (result > 0) DO
    SET result = INSTR(myStr, myword);
    IF(result > 0) THEN 
        SET cnt = cnt + 1;
        SET myStr = SUBSTRING(myStr, result + LENGTH(myword));
    END IF;
    END WHILE;
    RETURN cnt;    

    END$$

DELIMITER ; 
```

希望它有助于 [参考这个](https://stackoverflow.com/questions/13892133/how-to-get-frequency-of-a-word-in-a-row-using-mysql-fulltext/17889371#17889371)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T05:12:10.513

像这样的东西应该工作：

select count(*) from table where fieldname REGEXP '[[:<:]]word[[:>:]]';

血淋淋的细节在 MySQL 手册的 11.4.2 节中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T15:27:50.677

像 LIKE 或 REGEXP 这样的东西不会扩展（除非它是最左边的前缀匹配）。

考虑改为使用**[全文索引](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)**来执行您想要做的事情。

```
select count(*) from yourtable where match(title, body) against ('some_word'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-29T19:45:17.643

我使用了下面链接中描述的技术。MySQL的方法用途`length`和`replace`功能。

[关键字相关性](http://r937.com/keyword_relevance.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-12-04T23:46:51.570

如果您想要搜索，我建议使用 Sphinx 或 Lucene 之类的东西，我发现 Sphinx（作为独立的全文索引器）更容易设置和运行。它运行速度很快，并且生成索引的速度非常快。即使您使用的是 MyISAM，我也建议您使用它，它比 MyISAM 的全文索引功能强大得多。

它还可以（在某种程度上）与 MySQL 集成。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2010-08-17T23:55:53.340

这取决于您使用的 DBMS，有些允许编写可以执行此操作的 UDF。

# java - Java中的函数指针/委托？

> ID：395816
> 
> 赞同：19
> 
> 时间：2008-12-28T04:22:21.440
> 
> 标签：java, delegates, function-pointers

对于我的 Java 游戏服务器，我发送数据包的操作 ID，它基本上告诉服务器数据包的用途。我想将每个动作 ID（一个整数）映射到一个函数。有没有办法在不使用开关的情况下做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-28T04:30:39.550

这个如何？

```
HashMap<Integer, Runnable> map = new HashMap<Integer, Runnable>();
map.put(Register.ID, new Runnable() { 
    public void run() { functionA(); }
});
map.put(NotifyMessage.ID, new Runnable() { 
    public void run() { functionB(); }
});
// ...
map.get(id).run(); 
```

（如果您需要传递一些参数，请使用具有合适参数的函数定义您自己的接口，并使用它而不是 Runnable）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-10T19:08:53.560

另一种类似的方法可能是使用 Java 8 的供应商：

```
Map<Integer, Supplier<T>> suppliers = new HashMap();

suppliers.put(1, () -> methodOne());
suppliers.put(2, () -> methodTwo());

// ...

public T methodOne() { ... }
public T methodTwo() { ... }

// ...

T obj = suppliers.get(id).run(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T04:30:19.770

Java 没有一流的函数指针。为了实现类似的功能，您必须定义和实现一个接口。您可以使用匿名内部类使其更容易，但它仍然不是很漂亮。这是一个例子：

```
public interface PacketProcessor
{
    public void processPacket(Packet packet);
}

...

PacketProcessor doThing1 = new PacketProcessor()
{
    public void processPacket(Packet packet)
    {
        // do thing 1
    }
};
// etc.

// Now doThing1, doThing2 can be used like function pointers for a function taking a
// Packet and returning void 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T04:34:43.553

Java 并没有真正的函数指针（我们有匿名内部类）。不过，使用开关确实没有什么问题，只要您打开的是值而不是类型。你有什么不想使用开关的原因吗？似乎您必须在代码中某处的操作 ID 和操作之间进行映射，所以为什么不保持简单呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T04:32:50.420

你用过 Swing/AWT 吗？他们的事件层次结构解决了类似的问题。Java 传递函数的方式是使用接口，例如

```
public interface ActionHandler {
    public void actionPerformed(ActionArgs e);
} 
```

然后，如果你想将整数映射到这些对象上，你可以使用类似 a 的东西`java.util.HashMap<Integer,ActionHandler>`来管理它。实际的实现既可以放在匿名类（Java 对“lambda”的最佳近似）中，也可以放在某个适当的类中。这是匿名类方式：

```
HashMap<Integer,ActionHandler> handlers;
handlers.put(ACTION_FROB, new ActionHandler() {
    public void actionPerformed(ActionArgs e) {
        // Do stuff
        // Note that any outer variables you intend to close over must be final.
    }
});
handlers.get(ACTION_FROB).actionPerformed(foo); 
```

（编辑）如果你想更加滥用，你可以像这样初始化 HashMap：

```
HashMap<Integer,String> m = new HashMap<Integer,String>() {{
    put(0,"hello");
    put(1,"world");
}}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-03-02T07:05:53.197

是的，但是使用接口意味着您必须为每个回调创建一个接口，这意味着您要设置的每个函数。创建一个委托类来处理这个给你（不是一个真正的函数指针）但是要传递的函数，如果你滥用泛型作为返回类型，你不必强制转换，这将瓶颈减少到几乎没有。

c# 委托（MultiCastDelegate 是正确的）从使用 MethodInfo 方法获取信息，这与使用 java.lang.reflect.method 为 Delegate 类执行的操作相同。我在本网站的另一种形式上发布了我的 Delegate(T) 类的代码，以处理这个确切的问题。我这样做是因为（是的）来自 C++ 我需要一种更好的方法来传递函数（尤其是 Void），然后必须为 on 函数或更多函数创建接口。现在我可以选择为其填写参数信息的函数。瞧`! JIT 或 JVM 的速度没有明显的损失，而且很好用。如果我只学习了一周的java编程，任何java程序员都可以做到。

此外，它在创建基础侦听器和传入侦听器的基础接口时非常有用。不再需要编写另一个侦听器，因为函数的名称已更改。创建一个委托类具有很大的优势，因为它非常有用且可以通过。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-13T08:40:16.933

您可以接口静态方法。此方法也允许您指定参数。声明你的界面...

```
public interface RouteHandler {
    void handleRequest(HttpExchange t) throws IOException;
} 
```

还有你的地图...

```
private Map<String, RouteHandler> routes = new HashMap<>(); 
```

然后实现与接口/参数匹配的静态方法...

```
public static void notFound(HttpExchange t) throws IOException {
    String response = "Not Found";

    t.sendResponseHeaders(404, response.length());
    OutputStream os = t.getResponseBody();
    os.write(response.getBytes());
    os.close();
} 
```

然后，您可以将这些方法添加到您的地图中......

```
routes.put("/foo", CoreRoutes::notFound); 
```

并按如下方式称呼他们...

```
RouteHandler handler = routes.get("/foo");
handler.handleRequest(exchange); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-28T05:14:41.663

您可以通过使用责任链模式来做到这一点。

它是一种将不同对象链接在一起的模式，有点像链表。即每个对象都有对链中下一个的引用。链中的对象通常处理一种特定的行为。对象之间的流程与 switch-case 语句非常相似。

有一些陷阱，例如，它会分散你的逻辑，过长的链会导致性能问题。但是除了这些陷阱，您还可以提高可测试性和更强的凝聚力。此外，您不限于使用 enum、byte、int short 和 char 表达式作为分支的触发器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-12T13:46:09.090

检查闭包是如何在 lambdaj 库中实现的。它们实际上具有与 C# 委托非常相似的行为：

[http://code.google.com/p/lambdaj/wiki/Closures](http://code.google.com/p/lambdaj/wiki/Closures)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-22T14:01:25.257

您可以使用 java.util.function（对于 Java 8+）中的内容来存储函数。 [java.util.function 文档](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html)

你必须浏览这个列表并选择一个合适的函数类来使用。我将使用 BiConsumer，它说：

`Takes two inputs. Returns no result. Operates through side effects.`

```
import java.util.function.BiConsumer;
import java.util.HashMap;
import java.util.Map;

public void init(){
  //<actionId, function<arg1, arg2>>
  Map<Integer, BiConsumer<String, String>> actionMap = new HashMap<>();
  actionMap.put(123, this::someMethod);

  //note (optional): check key first: map.containsKey(someActionId)
  //call someMethod("argument1", "argument2")
  actionMap.get(123).accept("argument1", "argument2");
}

public void someMethod(String a, String b){
  //do something here
} 
```

# visual-studio - 视觉哈斯克尔 2008

> ID：395828
> 
> 赞同：7
> 
> 时间：2008-12-28T04:36:13.190
> 
> 标签：visual-studio, visual-studio-2008, haskell, visual-studio-2008-sp1, visualhaskell

[Haskell for Visual Studio](http://www.haskell.org/visualhaskell/) 2005是否与 VS2008 SP1 兼容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-04-26T05:55:04.857

您最初问题的答案是否定的。visual haskell 的代码是用 Haskell 编写的，并通过 COM 与 Visual Studio 对话。现在的问题是，即使您更新 com 包装器以与新的 Visual Studio 兼容，您仍然会因为 ghc 6.6 依赖于编译器的内部结构才能工作，而其中一些已经被从 6.8 中删除。

所以这部分的任何努力都需要完全重写插件。

现在好消息是我正忙于为 Visual Studio 2010 编写一个版本（对不起，没有 2008），但据说我可以将它作为一个独立的隔离外壳发布给那些没有 vs 2010 的人（需要更仔细地检查许可证）。

我只有周末的时间来处理它，所以我计划（没有承诺）我将在 7 月左右发布第一个版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-28T06:03:56.213

实际上，我刚刚尝试从您提供的链接（昨天）安装它，但安装程序抱怨它找不到现有的 Visual Studio 2005 安装。（我也安装了 Visual Studio 2008。）我猜是硬编码以查找特定目录或安装的应用程序版本号？所以......从我所看到的，我会回答“不”。

希望别人有更好的运气？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T06:12:41.327

我在 2007 年的一次会议上被告知，一直致力于为 GHC 提供 Visual Studio 支持的俄罗斯学生从未完全完成这项工作。最有可能知道真实身份的人是[微软研究院的西蒙·马洛](http://research.microsoft.com/en-us/people/simonmar/)。

# php - 如何获取 utf-8 字符串中给定字符的代码点编号？

> ID：395832
> 
> 赞同：19
> 
> 时间：2008-12-28T04:38:29.893
> 
> 标签：php, unicode

我想获取给定 UTF-8 字符串的 UCS-2 代码点。例如，单词“hello”应该变成“0068 0065 006C 006C 006F”。请注意，字符可能来自任何语言，包括东亚语言等复杂脚本。

因此，问题归结为“将给定字符转换为其 UCS-2 代码点”

但是怎么做？拜托，任何形式的帮助都将非常感谢，因为我很着急。

* * *

*作为答案发布的提问者回答的转录*

感谢您的回复，但它需要在 PHP v 4 或 5 而不是 6 中完成。

该字符串将是来自表单字段的用户输入。

我想实现 utf8to16 或 utf8decode 的 PHP 版本

```
function get_ucs2_codepoint($char)
{
    // calculation of ucs2 codepoint value and assign it to $hex_codepoint
    return $hex_codepoint;
} 
```

你能帮我用 PHP 还是用上面提到的版本的 PHP 来完成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-28T05:04:38.377

使用现有的实用程序，例如[iconv](http://www.gnu.org/software/libiconv/)，或您使用的语言附带的任何库。

如果您坚持推出自己的解决方案，请阅读[UTF-8](http://en.wikipedia.org/wiki/Utf-8)格式。基本上，每个代码点存储为 1-4 个字节，具体取决于代码点的值。范围如下：

*   U+0000 — U+007F：1字节：0xxxxxxx
*   U+0080 — U+07FF：2字节：110xxxxxx 10xxxxxx
*   U+0800 — U+FFFF：3字节：1110xxxx 10xxxxxx 10xxxxxx
*   U+10000 — U+10FFFF：4字节：11110xxx 10xxxxxx 10xxxxxx 10xxxxxx

其中每个 x 是一个数据位。因此，您可以通过查看第一个字节来判断每个代码点由多少字节组成：如果它以 0 开头，则它是一个 1 字节字符。如果它以 110 开头，则它是一个 2 字节字符。如果它以 1110 开头，则它是一个 3 字节字符。如果以 11110 开头，则为 4 字节字符。如果它以 10 开头，则它是多字节字符的非初始字节。如果以 11111 开头，则为无效字符。

一旦你弄清楚字符中有多少字节，这只是一个问题。另请注意，UCS-2 不能表示 U+FFFF 以上的字符。

由于您没有指定语言，这里有一些示例 C 代码（省略了错误检查）：

```
wchar_t utf8_char_to_ucs2(const unsigned char *utf8)
{
  if(!(utf8[0] & 0x80))      // 0xxxxxxx
    return (wchar_t)utf8[0];
  else if((utf8[0] & 0xE0) == 0xC0)  // 110xxxxx
    return (wchar_t)(((utf8[0] & 0x1F) << 6) | (utf8[1] & 0x3F));
  else if((utf8[0] & 0xF0) == 0xE0)  // 1110xxxx
    return (wchar_t)(((utf8[0] & 0x0F) << 12) | ((utf8[1] & 0x3F) << 6) | (utf8[2] & 0x3F));
  else
    return ERROR;  // uh-oh, UCS-2 can't handle code points this high
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-28T06:59:26.287

[Scott Reynen](https://stackoverflow.com/users/10837/scott-reynen)编写了一个[将 UTF-8 转换为 Unicode](http://randomchaos.com/documents/?source=php_and_unicode)的函数。我在查看[PHP 文档](http://us.php.net/manual/en/function.unicode-encode.php#73422)时发现了它。

```
function utf8_to_unicode( $str ) {

    $unicode = array();        
    $values = array();
    $lookingFor = 1;

    for ($i = 0; $i < strlen( $str ); $i++ ) {
        $thisValue = ord( $str[ $i ] );
    if ( $thisValue < ord('A') ) {
        // exclude 0-9
        if ($thisValue >= ord('0') && $thisValue <= ord('9')) {
             // number
             $unicode[] = chr($thisValue);
        }
        else {
             $unicode[] = '%'.dechex($thisValue);
        }
    } else {
          if ( $thisValue < 128) 
        $unicode[] = $str[ $i ];
          else {
                if ( count( $values ) == 0 ) $lookingFor = ( $thisValue < 224 ) ? 2 : 3;                
                $values[] = $thisValue;                
                if ( count( $values ) == $lookingFor ) {
                    $number = ( $lookingFor == 3 ) ?
                        ( ( $values[0] % 16 ) * 4096 ) + ( ( $values[1] % 64 ) * 64 ) + ( $values[2] % 64 ):
                        ( ( $values[0] % 32 ) * 64 ) + ( $values[1] % 64 );
            $number = dechex($number);
            $unicode[] = (strlen($number)==3)?"%u0".$number:"%u".$number;
                    $values = array();
                    $lookingFor = 1;
          } // if
        } // if
    }
    } // for
    return implode("",$unicode);

} // utf8_to_unicode 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-29T11:28:30.230

PHP 代码（假定有效 utf-8，不检查无效 utf-8）：

```
function ord_utf8($c) {
    $b0 = ord($c[0]);
    if ( $b0 < 0x10 ) {
        return $b0;
        }
    $b1 = ord($c[1]);
    if ( $b0 < 0xE0 ) {
        return (($b0 & 0x1F) << 6) + ($b1 & 0x3F);
        }
    return (($b0 & 0x0F) << 12) + (($b1 & 0x3F) << 6) + (ord($c[2]) & 0x3F);
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-28T06:18:47.710

我很高兴，因为我刚刚在期末考试中把这个问题交给了学生。这是 UTF-8 的草图：

```
hex         binary                   UTF-8 binary
0000-007F   00000000 0abcdefg   =>   0abcdefg
0080-07FF   00000abc defghijk   =>   110abcde 10fghijk
0800-FFFF   abcdefgh ijklmnop   =>   1110abcd 10efghij 10klmnop 
```

这是一些 C99 代码：

```
static void check(char c) {
  if ((c & 0xc0) != 0xc0) RAISE(Bad_UTF8);
}

uint16_t Utf8_decode(char **p) { // return code point and advance *p
  char *s = *p;
  if ((s[0] & 0x80) == 0) {
    (*p)++;
    return s[0];
  } else if ((s[0] & 0x40) == 0) {
    RAISE (Bad_UTF8);
    return ~0; // prevent compiler warning
  } else if ((s[0] & 0x20) == 0) {
    if ((s[0] & 0xf0) != 0xe0) RAISE (Bad_UTF8);
    check(s[1]); check(s[2]);
    (*p) += 3;
    return ((s[0] & 0x0f) << 12)
         + ((s[1] & 0x3f) <<  6)
         + ((s[2] & 0x3f));
  } else {
    check(s[1]);
    (*p) += 2;
    return ((s[0] & 0x1f) << 6)
         + ((s[1] & 0x3f));
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-06T09:24:50.197

`mb_ord()`中使用`php >= 7.2`。

或者这个函数：

```
function ord_utf8($c) {
    $len = strlen($c);
    $code = ord($c);
    if($len > 1) {
        $code &= 0x7F >> $len;
        for($i = 1; $i < $len; $i++) {
            $code <<= 6;
            $code += ord($c[$i]) & 0x3F;
        }
    }
    return $code;
} 
```

`$c`是一个字符。如果您需要将字符串转换为字符数组。您可以使用它。

```
$string = 'abcde';
$string = preg_split('//u', $string, -1, PREG_SPLIT_NO_EMPTY); 
```

# django - 集成 smartgwt 和 web2py

> ID：395836
> 
> 赞同：3
> 
> 时间：2008-12-28T04:40:06.443
> 
> 标签：django, web2py, smartgwt

我想使用[smartgwt](http://code.google.com/p/smartgwt/)和[web2py](http://mdp.cti.depaul.edu/)构建一个应用程序。
我对两者都很陌生。

最终我想做的是在 smartgwt TileGrid 中显示从 web2py 后端获得的对象。

任何人都可以列举需要做什么的大致步骤吗？或者向我指出任何有用的资源？

也欢迎任何更适用于[django的信息。](http://www.djangoproject.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T09:09:37.490

下载 smartgwt （顺便说一句，优秀的框架）并查看这个例子：

文件：//localhost/Users/massimodipierro/Desktop/smartgwt-1.0b1/samples/Showcase/www/com.smartgwt.sample.showcase.Showcase/index.html#tiling_load_on_deamnd

在 tilegrid 中显示图像。这些图像是通过 http 请求从 Yahoo 接收的。响应采用 JSON 格式。查看源代码。要查看来自 Yahoo 的 json 响应，请尝试以下 URL：

[http://api.search.yahoo.com/ImageSearchService/V1/imageSearch?appid=YahooDemo&output=json&query=snowboard](http://api.search.yahoo.com/ImageSearchService/V1/imageSearch?appid=YahooDemo&output=json&query=snowboard)

要使这项工作与 web2py 一起使用，您需要将该 URL 替换为返回类似 JSON 响应的 web2py 操作的 URL。

我对 smartgwt 了解不多，但我确信在 web2py google 组中有人愿意提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-01T06:12:36.890

看看这个关于使用 web2py 和睡衣的[​​教程，这是另一个基于 GWT 构建的库。](http://www.web2py.com/AlterEgo/default/show/203)

# python - 如何在不需要winpcap的情况下在windows上通过python发送ARP数据包？

> ID：395846
> 
> 赞同：3
> 
> 时间：2008-12-28T04:52:54.640
> 
> 标签：python, sockets, ethernet, arp

有没有办法在 Windows 上发送 ARP 数据包而不使用其他库（如 winpcap）？

我听说 Windows XP SP2 阻止原始以太网套接字，但我也听说原始套接字仅对管理员被阻止。这里有什么澄清吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T06:36:50.933

在一般情况下，如果不使用外部库，就无法做到这一点。

如果对数据包应包含的内容没有要求（即，如果任何 ARP 数据包都可以），那么您显然*可以*在以太网上发送 ARP 请求，只需尝试向您自己子网上的任何 IP 发送内容即可（通过运行外部命令事先确保目标 IP 不在 ARP 缓存中`arp -d tar.get.ip.address`），但这可能不是您想要的。

有关原始套接字支持的更多信息，请参阅[TCP/IP 原始套接字文档页面](https://docs.microsoft.com/en-gb/windows/win32/winsock/tcp-ip-raw-sockets-2)，特别是[原始套接字的限制](https://docs.microsoft.com/en-gb/windows/win32/winsock/tcp-ip-raw-sockets-2?redirectedfrom=MSDN#limitations-on-raw-sockets)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T13:10:46.677

You could use the OpenVPN tap to send arbitrary packets as if you where using raw sockets.

# c# - C# 将“WindowState.ToString”在文化之间改变

> ID：395849
> 
> 赞同：1
> 
> 时间：2008-12-28T04:54:41.517
> 
> 标签：c#, windowstate

以下面的代码为例；

```
 if (Convert.ToString(frm.WindowState) == "Minimized")
        Layout.WindowState = "Maximized";
    else
        Layout.WindowState = Convert.ToString(frm.WindowState); 
```

我们正在分析窗口状态的字符串定义，即“Minimized”。

这个字符串描述会在文化之间改变吗？

最后，在这段代码中，是否有一个 Enum 可以用来检查窗口状态？

我们可以重构这个代码段吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T05:07:09.650

该[`WindowState`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.windowstate.aspx)值*是*一个枚举 - [`System.Windows.Forms.FormWindowState`](http://msdn.microsoft.com/en-us/library/system.windows.forms.formwindowstate.aspx)。只需比较枚举常量，跳过`ToString()`疯狂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T07:09:00.760

它不应该跨文化改变，因为它只是将 Enum 名称转换为字符串。当您使用不同的 .Net/Windows/IDE 文化时，枚举名称不会改变，因此它将保持最初编写的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T05:08:19.490

WindowState 是一个枚举。

我建议使用一个好的 IDE (Visual Studio fe)，这将使类似的细节显而易见。

[System.Windows.WindowState](http://msdn.microsoft.com/en-us/library/system.windows.windowstate.aspx)

# javascript - 在运行时加载 JSON，而不是通过 AJAX 动态加载

> ID：395857
> 
> 赞同：1
> 
> 时间：2008-12-28T05:09:05.870
> 
> 标签：javascript, html, dom

我认为这不能“干净地”完成，但无论如何我都会问。

我有一个系统需要通过 REST GET 调用获取 JSON 资源才能进行初始化。目前系统一直等到 onLoad 事件并触发 ajax 请求来检索资源，我认为这不是最好的方法，因为资源需要运行时。

我想做的是以某种方式在运行时将资源加载到 HTML 标记中，然后评估内容。但我正在研究的是一个供其他人使用的 API，所以我想以一种合乎逻辑和基于标准的方式来实现这一点。

那么有没有符合要求的标签？可以放置在文档头中的标签，我将能够在运行时读取和评估其内容？

问候，

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T07:03:51.410

也许我不明白，但你不能：

```
<?php
$json_data = json_encode($your_data);
?>

<script>
var data = <?= $json_data ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T06:40:13.753

缺少 CDN 缓存（Akamai 等）对您来说会是个问题吗？如果没有，您可以在页面上放置一个脚本标记，将 src 属性指向服务器端脚本，该脚本返回具有 javascript mime 类型的内容并包含您请求的 JS 对象。这就像包含一个外部脚本一样，只是动态生成的。

前任：

在头脑中，有类似的东西：

```
<script src="/js/loadjs.php?id=123"></script> 
```

并让 loadjs.php 返回类似：

```
var MyApp.initData = { id: 123, setting1: "xyz" }; 
```

缺点是您将无法通过 CDN 缓存它。如果您需要，我认为浏览器缓存仍然可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T05:15:57.493

JSON 本身什么都不做。您不能只使用`<script>`它来包含它，因为它会创建一个分配给...无处的对象。你必须修改它——要么把它放在一个 JS 字符串中进行解析，要么`var foo =`在它前面加上一个“”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T13:47:23.063

我想把它放在 iframe 中，但后来我意识到你有一个问题，内容类型是 application/json。当我测试 FF 时，IE 和 Chrome 试图下载文件并询问用户将其存储在哪里（Opera 显示文件）

将其放入 LINK 对您没有帮助，因为浏览器不会尝试获取文档（它只获取已知资源，如样式表）

在我看来，您必须使用 AJAX。你能详细说明为什么这是一个问题吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T14:05:18.987

你能控制任何服务器吗？因为如果是，您可以使用您的服务器来代理服务并使用适当的“var”语句包装 JSON 响应。

或者，我相信这会起作用（我没有测试过，而且我总是错误地大写“innerHtml”），尽管 IMO 它不是非常干净：

```
<script id="data" src="http://someotherserver.com/json.js"></script>
<script type="text/javascript">
    var dataElem = document.getElementById("data");
    if (dataElem)
    {
        var myData = eval(dataElem.innerHtml);
    }
</script> 
```

外科医生的警告：评估来自您无法控制的服务器的结果是一个坏主意。

# ruby-on-rails - 如何在用户注册 Ruby on Rails 后 x 小时发送电子邮件？

> ID：395867
> 
> 赞同：8
> 
> 时间：2008-12-28T05:20:31.760
> 
> 标签：ruby-on-rails, ruby

在用户注册 48 小时后，我将如何在 Ruby on Rails 中向用户发送电子邮件？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T05:54:19.040

正如 Joseph Daigle 所提到的，您显然需要记录用户注册的确切日期和时间。之后，您需要每隔一定分钟数（例如每小时）运行一次 cron，检查是否有注册时间大于 48 小时的新用户，向该用户发送邮件并将该用户标记为已通过电子邮件发送，因此您无需再次向他们发送电子邮件。

根据实际的邮件发送，查看以下文档页面： [http ://wiki.rubyonrails.org/rails/pages/HowToSendEmailsWithActionMailer](http://wiki.rubyonrails.org/rails/pages/HowToSendEmailsWithActionMailer)

它拥有使用 RoR 发送邮件所需的所有知识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-28T15:25:34.330

我建议您使用最新版本的 BackgrounDRb 来处理这个问题。您可以在此处阅读有关 BackgrounDRb 的信息：http: [//backgroundrb.rubyforge.org/](http://backgroundrb.rubyforge.org/)

为了将消息排队以供以后传递，BackgrounDRb 客户端代码（可能在您的应用程序模型的 after_create 回调中）可能如下所示：

```
MiddleMan(:email_worker).enq_send_email_task(:message => @message, 
  :job_key => "notify1",
  :scheduled_at => Time.now + 48.hours) 
```

您必须构建一个 BackgrounDRb 工作人员来处理发送电子邮件：

```
# RAILS_ROOT/lib/workers/email_worker.rb
class EmailWorker < BackgrounDRb::MetaWorker
  set_worker_name :email_worker
  def send_email_task(message)
    # ... Code to send the email message 
  end
end 
```

请注意，为了以这种方式使用 BackgrounDRb，您必须使用持久性作业队列，因此请确保运行 BackgrounDRb 随附的迁移以在应用程序中设置持久性表。

BackgrounDRb 使用“script/backgroundrb start”与 Rails（mongrel、apache 等）分开启动，因此请确保将守护进程添加到您正在使用的任何进程监控（god、monit 等）或创建 / etc/init.d 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-31T01:41:15.053

我写了一个名为**[acts_as_scheduled](http://act-as-scheduled.googlecode.com/)**的插件，可以帮助你。

> act_as_scheduled 允许您管理模型的预定事件。
> 
> 一个很好的例子是使用 Cron 或 BackgroundRB 在后台进程中调度 RSS 源的更新。
> 
> 使用acts_as_scheduled，您的日程管理器可以简单地调用“Model.find_next_scheduled()”来从数据库中获取下一个项目。

我将如何解决这个问题是通过创建一个调度控制器，它将查询数据库中的 next_scheduled，然后使用邮件程序发送消息。您设置 Cron 作业以使用**WGET**或**CURL**定期调用控制器。Cron/Controller 方法的优点是不需要在服务器上进行进一步的基础架构或配置，并且可以避免复杂的线程代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T05:43:58.157

首先，您需要一个正在运行的守护程序或后台服务，它可以每隔几分钟轮询您的队列（可能来自数据库）。

该算法非常简单。记录队列中用户事件的时间。当守护程序检查队列中的该项目并且时间差大于 48 小时时，准备发送电子邮件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T05:51:56.347

您可以使用[异步观察者](http://async-observer.rubyforge.org/)延迟排队作业。理想情况下，你所拥有的任何不知道是即时的（或非常接近它）的东西都应该通过类似的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T16:34:07.220

我想我会倾向于将电子邮件的需求和最早的发送时间存储在单独的某个地方，然后让我的待办事项任务查看它。这样，我只需要处理与要发送的电子邮件一样多的记录，而不是每次都检查每个用户，这要么会变得乏味，要么需要一个可能不必要的索引。作为奖励，如果我有其他任务要在某种日记的基础上执行，相同的结构将很有用，只需稍加修改。

# .net - 从 XML 中删除注释

> ID：395874
> 
> 赞同：3
> 
> 时间：2008-12-28T05:29:50.960
> 
> 标签：.net, regex, comments, strip

我遇到了删除表单注释的需要：

```
<!--  Foo

      Bar  --> 
```

我想使用一个正则表达式来匹配开头和结尾“分隔符”之间的任何内容（包括换行符）。

这个任务的一个好的正则表达式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T05:39:13.157

没有任何。它不能用正则表达式所基于的上下文无关文法来描述。

假设这个线程以 XML 格式导出。如果包含在 CDATA 中，您的示例 (<!-- FOO Bar -->) 将丢失，但它并不完全是注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-28T05:36:05.987

简单的方法：

```
Regex xmlCommentsRegex = new Regex("<!--.*?-->", RegexOptions.Singleline | RegexOptions.Compiled); 
```

还有一个更好的方法：

```
Regex xmlCommentsRegex = new Regex("<!--(?:[^-]|-(?!->))*-->", RegexOptions.Singleline | RegexOptions.Compiled); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-28T07:06:31.593

“正确”的方法是使用 XSLT 并复制除注释之外的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T18:04:47.160

使用正则表达式解析 XML 被认为是不好的风格。使用一些 XML 解析库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-08T13:09:08.553

这是一些完整的示例代码，用于读取 XML 文件，并返回一个字符串，该字符串是没有注释的文件。

```
var text = File.ReadAllText("c:\file.xml");
{ 
  const string strRegex = @"<!--(?:[^-]|-(?!->))*-->";
  const RegexOptions myRegexOptions = RegexOptions.Multiline;
  Regex myRegex = new Regex(strRegex, myRegexOptions);
  string strTargetString = text;
  const string strReplace = @""; 

  string result = myRegex.Replace(strTargetString, strReplace);
  return result;
} 
```

Unfortunately, `RegexOptions.Multiline` alone will not do the trick (which is slightly counterintuitive).

# c++ - 当父进程被杀死时，使用 fork() 创建的子进程是否会自动被杀死？

> ID：395877
> 
> 赞同：49
> 
> 时间：2008-12-28T05:34:19.470
> 
> 标签：c++, linux, process, fork, parent-child

我正在用`fork()`C/C++ 创建子进程。
当父进程结束（或由于某种原因被杀死）时，我希望所有子进程也被杀死。
是系统自动完成的吗？还是我必须自己做？

* * *

预先存在的类似问题：

*   [当父进程退出时，如何使子进程退出？](https://stackoverflow.com/questions/269494/how-can-i-cause-a-child-process-to-exit-when-the-parent-does)
*   [父母退出后如何使子进程死亡？](https://stackoverflow.com/questions/284325/how-to-make-child-process-die-after-parent-exits)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2008-12-28T05:38:08.917

不会。如果父进程被杀死，子进程将成为 init 进程的子进程（进程 id 为 1 并由内核作为第一个用户进程启动）。

init 进程定期检查新的子进程，并等待它们（从而释放由它们的返回值分配的资源）。

这个问题已经在这里用高质量的答案进行了讨论： [How to make child process die after parent exits?](https://stackoverflow.com/questions/284325/how-to-make-child-process-die-after-parent-exits)

# apache-flex - Adobe Air/Flex + SQLite 数据库问题

> ID：395886
> 
> 赞同：4
> 
> 时间：2008-12-28T05:39:04.437
> 
> 标签：apache-flex, sqlite, datagrid, air, adobe

我仍然是 Adob​​e Air/Flex 的新手，并且对 SQL 还是很陌生。

我已经下载[了这个](http://coenraets.org/blog/2008/11/using-the-sqlite-database-access-api-in-air%E2%80%A6-part-1/)（[http://coenraets.org/blog/2008/11/using-the-sqlite-database-access-api-in-air](http://coenraets.org/blog/2008/11/using-the-sqlite-database-access-api-in-air) ...-part-1/）代码并且一直在查看它并且我正在尝试实现相同的想法。

我认为这只是一件愚蠢的事情。我正在使用 Flex Builder。我做了一个新的桌面应用程序项目，没有导入任何东西。

我添加了一个 DataGrid 对象并将其绑定到一个 ArrayCollection：

我正在尝试这样做，因此当程序初始化时，它将从数据库中加载数据（如果存在），否则它将创建一个新数据。

问题是，当应用程序运行时，数据网格是空的。没有列标题，没有数据，什么都没有。我试过改变一大堆东西，我用调试器来确保所有的函数都像他们应该的那样被调用。我不知道我做错了什么。我已经将我的代码与前面提到的代码进行了比较，我在 Google 上查找了教程。有人知道我在做什么错吗？

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="672" height="446"
    applicationComplete="onFormLoaded()"
    title="iRecipes">

    <mx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            private var sqlConnection:SQLConnection;
            [Bindable] private var recipeList:ArrayCollection;

            private function onFormLoaded():void
            {
                sqlConnection = new SQLConnection();
                openDataBase();
            }

            private function openDataBase():void
            {
                var file:File = File.userDirectory.resolvePath("recipes.db");

                sqlConnection.open(file, SQLMode.CREATE);

                if(!file.exists)
                {
                    createDatabase();
                }           

                populateRecipeList()
            }

            private function createDatabase():void
            {
                var statement:SQLStatement = new SQLStatement();
                statement.sqlConnection = sqlConnection;
                statement.text = "CREATE TABLE Recipes (recipeId INTEGER PRIMARY KEY AUTOINCREMENT, recipeName TEXT, authorName TEXT)";
                statement.execute();

                statement.text = "INSERT INTO Recipes (recipeName, authorName) VALUES (:recipeName, :authorName)";

                statement.parameters[":recipeName"] = "Soup";
                statement.parameters[":authorName"] = "Joel Johnson";
                statement.execute();

                statement.parameters[":recipeName"] = "Garbage";
                statement.parameters[":authorName"] = "Bob Vila";
                statement.execute();
            }

            private function populateRecipeList():void
            {
                var statement:SQLStatement = new SQLStatement();
                statement.sqlConnection = sqlConnection;

                statement.text = "SELECT * FROM Recipes";
                statement.execute();
                recipeList = new ArrayCollection(statement.getResult().data);
            }
        ]]>
    </mx:Script>

    <mx:DataGrid dataProvider="{recipeList}">

    </mx:DataGrid>
</mx:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T10:04:44.183

我刚刚用你的代码试过了。我进行了更改并删除了条件，因为我收到有关表不存在的错误。

```
 //if(!file.exists)
 //{
   createDatabase();
 //} 
```

这使数据网格显示了正确的信息。我认为您初始化数据库文件的方式有问题。我现在正在研究它。

尝试使用

```
sqlConnection.open(file, SQLMode.CREATE); 
```

相反，用于打开数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-29T04:49:15.847

谢谢脚。有了你的建议，我相信我已经想通了。我将 if 语句更改为：

```
 if(!file.exists)
            {
                sqlConnection.open(file, SQLMode.CREATE);
                createDatabase();
            }
            else            
            {
                sqlConnection.open(file, SQLMode.UPDATE);
            } 
```

而且效果很好。谢谢你的帮助。

# .net - 使用 RESTful WCF 和 Windows 窗体的用户/通过身份验证

> ID：395892
> 
> 赞同：36
> 
> 时间：2008-12-28T05:47:58.100
> 
> 标签：.net, wcf, restful-authentication, ws-security

为与 IIS 托管的 RESTful WCF 服务对话的 Windows 窗体应用程序实施授权/身份验证的最佳方法是什么？

我问的原因是我很困惑，在筛选了不同的文章和帖子后，表达了不同的方法，最终找到了关于 WCF 安全最佳实践的约 650 页文档”（[http://www.codeplex.com/WCFSecurityGuide](http://www.codeplex.com/WCFSecurityGuide)）我是鉴于我的情况，只是不确定哪种方法是最好的，以及如何开始实施。

我从这篇文章“使用 WCF 3.5 设计和构建 RESTful Web 服务的指南”（[http://msdn.microsoft.com/en-us/library/dd203052.aspx](http://msdn.microsoft.com/en-us/library/dd203052.aspx)）和一个关于 RESTful WCF 服务的 PDC 视频开始，其中很棒，帮助我实现了我的第一个 REST 友好型 WCF 服务，

服务工作后，我返回实施安全性，请参阅。“安全注意事项”（页面下方的四分之一）并尝试按照说明实现 HTTP 授权标头，但是我发现代码不完整（请参阅从未声明过“UserKeys”变量的方式）。这就是我尝试更多地研究如何做到这一点（使用带有“授权”HTTP 标头的 HMAC 哈希，但在 google 上找不到太多内容？）它引导我阅读其他有关消息级安全性的文章，形成身份验证和自定义验证器，坦率地说，我不确定现在采取哪种方法是最好和最合适的。

综上所述（感谢您一直以来的聆听！），我想我的主要问题是，

**- 我应该使用哪种安全实现？

- 有什么方法可以避免在每次 WCF 调用时发送用户名/密码？如果一开始就建立了连接，我不希望发送这些额外的字节，这将是在登录后允许进行后续调用之前。

- 如果我使用 SSL，我是否真的应该关心纯文本以外的任何内容？**

如前所述，.NET 3.5 win forms 应用程序，IIS 托管的 WCF 服务，但重要的是我希望任何和所有 WCF 服务都需要此授权过程（但应该是会话、http 标头或其他），因为我不需要希望任何人都能够通过网络访问这些服务。

我知道上面的帖子很大，但我必须表达我已经失败的路线以及我需要完成的工作，非常感谢任何和所有帮助。

PS：我也知道这篇文章[How to configure secure RESTful services with WCF using username/password + SSL](https://stackoverflow.com/questions/141484/how-to-configure-secure-restful-services-with-wcf-using-usernamepassword-ssl)如果社区建议我从 REST 转向 WCF 服务，我可以这样做，但是我开始这样做是为了保持一致性任何公共 API 的到来。

我认为重要的是我要说明我如何访问我的 WCF 服务（联系服务正在工作，但是验证凭据的最佳方法是什么 - 然后返回成员对象？）：

```
WebChannelFactory<IMemberService> cf = new WebChannelFactory<IMemberService>(
                new Uri(Properties.Settings.Default.MemberServiceEndpoint));
            IMemberService channel = cf.CreateChannel();
            Member m = channel.GetMember("user", "pass"); 
```

从 MS 文章中实现了一半的代码（以及我自己的一些用于测试的代码）：

```
 public Member GetMember(string username, string password)
    {
        if (string.IsNullOrEmpty(username))
            throw new WebProtocolException(HttpStatusCode.BadRequest, "Username must be provided.", null);
        if (string.IsNullOrEmpty(password))
            throw new WebProtocolException(HttpStatusCode.BadRequest, "Password must be provided.", null);

        if (!AuthenticateMember(username))
        {
            WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.Unauthorized;
            return null;
        }

        return new Member() { Username = "goneale" };
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-28T22:57:29.770

好吧，我对 WCF 的 REST 功能没有任何经验，但我确实在理解[我的 WCF 安全问题](https://stackoverflow.com/questions/345414/aspnet-web-site-windows-forms-app-wcf-service-client-credentials)中的安全选择的含义方面做了很多努力。正如您所注意到的，Web 上确实缺乏关于 WCF 的文档，而且我的 REST 经验有限，因此请谨慎回答：

### 我应该使用哪种安全实现？

和

### 如果我使用 SSL，我是否真的应该关心纯文本以外的任何内容？

基于 SSL 的基本身份验证很好——毕竟，大量现有网站就是这样对用户进行身份验证的。（当您登录您的亚马逊购物账户时，他们只是在您通过 SSL 连接输入用户名和密码时传输您的用户名和密码。）我理解这篇文章中关于安全性和字典攻击的内容，但是等等等等，请保持简单并首先获得一些工作。UPS 的 Plain Old XML API 在每次调用时都要求提供用户名和密码，FedEx 的 POX API 也是如此，PayPal 的 SOAP API 和 Cyber​​Source 的 SOAP API 也是如此——这对于现实世界的使用来说似乎已经足够好了。

### 有什么方法可以避免在每次 WCF 调用中发送用户名/密码？如果一开始就建立了连接，我不希望发送这些额外的字节，这将是在登录后允许进行后续调用之前。

这是一个我可以更自信地回答的问题。通常，我们会尝试将面向公众的 WCF 服务设计为无状态的。这样，我们的 WCF 服务就可以轻松扩展；只需在问题上投入更多的硬件、更多的服务器和负载平衡器，我们就不必担心粘滞会话或在某处维护会话状态。所以这意味着如果我们想要“让用户保持登录状态”，那么这不会发生在服务器上。

我最终所做的是将我的网站视为一个受信任的子系统。它使用预共享的 X509 证书针对 WCF 服务进行身份验证，如果客户通过表单身份验证登录到网站，那么它将向服务发送客户用户名标头；WCF 服务上的自定义端点行为将查找此标头，查看它是否由受信任的子系统安装，然后继续模拟该用户，而无需提供用户密码或针对数据库进行验证。

由于您使用的是 REST，因此您可能可以在客户端使用 cookie 来维护状态。如果您使用 ASP.NET 兼容模式，我认为您甚至可以直接使用表单身份验证，但我对这种方法了解不多，因为我的 WCF 服务不是 IIS 托管的。

简而言之，您将不得不在每个请求中发送*一些东西*来识别用户，无论是用户名和密码，只是用户名，还是存储在 cookie 中的一些散列值。如果是最后一个选项，我猜你必须在`Login()`服务上有某种方法或某种东西，它会发送“好的，如果你在未来的请求中传递这个哈希值，你就会被记录。” 但并非所有 REST 客户端都希望接收 cookie，只是没有任何状态的简单 GET/PUT/POST/DELETE 请求。

如果那是我的鞋子，我会选择受信任的子系统方法（其中提供用户名标头以及子系统的预共享凭据），或者我需要在每次调用时进行身份验证。如果所有这些重复请求都成为问题，该服务可能会获得一些高性能的身份验证缓存机制。

希望能有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-03-31T18:16:44.310

使用基本身份验证：

```
WebHttpBinding binding = new WebHttpBinding();
binding.SendTimeout = TimeSpan.FromSeconds(25);
binding.Security.Mode = WebHttpSecurityMode.TransportCredentialOnly;
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;

Uri address = new Uri("http://localhost:3525/WcfRestWeb/Quotes.svc");

WebChannelFactory<IQuoteService> factory =
             new WebChannelFactory<IQuoteService>(binding, address);

factory.Credentials.UserName.UserName = "tan";
factory.Credentials.UserName.Password = "wani";

IQuoteService proxy = factory.CreateChannel();

var response = proxy.GenerateQuote(GetQuoteRequest());
Console.WriteLine("Quote Amount: " + response.QuoteAmount); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-29T05:24:22.813

感谢您的回答。退后一步，清晰而公正地看待整个问题（换句话说，忽略我投入研究 RESTful 服务的 4 个多小时）我正试图让事情在没有 REST 的情况下工作，并且我试图遵循的参考资料现在是这些： -

*   [http://blogs.msdn.com/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx](http://blogs.msdn.com/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx)
*   [http://www.devatwork.nl/index.php/2007/05/31/wcf-username-authentication/](http://www.devatwork.nl/index.php/2007/05/31/wcf-username-authentication/)

这似乎适用于我想要的。

**lextm：**我听到了你的意见，在我写完这篇文章后，我仔细浏览了 WCF 安全指南，并根据他们希望你在每个原则上考虑的选项记录了我的所有要求。

我选择了：
- 传输安全模式：传输安全
- 身份验证。选项：基本安全
- 绑定：wsHttpBinding
- 使用用户名验证器的自定义身份验证

根据为每个提供的示例并查看带有 WCF 服务的 windows 窗体的用例，这似乎是最好的方法。

**Nicholas：**同意，将服务设计为无状态可能是更好的方法。

因此，根据我有空时将关注的文章，它使用了 X509 证书。我对它很陌生（知道你正在使用这个 Nicholas），因为这个客户端应用程序可以从互联网上下载并安装在任何拥有我网站帐户的人的 PC 上，这会很好吗？

为你的帮助干杯，格雷厄姆

*PS：[我认为这是与我的场景最接近的用例](http://www.codeplex.com/WCFSecurity/Wiki/View.aspx?title=How%20To%20-%20Use%20wsHttpBinding%20with%20Username%20Authentication%20and%20TransportWithMessageCredential%20in%20WCF%20calling%20from%20Windows%20Forms&referringTitle=How%20Tos)（除了我希望使用传输安全性），我是否应该考虑实施它，因为它不需要证书？从我读到的报价中，我可能需要证书。因为“WCF 需要 X509 证书加密，因为客户端凭据（用户名/密码）在 SOAP 消息中以明文形式传递。” - 但是根据我所学到的和我们所说的，如果我使用 SSL，这一点可能没有实际意义？*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T11:35:11.287

好吧，您真的不应该过多关注 WinForms 方面，因为 WCF 方面是关键。

顺便说一句，您是否仔细阅读了这些页面？

概念 [http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=Ch%2005%20-%20Authentication,%20Authorization%20and%20Identities%20in%20WCF&referringTitle=Home](http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=Ch%2005%20-%20Authentication,%20Authorization%20and%20Identities%20in%20WCF&referringTitle=Home)

以及如何 [http://www.codeplex.com/WCFSecurity/Wiki/View.aspx?title=How%20Tos&referringTitle=Home](http://www.codeplex.com/WCFSecurity/Wiki/View.aspx?title=How%20Tos&referringTitle=Home)

# c++ - 为什么不能通过 ACE_DEBUG 显示调试？

> ID：395906
> 
> 赞同：0
> 
> 时间：2008-12-28T06:07:41.103
> 
> 标签：c++, ace

ACE_DEBUG 在源头文件中声明#include<ace/Task.h>。我跟踪调试由

> ACE_DEBUG((LM_ERROR, "Reader pathSetOpen : %s ",pathSetOpen);

显示值的字符串变量名称“pathSetOpen”仍然执行程序。但我无法编译代码。关于ACE_DEBUG，是打印调试信息的宏。

编译错误代码。

> EnvTest.cpp:353:1：错误：未终止的参数列表调用宏“ACE_DEBUG”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T06:11:04.043

你忘记了一个右括号：

```
ACE_DEBUG((LM_ERROR, "Reader pathSetOpen : %s ",pathSetOpen)); 
```

# build - 将文本文件内容包含到 WiX 脚本中

> ID：395922
> 
> 赞同：4
> 
> 时间：2008-12-28T06:37:44.583
> 
> 标签：build, wix, versioning

有没有办法从文本文件中读取 WiX 变量的值？

我想要做的是将特定于版本的信息包含到安装包中。

此版本信息在预构建步骤中提取到文本文件中，问题是如何将此文本文件内容传播到构建过程中。

一种可能的解决方案是在预构建步骤中更新整个 .wxs 文件，但感觉有点草率。

有没有其他侵入性较小的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-28T15:45:23.543

创建一个单独的文件“includes.wxi”，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<Include Id="VersionNumberInclude">
    <?define MajorVersion="1" ?>
    <?define MinorVersion="5" ?>
    <?define MicroVersion="99" ?>
    <?define BuildVersion="14954" ?>
</Include> 
```

在你的 wxs 文件中，你可以像这样包含这个文件：

```
<?include VersionNumberInclude.wxi ?> 
```

定义可以这样使用：

```
<?define VersionNumberInternal="$(var.MajorVersion).$(var.MinorVersion).$(var.BuildVersion)" ?>
<?define VersionNumberUserVisible="$(var.MajorVersion).$(var.MinorVersion).$(var.MicroVersion).$(var.BuildVersion)" ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T15:50:58.133

在我的环境中，WiX 脚本*始终*由 MSBuild 文件构建。这意味着我可以在命令行上传递我想要的任何特定于版本的信息。CruiseControl.NET 在构建时将这些版本号传递给我的 WiX 脚本。

# java - Java 2D 游戏编程 - 新手问题

> ID：395923
> 
> 赞同：3
> 
> 时间：2008-12-28T06:38:44.923
> 
> 标签：java, 3d, 2d, sprite

我们是一个程序员和设计师的团队，我们想制作一个中型的 java 游戏，在 web 浏览器中作为 applet 播放。我（程序员）有3年的一般开发经验，但我之前没有做过任何游戏编程。

我们假设：

*   我们将决定游戏的情节、故事情节等。

*   我们将创建一个我们需要的资产（图像）列表，即玩家图像、怪物图像、城镇、建筑物、树木、物体等。（我们暂时不添加任何音乐/声音效果）

*   当我读完我买的一些游戏编程书籍时，设计师将开始创建这些图像。设计师将创建游戏的第一个城镇/关卡，然后将这些图像传递给我，我将开始编写第一个关卡，他将开始下一个关卡，在 4-5 个关卡之后，我们将发布 v.1的游戏。

**问题 1：**这是用于该项目的正确方法吗？

**问题 2：**设计师应该以什么格式创建这些图像。它们应该是 .bmp、.jpeg 还是 .gif 文件？而且，他会将所有这些图像放在一个文件中，还是将每个怪物/物体/建筑物放在自己的文件中？笔记; 我们现在坚持 2D 而不是 3D。

**问题 3：**我见过一些游戏艺术品，其中有一个怪物的文件，在那个文件中，大约有 3-4 张来自不同方向的怪物图像，都放在一个文件中，我想是因为它们'是动画的一部分。这是一个插图：

[向右看的怪物] ... [在前面看的怪物] ... [向右看的怪物[

所有这些都在一个文件中。这就是他必须向我提供这些动画的方式吗？

我想知道的是，他必须以什么格式向我提供设计的图像，以便我能够在 Java 代码中轻松访问/操作它们。

所有答案表示赞赏:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T14:30:16.097

我对每个问题都有一些评论。

**问题 1：**您说您将开始编写级别 1、2、.. 的代码。我建议您改为创建一个*可重用的框架*，或者从全局中查看它。对于您提供的信息，我认为您将制作某种 RPG 游戏。有很多东西可以在关卡之间共享，例如商店、对话系统。所以专注于可扩展性。

为什么要等设计师传图？您可以从自己创建的伪图形文件开始编码。然后，您可以通过这种方式与设计师并行工作。您可以稍后将您的伪图形文件替换为设计师提供的文件。

**问题 2：** JPG 不适合像素艺术风格的图像，这种风格在大多数 2D 游戏中经常出现。而 GIF 只支持 256 色。对我来说，最好的选择似乎是 PNG。

设计师也应始终将原始艺术品保留为可编辑的格式。您可能希望将来更改图形。

**问题3：**视情况而定。提到的将角色动画保存在单个文件中的格式称为[Sprite](http://en.wikipedia.org/wiki/Sprite_(computer_graphics))。如果您将资源保持在这种 sprite 格式中，那么您将通过指定坐标来读取每个子图像。然而，精灵可以帮助你保持事物的有序性。与“僵尸”角色相关的所有 2D 图形都保存在一个地方。因此易于维护。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-28T07:01:59.370

关于图像格式：不要让设计师提供 jpg 格式的东西，因为你会失去质量。

让他以 png 格式发送，并根据需要将其转换为您喜欢的格式。

另外，请记住让他发送源文件（photoshop/illustrator/3dsmax/whatever），以防您需要进行微小的更改，而无需雇用图形人员。谁知道他将来是否仍然可用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-28T06:50:41.203

我想向您建议，在您对工作流程做出任何决定之前，您和您的同事先去看看 JavaFX，看看它是否是最能满足您需求的工具包。

[http://java.sun.com/javafx/](http://java.sun.com/javafx/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T09:35:20.967

[怪物往右看]…[怪物往前看]…[怪物往左看]这种动画划分的风格在我偷看游戏数据的时候就已经存在了，所以我建议走那条路。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T09:43:12.277

我正要发表与 Wouter 相同的评论：使用 PNG，一种高度压缩（与 BMP 相对）、无损（与 Jpeg 相对）、全彩色和多级透明度（与 Gif 相对）的现代格式。

为什么人们将几个精灵放在同一个图像中？实际上，对于 Java，我不确定图像是否是 jar 的一部分......我知道它在 CSS 中很有趣，例如，因为它减少了要下载的图像数量，所以服务器上的点击次数，这是众所周知的 Web 优化。对于硬盘上的游戏，减少小文件的数量也很有趣。
设计师也可以欣赏这一点。至少在精灵使用调色板的时候：你只有一个图像，使用相同的调色板：更容易编辑，并略微减小整体尺寸（有时内存很昂贵！）。

我无法回答方法论，我从未在团队中玩过游戏……如果它符合您的需求，那可能是正确的方法论……

duncan 指向JavaFX，我将指向[pullcore](http://code.google.com/p/pulpcore/ "浆核 - 谷歌代码")，它似乎是一个很有前途的库。当然，还有很多其他的，比如 JGame 等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T09:48:08.943

这里有一群专业人士：[http ://www.javagaming.org/](http://www.javagaming.org/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-28T14:45:26.127

这不是回答任何问题。但是对于游戏开发/模拟引擎学习，如果您需要参考：

[http://www.cs.chalmers.se/idc/ituiv/kurser/08/simul/](http://www.cs.chalmers.se/idc/ituniv/kurser/08/simul/)

这是哥德堡查尔姆斯大学模拟引擎课程讲座的链接。老师作为一家游戏公司，讲课相当不错。检查我们在课堂上的幻灯片，也许它们会对你有所帮助。

# c# - 简单正则表达式的困难（匹配前缀/后缀）

> ID：395928
> 
> 赞同：2
> 
> 时间：2008-12-28T06:46:16.953
> 
> 标签：c#, regex

我正在尝试开发一个将在 C# 程序中使用的正则表达式..

我最初的正则表达式是：

```
(?<=\()\w+(?=\)) 
```

成功匹配“（foo）” - 匹配但从输出中排除打开和关闭括号，以生成简单的“foo”。

但是，如果我将正则表达式修改为：

```
\[(?<=\()\w+(?=\))\] 
```

我尝试与“[(foo)]”匹配，但它无法匹配。这是令人惊讶的。我只是在前面的表达式周围添加文字左大括号和右大括号。我难住了。我使用 Expresso 来开发和测试我的表达方式。

提前感谢您的帮助。

抢塞西尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T06:53:51.057

你的后视是问题所在。以下是字符串的处理方式：

1.  我们在字符串中看到 [，它与正则表达式匹配。
2.  正则表达式中的后视要求我们查看前一个字符是否为 '('。这失败了，因为它是一个 '['。

至少这就是我猜想导致问题的原因。

试试这个正则表达式：

```
(?<=\[\()\w+(?=\)\]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-28T08:56:44.227

断章取义，很难判断，但这里的后视可能是矫枉过正。它们对于排除字符串（如在 strager 的示例中）和其他一些简单 RE 失败的特殊情况很有用，但我经常看到它们用于更简单的表达式更容易编写、以更多 RE 风格工作并且可能更快的地方。
在您的情况下，您可能会编写`(\b\w+\b)`例如，甚至`(\w+)`使用自然边界，或者如果您想区分 (foo) 和 -foo- （例如），使用`\((\w+)\)`.
现在，也许上下文决定了这种复杂的使用（或者也许您只是在尝试后视），但了解替代方案是件好事。

现在，如果您只是好奇为什么第二个表达式不起作用：这些被称为“零宽度断言”：它们检查后面或前面的内容是否符合预期，但它们不使用字符串因此，在它们之后（或之前，如果是否定的）它们也必须与断言匹配。例如。如果您在与断言的内容不匹配的积极前瞻之后放置了一些东西，那么您确定 RE 将失败。

# .net - .NET 插件开发

> ID：395952
> 
> 赞同：1
> 
> 时间：2008-12-28T07:27:20.070
> 
> 标签：.net, add-in

我正在编写一个程序，允许开发人员为其编写插件，我希望开发人员能够挂钩程序中发生的事件。

我的代码未编译，因为我无法在 IMyProgram 接口中声明委托。

所以我想这更像是一个设计问题。您将如何将接口传递给 AddIn，以便 AddIn 可以挂钩程序事件？

```
[AddInContract]
    public interface IMyProgramAddInContract : IContract {

        /// <summary>
        /// Initializes AddIn
        /// </summary>
        void Init(IMyProgram instance);

        System.Drawing.Image AddInIcon { get; }

        String DisplayName { get; }

        String Description { get; }
    }

    [AddInContract]
    public interface IMyProgram : IContract {

        public delegate EventHandler EmailEventHandler(object sender, EmailEventArgs args);

        public event EmailEventHandler BeforeCheck;
        public event EmailEventHandler AfterCheck;
        public event EmailEventHandler EmailDownloaded;
        public event EmailEventHandler OnProcessMessage;

    }

    [AddInBase]
    public class EmailEventArgs : EventArgs {

        public override string ToString() {
            return "todo";
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T08:35:30.087

如果您希望为您的插件实现事件模型，那么您应该使用委托*而不是*接口 - 查看 MSDN 中的这个简介，看看它是否清除了任何东西：

[何时使用委托而不是接口（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173173.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-28T08:37:59.163

问题已解决。

我不知道委托可以在命名空间级别声明而不在类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T07:37:31.047

IMyProgram 正在为代表和事件声明一个公共范围。删除它们，我认为您将能够编译

# php - PHP 与应用服务器？

> ID：395960
> 
> 赞同：5
> 
> 时间：2008-12-28T07:56:27.983
> 
> 标签：php, python

对于那些有机会使用 PHP 编写 Web 应用程序然后作为应用程序服务器（例如 CherryPy 或 Pylons 等基于 Python 的解决方案）的人，在什么情况下应用程序服务器是 PHP 的更好替代方案？

我倾向于支持 PHP，因为它几乎可以在任何 Web 服务器（尤其是共享主机）上使用，但我正在寻找其他充分的理由来做出明智的选择。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-29T13:41:38.487

我觉得有些回复没有直接解决最初的问题，所以我决定发表我自己的。我知道问题是关于`mod_php`部署模型和应用程序服务器部署模型之间的区别。

简单来说，PHP 对每个请求执行一个给定的脚本，并且应用程序不知道之前发生了什么（除非它以某种方式被模拟）。此外，甚至在每个请求上都会解析源代码（除非您使用像 APC 这样的字节码缓存）。这个过程可能很慢，特别是如果您有一个具有复杂初始化的框架。

与此相反，应用程序服务器必须启动一次，然后等待处理请求。应用程序服务器应该在每次请求后清理资源（分配的内存、打开的描述符等），它还可以汇集某些资源（如数据库连接），这些资源可以在请求之间重用以获得额外的性能。

这种后来的模型（应用程序服务器）在大多数情况下更有效，但另一方面更难以设置和维护。它的要求也更高，因为您必须更加注意使用的资源，以避免资源泄漏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-28T08:21:24.657

部署 PHP 的优势是巨大的。您还将拥有庞大的开发人员基础，听起来您已经拥有相当多的专业知识。一般来说，如果你知道如何很好地使用一门编程语言，那么坚持下去会更安全。

使用像 Pylons 这样的 Python Web 框架的优点是你的代码会更整洁，更易于维护。当然，这对于 PHP 来说是可能的，但似乎更难实现。Python 只是一种比 PHP 更好的语言，所以这可能会影响你的决定。

就个人而言，我不会将 Pylons 或 CherryPy 描述为“应用程序服务器”，如果您想要 Python 应用程序服务器，请尝试[Zope](http://www.zope.org/)。（它们都服务于 WSGI 应用程序，但这是另一个问题的主题。）似乎有很多等效的 PHP 框架，它们已在其他答案中列出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-29T12:53:48.583

与同等的 PHP 站点相比，Python 网络应用程序往往需要更多的初始设置和开发（尤其是对于小型站点）。PHP 也有更多可重用的部分（即 Wordpress 作为博客）。配置服务器以运行 Python Web 应用程序可能是一个困难的过程，并且并不总是有很好的文档记录。PHP 往往很容易与 Apache 一起运行。

此外，由于 PHP 使用非常广泛并且初学者大量使用，因此往往有非常好的文档。

然而，Python 更有趣，更易于维护。它可以很好地扩展（在开发复杂性方面，而不是流量方面）。

就个人而言，我还想说，使用 Python 往往会训练你以更好的方式解决问题。由于学习了 Pythonic 的做事方式，我绝对是一个更好的开发人员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T08:16:51.933

PHP 中有几种产品与 CherryPy 或 Pylons 占据相同的空间。

（当然，除了他们不运行 Python ；）

看一下 -

*   CakePHP - [http://www.cakephp.org/](http://www.cakephp.org/)
*   Symfony - [http://www.symfony-project.org/](http://www.symfony-project.org/)
*   代码点火器 - [http://codeigniter.com/](http://codeigniter.com/)
*   Zend 框架 - [http://framework.zend.com/](http://framework.zend.com/)

就个人而言，我更喜欢 Drupal，它是一个很棒的框架，并带有许多开箱即用的 CMS 和社区站点功能。上面的那些在很多方面都有很大的不同，但是如果你想要一个在 PHP 上运行的应用程序框架/应用程序服务器，这些都应该为你提供两全其美的选择。

*   Drupal - [http://drupal.org/](http://drupal.org/)

哪一个是正确的选择在很大程度上取决于口味，尽管每个都有其不同的优点和缺点。

还有更多——这些只是我从同事和合作者那里听到的好消息。这不是一个完整的列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T21:35:46.080

使用 Pylons、Django 等应用服务器需要更多的工作来设置和部署 PHP 应用程序，而这些应用程序通常是开箱即用的。我运行了一些 Django 应用程序，并且必须学习一些使用 mod_python 配置 apache 才能让事情正常工作。我付出了这些努力，因为对我来说，用 python 编码比用 PHP 更有趣，而且一旦你得到了正确的 Apache 配置，你就再也不必再弄乱它了。另一方面，如果您决定使用 Django、Rails、Pylons 等框架，它们往往会解决许多您原本可以自己完成的小型重复性任务。但是框架本身就是一个巨大的讨论话题。

# asp.net - ASP.net 中 GridView/DetailsView/FormView 的主要区别是什么

> ID：395968
> 
> 赞同：6
> 
> 时间：2008-12-28T08:11:31.727
> 
> 标签：asp.net, gridview, detailsview

GridView、DetailView、FormView有什么异同？

当您将使用这些控件中的每一个时，有哪些用例场景，为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-29T14:44:29.297

Formview 用于插入/更新/查看单个记录。

DetailsView 旨在显示单个记录，并可选择支持分页和导航。

GridView 主要用于显示/更新多条记录。它被认为是 .NET 1.1 中 DataGrid 控件的替代品。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-28T08:39:30.047

好吧，我会阅读 ASP.Net 快速入门教程，其中对每个控件进行了很好的概述：

[ASP.NET 快速入门教程](http://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/data/default.aspx)

如果您要显示“表格”数据，那么您可能会使用 DetailsView，因为它专为主从关系而设计，并且内置了表格呈现（FormsView 没有）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T08:38:20.033

GridView 将它们全部显示为 HTML 表格。如果单击一行中的某个键，DetailView 会在单独的空间中显示该行的详细信息。如果需要插入新行，FormView 也会出现在单独的空间中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-21T07:27:32.693

表单视图是数据绑定的，它是用户界面控件，但详细信息视图具有内置的表格呈现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T13:51:31.593

GridView 支持编辑。您可以使用命令`edit`, `update`, `delete`, in `ButtonField`,`ImageButton`等`Hyperlink`作为模板。此外，如果我们指定`autogenerate deletebutton`，它的`autogenerate editbutton`属性`GridView`将为它添加列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-13T05:42:41.120

表单视图：表单视图控件使我们能够一次查看单个记录。我们可以根据您的要求自定义页面，并对布局进行更多控制。

详细信息视图：详细信息视图还一次查看单个记录。详细信息视图结果类似于 HTML 表格。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2010-03-18T06:30:42.473

Gridview 仅用于查看数据，我们不能进行任何修改（无法编辑或插入）。

Dataview 用于查看、编辑或插入数据。dataview 内置了表格渲染。它会在一个从上到下的直接列表中为您生成它们，不可能移动它们以使它们更加用户友好。

在 formview 中，您可以将元素放置在页面上任何您想要的位置。这意味着 formview 提供了用户定义的模板进行渲染。

# mysql - MySQL 调度冲突

> ID：395973
> 
> 赞同：1
> 
> 时间：2008-12-28T08:22:32.343
> 
> 标签：mysql, datetime, calendar, schedule

嘿，我偶然发现这个网站正在寻找 mySQL 表中事件重叠的解决方案。这个解决方案给我留下了深刻的印象（这已经很有帮助）我想我会看看我是否能得到更多帮助......

好的，所以乔想和工作的人换班。他有一个出庭日期。他去了换班表格，它拉起了本周的时间表（或剩下的时间表）。这是通过数据库查询完成的。没有汗水。他选择换班。从这一点开始，它变得多刺。

因此，首先，表单将 shift start 和 shift end 传递给脚本。它会针对与此班次重叠的班次的任何人运行查询。他们不能同时工作两班，因此该查询中的所有用户 ID 都被列入黑名单。此查询如下所示：

```
SELECT DISTINCT user_id FROM shifts
WHERE
FROM_UNIXTIME('$swap_shift_start') < shiftend
AND FROM_UNIXTIME('$swap_shift_end') > shiftstart 
```

接下来，我们对所有班次运行查询，这些班次 a) 长度相同（公司政策），并且 b) 不与 Joe 正在工作的任何其他班次重叠。

我目前拥有的是这样的：

```
SELECT *
FROM shifts
AND shiftstart BETWEEN  FROM_UNIXTIME('$startday') AND FROM_UNIXTIME('$endday')
AND user_id NOT IN ($busy_users) 
AND (TIME_TO_SEC(TIMEDIFF(shiftend,shiftstart)) = '$swap_shift_length')
$conflict_dates
ORDER BY shiftstart, lastname 
```

现在，您可能想知道“$conflict_dates 是什么？？？”

好吧，当乔提交交换班次时，它会重新加载他一周的班次，以防他决定检查另一个班次的潜力。所以当它执行第一个查询时，当脚本循环并输出他的选择时，它也在构建一个看起来像这样的字符串：

```
AND NOT(
'joe_shift1_start' < shiftend
AND 'joe_shift1_end' > shiftstart)
AND NOT(
'joe_shift2_start' < shiftend
AND 'joe_shift2_end' > shiftstart)
...etc 
```

这样数据库就会得到一个相当长的查询，如下所示：

```
SELECT *
FROM shifts
AND shiftstart BETWEEN  FROM_UNIXTIME('$startday') AND FROM_UNIXTIME('$endday')
AND user_id NOT IN ('blacklisteduser1', 'blacklisteduser2',...etc) 
AND (TIME_TO_SEC(TIMEDIFF(shiftend,shiftstart)) = '$swap_shift_length')
AND NOT(
'joe_shift1_start' < shiftend
AND 'joe_shift1_end' > shiftstart)
AND NOT(
'joe_shift2_start' < shiftend
AND 'joe_shift2_end' > shiftstart)
AND NOT(
'joe_shift3_start' < shiftend
AND 'joe_shift3_end' > shiftstart)
AND NOT(
'joe_shift4_start' < shiftend
AND 'joe_shift4_end' > shiftstart)
...etc
ORDER BY shiftstart, lastname 
```

所以，我的希望是，要么 SQL 有一些天才的方式以更简单的方式处理这个问题，要么有人可以指出一个奇妙的逻辑原理，以更智能的方式解释潜在的冲突。（请注意使用“开始>结束，结束<开始”，然后我发现我正在使用中间并且不得不从两端减去一分钟。）

谢谢！

一种

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T15:01:15.723

我认为您应该能够使用内部选择而不是生成的字符串来排除乔的其他班次，例如：

```
SELECT *
FROM shifts s1
AND shiftstart BETWEEN  FROM_UNIXTIME('$startday') AND FROM_UNIXTIME('$endday')
AND user_id NOT IN ($busy_users) 
AND (TIME_TO_SEC(TIMEDIFF(shiftend,shiftstart)) = '$swap_shift_length')
AND (SELECT COUNT(1) FROM shifts s2
     WHERE s2.user_id = $joes_user_id
     AND   s1.shiftstart < s2.shiftend
     AND   s2.shiftstart < s1.shiftend) = 0
ORDER BY shiftstart, lastname 
```

基本上，每一行都有一个内部查询，用于查询 Joe 重叠的班次计数，并确保它为零。因此，只会返回不与 Joe 的任何现有班次重叠的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T08:45:33.407

您可以将`joe_shift{1,2,3}` 值加载到 TEMPORARY 表中，然后执行查询以对其进行联接，使用外部联接仅查找不匹配的班次：

```
CREATE TEMPORARY TABLE joes_shifts (
 shiftstart DATETIME
 shiftend   DATETIME
);
INSERT INTO joes_shifts (shiftstart, shiftend) VALUES
  ('$joe_shift1_start', '$joe_shift1_end'),
  ('$joe_shift2_start', '$joe_shift2_end'),
  ('$joe_shift3_start', '$joe_shift3_end'),
  ('$joe_shift4_start', '$joe_shift4_end');
-- make sure you have validated these variables to prevent SQL injection

SELECT s.*
FROM shifts s
  LEFT OUTER JOIN joes_shifts j
  ON (j.shiftstart < s.shiftend OR j.shiftend > s.shiftstart) 
WHERE j.shiftstart IS NULL
  AND s.shiftstart BETWEEN FROM_UNIXTIME('$startday') AND FROM_UNIXTIME('$endday')
  AND s.user_id NOT IN ('blacklisteduser1', 'blacklisteduser2',...etc) 
  AND (TIME_TO_SEC(TIMEDIFF(s.shiftend,s.shiftstart)) = '$swap_shift_length'); 
```

由于 LEFT OUTER JOIN，当 中没有匹配`joes_shifts`的行时，列为 NULL。

# algorithm - 表示连续概率分布

> ID：395981
> 
> 赞同：22
> 
> 时间：2008-12-28T08:40:11.467
> 
> 标签：algorithm, math, haskell, statistics, probability

我有一个涉及连续概率分布函数集合的问题，其中大部分是根据经验确定的（例如出发时间、运输时间）。我需要的是获取其中两个 PDF 并对它们进行算术运算的某种方法。例如，如果我有两个取自 PDF X 的值 x 和取自 PDF Y 的 y，我需要获取 (x+y) 或任何其他操作 f(x,y) 的 PDF。

分析解决方案是不可能的，所以我正在寻找的是允许这些事情的 PDF 的一些表示。一个明显（但计算成本高）的解决方案是蒙特卡罗：生成大量 x 和 y 值，然后仅测量 f(x, y)。但这需要太多的 CPU 时间。

我确实考虑将 PDF 表示为范围列表，其中每个范围具有大致相等的概率，有效地将 PDF 表示为均匀分布列表的并集。但我看不出如何将它们结合起来。

有人对这个问题有什么好的解决方案吗？

**编辑：**目标是创建一种用于操作 PDF 的迷你语言（又名域特定语言）。但首先我需要理清底层的表示和算法。

**编辑 2：** dmckee 建议使用直方图实现。这就是我对统一分布列表的理解。但我不知道如何将它们结合起来创建新的发行版。最终我需要找到像 P(x < y) 这样的东西，以防它可能非常小。

**编辑 3：**我有一堆直方图。它们不是均匀分布的，因为我是从发生数据生成它们的，所以基本上如果我有 100 个样本并且我想要直方图中的 10 个点，那么我为每个条分配 10 个样本，并使条的宽度可变但面积不变。

我已经发现要添加 PDF，您需要对它们进行卷积，并且我已经为此做好了数学准备。当你对两个均匀分布进行卷积时，你会得到一个包含三个部分的新分布：较宽的均匀分布仍然存在，但每边都有一个三角形，其宽度与较窄的分布相同。因此，如果我对 X 和 Y 的每个元素进行卷积，我会得到一堆这些，全部重叠。现在我试图弄清楚如何将它们全部相加，然后得到一个最接近它的直方图。

我开始怀疑蒙特卡洛到底是不是一个坏主意。

**编辑 4：** [本文](http://www.heldermann-verlag.de/eqc/eqc01_16/eqc16002.pdf)详细讨论了均匀分布的卷积。一般来说，你会得到一个“梯形”分布。由于直方图中的每个“列”都是均匀分布，我希望可以通过对这些列进行卷积并对结果求和来解决问题。

然而，结果比输入复杂得多，并且还包括三角形。 **编辑 5：** [删除了错误的内容]。但是，如果这些梯形近似为具有相同面积的矩形，那么您会得到正确的答案，并且减少结果中的矩形数量看起来也很简单。这可能是我一直在寻找的解决方案。

**编辑6：**解决！这是这个问题的最终 Haskell 代码：

```
-- | Continuous distributions of scalars are represented as a
-- | histogram where each bar has approximately constant area but
-- | variable width and height.  A histogram with N bars is stored as
-- | a list of N+1 values.
data Continuous = C {
      cN :: Int,
      -- ^ Number of bars in the histogram.
      cAreas :: [Double],
      -- ^ Areas of the bars.  @length cAreas == cN@
      cBars :: [Double]
      -- ^ Boundaries of the bars.  @length cBars == cN + 1@
    } deriving (Show, Read)

{- | Add distributions.  If two random variables @vX@ and @vY@ are
taken from distributions @x@ and @y@ respectively then the
distribution of @(vX + vY)@ will be @(x .+. y).

This is implemented as the convolution of distributions x and y.
Each is a histogram, which is to say the sum of a collection of
uniform distributions (the "bars").  Therefore the convolution can be
computed as the sum of the convolutions of the cross product of the
components of x and y.

When you convolve two uniform distributions of unequal size you get a
trapezoidal distribution. Let p = p2-p1, q - q2-q1\.  Then we get:

>   |                              |
>   |     ______                   |
>   |     |    |           with    |  _____________
>   |     |    |                   |  |           |
>   +-----+----+-------            +--+-----------+-
>         p1   p2                     q1          q2
> 
>  gives    h|....... _______________
>            |       /:             :\
>            |      / :             : \                1
>            |     /  :             :  \     where h = -
>            |    /   :             :   \              q
>            |   /    :             :    \
>            +--+-----+-------------+-----+-----
>             p1+q1  p2+q1       p1+q2   p2+q2

However we cannot keep the trapezoid in the final result because our
representation is restricted to uniform distributions.  So instead we
store a uniform approximation to the trapezoid with the same area:

>           h|......___________________
>            |     | /               \ |
>            |     |/                 \|
>            |     |                   |
>            |    /|                   |\
>            |   / |                   | \
>            +-----+-------------------+--------
>               p1+q1+p/2          p2+q2-p/2

-}
(.+.) :: Continuous -> Continuous -> Continuous
c .+. d = C {cN     = length bars - 1,
             cBars  = map fst bars, 
             cAreas = zipWith barArea bars (tail bars)}
    where
      -- The convolve function returns a list of two (x, deltaY) pairs.
      -- These can be sorted by x and then sequentially summed to get
      -- the new histogram.  The "b" parameter is the product of the
      -- height of the input bars, which was omitted from the diagrams
      -- above.
      convolve b c1 c2 d1 d2 =
          if (c2-c1) < (d2-d1) then convolve1 b c1 c2 d1 d2 else convolve1 b d1 
d2 c1 c2
      convolve1 b p1 p2 q1 q2 = 
          [(p1+q1+halfP, h), (p2+q2-halfP, (-h))]
               where 
                 halfP = (p2-p1)/2
                 h = b / (q2-q1)
      outline = map sumGroup $ groupBy ((==) `on` fst) $ sortBy (comparing fst) 
$ concat
                [convolve (areaC*areaD) c1 c2 d1 d2 |
                 (c1, c2, areaC) <- zip3 (cBars c) (tail $ cBars c) (cAreas c),
                 (d1, d2, areaD) <- zip3 (cBars d) (tail $ cBars d) (cAreas d)
                ]
      sumGroup pairs = (fst $ head pairs, sum $ map snd pairs)

      bars = tail $ scanl (\(_,y) (x2,dy) -> (x2, y+dy)) (0, 0) outline
      barArea (x1, h) (x2, _) = (x2 - x1) * h 
```

其他运算符留给读者练习。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2011-04-05T16:20:14.757

不需要直方图或符号计算：如果采取正确的观点，一切都可以在语言级别以封闭形式完成。

*[我将交替使用术语“度量”和“分布”。另外，我的 Haskell 生锈了，请您原谅我在这方面的不精确。]*

概率分布实际上是**codata**。

设 mu 为概率测度。您可以对度量做的唯一事情是将其与测试函数集成（这是“度量”的一种可能的数学定义）。请注意，这是您最终将要做的：例如，针对身份进行整合就是取平均值：

```
mean :: Measure -> Double
mean mu = mu id 
```

另一个例子：

```
variance :: Measure -> Double
variance mu = (mu $ \x -> x ^ 2) - (mean mu) ^ 2 
```

另一个例子，它计算 P(mu < x)：

```
cdf :: Measure -> Double -> Double
cdf mu x = mu $ \z -> if z < x then 1 else 0 
```

这表明了一种二元性方法。

因此类型`Measure`应表示类型`(Double -> Double) -> Double`。这允许您对 MC 模拟的结果、针对 PDF 的数值/符号求积等进行建模。例如，函数

```
empirical :: [Double] -> Measure
empirical h:t f = (f h) + empirical t f 
```

返回 f 对通过例如获得的*经验测量的积分。*MC 采样。还

```
from_pdf :: (Double -> Double) -> Measure
from_pdf rho f = my_favorite_quadrature_method rho f 
```

从（常规）密度构建度量。

现在，好消息。如果 mu 和 nu 是两个度量，则*卷积* `mu ** nu`由下式给出：

```
(mu ** nu) f = nu $ \y -> (mu $ \x -> f $ x + y) 
```

因此，给定两个度量，您可以针对它们的卷积进行积分。

此外，给定 law 的随机变量 X，`mu`a * X 的定律由下式给出：

```
rescale :: Double -> Measure -> Measure
rescale a mu f = mu $ \x -> f(a * x) 
```

此外，在我们的框架中，phi(X) 的分布由[图像度量](http://en.wikipedia.org/wiki/Pushforward_measure)phi_* X 给出：

```
apply :: (Double -> Double) -> Measure -> Measure
apply phi mu f = mu $ f . phi 
```

因此，现在您可以轻松地制定出用于度量的嵌入式语言。这里还有很多事情要做，特别是关于除实线之外的样本空间、随机变量之间的依赖关系、条件条件，但我希望你明白这一点。

特别是，前推是功能性的：

```
newtype Measure a = (a -> Double) -> Double
instance Functor Measure a where
    fmap f mu = apply f mu 
```

它也是一个 monad（练习——提示：这很像 continuation monad。什么是`return`？什么是 ? 的类比`call/cc`）。

此外，结合微分几何框架，这可能会变成自动计算贝叶斯后验分布的东西。

在一天结束的时候，你可以写一些东西，比如

```
m = mean $ apply cos ((from_pdf gauss) ** (empirical data)) 
```

计算 cos(X + Y) 的平均值，其中 X 具有 pdf`gauss`且 Y 已通过 MC 方法进行采样，其结果在`data`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-04-14T09:58:41.010

概率分布形成一个单子；参见[Claire Jones 的工作](http://www.lfcs.inf.ed.ac.uk/reports/90/ECS-LFCS-90-105/)以及 LICS 1989 年的论文，但这些想法可以追溯到 Giry 1982 年的一篇论文（DOI 10.1007/BFb0092872）和 Lawvere 1962 年的一篇我无法追踪的笔记（[http://permalink. gmane.org/gmane.science.mathematics.categories/6541](http://permalink.gmane.org/gmane.science.mathematics.categories/6541)）。

但我没有看到共素：没有办法从“(a->Double)->Double”中得到“a”。也许如果你把它变成多态的 - (a->r)->r for all r？（那是延续单子。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T05:48:36.013

我为我的论文研究了类似的问题。

计算近似卷积的一种方法是对密度函数（在这种情况下为直方图）进行傅里叶变换，将它们相乘，然后进行傅里叶逆变换得到卷积。

查看我论文的附录 C，了解有关概率分布的各种特殊操作情况的公式。您可以在以下网址找到该论文：[http ://riso.sourceforge.net](http://riso.sourceforge.net)

我编写了 Java 代码来执行这些操作。您可以在以下位置找到代码：[https ://sourceforge.net/projects/riso](https://sourceforge.net/projects/riso)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T08:52:01.753

有什么阻止你为此使用迷你语言的吗？

我的意思是，定义一种语言，让您可以像书面一样为您编写`f = x + y`和评估。`f`同样对于`g = x * z`,`h = y(x)`等*令人作呕*。（我建议的语义要求评估者在评估时在 RHS 上出现的每个最里面的 PDF 上选择一个随机数，而不是试图理解生成的 PDF 的堆肥形式。这可能不够快.. .)

* * *

假设您了解所需的精度限制，您可以用直方图或样条曲线相当简单地表示 PDF（前者是后者的退化情况）。如果您需要将分析定义的 PDF 与实验确定的 PDF 混合，则必须添加类型机制。

* * *

直方图只是一个数组，其内容表示输入范围的特定区域中的发生率。你还没有说你是否有语言偏好，所以我假设一些类似 c 的东西。您需要知道 bin 结构（uniorm 大小很容易，但并不总是最好的），包括上限和下限以及可能的标准化：

```
struct histogram_struct {
  int bins; /* Assumed to be uniform */
  double low;
  double high;
  /* double normalization; */    
  /* double *errors; */ /* if using, intialize with enough space, 
                         * and store _squared_ errors
                         */
  double contents[];
}; 
```

这种事情在科学分析软件中**很**常见，你可能想使用现有的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-30T14:57:39.550

I think the histograms or the list of 1/N area regions is a good idea. For the sake of argument, I'll assume that you'll have a fixed N for all distributions.

Use the paper you linked edit 4 to generate the new distribution. Then, approximate it with a new N-element distribution.

If you don't want N to be fixed, it's even easier. Take each convex polygon (trapezoid or triangle) in the new generated distribution and approximate it with a uniform distribution.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-30T15:02:41.083

Another suggestion is to use [kernel densities](http://en.wikipedia.org/wiki/Kernel_density_estimation). Especially if you use Gaussian kernels, then they can be relatively easy to work with... except that the distributions quickly explode in size without care. Depending on the application, there are additional approximation techniques like [importance sampling](http://en.wikipedia.org/wiki/Importance_sampling) that can be used.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-29T05:57:57.237

一些初步的想法：

首先，Mathematica 有一个很好的工具可以用精确的分布来做到这一点。

其次，表示为直方图（即经验 PDF）是有问题的，因为您必须选择 bin 大小。这可以通过存储累积分布来避免，即经验 CDF。（事实上​​，您可以保留重新创建经验分布所基于的完整样本数据集的能力。）

这是一些丑陋的 Mathematica 代码，用于获取样本列表并返回经验 CDF，即值概率对列表。通过 ListPlot 运行此输出以查看经验 CDF 的图。

`empiricalCDF[t_] := Flatten[{{#[[2,1]],#[[1,2]]},#[[2]]}&/@Partition[Prepend[Transpose[{#[[1]], Rest[FoldList[Plus,0,#[[2]]]]/Length[t]}&[Transpose[{First[#],Length[#]}&/@ Split[Sort[t]]]]],{Null,0}],2,1],1]`

最后，这里有一些关于组合离散概率分布的信息：

[http://www.dartmouth.edu/~chance/teaching_aids/books_articles/probability_book/Chapter7.pdf](http://www.dartmouth.edu/~chance/teaching_aids/books_articles/probability_book/Chapter7.pdf)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-28T08:57:03.787

自主移动机器人在定位和导航中处理类似的问题，特别是[马尔可夫定位](http://www.cs.cmu.edu/afs/cs/project/jair/pub/volume11/fox99a-html/jair-localize.html)和[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)（传感器融合）。例如，请参阅 [继续定位方法的实验比较](http://web.cecs.pdx.edu/~mperkows/CLASS_479/S2006/localization-comparison.pdf)。

您可以从移动机器人那里借鉴的另一种方法是使用势场进行路径规划。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-28T20:06:53.187

几个回应：

1）如果您已经根据经验确定了 PDF，则它们要么具有直方图，要么具有参数 PDF 的近似值。PDF 是一个连续函数，您没有无限数据...

2）假设变量是独立的。然后，如果您使 PDF 离散，则 P(f(x,y)) = f(x,y)p(x,y) = f(x,y)p(x)p(y) 对所有组合求和x 和 y 使得 f(x,y) 符合您的目标。

如果您要将经验 PDF 拟合到标准 PDF，例如正态分布，那么您可以使用已经确定的函数来计算总和等。

如果变量不是独立的，那么你手上的麻烦就会更多，我认为你必须使用[copulas](http://en.wikipedia.org/wiki/Copula_(statistics))。

我认为定义自己的迷你语言等是过分的。你可以用数组来做到这一点......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-28T18:23:23.083

如果您想要一些乐趣，请尝试像 Maple 或 Mathemetica 那样象征性地表示它们。Maple 使用有向无环图，而 Matematica 使用类似 appoach 的列表/lisp（我相信，但这是一个很长的时间，因为我什至考虑过这一点）。

象征性地进行所有操作，然后最后推动数值。（或者只是找到一种在 shell 中启动并进行计算的方法）。

保罗。

# python - “MetaClass”、“__new__”、“cls”和“super”——具体的机制是什么？

> ID：395982
> 
> 赞同：29
> 
> 时间：2008-12-28T08:41:45.363
> 
> 标签：python, types, metaclass, super

我读过这样的帖子：

1.  [Python 中的元类是什么？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)
2.  [Python 中元类的（具体）用例是什么？](https://stackoverflow.com/questions/392160/what-are-your-concrete-use-cases-for-metaclasses-in-python)
3.  [Python 的 Super 很漂亮，但你不能用](http://fuhm.net/super-harmful/)

但不知何故，我感到困惑。许多困惑，例如：

我何时以及为什么必须执行以下操作？

```
# Refer link1
return super(MyType, cls).__new__(cls, name, bases, newattrs) 
```

或者

```
# Refer link2
return super(MetaSingleton, cls).__call__(*args, **kw) 
```

或者

```
# Refer link2
return type(self.__name__ + other.__name__, (self, other), {}) 
```

super 究竟是如何工作的？

什么是链接 1 中的类注册和取消注册，它是如何工作的？（我认为这与[singleton](http://en.wikipedia.org/wiki/Singleton_pattern)有关。我可能是错的，来自 C 背景。我的编码风格仍然是函数式和 OO 的混合体）。

类实例化（子类、元类、超类、类型）和方法调用（

```
metaclass->__new__, metaclass->__init__, super->__new__, subclass->__init__ inherited from metaclass 
```

) 带有注释良好的工作代码（虽然第一个链接非常接近，但它没有谈论 cls 关键字和 super(..) 和注册表）。最好是具有多重继承的示例。

PS：我将最后一部分作为代码制作，因为堆栈溢出格式正在将文本转换`metaclass->__new__` 为元类->**新**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-28T11:36:08.443

好的，您在这里混合了很多概念！我将提出您提出的一些具体问题。

一般来说，理解 super、MRO 和 metaclasses 变得更加复杂，因为在 Python 的最后几个版本中，这个棘手的领域发生了很多变化。

[Python 自己的文档](http://docs.python.org/reference/datamodel.html)是一个很好的参考，并且完全是最新的。有一篇[IBM developerWorks 文章](http://www.ibm.com/developerworks/linux/library/l-pymeta.html)作为介绍很好，它采用了更多基于教程的方法，但请注意，它已有 5 年历史，并且花了很多时间讨论元类的旧式方法。

**`super`**是您访问对象的超类的方式。它比（例如）Java 的`super`关键字更复杂，主要是因为 Python 中的多重继承。正如[Super Considered Harmful](http://fuhm.net/super-harmful/)解释的那样，使用`super()`可能会导致您隐式使用一系列超类，其顺序由[方法解析顺序](http://www.python.org/download/releases/2.3/mro/)(MRO) 定义。

`mro()`您可以通过调用类（而不是实例）轻松查看类的 MRO 。请注意，元类不在对象的超类层次结构中。

[Thomas](https://stackoverflow.com/users/17624/thomas-wouters)[在这里](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)对元类的描述非常好：

> 元类是类的类。就像类定义类的实例的行为方式一样，元类定义类的行为方式。类是元类的一个实例。

在您提供的示例中，发生了以下情况：

1.  对 MRO 中的下一件事的呼唤`__new__`正在冒泡。在这种情况下，`super(MyType, cls)`将解析为`type`; 调用`type.__new__`让 Python 完成它的正常实例创建步骤。

2.  此示例使用元类来强制执行单例。他在元类中进行了覆盖`__call__`，因此每当创建类实例时，他都会拦截该实例，并且如果已经有一个实例（存储在 中`cls.instance`），则可以绕过实例创建。请注意，`__new__`在元类中覆盖还不够好，因为只有在创建*类*时才会调用它。但是，覆盖 `__new__`类会起作用。

3.  这显示了一种动态创建类的方法。这是他将提供的类名称附加到创建的类名称，并将其添加到类层次结构中。

我不确定您正在寻找什么样的代码示例，但这里有一个显示元类、继承和方法解析的简短示例：

```
print('>>> # Defining classes:')

class MyMeta(type):
    def __new__(cls, name, bases, dct):
        print("meta: creating %s %s" % (name, bases))
        return type.__new__(cls, name, bases, dct)

    def meta_meth(cls):
        print("MyMeta.meta_meth")

    __repr__ = lambda c: c.__name__

class A(metaclass=MyMeta):
    def __init__(self):
        super(A, self).__init__()
        print("A init")

    def meth(self):
        print("A.meth")

class B(metaclass=MyMeta):
    def __init__(self):
        super(B, self).__init__()
        print("B init")

    def meth(self):
        print("B.meth")

class C(A, B, metaclass=MyMeta):
    def __init__(self):
        super(C, self).__init__()
        print("C init")

print('>>> c_obj = C()')
c_obj = C()
print('>>> c_obj.meth()')
c_obj.meth()
print('>>> C.meta_meth()')
C.meta_meth()
print('>>> c_obj.meta_meth()')
c_obj.meta_meth() 
```

示例输出（使用 Python >= 3.6）：

```
>>> # Defining classes:
meta: creating A ()
meta: creating B ()
meta: creating C (A, B)
>>> c_obj = C()
B init
A init
C init
>>> c_obj.meth()
A.meth
>>> C.meta_meth()
MyMeta.meta_meth
>>> c_obj.meta_meth()
Traceback (most recent call last):
File "metatest.py", line 41, in <module>
    c_obj.meta_meth()
AttributeError: 'C' object has no attribute 'meta_meth' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-28T14:11:03.110

这是更务实的答案。

**很少有关系**

1.  “[什么是 Python 中的元类](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)”。底线`type`是所有类的元类。您对此几乎没有实际用途。

    ```
    class X(object):
        pass
    type(X) == type 
    ```

2.  “ [Python 中元类的（具体）用例是什么？](https://stackoverflow.com/questions/392160/what-are-your-concrete-use-cases-for-metaclasses-in-python) ”。底线。没有任何。

3.  “ [Python 的 Super 很漂亮，但你不能用它](http://fuhm.net/super-harmful/)”。有趣的笔记，但实用价值不大。您永远不需要解决复杂的多重继承网络。**通过使用显式策略**设计而不是多重继承，很容易防止出现此问题。

这是我过去 7 年的 Python 编程经验。

1.  一个类有 1 个或多个超类，形成从我的类到`object`.

2.  “类”的概念是由一个名为 的元类定义的`type`。我可能想扩展“类”的概念，但到目前为止，它从未在实践中出现过。不止一次。 `type`总是做正确的事。

3.  在实践中使用`super`效果非常好。它允许子类遵循它的超类。它恰好出现在这些元类示例中，因为它们扩展了内置的元类，`type`.

    但是，在所有子类情况下，您都将使用`super`来扩展超类。

**元类**

元类问题是这样的：

*   每个对象都有对其类型定义或“类”的引用。

*   A`class`本身也是一个对象。

*   因此，类型的对象`class`具有对其类型或“类”的引用。“类”的“类”是元类。

由于“类”不是 C++ 运行时对象，因此在 C++ 中不会发生这种情况。它确实发生在 Java、Smalltalk 和 Python 中。

元类定义了类对象的行为。

*   你与一个类的 90% 的交互是要求类创建一个新对象。

*   10% 的时间，您将使用类方法或类变量（C++ 或 Java 用语中的“静态”。）

我发现了一些类级方法的用例。我几乎没有类变量的用例。我从来没有改变过对象构造的工作方式。

# permissions - 开发具有不同权限级别的应用程序的提示

> ID：395984
> 
> 赞同：3
> 
> 时间：2008-12-28T08:43:56.543
> 
> 标签：permissions

在我们开发需要为每个用户分配权限级别的应用程序时，是否有人有任何提示。权限级别将决定用户可以使用哪些功能。

有什么建议吗？

您（您）将如何在您的应用程序中使用此类功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T10:18:47.837

首先，您需要弄清楚您的权限系统要涵盖哪些功能，以及详细程度：

*   访问表（列表、CRUD）

*   功能/模块

*   记录级别的访问 (=ACL)

*   肯定（授予）或否定（撤销）语义

*   允许执行的“管理员”角色是什么

如果您想限制对表的访问，您可以轻松设置一个包含所有表名的附加表，并授予对角色/组的 select-list/select-record/insert/update/delete 访问权限，如 JV 所述。

如果您想授予对功能或模块的访问权限，请拥有一个模块表并将执行权限授予角色/组。

这两个功能都等同于 SQL 中的授权。

记录级别的访问限制要复杂得多，因为您需要对记录的状态（例如 CMS 应用程序中的“公共”、“私人”、“已发布”）的访问权限进行建模，或者对每条记录具有明确的权限。

如果要实现与 NTFS 等效的权限方案，则根据用户分配到的组计算每条记录的权限，并拥有可能覆盖组权限的特定于用户的权限，并撤销覆盖的授权。

我的应用程序通常在表+功能/组级别上工作，这可能已经足够好了，具体取决于您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T10:30:08.920

追求“关卡”的概念可能有点死胡同。它可能适合您当前的应用程序，但是由角色到权限的映射组成的数据模型更通用并且适合大多数用途。

为用户分配角色。一个用户可能有多个角色，他们的角色定义了他们拥有的权限。这个概念类似于组，但是“角色”通常很容易直接映射到业务逻辑（想想诸如“管理员”、“用户”、“职员”、“客户经理”、“区域经理”等角色）。特权也相当直接地映射到函数和数据对象。您还可以映射到使用底层平台访问控制（例如 Java 权限）的实现。

在控制器代码中，您（通过他们的角色）检查用户是否拥有执行功能所需的权限。修改视图以隐藏用户无权执行的功能也是一种很好的做法。

在您的设计中，您可以将访问控制系统可视化/记录为矩阵（角色到权限）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T09:33:52.543

这是 Python Turbogears 中身份模块的部分 ER 图。它实现了您所期待的。用户与组关联，组具有关联的权限。

可以实现受限功能可用性的两种方式是：

1.  （我更喜欢）在您的控制器中检查用户所属的组，并据此调整您对视图的响应。因此 View 只是一个渲染器 - 没有业务逻辑。
2.  视图获取用户详细信息，如组和权限，并决定显示什么和不显示什么（违反 MVC）。

阅读有关 MVC 的更多信息（可能还有 Turbogears）。

[替代文字 http://jaivikram.verma.googlepages.com/temp.jpeg](http://jaivikram.verma.googlepages.com/temp.jpeg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T09:35:52.790

这在很大程度上取决于您使用的语言和应用程序的架构（Web 服务？客户端软件？）。

对于一个服务器玩具项目，我想为每个命令分配一个最低权限级别，并在收到命令网络数据包时直接检查，当用户级别不够高时触发权限错误。我可能不适合其他架构。

# agile - 敏捷（Scrum）采用——进展如何？

> ID：395987
> 
> 赞同：11
> 
> 时间：2008-12-28T08:47:29.737
> 
> 标签：agile

对于在您的组织中实施 Scrum 的人来说，您最大的障碍是什么？如果您确实克服了这些障碍，又是如何克服的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-28T09:46:03.313

**背景**：2006 年，我与一家大公司签订了合同，该公司在我到达前几个月就采用了 Scrum 冷火鸡。该公司希望 Agile/Scrum 能够挽救他们庞大的企业软件产品。在那一百或更多的程序员中，我与一个十几个人的团队密切合作了一年，观察并参与了他们的敏捷实验。

**摘要**：我相信敏捷带来的好处多于伤害。到年底，团队可以持续地估计和生成特征，而之前他们的生产力相当不稳定。

**实施**：由于这是一个大型组织和大型产品，该项目以“scrum of scrums”的形式运行。大约每 15 到 20 名开发人员就有一个 Scrum Master，这些团队通常被分成更小的、紧密工作的、大约 6 到 8 人的 Scrum 进行迭代。团队在很大程度上是独立的，可以调整自己的迭代频率（从 1 个月缩短到 1 周），并且在他们认为最好的情况下可以灵活地实施敏捷。该公司定期聘请敏捷教练（如 Object Mentor）来帮助培训 Scrum 大师、团队和管理人员。

**障碍**：很多。其中一些与敏捷有关，一些与敏捷无关。以下是一些经验教训，排名不分先后：

产品积压工作一开始就被修改得太频繁了。最终，团队和管理层花了几天的时间来检查所有功能，评估它们并确定它们的优先级。这是一个巨大的打击，但它提供了巨大的帮助。经验教训：尽早整理好您的产品待办事项并保持维护。产品所有者必须清楚他们想要什么。

我们浪费了时间来尝试和处理时尚和炒作。当您开始时，您无法知道自己是否正确地做事。人们很容易不断地摆弄敏捷过程，从而将注意力从产品上移开。经验教训：拥有经验丰富的敏捷教练确实有助于减少这种学习曲线。任何实验都应该有人反对。限制“尖峰”的数量。

一个好的 scrum master 是无价的。当然，一开始，它是一个全职职位。

这需要时间。团队花了几个月的时间才开始适应这个过程。

选择你的战斗。一些程序员会持怀疑态度，而另一些程序员会完全不喜欢并逃避改变。允许一些灵活性。例如，强制使用产品积压和迭代计划，但不要求每个人都使用记事卡。对引入工具和编程方法特别敏感，例如结对编程或测试优先开发。

最后，保持沟通畅通并管理期望。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-28T09:44:54.893

几年前作为 Delphi 开发人员工作时，我设法让 Scrum 被我的开发团队采用了一段时间。

整个过程对我们来说效果很好——让团队估计积压任务的优先任务给了我们有意义的目标时间框架，整个“管理工作是消除障碍”很棒。

最大的问题是这个过程总是被认为——并被称为——“贝文的好主意”。

虽然团队赞赏我们获得的价值，并且很高兴继续使用 Scrum，但团队并没有将 Scrum 方法论**视为自己的**。一段时间后，我厌倦了“推动”，我们“放弃”了遵循 Scrum 方法。

**教训：**确保团队接受 Scrum 并拥有这种方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T10:48:35.013

我们主要在客户现场进行 Scrum 项目。在我的经验中，最困难的部分是在客户组织中找到一个好的产品负责人：

*   太多人认为他们应该是产品负责人，
*   产品负责人很难跟上团队的步伐
*   产品负责人很难获得团队需要的所有详细信息
*   将项目移到产品积压中以添加具有更高优先级的内容是很困难的
*   等等

培训内部团队使用 scrums 是可行的，引入自己的 scrum master 是可行的，但一个好的产品负责人应该是客户组织的一部分。训练这个外在的人更难。拥有与客户产品负责人一起工作的代理产品负责人确实有很大帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T11:18:09.760

我一直在几个项目中运行 Scrum。在我看来，最大的问题是并非组织中的每个人都参与了这个过程。**每个人都**需要承诺。不仅是开发人员团队。管理者通常是初始化流程的人，并期望事情会在他们不做任何事情的情况下变得更好。

我的建议是你与整个组织一起举办一个研讨会，这样每个人都知道这个过程是如何运作的。不仅仅是开发商。有一个真正投入到这个过程中的人是很重要的。可以回答团队和组织的问题的人。一个导师。

敏捷就是迎接变化。你不应该让这个过程妨碍你的理解。做对你的组织有用的事情，但你应该在扔掉一些东西之前尝试整个过程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-03T17:02:04.153

我从一家采用敏捷的公司转到另一家遵循传统方法的公司。

也许我看到的最大不同是第二家公司难以确定优先级。每个人的工作量很大，以至于他们无法按时交付。IMO，敏捷为情况带来了一些透明度，并让整个团队优先考虑。

敏捷世界中的 Scrum Master 将负责救火并成为（冲刺）团队的代言人。事实上，在第一家公司（我们有单独的 Scrum Master 和项目经理），当项目经理向管理层做出虚假承诺时，Scrum Master 会与项目经理争吵。这意味着，Scrum Master 知道一个团队在几个 sprint 之后可以生产/交付多少，这有助于她确定团队的可预测性。

我也注意到研发资源在每个周期结束时都有成就感，期待下一个。但是，一个好的项目经理也可以在传统场景中完成这项工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-03T17:55:36.573

如前所述，我也经历过的最大问题是缺乏支持。要让人们真正投入到这个过程中是非常困难的。

另一个问题，也是直接导致上述问题的一个问题，并且在很大程度上也是敏捷的创始原因之一，是缺乏管理来坚持敏捷宣言的大纲。

在 Scrum、精益或任何你正在使用的敏捷版本中，都不能脱离宣言的要点。如果一个流程被用来摆脱这些优先事项，那么管理层很可能搞砸了，买入将分崩离析。必须遵循宣言：

宣言：

*   个人和交互超过流程和工具
*   工作软件优于综合文档
*   合同谈判中的客户协作
*   响应变化而不是遵循计划

某些情况可能是甘特图出于某种原因从上述过程之一中出现。甘特图可能很有用，但如果开发人员突然与管理层一起审查甘特图，最后一点就被打破了。对变化的反应已经放缓，因为鼓励计划比变化更受青睐。相反，应该使用带有便签的板子，简化板上的内容，仅包含当前工作项目和次要项目。这使更改变得容易。一旦任何东西在“工具”中固化，它就会减慢对变化的响应。当然，管理层需要以某种方式记录和跟踪事情，但是将其推向开发只会减慢对变化的响应，并且将工具推给开发人员（除非他们希望将它们用于开发并且可以适当地利用它们）会弄乱第一点，

换句话说，不要为了编写全面的文档而停止开发。除非您只有一个开发人员，否则应该有人从开发角色中自主承担文档负载。将这些东西放在一起会大大减慢开发速度，并且在一段时间内，可能会停止任何实际获得工作软件的努力。

最后一点，始终、始终以某种方式与客户或潜在客户保持联系。定期与他们讨论他们想要什么。每天与他们交谈，尽可能多地向他们展示 UI，甚至是数据流工作。他们会理解的任何东西都应该看到。与他们交谈，向他们介绍应用程序的架构和想法，并且永远不要忘记您正在为他们构建应用程序。

概括：

最大的问题是接受。其次是管理层坚持宣言准则。

如果你能减轻这两个风险，你应该很高兴。在获得支持并让管理层了解他们需要成为真正强大的非微观管理经理之后，其他任何事情都是小菜一碟。具体来说，经理甚至可能需要成为领导者，或担任不同风格的角色。

...希望我没有偏离太多。:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-15T01:52:06.780

我们在一个高度集成的环境中实施了敏捷（一组 SCRUM - 管理和 XP - 工程实践），其中包含大型项目的瀑布。瀑布警察无处不在。可以想象，许多项目都失败了。在以前的雇主处完成敏捷后，我们获得了为该项目试用敏捷的许可。

在团队内部，我们使用了敏捷实践。在外部，我们用瀑布流程包裹敏捷实践，主要是报告。因此，我们从外部看起来就像一个瀑布项目。然而，有一个很大的不同，我们在内部使用敏捷，因此我们在预算范围内按时交付高质量。

关键的成功因素是嵌入式教练（迭代经理教练、开发主管教练、测试主管教练和解决方案分析师教练）。在高度集成的环境中，必须提前确保依赖系统的承诺（要求我们提前确定依赖系统和这些系统所需的工作）。在开始之前，我们让团队的技术和业务成员沉浸在敏捷训练营中。这确保了关键参与者（产品所有者和技术团队）了解其中的角色并能够有效地执行。最后，使用瀑布报告封装项目使我们能够与企业中所有现有的报告结构联系起来。

最终结果是，该公司现在正在将瀑布项目转向敏捷。这一切都是可能的，因为我们能够以可持续的速度交付高质量的软件。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-09-18T21:20:01.313

我工作的地方使用 Scrum 已经有一段时间了，但它似乎经历了几个阶段。就障碍而言，一部分是防止一次进行过多的更改，然后慢慢介绍，例如一周进行每日站立，几周后放入故事板，几周后引入结对编程. 这允许进行各种调整，如果这些更改可以改善情况，那么这可以帮助建立一些良好的势头。另一点是要确保如果某件事的完成方式发生变化，被纠正的人不会受到轻视或嘲笑。有时这可能意味着你打断了某人，或者你带来了“我们可以回到基础吗？”

IMO，聘请顾问是这里做得最好的事情之一。现在，[这些人](http://www.thoughtworks.ca/)进来帮助改进这里的开发方式。引入结对编程、TDD、破窗、组织项目文件夹和引入模拟测试等概念，这些都是极好的补充，虽然我们可能靠自己做到了，但可能需要很长时间，但这是行不通的出来这么好。

# c++ - 在即将到来的 C++0x 中花钱购买 C++ 书籍是否明智？

> ID：395990
> 
> 赞同：2
> 
> 时间：2008-12-28T08:53:46.277
> 
> 标签：c++, c++11

我刚刚购买*了带有 Qt4 的 C++ GUI Programming，*在阅读了本书中的代码示例后，我开始意识到我对 C++ 的了解并不完整。两年前，我从在线教程和我下载的几本电子书中学习了 C++，结果发现这些资源都不够好。从那以后，我没有接触过这门语言，而是一直在使用 Python。

现在，我正在考虑购买一本涵盖高级主题的 C++ 好书，而我想到的是 Bruce Eckel 的*《C++ 思考》*（两卷）。我知道它们可以在网上免费获得，但我真的无法忍受在笔记本电脑屏幕上阅读书籍。

既然 C++0x 可能很快就会出版，那么继续在这些书上花钱是明智之举吗？C++0x 会破坏向后兼容性吗？第 2 卷涵盖了多线程、模板等特性。这些特性中的任何一个在 C++0x 中会发生显着变化吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-28T09:45:58.463

我不会为 C++0x 屏住呼吸。我怀疑它会在本世纪末结束。即使它会出来，你也应该算上一年左右的时间让编译器来实现它。现在学习基础知识，当标准出来时，您应该相对容易学习大部分新功能。标准委员会以努力保持向后兼容性而闻名。

出于好奇，我个人不时检查标准的演变。订阅 Herb Sutter 的[博客](http://herbsutter.wordpress.com/) [订阅](http://herbsutter.wordpress.com/feed/)并查找标准更新。

我个人最喜欢的高级 C++ 书籍是 Bjarne Stroustrup 的 The C++ Programming Language, 3e。在语言和 STL 细节方面，这是我认为我从中学到最多的一本 C++ 书籍。斯科特迈耶斯的书也帮助澄清了很多事情。Meyers 用一种非常易读的语言（我相信是英语）写作，通常会发生的情况是我从 Meyers 的书中阅读了整个 Item，然后在 Stroustrup 的书中找到相同的信息，浓缩成一个句子左右。也就是说，迈耶斯的书在让你关注有趣的细节方面非常有用。

至于我期望线程的变化，我认为标准中将为此目的有两个新的库。概念是一个更大的变化，它们与模板有些相关。到目前为止，我们在 STL 中有一些概念，但这些都是*约定*；算法会对您传递给模板的类型做出假设，并且由于约定，您会知道传递正确的“类型类型”。这暗示了可怕的错误消息，我们都知道和“喜欢”的 STL 模板错误。概念将有助于解决这些问题。该语言还有其他改进（复杂性）。Herb Sutter 经常谈论它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-28T09:21:54.470

买这本书当然是明智的。C++1x 几乎不会与以前的代码中断。几乎所有你学到的东西都可以用下一个 C++ 来实现，这将极大地帮助你理解*为什么*C++1x 会引入什么特性。例如，为什么会有*可变参数模板*，为什么会有这些*概念*？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T09:08:30.567

即使在某些功能上破坏了向后兼容性，最大的部分应该仍然有用。

此外，关于 C++Ox 的第一本书可能不是最好的。

我更喜欢一本关于 C++ 的非常好的书，而不是一本关于 C++Ox 的书。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T09:33:46.163

我肯定会去买书

1.  来自 Eckel 的那些书非常好，我非常推荐它们。
2.  编译器需要几年时间才能赶上 C++0x 引入的新特性（看看模板支持怎么样！）
3.  项目开始使用它们将需要更长的时间
4.  最后，虽然我不详细了解新版本语言引入的 3 个更改，但 C++ 委员会在向后兼容性方面一直非常保守，因此您不应该有任何学习很快就会过时的风险。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T13:54:44.187

除了你的任何其他书之外，我会赞同获得 Bjarne Stroustrup 书“C++ 编程语言（第三版和特别版）” [http://www.research.att.com/~bs/3rd.html](http://www.research.att.com/~bs/3rd.html)的建议可能有兴趣，如果你能负担得起多本书。如果你只买得起一本并且已经掌握了基础知识（就像你一样），那么我可能会向 Stroustrup 书学习。你不能越过从那个人自己那里得到事实。

如果您有兴趣，可以在此处跟踪 C++0x 的发展： [http ://www.research.att.com/~bs/C++0xFAQ.html。](http://www.research.att.com/~bs/C++0xFAQ.html)如前所述，如果我是你，我不会屏住呼吸。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T09:12:43.413

您可以尝试 Safari Books Online 之类的网站，以了解最新的技术和编程书籍。过去我买了几本 Ruby 和 Ruby on Rails 相关的书籍，但现在它们的用处要小得多，因为其中的内容已被弃用。

# haskell - 我什么时候应该使用 $ （它总是可以用括号代替）？

> ID：395995
> 
> 赞同：9
> 
> 时间：2008-12-28T08:56:58.623
> 
> 标签：haskell, syntax, operators

从我正在阅读的内容来看，`$`它被描述为“将函数应用于其参数”。然而，它似乎不像`(apply ...)`在 Lisp 中那样工作，因为它是一个二元运算符，所以它看起来唯一的作用是有时有助于避免括号，比如`foo $ bar quux`代替`foo (bar quux)`. 我理解对了吗？后一种形式是否被认为是“坏风格”？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-28T10:39:52.833

`$`当开始和结束括号之间的距离大于良好的可读性保证时，或者如果您有多层嵌套括号，则首选括号。

例如

```
i (h (g (f x))) 
```

可以改写

```
i $ h $ g $ f x 
```

换句话说，它代表了右关联函数的应用。这很有用，因为普通函数应用程序关联到左侧，即以下

```
i h g f x 
```

...可以改写如下

```
(((i h) g) f) x 
```

该函数的其他方便用途`($)`包括使用它压缩列表：

```
zipWith ($) fs xs 
```

这会将函数列表中的每个函数应用于列表中`fs`的相应参数`xs`，并将结果收集到列表中。与之相比，`sequence fs x`它将函数列表应用于`fs`单个参数`x`并收集结果；并将`fs <*> xs`列表中的每个函数应用于列表`fs`的每个元素`xs`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-28T09:46:08.713

您的理解基本正确——也就是说，大约 99% 的 $ 使用是为了帮助避免括号，是的，在大多数情况下，它似乎确实比括号更受欢迎。

但请注意：

```
> :t ($)
($) :: (a -> b) -> a -> b

```

也就是说，$是一个函数；因此，它可以被传递给函数，由它组成，以及任何你想用它做的事情。我想我以前见过人们使用组合器来使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-28T12:28:56.497

($) 的文档回答了您的问题。不幸的是，它没有列在[Prelude 的自动生成的文档中](http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:$)。

但是它在源代码中列出，您可以在此处找到：

[http://darcs.haskell.org/packages/base/Prelude.hs](http://darcs.haskell.org/packages/base/Prelude.hs)

但是这个模块没有直接定义 ($)。由前者导入的以下内容：

[http://darcs.haskell.org/packages/base/GHC/Base.lhs](http://darcs.haskell.org/packages/base/GHC/Base.lhs)

我在下面包含了相关代码：

```
infixr 0  $

...

-- | Application operator.  This operator is redundant, since ordinary
-- application @(f x)@ means the same as @(f '$' x)@. However, '$' has
-- low, right-associative binding precedence, so it sometimes allows
-- parentheses to be omitted; for example:
--
-- >     f $ g $ h x  =  f (g (h x))
--
-- It is also useful in higher-order situations, such as @'map' ('$' 0) xs@,
-- or @'Data.List.zipWith' ('$') fs xs@.
{-# INLINE ($) #-}
($)                     :: (a -> b) -> a -> b
f $ x                   =  f x 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-30T03:01:48.060

上面有很多好的答案，但有一个遗漏：

> `$` **不能总是用括号代替**

但是**任何应用 of`$`都可以通过使用括号来消除**，任何使用 of`($)`都可以替换为`id`，因为**`$`它是恒等函数的一个特化**。的用法`(f$)`可以替换为`f`，但是我看到的类似`($x)`（将函数作为参数并将其应用于`x`）的用法没有任何明显的替换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-26T06:10:28.560

如果我在这里查看您的问题和答案，Apocalisp 和您都是对的：

*   `$`*在某些情况下*优先于括号（见他的回答）
*   `foo (bar quux)`风格肯定不错！

另外，请检查[. (dot) 和 $ (dollar sign)](https://stackoverflow.com/questions/940382/haskell-difference-between-dot-and-dollar-sign/940523#940523)，另一个与您非常相关的 SO 问题。*********