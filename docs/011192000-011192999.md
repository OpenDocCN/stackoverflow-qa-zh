# StackOverflow 问答 11192000-11192999

# c# - 在 asp.net 中向 yahoo 发送电子邮件

> ID：11192001
> 
> 赞同：0
> 
> 时间：2012-06-25T15:11:06.693
> 
> 标签：c#, asp.net, .net, email

我想使用 c# 发送电子邮件。我实现了整个代码，也在代码中使用端口号、主机。但未收到电子邮件。

**.aspx**

```
Message from: <asp:TextBox ID="text1" runat="server"></asp:TextBox>
Message To: <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
Message subject: <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
<asp:Button ID="b1" runat="server" OnClick="click" />
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> 
```

**.aspx.cs**

```
public void click(object sender, EventArgs e)
{
    try
    {
        //mail message
        MailMessage mM = new MailMessage();
        //Mail Address
        mM.From = new MailAddress( text1.Text);
        //emailid to send
        mM.To.Add(TextBox1.Text);
        //your subject line of the message
        mM.Subject = "your subject line will go here.";
        //now attached the file
        //mM.Attachments.Add(new Attachment(@"C:\\attachedfile.jpg"));
        //add the body of the email
        mM.Body = "Your Body of the email.";
        mM.IsBodyHtml = false;
        //SMTP 
        SmtpClient SmtpServer = new SmtpClient();
        //your credential will go here
        SmtpServer.Credentials = new System.Net.NetworkCredential("sender@yahoo.com", "password");
        //port number to login yahoo server
        SmtpServer.Port = 587;
        //yahoo host name
        SmtpServer.Host = "smtp.mail.yahoo.com";
        SmtpServer.Send(mM);
        Label1.Text = "successfull";
        //Send the email

    }//end of try block
    catch (Exception ex)
    {
    }//end of catch
}//end of Yahoo Email Method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:22:49.723

这可能是 SSL 的错误。您必须像这样启用 SSL：

```
smtpserver.EnableSsl = true; 
```

希望这对您有所帮助。

# java - 如何将 DateTime 保存为包含 TimeZone 偏移量的日期？

> ID：11192006
> 
> 赞同：2
> 
> 时间：2012-06-25T15:11:13.547
> 
> 标签：java, datetime, datetimeoffset, java-6, java.util.date

我有一些 DateTime，包括 TimeZone Europe/Vienna (+0200)。它是通过这种方法获取的：

```
settlementService.getPendingPeriodStart() 
```

并像这样查看 toString：

> 2012-06-01T00:00:00.000+02:00

现在我想将这个日期 2012-06-01 保存为 java.util.Date，所以我尝试了这样的事情：

```
transactionDate = settlementService.getPendingPeriodStart().withTime(0, 0, 0, 0).toDate(); 
```

但结果是这样的：

> 2012 年 5 月 31 日星期四 22:00:00 UTC

将 DateTime 结果保存为**包含**TimeZone 偏移量的 Date 的最佳方法是什么，因此 transactionDate 应该是**2012-06-01**。我可以修补 GregorianCalendar，但这不是我喜欢的。这应该更容易，不是吗？

顺便说一句（如果不清楚的话）。本地系统在 UTC 上运行。这就是为什么结果是**Thu May 31 22:00:00 UTC 2012**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-21T14:32:21.480

不幸的是，[接受的答案](https://stackoverflow.com/a/11196430/10819573)具有误导性。事实上，

```
2012-06-01T00:00:00.000+02:00 = 2012-05-31T22:00:00Z 
```

`Z`右侧是零时区偏移的时[区指示符](https://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators)。它代表 Zulu 并指定`Etc/UTC`时区（时区偏移量为`+00:00`小时）。

写`2012-06-01T00:00:00.000+02:00`as `2012-06-01`，虽然只是一个函数调用，但对于任何依赖于时区的业务逻辑都是危险的，因为它可能在时区中具有不同的日期，具有不同的偏移值，例如如上所示。`2012-06-01`只是一个[`LocalDate`](https://docs.oracle.com/javase/tutorial/datetime/iso/date.html)应该用于跟踪诸如出生日期、婚礼日期等事件的文件。

# *java.time*

旧的日期时间 API（`java.util`日期时间类型及其格式类型`SimpleDateFormat`等）已过时且容易出错。建议完全停止使用它并切换到`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*。

此外，下面引用的是[Joda-Time 主页](https://www.joda.org/joda-time/)上的通知：

> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

## 使用`java.time`现代 API 的解决方案：

**如何解析给定的日期时间字符串：**

给定的日期时间字符串有一个时区偏移量，因此它应该被解析为`OffsetDateTime`. 由于现代日期时间 API 基于[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)`DateTimeFormatter` ，并且只要日期时间字符串符合 ISO 8601 标准，就不需要显式使用对象。

```
OffsetDateTime odt = OffsetDateTime.parse("2012-06-01T00:00:00.000+02:00"); // 2012-06-01T00:00+02:00 
```

**如何在 UTC 中获取日期时间：**

有多种方法。最简单的方法是将其转换为[`Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)UTC 时间轴上的瞬时点。

```
Instant instant = odt.toInstant(); // 2012-05-31T22:00:00Z 
```

或者，

```
OffsetDateTime odtUtc = odt.withOffsetSameInstant(ZoneOffset.UTC); // 2012-05-31T22:00Z 
```

**如何`java.util.Date`摆脱它：**

如果您需要`java.util.Date`来自 的实例的实例`OffsetDateTime`，您可以使用[`Date#from(Instant instant)`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#from-java.time.Instant-).

```
Date date = Date.from(instant); // Thu May 31 23:00:00 BST 2012 <--In my timezone 
```

请注意，`java.util.Date`对象不是像[现代日期时间类型](https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html)那样的真实日期时间对象；相反，它表示自称为“纪元” `January 1, 1970, 00:00:00 GMT`（或 UTC）的标准基准时间以来的毫秒数。当您打印 的对象时`java.util.Date`，其`toString`方法会返回 JVM 时区中的日期时间，根据此毫秒值计算得出。如果您需要在不同的时区打印日期时间，则需要将时区设置为`SimpleDateFormat`并从中获取格式化的字符串，例如

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", Locale.ENGLISH);
sdf.setTimeZone(TimeZone.getTimeZone("Etc/UTC"));
System.out.println(sdf.format(date)); // 2012-05-31T22:00:00.000Z 
```

**如何从中获取日期部分：**

正如我已经解释过的，任何依赖于时区的业务逻辑都是危险的。但是，这只是一个简单的函数调用问题。

```
LocalDate localDate = odt.toLocalDate(); // 2012-06-01 
```

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解更多关于`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*的信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:25:03.833

用户的日期和时区是两个不同的东西。一个是日期，另一个是偏好或表示参数。

不要试图将它们存储在同一个字段中。

考虑到甚至不可能将它们有效地存储在一起（不丢失精度），因为日期可以存储在 long 中，因为它被指定为 UTC 日期。

您可以将[时区保存为偏移](http://en.wikipedia.org/wiki/ISO_8601)`[hh]:[mm]`量（由于非常小的情况，经常建议将分钟保留在此偏移量 ( ) 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:58:22.340

我想我找到了解决办法。（如果您知道更好的解决方案，请告诉我）

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

DateTime dateTimeWithTimeZone = new DateTime(DateTimeZone.forID("Europe/Vienna")).withDate(2012, 06, 01).withTime(0, 0, 0, 0);      
Date dateWithTimeZoneIncluded = dateTimeWithTimeZone.toLocalDate().toDate();

System.out.println(dateFormat.format(dateWithTimeZoneIncluded)); 
```

结果如预期的那样是**2012-06-01 。**

# python - 在没有变色龙的情况下安装 Pyramid

> ID：11192007
> 
> 赞同：3
> 
> 时间：2012-06-25T15:11:19.683
> 
> 标签：python, installation, pyramid, pip

Pyramid 同时具有 Mako 和 Chameleon 作为安装依赖项。我的意图是专门使用 Mako 模板，考虑到我对删除未使用的依赖项有点痴迷，我卸载了 Chameleon。为了避免错误，`distribute`我不得不手动编辑`requires.txt`Pyramid 安装中的文件。

到目前为止，我还没有发现任何错误，尽管我还没有超出基本示例。有没有办法在安装时只选择一个模板引擎？我可以手动修改安装，但我将有十几个 virtualenvs 需要维护。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:56:11.220

如果金字塔不需要两者，并且它们是可选功能的真正可选要求，那么他们可能会使用为此设计的[附加功能](http://packages.python.org/distribute/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies)。

`pip`支持[这一点](http://www.pip-installer.org/en/latest/requirements.html#the-requirements-file-format)，因此可以在安装时为您提供所需的行为。

要正确实现这一点，需要与上游的金字塔一起将 setup.py 更改为使用`extras_require`. 但是，如果只是选择一个，这可能不合适，但您可能希望在他们的问题跟踪器/错误系统中提出它。

# jquery - Jquery mobile 和 Jquery Jplayer 冲突

> ID：11192010
> 
> 赞同：0
> 
> 时间：2012-06-25T15:11:29.823
> 
> 标签：jquery, css, jquery-mobile, jplayer, document-ready

我遇到了 Jquery Mobile 和 Jquery Jplayer 相互冲突的问题。我面临的问题是，当您将 Jquery Jplayer 包含到 Jquery 移动网站中并单击按钮开始收听音频时，它会更改按钮 html 并更改网站的外观，因为 Jquery 移动不会只需更改html，它会添加以下代码。

```
<span class="ui-btn-inner ui-btn-corner-all">
<span class="ui-btn-text">Continue</span>
</span> 
```

每次我尝试通过包含以下脚本来覆盖它时：

$(this).html('继续');

它只是行不通。知道在这种情况下该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:21:52.353

如果您下载了带有主题的 JQM，那么 JQM 将覆盖您的样式和任何插件样式中的基本元素。

有一个仅结构 JQM css 的下载： [http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.css](http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.css)

这里有几个选项：

1）如果它们与盒装主题不同，请进入您的 CSS 并执行 JQM 覆盖以实现一致的样式。

2) 创建自己的 JQM 主题。

3) 询问您是否真的需要使用 JQM 框架。很多时候我从 JQM 开始，只是为了用微型 javascript/jQuery 解决方案替换大部分功能。如果您发现自己剥离了 JQM 功能并用其他东西替换它，那么您应该质疑使用 JQM 是否是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:23:51.290

要更新 jQuery Mobile UI 元素，您必须`.refresh()`在修改源元素后调用项目（仅适用于表单元素，不适用于链接按钮）。

```
$(this).html('Continue').button('refresh'); 
```

或 [更改按钮文本 jquery mobile](https://stackoverflow.com/questions/4009524/change-button-text-jquery-mobile)

> $("#consumed .ui-btn-text").text("标记新");

.

如果您的元素是一个按钮：

```
$(this).closest(".ui-btn").find(".ui-btn-text").text("Continue"); 
```

如果是链接：

```
$(this).find(".ui-btn-text").text("Continue"); 
```

# c# - 无法将类型“System.Web.UI.WebControls.LoginView”隐式转换为“Login”

> ID：11192014
> 
> 赞同：0
> 
> 时间：2012-06-25T15:11:38.537
> 
> 标签：c#, compiler-construction, .net

我遇到了这个错误：

```
Cannot implicitly convert type "System.Web.UI.WebControls.LoginView" to "Login" 
```

错误发生在第 26 行。

```
Source Error:

Line 26:         Login Login1 =(System.Web.UI.WebControls.LoginView)LoginView1.FindControl("Login1");
Line 27:         TextBox UserName = (TextBox)Login1.FindControl("UserName");
Line 28:         TextBox FailureText = (TextBox)Login1.FindControl("FailureText"); 
```

我已将以下内容声明为我的命名空间。但错误仍然存​​在。

```
using System.Web.UI;
using System.Web.UI.WebControls; 
```

谁能给我一个建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:13:41.747

您正在投射到`LoginView`：

```
(System.Web.UI.WebControls.LoginView) 
```

并期望得到：`Login`

```
Login Login1 = (System.Web.UI.WebControls.LoginView).... 
```

**改成：**

```
LoginView Login1 = (System.Web.UI.WebControls.LoginView)LoginView1.FindControl("Login1"); 
```

或者：

```
Login Login1 = (Login)LoginView1.FindControl("Login1"); 
```

取决于你想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:13:50.970

从此更改第 26 行

```
Login Login1 =(System.Web.UI.WebControls.LoginView)LoginView1.FindControl("Login1"); 
```

对此

```
LoginView Login1 =(System.Web.UI.WebControls.LoginView)LoginView1.FindControl("Login1"); 
```

它抛出异常，因为您的变量不是 LoginView 对象

# c++ - 构造一个以 shared_ptr 作为成员字段的类的正确语法是什么？

> ID：11192016
> 
> 赞同：2
> 
> 时间：2012-06-25T15:11:48.483
> 
> 标签：c++, c++11, shared-ptr

假设，我想创建一个`B`带有指向另一个类的指针的类`A`。在`A`我想构造的构造函数中`B`，并传递一个指向`this`. 原则上，这个指针可以是 a `shared_ptr`，对吗？那么如何`shared_ptr`通过构造函数中的赋值来创建这样的类呢？

我在下面的代码中尝试过。`ClassB`和`ClassC`是相同的，带有一个指向`ClassA`它的构造`ClassB`和实例的指针`ClassC`。唯一的两个区别是`ClassB`持有一个常规指针并`ClassC`持有一个`shared_ptr`to `ClassA`，以及带有的代码`ClassB`正在工作，而带有的代码`ClassC`则没有。我究竟做错了什么？

```
// Main.cpp : Defines the entry point for the console application.

#include "ClassA.h"
#include <iostream>

int main(int argc, char* argv[])
{
    std::cout << "Create B and C separately, without a reference to A:" << std::endl;
    ClassB(nullptr);
    ClassC(nullptr);

    std::cout << "Create A, and through it B and C:" << std::endl;
    ClassA A;

    A.PrintHello();
    A.getObjectB().getPointerToA()->PrintHello();

    A.PrintHello();
    A.getObjectC().getPointerToA()->PrintHello();
    return 0;
}

// ClassA.h

#pragma once

#include "ClassB.h"
#include "ClassC.h"

class ClassA
{
private:
    ClassB objectB;
    ClassC objectC;

public:
    ClassA(void);

    ClassB getObjectB() { return objectB; };
    ClassC getObjectC() { return objectC; };

    void PrintHello();
};

// ClassA.cpp

#include "ClassA.h"
#include <iostream>
#include <memory>

ClassA::ClassA(void) : objectB(ClassB( this )), objectC(ClassC( std::make_shared<ClassA>(*this) ))
{
    std::cout << "Class A fully constructed" << std::endl;
}

void ClassA::PrintHello()
{
    std::cout << "Hello" << std::endl;
}

// ClassB.h

#pragma once

#include <memory>

class ClassA;

class ClassB
{
private:
    ClassA* pointerToA;

public:
    ClassB(ClassA* pA);

    ClassA* getPointerToA() { return pointerToA; };
};

// ClassB.cpp

#include "ClassB.h"
#include <iostream>

ClassB::ClassB(ClassA* pA) : pointerToA(pA)
{
    std::cout << "Class B constructed" << std::endl;
}

// ClassC.h

#pragma once

#include <memory>

class ClassA;

class ClassC
{
private:
    std::shared_ptr<ClassA> pointerToA;

public:
    ClassC(std::shared_ptr<ClassA> pA);

    std::shared_ptr<ClassA> getPointerToA() { return pointerToA; };
};

// ClassC.cpp

#include "ClassC.h"
#include <iostream>

ClassC::ClassC(std::shared_ptr<ClassA> pA) : pointerToA(pA)
{
    std::cout << "Class C constructed" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:47:11.620

这些不是做同样的事情：

```
ClassA::ClassA(void) : objectB(ClassB( this )), objectC(ClassC( std::make_shared<ClassA>(*this) )) 
```

第一个初始化器`ClassB`使用`this`指针创建一个临时类型，并`objectB`通过复制该临时来进行初始化：

```
objectB(ClassB( this )) 
```

第二个创建一个*new* `ClassA`作为 的副本`*this`，将其存储在 a 中，然后用 that`shared_ptr`初始化一个临时文件，然后通过复制该临时文件进行初始化：`ClassC``shared_ptr``objectC`

```
objectC(ClassC( std::make_shared<ClassA>(*this) )) 
```

您的语法不必要地冗长，避免临时和副本并直接初始化您的成员：

```
 objectB( this ), objectC( std::make_shared<ClassA>(*this) ) 
```

这相当于：

```
 objectB( this ), objectC( std::shared_ptr<ClassA>( new ClassA(*this) ) ) 
```

应该清楚的是，它`objectB`有一个指向`this`但`objectB`有一个（共享）指向*不同*对象的指针，即`*this`.

a 的要点`shared_ptr`是它拥有您给它的指针，并且（通常）会删除该指针。您不能在对象的构造函数`shared_ptr`中拥有a `this`，因为在对象完成构造之前，它不能被任何人拥有`shared_ptr`（您给 a`shared_ptr`的指针是指向*完整*对象的指针，而不是部分构造的一半通过它的构造函数），所以没有安全的方法来获得可以传递给构造函数的`shared_ptr`引用。有一种方法可以做到这一点，使用 的别名功能，但我认为您应该重新检查您的设计并询问*为什么*要“拥有”它所属的对象......这没有意义。`this``objectC``shared_ptr`*`objectC`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:56:49.840

`std::make_shared`分配并初始化一个新对象。*

# java - 通过 JSP 显示 BLOB（图像）

> ID：11192020
> 
> 赞同：10
> 
> 时间：2012-06-25T15:12:02.940
> 
> 标签：java, jakarta-ee

我有一个代码来显示员工图表。

数据（姓名、电话、照片等）存储在 SQLServer 中并通过 JSP 显示。显示数据没问题，除了图像 .jpg（存储在 IMAGE=BLOB 列中）。

顺便说一句，我已经显示了图像（参见下面的代码），但我不知道如何将它放在 .css 中定义的区域中（也参见下面的代码），因为图像通过了resultSet 在浏览器的整个页面中加载。

有谁知道我如何“构图”图像？

```
<%
Connection con = FactoryConnection_SQL_SERVER.getConnection("empCHART");
Statement stSuper = con.createStatement();
Statement stSetor = con.createStatement();

Blob image = null;
byte[] imgData = null;

ResultSet rsSuper = stSuper.executeQuery("SELECT * FROM funChart WHERE dept = 'myDept'");

if (rsSuper.next()) {
image = rsSuper.getBlob(12);
imgData = image.getBytes(1, (int) image.length());
response.setContentType("image/gif");
OutputStream o = response.getOutputStream();
//o.write(imgData); // even here we got the same as below.
//o.flush();
//o.close();

--[...]

<table style="margin: 0px; margin-top: 15px;">
<tr>
<td id="photo">
<img title="<%=rsSuper.getString("empName").trim()%>" src="<%= o.wite(imageData); o.flush(); o.close(); %>" />
</td>
</td>

<td id="empData">
<h3><%=rsSuper.getString("empName")%></h3>
<p><%=rsSuper.getString("Position")%></p>
<p>Id:<br/><%=rsSuper.getString("id")%></p>
<p>Phone:<br/><%=rsSuper.getString("Phone")%></p>
<p>E-Mail:<br/><%=rsSuper.getString("Email")%></p>
</td>
</table> 
```

这是应该构成图像的片段：

```
#photo
{
    padding: 0px;
    vertical-align: middle;
    text-align: center;
    width: 170px;
    height: 220px;
} 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T15:17:30.313

你在这里犯了一些根本性的错误。`<img src>`必须指向一个 URL，不包含图像的二进制内容。JSP 页面本身的内容类型不应设置为`image/gif`. 它应该保持默认为`text/html`. 正如您所期望的那样，Web 服务器不应该在 HTML 结果中包含具体图像。网络浏览器根据属性中的 URL 单独下载图像`src`，然后相应地呈现它们。

最简单的方法是创建一个单独的 servlet，将图像从 DB 流式传输到响应主体。您可以通过请求参数或路径信息来唯一标识图像。这是一个使用请求参数的示例：

```
<img src="imageServlet?id=<%=rsSuper.getString("id")%>" /> 
```

然后该`doGet()`方法应该*基本上*执行这项工作：

```
String id = request.getParameter("id");

// ...

InputStream input = resultSet.getBinaryStream("imageColumnName");
OutputStream output = response.getOutputStream();
response.setContentType("image/gif");
// Now write input to output the usual way. 
```

* * *

**与具体问题**无关**，十年来官方强烈反对以这种方式使用*scriptlet 。*也许您正在阅读完全过时的书籍/教程，或者正在维护一个古老的 JSP Web 应用程序。有关一些见解，另请参阅以下问题的答案以获取一些提示：**

 ***   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)
*   [使用 MVC 和 DAO 模式在 JSP 页面的 HTML 中显示 JDBC ResultSet](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc)
*   [如何在 JSP 页面中从数据库中检索和显示图像？](https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:17:31.527

如果要通过 HTML 标记显示图像，则必须将图像指向加载图像的服务器中的资源，以便客户端浏览器可以加载它。这样，您就可以设置`<img />`标签的样式。

为了做到这一点，大多数人编写一个`ImageServlet`加载图像的二进制数据并编写一个`<img src = "/source/to/someImageServlet?id=<%=rsSuper.getString("id")%>" id = "photo"/>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-07T09:41:33.867

```
 Connection con = new DBConnection().getConnection();
        String sql = " SELECT * FROM tea ";
        PreparedStatement ps = con.prepareStatement(sql);
        ResultSet rs = ps.executeQuery();

        while (rs.next()) {
            byte[] imgData = rs.getBytes("img"); // blob field 
            request.setAttribute("rvi", "Ravinath");
            rs.getString("teatitle");

            String encode = Base64.getEncoder().encodeToString(imgData);
            request.setAttribute("imgBase", encode);
        } 
```

然后使用 jstl 提取 jsp 页面上的属性

```
 <img src="data:image/jpeg;base64,${imgBase}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T05:29:22.490

```
//globle variable
List listmap = new ArrayList();//with getter/setter

//method
Connection con = conn.getConnection();
PreparedStatement ps = null;
String query="select img from tablename";
ps = con.prepareStatement(query);
resultSet = ps.executeQuery();
while (resultSet.next()) {
PackagePojo p1=new PackagePojo();
// pojo class with field private String imagePath with getter/setter;
byte[] img = resultSet.getBytes("PTOIMAGE");//PTOIMAGE db column name
String encode=Base64.encodeBase64String(img );
p1.setImagePath(encode);
listmap.add(p1);
}

//in jsp with struts2

<s:iterator value="listmap">
<img src="data:image/jpeg;base64,${imagePath}" alt="bhudutt" title="bhudutt" />
</s:iterator> 
```**

# facebook - 由于重定向标头，Facebook Like 插件给出“无法访问”？

> ID：11192021
> 
> 赞同：1
> 
> 时间：2012-06-25T15:12:07.647
> 
> 标签：facebook, redirect, facebook-like

我正在尝试[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

A. 在点赞的 URL 中，我提供了这个 tinyurl - `http://tinyurl.com/7qxuvr5`。这个 tinyurl 重定向到类似`http://rsp3.rsys2.net/pub/sf/FormLink`. 当我喜欢 tinyurl 时，它可以工作。

B. 在 URL to Like 中，我提供了另一个 URL_B - `http://rsp3.rsys2.net/pub/cc?_ri_=X0Gzc2X%3DWQpglLjHJlTQGsyk7oNL0UB7Bt6zdElRzdUocTR3zgnTzd3BMOVXtpKX%3DSUSWY&_ei_=EllxcGK7968SUmYSYUrLBBomgA-Y`。它还重定向到类似`http://rsp3.rsys2.net/pub/sf/FormLink`. 当我喜欢这个 URL_B 时，我收到错误 -`http://rsp3.rsys2.net/pub/sf/FormLink`无法访问该页面 - 尽管它是我可以通过浏览器访问的有效页面。

`http://rsp3.rsys2.net/pub/sf/FormLink`[A] 和 [B] 提供的页面具有相同的布局和结构。

我看到 tinyurl 使用 301 重定向，而 URL_B 使用 302 重定向。

您能否指导为什么这可能是问题？我希望用户能够喜欢 URL_B - 但这对我不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:21:00.573

您的第二个链接缺少重定向的小链接的一部分。

截断的微小重定向：

```
http://rsp3.rsys2.net/pub/sf/FormLink?_ri_=X0Gzc2X%3DWQp 
```

截断的链接 B：

```
http://rsp3.rsys2.net/pub/cc?ri=X0Gzc2X%3DWQp 
```

我不确定这些链接是如何得出的，但 B 链接的`/pub/cc?ri=`位置与 A 相同`/pub/sf/FormLink?_ri_=`

他们不会去同一个页面。

# jquery - 当应用程序状态更改时，asp.net 刷新页面的一部分 whit jquery

> ID：11192023
> 
> 赞同：0
> 
> 时间：2012-06-25T15:12:21.613
> 
> 标签：jquery, asp.net

我使用应用程序属性来计算在线用户数：

```
Application["OnlineUsers"] = (int)Application["OnlineUsers"] + 1; 
```

然后将 Application 属性值绑定到 HTML 标记

```
<div id="OnlineUser" >
    <span>Number of Online Users is <%=Application["OnlineUsers"].ToString() %></span> 
</div> 
```

例如，当`user1`访问页面，`DIV`标签显示`Number of Online Users is 1`和`user2`访问页面，DIV标签显示`Number of Online Users is 2`，但`user1`仍然`Number of Online Users is 1`

更改应用程序属性时如何刷新`user1`页面？`user2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:17:52.523

```
you can try with Ajax (Timer + Updatepanel)

    <form id="form1" runat="server">
      <asp:ScriptManager runat="server" id="ScriptManager1">
      </asp:ScriptManager>

      <asp:UpdatePanel runat="server" id="UpdatePanel1">
        <ContentTemplate>
          <asp:Timer runat="server" id="Timer1" Interval="10000" OnTick="Timer1_Tick"></asp:Timer>
          <asp:Label runat="server" Text="Page not refreshed yet." id="Label1">
          </asp:Label>
        </ContentTemplate>
     </asp:UpdatePanel>

<div id="test" runat="server" >
</div>

    protected void Timer1_Tick(object sender, EventArgs e)
        {
            test.Text = "Application["OnlineUsers"].ToString();
        } 
```

# javascript - 两种颜色之间的屏幕闪烁速度足够快，以至于人眼无法想象

> ID：11192024
> 
> 赞同：-1
> 
> 时间：2012-06-25T15:12:23.780
> 
> 标签：javascript, html, webgl, html5-animation

嗨，我正在尝试制作一个闪烁的屏幕，其中颜色在 WebGL 中的两种颜色之间发生变化。我为具有一种颜色的正方形设置了代码，但不知道如何以人眼无法想象的速度在两种颜色之间切换，例如 1KHz。在此先感谢，我是新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:14:27.380

这是不可能的。电脑显示器不会那么快刷新。

# c# - 在c#中使用字符串作为现有变量

> ID：11192025
> 
> 赞同：-10
> 
> 时间：2012-06-25T15:12:26.247
> 
> 标签：c#, variables

```
string one = "find";
combobox1.text = "one"; 
```

我想使用“一个”，即 ( `combobox1.text`) 的字符串值作为现有变量`string one`。这可能吗？

所有你仍然没有得到我的问题。我想使用**combobox1.text**的值，它是**一个**，**一个**是变量字符串，它的值是**find**。所以我想间接使用变量**one的值。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:18:49.927

对于这样的局部变量，您不能这样做。对于成员字段，您可以使用[*反射*](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.100%29.aspx)；对于当地人来说，最简单的方法是使用`Dictionary`，例如，像这样：

```
IDictionary<string,string> vars = new Dictionary<string,string> {
    {"one", "find"}
,   {"two", "cancel"}
};

combobox1.text = vars["one"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:13:24.983

你必须使用：

```
combobox1.text = one; 
```

希望能帮助到你

# asp.net-mvc-3 - asp.net mvc3中的jquery ui对话框第二次没有打开

> ID：11192030
> 
> 赞同：0
> 
> 时间：2012-06-25T15:12:41.440
> 
> 标签：asp.net-mvc-3, jquery-ui-dialog

当我单击表单中的 New Trade 按钮时，它会打开 jquery ui 对话框。但是，当我单击链接按钮时，我在 gridview 中有链接按钮，它应该打开 jquery ui 对话框，它会在单击新交易按钮之前打开 jquery ui 对话框。但是，单击新交易按钮后，如果我单击网格视图中的链接按钮，它会调用“ViewTradeDialog(id)”函数，对话框不会打开，它会显示错误消息“$vwdia.html(data).dialog is not一个函数”。我的代码如下：

```
 @using (Html.BeginForm("NewTrade", "Trade", FormMethod.Post, new { id = "searchForm" }))
{

    <div id="searchbtn">
        <input id="btn_newtrade" type="submit" value="New Trade" />
    </div>

}

jquery code

  <script type="text/javascript">
 $(function () {

     var $loading = $('<img src="../../loading.gif" alt="loading">');

     var $dialog = $('<div></div>').append($loading);

     $('#searchForm').submit(function (e) {

         var url = this.action;

         $.ajax({
            autoOpen: false,
             url: url,
             success: function (data) {
                 $dialog.html(data).dialog({
                     zIndex:1,
                     width: 1400,
                     height: 600,
                     resizable: false,
                     title: 'New Trade Details',
                     modal: true,
                     buttons: {
                         "close": function () {
                             $dialog.dialog('close');
                         },

                         "Add Trade": function () {
                             $dialog.dialog('close');
                             $.ajax({
                                 type: 'POST',
                                 url: url

                             });
                         }
                     }
                 });
             }
         });
         return false;

     });

 });

 function ViewTradeDialog(id) {

     alert(id);

     var $vwdia = $('<div></div>');

     var url = '/Trade/ViewTrades?tradeid=' + id;

     $.ajax({
         url: url,
         success: function (data) {
             $vwdia.html(data).dialog({

                 width: 600,
                 height: 600,
                 resizable: false,
                 title: 'View Trade Details',
                 modal: false,
                 buttons: {
                     "close": function () {
                         $vwdia.dialog('close');
                     }
                 }
             });
         }
     });

     return false;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:44:09.237

每次单击新交易时，您可能都会覆盖对话框插件，因为它应用于相同的元素：

```
$dialog.html(data).dialog(... 
```

有可能通过替换对话框的 html 并重新应用它正在破坏的插件。您是否在 JS 控制台中看到任何其他错误？

# python - Python数学输出不正确

> ID：11192031
> 
> 赞同：1
> 
> 时间：2012-06-25T15:12:42.013
> 
> 标签：python

> **可能重复：**
> [为什么这个除法在 python 中不起作用？](https://stackoverflow.com/questions/1787249/why-doesnt-this-division-work-in-python)

我遇到的一个简单问题（我认为）以下语句：

```
 print (4950*8)/(((4950*8)/10000000*(1538/1460))+0.1/1000)/1000 
```

给我 396000.0。

但在计算器上我得到 9270.614192621。

如果有人能指出我在代码中做错了什么，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:14:22.523

```
>>> print (4950.0*8)/(((4950.0*8)/10000000*(1538.0/1460))+0.1/1000)/1000
9270.61419262 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:15:07.917

`int`旧版本的 Python 对操作数使用截断整数除法。

尝试`from __future__ import division`（请参阅[http://www.python.org/dev/peps/pep-0238/](http://www.python.org/dev/peps/pep-0238/)了解全文）或强制 int 操作数浮动（例如，使用`float`，或附加`.0`到文字）。

# objective-c - iOS 与其 Web 服务器的数据库同步

> ID：11192032
> 
> 赞同：0
> 
> 时间：2012-06-25T15:12:58.673
> 
> 标签：objective-c, ios

如何在我的 iPhone 应用程序和网络服务器之间保持数据库同步，如果网络服务器数据库有更新，我的应用程序应该会有更新警报。是否可能请帮助我，我们将不胜感激。

谢谢迪普什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:22:04.263

如果您希望用户在应用程序未打开时接收更新警报，您将需要注册推送通知。然后，一旦他们打开应用程序，数据就可以同步到他们的设备。

为了维护一组同步的数据，您可能希望使用诸如[RestKit 之](http://restkit.org/)类的框架进行研究，该框架提供了一个对象映射系统，允许您将 Core Data 与远程对象存储同步。[这是他们的对象映射文档](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md)。

# iphone - 他人制作的Xcode/iPhone企业发行证书

> ID：11192035
> 
> 赞同：0
> 
> 时间：2012-06-25T15:13:04.883
> 
> 标签：iphone, xcode, distribution, enterprise

有一个不再存在的人（在我之前）创建的企业分配条款。通过将自己加入团队等方式获得开发条款/证书很好。但是在构建发布/分发时清除分发条款的“无有效/匹配证书”的最佳方法是什么？我们是否必须另作分配条款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:59:05.523

如果您没有用于签署证书的密钥，那么您需要使用新密钥创建新证书，并使用这些新证书签署您的个人资料。

# windows - 如何在 Windows 命令行中执行 for 循环？

> ID：11192039
> 
> 赞同：40
> 
> 时间：2012-06-25T15:13:15.477
> 
> 标签：windows, loops, for-loop

我想知道这是否可能？我不熟悉使用 windows 命令行，但我必须将它用于我正在处理的项目。我有许多文件，我需要为每个文件执行一个功能。我习惯于使用 python，但显然这有点不同，所以我希望能得到一些帮助。

基本上我需要 for 循环遍历文件夹中的 17 个文件，对每个文件执行一个功能（使用我在这里为项目提供的特定软件），然后输出一个具有唯一名称的文件（该功能通常需要我说明输出文件名）我会吸收它并为17个中的每一个手动完成，但基本上它是创建一个文件的数据库，然后将它与17个中的每一个进行比较。它需要迭代虽然几百次。使用 for 循环可以节省我几天的工作时间。

建议？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-25T15:21:40.713

命令行解释器确实有一个 FOR 构造，您可以从命令提示符或批处理文件中使用它。

出于您的目的，您可能想要类似的东西：

```
FOR %i IN (*.ext) DO my-function %i 
```

这将导致当前目录中每个扩展名为 *.ext 的文件的名称被传递给 my-function（例如，可能是另一个 .bat 文件）。

该`(*.ext)`部分是“文件规范”，并且对于您指定文件集的方式非常灵活。例如，您可以这样做：

```
FOR %i IN (C:\Some\Other\Dir\*.ext) DO my-function %i 
```

在不同的目录中执行操作。

一般来说，filespec 和 FOR 有很多选项。看

```
HELP FOR 
```

从命令提示符获取更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-25T21:25:50.027

这可能会帮助您找到您要查找的内容... [批处理脚本循环](https://stackoverflow.com/questions/2591758/batch-script-loop/35630568#35630568)

我的回答如下：

```
@echo off
:start
set /a var+=1
if %var% EQU 100 goto end
:: Code you want to run goes here
goto start

:end
echo var has reached %var%.
pause
exit 
```

start 标签下的第一组命令循环直到变量 %var% 达到 100。一旦发生这种情况，它将通知您并允许您退出。通过将 100 更改为 17 并放置您的代码或使用调用命令后跟批处理文件的路径（Shift+右键单击文件并选择“复制为路径”），此代码可以适应您的需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-06T09:45:03.877

您也可以考虑添加`"`.

例如`for %i in (*.wav) do opusenc "%~ni.wav" "%~ni.opus"`是非常好的主意。

# caching - 缓存对齐链表

> ID：11192041
> 
> 赞同：0
> 
> 时间：2012-06-25T15:13:19.417
> 
> 标签：caching, memory-management, linked-list, memory-alignment

我了解数据类型或结构对齐、打包、填充问题等的概念。我已经实现了一个单链表，其中每个节点占用大约 250 字节，即大约是 64 字节缓存行大小的 4 倍。我的机器是 Intel 64 位架构。

现在，单个链表本质上是一个指针追逐数据结构，因此会遭受大量缓存未命中的问题。为了减少缓存未命中，我使用 *posix_memalign* 函数对齐每个数据结构节点以缓存 64 字节的行边界。现在所有链表节点都是缓存对齐的。

这样做之后，我发现链表的内存消耗大大增加，而且性能实际上已经恶化。谁能解释可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:01:13.250

我不知道您使用什么 malloc，但这是来自[tcmalloc](http://code.google.com/p/gperftools/source/search?q=posix_memalign&origq=posix_memalign&btnG=Search%20Trunk)

```
// For use by exported routines below that want specific alignments
//
// Note: this code can be slow for alignments > 16, and can
// significantly fragment memory.  The expectation is that
// memalign/posix_memalign/valloc/pvalloc will not be invoked very
// often.  This requirement simplifies our implementation and allows
// us to tune for expected allocation patterns. 
```

# mysql - mysql快速选择查询而不读取所有数据库

> ID：11192045
> 
> 赞同：0
> 
> 时间：2012-06-25T15:13:32.190
> 
> 标签：mysql, database, select

我有一个包含两个表的大型数据库：stat 和 total。

关系示例如下：

统计：

```
|   ID   |  total event |
+--------+--------------+
|   7    |  2           |
|   8    |  1           | 
```

全部的：

```
|ID | Event        |
+---+--------------+
| 7 | "hello"      |
| 7 | "everybody"  |
| 8 | "hi"         | 
```

这是一个非常简化的版本；还要考虑 STAT 表可能有 500K 记录，对于每个 STAT 我可以有大约 200 TOTAL 行。

目前，如果我在表 TOTAL 中运行一个简单的`SELECT`查询，系统会非常慢。

任何人都可以为创建 TOTAL 表提供一些建议吗？是否可以对 MySQL 说该`id`列已经排序，因此没有理由扫描所有行直到最后，例如，`id=7`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:16:34.170

1.  添加`INDEX(ID)`到您的表（两者），如果你还没有。

2.  `SELECT COUNT(*) FROM TOTAL WHERE ID=7`-> 如果`ID`是*indexed*，这会很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:16:19.260

您可以添加索引，此外还可以对表进行分区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:23:06.730

根据@ypercube 的评论，表未以排序状​​态存储，因此无法将其“告诉”数据库。但是，您可以在表上添加索引以使它们更快地搜索。

要检查的一件重要事情 - 看起来像是`TOTAL.ID`作为外键 - 如果是这样，表`TOTAL`应该有一个名为`ID`. 将该名称的现有列重命名为`STAT_ID`，因此很明显它是什么外键。然后在 上添加索引`STAT_ID`。

最后，作为一种风格，我建议您使表名和列名不区分大小写，并将它们写成小写。当关键字为大写而数据库对象为小写时，它更易于阅读 SQL。

# cocos2d-iphone - Cocos2d：慢慢露出一个精灵（想想魔兽世界的法术冷却时间）

> ID：11192060
> 
> 赞同：1
> 
> 时间：2012-06-25T15:14:15.250
> 
> 标签：cocos2d-iphone, glsl

我想创建一个 WoW 冷却效果，其中玩家做了一些动作并且在精灵再次完全显示之前无法再次执行该动作。我有同一个精灵的灰色版本，我想慢慢地显示精灵，直到它再次完全可用。因此，灰色和彩色精灵会在垂直方向上缓慢混合。

有没有办法通过 Cocos2d 和 CCSprite 的内置功能来做到这一点？

我正在使用 Cocos2d 的 v2，所以我可以编写一个我认为很容易的着色器，但在我走这条路之前，我想看看是否有更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:30:50.637

看看 CCProgressTimer 类。如果我理解正确，它会做出你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:07:56.527

您可以使用 CCFadeIn 为灰色精灵上的彩色精灵设置动画：

```
[coloredSprite runAction:[CCFadeIn actionWithDuration:1.0f]; 
```

# powershell - 在带有引号的字符串上使用替换运算符 powershell

> ID：11192064
> 
> 赞同：5
> 
> 时间：2012-06-25T15:14:26.143
> 
> 标签：powershell, quotes

我正在寻找运行命令

```
foreach-object {$_ -replace 
```

但是，我尝试使用的字符串可以描述如下

```
this string "has" quotes 
```

整条线是

```
foreach-object {$_ -replace "this string "has" quotes", "this string "won't have" quotes"} 
```

如何使这个引用填充行与 powershell 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:23:34.490

您可以像这样``"`或更好地转义嵌套的双引号，使用单引号来引用字符串，然后您就不需要转义双引号，例如：

```
'this string "has" quotes' 
```

注意：使用单引号，您不会在字符串中获得变量扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T22:42:17.797

您可以将 Grave（波浪号键）双引号作为转义字符。您可以对字符串中的任何特殊字符执行此操作。

例如

```
$a = "This String `"Has`" Quotes"
$a = $a.replace("This String `"Has`" Quotes","this string won't have quotes. ") 
```

# opencv - 从窗口到ios的openCV

> ID：11192067
> 
> 赞同：0
> 
> 时间：2012-06-25T15:14:28.853
> 
> 标签：opencv, face-recognition

我想从服务器训练 openCV 并将 openCV 生成的 xml 发送到 ios 设备，应用程序将使用服务器训练的 xml 识别面部。我将在两个应用程序中使用 openCV，但服务器有窗口（训练）并且设备有 ios（识别）。

所以我的主要问题很简单：

openCV窗口版生成的xml可以用openCV IOS版不麻烦吗？有人做过类似的东西谁能给我一些提示？

在窗口中，我将使用 .Net。

我认为它们不会有麻烦，因为它们是相同的库（openCV），所以我想它们具有相同的内部算法，但我想在开始项目之前确定。

最好的问候和感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:55:57.210

没有问题，但您必须使用从设备拍摄的图像进行训练。根据您不同的相机，拥有多个 xml 集是正常的。通常，您将这些与二进制文件一起发布，而不是作为下载，但仍然......

# java - Android Fragment 中的可折叠菜单

> ID：11192069
> 
> 赞同：1
> 
> 时间：2012-06-25T15:14:33.103
> 
> 标签：java, android, menu

是否可以在片段中有一个可折叠的菜单，例如......

```
Drinks
  Juice
  Soda
Main Dish
  Spaghetti Carbonara
  Pizzas 
```

我想要实现的是，当我单击主菜单“饮料”时，我将折叠以显示子菜单项。

如果可折叠的东西是不可能的，是否可以隐藏主菜单然后只显示所选主菜单项下的子菜单？

例如。

当我单击主菜单上的“饮料”时，我将使用子菜单项重新填充（我不知道它叫什么）片段。这是可以实现的吗？

我读了一些关于 Fragments 的东西，我无法将另一个片段放在另一个片段之上。这是真的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:19:39.583

我相信你正在寻找一个[`ExpandableListView`](http://developer.android.com/reference/android/widget/ExpandableListView.html).

![在此处输入图像描述](../Images/9387561e45f314db3c1f9324ce45e2e5.png)

# android - 获取对 ListView 中对象的引用

> ID：11192076
> 
> 赞同：0
> 
> 时间：2012-06-25T15:15:11.217
> 
> 标签：android, reference, onitemclick

预先：这是我第一次尝试 Android 应用程序。我在那个奇怪的地方，不知道要搜索什么才能找到我的问题的答案。

我已经完成的是：

*   创建了一个具有“title”和“youTubeUrl”属性的自定义类*myCustomClass*
*   创建了一个 ArrayList<myCustomClass>
*   向 ArrayList<myCustomClass> 添加了多个元素
*   创建了一个自定义 ArrayAdapter 并将其附加到 arraylist。
*   向自定义 ArrayAdapter 添加了 onItemClickListener。

所有这些都很好。我想在 ListView 中显示标题，然后当用户单击列表视图项时，我想获得对 youtubeUrl 属性的引用。

这是我的适配器代码：

```
MyListAdapter myListAdapter = new MyListAdapter(this, R.layout.my_list, elements);
myList.setAdapter(myListAdapter);
myList.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        String item = ((TextView)view).getText().toString();
        Toast.makeText(getBaseContext(), item, Toast.LENGTH_LONG).show();
    }
});
myListAdapter.notifyDataSetChanged(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:17:54.023

您可以使用`position`in 属性`onItemClick`返回您的数据源并找到相关项目。从那里您应该能够检索 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:32:03.277

正如另一张海报暗示的那样，这取决于您在适配器中使用的内容。假设它是 MyCustomClass。您可以在 onItemClick 方法中执行以下操作：

```
MyCustomClass selection = (MyCustomClass) getListView().getItemAtPosition(position); 
```

# mysql - 使用流利的 NHibernate 创建继承的问题

> ID：11192080
> 
> 赞同：0
> 
> 时间：2012-06-25T15:15:22.300
> 
> 标签：mysql, nhibernate, fluent-nhibernate

我试图创建继承，这样我就可以拥有一些具有通用属性的超类，然后是更专业的类，这些类会被使用。

我想要他们在这里制作的每种类型的表或每个类的表[http://www.codeproject.com/Articles/232034/Inheritance-mapping-strategies-in-Fluent-Nhibernat](http://www.codeproject.com/Articles/232034/Inheritance-mapping-strategies-in-Fluent-Nhibernat)

所以我在这里有我的超类型游戏

```
 public abstract class Game
{
    public virtual int Id { get; set; }
    public virtual List<UserGame> UserList { get; set; }
}

public class GameMap : ClassMap<Game>
{
    public GameMap()
    {
        Id(x => x.Id, "GameId")
            .GeneratedBy
            .HiLo("100");
        HasMany(x => x.UserList)
           .Cascade.All();
    }
} 
```

然后我的专业课在这里 QMGameActive

```
 public class QMGameActive : Game
{
    public virtual DateTime LastUpdate { get; set; }
    public virtual string SelectedBrick { get; set; }
    public virtual int Score { get; set; }
    public virtual string History { get; set; }
    public virtual int StartingPlayerId { get; set; }

    public QMGameActive() 
    {
        LastUpdate = DateTime.Now;
        History = "";
        SelectedBrick = "";
    }
}

public class QMGameActiveMap : SubclassMap<QMGameActive>
{
    public QMGameActiveMap()
    {
        KeyColumn("GameId");
        Map(x => x.LastUpdate);
        Map(x => x.SelectedBrick);
        Map(x => x.Score);
        Map(x => x.History);
        Map(x => x.StartingPlayerId);
    }
} 
```

但是当我从服务器获得图表时，我可以看到 Game 和 QMGameActive 之间没有连接

![在此处输入图像描述](../Images/abcb8a1b04ffe82c91cb7c02b6c8ef0e.png)

那么我错过了什么让它使用继承？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:50:07.630

我相当肯定，如果你 KeyColumn("GameId"); 从 QMGameActiveMap() 然后 NHibernate 将生成 QMGameActive，其 ID 列 GameID 将是 Game.GameId 的外键。这似乎会给你你想要的。

（很抱歉离家出走，无法尝试代码以确保）。

# firefox - 网站在不同的浏览器/系统上显示不同

> ID：11192081
> 
> 赞同：1
> 
> 时间：2012-06-25T15:15:25.463
> 
> 标签：firefox, google-chrome, web

对此完全感到困惑，因为代码似乎没有任何“错误”。我已经请几个人检查该网站，但我不断得到不同的答案。从加载时出现滚动的滚动文本（我显然不想要）到不显示图片：/

有谁能帮忙吗？

```
<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">

<title>WEBSITE TITLE</title>

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

<link rel="stylesheet" type="text/css" href="css/page.css">

</head>
<body>

<div id="container">

<h1>WEBSITE TITLE</h1>
<h2><a href="mailto:EMAIL@ADDRESS.COM">EMAIL@ADDRESS.COM</a></h2>

<ul id="arrows">
<li><a id="arrow1" href="http://www.facebook.com">Arrow<span></span></a></li>
<li><a id="arrow2" href="http://twitter.com">Arrow2<span></span></a></li>
</ul>

<div id="photo01"></div>

<div id="navcontainer">

<ul id="navlist">

<li><span>List</span><ul>
<li><a href="#">1</a></li>
<li><a href="#">2</a></li>
<li><a href="#">3</a></li>
<li><a href="#">4</a></li>
<li><a href="#">5</a></li>
<li><a href="#">6</a></li>
<li><a href="#">7</a></li>
<li><a href="#">8</a></li>
<li><a href="#">9</a></li>
<li><a href="#">10</a></li>
<li><a href="#">11</a></li>
<li><a href="#">12</a></li>
<li><a href="#">13</a></li>
<li><a href="#">14</a></li>
<li><a href="#">15</a></li>

</ul></li></ul>
</div><!-- end #navcontainer -->

</div><!-- end #container -->

</body>
</html> 
```

CSS看起来像这样：

```
body {
/*margin:0;*/     margin:10px;
background-image:url(background.png);
background-attachment:fixed;
font-family:'hoefler text',georgia,'times new roman',serif;
}

a {
color:#dadada;
text-decoration:none;
}
a:visited,a:hover {
color:#fff;
}
a:active {
color:#000;
}
a {
outline:0;
}

#container {
/*width:1000px;*/                       min-width:1000px;
                                        padding-bottom:20px;
/*margin:140px auto 0;*/ 
}

div #photo01
     {      
             float:left;
     position:absolute;
             width: 690px;
             height: 550px;
                                               margin-top:150px;
                                               margin-bottom:20px;
                                               margin-left:880px;

             background-image: url(img_01.jpg);
             background-repeat: no-repeat;
             /*background-position: 200px 300px;*/
     }

h1,h2 {
position:absolute;
/*top:225px;*/ top:235px;
left:50px;
z-index:2;
/*width:1000px;*/ width:720px;
padding-top:25px;
margin:0;
color:#dadada;
font-weight:normal;
font-size:1.85em;
letter-spacing:0.2em;
line-height:1.1em;
text-transform:uppercase;
background-image:url(background.png);
}
h2 { 
                    width:500px;                     
/*top:290px;*/      top:300px;
padding-top:20px;
font-size:1.0em;
                     background-image:url(background.png);
}

#arrows {                       
float:left;
width:64px;
padding:0;
/*margin-top:250px;
margin-bottom:50px;
margin-right:0px;
margin-left:-150px;*/                          margin-top:402px;
                                               margin-bottom:200px;
                                               margin-left:50px;

list-style-type:none;
}
#arrows a {
position:relative;
display:block;
width:64px;
height:64px;
/*margin-bottom:10px;*/margin-bottom:5px;
text-indent:-9999px;
overflow:hidden;
background-image:url(arrows.png);
}
#arrows span {
position:absolute;
top:0;
left:0;
width:64px;
height:64px;
background-image:url(arrows.png);
opacity:0;
-webkit-transition:all 0.5s ease;
-moz-transition:all 0.5s ease;
-o-transition:all 0.5s ease;
}
#arrows span:hover {
opacity:1;
}
#arrow1 {
background-position:0 0;
}
#arrow1 span {
background-position:0 -64px;
}
#arrow2 {
background-position:-64px 0;
}
#arrow2 span {
background-position:-64px -64px;
}

#navcontainer {
clear:both;
overflow-x:hidden;
}

#navlist {
float:left;
line-height:30px;  
padding:0;
margin:0;
list-style-type:none;
color:#dadada;
font-size:0.65em;
letter-spacing:0.2em;
line-height:1.1em;
text-align:left;
text-transform:uppercase;
}

#navlist:first-child {
position:relative;
cursor:pointer;
}

#navlist span {
position:absolute;
z-index:1; 
width:100px;
line-height:40px;
padding-left:50px; 
background-image:url(background.png);
color:#dadada;
}

#navlist ul {
padding:0;
margin:0 0 0 -1300px; 
list-style-type:none;
-webkit-transition:all 2s ease;
-moz-transition:all 2s ease;
-o-transition:all 2s ease;
}

#navlist ul li {
float:left;
margin:0 3px;
}

#navlist:first-child:hover ul{
margin:0 0 0 150px; 
color:#dadada;
}

#navlist a {
display:block;
line-height:40px;
padding:0 8px;
color:#dadada;
-webkit-transition:all 0.5s ease;
-moz-transition:all 0.5s ease;
-o-transition:all 0.5s ease;
}

#navlist a:hover {
color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:47:12.513

我不确定到底是什么问题。我已经将它加载到 JS Fiddle 中，所以我们有一些事情要做。您能否就该问题提供更多详细信息，以及它是否特定于某种类型的浏览器？

[http://jsfiddle.net/eNyqK/](http://jsfiddle.net/eNyqK/)

# python - Python：双反斜杠格式

> ID：11192082
> 
> 赞同：1
> 
> 时间：2012-06-25T15:15:30.517
> 
> 标签：python, backslash

我正在尝试在我的 python 程序中处理文件地址并将其传递给 MySQL。

我发现我需要对地址使用原始字符串，以便它完整地到达 MySQL。这有效：

```
myFilePath = r"'D:\\folder\\file.csv'"
sqlStatement = r"LOAD data local INFILE %s INTO TABLE test ...);" % (myFilePath) 
```

但是，我正在创建一个 GUI，并希望路径名可以更改。所以我试图将普通文件路径转换为正确的格式，但我无法完成。

**我怎样才能转换**

```
filePath = "D:\folder\file.csv" 
```

**成与上面的 myFilePath 完全相同的格式？**

到目前为止我想出的最好的是

```
myFilePath = r'r"' + "'" + filePath + "'" 
```

但是我仍然需要将现有的反斜杠加倍，而且我找不到任何方法来做到这一点。我试过迭代，像这样：

```
myFilePath = ""
for i in range(len(filePath)):
    if i == "\\":
        myFilePath += "\\\\"
    else:
        myFilePath += filePath[i] 
```

但这不起作用，可能是因为反斜杠的转义性质。再次使用原始字符串会产生比我想要的更多的反斜杠，而且我已经超出了我的深度。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:19:25.590

首先，您不应该使用字符串格式来创建 SQL 语句。一旦您以正确的方式使用 db 接口，问题就会消失：

```
file_path = r"d:\folder\file.csv"
cursor.execute("LOAD data local INFILE %s INTO TABLE test ...);", file_path) 
```

对 SQL 语句使用字符串格式只会让自己面临 SQL 注入攻击。

# c# - 当前显示器的分辨率

> ID：11192083
> 
> 赞同：5
> 
> 时间：2012-06-25T15:15:32.527
> 
> 标签：c#, winforms

**如何获得当前显示器的屏幕分辨率？** “当前监视器”是指应用程序启动的那个。

我问这个的原因是因为我有两个显示器，辅助显示器是 1280x1024，主显示器是 1680x1050。*该应用程序在启动时会根据主*显示器的分辨率愚蠢地设置自己的高度和宽度。当应用程序在辅助显示器上启动时，它会溢出分辨率，这看起来很奇怪。

我知道我可以更改/删除设置应用程序高度/宽度的代码，但我也很好奇如何确定应用程序显示在哪个监视器上。

对于它的价值，我不支持设置自己的高度/宽度的应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T15:18:27.317

使用[`Screen.FromControl`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.fromcontrol.aspx)：

```
Screen.FromControl(this).Bounds 
```

您要为其检索信息的位置`this`在哪里。`Form``Screen`

# android - OSMdroid 引起：java.lang.ClassNotFoundException: org.osmdroid.views.MapView

> ID：11192084
> 
> 赞同：2
> 
> 时间：2012-06-25T15:15:33.363
> 
> 标签：android, osmdroid

我尝试在我的一个应用程序中使用 OSMdroid，但我得到了这个：

在硬件设备 Android 4.0.3 (CM9) 上运行

从 logcat 记录：

```
06-25 16:56:07.389: E/AndroidRuntime(17760): java.lang.RuntimeException: Unable to start activity ComponentInfo{app.OSMMapViewActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class org.osmdroid.views.MapView
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.os.Looper.loop(Looper.java:137)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.ActivityThread.main(ActivityThread.java:4575)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at java.lang.reflect.Method.invokeNative(Native Method)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at java.lang.reflect.Method.invoke(Method.java:511)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at dalvik.system.NativeStart.main(Native Method)
06-25 16:56:07.389: E/AndroidRuntime(17760): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class org.osmdroid.views.MapView
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.Activity.setContentView(Activity.java:1835)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at app.OSMMapViewActivity.onCreate(OSMMapViewActivity.java:16)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.Activity.performCreate(Activity.java:4465)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
06-25 16:56:07.389: E/AndroidRuntime(17760):    ... 11 more
06-25 16:56:07.389: E/AndroidRuntime(17760): Caused by: java.lang.ClassNotFoundException: org.osmdroid.views.MapView
06-25 16:56:07.389: E/AndroidRuntime(17760):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
06-25 16:56:07.389: E/AndroidRuntime(17760):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
06-25 16:56:07.389: E/AndroidRuntime(17760):    ... 21 more 
```

我希望这会对你有更多帮助。

地图屏幕.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <org.osmdroid.views.MapView
        android:id="@+id/mapview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:clickable="true" />

</LinearLayout> 
```

这是我的活动：

```
import org.osmdroid.tileprovider.tilesource.TileSourceFactory;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;

import android.app.Activity;
import android.os.Bundle;

public class OSMMapViewActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mapscreen);

        MapView mMapView = (MapView) findViewById(R.id.mapview);
        mMapView.setTileSource(TileSourceFactory.MAPNIK);
        mMapView.setBuiltInZoomControls(true);
        MapController mMapController = mMapView.getController();
        mMapController.setZoom(13);
        GeoPoint gPt = new GeoPoint(51500000, -150000);
        //Centre map near to Hyde Park Corner, London
        mMapController.setCenter(gPt);
    }

} 
```

我正在使用 OSMDroid 3.0.8 和 slf4j-1.5.8 和 eclipse。

编辑：

我注释掉了 setContentView() 和其他代码。我认为问题出在布局文件上...

编辑1：

问题已经解决了... ：）

将 osmdroid 和其他 jar 从 libs/osmdroid 复制到 libs/ ^_^

无论如何感谢您的帮助！！！！

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T16:44:00.183

我有同样的问题。我通过以下方式解决了它：

1.  cd 进入项目的 libs 文件夹。
2.  ls 。
3.  请注意，只有一个必需的库。osmdroid-android-4.0.jar 不存在。
4.  将其从您下载并保存的位置复制到此文件夹中。

现在运行应用程序。我应该工作。注意：我已经通过选择 project->properties->Java Built path->Libraries 将它添加到项目路径中。

所需的库是：

1.  slf4j-android-1.5.8.jar
2.  osmdroid-android-4.0.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:29:22.553

问题是eclipse需要重新启动才能正确加载外部库。

感谢你的帮助！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:21:54.350

您是否在 Android 清单文件中添加了适当的权限？

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

缺少其中任何一个，尽管`ACCESS_FINE_LOCATION`可以替换为`ACCESS_COARSE_LOCATION`，但通常会导致任何类型的`MapView`失败。

# eclipse - 示例 Spring 项目的 Eclipse 项目类型

> ID：11192086
> 
> 赞同：0
> 
> 时间：2012-06-25T15:15:35.823
> 
> 标签：eclipse, spring, model-view-controller, project

在[http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html)的教程中， Spring 家伙没有说他们选择哪个 Eclipse 项目来创建这个示例应用程序。项目图标上面有 S 符号，所以这不是 Java 项目（标有 J 符号）。但是，它看起来也不像一个动态 Web 项目。

您能否解释一下那个 S 符号并说明它是哪种项目类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:30:31.460

他们正在使用[Spring Eclipse 插件](http://marketplace.eclipse.org/content/spring-ide)（或者他们正在使用[Springsource Tool Suite IDE](http://www.springsource.com/developer/sts)，基于 Eclipse）

使用此插件，动态 Web 项目应该可以为您提供您正在寻找的“S”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:30:21.850

S 仅表示 Spring 特性处于活动状态（它是 Spring IDE 或 SpringSource Tool Suite）。用 Eclipse 来说，我猜你应该生成一个动态 Web 项目，但最好生成一个 Maven 项目并将其导入 Eclipse（然后 Eclipse 会自动设置正确的项目类型）。

# html - 在类上禁用和重新启用 Draggable

> ID：11192088
> 
> 赞同：1
> 
> 时间：2012-06-25T15:15:41.127
> 
> 标签：html, jquery-ui

我正在尝试在一个类上切换可拖动，它最初工作正常，但第二次尝试使用可拖动（启用->禁用->启用）启用该类时，它似乎不起作用。我已经建立了一个 jsfiddle 来说明我的概念。本质上，我只是希望我的可拖动元素第二次重新启用。

[http://jsfiddle.net/3XZAd/1](http://jsfiddle.net/3XZAd/1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:37:44.420

您必须将“禁用”选项显式设置为 true 或 false：

[http://jsfiddle.net/v22Ef/](http://jsfiddle.net/v22Ef/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:37:58.803

尝试传入一个`disabled`属性设置为`true`or的对象`false`：

```
// when button clicked ...
$('#enable').click(function() {
    // also enable li tag with id test1
    $('.tests').draggable({disabled: false});
});
// when button clicked ...
$('#disable').click(function() {
    // also enable li tag with id test1
    $('.tests').draggable({disabled: true});
}); 
```

[例子](http://jsfiddle.net/3XZAd/4/)

# python - python中带有对象的默认参数

> ID：11192090
> 
> 赞同：0
> 
> 时间：2012-06-25T15:15:41.367
> 
> 标签：python, pexpect, default-arguments

我知道我可以在 python 中定义默认参数，但我可以用对象这样做吗？

例如，我想使用 p.expect 对象：

```
def exitDevice(ip, m='', sendExit=True):
    if sendExit:
        m.send('exit')

    print "left device", ip 
```

这是在 Python 中处理作为默认参数传入的对象的正确方法吗？如果没有，如何做到这一点？或者，如果这是正确的，是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:20:09.577

这有点棘手，因为必须在解析代码时定义默认值，但您始终可以执行以下操作：

```
def exitDevice(ip,m=None,sendExit=True):
   if m is None: m = getDefaultValueForM()
   if sendExit: m.send ( 'exit' ) 
```

# c# - 如何在没有搜索参数的情况下使用 BingMapsTask

> ID：11192100
> 
> 赞同：0
> 
> 时间：2012-06-25T15:16:06.803
> 
> 标签：c#, windows-phone-7, xaml

我想通过按钮单击事件在用户请求上加载 BingMapsTask，尽管我不想为任务设置特定的搜索参数。我真的只是希望用户能够在其当前位置使用内置功能，例如查看交通和 Bing Scout（无需使用 Center 属性即可找到）。这可能吗，因为据我所知，我必须在任务中包含一个搜索查询才能正常工作。我尝试使用空字符串进行搜索，以及完全不进行搜索，但两者都不起作用。如果这是不可能的，我如何获取用户当前位置并将其传递给搜索参数？我试图使用 geocoordinatewatcher 来获取当前的纬度和经度，但我不确定如何将这些值传递给搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:42:44.203

我假设您知道如何定义 GeoCoordinateWatcher，因此在初始化 GeoCoordinateWatcher 后，使用以下代码在您的按钮单击事件处理程序中使用 BingMapsTask

```
if(watcher != null)
        {
            BingMapsTask bing = new BingMapsTask();
            bing.Center = new GeoCoordinate(watcher.Position.Location.Latitude, watcher.Position.Location.Longitude);
            bing.ZoomLevel = 12;
            bing.Show();
        } 
```

这里的观察者是`GeoCoordinateWatcher`对象

# svn - 无法使用 tortois svn 创建标签

> ID：11192101
> 
> 赞同：-1
> 
> 时间：2012-06-25T15:16:07.397
> 
> 标签：svn, tortoisesvn

简单地说，我需要为我的代码创建一个标签，我需要在里面创建这个标签`/tags/Source Code/phase1` ![这就是我的svn文件结构](../Images/601671cffa67e5bdf192da6039345370.png)

为了在`/tags/Source Code/phase`文件夹内创建标签，我需要在创建标签之前在 svn 中创建 2 个文件夹`Source Code`， `phase1`还是在提供路径时自动创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:31:33.757

如果只在下面指定了第一个目录`tags`（例如*Source Code*），Tortoise SVN 将创建目录，但如果指定了多个深度（例如*Source Code/phase2*），则不会创建目录。

命令行客户端有一个用于创建中间目录的选项 ( `svn copy --parents`)。所以你可以使用它。或者，您可以签出`tags`具有*立即子*结帐深度的新工作副本，在那里 svn-add *Source Code/phase2*，从另一个工作副本 svn-copy 任何您需要的内容，然后提交从而避免中间修订（如果您会发生这种情况在单独的步骤中添加目录）实际上没有意义。

# iphone - ios：如何将 NSString 转换为 int64_t？

> ID：11192105
> 
> 赞同：2
> 
> 时间：2012-06-25T15:16:28.617
> 
> 标签：iphone, ios

我想将 a 转换`NSString`为`int64_t`，然后使用以下命令打印出来：

```
NSLog("%lld", i); 
```

现在我只能转换 using `[str integerValue]`which 有时会打印出负数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:07:04.163

您可以使用`[str longLongValue]`

例如：

```
int64_t i=[@"23570449442514" longLongValue]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-20T03:16:43.630

longLongValue 有效！[str longLongValue];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:21:48.447

您可以使用该`atoll`功能。

```
int64_t i = atoll([str UTF8String]); 
```

# java - Xml 不使用 sax 将字符串解析为输入

> ID：11192106
> 
> 赞同：11
> 
> 时间：2012-06-25T15:16:29.447
> 
> 标签：java, xml, sax

我有一个字符串输入，我需要从中提取简单信息，这是示例 xml（来自 mkyong）：

```
<?xml version="1.0"?>
<company>
    <staff>
        <firstname>yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
    <staff>
        <firstname>low</firstname>
        <lastname>yin fong</lastname>
        <nickname>fong fong</nickname>
        <salary>200000</salary>
    </staff>
</company> 
```

我如何在我的代码中解析它（我的`String name`类中有一个字段）：

```
public String getNameFromXml(String xml) {
        try {

            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();
            DefaultHandler handler = new DefaultHandler() {

                boolean firstName = false;

                public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {

                    if (qName.equalsIgnoreCase("firstname")) {
                        firstName = true;
                    }
                }

                public void characters(char ch[], int start, int length) throws SAXException {

                    if (firstName) {
                        name = new String(ch, start, length);
                        System.out.println("First name is : " + name);
                        firstName = false;
                    }

                }

            };

            saxParser.parse(xml.toString(), handler);

        } catch (Exception e) {
            e.printStackTrace();
        }

        return name;
    } 
```

我得到一个`java.io.FileNotFoundException`，我看到它正在尝试查找文件`myprojectpath + the entireStringXML`

我究竟做错了什么？

添加在 ：

这是我的主要方法：

```
public static void main(String[] args) {
        Text tst = new Text("<?xml version=\"1.0\"?><company>   <staff>     <firstname>yong</firstname>     <lastname>mook kim</lastname>       <nickname>mkyong</nickname>     <salary>100000</salary> </staff>    <staff>     <firstname>low</firstname>      <lastname>yin fong</lastname>       <nickname>fong fong</nickname>      <salary>200000</salary> </staff></company>");
        NameFilter cc = new NameFilter();
        String result = cc.getNameFromXml(tst);
        System.out.println(result);
    } 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-25T15:25:05.513

您应该使用`saxParser.parse(xml.toString(), handler);`以下行替换该行：

```
saxParser.parse(new InputSource(new StringReader(xml)), handler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:39:05.780

我将强调另一个问题，一旦你正确阅读了你的文件，你可能会遇到这个问题。

方法

```
public void characters(char ch[], int start, int length) 
```

*不会总是给你完整的文本元素*。一次给你文本元素（内容）'n'个字符是自由的。从[文档](http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)：

> SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块

因此，您应该从每次调用此方法（例如使用 a ）构建您的文本元素字符串，并且仅在调用相应方法`StringBuilder`后解释/存储该文本。`endElement()`

现在这可能不会影响您。但它会在未来的某个时间出现——可能是你最不期待的时候。我在从小型 XML 文档移动到大型 XML 文档时遇到过这种情况，其中缓冲能够容纳整个小文档，但不能容纳较大的文档。

一个例子（伪代码）：

```
 public void startElement() {
      builder.clear();
   }
   public void characters(char ch[], int start, int length) {
      builder.append(new String(ch, start, length));
   }
   public void endElement() {
      // no do something with the collated text
      builder.toString();
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:21:40.037

我的这个帮助。它使用 javax.xml.parsers.DocumentBuilder，这比 SAX 更容易

```
public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }
                // return DOM
            return doc;
    } 
```

您可以使用 NodeList 遍历文档并按其名称检查每个节点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:26:11.877

`String`您使用 a作为第一个参数调用 parse 。根据[文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/parsers/SAXParser.html#parse%28java.lang.String,%20org.xml.sax.helpers.DefaultHandler%29)，该字符串被解释为`URI`您的文件。

如果您想`String`直接解析您的，您必须首先将其转换为 an`InputStream`以便与`parse(InputSource is, DefaultHandler dh)`方法（[docu](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/parsers/SAXParser.html#parse%28org.xml.sax.InputSource,%20org.xml.sax.helpers.DefaultHandler%29)）一起使用：

```
// transform from string to inputstream
ByteArrayInputStream in = new ByteArrayInputStream(xml.toString().getBytes());
InputSource is = new InputSource();
is.setByteStream(in);

// start parsing
saxParser.parse(xml.toString(), handler); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T15:24:00.910

[似乎你从这里](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)拿了这个例子。您需要将具有绝对路径的文件而不是字符串传递给方法`SAXParser.parse()`；仔细看这个例子。方法`parse()` [定义](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/SAXParser.html#parse%28java.io.File,%20org.xml.sax.helpers.DefaultHandler%29)如下

```
public void parse(File f,
                  DefaultHandler dh)
           throws SAXException,
                  IOException 
```

如果你想**解析一个字符串**。还有另一种方法`Inputstream`。

```
public void parse(InputStream is,
                  DefaultHandler dh)
           throws SAXException,
                  IOException 
```

然后您需要**将您的字符串转换为 InputStream**。这是[如何做到的](http://www.mkyong.com/java/how-to-convert-string-to-inputstream-in-java/)。

# java - 突出显示 ListView 项目而不触摸它

> ID：11192109
> 
> 赞同：3
> 
> 时间：2012-06-25T15:16:31.753
> 
> 标签：java, android, android-layout, android-listview

我的应用程序中有一个 listView 我想突出显示一个列表项而不触摸它。我希望始终突出显示第一项。我该怎么做呢？

这是我的列表视图的代码：

**编辑**

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.listmenu);

        menuList = (ListView) findViewById(R.id.list1);
    menuList.setAdapter(new ArrayAdapter<String>(this,R.id.list_content, heading));
    menuList.setSelection(1);
    View v = menuList.getSelectedView();
v.requestFocus();

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:26:02.557

在 Android 3.0 之前，您必须这样做的唯一机制是让选定的视图获得焦点。尝试类似：

```
menuList.setSelection(1);
View v = menuList.getSelectedView().requestFocus(); 
```

你也可以试试`requstFocusFromTouch()`。在 Android 3.0 及更高版本中，为此添加了**激活**`setActivated()`状态，因此如果您针对较新版本，您可以调用相应的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:02:01.947

到目前为止最简单的方法：

```
getListView().setItemChecked(0, true); 
```

下一个问题是什么？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:27:45.937

你可以试试

```
ArrayAdapter<String> adapter;

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.listmenu);

    menuList = (ListView) findViewById(R.id.list1);
    adapter = new ArrayAdapter<String>(this,R.id.list_content, heading);
    menuList.setAdapter(adapter);
    menuList.setSelection(1);

    adapter.getView(0, null, menuList).setFocused(true);

 } 
```

# c# - 在某些情况下，ascx 中的丢失事件

> ID：11192115
> 
> 赞同：1
> 
> 时间：2012-06-25T15:16:49.913
> 
> 标签：c#, asp.net, events

我有一些奇怪的行为。

我有一个控件 ( `InformationalPanel.ascx`)，它被放在两个不同的 aspx 页面中。在其中一个 ( `SendSmsFile.aspx`) 中一切正常，但在另一个 ( `SendMessage.aspx`) 中，虽然控件正确呈现，但内部的事件不起作用。

控件在具有相同 asp 标题和相同母版页的 aspx 页面内是相等的

```
<%@ Page Language="C#" MasterPageFile="~/Default.Master" AutoEventWireup="True" CodeBehind="SendMessage.aspx.cs" Inherits="Messages.SendMessage" ValidateRequest="false"%> 
```

...

```
<asp:Panel ID="panelSubmissionScheduler" runat="server" Visible="false">
    <uc2:InformationalPanel ID="submissionSchedulerInformationalPanel" runat="server" />
</asp:Panel> 
```

该控件有一个带有 LinkBut​​ton 的中继器，在某些情况下会丢失 Click 事件

```
<asp:Repeater ID="repeaterPartsToSchedule" runat="server" OnItemCommand="repeaterPartsToSchedule_ItemCommand"
                OnItemDataBound="repeaterPartsToSchedule_ItemDataBound">
                <ItemTemplate>
                    ...
                    <asp:LinkButton ID="scheduleLinkButton" runat="server" Text="<%$ Resources:ResourcesDefault, Schedule %>"
                        CssClass="button_serv" CommandName="schedule" OnClick="scheduleLinkButton_Click" />
                    ...
                </ItemTemplate>
            </asp:Repeater> 
```

当可见性改变时（因为某些业务规则），我调用 ascx 的`Refresh`方法来填充转发器（DataBind）。

我在到 aspx 页面中运行调试，但我无法发现为什么在一个一切正常而在另一个事件（`scheduleLinkButton_Click`或`repeaterPartsToSchedule_ItemCommand`）没有触发！

希望我足够明确，对我的英语感到抱歉

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:21:57.607

验证你不是每次都绑定你的控件，

```
You can use in your bind this bloc

If(! IsPostBack)
{

} 
```

# javascript - 如何在 jQuery 的表格中设置文本输入的值？

> ID：11192119
> 
> 赞同：2
> 
> 时间：2012-06-25T15:17:00.520
> 
> 标签：javascript, jquery

我在表格中有这些文本输入：

```
<td><input type='text' name='arrondi_devis_ht' class='calcul_total' size='8'></td>
<td><input type='text' name='arrondi_devis_ttc' class='calcul_total' size='8'></td>
<td><input type="text" name='marge_pourcent' class='calcul_total' size='5' value='20,0'></td> 
```

我通过执行以下操作成功获得了它们的价值：

```
var prix_unitaire_ht=parseFloat($(this).parents("tr").find('input[name="arrondi_devis_ht"]').val().replace(',','.'));
var prix_unitaire_ttc=parseFloat($(this).parents("tr").find('input[name="arrondi_devis_ttc"]').val().replace(',','.'));
var marge_pourcent=parseFloat($(this).parents("tr").find('input[name="marge_pourcent"]').val().replace(',','.')); 
```

所以我想我可以使用类似的机制来设置它们的值并尝试了这个：

```
$(this).parents("tr").find('input[name="arrondi_devis_ht"]').value=new_prix_ht;
$(this).parents("tr").find('input[name="arrondi_devis_ttc"]').value=new_prix_ttc;
$(this).parents("tr").find('input[name="marge_pourcent"]').value=new_marge; 
```

然而它不起作用，它们的价值保持不变。我试过用 .val 代替 value，也给他们分配一个 id 并做`find("#id").value`而不是上面没有任何结果。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:19:58.780

您需要使用该[`val()`](http://api.jquery/com/val)方法来设置输入的值。这就是您要查找的内容：

```
$(this).parents("tr").find('input[name="arrondi_devis_ht"]').val(new_prix_ht);
$(this).parents("tr").find('input[name="arrondi_devis_ttc"]').val(new_prix_ttc);
$(this).parents("tr").find('input[name="marge_pourcent"]').val(new_marge); 
```

由于它们都在同一行，您可能希望像这样重用初始选择器：

```
var $row = $(this).parents("tr");

$row.find('input[name="arrondi_devis_ht"]').val(new_prix_ht);
$row.find('input[name="arrondi_devis_ttc"]').val(new_prix_ttc);
$row.find('input[name="marge_pourcent"]').val(new_marge); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:19:25.403

```
$(this).parents("tr").find('input[name="arrondi_devis_ht"]').val(new_prix_ht);
$(this).parents("tr").find('input[name="arrondi_devis_ttc"]').val(new_prix_ttc);
$(this).parents("tr").find('input[name="marge_pourcent"]').val(new_marge); 
```

您需要使用**[.val()](http://api.jquery/com/val)**为输入字段设置值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:21:48.463

```
$(this).closest("tr").find('input[name="arrondi_devis_ht"]').val(new_prix_ht);
$(this).closest("tr").find('input[name="arrondi_devis_ttc"]').val(new_prix_ttc);
$(this).closest("tr").find('input[name="marge_pourcent"]').val(new_marge); 
```

您可以缓存`<tr>`比，您可以将代码简化为：

```
var row = $(this).closest('tr');
row.find('input[name="arrondi_devis_ht"]').val(new_prix_ht);
row.find('input[name="arrondi_devis_ttc"]').val(new_prix_ttc);
row.find('input[name="marge_pourcent"]').val(new_marge); 
```

# jquery - 使用 jQuery 添加图像以切换（隐藏/显示）侧边栏

> ID：11192121
> 
> 赞同：0
> 
> 时间：2012-06-25T15:17:06.990
> 
> 标签：jquery, html, css

如何添加图像而不是 << 隐藏左侧栏，向右箭头 >> 显示隐藏的侧栏而不是显示相同的 (<<) 箭头

[http://jsfiddle.net/6FMZY/449/](http://jsfiddle.net/6FMZY/449/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:21:38.303

那里：http: [//jsfiddle.net/M6xJT/](http://jsfiddle.net/M6xJT/)

CSS：

```
.left {
    background: url('http://icons.iconarchive.com/icons/pixelmixer/basic/32/left-icon.png') no-repeat;
    width: 32px;
    height: 32px;
    display:block;
}

.right {
    background: url('http://icons.iconarchive.com/icons/pixelmixer/basic/32/right-icon.png') no-repeat;
    width: 32px;
    height: 32px;
    display:block;
} 
```

jQuery：

```
$('#toggle').toggle(function(){
    $('#A').animate({width:0});
    $('#B').animate({left:0});

    $(this).removeClass('left').addClass('right');
},function(){
    $('#A').animate({width:200});
    $('#B').animate({left:200});

    $(this).removeClass('right').addClass('left');
})​; 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:21:53.440

这是你想要的吗？使用`&larr;`and`&rarr;`代替单词“Toggle”：

```
$('#toggle').toggle(function(){
    $('#A').animate({width:0});
    $('#B').animate({left:0});
    $('#toggle').html('&rarr;');
},function(){
    $('#A').animate({width:200});
    $('#B').animate({left:200});
    $('#toggle').html('&larr;');
})​ 
```

[http://jsfiddle.net/mblase75/6FMZY/451/](http://jsfiddle.net/mblase75/6FMZY/451/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:22:05.033

```
$('#toggle').toggle(function(){
    $('#A').animate({width:0});
    $('#B').animate({left:0});
    $('#B > a').html('>>');
},function(){
    $('#A').animate({width:200});
    $('#B').animate({left:200});
    $('#B > a').html('<<');
})​ 
```

像这样

# ruby-on-rails - Rspec在rails中失败

> ID：11192131
> 
> 赞同：1
> 
> 时间：2012-06-25T15:17:42.650
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我在 Rails 中的 Rspec 测试收到以下错误

```
1) MoviesController searching for similar movies should find the similar movies by director
     Failure/Error: get :similar, {:id => "1"}
     ActiveRecord::RecordNotFound:
       Couldn't find Movie with id=1
     # ./app/controllers/movies_controller.rb:63:in `similar'
     # ./spec/controllers/movies_controller_spec.rb:16:in `block (3 levels) in <top (required)>'

  2) MoviesController searching for similar movies should select the Similiar Movies template for rendering
     Failure/Error: get :similar, {:id => "1"}
     ActiveRecord::RecordNotFound:
       Couldn't find Movie with id=1
     # ./app/controllers/movies_controller.rb:63:in `similar'
     # ./spec/controllers/movies_controller_spec.rb:22:in `block (3 levels) in <top (required)>'

  3) MoviesController searching for similar movies it should make the results available to the template
     Failure/Error: get :similar, {:id => "1"}
     ActiveRecord::RecordNotFound:
       Couldn't find Movie with id=1
     # ./app/controllers/movies_controller.rb:63:in `similar'
     # ./spec/controllers/movies_controller_spec.rb:29:in `block (3 levels) in <top (required)>' 
```

这是我的控制器方法导致它失败：

```
def similar
  @movie = Movie.find(params[:id])
  @movies = Movie.find_all_by_director(Movie.find_by_id(params[:id])[:director])
  if @movies.count <= 1
    redirect_to movies_path
    flash[:notice] = "'#{@movie.title}' has no director info"
end 
```

我不明白为什么这个测试总是以同样的错误失败。任何帮助将非常感激

下面是测试

```
describe MoviesController do
  describe 'searching for similar movies' do
    before :each do 
      @fake_movies = [mock('Movie'), mock('Movie')]
      @fake_movie = FactoryGirl.build(:movie, :id => "1", :title => "Star Wars", :director => "George Lucas") 
end
it 'should follow the route to the similar movies by director page' do
  assert_routing('movies/1/similar', {:controller => 'movies', :action => 'similar', :id => '1'}) 
end

it 'should find the similar movies by director' do
  Movie.should_receive(:find_by_id).with("1").and_return(@fake_movie)
  Movie.should_receive(:find_all_by_director).with(@fake_movie.director).and_return(@fake_movies)
  get :similar, {:id => "1"}
end

it 'should select the Similiar Movies template for rendering' do
  Movie.should_receive(:find_by_id).with("1").and_return(@fake_movie)
  Movie.should_receive(:find_all_by_director).with(@fake_movie.director).and_return(@fake_movies)
  get :similar, {:id => "1"}
  response.should render_template('similar')
end

it 'it should make the results available to the template' do
  Movie.should_receive(:find_by_id).with("1").and_return(@fake_movie)
  Movie.should_receive(:find_all_by_director).with(@fake_movie.director).and_return(@fake_movies)
  get :similar, {:id => "1"}
  assigns(:movies).should == @fake_results
end
end
end 
```

FactoryGirl 的设置如下：

```
FactoryGirl.define do
  factory :movie do
    title 'Star Wars' 
    director 'George Lucas'
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:02:27.753

规范调用`Factory.build`. 这不会将对象持久化到数据库中。你会想要使用`Factory.create`来允许`Movie.find`工作。

# python - 使用 psycopg2 无密码连接到数据库

> ID：11192134
> 
> 赞同：48
> 
> 时间：2012-06-25T15:17:49.053
> 
> 标签：python, django, postgresql, psycopg2

我的本地主机上有一个 postgres 数据库，无需密码即可访问

```
$ psql -d mwt
psql (8.4.12)
Type "help" for help.

mwt=# SELECT * from vatid;
  id   | requester_vatid |...
  -----+-----------------|...   
  1719 | IT00766780266   |... 
```

我想从 django 访问该数据库。所以我投入`DATABASES`

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'mwt',
        'USER': 'shaoran',
        'HOST': 'localhost'
    }
} 
```

由于我不需要密码来访问我的测试数据库，因此我没有`PASSWORD`在设置中提供任何值。

```
$ ./manage.py shell
>>> from polls.models import Vatid
>>> Vatid.objects.all()
  connection_factory=connection_factory, async=async)
  OperationalError: fe_sendauth: no password supplied 
```

我尝试使用`PASSWORD: ''`，但收到相同的错误消息。我尝试使用`PASSWORD: None`，但这也无济于事。

我一直在搜索有关此的 django 文档，但找不到任何有用的东西。可以配置`django.db.backends.postgresql_psycopg2`接受空密码吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-05-26T13:46:30.180

令人惊讶的是，答案是根本不指定主机。如果你这样做，

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'mwt',
    }
} 
```

然后 psycopg2 将使用 Unix 套接字以与`psql`. 当您指定 a`HOST`时，psycopg2 将使用 TCP/IP 连接，这需要密码。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-11-12T22:46:47.403

为了避免在 Django 中使用密码，请`settings.py`更改`md5`为`trust`以下行`pg_hba.conf`：

```
host    all             all             127.0.0.1/32            trust 
```

如需详细了解 postgres 安全配置，请阅读[此文档。](http://www.postgresql.org/docs/current/interactive/auth-pg-hba-conf.html)

要找到此文件：

```
sudo -u postgres psql -c 'SHOW hba_file;' 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-25T15:36:53.490

检查您`pg_hba.conf`是否允许来自`localhost`用户的连接`shaoran`，然后在 Django 设置中提供密码`shaoran`或信任用户`pg_hba.conf`

您可以通过连接的事实`psql`是因为`psql -d mwt`使用了一些设置为受信任的默认连接值`pg_hba.conf`。例如，在我的机器上，默认主机`local socket`是`localhost`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-02-21T16:00:53.023

*作为一个面临同样问题的人，并且只有在结合了此处现有答案的各个部分和 google-ing 试验的其他发现后才找到解决方案，我决定整理一个有希望的完整答案*：

*首先要注意*：

**放入`'HOST'`或忽略它`settings.py`都是可行的选择。但是，是否放置`'HOST'`会影响您必须如何设置 postgresql 配置。**

`'HOST'`在[joerick 的回答](https://stackoverflow.com/a/23871618/1622937)中省略会导致 psycopg2 尝试通过 Unix 域套接字连接。另一方面，如果您的配置包含`'HOST'`密钥， psycopg2 将尝试通过 IPv4/6 进行连接`localhost`。这有很大的不同，因为 postgresql 身份验证配置 ( `/etc/postgresql/x.x/main/pg_hba.conf`) 特定于这些连接方式中的任何一种。

带回家留言：

> *确保选择您也在 postgresql 身份验证配置中配置的连接类型。*

*需要注意的第二点：*

**postgresql 身份验证配置 ( `/etc/postgresql/x.x/main/pg_hba.conf`) 关心条目的顺序。**

[文档](https://www.postgresql.org/docs/9.3/static/auth-pg-hba-conf.html)实际上对此非常清楚，（*但我设法落入了`local all all peer`陷阱*）：

> 具有匹配连接类型、客户端地址、请求的数据库和用户名的**第一**条记录用于执行身份验证。没有“fall-through”或“backup”：如果选择了一条记录并且认证失败，则不考虑后续记录。如果没有记录匹配，则拒绝访问。

带回家留言：

> *确保任何特定规则出现在更广泛的规则之前。*

* * *

现在我们知道了所有这些，**这里是如何在没有密码的情况下访问，一次使用`'HOST'`(so over `localhost`) 一次没有 (so over Unix socket)**。

* * *

## 连接结束`localhost`

`'HOST': 'localhost'`在您的数据库配置中指定`settings.py`：

```
# ...
'HOST': 'localhost',
# ... 
```

`'PASSWORD'`不需要，可以省略。

您需要在 postgresql 身份验证配置 ( `/etc/postgresql/x.x/main/pg_hba.conf`) 中设置的规则适用于 TYPE `host`。

注意规则的顺序。因此，如果您的用户“my_user”应该能够在没有密码的情况下访问数据库“my_database”，那么正确的配置应该如下所示：

```
# RIGHT WAY...
host my_database my_user 127.0.0.1/32 trust
host my_database my_user ::1/128 trust
# ...
host all all 127.0.0.1/32 peer
# ... 
```

颠倒排序将导致`no password supplied`错误。

* * *

## 通过 Unix 域套接字连接

不要将`'HOST'`密钥放在您的设置中。 `'PASSWORD'`也不需要。

在 postgresql 身份验证配置中，通过 Unix 域套接字的访问由 TYPE 规则管理`local`。

如果“my_user”应该得到信任（不需要密码）访问数据库“my_database”，你需要这样的一行：

```
local my_database my_user trust 
```

关于把这条线放在哪里，这里的规则是你需要把它放在任何*更广泛*的规则之前`DATABASE`和`USER`。为了安全起见，我建议把它**放在**. `/etc/postgresql/x.x/main/pg_hba.conf`如果您的`pg_hba.conf`文件如下所示：

```
# RIGHT WAY...
local my_database my_user trust
# ...
local all all peer
# ... 
```

你很高兴没有密码。但是，如果它看起来像这样：

```
# WRONG WAY! ...
local all all peer
# ...
local my_database my_user trust
# ... 
```

您需要提供密码。

* * *

最后说明：

**修改后不要忘记重启postgresql服务`/etc/postgresql/x.x/pg_hba.conf`**：

```
sudo service postgresql restart 
```

         *希望这会有所帮助。快乐编码！*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-12T06:22:53.453

我只和“本地所有同行”住在一起。连接字符串应该没有主机、用户和密码：postgres:///mydbname。

如果没有 environ 模块，它看起来是这样的：

```
DATABASES = {
    'default': {'NAME': 'mydatabase', 'USER': '', 'PASSWORD': '', 'HOST': '', 'PORT': '', 'ENGINE': 'django.db.backends.postgresql_psycopg2'}
} 
```

使用环境模块：

```
import environ
env = environ.Env()
DATABASES = {
    'default': env.db('DATABASE_URL', default='postgres:///mydatabase'),
} 
```

其中 .env 文件不包含 DATABASE_URL 设置。

仅对于用户 'postgres' 我使用 md5，但仅来自 psql/pgadmin3，而不来自 django 代码。

```
# /etc/postgresql/version/cluster/pg_hba.conf:
local all postgres md5
local all all peer 
```

# mongodb - MongoDB：使用 _id 和 ObjectID 对插入时间进行范围查询

> ID：11192136
> 
> 赞同：0
> 
> 时间：2012-06-25T15:17:51.550
> 
> 标签：mongodb, range

我正在尝试使用 mongodb 的 ObjectID 对给定集合的插入时间进行范围查询。我真的找不到任何可能的文档，除了这个博客条目： http: [//mongotips.com/b/a-few-objectid-tricks/](http://mongotips.com/b/a-few-objectid-tricks/)。

我想获取在给定时间戳之后创建的所有文档。使用 nodejs 驱动程序，这就是我所拥有的：

```
var timeId = ObjectId.createFromTime(timestamp);
var query = {
    localUser: userId,
    _id: {$gte: timeId}
};
var cursor = collection.find(query).sort({_id: 1}); 
```

我总是得到相同数量的记录（27 个集合中的 19 个），与时间戳无关。我注意到 createFromTime 仅填充与时间相关的 objectid 中的字节，其他字节保留为 0（如：4f6198be0000000000000000）。

我尝试为此使用 ObjectID 的原因是，在 mongodb 服务器上插入文档时我需要时间戳，而不是在将文档传递给 node.js 中的 mongodb 驱动程序时需要时间戳。

任何人都知道如何使这项工作，或者有另一个想法如何生成和查询在 mongodb 服务器上生成的插入时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:40:46.340

不确定 ruby​​ 中的 nodejs 驱动程序，您可以像这样简单地应用范围查询。

```
jan_id = BSON::ObjectId.from_time(Time.utc(2012, 1, 1))       

feb_id = BSON::ObjectId.from_time(Time.utc(2012, 2, 1)) 

@users.find({'_id' => {'$gte' => jan_id, '$lt' => feb_id}}) 
```

确保 `var timeId = ObjectId.createFromTime(timestamp)`正在创建一个 ObjectId。

也可以尝试不使用 localuser 进行查询

# odata - 为什么我的 Kendo 网格不能使用默认 XML 格式绑定到我的 OData 源？

> ID：11192141
> 
> 赞同：0
> 
> 时间：2012-06-25T15:18:10.490
> 
> 标签：odata, kendo-ui

[我从位于 http://demos.kendoui.c​​om/web/grid/remote- data.html](http://demos.kendoui.com/web/grid/remote-data.html)的 Kendo UI 演示中获取示例代码，绑定到它们显示的远程数据源。这工作得很好。

我从 Kendo 示例中删除了架构位和列列表，然后再次尝试。现在数据源中的所有列都显示在网格中，一切都很好。

然后，我在我自己的机器上的“http://localhost:61539/SQLOData.svc/Companies”上一对一地更改为 oData 源的 URI。这是使用链接到 SQL Server 的 oData 的 Microsoft 示例中的步骤创建的 WCF 数据服务 (http://msdn.microsoft.com/en-us/vs2010trainingcourse_buildingappandservicesusingodatavs2010_topic3.aspx)。

当我现在查看我的网格时，其中没有数据。怎么会这样？

我的 oData 服务似乎正在运行。当我浏览到时，`http://localhost:61539/SQLOData.svc/Companies`我看到的数据是 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:50:03.133

我发现了问题。我需要掌握 DataServiceJSONP 插件并在我的服务中包含适当的属性。

# python - Emacs for WIndows下的ipython挂shell

> ID：11192142
> 
> 赞同：0
> 
> 时间：2012-06-25T15:18:14.547
> 
> 标签：python, shell, emacs, ipython, windows-shell

嗨，我最近下载了 ipython 0.12.1 – 2012 年 4 月，并让它在 Windows 终端下工作。即，我打开命令提示符并键入 ipython，然后出现 ipython 提示符。

在我需要在 emacs 中使用它之前，一切都很好。因此，在尝试使用 pyton-mode.el 或 ipython.el（此时冻结我的 emacs）之前，我尝试使用 Mx shell 或 Mx eshell 并输入 ipython -i。

这是我在完全挂起 shell 之前得到的跟踪：

ipython -i

```
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)]
Type "copyright", "credits" or "license" for more information.

IPython 0.12.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.
WARNING: Readline services not available or not loaded.WARNING: Proper color support under MS Windows requires the pyreadline library.
You can find it at:
http://ipython.org/pyreadline.html
Gary's readline needs the ctypes module, from:
http://starship.python.net/crew/theller/ctypes
(Note that ctypes is already part of Python versions 2.5 and newer).

Defaulting color scheme to 'NoColor' 
```

那么为什么它会挂在 emacs shell 中并在常规命令提示符下工作。我需要更改我的默认 emacs shell 吗？我也在两台不同的机器上试过这个。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:45:53.000

显然，在 Windows 下执行此操作的唯一方法是创建一个批处理文件，即使在 0.12 发行版中存在可执行文件 (ipython.exe)。我的脚本如下：

[ipython.bat] @python.exe -i C:\devel\Python\2.7-bin\Scripts\ipython-script.py --pylab %*

对于 Windows 下 matplotlib 和 numpy 的用户，pylab 选项仍然无法正常工作，因为它会冻结您的图形窗口。为了让它工作，我必须恢复到 ipython 0.10 并在 ipython.bat 脚本中使用 -wthread 选项而不是 -pylab 。这实际上产生了一个很好的交互式图形环境

# security - 安全架构 .NET

> ID：11192148
> 
> 赞同：1
> 
> 时间：2012-06-25T15:18:45.783
> 
> 标签：security, hash

再会！

我已经想到了一个项目的安全模式，我很好奇它是否非常非常安全。

我已将 GetNonZeroBytes(byte[16] object) 方法的 RNGCryptoServiceProvider() base64 字符串存储在数据库中，我将其用作 Salt。

接下来，我使用 Salt 生成密码的 Scrypt 加密（就像 bCrypt 一样，只是它允许我选择 RAM 的数量和其他类似的东西 - 在这种情况下，我使用 8mb 的 RAM 来加密密码） . 我使用之前的输出和 Salt 来初始化 Rfc2898DeriveBytes(encrypted output, Salt, 10000) 实例。

```
public static string GetBase64StringSafeString(string SaltSource, string StringToEncrypt, int memoryCost)
    {
        byte[] Salt = Encoding.ASCII.GetBytes(SaltSource);
        byte[] derivedBytes = new byte[64];

        SCrypt.ComputeKey(Encoding.ASCII.GetBytes(StringToEncrypt), (new Rfc2898DeriveBytes(SaltSource, Salt, 10000)).GetBytes(25), (memoryCost != 0 ? memoryCost : 8192), 8, 1, null, derivedBytes);
        return Convert.ToBase64String(derivedBytes);
    } 
```

我用它来为块大小为 256 的 RijndaelManaged 算法生成密钥和 IV。这是我用来将数据加密到数据库中的，因此对于这个算法，我不必将密码存储在任何地方：我所拥有的要做的是检查用户写入的密码是否正确，以便解密数据。如果是，则对用户进行身份验证。

因为黑客的主要目的是获取数据，所以他需要密码。如果他有密码，他可以登录并获取数据或解密数据库中的数据。为了让他获得密码，他必须使用 Salt 运行该版本的 bCrypt，直到找到匹配项，然后从数据库中解密数据，他必须这样做并使用该 Rfc2898DerivedBytes 运行 RijndaelManaged。

我认为这样做更安全的唯一方法是找到一种以明文形式存储 Salt 的方法。

你怎么看？

# .net - 如何使用 Visual Studio 在 .Net 中调试 CLR SQL Server 用户定义函数？

> ID：11192149
> 
> 赞同：1
> 
> 时间：2012-06-25T15:18:49.797
> 
> 标签：.net, sql, sql-server, sqlclr

我`SqlServerFunctions`在 test.cs 文件中有一个项目。代码：

```
 [Microsoft.SqlServer.Server.SqlFunction]
    public static SqlDecimal CalculateBondDV0N(SqlDecimal coupon, SqlDecimal yield, SqlDateTime date)
    {
        DayCount dayCount = (DayCount)Enum.Parse(typeof(DayCount), dayCountString.ToString(), true);
        Frequency frequency = (Frequency)Enum.Parse(typeof(Frequency), frequencyString.ToString(), true);

        double price = BondAnalyticsUtility.CalculateDV0N((double)coupon.Value, dayCount, frequency, (double)yield.Value, date.Value, finalPaymentDate.Value, (double)redemptionValue.Value, (double)notional.Value, (double)spreadChange.Value);

        SqlDecimal returnVal = new SqlDecimal(price);

        return returnVal;
    } 
```

这个函数通过给定`EXTERNAL`参数从 Scalar 值函数内部的 Sql Server 调用。

```
ALTER FUNCTION [dbo].[CalculateBondDV0N](@Coupon [decimal](18, 6), @Yield [decimal](18, 6), @Date [datetime])
RETURNS [decimal](18, 7) WITH EXECUTE AS CALLER
AS 
EXTERNAL NAME [Pearl.Analytics.Services.Database].[BondAnalytics].[CalculateBondDV0N] 
```

我想调试这个函数，代码在 c# 中，试图调试到 VS2010 pro 我如何将它与数据库连接并做到这一点。？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-25T15:42:45.747

如果您不需要在 SQL Server 中调试它，那么很容易从普通的 C# 代码中自然地调用它。鉴于您的方法仅使用非常基本的类型，我看不出有任何理由需要在 SQL Server 中对其进行调试。

但是，我不确定“dayCountString”和“frequencyString”是从哪里来的。我怀疑这些也应该是函数的参数。

# c# - 错误：是一个“字段”，但用作“类型”c#

> ID：11192153
> 
> 赞同：1
> 
> 时间：2012-06-25T15:18:58.837
> 
> 标签：c#, types, int, field, global

我有一个全局变量averagel，我试图在一种方法中进行操作。编译器对我设置值没有问题，`averagel = averagel / (xrestriction * yrestriction);`但由于某种原因，当我尝试使用它来设置另一个变量时它不喜欢它：

`inside = (inside + averagel * (xrestriction * yrestriction)) - 2 * (averagel)(suml);`

只有在我尝试使用av​​eragel 的值来设置另一个int 的行上，它才会返回错误“sqlDataReader.ReaderDemo.averagel”是一个“字段”，但用作“类型”。我还尝试将方法中的 int 设置为 averagel 的值，然后尝试使用该值来设置我的内部变量，但返回错误“找不到类型或命名空间名称‘test’（你错过了吗？ using 指令或程序集引用？）”，我之前所做的只是声明 int test=averagel;

有什么想法可以在这里发生吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T15:20:24.550

您可能需要一个星号：

```
inside = (inside + averagel * (xrestriction * yrestriction)) - 2 * averagel * suml; 
```

您不能像在数学中那样在 C# 中将两个值相乘。例如`(averagel)(suml)`，在数学方程式中有意义，但您必须用`averagel * suml`C# 编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:20:52.023

您的括号错误，并且不小心在表达式中包含了类型转换。最后一点

```
(averagel) (suml) 
```

尝试强制转换`suml`为 type `averagel`，因此编译器有权抱怨。我怀疑您在这两个术语之间缺少一个运算符。

# asp.net-mvc-3 - 使用 URL 中的绝对路径防止文件被下载

> ID：11192159
> 
> 赞同：1
> 
> 时间：2012-06-25T15:19:23.877
> 
> 标签：asp.net-mvc-3, iis

在我的 MVC 3 项目中，我在项目的根目录中有一个文件夹，用于存储一些 SWF 文件。问题是，当我点击浏览器地址栏中的 url 时，例如

```
localhost:39217/Files/fg/f_l1.swf 
```

显然我看到了下载对话框。有什么办法可以预防吗？换句话说，加载 DOM 后，该文件将在我的页面中可见，但如果我只是键入它的 URL，我不希望它被下载。恐怕这两种情况在 IIS 中都受到同样的威胁。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:27:42.557

我可以看到解决此问题的一种方法是*不要向用户透露真实的物理路径*。*基本上，您应该从控制器操作*传递 SWF 文件。

如果您通过对象标记嵌入 SWF 文件，则对象标记将引用此操作并传递文件名。您可以通过`Authorize`属性或其他方式控制操作，一旦您看到请求被正确授权，您就可以将 flash 文件写入响应。

[尽管代码在 PHP 中，但这里](http://ryanfait.com/resources/protect-flash-files-from-download/)清楚地解释了这个想法，您可以将其迁移到 MVC。

**更新：**

如果您不想更改 SWF 文件路径，那么您只需在 Global.asax.cs 中做更多的工作。

```
routes.IgnoreRoute("Javascript/{*catchall}");
routes.IgnoreRoute("Content/{*catchall}");
routes.IgnoreRoute("Scripts/{*catchall}");

routes.RouteExistingFiles = true;

routes.MapRoute("", "Files/Flash/{file}", new { controller = "File", action = "Flash" }); 
```

现在即使有人试图直接知道路径访问 SWF 文件，请求由控制器的`Flash`操作处理，`File`您可以在那里进行必要的身份验证。在发回 SWF 之前检查。

# vba - 如何使用excel文件的文件名更改一列单元格？

> ID：11192167
> 
> 赞同：1
> 
> 时间：2012-06-25T15:19:46.733
> 
> 标签：vba, excel

我正在尝试编写一个 excel 宏/VBA 代码来根据文件的标题调整列的内容。目前，我有一个宏设置，可以根据我输入的 URL 下载 csv 文件。宏会自动格式化和命名文件。我想使用文件名/标题的前 5 个字符来自动格式化其他单元格。

例如，文件名是 48GHY_fjfdkjfe33.RHRH-msadklfjeiojo。我的文件中有一个名为 name+type 的列。我想将“名称”行与标题结合起来并让它填充字段。下面的两张图片提供了之前和之后的情况。

![数据库之前](../Images/418dad011129ede16b5f92f16bfea5c5.png)

![后数据库](../Images/361ae0edd2373d8ebbff41fabf8eb707.png)

目前，我必须在单独的字段中输入前 5 个字符，然后使用：="48GHY"&a2 函数。

有没有办法在 excel/VBA 中做到这一点？

* * *

最初的问题已得到解答，但现在我在尝试将其放入宏时寻求更多帮助。因为它仍然是同一个问题，所以我认为它不需要另一个帖子。

这是我正在使用的当前宏/VBA。当我运行它时，它只会显示#VALUE！在细胞中。两组代码之间唯一不同的是 A 和 B 列现在是 J 和 K。

```
' Insert Column after name and then rename it name+type

Rows(1).Find("name").Offset(0, 1).EntireColumn.Insert
Rows(1).Find("name").Offset(0, 1).FormulaR1C1 = "name+type" 
```

' 冻结第一行

```
Rows("1:1").Select
With ActiveWindow
    .SplitColumn = 0
    .SplitRow = 1
End With
ActiveWindow.FreezePanes = True 
```

'保存文件

```
ActiveWorkbook.Save 
```

'将内容添加到名称+类型列

```
Range("K2").Select
ActiveCell.FormulaR1C1 = "=LEFT(MID(CELL(""filename"",RC[-1]),SEARCH(""["",CELL(""filename"",RC[-1]))+1,SEARCH(""]"",CELL(""filename"",RC[-1]))-SEARCH(""["",CELL(""filename"",RC[-1]))-1),5)&RC[-1]"
Range("K2").Select
Selection.Copy
Range("K2:K8294").Select
ActiveSheet.Paste 
```

' 自动调整所有列

```
Columns("A:AK").Select
Selection.Columns.AutoFit 
```

结束子

*附加评论。我修改了您在宏中提供的代码，但是在我运行它之后的每个单元格中，以下代码位于 k 列中：

```
=LEFT(MID(CELL("filename",J2),SEARCH("[",CELL("filename",J2))+1,SEARCH("]",CELL("filename",J2))-SEARCH("[",CELL("filename",J2))-1),5)&J2 
```

*最后一点。文件名被保存为 48GHY_fjfdkjfe33.RHRH-msadklfjeiojo#csv.txt （这可能与它有关吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:44:30.363

把这个放在B2

`=LEFT(MID(CELL("filename",A2),SEARCH("[",CELL("filename",A2))+1, SEARCH("]",CELL("filename",A2))-SEARCH("[",CELL("filename",A2))-1),5)&A2`

**编辑**

**解释**

此公式`=CELL("filename",A2)`为您提供文件名。例如

`C:\Users\Siddharth Rout\Desktop\[Book1.xlsx]Sheet1`

和这个公式

`=MID(CELL("filename",A2),SEARCH("[",CELL("filename",A2))+1, SEARCH("]",CELL("filename",A2))-SEARCH("[",CELL("filename",A2))-1)`

从上面取出文件名给你`Book1.xlsx`

根据`Left()`您指定的字符数，返回文本字符串中的第一个或多个字符。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:46:52.067

也许你甚至不需要 VBA。像这样的东西对我有用。

```
=MID(CELL("filename",A2),FIND("[",CELL("filename",A2))+1,5) & A2 
```

查找单元格公式以了解文件名的工作原理。

# cocoa - CGPathApplierFunction 异常

> ID：11192168
> 
> 赞同：1
> 
> 时间：2012-06-25T15:19:49.140
> 
> 标签：cocoa, cgpath, nsbezierpath

我`CGPathRef`有 5 个元素，我想**删除起点**，并且有一个包含 4 个元素的路径，其起点与我要删除起点的路径的终点相同。

这是我现在生成异常的函数：

```
static void constructPath(void *info, const CGPathElement *element) 
{
    NSBezierPath *bezierPath = (NSBezierPath *)info; 
    switch (element->type) {
        case kCGPathElementMoveToPoint:
            // some kind of skipping using points[0] kCGPathElementMoveToPoint
            [bezierPath lineToPoint:element->points[1]]; // line exception in gdb
            [bezierPath lineToPoint:element->points[2]];
            [bezierPath lineToPoint:element->points[3]];
            [bezierPath lineToPoint:element->points[4]];
            break;
        case kCGPathElementAddLineToPoint:

            if ([bezierPath isEmpty]) {
                [bezierPath moveToPoint:element->points[0]]; // the new start, how to go to next from here ?
            } else {

                [bezierPath moveToPoint:element->points[1]];
                [bezierPath moveToPoint:element->points[2]];
                [bezierPath moveToPoint:element->points[3]];
                [bezierPath moveToPoint:element->points[4]];
            }
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:05:03.917

只需忽略原始路径的第一个元素（类型为`kCGPathElementMoveToPoint`）。然后对于每一行，添加一个新行，除非路径为空，在这种情况下，您需要移动到原始点。

```
静态无效构造路径（无效*信息，常量CGPathElement *元素）
{
    NSBezierPath *bezierPath = (NSBezierPath *)info;
    if ( kCGPathElementAddLineToPoint == element->type )
    {
        if ( [bezierPath isEmpty] ) {
            [bezierPath moveToPoint:element->points[0]];
        } 别的 {
            [bezierPath lineToPoint:element->points[0]];
        }
    }
}
```

# android - 来自 ANE 的 android 本地通知

> ID：11192172
> 
> 赞同：0
> 
> 时间：2012-06-25T15:19:59.263
> 
> 标签：android, air

我正在使用带有本机扩展的 Adob​​e AIR 在 ActionScript for Android 上编写应用程序。在我的应用程序中，我需要每 2 小时显示一次通知。

我发现，在 Android 上，我可以使用 AlarmManager 来做到这一点，在设备未被反驳或关闭时可以访问：http: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

和状态通知，它只能在我的应用程序可运行时通知：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

所以问题是这样的：如何使用 AlarmManager 运行应用程序，在我的应用程序处理情况下，我从 AlarmManager 运行我的应用程序（不是由用户手动）开始从该方法状态通知运行到 NotitificationManager？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:32:53.580

您必须使用 AlarmManager 触发警报，使用 BroadcastReciever 捕获它并从那里触发您的通知。无法“及时发布通知”似乎非常令人不知所措，但目前是我知道的唯一方式

# php - 使用两个坐标之间的距离构建商店定位器应用程序

> ID：11192174
> 
> 赞同：0
> 
> 时间：2012-06-25T15:20:02.310
> 
> 标签：php, web-services, web, gps, distance

我正在制作一个应用程序（电话和网站）的一小部分，可以找到最近的商店（存储在我的数据库中）。我正在使用 PHP，因此打算利用 Web 服务理念并将 AJAX 请求发布到 PHP 页面。我从 snipplr.com 找到了以下信息：

```
 function distance($lat1, $lng1, $lat2, $lng2, $miles = true)
{
    $pi80 = M_PI / 180;
    $lat1 *= $pi80;
    $lng1 *= $pi80;
    $lat2 *= $pi80;
    $lng2 *= $pi80;

    $r = 6372.797; // mean radius of Earth in km
    $dlat = $lat2 - $lat1;
    $dlng = $lng2 - $lng1;
    $a = sin($dlat / 2) * sin($dlat / 2) + cos($lat1) * cos($lat2) * sin($dlng / 2) * sin($dlng / 2);
    $c = 2 * atan2(sqrt($a), sqrt(1 - $a));
    $km = $r * $c;

    return ($miles ? ($km * 0.621371192) : $km);
} 
```

这一切都很好，但我有一个包含大约 300 个位置的数据库。我只需要一点帮助就可以开始了。

我的想法是对数据库进行查询并获取数组中的所有长/纬度并循环遍历数组，每次都使用上述函数。然后按距离对请求进行排序并完成！

但我只是想知道是否有更好的方法？我对 PHP 开发比较陌生，所以需要了解最佳实践等...

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:27:24.910

我实际上建议您查看谷歌的解决方案。这很好用： [https ://developers.google.com/maps/articles/phpsqlsearch?hl=en](https://developers.google.com/maps/articles/phpsqlsearch?hl=en)

# wpf - 为什么 wrappanel 事件会在孩子的事件之前触发？

> ID：11192175
> 
> 赞同：0
> 
> 时间：2012-06-25T15:20:07.440
> 
> 标签：wpf, events, wrappanel

我有一个 WrapPanel，它有一个按钮作为子元素。WrapPanel 和 Button 都定义了 PreviewMouseLeftButtonDown 事件。

我注意到当我单击 Button 时，WrapPanel 的事件在 Button 的事件之前被触发。有没有办法改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:21:40.263

因为`Preview*`事件是[**隧道式**](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)的，它们从根传播到源，所以它们首先在靠近根的面板上被提升。使用**冒泡**版本 ( `MouseLeftButtonDown`) 让事件沿树向上传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:24:00.923

当您将属性**IsHItTestVisible**设置为*false*时，鼠标触发的事件（如点击）将被忽略。

# scripting - ActiveTCL - 无法从 Expect 脚本运行批处理文件

> ID：11192178
> 
> 赞同：1
> 
> 时间：2012-06-25T15:20:10.697
> 
> 标签：scripting, batch-file, tcl, expect, activetcl

我最初尝试`tftpd32.exe`使用以下命令从 Expect 运行可执行文件 ()，但由于某些未知原因，它会挂起整个脚本：

```
exec c:/tftpd32.351/tftpd32.exe 
```

因此，决定调用一个批处理文件来启动可执行文件。

我尝试使用以下命令调用批处理文件，但收到一条错误消息，指出 Windows 找不到该文件。

```
exec c:/tftpd32.351/start_tftp.bat 
```

我也尝试了以下方法，但它没有启动可执行文件：

```
spwan cmd.exe /c c:/tftpd32.351/start_tftp.bat 
```

批处理文件包含此文件，当我双击它时它运行正常：

```
start tftpd32.exe 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:54:31.477

从 Tcl 运行该程序的正确方法是：

```
set tftpd "c:/tftpd32.351/tftpd32.exe"
exec {*}[auto_execok start] "" [file nativename $tftpd] 
```

请注意，在使用时您应该始终使用额外的空参数`start`(由于其`start`工作方式很奇怪；它在引号中有一个可选字符串，用于指定要创建的窗口标题，但它往往会误解第一个带引号的字符串，即使保留它没有强制参数）并且您需要使用可执行文件的本机系统名称来运行，因此`file nativename`.

如果您的`expect`程序中有旧版本的 Tcl（8.4 或更早版本），您可以这样做：

```
set tftpd "c:/tftpd32.351/tftpd32.exe"
eval exec [auto_execok start] [list "" [file nativename $tftpd]] 
```

该`list`奇怪`eval exec`结构中的命令添加了一些必要的引用，否则您将无法生成这些引用。完全按照上面的方法使用它，否则你会得到非常奇怪的错误。（或者升级到不需要那么多代码体操的东西；`{*}`添加语法是有充分理由的！）

# php - 查找特定文件是否是有效的 PHP 文件

> ID：11192182
> 
> 赞同：1
> 
> 时间：2012-06-25T15:20:21.457
> 
> 标签：php, syntax-checking

我想知道一个特定的文件是否是有效的 PHP 文件？

`php -l filename`只发现我们是否有语法错误，它是 lint。

但我也想知道，在执行时，它会运行没有错误吗？

我在 Ubuntu 机器上运行。

**编辑：**

实际上我的问题是我允许用户为某些计算定义公式并且我必须执行这些公式，但是在用户提交公式之前，我想确保它们在 PHP 中是否正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:51:21.980

**很难**知道 php 脚本是否会引发错误。除非公式定义明确并且您可以定义语法以检查它是否正确。例如：您只能添加整数，

```
SUM -> N | N + N
N -> integer 
```

但即使这样，你很快就会遇到问题，例如，如果你允许 N1 / N2，你必须确保永远不会为空。

我的建议是，确保您的程序从错误中恢复。并且，如果出现错误，请通知输入公式的用户以及有关错误的详细信息

# methods - 是否可以以紧凑的方式使用 Mockito 验证任意交互？

> ID：11192187
> 
> 赞同：5
> 
> 时间：2012-06-25T15:20:32.213
> 
> 标签：methods, mocking, call, mockito

在 Mockito 中很容易验证模拟对象上是否发生了特定交互（特定方法调用），并且`verifyZeroInteractions()`可以检查是否根本没有发生交互。假设我正在测试一个接口，例如记录器的接口，使用诸如 、 等方法`info()`。`warn()`在`error()`特定场景中，我知道应该调用其中一个方法，但我并不关心哪个方法。是否有一种紧凑的方法来检查是否发生了与模拟对象的任何交互，而无需指定应该调用哪个确切的方法？或者也许这种机制是不必要的，因为测试它的“Mockito 方式”与我想象的不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:24:40.923

使用 log4j，为了测试记录器，我执行以下设置：

```
@Mock private Appender log4jAppender;
private Logger logger;

@Before
public void setup() {
    MockitoAnnotations.initMocks(this);

    Logger root = Logger.getRootLogger();
    if (!root.getAllAppenders().hasMoreElements()) {
        // No appenders means log4j is not initialized!
        BasicConfigurator.configure();
    }
    logger = Logger.getLogger(MyClassWhichLogs.class);
    logger.addAppender(log4jAppender);
} 
```

然后在我的测试中我执行以下操作：

```
verifyZeroInteractions(log4jAppender); 
```

或者

```
verify(log4jAppender).doAppend(any(LoggingEvent.class); 
```

如果您需要测试记录的值，您可以提供一个捕获器：

```
ArgumentCaptor<LoggingEvent> logCaptor = ArgumentCaptor.forClass(LoggingEvent.class);
verify(log4jAppender).doAppend(logCaptor.capture());
assertTrue(logCaptor.getValue().contains("my text to match"); 
```

虽然这不一定回答一般性问题（我认为您正在寻找的内容不存在），但它可以解决测试日志记录的特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:18:03.737

如果您可以从被测类外部化您的记录器对象的创建，那么您没有理由不能编写自己的日志接口的测试实现，它将记录执行了哪些方法并将其作为测试设置的一部分注入。

模拟库有很多好处，但有时像您发现的一些极端情况可能无法满足您的需求。

如果您为这样的测试编写自己的实现，并将其注入到您的测试类中，那么您可以断言`getCount() > 0`

```
public class LoggerTestSupportImpl implements ILogger {

    private int count = 0;

    @Override
    public int getCount() {
        return count;
    }

    @Override
    public void info(String message) {
        count++;    
    }

    @Override
    public void warn(String message) {
        count++;    
    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-13T15:25:14.167

如果要检查与模拟对象发生的任何交互，可以使用该`Mockito.mockingDetails()`方法并检查调用次数是否不为零。当然，您也可以根据模拟细节做更详细的断言，但我想只检查非零就可以回答您的问题。

```
@ExtendWith(MockitoExtension.class)
public class TestClass {

    @Mock
    private Logger logger;

    @InjectMocks
    private Service service;

    @Test
    public void testMethod_shouldLogMultipleTimes() {
        service.testMethod();
        assertThat(Mockito.mockingDetails(logger).getInvocations().size()).isNotZero();
    }
} 
```

该代码示例用于`assertj`检查调用次数是否不为零。

# iphone - 在 UIImageView 周围设置边框

> ID：11192190
> 
> 赞同：17
> 
> 时间：2012-06-25T15:20:38.703
> 
> 标签：iphone, objective-c, ios, xcode

我想在 a 上应用两种类型的边框`UIImageView`：

1.  `layer`一个是的边界`UIImageView`。
2.  二是周边的`layer`边界`UIImageView`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-25T18:16:58.667

尝试

```
#define kBorderWidth 3.0
#define kCornerRadius 8.0
CALayer *borderLayer = [CALayer layer];
CGRect borderFrame = CGRectMake(0, 0, (imageView.frame.size.width), (imageView.frame.size.height));
[borderLayer setBackgroundColor:[[UIColor clearColor] CGColor]];
[borderLayer setFrame:borderFrame];
[borderLayer setCornerRadius:kCornerRadius];
[borderLayer setBorderWidth:kBorderWidth];
[borderLayer setBorderColor:[[UIColor redColor] CGColor]];
[imageView.layer addSublayer:borderLayer]; 
```

并且不要忘记导入 QuartzCore/QuartzCore.h

这个例子将在图层上绘制一个边框，但稍微改变它的框架以在图层周围制作边框。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-09T09:39:53.073

其他方式

您必须导入

```
#import <QuartzCore/QuartzCore.h> 
```

然后为您的 UIImageView 添加代码

```
imgView.clipsToBounds = YES;
imgView.layer.cornerRadius = 8.0;
imgView.layer.borderWidth = 2.0;
imgView.layer.borderColor = [UIColor greenColor].CGColor; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-10T06:00:43.790

另一种方法是添加另一个图层，该图层稍微超出 UIImageView 的图层，如下所示：

```
CALayer * externalBorder = [CALayer layer];
externalBorder.frame = CGRectMake(-1, -1, myView.frame.size.width+2, myView.frame.size.height+2);
externalBorder.borderColor = [UIColor blackColor].CGColor;
externalBorder.borderWidth = 1.0;

[myView.layer addSublayer:externalBorder];
myView.layer.masksToBounds = NO; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-16T09:02:57.457

**斯威夫特 5**

**使用**UIImageView时*****要小心***；`masksToBounds = false`意味着图像会溢出**

 **```
let outsideBorder = CALayer()
outsideBorder.frame = CGRect(x: -1, y: -1, width: myView.frame.size.width+2, height: myView.frame.size.height+2)
outsideBorder.borderColor = UIColor.black.cgColor
outsideBorder.borderWidth = 1.0

myView.layer.addSublayer(outsideBorder)
myView.masksToBounds = false 
```**

# sql - 需要一种在 SQL 数据库中存储/查询 json 的有效方法

> ID：11192193
> 
> 赞同：5
> 
> 时间：2012-06-25T15:20:43.920
> 
> 标签：sql, database, nosql, acid, document-database

我正在实施一项服务，其中每个用户都必须拥有自己的 json/文档数据库。除了让用户通过示例查询 json 文档之外，数据库还必须支持涉及多个文档的 ACID 事务，因此我放弃了使用 Couch/Mongo 或其他 NoSQL 数据库（不能使用 RavenDB，因为它必须在 Unix 系统上运行）。

考虑到这一点，我一直试图想办法在 SQL 数据库之上实现它。到目前为止，这是我想出的：

```
CREATE TABLE documents (
  id INTEGER PRIMARY KEY,
  doc TEXT
);

CREATE TABLE indexes (
  id INTEGER PRIMARY KEY,
  property TEXT,
  value TEXT,
  document_id INTEGER
) 
```

每个用户都有一个包含这两个表的数据库，并且用户必须声明他需要查询哪些字段，以便系统可以正确填充“索引”表。因此，如果用户“A”将其帐户配置为启用按“姓名”和“年龄”进行查询，则每次该用户插入具有“姓名”或“年龄”属性的文档时，系统也会向“索引”插入一条记录表，其中 'property' 列将包含 name/age ， 'value' 将包含属性值， 'document_id' 将指向相应的文档。

例如，假设用户插入以下文档：

```
'{"name" : "Foo", "age" 43}' 
```

这将导致对“文档”表的插入和对“索引”表的另外两个插入：

```
INSERT INTO documents (id,doc) VALUES (1, '{"name" : "Foo", "age" 43}');
INSERT INTO indexes (property, value, document_id) VALUES ('name', 'foo', 1);
INSERT INTO indexes (property, value, document_id) VALUES ('age', '43', 1); 
```

然后假设用户“A”向服务发送了以下查询：

```
'{"name": "Foo", "age": 43}' //(the queries are also json documents). 
```

此查询将被转换为以下 SQL：

```
SELECT doc FROM documents
WHERE id IN (SELECT document_id FROM indexes
             WHERE document_id IN (SELECT document_id FROM indexes
                                   WHERE property = 'name' AND value = 'Foo')
             AND property = 'age' AND value = '43') 
```

我的问题：

*   知道用户可能能够在他的查询中使用大量条件（比如说 20-30 个 AND 条件），这会导致子查询嵌套非常高，以上 SELECT 查询在大多数数据库系统上的效率如何（ postgres，mysql ...）？
*   上述解决方案对于最终将包含数百万/数十亿 json 文档的数据库是否可行？
*   有没有更好的方法来满足我的要求？
*   是否有可扩展的文档数据库可以进行涉及多个文档的 ACID 事务并在 Unix 系统上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T16:00:39.117

您的`indexes`表是所谓的`Entity-Attribute-Value`.

EAV 表非常适合存储信息并在您知道实体时调用它。 *（在您的情况下，当您知道 . 时查找所有`indexes`行`document_id`。）*

但是反过来它们*就很糟糕*：提供属性-值组合来搜索实体。这正是您在最终查询中所拥有的。随着越来越多的实体共享相同的属性值组合*（例如`name=foo`）*，查询性能会下降。

因此，要回答您的前两个问题：
1\. 所写`n`的查询在搜索`n`属性时需要子查询。`n`随着增长，这将非常糟糕。
2\. 随着记录数量的增加，它会下降，尤其是数百万/十亿条记录。

一般来说，如果你读到`EAV`，人们强烈建议你避开它。

而且，更糟糕的是，在 SQL 中并没有真正好的替代方案。优化搜索的标准方法是使用索引，它可以很容易地建模为排序数据集。但是您将需要许多索引：
-如果您搜索所有三列，则索引`(fieldX, fieldY, fieldZ)`非常*好。*
- 但是，*如果*您必须*仅* `fieldZ`搜索.

如果您可以使用具有固定列数的传统表重新建模，并且有空间应用您需要的每个索引组合，那将是您最高效的模型。

如果您无法修复列数*（新`properties`出现的所有时间）*和/或您没有空间用于所有不同的索引组合，那么您似乎被 EAV 卡住了。这会起作用，但就“即时”结果而言，它的扩展性*不会*很好。

**注意：**如果你坚持使用 EAV，你测试过这个查询结构吗？

```
 SELECT
    document_id
  FROM
    indexes
  WHERE
       (property = 'name' AND value = 'Foo')
    OR (property = 'age'  AND value = '43' )
  GROUP BY
    document_id
  HAVING
    COUNT(*) = 2 
```

这假设它`(document_id, property, value)`是唯一的。否则一个文件可能有`('name', 'foo')`两次，因此通过该`COUNT(*)`子句。

# ruby-on-rails - Spree 中的 i18n InvalidPluralizationData 错误

> ID：11192197
> 
> 赞同：1
> 
> 时间：2012-06-25T15:20:54.227
> 
> 标签：ruby-on-rails, internationalization, spree

我正在使用Spree。当我使用空内容时，出现以下错误：

```
I18n::InvalidPluralizationData in Spree/checkout#update_registration

Showing /home/itsnikolay/.rvm/gems/ruby-1.9.3-p194@rails3/gems/spree_core-1.1.0/app/views/spree/shared/_error_messages.html.erb where line #3 raised:

translation data {:one=>"1 ошибка не позволяет сохранить запись в базе", :other=>"%{count} ошибок не позволяют сохранить запись в базе", :many=>"%{count} ошибок не позволяют сохранить запись в базе"} can not be used with :count => 2

Extracted source (around line #3):

1: <% if target && target.errors.any? %>
2:   <div id="errorExplanation" class="errorExplanation" data-hook>
3:     <h2><%= t(:errors_prohibited_this_record_from_being_saved, :count => target.errors.count) %>:</h2>
4:     <p><%= t(:there_were_problems_with_the_following_fields) %>:</p>
5:      <ul>
6:      <% target.errors.full_messages.each do |msg| %> 
```

有关图片的更多详细信息：

![作为客人提供](../Images/53ed6853bf01eedb5c19026bc39151a5.png)

![I18n::InvalidPluralizationData in Spree/checkout#update_registration](../Images/a185a93cece1fd32f48d571a3b681d4a.png)

但我的 Gemfile 包含宝石：

```
gem 'spree_i18n', :git => 'git://github.com/spree/spree_i18n.git'
gem 'russian' 
```

并且 /config/localest/ru.yml 有几行：

```
errors_prohibited_this_record_from_being_saved:
    one: "1 ошибка не позволяет сохранить запись в базе"
    other: "%{count} ошибок не позволяют сохранить запись в базе" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:45:43.163

我认为这与以下问题有关： [https ://github.com/spree/spree_i18n/pull/88](https://github.com/spree/spree_i18n/pull/88)

你能看看这是否：A）解决你的问题，B）验证俄语（假设它是你的母语）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T16:41:20.823

一切看起来都不错，您可以检查 ru.yml 的正确对齐/缩进，也许有错位的空格或制表符

# geometry - 多边形区域计算

> ID：11192198
> 
> 赞同：2
> 
> 时间：2012-06-25T15:20:55.940
> 
> 标签：geometry, artificial-intelligence, polygon, vertex

所以，为了工作，我正在研究一个探索任意区域的机器人控制器。该区域由一系列顶点定义（它是一个多边形）。这是一个例子：

![一个示例区域。](../Images/269b6573215a313ea1a90ecefd163aca.png)

机器人从中间开始并尝试到达最外层边界，然后一直跟随它。但是，由于地形的性质，它可能无法到达某些区域，只能探索给定区域：

![完全探索被阻止。](../Images/b5dd9789c887e68239642293812ed915.png)

我想要做的是计算所有尚未探索的单个区域，并返回定义其边界的顶点，如下所示：

![计算区域](../Images/041e096ab23414d076fdd056dda449a2.png)

计算完之后，我应该有一个新的多边形数组，其中包含 A、B 和 C 的几何图形。

不幸的是，我想不出一个好的、快速的算法来做到这一点。计算这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:34:35.667

您想要外部边界多边形减去内部粉红色（已探索）多边形的布尔差的 ISTM。但是，没有简单的算法可以解决这个问题，所以我建议您查看并从各种多边形裁剪库中进行选择。

这是一些剪裁库的最新比较 - [http://rogue-modron.blogspot.com.au/2011/04/polygon-clipping-wrapper-benchmark.html](http://rogue-modron.blogspot.com.au/2011/04/polygon-clipping-wrapper-benchmark.html)

也是我自己的开源免费软件多边形裁剪器的无耻插件 - [http://angusj.com/delphi/clipper.php](http://angusj.com/delphi/clipper.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T21:19:26.653

一种方法是为点*p*定义一个谓词以“接触”封闭区域的边界，可能根据某个容差 ε > 0，例如，`T`当且仅当*p*在边界的 ε 距离内。然后遍历已探索区域的边界，注意每个顶点的这个谓词：`..,T, T, T, F, F, F, F, F, T, T,...` 然后，您的区域由 s 的最大字符串、限定这些s`F`的两个顶点以及边界区域之间的边界分隔。我刚刚用作示例的字符串概述了您的区域*B*：五个s。`T``F`*`F`*

# ruby-on-rails - rails, select_tag, options_for_select - 将 select_tag 连接到 form_for

> ID：11192201
> 
> 赞同：0
> 
> 时间：2012-06-25T15:21:25.520
> 
> 标签：ruby-on-rails, html-select

我有一个**form_for(@task) 做 |f|** . 每个任务都属于一个组。我有一个**select_tag(:group_id, options_for_select(@groups)**。@groups 返回带有选项的数组。

经过一番谷歌搜索后，我似乎找不到说**f.select_for**而不仅仅是**select_tag**的方法，以便我可以将它实际连接到我的模型。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:27:40.613

首先，我不太了解您要做什么，这是我的假设：

您想要制作一个包含相关 group.id 值的表单选择功能。

```
f.select :group_id, options_for_select(@group.map(&:id), default_value) 
```

# linux-kernel - 绕过 I/O 调度和 linux 内核页面缓冲

> ID：11192202
> 
> 赞同：2
> 
> 时间：2012-06-25T15:21:31.757
> 
> 标签：linux-kernel, linux-device-driver, sata, ata, hard-drive

我想要完成的工作：

```
Developing an linux application in C language, that "exclusively" accesses a 
```

PATA/SATA 硬盘驱动器 (HDD) 发送 ATA 命令（实际上只有那些不修改访问的 HDD 上的任何字节的 ATA 命令 - 例如，READ_SECTOR、IDENTIFY_DEVICE、SET_FEATURES 等）。

“完全”，我的意思是只要 HDD 通电（一个自定义硬件 - 这是一个简单的开关，确保在加载应用程序并希望这样做之前，HDD 不会通电），第一个并且只有我的应用程序才能访问该 HDD。除了我的应用程序之外的 IOW，甚至 linux 内核（包括 SCSI 子系统）或任何其他应用程序或进程或人类用户都无法访问该 HDD，除非我的应用程序指示/允许他们这样做。

我的应用程序还有另一个要求：由于在我们的应用程序中对 HDD 的访问非常关键（在控制方面而不是在性能方面），因此不希望在完成的事务中涉及任何 I/O 调度按应用程序（此 HDD 上的性能不是限制。）。此外，不希望从 HDD 读取的数据由内核缓冲区或页面缓冲区进行缓冲。应用程序将读取 512 字节或仅其倍数的块大小。

现在我面临的问题是：

SCSI 子系统位于 I/O 调度程序和内核缓冲区或页面缓冲区高速缓存下方（并被写入以与之一起工作）。

虽然 SCSI 子系统提供了 'sg-driver' 来直接发送命令（- Linux SCSI 子系统命令，而不是 ATA 或 SCSI 命令直接 - 然后由 libata 转换为实际的 ATA 命令。我在这里吗？） HDD，但这是一种 I/O 方法 - 你给 i/p 并获得 o/p，即你无法控制数据传输协议的过程（例如 PIO、DMA 和 ATA 状态和错误寄存器等）和设备配置（通过设置功能 ATA 命令。）。

此外，错误报告机制必须健全且特定于 ATA 协议，而不仅仅是 Linux SCSI 子系统错误代码。IOWs 我的应用程序需要访问 PATA/SATA HDD 上的 ATA 错误寄存器和 ATA 状态寄存器。

我的应用程序需要的是对 HDD 的独占控制 - 例如。发出 READ_SECTOR ATA cmd，然后通过读取 i/o 端口或通过“libata”直接从 HDD 中检索数据本身必须满足上述要求。

我不能做什么？

我不会编写 PATA/SATA HBA 设备驱动程序或市场上可用的每个 HBA，因为它们已经包含在 libata 的内核中。

到现在为止我学到了什么？

为了完成所需的任务，我可能（或可能不需要？）需要编写一个直接与 VFS 层交互的块设备驱动程序（或者有什么方法可以绕过 VFS，以便我的应用程序可以直接与这个块驱动程序通信) w/o 涉及/弄乱内核缓冲区或页面缓冲区和 I/O 调度程序。此块驱动程序将直接与 libata 通信（绕过 SCSI 子系统上层），然后与 PATA/SATA HBA 驱动程序通信。

是否可以以独立于 cpu 架构的方式编写这样的驱动程序？

这是一种可行的方法吗？如果是，那么它会影响我的应用程序未访问的其他附加硬盘的 I/O 性能。这样。在这种情况下，我是否需要通过 VFS 编写系统调用（或绕过它），以便我的应用程序与我的块驱动程序进行通信？请告诉我这种方法。

或者我的块设备驱动程序是否可以直接与为 libata 编写的 PATA/SATA HBA 驱动程序通信，但是这种方法会再次影响我的应用程序无法访问的其他附加硬盘的 I/O 性能。这样。另外，我的应用程序将如何与此块设备驱动程序通信？

请赐教。

此外，我想了解我的应用程序的相同场景，但有一个区别 - 如果我有 SCSI 硬盘驱动器及其变体，而不是 PATA/SATA 驱动器 - 特别是 SAS、光纤通道和 USB。当然这次我不会使用 libata 和 ATA 命令，而是使用 SCSI 协议命令。

你想推荐一个 live cd 发行版作为我的应用程序主机，它包含 PATA/SATA HBA libata 驱动程序（-不适用于 IDE 子系统，因为我不会使用它，因为它现在已贬值，因此可能不会更新关于对于 HBA 驱动程序。）对于大多数 HBA。

简而言之，Linux 应用程序访问 PATA/SATA 或 SCSI/SAS/光纤通道 HDD 的最直接方式是什么。

我希望，我已就我的问题提供了足够的信息，但如果您想获得更多信息或更多说明，请随时提问。

***Update1（2012 年 6 月 27 日）**：*
通过与 Chris 的有益讨论（见下文）和我的研究，我得出以下结论：

1.  一个现成的 USB 到 PATA/SATA 适配器不能解决我的目的，因为它不允许我的应用程序。或驱动程序即时更改数据传输模式（PIO vs DMA），它不允许我的应用程序。或驱动程序来读取 ATA 寄存器。

2.  定制的 USB 到 PATA/SATA 适配器可能会有所帮助，但这需要一个需要实现 ATA 协议的嵌入式处理器，或者一个实现整个 ATA 协议的 FPGA 芯片。但是嵌入式处理器解决方案涉及 GPIO，不适合 SATA，因为它需要专门的收发器，而且 I/O 性能对于 PATA 和 SATA 来说都是一个问题——对于我的应用程序来说太慢了。

这样的适配器将与我的 linux 内核驱动程序（或通过 libusb）与我的应用程序通信。通过自定义协议帮助我的应用程序进行黑白通信。和嵌入式处理器上的 ATA 协议。如果是 FPGA 芯片解决方案，我需要在 FPGA 本身中实现这个协议以及 ATA 协议。

但此时我实现FPGA解决方案和嵌入式处理器解决方案在人力、时间和金钱方面是不可行的。所以我坚持使用***纯软件解决方案***。

最后，我可能不得不复制和修改所有内容，直至硬件接口层，以满足 Chris 所说的要求。

因此，***在 VFS 层和 HBA 驱动程序或 libata 层之间**，我应该如何进行。哪些事情需要实施，哪些不需要？*

有人可以阐明这个问题吗？有任何想法吗？？

***Update2（2012 年 1 月 7 日）**：*
我正在努力解决这个问题。SO上有没有人可以启发我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:42:59.437

实际上，如果您想要这种级别的细节控制，您*最终*将不得不编写自己的低级驱动程序。

您对避免 I/O 缓冲和调度的限制可能特别具有挑战性 - 您可能会避免 DMA，但出于性能原因，现代处理器的 I/O 与其内部操作完全分离。也许如果您可以完全禁用所有中断，您至少可以在做事时加上时间戳。您可能希望驱动器在它自己的接口适配器上，当然不与正在运行的文件系统共享。

从用户空间做事可能需要通过内核中的代理来工作——不过，您需要在内核方面做对时间至关重要的事情。

如果能满足您的需要，一个更简单的解决方案是使用 USB-to-SATA 或 PATA 适配器。您可以使用 modprobe 的 quirks 模式告诉现有内核驱动程序忽略 VID/PID，然后从用户空间通过 libusb 与设备通信。但是，那里肯定会有延迟。

为了获得最好的控制水平，您可能需要将驱动器连接到没有 I/O 缓冲的嵌入式处理器，或者甚至是 FPGA。对于 PATA 的低数据速率，这并不是特别困难，SATA 可能需要专门的收发器，但可能并非不可能（或者您可以通过其中一个适配器工作）。您可能最终会通过 USB 甚至串行端口将此自定义外围设备连接到 PC，并使用它来发布任务并获得结果（如果您将其设置为 PC 可以下载设备的固件/比特流，这会很方便，所以你有灵活性）。

# c++ - 在 OpenCV 中加载图像的一部分

> ID：11192203
> 
> 赞同：0
> 
> 时间：2012-06-25T15:21:31.767
> 
> 标签：c++, opencv

我想将图像的一部分加载到 opencv 中进行处理。我要使用的图像太大而无法作为一个块加载。这可以使用现有的 opencv 库吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:24:10.397

图像格式是什么？

Opencv 使用 libjpg、libpng 等来读取标准图像格式。如果它是一种您可以自己解析的简单格式，那么您可以轻松地将文件块读入 cv::mat 图像的一部分

# visual-studio-2010 - VS 2010 项目仅在特定解决方案配置中构建

> ID：11192204
> 
> 赞同：0
> 
> 时间：2012-06-25T15:21:34.553
> 
> 标签：visual-studio-2010, configuration, build, project, solution

大家好，StackOverflow 上的所有人；这并不完全是我以前在这里遇到的编码问题，但目前绝对令人困惑。

我相当确定这是可能的，但我不知道如何做到这一点：

有没有一种方法可以让解决方案中的单个特定项目仅在特定配置中构建？例如，我可能希望每个项目都在发布模式下构建，而在调试模式下，我希望除了一个项目之外的所有项目都构建。

我觉得这应该是一个简单的更改属性，但是我在确定该属性的位置和内容时遇到了很多麻烦。

感谢大家提供任何和所有可能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:27:58.787

*   您可以在哪里选择发布/调试 - 按向下箭头
*   选择“配置管理器”

你可以在那里做你正在寻找的东西 - 你也可以添加更多配置

# android - 再次漏窗

> ID：11192220
> 
> 赞同：1
> 
> 时间：2012-06-25T15:22:00.413
> 
> 标签：android

```
06-25 15:03:02.596: E/WindowManager(29217):     at com.android.grad.PreviewActivity$1.onClick(PreviewActivity.java:36)
    06-25 15:03:02.596: E/WindowManager(29217):     at android.view.View.performClick(View.java:3527)
    06-25 15:03:02.596: E/WindowManager(29217):     at android.view.View$PerformClick.run(View.java:14234)
    06-25 15:03:02.596: E/WindowManager(29217):     at android.os.Handler.handleCallback(Handler.java:605)
    06-25 15:03:02.596: E/WindowManager(29217):     at android.os.Handler.dispatchMessage(Handler.java:92)
    06-25 15:03:02.596: E/WindowManager(29217):     at android.os.Looper.loop(Looper.java:137)
    06-25 15:03:02.596: E/WindowManager(29217):     at android.app.ActivityThread.main(ActivityThread.java:4441)
    06-25 15:03:02.596: E/WindowManager(29217):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-25 15:03:02.596: E/WindowManager(29217):     at java.lang.reflect.Method.invoke(Method.java:511)
    06-25 15:03:02.596: E/WindowManager(29217):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    06-25 15:03:02.596: E/WindowManager(29217):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    06-25 15:03:02.596: E/WindowManager(29217):     at dalvik.system.NativeStart.main(Native Method)
    06-25 15:03:04.186: I/Process(29217): Sending signal. PID: 29217 SIG: 9
    06-25 15:03:04.566: D/TextLayoutCache(29339): Using debug level: 0 - Debug Enabled: 0
    06-25 15:03:04.606: D/libEGL(29339): loaded /system/lib/egl/libGLES_android.so
    06-25 15:03:04.606: D/libEGL(29339): loaded /system/lib/egl/libEGL_adreno200.so
    06-25 15:03:04.636: D/libEGL(29339): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
    06-25 15:03:04.636: D/dalvikvm(29339): GC_CONCURRENT freed 117K, 3% free 9125K/9351K, paused 4ms+17ms
    06-25 15:03:04.636: D/libEGL(29339): loaded /system/lib/egl/libGLESv2_adreno200.so
    06-25 15:03:04.706: D/OpenGLRenderer(29339): Enabling debug mode 0
    06-25 15:03:07.326: D/OpenGLRenderer(29339): Flushing caches (mode 0)
    06-25 15:03:07.326: W/IInputConnectionWrapper(29339): showStatusIcon on inactive InputConnection
    06-25 15:03:07.366: D/OpenGLRenderer(29339): Flushing caches (mode 1) 
```

我知道这个错误之前问过，我看到了解决方案，但解决方案不适用于我。这是我的代码。

错误出现在 pd.show() 上。

```
@Override
protected void onPreExecute() {
    //network.loadData();
    file = new File(
            Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
            "MyCameraApp" + File.separator + "project");
    createProgressDialog();
    pd.show();
}

@Override
protected Boolean doInBackground(String... params) {
    try {
        crop = new Crop(params[0]);
        crop.cropID();
        croppedID = crop.getId();
        publishProgress(2);
    } catch (IOException e) {
    }

    segmentNumbers();
    return true;
}

@Override
protected void onProgressUpdate(Integer... values) {
    pd.incrementProgressBy(values[0]);
}

@Override
protected void onPostExecute(Boolean result) {
    pd.dismiss();
    Toast.makeText(activity, "Processing Done", Toast.LENGTH_LONG).show();
}

private void createProgressDialog() {
    pd = new ProgressDialog(activity);
    pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    pd.setTitle("Extract ID");
    pd.setMessage("Processing...");
    pd.setIcon(R.drawable.ic_launcher);
    pd.setProgress(0);
    pd.setCancelable(false);
} 
```

onpreExecution 方法：- 我正在显示我的对话框。doInBackGround 方法：- 我执行用于分割图片的 segmentNumber()。onPostExecution 方法：- 我正在关闭我的对话框。

修改后的代码：

```
package com.OCR.ID;

import java.io.File;
import java.io.IOException;

import org.neuroph.contrib.imgrec.image.Image;
import org.neuroph.contrib.imgrec.image.ImageFactory;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;
import android.widget.Toast;

import com.Camera.R;

    /**
     * @author Mahmud
     * 
 */
public class Segement extends AsyncTask<String, Integer, Boolean> {

    int[][] croppedID;
    Crop crop;
    private Activity activity;
    private ProgressDialog pd;
    File file;
    private String ID;
    private Neuroph network;

    public Segement(Activity activity, ProgressDialog pd) throws IOException {
        this.activity = activity;
        this.pd = pd;
        //network = new Neuroph(this.activity);
    }

    @Override
    protected void onPreExecute() {
        //network.loadData();
        file = new File(
                Environment
                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                "MyCameraApp" + File.separator + "project");
    }

    @Override
    protected Boolean doInBackground(String... params) {
        try {
            crop = new Crop(params[0]);
            crop.cropID();
            croppedID = crop.getId();
            publishProgress(2);
        } catch (IOException e) {
        }

        segmentNumbers();
        return true;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        pd.incrementProgressBy(values[0]);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        pd.dismiss();
        Toast.makeText(activity, "Processing Done & your ID : " + ID,
                Toast.LENGTH_LONG + Toast.LENGTH_LONG).show();
    }

    /**
     * Segment cropped image into number
     */
    public void segmentNumbers() {
        int count = 0, endOfNumber = 0, startOfNumber = 0;
        int[][] number = null;

        while (crop.getxProjection()[endOfNumber] == 0
                && endOfNumber != crop.getxProjection().length - 1)
            endOfNumber++;

        while (endOfNumber != croppedID.length - 1) {
            endOfNumber = startOfNumber;

            while (crop.getxProjection()[endOfNumber] != 0
                    && endOfNumber != crop.getxProjection().length - 1)
                endOfNumber++;

            if (endOfNumber - startOfNumber < 10) {
                startOfNumber = endOfNumber;
                while (crop.getxProjection()[startOfNumber] == 0
                        && endOfNumber != crop.getxProjection().length - 1)
                    startOfNumber++;
                continue;
            }

            if (startOfNumber >= croppedID.length
                    || endOfNumber >= croppedID.length)
                break;

            number = new int[endOfNumber - startOfNumber - 1][croppedID[0].length];

            for (int i = 0; i < number.length; i++)
                for (int j = 0; j < number[i].length; j++)
                    number[i][j] = croppedID[i + startOfNumber][j];

            number = verticalProjectionForNumber(number);

            File numberFile = AndroidImage.save(activity,
                    AndroidImage.write2DIntoImage(number),
                    Integer.toString(count));
//          Image image = ImageFactory.getImage(numberFile.getAbsoluteFile());
//          ID += network.recognize(image);

            //
            // file.getPath() + File.separator + Integer.toString(count) +
            // ".PNG");
            publishProgress(7);

            startOfNumber = endOfNumber;
            while (crop.getxProjection()[startOfNumber] == 0
                    && endOfNumber != crop.getxProjection().length - 1)
                startOfNumber++;

            count++;
        }

        Log.d("ID", ID);
    }

    /**
     * Do vertical projection on each number
     */
    private int[][] verticalProjectionForNumber(int[][] number) {

        int[] projection = new int[number[0].length];

        for (int i = 0; i < (number[0].length * 0.90); i++) {
            for (int j = 0; j < number.length; j++) {
                projection[i] += number[j][i];
            }
        }

        int first = 0;
        while (projection[first] == 0)
            first++;

        int last = projection.length - 1;
        while (projection[last] == 0)
            last--;

        int[][] modifiedNumber = new int[number.length][last - first];
        for (int i = 0; i < modifiedNumber.length; i++)
            for (int j = 0; j < modifiedNumber[i].length; j++)
                modifiedNumber[i][j] = number[i][j + first];

        number = null;
        projection = null;
        System.gc();

        return modifiedNumber;
    }
} 
```

我从这里调用了任务：-

```
OnClickListener processOnClickListener = new OnClickListener() {
        public void onClick(View v) {
            try {
                createProgressDialog();
                pd.show();
                new Segement(PreviewActivity.this, pd).execute(path);
            } catch (IOException e) {
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:33:15.210

夏威夷上面的答案是正确的。

更具体地说，该`doInBackground`方法与 UI 线程**不**同步。因此，您永远不应该在此方法中更新您的视图/布局/任何与 UI 相关的内容。我建议您在执行`show()`之前进行对话`AsyncTask`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:24:48.180

在执行任务之前， `show()`您应该这样做。在您只能使用和方法来更新您的.`Dialog`

`AsyncTask``OnProgressUpdate``onPostExecute``UI`

```
createProgressDialog();
pd.show();
task.execute(); 
```

并将您的方法更改为

```
private void createProgressDialog() {
    pd = new ProgressDialog(YourMainActivity.this);
    pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    pd.setTitle("Extract ID");
    pd.setMessage("Processing...");
    pd.setIcon(R.drawable.ic_launcher);
    pd.setProgress(0);
    pd.setCancelable(false);
} 
```

# fpga - 比较和加法的区别

> ID：11192225
> 
> 赞同：1
> 
> 时间：2012-06-25T15:22:09.677
> 
> 标签：fpga

在整数和浮点运算中，加法（+）运算是否比比较运算（>）更复杂？我希望能在基于微处理器和基于 FPGA 的系统的背景下得到答案。

我的想法：当我们谈论基于微处理器的系统时，我认为比较和加法是一回事，因为比较a>b可以通过检查(ab)的符号位来解决，即加法运算。但是，在基于 FPGA 的系统中，我猜比较算子的复杂度可以降低吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:58:35.043

从理论上讲，比较可能会更快，您只需要比较每个位并且可以并行完成。这种比较分两个阶段完成，一个阶段比较所有位，第二个阶段检查一个位是否打开。（技术上是 (a0^b0)|(a1^b1)|...(an^bn)。所有 ai^bi 可以同时完成。应该是 O(log(n))

但是，对于加法，您需要将进位从每个位传播到另一个位，因此您最终会遇到 O(n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:29:28.600

比较对于整数来说有点“简单”，因为我们只需要比较从 msb 到 lsb 的每一位（没有进位，加法需要）。就复杂性而言，两者都是 O(log n)。

但我怀疑您是否真的可以在资源使用（逻辑片或功耗）方面测量这种微小的差异。

# c# - 数据库验证错误。在一个表中允许为空值，但在相关（规范化）表中不允许

> ID：11192226
> 
> 赞同：5
> 
> 时间：2012-06-25T15:22:10.053
> 
> 标签：c#, asp.net-mvc, entity-framework, nullable

我一直在寻找这个问题的答案 2 天了。我什至不确定到底出了什么问题，但我想我可能已经查明了可能的罪魁祸首。

我的程序是一个数据库跟踪器/管理器，它将跟踪我公司的设备。用户可以查询、创建和编辑设备。现在，查询数据库是可行的，但是当我尝试添加或更新数据库时，程序会抛出验证错误（我将在下面详细介绍）。

我有一个设备类，它有许多可以为空的属性（因为用户在创建新条目时可能不知道其中的许多属性，我们几乎所有属性都可以为空）并连接到（使用外键和延迟加载/“虚拟” ) 用于帮助规范化数据库的其他一些表。

以下是一些帮助的缩写代码：

设备型号：

```
public class Equipment
{
    public int EquipmentId { get; set; } //required

    public string Company { get; set; } //required

    public bool Verified { get; set; } //required

    (...other non-required attributes...)

    //The following two attributes are where my problems are I believe
    [ForeignKey("PAU")]
    public int PAUId { get; set; } //required and Foreign Key    

    //This is not required (but is FK to the related table) if the user doesn't know
    [ForeignKey("Division")]
    public Nullable<int> DivisionId { get; set; }

    //These are the lazy loading connections to the other tables in the database

    public virtual Division Division { get; set; }

    public virtual PAU PAU { get; set; }
} 
```

部门型号：本表仅包含我公司5个不同部门及相关ID。

```
public class Division
{
    public Division()
    {
        this.Equipments = new HashSet<Equipment>();
    }

    //These are non-nullable/required fields
    public int DivisionId { get; set; }
    public string DivisionName { get; set; }

    public virtual ICollection<Equipment> Equipments { get; set; }
} 
```

PAU 模型：此模型包含 PAU#s 以及相关的描述和 ID。

```
public class PAU
{
    public PAU()
    {
        this.Equipments = new HashSet<Equipment>();
    }

    //These are non-nullable/required fields
    public int PAUId { get; set; }
    public string PAUNumber { get; set; }
    public string PAUDescription { get; set; }

    public virtual ICollection<Equipment> Equipments { get; set; }
} 
```

设备控制器：

```
public class EquipmentController : Controller
{
    TLCP_DEVEntities4 db = new TLCP_DEVEntities4();

    (...)

    public ActionResult Edit(int id)         
    {
        ViewData["divisions"] = new SelectList(db.Equipments.
                                OrderBy(x => x.Division.DivisionName).
                                Select(x => x.Division).ToList().
                                Distinct(), "DivisionId", "DivisionName");

        ViewData["PAUNumbers"] = new SelectList(db.Equipments.
                                 OrderBy(x => x.PAU.PAUNumber).
                                 Select(x => x.PAU).ToList().
                                 Distinct(), "PAUId", "PAUNumber");

        return View(db.Equipments.Find(id)); 
    }

    [HttpPost]
    public ActionResult Edit(Equipment equipment)
    {
        if (ModelState.IsValid)
        {
            db.Entry(equipment).State = EntityState.Modified;                    
            db.SaveChanges();     //fails here                                     
            return RedirectToAction("Maintenance"); 
        }

        ViewData["divisions"] = new SelectList(db.Equipments.
                                OrderBy(x => x.Division.DivisionName).
                                Select(x => x.Division).ToList().
                                Distinct(), "DivisionId", "DivisionName");

        ViewData["PAUNumbers"] = new SelectList(db.Equipments.
                                 OrderBy(x => x.PAU.PAUNumber).
                                 Select(x => x.PAU).ToList().
                                 Distinct(), "PAUId", "PAUNumber");

        return View(equipment);
    }

    public ActionResult AddEquipment()
    {
        ViewData["divisions"] = new SelectList(db.Equipments.
                                OrderBy(x => x.Division.DivisionName).
                                Select(x => x.Division).ToList().
                                Distinct(), "DivisionId", "DivisionName");

        ViewData["PAUNumbers"] = new SelectList(db.Equipments.
                                 OrderBy(x => x.PAU.PAUNumber).
                                 Select(x => x.PAU).ToList().
                                 Distinct(), "PAUId", "PAUNumber");

        return View();
    }

    public ActionResult AddEquipment(Equipment equipment)
    {
        try
        {
            db.Equipments.Add(equipment);
            db.SaveChanges();

            return RedirectToAction("Maintenance"); 
        }
        catch (Exception ex)
        {

            ViewData["divisions"] = new SelectList(db.Equipments.
                                    OrderBy(x => x.Division.DivisionName).
                                    Select(x => x.Division).ToList().
                                    Distinct(), "DivisionId", "DivisionName");

            ViewData["PAUNumbers"] = new SelectList(db.Equipments.
                                 OrderBy(x => x.PAU.PAUNumber).
                                 Select(x => x.PAU).ToList().
                                 Distinct(), "PAUId", "PAUNumber");

            return View();
        }
    }

    (...)
} 
```

在视图中，我有这些属性的下拉列表，这些属性填充了数据库中已有的可能选项（存储在上面的 ViewData 中）。我尝试了几种不同的方式将这些数据存储到我的模型中，但这种方式似乎效果最好：

```
<%: Html.DropDownListFor(model => model.DivisionId,
       ViewData["divisions"] as SelectList, "")%> 
```

好的，经过大量调试，问题似乎是因为延迟加载的属性具有空属性，这些属性在它们的表中是不允许的。我的示例将更多地处理创建新设备对象，尽管我相信编辑它们的问题是相同的。

Division 示例：因此 Equipment 类中的 DivisionId 可以为 null （用户不知道或设备不属于特定部门）， Equipment 表/类不会抱怨这一点。但是当我尝试 SaveChanges() 时，程序会抱怨，因为虚拟 Division 对象为空（默认 DivisionId 为 0，DivisionName 为空）。由于 Equipment.DivisionId 为空，我不想更新此 Equipment 对象的 Division 表。有没有办法解决这个问题？我不应该延迟加载吗？

PAU 示例：由于 PAUId 是所有设备对象的必需属性，但与除法示例中一样，PAU.PAUNumber 和 PAU.PAUDescription 为空（并且 PAU.PAUId 为默认值 0）导致错误。这就像第一个一样，但具有 required 属性（所以我不确定它是否需要以不同方式处理）。

所以我不确定如何解决这个问题。

*   是否延迟加载问题，因为如果 Id/外键不为空，我只想将设备对象连接到其他表？

*   我可以调用一些方法来根据 Id 从其他表中更新设备对象的值吗？这是我需要自己创建的方法吗？

*   如果我摆脱延迟加载，您能解释一下我应该如何编写查询，以便我仍然可以访问规范化数据（如 DivisionName）吗？

我为超长的帖子道歉。我只是不想错过任何可能重要的事情。

**编辑**

我对 PAU 示例有一个粗略的解决方案（但我认为它不适用于除法示例，因为在设备中允许空值但不允许在单个表中使用空值）。

```
public ActionResult AddEquipment(Equipment equipment)
    {
        try
        {
            equipment.PAU.PAUId = equipment.PAUId;
            equipment.PAU.PAUNumber = db.PAUs.Find(equipment.PAUId).PAUNumber;
            equipment.PAU.PAUDescription = db.PAUs.Find(equipment.PAUId).PAUDescription;

        (...)

    } 
```

虽然它不是很优雅。我试着看一个关于反射的教程，但它并没有真正的意义。如果那将是一个更优雅的解决方案，有人可以尝试解释一下吗？

我仍在寻找除法示例的解决方案（因为 Equipment.DivisionId 可以为空，但 Division.DivisionId 不能为空，这不起作用），因此任何关于此或更优雅的解决方案的帮助都会很大赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:10:21.413

我的代码的另一部分表现得很奇怪，导致了错误。感谢您的帮助！谢谢！

# mysql - 仅过滤属于第三张表中某物的用户

> ID：11192227
> 
> 赞同：0
> 
> 时间：2012-06-25T15:22:11.023
> 
> 标签：mysql, sql

这些是我的桌子：

表“用户”

```
ID      NAME     AGE 
01      John     22
02      Gloria   27 
```

表“城市”

```
ID    USER_ID    CITY
22    01         Sacramento
23    02         Phoenix 
```

表“爱好”

```
ID     USER_ID   HOBBY
88     01        swimming
89     01        reading
90     02        reading 
```

好的，所以我们有两个人：约翰来自萨克拉门托，喜欢游泳和阅读。Gloria 来自凤凰城，只喜欢阅读。

我知道如何加入前两个表：

```
SELECT * FROM users INNER JOIN cities ON users.id = cities.user_id 
```

但是我怎样才能加入“爱好”表并且只显示喜欢游泳的用户呢？

非常感谢，马蒂亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:25:10.753

您只需将 a 添加`JOIN`到最后一个表并添加一个`WHERE`子句

```
SELECT * 
FROM users  
INNER JOIN cities  
    ON users.id = cities.user_id
INNER JOIN hobbies
    ON users.id = hobbies.USER_ID
WHERE Hobbies.Hobby = 'swimming' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:25:14.227

继续加入并过滤结果：

例如

```
SELECT * FROM users 
INNER JOIN cities ON users.id = cities.user_id 
INNER JOIN hobbies ON users.id = hobbies.user_id
WHERE hobbies.hobby = 'swimming' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:30:58.183

select u.id, u.name, c.city, h.hobby from users u inner join cities c on u.id=c.id inner join hobbies h on u.id = h.id where to_lower (h.hobby) ='游泳'

# logging - 如何从 SiteScope 日志计算“错误时间”？

> ID：11192229
> 
> 赞同：0
> 
> 时间：2012-06-25T15:22:19.403
> 
> 标签：logging, monitoring, analysis, sitescope

我有来自 SiteScope 安装的原始日志，但我无法理解“错误时间”是如何计算的。快速报告给出了一定的“错误时间”，但我无法匹配它。

我努力了：

*   将从“错误”状态到下一个日志条目的时间相加
*   将上一个日志条目中每个“错误”状态的时间加起来
*   将每个“错误”状态的时间加起来
*   执行上述操作，但从总时间（分母）中减去“禁用”时间

我的 SiteScope 版本是 8.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:40:23.240

正常“错误”时间是通过获取具有“错误”状态的每一行的时间戳并减去前一行的时间戳来计算的。将所有差值相加，然后除以最新时间戳和最早时间戳的差值。

最佳情况“错误”时间是通过获取具有“错误”状态的每一行的时间戳并从下一行的时间戳中减去它来计算的。

这些计算是在每个监视器的基础上执行的。如果从原始日志计算，过滤掉不是给定监视器状态的行。有效状态为“good”、“error”、“disabled”和“warning”。

# jquery - 如何将元素添加到包含一些元素（jQuery）的 div 的第一行？

> ID：11192232
> 
> 赞同：0
> 
> 时间：2012-06-25T15:22:33.920
> 
> 标签：jquery

我有一些元素如下：

```
<div id="shareswrapper">
    <div id="41">
           some content blah blah blah...
    </div>
</div> 
```

我需要添加让我们说下面的 div 到`shareswrapper`：

```
 <div id="1751">
           Some new content here!!!!
    </div> 
```

输出如下：

```
<div id="shareswrapper">
    <div id="1751">
           Some new content here!!!!
    </div>
    <div id="41">
           some content blah blah blah...
    </div>
</div> 
```

我使用了第一个孩子，但没有成功。`.before()`方法对我不起作用，因为我不知道共享包装器中有哪些 div。
有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:23:43.353

使用前置..

```
$('#shareswrapper').prepend('<div id="1751">Some new content here!!!!</div>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:27:58.793

两者都在正确的轨道上。将它们链接在一起

```
$('#shareswrapper:first-child').before("injection content") 
```

# ajax - CakePHP 1.1.6 如何突破ajax布局到默认布局

> ID：11192235
> 
> 赞同：0
> 
> 时间：2012-06-25T15:22:42.907
> 
> 标签：ajax, cakephp, redirect

我有一个使用 CakePHP 1.1.6 的遗留应用程序，我正在更新它。我有一个 ajax 表单提交，它在一系列 ajax 请求后更新一个 div。一切正常，直到我想返回应用程序的主菜单页面。我不知道如何通过最终重定向到菜单页面上的默认布局来摆脱 ajax 布局。我尝试了各种覆盖 redirect() 方法的方法，但均未成功。有人在 v1.1.6 中管理过这个吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:49:47.960

怀疑“AJAX 布局”只是指*URL 前缀*或类似的东西。
例如，所有类似的 URL`/ajax/foo/bar`都以 AJAX 布局显示，
并且简单地`redirect(array('action' => 'baz'))`生成`/ajax/foo/baz`.

这取决于您的路线是如何设置的，但通常您只需将特定前缀设置为`false`：

```
$this->redirect(array('ajax' => false, 'controller' => 'normal', 'action' => 'home')); 
```

# vba - 逆向工程vba代码excel

> ID：11192241
> 
> 赞同：4
> 
> 时间：2012-06-25T15:23:01.697
> 
> 标签：vba, excel

我不是 VBA 程序员。但是，我有一个“不愉快”的任务，即用另一种语言重新实现某人的 VBA 代码。VBA 代码由 75 个模块组成，它们使用一张巨大的“计算表”来存储所有“全局变量”。因此，它通常不使用描述性变量名称，而是使用：

```
= Worksheets("bla").Cells(100, 75).Value 
```

或者

```
Worksheets("bla").Cells(100, 75).Value = 
```

更糟糕的是，“计算表”还包含一些公式。

是否有任何（免费）工具可以让您对此类代码进行逆向工程（例如创建 Nassi-Shneiderman 图、流程图）？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:20:17.617

我认为@JulianKnight 的建议应该在此基础上起作用，您可以：

1.  将所有代码复制到能够进行 RegEx 搜索/替换的文本编辑器（例如 Notepad++）。
2.  然后将 RegEx 搜索/替换与如下搜索查询一起使用：
    `Worksheets\(\"Bla\"\).Cells\((\d*), (\d*)\).Value`
3.  并替换为：
    `Var_\1_\2`

    这会将所有工作表存储的值转换为具有行列索引的变量名称。
    例子：

    ```
    Worksheets("bla").Cells(100, 75).Value    To    Var_100_75 
    ```

4.  这些变量仍然需要初始化。
    这可以通过编写一个 VBA 代码来完成，该代码简单地读取“Bla”工作表中的每个（相关）单元格并将其作为变量初始化代码写入文本文件。
    例子：

    ```
    Dim FSO As FileSystemObject 
    Dim FSOFile As TextStream 
    Dim FilePath As String 
    Dim col, row As Integer 

    FilePath = "c:\WriteTest.txt" ' create a test.txt file or change this

    Set FSO = New FileSystemObject 
     ' opens  file in write mode
    Set FSOFile = FSO.OpenTextFile(FilePath, 2, True) 
     'loop round adding lines
    For col = 1 To Whatever_is_the_column_limit
        For row = 1 To Whatever_is_the_row_limit
         ' Construct the output line
            FSOFile.WriteLine ("Var_" & Str(row) & "_" & Str(col) & _
                           " = " & Str(Worksheets("Bla").Cells(row, col).Value)) 
        Next row
    Next col

    FSOFile.Close 
    ```

显然，您需要更正您需要使用的任何其他语言的输出行语法和变量名称结构。

PS 如果您不熟悉 RegEx（正则表达式），您会在网络上找到大量解释它的文章。

# iphone - 未收到 UINavigationBarDelegate 回调

> ID：11192243
> 
> 赞同：4
> 
> 时间：2012-06-25T15:23:10.913
> 
> 标签：iphone, protocols

有没有办法解决没有收到 NavBarDelegate 回调的问题？我尝试在一个测试项目中做：

```
[self.navigationController.navigationBar setDelegate:self]; 
```

在 viewDidLoad 中，我确实收到了以下回调：

```
- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPushItem:(UINavigationItem *)item {
    NSLog(@"%s", __FUNCTION__);
    return YES;
}
- (void)navigationBar:(UINavigationBar *)navigationBar didPushItem:(UINavigationItem *)item {
    NSLog(@"%s", __FUNCTION__);    
}

- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item {
    NSLog(@"%s", __FUNCTION__);
    return YES;
}
- (void)navigationBar:(UINavigationBar *)navigationBar didPopItem:(UINavigationItem *)item {
    NSLog(@"%s", __FUNCTION__);
} 
```

我确实在接口中检查了我的 ViewController 是否符合此协议。

在 viewWillAppear: 中，我检查我的类是否符合协议：

```
if ([self conformsToProtocol:@protocol(UINavigationBarDelegate)]) {
        NSLog(@"yes I conform");
    } 
```

而且我确实收到了 NSLog 消息，说我的课程符合要求，但我没有收到回调。由于它在测试项目中有效，但在这里不起作用，我正在尝试找出解决此问题的其他方法。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-24T09:40:34.757

我将其留给将来遇到此问题的任何人：

您需要将它们`<UINavigationBarDelegate> protocol methods`放在导航控制器的类中，而不是在您正在处理的视图控制器的类中。

在我的情况下，我只有一个类 NavigationController（UINavigationController 的子类），它的单例实例：`sharedNavigationController`适用于我的整个应用程序。我已将其设置为符合`<UINavigationBarDelegate> protocol`并在其中声明了这些方法。从那以后一切都很好。

# android - Android：在 onCreate 之前设置活动方向，但不在清单中（HDMI 插入问题）

> ID：11192245
> 
> 赞同：4
> 
> 时间：2012-06-25T15:23:14.690
> 
> 标签：android, android-activity, orientation, screen-orientation, android-orientation

`setRequestedOrientation`我可以通过使用in 以编程方式完美地管理方向更改`onCreate`。

一切都很好，直到我插入 HDMI 电缆。在此之后，平板电脑“想要”处于横向模式。因此，当我打开一个活动时，它首先以“横向”显示，然后在它以“纵向”显示之后，（因为我正在调用您`setRequestedOrientation(variable_with_orientation_desired_by_the_user)`可以“看到”的位置，我的应用程序会在用户打开的每个活动上不断旋转;`variable=ActivityInfo.SCREEN_ORIENTATION_PORTRAIT``onCreate`

如果我在清单中设置活动的方向，这个问题就会部分消失，因为清单中的方向与用户选择的方向相同。如果它们不同，则再次开始相同的行为。

我试过这个，但没有成功：

```
@Override
public void onCreate(final Bundle saved)
{
    setRequestedOrientation(ScreenOrientation);
    super.onCreate(icicle);
} 
```

那么，有没有办法告诉android它必须创建我的活动的方向，然后才创建它？（但它不能在清单中）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T12:39:14.637

我通过在清单文件中将 screenOrientation 设置为“后面”来解决它：

```
 android:screenOrientation="behind" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-06-07T22:59:57.913

我在清单中使用此声明解决了它：

```
android:screenOrientation="locked" 
```

在与此问题一起在清单中声明的​​每项活动上。

并继续以`setRequestedOrientation()`编程方式定义方法中是横向还是纵向`onCreate()`，

希望能帮助到你！

# java - 使用 @Inheritance JPA 属性时插入顺序无效

> ID：11192246
> 
> 赞同：2
> 
> 时间：2012-06-25T15:23:26.640
> 
> 标签：java, inheritance, jpa, jpa-2.0, eclipselink

我在 DB2 DB 上调整了 Eclipselink 持久性提供程序。下面列出了简化定义的 3 个表格：

```
CREATE TABLE root
(
    id       CHAR(32) NOT NULL PRIMARY KEY,
    rec_type VARCHAR(20)
);

CREATE TABLE derived
(
    id CHAR(32) NOT NULL PRIMARY KEY,
    ...
);
ALTER TABLE derived ADD CONSTRAINT fk_derived_to_root FOREIGN KEY (id) REFERENCES root(id);

CREATE TABLE secondary
(
    derived_id NOT NULL PRIMARY KEY,
    ...
);
ALTER TABLE secondary ADD CONSTRAINT fk_secondary_to_derived FOREIGN KEY (derived_id) REFERENCES derived(id); 
```

下面列出了这些实体的 Java 实体类，RootEntity：

```
@javax.persistence.Table(name = "ROOT")
@Entity
@DiscriminatorColumn(name = "REC_TYPE")
@Inheritance(strategy = InheritanceType.JOINED)
public class RootEntity {
    private String id;

    @javax.persistence.Column(name = "ID")
    @Id
    @GeneratedValue(generator = "system-uuid")
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    private String principalType;
    @Column(name = "PRINCIPAL_TYPE")
    public String getPrincipalType() {
        return principalType;
    }

    public void setPrincipalType(String principalType) {
        this.principalType = principalType;
    }
   ...
} 
```

派生实体：

```
@javax.persistence.Table(name = "DERIVED")
@Entity
@DescriminatorValue("DERIVED")
public class DerivedEntity extends RootEntity {
    private SecondaryEntity secondaryEntity;

    @OneToOne(mappedBy = "derived_id")
    public SecondaryEntity getSecondaryEntity() {
        return secondaryEntity;
    }

    public void setSecondaryEntity(SecondaryEntity secondaryEntity) {
        this.secondaryEntity = secondaryEntity;
    }
 ...
} 
```

我在测试日志中没有看到派生表插入：

```
--INSERT INTO ROOT (ID, REC_TYPE) VALUES (?, ?)
    bind => [241153d01c204ed79109ce658c066f4c, Derived]
--INSERT INTO SECONDARY (DERIVED_ID, ...) VALUES (?, ...)
    bind => [241153d01c204ed79109ce658c066f4c, ...]
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.ibm.db2.jcc.am.fo: DB2 SQL Error: SQLCODE=-530, SQLSTATE=23503, SQLERRMC=SCHEM.SECONDARY.FK_SECONDARY_TO_DERIVED, DRIVER=3.57.82 
```

所以问题是：为什么 Eclipselink 在插入`DERIVED`表之前不向表中插入新记录`SECONDARY`？

`SECONDARY`PS 当没有表（`ROOT`仅`DERIVED`表）或不使用继承（`DERIVED`表生成 id）时，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:36:14.423

对于继承，JPA 假定相关表中的外键约束是指根表。

您可以更改约束以引用根表，或者，

使用 DescriptorCustomizer 设置，

```
descriptor.setHasMultipleTableConstraintDependecy(true); 
```

或者，

定制器 OneToOneMapping 使其外键引用辅助表（JPA 注释始终使其引用根表）。

请记录一个错误，因为 JPA 连接列应该允许您定义辅助表的外键。

EclipseLink 确实推迟插入到辅助表的原因是允许插入按表分组以允许批量写入并避免数据库死锁。

# php - 登录尝试失败后拒绝 apache2 访问

> ID：11192253
> 
> 赞同：0
> 
> 时间：2012-06-25T15:23:58.450
> 
> 标签：php, apache2

在 4 次失败的用户名/密码登录尝试后，我想拒绝对服务器的 IP 访问。我之前通过像这样将 IP 或块添加到 /etc/apache2/httpd.conf 文件来拒绝访问 Web 服务器。

```
<Location "/">
    Order Allow,Deny
    Allow from all
    Deny from 1.2.3.4/30 3.4.5.6/15
    Deny from 9.4.3.4
</Location> 
```

任何人都知道如何使用 PHP 以编程方式执行此操作，或者可能让 Apache2 以设定的时间间隔查询 mysql 以获取“IP 拒绝列表”？

谢谢！

**编辑澄清**

在完成表单提交时，查询 mysql 的用户名。如果找到用户名，脚本将继续检查 pw，然后检查失败的登录。如果登录失败计数器 >=4，则用户的帐户被锁定，但他们仍然可以访问服务器。

如果未找到用户名，我会查询差异。用户 IP 表。如果找到 IP 并且 login_counter >=4 使用上面 apache2 httpd.conf 之类的方法阻止来自服务器的 IP。

* ***最终编辑/想法**

如果我要给 www-data 用户权限，恐怕我会打开一个更大的安全漏洞。编辑 .htaccess 文件，因为没有办法引用。.htaccess 中的一个文件，该文件将是 www-data 可写的，这是我的解决方案。

如果用户名不在 db 中，则将 IP 写入 db 并跟踪每个 IP 的失败尝试。重新访问站点后，如果 IP 在 db 中并且尝试 >=4，则登录脚本 die()。接下来，我将编写一个外部脚本（www-data 无法访问），该脚本每晚轮询数据库以查找尝试次数 >=4 的 IP，并将它们添加到 .htaccess。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:32:09.930

更新：原来你可以在里面包含文件`.htaccess`，所以我做了一些改变。

所以这里发生的是你获取`.htaccess`文件，删除最后一行，`Allow from all`然后附加新的拒绝规则，然后添加删除的行。

你的`.htaccess`文件会是这样的：

```
order Deny,Allow
Deny from 9.4.3.4
Allow from all 
```

当用户超过登录尝试次数时，您可以这样做：

```
$file = file('.htaccess');
array_pop($file);
$fh = fopen('.htaccess','w');
fwrite($fh, implode('',$file));
fclose($fh);
$fh = fopen('.htaccess', 'a');
fwrite($fh, 'Deny from '.$_SERVER['REMOTE_ADDR']);
fwrite($fh, 'Allow from all']);
fclose($fh); 
```

嗯，这就是基本思想，你可以拿来定制，应用到你自己的环境中

# jquery - 在创建 wordpress 小部件时使用颜色选择器

> ID：11192256
> 
> 赞同：0
> 
> 时间：2012-06-25T15:24:02.360
> 
> 标签：jquery, color-picker

我正在创建一个小部件并已成功创建它，我想要实现的是在小部件表单上，我想添加一个用户可以选择字体颜色的选项。因此，我放置了一个文本框，当用户单击文本框时，将出现一个颜色选择器。

我过去没有尝试过这样做，我在谷歌上搜索过任何帮助，但他们希望我下载他们的插件等。

我不需要任何插件或任何东西，我只想要一个简单的颜色选择器实现。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:29:03.347

[这个颜色选择器**内置在 wordpress**](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/)中。只需遵循实施指南，您就可以开始了。

**编辑**该站点似乎有问题，因为它会导致 FF 5 频繁崩溃。抱歉，我也找不到任何其他具有该文档的站点。使用 Chrome 或 IE9，它不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:27:42.533

这是我用过的一个很好的：[http ://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/)

这可能对你有帮助。

# c# - 我使用什么字符串连接到 SQL Server？

> ID：11192258
> 
> 赞同：0
> 
> 时间：2012-06-25T15:24:04.927
> 
> 标签：c#, sql-server-2008, workflow-foundation-4

我正在尝试通过进行自定义活动来使用 CRM 工作流执行 SQL 作业。在我的代码中，一个在线教程让我像这样构造它（在 c# 中）：

```
[CrmWorkflowActivity("A test activity to run SQL Jobs")]
public sealed class ExecuteSQLJob : System.Activities.CodeActivity
{

    #region Inputs
    [Input("Job Name")]
    [Default("BMS_ExtractTransformLoad")]
    public InArgument<String> JobName { get; set; }

    [Input("Server Connection")]
    [Default("HBSSQL2008/MSSQLSERVER")]                  //<--This String
    public InArgument<String> ServerName { get; set; }

    [Input("User Name")]
    [Default("-----")]
    public InArgument<String> UserName { get; set; }

    [Input("Password")]
    [Default("-----")]
    public InArgument<String> Password { get; set; }
    #endregion

    protected override void Execute(CodeActivityContext context)
    {
        Server server = new Server(ServerName.Get(context));   //<--Is used here
        try
        {
            server.ConnectionContext.LoginSecure = false;
            server.ConnectionContext.Login = UserName.Get(context);
            server.ConnectionContext.Password = Password.Get(context);
            server.ConnectionContext.Connect();
            Job job = server.JobServer.Jobs[JobName.Get(context)];
            job.Start();
        }
        finally
        {
            if (server.ConnectionContext.IsOpen)
            {
                server.ConnectionContext.Disconnect();
            }
        }
    }
} 
```

但是，当我尝试运行此工作流时，它会抛出一个错误，指出它无法连接到服务器。（具体来说，错误是在 server.ConnectionContext.Connect() 方法调用上抛出的）。

问题是 serverName 字符串吗？如果是这样，我怎样才能找到要使用的正确服务器名称？

谢谢你的帮助！

**编辑：** 这里有一些额外的信息......

这是我第一次获得服务器和实例名称的方式： ![我的 SQL 查询](../Images/9310a254dd8d937105270040a73343d6.png)

这是 CRM 工作流程上的错误：

```
Workflow suspended temporarily due to error: Unhandled Exception: Microsoft.SqlServer.Management.Common.ConnectionFailureException: Failed to connect to server HBSSQL2008.
   at Microsoft.SqlServer.Management.Common.ConnectionManager.Connect()
   at ExecuteSQLJob.ExecuteSQLJob.Execute(CodeActivityContext context)
   at System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)
   at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation)
Inner Exception: System.Data.SqlClient.SqlException: Login failed for user 'rnkelch'.
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.SqlServer.Management.Common.ConnectionManager.InternalConnect(WindowsIdentity impersonatedIdentity)
   at Microsoft.SqlServer.Management.Common.ConnectionManager.Connect() 
```

**抱歉，我最初没有包含此内容，感谢您迄今为止的帮助**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:30:31.850

尽管与问题不完全相关，但仍然是一个有用的书签[站点](http://www.connectionstrings.com/)，可帮助您正确获取连接字符串。

对于 SQL Server 2008，请在同一站点上查看此[链接](http://www.connectionstrings.com/sql-server-2008)

服务器字符串的一部分是这样的：

> 服务器=myServerName\theInstanceName

您在上面的声明中使用了正斜杠

```
[Input("Server Connection")]
[Default("HBSSQL2008/MSSQLSERVER")]                  //<--This String
public InArgument<String> ServerName { get; set; } 
```

将其更改为：

```
[Input("Server Connection")]
[Default("HBSSQL2008\\MSSQLSERVER")]                  //<--This String
public InArgument<String> ServerName { get; set; } 
```

可能需要双斜线来逃避它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:27:26.267

好的，我想我现在想通了。

因为我们的服务器上只运行了一个 SQL 实例，所以我实际上不需要使用*ServerName\InstanceName*格式。hbssql2008 和 HBSSQL2008 都允许我连接。此外，IP 也有效。

另外，我遇​​到的另一个问题是我使用的用户名和密码来自 Windows 集成安全性，而不是 sql server 的安全性。因此，我在服务器上创建了一个具有适当权限和 sql 安全信息的新帐户，它允许我连接。

谢谢大家的帮助！

# c# - 实体框架代码模板和外键

> ID：11192262
> 
> 赞同：0
> 
> 时间：2012-06-25T15:24:21.923
> 
> 标签：c#, asp.net-mvc-3, entity-framework

当我使用添加视图对话框生成视图时，如何获取 Entity Frameworks 外键。

我的模型就像

```
public class System
{
    #region Properties

    public int SystemId { get; set; }
    public string SystemName { get; set; }

    #endregion
}

public class Module
{
    #region Properties

    public int ModuleId { get; set; }

    //[Required]
    [Display(Name="Module Name")]
    public string ModuleName { get; set; }

    [Display(Name="Date Added")]
    public DateTime DateAdded { get; set; }

    //[ForeignKey("CurrentSystem")]

    public int SystemId { get; set; }

    //[ForeignKey()]
    //[ForeignKey("SystemId")]
    public System System { get; set; }

    #endregion
} 
```

当我单击控制器，然后单击添加视图时，模式打开。我选择了所有需要的细节，然后生成以下内容（我没有包括整个视图）。

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Module</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.ModuleName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ModuleName)
        @Html.ValidationMessageFor(model => model.ModuleName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.DateAdded)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DateAdded)
        @Html.ValidationMessageFor(model => model.DateAdded)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.SystemId)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.SystemId)
        @Html.ValidationMessageFor(model => model.SystemId)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

我希望 SystemId 成为下拉列表而不是文本字段。我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:02:50.073

您确定您创建了一个从 dbContext 派生的类，其属性为 type`DBSet<System>`和 type 属性`DBSet<module>`？如果你有，并且你选择了一个带有选项“使用实体框架读取和写入操作”的控制器，并在下面的下拉列表中选择你的类模块和你的上下文，MVC 应该生成正确的代码视图和控制器代码来显示系统的组合。

至少它在 MVC4 中对我有用。请记住在尝试添加控制器之前生成您的项目。我认为 MVc 使用反射，所以它需要一个最新的程序集......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:18:52.593

使用视图模型。MVC 使用数据注释来确定如何显示属性。如果您希望视图以与模型不同的方式运行，则需要将模型映射到视图模型以处理额外的逻辑（即存在 int 的下拉菜单）。然后从视图模型类生成您的视图。

视图模型添加了一个层来处理这里的关注点分离。您希望您的视图与您的模型所允许的不同，因此添加一个视图模型类，该类将获取模型数据并以您想要的方式显示它。

# objective-c - iOS中检测声级的更好方法是什么？

> ID：11192264
> 
> 赞同：1
> 
> 时间：2012-06-25T15:24:25.300
> 
> 标签：objective-c, ios, audio, avaudiorecorder

> **可能重复：**
> [在 IOS 中检测到拍手](https://stackoverflow.com/questions/11173605/detecting-a-clap-in-ios)

我在谷歌上搜索了很多这个问题，人们想出的是“使用 AVAudioRecorder”。然而，这个类的问题是计量不好，即最大更新频率约为 0.9 秒，它检测到峰值，但在这些峰值结束时没有检测到。我正在尝试找到一种检测音频点击的方法（例如拍手/啪）。有没有比 AVAudioRecorder 更好的方法？

# c# - 使用 rs:StoredParametersID 键获取参数名称/值？

> ID：11192265
> 
> 赞同：1
> 
> 时间：2012-06-25T15:24:26.190
> 
> 标签：c#, soap, reporting-services

我正在使用带有[ReportExecutionService的](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.aspx)[ReportService2010](http://msdn.microsoft.com/en-us/library/reportservice2010.aspx) soap 端点的SSRS 2008 R2 。

对于具有较大值的参数，SSRS 具有一些智能来自动标记下钻报告 URL（[在此线程中总结得很好](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/a8fb313c-efce-42dc-b28b-67f695a8c791/)）：

> 该问题与 RS 系统属性 StoredParametersThreshold 有关。此值（默认为 1500）确定在 SSRS 用令牌替换 URL 之前 URL 可以包含的字符数。此功能的原因是某些浏览器/服务器限制了 URL 的 URL 长度。由于报告参数值组合可能非常长，因此我们尝试聪明地对 URL 进行标记，以便 URL 能够正常工作。一种可能的解决方法是增加 StoredParametersThreshold 的值。

URL（为便于查看而解码）如下所示：

```
http://iprod-ssrs/ReportServer?http://iprod-reports/admin/web/Report+Library/Drill-down+Companyids.rdl&rs:StoredParametersID=cjesl5vk0y2tbv55e1qjrz55&rs:ParameterLanguage=&rc:Parameters=Collapsed 
```

问题是，在我的自定义查看器中，我无法使用这些标记化的 URL，需要检索实际的参数名称/值，以便我可以执行向下钻取报告。

是否可以使用`rs:StoredParametersID`密钥获取参数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:26:03.370

根据 2010 年的这篇文章，您无法检索实际参数[http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/6809f9e3-b411-4f05-96a6-47e273220a70](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/6809f9e3-b411-4f05-96a6-47e273220a70)虽然可能已经改变。祝你好运！

# scala - Scala 中的“foo”与“foo1”命名约定是什么？

> ID：11192266
> 
> 赞同：0
> 
> 时间：2012-06-25T15:24:29.713
> 
> 标签：scala

我见过一些 API 有一个`def foo`，然后略有不同，但除了“有点像但略有不同”`def foo1`之外，我无法弄清楚这意味着什么。它让我想起了“Ex”（[“Ex”在 Windows API 函数名称中代表什么？](https://stackoverflow.com/questions/4039054/what-does-ex-stand-for-in-windows-api-function-names)）`foo1``foo`

我猜这是对 Haskell/FP 或数学约定的引用，它只是 foo-prime 吗？

是否有任何暗示（`foo1`必须以`foo`某种特定方式相关）还是更多“我需要两个类似的功能并且重载是模棱两可的，搞砸了，让我们在最后加上一个 1 ”？我是否应该假设“这两个功能以某种方式相关”之外的任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:58:59.637

我能想到的例子是`rep`and `rep1`in `scala.util.parsing.combinator.Parsers`，其中`rep`是任意数量的重复，并且`rep1`是 1 或更多。还有一个`repN`N次重复的方法，所以这里`1`后缀的意思就很明显了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:55:34.153

我认为上下文可能就是这里的一切。我能想到的唯一例子是**scalaz**`foldl1`中的方法。正如库作者无疑会指出的那样，从查看类型本身来看，该方法实际上是完全透明的：

 **```
trait MA[M[_], A] {
  def foobar(f: (A, A) => A)(implicit FoldableM: Foldable[M]): Option[A]
} 
```

但是，在这种情况下，它显然是 的一种*特殊形式*，`foldl`即*向左折叠但使用第一个元素作为种子而不是显式提供的值*。因此`foldl1`在上下文中是明智和直观的。

你说你见过几次：你能指出其他的发生吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:26:45.733

Scala 包含诸如 Function 和 Tuple 之类的类型，它们具有一系列类型，每个成员都根据它所接受的参数数量来命名。

```
Function1[T1] => R
Function2[T1, T2] => R

Tuple1[T1]
Tuple2[T1, T2] 
```

在这两种情况下，类型的名称必须是不同的，并且使用参数的数量是描述类型的好方法（Function4 是接受 4 个参数的函数的类型，Tuple3 是包含 3 个项目的元组的类型）。

正如其他答案所说，了解一些上下文会有所帮助，但可能是您的示例受到标准库中这些选择的启发（正确或错误）。**

# scala - 是否可以在 Scala 中编写返回具有不同类型参数的对象的方法？

> ID：11192268
> 
> 赞同：3
> 
> 时间：2012-06-25T15:24:32.333
> 
> 标签：scala, type-parameter

是否可以在 Scala 中编写一个方法，该方法返回具有不同类型参数的类型参数化类的对象？像这样的东西：

```
class A[T]

def f(switch: Boolean): A = if(switch) new A[Int] else new A[String] 
```

请注意：上面的代码是虚构的，以显示问题的类型；上面的代码在语义上没有意义。

上面的代码不会编译，因为返回类型 A 没有参数化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:43:02.607

您可以，甚至可以借助封装配对的隐式参数来实现类型安全：

```
class TypeMapping[+A,B] {
  def newListB = List.empty[B]
}
trait Logical
object True extends Logical
object False extends Logical

implicit val mapFalseToInt = new TypeMapping[False.type,Int]
implicit val mapTrueToString = new TypeMapping[True.type,String]

def f[A <: Logical,B](switch: A)(implicit tmap: TypeMapping[A,B]) = tmap.newListB

scala> f(True)
res2: List[String] = List()

scala> f(False)
res3: List[Int] = List() 
```

您确实必须从布尔值显式映射到自定义`True`和`False`值。

（我选择`List`作为目标类只是一个例子；你可以选择任何东西，甚至可以通过更多的工作使其通用。）

（编辑：正如 oxbow_lakes 指出的那样，如果您需要在同一代码路径上表示所有可能的返回值，那么仅此一项是行不通的，因为 and 的超类`List[Int]`is `List[String]`，`List[Any]`这没有多大帮助。在这种情况下，您应该使用. 我的解决方案是针对仅在or上下文`Either`中使用的单个函数，并且可以在那里维护类型信息。）`True``False`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:43:40.923

表达这一点的一种方法是使用`Either`;

```
def f(switch: Boolean) = if (switch) Left(new A[Int]) else Right(newA[String]) 
```

这当然会返回一个`Either[A[Int], A[String]]`. 您当然不能（目前）声明一个返回一些参数化类型的方法`P`，以及一些类型参数的子集（即*只有* `Int` *or* `String`）。

**锡兰**语言具有联合类型，我理解其意图是在不久的将来将这些添加到 scala 中，在这种情况下，您*可以*定义一个方法：

```
def f(switch: Boolean): A[Int|String] = ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:43:35.273

好吧，你可以做这样的事情。

```
scala> class A {
     |   type T
     | }
defined class A

scala> def f(b: Boolean): A = if(b) new A { type T = Int } else new A { type T = String }
f: (b: Boolean)A 
```

但这是没有意义的。类型是编译时信息，而该信息在这里丢失了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-25T15:37:17.247

对“虚构代码”进行绝对最小的更改怎么样？如果我们只是`[_]`在“虚构”返回类型之后添加，代码将编译：

```
class A[T]
def f(switch: Boolean):A[_] = if(switch) new A[Int] else new A[String] 
```

值得注意的`A[_]`是不一样`A[Any]`。`A[T]`不需要为编译代码定义协变。不幸的是，有关类型的信息会丢失。

# excel - 确定学生的学习年份，或者他们是否已经毕业

> ID：11192280
> 
> 赞同：0
> 
> 时间：2012-06-25T15:25:18.203
> 
> 标签：excel, function, vba

我需要一个函数来确定学生是在第一年、第二年还是第三年学习，或者他们是否已经毕业，基于 a）他们正在学习的证书和 b）他们开始的日期。

这是我的第一次努力 - 任何反馈将不胜感激：

[编辑：问题是函数在 Excel 中使用时返回错误]

[EDIT2：将 DateDiff 部分中的 m 更改为“m”，从而消除了错误 - 现在的问题是二年级和三年级学生被标记为“过去”]

```
Function YearCalc(start, course)

    'Introduce length - the course length in years
    Dim length As Integer

    'Define length corresponding to specific courses

    If course = "Msc" Then
        length = 3
    ElseIf course = "Adv Dip" Then
        length = 2
    ElseIf course = "PG Cert" Then
        length = 1
    End If

    Dim lengthm As Integer

    lengthm = (length * 12)

    'Define diff as the month difference between two dates;
    'today's date and the date the course was started.

    diff = DateDiff("m", start, Date, vbMonday)

    'Compare the date difference to the length of the course,
    'such that if the difference is larger than length of the specific course
    'the student is marked as 'Past':

    If diff >= (lengthm) Then
        YearCalc = "Past"

    'If the difference is less than the length of the course, determine which
    'year they fall into:

    Else
        If 0 <= (diff - lengthm) < 1 Then
            YearCalc = 1
        ElseIf 1 <= (diff - lengthm) < 2 Then
            YearCalc = 2
        ElseIf 2 <= (diff - lengthm) < 3 Then
            YearCalc = 3
        End If
    End If

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:59:30.320

我建议更改为`Select Case`，作为仅返回 1 值的部分原因是双重比较。
`0 <= AnyComparison`将始终评估为`True`

```
Select Case course 
    Case "Msc" 
        length = 36
    Case "Adv Dip" 
        length = 24
    Case "PG Cert" 
        length = 12
End Select 
```

和

```
Select Case (diff - lengthm)
    Case <0
        YearCalc = "Past"
    Case 0 to 11
        YearCalc = 1
    Case 12 to 23
        YearCalc = 2
    Case 24 to 35
        YearCalc = 3
    Case Else 
        YearCalc = "Course too long?"
End Select 
```

# google-maps - 我可以为自定义地图类型重置 latlng 坐标吗？

> ID：11192281
> 
> 赞同：1
> 
> 时间：2012-06-25T15:25:25.880
> 
> 标签：google-maps, google-maps-api-3

我使用 google maps api 制作了自己的地图。它是基于非常大的图像的自定义地图类型。

无论如何我可以重置纬度坐标，以便它们相对于我的图像而不是地球的默认纬度坐标？

IE 使图像的左上角 (0,0)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:17:53.200

是的，可以使用您自己的[自定义投影定义](https://developers.google.com/maps/documentation/javascript/maptypes#ProjectionImplemention)。我用一个简单的投影修改了这个[月球表面示例](https://developers.google.com/maps/documentation/javascript/maptypes#ImageMapTypes)，左上角为 (0,0)，右下角为 (50,50)。您很可能需要更改这些值才能使用您的应用程序。

我玩了一些限制，看起来仍然有一个硬限制 +/- 90 纬度和 +/- 180 经度。经度将以 180 度环绕。也就是说，似乎不可能定义自定义坐标，例如 (100, 200)。

在此处查看修改后的月球表面演示，单击任意位置以在警报中显示自定义 latLng：

[http://jsfiddle.net/yV6xv/79/](http://jsfiddle.net/yV6xv/79/)

```
function percentProjection() {};

percentProjection.prototype.fromLatLngToPoint = function(latlng) {
    // pixel size of tile at zoom 0
    var max = 256;

    // define bottom-right corner as (50, 50)
    var x = max * latlng.lng() / 50;
    var y = max * latlng.lat() / 50;
    return new google.maps.Point(x, y);
};

percentProjection.prototype.fromPointToLatLng = function(pixel) {
    // inverse conversion
    var max = 256;
    var lng = pixel.x / max * 50;
    var lat = pixel.y / max * 50;
    return new google.maps.LatLng(lat, lng);
}; 
```

# javascript - three.js - 使用 geometry.vertices 和 geometry.faces 从 .obj 文件创建网格

> ID：11192283
> 
> 赞同：0
> 
> 时间：2012-06-25T15:25:35.013
> 
> 标签：javascript, three.js

我正在尝试从 .obj 文件创建网格。我这样做而不是使用 obj 加载器，因为我需要使用不同的滑块来变形形状，选择特定的面/顶点并在顶点之间绘制路径。

我目前在尝试渲染场景时遇到错误，这似乎与 obj 文件中的人脸有关。当我手动输入面时，我可以毫无问题地创建一个三角形。

这是我的代码

```
 var camera, scene, renderer,
    geometry, material, mesh;

init();
animate();

function init() {

    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/img/originalMeanModel.obj', false);
    xhr.send(null);
    var text = xhr.responseText;
    var lines = text.split("\n");
    for (i=0; i<19343; i++){
      lines[i] = lines[i].split(" ");
    }

    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera( 1, window.innerWidth / window.innerHeight, 1, 2000 );
    camera.position.z = 20;
    scene.add( camera );

    var geometry = new THREE.Geometry()

  /* 
    geometry.vertices.push( new THREE.Vector3( -0.01,  0.01, 0 ) );
    geometry.vertices.push( new THREE.Vector3( -0.01, -0.01, 0 ) );
    geometry.vertices.push( new THREE.Vector3(  0.01, -0.01, 0 ) );
  */
    geometry.faces.push( new THREE.Face3( 0, 1, 2 ) );

    for(i=0; i<6449; i++){
      geometry.vertices.push( 
             new THREE.Vector3( 
              parseFloat(lines[i][1]),   
              parseFloat(lines[i][2]), 
              parseFloat(lines[i][3])) );
    }

    /*
    geometry.faces.push( new THREE.Face3( 0, 1, 2 ) );
    geometry.faces.push( new THREE.Face3( 600, 1, 3000 ) );
    geometry.faces.push( new THREE.Face3( 3000, 6400, 70 ) );
    */

    for(i=6449; i<19343; i++){
      geometry.faces.push( new THREE.Face3( parseInt(lines[i][1]), parseInt(lines[i][2]), parseInt(lines[i][3]) ) );
    }

    console.log(geometry.faces);
    console.log(geometry.vertices);

    material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: false } );
    mesh = new THREE.Mesh( geometry, material );
    scene.add( mesh );

    renderer = new THREE.CanvasRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );

    document.body.appendChild( renderer.domElement );
}

function animate() {
    // note: three.js includes requestAnimationFrame shim
    requestAnimationFrame( animate );
    render();
}

function render() {
    renderer.render( scene, camera );
} 
```

当我检查控制台时，面和顶点已按预期打印出来。我也有这个错误打印了 5700+ 次

```
Uncaught TypeError: Cannot read property 'visible' of undefined       Three.js:71
projectScene                                                          Three.js:71
render                                                               Three.js:245
render                                                          threeDemo.php:115
animate                                                         threeDemo.php:106 
```

三Demo.php:106 是animate函数的这一行

```
render(); 
```

三Demo.php:115是render函数的这一行

```
renderer.render( scene, camera ); 
```

这是我尝试为其创建网格的 obj 文件的链接。[https://dl.dropbox.com/u/23384412/originalMeanModel.obj](https://dl.dropbox.com/u/23384412/originalMeanModel.obj)

有没有人能指出我正确的方向，这将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:33:05.567

您可以使用两个`OBJLoaders`来加载每个框架几何图形。然后创建第三个`Geometry`并使用框架几何图形中的顶点作为参考创建线。

# r - 用概率间隔绘制离散预测 - ggplot2

> ID：11192288
> 
> 赞同：1
> 
> 时间：2012-06-25T15:25:47.773
> 
> 标签：r, ggplot2

我需要在 ggplot2 中绘制一些带有概率间隔的离散预测，但我遇到了一些问题。

我有以下data.frame

```
city    pred    min.80    max.80
BH      100     50        150
RJ      120     80        140
SP      90      80        100 
```

我想要一个 y 轴上的城市和 x 轴上的预测值的图。对于 y 的每个离散值，应该有一个水平条，其范围是 min.80 和 max.80 值。我的想法是使用`geom_rect`from`ggplot2`来做这件事。

我尝试了以下代码，但问题是我将离散变量转换为连续变量以绘制它，并且我在标签上丢失了它们的值。

```
> ggplot(df) + geom_rect(aes(xmin=min.80, xmax=max.80, ymin=as.numeric(city)-0.4,
+ ymax=as.numeric(city)+0.4)) 
```

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:32:42.463

我建议你使用 geom`pointrange`或`crossbar`：

```
ggplot(df, aes(x=city)) + 
  geom_pointrange(aes(ymin=min.80, ymax=max.80, y=pred)) +
  coord_flip() 
```

![在此处输入图像描述](../Images/1618cce3104b75b8fc8d4cac53f2ecad.png)

```
ggplot(df, aes(x=city)) + 
  geom_crossbar(aes(ymin=min.80, ymax=max.80, y=pred)) +
  coord_flip() 
```

![在此处输入图像描述](../Images/013169b6d66eac89f8c954d6f221f1b5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:36:08.523

我认为您希望将 y 轴作为一个因素 ( `y=city`)。这种（估计+间隔）数据可能最好用`geom_pointrange`. 毕竟，矩形的“高度”没有解释。

如果你必须让误差线是水平的，我之前已经通过两种方式做到了这一点：

1.  使用`coord_flip()`
2.  上次我尝试的时候，`coord_flip()`有点受限，所以我有时也`geom_pointrange()`通过结合`geom_hline()`.`geom_point()`

# jenkins - 为什么 Jenkins 中的 ClearCase UCM 插件无法找到任何基线？

> ID：11192289
> 
> 赞同：3
> 
> 时间：2012-06-25T15:25:52.803
> 
> 标签：jenkins, clearcase, clearcase-ucm, jenkins-plugins

我正在尝试设置 Jenkins (v1.47) 以使用[ClearCase UCM (v1.1.2) 插件](https://wiki.jenkins-ci.org/display/JENKINS/ClearCase+UCM+Plugin)构建项目。

使用以下配置（更改名称以保护无辜者）：

```
Stream: project_dev_build@\company_pvob<br/>
Component: project_tools@\company_pvob<br/>
Promotion level: INITIAL 
```

我得到以下输出：

```
[CCUCM] * Stream: project_dev_build@\company_pvob
[CCUCM] * Component: project_tools@\company_pvob
[CCUCM] * Promotion level: INITIAL
[CCUCM] Removed 45 of 45 Baselines.
[CCUCM] No valid baselines found 
```

我可以在我的 ClearCase 客户端中看到`INITIAL`，对于该流和组件，正好有 45 个基线，全部都在提升级别。
所以插件显然会找到然后丢弃它们。

但为什么？
本来以为最新的会被取走，怎么都被拒了？
我应该注意，如果我将配置从 " `INITIAL`" 更改为 " `ALL`" 没有区别，同样的事情也会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:07:15.320

该消息是由该[`net.praqma.hudson.scm.CCUCMScm#pollStream()`方法产生的](https://github.com/jenkinsci/clearcase-ucm-plugin/blob/master/src/main/java/net/praqma/hudson/scm/CCUCMScm.java#L572-599)

它调用[`filterBaselines()`](https://github.com/jenkinsci/clearcase-ucm-plugin/blob/master/src/main/java/net/praqma/hudson/scm/CCUCMScm.java#L1228-1242)删除了所有“ `deliver.xxx`”基线或未标记的基线。

```
private int filterBaselines( List<Baseline> baselines ) {

  int pruned = 0;

  /* Remove deliver baselines */
  Iterator<Baseline> it = baselines.iterator();
  while( it.hasNext() ) {
    Baseline baseline = it.next();
    if( baseline.getShortname().startsWith( "deliverbl." ) || baseline.getLabelStatus().equals( LabelStatus.UNLABLED ) ) {
      it.remove();
      pruned++;
    }
  }
  return pruned;
} 
```

如果您的所有基线都是由交付操作生成的，那就可以解释为什么插件会从可能的基线中删除它们以选择构建。

# php - 带有三叶草的 PHPUnit：找不到类 PHP_Token_OPEN_TAG

> ID：11192290
> 
> 赞同：1
> 
> 时间：2012-06-25T15:25:53.520
> 
> 标签：php, magento, phpunit

我正在运行 PHP 单元，如下所示：

```
phpunit --debug --verbose --coverage-clover=/tmp/test.xml 
```

并得到以下错误：

```
Fatal error: Class 'PHP_Token_OPEN_TAG' not found in /opt/pear/share/pear/PHP/Token/Stream.php on line 205 
```

堆栈跟踪导致

```
12\. PHP_Token_Stream->scan($sourceCode = '<?php\n/**\n...') /opt/pear/share/pear/PHP/Token/Stream.php:147 
```

源代码在语法上没问题。

此类已定义，`/opt/pear/share/pear/PHP/Token.php`但看起来无法找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:38:29.850

我将 spl_autoload_functions() 的输出转储到 Stream.php:147 中，发现有一些 Aitoc 自动加载器。

该问题是由 Aitoc Magento 扩展引起的。

他们有一个简单地取消注册所有自动加载器的功能。

```
$autoloaders = spl_autoload_functions();
if ($autoloaders and is_array($autoloaders) && !empty($autoloaders))
{
    foreach ($autoloaders as $autoloader)
    {
        spl_autoload_unregister($autoloader);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:08:30.530

似乎是版本控制/自动加载问题，因为令牌包或代码覆盖率包可能未正确安装/更新。

给

```
(sudo) pear install --force --alldeps phpunit/phpunit 
```

试一试。这通常可以解决那些“奇怪的错误”。

# r - 连续小波变换

> ID：11192291
> 
> 赞同：3
> 
> 时间：2012-06-25T15:25:56.900
> 
> 标签：r, wavelet, biwavelet

这个问题相当模糊，但有没有人在 R 中使用过 biwavelet 包并成功了？我有以下代码：

```
require(biwavelet)
t1 <- cbind(DecTime,Temp)    
## continuous wavelet transform
wt1 <- wt(t1)
plot(wt1) 
```

它返回错误：

*image.default(x$t, yvals, t(zvals), zlim = zlims, ylim = rev(range(yvals)), 中的错误：'x' 和 'y' 值必须是有限且非缺失的*

我不理解这个错误，因为我的数据不包含任何缺失值，而且它们都是有限的。

尝试重现示例时：

```
require(biwavelet)
Date = seq(from=as.POSIXct("2011-01-01 00:00"), 
           to=as.POSIXct("2011-12-31 23:00"), length=8760)
DecTime = julian(Date, Date[1])

data=cbind(as.numeric(DecTime), rnorm(8760))
## Continuous wavelet transform
wt.t1=wt(data)
plot(wt.t1) 
```

它很烦人，因此我不知道为什么我的数据在这个包中失败。上面示例中的数据与我的数据属于同一类，即“矩阵”。任何帮助或建议将不胜感激。

更改：

```
require(biwavelet)
Date = seq(from=as.POSIXct("2011-01-01 00:00"), 
           to=as.POSIXct("2011-12-31 23:00"), length=8760)
DecTime = julian(Date, Date[1])
D <- c(4.0267, 4.0211, 4.0005,4.0042,4.0042,4.0191)
data=cbind(as.numeric(DecTime[1:6]),as.numeric(D))
## Continuous wavelet transform
wt.t1=wt(data)
plot(wt.t1)

> data
           [,1]   [,2]
[1,] 0.00000000 4.0267
[2,] 0.04166667 4.0211
[3,] 0.08333333 4.0005
[4,] 0.12500000 4.0042
[5,] 0.16666667 4.0042
[6,] 0.20833333 4.0191
> class(data)
[1] "matrix"
> class(data[,1])
[1] "numeric"
> class(data[,2])
[1] "numeric"
> wt.t1=wt(data)
> plot(wt.t1)
Error in image.default(x$t, yvals, t(zvals), zlim = zlims, ylim = rev(range(yvals)),  : 
  invalid z limits 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:19:28.030

如果您错过了我对您其他帖子的回复，您会发现 wt.R 函数中的一个错误（错误的括号）。该错误已在 biwavelet 包的 0.12 版中被压缩，因此您的代码现在可以工作了。

感谢您发现错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:31:31.023

这是一个部分答案，我希望能有所启发。如果您从有效的示例中获取第一`N`行`data`，那么它会在`N < 2762`. 它在以下情况下起作用`N >= 2762`（也许这个阈值取决于`data`? 中的实际随机值）：

```
> wt.t1=wt(data[1:2762,])
> plot(wt.t1, plot.cb=T)
> wt.t1=wt(data[1:2761,])
> plot(wt.t1, plot.cb=T)
Error in image.default(x$t, yvals, t(zvals), zlim = zlims, ylim = rev(range(yvals)),  : 
  invalid z limits 
```

重要的部分似乎是所有的`wt.t1$power`值都小于 1，这弄乱了它计算`zlims`变量的方式。不过，我不知道是怎么回事`wt.t1$power`。

# iphone - NSString 的奇怪行为

> ID：11192299
> 
> 赞同：0
> 
> 时间：2012-06-25T15:26:19.677
> 
> 标签：iphone, ios

我有一个`NSString`将作为参数传递给我的库函数的，`NSString`它由另一个库传递。奇怪的是，如果我将 to 传递`NSString`给库调用，调用将失败，但如果我将`NSString`to`int`然后转换`int`回 a `NSString`，一切都很好。

但是通过使用 打印出来`NSLog("%@")`，这两个字符串是相同的。什么可能导致这种情况？编码？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T15:31:35.250

当你

> 将 NSString 转换为 int，然后将 int 转换回 NSString

您基本上是在创建与原始字符串无关的字符串副本。

知道如何创建两个字符串以了解究竟发生了什么会很有趣。我的猜测是第一个被释放得太快，所以调用失败；副本被保留并且调用成功。

只是为了快速尝试：

调用失败的函数时：

```
[self doMethodWithString:aString]; 
```

做就是了：

```
[aString retain];
[self doMethodWithString:aString]; 
```

如果这可行，则内存管理问题得到确认，但对于真正的修复，您应该解释如何创建字符串......

# sql-server - 通过在插入语句中包含具有默认值的列是否有任何性能提升？

> ID：11192303
> 
> 赞同：3
> 
> 时间：2012-06-25T15:26:26.717
> 
> 标签：sql-server

如果我有一张像

```
CREATE TABLE [FooTable](
[foo] [varchar](50) NOT NULL,
[foo_boo] [bit] NOT NULL DEFAULT ((0)),
[foo_date] [datetime] NOT NULL DEFAULT (getdate())
) 
```

包括插入的默认值是否有任何性能提升，像这样

```
INSERT INTO [FooTable]
([foo],[foo_boo],[foo_date])
VALUES
('FooBar', 0, GETDATE()) 
```

让默认值做他们的事

```
INSERT INTO [FooTable] ([foo])
VALUES ('FooCooYoo') 
```

我认为它可以忽略不计，但只是想知道。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:29:17.793

没什么值得一提的。

此外，本着 DRY（不要重复自己）的精神，我还要说这是不好的做法。2 年后，您（或接替您的人）会摸不着头脑，想知道为什么更改列的默认值并没有更改插入的值。

# mysql - Mysql：将多个整数字段组合成一个字符串字段？

> ID：11192304
> 
> 赞同：3
> 
> 时间：2012-06-25T15:26:27.603
> 
> 标签：mysql, performance

假设我有一个包含数百万行的表，其中有 3 个整数变量：x、y 和 z，我在 SELECT 中对其进行搜索... WHERE x=a and y=b and z=c

哪个会更快/更高效？

*   将 3 个字段组合成一个单独的字符串列“x_y_z”（例如 1231_3242_6864）并为其编制索引

*   针对三个整数创建一个 3 列索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:36:08.360

不，这将是最糟糕的，字符串比较要慢得多。您最终可以（如果真的需要，我不会推荐它）将 3 个整数组合成一个整数，但前提是它们*FIT*。

但是，要解决您的索引，最简单的问题是在 x、y 和 z 上创建*复合索引。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:07:07.237

如果您可以有覆盖索引，并且始终提供所有三个数字，因此不必担心索引中的顺序（注意这也是字符串化版本中的一个问题），我会使用三个整数的复合索引。

这三个整数将占用更少的空间，使每页可以容纳更多的行，这通常会使索引在读取时更有效率。与 99999 的 5 字节字符串（+/- ~2^31 的 4 字节）相比，您在该整数中还有更多的空间。

在数据库查询中很难判断效率的大小，但请记住，您还必须组装和填充这些。不确定您计划在 MySQL 中如何或在何处执行此操作 - SQL Server 已持久化计算列，如果您要提交字符串版本，这可能是一个不错的设计选择。

当然，人们不想在执行连接之前将整数转换为字符串并在运行中将它们连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:47:51.717

还有一些与当前讨论相关的其他问题：

[索引性能 BigInt 与 VarChar](https://stackoverflow.com/questions/1603472/indexing-performance-bigint-vs-varchar)

[INT 和 VARCHAR 主键之间是否存在真正的性能差异？](https://stackoverflow.com/questions/332300/is-there-a-real-performance-difference-between-int-and-varchar-primary-keys)

[什么时候应该使用复合索引？](https://stackoverflow.com/questions/1823685/when-should-i-use-a-composite-index)

从关于复合索引的问题来看，[其中一个答案](https://stackoverflow.com/a/8622565/1335244)似乎表明，如果您的 x、y 和 z 在它们之间往往是唯一的（即大多数 x 值彼此不同，依此类推），您将不会无论如何都会得到很大的性能提升。但如果他们这样做了，综合指数似乎是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:09:16.707

我认为您确实需要自己对其进行基准测试（肯定还有其他因素会决定您对特定数据的特定查询的性能），但除了使用@mb14 提出的复合 3 列索引的想法之外。你可以试试这个：

在您的表上创建一个新列，如下所示：

```
xyzcomposite BINARY(16) 
```

然后，在此列上创建索引。

在插入时，您需要执行一个额外的步骤来连接到您的字符串“x_y_z”，然后像这样插入：

```
INSERT INTO yourtable (...,xyzcomposite) VALUES (...,UNHEX(MD5('the_xyz_concat'))); 
```

当然，您还需要在您的 select 语句之前运行散列算法。

```
set @xyz = UNHEX(MD5('x_y_z'));
select * from yourtable where xyzcomposite = @xyz 
```

我不确定这种开销的总和是否值得您在只索引这一列而不是三列索引时看到的性能提升。就像我说的那样，您必须根据您的表格和数据对其进行基准测试。

编辑：这种方法的优点是它适用于任何大小的 x、y 和 z 数字。

# android - Android：使用进度对话框阻止 RPC

> ID：11192305
> 
> 赞同：0
> 
> 时间：2012-06-25T15:26:40.747
> 
> 标签：android, multithreading, rpc

我有一个 Android 应用程序，它使用 RPC 机制来设置/从服务器获取信息。我从主线程（阻塞）中调用 RPC，我希望它们被阻塞。但是，有时通话可能会持续几秒钟，我想在指定时间（例如 1 秒）后显示一个不确定的进度对话框。

我试图生成一个新线程来进行调用，并且主线程在循环中等待（带有睡眠），直到调用完成。在这个循环中，我显示了进度对话框，但这不起作用。

是否可以在另一个线程中显示和更新进度对话框，或者有人知道允许我使用阻塞调用的更好解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:32:40.793

尝试使用`AsyncTask`. 它是一种用于进行此类网络调用的 android 机制。在此处获取简要说明`AsyncTask`：

[尝试 SSH 到服务器时使用 AsynTask 显示进度条](https://stackoverflow.com/questions/11175272/using-asyntask-to-show-progress-bar-while-attempting-to-ssh-to-server/11175715#comment14675001_11175715)

使用 a`AsyncTask`您可以阻止用户继续前进。您必须`progress dialog`在`onPreExecute()`. `AsyncTask`您所有与网络相关的活动都将在`doInBackground()`. 后台操作完成后，将调用`onPostExecute()`将`progress dialog`被解雇的位置。

`AsyncTask`是一个异步调用，因为您有 2 个线程同时工作，一个是显示进度对话框的 UI 线程，另一个是从服务器获取数据的非 UI 后台线程。

希望这个解释有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:38:07.663

你不能同时做这两个，让主线程在一个循环中等待并显示一个进度对话框。主线程等待或显示对话框。

为什么要阻塞主线程？互联网上的通信应始终在后台线程中完成，因为您永远不知道完成需要多长时间。做这些事情`AsyncTask`并在 main.js 中显示进度对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:00:46.237

我找到了一个似乎可行的解决方案（至少我还没有注意到任何问题）。我知道正确的方法是使用 AsyncTask 之类的东西，但就我而言，我没有从中受益，而且它使程序逻辑复杂化。

要在新线程中更新 UI：

```
 new Thread() 
    {
        public void run()
        {
            Looper.prepare();
            ... do UI stuff here
            Looper.loop();
        }
    }.start(); 
```

# java - Spring / JSP 和 Servlets - 高级访问控制

> ID：11192314
> 
> 赞同：1
> 
> 时间：2012-06-25T15:27:28.890
> 
> 标签：java, spring, google-app-engine, jsp, access-control

我有一个页面列表，round1.jsp、round2.jsp、round3.jsp 等。

我想建立一个控制面板，管理员可以在其中检查可用回合列表，然后用户才能访问它们。

完成这项工作的最佳方法是什么？

我在 GAE 上进行部署，将这些数据保存在数据存储中是否足够？如果是，我需要定义什么样的实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:15:46.940

我认为最好的方法是使用弹簧安全性。因为它为您提供基于角色和基于 URL 的身份验证。

# c++ - 在 Qt / C++ 中使用 QWebkit POST 请求

> ID：11192315
> 
> 赞同：0
> 
> 时间：2012-06-25T15:27:32.457
> 
> 标签：c++, qt, post, web-scraping, qwebkit

我想自动化在网络上填写表格、发送请求以及一遍又一遍地处理结果页面（使用不同的输入）的过程。

我可以使用 QWebPage / connect 访问页面（使用等待 loadFinished 信号的方法）。我可以使用 QWebPage、QWebElement 的 firstChild、nextSibling 和 setPlainText 方法遍历字段并填写值。

但是，对于如何提交信息和检索对发布请求的响应，我有点困惑。从在线教程看来，我可以使用 evaluateJavaScript() 单击提交按钮，但我看不到如何获取/刷新发布提交后产生的页面。（注意内容类型是 multipart/form-data，post 请求被发送到一个 php 脚本）。看起来使用 QNetworkRequest 类可能具有执行此操作的功能，但我不清楚如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:32:00.777

似乎向`QNetworkAccessManager`适当的 URL 发送 POST 可能会为您完成此操作。您需要将内容作为`QByteArray`或发送`QIODevice`。

另外，看看[这个 Stack Overflow 帖子](https://stackoverflow.com/questions/2599423/how-can-i-post-data-to-a-url-using-qnetworkaccessmanager)，作为一个潜在的例子。

# java - 是否有用于计算经过时间的 Java 库？

> ID：11192316
> 
> 赞同：0
> 
> 时间：2012-06-25T15:27:39.620
> 
> 标签：java, time

我想知道是否有一个可以用来计算经过时间的库？类似于...如果您将其传递`long`几毫秒，您会得到类似“2d 5h 12m 55s”的结果（可能甚至更多类似于 的格式`SimpleDateFormatter`）。

我听说过jodatime，但我从未使用过它。它可以用于这样的计算，还是有其他更合适的库？

这并不是说我自己不能敲出一些方法，但我发现自己时不时地这样做，这就是为什么我想知道这样的东西是否已经存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:29:29.103

使用[Joda time](http://joda-time.sourceforge.net/)的[Period](http://joda-time.sourceforge.net/api-release/org/joda/time/Period.html) & [PeriodFormatter](http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormatter.html)。[例子](https://stackoverflow.com/questions/2179644/how-to-calculate-elapsed-time-from-now-with-joda-time)。

# android - 通过 Comparator 从一个排序后的 Array 中获取第一个 id

> ID：11192324
> 
> 赞同：0
> 
> 时间：2012-06-25T15:27:48.873
> 
> 标签：android

我使用以下方法对 sqlite 数据库中的数组进行排序：

```
public void sortNearby(final double lat, final double lng) {
        Arrays.sort(videoLocationsDB, new Comparator<VideoLocationDB>() {

            @Override
            public int compare(VideoLocationDB lhs, VideoLocationDB rhs) {

                double lat1 = lhs.latitude;
                double lng1 = lhs.longitude;

                double lat2 = rhs.latitude;
                double lng2 = rhs.longitude;

                double lhsDistance = countDistance(lat, lng, lat1, lng1);
                double rhsDistance = countDistance(lat, lng, lat2, lng2);
                if (lhsDistance < rhsDistance)
                    return -1;
                else if (lhsDistance > rhsDistance)
                    return 1;
                else
                    return 0;
            }
        });
        videoLocationAdapter.notifyDataSetChanged();
    } 
```

如何从排序数组中获取第一个对象的 ID？例如我需要获取`VideoLocationDB.id`第一个对象

# r - data.table 1.8.1.：“DT1 = DT2”与 DT1 = copy(DT2) 不一样？

> ID：11192325
> 
> 赞同：6
> 
> 时间：2012-06-25T15:27:54.333
> 
> 标签：r, data.table

在使用不同的赋值运算符时，我注意到 data.table 中存在一些不一致（对我来说不一致）的行为。我不得不承认我从来没有完全理解“=”和 copy() 之间的区别，所以也许我们可以在这里阐明一下。如果您在下面使用“=”或“<-”而不是 copy()，则在更改复制的 data.table 时，原始 data.table 也会更改。

请执行以下命令，你会明白我的意思

```
library(data.table)
example(data.table)

DT
   x y  v
1: a 1 42
2: a 3 42
3: a 6 42
4: b 1  4
5: b 3  5
6: b 6  6
7: c 1  7
8: c 3  8
9: c 6  9

DT2 = DT 
```

现在我将更改 DT2 的 v 列：

```
DT2[ ,v:=3L]
   x y  v
1: a 1  3
2: a 3  3
3: a 6  3
4: b 1  3
5: b 3  3
6: b 6  3
7: c 1  3
8: c 3  3
9: c 6  3 
```

但看看 DT 发生了什么：

```
DT
   x y  v
1: a 1  3
2: a 3  3
3: a 6  3
4: b 1  3
5: b 3  3
6: b 6  3
7: c 1  3
8: c 3  3
9: c 6  3 
```

它也改变了。所以：改变DT2改变了原来的DT。如果我使用 copy() 则不是这样：

```
example(data.table)  # reset DT
DT3 <- copy(DT)
DT3[, v:= 3L]
   x y  v
1: a 1  3
2: a 3  3
3: a 6  3
4: b 1  3
5: b 3  3
6: b 6  3
7: c 1  3
8: c 3  3
9: c 6  3

DT
   x y  v
1: a 1 42
2: a 3 42
3: a 6 42
4: b 1  4
5: b 3  5
6: b 6  6
7: c 1  7
8: c 3  8
9: c 6  9 
```

这种行为是预期的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T15:35:32.230

是的。这是预期的行为，并且有据可查。

由于`data.table`使用对原始对象的引用来实现就地修改，因此速度非常快。

出于这个原因，如果你**真的**想复制数据，你需要使用`copy(DT)`

* * *

从文档中`?copy`：

> data.table 通过引用修改，并返回（不可见），因此可以在复合语句中使用；例如，`setkey(DT,a)[J("foo")]`。如果您需要一份副本，请先复制一份（使用`DT2=copy(DT)`）。在用于通过引用对列进行子分配`copy()` 之前有时也可能很有用。`:=`见`?copy`。

另请参阅此问题： [准确了解 data.table 何时是对另一个副本的引用](https://stackoverflow.com/questions/10225098/understanding-exactly-when-a-data-table-is-a-reference-to-vs-a-copy-of-another)

# asp.net - 我如何回发？

> ID：11192326
> 
> 赞同：0
> 
> 时间：2012-06-25T15:27:55.347
> 
> 标签：asp.net, postback, webforms, buttonclick

我有这个 Web 应用程序，它应该在单击按钮时上下移动行，但只有当我关闭网页并从 Visual Studio 重新运行我的程序时才会这样做。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Page.IsPostBack)
    {
        DataView view = (DataView)SqlDataSource1.Select(
                               DataSourceSelectArguments.Empty);
        DataTable result = view.ToTable();
    }         
} 
```

这就是我所需要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:57:53.940

您可以使用 CommandName 来触发按钮单击的功能。

示例：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:22:54.943

您还可以删除 if 回发，这也可以，但不是推荐的解决方案

```
protected void Page_Load(object sender, EventArgs e)
{
        DataView view = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
        DataTable result = view.ToTable();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:33:11.570

您需要使用按钮单击事件。您的逻辑当前在页面加载事件中，这就是为什么它只触发一次

# ms-access - 在 Access VBA 中浏览表记录

> ID：11192331
> 
> 赞同：0
> 
> 时间：2012-06-25T15:28:00.360
> 
> 标签：ms-access, vba

我有一个包含两列（value1 和 value2）的表，这些值从最低到最高排序。例子：

```
Value1
20
40
43
90
100
122

Value2
4
5
9
10
15
18 
```

我要求用户输入一个输入值，然后我计算 CalcFinalValue 的值，该值可以通过以下方式之一计算：

1.  如果用户输入的值已经存在于 value1 字段中，则返回字段 value2 中对应的值。例如，如果用户输入为 100，则 CalcFinalValue 将为 15

2.  如果 value1 字段中不存在用户输入值，则在 value1 字段中定位输入值在它们之间的两个值（例如，如果输入值为 42，我想从 value1 字段中定位 40 和 43）。计算 CalcFinalValue 为：CalcFinalValue=(40*9)+(43*5)/42

换句话说，公式将为：CalcFinalValue=（中间值的LowerValue *中间值的HigherValue的查找值）+（中间值的HigherValue *中间值的LowerValue的查找值）/（用户输入值）我想在 Access 2007 VBA 中执行此操作。

我希望这很清楚。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:05:59.737

```
Dim rs AS DAO.Recordset
Set rs = CurrentDb.OpenRecordset("TableName", dbOpenTable)

' inp stores the user input value; i counts the number of records that have been accessed
Dim inp, i as Integer
' r2c1 and r2c2 store the data of the second row in case the two-row calculation is needed 
Dim r2c1, r2c2 as integer

' Since I mostly use forms for I/O that's what I've used here
'   Change this to whatever method you use to get the user input
inp = Forms!FormName.InputTextBoxName.Value
i = 0
rs.MoveFirst
Do While (Not rs.EOF)
    i = i + 1
    ' Check if the user input exists in the table
    If (rs.Fields("Value1") = inp) Then
        ' Again use whatever output method you want
        Set Forms!FormName.OutputTextBoxName.Value = rs.Fields("Value1")
        End Do
    ' Otherwise, check if the current value in column 1 is greater than the input
    Else If (rs.Fields("Value1") > inp) Then
        ' If this is true for the first row then the input is less than the lowest number.
        ' I assume this is out-of-bounds, but use whatever boundary condition you want
        If (i = 1) Then
            MsgBox("Out of Bounds", vbOkOnly)
        Else 
            ' Save the required values from this row
            r2c2 = rs.Fields("Value2")
            r2c1 = rs.Fields("Value1")
            ' Goto previous row which and calculate according to your formula
            rs.MoveLast
            Set Forms!FormName.OutputTextBoxName.Value = (r2c1*r2c2 + rs.Fields("Value1")*rs.Fields("Value2"))/inp
        End If 
    End If 
    rs.MoveNext
Loop
' If nothing was found, the input was larger than all values in 'Value1'
If (rs.EOF) Then
    MsgBox("Out of Bounds", vbOkOnly)
End If 
```

用您使用的任何列名替换 Value1 和 Value2

# php - PHP 保护的文件访问

> ID：11192334
> 
> 赞同：0
> 
> 时间：2012-06-25T15:28:24.170
> 
> 标签：php, protected, file-access

我几乎逐字逐句地使用 Martin Barker 的代码/答案（[PHP 来保护 PDF 和 DOC](https://stackoverflow.com/questions/7427457/php-to-protect-pdfs-and-docs)），唯一的区别是我要保护的文件位于 public_html 文件夹上方的用户文件夹中

文件夹结构

```
/users/websupport
/public_html 
```

要下载的文件位于：

```
/users/websupport/FileToDownload.pdf 
```

download.php 文件位于

```
/public_html/download.php 
```

但 Firefox 告诉我它无法在 Firefox 中找到该文件在 download.php 中找不到该文件。

我已经通过 ftp 验证了该文件是否存在。

如果将文件放在 webroot 之外，我是否需要在站点 .htaccess 中添加一些内容？只是不确定我哪里出错了。以下是 download.php 中的代码

```
//check users is loged in and valid for download if not redirect them out
// YOU NEED TO ADD CODE HERE FOR THAT CHECK
// array of support file types for download script and there mimetype
$mimeTypes = array(
    'doc' => 'application/msword',
    'pdf' => 'application/pdf',
);
// set the file here (best of using a $_GET[])
$file = "../users/websupport/2011cv.pdf";

// gets the extension of the file to be loaded for searching array above
$ext = explode('.', $file);
$ext = end($ext);

// gets the file name to send to the browser to force download of file
$fileName = explode("/", $file);
$fileName = end($fileName);

// opens the file for reading and sends headers to browser
$fp = fopen($file,"r") ;
header("Content-Type: ".$mimeTypes[$ext]);
header('Content-Disposition: attachment; filename="'.$fileName.'"');

// reads file and send the raw code to browser
while (! feof($fp)) {
    $buff = fread($fp,4096);
    echo $buff;
}
// closes file after whe have finished reading it
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:52:04.770

确保您的 php 脚本运行的用户具有对该目录的读取权限。

在大多数 debian 衍生产品中嵌入 apache 的 php 上，用户将是“www-data”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-05T15:49:01.487

我最近遇到了同样的问题，readfile() 和 fpassthru() 在我的服务器上不起作用。

我最终做的是根据需要为文件创建符号链接并将它们传递给用户。[您可以在此处](https://kb.iu.edu/d/abbe)了解如何创建符号链接。

我用了

`exec("ln -s source_file_full_path full_path_to_fake_file");`

如果您希望您的用户拥有像“ [http://somesite.com/folder/fake_file.pdf](http://somesite.com/folder/fake_file.pdf) ”这样的链接，那么完整路径将是“文件夹”在您的服务器上的位置，并且您将在其中包含“fake_file.pdf”你的假文件路径。

然后为了使链接失效，我再次调用以查找创建日期早于 x 分钟的所有符号链接。[您可以在这个答案](https://unix.stackexchange.com/a/155185)中看到如何做到这一点。（这可能是一项 cron 作业，以确保它们按时到期。）

# php - 如何在 PHP 中的字符串中找到字符串？

> ID：11192339
> 
> 赞同：0
> 
> 时间：2012-06-25T15:28:48.210
> 
> 标签：php, regex, string, find

我知道如何从另一个字符串中获取一个字符串，但前提是它介于事物之间。（使用 PHP）

我有一个这样的字符串：

```
a|1904|103489|0234908| 
```

数字变了。

我需要得到`103489`

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:30:31.303

使用[`explode()`](http://php.net/manual/en/function.explode.php)它将通过分隔符拆分字符串。

```
$a = 'a|1904|103489|0234908|';
$parts = explode('|',$a);
echo $parts[2]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:31:10.380

```
$string = 'a|1904|103489|0234908|';
$ret = explode('|', $string); 
```

如果您每次都需要第三个元素，那么

```
echo $ret[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:31:22.240

```
$pos = strpos($mystring, '|' . $findme . '|');

if ($pos !== false) {
    // Not found
} 
```

直接取自手册：

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

请记住检查类型，因为如果在要搜索的字符串的开头找到要搜索的字符串，strpos() 将返回 0。这当然等同于错误，会让你头疼:)

# c# - 如何使用不同的用户运行 GUI 程序

> ID：11192353
> 
> 赞同：1
> 
> 时间：2012-06-25T15:29:51.337
> 
> 标签：c#, process

我在 Windows 2008 上有三个帐户：Admin、User1、User2、User3。我想在这些 User1、User2、User3 帐户上使用 c# 从管理员帐户运行 GUI 程序。问题在于，在使用`Process.Start`User1 或任何其他用户凭据时，GUI 应用程序会在管理员用户桌面上启动。我想在 User1 桌面上运行程序。我想像我们手动一样模拟行为：切换用户，使用 User1 登录，运行 GUI 程序。有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:34:43.673

如果这就是您的意思，您应该能够使用不同的用户凭据运行该程序。

```
var processInfo = new ProcessStartInfo  
{  
    FileName = "app.exe",  
    UserName = "Username",  
    Domain = "yourdomain or leave blank",  
    Password = "password",  
    UseShellExecute = false, 
};  
Process.Start(processInfo); 
```

# jquery - jquery过滤具有“已选择”属性的选项

> ID：11192354
> 
> 赞同：1
> 
> 时间：2012-06-25T15:29:54.127
> 
> 标签：jquery, filter, selected

我尝试使用`.filter('[selected]')`但它不起作用：

```
> options
[
<option label value data-parent=​"VUT" style=​"display:​ inline;​ ">​&lt;/option>​
, 
<option label=​"Fakulta architektury" value=​"architektury" data-parent=​"VUT" style=​"display:​ inline;​ ">​Fakulta architektury​&lt;/option>​
, 
<option label=​"Fakulta elektrotechniky" value=​"elektrotechniky" selected=​"selected" data-parent=​"VUT" style=​"display:​ inline;​ ">​Fakulta elektrotechniky</option>​
]

> options.filter('[selected]')
[
<option label value data-parent=​"VUT" style=​"display:​ inline;​ ">​&lt;/option>​
] 
```

如何获得具有“选定”属性的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:31:09.360

使用[:selected](http://api.jquery.com/selected-selector/)选择器

```
options.filter(':selected'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:31:11.717

您想使用 filter: 的反面`.not('[selected]')`。我假设你**不**希望那些`selected`通过“过滤掉”的人。

并且以防万一它不是拼写错误，`.filter('[selected'])`仅仅因为它包含语法错误而不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:32:47.570

```
var opts = $('select option').filter(function() {
    return this.selected;
}); 
```

**[演示](http://jsfiddle.net/6FMZY/456/)**

**或者**

```
var opts = $('select option[selected]'); 
```

**[演示](http://jsfiddle.net/6FMZY/458/)**

# java - 在我的应用程序中集成 ZXing 时出现运行时错误

> ID：11192360
> 
> 赞同：-1
> 
> 时间：2012-06-25T15:30:16.030
> 
> 标签：java, android, runtime-error, zxing

我遵循了[Javier Manzano](http://www.jmanzano.es/blog/?p=244&lang=en)的教程，介绍了如何在我的应用程序上集成 ZXing 而不会传递意图。我的应用程序没有错误，除了当我按下“start zxing Activity”时应用程序崩溃，它最终显示许多运行时错误：http: [//j.mp/MThYu4](http://j.mp/MThYu4)

如果有人可以在这里帮助我，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:41:14.903

似乎找不到 Activity 类。它在你的类路径中吗？

# iphone - 在后台运行的 AS3 iPhone 应用程序

> ID：11192369
> 
> 赞同：0
> 
> 时间：2012-06-25T15:30:38.303
> 
> 标签：iphone, actionscript-3, background

我正在使用 Actionscript 3.0 开发一个 iPhone 应用程序。一旦您在某些坐标内，它就会使用 GPS 发送电子邮件。目前，该应用程序在退出时会自动暂停，因此不会监听任何地理位置变化，除非打开，否则不会执行此工作。

有什么方法可以在后台运行应用程序，或者实际上不打开？

希望有人可以帮助，干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:40:49.317

查看[http://blogs.adobe.com/airodynamics/2012/05/04/air-ios-background-behavior/](http://blogs.adobe.com/airodynamics/2012/05/04/air-ios-background-behavior/)

只要您正确设置应用程序描述符，您就可以在后台监听位置更新。

如果要发送电子邮件，您还必须在应用程序描述符中启用后台任务完成。

# jquery - 基于图像位置的视差效果

> ID：11192370
> 
> 赞同：0
> 
> 时间：2012-06-25T15:30:38.770
> 
> 标签：jquery, html, css, parallax

我仍在为基于 3 个级别的客户开发视差网站。我遇到了一个问题，使我无法添加到第三个顶层。

该站点本身具有以一种速度滚动的全屏背景。它是一个非常长的垂直图像，滚动缓慢。最重要的是以标准速度滚动的内容。

第三层是简单的位置：位于某些内容区域之上的绝对图形。基本上是浮动图像。

我遇到的问题是，对于我尝试过的大多数视差插件，浮动的第三级图像没有任何东西可以消失。这意味着虽然我可以在更改后立即根据屏幕尺寸设置它们，但我看到它消失在一条看不见的线后面。

我可以使用任何插件或方法来阻止这种情况发生吗？所以本质上我想设置图像所在的位置，如果视差效果不起作用，并且它围绕该点产生视差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:57:41.443

如果您可以让它在屏幕尺寸上工作，只需使用 jquery 根据屏幕尺寸获取和设置对象位置，

```
jQuery(document).ready(function($) {

    jQuery.event.add(window, "load", resizeFrame);
    jQuery.event.add(window, "resize", resizeFrame);

    function resizeFrame() 

    {
        var h = $(window).height();

        $('#foo1') .css({'top': (h-30)});
        $('#foo2') .css({'left': (h-67)});

    }
}); 
```

例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:18:51.677

您需要基于纯 jquery/javascript 编写自己的代码。

插件是为简单的操作而创建的。需要根据当前创建 JS 应用`$(document).scrollTop()`

主要代码模式将是：

```
$(window).on('scroll resize',function(){
  var Top = $(document).scrollTop();
  if(Top < 200){ /*slide1 actions*/ }
  else if(Top >= 200 && Top < 400){ /*slide2 actions*/ }
  else if(Top >= 400 && Top < 600){ /*slide3 actions*/ }
  // etc
}); 
```

也使用此技巧[https://stackoverflow.com/a/11709360/1136141](https://stackoverflow.com/a/11709360/1136141)以获得更高的性能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:28:03.160

> 我遇到的问题是，对于我尝试过的大多数视差插件，浮动的第三级图像没有任何东西可以消失。

您确实希望第三级图像在某些点消失的问题吗？我有一个类似的问题，有一个长的单一滚动背景，然后在上面构建了一个没有背景的 div 页面，然后将图像放在页面上下的各种 div 中，并将 div`overflow`设置为`hidden`. 为更容易放置第三级图像而设计，也意味着您可以将它们隐藏在特定点。

# c++ - C++ 持久化数据

> ID：11192376
> 
> 赞同：6
> 
> 时间：2012-06-25T15:31:01.357
> 
> 标签：c++, templates

我要归档的是一种使某些变量持久化的简单方法。为此，我编写了一个 PeristenceProvider 类，它包装了 boost 属性树功能以将数据存储在 xml / ini 文件中。

目前我需要做这样的事情：

```
ClassA::ClassA()
{
   m_valueI = PersistenceProvider::getInstance.get<int>("valueI");
}

ClassA::~ClassA()
{
    PeristenceProvider::getInstance.set<int>("valueI", m_valueI);
} 
```

但是有没有机会以这样的方式隐藏它：

```
class ClassA
{
     Persist<int, "valueI"> m_ValueI;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:50:37.770

这是可能的，但不完全是这样。您不能使用字符串文字来实例化模板。具有外部链接的字符串对象只允许是非类型参数。所以字符串常量必须定义为`extern`and be `char[]`，而不仅仅是`char*`.

看例子（它会打印“Hello”和“World”，真的很酷，不是吗？）：

```
extern const char hello[] = "Hello";
extern const char world[] = "World";

template<const char* s> struct X
{
   X()
   {
      std::cout << s << std::endl;
   }
};

X<hello> z1;
X<world> z2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:37:11.700

听起来您并没有保留大量信息 - 只是一些选择参数。如果是这样，那么只需将函数调用包装在您自己的带有两个参数的函数中 - std::string 或 const char * 以及被持久化的项目的类型。如果持久化的类型数量有限（例如 int、double、std::string），这将正常工作。

# .net - CLR 在哪里以及如何为 JITted 代码分配内存？

> ID：11192378
> 
> 赞同：0
> 
> 时间：2012-06-25T15:31:02.630
> 
> 标签：.net, memory-management, clr, jit

CLR 在哪里以及如何为 JITted 代码分配内存。

数据/代码部分，HeapAlloc/VirtualAlloc/其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:41:49.640

CLR 为 jit 代码以及特定于类型和静态对象的各种其他信息位维护单独的堆。它们的通用术语是“加载程序堆”，它与 AppDomain 相关联。这是卸载 AppDomain 时程序集、类型、jitted 代码和静态消失的基本机制。

loader heaps进一步细分为高频、低频和stub heap。[本文](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S5)提供了一些背景信息。

# header - 在 Mac OSX 上“安装”CoreAudio 头文件

> ID：11192383
> 
> 赞同：2
> 
> 时间：2012-06-25T15:31:19.143
> 
> 标签：header, installation, core-audio

我已经在这几天了，我可以肯定地说我很难过，我自己还没有取得进展。我正在尝试编译 XCode 文档 (SinSynth) 中包含的项目，但每次我尝试构建它时，都会因缺少头文件的错误而出错。“好吧，”我热情地想，“深吸一口气，让我们以此为契机，更好地学习 XCode。”

我查看了编译器告诉我它正在寻找头文件的路径，添加它们，然后收到更多警告，因为文件需要在同一文件夹中相互引用（这些文件不是丢失的头文件 - 它们是其他文件包括有定义和看起来像样板代码的东西）。在这一点上，我对为什么一开始没有安装标头有点困惑。我卸载并重新安装了 XCode，但仍然有同样的错误。

我的问题是，我需要将 Audio Tools for Mac 下载中包含的头文件和 cpp 文件放在哪里？这是我第一次不得不打开 XCode 并添加内容，到目前为止，我还没有找到适合新手的教程来帮助我解决这个问题。说白了，我就糊涂了！我应该怎么办？

# facebook - Open Graph 对象上的总点赞数

> ID：11192389
> 
> 赞同：1
> 
> 时间：2012-06-25T15:31:36.327
> 
> 标签：facebook, api, facebook-like, facebook-opengraph

有没有办法得到一个对象在开放图中被点赞的总次数？

我指的是新的 Like 动作：http: [//developers.facebook.com/docs/opengraph/actions/builtin/likes/](http://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:42:44.313

新的内置 Like 与普通 Like 的操作相同。您以相同的方式查询它们。

您可以查询 Graph API：

[http://developers.facebook.com/tools/explorer?method=GET&path=%3Fids%3Dhttp%3A%2F%2Fwww.yourpage.com](http://developers.facebook.com/tools/explorer?method=GET&path=?ids%3Dhttp%3A%2F%2Fwww.yourpage.com)

或者，您可以执行 FQL 查询：

```
SELECT url, id, type, site FROM object_url WHERE url = "http://www.yourpage.com" 
```

**笔记：**

*   被喜欢的对象需要对应于具有 Open Graph 元标记的页面。
*   [请注意此线程](https://stackoverflow.com/questions/5699270/how-to-get-share-counts-using-graph-api)中讨论的“Like_Count”、“Share_Count”和“Total_Count”之间的区别。

# asp.net - 中继器控制问题

> ID：11192391
> 
> 赞同：1
> 
> 时间：2012-06-25T15:31:42.473
> 
> 标签：asp.net, vb.net

我在理解中继器应该如何工作以及应该如何使用它们时遇到了很多麻烦。基本上，我在转发器中有一个标签、一组图像按钮和一个 div。当您单击按钮时，我想填充使用这些中继器创建的 div（因此中继器的每次迭代都有不同的 div）。

看起来很简单，但我什么也做不了。请帮我！

如果有帮助，这是我的一些代码。

（我的数据源）

```
<asp:sqldatasource runat="server" id="dtsSpecialNotes" connectionstring="connection string" providername="System.Data.SqlClient"> /asp:sqldatasource 
```

（我的中继器）

```
<asp:Repeater id="rptSpecialNotes" runat="server">
    <HeaderTemplate>
    </HeaderTemplate>
    <ItemTemplate>
    </ItemTemplate>
</asp:Repeater> 
```

（后面有一些代码，我有一种方法来填充页面加载时调用的转发器）

```
rptSpecialNotes.DataSource = dtsSpecialNotes
rptSpecialNotes.DataBind()

Dim imbMotion As New ImageButton 
Dim imbAttachments As New ImageButton

imbMotion.ImageUrl = "images/controls/Exclaim.png" 
imbMotion.Width = "40"  
imbMotion.Height = "40" 
imbMotion.AlternateText = "Add Motion" 
imbMotion.ID = "imbMotion" & listSpecialNotesCounter
imbAttachments.ImageUrl = "images/controls/Documents.png"
imbAttachments.Width = "40"
imbAttachments.Height = "40"
imbAttachments.AlternateText = "Add Document"
imbAttachments.ID = "imbAttachments" & listSpecialNotesCounter

rptSpecialNotes.Controls.Add(lblTitle) 
rptSpecialNotes.Controls.Add(imbMotion) 
```

以下是我遇到的问题：

1.  我无法让中继器进行迭代。它只触发一次然后停止。
2.  我无法显示带有转发器数据源主题（我的数据库中的一个字段）的标签。

我真的很感激任何帮助。我只是无法掌握这些中继器控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:36:38.727

您想要做的是使用`ItemDataBound`事件而不是通过项目集合来填充您的转发器。将为您分配给`DataSource`.

这是我在处理转发器数据绑定和 ItemDataBound 事件时所做的，我将在此示例中使用新闻项目列表：

```
' Bind my collection to the repeater
Private Sub LoadData()
    Dim newsList As List(Of News) = dao.GetNewsList()
    rptrNews.DataSource = newsList
    rptrNews.DataBind()
End Sub

' Every item in the data binded list will come through here, to get the item it will be the object e.Item.DataItem
Protected Sub rptrNews_ItemDataBound(sender As Object, e As RepeaterItemEventArgs)
    If e.Item.ItemType = ListItemType.Item OrElse e.Item.ItemType = ListItemType.AlternatingItem Then
        ' Get the current item that is being data bound
        Dim news As News = DirectCast(e.Item.DataItem, News)

        ' Then get all the controls that are within the <ItemTemplate> or other sections and populate them with the correct data, in your case it would be an image
        Dim ltlHeadline As Literal = DirectCast(e.Item.FindControl("ltlHeadline"), Literal)
        Dim ltlContent As Literal = DirectCast(e.Item.FindControl("ltlContent"), Literal)

        ltlHeadline.Text = news.Headline
        ltlContent.Text = news.Teaser
    End If
End Sub 
```

或者，您可以在标记代码中完成所有操作，只在后面的代码中分配数据源并调用数据绑定。为了实现这一点，您可以按如下方式定义您的 ItemTemplate（再次使用新闻，例如）：

```
<ItemTemplate>
  <tr>
    <td><%#Container.DataItem("Headline")%></td>
    <td><%#Container.DataItem("Teaser")%></td>
  </tr>
</ItemTemplate> 
```

# objective-c - numberOfRowsInSection 在线程视图控制器中返回 0

> ID：11192393
> 
> 赞同：0
> 
> 时间：2012-06-25T15:31:52.357
> 
> 标签：objective-c, multithreading, uitableview, objective-c-blocks

我在一个应用程序中有一个 viewController，它从 JSON 中检索数据，对其进行解析并填充到 UITableView 中。我正在使用线程加载数据，以便应用程序在检索数据时不会挂起。

**问题：**

numberOfRowsInSection 返回 0 并且 UITableView 有时在应用程序启动时不会被填充。虽然有时，一切正常。这都是随机的：S

**可能的解释：**

问题是，有时在检索数据之前调用 numberOfRowsInSection 。numberOfRowsInSection 返回名为“subjects”的 NSMutableArray 的计数值。调用 loadData 时会添加“subjects”中的对象。所以 numberOfRowsInSection 应该返回 'subjects' 的计数，并且不应在填充 'subjects' 后调用它。

有时当我启动应用程序时，在填充“主题”并且 UITableView 显示数据后调用 numberOfRowsInSection，但有时当我启动应用程序时，在填充“主题”之前调用 numberOfRowsInSection 并且 UITableView 不显示数据。

**代码：** 这是我的代码：

```
-(void)loadData:(id)sender
{

    dispatch_queue_t getRemindersQueue=dispatch_queue_create("reminders JSON downloader with reload Button", NULL);

    dispatch_async(getRemindersQueue, ^{

        [self getReminders];

        dispatch_async(dispatch_get_main_queue(), ^{

            self.navigationItem.rightBarButtonItem=sender;

            [self.tableView reloadData];

        });

    });

    dispatch_release(getRemindersQueue);  

}

-(void)getReminders
{
    NSURL * aURL = [NSURL URLWithString: @"http://www.merrycode.com/apps/IELTS/RemindersJSON"];

NSURLRequest *request = [NSURLRequest requestWithURL:aURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:10.0];

NSError *responseError=nil;

// Perform request and get JSON back as a NSData object
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&responseError];

if(responseError)
{

    dispatch_async(dispatch_get_main_queue(), ^{

        UIAlertView *parsingError = [[UIAlertView alloc] initWithTitle:@"Network Error" 
                                                               message:@"Can not reach the servers. Make sure you are connected to the internet." 
                                                              delegate:nil 
                                                     cancelButtonTitle:@"OK"
                                                     otherButtonTitles:nil];
        [parsingError show];

    });

    return;
}

NSString *str = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

NSLog(@" String of Reminders JSON: %@",str);

NSString *newStr= [self stringByRemovingControlCharacters:str];

response = [newStr dataUsingEncoding:NSUTF8StringEncoding];

NSError *jsonParsingError = nil;
NSArray *publicTimeline = [NSJSONSerialization JSONObjectWithData:response options:0 error:&jsonParsingError];

NSLog(@"%@", jsonParsingError); 

NSLog(@" publicTimeline Array Count: %d", [publicTimeline count]); 

if([publicTimeline count] == 0)
{

    dispatch_async(dispatch_get_main_queue(), ^{

        UIAlertView *parsingError = [[UIAlertView alloc] initWithTitle:@"Error Retriving Data" 
                                                               message:@"There was an error reciving data from the server." 
                                                              delegate:nil 
                                                     cancelButtonTitle:@"OK"
                                                     otherButtonTitles:nil];
        [parsingError show];

    });

    return;
}

NSDictionary *colleges;

for(int i=0; i<[publicTimeline count];i++)
{

    colleges= [publicTimeline objectAtIndex:i];

    NSLog(@"Reminders: %@", [colleges objectForKey:@"title"]); 

    [self.subjects addObject:[colleges objectForKey:@"title"]];

    [self.dates addObject:[colleges objectForKey:@"date"]];

    [self.description addObject:[colleges objectForKey:@"desc"]];

}

[self.subjectsInNSUserDefaults removeAllObjects];
[self.datesInNSUserDefaults removeAllObjects];
[self.descriptionInNSUserDefaults removeAllObjects];

[self.userDefaults setObject:self.subjects forKey:@"SUBJECTS"];

   [self.userDefaults setObject:self.dates forKey:@"DATES"];
    [self.userDefaults setObject:self.description forKey:@"DESCRIPTION"];
    [self.userDefaults synchronize];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Array Count in numberOfRowsInSection: %d",[self.subjects count]);
    return [self.subjects count];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:23:27.283

几个想法...

你说这是一个 UIViewController（而不是 UITableViewController）。你是如何设置你的 UITableView 和委托的？如果您在后台线程运行时仍在设置 UITableView 或其委托，理论上后台线程可能会在您完成设置 UITableView 之前完成，这可能会产生奇怪的问题（并解释为什么会“随机发生” ”）。

此外，您是否检查过以确保在您的 UITableView 没有被填充（而不是某种其他响应，或者根本没有响应）的情况下，您的响应对象中填充了有关大学的信息？我看到你在哪里检查响应错误，但你似乎假设如果没有错误，它将是关于大学信息的响应（这可能是也可能不是一个安全的假设）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:25:47.447

如果您对数据检索的问题是正确的，那么我也遇到了这个问题。我不雅的解决方案只是设置一个计时器来在我知道数据将被加载的时候填充表格。

# cocoa - 使用 CUPS 从任何 Mac OS X 应用程序对过滤器/后端进行编程以“打印到 PDF”

> ID：11192396
> 
> 赞同：8
> 
> 时间：2012-06-25T15:31:56.687
> 
> 标签：cocoa, pdf, printing, cups

好的，这就是我想要做的。我想添加一个打印选项，将用户的文档打印到 PDF 中，并在将其发送到设备之前添加一些标题。

我想我的问题是：如何为将启动我一直在开发的应用程序的用户添加一个虚拟“打印机”驱动程序，该应用程序将制作 PDF（或制作 PDF 并启动我的应用程序并引用新生成的 PDF )? 如何与 CUPS 交互以生成 PDF？我不确定我是否清楚，所以让我知道更多信息是否会有所帮助。

我已经[使用 CUPS 教程完成了此打印，](http://alien.slackbook.org/dokuwiki/doku.php?id=slackware:cups#pdf_printer_scripts)并且似乎一切都设置好了，但该文件似乎从未出现在适当的临时位置。如果有人正在寻找用户端 PDF 打印机，那么[这个 cups-pdf-for-mac-os-x](https://bitbucket.org/codepoet/cups-pdf-for-mac-os-x/overview)是可以通过安装程序工作的，但是当我遇到相同的问题时，指定目录中没有文件出现下载源代码并按照自述文件中的说明进行操作。如果有人可以通过终端让这些中的任何一个在 Mac 上工作，请让我一步一步地知道你是如何做到的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T18:00:59.730

要走的路是这样的：

*   使用您喜欢的任何驱动程序设置打印队列。但我建议使用 PostScript 驱动程序/PPD。（PostScript PPD 是不包含任何`*cupsFilter: ...`行的 PPD。）：

*   最初，使用名为`2dir`. 可以从这个网站复制那个：[**KDE Printing Developer Tools Wiki**](http://community.kde.org/Printing/Developer_Tools#.272dir.27_CUPS_backend_script_.28Bash_code.29)。*确保在复制时获得正确的行尾（类 Unix）。*

*   设置初始队列的命令行：

    ```
    管理员\
        -p pdf队列\
        -v 2dir:/tmp/pdfqueue \
        -E\
        -P /path/to/postscript-printer.ppd

    ```

    后端现在`2dir`会将所有输出写入目录`/tmp/pdfqueue/`，并且它将为每个作业使用一个 uniq 名称。每个结果***现在应该是一个 PostScript 文件***。（还没有您想要的任何修改）。
*   找到此队列使用的 PPD `/etc/cups/ppd/`（其名称应为`pdfqueue.ppd`）。

*   添加以下行（最好，在 PPD 顶部附近）：

    ```
    *cupsFilter: "应用程序/pdf 0 -"
    ```

    （确保`*cupsFilter`从该行的最开头开始。）该行告诉`cupsd`自动设置一个生成 PDF 的过滤链，然后在通过*后端*将文件发送到打印机`'-'`之前调用最后一个命名的过滤器。该过滤器是一个特殊的过滤器：它什么都不做，它是一个*直*通过滤器。*`'-'`*
***   重新启动 CUPS 调度程序：

    ```
    sudo launchctl unload /System/Library/LaunchDaemons/org.cups.cupsd.plist
    sudo launchctl load /System/Library/LaunchDaemons/org.cups.cupsd.plist
    ```

    *   从现在开始，您`pdfqueue`将导致打印到它的每个作业都以PDF***格式***`/tmp/pdfqueue/*.pdf`结束。

    *   研究`2dir`后端脚本。这是简单的 Bash，并且评论相当不错。

    *   在将结果保存到...之前，以将所需修改`2dir`添加到 PDF 的方式进行修改`/tmp/pdfqueue/*.pdf`** 

 *** * *

**更新：** 看起来我在`*cupsFilter: ...`上面最初规定的行中忘记了 2 个引号。对不起！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T14:22:49.543

我真的希望我能接受两个答案，因为如果没有@Kurt Pfeifle 对 Mac 细节的所有帮助以及仅了解打印机驱动程序和文件位置，我认为我无法做到这一点。但这就是我所做的：

* * *

1.  从 codepoet [cups-pdf-for-mac-os-x](https://bitbucket.org/codepoet/cups-pdf-for-mac-os-x/overview)下载源代码。（对于非 Mac 用户，您可以查看[http://www.cups-pdf.de/](http://www.cups-pdf.de/)）自述文件非常详细，如果您仔细阅读所有说明，它会起作用，但是我在获取所有内容时遇到了一点麻烦这些碎片，所以我将准确地概述我所做的事情，以期为别人省去一些麻烦。为此，包含源代码的目录称为“cups-pdfdownloaddir”。

2.  按照自述文件的规定编译 src 文件夹中包含的 cups-pdf.c：

    `gcc -09 -s -lcups -o cups-pdf cups-pdf.c`

    可能会有警告：`ld: warning: option -s is obsolete and being ignored`，但这对我来说没有问题。将二进制文件复制到 /usr/libexec/cups/backend。您可能必须使用该`sudo`命令，该命令将提示您输入密码。例如：

    `sudo cp /cups-pdfdownloaddir/src/cups-pdf /usr/libexec/cups/backend`

    另外，不要忘记更改此文件的权限 - 它需要 root 权限（700），可以在将 cupd-pdf 移动到后端目录后使用以下内容进行更改：

    `sudo chmod 700 /usr/libexec/cups/backend/cups-pdf`

3.  编辑 /cups-pdfdownloaddir/extra/cups-pdf.conf 中包含的文件。在“PDF 转换设置”标题下，在 GhostScript 下找到一行读取`#GhostScript /usr/bin/gs`. 我没有取消注释以防万一我需要它，只是在它下面添加了一行`Ghostscript /usr/bin/pstopdf`. （这些修改中的任何一个都不应有前导 #）

    在没有取消注释的情况下，在 GSCall 下找到`#GSCall %s -q -dCompatibilityLevel=%s -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile="%s" -dAutoRotatePage\ s=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -c .setpdfwrite \ -f %s` 再次读取的行，在此我添加了行`GSCall %s %s -o %s %s`

    在 PDFVer 下找到读取的行并将其`#PDFVer 1.4`更改为`PDFVer`，没有空格或后面的字符。

    现在保存并退出编辑，然后使用以下命令将此文件复制到 /etc/cups

    `sudo cp cups-pdfdownloaddir/extra/cups-pdf.conf /etc/cups`

    *在文本编辑器中编辑时要小心，因为 UNIX 和 Mac 环境中的换行符不同，可能会破坏脚本。你总是可以使用 perl 命令来删除它们，但我很偏执，不想一开始就处理它。*

4.  您现在应该能够打开一个程序（例如 Word、Excel 等）并选择文件 >> 打印并找到一个名为 CUPS-PDF 的可用打印机。打印到这台打印机，默认情况下，您应该在 /var/spool/cups-pdf/yourusername/ 中找到您的 pdf。

* * *

*此外，我认为这可能会有所帮助，因为它对我有帮助：如果按照这些说明搞砸了，您需要重新开始/摆脱它，为了卸下驱动器，您需要 (1) 卸下杯子-pdf 后端从`/usr/libexec/cups/backend`(2) 删除 cups-pdf.conf 从`/etc/cups/`(3) 进入系统偏好设置>>打印和传真并删除 CUPS-PDF 打印机。

* * *

这就是我为自己成功设置 pdf 后端/过滤器的方式，但是自述文件中包含更多详细信息以及有关自定义的其他信息。希望这对其他人有帮助！**

# jquery - 在已知元素中获取元素

> ID：11192397
> 
> 赞同：0
> 
> 时间：2012-06-25T15:32:00.243
> 
> 标签：jquery, jquery-ui, jquery-tabs

我正在使用以下内容找到选定的 jquery 选项卡 ui 元素：

```
$("li.ui-tabs-selected").attr("id") 
```

这可能会返回如下内容：

```
tab_48 
```

在`tab_48`html 标签中，我有一个锚标签，所以也许

```
<a href="#ui-tabs-4">some content here</a> 
```

综上所述，HTML 可能看起来像这样：

```
<li id="tab_48">
    <a href="#ui-tabs-4">
        some content here
    </a>
</li> 
```

如何获取锚标签的 href，现在我可以通过以下方式获取所选选项卡的 id：

```
$("li.ui-tabs-selected").attr("id") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:33:21.113

```
$("li.ui-tabs-selected a").attr("href") 
```

或者

```
$("li.ui-tabs-selected").find("a").attr("href") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:38:07.033

在新浏览器上：

```
var href = document.querySelectorAll('li.ui-tabs-selected a').href; 
```

如果您也需要选择的 ID：

```
var li = document.querySelectorAll('li.ui-tabs-selected');
var id = li.id;
var href = li.querySelectorAll('a').href; 
```

# c# - 为什么一种字符串压缩方法返回一个空字符串而另一种没有？

> ID：11192407
> 
> 赞同：0
> 
> 时间：2012-06-25T15:32:47.130
> 
> 标签：c#, string, gzipstream

我[`GZipStream`](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)用来压缩字符串，我修改了两个不同的例子来看看什么是有效的。第一个代码片段是[文档中示例](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)的大量修改版本，它只返回一个空字符串。

```
public static String CompressStringGzip(String uncompressed)
{
    String compressedString;
    // Convert the uncompressed source string to a stream stored in memory
    // and create the MemoryStream that will hold the compressed string
    using (MemoryStream inStream = new MemoryStream(Encoding.Unicode.GetBytes(uncompressed)),
                        outStream = new MemoryStream())
    {
        using (GZipStream compress = new GZipStream(outStream, CompressionMode.Compress))
        {
            inStream.CopyTo(compress);
            StreamReader reader = new StreamReader(outStream);
            compressedString = reader.ReadToEnd();
        }
    }
    return compressedString; 
```

当我调试它时，我只能说什么都没有读取`reader`，它`compressedString`是空的。但是，我编写的从[CodeProject 片段](http://www.codeproject.com/Articles/27203/GZipStream-Compress-Decompress-a-string)修改的第二种方法是成功的。

```
public static String CompressStringGzip3(String uncompressed)
{
    //Transform string to byte array
    String compressedString;
    byte[] uncompressedByteArray = Encoding.Unicode.GetBytes(uncompressed);

    using (MemoryStream outStream = new MemoryStream())
    {
        using (GZipStream compress = new GZipStream(outStream, CompressionMode.Compress))
        {
            compress.Write(uncompressedByteArray, 0, uncompressedByteArray.Length);
            compress.Close();
        }
        byte[] compressedByteArray = outStream.ToArray();
        StringBuilder compressedStringBuilder = new StringBuilder(compressedByteArray.Length);
        foreach (byte b in compressedByteArray)
            compressedStringBuilder.Append((char)b);
        compressedString = compressedStringBuilder.ToString();
    }
    return compressedString;
} 
```

为什么第一个代码片段不成功，而另一个是？尽管它们略有不同，但我不知道为什么第二个代码段中的微小变化允许它工作。我正在使用的示例字符串是`SELECT * FROM foods f WHERE f.name = 'chicken';`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:27:43.993

我最终使用以下代码进行压缩和解压缩：

```
public static String Compress(String decompressed)
{
    byte[] data = Encoding.UTF8.GetBytes(decompressed);
    using (var input = new MemoryStream(data))
    using (var output = new MemoryStream())
    {
        using (var gzip = new GZipStream(output, CompressionMode.Compress, true))
        {
            input.CopyTo(gzip);
        }
        return Convert.ToBase64String(output.ToArray());
    }
}

public static String Decompress(String compressed)
{
    byte[] data = Convert.FromBase64String(compressed);
    using (MemoryStream input = new MemoryStream(data))
    using (GZipStream gzip = new GZipStream(input, CompressionMode.Decompress))
    using (MemoryStream output = new MemoryStream())
    {
        gzip.CopyTo(output);
        StringBuilder sb = new StringBuilder();
        return Encoding.UTF8.GetString(output.ToArray());

    }
} 
```

部分问题的解释来自[this question](https://stackoverflow.com/questions/11195577/compressing-and-decompressing-a-string-yields-only-the-first-letter-of-the-origi/11195663#11195663)。尽管我通过将代码更改为此答案中包含的内容来解决问题，但这些行（在我的原始代码中）：

```
foreach (byte b in compressedByteArray)
            compressedStringBuilder.Append((char)b); 
```

是有问题的，因为正如[dlev](https://stackoverflow.com/users/675502/dlev)恰当地表述的那样：

> 您将每个字节解释为它自己的字符，而实际上并非如此。相反，您需要以下行：

```
string decoded = Encoding.Unicode.GetString(compressedByteArray); 
```

> 基本问题是您正在转换为基于编码的字节数组，但在检索字节时忽略了该编码。

因此，问题解决了，我使用的新代码比我的原始代码简洁得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:43:31.897

您需要将下面的代码移到第二个 using 语句之外：

```
using (GZipStream compress = new GZipStream(outStream, CompressionMode.Compress)) 
{ 
    inStream.CopyTo(compress); 
    outStream.Position = 0;
    StreamReader reader = new StreamReader(outStream); 
    compressedString = reader.ReadToEnd(); 
} 
```

CopyTo() 不会将结果刷新到底层 MemoryStream。

**更新**

似乎 GZipStream 在处理时关闭并处理它的底层流（不是我设计类的方式）。我已经更新了上面的示例并对其进行了测试。

# android - 不必要地使用变量

> ID：11192416
> 
> 赞同：4
> 
> 时间：2012-06-25T15:33:14.080
> 
> 标签：android, random

我对人们为什么推荐你使用有点困惑：

```
long rantime = System.currentTimeMillis(); 
Random random = new Random(rantime); 
```

当我们可以使用：

```
Random random = new Random(System.currentTimeMillis()); 
```

单行方法会失败吗？如果没有，由于您没有不必要地创建变量，它不是更有效吗？

尽可能避免使用其他变量是最佳做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:34:30.327

大多数人认为这是：

```
long rantime = System.currentTimeMillis(); 
Random random = new Random(rantime); 
```

比这更具可读性：

```
Random random = new Random(System.currentTimeMillis()); 
```

鉴于 Android 项目可能会变得如此复杂，我*强烈*建议您重视可读性，而不是涉及您在程序中使用的局部变量数量的琐碎优化。无论如何，编译器大部分时间都会优化这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:49:31.560

## 随机的，它是种子

这甚至没有必要，默认构造函数`Random`已经使用系统时间作为种子。所以只需使用`Random random = new Random();`

[看这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#Random%28%29)

# c# - 如何使用会话变量或 cookie

> ID：11192419
> 
> 赞同：0
> 
> 时间：2012-06-25T15:33:24.140
> 
> 标签：c#, asp.net

我有一个包含大量公司列表的主页，我有一个搜索按钮，如果我想按州或城市查找公司，我可以过滤我的搜索。

我决定按城市过滤我的搜索，比如说芝加哥，我的搜索结果是 10 家公司。

我单击该列表中的任何一家公司，然后转到公司详细信息，但我意识到那不是我要查找的公司，因此我想返回我的 10 家公司结果列表，但我返回到主要公司搜索界面我必须重新开始我的搜索。

在这种情况下如何使用会话变量或 cookie？

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:37:06.197

另一个不涉及`Session`或`cookies`将使用 url 传递搜索参数的有效选项。如果您的网站是公开的，这也可以帮助您进行 SEO。

如果您不使用任何重写，您可以使用友好的 url + 重写规则或只使用查询字符串。

在公司详细信息页面上，您将存储引荐来源网址，如果用户想回来，您可以访问该页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:42:17.883

我同意克劳迪奥，但如果你确实想使用会话，我会做类似以下的事情

在页面加载中做这样的事情

```
if(!Page.IsPostBack) 
{

        string filter = Session["SearchQuery"].ToString();
        if(filter  != null)
        {
            FilterResults(filter)
        } 
} 
```

然后在您的过滤器事件中执行类似的操作

```
Session["Filter"] = txtCityName.txt;
FilterResults(txtCityName.txt); 
```

# regex - 如何使用正则表达式匹配以下输出

> ID：11192420
> 
> 赞同：0
> 
> 时间：2012-06-25T15:33:25.717
> 
> 标签：regex, tcl

房间信息：

```
单人房（男）：0x3
单间（家庭）：0x0

```

我想匹配输出的第二行：`singleRoom (male): 0x3`并获取`0x3`十六进制的值。如何在不使用“ `*`”模式的情况下实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:40:25.520

`^singleRoom \(male\): (0x[a-fA-F0-9]+)$`

# iphone - 在“突出显示”状态下更改单元格的颜色

> ID：11192421
> 
> 赞同：-4
> 
> 时间：2012-06-25T15:33:27.423
> 
> 标签：iphone, ios, xcode

如何更改点击表格视图单元格时显示的默认（蓝色）颜色？
（只是覆盖颜色，当您点击 Settings.app 中的一个选项时，它会在将您带到那里之前变为蓝色）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:36:27.963

> 选定的背景视图
> 
> 选中时用作单元格背景的视图。

```
@property(nonatomic, retain) UIView *selectedBackgroundView 
```

来自[UITableViewCell 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

制作一个`UIView`，设置任何`backgroundColor`你想要的并将其设置`selectedBackgroundView`为你的单元格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:37:18.187

你可以使用其中任何一个

```
[cell setSelectionStyle:UITableViewCellSelectionStyleNone];
//or
[cell setSelectionStyle:UITableViewCellSelectionStyleGray]; 
```

也许这会帮助你

# c++ - 使用 maven-nar-plugin 在 Maven 中构建 C++ 项目

> ID：11192422
> 
> 赞同：5
> 
> 时间：2012-06-25T15:33:28.773
> 
> 标签：c++, maven, maven-nar-plugin

有没有人使用 maven-nar-plugin 为不同平台构建 C++ 代码，使用不同的编译器？如果有人请给我有关此的更多信息。我只是想知道如何使用 maven 为不同平台构建 NAR 文件。我知道为了能够在特定平台上构建项目，您应该在该平台上运行构建，并使用该平台的特定编译器和链接器。但是我的经验与 Java 项目和 Maven 相关，并且您已经知道 Java 是非常可移植的平台，所以直到现在我还没有遇到过像瘦这样的问题。因此，任何有关如何使用 maven-nar-plugin 构建项目的帮助和详细信息都将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:32:36.513

目前，使用 maven-nar-plugin 构建多平台二进制文件的最可靠方法是在不同平台上实际执行，而不是尝试基于交叉编译的解决方案。

例如，[ImageJ](https://github.com/imagej/imagej)项目使用 maven-nar-plugin 为32 位和 64 位版本的 Linux、OS X 和 Windows构建[小型本机启动器。](https://github.com/imagej/imagej-launcher)

为了实现这一点，该项目在 Linux 服务器上有一个 Jenkins CIS，一个带有 Jenkins 从属的 VirtualBox 中的 Windows 7 64 位 VM，以及一个 OS X 桌面 Jenkins 从属，每个都为各自的平台执行 Maven 构建。

设置非常复杂；[ImageJ issue tracker 的这张票中](http://trac.imagej.net/ticket/832)有详细说明。

在相关的说明中，一群感兴趣的开发人员最近复活了 maven-nar-plugin，将官方存储库迁移到了一个[新的 maven-nar 组织](https://github.com/maven-nar)。感兴趣的项目之一是交叉编译，这将使在同一平台上为多个 AOL 构建本机二进制文件变得更加容易，而无需求助于 Jenkins slaves。但是有很多挑战（例如，GCC 经常改变行为），而且还不容易做到。我们邀请有兴趣的开发者加入关于新的[maven-nar-plugin 邮件列表](https://groups.google.com/forum/?fromgroups#!forum/maven-nar)的讨论！

# spring - RestTemplate 上传文件，不正确的 Mime 类型？

> ID：11192424
> 
> 赞同：4
> 
> 时间：2012-06-25T15:33:36.573
> 
> 标签：spring, groovy, mime-types, apache-tika

我们正在尝试使用 3.0.5.RELEASE 中的 org.springframework.web.client.RestTemplate 作为 REST 调用的一部分进行文件上传，我们看到了一些文件，几乎所有的 Open Office 和 OOXML 格式，显示为我们的服务器端默认应用程序/八位字节流。

我们可以在上传之前使用 Tika 检测 mime-type，但看不到如何通过 RestTemplate 将其添加到请求的一部分中。下面是我们用来执行上传的一些 Groovy 代码：

```
MultiValueMap<String, Object> form = new LinkedMultiValueMap<String, Object>()
form.add("title", document.title)
form.add("description", document.description)
form.add("content", new FileSystemResource(file))
return restTemplate.postForObject(getFullURL(REST_API_URI), form, Document.class) 
```

# javascript - JavaScript 为所有后续单选按钮创建一个全局单选按钮？

> ID：11192426
> 
> 赞同：0
> 
> 时间：2012-06-25T15:33:44.507
> 
> 标签：javascript, jquery, html, radio-button

我有这组标签和单选按钮，如下所示：

```
Entertainment: <input type="radio" name="entertainment" id="entertainment" value="0" checked/>
               <input type="radio" name="entertainment" id="entertainment" value="1" /> 
               <input type="radio" name="entertainment" id="entertainment" value="2" /><br />

Radio: <input type="radio" name="radio" id="radio" value="0" checked/>
       <input type="radio" name="radio" id="radio" value="1" /> 
       <input type="radio" name="radio" id="radio" value="2" /><br />

Dancing: <input type="radio" name="dancing" id="dancing" value="0" checked/>
         <input type="radio" name="dancing" id="dancing" value="1" /> 
         <input type="radio" name="dancing" id="dancing" value="2" /><br />

Music: <input type="radio" name="music" id="music" value="0" checked/>
       <input type="radio" name="music" id="music" value="1" /> 
       <input type="radio" name="music" id="music" value="2" /><br />

Television: <input type="radio" name="tv" id="tv" value="0" checked/>
            <input type="radio" name="tv" id="tv" value="1" /> 
            <input type="radio" name="tv" id="tv" value="2" /><br />

Film: <input type="radio" name="film" id="film" value="0" checked/>
      <input type="radio" name="film" id="film" value="1" /> 
      <input type="radio" name="film" id="film" value="2" /><br />

Theatre: <input type="radio" name="theatre" id="theatre" value="0" checked/>
         <input type="radio" name="theatre" id="theatre" value="1" /> 
         <input type="radio" name="theatre" id="theatre" value="2" /> 
```

这个想法是顶部的三个“娱乐”单选按钮控制下面的所有单选按钮。如果您愿意，可以使用“全局切换”来节省人们的时间。有谁知道完成此操作所需的 JavaScript/jQuery 吗？我在网上找不到正确的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:47:04.403

```
$(':radio[name=entertainment]').change(function() {
  $(this).nextAll(':radio[value="'+ this.value +'"]').prop('checked', true);
  $(this).nextAll(':radio[value!="'+ this.value +'"]').prop('checked', false);
}); 
```

**[工作样本](http://jsfiddle.net/zkTud/14/)**

### 笔记

`id`s 应该是唯一的。

# python - 在读取方法 django-piston 中更改返回字段

> ID：11192427
> 
> 赞同：0
> 
> 时间：2012-06-25T15:33:54.367
> 
> 标签：python, django, api, python-imaging-library, django-piston

我正在使用 django-piston 创建我的 api。我需要知道是否可以根据参数更改返回字段。我正在尝试返回缩略图字段，但我需要选择通过 URL 传递缩略图的大小。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:20:51.783

刚刚对类似的事情感到困惑，我相信我可以帮助您指出正确的方向。

要意识到的基本事情是*活塞不关心你返回什么*。对于我的用例，我想返回子资源。所以，如果我有：

```
{
    "foo": "bar",
    "baz": [{"id": 1}, {"id": 23}],
} 
```

我可以只请求`baz`对象，然后得到：

```
{
    "baz": [{"id": 1}, {"id": 23}],
} 
```

起初我尝试动态更改处理程序的`fields`or `excludes`，但那***是完全错误的方法***。一旦我意识到活塞根本不在乎，我就这样做了：

```
 if attrib is not None:
     if hasattr(binder, attrib):
         return getattr(binder, attrib)

     else:
         return rc.BAD_REQUEST 
```

效果很好。一个警告：*`fields`或`excludes`适用于您返回的对象。*当我试图返回一个子资源并且我没有得到所有字段时，它让我措手不及。因此，**请**检查是否遇到问题。

对于您的情况，具体来说，我认为您可以轻松地将缩略图生成为请求的大小，然后构建一个元对象以返回：

```
meta = dict()
meta['thumbnail' = generateThumbnail(width, height)
meta['other_field'] = base.other_field

return meta 
```

看看这是否适合你。

# magento - Magento：获取 tablerate 运输模块的所有配置费率

> ID：11192432
> 
> 赞同：1
> 
> 时间：2012-06-25T15:34:19.807
> 
> 标签：magento, shipping

我坚持认为应该是一个小问题，但我还没有找到解决方案。

我正在开发一个模块，该模块必须通过 tablerate 运输模块的所有配置费率。但是如何获得所有配置的费率，而不仅仅是适合给定条件的费率？我查看了相应资源模型的代码（“shipping/carrier_tablerate”），发现 getRate($request) 方法将选择查询限制为 1，因此只返回 1 个费率。

有没有一种简单的方法来获得所有配置的费率？有没有内置的方法可以做到这一点，还是我必须执行自己的数据库操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T16:03:48.620

```
$tablerateColl = Mage::getResourceModel('shipping/carrier_tablerate_collection');
/* @var $tablerateColl Mage_Shipping_Model_Resource_Carrier_Tablerate_Collection */

foreach ($tablerateColl as $tablerate) {
    /* @var $tablerate Mage_Shipping_Model_Carrier_Tablerate */
    Zend_Debug::dump($tablerate->debug());
} 
```

# c# - 如何访问先前变量设置的内容？

> ID：11192435
> 
> 赞同：0
> 
> 时间：2012-06-25T15:34:24.770
> 
> 标签：c#, datatable, datarow, datacolumn

我有一个嵌套在 foreach 中的 foreach。我需要检查 d 是否小于所有其他 d。我怎样才能做到这一点？如果有办法查看变量之前设置的内容，那么我自己就可以做到这一点。如果没有，请您设计一个解决方案吗？

这是我的代码：

```
foreach (DataRow newRow1 in dt.Rows)
            {
                string zipCode1 = newRow1[2].ToString();
                double latitude2 = Convert.ToDouble(newRow1[3]);
                double longitude2 = Convert.ToDouble(newRow1[4]);

                foreach (DataRow newRow2 in dt2.Rows)
                {
                    if (newRow2[2].ToString().Equals(zipCode1))
                    {
                        newRow1[5] = newRow2[1].ToString();
                        double latitude = Convert.ToDouble(newRow1[3]);
                        double longitude = Convert.ToDouble(newRow1[4]);
                        double d = Math.Sqrt(Math.Abs(latitude - latitude2) * Math.Abs(latitude - latitude2) + Math.Abs(longitude - longitude2) * Math.Abs(longitude - longitude2));
                        Console.WriteLine("Found match!");
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:38:38.817

这等效于`min`通过线性搜索进行查找的旧算法：

```
foreach (DataRow newRow1 in dt.Rows)
        {
            string zipCode1 = newRow1[2].ToString();
            double latitude2 = Convert.ToDouble(newRow1[3]);
            double longitude2 = Convert.ToDouble(newRow1[4]);

            // Start minD at the max value
            double minD = double.MaxValue;
            foreach (DataRow newRow2 in dt2.Rows)
            {
                if (newRow2[2].ToString().Equals(zipCode1))
                {
                    newRow1[5] = newRow2[1].ToString();
                    double latitude = Convert.ToDouble(newRow1[3]);
                    double longitude = Convert.ToDouble(newRow1[4]);
                    double d = Math.Sqrt(Math.Abs(latitude - latitude2) * Math.Abs(latitude - latitude2) + Math.Abs(longitude - longitude2) * Math.Abs(longitude - longitude2));
                    minD = Math.Min(minD, d);
                    Console.WriteLine("Found match!");
                }
            }
            Console.WriteLine("Min D: {0}", minD);
        } 
```

# c# - C# 中使用的 COM 互操作字典

> ID：11192437
> 
> 赞同：0
> 
> 时间：2012-06-25T15:34:32.883
> 
> 标签：c#, com, dictionary, vb6, interop

我有一个需要从我的 C# 程序调用的第三方 DLL。

我已将 dll 添加到我的项目中的引用中，并且 VS2010 已生成一个 COM - 互操作包装器 dll。DLL 中定义的接口和类现在可以在我的程序中使用，并且可以正常工作。

现在的问题是返回由整数的键值对和 TSEnt 对象组成的“字典”的方法。在 DLL 中，返回类型定义为 VARIANT*，在包装器中定义为“对象”。DLL 不包含任何字典接口。

我在 C# 中找到的唯一可以成功将此返回值转换为的接口是 IEnumerable。但是使用 foreach 语句从返回值中获取值只返回一个 int32，它是底层键/值对的键部分。

我如何获得这本字典的价值部分？

我试图将其转换为 IDictionary、IDictionary< int、object >、Hashtable 等等，但结果都相同……转换错误。我猜这个 DLL 最初是用早期版本的 Visual Basic 编写的。

请帮助...这个问题在过去的两周里一直困扰着我...

问候杰斯珀·桑加德

从文档中：

```
Query(String ObjectType, String PropName, String Pattern)
Queries the repository for Objects of type ObjectType with the property PropName 
that have the value Pattern. Returns a Dictionary object containing a list of TSEnt
objects that the repository returns. This list is keyed by the index of the elements
in the list starting from 0\. Pattern can contain ‘*’ as wildcard. If the Property
name is a Domained value, use the Display Value in the repository model. 
```

从 DLL（ITypeLib 查看器）：

```
[id(0x00000006), helpstring("method Query")]
HRESULT Query(
[in] BSTR Type,
[in] BSTR PropertyName,
[in] BSTR Pattern,
[out, retval] VARIANT* result); 
```

VS中的定义：

```
[DispId(6)]
object Query(string Type, string PropertyName, string Pattern); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:09:42.400

如果我没记错的话，那就是旧 COM 运行时脚本库中的 Dictionary 对象：[SCRRUN.dll 将](https://web.archive.org/web/20160305053900/http://www.kamath.com/tutorials/tut009_dictionary.asp)COM-TLB 导入您的项目并将您正在获取的变体转换为该类型。

# android - Android：谷歌语音识别服务器

> ID：11192438
> 
> 赞同：1
> 
> 时间：2012-06-25T15:34:37.013
> 
> 标签：android, speech-recognition, voice

我目前正在使用 Google 的 Android SDK 语音识别 API。我想知道的是他们语音识别的 URL。您需要数据连接才能使用该功能，因此显然他们正在解析服务器端的内容。有人知道这个网址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:35:24.317

好的，这就是我在[这篇](http://waxy.org/2008/11/deconstructing_google_mobiles_voice_search_on_the_iphone/)文章的基础上发现的。

以下是语音搜索中各种 HTTP 和 TCP 操作的完整 TCP 转储：

```
 POST /m/voice-search HTTP/1.1

Content-Length: 117

Content-Type: application/octet-stream

Host: www.google.com

Connection: Keep-Alive

User-Agent: Mozilla/5.0 (Linux; U; Android 2.3.5; en-us; YP-G1) AppleWebKit/525.10+ (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2

.....intent-speech-apiR\
!VS 2.1.3 os=[Android 2.3.5 YP-G1]........>.. .".-16508905153536551372.en-US:..... .(.EZL..HTTP/1.1 200 OK

Content-Type: application/x-protobuffer

Date: Tue, 26 Jun 2012 13:07:17 GMT

Expires: Tue, 26 Jun 2012 13:07:17 GMT

Cache-Control: private, max-age=0

X-Content-Type-Options: nosniff

X-Frame-Options: SAMEORIGIN

X-XSS-Protection: 1; mode=block

Content-Length: 133

Server: GSE

7
 6d72f95e7d9d47135f894ddb26d6303d....intent-speech-api..RH
.
.74.125.142.126.....0ZQjyPfTdtfxMBro66d72f95e7d9d47135f894ddb26d6303dPOST /m/voice-search?multiproto=true HTTP/1.1

Content-Length: 3271

Content-Type: application/octet-stream

Host: www.google.com

Connection: Keep-Alive

User-Agent: Mozilla/5.0 (Linux; U; Android 2.3.5; en-us; YP-G1) AppleWebKit/525.10+ (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2

.s
.....intent-speech-apiRZ
!VS 2.1.3 os=[Android 2.3.5 YP-G1]........>.. .".-16508905153536551372.en-US:..... .EZL...d
.....intent-speech-apibK
.j.
.free_form.............en-US(.0.:.com.rockwellcollins.voiceH.PVh.x......
.....intent-speech-api....
..<4p(.X.....*.EaU..74-l.`..X.M...<..a>.y..ioZ~Gr...F2JDNH.8..@...<(r'..~
a..(B....4..,XxE..T.+...<.>cN
.p.....O.j.V.3]d5q....J...<${c;.j.A..K.e..Gv.$@...C.....f@<..Z..B..i..^T]....*.c.Q.Ak.k...<,}_..b.....f"..CI.....D..f>2...< n].W......W.^).6........l...A@<.[m...... . ..t.E.n.SC
.D./`...< sx.tH.a...d#......U......[...@<.Co.........Ce.0,..
....}....:`<&p#......k...........?...!.... < U.......3:.H.L....<j....:<..n.<"n.>....i....c]..,.2.<O{.W.., .....
.....intent-speech-api....
..<.{%....a..:..
..)......../.Mq.@<.[.6.A.a..z9|p.......$...D""...<.r]..2.a...\.J...:.*.y..-.j0..P<$[c..\....O......j$..U}........<Dd_......Z.....x....^.!.....{..<$.cD.....r.rc...xh....4:.......<..}.]).a..[.5..K
....d..=.=W..P<&..~.h...O..Qo..p~..'f!
.n\.LN.<.._.
.....
....3..D5.~..Ws~.L..<*Cx..j.ai.Z.`R..\......h.c.....<.d....H ...{zb..jo...L.o...$T.p<y.6.D@.Q.J.UY\.....]-.F.~.y....<C...5zQ.w.K
...x3k...-.]....o{.<U/S..........QY.a.........4.\......
.....intent-speech-api....
..<,.c.......*.,......8....H.N."..<k.l.*{...k.....I$..?.B.....iQU.<%n$.m..t...2..Z......vT......{.<)...o..p.d<.../....`.H.v..=..~.<?%....R....Y. ..o..K.f.B.i|K...<Y.......T./h..z.g.@.......s\~. <a%..0R....?...........p..7..=Xp</...P^...
.Y}......z.........B.<>..........s2.....*.6 ..%.!Q...<.._....!.._..........Y.....}...<.edG.&..s..j....j.......-......<..X.AQ...=.4.9...k..r...Bx..f2P<F['.u........J............/... <.3S..r..........,.V.%...]....O.....
.....intent-speech-api....
..<(}q..C/P.9.......zm.6s...)..]4P<..(..P......N
.6...c......k..".<..x...q..>.....QI$[~...>..Q.L0.<..c......<..*..I.`........Jf..@<.v#F.......0R..BZ.I'..-...q..IP<..dN.tP!_Z...0.+a.j.29Yc..g...`<C.{D......Z2......7.l.2.F0....@<D._....a.*........ +..5...N.yFP<D.d......}:.].-.%e......|-.p...<1
..^.1..... =....E.U.z...g...@<..g..l..._/z...SH.A)]q....../..<&.i.\..a.{..{...../....w...B3..<..g........O*..<c...y...YE)... <$....p.A........)..OP....Y;.s.P....
.....intent-speech-api....
..<B}h....!.4.j(L.e.......F,..3#. <....
N
A...V........\V[.da....0<Deg......J.]Z..t...>@.$./...o
.< ..N.Z%..J.....x(wJ.l.5Y.=.oTSP<&ra..`....J.[....?.i$..d......p< s.......d.-..d...=.....
L..j.`<D~f.....y.J......B..!...c..D.c.<..d?V......1.%.........u..}..K.<L.x..2...i:.=q6.].`.9.{..A..".p<.zWGVt.A..O!R....L.w.O.(8....Y.<DgcGT.
..n.c.s...
...}.C..*.rf < {t>.......8b.[..\."....<@..B?.< ^$......,:Xl...%r..F..
..)O...< .#6.i)A...X.~Qc...TF.....[+.+.....
.....intent-speech-api....
..<.nh.....h....h".......|wd..n.l.<(mk,.P.A....,...*.57..EG....p.0<....V............[ ..?]....lWQ@<0[q.VW.a.....n.....m.t..6..`...<.~y..r...d........}.....:...v..<.zb..c...-.2S@F.....oa.H.m..dD.<Rd_....A...%kr..d.g.8.m.. .... <.egF.......[.S...N..W.........`< |#..........'..4.....(........<(_i&C:C.........MK..kd@}Jh..~..<.z...(.!y.
5:m^..r..........AW.<.OkF..4..i:.._0.....A._........<E.y..{. .*......M....=..!Q.A...<.Lg.^H.@...M7...d8.6.A3....q'.....~
.....intent-speech-api..d
`<0z]>. ......`]...7Vp.%...K..V_@<.Mg>........D.t...N........8/..<(......A.9j..r....7.....-9.4.......
.....intent-speech-api...
...HTTP/1.1 200 OK

Content-Type: application/x-protobuffer

Date: Tue, 26 Jun 2012 13:07:22 GMT

Expires: Tue, 26 Jun 2012 13:07:22 GMT

Cache-Control: private, max-age=0

X-Content-Type-Options: nosniff

X-Frame-Options: SAMEORIGIN

X-XSS-Protection: 1; mode=block

Content-Length: 281

Server: GSE

.=
7
 0571f20e9244116a243b05ee852a7831....intent-speech-api..R...
.....intent-speech-api..b..
......
.testing.....D..?..
.test...........
.testting...........
.texting...........

test email.........."0571f20e9244116a243b05ee852a7831-1.,
&
 0571f20e9244116a243b05ee852a7831......Z.POST /m/voice-search?multiproto=true HTTP/1.1

Content-Length: 257

Content-Type: application/octet-stream

Host: www.google.com

Connection: Keep-Alive

User-Agent: Mozilla/5.0 (Linux; U; Android 2.3.5; en-us; YP-G1) AppleWebKit/525.10+ (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2

.n
.....voice-searchRZ
!VS 2.1.3 os=[Android 2.3.5 YP-G1]........>.. .".-16508905153536551372.en-US:..... .EZL...B
5
 6d72f95e7d9d47135f894ddb26d6303d..intent-speech-api.......Z. ..K
7
 0571f20e9244116a243b05ee852a7831....intent-speech-api....
..0..R...Z. .HTTP/1.1 200 OK

Content-Type: application/x-protobuffer

Date: Tue, 26 Jun 2012 13:07:22 GMT

Expires: Tue, 26 Jun 2012 13:07:22 GMT

Cache-Control: private, max-age=0

X-Content-Type-Options: nosniff

X-Frame-Options: SAMEORIGIN

X-XSS-Protection: 1; mode=block

Content-Length: 230

Server: GSE

.8
2
 7a4a9198ae0fd36445660bf963609842....voice-search..R..<
5
 6d72f95e7d9d47135f894ddb26d6303d..intent-speech-api......>
7
 0571f20e9244116a243b05ee852a7831....intent-speech-api......,
&
 7a4a9198ae0fd36445660bf963609842......Z. 
```

阅读内容很多，但基本上 Android 中发生的事情通过 TCP 将语音数据发送到`74.125.142.126`端口`19294`（无论如何在我的情况下）。之后，向 发出 POST 请求`74.125.225.176`。此后不久，Google 服务器（来自同一个 IP）以可能的选项列表进行响应，如下所示：

```
.testing.....D..?..
.test...........
.testting...........
.texting........... 
```

似乎涉及的两个 URL 是 www.google.com/m/appreq/vs 和 www.google.com/m/voice-search。

这似乎是它的要点。基本 HTTP 操作 (GET/POST) 请求。我不确定19294端口如何适应事物，但我认为它是语音数据的原始传输，通过HTTP处理和返回。我希望这可以帮助任何偶然发现同样问题的人。

# c# - 如何在 C#.Net 中使用 XmlWriter 格式化 XML？

> ID：11192440
> 
> 赞同：2
> 
> 时间：2012-06-25T15:34:41.970
> 
> 标签：c#, xml, xmlwriter

我想要格式如下的 XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <ac:Main xmlns:trip="http://www.test.com/main.xsd"
     xmlns:abc="http://www.test.com/Types.xsd"
     xmlns:tw="http://www.test.com/TW.xsd"
     xmlns:ck="http://www.test.com/CK.xsd"
     xmlns:k1="http://www.test.com/K1.xsd"
     xmlns:d1="http://www.test.com/D1.xsd"
     xmlns:ac="http://www.test.com/Ac.xsd"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.test.com/Ac.xsd file:/D:/schema/AC.xsd">
        <ac:Records>
            <d1:Header>
           <abc:FirstElement>firstValue</abc:FirstElement>
        </d1:Header>
       </ac:Records>
     </ac:Main> 
```

因此，我使用 XmlWriter 编写了如下代码：

```
 using (XmlWriter writer = XmlWriter.Create(path, settings))
        {
            writer.WriteStartElement("ac", "Main", "xmlns");
            writer.WriteAttributeString("xmlns", "trip", null,  http://www.test.com/main.xsd");
            writer.WriteAttributeString("xmlns", "abc", null,    http://www.test.com/Types.xsd");
            writer.WriteAttributeString("xmlns", "tw", null, http://www.test.com/TW.xsd");
            writer.WriteAttributeString("xmlns", "kc", null, "http://www.test.com/CK.xsd");
            writer.WriteAttributeString("xmlns", "k1", null, "http://localhost:8080/K1.xsd");
            writer.WriteAttributeString("xmlns", "d1", null, "http://localhost:8080/D1.xsd");                  
            writer.WriteAttributeString("xsi","schemaLocation", "http://www.w3.org/2001/XMLSchema-instance", "http://www.test.com/Ac.xsd file:/D:/schema/AC.xsd");

           // writer.WriteAttributeString("xmlns", "ac", null, "http://www.test.com/Ac.xsd ");

            writer.WriteStartElement("ac", "Records", "xmlns");  
            writer.WriteStartElement("d1", "Header", "xmlns");

            writer.WriteStartElement("abc", "FirstElement", "xmlns");
            writer.WriteString("firstValue");
            writer.WriteEndElement(); 
            writer.WriteEndElement(); 
            writer.WriteEndElement(); 
        } 
```

但取消注释行 writer.WriteAttributeString("xmlns", "ac", null, "http://www.test.com/Ac.xsd "); 产生错误“前缀 'ac' 不能在同一起始元素标记内从 'xmlns' 重新定义为 'http://www.test.com/Ac.xsd'。”

因此，我如上面的代码所示注释了该行，我得到的输出为：

```
 <?xml version="1.0" encoding="utf-8"?>
    <ac:Main 
     xmlns:wctrp="http://www.test.com/main.xsd"
     xmlns:abc="http://www.test.com/Types.xsd"
     xmlns:tw="http://www.test.com/TW.xsd"
     xmlns:ck="http://www.test.com/CK.xsd"
     xmlns:k1="http://www.test.com/K1.xsd"
     xmlns:d1="http://www.test.com/D1.xsd"
     xmlns:ac="http://www.test.com/Ac.xsd"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.test.com/Ac.xsd file:/D:/schema/AC.xsd" 
     xmlns:ac="xmlns">
      <ac:Records>
            <d1:Header xmlns:hd1="xmlns">
        <abc:FirstElement  xmlns:iaiabc="xmlns">firstValue</abc:FirstElement>
        </d1:Header>
      </ac:Records>
     </ac:Main> 
```

不需要的属性是元素 'Main' 中的 xmlns:ac="xmlns"、'd1:Header' 中的 xmlns:hd1="xmlns" 和
'abc:FirstElement' 中的 xmlns:iaiabc="xmlns"。

任何人都好心地建议我应该怎么做才能删除不需要的属性并以最高格式获得输出。

我是 XmlWriter 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:11:41.607

您在滥用 WriteStartElement。命名空间不应该是 xmlns。它应该是您要使用的实际命名空间。此外，由于 ac 的第一次出现出现在属性写入之前，因此不要为 ac 包含 xmlns 属性行。ac 的 xmlns 属性将由编写器自动生成。

您实际上可以省略所有 xmlns 属性行，但随后将在它们出现的第一个元素上声明命名空间。

```
 using (XmlWriter writer = XmlWriter.Create(path))
    {
        writer.WriteStartElement("ac", "Main", "http://www.test.com/Ac.xsd");
        writer.WriteAttributeString("xmlns", "trip", null, "http://www.test.com/main.xsd");
        writer.WriteAttributeString("xmlns", "abc", null, "http://www.test.com/Types.xsd");
        writer.WriteAttributeString("xmlns", "tw", null, "http://www.test.com/TW.xsd");
        writer.WriteAttributeString("xmlns", "kc", null, "http://www.test.com/CK.xsd");
        writer.WriteAttributeString("xmlns", "k1", null, "http://localhost:8080/K1.xsd");
        writer.WriteAttributeString("xmlns", "d1", null, "http://localhost:8080/D1.xsd");                  
        writer.WriteAttributeString("xsi","schemaLocation", "http://www.w3.org/2001/XMLSchema-instance", "http://www.test.com/Ac.xsd file:/D:/schema/AC.xsd");

        writer.WriteStartElement("ac", "Records", "http://www.test.com/Ac.xsd");  
        writer.WriteStartElement("d1", "Header", "http://localhost:8080/D1.xsd");

        writer.WriteStartElement("abc", "FirstElement", "http://www.test.com/Types.xsd");
        writer.WriteString("firstValue");
        writer.WriteEndElement(); 
        writer.WriteEndElement(); 
        writer.WriteEndElement(); 
    } 
```

# javascript - JQueryUI 滑块 - 当前位置的工具提示

> ID：11192442
> 
> 赞同：2
> 
> 时间：2012-06-25T15:34:51.957
> 
> 标签：javascript, jquery, jquery-ui, slider, tooltip

目前我有一个滑块和一个小的输入文本框，它会根据您在其上滚动的位置进行更新。

这是javascript：

```
$("#slider").slider({
    value: 500,
    min: 0,
    max: 1000,
    step: 50,
    slide: function(event, ui) {
        $("#budget").val(ui.value);
    },
    change: function(event, ui) {}
});
$("#budget").val($("#slider").slider("value"));​ 
```

这是html/css：

```
<input type="text" id="budget" style="width:50px;text-align:center"/>

<div id="slider"></div>​ 
```

但是，在滑块顶部带有图形的小文本框看起来有点奇怪，所以我希望它更新其水平位置，使其位于滑块手柄（.ui-slider-handle）的上方，如果可能 - 就像一种工具提示。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T15:57:06.633

我不确定您是否需要输入字段或只是一种显示文本的方式，但您可以显示类似**[jsFiddle 示例](http://jsfiddle.net/j08691/bEze7/1/)**的工具提示。

**jQuery**

```
var tooltip = $('<div id="tooltip" />').css({
    position: 'absolute',
    top: -25,
    left: -10
}).hide();
$("#slider").slider({
    value: 500,
    min: 0,
    max: 1000,
    step: 50,
    slide: function(event, ui) {
        tooltip.text(ui.value);
    },
    change: function(event, ui) {}
}).find(".ui-slider-handle").append(tooltip).hover(function() {
    tooltip.show()
}, function() {
    tooltip.hide()
})​ 
```

# javascript - IE7 jQuery fadeIn() fadeOut() 黑色光晕

> ID：11192443
> 
> 赞同：0
> 
> 时间：2012-06-25T15:34:51.903
> 
> 标签：javascript, jquery, internet-explorer-7, fadein, fadeout

就像许多其他开发人员一样，我在使用 CSS PNG 背景时遇到了同样的黑色光晕问题。（忽略模糊。专注于黑色光晕）。

![IE7 黑晕](../Images/08ef55efebf8f6b501d4001e5d02b7c0.png)

==========HTML==========

```
<div class="s4-notdlg append-bottom-x" id="header"> <a class="show-settings active" href="javascript:;"></a>
  <div class="container">
    <div class="span-13 last">
      <div id="explore"> <a id="header-home-icon" href="" class=""></a> <a id="menu" href="javascript:;" class=""></a>
        <div id="dropdown" style="display: none;">
          <div id="wrap"> </div>
        </div>
        <a style="bottom: 112px;position: absolute;right: 84px;" class="closeThis close" href="javascript:;"></a> </div>
    </div>
  </div>
</div> 
```

==========CSS==========

```
a#menu.active {
    background-position: -399px -41px;
}
#dropdown {
    background: url(images/bg/menu_dropdown_bg.png) no-repeat;
    height: 340px;
    /*height: 556px;*/
    position: absolute;
    right: -66px;
    top: 48px;
    width: 875px;
    z-index: 99999;
    display:none;
}
#dropdown #wrap {
    /*height: 413px;*/
    height: 211px;    
    margin: 26px 91px 0;
    width: 698px;
} 
```

==========jQuery==========

```
 //menu
var menu = $('#menu');
var dropdown = $('#dropdown');

menu.toggle(function () {
    menu.addClass('active');
    dropdown.fadeIn();
}, function () {
    menu.removeClass('active');
    dropdown.fadeOut();
    return false;
});
dropdown.mouseleave(function () {
    menu.trigger('click');
}); 
```

这是我已经实现的，没有骰子：

*   [如何解决 hack-fading-semi-transparent-png-bug-in-ie8](https://stackoverflow.com/questions/1204457/how-to-solve-hack-fading-semi-transparent-png-bug-in-ie8)

*   [jquery-ie-fadein-and-fadeout-opacity](https://stackoverflow.com/questions/1284163/jquery-ie-fadein-and-fadeout-opacity)

*   [jacklmoore 即透明度问题](http://www.jacklmoore.com/notes/ie-transparency-problems)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T10:10:41.407

There isn't a straightforward answer to this, but here goes - IE6 cannot handle alpha transparency. IE7 and 8 only have partial implementations of handling alpha transparency, and don't deal with fading them.

There are lots of unpleasant ways of fixing this, so the approach I personally take is that these are older browsers and the effect are purely decorative, so make your life easier and just disable this background for these browsers.

However, that doesn't answer your question. What you need to do is [apply the "AlphaImageLoader" proprietary filter in IE](https://stackoverflow.com/questions/1204457/how-to-solve-hack-fading-semi-transparent-png-bug-in-ie8). You say you've tried it, but it's not in your posted code, can you post what you tried to show us an example?

# c# - 多次处理对象

> ID：11192445
> 
> 赞同：4
> 
> 时间：2012-06-25T15:34:53.080
> 
> 标签：c#, ca2202

我有以下代码，它使用流打开和修改 Open XML 文档，然后保存该流的新二进制表示：

```
MemoryStream stream = null;
try
{
    stream = new MemoryStream();
    stream.Write(this.GetBinaryRepresentation(), 0, this.GetBinaryRepresentation().Length);

    using (WordprocessingDocument document = WordprocessingDocument.Open(stream, true))
    {
        OfficeDocument.ModifyDocument(document);
        this.SetBinaryRepresentation(stream.ToArray());
        stream = null;
    }
}
finally
{
    if (stream != null)
    {
        stream.Dispose();
    }
} 
```

我最初使用了两个 using 块（一个用于 MemoryStream，第二个用于 WordprocessingDocument），但收到警告 CA2202：“对象'流'可以在方法中多次处理......”根据[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms182334.aspx)，我修改了上面的代码（将外部使用转换为尝试），但我仍然收到此警告。

我不确定如何构建此方法以确保在流上仅调用一次 Dispose。我不想简单地禁止这个警告，因为 MSDN 文章指出你不应该依赖 Dispose 可以安全地多次调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:38:22.643

多次处理一个对象应该始终是安全的。从[Dispose 的文档中](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)：

> 如果多次调用对象的 Dispose 方法，则对象必须忽略第一次调用之后的所有调用。如果多次调用其 Dispose 方法，则该对象不得引发异常。

话虽这么说，使用语句绝对是这里的方法。您收到该方法的唯一原因是您明确处置对象，这不是必需的，因为 using 语句应始终仅处置对象一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:39:55.233

如果在将流设置为 null 之前在 using 块中引发异常，则流仍可能被释放两次。试试这个：

```
MemoryStream stream = null;
MemoryStream streamToDispose = null;
try
{
    streamToDispose = stream = new MemoryStream();
    stream.Write(this.GetBinaryRepresentation(), 0, this.GetBinaryRepresentation().Length);

    using (WordprocessingDocument document = WordprocessingDocument.Open(stream, true))
    {
        streamToDispose = null;
        OfficeDocument.ModifyDocument(document);
        this.SetBinaryRepresentation(stream.ToArray());
    }
}
finally
{
    if (streamToDispose != null)
    {
        streamToDispose.Dispose();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T16:01:26.903

MSDN文章中的示例对您不起作用的原因是**他们在进入 using 块后立即将流设置为 null**，而您在 using 块中使用流并在之后将流设置为 null 。`stream = null`如果在您的语句之前抛出异常，`stream`将在退出 using 块时处理，然后在您的 finally 块中再次处理。

不幸的是，由于您需要在`document`更新后访问您的流，因此我看不到一种干净的方法可以`stream = null`在您的 using 语句中使用他们的设置示例来避免多次`Dispose()`调用。另一种方法是您可以在 try 块之外声明它们`stream`，`document`然后在您的 finally 中清理它们，如下所示：

```
MemoryStream stream = null;
WordprocessingDocument document = null;
try
{
    stream = new MemoryStream();
    stream.Write(this.GetBinaryRepresentation(), 0, this.GetBinaryRepresentation().Length);

    document = WordprocessingDocument.Open(stream, true));

    OfficeDocument.ModifyDocument(document);
    this.SetBinaryRepresentation(stream.ToArray()); 
}
finally
{
    if( document != null)
    {
        document.Dispose();
    }
    // Catch the case where an error occurred before document was defined.
    else
    {
        stream.Dispose();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T15:37:47.823

using 语句处理对象 - 所以本质上你调用 dispose 两次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T15:58:39.613

当您的代码将 using 块留在 周围时`WordProcessingDocument`，它将调用 dispose。

```
using (WordprocessingDocument document = WordprocessingDocument.Open(stream, true)) 
```

由于在其构造函数中`WordProcessingDocument`接受了一个实例`stream`，因此它会在调用该流实例时调用 dispose `WordProcessingDocument.Dispose`。然后你进入你调用的 finally 块`stream.Dispose()`——你现在在流实例上调用了 Dispose() 两次。

# objective-c - 如何在模态调用的视图上使用 MPMoviePlayerViewController 全屏播放电影

> ID：11192447
> 
> 赞同：0
> 
> 时间：2012-06-25T15:34:58.450
> 
> 标签：objective-c, ios5, mpmovieplayercontroller

在一个视图中，我有这个代码来全屏播放电影：

```
NSURL *movieURL = [NSURL URLWithString:@"http://stream.qtv.apple.com/events/jan/1201oihbafvpihboijhpihbasdouhbasv/12pibasvpqihbsdfvihbasdv01_iphone_vod_ref.mov"];

self.mpc = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
NSLog(@"self mpc: %@", self.mpc);
[[NSNotificationCenter defaultCenter] addObserver:self  
                                         selector:@selector(moviePlayBackDidFinish:)  
                                             name:MPMoviePlayerPlaybackDidFinishNotification  
                                           object:self.mpc ];
self.mpc.moviePlayer.movieSourceType = MPMovieSourceTypeUnknown;
self.mpc.moviePlayer.shouldAutoplay = YES; 
self.mpc.view.frame = self.view.frame;

[self.view addSubview:self.mpc.view];
self.mpc.moviePlayer.fullscreen = YES;
[self.mpc.moviePlayer play]; 
```

使用此代码调用视图本身

```
 UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone"
 bundle: nil];
 TestViewController *controller = [mainStoryboard 
 instantiateViewControllerWithIdentifier: @"testController"];
 [self presentModalViewController:controller animated:YES]; 
```

电影播放正常，但在顶部有一些 MPMoviePlayerViewController 没有使用的空间。

这是显示问题的屏幕截图：[https ://www.dropbox.com/s/1dje2ar6ynk6855/IMG_2447.PNG](https://www.dropbox.com/s/1dje2ar6ynk6855/IMG_2447.PNG)

（我已将 testController 视图的背景设为黄色）

这部电影怎么能全屏播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:24:30.017

尝试以另一种模式呈现视频，例如：

我没有测试这段代码，但我认为它可以解决你的问题，因为你提出的问题可能是因为之前的模态。

```
NSURL *movieURL = [NSURL URLWithString:@"http://stream.qtv.apple.com/events/jan/1201oihbafvpihboijhpihbasdouhbasv/12pibasvpqihbsdfvihbasdv01_iphone_vod_ref.mov"];

self.mpc = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
NSLog(@"self mpc: %@", self.mpc);
[[NSNotificationCenter defaultCenter] addObserver:self  
                                         selector:@selector(moviePlayBackDidFinish:)  
                                             name:MPMoviePlayerPlaybackDidFinishNotification  
                                           object:self.mpc ];
self.mpc.moviePlayer.movieSourceType = MPMovieSourceTypeUnknown;
self.mpc.moviePlayer.shouldAutoplay = YES; 
self.mpc.view.frame = self.view.frame;

[self presentModalViewController:self.mpc animated:NO];
self.mpc.moviePlayer.fullscreen = YES;
[self.mpc.moviePlayer play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:17:38.620

也许尝试这样的事情：

```
 [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    self.view.center = CGPointMake(self.view.center.x, self.view.center.y-100);
    [UIView commitAnimations]; 
```

如果这不起作用，请尝试不使用模态视图控制器。

# c# - 在 C# 中将 2012-06-28T14:30:00-04:00 转换为 yyyyMMddTHHmm 格式

> ID：11192449
> 
> 赞同：0
> 
> 时间：2012-06-25T15:34:59.397
> 
> 标签：c#, datetime, timezone, iso8601

我想将 c# 中的日期（如 2012-06-28T14:30:00-04:00）转换为“yyyyMMddTHHmm”格式，两个日期都是字符串。

```
string currentDate="2012-06-28T14:30:00-04:00";
string requiredDate="yyyyMMddTHHmm" 
```

当我尝试使用 Convert.ToDateTime() 转换此日期时，C# 返回“20120629T0000-04:00”，但这不是正确的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:41:27.320

查看[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)(MSDN)。我想仅在您的实例上使用该`ToString()`方法可能就足够了。`DateTime`

可能您可能需要在转换方法的适当重载中指定（[此处](http://msdn.microsoft.com/de-de/library/system.globalization.cultureinfo%28v=vs.100%29.aspx)`CultureInfo`为MSDN ）。服务器和客户端应用程序可能处于不同的文化和/或时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:10:54.763

`DateTime.Parse("2012-06-28T14:30:00-04:00").ToString("yyyyMMddTHHmm")`产生您可能想要的价值。

请注意，将值从绝对 ISO8601 格式更改为本地 ISO8601 格式时应谨慎操作，因为它会更改值的含义并且通常会更改值本身。

请确保您真正需要以下哪些选项（并相应地调整代码）：

*   只需从值中删除时间。如果值来自不同的时区，将产生半随机时间。
*   始终将值移动到给定的时区并使其本地化到该时区。
*   始终将值移动到当前时区并使其本地到当前时区

或者，也许您正在寻找其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:45:58.100

我不确定这是您正在尝试的格式

```
string currentDate="2012-06-28T14:30:00-04:00";
DateTime.Parse(currentDate).ToString("o") 
```

这会给你`2012-06-29T00:00:00.0000000+05:30`

# jsf - 带有接缝面的动态 Web 项目

> ID：11192451
> 
> 赞同：1
> 
> 时间：2012-06-25T15:35:15.623
> 
> 标签：jsf, seam

我尝试使用 Seam-Faces(Eclipse) 启动一个新的动态 Web 项目。我创建了一个新的 JSF-Facility 并添加了来自 Seam-Faces 官方主页的所有 jar 文件。当我尝试创建一个动态 web 项目时，eclipse 说找不到以下文件：

javax.faces.FactoryFinder

我做错了什么？是否可以在没有 Seam-Framework 的情况下使用 Seam-Faces ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:33:22.693

不再有 Seam 框架。Seam 3 是一堆您可以使用的可重用 CDI 扩展。开始使用 Seam3 模块的最佳方式是使用 maven 进行库管理。有关如何配置 seam-faces 依赖项的更多信息，请参见[此处](http://seamframework.org/Seam3/FacesModule)。对于您面临的例外情况，请确保 WEB-INF\lib 中没有 jsf jar，以防您使用 JBoss AS 或 Glassfish 等 Java EE 服务器。更多信息请看[这里](https://stackoverflow.com/questions/5259145/exception-could-not-find-factory-javax-faces-context-facescontextfactory)。

# .net - ADFS 身份验证委派桌面/移动应用程序

> ID：11192456
> 
> 赞同：4
> 
> 时间：2012-06-25T15:35:31.610
> 
> 标签：.net, authentication, oauth-2.0, adfs2.0, adfs

我想知道是否有人可以指出我正确的方向。我们目前正在考虑为客户端托管一个 Web 应用程序，该应用程序将对客户端的 ADFS IIS 服务器进行身份验证，以便利用 SSO 等。这一切都很好，没有问题。

当我们考虑现有的桌面和移动应用程序（.NET、iOS、Android 等）时，问题就出现了。我们需要针对与我们的 Web 应用程序相同的用户存储对这些应用程序进行身份验证。

是否可以针对外部 ADFS 服务器对 Windows 桌面应用程序（用 .NET 编写）进行身份验证？如果是这样，请你举个例子吗？

是否可以针对 ADFS 对本机移动应用程序进行身份验证？我想我们需要手动创建 HTTP 请求等来处理这个问题。有人可以指出我的任何相关文档/示例吗？

或者，对于移动应用程序，托管我们自己的充当“中间人”的内部网络服务会更好吗？同样，任何这样的例子都将不胜感激。

谢谢大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:37:15.153

这取决于您从客户端（移动或桌面）调用的服务类型。如果它是一个 SOAP Web 服务，那么它就全部支持开箱即用（例如使用 WS-Trust）。WCF 已经为基于声明的身份验证提供绑定，因此除了 .NET 之外您不需要太多客户端。

移动客户端倾向于支持轻量级协议（例如 OAuth、REST 端点等）。ADFS 不支持这些，但您可以添加 ACS（Windows Azure Active Directory）并将其作为中介，为您进行协议转换。

这两种情况的好例子都可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ff423674.aspx](http://msdn.microsoft.com/en-us/library/ff423674.aspx)

具体来说：

**SOAP：http:** [//msdn.microsoft.com/en-us/library/hh446528](http://msdn.microsoft.com/en-us/library/hh446528)

**REST / 设备：http:** [//msdn.microsoft.com/en-us/library/hh446533](http://msdn.microsoft.com/en-us/library/hh446533)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:39:08.593

另一种可能的解决方案是使用自定义 STS，将 OAuth“转换”为 SAML 令牌，然后将 ADFS 与自定义 STS 联合。[Identity Server](http://identityserver.codeplex.com/)中有一个这样的例子。

因此，链条将是：桌面和移动 - OAuth - 自定义 STS - WS Fed - ADFS

# java - 使用 JFormattedText 的 getValue 在另一个 JFormattedText 字段中显示

> ID：11192461
> 
> 赞同：5
> 
> 时间：2012-06-25T15:35:50.700
> 
> 标签：java, swing, jformattedtextfield

我有一个程序，我根据选择的单选按钮计算 2 个变量中的 1 个。我正在尝试使用`getValue`从一个`JFormattedText`字段中获取一个值并将其显示在另一个`JFormattedText`字段上（最终我将使用该数字进行一些计算）。

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.text.DecimalFormat;

public class FutureValueFrame extends JFrame
{
    public FutureValueFrame()
    {
        setTitle("Sample App");
        setSize(400,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args)
    {
        JFrame f = new FutureValueFrame();

        //GUI and BUTTONS
        JRadioButton monthlyRadioButton = new JRadioButton("Monthly Payment");
        JRadioButton loanAmountButton = new JRadioButton("Loan Amount");
        ButtonGroup selection = new ButtonGroup();
        selection.add(monthlyRadioButton);
        selection.add(loanAmountButton);

        JFormattedTextField loanAmountField = new JFormattedTextField(new DecimalFormat("####.##"));
        JFormattedTextField interestRateField = new JFormattedTextField(new DecimalFormat("####.##"));
        JFormattedTextField yearField = new JFormattedTextField(new DecimalFormat("####.##"));
        JFormattedTextField monthlyPaymentField = new JFormattedTextField(new DecimalFormat("####.##"));

        JPanel menuPanel = new JPanel();
        menuPanel.setLayout(new GridLayout(1,2));

        //ACTION LISTENER FOR RADIO BUTTONS
        monthlyRadioButton.addActionListener(new SelectionListener(monthlyRadioButton, loanAmountButton, loanAmountField, monthlyPaymentField));
        loanAmountButton.addActionListener(new SelectionListener(monthlyRadioButton, loanAmountButton, loanAmountField, monthlyPaymentField));

        JPanel topPanel = new JPanel();
        topPanel.setLayout(new GridLayout(1,2));
        topPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK));
        topPanel.add(monthlyRadioButton);
        topPanel.add(loanAmountButton);

        JPanel botPanel = new JPanel();
        botPanel.setLayout(new GridLayout(4,2));

        botPanel.add(new JLabel("Loan Amount:"));
        botPanel.add(loanAmountField);

        botPanel.add(new JLabel("Yearly Interest Rate:"));
        botPanel.add(interestRateField);

        botPanel.add(new JLabel("Number of Years:"));
        botPanel.add(yearField);

        botPanel.add(new JLabel("Monthly Payment:"));
        botPanel.add(monthlyPaymentField);

        JPanel container = new JPanel();
        container.setLayout(new GridLayout(3,1));
        container.add(topPanel);
        container.add(botPanel);
        container.add(menuPanel);

        f.add(container);

        JButton calculateButton = new JButton("Calculate");

        calculateButton.addActionListener(new CalculateMonthlyListener(loanAmountField, interestRateField, yearField, monthlyPaymentField, selection, monthlyRadioButton, loanAmountButton));

        JButton exitButton = new JButton("Exit");
        exitButton.addActionListener(new ExitListener());

        menuPanel.add(calculateButton);
        menuPanel.add(exitButton);     

        f.setVisible(true);
        f.setLocationRelativeTo(null);
    }

    class CalculateMonthlyListener implements ActionListener
    {
        private JFormattedTextField loanAmountField;
        private JFormattedTextField monthlyPaymentField;
        private JFormattedTextField interestRateField;
        private JFormattedTextField yearField; 
        private double result;
        private ButtonGroup selection;
        private JRadioButton monthlyRadioButton;
        private JRadioButton loanAmountButton;

        public CalculateMonthlyListener (JFormattedTextField loanAmountField,
                                        JFormattedTextField interestRateField,
                                        JFormattedTextField yearField,
                                        JFormattedTextField monthlyPaymentField,
                                        ButtonGroup selection,
                                        JRadioButton monthlyRadioButton,
                                        JRadioButton loanAmountButton)
        {
            this.interestRateField = interestRateField;   
            this.yearField = yearField;
            this.loanAmountField = loanAmountField;
            this.selection = selection;
            this.monthlyRadioButton = monthlyRadioButton;
            this.loanAmountButton = loanAmountButton;
            this.monthlyPaymentField = monthlyPaymentField;
        }

        public void actionPerformed(ActionEvent e)
        {
            if (selection.getSelection().equals(monthlyRadioButton.getModel()))
            {
                result  = ((Double) interestRateField.getValue()).floatValue();
                monthlyPaymentField.setValue(new Double(result));
                System.out.println("You selected monthly");
            }
            else
            {
                loanAmountField.setValue(new Double(12.22));
                System.out.println("You selected loan");
            }
        }
    }

    class ExitListener implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
            //f.dispose();
            System.exit(0);
            //System.out.println("You clicked exit");
        }
    }

    class SelectionListener implements ActionListener
    {
        private JRadioButton monthlyRadioButton;
        private JRadioButton loanAmountButton;
        private JFormattedTextField loanAmountField;
        private JFormattedTextField monthlyPaymentField;

        public SelectionListener (JRadioButton monthlyRadioButton,
                                JRadioButton loanAmountButton,
                                JFormattedTextField loanAmountField,
                                JFormattedTextField monthlyPaymentField)
        {
            this.monthlyRadioButton = monthlyRadioButton;   
            this.loanAmountButton = loanAmountButton;
            this.loanAmountField = loanAmountField;
            this.monthlyPaymentField = monthlyPaymentField;
        }

        public void actionPerformed(ActionEvent event)
        {
            if(event.getSource() == monthlyRadioButton)
            {
                loanAmountField.setEditable(false);
                monthlyPaymentField.setEditable(true);
            }
            else
            {
                monthlyPaymentField.setEditable(false);
                loanAmountField.setEditable(true);
            }
        }
    }
} 
```

我的问题出现在下面的代码片段中：

```
public void actionPerformed(ActionEvent e) {
    if (selection.getSelection().equals(monthlyRadioButton.getModel())) {
         result  = ((Double) interestRateField.getValue()).floatValue();
         monthlyPaymentField.setValue(new Double(result));
        System.out.println("You selected monthly");
    } else {
        loanAmountField.setValue(new Double(12.22));
        System.out.println("You selected loan");
    }
} 
```

在这里，我试图将结果分配`getValue`给结果。我查看了 Oracle 文档，似乎获取值的代码很简单`interestRateField.getValue();`，但当我尝试这个时，我收到一条错误消息，`Can't convert object to double`所以我添加`floatValue()`并强制转换它以消除错误。

当我按下计算时，它不会显示来自`interestRateField`in的输入`monthlyPaymentField`。

**如何获得我的价值（通过`JFormattedTextField`使用`DecimalFormat`） using`getValue`然后以不同的方式显示它`JFormattedTextField`？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T21:54:10.887

略微调整了 Hovercraft Full Of Eels 的答案以使用 的`getValue`和`setValue`方法`JFormattedTextField`并跳过手动解析/格式化

```
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import java.awt.event.ActionEvent;
import java.text.DecimalFormat;

public class FutureValueFrame extends JFrame {
  public static void main( String[] args ) {
    DecimalFormat format = new DecimalFormat( "####.##" );
    //in case you always want to see the 2 fraction digits
    //format.setMinimumFractionDigits( 2 );
    final JFormattedTextField field1 = new JFormattedTextField(
        format );
    final JFormattedTextField field2 = new JFormattedTextField(
        format );
    field1.setColumns( 15 );
    field2.setColumns( 15 );
    JButton btn = new JButton( new AbstractAction( "Multiply by 2" ) {

      @Override
      public void actionPerformed( ActionEvent e ) {
        Number value = ( Number ) field1.getValue();
        if ( value != null ){
          field2.setValue( 2 * value.doubleValue() );
        }
      }
    } );

    JPanel panel = new JPanel();
    panel.add( field1 );
    panel.add( btn );
    panel.add( field2 );
    JOptionPane.showMessageDialog( null, panel );
  }
} 
```

这至少使用了`JFormattedTextField`它的设计，但仍然具有`JFormattedTextField`.

[在tips4java 网站](http://tips4java.wordpress.com/)上有一篇关于[改进`JFormattedTextField`](http://tips4java.wordpress.com/2010/02/21/formatted-text-field-tips/)的博文，它解决了大部分问题，可能值得多看一下（尽管我仍然认为该版本可以改进，例如，在输入无效数据后立即将背景涂成红色给用户一个视觉线索。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:44:53.450

看看，并为这项工作使用[DocumentListener ，](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)[例如](https://stackoverflow.com/a/10848530/714968)

编辑

1.你的代码太接近[如何使用格式化文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

2.为[JRadioButton使用](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#radiobutton)[ItemListener](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)（总是触发两个事件`SELECTED`/ `DESELECTED`）

3.你不能为两个或更多附加聚合的[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)`JComponents`，

# c++ - 编译 C++ 子类

> ID：11192464
> 
> 赞同：-2
> 
> 时间：2012-06-25T15:35:56.683
> 
> 标签：c++

我对下面的 C++ 类结构感到困惑：

```
A.h:
  class A{
};

A.cpp
//implementation for A
  void A::someMethod();

B.cpp:
#include "A.h"

B : public A{

//stuff for B
};
int main{
   B b();
   b.someMethod();
} 
```

g++ A.cpp Ah --> 编译正常

g++ B.cpp --> 对 main 的未定义引用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:41:15.097

你需要做：

```
g++ A.cpp -c
g++ B.cpp -c 
```

生成 Ao 和 Bo（没有`-c`g++ 期望链接并生成一个完整的可执行文件 - 并期望一个`main`函数，而 -c 指定编译和汇编但不链接）。

然后，您可以使用以下方法将两个目标文件链接到可执行文件中：

```
g++ A.o B.o 
```

另外：不要在命令行上指定头文件。您需要`#include`在 cpp 文件中使用指令指定它们，然后编译器会将它们的内容直接拉入，作为编译每个 cpp 的预处理阶段。如果您对 C++ 编译阶段的详细信息感兴趣，Microsoft 在[此处](http://msdn.microsoft.com/en-us/library/bxss3ska.aspx)详细介绍了他们的编译器。

# javascript - JavaScript getMonth() 返回 50 作为月份值

> ID：11192465
> 
> 赞同：2
> 
> 时间：2012-06-25T15:36:00.363
> 
> 标签：javascript, jquery

早安帮派。

我有一个使用 javscript Date 对象预先填充的 jQuery Datepicker 对象，并且我让 getMonth() 返回 50 作为月份，而不是 5。这在 2012 年 4 月 27 日之前一直有效。

这是代码：

```
$(document).ready(function(){

$('#datepicker1').attr('readonly', 'readonly');

var press_date = new Date(); //This is the Date object that you're getting from external source

$('#datepicker1').val(press_date.getFullYear()+'-'
                     +press_date.getMonth()+1+'-'
                     +press_date.getDate());

$('#datepicker1').datepicker({
                     showAnim:'slide',showOn: 'button',
                     dateFormat : 'yy-mm-dd',
                     buttonImage: 'images/calendar.jpg',
                     buttonImageOnly: true,onSelect: function(dateText, inst) {} 
                    });
$('#datepicker').attr('readonly', 'readonly');

$('#datepicker').datepicker({
                     showAnim:'slide',showOn: 'button',
                     dateFormat : 'yy-mm-dd',
                     buttonImage: 'images/calendar.jpg',
                     buttonImageOnly: true,onSelect: function(dateText, inst) {} 
                    });
}); 
```

我的猜测是这是一个很容易解决的问题，但我还没有在网上看到任何解释它的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:40:34.593

问题是您的表达式中的 x.getMonth()+1 。由于您要连接字符串，因此解析器会感到困惑。您可以将 x.getMonth()+1 括在括号中，或者只是将该计算移到字符串连接之外：

例如，用括号括起来：

`x.getFullYear()+'-'+(x.getMonth()+1)+'-'+x.getDate()`

**更新：**为了得到月份值零填充，我会明确地将计算移到它自己的行以使其清楚：

```
month = x.getMonth() + 1; 
monthString = month < 9 ? '0' + month : month; 
dbDate = x.getFullYear() + '-' + monthString + '-' + x.getDate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:40:18.790

将代码中将月份加一的部分括在括号中，以便 JavaScript 在数学意义上解释 + 而不是字符串连接：

```
$('#datepicker1').val(press_date.getFullYear() + '-' + 
                     (press_date.getMonth() + 1) + '-' + 
                     press_date.getDate()); 
```

[http://jsfiddle.net/mblase75/B53u3/](http://jsfiddle.net/mblase75/B53u3/)

# erlang - 钢筋生成错误

> ID：11192466
> 
> 赞同：2
> 
> 时间：2012-06-25T15:36:05.393
> 
> 标签：erlang, rebar, build-tools

我正在尝试使用`rebar`来生成节点，并且我已按照[此处](https://github.com/basho/rebar/wiki/Release-handling)的说明进行操作。

跑步`rebar get-deps compile`很好，但跑步`rebar generate`给了我

```
ERROR: Unable to generate spec: read file info /home/inaimathi/common/rebar.config~ failed
ERROR: Unexpected error: rebar_abort
ERROR: generate failed while processing /home/inaimathi/common/rel: rebar_abort 
```

奇怪，考虑到这`rebar.config~`不应该在这个`generate`过程中的任何地方出现。删除`rebar.config~`并再次尝试给我同样的错误，但与`rebar.config`相反。

我的`rebar.config`样子

```
{sub_dirs, ["rel"]}.
{lib_dirs, ["deps"]}.
{deps, [{erlsha2, ".*", {git, "git://github.com/vinoski/erlsha2.git", "HEAD"}}]}. 
```

我的`reltool.config`样子

```
{sys, [
       {lib_dirs, []},
       {erts, [{mod_cond, derived}, {app_file, strip}]},
       {app_file, strip},
       {rel, "common", "1",
        [
         kernel,
         stdlib,
         sasl,
         common
        ]},
       {rel, "start_clean", "",
        [
         kernel,
         stdlib
        ]},
       {boot_rel, "common"},
       {profile, embedded},
       {incl_cond, derived},
       {mod_cond, derived},
       {excl_archive_filters, [".*"]}, %% Do not archive built libs
       {excl_sys_filters, ["^bin/.*", "^erts.*/bin/(dialyzer|typer)",
                           "^erts.*/(doc|info|include|lib|man|src)"]},
       {excl_app_filters, ["\.gitignore"]},
       {app, common, [{mod_cond, app}, {incl_cond, include}, {lib_dir, ".."}]}
      ]}.

{target_dir, "common"}.

{overlay, [
           {mkdir, "log/sasl"},
           {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},
           {copy, "files/nodetool", "\{\{erts_vsn\}\}/bin/nodetool"},
           {copy, "files/common", "bin/common"},
           {copy, "files/common.cmd", "bin/common.cmd"},
           {copy, "files/start_erl.cmd", "bin/start_erl.cmd"},
           {copy, "files/install_upgrade.escript", "bin/install_upgrade.escript"},
           {copy, "files/sys.config", "releases/\{\{rel_vsn\}\}/sys.config"},
           {copy, "files/vm.args", "releases/\{\{rel_vsn\}\}/vm.args"}
          ]}. 
```

（完全`rebar`生成，除了我必须`{lib_dir, ".."}`按照我链接的说明添加）。

我究竟做错了什么？

* * *

**编辑：**我应该提到基础知识，因为我不知道出了什么问题。Erlang R15B01 来自 Debian Wheezy 存储库，在 64 位核心 i3 上运行。我从[basho repo](https://github.com/basho/rebar/)进行了手动拉动和构建钢筋。不确定其他是否相关。

**EDIT2：同样的事情发生在**[https://github.com/downloads/basho/rebar/rebar](https://github.com/downloads/basho/rebar/rebar)的预建版本的钢筋上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:25:02.863

您应该在此[问题](https://github.com/basho/rebar/issues/213)之前的目录中运行`rebar generate`命令，现在已修复。`rel`

# javascript - jQuery $.ajax 函数在执行过程中停止

> ID：11192476
> 
> 赞同：0
> 
> 时间：2012-06-25T15:36:31.823
> 
> 标签：javascript, jquery

我正在尝试使用 RESTful 应用程序，但我的 $.ajax 函数在其执行过程中停止。

```
function addEntry()
{
$.ajax({
    type: 'POST',
    contentType: 'application/json',
    url: passAPI,
    dataType: "json",
    data: dataToJSON(),
    success: hideform
})
}

function hideform()
{
    $('#form').hide();
} 
```

数据已正确放入数据库中，但不会隐藏表单。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:46:27.497

我尝试设置一个不返回任何内容的错误语句。当我再次尝试时，它起作用了。

我想我修复了一些愚蠢的语法错误。

对不起 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:38:58.420

鉴于没有错误。这行得通吗？我添加了`function()`

```
function addEntry()
{
    $.ajax({
        type: 'POST',
        contentType: 'application/json',
        url: passAPI,
        dataType: "json",
        data: dataToJSON(),
        success: function() {
            hideform();
        }
    })
}

function hideform()
{
    $('#form').hide();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:20:10.900

假设您不使用 event.preventDefault() 如果在这种情况下，当页面重新加载以使用其默认处理程序提交表单时，ajax 调用将被切断。

如果你已经有一个

```
event.preventDefault(); 
```

那别理我哈。

# php - 如果为空字段，如何停止表单提交？

> ID：11192477
> 
> 赞同：2
> 
> 时间：2012-06-25T15:36:36.003
> 
> 标签：php, jquery, forms

我的网站仅基于一个`php`索引文件，该索引文件根据标题变量更改网站内容。`www.mydomain.com/?page=contact`加载并调出我让用户填写的表格。

我有一些`jQuery`应该**检测**是否有任何缺失的字段：

```
$("form").submit(function() {
    var isFormValid = true;
    $(".required").each(function() {
        if ($.trim($(this).val()) == "") {
            $(this).addClass("highlight");
            isFormValid = false;
        } else {
            $(this).removeClass("highlight");
        }
        if (!isFormValid) alert("Please fill in all the required fields (indicated by *)");
        return isFormValid;
    });
}); 
```

但它不工作....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:38:04.347

退出`return isFormValid`循环（**否则你会一次又一次地覆盖它的值**）：

```
$("form").submit(function() {
    var isFormValid = true;
    $(".required").each(function() {
        if ($.trim($(this).val()) == "") {
            $(this).addClass("highlight");
            isFormValid = false;
        } else {
            $(this).removeClass("highlight");
        }

    });

    if (!isFormValid) alert("Please fill in all the required fields (indicated by *)");
    return isFormValid; // put out of loop
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:38:16.620

也许是这样的？

```
$("form").submit(function() {
    var isFormValid = true;
    $(".required").each(function() {
        if ($.trim($(this).val()) == "") {
            $(this).addClass("highlight");
            isFormValid = false;
        } else {
            $(this).removeClass("highlight");
        }
    });
    // the following lines should be placed here
    if (!isFormValid) {
        alert("Please fill in all the required fields (indicated by *)");
    }
    return isFormValid;
}); 
```

* * *

甚至更短：

```
$("form").submit(function() {
    var isFormValid = $(".required").removeClass("highlight").filter(function() {
        return $.trim(this.value) == "";
    }).addClass("highlight").length == 0;

    if (!isFormValid) {
        alert("Please fill in all the required fields (indicated by *)");
    }
    return isFormValid;
}); 
```

**演示：http:** [//jsfiddle.net/YS6gw/](http://jsfiddle.net/YS6gw/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:58:06.487

```
Can you post the html works perfectly fine for me. 
Here is my Code :
------------------------

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>

    <script type="text/javascript"  src="http://code.jquery.com/jquery-latest.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $("form").submit(function() {
                var isFormValid = true;
                $(".required").each(function() {
                    if ($.trim($(this).val()) == "") {
                        $(this).addClass("highlight");
                        isFormValid = false;
                    } else {
                        $(this).removeClass("highlight");
                    }
                    if (!isFormValid) alert("Please fill in all the required fields (indicated by *)");
                    return isFormValid;
                });
            });

        });

    </script>

    <style type="text/css">
        #divMain {vertical-align: bottom;}
        .div1_style {background: #ffe4b5}
        .div2_style {background: #79b7e7}
        .highlight {background: #cd0a0a}
        .div_disabled_style {background: #6f6e73}
    </style>
</head>
<body>
<form action="#" method="post">
<div id="divMain" align="center">
    <div id="div1" class="div2_style">
        <input type="checkbox" id="checkBox1">
        <input type="text" class ="required"  id="text1"/>
        <input type="text" class ="required" id="text2"/>
        <input type="text" class ="required" id="text3"/>
        <button type="submit" id="btnSubmit">Submit</button>
    </div>
</div>
</form>
</body>
</html> 
```

# google-app-engine - 如何减少传入带宽？

> ID：11192484
> 
> 赞同：1
> 
> 时间：2012-06-25T15:36:52.097
> 
> 标签：google-app-engine, quota

我们有一个主要用作 API 的小型应用程序。它基本上**是一个图像提取器**。您向它提交一个 url，它将返回其最大的图像 url。随意[检查源代码](https://github.com/superfeedr/image-extrator)。

它运行平稳，只是我们经常遇到*传入带宽*限制”。奇怪的是，传入带宽不应该那么多。例如，今天，我们收到了`64,308 requests`和`we consumed 1.00 GBytes of the incoming bandwidth`。所有其他配额都是绿色的。

我们正在寻找调试这种情况的方法，并希望能减少这种情况。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:55:56.063

根据[文档](https://developers.google.com/appengine/docs/quotas#UrlFetch)，URLfetch 的响应计入传入带宽配额。因此，如果您每天有 65k 个请求，那么如果您为每个请求下载图像，您肯定会达到该限制。

# java - sleep方法的计时精度是否准确？

> ID：11192486
> 
> 赞同：1
> 
> 时间：2012-06-25T15:36:56.260
> 
> 标签：java, networking, network-programming, thread-sleep

我们都知道 java 线程中可用的 sleep 方法。我知道计时的精度取决于系统中硬件时钟的精度。所以我的问题是这种方法有多准确，或者更好地说明以毫秒为单位的误差是多少或考虑到一般电脑的纳秒。

我的要求是使用睡眠来同步数据传输以进行计时。数据将以固定的间隔（10-20 毫秒）发送，如果由于连续的计时错误而延迟超过 1 秒，则可能很糟糕！

那么是否建议使用also 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:54:08.223

如果你需要同步数据，我建议你自己做，而不是依靠线程在预设时间唤醒。即使用一个线程来模拟事件何时发生，按照您期望它们发生的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:40:56.820

睡眠不是你想要的，就像[这里](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)一样。我建议通读[这个](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。

# java - 多个 Java 线程同时运行时访问同一个数据库记录

> ID：11192487
> 
> 赞同：1
> 
> 时间：2012-06-25T15:36:56.837
> 
> 标签：java, mysql, multithreading

我在这里有一个相当简单的 Java 类，它创建了 2 个线程池......

*   连接到正在运行的 URL 流并逐行读取条目，将每个条目提交到后端 MySQL 数据库。

*   产生几个线程，每个线程将执行相同的过程（下）

> 1.从上面获取最旧的数据库条目
> 
> 2.解析并相应处理
> 
> 3.将几个部分保存到另一个数据库表
> 
> 4.从运行表中删除这个DB条目，表示分析完成
> 
> 5.结束线程

我需要 2 个池的原因是因为读取过程比分析快得多，并且如果我读取和分析每个条目，因为它通过条目备份太快并且传入流中断。通过进行这种分离，读取可以尽可能快地发生，并且分析可以尽可能快地进行，因为它知道要赶上的记录是安全的并且可以赶上。

我遇到的问题是**每个并发线程都获得相同的最旧记录**。我需要知道确保单独线程全部同时运行但每个线程访问唯一的最旧数据库条目的最佳方法是什么。

提前致谢。

编辑==================================

谢谢大家到目前为止的回复...

为了进一步扩展我在这里尝试的当前设置，也许这​​个代码段会有所帮助......

```
try
    {
        String strQuery1 = "SELECT lineID,line FROM lineProcessing ORDER BY lineID ASC LIMIT 1;";
        String strQuery2 = "DELETE from lineProcessing WHERE lineID = ?";

        DBConnector dbc = new DBConnector(driver,url,userName,passwd); 
        Connection con = dbc.getConnection();
        con.setAutoCommit(false);
        PreparedStatement pstmt = con.prepareStatement(strQuery1);
        rs = pstmt.executeQuery();

        //Now extract the line & Id from the returned result set
        while (rs.next()) {
            lineID = Integer.parseInt(rs.getString(1));
            line = rs.getString(2);
        } //end while 

        //Now delete that entry so that it cannot be analysed again...
        pstmt = con.prepareStatement(strQuery2);
        pstmt.setString(1, lineID.toString());
        int res=pstmt.executeUpdate();

        con.commit();
        con.setAutoCommit(true);
        con.close();
    }
    catch (SQLException e) {
        System.out.println(">>>EXCEPTION FOUND IN QUERY = " + strQuery1 + " __or__ " + strQuery2);
        e.printStackTrace();
    } 
```

...所以你可以看到基本上打开一个数据库连接，将其设置为“Autocommit = false”，执行 QUERY1，执行 QUERY2，提交两个事务最终关闭连接。这应该是每个单独的线程都需要完成的。问题是我在分析线程池中运行的每个 X 线程都被生成并且都同时执行这批代码（这是我所期望的），但不尊重我认为我已经设置的对 DB 的单一连接访问以上。然后它们都返回同一行进行分析。当线程下一次循环进行迭代 #2 时，它们都将返回这个新的最后一行以在前一次删除之后进行分析。

请有任何进一步的建议 - 包括通过 java 强制事务 SQL 的一个很好的例子？

再次感谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:42:11.187

首先，添加一个可以为空的日期时间列，表示该行已在某个时间“拾取”。

然后在您的处理线程中：

1.  开始交易
2.  查找“拾取”时间为空的最旧行
3.  *将拾取时间*更新为当前系统时间**
**   提交事务。*

 *确保您的[隔离级别](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)设置为至少`READ UNCOMMITTED`，并且没有两个线程应该获得同一行。此外，如果处理线程死亡并放弃它的行，您可以通过定期查询“拾取”时间早于某个值的行来找出这一点，并通过将拾取时间设置为空来重新处理这些行。

或者只是切换到事务性消息队列，它会自动为您完成大部分工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:53:20.197

另一种解决方案是让工作线程都等待包含行键的单例。写入行，将键放在对象中，然后通知。“下一个”工作线程将拾取密钥并对其进行操作。您将需要确保有工人在等待，什么不是。*

# html - 为什么有些表会随机继承这种 CSS 样式？

> ID：11192488
> 
> 赞同：0
> 
> 时间：2012-06-25T15:36:57.540
> 
> 标签：html, css, html-table

似乎有些表继承了它们不应该继承的样式。

我有一个自定义表格类，我只希望使用该类的表格具有 1px 宽的实心边框，但由于某种原因，其他表格似乎随机使用它。

这是它的CSS：

```
.my_custom_table td, th { border: 1px solid gray; } 
```

这是出于某种原因使用它的表的标记：

```
<table border="0" cellspacing="0" cellpadding="2" class="customer-info"> ... </table> 
```

我在想这种风格是“对于 .my_custom_table 类下的所有 td 和 td - 使用 1px 实线边框”，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:38:15.637

您的 CSS 将应用于**所有** `<th>`标签，而不仅仅是`my_custom_table`类下的标签。

试试这个：

```
.my_custom_table td, .my_custom_table th { border: 1px solid gray; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:39:44.737

`.my_custom_table td, th`表示`td`某个`my_custom_table`类中的所有元素以及所有`th`元素。请注意，这并不是`th`一个`my_custom_table`类的全部内容。只是所有的`th`.

```
.my_custom_table td, .my_custom_table th 
```

是你想要的。

# python - ZeroMQ Poller vs Tornados EventLoop

> ID：11192489
> 
> 赞同：5
> 
> 时间：2012-06-25T15:36:57.680
> 
> 标签：python, tornado, zeromq, event-loop, poller

设计明智和性能明智，建议使用哪种方法来处理多个 Zeromq 套接字，为什么？

ZeroMQ 使用的 Tornado 的 IOLoop 占用的 CPU 是否比 while 循环中用于处理多个套接字的轮询器占用的 CPU 少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:51:14.107

如果您将自己的观察/分析添加到您的问题中，那就太好了。

我认为性能上没有任何差异，但设计上存在差异。

**在轮询的情况下**

您注册要轮询的套接字，然后`if blocks`用于识别和使用每个套接字。

```
while should_continue:
        socks = dict(poller.poll())
        if socket_pull in socks and socks[socket_pull] == zmq.POLLIN:
            Work_on_socket_pull ....

        if socket_sub in socks and socks[socket_sub] == zmq.POLLIN:
             Work_on_socket_sub .... 
```

**在事件循环的情况下，** 但是当您处理多个套接字时，使用事件循环非常优雅，因为`register callbacks`.

```
stream_pull = zmqstream.ZMQStream(socket_pull)
stream_pull.on_recv(getcommand)

stream_sub = zmqstream.ZMQStream(socket_sub)
stream_sub.on_recv(process_message) 
```

从第二个示例中您可以注意到， if 块已被删除。您在其他地方编写您的套接字消息传递操作，并在套接字准备好时注册您的回调方法。`In this case on_recv()`

我希望这能澄清你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:00:47.980

由 PyZMQ 重新实现的 Tornado IO 循环无论如何都在幕后使用轮询器，因此不太可能使用比另一个更多的 CPU。

有关详细信息，请参阅[https://github.com/zeromq/pyzmq/blob/master/zmq/eventloop/ioloop.py](https://github.com/zeromq/pyzmq/blob/master/zmq/eventloop/ioloop.py)。

# facebook-graph-api - 有没有办法在它们出现在时间线上的日期之前拉出帖子？就像从 1987 年开始的那样？

> ID：11192492
> 
> 赞同：1
> 
> 时间：2012-06-25T15:37:06.713
> 
> 标签：facebook-graph-api, facebook-fql, history, facebook-timeline

在 Facebook 时间线上，您可以设置事件发生的日期。就像你出生时，结婚时一样，真的。但是，使用 API 时，它只搜索创建日期。

示例：如果我今天创建一个事件并将日期设置为 1987 年 3 月 18 日，它会正确显示在我的时间线上，但 API 将其作为今天发生的事件提取出来，因为它的“创建日期”是今天。

有没有办法在它们出现在时间线上的日期之前拉出帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:52:27.780

目前还没有办法检索生活事件。您只能检索已添加到他/她的时间线的状态。但是，您可以尝试使用 RegEx 或子字符串从故事字符串中获取日期...

# php - 如何将表单数据从 sencha 发送到 php 电子邮件脚本

> ID：11192496
> 
> 赞同：0
> 
> 时间：2012-06-25T15:37:17.513
> 
> 标签：php, touch, extjs, email

我正在尝试使用 sencha touch 表单功能将表单内容发送到 PHP 邮件脚本。我在 php 和 sencha 方面的知识相当薄弱，但仍在尝试使用我找到的 php 示例脚本使其工作。煎茶部分是具有 3 个字段的基本反馈表。

这是代码的煎茶部分：

```
 feedbackForm = Ext.create("Ext.tab.Panel", {
            items: [{
                title: 'Feedback',
                iconCls: 'user',
                xtype: 'formpanel',
        url: 'feedback.php',                    
                layout: 'vbox',
                tabBar: false,
                items: [
                                {
                                    xtype: 'fieldset',
                                    tabBar: false,
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            label: 'Your Name'
                                        },
                                        {
                                            xtype: 'emailfield',
                                            label: 'Your Email'
                                        },
                                        {
                                            xtype: 'textfield',
                                            label: 'The Good'
                                        },
                                        {
                                            xtype: 'textfield',
                                            label: 'The Bad'
                                        }
                                    ]
                                },
                                {
                                    xtype: 'button',
                                    text: 'Send',
                                    ui: 'confirm',
                                    handler: function() {
                                        this.up('formpanel').submit();                                          
                                    }
                }]
                }]
            }); 
```

this.up('formpanel').submit(); 行负责将数据发送到如下所示的 feedback.php 脚本：

```
<?php
// Configuration Settings
$SendFrom =    "Form Feedback <feedback@myDomain.com>";
$SendTo =      "myEmail@gmail.com";
$SubjectLine = "Feedback Submission";
$ThanksURL =   "thanks.html";  //confirmation page

// Build Message Body from Web Form Input
foreach ($_POST as $Field=>$Value)
 $MsgBody .= "$Field: $Value\n";
sgBody .= "\n" . @gethostbyaddr($_SERVER["REMOTE_ADDR"]) . "\n" .
 $_SERVER["HTTP_USER_AGENT"];
sgBody = htmlspecialchars($MsgBody, ENT_NOQUOTES);  //make safe

// Send E-Mail and Direct Browser to Confirmation Page
mail($SendTo, $SubjectLine, $MsgBody, "From: $SendFrom");
header("Location: $ThanksURL");
?> 
```

以上正在工作并发送电子邮件，但仅包含“标签：'The Bad''的最后一个字段内容，方式如下：null：ff（当为最后一个字段输入ff时）

在我看来，组装消息的 PHP 循环是问题所在，但也许我没有正确传输数据？

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:16:21.983

嗯，Sencha 示例中的字段没有名称。它们是否相互覆盖？如果您注释掉“The Bad”字段是出现“The Good”字段的那个？我想它可能只是发送一组物品。我会使用 Fiddler2 拦截正在发送的数据，并查看 POST 中是否包含您期望的实际数据。也许尝试给他们所有字段的名称并直接引用它们？

# ios - 抽象实体上的核心数据关系

> ID：11192497
> 
> 赞同：2
> 
> 时间：2012-06-25T15:37:17.853
> 
> 标签：ios, core-data

当一个实体设置为抽象时，在两个实体之间创建一对一关系是否合法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:19:42.590

抽象实体并不意味着被实例化。这就是为什么你~~**不能**~~建立这样的关系。您可以做的是创建一个实体从抽象实体继承的关系。

来自[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857-CJBDBHCB)：

> 关系指定目标处对象的实体或父实体。这可以与源处的实体相同（自反关系）。关系不必是同质的。如果 Employee 实体有两个子实体，例如 Manager 和 Flunky，那么给定部门的员工可能由员工（**假设 Employee 不是抽象实体**）、经理、Flunkies 或其任意组合组成。

**编辑：** 显然你可以创建这样的关系（这样子实体也可以继承关系）......

> 如果您定义实体继承层次结构（请参阅“实体继承”），当您将超实体指定为获取请求的实体时，该请求将返回超实体和子实体的所有匹配实例。在某些应用程序中，您可以将超实体指定为抽象的（请参阅“抽象实体”）。要获取抽象实体的所有具体子实体的匹配实例，请将要获取规范的实体设置为抽象实体。在“抽象实体”中描述的域的情况下，如果您使用 Graphic 实体指定提取请求，则提取将返回 Circle、TextArea 和 Line 的匹配实例。

另请参阅此答案：[核心数据：提取请求中的抽象实体](https://stackoverflow.com/questions/6327835/core-data-abstract-entity-in-fetch-request)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:48:47.913

是的。您可以拥有一个拥有“事物”的人...

# java - 如何缩小外部java库？

> ID：11192501
> 
> 赞同：3
> 
> 时间：2012-06-25T15:37:30.643
> 
> 标签：java, jar, proguard, shrink

我正在编写一个小程序，它使用约 10 个外部库。它们一起占用超过 2 兆字节。在某些库中，我们只使用 1-2 个类，因此可以安全地删除许多其他类。所以问题是如何从 jar 库中删除未使用的类？

许多其他问题都链接到 Proguard。但它不处理库（或者我做错了什么）并且还破坏了使用反射的部分代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:42:38.477

您*可以*使用[ClassDep 之](http://river.apache.org/doc/api/com/sun/jini/tool/ClassDep.html)类的东西，它静态地标识您将使用哪些类。

然而，这很容易被愚弄。想象一下您的一些代码包含：

```
Class.forName(className); 
```

因此您可以动态构建一个类名并加载该类。诸如此类的工具`ClassDep`无法识别这些情况，因此您需要对缩小的 jar 进行全面测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:15:31.907

您可以使用 maven-shade-plugin 并告诉它构建一个结合了您的代码和库的最小化 jar 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:36:39.730

ProGuard 可以与库一起处理您的代码（使用选项 -injars）。您仍然可以保留不想处理的外部库（使用选项 -libraryjars）。

任何自动收缩工具都会有反射问题。ProGuard 识别一些基本的反射，它允许你指定内部 API 的部分，为了反射而应该保留。ProGuard 支持一些强大的配置，但根据库中反射的数量，它可能仍需要反复试验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:00:15.687

您可以简单地“解压缩” JAR，只从每个 JAR 中获取您想要的类，然后将它们放在自定义存档中。Brian A. 就如何识别这些类和一些注意事项给出了很好的建议。我想补充一下，您也可能违反了许可证...

# iphone - 如何从 NSArray 中获取 NSNumber 的总和？

> ID：11192503
> 
> 赞同：26
> 
> 时间：2012-06-25T15:37:35.403
> 
> 标签：iphone, objective-c, nsarray, nsnumber, nsinteger

我有一个大`NSArray`的包含之`NSNumbers`类的`3, 4, 20, 10, 1, 100,`......

如何将所有这些 NSNumbers 的总和`(3 + 4 + 20 + 10 + 1 + 100 + etc...)`作为一个总数`NSInteger`？

谢谢！

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-06-25T15:46:25.043

你可以使用这个：

```
NSArray* numbers = //array of numbers
NSNumber* sum = [numbers valueForKeyPath: @"@sum.self"]; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-25T15:41:02.593

```
NSInteger sum = 0;
for (NSNumber *num in myArray) {
  sum += [num intValue];
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-25T15:41:48.230

```
long long sum = ((NSNumber*)[array valueForKeyPath: @"@sum.longLongValue"]).longLongValue; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-25T15:40:24.063

遍历数组

```
int count = [array count];
NSInteger sum = 0;
for (int i = 0; i < count; i++) {
    sum += [[array objectAtIndex:i] integerValue];
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-25T16:50:06.757

```
[[numbersArray valueForKeyPath:@"@sum.self"] integerValue] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-25T15:42:38.273

```
int total = 0;
for (NSNumber *number in array)
{
  total += [number intValue];
} 
```

这可能会帮助你

# mysql - 更新 MySQL 字段；条件 = 两个数字之间的字符串字段

> ID：11192505
> 
> 赞同：0
> 
> 时间：2012-06-25T15:37:37.433
> 
> 标签：mysql, mysql-error-1292

如果字符串列在两个数字之间，我正在尝试更新字段的值。

```
UPDATE SAMPLE.EXAMPLE 
SET modNum = CONCAT(modNum,"26")
WHERE modNum NOT LIKE '%26%' 
  AND (procKey BETWEEN 90000 AND 99123 OR procKey = 77444); 
```

不幸的是，我收到一个错误：

> 错误代码：1292。截断不正确的 DOUBLE 值：'4123F'

我很惊讶，因为当我进行选择时，我得到了预期的结果。

```
SELECT *
FROM SAMPLE.EXAMPLE 
WHERE modNum NOT LIKE '%26%' 
  AND (procKey BETWEEN 90000 AND 99123 OR procKey = 77444); 
```

创建表语句：

```
'CREATE TABLE `example` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modNum` char(4) DEFAULT NULL,
  `procKey` char(8) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1' 
```

样本数据：

```
INSERT INTO `SAMPLE`.`EXAMPLE` (`modNum`, `procKey`) VALUES ('42', '99001');
INSERT INTO `SAMPLE`.`EXAMPLE` (`modNum`, `procKey`) VALUES ('42', '9900f'); 
```

给定我的条件，我可以做些什么来更新列？

* * *

* * *

对我来说，它看起来像一个错误。我能想到的最好方法是使用正则表达式检查 procKey 的值是否为整数。我将 UPDATE 语句更改为：

```
UPDATE SAMPLE.EXAMPLE 
SET modNum = CONCAT(modNum,"26") 
WHERE modNum NOT LIKE '%26%' 
    AND procKey REGEXP '^[0-9]+$' 
    AND (procKey BETWEEN 90000 AND 99123 
        OR procKey = 77444); 
```

请让我知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:29:17.093

对我来说，它看起来像一个错误。我能想到的最好方法是使用正则表达式检查 procKey 的值是否为整数。我将 UPDATE 语句更改为：

```
UPDATE SAMPLE.EXAMPLE 
SET modNum = CONCAT(modNum,"26") 
WHERE modNum NOT LIKE '%26%' 
    AND procKey REGEXP '^[0-9]+$' 
    AND (procKey BETWEEN 90000 AND 99123 
        OR procKey = 77444); 
```

请让我知道是否有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:35:39.330

它对我有用，所以我很确定它一定是一些错误。

```
mysql> CREATE TABLE `example` (
    ->   `id` int(11) NOT NULL AUTO_INCREMENT,
    ->   `modNum` char(4) DEFAULT NULL,
    ->   `procKey` char(8) DEFAULT NULL,
    ->   PRIMARY KEY (`id`)
    -> ) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1
    -> ;
Query OK, 0 rows affected (0.04 sec)

mysql> UPDATE EXAMPLE                                                               
-> SET modNum = CONCAT(modNum,"26")
    -> WHERE modNum NOT LIKE '%26%' 
    ->   AND (procKey BETWEEN 90000 AND 99123 OR procKey = 77444);
ERROR 1146 (42S02): Table 'SOF.EXAMPLE' doesn't exist
mysql> UPDATE example 
    -> SET modNum = CONCAT(modNum,"26")
    -> WHERE modNum NOT LIKE '%26%' 
    ->   AND (procKey BETWEEN 90000 AND 99123 OR procKey = 77444);
Query OK, 0 rows affected (0.00 sec)
Rows matched: 0  Changed: 0  Warnings: 0

mysql> select version();
+-----------+
| version() |
+-----------+
| 5.5.9     |
+-----------+
1 row in set (0.00 sec) 
```

编辑：

```
mysql> INSERT INTO `example` (`modNum`, `procKey`) VALUES ('42', '99001');
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO `example` (`modNum`, `procKey`) VALUES ('42', '9900f');
Query OK, 1 row affected (0.00 sec)
mysql> UPDATE example  SET modNum = CONCAT(modNum,"26") WHERE modNum NOT LIKE '%26%'    AND (procKey BETWEEN 90000 AND 99123 OR procKey = 77444);
Query OK, 0 rows affected, 2 warnings (0.00 sec)
Rows matched: 0  Changed: 0  Warnings: 2

mysql> show warnings;
+---------+------+----------------------------------------------+
| Level   | Code | Message                                      |
+---------+------+----------------------------------------------+
| Warning | 1292 | Truncated incorrect DOUBLE value: '9900f   ' |
| Warning | 1292 | Truncated incorrect DOUBLE value: '9900f   ' |
+---------+------+----------------------------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:44:02.583

尝试这个：

```
UPDATE SAMPLE.EXAMPLE
SET modNum = CONCAT(modNUM,"26") 
WHERE modNum NOT LIKE '%26%' 
  AND (procKey BETWEEN 90000 AND 99123 OR procKey = 77444); 
```

# c# - 为多个事件显示单个加载屏幕

> ID：11192506
> 
> 赞同：3
> 
> 时间：2012-06-25T15:37:38.640
> 
> 标签：c#, windows-phone-7

我的应用程序同时从多个 URL 下载。它们中没有一个同时完成，但我只想要一个加载屏幕让用户看到正在发生的事情:-)

我试过一个“票”系统，我有一个列表<>。每个触发下载的事件都会在列表中添加一张票。当他们完成后，他们删除一个。然后，我有一个每 200 毫秒运行一次的 BackgroundWorker 来检查这个列表。如果列表计数为 0 并且存在加载屏幕 (UserControl)（busyscreen.GetType().Name 与 this.LayoutRoot.Children 中的每个对象进行比较），它将删除子项。如果列表不是 0 并且没有子名称busyscreen，它会被添加。

这个逻辑有什么问题？我似乎无法让它工作，有没有更好的方法来做这种工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:49:17.147

理想情况下，您想使用阻塞和 WaitHandle 之类的东西 - 您可以让您的代码阻塞，直到有信号继续

[http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx)

基本上，您创建一个 ManualResetEvent 对象数组 - 这些对象将在工作完成时向主线程发出信号

然后你打电话

```
WaitHandle.WaitAll(arrayOfManualResetEvents) 
```

这将阻塞，直到发出复位事件的信号

```
ManualResetEvent.Set() 
```

所以在伪代码中：

```
> Create each URL loader
> Create a ManualResetEvent for each loader
> Start each loader loading
> Call WaitHandle.WaitAll(arrayOfManualResets) which will block on your main thread
> In each URL LoadComplete handler call the associated ManualResetEvent.Set()
> The main thread will continue when all are signalled 
```

**编辑：**正如已经指出的那样 - WaitHandle.WaitAll 在 Windows Phone 上不起作用。这里有一个替代方案：

[Windows Phone 上 WaitHandle.WaitAll 的替代方案？](https://stackoverflow.com/questions/9206520/alternatives-for-waithandle-waitall-on-windows-phone)

这似乎可以完成这项工作。考虑使用它，因为我总是发现理想情况下应该阻塞的代码在与计时器一起使用时**可以**工作，但更繁琐且容易出现错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:00:26.890

您可以创建`Singleton`包含`LoadCount`属性和 loadCount 字段的对象（当然不要忘记`INotifyProeprtyChanged`），您可以根据需要进一步使用它们。当您开始从新 URL 下载时，请执行`Interlocked.Increment(ref loadCount);`回调 - 之类的操作 - `Interlocked.Decrement(ref loadCount);`。
根据`LoadCount`您可以显示“加载屏幕”。

# lldb - LLDB 是否有便利变量 ($var)？

> ID：11192511
> 
> 赞同：47
> 
> 时间：2012-06-25T15:37:47.993
> 
> 标签：lldb

LLDB 是否有[便利变量](http://sourceware.org/gdb/onlinedocs/gdb/Convenience-Vars.html)？如果是这样，我该如何使用它们？如果没有，我可以使用类似的东西吗？

参考： http: [//software.intel.com/sites/products/documentation/hpc/atom/application/debugger/commands143.html](http://software.intel.com/sites/products/documentation/hpc/atom/application/debugger/commands143.html)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-11T05:21:47.913

我终于自己弄清楚了。`help expr`在 LLDB 中运行，你会看到：

> 用户定义变量：您可以定义自己的变量以方便使用或在后续表达式中使用。您定义它们的方式与在 C 中定义变量的方式相同。如果用户定义变量的第一个字符是 $，则该变量的值将在未来的表达式中可用，否则它将仅在当前表达式中可用。

我`expr int $foo = 5`想要的也是如此。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-13T22:27:39.213

我今天为此苦苦挣扎。下面是在 LLDB 中处理 Objective-C 变量的样子：

```
expr UIApplication *$app = (UIApplication *)[UIApplication sharedApplication]
expr UIWindow *$keyWindow = (UIWindow *)[$app keyWindow] 
```

等等。我发现如果你不嵌套任何调用，LLDB 效果最好，并且你在每次调用时明确地给出返回类型。

不过，当我稍后尝试`initWithFrame:`在 UIView 上工作时，我仍然遇到分段错误。：/

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-30T14:14:18.280

只需使用以下表格：

```
(lldb) expr var 
```

从他们的[教程](http://lldb.llvm.org/tutorial.html)：

> ```
> (lldb) expr self
> $0 = (SKTGraphicView *) 0x0000000100135430
> (lldb) expr self = 0x00
> $1 = (SKTGraphicView *) 0x0000000000000000 
> ```
> 
> 您还可以调用函数：
> 
> ```
> (lldb) expr (int) printf ("I have a pointer 0x%llx.\n", self)
> $2 = (int) 22
> I have a pointer 0x0.
> (lldb) expr self = $0
> $4 = (SKTGraphicView *) 0x0000000100135430 
> ```

# entity-framework - EF 4.3.1 添加如何影响已经存在的相关实体

> ID：11192512
> 
> 赞同：0
> 
> 时间：2012-06-25T15:37:56.773
> 
> 标签：entity-framework, entity-framework-4

想象一下这张图：

设备 1..* OperatingEnvironment 1..* NetworkEndpoint

如果我在内存中构造一个分离的实体图，并且图根部的设备是新的，而 OperatingEnvironment 存在并且 NetworkEndpoint 存在但被分配给不同的 OperatingEnvironment，EF 会解决这一切吗？

当我说“解决这个问题”时，它只是走图并执行 (IfExist ? MergeValues : AddNew) 因为实体都有外键，所以在属性合并期间应该有效地自动重新分配关系。

这是 EF 的工作方式，还是我必须走自己的图表并应用这个逻辑？如果我这样做，那么我的内存图将必须是弱链接的，即避免通过导航属性链接，而是使用外键值，否则一旦我添加一个实体就会添加整个图，因为 EF 将抓取导航属性。

谢谢-希望那是泥泞的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:30:10.277

你必须[自己做](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)。EF 没有内部逻辑来检测实体是否存在于数据库中。

# iphone - 如何显示 iOS 5 通知？

> ID：11192517
> 
> 赞同：-5
> 
> 时间：2012-06-25T15:38:10.027
> 
> 标签：iphone, ios5, notifications

当我按下 UIButton 时，我会显示一个通知横幅。

也许已经有了答案，但我没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:47:19.393

你不能有一个通知横幅，但是[这个库（Tapku 库）](http://cocoacontrols.com/platforms/ios/controls/tapku-alerts-with-images)有一个非常酷的警报视图，你可以修改它以满足你的需要！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:41:49.507

您将不得不使用 UIAlertView 或制作自己的自定义视图

# android - Android：自定义水平进度条

> ID：11192518
> 
> 赞同：1
> 
> 时间：2012-06-25T15:38:11.883
> 
> 标签：android, progress-bar

我正在尝试在我的应用程序中自定义水平进度条。我希望它有尖角（无半径）和蓝色（不是默认的黄色或混合颜色，所以我也不想使用渐变）。我提到这两件事的原因是，在我发现的每个示例代码中，进度条颜色都被更改为使用渐变而不是简单颜色的颜色混合。例如在这篇文章中：

[如何在Android中更改进度条的进度颜色](https://stackoverflow.com/questions/2020882/how-to-change-progress-bars-progress-color-in-android)

我试图修改这段代码，但没有运气。我的问题是我上面链接的问题的答案中三段代码的含义是什么？我的意思是

```
@android:id/background
@android:id/secondaryProgress
@android:id/progress 
```

此外，当我尝试使用 ctrl+space 从 Eclipse 获得一些帮助时，它无法给我任何帮助，因为该位置没有提供内容帮助。我只希望我的进度条变成简单的颜色而不是圆角。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T18:25:00.377

您还应该在形状上方添加标签以获取进度。否则，进度条将始终显示满。

在头疼之后在这里发现：[http ://www.tiemenschut.com/how-to-customize-android-progress-bars/](http://www.tiemenschut.com/how-to-customize-android-progress-bars/)

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:07:59.630

我从您的链接中窃取了答案。像这样的东西应该适合你：

```
<!-- this is the Background Shape of the ProgressBar -->
<item android:id="@android:id/background">
    <shape>
        <!-- you don't want round edges, so I removed it here.
             We dont even need a gradient, replace it with solid -->
      <solid
        android:color="Your bg color" />
    </shape>
</item> 
```

您可以相应地编辑另一个，其中进度通常是黄色覆盖层，次要是黄色覆盖层上的灰色阴影。

阅读本[文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)以获取更多参考

# google-drive-api - Google Drive 上的附加模式

> ID：11192519
> 
> 赞同：5
> 
> 时间：2012-06-25T15:38:13.033
> 
> 标签：google-drive-api

是否可以对 Google Drive 上的文件执行“附加”操作？

假设我想使用 Google 云端硬盘“在他们进来时”保存日志条目，是否有某种“仅附加”操作可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T21:50:50.490

如果不上传带有附加数据的文件的全新副本，目前无法将数据附加到云端硬盘中的文件。这是我们正在考虑的功能，但我目前没有时间表。

# javascript - JavaScript 中正确的“私有”变量初始化

> ID：11192522
> 
> 赞同：0
> 
> 时间：2012-06-25T15:38:19.510
> 
> 标签：javascript, constructor

**更新：2012.06.26 - 在我原来的问题下面看到我的结论。**

我试图弄清楚为什么这个简单的代码没有正确初始化。是的，我来自 Java 世界，我也是一个“纯粹主义者”，并且想正确地使用 JavaScript。

许多（如果不是全部）会建议声明以“this”关键字为前缀的变量，从而在不使用适当的 setter 和 getter 函数的情况下公开所有这些变量。对我来说，这是不可接受的，并且不反映良好的 OOP 实践。他们说 JavaScript 是一种 OOP 语言，那么为什么人们总是试图绕过这个我永远无法理解的语言！？但这不是问题，所以让我们继续...

以下代码的问题是，当我在 Chrome 中运行它时，它一直告诉我：

```
Uncaught ReferenceError: x is not defined 
```

我可以创建一个接受默认值的构造函数，但我宁愿不公开默认值应该是那些构造对象的人（这也不是好的做法）。此外，在运行时，将调用 setter 方法来更改特定实例的“x”和“y”值。一次有许多“模型”实例可用！

所以这里是简单的代码：

```
function Model() {
    var x = 3;
    var y = 'hello';
}

Model.prototype.getX = function() {
    return x;
}

Model.prototype.getY = function() {
    return y;
}

Model.prototype.setX = function(myX) {
    x =  myX;
}

Model.prototype.setY = function(myY) {
    y =  myY;
}

var model = new Model();

console.log("Model Y = '" + model.getY() + "'");
console.log("Model X = " + model.getX());
console.log("Model Y = '" + model.getY() + "'"); 
```

谢谢你的帮助...

**问题的结论（更新于 2012.06.26）：**

很容易得出结论，所请求的（恰好是这么简单的事情）不能用 JavaScript 完成！

令我惊讶的是，从下面的答案中可以看出，有些人会争辩说，既然 JavaScript 不支持它，那么你不应该需要它或使用它。哇，这真的太棒了！

多年来，我一直认为 JavaScript 不是 OOP 语言，这个简单的问题（及其答案）可以证明这一点。

所以最后它讨论了我承认失败，你和我都需要将我们的代码更改为对所有班级成员使用“this”关键字。再一次，语言控制程序员，而不是程序员控制语言！他们想知道为什么每年有超过 2/3 的软件项目失败！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:48:33.150

一种方法是定义`getX`和`getY`内部`Model`而不是原型。

```
function Model() {
    var x = 3;
    var y = 'hello';
    this.getX = function(){return x;}
    this.getY = function(){return y;}
    this.setX = function(val){x=val;}
    this.setY = function(val){y=val;}
}

var foo = new Model();
console.log(foo.getX()); 
```

还有其他方法可以做到，这是我眼中最简单的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:39:53.123

```
function Model() {
    var x = 3;
    var y = 'hello';
} 
```

这会创建一个本地（无用）变量 x，但您需要新创建的 Model 实例的属性。

利用

```
 function Model() {
    this.x = 3;
    this.y = 'hello';
} 
```

* * *

```
Model.prototype.setY = function(myY) {
    y =  myY;
} 
```

这不会改变您的财产。利用

```
Model.prototype.setY = function(myY) {
    this.y =  myY;
} 
```

是的，javascript 和 java 是非常不同的。更喜欢约定（比如调用以_开头的私有字段）而不是试图强制隐私。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-25T16:13:29.037

您将需要使用`this`

```
Model.prototype.getX = function() {
    return this.x;
} 
```

# 64-bit - 为什么 IntPtr.ToInt32 在 64 位模式下抛出 OverflowException 而 Explicit(IntPtr to Int32) 不会

> ID：11192523
> 
> 赞同：5
> 
> 时间：2012-06-25T15:38:22.487
> 
> 标签：64-bit, clr, intptr

运营商[在 MSDN 上的描述](http://msdn.microsoft.com/en-us/library/9a8d37fb.aspx)有一个备注：

> 仅当 value 的值需要比当前平台支持的更多位时才会引发异常。

while[`ToInt32`的描述](http://msdn.microsoft.com/en-us/library/system.intptr.toint32.aspx)不是，所以我认为标题并不完全正确（为简洁起见），

一个更正确的问题是：“为什么在 64 位模式下`IntPtr.ToInt32`抛出*适合 Int32*和 Explicit(IntPtr to Int32) 的值不”`OverflowException`

 *在反编译`IntPtr` `ToInt32`中和操作符看起来很相似：

```
public static explicit operator int(IntPtr value)
{
  return (int) value.m_value;
}

[ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
public unsafe int ToInt32()
{
  return (int) this.m_value;
} 
```

我想知道是什么`ToInt32`导致抛出异常，它是 unsafe 关键字吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T17:30:17.550

您的反汇编程序在这里无法正常工作，mscorlib.dll 很特殊。它不是 AnyCPU 组件，微软基于处理器架构构建并发布了不同版本的它。我建议您使用[Reference Source](http://referencesource.microsoft.com/netframework.aspx)，您将获得原始源代码。看起来像这样：

```
 [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    public unsafe int ToInt32() {
        #if WIN32
            return (int)m_value;
        #else
            long l = (long)m_value;
            return checked((int)l);
        #endif
    } 
```

提供OverflowException的是*checked关键字。**

# clearcase - 如何区分合并是手动还是自动？

> ID：11192525
> 
> 赞同：1
> 
> 时间：2012-06-25T15:38:25.203
> 
> 标签：clearcase

是否可以区分合并是手动还是自动执行的？我在 Windows 上使用 ClearCase 7.1.2，我想知道您是否可以通过查看版本树或任何给定的命令行来找到它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:52:38.110

如果自动，您的意思是：是由交付/变基创建的版本，而不是由手动合并创建的版本，那么与该版本关联的活动名称可以提供帮助：
如果它以“交付”或“ rebase'，它是通过交付/rebase UCM 操作（自动将所有更改的文件从一个流合并到另一个流）生成的

但是，如果“自动与手动”是指手动合并的版本，因为源版本和目标版本之间存在冲突（并且 ClearCase 无法自动合并两者），那么不会。

合并的结果是一个新版本，在源和目标之间有一个“红色箭头”，没有任何关于如何创建新（合并）版本的指示。

# image - 在 WebSphere 中存储 Web 应用程序的图像的位置

> ID：11192533
> 
> 赞同：0
> 
> 时间：2012-06-25T15:39:12.067
> 
> 标签：image, web-applications, websphere

我在 WebSphere 中安装了一个店面 Web 应用程序。存储将在 HTML 页面中显示的项目图像的最佳位置在哪里？我不想将它们存储在 EAR 文件中，因为这会使 EAR 文件变得非常大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:56:22.547

我建议将它们存储在某个地方以供 Web 服务器甚至代理服务器提供服务。对静态内容使用某种别名，而不是让 WebSphere 为它们提供服务。

# android - GridView不同宽度的孩子

> ID：11192534
> 
> 赞同：1
> 
> 时间：2012-06-25T15:39:16.293
> 
> 标签：android, android-layout, android-gridview

我的目标是创建一个自动表单生成器，以便用户可以向屏幕添加控件。并且控件必须具有不同的宽度。

例子：

用户可以添加一个`EditText`将使用屏幕宽度的，并`CheckBox`在`EditText`将放置在`EditText`. 并且还可以添加一个按钮或微调器，它将使用屏幕的其余宽度。用户可以进行所有想要的所有控制。

我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:56:45.113

有很多方法可以做到这一点，例如`TableLayout`并且还使用大量嵌套布局。

该`TableLayout`方法可能是实现您正在寻找的最佳和最简单的方法。

如果要根据屏幕宽度动态更改布局，有两种方法。

**方法 1**以编程方式创建布局，而不是使用 xml 布局文件。通过这种方式，您可以进行计算并即时更改内容。

**方法2**这可能是我会做的方式。包括针对不同屏幕密度、方向和尺寸的不同布局文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:53:14.507

您可以使用具有多个 TableRow 元素的 TableLayout，而不是 gridview。

有趣的是，列的宽度由列中最宽元素的宽度定义。

您可以查看 TableLayout[文档](http://developer.android.com/reference/android/widget/TableLayout.html)以获取更多信息。

# datagrid - 道场。DataGrid 显示在 Dialog 中，行之间有间隔

> ID：11192536
> 
> 赞同：2
> 
> 时间：2012-06-25T15:39:36.930
> 
> 标签：datagrid, dojo, dialog

![对话框中的数据网格 (DOJO)](../Images/31fc73d85a2515563755ec7640cdc9bb.png)

我正在使用 DOJO v1.7.2。我以声明方式在 Dialog 小部件中创建了 Datagrid。我已经在我的页面中包含了所需的样式和 JS。所以我遇到了附加图像中的设计问题。

我使用 Firebug 发现某些具有 "dojoxGridMasterHeader"`class`的元素具有自定义元素`style`。就我而言：`display: block; height: 61px;` 它是从哪里获取的？以及如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:00:38.800

我解决了这个问题。这个问题是我有我的自定义样式。这是给我的：

```
 table{
        margin-top:25px;
    }
    table td{
        padding:10px 15px;
    } 
```

**在**DOJO 开始解析之前，我必须为 DOM 元素（例如 and ）更改此样式（更改所有和到或删除），`margin`也`padding`可能是（在这种情况下我没有尝试）。`0px``table``table td``table th`

我认为 DOJO 使用“dojoxGridMasterHeader”类创建元素并设置他的样式，该样式是根据我的自定义样式计算的。

# java - 在标准输出中显示空白字符

> ID：11192537
> 
> 赞同：4
> 
> 时间：2012-06-25T15:39:40.610
> 
> 标签：java, eclipse, whitespace

在 Eclipse 中显示空白字符是[一个简单的技巧](https://stackoverflow.com/questions/364168/show-some-invisible-whitespace-characters-in-eclipse)，但不幸的是这仅适用于编辑器视图。

![在此处输入图像描述](../Images/abc61f0f50ca83afaf915398ec28d833.png)

有没有办法在控制台视图中显示这些字符？我会发现它对于检查字符串是否格式正确很有用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:46:10.553

[http://www.cafeaulait.org/course/week2/04.html](http://www.cafeaulait.org/course/week2/04.html)

简而言之：您可以在控制台文本输出中使用 \r、\t、\f 和 \n 来获取所需的空格。\t = 制表符，\n = 新行等。查看链接了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:05:10.860

由于对“空白字符”一词有些混淆，我将尝试涵盖这两种可能的情况。

如果您希望显示新行和制表符等内容，Java 字符串包含这些构造的特殊字符。`\n`将显示一个换行符（换行符）。`\t`将显示一个选项卡。`\r`是回车。还有其他的，如这里的表格所示[，](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)但这些是最常见的。

或者，如果您打算将空格显示为可见字符，这完全是一个不同的问题。在这种情况下，我假设您希望将选项卡显示为箭头或将单词之间的空格显示为点，就像某些文本编辑器一样。据我所知，没有内置功能。

但是，您可以将现有的空白替换为您想要表示该类型空白的 unicode 字符。Java`String`类支持使用 unicode 字符；只需找到您希望用来指示标签的那个，然后用`\t`该符号替换所有实例。

# android - 使用 apklib-dependency 在 Eclipse 中运行基于 maven 的 android 项目

> ID：11192544
> 
> 赞同：2
> 
> 时间：2012-06-25T15:40:01.330
> 
> 标签：android, eclipse, maven

我有一个基于 maven 的 android 项目，它使用 ActionbarSherlock 作为 apklib 依赖项和 Gson 作为 jar 依赖项。使用 maven 构建应用程序工作得很好，但只要添加了 ActionbarSherlock 依赖项，我就无法使用 eclipse 启动/运行应用程序。

eclipse有可能无法处理apklib依赖吗？我还必须将 lib 作为库项目添加到我的 eclipse 工作区并将依赖项添加到 maven。否则我无法从我的代码中访问 actionbarsherlock ......

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:38:22.057

在 ADT Eclipse 中支持 apklib 依赖项是 m2e [-android](http://rgladwell.github.com/m2e-android/)项目正在进行的工作的一部分。请对此问题发表评论以保持更新：

[https://github.com/rgladwell/m2e-android/issues/8](https://github.com/rgladwell/m2e-android/issues/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:49:48.243

当前的解决方法是将 apklib 的完整源代码添加到您的工作区。

# ruby - 如何克隆 has_many 关联

> ID：11192546
> 
> 赞同：0
> 
> 时间：2012-06-25T15:40:06.407
> 
> 标签：ruby, clone

```
class Bar < ActiveRecord::Base
  belongs_to :foo
end

class Foo < ActiveRecord::Base
  has_many :bars
end

Foo oldFoo = Foo.new

Foo foo = Foo.new
foo.bars << oldFoo.bars.all.collect { |bar| bar.clone } 
```

上面的命令没有正确替换 bar.foo_id，oldFoo.bars 的引用被删除并设置为 foo.bars。

我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:00:10.687

```
foo.bars << oldFoo.bars.all.collect { |bar| Bar.new(bar.attributes) } 
```

不过，受保护的属性分配会在 R3.2 中引发错误。

**更新：**

看起来和 是一样的`clone`，所以也好不了多少。如果你定义这样的方法（我经常使用它们）：

```
class Hash
 def select_at(*s_keys)
    Hash[s_keys.zip(values_at(*s_keys))]
  end

  def reject_at(*r_keys)
    select_at(keys - r_keys)
  end
end 
```

你可以写`Bar.new(bar.attributes.reject_at("id", "foo_id"))`。

# process - 宏完成后 Excel.exe 保留在内存中

> ID：11192555
> 
> 赞同：2
> 
> 时间：2012-06-25T15:40:36.220
> 
> 标签：process, excel, vba

我正在使用**Access 2010中的 VBA 自动化来使用****Excel 2010**创建图表。我的代码工作正常，但留下一个孤立的 Excel.exe 进程运行。我已将问题追溯到对单独模块中的 Excel VBA 函数的调用。如果我消除了对该函数的调用，Excel 进程将在代码完成时关闭。该函数是 Chip Pearson 的`FindAll`，经过修改以使其在 Access 中运行，例如将范围声明为`Excel.Range`并将`Union`方法显式引用为`Excel.Application.Union`. 我如何需要修改此功能，以免孤立的 Excel 进程运行？

以下代码在主程序中绑定 Excel 应用程序：

```
Dim oApp As New excel.Application
Dim oBook As excel.Workbook
Dim oSheet As excel.Worksheet

Set oBook = oApp.Workbooks.Add
Set oSheet = oBook.Worksheets(1) 
```

然后，最后：

```
oBook.Close False
oApp.Quit

Set oSheet = Nothing
Set oBook = Nothing
Set oApp = Nothing 
```

我正在使用这条线调用 FindAll：

```
 b = FindAll(oSheet.Range("a2", oSheet.Range("a2").End(xlDown)), strWellID).Rows.Count 
```

`FindAll`功能如下：

```
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
' modFindAll
' By Chip Pearson, chip@cpearson.com. www.cpearson.com
' 24-October-2007
' This module is described at www.cpearson.com/Excel/FindAll.aspx
' Requires Excel 2000 or later.
'
' This module contains two functions, FindAll and FindAllOnWorksheets that are use
' to find values on a worksheet or multiple worksheets.
'
' FindAll searches a range and returns a range containing the cells in which the
'   searched for text was found. If the string was not found, it returns Nothing.

' FindAllOnWorksheets searches the same range on one or more workshets. It return
'   an array of ranges, each of which is the range on that worksheet in which the
'   value was found. If the value was not found on a worksheet, that worksheet's
'   element in the returned array will be Nothing.
'
' In both functions, the parameters that control the search have the same meaning
' and effect as they do in the Range.Find method.
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

Function FindAll(SearchRange As Excel.Range, _
                FindWhat As Variant, _
                Optional LookIn As XlFindLookIn = xlValues, _
                Optional LookAt As XlLookAt = xlWhole, _
                Optional SearchOrder As XlSearchOrder = xlByRows, _
                Optional MatchCase As Boolean = False) As Range
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    ' FindAll
    ' This searches the range specified by SearchRange and returns a Range object
    ' that contains all the cells in which FindWhat was found. The search parameters to
    ' this function have the same meaning and effect as they do with the
    ' Range.Find method. If the value was not found, the function return Nothing.
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

    Dim FoundCell As Excel.Range
    Dim FirstFound As Excel.Range
    Dim LastCell As Excel.Range
    Dim ResultRange As Excel.Range

    With SearchRange
        Set LastCell = .Cells(.Cells.Count)
    End With

    'On Error Resume Next
    On Error GoTo 0

    Set FoundCell = SearchRange.Find(What:=FindWhat, _
            after:=LastCell, _
            LookIn:=LookIn, _
            LookAt:=LookAt, _
            SearchOrder:=SearchOrder, _
            MatchCase:=MatchCase)

    If Not FoundCell Is Nothing Then

        Set FirstFound = FoundCell
        Set ResultRange = FoundCell
        Set FoundCell = SearchRange.FindNext(after:=FoundCell)

        Do Until False ' Loop forever. We'll "Exit Do" when necessary.
            If (FoundCell Is Nothing) Then
                Exit Do
            End If

            If (FoundCell.Address = FirstFound.Address) Then
                Exit Do
            End If

            Set ResultRange = Excel.Application.Union(ResultRange, FoundCell)
            Set FoundCell = SearchRange.FindNext(after:=FoundCell)
        Loop
    End If

    Set FindAll = ResultRange

    'added below

    Set ResultRange = Nothing
    Set FoundCell = Nothing
    Set FirstFound = Nothing
    Set LastCell = Nothing
    Set SearchRange = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:51:06.507

Jimmy Pena 和 Siddharth Rout 就如何帮助删除幻像 excel 流程提供了出色的评论。

我只想补充一点，虽然我不一定在所有情况下都推荐它，但如果这是一个持续存在的问题，并且您在排除故障时正在寻找快速“修复”，您可以强制关闭，如本 SO 中所述问题：[VBA 脚本关闭除自身之外的每个 Excel 实例](https://stackoverflow.com/questions/3526228/vba-script-to-close-every-instance-of-excel-except-itself)

```
Sub ForceExcelExit()

Dim BruteForce As String

BruteForce = "TASKKILL /F /IM excel.exe"
Shell BruteForce, vbHide

End Sub 
```

测试揭示了该过程的快速结束，如果不是特别优雅的话。

您还可以使用迭代循环以更优雅的方式结束此类进程 - 但仍使用系统进程方法，而不是应用程序/应用程序接口方法：[如何关闭由邮件合并启动的 Excel 实例](https://stackoverflow.com/questions/1439250/how-to-close-excel-instance-started-by-mail-merge)

虽然我不认可这些方法中的任何一种作为由于错误检查不完整或不足、代码封装或一般回调、方法使用、变量实例化或其他编程问题而使实例处于活动状态的一揽子解决方案，但它是在以下情况下的修复需要修复。

# perl - 如何使用带有 Yahoo OpenID 的 Net::OpenID::Consumer 避免编码错误？

> ID：11192557
> 
> 赞同：5
> 
> 时间：2012-06-25T15:40:39.783
> 
> 标签：perl, openid, yahoo, dancer

我编写了一个 Dancer 网络应用程序，`Net::OpenID::Consumer`用于使用 OpenID 进行身份验证。它适用于 Google 和 MyOpenID，但不适用于 Yahoo。当用户尝试使用他们的 Yahoo 帐户进行身份验证时，会`HTML::Parser`发出警告：

> `Parsing of undecoded UTF-8 will give garbage when decoding entities`

这个警告会杀死我的应用程序（理所当然）。

我没有看到任何与`Net::OpenID::Consumer`此相关的现有错误（或常见错误）。
HTTP 标头和 HTML 元标记都为 'claimed id' URI 指定 UTF-8。
为什么不解码响应`HTML::Parser`？我错过了一些明显的东西吗？

以下是相关代码：

```
get '/openid_landing' => sub {
    my $params = params();
    my $csr = Net::OpenID::Consumer->new(
        ua => LWP::UserAgent->new(),
        consumer_secret => $secret,
        params => $params,
    );  
    my $id = $params->{'openid.claimed_id'};

    if (my $setup_url = $csr->user_setup_url) {
        redirect $setup_url;

    } elsif ($csr->user_cancel) {
        redirect uri_for('/');

    } elsif (my $vident = $csr->verified_identity) {
       # verified identity, log in or register user
       ...

    } else {
        die "Error validating identity: " . $csr->err;
    } 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:46:03.273

该错误位于 1.14 版（最新）第 122-128 行的**Net/OpenID/URIFetch.pm**中，它使用原始内容而不是响应对象的解码内容。只需删除手动 gzip 解码并在响应中使用 decoded_content 方法即可。

我还没有提交错误报告，请随意。:)

这是您可以应用来修复它的差异：

```
122c122
<         my $content = $res->decoded_content;
---
>         my $content = $res->content;
125a126,129
>         if ($res->content_encoding && $res->content_encoding eq 'gzip') {
>             $content = Compress::Zlib::memGunzip($content);
>         }
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:30:49.710

它来自 TreeBuilder 在后台使用的 HTML::Parser 模块，在将页面内容传递给 TreeBuilder 之前，通过 decode_utf8 提供它们：

```
use HTML::TreeBuilder;
use Encode;
my $contents = ...;
my $htree = HTML::TreeBuilder->new_from_content(decode_utf8 $contents); 
```

更多：

[http://metacpan.org/pod/HTML::TreeBuilder#new-from-content](http://metacpan.org/pod/HTML%3a%3aTreeBuilder#new-from-content)

[http://search.cpan.org/dist/HTML-Parser/Parser.pm](http://search.cpan.org/dist/HTML-Parser/Parser.pm)

# c# - 以 Windows Mobile 5.0 PocketPC 为目标时查询 AssemblyInformationalVersionAttribute

> ID：11192566
> 
> 赞同：0
> 
> 时间：2012-06-25T15:41:02.093
> 
> 标签：c#, windows-mobile, compact-framework, windows-ce, assemblyinfo

我的 AssemblyInfo.cs 文件中有一个版本号，如下所示：

`[assembly: AssemblyInformationalVersion("0.0.0.2")]`

通常我可以使用[FileVersionInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.aspx)访问这些信息，并且我*确实*引用了 System.dll（通常在其中定义此类），但 System.Diagnostics 命名空间似乎不可用。

这是 VS 所说的路径是我引用的系统程序集：

> C:\Program Files (x86)\Microsoft.NET\SDK\CompactFramework\v3.5\WindowsCE\System.dll

**简而言之：**如何在我的应用程序中显示我的应用程序的版本字符串（*AssemblyInformationalVersion* *）*？

 *编辑：使用

`Assembly.GetExecutingAssembly().GetName().Version.ToString()`

返回“0.0.0.0”，因为该属性未在我的 AssemblyInfo.cs 文件中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:51:19.957

您是否正在尝试获取自己的应用程序版本：

```
Debug.WriteLine(string.Format("My App Version: {0}",
    Assembly.GetExecutingAssembly().GetName().Version.ToString())); 
```

或 CF 程序集的版本：

```
Debug.WriteLine(string.Format("System.dll Version: {0}",
    typeof(int).Assembly.GetName().Version.ToString())); 
```

**编辑1**

或[实际的本机 FileInfo 版本](http://blog.opennetcf.com/ctacke/2010/09/28/GettingNativeFileInfoInTheCompactFramework.aspx)（我*认为*这是您所追求的版本）。

**编辑2**

或者您可以对托管程序集执行此操作：

```
var a = Assembly.GetExecutingAssembly().GetCustomAttributes(
    typeof(AssemblyInformationalVersionAttribute), true)
    .FirstOrDefault() as AssemblyInformationalVersionAttribute;
Debug.WriteLine(string.Format("AssemblyInformationalVersion: {0}",
a.InformationalVersion)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T16:02:01.717

解决方案是在 AssemblyInfo.cs 中手动输入以下内容：

`[assembly: AssemblyVersion("1.2.3.4")]`

我不确定为什么 Visual Studio 省略了它，但是通过添加它，

`Assembly.GetExecutingAssembly().GetName().Version`

返回期望值。

总结一下：我使用了正确的代码，但我的 AssemblyInfo.cs 文件中有错误的信息。*

# symfony - Symfony2：如何在包之间共享 js 库和 css

> ID：11192568
> 
> 赞同：4
> 
> 时间：2012-06-25T15:41:03.110
> 
> 标签：symfony, assets, assetic

我有不同的捆绑包：MainBundle（主页）、SecurityBundle（登录、注册）、MessageBundle（消息系统）、ShopBundle。

我还遵循三阶段布局架构（::base.html.twig、AcmeMainBundle::layout.html.twig、AcmeMainBundle:Default:index.html.twig）。

但是我在通过应用程序（例如 jquery）共享公共 js 库和定义 base.css（设置一些基类、背景、字体等）时遇到问题

那么在不失去资产支持的情况下使用共享 css 和 js 的最佳方法是什么？

一个想法是创建一个包含所有全局 js 和 css 以及一些布局文件的 CommonBundle，但我认为这不是处理这个问题的最佳方法......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T15:45:24.123

如果您想在所有捆绑包之间共享公共资产，最好的选择是将它们放在`app/Resources/public`目录中。例如：

```
app/Resources/Public
|-- css
|   `-- base.css
|-- js
|   `-- jquery.js 
```

然后你可以在你的布局中引用它们，如下所示：

```
{% block stylesheets %}
  {% stylesheets '../app/Resources/public/css/*' %}
    <link rel="stylesheet" type="text/css" charset="UTF-8" media="all" href="{{ asset_url }}"/>
  {% endstylesheets %}
{% endblock %}

{% block javascripts %}
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  {% javascripts '../app/Resources/public/js/*' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
  {% endjavascripts %}
{% endblock %} 
```

备注：如您所见，对于 jQuery 等常用库，最好的选择仍然是使用 Google 托管的常用缓存版本。这种做法可以加快您的应用程序响应时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T23:06:17.523

使用最新版本的 Symfony (2.5) 我发现 fsenart 的响应在我的情况下不起作用。相反，我将包含共享内容的公共文件夹放入 web 文件夹中：

```
web/public
  --js
  --css 
```

然后在主布局中使用它，下面的代码可以工作：

```
{% block javascripts %}
    {% javascripts 'public/js/*' %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %} 
```

但是为了使它起作用，不要忘记在子布局中使用 javascript 块时调用 Twig parent() 函数。

# r - glmnet/scikit 学习系数矩阵大小

> ID：11192569
> 
> 赞同：1
> 
> 时间：2012-06-25T15:41:10.973
> 
> 标签：r, scikit-learn, glmnet

在 scikit learn 中`coef_`，逻辑回归模型的系数是一个维度为 [n_classes-1, n_features] 的数组。

在`glmnet`系数`fit$beta`不是一个类似的数组。

例如：

维度`xMatrix`- 63231 X 1223（训练样本数 X 特征数）

维度`yMatrix`- 63231 X 1（训练样本数 X 每个样本的预期输出值）。有45个不同的类别。所以输出是其中之一。

输出系数的维度（据我了解）= 1223 X 45（特征数 X 类数）

虽然我在 scikit learn 中做对了，但结果`glmnet`不同

这是我的`glmnet`代码：

```
> dim(x)
[1] 63231  1223
> length(y)
[1] 63231
> unique(sort(y))
 [1]  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
[26] 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44
> fit <- glmnet(x,y)                   
> summary(fit)
          Length Class     Mode   
a0            86 -none-    numeric
beta      105178 dgCMatrix S4     
df            86 -none-    numeric
dim            2 -none-    numeric
lambda        86 -none-    numeric
dev.ratio     86 -none-    numeric
nulldev        1 -none-    numeric
npasses        1 -none-    numeric
jerr           1 -none-    numeric
offset         1 -none-    logical
call           3 -none-    call   
nobs           1 -none-    numeric
> dim(fit$beta)
[1] 1223   86 
```

为什么我得到 1223 X 86 而不是 1223 X 45？

# ipad - iPad IOS5 方向

> ID：11192572
> 
> 赞同：0
> 
> 时间：2012-06-25T15:41:16.420
> 
> 标签：ipad

我目前正在 iPad 上开发一个应用程序。它只支持纵向，不支持横向。应该在 .m 文件中编辑或添加什么代码（什么文件）以使其支持左侧景观？我需要应用程序中的所有页面来支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:43:48.427

每个 UIViewController 都需要实现这个方法：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

如果您只想支持少数几个（只要对您不希望被支持的内容返回 NO）：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    //Allow Original Portrait
    if(interfaceOrientation == UIInterfaceOrientationPortrait)
    {
        return YES;
    }
    //Allow Upside Down
    else if(interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        return YES;
    }
    //Allow Landscape Left
    else if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
    {
        return YES;
    }
    //Allow Landscape Right
    else if(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        return YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:45:24.487

在每个视图控制器中，您需要添加以下代码：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {    
    return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOritentationPortraitUpsideDown));
 } 
```

# netty - 侦听同一端口上的 TCP 和 UDP 数据包

> ID：11192574
> 
> 赞同：2
> 
> 时间：2012-06-25T15:41:22.297
> 
> 标签：netty

我在 Netty（新旧 api）中有一种方法可以监听传入的 TCP 连接并在同一端口上接收 UDP 数据包吗？

我正在运行一个监听端口 80 的 netty 服务器实例。根据 TCP 或 UDP 消息，服务器需要切换到适当的处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:27:11.010

我猜你已经设置了一个带有特定管道工厂的 ServerBootstrap。您所要做的就是使用 DatagramChannelFactory 创建一个 ConnectionlessBoostrap，使用您需要的处理程序管道对其进行设置并绑定到同一端口。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-26T00:29:24.280

是的你可以。如果你不能，请告诉我。

# c - 拨号连接端口

> ID：11192577
> 
> 赞同：0
> 
> 时间：2012-06-25T15:41:34.620
> 
> 标签：c, windows, winapi, ras

如何打开端口或如何检查端口是否打开以进行拨号连接。

`RASDIAL.exe`在开始拨号连接之前检查端口是否打开？如果在建立连接时拔掉 USB 会发生什么？是否`RASDIAL`返回错误值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:59:17.433

您可以使用 Win Api，请参阅*[建立与 Internet 的拨号连接](http://msdn.microsoft.com/en-us/library/aa384005.aspx)*。

特别是以下功能：

*   [InternetGetConnectedState](http://msdn.microsoft.com/en-us/library/aa384702.aspx)
*   [InternetGetConnectedStateEx](http://msdn.microsoft.com/en-us/library/aa384705.aspx)

# jquery - JQuery 多列表手风琴问题

> ID：11192582
> 
> 赞同：0
> 
> 时间：2012-06-25T15:41:51.067
> 
> 标签：jquery, list, menu, accordion

我有两个列表，我希望它们的功能类似于手风琴，当单击指定的元素时，指定的列表被隐藏，再次单击它会切换到显示。

的HTML：

```
 <ul class="acc" id="acc">
            <li>
                    <h3 class="slide">CATEGORIES</h3>
                    <div class="acc-section">
                    <div class="acc-content view">

                    <ul>
                            <li><a href="#">Item</a></li>
                            <li><a href="#">Item</a></li>
                            <li><a href="#">Item</a></li>
                    </ul>
            </div>
            </div>
            </li>

            <li>
                    <h3 class="slide2">CATEGORIES</h3>
                    <div class="acc-section">
                    <div class="acc-content view2">

                    <ul>

                   <li><a href="#">Item</a></li>
                <li><a href="#">Item</a></li>

</ul>
            </div>
            </div>
            </li>
    </ul> 
```

我已经使用以下代码为这两个列表完成了此操作：

```
$(document).ready(function() { 
  $('h3.slide').toggle(function() { 
    $('div.view').fadeOut('slow');
    return false; 
     }, 
        function() { 
            $('div.view').fadeIn('slow'); 
            return false; 
    }); 
    $('h3.slide2').toggle(function() { 
    $('div.view2').fadeOut('slow');
    return false; 
     }, 
        function() { 
            $('div.view2').fadeIn('slow'); 
            return false; 
    }); 
}); 
```

我的问题是它不是“动态的”，如果我将来要添加另一个列表，那么我也必须使用上面的代码。我希望能够只使用一小段代码，并为可点击元素和显示/隐藏元素重用相同的两个类名。我尝试使用以下代码完成此操作，但无法使其正常工作：

```
$(document).ready(function() { 
  $('h3.slide').toggle(function() { 
    $(this).siblings('div.view').fadeOut('slow');
    return false; 
     }, 
        function() { 
            $(this).siblings('div.view').fadeIn('slow'); 
            return false; 
    }); 
}); 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:53:30.860

要将事件应用于在 DOM 初始加载后需要加载的元素，请尝试使用 jQuery on() 函数。就像是：

```
$(function(){
  $('h3.slide').on('toggle', function() { 
    $('div.view').fadeOut('slow');
    return false; 
    }, 
      function() { 
      $('div.view').fadeIn('slow'); 
      return false; 
  }); 
  $('h3.slide2').on('toggle', function() { 
    $('div.view2').fadeOut('slow');
    return false; 
    }, 
      function() { 
      $('div.view2').fadeIn('slow'); 
      return false;
  }); 
}); 
```

希望有帮助。

见：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:54:05.460

您可以在这里使用 jquery "closest" 而不是兄弟姐妹。[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

例如：

```
$(this).closest('div.view').fadeOut('slow'); 
```

如果这不适合您的需求，请发布您的 CSS，我可以为您提供更好的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:45:40.830

感谢您的努力，但我能够使用 .slideToggle 解决这个问题：http: [//api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

# ruby-on-rails - Rails 数据/数据拐点问题

> ID：11192587
> 
> 赞同：7
> 
> 时间：2012-06-25T15:42:11.453
> 
> 标签：ruby-on-rails, ruby, inflection

在我的 Rails 3.2.6 应用程序中，我有一个模型表示有关小部件的数据集合。在我看来，这个类的正确名称是`WidgetData`复数，因为每个小部件有不止一项数据。

如果我让 Rails 为这个类生成一个表单：

```
= form_for @widget_data do |f|
  ... 
```

我得到一个错误`ActionView::Template::Error (undefined method 'widget_datum_path' ...`。这大概是因为 Rails 数据/数据变形规则。

我不确定如何最好地解决这个问题：我可以让 Rails 规定我的模型实际上应该是`WidgetDatum`. 或者我可以在这种特殊情况下以某种方式禁用变形规则，但我不确定如何最好地做到这一点。欢迎咨询。

预测一个可能的答案：不只是调用模型的原因`Widget`是我已经有一个名为 that 的外观类，它提供了一个更丰富的小部件视图，同时包含了`WidgetData`和其他信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T16:49:31.220

将此代码添加到文件中：config/initializers/inflections.rb

```
ActiveSupport::Inflector.inflections do |inflect|

   inflect.irregular 'widgetdata', 'widgetdatas' # or whatever you want your plural to be

 end 
```

解决您对“复数，因为每个小部件有不止一项数据”的评论。

这个想法是每行小部件数据都是它自己的对象。Active Record 将为每一行数据创建一个 WidgetData 实例。您的数据库表应命名为（根据 Rails 约定）WidgetData，因为该表包含许多 WidgetDatum。但是在 Rails 中，每一行数据都会根据您的模型类实例化为一个单独的对象。只要您正确配置变形，它就会以任何一种方式工作。我通常只在现有数据模型上构建接口时尝试这样做。但即便如此，您也会意识到有时在现有模型之上构建一个新的 rails 数据模型会更好，并`self.table_name = 'old table name convention'`在您的模型中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:23:42.280

如果您希望在这种情况下更改变形规则，您可以看看[这个问题](https://stackoverflow.com/questions/1185035/how-do-i-override-rails-naming-conventions?answertab=active#tab-top)。

# php - 电子邮件中的“加号”拥有同一电子邮件的唯一版本它是如何工作的？管理生产和测试环境

> ID：11192588
> 
> 赞同：1
> 
> 时间：2012-06-25T15:42:15.403
> 
> 标签：php, ruby-on-rails, email, production-environment, test-environments

我有一个带有数百名真实用户的产品的 Web 应用程序..

我需要一个具有生产状态的测试环境，因为应用程序是数据驱动的，应用程序的状态会根据数据而变化，如果不存在真实的用户数据，则无法测试事物......

但是，由于它有真实的电子邮件，因此在测试中存在风险，因为测试电子邮件可以发送给真实的用户。

所以我需要一种机制来将电子邮件更改为不真实的东西，但由于电子邮件字段是独一无二的，我如何通过一个查询来更改所有这些。

我的同事建议**使用 +any_number ex 发送电子邮件。`rajat@gmail.com`并将`rajat+27@gmail.com`电子邮件发送到同一电子邮件..**

所以我写了一些查询

```
update users set email = CONCAT(CONCAT('rajat+',id),'@gmail.com') 
```

它解决了问题..现在我可以使用生产数据在测试环境中操作..

**我的问题：**

1）它是如何工作的？

2）这是一个正确的方法吗？人们如何管理测试和生产环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:56:16.947

我更喜欢更改代码低级别而不是更改数据库。例如：

```
function sendEmail($to, ...) {
    if (APPLICATION_ENV != 'production') {
        $to = "dev@.....";
    }
    // continue ...
} 
```

这样，您始终可以确保将收件人地址更改为测试地址，即使该地址来自不同的来源（例如表单）。

# ruby - 字符串操作 Ruby 模式

> ID：11192591
> 
> 赞同：0
> 
> 时间：2012-06-25T15:42:31.083
> 
> 标签：ruby, string

如果我有一个字符串： string = <.one><.two>three<.four>[:five] ，我该如何操作这个字符串来删除模式“<..>”中的所有内容。我希望我的输出返回；字符串 = 三 [：五]

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:45:33.870

```
"<.one><.two>three<.four>[:five]".gsub(/<.+?>/, '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:46:15.290

```
irb(main):002:0> '<.one><.two>three<.four>[:five]'.gsub(/<[^>]*>/,'')
=> "three[:five]" 
```

# c# - C# 替代 setpixel

> ID：11192594
> 
> 赞同：1
> 
> 时间：2012-06-25T15:42:40.613
> 
> 标签：c#, gdi+, getpixel

我已经阅读了几篇可以替代使用 setpixel/getpixel 的文章，但我没有看到它们与我的问题有何关系。

我有一个多色图像（取决于从 DB 获取的动态值）将每个像素颜色组的颜色更改为新颜色。

假设我希望 Argb 值为 -989556 的所有像素都更改为 -16，并且 Argb 值为 -1331 的所有像素都更改为 -5383962。我目前正在查看位图中的每个像素并检查它们的值，如果它们匹配，则使用 setpixel 更改它们。

我相信一定有更好的方法，但我太昏暗了，看不到它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:52:53.760

看看 ImageAttributes。[设置重映射表](http://msdn.microsoft.com/en-us/library/3h9aaxdk.aspx)

[另一个](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533877%28v=vs.85%29.aspx)例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T01:21:04.263

使用位图、BitBlt 功能。[我在这里](http://sohagbuet.wordpress.com/2013/11/03/alternative-of-setpixel-function/)展示一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:52:46.503

如果您要更改整个颜色，那么您可能不想在每个像素的基础上更改它们。有一个颜色转换矩阵应该允许您在几行代码中更改图像中颜色的所有像素，而无需循环和操作图像的每个像素，这非常慢。

请参阅以下链接：

[http://msdn.microsoft.com/en-us/library/6tf7sa87(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/6tf7sa87(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/library/system.drawing.imaging.colormatrix.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.colormatrix.aspx)

# python - 递归数据结构的屈服

> ID：11192595
> 
> 赞同：6
> 
> 时间：2012-06-25T15:42:42.550
> 
> 标签：python

我正在尝试使用带有 Python 类的生成器，它的工作方式与链表有些相似。

这是我的意思的一个非常简单的例子：

```
class GeneratorTest():
    def __init__(self, list):
        if list:
            self.elem = list[0]
            if list[1:]:
                self.n = GeneratorTest(list[1:])
            else:
                self.n = None

    def __iter__(self):
        return self

    def next(self):
        my_next = self
        while my_next is not None:
            yield my_next
            my_next = my_next.n 
```

当然这只是一个例子，但足以说明这一点。

现在，我期待能够调用类似的东西：

```
g = GeneratorTest([1,2,3,4,5])
for x in g:
    print x 
```

并在达到最后一个值时停止循环，但 for 循环只是无休止地继续。

我对生成器很陌生，所以我确信这是我在这里缺少的基本前提。

问题是否与我产生与创建生成器的对象相同的事实有关？我确信如果我有一个包含 GeneratorTest 对象列表的对象，我可以非常简单地返回这些对象中的每一个，但我觉得应该有一种方法可以在没有“包装”对象的情况下完成这项工作。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:50:54.850

问题是`next`（或者，在 Py3 中，`__next__`）不应该是一个生成器——它应该在外部维护它的状态，以及`return`每个值。你的每次都会返回一个新的生成器，但由于 Python 不会迭代*那个*生成器，你的循环永远不会真正运行。这可能意味着您想要`__iter__`返回不同于`self`最初的东西（尽管它返回的任何东西都需要有一个`__iter__`返回自我的东西）。

但好消息是生成器的存在正是为了为您跟踪这些规则。将您当前的`next`代码移入`__iter__`并且一切正常 - Python*确实会*迭代任何`__iter__`返回（如您所料）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:03:27.853

当我从 java 移植一个 treap 数据结构时，我基本上是这样做的；此代码可以作为示例： [http ://stromberg.dnsalias.org/~strombrg/treap/](http://stromberg.dnsalias.org/~strombrg/treap/)

另请参阅“yield from”，这是一个使这更容易的最新 Python 功能：http: [//www.python.org/dev/peps/pep-0380/](http://www.python.org/dev/peps/pep-0380/)

treap 代码在没有 yield from 的情况下执行此操作。

# graphics - 我可以将系统资源用于图形而不是显卡吗？

> ID：11192598
> 
> 赞同：0
> 
> 时间：2012-06-25T15:42:46.553
> 
> 标签：graphics, resources, system

我不确定这是否是发布此问题的正确位置，但我敢肯定我会被告知它是否足够快:-)

我有一个带有 16GB 内存的 AMD fx-6100 和一个运行 windows7 的 ati HD5450 2GB 显卡。我发现我无法在我的 PC 上玩一些较新的 PC 游戏，例如战场 3，所以问题是我能否将一个或两个内核与几 GB 内存从系统资源专用于图形来玩游戏。

如果这是错误的地方问这个问题，任何帮助将不胜感激，甚至是正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:49:25.443

GPU比处理器快。这就是为什么我的朋友博士正在操纵 GPU 以开始运行更多与操作系统相关的东西。GFX 卡现在真的很好，而且对它们来说更糟，因为人眼不能看到比任何帧每秒更多的东西。当他们必须一次缓冲 5 件事情时，他们做得很好：例如，运行 5 个游戏客户端 + youtube + 1 部电影。都是同时的。从 GFX 卡卸载到 CPU 是一个禁忌。现在，如果你有钱，买一个不错的 12 核 gpu，然后你就不必担心它了。

tl; dr：如果您不知道，gfx 卡比 cpu 更快。如果您想进行 X 处理器集成，它只会减慢您的速度。可行，但你并没有真正获得任何有价值的东西。获得更好的GPU。

# coldfusion - 查询奇怪类型转换的 ColdFusion 查询

> ID：11192600
> 
> 赞同：0
> 
> 时间：2012-06-25T15:42:56.900
> 
> 标签：coldfusion, qoq

```
<cfquery dbtype="query" name="LOCAL.modello">
SELECT 
    * 
FROM 
    modelliDelMarchio 
WHERE 
    marchioid = #ARGUMENTS.marchioid#  
    AND tipologia = #ARGUMENTS.tipo# 
    AND nome = '#ARGUMENTS.nome#'
</cfquery> 
```

我在最后一个查询行有错误。

它的：

> 查询查询运行时错误。执行 = 时比较异常。不支持的类型比较异常：= 运算符不支持以下类型之间的比较：左侧表达式类型 = "STRING"。右侧表达式类型 = “LONG”。

我发誓：

*   ARGUMENTS.nome 是一个字符串（我也尝试过使用 javacast！）
*   modelliDelMarchio 是一个有效的数据库查询，包含真实数据。"nome" 是一个 varchar。

我的版本是 9.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:44:38.600

你需要你`cfqueryparam`所有的价值观。如果你不能（或不想），那么你需要这样写你的表达式：

```
marchioid = '#Arguments.marlchioid#' 
```

如果您关闭引号并且不使用`cfqueryparam`，SQL 引擎会将这些值视为数字或布尔值。字符串*必须*在引号或`cfqueryparam`s 中才能被视为字符串。

# php - Symfony2：用户从数据库登录 - security.yml 中的错误

> ID：11192605
> 
> 赞同：0
> 
> 时间：2012-06-25T15:43:12.453
> 
> 标签：php, symfony

我需要使用数据库中的凭据登录用户。但是，在 security.yml 中定义提供程序时会产生错误。

这是错误：

```
InvalidConfigurationException: Unrecognized options "class, property" under "security.providers.myapp_entity_admin.users.entity" 
```

在 security.yml 的提供者部分，我有以下内容：

```
providers:
    myapp_entity_admin:
        users:
            entity: { class: MyApp\MainBundle\Entity\User, property: username } 
```

问题是为什么 Symfony 会抛出上述错误。官方文档似乎表明这是正确的。

谢谢，

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:52:27.240

好吧，看起来我输入了太多参数。security.yml 中的代码应如下所示：

```
providers:
    myapp_entity_admin:
        entity: { class: MyApp\MainBundle\Entity\User, property: username } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:50:11.007

我认为，因为 yml 文件是通过缩进解析的，所以你需要缩进“myapp_entity_admin”。现在它与“提供者”处于同一级别，这不是您想要的。

# c - LD_PRELOAD 未预加载所有符号

> ID：11192607
> 
> 赞同：2
> 
> 时间：2012-06-25T15:43:21.007
> 
> 标签：c, linux, gcc, ld-preload

我正在尝试 LD_PRELOAD 函数，例如`mmap`, `read`, `open`,`clone`等等...，但是虽然某些函数确实成功地获得了 LD_PRELOADed，但其他函数却没有。例如`mmap`，`read`并且`open`完全被预加载但`clone`不是，虽然我肯定知道`clone`是从我的程序中调用的`strace`，因为我使用的是 pthreads。`clone`这里没有被 LD_PRELOADed的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:07:34.007

`strace`显示*系统调用*；LD_PRELOAD 覆盖（C 库）*函数*。这可能表明`clone`系统调用正在由不同的函数调用，而不通过`clone`函数符号（例如，通过 C 库中的内部链接，或直接调用系统调用）。

确实，`clone`不是 Posix 库函数；这是一个碰巧暴露的 Linux 实现细节。手册页说：

> clone() 和 sys_clone 调用是特定于 Linux 的，不应在旨在可移植的程序中使用。

相反，您应该 LD_PRELOAD-override`pthread_create`等；在其他平台上，它们可以在没有`clone`.

# wcf - 使用 Unity 将存储库注入 ServiceAuthorizationManager

> ID：11192610
> 
> 赞同：2
> 
> 时间：2012-06-25T15:43:31.493
> 
> 标签：wcf, unity-container, wcf-rest, api-key

我想向 ServiceAuthorizationManager 实现注入一个存储库（使用统一）。可能吗？

```
 public class APIKeyAuthorization : ServiceAuthorizationManager
    {

        private readonly IKeysService _keysService;

        public APIKeyAuthorization(KeysService keysService)
        {
            _keysService = keysService;
        }

        protected override bool CheckAccessCore(OperationContext operationContext)
        {
            //var _keysService = new KeysService();

            string key = GetAPIKey(operationContext);

            string endpoint = GetEndpoint(operationContext); //ip address

            if (_keysService.IsValidKey(key, endpoint))
            {
                return true;
            }
            else
            {
                // Send back an HTML reply
                CreateErrorReply(operationContext, key);
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:28:26.380

您不必`APIKeyAuthorization`在容器中注册。Unity 可以自己很好地解析具体的类。如果你想将你的注入`APIKeyAuthorization`作为另一个实现，`ServiceAuthorizationManager`你必须在容器中注册该映射

```
container.RegisterType<ServiceAuthorizationManager, APIKeyAuthorization>(); 
```

Unity 会将已注册的实现`IKeyService`（在您的情况下是 的实例`KeyService`）注入`APIAuthorization`.

尝试

```
APIAuthorization auth = container.Resolve<APIAuthorization>(); 
```

您将看到 Unity`IKeyService`为您解决问题。

但请不要误将[Unity 作为 ServiceLocator 滥用](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

而是将容器连接到[应用程序的组合根中，](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)并仅解析容器中的顶级对象。

# iis-6 - 如何以编程方式在 IIS 6 aspx 处理程序中禁用“验证文件存在”？

> ID：11192614
> 
> 赞同：2
> 
> 时间：2012-06-25T15:43:35.450
> 
> 标签：iis-6

我需要在一系列服务器上自动安装 MVC 2 应用程序。为了使 MVC 2 开箱即用地与 IIS 6 一起工作，我已将路由更改为路由带有 .aspx 扩展名的 url，如 Phil Haacked 的一篇文章中所述。仅当禁用 aspx 处理程序上的“验证文件存在”选项时，此方法才能正常工作。

这可以防止 IIS 检查 aspx 文件（不存在）并引发 404 错误。

我的问题是如何在我的安装程序中以**编程**方式在处理程序中禁用它？

# java - 从 JAXB 泛型中删除 xsi:type、xmlns:xs 和 xmlns:xsi

> ID：11192623
> 
> 赞同：5
> 
> 时间：2012-06-25T15:44:16.780
> 
> 标签：java, generics, jaxb, xml-namespaces, xsi

使用 JAXB 时，我想在使用泛型时从我的 XML 元素中删除多余的名称空间/类型。我该怎么做或者我做错了什么？我想使用泛型，这样我只需要编写一次代码块。

示例代码：

```
public static void main(String[] args) {
    try {
        TestRoot root = new TestRoot();
        root.name.value = "bobby";
        root.age.value = 102;
        root.color.value = "blue";

        JAXBContext context = JAXBContext.newInstance(root.getClass());
        Marshaller marsh = context.createMarshaller();
        marsh.setProperty(Marshaller.JAXB_ENCODING,"UTF-8");
        marsh.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,Boolean.TRUE);

        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        marsh.marshal(root,pw);
        System.out.println(sw.toString());
    }
    catch(Throwable t) {
        t.printStackTrace();
    }
}

@XmlRootElement
static class TestRoot {
    @XmlElement public TestGeneric<String> name = new TestGeneric<String>(true);
    @XmlElement public TestGeneric<Integer> age = new TestGeneric<Integer>(true);
    @XmlElement public TestWhatIWouldLike color = new TestWhatIWouldLike(true);
}

@XmlAccessorType(XmlAccessType.NONE)
static class TestGeneric<T> {
    @XmlAttribute public boolean isRequired;
    @XmlElement public T value;

    public TestGeneric() {
    }

    public TestGeneric(boolean isRequired) {
        this.isRequired = isRequired;
    }
}

@XmlAccessorType(XmlAccessType.NONE)
static class TestWhatIWouldLike {
    @XmlAttribute public boolean isRequired;
    @XmlElement public String value;

    public TestWhatIWouldLike() {
    }

    public TestWhatIWouldLike(boolean isRequired) {
        this.isRequired = isRequired;
    }
} 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<testRoot>
    <name isRequired="true">
        <value xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">bobby</value>
    </name>
    <age isRequired="true">
        <value xsi:type="xs:int" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">102</value>
    </age>
    <color isRequired="true">
        <value>blue</value>
    </color>
</testRoot> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-14T19:54:28.417

我能够在由于泛型参数而导致我出现问题的属性上使用@XmlAnyElement(lax=true)，然后必须在正在编组的实际类上添加一个@XmlRootElement，然后声明就消失了！极好的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:55:37.537

**测试通用**

您的 JAXB (JSR-222) 实现将为每个类创建映射（即`TestGeneric`，不是类型（即`TestGeneric<Integer>`）。因此，它将将该`value`字段视为 type `Object`。这将导致`xsi:type`属性，因为您的 JAXB 实现正在添加足够的信息能够解组相同的类型。

```
@XmlAccessorType(XmlAccessType.NONE)
static class TestGeneric<T> {
    @XmlAttribute public boolean isRequired;
    @XmlElement public T value;

    public TestGeneric() {
    }

    public TestGeneric(boolean isRequired) {
        this.isRequired = isRequired;
    }
} 
```

* * *

**演示**

以下是您可以使用的方法。我已经引入了 的子类`TestGeneric`来表示不同的可能类型。

```
package forum11192623;

import java.io.PrintWriter;
import java.io.StringWriter;

import javax.xml.bind.*;
import javax.xml.bind.annotation.*;

public class Demo {

    public static void main(String[] args) {
        try {
            TestRoot root = new TestRoot();
            root.name.value = "bobby";
            root.age.value = 102;
            root.color.value = "blue";

            JAXBContext context = JAXBContext.newInstance(root.getClass());
            Marshaller marsh = context.createMarshaller();
            marsh.setProperty(Marshaller.JAXB_ENCODING,"UTF-8");
            marsh.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,Boolean.TRUE);

            StringWriter sw = new StringWriter();
            PrintWriter pw = new PrintWriter(sw);
            marsh.marshal(root,pw);
            System.out.println(sw.toString());
        }
        catch(Throwable t) {
            t.printStackTrace();
        }
    }

    @XmlRootElement
    static class TestRoot {
        @XmlElement public TestString name = new TestString(true);
        @XmlElement public TestInteger age = new TestInteger(true);
        @XmlElement public TestString color = new TestString(true);
    }

    @XmlAccessorType(XmlAccessType.NONE)
    @XmlTransient
    @XmlSeeAlso({TestInteger.class, TestString.class})
    static class TestGeneric<T> {
        @XmlAttribute 
        public boolean isRequired;
        public T value;

        public TestGeneric() {
        }

        public TestGeneric(boolean isRequired) {
            this.isRequired = isRequired;
        }
    }

    static class TestInteger extends TestGeneric<Integer> {
        public TestInteger() {
        }
        public TestInteger(boolean b) {
            super(b);
        }
        @XmlElement
        public Integer getValue() {
            return value;
        }
        public void setValue(Integer value) {
            this.value = value;
        }
    }

    static class TestString extends TestGeneric<String> {
        public TestString() {
        }
        public TestString(boolean b) {
            super(b);
        }
        @XmlElement
        public String getValue() {
            return value;
        }
        public void setValue(String value) {
            this.value = value;
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T08:35:11.357

我遇到了同样的问题，并通过 [Programmatically 的建议解决了这个问题，确定 JAXB 注释是否会导致 xsi:type 注释？](https://stackoverflow.com/questions/12112335/programmatically-determine-if-a-jaxb-annotation-will-result-in-a-xsitype-annota)

只是在通用类对象上使用`@XmlAnyElement(lax=true)`而不是使用`@XmlElement`（此示例的值）。

# java - 单个方法的调用图（c++ 和 java）

> ID：11192625
> 
> 赞同：1
> 
> 时间：2012-06-25T15:44:28.943
> 
> 标签：java, c++, methods, hierarchy, call-graph

对于给定的方法（例如 Settings.cpp getSettingByName()），我想构建一个静态调用图。是否有可以为 java 和 c++ 执行此操作的开源工具？

例如，如果我给它“Settings.cpp getMethodByName”，它将返回：

```
Settings.cpp    getSettingByName();
    SettingsWrapper.cpp getMaximumSpeed();
        ECU.cpp monitorSpeed();
            Operate.cpp runECU();
                Main.cpp run();
        CruiseControl.cpp accelerate();
            Operate.cpp runCruiseControl();
                Main.cpp run();
        Radio.cpp playApplauseThroughSpeakers();
            Operate.cpp runStereo();
                Main.cpp run(); 
```

不要对代码感到害怕，这只是一个例子。

非常感谢，菲德尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:25:08.187

Eclipse 提供了一个“调用层次结构”视图。这在 Java 和 C/C++ IDE 风格中都可用。对于后者，请参阅[这个问题](https://stackoverflow.com/a/7325174/127035)的答案：*谁能告诉我如何使用 Eclipse cdt 对 C++ 代码进行静态分析？*

另请参阅[以编程方式访问 Eclipse 的调用层次结构](https://stackoverflow.com/q/9986870/127035)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:18:27.873

[Doxygen](http://www.doxygen.nl/)是一个出色的工具，可以为 Java 和 C++ 执行此操作。它甚至可以生成图形和可点击的调用图。

# c# - 带有有限用户升级的数字签名 msi 仍然提示管理员

> ID：11192632
> 
> 赞同：2
> 
> 时间：2012-06-25T15:45:00.533
> 
> 标签：c#, wix, windows-installer, digital-certificate

我正在解决这个问题一段时间，但无法弄清楚。我准备了一个安装范围 = perMachine 和 InstallPrivileges=elevated 的 msi（使用 wix）。

该应用程序只有一个 exe 文件。exe 和 msi 都由证书签名。

我使用受限用户（在 Windows 7 上）安装应用程序，并提示输入管理员用户和密码。

我为应用程序创建了升级。当我安装它时，我希望它只是因为数字签名而安装。但它一直提示输入管理员密码。

我真的迷路了，希望得到一些帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:49:35.540

每次执行需要提升权限的应用程序时，UAC（Vista 中添加的用户帐户控制）都需要管理员用户名和密码来授予提升权限。这些权限仅在操作需要的时间内持续，并且必须在每次请求时重新授予，即使对于同一个程序也是如此。

# google-calendar-api - 我是否需要经历所有麻烦才能让用户查看我的谷歌日历？

> ID：11192633
> 
> 赞同：0
> 
> 时间：2012-06-25T15:45:09.003
> 
> 标签：google-calendar-api

我想在我的网络应用程序中公开我的谷歌日历，并通过我的一个表单，我想在我的日历中创建一个事件/约会。我需要通过所有 OAuth2 的东西来实现这一点吗？我发现文档非常模棱两可，对于这样一个简单的用例要求用户登录谷歌似乎是不必要的。我错过了一些非常明显的东西吗？你能指出我正确的方向吗？

是不是有一个简单的 HTTP API 可以让我将我的应用程序验证为 Google 日历用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:46:11.430

据我所知，您只需要使用Google 日历验证*您**的网络应用程序。*因此，您的用户无需登录 Google 或类似的东西。

 *是的，您仍然需要使用 OAuth2 来允许您的网络应用更新您的 Google 日历。在您最初授予 Web 应用访问日历数据的权限后，您将获得访问令牌和刷新令牌。刷新令牌可用于自动生成新的访问令牌，这意味着您的 Web 应用程序将继续进行身份验证，而无需您或您的用户执行任何操作。*

# svn - subversion 和 psd 文件 - 为什么修订版这么大？

> ID：11192634
> 
> 赞同：1
> 
> 时间：2012-06-25T15:45:17.153
> 
> 标签：svn, binary, photoshop, revision

我已经开始在本地使用带有 Versions.app 的 svn，因为我想跟踪我的 Photoshop 文件的每个显着更改。我厌倦了每小时保存同一个文件，将其命名为 ..._v1、v2、v45 等，我认为使用 svn 会占用更少的空间，但我想我错了。我注意到保存在 svn 存储库中的修订非常大，比原始文件大得多。有没有办法减少它，或者这是正常的行为？然后我问自己这样的解决方案有什么意义......如果这比我想的要容易，请原谅我的知识贫乏，我以前从未使用过 svn。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:01:02.143

Subversion 和其他版本控制系统试图通过确定文件的两个版本之间的差异并将其存储而不是存储整个文件来减少它们使用的存储量。这适用于文本，因为行尾是可能更改的字符块的自然开始/结束。行尾流畅且自动生成或根本没有行尾的文件可能会从差异检测器中产生最坏情况的结果，从而导致文件基本上包含两个原始文件。

PSD 不是基于行的，因此它们在版本控制中占用大量空间是正常的。此外，它们使用压缩，因此单个更改将导致图层数据在更改点之后完全不同，即使在二进制级别上也与原始数据没有任何共同之处。

如果您愿意使用较大的 PSD 文件，则可能有一种方法可以关闭压缩并允许二进制差异更小。请参阅[Adob​​e 网站上的说明](http://helpx.adobe.com/photoshop/kb/save-psd-psb-images-compression.html)。

# python - python：将字符串解包到列表中

> ID：11192635
> 
> 赞同：0
> 
> 时间：2012-06-25T15:45:20.020
> 
> 标签：python, list, unpack

[关于配置文件中多值元素的问题](https://stackoverflow.com/questions/335695/lists-in-configparser)的答案（完全符合我的需要）建议“从配置中解压缩字符串”。我阅读了文档以[解压缩在几个地方建议的参数列表](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)，但我不明白这与我的问题有何关系。

我相信这一定很明显：有一个字符串`str = "123,456"`，我如何将其转换为列表`[123,456]`（字符串中以逗号分隔的元素数量可能会有所不同）

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:47:06.497

```
[int(x) for x in str.split(",")] 
```

您基本上是将函数`int`应用于拆分字符串产生的每个元素。

简单的结果`str.split(',')`是`["123","456"]`.

正如 Daniel Roseman 指出的那样，您应该注意不要使用会无意中掩盖内置方法的变量或方法名称，例如`str`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:47:32.920

你想要一个字符串列表还是一个整数列表？

如果你只想要一个字符串列表，这很简单：

```
my_list = my_string.split(',') 
```

如果要将这些转换为整数，则需要：

```
my_list = map(int, my_string.split(',')) 
```

（另外，不要`str`用作变量名，因为它会影响内置`str()`函数。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:46:58.090

最简单的方法是使用[`split()`](http://docs.python.org/library/stdtypes.html#str.split).

```
unpacked = str.split(',') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T02:56:34.493

尽管我同意其他答案，但您也应该在假定数字的无效字符串表示的情况下处理异常。举个例子，下面的代码片段：

```
number_string = "123,456,x21"
delimiter = ","
number_list = []
for item in number_string.split(delimiter):
    try:
        my_num = int(item)
        number_list.append(item)
    except ValueError, e:
        # you can choose to just pass or handle the error like so
        print "Skipping %s: %s" % (item, e.message) 
```

只是一个想法。祝你好运！

# c# - 如何保护我的excel文件不被其他人阅读？

> ID：11192641
> 
> 赞同：1
> 
> 时间：2012-06-25T15:45:49.287
> 
> 标签：c#, excel, vba, ms-office, add-in

基本上，我想开发一个office excel插件。安装此插件后，创建的所有 excel 文件只能由其 excel 安装了此插件的用户打开。所以我在这里有两个问题：

1.  我可以使用 VBA 来开发它还是必须使用 C# 或 VB 来开发它作为应用程序级插件？
2.  怎么做？保存的时候好像要稍微修改一下excel文件格式，让没有这个插件的其他excel会认为这是一个损坏的文件。有没有做这个的excel API？如果没有，你有更好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:03:26.083

美丽的问题:)

是的，它可以在 VBA Excel 插件中实现。事实上，几年前我确实实现了类似的东西。以下是分 4 步解释的逻辑。

通过加载项创建文件时，请按照下列步骤操作

**1)**将文件保存在 assay 中，并`Temp directory`用`Temp.xls`密码保护它。您可以选择保留**固定密码**或**动态**密码。请参阅此代码以创建动态密码。

```
Function GenerateRandPassword() As String
    Dim strEnvPass As String, strPass As String
    Dim n As Integer

    strEnvPass = "@#$%^"
    n = Application.WorksheetFunction.RandBetween(1, 10)

    For i = 1 To 5
        strPass = strPass & n
    Next i

    strPass = strEnvPass & strPass & strEnvPass

    GenerateRandPassword = strPass
End Function 
```

要测试它，只需像这样调用它

```
Sub Sample()
    Debug.Print GenerateRandPassword
End Sub 
```

密码将采用这种格式

```
@#$%^11111@#$%^
@#$%^22222@#$%^
@#$%^33333@#$%^
.
.
.
@#$%^1010101010@#$%^ 
```

当您尝试通过加载项打开文件时，循环 1 到 10 并`@#$%^`用作后缀和前缀来创建密码，然后尝试打开文件。这样你的 Excel 文件就会有随机密码。有关如何打开此类文件，请参阅第 4 点。

**IMP**：不要选择太大的数字，`Application.WorksheetFunction.RandBetween(1, 10)`它只会延迟稍后打开文件。

**2)**要获取临时目录，请使用此代码

```
Private Declare Function GetTempPath _
Lib "kernel32" Alias "GetTempPathA" _
(ByVal nBufferLength As Long, _
ByVal lpBuffer As String) As Long

Private Const MAX_PATH As Long = 260

Function TempPath() As String
    TempPath = String$(MAX_PATH, Chr$(0))
    GetTempPath MAX_PATH, TempPath
    TempPath = Replace(TempPath, Chr$(0), "")
End Function

Sub TmpPath()
    'This will give the Temp Path
    MsgBox TempPath
End Sub 
```

**3）**在临时目录中创建文件后，重命名文件并为其提供 Excel 无法识别的扩展名`MyFile.ice`（例如，从您的 SO 句柄中获取第一个 3 个字母`iceagle`）

您可以使用此代码重命名文件

`Name TempPath & "MyFile.xls" As "C:\MyFile.Ice"`

这样，普通用户将不知道打开此文件需要哪个应用程序。

要打开此文件，您可以将过滤器设置`*.ice`为`Application.GetOpenFilenam`

```
Sub Sample()
    fileToOpen = Application.GetOpenFilename("ICE Files (*.ice), *.ice")
    If fileToOpen <> False Then
        Application.DisplayAlerts = False
        Workbooks.Open (fileToOpen)
        Application.DisplayAlerts = True
    End If
End Sub 
```

**4)**要打开文件，请使用此代码

```
Sub OpenFile()
    Dim wb As Workbook
    Dim strPass As String

    For i = 1 To 10
        On Error Resume Next
        strPass = "@#$%^" & i & i & i & i & i & "@#$%^"
        Set wb = Workbooks.Open("C:\MyFile.ice", , , , strPass)
        If Err.Number = 0 Then Exit For
        Err.Clear
    Next
    On Error GoTo 0
End Sub 
```

希望这能让你开始:)

# php - PHP：将您需要的元素建立为数组的第一个元素

> ID：11192643
> 
> 赞同：1
> 
> 时间：2012-06-25T15:46:00.873
> 
> 标签：php, arrays, multidimensional-array

我有一个学年数组：

```
$arrayAcademicYears = array( 
           array("8889", "1988-1989"),
           array("8990", "1989-1990"),
           array("9091", "1990-1991"),
           array("0405", "2004-2005"),
           array("1112", "2011-2012"),
           array("1213", "2012-2013")
         );
         foreach($arrayAcademicYears as $k => $v) {
             echo "KEY: ";
             echo $v[0];
             echo " -> VALUE: ";
             echo $v[1];
             echo "<br>";
         } 
```

这打印：

```
KEY: 8889 -> VALUE: 1988-1989
KEY: 8990 -> VALUE: 1989-1990
KEY: 9091 -> VALUE: 1990-1991
KEY: 0405 -> VALUE: 2004-2005
KEY: 1112 -> VALUE: 2011-2012
KEY: 1213 -> VALUE: 2012-2013 
```

然后我有一个像这样的变量的当前学年：

```
$currentAcademicYear="1112"; 
```

如何更改要打印的代码：

```
KEY: 1112 -> VALUE: 2011-2012
KEY: 1213 -> VALUE: 2012-2013
KEY: 0405 -> VALUE: 2004-2005
KEY: 9091 -> VALUE: 1990-1991
KEY: 8990 -> VALUE: 1989-1990
KEY: 8889 -> VALUE: 1988-1989 
```

请注意，这只是一个示例，我并不是要为任何类型的学术课程练习寻求解决方案。这里只是一个自学的 PHP 学习者。

非常感谢！(.. 帮助我成为一个更好的 PHP 程序员 :))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:49:38.110

这将反转您的数组，首先显示最新的：

```
$arrayAcademicYears = array_reverse($arrayAcademicYears); 
```

把它放在上面：

```
foreach($arrayAcademicYears as $k => $v) { 
```

Array_reverse 将出于某种原因将所有项目上的密钥更改为 0 增量，但 04-05 年除外。使用以下更新的函数，将实现正确的排序。

```
 function array_mtf(&$arr, $keytom, $reverse = false){
        $tmp = array();
        foreach($arr as $key => $value){
            if($key == $keytom){
                $tmp[$key] = $value;
                unset($arr[$key]);
            }
        }

                    if($reverse)
            arsort($arr);

        $arr = $tmp + $arr;
    } 
```

用法如下：

```
array_mtf($array_to_sort, $key_to_move_first, true); 
```

因此，将功能块添加到您的代码中，然后替换：

```
$arrayAcademicYears = array_reverse($arrayAcademicYears); 
```

和

```
array_mtf($arrayAcademicYears, $currentAcademicYear); 
```

结果数组如下所示：

```
Array
(
[1112] => 2011-2012
[1213] => 2012-2013
[0405] => 2004-2005
[9091] => 1990-1991
[8990] => 1989-1990
[8889] => 1988-1989
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:12:05.910

正如您想学习的那样，我建议您使用更简单的逻辑，仅使用一个数组，如下所示：

```
// Creating an array with associative keys
$arrayAcademicYears = array( 
    "8889" => "1988-1989",
    "8990" => "1989-1990",
    "9091" => "1990-1991",
    "0405" => "2004-2005",
    "1112" => "2011-2012",
    "1213" => "2012-2013"
    );

// Defining the current year
$currentAcademicYear = "1112";

// Printing the key and content of the current year
echo "KEY: " . $currentAcademicYear . " -> VALUE: " . $arrayAcademicYears[$currentAcademicYear] . "<br />";

// Removing from array the key printed above
unset($arrayAcademicYears[$currentAcademicYear]);

// Getting a reverse array, preserving the keys using the "true" parameter
$arrayAcademicYears = array_reverse($arrayAcademicYears, true);

// Now printing the other keys and its contents, following your logic
foreach($arrayAcademicYears as $key => $value)
    echo "KEY: " . $key . " -> VALUE: " . $value . "<br />"; 
```

希望它可以帮助你！

# codeigniter - 显示“已发送电子邮件”，但我的收件箱中没有任何内容。CodeIgniter 和 gmail

> ID：11192659
> 
> 赞同：1
> 
> 时间：2012-06-25T15:47:01.767
> 
> 标签：codeigniter, smtp, gmail

请检查我的以下代码，以便从我的 gmail 帐户向同一个 gmail 帐户发送电子邮件。当我运行它时，它说电子邮件已发送。但我在收件箱中找不到任何此类内容。谁能提出问题可能是什么？

```
$config = Array(
        'protocol' => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => 465,
        'smtp_user' => 'koolpraju@gmail.com',
        'smtp_password' => '****',
        'mailtype' => 'html',
        'charset' => 'iso-8859-1'
    );

    $this->load->library('email', $config);

    $this->email->set_newline("\r\n");

    $this->email->from('koolpraju@gmail.com','Prajakta');
    $this->email->to('koolpraju@gmail.com');
    $this->email->subject('This is a test email');
    $this->email->message('It is working. Great!! yey');

    if($this->email->send())
    {
        echo 'Your email was sent successfully';

    }
    else
    {
        show_error($this->email->print_debugger());
    } 
```

我让 Xampp 与 Mercury 一起运行，并设置了 Mercury S SMTP 服务器参数。我真的不明白为什么电子邮件没有通过？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T10:53:41.563

```
function sendMail()
{
    $config = Array(
  'protocol' => 'smtp',
  'smtp_host' => 'ssl://smtp.googlemail.com',
  'smtp_port' => 465,
  'smtp_user' => 'xxx@gmail.com', // change it to yours
  'smtp_pass' => 'xxx', // change it to yours
  'mailtype' => 'html',
  'charset' => 'iso-8859-1',
  'wordwrap' => TRUE
);

        $message = '';
        $this->load->library('email', $config);
      $this->email->set_newline("\r\n");
      $this->email->from('xxx@gmail.com'); // change it to yours
      $this->email->to('xxx@gmail.com');// change it to yours
      $this->email->subject('Resume from JobsBuddy for your Job posting');
      $this->email->message($message);
      if($this->email->send())
     {
      echo 'Email sent.';
     }
     else
    {
     show_error($this->email->print_debugger());
    }

} 
```

# javascript - 搜索一个元素以查看它是否包含某个字符串

> ID：11192662
> 
> 赞同：1
> 
> 时间：2012-06-25T15:47:10.393
> 
> 标签：javascript, jquery, html

使用 jquery 在 div 中搜索文本字符串的最简单方法是什么？我特别想搜索一个带有 id 的 div 并查看它是否包含`$(this).text()`. 这样做的目的是能够将元素附加到 div，但能够防止将相同的字符串一遍又一遍地写入相同的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:49:59.757

> 我特别想搜索一个带有 id 的 div 并查看它是否包含`$(this).text()`.

我想我可能会选择`String#indexOf`：

```
var div = $("#theId"),
    text = $(this).text();
if (div.text().indexOf(text) === -1) {
    // It doesn't have it, add it
    div.append(text); // Or whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:49:43.150

您可以使用[`:contains`](http://api.jquery.com/contains-selector/)选择器或[`filter`](http://api.jquery.com/filter/)方法（如果您需要精确的巧合）：

```
$("div[id]").filter(function() {
    return $(this).text() == str;
}); 
```

# javascript - 2 Datepicker 在 jQuery 上的不同格式？

> ID：11192664
> 
> 赞同：0
> 
> 时间：2012-06-25T15:47:14.003
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我需要做简单的任务：

显示 2 个日期选择器：

一个`month and year`，第二个- `regular`。

我*已*成功找到隐藏日历部分并仅显示月份和年份的 css 样式：

```
<style type="text/css">
      .ui-datepicker-calendar {    display: none;    }​
</style> 
```

但我找不到告诉：这个`datepicker`实例*应该*自己应用这个css，而另一个不*应该*。

如何修复我的**[代码](http://jsbin.com/ihalun/edit#source)**以将 CSS*仅*应用于 1 个控件？

![在此处输入图像描述](../Images/1972e8ca0231c918d742f4596fb02b0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:49:47.853

将第二个类显式添加到具有`display: none`唯一属性的日期选择器中，或者显式设置`style`受限日期选择器的，例如：

```
$('.ui-datepicker-calendar').first().css('display', 'none'); 
```

**编辑 1**不起作用 - 两个日期选择器共享相同的元素，因此您无法像那样区分它们。

**编辑 2**到目前为止我能做的最好的就是添加这个：

```
$('#datepicker').click(function() {
    $('.ui-datepicker-calendar').hide();
}); 
```

这*确实*隐藏了日历，但不幸的是，它在消失之前让它显得非常短暂。

**编辑 3**解决了！:)

诀窍是将您的全局 CSS 应用到每个日期选择器，以便它们*默认隐藏*，然后在触发时显式*显示*另一个日历字段：

```
$('#datepicker2').click(function() {
    $('.ui-datepicker-calendar').show();
}); 
```

这比让日历出现几分之一秒然后再次消失更具视觉吸引力。

注意：您可能必须为任何其他将导致日期选择器出现的 UI 事件注册此处理程序 -`.click()`其本身可能是不够的。

[在http://jsbin.com/oredoy/](http://jsbin.com/oredoy/)工作演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:51:19.690

如果我理解正确，您为两个日期选择器使用相同的 css 类->它们的行为都相同（如预期的那样）。

定义 2 个单独的类“ui-calendar-monthYear”和“ui-calendar-regular”并将它们分配给您的日期选择器。

# video-streaming - 这种场景的每秒带宽是多少？

> ID：11192665
> 
> 赞同：0
> 
> 时间：2012-06-25T15:47:15.867
> 
> 标签：video-streaming, streaming-flv-video

如果我有一个视频聊天应用程序，其中有 10 个用户彼此可见，并且上行和下行速率为 1MB。每秒使用的带宽是 10 * 1MBs * 2（上游和下游）= 20MBs 吗？只是想了解流媒体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:10:22.877

它应该取决于流协议。如果多播协议可用，它应该更少，否则它可能比您计算的要大得多。

# javascript - 如何在 Ember.Router 中设置 ApplicationController

> ID：11192668
> 
> 赞同：5
> 
> 时间：2012-06-25T15:47:23.037
> 
> 标签：javascript, ember.js, ember-old-router

我还有其他可能处理 Ember.Router 控制器和视图吗？我的应用程序结构通常依赖于 require.js，它负责相应的依赖项。

在我的示例中，我将 App.ApplicationController 作为主路由器控制器。

这是一个 jsfiddle：http: [//jsfiddle.net/mediastuttgart/uMKGt/1/](http://jsfiddle.net/mediastuttgart/uMKGt/1/)

但是有没有机会手动设置呢？我发现了这个提交消息[https://github.com/emberjs/ember.js/commit/be69395f5eec4187b1df052d7386bcda45f79475](https://github.com/emberjs/ember.js/commit/be69395f5eec4187b1df052d7386bcda45f79475)我可以看到，如何手动设置控制器和查看（无论如何无法让它工作）。但找不到任何示例，例如：

```
App = Ember.Application.create();

App.MyController = Ember.Controller.extend({});
App.MyView = Ember.View.extend({});

Router = Ember.Router.extend({
    applicationController : App.MyController,
    root : Ember.Route.extend({
        index : Ember.Route.extend({
            route : '/',
            connectOutlets : function (router) {
                router.get('applicationController').connectOutlet(App.MyView);
            }
        })
    }),
    ...
}); 
```

**编辑**

我试图更详细地解释这一点。虽然我们使用 require.js 来管理或依赖关系，但我们有多个控制器负责整个应用程序中它们自己的部分。假设我们有一个时事通讯注册表单。用于此场景的控制器的结构为

```
- app
-- controller
--- newsletter
---- signup.js
--- cart
--- checkout
-- view
-- model
-- router
-- template 
```

当我们使用自定义函数来生成命名空间`Em.Provide('App.Controller.Newsletter');`时，它会在`App.Controller.Newsletter`. 这个对象现在作为我们整个时事通讯应用程序的控制器基础。首先，`App.Controller.Newsletter.Signup = Ember.Controller.extend({});`我们需要将此实例作为路由器的“ApplicationController”传递。如您所见，我们不能只使用`App.ApplicationController`Ember.Router 来实例化控制器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T18:55:43.773

对requirejs一无所知，但我认为唯一的事情就是定义一个

```
App.ApplicationController = Ember.Controller.extend({...behavior here...}) 
```

然后，当调用

```
App.initialize() 
```

然后框架会自动将这个控制器注入到路由器中。

# android - 重新启动后从未启动应用程序时如何调试广播接收器？

> ID：11192671
> 
> 赞同：2
> 
> 时间：2012-06-25T15:47:28.597
> 
> 标签：android, broadcastreceiver

我有一个 BroadcastReceiver 可以捕获收到的短信。

然而，它运作良好，只有在手机刚刚重新启动并且应用程序尚未启动的情况下 - 当接收器收到短信时，我的手机会崩溃。

由于应用程序进程尚未运行，因此无法事先将 DDMS 附加到应用程序。

调试这种情况的“技巧”是什么？

非常感谢！

# ruby-on-rails - 如何在发送宁静的 POST/PUT API 之前使用 rails3.2.x 获取 CSRF 令牌，而无需来自服务器端的任何表单/UI？

> ID：11192673
> 
> 赞同：5
> 
> 时间：2012-06-25T15:47:35.010
> 
> 标签：ruby-on-rails, devise, csrf

我知道rails默认从rails3提供CSRF保护。但是我的 web 应用程序是一个单页应用程序，所有的通信都依赖于 ajax。

那么，如何在每次调用 ajax 之前从服务器获取 CSRF 令牌？或者我能做的就是取消 CSRF 保护，对吧？

注意：我们不使用任何rails视图来生成网页，甚至是主页，所以**在.html或.erb中放置“<%= csrf_meta_tag %>”的解决方案是无效的**。我们在一页内使用javascript框架.

我的环境：rails3.2.3、devise2.0.4、dojo1.7.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:17:22.617

我建议你看看[Rails-backbone](https://github.com/codebrew/backbone-rails)项目。特别是[backbone_rails_sync.js](https://github.com/codebrew/backbone-rails/blob/master/vendor/assets/javascripts/backbone_rails_sync.js#L21-L31)文件。

它显示了这个 gem 如何将 CSRF 令牌数据连同您向服务器发出的任何 ajax 请求一起发送。

此外，这里是 Django 项目的一些[文档，](https://docs.djangoproject.com/en/1.3/ref/contrib/csrf/#ajax)它们为您提供了一个示例，说明如何覆盖默认的 jQuery ajax() 方法以始终发送 CSRF 令牌。

**根据评论更新：**

所以你问的是如何在只使用 REST API 并且不以任何方式使用视图/表单时实现 CSRF。

答案是：**不包括 CSRF 保护**。

[跨站点请求伪造](https://en.wikipedia.org/wiki/CSRF)是另一个（恶意）网站复制或模仿请求并伪装成有效用户同时向服务器发送无效数据的一种方式。

仅当用户需要进行身份验证并且身份验证状态保存在缓存中（以在页面视图之间持续存在）时，这才是问题。如果恶意网站劫持了这个缓存，它可以伪装成这个用户来提交数据，而用户和服务器不会注意到这一点。这就是 CSRF 保护所做的事情，它将一个特殊的字符串注入到表单中，该字符串仅对该特定请求有效，并且对于每个其他请求都是唯一的，因此即使会话被劫持，CSRF 保护也可以防止任何修改服务器。

但是，在您的情况下，您正在使用 HTTP API 调用，因此必须通过使用`Authorization header`. 这样，凭证永远不会被缓存，也不会被劫持，因此不需要 CSRF 保护。

但是，还有其他方法可以确保您的 RESTful API 是安全的：

*   **始终以加密形式通过网络发送数据 (https/ssl)**
*   使用良好的身份验证方法，如 oAuth(2)、API 令牌或基本 HTTP 身份验证*（最后两个不太安全，但对于较小的应用程序仍然足够安全）*
*   在对它们进行操作之前，始终检查进入应用程序的每个值

# indexing - 如何使用 Haystack、Whoosh 和 Django 迭代两个或多个模板索引

> ID：11192675
> 
> 赞同：1
> 
> 时间：2012-06-25T15:47:41.257
> 
> 标签：indexing, django-haystack, whoosh

我正在阅读这里的文档和一些问题，但不明白如何返回包含在两个不同类中索引的字段的查询。让我把代码放在下面：

我在这里上课：

```
class T031003Index(RealTimeSearchIndex):
text = CharField(document=True, use_template=True)
C003INST = IntegerField(model_attr='C003INST')
C003CHCD = CharField(model_attr='C003CHCD')
C003MTR = CharField(model_attr='C003MTR')
C003RZSC = CharField(model_attr='C003RZSC')

def index_queryset(self):
    return T031003.objects.all()

def prepare(self, obj):
    self.prepared_data = super(T031003Index, self).prepare(obj)
    self.prepared_data['text'] = obj.C003CHCD
    return self.prepared_data

site.register(T031003, T031003Index) 
```

第二个：

```
class T031002Index(RealTimeSearchIndex):
text = CharField(document=True, use_template=True)
C002USER = CharField(model_attr='C002USER')

def index_queryset(self):
    return T031002.objects.all()

def prepare(self, obj):
    self.prepared_data = super(T031002Index, self).prepare(obj)
    self.prepared_data['text'] = obj.C002USER
    return self.prepared_data
site.register(T031002, T031002Index) 
```

我对它们每个都有两个模板索引：

T031003_文本：

```
{{ object.C003INST }}
{{ object.C003CHCD }}
{{ object.C003MTR }}
{{ object.C003RZSC }} 
```

T031002_文本：

```
{{ object.C002USER }}
{{ object.C002INST }} 
```

我的模板代码：

```
{% if page.object_list %}    
{% for object in page.object_list %}
    <br>
    <li><font class="font">
      {{ object.C003RZSC }}, {{ object.C003INST }}, {{ object.C003CHCD }}, {{ object.C003MTR }}, {{ object.C002USER }}
    </li>
{% endfor %} 
```

我的观点：

```
def search(req):
return SearchView(template='search.html')(req) 
```

如果我在搜索框中输入一个字段中的值，比如说属于 T031002Index 类（如 user = "vane"），它会给我结果：

“无，无，无，无，风向标”

而且，如果我从 T031003Index 类的字段中键入一个值，它会给我结果：

“铅笔，1，教材，一般，无”

我在models.py的这两个类之间有一个外键字段，即C002INST。

你们能给我一个解释吗？这似乎很容易，但我自己无法弄清楚。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:13:38.857

所以，在密友的帮助和大量研究之后，我找到了解决方案。

1)我从 Haystack 1.2.6 升级到 Haystack 2.0.0

2）在我看来，我将代码更改为使用 AutoQuery 和 SearchQuerySet。它让您可以使用多个单词来搜索内容并过滤结果。

这是视图：

```
def search(request):
sqs = SearchQuerySet().filter(content=AutoQuery(request.GET['q']))
return  render_to_response('search.html', {'sqs': sqs,}) 
```

4) 现在，在“search_indexes.py”中，我将代码更改为遵循 2.0.0 版本的 Haystack，并从外键（T031002Index，C002INST 字段）中删除“model_attr”。

这是代码：

```
class T031003Index(RealTimeSearchIndex,Indexable):
   text = CharField(document=True, use_template=True)
   C003INST = IntegerField(model_attr='C003INST')
   C003CHCD = CharField(model_attr='C003CHCD')
   C003MTR = CharField(model_attr='C003MTR')
   C003RZSC = CharField(model_attr='C003RZSC')

def index_queryset(self):
    return T031003.objects.all()

def get_model(self):
    return T031003

class T031002Index(RealTimeSearchIndex,Indexable):
    text = CharField(document=True, use_template=True)
    C002INST = CharField()
    C002USER = CharField(model_attr='C002USER')

def index_queryset(self):
    return T031002.objects.all()

def get_model(self):
    return T031002 
```

但即使进行了所有这些更改，Haystack 也会遍历这两个索引并返回空结果。这是错误的，也会导致用户混淆。因此，我更改了模板以仅在字段的结果不为空时才向我显示字段：

```
{% if page.object_list %}    
{% for result in page.object_list %}
    {% if result.object.C003MTR%}
    <li><b>Matrícula:</b> {{ result.object.C003MTR }}</li>
    <li><b>CPF/CNPJ:</b> {{ result.object.C003CHCD }}</li>
    {% endif %}
    {% if result.object.C002INST %}
    <li><b>ID Instituição:</b> {{ result.object.C002INST }}</li>
    <li><b>Usuário:</b> {{ result.object.C002USER }}</li>
    {% endif %}
{%endfor%} 
```

"if" 可以测试该字段是否有空结果。

希望它可以帮助其他使用 Haystack 和 Django 的开发人员。

# ruby-on-rails - rails：如何通过单击按钮重置用户密码？

> ID：11192676
> 
> 赞同：1
> 
> 时间：2012-06-25T15:47:43.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**要求：**我想要一个按钮将任何用户的密码重置为 users#index 页面中的“密码”

**我试过**的：我不需要表演动作！所以我将视图中的显示名称替换为“重置密码”，在 user_controller 中，我进行了以下更改

```
def show
@user = User.find(params[:id]) 
@user.password = "password"
@user.password_confirmation = "password"
if @user.save
    redirect_to users_url, notice: "Password was successfully reset!"
else
    redirect_to users_url, notice: "Password reset failed"
end
end 
```

**结果**：它不起作用！没有错误或任何东西。它重新加载页面并显示“密码重置失败”通知..

如何使它工作？它与路由中调用的http方法有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:05:32.080

如果您已将视图名称从 更改`show`为`reset password`，您还必须更改操作名称并将此新路由添加到您的`routes.rb`文件中。但我认为在这种情况下最好的选择是：

在您的 中创建按钮`users#index`，调用`reset`控制器中的操作：

```
<%= button_to "Reset Password", :controller=>"users", :action => "reset", :id=>user.id %> 
```

然后，在`users#controller`：

```
def reset
  @user = User.find(params[:id])
  @user.password = "password"
  @user.password_confirmation = "password"
  if @user.save
    redirect_to users_url, notice: "Password was successfully reset!"
  else
    redirect_to users_url, notice: "Password reset failed"
  end
end 
```

现在，您只需将此新操作添加到您的`routes.rb`：

```
post "users/reset" 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:50:44.180

您可能希望在视图中创建一个表单，该表单将在身份验证后显示，然后确保创建一个隐藏字段，在登录后将 password_value 设置为 NULL 创建一个表单，当 Password_value 等于 NULL 时显示该表单以使该人选择他的新密码。

```
f.hidden_field :password_value, :value = nil 
```

玩得开心

# python - 检查列表的项目是否在另一个列表中的顺序相同

> ID：11192677
> 
> 赞同：-2
> 
> 时间：2012-06-25T15:47:46.437
> 
> 标签：python, list

我有一个清单，比如说`[1, 5, 2, 6, 2, 5, 1]`。
此列表中的项目在此列表中的顺序相同：`[4, 1, 5, 2, 6, 2, 5, 1, 6, 2, 3]`

找出一个嵌套列表的项目是否在另一个嵌套列表的项目中的顺序相同的简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:02:04.920

看了这个问题后，我写了这个。与其他一些假设第一个数组中的元素必须连续出现在第二个数组中的其他人不同，这不是。

```
def in_order(a,b):
    j = iter(b)
    for i in a:
        while True:
            try:
                j_ = j.next()
            except StopIteration:
                return False
            if i == j_:
                break
    return True 
```

OP的例子：

```
a = [1, 5, 2, 6, 2, 5, 1]
b = [4, 1, 5, 2, 6, 2, 5, 1, 6, 2, 3]
print in_order(a,b) 
```

印刷：`True`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:51:13.917

```
size = len(needle)
any(needle == haystack[i:i+size] for i in range(len(haystack) - size + 1)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T15:54:37.550

只需从此处修改最佳答案：[Testing if a list contains another list with Python](https://stackoverflow.com/questions/3847386/testing-if-a-list-contains-another-list-with-python)

# architecture - CISC 机器 - 他们不只是将复杂指令转换为 RISC 吗？

> ID：11192680
> 
> 赞同：3
> 
> 时间：2012-06-25T15:47:54.900
> 
> 标签：architecture, assembly, x86, system

也许我在架构上存在误解——但如果一台机器有一条乘法指令——该指令是否没有被翻译成更小的指令或者太复杂以至于它最终与等效的 RISC 指令具有相同的速度？

乘法是一个不好的例子——它在两种架构中都是一条指令。用CISC中更复杂的指令替换上面的“乘法”，RISC没有等效的单指令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:49:50.080

乘法既是好例子，也是坏例子。首先，乘法是一条昂贵的指令，一些处理器没有一个很好的理由。你可以和x86等有，拿多个时钟或者一个时钟。要获得一个时钟乘法需要（相对）大量的芯片空间（正如 Dani 提到的，可能需要一个专用的逻辑块，仅用于乘法）。绝对没有理由为什么一位设计师会做出与另一位设计师相同的选择，无论是在同一家公司（一个 x86 与另一个相比）还是不同的架构（x86 与 arm 与 mips 等）。每个设计者都知道乘法的结果是操作数的两倍，那么您是选择为程序员提供所有操作数组合的完整答案（结果与操作数的大小不同）还是将结果裁剪为操作数大小？如果你剪辑给他们一个溢出或异常，或者你让他们继续运行而不知道结果是错误的？您是否强制他们在所有 mul 和 div 指令周围添加包装器，以便可以检测到溢出成本性能？

x86 是一个非常糟糕的架构，首先学习或用作其他人的参考。它会导致很多错误的假设。并非所有处理器都是微编码的。并非所有 CISC 处理器都是微码。没有理由不能对 RISC 处理器进行微编码，您可以对 CISC 或 RISC 进行微编码，也可以不对 CISC 或 RISC 进行微编码，这是一种设计选择，而不是规则。

RISC 并不意味着最少的步数，即使是一个简单的寄存器到寄存器移动也是最少两个步骤（获取源，存储结果），这可能需要两个时钟来执行处理器有时实现的方式（寄存器文件的 sram 组是不一定是双端口）。alu 指令是三个步骤，在 RISC 处理器上可以占用三个时钟，RISC 将平均每条指令一个时钟，但 CISC 也可以。您可以使用超标量并超过每条指令一个时钟，至少对于处理器受限时的突发。对于 CISC 和 RISC，超标量的复杂性是相同的。

我建议编写一个指令集模拟器，或者至少启动一个。如果没有别的，那就是反汇编程序。最好让 100 名程序员执行相同的编程任务，但彼此隔离。即使所有人都在同一所学校由同一位老师授课，您也会为该 iss 或反汇编程序获得 3 到 100 种不同的设计。让它成为一个文本编辑器作为一项编程任务，只是编程语言的选择首先会有所不同，然后程序的设计会有所不同。硬件设 与 CISC 与 RISC 的关系较少，而与设计团队及其选择有关。英特尔有不同的设计目标，例如反向兼容，这是一个非常昂贵的选择。

*CISC*和 RISC都根据处理器的设计*将每条指令转换为更小的可消化/可分割的步骤。*将乘法替换为加法，然后在 asm 级别比较 CISC 与 RISC，然后更深入。使用 x86，您可以将内存用作操作数，例如，您不能使用 arm。所以

```
register = memory + register 
```

是

```
load register from memory
regster = register + register 
```

你有额外的步骤。

但它们都分解成相同的步骤顺序

```
resolve memory address
start memory cycle,
wait for memory cycle to end,
fetch register from register memory
send operands to alu
take alu output and store in register memory 
```

现在 cisc 实际上稍微快一些，因为要正确执行指令的 risc 需要将从内存读取的值存储在额外的寄存器中（从 asm 的角度来看，cisc 是两个寄存器，risc，三个或两个 on 重用）。

如果从内存中读取的值未对齐，则 cisc 在技术上获胜（如果 risc 通常不允许未对齐传输）。cisc 处理器需要相同数量的内存周期来获取所有保持相等的未对齐数据（两个处理器都需要两个内存周期，cisc 和 risc 都会受到惩罚）。但是要专注于 asm 指令与 asm 指令，如果内存操作数未对齐，则 risc 必须这样做

```
read memory to register a
read memory to register b
shift a, 
shift b,
or/add 
```

cisc在哪里：

```
read memory to register (takes two memory cycles) 
```

您还具有指令大小，流行的 risc 处理器（如 arm 和 mips）倾向于固定指令长度，其中 x86 是可变的。x86 可以在一个字节内完成另一个需要四个字节才能完成的工作。是的，您的获取和解码更复杂（更多逻辑，更多功能等），但您可以在相同大小的缓存中容纳更多指令。

微编码不仅仅是将一个指令集分解成另一个指令集（另一个可能非常痛苦，你永远不想在本机编程）。假设较低级别的系统可以更快地实现且错误更少，微编码可以帮助您更快地进入市场。假设您可以更快地提高产量，因为您可以在事后修复一些错误，并且可以在现场进行修补。并不总是完美，也不总是成功，但将其与非微码处理器相比，您必须让编译器人员修复错误或召回处理器或将公司视为黑眼圈并希望赢得一些客户， ETC...

所以答案是否定的。 *两个都*RISC 和 CISC 将单个指令转换为可以微编码或不可微编码的步骤序列。简单地认为它们是您喜欢的状态机中的状态。CISC 可能有一些将更多步骤打包到一条指令中，但这意味着更少的指令获取。并且知道整个 CISC 指令，这些步骤自然可以在芯片中更有效地实现，其中 RISC 处理器可能必须检查一系列指令并动态优化以获得相同数量的步骤。(ldr r0,[r1]; 添加 r0,r0,r2)。如果 CISC 要检查指令组而不是专注于一个指令组，它也可以寻找相同类型的优化。两者都使用管道和并行执行。CISC 通常意味着 x86，而 RISC 则意味着具有更现代和更简洁的架构。更清洁是指人类更容易编程和实施，但这并不意味着更快。完成相同工作的更多步骤。x86 是可变字长，历史可以追溯到单字节指令，与 4 字节固定指令长度相比，x86 有可能将比固定指令长度 risc 更多的指令打包到缓存中，从而使 x86 成为可能性能提升。为什么 risc 不只是将许多指令转换为一条更小的指令，从而更快地通过缓存和流水线？x86 有可能将比固定指令长度 risc 更多的指令打包到缓存中，从而为 x86 提供可能的性能提升。为什么 risc 不只是将许多指令转换为一条更小的指令，从而更快地通过缓存和流水线？x86 有可能将比固定指令长度 risc 更多的指令打包到缓存中，从而为 x86 提供可能的性能提升。为什么 risc 不只是将许多指令转换为一条更小的指令，从而更快地通过缓存和流水线？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:50:48.343

它可能会转化为较小的指令，但经常使用的指令（如乘法）通常具有指定的电路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T15:58:06.357

CISC机器的解码电路很复杂，它们将复杂的CISC指令解码为更简单的指令。例如，理论上可以有一条 CISC 指令来获取两个内存地址的值并将乘法结果设置到另一个内存地址。CISC机器的解码器将这条指令解码为多个类似RISC的操作，例如从内存位置获取一个值到寄存器，向该寄存器添加另一个寄存器等。解码后应该没有区别。这就是当前的 CISC 机器（如 x86）与 RISC 机器竞争的方式。但是您必须为复杂的解码阶段付出代价。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T22:48:37.030

@Pink 把它想象成一个工人用推车搬砖，一次装载 10 个，而 10 个工人排成一排并互相递砖，所以优势是推车的价格较低，除非这 10 个是太阳能机器；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-18T03:16:54.490

我只是对老前辈的回答感到惊讶。尽管 RISC 指令也可以分成小步骤，而且它们确实如此，但这些步骤通常是流水线的，每个周期执行一条指令（不是平均数）。用于寄存器文件的 SRAM 几乎总是双端口的（同时读取和写入），因为这几乎可以免费完成，因为它们是 SRAM（只需学习数字系统课程）。因此，如何实现 RISC 处理器确实是一种设计选择，它们可以 7 使用微码实现，选择 RISC 指令集以便它们不需要，而实用的非微码 CISC 几乎是不可能的。CISC 指令在实践中从不直接流水线化，而只有 CISC 微码（实现类似 RISC 的指令）。

RISC 指令集并不容易由人类编程。它们更难由人类编程，但编译器更容易优化它们。

仅当指令具有复杂的微码时，通过更正微码来纠正指令中的错误似乎是合理的。您无法更正添加微码中的错误。因此，您可以通过更改微码来纠正的错误是您在 RISC 处理器中没有的错误，因为这种复杂的指令通常由软件实现。但是，在某些情况下，可以用微编码指令替换简单的类似 RISC 的指令来修复错误（例如在 div 中），但代价是性能损失很大。

CISC 指令可能比 RISC 指令更有效，因为它们可以有专用的硬件。例如，向量移动需要 RISC 中的加载、存储、递增、比较和跳转指令，而它可以是单个 CISC 指令。CISC 处理器可以有一个额外的增量单元，它将与加载和比较并行地增加地址寄存器。但是，这实际上在 RISC 机器（如 ARM）中得到了支持。事实上，RISC 背后的基本思想是拥有代码而不是微码。这导致直接在硬件中实现的指令较少，有点像程序员或编译器直接编写微代码。缺点是代码更大，

最后，RISC 指令不会分解为更小的指令，因为它们已经在单个时钟周期中运行并且在硬件中以非常快的时钟运行。

最后，今天像 x86 这样的高性能 CISC maxinex 也将它们的指令分解为像微码指令一样的 RISC。

# java - Java - 解决大于内存限制的问题

> ID：11192681
> 
> 赞同：3
> 
> 时间：2012-06-25T15:47:57.683
> 
> 标签：java, algorithm

我最近在思考以下场景：假设您有一个巨大的数据库，并且您希望在加载其中的某些部分时执行一些计算。可能的情况是，即使是该数据库的一小部分也可能无法放入非常有限的 Java 堆内存中。人们如何解决这些障碍？google 是如何在内存空间有限的情况下对 TB 级数据进行分析的？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T15:52:58.070

简短的回答是，您需要以适合内存的块的形式处理数据，然后将这些分块计算的结果组装成最终答案（可能分多个阶段）。一个常见的分布式范例是 Map Reduce：有关 Google 原始实现的详细信息，请参见[此处](http://research.google.com/archive/mapreduce-osdi04.pdf)，开源实现请参见[Hadoop 。](http://hadoop.apache.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:48:48.070

I use a 64-bit JVM with off heap memory such as direct ByteBuffers and memory mapped files. This way you can have into the TBs of virtual memory while the heap is 1 GB or less. I have run different applications where the JVM has a virtual memory size 10x larger than physical memory with a modest loss of performance. If you can use a fast SSD this can help you when your working dataset is larger than your main memory.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:47:06.690

1) 增加物理内存和/或虚拟内存大小

2）使用具有分片或类似技术的多台计算机

3) 以适合内存的小块处理数据

4）使用更智能的数据结构选择，使用更少的内存，如布隆过滤器或尝试，如果合适的话。

5）您甚至可以使用压缩算法压缩/解压缩内存中的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:52:28.827

您要么必须获得更多内存并增加堆大小，要么如果无法做到这一点，请编写一次只加载子集或数据的算法。

# ext.net - 如何从 DateField 中删除日历图标

> ID：11192684
> 
> 赞同：1
> 
> 时间：2012-06-25T15:48:04.890
> 
> 标签：ext.net

如何从`DateField`Ext.net 中删除/隐藏日历图标？我只需要通过直接编辑文本来输入。

```
DateField dtPlanDate = new DateField {
    ID = "dtPlanDate", 
    FieldLabel = Strings.PlanDate,
    LabelAlign = LabelAlign.Top,
    ToolTip = "Enter Date",
    Value = DateTime.Today,
    MinDate = DateTime.Today,
    MaxDate = DateTime.Today.AddDays(1),
    StartDay = (int)DayOfWeek.Monday,
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:03:54.397

简单的 ！！！

添加一个属性“HideTrigger”并将其设置为“true”

```
DateField dtPlanDate = new DateField { 
 ID = "dtPlanDate",
 FieldLabel = Strings.PlanDate,
 LabelAlign = LabelAlign.Top,
 ToolTip = "Enter Date",
 Value = DateTime.Today, 
 MinDate = DateTime.Today,
 MaxDate = DateTime.Today.AddDays(1), 
 StartDay = (int)DayOfWeek.Monday,
 HideTrigger=true
}; 
```

谢谢

# java - Android上的Bouncycastle椭圆曲线加密

> ID：11192686
> 
> 赞同：3
> 
> 时间：2012-06-25T15:48:05.973
> 
> 标签：java, android, bouncycastle

我正在尝试使用 Bouncycastle 在 android 设备上解密 X509 证书。但是，我一直在

```
java.lang.RuntimeException: algorithm identifier 1.2.840.10045.2.1 in key not recognised. 
```

但是，当我在自己的计算机上运行完全相同的代码时，它工作得非常好。android 是否用过时的版本覆盖了一些 bouncycastle 库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:04:20.240

我认为 Android 还没有完整的 ECC 功能。bouncycastle android 使用了很多内容。但是，我会看一下 spongycastle，它试图为 Android 实现所有 bouncycastle 的原始功能。

这是一个关于 android 中缺少 ECC 的充气城堡主题的[链接。](http://bouncy-castle.1462172.n4.nabble.com/Elliptic-Curve-Same-BC-JAR-yields-different-capability-list-on-Desktop-Java-and-Android-Why-td3724570.html)

这是SpongyCastle的[链接](http://rtyley.github.com/spongycastle/)

# ruby-on-rails - 避免使用第三方 gem 是否正确？

> ID：11192688
> 
> 赞同：4
> 
> 时间：2012-06-25T15:48:14.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我正在使用 Ruby on Rails 3.2.2。我想知道以下想法（源自我[之前的问题](https://stackoverflow.com/questions/11190792/how-to-properly-add-brackets-to-sql-queries-with-or-and-and-clauses-by-using)）是否正确：

> 我倾向于不使用第三方 gem（至少在可能且合理的情况下），因为它们可能随时被放弃。此外，如果 Ruby on Rails 框架发生变化，我可能必须等待这些 gem 更新，然后才能将我的应用程序更新到最新的 RoR 版本。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:01:35.767

在一个完美的世界里，你是不朽的，拥有无限的时间，是世界上最好的程序员，无论你在 1 小时内还是 10 年内推出产品都没有区别，这样你就可以自己从头开始编写所有代码，那么也许它会做更多感觉要避开别人的代码。

但在现实世界中，人们已经为你解决了问题。宝石允许您插入这些解决方案。

一个好的经验法则是尽可能为给定的解决方案选择社区最喜欢/流行的宝石。使用 gem 的人越多，就越有兴趣保持它的更新，并且越来越多的眼球正在仔细检查它并发送拉取请求。一个在生产环境中经过一群人实战考验的宝石可能比你第一次尝试时想出的要好，对吧？

依赖于一个业余维护者的宝石，甚至没有在自痒的生产应用程序中使用它，您往往会发现一些风险。但即使在这种情况下，如果有一天你不得不分叉他的宝石，你仍然领先于你从头开始的地方。

更好的趋势是避免从头开始编写所有内容，而是利用其他有类似需求的人的大脑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:52:09.227

嗯，这是您为了节省开发时间/预算和缩短上市时间而承担的风险。

如果您发现自己的某个 gem 被遗弃了，那么您可以查看类似的 gem 或 fork 并改进它。无论哪种方式，它仍然比自己开发**所有东西**要好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:03:52.237

放弃这种哲学！很多网站/公司都倾向于这样做——在[“不是在这里发明”](http://en.wikipedia.org/wiki/Not_invented_here)综合症中更为人所知。尤其是推特，它是一个[大罪犯。](http://www.unlimitednovelty.com/2009/04/twitter-blaming-ruby-for-their-mistakes.html)开源很棒——使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T22:14:47.313

> 一件作品只有在什么都不能添加，什么都不能带走的情况下才能完美地完成。 **——约瑟夫·朱伯特**

这与我们在工作中的 Rails 项目中遵循的理念相同。如果你想在 Gemfile 中添加一个 gem，你基本上必须争论它。如果你找不到一个很好的理由为什么它应该在那里，它就会被踢出。我们绝对不是试图重新发明轮子，但减少可能维护不善的可移动部件的数量是恕我直言的好选择。因此，对维护良好且已建立的 Rails 插件说“是”，但要警惕那些看起来像是快速组合解决方案的东西。更常见的是，您最终不会维护自己的补丁或分叉回购，因此您可能还需要重新发明那个特定的轮子......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T20:35:08.683

例如，尝试**设计**gem，然后自己实现它的功能。因此，您可以定义自己对问题的看法。

我更喜欢使用我发现有用的所有宝石。如果更新后任何 gem 不起作用，您可以随时 fork 并升级它。

# mysql - mysql 协议中的身份验证有多安全？

> ID：11192689
> 
> 赞同：10
> 
> 时间：2012-06-25T15:48:20.517
> 
> 标签：mysql, security, protocols

我的用户正在使用 MS Access 和 ODBC 连接器连接到我的远程 MySQL 数据库。我想知道这有多安全，就可能向第三方泄露密码而言。mysql 协议认证对窃听甚至中间人攻击是否安全？我会很高兴能够防止窃听。请注意，我关心的只是身份验证，我不关心数据泄露。

请不要回复说我应该使用 SSL。我知道这将是理想的，但设置似乎并不简单。无论如何，我想知道纯 mysql 协议的安全级别是多少。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T15:59:21.810

您想要“*安全地进行窃听甚至中间人攻击*”的是什么？你的密码，还是你的数据？

您的问题的标题专门指*authentication*。MySQL 在保护您的密码免受窃听方面做得很合理（它不是以明文形式发送的，并且使用 nonce 可以避免重放攻击）。引用 [MySQL 协议内部](http://web.archive.org/web/20120701044449/http://forge.mysql.com/wiki/MySQL_Internals_ClientServer_Protocol#Password_functions)：

> MySQL 4.1 及更高版本
> 
> 请记住 mysql.user.Password 存储 SHA1(SHA1(password))
> 
> *   服务器向客户端发送一个随机字符串（加扰）
> *   客户计算：
>     *   stage1_hash = SHA1(password)，使用用户输入的密码。
>     *   token = SHA1(scramble + SHA1(stage1_hash)) XOR stage1_hash
> *   客户端将令牌发送到服务器
> *   服务器计算
>     *   stage1_hash' = token XOR SHA1(scramble + mysql.user.Password)
> *   服务器比较 SHA1(stage1_hash') 和 mysql.user.Password
> *   如果它们相同，则密码没问题。
> 
> （注 SHA1(A+B) 是 A 与 B 连接的 SHA1。）
> 
> **该协议修复了旧协议的缺陷，无论是在线窥探还是 mysql.user.Password 都不足以成功连接。**但是当一个人同时拥有 mysql.user.Password 和网络上截获的数据时，他就有足够的信息来连接。

但是，经过身份验证的会话以明文形式继续：窃听者将能够看到所有查询和结果；并且 MITM 将能够对其进行更改。如[手册](http://dev.mysql.com/doc/refman/5.6/en/ssl-basics.html)所述：

> 默认情况下，MySQL 在客户端和服务器之间使用未加密的连接。这意味着有权访问网络的人可以查看您的所有流量并查看正在发送或接收的数据。他们甚至可以在客户端和服务器之间传输数据时更改数据。

虽然您可能不喜欢这个答案，但 SSL 是*一种*旨在击败数据窃听（通信如何加密？）和 MITM 攻击（任何一方如何验证其对等方是它认为的人？）的工具。事实上，如果 mysql 客户端-服务器协议单独击败了这些威胁，那么就没有理由在 SSL 上使用 mysql（因此它不太可能成为受支持的配置）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-30T08:43:00.863

简短的回答：是的，该协议可以免受窃听和 MITM 攻击。

只有当攻击者设法嗅探身份验证尝试*并且*攻击者知道 mysql.user 的内容时，他才能随后对服务器进行身份验证。例如，如果您在两台不同的 mysql 服务器上使用相同的密码，并且攻击者获得了其中一台的访问权限，他也可以连接到第二台服务器。

# visual-studio-2010 - msbuild 一个引用具有不同配置的项目的项目

> ID：11192694
> 
> 赞同：3
> 
> 时间：2012-06-25T15:48:36.053
> 
> 标签：visual-studio-2010, visual-c++, msbuild

我有一些依赖于其他项目的视觉工作室项目，这些项目具有不同的配置。

```
example:
Project MyProject (Configuration: Release)
  References:
    Project LibA (Configuration: Release_DontLink)
    Project LibB (Configuration: Release 
```

使用 Visual Studio 进行构建可以正常工作，因为用于不同项目的配置存储在解决方案文件中。

但是当我使用 msbuild 构建 MyProject 时，它构建了 LibA 的 Release 配置，这是不正确的。由于 LibA 和 LibB 都被许多其他项目使用，我无法更改这些配置，我只能控制 MyProject。

有没有办法在不更改 LibA 和 LibB 项目的情况下使用 MsBuild 构建 MyProject？

可能相关的问题：[MSBuild 中 ProjectReference 的配置](https://stackoverflow.com/questions/6624168/configuration-for-projectreference-in-msbuild)，但是我没有完全理解答案，我认为这需要我更改 LibA/LibB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:31:27.937

在解决方案级别（即：MyProject.sln），打开属性页并设置`Release`配置以构建`Release_DontLink`项目配置`LibA`。如果您无法控制 sln 文件，您应该能够创建它的副本（即：MyProject.Release.sln）。

![sln 属性](../Images/a837121a09101be36e7a790655956c0f.png)

然后构建解决方案：

```
msbuild MyProject.sln /p:Configuration=Release 
```

或者（甚至不是最佳实践），在构建`MyProject`构建`LibA`并覆盖其`OutDir`属性之后：

```
msbuild LibA.csproj /p:Configuration=Release_DontLink;OutDir=..LibA\Release 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T14:20:06.450

我刚刚遇到了同样的问题，发现需要为所有配置的平台完成解决方案配置。

# jsp - 转义包含的 jsp 文件

> ID：11192695
> 
> 赞同：1
> 
> 时间：2012-06-25T15:48:36.273
> 
> 标签：jsp, include, escaping

我正在使用一个包含其他文件的 JSP 文件，但由于它用于 AJAX 响应，因此需要对包含的文件进行转义。我最初的尝试是这样的：

```
<%=StringEscapeUtils.escapeJavaScript(<%@include file="file.jsp"%>)%> 
```

这给出了这个错误：

```
Syntax error, insert ")" to complete Expression 
```

这显然是不正确的，但应该显示我正在尝试做的事情。反正有没有完成我正在尝试的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:21:44.373

为什么你认为它应该被 JS 转义？它不应该。如果你想发回 HTML，你就发回 HTML。它是一个 AJAX 请求这一事实并没有改变任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:50:11.350

最后，通过用单引号替换所有双引号，删除换行符来解决这个问题，并且偶然删除了带有双引号和单引号的任何部分，因此不会引起问题。

# unix - Powershell 中的 UNIX 时间提供 GMT

> ID：11192699
> 
> 赞同：2
> 
> 时间：2012-06-25T15:49:01.810
> 
> 标签：unix, powershell, time

首先，我不是专业的编码员，只是一个卑微的网络工程师 :) 但我非常相信自动化，并尝试编写脚本来处理他们适合的任务

我试图在 PowerShell 中获取 10 分钟前的当前 UNIX 时间戳，以用于数据库检查脚本。我正在使用它来获取当前的 Unix 时间：

```
$unixtime=[int][double]::Parse((Get-Date -UFormat %s))-600 
```

但是当我通过 UNIX 时间到本地时间转换器 (http://www.onlineconversion.com/unix_time.htm) 运行它时，我得到的是 GMT 的当前时间（例如，如果我现在运行它我得到“1340620608”，转换器说是格林威治标准时间上午 10:36，而实际时间是 CDT 上午 10:36）。与数据库中的 Unix 时间戳相比，这显然会导致问题，因为它们是本地时间。虽然我可以编写（或找到）一个函数来计算当前的 GMT 偏移量并将其应用于我的时间戳，但我想知道是否有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:38:30.293

尝试：

```
$unixtime=[int][double]::Parse($(Get-Date -date (Get-Date).ToUniversalTime()-uformat %s)) 
```

上面首先获取当前的 GMT 时间，然后将其转换为正确的格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:36:09.327

这对你有用吗？

```
(Get-Date).AddMinutes(-10).Subtract((Get-Date 1/1/1970)).TotalSeconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:31:47.883

Unix 时间戳定义为自 1970-01-01 00:00:00 **GMT**以来的秒数。

如果数据库中的时间戳存储为自当地时间 1970 年以来的秒数，那么您可能需要修复数据库。但您的数据库时间戳很可能是标准的基于 UTC 的 Unix 时间戳。

您还应该检查系统的时间和时区设置；您的计算机可能将 GMT 视为当地时间（其时钟可能会延迟几个小时）。

# google-chrome - Google Chrome 中的 CSS 圆角

> ID：11192704
> 
> 赞同：0
> 
> 时间：2012-06-25T15:49:23.560
> 
> 标签：google-chrome, css

我想在所有浏览器中将表格的左上角设为圆形。

我试过这个：

```
-webkit-border-top-left-radius: 9px;

-moz-border-radius-topleft: 9px;

border-top-left-radius: 9px; 
```

但它似乎不适用于谷歌浏览器。任何人都可以看到错误吗？我也确定它曾经工作过......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:52:17.907

```
border-top-left-radius:9px; 
```

或者

```
border-radius:9px 0 0; 
```

作品。如果不是，那是您的 css 中的问题 - 可能是其他一些具有更高特异性的样式声明覆盖了此规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:54:44.713

将填充更改为 5 并返回为 0，它似乎又可以工作了……一定是缓存之类的，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:51:28.517

它应该工作：`border-top-left-radius: 9px;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:52:25.807

前往[border-radus.com](http://border-radius.com/)，它会为你生成css。如果这不起作用，则 CSS 很有可能在其他地方被覆盖。

# c++ - 鼠标挂钩 - 限制和性能

> ID：11192713
> 
> 赞同：4
> 
> 时间：2012-06-25T15:49:52.447
> 
> 标签：c++, performance, winapi, hook

我有一些关于 WH_MOUSE 的问题。根据我的阅读，通过将钩子放入 DLL 中，它会注入进程。这是否意味着捕获鼠标也可以在我的桌面、菜单启动等上工作？那么应用程序的标题栏呢？我在互联网上看到过一些有此类问题的帖子，但不知道它们是否因某些原因而失败或存在某种限制（或其他方法）。

我还有一个关于 WH_MOUSE 和 WH_MOUSE_LL 之间性能的问题。我在某处发现 WM_MOUSE 比 WH_MOUSE_LL 快，但它真的很明显吗？如果是这样，在什么情况下它会使系统减慢到我们可以注意到的程度？如果我只想记录鼠标和键盘的点击，WH_MOUSE_LL 会有效吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T07:34:33.580

*   这两个钩子都可以让您在屏幕上的任何位置进行鼠标输入（除了下面列出的情况），从这个高级功能的角度来看，它们本质上是相同的。

*   两者都受 UIPI 约束：当鼠标悬停在提升的进程上时，这两个钩子都不会让您获得鼠标输入。

*   低级挂钩不需要 DLL，因此可以由 C# 使用。另一种类型需要使用非托管代码 (C/C++) 编写的单独 DLL。

*   如果在 64 位机器上运行，您可以混合运行 32 位和 64 位进程，低级挂钩将接收来自这两种类型进程的事件，但其他类型的挂钩只会看到事件来自与自身相同“位数”的进程（此限制源于使用挂钩 DLL；32 位挂钩 DLL 只能挂钩到 32 位进程，同样适用于 64 位。）所以如果你关心在这种情况下，使用 LL 挂钩只需要一个进程，而使用另一种类型的挂钩，则需要两个协作进程，一个用于 32，一个用于 64。

*   LL 挂钩需要运行消息循环。

*   LL 挂钩更容易编写，因为回调发生在您自己的进程中，因此您可以访问自己的全局变量等。对于另一种类型的钩子，回调发生在另一个进程中，因此您必须做额外的工作才能将信息传达回您的主进程。（在这两种情况下，您都应该尽量减少回调中的代码；只需进行基本的过滤和检查，从您的主线代码中做任何重要的工作，而不是回调。）

*   LL 挂钩“较慢”，因为输入通知被编组到您的进程，在那里处理，然后上下文再次切换回原始进程。使用其他类型的钩子，没有上下文切换。然而，这可能会或可能不会被用户注意到，并且可能取决于您在回调中所做的事情、您如何处理信息、安装挂钩的时间以及其他因素。

这个问题似乎解决了标题栏[的问题](https://stackoverflow.com/questions/940156/setwindowshookex-with-wh-mouse-not-capturing-mouse-moves-over-htcaption-area)；总结是您在标题栏（和其他非客户区域）上收到*WM_NCMOUSEMOVE消息，在其他地方收到 WM_MOUSEMOVE 消息，因此您必须检查**两者*。

我的 2c：如果您正在编写一个简单的实用程序或为了好玩而编写代码，请使用 _LL；它更容易为您处理大多数棘手的情况；您不必担心 64/32 位问题或进程之间的通信，因此您可以更快地启动和运行。当您的应用程序逻辑正常工作后，如果需要，您可以稍后将代码转换为其他类型的挂钩。另一方面，如果你想要一个更“专业”的应用程序，它是一个“好公民”，并将其对其他应用程序的影响降到最低，那么其他类型的钩子可能更合适；但是与所有与性能相关的事情一样，首先测量，不要假设，所以即使那样，也许最好还是从 _LL 钩子开始。

# c# - 使用 List<> 时使用 ListBox（带有 ItemTemplate）的正确方法

> ID：11192716
> 
> 赞同：1
> 
> 时间：2012-06-25T15:50:04.697
> 
> 标签：c#, .net, windows-phone-7

我一直在尝试使用我在 ListBox 中的 Model.Person 的 List<>，使用 ItemTemplate 作为样式，然后在选择了一个时从列表中检索正确的 Model.Person。我到处寻找示例代码（并尝试了领先的数据绑定，但仍然无法正确理解它）。

```
List<Model.Person> people = (comes from IsolatedStorageSettings) 
```

在一个页面上，我有一个 ListBox，比如说名为“List”。

```
<ListBox Name="List"></ListBox> 
```

在我的 C# 代码中，我从隔离存储中提取了一个列表。理想情况下，我想做的是让该列表中的所有人以一种格式良好的方式出现在 ListBox 中，然后在选择一个时，轻松地从 List<> 中检索 Person。我现在正在做的，肯定是错的是：

```
foreach (Model.Person person in people)
{
    List.Items.Add(person.firstName + " " + person.lastName);
} 
```

然后，选择项目时，我发现使用此方法的人：

```
string selectedPerson = List.SelectedItem.ToString();
Model.Person person = people.Where(X => X.firstName + " " + X.lastName == selectedPerson).FirstOrDefault(); 
```

显然，项目中的列表仅显示为纯文本，而不是使用 ItemTemplate 创建的有趣对象。有人可以告诉我我做错了什么，或者为我指出实现这一目标的好资源的方向吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:57:45.100

你真的想在视图中查看相关的东西，而不是在后面的代码中。因此，不要使用代码手动填充列表，而是将其绑定到视图中。XAML 可能如下所示：

```
<ListBox ItemsSource="{Binding Path=People}" SelectedItem="{Binding Path=SelectedPerson, Mode=TwoWay}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Path=FirstName}" />
                <TextBlock Text="{Binding Path=LastName}" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

为您的页面使用清晰的结构化 ViewModel，其中包含一个成员`People`和一个用于所选人员。它看起来像：

```
public class YourPageViewModel : INotifyPropertyChanged
{
    public List<Model.Person> People { get; set; }

    private Model.Person _selectedPerson;
    public Model.Person SelectedPerson
    {
        get
        {
            return _selectedPerson;
        }
        set
        {
            if (_selectedPerson != value)
            {
                _selectedPerson = value;
                PropertyChangedEventHandler handler = this.PropertyChanged;
                if (handler != null)
                    handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

然后在视图后面的代码中设置视图模型：

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();

        this.Loaded += (s, e) =>
        {
            if (DataContext == null)
                DataContext = new YourPageViewModel();
        };
    }
} 
```

瞧，您正在使用 MVVM 方法，而不是从后面的代码中填充视图。

另外，我建议不要滥用`IsolatedStorageSettings`存储应用程序的实际数据。为您的模型对象使用序列化程序，或使用 Windows Phone 的[SQL 紧凑型](http://msdn.microsoft.com/en-us/library/hh202860%28v=vs.92%29.aspx)数据库来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:21:28.207

我还建议使用`ObservableCollection<Person>`而不是`List<Person>`. List 没有 ObservableCollection 那样的内置通知机制。

# java - 迭代器是快速失败的，而枚举不是。除了 Javadoc 给出的要点之外，两者之间还有其他区别吗？

> ID：11192719
> 
> 赞同：0
> 
> 时间：2012-06-25T15:50:20.500
> 
> 标签：java

根据 Javadoc，

> 新的实现应该考虑使用迭代器而不是枚举

如果较新的实现应该考虑使用迭代器，为什么不推荐使用枚举？

迭代器是快速失败的，而枚举不是。除了 Javadoc 给出的要点之外，两者之间还有其他区别吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:55:08.920

[这](http://javarevisited.blogspot.com/2010/10/what-is-difference-between-enumeration.html)描述了枚举和迭代器之间的区别。基本上，主要区别似乎是迭代器有一个枚举没有的删除方法，如果另一个线程试图修改正在迭代的集合，迭代器会抛出一个 ConcurrentModificationException ，而枚举没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:53:11.123

Java 中的许多东西应该被弃用，但由于大量遗留代码而不能。枚举是一个，Vector、HashTable、Dictionary、Properties 是其他..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:54:54.707

更多差异：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Enumeration.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Enumeration.html)

> 迭代器添加了一个可选的删除操作，并且具有更短的方法名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-25T21:20:03.860

迭代器比枚举慢。迭代器可以遍历遗留和非遗留元素，但枚举只能遍历遗留元素迭代器是快速失败的，但不是快速失败的。

# javascript - 如何使用 JavaScript 在不同屏幕分辨率的网页上将背景图像居中？

> ID：11192721
> 
> 赞同：0
> 
> 时间：2012-06-25T15:50:22.247
> 
> 标签：javascript, jquery

我想确定客户端机器的屏幕分辨率并使用 JavaScript 在中心设置背景图像。

我到目前为止：

```
function centerBackGroundImage()
{
    var browserWidth = document.documentElement.clientWidth;
    var browserHeight = document.documentElement.clientHeight;
    $("#background").css({ "z-index": "-10", "margin:left": (browserWidth / 2) - (browserHeight/ 2) });
} 
```

我已经添加了名为的 div 标签`background`和`<img>`带有图像文件位置的标签。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:55:31.693

为此，您不需要 JavaScript。您可以只使用 CSS 来做到这一点[`background-position`](https://developer.mozilla.org/en/CSS/background-position)：

```
#background {
     background-image: url('https://www.google.com/images/srpr/logo3w.png');
     background-position: center;
     background-repeat: no-repeat;
} 
```

[**演示**](http://jsfiddle.net/TqPNF/)- 它也可以在元素内部工作，而不仅仅是`body`我的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:54:37.937

这将为您提供跨浏览器分辨率

```
var browserWidth = $(window).width();
var browserHeight = $(window).height(); 
```

# jquery-mobile - jQuery Mobile +bone.js：导航栏问题

> ID：11192722
> 
> 赞同：1
> 
> 时间：2012-06-25T15:50:22.947
> 
> 标签：jquery-mobile, backbone.js

我使用路由器中的函数动态加载从模板创建的页面（如在某些教程中所见）：

```
 changePage: function(page) { // page is a View object
        $(page.el).attr('data-role', 'page');
        page.render();
        $('body').append($(page.el));
        var transition = $.mobile.defaultPageTransition;
        if (this.firstPage) {
            transition = 'none';
            this.firstPage = false;
        }
        $.mobile.changePage($(page.el), {changeHash:false, transition: transition});
    } 
```

问题是当页面包含 JQ Mobile 导航栏时，活动项目不会突出显示。实际上是，像 1 毫秒，然后不是，我觉得这是因为导航栏被“重新加载”了。当我在同一个项目上单击 2 次时，它会第二次起作用。

有没有人能够使用 jQuery Mobile 和backbone.js 使用导航栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:41:36.193

我最终这样做了：

```
var activeTab = null;

$('[data-role=page]').live('pageshow', function (event, ui) { 
    $.each($('[data-role=navbar] ul li').children(), function (i, val) {
        if (typeof activeTab !== "undefined" && activeTab != null && $(val).attr('id') == 'navTab' + activeTab)
            $(val).addClass($.mobile.activeBtnClass);
        else
            $(val).removeClass($.mobile.activeBtnClass);
    });
    activeTab = null;
}); 
```

对于需要活动选项卡的每条路线，我只需执行以下操作：

```
r_search: function() { // Search page (form)
    activeTab = "Search";
    this.changePage(new SearchView());
}, 
```

# wcf - 何时使用双工服务？

> ID：11192723
> 
> 赞同：5
> 
> 时间：2012-06-25T15:50:23.137
> 
> 标签：wcf, tcp, duplex

好吧，我知道在双工合同中，服务可以向客户端发送消息，但我想知道这在什么时候真正有用。

我有一个常见的应用程序向服务发送请求以从数据库中获取数据，插入数据......等等。另外，我需要在数据库中存储大约 40MB 的文件，所以我需要一个良好的性能。出于这个原因，我想将 net.tcp 绑定与传输模式流式使用，但问题是 net.tcp 双工服务不能使用流式传输模式。

所以我想我有一些选择。

1.-研究我是否真的需要这种应用程序的双工合同。例如，也许在聊天应用程序中，双工合同更有意义，因为服务器可能需要在联系人连接时通知客户端......等等。但在普通客户端中，访问数据库是必要的双重合同？什么样的操作需要双工合同？

2.- 其他选项不是没有双工合同，而是在服务器中实施无双工合同，在客户端中实施其他单合同，因此当客户端连接到服务时，服务会收到连接到服务所需的信息客户的服务。但是，这是避免双重合同的好方法吗？

3.- 真的对于我的应用程序，我需要 tcp 而不是允许流传输模式的双工 HTTP？就性能而言，tcp 相对于 HTTP 的优势是什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T17:05:13.863

如果要实现回调模式，则需要双工。回调意味着客户端不知道服务器何时发生某些事件。

如果您不知道事件何时发生，您有两种选择：

1.  轮询 - 每 X 分钟发送一次请求以检查事件是否发生。服务器应返回事件详细信息（如果发生）或返回标志，表明您需要继续调用。服务器还可以在高级场景中返回推荐的超时。
2.  回调 - 客户端发送某种形式的描述，如果事件发生，服务器应该做什么。这可能是指向 C 中的函数、.NET 中的委托或 WCF 中的端点架构的指针。服务器会记住该信息并在时间到来时从他们身边拨打电话。

如您所见，双工/回调意味着在某些时候服务器充当客户端（启动通信），这是一个重大的游戏改变。

WCF 双工通信可能需要特殊的网络配置，因为在许多情况下，网络允许您调用外部服务（您作为客户端工作）但禁止外部资源调用您（外部服务作为客户端工作）。这是出于安全目的而实施的。

回到你的问题：

1.  如果您只需要下载大量数据，则不需要双工。如果您想捕获服务器中发生的更新并通知客户端，您可能需要它。Duplex 应该适用于聊天，因为在聊天中有很多场景需要通知客户其他人引入的更改。
2.  您描述的是双工通道的手工变体。如果您希望服务器调用您的方法，您应该使用 MS 制作的经过验证和测试的双工实现。否则，您的选择是轮询。
3.  你是对的，你需要 tcp + 流传输模式来处理大量数据。TCP 使用二进制序列化，与文本序列化相比更紧凑 + 使用 TCP，您不需要发送任何 HTTP 标头或 SOAP 信封。如果不需要，请禁用安全性。它对性能有很大的影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T16:59:40.090

解决每一点：

**1, 2.**我认为对于您的方案来说，双工服务是一种矫枉过正。正如您自己所说，当客户端和服务都需要不断地相互通知时，双工服务通常很方便，您正在做什么，将大量数据输入/输出数据库似乎并不是一个使用双工通信的好案例。关于`netTcpBinding`不允许双工流式传输，您可以只返回一个字节数组（`byte[]`) 而不是流。40 MB 很多，但我认为流式传输不一定会比双工服务有显着的性能提升，后者将返回一个字节数组（由您测试每个设置并比较结果）。所以你在这里有几个选择，不要流式传输并返回一个字节数组（你可以用你的双工服务来做到这一点）或者你可以忘记让你的服务双工，因为对你来说似乎没有一个强有力的案例使其双工并只返回一个[Stream](http://msdn.microsoft.com/en-us/library/ms789010.aspx)：

```
[OperationContract]
Stream RetrieveFile(long _fileId);
[OperationContract]
long SaveFile(Stream _stream); 
```

**3.** `netTcpBinding`相对于HTTP绑定有相当大的性能优势，但也是有代价的，主要是因为它的TCP端口有时会被internet防火墙阻塞，虽然可以通过`netTcpBinding`internet使用，但不[推荐](https://stackoverflow.com/questions/1590973/wcf-nettcp-binding-over-internet)。选择绑定取决于您要做什么，如果您的客户端要通过 Internet 使用您的服务，那么`netTcpBinding`这不是一个好主意（阻塞的 TCP 端口、防火墙等），但如果您的客户端正在使用该服务在同一个网络（LAN）`netTcpBinding`中是最明智的选择。`wsDualHttpBinding`（不支持流式传输:@）如果您想坚持双工服务（相当于`PollingDuplexHttpBinding`Silverlight 中的）或任何其他基于 HTTP 的绑定（如果您放弃双工服务的想法）是一个不错的选择。

一些可能对您有所帮助的文章，各种 WCF 绑定的性能比较：

[http://blog.shutupandcode.net/?p=1085](http://blog.shutupandcode.net/?p=1085)

[http://tomasz.janczuk.org/2010/03/comparison-of-http-polling-duplex-and.html](http://tomasz.janczuk.org/2010/03/comparison-of-http-polling-duplex-and.html)

根据作者的说法，关于通过 HTTP 使用 WCF 流式传输大数据，这两个样本都经过了高达 2GB 的数据测试：

[http://garfoot.com/blog/2008/06/transferring-large-files-using-wcf/](http://garfoot.com/blog/2008/06/transferring-large-files-using-wcf/)

[http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

您不应该认为您*必须*使用`netTcpBinding`或必须为您的服务使用 Streamed 传输，`netTcpBinding`只有在启用限制和配置某些套接字级别属性后才会变得比 HTTP 绑定更高效。与缓冲传输相比，流式传输 40 MB 不会有显着的性能提升。所以你有很多选择和很多权衡。没有黑白和对错之分，关键在于您如何定制服务以最好地满足您的需求，大多数解决方案都会奏效。你的场景是一个非常常见的场景，网上有很多关于 WCF 中大数据传输的东西，做更多的研究；）

# linux - 使用 sublime 编辑安装在 linux 服务器上的 R

> ID：11192726
> 
> 赞同：1
> 
> 时间：2012-06-25T15:50:37.027
> 
> 标签：linux, r, sublimetext2

我在使用 sublime text 2 的 Windows 机器上。我已经在我的网络上单独的 Cent Os 盒子上安装了 R。我有 Sshfs 管理器，用于在 Windows 上安装 R 盒的硬盘驱动器。我使用它是因为通过将项目添加为 sublime 中的文件夹似乎更容易打开项目，因为我已将其安装为硬盘驱动器。

我已经安装了 sublimeREPL。当我尝试配置它时，我很难正确调整 default_extend_env 变量。

我的 R 在我的网络上的一个单独的 linux 机器上。我的崇高是在与 R 框在同一网络上的 Windows 机器上。

我的 sublimeREPL default_extend_env 值是多少？

我使用了 "PATH": "{PATH}:/usr/local/bin" 并一直在改变它，但没有运气 - 假设因为它位于不同的 linux 机器上。

谢谢

# c# - 使用后面的代码和使用 xaml 移动对象

> ID：11192727
> 
> 赞同：1
> 
> 时间：2012-06-25T15:50:37.727
> 
> 标签：c#, wpf, xaml, expression-blend-4, visualstates

我正在使用 blend 4 制作 wpf 应用程序

我在 xaml 中定义了一个 wrapPanel：

```
<WrapPanel x:Name="WrapPanel_ShowMe"> 
```

当我进入某种视觉状态时，wrapPanel 后面的代码到一个新位置：

```
WrapPanel_ShowMe.RenderTransform = new TranslateTransform(0,-661.5); 
```

我这样做是因为在这种状态下，不同的 wrapPanels 可以出现在状态中，（为了避免复制状态）

退出该状态后，我将面板移回其原始位置。

我在其他州也有相同的 wrapPanel 被 xaml 移动：

```
<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="WrapPanel_ShowMe">
    <EasingDoubleKeyFrame KeyTime="0" Value="-648"/>
</DoubleAnimationUsingKeyFrames> 
```

所以状态 A 在 c# 中移动 wrapPanel，状态 B 使用 xaml 移动面板。

当我使用状态 B 时，wrapPanel 会毫无问题地移动。(xml)

当我使用状态 A 时，wrapPanel 会毫无问题地移动。（C＃）

当我使用状态 A 移动面板然后尝试使用状态 B 后记时，就会出现问题。程序崩溃了，我不知道为什么。似乎在使用代码隐藏移动对象后，xaml 渲染转换不再有效？

谁能告诉我为什么会这样以及如何解决/解决它？

提前致谢

编辑

堆栈结果如下：

```
Unhandled Exception: System.InvalidOperationException: 'Children' property value in the path '(0).(1)[3].(2)' points to immutable instance of 'System.Windows.Media.TransformCollection'.
   at System.Windows.Media.Animation.Storyboard.VerifyPathIsAnimatable(PropertyPath path)
   at System.Windows.Media.Animation.Storyboard.ClockTreeWalkRecursive(Clock currentClock, DependencyObject containingObject, INameScope nameScope, DependencyObject parentObject, String parentObjectName, PropertyPath parentPropertyPath, HandoffBehavior handoffBehavior, HybridDictionary clockMappings, Int64 layer)
   at System.Windows.Media.Animation.Storyboard.ClockTreeWalkRecursive(Clock currentClock, DependencyObject containingObject, INameScope nameScope, DependencyObject parentObject, String parentObjectName, PropertyPath parentPropertyPath, HandoffBehavior handoffBehavior, HybridDictionary clockMappings, Int64 layer)
   at System.Windows.Media.Animation.Storyboard.BeginCommon(DependencyObject containingObject, INameScope nameScope, HandoffBehavior handoffBehavior, Boolean isControllable, Int64 layer)
   at System.Windows.VisualStateGroup.StartNewThenStopOld(FrameworkElement element, Storyboard[] newStoryboards)
   at System.Windows.VisualStateManager.GoToStateInternal(FrameworkElement control, FrameworkElement stateGroupsRoot, VisualStateGroup group, VisualState state, Boolean useTransitions)
   at Microsoft.Expression.Interactivity.Core.ExtendedVisualStateManager.TransitionEffectAwareGoToStateCore(FrameworkElement control, FrameworkElement stateGroupsRoot, String stateName, VisualStateGroup group, VisualState state, Boolean useTransitions, VisualTransition transition, Boolean animateWithTransitionEffect, VisualState previousState)
   at Microsoft.Expression.Interactivity.Core.ExtendedVisualStateManager.GoToStateCore(FrameworkElement control, FrameworkElement stateGroupsRoot, String stateName, VisualStateGroup group, VisualState state, Boolean useTransitions)
   at System.Windows.VisualStateManager.GoToStateCommon(FrameworkElement control, FrameworkElement stateGroupsRoot, String stateName, Boolean useTransitions)
   at Microsoft.Expression.Interactivity.VisualStateUtilities.GoToState(FrameworkElement element, String stateName, Boolean useTransitions)
   at System.Windows.Interactivity.TriggerBase.InvokeActions(Object parameter)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run()
   at TrailerUnitNewTutor_1.App.Main() in c:\Users\Domnick\Documents\Expression\Blend 4\Projects\TrailerUnitNewTutor_1\TrailerUnitNewTutor_1\obj\Debug\App.g.cs:line 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:28:53.763

您的 XAML 和代码隐藏正在构建两个不同的 RenderTransforms。我从您的 XAML 故事板中假设 WrapPanel.RenderTransform 看起来像这样：

```
<WrapPanel.RenderTransform>
    <TransformGroup>
        <ScaleTransform/>
        <SkewTransform/>
        <RotateTransform/>
        <TranslateTransform/>
    </TransformGroup>
</WrapPanel.RenderTransform> 
```

您在代码中创建的 RenderTransform 在 XAML 中将如下所示：

```
<WrapPanel.RenderTransform>
    <TranslateTransform/>
</WrapPanel.RenderTransform> 
```

解决此问题的最简单方法是将 XAML 中的 RenderTransform 设置为在代码中设置的方式，即假设您不使用其他转换。如果这不起作用，则在代码中创建一个故事板，将 TranslateTransform 设置为零时间。

# c++ - 当我不知道键是否存在于映射中时，如何从映射中修改键值对的值？

> ID：11192728
> 
> 赞同：-1
> 
> 时间：2012-06-25T15:50:39.260
> 
> 标签：c++, map, stl, iterator

当我不知道键是否存在于映射中时，如何从映射中修改键值对的值？

例如，地图中有一个键值对：

```
a[5]   =    " H "; 
```

// 但经过一些操作，如插入、擦除等；我不知道地图中是否还存在5，我可以这样修改它吗？：

```
a[5]   =   " G "; 
```

// 或者我必须定义一个 iteraotr pos

```
pos = my_map.find(5);
if( pos !=  my_map.end())
{
 pos->second   =   " G ";
} 
```

有没有其他方法可以从地图中修改键值对的值？？？谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:52:34.330

如果要设置该值是否存在，请继续使用下标运算符：

```
a[5] = " G "; 
```

如果不存在，它将创建一个新映射。这是由 C++ 标准保证的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:52:58.327

标准映射具有奇怪的属性，即索引到映射中不存在的元素会导致在该键和默认构造值之间创建关联。因此，如果该元素`5`不作为键出现在地图中，那么在您这样做之后`a[5]`，它将存在并关联到一个空字符串。

**C++11**添加了一个新`at`方法，如果映射中不存在键，则抛出该方法，这使得可以索引到`const map`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:53:35.963

在示例中，`find()`您可以通过返回的迭代器修改值：

```
pos->second = " G "; 
```

如果您只想修改它是否已存在，则应该使用此方法，因为`operator[]`如果当前不存在，则会创建一个新条目。如果要添加或修改它，请使用`operator[]`.

# objective-c - 以编程方式在 uitableview 中设置静态单元格

> ID：11192736
> 
> 赞同：7
> 
> 时间：2012-06-25T15:51:16.630
> 
> 标签：objective-c, uitableview, static, cells

我正在以编程方式在目标 c 中创建一个表格视图。如何以编程方式使单元格静态？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T16:02:42.927

以编程方式使单元格静态并没有真正的意义。静态单元格基本上只适用于 Interface Builder，并且要求整个 TableView 是静态的。它们允许您将 UILables、UITextFields、UIImageViews 等直接拖到单元格中，并让它在应用程序运行时显示它在 Xcode 中的外观。

但是，通过不使用外部数据源并对所有内容进行硬编码，您的单元格可以通过编程方式“静态”，这通常会有点混乱，而且通常是一个糟糕的主意。

我建议使用 .xib 制作一个新的 UITableViewController 并从那里自定义它，如果你想要“静态”单元格。否则，只需对所有值进行硬编码，它基本上是一样的，但如果可以避免的话，可能是糟糕的设计。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T16:01:10.353

通过为每个单元格使用不同的单元格标识符，您将获得它。你可以使用这样的东西：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = [NSString stringWithFormat:@"s%i-r%i", indexPath.section, indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
        //you can customize your cell here because it will be used just for one row.
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T16:10:25.497

你也可以用老式的方法来创建你想要的单元格`NSIndexPath`，这取决于静态单元格 TVC 和常规表格视图（不要忘记在其数据源方法中返回正确数量的部分和行） ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch indexPath.row {
        case 0:
            // First cell, setup the way you want

        case 1:
            // Second cell, setup the way you want
    }

    // return the customized cell
    return cell;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-08T15:09:23.050

我想为设置屏幕或类似的东西创建单元格结构，您可能只需要修改一些单元格内容而不是它们的数量或部分结构，您可以重载 UITableViewController 子类的方法，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *aCell = [super tableView:tableView cellForRowAtIndexPath:indexPath];

    // Configure the cell...
    if ([aCell.reuseIdentifier isEqualToString:@"someIdentifier"]){
        //some configuration block
    }

    else if ([aCell.reuseIdentifier isEqualToString:@"someOtherIdentifier"]) {
        //other configuration block
    }
    return aCell;
} 
```

但是您可以使用更多代码以更好的方式实现它；

1) 在 .m 文件的开头添加 typedef：

```
typedef void(^IDPCellConfigurationBlock)(UITableViewCell *aCell); 
```

2）将 cellConfigurations 属性添加到您的 TablviewControllerSubclass 扩展：

```
@interface IPDSettingsTableViewController ()

@property (nonatomic, strong) NSDictionary *cellConfigurations;
@property (nonatomic) id dataModel;

@end 
```

3）在情节提要或 xib 中修改 TableviewController 子类的静态单元格，并为要以编程方式修改的每个单元格添加唯一的 cellReuseIdentifier

4) 在您的 viewDidLoad 方法中设置 cellsConfiguration 块：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self SetupCellsConfigurationBlocks];
}

- (void)SetupCellsConfigurationBlocks
{
    //Store configurations code for each cell reuse identifier
    NSMutableDictionary *cellsConfigurationBlocks = [NSMutableDictionary new];        

    //store cells configurations for a different cells identifiers
    cellsConfigurationBlocks[@"someCellIdentifier"] = ^(UITableViewCell *aCell){
        aCell.backgroundColor = [UIColor orangeColor];
    };

    cellsConfigurationBlocks[@"otherCellIdentifier"] = ^(UITableViewCell *aCell){
        aCell.imageView.image = [UIImage imageNamed:@"some image name"];
    };

    //use waek reference to self to avoid memory leaks
    __weak typeof (self) weakSelf = self;
    cellsConfigurationBlocks[@"nextCellIdentifier"] = ^(UITableViewCell *aCell){
        //You can even use your data model to configure cell
        aCell.textLabel.textColor = [[weakSelf.dataModel someProperty] isEqual:@YES] ? [UIColor purpleColor] : [UIColor yellowColor];
        aCell.textLabel.text      = [weakSelf.dataModel someOtherProperty];
    };
    weakSelf.cellConfigurations = [cellsConfigurationBlocks copy];
} 
```

5) 像这样重载 tableView:cellForRowAtIndexPath 方法：

```
#pragma mark - Table view data source

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *aCell = [super tableView:tableView cellForRowAtIndexPath:indexPath];

    // configure cell
    [self configureCell:aCell withConfigurationBlock:self.cellConfigurations[aCell.reuseIdentifier]];
    return aCell;
}

- (void)configureCell:(UITableViewCell *)aCell withConfigurationBlock:(IDPCellConfigurationBlock)configureCellBlock
{
    if (configureCellBlock){
        configureCellBlock(aCell);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-12T23:04:25.920

想要构建一个简单的表来用作菜单或表单是很常见的，但是使用带有数据源和委托回调的内置 API 并不容易编写或维护。您可能需要动态添加/删除/更新某些单元格，因此单独使用 Storyboards 是行不通的。

我将[MEDeclarativeTable](https://github.com/enriquez/MEDeclarativeTable)放在一起以编程方式构建小表。它为`UITableView`. 我们最终得到一个 API，我们提供部分和行的实例，而不是实现数据源和委托方法。

# sql-server - SSIS 包在 BIDS 中运行，但由于 SQL 代理中的体系结构不匹配而失败

> ID：11192737
> 
> 赞同：3
> 
> 时间：2012-06-25T15:51:18.190
> 
> 标签：sql-server, ssis, odbc, openedge, progress-db

我有一个 SSIS 包，它使用 ODBC 连接到 Progress 数据库作为源，使用 32 位 ODBC 驱动程序。该软件包在 BIDS 范围内完美运行。但是，当我使用 SQL 代理运行它时，它会失败并出现以下错误：

> 指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配。

我知道这可能是因为它需要一个用于该连接的 64 位 ODBC 驱动程序，但我似乎无法让 64 位驱动程序在 BIDS 中正常工作。有没有什么技巧可以让我在 SQL 代理中使用 32 位驱动程序并继续我的生活？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:30:49.350

我找到了我的答案。在 Job Step Properties 的 Execution Options 下，最底部有一个复选框 --- “Use 32-bit Runtime”。够简单！

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:58:51.290

BIDS = 您的本地机器，32 位 SQL 代理 = 您的服务器，64 位

那正确吗？

如果是，您将真的需要正确的驱动程序。这是来自 BOL：

> 请务必注意，如果您在 32 位环境中开发包并希望在 64 位环境中运行该包，则连接管理器需要兼容 64 位。某些连接管理器（例如 Excel）只能在 32 位环境中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:36:36.650

Yuo 可以直接用 CmdExec 调用 32bit DTEXEC。指向 32 位 DTEXEC。

> C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\dtexec.exe

# spring - 多条骆驼路线处理同一个文件

> ID：11192743
> 
> 赞同：4
> 
> 时间：2012-06-25T15:51:35.460
> 
> 标签：spring, groovy, apache-camel

我定义了 10 条路线，其中列出了 2 条。其他 8 个相同，但 from 端点是不同的目录。每条路由都会选择一个位于目录中的文件，并由一个 groovy 类处理。当一个文件被放入其中一个目录时，它工作正常，但是当一个文件同时被放入每个目录时，每个线程似乎都陷入了混乱。我确实收到了我已经拾取每个文件的日志消息，但是似乎每个线程都使用一个进程“beginProcess”，因为它就像我在 groovy 中定义的所有变量一样，随着每个文件被拾取而被更改。我不确定这是否有意义，但是有人可以告诉我我在下面做的事情是合法的吗？基本上可以多条路线调用一个类，如果是这样，我这样做是否正确？如果是，那么至少我会知道它必须在我的 groovy 类中（但看到它与一个文件一起工作表明它不在这里，但此时不假设它）。非常感谢！

```
<camel:camelContext id="myId"
    xmlns="http://camel.apache.org/schema/spring">

    <route>
        <from
            uri="file://directoryStructure1/?move=archive&amp;sortBy=ignoreCase:file:name&amp;readLock=markerFile&amp;readLockCheckInterval=5000&amp;readLockTimeout=10m&amp;maxMessagesPerPoll=1" />
        <process ref="beginProcess"></process>
    </route>

    <route>
        <from
            uri="file://directoryStructure2/?move=archive&amp;sortBy=ignoreCase:file:name&amp;readLock=markerFile&amp;readLockCheckInterval=5000&amp;readLockTimeout=10m&amp;maxMessagesPerPoll=1" />
        <process ref="beginProcess"></process>
    </route>
</camel:camelContext>

    <bean id="beginProcess" class="package.groovy.class">   </bean> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T20:47:19.760

似乎您正在使用类的单例（单实例）对象，因为当您定义“beginProcess”时，这将是春季的默认设置。

没关系，如果“package.groovy.class”的实现是线程安全的，似乎是这样，但事实并非如此。

基本上，有几种方法可以解决这个问题。

**1)**从不并发处理。使用 SEDA 传输很容易实现，它可以在处理另一个文件的同时将文件堆叠在队列中。

```
<route>
    <from
        uri="file://directoryStructure1/?move=archive&amp;sortBy=ignoreCase:file:name&amp;readLock=markerFile&amp;readLockCheckInterval=5000&amp;readLockTimeout=10m&amp;maxMessagesPerPoll=1" />
    <to uri="seda:process"/>
</route>
<route>
    <from
        uri="file://directoryStructure2/?move=archive&amp;sortBy=ignoreCase:file:name&amp;readLock=markerFile&amp;readLockCheckInterval=5000&amp;readLockTimeout=10m&amp;maxMessagesPerPoll=1" />
    <to uri="seda:process"/>
</route>

<route>
  <from uri="seda:process"/>
  <process ref="beginProcess"/>
</route> 
```

**2）**每次调用beginProcess时创建一个新bean：

```
 <bean id="beginProcess" class="package.groovy.class" scope="prototype"/> 
```

关于 spring bean 作用域的一个很好的页面可以在[这里](http://www.mkyong.com/spring/spring-bean-scopes-examples/)找到。

**3)**使您的 package.groovy.class 线程安全。也就是说，不应将任何字段和变量保留为状态，或者状态应该可以在并发请求之间共享并同步。

# c# - 使用 Visual Studio 2010 - C# 将数据从 Excel 传输到 Word

> ID：11192744
> 
> 赞同：2
> 
> 时间：2012-06-25T15:51:35.773
> 
> 标签：c#, asp.net, excel-2007, word-2007

这是我在这里的第一个问题。我正在使用 Visual Studio 2010，我想为销售目录设计一个 Excel 插件。它有两种形式，我让其中一种工作，但另一种没有。我想要实现的是我通过插件打开一个 Windows 表单，并通过表单从我的 Access 数据库中获取数据。我将数据导入数据网格，然后将数据导出到 Excel。

我让这部分工作，但我的下一个表格有问题。在该表单中，我想打开一个 Word 模板（当我按下按钮时），然后将打开的 Excel 文件中的数据传输到我的 Word 文档中。有谁知道这样做的最佳方法是什么？我使用 OleDBConnection 将数据从数据库获取到数据网格。我正在为 Office 2007 设计这个，我正在用 C# 编程。

这是我的代码的一部分。我使用这部分将 Excel 文件中的数据导入 DataGrid，但我希望能够将这些数据导入 WordDocument。有谁知道这样做的最佳方法是什么。

```
DataSet da = new DataSet();
OleDbDataAdapter adapter = new OleDbDataAdapter();
string workbookPath = "C:myfile.xlsx";

Excel.Workbook wb = Globals.ThisAddIn.Application.Workbooks.Add(workbookPath);
string ConnectionString =
    @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + workbookPath
    + @";Extended Properties=""Excel 12.0 Macro;HDR=Yes;ImpoertMixedTypes=Text;TypeGuessRows=0""";

OleDbConnection conn = new OleDbConnection(ConnectionString);
string strCmd = " select * from [Sheet1$A1:D4]"; //Or some other range
OleDbCommand cmd = new OleDbCommand(strCmd, conn);

conn.Open();
da.Clear();
adapter.SelectCommand = cmd;
adapter.Fill(da);
dataGridView1.DataSource = da.Tables[0]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:22:52.167

好的，所以在 jmh_gr 的帮助下，我成功地完成了这项工作。这就是它的外观。它基本上完成了它应该做的事情，从 Excel 复制数据并将其粘贴到 Word。

```
object fileName = "C:\\Template_1.docx";
string workbookPath = "C:\\Book1.xlsx";
Excel.Workbook wb = Globals.ThisAddIn.Application.Workbooks.Add(workbookPath);
Excel.Worksheet ws = wb.Worksheets[1];
ws.Range["A1:D4"].Copy();

object missing = System.Reflection.Missing.Value;
Word.Application wordApp = Marshal.GetActiveObject("Word.Application") as Word.Application;
Word.Document doc;
Word.Range rng;
doc = wordApp.ActiveDocument;
rng = wordApp.Selection.Range;

object objDataTypeMetafile = Word.WdPasteDataType.wdPasteRTF;
rng.PasteSpecial(ref missing, ref missing,
ref missing, ref missing, ref objDataTypeMetafile,
ref missing, ref missing); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:39:04.397

由于您在两个 Office 应用程序之间进行复制，我建议您使用内置的[PasteExcelTable Method](http://msdn.microsoft.com/en-us/library/bb241755%28v=office.12%29.aspx)。只需添加对 Microsoft Word 1x.0 对象库的引用：

```
using Word = Microsoft.Office.Interop.Word;
...

string workbookPath = @"C:\temp\example.xlsx";
Excel.Workbook wb = Globals.ThisAddIn.Application.Workbooks.Add(workbookPath);
Excel.Worksheet ws = wb.Worksheets[1];
Word.Application wdApp = new Word.Application();
Word.Document wdDoc = wdApp.Documents.Add();
ws.Range["A1:D4"].Copy();
wdDoc.ActiveWindow.Selection.PasteExcelTable(false, false, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T15:48:58.643

按照下面的代码将活动单元格从 Excel 复制到 Word（源格式将保持不变）

```
var applicationWord = new Microsoft.Office.Interop.Word.Application();
            applicationWord.Visible = true;
            Word.Document wordDoc = applicationWord.Documents.Add();
            var cells = getCells();
            var last_row = cells.Row;
            var last_col = cells.Column;
            var firstcell = activeWorksheet1.get_Range("A1", Type.Missing);
            var lastcell = (Excel.Range)activeWorksheet1.Cells[last_row, last_col];

            activeWorksheet.Range[firstcell, lastcell].Copy(); // All Active cell will get copied
            wordDoc.ActiveWindow.Selection.PasteExcelTable(false, false, false); 
```

下面的代码来获取工作表中的活动单元格：

```
dynamic getCells()
        {
        activeWorksheet1 = ((Excel.Worksheet)Application.ActiveSheet);
        var CellZ = activeWorksheet1.Cells.Find(
                "*",
                System.Reflection.Missing.Value, Excel.XlFindLookIn.xlValues,
                Excel.XlLookAt.xlWhole,
                Excel.XlSearchOrder.xlByRows,
                Excel.XlSearchDirection.xlPrevious,
                false,
                System.Reflection.Missing.Value,
                System.Reflection.Missing.Value);
            return CellZ;
        } 
```

# apache - Solr 报告“从属设备与主设备同步”。复制时，但索引版本与主索引版本不同

> ID：11192745
> 
> 赞同：1
> 
> 时间：2012-06-25T15:51:38.563
> 
> 标签：apache, solr, lucene, replication, master-slave

每当我尝试复制时，solr slave（版本 3.5.0）都会在日志中报告“Slave in sync with master.”。但是对于其中一个核心，slave有版本1329924432722，第9244代，也就是7.7GB，master有1329924433193，第9266代，也就是8.5GB左右。

什么可能导致这种情况发生？

**编辑：**似乎我发现了问题——一旦我向 Solr 主实例发出“优化”命令，就会发生复制。是否有一个 solrconfig 变量来控制复制是否只能在索引优化后发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:51:06.130

报告“与主同步治疗”的核心是否可能与有问题的核心不同？

我会在 solr.xml 中评论所有其他核心（如果可能的话），并且只运行有问题的核心开始。

在从站下载新的索引段后，它发出一个提交。提交可能会导致运行搜索预热查询。您是否有大型搜索预热查询？

# apache - 使用 .htaccess 重定向到特定的异地页面

> ID：11192747
> 
> 赞同：0
> 
> 时间：2012-06-25T15:51:42.790
> 
> 标签：apache, .htaccess

当服务器关闭时，可以在此处访问该站点的 Coral Cache：

```
http://someDomain.com.nyud.net/ 
```

目前，我将每个页面的 500 个错误发送到主页的珊瑚缓存，如下所示：

```
ErrorDocument 503 http://someDomain.com.nyud.net/ 
```

但是，我想使用重写将用户发送到正确的页面：

```
http://someDomain.com/some/page.html <- Broken! Send user to:
http://someDomain.com.nyud.net/some/page.html 
```

如何在 .htaccess 中实现这一点？我找到了许多重定向到同一服务器上不同页面的重写示例，但我没有发现任何东西只会在 500 错误时重定向主机。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:33:48.803

看起来 ErrorDocument 指令不支持这一点。

除非 Coral Cache 可以在处理之前获取 HTTP 引用（您应该从中获取原始路径），否则您可能必须强制外部重定向到服务器上的资源，然后可以重定向到 Coral Cache 上的资源，使用推荐人，例如：

```
ErrorDocument 503 http://someDomain.com/some/errorhandler

RewriteCond %{HTTP_REFERER} ^http://someDomain.com/(.*)$
RewriteRule ^some/errorhandler$ http://someDomain.com.nyud.net/%1 [L,NC] 
```

显然这不是很好，您可能需要考虑不同的方法，例如创建一个处理错误的自定义脚本（请参阅下面的指南）。

[http://httpd.apache.org/docs/2.0/custom-error.html](http://httpd.apache.org/docs/2.0/custom-error.html)

# php - PHP ORMs 如何将结果映射到对象（水合）

> ID：11192748
> 
> 赞同：3
> 
> 时间：2012-06-25T15:51:45.363
> 
> 标签：php, orm

如果我运行一个类似的查询：

```
SELECT * FROM user u
LEFT JOIN orders o ON o.user_id=u.id
LEFT JOIN payments p ON p.order_id=o.id 
```

产生如下数据：

```
u.id, u.name, o.id, o.item, o.date_time, p.id, p.amount, p.date_time
  99    jeff    17  spring   12-12-2012    12     10.99   13-12-2012
  99    jeff    18     jam   12-12-2012    13       .99   16-12-2012
  99    jeff    19     car   22-12-2012    14      1000   17-12-2012
  99    jeff    19     car   22-12-2012    15      1000   18-12-2012
  99    jeff    19     car   22-12-2012    16      1000   19-12-2012 
```

所以用户 Jeff 有 3 个订单，他已经为他的汽车支付了 3 笔款项。

给 PHP 对象 User、Order 和 Payment 以及一个单一的 DB 查询——它们是如何获得水分的？我想查看伪代码、实际 php 代码或我应该阅读的模式名称 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:21:12.007

因为没有答案，我将尝试描述我是如何解决这个问题的。这是一个玩具解决方案。

对数据库的查询是用一种我称为 QQL 的小语言完成的，这是受到 Doctrine 2 [DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/dql-doctrine-query-language.html)的启发。

```
SELECT *
FROM user
JOIN user order
JOIN order payment
WHERE user.name=? 
```

这被解析并且可以构建 SQL 语句。解析树还用于将结果集映射回对象图。

每个模型都有与其他模型的“关系”描述。所以用户有一个一对多的订单，订单有一个一对多的付款。描述在一个包含模型名称、主键和外键名称的数组中。

要构建 JOIN：

```
JOIN user order 
```

检查 User 模型，获取表名“users”，然后找到关系“order”，获取 Order 表名“orders”和连接键。使用它来构建：

```
JOIN orders o ON o.user_id=users.id 
```

一旦查询运行并返回结果以构建对象图。我所做的是获取查询中使用的所有不同模型（在本例中为 User、Order 和 Payment），然后为每一行 Hydrate 每一个：

```
// query DB and get results into an array called $rows
foreach ($rows as $row) {
    foreach (array('User', 'Order', 'Payment') as $model) {
        $o = new $model;
        $o->hydrate($row);
        // inspect primary key - have we got this object already? store or throw away
    }
 } 
```

我的水合物方法非常薄（快速），因为许多构建的对象将被复制并被删除。从我的问题中的结果集中，您可以看到 User('Jeff') 将被构建 5 次，其中 4 次是重复的，将被丢弃。

读取结果后，有 3 个对象列表。用户、订单和付款。这些与解析树一起传递给 Graph Builder。

Graph Builder 使用解析树来查看关系。从“根”模型（由“FROM 用户”确定）开始，检查已解析的 QQL 以找到请求的 JOIN（User->id TO Order->user_id）将 Orders 添加到 User->orders 数组中。然后它对 (Order->id TO Payment->order_id) 执行相同的操作。

结果是：

```
$user->name == 'jeff'
$user->orders[0]->item == 'spring'
$user->orders[1]->item == 'jam'
$user->orders[2]->item == 'car'
$user->orders[2]->payments[2]->date_time == '19-12-2012' 
```

我最终得到了四个主要类，ORM、一个所有模型都扩展的 Model_Base（这确保每个模型都有一个“表名”、“列”和“关系”）、一个 QQLParser 和一个 Graph Builder。ORM 类是迄今为止最大的类，有近 200 行。

**结论。**有用。感觉类似于 Doctrine 2，（所以我最终过渡到使用 Doctrine 2 的痛苦会少一些）。它可能更有效。分析读取几千个对象的测试页面的结果，到目前为止，最慢的部分是 SQL 查询（3ms）和释放 mysqli 结果（1ms），包括模型类（0.7ms）。写它很有趣，只花了一天时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:53:42.757

PDO 允许自动水合对象，例如。`PDOStatement::fetchObject`

# java - Android围绕中心旋转位图而不调整大小

> ID：11192757
> 
> 赞同：6
> 
> 时间：2012-06-25T15:52:26.767
> 
> 标签：java, android, drawing, rotation

我正在努力围绕其中心绘制旋转位图并在不调整位图大小的情况下进行旋转。我正在通过游戏线程将所有精灵绘制到屏幕上，因此我正在寻找一种包含原始位图而不是画布的解决方案。

提前致谢。

到目前为止，这是我的代码，它围绕它的中心旋转一个位图，但调整它的大小。

```
i = i + 2;
            transform.postRotate(i, Assets.scoresScreen_LevelStar.getWidth()/2, Assets.scoresScreen_LevelStar.getHeight()/2);
            Bitmap resizedBitmap = Bitmap.createBitmap(Assets.scoresScreen_LevelStar, 0, 0, Assets.scoresScreen_LevelStar.getWidth(), Assets.scoresScreen_LevelStar.getHeight(), transform, true);

            game.getGraphics().getCanvasGameScreen().drawBitmap(resizedBitmap, null, this.levelStar.getHolderPolygons().get(0), null); 
```

**更新：**

我注意到这并不像听起来那么容易。我的旋转代码不是问题。位图旋转，但 dst rect 也必须根据旋转角度增加/减少，否则 bimap 会显得更小，因为它被绘制到固定的 dst rect 中。所以我猜我必须开发一些方法来返回一个 dst rect。 *所以旋转位图而不出现调整大小所需的方法：*

```
public static Bitmap rotateBitmap(Bitmap bitmap, int rotation) // I've got this method working 
```

和

```
public static Rect rotateRect(Rect currentDst, int rotation) // Don't got this 
```

我知道这需要一些数学（三角），有人愿意挑战吗？:P

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T17:14:31.063

`Matrix`您应该使用该类绘制位图。下面是一个非常基本的想法，假设您要在“Ship”类中旋转图像。您在更新方法中更新当前位置矩阵。在 onDraw() 中，您使用新更新的位置矩阵绘制位图。这将绘制旋转的位图而不调整它的大小。

```
public class Ship extends View {

    private float x, y;
    private int rotation;
    private Matrix position;    
    private Bitmap bitmap;

    ...

    @Override
    public void onDraw(Canvas canvas) {
        // Draw the Bitmap using the current position
        canvas.drawBitmap(bitmap, position, null);
    }

    public void update() {
        // Generate a new matrix based off of the current rotation and x and y coordinates.
        Matrix m = new Matrix();
        m.postRotate(rotation, bitmap.getWidth()/2, bitmap.getHeight()/2);
        m.postTranslate(x, y);

        // Set the current position to the updated rotation
        position.set(m);

        rotation += 2;
    }

    ....

} 
```

希望有帮助！

还要记住，`Bitmap`在你的游戏循环中生成一个新对象将是资源密集型的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:38:19.403

这对我有用！

我创建了一个返回矩阵的方法。该矩阵可用于以下绘制方法：

```
public void drawBitmap (Bitmap bitmap, Matrix matrix, Paint paint) 
```

干得好！（参数形状可以轻松替换，如果您愿意，请发表评论）：

```
public static Matrix rotateMatrix(Bitmap bitmap, Shape shape, int rotation) {

        float scaleWidth = ((float) shape.getWidth()) / bitmap.getWidth();
        float scaleHeight = ((float) shape.getHeight()) / bitmap.getHeight();

        Matrix rotateMatrix = new Matrix();
        rotateMatrix.postScale(scaleWidth, scaleHeight);
        rotateMatrix.postRotate(rotation, shape.getWidth()/2, shape.getHeight()/2);
        rotateMatrix.postTranslate(shape.getX(), shape.getY());

        return rotateMatrix;

    } 
```

注意：如果您想要动画旋转，则必须每帧使用新值更新旋转参数，例如。1 然后 2 然后 3 ...

# android - Visual Studio 无法识别颜色资源

> ID：11192763
> 
> 赞同：0
> 
> 时间：2012-06-25T15:52:43.150
> 
> 标签：android, xamarin.android

我在 Visual Studio 2010 中使用 Mono for Android。

资源/值/Colors.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <color name="Red">#FF0000</color>
</resources> 
```

主要.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_margin="10dp">
 <TextView
    android:text="High Priority Calls"
    android:textColor="@color/red"
    android:textSize="18sp"
    android:padding="10dp"
    android:layout_margin="10dp" />
 <ListView
    android:id="@+id/urgentCalls"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="8dp"
    android:layout_margin="8dp" />
</LinearLayout> 
```

构建错误：未找到与给定名称匹配的资源（在“textColor”处，值为“@color/red”）。

我已经盯着这个看了一段时间，我只是没有看到我的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:18:08.460

更新您的 Colors.xml 文件以使用小写：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <color name="red">#FF0000</color>
</resources> 
```

# wordpress - 按 Wordpress 类别 ID 过滤不起作用

> ID：11192767
> 
> 赞同：0
> 
> 时间：2012-06-25T15:52:47.013
> 
> 标签：wordpress, loops, taxonomy

我正在尝试将我的主页循环过滤为类别 ID 为 34 的 1 个帖子。我有多个自定义帖子类型，并分配了自定义分类 ID 34。我不知道为什么这不起作用：

```
 <?php query_posts('showposts=1&cat=34'); ?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:12:08.850

```
<?php query_posts(array('post_type' => 'customposttypename','category' => 'catslugname', 'posts_per_page' => 1 )); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:54:07.853

它不是`tag`

```
<?php query_posts('showposts=1&cat=34'); ?> 
```

# facebook - 检查错误代码 200 以检测授权错误有多可靠？

> ID：11192786
> 
> 赞同：0
> 
> 时间：2012-06-25T15:53:48.070
> 
> 标签：facebook, authorization, facebook-fql

我正在尝试确定何时进行了未经授权的操作。在这些情况下是否 100% 返回错误代码 200？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:34:49.563

当您尝试在没有足够权限的情况下发布操作时，您将收到 HTTP 状态代码 403 和类似 "'{"error":{"message":"(#200) 需要扩展权限：publish_actions","type" 的内容： "OAuthException","code":200}}'"

# android - 其他 Parcelable 包含的 Parcelable 不会写入/读取正确的值

> ID：11192787
> 
> 赞同：2
> 
> 时间：2012-06-25T15:53:51.090
> 
> 标签：android, parcelable

我有一个 Parcelable，其中包含另一个 Parcelable，两者都有一个 id。对于包含的 Parcelable，我写了 id 22，但它显示为 20。为什么？

我构建了一个完整的例子

Parcelable1

```
public class Parcelable1 implements Parcelable {
public int id = 11;
public Parcelable2 parcelable2;

public Parcelable1() {
    parcelable2 = new Parcelable2(22);
}

@Override
public int describeContents() {
    return hashCode();
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeInt(id);
    dest.writeParcelable(parcelable2, flags);
}

public static final Creator<Parcelable1> CREATOR = new Parcelable.Creator<Parcelable1>() {
    public Parcelable1 createFromParcel(Parcel source) {
        return new Parcelable1(source);
    }
    public Parcelable1[] newArray(int size) {
        return new Parcelable1[size];
    }
};

public Parcelable1(Parcel source) {
    id = source.readInt();

    parcelable2 = Parcelable2.CREATOR.createFromParcel(source);
}
} 
```

Parcelable2

```
public class Parcelable2 implements Parcelable {
public int id = 22;

public Parcelable2(int id) {
    this.id = id;
}

@Override
public int describeContents() {
    return hashCode();
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    Log.d("test", "WRITE Parcelable2 id:" + id);

    dest.writeInt(id);
}

public static final Creator<Parcelable2> CREATOR = new Parcelable.Creator<Parcelable2>() {
    public Parcelable2 createFromParcel(Parcel source) {
        return new Parcelable2(source);
    }
    public Parcelable2[] newArray(int size) {
        return new Parcelable2[size];
    }
};

public Parcelable2(Parcel source) {
    id = source.readInt();

    Log.d("test", "READ Parcelable2 id:" + id);
}
} 
```

通过 Parselable 的活动：

```
public class ParcelableTestActivity1 extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    findViewById(R.id.btn).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(ParcelableTestActivity1.this, ParcelableTestActivity2.class);
            i.putExtra("par", new Parcelable1());
            startActivity(i);
        }
    });
}
} 
```

接收活动：

```
public class ParcelableTestActivity2 extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);

    Parcelable1 p = (Parcelable1)getIntent().getParcelableExtra("par");

    Log.d("test", "parcelable 1 is: " + p + "id: " + p.id + " p2: " + p.parcelable2 + " p2.id: "  + p.parcelable2.id);

    Toast.makeText(this, "parc1 id: " + p.id + " parc2 id: " + p.parcelable2.id, Toast.LENGTH_LONG).show();
}
} 
```

输出：

> 06-25 17:45:29.440: D/test(4107): 读取 Parcelable2 id:0
> 
> 06-25 17:45:29.440: D/test(4107): parcelable 1 是: com.test.Parcelable1@4052e430id: 11 p2: com.test.Parcelable2@4052e6e0 p2.id: 0
> 
> 06-25 17:47:19.968: D/test(4247): WRITE Parcelable2 id:22
> 
> 06-25 17:47:19.988: D/test(4247): 读取 Parcelable2 id:20
> 
> 06-25 17:47:19.988: D/test(4247): parcelable 1 是: com.test.Parcelable1@4052e238id: 11 p2: com.test.Parcelable2@4052e250 p2.id: 20

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:14:47.390

```
parcelable2 = Parcelable2.CREATOR.createFromParcel(source); 
```

那是你的问题。

来源：

*   22
*   Parcelable2

当您将 source 传递给 Parcelable 2 的构造函数时，22 被设置为 parcelable2 的 id。

你需要这样做：

```
id = source.readInt();
parcelable2 = source.readParcelable(Parcelable2.class.getClassLoader()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:23:35.447

你唯一出错的地方是：

```
parcelable2 = Parcelable2.CREATOR.createFromParcel(source); 
```

应该改成这样：

```
parcelable2 = source.readParcelable(Parcelable2.class.getClassLoader()); 
```

我已经测试了您的代码，并且对这一行的修改读取了正确的值。

# erlang - erlang 类型检查

> ID：11192788
> 
> 赞同：1
> 
> 时间：2012-06-25T15:53:54.697
> 
> 标签：erlang, static-analysis

据我了解，无法对以 erlang 发送的消息进行类型检查。

假设我使用以下接收循环启动一个模块：

```
loop(State) ->
    receive 
    {insert, _} ->
        io:fwrite("insert\n",[]),
        loop(State);
    {view, _} ->
        io:fwrite("view\n", []),
        loop(State)
    after 10000 ->
        ok
    end. 
```

我无法检查人们向流程发送的内容，也无法检查其类型是否安全？

有没有轻松的工作环境？

我想出的是在被调用的模块中使用函数，例如：

```
send_insert(Message) ->
    whereis(my_event_handler) !  {insert, Message},
    ok. 
```

这样至少我可以将`-spec send_insert(string()) -> ok.`规范添加到模块中。现在至少我已将错误限制在我的模块中。

是否有更标准的方式对消息进行类型检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:17:33.567

有[治安官项目](https://github.com/extend/sheriff)可以解决您的问题。您可以使用它来检查值是否符合通过 typespecs 定义的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:17:34.887

我想说的是，`send_insert`在你的模块中有一个函数，它只是向进程发送一条消息，不仅仅是类型检查的好习惯。如果您将来需要更改消息格式，您将*知道*您只需要更改该函数以及可能的调用者，这比查找所有发送特定格式消息的位置更容易追踪某个进程（可能是也可能不是您正在重构其代码的进程）。此外，由于任何调用者都需要指定模块名称，因此代码变得更加自文档化；您将知道该消息应该进入哪个进程。

（顺便说一句，`whereis(my_event_handler) ! {insert, Message}`可以写成`my_event_handler ! {insert, Message}`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:04:08.533

AFAIK，“ **-spec** ”仅用于文档目的，不会在运行时检查您的类型。

正如您正确地说的那样，本身没有类型检查，但是您可以混合使用模式匹配和[守卫](http://www.erlang.org/doc/reference_manual/expressions.html#id79432)来使事情失败。尽管如此，这都是[防御性编程](http://en.wikipedia.org/wiki/Defensive_programming)，你应该让它崩溃，并让主管树重启任何需要重启的东西。日志和崩溃报告应该为您提供足够的信息以了解问题所在并采取相应措施。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T16:02:10.130

好吧，如果您需要的只是一些基本类型（可能还有范围）检查，您可以使用[警卫](http://en.wikibooks.org/wiki/Erlang_Programming/guards)：

```
receive 
    {insert, Message} when is_list(Message) ->
        io:fwrite("insert\n",[]),
        loop(State); 
```

不幸的是，由于一些限制（例如，守卫必须没有任何副作用），没有办法编写自己的守卫函数。

# windows-phone-7 - 将 Netflix Odata 服务与 WP71 一起使用

> ID：11192795
> 
> 赞同：0
> 
> 时间：2012-06-25T15:54:19.823
> 
> 标签：windows-phone-7, mvvm, odata

我正在尝试将 Netflix Odata 服务与 WP71 一起使用，但它无法正常工作。这段代码有什么问题？

私有常量字符串 NETFLIX_CATALOG_URI = "http://odata.netflix.com/v2/Catalog/";

```
public ObservableCollection<Title> SearchByTitle(string searchKey)
    {
        NetflixCatalog catalog = new NetflixCatalog(new Uri(NETFLIX_CATALOG_URI));

        var query = catalog.Titles.Where(t => t.Name.Contains(searchKey));

        DataServiceCollection<Title> titles = new DataServiceCollection<Title>(catalog);
        titles.LoadAsync(query);
        return titles;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:37:40.867

如果您查看从 Linq 生成的 HTTP 请求，您会注意到 Netflix 不支持该格式。如果您将其更改为：

```
var query = catalog.Titles.Where(t => t.Name.StartsWith(searchKey)); 
```

但是，当然，这不是您想要的搜索......我也在寻找答案。

# python - 如何从多个模板文件夹加载 Flask 蓝图？

> ID：11192796
> 
> 赞同：9
> 
> 时间：2012-06-25T15:54:21.713
> 
> 标签：python, flask, jinja2, blueprint

我学会了如何创建 Flask 蓝图，并且可以为使用 Jinja2 模板的非烧瓶产品创建蓝图，并在烧瓶项目中使用它们。我做这样的事情：

```
# blueprint code
from flask import Blueprint
from pkg_resources import resource_filename
app = Blueprint('formgear', __name__, 
                template_folder=resource_filename('formgear', 'templates')) 
```

现在我想添加另一组模板，这些模板在逻辑上与我的非 Flask 项目相关，但仅限于 Flask。我完全不确定它是否很好设计，但是有没有办法从一个蓝图传播两个模板文件夹？并使这两个模板集可用于整个 Flask 项目？

注意：`formgear`是我的非 Flask 项目的名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T17:03:25.333

以下是调查的踪迹。

来自 flask.blueprints

```
class Blueprint(_PackageBoundObject):
    ....
    def __init__(self, name, import_name, static_folder=None,
                 static_url_path=None, template_folder=None,
                 ...)
        _PackageBoundObject.__init__(self, import_name, template_folder)
    .... 
```

来自 flask.helpers

```
@locked_cached_property
def jinja_loader(self):
    """The Jinja loader for this package bound object.

    .. versionadded:: 0.5
    """
    if self.template_folder is not None:
        return FileSystemLoader(os.path.join(self.root_path,
                                             self.template_folder)) 
```

调查结果：

1.  传递给`Blueprints`的 template_folder 随后是类`_PackageBoundObject`
2.  它被视为单个字符串，而不是文件夹列表

结果：

1.  **您不能为 template_folder 传递多个路径**

# javascript - knockoutjs foreach 不工作

> ID：11192798
> 
> 赞同：1
> 
> 时间：2012-06-25T15:54:25.587
> 
> 标签：javascript, html, knockout.js, knockout-2.0

我在同一张表中有两段代码。一个看起来像这样：

```
<tr>
   <th data-bind="text: tableHeaders()[0].title"></th>
   <th data-bind="text: tableHeaders()[1].title"></th>
   <th data-bind="text: tableHeaders()[2].title"></th>
</tr> 
```

另一个看起来像这样：

```
<tr data-bind="foreach: tableHeaders">
   <th data-bind="text: title"></th>
</tr> 
```

第一个打印正确，而第二个不打印任何内容。通过查看源代码可以发现

```
<tr data-bind="foreach: tableHeaders"></tr> 
```

我一直无法在 jsfiddle 中复制我的问题（作品：http: [//jsfiddle.net/nnjEf/4/](http://jsfiddle.net/nnjEf/4/)），所以这显然是另一个问题。任何想法我还能如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:53:00.990

正如您所做的那样，“流绑定控制”（即在您的 HTML 中使用 foreach 内联）首先在 Knockoutjs 2.0（或它的 beta 版本名称中的 1.3）中引入。您的 jsfiddle 也使用 v2.0 作为框架。

没有看到您的实际代码就不可能说，但我怀疑您使用的是不支持此功能的较低版本。如果您使用 v1.2，可能会起作用的旧方法是使用模板 - 例如

```
<tr data-bind="template:{name: 'tableHeadersTemplate', foreach: tableHeaders}">
</tr>

<script type="text/html" id="tableHeadersTemplate">    
   <th data-bind="text: title"></th>
</script> 
```

这也适用于 v2.0 及更高版本，但显然生成的标记比您当前尝试的方式多得多。

# c# - 通过 Exchange Web 服务 (C#) 获取 NewMail 事件时需要打开 Outlook

> ID：11192806
> 
> 赞同：2
> 
> 时间：2012-06-25T15:54:45.027
> 
> 标签：c#, outlook, exchangewebservices

标题几乎说明了一切。我尝试搜索此主题，但找不到任何内容。我查看了 Exchange Server 2010 的[模拟](http://msdn.microsoft.com/en-us/library/bb204095%28v=exchg.140%29.aspx)，但我不知道服务器上是否未启用模拟（或者这是否是问题所在） - 我想在我错误系统之前更有信心行政。还有什么可能吗？

我按照 MSDN 教程使用模拟设置订阅和连接，但我仍然必须打开 Outlook - 否则，我永远不会收到*任何事件*，包括我正在寻找的 NewMail 事件。

有人有什么想法吗？

# php - php上传文件

> ID：11192807
> 
> 赞同：1
> 
> 时间：2012-06-25T15:54:51.057
> 
> 标签：php, uploading

我在上传文件时遇到问题。这是我的表格：

```
 <form enctype="multipart/form-data" action="transact.php" method="POST">
 <table>
 <tr>
 <td>Nadpis:</td>
 <td><input type="text" id="title" name="title" value="<?php echo      htmlspecialchars($title); ?>" /></td></tr>
 <tr>
 <td>Text článku:</td>
 <td><textarea id="text" name="text" cols="55" rows="20"><?php if(!empty($a_text)) { echo htmlspecialchars($a_text); } ?></textarea></td>
 </tr><tr>
 <td>Obrázok k článku:</td>
 <td><input type="file" name="uploadfile" /></td></tr>
 <tr><td> </td>
 <td>
 <?php
 if ($_SESSION['access_level'] < 2) {
 echo '<input type="hidden" name="user_id" value="'. $user_id. '"/>';
 }

 if(empty($article_id)) {
 echo '<input type="submit" name="action" value="Odoslat" />';
 } else {
 echo '<input type="hidden" name="article_id" value="' .$article_id. '"/>';
 echo '<input type="submit" name="action" value="Ulozit" />';
 }
 ?>
 </td>
 </tr>
 </table>
 </form> 
```

当我运行脚本 transact.php 时出现错误：**注意：未定义的索引：第 138 行的 E:\xampp\htdocs\capitals\transact.php 中的** 上传文件，当我输入 print_r($_FILES) 时，我得到的只是**Array()** 值php.ini 文件中的最大上传大小设置为 128 MB

我的交易脚本：

```
 case 'Odoslat':
      session_start();
      $text = (isset($_POST['text']))? $_POST['text']: '';
      $nadpis = (isset($_POST['title']))? $_POST['title']: '';
      $image = (isset($_FILES['uploadfile']))?           imagecreatefromjpeg($_FILES['uploadfile']['tmp_name']): '';

      print_r($_FILES); // it writes Array()
      if(isset($_SESSION['id']) && !empty($nadpis) && !empty($text) &&           $_FILES['uploadfile']['error'] == UPLOAD_ERR_OK)   //here it indicates error
      {
      $ext = '.jpg';
      $query = 'INSERT INTO articles (article_id, user_id, a_text, title, submit_date)
      VALUES(NULL, '. $_SESSION['id']. ', "'. mysql_real_escape_string($text, $db). '", "'. 
      mysql_real_escape_string($nadpis, $db). '",  "' . date('Y-m-d H:i:s'). '")';
      mysql_query($query, $db) or die(mysql_error($db));
      $clanok_id = mysql_insert_id($db);
      $query = 'INSERT INTO foto (foto_id, article_id)
      VALUES (NULL, '. $clanok_id. ')';
      mysql_query($query, $db) or die(mysql_error($db));
      if(!empty($image))
      {
      $last_id = mysql_insert_id($db);
      $image_name = $last_id. $ext;
      imagejpeg($image, $dir. '/'. $image_name, 100);
      }
      else
      {
      $last_id = mysql_insert_id($db);
      $image_name = 'caps.jpg';
      }
      $priecinok = 'images/';
      $place = $priecinok. $image_name;
      $query = 'UPDATE foto 
      SET foto_path = "'. $place. '" WHERE foto_id = '. $last_id;
      mysql_query($query, $db) or die(mysql_error($db));
      $query = 'UPDATE articles 
      SET foto_id = '. $last_id. ' WHERE article_id = '. $clanok_id;
      mysql_query($query, $db) or die(mysql_error($db));

      $redirect = 'index.php';
      }

      else
      {
      $chyba = 'Nepodarilo sa nahrat clanok!';
      $redirect = 'index.php?chyba='. $chyba;
      }
      break; 
```

请问我该如何修复？如果有人帮助我，我将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T21:50:23.843

您应该在 php.ini 文件中检查 4 件事，以确保文件上传正常：

*   **file_uploads**：应设置为 1
*   **upload_max_filesize**：应该设置为足够大的值，以供您计划上传。你说它设置为128 MB。确保它写为“128M”。
*   **post_max_size**：应设置为高于 upload_max_filesize 的值，因为它包括文件和其他发布数据
*   **max_file_uploads**：不太重要，但它限制了您一次可以上传的文件数量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T12:24:46.433

php.ini 设置中最重要的一项是，请检查您是否有权在上传图像的特定文件夹中写入。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-25T15:58:05.203

尝试在您的表单中添加：

```
<input type="hidden" name="MAX_FILE_SIZE" value="100000" /> 
```

此值将最大文件设置为 100KB。

# oracle - 如何在物化视图上列出索引 (Oracle)

> ID：11192810
> 
> 赞同：3
> 
> 时间：2012-06-25T15:54:57.203
> 
> 标签：oracle, indexing, materialized-views

我认为列出物化视图的索引与列出表的索引相同吗？换句话说：

```
select * 
  from ALL_IND_COLUMNS 
 where TABLE_OWNER='SOME_OWNER' 
   and TABLE_NAME='SOME_TABLE' 
 order by INDEX_NAME, COLUMN_POSITION; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:57:54.353

是的，是的。

当你创建一个物化视图时，你实际上也是在创建一个同名的表。如果您查看`ALL_OBJECTS`，您将看到同名的表和物化视图

```
SELECT owner, object_name, object_type
  FROM all_objects
 WHERE owner = 'SOME_OWNER' 
   AND object_name = 'SOME_TABLE' 
```

# sql - 在 SQL 中缓存内部查询

> ID：11192811
> 
> 赞同：1
> 
> 时间：2012-06-25T15:55:07.577
> 
> 标签：sql, optimization, query-optimization

如何在 SQL 下进行优化（我的复杂查询的简化视图。）理想情况下，我应该能够缓存第一个 SQL 结果（订单 ID）并在第二个查询中对 OrderLine 表进行某种投影。

任何指针都会有所帮助。

限制 - 我无法创建临时表、游标或过程/函数。我正在连接到 Oracle 10g。

```
SELECT 'Object_id', id, mod_id FROM
(
    (Select 'Order_id', order_id, mod_id FROM Orders)
    UNION
    (select 'Order_line_id', order_line_id, mod_id FROM OrderLine 
        WHERE order_id IN (Select order_id FROM Orders)
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:59:25.790

优化器负责优化您的查询；放松，让它做自己的事情。

您尝试的任何显式缓存都将涉及临时表（您已排除）之类的内容，因此您只能通过使用 CTE（公用表表达式，又名 WITH 子句）来命名公用查询，从而使公用查询更加明确子查询。但是优化器可能会以同样的方式处理事情。

您可以将 IN 子句替换为 JOIN；那可能会更快。同样，优化器可能会这样做。但是，这不是缓存操作。这是一个标准的查询重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:01:23.033

您可以根据以下示例设计查询：

```
WITH CTE AS
(
    Select 'Order_id' Descr, order_id, mod_id FROM Orders
)
, CTE2 AS
(
    SELECT * FROM CTE
    UNION
    SELECT 'Order_line_id' Descr, order_line_id, mod_id FROM OrderLine ol
    WHERE EXISTS (Select order_id FROM CTE WHERE order_id = ol.order_id)
)
SELECT * FROM CTE2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:01:47.017

选择order_id, mod_id from orders o inner join orderline ol on o.order_id = ol.order_line_id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:02:45.097

您也许可以删除此行：

```
 WHERE order_id IN (Select order_id FROM Orders) 
```

如果您的数据库具有完整性，则不允许出现孤儿，并且此行不会过滤任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T16:05:02.730

```
with myOrders as (
  select order_id,
         mod_id
  from   Orders
)
select 'order_id' obj_type,
       order_id,
       mod_id
from   myOrders

union all

select 'order_line_id' obj_type,
       order_line_id,
       mod_id
from   OrderLine
join   myOrders
on     OrderLine.order_id = myOrders.order_id; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T16:22:56.847

您可以尝试以下类似...

```
SELECT DISTINCT 'Object_id', id, mod_id
FROM
(
    SELECT
        CASE
            WHEN CROSSNUM = 1 THEN 'Order_ID'
            ELSE 'Order_Line_ID'
        END AS Object_ID,
        CASE
            WHEN CROSSNUM = 1 THEN order_id
            ELSE order_line_id
        END AS id,
        CASE
            WHEN CROSSNUM = 1 THEN Orders.mod_id
            ELSE OrderLine.mod_id
        END AS mod_id
    FROM
        (Select 'Order_id', order_id, mod_id FROM Orders) Orders
    LEFT JOIN (select 'Order_line_id', order_line_id, mod_id FROM OrderLine) OrderLine
        ON Orders.Order_id = OrderLine.Order_Id
    CROSS JOIN
    (
        SELECT 1 AS CROSSNUM FROM DUAL
        UNION ALL
        SELECT 2 AS CROSSNUM FROM DUAL
    ) X
WHERE
    NOT (CROSSNUM = 2 AND order_line_id IS NULL)
) 
```

# objective-c - 核心图形混合导致亮点

> ID：11192812
> 
> 赞同：1
> 
> 时间：2012-06-25T15:55:08.807
> 
> 标签：objective-c, core-graphics

我正在尝试使用 Core Graphics 在黑色背景上绘制一个简单的网格图案。网格线将是绿色的。我目前正在图像上下文中创建和绘制，然后使用生成的图像来图案化我的视图背景：

```
 CGFloat gridSize = 45;
    UIGraphicsBeginImageContext(CGSizeMake(gridSize, gridSize));

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    UIGraphicsPushContext(ctx);

    // Create black background fill.
    CGContextSetFillColorWithColor(ctx, [[UIColor colorWithRed:0.0 
                                                         green:0.0
                                                          blue:0.0
                                                         alpha:1.0] CGColor]);
    CGContextMoveToPoint(ctx, 0, 0);
    CGContextAddLineToPoint(ctx, gridSize, 0);
    CGContextAddLineToPoint(ctx, gridSize, gridSize);
    CGContextAddLineToPoint(ctx, 0, gridSize);
    CGContextAddLineToPoint(ctx, 0, 0);
    CGContextFillPath(ctx);

    // Set context variables for line drawing.
    CGContextSetBlendMode(ctx, kCGBlendModeNormal);
    CGContextSetStrokeColorWithColor(ctx, [[UIColor colorWithRed:0.0 
                                                           green:1.0
                                                            blue:0.0
                                                           alpha:1.0] CGColor]);
    CGContextSetLineWidth(ctx, 1);

    // Draw top and bottom grid lines.
    CGContextMoveToPoint(ctx, 0, 0);
    CGContextAddLineToPoint(ctx, gridSize, 0);
    CGContextMoveToPoint(ctx, gridSize, gridSize);
    CGContextAddLineToPoint(ctx, 0, gridSize);
    CGContextStrokePath(ctx);

    // Draw left and right grid lines.
    CGContextMoveToPoint(ctx, gridSize, 0);
    CGContextAddLineToPoint(ctx, gridSize, gridSize);
    CGContextMoveToPoint(ctx, 0, gridSize);
    CGContextAddLineToPoint(ctx, 0, 0);
    CGContextStrokePath(ctx);

    // Draw a "cross" in the center of the image to troubleshoot blending.
    CGContextMoveToPoint(ctx, 20, 20);
    CGContextAddLineToPoint(ctx, 40, 20);
    CGContextStrokePath(ctx);

    CGContextMoveToPoint(ctx, 30, 10);
    CGContextAddLineToPoint(ctx, 30, 30);
    CGContextStrokePath(ctx);

    UIGraphicsPopContext();

    UIImage *gridImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    // Set background color to a pattern based on the drawn image.
    [self setBackgroundColor:[[UIColor alloc] initWithPatternImage:gridImage]]; 
```

但是，此代码会导致以下结果：

![网格线](../Images/6ad6f82516f1008032432587982b964a.png)

请注意，在任何线的交点处都会出现较亮的区域。稍微随机放置在网格图案中的十字架被放在那里只是为了测试在不受图案边缘影响时是否仍然出现明亮区域（它们确实如此）。

我希望缓解的正是线路交叉点上的这些明亮区域。为了确保我没有不小心使用某种视觉错觉来欺骗自己，我检查了线条中间以及它们交叉处的像素颜色。

绿线中点的像素值：

*   回复：0
*   克：129
*   乙：0

两条绿线相交处的像素值：

*   回复：0
*   克：191
*   乙：0

我检查了有关混合模式的[Apple Core Graphics](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-BCIGICEF)文档，并确定默认混合模式是`kCGBlendModeNormal`，当使用 绘制颜色时`alpha = 1`，它应该“完全遮盖背景”以及任何以前绘制的颜色。虽然这是默认的混合模式，但我仍然在上面的代码中明确设置它，但我仍然看到这些明亮的方块。

我希望看到的是统一绿色的线条，大概是 RGB 配置文件：

*   回复：0
*   克：255
*   乙：0

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:26:43.760

看起来线条是用 50% 的 alpha 绘制的，但是是指定线条宽度的两倍。如果您的线宽为 1 像素，但使用整数坐标绘制水平线或垂直线，则会发生这种情况。

您的坐标指定了从开始到结束坐标的无限细线。然后，绘制的线应延伸到细线的两侧，宽度为笔划宽度的一半。在您的情况下，这意味着该线需要在网格的左侧和右侧或顶部和底部覆盖半个像素。由于只能绘制完整像素，因此将 alpha 降低到 50% 并改为绘制完整像素。

解决方案很简单：将 0.5 添加到所有坐标。

# python - 将 datetime.date 对象转换为 datetime.datetime 对象，其中任何缺失的时间属性均为零

> ID：11192814
> 
> 赞同：5
> 
> 时间：2012-06-25T15:55:15.077
> 
> 标签：python, date, datetime, python-datetime

是否有一个内置函数可以将 datetime.date 对象转换为 datetime.datetime 对象，其中缺少的内容为 0？例如，假设

```
tdate = datetime.date(2012,1,31) 
```

我想写一些类似的东西

```
tdatetime = datetime.date.datetime()
tdatetime = datetime.datetime(tdate) 
```

我希望输出是

```
datetime.datetime(2012, 1, 31, 0, 0) 
```

但两者都不起作用。[从 datetime.datetime 到 datetime.date 有一个内置函数，但我正在寻找反向操作。](https://stackoverflow.com/questions/3743222/how-do-i-convert-datetime-to-date-in-python)

一个非常糟糕的解决方案是编写：

```
datetime.datetime(tdate.year(), tdate.month(), tdate.day(), 0, 0) 
```

我特别想避免这种不好的做法。

我已经编写了自己的小函数来执行此操作，但我认为它应该在模块中提供。为了使用我的功能，它弄乱了一些系统范围的导入。它是可行的，只是不是很 Pythonic。

我只是想看看是否有人知道是否有一种仅使用 datetime 模块功能的有效方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T15:56:51.877

[`.combine(date, time)`](http://docs.python.org/library/datetime.html#datetime.datetime.combine)与空[`time`实例](http://docs.python.org/library/datetime.html#time-objects)一起使用：

```
>>> import datetime
>>> tdate = datetime.date(2012,1,31)
>>> datetime.datetime.combine(tdate, datetime.time())
datetime.datetime(2012, 1, 31, 0, 0) 
```

如果您想改用常量，请使用[`time.min`](http://docs.python.org/library/datetime.html#datetime.time.min)：

```
>>> datetime.datetime.combine(tdate, datetime.time.min)
datetime.datetime(2012, 1, 31, 0, 0) 
```

# postgresql - 在 postgresql 中预计算用户定义的函数

> ID：11192815
> 
> 赞同：2
> 
> 时间：2012-06-25T15:55:19.243
> 
> 标签：postgresql, user-defined-functions, query-performance, precompute

我正在尝试按行预先计算用户定义的函数。这个想法是我在其中一个字段中将 JSON 对象作为文本对象，并且我想从中解析出一些其他“字段”，这些字段可以像任何其他真实字段一样在查询中返回。但是，解析 JSON 的开销很大。有没有办法以加速查询的方式预先计算这个解析函数？

请不要争辩说首先不应该有 JSON 作为数据库上的文本；我知道利弊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:29:46.760

首先，您可能对即将发布的 PostgreSQL 9.2（即将发布）的[JSON 数据类型感兴趣。](http://www.postgresql.org/docs/9.2/interactive/datatype-json.html)

至于您的问题，您正在寻找**物化视图**（或更简单的形式：表中的冗余预计算列）。“物化视图”只是一个既定术语，而不是 PostgreSQL 数据库中的特殊对象。基本上，您使用预先计算的值创建一个冗余表，您可以在某些事件或及时刷新。

[搜索这个词](https://stackoverflow.com/search?q=[postgresql]+%2Bmaterialized+%2Bview&submit=search)会给你一些答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:03:36.967

除了物化视图之外，请记住 PostgreSQL 还可以索引函数的*输出*，因此您可以执行以下操作：

```
CREATE INDEX my_foo_bar_udf_idx ON foo (bar(baz)); 
```

这仅在 UDF 被标记为不可变时才有效，这意味着输出仅取决于参数。这使您可以选择针对查询参数运行函数，然后扫描索引而不是表。它不能满足所有用例，但它确实满足了许多用例，而且它通常可以为您省去物化视图的麻烦。

# c - c socket 发送文件大小，然后发送文件

> ID：11192816
> 
> 赞同：1
> 
> 时间：2012-06-25T15:55:23.470
> 
> 标签：c, sockets, sendfile

这是*client.c*的片段：

```
size_t fsize;
int total_bytes_read = 0, ret_val;

hp = gethostbyname(argv[1]);
DescrittoreClient = socket(AF_INET, SOCK_STREAM, 0);
    connect(DescrittoreClient, (struct sockaddr *) &serv_addr, sizeof(serv_addr));
strcpy(Buffer, filename);
send(DescrittoreClient, Buffer, strlen(Buffer), 0);
ret_val = read(DescrittoreClient, &fsize, sizeof(fsize));
if(ret_val == -1){
    printf("Errore durante ricezione grandezza file\n");
    close(DescrittoreClient);
    exit(1);
}

fd = open(filename, O_CREAT | O_WRONLY,0644);
if (fd  < 0) {
    perror("open");
    exit(1);
}

while(total_bytes_read < fsize){
    while ((nread = read(DescrittoreClient, Buffer, sizeof(Buffer))) > 0){
        write(fd, Buffer, nread);
        total_bytes_read += nread;
    }
}
printf("File ricevuto\n"); 
```

这是*server.c*的一个片段：

```
int DescrittoreServer, DescrittoreClient, LunghezzaClient;
int NumPorta = atoi(argv[1]);
char Buffer[1024] = {};
int rc, fd;
off_t offset = 0;
struct stat stat_buf;
char filename[1024] = {};
int fsize[10240] = {};

DescrittoreServer = socket(AF_INET, SOCK_STREAM, 0);

if(bind(DescrittoreServer, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0){
    perror("Errore di bind\n");
    close(DescrittoreServer);
    exit(1);
}
listen(DescrittoreServer, 5);
LunghezzaClient = sizeof(cli_addr);
while(1){
    DescrittoreClient = accept(DescrittoreServer, (struct sockaddr *) &cli_addr, &LunghezzaClient);

rc = recv(DescrittoreClient, filename, sizeof(filename), 0);

fprintf(stderr, "Ricevuta richiesta di inviare il file: '%s'\n", filename);

/* open the file to be sent */
fd = open(filename, O_RDONLY);

/* get the size of the file to be sent */
fstat(fd, &stat_buf);
*fsize = stat_buf.st_size;
send(DescrittoreClient, fsize, sizeof(fsize), 0);

/* copy file using sendfile */
offset = 0;
rc = sendfile(DescrittoreClient, fd, &offset, stat_buf.st_size);
if (rc != stat_buf.st_size) {
    fprintf(stderr, "Trasferimento incompleto: %d di %d bytes\n", rc, (int)stat_buf.st_size);
    exit(1);
}   

    close(DescrittoreClient);
    close(fd);
} 
```

这段代码做了什么：
1）客户端发送文件的名称
2）服务器发送文件的长度（以字节为单位）
3）客户端接收文件的长度 4
）服务器发送文件
5）客户端接收文件
问题是文件**没有被**完全接收，但只有一部分是由客户端写入的（例如，服务器发送一个 2143 字节的文件，客户端只接收到 95 个字节），我不明白为什么！
PS：一些错误处理已被删除，因此代码更具可读性！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:34:07.703

您必须在循环中调用 recv() 并总结它的返回值：

```
while (read_bytes < filesize) {
    read_bytes += recv(socket, buffer + read_bytes, filesize-read_bytes, flags)
} 
```

当然，您还应该添加错误处理，即检查您是否读取了 0 个字节并且连接已关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:54:06.407

问题是我已经声明`char nread=0`而不是`int nread=0`进入客户端，所以我可以读取的最大值`char`是 127...将 char 更改为 int 解决了我的问题！

# c# - 如何将值从我的页面传递给控制器 ？

> ID：11192817
> 
> 赞同：0
> 
> 时间：2012-06-25T15:55:28.437
> 
> 标签：c#, asp.net-mvc, razor, asp.net-ajax

我将 MVC 与 Razor 和 C# 一起使用。我想更新一个元素......一个带有ajax的计数器。这是我的代码：

```
@model Domain.CounterObject
@using (Ajax.BeginForm("Count", "CounterObject", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "my-control" }))
{
    <div id="my-control" class="bid-object">
        <div>
            <span class="title">@Html.Encode(Model.Title)</span>
        </div>
        <div>
            <span class="display">@Html.Encode(Model.GetFinalDate())</span>
        </div>
        <div>
            <span class="display">@Html.Encode(Model.GetValue())</span>
        </div>
        <div>
            <input type="submit" value="Count" />
        </div>
    </div>
} 
```

在我的控制器中，我有以下代码：

```
[HttpPost]
        public PartialViewResult Count(CounterObject counter)
        {
            // Special work here
            return PartialView(counter);
        } 
```

问题是我在 Count 方法中收到的 CounterObject 计数器始终为空。如何将值从我的页面传递给控制器​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:02:13.003

您必须定义一个带有名称和 ID 的输入字段，然后 ModelBinder 可以将其绑定到您的 CounterObject。

您可以使用一次@Html.EditorForModel，然后检查生成的 Html 以查看它生成的名称/ID 对类型。如果您愿意，您可以继续使用它们手工制作您的 Html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:53:39.660

采用

```
<span class="title">@Html.Encode(Model.Title)</span>
<div class="editor-field">@Html.EditorFor(Model => Model.Title)<div>
//For other fields 
```

通过这种方式，您可以绑定到您的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:26:33.960

> 我在我的 Count 方法中收到的总是 null

首先，您没有从表单提交任何内容，那么绑定是如何发生的？如果不允许用户编辑值但您仍想通过表单提交它们，那么您必须`hidden fields`与它们一起使用。

例如。

```
<div>
   <span class="title">@Html.Encode(Model.Title)</span>
   @Html.HiddenFor(m => m.Title)
</div> 
```

请注意，隐藏字段应与属性具有相同的名称，以使绑定成功。

最好在模型中拥有存储`GetFinalDate()`和`GetValue()`结果的属性，这样您就可以轻松地绑定诸如 in 之类的东西`Title`。

# qt - QML 启动画面不工作

> ID：11192823
> 
> 赞同：1
> 
> 时间：2012-06-25T15:55:59.413
> 
> 标签：qt, splash-screen, qml

我的应用程序曾经在最新的美女更新之前工作，但不再工作了。启动画面仅在我将 init.qml 文件和 splashcreen.qml 文件上的 com.nokia.symbian 1.1 降级到 1.0 时才有效，但随后不显示 main.qml 文件。当我指示 main.cpp 直接加载 main.qml 时，应用程序确实可以工作...... 我迷路了！这是我为 main.cpp 提供的代码：

```
 #include <QtGui/QApplication>
   #include "qmlapplicationviewer.h"

   Q_DECL_EXPORT int main(int argc, char *argv[])
   {
QScopedPointer<QApplication> app(createApplication(argc, argv));

QmlApplicationViewer viewer;
viewer.setOrientation(QmlApplicationViewer::ScreenOrientationLockPortrait);
viewer.setSource(QUrl("qrc:/qml/SmartFlyer/init.qml"));
//viewer.setMainQmlFile(QLatin1String("qrc:qml/SmartFlyer/main.qml"));
viewer.showExpanded();

return app->exec();
   } 
```

对于 init.qml：

```
 import QtQuick 1.1
   import com.nokia.symbian 1.1

   Item {
       id: init

       SplashScreen {
           id: splash
           show: true              // show splash
           minTimeout: 3000         // show splash at least for 3 sec
    image: "data/splash_screen.png"  // path to splash image
    canFinish: false         // change to true when main QML will be loaded
    z: 100                   // highest page.
}

Loader { // this component performs deferred loading.
    id: mainLoader
    onStatusChanged: {
        if( mainLoader.status == Loader.Ready )
        {
            // main page is loaded
            // time to hide splash
            splash.canFinish = true
        }
    }
}

Component.onCompleted:  {
    // splash is already rendered on the screen
    // user is looking on splash
    // now we can start loader to load main page
    mainLoader.source = "main.qml"
}
   } 
```

对于 splashscreen.qml ：

```
 import QtQuick 1.1
   import com.nokia.symbian 1.1

   Rectangle {
       id: splash

       anchors.fill: parent
       color: "black"

property int minTimeout: 3000  // 3s by default.
property string image;            // path to splash image
property bool show: false       // if show is true then image opacity is 1.0, else 0.0

property bool canFinish: false    // if true then we can hide spash after timeout

state: show ? "showingSplash" : ""

onStateChanged: {
    if( state == "showingSplash" )
        splashTimer.start();
}

opacity: 0.0

Image {
    source: image
    fillMode: Image.PreserveAspectFit
    anchors.fill: parent
    smooth: true
}

Timer {
    id: splashTimer
    interval: minTimeout
    running: false
    repeat:  true
    onTriggered: {
        if( splash.canFinish )
        {
            // finally we can stop timer and hide splash
            splash.show = false
            splashTimer.repeat = false
        }
        else
        {
            // canFinish is false, but main.qml is not loaded yet
            // we should run timer again and again
            splashTimer.interval = 1000 // 1 sec
            splashTimer.repeat = true
        }
    }
}

states: [
    State {
        name: "showingSplash"
        PropertyChanges { target: splash;  opacity: 1.0 }
    }
]

// hide splash using animation
transitions: [
    Transition {
        from: ""; to: "showingSplash"
        reversible: true
        PropertyAnimation { property: "opacity";  duration: 500; }
    }
]
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:34:21.450

至于我，我使用“老派”的方式来展示 Splash，而不需要任何 QML。在这里，您可以看到如何构建它，图像徽标放置在渐变背景上：

```
QSplashScreen *Application::buildSplashScreen() {
    const QPixmap logoPixmap(":/images/logo.png");
    QDesktopWidget *desktop = QApplication::desktop();
    QRect desktopRect = desktop->availableGeometry();
    QPixmap splashPixmap(desktopRect.width(), desktopRect.height());
    QPainter painter;
    painter.begin(&splashPixmap);
    QLinearGradient backgroundGradient(splashPixmap.rect().width() / 2,
                                       0,
                                       splashPixmap.rect().width() / 2,
                                       splashPixmap.rect().height());
    backgroundGradient.setColorAt(0, QColor::fromRgb(40, 50, 57));
    backgroundGradient.setColorAt(1, QColor::fromRgb(19, 25, 29));
    painter.fillRect(splashPixmap.rect(), backgroundGradient);
    QRect logoRect((splashPixmap.width() - logoPixmap.width()) / 2,
                   (splashPixmap.height() - logoPixmap.height()) / 2,
                   logoPixmap.width(),
                   logoPixmap.height());
    painter.drawPixmap(logoRect, logoPixmap);
    painter.end();
    QScopedPointer<QSplashScreen> splashScreen(new QSplashScreen(splashPixmap));
    if (desktopRect.width() > desktopRect.height()) {
        splashScreen->setAttribute(Qt::WA_LockLandscapeOrientation, true);
    } else {
        splashScreen->setAttribute(Qt::WA_LockPortraitOrientation, true);
    }
    return splashScreen.take();
} 
```

然后我在程序启动时使用这个手动构建的启动画面：

```
int Application::run() {
    QScopedPointer<QSplashScreen> splashScreen(buildSplashScreen());
    splashScreen->showFullScreen();
    QScopedPointer<QDeclarativeView> applicationWindow(buildRootView());
    splashScreen->finish(applicationWindow.data());
    applicationWindow->showFullScreen();
    return QApplication::exec();
} 
```

# javascript - 用于发送/显示的简单 chrome 扩展 URL

> ID：11192830
> 
> 赞同：0
> 
> 时间：2012-06-25T15:56:37.560
> 
> 标签：javascript, google-chrome-extension

我正在尝试做一些简单的事情，但不知何故它不起作用...我正在尝试构建一个简单的 chrome 扩展，当您单击它时，它会以简单的 HTML 显示 TAB 的 URL。我该怎么做？这是代码：

# 清单.json

```
{
    "name": "MY EXTENSION",
    "version": "1.0",
    "description": "the DESCRIPTION",
    "browser_action": {
    "default_icon": "icon.png",
    "popup": "main.html"
    },
    "permissions": [
    "tabs"
  ]
} 
```

# manifest.json 结束

# 主要.html：

```
 <html>
<head>
    <title>my title</title>
<script src="jquery.json-2.3.min.js"></script>
<script type="text/javascript">

    var pageUrl = null;
    var pageTitle = null;
    var Title1 = 'lala';

    window.addEventListener("load", windowLoaded, false);
    function windowLoaded() {
      chrome.tabs.getSelected(null, function(tab) {
        document.getElementById('currentLink').innerHTML = tab.url;

      });
    }

    function get(){

    chrome.tabs.getSelected(null, function(tab) {
        pageUrl = tab.url;
        pageTitle = tab.title;
        $('#bkmk').attr('value',pageUrl);
        $('#title').attr('value',pageTitle);

    });
  }
  </script>
</head>
<body onload="get()">
<p id="currentLink">Loading ...</p>
<hr />
<ul id="savedLinks"></ul>

<tr><td align="right">Link (URL): </td><td><input id='bkmk' name='bkmk' type="text" value="" size="50">
<br><span style="color: red;"></span>
</td></tr>

<script>document.write($bkmk)</script>

</body>
</html> 
```

==============

我将 jquery.json-2.3.min.js 文件放在同一个文件夹中..

我所做的任何事情都无法使 HTML 显示 URL ..

谢谢！！

埃里克德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:05:05.877

看来您正在使用 jQuery……但是您没有将 jQuery 库包含在`<script src="..."></script>`任何地方的块中。如果您使用 jQuery 的本地副本，则需要在扩展目录中包含 jQuery 库文件，并在扩展中引用其相对于 HTML 页面的相对路径（例如，`"jquery.min.js"`如果它在同一个文件夹中，或者`"lib/jquery.min.js"`如果它在一个名为`lib`) 的文件夹。

将来，您可以通过右键单击浏览器操作图标并选择“检查弹出窗口”来获得 JavaScript 控制台（带有错误列表）。有关更多信息，请参阅 Google[关于调试 Chrome 扩展的教程。](http://code.google.com/chrome/extensions/tut_debugging.html)

# java - 如何在全景模式下拍照？

> ID：11192839
> 
> 赞同：3
> 
> 时间：2012-06-25T15:57:13.630
> 
> 标签：java, android

我想制作一个应用程序，允许用户在全景模式下从 android 设备库或 android 相机应用程序中拍摄文本图片。但我找不到任何来源或教程来做到这一点。我该如何做到这一点我的应用程序？如何制作一个以全景模式从 android 相机应用程序中拍照的应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:04:13.767

我不知道它对你是否仍然真实，但希望它对某人有所帮助。

全景功能至少从 Android 4.0 开始就已经在标准 android 相机中实现了（也许它在更早的版本中可用，但我不确定，你可以检查一下），所以由于源代码对所有人开放，它可能是最简单的只是复制所需功能的方式。

虽然您可以从[https://android.googlesource.com/](https://android.googlesource.com/)下载应用程序的源代码（您需要 LegacyCamera 或 Camera），但您不能只在 Eclipse 或其他 IDE 中打开任何标准应用程序的项目。例如，LegacyCamera 依赖于 Gallery2 和其他可能难以解决的依赖关系。

我花了几天时间尝试将全景功能移动到单独的项目中。你可以从这里下载它：[https](https://github.com/yankeppey/PanoramaSample) ://github.com/yankeppey/PanoramaSample 。几点说明：

1.  功能核心（从多个图像创建一个全景图像、进度通知等）在本机部分。

2.  我使用了来自 LegacyCamera 的 Java 代码，它用于 Android 4.0-4.1，而不是 4.2，因为它对我来说更容易。Native 部分取自 4.2，内部只有很小的变化，几乎相同的 JNI 接口。

3.  这个项目只是为了帮助你将全景图功能移动到你自己的应用程序中，它不像那种库，不要指望干净的代码没有错误，它只是一个非常肮脏和错误的项目。如果我有时间，我会尽量让它更干净，但没有保修:)

# python - 如何搜索一行然后替换后面的行

> ID：11192840
> 
> 赞同：0
> 
> 时间：2012-06-25T15:57:17.510
> 
> 标签：python, python-2.7

我有一个文本文件，需要替换一行文本

它是一个非常大的文件，因此将整个文件读入内存并不是最好的方法。这些代码块有很多，这里只有两个来了解一下。我需要做的是替换`'const/4 v0, 0x1'`，`'const/4 v0, 0x0'` 但我只需要替换`canCancelFocus()Z`方法中的那个，所以我需要搜索该行，`'.method public static canCancelFocus()Z'` 然后用该方法中`'const/4 v0, 0x1'`的 with替换`'const/4 v0, 0x0'`。

Textfile.text 包含：

```
.method public static CancelFocus()Z
    .locals 1

    const/4 v0, 0x1

    return v0
.end method

.method public static FullSize()Z
    .locals 1

    const/4 v0, 0x1

    return v0
.end method 

...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:21:52.613

这是给你的一些代码：

```
fp = open("Textfile.text", "r+")

inFunc = False
line = fp.readline()
while line is not None:
    if inFunc and "const/4 v0, 0x1" in line:
        line = line.replace("0x1", "0x0")
        fp.seek(-len(line), 1)
        fp.write(line)
    elif ".method public static canCancelFocus()Z" in line:
        inFunc = True
    elif ".end method" in line:
        inFunc = False
    line = fp.readline()

fp.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:18:38.097

您需要使用标志来切换何时进行替换；当你看到这`.method`条线时设置它，当你看到它时再次重置它`.end method`。

然后，您仅在上下文标志为 True 时查找要修复的行：

```
with open('textfile.text', 'r+') as tfile:
    incontext = False
    pos = 0
    for line in tfile:
        pos += len(line) # The read-ahead buffer means we can't use relative seeks.

        # Toggle context
        if line.strip().startswith('.method'):
            incontext = True
            continue
        if line.strip().startswith('.end method'):
            incontext = False
            continue

        if incontext and 'const/4 v0, 0x1' in line:
            line = line.replace('0x1', '0x0')
            tfile.seek(pos - len(line))
            tfile.write(line) 
```

请注意，以上内容会就地覆盖文件；这仅在您的替换与替换文本的长度完全相同时才有效。

如果要更改行的长度（更短，更长），则需要将其写入新文件（或`sys.stdout`）：

```
with open('textfile.text', 'r') as tfile:
    with open('outputfile.text', 'w') as output:
        incontext = False
        for line in tfile:
            # Toggle context
            if line.strip().startswith('.method'):
                incontext = True
            if line.strip().startswith('.end method'):
                incontext = False

            if incontext and 'const/4 v0, 0x1' in line:
                line = line.replace('0x1', '0x0')

            # Write every line to the output file
            output.write(line) 
```

# c - 免费（）：无效的下一个大小（快速）字符串太长？

> ID：11192841
> 
> 赞同：2
> 
> 时间：2012-06-25T15:57:20.850
> 
> 标签：c, string, memory-management, free, glibc

我的代码出现以下错误：

```
free(): invalid next size (fast) 
```

我的代码：

```
 #include <stdio.h>
  #include <string.h>
  #include <stdlib.h>

  int main()
  {  
char *temp_str;
char *pos, *pos2;
char *key = (char*)malloc(20);
char *data = (char*)malloc(20);
const char newline = '\n';

char *unparsed_data = "NEW_DATA_PACKET\n\
  Data Set 16-byte Universal Key\n\
  Unix Time Stamp (microsecs): 1319639501097446\n\
  Frame Number: 0\n\
  Version: 3\n\
  Platform Yaw Angle (deg): 15.22428\n\
  Platform Pitch Angle (deg): 1.78528\n\
  Platform Roll Angle (deg): 2.004111\n\
  Image Source Source: test\n\
  Image Coordinate System: Testing XXXXX\n\
  Sample Latitude (deg): 17.306791\n\
  Sample Longitude (deg): -60.26209\n\
  Sample True Altitude (m): 7.623407\n\
  Sample Horizontal FoV (deg): 0.1821277\n\
  Sample Vertical FoV (deg): 15.1879\n\
  Sample Rel. Azimuth Angle (deg): 291.70295\n\
  Sample Rel. Elevation Angle (deg): -5.941163\n\
  Sample Rel. Roll Angle (deg): 3.10959\n\
  Checksum: 4659\n";

temp_str = (char*)malloc(strlen(unparsed_data));

printf("\nThe original string is: \n%s\n",unparsed_data);

//Ignore the first two lines
pos = strchr(unparsed_data, newline);
strcpy(temp_str, pos+1);
pos = strchr(temp_str, newline);
strcpy(temp_str, pos+1);
printf("STARTING THE PARSER\n\n");
while(strlen(temp_str) > 2)
{
  printf("\tstarting loop\n");
  //Getting the position of the colon and newline character
  pos = strchr(temp_str, ':'); // ':' divides the name from the value
  pos2 = strchr(temp_str, '\n'); //end of the line
  realloc(key, (pos-temp_str-1)); //allocate enough memory
  realloc(data, (pos2-pos)-1);

  printf("After realloc \n");

  //copying into key and data
  strncpy(key, temp_str, (pos-temp_str));
  strncpy(data, pos + 2, (pos2-pos)-2);

  //Append null terminator
  strcpy(key+(pos-temp_str-1)+1, "");
  strcpy(data+(pos2-pos)-2, "");

  printf("%s = ",key);
  printf("%s\n",data);

  assign_value(key,data, &gvals);

  printf("The value has been assigned\n");
  strcpy(temp_str, pos2+1);

  printf("Freeing key and data\n\n");

  free(key);
  free(data);

}

return 0;
  } 
```

打印时我也会收到一些垃圾

```
STARTING THE PARSER

    starting loop
After realloc 
Unix Time Stamp (m13196395 = 13196395
The value has been assigned
Freeing key and data

*** glibc detected *** ./memory_alloc: free(): invalid next size (fast): 0x098cd008 *** 
```

最后，当我减少字符串行的长度时，代码可以完美运行。它适用于以下字符串：

```
char *unparsed_data = "NEW_DATA_PACKET\n\
  Data Set 16-byte Universal Key\n\
  Time Stamp: 1319639501097446\n\
  Frame Number: 0\n\
  Version: 3\n\
  Yaw Angle: 15.22428\n\
  Pitch Angle: 0.78528\n\
  Roll Angle: 2.004111\n\
  Source: test\n\
  Coor System: Test XXXXX\n\
  Latitude: 27.306791\n\
  Longitude: -60.26209\n\
  True Altitude: 7.623407\n\
  Hor FoV: 0.1821277\n\
  Ver FoV: 15.1879\n\
  Azimuth: 291.702954\n\
  Elevation: -0.433563\n\
  Roll: 0.79659\n\
  Checksum: 2659\n"; 
```

** ****解决方案：* *** **

```
int main()
      {  
    char *temp_str;
    char *pos, *pos2;
    char *key = (char*)malloc(20);
    char *data = (char*)malloc(20);
    const char newline = '\n';

    char *unparsed_data = "NEW_DATA_PACKET\n\
The UAS Datalink Local Data Set 16-byte Universal Key\n\
Time Stamp: 1319639501097446\n\
Frame Number: 0\n\
Version: 3\n\
Yaw Angle: 15.22428\n\
Pitch Angle: 0.78528\n\
Roll Angle: 2.004111\n\
Source: test\n\
Coor System: Test XXXXX\n\
Latitude: 27.306791\n\
Longitude: -60.26209\n\
True Altitude: 7.623407\n\
Hor FoV: 0.1821277\n\
Ver FoV: 15.1879\n\
Azimuth: 291.702954\n\
Elevation: -0.433563\n\
Roll: 0.79659\n\
Checksum: 2659\n";

    temp_str = (char*)malloc(strlen(unparsed_data));

    //Ignore the first two lines
    pos = strchr(unparsed_data, newline);
    strcpy(temp_str, pos+1);
    pos = strchr(temp_str, newline);
    strcpy(temp_str, pos+1);
    printf("STARTING THE PARSER\n\n");
    while(strlen(temp_str) > 2)
    {
      printf("\tstarting loop\n");
      //Getting the position of the colon and newline character
      pos = strchr(temp_str, ':'); // ':' divides the name from the value
      pos2 = strchr(temp_str, '\n'); //end of the line
      char *new_key = (char*)realloc(key, (pos-temp_str+1)); //allocate enough memory
      char *new_data = (char*)realloc(data, (pos2-pos+1));

      if(new_key)
        key = new_key;
      if(new_data)
        data = new_data;

      printf("After realloc \n");

      //copying into key and data
      strncpy(key, temp_str, (pos-temp_str));
      strncpy(data, pos + 2, (pos2-pos)-2);

      //Append null terminator
      memset(key + (pos-temp_str) , '\0', 1);
      memset(data + (pos2 - pos), '\0', 1);

      printf("%s = ",key);
      printf("%s\n",data);

      assign_value(key,data, &gvals);

      printf("The value has been assigned\n");
      strcpy(temp_str, pos2+1);

      printf("Freeing key and data\n\n");

      free(key); key= NULL;
      free(data); data = NULL;

    }

    return 0;
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:06:41.233

这是错误：

```
realloc(key, (pos-temp_str-1)); //allocate enough memory
realloc(data, (pos2-pos)-1); 
```

`realloc()`返回新缓冲区的地址（可能不同），传入的缓冲区可能被释放。然后将旧缓冲区传递给`free()`，但它们可能已经被释放。您需要从以下位置保存返回值`realloc()`：

```
char* new_key = realloc(key, ...); /* Don't assign key = realloc(key, ...);
                                      Since if realloc() fails it returns
                                      NULL, but leaves the original
                                      buffer unmodified. This will
                                      result in a memory leak. */
if (new_key)
{
    key = new_key;
}

free(key);
key = NULL; /* Be sure assign key to NULL, otherwise dangling pointer will
               be passed to realloc() on next iteration. */ 
```

另外，请参阅[Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:06:26.870

这段代码有一些微妙的问题：

```
realloc(key, (pos-temp_str-1)); //allocate enough memory
realloc(data, (pos2-pos)-1);

  ...
strncpy(key, temp_str, (pos-temp_str));
strncpy(data, pos + 2, (pos2-pos)-2); 
```

重新分配的长度是 n-1，但它会将 n 个字符复制到其中。这会更好：

```
key = realloc(key, pos - temp_str + 1);
memset (key, 0, pos - temp_str + 1);  // make sure terminating NUL present

data = realloc(data, pos2 - pos + 1);
memset (data, 0, pos2 - pos + 1);
   ...
strncpy(key, temp_str, pos - temp_str);
strncpy(data, pos + 2, pos2 - pos - 2); 
```

# ios - 在没有 Childbrowser 插件的 iOS 中使用 Phonegap Cordova 打开外部链接

> ID：11192846
> 
> 赞同：0
> 
> 时间：2012-06-25T15:57:48.650
> 
> 标签：ios, cordova, childbrowser

我可以在没有 Childbrowser 插件的情况下在 iOS 中使用 Phonegap Cordova (1.8.1) 打开外部链接吗？

大多数讨论这个话题的教程都已经过时了。

有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:23:15.190

实际上，使用

```
<a href="my-external-url" target="_blank">a link like this</a> 
```

或者

```
window.location.href="my-external-url" 
```

将在 Phonegap Web 视图中打开外部 URL，而不是在浏览器中。如果您按照您的要求进行此操作，那么您已经为所有 phonegap 用户解决了一个非常大的问题。关于这个主题的一些文献。

*   [http://community.phonegap.com/nitobi/topics/make_links_use_external_broswer_consistently](http://community.phonegap.com/nitobi/topics/make_links_use_external_broswer_consistently)
*   [https://build.phonegap.com/blog/access-tags](https://build.phonegap.com/blog/access-tags)
*   [http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:16:59.013

您可以使用 window.open 和“_system”作为窗口名称（[InAppBrowser](http://wiki.apache.org/cordova/InAppBrowser)）

# arrays - 在目录中查找文件夹，然后将它们列为 bash 脚本中的选项

> ID：11192850
> 
> 赞同：0
> 
> 时间：2012-06-25T15:57:54.797
> 
> 标签：arrays, bash

我正在编写一个脚本，以便对本地机器上的开发站点执行一系列操作。这个想法是列出“/var/www/”中的所有文件夹（网站），让用户选择一个来执行后续操作。[我在这里](https://askubuntu.com/questions/1705/how-can-i-create-a-select-menu-in-a-shell-script)找到了这个脚本的一些灵感。

我刚刚开始学习 bash，所以请期待代码中的亵渎：

这是我卡住的地方：

```
#!/bin/bash

cd /var/www
options=( $(find . -maxdepth 1 -type d -printf '%P\n') )
options[$[${#options[@]}+1]]="type a new site"

title="Website developing script"
prompt="Choose the site:"

echo "$title"
PS3="$prompt "
select opt in "${options[@]}" "Quit"; do 

    case "$REPLY" in
        # so far so good, all folders are properly listed as options            

        # the answer, I guess, is placing a loop here in order to change this
        # example line into a list of options, but I can't figure out how
        1 ) echo "You picked $opt which is option $REPLY";;    

    $(( ${#options[@]}+1 )) ) echo "Exiting"; break;;
    *) echo "Invalid option. Try another one.";continue;;

    esac

done 
```

任何提示都是最受欢迎的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:28:06.710

定义处理每种情况的函数。代替 switch case 中的那些 echo 语句，使用所有必需的参数调用适当的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:09:41.473

我建议处理“退出”和“键入新站点”的案例以及在任何选定目录上执行所有操作的一般案例。

以下内容略显骇人听闻。

未经测试。

```
#!/bin/bash

cd /var/www
options=( $(find . -maxdepth 1 -type d -printf '%P\n') )
lastdirindex=${#options[@]}

saveIFS=$IFS
IFS='|'
pattern="^(${options[*]})$" # create a regex that looks like: ^(dir1|dir2|dir3)$
IFS=$saveIFS

options+=("type a new site")
newindex=${#options[@]}
options+=("Quit")
quitindex=${#options[@]}

processchoice () { echo "Do stuff with choice $1 here"; }

title="Website developing script"
prompt="Choose the site:"

echo "$title"
PS3="$prompt "

select opt in "${options[@]}"; do 
    case $([[ $REPLY =~ $pattern ]] && echo 1 || echo "$REPLY") in
        1          )  echo "You picked $opt which is option $REPLY"; processchoice "$REPLY";;
        $newindex  )  read -r -p "Enter a new site" newsite; processchoice "$newsite";;
        $quitindex )  echo "Exiting"; break;;
        *          )  echo "Invalid option. Try another one."; continue;;
    esac
done 
```

# ruby-on-rails - rails - 禁用选择标签

> ID：11192851
> 
> 赞同：5
> 
> 时间：2012-06-25T15:58:03.783
> 
> 标签：ruby-on-rails, form-helpers

我正在尝试禁用选择标签。填充我们的不是数据库属性而是整数数组的选项，因此collection_select 在这种情况下似乎不起作用。

技巧1：

```
select_tag(:zev_qty, options_for_select(display_quantity(@order_subject_supplies_request.site), {:disabled => display_quantity(@order_subject_supplies_request.site)}))

def display_quantity(site)
  if site
    site.open_site? ? [[0,0],[1,1],[2,2]] : [[0,0],[1,1]]
  else
    []
  end
end 
```

以上不是我想要的。它禁用选项而不是选择标签。

技巧2：

```
f.select(:zev_qty, display_quantity(@order_subject_supplies_request.site), {:disabled => true})
  def display_quantity(site)
    if site
      site.open_site? ? [0,1,2] : [0,1]
    else
      []
    end
  end 
```

以上不起作用。没有任何选项被禁用。

虽然在两种情况下都会在下拉菜单中显示正确的值，但不会禁用选择标签，请注意，在此示例中，我只是将禁用设置为 true，但当然我会有条件地禁用选择标签。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:09:38.453

选择方法定义为

```
f.select(method, choices, options = {}, html_options = {}), 
```

所以你的第二次尝试几乎是正确的，除了禁用选项必须在作为第四个参数的哈希中指定，以便作为属性应用于选择标签本身。

# c# - 绘制一系列线条并移动它们

> ID：11192855
> 
> 赞同：0
> 
> 时间：2012-06-25T15:58:16.200
> 
> 标签：c#, .net, graphics, drawing

我想绘制一系列线并移动它们，但我想将第 1 行的终点连接到第 2 行的起点......当我移动第 1 或第 2 行时......另一条线将通过改变它来影响观点

我在这里使用示例 [Graphic - DrawLine - 画线并移动它](https://stackoverflow.com/questions/10768570/graphic-drawline-draw-line-and-move-it?answertab=votes#tab-top)

并在代码中稍作改动以绘制线条

```
void LineMover_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
    e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;

    var pen = new Pen(Color.Black, 2);
    e.Graphics.DrawLine(pen, Lines[0].StartPoint, Lines[0].EndPoint);
    e.Graphics.DrawLine(pen, Lines[0].EndPoint, Lines[2].StartPoint);
    e.Graphics.DrawLine(pen, Lines[2].StartPoint, Lines[2].EndPoint);
} 
```

但是当我移动它们时，我没有想要的东西......有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:28:50.550

您还没有写出您在应用程序中看到的效果，这会很有帮助。但是，查看您提供的代码似乎索引有问题。为了使用后续行，您应该使用 index *0*和 index *1*而不是*0*和*2*。

试试这个代码：

```
void LineMover_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
    e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;

        var pen = new Pen(Color.Black, 2);
        e.Graphics.DrawLine(pen, Lines[0].StartPoint, Lines[0].EndPoint);
        e.Graphics.DrawLine(pen, Lines[0].EndPoint, Lines[1].StartPoint);
        e.Graphics.DrawLine(pen, Lines[1].StartPoint, Lines[1].EndPoint);

} 
```

请让我知道这对你有没有用。如果没有，请提供一些更详细的信息。

另一个问题是如果你只想画两条或更多条连接到它的邻居的线？要绘制更多的线条，您可以考虑使用`Graphics.DrawLines()`方法。它允许您指定定义一组连接线的点数组。可以在此处找到更多信息和示例代码：http: [//msdn.microsoft.com/en-us/library/7ewkcdb3.aspx](http://msdn.microsoft.com/en-us/library/7ewkcdb3.aspx)。

# java - 无法从尚未注册的连接中查找消费者/订阅不存在

> ID：11192856
> 
> 赞同：4
> 
> 时间：2012-06-25T15:58:18.150
> 
> 标签：java, queue, activemq, broker

我运行一个带有两个队列的 ActiveMQ 5.5.1 代理。客户端产生消息（从许多小到一些显着大小）并将它们放入队列 1，消费者从队列中以他们的速度从队列中提取消息（消息预取 = 0）。消息在事务中发送。消费者然后计算一些东西，并在他们完成计算后将答案消息放入队列 2。客户端从该队列中获取应答消息。
持久性是通过 kahaDB 实现的。生产者流量控制已启用，但未达到内存限制。
这工作正常，吞吐量似乎也不是问题。

但是，有时我会在代理上看到以下两个异常。谁能给我一个暗示他们可能是什么意思？我在 ActiveMQ 文档或 Google 中也找不到任何有用的东西。

非常感谢，杰耶夫

```
WARN [ActiveMQ Transport: tcp:///140.39.12.159:40323] (TransportConnection.java:290) - org.apache.activemq.broker.TransportConnection.Service 发生异步错误：java.lang.IllegalArgumentException：subscr
iption 不存在：ID:XYZ:28807:2:1
java.lang.IllegalArgumentException：订阅不存在：ID:XYZ:28807:2:1
        在 org.apache.activemq.broker.region.AbstractRegion.messagePull(AbstractRegion.java:389)
        在 org.apache.activemq.broker.region.RegionBroker.messagePull（RegionBroker.java:557）
        在 org.apache.activemq.broker.BrokerFilter.messagePull(BrokerFilter.java:81)
        在 org.apache.activemq.broker.BrokerFilter.messagePull(BrokerFilter.java:81)
        在 org.apache.activemq.broker.BrokerFilter.messagePull(BrokerFilter.java:81)
        在 org.apache.activemq.broker.MutableBrokerFilter.messagePull(MutableBrokerFilter.java:245)
        在 org.apache.activemq.broker.TransportConnection.processMessagePull(TransportConnection.java:470)
        在 org.apache.activemq.command.MessagePull.visit(MessagePull.java:43)
        在 org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:306)
        在 org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:179)
        在 org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)
        在 org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)
        在 org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:227)
        在 org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)
        在 org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:220)
        在 org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:202)
        在 java.lang.Thread.run(Thread.java:662)

```

和

```
WARN [ActiveMQ Transport: tcp:///140.39.12.159:45179] (TransportConnection.java:290) - org.apache.activemq.broker.TransportConnection.Service 发生异步错误：java.lang.IllegalStateException：无法从未注册的连接：ID:XYZ:31449
java.lang.IllegalStateException：无法从尚未注册的连接中查找使用者：ID：XYZ：31449
        在 org.apache.activemq.broker.SingleTransportConnectionStateRegister.lookupConnectionState(SingleTransportConnectionStateRegister.java:83)
        在 org.apache.activemq.broker.TransportConnection.lookupConnectionState(TransportConnection.java:1423)
        在 org.apache.activemq.broker.TransportConnection.processMessagePull(TransportConnection.java:470)
        在 org.apache.activemq.command.MessagePull.visit(MessagePull.java:43)
        在 org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:306)
        在 org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:179)
        在 org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)
        在 org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)
        在 org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:227)
        在 org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)
        在 org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:220)
        在 org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:202)
        在 java.lang.Thread.run(Thread.java:662)

```

# java - 如何解决 java.lang.StackOverflowError

> ID：11192857
> 
> 赞同：3
> 
> 时间：2012-06-25T15:58:31.453
> 
> 标签：java, mysql

这是我第一次收到此错误。此代码基本上获取在特定日期售出的每件商品的总和。

有关解决此问题的任何提示？谢谢。

> ```
>  Statement statement = connection.createStatement();
>        String query = "SELECT itemcode, SUM(quantity) AS 'Total Sales Per Day' "
>                + "FROM sales "
>                + "WHERE real_pur_date = '" + date + "' "
>                + "GROUP BY itemcode ";
>        ResultSet rs = statement.executeQuery( query ); // this line gets the error / exception
>        while( rs.next() ){
>            Vector row = new Vector();
>            row.add( rs.getString( "itemcode" ) );
>            row.add( rs.getInt( "Total Sales Per Day" ) );
>            dailyData.add( row );
>        }
>        statement.close(); 
> ```

```
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
at com.mysql.jdbc.Util.handleNewInstance(Util.java:431)
at com.mysql.jdbc.ResultSetImpl.getInstance(ResultSetImpl.java:383)
at com.mysql.jdbc.MysqlIO.buildResultSetWithRows(MysqlIO.java:3140)
at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:491)
at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:3118)
at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:2288)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2709)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2627)
at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1556)
at posinventory.Controller.StatisticEngine.getDailyData(StatisticEngine.java:20)
at posinventory.Statistic.refreshTableDailyStat(Statistic.java:36)
at posinventory.Statistic.refreshTableDailyStat(Statistic.java:37)
at posinventory.Statistic.refreshTableDailyStat(Statistic.java:37)
at posinventory.Statistic.refreshTableDailyStat(Statistic.java:37) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T16:06:52.420

我不认为您包含的代码片段是问题所在。查看堆栈跟踪的底部，我看到 Statistic.java:37 显然多次调用自己。允许递归调用，但如果不加以控制，它们会导致堆栈溢出。看起来你有一个循环......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T16:11:48.493

你真的应该从 发布代码`posinventory.Statistic.refreshTableDailyStat`，但我猜一下：在那个方法中，第 36 行调用`StatisticEngine.getDailyData`；第 37 行`refreshTableDailyStat`递归调用 - 所以这是你的问题，`Statistic.java`第 37 行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T16:11:44.223

去除那个 ：：

查询中的字符串“+”，因为 JVM 使用字符串池，对于每种类型的字符串，它都会调用服务来检查该字符串是否存在。

请改用字符串生成器。

删除 Vector 并将其替换为 ArrayList，正如 Steve 上面提到的，检查发生未知递归的代码片段。

# php - 插入 SQL 语句所需的 PHP 变量

> ID：11192859
> 
> 赞同：1
> 
> 时间：2012-06-25T15:58:35.427
> 
> 标签：php, mysql, sql, insert

我已经尝试了几天来获得我希望执行的正确格式。

目标是将行插入到先前创建的 MYSQL 表中。该表可能是字符串和整数的混合，我们知道 MYSQL 需要在字符串周围加上引号才能插入，而整数则不需要。那么，将某些内容插入一个整数和两个字符串的表中的正确方法是：

```
insert into table values(number, "string", "string"); 
```

我希望这些值是 php 变量。但是，当我输入变量时，当我签入 MYSQL 时，代码将不再产生结果。该表将被创建，但它将是空的。所以一定是这个语句不起作用。

这是我插入它的函数的实际代码：

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant)

    $insert = "INSERT INTO ".$new_table. " VALUES (1,'Partner','Merchant')";

    $q = mysqli_query($db, $insert); 
```

它的工作原理是这样的，但我选择的每一行都用 1、合作伙伴和商家填充整个表格。

我也尝试过像这样的几种变体

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant)

    $insert = "INSERT INTO ".$new_table. " VALUES(" .$ID. "," ."'$Partner'". ","."'$Merchant'".")";

    $q = mysqli_query($db, $insert); 
```

我也试过这些：

[将 PHP 变量传递到 MySQL](https://stackoverflow.com/questions/11163074/passing-php-variables-into-mysql)

但没有人真正将表格插入行中。

有没有人有另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:09:19.953

您需要非常简单地开始调试，然后从那里开始工作。我的第一个猜测是您没有正确设置传递给函数的参数值。

尝试这个：

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant) {
  $ID=1;
  $Partner = 'Partner';
  $Merchant = 'Merchant';
  $insert = "INSERT INTO $new_table " .
    " VALUES($ID,'$Partner','$Merchant')";
  $q = mysqli_query($db, $insert);
  if (!$q) die(mysqli_error($db));
} 
```

那样有用吗？如果是这样，那么问题是您的参数值没有正确设置。

请注意，我还在那里添加了一些错误报告；-)

但是请注意，像这样创建 SQL 并不是一个好主意。它对 SQL 注入开放。更好地研究使用准备好的语句：

```
 $prep = mysqli_prepare($db, "insert into " . $new_table . " values (?,?,?)");
  $prep->bind_param("iss", $ID, $Partner, $Merchant);
  $prep->execute(); 
```

有关更多详细信息，请参阅[mysqli_prepare 上的 PHP 文档。](http://www.php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:23:25.317

尝试使用 PDO 准备好的语句。它使参数变得容易：

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant) {
   $host = 'host';
   $user = 'user';
   $password = 'password';
   $pdo = new PDO("mysql:host=$host;dbname=$db", $user, $password);
   $sql = "INSERT INTO $new_table VALUES (:id, :partner, :merchant)";
   $stmt = $pdo->prepare($sql);
   $stmt->bindValue(':id', $ID);
   $stmt->bindValue(':partner', $Partner);
   $stmt->bindValue(':merchant', $Merchant);
   $result = $stmt->execute() || die(var_dump($stmt->errorInfo()));
 } 
```

在这里，$ID、$Partner 和 $Merchant 会自动转义，但您可能需要转义 $new_table 以避免 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:17:03.150

PHP 有一个特性，允许您将变量放入双引号字符串中。尝试运行查询：

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant)
    $insert = "INSERT INTO $new_table VALUES ($ID,'$Partner','$Merchant');";
    $q = mysqli_query($db, $insert); 
```

这样做的原因是 PHP 解析双引号字符串来进行变量替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:05:40.537

您的 INSERT 查询看起来非常接近。我相信您的问题可能是由于没有终止 SQL 语句：

```
$insert = "INSERT INTO " . $new_table . 
   " VALUES(" . $ID . ", '$Partner', '$Merchant');"; 
```

注意额外的分号 (;)，关闭 SQL 语句。

# javascript - 未选中表单元素时如何减去javascript变量的值

> ID：11192862
> 
> 赞同：2
> 
> 时间：2012-06-25T15:58:39.963
> 
> 标签：javascript, jquery, html, forms

请注意，这不是我的代码，也不是表单中的实际代码。这只是我的测试版本，但确实代表了我想要做的事情。

给定以下代码，当未选中复选框时，如何让脚本减去传递的值：

```
<!DOCTYPE html>
<html lang="en">

    <head>
        <title>form test</title>
        <script type="text/javascript" charset="utf-8" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
        <script type="text/javascript">
            function updateAmount(amount) {
                parseInt(amount);
                if ($('#amount').val()) {
                    parseInt(amount);
                    amount = amount + parseInt($('#amount').val());
                }
                $('#amount').val(amount);
                alert('Amount: ' + $('#amount').val());
            }
        </script>
    </head>

    <body>
        <form action="" method="post" name="form-test">
            <input onclick="updateAmount(150)" class="inputbox" id="reservationfee0"
            value="Registration Fee" type="checkbox" />
            <strong>$150</strong>Reservation Fee</form>
    </body>

</html> 
```

就目前而言，编写函数的人没有考虑到人们在提交表单之前可能会选中和取消选中该框（其中包括在提交之前添加到数量变量中的更多字段和其他数字）。由于这个原因，有一些关于超额收费的报告，所以我需要弄清楚如何阻止它发生，但我对 javascript/jquery 知之甚少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:07:45.030

尝试 ：

```
function updateAmount(amount) {
    $amount = $('#amount'); // cache for later use
    if ($('#reservationfee0').is(':checked')) {
        $amount.val(parseInt($amount.val(), 10) + amount);
    } else {
        $amount.val(parseInt($amount.val(), 10) - amount);
    }
}​ 
```

**[这里的工作示例](http://jsfiddle.net/manseuk/JCcuk/)**

这会检查是否`checkbox`使用[`.is()`](http://api.jquery.com/is/)if it is 检查，如果没有减去，则将金额添加到当前值。

另请注意，它`parseInt`需要第二个参数 -`radix`建议您包含此值以确定结果...[此处为 parseInt 的文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:05:26.757

你能试试这个吗

```
 function updateAmount(amount) {
            parseInt(amount);
            if ($('#reservationfee0').prop('checked')) {
                amount = amount + parseFloat($('#amount').val());
            }
         else{
              amount = parseFloat($('#amount').val())-amount;
         }
            $('#amount').val(amount);
            alert('Amount: ' + $('#amount').val());
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:06:50.897

我们可以做的是在我们第一次设置的函数上方定义一个变量。代码如下：

```
 var chk=1;
       function updateAmount(amount) {
            parseInt(amount);
            if ($('#amount').val() && document.getElementById('reservationfee0').checked && chk==1) {
                chk=0;
                parseInt(amount);
                amount = amount + parseInt($('#amount').val());
            }
            $('#amount').val(amount);
            alert('Amount: ' + $('#amount').val());
        } 
```

# android - 文本颜色不会改变 TabWidget

> ID：11192863
> 
> 赞同：2
> 
> 时间：2012-06-25T15:58:45.930
> 
> 标签：android, android-tabhost, textview, android-textattributes

我正在尝试更改`TabWidget`文本颜色，但没有成功，即使我尝试了不同的方法来更改它（参见下面的代码。）

我的背景标签是一张图片：

```
for (int i = 0; i < tabHost.getTabWidget().getTabCount(); i++) {
    tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.TRANSPARENT); 
} 
```

我不知道这是否会与我现在想做的事情产生某种冲突。

**解决方案1：**

主要的.xml

```
....
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/tabbarbackground"
        android:tabStripEnabled="false"            
        style="@style/TabText"
        /> .... 
```

样式.xml

```
... <style name="TabText">
    <item name="android:textColor">@color/tab_text_color</item> </style> .... 
```

tab_text_color.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:textColor="#2daed9" />
    <item android:state_selected="false" android:color="#FFFFFF" />
</selector> 
```

* * *

**解决方案 2**

```
for (int i = 0; i < tabHost.getTabWidget().getTabCount(); i++) {
    tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.TRANSPARENT);         
    RelativeLayout rl = (RelativeLayout) tabHost.getTabWidget().getChildAt(i);
    TextView textView = (TextView) rl.getChildAt(1);
    textView.setTextColor(R.color.tab_text_color);
} 
```

tab_text_color.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:textColor="#2daed9" />
    <item android:state_selected="false" android:color="#FFFFFF" /> </selector> 
```

但两种解决方案都不起作用。

但是，如果我更改第二个解决方案

```
textView.setTextColor (R.color.tab_text_color); 
```

至

```
textView.setTextColor (Color.parseColor ("# ....")); 
```

它有效，除了当我点击它时这个解决方案不会改变文本的颜色。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T19:54:25.897

我能够解决，解决方案并不优雅但有效。我希望谁对某人有用：

首先，我必须为所有选项卡的 textview 设置初始颜色：

```
for (int i = 0; i < tabHost.getTabWidget().getTabCount(); i++) {
    vg = (ViewGroup) getTabHost().getTabWidget().getChildAt(i);
    tv = (TextView) vg.getChildAt(1);
    tv.setTypeface(font);
    if (i == 0) {
        tv.setTextColor(Color.parseColor("#2daed9"));
        Currentab = 0;
    } else {
        tv.setTextColor(R.color.GrisOscuro);
    }
} 
```

然后，我在覆盖方法 ontabchanged 中设置了每个选项卡的更改颜色。脉冲标签是 i (getTabHost().getCurrentTab())。我按下的最后一个标签是 Currentab。

```
getTabHost().setOnTabChangedListener(new OnTabChangeListener() {
    public void onTabChanged(String tabId) {
        int i = getTabHost().getCurrentTab();
        if (Currentab != i) {
            vg = (ViewGroup) getTabHost().getTabWidget()
                    .getChildAt(Currentab);
            tv = (TextView) vg.getChildAt(1);
            tv.setTextColor(R.color.GrisOscuro);

            Currentab = i;
            vg = (ViewGroup) getTabHost().getTabWidget()
                    .getChildAt(i);
            tv = (TextView) vg.getChildAt(1);
            tv.setTextColor(Color.parseColor("#2daed9"));
        }
    }
}); 
```

对不起我的英语，我希望对某人有用=）再见！;D

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T03:34:17.753

在您的**解决方案 2 中**：

```
TabWidget tabwidget=mTabHost.getTabWidget();
for(int i=0;i<tabwidget.getChildCount();i++){
    TextView tv=(TextView) tabwidget.getChildAt(i).findViewById(android.R.id.title);
    tv.setTextColor(this.getResources().getColorStateList(R.color.tab_text_xml));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:27:34.263

尝试编写此方法：

```
public void onTabChanged(String tabId) {

for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
{
TextView tv = (TextView) tabhost.getTabWidget()
.getChildAt(i).findViewById(R.id.your_text_id);
    tv.setTextColor(#FFFFFF); 
```

}

```
TextView tv = (TextView)    tabHost.getTabWidget().
getChildAt(tabHost.getCurrentTab()).findViewById(R.id.your_text_id);

tv.setTextColor(#2daed9);
} 
```

# ruby-on-rails - Rails 中的大型会话 - 不存储在本地数据库中

> ID：11192874
> 
> 赞同：-1
> 
> 时间：2012-06-25T15:59:26.033
> 
> 标签：ruby-on-rails, ruby, session

我正在制作一个有点大的 rails 应用程序，用户在其中填写了许多表格，并为汽车保险报价。报价引擎都是外部的，还有一个外部数据库。

我不需要将会话长期存储在 mysql 或类似的数据库中。

存储这些会话的最佳方式是什么。

CookieStore 是不安全的并且太有限（ <4kb cookie ）。

Memchached 是一种可能性，除了我不喜欢 key => value 对的想法，我希望尽可能多的关联数组。

任何与数据库相关的会话存储对于这些需求都是多余的（？）

某种文件存储系统可能是要走的路？

请有人建议存储会话的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:10:41.917

我不明白为什么这不能由数据库处理。

我建议在处理数据时使用数据库来存储数据，并`Cron job`在非工作时间删除旧记录。

如果涉及*金钱交易*，或其他类型的*数据库交易*，需要以[ACID](https://en.wikipedia.org/wiki/ACID)方式处理您的数据，您应该使用像**PostgreSQL**或类似的数据库。

如果不是这样，而您只是想快速存储一些数据，那么为什么不使用像[MongoDB这样的](http://www.mongodb.org/)**[NoSQL](https://en.wikipedia.org/wiki/Nosql)**解决方案呢？

*此外，作为警告，如果您决定使用文件系统来存储数据，您最终可能会遇到扩展问题，即数据存储在一台服务器上，但请求由另一台服务器处理。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:33:27.577

Memcache 或数据库存储是要走的路。在这两种情况下，随着站点的扩展，您的许多服务器都将能够获取/设置会话数据。

我过去都使用过这两种方法，你应该知道一些事情：

1）两者都可以存储任意数据

Rails 会话被视为哈希，存储的值是该哈希的序列化版本。在 Memcache 中，键 => 值对是 session_id => session_contents。在数据库存储中，您有两列，一列用于 id，另一列用于内容。

2) Memcache 快一点

每一点速度都有帮助；为此，Memcache 将比数据库快一点。

3) Memcache 在填满时倾向于丢弃键

如果您的 Memcache 实例开始耗尽内存，它会开始删除键。它通过首先删除最旧的来做到这一点。由于会话被积极使用，您可以通过在每个请求上勾选会话数据来缓解这种情况；这使它们保持在堆的顶部。但是，如果您的实例真的满了，您可能会开始在地板上丢弃会话并将用户注销。这通常只是在非常快速增长的情况下才会出现的问题，例如如果您被点划线。否则，很容易关注您的 Memcache 服务器并确保您没有耗尽存储空间。

4) 数据库表将很快被过期会话填满 Memcache 会自动丢弃旧的东西。当用户没有注销而只是放弃会话时，您必须在数据库中手动进行清理。通常，这最好通过每天的 cron 作业来完成。如果没有，您最终会得到大量陈旧记录，这会减慢对该表的查询速度。

哪个最适合您？我不知道。这取决于您的情况以及您愿意承担的风险类型。我从来没有遇到过 memcache 会话丢失的问题，但这实际上取决于您使用 memcache 的其他用途。如果您经常使用它，那么第二个仅用于会话的 memcache 实例可能是可行的方法。那么就没有丢弃它们的风险。

# javascript - 是否可以访问函数的闭包？

> ID：11192875
> 
> 赞同：11
> 
> 时间：2012-06-25T15:59:28.403
> 
> 标签：javascript, scope, closures

javascript 中的函数通过保持与其封闭范围的（隐藏）链接来形成闭包。

当我们拥有函数（作为变量值）时，是否可以通过编程方式访问它？

真正的目标是理论上的，但演示可能是列出闭包的属性。

```
var x = (function(){
   var y = 5;
   return function() {
       alert(y);
   };
})();

//access y here with x somehow 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:04:09.773

这是关闭的（一个）目的 - 保持信息的私密性。由于该函数已经被执行，它的作用域变量不再可以从外部获得（并且从来没有）——只有在它的作用域中执行的函数（仍然）可以访问。

但是，您可以通过 getter/setter 授予访问权限。

你可能想看看[Stuart Langridge](http://www.kryogenix.org/code/browser/secrets-of-javascript-closures/)关于闭包的讨论。Douglas Crockfords Explanations 也非常值得推荐。你可以用闭包做很多花哨的东西；）

编辑：您有几个选项来检查闭包：在 webdeveloper 控制台中观察对象，或者（就像我经常做的那样）返回一个调试函数，它将所有私有变量转储到控制台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:06:32.860

不，除非你公开它：

```
var x = function(){
        var y = 5;

        return {             
           getY: function(){
              return y;
          },
          setY: function(newY){
             y = newY;
          }    
       }
   }

    x.setY(4); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T16:08:58.867

您可以编辑警报功能：

```
var x = (function(){
   var y = 5;
   return function() {
       alert(y);
   };
})();

var oldAlert = alert;

alert = function (x) {
    oldAlert(x);
    window.y = x;
}

x();

console.log(y); // 5 
```

或者，如果您拥有代码，则可以使用标准的 getter 和 setter。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-20T11:09:06.737

如果您在前端环境中，并且可以在*先前*的脚本标签中执行自己的 Javascript，则可以选择附加 MutationObserver，等待您要监视的脚本标签插入到文档中，并在插入时立即更改其代码，以便公开您要检查或更改的功能。这是一个例子：

```
<script>
new MutationObserver((mutations, observer) => {
  // Find whether the script tag you want to tamper with exists
  // If you can't predictably identify its location,
  // you may have to iterate through the mutations' addedNodes
  const tamperTarget = document.querySelector('script + script');
  if (!tamperTarget) {
    return;
  }
  observer.disconnect();
  console.log('Target script getting tampered with');
  tamperTarget.textContent = tamperTarget.textContent.replace(
    'return function',
    'window.y = y; return function'
  );
  setTimeout(() => {
    console.log("Hacked into tamper target's script and found a y of", y);
    console.log('Could also have replaced the local y with another value');
  });
})
  .observe(document.body, { childList: true });

</script>

<script>
console.log('Tamper target script running');
var x = (function(){
   var y = 5;
   return function() {
       alert(y);
   };
})();
</script>
```

这可能不是您的想法，但这种方法是侵入闭包的极少数方法之一，当页面运行您无法更改的代码时，这是一种有用的技术。

如果另一个脚本有一个`src`而不是内联代码，那会有点困难。当`<script>`MutationObserver 看到标签时，调整它或用新的脚本标签替换它，该标签`textContent`是原始脚本内容*加上您的修改*。为了获得原始内容，`<script>`在进行所需的替换和插入补丁代码。（或者，如果你有一个服务器，你可以让*服务器*进行文本替换 - 然后，你需要做的就是`src`将插入的脚本标记更改为指向你的服务器而不是默认位置。）

# windows-7 - MSDE .BAK 与 SQL Server 2012 不兼容？

> ID：11192877
> 
> 赞同：1
> 
> 时间：2012-06-25T16:00:01.843
> 
> 标签：windows-7, backup, restore, msde, sql-server-2012-express

我正在尝试将数据库从旧的 MSDE 复制到 SQL Server 2012 Express，因为 Microsoft 决定不使 MSDE 与 Windows 7 兼容。瞧，当我尝试从磁盘恢复 osql 命令时，我收到 8.0 的消息.2055 备份与 SQL Server 2012 不兼容。

如何传输其中的数据库和信息？每一个谷歌结果要么假设我试图降级而不是升级，要么假设它是 xp-xp 转移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T18:10:53.047

我有同样的问题。我使用以下过程来完成任务。

1.  将 MSDE 数据库文件附加到 MSSql 2005。
2.  运行 SSMS，右键单击附加的数据库并选择 PROPERTIES
3.  在对话框中选择 OPTIONS 页面。
4.  在下拉组合框 'COMPATIBILTY LEVEL' 上选择 90
5.  分离数据库文件现在升级到 MSSql 2012
6.  将 MSSql 2005 数据库文件附加到 MSSql 2012。
7.  运行 SSMS，右键单击附加的数据库并选择 PROPERTIES
8.  在对话框中选择 OPTIONS 页面。
9.  在下拉组合框 'COMPATIBILTY LEVEL' 上选择 110
10.  分离数据库文件。
11.  您的 MDB 文件现在是 2012（级别 110）数据库文件

希望这可以帮助...

# c# - new() 在方法中

> ID：11192879
> 
> 赞同：4
> 
> 时间：2012-06-25T16:00:06.843
> 
> 标签：c#, generics

有这些课程：

```
public interface IDbContextFactory
{
    DbContext GetContext();
}

public class Repo<T> : IRepo<T> where T : Entity, new()
{
    protected readonly DbContext c;
}

public Repo(IDbContextFactory f)
{
    c = f.GetContext();
} 
```

关键字`new()`(in `class Repo<T>`) 有什么作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T16:01:57.837

这意味着该类型`T`必须公开一个公共的、默认的（即无参数的）构造函数。也就是说，您将能够构造`T`with的实例`new T()`。它也可以公开其他构造函数，但是这种通用约束使默认约束成为强制性的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:02:19.540

这意味着，实体应该有一个无参数的公共构造函数。

看到[这个。](http://msdn.microsoft.com/en-us/library/sd2w2ew5%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:09:01.327

当您`where`在泛型定义上使用关键字时，您将类型约束应用于泛型参数。`new()`约束声明该类型，在`T`这种情况下，必须有一个默认构造函数。[http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)

* * *

在阅读了[伪装成答案的说明](https://stackoverflow.com/a/11193343/659190)后，我想我会尝试通过澄清几件事来提供帮助。

您原始问题中的代码定义了一个似乎由无实体构造函数使用的接口。在这两个定义之间，您定义了一个似乎没有多大作用的泛型类。

您的问题与通用类有关，其他两个定义与问题和答案无关。

# linq - Linq：处理空表

> ID：11192881
> 
> 赞同：0
> 
> 时间：2012-06-25T16:00:13.440
> 
> 标签：linq

你如何处理 LINQ 中的空表/NullReference？

我的代码中有以下 Linq 语句：

```
List<FeaturedTrack> features = _db.FeaturedTracks.Where(f => (f.FeatureStartDate >= DateTime.Now && f.FeatureEndDate <= DateTime.Now) ||
                                                                     (f.FeatureStartDate == null && f.FeatureEndDate == null))
                                                             .ToList<FeaturedTrack>(); 
```

我的表目前是空的，现在我知道这个表不会是空的，但这让我想知道如何处理 NullReference 错误，以防万一。

我试过这个：

```
int test = _db.FeaturedTracks.Count();
if (test > 0)
{
   ...
} 
```

但是我的代码在第一行中断，那么在运行语句之前如何检查表是否为空？

# jquery - jQuery - 样式复选框，替换为图像

> ID：11192883
> 
> 赞同：5
> 
> 时间：2012-06-25T16:00:15.463
> 
> 标签：jquery, html, css

我需要这个脚本来隐藏我的复选框并放置一个样式复选框的图像来代替它。它正确隐藏它并显示默认图像，但是一旦我单击它，它不会将复选框更新为选中或未选中，也不会更新图像。我假设这是我忽略的一件简单的事情，我还是 jQuery 的新手。

这是脚本：

```
 $(".check").each(function() {
            $(this).hide();

            var $image = $("<img src='assets/images/layout/checkbox/unchecked.png' />").insertAfter(this);    

            $image.click(function() {
                var $checkbox = $(this).prev(".check");
                $checkbox.prop('checked', !$checkbox.prop('checked'));

                if($checkbox.prop("checked")) {
                    $image.attr("src", "assets/images/layout/checkbox/checked.png");
                } else {
                    $image.attr("src", "assets/images/layout/checkbox/unchecked.png");
                }
            })
        }); 
```

这是HTML：

```
<input type="checkbox" class="check" /> 
```

编辑：另外，这通常是样式复选框的最佳方法吗？我似乎找不到比这更容易的任何东西，所以任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:04:31.140

原来我使用的是过时的 jQuery 版本，这就是问题所在。我更新到 1.7.2，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:32:23.440

你也可以使用这个名为[Zebra_Transform](http://stefangabos.ro/jquery/zebra-transform/)的 jQuery 插件，它可以转换页面上的所有复选框、单选按钮和选择框，它非常小 (3KB)，适用于所有主流浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:13:47.677

我尝试了几种解决方案，最好的选择似乎是： [http](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/) ://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/ 它很简单而且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-20T21:53:23.677

知道这是一个较旧的线程 - 但需要一个将复选框转换为图像的解决方案 - 这是最好的答案。:) 所以对其进行了一些重构并想分享。

```
function setCheckboxImageSrc(checkbox, image, checkedUrl, uncheckedUrl) {
    if (checkbox.is(":checked")) {
        image.attr("src", checkedUrl);
    } else {
        image.attr("src", uncheckedUrl);
    }
}

function setCheckboxImage(checkboxObj, className, checkedUrl, uncheckedUrl) {
    checkboxObj.hide();

    var $image = $("<img src='" + checkedUrl + "' />").insertAfter(checkboxObj);
    setCheckboxImageSrc(checkboxObj, $image, checkedUrl, uncheckedUrl);

    $image.click(function () {
        var $checkbox = $image.prev("." + className);
        $checkbox.click();
        setCheckboxImageSrc($checkbox, $image, checkedUrl, uncheckedUrl);
    });
}

$(".checkboxUp").each(function () {
    setCheckboxImage($(this), "checkboxUp", "../../../images/DirectionUpChecked.png", "../../../images/DirectionUpUnchecked.png");
});

$(".checkboxDown").each(function () {
    setCheckboxImage($(this), "checkboxDown", "../../../images/DirectionDownChecked.png", "../../../images/DirectionDownUnchecked.png");
}); 
```

# java - 用java获取Mysql数据库创建日期

> ID：11192885
> 
> 赞同：3
> 
> 时间：2012-06-25T16:00:25.520
> 
> 标签：java, mysql, database

在 Windows (Wamp) 上使用 mysql 5.5.2 我正在编写一个使用多个数据库的 Java 应用程序。我想列出数据库名称及其创建日期。数据库具有同一张表的唯一数据不同（档案）。Java有什么技巧吗？

编辑：

```
mysql> show databases;
+-------------------------+
| Database                |
+-------------------------+
| information_schema      |
| formaction_archive_test |
| mysql                   |
| performance_schema      |
| sw_formaction           |
| test                    |
+-------------------------+
6 rows in set (0.00 sec) 
```

“formaction_archive_test”和“sw_formaction”都是由我“root”创建的，它们有相同的表。我的问题是如何获得他们各自的创建日期。

我找到了这个解决方案：

```
mysql> use information_schema;
Database changed
mysql> SELECT table_name, create_time
    -> FROM tables
    -> WHERE table_schema NOT IN('mysql', 'information_schema') ;
+----------------------------------------------+---------------------+
| table_name                                   | create_time         |
+----------------------------------------------+---------------------+
| cond_instances                               | NULL                |
| events_waits_current                         | NULL                |
| events_waits_history                         | NULL                |
| events_waits_history_long                    | NULL                |
| events_waits_summary_by_instance             | NULL                |
| events_waits_summary_by_thread_by_event_name | NULL                |
| events_waits_summary_global_by_event_name    | NULL                |
| file_instances                               | NULL                |
| file_summary_by_event_name                   | NULL                |
| file_summary_by_instance                     | NULL                |
| mutex_instances                              | NULL                |
| performance_timers                           | NULL                |
| rwlock_instances                             | NULL                |
| setup_consumers                              | NULL                |
| setup_instruments                            | NULL                |
| setup_timers                                 | NULL                |
| threads                                      | NULL                |
| annee                                        | 2012-06-06 16:19:04 |
| categorie                                    | 2012-06-06 16:19:04 |
| certification                                | 2012-06-06 16:19:04 |
| client                                       | 2012-06-06 16:19:04 |
| clientold                                    | 2012-06-06 16:19:04 |
| connaisance_ecole                            | 2012-06-06 16:19:04 |
| duree                                        | 2012-06-06 16:19:04 |
| eleve                                        | 2012-06-06 16:19:04 |
| famille                                      | 2012-06-06 16:19:04 |
| formateur                                    | 2012-06-06 16:19:04 |
| formation                                    | 2012-06-06 16:19:04 |
| inscription                                  | 2012-06-06 16:19:04 |
| lieux                                        | 2012-06-06 16:19:05 |
| lst_formation                                | 2012-06-06 16:19:05 |
| moyen_paiement                               | 2012-06-06 16:19:05 |
| paiement                                     | 2012-06-06 16:19:05 |
| session                                      | 2012-06-06 16:19:05 |
| souhait                                      | 2012-06-06 16:19:05 |
| souhaits                                     | 2012-06-06 16:19:05 |
| type_certification                           | 2012-06-06 16:19:05 |
+----------------------------------------------+---------------------+
37 rows in set (0.01 sec) 
```

但它只向我显示了最后创建的数据库信息。可能的解决方案是查看文件创建日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:34:58.303

应该是这个要求得到它：

```
SELECT table_name, create_time 
FROM information_schema.tables 
```

您可以删除`information_schema`和`mysql`模式以获取您创建的模式：

```
SELECT table_name, create_time 
FROM information_schema.tables 
WHERE table_schema NOT IN('mysql', 'information_schema') 
```

编辑 ：

要获得数据库创建时间，唯一的方法是检查最旧的表：

```
SELECT MIN(create_time)
FROM INFORMATION_SCHEMA.TABLES WHERE table_schema = 'my_database' 
```

如果你愿意，你可以在你的数据库中插入一个无用（或没有）的表，比如`_config`，它永远不会被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:12:30.890

我不确定 Java 中是否有特定的技巧可以提供帮助，但检查`INFORMATION_SCHEMA_TABLES`此处引用的表：http: [//dev.mysql.com/doc/refman/5.0/en/tables-table.html](http://dev.mysql.com/doc/refman/5.0/en/tables-table.html)可能会有所帮助。可能取所有表的最小创建时间，并将其用作数据库创建时间？

AFAIK，没有办法检查何时使用纯 SQL 创建数据库。

# continuous-integration - 在 TeamCity 中显示 NCover 覆盖率报告

> ID：11192888
> 
> 赞同：1
> 
> 时间：2012-06-25T16:00:38.640
> 
> 标签：continuous-integration, teamcity, code-coverage, ncover

我正在使用 TeamCity 7 运行 NCover 3。TeamCity 正在启动覆盖过程，我可以在我的文件目录中找到用于构建的 fullcoveragereport.html，但是 TeamCity 没有为覆盖创建选项卡。

我无法在 TeamCity 中查看此 Ncover fullcoveragereport.html。我认为这与我的报告选项卡设置有关，在起始页部分下，它显示“从构建工件的根目录到生成报告的起始页的相对路径。要从存档中引用文件，请使用 [path -to-archive]![relative-path] 语法。” 这是对构建服务器机器的引用吗，也就是说，我想将它从 .buildserver 文件夹指向 coverage.zip 文件夹？

我现在得到一个“这是一个自动生成的索引文件（在生成的报告中没有找到 index.html）。” 在报道选项卡中，我想我已经接近了......

有什么想法，或者我可能错过的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:27:24.747

因此，似乎使用了许多误读的文档并将 // 作为参数。他们还输入了 FullCoverageReport:Html:{teamcity.report.path}。

实际上，它应该是一整根带有 or 的字符串，这会让一些人失望。

```
//or FullCoverageReport:Html:{teamcity.report.path} 
```

在这种情况下（我不是 100% 确定原因），这仍然不起作用。我很高兴地发现

```
//or Summary:Html:{teamcity.report.path} 
```

将工作。它不像完整的 NCover 报告那样冗长，但它胜过一个空的 index.html 文件。

*   事实证明，带有 NCover 3 和 TeamCity 7 的 FullReport 存在问题，请在下面阅读更多相关信息。 [http://youtrack.jetbrains.com/issue/TW-20635](http://youtrack.jetbrains.com/issue/TW-20635)

我将尝试其他一些报告命令（见下文），看看我是否可以制作一个临时的 FullCoverageReport 就足够了。 [http://docs.ncover.com/kb/reports-available-in-ncover-classic-and-ncover-complete/](http://docs.ncover.com/kb/reports-available-in-ncover-classic-and-ncover-complete/)

# jquery - 在jQuery中拖动+滚动

> ID：11192891
> 
> 赞同：0
> 
> 时间：2012-06-25T16:00:41.350
> 
> 标签：jquery, jquery-ui

使用 jquery.Draggable 及其选项`containment`，我能够在包装器中设置一个可拖动的框。假设包装器大小为 1000 x 1000 像素，我想将它放在一个只有 100 x 100 像素大且带有溢出的视口 div 中：滚动集。

如何使我的 10x10px 框的拖动使内部 div 在向其边距拖动时在视口 div 内滚动？

我试过滚动选项，但没有用。

澄清：

![在此处输入图像描述](../Images/08dfebc5cd9a1d374e70167f84614220.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:11:47.040

在 Draggable 文档中查看此示例：http: [//jqueryui.com/demos/draggable/#scroll](http://jqueryui.com/demos/draggable/#scroll)它准确地描述了您的情况；）

顺便说一句，照片不错！

# php - 使用 Facebook API 向用户墙发布图像和评论的简单方法

> ID：11192892
> 
> 赞同：0
> 
> 时间：2012-06-25T16:00:42.653
> 
> 标签：php, javascript, facebook, facebook-graph-api

我只是想将我自己网站上的图像和评论发布到 facebook 用户自己的墙上。

我已经查看了各个地方并通过 Facebook API 文档，但找不到实现应该是基本任务的直接方法。

FB 自己的文档似乎过于复杂。我已经设置了应用程序，以及图形 API 选项卡中的对象、操作和聚合，但似乎无法得到我想要的。

任何人都可以提出一种方法或文章，概述允许我传递评论和图像参数的正确程序，或者比 FB 自己的文档更好地解构问题的文章。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:11:47.800

在 developer.facebook.com 后端创建一个应用程序，并在下面的适当位置填写您的 APP ID。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">  
    <title>Facebook Sharer</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

    <script>
    $(function() 
    {

        $('#share_button').live('click', function(e)
        {
            e.preventDefault();

            var share_name          = $('input[name="share_name"]').val();
            var share_link          = $('input[name="share_link"]').val();
            var share_image         = $('input[name="share_image"]').val();
            var share_caption       = $('input[name="share_caption"]').val();
            var share_description   = $('input[name="share_description"]').val();

            var share_redirect      = $('input[name="share_redirect"]').val();

            FB.ui(
            {
                method:         'feed',
                name:           share_name,
                link:           share_link,
                picture:        share_image,
                caption:        share_caption,
                description:    share_description
                //message:      ''
            },
            function(response) 
            {
                if (response && response.post_id) 
                {
                    //alert('thanks for sharing!');
                    window.top.location.href = share_redirect;
                } 
                else 
                {
                    //alert('Post was not published.');
                }
            });

            // return false;

        });

    });
    </script>

</head>
<body>

<div id="share_button">share me!</div>

<input type="text" name="share_name" value="Boffins" />
<input type="text" name="share_link" value="http://google.com"/>
<input type="text" name="share_image" value="http://sstatic.net/stackoverflow/img/tag-logo-facebook.png"/>
<input type="text" name="share_caption" value="Yes"/>
<input type="text" name="share_description" value="sadfdsdsfasdaffdasfds"/>

<input type="text" name="share_redirect" value=""/>

<div id="fb-root"></div>

<script type="text/javascript">

window.fbAsyncInit = function()
{
    FB.init({
        appId   : [APP ID],
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true  // parse XFBML
    });

};

(function() 
{
    var e = document.createElement('script');
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
}());

</script>

</body>
</html> 
```

# php - 在 SugarCRM 工作流程中更改到期日期确实会向测试管理员发送邮件

> ID：11192893
> 
> 赞同：0
> 
> 时间：2012-06-25T16:00:43.190
> 
> 标签：php, workflow, sugarcrm

我在任务模块上定义的 SugarCRM 中定义了一个工作流，当我创建新任务时它可以完美运行，自动将邮件发送给测试管理员。但是，如果我编辑相同的任务或任何其他先前定义的任务以增加到期日期，则不会向测试管理员发送邮件。你能解释一下这是 SugarCRM 的默认行为吗，或者我在某些时候出错了。我的调度程序每隔 5 分钟运行一次。

有关更多详细信息，请检查下面提供的图像：

![工作流程定义屏幕](../Images/fd57a5748a7616e4a2eabdf7dd6c56f6.png)

在这方面的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:33:44.343

这取决于所使用的 Sugar 版本。某些版本存在未正确触发超时工作流的错误。

# java - PDF 到图像转换时出现 NullPointerException

> ID：11192898
> 
> 赞同：4
> 
> 时间：2012-06-25T16:01:07.233
> 
> 标签：java, image, pdf, nullpointerexception, pdfbox

当我在玩 pdfbox 1.7.0 (apache) 时，我遇到了一个`NullPointerException`. 我无法弄清楚我的代码有什么问题。您可以`Exception`在[http://pastebin.com/XEuv7VmU](http://pastebin.com/XEuv7VmU)和此处的代码中查看完整的堆栈跟踪：http: [//pastebin.com/vJYBwWtq](http://pastebin.com/vJYBwWtq)。

我只想将 PDF 的每一页转换为图像 ( `BufferedImage`)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:19:29.567

要么我遗漏了一些明显的东西，要么库中存在错误。`Type3StreamParser`扩展`PDFStreamEngine`有以下方法：

```
public Image createImage( COSStream type3Stream ) throws IOException
{
    processStream( null, null, type3Stream );
    return image.createImage();
} 
```

它调用`processStream()`定义如下的基类：

```
public void processStream( PDPage aPage, PDResources resources, COSStream cosStream ) throws IOException
{
    graphicsState = new PDGraphicsState(aPage.findCropBox());
    //...
} 
```

显然，这段代码总是会抛出 NPE。如果您没有以某种方式滥用 API，请考虑[报告问题](https://issues.apache.org/jira/browse/PDFBOX)。

# python - Django会话：修改时更改会话密钥

> ID：11192904
> 
> 赞同：3
> 
> 时间：2012-06-25T16:01:33.077
> 
> 标签：python, django, session, cookies, session-cookies

我正在设置支付网关并使用会话跨页面请求存储数据。下面的类用于组织和存储会话信息。

```
class Gateway:
  def __init__(self, session_key=None, session_name="FOO"):
    # Store session ID and name
    self.session_key    = session_key
    self.session_name   = session_name

    # Get the session
    session = SessionStore(session_key=self.session_key)

    try :
      data = session[self.session_name]
    except :
      data  = {user_id:None, checked_in:False }

    self.__dict__.update(data)

  def save(self) :
    session = SessionStore(session_key=self.session_key)
    session[self.session_name] = deepcopy(self.__dict__)
      try :
        del session['session_key']
        del session['session_name']
      except :
        pass
    session.save() 
```

此视图检查用户是否已登录。如果他/她已登录，则将他/她重定向。如果没有，他/她被要求以访客身份登录或登记。

```
def check_in(request):
  gateway = Gateway(session_key=request.session.session_key)

  if request.user.is_authenticated():
    gateway.user_id = request.user.id
    gateway.checked_in = True
    gateway.save()

    return redirect('next_step')
  else:
    login_form = FormLogin()
    if request.POST:
      data = request.POST.copy()
      if 'login' in data:
        login_form = FormLogin(data)
        if login_form.is_valid():
          user = login(request, login_form)
            if user:
              gateway.user_id = user.id
              gateway.checked_in = True
              gateway.save()
              return redirect('next_step')
        elif 'guest' in data:
          gateway.checked_in = True
          gateway.save()
          return redirect('next_step')
    return render(
      request,
      'shop/login.html',
      {
        'login_form':login_form,
      }
    ) 
```

下一个视图检查“checked_in”变量。这是为了确保用户不会跳过登录/签入过程。（作为旁注，函数“login（request，login_form）”是一个在其他上下文中完美运行的函数，如果成功则返回用户，否则返回 None）

```
def next_step(request):
  gateway = Gateway(session_key=request.session.session_key)

  if not gateway.checked_in:#edited 
    messages.info(request, _(u'You must specify login first.'))
    return redirect('check_in')
  else:
    #do the next step 
```

现在解决问题：

即使用户通过身份验证，“checked_in”变量仍然为假，并导致视图循环。每次我设置变量并保存时，都会创建一个具有新会话 ID 的新会话。django 文档对会话的修改有一些解释，但我不明白为什么要创建新会话或会话密钥发生变化的原因。

编辑：我正在使用数据库后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:08:46.580

如果尚未访问或修改数据库，Django 不会将会话持久化，因此我相信您用于初始化 SessionStore 的 session_key 实际上并没有数据库条目的支持。

如果是这种情况：当您保存 SessionStore 时，它​​将自动分配一个新的 session_key [1]（因为数据库中不存在现有密钥，我们希望避免会话固定 [2]）并保存到数据库，但是客户端将不会被分配这个新的 session_key，因为您的 SessionStore 独立于 request.session （保持未修改）。

[1] [https://github.com/django/django/blob/master/django/contrib/sessions/backends/db.py#L22](https://github.com/django/django/blob/master/django/contrib/sessions/backends/db.py#L22)

[2] [https://groups.google.com/forum/?fromgroups#!topic/django-users/8b_6oTaXv7Q](https://groups.google.com/forum/?fromgroups#!topic/django-users/8b_6oTaXv7Q)

测试这个假设的简单修复方法是在初始化 Gateway 类之前设置 request.session['kate'] = 'bob' ，因为这应该强制 request.session 被持久化。您可能希望重构 Gateway 类，以便需要访问会话的方法将 request.session 作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:37:14.113

我已经复制了这个错误/问题：

网址规则

```
url(r'^test/', 'shop.views.catalog.test', name="test") 
```

查看功能

```
def test(request) :
    key1 = request.session.session_key
    request.session['test'] = 'test'
    key2 = request.session.session_key

    raise Exception("%s : %s === %s" % (key1, key2, request.session['test'])) 
```

1.  清除 127.0.0.1 的 cookie
2.  转到 127.0.0.1:8000/test/
    *   /test/ 4793f2453758d7021a43a348a0f40a83 的异常：8568f729991e740395179c56cd37cf18 === 测试
3.  刷新页面（不清除 cookie）
    *   /test/ 8568f729991e740395179c56cd37cf18 的异常：8568f729991e740395179c56cd37cf18 === 测试

所以在第一次修改我的会话之前，我有一个不同的会话密钥......意外行为。我也很好奇为什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-23T14:10:42.543

检查您的`SESSION_COOKIE_SECURE`值并确保您在...时使用**HTTPS**`True`

[https://github.com/lepture/flask-wtf/issues/76](https://github.com/lepture/flask-wtf/issues/76)

# xcode - 如何将沙盒权利添加到可可捆绑项目

> ID：11192905
> 
> 赞同：1
> 
> 时间：2012-06-25T16:01:35.710
> 
> 标签：xcode, npapi, sandbox

有谁知道如何将沙盒权利添加到特殊的 xcode 项目，如可可捆绑项目？

我有一个正在开发的 Safari 插件，它是在 xcode 中以捆绑项目类型创建的。编译后的代码在 Snow Leopard 上运行良好，而在 Lion 上却失败了。通过调试发现socket打不开！Google 告诉我 Lion 上的应用程序应具有沙盒权利，并将网络相关密钥设置为 YES 以获得网络可访问性。

可可应用程序非常容易，但结果却阻止了我使用插件，因为它不是应用程序而是捆绑项目！

如果有人可以分享您的经验，请不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:55:44.207

最后我发现套接字连接失败与沙盒权利无关。它是由无效的主机地址引起的。NPAPI 作为字节传入字符串。它没有 NULL 终止符，您应该使用 memcpy 和 UTF8Length 来复制数据。我正在使用 strcpy 获取主机地址，这会产生无效值。

# php - 在 Wordpress 的自定义 php 模板中调用函数

> ID：11192907
> 
> 赞同：0
> 
> 时间：2012-06-25T16:01:38.987
> 
> 标签：php, wordpress, wordpress-theming

我想调用我在 Wordpress 中编写的另一个 php 类中的函数。但是我对语法感到困惑，例如要获取页面上的标题，您只需调用 get_header(); 等但是我如何调用特定类中的函数？例如，在 index.php 中，我想调用一个名为 this_function() 的函数，该函数位于 test.php 中。这个的语法是什么？

我怀疑它非常简单，但我无法正确使用语法，也无法在线提供任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:07:25.273

首先使用`require_once()`包含test.php，即

```
require_once("path\test.php"); 
```

然后你可以简单地打电话`this-function()`，它会工作。

您可以将此作为参考： [http ://www.php.net/manual/en/function.require.php](http://www.php.net/manual/en/function.require.php)

# module - Biopython，PYTHONPATH，寻找模块的问题

> ID：11192908
> 
> 赞同：1
> 
> 时间：2012-06-25T16:01:39.907
> 
> 标签：module, pythonpath, biopython

我安装了 Biopython，但我无法让计算机识别模块。例如，我在 Komodo 中创建一个文本文件，如下所示：

```
from Bio.Alphabet import IUPAC
from Bio import Seq
my_prot=Seq.Seq("AGTACACTGGT",IUPAC.protein) 
```

并在终端运行它并接收：

```
Traceback (most recent call last):
  File "bio.py", line 1, in <module>
    from Bio.Alphabet import IUPAC
ImportError: No module named Bio.Alphabet 
```

作为记录，我也无法以交互模式导入模块。文档指出，我可以通过导出到名为 PYTHONPATH 的环境变量（与 PATH 一样）来附加模块搜索路径，但是当我在终端中键入“env”时，我看不到这种环境变量。我是生物学家——不是计算机科学家或程序员。如果这听起来像胡说八道，请容忍我的天真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:06:26.787

您必须找到您需要的模块所在的目录（Bio），然后将该目录的路径添加到`PYTHONPATH`.

```
$ export PYTHONPATH=/usr/local/bio-python/ 
```

而不是`/usr/local/bio-python/`您必须指定您找到的路径。

要找到模块，您必须使用类似的东西：

```
$ find / -name \*Bio\* 
```

这只是一个例子。当然如果你能提供一些额外的信息会更好（例如你在哪里安装了模块等等）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T16:06:38.987

按开始按钮，右键单击我的电脑，选择属性，进入高级，单击环境变量。然后找到您的路径变量，并通过添加分号，然后是您的路径来编辑它。比如我现在的路径变量是“C:\Program Files\Java\jdk1.7.0_02\bin”，我可以改成“C:\Program Files\Java\jdk1.7.0_02\bin”；（把路径放在这里）”

# objective-c - UIManagedDocuments 获取新数据后 NSFetchedResultsController 不更新 TableView

> ID：11192916
> 
> 赞同：1
> 
> 时间：2012-06-25T16:02:20.613
> 
> 标签：objective-c, ios, core-data, ios5, nsfetchedresultscontroller

我将 a与在后台线程中更新的a`NSFetchedResultsController`结合使用。`UIManagedDocument`

我已经完全按照本教程中的描述设置了 NSFetchedResultsController：[如何使用 NSFetchedResultsController](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

我已将`_fetchedResultsController.delegate = self`视图控制器的委托和协议设置为`NSFetchedResultsControllerDelegate`.

我的代码在启动后加载数据时工作正常。但是，只要在后台线程中处理并保存了数据，它就`NSFetchedResultsController` **不会更新 TableView 。**特别是，NSFetchedResultsController 的委托方法`-controllerWillChangeContent:controller`等永远不会被调用。

我已经仔细检查了 SQLite 数据库是否正确包含数据。这就是我在视图控制器中处理和保存数据的方式：

```
[backgroundContext performBlock:^{
        [company parseAttributesFrom:xmlStr inManagedObjectContext:backgroundContext]; //self.managedDocument.managedObjectContext

        NSError *error = nil;
        [backgroundContext save:&error];
         if (error) NSLog(@"error: %@",error.localizedDescription);
        [self.managedDocument.managedObjectContext performBlock:^{
            NSError *error = nil;
            [self.managedDocument.managedObjectContext save:&error];
            if (error) NSLog(@"error: %@",error.localizedDescription);
        }];
        [self.managedDocument saveToURL:self.managedDocument.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
        [self.managedDocument updateChangeCount:UIDocumentChangeDone];
    }]; 
```

当底层数据发生变化时，如何让 NSFetchedResultsController 自动更新 TableView？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:12:38.850

我认为原因在于 managedObjectContext。您在后台进行更改，并`NSFetchedResultsController`从主要的获取。因此，您需要通过添加上下文更改的观察者来合并对该上下文的更改

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(contextChanged:) name:NSManagedObjectContextDidSaveNotification object:nil]; 
```

这是 Marcus Zarra 的一个很棒的教程 - 核心数据大师）希望有所帮助。 [http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:58:05.320

我建议，在使用 UIManagedDocument 时，将背景上下文设为主上下文的子上下文。

```
backgroundContext = [[NSManagedContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
backgroundContext.parent = self.managedDocument.managedObjectContext; 
```

现在，你可以在后台上下文中做你想做的事，当你想保存后台上下文时，更改将被填充到主上下文中。当然，您仍然需要保存 UIManagedDocument，但这是通过设置 ChangeDone 计数再次在后台“无缝”完成的。

```
[backgroundContext performBlock:^{
    [company parseAttributesFrom:xmlStr inManagedObjectContext:backgroundContext]; //self.managedDocument.managedObjectContext

    NSError *error = nil;
    [backgroundContext save:&error];
     if (error) NSLog(@"error: %@",error.localizedDescription);

    // NOTE: Now, the changes have been pushed into the main context of your document.
    // DO NOT call save directly on the managed document context.
    [self.managedDocument.managedObjectContext performBlock:^{
        [self.managedDocument updateChangeCount:UIDocumentChangeDone];
    }];
}]; 
```

现在，您的背景上下文消失了，您的主要上下文看到了更改，并且保存了文档。

# php - Html 选项名称在不同的选择项处更改

> ID：11192921
> 
> 赞同：0
> 
> 时间：2012-06-25T16:02:45.467
> 
> 标签：php, javascript, jquery, mysql

我正在用 PHP 和 Mysql 创建一个网站。下面有一个上传表格：

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" 
enctype="multipart/form-data" accept-charset="utf-8">

<table width="900" border="0" cellspacing="10" cellpadding="0">
<tr>
<td width="150">Medium</td>
<td>
<select class="td" name="medium">
    <option selected="selected" value="">Select..</option>
    <?php

    $sql = mysql_query("SELECT * FROM medium WHERE s_id = 0");
    while($re = mysql_fetch_array($sql))
    {
        $re_medium = 
mysql_real_escape_string(trim($re['name']));        
        $sel2 = '';
        if($re_medium == $_POST['medium'])
        {
            $sel2 = 'selected = "selected"';    
        }   
        echo "<option value='$re_medium'".$sel2."> $re_medium 
</option>";         
    }
    ?>  
</select>
</td>
</tr>
<tr>
<td>Class</td>
<td>
<select class="td" name="class">
    <option selected="selected" value="">Select..</option>
    <?php        
    $sql2 = mysql_query("SELECT * FROM class");
    while($re2 = mysql_fetch_array($sql2))
    {
        $re_class = 
mysql_real_escape_string(trim($re2['c_name']));         
        $sel = '';
        if($re_class == $_POST['class'])
        {
            $sel = 'selected = "selected"'; 
        }   
        echo "<option value='$re_class'".$sel."> $re_class 
</option>";         
    }
    ?>  
</select>
</td>
</tr>

<tr>
<td>Subject</td>
<td>
<select class="td" name="subject">
    <option selected="selected" value="">Select..</option>
    <?php        
    $sql2 = mysql_query("SELECT * FROM subject");
    while($re2 = mysql_fetch_array($sql2))
    {
        $re_class = 
mysql_real_escape_string(trim($re2['subject_name']));       
        $sel = '';
        if($re_class == $_POST['subject'])
        {
            $sel = 'selected = "selected"'; 
        }   
        ?>
         <option value="<?php echo $re2['id'] . '|' . $re2['subject_name'] ?>" <?php 
echo $sel; ?>><?php echo $re2['subject_name'] ?></option>   
        <?php
        //echo "<option value='$re_class'".$sel."> $re_class    
</option>";         
    }
    ?>  
</select>
</td>
</tr>
</table>
</form> 
```

好吧，所以我的问题是，有没有办法在不同的选择项目上显示不同的选项名称。

例如：如果我从 html Select 标签中选择**英文名称，那么所有****的类**名都应该显示在这个类别下，然后如果我从**Class name 中选择****O 级别**，那么所有的主题都应该显示在这个类别下。只是动态变化！

 **对不起我的英语不好。谢谢你。**

# c# - Html 作为对 jQuery ajax 调用的响应返回

> ID：11192923
> 
> 赞同：0
> 
> 时间：2012-06-25T16:02:54.640
> 
> 标签：c#, jquery, asp.net

我的 jQuery 函数正在进行 ajax 调用（GET 请求），它必须返回 HTML，然后我将在成功事件中将其注入页面。

我必须在 HTML 中转义什么以确保没有任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:35:00.393

查找 jQuery 的 load 方法，这将完成您想要的所有操作，而无需额外的解析。

来自 Visual jQuery (www.visualjquery.com)：

> 在 jQuery 1.2 中，您现在可以在 URL 中指定 jQuery 选择器。这样做将过滤传入的 HTML 文档，只注入与选择器匹配的元素。语法类似于“url #some > 选择器”。有关更多信息，请参阅示例。
> 
> 返回：jQuery
> 
> 参数：
> 
> url (String): 要加载的 HTML 页面的 URL。数据（映射）：将发送到服务器的键/值对。回调（Callback）：ajax请求完成时调用的函数（不一定成功）。函数（responseText，textStatus，XMLHttpRequest）{
> 这个；// dom 元素 } 示例
> 
> 将一段文档侧边栏导航加载到自定义无序列表中。
> 
> jQuery 代码
> 
> `$("#links").load("/Main_Page #p-Getting-Started li");`

给出的示例将加载 url /Main_Page，提取 ID p-Getting-Started 内每个 LI 内的内容，并将它们直接插入页面中的 ID 'links' 中。

如果浏览器不是移动浏览器，我会将此技术与 Modernizr 结合使用，以在我的 Web 应用程序内的弹出“窗口”中加载产品页面。不到 20 行的 JS/jQuery 代码使该网站对其桌面用户更具交互性。一定要探索 load() 方法的选项，你可以限制结果，它也有一个成功回调。

# php - 使用 imagejpeg() 或一般的 apache & php 是否有任何隐藏的 php 权限？无法打开权限被拒绝

> ID：11192924
> 
> 赞同：0
> 
> 时间：2012-06-25T16:02:59.673
> 
> 标签：php, apache

我无法打开……写作：当我尝试调整图像大小时，权限被拒绝。该代码多年来一直运行良好，但在重新升级后（我认为）它已经停止工作。我尝试将文件夹的权限更改为 777 并禁用 selunix。我的 httpd.con 文件或 php.ini 文件中是否有任何更改会禁用 php 脚本？

来自 Apache 日志的错误消息：

`[Mon Jun 25 08:59:17 2012] [error] [client 127.0.0.1] PHP Warning: imagejpeg(): Unable to open './cache/150_112.5_be636f82ef8e7e22727c81980df16cd5.jpg' for writing: Permission denied in /var/www/html/resize_function.php on line 62, referer: http://jasonrmoore.info/list.php?dir=./`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:08:28.447

不，这是一个unix权限问题。

`./cache`请检查文件夹和内部文件的权限。

# php - PHP 需要一个包含 2 个目录的文件

> ID：11192925
> 
> 赞同：1
> 
> 时间：2012-06-25T16:03:17.790
> 
> 标签：php, path

当前文件位于此

```
C:\xampp\htdocs\beatbeast\includes\Db 
```

我想回到包含文件夹并选择一个文件，但是这段代码给了我一个错误。说路径有效我如何返回到包含文件夹，然后在包含文件夹中选择另一个文件夹，然后包含该特定文件？

这就是我所做的

```
require_once("../../includes/Db_Resources/db_connection.php"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:04:40.600

你走得太浅了。你只需要深入一层：

```
require_once("../Db_Resources/db_connection.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-23T13:56:36.647

您可以使用 ：

require_once("C:\xampp\htdocs\beatbeast\includes\Db\YOUR_CONNECTION_FILE.php");

它会工作的。

# android - 当方向改变时使用选项卡重新加载活动时，片段被初始化两次

> ID：11192928
> 
> 赞同：19
> 
> 时间：2012-06-25T16:03:23.310
> 
> 标签：android, tabs, android-fragments, device-orientation

当我更改设备的方向时，我在重新加载带有选项卡和片段的活动时遇到问题。

情况如下：

我有一个在操作栏中有 3 个选项卡的活动。`FrameLayout`每个选项卡在主视图中加载不同的片段。如果我不改变设备的方向，一切正常。但是当我这样做时，Android 会尝试初始化当前选择的片段两次，这会产生以下错误：

```
E/AndroidRuntime(2022): Caused by: android.view.InflateException: Binary XML file line #39: Error inflating class fragment 
```

以下是产生错误的步骤顺序：

1.  我加载活动，选择选项卡 nr 2。并更改设备的方向。
2.  Android 销毁由 tab nr 2 加载的片段的活动和实例（从现在开始，“片段 2”）。然后它继续创建活动和片段的新实例。
3.  在里面`Activity.onCreate()`，我将第一个选项卡添加到操作栏。当我这样做时，此选项卡会自动选择。它可能代表未来的问题，但我现在不介意。`onTabSelected`被调用并创建并加载第一个片段的新实例（参见下面的代码）。
4.  我添加了所有其他选项卡而没有触发任何事件，这很好。
5.  我打电话`ActionBar.selectTab(myTab)`选择 Tab nr 2。
6.  `onTabUnselected()`为第一个选项卡调用，然后`onTabSelected()`为第二个选项卡调用。此序列替换片段 2 实例的当前片段（参见下面的代码）。
7.  接下来，`Fragment.onCreateView()`在 Fragment 2 实例上调用，并且片段布局变得膨胀。
8.  这是问题所在。Android 调用`onCreate()`，然后`onCreateView()`在片段实例 ONCE AGAIN 上调用，当我尝试膨胀（第二次）布局时会产生异常。

显然问题是Android两次初始化片段，但我不知道为什么。

当我重新加载活动时，我尝试不选择第二个选项卡，但是第二个片段无论如何都会被初始化并且它没有显示（因为我没有选择它的选项卡）。

我发现了这个问题：[Android Fragments recreated onorientation change](https://stackoverflow.com/q/10634854/48468)

用户问的问题基本上和我一样，但我不喜欢选择的答案（这只是一种工作方式）。必须有某种方法可以在没有`android:configChanges`技巧的情况下使其正常工作。

如果不清楚，我想知道如何阻止片段的重新创建或避免片段的双重初始化。很高兴知道为什么会发生这种情况。:P

以下是相关代码：

```
public class MyActivity extends Activity  implements ActionBar.TabListener {

    private static final String TAG_FRAGMENT_1 = "frag1";
    private static final String TAG_FRAGMENT_2 = "frag2";
    private static final String TAG_FRAGMENT_3 = "frag3";

    Fragment frag1;
    Fragment frag2;
    Fragment frag3;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // my_layout contains a FragmentLayout inside
        setContentView(R.layout.my_layout); 

        // Get a reference to the fragments created automatically by Android
        // when reloading the activity
        FragmentManager fm = getFragmentManager();
        this.frag1 = fm.findFragmentByTag(MyActivity.TAG_FRAGMENT_1);
        this.frag2 = fm.findFragmentByTag(MyActivity.TAG_FRAGMENT_2);
        this.frag3 = fm.findFragmentByTag(MyActivity.TAG_FRAGMENT_3)

        ActionBar actionBar = getActionBar();

        // snip...

        // This triggers onTabSelected for the first tab
        actionBar.addTab(actionBar.newTab()
                .setText("Tab1").setTabListener(this)
                .setTag(MyActivity.TAG_FRAGMENT_1));

        actionBar.addTab(actionBar.newTab()
                .setText("Tab2").setTabListener(this)
                .setTag(MyActivity.TAG_FRAGMENT_2));
        actionBar.addTab(actionBar.newTab()
                .setText("Tab3").setTabListener(this)
                .setTag(MyActivity.TAG_FRAGMENT_3));

        Tab t = null;
        // here I get a reference to the tab that must be selected
        // snip...

        // This triggers onTabUnselected/onTabSelected
        ab.selectTab(t);

    }

    @Override
    protected void onDestroy() {
        // Not sure if this is necessary
        this.frag1 = null;
        this.frag2 = null;
        this.frag3 = null;
        super.onDestroy();
    }

    @Override  
    public void onTabSelected(Tab tab, FragmentTransaction ft) {  

        Fragment curFrag = getFragmentInstanceForTag(tab.getTag().toString());
        if (curFrag == null) {
            curFrag = createFragmentInstanceForTag(tab.getTag().toString());
            if(curFrag == null) { 
                // snip... 
                return;
            }
        }
        ft.replace(R.id.fragment_container, curFrag, tab.getTag().toString());
    }

    @Override  
    public void onTabUnselected(Tab tab, FragmentTransaction ft) 
    {  
        Fragment curFrag = getFragmentInstanceForTag(tab.getTag().toString());
        if (curFrag == null) {
            // snip... 
            return;
        }

        ft.remove(curFrag);
    }

    private Fragment getFragmentInstanceForTag(String tag) 
    {
        // Returns this.frag1, this.frag2 or this.frag3
        // depending on which tag was passed as parameter
    }

    private Fragment createFragmentInstanceForTag(String tag) 
    {
        // Returns a new instance of the fragment requested by tag
        // and assigns it to this.frag1, this.frag2 or this.frag3
    }
} 
```

Fragment 的代码无关紧要，它只是返回`onCreateView()`方法覆盖的膨胀视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-14T03:21:12.673

我得到了一个简单的答案：

只需添加`setRetainInstance(true);`到 Fragment 的`onAttach(Activity activity)`或`onActivityCreated(Bundle savedInstanceState)`. 这两个是 Fragment 类中的回调。

所以基本上，`setRetainInstance(true)`它的作用是：当它通过时，它保持你的片段的状态：

*   `onPause();`
*   `onStop();`

无论 Activity 经历什么，它都会维护 Fragment 的实例。它的问题可能是，如果碎片太多，可能会给系统带来压力。

希望能帮助到你。

```
@Override
public void onAttach(Activity activity) {
super.onAttach(activity);

setRetainInstance(true);

} 
```

* * *

> *一如既往地开放更正。问候，爱德华·吉诃德。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:15:42.190

似乎，当屏幕旋转并重新启动应用程序时，它正在通过调用 Fragment 类的默认构造函数来重新创建每个 Fragment。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T11:23:50.070

我遇到了同样的问题并使用了以下解决方法：

在片段的 onCreateView 开头：

```
if (mView != null) {
    // Log.w(TAG, "Fragment initialized again");
    ((ViewGroup) mView.getParent()).removeView(mView);
    return mView;
}
// normal onCreateView
mView = inflater.inflate(R.layout...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T20:50:32.977

我的代码有点不同，但我相信我们的问题是一样的。

在`onTabSelected`我没有使用替换中，我在第一次创建片段时使用添加，如果不是，则附加。在 onTabUnselected 我使用分离。

问题是当视图被销毁时，我的 Fragment 被附加到`FragmentManager`并且从未被销毁。为了解决这个问题，我在 onSaveInstanceBundle 上实现了从`FragmentManager`.

代码是这样的：

```
FragmentTransition ft = getSupportFragmentManager().begin();
ft.detach(myFragment);
ft.commit(); 
```

在第一次尝试中，我将该代码放入 中`onDestroy`，但我收到一个异常，告诉我在 之后我无法执行此操作`onSaveInstanceBundle`，因此我将代码移至`onSaveInstanceBundle`并且一切正常。

抱歉，我工作的地方不允许我将代码放在 StackOverflow 上。这是我从代码中记住的。随意编辑答案以添加代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-04T11:06:00.363

我想你正面临着我所面临的。我有一个 json 的线程下载器，它从 开始`onCreate()`，每次我更改方向时，都会调用线程并触发下载。我使用`onSaveInstance()`并`onRestoreInstance()`在列表中传递 json 响应来解决此问题，并结合检查列表是否不为空，因此不需要额外的下载。

我希望这能给你一个提示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-02T09:44:53.413

为了保护活动重新创建，请尝试添加`configChanges`您的活动标签（在清单中），例如：

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-20T12:01:21.290

`android:configChanges="orientation|screenSize"` 在清单文件中添加

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-19T09:13:20.520

我认为这是避免重新膨胀片段的根视图的一种万无一失的方法：

```
private WeakReference<View> mRootView;
private LayoutInflater mInflater;

/**
 * inflate the fragment layout , or use a previous one if already stored <br/>
 * WARNING: do not use in any function other than onCreateView
 * */
private View inflateRootView() {
    View rootView = mRootView == null ? null : mRootView.get();
    if (rootView != null) {
        final ViewParent parent = rootView.getParent();
        if (parent != null && parent instanceof ViewGroup)
            ((ViewGroup) parent).removeView(rootView);
        return rootView;
    }
    rootView = mFadingHelper.createView(mInflater);
    mRootView = new WeakReference<View>(rootView);
    return rootView;
}

@Override
public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
    mInflater=inflater!=null?inflater:LayoutInflater.from(getActivity());
    final View view = inflateRootView();
    ... //update your data on the views if needed
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-24T16:21:42.250

我通过使用下面的代码解决了这个问题。

```
private void loadFragment(){
     LogUtil.l(TAG,"loadFragment",true);
     fm = getSupportFragmentManager();
     Fragment hf = fm.findFragmentByTag("HOME");
     Fragment sf = fm.findFragmentByTag("SETTING");
     if(hf==null) {
         homeFragment = getHomeFragment();// new HomeFragment();
         settingsFragment = getSettingsFragment();// new Fragment();
         fm.beginTransaction().add(R.id.fm_place, settingsFragment, "SETTING").hide(settingsFragment).commit();
         fm.beginTransaction().add(R.id.fm_place, homeFragment, "HOME").commit();
         activeFragment = homeFragment;
     }else{
         homeFragment = hf;
         settingsFragment = sf;
         activeFragment = sf;
     }
 } 
```

在 OnCreate() 中启动此方法；

# python - 在 PyQt 中编译着色器

> ID：11192938
> 
> 赞同：8
> 
> 时间：2012-06-25T16:03:55.700
> 
> 标签：python, qt, opengl, pyqt, glsl

我无法在 PyQt 中获得基本的着色器程序。我认为这至少应该正确编译着色器代码（我不是这里的专家），但`addShaderFromSourceFile()`无论我尝试什么总是返回 false。着色器程序日志也总是空的。

我在 Ubuntu 12.04 上，我可以用 C++ 编译和运行 GLSL 着色器程序。所以我觉得不是系统问题。

文件*着色器.vert*

```
void main(void)
{
    gl_Position = ftransform();
} 
```

文件*着色器.frag*

```
void main(void)
{
    gl_FragColor = vec4(1.0,0.0,0.0,1.0);
} 
```

文件*test_shaders.py*

```
from OpenGL.GL import *
from OpenGL.GLU import *
from PyQt4 import QtCore, QtGui
from PyQt4.QtOpenGL import *

class ExampleQGLWidget(QGLWidget):

    def __init__(self, parent):
        QGLWidget.__init__(self, parent)
        self.shaderProgram = QGLShaderProgram()
        print self.shaderProgram.addShaderFromSourceFile(QGLShader.Vertex, "shader.vert")
        print self.shaderProgram.addShaderFromSourceFile(QGLShader.Fragment, "shader.frag")
        print self.shaderProgram.log()
        self.shaderProgram.link()
        glViewport(0,0, 640, 480)

    def paintGL(self):
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
        self.shaderProgram.bind()

    def resizeGL(self, w, h):
        glViewport(0, 0, w, h)
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()

    def initializeGL(self):
        glClearColor(0.0, 0.0, 0.0, 1.0)
        glClearDepth(1.0)
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()

class TestContainer(QtGui.QMainWindow):

    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        widget = ExampleQGLWidget(self)
        self.setCentralWidget(widget)

if __name__ == '__main__':
    app = QtGui.QApplication(['Shader Example'])
    window = TestContainer()
    window.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T22:05:49.563

OpenGL 上下文不是在构造函数中设置的，它仅在paintGL、resizeGL 和initializeGL 方法中有效和当前，因此您应该在initializeGL 方法中加载和编译着色器，而不是在其他任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-27T19:22:30.073

我相信另一个答案现在可能已经过时了。至少从 PyQt5 开始，有一种方法可以使小部件 OpenGL 上下文处于当前状态（并在之后进行清理）。

可以通过 上的[`makeCurrent()`](https://doc.qt.io/qt-5/qopenglwidget.html#makeCurrent)和[`currentDone()`](https://doc.qt.io/qt-5/qopenglwidget.html#doneCurrent)方法来实现`QGlWidget`。

解决方案如下所示：

```
...
class ExampleQGLWidget(QGLWidget):

    def __init__(self, parent):
        QGLWidget.__init__(self, parent)
        self.shaderProgram = QGLShaderProgram()

        self.makeCurrent()

        print self.shaderProgram.addShaderFromSourceFile(QGLShader.Vertex, "shader.vert")
        print self.shaderProgram.addShaderFromSourceFile(QGLShader.Fragment, "shader.frag")
        print self.shaderProgram.log()
        self.shaderProgram.link()

        self.doneCurrent()

        glViewport(0,0, 640, 480)
... 
```

# javascript - 从 Ruby 数组中获取特定值并创建逗号分隔的字符串

> ID：11192939
> 
> 赞同：0
> 
> 时间：2012-06-25T16:03:56.433
> 
> 标签：javascript, ruby, arrays, erb

我需要一些关于 Ruby 数组柔术的帮助。

我有以下称为@tasks 的数组：

```
[#<PivotalTracker::Story:0x007f9d6b8 @id=314, @url="http://www.pivotaltracker.com/", @created_at=#<DateTime: 2012-06-18T20:23:42+00:00 ((2456097j,73422s,0n),+0s,2299161j)>, @accepted_at=nil, @project_id=357031, @name="Test ", @description="This is the description for \"Test\"", @story_type="feature", @estimate=-1, @current_state="unstarted", @requested_by="joe jones", @owned_by=nil, @labels=nil, @jira_id=nil, @jira_url=nil, @other_id=nil, @integration_id=nil, @deadline=nil, @attachments=[]>, #<PivotalTracker::Story:0x007f9d6b8 @id=315, @url="http://www.pivotaltracker.com/", @created_at=#<DateTime: 2012-06-18T20:25:20+00:00 ((2456097j,73520s,0n),+0s,2299161j)>, @accepted_at=nil, @project_id=357031, @name="Test 2", @description="This is the description for \"Test 2\"", @story_type="feature", @estimate=-1, @current_state="unstarted", @requested_by="joe jones", @owned_by=nil, @labels=nil, @jira_id=nil, @jira_url=nil, @other_id=nil, @integration_id=nil, @deadline=nil, @attachments=[]>, #<PivotalTracker::Story:0x007f9d6b8 @id=316, @url="http://www.pivotaltracker.com/story/", @created_at=#<DateTime: 2012-06-18T20:25:26+00:00 ((2456097j,73526s,0n),+0s,2299161j)>, @accepted_at=nil, @project_id=357031, @name="Test 3", @description="Description for Test 3 ", @story_type="feature", @estimate=-1, @current_state="unstarted", @requested_by="joe jones", @owned_by=nil, @labels=nil, @jira_id=nil, @jira_url=nil, @other_id=nil, @integration_id=nil, @deadline=nil, @attachments=[]>] 
```

我的最终目标是在我的 .erb 视图中创建一个 JavaScript 数组，其中只有上面数组中的 ID 值。

我正在考虑尝试类似的东西：

```
var myJSArray = [<%= @tasks.each { |t| print t.id.to_s+", " } %>]; 
```

但是，这显然会在字符串的末尾附加一个“，”，这是不可取的（即它返回“314、315、316”。这似乎有点像黑客，而不是正确的做法.

关于如何正确执行此操作的任何想法？

谢谢！

更新：在对 SO 进行了更多研究之后，似乎我可以分两步完成：

```
@ids = @tasks.map { |t| t.id } 
```

然后在视图中使用它：

```
var myJSArray = [<%= @ids.map(&:to_s).join(", ") %>]; 
```

不过，不确定这是否理想，或者是否可以一步完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:08:18.080

```
var myJSArray = [<%= j @tasks.map(&:id).join(',') %>]; 
```

或者你可能更喜欢这样的东西：

```
var myJSArray = <%= @tasks.map(&:id).to_json %>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:07:30.030

使用`Array#join`：

```
<%=print @task.map {|t| t.id.to_s}.join(', ') %> 
```

# php - PHP：使用 preg_match_all 查找字符串

> ID：11192949
> 
> 赞同：0
> 
> 时间：2012-06-25T16:04:40.453
> 
> 标签：php, regex, preg-match-all

我有这个：

```
<tr class="tth3">
  <td>aaa - bbbbb</td>
  <td>6:10 </td>
  <td >bla</td>
</tr>
<tr class="tth3">
  <td>cccc - xxxx</td>
  <td>6:10 </td>
  <td>blabla</td>
</tr> 
```

我会搜索这个正则表达式：`preg_match_all('/<tr class="tth3">.*?xxx.*?<\/[\s]*tr>/s', ...)` 我的结果应该只是第二个`<tr>..</tr>`，但我不知道如何正确使用这个，所以任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:12:05.637

使用更好的解决方案，使用**[DOM](http://php.net/manual/en/book.dom.php)**：

```
<?php

/**
 * Got this function from the manual's comments
 *
 * @param DOMNode $el
 *
 * @return mixed
 */
function innerHTML(DOMNode $el) {
    $doc = new DOMDocument();
    $doc->appendChild($doc->importNode($el, TRUE));
    $html = trim($doc->saveHTML());
    $tag = $el->nodeName;
    return preg_replace('@^<' . $tag . '[^>]*>|</' . $tag . '>$@', '', $html);
}

$html = <<<HTML
<tr class="tth3">
  <td>aaa - bbbbb</td>
  <td>6:10 </td>
  <td >bla</td>
</tr>
<tr class="tth3">
  <td>cccc - xxxx</td>
  <td>6:10 </td>
  <td>blabla</td>
</tr>
HTML;

$document = new DOMDocument();
$document->loadHTML($html);

$tr_list = $document->getElementsByTagName("tr");

foreach ($tr_list as $tr) {
    /** @var $tr DOMElement */
    $td_list = $tr->getElementsByTagName("td");
    foreach ($td_list as $td) {
        if (preg_match("/xxxx/", $td->textContent)) {
            //This is our TR!!
            echo innerHTML($tr);
            break(2); //Exit both loops
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:18:47.210

我不认为将`\s`类放在括号中是必要的，它甚至可能被解释为空间类以外的东西。不过，我不是 100% 确定。

> `[\s]`

无论哪种方式，用法是：

> `$num_matches = preg_match_all( '/<tr class="tth3">.*?xxx.*?<\/\s*tr>/s', $subject, $matches );`

1.  `$num_matches`包含匹配字符串的计数
2.  `$matches`包含实际匹配字符串的数组

# c# - 枚举类型数组的命令行解析器

> ID：11192953
> 
> 赞同：3
> 
> 时间：2012-06-25T16:05:01.303
> 
> 标签：c#, command-line, command-line-arguments

我们正在尝试找到一个可以用枚举解析数组的命令行解析器。CommandlineParser 支持使用 int 或 string 解析数组，但不支持 enum。例如

```
 [OptionArray("o", "output", HelpText = "The output files to generate.", DefaultValue = new[] { "OptimizeFor.Accuracy", "OptimizeFor.Speed" })]
  public string[] OutputFiles { get; set; } 
```

工作正常。但不是下面那个：

```
 public enum OptimizeFor
        {
            Unspecified,
            Speed,
            Accuracy
        }
    [OptionArray("o", "output", HelpText = "The output files to generate.", DefaultValue = new[] { OptimizeFor.Accuracy, OptimizeFor.Speed })]
    public OptimizeFor[] OutputFiles { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T20:45:35.440

这是用于解析枚举数组的命令行补丁。我创建了一个拉取请求。[https://github.com/gsscoder/commandline/pull/148](https://github.com/gsscoder/commandline/pull/148)

```
 public bool SetValue(IList<string> values, object options)
    {
        var elementType = _property.PropertyType.GetElementType();

        var propertyType = elementType;
        if (propertyType.IsGenericType &&
        propertyType.GetGenericTypeDefinition() == typeof(Nullable<>))
        {
            propertyType = propertyType.GetGenericArguments()[0];
        }

        var array = Array.CreateInstance(elementType, values.Count);

        for (var i = 0; i < array.Length; i++)
        {
            try
            {
                if (propertyType.BaseType.Equals(typeof (System.Enum)))
                {
                    array.SetValue(Enum.Parse(propertyType, values[i]), i);
                    _property.SetValue(options, array, null);
                }
                else
                {
                    array.SetValue(Convert.ChangeType(values[i], elementType, _parsingCulture), i);
                    _property.SetValue(options, array, null);
                }
            }
            catch (FormatException)
            {
                return false;
            }
        }

        return ReceivedValue = true;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T17:11:24.347

不确定这是否是您正在寻找的，如果是的话，它应该让您走上正轨。

```
public enum OptimizeFor
{
    Unspecified,
    Speed,
    Accuracy
}

public class EnumParser
{
    public static IEnumerable<TEnum> FindSelected<TEnum>(IEnumerable<string> enumItemNames)
    {
        var selectedOtions = Enum.GetNames(typeof(TEnum))
            .Intersect(enumItemNames, StringComparer.InvariantCultureIgnoreCase)
            .Select(i => Enum.Parse(typeof(TEnum), i))
            .Cast<TEnum>();
        return selectedOtions;
    }
}

class Program
{
    static void Main(string[] args)
    {
        //Some fake arguments
        args = new[] {"-o", "SPEED", "accuracy", "SomethingElse"};

        var selectedEnumVals = EnumParser.FindSelected<OptimizeFor>(args);

        selectedEnumVals.Select(i => i.ToString()).ToList().ForEach(Console.WriteLine);
        Console.Read();
    }
} 
```

# xslt - 仅选择包含特定子节点的节点并将其格式化为 YAML

> ID：11192960
> 
> 赞同：0
> 
> 时间：2012-06-25T16:05:14.777
> 
> 标签：xslt, yaml

这已经让我头疼了一整天。你能帮我吗？！我有一个简单的 xml 文件。使用 xslt 我想将其转换为 yaml 文件。问题是：

1.  我需要以一种我应该只从 xml 标签中捕获**特定值** 并将它们放入特定 yaml 字典*（工作、地址）的方式组织输出*
2.  **一些 xml 标记将具有我无法提前预测**的names() 或 attrs() - 因此我不能仅通过 names() 或 position() 或其他一些逻辑来获取它们。我可以做出一些假设，但不是针对所有标签...
3.  在格式化输出时，我发现在我选择了我想要的值之后，很难为 yaml 文件设置字典键（*工作、地址*） - 我可以为所有的孩子设置键（我不需要）或我可以为每个单独的元素设置键，这不是我想要的。

考虑一下：

```
<data>
   <info>some info</info>
   <data>some data</data>
   <list>
         <ofert>
            <unknow>....</unknow>
            <unknow1>....</unknow1>
            <id>00934</id>
            <name>Bob</name>
            <street>Euston rd.</street>
            <postcode>SE23GH</postcode>
            <job>IT</job>
            <position>boss</position>
            <unknow>....</unknow>
            <unknow4>....</unknow4>
            <unknow2>....</unknow2>
            <unknow3>....</unknow3>
         </ofert>
   </list>
</data> 
```

我想要这样的输出：

```
数据：
    资料：……
    数据： ....
        列表：
            提醒：
                编号：00934
                姓名：鲍勃
                地址：{街道：尤斯顿路，邮编：SE23GH}
                工作：{工作：IT，职位：老板}
                其他：{unknow：.....，unknow1：....}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:12:13.097

这是一个简单的 XSLT 1.0 解决方案，它不包含“其他：”yaml 元素...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@*" />

<xsl:template match="*">
  <xsl:call-template name="indent">
   <xsl:with-param name="spaces" select="count(ancestor::*)"/>
  </xsl:call-template>
  <xsl:value-of select="concat( local-name(), ': ', text(), '&#x0A;')"/>
  <xsl:apply-templates select="*" />
</xsl:template>

<xsl:template match="ofert">
  <xsl:variable name="indent" select="count(ancestor::*)" />
  <xsl:call-template name="indent">
   <xsl:with-param name="spaces" select="$indent"/>
  </xsl:call-template>
  <xsl:value-of select="concat( local-name(), ': ', text(), '&#x0A;')"/>
  <xsl:apply-templates select="id" />
  <xsl:apply-templates select="name" />
  <xsl:call-template name="indent">
   <xsl:with-param name="spaces" select="$indent + 1"/>
  </xsl:call-template>
  <xsl:value-of select="concat(
    'address: {street: ', street/text(),
    ', postcode: ', postcode,' }&#x0A;')"/>
  <xsl:call-template name="indent">
   <xsl:with-param name="spaces" select="$indent + 1"/>
  </xsl:call-template>
  <xsl:value-of select="concat(
     'work: {job: ', job,
  ', position: ', position, ' }&#x0A;')"/>
</xsl:template>

<xsl:template name="indent">
  <xsl:param name="spaces" />
  <xsl:if test="$spaces > 0">
   <xsl:value-of select="' '"/>
   <xsl:call-template name="indent">
    <xsl:with-param name="spaces" select="$spaces - 1"/>
   </xsl:call-template>
  </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

XSLT 2.0 解决方案会简单得多。如果您不受 XSLT 1.0 的限制，请告诉我们。

如果有时间，我将更新解决方案以包含“其他：”元素。基本上，该技术将简单地定义一个命名模板来生成关联数组，如地址：、工作：和其他：，其中输入参数包括缩进级别、标签（“地址”等）和关联数组成员列表节点。我希望你能明白。

* * *

# 更新

这是 XSLT 2.0 版本，其中包括“其他”yaml 元素...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:zzart="http://stackoverflow.com/questions/11192960">
<xsl:output method="text"/>
<xsl:strip-space elements="*"/>

<xsl:variable name="indent-unit" select = "'  '" />

<xsl:function name="zzart:indent" as="xs:string">
 <xsl:param name="level" as="xs:integer"/>
 <xsl:value-of select="fn:string-join( for $in in 1 to $level return $indent-unit, '')" />
</xsl:function>

<xsl:template match="@*" />

<xsl:template match="*">
  <xsl:value-of select="concat( zzart:indent( count(ancestor::*)), local-name(), ': ', text(), '&#x0A;')"/>
  <xsl:apply-templates select="*" />
</xsl:template>

<xsl:template match="ofert">
  <xsl:variable name="level" select="count(ancestor::*)" />
  <xsl:variable name="indent" select="zzart:indent( $level)" />
  <xsl:value-of select="concat( $indent, local-name(), ': ', text(), '&#x0A;')"/>
  <xsl:apply-templates select="id" />
  <xsl:apply-templates select="name" />
  <xsl:call-template name="associative-array">
   <xsl:with-param name="level" select="$level + 1" />
   <xsl:with-param name="array-name" select="'address'" />
   <xsl:with-param name="array-members" select="(street, postcode)" />
  </xsl:call-template>
  <xsl:call-template name="associative-array">
   <xsl:with-param name="level" select="$level + 1" />
   <xsl:with-param name="array-name" select="'work'" />
   <xsl:with-param name="array-members" select="(job, position)" />
  </xsl:call-template>

  <xsl:call-template name="associative-array">
   <xsl:with-param name="level" select="$level + 1" />
   <xsl:with-param name="array-name" select="'other'" />
   <xsl:with-param name="array-members" select="*[not(self::id)][not(self::name)]
                                                 [not(self::street)][not(self::postcode)]
                                                 [not(self::job)][not(self::position)]" />
  </xsl:call-template>

</xsl:template>

<xsl:template name="associative-array">
 <xsl:param name="level" as="xs:integer" />
 <xsl:param name="array-name" as="xs:string" />
 <xsl:param name="array-members"/>
 <xsl:value-of select="concat( zzart:indent( $level), $array-name, ': {')" />
 <xsl:for-each select="$array-members">
  <xsl:value-of select="concat( local-name(), ': ', text(), if (position() != last()) then ', ' else ' }&#x0A;')" />
 </xsl:for-each>    
</xsl:template>

</xsl:stylesheet> 
```

# c# - 为 DLL 中的参数添加注释

> ID：11192963
> 
> 赞同：5
> 
> 时间：2012-06-25T16:05:28.003
> 
> 标签：c#, .net, xml

我在 .NET 中创建了一个 DLL，其中包括几个函数。现在我在另一个应用程序中起诉这个 DLL ![在此处输入图像描述](../Images/a6f97fd0e983e7057bcb6b8970d894f5.png)

我希望每当客户端使用我的 DLL 时，必须显示某种注释来显示返回类型、参数等，就像这样 ![在此处输入图像描述](../Images/b9c699abf5915d84eadb94c5e199eee1.png)

我看到人们使用 XML 文件。有其他方法吗？温柔地感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T16:09:43.627

您需要在成员声明之前使用注释中指定的[XML 文档。](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)

```
/// <summary>Some stuff here</summary>
/// <remarks>Some remarks</remarks>
/// <param name="foo">The foo to gronk</param> 
```

然后进入您的项目属性并在“构建”选项卡中启用在您的库旁边构建一个 XML 文件。将其与您的 DLL 一起分发，Visual Studio 将显示您的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T20:41:14.007

```
/// <summary>
/// This method does something.
/// </summary>
/// <param name="zain">Zain to be processed.</param>
/// <returns>True if it went okay, false otherwise.</returns> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T16:07:53.733

在方法声明的开头使用 /// ：

```
/// <summary>
/// This method does something.
/// </summary>
/// <param name="foo">Foo value to be processed.</param>
/// <returns>True if it went okay, false otherwise.</returns>
public bool DoSomething(int foo)
{
    if (foo > 0)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T16:12:41.813

如前所述，您可以在每个公共成员的开头添加 XML 文档：

```
/// <summary>
/// This is the summary for your method.
/// </summary>
public void MyMethod()
{
    /// your code here...
} 
```

有许多工具可以在此过程中提供帮助。查看[GhostDoc](http://submain.com/products/ghostdoc.aspx)以生成评论，查看[Sandcastle](http://shfb.codeplex.com/)以从中创建帮助文件或网页。

# perl - 将 XPath 与 Perl 一起使用

> ID：11192967
> 
> 赞同：4
> 
> 时间：2012-06-25T16:05:41.093
> 
> 标签：perl, xpath

我正在尝试使用 Perl 在 Linux 上复制我的`C#`/代码。[我在Perl & XML](http://oreilly.com/catalog/9780596002053)`XPath`中复制并粘贴了示例 8-6 中的代码。如果我理解正确，我应该能够运行该 Perl 代码，将此代码放在终端中

```
xmlPerl.pl mydatafile.xml "/inventory/category/item/name" 
```

但是当我尝试运行 Perl 文件时，它不起作用。这是错误：

```
[root@Perl ~]# perl xmlPerl.pl
Can't locate XML/XPath.pm in @INC (@INC contains: /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi /usr/lib64/perl5/site_perl/5.8.7/x86_64-linux-thread-multi /usr/lib64/perl5/site_perl/5.8.6/x86_64-linux-thread-multi /usr/lib64/perl5/site_perl/5.8.5/x86_64-linux-thread-multi /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl/5.8.7 /usr/lib/perl5/site_perl/5.8.6 /usr/lib/perl5/site_perl/5.8.5 /usr/lib/perl5/site_perl /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi /usr/lib64/perl5/vendor_perl/5.8.7/x86_64-linux-thread-multi /usr/lib64/perl5/vendor_perl/5.8.6/x86_64-linux-thread-multi /usr/lib64/perl5/vendor_perl/5.8.5/x86_64-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl/5.8.7 /usr/lib/perl5/vendor_perl/5.8.6 /usr/lib/perl5/vendor_perl/5.8.5 /usr/lib/perl5/vendor_perl /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi /usr/lib/perl5/5.8.8 .) at xmlPerl.pl line 3.
BEGIN failed--compilation aborted at xmlPerl.pl line 3. 
```

我究竟做错了什么？我认为这与我的代码开头的 XML 和 XPath 名称有关。我需要安装一些东西才能使用 XPath 框架吗？我在 RedHat 5.5 上运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T16:24:49.180

来自[`perldiag`](http://metacpan.org/module/perldiag)：

> 找不到 %s
> 
> 您说要做（或要求或使用）一个找不到的文件。Perl 在 中提到的所有位置查找文件`@INC`，除非文件名包含文件的完整路径。也许您需要设置`PERL5LIB`or`PERL5OPT`环境变量来说明额外库的位置，或者脚本需要将库名称添加到`@INC`. 或者，也许您只是拼错了文件名。见和。`require`_`perlfunc``lib`

你没有安装`XML::XPath`模块，或者 Perl 没有找到它。使用 CPAN 安装模块：

```
> cpan XML::XPath 
```

或使用包管理器：

```
> apt-get install libxml-xpath-perl 
```

或者，如果它已经安装，请说明它在`PERL5LIB`环境变量中的位置：

```
> PERL5LIB=/path/to/lib perl ... 
```

`@INC`多变的：

```
BEGIN {
    unshift(@INC, '/path/to/lib');
} 
```

或`lib`语用：

```
use lib '/path/to/lib'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:15:11.960

这是尝试`use`使用未安装的模块时出现的标准错误。你应该安装它。

理想情况下使用 OS 包；例如在 debian 衍生的操作系统（如 Debian 或 Ubuntu）上

```
$ apt-get install libxml-xpath-perl 
```

如果做不到这一点，您可以像往常一样使用 CPAN 安装它

```
$ cpan XML::XPath 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:14:26.353

答案在您错误的第一部分：

```
Can't locate XML/XPath.pm 
```

在 Perl 中，巨大的好处在于使用其他人为您编写并且您可以重用的模块或库。在这种情况下，有人编写了一个名为 XML::XPath 的模块（在 Perl 中，路径由 '::' 划定），您只需安装它。安装它的最简单方法是 via `cpan`，它是大多数 Perl 安装附带的工具。赶紧跑：

```
cpan
(you'll be dropped into a different command prompt)
install XML::XPath 
```

这将获取 XML::XPath，解包，生成 Makefile，检查依赖项（并安装任何缺少的），制作，测试并为您安装它。[在此处](http://www.cpan.org/modules/INSTALL.html)查看有关使用 CPAN 的更多信息。

# asp.net - 如何更改用于网页的母版页？

> ID：11192968
> 
> 赞同：3
> 
> 时间：2012-06-25T16:05:44.160
> 
> 标签：asp.net, visual-studio-2010, asp.net-4.0, visual-web-developer-2010

当创建一个新项目 - “使用母版页的 Web 表单”时，我会看到一个选择母版页的对话框。

我可以为现有页面获取该对话框，以便更改其母版页吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:08:45.397

不，但您可以通过转到标记并添加`MasterPageFile="~/Site.master"`到`<%@ Page`指令来设置母版页

将 Site.master 更改为您的母版页名称

**或者**

如果您在页面的标记中，当单击`<%@ Page`指令并查看“属性”窗口时 - 您将看到一个`MasterPageFile`属性（**注意**：在解决方案资源管理器中单击页面名称时**不会显示该属性）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:11:54.117

您也可以在 .aspx 页面中更改此设置，将 MasterPageFile="" 设置更改为您希望页面使用的任何母版页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:12:27.867

我认为您需要更改 @Page 指令中的母版页。

# oracle - 从 Shell 脚本到 SQLPlus 的多行变量

> ID：11192969
> 
> 赞同：1
> 
> 时间：2012-06-25T16:05:48.167
> 
> 标签：oracle, shell, unix, variables, sqlplus

将多个值从一个变量传递到 Oracle 数据库中的单独记录的最佳方法是什么？

我想从以下位置获取输出：

`hddlist=```iostat -Dl|awk '{print ""$1"="$(NF)}'`

这将返回如下输出：

```
hdisk36=0.8
hdisk37=0.8
hdisk38=0.8
hdisk40=5.5   
hdisk52=4.9 
```

我想将它们插入数据库，如下所示：

```
sqlplus -s /nolog <<EOF1
connect / as sysdba
set verify off
insert into my_table ##Single Record Here
EOF1 
```

如何系统地分离出这些值，以便创建如下所示的单个记录：

```
 Disk         Value
---------    -------
hdisk36       0.8
hdisk37       0.8
hdisk38       0.8
hdisk40       5.5   
hdisk52       4.9 
```

我最初尝试了一个带计数器的 while 循环，但似乎无法让它工作。一个确切的解决方案会很好，但一些方向性的建议也会有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:03:21.560

循环并生成插入语句。

```
sql=$(iostat -Dl | awk '{print ""$1"="$(NF)}' | while IFS== read -r k v ; do
    printf 'insert into mytable (k, v) values (%s, %s);\n' "$k" "$v"
done) 
```

这个输出可以以某种方式传递给`sqlplus`，也许像这样

```
sqlplus -s /nolog <<EOF1
connect / as sysdba
set verify off
$sql
EOF1 
```

虽然，根据 的行格式，直接省略和解析`iostat`可能更简单。`awk``read`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:02:55.007

您可以将输出重定向到文件，然后使用[外部表](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm)

它应该看起来像这样：

```
CREATE TABLE hddlist_ext_table (
  disk CHAR(16),
  value CHAR(3)
  ORGANIZATION EXTERNAL (
                         TYPE ORACLE_LOADER DEFAULT DIRECTORY tab_dir
                         ACCESS PARAMETERS (RECORDS DELIMITED BY NEWLINE
                                            FIELDS TERMINATED BY '=')
                         LOCATION ('your_file_name')); 
```

然后，您可以将此表用于您的数据，也可以将其插入到您的表中；插入 my_table

```
select disk, value from hddlist_ext_table; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:32:48.963

您可以像这样在 Oracle 中的单个 SQL 语句中插入多行

```
 INSERT ALL
    INTO mytable (column1, column2, column3) VALUES ('val1.1', 'val1.2', 'val1.3')
    INTO mytable (column1, column2, column3) VALUES ('val2.1', 'val2.2', 'val2.3')
    INTO mytable (column1, column2, column3) VALUES ('val3.1', 'val3.2', 'val3.3')
  SELECT * FROM dual; 
```

如果您打算每隔一段时间自动运行此脚本以查看每个磁盘的结果，您可能需要额外的列来保存日期和时间。

您还可以查看 sqlldr，因为您可以指定一个控制文件，告诉它您的数据包含什么，然后这会将数据加载到表中。如果您要加载大量数据，它比 SQL Plus 更适合此目的。

# jsrender - 如何在 JSRender 中动态呈现数组条目

> ID：11192971
> 
> 赞同：0
> 
> 时间：2012-06-25T16:06:20.317
> 
> 标签：jsrender

我正在使用 jQuery mobile 和 jsRender 来模板化一些 JSON 对象。

我在 jQuery mobile 中创建了一个列表视图，它输出：

```
<li><a href="#product-detail" data-ID="2" data-array="0">Product A</a></li>
<li><a href="#product-detail" data-ID="5" data-array="2">Product B</a></li>
<li><a href="#product-detail" data-ID="8" data-array="3">Product C</a></li> 
```

单击（点击）列表链接时，我希望呈现产品详细信息页面，该页面由特定于数组的产品信息和一些顶级 JSON（与语言相关）组成。

```
<h2 id="h2test">{{:productArray[0].Title}}</h2>
 <div class="row">
  <div class="from-column">
   <div class="from">{{:language.products.from}}</div>
    <div class="price">£929.99</div>
   </div>
  <a href="#" class="buy-now">{{:language.products.buyNow}}</a>
</div> 
```

模板还有很多内容，其中包括更多特定于数组的产品信息和语言内容。

如何动态访问 {{:productArray[0].Title}}？即为productArray 节点渲染一个传递的变量？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:03:33.993

我不确定我是否理解你的问题。如果您的意思是让用户点击/单击列表中的产品，然后显示该产品的详细信息，那么听起来您需要使用 JsViews。看看[现场的 JsViews 示例](http://borismoore.github.com/jsviews/demos/index.html)，以及相应的代码，包括[这个](https://github.com/BorisMoore/jsviews/blob/master/demos/step-by-step/04_editable-data.html)

JsViews 进行数据绑定，允许您“可观察地”更改数据对象和数组，因此更改会在呈现的模板中自动更新。它允许您从点击事件获取相应的视图对象和它所针对的数据项。

# php - 按列而不是行解析 HTML 表格

> ID：11192978
> 
> 赞同：1
> 
> 时间：2012-06-25T16:06:40.413
> 
> 标签：php, html, parsing, dom

如何按*列*而不是按行（使用 DOMDocument / DOMXPath）解析 html 表 td？意思是根据它所在的表的列解析一个 td 元素，而不是它在哪个 tr 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:15:50.080

HTML 表格按行分组，而不是按列分组。最好的办法是迭代行并将行分配给适当的数组，通过键同步。

例子：

```
<?php

$html = <<<HTML
<table id="target">
    <tr>
        <td>Col1</td>
        <td>Col2</td>
        <td>Col3</td>
    </tr>
    <tr>
        <td>Col1</td>
        <td>Col2</td>
        <td>Col3</td>
    </tr>
    <tr>
        <td>Col1</td>
        <td>Col2</td>
        <td>Col3</td>
    </tr>
    <tr>
        <td>Col1</td>
        <td>Col2</td>
        <td>Col3</td>
    </tr>
</table>
HTML;

$document = new DOMDocument();
$document->loadHTML($html);

$table = $document->getElementById("target");
$tr_list = $table->getElementsByTagName("tr");

$tr_count = 0;
$columns = array();
foreach ($tr_list as $tr) {
    /** @var $tr DOMElement */
    $td_list = $tr->getElementsByTagName("td");
    $tr_count++;
    $td_count = 0;
    foreach ($td_list as $td) {
        $columns[$tr_count][$td_count] = $td;
        $td_count++;
    }

}

print_r($columns); 
```

# r - 具有 ggplot2 较低级别图的多重颜色缩放

> ID：11192984
> 
> 赞同：2
> 
> 时间：2012-06-25T16:06:56.880
> 
> 标签：r, colors, ggplot2, aesthetics

每次我将另一个 geom_line() 添加到我的主图时，我都想实现不同的颜色渐变，每次都以“颜色”作为比例。这是一个数据框作为示例：

```
df <- data.frame("letter"=c(rep("a",5),rep("b",5)),"x"=rep(seq(1,5),2),"y1"=c(seq(6,10),seq(6,10)/2),"y2"=c(seq(1,5),seq(1,5)/2),"y3"=c(seq(3,7),seq(3,7)/2)) 
```

我首先绘制：

```
y1 <- ggplot(df,aes(x=x,y=y1,colour=letter))+geom_line()
y1 
```

然后我想添加 y1 和 y2，我可以这样做：

```
y2 <- geom_line(data=df,aes(x=x,y=y2,colour=letter))
y3 <- geom_line(data=df,aes(x=x,y=y3,colour=letter))
y1+y2+y3 
```

但我希望 y1、y2 和 y3 的颜色渐变（或色调）不同！

是否可以为每个 geom_line 分配诸如 scale_colour_hue() 之类的东西，或者这仅适用于 ggplot？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:54:49.733

正如我上面概述的，这里有一些选项：

```
df <- data.frame("letter"=c(rep("a",5),rep("b",5)),
                 "x"=rep(seq(1,5),2),
                 "y1"=c(seq(6,10),seq(6,10)/2),
                 "y2"=c(seq(1,5),seq(1,5)/2),
                 "y3"=c(seq(3,7),seq(3,7)/2))

# melt your data and create a grouping variable
library(plyr)                    
df_m <- melt(df,id.vars = 1:2)
df_m$grp <- with(df_m,interaction(letter,variable))

# Option 1
ggplot(df_m,aes(x = x, y = value)) + 
    facet_wrap(~variable) + 
    geom_line(aes(group = letter,colour = letter)) 
```

![在此处输入图像描述](../Images/88ea5a79379bcd765f5e81e283078942.png)

```
# Option 2      
ggplot(df_m,aes(x = x, y = value)) + 
    geom_line(aes(group = grp,colour = letter,linetype = variable)) 
```

![在此处输入图像描述](../Images/7f7325d132b7837ef79f6d9e65212e17.png)

# python - Python 和使用 Matplotlib 的交互式缩放图

> ID：11192991
> 
> 赞同：2
> 
> 时间：2012-06-25T16:07:38.773
> 
> 标签：python, matplotlib, wxpython, interactive, matplotlib-basemap

我在 wxPython 窗格内使用 Matplotlib 图（带底图）。我有情节（美国地图和城市散点图）。我正在尝试做一些交互式缩放功能（在地图上选择一个框并仅“缩放”到该区域）。

我设法让工具栏显示出来，但是当我点击按钮时，什么也没有发生。似乎工具栏只是为了展示。有什么想法吗？这是我的代码：

```
 # Set up area for plotting Basemap Plot and scatter plot
        self.figure = Figure(None,dpi=75)
        self.canvas = FigureCanvas(self.PlotPanel, -1, self.figure)
        self.axes = self.figure.add_axes([0,0,1,1],frameon=False)
        self.SetColor( (255,255,255) )

        # Toolbar Set up
        self.toolbar=NavigationToolbar2Wx(self.canvas)
        self.toolbar.Realize()
        tw,th = self.toolbar.GetSizeTuple()
        fw,fh = self.canvas.GetSizeTuple()
        self.toolbar.SetSize(wx.Size(fw,th))
        sizer_7.Add(self.toolbar,0)
        self.toolbar.update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:47:01.710

查看[embedding_in_wx2](http://matplotlib.org/examples/user_interfaces/embedding_in_wx2.html)示例，它对我来说很好用。

也许您的导入有问题：您首先必须导入 matplotlib，然后设置后端 ( `matplotlib.use('WXagg')`)，然后导入后端。

但是，如果没有所有导入的完整示例，要帮助您并不容易。