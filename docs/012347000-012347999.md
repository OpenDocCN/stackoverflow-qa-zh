# StackOverflow 问答 12347000-12347999

# c# - ascx 用户控件内的本地化

> ID：12347000
> 
> 赞同：0
> 
> 时间：2012-09-10T07:24:06.517
> 
> 标签：c#, c#-4.0, localization, ascx

----------------旧代码-------------------------------- -------------- 我创建了一个用户控件，它是一个必须本地化的主菜单。所以我在 App_LocalResources 中创建了 3 个资源文件，并且我有一个下拉菜单来更改所选语言。

主菜单如下所示：-

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MainMenu.ascx.cs" Inherits="GGX4._2.MainMenu" %>
<div>
    <asp:DropDownList ID="ddlLangs" runat="server" 
        onselectedindexchanged="ddlLangs_SelectedIndexChanged" AutoPostBack="True" meta:resourcekey="ddlLangsResource1">
        <asp:ListItem Text="English" Value="en-US" meta:resourcekey="ListItemResource1"></asp:ListItem>
        <asp:ListItem Text="German" Value="de-DE" meta:resourcekey="ListItemResource2"></asp:ListItem>
        <asp:ListItem Text="Spanish" Value="es-ES" meta:resourcekey="ListItemResource3"></asp:ListItem>
    </asp:DropDownList>
</div>
<div>
    <table>
      <tr>
        <td width="100%" nowrap height="16">
        <img border="0" src="Images/GREENSQUARE.gif" width="16" height="16"><b><font size="2" face="Arial">
            <asp:HyperLink ID="hypIntroduction" runat="server" NavigateUrl="Overview.htm" 
                meta:resourcekey="hypIntroductionResource1" >[hypIntroduction]</asp:HyperLink>
      </tr>
      <tr>
        <td width="100%" nowrap height="16">
        <img border="0" src="Images/GREENSQUARE.gif" width="16" height="16"><b><font size="2" face="Arial">
            <asp:HyperLink ID="hypGlobalGradingMethodology" runat="server" NavigateUrl="GGMethodology.htm" 
                meta:resourcekey="hypGlobalGradingMethodologyResource1" >[hypGlobalGradingMethodology]</asp:HyperLink>
        </td>
      </tr>
      <tr>
        <td width="100%" nowrap height="16">
        <img border="0" src="Images/Redsquare.gif" width="16" height="16"><b><font size="2" face="Arial">
            <asp:HyperLink ID="hypDeterminingBusiness" runat="server" 
                NavigateUrl="ScopematrixGeneral.htm" 
                meta:resourcekey="hypDeterminingBusinessResource1">[hypDeterminingBusiness]</asp:HyperLink>
        </td>
      </tr>
      <tr>
        <td width="100%" nowrap height="16"><font size="2" face="Arial">&nbsp;&nbsp;&nbsp;
        <img border="0" src="Images/BLUEBULLET.gif" width="16" height="16">
            <asp:HyperLink ID="hypMethodology" runat="server" 
                NavigateUrl="methodology.htm" 
                meta:resourcekey="hypMethodologyResource1">[hypMethodology]</asp:HyperLink>
          </font>
        </td>
      </tr>
  </table>
</div> 
```

在后面的代码中，我有以下内容：-

```
 string defaultLanguage = Thread.CurrentThread.CurrentUICulture.ToString();

    protected void Page_Load(object sender, EventArgs e)
    {
        this.InitializeCulture();
    }

    protected void InitializeCulture()
    {
        if (String.IsNullOrEmpty(CurrentCulture))
        {
            CurrentCulture = defaultLanguage;
        }            

        if (!String.IsNullOrEmpty(CurrentCulture))
        {
            try
            {
                Thread.CurrentThread.CurrentCulture = new CultureInfo(CurrentCulture);
                Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
            }
            catch
            {
                throw;
            }
        }
    }

    public String CurrentCulture
    {
        get
        {
            if (null != Session["PreferedCulture"])
                return Session["PreferedCulture"].ToString();
            else
                return "en-US";
        }
        set
        {
            Session["PreferedCulture"] = value;
        }
    }

    protected void ddlLangs_SelectedIndexChanged(object sender, EventArgs e)
    {
        Session["PreferedCulture"] = ddlLangs.SelectedValue;
        InitializeCulture();
    } 
```

但是，当我在下拉列表中进行更改时，文化仍然相同。通常，当应用于 System.Web.UI.Page 时，我会覆盖 InitializeCulture()，但是我找不到在 ascx 中执行此操作的方法。

我怎样才能做到这一点？

感谢您的帮助和时间

-------------新代码------------------------ ------------

我决定让事情变得更简单，并且我已经设法实现了我想要的，但是我完全不喜欢并希望没有的页面刷新。

所以基本上我已经创建了一个现在正在运行的简单示例：-

Site.Master 只是将下拉菜单作为额外代码：-

```
 <div>
            <asp:DropDownList ID="ddlLangs" runat="server" onselectedindexchanged="ddlLangs_SelectedIndexChanged" AutoPostBack="True" 
                    meta:resourcekey="ddlLangsResource1">
                <asp:ListItem Text="English" Value="en-US" 
                    meta:resourcekey="ListItemResource1" ></asp:ListItem>
                <asp:ListItem Text="German" Value="fr-FR" meta:resourcekey="ListItemResource2" ></asp:ListItem>
                <asp:ListItem Text="Spanish" Value="it-IT" 
                    meta:resourcekey="ListItemResource3" ></asp:ListItem>
            </asp:DropDownList>
        </div> 
```

后面的代码如下所示：-

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (Session["PreferredCulture"]!= null)
                ddlLangs.SelectedValue = Session["PreferredCulture"].ToString();

        }
    }

    protected void ddlLangs_SelectedIndexChanged(object sender, EventArgs e)
    {
        Session["PreferredCulture"] = ddlLangs.SelectedValue;
        Server.Transfer(Request.Path);
    } 
```

Default.aspx 具有 MainMenu UC 和示例标签，但是它继承自 BasePage：-

```
<asp:Content ID="MenuContent" runat="server" ContentPlaceHolderID="MainMenuContent">
<uc:MainMenu runat="server" ID="ucMainMenu" /> 
```

## 欢迎使用 ASP.NET！

```
</asp:Content> 
```

BasePage 有初始化文化的代码

我希望摆脱 Server.Transfer(Request.Path)，避免刷新页面，但是我还没有找到方法。

任何帮助/想法将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:23:14.640

InitializeCulture() 方法在页面生命周期的早期执行，因此您在此方法中设置的文化是旧的..不是用户选择的那个..所以您必须再次请求页面以设置用户选择的文化。那就是你通过 Server.Transfer(Request.Path) 做什么..

如果您想避免“Server.transfer”.. 您需要在 InitializeCulture() 方法执行期间获取文化的新值并分配该新值。这是向您展示如何在 InitializeCulture() 方法执行期间检索新值[的链接。](http://www.codeproject.com/Articles/15313/Globalization-and-localization-demystified-in-ASP)

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T13:13:48.567

这是一篇相当老的帖子，但由于本地化可能有点棘手，我有一些提示。对于每个页面，您需要使用以下代码覆盖 web.ui.page。所以我要做的是创建一个继承自 web.ui.page 的新类，并让 aspx 页面继承自该新类：在本例**中为 PortalPage。**

```
public class PortalPage:System.Web.UI.Page
{

    protected override void InitializeCulture()
    {
        string _language = (string)Session["Language"];
        if (_language == null)
        {
            _language = ConfigurationManager.AppSettings["DefaultLanguage"];
            Session["Language"] = _language;
        }

        Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.CreateSpecificCulture(_language);
        Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(_language);
        base.InitializeCulture();
    }
} 
```

接下来，不要从 System.Web.UI.Page 继承您的网页，而是从您的新类继承。在此示例中：PortalPage

```
public partial class pages_Databases : PortalPage
{
      protected void Page_Load(object sender, EventArgs e)
      {

      }
} 
```

然后将所有资源文件 (.resx) 放在适当的子文件夹 (App_LocalResources) 中，并确保您的 resx 文件名与您的 web 控件匹配。

最后：重新编译！或重建！如果没有，您的 web 控件将不会被刷新/显示结果。

# ruby-on-rails - rails fields_for parent id 未在子模型上设置

> ID：12347001
> 
> 赞同：1
> 
> 时间：2012-09-10T07:24:14.057
> 
> 标签：ruby-on-rails, callback, fields-for

我一直在研究[NestedAttributes](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)和[FormHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)的 rails api 文档并搜索 stackoverflow。

我的 new.html.haml 视图中有以下代码：

```
=form_for listing, :html => {:id => :listing_form, :multipart => :true} do |f|
    =f.fields_for :main_picture, (listing.main_picture || listing.build_main_picture) do |fmp|
            =fmp.hidden_field :main, :value => 1
            =fmp.file_field :image, :class => :picture_select 
```

我的控制器中的以下代码：

```
 def create
    @listing = Listing.new(params[:listing])

    @listing.save ? redirect_to(:root) : render('listings/new')
  end 
```

这是我的listing.rb：

```
class Listing < ActiveRecord::Base
  has_one :main_picture, :class_name => "Picture", :conditions => {:main => true}
  attr_accessible :main_picture_attributes
  accepts_nested_attributes_for :main_picture, :allow_destroy => true
end 
```

还有我的图片.rb：

```
class Picture < ActiveRecord::Base
  belongs_to :listing
  validates_presence_of :listing
  attr_accessible :listing, :main
end 
```

当我尝试提交表单时收到以下错误消息：

```
main_picture.listing: can't be blank 
```

我无法弄清楚为什么框架没有自动将 main_picture（对象图片）的 listing_id 字段设置为父列表对象的 id 值。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:29:41.017

你需要`validates_presence_of :listing`吗？我怀疑子记录是在父对象之前创建的，因此它还没有 ID。

删除该行并添加`:dependent => :destroy`到您的`has_one :main_picture`行将确保您最终不会得到孤立的图片记录。

或者，重写你的控制器：

```
p = params[:listing]
@listing = Listing.new(p)
@picture = Picture.new(p.delete(:main_picture).merge({:listing => @listing})

etc. 
```

# android - 如何在android中的多列列表视图的列之间绘制一条垂直线？

> ID：12347003
> 
> 赞同：0
> 
> 时间：2012-09-10T07:24:16.517
> 
> 标签：android, android-listview

现在我正在使用 android 中的多列列表视图。

我的需要是在 android 中的多列列表视图的列之间绘制一条垂直线。这意味着我试图将这个多列列表视图显示为像网格视图一样。下面的图片会让你清楚我的疑惑，请找到它

![在此处输入图像描述](../Images/7e8a4ec7af121ea224c55a4a70a8f644.png)

如何实现这个概念。建议？

提前致谢！..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:26:42.883

```
<View
    android:id="@+id/view1"
    android:layout_width="fill_parent"
    android:layout_height="2dip"
    android:layout_below="@+id/te1"
    android:background="#F0FFFF" /> 
```

并检查此链接 [http://thiranjith.com/2010/02/19/how-to-display-border-lines-with-tablelayouts/](http://thiranjith.com/2010/02/19/how-to-display-border-lines-with-tablelayouts/)

[http://mobileorchard.com/android-app-development-%E2%80%93-layouts-part-two-table-and-absolute-layouts/](http://mobileorchard.com/android-app-development-%E2%80%93-layouts-part-two-table-and-absolute-layouts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:28:48.180

我认为要连续显示数据，请使用 textview 。

所以把 View 放在每个 textview 之间。

```
<View
     android:layout_width="5dp"
     android:layout_height="fill_parent"
     android:background="#ababab" /> 
```

所以它显示谎言。

```
Dev | 000000000000000000 | Chennai
PSl | 000000000000000000 | Mumbai 
```

# solr - Solr 就地实时升级 3.1 到 3.5

> ID：12347004
> 
> 赞同：1
> 
> 时间：2012-09-10T07:24:23.177
> 
> 标签：solr

升级 Solr 实例需要什么（确切的版本是 3.1 - 3.5）？是否可以进行就地升级并避免服务中断？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:12:02.080

为了避免*任何*服务中断，我建议构建一个全新的 Solr 实例，在不同的服务器（或同一服务器上的不同端口）上启动它，填充索引，然后切换生产客户端发送它的服务器/端口查询到。然后您可以使旧的 Solr 实例脱机，在旧的服务器/端口上启动新的 Solr 配置的新实例并切换回客户端。

# java - 如何在不扩展类的情况下实现动态多态

> ID：12347007
> 
> 赞同：38
> 
> 时间：2012-09-10T07:24:37.557
> 
> 标签：java, oop, design-patterns, polymorphism

我在一次采访中被问到如何在不扩展类的情况下实现动态多态性。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-10T07:27:00.363

[Decorator design pattern](http://en.wikipedia.org/wiki/Decorator_pattern) that exploits [encapsulation](http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming)) is what you're looking for.

Polymorphism through inheritance:

```
class Cat {
  void meow() {
    // meow...
  }
}
class Lion extends Cat {
} 
```

Polymorphism through encapsulation (Decorator pattern):

```
interface Cat {
  void meow();      
}
class Lion implements Cat {
  private Cat cat;
  void meow() {
    this.cat.meow();
  }
} 
```

ps. More about decorators: [http://www.yegor256.com/2015/02/26/composable-decorators.html](http://www.yegor256.com/2015/02/26/composable-decorators.html)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-10T07:30:09.163

简单的解决方案是编写一个实现接口而不是扩展基类的类。

另一种解决方案是创建一个动态代理......这本质上是一种无需显式编写类即可实现接口的聪明方法。有关详细信息，请参阅[`Proxy`javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)。

是的，这些是（或可以是）装饰器模式的示例，尽管这里的关键是实现技术而不是设计模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T15:51:59.743

根据我的经验，在大多数工作面试中，问题不会寻找过于复杂的答案，而且大多数时候只是棘手的问题，所以如果他们专门询问多态性而不扩展类，那么我会说：

**是的，您可以通过实现接口而不是扩展类来实现动态多态性**

那么如果他们要求更多的选择，那么提出代理、模式或其他东西就可以了。

希望能帮助到你！

# objective-c - Objective-C：int 不能是 NAN？

> ID：12347017
> 
> 赞同：0
> 
> 时间：2012-09-10T07:25:41.770
> 
> 标签：objective-c, ios, int, double, nan

似乎 Objective-C 中的 int 不能是 NAN。此比较返回 false。

```
int i = NAN;
NSLog(@"isNan: %@", (isnan(i)) ? @"YES" : @"NO"); 
```

有什么方法可以将 int 设置为 NAN，还是我必须使用双精度值？

```
double d = NAN;
NSLog(@"isNan: %@", (isnan(d)) ? @"YES" : @"NO"); 
```

加倍它可以工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:30:42.443

`NaN`是一个特定于浮点数（`float`和`double`在 C 中）在内部表示的方式（IEEE 754）的值。Is 不适用于整数数据类型，因为它们可能以完全不同的方式表示。

作为一种解决方法，您可能会看到人们使用单独的布尔标志来指示值是否有效，或者极端值`INT_MIN`/ `INT_MAX`。`NaN`虽然，这些都与确保有效值一样好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T07:36:35.810

NAN 是来自 IEEE 754 标准的浮点值（参见[http://en.wikipedia.org/wiki/NaN](http://en.wikipedia.org/wiki/NaN)）

[根据维基百科](http://en.wikipedia.org/wiki/NaN#Integer_NaN)：

> 大多数固定大小的整数格式没有任何方式明确指示无效数据。

# php - Optimizing AJAX requests for retrieving comments

> ID：12347022
> 
> 赞同：0
> 
> 时间：2012-09-10T07:26:20.380
> 
> 标签：php, ajax, performance, pagespeed

Hi i have a discussion page in PHP where there will be topics listed with comments below that. I'm loading all the topics during the page load and comments through ajax request. Since the user can add any number of topics and any number of comments under each topic, the page tooks very huge time to load(In case when 10 topics(paginated) and 100 comments under each topic). So how to optimize this for some great speed? Any idea on this would be greatly appreciated.

Note: I'm sending a request for each topic

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:13:11.447

在初始页面加载期间加载一些基本主题和一些评论，然后在用户单击相应链接以加载更多时使用 AJAX 加载更多评论/主题。以 Facebook 更新为例。

# wordpress - 使用 Wordpress WooCommerce 插件创建“品牌”类别

> ID：12347026
> 
> 赞同：1
> 
> 时间：2012-09-10T07:26:39.567
> 
> 标签：wordpress, woocommerce

对于我的电子商务网站，我正在尝试为每种产品实施产品“品牌”，例如三星、诺基亚等。我想创建一个新的*类别*类型“品牌”，并且一种产品只能分配给一个“品牌”类别。

产品由 WooCommere 插件称为“产品”的自定义帖子类型实现。

我正在使用[woocommerce](http://wcdocs.woothemes.com/)插件。这个插件已经有一个“产品类别”选项，允许将产品分配到类别，我想保持原样，因为我想要不同的产品类别，如“电子”、“衣服”、“家庭”等。保持这个类别不变，我想创建一个名为“品牌”的新类别类型，它将适用于产品。

关于如何编写插件以创建名为“品牌”的自定义类别并将其显示在“创建新产品”管理页面*（用于创建新帖子的典型 wordpress 管理页面）的*任何想法？我还想将一种产品仅限于一个类别。

我是 Wordpress 的新手，所以您的建议对我非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:29:16.610

我已经开始使用名为 Brand 的 WooCommerce 扩展程序，它可以满足您的需求。虽然我遇到了一些问题，但它使我能够按品牌名称列出产品，并且有几个小部件和短代码。

在左侧菜单中的我的[纸工艺网站上查看](http://charlotteswebpapercraft.com.au)

# ios - 如何更改 UILabel 线中的垂直边距/间隙

> ID：12347031
> 
> 赞同：0
> 
> 时间：2012-09-10T07:27:01.463
> 
> 标签：ios, nsstring, uilabel, margin, drawrect

我正在寻找一种方法来减少多行 UILabel 中的行间距。

这似乎在这里提到了[Objective C-UILabel 多行垂直间隙高度](https://stackoverflow.com/questions/1737092/objective-c-uilabel-multiline-vertical-gap-height)。

但在重新发明轮子之前，我想澄清一下：

例如，请参见此处![它是如何在 Photoshop 中完成的](../Images/fd73308a4d6b3ed5b6b2378c7170f6cb.png)

任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:24:21.257

使用 UILabel 无法做到这一点，但您可以使用[MSLabel](https://github.com/LemonCake/MSLabel)

# jquery - 更改动态添加元素的文本

> ID：12347033
> 
> 赞同：0
> 
> 时间：2012-09-10T07:27:14.300
> 
> 标签：jquery

创建新的 html 元素后

```
$('select#base_element').append('<option value="new_option" id="option_'+id+'">New option</option>'); 
```

我该怎么办：

```
$('#option_'+id).text('new text'); 
```

id 是一个全局变量，每次添加新选项时都会更新

下面是我正在尝试做的完整示例：

```
<html>
<head>
<script src="jquery.min.js"></script>
<script type="text/javascript">
var id = 0;
function addOption() {
    $('#myselect').append('<option id="option_'+id+'" value="blah">blah '+id+'</option>');
    $('#buttons').append('<input type="button" onclick="changeText('+id+');" value="Change text of option '+id+'" />');
    id += 1;
}

function changeText(target_id) {
        alert('Change Text clicked');
    $('#option_'+id).text('New text for option '+target_id);
}

$(function() {
    addOption();
    addOption();
    addOption();
});
</script>
<head>
<body>
<select id="myselect">

</select>
<div id="buttons"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:34:11.943

像这样试试

```
$('select #option_'+id).text('New text');  //you can use html in place of text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:08:15.867

***试试这个***

```
html>
<head>
<script src="jquery.min.js"></script>
<script type="text/javascript">
var id = 0;
function addOption() {
    $('#myselect').append('<option id="option_'+id+'" value="blah">blah '+id+'</option>');
    $('#buttons').append('<input type="button" onclick="changeText('+id+');" value="Change text of option '+id+'" />');
    id += 1;
}

function changeText(target_id) {
// the modification is here

      $('select#myselect').find('#option_'+target_id).text('New text for option ');
}

$(function() {
    addOption();
    addOption();
    addOption();
});
</script>
<head>
<body>
<select id="myselect">

</select>
<div id="buttons"></div>
</body>
</html> 
```

**[JS小提琴](http://jsfiddle.net/NWMsF/7/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:30:00.107

您可以将元素的内容设置为您想要使用的任何内容

```
$('#option_'+id).html('new text or html'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:52:46.987

我已经为上述问题完成了完整的垃圾箱。所以尝试如下演示脚本链接：

**演示** [http://codebins.com/bin/4ldqp7g](http://codebins.com/bin/4ldqp7g)

**HTML**

```
<input type="button" id="btnadd" value="Add Option" />
<br/>
<select id="myselect">
</select>
<div id="buttons">
</div> 
```

**jQuery**

```
var id = 0;
$(function() {
    $("#btnadd").click(function() {
        addOption();
    });
});

function addOption() {
    id += 1;
    $('#myselect').append('<option id="option_' + id + '" value="blah">blah ' + id + '</option>');
    $('#buttons').append('<input type="button" onclick="changeText(' + id + ');" value="Change text of option ' + id + '" />');
}

function changeText(target_id) {
    // Need to correction is here
    $('#myselect #option_' + target_id).text('New text for option #' + target_id);
    //OR
    // $('#myselect #option_' + target_id).html('New text for option #' + target_id);
} 
```

**演示** [http://codebins.com/bin/4ldqp7g](http://codebins.com/bin/4ldqp7g)

# asp.net-mvc-3 - 在 C# 中格式化日期时间值

> ID：12347034
> 
> 赞同：1
> 
> 时间：2012-09-10T07:27:17.667
> 
> 标签：asp.net-mvc-3, c#-4.0

我想以这种格式格式化日期时间值（“yyyy/MM/dd”）

下面是代码，m用来这样做

```
DateTime? date = DateTime.Now;
DateTime? formattedDate = Convert.ToDateTime(date.Value.ToString("yyyy/MM/dd"));
Console.WriteLine(formattedDate);
Console.ReadLine(); 
```

代码工作正常，但您可以在上面的代码中看到我已将 datetime 变量声明为 null，这反过来会导致问题

请建议我在上面的代码中做错了什么。

当我得到这样的输出时`9/10/2012 12:00:00 AM`

谢谢，阿曼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:28:36.407

问题是您所说`formattedDate`的实际上是 DateTime 的另一个实例。本机 .NET DateTime 结构中没有格式的概念。只有在将其转换为字符串时才能谈论格式化：

```
DateTime date = DateTime.Now;
string formattedDate = date.ToString("yyyy/MM/dd"));
Console.WriteLine(formattedDate); 
```

或者，如果您想使用可为空的 DateTime：

```
DateTime? date = DateTime.Now;
string formattedDate = date.Value.ToString("yyyy/MM/dd"));
Console.WriteLine(formattedDate); 
```

但是由于您的问题带有 标记`asp.net-mvc-3`，因此还有其他方法可以格式化值。例如使用`[DisplayFormat]`视图模型上的属性：

```
[DisplayFormat(DataFormatString = "{0:yyyy/MM/dd}", ApplyFormatInEditMode = true)]
public DateTime? Date { get; set; } 
```

如果要显示视图模型的值，请在视图中：

```
@Html.DisplayFor(x => x.Date) 
```

或者，如果您想生成具有正确格式值的输入字段：

```
@Html.EditorFor(x => x.Date) 
```

# c# - jQuery 星级评定和与中继器控件的绑定

> ID：12347038
> 
> 赞同：0
> 
> 时间：2012-09-10T07:27:19.887
> 
> 标签：c#, jquery, asp.net, data-binding, repeater

我将星级评定 jQuery 绑定在转发器控件中。

评级值取自数据库。我面临的问题是，中继器控件仅显示数据库中的最后一个评级值。

我尝试通过这里给出的方法[使用 jQuery 和 CSS 将数字转换为星级显示](https://stackoverflow.com/questions/1987524/turn-a-number-into-star-rating-display-using-jquery-and-css)

jQuery 添加到示例中：

```
$(document).ready(function () {
            $('#chk').click(function () {         
                $('input[type=hidden]').each(function () {
                    var hiddenValue = $(this).val();                  
                    document.getElementById('span1').html = hiddenValue;
                    $("#span1").text(hiddenValue);
                }); 
```

我的设计代码是：

```
<asp:repeater id="RepDetails" runat="server">
<HeaderTemplate>
   </HeaderTemplate>
<ItemTemplate>   
Rating:<td align="left">
  <span class="stars" id="span1"></span>
</td>
<asp:HiddenField ID="HiddenField1" runat="server" Value='<%#Eval("Rating") %>' />
 <a id="chk">Click</a>
</td>  
</ItemTemplate>
<FooterTemplate>
</FooterTemplate>
</asp:repeater> 
```

代码文件

```
protected void Page_Load(object sender, EventArgs e)
{        
        partnerid = "1";
        productid = "2";
        DataSet ds = ServiceObj.GetComments(partnerid, productid);
        RepDetails.DataSource = ds.Tables[0];
        RepDetails.DataBind();
} 
```

有什么建议可以为数据库中的每个值绑定评级吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:57:10.020

乍一看，您有一个错误可能导致您的问题：

```
$("#span1").text(hiddenValue); 
```

如果我是对的，您的 jQuery 选择器将找到带有 ID 的 DOM 元素，这意味着应该**只找到一个元素**。因此，您可能只有在 jQuery 中找到的最后一个**#span1**。尝试将其更改为另一个选择器，例如：

```
$(".aClass").text(hiddenValue);
$(this).find('input[type="hidden"]').text(hiddenValue); 
```

# datacontract - Adding [DataContract] to class with [Serializable] causes problems

> ID：12347039
> 
> 赞同：0
> 
> 时间：2012-09-10T07:27:20.613
> 
> 标签：datacontract, serializable

I am using the DataContractSerializer to persist objects. Most classes have the [DataContract] attribute but one (not sure why) has [Serializable]. The properties of this class have the [DataMember] attribute. So far, it has worked ok.

Recently, I tried to add a new property but get an error when deserialising. The error message is something like: 'property Notes was expected but found property ModuleNr'.

I tried adding the [DataContract] attribute but got a different error like: 'Deserialised object with id 15 not found'. It seems that the class is not being deserialised at all.

Can anyone explain what I am doing wrong and what I can do to deserialise the existing objects.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:34:19.513

是不是被持久化的对象使用的是旧的类结构，而你添加的属性是必需属性，导致反序列化失败？

此外，如果 Serializable 属性存在并且您不确定它为什么存在，那么验证其他代码是否没有使用此类进行序列化可能是个好主意 - 如果是，您添加的新属性可能会破坏它:)

希望这可以帮助！

# jquery-mobile - Closing the Mobiscroll Datepicker Explicitly

> ID：12347041
> 
> 赞同：0
> 
> 时间：2012-09-10T07:27:24.913
> 
> 标签：jquery-mobile, mobiscroll

My application has the session timeout, the application goes to the login page after 15 mins of inactive. The problem i am facing is when the user opened the Mobiscroll date picker and remain in the same page for the 15 mins, the Session timeout alert shows, but the mobiscroll date picker remain in the login page also.

Is there any way to close the mobiscroll date picker explicitly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:32:05.313

`$('.dw').detach();`

从页面中删除移动滚动屏幕。

`$('.dwo').detach();`就是从DOM中删除mobiscroll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T12:43:44.737

您还可以在“取消”按钮上触发单击事件，这与用户手动关闭日期选择器相同：

```
$("#dw_cancel").click(); 
```

# c# - Can session call dispose method on session ending time?

> ID：12347044
> 
> 赞同：4
> 
> 时间：2012-09-10T07:27:35.740
> 
> 标签：c#, asp.net-mvc

I want to know if IDisposable objects will dispose on session ending.

I know, I can dispose on Session ending event myself. But I want to write an IDisposable class.

For example, I have

```
public class MyObject : IDisposable
{
    // some properties

    public void Dispose()
    {
        // disposing
    }
} 
```

and I need to dispose this object on session ending time :

```
 protected void Session_End(object sender, EventArgs e)
    {
        if (Session["key"] != null)
            ((MyObject)Session["key"]).Dispose();
    } 
```

So, I want to know on session ending time that operation will automatically or I need write as above.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:15:05.837

Session_End 不会自动处理 IDisposable 对象，因此您的 Session_End 解决方案是正确的。

然而：

*   Session_End 仅在您使用“inproc”会话时调用（但对于其他类型，您需要一个可序列化的对象）
*   它仅在会话超时到期后调用，因此您将此资源保留了额外的 20 分钟（或任何您的超时时间）

因此，请尝试找到一个不需要您将 IDisposable 对象存储在 Session 中的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:44:46.710

实现接口的类的实例`IDisposable`只会在您调用该`Dispose`方法时被“释放”，无论是直接还是通过`using`构造间接调用。当对象超出范围时，它不会自动发生。

例如，这将是不好的做法；

```
public void SomeMethodCalledDuringSession()
{
    var resourceHog = new ResourceHog(); // where ResourceHog : IDisposable
    // Perform operations
} 
```

无论您的 ASP.NET 会话结束如何，该对象都不会在此处正确处理。但是，您可以`Dispose`在完成后直接调用，或者更好的办法是这样做；

```
public void SomeMethodCalledDuringSession()
{
    using(var resourceHog = new ResourceHog()) // where ResourceHog : IDisposable
    {
        // Perform operations
    }
} 
```

这转化为一种`try ... finally`模式，`Dispose`在`finally`子句中调用 to，确保它被调用（除了一些罕见的情况）。

**编辑**：我也会读这个；[http://nitoprograms.blogspot.co.uk/2009/08/how-to-implement-idisposable-and.html](http://nitoprograms.blogspot.co.uk/2009/08/how-to-implement-idisposable-and.html)

# c++ - 从文件中获取特定的 c++ 函数而不包括文件

> ID：12347045
> 
> 赞同：0
> 
> 时间：2012-09-10T07:27:50.903
> 
> 标签：c++

考虑一个 fun.cpp 文件：

```
class fun

{

  public:

  void sum();

  void dispaly();

};

Class fun2

{

    public: 

     void subtract();

}; 
```

现在考虑另一个 c++ 文件 execute.cpp，我只想访问 fun.cpp 文件的减法。

我不想在我的 execute.cpp 中包含“fun.cpp”文件，因为它会增加大小（在较大的项目中）..

那么，我怎样才能访问任何特定的方法，包括文件？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:35:31.060

> 我不想在我的 execute.cpp 中包含“fun.cpp”文件

你也不应该，因为它会破坏一个定义规则（假设实现也在 cpp 文件中）。

执行此操作的常用方法是将类定义放在头文件中，并且只包含头文件。

要回答你的问题，你可以，**但它是 fugly**。

C++ 允许我们多次定义一个类，**只要定义相同**。所以，`execute.cpp`你可以简单地写：

```
//execute.cpp
class fun2  //note lower-case 'c'
{

    public: 
     void subtract();
};
// use fun2 here 
```

在你使用它之前。`.h`但是，同样，通常的方法是在一个文件和一个文件中打破类定义和实现`.cpp`。

*强制性建议：*阅读一本好的 C++ 入门书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:30:41.050

即使您包含该文件，链接器也只会包含实际使用的代码。这就是为什么使用静态库有时比必须包含所有内容的动态库更可取的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:31:01.330

你不能。如果要包含该函数，则实际上需要包含链接到定义该函数的代码的文件。如果您只需要接口并且不打算使用该函数，您可以简单地在 execute.cpp 中声明该类，如下所示

```
class fun
{
    public:
        void subtract();
}; 
```

但是你不能在那里使用减法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T07:38:43.967

您需要在要使用该函数的 cpp 文件中包含定义类`fun`（*并具有声明`subtract()`*`subtract()`）的头文件。
请注意，必须定义函数。

**乐趣2.h**

```
#ifndef FUN2_H
#define FUN2_H

Class fun2  
{      
    public:        
       void subtract();   
};

#endif // FUN2_H 
```

**乐趣2.cpp**

```
#include "fun2.h"
void func2::subtract()
{

} 
```

**执行.cpp**

```
#include "fun2.h"

//use subtract() through object of `fun2` 
```

请注意，要在特定源文件中使用成员函数，声明该函数的类的定义应该对编译器可见，链接到特定定义的实际工作是在链接阶段完成的，只要你按照上述格式，链接器应为您链接适当的功能。

# php - Undefined index HTTP_HOST even though it is checked

> ID：12347048
> 
> 赞同：24
> 
> 时间：2012-09-10T07:28:02.953
> 
> 标签：php, apache

Here's the code:

```
if (isset($_SERVER['HTTP_HOST']) === TRUE) {
  $host = $_SERVER['HTTP_HOST'];
} 
```

How is it possible to get an "Undefined index HTTP_HOST" on the line inside the if statement? I mean, the index setting is checked before it is used.

And why could the HTTP_HOST sometimes be not set?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-10T07:38:55.303

你在使用 PHP-CLI 吗？

HTTP_HOST 仅适用于浏览器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-17T01:25:54.990

一个糟糕的浏览器可以省略发送 que 主机头信息，试试这个例子：

```
telnet myphpserver.com 80
> GET / <enter><enter> 
```

在这种情况下 $_SERVER['HTTP_HOST'] 没有赋值，在这种情况下你可以使用 $_SERVER['SERVER_NAME'] 但前提是 $_SERVER['HTTP_HOST'] 为空，因为 no 是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T07:33:15.810

如果您在浏览器上运行，则必须始终设置 HTTP_HOST...然后无需检查...简单地说，

```
$host = $_SERVER['HTTP_HOST']; 
```

足够的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T07:45:47.393

我通常会省略`=== TRUE`, 因为这里不需要它，因为它`isset()`返回一个布尔值，但这不应该阻止你的代码工作。

我还会在 if 语句*之前*将 $host 设置为合理的默认值（取决于您的应用程序） 。如果稍后要引用它，我有一个一般规则，即不要在条件中引入新变量。

```
$host = FALSE;    // or $host = ''; etc. depending on how you'll use it later.
if (isset($_SERVER['HTTP_HOST'])) {
  $host = $_SERVER['HTTP_HOST'];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-15T19:09:12.433

当使用空主机完成请求时：

```
GET / HTTP/1.1
Host: 
```

那么 isset($_SERVER['HTTP_HOST']) 是真的！

最好使用空的，例如：

```
$host = '';
if (!empty($_SERVER['HTTP_HOST'])) {
  $host = $_SERVER['HTTP_HOST'];
} 
```

有关详细信息，请查看此处[https://shiflett.org/blog/2006/server-name-versus-http-host](https://shiflett.org/blog/2006/server-name-versus-http-host)

# ruby-on-rails - ruby on rails time_ago_in_words 秒前不显示

> ID：12347053
> 
> 赞同：2
> 
> 时间：2012-09-10T07:28:27.313
> 
> 标签：ruby-on-rails, date, locale, seconds, timeago

这是我的**en.yml 语言环境**

```
en:
  datetime:
    distance_in_words:
      less_than_x_seconds:
        one: "1 sec"
        other: "%{count} secs"
      x_seconds:
        one: "1 sec"
        other: "%{count} secs"
      less_than_x_minutes:
        one: "1 min"
        other: "%{count} mins"
      x_minutes:
        one: "1 min"
        other: "%{count} mins"
      about_x_hours:
        one: "1 hour"
        other: "%{count} hours"
      x_days:
        one: "1 day"
        other: "%{count} days"
      about_x_months:
        one: "1 month"
        other: "%{count} months"
      x_months:
        one: "1 month"
        other: "%{count} months"
      about_x_years:
        one: "1 year"
        other: "%{count} years"
      over_x_years:
        one: "1 year"
        other: "%{count} years"
      almost_x_years:
        one: "1 year"
        other: "%{count} years" 
```

每当我发布我使用的东西时

```
<%= link_to time_ago_in_words(post.created_at), post_path(post) %> 
```

显示自帖子创建以来的时间，而不是显示**1 sec**，**2 secs**等...它显示**1 min**，并继续显示**分钟**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:36:34.000

您需要传递`true`给`time_ago_in_words`的`include_seconds`参数：

```
time_ago_in_words(post.created_at, true) 
```

请参阅 的[文档`distance_of_time_in_words`](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)，`time_ago_in_words`了解更多详细信息。

# git - JIRA Git Plugin + component of Project

> ID：12347055
> 
> 赞同：1
> 
> 时间：2012-09-10T07:28:35.737
> 
> 标签：git, jira

I want to link git repository with component of project in Jira. Can I do that?

Jira Git Plugin [https://studio.plugins.atlassian.com/wiki/display/JGIT/JIRA+Git+Plugin](https://studio.plugins.atlassian.com/wiki/display/JGIT/JIRA+Git+Plugin)

# .htaccess - Htaccess rule doesnt work

> ID：12347056
> 
> 赞同：0
> 
> 时间：2012-09-10T07:28:35.777
> 
> 标签：.htaccess, mod-rewrite

I have got this rule.. which I put as my first rule

```
RewriteRule ^categories_compare/$ index.php?app_table_comparison=3 [L] 
```

This is the url that I type:

```
http://apps.com/categories_compare 
```

The problem is that it doesnt do the redirect.. why is that?

This is part of my htaccess:

```
RewriteRule ^news2/([^/\.]+).(html)$ index.php?news_url_two=$1 [L]
RewriteRule ^news/([^/\.]+).(html)$ index.php?news_url=$1 [L]
RewriteRule ^categories_compare/?$ index.php?app_table_comparison=3 [L] 
```

I want the last rule to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:32:33.063

```
RewriteRule categories_compare http://fuckedapps.com/index.php?app_table_comparison=3 [L] 
```

好的，这就是没有任何 ^ 或 / 或 ^ 或 $ 的解决方案。

奇怪的是，当我放 ^categories_ 时它不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:30:55.533

你的正则表达式是: `^news3/$`，所以它最后需要一个尾随`/`，但你只需要`news3`. 尝试将您的规则更改为：

```
RewriteRule ^news3/?$ index.php?app_table_comparison=3 [L] 
```

这`/?`意味着斜线是可选的。

# c# - Best way to enumurate the following directories and files

> ID：12347058
> 
> 赞同：1
> 
> 时间：2012-09-10T07:28:41.033
> 
> 标签：c#, .net, wpf, string, directory

I have bunch of directories at a certain paths in the following possible format:

```
C:\Program Files\Logic\DDC[ 0 ]

C:\Program Files\Logic\DDC[ 1]

C:\Program Files\Logic\DDC[2    ]

C:\Program Files\Logic\DDC[3] 
```

I'd like to accomplish the following:

1)Enumurate all of numbered DDC directories and store their paths them in a List of String

```
I.E: List<String> ddcPaths -> should have:
ddcPaths[0] = "DDC[0]";
ddcPaths[1] = "DDC[1]";
ddcPaths[2] = "DDC[2]"; 
```

2)Enumurate all files directly under the DDC folder but nothing deeper than that

```
I.E: If DDC[0] has a.txt, b.txt and obj\c.txt, I should get
List<String> ddc_0 -> should have
ddc_0[0] = "a.txt";
ddc_0[1] = "b.txt"; 
```

I hope my explanation was clear enough but if something didn't make sense, please let me know.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:52:59.477

如果你有这样的数据结构，我建议你应该使用一个字典，目录名作为键，文件名列表作为值。例如：

```
var ddcPaths = new Dictionary<string, List<string>>();
foreach (var directoryInfo in new DirectoryInfo(@"C:\Program Files\Logic\").GetDirectories())
{
    if (directoryInfo.Name.Contains("DDC["))
    {
         ddcPaths.Add(directoryInfo.Name, new List<string>());
         foreach (var fileInfo in directoryInfo.GetFiles())
         {
             ddcPaths[directoryInfo.Name].Add(fileInfo.FullName);
         }
    }
} 
```

但是您应该注意到，U 不能通过 int 索引获取字典值，只能通过键，在此字典中声明（在我们的例子中是文件夹名称）。但是，如果您不想这样做，您可以执行以下操作：

```
var ddcPaths = new List<string>();
var filePaths = new List<List<string>>();

foreach (var directoryInfo in new DirectoryInfo(@"C:\Program Files\Logic\").GetDirectories())
{
   if (directoryInfo.Name.Contains("DDC["))
   {
       ddcPaths.Add(directoryInfo.Name);
       var tempList = new List<string>();
       foreach (var fileInfo in directoryInfo.GetFiles())
       {
           tempList.Add(fileInfo.FullName);
       }
       filePaths.Add(tempList);
    }
} 
```

但在这种情况下，U 使用两种不同的数据结构来表示相关数据。我建议使用字典是合乎逻辑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:51:46.930

您可以使用`DirectoryInfo`.

```
DirectoryInfo dirInfo = new DirectoryInfo("yourFolderPath");
IEnumerable<DirectoryInfo> subDirs = dirInfo.EnumerateDirectories();

List<string> subDirsNames = new List<string>();
foreach (var subDir in subDirs)
 {
   subDirsNames.Add(subDir.Name.Trim());
   IEnumerable<string> files = subDir.EnumerateFiles().Select(i => i.Name);
   //do something with this list....
 } 
```

# javascript - Javascript 清理缓存以清除基本身份验证凭据

> ID：12347060
> 
> 赞同：1
> 
> 时间：2012-09-10T07:28:53.147
> 
> 标签：javascript, basic-authentication

我正在尝试使用基本身份验证进行注销。我想知道，是否有可能通过 JavaScript 清理客户端的浏览器缓存？有没有其他方法可以调用注销 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:33:29.407

出于安全原因，JavaScript 无法做到这一点，注销通常只会删除它创建的任何内容，这是正常行为。

# mysql - 使用触发器时执行无限循环

> ID：12347067
> 
> 赞同：0
> 
> 时间：2012-09-10T07:29:37.773
> 
> 标签：mysql, triggers, infinite-loop

我正在使用以下代码：

```
DELIMITER $$
DROP TRIGGER IF EXISTS after_insert_temp_ecs $$
CREATE 
    TRIGGER `after_insert_temp_ecs` AFTER insert ON `ecs` 
    FOR EACH ROW BEGIN
set @count =1;
WHILE(@count<=NEW.installments) THEN
insert into temp_ecs (amount_temp,_date_temp,id,name,installments) values(NEW.amount,(date_add(NEW._date,interval @count month)),NEW.id,NEW.name,NEW.installments);
set @count=@count+1;
END WHILE;
END;
$$
DELIMITER ; 
```

但是当我使用它时无限循环执行。代码中的错误是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:41:14.293

让我们假设`NEW.installments = 1`。现在考虑这个块

```
set @count =1;
WHILE(@count<=NEW.installments) THEN
insert into temp_ecs (amount_temp,_date_temp,id,name,installments) values(NEW.amount,(date_add(NEW._date,interval @count month)),NEW.id,NEW.name,NEW.installments);
set @count=@count+1;
END WHILE; 
```

触发器将再插入一条记录，然后`@count`将增加到 2，while 条件将不再保持 ( `WHILE(@count<=NEW.installments)`) 并且触发器将完成。

请注意，触发器插入了一个新行，其中`NEW.installments = 1`. 对于这一额外的行，触发器将再次运行，将再插入一行，这将永远持续下去。

# jquery - 您可以附加 on() 事件处理程序的最早点是什么（用于 live() 行为）

> ID：12347070
> 
> 赞同：1
> 
> 时间：2012-09-10T07:29:50.200
> 
> 标签：jquery, event-handling

所以这几乎是问题标题中的全部内容，您可以附加 on() 事件处理程序（用于 live() 行为）的最早点是什么？

进一步详细..

我知道`ready()`事件 jquery 模式，但根据一些（[参考](http://encosia.com/dont-let-jquerys-document-ready-slow-you-down/)），如果您使用诸如`live()`.

`live()`现在已弃用，而赞成使用`on()`类似的行为。

然而`live()`，用于`$(document)`在文档解析的早期附加听起来像是可用的事件。

`on()`另一方面，通常建议通过将事件附加到 DOM 中更接近目标的东西来使用。

因此，如果我的大部分内容都在一个`#main`部分中，那`$('#main')`将是附加`on()`处理程序的良好候选者。

考虑到这一点，什么时候可以安全地附加我的`on()`处理程序？

是不是在容器标签打开时？或者一旦关闭？

这是否可靠并且通常在浏览器中正常运行？

```
<html>
<!-- boring head stuff goes here (including loading jquery, obviously) -->
<body>

    <header>Stuff</header>

    <section id='main'>
        <script>
            $('#main').on('click','button.donkey', function() { alert ('you click the donkey');})
        </script>
        ...

        <button class="donkey">Donkey That!</button>
    </section>

    <footer>Other stuff</footer>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:17:04.567

您可以在元素附加到 dom 后立即附加事件。由于`.on()`现在负责所有类型的事件附加（直接附加以及委托），因此您不应在声明子元素之前附加事件，而是在结束时附加事件`#main`以保持一致。由于通常建议您尽可能晚地放置脚本，因此我将使用以下内容：

```
<section id='main'>
    ...
    <button class="donkey">Donkey That!</button>
</section>
<script>
    $('#main').on('click','button.donkey', function() { alert ('you click the donkey');})
</script> 
```

# asp.net - ASP.net 多数据库链接

> ID：12347077
> 
> 赞同：1
> 
> 时间：2012-09-10T07:30:13.863
> 
> 标签：asp.net, asp.net-mvc, entity-framework, azure, azure-sql-database

我有 2 个 Windows Azure 数据库服务器，它们的表方案相同，但数据不同。
在我的 asp.net 站点中，我像这样连接我的第一个数据库：

**Web.config**

```
<add name="FirstDBContext" connectionString="..." providerName="..." /> 
```

**数据库上下文.cs**

```
public class FirstDBContext: DbContext
{
   public DbSet<Data> Datas{ get; set; }
} 
```

**数据控制器.cs**

```
private UsersContext db = new UsersContext();
public ViewResult Index()
{
   return View(db.Datas.ToList());
} 
```

如您所见，我在代码中设置了我的数据库。例如，如何通过下拉列表将其更改为能够将一个 DB 动态更改为另一个 DB？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:58:02.137

您可以在初始化 UsersContext 时传递连接字符串的名称

例如，如果您有以下连接搅拌

```
<add name="csFirstDB" connectionString="..." providerName="..." />
<add name="csSecondDB" connectionString="..." providerName="..." /> 
```

您可以将您的 UsersContext 更改为

```
public class UsersContext : DbContext {
    public UsersContext (string connectionName) : base(connectionName){ }
} 
```

现在，当您初始化 UsersContext 类对象时，传入连接字符串名称，它将引用该特定数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:13:29.170

谢谢，这是个好主意。正确回答你。我现在可以更改目标数据库，并且可以列出条目。但是当我想要一个条目的详细信息时，它会返回一个错误。
我有测试：

```
private UsersContext db = new UsersContext("db1");

public ViewResult Index()
{
   db = new UsersContext("db2");
   return View(db.Users.ToList());
} 
```

这将返回良好的 db2 列表，但是当我继续详细信息时，它会失败并返回错误。

**这是问题的答案：** [在运行时更改 dbContext](https://stackoverflow.com/questions/12366811/changing-dbcontext-at-runtime)

# matlab - Matlab格式化：在sprintf中换行

> ID：12347078
> 
> 赞同：1
> 
> 时间：2012-09-10T07:30:28.023
> 
> 标签：matlab, printf

我得到输出的值，它对应于 2 个文件之间的差异：

```
output = 'a.x: low 0 -> low 1a.b : 3 -> Medium 6' 
```

然后我`printf`的内容

```
sprintf('files are different \n%s', output); 
```

但我想如下所示（自动换行）：

```
output :

a.x: low 0 -> low 1 
a.b : 3 -> Medium 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:11:56.263

你可以使用正则表达式来砍你的字符串

```
chopped = regexpi(output, '^(?<line1>[^>]*>[^\d]*[\d]*)(?<line2>.*)$', 'names') 
```

在这里做的伎俩。

```
>> chopped = 

    line1: 'a.x: low 0 -> low 1'
    line2: 'a.b : 3 -> Medium 6' 
```

假设是：

1.  你总是`->`在第一行有一个单曲
2.  第一行总是以后面的第一个数字结尾`->`
3.  以整数结束第一行的数值

如果您不熟悉正则表达式

*   `(?<line1> )`并`(?<line2> )`在这里捕获`chopped`变量中的匹配项。
*   `[^>]*`消耗到第一个`>`
*   `[^\d]*`消耗所有非数字字符（所以直到以下数字开始）
*   `[\d]*`消耗所有数字字符
*   `.*`消耗字符串的其余部分

# regex - 只提取第一次出现的字符串

> ID：12347090
> 
> 赞同：0
> 
> 时间：2012-09-10T07:31:21.177
> 
> 标签：regex, perl, find-occurrences

我搜索了很多，但我没有找到适合我正在寻找的答案，所以我发布了这个问题。

我想提取“par”、“comp”、“order”和“nameprefix”的第一次出现。如何为示例输入执行此操作？有没有 perl oneliners 可以做到这一点？

```
 wertydhhdbc->auCdl = '( nil
    par    (xyz)
    comp     asd1
    order        (done)
    namePrefix        "X"
    par    (xyz)
    comp     asd
    order        (done)
    namePrefix        "R"
    namePrefix        "X"
    par    (qwer)
    comp     key
    order        (done)
    namePrefix        "X"
    comp     key
    order        (done )
    par    (qwer)
    order        (done) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:34:35.077

是的，您可以使用一个简单的 Perl 单行代码来显示包含 eg 的第一行`par`：

```
perl -ne 'if (/par/) { print; last; }'  1.txt 
```

该`-n`开关使 perl 逐行遍历输入文件。然后，代码使其打印该行并在找到给定模式后停止。

**更新：**

要搜索每个单词的第一次出现，必须使用不同的技术：

```
perl -ne 'if(/(comp|par|order)/) {$f{$1}++; print if 1 == $f{$1} ; last if 3 == keys %f}' 1.txt 
```

3 是您要搜索的字数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:22:37.250

假设您想要第一次出现“par”、“comp”、“order”和“nameprefix”的整行。用于`\b`避免匹配单词，例如`orders`

```
print $1 if $str =~ /(\b(?:par|comp|order|nameprefix)\b.+)/ 
```

这将输出

```
par    (xyz) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:00:43.870

怎么样：

```
my ($par, $comp, $order, $nameprefix) = ($str =~ /par\s+(.+?)\s+comp\s+(.+?)\s+order\s+(.+?)\s+namePrefix\s+(.+?)\s/s);
print "par=$par\ncomp=$comp\norder=$order\nnameprefix=$nameprefix\n"; 
```

**输出：**

```
par=(xyz)
comp=asd1
order=(done)
nameprefix="X" 
```

# tsql - T-SQL 优雅的解决方案将一个数值划分为多个帐户

> ID：12347091
> 
> 赞同：1
> 
> 时间：2012-09-10T07:31:21.133
> 
> 标签：tsql, division

我有一个我认为有一个完美优雅的解决方案的问题，但需要一些帮助。

所以我有一张人员表和一个数值。除此之外，还有一个表格，其中包含该值（每人）到多个帐户的划分规则，规则可以是最大值或值的百分比。

这是这些表格的简化版本。

```
Persons(PersonID int, Value decimal)

Account(AccountID int, PersonID int)

Distribution(AccountID int, MaxValue decimal Null, Percentage decimal null) 
```

在某些时候，我需要将这些数值划分到第三个表中 - 该表保存了帐户和该帐户的值。

```
AccountValues(AccountID int, AccountValue decimal) 
```

账户数量（每人）不固定。在分布表中 - 如果两个分布值都为空 - 所有剩余值都将转到该帐户。分发顺序是按他们的 ID 的。

数据可能看起来像这样。

```
Persons  table
PersonID    Value
    1            1000,00
    2            2000,00
    3            5000,00
    4            500,00

Accounts table
AccountID   PersonID
1            1
2            1
3            2
4            2
5            2
6            3
7            3
8            4
9            4
10           4

Distribution table
AccountID    MaxValue    Percentage
1            500,00          null
2            null            null
3            null            0,5
4            null            0,2
5            null            null
6            1000,00         null
7            null            null
8            2000,00         null
9            null            0,2
10           null            null 
```

对 T-SQL 还是有点陌生​​，所以需要最简单和最有效的解决方案的帮助。

所以现在我正在考虑3种可能的解决方案。1\. 最不优雅 - 计算每个人的最大帐户数并循环多次。2\. 光标——也许是最好的方式？3\. CTE递归（我对此一无所知）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:52:12.737

我用过CTE。可能有一种更聪明的方法来进行总计，但我认为这是可行的。

数据设置：

```
declare @Persons table (PersonID int not null,Value decimal(18,4) not null)
insert into @Persons(PersonID,Value) values
(1,1000.00),
(2,2000.00),
(3,5000.00),
(4,500.00)

declare @Accounts table (AccountID int not null,PersonID int not null)
insert into @Accounts(AccountID,PersonID) values
(1,1),
(2,1),
(3,2),
(4,2),
(5,2),
(6,3),
(7,3),
(8,4),
(9,4),
(10,4)

declare @Distribution table (AccountID int not null,MaxValue decimal(18,4) null,Percentage decimal(6,5) null)
insert into @Distribution (AccountID,MaxValue,Percentage) values
(1,500.00,null),
(2,null,null),
(3,null,0.5),
(4,null,0.2),
(5,null,null),
(6,1000.00,null),
(7,null,null),
(8,2000.00,null),
(9,null,0.2),
(10,null,null)

declare @AccountValues table (AccountID int not null,Value decimal(18,4) null) 
```

实际查询：

```
;With DisbValues as (
    select
        a.AccountID,
        p.PersonID,
        CASE
            WHEN d.MaxValue is not null then d.MaxValue
            WHEN d.Percentage is not null then d.Percentage * p.Value
        END as Value,
        p.Value as TotalAvailable
    from
        @Distribution d
            inner join
        @Accounts a
            on
                d.AccountID = a.AccountID
            inner join
        @Persons p
            on
                a.PersonID = p.PersonID
), CumulativeValues as (
    select
        AccountID,
        PersonID,
        Value,
        COALESCE((select SUM(Value) from DisbValues d2 where d2.PersonID = d.PersonID and d2.AccountID < d.AccountID),0) as PrevValue,
        TotalAvailable
    from
        DisbValues d
)
insert into @AccountValues (AccountID,Value)
select
    AccountID,
    CASE WHEN PrevValue < TotalAvailable THEN
        CASE WHEN PrevValue + Value < TotalAvailable THEN Value --Entirely satisfied
        ELSE TotalAvailable - PrevValue --Partially satisfied
        END
    ELSE
        0 --Not satisfied
    END
from CumulativeValues 
```

第一个 CTE `DisbValues`（然后，第二个 CTE ( `CumulativeValues`) 将早期帐户需要填写的所有值相加。

然后，我们可以在最终查询中将事情分解为 3 种情况，如注释所示。

# javascript - 如何通过安全的 https 连接在 javascript 中使用基于 soap xml 的 web 服务？

> ID：12347092
> 
> 赞同：1
> 
> 时间：2012-09-10T07:31:23.973
> 
> 标签：javascript, web-services, firefox, soap, firefox-addon

我想在 JavaScript 中使用 XML SOAP Web 服务来创建 Firefox 插件，但我想使用的 Web 服务是在安全的 https 连接下。

> [https://cuotas.uci.cu:443/servicios/v1/InetCuotasWS.wsdl](https://cuotas.uci.cu:443/servicios/v1/InetCuotasWS.wsdl)

我下载的soapclient.js 库不适用于安全连接。我怎么解决这个问题？有没有现成的有用的 JS 库？

编辑：这是链接中显示的内容

```
<!-- WSDL file generated by Zend Studio. --><definitions name="InetCuotasWS" targetNamespace="urn:InetCuotasWS">
<types><xsd:schema targetNamespace="urn:InetCuotasWS">
<xsd:complexType name="Usuario"><xsd:all>
<xsd:element name="cuota" type="xsd:float"/><xsd:element name="cuota_usada" type="xsd:anyType"/>
<xsd:element name="nivel_navegacion" type="xsd:string"/>
<xsd:element name="usuario" type="xsd:string"/>
</xsd:all></xsd:complexType></xsd:schema></types>
<message name="ObtenerCuota"><part name="usuario" type="xsd:string"/><part name="clave" type="xsd:string"/>
<part name="dominio" type="xsd:string"/></message>
<message name="ObtenerCuotaResponse"><part name="ObtenerCuotaReturn" type="typens:Usuario"/></message><portType name="InetCuotasWSPortType">
<operation name="ObtenerCuota"><documentation>
            Obtener el estado de la cuota de un usuario dado su usuario y clave.
        </documentation>
<input message="typens:ObtenerCuota"/>
<output message="typens:ObtenerCuotaResponse"/></operation></portType><binding name="InetCuotasWSBinding" type="typens:InetCuotasWSPortType">
<soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
<operation name="ObtenerCuota"><soap:operation soapAction="urn:InetCuotasWSAction"/><input><soap:body namespace="urn:InetCuotasWS" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input><output><soap:body namespace="urn:InetCuotasWS" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output></operation></binding><service name="InetCuotasWSService"><port name="InetCuotasWSPort" binding="typens:InetCuotasWSBinding"><soap:address location="https://cuotas.uci.cu/servicios/v1/InetCuotasWS.php"/>
</port></service></definitions> 
```

编辑我使用 SoapUI 如你所说，这是 URI [https://cuotas.uci.cu/servicios/v1/InetCuotasWS.php?wsdl](https://cuotas.uci.cu/servicios/v1/InetCuotasWS.php?wsdl) 而 SoapMessage 是

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:InetCuotasWS">
<soapenv:Header/><soapenv:Body>
<urn:ObtenerCuota soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<usuario xsi:type="xsd:string">dogcalas</usuario>
<clave xsi:type="xsd:string">.*Pepe</clave>
<dominio xsi:type="xsd:string">uci</dominio>
</urn:ObtenerCuota></soapenv:Body></soapenv:Envelope> 
```

当我在 Firefox 中发送肥皂消息时，会显示警报（'ERROR'），并且 Firefox 的 firebug 插件会显示此消息。

> Error de lectura XML: no se encuentra elemento Ubicación: moz-nullprincipal:{fc98c066-ae21-4b57-b743-83e9519342c7} Número de línea 1, columna 1:

即使使用其他服务，Firefox 也总是显示相同的消息。只有当我使用 Internet Explorer 10 时，才会发送消息，但服务器响应不是我所期望的：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body><SOAP-ENV:Fault><faultcode>SOAP-ENV:Client</faultcode>
<faultstring>SoapClient::SoapClient() [&lt;a href='soapclient.soapclient'&gt;soapclient.soapclient&lt;/a&gt;]: 'location' and 'uri' options are required in nonWSDL mode</faultstring></SOAP-ENV:Fault></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

在 IE 中，如果我使用其他服务，则脚本可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:07:23.897

如果您不关心跨域，那么您可以尝试一下...我将使用 jQuery，因为它更简单，如果您必须转换为您自己的语法，因为我从未做过 Mozilla 插件。

**注意：**您需要获取正确的调用**URL**，以及正确的**Soap Message**

为此，我建议您安装[SoapUI](http://www.soapui.org/)并连接到该服务，您将获得发送和接收信息所需的所有原始信息

```
var webServiceURL = 'https://cuotas.uci.cu:443/servicios/v1/InetCuotasWS?op=ObtenerCuota';
var soapMessage = '<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope"><soap12:Body><ObtenerCuota xmlns="http://tempuri.org/" /></soap12:Body></soap12:Envelope>';

function CallService()
{
    $.ajax({
        url: webServiceURL, 
        type: "POST",
        dataType: "xml", 
        data: soapMessage, 
        contentType: "text/xml; charset=\"utf-8\"",
        success: OnSuccess, 
        error: OnError
    });

    return false;
}

function OnSuccess(data, status)
{
    alert(data.d);
}

function OnError(request, status, error)
{
    alert('error');
}

$(function() {
    jQuery.support.cors = true;
}); 
```

# c# - 如何在 c# 项目中使用 WSDL 来使用 web 服务

> ID：12347093
> 
> 赞同：0
> 
> 时间：2012-09-10T07:31:23.670
> 
> 标签：c#, web-services, wsdl

大多数时候我添加 Web 服务的 Web 引用并给出 asmx 文件的路径，但现在我使用的是 UPS Web 服务，可能这个 Web 服务是由另一种技术开发的。没有任何 asmx 文件概念。他们提供 wsdl 文件，我只需添加 Web 引用并将 wsdl 文件的文件路径粘贴到那里。我编译我的项目并且没有错误。我的应用程序运行良好，但是当我创建该应用程序的安装项目并安装在另一台机器上时，我收到对象引用错误。所以我只是不明白为什么当我从安装程序安装它时它没有在另一台机器上运行，但是当我从我的机器 IDE 运行它时它运行良好。所以请指导我我所缺少的。当我将使用 wsdl 时我需要做什么，并且在不存在 wsdl 文件的远程机器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:34:56.433

检查您的安装项目中是否包含设置 WSDL 链接的 App.config，并检查是否有该链接是否存在于您正在安装的 PC 上。

如果这不起作用，您可以随时尝试在[此站点](http://my.execpc.com/~gopalan/dotnet/webservices/webservice_csharp_client.html)的帮助下将 WSDL 转换为 DLL 。

# php - 如果消息已被用户删除，如何添加 mysql 查询？

> ID：12347098
> 
> 赞同：1
> 
> 时间：2012-09-10T07:31:44.237
> 
> 标签：php, mysql

嗨，我有我的消息表，我想知道如何添加消息 is_deleted 由用户这里是我的表：

```
id fromid toid message is_read deleted_to deleted_from  date
1  1      2    test1   1       0          0             2012-09-06 00:00:10
2  2      1    test2   1       0          0             2012-09-06 00:00:11
3  1      3    test3   1       0          0             2012-09-06 00:00:12
4  3      1    test4   1       0          0             2012-09-06 00:00:13
5  2      1    test5   1       0          0             2012-09-06 00:00:14

Users
MemberID    username
1           user1
2           user2
3           user3 
```

我应该怎么做才能不选择已删除的消息？我的表是正确的还是我需要添加表并在我的查询中有条件？

例如：用户给我发了一条消息，我已经删除了这条消息，现在这条消息在我这边不可见。但是在发送方他可以看到他的消息，如果他还没有删除消息的话。它就像 facebook 消息传递。您可以删除整个对话，也可以只删除选定的消息。

我刚刚创建了我的 mysql 查询：

```
SELECT 
                IF(derived_messages.toid = '$user', derived_messages.fromid, 
                derived_messages.toid) friend1,c.UserName,
                derived_messages.message, derived_messages.fromid, derived_messages.toid,
                derived_messages.is_read,
                derived_messages.date
                FROM 
                (SELECT * 
                FROM messages
                ORDER BY date desc) derived_messages
                INNER JOIN Users c ON c.MemberID = IF(derived_messages.toid = '$user', derived_messages.fromid, 
                derived_messages.toid)
                WHERE (derived_messages.toid='$user' OR derived_messages.fromid='$user') 
                GROUP BY friend1 ASC 
                ORDER BY derived_messages.date DESC, derived_messages.id DESC 
```

**现在，我想知道我要在哪里添加已删除消息的条件。**

谢谢。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:33:57.123

添加列 is_deleted。为 false 时设置为 0。1 为真。默认为 0。

```
SELECT message, etc FROM messages WHERE is_deleted = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:35:25.363

它可能只是：

```
SELECT * 
FROM tableName 
WHERE is_deleted = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:56:56.650

首先，您需要了解哪些代码当前正在使用现有的`deleted_to`和`deleted_from`字段。如果您只是添加一个新列`is_deleted`，您必须问自己，您是否对所有读取此表的代码都知道查看这个新字段感到满意？

从您现有的模式来看，我会说可以通过为字段设置日期来考虑*删除**消息*，然后通过设置字段来取消删除。这个逻辑中的潜在漏洞是，如果消息被第二次删除会发生什么？您不知道第一次删除邮件的时间。也许这对于您的目的来说是可以的。*`deleted_from``deleted_to`*

 *我同意添加新字段是可以接受的，`is_deleted`只要现有字段保持一致状态即可。`deleted_to``deleted_from`

您不希望某些代码使用此逻辑

```
SELECT * 
FROM tableName 
WHERE is_deleted = 0 
```

和其他使用类似逻辑的代码

```
SELECT * 
FROM tableName 
WHERE 
    @query_date < deleted_from
    OR @query_date > deleted_to 
```

您最终可能会在确定何时考虑*删除*邮件时出现不一致的情况。如果有多个应用程序正在读取您的数据库表，这尤其成问题。

**根据您的评论进行**编辑****

 **好的，为了简单起见，这就是我的建议......

1.  让我们忽略这些字段`deleted_to`并`deleted_from`确定何时删除消息。我不确定如何打算使用这些字段
2.  为清晰起见重命名`date`要命名的字段`date_created`
3.  添加一个`datetime`名为`date_updated`
4.  添加一个`bit`名为`is_deleted`defaulting to "zero" 的字段（即 0 = false，1 = true）

在您的代码中，删除消息时，将 is_deleted 字段设置为 1 (true)。每次编辑或删除记录时都应设置 date_updated 字段。您可以通过检查“is_deleted = 1”并参考“date_updated”字段来确定何时删除记录。

你只查询没有被删除的记录，添加`WHERE messages.is_deleted = 0`如下图

```
SELECT 
     IF(derived_messages.toid = '$user', derived_messages.fromid, 
     derived_messages.toid) friend1,c.UserName,
     derived_messages.message, derived_messages.fromid, derived_messages.toid,
     derived_messages.is_read,
     derived_messages.date
FROM (
    SELECT * 
     FROM messages 
     WHERE messages.is_deleted = 0
     ORDER BY date desc
     ) derived_messages
INNER JOIN Users c 
        ON c.MemberID = IF(derived_messages.toid = '$user', derived_messages.fromid, derived_messages.toid)  
WHERE 
    (derived_messages.toid='$user' OR derived_messages.fromid='$user')
GROUP BY 
    friend1 ASC 
ORDER BY 
    derived_messages.date DESC, derived_messages.id DESC 
```***

# google-calendar-api - 谷歌日历“客人可以修改”真的不起作用

> ID：12347102
> 
> 赞同：2
> 
> 时间：2012-09-10T07:31:57.047
> 
> 标签：google-calendar-api, google-apps

我想从我的应用程序同步更新 Google 日历活动。Google 中开启了访客“可以修改”事件。但是，在同步更新我的应用程序中的访客时，它并没有反映给该事件和事件所有者的所有访客。除了这个，一切都很好。

请任何帮助。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:33:25.497

我想在编辑日历后需要按保存或 Ctrl+S 才能工作

# ios - 如何在 ios 中以 1% 的准确度获得电池电量

> ID：12347109
> 
> 赞同：12
> 
> 时间：2012-09-10T07:32:26.027
> 
> 标签：ios, battery

如何以 1% 的准确度获得电池电量。

```
 [UIDevice currentDevice].batteryLevel 
```

将给出准确度为 5% 的电池电量。但我最近在运行 ios 5.1 的 iphone 4S 上使用了 Battery Doctor 应用程序，它以 1% 的准确度提供电池电量。任何人都有任何想法，我们如何才能获得这种准确性......我已经尝试并搜索了很多，但没有得到他们如何计算它..提前谢谢......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-11T19:50:40.143

从 iOS 8 开始，

```
[UIDevice currentDevice].batteryLevel 
```

提供 1% 的准确率 :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T13:53:28.063

如果您关闭设置->常规->使用->电池百分比，电池医生会以 %5 的精度显示您的电池电量...所以我猜他们正在为设备的右上角运行一些图像识别算法，其中显示电池百分比。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-25T21:21:25.530

如果你越狱了，你可以简单地使用

```
int percent = [(SBUIController*)[objc_getClass("SBUIController") sharedInstance] displayBatteryCapacityAsPercentage]; 
```

此方法存在于 iOS 4.3+ 上，并且可能是 Battery Doctor 正在使用的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T07:48:20.883

答案来自[这个问题](https://stackoverflow.com/questions/7360400/why-battery-on-status-bar-is-different-than-the-coding-batterylevel/7360894#comment16577834_7360894)：

您可以使用 an`NSTimer`来操纵您显示的值，从而使**外观看起来**准确。对于应用程序处于活动状态的每个会话，制作一组电池数据样本（例如电池电量从 100% 下降到 95%，然后从 95% 下降到 90% 所需的时间，等等）并将其保存在设备本身上. 然后，使用计时器根据电池电量下降 5% 除以 5 所需的时间设置更新（和估计）的电池值（假设每个百分比在相同的时间间隔后下降，这**会**有所不同，但不会是一个*明显*的偏差）。确实，电池寿命会随着时间的推移而下降，但由于我们根据上次会话中保存的值调整计时器值，它应该在设备的整个生命周期内继续保持非常准确。

**编辑 -**对于初始状态，您可以根据 iPhone 型号（3、3G、4、4S）提供默认值。可以为这些不同的设备计算不同的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-17T04:06:18.440

在 iOS 8.1.x 中，我注意到电池电量现在正在报告应用程序的确切电池电量。以前，`UIDevice`每 5% 报告一次。在 iOS 8.1.x 中您无需再做任何事情，因为**`[UIDevice currentDevice].batteryLevel`**现在应该自动报告这一点。

# javascript - 用户输入时如何实例化数组？

> ID：12347110
> 
> 赞同：1
> 
> 时间：2012-09-10T07:32:29.943
> 
> 标签：javascript

当用户输入文本时，我想使用输入文本的名称创建一个数组并将其添加到数组 logNum 中。我试过这样但它不起作用：

```
logNum.push(var document.getElementById("buttonInput").value.toString()[]); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:33:24.150

假设您已经创建了 logNum 数组，您可以这样做：

```
 logNum.push([document.getElementById("buttonInput").value]); 
```

该`[something]`符号创建一个新数组，其第一个元素是`something`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:39:00.233

我不确定我是否理解你，但试试这个：

```
logNum.push( window[ document.getElementById("buttonInput").value ] = [] ); 
```

首先，我们生成数组：*window[ document.getElementById("buttonInput").value ] = []*这将创建一个具有用户输入名称的数组。

请记住，赋值总是返回右侧的值。所以将返回新数组。

然后，将返回值推送到 logNum 数组。

# c# - 调试 MS Exchange 2007 传输代理

> ID：12347123
> 
> 赞同：0
> 
> 时间：2012-09-10T07:33:35.913
> 
> 标签：c#, visual-studio-debugging, exchange-server-2007, exchange-transport-agents

我有一个传输代理的源代码，它安装在用 C# 编写的 MS Exchange 2007 上。我需要使用 VS 对其进行调试，我认为这涉及将调试器“附加”到进程“MSExchangeTransport.exe”。我这样做，并将断点作为 OnSubmittedMessageHandler() 中的第一条语句。我知道这个处理程序被调用是因为代理按预期工作并且处理程序中的代码执行它的职责。但是，我在调试窗口中没有得到任何调试信息（尽管有各种 Debug.WriteLine() 调用），当我将鼠标悬停在断点上时，他们说：

“当前不会命中断点。没有为此文档加载任何符号”

它在调试模式下编译并成功安装并使用 Install-TransportAgent、Enable-TransportAgent 启动。

有些东西告诉我调试器没有找到它需要的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:15:16.210

啊! 我应该将调试器附加到“EdgeTransport.exe”。现在都在工作。

# mysql - 上传mysql数据库中的海量数据

> ID：12347125
> 
> 赞同：0
> 
> 时间：2012-09-10T07:33:41.667
> 
> 标签：mysql, database

我必须将大量数据上传到 mysql 表中。数据为 .csv 格式。我尝试使用 load infile 方法。但是，这也需要很长时间。有没有其他上传数据的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:40:37.163

您可以在此处找到一些有用的调优技巧：

*   [INSERT 语句的速度](http://dev.mysql.com/doc/refman/5.5/en/insert-speed.html)
*   [MyISAM 表的批量数据加载](http://dev.mysql.com/doc/refman/5.5/en/optimizing-myisam-bulk-data-loading.html)
*   [InnoDB 表的批量数据加载](http://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-bulk-data-loading.html)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:42:43.763

你可以试试MYSQL的Load Data语句——

[http://dev.mysql.com/doc/refman/5.0/en/load-data.html](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

LOAD DATA INFILE 语句以非常高的速度将文本文件中的行读取到表中。文件名必须以文字字符串的形式给出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:44:31.033

有一个名为 mysqlimport 的 MySQL 实用程序[http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)

我建议尝试一下。

**编辑**实际上它似乎与`LOAD DATA INFILE`

# azure - 无法注册 Windows Azure

> ID：12347128
> 
> 赞同：0
> 
> 时间：2012-09-10T07:34:02.620
> 
> 标签：azure, windows-8

我是来自尼泊尔的开发人员。我尝试创建一个使用 Windows Azure 开发应用程序的帐户。但是我无法完成我的 windows azure 帐户的注册。Windows Azure 帐户是否仅限于某些国家/地区？是否有其他方法可以创建 Windows Azure 帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:02:38.040

Windows Azure 仅在 84 个国家（我以为是 89 个）受支持，不幸的是尼泊尔不是其中之一，请参阅[常见问题解答](https://www.windowsazure.com/en-us/support/faq/)国家注册。

*更新 - 它是 89，常见问题解答有点过时，不支持尼泊尔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-24T10:12:37.113

Azure 自 8 月起在尼泊尔推出。您可以通过选择尼泊尔和您的尼泊尔手机号码直接登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T17:08:27.993

您需要申请学生订阅。Azure 对信用有限的学习者免费。您需要订阅密钥或转发您的 microsoft 帐户。我可以通过从我的 MSDN 订阅中转移某些信用来帮助您。

# macos - 我们可以在没有 MAC OS 的情况下开发 IOS 应用程序吗？

> ID：12347131
> 
> 赞同：1
> 
> 时间：2012-09-10T07:34:10.467
> 
> 标签：macos, ios5

> **可能重复：**
> [您需要 Mac os x 来开发 iPhone 应用程序吗？](https://stackoverflow.com/questions/9570486/do-you-need-mac-os-x-to-develop-iphone-apps)

我是 MAC OS 环境的新手。我想学习，如何使用 iOS SDK 开发应用程序。

是否可以在没有 MAC-OS 环境的情况下实现 iOS 应用程序？

请问你能帮帮我吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:39:18.133

目前 Apple 只允许您在 OSX 系统中开发应用程序。

如果硬件有问题，您可以尝试运行虚拟机，但这本身就是一个挑战。

实际上：

做了更多的研究，有一些方法可以使用 Windows 编写 iOS 应用程序：http: [//maniacdev.com/2010/01/iphone-development-windows-options-available/](http://maniacdev.com/2010/01/iphone-development-windows-options-available/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:02:02.757

是的你可以。您必须将 VMware 或任何虚拟机安装到您的系统中。如果您使用的是 Windows，处理器频率高于 4GHz，则效果很好

# php - 仅打印没有整个 HTML 页面的图像

> ID：12347137
> 
> 赞同：2
> 
> 时间：2012-09-10T07:34:27.167
> 
> 标签：php, javascript, html

我只想打印 HTML 页面中的图像。

我用了

```
function printImg(){        
    var URL = "image.png";
    var W = window.open(URL);
    W.window.print();
} 
```

但是执行代码，整个页面打印而不是图像。有什么方法可以只打印图像吗？请指导我。

谢谢。

![在此处输入图像描述](../Images/3e8be97d47408b379446690ebabeee21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:39:36.870

创建一个 print.css 来隐藏除图像之外的所有其他不需要的 div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:48:34.777

如果您听说过[**CSS 媒体类型**](http://www.w3.org/TR/CSS2/media.html)，那么您可以使用这种技术完成您想要的任务。

例子：

定义媒体类型打印，然后在您的 css 文件中添加一个`.noprint`带有 css 规则的 css 类，`display:none;`如下所示：

```
@media print {
   .noprint{ display: none }
} 
```

然后将此类应用于您不想打印的元素。

[**看一个例子**](http://jsfiddle.net/akhurshid/3Rjjx/)

希望这会对您有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:46:28.687

采用

```
W.print(); 
```

代替

```
W.window.print(); 
```

`W.window`引用弹出窗口的父窗口。

除此之外，您可以考虑使用`window.print`加载时触发的空页面，而不是当前不等待图像准备好的方法。

## == 编辑 ==

这是做不到的。您不能从 JavaScript 修改浏览器设置（即打印机设置）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T10:04:46.007

最后我想到了将我的结果转换为 PDF 格式并使用[FPDF 库打印](http://fpdf.org/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-10T07:39:41.033

您可以创建一个图像元素，然后将其附加到 DOM。

```
function printImg() {
    var img = document.createElement( "img" );
    img.src = "image.png";
    document.body.appendChild( img );
} 
```

# linux - Linux 套接字操作

> ID：12347139
> 
> 赞同：0
> 
> 时间：2012-09-10T07:34:35.890
> 
> 标签：linux, sockets

我正在跟踪套接字相关代码，但找不到与 sys call write 或 read 对应的套接字操作。有谁能够帮助我？以下代码段是 sock ops。sys write 或 read 对应的是哪一个？谢谢！！！！

```
static const struct proto_ops hci_sock_ops = {
    .family     = PF_BLUETOOTH,
    .owner      = THIS_MODULE,
    .release    = hci_sock_release,
    .bind       = hci_sock_bind,
    .getname    = hci_sock_getname,
    .sendmsg    = hci_sock_sendmsg,
    .recvmsg    = hci_sock_recvmsg,
    .ioctl      = hci_sock_ioctl,
    .poll       = datagram_poll,
    .listen     = sock_no_listen,
    .shutdown   = sock_no_shutdown,
    .setsockopt = hci_sock_setsockopt,
    .getsockopt = hci_sock_getsockopt,
    .connect    = sock_no_connect,
    .socketpair = sock_no_socketpair,
    .accept     = sock_no_accept,
    .mmap       = sock_no_mmap
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:36:51.067

大多数魔法——解复用——发生在 VFS 层。读/写函数分别是`*_recvmsg`和`*_sendmsg`。

# ant - 编译的类不包含在生成的 Jar 中

> ID：12347147
> 
> 赞同：1
> 
> 时间：2012-09-10T07:35:00.987
> 
> 标签：ant, build

我正在使用 ant 构建脚本创建一个 jar 包。问题是 .class 文件未包含在生成的 .jar 文件中。我也试过 {build.dest} 制作罐子，但没有效果。

我需要的所有文件都在 .jar 文件中。

这是我的构建脚本

```
<?xml version="1.0"?>

<project name="TaskNodeBundle" default="all" basedir=".">
    <!-- Sets variables which can later be used. -->
    <!-- The value of a property is accessed via ${} -->
    <property name="bundlename" value="task-node-bundle" />
    <property name="src.dir" location="../src" />
    <property name="lib.dir" location="../lib" />
    <property name="build.dir" location="/buildoutput" />
    <property name="build.dest" location="../build/dest" />

    <!--
        Create a classpath container which can be later used in the ant task
    -->
    <path id="classpath">
        <fileset dir="${lib.dir}/">
            <include name="*.jar" />
        </fileset>
    </path>

    <target name="clean">
        <delete dir="${build.dir}" />
        <delete dir="${build.dest}" />
    </target>

    <!-- Deletes the existing build directory -->
    <target name="mkdir" depends="clean">
        <mkdir dir="${build.dest}"/>
    </target>

    <!-- Compiles the java code -->
    <target name="compile" depends="mkdir">
        <javac srcdir="${src.dir}" destdir="${build.dest}" classpathref="classpath" />
    </target>

    <target name="package-bundle" depends="compile" description="Generates the bundle" >
        <jar destfile="${build.dest}/${bundlename}.jar" manifest="${src.dir}/META-INF/MANIFEST.MF">
            <fileset dir="${src.dir}">
                <include name="**/**.class" />
                <include name="**/**.properties"/>
                <include name="/META-INF/**.*" />
                <include name="/META-INF/spring/**.*" />
            </fileset>
        </jar>
    </target>

    <target name="all" depends="package-bundle">
    </target>

</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:04:04.460

首先，“尝试 {build.dest} 制作 jar”是什么意思？

无论如何，您需要查看构建的这一部分：

```
<jar destfile="${build.dest}/${bundlename}.jar" manifest="${src.dir}/META-INF/MANIFEST.MF">
    <fileset dir="${src.dir}">
        <include name="**/**.class" />
        <include name="**/**.properties"/>
        <include name="/META-INF/**.*" />
        <include name="/META-INF/spring/**.*" />
    </fileset>
</jar> 
```

1.  您编译的类文件位于 中`${build.dest}`，因此您应该使用 ${build.dest} 作为嵌套任务`<fileset>`的根目录。`<jar>`但是现在您将指向`<fileset>`您的源代码文件夹。
2.  您应该避免将生成的 jar 文件放在类文件所在的同一目录中。例如，您可以将 jar 放在另一个目录 ${dist.dir} 中。

所以试试这个：

你有一个财产：

```
<property name="dist.dir" value="../build/dist" /> 
```

进而，

```
<jar destfile="${dist.dir}/${bundlename}.jar" manifest="${src.dir}/META-INF/MANIFEST.MF">
    <fileset dir="${build.dest}">
        <include name="**/*.class" />
    </fileset>
    <fileset dir="${src.dir}">
        <include name="**/*.properties"/>
        <include name="/META-INF/**/*.*" />
        <include name="/META-INF/spring/**/*.*" />
    </fileset>
</jar> 
```

# c++ - TripleDes 会改变数据大小吗

> ID：12347148
> 
> 赞同：0
> 
> 时间：2012-09-10T07:35:07.840
> 
> 标签：c++, visual-c++, encryption, tripledes

我有一个使用 Triple DES 加密和解密数据的代码。代码一切正常。

我对 Triple Des 有疑问。Triple DES 在执行加密过程时会改变数据大小。我用谷歌搜索，对我得到的答案完全感到困惑。

它会改变吗？如果是，则表示如何查找加密数据的大小。

这是代码：

```
unsigned char   initVector[8];
unsigned char*  block;
int     j;

    memset(initVector, 0xEE, sizeof(initVector));
    nBlocks = dwDataSize / 8;

    for (i=0; i < nBlocks; i++)
    {
        block = (unsigned char*) pData + i*8;
        memset(initVector, 0xEE, sizeof(initVector));
        des_ede3_cbc_encrypt((unsigned char *)block,(unsigned char *)block, 8,
                m_Schedule1 , m_Schedule2, m_Schedule3, (C_Block *)initVector, DES_ENCRYPT); 
```

我在另一个讨论中看到大小会改变。

链接在这里。 [加密字符串的长度](https://stackoverflow.com/questions/457193/length-of-encrypted-string)

问候，湿婆。/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:41:14.120

TripleDES 是一种*分组密码原语*。分组密码通过基于密钥创建输入数据块（应该与随机数据无法区分）的*排列*来工作，只有在密钥已知的情况下才能反转。

因此，加密数据占用与输入数据完全相同的空间量（可能除了最后一个块的填充）。典型的块大小是从 4 到 32 字节的任何 2 的幂。

（一个思想实验：密文不可能比输入*短*，因为两个不同的输入必须映射到同一个密文，这是不可能的。相反，如果密文*更长*，那么将是某些密文，而不是加密的结果，因此不会“与随机数据无法区分”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:14:19.243

这取决于。更准确地说，它取决于以下要素：

1.  密文和明文的编码
2.  加密模式
3.  填充模式和块大小
4.  NONCE 或 IV
5.  （可选）身份验证标签

3DES 是一种分组密码。这是一个看似随机的位排列（主要使用字节作为最小元素）。单个 3DES 使用 64 位/8 字节作为输入并生成相同的大小

从第一个开始：如果您加密一段文本（字符串），那么您需要先将字符串编码为字节。如果您希望将密文存储在字符串中，则需要将结果转换为字符串。

接下来是加密模式：如果这是一种将 3DES 块密码转换为流密码（例如 CTR）的模式，则输入大小与输出大小相同，不包括 NONCE。

然后是填充模式。如果您使用 ECB 或 CBC 模式加密，那么如果纯文本有 length ，则*必须*填充，并且是块大小（以字节为单位）。如果您可以将纯文本与填充区分开来，那么您可以添加填充字节。如果你不能，那么你需要总是填充，添加到填充字节。PKCS#5 填充（最常见的一种）总是填充。`x``x % n != 0``n``0``n - 1``1``n`

通常您还需要传输 IV 或 NONCE。它们通常都与块大小大致相同。一个常见的选择是在密文前面加上 IV。这通常针对您应用的 CBC 模式加密执行。唯一不应该创建新（随机）IV 的情况是您只使用一次密钥。

大多数情况下，您应该为密文添加完整性保护。如果您使用例如 GCM 模式加密，那么您需要一些额外的空间用于身份验证标签。如果您使用 MAC 或 HMAC，那么这应该包含在密文的顶部。

还有密文窃取之类的东西，可以用来取消填充。最后，对于某些单块加密模式，您可能不需要 IV。

**在你的情况下**：

如果您使用字节，请使用 CBC 模式加密，预先添加 IV 并使用 PKCS#5 填充，那么计算将是`(n) + ((x) + (n - x % n))`. 对于 3DES `n = 8`，.

# android - 将应用中的照片分享到 google+

> ID：12347155
> 
> 赞同：0
> 
> 时间：2012-09-10T07:35:35.543
> 
> 标签：android, google-plus

我正在尝试将图像从我的应用程序分享到社交网络。我已经实现了`Facebook`and `Twitter`，但是在`Google+`，我看不到任何方法。

我已经看到诸如此类的应用程序`Instagram`在 Google+ 上共享图像。但是，在 Google+ 开发人员中，我唯一能找到的是：

> 最新版本的 Google+ Android SDK，包括 SDK 工具组件（尚不可用）。

谁能告诉我如何在 Google+ 上分享我的图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:38:12.287

`ACTION_SEND`您可以有意地在 Google+ 上共享媒体（照片和相册） 。媒体可以在[EXTRA_STREAM](http://developer.android.com/reference/android/content/Intent.html#EXTRA_STREAM)中指定，并且需要包含媒体的[内容 URI](https://stackoverflow.com/a/7492847/313790)。

这是一个例子：

```
File file = new File(Environment.getExternalStorageDirectory(),
        MY_PICTURE_FILE_NAME);
String photoUri = MediaStore.Images.Media.insertImage(
        getContentResolver(), file.getAbsolutePath(), null, null);

Intent shareIntent = ShareCompat.IntentBuilder.from(MyActivity.this)
        .setText("Sharing an image on Google!")
        .setType("image/jpeg")
        .setStream(Uri.parse(photoUri))
        .getIntent();
startActivity(shareIntent);
file.delete(); 
```

# c# - c#从pdf文件中提取数据

> ID：12347156
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:35:52.513
> 
> 标签：c#, .net, itext

我试图从 pdf 文件中提取数据`iTextSharp`，但出现了两个错误。实际上我想从pdf文件中提取数据并将其存储到数据库中。

这是我的代码：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Collections.Generic;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient;
using System.IO;
using System.Text;
using iTextSharp.text;
using iTextSharp.text.pdf;
using System.util.collections;
using System.Linq;

public partial class frm_CreatePDF : System.Web.UI.Page
{
    public string P_InputStream3 = "~/My Documents/List Of Holidays 2012";

    protected void Page_Load(object sender, EventArgs e)
    {
        ExtractText();
    }

    private string ExtractText()
    {
        PdfReader reader = new PdfReader(Server.MapPath(P_InputStream3));
        string txt = PdfTextExtractor.GetTextFromPage(reader, 2, new LocationTextExtractionStrategy());
        return txt;
    }
} 
```

错误是：

> 1.  当前上下文中不存在名称“PdfTextExtractor”
> 2.  类型或命名空间名称 'LocationTextExtractionStrategy

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:39:43.167

`using`确保通过添加指令将定义这两个类的命名空间带入作用域：

```
using iTextSharp.text.pdf.parser; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:40:10.487

我猜你需要使用另一个命名空间，其中 LocationTextExtractionStrategy 定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:41:42.220

首先，您需要添加对 ItextSharp dll 的引用，之后您可以添加一条 using 语句来访问包含该静态类的命名空间

[http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T13:17:23.277

这是一个迟到的答案，但我发现你的问题是：

您缺少`iTextSharp.text.pdf.parser`using 语句。在您的`using iTextSharp.text.pdf;`代码下方添加：

```
using iTextSharp.text.pdf.parser; 
```

那应该能找到你的`LocationTextExtractionStrategy`还不错。

如果需要，您也可以`iTextSharp.text.pdf.parser`直接在您的后面添加`LocationTextExtractionStrategy`。

```
string txt =  PdfTextExtractor.GetTextFromPage(reader, 2, new iTextSharp.text.pdf.parser.LocationTextExtractionStrategy()); 
```

但我会推荐前者。它更干净，更易于阅读。

# objective-c - UITextField 中的 CLLocationDegrees

> ID：12347157
> 
> 赞同：0
> 
> 时间：2012-09-10T07:36:05.633
> 
> 标签：objective-c, uitextview

我有一个 UITextField，我想在那里打印我的 GPS 位置，作为测试，我创建了一个位置：

```
CLLocationCoordinate2D myPos;
myPos.latitude = 38.990603;
myPos.longitude= -1.858964;

NSLog(@"%f %f", myPos.latitude, myPos.longitude); 
```

这可行，但现在，我想将值添加到 UITextView：

```
self.myUITextField.text = [NSString stringWithFormat:(@"%f %f", myPos.latitude, myPos.longitude)]; 
```

这是一个错误：

```
Sending 'CLLocationDegrees' (aka 'double') to parameter of incompatible type 'NSString *' 
```

如何将 CLLOcationDegrees 值打印到 UITextField 中？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:42:02.823

括号可能会把事情扔掉：

```
[NSString stringWithFormat:(@"%f %f", myPos.latitude, myPos.longitude)]; 
```

应该是：

```
[NSString stringWithFormat:@"%f %f", myPos.latitude, myPos.longitude]; 
```

# git - 顶部远程的本地分支

> ID：12347167
> 
> 赞同：0
> 
> 时间：2012-09-10T07:36:58.103
> 
> 标签：git, version-control, github

我有一个名为 ABC 的本地分支机构。我想在远程分支开发上添加所有这些更改。我想这是通过合并完成的。我一直在搜索并发现如何将我的分支推送到原点，但是如何将它合并到我已经存在的远程分支之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:42:32.993

我假设调用了远程分支`develop`并且您没有任何其他`develop`分支：

```
git checkout develop
git merge ABC
# probably resolve conflicts and git commit
git push 
```

# android - 应用内购买无法正常工作

> ID：12347169
> 
> 赞同：0
> 
> 时间：2012-09-10T07:37:02.347
> 
> 标签：android, in-app-purchase

在我的项目中，应用内购买已实施，并且在测试中每件事都是正确的，但在市场上发布后，客户报告说他们的钱被扣除了，但他们没有得到内容。

我的 Google 商家帐户已收到款项。我不明白是什么问题。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:52:43.620

我遇到了我正在使用共享首选项来存储事务状态的问题，但是在我的最终构建中，我没有在共享首选项编辑器上调用提交。

# javascript - JQuery 遍历当前的 SELECT 值

> ID：12347171
> 
> 赞同：0
> 
> 时间：2012-09-10T07:37:15.513
> 
> 标签：javascript, jquery, select

您如何仅遍历所有选择的当前值，而不是选项？

我已经尝试过这种变化：

```
$('select[name^="mydropdowns"] :selected').each(function() {
   if ($(this).val() != 'Test') {
      alert("Found.");
   }
 }); 
```

“测试”是几个下拉菜单中的默认选择值，但此脚本从不返回警报。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:39:00.737

只需遍历选择

```
$('select[name^="mydropdowns"]').each(function() {
   if ($(this).val() != 'Test') {
      alert("Found.");
   }
}); 
```

`val()`适用于`input/select/textarea`元素而不适用于`option`元素。

来自 jQuery 文档：[http ://api.jquery.com/val/](http://api.jquery.com/val/)

> .val() 方法主要用于获取输入、选择和文本区域等表单元素的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:41:45.260

`SELECT`本身不能选择，可以`OPTION`。这就是您没有收到警报的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:30:37.660

在这里，我已经为上述问题完成了完整的垃圾箱。请检查一次演示链接。

**演示：** [http ://codebins.com/bin/4ldqp7h](http://codebins.com/bin/4ldqp7h)

**HTML**

```
<div>
  <input type="button" id="btn1" value="Check Dropdown Values" />
</div>
<div>
  <select name="mydropdowns1">
    <option value="Test">
      Test
    </option>
    <option value="Test1">
      Test1
    </option>
    <option value="Test2">
      Test2
    </option>
    <option value="Test3">
      Test3
    </option>
    <option value="Test4">
      Test4
    </option>
  </select>
  <select name="mydropdowns2">
    <option value="Test">
      Test
    </option>
    <option value="Test1">
      Test1
    </option>
    <option value="Test2">
      Test2
    </option>
    <option value="Test3">
      Test3
    </option>
    <option value="Test4">
      Test4
    </option>
  </select>
  <select name="mydropdowns3">
    <option value="Test">
      Test
    </option>
    <option value="Test1">
      Test1
    </option>
    <option value="Test2">
      Test2
    </option>
    <option value="Test3">
      Test3
    </option>
    <option value="Test4">
      Test4
    </option>
  </select>
  <select name="mydropdowns4" multiple="multiple">
    <option value="Test">
      Test
    </option>
    <option value="Test1">
      Test1
    </option>
    <option value="Test2" selected="selected">
      Test2
    </option>
    <option value="Test3">
      Test3
    </option>
    <option value="Test4" selected="selected">
      Test4
    </option>
  </select>
</div> 
```

**jQuery：**

```
$(function() {
    $("#btn1").click(function() {
        $('select[name^="mydropdowns"]').each(function() {
            if ($(this).val() != "Test") {
                alert("Dropdown[Name=" + $(this).attr('name') + "] has selected value " + $(this).val());
            }
        });
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp7h](http://codebins.com/bin/4ldqp7h)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T19:46:10.763

如果我没记错的话，我认为问题是如何迭代选择元素中的选项。

这是您可以做到的方法。这使用浏览器的控制台（chrome 和 firefox）来显示输出

```
var dropdown = $("select[name='dropdown']"); 

$('option', dropdown).each(function(){
    var val = $(this).prop("value");
    console.log(val);
}); 
```

# .net - 虚拟化 .NET 框架

> ID：12347172
> 
> 赞同：3
> 
> 时间：2012-09-10T07:37:15.957
> 
> 标签：.net, deployment, virtualization, visual-studio-2012

我有一个基于 .NET 4.0 的 Winform 应用程序，我使用 Spoon Virtual Application Studio 2012 对其进行了虚拟化。

当我使用 VS 2010 构建应用程序时，最终的虚拟化应用程序运行良好，但如果我使用 VS 2012 构建应用程序并构建虚拟化应用程序，那么`System.Core file not found error`就会出现（4.0.0.0 和 3.5.0.0）。

我猜原因可能是在 VS 2010`System.Core`中被引用为，
`"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Core.dll"` 而在 VS 2012 中引用为
`"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Core.dll"`. 我不确定。

请帮助我如何解决这个问题或有什么其他软件可以虚拟化 .NET Framework，这样我就可以将我的应用程序发送到客户端，而无需安装 .NET Framework。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:12:24.467

您需要在干净的机器上使用 Spoon 快照方法自己构建 DotNet 4.0 .svm 文件。实际上 DotNet 4.0 svm 是随 Spoon 一起提供的，但是当您使用 VS2012 时，它必须以某种方式升级了 DotNet 4。这可能是文件未找到错误的原因，因为 Spoon 使用隔离文件系统，这就是为什么主机系统文件对应用程序不可见的原因。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:00:33.030

您可以使用 VirtualBox 或类似设备和 Windows DVD 设置一些 VM，以获得干净的 Windows 安装。安装并虚拟化应用程序后，您可以将 VM 重置为之前的干净状态并虚拟化下一个应用程序。

# struts2 - 删除 struts 2 中的转换验证消息或使其通用

> ID：12347173
> 
> 赞同：3
> 
> 时间：2012-09-10T07:37:19.233
> 
> 标签：struts2, validation

在我的 struts2 应用程序中，我有一个名为 carrierNo 的字段，它接受整数，当我将字符串放入其中时，它会给我这个验证错误消息：

```
 *Invalid field value for field "carrierNo".* 
```

我可以像这样在属性文件中自定义此错误消息

```
 invalid.fieldvalue.carrierNo=this field does not accept characters 
```

但我不想为我的网络应用程序中的每个非字符串字段编写自定义消息，我想让它通用，我尝试了以下但它没有用

```
 invalid.fieldvalue.%{getText(fieldName)}=this field does not accept characters 
```

如果无法通用，请帮助我完全禁用此消息。然后我将使用我在属性文件中定义的单个消息的转换字段验证器。

所以我的请求是帮助我制作这个 invalid.fieldvalue.carrierNo 像这种形式的一般东西 invalid.fieldvalue.%{getText(fieldName)}

或禁用显示此错误消息*字段“carrierNo”的字段值无效。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:07:54.690

您可以创建自己的实现`ConversionErrorInterceptor`来找出失败字段的类并获取您的自定义消息。

**编辑：**
查看源代码`ConversionErrorInterceptor`。例如，您可以在自定义拦截器内部`intercept`方法中执行类似的操作

```
// get field by name from action
Field f = invocation.getAction().getClass().getDeclaredField(propertyName);
// get type of field
Class clz = f.getType();

String message = LocalizedTextUtil.findDefaultText(XWorkMessages.DEFAULT_INVALID_FIELDVALUE + "." + clz,
                    invocationContext.getLocale()); 
```

并在您的 messages.properties 文件中放置`xwork.default.invalid.fieldvalue.int`,`xwork.default.invalid.fieldvalue.float`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:02:30.457

删除转换消息的最简单方法是从默认堆栈中删除“ *conversionError* ”[拦截器。](http://struts.apache.org/2.x/docs/conversion-error-interceptor.html)然而，删除它的一个问题是 IIRC 它还负责将原始（未转换的）值放回字段中，而不是将它们替换为失败转换的值。这可能会导致不愉快的用户体验，IMO。

制作“...不接受字符”转换错误消息感觉不对：转换错误包含整个应用程序，字符可能不是转换错误的原因。

# c# - 使可序列化的未定义类型列表

> ID：12347177
> 
> 赞同：0
> 
> 时间：2012-09-10T07:37:40.987
> 
> 标签：c#, session

我使用此代码返回对象列表以将它们存储在 out-proc session 中：

```
Session["Data"] = DataContext.ObjectSet.Select(rec => new { Title = rec.Title , Count = rec.Count }); 
```

但是如您所知，我们不能在进程外会话中存储不可序列化的类，有没有办法做到这一点？请不要说我定义它的类，我正在寻找 C# 中的后门或这样做的技巧

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:46:00.420

一种简单的方法是转换为数组对象

```
Session["Data"] = DataContext.ObjectSet
                      .Select(rec => new { Title = rec.Title , Count = rec.Count })
                      .ToArray(); 
```

您甚至可以将其转换为 List 对象并将其序列化为您自己的对象

```
var data = DataContext.ObjectSet
             .Select(rec => new SessionData() { Title = rec.Title , Count = rec.Count })
             .ToList();

System.Web.Script.Serialization.JavaScriptSerializer oSerializer = 
     new System.Web.Script.Serialization.JavaScriptSerializer();

Session["Data"] = oSerializer.Serialize(data); 
```

并使用

```
public class SessionData {
   public string Title { get; set; }
   public int Count { get; set; }
} 
```

但是在会话中持有这样的对象......你可能会做错事，不是吗？想象一下，在给定的时间内，您将拥有该列表的 1000 条记录...

# ruby - 如何检查 gem 的系统包依赖关系

> ID：12347179
> 
> 赞同：1
> 
> 时间：2012-09-10T07:37:52.733
> 
> 标签：ruby, rubygems, gem

比方说，我有一块宝石：

```
curb 
```

现在这需要：

```
libcurl-devel 
```

系统包安装在我的机器上（Fedora 17）。在尝试安装之前如何找出依赖关系？这个命令：

```
gem dependency curb 
```

仅显示安装此 gem 所需的其他 gem，而不显示系统包：

```
$ gem dependency curb
Gem curb-0.8.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:20:21.497

你不能，就其本身而言。依赖于 libcurl 头文件，因此您可以尝试在可用的搜索路径中找到这些头文件，然后根据正在安装的平台推荐安装哪个包，但 libcurl 头文件可以安装任意数量包的数量，甚至来自源代码，因此在一般情况下，没有一种方法可以说“curb 需要 libcurl-devel”。

# java - 如何访问 Cloudbees 中的 http 访问日志

> ID：12347180
> 
> 赞同：0
> 
> 时间：2012-09-10T07:37:54.403
> 
> 标签：java, cloudbees

我使用 Cloudbees 作为我的 PAAS 提供程序，并希望查看可以在 Tomcat 中查看的访问日志。在我的应用程序部分，我看到一个显示应用程序日志的选项卡和一个不显示任何内容的访问日志选项卡。

有没有办法可以打开这些日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:44:00.310

这是配置问题，现已修复

# blackberry - 在黑莓中加密和解密音频的更好方法？

> ID：12347184
> 
> 赞同：3
> 
> 时间：2012-09-10T07:38:15.323
> 
> 标签：blackberry, encryption

我使用此代码在 BlackBerry 上即时播放解密的音频（为简单起见，我使用[TEA](http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm)）

```
public void play(String path){
    try {
        FileConnection fc = (FileConnection) Connector.open(path,   Connector.READ);
        InputStream is = fc.openInputStream();
        byte[] rawData = IOUtilities.streamToBytes(is);
        processEncryptedAudio(rawData);
        is.close();
        fc.close();
    }
    catch (IOException ioex){

    }
}

// TEA code is taken from http://www.winterwell.com/software/TEA.php
private void processEncryptedAudio(byte[] data) throws IOException {
    TEA tea = new TEA("ABCDE ABCDE ABC A ABCDEF".getBytes());
    byte[] decrypted_data = tea.decrypt(data);
    ByteArrayInputStream stream = new ByteArrayInputStream(decrypted_data);
    ByteArrayInputStreamDataSource source = new ByteArrayInputStreamDataSource(stream, "audio/mpeg");

    try {
        player = Manager.createPlayer(source);
        player.start();
    }
    catch (MediaException me){
        Dialog.alert("MediaException: "+me.getMessage());
    }
} 
```

问题是解密需要很长时间才能完成。例如：在模拟器上，解密 9 MB 的音频大约需要 5 秒，但在 BlackBerry Torch 9860 上需要 20 多秒。

**有什么办法可以改善这一点吗？**实际上整个文件不需要加密，只要它被遮挡/不能直接播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:59:40.557

您可以尝试从 TEA 切换到[RC4](http://en.wikipedia.org/wiki/RC4)，这也很容易实现并且可能更快。

此外，您似乎在进行一些不必要的数据复制：让您的`decrypt()`方法直接修改输入字节数组会稍微高效一些。这可能需要更改调用代码以在解密数据的开头和/或结尾跳过一些字节，但这应该不会太难。（`ByteArrayInputStream`构造函数可以接受可选参数`offset`和`length`参数。）

如果您想变得非常花哨，可以尝试编写自己的自定义`InputStream`子类，在播放音频时“即时”进行解密。[如果您在CTR、CFB 或 CBC 模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)（或 ECB，但这不安全）中使用分组密码，您甚至可以使流可搜索。如果你想变得更漂亮，可以把它封装在原版`InputStream`上，这样你就可以同时进行加载、解密和*播放*。

另一种选择可能是使用[RIM Crypto API](http://docs.blackberry.com/en/developers/deliverables/21091/RIM_Cryptographic_API_1304152_11.jsp)，其密码实现可能比您自己的更有效（可能在优化的本机代码中实现）。Crypto API 也已经提供了以我上面描述的方式工作的[`DecryptorInputStream`类。](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/crypto/DecryptorInputStream.html)

One possible down side is that the Crypto API seems to be only available to signed apps.

# regex - VB6 中的正则表达式多重匹配

> ID：12347186
> 
> 赞同：2
> 
> 时间：2012-09-10T07:38:32.697
> 
> 标签：regex, vb6, multiple-matches

我有这样的文本要扫描：

```
 -- FIRST BLOCK
   Begin PRJFW_EDITM.TXT_EDITM TXT_CLIFOR 
      Height          =   300
      Left            =   2685
      DBField         =   "CG44_CLIFOR"
      Caption         =   "Codice cliente fornitore"
      Object.Tag             =   "Codice cliente fornitore"
      MaxWidth        =   8
   End

   -- SECOND BLOCK
   Begin PRJFW_EDITM.TXT_EDITM TXT_CLIFOR 
      Height          =   300
      Left            =   2685
      DBField         =   "CG44_CLIFOR"
      Caption         =   "Codice cliente fornitore"
      Object.Tag             =   "Codice cliente fornitore"
      MaxWidth        =   6
   End

   -- THIRD BLOCK
   Begin PRJFW_EDITM.TXT_EDITM TXT_CLIFOR 
      Height          =   300
      Left            =   2685
      DBField         =   "CG16_ANAG"
      Caption         =   "Codice cliente fornitore"
      Object.Tag             =   "Codice cliente fornitore"
      MaxWidth        =   6
   End 
```

我只想匹配 ( `MaxWidth=6`) 的块。

我正在做一些测试，但出了点问题......例如使用这个 RegEx 表达式：

```
(Begin[\s\S]+?(MaxWidth.*=)[\s\S]+?End) 
```

我正确匹配了上面代码中可见的树块。

然后，如果我尝试修改正则表达式以仅匹配“MaxWidth”属性的值为“6”的块：

```
(Begin[\s\S]+?(MaxWidth.*=   6)[\s\S]+?End) 
```

我只正确匹配了两个块，但第一个块是错误的。第一场比赛：

```
Begin PRJFW_EDITM.TXT_EDITM TXT_CLIFOR 
      Height          =   300
      Left            =   2685
      DBField         =   "CG44_CLIFOR"
      Caption         =   "Codice cliente fornitore"
      Object.Tag             =   "Codice cliente fornitore"
      MaxWidth        =   8
   End

   -- SECOND BLOCK
   Begin PRJFW_EDITM.TXT_EDITM TXT_CLIFOR 
      Height          =   300
      Left            =   2685
      DBField         =   "CG44_CLIFOR"
      Caption         =   "Codice cliente fornitore"
      Object.Tag             =   "Codice cliente fornitore"
      MaxWidth        =   6
   End 
```

它从第一个“开始”开始，并以第二个块中的正确属性值结束。那是错误的。

我希望 ( `MaxWidth=6`) 在每个 Begin...End 块内匹配。像这样的东西（参考我上面的代码）：

拳赛：

```
 Begin PRJFW_EDITM.TXT_EDITM TXT_CLIFOR 
      Height          =   300
      Left            =   2685
      DBField         =   "CG44_CLIFOR"
      Caption         =   "Codice cliente fornitore"
      Object.Tag             =   "Codice cliente fornitore"
      MaxWidth        =   6
   End 
```

第二场比赛：

```
 Begin PRJFW_EDITM.TXT_EDITM TXT_CLIFOR 
      Height          =   300
      Left            =   2685
      DBField         =   "CG16_ANAG"
      Caption         =   "Codice cliente fornitore"
      Object.Tag             =   "Codice cliente fornitore"
      MaxWidth        =   6
   End 
```

我怎样才能做到这一点？我的正则表达式有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:45:54.267

**这是可能的。假设输入文件位于`c:\test.txt`. 包含输入文本。**

***`The module`***

```
Option Explicit
'requires Microsoft Scripting Runtime
Public Sub test()
    Dim fields(5) As String
    fields(0) = vbNullChar
    fields(1) = vbNullChar
    fields(2) = """CG44_CLIFOR"""
    fields(3) = vbNullChar
    fields(4) = vbNullChar
    fields(5) = "6"

    Dim fpath$, x
    fpath = "c:\test.txt"
    x = Join(GetBlock(fpath, fields), vbCrLf & vbCrLf & vbCrLf)
    MsgBox x

End Sub

Public Function GetBlock(fpath$, textArr As Variant) As Variant
    Dim results As Variant
    Dim fso As New Scripting.FileSystemObject
    Dim re As New VBScript_RegExp_55.RegExp

    If UBound(textArr) <> 5 Then
        MsgBox "Invalid data provided!"
        Exit Function
    End If

    Dim fields(5) As String
    fields(0) = "Height += +"
    fields(1) = "Left += +"
    fields(2) = "DBField += +"
    fields(3) = "Caption += +"
    fields(4) = "Object\.Tag += +"
    fields(5) = "MaxWidth += +"

    Dim p&, validPos$

    p = 0
    For p = LBound(fields) To UBound(fields)
        If textArr(p) <> vbNullChar Then
            fields(p) = fields(p) & EscapeString(CStr(textArr(p)))
            validPos = validPos & CStr(p) & "|"
        End If
    Next p

    Dim content$, result As Boolean, outText$
    content = fso.OpenTextFile(fpath).ReadAll()
    outText = vbNullChar
    With re
        .Global = True
        .IgnoreCase = True
        .MultiLine = False
        .Pattern = "--[\s\S]+?(?=--)"
        If .test(content) = True Then
            Dim m, posz
            posz = Split(validPos, "|")
            result = True
            Dim mt As Match, mts As MatchCollection
            Set mts = .Execute(content)
            For Each mt In mts
                outText = mt.Value
                Dim po
                For Each po In posz
                    If po <> "" Then
                        m = fields(CStr(po))
                        .Pattern = m
                        result = .test(outText)
                    End If
                Next po
                For Each m In fields

                Next m
                If result = True Then
                    results = results & "<cylian/>" & outText
                End If
            Next mt
        Else
            result = False
        End If
    End With
    GetBlock = Split(results, "<cylian/>", -1, vbBinaryCompare)
End Function

Private Function EscapeString(str$) As String
    'some general replaces
    Dim a$
    a = str
    a = Replace(a, """", """""")
    a = Replace(a, ".", "\.")
    a = Replace(a, "}", "\}")
    a = Replace(a, "{", "\{")
    a = Replace(a, ")", "\)")
    a = Replace(a, "(", "\(")
    a = Replace(a, "+", "\+")
    a = Replace(a, "*", "\*")
    a = Replace(a, "-", "\-")
    a = Replace(a, "\", "\\")
    a = Replace(a, "^", "\^")
    a = Replace(a, "$", "\$")
    EscapeString = a
End Function 
```

***`The calling (from immediate window)`***

```
test 
```

***`The outcome`***

![在此处输入图像描述](../Images/f1e5b4910c0cc332744441e3b5508464.png)

**希望这可以帮助。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:58:19.967

是的，有可能。对正则表达式使用多行选项，请参阅[本文](http://www.regular-expressions.info/vbscript.html)以获取有关如何使用多行的示例。

VBscript 无法识别回车和换行控制字符。但它应该识别行的开头和行的结尾。

# php - SugarCRM EmailMarketing 不发送电子邮件

> ID：12347187
> 
> 赞同：2
> 
> 时间：2012-09-10T07:38:34.187
> 
> 标签：php, email, sugarcrm

**我在做什么**：

我使用 SugarCRM。

一开始我在`/index.php?module=EmailMan&action=config`. 测试信发送罚款。这行得通。

然后我使用模块“活动”创建新的电子邮件列表。然后我转到一个向导来创建新电子邮件`/index.php?action=WizardMarketing&module=Campaigns....`并发送电子邮件。

最后发送电子邮件。我看 og 并看到“SUCCESS”（`warn`只是在这里，因为我将代码中的日志记录状态从 更改`debug`为`warn`）：

```
Mon Sep 10 11:17:42 2012 [13138][1][WARN] Email delivery SUCCESS:Array
(
    [date_entered] => 2012-09-10 07:17:20
    [date_modified] => 
    [user_id] => 1
    [id] => 118
    [campaign_id] => 362acd98-9980-c24b-921e-5020db524444
    [marketing_id] => a00e472d-6026-6fc6-8919-5020db14f6a8
    [list_id] => 9ac9c172-feb3-1024-bf2a-5018f1e4074b
    [send_date_time] => 2012-09-10 05:05:00
    [modified_user_id] => 
    [in_queue] => 0
    [in_queue_date] => 
    [send_attempts] => 0
    [deleted] => 0
    [related_id] => ec106592-598f-9b45-e3e4-5022647678a6
    [related_type] => Prospects
) 
```

所以看起来一切都很好。但是.. 我没有收到任何电子邮件。而且我没有在 DetailView ( `/index.php?action=DetailView&module=Campaigns....`) 上看到任何已发送的电子邮件。
但它们可以在被**阻止的电子邮件**中找到！

**我所做的**：
我尝试在 EmailMan 模块配置中更改收件箱/发件箱的电子邮件设置。似乎他们可以很好地处理测试电子邮件。我还尝试查找 php 问题并将 `modules\EmailMan\EmailManDelivery.php`成功电子邮件的日志记录从 更改为`debug`以`warn`使它们显示在 *.log 文件中。

**问题**：
为什么我的电子邮件**被阻止了**。我需要做什么才能使它们成功发送？

感谢您的帮助，并询问我是否需要更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:59:54.493

好的，我幸运地在一秒钟前在一个关于 Sugar 的论坛上发现了问题。**被阻止的电子邮件**的问题是......系统不会在一个地址上发送两封或更多封电子邮件，因此其他尝试被阻止。创建新的营销公司解决了这个问题。

# java - Android 通知区域自定义

> ID：12347190
> 
> 赞同：1
> 
> 时间：2012-09-10T07:38:50.343
> 
> 标签：java, android, notifications, push-notification

我不知道这个问题是否会得到减分，但我到处搜索，最后的手段是stackoverflow。

我需要在通知区域中水平添加五个按钮。我需要添加甚至监听器的每个按钮。我知道可以使用 RemoteViews。但我从未见过有人为每个元素添加事件监听器。

如果有人需要参考，这些是参考。

[通知文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView)

[如何在android上创建自定义通知](http://www.framentos.com/android-tutorial/2012/02/20/how-to-create-a-custom-notification-on-android/)

[滑动抽屉 API](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:20:16.447

您可以添加 5 个匿名侦听器，或单个命名侦听器。

匿名的：

```
Button b1 = new Button(...);
b1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // first listener's code goes here
    }
});

Button b2 = new Button(...);
b2.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // second listener's code goes here
    }
});
... 
```

named 大致相同，但包含一个 switch 语句来区分发生的情况：

```
View.OnClickListener myListener = new View.OnClickListener() {
    public void onClick(View v) {
        String buttonTitle = ((Button)v).getText();
        if ("title1".equals(buttonTitle)) {
            // do things for the first button's click
        } else if ("title2".equals(buttonTitle)) {
            // do things for the second button's click
        }
        ...
    }
});
... 
```

# php - PHP如何初始化/解释未定义的变量？

> ID：12347191
> 
> 赞同：0
> 
> 时间：2012-09-10T07:38:49.797
> 
> 标签：php, variables, initialization

好吧，我必须删除现有 PHP 5.4 脚本的警告，我不确定如何正确处理以下问题。

我有一个源代码

```
if ($start_id_minus >= 0)
{
    $tmp_link = $link."&id=$start_id_minus";
    $tmp_html_previous .= "<a href='$tmp_link'><<&nbsp;previous</a>&nbsp;";
} 
```

这会导致类似的通知`"Notice: Undefined variable: $tmp_html_previous in <5 lines below>"`

所以我要做的是在这个“if”之前初始化变量。在这种情况下，很明显 $tmp_html_previous 是一个字符串，所以我可以做的是：

```
$tmp_html_previous = ''; 
```

但是我遇到了很多类似的情况，变量的“类型”对我来说并不明显。那么如何正确初始化这些变量呢？用NULL？用 0? 和 ''？一点也不：var $tmp;?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:44:40.390

`0`是您要对其进行数学运算的任何变量的明显初始值。
`true`或者`false`是“布尔变量”的明显初始值。
`null`对于其他任何东西来说都是一个很好的初始值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:44:46.227

在这种情况下，由于看起来好像您正在构建一个字符串，您可以使用：

```
$tmp_html_previous = ''; 
```

或者：

```
$tmp_html_previous = NULL; 
```

如果 $tmp_html_previous 是一个布尔值，您可以将默认值设置为 true 或 false。

```
$tmp_html_previous = false; 
```

如果你在做计算：

```
$tmp_html_previous = 0; 
```

基本上，这完全取决于您的应用程序的逻辑。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T07:41:26.680

无论你想要什么，类型都会自动改变，因为 PHP 不是强类型的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T07:44:42.267

随便初始化什么；如果担心附加执行此操作的字符串`string`：

`$tmp = isset($tmp) ? $tmp : '';`

但是，`null`始终是显而易见的解决方案。

# javascript - javascript 从任何嵌入式 Flash 视频中发现 .flv url？

> ID：12347196
> 
> 赞同：0
> 
> 时间：2012-09-10T07:39:11.703
> 
> 标签：javascript, flash, video

是否有任何 javascript 库可以在具有嵌入式 Flash 视频播放器的当前页面上找到 Flash 视频文件 (.flv) 的 URL？前任。打开collegehumor.com 视频链接，显示flash 视频网址。

我一直在查看来自 chrome 扩展程序的代码，这些代码发现了可供下载的 Flash 视频链接，但没有骰子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:37:38.197

浏览器扩展可以查看 Flash 内部结构并监视您的 HTTP 活动，以查看从何处提取数据，但是在文档中运行的 Javascript 没有读取其中任何一个的权限。

一些 Flash 应用程序将它们的一些内部结构暴露给 Javascript，但它们需要专门编写该功能，并且对于第三方，这将被记录在案，大概是作为 API。据我所知，大学幽默并没有提供任何这些。

# android - 如何知道在 Android NDK 中访问文件的确切位置

> ID：12347201
> 
> 赞同：0
> 
> 时间：2012-09-10T07:39:36.947
> 
> 标签：android, linux, linux-kernel, ls, proc

使用“lsof”，我可以检查打开文件的列表，是否有任何命令或任何其他方式可以检测文件被访问的位置。“lsof”命令的输出如下：-

```
COMMAND     PID       USER   FD      TYPE             DEVICE  SIZE/OFF       NODE NAME

init          1        ???  cwd       ???                ???       ???        ??? /proc/1/cwd (readlink: Permission denied)

init          1        ???  exe       ???                ???       ???        ??? /proc/1/exe (readlink: Permission denied)

init          1        ??? root       ???                ???       ???        ??? /proc/1/root (readlink: Permission denied)

init          1        ???  FDS                                                   /proc/1/fd/ (opendir: Permission denied)

init          2        ???  cwd       ???                ???       ???        ??? /proc/2/cwd (readlink: Permission denied)

init          2        ???  exe       ???                ???       ???        ??? /proc/2/exe (readlink: Permission denied)

init          2        ??? root       ???                ???       ???        ??? /proc/2/root (readlink: Permission denied)

init          2        ???  FDS                                                   /proc/2/fd/ (opendir: Permission denied)

init          3        ???  cwd       ???                ???       ???        ??? /proc/3/cwd (readlink: Permission denied)

init          3        ???  exe       ???                ???       ???        ??? /proc/3/exe (readlink: Permission denied)

init          3        ??? root       ???                ???       ???        ??? /proc/3/root (readlink: Permission denied)

init          3        ???  FDS                                                   /proc/3/fd/ (opendir: Permission denied)

init          4        ???  cwd       ???                ???       ???        ??? /proc/4/cwd (readlink: Permission denied)

init          4        ???  exe       ???                ???       ???        ??? /proc/4/exe (readlink: Permission denied)

init          4        ??? root       ???                ???       ???        ??? /proc/4/root (readlink: Permission denied)

init          4        ???  FDS                                                   /proc/4/fd/ (opendir: Permission denied)

init          5        ???  cwd       ???                ???       ???        ??? /proc/5/cwd (readlink: Permission denied)

init          5        ???  exe       ???                ???       ???        ??? /proc/5/exe (readlink: Permission denied)

init          5        ??? root       ???                ???       ???        ??? /proc/5/root (readlink: Permission denied)

init          5        ???  FDS                                                   /proc/5/fd/ (opendir: Permission denied)

init          6        ???  cwd       ???                ???       ???        ??? /proc/6/cwd (readlink: Permission denied)

init          6        ???  exe       ???                ???       ???        ??? /proc/6/exe (readlink: Permission denied)

init          6        ??? root       ???                ???       ???        ??? /proc/6/root (readlink: Permission denied)

init          6        ???  FDS                                                   /proc/6/fd/ (opendir: Permission denied)

init          7        ???  cwd       ???                ???       ???        ??? /proc/7/cwd (readlink: Permission denied)

init          7        ???  exe       ???                ???       ???        ??? /proc/7/exe (readlink: Permission denied)

init          7        ??? root       ???                ???       ???        ??? /proc/7/root (readlink: Permission denied)

init          7        ???  FDS                                                   /proc/7/fd/ (opendir: Permission denied)

init          8        ???  cwd       ???                ???       ???        ??? /proc/8/cwd (readlink: Permission denied)

init          8        ???  exe       ???                ???       ???        ??? /proc/8/exe (readlink: Permission denied)

init          8        ??? root       ???                ???       ???        ??? /proc/8/root (readlink: Permission denied)

init          8        ???  FDS                                                   /proc/8/fd/ (opendir: Permission denied)

init          9        ???  cwd       ???                ???       ???        ??? /proc/9/cwd (readlink: Permission denied)

init          9        ???  exe       ???                ???       ???        ??? /proc/9/exe (readlink: Permission denied)

init          9        ??? root       ???                ???       ???        ??? /proc/9/root (readlink: Permission denied)

init          9        ???  FDS                                                   /proc/9/fd/ (opendir: Permission denied)

init         10        ???  cwd       ???                ???       ???        ??? /proc/10/cwd (readlink: Permission denied) 
```

对于每个 pid，我得到三个位置，例如 pid "9"，我得到以下位置：- "/proc/1/cwd (readlink: Permission denied)","/proc/9/exe","/proc/ 9/fd/ (opendir: 权限被拒绝)"

现在我怎么知道哪个文件正在被使用？我是新手，所以不太了解。任何建议都会对您有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:08:23.037

试试热熔器。[http://linux.die.net/man/1/fuser](http://linux.die.net/man/1/fuser) 用于识别使用文件或套接字的进程。

# android - Start Intent for Result - 仅用于图像的相机意图？

> ID：12347202
> 
> 赞同：0
> 
> 时间：2012-09-10T07:39:39.360
> 
> 标签：android, android-intent, android-camera, android-camera-intent

我有一个用户可以用来拍照的应用程序。拥有相机是一个很小但必要的功能，但我希望它只能拍照（没有视频）。有没有办法让它 startIntentForResult 与仅图片的相机意图？或者也许让它只接受图像作为结果？为应用程序制作我自己的自定义相机似乎有点矫枉过正，但如果必须，我会这样做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:44:15.960

这段代码一直为我工作

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
Uri uri = Uri.fromFile(File.createTempFile("image", ".jpg"));
cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, uri);
startActivityForResult(Intent.createChooser(cameraIntent, "Take Picture", 0); 
```

# visual-studio-lightswitch - 灯开关清除视觉收藏

> ID：12347206
> 
> 赞同：0
> 
> 时间：2012-09-10T07:39:49.130
> 
> 标签：visual-studio-lightswitch

我有一个临时数据的视觉集合。从这个视觉集合中清除所有记录的正确方法是什么？

编辑（在 Yann 要求更好地了解我正在尝试做的事情之后）

只需单击一个按钮，我就可以使用基于用户定义参数的数据填充一个可视化集合。用户可以根据需要编辑此数据。然后当他们单击保存时，我将这些数据写入不同的数据库表。（我通过代码执行此操作的原因是因为 visualcollection 的形状不直接映射到我的 SQL 数据库中的单个表 - 我注意到 Lightswitch 不允许一个轻松完成的场景。）但是，如果用户在填充集合后更改填充集合的参数，我需要清除该集合并根据新参数重新填充它。正是在这里，我希望只调用一个 [visualcollection].clear 方法。但没有这样的运气。我尝试了以下每种方法都没有成功：

1) 对于 visualcollection 中的每个项目，调用 item.details.delete （这会返回有关项目未被当前上下文跟踪的错误）

2）将第一项设置为selecteditem，然后调用visualcollection.removeselected。迭代第一项！= null。（这个显然无法从集合中删除所有项目 - 它删除了一些，但不是全部 - 我不明白为什么）。

所以现在我已经在屏幕上调用了 this.Refresh（在将用户的参数存储在静态变量中以便我可以在屏幕的 dataworkspaceinitialized 事件中重新填充它们之后）。不过，这一步似乎太激烈了……我真的必须在屏幕上调用刷新来清除视觉集合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:28:03.300

“最佳”方式可能取决于几个不同的东西，是附加数据库还是内在数据库？您熟悉从客户端触发服务器上的代码吗？涉及多少记录等？是否存在一个现有的过程，这可能只是其中的一个自然部分？或者您是否打算通过单击屏幕上的按钮来执行操作？

如您所见，这不是一个简单的答案，因为您不知道更多关于您想要做什么。

# java - 有效地从自定义对象实现 JList？

> ID：12347210
> 
> 赞同：0
> 
> 时间：2012-09-10T07:40:24.807
> 
> 标签：java, swing, user-interface, jlist, custom-component

我需要实现一个 JList 来显示 Array-List 的内容。ArrayList 包含“自定义”对象，我只想从中显示标题。

“自定义对象”可以有 - 标题 - 用户等。

与我现在正在做的事情相比（遍历整个数组并使用 title[i] = customObject.getTitle() 构建另一个字符串数组），最有效的方法是什么？

感谢任何愿意花时间回答的人...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:48:34.333

*   没有限制，代码中的错误，为了更快地发布[SSCCE](http://sscce.org/)获得更好的帮助，证明了您的问题

*   （不要重新发明轮子）创建一个保存[JList值的](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)[DefaultListModel](http://docs.oracle.com/javase/tutorial/uiswing/components/model.html)

*   `ListModel`必须在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上完成所有更新

*   对于 GUI 或数组的最复杂输出是基于`java.util.List`, `Map`, `HashMap`, 然后使用[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)和基于[AbstractTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)的一列，因为`JList`与`JTable`

# javascript - 将接受标头参数传递给 jQuery AJAX

> ID：12347211
> 
> 赞同：66
> 
> 时间：2012-09-10T07:40:36.817
> 
> 标签：javascript, jquery

当我在 Chrome 控制台中检查以下代码时，它会显示一个请求标头`Accept:undefined`

```
jQuery.ajax({
        url: _this.attr('href'),
        accepts: "application/json; charset=utf-8",

    });
}); 
```

如何将接受类型设置为 JSON。我不想设置自定义标题或使用`beforeSend`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-10T07:53:08.930

试试这个 ，

```
$.ajax({     
  headers: {          
    Accept: "text/plain; charset=utf-8",         
    "Content-Type": "text/plain; charset=utf-8"   
  }     
  data: "data",    
  success : function(response) {  
    // ...
  }
}); 
```

请参阅此帖子以供参考：

[无法使用 jQuery 正确设置 Accept HTTP 标头](https://stackoverflow.com/questions/1145588/cannot-properly-set-the-accept-http-header-with-jquery)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-10T08:02:49.203

有两种设置接受标头的替代方法，如下所示：

```
1) setRequestHeader('Accept','application/json; charset=utf-8');

2) $.ajax({
    dataType: ($.browser.msie) ? "text" : "json",
    accepts: {
        text: "application/json"
    }
}); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-02-19T13:26:46.730

在最新版本的 jQuery 中，将“dataType”设置为适当的值也会设置接受标头。例如，`dataType: "json"`将接受标头设置为`Accept: application/json, text/javascript, */*; q=0.01`.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-09-30T17:28:48.027

其他答案没有回答实际问题，而是提供了解决方法，这很可惜，因为实际上需要 10 秒才能找出`accepts`参数的正确语法。

该`accepts`参数采用一个将 映射`dataType`到`Accept`标头的对象。在您的情况下，您甚至不需要传递`accepts`对象，因为将数据类型设置为`json`就足够了。但是，如果您确实要配置自定义`Accept`标头，请执行以下操作：

`accepts: {"*": "my custom mime type" },`

我怎么知道？打开 jquery 的源代码并搜索“accepts”。第一个发现告诉你所有你需要知道的：

```
 accepts: {
        "*": allTypes,
        text: "text/plain",
        html: "text/html",
        xml: "application/xml, text/xml",
        json: "application/json, text/javascript"
    }, 
```

如您所见，默认映射到`text`、和数据类型。`html``xml``json`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-27T14:08:29.233

试试这个：

```
$.ajax({
        beforeSend: function (xhr){ 
        xhr.setRequestHeader("Content-Type","application/json");
        xhr.setRequestHeader("Accept","text/json");
    }, 
    type: "POST",
    //........
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-10-23T15:56:27.933

尽管其中一些是正确的，但我发现以前的回答相当混乱。同时，OP 要求提供一个没有设置自定义标题或使用的解决方案`beforeSend`，所以我一直在寻找更清晰的解释。我希望我的结论能给其他人一些启发。

编码

```
jQuery.ajax({
    .... 
    accepts: "application/json; charset=utf-8",
    ....
}); 
```

不起作用，因为根据 jQuery 文档（[https://api.jquery.com/jquery.ajax/](https://api.jquery.com/jquery.ajax/)`accepts` ）必须是 a `PlainObject`（不是 a ）。具体来说，jQuery 期望零个或多个键值对将每个键值对与它们接受的 MIME 类型相关联。所以我最终使用的是：`String``dataType`

```
jQuery.ajax({
    ....
    dataType: 'json',
    accepts: {
        json: 'application/json'
    },
    ....
}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-01-23T16:48:40.270

您已经将 Accept 参数标识为您想要的参数，并且 keyur 正确地向您展示了设置它的正确方法，但是如果您将 DataType 设置为“json”，那么它会自动将 Accept 的默认值设置为您想要的值根据[jQuery 参考](http://api.jquery.com/jquery.ajax/)。所以你只需要：

```
jQuery.ajax({
    url: _this.attr('href'),
    dataType: "json"
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-13T10:03:11.950

我用`jQuery.getJSON( url [, data ] [, success( data, textStatus, jqXHR ) ] )` 例如：

```
var url="my.php";
$.getJSON( url, myObj )
.done(function( json ) { ... }) /* got JSON from server */
.fail(function( jqxhr, textStatus, error ) {
    var err = textStatus + ", " + error;
    console.log( "Failed to obtain JSON data from server: " + err );
  }); /* failed to get JSON */ 
```

getJSON 是以下的简写：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

# ruby-on-rails - 在Ruby中将类对象转换为字符串

> ID：12347213
> 
> 赞同：8
> 
> 时间：2012-09-10T07:40:46.977
> 
> 标签：ruby-on-rails

我处于需要将对象转换为字符串的情况，以便我可以检查该对象的任何字段中的无效字符/HTML。

这是我的垃圾邮件检查功能

```
def seems_spam?(str)
   flag = str.match(/<.*>/m) || str.match(/http/) || str.match(/href=/)
   Rails.logger.info "** was spam #{flag}"
   flag
end 
```

此方法使用字符串并查找错误数据，但我不知道如何将对象转换为字符串并传递给此方法。我试过这个

```
@request = Request
spam = seems_spam?(@request.to_s) 
```

请指导

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T07:53:19.520

你可以试试`@request.inspect`

这将显示可公开访问的字段

编辑：那么您是否尝试验证对象上的每个字段？

如果是这样，您可以获得字段和值对的散列，并将每一个传递给您的方法。

```
@request.instance_values.each do |field, val|
  if seems_spam? val
  # handle spam
end 
```

如果你问的是实现 to_s 方法，Eugene 已经回答了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:03:09.667

您需要在 Object 类中创建“to_s”方法，您将在其中循环遍历对象的所有字段并将它们收集到一个字符串中。

它看起来像这样：

```
def to_s
  attributes.each_with_object("") do |attribute, result|
    result << "#{attribute[1].to_s} "
  end
end 
```

属性变量是一个具有字段名称和字段值的数组 - [id, 1]

调用`@object.to_s`将产生一个字符串`"100 555-2342 machete "`，您可以使用该字符串检查垃圾邮件。

# c# - 从 .exe 获取 FileDescription (ProgramName)

> ID：12347215
> 
> 赞同：3
> 
> 时间：2012-09-10T07:41:08.617
> 
> 标签：c#, java, process, version

我正在为我在 Eclipse（使用 Java）中的开发工作开发一个活动跟踪器。我现在有了程序的路径和我在其中花费的持续时间。

例如：`7min C:\Program Files (x86)\Internet Explorer\iexplore.exe`和 `10min C:\Program Files\Microsoft Office\Office14\OUTLOOK.EXE`

我现在想知道程序的名称。在 C# 中，我得到它是这样的：

```
System.Diagnostics.FileVersionInfo versionInfo = System.Diagnostics.FileVersionInfo.GetVersionInfo(file);
return (versionInfo.FileDescription == string.Empty) ? null : versionInfo.FileDescription; 
```

不幸的是，我在 Java 中没有找到这样的方法，我不确定这是否可能？

谢谢！

**编辑**：我也阅读了这篇[文章](https://stackoverflow.com/questions/6918022/get-version-info-for-exe?rq=1)和接受的答案，但无法获得 FileDescription ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:53:16.743

我不知道Java中有这样的API。但是，您可以执行以下操作：

1.  使用返回程序名称的所需方法创建 C# 项目。
2.  将此项目导出到 DLL。
3.  在您的 java 代码中，您可以使用 JNI 从您的 DLL 项目中调用本机代码。您可以查看这些示例： [SUN JNI 示例](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html)，[从 Java 应用程序中进行本机 Windows API 调用](http://edn.embarcadero.com/article/20679)

（我建议你考虑一下你是否绝对需要这个描述。）祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-20T13:03:09.220

我花了很长时间才找到这个，但我终于能够拼凑出这个内联脚本： `(get-command *.exe).fileversioninfo.filedescription` 现在我使用了`*.exe`并且`.filedescription`因为我试图为`exe`目录中的每个返回美化的文件名，但你可以使用任何可用的变量。

# php - 如何将 XML 数据请求提交给 WSDL 服务器？

> ID：12347218
> 
> 赞同：0
> 
> 时间：2012-09-10T07:41:17.367
> 
> 标签：php, xml, web-services, wsdl

我想将 XML 数据从 Web 服务客户端提交到 WSDL 服务器。这是 WSDL 文件： http: [//www.nemsis.org/v3/downloads/NEMSIS_V3_12_core.wsdl](http://www.nemsis.org/v3/downloads/NEMSIS_V3_12_core.wsdl) 我正在调用函数“SubmitData”，但它给出了错误::stdClass Object ([requestType] => SubmitData [requestHandle] => 服务器致命错误 #11。SOAP 消息中没有有效负载。请确保 SOAP 消息已正确编译。[statusCode] => -101 )

这是我写的代码::

```
<?php
    $xml = file_get_contents($_SERVER['DOCUMENT_ROOT'].'/test/nemsis/data.xml');
    try{
        $sClient = new SoapClient('https://www.nemsis.org/NemsisV3Validator/NemsisWsService?wsdl');
        $parameters->username = "******";
        $parameters->password = "*********";
        $parameters->organization = "Organisation";
        $parameters->requestType = "SubmitData";
        $parameters->submitPayload = $xml;
        $parameters->requestDataSchema = "62";
        $parameters->schemaVersion = "3.2.6";
        $parameters->additionalInfo = "Hakuna matata";
        $response = $sClient->SubmitData($parameters);
        print_r($response);
    } 
    catch(SoapFault $e)
    {
        var_dump($e);
    }
?> 
```

# qt - CMake中的FindQt4无法识别标志-m32

> ID：12347219
> 
> 赞同：0
> 
> 时间：2012-09-10T07:41:22.170
> 
> 标签：qt, gcc, cmake

我尝试在 x86_64 平台（Fedora16）上构建 x86 应用程序。在这个应用程序中，我使用的是 Qt，构建系统是 cmake。在 CMakeLists.txt 我正在使用：

`find_package(Qt4 REQUIRED qtmain QtCore QtGui QtWebKit)`

`include(${QT_USE_FILE})`

用于生成 Makefile 的 cmake 命令如下：

`cmake -DCMAKE_CXX_FLAGS="-fpermissive -m32" -DCMAKE_CXX_LINKER_PREFERENCE="-m32" -DCMAKE_EXE_LINKER_FLAGS="-m32" -DCMAKE_SHARED_LINKER_FLAGS="-m32"`

因此，编译链接器后找不到兼容的 Qt 库。像这样的错误：

`/usr/bin/ld: skipping incompatible /usr/lib64/libQtWebKit.so when searching for -lQtWebKit`

没关系。在 /usr/lib64 库中有 x64 平台。/usr/lib 中的所需库，它们存在！但我不明白，为什么 FindQt4 不能识别平台？该脚本设置了以下变量：QT_LIBRARY_DIR、QT_LIBRARIES 等等。此类变量设置如下：

`-- QT_LIBRARY_DIR: /usr/lib64`

`-- QT_LIBRARIES: optimized;/usr/lib64/libQtWebKit.so;debug;/usr/lib64/libQtWebKit_debug.so;optimized;/usr/lib64/libQtXmlPatterns.so;debug;/usr/lib64/libQtXmlPatterns_debug.so;optimized;/usr/lib64/libQtGui.so;debug;/usr/lib64/libQtGui_debug.so;optimized;/usr/lib64/libQtNetwork.so;debug;/usr/lib64/libQtNetwork_debug.so;optimized;/usr/lib64/libQtCore.so;debug;/usr/lib64/libQtCore_debug.so`

我的问题：为什么不 /usr/lib？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:21:05.453

`-m32`可能是因为 FindQt4 模块对标志一无所知。

尝试`QT_LIBRARY_DIR`明确设置。

# php - 项目 Scala + PHP

> ID：12347222
> 
> 赞同：6
> 
> 时间：2012-09-10T07:41:26.947
> 
> 标签：php, scala

有人加入 Scala 的 php 项目吗？我工作中的一个项目是用 php 编写的帮助台，我有时仍在开发这个项目，但我想在 Scala 中做一些功能。想知道它是否可能。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T09:01:31.963

您可以使用[Quercus/Bianca](https://github.com/CleverCloud/Bianca)。

它确实有效，我在码头容器中的 PHP 应用程序上执行了一些硒测试。PDO mysql 使用 JDBC 驱动程序（速度更快）。

您可以轻松地从 PHP 调用 Java/Scala：http: [//www.caucho.com/resin-3.1/doc/quercus.xtp#CallingJavaMethods](http://www.caucho.com/resin-3.1/doc/quercus.xtp#CallingJavaMethods)，运行时比标准 PHP 运行时更快，您可以在 WAR 中发布您的应用程序（有时，它不仅仅是来源更好）。

如果您打算将一些 PHP 应用程序工业化，IMO 这是一个好的开始。

（示例：[https](https://github.com/un-jon/Code-review-Quercus/tree/democode/helloworld) ://github.com/un-jon/Code-review-Quercus/tree/democode/helloworld ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:47:58.980

两种不同*编程语言*之间唯一真正的**联系**是[ABI](http://en.wikipedia.org/wiki/Application_binary_interface)或编程语言绑定。

 *例如，ABI 和编程语言绑定是关于如何在 C 中定义的函数或类在 PHP 中可用的低级约定。

* * *

*用两种不同编程语言编写的两个不同应用程序*之间的另一个**连接**可以是[API](http://en.wikipedia.org/wiki/Application_programming_interface)，它是一个应用程序（或两者）允许通过[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)调用的一组功能。

 *暴露的 API 可以通过[XML-RPC](http://en.wikipedia.org/wiki/XML-RPC)、[SOAP](http://en.wikipedia.org/wiki/SOAP)、[WSDL](http://en.wikipedia.org/wiki/WSDL)等一些常规形式访问，并且只能访问应用程序设计者决定对外共享的那些功能。**

# android - 我使用了 google api translate 但它返回 null

> ID：12347225
> 
> 赞同：0
> 
> 时间：2012-09-10T07:41:59.267
> 
> 标签：android, google-translator-toolkit

这是我想翻译文本但**不**使用http的代码我希望它直接翻译我看到了这个教程但它返回null我试图改变每个函数的返回并且我已经导入google-api-translate-java- 0.95.jar

将该 JAR 文件导入到 android buid 路径（右键单击*项目*->*属性*-> *Java 构建路径*->*库*->*添加外部 JARS*。）请提前帮助我thanx

```
 main.xml:

 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
     >
<TextView 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/hello"
/>
  </LinearLayout> 
```

JAVA 文件

翻译器.java：

```
 public class Translator extends Activity {
/** Called when the activity is first created. */
    String translatedText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = new TextView(this);
    Translate t = new Translate();
     public String execute(String arg0, Language arg1, Language arg2)
            throws GoogleAPIException {
        // TODO Auto-generated method stub

        return null  ;
    }

    public String[] execute(String[] arg0, Language arg1, Language arg2)
            throws GoogleAPIException {
        // TODO Auto-generated method stub
        return null;
    }

    public String[] execute(String arg0, Language arg1, Language[] arg2)
            throws GoogleAPIException {
        // TODO Auto-generated method stub
        return null;
    }

    public String[] execute(String[] arg0, Language[] arg1, Language[] arg2)
            throws GoogleAPIException {
        // TODO Auto-generated method stub
        return null;
    }};

    try {
      translatedText = t.execute("Bonjour le monde", Language.FRENCH, Language.ENGLISH);

    } catch (Exception e) {
  e.printStackTrace();
     }

    Toast.makeText(this, translatedText, Toast.LENGTH_SHORT).show();

    tv.setText(translatedText);

    setContentView(tv);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:55:24.483

我相信，谷歌翻译 API 需要 http 连接

# c# - 在 c#.net 中使用 Ultragrid 保存选中的行时出现问题

> ID：12347229
> 
> 赞同：0
> 
> 时间：2012-09-10T07:42:17.927
> 
> 标签：c#, .net, infragistics

我是 Infragistics Controls 的新手。
目前我正在使用 C#.net 中的 UltraGrid 并在使用复选框样式属性保存选定行时遇到问题。

我在 UltraGrid 中仅显示选定的行，并且在将行加载到网格中时，已选中的值和未选中的值正确显示。但是，在保存时，只考虑最近检查的行，默认检查的行不考虑 - 它在保存时抛出 null。只有最近选择的行才会被保存。

请在这里帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:03:16.930

我有一个类似的问题，当尝试仅在选中的行中保存值时，最后选中的复选框不是最新的 - 调用`yourUltraGrid.UpdateData()`为我工作。

如果这没有帮助，您使用什么代码来设置“默认行”？这可能有助于进一步阐明您的问题。

祝你好运！

# focus - 带有 CSS 焦点选择器的浏览器

> ID：12347231
> 
> 赞同：0
> 
> 时间：2012-09-10T07:42:24.807
> 
> 标签：focus, selector

我对我编写的 css 规则有疑问，问题是该规则适用于 IE，但不适用于任何其他浏览器。规则看起来像这样->

```
.ui-toggle:focus .toggleMsg, .ui-toggle:focus .toggleAcc, .toggleAcc:hover,
.toggleMsg:hover {display:block} 
```

我的目标是将 toggleMsg 类或 toggleAcc 类转换为 display:block 它仅适用于 IE，如果我将 .ui-toggle:focus 更改为 .ui-toggle:hover 然后当我悬停时我得到 display:block 规则开始[吧](http://www.incapsulatest.tk/test) _

# erlang - Erlang 列表：filter/2 不能使用逗号代替 andalso

> ID：12347235
> 
> 赞同：4
> 
> 时间：2012-09-10T07:42:32.687
> 
> 标签：erlang

以下代码在编译时给了我警告：警告：使用运算符'>'没有效果

```
rd(a,{x,y}),
List = [#a{x=1,y=2}, #a{x=3,y=4}],
lists:filter(
    fun(E) ->
        E#a.x > 1, E#a.y =:= 2
    end, List). 
```

但是当我用 andalso 替换逗号时，没有警告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T07:52:07.543

在这种情况下使用逗号仅分隔两个操作，互不影响：`E#a.x > 1`和下一个操作（这是函数的结果）`E#a.y =:= 2`

这意味着在您的情况下，过滤器功能等于：

```
fun( E ) ->
   E#a.y =:= 2
end 
```

仅当您编写**保护表达式**时，逗号的用法等于 的用法`andalso`，否则 - 逗号只是操作之间的**分隔符**。

因此，您可以通过两种方式重写您的函数：

1)

```
fun
(E) when E#a.x > 1, E#a.y =:= 2 ->
   true;
(_Othervise) ->
   false
end 
```

2)

```
 fun( E ) ->
    (E#a.x > 1) andalso (E#a.y =:= 2)
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:58:21.227

是的，正如@stemm 所说。

在正文中`,`，只是将动作分开并给它们一个要评估的顺序。编译器告诉你，因为`E#a.x > 2`没有副作用，永远不会产生异常并且它的返回值被忽略，那么它永远不会影响执行。

但是，在守卫中，将*守卫测试*`,`分开，所有这些测试都必须成功才能使守卫成功。

 *小心地将守卫视为正常的表达方式，它们的行为方式不同，例如这里。守卫在错误上的表现也不同。因此，虽然守卫*看起来*像表达式，但它们实际上是测试。*

# objective-c - 哪个是线程安全的原子或非原子？

> ID：12347236
> 
> 赞同：33
> 
> 时间：2012-09-10T07:42:37.910
> 
> 标签：objective-c, multithreading, cocoa, thread-safety, atomic

我搜索并发现不可变是线程安全的，而可变不是。这可以。但是我得到了误导性的注释、博客、关于线程安全的原子与非原子的答案，请给出答案的解释。

假设有一个名为“name”的原子字符串属性，如果你`[self setName:@"A"]`从线程 A 调用`[self setName:@"B"]`，从线程 B 调用`[self name]`，从线程 C 调用，那么不同线程上的所有操作都将串行执行，这意味着如果一个线程正在执行 setter 或getter，然后其他线程将等待。这使得属性“name”读/写安全，但如果另一个线程 D`[name release]`同时调用，则此操作可能会产生崩溃，因为这里不涉及 setter/getter 调用。这意味着一个对象是读/写安全的（ATOMIC）但不是线程安全的，因为另一个线程可以同时向对象发送任何类型的消息。

如果属性“name”是非原子的，那么上面示例中的所有线程 - A、B、C 和 D 将同时执行，产生任何不可预知的结果。在原子的情况下，A、B 或 C 中的任何一个将首先执行，但 D 仍然可以并行执行。

您对此的评论将帮助我们......

我的问题是，**“在可可中哪个是线程安全的，原子的还是非原子的？”**

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-10T08:48:13.093

对于 ObjC 属性 -**两者都不是线程安全的**。

Atomic 更能*抵抗*线程错误。总的来说，这是一个奇怪的默认设置。您喜欢原子的场景很少。原子可以增加正确性的概率，但它的级别太低，不能被认为是适当锁定机制的替代品。因此，如果您需要线程安全，您仍然需要在原子读/写之上的其他一些同步原语。如果您不需要线程安全（例如，实例是不可变的或打算仅从主线程运行），则 atomic 不会添加任何内容。

*抵抗*线程错误并不是一种“品质”——它可以掩盖真正的线程错误，使它们更难重现和检测。

另请注意，可变类型与不可变类型实际上并不能保证线程安全。'Mutable' 可以在 ObjC 名称中使用以仅指代接口——不可变实例的内部实际上可能具有内部可变状态。简而言之，您不能假设具有可变子类的类型是线程安全的。

* * *

***问题扩展：***

> 假设有一个名为“name”的原子字符串属性，如果你从线程 A 调用 [self setName:@"A"]，从线程 B 调用 [self setName:@"B"]，从线程 B 调用 [self name]线程 C，则不同线程上的所有操作将串行执行，这意味着如果一个线程正在执行 setter 或 getter，则其他线程将等待。

如果所有线程同时尝试读取和/或写入该属性，则一次只有一个线程可以访问，如果该属性是原子的，则其他线程将被阻止。如果属性是非原子的，那么它们都将在同一“时间”对变量进行不受保护的读写访问。

> 如果另一个线程 D 同时调用 [name release]，则此操作可能会导致崩溃，因为此处不涉及 setter/getter 调用。

正确的。

> 这意味着一个对象是读/写安全的（ATOMIC）但不是线程安全的，因为另一个线程可以同时向对象发送任何类型的消息。

嗯，还有很多。常见的例子是：

```
 @interface MONPerson : NSObject

    @property (copy) NSString * firstName;
    @property (copy) NSString * lastName;

    - (NSString *)fullName;

    @end 
```

原子的或非原子的，如果一个线程正在从该实例读取而另一个线程正在写入它，您将需要一种同步机制（例如锁定）。您最终可能会得到一个 MONPerson 的名字和另一个的姓氏——在 getter 的返回值甚至返回给您之前，该对象可能已经更改，或者可能发生以下情况：

线程 A：

```
p.firstName = @"Rob"; 
```

线程 B：

```
p.firstName = @"Robert"; 
```

线程 A：

```
label.string = p.firstName; // << uh, oh -- will be Robert 
```

> 如果属性“name”是非原子的，那么上面示例中的所有线程 - A、B、C 和 D 将同时执行，产生任何不可预知的结果。

正确 - 最初的症状可能是引用计数不平衡（泄漏、过度释放）。

> 在原子的情况下，A、B 或 C 中的任何一个将首先执行，但 D 仍然可以并行执行。请对此发表评论......

正确的。但是如果你看一下上面的例子——单独的原子很少是锁的合适替代品。它必须看起来像这样：

线程 A：

```
[p lock]; // << wait for it… … … …
// Thread B now cannot access p
p.firstName = @"Rob";
NSString fullName = p.fullName;
[p unlock];
// Thread B can now access p
label.string = fullName; 
```

线程 B：

```
[p lock]; // << wait for it… … … …
// Thread A now cannot access p
…
[p unlock]; 
```

原子访问器的平均速度比非原子访问器慢 20 倍。同样，如果您的类需要是线程安全的并且具有可变状态，那么当它在并发场景中运行时，您可能最终会使用锁。适当的锁定提供了您需要的所有保证——在这种情况下，原子访问器是多余的，使用原子只会增加 CPU 时间。常规锁的另一个好处是您拥有所需的所有粒度 - 尽管它通常比用于原子的自旋锁重，但您通常需要较少的获取，因此如果您正确使用常规锁，它最终会非常快.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-10T07:44:44.197

atomic 保证对变量的原子访问，但它不会使您的代码线程安全。非原子的也不行。

使用“原子”，合成的 setter/getter 方法将确保始终从 getter 返回整个值或由 setter 设置，而不管任何其他线程上的 setter 活动。因此，如果线程 A 在 getter 的中间，而线程 B 调用 setter，则实际可行的值将返回给 A 中的调用者。对于非原子，您没有这样的保证。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-10T11:38:17.243

atomic 使执行以下线程安全。

```
self.myProperty = value; 
```

或者

```
id value = self.myProperty 
```

它不会使以下线程安全

```
[myPorperty addObject:value]; 
```

Atomic 使设置或获取属性成为线程安全的，但它不会使调用该属性本身的任何方法成为线程安全的。

设置或获取值可能需要多条 CPU 指令，因此这意味着设置或获取可以中途中断，另一个线程可以做一些事情，使前一个线程在设置或获取值时的进度无效。

atomic 说以某种方式设置或获取值，以便它发生就像它发生在一个不可分割的指令中一样，因此没有其他线程可以半途而废并搞砸事情。

不可变对象是线程安全的，很简单，因为您无法更改它们，因为您可以从一个不可变对象更改另一个属性，因此除非您将其设为原子，否则该部分不会是线程安全的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-24T10:12:04.000

还有一个没有提到的“原子”属性，它是 ARC 之前线程安全所必需的（可能仍然是）。首先解释为什么需要它：假设没有 ARC，您读取一个对象属性并立即保留它。但是另一个线程可能会在您读取属性和保留调用之间出现，将对象属性设置为 nil，从而导致对象被释放。您将保留发送到已释放的对象，这是不健康的。这将是一个非常罕见的错误，因为它只在时机恰到好处时才会发生。为了防止这种情况，原子对象属性总是返回自动释放的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-04T14:02:57.783

1.  原子是线程安全的。
2.  锁定为互斥量、自旋或条件，这是另一种类型的信号量。阅读更多... [https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-10T08:37:02.137

您应该考虑实施锁定机制，这样您的应用程序就不会出现死锁。此外，如果您正在实现核心数据，您应该阅读 iOS 线程安全。

看。

[http://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html](http://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)

[http://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html%23//apple_ref/doc/uid/10000057i-CH8-SW1](http://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html%23//apple_ref/doc/uid/10000057i-CH8-SW1)

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2015-03-09T06:29:48.600

非原子是线程安全的。保证获取变量的值。

# python - 如何将自定义属性添加到字段类以在模板中输出？

> ID：12347238
> 
> 赞同：0
> 
> 时间：2012-09-10T07:42:48.787
> 
> 标签：python, django, field

我想添加一个自定义字段，它可以提供额外的属性来处理模板中的单个输出。例如这是我的课：

```
class CustomField(CharField):
    suffix = "things" 
```

以及我`field.html`添加`field.suffix`块的地方：

```
<div class="controlGroup clearfix {% if field.errors %}error{% endif %}">
   <label class="controlLabel" for="{{ field.auto_id }}">{{ field.label }}</label>
   <div class="controls">
       {{ field }}
       {% if field.suffix %}
           <span class="suffix">{{ field.suffix }}</span>
       {% endif %}
       {% if field.errors %}
           <span class="helpInline">{{ field.errors }}</span>
       {% endif %}
   </div>
</div> 
```

不幸的是，后缀块根本不输出。

编辑：为了澄清，下面的两个当前答案都针对添加小部件属性。我实际上是在尝试添加一个自定义字符串以在模板中使用，而不是自定义 CSS 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:03:25.727

对于您的简单示例，您可以覆盖用于表单字段的*小部件的*[`attrs`字典](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#customizing-widget-instances)，您不需要创建自定义字段。

 *```
class YourForm(forms.Form):
  some_field = forms.CharField(widget=forms.TextInput(attrs={'class': 'suffix'}) 
```

如果你真的想创建一个自定义字段，你需要创建一个自定义小部件并控制`render`方法。根据您要呈现的表单控件类型，您可以从 django 提供的等效控件继承自定义小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:25:25.847

属性可以通过两种方式传递给表单字段。我在下面给出了示例代码。

```
class ArticleForm(forms.ModelForm):
    class Meta:
        model = MyModel
        widgets = {
            'field1' : forms.TextInput(attrs = {'class': 'suffix'}),
            'field2' : forms.TextInput(attrs = {'class': 'suffix'}),
        } 
```

或者

```
class ArticleForm(forms.ModelForm):
    class Meta:
        model = MyModel

    def __init__(self, *args, **kw):
        super(forms.ModelForm, self).__init__(*args, **kw)
        self.fields['field1'].widget.attrs['class'] = 'suffix'
        self.fields['field2'].widget.attrs['class'] = 'suffix' 
```

您可以使用第一个示例中给出的**小部件，也可以使用第二个示例中给出的****init**小部件。两者都会起作用。

**编辑：**任何属性都可以使用上面的示例传递给 django 表单字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:33:02.400

我最终通过创建自己的小部件来做到这一点：

```
class UsernameInput(TextInput):
    """
    Creates a widget specifically for appending the username suffix as a label
    """  9 
    def render(self, name, value, attrs=None):
        widget = super(UsernameInput, self).render(name, value, attrs)
        widget += u'<span class="field-suffix">@%s</span>' % USERNAME_DOMAIN_PART
        return mark_safe(widget) 
```

然后在我的注册表单中指定小部件，如下所示：

```
username = forms.EmailField(label="Preferred Username",
                            widget=UsernameInput(),
                            error_messages={'invalid': "Please enter a valid email address"}) 
```*

# php - cakephp 2.x 使用官方教程无法登录

> ID：12347241
> 
> 赞同：1
> 
> 时间：2012-09-10T07:42:58.327
> 
> 标签：php, cakephp, cakephp-2.2

我使用的是 CakePHP 2.2，这里是我使用的教程的链接：[**link**](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)

非常重要：**我关闭了 Inflector**

我不在乎 ACL（它有效：D），我的 AUTH 不起作用...`$this->Auth->login()`返回 false...

用户控制器：

```
App::uses('AppController', 'Controller');

class UsersController extends AppController {
    public $helpers = array('Html','Form');
    public $components = array('Auth' => array('authenticate' => array('form' => array('fields' => array('username' => 'login')))),'Session');

    function beforeFilter() {

        //$this->Auth->allow('logout', 'view');
        $this->Auth->allow('*');
        parent::beforeFilter(); 

    }
    function login() {
        if ($this->Auth->login())
        {
            $this->redirect($this->Auth->redirect());
        } else
        {
            $this->Session->setFlash(__('Invalid username or password, try again'));
        } 
```

应用控制器：

```
App::uses('Alc', 'Controller', 'Controller');
class AppController extends Controller {

    public $components = array('Auth'=>array('authorize' => array('Actions' => array('actionPath' => 'controllers'))), 'Session');

    public $helpers = array('Html', 'Form', 'Session');

    function beforeFilter() {
    $this->Auth->userModel = 'Users';
        $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
        $this->Auth->allow('index', 'view', 'admin', 'edit', 'login', 'logout', 'add');
        $this->Auth->logoutRedirect = array('controller' => 'novosti', 'action' => 'index');
        $this->Auth->loginRedirect = array('controller' => 'novosti', 'action' => 'index');
    } 
```

用户型号：

```
App::uses('AuthComponent', 'Controller/Component');
class Users extends AppModel {
        public function beforeSave($options = array()) {
            if (isset($this->data[$this->alias]['password'])) {
                $this->data['Users']['password'] = AuthComponent::password($this->data['Users']['password']);
            }
            return true;
        }
        public function bindNode($user) {
            return array('model' => 'Groups', 'foreign_key' => $user['Users']['groups_id']);
        } 
```

查看文件：

```
<?php
echo $this->Session->flash('auth');
echo $this->Form->create('Users', array('action' => 'login'));
echo $this->Form->inputs(array(
    'legend' => __('Login', true),
    'Login',
    'password'
));
echo $this->Form->end('Login');
?> 
```

**没有可用的 SQL 转储**

我去看看所有这些文件....并将所有文件`lib/controller/components/Authcomponents.php`更改为; 还查看了设置变量和我发现的所有地方我将模型名称从更改为，并且登录字段也从更改为`lib/controller/components/auth/*``Auth.User``Auth.Users``User``Users``username``Login`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:46:19.823

`if (debug($this->Auth->login()))`

调试不返回任何东西，所以这条线总是会失败。

您的用户名是字段，`Login`但默认值是`username`，您尚未为此配置身份验证。

```
public $components = [
    'Auth' => [
        'authenticate' => [
            'Form' => [
                'userModel' => 'Users',
                'fields' => [
                    'username' => 'Login'
                ],
            ],
        ],
    ],
]; 
```

在您的 beforeSave 中，您使用的是`Users`key 而不是`User`. 模型是单一的。

添加`<?php echo $this->element('sql_dump'); ?>`并查看生成的查询。确保它是正确的，并且密码与您的数据库值匹配。

只是我注意到的一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:30:25.387

在登录视图中试试这个：

```
<?php
echo $this->Session->flash('auth');
echo $this->Form->create('Users', array('action' => 'login')); 
echo $this->Form->inputs(array(
    'legend' => __('Login', true),
    'username',
    'password'
));
echo $this->Form->end('Login');
?> 
```

如果您想使用登录，则 Auth 接受默认授权文件作为用户名/密码，然后在控制器中像这样覆盖 auth 授权：

```
$this->Auth->fields = array('username' => 'login', 'password' => 'password'); 
```

或者在控制器中你可以这样做：

```
$this->Auth->authenticate = array(
'Form' => array(
'fields' => array('username' => 'login', 'password' =>'password')
    )
        );
if($this->Auth->login($this->request->data['Users'])){
        ......your code...
    } 
```

# android - 如何删除 Facebook 的 cookie？

> ID：12347245
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:43:08.893
> 
> 标签：android, facebook, cookies

这里有人知道如何删除 facebook cookie 吗？[以此](https://stackoverflow.com/questions/7802364/how-to-remove-specific-cookie-value)为基础！

我尝试使用 facebook SDK for android，我发现了一些 cookie 并尝试删除它们。但它们似乎无法删除。

假设有一个名为“c_user”的 cookie。

```
myCookieManager.setCookie("m.facebook.com","c_user=;expires=Mon, 17 Oct 2011 10:47:11 UTC;"); 
```

我认为cookies应该被删除。但它没有！为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:39:11.807

你可以使用这个 facebook API 方法：

```
com.facebook.android.Util.clearCookies() 
```

# java - 如何使用 java 移动 unix 上的文件？

> ID：12347247
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:43:55.177
> 
> 标签：java, netbeans, jar, file-copying

我在netbeans中编写java。我想移动文件并创建文件。当我在netbeans上运行程序时它可以工作。文件创建和移动。但是当我在 jar 上运行程序时，它不会复制或移动。我给权限 jar 和文件用于读取、写入。但它不起作用。我用root用户打开jar。我怎样才能解决这个问题？

这是我要复制的代码

```
package aaa;

import java.io.File;  
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class MoveFolder 
{
    public   int copy(String from,String where  )
    {   
        int onay=0;
        File srcFolder = new File(from);
        File destFolder = new File(where);

        //make sure source exists
        if(!srcFolder.exists()){

           System.out.println("Directory does not exist."); 
            onay = -1;
          // JOptionPane.showMessageDialog(null, "Directory does not exist.");

        }else{

           try{
            copyFolder(srcFolder,destFolder);
           }catch(IOException e){
            e.printStackTrace(); 
                onay = -1;
           //    JOptionPane.showMessageDialog(null, "Was not Copied.");
           }
        }

        System.out.println("Done");
         return onay;
    }

    public   void copyFolder(File src, File dest)
        throws IOException{

        if(src.isDirectory()){

            //if directory not exists, create it
            if(!dest.exists()){
               dest.mkdir();
               System.out.println("Directory copied from " 
                              + src + "  to " + dest);
          //          JOptionPane.showMessageDialog(null, "Directory copied from " + src + "  to " + dest);
            }

            //list all the directory contents
            String files[] = src.list();

            for (String file : files) {
               //construct the src and dest file structure
               File srcFile = new File(src, file);
               File destFile = new File(dest, file);
               //recursive copy
               copyFolder(srcFile,destFile);
            }

        }else{
            //if file, then copy it
            //Use bytes stream to support all file types

            InputStream in = new FileInputStream(src);
                OutputStream out = new FileOutputStream(dest); 

                byte[] buffer = new byte[1024];

                int length;
                //copy the file content in bytes 
                while ((length = in.read(buffer)) > 0){
                   out.write(buffer, 0, length);
                }

                in.close();
                out.close();
                System.out.println("File copied from " + src + " to " + dest);
         //       JOptionPane.showMessageDialog(null, "File copied from " + src + " to " + dest);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:51:39.650

为什么要使用 IO 流复制文件？为什么不只是做

```
File f; // bla bla init
File otherFile;
f.renameTo(otherFile); 
```

此外，您需要对您尝试移动（到）的文件的读写权限，而不是您正在执行的 jar ......

# android - 无法在android中更改日期格式

> ID：12347248
> 
> 赞同：0
> 
> 时间：2012-09-10T07:43:57.583
> 
> 标签：android, simpledateformat

从网络服务中，我得到了一个日期格式，就像`1994-09-11`在我的 android 应用程序中一样，我需要将其显示为`Sep 11`

我的代码如下

```
Date date_temp = null;
String d_temp = null;
DateFormat formatter;
static SimpleDateFormat datesdf = new SimpleDateFormat("yyyy MMM dd");

public String changeDateformat(String date_str)
    {
        Log.e("date_str ",""+date_str);
        try 
        {
            date_temp = (Date)formatter.parse(date_str);
            Log.e("date_temp ",""+date_temp);
            d_temp = null;
            d_temp = datesdf.format(date_temp);
            Log.e("d_temp ",""+d_temp);
        }
        catch (ParseException ex) 
        {
            ex.printStackTrace();
        }
        catch (java.text.ParseException e) 
        {
            e.printStackTrace();
        }
        return d_temp;
    } 
```

当上述方法被调用时，第一个日志值被打印出来（我从网上得到的值），然后我的应用程序崩溃了，说

```
09-10 13:02:44.920: E/AndroidRuntime(3503): java.lang.NullPointerException
09-10 13:02:44.920: E/AndroidRuntime(3503): at xxxxxxxxxxx(Events.java:206) 
```

这里第 206 行是上述方法的 try catch 中的第一行。我的代码有什么问题，请建议我.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:51:30.533

DateFormat 格式化程序；<-- 它永远不会被初始化。所以你在 null 上调用一个方法。

也许你想使用：

`static SimpleDateFormat datesdf = new SimpleDateFormat("yyyy MMM dd");`

而不是格式化程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:57:46.883

您可以在从网络获取日期后使用字符串生成器试试这个

//无论你想设置这个，你可以设置如下：

```
enter code here 
EditText aa;
aa.setText(   new StringBuilder()
           // Month is 0 based so add 1
            .append(day).append("/")
            .append(month + 1).append("/")
            .append(year).append(" ")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:52:29.710

DateFormat 不是这样使用的。您声明了一个格式化程序，但从不初始化它。要格式化日期，您需要这样做，

```
d_temp = DateFormat.format("MMM dd", date_temp).toString(); 
```

您需要一个 SimpleDateFormat 将您的日期字符串转换为日期，并需要另一个 SimpleDateFormat 将您的日期格式化为一个新字符串。试试这个代码，

```
public static Date strToDate(String format, String date) {
    SimpleDateFormat sdf = new SimpleDateFormat(format);
    try {
        return sdf.parse(date);
    } catch (ParseException e) {
        return null;
    }
}

public String changeDateformat(String date_str) {
    Date t = strToDate("yyyy-MM-dd", date_str);
    return DateFormat.format("MMM dd", t).toString();
} 
```

# java - 我可以在线检查无效吗？

> ID：12347254
> 
> 赞同：7
> 
> 时间：2012-09-10T07:44:39.330
> 
> 标签：java, null, nullpointerexception

我有一个如下所示的 Java 命令：

```
Foo f = new Foo();
String string = f.format(new Bar().getSelection());
                       // ^ may be null 
```

有时我的`Bar`对象可能返回 null，这是设计使然。

对我来说，很自然的做法是将命令拆分为多行并分别进行空值检查，例如：

```
Foo f = new Foo();
BarSel bs = new Bar().getSelection();
String string = "";
if (bs != null) {
    string = f.format(bs);
    // continue...
} 
```

但是，我想知道是否有办法在一行中做到这一点？是否可以对内联对象进行空检查？

*我似乎记得读过关于能够使用问号的文章，但我不记得确切的语法，我可能错了。请注意，我指的不是三元运算符，尽管这是另一种有效的方法。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T07:47:31.950

使用[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#Java)：

```
String string = bs != null ? f.format(bs) : ""; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T07:55:26.697

我想你记得被拒绝的猫王运营商（ [http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html ）（](http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html) [https://blogs.oracle.com/darcy/ entry/project_coin_final_five](https://blogs.oracle.com/darcy/entry/project_coin_final_five)）来自项目硬币。

但是，jakarta commons 具有类似 nvl 的功能，例如[http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringUtils.html#defaultString(java.lang.String](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringUtils.html#defaultString(java.lang.String) ) 即使这些函数不是标准的java，它们最终在大多数程序中作为某些库的依赖。

当您设计具有有效空结果的函数时，您遇到的问题很常见：​​您必须在任何地方记录和处理特殊情况。我几乎可以向您保证，有人会在维护过程中搞砸这一切，从而导致虚假的空指针异常。这就是为什么我通常会推荐不返回 null 的设计。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-28T14:02:28.900

我迟到了，但我想要类似的东西，并发现使用 Java 8 [Optional](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html)类。有问题的问题陈述的解决方案：

```
String string = Optional.ofNullable(bs).map(f::format).orElse(""); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-22T19:18:14.793

**三元运算符**的另一种方法：

```
String string = bs == null ? "" : f.format(bs); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T07:49:31.727

不在 java 中，但一些基于 JVM 的语言（值得注意：groovy）具有 null 安全取消引用：

[http://groovy.codehaus.org/Null+Object+Pattern](http://groovy.codehaus.org/Null+Object+Pattern)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T07:48:37.297

您可以使用三元运算符。

`string = bs != null ? f.format(bs) : "";`

如果 bs 不为空，这将为您提供一个空字符串文字。或者你可以只使用：

`if (bs != null) string = f.format(bs);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T07:48:44.240

```
Foo f = new Foo();
BarSel bs = new Bar().getSelection();
String string = bs != null ? f.format(bs) : ""; 
```

# python - python opencv示例中未解决的导入

> ID：12347256
> 
> 赞同：7
> 
> 时间：2012-09-10T07:44:41.467
> 
> 标签：python, opencv, pydev

我在 /opencv/samples/python2 中运行 opt_flow.py 时遇到问题。在 /samples/python 中一切正常。但是在python2中，似乎缺少了一些东西。

python版本：2.7.3 IDE：Eclipse中的pyDev

[从https://github.com/jonmarimba/OpenCVMirror/blob/ff81e19a7a12764c657e2765d69ef166065f5e61/opencv/samples/python2/opt_flow.py](https://github.com/jonmarimba/OpenCVMirror/blob/ff81e19a7a12764c657e2765d69ef166065f5e61/opencv/samples/python2/opt_flow.py)运行 opt_flow.py

以下来自代码片段：

```
 import cv2, cv2.cv as cv
    import video
    from common import anorm2, draw_str
    from time import clock
    ... 
```

并出现错误..

```
 Description    Resource  Path                           Location Type
    Unresolved import: video    optical_flow.py /practice/test  line 9  PyDev Problem
    Unresolved import: draw_str optical_flow.py /practice/test  line 10 PyDev Problem
    Unresolved import: anorm2   optical_flow.py /practice/test  line 10 PyDev Problem 
```

我没有找到任何与此错误相关的解决方案，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-28T19:30:56.253

我有同样的问题，所以这里的答案只是为了让其他人清楚：

opencv 示例导入同一文件夹中的其他文件。video.py 文件位于您找到正在运行的示例的同一位置。如果您复制其中一个示例，您还需要复制它导入的其他文件，包括 video.py、common.py 等。

# css - 页脚和内容包装器之间的间隙不会消失

> ID：12347263
> 
> 赞同：0
> 
> 时间：2012-09-10T07:44:51.500
> 
> 标签：css, xhtml-1.0-strict

我正在以下网站上工作[http://bestofdesigns.be/studioregenbogen/index.html](http://bestofdesigns.be/studioregenbogen/index.html)。有人可以看看css并告诉我为什么页脚没有附加到内容上，为什么菜单和内容包装器之间有间隙？我已经看了 2 天，似乎找不到问题所在。

谢谢，

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:49:09.207

```
#footer p {
padding-top: 5px;
margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:47:09.093

> 为什么菜单和内容包装器之间有差距？

差距是由于`margin`每个浏览器默认应用到列表`<ul>`元素和标题`<h1>`。

删除它或调整它

截屏

![在此处输入图像描述](../Images/43ed0176b53b7121c2177a56b2701118.png) ![在此处输入图像描述](../Images/c0bdf17e4eca464a45ea54f8db0a1d81.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:49:31.337

嗨，现在给`#footer overflow:hidden`并**给**你的`footer p tag`保证金：0；`

像这样

```
 #footer{
        overflow:hidden;
}

    #footer p{
    margin:0;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:20:12.607

我建议您再做一件事，您是否曾经使用 firebug 打开您的设计并检查了您的中间内容的外观。这是糟糕的设计。广泛使用 div 标签不要使用太多填充。在正文样式中放置 text-align:justify 属性。

你的错误在

```
#footer p {
 padding-top: 5px;
 margin: 0;
} 
```

将内容包装类分成两个垂直的div类，然后将下面的垂直类分成另外两个垂直类。将第一个垂直标签分成两个水平 div 类。将您的图像放在第一个水平标签中，然后放在第二个段落中。在底部垂直类中，您的第二段。

# ios - 具有透明背景的 iOS 表格视图单元格

> ID：12347266
> 
> 赞同：0
> 
> 时间：2012-09-10T07:45:09.707
> 
> 标签：ios, xcode, uitableview

是否可以使表格看起来像 iPhone 上的消息。因此，也许每条消息都是一个带有气泡图像的表格部分，并且在该气泡顶部是带有消息文本的标签。表格单元格是否可以完全透明，以便只显示气泡图像而没有白色单元格和边框？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:48:02.083

看看这个：

[UIBubbleTableView](http://www.cocoacontrols.com/platforms/ios/controls/uibubbletableview)

如果您想要键入消息的不断增长的 textView，这就是：

[HPGrowingTextView](http://www.cocoacontrols.com/platforms/ios/controls/hpgrowingtextview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:52:43.597

创建单元格时，您可以使背景透明：

```
cell.contentView.backgroundColor = [UIColor clearColor]; 
```

您可以简单地将 imageView 添加为 backgroundView。

# android - android以编程方式更改图层列表

> ID：12347268
> 
> 赞同：0
> 
> 时间：2012-09-10T07:45:13.157
> 
> 标签：android, xml

我有这个 xml 可绘制对象：

```
 <?xml version="1.0" encoding="utf-8"?>
    <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:id="@+map/marker_frame" 
            android:drawable="@drawable/map_pointer_green"/>
        <item android:id="@+map/marker_profile_picture" 
            android:drawable="@drawable/questionmark"/>
    </layer-list> 
```

如何从代码中更改项目属性？我怎样才能访问它的ID？

我希望能够根据场景从代码中更改每个可绘制对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:49:12.413

如果在代码中使用[LayerDrawable会怎样](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)

# .net - 使用 Moles (v0.94) 和 MSTest (v10.0) 进行测试时，NCover (v3.4.18.6937) 不会收集任何覆盖率信息

> ID：12347269
> 
> 赞同：2
> 
> 时间：2012-09-10T07:45:13.307
> 
> 标签：.net, mstest, code-coverage, moles, ncover

目前我正在尝试使用 NCover 为使用 Moles 作为隔离框架的 MSTest 程序集获取代码覆盖率。经过数小时的测试，NCover 不会收集任何覆盖率信息。我研究了有关 ncover + moles 和 mstest 的各种 stackoverflow 帖子，这些帖子是我执行的基础：

1）我设置了以下环境变量：

```
set CLRMONITOR_EXTERNAL_PROFILERS={9721F7EB-5F92-447C-9F75-79278052B7BA}
set ProfAPI_ProfilerCompatibilitySetting=EnableV2Profiler
set COMPLUS_ProfAPI_ProfilerCompatibilitySetting=EnableV2Profiler 
```

这些环境变量帮助其他用户使覆盖过程正常工作，在我的机器上，这些环境设置不起作用和/或改变结果。

2）这是我对NCover的命令行调用：

```
"C:\Program Files (x86)\NCover\ncover.console" //pm moles.runner.x86.exe "C:\Program Files (x86)\Microsoft Moles\bin\moles.runner.x86.exe" "[PathToTestDll]" /runner:"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe" /afs:"/testcontainer:{0}" 
```

根据此处的其他帖子，我使用了 moles.runner.x86.exe（与其他 moles.runner.exe 一起，测试根本不会执行）。

环境变量的设置和 NCover 的执行给了我以下输出：

```
NCover Complete Trial v3.4.18.6937 x86 (Administrator)
Copyright (c) 2007 - 2010 Gnoso Inc.
License Key: .....
Registered to Customer #: 12387 for 1 Machine
17 days left in the trial period.

Command: "C:\Program Files (x86)\Microsoft Moles\bin\moles.runner.x86.exe"
Command Args: "C:\hudson\workspace\Nightly Build - WebApp 2011\Web\WebApp2011\main\WebApp2011\WebApp2011.Test\bin\DebugFull\WebApp2011.Test.dll" "/runner:C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe" "/afs:/testcontainer:{0}"
Working Directory: 
Assemblies: (All Loaded Assemblies)

******************* Program Output *******************
Process 'moles.runner.x86' [PID 1664] has begun profiling.
Microsoft Moles Runner v0.94.51023.0 -- http://research.microsoft.com/moles -- .NET v4.0.30319
Copyright (c) Microsoft Corporation 2007-2010\. All rights reserved.

instrumenting...started
This version of Moles does not support x64/IA64\. Moles will restart as x86 process.
(Consider using command-line option /x86 to avoid restart.)

instrumenting...Process 'moles.runner.x86' [PID 2692] has begun profiling.
started
Microsoft (R) Test Execution Command Line Tool Version 10.0.30319.1
Copyright (c) Microsoft Corporation. All rights reserved.

Loading C:\hudson\workspace\Nightly Build - WebApp 2011\Web\WebApp2011\main\WebApp2011\WebApp2011.Test\bin\DebugFull\WebApp2011.Test.dll...
Starting execution...

Results               Top Level Tests
-------               ---------------
...

29/961 test(s) Passed, 923 Error, 9 Failed

Summary
-------
Test Run Error.
  Passed   29
  Error   923
  Failed    9
  -----------
  Total   961
Results file:  c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\TestResults\Administrator_QAALM 2012-09-10 09_13_58.trx
Test Settings: Default Test Settings

Run has the following issue(s):
Warning: Test Run deployment issue: The assembly or module 'System.Web.Mvc' directly or indirectly referenced by the test container 'c:\hudson\workspace\nightly build - webapp 2011\web\webapp2011\main\webapp2011\webapp2011.test\bin\debugfull\webapp2011.test.dll' was not found.
Process 'moles.runner.x86' [PID 2692] has finished profiling.
Process 'moles.runner.x86' [PID 1664] has finished profiling.

***************** End Program Output *****************

Execution Time: 2.313,0822 s
Symbol Coverage: 0,00%
Branch Coverage: 0,05%

Coverage File: c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\coverage.nccov

moles.runner.x86.exe is returning exit code #1 
```

正如您在此处看到的，测试被执行，但并没有真正收集到覆盖率。此外，为了执行测试，我将 QTAgent32.exe 复制到以下路径：`C:\Program Files (x86)\Microsoft Moles\bin`

你有什么想法我可以尝试让这些东西发挥作用吗？

*更新* 我刚刚检查了事件日志，在测试执行期间我遇到了几个应用程序错误：

1）许多NullReferenceExceptions：

```
(QTAgent32.exe, PID 1692, Thread 12) AgentObject: Exception while loading test adapter: System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.VisualStudio.TestTools.Execution.TestAdapterManager.CreateAdapter(String adapterTypeName)
   at Microsoft.VisualStudio.TestTools.Execution.TestAdapterManager.LoadAndInitAdapter(String adapterTypeName, ITestElement testElement, IRunContext runContext, Boolean shouldPrepare)
   at Microsoft.VisualStudio.TestTools.Execution.TestAdapterManager.LoadAdapter(ITestElement testElement, IRunContext runContext, Boolean checkHostAdapter, Boolean shouldPrepare)
   at Microsoft.VisualStudio.TestTools.Agent.AgentObject.ExecuteTest(ITestElement test, IResultSink resultSink, TestContext testContext, Boolean loadTest, Boolean forceSynchronousExecution) 
```

2) QTAgent32 超时

```
(QTAgent32.exe, PID 1692, Thread 6) AgentObject: Cleanup: Timeout reached in cleaning up the agent. 
```

# database - 什么是数据库理论领域的“完全约束”？

> ID：12347278
> 
> 赞同：0
> 
> 时间：2012-09-10T07:46:10.673
> 
> 标签：database, dependencies, constraints, terminology

“完全约束”是什么意思？它用于[http://en.wikipedia.org/wiki/Multivalued_dependency](http://en.wikipedia.org/wiki/Multivalued_dependency)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:11:03.453

我不确定这是否真的是一个普遍使用的术语。唯一的定义似乎在同一页面上，与“嵌入式约束”（我无法在任何地方找到定义）形成对比：

> **完全约束**：表达数据库中所有属性的约束。（与嵌入式约束相反。）

就*文章*中给出的示例（两个*多*值依赖项`course -> book`和每个.`course -> lecturer` *`book`*`(course, book, lecturer)``course -> lecturer``lecturer`**

# c# - MVC：通过 SelectListItem 我得到“System.NullReferenceException：对象引用未设置为对象的实例。” 错误

> ID：12347281
> 
> 赞同：0
> 
> 时间：2012-09-10T07:46:19.153
> 
> 标签：c#, asp.net-mvc

通过 SelectListItem 我得到“System.NullReferenceException：对象引用未设置为对象的实例。” 错误。我错了什么？

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Artiesten>
  <Item ID_Artiest="509998" Artiest="-" Product="-" Land="" Plaats="" Website="" Genre="Onbekend" />
  <Item ID_Artiest="970119" Artiest="(hed)p.e." Product="-" Land="" Plaats="" Website="" Genre="Onbekend" />
  <Item ID_Artiest="970080" Artiest="(urusei) yatsura" Product="-" Land="" Plaats="" Website="" Genre="Noise" />
  <Item ID_Artiest="1010302" Artiest="...and you will know us by the trail of dead" Product="-" Land="Verenigde Staten" Plaats="Austin (TX)" Website="" Genre="Noise" />
...
</Artiesten> 
```

这是我的模特

```
public class ArtiestInfoModel
    {
        [DisplayName("Selecteer artiest: ")]
        public int ID_Artiest { get; set; }
        public string SelectedArtiest { get; set; }
        public IEnumerable<SelectListItem> ArtiestenLijst { get; set; }
    } 
```

控制器：

```
 public ActionResult Index(int? AID_Artiest=810000)
        {
            var document = XDocument.Load(Server.MapPath("~/App_Data/Artiesten.xml"));
            var query = new ArtiestInfoModel
            {
                ArtiestenLijst =
                    (from artiest in document.Descendants("Artiesten").Elements("Item")
                    select new SelectListItem
                    {
                        Value = artiest.Attribute("ID_artiest").Value,
                        Text = artiest.Attribute("Artiest").Value,
                        Selected = false //  artiest.Attribute("ID_artiest").Value == AID_Artiest.ToString()
                    }).ToList()
            };

            ViewBag.ID_Artiest = AID_Artiest.Value;
            ViewBag.ArtiestenLijst = query.ArtiestenLijst;

            return View();
        } 
```

控制器由下一个 DropDownList 调用：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">    
    <% using (Html.BeginForm("Index", "Hitdossier", FormMethod.Post, new { id = "frmArtiest" })) %>
    <% { %>
        <table><tr><th width="1000" align="left">Selecteer artiest:</th></tr>
            <tr>
                <td><%= Html.DropDownList("ID_Artiest",
                    new SelectList(ViewBag.ArtiestenLijst, "Value", "Text"),
                    "-- Selecteer artiest --",
                    new
                    {
                        @onchange = "document.getElementById('frmArtiest').submit();"
                    })%>
                </td>
            </tr>
        </table>
        <br />
        <br />
        <div id="divPartialView">
            <%= Html.Action("Detail_Hitdossier", new { AID_Artiest = ViewBag.ID_Artiest })%> <br />
        </div>
    <%} %> 
</asp:Content> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:51:06.577

在您的控制器中，您将节点 ID_artiest 读取为小写，而 xml 显示驼峰式。

改变

```
Value = artiest.Attribute("ID_artiest").Value, 
```

到

```
Value = artiest.Attribute("ID_Artiest").Value, 
```

如果`artiest.Attribute("ID_artiest")`结果为 NULL 值，则读取属性 Value 将引发 null-reference-exception。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:49:45.930

`ArtiestenLijst = new ArtiestenLijst();`请在使用后像这样初始化为新对象

# coding-style - 避免 if else 条件的代码解决方案

> ID：12347286
> 
> 赞同：1
> 
> 时间：2012-09-10T07:47:01.657
> 
> 标签：coding-style

我想知道是否有人可以建议我设计模式或编写以下问题的最佳方法。

1）我有一个数组列表，如下所示

```
list.add(new Book(title, author);
list.add(new Book(title1, author1); 
```

等等....

2）现在我想按作者从列表中查找所有书籍

```
findByAuthor(String author) {
  for(Book book : list){
    if(book.getAuthor().equals(author)){
      return book;
    }
  }
} 
```

同样，我还有另一种称为 findByTitle() 的方法。但是，除了 book.getAuthor() 必须是 book.getTitle() 之外，它将是相同的代码。一切都会一样。

3）现在我可以编写一个对两种方法都通用的方法，如下所示；

```
findByBookProperty (String type, String propertyValue){
  for(Book book : list)
    if(type.equals("author") && book.getTitle().equals(propertyValue)){
      return book;
    } //another else if for author
    //another else for another property
    // if else repeats for all the required finder types...
  }
} 
```

4）我在这里遇到的问题是；1\. 我不想对查找器类型使用讨厌的 if/else 条件。2\. 我想知道是否有任何设计模式或更好的方法来处理这个 if else 或 swich 方法。

重要提示：我在我的 spring 控制器方法中获取作者姓名作为请求参数值。

我很欣赏你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:57:43.187

使用 Commons-Collections 的谓词框架：

`Predicate`1)为每种类型的测试构造一个实例。

2) Use `CollectionUtils.select()`，传入你想用来评估对象的谓词。

另一种选择是使用 Commons-Collections 的转换框架：

`Transformer`1）为您想要提取/比较的每种类型的属性编写一个。

2) 编写一个通用循环，接受一个`Transformer`实例作为参数。

# java - java：更多线程使用的全局日期的互斥

> ID：12347292
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:47:15.323
> 
> 标签：java, multithreading

嗨，伙计，我班上有一个全球日期，这个日期被两个线程使用和修改，我需要解决这个日期的互斥问题。我不是 java 专家，用 c 语言很简单，例如：

```
lock(...)
use/modified global date
unlock(....) 
```

我需要java中的通讯员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:48:59.713

对于初学者，请使用`synchronized`块：

```
Object dateLock = new Object(); // globally visible lock, declare it 
                                // next to your date object

//...

synchronized(dateLock) {
   // modify date
} 
```

以上对于两个线程来说已经足够了。对于更复杂的场景，例如经常由多个线程完成读取并且很少写入时，请查看[ReadWriteLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:55:55.900

您可以使用两种方法：

1）使用同步关键字：

```
synchronized(theGlobalDate) {
  // do whatever modification you want
} 
```

这是Java世界的基础。

2) 在 Java 5 中，有一组新的并发库，你可以使用锁来做一些类似于你在 C 中所做的事情

```
private final ReentrantLock lock = new ReentrantLock();

.....

public void foo() { 
  lock.lock();
  try {
    // do whatever modification you want
  } finally {
    lock.unlock();
  }
} 
```

# ruby - 为什么 bash -l -c "CMD" 让红宝石找到我的宝石？

> ID：12347294
> 
> 赞同：1
> 
> 时间：2012-09-10T07:47:22.320
> 
> 标签：ruby, bash, shell, path, gem

在我的 ruby​​ 脚本中，我需要 gmail gem：

`require 'rubygems'
require 'gmail'`

在 shell 中运行时，它工作正常：

`ruby my-script.rb`

而当我把它放在一个 cron 作业中时，它无法执行：

`* * * * * cd /to/script/directory;/usr/local/rvm/rubies/ree-1.8.7-2011.03/bin/ruby ./my-script.rb`

日志显示无法加载 gmail gem：

`/usr/local/rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- gmail (LoadError)`

好吧，当我这样做时（将 cmd 放入 bash -l -c 'CMD'）：

`* * * * * /bin/bash -l -c 'cd /to/script/directory;/usr/local/rvm/rubies/ree-1.8.7-2011.03/bin/ruby ./my-script.rb'`

它再次正常工作。

为什么？

ps.我知道 arg`-l`使 bash 成为登录 shell，但这有什么不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:35:39.127

该`-l`参数在登录 shell 中执行命令，这意味着它从 shell 配置文件中继承您的路径和其他设置。cron 作业如果在没有登录 shell 的情况下运行，将在没有设置任何路径环境变量的情况下运行（例如 RVM 设置的那些），这导致系统无法找到引用的 gem。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T08:34:26.213

rvm 要求您使用 shell 登录，请参阅[常见问题解答](https://rvm.io/support/faq/#shell_login)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T08:33:31.327

我怀疑您正在登录脚本中加载 RVM，因此 RVM 只能在登录 shell 中使用。

# python - json 到 geoDjango 模型

> ID：12347296
> 
> 赞同：0
> 
> 时间：2012-09-10T07:47:34.807
> 
> 标签：python, django, json, geodjango

我正在使用字段数据的 Django、geodjango 和 postgresql 构建数据库。数据包括纬度和经度。我的任务之一是摄取已经收集的数据。我想使用 .json 文件来定义元数据并编写一些代码来批处理一些 json 文件。

到目前为止，我有一个模型：

```
class deployment(models.Model):                                                                          
    '''                                                                                                  
    @brief This is the abstract deployment class.                                                        
        '''                                                                                                  
        startPosition=models.PointField()                                                                    
        startTimeStamp=models.DateTimeField()                                                                
        endTimeStamp=models.DateTimeField()                                                                  
        missionAim=models.TextField()                                                                        
        minDepth=models.FloatField() # IT seems there is no double in Django                                 
        maxDepth=models.FloatField()                                                                         

class auvDeployment(deployment):                                                                         
    '''                                                                                                  
    @brief AUV meta data                                                                                 
    '''                                                                                                  
    #==================================================#                                                 
    # StartPosition : <point>                                                                            
    # distanceCovered : <double>                                                                         
    # startTimeStamp : <dateTime>                                                                        
    # endTimeStamp : <dateTime>                                                                          
    # transectShape : <>                                                                                 
    # missionAim : <Text>                                                                                
    # minDepth : <double>                                                                                
    # maxDepth : <double>                                                                                
    #--------------------------------------------------#                                                 
    # Maybe need to add unique AUV fields here later when                                                
    # we have more deployments                                                                           
    #==================================================#                                                 

    transectShape=models.PolygonField()                                                                  
    distanceCovered=models.FloatField() 
```

我想用来摄取数据的功能

```
@staticmethod                                                                                        
def importDeploymentFromFile(file):                                                                  
    '''                                                                                              
    @brief This function reads in a metadta file that includes campaign information. Destinction between deployment types is made on the fine name.  <type><deployment>.<supported text> auvdeployment.json 
    @param file The file that holds the metata data.  formats include .json todo:-> .xml .yaml       
    '''                                                                                              
    catamiWebPortal.logging.info("Importing metadata from " + file)                                  
    fileName, fileExtension = os.path.splitext(file)                                                 

    if fileExtension == '.json':                                                                     
        if os.path.basename(fileName.upper()) == 'AUVDEPLOYMENT':                                    
            catamiWebPortal.logging.info("Found valid deployment file")                              
            data = json.load(open(file))                                                             
            Model = auvDeployment(**data)                                                            
            Model.save() 
```

我试图在这个文件中读取的文件

```
{
"id":1,
"startTimeStamp":"2011-09-09 13:20:00",
"endTimeStamp":"2011-10-19 14:23:54",
"missionAim":"for fun times, call luke",
"minDepth":10.0,
"maxDepth":20.0,
"startPosition":{{"type": "PointField", "coordinates": [ 5.000000, 23.000000 ] }}, 
"distanceCovered":20.0
} 
```

我得到的错误是这个

```
TypeError: cannot set auvDeployment GeometryProxy with value of type: <type 'dict'> 
```

如果我从模型和文件中删除地理类型。它将读取文件并填充数据库表。

我将不胜感激任何建议，我如何使用地理类型解析数据文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:28:29.873

好的，解决方法如下。文件格式不是 geoJSON 文件格式，而是 geos 格式。.json 文件应如下所示。

```
{
"id": 1,
"startTimeStamp": "2011-10-19 10:23:54",
"endTimeStamp":"2011-10-19 14:23:54",
"missionAim": "for fun times, call luke",
"minDepth":10.0,
"maxDepth":20.0,
"startPosition":"POINT(-23.15 113.12)", 
"distanceCovered":20,
"transectShape":"POLYGON((-23.15 113.12, -23.53 113.34, -23.67 112.9, -23.25 112.82, -23.15 113.12))"   
} 
```

StartPosition 语法没有改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-30T20:33:15.287

一个快速的解决方法是在保存模型之前使用 geoDjango 中的 GEOs API 将 startPosition 字段从 geoJson 格式更改为 GEOSGeometry 对象。这应该允许它通过验证。

包括来自 Django 的 GEOSGeometry 函数：

```
from django.contrib.gis.geos import GEOSGeometry
...

Model = auvDeployment(**data)
Model.startPosition = GEOSGeometry(str(Model.startPosition))
Model.save() 
```

[GEOS API 不能从 GeoJSON 格式构造对象](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geos/#creating-a-geometry)，只要您先将其设为字符串即可。就目前而言，您将其加载为字典类型而不是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:54:30.507

我建议您使用默认命令来加载夹具：[`loaddata`](https://docs.djangoproject.com/en/dev/ref/django-admin/#loaddata-fixture-fixture)

```
python manage.py loaddata path/to/myfixture.json ... 
```

您的 json 的结构必须稍作调整，但您可以简单[`dumpdata`](https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model)地查看结构的外观。

# android - 将带有日期时间戳的图像存储在 sdcard 上

> ID：12347298
> 
> 赞同：0
> 
> 时间：2012-09-10T07:47:56.557
> 
> 标签：android, image, datetime, android-sdcard

我已经编写了将位图图像存储在 sdcard 中的代码，但我想将它与日期时间戳一起存储。怎么做？

```
bmp = processFrame(mCamera);
                String i1=bmp.toString();
                String root = Environment.getExternalStorageDirectory().toString();
                File myDir = new File(root + "/saved_images");    
                    myDir.mkdirs();
                    Random generator = new Random();
                    int n = 10000;
                    n = generator.nextInt(n);
                    String fname = "Image-"+ n +".jpg";
                    File file = new File (myDir, fname);
                    if (file.exists ()) file.delete (); 
                    try {
                           FileOutputStream out = new FileOutputStream(file);
                           bmp.compress(Bitmap.CompressFormat.JPEG, 90, out);
                           out.flush();
                           out.close();

                    } catch (Exception e) {
                           e.printStackTrace();
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:50:54.620

用这个

```
String fname = "Image-"+ n +System.currentTimeMillis() +".jpg"; 
```

代替

```
String fname = "Image-"+ n +".jpg"; 
```

尝试这个 ：

```
String getCurrentDate() {
        Calendar c = Calendar.getInstance();
        String Month = "";
        switch (c.get(Calendar.MONTH)) {
        case 0:
              Month = "Jan";
              break;
        case 1:
              Month = "Feb";
              break;
        case 2:
              Month = "Mar";
              break;
        case 3:
              Month = "Apr";
              break;
        case 4:
              Month = "May";
              break;
        case 5:
              Month = "June";
              break;
        case 6:
              Month = "July";
              break;
        case 7:
              Month = "Aug";
              break;
        case 8:
              Month = "Sep";
              break;
        case 9:
              Month = "Oct";
              break;
        case 10:
              Month = "Nov";
              break;
        case 11:
              Month = "Dec";
              break;
        default:
              break;
        }
        int ampm = c.get(Calendar.AM_PM);
        String amorpm = "";
        if (ampm == 1) {
              amorpm = "PM";
        } else {
              amorpm = "AM";
        }
        String date = c.get(Calendar.DAY_OF_MONTH) + "/" + Month + "/"
                    + c.get(Calendar.YEAR) + " " + c.get(Calendar.HOUR) + ":"
                    + c.get(Calendar.MINUTE) + " " + amorpm;
        // int Day = c.get(Calendar.DAY_OF_MONTH);
        // int month = c.get(Calendar.MONTH);
        return date;
  } 
```

# mysql - SQL 连接从三个表中获取每月总工资

> ID：12347304
> 
> 赞同：0
> 
> 时间：2012-09-10T07:48:01.190
> 
> 标签：mysql, sql

我需要从两个不同的表中获取`empolyees`信息`employees table`，以及他们的总工资。

SQL大致是这样的，但我真的不知道如何使用连接来做到这一点：

*   `CONCAT(first_name, ' ', last_name) from employees as e`
*   `Sum(hours*pay) where date is "THIS MONTH" and employee_id = e.id from taxed_work`
*   `Sum(hours*pay) where date is "THIS MONTH" and employee_id = e.id from nontaxed_work`

我不确定如何正确地将这些连接在一起。我不想看到本月没有完成任何一种工作的员工，只希望看到那些已经完成的员工。我正在使用 mysql 并将数据放在一个带有 php 的表中

如果有人能告诉我如何做“本月”部分，那也很酷。只是在那方面很懒惰，但在我在这里的时候想...

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:52:48.897

您可以使用相关的子查询：

```
select  concat(first_name, ' ', last_name)
,       (
        select  sum(hours*pay)
        from    taxed_work tw
        where   tw.employee_id = e.id
                and year(tw.date) = year(now())
                and month(tw.date) = month(now())
        )
,       (
        select  sum(hours*pay)
        from    nontaxed_work ntw
        where   ntw.employee_id = e.id
                and year(ntw.date) = year(now())
                and month(ntw.date) = month(now())
        )
from    employees e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:53:36.137

您可以在子查询中计算它们的总数。

```
SELECT  a.id ,
        CONCAT(first_name, ' ', last_name) FullName,
        b.totalTax,
        c.totalNonTax,
FROM    employees a
        LEFT JOIN 
        (
            SELECT employee_id, Sum(hours*pay) totalTax
            FROM taxed_work
            WHERE DATE_FORMAT(`date`,'%c') = DATE_FORMAT(GETDATE(),'%c')
            GROUP BY employee_id
        )  b ON b.employee_id = a.id
        LEFT JOIN 
        (
            SELECT employee_id, Sum(hours*pay) totalTax
            FROM nontaxed_work
            WHERE DATE_FORMAT(`date`,'%c') = DATE_FORMAT(GETDATE(),'%c')
            GROUP BY employee_id
        ) c ON c.employee_id = a.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:01:14.467

试试这个查询。

```
select 
    CONCAT(first_name, ' ', last_name) as employee_name,
    sum(case when t.this_date = 'this_month' then t.hours*t.pay else 0 end), 
    sum(case when n.this_date = 'this_month' then t.hours*t.pay else 0 end) 
from employees e 
    left join taxed_work t on e.id = t.employee_id
    left join nontaxed_work n on e.id = n.employee_id
group by (first_name, ' ', last_name) 
```

请用实际的字段名称替换 t.this_date 和 n.this_date 字段，因为我不知道确切的表结构。此外，根据您的需要替换“this_month”值。

# ruby - Ruby 线程：rb_thread_blocking_region()？

> ID：12347306
> 
> 赞同：1
> 
> 时间：2012-09-10T07:48:14.373
> 
> 标签：ruby

我正在使用带有线程的 Ruby + GTK。

我有一个关于 Ruby 线程的问题

有什么方法可以运行不阻塞 UI 的长时间运行的线程。我搜索了很多，我所有的搜索都以这个函数**rb_thread_blocking_region结束**

但是没有关于 "rb_thread_blocking_region" 的明确文档。

我怎样才能在 RUBY 中实现真正的线程......

提前致谢。

# android - android无法在内置播放器中播放视频

> ID：12347314
> 
> 赞同：0
> 
> 时间：2012-09-10T07:48:54.380
> 
> 标签：android, video

我有来自 url 的视频 .. 我不能播放这个视频。

> 文件格式：MP4 mp4 持续时间：00:13:33 00:13:33 比特率：1036K 1127K 文件大小：100.50 MB 105.59 MB
> 
> ```
> Video Stream#1
> 
> Video Codec:
> h264
> h264
> Video Bitrate:
> 935K
> 935K
> Video Size:
> 700x394
> 700x396
> Aspect Ratio:
> 1.78:1
> 1.77:1
> Frame Rate:
> 30.00fps
> 30.00fps
> Audio Stream#1
> 
> Audio Codec:
> mpeg4aac
> mpeg4aac
> Audio Bitrate:
> 95K
> 192K
> Channels:
> 1
> 2
> Sample Rate:
> 44100
> 44100 
> ```

当我用相同的规格转换它时，它就会开始播放视频，知道有什么问题。 ![图片显示个人资料](../Images/84082b7bb8c8f20c6d39324eb343113b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:05:18.930

最有可能的是，问题在于源具有超出基线配置文件的内容（请参阅[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)）

# ios - 从 ios 应用程序登录和管理会话到 symfony2 Web 应用程序

> ID：12347319
> 
> 赞同：3
> 
> 时间：2012-09-10T07:49:15.993
> 
> 标签：ios, session, symfony, fosuserbundle

我已经使用 Symfony2 开发了一个 Web 应用程序。我使用**FOSUserBundle**进行用户管理和安全性。

现在我正在考虑为我的 Web 开发一个原生 iOS APP，但我真的不知道如何解决从 APP 创建会话并在整个交互用户 APP 中对其进行管理的问题。

换句话说，我想确保当我执行 a 时`NSURLRequest`，会以某种方式发送会话令牌以允许服务器关联同一会话中的所有请求。

在 PHP 端创建会话时有什么特别的事情要做吗？处理来自iOS APP的请求时有什么特别的事情要做吗？

您能否提及一些好的文章来学习如何获得这种方法？我想从一开始就做好。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:41:56.947

最好依靠无状态身份验证。

在服务器端，看看实现 OAuth2 的服务器端的[FOSOAuthServerBundle](https://github.com/FriendsOfSymfony/FOSOAuthServerBundle)。该过程是从用户凭据向 api 请求 access_token，然后在每个请求上传递 access_token。

在 iOS 端，我建议使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)发出 HTTP 请求，使用[AFOAuth2Client](https://github.com/AFNetworking/AFOAuth2Client)请求 access_token。

# java - Swing：GlassPane 防止鼠标指针改变

> ID：12347320
> 
> 赞同：5
> 
> 时间：2012-09-10T07:49:17.430
> 
> 标签：java, swing, pointers, mouse, glasspane

我有一个带有一些标签的 JTabbedPane，标签旁边还有很多未使用的额外空间。所以我正在尝试使用它并在那里放置一些按钮（比如在 Eclipse 中）。我将按钮放在 GlassPane 上：

```
 JPanel glasspane = getPanelWithButtons();
        // panel with FlowLayout.RIGHT
        frame.setGlassPane(glasspane);
        glasspane.setOpaque(false);
        glasspane.setVisible(true); 
```

这行得通，我仍然可以点击我的 gui 的其他元素（我发现的大多数搜索结果都是关于如何*防止*这种情况的）。到目前为止，唯一的问题是当鼠标指针悬停在 JSplitPane 的栏上时，鼠标指针不会变为双端水平箭头。我怎样才能恢复这种行为？

编辑

我发现没有显示来自玻璃窗格下*任何组件的鼠标更改事件。*这些组件会将鼠标光标更改为手形光标、变焦镜头等。这些鼠标指针更改都不再起作用。我想这是因为使用玻璃窗格，需要对玻璃窗格进行鼠标指针更改，但我不想手动更改所有鼠标指针。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T01:20:48.190

好。我知道该怎么做。

虽然我花了 5 个多小时来了解背后的所有东西，但解决方案非常简单。

只需覆盖玻璃面板的 'public boolean contains(int x, int y)' 方法。

```
public static void main(String[] args)
{
    final JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setSize(800, 600);

    final JSplitPane panel = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, new JPanel(), new JPanel());

    frame.getContentPane().add(panel, BorderLayout.CENTER);

    final JPanel glassPane = new JPanel(){
        @Override
        public boolean contains(int x, int y)
        {
            Component[] components = getComponents();
            for(int i = 0; i < components.length; i++)
            {
                Component component = components[i];
                Point containerPoint = SwingUtilities.convertPoint(
                    this,
                    x, y,
                    component);
                if(component.contains(containerPoint))
                {
                    return true;
                }
            }
            return false;
        }
    };
    glassPane.setOpaque(false);
    JButton button = new JButton("haha");
    button.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            System.out.println("haha");
        }
    });
    glassPane.add(button);
    glassPane.setBorder(BorderFactory.createLineBorder(Color.red));
    frame.setGlassPane(glassPane);

    //try to comment out this line to see the difference.
    glassPane.setVisible(true);

    frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:05:45.523

好。我找到了“在选项卡旁边放置按钮”问题的解决方案。我不再使用玻璃窗格，而是直接放置按钮：

```
buttonpanel.setBounds(...);
frame.getLayeredPane().add(buttonpanel, 1); 
```

这有效并解决了我的问题。不过，它有点复杂，涉及手动布局和监听帧调整大小事件。

由于我仍然想知道如何使用玻璃窗格来完成此操作，因此我不接受此答案。也许有人想出了一个玻璃板的解决方案。

# java - 为什么设置进度条的值时会出现 NPE？

> ID：12347324
> 
> 赞同：0
> 
> 时间：2012-09-10T07:49:40.977
> 
> 标签：java, download, nullpointerexception

我有一个程序现在调用另一个类来处理下载。这是获取下载百分比并设置进度条值和标签的主要代码。

```
byte data[] = new byte[1024];
        int count;
        while ((count = in.read(data, 0, 1024)) != -1)
        {
            downloaded += count;
            downloadedPerc = (downloaded/getModPackSize())*100;
            System.out.println(downloadedPerc);
            progressBar.setValue(downloadedPerc);
            label.setText(downloadedPerc + "%");
            fout.write(data, 0, count);
        } 
```

我在progressBar.setValue(downloadedPerc+1); 上得到一个NullPointerException；线，我不知道为什么，为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:51:10.477

我认为这`progressBar`是`null`因为此时尚未设置，或者您设置的值被局部变量隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:51:55.997

听起来`progressBar`变量是`null`，请确保您在代码的前面为该变量分配了一个值。您可以通过进行一些调试来验证这是否是问题所在。

# c# - 使用推特 API 进行开发

> ID：12347327
> 
> 赞同：1
> 
> 时间：2012-09-10T07:50:15.720
> 
> 标签：c#, twitter

我对 C# 很陌生，我希望通过一些项目来提高我的技能。我想使用 twitter api（搜索）创建一个小项目，但我想知道步骤是什么，我是否导入了我希望使用的类？我只想了解我如何使用 API。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:00:45.663

我建议您使用来自[NuGet的](http://nuget.org/packages/linqtotwitter)[LinqToTwitter](http://linqtotwitter.codeplex.com/)。

[AppHarbor](https://appharbor.com/)（一家云托管公司）在 youtube 上有一个带有 Twitter 和 RavenDB 的**小型 Twitter 项目**，您可以轻松跟进...

> [http://www.youtube.com/watch?v=gmP5wG3_cxk](http://www.youtube.com/watch?v=gmP5wG3_cxk)

而不是将推文保存到数据库中，只需使用`Console.WriteLine()`并获得一些乐趣。

这可以让你从 Twitter 和 C# 开始......

# jquery - 如何在jQuery中触发按键和shift键？

> ID：12347328
> 
> 赞同：0
> 
> 时间：2012-09-10T07:50:19.057
> 
> 标签：jquery, html, keypress

好的，在将其标记为重复之前，请阅读标题。

我知道你可以这样做：

```
var triggerevent = jQuery.Event("keypress");
triggerevent.which = 52; // 4
$("#inputfield").trigger(triggerevent); 
```

但是，例如，如果我想触发按下“$”符号怎么办？如果不事先按 shift，您将无法做到这一点。

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:23:40.470

```
var triggerevent = jQuery.Event("keypress");
triggerevent.which = 36; // $

$("#textarea").on('keypress', function(e) {
    if(!e.hasOwnProperty('originalEvent')) {
        var c = String.fromCharCode(e.which); // $
        this.value = c;
    }
}).trigger(triggerevent); 
```

[jsfiddle](http://jsfiddle.net/rGdUf/9/)

**更新：**以编程方式插入字符，检查是否发生物理按键

**更新 2：**删除了整个 shiftKey 的东西，因为不再重要了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:14:03.313

由于 jQuery 中的事件对象是从原生 DOM 事件派生的，因此您可以使用这些属性来检查按下了哪个组合。

[DOM W3 参考](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-MouseEvent-ctrlKey)（检查属性部分）

# javascript - 客户端图像大小调整。有任何已知问题吗？

> ID：12347330
> 
> 赞同：1
> 
> 时间：2012-09-10T07:50:28.037
> 
> 标签：javascript, image, client-side

我想开始在客户端调整图像大小以避免在我的服务器上遇到任何内存问题。[我在http://www.shift8creative.com/projects/agile-uploader/index.html](http://www.shift8creative.com/projects/agile-uploader/index.html)找到了一个很好的例子

谁能想到在客户端进行大小调整可能会出现任何问题（不包括将文件上传到服务器的危险）？

对我来说，这似乎是一个完美的解决方案，但我想我会先看看是否有人对此事有任何想法。

任何想法表示赞赏。

谢谢，cs1h

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:06:01.827

客户端有几个缺点：

*   您必须支持多种浏览器
*   因此，您没有受控环境，并且可能不支持所有环境
*   由于上述 2 点的结果可能会有所不同（不同的缩放算法）
*   用户可以禁用 JavaScript

但是，**您将节省大量带宽**，这对移动用户尤其有用，这一事实可能会减轻不利因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:00:13.967

没有我知道的问题（浏览器支持除外）。服务器当然不关心您发送给它的数据以及这些数据来自哪里。如果客户端能够处理二进制数据，为什么不呢？

当然，对于无法自行完成或完全禁用 JavaScript 的客户端，您仍然需要将服务器端大小调整功能作为备用解决方案。

而且您仍然需要在服务器上执行所有必要的检查（确保上传的文件是图像并且不超过文件大小和/或尺寸限制），无论任何客户端逻辑如何，这是黄金法则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:55:14.903

好吧，如果用户禁用了 JavaScript，那么您的计划就会失败。更不用说你已经提到的安全漏洞了。

# windows - 用于 Windows 的 git-slave

> ID：12347332
> 
> 赞同：4
> 
> 时间：2012-09-10T07:50:37.543
> 
> 标签：windows, git, git-slave

git-slave 文档只有以下关于在 Windows 上安装的不太有用的评论：

```
* Limited windows support

Multiple users have been successful in using gitslave with Windows.
This is "supported" only in the sense that people have reported it to
work and we accept bugfixes, not that you can `make` install or check,
or that it is QAed on this platform prior to release." 
```

当我尝试下载并运行“nmake install”时，我得到了同样神秘的错误：

```
makefile(2) : fatal error U1001: syntax error : illegal character '{' in macro 
Stop. 
```

有没有人有这方面的经验并且可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T03:00:33.793

git-slave 的 Makefile 仅与 GNU Make 一起使用 - 因为它是一个相当简单的 makefile，没有理由不应该与 Microsoft nmake 一起使用，除了“无偿”使用不受支持的 Make 扩展由微软 nmake。（[gnu make、microsoft nmake 和 posix standard make 的相似/不同之处如何？](https://stackoverflow.com/questions/2278151/how-similar-different-are-gnu-make-microsoft-nmake-and-posix-standard-make)对差异有很好的总结）。

在 gitslave/Makefile 的第 2-4 行，如果将 ${prefix} 替换为 $(prefix) 并将 ${mandir} 替换为 $(mandir) [本质上用括号替换大括号]，nmake 应该不再阻塞 Makefile。但是，除非您安装了一堆 POSIX 实用程序或允许诸如`mkdir -p`、`rm -f`和之类的命令`sed`工作的东西，否则修复 nmake 不兼容性只会（充其量）`make testcheck`工作。

没有一个 gitslave 开发人员可以定期（？）访问 Windows 开发机器，所以就像文档说的那样：“我们接受错误修复，[但]不[声称]您可以`make`安装或检查，或者它在这个平台上被 QAed 。”

我想在 Windows 上使用过 git-slave 的其他人只是确保 Perl 和 gitslave 以及 gitslave 所依赖的任何 POSIX 实用程序（例如 grep 和 rm）都安装在 PATH 中的某个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T17:55:21.693

在 Windows 上，您可以下载并安装免费的 unix 工具包，包括所有必要的程序： [https ://sourceforge.net/projects/unxutils/](https://sourceforge.net/projects/unxutils/)

您还需要一个 perl 工具包，因为在制作过程中使用了“pod2man”。此外，脚本“gits”是一个 perl 脚本，它在 *ix 下运行，因为第一行中的“she-bang”指令（“#!/usr/bin/perl”）——这在 Windows 上不起作用。

我创建了一个小的包装批处理脚本，它使用我的 perl 来启动原始脚本： gits.bat: perl gits %*

希望这可以帮助。

# c++ - 后缀评估算法

> ID：12347335
> 
> 赞同：1
> 
> 时间：2012-09-10T07:50:56.617
> 
> 标签：c++, stack, postfix-notation

这是我对评估后缀评估的尝试

```
#include<iostream>
#include<string>
using namespace std;
template<class T>
class Stack
{
private:
    T *s;int N;
public:
    Stack(int maxn)
    {
        s=new T[maxn];
        N=0;
    }
    int empty()const
    {
    return N==0;
    }
    void push(T k)
    {
        s[N++]=k;
    }
    T pop()
    {
        return s[--N];
    }
    };

int main()
    {
        //postfix evaluation
        char *a="3+4*5";
        int N=strlen(a);
        Stack<int>save(N);
        for(int i=0;i<N;i++)
        {
            if(a[i]=='+')
                save.push(save.pop()+save.pop());
            if(a[i]=='*')
                save.push(save.pop()*save.pop());
            if((a[i]>='0' &&  a[i]<='9'))
                save.push(0);
            while((a[i]>='0' && a[i]<='9'))
                save.push(10*save.pop()+(a[i++]-'0'));
                    }
        cout<<save.pop()<<"  "<<endl;
    return 0;
} 
```

但不是答案 23 因为 4*5+3=23，它给了我答案 5，据我了解，这段代码给了我这个结果，因为，首先它检查 i=0 是否有 + 标记，然后它检查它是否是*，这也不是，所以它首先压入0，然后它评估10*0+'3'-'0'，等于3，（它将被压入堆栈），对于i=1,a[i] 等于 3，所以它打印 3+，第二个 pop 未定义，所以我认为是错误，请帮我修复它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:20:58.580

这适用于一些修复：

```
#include <iostream>
#include <cstring>

using namespace std;

template<class T>
class Stack
{
private:
    T *s;
    int N;

public:
    Stack(int maxn)
    {
        s = new T[maxn];
        N = 0;
    }
    int empty()const
    {
        return N == 0;
    }
    void push(T k)
    {
        s[N++] = k;
    }
    T pop()
    {
        return s[--N];
    }
};

int main()
{
    //postfix evaluation
    const char *a = "3 4 5*+";
    int N = strlen(a);

    Stack<int>save(N);

    for (int i = 0; i < N; i++)
    {
        if (a[i]=='+')
            save.push(save.pop() + save.pop());

        if (a[i]=='*')
            save.push(save.pop() * save.pop());

        if (a[i] >= '0' && a[i] <= '9')
        {
            save.push(0);
            while (a[i] >= '0' && a[i] <= '9')
                save.push(10 * save.pop() + a[i++] - '0');
            i--;
        }
    }

    cout << save.pop() << "  " << endl;

    return 0;
} 
```

输出（[ideone](http://ideone.com/5osxt)）：

```
23 
```

现在，如果您删除`i--;`我添加的内容，代码将跳过字符，`a[]`因为`i`, in`a[i++]`和`for (int i = 0; i < N; i++)`.

没有`i--;`输出是（[ideone](http://ideone.com/WWJm0)）：

```
9 
```

# c# - 如何在 Windows 应用程序中实现后退按钮功能？

> ID：12347336
> 
> 赞同：-2
> 
> 时间：2012-09-10T07:50:57.197
> 
> 标签：c#, .net, windows

我的用户控制页面中有几个按钮，假设我有带有后退按钮的 btn A、B、C、D、E，用户单击按钮 A，然后用户单击 B，然后用户单击后退按钮，然后页面应该导航到按钮 A. 我怎样才能做到这一点？

基本上我不想浏览器喜欢我的 Windows 应用程序中的返回功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:59:26.587

你可以这样解决它：

您必须使每个`Click`处理程序成为一个独特的方法（没有 lambdas），它在结束之前将自己置于`Tag`“返回”按钮的内部。然后你可以`Invoke`根据需要。

伪编码示例（只是一个概念验证！）

```
void ButtonA_Click(object sender, EventArgs e) 
{
    // Action A
    BackButton.Tag = ButtonAClicked;
}

void ButtonB_Click(object sender, EventArgs e) 
{
    // Action B
    BackButton.Tag = ButtonBClicked;
}

void BackButton_Click(object sender, EventArgs e)
{
    if (((Button)sender).Tag !=null
        this.Invoke(ButtonB.Tag);
} 
```

您实际上不必使用`.Tag`，您也可以将其存储在`delegate`对象中（以增加解耦）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:03:08.543

如果您有 MDI 表单，您可以实现以下方法...

```
Private Sub cmdBack_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdBack.Click
        Try
            Dim PrevForm As Form = Nothing
            For Each ChildForm As Form In Me.MdiChildren
                If ChildForm.Equals(Me.ActiveMdiChild) Then
                    If Not IsNothing(PrevForm) Then
                        Me.ActivateMdiChild(PrevForm)
                        PrevForm.Focus()
                        Exit For
                    End If
                End If
                PrevForm = ChildForm
            Next
            PrevForm = Nothing
        Catch ex As Exception

        End Try
    End Sub 
```

和

```
Private Sub cmdForward_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdForward.Click
    Try
        Dim NextForm As Form = Nothing
        For Each ChildForm As Form In Me.MdiChildren.Reverse
            If ChildForm.Equals(Me.ActiveMdiChild) Then
                If Not IsNothing(NextForm) Then
                    Me.ActivateMdiChild(NextForm)
                    NextForm.Focus()
                    Exit For
                End If
            End If
            NextForm = ChildForm
        Next
        NextForm = Nothing
    Catch ex As Exception

    End Try
End Sub 
```

做同样的事情......这将允许您按照 MDI 子表单层次结构执行您想要的操作。

# android - 广播接收器未通过服务接收 Intent

> ID：12347341
> 
> 赞同：2
> 
> 时间：2012-09-10T07:51:19.120
> 
> 标签：android, android-intent, broadcastreceiver

我正在尝试实现一个广播接收器，它应该从后台运行的服务接收 Intent，但是它不起作用。

在我的主要活动中，我只是绑定服务并通过`onClick`按钮启动它。

在我的`SpeechRecognizer`服务类中，我创建了一个新的`BroadcastReceiver`（参见下面的代码）。

```
public void onCreate() {
    Log.d(TAG, "onCreate");             

    if (SpeechRecognizer.isRecognitionAvailable(this)){                         //check if a SpeechRecognizer is available
        this.sr = SpeechRecognizer.createSpeechRecognizer(this);       
        this.sr.setRecognitionListener(new listener());  

        commandsReceiver = new CommandsReceiver();
        ConnectivityManager cm =(ConnectivityManager) 
        getSystemService(Context.CONNECTIVITY_SERVICE);

        testfilter = new IntentFilter();
        registerReceiver(commandsReceiver,testfilter);

    } else {
        Toast.makeText(this,"Please install a SpeechRecognizer on your system.", Toast.LENGTH_LONG).show();  //alert if speech-recognizer is not installed on the device
        Log.d(TAG, "no SpeechRecognizer available");
        this.onDestroy();
    }   
} 
```

在我的`onResult`我这样做：

```
Intent intent = new Intent();
intent.setAction(CommandsReceiver.TEST);
sendBroadcast(intent); 
```

在我的中`CommandsReceiver`，我收到了一条简单`String`的日志消息：

```
public class CommandsReceiver extends BroadcastReceiver {
    public static final String TEST = "de.speech.TEST_INTENT";

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("BroadCastReceiver", "Intent received"+intent);
    }
} 
```

但是我没有收到`Log.d()`消息。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:57:12.423

似乎您正在创建一个没有任何操作的 IntentFilter

```
testfilter = new IntentFilter(); 
```

代替，

```
testfilter = new IntentFilter(CommandsReceiver.TEST); 
```

所以，注册您的广播使用，

```
testfilter = new IntentFilter(CommandsReceiver.TEST);
registerReceiver(commandsReceiver,testfilter); 
```

# c# - 如何动态调用一个类并使用它的功能？

> ID：12347343
> 
> 赞同：1
> 
> 时间：2012-09-10T07:51:36.297
> 
> 标签：c#, class, function, reflection, call

我在尝试动态调用我的类时遇到问题。这是我的示例代码：

班级：

```
namespace TestUseCase
{
    public class UseCase11
    {
        public UseCase11()
        {
        }

        public string init()
        {
            return "aa.aspx";
        }
    }
} 
```

调用类的方法：

```
private void dynamicExecution(string ClassName, string FunctionName)
{
    System.Reflection.Assembly assembly = System.Reflection.Assembly.GetEntryAssembly();
    Object[] para = new Object[1];
    para[0] = null;
    object dynMyClass = assembly.CreateInstance(ClassName);
    dynMyClass.GetType().GetMethod(FunctionName).Invoke(dynMyClass, para);
} 
```

用法：

```
 dynamicExecution("TestUseCase.UseCase11", "init"); 
```

不幸的是，结果总是`null`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:57:33.000

确保您尝试实例化的类在正确的程序集中声明。在您的示例中，您使用`Assembly.GetEntryAssembly()`的是正确的程序集吗？如果该类与您显示的代码在同一程序集中定义，您也可以使用`Assembly.GetExecutingAssembly()`.

# javascript - 为什么jQuery文件在其函数中有两个参数但只接收一个参数

> ID：12347345
> 
> 赞同：3
> 
> 时间：2012-09-10T07:51:41.007
> 
> 标签：javascript, jquery

> **可能重复：**
> [此 JavaScript/JQuery 语法如何工作：(function(window, undefined) {})(window)？](https://stackoverflow.com/questions/2716069/how-does-this-javascript-jquery-syntax-work-function-window-undefined)

我正在尝试了解 js 作用域和匿名函数。我试图阅读 jQuery.js 文件，它看起来像这样：

```
(function( window, undefined ) {

...

}(window)); 
```

为什么在执行`undefined`时没有参数传递给它的函数 params 中有它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T07:54:01.770

使用此方法是为了确保之前没有人`undefined`用类似的东西重新定义过值

```
var undefined = true; 
```

或者在 jQuery 范围函数之外进行其他棘手/邪恶的分配。因此，在该函数内部，进行的每个比较都是`undefined`安全的。

# memcached - mybatis memcached 缓存故障转移

> ID：12347347
> 
> 赞同：1
> 
> 时间：2012-09-10T07:51:52.703
> 
> 标签：memcached, mybatis, cache-failover

我们正在考虑将`memcached`其用作`mybatis`（MyBatis-Memcached 集成模块）的分布式缓存。

有谁知道如何配置它以使`memcached`服务器不是单点故障？目前，如果我配置多`memcached`台服务器，缓存请求会散列到服务器，但每台服务器都是单点故障（即，如果一个服务器出现故障，应用程序将失败）。

我们希望如果其中一`memcached`台服务器出现故障，`mybatis`客户端将此缓存视为丢失，继续工作并在另一台可用`memcached`服务器上建立缓存备份。

有人有这方面的经验吗？

# json - 在elasticsearch中将文件转换为base64以获取附件

> ID：12347349
> 
> 赞同：1
> 
> 时间：2012-09-10T07:52:03.437
> 
> 标签：json, bash, base64, elasticsearch

实际上，我想将文件更改为 base64 并附加我的弹性搜索 JSON 数据。
我的代码如下：

```
 curl -XDELETE "http://localhost:9200/test"

    curl -XPUT "http://localhost:9200/test/?pretty=1" -d '
    {
        "mapping" : {
            "xmlfile" : {
                "properties" : {
                    "attachment": { "type" : "attachment" }
                }
            }
        }
    }'

    curl -XPOST "http://localhost:9200/test/xmlfile?pretty=1" -d '
    {
        "attachment" : '`base64 /path/filename | perl -pe 's/\n/\\n/g'`'
    }'

    curl -XGET "http://localhost:9200/test/xmlfile/_search?pretty=1" -d '
    {
        "query" : {
            "text" : {
                "file" : "any text will come here"
            }
        }
    }' 
```

当我执行此查询时，特别是在发布数据时，我收到此错误：

> “错误”：“MapperParsingException [无法解析]；嵌套：JsonParseException [意外字符（'P'（代码 80））：预期有效值（数字、字符串、数组、对象、'true'、'false' 或 ' null')\n 在 [Source: [B@4daa8b42; line: 3, column: 17]]; ","status" : 400

这种问题有什么解决办法吗？我正在尝试在附加文件时将数据更改为 base64。
**帮助？？**

甚至，当我给出双引号并执行时：

```
 curl -XPOST "http://localhost:9200/test/xmlfile?pretty=1" -d '
    {
        "attachment" : "'`base64 /path/filename | perl -pe 's/\n/\\n/g'`'"
    }' 

```

我得到这个错误

> {“错误”：“MapperParsingException [无法解析]；嵌套：JsonParseException [在 [来源：[B@39c931fb；行：2，列：195]] 的 VALUE_STRING\n 中出现意外的输入结束；“，”状态“：400}

**我在这里有什么遗漏吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:54:48.490

```
"attachment" : '`base64 /path/filename | perl -pe 's/\n/\\n/g'`' 
```

`base64`周围的引号是为外壳*取消*引用它，然后用反引号引用来执行命令。JSON 需要另一个双引号。

```
"attachment" : "'`base64 /path/filename | perl -pe 's/\n/\\n/g'`'" 
```

# joomla - 我们如何为编辑器设置行（行）和列（列）？

> ID：12347351
> 
> 赞同：0
> 
> 时间：2012-09-10T07:52:05.837
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla1.7, joomla1.6

我们如何为xml 表单值设置 rows( `rows`) 和 columns( `cols`) 。`Tiny MCE editor`

```
<field name="description"
    type="editor"
    label="COM_USERS_DESCRIPTION_LBL"
    description="COM_USERS_DESCRIPTION_DESC"
    class="inputbox"
    filter="JComponentHelper::filterText"
    buttons="true"  
/> 
```

如果我们将编辑器更改为该`toogle editor`区域，则它看起来更大。所以我们必须在不使用 css 样式的情况下修复编辑器的列和行大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:36:15.363

您可以`Width`在 joomla 中使用编辑器。[点击这里](http://docs.joomla.org/Editor_form_field_type)了解更多......

[又见](http://docs.joomla.org/Standard_form_field_types)这个....

# ruby - 用 rails 2.3.2 安装 ruby -1.8.4 给我错误

> ID：12347354
> 
> 赞同：2
> 
> 时间：2012-09-10T07:52:22.677
> 
> 标签：ruby, rubygems

我有一个 ruby​​ on rails 应用程序，该应用程序的要求如下。

1.  ruby 版本必须是 ruby​​-1.8.4
2.  导轨 2.3.2

我安装了没有 rvm 的 ruby​​-1.8.4，并安装了 ruby​​gems 版本“gem -v”（1.3.1）。

但问题是当我尝试运行命令时

> sudo gem install rails -v=2.3.2

它给了我这样的错误

错误：安装 rails 时出错：rake 需要 Ruby 版本 >= 1.8.6

请建议我如何使用 ruby​​ 版本 1.8.4 安装 rails 2.3.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:17:38.940

请注意，运行这样一个古老版本的 ruby​​/rails 具有安全性和其他含义。Ruby 1.8.4 是 7 岁，Rails 2.3.2 是 3 岁半。

但无论如何，在尝试安装 rails 之前，您需要专门安装旧版本的 rake；否则 gem 只会尝试安装最新版本的 rake。

```
gem install rake -v=0.8.7
gem install rails -v=2.3.2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T08:04:52.013

问题不在`rails`，它在`rake`gem 中。将 gem降级`rake`到早期版本 - rails 2.3.2 需要的最低版本。

# powershell - 如何启用“Get-VM”Cmdlet？

> ID：12347357
> 
> 赞同：0
> 
> 时间：2012-09-10T07:52:34.687
> 
> 标签：powershell, cmdlet

是`Get-VM`本机 PowerShell cmdlet？我`Get-Command`在 PS 中使用过，但找不到 cmdlet `Get-VM`。

此 cmdlet 是否特定于 VMware？我是否缺少一些 PowerShell 命令来获取这些隐藏的 cmdlet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:33:49.117

1.  不可以。在 Windows Server 2008 R2 上，您可以使用[http://pshyperv.codeplex.com](http://pshyperv.codeplex.com)使用 PowerShell cmdlet 管理 Hyper-V。在 Windows Server 2012 上，当您启用 Hyper-V 角色或在 Windows 8 上，当您安装远程服务器管理工​​具（适用于 Windows Server 2012 的 RSAT）时，您会从 Microsoft 获得 Hyper-V PowerShell cmdlet。Get-VM 就是其中的一部分。

2.  Get-VM 作为 ESX 管理的 PowerCLI 安装的一部分提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T02:25:14.620

如果您安装了 VMware PowerCLI，则可以加载模块/snapin：

```
Add-PSSnapin vmware.vimautomation.core 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-13T14:08:51.190

如果您的机器上有互联网连接，那么您可以在需要时从在线安装模块。

即对于 Powercli，这是 Get-VM 的来源，说明在这里 [https://blogs.vmware.com/PowerCLI/2017/04/powercli-install-process-powershell-gallery.html](https://blogs.vmware.com/PowerCLI/2017/04/powercli-install-process-powershell-gallery.html)

```
Find-Module -Name VMware.PowerCLI
Install-Module -Name VMware.PowerCLI 
```

完成后，使用 允许访问命令：

```
Import-Module VMware.PowerCLI 
```

关于 SQL：

[https://docs.microsoft.com/en-us/sql/database-engine/install-windows/install-sql-server-powershell](https://docs.microsoft.com/en-us/sql/database-engine/install-windows/install-sql-server-powershell)

SQL Server 安装程序自动配置 PowerShell 组件。

如果您不在服务器上，那么

```
Install-Module -Name SqlServer 
```

并重复与PowerCli相同的步骤，您可以通过使用附加属性选择特定版本的sql：-Version 21.0.17178

# c# - 如何在不使用 Page.Theme 属性的情况下设置我的页面样式和主题？

> ID：12347358
> 
> 赞同：0
> 
> 时间：2012-09-10T07:52:36.087
> 
> 标签：c#, javascript, styles, themes, stylesheet

我的页面是使用两个样式表设计的，form.css 和styles.css，我想根据域名动态设置它们的路径。

这是我为动态更改它们而编写的代码。它可以工作，但是在切换到新主题之前会出现闪烁，如何在不使用该`Page.Theme`属性的情况下设置页面样式和主题？

**在客户端**

```
$(document).ready(function () {
    function preloadFunc() {
        var foldername = '<%= theme%>';
        $('#lnkCssForm').attr('href', 'css/' + foldername + '/form.css');
        $('#lnkCssStyles').attr('href', 'css/' + foldername + '/styles.css');
    }
    window.onpaint = preloadFunc();
}); 
```

**在服务器端**（在页面预初始化）

```
theme = Session["domainTheme"].ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:50:03.210

你为什么要为此使用javascript（以及on-dom-ready）？难怪这会导致“闪烁”。为什么不直接从模板/部分/输出带有样式的头部的任何东西输出路径？

```
<head>
   <link rel="stylesheet" type="text/css" href="css/<%= theme %>/form.css" media="all">
   <link rel="stylesheet" type="text/css" href="css/<%= theme %>/styles.css" media="all">
</head> 
```

您不想为此使用的原因是什么`Page.Theme`？这正是它的意义所在……

# mysql - My SQL Full Text 逐个字符搜索

> ID：12347359
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:52:41.983
> 
> 标签：mysql, sql, search, select, character

我有桌子

```
CREATE TABLE `articles` 
(
  `id` int(11) NOT NULL default '0',
  `title` varchar(65) default NULL,
  `topic` varchar(25) NOT NULL default '',
  `author` varchar(25) NOT NULL default '',
  `ondate` datetime NOT NULL default '0000-00-00 00:00:00',
  `body` text NOT NULL,
); 
```

我使用以下查询在其上添加索引：

```
ALTER TABLE articles ADD FULLTEXT(title,body); 
```

当我选择如下查询时，如果标题包含“cvs”、“cvsssh”、“cvsrepository”之类的词，我想要结果

```
SELECT id,title FROM articles WHERE MATCH (title) AGAINST('cvs'); 
```

但它只返回与 cvs 相关的一行。它正在做单词匹配我想要字符匹配

请帮助我...在此先感谢。

问候印度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:00:14.730

您是否尝试过使用 like 运算符？

例如：

```
SELECT id,title 
FROM articles 
WHERE title like '%cvs%'; 
```

[http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:15:11.563

应该是这样的：-

```
SELECT id,title FROM articles WHERE title like 'cvs%'; 
```

这将为您提供从 csv.. 字符开始的输出。

如果你使用**'%cvs%'** 那么它会给你包含 cvs 的输出

# mysql - SELECT DISTINCT 不起作用

> ID：12347363
> 
> 赞同：15
> 
> 时间：2012-09-10T07:52:48.493
> 
> 标签：mysql, sql, distinct

为什么此查询会产生“重复条目”错误？

```
TRUNCATE parim_firm_tag_names;
INSERT INTO parim_firm_tag_names (firm_tag_name_value) 
    SELECT DISTINCT sona 
    FROM parim_marksona; 
```

错误信息：

> SQL 错误 (1062): 重复条目 '1-??????? ??????' 对于键“firm_tag_name_value”

如您所见，`firm_tag_name_value`有一个唯一索引，我使用`DISTINCT`select 并截断所有现有数据`tag_names`。

什么会产生这个错误？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T07:56:29.257

这可能是因为`collations`两个表上定义的不同，`parim_firm_tag_names`并且 `parim_marksona`使用 distinct 的字符串比较可能会导致区分大小写和不区分大小写的`collation`值不同。

您可以`collation`使用此查询检查列：

```
SHOW FULL COLUMNS FROM parim_marksona;
SHOW FULL COLUMNS FROM parim_firm_tag_names; 
```

为避免此错误，您可以使用 将列的排序规则转换为列的`sona`排序规则，同时从 table 中选择不同的值。`firm_tag_name_value``COLLATE``parim_marksona`

假设列的排序规则`firm_tag_name_value`为`latin1_swedish_cs`：

```
TRUNCATE parim_firm_tag_names;

INSERT INTO parim_firm_tag_names (firm_tag_name_value)
    SELECT DISTINCT sona COLLATE latin1_swedish_cs
    FROM parim_marksona; 
```

这应该可以正常工作。

有关更多详细信息，请参阅手册[Column Character Set and Collat​​ion](http://dev.mysql.com/doc/refman/5.5/en/charset-column.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:56:37.790

两个表之间的字符集不同，也许？

# android - 如何构建类似于套件的应用程序

> ID：12347364
> 
> 赞同：1
> 
> 时间：2012-09-10T07:52:55.920
> 
> 标签：android

我想构建一个类似于 MS Office 的应用程序；问题是我已经独立设计了每个应用程序，包括一个包含指向它们的链接的家庭应用程序。我想知道如何设计它，如果我安装家庭应用程序，它应该自动触发其他应用程序的安装；我可以这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:48:07.237

由于我不太确定触发其他应用程序的安装是什么意思，我可以看到这有两种方式。

1.  您的整个应用程序和所有功能都是一次性安装的，并且您希望在启动器中为每个单词、power point 等子应用程序显示一个单独的图标。在这种情况下，将以下内容添加到`<activity>`您要从子应用程序启动的主要活动的标签中：

    ```
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
    ```

2.  您需要一个基本应用程序，安装时会显示图标以启动其他应用程序，如果用户单击图标，则下载并安装它们。在这种情况下，您可以使用 PackageManager 检查您需要的应​​用程序是否已安装，如下所示。如果应用程序未安装，您可以提示用户从应用程序商店（如果您已在应用商店发布）或从您自己的文件服务器下载它，然后使用意图安装它。

> ```
> try {
>     ApplicationInfo info = getPackageManager().getApplicationInfo("your.package.name", 0);
>     //installed
> } catch(NameNotFoundException e) {
>     //Not installed
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:20:49.857

您可能会使用不同的 apk，这是与您的问题相关的链接，并且可能会逐步完成多个 apk 包。

[来自单一源代码的多个 Android 应用程序包 .apk 文件](https://stackoverflow.com/questions/7507784/multiple-android-application-package-apk-files-from-single-source-code)

# eclipse - Eclipse (Juno) 在 JSF EL Expression Auto Complete 上挂起

> ID：12347370
> 
> 赞同：3
> 
> 时间：2012-09-10T07:53:08.770
> 
> 标签：eclipse, jsf, facelets, eclipse-juno, performance

我正在使用 Eclipse Juno 和一个 JSF 2.1 项目。

Facelets 文件中的 EL 表达式的自动完成非常慢。慢到如果我尝试使用 20 种左右的方法自动完成 JSF Bean，Eclipse 编辑器将挂起 10-15 秒，直到我看到成员/属性列表。

我看到它的方式我有 2 个解决方案，我都不知道如何实现，所以任何帮助都会有所帮助。（优先于第一个）

1.  解决慢的问题。我的猜测是当我按下 ctrl-space 时 Eclipse 正在做一堆我不需要的东西，如果可以禁用那些应该让它更快的东西。（有根据的猜测）

2.  完全禁用 El Expressions 的自动完成并安装 JBoss 工具（我必须说，它完美无缺，但是当与本机自动完成支持结合使用时，它仍然挂在每个 ctrl-space 上）。

因此，任何一种解决方案都会有所帮助 - 一起解决缓慢**或**禁用自动完成。

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T07:01:20.523

好吧..因为没有人回答..

我删除了 JSF 方面并安装了 jboss 工具。工作正常，因为我从 eclipse 之外构建我的项目。

有一些注意事项，例如支持某些内容，但总而言之，这是“少有的”解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T11:06:06.450

这对我有用：

*   窗口 -> 显示视图 -> 错误日志
*   如果在为 JRE 查找 javadoc 时出现超时错误，请执行以下操作：
    *   项目属性 > Java 构建路径 > 库
*   remove the JRE, add the JDK (or maybe you can configure the Java-doc for the JRE)

# c++ - std::put_time 格式

> ID：12347371
> 
> 赞同：3
> 
> 时间：2012-09-10T07:53:15.060
> 
> 标签：c++, c++11

我想了解如何工作 std::put_time，以及如何获得“YYYY/MM/DD HH:MM:SS”格式的日期戳。现在我写这样的东西：

```
std::chrono::time_point<std::chrono::system_clock> now = std::chrono::system_clock::now();
        std::time_t now_c = std::chrono::system_clock::to_time_t(now - std::chrono::hours(24));
        std::cout  << std::put_time(std::localtime(&now_c), "%F %T") << '\n'; 
```

输出是 2011-10-25 12:00:08，我怎样才能得到日期为 2011/10/25 12:00:08。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T07:59:45.790

如 1 小时前所述，cppreference 对此有很好的文档：[http :](https://stackoverflow.com/a/12346532/777186) [//en.cppreference.com/w/cpp/io/manip/put_time](http://en.cppreference.com/w/cpp/io/manip/put_time)

具体来说，您可以使用以下格式字符串获取您描述的格式：

```
std::cout  << std::put_time(std::localtime(&now_c), "%Y/%m/%d %T") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:58:51.590

请参阅[此参考](http://en.cppreference.com/w/cpp/io/manip/put_time)。它实际上与旧函数相同，只是[`strftime`](http://en.cppreference.com/w/cpp/chrono/c/strftime)添加了一些额外的格式。

# apache - 如何在 Ubuntu 中设置 Mercurial 服务器以服务 60 个存储库

> ID：12347373
> 
> 赞同：3
> 
> 时间：2012-09-10T07:53:16.623
> 
> 标签：apache, mercurial, mercurial-server

我想拥有大约 60 个项目存储库，并且我想在 mercurial-server 的帮助下从专用的远程服务器（ubuntu）为它们提供服务，以便我的所有开发人员都能够更新他们的更改。为了做到这一点，我已经按照[这篇文章](http://mercurial.selenic.com/wiki/PublishingRepositories)进行了操作，但我无法清楚地理解。我有以下几个问题：

1.  如何安装 mercurial-server？是否所有 repo 都将由“hg user”（其目录位于 server/home/hg）控制，并且在安装 mercurial 服务器（如 mysql）期间是否会自动创建用户？

2.  我需要在我的远程服务器上安装 mercurial 客户端（即 apt-get install mercurial）吗？我知道客户端必须安装`mercurial`以向远程 mercurial 服务器推送/拉取 repo。`mercurial`和之间到底有什么区别`mercurial-server`？

**注意：** 请为我提供一个抽象（但可以理解的）步骤来设置 mercurial 服务器，以便尽可能从我的专用 ubuntu 服务器提供一些项目。

**（即先决条件>安装>设置>推/拉认证>网络界面）。**

# .net - .NET Framework v1 和资源

> ID：12347382
> 
> 赞同：0
> 
> 时间：2012-09-10T07:54:03.143
> 
> 标签：.net, resources

我有一个问题，我需要将原始文件资源添加到 .NET Framework v1.0 应用程序，但我找不到任何有关如何执行此操作的信息（这个老歌甚至可能吗？）。是的，必须适用于 .NET Framework 1.0。还有如何读取这些资源， global::namespace.resources.NameOfTheResource 似乎没有在这个 .NET Framework 中实现。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:05:03.100

你可以使用`ResssourceManager`类。

```
 ResourceManager resourceManager = new ResourceManager ("MyCompany.MyProject.SomeResources", GetType ().Assembly);

    Bitmap image = (Bitmap)resourceManager.GetObject ("MyBitmapName"); 
```

链接： http: [//www.jelovic.com/articles/resources_in_visual_studio.htm](http://www.jelovic.com/articles/resources_in_visual_studio.htm)

# ios - 从 cocos2d-x 中的 ccTouchesBegan 方法内部访问公共变量

> ID：12347385
> 
> 赞同：1
> 
> 时间：2012-09-10T07:54:17.527
> 
> 标签：ios, xcode, cocos2d-x

我在从 ccTouchesBegan 方法访问公共 ivars 时遇到了一些问题，

我有这个场景：

```
class introScene : public cocos2d::CCLayer {
public:
    virtual bool init();
    static cocos2d::CCScene* scene();
    bool autoScroll;

    virtual void ccTouchesBegan(cocos2d::CCSet* touches, cocos2d::CCEvent* event);
    void skip();

    CREATE_FUNC(introScene);
}; 
```

从 .cpp 文件中我尝试访问变量**autoScroll**，但它坚持认为该变量不存在，我在这里做错了什么吗？

```
void ccTouchesBegan(cocos2d::CCSet* touches, cocos2d::CCEvent* event){
        autoScroll = false;

} 
```

这会生成：**使用未声明的标识符“autoScroll”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:23:58.793

我对 cocos2d*一无所知*，但我认为您已经错误地定义了该方法，因为您错过了类名。试试这个：

```
void introScene::ccTouchesBegan(cocos2d::CCSet* touches, cocos2d::CCEvent* event){
    // ^^^^^^^
    autoScroll = false;
} 
```

# android - 如何将多个图像发送到网络服务器

> ID：12347391
> 
> 赞同：0
> 
> 时间：2012-09-10T07:54:39.677
> 
> 标签：android

如何将 sd 卡 android 中的多个图像发送到 Web 服务器？两张或更多张图片？

这是我的代码

```
Bitmap bitmapOrg =BitmapFactory.decodeFile("/sdcard/Plant/pupuk/134681282302.jpg");
ByteArrayOutputStream bao = new ByteArrayOutputStream();
bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
byte[] ba = bao.toByteArray();
String ba1 = Base64.encodeBytes(ba);
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("image", ba1)); 
```

我只找到了选择单个图像的方法。我无法将两个或更多图像发送到 Web 服务器。

感谢您的关注。对不起，我的英语不好。

干杯

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:04:09.793

您可以使用不同的密钥发送..

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("image1", ba1));
nameValuePairs.add(new BasicNameValuePair("image2", ba2));
nameValuePairs.add(new BasicNameValuePair("image3", ba3));
.
. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:13:49.583

这将取决于您的服务器的期望。如果您发布的代码有效，您可以简单地对其进行迭代以发送多个图像

# batch-file - 使用批处理文件监视文件夹的最后修改时间

> ID：12347396
> 
> 赞同：1
> 
> 时间：2012-09-10T07:54:47.803
> 
> 标签：batch-file, alert, monitor, dos, last-modified

我的工作站上有一个文件夹，每分钟都会添加文件。我必须时不时地监视这个文件夹，看看是否有新文件被添加。如果 5 分钟内此文件夹中没有新文件，我们将执行一项操作。

我们是否可以为此目的使用批处理文件，如果在过去 5 分钟内没有添加新文件，则会在窗口屏幕上显示警报/弹出窗口。我也是批处理的新手。请让我知道步骤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:02:06.480

您似乎不太可能使用纯粹的批处理文件来完成您想要做的事情。

但是，您可以在一个相对简单/小型的 VB 脚本中执行此操作，不需要在系统上进行任何额外的安装。

```
'-------------------------------------------------------------
' Monitors a folder for new files and warns if they 
' are not being created within a certain time period.
'-------------------------------------------------------------
Dim intMinutes:      intMinutes = 5            ' minute threshold for warning of no new files
Dim strDrive:        strDrive = "c:"           ' drive to monitor
Dim strPath:         strPath = "\\temp\\"      ' path to monitor. remember to double slashes

Dim intTimer:        intTimer = "2"
Dim strComputer:     strComputer = "."
Dim objWMIService:   Set objWMIService = GetObject( "winmgmts:" &  "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2" )
Dim strQuery:        strQuery = "Select * From __InstanceOperationEvent" & " Within " & intTimer & " Where Targetinstance Isa 'CIM_DataFile'" & " And TargetInstance.Drive='" & strDrive & "'" & " And TargetInstance.Path='" & strPath & "'"
Dim colEvents:       Set colEvents = objWMIService. ExecNotificationQuery (strQuery)
Dim LastNew:         LastNew = Now
WScript.Echo "Monitoring new file creation... Press [Ctrl]-[C] to exit"
Do
    Set objEvent = colEvents.NextEvent()
    Set objTargetInst = objEvent.TargetInstance
    Select Case objEvent.Path_.Class
        Case "__InstanceCreationEvent"
            LastNew = Now
    End Select
    if DateDiff("n",LastNew,Now) >= intMinutes then 
        ' put whatever actions you want in here... the following two lines are for demo purposes only
        msgbox "The last new file was " & DateDiff("n",LastNew,Now) & " minute ago!",0,"No New Files"
        exit do
    end if
Loop 
```

在**WScript**中执行它以使其不可见或在**CScript**中显示控制台窗口。

替换 IF 块内的代码以执行您需要完成的操作（通知您该问题）。

# c - 指向 C 中结构混乱的指针

> ID：12347397
> 
> 赞同：1
> 
> 时间：2012-09-10T07:54:54.730
> 
> 标签：c

我写了一些不想工作的代码，经过深思熟虑，我决定我所有麻烦的原因是一个试图将字符串复制到数组的循环，它是结构的一个组成部分，由传递给函数的指针指向。这不完全是我的代码，但不管是什么使它不起作用也使我的代码不起作用：

```
typedef struct {
        int A[100];
        } thing; 
```

这有点像我正在使用的结构。

然后在 main 函数中：

```
thing *s;
int i;
for (i=0;i<5;i++) {
    s->A[i]=i;
} 
```

所以，这行不通。然而，令我沮丧和困惑的是，这确实：

```
thing *s;
s->A[0]=0;
s->A[1]=1;
s->A[2]=2;
s->A[3]=3;
s->A[4]=4; 
```

关于这一点，我很茫然，并且确实花了很多时间试图为自己找到解决方案。我知道我在这里遗漏了一些东西，我只是希望它不明显

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:57:38.430

那是未定义的行为；该指针后面没有对象——结果可以是任何东西。未定义的行为可能*看起来*有效，也可能以非常神秘的方式失败。

你可以这样处理它：

```
thing th;
thing* s = &th;
...now 's' points to a 'thing' -- specifically, 'th'. 
```

# java - LOG4j - 配置它的方法

> ID：12347398
> 
> 赞同：0
> 
> 时间：2012-09-10T07:54:56.540
> 
> 标签：java, log4j

我想`log4j`在一个巨大的分布式系统中进行配置。有很多 JVM 和进程，而且（因为我只是一名学生）我对这种情况并不陌生。我使用`JMS Appender`，所以我需要两个文件：`log4j.properties`, `jndi.properties`.

我尝试了一些方法：

1.  将这些文件放入`src`文件夹
2.  或进入`src/java`
3.  添加 jvm 参数`-Dlog4j.configuration=C:\...\log4j.properties`

我不想在代码中使用 设置它`PropertyConfigurator.configure("path")`，因为我根本不想更改源代码。

还有其他配置方法`log4j`吗？或者，也许我错过了什么？我仍然收到消息

```
No appenders could be found for logger (some.package.SomeClass). 
Please initialize the log4j system properly. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:10:22.380

基本上你有以下方式来配置 Log4J：

1.  通过您的代码
2.  属性文件（当您尝试使用时）
3.  xml文件

您向我询问的内容与 JMS appender 的特定配置有关，而不是关于“如何配置 log4j 的一般方法”

这是如何使用 ActiveMQ 配置它的示例 对于属性文件中的其他 JMS 实现，键可能相同，但值会不同

[示例 - 将 JMS appender 与 ActiveMQ 一起使用](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html)

# javascript - 如何让jquery自动播放？

> ID：12347401
> 
> 赞同：1
> 
> 时间：2012-09-10T07:55:09.023
> 
> 标签：javascript, jquery, slider, autoplay

我对我的幻灯片有疑问，我希望它自动播放，怎么做？？？

我已经将自动播放设置从 false 更改为 true，但仍然不能。

这是我的代码：

```
 <script>
  jQuery(document).ready(function($) {
  $('#full-width-slider').royalSlider({
    arrowsNav: true,
    loop: true,
    keyboardNavEnabled: true,
    controlsInside: false,
    imageScaleMode: 'fill',
    arrowsNavAutoHide: false,
    autoScaleSlider: true, 
    autoScaleSliderWidth: 960,     
    autoScaleSliderHeight: 350,
    controlNavigation: 'bullets',
    thumbsFitInViewport: false,
    navigateByClick: true,
    startSlideId: 0,
    autoPlay: true,
    transitionType:'move',
    globalCaption: true
  });
});

</script> 
```

如果您需要阅读 jquery 文件，这是我的链接

[我的滑块问题链接](http://www.akhinterior.com/new3/projects/office/babystation.html)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:02:33.587

尝试这个，

```
autoPlay: {
   enabled: true,
   delay: 1500
} 
```

根据您的要求更改延迟。

或者只是尝试，

```
autoPlay : {
     enabled : true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:01:49.097

AutoPlay 属性需要对象不是 true\flase 值[，请查看文档](http://dimsemenov.com/plugins/royal-slider/documentation/#autoplay)

试试这个代码：

```
 <script>
  jQuery(document).ready(function($) {
  $('#full-width-slider').royalSlider({
    arrowsNav: true,
    loop: true,
    keyboardNavEnabled: true,
    controlsInside: false,
    imageScaleMode: 'fill',
    arrowsNavAutoHide: false,
    autoScaleSlider: true, 
    autoScaleSliderWidth: 960,     
    autoScaleSliderHeight: 350,
    controlNavigation: 'bullets',
    thumbsFitInViewport: false,
    navigateByClick: true,
    startSlideId: 0,
    autoPlay:  {
            // autoplay options go gere
                enabled: true,
            pauseOnHover: true
               }
  });
}); 
```

编辑：在 " pauseOnHover: true" 之后缺少 "}" 。

# bash - sed 无法处理 ~user/.bash_profile

> ID：12347405
> 
> 赞同：0
> 
> 时间：2012-09-10T07:55:18.897
> 
> 标签：bash, sed, home-directory

如果我这样做，我有一个非常奇怪的问题`sed`：

```
[root@Camel ~]-> sed -i 's/TLRAGENT_IP=.*/TLRAGENT_IP='"${HOST_IP}"'/' ~user/.bash_profile 
```

没关系。但是，如果我尝试以下操作：

```
[root@Camel ~]-> CONF_FILE="~user/.bash_profile"
[root@Camel ~]-> sed -i 's/TLRAGENT_IP=.*/TLRAGENT_IP='"${HOST_IP}"'/' ${CONF_FILE}
sed: can't read ~user/.bash_profile: No such file or directory 
```

还尝试引用变量：

```
[root@Camel ~]-> sed -i 's/TLRAGENT_IP=.*/TLRAGENT_IP='"${HOST_IP}"'/' "${CONF_FILE}"
sed: can't read ~user/.bash_profile: No such file or directory 
```

不知道哪里出错了，请指教。

Shell 的版本是`3.2.25(1)-release`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:00:39.080

从`man bash` `/EXPANSION`

```
EXPANSION
 Expansion is performed on the command line after it has been
 split  into  words.  There are seven kinds of expansion per-
 formed:  brace expansion,  tilde  expansion,  parameter  and
 variable  expansion, command substitution, arithmetic expan-
 sion, word splitting, and pathname expansion.

 The order of expansions is: brace  expansion,  tilde  expan-
 sion,  parameter, variable and arithmetic expansion and com-
 mand substitution (done in a  left-to-right  fashion),  word
 splitting, and pathname expansion. 
```

参数和变量扩展出现在波浪号扩展之后

要进行波浪号扩展，可以在变量定义处完成

```
CONF_FILE=~user/.bash_profile 
```

代替

```
CONF_FILE="~user/.bash_profile" 
```

# iphone - iphone：安全的restfull服务器“此服务器的证书无效

> ID：12347410
> 
> 赞同：8
> 
> 时间：2012-09-10T07:55:30.610
> 
> 标签：iphone, objective-c, ios, nsurlconnection, nsurlconnectiondelegate

我正在尝试使用安全的宁静服务，这会产生错误

**错误=错误域=NSURLErrorDomain代码=-1202“此服务器的证书无效。您可能正在连接到伪装成“xxx.xxx.xxx.xxx”的服务器，这可能会使您的机密信息面临风险。”**

在 xCode 4.2 上工作，哪里有错误或缺少任何步骤。

使用以下代码

注册用户.f

```
@interface RegisterUser : UIViewController<UITextFieldDelegate,
UIScrollViewDelegate, NSURLConnectionDelegate> 
```

注册用户.m

```
- (IBAction)SubmitBtnAction:(id)sender {

    NSURL *url = [NSURL URLWithString:@"https://xx.xx.xx.xxx:8223/jaxrs/tunedoorgateway/getCountries"];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:[[NSOperationQueue alloc] init]
     completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {

         if ([data length] >0 && error == nil)
         {
             NSLog(@"Data = %@", data);
             // DO YOUR WORK HERE

         }
         else if ([data length] == 0 && error == nil)
         {
             NSLog(@"Nothing was downloaded.");
         }
         else if (error != nil){
             NSLog(@"Error = %@", error);
         }

     }];

}

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    NSLog(@"This is canAuthenticateAgainstProtectionSpace");
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
//    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
//        if ([trustedHosts containsObject:challenge.protectionSpace.host])
            [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];

    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
    NSLog(@"This is didReceiveAuthenticationChallenge");
  //  [[challenge sender] cancelAuthenticationChallenge:challenge];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T08:08:23.597

我觉得这可能是因为 DNS，比如你的服务器没有注册。

尝试使用它进行开发：

创建一个`NSURLRequest+NSURLRequestSSLY.h`文件并将这些行添加到其中

```
#import <Foundation/Foundation.h>

@interface NSURLRequest (NSURLRequestSSLY)
+(BOOL)allowsAnyHTTPSCertificateForHost:(NSString*)host;

@end 
```

创建一个`NSURLRequest+NSURLRequestSSLY.m`文件并将这些行添加到其中

```
#import "NSURLRequest+NSURLRequestSSLY.h"

@implementation NSURLRequest (NSURLRequestSSLY)
+(BOOL)allowsAnyHTTPSCertificateForHost:(NSString*)host
{
    return YES;
}

@end 
```

并且不要忘记在发布之前将其删除，因为您的应用可能会被拒绝。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T08:07:09.020

失败不在您的代码中。您正在使用不提供已知证书的**HTTPS服务器。**如果您自己设置了服务器，则必须从 iOS 和大多数其他操作系统信任的大型证书颁发机构之一购买签名证书。

出于开发目的，您可以通过忽略不受信任的证书来测试您的 REST 服务。请按照本指南执行此操作：http: [//www.cocoanetics.com/2009/11/ignoring-certificate-errors-on-nsurlrequest/](http://www.cocoanetics.com/2009/11/ignoring-certificate-errors-on-nsurlrequest/)

但对于生产用途，我建议您不要使用此方法，因为它会给您的应用程序带来安全漏洞。如果您确实忽略了安全性，您也可以只使用 HTTP 而不是 HTTPS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T19:09:27.190

我尝试了几种方法，发现它与苹果开发者中心证书有关。升级您的配置并重试。我曾尝试使用 iPad、iPhone 5 和 5S 但 iPhone 4 发布数据。当我在 iPhone 4 上更新我的配置和安装时，可以解决现在的问题。

# jmeter - 更改 jmeter 使用的分隔符以将结果保存为 CSV

> ID：12347411
> 
> 赞同：0
> 
> 时间：2012-09-10T07:55:39.643
> 
> 标签：jmeter

我有一个 Jmeter 脚本，它会触发一些 HTTP 请求。从请求中，我得到了输出所需的值。
在 jmeter.properties 文件中，我提到如下：

```
# For use with Comma-separated value (CSV) files or other formats
# where the fields' values are separated by specified delimiters
# Default:
#jmeter.save.saveservice.default_delimiter=|
# For TAB, since JMeter 2.3 one can use:
#jmeter.save.save-service.default_delimiter=\t 
```

但这并没有反映在我的输出中。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-23T11:36:16.233

我也有同样的问题。我在 jmeter.properties 文件中添加了以下几行：

```
jmeter.save.saveservice.output_format=csv 
jmeter.save.saveservice.default_delimiter=;
csvread.delimiter=; 
```

现在 Simple Data Writer 使用 ; 保存结果 分隔字段的值。但是当我在聚合报告元素中保存数据时（通过单击“保存表数据”按钮），结果聚合.csv 文件中的值由 ,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:33:50.043

如果你真的做了你在代码摘录中描述的事情，那么你忘记了通过删除相关行之前的 # 来取消注释字段。

此外，您在属性名称中犯了一个错误，它们应该是：

*   jmeter.save.saveservice.default_delimiter=|
*   jmeter.save.saveservice.default_delimiter=\t

如需完整参考，请参阅[jmeter.properties](http://svn.apache.org/repos/asf/jmeter/tags/v2_7/bin/jmeter.properties)。

但我不确定回答你的问题，因为不清楚，你能澄清一下吗？

问候

菲利普·M。

# xml - 概念 XML XLST 前兄弟和祖先

> ID：12347412
> 
> 赞同：29
> 
> 时间：2012-09-10T07:55:51.987
> 
> 标签：xml, xslt, xpath

我对 xslt 很陌生，发现它可以简单也可以复杂。我想澄清一些概念。什么是前兄弟，什么是祖先，从谷歌搜索后，我找到了祖先的解释。他们网站上的图表更容易理解。

但是我还是不明白presing-sibling

```
<product>
    <inventory>
        <drink>
            <lemonade>
                <price>$2.50</price>
                <amount>20</amount>
            </lemonade>
            <pop>
                <price>$1.50</price>
                <amount>10</amount>
            </pop>
        </drink>
          <service>
           <address />
            <phone />
            <delivery> City </delivery>
          </service>      
        <snack>
            <chips>
                <price>$4.50</price>
                <amount>60</amount>
            </chips>
        </snack>
        <hotfood></hotfood>
         <totalprice> $15</totleprice>

    </inventory>
</product> 
```

那么我该如何阅读这个**previous-sibling::pop/ancestor::inventory/totalprice**

祖先::库存/总价格 = 产品\库存\总价格前兄弟::流行 - 我不明白这个然后如何一起阅读？

非常感谢

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-10T08:31:08.400

# 前兄弟:: 轴

`preceding-sibling::`轴是导航轴，包括焦点元素之前的所有同级元素。“同级”是指与引用项具有相同父项的不同元素。“在前”是指出现在参考节点之前的节点。`preceding-sibling`轴的顺序是逆文档顺序。看看这个文件：

```
<fruit>
  <banana>
   <lady-finger-banana/>
  </banana> 
  <apple/>
  <pear/>
  <kiwi/>
</fruit> 
```

如果焦点节点是梨，那么序列`preceding-sibling::*`是...

1.  苹果
2.  香蕉

注：水果、梨、小指香蕉和猕猴桃不按顺序排列。

所以以下是正确的：

*   `preceding-sibling::*[ 1]`是苹果
*   `preceding-sibling::*[ 2]`是香蕉
*   `count( preceding-sibling::*)`是 2
*   `preceding-sibling::apple[ 1]`也是苹果
*   `preceding-sibling::banana[ 1]`是香蕉
*   `preceding-sibling::*[ 3]`不存在或空序列

# previous-sibling::pop/ancestor::inventory/totalprice 示例

我们必须稍微修改您的示例文档才能有用地研究这个示例

```
<product>
    <inventory>
        <drink>
            <lemonade>
                <price>$2.50</price>
                <amount>20</amount>
            </lemonade>
            <pop>
                <price>$1.50</price>
                <amount>10</amount>
            </pop>
            <focus-item />
         </drink>
        <totalprice>$15</totalprice>  
    </inventory>
</product> 
```

让我们说焦点在元素焦点项目上。要评估表达式，请执行`preceding-sibling::pop/ancestor::inventory/totalprice`以下步骤：

1.  `preceding-sibling::pop`选择所有前面的`pop`元素作为焦点项目。这评估为一个节点的序列。
2.  对于左侧序列中的每个项目（仅`pop`发生一个元素），将此项目设置为临时焦点项目，并评估 / 运算符右侧的表达式，即 ...

    ```
    ancestor::inventory 
    ```

    只有一个这样的节点，即祖先库存节点。因此，第一个 / 运算符评估为一个库存节点的序列。

3.  现在我们评估第二个 / 及其右手操作数表达式总价格的影响。对于左侧序列中的每个项目（只有一个库存节点，所以它发生），将其设置为临时焦点项目并评估`totalprice`。

4.  `totalprice`是 的缩写`child::totalprice`。临时焦点节点的子轴上只有一个总价元素，所以最终结果是一个节点的序列，即总价节点。

# 用图表理解

这是一个图表`preceding-sibling::`。其中，参考节点是 Charlie，`preceding-sibling::`轴上的节点是绿色的。它是唯一这样的节点。

![在此处输入图像描述](../Images/514379dcd7a8b468663e39642ad19b0e.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T08:45:45.427

用于在节点树中导航的轴。所以这取决于你的问题什么样的轴是有用的。

以下样式表说明了差异。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="snack">
        <xsl:variable name="siblings" select="ancestor::node()"/>
        <debug>
        <xsl:for-each select="preceding-sibling::node()">
                <sibling>
                        <xsl:value-of select="local-name()"/>
                </sibling>
        </xsl:for-each>
        <xsl:for-each select="ancestor::node()">
                <ancestor>
                        <xsl:value-of select="local-name()"/>
                </ancestor>
        </xsl:for-each>

        </debug>
   </xsl:template>

   <xsl:template match="*">
         <xsl:apply-templates select="*"/>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T08:18:29.210

Preceding-sibling 获取当前节点级别中在它之前的所有元素兄弟。除非您使用 xpath 表达式指定一个或多个前面的同级。如果您使用 xpath 指定特定的前置兄弟，它始终以方括号中的 1 开头。

Ancestor 是匹配表达式的第一个匹配的祖先。因此，它会返回节点树以根据您当前指向的位置查看匹配的表达式。因此，如果您在 product/inventory/drink/pop 或只是 /pop 那么祖先 inventory/totalprice 只是寻找第一次出现，它应该只返回一个指向该匹配案例的指针，否则它将指向任何内容而你' 仍然会指向流行音乐。

# php - 通过资源使用 Zend Router 的动态控制器

> ID：12347416
> 
> 赞同：0
> 
> 时间：2012-09-10T07:56:15.933
> 
> 标签：php, zend-framework, zend-framework-mvc, zend-router

我正在尝试为 http://site.com/index 创建一个克隆（[http://site.com/indexclone](http://site.com/index) [）](http://site.com/indexclone)，但我也希望所有操作都能正常工作，因为它们在 IndexController 和传递的潜在参数中到原始控制器。到目前为止我已经想通了：

```
resources.router.routes.indexclone.route = "indexclone/:action"
resources.router.routes.indexclone.defaults.controller = "index"
resources.router.routes.indexclone.defaults.action = "index" 
```

请帮我找出参数列表的动态方法。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:00:03.350

你可以这样做：

```
resources.router.routes.indexclone.route = "indexclone/:action/*"
resources.router.routes.indexclone.defaults.controller = "index"
resources.router.routes.indexclone.defaults.action = "index" 
```

但如果不能解决您的问题，您可以使用引导程序创建动态路由器。

# python - Django 模型中的类属性继承

> ID：12347420
> 
> 赞同：2
> 
> 时间：2012-09-10T07:56:24.263
> 
> 标签：python, django, django-models

有两种型号：

```
class BaseImage(models.Model):
    description = models.CharField(max_length=200)
    image = models.ImageField(upload_to='images')

    class Meta:
        abstract = True

class PostImage(BaseImage):
    in_text = models.BooleanField()

    def __init__(self, *args, **kwargs):
        super(BaseImage, self).__init__(*args, **kwargs)
        self.image.upload_to = 'images/news/%Y/%m/%d' 
```

如何在基本模型中设置**upload_to**属性？这是我的尝试不起作用：

```
 self.image.upload_to = 'images/news/%Y/%m/%d' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T09:24:08.227

我可以建议的是编写函数以从实例上传到方法，例如

在模型.py

```
#default method to get file upload path
def get_upload_to(instance, filename):
    return instance.get_upload_to_path(filename)

class BaseImage(models.Model):
    description = models.CharField(max_length=200)
    image = models.ImageField(upload_to=get_upload_to)

    class Meta:
        abstract = True
    #method on the class to provide upload path for files specific to these objects
    def get_upload_to_path(instance, filename):
         return 'images/'+filename

class PostImage(BaseImage):
    in_text = models.BooleanField()

    #method to provide upload path for PostImage objects
    def get_upload_to_path(instance, filename):
    #change date.year etc to appropriate variables
         return 'images/news/%Y/%m/%d' % (date.year, date.month, date.day) 
```

# python - python中的正则表达式不采用td元素中的指定数据

> ID：12347430
> 
> 赞同：0
> 
> 时间：2012-09-10T07:57:19.287
> 
> 标签：python, html, regex

我在 python 中使用正则表达式从这一行的 HTML 中获取以下数据：

```
<td xyz="123"><a href="blah.html">This is a line</a></td> 
```

问题是在上面的 td 行中，`xyz="123"`and`<a href>`是可选的，所以它不会出现在所有的表格单元格中。所以我可以有这样的 tds：

```
<tr><td>New line</td></tr>
<tr><td xyz="123"><a href="blah.html">CaptureThis</a></td></tr> 
```

我这样写正则表达式：

```
<tr><td x?y?z?=?"?(\d\d\d)?"?>?<?a?.*?>?(.*?)?<?/?a?>?</td></tr> 
```

我基本上想从每个 tr 中的所有 td 中捕获“123”数据（如果存在）和“CaptureThis”数据。

此正则表达式不起作用，并且正在跳过没有“xyz”数据的​​行。

我知道在这里使用正则表达式不是合适的解决方案，但想知道是否可以单独使用正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:59:42.623

您正在使用正则表达式，并且将 XML 与此类表达式匹配变得太复杂、太快。

改用 HTML 解析器，Python 有几个可供选择：

*   [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)是标准库的一部分
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)是一个流行的第三方库
*   [lxml](http://lxml.de/)是一个快速且功能丰富的基于 C 的库。

元素树示例：

```
from xml.etree import ElementTree

tree = ElementTree.parse('filename.html')
for elem in tree.findall('tr'):
    print ElementTree.tostring(elem) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:46:23.820

你介意两次解析xml文件吗？使用正则表达式解决起来要简单得多，但可能会出现意想不到的问题，因为这不是正确的方法。

'' 匹配 td 单元格中的参数 '>([\w\s]+)<' 匹配“CaptureThis”数据

```
>>> line1
'<tr><td>New line</td></tr>'
>>> line2
'<tr><td xyz="123"><a href="blah.html">CaptureThis</a></td></tr>'  
>>> pattern2 = re.compile(r'>([\w\s]+)<')
>>> pattern2.search(line1).group(1)
'New line'
>>> pattern2.search(line2).group(1)
'CaptureThis'

>>> pattern = re.compile(r'<td\s+\w+="([^"]*)">')
>>> pattern.search(line2).group(1)
'123' 
```

虽然没有完全测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:18:27.750

以下代码在整个字符串中搜索匹配项并列出所有匹配项（即使有多个匹配项）。

```
>>> text = '''<tr><td>New line</td></tr>
<tr><td xyz="123"><a href="blah.html">CaptureThis</a></td></tr>
<tr><td xyz="456">CaptureThisAlso</td></tr>
'''

>>> re.findall(r'<tr><td(?: xyz="(\d+)")?>(?:<a href=".*?">)?(.*?)(?:</a>)?</td></tr>', text)
[('', 'New line'), ('123', 'CaptureThis'), ('456', 'CaptureThisAlso')] 
```

# javascript - 使用 Ajax、jQuery 和 PhoneGap 与 https 服务器（SAP j2ee 服务器）通信

> ID：12347438
> 
> 赞同：1
> 
> 时间：2012-09-10T07:58:00.770
> 
> 标签：javascript, android, jquery, cordova, blackberry

我对 phonegap 平台非常陌生，过去两周我一直在研究以下问题。我正在为 android 开发一个 PhoneGap 项目，它与远程 https 服务器（SAP j2ee 服务器）通信。我对服务器没有任何控制权。服务器仅以安全的方式将数据作为 SOAP 响应提供。

现在我的问题是我无法从我的应用程序向服务器发送请求。当我发送请求时，我收到 HTTP 状态“错误”或没有任何数据的成功消息。

对于 android 和 blackberry，是否有任何替代方法可用于相同的问题？

请通过下面的代码，请帮助我。

```
function soapRequest(){
    $.mobile.showPageLoadingMsg();
    var username=$("#username").val();
    var password=$("#password").val();

    var SOAP_Login='<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:OrSVi"><soapenv:Header/><soapenv:Body><urn:getP><urn:userName>'+username+'</urn:userName></urn:getP></soapenv:Body></soapenv:Envelope>';
    $.ajax({
            url: URL_Login,
            type: "POST",
            dataType: "xml",
            async:false,
            cache: false,
            crossDomain:true,
            data: SOAP_Login,
            complete: endSaveProduct,
            beforeSend: function (xhr) { 
                xhr.setRequestHeader("SOAPTarget", "https://ex.example.com:443/OrSvi/Config1?style=document");
                xhr.setRequestHeader ("Authorization", "Basic WFWeMjEyMDerebWrteTyyku=="); 
                xhr.setRequestHeader("SOAPAction","urn:OrSviWsd/OrSVi_Document/getPRequest");
            },
            contentType: "text/xml;charset=UTF-8"
        });
} 
```

# android - Android adb shell am startservice：找不到错误

> ID：12347440
> 
> 赞同：11
> 
> 时间：2012-09-10T07:58:05.540
> 
> 标签：android, adb

我正在尝试从 adb shell 启动服务。已经有类似的问题：[How to start and stop android service from adb shell?](https://stackoverflow.com/questions/7415997/how-to-start-and-stop-android-service-from-a-adb-shell) 但是，当我开始服务时：

```
adb shell am startservice com.mypackage/com.mypackage.service.MyService 
```

我收到这条消息：

```
Starting service: Intent { act=android.intent.action.VIEW dat=com.mypackage/com.mypackage.service.MyService }
Error: Not found; no service started. 
```

我在 AndroidManifest.xml 中声明服务：

```
<application>
  ...
  <service
    android:name="com.mypackage.service.MyService"
    android:label="@string/local_service_label"
    android:icon="@drawable/ic_launcher">
  </service>
</application> 
```

你知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T07:21:41.657

```
adb shell am startservice -n com.mypackage/.service.MyService 
```

更新（每`adb shell am help start-service`）：

`-n` `<COMPONENT_NAME>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-10T07:47:24.807

以以下为例

```
<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">
    <service
        android:name=".MyService"
        android:description="@string/Desciption"
        android:enabled="true"
        android:exported="true">
        <intent-filter>
            <action android:name="com.nandhan.myservice" />
        </intent-filter>
    </service>        
</application> 
```

然后我将启动服务如下

**adb shell am startservice com.nandhan.myservice/.MyService**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-24T19:21:56.827

就我而言，无法启动的服务是`com.android.tools.fd.runtime.InstantRunService`.

> 启动服务：Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.xxx.xxx/com.android.tools.fd.runtime.InstantRunService } 错误：未找到；没有服务启动。

原来我的安卓设备丢失了一些东西。要禁用它，请转到`preferences > Build, Execution, Deployment > Instant Run`并取消选中`Enable Instant Run to hot swap code/resource changes on deploy (default enabled)`。

[![禁用即时运行](../Images/2994dae305115a8758ff3fd7dec417b3.png)](https://i.stack.imgur.com/ee1j4.png)

根据该屏幕截图，最好保留它，事实上，我会更喜欢该功能。至少我运行了额外的日志并将反馈发送给谷歌。我只需要尽快构建，所以今天没有立即运行；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T12:44:18.080

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
    package="com.xyz.path">

...

<application

...

    <service android:name=".MyService">
        <intent-filter>
            <action android:name="com.xyz.path.MY_SERVICE" />
        </intent-filter>
    </service>

... 
```

命令：

```
adb shell am startservice -n com.xyz.path/.MyService 
```

# objective-c - AVPlayer 特别注意事项是什么意思？

> ID：12347441
> 
> 赞同：2
> 
> 时间：2012-09-10T07:58:13.823
> 
> 标签：objective-c, ios, avfoundation, avplayer

在[AVPlayer 类参考](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)s 方法`replaceCurrentItemWithPlayerItem:`中有一个特殊注意事项说明：

> **特殊注意事项** 新项目必须具有与其替换的项目相同的合成器，或者没有合成器。

我不确定它们是什么意思？他们对合成器意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T11:38:41.983

`videoComposition`新的属性`AVPlayerItem`必须与被替换的项目相同，或者根本不应该有成分。

# iphone - 如何在 iPhone 的 UILocalNotification 中更改自定义声音？

> ID：12347444
> 
> 赞同：1
> 
> 时间：2012-09-10T07:58:33.263
> 
> 标签：iphone, objective-c, ios, uilocalnotification

我在 ios 的 uilocalnotification 中使用自定义声音。但它不玩。文件存在于 Document 文件夹中。通知正在使用`local.soundName= UILocalNotificationDefaultSoundName;`

```
 NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *path = [NSString stringWithFormat:@"%@/DingDongTone.wav",documentsPath];
        local.soundName=path; 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:11:06.623

请重新阅读苹果所说的 -

> 对于此属性，指定应用程序主包中声音资源的文件名（包括扩展名）或 [`UILocalNotificationDefaultSoundName`](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009565-CH1-SW16)请求默认系统声音。当系统显示本地通知的警报或标记应用程序图标时，它会播放此声音。默认值为 `nil`（无声音）。不支持持续时间超过 30 秒的声音。如果您指定的文件的声音播放时间超过 30 秒，则会播放默认声音。

根据this `filename`is the `path`of file in resources of `main bundle`not in the`document directory`

> 注意：文件也不应该更长`30 sec.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:15:51.967

`@saadnib`说我完全同意他的 `specify the filename`（包括延期）`sound resource should in the application’s main bundle`

因此，将您的声音复制到应用程序的主包中，然后`forget to copy`您不`path string`喜欢这样，它应该可以工作。

```
 yourLocalNotification.soundName= [yourSoundFilePath copy]; 
```

# insert - 具体5 ADODB更新和插入重复主键

> ID：12347449
> 
> 赞同：0
> 
> 时间：2012-09-10T07:59:03.797
> 
> 标签：insert, duplicates, adodb, concrete5

我正在为 Concrete 5 (5.4.0+) 创建一个新包。插入一个新块效果很好。但是当我编辑现有块时，它会在我单击“保存”时再次尝试插入，而不是更新。

数据库中影响这一点的两个字段是 bID 和 eID。两者都是`non-auto-incrementing INT(10) default none NOT NULL`。

这些值在控制器中的关联数组中传递，`$args`我正在调用父保存方法`Parent::save($args);`

任何帮助/输入将不胜感激。PS：我在网上查看了这个，C5论坛确实出现了一些我尝试过的东西，主要与数据库字段有关，但我仍然得到上述错误。如果可能，我不想覆盖 ADODB save() 方法。

- - 编辑 - -

也许我看错了。让我说一下我正在努力实现的目标。我需要 eID 在块的多次编辑中保持 37（例如）。出价可以增加 AFAIC。

如何让 eID 在编辑时保持 37，但在创建新实例时增加 1？有道理？

第二个表引用 eID 字段，并且此表上条目的编辑实例必须具有相同的 eID，除非创建新实例。Sry - 我知道像泥浆一样清晰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:07:51.750

您是说您的页面上出现了一个新的块实例，而不是现有块的新版本？我认为问题不在于表中插入了新记录，因为通常在编辑块时会创建新记录。C5 保留旧版本的块。

我所做的自定义块从未需要调用父保存方法。您只需要一个编辑表单来收集数据并指定它对应的数据库字段，并且父控制器知道在提交表单时如何处理它。

例如，如果您正在更新块表中有一个名为“firstname”的文本字段，您可以在 edit.php 文件中添加一行，如下所示：

```
<?php echo $form->text('firstname', $firstname, array('style' => 'width: 320px'));?> 
```

我的块编辑器几乎没有其他内容，除了用于添加标签和使表单看起来更好的 html/CSS 内容。$form 对象负责其他所有事情。

真正帮助我理解块和块控制器的一件事是下载并安装“设计器内容”附加组件。免费。您可以使用它来构建一些自定义块，然后查看它生成的代码以执行各种功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:34:42.223

所以我查看了现有的包来复制这个功能，我的问题已经演变成这样：[PHP Concrete 5 Pass Variables to Add.php](https://stackoverflow.com/questions/12382362/php-concrete-5-pass-variables-to-add-php)

跟着兔子走；）

# powershell - 检查文本文件中的行与另一个文本文件

> ID：12347460
> 
> 赞同：-2
> 
> 时间：2012-09-10T07:59:54.203
> 
> 标签：powershell, batch-file, text-files

我有两个文本文件，我该如何比较它们？基本上我所追求的是从文本文件 1 中取出第一行并将其与文本文件 2 中的所有行进行比较的东西，如果该行没有出现，则将该行写入文本文件 3。

然后检查文本文件 1 中的下一行与文本文件 2 中的所有行，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:13:33.260

如果您有一份适用于 Windows 的 grep 副本，那么问题就很简单了。一个很好的免费资源是[GnuWin](http://gnuwin32.sourceforge.net/)。[您可以从软件包](http://gnuwin32.sourceforge.net/packages.html)链接下载单个实用程序，例如 grep ，或者您可以使用全部[下载](http://getgnuwin32.sourceforge.net/)链接（单击该页面开头的下载按钮）获取整个 GnuWin 套件。

```
grep -v -x -F -f file2.txt file1.txt >file3.txt 
```

`-v`= 反转匹配逻辑 - 列出不匹配的行

`-x`= 整行必须完全匹配

`-F`= 搜索字符串是字符串文字而不是正则表达式

`-f file1.txt`= 从 file1.txt 中获取搜索字符串

您几乎可以使用本机 FINDSTR 命令做同样的事情，除了有 2 个问题：

1) 搜索字符串中的任何反斜杠字符`\`都必须转义为`\\`，即使在指定文字搜索时也是如此。

2) 如果使用多个区分大小写的文字搜索字符串，则存在一个令人讨厌的 FINDSTR 错误，该错误会导致丢失某些匹配项。

请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman)获取未记录的 FINDSTR 问题的“完整”列表。

只要可以进行不区分大小写的搜索并且 file2 不包含任何`\`字符，则以下内容将起作用：

```
findstr /x /v /i /l /g:file2.txt file1.txt >file3.txt 
```

可以通过创建一个转义反斜杠的临时文件来消除反斜杠限制。这是一些代码，但最终结果仍然运行得相当快。搜索仍然必须不区分大小写。

```
@echo off
setlocal disableDelayedExpansion

::Define the files
set "file1=test1.txt"
set "file2=test2.txt"
set "file3=test3.txt"

::Create an LF variable containing a line feed character
set LF=^

::The above 2 blank lines are critical - do not remove

::Create a modified version of file2 that escapes any backslash
::EOL is set to a linefeed so that all non blank lines are preserved
::Delayed expansion is toggled on and off to protect ! characters
>"%file2%.mod" (
  for /f usebackq^ eol^=^%LF%%LF%^ delims^= %%A in ("%file2%") do (
    set "ln=%%A"
    setlocal enableDelayedExpansion
    echo(!ln:\=\\!
    endlocal
  )
)

::Find lines in file1 that are missing from file2.mod
findstr /vixlg:"%file2%.mod" "%file1%" >"%file3%"

::Delete the temporary file2.mod
del "%file2%.mod" 
```

使用 2 个 FOR 循环编写一个健壮的本机批处理解决方案相对简单，但如果文件很大，性能会迅速下降。

```
@echo off
setlocal disableDelayedExpansion

::Define the files
set "file1=test2.txt"
set "file2=test.txt"
set "file3=test3.txt"

::Create an LF variable containing a line feed character
set LF=^

::The above 2 blank lines are critical - do not remove

::Find lines in file1 that are missing from file2.mod
::EOL is set to a linefeed character so that all non blank lines are preserved
>"%file3%" (
  for /f usebackq^ eol^=^%LF%%LF%^ delims^= %%A in ("%file1%") do (
    set "found="
    for /f usebackq^ eol^=^%LF%%LF%^ delims^= %%B in ("%file2%") do (
      if %%A==%%B set found=1
    )
    if not defined found echo %%A
  )
) 
```

可能有一个简单高效的原生 PowerShell 解决方案，但这不是我的专长。

# c# - 从自托管的 WEB API 控制台应用程序返回 jsonp

> ID：12347461
> 
> 赞同：3
> 
> 时间：2012-09-10T07:59:54.043
> 
> 标签：c#, console-application, asp.net-web-api, self-hosting

我使用了这篇博文中描述的 jsonp 格式化程序：[http ://www.west-wind.com/weblog/posts/2012/Apr/02/Creating-a-JSONP-Formatter-for-ASPNET-Web-API](http://www.west-wind.com/weblog/posts/2012/Apr/02/Creating-a-JSONP-Formatter-for-ASPNET-Web-API)

有没有人尝试将格式化程序与自托管控制台应用程序一起使用？

我已经在常规 MVC 4 项目中尝试过格式化程序，它立即工作。但是，我想在一个自托管的控制台应用程序中使用它，而且我在让它工作时遇到了很多麻烦。

我已经注册了格式化程序，并验证它已添加：

```
var config = new HttpSelfHostConfiguration(serviceUrl);

config.Formatters.Insert(0, new JsonpMediaTypeFormatter()); 
```

我已验证当我使用以下代码发出请求时正在调用格式化程序：

```
$("#TestButton").click(function () {         
    $.ajax({
        url: 'http://localhost:8082/Api/Test',
        type: 'GET',
        dataType: 'jsonp',
        success: function(data) {
            alert(data.TestProperty);
        }
    }); 
}) 
```

我已经检查了 Fiddler，得到的响应是：

```
HTTP/1.1 504 Fiddler - Receive Failure
Content-Type: text/html; charset=UTF-8
Connection: close
Timestamp: 09:30:51.813

[Fiddler] ReadResponse() failed: The server did not return a response for this request. 
```

如果有人能对正在发生的事情有所了解，我将不胜感激！

谢谢，

弗朗西斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:45:56.400

我怀疑 Disposing the StreamWriter 会导致这里出现问题。尝试调整`WriteToStreamAsync`方法：

```
public override Task WriteToStreamAsync(
    Type type, 
    object value,
    Stream stream,
    HttpContent content,
    TransportContext transportContext
)
{
    if (string.IsNullOrEmpty(JsonpCallbackFunction))
    {
        return base.WriteToStreamAsync(type, value, stream, content, transportContext);
    }

    // write the JSONP pre-amble
    var preamble = Encoding.ASCII.GetBytes(JsonpCallbackFunction + "(");
    stream.Write(preamble, 0, preamble.Length);

    return base.WriteToStreamAsync(type, value, stream, content, transportContext).ContinueWith((innerTask, state) =>
    {
        if (innerTask.Status == TaskStatus.RanToCompletion)
        {
            // write the JSONP suffix
            var responseStream = (Stream)state;
            var suffix = Encoding.ASCII.GetBytes(")");
            responseStream.Write(suffix, 0, suffix.Length);
        }
    }, stream, TaskContinuationOptions.ExecuteSynchronously);
} 
```

# alfresco - Alfresco FormService Fundamental 错误

> ID：12347464
> 
> 赞同：-3
> 
> 时间：2012-09-10T08:00:14.957
> 
> 标签：alfresco, alfresco-share

Alfresco Forms Service 无法正常工作。

看起来基本的表单功能不会将表单配置 ( `control-param name="nameHere"`) 传递给 webscript。

我一步一步地重现它。

*   创建 Freemarker 模板并根据 /share 项目下的文档进行注册。组件渲染并显示成功。一切正常。

*   根据 wiki Forms page 上的文档创建一个表单。在目录中注册它`<TOMCAT_INST/shared/classes/alfresco/web- extension/myclok-form-config.xml>`并以这种方式将其传递给加载：

    ```
    <bean id="sampleShareConfig" class="org.springframework.extensions.config.ConfigBootstrap" init-method="register">
      <property name="configService" ref="web.config" />
      <property name="configs">
      <list>
        <value>classpath:alfresco/web-extension/myclok-form-config.xml</value>
      </list>
      </property>
    </bean>
    <!-- ... share/WEB-INF/classes/org/springframework/extensions/surf/bootstrap/forms-bootstrap-context.xml --> 
    ```

表格实例：

```
<config>
 <forms>
  <form id="myclok">
   <view-form template="/org/alfresco/components/myclok/myclok.get.html.ftl" />
   <edit-form template="/org/alfresco/components/myclok/myclok.get.html.ftl" />
   <create-form template="/org/alfresco/components/myclok/myclok.get.html.ftl" />

   <field-visibility>
    <show id="currentPath" />
   </field-visibility>
   <appearance>
    <field id="currentPath">
     <control name="currentPath" template="/org/alfresco/components/myclok/myclok.get.html.ftl">
     <control-param name="currentPath">sampleData1</control-param>
     </control>
    </field>    
    <control name="currentPath" template="/org/alfresco/components/myclok/myclok.get.html.ftl">
    <control-param name="currentPath">sampleData2</control-param>
    </control>
    </appearance>
   </form>
  </forms>
</config> 
```

在官方文档中是这样写的：

> 如果表单元素存在于没有评估器的配置元素中，并且始终找到表单的条件，如果您希望某个字段出现在应用程序的每个表单上，这将很有用。

所以，我在 myclok-form-config.xml 文件中指定了它，但是这种方法没有给出任何结果。因此，当通过以下 URL < `http://localhost:8080/share/page/site/wcmqs/myclok`> 加载具有此类对参数的引用的组件时，Alfresco 将失败并出现异常：

```
Exception: freemarker.core.InvalidReferenceException - Expression field is undefined on line 6, column 6 in org/alfresco/components/myclok/myclok.get.html.ftl.
freemarker.core.TemplateObject.assertNonNull(TemplateObject.java:125)
freemarker.core.TemplateObject.invalidTypeException(TemplateObject.java:135)
freemarker.core.Dot._getAsTemplateModel(Dot.java:78) 
```

换句话说，不可能`currentPath`接收`FormConfigs`. 因此，FormsService / ConfigService 的最小功能不起作用。

```
<#if field.control.params.currentPath??>
  <#assign path=field.control.params.currentPath>
<#else>
  <#assign path="someOtherDataValue">
</#if> 
```

有谁知道如何解决它或者可以演示一个工作示例？

PS: 附上所有上述表单`FormService`和webscript组件的配置。用于快速安装的 .AMP 文件仅用于调用以下命令：

```
java -jar alfresco-mmt.jar install myclokStubFormComponent.amp ../tomcat/webapps/share.war 
```

[AMP 文件](https://docs.google.com/open?id=0B7en2uzF4fSXT0Jwck5iRTZQMEk)。 [配置文件](https://docs.google.com/open?id=0B7en2uzF4fSXbEt5cE04dVlwVHc)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T21:42:26.750

我认为您误解了表单模板和字段模板之间的区别。您正在指定相同的文件`/org/alfresco/components/myclok/myclok.get.html.ftl`来控制表单的布局以及呈现您的字段。

当您使用字段模板呈现表单时，您会收到一条错误消息，指出该`field`对象尚未填充。这是非常正确的，因为框架还没有开始渲染各个字段。您正在呈现表单。

我建议您在开始实现自己的更复杂的表单之前尝试一些更基本的示例，例如 Forms Development Kit (FDK) 附带的示例，*尤其是*在您开始声称该框架无法按文档说明工作之前。

# c# - 如何使用 P/Invoke 加载非托管库？

> ID：12347465
> 
> 赞同：0
> 
> 时间：2012-09-10T08:00:20.983
> 
> 标签：c#, visual-studio, unmanaged

所以我有一个旧的非托管库 dll/tlb。我想在 .net 4.0 程序中使用它。我基本上不知道如何做到这一点，所以如果你能给我提供一些教程甚至更好的例子会很棒。我在看这个： [pInvoke，.net 4 vs 3.5](https://stackoverflow.com/questions/4462693/pinvoke-net-4-vs-3-5)，但我什么也想不通。我也检查了这个，但我不知道我应该使用什么，所以它会起作用。 [http://codenition.blogspot.com/2010/05/pinvokestackimbalance-in-net-40i-beg.html](http://codenition.blogspot.com/2010/05/pinvokestackimbalance-in-net-40i-beg.html)

谢谢大家的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:02:23.160

您可以通过右键单击解决方案资源管理器中的引用文件夹来添加对库的引用。

之后在出现的对话框中选择 COM 选项卡和浏览，然后找到您的 DLL。

如果您想访问不同的方法，请查看以下示例：

```
[DllImport("User32.dll")]
public static extern int MessageBox(int h, string m, string c, int type); 
```

方括号之间的 dll 是您的 DLL，而 extern 关键字允许您指定您正在使用来自外部库的方法。

如需更多参考，请阅读：http: [//msdn.microsoft.com/en-us/library/e59b22c5%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/e59b22c5%28v=vs.80%29.aspx)

# android - 将 2 个 textChangedListeners 添加到 edittext？

> ID：12347466
> 
> 赞同：1
> 
> 时间：2012-09-10T08:00:21.903
> 
> 标签：android

我正在创建一个包含 a 的类，`EditText`当它`EditText`发生变化时，我将值存储在这个类的一个变量中。

但是我在另一个类中也需要这个值，并且我想在每次`EditText`更改时更新这个值。

那么这个问题的最佳解决方案是什么？我怎样才能通知我的其他班级发生了`EditText`变化？`EditText`已经有一个`textChangedListener`，但我可以添加第二个而不`textChangedListener`覆盖第一个吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:06:32.123

您可以使用[TextView.addTextChangedListener](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)

这将`add`是另一个侦听器，而不是替换已经存在的侦听器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:02:45.277

您可以尝试向其他类添加回调：

[http://www.javaworld.com/javatips/jw-javatip10.html](http://www.javaworld.com/javatips/jw-javatip10.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:06:44.330

TextWatcher 是一个接口。做一个实现它的类。创建一个接受 EditText 的构造函数，并在用户将活动留在 onPause 或 onStop 时为持有视图的活动类提供回调。然后在另一个屏幕上给出另一个类的实例来编辑文本并执行相同的操作。

# php - Internet Explorer 阻止重定向？

> ID：12347471
> 
> 赞同：0
> 
> 时间：2012-09-10T08:00:44.013
> 
> 标签：php, apache, internet-explorer

最近我遇到了 Internet Explorer“阻止”重定向的问题。

它以前工作过，但突然 IE 开始引起问题。

在我的 CMS 中，我可以进行重定向（PHP 中的标题位置），例如，当页面不存在时，它可以重定向到首页。此外，如果 slug URL 不正确，它将重定向到正确的 slug。

唯一的问题是，如果连续有两个重定向，Internet Explorer 就会以 404（或 500，不记得）而死。

在 Chrome 和 Firefox 中运行良好，没有问题。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:13:55.137

放置出口是一个很好的经验法则；毕竟重定向。

```
header('Location: mypage.php');
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:09:56.480

得到它的工作！出于某种奇怪的原因，CMS 插入了 301 标头，但没有重定向。Chrome 显然会在收到 301 标头时显示该页面，但 IE 只是停止解析该页面。

# performance - WCF、ThreadPool.QueueUserWorkItem 和 Windows Azure

> ID：12347472
> 
> 赞同：0
> 
> 时间：2012-09-10T08:00:44.287
> 
> 标签：performance, iis, azure, threadpool

我有一个奇怪的问题，希望你能帮助我。

在我们的开发服务器上，我们在具有 8GB RAM 的虚拟 x64 实例上运行带有 IIS 7.5 的 Windows 2008R2。

这里我调用了一个 WCF 方法，它使用 ThreadPool.QueueUserWorkItem 来处理大量的分层数据。这工作得很好，而且工作得相当快（读取 270 MB XML 并在 379 秒内生成 190.035 条记录）。客户端在大约 250 秒内完成调用该方法。

现在，Windows Azure 上的相同“工作流程”完全是另一种情况。尽管类似（循环配置中的大型实例），Windows Azure 会在几秒钟内停止客户端断开连接。这意味着只写入了 160.055 条记录，而且速度要慢得多 - 917 秒。这里的问题是，我错过了大约 30.000 条记录，这些记录现在**应该**在两个 Azure 实例上排队，但似乎 - 在客户端断开连接时 - 放弃了剩余的工作。

客户端使用 HttpWebRequest 进行通信，两种解决方案都运行 .NET 4.0。

我在这里错过了什么？

在此先感谢您提供有关此问题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:09:50.027

我的坏人——我根本无法想象 Windows Azure 会这么慢......所以通过将 HttpWebRequest 从 2 分钟增加到 30 分钟，我能够实现与我们的开发环境相同的数据量。

所以 - 我不会删除这个问题 - 但让这个作为你即将到来的 Azure 家伙的参考。

我很肯定 Azure（和其他云提供商）是未来，但从丹麦到“北欧”，延迟很高——而且 SQL Azure 尚未证明它可以在谈论 OLTP 和规范化数据库时执行。

开发（虚拟环境）来自 299 MB 文件的 190.335 条记录在单个实例上耗时**379秒**

WINDOWS AZURE（北欧） 299 MB 文件中的 190.335 条记录在两个 LARGE 实例上耗时**1.400秒**

好消息是，WCF 和 ThreadPool 工作完美无缺，不需要特殊考虑（除了高超时）。

* * *

澄清一下，这个 299MB 的文件被拆分为对服务器的多个 REST 调用，格式与此类似：

```
<?xml version="1.0" encoding="UTF-8"?>
<HttpPost absolutePath="A/B/C/D/E/OO">
    <Parameters xmlns="http://somenamespace">
        <A>Package</A>
        <B>100</B>
        <C>Generic</C>
        <D>ReceiverParty</D>
        <E>
            <F xmlns="http://somenamespace">
                <G xmlns="http://somenamespace/Product">Long Text</G>
                <H xmlns="http://somenamespace/Product">1</H>
                <I xmlns="http://somenamespace/Product">PK</I>
                <J xmlns="http://somenamespace/Product">5995</J>
                <K xmlns="http://somenamespace/Product">
                    <L xmlns="http://somenamespace/P/Q">Discount</L>
                    <M xmlns="http://somenamespace/P/Q">1000</M>
                    <N xmlns="http://somenamespace/P/Q">6995</N>
                </K>
            </F>
        </E>
        <OO>
            <O>
                <A>Product</A>
                <B>100</B>
                <C>Generic</C>
                <D>ReceiverParty</D>
                <E>
                    <F xmlns="http://somenamespace">
                        <G xmlns="http://somenamespace/Product">Long Text</G>
                        <H xmlns="http://somenamespace/Product">1</H>
                        <I xmlns="http://somenamespace/Product">PK</I>
                        <J xmlns="http://somenamespace/Product">5995</J>
                        <K xmlns="http://somenamespace/Product">
                            <L xmlns="http://somenamespace/P/Q">Discount</L>
                            <M xmlns="http://somenamespace/P/Q">1000</M>
                            <N xmlns="http://somenamespace/P/Q">6995</N>
                        </K>
                    </F>
                </E>
            </O>
        </OO>
    </Parameters>
</HttpPost> 
```

# ruby-on-rails - rails将变量从控制器传递给模型不起作用

> ID：12347474
> 
> 赞同：0
> 
> 时间：2012-09-10T08:00:47.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, model, var

我试图将变量从控制器传递到我的表单无济于事。

它在另一个控制器中工作，但不能使其适用于新用户注册。

```
 def update
    @profile = Profile.find(params[:id])
    @profile.form = "signup"
    ...
  end 
```

内部模型我可以做`@profile.form`以获得价值

这不适用于新用户注册：在创建操作中：

```
 undefined method `form=' for nil:NilClass 
```

如何在新用户注册时将变量传递给我的模型？`User = User.new`然后`@user.form == "signup"`也不起作用，我的属性可访问列表中有 :form

部分型号：

```
 attr_accessible form
  ...
  validates :city_id, :presence => true, :if => :signup?

  def signup?
    #@profile.form == "signup"
    #@user.form == "signup"
    if self.form == "signup"
      return true
    else
      return false
    end
  end 
```

编辑 1：仍然无法将参数传递给模型 :S:S:S 尝试了所有可能的方法，谷歌找到了解决方案。

我的注册的创建方法#create =

```
 def create
    profile = Profile.new
    profile.form = "signup"

    super
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:28:13.573

有趣的。我相信您想要做的是使对象的虚拟属性“形式”具有一定的值。即数据库中也存在表单。如果不是，您应该使用`attr_accessor :form` [文档](http://ruby-doc.org/core-1.8.7/Module.html#method-i-attr_accessor)

这定义了表单在其被调用的类中的 getter 和 setter 方法。

但是，您所说的错误是完全不同的。

> nil:NilClass 的未定义方法“form=”

这仅仅意味着在参数中传递 id 的配置文件不存在。即，如果我们正在更新参数 id = 222，则 Profile 中不存在 id 为 222 的数据库记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:42:16.810

我不确定您的问题到底是什么。在我两次阅读您的问题陈述后，我了解到您试图“新建”一个 Profile 实例，分配其 form 属性。并使用其实例方法`signup?`进行验证。但是在 on 之后你会得到一个错误，`self.form` 因为`self`引用`nil Class`

我认为您应该更改`profile`为`@profile`create 方法内部。只是在阅读[有关实例变量的 ruby​​ 指南](http://www.rubyist.net/~slagell/ruby/instancevars.html)后猜测，我的想法是声明将在控制器结构中动态添加的实例变量，然后将它们传递给模型。它总是`@...`在由`rails g scaffold`.

试一试吧:)

# c# - 当我尝试获取 [" 和 ", ( 有代码) 之间的所有子字符串时，如何解决此错误？

> ID：12347475
> 
> 赞同：-2
> 
> 时间：2012-09-10T08:00:51.560
> 
> 标签：c#, regex, substring

我有字符串：

```
new y",[["new york",0,[]],["new york times",0,[] 
```

我想要这些字符串`["`和`",`：

```
new york
new york times 
```

我试过这个功能：

```
public MatchCollection s;
...
s =  Regex.Matches(s44, "[\".*?\","); 
```

但我收到了这个错误：`ArgumentException was unhandled: prasing "[".*?"," - Unterminated [] set`。

你能帮我解决这个问题吗？非常感谢！

**编辑：**我想要的字符串没有`["`和`",`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:02:50.753

您需要转义括号。此外，您需要使用括号来介绍一个组。您想要的文本比包含在该组中：

```
var matches = Regex.Matches(s44, "\\[\"(.*?)\",");
foreach(Match match in matches)
{
    var result = match.Groups[1].Value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:09:48.893

我昨天已经回答了这个[问题，使用](https://stackoverflow.com/q/12337540/944681)`Regex.Matches(@"(?<=\["")[^""]+")`

使用 @ 前缀，您可以创建字符串文字，这意味着在您的情况下，反斜杠将作为其他字符处理，您不需要转义它们。但是你需要双引号。

后面的部分已经解释过了，所以下次请不要重新发布相同的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:05:44.520

这就是你想要的：

```
Regex.Matches(s44, "(?<=\\[\").*?(?=\",)"); 
```

输出：`new york, new york times`

**[正则表达式演示](http://regexr.com?323k1)**

# php - 读取排序数组

> ID：12347482
> 
> 赞同：0
> 
> 时间：2012-09-10T08:01:48.243
> 
> 标签：php, arrays, sorting

为什么`$val`是 Array(1)，而不是数值？我预计`$selected as $k => $val`应该从数组中返回每一行`$selected`。因此，`$k`必须是数字键（它是）并且`$val`必须是对应的数值（但它是一个数组而不是简单的整数）。那么，如何正确地将排序的键和值保存在数组`$ind`中`$ranks`？

```
<?php

        $selected = array();

        for ($i=0; $i<5; $i++) {
            $selected[] = array($i => rand(0,5));
        }

        arsort($selected);

        $ind = array();
        $rank = array();
        foreach($selected as $k => $val) {
           $ind[] = $k;
           $rank[] = $val;
        }
?> 
```

更新：例如，此代码..

```
for ($i=0; $i<5; $i++) {
    $selected[$i] = rand(0,5);
} 
```

提供数组：[0] => 5, [1] => 3, [2] => 2, [3] => 5, [4] => 3

一旦我对它进行排序，初始键就会被删除，对吧？对数组进行排序后，如何找到随机生成的值的初始键 [0]-[4]？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:07:24.657

我认为您可能的解决方案是改变

```
$selected[] = array($i => rand(0,5)); 
```

到

```
$selected[] = rand(0,5); 
```

这样做会产生`$ind`这样的结果`$rank`：

```
Array
(
    [0] => 0
    [1] => 3
    [2] => 2
    [3] => 4
    [4] => 1
)
Array
(
    [0] => 4
    [1] => 3
    [2] => 1
    [3] => 0
    [4] => 0
) 
```

做你想做的最好的方法就是使用结果数组，例如：

`$selected`

```
Array
(
    [1] => 5
    [2] => 5
    [4] => 4
    [0] => 2
    [3] => 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:08:16.210

我认为这就是你需要的

```
for ($i=0; $i<5; $i++) {
    $selected[$i] = rand(0,5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:08:24.487

您的数组结构将如下所示：

```
array(
    0 => array(0 => 1),
    1 => array(1 => 4),
    ...
) 
```

因为您在这里分配了一个*数组*：

```
$selected[] = array($i => rand(0,5)); 
```

你只想要这个：

```
$selected[] = rand(0,5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:11:38.313

嗨，我不太确定您要做什么，但以下代码正在创建一个数组数组。

```
$selected = array();

        for ($i=0; $i<5; $i++) {
            $selected[] = array($i => rand(0,5));
        } 
```

所以 $val 将是一个数组。您可以尝试以下代码：

```
$selected = array();

    for ($i=0; $i<5; $i++) {
        $selected[] = rand(0,5);
    } 
```

谢谢

# servlets - 如何获取已部署的 Web 应用程序的目录？

> ID：12347484
> 
> 赞同：0
> 
> 时间：2012-09-10T08:01:50.657
> 
> 标签：servlets, struts2

如何获取 struts2 Web 应用程序的当前工作目录？

```
String currentDir = System.getProperty("user.dir");
String currentDir = new File(".").getAbsolutePath(); 
```

返回`/usr/share/tomcat`。

我需要网络应用程序的路径，所以我可以从战争中读取文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:53:37.823

您需要获取 ServletContext 的真实路径：[`ServletContext.getRealPath(String)`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)

也就是说，为什么要读取战争文件中的文件，为什么要这样做？

更喜欢将文件放在类路径上并使用`getResourceAsStream`：

*   [API](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)
*   [文档](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)

# android - Android开发设备ID的目的是什么？

> ID：12347486
> 
> 赞同：2
> 
> 时间：2012-09-10T08:02:06.847
> 
> 标签：android

在 ICS 的开发人员选项下，Android 开发设备 ID 的用途是什么？我用谷歌搜索并没有发现任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:11:41.550

设备 ID 是您的应用可以链接到手机的另一种方式。大多数应用程序都与您的帐户相关联，但有些应用程序，尤其是那些您无法通过市场支付的应用程序，使用了设备 ID，因此您无法购买应用程序然后将其安装在多个设备上。

以前只是隐藏，说不定决赛出来后，又会被隐藏。

欲了解更多信息 - [http://androidforums.com/motorola-droid-bionic/584694-ics-development-device-id.html](http://androidforums.com/motorola-droid-bionic/584694-ics-development-device-id.html)

也许这会帮助你......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:11:18.060

每个设备都有一个 android 设备 ID，重置此 ID 的唯一（用户）方法是使用 android 的重置为出厂默认选项 - 因此此 ID 应保持不变，除非手机被出售/转让所有权等。ID 应该是唯一的一直以来的所有设备。

这些属性使其成为存储许可证/安全性的非常有用的东西。

# c# - 在 Windows 8 中使用中间人进行流式传输

> ID：12347487
> 
> 赞同：19
> 
> 时间：2012-09-10T08:02:13.607
> 
> 标签：c#, httpwebrequest, windows-8, microsoft-metro

我想将数据从服务器流式传输到`MediaElement`我的 Windows 8 应用商店（以前的 Metro）应用程序中。但是，我需要在流式传输时“记录”流，因此如果重新请求它可以从缓存中提供，所以我不想将 URL 直接输入到`MediaElement`.

目前，绊脚石是`MediaElement.SetSource()`接受a ，而`IRandomAccessStream`不是 a `System.IO.Stream`，这是我从中得到的`HttpWebResponse.GetResponseStream()`。

我现在拥有的代码不起作用：

```
var request = WebRequest.CreateHttp(url);
request.AllowReadStreamBuffering = false;
request.BeginGetResponse(ar =>
                {
                    var response = ((HttpWebResponse)request.EndGetResponse(ar));
                    // this is System.IO.Stream:
                    var stream = response.GetResponseStream(); 
                    // this needs IRandomAccessStream:
                    MediaPlayer.SetSource(stream, "audio/mp3");
                }, null); 
```

是否有一种解决方案可以让我流式传输音频，但允许我在从远程端完成读取后将流复制到磁盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:52:56.290

我没有尝试过以下想法，但它可能会奏效：您可以开始将 Web 数据流式传输到一个文件中，然后在几秒钟后（用于缓冲）将该文件传递给 MediaElement。

我注意到 MediaElement 对打开正在写入的文件可能很挑剔，但我已经看到它有效。虽然，我不能说为什么它有时会起作用，为什么有时不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T04:02:10.117

我想这会帮助您将 Stream 转换为 IRandomAccessStream

```
InMemoryRandomAccessStream  ras = new InMemoryRandomAccessStream();

using (Stream stream = response.GetResponseStream();)
  {
    await stream.CopyToAsync(ras.AsStreamForWrite());
  } 
```

# facebook - Facebook 应用程序被阻止

> ID：12347499
> 
> 赞同：0
> 
> 时间：2012-09-10T08:03:09.650
> 
> 标签：facebook, blocked

![在此处输入图像描述][1]

我的 facebook 应用程序被屏蔽了，我不知道是什么原因...

这就是我所看到的：

“‘应用名称’已被限制您的应用已被 Facebook 限制。上传和标记照片已禁用”

到目前为止，它创建了 12,000 个添加和 300 个删除该应用程序..它非常有名，并且在 1 天内变得病毒式传播..但突然 facebook 阻止了它..

1 照片报告？0 自我报告的垃圾照片？12 朋友举报的垃圾照片？0 照片标签垃圾邮件？

请告诉我他们为什么阻止我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:13:39.713

这是因为大多数用户已从您上传的照片中删除了标签。这就是为什么 facebook 禁止上传和标记照片的原因。但好像你在说

> “到目前为止，它创建了 12,000 个添加和 300 个删除该应用程序”..

但是，如果您认为它错了，那么您可以向 facebook 提交您的请求，以取消对上传和标记照片的禁令。

# c# - Jquery 日期选择器 toDateTime

> ID：12347504
> 
> 赞同：1
> 
> 时间：2012-09-10T08:03:17.707
> 
> 标签：c#, jquery, asp.net-mvc

我正在开发一个项目，在该项目中我使用 Jquery Datepicker 选择往返日期以过滤记录，

我的数据库表中有 DateTime 字段，在从 datepicker 中选择日期时，我正在做 ajax 调用，

出现的问题是在我的数据库中我有时间记录（例如：2009-08-08 13:12:23.143）并且从 datepicker 我有没有时间的记录（即 2009-08-08），我已经转换了它到 DateTime 但我仍然有相同的记录，由于这种差异，我的查询返回空结果，有人可以建议如何处理吗？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:10:29.430

仅使用 DateTime 对象的日期部分（如果您不想考虑时间）进行过滤...在查询的 where 子句中，这样做

```
where (@pDate is null  or CONVERT(VARCHAR(10), Date,111) between CONVERT(VARCHAR(10), @pStartDate,111) and CONVERT(VARCHAR(10), @pEndDate,111)) 
```

# .net - 我可以使用 Sync Framework 仅用于传输数据而不进行配置（使用同步表）吗？

> ID：12347505
> 
> 赞同：0
> 
> 时间：2012-09-10T08:03:17.817
> 
> 标签：.net, microsoft-sync-framework

是否可以将框架配置为仅基于没有同步表的过滤器以及在正常同步过程中使用的所有这些附加表来传输记录？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:49:33.900

简短的回答是不，你不能。但是，请继续阅读以获得更完整的答案。

解决方法：

有一种方法可以绕过架构中对额外表的需求。如果您使用 SQL 2008 和同步框架 1.0 对象（SyncAgent，而不是 SyncOrchestrator），则可以使用 SQL 2008 的内置更改跟踪。这根本不会弄乱您的架构。SQL 2008 仍将跟踪更改，您只是不必看到一堆表使您的架构混乱。

长答案（使用同步框架 2.* 对象）：

同步表和跟踪表作为组成同步框架系统的一组模式、存储过程和进程的一部分工作。尽管您可能能够构建一个过滤器，只允许您选择更改，但系统的其余部分仍然需要跟踪表。跟踪表不仅跟踪插入/更新行的时间，还跟踪最后一次更改是本地更改还是通过远程数据库的同步框架应用的。跟踪更改的来源是真正为同步框架增加价值的关键事物之一，因此是框架中的核心概念。

如果您要尝试消除跟踪表，至少，您还必须更新每个存储过程（每个表的所有 8+ ......）。您根本无法摆脱同步表（schema_info、scope_*） - 对它们的需求不在存储过程中，而是内置在框架的核心中。

# windows-phone-7 - wp7 - 推特照片上传

> ID：12347506
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:03:23.400
> 
> 标签：windows-phone-7

我们正在尝试通过 WP7 中的 silverlight 代码将图像上传到 Twitter。我们可以发布消息，但不能发布图像。

我们尝试了所有方法，包括下载他们的库，但没有得到提示。

在以下链接中， [https://dev.twitter.com/docs/api/1/post/statuses/update_with_media](https://dev.twitter.com/docs/api/1/post/statuses/update_with_media)

有一点我们无法设定。“与 POST 状态/更新不同，此方法需要原始多部分数据。您的 POST 请求的 Content-Type 应使用 media[] 参数设置为 multipart/form-data”

我不明白该怎么说。

任何人都可以指导我或提供图片上传的样本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:18:49.810

如果您的照片名为 LoadedPhoto，您可以从中创建内存流

```
MemoryStream ms = new MemoryStream(); 
LoadedPhoto.SaveJpeg(ms, LoadedPhoto.PixelWidth, LoadedPhoto.PixelHeight, 0, 100); 
```

根据您获取的身份验证详细信息创建 OAuthCredentials 对象

```
var credentials = new OAuthCredentials
{
    Type = OAuthType.ProtectedResource,
    SignatureMethod = OAuthSignatureMethod.HmacSha1,
    ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
    ConsumerKey = Common.TwitterSettings.ConsumerKey,
    ConsumerSecret = Common.TwitterSettings.ConsumerKeySecret,
    Token = file.AccessToken,
    TokenSecret = file.AccessTokenSecret,
    Version = "1.0"
}; 
```

创建一个 RestClient 和一个 RestRequest

```
var restClient = new RestClient
{
    Authority = "https://upload.twitter.com"
};

var restRequest = new RestRequest
{
    Credentials = credentials,
    Path = "/1/statuses/update_with_media.xml",
    Method = Hammock.Web.WebMethod.Post
}; 
```

将流位置设置为 0

```
ms.Position = 0; 
```

向 RestRequest 添加字段

```
restRequest.AddField("status", message);
restRequest.AddFile("media[]", "ScreenShot.png", ms, "image/jpeg"); 
```

然后开始请求

```
restClient.BeginRequest(restRequest, callback); 
```

callback 是请求的回调方法。

摘自[我的博文](http://igrali.com/2012/07/14/share-photos-on-twitter-from-windows-phone-app/)，有兴趣的可以去看看。

# java - 日食警告：最终块无法正常完成

> ID：12347512
> 
> 赞同：-3
> 
> 时间：2012-09-10T08:03:54.637
> 
> 标签：java, eclipse, try-catch-finally

我有一些代码会引发潜在的错误，我抓住了这些，然后跳到一个`finally`块中，这里是“伪”形式。

```
private boolean myMethod(ResultSet rs1, ResultSet rs2){

Vector<String> temp = new Vector<String>();

try{

//add info into temp while condition is true
while(true){temp.add(information);}//potentially throws an SQL error

//test my temo object for some codition
if(false){throw InternalError();}

}catch (SQLException e){
     //send error message
}
catch (InternalError e){
     //send error message
}

finally{
//whatever happens I need to send a result of some sort!

if(temp.size() > 1){
   //create class member variable from this info
}

//send a message explaining that an error has occurred.

//this is the message to say if things have worked or not, so as the
//calling code can handle an re-run this method until this value returns true.
return booleanValue
}//end finally

}//end method 
```

我不确定此错误消息在这种情况下的确切含义。

我通常在任何抛出异常的方法中处理任何异常，在这种情况下我应该抛出而不是处理异常，并在自定义异常中捕获这两个错误吗？

我发送的前两条消息主要用于开发目的，因为我必须处理它们。我的 finally 块中的消息最终将包含给用户的消息，要求他们确认情况、进行修改、中止或更改我们遇到这种情况的方式。

我应该怎么做才能“删除”编译器消息。我不喜欢在我的代码中抑制警告，因为我不喜欢暗示我可能会在链的下游抑制其他东西，而且抑制是针对整个方法的，我不能为此添加它一小段代码。

对我的情况有什么建议。

提前致谢。

编辑 1：为了反映评论，抱歉忘记将正确的返回类型（愚蠢的错误）与 if(test){} 右括号相同。

PS。对于那些“投反对票”的人，您可以发表评论，让我有机会在投反对票之前进行编辑。谢谢。同样在我的代码中，这些东西并没有给我带来问题，这是发布过程中大脑和手指之间的“查询脚本故障”的情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T08:08:49.510

**break**、**continue** * *return* * 和**throw**是语句的突然完成。你应该在**finally**块之外**返回。**此外，您将返回 void 方法。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T08:06:33.543

如果您已格式化您的代码，您会看到该`finally`子句位于 a 内`catch`，并且没有链接到任何`try`子句。

你应该有

```
try {

} catch {

} finally {

} 
```

并不是

```
try {

} catch {
     finally {

    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T08:06:31.913

方法返回类型是`void`，并且您`return booleanValue`的`finally block`. 我会使用 finally 块来关闭非 java 资源。

如果你想返回值，那么要么在 try 块或 catch 块中返回它，要么`try{}` `catch{}`在`finally{}`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-10T08:09:10.687

这是因为您在**finally块中有****return**语句，这是不可取的，并且被认为是一种糟糕的编码风格。**

# javascript - 为什么这个函数调用会破坏程序并导致未定义的变量？

> ID：12347516
> 
> 赞同：0
> 
> 时间：2012-09-10T08:04:05.603
> 
> 标签：javascript, google-maps, variables, undefined

```
function getLatLng(address) {
    geocoder.geocode({
        'address' : address
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            alert("Aus getLatLng: adresse:"+address+"Ergebnis: "+results[0].geometry.location);
            return results[0].geometry.location;
        } else {
            alert("Geocode was not successful for the following reason: "
                    + status);
        }
    });
} 
```

我在另一个函数中使用这个 javascript 函数从作为地址的字符串中获取纬度/经度值。警报显示转换成功，但如果我调用该方法，我会收到一个 JavaScript 错误，它仍然未定义。

```
 var start = document.getElementById("route_start").value;
    start = getLatLng(start);
    alert("Start: "+start); 
```

我错过了什么？警报始终显示未定义的变量。这是为什么？我什么都试过了。一切都很顺利，直到我调用函数 getLatLng。有回报的东西不起作用。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:11:10.623

您的`getLatLng`函数实际上并没有返回任何内容，这就是`start`未定义的原因。

您编写的 return 语句包含在传递给 的匿名函数中`geocoder.geocode`，因此它实际上不会从您的外部函数返回。

由于`geocoder.geocode`是异步的，您将无法编写以`getLatLng`这种方式返回结果的 a，而是需要将回调函数作为参数传递，并在地理编码 API 返回值时调用此函数，例如：

```
function getLatLng(address, callback) {
    geocoder.geocode({
        'address' : address
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            callback(results[0].geometry.location);
        } else {
            alert("Geocode was not successful for the following reason: "
                    + status);
        }
    });
} 
```

# c# - 如何使用 C# 在 Asp.Net 页面中显示错误消息？

> ID：12347520
> 
> 赞同：0
> 
> 时间：2012-09-10T08:04:24.473
> 
> 标签：c#

我的 aspx 页面中有几个下拉框，我也有搜索按钮。

如果用户在没有选择任何下拉框的情况下单击“搜索”按钮，我想显示“请选择任何值”之类的消息

我的页面是动态创建的，所有的控件都是动态创建的。而且我不想使用任何静态 aspx 页面控件（如文本框、标签等）来显示错误消息

我想显示来自我在我的 aspx.cs 文件中引用的其他一些 .cs 文件的错误消息。

我尝试过如下方法：但是它不起作用。

```
if (first!= "-- Select The Item --" || second != "-- Select The Item --")
            {
                //Do Something
            }
            else
            {

                throw new Exception("Please select any Filter Type");
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:09:10.000

您可以使用`RequiredFieldValidator`请检查下面的 SO 链接：

[如何将RequiredFieldValidator 添加到DropDownList 控件？](https://stackoverflow.com/questions/2280559/how-to-add-a-required-field-validator-to-dropdown-list-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:27:01.647

那么javascript可以用来验证下拉列表....看看下面的链接 [如何验证动态创建的控件？](https://stackoverflow.com/questions/419769/how-to-validate-dynamically-created-control)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:15:06.717

假设`dd1`和`dd2`是`DropDownList`控件 ID，您可以检查该`SelectedIndex`属性：

```
if (dd1.SelectedIndex != 0 || dd2.SelectedIndex != 0)
{
    //Do Something
}
else
{

    throw new Exception("Please select any Filter Type");
} 
```

# android - 表格布局和按钮点击事件

> ID：12347522
> 
> 赞同：0
> 
> 时间：2012-09-10T08:04:49.623
> 
> 标签：android, android-button, onclicklistener, android-tablelayout

这是我的 xml 表格布局文件：

```
ID  Car No  Timein      Timeout     Charge    Print

1   AA-123  9:00        12:00       1000      btnprint

2   BB-123  10:00       1:00        1000      btnprint

3   CC-123  10:00       1:00        1000      btnprint 
```

在打印按钮上单击我想获取行数据并将其按角色发送到另一个活动。

如何获取表格行值和按钮点击参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:21:28.767

如果`TextViews`(我认为`Car No`, `TimeIn`etc 都是`TextViews`, 对吗？) 并且打印`Button`被 a 包裹，`TableRow`那么获取数据非常简单：

```
 printBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            TableRow tr = (TableRow) v.getParent();
            TextView carNumber = (TextView) tr.findViewById(R.id.the_id_ofTheCarNumberTextView);
                            String carNumberText = carNumber.getText().toString();   
            TextView timeIn = (TextView) tr.findViewById(R.id.the_id_ofTheTimeInTextView);
                            String timeInText = carNumber.getText().toString();
            TextView timeOut = (TextView) tr.findViewById(R.id.the_id_ofTheTimeOutTextView);
                            String timeOutText = carNumber.getText().toString();
            // etc get the rest of the fields
            // put the data in the intent and start send it to the new
            // activity
        }
    }); 
```

根据行数，您可能需要查看`ListView`小部件。

# php - 最有效的分层产品表

> ID：12347525
> 
> 赞同：0
> 
> 时间：2012-09-10T08:04:52.757
> 
> 标签：php, mysql, sql

我已经建立了一些产品数据库，但我从未对数据库的效率感到真正满意。我最好的方法是有一个产品表、一个类别表和一个关系表，即：

产品表：

```
id    product_name     data
1     Some prod        More info...
2     Another prod     Even more... 
```

类别表：

```
id    parent_id   cat_name
1     0           Main cat 1
2     1           Sub cat 1
3     1           Sub cat 2
4     3           Sub sub cat 1
5     0           Main cat 2 
```

关系表：

```
id    prod_id    cat_id
1     1          2
2     1          4
3     2          5
etcetera... 
```

这样可以快速轻松地检索产品，也可以轻松地将一种产品分配给多个类别。

然而，创建类别列表的结构并不像我想的那么简单。首先，我需要循环主类别，然后相应地循环所有子级别。我只喜欢显示分配了产品的类别，但是如果子级别包含产品，我当然还需要显示所有父类别。这导致大量查询、连接和条件例程来呈现当前类别。我想知道是否有更有效的结构方法来解决这个问题？你不需要写我的代码我只是想知道可能有什么样的更好的原则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:10:17.893

典型的递归方法是邻接表和多对多表。

典型的非递归方法是多对多祖先表和[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)。

邻接列表是那些包含“parent_id”引用的结构。

递归读取多对多表是您的方法。

祖先表是多对多表，但它们也包含子-祖父连接并指定每个连接的级别。它们提供最大的灵活性和最快的读/写速度。

嵌套集是一种非常不同的方法，它们只允许严格的树结构而不是图。它们的写入成本也更高，但读取非常容易。

同样关于嵌套集，手动维护结构非常困难。您需要实现几个函数并选择何时使用每个函数，因为在子列表末尾插入一个节点需要一个函数 ( `appendNodeTo($parentNode)`)，而在子列表中间插入一个节点需要另一个函数。移动节点取决于天气，节点是终端节点（叶子），或者它是否具有具有特定功能的子节点（分支）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:14:38.833

这不是最有效的方法，但这样你只需要 1 个 sql 请求（查询）

```
 public function get_menu_data()
    {
        $result = mysql_query(" 
            SELECT 
                id, parent, name 
            FROM 
                category 
            ORDER BY 
                parent, name 
        "); 
        //$cat = $this->db->get("category");
        $menuData = array( 
            'items' => array(), 
            'parents' => array() 
        ); 

        while ($menuItem = mysql_fetch_assoc($result)) 
        { 
           $menuData['items'][$menuItem['id']] = $menuItem; 
           $menuData['parents'][$menuItem['parent']][] = $menuItem['id']; 
        } 
        return $menuData;

    }

function buildMenu($parentId, $menuData)
{
    $html = '';
    if (isset($menuData['parents'][$parentId]))
    {
        $html = '<ul>';
        foreach ($menuData['parents'][$parentId] as $itemId)
        {
            $html .= '<li>' . $menuData['items'][$itemId]['name'];
            // find childitems recursively
            $html .= $this -> buildMenu($itemId, $menuData);
            $html .= '</li>';
        }
        $html .= '</ul>';
    }
    return $html;
} 
```

称之为：显示所有类别：

```
buildMenu(0,get_menu_data()); 
```

显示类别 1 的子类别：

```
buildMenu(1,get_menu_data()); 
```

祝你好运，我希望这段代码对你有帮助

# jquery - 如果 jQuery 中只有一个引用可用，我可以直接引用通用选择器吗？

> ID：12347526
> 
> 赞同：1
> 
> 时间：2012-09-10T08:04:52.653
> 
> 标签：jquery, html

所以说这是我整个页面的代码：

```
<html>
  <body>
    <textarea></textarea>
  </body>
</html> 
```

然后我想更新那个 textarea 的内容。我无法向该文本区域添加 id，它必须保持原样。

我的问题是，通常有很多文本区域，我会这样更新它：

```
$('textarea').each(function () {
  $(this).text('foo');
}); 
```

但在这种情况下，只有一个文本区域，我可以这样写：

```
$('textarea').text('foo'); 
```

我只是`.text`用作一个例子。我只是想看看当只有一个特定类型的元素时，上面提到的两段代码是否具有相同的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:11:48.853

无论您拥有多少文本区域，这两段代码都会产生完全相同的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:09:01.530

使用时`text`无需使用`each`，因为它会更改所有选定元素的文本内容。

[http://jsfiddle.net/GhVGP/](http://jsfiddle.net/GhVGP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:13:37.927

是的，它们是等价的。

根据[文档](http://api.jquery.com/text/#text2)：

> 将匹配元素集中每个元素的内容设置为指定的文本。

因此，如果您的集合包含多个元素，则该集合中每个元素的文本都将设置为指定的元素。

因此，`.each()`在这种情况下，使用循环遍历集合是无用的，而且速度也较慢。

* * *

一般来说，jQuery 的所有操作方法都可以对集合的所有元素进行操作。

Setter 对整个集合进行操作：

*   [`addClass`](http://api.jquery.com/addClass/) *将指定的类添加到每个匹配的元素集中。*
*   [`height`](http://api.jquery.com/height/#height2) *设置每个匹配元素的 CSS 高度。*

Getter 对集合的第一个元素进行操作：

*   [`height`](http://api.jquery.com/height/#height1) *获取匹配元素集中第一个元素的当前计算高度。*

[`text`](http://api.jquery.com/text/#text1)(as getter) 有点不同，因为如果它被用作集合上的 getter，它会返回集合中元素的组合文本：

> 获取匹配元素集中每个元素的组合文本内容，包括它们的后代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:22:22.103

您可以在引用`.text`多个元素时使用该方法。setter`.text(string)`影响 jQuery 对象中的所有元素，getter`.text`连接所有元素的文本。还有一个`.text(function(index, text))`, 调用它想要更改的每个元素的函数。 [http://api.jquery.com/text/](http://api.jquery.com/text/)

这同样适用于大多数其他方法：setter 影响所有元素，getter 读取（通常）第一个元素。

您可以随时使用任何功能。如果 jQuery 对象只包含一个元素，那么无论用于获取对象的选择器是否可以引用多个元素，都可以使用访问元素的方法（text、value、css），它们将访问所选的单个元素.

如果你想更加确定选择器只会选择一个元素，你可以使用 :first 伪类 ( `$("textarea:first")`)

顺便说一句，a`textarea`应该被访问`.value(...)`（对`input`s 有效），而不是`.text(...)`（对 s 无效）。

# c# - 使用 MessageBox 在多线程应用程序中显示异常信息

> ID：12347531
> 
> 赞同：1
> 
> 时间：2012-09-10T08:05:07.723
> 
> 标签：c#, multithreading, exception, show, messagebox

您好我正在使用 winform 并尝试使用 MessageBox 进行异常处理。这里奇怪的是，MessageBox 仅在主窗体（下面代码中的“Form1”）关闭后出现。

```
public class Worker {
    /* edited (see below)
    public void doWork() {
        try {
            // do something
            client.Connect(serverAddress);
            stream = client.GetStream();
        }
        catch(Exception e) {
            MessageBox.Show(e.ToString(), 
                "This will not show up until Form1 is closed");
        }
    }
    */
}

public class Form1 {
    /* edited (see below)
     * public void threadProc() {
     *    Worker worker = new Worker();
     *    worker.doWork();
     * }
     */
     void button_Click(object sender, EventArgs e) {
        // create a thread that will end up throwing an exception
        Thread thread = new Thread(threadProc);
        thread.Start();
     }
} 
```

使用 MessageBox 进行异常处理的更好方法是什么？

* * *

...所以我*在 UI 线程中*添加了一些 MessageBox-ing 代码，但问题仍然存在。

```
public class WorkExceptionArgs : EventArgs {
    public Exception e;
    public WorkExceptionArgs (Exception e) { this.e = e; }
}
public partial class Worker1 { // renamed (Worker->Worker1)
    /* (edited) Now Worker1 doesn't trigger any event (see below)
       public event EventHandler<WorkExceptionArgs> workException;
    */
    public void doWork() {
        try {
            // do something
            client.Connect(serverAddress);
            stream = client.GetStream();
        }
        catch(Exception e) {
            /* (edited) suppose Worker1 never throws any exception (see below)
             *  // trigger event that will cause MessageBox-ing by UI thread
             *  workException(this, new WorkExceptionArgs(e));
             */
        }
    }
}
public partial class Form1 {
    public void threadProc() {
       Worker1 worker1 = new Worker();
      /* (edited) Now Worker1 never throws any exception
       * worker.workException += new EventHandler<WorkException>(worker_WorkException);
       */
       worker1.doWork();
       // (added) After doWork() is done, Form1 creates Worker2
       Worker2 w2 = new Worker2(this, this.form2);
       w2.workException += new EventHandlerArgs<WorkExceptionArgs>(form2.worker2_WorkException);
       w2.doSomeOtherWork();
    }
    /* public void worker_WorkException(object sender, WorkExceptionArgs eArg) {
     *   MessageBox.Show(eArg.e.ToString(), "Still not showing");
     * } */
    Form2 form2 = new Form2(); // (added) At first form2 is hidden (see below)
} 
```

* * *

实际上已经有另一种形式和另一种工人。一旦 Worker(Worker1) 与服务器建立连接，Form1 将隐藏 (.Hide())，Form2 显示 (.Show())，并且 Worker2 开始使用 Worker1 建立的连接。

```
public class Worker2 {
    Worker2(Worker1 w1, Form2 frm2) { this.w1=w1; this.frm2=frm2; }
    public Worker1 w1;
    public Form2 frm2;
    public event EventHandler<WorkExceptionArgs> workException;
    public void doSomeOtherWork() { // do some other, using data in Worker 1.
        try { // This will throw an exception
            BinaryFormatter formatter = new BinaryFormatter();
            MyObj mo = (MyObj)formatter.Deserialize(w1.getStream());
        }
        catch(Exception e) {
            workException(this, new WorkExceptionArgs(e));
        }
    }             
}

public class Form2 {
    public Form2(Form1 frm1) { // to switch from frm1 to frm2
        InitializeComponent();
        this.frm1 = frm1;
    }
    public Frm1 frm1 {get;set;}
    public void worker2_WorkException(object sender, WorkExceptionArgs ea) {
       MessageBox.Show(this, ea.e.ToString(), "SHOWS ONLY IF FORM2 IS CLOSED");
    }

}     

public partial class Form1 {
    delegate void switchWindow_Callback();
    public void switchWindow() { this.Hide(); form2.Show(); }
    public void switchWindowCb(object sender, EventArgs e) {
        if(this.InvokeRequired) {
            SwitchWindow_Callback hcb = new SwitchWindow_Callback(switchWindow);
            this.Invoke(hcb, new object[] {});
        }
        else { this.switchWindow(); }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:13:51.907

实际上，我敢打赌 MessageBox 出现在主窗体的*后面*，而您在关闭它之前是看不到它的。

`Form1`让 UI 线程（创建和拥有的那个）执行 MessageBox-ing会好得多。您要么想要制作事件，要么在您的工作人员类中有一个错误回调委托。

但是，`BackgroundWorker`可能值得在这里查看而不是尝试自己动手。假设它是一个致命异常，您可以保存和检索错误状态，并且当线程完成时您会自动调用一个事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:23:38.673

您确实应该锁定 doWork 方法，以便多个线程无法同时访问它，它们需要排队。

查看“加入线程”。想象一下，如果您同时遇到两个异常。你的应用程序会崩溃。锁定将重复复制的代码区域将为您的线程形成一个队列，以访问处理异常的代码区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:21:26.203

正如 lc 所说，您的消息框很可能出现在主窗体后面，因此您只有在主窗体关闭时才能看到它。

我用来处理 Windows 窗体应用程序中未处理异常的模型如下所示：

```
// Switch-off the Windows Forms default handler for unhandled exceptions.
// NB From .NET 4 upwards, this won't work if the process state is corrupted.
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

// Setup event handler to intercept an unhandled exception on a UI thread .
// NB The exception will still terminate the application. 
// But you can show a MessageBox in the event handler and log the exception. 
Application.ThreadException += 
    new ThreadExceptionEventHandler(App_UiThreadException);

// Setup event handler to intercept an unhandled exception on a non-UI thread.
AppDomain.CurrentDomain.UnhandledException += new 
    UnhandledExceptionEventHandler(App_NonUiThreadException);

// Run the application (open main form etc). 
```

第一[行](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.setunhandledexceptionmode%28v=vs.100%29.aspx)表示您希望捕获任何未处理的异常并自己处理它，而不是让 WinForms 基础结构处理它。请注意，从 .NET 4 开始，此设置不适用于破坏进程状态的异常（例如 OutOfMemory）。

如果您在 UI 线程上有未处理的异常，则第二行将触发您创建的名为 *App_UiThreadException* 的过程。这就是你的 MessageBox 代码应该去的地方。

如果您在非 UI 线程上有未处理的异常，最后一行将触发您创建的名为 *App_NonUiThreadException* 的过程。这就是你的 MessageBox 代码应该去的地方。

# ubuntu-10.04 - 如何为 OpenLDAP 服务器启用虚拟 ListView 控件？

> ID：12347536
> 
> 赞同：0
> 
> 时间：2012-09-10T08:05:28.863
> 
> 标签：ubuntu-10.04, openldap, unboundid-ldap-sdk

我正在尝试使用 UnboundID 的 LDAP SDK 来获取 LDAP 服务器上的联系人。我在我的代码中使用 VirtualListView(VLV) 控件和服务器端排序，当我使用组织中配置的 LDAP 服务器进行测试时，此代码运行良好。

但是，我想设置一个本地服务器并向其中添加某些联系人/条目并使用该服务器测试我的代码。为此，我使用了 OpenLDAP 并使用以下链接中的说明在 Ubuntu 10.04 上对其进行了配置：[http ://www.ghacks.net/2010/08/31/set-up-your-ldap-server-on-ubuntu-10- 04/](http://www.ghacks.net/2010/08/31/set-up-your-ldap-server-on-ubuntu-10-04/)

现在，当我尝试获取联系人时，我的代码无法正常工作，因为我设置的服务器不支持 VLV。当我执行一个简单的搜索，即没有任何 VLV 或其他分页技术时，我就能看到结果。这意味着服务器工作正常，但不支持 VLV 控制。

所以我需要知道的是如何为我的服务器启用对 VLV 或任何其他所需控件的支持？

如果有人知道如何实现这一点，请告诉我。大量的谷歌搜索并没有带来任何有希望的结果:(

谢谢和问候， 基兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:27:24.763

问题不在主题范围内，应该在 serverfault.com 上，但您必须加载、启用和配置 SSSVLV 覆盖。

忘掉那个博客和所有随机的互联网博客吧。好好看看[OpenLDAP Admin Guide](http://www.openldap.org/doc)本身，这是您应该开始的地方。我也可以[在这里](http://www.zytrax.com/books/ldap/)推荐一个非常好的参考，但这只是因为我已经广泛使用它，而不仅仅是因为谷歌这么说。

# android - TextView 右侧的 CheckBox

> ID：12347538
> 
> 赞同：2
> 
> 时间：2012-09-10T08:05:46.757
> 
> 标签：android, checkbox

我有一个多行 TextView，在它旁边我想显示一个复选框。问题是如果文本超过 1 行，则不会显示复选框。

到目前为止，我有（没有 id）：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:focusable="true"
    android:gravity="left"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:focusable="true"
        android:gravity="left"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="3dp"
            android:paddingTop="5dp"
            android:singleLine="false"
            android:text="Lorem ipsum dolor sit amet, consectetur adipiscing"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <CheckBox
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:text=""
            android:clickable="false" />

    </LinearLayout>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="3dp"
        android:paddingLeft="3dp"
        android:singleLine="false"
        android:text="Lorem ipsum dolor sit amet, consectetur adipiscing"
        android:textAppearance="?android:attr/textAppearanceSmall" />
</LinearLayout> 
```

这是布局的呈现方式（注意缺少的复选框）：

![缺少复选框](../Images/7b89ec81154cf30cc1a6a2844fa2c0e5.png)

如果我缩短文本，它会正确呈现：

![复选框在那里](../Images/00a78769cf6b3884e63bf02d5a82977b.png)

是否可以在多行 TextView 的右侧添加 CheckBox？

编辑：对不起大家，我问了这个问题后很快就解决了这个问题（通过添加 layout_weight=1），但发布在错误的线程中。我已经接受了建议的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:14:12.937

添加这个`android:layout_weight="1"`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:focusable="true"
    android:gravity="left"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:focusable="true"
        android:gravity="left"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="3dp"
            android:paddingTop="5dp"
            android:singleLine="false"
            android:text="Lorem ipsum dolor sit amet, consectetur adipiscing"
            android:textAppearance="?android:attr/textAppearanceLarge" 
            android:layout_weight="1" />

        <CheckBox
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:text=""
            android:clickable="false"
            />

    </LinearLayout>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="3dp"
        android:paddingLeft="3dp"
        android:singleLine="false"
        android:text="Lorem ipsum dolor sit amet, consectetur adipiscing"
        android:textAppearance="?android:attr/textAppearanceSmall" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:09:04.540

尝试在线性布局中使用相对布局，而不是在线性布局中使用线性布局，并使用[相对布局参数](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:11:17.550

尝试给`CheckBox`一个`Weight`大于的值`TextView`（将其设置`width`为`0dip`并给它更高的值`Weight`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T08:12:33.173

您可以通过使用权重来做到这一点..尝试以下代码

请尝试根据您的要求更改重量

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:focusable="true"
    android:gravity="left"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:paddingLeft="3dp"
        android:paddingTop="5dp"
        android:singleLine="false"
        android:text="Lorem ipsum dolor sit amet, consectetur adipiscing"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <CheckBox
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:focusable="false"
        android:text=""
        android:clickable="false" />

</LinearLayout>

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="3dp"
    android:paddingLeft="3dp"
    android:singleLine="false"
    android:text="Lorem ipsum dolor sit amet, consectetur adipiscing"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T08:34:23.403

尝试在 LinearLayout 中使用以下内容

```
<TextView android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="textfield 1-1"></TextView>
<CheckBox android:id="@+id/CheckBox01" android:layout_width="wrap_content" android:layout_height="wrap_content"></CheckBox> 
```

复制自[http://huuah.com/using-tablelayout-on-android/](http://huuah.com/using-tablelayout-on-android/)

# ruby-on-rails-3 - 如何将尺寸参数传递给载波助手？

> ID：12347539
> 
> 赞同：0
> 
> 时间：2012-09-10T08:05:46.247
> 
> 标签：ruby-on-rails-3, carrierwave

我试图制作 1 个全局函数来显示不同尺寸的载波图像。问题是将方法调用中的大小变量传递给carrierwave helper，如下所示：

def get_avatar(id, size)

```
@profile = User.find(id).profile rescue nil
  image_tag @profile.photos.first.file_url(:img_120x145)
rescue
  image_tag ("/assets/avatars/img_#{size}.png") 
```

结尾

我尝试了各种方法，但无法将 **size** var 传递给 @profile.photos.first_url(size here)。

应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:53:33.893

这是最近对我有用的东西。

`<% image_tag @profile.photos.first.url(size) %>`

# ruby-on-rails - 带有空查询的初始化查询 (.where / .order)

> ID：12347541
> 
> 赞同：0
> 
> 时间：2012-09-10T08:05:51.410
> 
> 标签：ruby-on-rails, activerecord

我正在尝试做类似的事情：

```
if filter_1
  @field = @field.where()
else
  @field = @field.where()
end

if filter_2
  @field = @field.order()
end

etc. 
```

但是如何`@field`使用空查询进行初始化？我试过`@field = Field.all`了，但这给出了一个数组，所以不允许链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:08:22.817

尝试`scoped`模型类，例如

```
@fields =  Field.scoped
@fields = @fields.where("your conditions") if filter_1
@fields = @fiels.order("your conditions") if filter_2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:16:28.380

第一次初始化@field实例变量，请尝试引用类Field，即

过滤器1：`@field = Field.where(...)`

之后，如果您需要继续添加更多过滤器，您可以根据需要多次引用您的变量字段。

过滤器2向前：`@field = @field.where(...)`

由于 Filter1 将返回一个活动的 Record 关系，您可以在其上嵌套更多的条件子句。也不必担心性能问题，因为 SQL 只会在实际需要时生成和处理。（延迟加载）

如果您在过滤器的末尾添加@field.to_sql，您将能够看到所有 where 子句都方便地嵌套在一个 SQL 语句中。

另外，我建议您阅读[Active Record Query Interface](http://guides.rubyonrails.org/active_record_querying.html)

编辑

创建一个方法 get_field。并使用它来添加过滤结果。

```
def get_field(field)  
  @field.is_a?(ActiveRecord::Relation) ? Field : field
end

get_field(@field).where(....) 
get_field(@field).where(....) 
```

# java - 返回一个 ArrayList 以使用记录器接口摆动

> ID：12347550
> 
> 赞同：0
> 
> 时间：2012-09-10T08:06:58.443
> 
> 标签：java, swing, logging, jtextarea

我正在使用此答案中的代码来提供日志记录功能，并且效果很好！谢谢古斯塔夫。

[从不同的地方向摇摆 JTextArea 发送消息](https://stackoverflow.com/questions/4297729/sending-messages-to-a-swing-jtextarea-from-different-places)

我想使用这种方法并添加函数： writeEntry(String, String) 来写入我希望可以从 swing 访问的 ArrayList；即，单击“显示”并让它将此单词对列表写入 JText 元素。

因此在 gustafc 的代码中添加了一些内容。

界面：

```
package com.example.logging;
public interface SimpleActivityLogger {
    void logAction(String message);
    void writeEntry(String s1); //*** I added this ***
} 
```

根据 gustafc 的示例将其传递给另一个类：

```
public class SimpleComponentLogger implements SimpleActivityLogger{
    private JTextComponent target;
    private ArrayList data;

    public SimpleComponentLogger(JTextComponent target, ArrayList data){
        this.target = target;
        this.data = data;
    }

    public void logAction(final String message){
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                target.setText(String.format("%s%s%n", new Object[]{target.getText(), message}));
            }
        });
    }

    public void writeEntry(String s1){
        data.add(s1);
        System.out.println("data array length: " + data.size());
    }
} 
```

然后进行实施：

```
// this originally extended NotesThread, 
// but I assume you won't have that on your system
public class LookupIterator3 extends Thread {
private SimpleActivityLogger logger;

// Constructor that passes logger instance
public LookupIterator3(SimpleActivityLogger logger){
    this.logger = logger;
}

public void doLookup(){
    this.start();
}

public void run()  {
    String[] words = {"the", "quick", "smart", "fox", "jumps", "over", "the", "lazy", "dog"};
    for(int i=0; i<words.length; i++){
        synchronized(words){
        try{
            logger.logAction(words[i]);
            words.wait(500);
        }
        catch(InterruptedException ie){ie.printStackTrace();}
        }
        logger.writeEntry(words[i]);
    }
}
} 
```

但是，当我尝试从 swing 访问 ArrayList 时，它返回 size()=0。这是一个很大的摆动，但你应该可以复制和粘贴它：

```
public class MySwingTest extends JFrame {
    private static final long serialVersionUID = 1L;
    private JTextField filename = new JTextField();
    private JTextField dir = new JTextField();

    private JTextPane output, answersPane;
    private JScrollPane scroller;
    private SimpleComponentLogger logger;
    private ArrayList answer;

    public MySwingTest() {
  JMenu fileMenu;
  JMenuBar menuBar;
  JMenuItem menuOpen, menuExit;

  JButton answerButton = new JButton("show answers");
  answerButton.addActionListener(new MyListener());

  menuBar = new JMenuBar();
  fileMenu = new JMenu("File");
  menuBar.add(fileMenu);
  menuOpen = new JMenuItem("open file");
  menuExit = new JMenuItem("exit");

  answer = new ArrayList();
  output = new JTextPane();
  logger = new SimpleComponentLogger(output, answer);
  scroller = new JScrollPane(output, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, 
                  JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
  output.setEditable(false);
  answer = new ArrayList();
  answersPane = new JTextPane();
  answersPane.setSize(100, 200);
  answersPane.setEditable(false);

  fileMenu.add(menuOpen);
  fileMenu.add(menuExit);

  menuOpen.addActionListener(new MyListener());
  menuExit.addActionListener(new MyListener());

  JPanel p = new JPanel();
  p.setLayout(new GridLayout(2, 1));
  p.add(filename);
  p.add(dir);

  Container cp = getContentPane();
  cp.add(menuBar,BorderLayout.NORTH);
  cp.add(p);
  cp.add(scroller, BorderLayout.CENTER);
  cp.add(answersPane, BorderLayout.WEST);
  cp.add(answerButton, BorderLayout.SOUTH);

  dir.setEditable(false);
    filename.setEditable(false);
}

// Inner class listener  
class MyListener implements ActionListener {
public void actionPerformed(ActionEvent e) {
            String eventCommand = e.getActionCommand();
            if(eventCommand.equals("exit")){
                System.exit(0);
            }
            if(eventCommand.equals("show answers")){
                String entry = (String)answer.get(0);
                answersPane.setText(entry);         
            }
            else {
                LookupIterator3 lu3 = new LookupIterator3(logger);
                lu3.doLookup();
            }
        }
    }

    public static void main(String[] args) {
        run(new MySwingTest(), 450, 600);
    }

    public static void run(JFrame frame, int width, int height) {
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(width, height);
        frame.setVisible(true);
    }
} 
```

很抱歉这个问题很长，但这让我很头疼！有什么建议么？（我知道我会因为写一个长的 qn 而变得衣衫褴褛，但我不知道我可以遗漏什么）

好的。长篇编辑完成。打开那个婴儿并从菜单中选择“打开文件”。它将在没有文件选择器的情况下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:53:21.887

问题实际上很简单：在您的`MySwingTest`构造函数中，您有两倍的行：

```
answer = new ArrayList(); 
```

在创建记录器之前和之后一次。只需放下第二个电话，它应该可以正常工作。

注意：在您的实例之间共享 ArrayList 确实是一种不好的做法（责任分散在几个类中）。如果您只让您的记录器直接创建自己的 ArrayList 并使用 getter 提供对它的访问，那将会简单得多。更好的是，它可以直接提供对其包含的对象的访问（防止其他实例修改 ArrayList 的内容的可能性）。

注意2：考虑使用接口声明而不是类声明：使用`List`代替`ArrayList`以减少耦合。

注 3：我强烈建议您输入您的收藏：`List<String> answer = new ArrayList<String>();`

# python - 循环遍历一组 Python 数字或一组字母是否更快？

> ID：12347551
> 
> 赞同：0
> 
> 时间：2012-09-10T08:07:02.193
> 
> 标签：python, algorithm, list, set

考虑到每个集合的长度完全相同并且每个集合中的每个项目的长度相同，循环遍历`set`数字 Python 或字母 Python 是否更快？`set`为什么？

我认为会有所不同，因为字母 [a-zA-Z] 比数字 [0-9] 具有更多可能的字符，因此会更加“随机”并且可能在一定程度上影响散列。

```
numbers = set([00000,00001,00002,00003,00004,00005, ... 99999])

letters = set(['aaaaa','aaaab','aaaac','aaaad', ... 'aaabZZ']) # this is just an example, it does not actually end here

for item in numbers:
  do_something()

for item in letters:
  do_something() 
```

其中 len（数字）== len（字母）

**更新**：我对 Python 的特定散列算法以及此实现在幕后发生的事情感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:23:22.040

Python 可能有一些特定的实现细节，我不知道我在这里的一般论点很混乱，但是：

*   *创建*字符串集可能会比创建整数集慢一点（其他条件相同），因为对字符串的散列操作需要一些（小）时间来运行，而对整数的散列操作是微不足道的。
*   *迭代*一个集合不执行任何散列操作，因此散列的时间在那里无关紧要。
*   迭代一个集合取决于集合中元素的数量以及支持该集合的哈希表中的桶数。所以散列函数的分布只有在它导致散列表增加桶数时才有意义。对于一些不可能的哈希表实现（因为桶计数仅在负载因子超过阈值时增加，而不仅仅是因为冲突）。当有很多冲突时，其他哈希表实现会调整大小。我不知道哪个 CPython 是。
*   无论如何，您给出的一组整数的特定示例将生成分布良好的哈希值。
*   有一种方法可以找出在 Python 中哪个更快，即`timeit`使用您关心的数据的实际示例。猜测通常是浪费时间。

你可以看到 Python 的散列算法的结果，如下所示：

```
>>> foo = 3
>>> foo.__hash__()
3
>>> foo = 1856348
>>> foo.__hash__()
1856348
>>> foo = "\x00"
>>> foo.__hash__()
1
>>> foo = "\x01"
>>> foo.__hash__()
128000384
>>> foo = "\x02"
>>> foo.__hash__()
256000771 
```

所以在我的 Python 副本上，这些哈希结果与这些[报告的 Python 哈希算法](http://effbot.org/zone/python-hash.htm)相匹配。与 CPython 一样，您可以查看源代码以确认算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:19:40.563

你不能知道，直到你配置文件！这是一些粗略的数据：

```
% python -mtimeit -s 'import string;import random;s=set("".join(random.sample(string.printable, 5))for _ in range(10000))' 'for foo in s: bar=foo'
1000 loops, best of 3: 376 usec per loop

% python -mtimeit -s 'import random;s=set(int("".join(map(str,random.sample(range(10),5))))for _ in range(10000))' 'for foo in s: bar=foo'                     
1000 loops, best of 3: 322 usec per loop 
```

看起来你是对的，有细微的差别，但你需要做更多的测试才能自信地说出很多。

# javascript - 超时功能的性能

> ID：12347554
> 
> 赞同：0
> 
> 时间：2012-09-10T08:07:12.327
> 
> 标签：javascript, jquery, performance, settimeout, zepto

我有一个 JS 问题，我必须检查水平 ul 以了解该列表宽度的 li 何时超过最大宽度，然后减少这些元素的侧边距以使所有 li 适合。

问题是添加 li 时我无法触发事件，仅仅是因为我无法控制将 li 添加到 ul 的所有代码。

所以我的选择是每秒循环检查 li 的总宽度几次，如下所示：

```
function UpdateNavBar(initialX) { 
        var w = 0;
        var maxW = 100;
        var visibleLis = $(".navigationbar ul li.menuitem");
        $.each(visibleLis, function (i, e) {
            return w += $(e).width();
        });
        if (w >= maxW) {
            --xPadding;
            $(".navigationbar ul li.menuitem a").css({ "padding-left": xPadding, "padding-right": xPadding });

        }

        w = 0;
        setTimeout(UpdateNavBar, 100, initialX);
    }
    var xPadding = parseInt($(".navigationbar ul li.menuitem a").css("padding-left").replace("px", ""));
    UpdateNavBar(xPadding);​ 
```

我的问题是：还有其他明显的方法可以实现我所缺少的吗？像这样的功能将如何影响网站的性能，请记住它旨在在各种设备上运行？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:24:17.487

em，由于您不知道何时添加 li，因此 settimeout 循环是一个不错的方法。

但你可以做一些优化。

settimeout 会为 ui 线程添加一个处理程序，因此如果处理程序完成执行的时间足够短，它将导致更好的性能。

所以，我的选择就像上面的代码，也许你可以做得更好

```
var listLength; 
function UpdateNavBar(initialX) { 
    var w = 0;
    var maxW = 100;
    var visibleLis = $(".navigationbar ul li.menuitem");
    //make a momorize and if no change happen, do nothing
    if(length === visibleLis.length){
        return false;
    }else{
        listLength = visibleLis.length;
    }
    $.each(visibleLis, function (i, e) {
        return w += $(e).width();
    });
    if (w >= maxW) {
        --xPadding;
        $(".navigationbar ul li.menuitem a").css({ "padding-left": xPadding, "padding-right": xPadding });

    }

    w = 0;
    setTimeout(UpdateNavBar, 100, initialX);
}
var xPadding = parseInt($(".navigationbar ul li.menuitem a").css("padding-left").replace("px", ""));
UpdateNavBar(xPadding);​ 
```

# javascript - 更改特定表格的所有颜色 onclick

> ID：12347556
> 
> 赞同：5
> 
> 时间：2012-09-10T08:07:20.687
> 
> 标签：javascript, jquery, html, css

我使用下面的代码来切换 td 颜色

```
 <html>
    <head>
       <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
       <script>
          $(function(){
             $("td").click(function(){
             $(this).addClass("on").parent().siblings("tr").find("td").removeClass("on");
             });
          });
       </script>
       <style>
          article, aside, figure, footer, header, hgroup, 
          menu, nav, section { display: block; }
          .on { background-color:red; color:#ffffff; }
       </style>
    </head>
    <body>

    <table class="mytable" border=1>
       <tbody>
       <tr>
          <td>Hello World</td>
          <td>Hello World1</td>
          <td>Hello World2</td>
       </tr>
       <tr>
          <td>Hello World</td>
          <td>Hello World1</td>
          <td>Hello World2</td>
       </tr>
       <tr>
          <td>Hello World</td>
          <td>Hello World1</td>
          <td>Hello World2</td>
       </tr>
       </tbody>
    </table>

    </body>
    </html> 
```

上面的代码通过切换 td 颜色可以正常工作，请在[此处查看演示](http://jsfiddle.net/hEvcZ/1/)

但现在我需要做三件事，

1.  上面的代码适用于所有 tds，我需要它只适用于表类“mytable”的最后一列，
2.  我需要添加一个按钮，单击该按钮应将所有 td 的颜色更改为表类“mytable”的“白色”
3.  当我们选择特定的单元格时，完整的行应该是红色的。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:27:05.843

***HTML***

```
 <table class="mytable" border=1>
    <tbody>
      <tr>
        <td>Hello World</td>
        <td>Hello World1</td>
        <td>Hello World2</td>
      </tr>
      <tr>
        <td>Hello World</td>
        <td>Hello World1</td>
        <td>Hello World2</td>
      </tr>
      <tr>
        <td>Hello World</td>
        <td>Hello World1</td>
        <td>Hello World2</td>
      </tr>
    </tbody>
  </table>

<button id="change-color">Change Color</button> 
```

***​jQuery***

 **```
$(function() {
    $(".mytable tr td:last-child").click(function() {
        $(this).addClass("on").parent().siblings("tr").find("td.on").removeClass("on");
    })

    $('#change-color').click(function() {
        $('.mytable td.on').removeClass('on');
    });
});​ 
```

*[演示](http://jsfiddle.net/hEvcZ/16/)*

### 根据评论

```
$(function() {
    $(".mytable tr td:last-child").click(function() {
        $('td.on').removeClass('on');
        $(this).parent().find('td').addClass("on");
    })

    $('#change-color').click(function() {
        $('.mytable td.on').removeClass('on');
    });
});​ 
```

***[演示](http://jsfiddle.net/hEvcZ/20/)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T08:10:48.337

只需将您的 jQuery 选择器更改为`td:last-child`

```
 $(function(){
          $("td:last-child").click(function(){ //this is the changed part
    $(this).addClass("on").parent().siblings("tr").find("td").removeClass("on");
  });
}); 
```

[http://jsfiddle.net/Kyle_Sevenoaks/hEvcZ/2/](http://jsfiddle.net/Kyle_Sevenoaks/hEvcZ/2/)

* * *

对于第二个问题，您需要 HTML 和 jQuery：

HTML：

```
<button id="tableButton">White</button> 
```

jQuery：

```
$("button#tableButton").click( function() {
    $("table.mytable *").css({"background":"#fff", "color":"#000"});
}); 
```

这是一种方法，您当然可以再次选择带有最后一个子选择器的 td，但是这段代码是一个很好的起点:)

[http://jsfiddle.net/Kyle_Sevenoaks/hEvcZ/3/](http://jsfiddle.net/Kyle_Sevenoaks/hEvcZ/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:21:38.037

***HTML*** //将以下代码添加到html中

```
<input type="submit" value="submit" id="button"> 
```

***JS代码***

```
$(function(){
    $('td:last-child').click(function(){
  $(this).addClass("on").parent().siblings("tr").find("td").removeClass("on");
});
});

$('#button').on('click', function(){
   $('.mytable').find('td').css({'background':'#FFF', 'color':'#000'})
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:34:22.950

现在检查这个

```
 $(function(){
      $("tr:last-child td").click(function(){
          $("tr:last-child td").addClass("on");
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T08:58:01.077

对于你的第二个问题

```
$("#Button_for_color").click( function() {
     $("table .mytable").css({"background":"black", "color":"white"});
}); 
```

首先我不确定，但它就像

```
$(function(){
      $("td:last-child").click(function(){
       //You can play here
 }); 
```

希望第二个也可以

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T09:05:15.783

对于你的第三个问题：

```
 $(function(){
   $("td").click(function(){
   $("td").removeClass("on");
$(this).addClass("on").parent().siblings("tr").find("td").removeClass("on");
  });
}); 
```**

# build - Visual Studio 2012 引入的“无法更新项目引用”错误

> ID：12347559
> 
> 赞同：3
> 
> 时间：2012-09-10T08:07:30.717
> 
> 标签：build, build-process, visual-studio-2012

我有一个命令行版本，它在 Visual Studio 2010 中运行良好。

我现在正在使用 Visual Studio 2012 尝试相同的解决方案。

当我通过命令行构建它时：

```
devenv MediaPlayer.sln /build "Release|Any CPU" 
```

我在网站上遇到了一堆错误：

> 37>------ 构建开始：项目：C:...\Web\，配置：调试任何 CPU ------
> 
> 37>无法更新项目引用''。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。无法更新项目引用“”。源项目不可用。验证网站

但后来我在 Visual Studio 2012 中打开了相同的解决方案，并构建它。它建立。

然后我通过命令行运行相同的构建，它构建。

所以我签入它，让构建过程将它提取到构建目录中，我得到了相同的错误。

在这一点上，我很困惑下一步该做什么。任何指针？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T04:48:12.530

当 Visual Studio 2012 构建输出显示

> 无法更新项目参考

它实际上是在说

> 出了点问题，你知道吗？
> 
> 我不会告诉你它是什么！
> 
> 哇哈哈哈哈哈哈哈哈哈哈哈哈

经过一整天的搜索，它归结为第三方库 (Castle.Windsor.dll) 不在 .bin 目录中。我不知道为什么这个问题出现在 Visual Studio 2012 而不是 Visual Studio 2010。我的猜测是在 Visual Studio 2010 中，这是自动复制的，因为它是网站所依赖的另一个项目的依赖项。

我为and手动创建了一个`.refresh`文件，现在它构建了。`Castle.Windsor.dll``Castle.Core.dll`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T14:05:38.517

尝试在 VS 2012 中构建解决方案时，我也遇到了同样的错误。

我有一个从 VS 2010 升级到 VS 2012 的解决方案，然后开始删除一些长期失效的项目。VS 2012 对此删除感到“困惑”，并认为解决方案中的网站项目需要对 '' 的引用，但该引用不可用。

为了解决这个问题，我撤消了上述对解决方案的更改，在 VS 2010 中打开它，删除了长期失效的项目并成功构建，然后关闭了 VS 2010。然后我能够在 VS 2012 中打开/更新解决方案并开始工作没有问题。

# java - 仅在几秒钟内尝试 Internet 连接

> ID：12347560
> 
> 赞同：2
> 
> 时间：2012-09-10T08:07:33.403
> 
> 标签：java, android, multithreading, concurrency

我正在尝试连接到必须获取数据的互联网，如果连接时间超过 5 秒，我必须完成该过程并继续离线工作。
一切正常，有时`return`互联网不可用大约需要 10 秒，现在我必须`xml == null;`在时间超过时间限制时返回，
**我不想在异步任务中执行此操作**

```
 public String getUrlData(String url) {
    String xml = null;

    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);
    System.out.println("waiting");
    HttpResponse httpResponse;

    try {
        // start the timer here

        httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

        // check if the timer has exceeded by "if else"
        // move to "return xml;" Manually when exceeds 5sec, but how?

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return xml;

} 
```

[此答案](https://stackoverflow.com/questions/12347560/try-internet-connectivity-only-for-few-seconds#12347603)后编辑的代码

```
public String getUrlData(String url) {
    String xml = null;

    final int TIMEOUT_MILLISEC = 5000; // 5 seconds

    HttpParams httpParams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
    HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);

    DefaultHttpClient httpClient = new DefaultHttpClient(httpParams);
    HttpPost httpPost = new HttpPost(url);
    System.out.println("waiting");
    HttpResponse httpResponse;

    try {
        // start the timer here
        System.out.println("Started");
        httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("Ended");
    return xml;

} 
```

LogCat 在这里 >> [20 秒](http://dl.dropbox.com/u/40690073/logcat.txt)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T08:10:16.460

您需要做的就是为您的连接定义一个超时限制。例如：

```
final int TIMEOUT_MILLISEC = 5000;  // 5 seconds

HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);

HttpClient httpClient = new DefaultHttpClient(httpParams); 
```

然后，`httpClient`以与使用它相同的方式使用它。

* * *

**编辑**

```
public String getUrlData(String url) {
String xml = null;

final int TIMEOUT_MILLISEC = 5000;  // 5 seconds

HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParams);
HttpPost httpPost = new HttpPost(url);
System.out.println("waiting");
HttpResponse httpResponse;

try {
    // start the timer here

    httpResponse = httpClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();
    xml = EntityUtils.toString(httpEntity);

    // check if the timer has exceeded by "if else"
    // move to "return xml;" Manually when exceeds 5sec, but how?

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
return xml;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:10:43.180

这个怎么样：

```
Thread thread = new Thread() {
  @Override
  public void run() {
    // do the downloading thing..
  }
};
thread.start();
thread.join(5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:09:24.710

这只是一个想法，但您可以设置一个延迟的可运行文件，并在 5 秒后检查文件是否有任何大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:11:19.073

```
 HttpParams params = new BasicHttpParams();

    // Turn off stale checking.  Our connections break all the time anyway,
    // and it's not worth it to pay the penalty of checking every time.
    HttpConnectionParams.setStaleCheckingEnabled(params, false);

    HttpConnectionParams.setConnectionTimeout(params, SOCKET_OPERATION_TIMEOUT);
    HttpConnectionParams.setSoTimeout(params, SOCKET_OPERATION_TIMEOUT);
    HttpConnectionParams.setSocketBufferSize(params, 8192);

    // Don't handle redirects -- return them to the caller.  Our code
    // often wants to re-POST after a redirect, which we must do ourselves.
    HttpClientParams.setRedirecting(params, false);

    // Use a session cache for SSL sockets
    SSLSessionCache sessionCache = context == null ? null : new SSLSessionCache(context);

    // Set the specified user agent and register standard protocols.
    HttpProtocolParams.setUserAgent(params, userAgent);
    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http",
            PlainSocketFactory.getSocketFactory(), 80));
    schemeRegistry.register(new Scheme("https",
            SSLCertificateSocketFactory.getHttpSocketFactory(
            SOCKET_OPERATION_TIMEOUT, sessionCache), 443));

    ClientConnectionManager manager =
            new ThreadSafeClientConnManager(params, schemeRegistry);

    // We use a factory method to modify superclass initialization
    // parameters without the funny call-a-static-method dance.
    return new AndroidHttpClient(manager, params); 
```

根据您的需要更改 SOCKET_OPERATION_TIMEOUT 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T13:51:34.233

此代码可以帮助您

上一个答案中的这段代码是好的

```
final int TIMEOUT_MILLISEC = 5000;  // 5 seconds

HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);

HttpClient httpClient = new DefaultHttpClient(httpParams); 
```

只有当您尝试执行您的请求时，您才需要关心另外 3 个异常 SocketTimeoutException、UnknownHostException、ConnectTimeoutException

所以也要抓住这 3 个例外。

# javascript - 在 Jquery/Javascript 中使用多个 OR (||) 运算符时如何设置变量？

> ID：12347570
> 
> 赞同：2
> 
> 时间：2012-09-10T08:08:11.390
> 
> 标签：javascript, jquery, operators, operator-precedence

我无法理解`||`在 Jquery/Javascript 中执行 an 的顺序。

如果我有这个：

```
 someVar = $el.attr("one") || options.two || "three"; 
```

当两者都未定义时，它设置`someVar`为“三” 。`$el.attr("one")``options.two`

我需要在此语句中添加另一个条件，如下所示：

```
 someVar = $el.attr("one") || options.two || options.extra == "true" ? undefined : "three"; 
```

所以这应该说：

**如果两者都没有定义`'$el.attr("one")'`或`'options.two'`，则检查是否`'options.extra == true'`，如果为真，则设置为`'undefined'`，否则设置为`'three'`。**

`undefined`但是，即使我设置了，我也总是得到`$el.attr("one")`，我不明白为什么？

谁能告诉我我的逻辑有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T08:09:38.067

我认为你必须加上一些括号：

```
someVar = $el.attr("one") || options.two || (options.extra == "true" ? undefined : "three"); 
```

实际上，您自己的代码被读作：

```
someVar = ($el.attr("one") || options.two || options.extra == "true") ? undefined : "three"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:14:51.093

原因是它`? :`的绑定比`||`最后评估的要弱。这和你写的一样：

```
( $el.attr("one") || options.two || options.extra == "true" ) ? undefined : "three"; 
```

这总是会产生未定义的，因为第一个表达式总是为真（因为你设置了`$el.attr("one")`）

这就是为什么你必须采取parens来解决这个问题：

```
$el.attr("one") || options.two || (options.extra == "true" ? undefined : "three"); 
```

检查[运算符优先级表](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)，在这种情况下它会派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:59:06.550

仅使用逻辑运算符编写它的方法是

```
 someVar = $el.attr("one") || options.two || options.extra != "true" && "three" || undefined; 
```

...并不是说我会在实际代码中使用它。（我可能也不会将逻辑运算符与条件运算符混合。）

# redis - 按 Redis 中的元素数量对集合进行排序

> ID：12347578
> 
> 赞同：4
> 
> 时间：2012-09-10T08:08:41.340
> 
> 标签：redis

我有一个包含多个集合的 Redis 数据库，所有集合都由一个通用键模式标识，比如说“myset:”。

有没有办法从命令行客户端按我所有的集合包含的元素数量对它们进行排序并返回该信息？据我所知， SORT 命令只需要单个键。

我知道我可以用一种编程语言很容易地做到这一点，但我更喜欢能够做到这一点，而不必在服务器上安装任何驱动程序、编程环境等。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:19:02.650

不，没有简单的技巧可以做到这一点。

Redis 是一个存储，而不是真正的数据库管理系统。它不支持查询语言。如果您需要检索一些数据，那么您必须预测访问路径并相应地设计数据结构。

例如，在您的示例中，您可以在从您感兴趣的集合中添加/删除项目时维护一个 zset。在这个 zset 中，值将是集合的键，而分数是集合的基数。

按等级检索 zset 的内容将为您提供按基数排序的集合。

如果您没有计划此访问路径并且仍然需要数据，那么您将别无选择，只能使用编程语言。如果您无法安装任何 Redis 驱动程序，那么您可以使用 Redis 转储文件（由 BGSAVE 命令生成），将该文件下载到另一个盒子，然后使用来自 Sripathi Krishnan 的以下包来解析它并计算您的统计信息要求。

[https://github.com/sripathikrishnan/redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T15:31:36.480

**警告：**此答案中的方法并非作为通用解决方案 - 请记住，[`keys`](http://redis.io/commands/keys)在生产环境中不鼓励使用该命令。

也就是说，这是一个解决方案，它将输出集合名称，后跟它的长度（基数），按基数排序。

```
# Capture the names of the keys (sets)
KEYS=$(redis-cli keys 'myset:*')

# Paste each line from the key names with the output of `redis-cli scard key`
# and sort on the second key - the size - in reverse

paste <(echo "$KEYS") <(echo "$KEYS" | sed 's/^/scard /' | redis-cli) | sort -k2 -r -n 
```

注意`paste`上面命令的使用。我指望按`redis-cli`顺序将结果发送给我，我很确定它会这样做。所以`paste`将从 redis 输出中取一个名称`$KEYS`和一个值，并将它们输出在一行上。

# python - savetxt 到文件给出错误

> ID：12347579
> 
> 赞同：1
> 
> 时间：2012-09-10T08:08:44.043
> 
> 标签：python, numpy

这可能有一个令人尴尬的简单答案，但我不确定它是什么。

在我的 python 代码中，有一部分我想将一个数组（称为“stokes_columns”，其中充满了浮点数）保存到一个文本文件中。

我用以下方法做得很好：

```
np.savetxt('../all_pulsars_1400list/%s_1400list.txt' % pname,stokes_columns, delimiter='\t') 
```

我收到的错误消息说：

> 没有这样的文件或目录：'~/all_pulsars_1400list/J0543_1400list.txt'

其中 J0543 是用于“%s”的第一个变量

但是 - 我不明白，因为当然没有名为那个的文件 - 那是我要创建的文件。

我已经仔细检查了路径并且它存在。

有什么明显的我做错了吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:13:34.530

您需要将路径扩展到绝对路径，如下所示：

```
>>> import os

>>> os.path.expanduser('~/all_pulsars_1400list/J0543_1400list.txt')
'home/xxx/all_pulsars_1400list/J0543_1400list.txt' 
```

# android - Android：如何以编程方式获取 GPS 的原始数据？（不是 js 或 html5 方式）

> ID：12347582
> 
> 赞同：1
> 
> 时间：2012-09-10T08:08:57.567
> 
> 标签：android, geolocation, gps

我正在实现我的应用程序，它可以为用户获取位置。但是，我发现 LocationManager 并不总是适用于所有设备，你知道，有很多不同的 Android 设备。然后我正在考虑获取原始 gps 数据并将其发送到位置网络服务以获取位置会更好。

在环顾四周之后，我没有得到一个强大的解决方案，有什么想法吗？我真的很好奇市场上的一些 GPS 应用程序如何在每台设备上运行。

**代码片段**

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
MyLocationListener locationListener = new MyLocationListener(locationManager);
locationListener.start(); 
```

听众，

```
public class MyLocationListener implements LocationListener{

public static int PERMISSION_DENIED = 1;
public static int POSITION_UNAVAILABLE = 2;
public static int TIMEOUT = 3;

protected LocationManager locationManager;
protected boolean running = false;
public MyLocationListener(LocationManager locationManager )
{
    this.locationManager = locationManager;
}

public void onProviderDisabled(String provider) {
    Log.d(TAG, "Location provider '" + provider + "' disabled.");
}

public void onProviderEnabled(String provider) {
    Log.d(TAG, "Location provider "+ provider + " has been enabled");
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    Log.d(TAG, "The status of the provider " + provider + " has changed");
    if (status == 0) {
        Log.d(TAG, provider + " is OUT OF SERVICE");
    }
    else if (status == 1) {
        Log.d(TAG, provider + " is TEMPORARILY_UNAVAILABLE");
    }
    else {
        Log.d(TAG, provider + " is AVAILABLE");
    }
}

public void onLocationChanged(Location location) {
    Log.d(TAG, "The location has been updated!");
    Log.d(TAG, "latitude = "+location.getLatitude()+" altitude = "+location.getAltitude());
}

public void start() {

    if (!this.running) {
        if (this.locationManager.getProvider(LocationManager.GPS_PROVIDER) != null) {
            this.running = true;
            Log.d(TAG,"using gps");
            this.locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 600000, 0, this);
        } else {
              Log.d(TAG, "GPS provider is not available.");
        }
    }

    if (!this.running) {
        if (this.locationManager.getProvider(LocationManager.NETWORK_PROVIDER) != null) {
            this.running = true;
            Log.d(TAG,"using network");
            this.locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 600000, 10, this);
        } else {
           Log.d(TAG, "Network provider is not available.");
        }
    }
}

private void stop() {
    if (this.running) {
        this.locationManager.removeUpdates(this);
        this.running = false;
    }
}

/**
 * Destroy listener.
 */
public void destroy() {
    this.stop();
} 
```

有时， onStatusChanged 什么也得不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:16:31.447

[`LocationManager`](http://developer.android.com/reference/android/location/LocationManager.html)是唯一的方法。所有设备都有 Android API - 并非所有设备都有内部 GPS 模块。但是您也可以使用它来检查它`LocationManager`。

# c# - 如何在 C# 中从纯文本（或字符串）创建 RTF？

> ID：12347587
> 
> 赞同：10
> 
> 时间：2012-09-10T08:09:12.997
> 
> 标签：c#, string, rtf

谁能帮我从 C# 中的字符串创建 RTF？

我将所有格式（粗体、斜体等）保存在自定义类中。

杰瑞

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T08:12:41.230

作为最简单的选择，您可以在 winforms 应用程序中使用 RichTextBoxControl。

```
richTextBox1.SaveFile(@"C:\temp\test.rtf", RichTextBoxStreamType.RichText); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T08:12:37.440

我会使用外部库而不是自己编写代码。检查这些项目：

*   [http://sourceforge.net/projects/netrtfwriter/](http://sourceforge.net/projects/netrtfwriter/)
*   [http://www.codeproject.com/Articles/11306/NRTFTTree-A-class-library-for-RTF-processing-in-C](http://www.codeproject.com/Articles/11306/NRTFTree-A-class-library-for-RTF-processing-in-C)

您还可以使用[RichTextBox 控件的 Rtf 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.rtf.aspx)（如果您的用户正在此类控件中输入数据）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-06T18:27:35.913

我知道我是 NECRO 一个老问题，但无论如何，这是我的建议：

```
//This Instances a new RichTextBox Control and uses it so save the Text
private void Save_RTF_file(string pFilePath, string pRTFText)
{
    try
    {
        using (RichTextBox RTB = new RichTextBox())
        {
            RTB.Rtf = pRTFText;
            RTB.SaveFile(pFilePath, RichTextBoxStreamType.RichText);
        } 
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

现在传递一个 file_path 和**RTF 格式的**文本：

```
//This is a simple 1 line 'Hello World' RTF text
string RTF = @"{\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang14346{\fonttbl{\f0\fnil\fcharset0 Calibri;}} {\*\generator Riched20 10.0.10586}\viewkind4\uc1 \pard\sa200\sl276\slmult1\f0\fs22\lang10 Hello World.\par }";

Save_RTF_file(@"C:\temp\my_rtf_file.rtf"), RTF); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T08:12:05.160

可以在这里找到一个用于工作/创建/编辑 RTF 文件的好库：

[http://sourceforge.net/projects/netrtfwriter/](http://sourceforge.net/projects/netrtfwriter/)

它是免费的，只需要一些文档，您也可以使用 NuGet 包管理器找到很多替代品。

# javascript - JavaScript 乘法

> ID：12347588
> 
> 赞同：0
> 
> 时间：2012-09-10T08:09:16.193
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我的 JavaScript (ExtJs 4.1.0) 代码是：

```
Ext.getCmp('amount').setValue(Ext.num(Ext.getCmp('unite_price').getValue()) * Ext.num(this.getValue())); 
```

它将 3 与 0.048 相乘，结果是 0.14400000000000002 而不是 0.144。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:12:28.610

因为浮点数的舍入误差。这是一个比较普遍的现象。

如果您想要 3 个小数点，请尝试四舍五入到 3 个小数位。

```
var result = 3 * 0.048;
var roundedResult = Math.round(result * 1000) / 1000; 
```

# .net - .net：发送 UDP 消息在公共 IP 上不起作用

> ID：12347590
> 
> 赞同：0
> 
> 时间：2012-09-10T08:09:19.407
> 
> 标签：.net, wcf, service, udp

我正在尝试通过 WCF .net 应用程序将 UDP 消息发送到 Android 设备，该设备在 LAN（局域网）环境中工作正常

但是当我将该 WCF 服务 (MyService.svc) 部署到公共 IP (IIS) 时，它成功发送了 UDP 数据包，但 deice 没有收到该数据包。

发送UDP消息的代码

```
public void SendUDPMessage(IPEndPoint ipeSender, string Message)
{
    byte[] sendBytes = Encoding.ASCII.GetBytes(Message);
    if (serverSocket == null)
       serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    serverSocket.BeginSendTo(sendBytes, 0, sendBytes.Length, SocketFlags.None, ((EndPoint)ipeSender), new AsyncCallback(OnSend), null);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:59:56.830

假设 Android 设备位于无线/蜂窝网络上，它实际上位于 NAT 防火墙后面，因此任何源自外部的网络流量都将被阻止。

为了穿透 NAT/防火墙，Android 设备需要先向服务器发送消息。然后服务器必须响应作为 UDP 消息源给出的确切地址和端口号。

NAT打孔是一个杂乱无章的主题，其中有很多微妙的问题。但只要服务器有一个真实的公共 IP 地址，移动设备发送第一条消息，并且你没有做任何其他可能导致 UDP 数据包丢失的事情（数据包大于1400 字节，前几个字节看起来像 Teredo 隧道，服务器使用阻塞端口，发送数据太快，服务器防火墙配置错误等）。

# ios - 如何以编程方式截取可扩展的uitableview的屏幕截图

> ID：12347592
> 
> 赞同：3
> 
> 时间：2012-09-10T08:09:29.633
> 
> 标签：ios, iphone, uitableview, ipad

我试图截取可扩展的 uitableview 的屏幕截图，我试图截取 uitableview 的屏幕截图但我无法做到，然后我将 tableview 框架大小更改为 tableview 内容大小。截屏后，我将帧大小更改为旧帧大小。现在的问题是我在表格视图中有可扩展部分。我可以在我的屏幕截图中截取未展开的表格视图单元格的屏幕截图。我也需要截取未展开的表格视图单元格内容的屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:42:08.830

通过使用此类别文件，您可以截取屏幕上可见的屏幕截图....

```
 @interface UIImage (MyImage)

    + (UIImage*)imageFromView:(UIView*)view;
    + (UIImage*)imageFromView:(UIView*)view scaledToSize:(CGSize)newSize;
    + (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize;
    + (void)beginImageContextWithSize:(CGSize)size;
    + (UIImage *)croppedImage:(UIImage *)myImage :(CGRect)bounds;
    @end

#import "UIImage+MyImage.h"

@implementation UIImage (MyImage)

+ (void)beginImageContextWithSize:(CGSize)size
{
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
        if ([[UIScreen mainScreen] scale] == 2.0) {
            UIGraphicsBeginImageContextWithOptions(size, YES, 2.0);
        } else {
            UIGraphicsBeginImageContext(size);
        }
    } else {
        UIGraphicsBeginImageContext(size);
    }
}

+ (void)endImageContext
{
    UIGraphicsEndImageContext();
}

+ (UIImage*)imageFromView:(UIView*)view
{
    [self beginImageContextWithSize:[view bounds].size];
    BOOL hidden = [view isHidden];
    [view setHidden:NO];
    [[view layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    [self endImageContext];
    [view setHidden:hidden];
    return image;
}

+ (UIImage*)imageFromView:(UIView*)view scaledToSize:(CGSize)newSize
{
    UIImage *image = [self imageFromView:view];
    if ([view bounds].size.width != newSize.width ||
        [view bounds].size.height != newSize.height) {
        image = [self imageWithImage:image scaledToSize:newSize];
    }
    return image;
}

+ (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize
{
    [self beginImageContextWithSize:newSize];
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    [self endImageContext];
    return newImage;
}

+ (UIImage *)croppedImage:(UIImage *)myImage :(CGRect)bounds {
    CGImageRef imageRef = CGImageCreateWithImageInRect(myImage.CGImage, bounds);
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CGSize asd =  croppedImage.size;
    return croppedImage;
}

@end 
```

方法调用将是....

```
 yourImageView.image= [UIImage imageFromView:(UIView*)yourTableViewInstance ] 
```

尝试这个....

# iphone - 如何浏览 iPhone 模拟器

> ID：12347594
> 
> 赞同：1
> 
> 时间：2012-09-10T08:09:34.337
> 
> 标签：iphone, ios, simulator

我的应用程序正在从数据库中创建一个 CSV 文件。我想浏览并打开文件进行测试。如何访问 iphone 模拟器的存储空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T08:15:00.493

模拟器的所有数据都作为本地文件存储在您的 Mac 上。

模拟器中iOS应用的用户数据路径为：

> ~/Library/Application Support/iPhone Simulator/[操作系统版本]/Applications/[appGUID]/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:15:11.547

当您在模拟器中运行应用程序时，您需要打印出存储文件的位置。

您可以使用此代码在此处获取 Library/Cache 文件夹的位置：

```
-(NSString *) mediaPathForFileName:(NSString *) fileName
{   
    NSArray *directoryPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cachesDirectory = [directoryPaths objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/%@", cachesDirectory, fileName];

    return filePath;
} 
```

传入一个随机文件名，如“test.txt”：

```
// somewhere in your viewDidLoad method
[self mediaPathForFileName:@"test.txt"]; 
```

这将打印出您的应用程序库/缓存文件夹的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:14:10.227

您需要通过使用获取该文件的路径，`NSLog`然后用户`Shift+Cmd+G`转到该路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:53:32.303

打印这条路径

NSArray *directoryPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);

# java - Google App Engine 上的二维码解码器

> ID：12347601
> 
> 赞同：2
> 
> 时间：2012-09-10T08:10:00.787
> 
> 标签：java, google-app-engine, qr-code, zxing, javax.imageio

我正在尝试编写一个 Google App Engine (GAE) Java 应用程序来解码二维码。我的应用程序的用户将向应用程序发送一封电子邮件，其中包含他们想要解码的 QR 码的图像，我的 GAE 应用程序将发送带有解码信息的回复。我打算为此使用[zxing 库](http://code.google.com/p/zxing/)。

目前我能够提取作为电子邮件附件的图像。但现在要使用 zxing，我需要 imageIO 和 BufferedImage 类，它们不是 GAE 白名单的一部分。所以我被困住了。有人可以帮我弄清楚如何解码二维码，有或没有zxing吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:18:53.887

Google 提供了自己的 API 来[处理 GAE 上的图像](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/images/package-summary)。您将需要使用此 API 而不是`javax.imageio.*`. 或者更确切地说，由于使用这些类的是您的库，因此您必须修改库的源代码以使用 GAE 类（或切换到不同的库，或编写自己的库）。这可能是一项相当大的工作，具体取决于库对`javax.imageio.*`.

编辑：也许您可以重构您的代码以使用 zxing 的[基于 Web 的解码器](http://zxing.org/w/decode.jspx)？这可能比尝试修改他们的库以使用 GAE 图像 API 更简单。

# java - 为什么我没有得到下载百分比？

> ID：12347606
> 
> 赞同：0
> 
> 时间：2012-09-10T08:10:22.603
> 
> 标签：java, download

我正在制作的程序类之一是下载管理器。这是我处理下载及其百分比的主要代码。

```
byte data[] = new byte[1024];
        int count;
        while ((count = in.read(data, 0, 1024)) != -1)
        {
            downloadedPerc += (count/getModPackSize())*100;
            System.out.println(downloadedPerc);
            progressBar.setValue((int) downloadedPerc);
            label.setText(downloadedPerc + "%");
            fout.write(data, 0, count);
        } 
```

`downloadedPerc`是双精度型。作为控制台输出，我一直得到 0.0。为什么会发生这种情况？我的下载现在非常慢，大约 5kb/秒，如果我删除 % 计算，下载速度要快得多，为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:11:52.127

看看这个声明：

```
downloadedPerc += (count/getModPackSize())*100; 
```

`count`应该是 double 类型，或者您应该将分子转换为 double。

例如：`downloadedPerc += (count*1.0/getModPackSize())*100;`会工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:27:30.133

如果我没记错的话，使用进度条并不简单。您将需要属性更改事件侦听器、动作侦听器和摇摆工作者。下载任务必须与摆动组件在不同的线程中，否则它将冻结。尝试按照此处 Java 教程网站上的说明进行操作：

[http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)

这是代码的直接链接：

[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemoProject/src/components/ProgressBarDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemoProject/src/components/ProgressBarDemo.java)

# java - 从另一个类中的 JPanel 文本字段中获取值

> ID：12347616
> 
> 赞同：3
> 
> 时间：2012-09-10T08:11:02.683
> 
> 标签：java, swing

我有`JPanel`文本框，在另一个面板中保存按钮。如果我单击保存按钮，我必须获得第一个面板文本框的值。

如何访问它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:26:06.380

只需将 TextField 设为 Public Static 即可。然后你可以使用 ClassName.TextFiledName 访问 TextField

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:11:42.807

一个简单的解决方案是在您实现 ActionListener 的类中创建一个构造函数，并在构造函数中传递您需要更新或检索值的组件。

此解决方案将起作用，但有一种更好的方法可以使代码更可重用。查看[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)并在您的代码中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:08:56.863

好吧，因为没有SSCCE，这将是一个普遍的答案。
首先，您可以将文本框设为公共静态字段并从其他类访问它，但这将是您编写的最糟糕的代码之一。其次，您可以使用很酷但随着程序变得复杂而表现不佳的 setter/getters 方法。Setter/getter 将在组件之间创建紧密耦合。最后我建议使用观察者模式。这看起来像是对自行车使用核武器，但最终还是值得一开始的麻烦——而且你在这个过程中学到了一些东西。
更多信息和示例源代码可以在[Source Making](http://sourcemaking.com/design_patterns/observer)中找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:18:43.840

您应该有一个`Controller`从中创建面板的类。保持对控制器类中面板的引用。在您的中公开一个 getter 方法`CustomPanel1`以返回 TextField 中的文本（而不是文本字段本身）。`CustomPanel2`同样，您也可以从`Controller`and keep 参考创建第二个。在您的控制器中定义监听器类并将其传递给您的第二个面板。在第二个面板中，将侦听器添加到您的按钮。

这将是一个简单的解决方案。

[摇摆教程](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)

# php - Yii MANY_TO_MANY 和 CDbCriteria

> ID：12347618
> 
> 赞同：0
> 
> 时间：2012-09-10T08:11:06.537
> 
> 标签：php, activerecord, yii

我正在尝试创建一个将在 CActiveDataProvider 中使用的 CDbCriteria，我需要在多对多关系的另一侧查询一个值。

我有以下表格：order、user_order 和 user

正确声明了关系，因此我可以访问 $order->users[0] 并正确查看数据。

我正在尝试建立以下标准：

```
$criteria=new CDbCriteria;
$criteria->with  = array('users');
if (isset($_SESSION['hideCard'])){
    $criteria->condition = "fname != 'Card'";
}

return new CActiveDataProvider(get_class($this), array(
    'criteria'=>$criteria,
    'pagination'=>array('pageSize'=>40)
)); 
```

这基本上意味着如果设置了会话变量，我想从 DataProvider 中隐藏所有 fname 为“Card”的用户。

关于如何在多对多关系中实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T16:28:32.043

You must modify your code like this:

```
$criteria=new CDbCriteria;
$criteria->with  = array('users'); // or just string – 'users';
if (isset($_SESSION['hideCard'])){
    $criteria->together = true; // critical fix
    $criteria->condition = "users.fname != 'Card'"; // table alias must be set to ensure filtering proper column
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:14:07.213

您应该能够使用：

```
if (isset($_SESSION['hideCard'])){
    $criteria->condition = "users.fname != 'Card'";
} 
```

或者无论用户表的别名是什么，我只是假设它`users`来自关系名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T06:48:04.587

我对正在运行的查询进行了分析，并开始构建自己的查询。

Here is the code which made it work...

```
public function searchRecent()
    {
        $criteria=new CDbCriteria;
        $criteria->with  = array('users');
        $criteria->join = 'LEFT JOIN user_order uo ON t.id = uo.order_id LEFT JOIN user u ON u.id = uo.user_id';
        $criteria->order     = 't.id DESC';
        if (isset($_SESSION['hideCard'])){
            $criteria->join .= " LEFT JOIN loyalty_members lm ON lm.user_id = u.id";
            $criteria->addCondition("magnetic_id IS NULL");
        }
        if (isset($_SESSION['hidePango'])){
            $criteria->addCondition("u.password != 'PANGO'", "AND");
        }
        $criteria->group = "t.id";
        return new CActiveDataProvider(get_class($this), array(
            'criteria'=>$criteria,
            'pagination'=>array('pageSize'=>40)
        ));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:33:57.150

CActiveDataProvider can take a model instance instead of just its class name. This allows you to preset all of your criteria in your model. Then you can use ['named scopes'](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes) in your model. e.g.

```
$model = Order::model();

if (isset($_SESSION['someCond'])) {
    $model->someNamedScope();
}
if (isset($_SESSION['otherCond'])) {
    $model->otherNamedScope();
}

return new CActiveDataProvider($model, ...) 
```

# gps - 解码肯尼亚狮子会报告 GPS 位置的 SMS

> ID：12347625
> 
> 赞同：21
> 
> 时间：2012-09-10T08:11:20.117
> 
> 标签：gps, sms, decode

[Mara-Naboisho 狮子项目](http://www.mnlp.org/)已请求[我们***帮助***解码](https://github.com/giving/giving.github.com/issues/11)和绘制装有 GPS 项圈的狮子的位置。

他们从项圈收到短信：

```
Collar07854_100806210058.SMS

074952494449554d0000000000000000000000000000000000000000000000040f33303030333430313232393738393000000000000000000000000000000000f10a0806100028008c13ef348a0039d0fe000de871004cc92b5ca92d6213ef26640039d108000de86b004cc92d5ca92d5d13ef18620039d101000de865004cc92c5ca92d5813ef0a930039d0fc000de864004cc9311c682d5413eefc170039d045000de7d4004cc95b7c692c5013eeee280039d0ff000de85f004cc92a7c692d6fffffffffffffffffffffffffffffffffffffffffff

Collar07854_100807060011.SMS

074952494449554d0000000000000000000000000000000000000000000000040f33303030333430313232393738393000000000000000000000000000000000f10a0807020038008c13efb2eb0039d0ed000de853004cc92e3cea2d8813efa5060039d0fb000de860004cc9291c6a2d8413ef96fd0039d0fc000de85e004cc92d5c6a2d7f13ef88e00039d0f6000de85a004cc92b5c6a2d7b13ef7ad80039d0fa000de85a004cc9327c6a2d77ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff 
```

这些可能是 SMS PDU，尽管简单的在线解码器似乎对它们没有多大意义。其中有 ASCII 文本“IRIDIUM”，可能是 SMSC 或发送者或其他字符串，因为 IRIDIUM 是卫星电话系统，并且可能是项圈发送位置时的承载者。

***更新***：他们有一些与这些项圈相对应的 KML 文件；我在[这里](https://gist.github.com/3698320)和[这里](https://gist.github.com/3698328)上传了 KML 。项圈可能是由 Vectronic-Aerospace 制造的。

它是什么格式，我们如何解码？

（这是一个[**捐赠代码**](http://giving.github.com/)项目；也许你想[帮助他们](https://github.com/giving/giving.github.com/issues/11)，或者看看那里的其他问题？）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T16:08:04.007

我已经能够翻译纬度/经度位置了！在查看了衣领开发人员的网站后，我发现他们正在使用 x/y/z ECEF 坐标。

第一条消息的第一行：

```
13ef 348a 0039 d0fe 000d e871 004c c92b 5ca9 2d62

```

被翻译为：

```
0039 d0fe = X = 3789054
000d e871 = Y = 911473
004c c92b = Z = 5032235

```

这转化为：

```
纬度：52.43067054630929
朗：13.525755535406619
身高：88.99500464554876

```

这导致在德国的一个位置......这对于肯尼亚保护区来说听起来是错误的，但实际上是制造这些项圈的公司的街道： [查看他们的网站](http://www.vectronic-aerospace.com/index.php?p=contact)

翻译坐标的代码在网上找到了：

 `````
public static double[] xyz2LLH(double x, double y, double z)
{
    double[] llh = new double[3];
    double da = 0.0; // datum parameter
    double df = 0.0; // datum parameter
    double a = 6378137 - da;
    double f = 1 / 298.2572235630 - df;
    double b = (1 - f) * a;
    double e2 = 2 * f - f * f;
    double E2 = (a * a - b * b) / (b * b);
    double p = Math.sqrt(x * x + y * y);
    llh[0] = Math.atan2(y, x);
    double theta = Math.atan((z * a) / (p * b));
    llh[1] = Math.atan((z + E2 * b * Math.pow(Math.sin(theta), 3)) / (p - e2 * a * Math.pow(Math.cos(theta), 3)));
    double N = a / Math.sqrt(1 - e2 * Math.sin(llh[1]) * Math.sin(llh[1]));
    llh[2] = p / Math.cos(llh[1]) - N;
    llh[0] = Math.toDegrees(llh[0]);
    llh[1] = Math.toDegrees(llh[1]);
    return llh;
} 
````  `因此，唯一需要解密的代码是最后一位：**5ca9 2d62**。

该网站的另一条线索表明，这些字节包含主电压/备用电压和温度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T22:38:01.010

罗伊言论的扩展：

也许'13'不是标题的一部分？那么标题将是：

```
 SMS 1: 10a0806100028008c
  SMS 2: 10a0807020038008c 
```

然后消息将是：

```
 Message #1
  13ef 348a 0039 d0fe 000d e871 004c c92b 5ca9 2d62
  13ef 2664 0039 d108 000d e86b 004c c92d 5ca9 2d5d
  13ef 1862 0039 d101 000d e865 004c c92c 5ca9 2d58
  13ef 0a93 0039 d0fc 000d e864 004c c931 1c68 2d54
  13ee fc17 0039 d045 000d e7d4 004c c95b 7c69 2c50
  13ee ee28 0039 d0ff 000d e85f 004c c92a 7c69 2d6f
  ffff ffff ffff ffff ffff ffff ffff ffff ffff ffff
  ff

  Message #2
  13ef b2eb 0039 d0ed 000d e853 004c c92e 3cea 2d88
  13ef a506 0039 d0fb 000d e860 004c c929 1c6a 2d84
  13ef 96fd 0039 d0fc 000d e85e 004c c92d 5c6a 2d7f
  13ef 88e0 0039 d0f6 000d e85a 004c c92b 5c6a 2d7b
  13ef 7ad8 0039 d0fa 000d e85a 004c c932 7c6a 2d77
  ffff ffff ffff ffff ffff ffff ffff ffff ffff ffff
  ffff ffff ffff ffff ffff ffff ffff ffff ffff ffff
  ff 
```

它看起来确实像一个日志，8 月 6 日的消息（猜测）有 6 个条目，而 8 月 7 日的第二个有 7 个条目。领子记录是什么？我猜经度，纬度和时间戳？

前八位数字代表时间戳的可能性很高。它们是从下到上递增的。

例如。13ef348a = 334443658。334443658 秒 = 10 年 8 个月 6 天 23:00:58（自 1970 年以来）。这与第一条短信标题中的日期匹配： Collar07854_ **100806** *210058*。它甚至与标题中的时间戳减去 2 小时相匹配。

发帖人的一个问题：每天收到这些短信的频率是多少？他们来自哪一年（我猜是 2010 年）？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:07:32.727

我想为 dstibbe 的回答做出一点贡献，但我还不能发表评论。

当您从 0 开始计数时，“标头”的最后一个字节 (8c) 是消息的长度 (140)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T11:10:57.597

因此，在 dstibbe 改进后，我们知道格式，可能还有日期/时间戳：

```
 Message #1
    334443658 seconds, 0039 d0fe 000d e871 004c c92b 5ca9 2d62
    334440036 seconds, 0039 d108 000d e86b 004c c92d 5ca9 2d5d
    334436450 seconds, 0039 d101 000d e865 004c c92c 5ca9 2d58
    334432915 seconds, 0039 d0fc 000d e864 004c c931 1c68 2d54
    334429207 seconds, 0039 d045 000d e7d4 004c c95b 7c69 2c50
    334425640 seconds, 0039 d0ff 000d e85f 004c c92a 7c69 2d6f

    Message #2
    334476011 seconds, 0039 d0ed 000d e853 004c c92e 3cea 2d88
    334472454 seconds, 0039 d0fb 000d e860 004c c929 1c6a 2d84
    334468861 seconds, 0039 d0fc 000d e85e 004c c92d 5c6a 2d7f
    334465248 seconds, 0039 d0f6 000d e85a 004c c92b 5c6a 2d7b
    334461656 seconds, 0039 d0fa 000d e85a 004c c932 7c6a 2d77 
```

我的搜索重点是尝试将接下来的 8 个字节对转换为坐标。让我们看第一行：334443658 秒，0039 d0fe 000d e871 004c c92b 5ca9 2d62

可能还剩下四个不同的部分：

1.  **第0039章**
2.  **000d e871**
3.  **004c c92b**
4.  **5ca9 2d62**

我的第一个猜测是第 1 部分是纬度，第 2 部分是经度。这些数字很可能是整数，而不是浮点数。浮点数有一个指数部分（11 位），几乎总是非零。这些数字似乎没有那部分，从 000 开始。

将所有内容转换为整数可能会导致：

1.  **3789054**
2.  **911473**
3.  **5032235**
4.  **1554591074**

看着这个，我猜第 1 部分是经度，第 2 部分是纬度。这很常见，只要看看谷歌地球，它也需要 lon-lat 而不是 lat-lon。

现在，有很多方法可以将整数转换为纬度/经度，我最有可能的候选人是：

`lon = part_1 / 6371000 / PI * 180`

`lat = atan(exp(part_2 / 6371000)) / PI * 360 - 90`

这导致埃塞俄比亚“甘贝拉”国家公园的坐标......？会不会是项圈在送去肯尼亚之前就已经在埃塞俄比亚录音了？恐怕我们需要更多信息来翻译坐标……

纬度：8.169253103106428

朗：34.075781281927895

[谷歌地图中的坐标](http://goo.gl/maps/2GSPl)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-10T12:41:45.523

它似乎不是一个普通的 PDU。它也是 8 位信息，而不是 7 位（像大多数 PDU 一样）。

如果你去掉它们共同的第一个标题，似乎也有模式：

```
 074952494449554d0000000000000000000000000000000000000000000000040f33303030333430313232393738393000000000000000000000000000000000f10a 
```

接下来似乎还有另一个 16 字节的 header/timestamp/id：

```
 SMS 1: 0806100028008c13
    SMS 2: 0807020038008c13 
```

并将其格式化一下，模式变得更清晰：

```
 Message #1:
    ef348a0039d0fe000de871004cc92b5ca92d6213
    ef26640039d108000de86b004cc92d5ca92d5d13
    ef18620039d101000de865004cc92c5ca92d5813
    ef0a930039d0fc000de864004cc9311c682d5413
    eefc170039d045000de7d4004cc95b7c692c5013
    eeee280039d0ff000de85f004cc92a7c692d6fff
    ffffffffffffffffffffffffffffffffffffffff

    Message #2:
    efb2eb0039d0ed000de853004cc92e3cea2d8813
    efa5060039d0fb000de860004cc9291c6a2d8413
    ef96fd0039d0fc000de85e004cc92d5c6a2d7f13
    ef88e00039d0f6000de85a004cc92b5c6a2d7b13
    ef7ad80039d0fa000de85a004cc9327c6a2d77ff
    ffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffff 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T08:36:11.953

你为什么不问问德国公司的人？要么打电话给他们，要么给他们发电子邮件。我很确定他们会为您提供答案。

此外，根据网站上的产品表，可以设置项圈以不同的方式记录。你必须从狮子项目中找出项圈是如何编程的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T08:26:40.030

这看起来是一个很好的参考：

[http://www.dreamfabric.com/sms/](http://www.dreamfabric.com/sms/)

诀窍可能是在最后解码消息。

我设法提取了铱，但没有更进一步。

一个快速的 perl 脚本：

```
my $text=".....";
my $str;
while( $text ) {
  $str .= chr( hex(substr $text, 0, 2) );
  if( length($text) > 2 ) {
    $text8 = substr($text, 2);
  } else {
    $text8 = '';
  }
}
print $str; 
`````

# android - Phonegap中的滚动条？

> ID：12347627
> 
> 赞同：8
> 
> 时间：2012-09-10T08:11:40.780
> 
> 标签：android, cordova

我是Phonegap的新手。我在列表视图中显示数据列表。数据是从服务器收集的，我想在视图中添加一个滚动条。如何在 Phonegap 中添加滚动条并使视图滚动具有粘性？Jow 让它光滑？请指导我这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:59:36.297

我个人不喜欢 iscroll .. 使用它有很多问题，所以我发现了另一种解决方案......你可以试试这个：

1.）将您的DIV溢出设置为自动（或滚动）并设置其高度..例如

```
 <div id="wrapper" style="overflow:auto; height: 200px">...content...</div> 
```

（我通常根据用户的屏幕尺寸用 javascript 计算高度。我从来没有为所有设备设置一个固定的高度，这只是为了这个“演示”的目的）

2.）添加这个javascript：

```
<script>
function isTouchDevice(){
    try{
        document.createEvent("TouchEvent");
        return true;
    }catch(e){
        return false;
    }
}

function touchScroll(id){
    if(isTouchDevice()){ //if touch events exist...
        var el=document.getElementById(id);
        var scrollStartPos=0;

        document.getElementById(id).addEventListener("touchstart", function(event) {
            scrollStartPos=this.scrollTop+event.touches[0].pageY;
            event.preventDefault();
        },false);

        document.getElementById(id).addEventListener("touchmove", function(event) {
            this.scrollTop=scrollStartPos-event.touches[0].pageY;
            event.preventDefault();
        },false);
}
} 
</script> 
```

3.) 在页面加载时调用它.. 如果你使用 jQuery：

```
$(document).ready(function() { 
   touchScroll("wrapper");
}); 
```

4.) 如果您希望滚动条可见，只需定义以下 CSS 规则：

```
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  border-radius: 10px;
  background-color: #000;
} 
```

这已经过测试，并且应该在任何 Android（甚至更旧的型号）或 iOS 设备上完全相同（如果没有这种解决方法也可以工作 - 但这种解决方法不会破坏它）。您可以将其与包装元素的 position:fixed 或 position:absolute 结合使用...

您还可以使用 touchScroll 功能，您可以添加一些缓动甚至滑动检测自动滚动等，但这是一个更高级的问题......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T08:43:11.820

使用[iscroll](http://cubiq.org/iscroll)。

脚步

```
function loaded() {
  document.addEventListener('touchmove', function(e){ e.preventDefault(); });
  myScroll = new iScroll('scroller');
}
document.addEventListener('DOMContentLoaded', loaded);`

<div id="wrapper">
<div id="scroller">
    <ul>
        <li>...</li>
    </ul> 
</div> 
```

#wrapper 还需要一些类：

```
#wrapper {
  position:relative;
  z-index:1;
  width:/* your desired width, auto and 100% are fine */;
  height:/* element height */;
  overflow:/* hidden|auto|scroll */;
} 
```

检查此示例[演示](http://cubiq.org/dropbox/iscroll/)

# java - Android 使用 XPath 获取 html 源代码和切片

> ID：12347629
> 
> 赞同：0
> 
> 时间：2012-09-10T08:11:47.030
> 
> 标签：java, android, xpath

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import javax.xml.xpath.*;

import com.example.androidtablayout.R;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class PhotosActivity extends Activity  {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photos_layout);

        String htmlCode = "";

        try {
        URL url = new URL("http://www.example.com/");
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));

        String inputLine;

        while ((inputLine = in.readLine()) != null)
            htmlCode += inputLine;

        in.close();
        } catch (Exception e) {
           System.out.print("Error: " + e.getMessage());
        }

             XPath xpath = XPathFactory.newInstance().newXPath();

            try {
                String str = (String) xpath.evaluate("//*[@class='postunit'][1]",htmlCode, XPathConstants.STRING);
                 TextView t = new TextView(this);
                 t=(TextView)findViewById(R.id.textView3); 
                 t.setText(str);
            } catch (XPathExpressionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }
} 
```

嘿。我想从网站获取 html 源代码，我做到了。当我想使用 XPath 进行切片时，我的布局屏幕上没有任何内容。

我尝试用 try catch 替换 TextView 代码，但它不起作用并返回此错误（未使用 str）

我该如何解决这个问题？

# java - 修改文件更改的事件？

> ID：12347632
> 
> 赞同：3
> 
> 时间：2012-09-10T08:11:54.913
> 
> 标签：java, filesystems, nio

我正在使用`WatchService`NIO。监视特定目录的两个类（Ubuntu 11.10）。

每当进行更改时，例如，如果我修改现有文件，它就会触发一个`MODIFIED`事件 2 次。不知道为什么？当我创建新文件时它工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T10:19:06.433

我找到了解决方案。它会触发两个修改事件，因为当文件系统写入新文件时，它会以零字节创建它并触发创建事件，然后将数据写入文件然后触发修改事件。

这同样适用于修改。当我们修改一个已经存在的文件时，文件系统首先用 0 字节创建它并触发一个修改事件，然后将数据写入它。然后它再次触发修改事件。这就是我收到两个修改事件的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:01:10.623

我使用了 Oracle 的[示例](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/essential/io/examples/WatchDir.java)，奇怪的是有时它会触发**ENTRY_MODIFY**两次，有时它会触发一次。我正在使用 Windows 机器。

在文档中没有关于可能的重复事件的信息，所以我猜它要么是未记录的行为，要么是错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-16T11:50:45.557

Oracle 文档说“例如，当监视目录中的文件被修改时，它可能会在某些实现中导致单个 ENTRY_MODIFY 事件，但在其他实现中会导致多个事件”来源：[https ://docs.oracle.com/javase /7/docs/api/java/nio/file/WatchService.html](https://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

在我的情况下，WatchService 在不同的实现（例如在独立的 Java 程序和 Eclipse 的 Web 应用程序项目中）和不同的环境（笔记本电脑与服务器）中，每个文件修改正确报告了一个 ENTRY_MODIFY，但是当我在 Tomcat 服务器上部署我的 Web 应用程序时每个文件修改总是发生两个 ENTRY_MODIFY 事件。造成这种差异的原因是我的 Maven Web 应用程序中有多个 Main 类，尽管我在 pom.xml 文件中定义了 start.class，但它们都是在 Web 应用程序部署在我的 tomcat 服务器上时启动的：

```
<start-class>com. ... .Application</start-class> 
```

在 Eclipse 中，只有 start-class 启动了。与 Eclipse Maven 项目结构相比，WAR 文件中的不同文件结构似乎导致了这种差异。我的解决方案是删除多余的主类和文件，然后每个文件修改只有一个 ENTRY_MODIFY。

# coded-ui-tests - 编码的 UI 测试 - 单击按钮突然不起作用

> ID：12347637
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:12:05.740
> 
> 标签：coded-ui-tests

我有一个 WinForms 应用程序的编码 UI 测试。在我的开发人员计算机（Windows 7）上运行测试工作正常，但在测试代理运行测试每晚单击工具栏按钮失败第三次（！）在测试中单击它。该按钮在应用程序中打开一个新窗口（它在多个其他测试中执行前 2 次）。查看正在执行的测试，似乎鼠标悬停在按钮上，测试日志报告按钮已被单击，但测试随后失败，因为它找不到按钮应打开的窗口。

我正在寻找的是编码 UI 测试中的任何已知问题或类似问题，我需要知道这些问题可能导致此行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:18:40.580

我认为由于分辨率更改或您的测试第三次无法找到按钮的记录位置。

我建议您使用`GetClickablePoint()`方法来搜索按钮，而不管它在屏幕上的位置。

你可以参考[这个。](http://www.dotnetfunda.com/articles/article1401-test-automation-vs-2010-coded-ui-customization-techniques-for-win-appli.aspx)

干杯。

# actionscript-3 - 找不到类型或不是编译时常量：DatagramSocketDataEvent

> ID：12347638
> 
> 赞同：1
> 
> 时间：2012-09-10T08:12:09.160
> 
> 标签：actionscript-3

我正在尝试`DatagramSocket`在 Flash CS6 中的 ActionScript3 项目中使用，但编译后出现此错误：

> DatagramSocketClass.as，第 24 行 1046：找不到类型或不是编译时常量：`DatagramSocketDataEvent`。

这是我的`DatagramSocketClass.as`代码：

```
package com.example.udp
{
    import flash.display.Sprite;
    import flash.events.DatagramSocketDataEvent;
    import flash.events.Event;
    import flash.events.*;
    import flash.net.DatagramSocket;
    import flash.utils.ByteArray;

    public class DatagramSocketClass extends Sprite
    {
        private var datagramSocket:DatagramSocket = new DatagramSocket();

        public function World()
        {

            datagramSocket = new DatagramSocket();
            datagramSocket.bind("1111","127.0.0.1");
            datagramSocket.addEventListener(DatagramSocketDataEvent.DATA, dataReceived );
            datagramSocket.receive();
        }

        private function dataReceived( event:DatagramSocketDataEvent ):void
        {
            //Read the data from the datagram
            log("Received");
        }
    }

} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:45:55.973

数据报套接字仅在 AIR2 上可用（即使那样也仅在桌面上可用 - 而不是移动）。您确定要开始使用数据报套接字吗？“常规” TCP 套接字通常就足够了（并且更安全、更易于使用）。

# c# - Outlook.Folder 和 Outlok.MAPIFolder 之间的区别

> ID：12347640
> 
> 赞同：11
> 
> 时间：2012-09-10T08:12:25.723
> 
> 标签：c#, outlook, outlook-addin

我不清楚 classes`Folder`和`MAPIFolder`namespace之间的区别`Outlook`。当我在网上查看代码时，有些使用第一种，而另一些使用另一种语法，我无法确定是否：

*   这只是因为他们的无知（更不用说我知道哪个组是正确的）
*   这是某种遗留物（用于不同版本的 Outlook）
*   这是一回事（我很确定这不是真的，但永远不知道）
*   它是一个继承结构（以及何时使用）
*   这只是一种避免类型问题（强制转换和`as`-ing）的方法
*   完全是其他原因（如果是的话，哪个）

这是我用来获取这两个的代码。

```
Outlook.Folder defaultContactsFolder_1 = 
  this.Application.Session.GetDefaultFolder(
    Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;

Outlook.MAPIFolder defaultContactFolder_2 = 
  this.Application.GetNamespace("MAPI").GetDefaultFolder(
    Outlook.OlDefaultFolders.olFolderContacts); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T14:11:36.620

[`Folder`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.folder.aspx)已取代[`MAPIFolder`，现在已弃用](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mapifolder.aspx)。请参阅[相关的 SO 帖子](https://stackoverflow.com/q/6213749/175679)。[`Folder`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.folder.aspx)与`MAPIFolder`

`Application.Session == Application.GetNamespace("MAPI")`- 它们是可以互换的。请参阅[相关的 SO 帖子](https://stackoverflow.com/a/11957861/175679)。

`MAPIFolder`并且[`GetNamespace()`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.applicationclass.getnamespace) 是 Outlook 2003 及更低版本的遗留物——它们只是为了向后兼容而保留的。没有办法避免使用 VSTO 进行类型转换 - 您将不断地装箱和拆箱。

# xcode - Xcode - 相同的类名，两个目标

> ID：12347646
> 
> 赞同：2
> 
> 时间：2012-09-10T08:12:55.200
> 
> 标签：xcode, class, xcode4, target

我正在尝试重新组合我在同一个 Xcode 项目中的几个应用程序。所以我创建了一个新的 Xcode 项目并添加了两个目标，并将我的两个应用程序的源代码导入其中一个目标中。

问题是我在两个应用程序中有同名的类。当我编译第一个时，没问题。但是如果我尝试编译第二个目标，我会遇到很多这样的问题：

```
In file included from /Users/administrateur/Documents/Merged_iPhone_Projects/Target2/Classes/VisitFormViewController.m:18:
In file included from /Users/administrateur/Documents/Merged_iPhone_Projects/Target1/Classes/VisitFormDetailsViewController.h:11:

/Users/administrateur/Documents/Merged_iPhone_Projects/Target1/Classes/RoundedCornersTableViewCell.h:18:61: error: property has a previous declaration
@property (nonatomic, readonly) BkCustomCellBackgroundView *roundedCornersView;
                                                            ^
Target2/Classes/RoundedCornersTableViewCell.h:18:61: note: property declared here
@property (nonatomic, readonly) BkCustomCellBackgroundView *roundedCornersView; 
```

我尝试用谷歌搜索，发现将“标题搜索路径”设置为`$(SRCROOT)/Target1`（或`$(SRCROOT)/Target2`）应该可以解决我的问题，但这不起作用。

有人有其他解决方案吗？

仅供参考，我正在使用 Xcode v.4.4.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T23:42:26.707

您应该按目录安排每个目标的资源，并在文件检查器中定义目标成员资格。

此外，对于每个目标，您可以使用未记录的“用户构建设置”：

USE_HEADERMAP = 否

并将每个目标“用户标题搜索路径”变量设置为标题目录位置。

更多信息和更详细的解释，请参考stackoverflow中的这个问答

[控制 Xcode 将包含哪个项目头文件](https://stackoverflow.com/questions/2596695/controlling-which-project-header-file-xcode-will-include)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:39:10.967

这些类将需要不同的名称——否则，加载时会发生冲突，并且未指定您将收到的实现。

# python - Python - 测试对象是否是内置函数

> ID：12347647
> 
> 赞同：11
> 
> 时间：2012-09-10T08:13:00.027
> 
> 标签：python

有没有一种很好的方法来检查 object o 是否是内置的 Python 函数？

我知道我可以使用，例如

```
type(o) == type(pow) 
```

因为 type(pow) 是“builtin_function_or_method”。

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T08:15:13.187

类型模块：

```
>>> import types
>>> types.BuiltinFunctionType
<type 'builtin_function_or_method'> 
```

但是，如果您深入了解一下，您会发现它与您现在所做的并没有什么不同。

所以，在你的情况下，使用

```
isinstance(o, types.BuiltinFunctionType) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-07T10:55:20.297

这取决于您所说的“内置”是什么意思。

**使用`__builtins__`**

如果您想检查您的函数是否是 Python 解释器中的内置函数之一，您可以使用

```
>>> pow in __builtins__.__dict__.values()
True
>>> __builtins__.__dict__['pow']
<built-in function pow> 
```

Python 解释器有许多内置常量、函数、类型和异常，它们都包含在字典中`__builtins__.__dict__`。

**使用`BuiltinFunctionType`**

另一方面，如果您想检查您的函数是否属于类型`BuiltinFunctionType`，则可以使用该`types`模块

```
>>> import types
>>> isinstance(pow, types.BuiltinFunctionType)
True 
```

**使用`inspect`**

或者`inspect.isbuiltin`（只是一个包装器`isinstance(object, types.BuiltinFunctionType)`）

```
>>> import inspect
>>> inspect.isbuiltin(pow)
True 
```

**请注意，术语“内置”是`BuiltinFunctionType`指“用 C 编写”。**

考虑以下示例：

```
>>> from math import factorial
>>> isinstance(factorial, types.BuiltinFunctionType)
True 
```

该`factorial`函数是类型`BuiltinFunctionType`，但它不是解释器中的内置函数

```
>>> factorial in __builtins__.__dict__.values()
False 
```

这是因为`math`Python 中的模块由 C 数学库函数的包装器组成。

能够检测到 a`BuiltinFunctionType`很有用，因为对于用 Python 编写的函数，无需打开源文件即可检查源代码。

```
>>> import random
>>> isinstance(random.random, types.BuiltinFunctionType)
True
>>> inspect.getsource(random.random)
# returns TypeError
>>> isinstance(random.uniform, types.BuiltinFunctionType)
False
>>> from __future__ import print_function # if using Python 2.*
>>> print(inspect.getsource(random.uniform))
    def uniform(self, a, b):
        "Get a random number in the range [a, b) or [a, b] depending on rounding."
        return a + (b-a) * self.random() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T08:17:56.570

试试这个：

```
>>> import types
>>> isinstance(pow, types.BuiltinFunctionType)
True
>>> def a():
    pass
>>> isinstance(a, types.BuiltinFunctionType)
False 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T08:19:21.577

你也可以

```
import __builtin__
o in __builtin__.__dict__.values() 
```

或者，在 CPython 中：

```
o in __builtins__.__dict__.values() 
```

但请注意，您依赖于此处的实现细节。

* * *

```
>>> pow in __builtins__.__dict__.values()
True
>>> def a():
...   pass
...
>>> a in __builtins__.__dict__.values()
False
>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-31T07:46:44.390

您可以检查内置函数是否将其作为属性并且可调用。样品：

```
>>> import builtins
>>> hasattr(builtins, 'max')
True
>>> hasattr(builtins, 'abs')
True
>>> hasattr(builtins, 'aaa')
False
>>> hasattr(builtins, 'True')
True
>>> callable(abs)
True
>>> callable(True)
False
>>> hasattr(builtins, 'max') and callable(max)
True
>>> hasattr(builtins, 'True') and callable(True)
False 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-08T18:34:50.923

尽管已经过去了一段时间，但也许其他人会发现我的答案很有用，因为我在寻找答案时突然出现了这个问题。

如果您只对测试感兴趣，而给定变量`var`是以下之一：

1.  `function`
2.  `builtin_function_or_method`但不是一个`method`

我发现以下测试有效：

```
import types

def is_func(arg):
    return isinstance(arg, types.FunctionType) or \
        (isinstance(arg, types.BuiltinFunctionType) and
            arg.__self__ is None) 
```

希望我的假设是正确的，但一般的想法是，如果我们得到 a`builtin_method`它必须有一个与之不`None`相关的类型。

# eclipse - Eclipse 中的 Git：从本地项目中删除的文件

> ID：12347654
> 
> 赞同：4
> 
> 时间：2012-09-10T08:13:36.270
> 
> 标签：eclipse, git, project

我目前正在 Eclipse 中处理一些项目。我想用一个版本的软件，选择了看起来很不错的Git。

我决定在网络驱动器上共享项目。在 Eclipse 中，我单击了 TEAM> SHARE PROJECT 并在此网络驱动器上选择了一个存储库。

我的所有文件都已移至此存储库，并且本地工作区中没有任何内容。我不明白为什么所有文件都消失了。您能否解释一下我删除所有文件时做错了什么（这些文件在其他项目中用作依赖项，因此在我的本地驱动器上确实需要它们）

此外，我可以做些什么来获得这些文件的本地副本并在我认为文件已准备好提交时推送/提交。

编辑：我在网站上找到了一些与我的问题相对应的评论：

> 我刚刚在 Eclipse 3.7 Indigo 中使用 EGit 进行了尝试。共享项目将不允许存储库驻留在项目文件夹中。有一个使用项目的父文件夹的选项，但是如果父文件夹是当前的 Eclipse 工作区，这将被阻止。也许，这里提出的建议， [http:](http://wiki.eclipse.org/EGit/User_Guide#Creating_Repositories) //wiki.eclipse.org/EGit/User_Guide#Creating_Repositories 正在工具中执行？最终结果是，预期的 Eclipse 工作区中的现有项目被“移动”到 HOME 中的新的或现有的 egit 存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-14T11:06:31.120

我遇到了同样的问题。我为它创建了一个错误报告：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=451521](https://bugs.eclipse.org/bugs/show_bug.cgi?id=451521)

所以我不认为你做错了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:35:25.323

共享项目不会移动文件；[它只是创建了一个空的 Git 存储库](http://wiki.eclipse.org/EGit/User_Guide/Sharing)。创建存储库后，您必须添加要保留在版本控制下的文件。你一定有别的事情。如果没有其他信息，我们无法为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T19:10:41.343

在撰写本文时，您必须使用（右键单击项目）重构 --> 移动（回到应有的位置）。但这显然会使这些文件脱离版本控制！

取自：[https ://www.eclipse.org/forums/index.php/m/1621217/#msg_1621217](https://www.eclipse.org/forums/index.php/m/1621217/#msg_1621217)

注意这是一个令人震惊的错误，Egit 团队需要尽快解决。Wouter 于 2014 年 11 月提交了错误报告。

# c++ - 在 Objective-C 实例中隐式包装 C++ 功能

> ID：12347659
> 
> 赞同：1
> 
> 时间：2012-09-10T08:13:53.073
> 
> 标签：c++, objective-c

是否可以使用 Objective-C 包装器代理 C++ 对象，而无需在 objc 端实现 cpp 对象的所有属性和方法？我正在寻找的是更通用的东西，我确信它适用于每个对象。

```
MyObjCWrapper *obj = [[MyObjCWrapper alloc] initWithCppObj: myCppObj];

[MyObjCWrapper aCppObjMethod ]; //calling a method not explicitly defined in the ObjCWarapper 
```

继承就不行了。从 C++ 类继承是不可能的 AFAIK。

一种确定的方法是使用反射，但它不一定是最快的。还有什么？代表团？我不太熟悉它，虽然我知道一般原理。

最好的方法是拥有像 JavaScript 中的“原型”机制。通过这种方式，可以简单地将 C++ 实例附加到 Objective-C 的原型上，但这可行吗？我想重载 [] 运算符以及为原型提供适当的“自我”上下文会存在问题。

那么我能做什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:37:23.637

不，这是不可能的。

重点是，Objective-C 是非常动态的，而 C++ 更像是一种静态语言。虽然您可以调用尚未定义的 Objective-C 方法，甚至在运行时拦截该调用以处理它（通常用于将调用转发到其他地方的代理对象），但有关调用内容的信息更像是带有方法名称的“字符串”（技术上不是字符串，但类似）。您无法在运行时将其解析为 C++ 方法调用，除非您已经有一个列表来进行映射。这甚至没有考虑参数。

此外，你不能希望使用宏来隐藏它，因为 Objective-C 语法并不是真正的“宏兼容”：在某种程度上你总是可以用宏调用替换函数调用来尝试添加额外的隐藏参数或类似的东西（尽管在 C++ 中这不适用于方法...），但是您不能对 Objective-C 调用执行此操作，因为它具有完全不同的语法。

编辑：“不可能，除非您编写合适的预处理器来读取 C++ 并创建合适的 Objective-C 代码”。当然，这总是可能的。但考虑到 C++ 并不是这个星球上最琐碎的语言，也需要做很多工作。

# c# - 如何更改 gridview 行，使其呈现为 html 表中的第二个标题行

> ID：12347661
> 
> 赞同：0
> 
> 时间：2012-09-10T08:13:54.530
> 
> 标签：c#, asp.net

我有一个绑定到数据表的gridview，并希望gridview 将第一行呈现为标题行（不是td），同时将普通列名呈现为标题行。目前我在这里尝试这样做：

```
protected void SampleGrid_DataBound(object sender, EventArgs e)
{
    GridView grid = sender as GridView;
    grid.Rows[1].RowType = DataControlRowType.Header;
} 
```

这是行不通的。我愿意为这个问题提供任何解决方案，包括通过 javascript 操作 DataTable、网格视图或基础 HTML 表。我是一名 C# 编码员，而 VB.net 对我来说就像是胡言乱语，所以我会欣赏 C# 中的代码。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:24:05.047

默认情况下，该`GridView`控件不允许第二个标头。

任何添加第二个标题的方法都会涉及一些黑客攻击。

这里有两个博客向您展示如何做到这一点：

[真实世界的 GridView：两头](http://blogs.msdn.com/b/mattdotson/archive/2006/03/01/real-world-gridview-two-headed-grouping-gridviews.aspx)

[动态多行列网格标题](http://www.codeproject.com/Articles/27824/Dynamic-Multiple-Row-Column-Grid-Header)

另一个技巧是将某些列的 HeaderText 设置为像`</th></tr><tr><th>`And split the rows yourself 这样的值。

# php - 检查有效的 XML 文件 PHP

> ID：12347666
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:14:13.017
> 
> 标签：php, xml, validation

使用 curl 我下载 XML 文件并保存在本地。如何检查此文件是有效的 XML。在 donloadedd 之后，我将此文件中的信息保存到 mysql 中。

```
 $url = '<URL to XML>';
    $local_path = "myxml.xml";
    $file_handle = fopen($local_path, "w");

    ob_start();
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FILE, $file_handle);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_TIMEOUT, 5); // times out after 4s
    curl_setopt($ch, CURLOPT_TIMEOUT, 5);
    $result = curl_exec($ch);
    curl_close($ch);
    ob_end_clean();
    fclose($file_handle); 
```

我试过这个但没有工作。

```
if (filesize('myxml.xml')>0) {

    $str_xml = file_get_contents('myxml.xml');
    if(simplexml_load_string($str_xml)){
        echo 'XML';
    }else{
        echo 'NOT XML';
    } 
```

代码返回此错误

**警告：simplexml_load_string() [function.simplexml-load-string]：实体：第 1 行：解析器错误：需要开始标记，“<”在**

我哪里错了？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:27:48.777

错误的不是 XML 的解析。

您从 CURL 检索中获得了格式错误的 XML。做一个回声，`$str_xml`看看有什么问题！

# asp.net-mvc - ajax 获取 http 请求的 url 应该对 seo 友好吗？

> ID：12347668
> 
> 赞同：1
> 
> 时间：2012-09-10T08:14:23.180
> 
> 标签：asp.net-mvc, url-rewriting, url-routing, seo

案子：

仅从网站视图或 android、iphone 等获取“GET HTTP”调用（WEBSERVICE）的控制器应该有 url 友好的 url 用于 seo？

（用户友好的网址：`mydomain/param1/value1/param2/value2..`

不是用户友好的网址`mydomain?param1=value1&param2=value2..` ：）

谢谢，

约瑟夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:19:10.407

当涉及到网络服务时，SEO 是无关紧要的，这不像您希望您的网络服务被搜索引擎索引。然而，可读性*总是*一个好主意。

如果您正在寻找一种一致的方式来设计一个可读且对最终用户有意义的后端 API，您可能希望以[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer)方式进行。

# java - 如何获取可以填充到列表视图的两个列表之间的公共元素的 ArrayList。

> ID：12347669
> 
> 赞同：0
> 
> 时间：2012-09-10T08:14:28.437
> 
> 标签：java, android

所以我正在编写一个应用程序，它将返回两个演员的共同电影作品。我已经解析了包含数据的 JSON，直到我有两个 ArrayLists 包含每个搜索查询的电影。然后，我制作了一个 commonFilmography 列表，其中仅包含两个搜索查询共有的标题。我想在列表视图中显示此列表。到目前为止我所做的研究使我相信我需要在 AsyncTask 中执行此操作，因为它是一个网络操作，并且我的类应该返回 ArrayList> 类型。我不确定我的 return commonFilmography 声明的范围在哪里。它不断出现未定义。总的来说，我的方法是最好的方法吗？我是 Android 和 Java 的新手，并且正在快速学习。另外我在第 159 行有一个警告 HashSet 是原始类型。不确定那是什么意思。谢谢！

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import android.widget.EditText;
import android.widget.Button;
import android.view.View;
import android.util.Log;

import java.util.ArrayList;

import java.util.HashMap;
import java.util.List;
import java.util.*;

import org.json.JSONArray;
import org.json.JSONException;

import org.json.JSONObject;

public class Main extends Activity {

private static String personURL = "http://api.themoviedb.org/3/search/person?api_key=bb0b6d66c2899aefb4d0863b0d37dc4e&query=";
private static String creditURlBase = "http://api.themoviedb.org/3/person";
private static String TAG_CAST = "cast";
private static String TAG_ID = "id";
private static String TAG_NAME = "name";
private static String TAG_RESULTS = "results";
private static String TAG_TITLE = "title";

String title = null;

JSONArray idOne = null;
JSONArray idTwo = null;

JSONArray firstCast = null;
JSONArray secondCast = null;

EditText searchOne;
EditText searchTwo;

Button findMovies;

List<String> searchOneFilmography = new ArrayList<String>();
List<String> searchTwoFilmography = new ArrayList<String>();
ArrayList<HashMap<String, String>> commonFilmogrpahy = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.totlayout);

    searchOne = (EditText) findViewById(R.id.searchOne);
    searchTwo = (EditText) findViewById(R.id.searchTwo);

    findMovies = (Button) findViewById(R.id.findMovies);

    //getting

    findMovies.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            new getResults().execute();

        }
    });
}
public class getResults extends AsyncTask<String, Void, ArrayList<HashMap<String, String>> > {

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... params) {
        // TODO Auto-generated method stub

        //get names from each text box
        String nameOne = searchOne.getText().toString();
        String nameTwo = searchTwo.getText().toString();

        nameOne = nameOne.replace(" ", "_");
        nameTwo = nameTwo.replace(" ", "_");

        String searchOneURL = personURL + nameOne;
        String searchTwoURL = personURL + nameTwo;

        //Hashmap for ListView

        //Create JSON Parser Instanece
        JSONParser jParser = new JSONParser();

        //getting JSON string from url
        JSONObject jsonOne = jParser.getJSONFromUrl(searchOneURL);
        JSONObject jsonTwo = jParser.getJSONFromUrl(searchTwoURL);

        try {
            //Get ID of each person
            idOne = jsonOne.getJSONArray(TAG_ID);
            idTwo = jsonTwo.getJSONArray(TAG_ID);

            String firstID = null;
            String secondID = null;
            for(int i = 0; i < idOne.length(); i++){
                JSONObject iDeeOne = idOne.getJSONObject(i);

                //store each json item in variable
                firstID = iDeeOne.getString(TAG_ID);

            }

            for(int i = 0; i < idTwo.length(); i++){
                JSONObject iDeeTwo = idTwo.getJSONObject(i);

                //store each json item in variable
                secondID = iDeeTwo.getString(TAG_ID);
            }
            String creditURlBase = "http://api.themoviedb.org/3/person";

            String firstCreditURL = creditURlBase + firstID;
            String secondCreditURL = creditURlBase + secondID;

            JSONObject jSon = jParser.getJSONFromUrl(firstCreditURL);

            firstCast = jSon.getJSONArray(TAG_CAST);
            for(int i = 0; i < firstCast.length(); i++){
                JSONObject c = firstCast.getJSONObject(i);
                title = c.getString(TAG_TITLE);
                searchOneFilmography.add(title);
            }

            secondCast = jSon.getJSONArray(TAG_CAST);
            for(int i = 0; i < secondCast.length(); i++){
                JSONObject c = firstCast.getJSONObject(i);
                title = c.getString(TAG_TITLE);
                searchTwoFilmography.add(title);
            }

            //create hashmap
            HashMap<String, String> map = new HashMap<String, String>();

            Set hashset = new HashSet(searchOneFilmography);

            for(int i = 0; i < searchTwoFilmography.size(); i++){
                if(hashset.contains(searchTwoFilmography.get(i))){

                    map.put(TAG_TITLE, title);
                    commonFilmogrpahy.add(map);
                }

            }

            }
        catch(JSONException e){
            Log.e("Error", e.toString());
        }

        }

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.totlayout, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:16:01.700

尝试像这样相交。

```
public <T> List<T> intersection(List<T> list1, List<T> list2) {
    List<T> list = new ArrayList<T>();

    for (T t : list1) {
        if(list2.contains(t)) {
            list.add(t);
        }
    }

    return list;
} 
```

但是，您可能想通过 commonsware 使用 Endless Adapter，您可以在此处查看[Android Endless Adapter](https://stackoverflow.com/questions/1656593/android-endless-adapter)

只要您不必等待输入，就可以在初始化将传递给 ListView 的 ArrayAdapter 之前将这两个相交。但是，如果您必须等待此类输入，则使用 asynctask 也可能是一个好主意:)

# php - SQL Select Where 语句中的错误

> ID：12347676
> 
> 赞同：0
> 
> 时间：2012-09-10T08:14:59.020
> 
> 标签：php, sql, syntax, where

自己得到以下错误，我似乎无法弄清楚为什么：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行**的“s-Gravenmoer”附近使用正确的语法**

这是 SQL 语法：

```
$plaats = $row['plaats'];    

$query10 = "SELECT * FROM gebieden WHERE plaats = '$plaats'"; 
```

对于那些感兴趣的人，该变量具有以下内容：'s-Gravenmoer

为什么它给我一个错误？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:17:35.793

这是因为 的值`$plaats`包含单引号。

您的代码很容易发生**[SQL 注入](http://bobby-tables.com/)**。使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php
    $stmt = $dbh->prepare("SELECT * FROM gebieden WHERE plaats = ?");
    $stmt->bindParam(1, $plaats);
    if ($stmt->execute()) 
    {
      while ($row = $stmt->fetch()) 
      {
        print_r($row);
      }
    }
?> 
```

这将允许您使用单引号搜索记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:20:59.030

使用`mysql_real_escape_string`或`htmlspecialchars`

```
$plaats = $row['plaats'];    

$query10 = "SELECT * FROM gebieden WHERE plaats = '".mysql_real_escape_string($plaats)."';"; 
```

# javascript - 检查事件处理程序参数

> ID：12347679
> 
> 赞同：0
> 
> 时间：2012-09-10T08:15:02.697
> 
> 标签：javascript, javascript-events

我在学习 Javascript 时得到了这段代码：

```
myLink.onmouseover = showLinkAttr;
function showLinkContent(evt) {
    if (evt) {
        var url = evt.target;
    }
    else {
        evt = window.event;
        var url = evt.srcElement;
    }
.............. 
```

我不知道为什么我们需要在创建它之前检查事件处理程序参数“evt”。我的想法是这段代码是多余的，因为“evt”不存在（这段代码在脚本文件的开头），表明我们应该在不检查的情况下创建它，如下所示：

```
 myLink.onmouseover = showLinkAttr;
  function showLinkContent(evt) {
        evt = window.event;
        var url = evt.srcElement; 
```

但是，由于我是 JavaScript 新手，下面的代码是由专家编写的。那么，你能告诉我为什么她使用它而不是我在下面写的那个吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:22:15.200

你已经成功了一半......*只有*当客户端运行一个被称为 IE 的浏览器的悲惨借口时才会被定义`evt`。

 *IE 不会将事件对象传递给处理程序，但只有 1 个全局事件对象。这就是为什么您的事件处理程序会检查事件对象是否已作为参数传递，如果没有，它会获取全局事件对象。不过，这可以写得更短：

```
evt = evt || window.event;//evt is equal to itself, if it's not undefined, else it's a reference to the global object 
```

目标同上（您称它为`var url`，这令人困惑，可能是错误的）：

```
var target = evt.target || evt.srcElement; 
```

( `target`or `srcElement`) 返回对 DOM 元素（触发事件的元素）的引用，而不是 url，就像您的 varname 会让您相信的那样。
双管道`||`被称为默认运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:19:00.527

该代码迎合了不同浏览器之间的不一致性。详细看这篇文章：[http ://www.quirksmode.org/js/introevents.html](http://www.quirksmode.org/js/introevents.html)*

# c# - 与会话有关的错误

> ID：12347680
> 
> 赞同：0
> 
> 时间：2012-09-10T08:15:03.677
> 
> 标签：c#, asp.net, session

这里有问题。我有这个登录控制。在登录按钮中，我使用此代码保持会话。

```
 protected void LoginButton_Click(object sender, EventArgs e)
{
    Session["username"] = Login1.UserName;
} 
```

然后，当我尝试取回会话时，它会出错。我该怎么办？这是检索会话的代码。

```
 protected void Page_Load(object sender, EventArgs e)
{
    string username = Session["username"].ToString();
    Label9.Text = username;
} 
```

错误：对象引用未设置为对象的实例。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:25:01.893

我认为在初始 Page_Load 事件中，只有您的代码正在检查 Session 变量。尝试使用这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(! IsPostBack){
       string username = Session["username"].ToString();
       Label9.Text = username;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T08:17:44.957

加载页面时，我认为 Page_Load 被调用，然后会话尚未设置。做这样的事情：

```
if(Session["username"] != null)
{
    string username = Session["username"].ToString();
    Label9.Text = username;
} 
```

# php - 从android中的url获取数据

> ID：12347688
> 
> 赞同：2
> 
> 时间：2012-09-10T08:15:12.490
> 
> 标签：php, android, json, url

我想从 url 获取数据。在这种情况下，我已经拥有完整的 php，数据已经转换为 json 并在 localhost (http://localhost/adchara1/index.php/?year=1) 中运行

这是php脚本

```
<?php
 mysql_connect("localhost","root","");
 mysql_select_db("test");
 $q=mysql_query("SELECT * FROM people
 WHERE
 birthyear>'".$_REQUEST['year']."'");
 while($e=mysql_fetch_assoc($q))
         $output[]=$e;
   print(json_encode($output));
   mysql_close(); ?> 
```

这是结果

```
[{"id":"1","name":"kongkea","sex":"1","birthyear":"1990"}, {"id":"2","name":"thida","sex":"0","birthyear":"2000"}]?> 
```

我想使用按钮单击并在 textview 中显示此结果

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T08:34:30.907

```
public class MainActivity extends Activity {

AsyncTask<Void, Void, Void> mTask;
String jsonString;

String url = "https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=50cent&count=2";

Button b;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    b = (Button) findViewById(R.id.btnFetch);
    final TextView tv = (TextView) findViewById(R.id.txtView);

    mTask = new AsyncTask<Void, Void, Void> () {

        @Override
        protected Void doInBackground(Void... params) {
            try {
                jsonString = getJsonFromServer(url);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);

            tv.setText(jsonString);

        }

    };

    b.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mTask.execute();
        }
    });
}

public static String getJsonFromServer(String url) throws IOException {

    BufferedReader inputStream = null;

    URL jsonUrl = new URL(url);
    URLConnection dc = jsonUrl.openConnection();

    dc.setConnectTimeout(5000);
    dc.setReadTimeout(5000);

    inputStream = new BufferedReader(new InputStreamReader(
            dc.getInputStream()));

    // read the JSON results into a string
    String jsonResult = inputStream.readLine();
    return jsonResult;
}

} 
```

使用此方法从服务器获取 jsonString 后，可以解析并展示 Json 中的数据。

编辑：您收到错误，因为您试图从服务器获取 json 异步任务。您需要在后台执行此操作。您可以使用线程或使用 AsyncTask。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T08:30:02.407

在您的 Button OnClickListener 中编写此代码

```
 try {
        String url = "http://YourIPAddress/adchara1/index.php/?year=1";
        HttpPost httppost = new HttpPost(url);
        try {
            HttpParams p = new BasicHttpParams();
            HttpClient httpclient = new DefaultHttpClient(p);
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httppost,
                    responseHandler);
            JSONArray jArray = new JSONArray(responseBody);
            String text="";
            for (int i = 0; i < jArray.length(); i++) {
                JSONObject e = jArray.getJSONObject(i);
                    text = text + "ID : "+e.getString("id")+"\n";
                    text = text + "Name : "+e.getString("name")+"\n";
                    text = text + "Sex : "+e.getString("sex")+"\n";
                    text = text + "Birthyear : "+e.getString("birthyear")+"\n";
            }
            Textview.setText(text);
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    } catch (Throwable t) {
        Toast.makeText(this, "Request failed: " + t.toString(),
                Toast.LENGTH_LONG).show();
        t.printStackTrace();
    } 
```

如果您有任何澄清通知我

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:41:38.327

```
Button button =(Button) findViewById(R.id.button);
        TextView tv =(TextView) findViewById(R.id.textview);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String result = connectionFromServer("http://localhost/adchara1/index.php/?year=1");
                tv.setText(result);
            }
        });   

 public static String connectionFromServer(String url) throws IOException {

            BufferedReader inputStream = null;

            URL myurl = new URL(url);
            URLConnection dc = myurl.openConnection();

            dc.setConnectTimeout(5000);
            dc.setReadTimeout(5000);

            inputStream = new BufferedReader(new InputStreamReader(
                    dc.getInputStream()));

            // read the JSON results into a string
            String result = inputStream.readLine();
            return result;
        } 
```

这将在 textview 中显示结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:19:30.177

您应该简单地使用 HttpClient 执行获取请求，并使用 JSONArray 对象将字符串转换为 Json Array。

[http://developer.android.com/reference/org/apache/http/client/HttpClient.html](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

[http://developer.android.com/reference/org/json/JSONArray.html](http://developer.android.com/reference/org/json/JSONArray.html)

# c# - ServiceStack 日志记录设置

> ID：12347691
> 
> 赞同：2
> 
> 时间：2012-09-10T08:15:34.957
> 
> 标签：c#, log4net, elmah, servicestack

我想让 log4net 和 elmah 工作。我试图将代码放在 AppHost.cs 中：

```
public class AppHost : AppHostBase {
    //Tell ServiceStack the name and where to find your web services
    public AppHost() : base("Backbone.js TODO", typeof(TodoService).Assembly) { }

    public override void Configure(Funq.Container container) {
        //...
        //Log4Net 1.2.11
        log4net.Config.XmlConfigurator.Configure(new FileInfo("log4net.config"));
        container.Register(x => new Log4NetFactory(true));
        //Elmah 
        container.Register(x => new ElmahLogFactory(container.Resolve<Log4NetFactory>()));
        LogManager.LogFactory = container.Resolve<ElmahLogFactory>();
        container.Register<ILog>(x => LogManager.GetLogger(GetType())); 
        //...
    } 
```

Log4net.config，目前只是一个控制台记录器......

```
<?xml version="1.0" encoding="utf-8" ?>
    <log4net debug="true">
  <appender name="TraceAppender" type="log4net.Appender.TraceAppender">
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%method %-5level - %message%newline"/>
    </layout>
  </appender>
  <root>
    <level value="DEBUG"/>
    <appender-ref ref="TraceAppender"/>
  </root>
</log4net> 
```

然后在需要记录器的地方：

```
ILog Logger {get; set;} //injected by ioc
//...
Logger.Info("Print something"); 
```

该`Logger.Info("....");`行的调用没有错误，但 Log4Net 和 Elmah 都没有在我上面的代码中打印任何输出。如果您有使用 ServiceStack 设置 log4net 或 elmah 的经验，请指出我做错了什么？

* * *

编辑

将 FileInfo 更改为完整路径，它按照 Stefan Egli 的建议工作！

或单击项目中的 log4net.config xml 文件，在属性框中

“复制到输出 - > 如果更新则复制”

那也行。

然后，出现了这样的事情：

```
Auto-attach to process '[11308] w3wp.exe' on machine 'Desktop' succeeded.
//... printing info now ...
Backbone.Todos.AppHost: Info INFO  - TodoService OnGet 
//... but then after a coffee break ...
log4net: Hierarchy: Shutdown called on Hierarchy [log4net-default-repository]
// ... Oops, no longer printing any log ... 
```

似乎网络应用程序在闲置一段时间后自行关闭。然后当我单击网络应用程序时 log4net 无法再次重新启动......知道如何防止这种情况吗？

* * *

编辑 2

切换到 NLog，从此快乐...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:51:47.250

Elmah 用于异常记录，因此根据您迄今为止发布的内容，我不希望在 elmah 日志中看到任何内容。Log4net 可能找不到配置文件：尝试使用完整路径以查看是否可以解决问题。如果确实如此，您需要弄清楚如何动态获得正确的路径。

# linux - Bash 脚本：换行上的 For-Loop ... 语法解释？

> ID：12347692
> 
> 赞同：4
> 
> 时间：2012-09-10T08:15:36.930
> 
> 标签：linux, bash, shell, scripting

关于 SO 和其他地方的一个常见问题是如何使用 bash for 循环遍历每一行输出。我知道答案，并且多年来我一直很高兴地使用以下内容：

```
IFS=$'\n' 
```

但是，我对使用的语法有点困惑。我有一个很好的搜索/谷歌，但由于上面搜索引擎使用/忽略的符号数量众多 - 我没有找到解释。

我最近也在另一个脚本的一些输出中发现了这一点。我在回显 netcat 的结果时遇到问题。经过仔细检查，结果发现 nc 的输出格式类似：

```
$'Some_Output_Here\r` 
```

我最终需要切断 . `\r`，但不确定最好的方法，我最终使用`egrep -o ([0-9|a-Z]*)`. 有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:18:20.720

Bash 手册解释了这种引用方法，它称之为[ANSI-C Quoting](http://www.gnu.org/software/bash/manual/bashref.html#ANSI_002dC-Quoting)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T22:42:44.370

在迈克尔编辑了原始帖子之后，我认为它更有意义。

我认为发布的人需要查找回车的删除。这应该足够了

```
sed -e 's/^M//g' 
```

还有很多其他方法可以删除控制不可打印的字符：

所有控制字符：

```
egrep -v "[[:cntrl:]]"
sed -r "s/[[:cntrl:]]//g" 
```

不可打印字符

```
tr -dc '[:print:]' 
```

# android - 应该在“for”循环中定义变量，或者在“for”循环之外定义变量

> ID：12347695
> 
> 赞同：0
> 
> 时间：2012-09-10T08:15:55.197
> 
> 标签：android

有时有些人告诉我，我最好在“for”循环中定义变量，而其他时候有些人告诉我应该在“for”循环之外定义。我很困扰。

有人能告诉我在 Android 方面哪个更好吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:46:11.850

定义是给变量赋值的部分。应该在适当的范围内进行。如果您的价值取决于迭代，那么显然必须在循环内完成。如果不是，则没有理由每次都重新分配值。看 ：

```
for (A a : B) {
    c = "constant"
} 
```

没有意义。

但是，可以讨论*声明。*它可以放在外面，因为它只分配一次指针内存，但如果它的范围有限并且不需要存在于循环之外，它可以放在里面。

# javascript - JQuery 选择器不工作，而 javascript DOM 工作正常

> ID：12347696
> 
> 赞同：1
> 
> 时间：2012-09-10T08:15:54.877
> 
> 标签：javascript, jquery, dom, jquery-selectors

我在使用 JQuery 选择正确的元素时遇到了麻烦。使用 javascript DOM 工作正常，但使用 JQuery 我似乎无法获得正确的元素......

这工作正常（“中等”长度为 1，“小”长度为 0）：

```
var medium = document.getElementById("Ribbon.Documents.WorkflowButtons.Workflow" + button + "-Medium");
var small = document.getElementById("Ribbon.Documents.WorkflowButtons.Workflow" + button + "-Small");

alert("Medium: " + jQuery(medium).length + " - Small: " + jQuery(small).length + " - State: " + workflowButtonState); 
```

虽然这不起作用（两个长度都等于 0，这是不正确的）：

```
var medium = jQuery("#Ribbon.Documents.WorkflowButtons.Workflow" + button + "-Medium");
var small = jQuery("#Ribbon.Documents.WorkflowButtons.Workflow" + button + "-Small");

alert("Medium: " + jQuery(medium).length + " - Small: " + jQuery(small).length + " - State: " + workflowButtonState); 
```

另一个不起作用的例子是使用 .html()

工作（返回html）：

```
var button = document.getElementById("Ribbon.Documents.WorkflowButtons.Workflow" + buttonId + "-" + state);
$(button).css("display", "none");
alert($(button).html()); 
```

不工作（.html() 返回 NULL）

```
var button = $("#Ribbon.Documents.WorkflowButtons.Workflow" + buttonId + "-" + state);
$(button).css("display", "none");
alert($(button).html()); 
```

知道为什么会这样吗？我在同一页面上执行此操作。所以相同的 HTML 元素等结果应该是相同的，不是吗？

我已验证“document.readyState”等于“完成”

PS：我使用了两种语法：jQuery 和 $。这是为了确保没有其他问题。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:36:17.457

句点在 jQuery 中具有特殊的含义。所以你需要用斜线来逃避它们。不幸的是，斜线也是 Javascript 字符串的转义字符，因此您必须使用双斜线：

```
jQuery("#Ribbon\\.Documents\\.WorkflowButtons\\.Workflow" + button + "-Medium"); 
```

# javascript - 使用 javascript 上传 web worker

> ID：12347697
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:15:55.640
> 
> 标签：javascript, extjs, web-worker

谁能给我使用 javascript webworker 上传功能的 javascript 源代码？我到处搜索，找不到好的解决方案。我确实找到了一些关于如何使用网络工作者的有用链接，以及为什么它有用[，例如](http://www.html5rocks.com/en/tutorials/workers/basics/)

我可以将上传的文件从主页传递到工作文件，我想要做的是再次将它传递给 php 文件，该文件会自动将其上传到数据库，所以让我重新表述我的问题，我该怎么做将javascript变量传递给php文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:53:45.907

您可以使用 ajax 请求将 javascript 变量传递给 php 文件：

```
​var ajax = new XMLHttpRequest​(),
    params = "param1=" + escape(data) + "&param2=" + escape(data2);

​ajax.open("POST", "myphpfile.php", true);
ajax.send(params); 
```

在哪里`data1`并`data2`包含您要发送到 php 文件的内容。您可以添加任意数量的参数，但请记住，该`&`符号将被解释为结尾或参数，并被解释为下一个参数。这就是为什么我们在发送数据之前对其进行转义。

注意：据我所知，ajax 请求确实在网络工作者中工作

在服务器端，您可以通过读取`$_POST`数组来访问数据：

```
echo(rawurldecode($_POST['param1'])); 
```

替换`param1`为您通过 javascript 发送的变量的名称。我们用来`rawurldecode(string);`对另一端的数据进行转义。

希望这能回答你的问题。

# google-chrome - 为什么某些 CSS 属性的过渡很慢且不流畅

> ID：12347701
> 
> 赞同：15
> 
> 时间：2012-09-10T08:16:08.063
> 
> 标签：google-chrome, css, css-transitions, css-transforms, internet-explorer-10

我花了大约 4 个小时进行简单的过渡，并获得了可接受的性能：

首先我尝试了这段代码：

```
left: 2000px;
-webkit-transition: left 1s linear;
-moz-transition: left 1s linear;
-ms-transition: left 1s linear; 
```

结果在 Chrome v21.0.1180.89 和 FireFox v15.0.1 上很糟糕，但在 IE10 上很好。我捕获了 CPU 使用率和 GPU 使用率图，发现 chrome 不使用 GPU 来实现基本的 css 属性，![在此处输入图像描述](../Images/533f3ae3d10f975b005e5ec4ad1aaa47.png) ![在此处输入图像描述](../Images/bccaf9ee734eeec88fa9d1769b3f37b5.png) 现代浏览器的解决方案是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-03-01T22:09:38.243

不要使用 left 或 top、bottom、margin 或 padding 属性来移动元素，而只能使用“transform: translate”。

同样，调整元素的大小仅使用“transform: scale”而不是高度或宽度。

Left、top、bottom、margin、padding、height、width 属性（和许多其他属性）迫使浏览器重新计算所有布局，因此许多元素的几何形状需要大量 CPU 工作。

每个属性都有不同的权重，在这篇文章中清楚地解释 [了高性能动画](http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/)

Edit1：如果您不记得每个属性的权重，[triggers.com似乎是一个不错的页面](http://csstriggers.com/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-10T08:16:08.063

结果我的 4 小时实验最好使用如下变换：

```
 -webkit-transform: translate(2000px, 0);
        -webkit-transition: -webkit-transform 1s linear;
        -moz-transform: translate(2000px, 0);
        -moz-transition: -moz-transform 1s linear;
        -ms-transform: translate(2000px, 0);
        -ms-transition: -ms-transform 1s linear; 
```

这在 IE10、Chrome v21.0.1180.89 和 FireFox v15.0.1 上非常棒。

**注意**：IE9 不支持 tarnsforms

# c# - 访问表单当前实例中的变量

> ID：12347703
> 
> 赞同：1
> 
> 时间：2012-09-10T08:16:12.927
> 
> 标签：c#, wpf, instance

要访问另一个表单或类中的变量，这是创建该类/表单的新实例并基本上使用属性访问变量的正确方法。（get/set）

但是，如果我已经在后台运行了该表单的实例怎么办？是否可以在不创建新实例的情况下访问该表单的变量？

到目前为止我所做的是，我尝试存储`Application.Current.Windows[i]`在一个对象中并使用它访问变量。好吧，尽管进行了铸造，但它没有用。

IE

我要访问的变量是一个名为 MainWindow 的表单，所以我尝试的是；

```
 Private MainWindow mW;
    mW = (MainWindow)Application.Current.Windows[1]; //since it's the second window
    mW.Variable = dummy; 
```

您对此有何建议？先感谢您

# sql - SQL 删除重复项，如果更多 2

> ID：12347705
> 
> 赞同：1
> 
> 时间：2012-09-10T08:16:18.947
> 
> 标签：sql, duplicates

我有一个需要过滤的数据库。

该数据库包含已注册时事通讯的各个公司的员工行。我不希望将时事通讯发送给每个人，我只想将其发送给每个公司的 2 个。如果列出的 1 家公司中超过 2 条，我的 SQL 将如何删除重复项？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:40:43.040

可能这会帮助你...

```
DELETE FROM newsletter nl
WHERE ID NOT IN
(
    select id from newsletter ne where ne.comp_name=hl.comp_name limit 2
) 
```

我使用表名作为示例，只需将其替换为您的原始名称即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:26:53.023

试试这个查询。它适用于 Sql Server 数据库。

```
select * from Employees e
where id in (select top 2 id from Employees ie where e.company = ie.company) 
```

请替换表和字段名称，因为表的确切结构未知。

# vb.net - 如果组合框文本是 ... 然后

> ID：12347709
> 
> 赞同：0
> 
> 时间：2012-09-10T08:16:34.370
> 
> 标签：vb.net, if-statement, combobox

我有一个组合框，它需要其他选择。母鸡然后我想知道如何添加一个，但是哪个 cliked 然后检查组合框文本是否为无？如果是这样的话……

谢谢

更新我得到了以下内容，但我需要合并所有 if 语句，以便根本不留下空白“...”文本。

```
 If ComboBox1.Text.Contains("<None>... ") Then
        MsgBox("Select a printing device first... ")
    Else

    If ComboBox2.Text.Contains("<None>... ") Then
        MsgBox("Select a paper format first... ")
    Else

    If ComboBox3.Text.Contains("<None>... ") Then
        MsgBox("Select a plot style first... ")
    Else
        Me.Close()
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:24:24.220

如果要从后面的代码中添加值，请使用 ddl add OR Insert 方法将值放入下拉列表中。

如果需要放置静态值而不是使用控制属性实用程序添加值。

让我知道正在寻找其他东西...

# java - ElementListener 没有找到类定义错误

> ID：12347725
> 
> 赞同：0
> 
> 时间：2012-09-10T08:17:53.947
> 
> 标签：java, nokia, nokia-s40

我正在使用诺基亚的 java SDK/IDE(Eclipse) 在诺基亚 303 设备上测试示例 java 应用程序。该示例使用类别栏并设置元素侦听器。当我在模拟器上运行应用程序时，它工作正常。但是，当我在设备上运行该应用程序时，出现错误：

未找到类定义错误 java/lang/NoClassDefFoundError com/nokia/example/canvas/CanvasExample:com/nokia/mid/ui/ElementListener

这里缺少什么？ElementListener 应该是 nokiaui 库的一部分。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:17:15.547

您没有说您使用的是哪个版本的 SDK，但根据[http://www.developer.nokia.com/Devices/Device_specifications/Asha_303/](http://www.developer.nokia.com/Devices/Device_specifications/Asha_303/)这款手机的开发平台是“Series 40 Developer Platform 1.1”。

确保您使用的是来自[http://www.developer.nokia.com/Develop/Java/Tools/的“Nokia SDK 1.1 for Java — 用于 Series 40 应用程序”](http://www.developer.nokia.com/Develop/Java/Tools/)

# c# - 使用 download.aspx 时加载图像缓慢

> ID：12347732
> 
> 赞同：2
> 
> 时间：2012-09-10T08:18:15.103
> 
> 标签：c#, asp.net, download

我们尝试实现一个 download.aspx 来控制我们的源，例如特定客户端的图像。我们使用download.aspx.cs中的缓冲方法。代码如下所示：

```
using (var fs = new FileStream(_path, FileMode.Open, FileAccess.Read))
{
    Response.BufferOutput = false;   // to prevent buffering 
    byte[] buffer = new byte[1024];
    int bytesRead = 0;
    if (_file.Extension == ".pdf")
    {
        Response.AddHeader("Content-Disposition", "inline; filename=" + _file.Name);
    }
    else
    {
        Response.AddHeader("Content-Disposition", "attachment; filename=" + _file.Name);
    }
    Response.AddHeader("Content-Length", _file.Length.ToString());
    Response.ContentType = ReturnExtension(_file.Extension.ToLower());

    while ((bytesRead = fs.Read(buffer, 0, buffer.Length)) > 0)
    {
        Response.OutputStream.Write(buffer, 0, bytesRead);
    }
} 
```

下载单个文件时效果很好。但是，在我们的情况下，我们尝试同时加载大约 20 张图像。它变得非常缓慢。以下是捕获的屏幕：-

![在此处输入图像描述](../Images/56bca6e5091f256f672e0e178d51b489.png)

我们查不出原因。我们想知道这是一种控制文件的实用方法，或者还有其他更好的方法来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:34:29.630

Asp.net 的工作线程数量有限。当你做这样的事情时，你将这些线程上的负载增加了很多倍。

最好让 IIS 处理静态内容。

应该是一个文件请求，现在至少是来自您的屏幕截图的 17 个请求。这种负载会显着降低您的服务器速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:38:24.847

我同意上述回复。但是，如果这是您“必须走”的路线。你可以看看以下内容。

您正在使用一个 asp.net 页面，而不是走 Handler 路线，您削减了很多 asp.net 生命周期，这将有助于减少您的图像加载时间。

[其次看一下异步 HTTP 处理程序。](http://msdn.microsoft.com/en-us/library/ms227433%28v=vs.90%29.aspx)

您还可以查看缓存响应输出，这将有助于提高性能。 [读这个](http://msdn.microsoft.com/en-us/library/y96218s9%28v=vs.71%29.aspx)

我希望其中一些信息有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T06:17:50.100

我没有使用它，但是[HttpModule](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)类可能会为您提供一种让 IIS 静态地为您的文件提供服务的方法，同时让您以编程方式控制对这些文件的访问：

```
public class AccessControlModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.BeginRequest +=
            (s, e) =>
            {
                if (!AccessPermitted(context))
                    context.Response.Redirect(AccessDeniedUrl);

                // Otherwise, IIS will serve the file as normal
            };
    }

    //...
} 
```

* * *

```
<httpModules>
   <add name="AccessControlModule" type="MyNamespace.AccessControlModule" />
</httpModules> 
```

请参阅[此处](http://www.netfxharmonics.com/2007/08/Real-World-HttpModule-Examples)获取一些示例。

# java - 短路运算符总是从左到右执行吗？

> ID：12347733
> 
> 赞同：4
> 
> 时间：2012-09-10T08:18:19.407
> 
> 标签：java, short-circuiting

所以如果代码：

```
if(f() && false) {
    // never happens
} 
```

我可以始终确定它`f()`会被调用并且永远不会被编译器“优化”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T08:20:15.033

编译器做的`javac`优化很少。

JIT 可以优化代码，但在这种情况下，您可以确定`&&`并且`||`始终从左到右进行评估。

> 除了赋值运算符之外的所有二元运算符都是从左到右计算的

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

来自 JLS。

> 15.7\. 评估令
> 
> Java 编程语言保证运算符的操作数看起来是以特定的评估顺序进行评估的，即从左到右。
> 
> 建议代码不要严重依赖本规范。当每个表达式最多包含一个副作用时，代码通常会更清晰，作为其最外层的操作，并且当代码不完全依赖于表达式的从左到右求值的结果出现的异常时。

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html)

# ms-access - 如何编写一个在更改表时创建文本文件的宏？

> ID：12347743
> 
> 赞同：1
> 
> 时间：2012-09-10T08:19:19.200
> 
> 标签：ms-access, vba, text-files

我正在尝试创建一个宏，当更改表时，它将为所选路径创建一个简单的文本文件。我一直在 VB.NET 中编程，但访问是在 vba 中，我一直在做一些研究，并认为我可以做到。但是，如果您将代码插入其中，访问宏编写器会让我感到困惑。有没有办法在 VB.NET 中制作一个或使用可以访问的 Visual Studio？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:07:26.343

在这种情况下，我认为您应该利用数据宏。即使该表在 MS Access 之外使用，这些也会运行。例如：

![在此处输入图像描述](../Images/71b63201e0156bbb5f2a70d2786c1374.png)

或者

```
Sub LogThis(strText)
Const ForAppending = 8
Dim sPath As String
Dim fs As Object
Dim ts As Object

    sPath = CurrentProject.Path

    Set fs = CreateObject("Scripting.FileSystemObject")
    If fs.FileExists(sPath & "\Log.txt") = True Then
        Set ts = fs.OpenTextFile(sPath & "\Log.txt", ForAppending)
    Else
        Set ts = fs.CreateTextFile(sPath & "\Log.txt")
    End If
    ts.WriteLine Now & " " & strText
    ts.Close
End Sub 
```

# java - 使用字符串列表搜索输入数字（类似于 t9 字典）

> ID：12347746
> 
> 赞同：0
> 
> 时间：2012-09-10T08:19:22.320
> 
> 标签：java, c++, c

T9 词典是如何工作的？它背后的数据结构是什么。例如：有 16 个单词的列表/字典（全部大写）。您将输入数字，相应的输出应该是与字典中的数字匹配的单词。如何在 C/C++/JAVA 中实现这一点。[如果将任何单词添加到列表中，它也应该支持]

```
2:A/B/C
3:D/E/F
4:G/H/I
5:J/K/L
6:M/N/O
7:P/Q/R/S
8:T/U/V
9:W/X/Y/Z

LIST{DRAWING,PAINTING,DANCE.....} 
```

输出窗口示例：

```
Input : 3729464
output : DRAWING 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:41:48.997

如果简单直接查找完整单词就足够了，最好编写一个函数，将单词的字符替换为对应的数字：

```
A,B,C  -> 2
D,E,F  -> 3 
```

等等

然后将该函数应用于所有字典条目并将结果存储为键，但将原始形式存储为哈希表（或类似数据结构）的值。由于每个数字可以表示多个不同的字符，因此可能必须将同一个键映射到多个值。您可以使用字符串列表作为值类型：

```
entries(3829464)  = [DRAWING]
entries(72468464) = [PAINTING]
entries(843)      = [THE,TIE] 
```

等等。

然后，您可以直接针对散列的键搜索给定的输入数字序列，并轻松地将所有候选者检索为现成的列表。

实际的 T9 函数也支持延续：输入一个数字序列，并检索所有可能是输入序列的延续的字符串。为此，搜索树是一个很好的数据结构。同样，字符转换产生的数字最好用作 trie 的转换标签，字符串的原始形式最好存储在接受状态中。您可能希望在内部节点中存储其他信息，例如在给定节点下的子树中找到的接受状态的总数；这将帮助您在 O(1) 时间内决定是开始遍历 subtrie 以检索所有继续候选者，还是更好地等待用户提供更多输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:06:54.750

不完全回答这个问题：

T9不也是做猜字之类的吗？我假设那里有像加权树一样的东西，猜测到目前为止输入的数字序列中最可能的（三个左右）单词。那将是相当多的 O(1) 。

看来，这里并不真正需要，但我只是好奇。

# android - 使用 webRTC 推送通知

> ID：12347747
> 
> 赞同：1
> 
> 时间：2012-09-10T08:19:24.477
> 
> 标签：android, notifications, push, webrtc

我正在开发一个 android 项目，我需要从我自己的服务器（我创建的）实现*推送通知消息。*

我需要使用[WebRTC](http://www.webrtc.org/)来实现它，但经过大量探索后，我知道 WebRTC 是用于语音通话的。我的假设是否正确，如果不是，我可以在哪里找到一些使用 WebRTC 实现推送通知的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:23:39.493

WebRTC 不会帮助您实现您想要实现的目标。

WebRTC 处理网络上的实时通信，其当前的主要重点是语音和视频。

稍后将添加纯数据，但即便如此，我仍然怀疑您是否会达到预期的结果。

WebRTC 的主要前提是您知道连接中有哪些 2 个参与者，他们已经知道他们将要进行通信，然后 webRTC 开始发送实际数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:36:52.410

确保查看 RFC6455 HTML5 WebSockets 以获得轻量级双向通信，这似乎比 WebRTC 更适合您的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T08:59:35.280

您可以使用 websockets 创建推送通知。我为 WebRTC 应用程序编写[了一个教程](http://blog.felixhagspiel.de/index.php/posts/create-your-own-videochat-application-with-html-and-javascript)，其中还解释了如何设置一个 websocket 服务器来发送信号。您可以使用教程的那一部分（从“服务器”开始）共享通知，而忽略 WebRTC 的其余部分。

# speech-recognition - 我从 gmm 得出的似然值是否正确？

> ID：12347750
> 
> 赞同：0
> 
> 时间：2012-09-10T08:19:40.437
> 
> 标签：speech-recognition, k-means, gaussian, mfcc

我正在做一个程序情感识别语音。

使用 mfcc + K-mean + GMM，我得到的可能性是 -15012、-43400、-8000

不过，它的价值比我大得多。是正确的价值吗？

Wave 文件的长度通常为 2~3，我使用以下选项进行初始化。

```
MFCC option 
SampleRate = 16000 
WindowSize = 256 
NumberCoefficients = 13
UseFirstCoefficient = true 
MinFreq = 20.0 
MaxFreq = 16000.0 
NumberFilters = 25 
K-Means Clustering default option 
NumberCluster = 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:33:46.453

可能性的实际值取决于特征提取过程中使用的许多参数。例如，filterbank 可能以不同的方式创建。它们在不同的引擎中是不同的。所以只看这些值你不能说它们是否正确。

由于您没有提及引擎，因此无法回答这个问题。

# c# - 将 WebResponse 保存为 txt

> ID：12347751
> 
> 赞同：6
> 
> 时间：2012-09-10T08:19:44.477
> 
> 标签：c#, asp.net

我正在寻找一种等效于 WebResponse 中的 Request.SaveAs 的方法。但我找不到它。

我想将 webresponse 的标题和正文存储在 txt 文件中。

你知道实现它的任何技术吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T08:41:06.237

没有内置方法，但您可以简单地使用[GetResponseStream](http://msdn.microsoft.com/en-us/library/system.net.webresponse.getresponsestream.aspx)方法获取响应流并将其保存到文件中。

* * *

**例子：**

```
WebRequest myRequest = WebRequest.Create("http://www.example.com");
using (WebResponse myResponse = myRequest.GetResponse())
using (StreamReader reader = new StreamReader(myResponse.GetResponseStream()))
{
    // use whatever method you want to save the data to the file...
    File.AppendAllText(filePath, myResponse.Headers.ToString());
    File.AppendAllText(filePath, reader.ReadToEnd());
} 
```

* * *

尽管如此，您可以将其包装到扩展方法中

```
WebRequest myRequest = WebRequest.Create("http://www.example.com");
using (WebResponse myResponse = myRequest.GetResponse())
{
    myResponse.SaveAs(...)
} 
```

...

```
public static class WebResponseExtensions
{
    public static void SaveAs(this WebResponse response, string filePath)
    {
        using (StreamReader reader = new StreamReader(response.GetResponseStream()))
        {
            File.AppendAllText(filePath, myResponse.Headers.ToString());
            File.AppendAllText(filePath, reader.ReadToEnd());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:31:32.627

WebClient 类有 ResponseHeaders 集合：

[http://msdn.microsoft.com/en-us/library/system.net.webclient.responseheaders.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.responseheaders.aspx)

# c# - 在 transaction.Commit 或 Rollback 之后连接对象会发生什么

> ID：12347752
> 
> 赞同：3
> 
> 时间：2012-09-10T08:19:47.113
> 
> 标签：c#, oracle

我有一个名为 Databaseprovider 的类，并且我有一个名为 CurrentTransaction 的静态 OracleTransaction 属性。这是我为它分配价值的方式：

```
 OracleConnection connection = ConnectionProvider.CreateConnection(conString);
        connection.Open();
        DatabaseProvider.CurrentTransaction = connection.BeginTransaction(IsolationLevel.ReadCommitted); 
```

我刚刚注意到，在提交或回滚之后，我的事务的连接属性设置为空。现在我想知道我之前创建的 OracleConnection 对象会发生什么？它是否也被关闭和处置，或者它成为一个免费的、无法访问的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:21:57.157

连接保持打开状态，直到代码具有`.Close()`.

代替上面的代码，用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块编写代码。

```
using (OracleConnection connection = ConnectionProvider.CreateConnection(conString))
{
   ....
} 
```

需要时初始化昂贵的对象，使用后将其丢弃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:39:56.900

使用 try catch finally 块并在 finally 块中显式关闭连接以释放连接。

# arrays - 如何在 perl 中拆分这个数组？

> ID：12347753
> 
> 赞同：5
> 
> 时间：2012-09-10T08:19:51.347
> 
> 标签：arrays, perl

如何拆分以下数组，以便我每次只能获得 lon 和 lat 点？在 perl 脚本中？

```
[{"lon":77.594376,"lat":12.971606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.604376,"lat":12.980606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.674376,"lat":12.981606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.684376,"lat":12.982606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.744376,"lat":12.983606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.784376,"lat":12.990606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.804376,"lat":12.991606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.824376,"lat":12.995606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.874376,"lat":12.997606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.894376,"lat":12.999606,"bfg":18000,"xyz":null,"jky":null}] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T08:21:28.457

您可以使用[Perl 中的 JSON 库](http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm)来解析 JSON 字符串。之后，您将拥有一个哈希数组，您可以对其进行迭代并提取纬度/经度值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T09:37:14.300

*按照j0nes*的建议使用`JSON`库，这是一个单行代码，可以打印并在标准中给出：*`lat``lon`*

 *```
perl -MJSON -le '$, = "\t"; map { print $_->{lon}, $_->{lat} } @{JSON->new->decode(<>)}' 
```

输出：

```
77.594376   12.971606
77.604376   12.980606
77.674376   12.981606
77.684376   12.982606
77.744376   12.983606
77.784376   12.990606
77.804376   12.991606
77.824376   12.995606
77.874376   12.997606
77.894376   12.999606 
```

解释：

*   `-MJSON`加载包。
*   `$,`将字段分隔符设置为制表符。
*   `map`将打印命令映射到解码函数返回的数组引用中的每个散列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T09:25:54.447

正如其他人已经说过的那样，使用库来完成这项任务会更好（请参阅下面的代码示例）。如果你像 flesk 那样做，你必须确保，`lat`总是在`lon`. 这可能更健壮一点，但请注意，我将数据拆分为无效`JSON`字符串的块：

```
#!/usr/bin/env perl

use strict;
use warnings;

# split in (invalid) object parts
my @chunks = split /},/ => <DATA>;

# iterate over chunks
for (@chunks) {

    # extract latitude/longitude
    my $lon = /"lon":([^,]+)/ ? $1 : 'UNKNOWN';
    my $lat = /"lat":([^,]+)/ ? $1 : 'UNKNOWN';

    # print data
    print "lon: $lon, lat: $lat\n";
}

__DATA__
[{"lon":77.594376,"lat":12.971606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.604376,"lat":12.980606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.674376,"lat":12.981606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.684376,"lat":12.982606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.744376,"lat":12.983606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.784376,"lat":12.990606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.804376,"lat":12.991606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.824376,"lat":12.995606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.874376,"lat":12.997606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.894376,"lat":12.999606,"bfg":18000,"xyz":null,"jky":null}] 
```

输出：

```
lon: 77.594376, lat: 12.971606
lon: 77.604376, lat: 12.980606
lon: 77.674376, lat: 12.981606
lon: 77.684376, lat: 12.982606
lon: 77.744376, lat: 12.983606
lon: 77.784376, lat: 12.990606
lon: 77.804376, lat: 12.991606
lon: 77.824376, lat: 12.995606
lon: 77.874376, lat: 12.997606
lon: 77.894376, lat: 12.999606 
```

一个更好、更简单的解决方案将只使用[JSON](http://p3rl.org/JSON)库：

```
#!/usr/bin/env perl

use strict;
use warnings;
use JSON 'decode_json';

# decode input
my $objects = decode_json <DATA>;

# iterate over objects and print data
printf "lon: %f, lat: %f\n", $_->{lon}, $_->{lat} for @$objects;

__DATA__
[{"lon":77.594376,"lat":12.971606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.604376,"lat":12.980606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.674376,"lat":12.981606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.684376,"lat":12.982606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.744376,"lat":12.983606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.784376,"lat":12.990606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.804376,"lat":12.991606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.824376,"lat":12.995606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.874376,"lat":12.997606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.894376,"lat":12.999606,"bfg":18000,"xyz":null,"jky":null}] 
```

输出：同上。

所以，除非您完全知道自己在做什么，否则*请不要手动操作！*:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T09:12:10.203

我也建议使用 JSON 库，但如果它只是一个关闭，你可以做这样的事情：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;

my @data;

while (<DATA>) {
    if (/"lon":([^,]+),"lat":([^,]+)/) {
        push @data, [$1, $2];
    }
}

print Dumper \@data;

__DATA__
[{"lon":77.594376,"lat":12.971606,"bfg":18000,"xyz":null,"jky":null},{"lon":77.604376,"lat":12.980606,"bfg":18000,"xyz":null,"jky":null},"lon":77.674376,"lat":12.981606,"bfg":18000,"xyz":null,"jky":null},"lon":77.684376,"lat":12.982606,"bfg":18000,"xyz":null,"jky":null},"lon":77.744376,"lat":12.983606,"bfg":18000,"xyz":null,"jky":null},"lon":77.784376,"lat":12.990606,"bfg":18000,"xyz":null,"jky":null},"lon":77.804376,"lat":12.991606,bfg":18000,"xyz":null,"jky":null},"lon":77.824376,"lat":12.995606,"bfg":18000,"xyz":null,"jk":null},{"lon":77.874376,"lat":12.997606,"bfg":18000,"xyz":null,"jky":null},"lon":77.894376,"lat":12999606,"bfg":18000,"xyz":null,"jky":null}] 
```

结果：

```
$VAR1 = [
      [
        '77.594376',
        '12.971606'
      ],
      [
        '77.674376',
        '12.981606'
      ],
      [
        '77.744376',
        '12.983606'
      ],
      [
        '77.804376',
        '12.991606'
      ],
      [
        '77.874376',
        '12.997606'
      ],
      [
        '77.894376',
        '12.999606'
      ]
    ]; 
```*

# php - 如何从 php 中的文本框中提取 URL，然后发布到数据库

> ID：12347755
> 
> 赞同：0
> 
> 时间：2012-09-10T08:19:59.963
> 
> 标签：php, mysql

我是一个非常新的 PHP 程序员。目前，我在页面上有一个文本框，人们应该在其中将 URL 输入文本框中，每个 URL 位于单独的行中，如下所示：

```
www.microsoft.com
www.msn.com
www.yahoo.com 
```

我想从该文本框中提取链接并将它们作为单独的条目输入到数据库中。我怎样才能做到这一点？我什至不确定从哪里开始编写脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:32:25.417

要将链接提取到数组中，您可以执行以下操作：

`$links = Explode ( "\n", $_POST['textbox'] );`

这将返回一个数组，其中每个链接作为数组的一个元素，然后您可以简单地循环遍历该数组并将链接插入数据库。

# hibernate - 使用外键字段的最佳实践

> ID：12347759
> 
> 赞同：1
> 
> 时间：2012-09-10T08:20:17.140
> 
> 标签：hibernate

我有 2 个表，Word 和 State，State 包含 2 个 cols，ID 和 CurrentState，它的 3 个静态行是 1-Active，2-InActive，3-Other Word 是我要添加行的表。它有 4 个列，ID、Value、Description 和 CurrentState。它在 currentState 列上有一个 State 的外键 这是我拥有的工作代码，它创建一个 Word，设置它的 currentState 字段并保持它。

```
Word word = new Word(); 
word.setValue("someWord");
word.setDescription("some description for this word");      
State state = new State(1,"Active");
word.setState(state);   
worddao.saveOrUpdate(word); 
```

问题是这看起来不太对劲。创建 State 实例的最佳实践是什么，以便我可以创建一个指向有效 State 行的 Word。枚举是这里的一个选项吗？我的意思是我可能会意外地创建一个 ID = 5 的 State 并违反外键约束。我想首先防止这种情况发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:28:26.600

执行此操作的安全方法是查找状态对象而不是创建新对象。您可以将实体标记为可缓存，也可以将检索状态的查询标记为可缓存以避免不必要的查询。

```
Word word = new Word(); 
word.setValue("someWord");
word.setDescription("some description for this word");      
State state = stateDao.findByState("Active")
word.setState(state);   
worddao.saveOrUpdate(word); 
```

主/参考数据表的另一个选项（我通常遵循）是没有数字 ID。只需有一列是它的字符串表示形式，并将其用作外键列。

这样做的好处是，当您查看数据库中的数据时 - 单词表的状态将很容易解释。您无需再进行一次心理查找即可理解数据。

另一个优点是缓存变得更容易。我们只需要缓存实体而不是查询，因为查找总是通过主键。

稍后，如果需要，您可以添加另一个作为显示标签的列。

# gwt - 带有 maven 插件的 gwt 别名资源

> ID：12347768
> 
> 赞同：0
> 
> 时间：2012-09-10T08:21:11.343
> 
> 标签：gwt, maven-plugin

我正在使用带有 maven 插件的 gwt。我的`web.xml`样子是这样的：

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5" xmlns="http://java.sun.com/xml/ns/javaee">

<!-- Servlets -->
<servlet>
    <servlet-name>queryServiceImpl</servlet-name>
    <servlet-class>com.vo.search.server.QueryServiceImpl</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>queryServiceImpl</servlet-name>
    <url-pattern>/admin/queryService</url-pattern>
</servlet-mapping>

<!-- Default page to serve -->
<welcome-file-list>
    <welcome-file>Admin.html</welcome-file>
</welcome-file-list>
</web-app> 
```

我的模块`Admin.gwt.xml`看起来像这样：

```
<module rename-to='admin'>
<!-- Inherit the core Web Toolkit stuff. -->
<inherits name="com.google.gwt.core.Core" />
<inherits name='com.google.gwt.user.User' />
<inherits name="com.google.gwt.i18n.I18N" />
<inherits name="com.google.gwt.i18n.CldrLocales" />
<inherits name="com.google.gwt.user.theme.clean.CleanResources" />

<!-- Enable debug ID. -->
<inherits name="com.google.gwt.user.Debug" />
<set-property name="gwt.enableDebugId" value="true" />

<!-- We need the JUnit module in the main module, -->
<!-- otherwise eclipse complains (Google plugin bug?) -->
<!-- <inherits name='com.google.gwt.junit.JUnit' /> -->

<!-- Inherit the default GWT style sheet. You can change -->
<!-- the theme of your GWT application by uncommenting -->
<!-- any one of the following lines. -->
<inherits name='com.google.gwt.user.theme.clean.Clean' />
<!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
<!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
<!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/> -->

<!-- Other module inherits -->

<!-- Specify the app entry point class. -->
<entry-point class='com.vo.search.client.Admin' />

<!-- Specify the app entry point class. -->

<!-- Specify the paths for translatable code -->
<source path='client' />
<source path='shared' />

</module> 
```

最后，我的`pom.xml`样子是这样的：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<!-- POM file generated with GWT webAppCreator -->
<modelVersion>4.0.0</modelVersion>
<groupId>com.vo.search</groupId>
<artifactId>search-admin</artifactId>
<packaging>war</packaging>
<version>1.0</version>
<name>Admin</name>

<properties>
    <!-- Convenience property to set the GWT version -->
    <gwtVersion>2.5.0-rc1</gwtVersion>
    <!-- GWT needs at least java 1.5 -->
    <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-servlet</artifactId>
        <version>${gwtVersion}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwtVersion}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <classifier>sources</classifier>
        <scope>test</scope>
    </dependency>
</dependencies>

<build>
    <!-- Generate compiled stuff in the folder used for developing mode -->
    <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>

    <plugins>

        <!-- GWT Maven Plugin -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.5.0-rc1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test</goal>
                        <goal>i18n</goal>
                        <goal>generateAsync</goal>
                    </goals>
                </execution>
            </executions>
            <!-- Plugin configuration. There are many available options, see gwt-maven-plugin 
                documentation at codehaus.org -->
            <configuration>
                <runTarget>Admin.html</runTarget>
                <hostedWebapp>${webappDirectory}</hostedWebapp>
                <i18nMessagesBundle>com.vo.search.client.Messages</i18nMessagesBundle>
            </configuration>
        </plugin>

        <!-- Copy static web files before executing gwt:run -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>exploded</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <webappDirectory>${webappDirectory}    </webappDirectory>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>
    </plugins>
</build>
</project> 
```

构建和运行项目工作正常。尝试访问我在控制台中看到的页面时：

```
[WARN] Aliased resource: file:/C:/workspaces/search/admin-mvn/search-admin/src/main/webapp/admin/admin.nocache.js==file:/C:/workspaces/search/admin-mvn/search-admin/src/main/webapp/Admin/Admin.nocache.js
[WARN] Aliased resource: file:/C:/workspaces/search/admin-mvn/search-admin/src/main/webapp/admin/admin.nocache.js==file:/C:/workspaces/search/admin-mvn/search-admin/src/main/webapp/Admin/Admin.nocache.js
[WARN] 404 - GET /admin/admin.nocache.js (127.0.0.1) 1408 bytes
   Request headers
      Host: 127.0.0.1:8888
      Connection: keep-alive
      User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like     Gecko) Chrome/22.0.1229.39 Safari/537.4
      Accept: */*
      Referer: http://127.0.0.1:8888/Admin.html?gwt.codesvr=127.0.0.1:9997
      Accept-Encoding: gzip,deflate,sdch
      Accept-Language: en-US,en;q=0.8
      Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
   Response headers
      Content-Type: text/html; charset=iso-8859-1
      Content-Length: 1408 
```

我认为问题在于它`admin.nocache.js`在`admin`dir 中查找文件，但生成的 dir 实际上是`Admin`即使我的`rename-to`属性`admin`在模块配置文件中。更改`rename-to`属性以匹配没有帮助。

[这是我由gwt-maven-plugin archetype](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/archetype.html)创建的项目组织： ![在此处输入图像描述](../Images/b2875665153cce51066935d8d0271c7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:22:16.230

请检查您的 Admin.html。我认为`admin.nocache.js`应该是：

```
<script type="text/javascript" language="javascript" src="../admin/admin.nocache.js"></script> 
```

你的档案 `... search-admin/src/main/webapp/Admin/Admin.nocache.js`

应该在这里： `... search-admin/src/main/Admin/Admin.nocache.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:13:26.783

如果您使用 Google Plugin for Eclipse（而不是 Eclipse `mvn gwt:run`）启动 DevMode，请遵循以下规则：[https ://developers.google.com/eclipse/docs/faq#gwt_with_maven](https://developers.google.com/eclipse/docs/faq#gwt_with_maven)

特别是最重要的，不要选择`src/main/webapp`WAR*目录*，这就是为什么DevMode会在那里生成文件，它只会给你带来问题：[GWT模块可能需要（重新）编译REDUX](https://stackoverflow.com/q/5719118/116472)

# php - 多个表的PHP正则表达式

> ID：12347770
> 
> 赞同：-2
> 
> 时间：2012-09-10T08:21:21.803
> 
> 标签：php, regex, preg-match-all

我需要帮助构建用于文本分隔的正则表达式。现在我有一些文字

```
text text text
text text text
<div> text text text </div>
<table class="table1">
<tr>
<td>
</td>
</tr>
</table>
text text text
text text text
text text text
<table class="table2">
<tr>
<td>
</td>
</tr>
</table>
text text text
text text text
text text text 
```

我需要创建一个将文本和表格分开的正则表达式。现在我有正则表达式

```
preg_match_all( "/(.*)(<table(?s).*?\/table>)(.*)/si", $value[ 'TEXT' ], $matches ); 
```

这个表达式适用于像这样的文本

```
text text text
text text text
<div> text text text </div>
<table class="table1">
<tr>
<td>
</td>
</tr>
</table> 
```

它与

```
text text text
text text text
<div> text text text </div> 
```

和

```
 <table class="table1">
    <tr>
    <td>
    </td>
    </tr>
    </table> 
```

但是对于文字

```
text text text
text text text
<div> text text text </div>
<table class="table1">
<tr>
<td>
</td>
</tr>
</table>
text text text
text text text
text text text
<table class="table2">
<tr>
<td>
</td>
</tr>
</table>
text text text
text text text
text text text 
```

我的正则表达式不起作用。它是返回数组

```
[0] =>"text text text
    text text text
    <div> text text text </div>
    <table class="table1">
    <tr>
    <td>
    </td>
    </tr>
    </table>
    text text text
    text text text
    text text text",
[1]=>"<table class="table2">
    <tr>
    <td>
    </td>
    </tr>
    </table>",
[2]=>"text text text
    text text text
    text text text" 
```

如何构建正确的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:40:35.117

它应该在这附近的某个地方：

```
$doc = new DOMDocument;
$doc->loadHTML('html string');

$tables = $doc->getElementsByTagName('table');
foreach($tables as $table){
    $parent = $table->parentNode;
    $parent->removeChild($table);
}

$doc->normalizeDocument();

$text = array();
$xpath = new DOMXPath($doc);
$textnodes = $xpath->evaluate('//text()');
foreach($textnodes as $textnode){
    $text[] = $textnode->wholeText;
}
print_r($text) 
```

此代码加载您的 html、查找和删除表、查找所有文本节点并用它们的内容填充数组。您应该阅读有关[PHP DOM](http://nl.php.net/manual/en/book.dom.php)的更多信息，以根据您的需要对其进行微调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:45:13.937

摆脱`(.*)`正则表达式开头和结尾的 。唯一一次你必须“填充”这样的正则表达式是当你使用类似 Java 的`matches()`方法时，它会自动在两端锚定匹配。

这里发生的情况是，第一个`(.*)`最初吞噬了整个文档，然后后退到足以让下一部分（`<table`等）匹配一个表格元素。然后第二个`(.*)`消耗掉剩下的东西。这就解释了为什么`preg_match_all()`只捕获一个表格元素，以及为什么它总是最后一个。

你也可以摆脱`(?s)`。它并没有真正伤害任何东西，但它所做的只是打开`single-line`模式，并且您已经`s`在最后使用修饰符完成了该操作。您可能打算匹配一个空白字符（应该是`\s`），但这会阻止它匹配`<table>`（即没有属性的表标签）。您应该改用`\b`（单词边界）：

```
preg_match_all( '~<table\b.*?/table>~si', $value[ 'TEXT' ], $matches ); 
```

但请注意，这种方法仅适用于极其简单的 HTML。即使在完全有效的 HTML 中，也有很多很多东西可以打败它（嵌套表格标签是最明显的例子）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:14:57.657

最好的解决方案是这段代码：

```
$test = preg_replace( "/<table(?s).*?\/table>/si", '<BREAKHERE>', $value[ 'TEXT' ] );

            $texts = explode( '<BREAKHERE>', $test );

            foreach ( $texts as $keyTEXT => $valueTEXT )
            {
                $TmpVal = str_replace( "\r", "", $valueTEXT );
                $TmpVal = str_replace( "\n", "", $TmpVal );
                $TmpVal = str_replace( "\r\n", "", $TmpVal );
                if ( trim( $TmpVal ) != '' )
                {
                    preg_match_all( "/\w/", $TmpVal, $mtchs );

                    if ( count( $mtchs[ 0 ] ) > 0 )
                    {
                        $value[ 'TEXT' ] = str_replace( $valueTEXT, ' <div class="panel-container">' . $valueTEXT . '</div>', $value[ 'TEXT' ] );
                    }
                }
            } 
```

# c# - ZipArchive creates invalid ZIP file

> ID：12347775
> 
> 赞同：53
> 
> 时间：2012-09-10T08:21:44.993
> 
> 标签：c#, .net, windows-8, ziparchive

I am trying to create a new ZIP package from code with one entry and save the ZIP package to a file. I am trying to achive this with the **System.IO.Compression.ZipArchive** class. I am creating the ZIP package with the following code:

```
using (MemoryStream zipStream = new MemoryStream())
{
    using (ZipArchive zip = new ZipArchive(zipStream, ZipArchiveMode.Create))
    {
        var entry = zip.CreateEntry("test.txt");
        using (StreamWriter sw = new StreamWriter(entry.Open()))
        {
            sw.WriteLine(
                "Etiam eros nunc, hendrerit nec malesuada vitae, pretium at ligula.");
        } 
```

Then I save the ZIP to a file either in WinRT:

```
 var file = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync("test.zip", CreationCollisionOption.ReplaceExisting);
        zipStream.Position = 0;
        using (Stream s = await file.OpenStreamForWriteAsync())
        {
            zipStream.CopyTo(s);
        } 
```

Or in normal .NET 4.5:

```
 using (FileStream fs = new FileStream(@"C:\Temp\test.zip", FileMode.Create))
        {
            zipStream.Position = 0;
            zipStream.CopyTo(fs);
        } 
```

However, I can't open the produced files neither in Windows Explorer, WinRAR, etc. (I checked that the size of the produced file matches the Length of the zipStream, so the stream itself was saved to the file correctly.)
Am I doing something wrong or is there a problem with the ZipArchive class?

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-09-10T10:48:30.647

I found the—in hindsight, obvious—error in my code. The ZipArchive has to be **disposed** to make it write its content to its underlying stream. So I had to save the stream to a file after the end of the using block of the ZipArchive.
And it was important to set the **leaveOpen** argument of its constructor to true, to make it not close the underlying stream. So here is the complete working solution:

```
using (MemoryStream zipStream = new MemoryStream())
{
    using (ZipArchive zip = new ZipArchive(zipStream, ZipArchiveMode.Create, true))
    {
        var entry = zip.CreateEntry("test.txt");
        using (StreamWriter sw = new StreamWriter(entry.Open()))
        {
            sw.WriteLine(
                "Etiam eros nunc, hendrerit nec malesuada vitae, pretium at ligula.");
        }
    }

    var file = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync(
        "test.zip",
        CreationCollisionOption.ReplaceExisting);

    zipStream.Position = 0;
    using (Stream s = await file.OpenStreamForWriteAsync())
    {
        zipStream.CopyTo(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T08:24:55.537

On all of your Stream Object you must rewind the streams from the beggining in order from them to be read correctly by other applications using the .Seek method.

Example:

```
zipStream.Seek(0, SeekOrigin.Begin); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-31T09:04:33.633

```
// Create file "archive.zip" in current directory use it as destination for ZIP archive
using (var zipArchive = new ZipArchive(File.OpenWrite("archive.zip"), 
ZipArchiveMode.Create))
{
    // Create entry inside ZIP archive with name "test.txt"
    using (var entry = zipArchive.CreateEntry("test.txt").Open())
    {
        // Copy content from current directory file "test.txt" into created ZIP entry 
        using (var file = File.OpenRead("test.txt"))
        {
            file.CopyTo(entry);
        }
    }
} 
```

In result you will get archive "archive.zip" with single entry file "test.txt". You need this cascade of `using` to avoid any interaction with already disposed resources.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T21:43:52.947

You can follow the same idea, only in reverse order, using the file stream like source. I did the form below and the file was opened normally:

```
string fileFormat = ".zip"; // any format
string filename = "teste" + fileformat;

StorageFile zipFile = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync(filename,CreationCollisionOption.ReplaceExisting);

using (Stream zipStream = await zipFile.OpenStreamForWriteAsync()){

   using (ZipArchive archive = new ZipArchive(zipStream, ZipArchiveMode.Create)){
        //Include your content here
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T21:48:53.727

The complete code looks like this:

```
var file = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync("test.zip",CreationCollisionOption.ReplaceExisting);
using (Stream zipStream = await zipFile.OpenStreamForWriteAsync())
{
    using (ZipArchive zip = new ZipArchive(zipStream, ZipArchiveMode.Create, true))
    {
        var entry = zip.CreateEntry("test.txt");
        using (StreamWriter sw = new StreamWriter(entry.Open()))
        {
            sw.WriteLine("Etiam eros nunc, hendrerit nec malesuada vitae, pretium at ligula.");
        }
    }   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-10T05:17:47.227

In My case the Issue was that I was not disposing **"zipArchive"** when the zip file Task Completes. Even though I was flushing and closing all the streams.

So, Either use ***using*** as suggested in answers above

```
using (var zipArchive = new ZipArchive(File.OpenWrite("archive.zip"), 
ZipArchiveMode.Create)) 
```

Or Dispose the variable at the end of the Task...

```
zipArchive.Dispose(); 
```

# qt - 如何在 Qt 中为无框窗口添加阴影

> ID：12347776
> 
> 赞同：13
> 
> 时间：2012-09-10T08:21:55.923
> 
> 标签：qt, window, shadow, borderless

我正在尝试创建一个下面有阴影的无框窗口。当我们创建一个带有**Qt::FramelessWindowHint**标志的无边框窗口时，它不包含阴影。但是我们可以通过创建一个**QGraphicsDropShadowEffect**对象，然后通过**setGraphicsEffect**函数将其传递给小部件来轻松地为子小部件设置阴影。但这似乎不适用于 QMainWindow。请帮我在 Qt 中为无框窗口添加阴影...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T06:13:59.533

你可以使用这个简单的技巧来做到这一点：

* * *

将“QWidget”（例如小部件）添加到 MainWindow 并将 MainWindow 上的所有内容移动到小部件。然后这样做：

```
setAttribute(Qt::WA_TranslucentBackground); //enable MainWindow to be transparent

QGraphicsDropShadowEffect* effect = new QGraphicsDropShadowEffect();
effect->setBlurRadius(5);
ui->widget->setGraphicsEffect(effect); 
```

这似乎对我有用。看：

![主窗口有阴影的错觉](../Images/b30065f5757ac0966e7af4278530dc91.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-05T10:27:07.447

我完全按照 zeFree 给出的说明（使用 Qt/C++），我的影子确实是点击通过（使用 Elementary OS Freya - 我不知道它与 Ubuntu、OX 或 Windows 之间是否存在不同的行为） ...我无法想象为什么你的不是。

唯一的区别是我将父窗口边距和模糊半径都设置得更大，并移除了阴影偏移。

这是我的片段：

```
void addDialogShadow(QWidget *target) {
    target->window()->setAttribute(Qt::WA_TranslucentBackground);
    target->window()->layout()->setMargin(50);
    QGraphicsDropShadowEffect* ef = new QGraphicsDropShadowEffect;
    ef->setBlurRadius(50);
    ef->setOffset(0);
    target->setGraphicsEffect(ef);
} 
```

编辑：不，我的窗口没有点击（我想我写的时候睡着了）。事实上，即使`Qt::WA_TransparentForMouseEvent`我的 QDialog 实例中的属性也不起作用。在网上搜索信息，我发现制作这项工作比我想象的要困难得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T18:57:12.957

一个不太好的解决方案是使用`QtCore.Qt.ToolTip`窗口标志而不是`FramelessWindowHint`！

![至少有一点阴影](../Images/d1d5e968f4cdd46078a828dc8e104356.png)

# quartz-scheduler - 石英陶土JobStore

> ID：12347778
> 
> 赞同：2
> 
> 时间：2012-09-10T08:22:13.307
> 
> 标签：quartz-scheduler, terracotta

我正在使用带有 TerracottaJobStore 类的石英调度程序，每 5 分钟调度一次作业。我的工作配置是：

org.quartz.jobStore.class = org.terracotta.quartz.EnterpriseTerracottaJobStore org.quartz.jobStore.tcConfigUrl = localhost:9510 org.quartz.threadPool.threadCount = 25

我有一个附加了 5000 个触发器的作业，然后安排了作业。触发一个作业需要 500 毫秒（延迟 400 毫秒和线程切换近似值 100 毫秒）。这意味着在 1 秒内有两个作业正在执行。在这种情况下，兵马俑作业商店每秒触发 60 个作业，这对我来说很好。我的问题是，所有作业的预定触发时间应为每 5 分钟作业时间后的 1:30，调度程序在 1:25 开始。在 3000 个作业数之后，作业的预定触发时间变为 1:31 ，应该是 1:30 。我不知道为什么 terracotta 会更改那些作业的预定点火时间。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:57:30.957

您使用的触发器是什么？此行为取决于触发器类型。根据我从旁白中了解到的情况，您应该使用 DailyTimeIntervalTrigger。

# android - Android ndk内核模块在windows中编译

> ID：12347782
> 
> 赞同：1
> 
> 时间：2012-09-10T08:22:20.433
> 
> 标签：android, linux, android-ndk, linux-kernel, kernel-module

我想编译android lkm。我的编译环境是windows。我看到了许多其他在 linux 中编译的技巧，但没有针对 windows 的技巧。我如何设置 android.mk 文件？

```
KERNELDIR = /lib/modules/$(shell    uname   -r)/build

obj-m   := sample.o

KDIR    :=  /lib/modules/$(shell    uname   -r)/build
PWD :=  $(shell pwd)

default:
    $(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules

clean:
    rm  -rf *.ko
    rm  -rf *.mod.*
    rm  -rf .*.cmd
    rm  -rf *.o
    rm  -rf .tmp_versions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:45:20.993

他们说你只能在 Linux 下构建 Android 源代码[http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)

如果你去重新编译android源最好有Linux

我不建议使用 Cygwin，你当然可以使用 Oracle VM Box，但是为什么你还需要 Windows

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T05:29:57.820

为了编译 LKM，您需要：

1.  Linux 环境（必需，我建议你至少在 VirtualBox 中安装 Linux）
2.  Android 的 linux 内核源代码（与您的目标 ROM 版本相同，否则稍后您将遇到 Version Magic 的问题）。就我而言，我得到了带有 CyanogenMod 7.2 的 HTC Nexus，所以我的内核是 2.6.37.6-cyanogenmod
3.  与您的内核源代码一起使用的 GCC。就我而言，它是 Sourcery Mentor 的 GCC

你可以在这里查看我之前的问题 [Unable to compile LKM for Android](https://stackoverflow.com/questions/12277542/unable-to-compile-lkm-for-android/12291635) 我提供了编译 LKM 的步骤和过程

# php - 使用 PHP 的 str_replace 和 SQL Server 查询

> ID：12347786
> 
> 赞同：0
> 
> 时间：2012-09-10T08:22:22.567
> 
> 标签：php, sql, sql-server, escaping

我以前做 ASP (vbscript) 编程，最近尝试开始使用 PHP。我曾经在 ASP 中有一个函数可以将 ' 替换为 ''。

这用于使用 SQL Server 数据库进行查询。我只是想知道在 PHP 中使用这样的东西是否很容易。我知道addslashes 和stripslashes，但它并不能真正达到我想要的确切目的。

假设我有一个简单的查询，例如：

```
$dbTABLE = "Table_Name";
$query_sql = sprintf("UPDATE %s SET DataText = ('%s') WHERE PageID = '%d'",
$dbTABLE,
$PageHTML,
$PageID); 
```

有没有办法将它包装在 str_replace 之类的东西中，告诉它所有的 ' 都应该用 '' 替换？

我知道我可以使用 SQL Server 查询来搜索它，但它需要在将 textarea 中的数据放入数据库之前进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:25:48.483

是的，您可以使用以下[`str_replace`](http://php.net/manual/en/function.str-replace.php)功能：

```
str_replace("'", "''", "Neil O'Brien") 
```

您发布的示例代码如下所示：

```
$dbTABLE = "Table_Name";
$query_sql = sprintf("UPDATE [%s] SET DataText = '%s' WHERE PageID = %d",
$dbTABLE,
str_replace("'", "''", $PageHTML),
$PageID); 
```

我建议使用某种库而不是自己构建查询。

# c# - 生产者消费者模型中的事件处理

> ID：12347790
> 
> 赞同：0
> 
> 时间：2012-09-10T08:23:02.200
> 
> 标签：c#, .net, web-services, event-handling, vsto

所以我有 2 个模块 - WebserviceClientmodule 用于从 Web 服务读取数据，ExcelModule 用于将 WebserviceClientmodule 获取的数据写入 excel 工作表。所以我有一个事件暴露在 WebserviceClientmodule 和 ExcelModule 订阅它。我的问题是，这是正确的方法吗，因为如果 ExcelModule 比 WebserviceClientmodule 慢，那么我该如何同步这两个进程？或者有没有其他更好的方法来实现这种生产者消费者问题，这样即使从 Web 服务中获取的数据更快，也不会造成问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:21:01.417

有多种方法可以实现您的需求。由于您似乎只运行了两个处理相同数据集的线程，因此我将使用 ReadWriterLockSlim 类，但也可以使用 Monitor 类或 Mutexs。在我看来，最容易实现的是 ReadWriterLockSlim 类。

有关 ReadWriterLockSlim 的更多信息：http: [//msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)

# sql - sql join 关系 - 如果找到条目，则不要选择

> ID：12347791
> 
> 赞同：0
> 
> 时间：2012-09-10T08:23:06.843
> 
> 标签：sql, join

我有 3 个表：用户、角色和角色用户（角色用户是一个有 2 列的关系表，用户 ID 和角色 ID）

通过roles_users 表，一个用户可以拥有多个角色。

如果他具有特定角色，我如何构建不会选择用户的选择查询。

为了显示 ：

*   超级管理员用户具有超级管理员、管理员、登录和发布者角色。

*   管理员用户具有管理员、登录和发布者角色。

*   发布者用户具有登录和发布者角色。

我想选择所有没有超级管理员角色的用户。换句话说，如果用户具有超级管理员角色，则不要选择它。

我怎样才能在 SQL 中实现这一点？

**编辑：这是最后对我有用的查询：（**感谢[András Ottó 的](https://stackoverflow.com/users/1434734/andras-otto)回答）

```
SELECT DISTINCT(users.id), users.*
FROM users
INNER JOIN roles_users on users.id = roles_users.user_id
INNER JOIN roles ON roles_users.role_id = roles.id
WHERE NOT EXISTS(SELECT roles_users.user_id FROM roles_users
      WHERE roles_users.user_id = users.id AND roles_users.role_id = 2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:29:41.113

在 Oracle 上的 Sql Server 中，您可以尝试：

```
SELECT users.*, roles.roleName
FROM users
INNER JOIN roles_users on users.userid = roles_users.userid
INNER JOIN roles ON roles_users.roleID = roles.roleID
WHERE NOT EXISTS(SELECT roles_users.userID FROM roles_users
      WHERE roles_users.userID = users.userid AND roleName = 'super admin') 
```

这是一个[SQL Fiddle](http://www.sqlfiddle.com/#!3/838b0/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:26:51.757

试试这个，

它用`subquery`

```
SELECT  a.*
FROM    users a
        INNER JOIN roles_use b
            on a.user_id = b.user_id
WHERE   b.role_id NOT IN
        (
            SELECT role_id
            FROM roles
            WHERE rolename = 'super admin'
        ) 
```

或者

用途`left join`

```
SELECT  a.*
FROM    users a
        LEFT JOIN roles_use b
            on a.user_id = b.user_id
        LEFT JOIN roles c
            ON b.role_id = c.role_id AND
               c.roleName = 'super admin'
WHERE   c.role_id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:28:40.510

您可以简单地使用`JOIN`来解决您的问题....

如果您有要限制的角色列表，请`NOT IN`按以下方式使用：

```
SELECT a.* FROM users a INNER JOIN users_role b ON a.user_id= b.user_id 
INNER JOIN roles c ON b.role_id = c.role_id 
WHERE c.role_name NOT IN ('SUPER ADMIN') 
```

如果您要限制一个角色，请`!=`按以下方式使用：

```
SELECT a.* FROM users a INNER JOIN users_role b ON a.user_id= b.user_id 
INNER JOIN roles c ON b.role_id = c.role_id 
WHERE c.role_name != 'SUPER ADMIN' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:30:46.423

尝试这样的事情

```
SELECT  u.*
FROM    users u 
JOIN    roles_users ru
ON      u.user_id=ru.user_id
JOIN    roles r
ON      r.role_id=ru.role_id   
WHERE   rol_name !='Super admin' 
```

# php - 使用 PDO 在浏览器中从 MySQL 到 CSV 的单个记录？

> ID：12347792
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:23:12.727
> 
> 标签：php, mysql, pdo

目标：从 MySQL 数据库中检索单个记录（行），供用户通过浏览器界面下载为 CSV（例如，根据用户会话 ID 显示“获取记录”的按钮，（作为数据库中的字段） .

[他们刚刚填写了一个表格，该表格连同会话 ID 一起写入数据库，我希望他们能够以 CSV 格式下载他们的条目]

我了解 PDO 是提高安全性和有效性的方法（尽管对其他建议持开放态度），但我认为我要么语法错误，要么遗漏了一些东西。

据我了解，我必须让 PDO 调用正确的记录，然后将其导出为 CSV（2 个步骤）。

我尝试将我从类似问题中找到的代码混合在一起，但坦率地说，这是一团糟 - 所以不值得发布。

任何关于我需要做什么的指导/解释将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:25:44.180

您可以让 MySQL 通过单个查询为您创建 CSV。如[`SELECT ... INTO`语法](http://dev.mysql.com/doc/en/select-into.html)中所述：

> 这是一个生成许多程序使用的逗号分隔值 (CSV) 格式的文件的示例：
> 
> ```
> SELECT a,b,a+b INTO OUTFILE '/tmp/result.txt'
>   FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
>   LINES TERMINATED BY '\n'
>   FROM test_table; 
> ```

然后您只需要将创建的文件返回给用户，例如使用[`readfile()`](http://php.net/manual/en/function.readfile.php).

但是，要按照您当前的方式进行操作，您可以执行以下操作：

```
$dbh = new PDO("mysql:dbname=$dbname;charset=utf8", $username, $password);
$qry = $dbh->query('SELECT a,b,a+b FROM test_table');

$fp = fopen('php://output', 'w');
while ($row = $qry->fetch(PDO::FETCH_NUM)) fputcsv($fp, $row);
fclose($fp); 
```

# python - 我怎样才能产生一个很好的 numpy 矩阵输出？

> ID：12347797
> 
> 赞同：10
> 
> 时间：2012-09-10T08:23:52.453
> 
> 标签：python, numpy, formatting, gedit

我目前有以下代码段：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import numpy
from numpy import linalg

A = [[1,2,47,11],[3,2,8,15],[0,0,3,1],[0,0,8,1]]
S = [[113,49,2,283],[-113,0,3,359],[0,5,0,6],[0,20,0,12]]

A = numpy.matrix(A)
S = numpy.matrix(S)

numpy.set_printoptions(precision=2, suppress=True, linewidth=120)
print("S^{-1} * A * S")
print(linalg.inv(S) * A * S) 
```

产生这个输出：

![蟒蛇输出](../Images/b97fc1110667f44dee1f3fce2d1111f3.png)

**有没有一种标准的方法来产生类似于以下的输出？我怎样才能得到这个输出？**

```
[[ -1    -0.33  0  0]
 [  0     1     0  0]
 [  0  -648     4  0]
 [  0     6.67  0  5]] 
```

有什么不同？

*   `i`column 的最后一个字符和 column的第一个字符之间至少有两个空格`i+1`，但如果需要更多，可能会更多（NumPy 输出有两个空格）
*   点对齐（*对齐*，但字体设置`BetterPythonConsole`搞砸了）
*   不但是`-0`_`0`
*   不但是`0.`_`0`

**编辑**：当我从终端启动它时，似乎使用 gEdits [BetterPythonConsole插件启动的 Python 控制台做了一些与 Python 不同的事情。](https://live.gnome.org/Gedit/Plugins/BetterPythonConsole)

这是上面脚本文本的输出

```
moose@pc07:~/Desktop$ python matrixScript.py 
S^{-1} * A * S
[[  -1\.     -0.33    0\.     -0\.  ]
 [   0\.     -1\.     -0\.      0\.  ]
 [   0\.   -648\.      4\.     -0\.  ]
 [   0\.      6.67    0\.      5\.  ]] 
```

使用漂亮的打印：

```
S^{-1} * A * S
matrix([[  -1\.  ,   -0.33,    0\.  ,   -0\.  ],
        [   0\.  ,   -1\.  ,   -0\.  ,    0\.  ],
        [   0\.  , -648\.  ,    4\.  ,   -0\.  ],
        [   0\.  ,    6.67,    0\.  ,    5\.  ]]) 
```

这无疑更糟，但值得一试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:56:44.073

如果您使用 numpy 1.8.x，您可以使用`formatter`参数自定义格式。例如，设置：

```
numpy.set_printoptions(formatter={'float': lambda x: 'float: ' + str(x)}) 
```

所有浮点数都将打印为`float: 3.0`, 或`float: 12.6666666666`.

不幸的是，我仍然安装了 numpy 1.6.1 并且未提供此选项，因此我无法使用它来获得所需的输出。

# android - 在android中检索数据库数据

> ID：12347805
> 
> 赞同：0
> 
> 时间：2012-09-10T08:24:43.930
> 
> 标签：android, database

我正在使用 SQLiteHelper 将数据存储在数据库中，数据已正确存储（使用 SQLite 查看器打开），但是当我必须从数据库中获取数据时，我的代码总是返回空值

```
public class HistorySQLiteHelper extends SQLiteOpenHelper{

String sqlCreate = "CREATE TABLE History (artist TEXT, title TEXT, link TEXT)";

    public HistorySQLiteHelper(Context context, String nombre, CursorFactory factory, int version){
            super(context, nombre, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db){
            db.execSQL(sqlCreate);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int versionAnterior, int versioNueva){
            db.execSQL("DROP TABLE IF EXISTS History");
            db.execSQL(sqlCreate);
    }
} 
```

这是我用来检索数据的代码

```
 String[] fields = new String[] {"artist", "title", "link"};

                    HistorySQLiteHelper hdbh = new HistorySQLiteHelper(HistoryActivity.this, "DBHistory", null, 1);
                    SQLiteDatabase db = hdbh.getReadableDatabase();
                    Cursor c = db.query("History", fields, "artist=?", new String[]{String.valueOf(0)}, null, null, null);

                    int counter = 0;

                    artist = new String[30];
                    title = new String[30];
                    links = new String[30];

                    if (c.moveToFirst()) {
                            do {
                                    artist[counter] = c.getString(0);
                                    title[counter] = c.getString(1);
                                links[counter] = c.getString(2);
                                    counter++;
                            } while (c.moveToNext());
                    }
                    db.close();

       if (artist.length < 1){
            String[] strings = nee Stting[]{" No results. "};
                            adaptador = new ArrayAdapter<String>(HistoryActivity.this, android.R.layout.simple_list_item_1, strings);
                            list.setAdapter(adaptador);
               }else{
                            AdaptadorTitulares adapter = new AdaptadorTitulares(HistoryActivity.this);
                        list.setAdapter(adapter);
                    }
                    list.setClickable(true);
            }
    } 
```

和 ArrayAdapter 类：

```
 class AdaptadorTitulares extends ArrayAdapter {

        Activity context;

        @SuppressWarnings("unchecked")
                AdaptadorTitulares(Activity context) {
                super(context, R.layout.listitem_titular, artist);
                this.context = context;
        }

        public View getView(int position, View convertView, ViewGroup parent)
        {
                        View item = convertView;
                        ViewHolder holder;

                if(item == null)
                {
                        LayoutInflater inflater = context.getLayoutInflater();
                        item = inflater.inflate(R.layout.listitem_titular, null);

                        holder = new ViewHolder();
                        holder.titulo = (TextView)item.findViewById(R.id.LblTitulo);

                        item.setTag(holder);
                }
                else
                {
                        holder = (ViewHolder)item.getTag();
                }

                        holder.titulo.setText(artist[position]);

                        return(item);
                }
    }

    static class ViewHolder {
        TextView titulo;
    } 
```

为什么我的代码给出空值以及如何解决它？

PD：这里是变量字段和 onCreate 方法

```
public class HistoryActivity extends Activity{

private ListView list;
private String[] artist;
private String[] title;
private String[] links;
private ArrayAdapter<String> adaptador;

@Override
public void onCreate(Bundle state) {
    super.onCreate(state);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_history);

    list = (ListView)findViewById(R.id.history_list); 

    new LoadTask().execute(); //this is where I put the code to retrieve data

} ////////////////////////////////       onCreate END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:16:35.397

好的，我知道这是我的错误。我`Cursor`这样声明：

```
Cursor c = db.query("History", fields, "artist=?", new String[] {String.valueOf(0)}, null, null, null); 
```

有了这个，我只获得了那些值`artists = "0"`。

我想做的是从所有列中检索所有值。为此，我必须将第 3 和第 4 参数声明为`null`

```
Cursor c = db.query("History", fields, null, null, null, null, null); 
```

# wpf - 在哪里可以找到 XAML 命名空间 d="http://schemas.microsoft.com/expression/blend/2008" 映射库？

> ID：12347806
> 
> 赞同：14
> 
> 时间：2012-09-10T08:24:52.900
> 
> 标签：wpf, xaml, namespaces, mapping, xml-namespaces

在下面的每个默认 WPF 窗口中，都引用了四个命名空间。我知道：

> xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"

和

> xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

分别是映射库PresentationCore.dll 和PresentationFramework.dll。但是我在哪里可以找到映射命名空间的库文件

> xmlns:d="http://schemas.microsoft.com/expression/blend/2008"

和

> xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"

?

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow" Height="350" Width="525">
    <Grid>

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-26T01:05:15.530

几乎正确。请在 MSDN 中查看更多详细信息：http: [//msdn.microsoft.com/en-us/library/cc189061 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc189061(v=vs.95).aspx)

`d:`（[http://schemas.microsoft.com/expression/blend/2008](http://schemas.microsoft.com/expression/blend/2008)）

`d:`XAML 命名空间旨在提供设计器支持，特别是 Microsoft Visual Studio 和 Microsoft Expression Blend 的 XAML 设计图面中的设计器支持。XAML 命名空间在`d:`XAML 元素上启用设计器属性。这些设计器属性仅影响 XAML 行为方式的设计方面。当 XAML 解析器在 Silverlight 运行时加载相同的 XAML 并且应用程序运行时，设计器属性将被忽略。通常，设计器属性在任何 XAML 元素上都有效，但实际上只有某些场景适合自己应用设计器属性。

`mc:`（[http://schemas.openxmlformats.org/markup-compatibility/2006](http://schemas.openxmlformats.org/markup-compatibility/2006)）

`mc:` 指示并支持用于读取 XAML 的标记兼容模式。通常， d: 前缀与属性相关联`mc:Ignorable`。如前所述，此技术使运行时 XAML 解析器能够忽略设计属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T09:39:27.393

据我了解，“d”命名空间在您的代码中启用了仅设计人员的属性。这样您就可以将设计时数据等内容添加到您的应用程序中并使其可混合。

“mc”命名空间支持兼容性，通常上面提到的“d”前缀与“mc:ignorable”配对，它告诉编译器在运行时忽略设计时元素

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-22T13:51:21.087

我不确定这个问题是否已经得到解答，但我能够在我的本地机器上找到它，用于 Visual Studio 2013，终极版。您可以在机器上某处的程序集中找到所有类型（例如 DataContextProperty 或我正在寻找的东西，DesignInstanceExtension），其路径如下所示：

C:\Program Files (x86)\Microsoft Visual Studio 12.0\Blend\Microsoft.Expression.Platform.dll

请注意，这可能因您使用的 Visual Studio 版本而异。我只是在报告“在我的机器上工作”的内容。在机器范围内搜索“Microsoft.Expression.Platform.dll”应该可以解决问题。

# java - iText 避免在页面跳转时切表

> ID：12347813
> 
> 赞同：4
> 
> 时间：2012-09-10T08:25:09.760
> 
> 标签：java, itext

我正在使用显示许多表格的pdf。当表格不适合页面的其余部分时，iText 会剪切表格并将其余部分放在下一页上。

我希望如果表格不适合页面的其余部分，则将其放在新页面上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:00:44.473

有不同的方法可以做到这一点；这是三个选项：

1.  计算桌子的高度，将其与剩余的空间进行比较。在将表格添加到文档之前计算表格的高度时，高度始终为 0，除非您使用 setTotalWidth() 和 setLockedWidth() 定义表格的宽度。您可以使用 getVerticalPosition() 方法（在 PdfWriter 中）找到页面上的当前 Y 位置。
2.  将表格添加到 ColumnText 对象，并将 ColumnText 对象添加到定义模拟模式下页面上剩余空间的矩形。如果无法完整呈现 ColumnText 对象的内容，请在添加表格之前触发一个新的 Page。
3.  如果您从 SourceForge 上的主干（版本 5.3.3-SNAPSHOT）获取最新（尚未发布）版本，您可以使用 table.keepRowsTogether(0) 避免中断；其中 0 是表中第一行的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:33:50.660

```
public class XX_RPT_D84_AR_Invoice_Printing_GBS extends PdfPageEventHelper{
        public void onEndPage(PdfWriter writer, Document document) {
            Rectangle rect = writer.getBoxSize("art");
            ColumnText.showTextAligned(writer.getDirectContent(),
                    Element.ALIGN_CENTER, new Phrase(String.format("page %d", 1)),
                    (rect.getLeft() + rect.getRight()) / 2, rect.getBottom() - 18, 0);
        }
        public static void main(String[] args) {
            try {
                OutputStream file = new FileOutputStream(new File("D:\\PDF1.pdf"));
                Document document = new Document();
                PdfWriter writer = PdfWriter.getInstance(document, file);
                BaseFont bf = BaseFont.createFont(BaseFont.COURIER, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
                BaseColor color = BaseColor.BLACK;
                PdfContentByte cb = null; 
                Phrase[] header = new Phrase[3];
                header [0] = new Phrase("Genpact India");
                header [1] = new Phrase("(A Private Company with Unlimited Liability)");
                header [2] = new Phrase("Registered Office: Delhi Information Technology Park, Shastri Park, Delhi-110053, India");                
                Font font = new Font(BaseFont.createFont(BaseFont.COURIER, BaseFont.CP1252, BaseFont.NOT_EMBEDDED),
                         9, Font.NORMAL);
                boolean isPrinted = false;

                   Image image = Image.getInstance ("src/Logo/logo.png");
                   image.scaleAbsolute(120f, 31f);//image width,height   
                   image.setDpi(-10, -5);
                   image.setSpacingBefore(-15);

                   Image sign = Image.getInstance ("src/Logo/sign.png");
                   sign.scaleAbsolute(100f, 50f);//image width,height 
                   sign.setIndentationLeft(10);
                   PdfPTable table = new PdfPTable(new float[]{0.8f,5,1.5f,1.3f,2,2});
                   PdfPCell s_No = new PdfPCell(new Phrase("S No", font));
                   s_No.setBorder(Rectangle.BOX);
                   s_No.setPaddingTop(2);
                   PdfPCell description = new PdfPCell(new Phrase("Description", font));
                   description.setBorder(Rectangle.BOX);
                   description.setPaddingTop(2);
                   PdfPCell ratePerUnit = new PdfPCell(new Phrase("Rate Per Unit", font));
                   ratePerUnit.setBorder(Rectangle.BOX);
                   ratePerUnit.setPaddingTop(2);
                   PdfPCell quantity = new PdfPCell(new Phrase("Quantity", font));
                   quantity.setBorder(Rectangle.BOX);
                   quantity.setPaddingTop(2);
                   PdfPCell inrReferenceAmount = new PdfPCell(new Phrase("INR Reference Amount", font));
                   inrReferenceAmount.setBorder(Rectangle.BOX);
                   inrReferenceAmount.setPaddingTop(2);
                   PdfPCell amountINR = new PdfPCell(new Phrase("Amount INR", font));
                   amountINR.setBorder(Rectangle.BOX);
                   amountINR.setPaddingTop(2);
                   table.addCell(s_No);
                   table.addCell(description);
                   table.addCell(ratePerUnit);
                   table.addCell(quantity);
                   table.addCell(inrReferenceAmount);
                   table.addCell(amountINR);
                   int i = 1;
                   String value = "123";
                   PdfPCell cell = null;
                   int referenceAmount = 0;
                   int amount = 0;
                   PdfPCell staticData1 = new PdfPCell(new Phrase("Please remit funds via telex transfer/SWIFT as follows to HSBC BANK Limited (Bank address:"+
                           "JMD Regent Square Ist Floor, DLF Phase II, MG Road, Gurgaon 122002, Haryana, India) with the following"+
                           "Instructions:", font));
                   staticData1.setPaddingTop(20);
                   staticData1.setColspan(6);
                   staticData1.setBorder(Rectangle.NO_BORDER);
                   PdfPCell staticData2 = new PdfPCell(new Phrase("Ultimate Beneficiary: Genpact India", font));
                   staticData2.setColspan(6);
                   staticData2.setBorder(Rectangle.NO_BORDER);

                   PdfPCell staticData3 = new PdfPCell(new Phrase("A)For Inward remittances from out side India : Remit by SWIFT MT103 for further credit to Genpact"+
                            "India, Acct no - 054 021365 001 with HSBC India (SWIFT - HSBCINBB) through HSBC Mumbai's account"+
                            "no.000-04417-2, with HSBC Bank, New York, USA having CHIPS code 302755, SWIFT- MRMDUS33 & ABA Routing"+
                            "No. 021-001-088.", font));
                   staticData3.setColspan(6);
                   staticData3.setBorder(Rectangle.NO_BORDER);

                   PdfPCell staticData4 = new PdfPCell(new Phrase("B)For remittance from within India: Remit to Genpact India HSBC Account No. 054 021365 001, IFSC Code"+
                            "- HSBC0110005.", font));
                   staticData4.setColspan(6);
                   staticData4.setBorder(Rectangle.NO_BORDER);

                   PdfPCell staticData5 = new PdfPCell(new Phrase("You are requested to send the remittances as per the Payment Term mentioned above."+
                            "Please send the payment notification to :collections.helpdesk@genpact.com"+
                            "Incase of any queries contact : genpactbilling.helpdesk@genpact.com", font));
                   staticData5.setColspan(6);
                   staticData5.setBorder(Rectangle.NO_BORDER);
                   PdfPCell staticData6 = new PdfPCell(new Phrase("FOR & ON BEHALF OF", font));
                   staticData6.setPaddingTop(25);
                   staticData6.setColspan(6);
                   staticData6.setBorder(Rectangle.NO_BORDER);
                   PdfPCell staticData7 = new PdfPCell(new Phrase("Genpact India", font));
                   staticData7.setColspan(6);
                   staticData7.setBorder(Rectangle.NO_BORDER);
                   PdfPCell staticData8 = new PdfPCell(new Phrase("(Private Company with Unlimited liability)", font));
                   staticData8.setColspan(6);
                   staticData8.setBorder(Rectangle.NO_BORDER);
                   PdfPCell staticData9 = new PdfPCell(sign);
                   staticData9.setColspan(6);
                   staticData9.setBorder(Rectangle.NO_BORDER);
                   PdfPCell staticData10 = new PdfPCell(new Phrase("Vidut Aggarwal", font));
                   staticData10.setColspan(6);
                   staticData10.setBorder(Rectangle.NO_BORDER);                
                   PdfPCell staticData11 = new PdfPCell(new Phrase("This is a system generated Invoice and does not require physical signature.", font));
                   staticData11.setColspan(6);
                   staticData11.setBorder(Rectangle.NO_BORDER);

                         Chunk chunk0 = new Chunk("                               ");
                      Chunk chunk = new Chunk("                                                                                                                            ");
                      chunk.setUnderline(+1f,-2f);//1st co-ordinate is for line width,2nd is space between  
                      document.open();
                      cb = writer.getDirectContent(); 
                      cb.setLineWidth(1);
                      MyPageEventListener mpel = new MyPageEventListener();
                      mpel.onEndPage(writer, document);
                      image.setAbsolutePosition(20, 795);
                      document.add(image);
                      document.add(chunk0);
                      document.add(chunk);
                      document.add(Chunk.NEWLINE);
                      cb.saveState();
                      cb.beginText();
                      cb.moveText(280, 810);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("INVOICE");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(20, 775);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Service Tax No : " + "d_ServiceTaxNo");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(320, 788);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Genpact India");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(316, 775);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("(Private Company with unlimited liability)");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(20, 750);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("PAN : " + "d_PAN");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(318, 760);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("d_AddressLine1");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(20, 725);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Category of services: ");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(318, 746);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("d_AddressLine2");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(318, 732);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("d_AddressLine3");
                      cb.endText();
                      cb.setColorStroke(color);
                      cb.rectangle(20,715,245,-100);
                      cb.stroke();
                      cb.beginText();
                      cb.moveText(25, 700);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("d_cust_name");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(25, 670);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("d_cust_address");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(318, 715);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("d_pin");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(318, 699);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Tele : " + "d_Telephone");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(318, 685);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Fax : " + "d_Fax");
                      cb.endText();
                      cb.setColorStroke(color);
                      cb.rectangle(275,680,300,-80);
                      cb.stroke();
                      cb.setColorStroke(color);
                      cb.rectangle(10,90,575,742);
                      cb.stroke();
                      cb.setColorStroke(color);
                      cb.rectangle(275,680,300,-80);
                      cb.stroke();
                      cb.setColorStroke(color);
                      cb.rectangle(20,610,245,-30);
                      cb.stroke();
                      cb.beginText();
                      cb.moveText(280, 660);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Invoice Number:  " + "d_Invoice_no.");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(280, 645);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Invoice Date:  " + "d_Invoice_date");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(280, 626);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Currency  :   " + "d_Currency");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(280, 605);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Payment Term : " + "d_Payment_term");
                      cb.endText();
                      cb.beginText();
                      cb.moveText(25, 590);
                      cb.setFontAndSize(bf, 10);
                      cb.showText("Attention :  " + "Finance Dept"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:38:12.447

```
cb.endText();
                      cb.restoreState();
                      document.add(Chunk.NEWLINE);
                      table.setTotalWidth(555.0f);
                      int sNo = 1;
                      float tableHeight1  =  table.getTotalHeight();
                      System.out.println(tableHeight1);
                      int rowCount = 2;
                      int yAxis = 570;
                      int newPageYAxis = 0;
                      while (i <= 10){
                          for (int l=1;l<=6;l++){
                              if(l==1){
                                  cell = new PdfPCell(new Phrase(String.valueOf(sNo), font));
                                  cell.setBorder(Rectangle.LEFT | Rectangle.RIGHT);
                                  cell.setPaddingTop(4); 
                                  sNo++;
                              }else{
                                  cell = new PdfPCell(new Phrase(value, font));
                                  cell.setBorder(Rectangle.LEFT | Rectangle.RIGHT);
                                  cell.setPaddingTop(4);
                              }
                              if(i==10 && l==5){
                                  cell = new PdfPCell(new Phrase(value, font));
                                  cell.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                                  cell.setPaddingTop(4);
                              }
                              if(i==10 && l==6){
                                  cell = new PdfPCell(new Phrase(value, font));
                                  cell.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                                  cell.setPaddingTop(4);
                              }
                              if(l==5){
                                  referenceAmount = referenceAmount + Integer.parseInt(value);
                              }
                              if(l==5){
                                  amount = amount + Integer.parseInt(value);
                              }
                              System.out.println(table.getTotalHeight());
                              if(table.getTotalHeight()<=450){
                                  table.addCell(cell);
                                  table.writeSelectedRows(0, 6, rowCount, -1, 20, yAxis, cb);
                                  yAxis = yAxis - 15;
                              }
                              else {
                                  document.newPage();
                                  table.addCell(cell);
                                  table.writeSelectedRows(0, 6, rowCount, -1, 20, yAxis, cb);
                                  newPageYAxis = newPageYAxis + 15;
                              }
                          }
                          i++;
                          rowCount++;
                      }
                      System.out.println(rowCount);
                      PdfPCell cell1 = new PdfPCell(new Phrase("", font));
                      cell1.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                      cell1.setPaddingTop(4);
                      PdfPCell cell2 = new PdfPCell(new Phrase("Total", font));
                      cell2.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                      cell2.setPaddingTop(4);
                      PdfPCell cell3 = new PdfPCell(new Phrase("", font));
                      cell3.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                      cell3.setPaddingTop(4);
                      PdfPCell cell4 = new PdfPCell(new Phrase("", font));
                      cell4.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                      cell4.setPaddingTop(4);
                      PdfPCell cell5 = new PdfPCell(new Phrase(String.valueOf(referenceAmount), font));
                      cell5.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                      cell5.setPaddingTop(4);
                      PdfPCell cell6 = new PdfPCell(new Phrase(String.valueOf(amount), font));
                      cell6.setBorder(Rectangle.LEFT | Rectangle.RIGHT | Rectangle.BOTTOM);
                      cell6.setPaddingTop(4);
                      System.out.println(table.getLastCompletedRowIndex());
                      if(table.getTotalHeight()<=450){
                          table.addCell(cell1);
                          table.addCell(cell2);
                          table.addCell(cell3);
                          table.addCell(cell4);
                          table.addCell(cell5);
                          table.addCell(cell6);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb);
                          System.out.println("IF: " + table.getTotalHeight());
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(cell1);
                          table.addCell(cell2);
                          table.addCell(cell3);
                          table.addCell(cell4);
                          table.addCell(cell5);
                          table.addCell(cell6);
                          table.addCell(staticData1);
                          table.addCell(staticData2);
                          table.addCell(staticData3);
                          table.addCell(staticData4);
                          table.addCell(staticData5);
                          table.addCell(staticData6);
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb);
                          System.out.println("ELSE: " + table.getTotalHeight());
                          rowCount++;
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData1);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb); 
                          rowCount++;
                      } else if (isPrinted==false) {
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData1);
                          table.addCell(staticData2);
                          table.addCell(staticData3);
                          table.addCell(staticData4);
                          table.addCell(staticData5);
                          table.addCell(staticData6);
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData2);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb);  
                          rowCount++;
                      }else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData2);
                          table.addCell(staticData3);
                          table.addCell(staticData4);
                          table.addCell(staticData5);
                          table.addCell(staticData6);
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }  
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData3);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb);  
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData3);
                          table.addCell(staticData4);
                          table.addCell(staticData5);
                          table.addCell(staticData6);
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData4);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb); 
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData4);
                          table.addCell(staticData5);
                          table.addCell(staticData6);
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData5);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb);  
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData5);
                          table.addCell(staticData6);
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData6);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb);  
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData6);
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                           table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb);
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData7);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb);  
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData7);
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData8);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb);  
                          rowCount++;
                      }
                      else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData8);
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                           table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb);
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          System.out.println("staticData9");
                          table.addCell(staticData9);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb); 
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData9);
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                           table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          System.out.println("staticData10");
                          table.addCell(staticData10);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb); 
                          rowCount++;
                      }else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          System.out.println("else staticData10");
                          table.addCell(staticData10);
                          table.addCell(staticData11);
                           table.writeSelectedRows(0, 6, rowCount-1, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      if (table.getTotalHeight() <= 450){
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, 0, rowCount, 20, 570, cb); 
                          rowCount++;
                      } else if (isPrinted==false){
                          document.newPage();
                          cb.setColorStroke(color);
                          cb.rectangle(10,90,575,742);
                          cb.stroke();
                          table.addCell(staticData11);
                          table.writeSelectedRows(0, 6, rowCount, -1, 20, (790-newPageYAxis), cb); 
                          isPrinted = true;
                      }
                      System.out.println("Column Index at last " + table.getLastCompletedRowIndex());
                      System.out.println(table.getTotalHeight());           
                         document.close();
                      file.close();
              System.out.println("Pdf created successfully..");
          } catch (Exception e) {
              e.printStackTrace();
          }
      }
    } 
```

# jenkins - 无法从 Jenkins 构建 IAR

> ID：12347816
> 
> 赞同：2
> 
> 时间：2012-09-10T08:25:40.697
> 
> 标签：jenkins, iar

我在从 Jenkins Windows 批处理插件构建 IAR 项目时遇到问题。然而，相同的命令直接从内置命令提示符的相同机器上运行得很好。

构建命令：“C:\Program Files\IAR Systems\Embedded Workbench 6.4\common\bin\iarbuild”protective\iar_project\cpup_project.ewp -build Debug -log all

从 Jenkins 构建时，会发生以下错误：

**致命错误[c0000142]：不受控制的终止**

**运行 C/C++ 编译器时出错**

相同的版本，即完全相同的版本，以前也曾在 Jenkins 上工作过。没有对 Jenkins 进行任何额外的升级。

系统：Windows XP

詹金斯版本：1.466.1

有谁知道这是什么原因造成的？

我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:36:42.760

我在 xp 机器上从 jenkins 运行 iarbulid 时遇到了类似的问题。我观察到 iarbuild 失败并显示相同的错误消息。

基于对术语 c0000142 的搜索（例如[CreateProcess 成功，但 GetExitCodeProcess 返回 C0000142](https://stackoverflow.com/questions/13425106/createprocess-succeeds-but-getexitcodeprocess-returns-c0000142)），以及我自己对 procmon 的观察，我认为这与 iccarm 引用 user32.dll 有关，可能是不必要的，这似乎在服务。但是，通过将 jenkins 服务更改为以用户身份登录，问题似乎就消失了。

有趣的是，在此更改之前，iccarm 有时会失败，有时会成功。我的构建由对 iarbuild 的多次调用组成，以生成库依赖项，然后调用构建我的应用程序。库构建总是会成功，但最终的应用程序构建通常会因上述错误而失败。但是，我还没有深入了解这种差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:53:10.290

问题解决了。

我有一个额外的网络服务器在同一台机器上运行一个 wiki，当我停止这个服务（Apache）时，IAR 构建再次工作！

我真的不知道 Jenkins 中的 windows 批处理命令和 Apache 网络服务器之间可能存在什么冲突。Jenkins 和网络服务器运行在完全不同的端口上。

# sql - Crystal Reports 交叉表，按数据库字段分组

> ID：12347819
> 
> 赞同：4
> 
> 时间：2012-09-10T08:25:47.250
> 
> 标签：sql, sql-server, crystal-reports, crosstab

目前我的报告中有一个交叉表，阅读了我希望显示的所有产品。他们已经被归类在与他们相关的相关客户下，但是我想添加一个进一步的分组来区分不同类型的产品。

例如，我目前有；

```
CustomerName

Total
Product Code1     3     24     72
Product Code2     3     24     72
Product Code3     3     24     72 
```

但是我希望拥有；

```
CustomerName

Total

Red Products
Product Code1     3     24     72
Product Code2     3     24     72

Blue Products
Product Code3     3     24     72 
```

我的数据库中有 Group By 标识符，是否可以在交叉表中完成第二组？另外我应该怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:37:35.283

有可能：在 Cross Tab Expert 中，选择 2 行并设置分组选项。

外观不会如您所愿，但您可以根据需要将第一列文本旋转 90°。

```
CustomerName

Total

Red Products  Product Code1     3     24     72
              Product Code2     3     24     72

Blue Products Product Code3     3     24     72 
```

# java - 如何从输入流中重新打开文件

> ID：12347823
> 
> 赞同：1
> 
> 时间：2012-09-10T08:26:12.433
> 
> 标签：java, file-io

我想重新打开一个文件。我在输入流中有一个文件。我尝试过使用 Scanner 和 BufferedReader。但是在使用 close() 方法关闭文件后，我无法再次打开文件。请帮助如何再次打开文件。我写了下面的代码：

```
InputStream filename = getAttachstream();

        int rows =0 ;

        BufferedReader br= new BufferedReader(new InputStreamReader(filename));
        String strLine = "";
          try {
            while( (strLine = br.readLine()) != null) {
                rows++;
              }
            //br.reset();
            br.close();
            //br.reset();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
if(rows>0){
            InputStream filename1 = getAttachstream();
            Scanner inputStream1 = new Scanner(filename1);
                for (int rowIncr = 1; inputStream1.hasNext(); rowIncr++) {

                String data;
                try {
                    data = br.readLine();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                String [] values = data.split(",");
                String curRowPartNumber = values[0];
                String curRowQuantity =   values[1];
                if(rowIncr == 1)
                {
                    if((values[0]==null || values[0].trim().length()<=0)
                            || (values[1]==null || values[1].trim().length()<=0)
                            || (values[2] != "") || !"Part Number".equalsIgnoreCase(values[0].trim())
                            || !"Quantity".equalsIgnoreCase(values[1].trim())){
                        System.out.println("Invalid Excel sheet data");
                        throw new ECApplicationException(ECMessage._ERR_CMD_INVALID_DATAFORMAT, CLASSNAME,methodName);
                    }

                } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:31:10.287

一旦流、读取器、写入器、套接字或任何其他资源关闭，您就无法再次打开它。

如果你想多次读取一个文件，你需要有它的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:34:00.020

我假设您的意思是重新打开您从中获得的 InputStream `getAttachstream`（即使它没有显示它来自文件）。

唯一的选择是`getAttachstream`返回一个实现这种方法的类。请记住，甚至`FileInputStream`不提供此类选项。而且，即使您找到具体的类并且它碰巧有这样一个方法，因为该方法的定义返回一个`InputStream`您不能确定它总是会返回同一个类（甚至在所有情况下都会返回）类返回）。

唯一的选择是使用原始 inputStream 并将其写入临时文件或 a `ByteArrayOutputStream`（如果文件足够小而不会使用太多内存），因此您可以多次访问数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:34:05.240

您可以使用扫描仪来计算行数[Scanner.hasNextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

> 如果此扫描仪的输入中有另一行，则返回 true。此方法可能会在等待输入时阻塞。扫描仪不会超过任何输入。

```
 File file = new File("C:/test.txt");
    File file1 = new File("C:/test1.txt");

    Scanner scanner;
    try {
        FileInputStream fileInputStream = new FileInputStream(file);
        FileInputStream fileInputStream1 = new FileInputStream(file1);
        scanner = new Scanner(fileInputStream);
        int count = 0;
        while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            count++;
        }
        scanner.close();
        System.out.println("File 1 Count:" + count);
        scanner = new Scanner(fileInputStream1);
        count = 0;
        while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            count++;
        }
        System.out.println("File 2 Count:" + count);
        scanner.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# sql - LIKE 语句中的特殊字符

> ID：12347826
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:26:26.673
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我希望在 SQL Server 2005 中执行以下操作，但我猜由于字符“#”，该`LIKE`语句似乎没有返回任何结果。

```
SELECT * FROM Table WHERE keyword LIKE '%C#%' 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:32:38.333

唯一一次在`LIKE`语句中转义关键字是在搜索`%`、`_`和`[`. 所以这意味着`#`没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:33:28.690

一定是别的东西。使用字符检查此[SQL Fiddle 工作代码](http://sqlfiddle.com/#!3/7b956/2)`#`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:39:02.320

我猜你的表中没有包含“C#”这个字符串的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:31:20.940

`#`很好`LIKE`。你有匹配的数据吗？

# javascript - 确认前执行

> ID：12347827
> 
> 赞同：2
> 
> 时间：2012-09-10T08:26:30.123
> 
> 标签：javascript, setinterval, confirm

在确认启动之前，有什么方法可以在功能开启时停止间隔？

```
function check(){
    clearInterval(interval_id);
    if(confirm('Stream time is running out. Do you want to continue?'))
        //
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:28:58.790

如果这有点你想要的话，你可以将自己的代码挂钩到确认中：

```
window.proxiedConfirm = window.confirm;
window.confirm = function() {
   // custom interval code here
   return window.proxiedConfirm.apply(this, arguments);
}; 
```

您当然也可以手动收听响应：

```
window.proxiedConfirm = window.confirm;
window.confirm = function() {

   // custom interval code here

   var result = window.proxiedConfirm.apply(this, arguments);

   if(result) {
      // start interval again?
   }

   return result;
}; 
```

# javascript - 更改图像时 JCROP 重置纵横比

> ID：12347828
> 
> 赞同：0
> 
> 时间：2012-09-10T08:26:32.143
> 
> 标签：javascript, jquery, jcrop

我正在使用 Jcrop 允许我的用户在将图像加载到下一个表单之前对其进行裁剪。我从数据库中将一堆图像加载到一个 JS 数组中，这样它们就可以快速滚动浏览图像。

当我将新图像加载到 JCrop 中时，它会破坏纵横比。下面是我的js

```
<script type="text/javascript">

    jQuery(function($){

      // Create variables (in this scope) to hold the API and image size
      var jcrop_api, boundx, boundy;

      $('#fbimage').Jcrop({
        onChange: updatePreview,
        onSelect: updatePreview,
        aspectRatio: 1
      },function(){
        // Use the API to get the real image size
        var bounds = this.getBounds();
        boundx = bounds[0];
        boundy = bounds[1];
        //Store the API in the jcrop_api variable
        jcrop_api = this;
      });

        $('#nextPhoto').click(function(e) {
            if ($('.prevPhoto:hidden'))
            {
                $('#prevPhoto').show();
            }
            count= parseFloat($('#profilePicCOUNT').val());
            count = count+1;
            $('#profilePicCOUNT').val(count);
            //$('.fbimage').attr("src",images[count-1]);
            $('.previewpic').attr("src",images[count-1]);
            jcrop_api.setImage(images[count-1]);
            jcrop_api.setOptions({ bgOpacity: .6 });

            $('#profilePicURL').val(images[count-1]);
            if (count==images.length )
            {
                $('#nextPhoto').hide();
            }
              return false;
        });

        $('#prevPhoto').click(function(e) {
            if ($('#profilePicCOUNT').val()==2)
            {
                $('#prevPhoto').hide();
            }
            if (count<(images.length+1) )
            {
                $('#nextPhoto').show();
            }
            count= parseFloat($('#profilePicCOUNT').val());
            count = count-1;
            $('#profilePicCOUNT').val(count);
            //$('.fbimage').attr("src",images[count-1]);
            $('.previewpic').attr("src",images[count-1]);
            jcrop_api.setImage(images[count-1]);
            jcrop_api.setOptions({ bgOpacity: .6 });
            $('#profilePicURL').val(images[count-1]);
            count= parseFloat($('#profilePicCOUNT').val());
            count = count-1;
            return false;
        });

      function updatePreview(c)
      {
        if (parseInt(c.w) > 0)
        {
          var rx = 100 / c.w;
          var ry = 100 / c.h;

          $('#previewpic').css({
            width: Math.round(rx * boundx) + 'px',
            height: Math.round(ry * boundy) + 'px',
            marginLeft: '-' + Math.round(rx * c.x) + 'px',
            marginTop: '-' + Math.round(ry * c.y) + 'px'
          });
        }
      };

    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:42:24.927

经过几个小时的搜索和尝试，答案很简单。这行代码重置预览比率以正常工作：

```
var newUrl = 'https://..../image.jpg'
var jcrop_api = $('#Image1').data("Jcrop");
jcrop_api.setImage(newUrl , function() {
    jcrop_api = this;
    var bounds = this.getBounds();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T18:00:48.117

更改图像时我遇到了类似的纵横比问题

简单修复

实际图像在标签中使用高度和宽度样式。只需删除它。

```
 $('#Image1').data("Jcrop").destroy();
 $("#Image1").removeAttr("style"); 
```

# javascript - 菜单.asp javascript

> ID：12347829
> 
> 赞同：1
> 
> 时间：2012-09-10T08:26:34.050
> 
> 标签：javascript, asp.net

有没有办法使用 javascript 访问 asp:menu 中的元素 Menuitem 我的目标是在用户将鼠标悬停在菜单上时更改 imageUrl 路径。

```
 <div align = "center">
        <asp:Menu ID="Menu1" runat="server">
        <Items>
        <asp:MenuItem ImageUrl = "Images/education_remo_un.gif"></asp:MenuItem>
        </Items>
        </asp:Menu>

    </div> 
```

预先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:10:48.910

应用悬停功能的一种好方法是将 cssclass 分配给 menuitems 并在该 cssclass 中设置图像。

```
<asp:Menu ID="Menu1" runat="server">
    <DynamicSelectedStyle CssClass="menu-item-selected" />
    <StaticSelectedStyle CssClass="menu-item-selected" />
    <StaticHoverStyle CssClass="menu-item-hover" />
    <DynamicHoverStyle CssClass="menu-item-hover" />
    <Items>
        <asp:MenuItem Text="Item 1" Selectable="true" Selected="true"></asp:MenuItem>
        <asp:MenuItem Text="Item 2" Selectable="true"></asp:MenuItem>
        <asp:MenuItem Text="Item 3" Selectable="true"></asp:MenuItem>
    </Items>
</asp:Menu> 
```

# c# - asp.net c#登录类型

> ID：12347830
> 
> 赞同：0
> 
> 时间：2012-09-10T08:26:38.013
> 
> 标签：c#, asp.net

谁能帮我解决这个问题。

我使用了 2 个登录按钮，分别用于成员和管理员...我已在 login.aspx 上为成员和管理员分配...当用户成功登录系统时，我还将这些按钮放在 `Response.Cookies["DBBRoles"].Value = "M";`页面上。`Response.Cookies["DBBRoles"].Value = "A";``Response.Write(Request.Cookies["DBBRoles"].Value.ToString());`

问题是为什么即使我以会员身份登录，系统仍然为管理员保留值“A”。我可以使用相同的用户名和密码通过 1 个按钮登录系统......它没有检查登录类型对于管理员或成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:06:56.690

您需要在每次测试时清除缓存、cookie 和会话。如果没有，您将在每次测试时将值附加到相同的 cookie 并取决于您的登录实现，如果不清除缓存、cookie 和会话，您将拥有持久数据，因为您的会话仍在运行。

# c# - 在 C# 中保持已编辑 XML 文件的缩进

> ID：12347833
> 
> 赞同：3
> 
> 时间：2012-09-10T08:26:45.020
> 
> 标签：c#, linq-to-xml, app-config

作为安装过程的一部分，我更新了 app.config 文件中的一些值，该文件的构建和缩进方式有助于用户读取这些值。它是按部分构建的，每个部分都是一个 XElement，每个值都是一个 XAttribute。

这是以下部分的示例：

```
<DataAccessSection
  DataMappingFile = "Data\Mapping.xml"
  SchemaKeyWord = "[generated]"
/>
<ServiceManagementSection
  ServerName = "dummy"
  ServerIP = "1.0.0.0"
  Port = "1"
/> 
```

我使用 XDocument 编辑文件，访问该部分的 XElement 并更改 XAttribute 的值，然后使用保存更改`xDocument.Save(fullpath);`

文件保存后，配置文件的结构是这样的：

```
<DataAccessSection DataMappingFile="Data\Mapping.xml" SchemaKeyWord="[generated]" />
<ServiceManagementSection ServerName="dummy" ServerIP="1.0.0.0" Port="1" /> 
```

这种结构对用户来说不是很清楚，我如何将文件保持在初始结构中并且只更改值而不更改缩进？

我可以将它作为一个简单的文本文件打开和编辑，但是当我拥有结构化 XML 文件的强大功能时，像文本文件一样访问它似乎很愚蠢。

编辑：感谢您的回答。

我在答案中尝试了解决方案，但它不断删除我的空格和缩进。我还尝试使用以下方法加载：

```
XDocument.Load(fullPath, LoadOptions.PreserveWhiteSpaces); 
```

但这并不能解决我的问题。唯一保留所有空格的是将其作为文本文件加载，并使用字符串操作进行编辑，但我不想这样做。

有没有人有不同的方法可以解决这个问题？

也许使用不同的包进行 XML 编辑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:32:04.077

调用 xDocument.Load 时使用 LoadOptions.PreserveWhitespace，保存时使用 SaveOptions.DisableFormatting

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:31:47.540

尝试 ：

```
yourDoc.Save(fullpath, SaveOptions.DisableFormatting); 
```

从[文档](http://msdn.microsoft.com/en-us/library/system.xml.linq.saveoptions.aspx)：

> DisableFormatting ：在序列化时保留所有无关紧要的空白。

# javascript - jQuery 中的 NaN 错误。尝试过 ParseInt，仍然无法正常工作

> ID：12347839
> 
> 赞同：0
> 
> 时间：2012-09-10T08:27:07.563
> 
> 标签：javascript, jquery, html

我的代码有什么问题？

```
var value = $('#qty').val() * $('#rate').val();
var tax =  value * $('#tax').val() / 100;
$('#valueshow').text(tax);
$('#value').val(value); 
```

html部分是

```
<input type='text' name='qty"' size = '5'>
<input type='text' name='rate' size = '5'> 
<input type='text' name='tax' size = '5'> 
<input name='value' id='value'> 
<span id='valueshow'></span> 
```

它给出了 NaN 错误..请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:29:48.923

您在 jquery 代码中有错误，因为 jquery #use for id。在您的代码中，您没有在 html 输入类型中应用 Id 所以应用 id 并尝试它

```
 $('#qty').val() 

<input type='text' name='qty' id='qty' size = '5'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:46:41.960

将您的 html 代码指定为

```
<input type='text' name='qty' id='qty' size = '5'>
<input type='text' name='rate' id='rate' size = '5'> 
<input type='text' name='tax' id='tax' size = '5'> 
<input name='value' id='value'> 
<span id='valueshow'></span> 
```

每当你为 hyml 元素使用 id 时，只有你可以使用“#”作为 ('#qty').val() 希望你可以使用它

# linux-kernel - 使用系统调用 fork 克隆一个 kvm vm

> ID：12347841
> 
> 赞同：2
> 
> 时间：2012-09-10T08:27:15.783
> 
> 标签：linux-kernel, kvm

呈现为 qemu-kvm 进程的 KVM 虚拟机。在某些情况下，如果我们想克隆虚拟机，为什么不使用 fork？如我所见，至少有两个优点：

1.  sub VM 将与copy-on-write共享内存，减少内存消耗。
2.  使用写时复制即时克隆虚拟机

当然，还有一些问题需要解决，比如

1.  设计磁盘写入时复制以共享主 VM 映像文件。
2.  重定向子虚拟机 IO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:56:44.980

如果您在没有内核级虚拟化的情况下运行 VM（换句话说，您正在使用 QEMU 仿真），那么这可能只是工作，除了您提到的重复 I/O 的所有问题。您可以通过在“-snapshot”模式下运行 VM 来解决磁盘问题。同样，如果您的虚拟机是无头的（没有视频仿真），那也没关系。唯一剩下的问题是重复的网络。

如果您希望这可以与真正的 KVM 虚拟机一起使用，那么我认为您会很不幸。

即使你能做到，我也不确定你会得到你想象的优势。如果您独立启动两个 VM（或任何其他应用程序），那么它们将已经为它们打开的任何文件共享内存（显然它们只能真正共享只读文件）。这包括只读磁盘安装、KVM/QEMU 可执行文件和库本身，以及他们需要的任何其他内容。您将在您的方案中获得的唯一额外共享是数据表，然后只有在您的分叉之前使用的那些，并且这种共享将相对较短，因为对该数据的任何更新都会导致写入时复制。（实际上，这可能是 QEMU 在外国架构中的胜利，其中有大量缓存的 JIT 生成的可执行代码，但我认为这不是您所指的。）

# javascript - 正则表达式不起作用

> ID：12347844
> 
> 赞同：1
> 
> 时间：2012-09-10T08:27:26.530
> 
> 标签：javascript, jquery, regex

我需要一个正则表达式来只允许数字+后面的字符（`+`, `, `(`, `)`）`

 `我已经这样做了：

```
^-{0,1}\d+$ 
```

但这只取数字..我们如何也可以为字符编写它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:32:07.337

这将是解决方案：

```
^[0-9\+\s\(\)]+$ 
```

**[正则表达式演示](http://regexr.com?323ka)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:34:02.937

尝试以下操作：

```
^[0-9-.+ ()]+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:44:42.100

你需要的是一个字符类。您可以用方括号定义一个`[]`。然后只需将所有这些字符、范围或预定义的速记类添加到您的字符类中。

```
[-+\d() ] 
```

这样一个字符类将与类成员中的一个字符完全匹配。

您可能想在[regular-expressions.info上阅读有关字符类的更多详细信息，或者在我的](http://www.regular-expressions.info/charclass.html)[博客文章“每个程序员都应该了解的正则表达式](http://blog.xisb.de/?p=4)”中了解有关基本正则表达式功能的真正简要概述`

# android - 如何在位图的Arraylist中使用onTouchEvent？

> ID：12347845
> 
> 赞同：1
> 
> 时间：2012-09-10T08:27:26.217
> 
> 标签：android, bitmap, arraylist, drag, touch-event

我创建了一个类“元素”来获取位图。并且...

```
ArrayList<Element> mElements = new ArrayList<Element>(); 
```

...在surfaceview中绘制

```
synchronized (mElements) {
            for (Element element : mElements) {
                element.doDraw(canvas);
            }
        } 
```

现在，我想将 onTouchEvent 设置为多个位图移动或拖动。也许另一种方法更好地动态添加位图并移动它们。请帮忙，谢谢

# liferay - Liferay中基于密码策略的密码语法检查

> ID：12347847
> 
> 赞同：2
> 
> 时间：2012-09-10T08:27:31.763
> 
> 标签：liferay

我在 Liferay 中实现了一个单独的更改密码模块，特别是扩展了登录 portlet，使其在登录时具有更改密码。

我尝试调用 struts 操作 enterprise_admin/edit_user 但它不起作用但我通过获取该用户的密码策略并检查该类中的 minUpperCase 等实现了我自己的密码检查器，但有没有一种方法可以检查语法没有遍历密码并计算 minUpperCase 等？

Liferay 是否有特定的方法来检查密码是否适用于密码策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T14:54:06.323

你可以试试这个。这就是他们在 UserLocalService 中所做的

```
PasswordPolicy passwordPolicy = passwordPolicyLocalService.getDefaultPasswordPolicy(companyId);
PwdToolkitUtil.validate(companyId, 0, password1, password2, passwordPolicy); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T08:30:00.160

如果您没有看到 PwdToolkitUtil 您可以尝试这种方式：

```
Object[] arguments= {user.getCompanyId(), user.getUserId(), password, password, passwordPolicy};
MethodKey methodKey = new MethodKey("com.liferay.portal.security.pwd.PwdToolkitUtil", "validate", long.class, long.class, String.class , String.class, PasswordPolicy.class);
PortalClassInvoker.invoke(false, methodKey, arguments); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T08:59:52.287

如果您只是因为“登录时更改密码”功能而自定义登录，您也可以只使用门户的默认行为[`UserLocalServiceUtil.updatePassword`](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/UserLocalServiceUtil.html#updatePassword%28long,%20java.lang.String,%20java.lang.String,%20boolean%29)，而不是第四个参数：

```
public static User updatePassword(long userId,
                                  String password1,
                                  String password2,
                                  boolean passwordReset,
                                  boolean silentUpdate)
                       throws PortalException,
                              SystemException

Updates the user's password, optionally with tracking and validation of the change.

Parameters:
    userId - the primary key of the user
    password1 - the user's new password
    password2 - the user's new password confirmation
    passwordReset - whether the user should be asked to reset their password the next time they login
    silentUpdate - whether the password should be updated without being tracked, or validated. Primarily used for password imports.  
Returns:
    the user  
Throws:
    PortalException - if a user with the primary key could not be found 
    SystemException - if a system exception occurred 
```

# java - 使用 Eclipse 调试 Swing GUI

> ID：12347848
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:27:33.620
> 
> 标签：java, swing, debugging

每当我使用 Eclipse 调试具有 swing gui 的 Java 应用程序时，当它到达与 swing 相关的行时，它无法正确调试是否正常。

这是一个例子：

```
int number = 0; //Debugs fine
textbox.setText(Integer.toString(number)); //Takes me to this window saying "Source not Found" 
```

下图详细说明了当调试器到达与 swing GUI 相关的行时出现的情况：

![错误信息](../Images/1a0f4bdf8b3cd1f88abe340a56bd18e3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:06:28.977

1.  确保您已安装 JDK；Java 安装的根文件夹中应该有一个文件`src.zip`。没有它，Eclipse 就找不到源代码。

2.  确保 Eclipse 获取源代码。对于前 5 个左右的条目，在 JRE 定义对话框中的 JAR 上必须有一个微小的覆盖。更重要的是`rt.jar`

![在此处输入图像描述](../Images/9e35232538c7e57477d48a198d976a2c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:37:21.530

您可能也将调试断点放在源类上。我希望您遵循以下建议。

*   转到窗口
*   转到源视图
*   从那里选择断点
*   一旦打开，然后单击断点顶部的双重关闭图标。然后所有断点都刷新尝试新的断点进行调试

我希望这对你有用。

# android - 我可以获取 AlarmManager 设置的所有当前意图吗

> ID：12347849
> 
> 赞同：0
> 
> 时间：2012-09-10T08:27:36.263
> 
> 标签：android, android-intent, alarm

我可以获取 AlarmManager 设置的所有当前意图吗？我想知道设置了多少个意图以及它们是什么？

am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 300000, foo);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:34:32.420

检查[这个](https://stackoverflow.com/questions/6522792/get-list-of-active-pendingintents-in-alarmmanager)线程。不幸的是，这似乎只有使用 dumpsys 才有可能。

# php - TCPDF 每页目录

> ID：12347851
> 
> 赞同：1
> 
> 时间：2012-09-10T08:27:45.533
> 
> 标签：php, tcpdf, tableofcontents

我正在尝试在`PDF`. 就像一个经典的导航菜单。

`TCPDF`确实有一个目录索引功能，它在为每个页面添加书签后执行类似的操作。但这只会创建一个孤立的页面`(e.g. $pdf->addTOCPage())`。

我需要所有书签页面上的目录。据我阅读`TCPDF`文档，TOC 功能仅在所有页面都被添加书签后才起作用。这显然是一个问题，因为在此之前我需要每个页面上的链接。

我认为另一种解决方案是使用 JS。但我不知道如何将事件与每个页面联系起来。而且我读过最好避免将js与pdf一起使用。

谢谢

好吧，我想我找到了解决方案：

一个。创建每个页面并将其添加为书签

```
$pdf->AddPage(); <br /> 
$pdf->Bookmark(); 
```

湾。编辑创建的页面并向其添加目录

```
$pdf->SetPage(page number); <br />
$pdf->addHTMLTOC(); 
```

但最适合我的解决方案是写成 html：

```
<a href="#1">Page 1</a> 
```

`#1`PDF页码在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:03:41.033

像内容之前的索引页？

我正在使用以下页面生成索引页面。希望这会有所帮助

```
 $pdf->addTOCPage();
    $pdf->setColor('text',34,34,34);
    $pdf->SetFontSize(20);
    $pdf->MultiCell(0, 0, 'Table Of Contents', 1, 'C', 0, 1, '', '', true, 0);
    $pdf->Ln();
    $pdf->SetFontSize(10);
    $pdf->addTOC(2, '', '', 'INDEX', '', array(34,34,34));
    $pdf->endTOCPage(); 
```

# asp.net-mvc - 在 asp.net-mvc 3 中传递 Viewbag 是一种最佳方法

> ID：12347855
> 
> 赞同：0
> 
> 时间：2012-09-10T08:27:59.580
> 
> 标签：asp.net-mvc, viewbag

我们有很多将 JSON 结果返回给视图的控制器。视图需要根据用户的合同类型和用户的家庭位置是动态的。

我正在考虑使用 MVC 3.0 ViewBag 对象传递合同类型和其他属性。查看然后访问此对象并切换 UI。

如果这是最好的方法，有人可以帮助我吗？这种方法的缺点是每个控制器都需要将 viewbag 传递给 UI，或者将所需的对象存储在 session 中并从 View 访问它是好的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:32:53.120

`ViewBag`并且`ViewData`更多的是**最糟糕的方法**。ViewModel 应该包含 View 所需的一切。

如果您想了解更多有关原因和方式的信息，请查看 Darin Dimitrov 的精彩解释：[ViewBag、ViewData 和 TempData](https://stackoverflow.com/questions/7993263/viewbag-viewdata-and-tempdata)

**更新：**在您写的评论中，您不能使用 ViewModel，因为您正在重新调整 JSON 结果。传递 JSON 也可以使用 ViewModel 完成：

```
public JsonResult SomeAction()
{
    SomeViewModel model = ...;
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

# asp.net - 为什么 Chrome 开发者工具会显示 Cookie 会话过期？

> ID：12347859
> 
> 赞同：5
> 
> 时间：2012-09-10T08:28:19.013
> 
> 标签：asp.net, google-chrome

我正在使用 ASP.NET 会话和表单身份验证。我已经设置了他们的 cookie 的超时时间。但是 Chrome 向我显示 Cookie Expiration 等于 Session，

![在此处输入图像描述](../Images/27be243126a8e190f2994454f9c9cd80.png)

# sdk - CRM Dynamics 2011 SDK 写入太多审计历史

> ID：12347860
> 
> 赞同：2
> 
> 时间：2012-09-10T08:28:22.657
> 
> 标签：sdk, dynamics-crm-2011

我正在通过我们 AD 中的联系人 SDK 导入 CRM Dynamics 2011。我遇到的问题是，即使我只更改一个字段，所有字段都会写入审计历史记录。这使得很难看到发生了什么变化。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:25:11.977

正如 glosrob 所描述的，这可能是因为您正在进行创建，这会将每个字段提交到数据库。

您可以暂时禁用对您不感兴趣的字段的审核。

如果您打开解决方案中的各个字段，则可以选择进行审核。

看到这张[图片](http://magnetism.co.nz/images/blog-images-8/Auditing_Blog_Post_4.png?sfvrsn=0)。

# charts - Fusion Chart - 趋势图和条形图上的重叠数据标签 - 旧版本 3.0.3

> ID：12347861
> 
> 赞同：1
> 
> 时间：2012-09-10T08:28:23.173
> 
> 标签：charts, overlap, labels, fusioncharts

这是问题：

![在此处输入图像描述](../Images/f47a69b0caa7ecf624b4188402b6d4e7.png)

我已经读到您可以在 Fusion Charts 3.2 中更改数据标签的位置，但我们使用的是 3.0.3 版本，无法升级（有几个原因）。

所以，我只是问，有没有人在几年前遇到过这个问题并且经常解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:04:15.320

placeValuesInside='0' 仅在列的屋顶非常靠近画布上边距时才起作用。

无论如何，我使用了其他选项来解决这个问题： valuePadding='0'

问题是值文本和列末尾之间存在默认填充。

# ipad - iOS：在服务器上发送 unicode 文本的问题

> ID：12347864
> 
> 赞同：0
> 
> 时间：2012-09-10T08:28:34.737
> 
> 标签：ipad, unicode, utf-8, ios5.1, unicode-string

我遇到了与 Unicode 文本相关的非常令人沮丧的问题，我无法再做任何事情来解决它。我正在使用以下代码将英语和日语文本从 iPad 存储在服务器上。

```
 __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL: [NSURL URLWithString:url]];
    request.defaultResponseEncoding = NSUTF8StringEncoding;
    [request addRequestHeader:@"Content-Type" value:@"charset=UTF-8;"];

    NSData *data = [text dataUsingEncoding:NSUTF8StringEncoding];
    [request appendPostData:data]; 
```

**奇怪的是英文文本（在相同的文本中）在服务器上存储得很好，但不是日文。**它们被转换成一些垃圾文本。例如，当我 UTF8 编码为“This is test フロントドアに表示されたアメックスのステッカーはありますか”文本时，它存储为“This is test ‚ŒãŸã,¢ãƒ¡ãƒƒã,¯ã,¹ã®ã,¹ãƒ†ãƒã,«ãƒ¼ã¯ã,ã,Šã¾ã™ã‹ï¼Ÿ”。

谁能指出我这里出了什么问题？谢谢。

[编辑]

来自[ASIHTTPRequest 文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use)，

```
Sending a form POST with ASIFormDataRequest

To send POST data in a manner compatible with web page forms, use the included. 
ASIFormDataRequest subclass. ***Data is posted in ‘application/x-www-form-urlencoded’ 
format, or ‘multipart/form-data’ format when uploading binary data*** or files. Data in 
files is read as needed from disk, so POSTing large files is OK, as long as your 
web server is setup to handle them. 
```

所以我将我的代码转换为使用 ASIHTTPRequest 而不是 ASIFormDataRequest 但仍然没有运气！

```
 ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL: [NSURL URLWithString:url]];
    [request setDefaultResponseEncoding:NSUTF8StringEncoding];
    [request setRequestMethod:@"POST"];
    [request addRequestHeader:@"Content-Type" value:@"charset=UTF-8;"];

    NSData *data = [text dataUsingEncoding:NSUTF8StringEncoding];
    [request appendPostData:data]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:05:25.917

以下工作！对于内容类型，您必须具有 value = "text/json; charset=utf-8"。只是设置字符集是行不通的！

```
 ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL: [NSURL URLWithString:url]];
    [request setDefaultResponseEncoding:NSUTF8StringEncoding];
    [request setRequestMethod:@"post"];
    [request addRequestHeader:@"content-type" value:@"text/json; charset=utf-8"]; 
```

# javascript - 如何避免在 Angular 的 ng-repeat 中多次调用方法

> ID：12347873
> 
> 赞同：0
> 
> 时间：2012-09-10T08:29:57.900
> 
> 标签：javascript, angularjs

我已经写了这段代码。但是当我单击图像时，它调用了三次。它应该被调用一次 foo() 方法。你知道吗？

```
<div ng-controller="photoCtrl">

        <img ng-src="{{currentImg.path}}" class="current-img"></img>
        <p>
        <ul>
            <li ng-repeat="image in images" class="thumb-list">
            <img ng-src={{image.path}}/ class="thumb" ng-click={{foo()}}></img>
            </li>

        </ul>

</div> 
```

PhotoCtrl 在这里...

```
var photoCtrl = function($scope){
    $scope.images = [
        {"path":"img/a.jpeg"},
        {"path":"img/b.jpeg"},
        {"path":"img/c.jpeg"}
    ];
    $scope.currentImg = _.first($scope.images);

    $scope.foo = function(){
        console.log("Called");
    };

    $scope.setCurrentImg = function(item){
        console.log("callellellellellle");
    };

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:22:55.397

每次渲染 li 模板时都会*执行*foo() （因为它包含在 {{ }} 中，所以有 3 张图像时会执行 3 次）。

尝试

```
ng-click="foo()" 
```

反而。

# php - PHP是文件处理类的图像大小调整类吗？

> ID：12347880
> 
> 赞同：-2
> 
> 时间：2012-09-10T08:30:24.997
> 
> 标签：php, file, design-patterns, image-processing, file-handling

我打算开发一个文件处理类，它执行必要的文件操作，例如移动文件，确保文件类型和大小。还有一个 ImageResize 类，可将图像调整为特定的宽度或高度，或在图像上写入水印。我的问题是，FileHandling.php 是一个 Imageresize.php 类的组成。我的意思是你不能在不创建文件处理对象的情况下执行 ImageResize 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:39:25.553

     由于 ImageResize 类需要来自 FileHandling 的一些方法，并且您可能需要更多类来处理文件的各个部分，将 FileHandling 创建为接口，并让 ImageResize 类实现它。其他需要 FileHandling 接口的类也可以在需要时实现它。

# c# - 重命名文件夹c#中的文件

> ID：12347881
> 
> 赞同：38
> 
> 时间：2012-09-10T08:30:32.990
> 
> 标签：c#, file

我在一个文件夹中有超过 1000 个文件，名称如 abc_1、abc_2 ... abc_n

我想从所有文件中删除这个前缀“abc_”。任何机会不手动执行此操作，因为有超过 1000 个，这将是一个痛苦。

如何用 c# 做到这一点？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-09-10T08:37:01.483

您可以尝试使用此代码

```
DirectoryInfo d = new DirectoryInfo(@"C:\DirectoryToAccess");
FileInfo[] infos = d.GetFiles();
foreach(FileInfo f in infos)
{
    File.Move(f.FullName, f.FullName.Replace("abc_",""));
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-10T08:37:39.250

您可以使用[`File.Move`](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)和[`String.Substring(index)`](http://msdn.microsoft.com/en-us/library/aka44szs)：

```
var prefix = "abc_";
var rootDir = @"C:\Temp";
var fileNames = Directory.EnumerateFiles(rootDir, prefix + "*", SearchOption.AllDirectories);
foreach(String path in fileNames)
{
    var dir = Path.GetDirectoryName(path);
    var fileName = Path.GetFileName(path);
    var newPath = Path.Combine(dir, fileName.Substring(prefix.Length));
    File.Move(path, newPath);
} 
```

注意：`Directory.EnumerateFiles(rootDir, prefix + "*", SearchOption.AllDirectories);`还将搜索根目录中的子文件夹。如果这不是预期用途`SearchOption.TopDirectoryOnly`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T08:37:11.293

您可以枚举该文件。

```
using System.IO;

string[] filePaths = Directory.GetFiles(@"c:\MyDir\"); 
```

然后，ForEach 和 string[] 创建一个新的`IO.File`对象实例。

获得文件句柄后，只需调用 Move 方法并传入 String.Replace("abc_", String.Empty)。

我说 Move 是因为 IO.File 中没有直接的 Rename 方法。

`File.Move(oldFileName, newFileName);`

请注意扩展名。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T08:38:56.517

您应该查看[DirectoryInfo](http://msdn.microsoft.com/de-de/library/8s2fzb02)类和 GetFiles() 方法。并查看提供 Move() 方法的[File类。](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)

```
File.Move(oldFileName, newFileName); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-10T08:46:20.383

以下代码可以工作，但未经测试，

```
 public class FileNameFixer
    {
        public FileNameFixer()
        {
            StringToRemove = "_";
            StringReplacement = "";

        }
        public void FixAll(string directory)
        {
            IEnumerable<string> files = Directory.EnumerateFiles(directory);
            foreach (string file in files)
            {
                try
                {
                    FileInfo info = new FileInfo(file);
                    if (!info.IsReadOnly && !info.Attributes.HasFlag(FileAttributes.System))
                    {
                        string destFileName = GetNewFile(file);
                        info.MoveTo(destFileName);
                    }
                }
                catch (Exception ex)
                {
                    Debug.Write(ex.Message);
                }
            }
        }

        private string GetNewFile(string file)
        {
            string nameWithoutExtension = Path.GetFileNameWithoutExtension(file);
            if (nameWithoutExtension != null && nameWithoutExtension.Length > 1)
            {
                return Path.Combine(Path.GetDirectoryName(file),
                    file.Replace(StringToRemove, StringReplacement) + Path.GetExtension(file));
            }
            return file;
        }

        public string StringToRemove { get; set; }

        public string StringReplacement { get; set; }
    } 
```

你可以使用这个类，

```
 FileNameFixer fixer=new FileNameFixer();
        fixer.StringReplacement = String.Empty;
        fixer.StringToRemove = "@@";
        fixer.FixAll("C:\\temp"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-10T08:33:34.353

您可以使用 foreach 迭代以及 System.IO 命名空间中的 File 类。

它的所有方法都在这里免费为您提供：http: [//msdn.microsoft.com/en-us/library/system.io.file%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.file%28v=vs.100%29.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-10T08:37:12.310

[Total Commander](http://www.ghisler.com)可以[重命名多个文件](http://www.ghisler.com/advanced.htm)（您无需为每个小任务自行编写工具）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-10T08:39:29.607

```
string path = @"C:\NewFolder\";    
string[] filesInDirectpry = Directory.GetFiles(path, "abc*");
forearch(string file in filesInDirectory)
{
    FileInfo fileInfo = new FileInfo(file);
    fileInfo.MoveTo(path + "NewUniqueFileNamHere");
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-10T20:06:02.483

我喜欢投票最多的答案的简单性，但我不想修改文件路径，所以我稍微更改了代码......

```
string searchString = "_abc_";
string replaceString = "_123_";
string searchDirectory = @"\\unc\path\with\slashes\";
int counter = 0;
DirectoryInfo d = new DirectoryInfo(searchDirectory);
FileInfo[] infos = d.GetFiles();
foreach(FileInfo f in infos)
{
    if (f.Name.Contains(searchString)) 
    {
        File.Move(searchDirectory+f.Name, searchDirectory+ f.Name.Replace(searchString, replaceString));
        counter++;
    }
}
Debug.Print("Files renamed" + counter); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-02T19:44:54.110

此代码使用户能够替换文件名的一部分。如果目录中有许多文件具有相同的部分，则很有用。

```
using System;
using System.IO;

// ...
    static void Main(string[] args)
    {
        FileRenamer(@"D:\C++ Beginner's Guide", "Module", "PDF");

        Console.Write("Press any key to quit . . . ");
        Console.ReadKey(true);
    }

    static void FileRenamer(string source, string search, string replace)
    {
        string[] files = Directory.GetFiles(source);

        foreach (string filepath in files)
        {
            int fileindex = filepath.LastIndexOf('\\');
            string filename = filepath.Substring(fileindex);

            int startIndex = filename.IndexOf(search);
            if (startIndex == -1)
                continue;
            int endIndex = startIndex + search.Length;

            string newName = filename.Substring(0, startIndex);
            newName += replace;
            newName += filename.Substring(endIndex);

            string fileAddress = filepath.Substring(0, fileindex);
            fileAddress += newName;

            File.Move(filepath, fileAddress);
        }

        string[] subdirectories = Directory.GetDirectories(source);
        foreach (string subdirectory in subdirectories)
            FileRenamer(subdirectory, search, replace);
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-11T16:05:40.507

如果您希望递归地使用所有目录，请使用它：

```
using System;
using System.IO;

namespace ConsoleApp1
{
    class Program
    {
        static void Main(string[] args)
        {
            foreach (String filePath in Directory.GetFiles(@"C:\folderName\", "*.*", SearchOption.AllDirectories))
            {             
                File.Move(filePath, filePath.Replace("abc_", ""));
            }
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2013-09-23T17:02:32.003

这个命令可以解决问题，使用[renamer](https://github.com/75lb/renamer)：

```
$ renamer --find "abc_" * 
```

# objective-c - ipad - 主拆分的 UISplitViewController 奇怪行为

> ID：12347884
> 
> 赞同：3
> 
> 时间：2012-09-10T08:30:43.203
> 
> 标签：objective-c, xcode, cocoa-touch, ipad, uisplitviewcontroller

我正在开发`UISplitViewController`应用程序，`Master`视图嵌入到`Navigation Controller`.

每次我`Master`进入一个新的`GroupsViewController`然后按“后退”按钮时，我都会`GroupsViewController`移动到屏幕的中心，整个屏幕`SplitViewController`从顶部垂直覆盖：

![在此处输入图像描述](../Images/013abc3640e45e29efd507639914d8ae.png)

它只发生在横向。在肖像中一切正常。

转场是从`NavigationBarButton`到一个`GroupsViewController`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"ShowGroupsSegue"])
    {
        GroupsViewController *groupsController = (GroupsViewController *)[segue destinationViewController];
        groupsController.contactsdelegate = self;
    }
} 
```

有什么建议我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:07:44.090

我通过确保相关课程在 iPad 上的所有方向都返回`YES` 来让它工作。`(BOOL)shouldAutorotateToInterfaceOrientation`

我有一个通用项目，因此仍将特定类设置为适当的 iPhone 设置（仅返回 YES 到`UIInterfaceOrientationPortrait`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:29:24.957

你拯救了我的一天，还有一件事，对于任何人都有这样的问题，确保你所有的 UIViewController 在导航和选项卡控制器中都有

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
} 
```

# android - 用 FragmentActivity 和 Fragments 替换 TabActivity

> ID：12347886
> 
> 赞同：5
> 
> 时间：2012-09-10T08:30:49.757
> 
> 标签：android, android-fragments, android-tabhost, android-fragmentactivity

由于不推荐使用 TabActivity，因此我需要找到一种使用 Fragments 的方法。在我知道它是如何工作之前，我已经使用过 Fragments，但我需要一个指南来使用 FragmentActivities 创建我的标签主机。我在互联网上找到了几个示例，它们都是关于将片段放入选项卡的容器中。

我想要的是为每个选项卡放置 FragmentActivities。因为在我的应用程序中，我将使用 4 个选项卡，每个选项卡中都有非常复杂的内容。因此，我需要为每个选项卡设置一个 FragmentActivity 来管理我将放置在单独容器中的每个选项卡下的片段。

**解决方案：**

在互联网上回答和搜索后，我最终得到了一个解决方案。根据我找到的解决方案，我在标签主机下的每个标签的单独堆栈中跟踪片段。[这](https://github.com/osayilgan/samples/tree/master/SampleApp)是我的 GitHub 存储库，我为这个问题创建了一个小示例应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T09:08:18.913

> 由于不推荐使用 TabActivity，因此我需要找到一种使用 Fragments 的方法。

如果您不想使用`TabActivity`- 忘记放入`FragmentActivities`选项卡的内容。

我提醒您可以`TabWidget`不使用`TabActivity`. 所以你可以试试这个解决方案：

1.  只创建一个`FragmentActivity`.
2.  放入`TabWidget`' `FragmentActivity`s 布局。使`TabWidget`内容的高度 = 0。
3.  在`TabWidget`XML 中为您声明容器`Fragment`（`FrameLayout`例如）。
4.  `FragmentActivity` 只需处理选择了哪个选项卡 ( `TabHost.OnTabChangeListener`) 并将需要的选项`Fragment`放入容器中 。
5.  将程序逻辑（在不同活动中较早）放入不同的片段中。

或者您可以`FragmentActivity`使用`TabWidget`, 而不是切换`Fragment`s 来创建，您可以直接将`Fragment`s 放入每个选项卡的内容中。

例如，如果您有 3 个选项卡和 3 个片段，请尝试我所做的。`showFragmentX`当您需要将一个片段更改为另一个片段时调用。

```
public class Test extends FragmentActivity {

private Fragment1 fragment1=new Fragment1();
private Fragment2 fragment2=new Fragment2();
private Fragment3 fragment3=new Fragment3();

private void showFragment1(){
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragments_container, fragment1);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
}

private void showFragment2(){
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragments_container, fragment2);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
}

private void showFragment3(){
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragments_container, fragment3);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
}

@Override
protected void onCreate(Bundle arg0) {
    // TODO Auto-generated method stub
    super.onCreate(arg0);
    setContentView(R.layout.fragmentactivity_layout);
}
} 
```

如果您这样做，您的`fragmentX`变量将不会在每次放入时被删除`fragment_container`。他们会在你活着的时候`FragmentActivity`活着。看看[片段生命周期](http://developer.android.com/guide/components/fragments.html#Creating)。当你一个片段到另一个片段时，只有片段的`OnCreateView`和`onDestroyView`方法会一次又一次地调用。`replace`

Fragments 也有它们的`onSaveInstanceState`方法，您可以在其中保存片段的状态。例如：用户在 fragment1 的 editText 中输入了他的名字。如果您想在用户发现其他片段时保留此数据（名称字符串），您应该

`onSaveInstanceState`1.在fragment1的方法中保存名称字符串
2.到fragment1的 `onCreateView`方法中检查savedInstanceState bundle，如果它不为null - 用从bundle获得的字符串填充edittext。

```
public class Fragment1 extends Fragment {

EditText nameEditText;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);

    View fragment1View=inflater.inflate(R.layout.fragment1_layout, container, false);
    nameEditText=(EditText) fragment1View.findViewById(R.id.edittext_name);

    //check for saved data. if it is not null - fill your edittext with saved string
    if(savedInstanceState!=null){
        String nameString=(String) savedInstanceState.get("nameString");
        nameEditText.setText(nameString);
    }
    return fragment1View;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    //save data that user have entered
    outState.putString("nameString", nameEditText.getText().toString());
} 
```

}

您可以在保存前检查数据。我希望我的观点现在很清楚。

此外，如果您调用您`setRetainInstance(true)` 的`onCreateView()`方法`fragment`- 系统将尝试保存片段的状态（包含所有输入数据）。[链接到描述](https://stackoverflow.com/questions/11160412/why-use-fragmentsetretaininstanceboolean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:37:33.290

将选项卡内容放入单独的活动的方法已被弃用，因为现在我们有了 Fragment 框架。您应该将选项卡的复杂内容放入片段中，并在用户选择选项卡时交换这些片段。

推荐的解决方案是使用带有 Tab 导航的 ActionBar，而不是使用 TabHost 小部件。

# android - 如何制作支持所有屏幕的应用程序

> ID：12347897
> 
> 赞同：-4
> 
> 时间：2012-09-10T08:31:48.657
> 
> 标签：android, android-layout, android-screen

我有一个问题，我如何制作可以支持所有密度和分辨率屏幕的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:36:26.583

对于不同的屏幕尺寸，以下是应用程序中的资源目录列表，该应用程序为不同的屏幕尺寸提供不同的布局设计，并为小、中、高和超高密度屏幕提供不同的位图可绘制对象。

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

Manifest 中的以下代码支持所有屏幕。

```
<supports-screens android:smallScreens="true" 
          android:normalScreens="true" 
          android:largeScreens="true"
          android:xlargeScreens="true"
          android:anyDensity="true" /> 
```

# php - 不推荐使用的php函数的问题

> ID：12347899
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:31:54.047
> 
> 标签：php

我在这里有这个警告：`Function split() is deprecated` 我尝试用爆炸功能替换它。我不知道，也许我做错了什么，但这是显然已弃用的代码部分，你能帮我解决这个问题吗？

谢谢！

```
$kt = split(' ', $levels); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:33:12.090

你用[爆炸](http://php.net/manual/en/function.explode.php)做了什么？

```
$kt = explode(' ', $levels); 
```

应该将它分解为字符串中每个空格的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:33:29.130

使用`explode`而不是 this.Split 现在已弃用。 [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

# mysql - MYSQL Query 不工作，这种情况有更简单的查询吗？

> ID：12347900
> 
> 赞同：1
> 
> 时间：2012-09-10T08:31:57.893
> 
> 标签：mysql, sql, database

我有一个`STUDENT`表，其中包含有关教师学生的数据：

```
STUDENT(ID, Name, Grade, ID_Tutor) 
```

**结构**和**数据**：

```
CREATE TABLE STUDENT
    (`ID` int, `Name` varchar(5), `Grade` int, `ID_Tutor` int);

INSERT INTO STUDENT
    (`ID`, `Name`, `Grade`, `ID_Tutor`)
VALUES
    (1,    'A',     10,       NULL),
    (2,    'B',     9.5,      1),
    (3,    'C',     9,        1),
    (4,    'D',     8,        1),
    (5,    'E',     7,        4),
    (6,    'F',     8,        1),
    (7,    'G',     5,        7),
    (10,   'H',     6,        5)
    (11,   'I',     7,        3),
    (12,   'J',     9,        10),
    (13,   'K',     9.6,      11),
    (14,   'L',     8.9,      5),
    (15,   'M',     9.9,      13),
    (16,   'N',     7,        2),
    (17,   'O',     7.9,      2),
    (18,   'P',     2,        15); 
```

**前5名**教师成绩：

```
 `ID`, `Name`, `Grade`, `ID_Tutor`
    (1,    'A',     10,       NULL),
    (15,   'M',     9.9,      13),
    (13,   'K',     9.6,      11),
    (2,    'B',     9.5,      1),
    (3,    'C',     9,        1),
    (12,   'J',     9,        10), 
```

**结果**应该出现上表中这些导师的学生。

我想做一个 SQL 查询 ( **MYSQL** ) 来查找

*   **学生姓名**，
*   **导师姓名**和
*   **导师等级**

对于导师的**成绩**在前**5**名教师学生中的学生（并且不使用`LIMIT`和/或`ROWNUM`- 对于 Oracle 解决方案）。

**结果**应如下所示：

```
| student name | tutor name | tutor grade |
       'B'           'A'          10           
       'C'           'A'          10           
       'D'           'A'          10           
       'F'           'A'          10           
       'P'           'M'           9.9           
       'M'           'K'           9.6              
       'N'           'B'           9.5            
       'O'           'B'           9.5            
       'I'           'C'           9 
```

我尝试了这样的事情（但**没有**工作），我认为我很复杂......（我不应该使用`ROWNUM`）

```
SELECT 
    s.ID, 
    s.Name Student, 
    s.Grade, 
    p.ID_Tutor, 
    p.Grade
FROM 
    STUDENT s,
    (SELECT * FROM 
        (SELECT * FROM 
            (SELECT 
                t.Name Tutor , 
                t.ID , 
                Grade Grade_Tutor 
            FROM STUDENT s
                JOIN STUDENT t 
                    on s.ID_Tutor = t.ID
            GROUP BY t.Name, t.ID)
        ORDER BY 3 desc ) 
    WHERE ROWNUM < 6) p
WHERE s.ID_Tutor = p.ID 
```

给我这个**错误**：

```
 #1248 - Every derived table must have its own alias 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:48:51.597

您的代码缺少几个表别名。检查这个有效的[SQL Fiddle 代码](http://sqlfiddle.com/#!2/cded5/8)。但它没有返回任何值，因为我只是添加了一些愚蠢的值。随意使用它并测试您的结果。

```
SELECT s.ID, s.Name Student, s.Grade, p.ID_Tutor, p.Grade_tutor
FROM STUDENT s,
    (SELECT * FROM 
        (SELECT * FROM 
            (SELECT t.Name Tutor, t.ID , s.Grade Grade_Tutor, s.ID_Tutor
               FROM STUDENT s
               JOIN STUDENT t
                    on s.ID_Tutor = t.ID
            GROUP BY t.Name, t.ID) innerTable
         ORDER BY 3 desc ) secondInnerTable
     WHERE @ROWNUM < 6) p
WHERE s.ID_Tutor = p.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:19:06.140

非常感谢**@TehShrike**，这是他的回答！！！

唯一的“缺点”是使用 LIMIT，但如果有人有没有 LIMIT 的版本，请发布；在那之前，再次感谢**@TehShrike**！

```
SELECT 
        student.NAME AS student_name, 
        top_five_tutors.NAME AS tutor_name, 
        top_five_tutors.grade AS tutor_grade
FROM (
        SELECT 
                tutor.id, 
                tutor.NAME, 
                tutor.Grade
        FROM (
                SELECT DISTINCT 
                                id_tutor AS id
                FROM student
             ) AS tutor_ids

        JOIN student AS tutor 
            ON tutor.id = tutor_ids.id

        ORDER BY tutor.grade DESC
            LIMIT 5
     ) AS top_five_tutors

JOIN student 
    ON student.id_tutor = top_five_tutors.id 
```

# javascript - Jquery 工具在 Webkit 中不起作用

> ID：12347907
> 
> 赞同：1
> 
> 时间：2012-09-10T08:32:21.517
> 
> 标签：javascript, jquery, webkit, jquery-tools

我正在使用 jQuery 工具，特别是函数 .tabs ( [http://jquerytools.org/documentation/tabs/index.html](http://jquerytools.org/documentation/tabs/index.html) )

如果我使用该功能可以正常工作

```
<ul class="tabs">
<li><a href="#">Tab 1</a></li>
<li><a href="#">Tab 2</a></li>
<li><a href="#">Tab 3</a></li> 
```

但我还需要在`<select>`元素中使用该函数。这适用于 Firefox、Internet Explorer 等，但不适用于基于 webkit 的网络浏览器。（铬，Safari...）

为什么？这是问题的一个工作示例：http: [//jsfiddle.net/holmzor666/QXkbx/](http://jsfiddle.net/holmzor666/QXkbx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:50:01.253

看到这个[编辑](http://jsfiddle.net/QXkbx/4/)

```
$(function() {
    $("ul.tabs").tabs("div.panes > div");
});​ 
```

# asp.net-mvc - 使用 mvc Wrapper 将 ModelView 与 KendoGrid 上的字符串列表绑定

> ID：12347911
> 
> 赞同：1
> 
> 时间：2012-09-10T08:32:39.267
> 
> 标签：asp.net-mvc, razor, kendo-ui

嗨，我有一个 ModelView

```
public class GridUser
            {
                    public long id { get; set; }
                    public string username { get; set; }
                    public string name { get; set; }
                    public string email { get; set; }
                    public string surname { get; set; }
                    public DateTime createDate { get; set; }
                    public List<string> customfields { get; set; }
            } 
```

我无法绑定在 foreach 内部编写的字符串的字符串列表

```
.Columns(columns =>{ 
```

拜托，有人可以发布带有列表绑定的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:05:51.787

如果将列绑定到此列表属性 - 您将无法正确显示该集合 - 您也不会进行排序/过滤等。您可以使用 Template/ClientTemplate（取决于您的绑定）列遍历集合并显示项目。例如

```
@model IEnumerable<GridOneToManyTemplate.Models.Customer>

@(Html.Telerik().Grid<GridOneToManyTemplate.Models.Customer>()
    .DataBinding(config=> config.Ajax()
                            .Select("Customers","Home"))
    .Name("Grid")
    .Columns(cols =>
        { 
            cols.Bound(c => c.CompanyName);
            cols.Bound(c => c.Orders).ClientTemplate("<#= template(data) #>");
        })
    .Pageable(pages=> pages.PageSize(3))
)

<script>
    function template(item) {
        var html = "<ul>";
        for (var i = 0; i < item.Orders.length; i++) {
            html += "<li>";
            html += item.Orders[i].OrderID;
            html += "</li>";
        }
        html += "</ul>";
        return html;
    }  
</script> 
```

# opera - 从注册表安装 Opera 扩展

> ID：12347915
> 
> 赞同：4
> 
> 时间：2012-09-10T08:32:56.837
> 
> 标签：opera, opera-extension

我开发了一个 Opera 扩展。它工作正常。但我需要在 Windows 注册表或 Windows 文件系统中安装我的扩展。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T09:18:37.470

> > 注意：这个问题与 Opera 12 相关
> > Opera 12 使用了不同于以下 Opera 版本的扩展架构！

Opera 扩展不是通过注册表安装的。

您将在文件夹中找到一个名为 XML 的`widget.dat`文件：

```
C:\Users\%Username%\AppData\Local\Opera\Opera\widgets 
```

每个小部件都有一个条目。我想你会自己理解语法，如果你安装了一些小部件，它是不言自明的。

* * *

编辑：我刚刚发现添加一个新条目`widget.dat`会将扩展安装到 Opera，但由于尚未初始化，它将被停用。这通常在运行时通过 javascript/扩展引擎发生。

`prefs.dat`要手动启用脚本，widget.dat 中注明的文件夹中必须有一个`wuid-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`，至少包含以下结构：

```
<?xml version="1.0" encoding="utf-8"?>
<preferences>
  <section id="ui">
    <value id="default-prefs-applied" xml:space="preserve">1</value>
  </section>
</preferences> 
```

除此之外，您可能必须手动初始化`pstorage`文件夹中的小部件设置。这些设置存储为 base64 编码的 utf-16 键值对字符串。所以，这个编码结构：

```
<ws>
  <e>
    <k>YQBsAGUAcgB0AF8AYgB1AGIAYgBsAGUAXwB0AGkAbQBlAG8AdQB0AA==</k>
    <v>IgAxADUAIgA=</v>
  </e>
<ws> 
```

读作：

```
<widgetsettings>
  <entry>
    <key>alert_bubble_timeout</key>
    <value>"15"</value>
  </entry>
<widgetsettings> 
```

（标签名称可以自由解释；）我在[这里找到了一个能够处理 utf-16 的 base64 en/decoder](http://www5.rptea.com/base64/)

* * *

PS：Opera 会通过双击来安装小部件。因此，您也可以在命令行上使用扩展路径执行 Opera。届时，Opera 将为您做所有事情。

```
C:\Program Files\Opera\opera.exe C:\Path\To\Extension.oex 
```

# c++ - 从内联函数调用中调用内联函数？

> ID：12347916
> 
> 赞同：1
> 
> 时间：2012-09-10T08:32:57.040
> 
> 标签：c++, qt, inline

我注意到 std::min 和 std::max 都内联在 stl_algobase.h 头文件中，我想知道这样的行是否对（任何，但尤其是 gcc）编译器有问题：

```
a = std::max(b, std::min(c, d)); 
```

当这个表达式被内联时，这里实际发生了什么？

* * *

**解释：**

我有[这个](https://stackoverflow.com/questions/12297478/a-change-in-eventfilter-function-causes-weird-qgraphicscene-behavior)完全没有意义的错误。我将错误追溯到这些行：

```
float mouseScenePosX = mouseEvent->scenePos().x();
mouseScenePosX = max((float)0,
    min(mouseScenePosX, (float)scene->getSceneRect().width()-1)); 
```

我总是在 mouseScenePosX 中得到 0，尽管 mouseScenePosX 和 scene->getSceneRect().width()-1 都大于 0。奇怪的是，当我从 makefile 中删除 -O2 标志时，错误消失了，而且当我使用我自己的最小和最大实现。所以，我想知道它是否可能是由内联错误引起的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:35:49.813

保证它的行为就像它进行函数调用一样。编译器的任何内联（如果有的话）绝对必须产生与不进行内联时相同的结果。

换句话说，您的示例代码应该完全按照您的预期工作，返回比较 b 的最大值到比较 c 和 d 的最小值。

如果你发现编译器违反了这一点，就把它扔掉。

我从未见过关于这种事情的 GCC 错误。实际上从未见过关于内联的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T00:10:10.763

您可能想尝试在最后一个参数中添加括号：

getSceneRect().width()-1))); ?>

如果它工作*得更好*，那么 min/max 不是 std::min 和 std::max。

如果拆分它会更好地工作是没有意义的，因为 std::min 和 std::max 是函数（内联或非内联）并且调用约定不能破坏。

# eclipse - 在 Eclipse 上使用 SSL 设置 Tomcat：“keystoreFile”无效

> ID：12347919
> 
> 赞同：3
> 
> 时间：2012-09-10T08:33:12.000
> 
> 标签：eclipse, ssl, tomcat6, keystore

我正在 Eclpse 上使用 Tomcat6 + SSL 设置测试环境

我编辑了`server.xml`文件（在 Eclipse 服务器文件夹中）并取消了 SSL 连接器的注释。[然后我按照这个操作指南](http://www.mkyong.com/tomcat/how-to-configure-tomcat-to-support-ssl-or-https/)制作了一个自签名证书。一切正常，直到我将密钥库文件保存在我的主目录中，但是，当我尝试将它放在另一个文件夹中并设置“keystoreFile”参数时，我在启动时收到此错误消息：

```
GRAVE: Failed to load keystore type JKS with path C:\Documents and Settings\myUser/.keystore due to C:\Documents and Settings\myUser\.keystore (Impossibile trovare il file specificato) 
java.io.FileNotFoundException: C:\Documents and Settings\myUser\.keystore (Impossibile trovare il file specificato) 
```

似乎 Tomcat 没有读取我的 keystoreFile 参数。

这是我的`server.xml`文件（仅限 SSL 相关部分）

```
 ...
<!--APR library loader. Documentation at /docs/apr.html -->
<Listener SSLEngine="on" className="org.apache.catalina.core.AprLifecycleListener"/>
               ...
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS"
           keystoreFile="C:\myPath\.keystore"
           keystorePass="******"  />
               ... 
```

**更新**

我将项目导出为`.war`文件并将其部署在*独立的*Tomcat 上。它可以工作，所以它一定是 Eclipse 导致我的问题的原因。如果它可以帮助我使用 Eclipse Helios (Service Release 2)。

谢谢。

**结语**

最后，感谢 Bruno，它发现是 Eclipse 搞砸了部署文件。清理 eclipse 部署文件夹后，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:16:06.457

`keystoreFile`没有效果，因为您使用的是[APR 连接器](http://tomcat.apache.org/tomcat-6.0-doc/apr.html#HTTPS)( `AprLifecycleListener`)，它使用的参数集与[JSSE 连接器](http://tomcat.apache.org/tomcat-6.0-doc/config/http.html#SSL_Support)不同。

特别是，它不使用`keystoreFile`OpenSSL 样式的参数（类似于 Apache Httpd 的`mod_ssl`配置）：您需要转换您的密钥和证书才能使其与 APR 连接器一起使用。

# three.js - three.js 示例中的纹理问题

> ID：12347920
> 
> 赞同：0
> 
> 时间：2012-09-10T08:33:17.867
> 
> 标签：three.js

我在使用 Three.js 示例时遇到了一些问题。您可以在下图中看到，它似乎在网上运行良好，但在我的桌面上却无法运行。我更改代码试图找出问题所在，问题似乎出在纹理加载上。你看，如果我将纹理材质更改为某种基本颜色，它会起作用，但如果有纹理，则不会。你们能告诉我这是怎么回事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:17:14.663

您的示例未显示，但我希望您的答案在有关如何在本地运行的 Three.js wiki 中。

[https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)。

# codeigniter - 如何在 codeigniter 控制器方法中使用 GET？

> ID：12347926
> 
> 赞同：0
> 
> 时间：2012-09-10T08:33:35.303
> 
> 标签：codeigniter

我有一个像这样的网址 [http://example.com/cronetab/realTimeDeliveryReport?externalId=14133337681891060&deliveredTS=2012-09-10%2013:27:32&status=Deliverd&cause=Successfully%20Deliverd&phoneNo=919995171152](http://example.com/cronetab/realTimeDeliveryReport?externalId=14133337681891060&deliveredTS=2012-09-10%2013:27:32&status=Deliverd&cause=Successfully%20Deliverd&phoneNo=919995171152)

crontab 是控制器名称，realTimeDeliveryReport 是我们调用的方法。所以我们以上述格式传递参数。

我们如何在这个函数中获取这个参数值？或者我怎样才能传递像 url?externalId=14133337681891060 这样的参数？

在这里，URL 就像一个回调 URL。所以另一台服务器正在附加这样的参数..所以我需要解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:24:14.040

使用[Code Igniter 输入库](http://codeigniter.com/user_guide/libraries/input.html)，您应该能够使用`$this->input->get('keyName')`

Code Igniter 消除了 GET 数组，但它仍然在内部存储它，因此您可以使用输入库访问值。

另一个选项是在您的配置文件中设置`$config['allow_get_array'] = true;`这将允许您使用`$_GET['keyName']`. 您可能还需要设置此配置值才能使用上述输入库函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:45:23.280

我不确定这是否是你想要的..

尝试

```
$_GET['externalid']
$_GET['deliveredTS']
$_GET['status'] 
```

等等...

**更新**

尝试这个

功能实时交付报告（）{

if($_GET['externalID'] != "") {

$this->User_model->realTimeDeliveryReport();

}

}

当您使用该网址时，参数将保存在 $_GET 变量中，您需要在那里搜索，我不确定这是否会有所帮助......但试试看；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:25:25.920

从codeigniter手册：

> 启用查询字符串
> 
> 在某些情况下，您可能更喜欢使用查询字符串 URL：
> 
> index.php?c=products&m=view&id=345
> 
> CodeIgniter 可选地支持此功能，可以在您的 application/config.php 文件中启用。如果你打开你的配置文件，你会看到这些项目：
> 
> ```
> $config['enable_query_strings'] = FALSE;
> $config['controller_trigger'] = 'c';
> $config['function_trigger'] = 'm'; 
> ```
> 
> 如果您将“enable_query_strings”更改为 TRUE，此功能将变为活动状态。然后，您的控制器和函数将可以使用您设置为调用控制器和方法的“触发器”字词访问：
> 
> index.php?c=控制器&m=方法
> 
> 请注意：如果您使用查询字符串，则必须构建自己的 URL，而不是使用 URL 帮助程序（以及生成 URL 的其他帮助程序，如一些表单帮助程序），因为它们旨在处理基于分段的 URL。

[http://ellislab.com/codeigniter/user_guide/general/urls.html](http://ellislab.com/codeigniter/user_guide/general/urls.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T14:59:34.327

*   请尝试在 url 中传递数据，如下所示，

[http://example.com/cronetab/realTimeDeliveryReport/14133337681891060/2012-09-10%2013:27:32/Deliverd/Successfully%20Deliverd/919995171152](http://example.com/cronetab/realTimeDeliveryReport/14133337681891060/2012-09-10%2013:27:32/Deliverd/Successfully%20Deliverd/919995171152)

*   然后在“realTimeDeliveryReport”控制器方法中访问数据，如下所示，

函数 realTimeDeliveryReport($externalId,$deliveredTS,$status,$cause,$phoneNo){

echo "$externalId,$deliveredTS,$status,$cause,$phoneNo";

}

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-06-08T09:14:48.153

试试看发送参数
“/Player/edit_user?id=$row->id?”
在控制器中尝试
$id = $this->input->get('id');

# java - 为什么在我进行下载过程时我的 JFrame 是空白的？

> ID：12347928
> 
> 赞同：0
> 
> 时间：2012-09-10T08:33:47.883
> 
> 标签：java, jframe

我有一个类，`extends JFrame`在里面我有一个方法如下：

```
public void downloadUrl(String filename, String urlString) throws MalformedURLException, IOException
{
    BufferedInputStream in = null;
    FileOutputStream fout = null;
    try
    {
        in = new BufferedInputStream(new URL(urlString).openStream());
        fout = new FileOutputStream(filename);

        byte data[] = new byte[1024];
        int count;
        int modPackSize = getModPackSize();
        while ((count = in.read(data, 0, 1024)) != -1)
        {
            fout.write(data, 0, count);
            downloadedPerc += (count*1.0/modPackSize)*100;
            progressBar.setValue((int) downloadedPerc);
            label.setText((int) downloadedPerc + "%");
            System.out.println(downloadedPerc);
        }

    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finally
    {           
        if (in != null)
            in.close();
        if (fout != null)
            fout.flush();   
        fout.close();
    }
} 
```

此方法下载文件并获取下载百分比。当它运行时，我的 JFrame 是空白的。运行后，JFrame 会更新并正确显示，但我希望它经常更新（嗯，首先显示自己），我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:50:49.100

您应该使用[SwingWorker 类](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)来实现下载任务。主线程上长时间运行的任务会冻结你的 GUI，直到任务完成，这就是为什么这些任务应该在后台线程上执行。[SwingWorker 类](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)将允许您执行此操作并同时更新您的进度条。

# perl - 如何使用 PERL 访问 sybase

> ID：12347931
> 
> 赞同：1
> 
> 时间：2012-09-10T08:33:49.770
> 
> 标签：perl, sybase

这是我到目前为止所拥有的。我无法创建数据库连接。

```
#!/usr/local/bin/perl
require "sybutil.pl";
use Sybase::DBlib;
use DBI;
my $dbhandle=&opendb;
sub opendb{
    my $server ="abc.nam.aa.net";
    my $user = "sam";
    my $password = "abc123";
    #print "Connecting to $server as $user and $password\n";
    my $dbfh= new Sybase::DBlib($user, $password, $server);
    if(!defined($dbfh)) {
        die("Cannot connect to server.\n");
    }
    printf "Open database '%s' with id '%s' successful\n", $server, $user;
    return $dbfh;
} 
```

如何使用 PERL 访问 sybase？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:04:29.060

我记得，$server 的格式应该与该特定服务器的接口文件（$SYBASE/interfaces 或 %SYBASE%/sql.ini）中的条目相同。它通常与查询返回的值相同`select @@servername`

主机名/ip 和端口列在接口文件中，Sybase 库将使用该文件进行查找。

[可以在Michael Peppler 的网站](http://www.peppler.org/sybperl/sybperl.html)上找到有关这方面的更多信息以及代码示例。Michael 维护着 Sybperl 邮件列表，并且在他的网站上确实有大量信息。

# php - 如何通过省略一列从多维数组中获取数据？

> ID：12347938
> 
> 赞同：1
> 
> 时间：2012-09-10T08:34:03.920
> 
> 标签：php, multidimensional-array

我在这样的循环中将信息存储在数组中：

```
while ($ind = mysql_fetch_array($result))
    $array["uniqueName"][$ind][$hash]["mac"] = $mac; 
```

如果我没有得到 $hash，我怎么能得到所有的 $mac，所以通过上下文中的所有哈希：

```
$array["uniqueName"][432][?]["mac"] 
```

我可以用“？”做什么？多于？我可以以某种方式省略它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:39:11.857

您可以像这样遍历哈希键：

```
$macs = array();
foreach($array["uniqueName"][$ind] as $hash){
    array_push($macs, $hash["mac"]);
} 
```

从评论更新：

foreach 语句将 $array["uniqueName"][$id] 包含的每个键一一加载到 $hash 变量中。所以你不必知道这些键实际上是什么（或者即使有），你可以通过使用 $hash var 来引用它们来使用它们。所以实际上，foreach 语句循环遍历 $array["uniqueName"][$id] 包含的所有键。

# facebook - 无需将 Facebook.com 列入白名单即可连接 Facebook

> ID：12347939
> 
> 赞同：0
> 
> 时间：2012-09-10T08:34:10.607
> 
> 标签：facebook, connect, whitelist

我有一个非常具体的情况，我希望允许用户使用他们的 Facebook 帐户登录以访问免费 Wi-Fi。用户在登录前或登录过程中无法浏览任何未添加到 Wi-Fi 路由器白名单的网站。登录后，用户可以自由浏览。

从最初的测试来看，似乎我不能允许用户使用 Facebook 登录，除非我还将整个 Facebook 域列入白名单以允许标准的 Facebook 连接代码工作。

将整个 Facebook 域列入白名单是没有意义的，因为这意味着用户无需登录即可浏览非常受欢迎的社交网站！

是否有任何选项可供我提供连接 Facebook 功能而无需将 Facebook.com 列入白名单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:37:07.570

抱歉没有。用户必须在某个时候访问 facebook.com 才能登录。他只能在可以访问 facebook.com 的情况下这样做

# c# - 杂志阅读器中的 SnapView (Windows 8)

> ID：12347942
> 
> 赞同：0
> 
> 时间：2012-09-10T08:34:17.580
> 
> 标签：c#, microsoft-metro, windows-runtime

我正在开发一个杂志阅读器。用户首先选择杂志，然后选择问题，问题内容在 FlipView 中显示为一系列图像（1 个图像 = 1 页）。

您将如何在 SnapView 中显示问题详细信息？显示页面的图像没有多大意义，不是 readebla.e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:40:41.810

您的页面不应该是图像，而是文本和插图的组合。然后你可以将它重排到任何屏幕尺寸和方向，*包括*SnapView（这是页面布局中侧边栏的精细近似）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:43:42.103

您可以在模糊列表（如胶片色带）中显示特定问题的图像列表。还可以添加提示，“在抓拍模式下图像无法正常查看，请更改查看模式”

顺便说一句，我完全同意 Serg Rogovtsev 的观点。

# orchardcms - 从 Orchard 中的主题页面渲染模块视图？

> ID：12347943
> 
> 赞同：2
> 
> 时间：2012-09-10T08:34:20.997
> 
> 标签：orchardcms

我在 Orchard 和主页上创建了一个主题，我想从一个模块呈现一个视图。

将要呈现的视图由两个模块确定。如果后者在 Orchard 中启用，则一个“默认”模块和另一个覆盖默认路由的模块。所以我最好想做的是在我的主题主页中以某种方式指定路由/url，并根据启用的模块呈现返回的视图依赖项。这可以在果园做吗？

我可以使用 AJAX 在加载时动态呈现视图，或者使用`<iframe>`指定的 url，但我宁愿使用“纯”Orchard 解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:58:14.300

Okey so I came up with the following solution thanks to Bertrand's comment.

```
@{
    try
    {
        Html.RenderAction("Register", new { controller = "Home", area = "Invites" });
    }
    catch (InvalidOperationException inviteException)
    {
        try
        {
            Html.RenderAction("Register", new { controller = "Home", area = "Users" });
        }
        catch (InvalidOperationException userException)
        {
            @Display(New.DownloadLink());
        }
    }
} 
```

So first I try to render a registration form from `Invites` and if that module is disabled I try to render a registration form form `Users`. In the case that both modules are disabled a simple download link is displayed.

# ruby-on-rails-3 - 如何根据控制器名称将 css 添加到控制器视图

> ID：12347948
> 
> 赞同：1
> 
> 时间：2012-09-10T08:34:29.563
> 
> 标签：ruby-on-rails-3

我是红宝石新手。我想根据控制器名称将 css 添加到控制器视图中。我怎么能这样做，因为使用所有 css 使我很难使用 css 更改主体颜色和其他属性。

目前，我的 application.html.erb 有：

```
<%= stylesheet_link_tag    "application", :media => "all" %> 
```

使用所有 css 文件。我如何自定义它以使用特定的 css 和特定的控制器。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:38:51.730

我在我的 ApplicationHelper 中使用了类似的东西。

```
def controller_stylesheet_link_tag
  return "" if params[:controller].blank?
  begin
    stylesheet_link_tag params[:controller].downcase, :media => "all"
  rescue Exception => e
    e.message
  end
end 
```

然后，您只需调用`<%=controller_stylesheet_link_tag %>`您的布局。

# android - Webview , Android 4.0.4 上的 loadData 方法不起作用

> ID：12347951
> 
> 赞同：0
> 
> 时间：2012-09-10T08:34:41.763
> 
> 标签：android, android-layout

我正在使用这样的 Webview 和 loadData 方法：

```
 try {   
                    htmlEncode = URLEncoder.encode(html, "UTF-8").replaceAll("\\+", " ");
                } catch (UnsupportedEncodingException e) {
                    htmlEncode = html;
                    e.printStackTrace();
                }           
                webView.loadData( htmlEncode,"text/html; charset=UTF-8", "UTF-8"); 
```

html 是“html 字符串”。这些代码在除 android 4.0.4 之外的所有 android 版本中都可以正常工作。webView 不理解`\n`字符。它不能换行。我和我的伙伴搜索了几个小时，但找不到任何解决方案。有一些原因我们不能使用 loadDataWithBaseURL() 方法。你有没有遇到过这个问题？或者你有什么想法让我们找出问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T05:22:42.537

我解决了我的问题。我通过这种方式使用 webview：在运行时将 webview 添加到布局。所以，当我在 Android 4.0.4 上使用 loadDataWithBaseURL() 时。它不能显示 html 字符串，所以我改用 loadData() 方法。但是当我有时使用 loadData() 方法时，webview 也无法显示内容，或者 html 字符串编码有很多问题。但现在我有了解决方案。

```
 webView.postDelayed(new Runnable() {
        @Override
        public void run() {
            webView.loadDataWithBaseURL(null, html, "text/html", "UTF-8", "UTF-8");
        }
    }, 100); 
```

我不知道为什么我们必须在调用 loadDataWithBaseURL 方法之前延迟一点时间。但正如我的猜测，可能是因为 webview 在加载 html 字符串之前需要时间来初始化。希望它可以帮助将来有人遇到这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:44:31.153

```
webView.loadData(HtmlEncode, "text/html; charset=UTF-8", null); 
```

以上应该适用于Android 4.0。在安卓 4.0 上测试。

编辑：在 4.0.3 上工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T08:55:11.037

看看这个问题：

[https://code.google.com/p/android/issues/detail?id=6965](https://code.google.com/p/android/issues/detail?id=6965)

简而言之，解决方法是将 \n\r 替换为`&#13;&#10;`

对我很有用。

# c# - 尝试在 C# 中序列化对象时引用主窗体

> ID：12347953
> 
> 赞同：3
> 
> 时间：2012-09-10T08:34:59.800
> 
> 标签：c#, serialization

我的主窗体上有一个按钮，它调用一个将一些对象序列化到磁盘的方法。我正在尝试将这些对象添加到 ArrayList，然后使用 BinaryFormatter 和 FileStream 对它们进行序列化。

```
 public void SerializeGAToDisk(string GenAlgName)
    {
        // Let's make a list that includes all the objects we 
        // need to store a GA instance
        ArrayList GAContents = new ArrayList();
        // Structure and info for a GA
        GAContents.Add(GenAlgInstances[GenAlgName]);  
        // There may be several running GA's
        GAContents.Add(RunningGAs[GenAlgName]);  

        using (FileStream fStream = new FileStream(GenAlgName + ".ga", 
            FileMode.Create, FileAccess.Write, FileShare.None))
        {
            BinaryFormatter binFormat = new BinaryFormatter();
            binFormat.Serialize(fStream, GAContents);
        }
    } 
```

运行上述代码时，出现以下异常：

System.Runtime.Serialization.SerializationException 未处理程序集“GeneticAlgApp，版本=1.0.0.0，文化=中性，PublicKeyToken=null”中的消息=类型“WindowsFormsApplication1.Form1”未标记为可序列化。

**所以这意味着在我试图保存的对象中的某个地方必须有对主表单的引用。我能看到的唯一可能的引用是 3 个委托，它们都指向主表单代码中的方法。代表也会被序列化吗？我似乎无法将`[NonSerialized]`属性应用于它们。**

还有什么我可能会丢失的吗？更好的是，是否有一种快速的方法可以找到导致问题的参考？

**更新：**

好吧，我通过将委托保存到临时变量中然后在序列化之前将它们设置为 null 来使我的代码工作。然后我将它们设置回原来的值。似乎应该有更好的方法来做到这一点。请问有什么意见吗？

**回答：**

除了在序列化之前将它们设置为 null 之外，我想不出一种方法来阻止我的委托被序列化，但是我认为最好的解决方案是**更改我的代码以改用事件**。正如 Mark Gravell 在他的回答中所说，事件可以通过使用`[field:Nonserialized]`属性标记从序列化中省略。问题解决了。实际上没有人建议这个，但我想马克的回答是最接近的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:52:27.187

这几乎总是意味着您已经从表单订阅了一个事件。是的，委托字段在使用时默认是序列化的`BinaryFormatter`，也就是说*事件*是序列化的。检查您的事件：您通常应该标记支持委托`[NonSerialized]`。对于类似字段的事件，请使用`[field:NonSerialized]`. 例如：

```
[field:NonSerialized]
public event EventHandler Foo; 
```

或者：

```
[NonSerialized]
private EventHandler foo;

public event EventHandler {
    add { foo += value; }
    remove { foo -= value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:45:47.920

要查找所有引用，在 Visual Studio 中，右键单击该类（我猜这里是主窗体），然后选择 Find All References (Ctrl + K,R)
也让您序列化您需要具有 [Serializable] 属性的东西.
而且我认为您不能序列化代表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:42:11.153

您的对象可能不支持序列化。如果是您的自定义对象，请使用 [Serializable] 属性标记它们。您还可以阅读[本文](http://msdn.microsoft.com/en-us/library/ms973893.aspx)以了解如何实现您的自定义序列化过程。

# powershell - powershell - 如何多次运行代码的特定部分

> ID：12347954
> 
> 赞同：0
> 
> 时间：2012-09-10T08:35:06.193
> 
> 标签：powershell, powershell-2.0, powershell-remoting

如果我想多次运行 PS 脚本，我可以使用 windows 调度程序，但是如果我需要多次运行某些代码而不是整个脚本怎么办？

我有脚本来监视远程服务器，我需要每秒检查一次处理器时间和每分钟的内存量。我不想将其拆分为更多单独的脚本，因为我正在监视数十个值。或者你对解决这个问题有什么不同的想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:09:14.207

您也许可以为此使用 WMI 计时器

```
PS C:\> $iClsTimer = [wmiclass]"__IntervalTimerInstruction"
PS C:\> $iTimer = $iClsTimer.CreateInstance();
PS C:\> $iTimer.TimerId="MonEvtTimer"
PS C:\> $iTimer.IntervalBetweenEvents= 2000
PS C:\> $iTimer.SkipIfPassed=$true
PS C:\> $iTimer.Put()

Path          : \\.\root\cimv2:__IntervalTimerInstruction.TimerId="MonEvtTimer"
RelativePath  : __IntervalTimerInstruction.TimerId="MonEvtTimer"
Server        : .
NamespacePath : root\cimv2
ClassName     : __IntervalTimerInstruction
IsClass       : False
IsInstance    : True
IsSingleton   : False

PS C:\silogix> $query = "Select * From __TimerEvent Where TimerID='MonEvtTimer'"
PS C:\silogix> Register-WMIEvent -Query $query -Action {write-host "Timer"}

Id              Name            State      HasMoreData     Location       Command
--              ----            -----      -----------     --------       -------
2               19e70483-2a0... NotStarted False                          write-host "Timer" 
```

**备注**：另一种解决方案是使用 Windows 窗体计时器

# android - Android调试不起作用说正在等待调试器

> ID：12347956
> 
> 赞同：1
> 
> 时间：2012-09-10T08:35:09.877
> 
> 标签：android, eclipse

在你投反对票之前，请先阅读我的问题。我知道这一直在 stackoverflow 主题中，但我似乎无法弄清楚为什么它对我不起作用。`android:debuggable="true"`我试着把

```
<uses-permission android:name="android.permission.SET_DEBUG_APP"></uses-permission> 
```

在清单中。即使在模拟器中它也不起作用。我使用日食朱诺。任何人都知道如何解决这个问题？

我什至重新启动手机，但没有运气。谢谢

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.breakpoint"
    android:versionCode="1"

    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.SET_DEBUG_APP"></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
       android:debuggable="true"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# sql - SSRS 2008 在 Visual Studio 2008 中使用组中的表达式时的慢速预览

> ID：12347958
> 
> 赞同：0
> 
> 时间：2012-09-10T08:35:10.623
> 
> 标签：sql, sql-server, sql-server-2008, visual-studio-2008, reporting-services

在 Visual Studio 2008 中创建使用如下表达式的矩阵报表时，预览所需的时间比应做的要长得多。

=Fields(Parameters!ColumnGroupParam.Value).Value

如果相同的报表部署到报表服务器并在报表管理器中查看，或者报表是使用报表生成器而不是 Visual Studio 设计的，则不会出现问题并且报表会快速生成。

从 SQL Server Profiler 查看结果时，从 Visual Studio 查询查询需要更长的时间才能返回结果集。

报告经理：持续时间 = 1885

Visual Studio：持续时间 = 327946（长 173 倍！）

通常，即使没有用于组的表达式，从 Visual Studio 完成查询执行似乎也会更慢。在 SQL Server 2008 R2 和 SQL Server 2012 中尝试此操作时，我遇到了相同的行为。

以前有没有其他人遇到过这种行为并找到了合适的修复方法？

**重现步骤：**

使用 AdventureWorksDW2008 数据库，使用以下查询作为数据集在 Visual Studio 2008 中创建矩阵报表：

```
SELECT
PC.EnglishProductCategoryName AS Category
,PSC.EnglishProductSubcategoryName AS Subcategory
,P.EnglishProductName AS ProductName
,G.EnglishCountryRegionName AS Country
,G.StateProvinceName AS State
,FIS.SalesAmount
FROM        dbo.FactInternetSales FIS
INNER JOIN dbo.DimProduct P
ON FIS.ProductKey = P.ProductKey
INNER JOIN dbo.DimProductSubcategory PSC
ON P.ProductSubcategoryKey = PSC.ProductSubcategoryKey
INNER JOIN dbo.DimProductCategory PC
ON PSC.ProductCategoryKey = PC.ProductCategoryKey
INNER JOIN dbo.DimCustomer C
ON FIS.CustomerKey = C.CustomerKey
INNER JOIN dbo.DimGeography G
ON C.GeographyKey = G.GeographyKey 
```

创建 2 个参数 RowGroupParam 和 ColumnGroupParam，它们都具有可用值 Category、Subcategory、ProductName。

使用表达式 =Fields(Parameters!RowGroupParam.Value).Value 创建行组，使用表达式 =Fields(Parameters!ColumnGroupParam.Value).Value 创建列组。对行组和列组的文本框值使用相同的表达式。

使用 SalesAmount 作为详细信息文本框。

运行报表，为行组参数选择类别，为列组类别选择子类别。等待 30 秒以生成报告。

将相同的报表部署到报表服务器并使用相同的参数运行报表。报告将在几秒钟内生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:40:48.407

我不能给你100%的答案，只是我的经验。当报表服务构建自己的内部记录集时，它会获取所有数据并创建一个新的虚拟记录集（表）。正如您所提到的，这比直接从 sql 查询执行要慢。所以我要做什么来防止这种情况：始终构建查询并将它们存储在 ms sql 中以在那里执行所有工作。在报告本身中，我只访问查询的结果。

例如`SELECT * FROM qry_verycomplicatedquery`，它作为查询存储在 ms sql 中。

也许其他人知道更好的方法，但无论如何，这种方法更容易处理，以便使用相同的数据源管理大量报告。

# node.js - 带参数的回调函数

> ID：12347961
> 
> 赞同：0
> 
> 时间：2012-09-10T08:35:25.867
> 
> 标签：node.js, coffeescript

我知道如何用咖啡脚本编写回调函数，如下所示：

*test1.coffee*

```
exports.cube=(callback)-> 
    callback(5) 
```

*test2.coffee*

```
test1=require('./test1')

test1.cube (result) ->
    console.log(result) 
```

我想知道如何在回调函数中添加参数？这样我就可以像这样使用它：

```
test1.cube(para,result)->
    //use *para* to compute a *result*
    //here can do something with *result* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:18:34.053

如果我理解正确，你想要的是：

```
cube = (x, callback) ->
  callback(x * x * x)

cube 3, (result) ->
  console.log 'the cube of 3 is ', result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:00:58.190

您可以使用内置方法 apply() 或 call() 之类的

```
callback.call(...)
callback.apply(...) 
```

这里有更多关于它们之间的区别和区别： [call 和 apply 有什么区别？](https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply)

# javascript - 在 NodeJs 服务器中发出请求？

> ID：12347962
> 
> 赞同：3
> 
> 时间：2012-09-10T08:35:26.770
> 
> 标签：javascript, node.js

我创建了一个服务器 http 侦听器：

```
var http = require('http');
http.createServer(function (req, res)
{
        res.writeHead(200,
        {
                'Content-Type': 'text/plain'
        });
        res.write('aaa');
        res.end();
}).listen(1337, '127.0.0.1');
console.log('waiting......'); 
```

它正在寻找并做出响应。

![在此处输入图像描述](../Images/de77f9c4af3df9f3377d649dd8d606d2.png)

现在，我想要 - foreach 客户端请求 - 服务器执行*另一个*请求并*附加*一个字符串`"XXX"` ：

所以我写道：

```
var http = require('http');
var options = {
        host: 'www.random.org',
        path: '/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
};
http.createServer(function (req, res)
{
        res.writeHead(200,
        {
                'Content-Type': 'text/plain'
        });
        res.write('aaa');

        http.request(options, function (r)
        {
                r.on('data', function (chunk)
                {
                        res.write('XXX');
                });
                r.on('end', function ()
                {
                        console.log(str);
                });
                res.end();
        });

        res.end();
}).listen(1337, '127.0.0.1');
console.log('waiting......'); 
```

所以现在foreach请求，它应该写：`aaaXXX`（aaa+XXX）

但它不起作用。它仍然产生相同的输出。

我错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:14:39.503

尝试这个：

```
var http = require('http');
var options = {
        host: 'www.random.org',
        path: '/integers/?num=1&min=1&max=10&col=1&base=10&format=plain&rnd=new'
};
http.createServer(function (req, res)
{
        res.writeHead(200,
        {
                'Content-Type': 'text/plain'
        });
        res.write('aaa');

        var httpreq = http.request(options, function (r)
        {
            r.setEncoding('utf8');
            r.on('data', function (chunk)
            {
                res.write(' - '+chunk+' - ');
            });
            r.on('end', function (str)
            {
                res.end();
            });

        });

        httpreq.end();

}).listen(1337, '127.0.0.1');
console.log('waiting......'); 
```

另外，值得一读[关于nodejitsu的这篇文章](http://docs.nodejitsu.com/articles/HTTP/clients/how-to-create-a-HTTP-request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:44:18.593

你打电话`res.end()`太早了......你只想在所有事情都写完后做事（例如当 r.on('end') 被调用时）。

对于这样的事情，我**强烈**建议使用优秀的请求库（https://github.com/mikeal/request）。

这有一个很棒的 AP​​I，例如：

```
var request = require('request');
request('http://www.google.com', function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body) // Print the google web page.
  }
}) 
```

# android - Android：动态存储共享首选项中的字符串数组

> ID：12347963
> 
> 赞同：0
> 
> 时间：2012-09-10T08:35:30.280
> 
> 标签：android, sharedpreferences

我的应用程序中只有一个编辑文本，我想在单击按钮时从中存储字符串数组。就像任何浏览器的历史一样。我想在我的应用程序启动时显示存储的字符串。我一直在尝试将共享首选项与单个 textview 一起使用。我附上了我的活动的代码。

```
public class MainActivity extends Activity {

Button insert;
EditText edt;
TextView txt1, txt2, txt3, txt4, txt5;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    edt = (EditText) findViewById(R.id.search_word);

    txt1 = (TextView) findViewById(R.id.txt1);

    insert = (Button) findViewById(R.id.insert);
    insert.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            SharedPreferences app_preferences = PreferenceManager
                    .getDefaultSharedPreferences(MainActivity.this);
            SharedPreferences.Editor editor = app_preferences.edit();
            String text = edt.getText().toString();
            editor.putString("key", text);
            editor.commit();
            Toast.makeText(getBaseContext(), text, Toast.LENGTH_SHORT)
                    .show();
        }
    });
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();

    SharedPreferences app_preferences = PreferenceManager
            .getDefaultSharedPreferences(this);
    String text = app_preferences.getString("key", "null");
    txt1.setText(text);
} 
```

}

我只有一个文本视图正在填充，我想使用它显示最近五个搜索历史。请给我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:55:48.803

序列化您的数据。Array -> String 和 String 可以保存到首选项，也许使用 JSON 来编码/解码您的数据。 [http://developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html) http://www.json.org/

# html - 如何在输入类型文本中显示解码的 unicode 字符值？

> ID：12347969
> 
> 赞同：-3
> 
> 时间：2012-09-10T08:36:07.723
> 
> 标签：html, unicode, input

我在数据库`(", \)`中用它们的 unicode 值对一些字符进行编码`(&#34; , &#92;)`。当我在 HTML 中显示这些字段时，它们显示得很好，但是当我放入 `<input type="text">`元素时，我得到的信息显示为来自 DB 的实际值，`(&#34; , &#92;)`而不是它们的解码值`(", \)`。

如何在输入类型文本元素中显示 Unicode 字符的解码值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:44:12.070

> 我将这些字段提供给一个 jquery 库，该库将此输出视为 Json。

然后我猜想在填充您正在使用`val()`的输入时，它将文本作为输入，而在填充您正在使用的页面的其他部分时`html()`，它将 HTML 作为输入。

不要发送包含 HTML 的 JSON。发送包含文本的 JSON。需要 HTML 时转换为 HTML。不要将 HTML 存储在数据库中。

> 这些字符破坏了它所期望的 JSON 对象，所以我必须让它们已经转义。

您应该将它们编码为 JSON，而不是 HTML。除非您尝试通过将字符串混合在一起来生成 JSON，否则您不应该遇到这个问题。不要那样做，而是使用 JSON 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:24:16.300

事实证明，这是一个 Spring 选项（属性`htmlEscape`），它在输入字段上转义了 HTML 内容服务器端。

当我将输入字段上的该属性设置为 false 时，序列`&#34`不再转义，客户端收到的响应中的字符改为`"`.

不幸的是，我没有在问题中指定 JSP 上的输入类型标记是 Spring 特定的，而不是 HTML 的，因为我认为这不是问题的关键因素。

# android - android中的自动完成TextView

> ID：12347972
> 
> 赞同：1
> 
> 时间：2012-09-10T08:36:16.770
> 
> 标签：android, autocompletetextview

我想在 中显示不同的短信发件人手机号码`Autocomplete textview`。

当用户选择特定数字时。我需要显示该号码的许多消息。我知道如何从手机中获取联系人我在自动完成文本视图中显示它，但我需要短信发件人号码到自动完成文本。

这是我的代码：

```
public class contactapp extends Activity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.autocomplete_4);

    ContentResolver content = getContentResolver();
    Cursor cursor = content.query(Contacts.People.CONTENT_URI,
            PEOPLE_PROJECTION, null, null, Contacts.People.DEFAULT_SORT_ORDER);
    ContactListAdapter adapter = new ContactListAdapter(this, cursor);

    AutoCompleteTextView textView = (AutoCompleteTextView)
            findViewById(R.id.edit);
    textView.setAdapter(adapter);
}

public static class ContactListAdapter extends CursorAdapter implements Filterable {
    Cursor cu;

    public ContactListAdapter(Context context, Cursor c) {
        super(context, c);
        mContent = context.getContentResolver();
        cu=c;
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final LayoutInflater inflater = LayoutInflater.from(context);
        final TextView view = (TextView) inflater.inflate(
                android.R.layout.simple_dropdown_item_1line, parent, false);
        view.setText(cursor.getString(5));
        return view;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        ((TextView) view).setText(cursor.getString(5));
    }

    @Override
   public String convertToString(Cursor cursor) {
       return cursor.getString(5);
   }

    @Override
    public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
        if (getFilterQueryProvider() != null) {
            return getFilterQueryProvider().runQuery(constraint);
        }

        StringBuilder buffer = null;
        String[] args = null;
        if (constraint != null) {
            buffer = new StringBuilder();
            buffer.append("UPPER(");
            buffer.append(Contacts.ContactMethods.NAME);

            buffer.append(") GLOB ?");
            args = new String[] { constraint.toString().toUpperCase() + "*" };
        }

        return mContent.query(Contacts.People.CONTENT_URI, PEOPLE_PROJECTION,
                buffer == null ? null : buffer.toString(), args,
                Contacts.People.DEFAULT_SORT_ORDER);

    }

    private ContentResolver mContent;        
}

private static final String[] PEOPLE_PROJECTION = new String[] {
    Contacts.People._ID,
    Contacts.People.PRIMARY_PHONE_ID,
    Contacts.People.TYPE,
    Contacts.People.NUMBER,
    Contacts.People.LABEL,
    Contacts.People.NAME,
}; 
```

}

# jquery-selectors - $(this + ":submit") 在 Jquery 1.8.1 中不再起作用

> ID：12347980
> 
> 赞同：1
> 
> 时间：2012-09-10T08:36:48.237
> 
> 标签：jquery-selectors

在过去，以下工作完美：

```
$(this + ":submit").live('click', function (e) {

}); 
```

但我刚开始使用 JQuery 1.8.1，在选择器上出现以下错误`$(this + ":submit")`：

```
Error: Syntax error, unrecognized expression: [object Object]:submit 
```

'this' 是对表单 ID 的 jquery 选择`$('form1')`，结果为`[ form#form1 ]`

什么可能是与 Jquery 1.8.1 和以前版本的 Jquery 一起使用的替代语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:10:15.433

您必须提供`this`上下文

```
$(":submit", this) 
```

这相当于

```
$(this).find(":submit") 
```

我建议后者，因为它使事情更具可读性。

* * *

**更新**：为了澄清，我正在编辑@Esailija 的评论 -

> 这从来没有奏效！- 即 $(this + ":submit")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:54:45.863

要么`this`是一个提交按钮，你只需要调用`$(this)`，要么你的提交按钮在`this`DOM 树的某个地方，你应该使用`$(this).find(":submit")`

# c++ - 递归调用终止

> ID：12347981
> 
> 赞同：12
> 
> 时间：2012-09-10T08:36:52.853
> 
> 标签：c++, linux, exception-handling

据我所知，`terminate()`当异常处理出现问题时调用（通常只是没有被捕获）。我得到的只是一个错误行`terminate called recursively`。

谷歌搜索了一段时间后，我发现了很多例子

```
terminate called after throwing an instance of ... terminate called recursively 
```

但这不是我的情况。由于我没有关于异常类型的提示，我想知道这`terminate called recursively`本身意味着什么。

抱歉，我无法提供代码，所以任何猜测都会有所帮助。我在 Ubuntu 11.04 下使用 g++ 4.5.2 进行编译。

非常感谢，亚历克斯。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-10T08:48:51.823

可能是某些代码抛出了您没有捕获的异常，这意味着`terminate`将被调用。终止程序意味着可能会调用对象析构函数，如果其中一个出现异常，`terminate`则将“递归”调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-23T06:41:44.393

我遇到过这个问题，可能`error`是你在`thread pool`or中的函数`thread`。

让我们重现`terminate called recursively` `exception`.

我正在编写一个线程池`c++11`，这是我的代码：

```
// blocking queue
template<typename T>
class SafeQueue{ 
    public:
        bool pop(T& value){
            std::lock_guard<std::mutex> lock(mtx_);
            if(queue_.empty())
                return false;

            value = queue_.front();
            queue_.pop_front();
            return true;
        }

        void push(T&& value){
            std::lock_guard<std::mutex> lock(mtx_);
            queue_.push_back(std::move(value));
        }

        bool empty(){
            std::lock_guard<std::mutex> lock(mtx_);
            return queue_.empty();
        }

    private:
        std::mutex mtx_;
        std::list<T> queue_;
};

typedef std::function<void()> Task;
typedef SafeQueue<Task> Tasks;

class ThreadPool{
    public:
        ThreadPool(uint32_t nums=5, bool start=false);
        ~ThreadPool();

        void start();
        void addTask(Task&& task);
        void join();
        void exit();
        size_t getThreadNum(){return threadNums_;}

    private:
        Tasks tasks_;

        std::vector<std::thread> threads_;
        size_t threadNums_;
        bool stop_;
};

ThreadPool::ThreadPool(uint32_t nums, bool start):
  threadNums_(nums), stop_(false)
{
    if(start)
        this->start();
}

ThreadPool::~ThreadPool(){
    stop_ = true;
}

void ThreadPool::start(){
    auto lb_thread_fun = [this](){
        while (!stop_){
            Task task;
            tasks_.pop(task);
            // error from here, task maybe empty.
            task();
        }
    };

    for (int i = 0; i < threadNums_; ++i) {
        threads_.push_back(std::thread(lb_thread_fun));
    }
}

void ThreadPool::addTask(Task&& task){
    tasks_.push(std::move(task));
}

void ThreadPool::join(){
    for (auto& th:threads_) {
        th.join();
    }
}

void ThreadPool::exit(){
    stop_ = true;
} 
```

**测试代码如下：**

```
#include "my_threadpool.h"
#include <iostream>

using std::cout;
using std::endl;

auto lb_dummy_dw = [](const std::string& url){
    cout<<"start downloading: "<<url<<endl;
    std::this_thread::sleep_for(std::chrono::seconds(2));
    cout<<"downloading success !!!!"<<url<<endl;
};

auto lb_dummy_sql = [](int id, const std::string& name){
    cout<<"start select from db, id:" << id << ", name: "<<name<<endl;
    std::this_thread::sleep_for(std::chrono::seconds(3));
    cout<<"select db success !!!!"<<endl;
};

void test_thread_pool(){
    cout<<"create thread pool with 5 thread"<<endl;
    xy::ThreadPool tp(5);

    cout<<"add 3 * 2 task to thread pool"<<endl;
    for (int i = 0; i < 3; ++i) {
        tp.addTask(std::bind(lb_dummy_dw, "ww.xxx.com"));
        tp.addTask(std::bind(lb_dummy_sql, i, "xy" + std::to_string(i)));
    }

    cout<<"start thread pool"<<endl;
    tp.start();
    tp.join();
}

int main(){
    test_thread_pool();
    return 0;
} 
```

**当您运行上述代码时，您可能会得到以下输出：**

```
create thread pool with 5 thread
add 3 * 2 task to thread pool
start thread pool
start downloading: ww.xxx.com
start select from db, id:0, name: xy0
start downloading: ww.xxx.com
start select from db, id:1, name: xy1
start downloading: ww.xxx.com
downloading success !!!!ww.xxx.com
start select from db, id:2, name: xy2
downloading success !!!!ww.xxx.com
downloading success !!!!ww.xxx.com
terminate called recursively
terminate called after throwing an instance of 'std::bad_function_call'
  what(): 
```

**你可以看到，它有`terminate called recursively`异常。**因为，在函数`start`中，变量`task`可能为空，所以每个线程中都`thread pool`抛出`bad_function_call`异常。

```
void ThreadPool::start(){
    auto lb_thread_fun = [this](){
        while (!stop_){
            Task task;
            tasks_.pop(task);
            // error from here, task maybe empty.
            task();
        }
    };

    for (int i = 0; i < threadNums_; ++i) {
        threads_.push_back(std::thread(lb_thread_fun));
    }
} 
```

任务空测试代码如下：

```
void test_task(){
    Task task;
    try{
        task();
    }catch (std::exception& e){
        cout<<"running task, with exception..."<<e.what()<<endl;
        return;
    }

    cout<<"ending task, without error"<<endl;
} 
```

输出如下：

```
running task, with exception...bad_function_call 
```

# visualization - 是否可以填写谷歌图表中两行之间的区域？

> ID：12347982
> 
> 赞同：3
> 
> 时间：2012-09-10T08:36:56.553
> 
> 标签：visualization, google-visualization

[我在Google Charts API](https://developers.google.com/chart/)中看不到任何示例，这些示例将演示如何在两个图表之间的区域中创建填充颜色。在我的情况下，这种填充颜色应该填充代表最差和最好结果之间的差值的区域。

这就是我要的：

![我想要的是](../Images/705b79a7597dd25bf86e9989b001eeae.png)

这就是我所拥有的

![我有的](../Images/9ddf49c14674d81dbbb75800a6f06137.png)

关于如何做到这一点的任何想法（如果有的话！）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T02:18:15.640

`AreaChart`通过使用堆叠和一些创造性的思维，我能够非常接近地重新创建您想要的图表。将以下代码插入[代码游乐场](https://code.google.com/apis/ajax/playground/?type=visualization#area_chart)：

```
function drawVisualization() {
  var data = google.visualization.arrayToDataTable([
    ['a',    'b',   'c',   'd'],
    ['1',    100,   10,    10],
    ['10',   250,   150,   50],
  ]);

  var ac = new google.visualization.AreaChart(document.getElementById('visualization'));
  ac.draw(data, {
    isStacked: true,
    series: [{color: 'white', lineWidth: 0}, {color: 'purple'}, {color: 'purple', lineWidth: 0}],
    legend: {position: 'none'},
  });
} 
```

​关键是让底部/第一个系列的颜色与图表的背景相同，并且最后一个/顶部系列没有线宽。这两者都由`series`参数控制。问题是，由于系列是堆叠的，您必须减去较低系列的值才能得到正确的数字。例如，如果您希望最低线位于 250，中间/深紫色线位于 400，顶线位于 450，则必须使用值 250、150 和 50。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:06:40.523

[从未见过，但您也许可以使用“间隔”角色](https://developers.google.com/chart/interactive/docs/roles#intervalrole)来做某事。

# jquery - 如何使用 jQuery 在 css 中设置重要标志？

> ID：12347994
> 
> 赞同：4
> 
> 时间：2012-09-10T08:37:25.490
> 
> 标签：jquery, css

> **可能重复：**
> [Jquery css：应用！重要样式](https://stackoverflow.com/questions/2655925/jquery-css-applying-important-styles)

我有以下代码：

```
$("body")
    .ajaxStart(function () {
        $(this).css({ 'cursor': 'progress' })
    })
    .ajaxStop(function () {
        $(this).css({ 'cursor': 'default' })
    }); 
```

这有效，但当我将鼠标悬停在有悬停和不同光标的链接上时无效。有没有一种方法可以使用 jQuery> 将上面的 CSS 光标属性设置为重要

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:38:37.270

试试这个代码，例如：

```
$(this).css({ 'cursor': 'default !important' }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T08:38:50.307

```
$("body")
.ajaxStart(function () {
    $(this).css({ 'cursor': 'progress !important' })
})
.ajaxStop(function () {
    $(this).css({ 'cursor': 'default !important' })
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T08:39:14.523

只需`!important`在您的属性值之后添加：

```
$("body")
    .ajaxStart(function () {
        $(this).css({ 'cursor': 'progress !important' })
    })
     .ajaxStop(function () {
        $(this).css({ 'cursor': 'default  !important' })
   }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T08:38:56.753

这是语法，

[如何使用 .css() 应用 !important？](https://stackoverflow.com/questions/2655925/jquery-css-applying-important-styles)

# string - 在一些标签之间建立链接

> ID：12347998
> 
> 赞同：0
> 
> 时间：2012-09-10T08:37:50.060
> 
> 标签：string, text, hyperlink, turkish

当用户在标签中写东西时，我尝试创建链接。但问题是我无法转换字符集。像 ş = s, ğ = g ...这是我的代码

```
$(document).ready(function () {
   $('em').html(function(i, linkle) {

var returnString = linkle.toLowerCase();
//Convert Characters
returnString = returnString.replace(/ö/g, 'o');
returnString = returnString.replace(/ç/g, 'c');
returnString = returnString.replace(/ş/g, 's');
returnString = returnString.replace(/ı/g, 'i');
returnString = returnString.replace(/ğ/g, 'g');
returnString = returnString.replace(/ü/g, 'u');  

// if there are other invalid chars, convert them into blank spaces
returnString = returnString.replace(/[^a-z0-9\s-]/g, "");
// convert multiple spaces and hyphens into one space       
returnString = returnString.replace(/[\s-]+/g, " ");
// trims current string
returnString = returnString.replace(/^\s+|\s+$/g,"");
// cuts string (if too long)
if(returnString.length > maxLength)
returnString = returnString.substring(0,maxLength);
// add hyphens
returnString = returnString.replace(/\s/g, "-");    

return '<a href="/' + linkle + '/">' + linkle + '</a>';
});
}); 
```

如何转换字符并建立我的链接。最后我想要的是如果第一个和最后一个字符是空白的，清除它...... Ty。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:43:45.310

jquery`html()`函数需要一个字符串，但您提供的是一个函数，您应该将该函数移出`html`调用并传递其返回值。此外，您在构建链接时实际上并没有使用该`returnString`变量，我认为 return 语句应该是：

```
return '<a href="/' + returnString + '/">' + returnString + '</a>'; 
```

您也可以考虑只使用[encodeURI](http://www.w3schools.com/jsref/jsref_encodeuri.asp)而不是手动替换字符 - 这将转换无效字符，以便在 url 中安全使用。

# gps - GPS语句：GPRMA

> ID：12347999
> 
> 赞同：0
> 
> 时间：2012-09-10T08:38:15.333
> 
> 标签：gps, nmea

我正在编写 NMEA 语句解析器，但找不到关于 GPRMA 语句的 ant 文档，除了它是：“推荐的最小特定 Loran-C 数据”。有谁知道这句话是什么意思？其中的经度和纬度是指gps设备当前位置吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:18:24.263

[来自http://aprs.gids.nl/nmea/#rma](http://aprs.gids.nl/nmea/#rma)的非常方便的指南：

```
eg. $GPRMA,A,llll.ll,N,lllll.ll,W,,,ss.s,ccc,vv.v,W*hh
1    = Data status 
2    = Latitude
3    = N/S
4    = longitude
5    = W/E
6    = not used
7    = not used
8    = Speed over ground in knots
9    = Course over ground
10   = Variation
11   = Direction of variation E/W
12   = Checksum 
```

现在，LORAN 数据**不是 GPS**。它是相似的，但是用于寻找位置[的地面站的旧标准。](http://en.wikipedia.org/wiki/LORAN)所以要具体回答你的问题，不，这不是 GPS 数据。如果您需要 GPS 数据，则需要`$GPRMC`.