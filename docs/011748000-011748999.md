# StackOverflow 问答 11748000-11748999

# powershell - Powershell ISE 不会在 Windows 7 中呈现客户端区域

> ID：11748001
> 
> 赞同：4
> 
> 时间：2012-07-31T19:58:18.230
> 
> 标签：powershell, windows-7

最近，我的 Windows 7 笔记本电脑上的 Powershell ISE 出现了一个问题，即只有标题栏和框架会呈现到屏幕上。不会出现整个客户区（包括菜单）。相反，客户区后面的任何东西都会显示出来。如果我在屏幕上四处移动 ISE，我会得到一个客户区域，其中包含一堆乱七八糟的桌面或其他应用程序，我将 ISE 拖到上面，以及一些 ISE 框架片段。

我可以盲目地单击我认为应该有菜单的区域，并且偶尔会出现一些东西（另存为...对话框或类似的东西），但菜单本身永远不会被绘制。

这开始于我没有使用 ISE 期间的某个时间，所以我不知道有多少更新可能已被我的 IT 人员自动下载或推送到我的机器上，因为我不知道它是什么时候开始的发生了他们也不能告诉我任何事情。

关于为什么一般的 Windows 7 应用程序或特别是 ISE 可能会出现此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:27:33.610

Could be video card drivers. Try disabling windows areo to see if it's 3D driver related:

```
net stop uxsms 
```

Also try running ISE as administrator.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T08:20:22.950

在我的系统上，这是与 MaxiVista (www.maxivista.com) 的交互，它允许我将旧笔记本电脑用作第二台显示器。

启用第二个 (Maxivista) 监视器时，Powershell ISE 无法正确绘制。所以@BryanVine 是对的。这与视频驱动程序有关。

# amazon-ec2 - 无法 SSH 进入 AWS 权限被拒绝（公钥）

> ID：11748003
> 
> 赞同：0
> 
> 时间：2012-07-31T19:58:21.863
> 
> 标签：amazon-ec2, ssh

尝试部署我的第一个 Web 应用程序并且在通过 SSH 连接到 AWS 时遇到困难。当我输入：

```
ssh -v -i ec2-myportfolio.pem root@ec2-23-23-165-24.compute-1.amazonaws.com 
```

我得到权限被拒绝（公钥）。我查看了其他一些关于堆栈溢出的响应，例如 [this](https://stackoverflow.com/questions/1454629/aws-ssh-access-permission-denied-publickey-issue)和[this](https://stackoverflow.com/questions/4826706/amazon-ec2-permission-denied-publickey)，但都没有解决问题。以下是我得到的错误。在此先感谢您的帮助。

```
OpenSSH_5.6p1, OpenSSL 0.9.8r 8 Feb 2011
Warning: Identity file ec2-myportfolio.pem not accessible: No such file or directory.
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to ec2-23-23-165-24.compute-1.amazonaws.com [23.23.165.24] port 22.
debug1: Connection established.
debug1: identity file /Users/jonathanschen/.ssh/id_rsa type 1
debug1: identity file /Users/jonathanschen/.ssh/id_rsa-cert type -1
debug1: identity file /Users/jonathanschen/.ssh/id_dsa type -1
debug1: identity file /Users/jonathanschen/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9p1 Debian-5ubuntu1
debug1: match: OpenSSH_5.9p1 Debian-5ubuntu1 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'ec2-23-23-165-24.compute-1.amazonaws.com' is known and matches the RSA host key.
debug1: Found key in /Users/jonathanschen/.ssh/known_hosts:8
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/jonathanschen/.ssh/id_rsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: /Users/jonathanschen/.ssh/id_dsa
debug1: No more authentication methods to try.
Permission denied (publickey).
Jonathans-MacBook-Air-2:downloads jonathanschen$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:15:35.930

我认为您的问题出在这一行：

```
Warning: Identity file ec2-myportfolio.pem not accessible: No such file or directory. 
```

您是否在 ssh 命令中使用了正确的路径引用和文件名？

# dependency-injection - WELD-001408 注入 EntityManager 时不满足的依赖关系

> ID：11748006
> 
> 赞同：7
> 
> 时间：2012-07-31T19:58:33.533
> 
> 标签：dependency-injection, java-ee-6, cdi, entitymanager, stateless-session-bean

我有`@Stateless`实现两个接口（远程和本地）的bean。我还添加`@LocalBean`了使用无接口视图访问 bean 的注释。

```
@Stateless
@LocalBean
public class WeatherDataBean implements WeatherDataBeanRemote, WeatherDataBeanLocal {
    @Inject
    private EntityManager entityManager;

    public WeatherDataBean () {

    }
    // ....attributes, getter & setter methods ....
} 
```

`@Inject`出于这个原因，我使用这个[JBoss AS7 快速入门示例](http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/guide/GreeterQuickstart/#GreeterQuickstart-)：

> 我们使用来自 CDI 的“资源生产者”模式，将实体管理器的老式 @PersistenceContext 注入“别名”为 CDI 样式注入。这允许我们在整个应用程序中使用一致的注入样式 (@Inject)。

现在我以前使用过：

```
@PersistenceContext(unitName="WeatherStationJPA")
private EntityManager entityManager; 
```

在 EJB 中，它可以正常工作。但是使用`@Inject`注释我得到这个错误：

> WELD-001408 在注入点 [[field] @Inject private ejb.WeatherDataBean.entityManager] 具有限定符 [@Default] 的类型 [EntityManager] 的依赖关系不满足

这是我定义类资源的方式：

```
public class Resources {
     @SuppressWarnings("unused")
     @PersistenceContext(unitName="WeatherStationJPA")
     @Produces
     private EntityManager entityManager;

     @Produces
     FacesContext getFacesContext() {
         return FacesContext.getCurrentInstance();
     }
} 
```

如果我尝试注入实体管理器，为什么会出现此错误？

**编辑：** 应@LightGuard 的要求，我正在添加用于引用注释的包：

1.  **WeatherDataBean**具有：

    ```
    import javax.ejb.LocalBean;
    import javax.ejb.Stateless;
    import javax.inject.Inject; 
    ```

2.  **资源**有：

    ```
    import javax.enterprise.inject.Produces;
    import javax.faces.context.FacesContext;
    import javax.inject.Singleton;
    import javax.persistence.EntityManager;
    import javax.persistence.PersistenceContext; 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-11T19:33:22.337

我刚刚遇到了同样的问题，我通过将这个类添加到我的项目中来解决这个问题

```
import java.util.logging.Logger;

import javax.enterprise.context.RequestScoped;
import javax.enterprise.inject.Produces;
import javax.enterprise.inject.spi.InjectionPoint;
import javax.faces.context.FacesContext;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

/**
 * This class uses CDI to alias Java EE resources, such as the persistence context, to CDI beans
 * 
 * <p>
 * Example injection on a managed bean field:
 * </p>
 * 
 * <pre>
 * &#064;Inject
 * private EntityManager em;
 * </pre>
 */
public class Resources {
   // use @SuppressWarnings to tell IDE to ignore warnings about field not being referenced directly
   @SuppressWarnings("unused")
   @Produces
   @PersistenceContext
   private EntityManager em;

  // @Produces
  // public Logger produceLog(InjectionPoint injectionPoint) {
   //   return Logger.getLogger(injectionPoint.getMember().getDeclaringClass().getName());
  // }

   @Produces
   @RequestScoped
   public FacesContext produceFacesContext() {
      return FacesContext.getCurrentInstance();
   }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-20T13:24:05.693

我遇到了类似的错误，原来我没有将 beans.xml 文件放在 WEB-INF 文件夹中。beans.xml 文件可以是位于 WEB-INF 文件夹中的空文件。JBossAS 检查该文件以启动 CDI 服务。

# c# - 在窗体上处理 ActiveX 控件

> ID：11748007
> 
> 赞同：0
> 
> 时间：2012-07-31T19:58:42.180
> 
> 标签：c#, .net, vb.net, winforms

我有一个嵌入到表单中的第三方 ActiveX 控件。控件的类实现 IDisposable。我的问题是我应该在表单关闭事件中手动调用控件的 dispose 方法，还是进入设计器并编辑表单 dispose 方法以调用控件的 dispose。

我知道一个表单调用它拥有的所有控件的 dispose 方法，但是有任何例外，因为这是一个 COM 控件。谢谢。

PS：我正在使用 Visual Studio 2008，.Net 3.5，项目类型：Windows 窗体应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:19:04.493

[MSDN Marshal.ReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx) 为了释放或释放 COM 对象，您需要使用此代码

```
System.Runtime.InteropServices.Marshal.ReleaseComObject( someComObject); 
```

//这是您的 COM 对象 Dispose 将不适用于 COM 对象，例如如果您有一个名为 fs 的对象，请尝试使用类似这样的代码来处理您的对象

```
((IDisposable)fs).Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:20:48.950

不，你不需要做什么特别的事情。

因为[`Control`类](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)（其他容器控件，如[`Form`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)继承自）实现了[`IDisposable`接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，它应该（如果它遵循标准[`IDisposable`实现指南](http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx)）处理它持有的任何实现`IDisposable`接口的引用。

也就是说，您的控件（假设它位于由[`Controls`property](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)公开的控件集合中）将在包含它的窗口关闭时调用它的[`IDisposable.Dispose`方法](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)（因为关闭窗口会导致`Dispose`调用窗口的方法）。

# cakephp - 在 mvc 之外访问 CakePHP 控制器或请求对象

> ID：11748010
> 
> 赞同：1
> 
> 时间：2012-07-31T19:58:52.387
> 
> 标签：cakephp, cakephp-2.0

有什么方法可以在 CakePHP(2.*) 中访问 mvc 之外的当前控制器或请求对象？

基本上我需要访问为 CakePHP 设计的库中的请求对象，但应该尽可能地独立运行 - 换句话说，我想避免控制器本身中任何不必要的特定于 lib 的初始化代码，以保持.

我为此目的编写了一个组件，但并非所有对 lib 的调用都直接来自控制器。我还想避免将 $controller 或 $request 变量传递到 lib 内部以外的任何其他地方。

我从来没有过多地研究过 CakePHP 类的加载，但我记得在 CakePHP 1.3 是新版本时关于 ClassRegistry 的一些事情。在控制器操作中测试 ClassRegistry 后不久，我发现它是空的（*使用 ClassRegistry::keys() 和 pr()'ing 直接从类确定*）

那么，是否有任何友好的方式来获取请求对象，或者我应该求助于更丑陋的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T11:13:24.837

`Router::getRequest()`应该给你 CakeRequest 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:04:20.720

以下代码示例对您有帮助吗？

```
//in Socials Controller importing SocialUsers controller
function __checkSocialUser($title, $user_id){
    App::import('Controller', 'SocialUsers');
        $SocialUsers = new SocialUsersController;
        $SocialUsers->constructClasses();
        $ourUserId = $this->Auth->user('id');
        $SocialUsers->data = array('SocialUser' => array('title' => $title, 'identifier' => $user_id, 'user_id' => $ourUserId));
        $result = $SocialUsers->checkUser($title, $user_id);.... 
```

# c# - HTML 敏捷包链接更正

> ID：11748016
> 
> 赞同：1
> 
> 时间：2012-07-31T19:59:06.560
> 
> 标签：c#, syntax, html-agility-pack

我正在做一个小项目，我遇到了一个小问题，希望你能帮助我。

我得到了这些基本的几行代码，它们加载了给定的 url 并取出了一些标签：

```
var webGet2 = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc = webGet2.Load(pattern);
var htmlMatches = doc.DocumentNode.SelectNodes("//li[@class=''] | //li[@class='f']"); 
```

收到集合后，我需要运行一个 foreach 循环，该循环可以获取所有**href**和**src**链接并使它们有效，因为当我下载源时，链接看起来像**/folder/folder/image.jpg** 我想在每个链接之前添加**http://www.site.com 。**

我已经用 Regex 构建了这个项目并且没有问题，但是 HTML 敏捷性并没有让我的想法直截了当。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:47:55.707

因此，您想在某些节点中搜索包含相对 url 的某些属性并将它们更改为绝对 url？你可以这样做：

```
static void AdjustAttributes(HtmlNode root, string baseUrl, string attrName)
{
    var query =
        from node in root.Descendants()
        let attr = node.Attributes[attrName]
        where attr != null
        select attr;
    foreach (var attr in query)
    {
        var url = GetAbsoluteUrlString(baseUrl, attr.Value);
        attr.Value = url;
    }
}

static string GetAbsoluteUrlString(string baseUrl, string url)
{
    var uri = new Uri(url, UriKind.RelativeOrAbsolute);
    if (!uri.IsAbsoluteUri)
        uri = new Uri(new Uri(baseUrl), uri);
    return uri.ToString();
} 
```

```
var web = new HtmlWeb();
var doc = web.Load(pattern);
var selectedNodes = doc.DocumentNode.SelectNodes("//li[@class=''] | //li[@class='f']");
foreach (var node in selectedNodes)
{
    AdjustAttributes(node, url, "href");
    AdjustAttributes(node, url, "src");
} 
```

# wpf - 用于高清视频的 MediaUriElement（来自 WPFMediaKit）中的粉色线条/失真

> ID：11748019
> 
> 赞同：1
> 
> 时间：2012-07-31T19:59:09.303
> 
> 标签：wpf, media-player, mediaelement, distortion, wpf-mediakit

我在 WPF 中有一个媒体播放器，以前使用该`MediaElement`控件显示视频。但在 XP 上它没有显示一些高清视频。按照[这个](https://stackoverflow.com/questions/490791/issue-using-wpf-mediaelement-with-hd-h-264-720p-video)线程的建议，我开始使用 WPFMediaKit 库`MediaUriElement`。现在我可以播放高清视频，但它们的顶部有粉色线条/失真：

![在此处输入图像描述](../Images/2b25e2586fc9d4783f0d67bd90f95c74.png)

那是屏幕的顶部 1/5。失真会在顶部闪烁一秒钟，然后消失。这每隔几秒钟就会发生一次。视频的其余部分播放正常。
如果我在 Windows Media Player 中打开视频，它可以正常播放。

有人知道是什么原因造成的吗？

# cocos2d-iphone - - (BOOL)ccTouchBegan 在模拟器上响应但在设备上不响应

> ID：11748021
> 
> 赞同：0
> 
> 时间：2012-07-31T19:59:24.960
> 
> 标签：cocos2d-iphone

我正在为游戏制作暂停屏幕菜单。显示暂停屏幕后，我让用户触摸屏幕以隐藏暂停屏幕并恢复游戏。这在模拟器上完美运行，但在我在实际设备上测试时不起作用。设备似乎没有响应专门针对暂停菜单的触摸。游戏的所有其他部分在模拟器和设备上都可以正常工作。它在模拟器上的工作方式很奇怪，但在设备上却不行。这是我用于暂停屏幕的代码：

```
- (id)init {
if ((self = [super init])) {

    CGSize windowSize = [[CCDirector sharedDirector] winSize];
    //windowSize.height = 768.0;
    //windowSize.width = 1024.0;

    CCSprite *whiteScreen = [CCSprite spriteWithFile:@"OutOfTime.png"];
    whiteScreen.position = ccp(windowSize.width / 2, windowSize.height / 2);
    [self addChild:whiteScreen];

    CCLabelTTF *touchToDismiss = [CCLabelTTF labelWithString:@"Touch screen to continue"     fontName:@"Marker Felt" fontSize:30];
    touchToDismiss.color = ccBLACK;

    touchToDismiss.position = ccp(windowSize.width / 2, 20);
    [self addChild:touchToDismiss];
    }

    return self;
}

- (void)onEnter {
    [super onEnter];
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:NO];
}

- (void)gameOverWithScore:(NSInteger)score {
    CGSize windowSize = [[CCDirector sharedDirector] winSize];
    //windowSize.height = 768.0;
    //windowSize.width = 1024.0;

    CCLabelTTF *touchToDismiss = [CCLabelTTF labelWithString:@"Game Over" fontName:@"Marker Felt" fontSize:75];
    touchToDismiss.color = ccBLACK;
    touchToDismiss.position = ccp(windowSize.width / 2, windowSize.height / 2 + 40);
    [self addChild:touchToDismiss];

    NSString *scoreString = [NSString stringWithFormat:@"Final Score: %d", score];
    CCLabelTTF *scoreLabel = [CCLabelTTF labelWithString:scoreString fontName:@"Marker Felt" fontSize:60];
    scoreLabel.color = ccBLACK;
    scoreLabel.position = ccp(windowSize.width / 2, (windowSize.height / 2) - 40);
    [self addChild:scoreLabel];
}

- (void)setMessage:(NSString *)message {

}

- (void)dealloc {
    [super dealloc];
}

- (BOOL)ccTouchBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"haha");
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:11:08.583

您可能应该在您的 init 中添加以下行

```
self.isTouchEnabled = YES; 
```

您必须为您拥有的每个具有触摸事件的 CCLayer 执行此操作。

编辑：刚刚注意到你的 ccTouchBegan 只打印一个日志。这个日志很容易在 XCode 的调试窗口中查看，但在设备中它对用户是隐藏的。尝试做其他事情。

# c - C 单行中的多个操作

> ID：11748023
> 
> 赞同：2
> 
> 时间：2012-07-31T19:59:46.667
> 
> 标签：c, reference, integer

我想在一行中做到这一点（C编程语言）：

```
int x = index >> 8;
int y = x < 10 ? x+1 : x+2; 
```

是否可以？我如何引用之前的价值？签名，如果我没有将它存储在单独的整数中？

```
"int y = (index >> 8) < 10 ? [what]+1 : [what]+2;" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:01:44.220

您只需要重复表达式：

```
int y = (index >> 8) < 10 ? (index >> 8) + 1 : (index >> 8) + 2; 
```

它不是很好，也不可读，所以我不明白为什么你必须这样做。语言中没有内置方式来引用`?`. 由于表达式在 C 中可能有副作用，如果有的话会很麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:03:52.430

你有这个表达式的方式是最好的，你可以在没有代码重复的情况下到达那里。如果您绝对需要它是单个字符串，您可以简单地执行以下操作：

```
int y = (index >> 8) < 10 ? (index >> 8)+1 : (index >> 8)+2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:07:49.157

因为 C 不区分空白字符，所以可以将其放在一行中：

```
int x = index >> 8; int y = x < 10 ? x+1 : x+2; 
```

...这是完全有效的 C.

但是，您的`y`和`x`值不是相互依赖的，因此您可以将表达式简化为`y`：

```
 int y = index >> 8; y = y < 10 ? y+1 : y+2; 
```

如果您`y`已经存在，则可以使用很少使用的逗号运算符来消除分号并将其简化为单个语句：

```
y = ( y = index >> 8 ), y < 10 ? y+1 : y+2; 
```

请注意，您不能在值声明语句中使用逗号运算符，因为在该上下文中它成为序列分隔符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T23:38:25.713

尝试以这种方式优化源代码通常没有用处。C 没有规定计算机必须执行哪些具体操作；C 指定程序必须达到的结果。（通过 C 中的“好像”模型。编译器生成的程序必须产生结果，就好像您逐步执行了您编写的特定操作，但这些结果实际上可以通过实现选择的任何指令序列获得。程序只需要重现结果，而不是机制。）

通常，您应该编写清晰的代码，并且应该允许编译器中的优化器高效地执行计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T20:19:14.733

或者，通过删除三元。移位相当于除以 256，我们也可以比较移位前的值。

```
int y = (index >> 8) + 1 + (index >= 2560); 
```

当然， index 应该是积极的，这样才能正常工作。

编辑：该表达式还具有没有临时写访问权限和没有序列点的优点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T20:22:34.480

可以使用这种形式：

```
int y = (y = index >> 8) < 10 ? y+1 : y+2; 
```

在这里，y 被分配了 index >> 8 的临时值，因此您可以在 ? 之后重用该值。操作员。

与大卫的类似回答相反，这种形式也可以在价值声明语句中使用。

# linux-kernel - 在哪个标头中声明了 copy_from_user()？

> ID：11748025
> 
> 赞同：9
> 
> 时间：2012-07-31T19:59:47.760
> 
> 标签：linux-kernel, header-files

谁能帮我获取该`copy_from_user`方法所需的正确头文件？

我找到了一些我需要的包含头文件，但我的编译器一直说找不到它们。我在我的机器上运行 CentOS。我尝试`yum`安装各种内核头文件和开发包，但仍然没有运气。

我需要在`gcc`命令中添加特殊段吗？我在互联网上找到的所有内容都只告诉我如何使用该方法，但实际上并没有告诉我如何首先访问它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-31T20:17:20.470

我假设您正在开发一个内核模块，因为在它之外尝试使用`copy_from_user`是没有意义的。无论哪种方式，在内核中使用：

```
#include <linux/uaccess.h> 
```

**编辑**：如果你想要*构建*一个内核模块，你可能想看看这个[Hello World Linux Kernel Module](https://web.archive.org/web/20120911090932/http://www.prabusurendra.com/tutors/lt2/lt2.html)。具体来说，您可能对 makefile 部分感兴趣（搜索`obj-m`）。

# iphone - 动态表格视图中的静态表格单元格？

> ID：11748026
> 
> 赞同：0
> 
> 时间：2012-07-31T19:59:50.983
> 
> 标签：iphone, objective-c, ios, uitableview

我正在使用 Core Data 来保存我的动态 UITableView（不是控制器，AFAIK 你不能在 UITableView 中有静态表视图）。我想知道是否可以在我的表格视图中添加一个单独的部分，其中只有一个静态单元格？我试着寻找，但到目前为止我找不到任何东西！我只需要一个正确的方向。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:02:21.317

正如 Scott 所说，您必须使用动态表视图。

但是，您的表**中可以**有多个`UITableViewCell`'s（具有不同的重用标识符），因此只需创建两个不同的单元格并根据中提供的 indexPath 返回适当的一个`cellForRowAtIndexPath:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:09:53.543

不幸的是，表格要么是完全静态的，要么是完全动态的。如果您的表格视图的一部分需要是动态的，则您必须使整个表格视图动态化并为静态单元格实现委托方法。

# google-chrome-extension - chrome扩展中的angularjs模板

> ID：11748028
> 
> 赞同：5
> 
> 时间：2012-07-31T19:59:58.513
> 
> 标签：google-chrome-extension, angularjs

在基于内容脚本的 chrome 扩展中使用 angularjs 模板时，我遇到了一个奇怪的问题。我进入一个无限循环。当我使用内联模板（使用带有字符串的模板属性）时，它工作正常。谁能建议我做错了什么？

清单.json

```
{
  "name": "Content Script Cross-Domain XMLHttpRequest Example",
  "version": "2.0.0",
  "manifest_version": 2,
  "description": "Demonstrates making cross domain requests from a content script by putting Twitter trends on Google News.",
  "permissions": [
    "http://localhost:9393/*"
  ],
  "icons": {
    "48" : "sample-48.png",
    "128" : "sample-128.png"
  },
  "content_scripts": [
    {
      "matches": ["http://news.google.com/*","*://mail.google.com/*"], 
      "js" : ["lib/jquery-1.6.4.min.js","lib/angular-1.0.1.min.js", "app.js","contentscript.js"]
    }
  ]
} 
```

应用程序.js

```
angular.module('myApp', []).
  config(['$routeProvider', function($routeProvider) {
  console.log('inside angular.module');
  $routeProvider.
      when('/', {templateUrl: 'contact.html',   controller: AppController}).
      otherwise({redirectTo: '/'});
}]);

function AppController($scope){
  console.log('inside AppController');
} 
```

在 contentscript.js 里面

```
$(this).append('<div id="gmeAppContainer">'
                                 + '<div ng-view></div>'
                              + '</div>');
var rootEle = $(this).find('#gmeAppContainer');
angular.bootstrap(rootEle,['myApp']); 
```

当我在 app.js 中使用内联模板时，它工作正常。

```
when('/', {template: '<div>This is inline template </div>',   controller: AppController}). 
```

还发布在 angularjs 谷歌组 [https://groups.google.com/d/topic/angular/A_SVYZWPKe8/discussion](https://groups.google.com/d/topic/angular/A_SVYZWPKe8/discussion)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T06:10:17.740

看来我想通了。

首先在 manifest.json 文件中声明模板文件。

```
 "web_accessible_resources" :[
      "contact.html"
  ] 
```

然后使用 chrome.extension.getURL 方法获取模板文件的绝对 url

```
 when('/', { controller: AppController, templateUrl : chrome.extension.getURL('contact.html')}). 
```

# perl - 调用 errstr 时，这个 DBI:db 对象发生了什么？

> ID：11748029
> 
> 赞同：0
> 
> 时间：2012-07-31T20:00:03.230
> 
> 标签：perl, reference, moose

我将当前类中的一个名为 'dbc' 的属性委托为 DBIx::Connector，以便我可以从内部方法调用 $self->dbc->dbh，但是我并没有真正理解我看到的一些行为在 DBI::db 实例上调用 'errstr' 方法时：

这个：

```
eval {
    $dbh->do($sql);
};

$self->log->warn("Warning SQL error: $dbh->errstr") if ($@); 
```

返回`WARN - Warning SQL error: DBI::db=HASH(0xaf43130)->errstr`

但是，这可行，并返回正确的错误字符串：

```
eval {
        $dbh->do($sql);
    };

    if($@){
        my $errstr = $dbh->errstr;
        $self->log->warn("Warning SQL error: $errstr");
    } 
```

这里发生了什么事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:07:11.693

Perl 不会在双引号字符串中插入方法调用。 `$dbh->errstr`正在调用一个方法。尝试：

```
$self->log->warn("Warning SQL error: " . $dbh->errstr) if $@; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:07:24.340

您正在尝试在字符串中插入函数调用。

尝试将警告字符串与函数调用连接起来。

```
$self->log->warn("Warning SQL error: ".$dbh->errstr) if ($@); 
```

这部分错误：DBI::db=HASH(0xaf43130)

是 db 句柄的地址。

# ios - 用transitionWithView同时显示和隐藏

> ID：11748031
> 
> 赞同：3
> 
> 时间：2012-07-31T20:00:14.010
> 
> 标签：ios, core-animation, uiviewanimationtransition

我尝试了以下几种变体均无济于事。我想要的是显示一些东西的向下卷曲过渡，然后是相反的卷曲过渡。有透明度，所以效果是一个清晰的东西滚下一个视图。这是在上卷和下卷时调用的函数：

```
-(void) setVisibility:(BOOL)isVisible animated:(BOOL)animated{    
    if (isVisible){
        self.topFold.hidden = YES;
    }
    [UIView transitionWithView:self 
                      duration:1.0f 
                       options:isVisible ? UIViewAnimationOptionTransitionCurlDown : UIViewAnimationOptionTransitionCurlUp
                    animations:^{
                        self.imageView.hidden = !isVisible;
                        self.background.hidden = !isVisible;
                        self.bottomCornerFold.hidden = !isVisible;
                    }
                    completion:^(BOOL finished){
                        if (!isVisible){
                            self.topFold.hidden = NO;
                        }
                    }
    ];
} 
```

我已经尝试了十亿种不同的场景，但这个是最接近的。但问题是，当它与`isVisible`=一起运行时`YES`，`topFold`在转换完成之前一直可见。也就是说，新的东西在它上面滚下来，好像有一个新东西在上面的视图的副本。然后一旦完成，它将用正确的版本替换整个内容。
为了澄清，我试图`topFold`在任何动画开始之前隐藏，但由于某种原因，它坚持在动画完成之前一直徘徊。会喜欢这里的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:56:37.440

从笨拙但有效的部门，我嵌套了两个动画，一个在另一个的完成块中。看起来像这样并且有效：

```
 [UIView transitionWithView:self 
                          duration:0.0f 
                           options:nil
                        animations:^{
                            if (isVisible){
                                self.topFold.hidden = YES;
                            }
                        }
                        completion:^(BOOL finished){
                            [UIView transitionWithView:self 
                                              duration:1.0f 
                                               options:isVisible ? UIViewAnimationOptionTransitionCurlDown : UIViewAnimationOptionTransitionCurlUp
                                            animations:^{
                                                self.imageView.hidden = !isVisible;
                                                self.background.hidden = !isVisible;
                                                self.bottomCornerFold.hidden = !isVisible;
                                            }
                                            completion:^(BOOL finished){
                                                if (!isVisible){
                                                    self.topFold.hidden = NO;
                                                }
                                            }
                             ];
                        }
         ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:29:32.823

另一种方法是通过在短时间内启动 runloop 来给 topFold 视图隐藏时间。

```
if (isVisible){
    self.topFold.hidden = YES;
    [[NSRunLoop currentRunLoop] runUntilDate: [NSDate dateWithTimeIntervalSinceNow: 0.0001]];
} 
```

# c - binutils/bfd.h 现在想要 config.h 吗？

> ID：11748035
> 
> 赞同：15
> 
> 时间：2012-07-31T20:00:36.627
> 
> 标签：c, linux, gcc, binutils

我正在尝试使用 BFD 库，因此我已经安装了软件包`binutils-dev`并包括：

```
#include <bfd.h> 
```

并且正在从我的代码中调用`bfd_openr`等等。`bfd_close`

最近我升级了软件包，现在我从这里收到一个错误：

bfd.h：

```
/* PR 14072: Ensure that config.h is included first.  */
#if !defined PACKAGE && !defined PACKAGE_VERSION
#error config.h must be included before this header
#endif 
```

...我应该包括`config.h`- 但我没有使用 autoconf。

我是否包含错误的头文件？你应该如何使用 binutils-dev？

这是一个演示程序：

```
#include <stdio.h>
#include <bfd.h>

int main()
{
    bfd_init();

    bfd* file = bfd_openr("a.out", 0);

    if (!file)
        return -1;

    if (bfd_check_format(file, bfd_object))
        printf("object file\n");
    else
        printf("not object file\n");

    bfd_close(file);

    return 0;
} 
```

尝试编译运行如下：

```
$ sudo apt-get install binutils-dev
$ gcc test.c
In file included from test.c:3:0:
/usr/include/bfd.h:37:2: error: #error config.h must be included before this header 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T20:59:41.087

好吧，使用标头的最正确方法是在您的包中也使用 autotools。有些人只是很固执，我认为您对此无能为力。

另一种方法是通过定义它正在使用的宏来解决检查：

```
#define PACKAGE 1
#define PACKAGE_VERSION 1 
```

当然，如果您已经定义了这些，您也可以将它们设置为一些合理的值，例如：

```
#define PACKAGE "your-program-name"
#define PACKAGE_VERSION "1.2.3" 
```

并将它们用于您的程序。无论如何，您通常会在某些时候使用类似的东西来保持版本一致。

如果您使用的是符合标准的编译器，这应该足够了，因为随后`__STDC__`将声明宏并且一切都会正常进行。好吧，只要您使用的标头不需要更多自动配置生成的定义。

例如，如果您想使用`plugin-api.h`，您实际上必须处理检查`stdint.h`和`inttypes.h`...

# zend-framework - 具有自定义元素的独立 Zend Form

> ID：11748037
> 
> 赞同：0
> 
> 时间：2012-07-31T20:00:52.500
> 
> 标签：zend-framework, zend-form

我正在尝试使用自定义表单元素制作一个独立的 Zend Form。我需要使用自定义视图助手来创建这个元素。如何在没有 application.ini 文件的情况下注册自定义视图帮助程序路径？

```
set_include_path(
implode(PATH_SEPARATOR, array(
    get_include_path(),
    PATH_TO_ZF_LIBRARY
)));

require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_Loader_Autoloader::getInstance();

$autoloader->registerNamespace( 'My' ); 

$form = new Zend_Form;

... create and add zend form elements here

//display form
echo $form->render(new Zend_View()); 
```

另外，自定义 Zend_Form_Element 是否知道在新路径中寻找自定义助手？根据文档，我所要做的就是使用视图助手的类名创建 public $helper var。但我不知道这是否适用于自定义视图助手。

```
class My_Form_Element_Ssn extends Zend_Form_Element_Xhtml 
{
    public $helper = 'ssnElement';

    public function setValue()
    {

    }

    public function getValue()
    {
        return '12345';
    }
}

class My_View_Helper_SsnElement
extends Zend_View_Helper_FormElement
{

    public function ssnElement( $name, $value = null, $attribs = null )
    {
        return 'SSN';
    }
} 
```

我预先感谢您的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:52:41.323

尝试：

```
$view = new Zend_View();
$view->addHelperPath('/path/to/My/View/Helper', 'My_View_Helper');

echo $form->render($view); 
```

# r - 使用 R 在几列中折叠具有不同值的重复行

> ID：11748040
> 
> 赞同：0
> 
> 时间：2012-07-31T20:01:08.463
> 
> 标签：r

在我的数据框中，有一些行具有相同的 ID，但测试年份和年龄的值不同。我想折叠重复的行并为不同的值创建新列。

我是 R 的新手，并且已经为此苦苦挣扎了一段时间。

这是数据框：

```
>df
    id 项目 testyr1 testyr2 age1 age2
1 16S AS 2008 不适用 29 不适用
2 32S AS 2004 不适用 30 不适用
3 37S 不适用 2011 不适用 36
4 50S AS 2004 不适用 23 不适用
5 50S AS 1998 不适用 16 不适用
6 55S AS 2007 不适用 28 不适用

```

`testyr1`应该有最早的年份和`testyr2`最晚的年份。`age1`应该是小年和`age2`大年。

输出应该是：

```
      id 项目 testyr1 testyr2 age1 age2   
1 16S AS 2008 不适用 29 不适用  
2 32S AS 2004 不适用 30 不适用  
3 37S 不适用 2011 不适用 36  
4 50S AS 1998 2004 16 23  
6 55S AS 2007 不适用 28 不适用  

```

我试图写一个循环，但不知道如何结束它：

```
df.undup <- c()
df.undup <- c()    
for (i in 1:nrow(df)){   
  if i == i+1    
    df$testyr1 != NA {   

    testyr2 = max(testyr1)   
    testyr1 = min(testyr1)   
    nage2 = max(nage1)   
    nage1 = min(nage1)   
  }   
 else{   
    testyr2 = max(testyr2)   
    testyr1 = min(testyr2)   
    nage2 = max(nage2)   
    nage1 = min(nage2)   
  }   
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:41:27.177

```
library(plyr)

data <- read.csv(textConnection("id,project,testyr1,testyr2,age1,age2
16S,AS,2008,NA,29,NA
32S,AS,2004,NA,30,NA
37S,AS,NA,2011,NA,36
50S,AS,2004,NA,23,NA
50S,AS,1998,NA,16,NA
55S,AS,2007,NA,28,NA"))

new_data <- ddply(data, .(id), function(x) {
  return(data.frame(id = unique(x$id), project = unique(x$project), 
    testyr1 = min(x$testyr1), 
    testyr2 = max(x$testyr2), age1= min(x$age1), age2 = max(x$age2)))
    })

> new_data

    id project testyr1 testyr2 age1 age2
1 16S      AS    2008      NA   29   NA
2 32S      AS    2004      NA   30   NA
3 37S      AS      NA    2011   NA   36
4 50S      AS    2004      NA   23   NA
5 50S      AS    1998      NA   16   NA
6 55S      AS    2007      NA   28   NA

# But your result example suggests you want the lowest 
# of testyr to be in testyr1 and the highest of the combined
# testyrs to be in testyr2\. Same logic for ages.
# If so, the one below should work:

new_data <- ddply(data, .(id), function(x) {
    if(dim(x)[1]>1) {
    years <- c(x$testyr1, x$testyr2)
    ages <-  c(x$age1, x$age2)
    return(data.frame(id = unique(x$id), project = unique(x$project), 
        testyr1 = min(years, na.rm=T), testyr2 = max(years , na.rm=T), 
        age1= min(ages, na.rm=T), age2 = max(ages, na.rm=T)))   
    } else {
    return(data.frame(id = unique(x$id), project = unique(x$project), 
        testyr1 = x$testyr1, testyr2 = x$testyr2, 
        age1= x$age1, age2 = x$age2)) 
    }       
    })

> new_data
   id project testyr1 testyr2 age1 age2
1 16S      AS    2008      NA   29   NA
2 32S      AS    2004      NA   30   NA
3 37S      AS      NA    2011   NA   36
4 50S      AS    1998    2004   16   23
5 55S      AS    2007      NA   28   NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:46:08.327

我*真的*怀疑这是最有效的方法，但我的大脑目前无法正常工作。

```
temp = names(which(table(df$id) > 1))
temp1 = vector("list")
for (i in 1:length(temp)) {
  temp1[[i]] = df[df$id == temp[i], ]
  temp1[[i]] = data.frame(temp1[[i]][1, 1:2], 
                     testyr1 = min(temp1[[i]]$testyr1), 
                     testyr2 = max(temp1[[i]]$testyr1), 
                     age1 = min(temp1[[i]]$age1), 
                     age2 = max(temp1[[i]]$age1))
}

rbind(df[-c(which(df$id %in% temp)), ], do.call(rbind, temp1))
#    id project testyr1 testyr2 age1 age2
# 1 16S      AS    2008      NA   29   NA
# 2 32S      AS    2004      NA   30   NA
# 3 37S      AS      NA    2011   NA   36
# 6 55S      AS    2007      NA   28   NA
# 4 50S      AS    1998    2004   16   23

### rm(i, temp, temp1) ### Cleanup the workspace 
```

# sql-server - SQL Server 存储过程更新不同服务器上的两个数据库

> ID：11748042
> 
> 赞同：1
> 
> 时间：2012-07-31T20:01:12.980
> 
> 标签：sql-server, stored-procedures, replication

两台服务器具有完全相同的设置（数据库/表等）。我希望其中一张表（在两台服务器上）具有相同的数据。所以服务器 A 上的更新过程也应该能够更新服务器 B。

我希望每次调用该更新存储过程时都会发生这种情况，没有任何时间延迟。有什么想法吗？

我确实看过其他问题，但多台服务器的这一方面似乎没有答案。有什么想法吗？

编辑以澄清：服务器 B 始终应遵循服务器 A。（此外，可以编辑更新 A 的存储过程以更新 B ...如果 Dbs 在同一台服务器上...这是另一种情况。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:06:00.273

查看[SQL Server 高可用性解决方案](http://msdn.microsoft.com/en-us/library/ms190202)。**日志传送**、**故障转移集群**或**数据库镜像**可能适合您的特定需求。这取决于您是需要故障转移进行备份还是需要在线数据库进行报告。

> *旁注：* **数据库镜像**将[在未来的 SQL Server 版本中被弃用，](http://msdn.microsoft.com/en-us/library/ms190202)应避免使用。它正在被SQL Server 2012 中的[**AlwaysOn 可用性组所取代。**](http://msdn.microsoft.com/en-us/library/hh510230)

# c# - C# 从 Skype 用户获取主机信息

> ID：11748050
> 
> 赞同：3
> 
> 时间：2012-07-31T20:02:28.517
> 
> 标签：c#, .net, ip, host, skype

我正在开发一个服务器基础设施，它根据我的客户的 IP 地址调整它的连接设置，我的员工通过 Skype 与之交谈。

为了提高时间效率，我觉得使用类似于那些 Skype IP 地址解析器的东西会更容易，以便跳过向每个客户解释“如何获取他们的 IP 地址”的过程。

如果您需要知道，我使用 C# 语言工作。

# java - Java 在 Ubuntu 上用 openjdk 编译，然后在 windows 上用 sun java 运行给出错误

> ID：11748054
> 
> 赞同：0
> 
> 时间：2012-07-31T20:02:50.130
> 
> 标签：java, netbeans, cross-compiling, openjdk, ubuntu-12.04

我一直在使用 OpenJdk 在 Netbeans/Ubuntu 12.04 中开发 Java 程序。我已经让这个程序在 Linux 中使用 .jar 成功运行，但是当我将 .jar 复制到我的 Windows 7 虚拟机时，我收到以下错误；
“找不到主类：testprogram.Main。程序将退出。”

此外，该程序不使用外部库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:07:59.717

你是如何开始你的计划的？你用了`java -jar yourjarfile.jar`吗？

也许您的清单文件没有定义应用入口点。[你可以在这里](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)学习这个主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:06:43.843

我对这个问题的修复是使用 JDK 6 而不是 JDK 7，仍然不确定为什么会产生这个错误，但是这个改变已经解决了这个问题。

# c# - SignalR - 从 Global.asax 更新客户端

> ID：11748057
> 
> 赞同：2
> 
> 时间：2012-07-31T20:03:03.797
> 
> 标签：c#, asp.net, signalr

假设我定义了一个 ChatHub 类和一个 Broadcast 方法。

如果其中一个发送消息，我知道如何向所有客户端广播消息，但是如何从 Global.asax 向所有客户端发送消息？

换句话说，我如何从另一个班级访问 ChatHub？

这是一个基本示例：

```
 public class ChatHub : Hub
    {
      public void Broadcast(String reqMessage)
      {
        Clients.broadcast(reqMessage);
      }
    } 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:46:18.783

从 SignalR 0.5 开始，您可以使用`GlobalHost.ConnectionManager.GetHubContext`

### 样本

```
// get gub context
IHubContext context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();
// broadcast to all clients in this hub
context.Clients.broadcast("Hello World"); 
```

### 更多信息

*   [SignalR - 集线器](https://github.com/SignalR/SignalR/wiki/Hubs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:43:59.787

使用`ConnectionManager`，如此处所述：[https](https://github.com/SignalR/SignalR/wiki/Hubs) ://github.com/SignalR/SignalR/wiki/Hubs 。顺便说一句，您的问题很可能与[此](https://stackoverflow.com/questions/7634255/calling-signalr-hub-clients-from-elsewhere-in-system?rq=1)问题重复。

# android - 访问搜索小部件

> ID：11748058
> 
> 赞同：1
> 
> 时间：2012-07-31T20:03:08.603
> 
> 标签：android, android-layout, android-widget

目前我尝试访问搜索小部件。

我不知道如何实现关键侦听器。我如何实现该方法？

有没有人可以给我提示或教程？

这是我的代码。

**菜单.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/settings_option_item"
    android:icon="@android:drawable/ic_menu_preferences"
    android:title="Einstellungen"
    android:showAsAction="never">    </item>
<item
    android:id="@+id/aktualiesieren"
    android:icon="@android:drawable/ic_menu_rotate"
    android:title="Aktualiesieren"
    android:showAsAction="always"        >

</item>
<item
    android:id="@+id/suche"
    android:icon="@android:drawable/ic_menu_edit"
    android:title="Suche"
    android:showAsAction="ifRoom">
</item>

<item android:id="@+id/action_search"
     android:title="Search"
     android:icon="@android:drawable/ic_menu_search"
     android:showAsAction="always"
     android:actionViewClass="android.widget.SearchView" /> 
```

**设置.java**

```
package com.de.xx.einstellungen;

import com.de.xx.R;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Einstellungen extends PreferenceActivity {

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.einstellungen);
    }

} 
```

**main.java**

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    MenuItem searchItem = menu.findItem(R.id.action_search);
    mSearchView = (SearchView) searchItem.getActionView();
    return super.onCreateOptionsMenu(menu);
} 
```

谢谢你

# javascript - 骨干 js 代码异味 - 嵌入子视图的更好方法？

> ID：11748062
> 
> 赞同：0
> 
> 时间：2012-07-31T20:03:20.907
> 
> 标签：javascript, backbone.js, backbone-relational

我正在使用骨干关系模型构建一个骨干应用程序（但这对于这个问题应该无关紧要）。

基本上，我有一个编辑按钮，它将显示一个隐藏的 div。在隐藏的 div id 内有一个子视图（称为`DetailsView`），它呈现表格元素以填充用户列表。我的模型（对于整个应用程序）大致如下所示：

```
{ 'id': 'foo',
  'users': 
   {
   'username': 'bobby',
   'password': 'peanuts'
   },
   {
   'username': 'sally',
   'password': 'watermellon'
   }
} 
```

在我的主视图中（由上述模型的集合提供），当用户单击编辑按钮时，会触发：

```
edit: function(){
      var userModels = this.model.get('users'),
          detailViewContainer = this.$('tbody.users');
      console.log(name + ' has ' + userModels.length + ' models');
      //clear out eveything in tbody.users to prevent dupes
      detailViewContainer.html('');
      //check if there are actually user models
      if(userModels.length > 0){
        userModels.forEach(function(user) {
         var details = new DetailsView({model: user});
         details.render();
         detailViewContainer.append(details.el);
         });
} 
```

代码异味来自我必须`detailViewContainer`明确声明这一事实。

最初，在我的 forEach 循环中，会调用视图中的另一个函数，其中包含声明和渲染`DetailsView`. 但是，我会失去`this`.

我的原始代码看起来像这样：

```
 edit: function() {
      var userModels = this.model.get('users'),
          detailViewContainer = this.$('tbody.users');
      console.log(name + ' has ' + userModels.length + ' models');
      //clear out eveything in tbody.users to prevent dupes
      detailViewContainer.html('');
      //check if there are actually user models
      if(userModels.length > 0){
        userModels.forEach(function(user) {
         this.renderDetailsView;
         });
      }
    },

    renderDetailsView: function(user) {
       var details = new DetailsView({model: user});
       this.$('tbody.users').append(details.render());
     }, 
```

在 中`renderDetailsView`，我会丢失上下文`this`并且无法将 附加`DetailsView`到正确的 DOM 元素（视图将附加到所有`tbody.users`DOM 元素，因为`this`上下文变成了窗口，因为它处于循环中）。

必须明确声明 a`detailsViewContainer`对我来说似乎很麻烦，我希望能够保持`this`上下文指向主视图，而不是整个窗口。

模板只是一`DetailsView`组`<tr><td></td></tr>`元素。有没有更好的方法来嵌入这个视图而不必求助于创建`detailViewContainer`？

（一个可能的选择是`DetailView`循环遍历从`this.model.get('users')`所有返回的集合......这是个好主意吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:13:32.857

如果您因为丢失“this”而正在做您正在做的事情，您可以将您的上下文传递给 forEach。

```
userModels.forEach(function(user) {
     this.renderDetailsView();
},this); 
```

现在您可以使用适当的“这个”了。希望这可以帮助。

# ios - IOS Enterprise 无线更新

> ID：11748065
> 
> 赞同：1
> 
> 时间：2012-07-31T20:03:25.053
> 
> 标签：ios, afnetworking

希望这是一个简单的问题，但我找不到任何具体的答案。我们已经完成了更新企业应用 OTA 的所有步骤。我的问题是，我可以使用 AFNetworking 拨打电话吗？或者什么是调用链接的最佳方式。（目前 afnetworking 给了我错误，但它可能是我们这边的问题。）我只使用 afnetworking，所以除非必须，否则宁愿不改变。提前致谢

> itms-services://?action=download-manifest&url=http://ourServer/Setup/manifest.plist

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:kiPADSetupLink]];
[request setTimeoutInterval:300];

NSLog(@"begin downloading app update");

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
 {
     // handle success

 } failure:^(AFHTTPRequestOperation *operation, NSError *error)
 {
     // handle error

 } ];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:11:15.820

不，您需要系统打开该 URL，您不能自己访问它。使用`UIApplication`'s`openURL:`方法。

# android - Android Google Maps 连接（不显示地图）

> ID：11748066
> 
> 赞同：2
> 
> 时间：2012-07-31T20:03:26.477
> 
> 标签：android, google-maps

当我尝试打开我的应用程序时，我得到一个“空”地图，这意味着我看不到地图，我可以看到放大和缩小按钮，但没有地图。请帮忙，这是我的代码：

```
package com.example.hichride;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends MapActivity {

    MapController mControl;
    GeoPoint GeoP;
    MapView mapV;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mapV = (MapView) findViewById(R.id.mapView);
        mapV.displayZoomControls(true);
        mapV.setBuiltInZoomControls(true);

        double lat = 40.8;
        double longi = -96.666;

        GeoP= new GeoPoint ((int) (lat * 1E6), (int)(longi * 1E6));

        mControl= mapV.getController();
        mControl.animateTo(GeoP);
        mControl.setZoom(13);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

这是`logCat`日志，您可以看到有一个我不知道如何解决的连接问题：

```
07-31 19:55:37.878: W/MapActivity(746): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@411fa278
07-31 19:55:37.918: V/MapActivity(746): Recycling map object.
07-31 19:55:38.178: I/MapActivity(746): Handling network change notification:CONNECTED
07-31 19:55:38.188: E/MapActivity(746): Couldn't get connection factory client
07-31 19:56:26.201: W/System.err(746): IOException processing: 26
07-31 19:56:26.201: W/System.err(746): java.io.IOException: Server returned: 3
07-31 19:56:26.208: W/System.err(746):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
07-31 19:56:26.208: W/System.err(746):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
07-31 19:56:26.208: W/System.err(746):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
07-31 19:56:26.208: W/System.err(746):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
07-31 19:56:26.208: W/System.err(746):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
07-31 19:56:26.208: W/System.err(746):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:06:26.810

你是在模拟器还是手机上运行？您是否在布局文件中使用了正确的 API 密钥？当您从 Eclipse 运行时需要一个密钥，因为它使用调试密钥对应用程序进行签名，当您部署为使用您的密钥对应用程序进行签名的 apk 时，您需要第二个密钥。

# html - 部分 CSS 仅适用于 html

> ID：11748068
> 
> 赞同：-6
> 
> 时间：2012-07-31T20:03:37.220
> 
> 标签：html, css

我有一个奇怪的问题...我正在开发 3 个不同的应用程序，它们大部分都使用相同的 css。2 完美运行，它们的 css 文件位于单独的 .css 文档中。第三个也可以正常工作，但是....大多数 css 都在一个单独的 .css 文档中，这应该是这样，但是要使某些 css 工作，我实际上必须将它放在 .html 文件本身中，然而，这个完全相同的代码，在另外两个应用程序的单独 .css 文件中工作得非常好......我不知道这是怎么发生的......如果有人有一些可能的想法，请告诉我：D

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:09:29.413

我猜这是因为 CSS 的级联特性（这就是 C 的含义）。

如果我有两个样式表：

```
reset.css
site.css 
```

如果 reset.css 定义了一个类样式：

```
.foo {
    color: red;
} 
```

并且 site.css 定义了相同的类：

```
.foo {
    color: black;
} 
```

在 site.css 中定义的颜色将会获胜。我不确定这是否适用于您的场景，但您可能想查看 Chrome / Firefox 等浏览器中的开发工具，以了解样式是如何应用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:58:40.860

好吧，我只是想出了如何解决它....我在 css 文件夹中有这个特定的 css 文件，所以我只是将它移到主目录并解决了问题（即使它已正确链接到 css 文件夹） ……

# spring - PrimeFaces Ajax 调用总是使用 Spring Security 返回 302 状态码

> ID：11748073
> 
> 赞同：1
> 
> 时间：2012-07-31T20:03:55.030
> 
> 标签：spring, jsf, primefaces, http-status-code-302

我正在使用 Spring 3.2.0、PrimeFaces 3.3.1、Mojarra 2.1.11 和 Spring Security 3.1.1 创建一个项目。

我的问题是，每当 PrimeFaces 触发 ajax 调用时，例如在表格分页中，屏幕组件都不会刷新。

**编辑#4**

**每当调用 ajax 时，从服务器返回状态 302 并刷新页面**

我认为问题与 Spring 安全性有关，这是我的设置：

```
 <security:http entry-point-ref="authenticationEntryPoint" pattern="/spring/**">
    <security:anonymous />
    <security:http-basic />
    <security:custom-filter position="FORM_LOGIN_FILTER" ref="authenticationProcessingFilter" />
    <security:logout logout-url="/spring/logout" logout-success-url="/spring/login?logout=true" />
    <security:intercept-url pattern="/spring/login" access="ROLE_ANONYMOUS,ROLE_USER,ROLE_ADMIN" />
    <security:intercept-url pattern="/spring/logoutSuccess" access="ROLE_ANONYMOUS,ROLE_USER,ROLE_CLIENT" />
    <security:intercept-url pattern="/spring/intro" access="ROLE_ANONYMOUS,ROLE_USER"  />
    <security:intercept-url pattern="/spring/flows/admin_main_flow/**" access="ROLE_ADMIN" />
    <security:intercept-url pattern="/spring/flows/client_main_flow/**" access="ROLE_CLIENT" />
 </security:http>

 <security:http security="none" pattern="/javax.faces.resource/**" />
 <security:http security="none" pattern="/ajax/**" />
 <security:http security="none" pattern="/static/**" />
 <security:http security="none" pattern="/resources/**" /> 
```

这发生在登录后，所以我认为会话不应该已经过期。

**编辑#4结束**

我将应用程序精简到最低限度并尝试了以下代码：

```
<h:form id="testAjax" >
    <h:panelGrid columns="4" cellpadding="5">  
        <h:outputLabel for="test" value="test:" style="font-weight:bold"/>  
    <p:inputText id="test" value="#{testBean.test}" />
    <p:commandButton value="Submit" update="@form"/>
    <h:outputText value="#{testBean.test}" id="display" />  
</h:panelGrid>  
</h:form> 
```

请注意，我仔细检查了没有嵌套的表单，我使用@form 或元素 id 尝试了“处理”和“更新”。

发生的情况是调用了 TestBean 的 setter，设置了属性，但随后再也不会调用 getter 来显示新值。这是服务器端的日志：

```
org.springframework.web.servlet.DispatcherServlet  - DispatcherServlet with name 'Spring MVC Dispatcher Servlet' processing POST request for [/TryAjax/spring/WEB-INF/login.xhtml]
org.springframework.web.servlet.handler.SimpleUrlHandlerMapping  - Mapping [/WEB-INF/login.xhtml] to HandlerExecutionChain with handler [org.springframework.web.servlet.mvc.UrlFilenameViewController@2f46ccac] and 1 interceptor
org.springframework.web.servlet.mvc.UrlFilenameViewController  - Returning view name 'WEB-INF/login' for lookup path [/WEB-INF/login.xhtml]
org.springframework.web.servlet.DispatcherServlet  - Rendering view [org.springframework.faces.mvc.JsfView: name 'WEB-INF/login'; URL [/WEB-INF/WEB-INF/login.xhtml]] in DispatcherServlet with name 'Spring MVC Dispatcher Servlet'
org.springframework.faces.support.RequestLoggingPhaseListener  - Entering JSF Phase: RESTORE_VIEW 1
org.springframework.faces.mvc.JsfView  - Asking faces lifecycle to render
org.springframework.faces.support.RequestLoggingPhaseListener  - Entering JSF Phase: RENDER_RESPONSE 6
org.springframework.faces.mvc.JsfView  - View rendering complete
org.springframework.web.servlet.DispatcherServlet  - Successfully completed request 
```

我担心是配置问题，我按照基本说明进行了一些修改以纠正一些错误，这里的 web.xml 去掉了一些不相关的部分

```
<?xml version = '1.0'?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
  version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee">
    <context-param>  
        <param-name>log4jConfigLocation</param-name>  
        <param-value>/WEB-INF/log4j.xml</param-value>  
    </context-param>  
    <listener>  
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>  
    </listener>  
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring_context.xml</param-value>
    </context-param>
    <servlet>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <url-pattern>/spring/*</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>    
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener </listener-class>
    </listener>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping> 
        <servlet-name>Faces Servlet</servlet-name> 
        <url-pattern>*.xhtml</url-pattern> 
    </servlet-mapping>
    <context-param>
        <param-name>facelets.LIBRARIES</param-name>
        <param-value>/WEB-INF/tags/synaptic.taglib.xml</param-value>
    </context-param>
    <filter>
        <filter-name>openSessionInViewFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
        <init-param>
            <param-name>flushMode</param-name>
            <param-value>AUTO</param-value>
        </init-param>
    </filter>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <context-param>
        <param-name>facelets.SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param>
    <servlet>
        <servlet-name>Resources Servlet</servlet-name>
        <servlet-class>org.springframework.js.resource.ResourceServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
            <servlet-name>Resources Servlet</servlet-name>
            <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

面孔配置

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
              version="2.0"> 
    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>
</faces-config> 
```

其他弹簧流量配置

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx" 
       xmlns:mvc="http://www.springframework.org/schema/mvc" 
       xmlns:webflow="http://www.springframework.org/schema/webflow-config" 
       xmlns:faces="http://www.springframework.org/schema/faces"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/webflow-config 
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd 
        http://www.springframework.org/schema/faces 
        http://www.springframework.org/schema/faces/spring-faces-2.2.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">
    <faces:resources />
    <context:annotation-config />
     <context:component-scan base-package="com.synaptic"/>
    <bean class="org.springframework.faces.webflow.JsfFlowHandlerAdapter">
        <property name="flowExecutor" ref="flowExecutor" />
    </bean>
    <bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <value>
                /flows/*=flowController
            </value>
        </property>
        <property name="defaultHandler">
            <bean class="org.springframework.web.servlet.mvc.UrlFilenameViewController"/>
        </property>
    </bean>
    <bean  class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter">
    </bean>
    <bean id="faceletsViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
         <property name="viewClass" value="org.springframework.faces.mvc.JsfView"/>
         <property name="prefix" value="/WEB-INF/"/>
         <property name="suffix" value=".xhtml"/>
    </bean>
    <bean id="flowController" class="org.springframework.webflow.mvc.servlet.FlowController">
      <property name="flowExecutor" ref="flowExecutor"/>
    </bean>
    <webflow:flow-executor id="flowExecutor" flow-registry="flowRegistry">
        <webflow:flow-execution-listeners> 
            <webflow:listener ref="flowFacesContextLifecycleListener" /> 
            <!--  <webflow:listener ref="facesContextListener"/>-->
        </webflow:flow-execution-listeners> 
    </webflow:flow-executor> 
    <bean id="flowFacesContextLifecycleListener" class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener" /> 
    <webflow:flow-registry id="flowRegistry" flow-builder-services="facesFlowBuilderServices">
        <webflow:flow-location-pattern value="/WEB-INF/flows/**/*.xml"/>
    </webflow:flow-registry>
    <bean id="conversionService" class="org.springframework.faces.model.converter.FacesConversionService"/>
    <bean id="expressionParser" class="org.springframework.webflow.expression.el.WebFlowELExpressionParser">
         <constructor-arg>
             <bean class="org.jboss.el.ExpressionFactoryImpl"/>    
         </constructor-arg>
         <property name="conversionService" ref="conversionService"/>
     </bean>        
    <faces:flow-builder-services id="facesFlowBuilderServices" expression-parser="expressionParser" conversion-service="conversionService"/>
</beans> 
```

如果您发现任何问题或您有任何想法，请帮助我，这个问题困扰了我好几天。谢谢！

**编辑#1**

我添加了支持 bean 的代码和我声明它的 webflow 代码：

```
public class TestBean implements Serializable {
    private String test = "xxx";
    public String getTest() {
        return test;
    }
    public void setTest(String test) {
        this.test = test;
    }
}

<view-state id="home" view="../views/adminHome.xhtml">
    <on-entry>
        <evaluate expression="textManager.getTest()" result="viewScope.test"/>
    </on-entry>
</view-state> 
```

现在这个 testBean 只是我可以制作的最简单的测试用例，它不起作用，我遇到的主要问题是没有 ajax 调用起作用，例如表的分页，添加或删除或修改数据表的元素，tabView 等.

我通常为页面创建 bean 并将它们放在 viewScope 或 flowScope 中，这也用于来自数据库的数据列表。我也尝试让 Spring 使用范围 Session 管理 bean，但它也不起作用。另一个需要注意的是，默认值在页面上正确显示。

**编辑#2**

使用 firebug 和 eclipse 调试我看到了这个：

TestBean.test的初始值为“xxx”，我改成aaa，然后按提交。

一个ajax post请求被发送到服务器：

```
javax.faces.ViewState   e2s1
javax.faces.partial.ajax    true
javax.faces.partial.execu...    @all
javax.faces.partial.rende...    testAjax testAjax:display
javax.faces.source  testAjax:testButton
testAjax    testAjax
testAjax:test   aaa
testAjax:testButton testAjax:testButton 
```

发送 POST 后，我首先调试对 TestBean.getTest() 的调用，然后对具有正确值的 TestBean.setTest("aaa") 进行调用。

在这一点上，我希望在构建响应时再次调用 TestBean.getTest() 但调用没有发生并且响应不包含正确的值但包含旧值“xxx”。

如果现在我刷新页面，则调用 getter 并正确显示新值“aaa”。

**编辑#3**

我仍然可以解决这个问题。我现在注意到萤火虫有一个意想不到的行为：

当我单击命令按钮时，2 个请求被发送到服务器，一个 POST 和一个 GET。

首先发送 POST 并返回状态“302 Moved Temporarily”，然后 GET 开始并返回没有更新数据的响应。任何人都知道在这种情况下状态 302 是什么意思，可能是什么原因？

以与 primefaces 演示相同的方式进行调试，仅触发一个不返回状态 302 的 POST 请求

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:27:08.527

您需要向 flow-executor 添加一个参数以禁用重定向到相同状态。配置变为：

```
<webflow:flow-executor id="flowExecutor" flow-registry="flowRegistry">
    <webflow:flow-execution-listeners> 
        <webflow:listener ref="flowExecutionListener" /> 
        <webflow:listener ref="facesContextListener"/>
        <!--  <webflow:listener ref="flowFacesContextLifecycleListener" />-->
    </webflow:flow-execution-listeners> 
    <webflow:flow-execution-attributes>
        <webflow:redirect-in-same-state value="false"/>
    </webflow:flow-execution-attributes>
</webflow:flow-executor> 
```

这可以防止流执行器在发送 ajax 请求后完全刷新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:00:59.323

当您将 JSF 与 Spring 集成时，您的 JSF 托管 bean 将成为 Spring bean。这就是为什么 Spring 包含自己的 ELResolver 实现，以便您可以从 EL 表达式中引用这些 Spring bean。

不幸的是，尽管 Spring 开箱即用地支持的唯一范围是 @Request、@Session 和 @Application。

幸运的是，可以将与 Spring 集成的 ViewScope 的简单实现集成到您的应用程序中。PrimeFaces 的首席开发人员 Cagatay Civici 撰写了一篇博客文章，展示了一个简单的 ViewScope 实现示例，该示例可以轻松集成到您的应用程序中。

[http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0/](http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0/)

使用视图范围的托管 bean，那么您的 bean 将有足够的持久性来在 ajax 更新时动态呈现页面元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-03T16:33:05.920

```
<webflow:flow-execution-attributes>
<webflow:redirect-in-same-state value="false"/>
</webflow:flow-execution-attributes> 
```

解决了我的问题。我正在使用 org.springframework.web.servlet.handler.SimpleUrlHandlerMapping 与 JSF 1.x RichFaces 3.x 进行导航。当迁移到 JSF 2.x 和 PrimeFaces/RichFaces 4 时，DataTables 的 ajax 方面不起作用（例如显示但不会排序）添加这个 xml 就像魔法一样工作（因为我不知道我是什么所以需要这样做正在做）

# javascript - 无法正确实现 Primefaces 图表

> ID：11748079
> 
> 赞同：0
> 
> 时间：2012-07-31T20:04:24.130
> 
> 标签：javascript, jsf, jsf-2, charts, primefaces

我想实现 Primefaces 图表。但我未能正确设置图表的图例：

![在此处输入图像描述](../Images/2233ae799a1c198937160fd62fc94cdb.png)

这是我用来构建图表的代码：

```
<h:form>

    <p:barChart id="basic" value="#{DashboardController.categoryModel}" legendPosition="ne"  
                title="Accounts and Groups" min="0" max="#{DashboardController.chartMaxSize}" style="height:400px"
                shadow="true" barPadding="90" seriesColors="4D94FF, 1975FF, 005CE6, 0047B2" 
                yaxisLabel="Size"/>  
</h:form> 
```

Java 代码：

```
private void createCategoryModel() throws SQLException, Exception
    {
        categoryModel = new CartesianChartModel();

        // Active Accounts

        ChartSeries chart = new ChartSeries();
        chart.setLabel("Active Accounts");

        chart.set("Active Accounts", countDBActiveAccounts());

        // Blocked Accounts

        chart.setLabel("Blocked Accounts");

        chart.set("Blocked Accounts", countDBBlockedAccounts());

        // Active Groups

        chart.setLabel("Active Groups");

        chart.set("Active Groups", countDBActiveGroups());

        // Blocked Groups

        chart.setLabel("Blocked Groups");

        chart.set("Blocked Groups", countDBBlockedGroups());

        categoryModel.addSeries(chart);

    } 
```

你能帮我正确地构建图表吗？

PS 从@Ravi 提出的代码中，我得到了这个图表：

![在此处输入图像描述](../Images/db085fbc3fbd001b62fb3fc2f79c4492.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:50:02.230

您应该像这样使用 ChartSeries 的单独实例

```
private void createCategoryModel() throws SQLException, Exception
{
    categoryModel = new CartesianChartModel();

    // Active Accounts

    ChartSeries actAcc = new ChartSeries();
    actAcc .setLabel("Active Accounts");

    actAcc.set("Active Accounts", countDBActiveAccounts());
    actAcc.set("Blocked Accounts", 0);
    actAcc.set("Active Groups", 0);
    actAcc.set("Blocked Groups", 0);

    // Blocked Accounts

    ChartSeries blocAcc = new ChartSeries();
    blocAcc.setLabel("Blocked Accounts");

    blocAcc.set("Active Accounts", 0);
    blocAcc.set("Blocked Accounts", countDBBlockedAccounts());
    blocAcc.set("Active Groups", 0);
    blocAcc.set("Blocked Groups", 0);

    // Active Groups

    ChartSeries actGrp = new ChartSeries();
    actGrp.setLabel("Active Groups");

    actGrp.set("Active Accounts", 0);
    actGrp.set("Blocked Accounts", 0);
    actGrp.set("Active Groups", countDBActiveGroups());
    actGrp.set("Blocked Groups", 0);

    // Blocked Groups

    ChartSeries blocGrp = new ChartSeries();
    blocGrp.setLabel("Blocked Groups");

    blocGrp.set("Active Accounts", 0);
    blocGrp.set("Blocked Accounts", 0);
    blocGrp.set("Active Groups", 0);
    blocGrp.set("Blocked Groups", countDBBlockedGroups());

    categoryModel.addSeries(actAcc );
    categoryModel.addSeries(blocAcc);
    categoryModel.addSeries(actGrp);
    categoryModel.addSeries(blocGrp);

} 
```

# css - 当带有 Flash 的 iframe 在页面上时，Webkit 字体平滑错误。有解决办法吗？

> ID：11748082
> 
> 赞同：0
> 
> 时间：2012-07-31T20:04:50.340
> 
> 标签：css, text, webkit, font-smoothing

我在 Mac 上使用 Chrome 和 Safari 时遇到了一个令人讨厌的错误。似乎它与字体平滑以及页面是否具有内部带有 Flash 的 iframe 有关。

当我删除 iframe 时，文本看起来像是设置为`font-smoothing: subpixel-antialiased`（浏览器默认）。但是当 iframe 在页面上（其中运行 Flash）时，文本似乎设置为`font-smoothing: antialiased`.

有什么解决方法吗？请看下面的截图。

![没有 iframe..](../Images/24725406507c33ffcbd55aaa3ffa70ca.png)

![用 iframe..](../Images/35a1e180f24de7ba397cefecbccf6125.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:23:36.083

我也遇到了这个问题并像这样修复它：

```
.video1 { position: relative; height: 338px; width: 100%; }
.video1 > div { position: absolute; } 
```

然后我将 iFrame 放在第二个 div 中。由于 iFrame 现在位于绝对定位的 div 中，它不再强制页面上的文本在 Safari 中加载页面时进行抗锯齿处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:28:17.630

我想我找到了一个“好的”解决方案。我有一个 div 稍微重叠了一个 iframe，里面有 Flash。那个重叠的 div 的字体平滑搞砸了。要修复它，我只需将 z-index 放在 iframe 和重叠的 div 上。为了使其工作，iframe 必须位于 div 的顶部（更高的 z-index）。在上面的示例中，似乎没有任何东西与 iframe 重叠，但每个元素的边界可能略有重叠。您可以使用 Safari 或 Chrome 中的网络检查器查看它。但我只是先将 z-index 放在 iframe 上，然后将那些弄乱字体平滑的元素。

# java - 无法从 RTSP 服务器得到任何答案

> ID：11748083
> 
> 赞同：5
> 
> 时间：2012-07-31T20:04:53.220
> 
> 标签：java, sockets, rtsp, rtp

我可以使用预制软件连接到我的 Rtsp 服务器，但是使用以下代码我无法从服务器获得答案。即使连接成功，服务器也不回答我。

```
public class RtspClient {

private Socket server;
private InputStream is = null;
private OutputStream os = null;
private int seqid = 1;
private String request, resp;
private byte[] buffer = new byte[4096];
private int len = 0;

public RtspClient(String rIp, int rPort) {

    try {
        //INIT
        server = new Socket(rIp, rPort);
        is = server.getInputStream();
        os = server.getOutputStream();
        System.out.println("Connected to "+ rIp + ":" + rPort);

        //COMMUNICATION
        Boolean isTalking = true;
        while(isTalking == true) {

            //sending request
            String request = new String("OPTIONS * RTSP/1.0\r\nCSeq: 0\r\n");
            os.write(request.getBytes(), 0, request.length());
            System.out.println("Sent: "+ request);
            /////////////////

            //getting response
            len = is.read(buffer, 0, buffer.length);

            if(len > 0) {
                resp= new String(buffer, 0, len);
            }
            else {
                resp = "empty";
            }

            System.out.println("Received: "+ resp);
            //////////////////
        }
    } catch (UnknownHostException e ) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

这是wireshark的截图：http: [//imageplay.net/img/tya22277766/Untitled.png](http://imageplay.net/img/tya22277766/Untitled.png)

来自服务器的答案应该是：

```
RTSP/1.0 200 OK
Supported: play.basic, con.persistent
Cseq: 0
Server: Wowza Media Server x.x.x.x buildxxx
Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE, OPTIONS, ANNOUNCE, RECORD, GET_PARAMETER
Cache-Control: no-cache 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T17:34:35.410

好吧，简而言之，请求应该是：

```
OPTIONS * RTSP/1.0\r\nCSeq: 0\r\n\r\n 
```

代替

```
OPTIONS * RTSP/1.0\r\nCSeq: 0\r\n\ 
```

只需在末尾添加一个新行，服务器就会回答

# mysql - mysql求和多个连接

> ID：11748089
> 
> 赞同：2
> 
> 时间：2012-07-31T20:05:03.247
> 
> 标签：mysql, sql

我正在尝试编写一个`SELECT`连接多个一对多表的查询。一个名为 disbursements 的表**有**一个 `LEFT JOIN` to 一个名为**contacts**的表（因为一个联系人可以有很多付款）和一个 `LEFT JOIN` to 一个名为**prostments**的表（因为一个承诺（付款承诺）可以有多个付款（实际付款）。

我的问题是如何提取列出联系人、他们的承诺和承诺余额（从承诺中减去承诺支付的总和）的记录？

这是我到目前为止得到的：

```
SELECT *, (p.pl_amount - SUM(disb_amount)) as balance FROM disbursements d
LEFT JOIN contacts c on c.c_no = d.c_no
LEFT JOIN  pledges p on d.pl_no = p.pl_no 
GROUP BY d.disb_no
HAVING balance > 500
ORDER BY c.c_last 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:46:06.950

您可能想要做的是将`contacts`表放在`FROM`子句中而不是放在 a 中，`LEFT JOIN`因为即使他们没有任何付款/承诺，您仍然想检索联系人。

此外，由于您似乎只想要具有承诺余额 > 的联系人，因此 a`500`不是`LEFT JOIN`必需的，除非您还想检索没有任何承诺或有余额的联系人 > `500`。我改用常规（内部）`JOIN`：

试试这个：

```
SELECT    c.*,
          p.*,
          COALESCE(p.pl_amount - pd.disb_sum, 0) AS pledge_balance
FROM      contacts c
LEFT JOIN disbursements d ON c.c_no = d.c_no
LEFT JOIN pledges p ON d.pl_no = p.pl_no
LEFT JOIN (
          SELECT   pl_no, SUM(disb_amount) AS disb_sum
          FROM     disbursements
          GROUP BY pl_no
          ) pd ON p.pl_no = pd.pl_no
WHERE     p.pl_no IS NULL OR
          p.pl_amount - pd.disb_sum > 500
ORDER BY  c.c_last 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:53:36.057

我认为你可以简化这个问题。如果我理解正确，您的支付取决于您的承诺（如果没有承诺，则没有支付）。如果这是真的，那么您可以执行以下操作：

```
select 
    p.pl_no, p.pl_amount - sum(disb_amount) as balance
from 
    pledges as p
    left join disbursements as d on p.pl_no = d.pl_no
group by
    p.pl_no
having
    p.pl_amount - sum(disb_amount) > 500; 
```

如果您需要完整的信息（联系人、承诺和付款），那么您必须将其视为一个多步骤问题：

1.  您首先需要承诺的余额
2.  您需要与承诺相关的联系人
3.  您需要此记录的完整信息

因此，上面的查询为您提供了第 1 步所需的信息。您可以使用此信息创建一个临时表：

```
Create temporary table temp_pledge_balance
select 
    p.pl_no, p.pl_amount - sum(disb_amount) as balance
from 
    pledges as p
    left join disbursements as d on p.pl_no = d.pl_no
group by
    p.pl_no; 
```

我建议您索引此表，以加快后续步骤：

```
Alter table temp_pledge_balance
    add index pl_no (pl_no); 
```

现在，对于第 2 步：

```
create temporary table temp_contacts
select c.*, p.pl_no
from
    temp_pledge_balance as pb
    inner join pledges as p on pb.pl_no=p.pl_no
    inner join contacts as c on p.c_no = c.c_no;
alter temp_contacts
    add index c_no(c_no); 
```

最后，对于第 3 步：

```
select
   tc.*, pb.*, p.*, d.*
from
   temp_contacts as tc
   left join disbursements as d on tc.c_no = d.c_no
   left join pledges as p on d.pl_no = p.pl_no
   left join temp_pledge_balance as pb on p.pl_no = pb.p_no
where
   pb.balance > 500 
```

一个棘手的解决方案，但它可能会对您有所帮助。

# c# - 从局部视图重定向时在 MVC 中调用操作

> ID：11748093
> 
> 赞同：0
> 
> 时间：2012-07-31T20:05:28.867
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我遇到了这个问题，我在不同的 cshtml 文件中有一个登录屏幕和一个注册屏幕，但注册视图被称为 @Html.Partial。登录屏幕中的代码如下：

```
 <div class="panelLogIn left @if (ViewBag.register) { Write("hidden"); }">
        @using (Html.BeginForm()) {
            <div>
                <div class="validationMessage" style="padding-bottom:10px;">@Html.ValidationMessage("loginFailed")</div>
                <div class="field">
                    <span class="textOverField absolute em1-2" style="top:6px;left:4px;">User</span>
                    @Html.TextBoxFor(a => a.UserName, new { @class = "textField" }) <div class="absolute validationMessage">@Html.ValidationMessageFor(u => u.UserName)</div>
                </div>
                <div class="field relative">
                    <span class="textOverField absolute em1-2" style="top:6px;left:4px;">Password</span>
                    @Html.PasswordFor(a => a.Password, new { @class = "textField" }) <div class="absolute validationMessage">@Html.ValidationMessageFor(u => u.Password)</div>
                </div>
                <div class="em0-9" style="margin-bottom: 20px;">
                    <input class="submitButton cursorHand" style="margin-top: 10px;" type="submit" value="Enter" />
                </div>
                <div class="em0-9">
                    <span class="guestLink bold linkBlue underline cursorHand">Register Free</span>
                </div>
            </div>
        }
        </div>
        <div class="panelGuest left @if (!ViewBag.register) { Write("hidden"); }">
            @Html.Partial("RegisterUser", Model.NewUser)
        </div> 
```

注册视图如下：

```
@using (Html.BeginForm("Register", "Account"))
{
       /* The text boxes and form elements */

    <div class="em0-9" style="margin-bottom:20px;">
        <input class="submitButton cursorHand" style="margin-top:10px;" type="submit" value="Register" />
    </div>
} 
```

基本上，问题是当我尝试注册新用户时，它会将我重定向到 localhost/Account/Register，当我返回登录屏幕（在同一视图中）时，我无法调用任何其他操作从寄存器一。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:23:46.443

尝试完全指定您的第一个 Html 表单的操作，就像您在部分中所做的那样：

```
@using (Html.BeginForm("Index", "Account")) {
    //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:23:02.400

您可能应该对重新注册有不同的看法。看起来您有一个包含登录框（用户名/密码字段）和新用户注册字段的视图。

> 但是注册视图被称为@Html.Partial

如果您熟悉 Web 表单编程模型中的用户控件，那么 Html 部分会有点类似于用户控件。

所以登录屏幕中的代码就是

```
<div class="panelLogIn left @if (ViewBag.register) { Write("hidden"); }">
        @using (Html.BeginForm()) {
            <div>
                <div class="validationMessage" style="padding-bottom:10px;">@Html.ValidationMessage("loginFailed")</div>
                <div class="field">
                    <span class="textOverField absolute em1-2" style="top:6px;left:4px;">User</span>
                    @Html.TextBoxFor(a => a.UserName, new { @class = "textField" }) <div class="absolute validationMessage">@Html.ValidationMessageFor(u => u.UserName)</div>
                </div>
                <div class="field relative">
                    <span class="textOverField absolute em1-2" style="top:6px;left:4px;">Password</span>
                    @Html.PasswordFor(a => a.Password, new { @class = "textField" }) <div class="absolute validationMessage">@Html.ValidationMessageFor(u => u.Password)</div>
                </div>
                <div class="em0-9" style="margin-bottom: 20px;">
                    <input class="submitButton cursorHand" style="margin-top: 10px;" type="submit" value="Enter" />
                </div>
                <div class="em0-9">
                    <span class="guestLink bold linkBlue underline cursorHand">Register Free</span>
                </div>
            </div>
        }
        </div> 
```

您可以有一个单独的注册视图，您可以在其中包含您的部分注册。

希望这可以帮助。

# vb.net - 使用关键字：.Close 或 .Dispose

> ID：11748097
> 
> 赞同：4
> 
> 时间：2012-07-31T20:05:42.713
> 
> 标签：vb.net, garbage-collection

当实现`using`关键字来实例化一个`IO.StreamWriter`对象时，这是否意味着`.close`在对象上调用`.dispose`？或者它是否重要，因为一旦它使用它就超出了范围并且无论如何都会被垃圾收集？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:09:03.590

using 关键字将调用`Dispose`. 但是，*按照惯例*，`Dispose`并且`Close`应该始终执行完全相同的功能，并且可以互换。

因此，任何既提供方法`IDisposable`又提供`Close()`方法的资源，例如`Stream`派生类，都可以在`using`块中使用。

[框架设计指南](https://rads.stackoverflow.com/amzn/click/com/0321545613)中明确解决了这一点：“使`Close`实现与`Dispose`“......

IDisposable的[MSDN 帮助](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose%28v=vs.100%29.aspx)还建议：“具有此类约定的类的实现者可能会选择实现具有自定义名称的公共方法，例如 Close，它调用 Dispose 方法。”

> 或者它是否重要，因为一旦它使用它就超出了范围并且无论如何都会被垃圾收集？

它不会被垃圾收集 - 在它不再在范围内并且不再被任何对象引用之后，它将有*资格*进行垃圾收集。这意味着它将（至少如果编写正确）*最终*会被清理，但它可能不会在很长一段时间内发生 - 包括直到程序终止。using 块导致资源（而不是内存），例如流，*立即*关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:09:28.760

`Using``Dispose`仅在范围末尾调用。但是，对于诸如 , 之类的类`StreamWriter`，`Dispose`最终会在`Close`内部调用。

> 或者它是否重要，因为一旦它使用它就超出了范围并且无论如何都会被垃圾收集？

`Using`这是一个误解：块和方法的全部原因`Dispose`是对象*没有*在作用域结束时立即被垃圾收集。

# artificial-intelligence - 在 TSP 中健身

> ID：11748099
> 
> 赞同：4
> 
> 时间：2012-07-31T20:05:45.213
> 
> 标签：artificial-intelligence, genetic-algorithm, traveling-salesman

我正在使用遗传算法 (GA) 来优化旅行商问题 (TSP)。我的问题是我如何计算个人的适应度。显然，具有较短路线的解决方案更合适，但是我如何在不知道最短可能路线和最长可能路线是什么的情况下准确分配适应度值来确定我的解决方案适合该范围的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:35:16.490

适应度等于路径长度很好。请记住，在遗传算法中，适应度仅用于选择个体：因此对于通常的[选择程序](http://en.wikipedia.org/wiki/Selection_%28genetic_algorithm%29)，规模并不重要，只有等级重要。

实施示例：

*   [http://www.codeproject.com/Articles/1403/Genetic-Algorithms-and-the-Traveling-Salesman-Prob](http://www.codeproject.com/Articles/1403/Genetic-Algorithms-and-the-Traveling-Salesman-Prob)
*   [http://khayyam.developpez.com/articles/algo/voyageur-de-commerce/genetique/](http://khayyam.developpez.com/articles/algo/voyageur-de-commerce/genetique/)（使用谷歌翻译）
*   [http://www.lalena.com/ai/tsp/](http://www.lalena.com/ai/tsp/)
*   [http://www.mathworks.com/matlabcentral/fileexchange/13680](http://www.mathworks.com/matlabcentral/fileexchange/13680)

更多细节（2001 - Swarm Intelligence - Kennedy & Eberhart - 第 249 页）：

> Pablo Moscato 是一位南美研究员，他率先研究了模因算法（例如，Moscato，1989）。他和现在在苏格兰爱丁堡大学工作的迈克尔·诺曼（Michael Norman）于 1980 年代开始在加州理工学院合作。在最近的一篇论文中，他们描述了使用模因算法优化旅行商问题 (TSP) (Moscato and Norman, 1992)。回想一下，TSP 需要找到穿过多个城市的最短路径，每个城市只经过一次。这个问题在应用数学中有着悠久的历史，因为它很难解决，尤其是在城市数量很大的情况下。TSP 是一个 NP-hard 问题，这表明如果找到解决它的方法，那么大量其他问题也将得到解决。
> 
> 一群人——这些研究人员通常使用 16 人的人口规模——搜索由城市排列定义的问题空间，称为“旅游”。种群被概念化为一个环，每个个体都连接到它的两个紧邻的邻居，并在搜索中与之竞争；个人还与环另一端的其他人有联系，他们与之合作。人口中的每个人都包括城市之旅。竞争被视为个体之间的“挑战”和“战斗”，其中比较个体与其邻居的旅行长度，并根据差异设置概率阈值。行程长度之间的差异会影响 S 形曲线的陡度；当差异较小或温度较低时，
> 
> 合作被用来让更成功的人彼此“交配”，而不是与人群中不适合的成员“交配”。用于决定竞争性互动的相同规则用于评估合作伙伴对交叉的渴望，这与在 GA 中一样实施。一个人向另一个人“提议”，如果提议被接受，也就是说，如果随机决策有利于他们的交互，则实施交叉算子。这样就产生了下一代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:08:04.337

您可以对所有候选解决方案进行规范化，以使您迄今为止看到的最短路径的适应度得分为 1.0（或 10、42 或 3.14 ......随您喜欢），然后将所有路径缩放得比这相对更长。与最长路径相同 - 您观察到的最长路径被认为是最差的分数。

当你找到一条更短的路径时，诀窍就在于你所做的事情（假设你为一些更长的路径分配了最高可能的分数，例如 1.0）——然后你必须提高标准化函数的上限。例如，开始分配适应度 2.0（或 1.1，或其他任意更大的适应度分数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:41:38.123

如果您的程序正在最大化适应度值，您可能希望最大化适应度函数

> f = - 行程长度

**已编辑**：我在健身中添加了 1000000000000，一个任意数字，以使健身变得积极，在阅读了一些评论后，我意识到这没有必要。

如果您的程序正在最小化适应度值，您可能希望最小化适应度函数

> f = 巡回赛长度

# python - Python 中的流控制更简单

> ID：11748102
> 
> 赞同：1
> 
> 时间：2012-07-31T20:05:49.190
> 
> 标签：python, flags, flow-control

在下面的代码中，我试图检查变量“new_shape”是否已经存在于“shape_list”中。如果它不存在，我想添加它；如果它确实存在，我只想离开它。到目前为止，我只使用标志实现了这一点。我确信有一种方法可以在没有标志的情况下更有效地完成同样的事情。有什么建议么？感谢您提供的任何帮助！

```
 flag = 0
    for shape in shape_list:
        if new_shape == shape:
            flag = 1
            break
    if flag == 0:
        shape_list.append(new_shape) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:08:10.460

您可以使用

```
if new_shape not in shape_list:
    shape_list.append(new_shape) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:10:50.427

对于保留原始流程的答案（尽管通常效率低于其他答案）：

```
for shape in shape_list:
    if new_shape == shape:
        break
else:
    shape_list.append(new_shape) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:20:18.907

如果订单未导入，您可能可以使用`set`（[文档](http://docs.python.org/py3k/library/stdtypes.html#set-types-set-frozenset)）。

# wcf - 调用函数时 Silverlight wcf 滞后

> ID：11748104
> 
> 赞同：1
> 
> 时间：2012-07-31T20:05:53.717
> 
> 标签：wcf, performance, silverlight-3.0

我正在尝试使用基于 .net 3.5 silverlight 3 - wcf 服务的应用程序来调试性能问题。该服务在负载不重的服务器上的 IIS 7 下运行

问题是应用程序中的某些操作需要很长时间才能完成，为了调试这一点，我们在 silverlight 和 wcf 应用程序中添加了手动登录，以计算来自 silverlight 客户端的调用需要多长时间才能到达服务，如何服务处理时间长，那么响应到达客户端需要多长时间

调查结果是否表明我们似乎遇到了很大的延迟——从服务器发送和接收消息之间的延迟长达 45 秒。

不幸的是，这些大延迟似乎是随机发生的，对于不同的服务调用我们没有模式。大多数时候通话工作相对较快。

我相信这可能与并发使用有关，因为当 4-5 个用户同时使用系统时，问题似乎会变得更糟。

有没有其他人遇到过这样的问题？谁能建议任何有用的方法来调试此类问题或至少缩小可能的原因？

在调试或通过 IIS 在开发计算机上本地运行时，不会发生此问题

谢谢！

# java - 使用 RestTemplate 解析本地 JSON 文件

> ID：11748107
> 
> 赞同：3
> 
> 时间：2012-07-31T20:06:09.827
> 
> 标签：java, android, spring, resttemplate

我想解析一个本地 JSON 文件并使用 RestTemplate 将其编组为模型，但不知道这是否可能。

我正在尝试在使用 RestTemplate 与服务器同步的 Android 应用程序上预填充数据库。我想，与其自己解析本地 JSON，不如使用 RestTemplate？它专门用于将 JSON 解析为模型。

但是......我无法从文档中判断是否有任何方法可以做到这一点。有一个`MappingJacksonHttpMessageConverter`类似乎可以将服务器的 http 响应转换为模型……但是有没有办法破解它来处理本地文件？我试过了，但一直越陷越深，没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:53:58.440

想通了。您可以直接使用 Jackson，而不是使用 RestTemplate。没有理由 RestTemplate 需要参与其中。这很简单。

```
try {
    ObjectMapper mapper = new ObjectMapper();

    InputStream jsonFileStream = context.getAssets().open("categories.json");

    Category[] categories = (Category[]) mapper.readValue(jsonFileStream, Category[].class);

    Log.d(tag, "Found "  + String.valueOf(categories.length) + " categories!!");
} catch (Exception e){
    Log.e(tag, "Exception", e);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:34:02.143

是的，我认为这是可能的（使用 MappingJacksonHttpMessageConverter）。

`MappingJacksonHttpMessageConverter`具有`read()`采用两个参数的方法：`Class`和`HttpInputMessage`

```
MappingJacksonHttpMessageConverter converter = new MappingJacksonHttpMessageConverter();
YourClazz obj = (YourClazz) converter.read(YourClazz.class, new MyHttpInputMessage(myJsonString)); 
```

使用此方法，您可以从单个 json 消息中读取单个对象，但 YourClazz 可以是一些集合。

接下来，您必须创建自己的 HttpInputMessage 实现，在此示例中，它期望 json 作为字符串，但您可能可以将流传递给您的 json 文件。

```
public class MyHttpInputMessage implements HttpInputMessage {

    private String jsonString;

    public MyHttpInputMessage(String jsonString) {
        this.jsonString = jsonString;
    }

    public HttpHeaders getHeaders() {
        // no headers needed
        return null;
    }

    public InputStream getBody() throws IOException {
        InputStream is = new ByteArrayInputStream(
                jsonString.getBytes("UTF-8"));
        return is;
    }

} 
```

PS。[您可以使用数据库发布您的应用程序](https://stackoverflow.com/q/513084/265597)

# iphone - NStimer 从视图开始确实加载了，给出了错误的时间！物镜 C iPhone

> ID：11748114
> 
> 赞同：-1
> 
> 时间：2012-07-31T20:06:33.443
> 
> 标签：iphone, objective-c, nstimer, viewdidload

我正在启动一个带有视图的计时器确实加载了

> - (void)viewDidLoad
> {
> [超级 viewDidLoad];
> locationManager.delegate = self;
> [NSTimer scheduledTimerWithTimeInterval: 10.0 //这里的interval必须是float
> target: self
> selector:@selector(onTick:)
> userInfo: nil repeats:YES];
> }

然后我有我的计时器方法：

> -(void)onTick:(NSTimer *)timer {
> [locationManager startUpdatingLocation];
> 
> }

然后调用位置管理器，因为它是一个委托：

> -(void)locationManager:(CLLocationManager *)manager
> didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
> NSLog(@"到达位置管理器");
> 
> NSTimeInterval timePassedSinceLastLocationUpdate = fabs([oldLocation.timestamp timeIntervalSinceNow]);
> 
> NSLog(@"更新时间：%f", timePassedSinceLastLocationUpdate);
> 
> NSLog(@"--------------");
> //发生其他事情
> [locationManager stopUpdatingLocation];
> }

* * *

但是，显示的 NSLOG 是这样的：

> 2012-07-31 13:02:28.092 round5[1713:f803] 进入位置管理器
> 2012-07-31 13:02:28.095 round5[1713:f803] 更新时间：0.000000
> 2012-07-31 13:02： 28.095 round5[1713:f803] --------------
> 2012-07-31 13:02:33.298 round5[1713:f803] 到达位置管理器
> 2012-07-31 13:02 :33.298 round5[1713:f803] 更新时间：5.222202
> 2012-07-31 13:02:33.300 round5[1713:f803] --------------
> 2012-07-31 13:02 :44.086 round5[1713:f803] 进入位置管理器
> 2012-07-31 13:02:44.086 round5[1713:f803] 更新时间：15.986345
> 2012-07-31 13:02:44.087 round5[1713:f803] - -------------
> 2012-07-31 13:02:53.297 round5[1713:f803] 到达位置管理器
> 2012-07-31 13:02:53.302 round5[1713:f803]更新时间：9.217123
> 2012-07-31 13:02:53.303 round5[1713:f803] --------------
> 2012-07-31 13:03:04.096 round5[1713:f803] 到达位置经理
> 2012-07-31 13:03:04.097 round5[1713:f803] 更新时间：20.007919
> 2012-07-31 13:03:04.098 round5[1713:f803] ------------- -
> 2012-07-31 13:03:13.297 round5[1713:f803] 进入位置管理器
> 2012-07-31 13:03:13.298 round5[1713:f803] 更新时间：9.202388
> 2012-07-31 13:03 :13.300 round5[1713:f803] --------------
> 2012-07-31 13:03:24.111 round5[1713:f803] 到达位置管理器
> 2012-07-31 13: 03:24.112 round5[1713:f803] 更新时间：20.012550
> 2012-07-31 13:03:24.113 round5[1713:f803] --------------

正如您在底部看到的那样，模式正常化并且它读取〜10秒（这是正确的，因为这就是设置的间隔并与系统时钟进行比较）

还有20个……哪个……我不知道它是从哪里来的。

我想我的问题是“为什么它不是一直读取 10 秒；为什么它是 NStimer 值的两倍？”

多谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:14:56.333

你这里有两个错误。首先，你不应该`startUpdatingLocation`重复调用。您应该调用一次以开始请求更新，因为它们可用（`stopUpdatingLocation`当您不再需要更新时应该调用）。你的第二个错误是相信打电话`startUpdatingLocation`总是会给你一个新的位置。你最后一次没有检查你的`NSTimer ran`. 您正在检查上次`CLLocationManager`更新位置的时间 ( `oldLocation.timestamp`)。这可以是任意时间。当您上次询问时，它可能无法获得更新。它可能在您不要求的时候更新了。

阅读[位置感知编程指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497)。它解释了如何请求更新以及何时请求更新。通常，您将其打开并告诉系统您希望更新的准确程度。然后，当事情发生变化时，您让系统呼叫您。您不会反复要求位置更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:13:40.090

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [locationManager setDelegate:self];
    [locationManager setDistanceFilter:2.0];
    [locationManager startUpdatingLocation];
    [NSTimer scheduledTimerWithTimeInterval:10.0 target:self selector:@selector(useLocation) userInfo:nil repeats:YES];
}

-(void)useLocation{
    NSLog(@"%@",[locationManager location]);
} 
```

您实际上不必在委托方法中实现任何代码。[locationManager location] 方法将返回您当前的位置，如果您移动 (2) 米，设置 distanceFilter 将更新您的位置（车载 GPS 有那么好吗？）。因此，一旦您的位置发生变化，位置属性就会自动更新。这就是我通常实现它的方式。

参考：iOS 编程：大书呆子牧场指南第 3 版，第 4 章

# perl - 使用 XML::LibXML 的 XML 文档中的随机元素顺序

> ID：11748116
> 
> 赞同：1
> 
> 时间：2012-07-31T20:06:42.063
> 
> 标签：perl, csv, xml-libxml

我有一个 Perl 脚本，它读取一个简单的`.csv`文件，如下所示 -

```
"header1","header2","header3","header4"
 "12","12-JUL-2012","Active","Processed"
 "13","11-JUL-2012","In Process","Pending"
 "32","10-JUL-2012","Active","Processed"
 "24","08-JUL-2012","Active","Processed"
 ..... 
```

目的是将其转换`.csv`为`.xml`如下文件-

```
<ORDERS>
  <LIST_G_ROWS>
     <G_ROWS>
         <header1>12</header1>
         <header2>12-JUL-2012</header2>
         <header3>Active</header3>
         <header4>Processed</header4>
     </G_ROWS>
     <G_ROWS>
         <header1>13</header1>
         <header2>11-JUL-2012</header2>
         <header3>In Process</header3>
         <header4>Pending</header4>
     </G_ROWS>
....
....
   </LIST_G_ROWS>
</ORDERS> 
```

我知道`XML::CSV`CPAN 中有可用的工具，这将使我的生活更轻松，但我想利用已经安装`XML::LibXML`的来创建 XML，而不是安装`XML::CSV`. 我能够像上面那样读取 CSV 并创建 XML 文件，没有任何问题，但是我得到了 XML 中元素的随机顺序，即如下所示。如上所示，我需要使元素（子节点）的顺序与`.csv`文件同步，但我不太确定如何解决这个问题。我正在使用 a`hash`和`sort()`ing 哈希也没有完全解决问题。

```
<ORDERS>
  <LIST_G_ROWS>
     <G_ROWS>
         <header3>Active</header3>
         <header1>12</header1>
         <header4>Processed</header4>
         <header2>12-JUL-2012</header2>                          
     </G_ROWS>
 ...... 
```

等等。下面是我的 perl 代码的片段

```
use XML::LibXML;
use strict;

my $outcsv="/path/to/data.csv";
my $$xmlFile="/path/to/data.xml";
my $headers = 0;
my $doc = XML::LibXML::Document->new('1.0', 'UTF-8');
my $root = $doc->createElement("ORDERS");
my $list = $doc->createElement("LIST_G_ROWS");
$root->appendChild($list);

open(IN,"$outcsv") || die "can not open $outcsv:  $!\n";
while(<IN>){    
    chomp($_);
    if ($headers == 0)
    {
        $_ =~ s/^\"//g;     #remove starting (")
        $_ =~ s/\"$//g;     #remove trailing (")
        @keys = split(/\",\"/,$_);  #split per ","
        s{^\s+|\s+$}{}g foreach @keys;  #remove leading and trailing spaces from each field
        $headers = 1;       
    }
    else{   
        $_ =~ s/^\"//g;     #remove starting (")
        $_ =~ s/\"$//g;     #remove trailing (")    
        @vals = split(/\",\"/,$_);  #split per ","
        s{^\s+|\s+$}{}g foreach @vals;  #remove leading and trailing spaces from each field

        my %tags = map {$keys[$_] => $vals[$_]} (0..@keys-1);                   
        my $row  = $doc->createElement("G_ROWS");
        $list->appendChild($row);
        for my $name (keys %tags) {
            my $tag = $doc->createElement($name);
            my $value = $tags{$name};
            $tag->appendTextNode($value);               
            $row->appendChild($tag);
        }
    }
}
close(IN);

$doc->setDocumentElement($root);
open(OUT,">$xmlFile") || die "can not open $xmlFile:  $!\n";
print OUT $doc->toString();
close(OUT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:28:12.307

你可以完全忘记`%tags`哈希。相反，循环遍历 的索引`@keys`：

```
for my $i (0 .. @keys - 1) {
    my $key   = $keys[$i];
    my $value = $values[$i];
    my $tag   = $doc->createElement($key);
    $tag->appendTextNode($value);
    $row->appendChild($tag);
} 
```

这样，您的密钥的顺序就会被保留。当使用散列时，排序是不确定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:54:14.440

你的程序比它需要的要复杂得多。为了方便和可靠，您应该使用它[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV)来解析 CSV 文件。

下面的程序可以满足您的需要。

```
use strict;
use warnings;

use Text::CSV;
use XML::LibXML;

open my $csv_fh, '<', '/path/to/data.csv' or die $!;
my $csv = Text::CSV->new;
my $headers = $csv->getline($csv_fh);

my $doc = XML::LibXML::Document->new('1.0', 'UTF-8');
my $orders = $doc->createElement('ORDERS');
$doc->setDocumentElement($orders);
my $list = $orders->appendChild($doc->createElement('LIST_G_ROWS'));

while ( my $data = $csv->getline($csv_fh) ) {

  my $rows = $list->appendChild($doc->createElement('G_ROWS'));

  for my $i (0 .. $#$data) {
    $rows->appendTextChild($headers->[$i], $data->[$i]);
  }
}

print $doc->toFile('/path/to/data.xml', 1); 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<ORDERS>
  <LIST_G_ROWS>
    <G_ROWS>
      <header1>12</header1>
      <header2>12-JUL-2012</header2>
      <header3>Active</header3>
      <header4>Processed</header4>
    </G_ROWS>
    <G_ROWS>
      <header1>13</header1>
      <header2>11-JUL-2012</header2>
      <header3>In Process</header3>
      <header4>Pending</header4>
    </G_ROWS>
    <G_ROWS>
      <header1>32</header1>
      <header2>10-JUL-2012</header2>
      <header3>Active</header3>
      <header4>Processed</header4>
    </G_ROWS>
    <G_ROWS>
      <header1>24</header1>
      <header2>08-JUL-2012</header2>
      <header3>Active</header3>
      <header4>Processed</header4>
    </G_ROWS>
  </LIST_G_ROWS>
</ORDERS> 
```

* * *

**更新**

如果没有`Text::CSV`提供的奇异选项，如果它的选项是固定的，它的功能就相当简单。此替代方法提供了一个子例程`csv_readline`来替换该`Text::CSV`方法`readline`。它的工作方式大多与模块相同。

该程序的输出与上述相同。

```
use strict;
use warnings;

use XML::LibXML;

open my $csv_fh, '<', '/path/to/data.csv' or die $!;

my $doc = XML::LibXML::Document->new('1.0', 'UTF-8');
my $orders = $doc->createElement('ORDERS');
$doc->setDocumentElement($orders);
my $list = $orders->appendChild($doc->createElement('LIST_G_ROWS'));

my $headers = csv_getline($csv_fh);

while ( my $data = csv_getline($csv_fh) ) {

  my $rows = $list->appendChild($doc->createElement('G_ROWS'));

  for my $i (0 .. $#$data) {
    $rows->appendTextChild($headers->[$i], $data->[$i]);
  }
}

print $doc->toFile('/path/to/data.xml', 1);

sub csv_getline {
  my $fh = shift;
  defined (my $line = <$fh>) or return;
  $line =~ s/\s*\z/,/;
  [ map { /"(.*)"/ ? $1 : $_ } $line =~ /( " [^"]* " | [^,]* ) , /gx ];
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-31T20:28:00.770

看起来有点`XML::LibXml`过头了，只需使用`XML::Simple`和构建将描述 XML 结构的正确哈希，而不是将其转储`XMLOut`到 XML 文件中

# xpages - 单选按钮组 Select & Change / onChange

> ID：11748119
> 
> 赞同：0
> 
> 时间：2012-07-31T20:06:58.637
> 
> 标签：xpages

看起来我的单选按钮组没有调用 Select & Change / onChange 事件。在下面的 SSJS 示例中，单选按钮组的 onChange 事件应设置编辑框的值并进行完整更新。两者似乎都没有发生。

```
<xp:radioGroup id="radioGroup1">
    <xp:selectItem itemLabel="One"></xp:selectItem>
    <xp:selectItem itemLabel="Two"></xp:selectItem>
    <xp:selectItem itemLabel="Three"></xp:selectItem>
    <xp:eventHandler event="onchange" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:getComponent("inputText1").setValue(getComponent("radioGroup1").getValue());}]]></xp:this.action>
    </xp:eventHandler>
</xp:radioGroup>
On Select should set this:&#160;<xp:inputText id="inputText1"></xp:inputText>
<xp:br></xp:br>
Selected Value:&#160;<xp:text escape="true" id="computedField1" style="font-weight:bold"><xp:this.value><![CDATA[#{javascript:return getComponent("radioGroup1").getValue();}]]></xp:this.value></xp:text>
<xp:br></xp:br>
<xp:button value="Update" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
    </xp:eventHandler></xp:button>
<xp:br></xp:br> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T22:04:13.573

无线电组的 OnChange 事件在 IE 中无法正常工作。OnClick 事件有效。所以需要根据浏览器编写代码，如下。

```
<xp:radioGroup id="radioGroup1">
<xp:selectItem itemLabel="One"></xp:selectItem>
<xp:selectItem itemLabel="Two"></xp:selectItem>
<xp:selectItem itemLabel="Three"></xp:selectItem>
<xp:eventHandler event="onchange" submit="true" refreshMode="partial" refreshId="panelRadioVal" rendered="#{javascript:!context.getUserAgent().isIE()}" />
<xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="panelRadioVal" rendered="#{javascript:context.getUserAgent().isIE()}" />
</xp:radioGroup>
<xp:panel id="panelRadioVal">
    <xp:inputText value="#{javascript:getComponent('radioGroup1').getSubmittedValue()}" />
</xp:panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:24:44.473

看起来您的事件处理程序中的第一个 getComponent 应该是“inputText1”而不是“inputText”。

另外，为什么要执行完整更新而不是部分刷新？只是想了解业务案例。

# php - PHP 5.3 vs 5.4：“this”在对象中显示为未定义的变量

> ID：11748120
> 
> 赞同：0
> 
> 时间：2012-07-31T20:07:04.140
> 
> 标签：php, porting

我遇到了在 PHP 5.3 中运行良好的代码问题，现在在 PHP 5.4 中被破坏了。代码工作的原始环境是：

Ubuntu 11.04 Lighttpd 1.4.29 PHP 5.3

和

Mac OSX 10.7.4 阿帕奇 2.0.63 PHP 5.3

新环境是：

安卓 4.0.4 Lighttpd 1.4.29 PHP 5.4.4

我将问题代码归结为两个简单的文件：

[test.class.php]

```
class Test {
    public $testProp1;

    function setTestProp1($value){
        $this->testProp1 = $value;
        return ($this->testProp1 != '') ? true : false;
    }

    function doSomething()
    {
        if( $this->testProp1 )
        { echo "Just do some " . $this->testProp1; }
        else
        { echo "Just do nothing"; }
    }

} 
```

[调试.php]

```
error_reporting(E_ALL);
require "test.class.php";

$myTest = new Test();
$myTest->setTestProp1("foo");

$myTest->doSomething(); 
```

在使用 PHP 5.3 的系统上，输出为：

做一些 foo

在使用 PHP 5.4 的系统上，输出为：

> 警告：从第 5 行 /data/www/test.class.php 中的空值创建默认对象
> 
> 注意：未定义变量：第 11 行 /data/www/test.class.php 中的 this
> 
> 注意：尝试在第 11 行的 /data/www/test.class.php 中获取非对象的属性

什么都不做

* * *

即使我更改了错误报告级别，我仍然会在 PHP 5.4 中收到警告和“什么都不做”。不知道交易是什么，我完全被难住了。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:34:38.120

在 Mac OSX 上的另一个 PHP 5.4.4 安装上进行了尝试，它运行良好。我们认为当我们将 PHP 移植到 Android 时出现了问题，所以我们必须重新审视这个过程。将来肯定会在发布到 SO 之前测试更多配置。

感谢大家。

# asp.net - 使用ajax和json从登录表单重定向到用户表单

> ID：11748121
> 
> 赞同：0
> 
> 时间：2012-07-31T20:07:09.707
> 
> 标签：asp.net, asp.net-ajax

有一个登录表单，上面有一个登录按钮（不是服务器控件）。我想在使用数据库结帐后登录到 user.aspx。所以我创建了一个页面：getlogin.aspx，它将连接到数据库并检查用户名和密码。我将通过 $.ajax 调用此表单（我的意思是 getlogin.aspx），如下所示：

```
 $('#btnLogin').click(function () {
        var pass = $('#txtPassword').val();
        var user = $('#txtUsername').val();
        $.ajax({
            type: 'GET',
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            url: 'get/login.aspx',
            data: { un: user, pa: pass },
            beforeSend: function () {
                $('#loader_login').addClass('loader_ajax');
            },
            success: function (jsonMsg) {
                var result = jsonMsg.loggedIn;
                if (result == "false") {
                    //show err dialog
                }
                else {
                    //redirect to user page with username as query string
                    window.open(location.host + "/" + "User.aspx?user=" + user);

                }
            },
            complete: function () {
                $('#loader_login').removeClass('loader_ajax');
            }

        });

    }); 
```

所以在成功功能中：

```
 success: function (jsonMsg) {
        var result = jsonMsg.loggedIn;
        if (result == "false") {
            //show err dialog
        }
        else {
            //redirect to user page with username as query string
            window.open(location.host + "/" + "User.aspx?user=" + user);

        } 
```

我要去检查结果。一切都在正确的地方，但 window.open 根本不起作用！我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:17:04.777

我没有看到您打开窗口的代码的问题，因为`location.host`将返回例如`www.stackoverflow.com`然后您的完整网址将是`www.stackoverflow.com/User.aspx?user=SomeUser`并且这是一个有效的网址

所以我认为你有一个弹出窗口阻止程序阻止你新打开的窗口，因为下面的代码工作正常

```
//redirect to user page with username as query string
window.open(location.host + "/" + "User.aspx?user=" + user); 
```

# vb.net - Linq：检查字符串列是否有值（即不为空或为空）

> ID：11748139
> 
> 赞同：6
> 
> 时间：2012-07-31T20:08:10.197
> 
> 标签：vb.net, linq, dynamics-crm-2011

不确定这是否是在 Linq 中实现这一目标的最佳方式。

我正在尝试选择 CRM 2011 中的联系人记录，其中 EMailAddress1 包含一个值。我尝试的以下 WHERE 子句都导致了异常：

```
Where c.EMailAddress1 > ""

Where Not String.IsNullOrEmpty(c.EMailAddress1) 
```

所以我最终尝试了这个，这似乎工作正常：

```
Where Not c.EMailAddress1.Equals(String.Empty) _
And Not c.EMailAddress1.Equals(Nothing) 
```

但我只是不确定这是否是最有效的方法.. 它似乎不是很优雅。有没有一种更简洁的方法来检查字符串列是否有值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:54:16.033

正如[这里](http://msdn.microsoft.com/en-us/library/gg328328.aspx#limitations)所说， Linq to CRM 真的很有限。这就是你不能使用 String.IsNullOrEmpty 的原因。

但是，您应该尝试这样做：

```
Where c.EMailAddress1 IsNot Nothing 
```

当一个字段为空时，它在数据库中被设置为空（从不为空）。那么这条线应该足够你的情况了。

问候，

凯文

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:12:45.883

做就是了 ：

```
Where c.EmailAddress <> "" 
```

# javascript - 我可以强制 jQuery 使用 Sizzle 来评估选择器而不使用非标准选择器吗？

> ID：11748141
> 
> 赞同：7
> 
> 时间：2012-07-31T20:08:20.813
> 
> 标签：javascript, jquery, jquery-selectors, sizzle

在现代浏览器中，当使用有效的 CSS 选择器时，jQuery 会利用`document.querySelectorAll()`来提高性能。`document.querySelectorAll()`如果浏览器不支持选择器或方法，它会退回到 Sizzle 。

但是，在调试自定义选择器时，我希望始终使用 Sizzle 而不是本机实现。也就是说，我正在尝试实现[jQuery 不支持的 CSS3 选择器](https://stackoverflow.com/questions/11745274/what-css3-selectors-does-jquery-really-support-e-g-nth-last-child)`:nth-last-child()`之一。由于现代浏览器原生支持此选择器，因此它的工作原理与链接问题中的描述相同。不过，正是这种行为干扰了我的自定义选择器的调试，所以我想避免它。

我可以使用的一个便宜的技巧是放入一个非标准的[jQuery 选择器扩展](http://api.jquery.com/category/selectors/jquery-selector-extensions)，从而可以说“使”选择器“无效”。例如，假设 every `li:nth-last-child(2)`is [visible](http://api.jquery.com/visible-selector)，我可以简单地将其放入，将其转为：

```
$('li:nth-last-child(2)').css('color', 'red'); 
```

进入这个：

```
$('li:nth-last-child(2):visible').css('color', 'red'); 
```

这导致它始终由 Sizzle 评估。除此之外，这要求我对我的页面元素做出一个假设，这可能是真的，也可能不是。我真的不喜欢那样。更不用说，除非绝对必要，否则我一般不喜欢使用非标准选择器。

有没有办法跳过`document.querySelectorAll()`支持它的浏览器中的本机方法并强制 jQuery 使用 Sizzle 来评估选择器，最好*不*使用非标准选择器？很可能，这需要调用另一个方法而不是`$()`，但它比选择器黑客 IMO 好得多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T20:11:56.787

您可以将其设置为`null`在 jQuery 加载之前，因此它认为它不受支持：

```
document.querySelectorAll = null;
//load jquery, will trigger not supported branch
//Optionally restore QSA here (save a reference) if needed 
```

这应该使[这个](https://github.com/jquery/sizzle/blob/master/sizzle.js#L1316)评估为`false`

演示：http: [//jsbin.com/asipil/2/edit](http://jsbin.com/asipil/2/edit)

注释掉该`null`行并重新运行，你会看到它会变成红色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T20:59:20.813

既然您自己为选择器开发代码，您能否在开发周期内简单地给它一个自定义名称？也许给它你自己的供应商前缀或什么？`-bolt-nth-last-child()`

这样，你就会知道浏览器肯定不支持它，所以它应该总是使用 Sizzle。

完成开发周期后，您可以删除`-bolt-`前缀。

我知道这更像是一种解决方法，而不是问题的答案，但这对我来说似乎是最简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:14:58.363

它看起来是`jQuery.find`默认的嘶嘶声。这将使您免于通过将本机函数设置为 null 来破坏您的环境。

[https://github.com/jquery/jquery/blob/master/src/sizzle-jquery.js#L3](https://github.com/jquery/jquery/blob/master/src/sizzle-jquery.js#L3)

因此，您应该能够执行以下操作，并且它总是会发出嘶嘶声。

```
$.find('li:nth-last-child(2)') 
```

# c++ - 创建一个与字符宽度无关的函数

> ID：11748147
> 
> 赞同：2
> 
> 时间：2012-07-31T20:08:41.627
> 
> 标签：c++

我有一个 Visual Studio 2008 C++03 应用程序，我想让一个函数根据传入的字符串类型使用不同的参数执行字符串操作。

例如，如果我想（天真地）找到文件名的路径部分，如下所示：

```
template< typename Elem, typename Traits, typename Alloc >
std::basic_string< Elem, Traits, Alloc > GetFilePath( 
    const std::basic_string< Elem, Traits, Alloc >& filename )
{
    std::basic_string< Elem, Traits, Alloc >::size_type slash = 
        filename.find_last_of( "\\/" ) + 1;
    return filename.substr( 0, slash );
} 
```

对于基于 wchar_t 的字符串，它将使用`L"\\/"`and 用于基于 char 的字符串`"\\/"`。

调用约定是这样的：

```
std::wstring pathW = GetFilePath( L"/Foo/Bar/Baz.txt" );

std::string pathA = GetFilePath( "/Foo/Bar/Baz.txt" ); 
```

有人可以建议如何为此目标修改上述功能吗？（是的，我意识到我可以有两个重载`GetFilePath`名称的函数。如果可能的话，我想避免这种情况。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:16:43.983

为路径分隔符和您感兴趣的任何其他内容创建一个特征类：

```
template<typename Elem> struct PathTraits { static const Elem *separator; };
template<> const char *PathTraits<char>::separator = "\\/";
template<> const wchar_t *PathTraits<wchar_t>::separator = L"\\/"; 
```

然后在你的函数模板中你可以使用`find_last_of(PathTraits<Elem>::separator)`.

# macos - Snap Web 框架和 OSX 路径

> ID：11748148
> 
> 赞同：1
> 
> 时间：2012-07-31T20:08:44.330
> 
> 标签：macos, haskell, yesod, haskell-snap-framework

前言：OSX 开发新手。

cabal install snap——这很好用。

当我在终端中键入 snap 时，没有任何反应。如何在 OSX 中将我的快照路径导出到我的 $PATH？

同样的事情发生在 happstack 和 yesod 上......它们也都安装了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:11:36.850

只需执行（在终端中）：

```
export PATH="$HOME/.cabal/bin:$PATH" 
```

要使其永久化，请将该行添加到`.profile`主目录中的隐藏文件中并重新登录。您可以`~/.profile`使用`open ~/.profile`. 这也可以通过终端中的这一行来完成：

```
echo 'export PATH="$HOME/.cabal/bin:$PATH"' >> ~/.profile 
```

# android - 消除地图叠加层中的标记冲突

> ID：11748150
> 
> 赞同：2
> 
> 时间：2012-07-31T20:09:03.497
> 
> 标签：android, android-mapview, google-maps-markers, hierarchical-clustering

我需要解决在地图上标记数千个项目的问题，即使用户缩小，标记也会以令人困惑的方式重叠。这是一个 Android `MapView`，但我的问题更笼统。

我知道[Fluster](https://sourceforge.net/projects/fluster/)、[基于网格的方案](https://stackoverflow.com/questions/6989524/android-mapview-merging-overlapping-markers-into-a-new-marker)和各种启发式方法。

这些算法似乎不准确，因为聚类标记与质心不对应。我的应用程序对安全至关重要，并且标记相当大，因此近似值不够好。

在我发明了一种算法后，我了解到它是在 80 年代首次使用的。它的正确描述是[“凝聚层次几何质心聚类”。](http://www.cs.duke.edu/~edels/Papers/1984-J-05-HierarchicalClustering.pdf) 伪代码如下：

```
-- Greedy hierarchical clustering
given R the clearance radius of markers 
let S be a set, initially singleton clusters containing exactly one marker each
loop
  let <a,b> be the pair of clusters in S with closest centroids, distance d apart; (1)
  if d >= 2R, exit the loop;
  remove a and b from S;
  insert new Cluster(a union b) into S;
end loop; 
```

现在在每个簇的中心绘制一个标记。

我使用了可更新的 Delaunay 三角剖分和优先级队列来提高 (1) 的效率，但最近发现*删除*的 kd-trees也可以工作。DT 算法与 kd-trees（O(n log n) 平均值）具有相同的渐近复杂度，但我的猜测是它在实践中会更快。

问题：

*   是否有更好的算法来查找集群？贪心算法可以产生比按最小数量分离标记严格需要的更少的集群。找到最大的集合可能是 NP 困难的。有比贪婪更好的启发式方法吗？
*   是否值得尝试使用 kd-tree 代替 Delaunay 三角测量？DT 在 10,000 个节点上的性能在快速平板电脑上是微不足道的：缩放后最多 2 秒。
*   是否存在将标记放置在集群质心的现有软件包？

# authorize.net - 带有 ActiveMerchant 的 Authorize.Net 在生产模式下不起作用

> ID：11748151
> 
> 赞同：2
> 
> 时间：2012-07-31T20:09:12.493
> 
> 标签：authorize.net, activemerchant

在开发模式下一切正常！虚假交易成功，我从 Authorize.Net 获得了收据。但是当我在生产中使用真实的登录 ID 和事务密钥时，它不起作用。我打电话给 Authorize.Net，他们说交易从来没有打到他们的系统，并说我需要发布到他们的实时 url 而不是测试 url。我遵循了其他网站的教程，但没有人告诉我为 Authorize.Net 设置 url。

这是我的`production.rb`

```
ActiveMerchant::Billing::Base.mode = :production

::GATEWAY = ActiveMerchant::Billing::AuthorizeNetGateway.new(
  :login    => HADEAN_CONFIG['authnet']['login'],
  :password => HADEAN_CONFIG['authnet']['password'],
  :test     => false
) 
```

和`orders_controller.rb`

```
def update
@order = session_admin_order
@order.ip_address = request.remote_ip

@credit_card ||= ActiveMerchant::Billing::CreditCard.new(cc_params)

address = @order.bill_address.cc_params

if @order.complete?
  #CartItem.mark_items_purchased(session_cart, @order)
  session_admin_cart.mark_items_purchased(@order)
  flash[:error] = I18n.t('the_order_purchased')
  redirect_to admin_history_order_url(@order)
elsif @credit_card.valid?
  if response = @order.create_invoice(@credit_card,
                                      @order.credited_total,
                                      {:email => @order.email, :billing_address=> address, :ip=> @order.ip_address },
                                      @order.amount_to_credit)
    if response.succeeded?
      ##  MARK items as purchased
      #CartItem.mark_items_purchased(session_cart, @order)
      @order.remove_user_store_credits
      session_admin_cart.mark_items_purchased(@order)
      order_completed!
      Notifier.order_confirmation(@order, invoice).deliver rescue puts( 'do nothing...  dont blow up over an email')
      redirect_to admin_history_order_url(@order)
    else
      form_info
      flash[:error] =  [I18n.t('could_not_process'), I18n.t('the_order')].join(' ')
      render :action => "show"
    end
  else
    form_info
    flash[:error] = [I18n.t('could_not_process'), I18n.t('the_credit_card')].join(' ')
    render :action => 'show'
  end
else
  form_info
  flash[:error] = [I18n.t('credit_card'), I18n.t('is_not_valid')].join(' ')
  render :action => 'show'
end 
```

结尾

```
private

def form_info 
```

结尾

```
def cc_params
{
      :type               => params[:type],
      :number             => params[:number],
      :verification_value => params[:verification_value],
      :month              => params[:month],
      :year               => params[:year],
      :first_name         => params[:first_name],
      :last_name          => params[:last_name]
} end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:27:47.090

尝试做这个小改动：

```
ActiveMerchant::Billing::Base.mode = :production
ActiveMerchant::Billing::AuthorizeNetCimGateway.new( 
  :login    => HADEAN_CONFIG['authnet']['login'],
  :password => HADEAN_CONFIG['authnet']['password']
) 
```

# nhibernate - 在 Fluent NHibernate 中使用具有完整性约束的 HasMany 关系上的复合 ID 进行级联删除

> ID：11748156
> 
> 赞同：3
> 
> 时间：2012-07-31T20:09:32.980
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, nhibernate-cascade

我有一个错误，无论我用多少谷歌搜索它，我都找不到修复它。我已阅读并尝试使用以下主题来解决它。这些是我发现的与我的问题最接近的：

*   [Fluent NHibernate 和集合映射](http://marekblotny.blogspot.com/2009/02/fluent-nhbernate-and-collections.html)
*   [如何在 NHibernate 中使用 CompositeId 级联保存？](https://groups.google.com/d/topic/nhusers/7M-MI8RLalg/discussion)
*   [如何映射一个客观化的多对多关系？](https://groups.google.com/d/topic/nhusers/OwyWQrsqTqc/discussion)

## 数据库架构

我的映射涉及四个表：`Member`、`Vehicle`和。`MemberVehicles``LastUsedVehicles`

*   表`Member`和`Vehicle`是应用程序中的业务对象。
*   表是一个没有额外列`MemberVehicles`的关联表 ( )。`many-to-many`这种关系没有问题。
*   表`LastUsedVehicles`有一个由 `Vehicle_uid`和组成的组合键`Member_uid`，它们是对应表的外键。该表还有一个额外的`DateLastUsed`列来存储时间戳。 **这个表的映射是我的问题。**

## 问题

当我删除 a`Member`时，我`Vehicle`还需要删除他的`LastUsedVehicles`所有工作）。

当我执行此代码时...

```
 try
    {
        using (IUnitOfWork unitOfWork = unitOfWorkFactory.Create())
        {
            Member member = nHibernateMemberRepository.GetMemberBySomeMethod(x,y)
            if (member != null)
            {
                if (nHibernateMemberRepository.Delete(unitOfWork, member))
                {
                    unitOfWork.Commit();
                }
            }
        }
    }
    catch (Exception)
    {
        throw;
    } 
```

...我收到此错误：

> System.Exception：在 UnitOfWork 期间尝试提交失败；由于以下错误，事务被回滚：字典中不存在给定的键。----> System.Collections.Generic.KeyNotFoundException ：字典中不存在给定的键。

`LastUsedVehicles`当表为空时，我没有收到错误消息。

## 映射

### 成员

```
public class MemberMap : ClassMap<Member>
{
    public MemberMap()
    {
        Table("member");

        HasManyToMany<Vehicle>(x => x.Vehicles) // working fine
            .Table("member_vehicles")
            .ParentKeyColumn("MEMBER_UID")
            .ChildKeyColumn("VEHICLE_UID")
            .Inverse()
            .Cascade.SaveUpdate()
            .Cascade.AllDeleteOrphan();

        HasMany(x => x.LastUsedVehicleses)
            //.Table("LASTUSED_VEHICLES")
            .KeyColumn("MEMBER_UID")
            .Fetch.Select()
            //.KeyColumns.Add("VEHICLE_UID")
            //.KeyColumns.Add("MEMBER_UID")
            .Inverse()
            .Cascade.AllDeleteOrphan();
    }
} 
```

### 车辆

```
 public class VehicleMap : ClassMap<Vehicle>
    {
        public VehicleMap()
        {
            Table("vehicles");

            HasManyToMany(x => x.Members) // working fine
                .Table("member_vehicles")
                .ParentKeyColumn("VEHICLE_UID")
                .ChildKeyColumn("MEMBER_UID")
                .Not.LazyLoad()
                .Cascade.SaveUpdate();

            HasMany(x => x.LastUsedVehicles)
                .KeyColumn("VEHICLE_UID")
                .Inverse()
                .Fetch.Select()
                .Cascade.AllDeleteOrphan();

        }
    } 
```

### 最后使用的车辆

```
 public class LastUsedVehiclesMap : ClassMap<LastUsedVehicles>
    {
        public LastUsedVehiclesMap()
        {
            Table("lastused_vehicles");

            CompositeId()
                .KeyReference(x => x.Vehicle, "VEHICLE_UID")
                .KeyReference(x => x.Member, "MEMBER_UID");

            Map(x => x.DateLastUsed)
                .Column("DATELASTUSED")
                .Not.Nullable();

            // Things that I tried
            //References(x => x.Member)
            //    .Fetch.Select()
            //    .Cascade.None()
            //    .Column("MEMBER_UID");
            //
            //References(x => x.Vehicle)
            //    .Fetch.Select()
            //    .Cascade.None()
            //    .Column("VEHICLE_UID");

            //Version(x => x.DateLastUsed)
            //    .Column("DATELASTUSED")
            //    .Not.Nullable();

        }
    } 
```

## 课程

### 成员

```
public class Member : PrimaryKeyBase
{
    private readonly Iesi.Collections.Generic.ISet<Vehicle> _vehicles;
    private Iesi.Collections.Generic.ISet<LastUsedVehicles> _lastUsedVehicles;

    public Member()
    {
        _vehicles = new HashedSet<Vehicle>();
        _lastUsedVehicles = new HashedSet<LastUsedVehicles>();
    }

    // ... GetHashCode ...

    public virtual Iesi.Collections.Generic.ISet<Vehicle> Vehicles
    {
        get { return _vehicles; }
    }

    public virtual void AddVehicle(Vehicle vehicle)
    {
        vehicle.AddMember(this);
        _vehicles.Add(vehicle);
    }

    public virtual Iesi.Collections.Generic.ISet<LastUsedVehicles> LastUsedVehicleses
    {
        get { return _lastUsedVehicles; }
        set { _lastUsedVehicles = value; }
    }
} 
```

### 车辆

```
public class Vehicle : PrimaryKeyBase
{
    private Iesi.Collections.Generic.ISet<Member> _members;
    private Iesi.Collections.Generic.ISet<LastUsedVehicles> _lastUsedVehicles;

    public Vehicle()
    {
        _members = new HashedSet<Member>();
        _lastUsedVehicles = new HashedSet<LastUsedVehicles>();
    }

    public virtual Member Member
    {
        get { return _members.FirstOrDefault(); }
    }

    public virtual IEnumerable<Member> Members
    {
        get { return _members; }
    }

    public virtual void AddMember(Member member)
    {
        _members.Add(member);
    }

    public virtual void AddLastUsedVehicle(LastUsedVehicles lastUsedVehicles)
    {
        lastUsedVehicles.Vehicle = this;
        lastUsedVehicles.Member = this.Member;
        _lastUsedVehicles.Add(lastUsedVehicles);
    }

    public virtual void ClearLastUsedVehicles()
    {
        _lastUsedVehicles.Clear();
    }

    public virtual LastUsedVehicles LastUsedVehicle
    {
        get { return _lastUsedVehicles.FirstOrDefault(); }
    }

    public virtual IEnumerable<LastUsedVehicles> LastUsedVehicles
    {
        get { return _lastUsedVehicles; }
    }
} 
```

### 最后使用的车辆

```
 public class LastUsedVehicles : CompositeKeyBase
    {
        public virtual Vehicle Vehicle { get; set; }
        public virtual Member Member { get; set; }
        public virtual DateTime DateLastUsed { get; set; }

        public virtual bool Equals(LastUsedVehicles other)
        {
            if (ReferenceEquals(null, other)) return false;
            if (ReferenceEquals(this, other)) return true;
            return Equals(other.Vehicle, Vehicle) && Equals(other.Member, Member);
        }

        public override bool Equals(object obj)
        {
            if (ReferenceEquals(null, obj)) return false;
            if (ReferenceEquals(this, obj)) return true;
            if (obj.GetType() != typeof(LastUsedVehicles)) return false;
            return Equals((LastUsedVehicles)obj);
        }

        public override int GetHashCode()
        {
            unchecked
            {
                return ((Vehicle != null ? Vehicle.GetHashCode() : 0) * 397)
                    ^ Member.GetHashCode()
                    ^ DateLastUsed.GetHashCode();
            }
        }

    } 
```

## 调试信息

为了更清楚，我还附上了一些 SQL 查询及其结果。

```
// Delete a member
delete from member m where account = 'X'; // FAIL - Child record found - The member has vehicles - So makes sense

// Delete all vehicles from a member from vehicles table
delete from vehicles mv where mv.vehicle_uid =
(select mv.vehicle_uid from member_vehicles mv where member_uid = (
select mm.member_uid from member mm where account = 'X')); //

// Delete all vehicles from a member from association table
delete from member_vehicles mv where member_uid = (
select mm.member_uid from member mm where account = 'X');

// Delete data on LASTUSED_VEHICLES - works
delete from LASTUSED_VEHICLES lv
where lv.vehicle_uid =
  (select mv.vehicle_uid from membervehicles mv where member_uid = (
          select mm.member_uid from member mm where account = 'X')); 
```

一旦表`LASTUSED_VEHICLES`为空，我可以删除一个成员。

* * *

很抱歉帖子的长度，但这种情况似乎很独特。感谢您的关注。

# redis - Redis 主从读取和故障转移

> ID：11748158
> 
> 赞同：2
> 
> 时间：2012-07-31T20:09:37.693
> 
> 标签：redis

我目前正在使用两个 redis 节点，其中一个正在复制另一个。除此之外，我尝试在 google/redis 文档中搜索清晰的方法，让我的 Ruby on Rails 应用程序将读取发送到从站并写入到主站。故障转移的提示也很棒。我不确定这是否是运行 Redis 的标准方式，以及我是否以错误的方式看待它。我试图解决的两个问题只是冗余和更高的吞吐量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:53:50.570

阅读“redis sentinel”的文档，这是一个新的监控和故障转移解决方案。

# jaxb - JAXB - 将根元素表示为自定义类型列表

> ID：11748159
> 
> 赞同：1
> 
> 时间：2012-07-31T20:09:45.293
> 
> 标签：jaxb

类似于在 Stackoverflow 上提出的这个问题，[使用 JAXB 将列表表示为根元素](https://stackoverflow.com/questions/4729385/using-jaxb-to-represent-a-list-as-the-root-element)，我有同样的问题。尽管答案中概述的解决方案对我不起作用。

*注意：*我正在使用 Jackson fasterxml 库进行映射。

本质上，我正在从 API（recurly api）消耗一些 XML。API 返回的其中一条消息的根元素为列表，演示如下所示：

```
<plans type="array">
    <plan href="...">
    ...
    </plan>
    <plan href="...">
    ...
    </plan>
</plans> 
```

我创建了以下 Java 类 + JAXB 注释来捕获上述内容：

```
@XmlRootElement(name = "plans")
public class Plans extends RecurlyObject {

    @XmlElement(name = "plan", type = Plan.class)
    private List<Plan> plans;

    public List<Plan> getPlans() { return this.plans; }

    public void setPlans(final List<Plan> plans) { this.plans = plans; }
    ...
} 
```

这行不通。我阅读的所有文档和文章都使用字符串而不是列表元素的自定义类型进行了上述演示。

运行上述代码会产生以下错误：

原因：com.fasterxml.jackson.databind.JsonMappingException：无法
从 JSON 字符串实例化类型 [简单类型，com.ning.billing.recurly.model.Plan] 类型的值；没有单字符串构造函数/工厂方法（通过引用链：com.ning.billing.recurly.model.Plans["plan"]）

我还尝试了以下方法 - 但产生了类似的问题：

```
@XmlRootElement(name = "plans")
public class Plans extends RecurlyObject {
    @XmlTransient
    public static final String PLANS_RESOURCE = "/plans";

    @XmlElementWrapper(name = "plans")
    @XmlElement(name = "plan", type = Plan.class)
    private List<Plan> plans;

    public List<Plan> getPlans() { return this.plans; }

    public void setPlans(final List<Plan> plans) { this.plans = plans; }
    ...
} 
```

唯一能让我不出错的方法是，如果我在我的 Plan 类上创建一个接受 String 的 ctor。但是我`List<Plan>`是一个计划对象的列表，一个用于所有计划的每个子节点:(

顺便说一句 - Plan Java 类工作正常 - 我用它来接收来自其他 API 调用的单个 Plan 消息。

那么，任何想法如何使用 JAXB 正确地将作为字符串以外的事物列表的根元素映射到 Java 对象中？

干杯

**更新**

以下解决方案由[Pierre](https://github.com/pierre)在 stackoverflow 之外提供。

可以使它与杰克逊一起使用，请参见以下代码：

```
@XmlRootElement(name = "plans")
public class Plans extends RecurlyObjects<Plan> {
} 
```

需要注意的重要细节是`extends RecurlyObjects<Plan>`。`RecurlyObjects`本质上是一个`ArrayList`.

```
@JsonIgnoreProperties(ignoreUnknown = true)
public abstract class RecurlyObjects<T extends RecurlyObject> extends ArrayList<T> {
} 
```

这现在工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:01:38.500

默认情况下，您应该注释该属性。我已尽可能简化您的映射。

```
package forum11748159;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Plans extends RecurlyObject {

    private List<Plan> plans;

    @XmlElement(name = "plan")
    public List<Plan> getPlans() { return this.plans; }

    public void setPlans(final List<Plan> plans) { this.plans = plans; }

} 
```

如果要注释字段，则需要将`@XmlAccessorType(XmlAccessType.FIELD)`注释添加到类中：

```
package forum11748159;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "plans")
@XmlAccessorType(XmlAccessType.FIELD)
public class Plans extends RecurlyObject {

    @XmlElement(name = "plan")
    private List<Plan> plans;

    public List<Plan> getPlans() { return this.plans; }

    public void setPlans(final List<Plan> plans) { this.plans = plans; }

} 
```

* * *

> 注意：我正在使用 Jackson fasterxml 库进行映射。

Jackson 为 JAXB 注释提供了一些支持，但据我所知，这不是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)兼容的实现。不保证根据规范解释 JAXB 注释。

# jquery - WordPress 中的 HTML5 pushState()

> ID：11748162
> 
> 赞同：2
> 
> 时间：2012-07-31T20:09:57.430
> 
> 标签：jquery, ajax, html, wordpress, pushstate

我正在尝试为 wordpress 网站实现 pushstate 并遇到一些真正的麻烦

我试过使用这些

当我使用 [http://html5.gingerhost.com/](http://html5.gingerhost.com/) = 我得到错误

```
GET http://wwww.mydomain.com/content.php?format=json

404 Not Found
        487ms   
jquery.min.js (line 4)

"NetworkError: 404 Not Found - http://www.mydomain.com/content.php?format=json" 
```

这两种方法向我展示了整个页面！而不是指定部分

1.  [http://tinywall.info/2012/02/22/change-browser-url-without-page-reload-refresh-with-ajax-request-using-javascript-html5-history-api-php-jquery-like- facebook-github-导航菜单/](http://tinywall.info/2012/02/22/change-browser-url-without-page-reload-refresh-with-ajax-request-using-javascript-html5-history-api-php-jquery-like-facebook-github-navigation-menu/)

2.  [http://www.franckmaurin.com/how-to-use-html5-history-with-wordpress-jquery/](http://www.franckmaurin.com/how-to-use-html5-history-with-wordpress-jquery/)

我是否错过了与 wordpress 相关的内容？

我的导航看起来像这样

```
 <ol class="primary-nav">  
        <li class="page_item"><a href="http://www.mydomain.com/charities">/&nbsp;Charities</a></li>
        <li class="page_item"><a href="http://www.mydomain.com/contact">/&nbsp;Contact</a></li>
        <li class="page_item"><a href="http://www.mydomain.com/join-us">/&nbsp;Join us</a></li>
        <li class="page_item"><a href="http://www.mydomain.com/news">/&nbsp;News</a></li>
        <li class="page_item"><a href="http://www.mydomain.com/who-we-are">/&nbsp;Who we are</a></li>
    </ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:16:14.633

我用这个方法解决了

[http://www.franckmaurin.com/how-to-use-html5-history-with-wordpress-jquery/](http://www.franckmaurin.com/how-to-use-html5-history-with-wordpress-jquery/)

问题是 ajax 请求请求整个 html 而不是特定数据

所以我改变了

```
 $(this).html(data).fadeTo('fast', 1); 
```

至

```
 $(this).html($(data).find('#main').html()).fadeTo('fast', 1); 
```

或者

```
 var requiredElement = $(data).find('#main').html()

  $(this).html(requiredElement).fadeTo('fast', 1); 
```

# javascript - Ember.js 和 jQuery 可排序。如何解决变形脚本

> ID：11748164
> 
> 赞同：10
> 
> 时间：2012-07-31T20:10:12.863
> 
> 标签：javascript, jquery, jquery-ui, ember.js, jquery-ui-sortable

我有一个 ember.js 应用程序，我想在它上面使用 jquery ui 的可排序小部件。我的观点看起来像

```
<ul id="sort-container">
{{#each content}}
    <li>{{title}}</li>
{{/each}}
</ul> 
```

排序工作正常，直到其中一个绑定需要更新。问题是每个`<li>`都被 ember 臭名昭著的变形`<script>`标签包围。查看此图像中生成的实际 DOM

![DOM](../Images/884300a5474fe5c5d32a4c280c5332d8.png)

有没有一种*简单*的方法可以让这两个很好地一起玩？

有没有办法强制视图重新绘制？`deactivate`在触发可排序事件后，我可以轻松实现这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-31T22:08:43.507

在我看来，使用 Ember.CollectionView 可以解决这个问题。所以我试了一下。它似乎工作：http: [//jsfiddle.net/8ahjd/](http://jsfiddle.net/8ahjd/)

车把：

```
<script type="text/x-handlebars">
  {{view App.JQuerySortableView content=model}}
  <a {{action removeItem}}>Remove Second Item</a>
</script>

<script type="text/x-handlebars" data-template-name='jquery-sortable-item'>
  {{view.content.title}}
</script> 
```

javascript:

```
App = Ember.Application.create();

App.ApplicationController = Ember.ArrayController.extend({
  removeItem: function() {
    this.removeAt(1);        
  }            
});

App.ApplicationRoute = Ember.Route.extend({
  model: function() {
    return [
      {id: 1, title:'Test 1'},
      {id: 2, title:'Test 2'},
      {id: 3, title:'Test 3'}
    ];
  }
});

App.JQuerySortableItemView = Ember.View.extend({
    templateName: 'jquery-sortable-item'        
});

App.JQuerySortableView = Ember.CollectionView.extend({
    tagName: 'ul',
    itemViewClass: App.JQuerySortableItemView, 

    didInsertElement: function(){
        this._super();
        this.$().sortable().disableSelection();
    }
}); 
```

​</p>

# c# - 遇到 XNA 和 Keyboard.GetState() 问题或任何其他键盘问题？

> ID：11748166
> 
> 赞同：1
> 
> 时间：2012-07-31T20:10:31.173
> 
> 标签：c#, xna

我在使用 Keyboard.GetState() 和 .IsKeysDown() 时遇到问题。他们根本行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:10:31.173

如果您有 Synergy，那么它可能是问题之一。

我相信它会清除键盘输入缓存或类似的东西，因此当您再次轮询硬件时，Windows 没有任何击键可识别。

所以在 XNA 中调试时，禁用 Synergy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:26:00.357

听起来您可能遇到了几个问题。由于其他新开发人员在寻求键盘输入帮助时可能会发现这个问题，因此我将尝试涵盖这两个问题。

1) Keyboard.GetState() 返回当前正在按住哪些键的快照。KeyboardState.IsKeyDown() 不识别击键。它只是告诉您当前正在按下哪些键。由于这种工作方式，最好在尝试使用之前存储键盘状态。

2）在您的更新循环中，您将要存储当前的键盘状态：

```
KeyboardState newKeyboardState = Keyboard.GetState(); 
```

现在您可以检查是否发生了按键操作。A key press 意味着一个键曾经是按下的，现在是向上的：

```
if(previousKeyboardState.IsKeyDown(Keys.A && !newKeyboardState.IsKeyDown(Keys.A)) {
    Console.Out.WriteLine("Keystroke: A");
} 
```

最后，保存当前状态，以便稍后检查：

```
previousKeyboardState = newKeyboardState; 
```

# python - Python中交互式会话和脚本的不一致行为

> ID：11748169
> 
> 赞同：0
> 
> 时间：2012-07-31T20:10:38.550
> 
> 标签：python, import, interactive

当我运行脚本时，我有这个 ImportError：

```
$ python ~/Dropbox/code/py/ZoteroFindOrphanedFiles.py 
Traceback (most recent call last):
  File "/home/zane/Dropbox/code/py/ZoteroFindOrphanedFiles.py", line 1, in <module>
    import sqlite3
  File "/usr/lib/python3.2/sqlite3/__init__.py", line 23, in <module>
    from sqlite3.dbapi2 import *
  File "/usr/lib/python3.2/sqlite3/dbapi2.py", line 23, in <module>
    import datetime
  File "/usr/lib/python3.2/datetime.py", line 20, in <module>
    import math as _math
  File "/home/zane/Dropbox/code/py/math.py", line 3, in <module>
    from nzmath.rational import Integer, Rational
ImportError: No module named nzmath.rational 
```

但是在运行交互式会话时我没有它：

```
$ python
Python 3.2.3 (default, Apr 23 2012, 23:14:44) 
[GCC 4.7.0 20120414 (prerelease)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
>>> 
```

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:13:31.653

这是问题所在：

```
 import math as _math
File "/home/zane/Dropbox/code/py/math.py", line 3, in <module> 
```

您有自己的名为 的模块`math.py`，但这与同名的标准 Python 模块相同。不建议这样做。

解决方案是将您重命名`math.py`为其他名称，并且不要忘记*删除*同一`math.pyc`目录中的（否则您仍然会遇到同样的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:13:23.430

您有一个 `/home/zane/Dropbox/code/py/math.py` 正在导入的本地文件，而不是标准的 lib`math`模块。

解决方案是将您的名称重命名`/home/zane/Dropbox/code/py/math.py`为其他名称。

当您在`/home/zane/Dropbox/code/py`目录中调用脚本时会出现问题，因为这会将此目录添加到开头，`sys.path`因此当 Python 尝试导入模块时会首先搜索此目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:13:24.577

您在脚本目录中调用了一个文件`math.py`，这会影响 stdlib`math`模块。重命名文件。

# c# - 对派生类使用非泛型基类集合？

> ID：11748174
> 
> 赞同：2
> 
> 时间：2012-07-31T20:10:53.737
> 
> 标签：c#, c#-4.0, collections

嗯，很难用语言来解释。所以这里有一个例子。在 SDL .NET API 中，有一个名为的类`SpriteCollection`，它被设计为……嗯……精灵的集合。然而问题在于，出于某种原因，开发人员决定不制作`SpriteCollection`通用类，如 .NET`List<>`类。所以，我想，它只能与`Sprite`继承自的类或其他类一起使用`Sprite`？无论如何，假设我`Tile`来自`Sprite`. 我向它添加了两个新属性：

```
class Tile : Sprite
{

    public Tile(char symbol = default(char), bool solid = true)
    {
        Symbol = symbol;
        Solid = solid;
    }

    public char Symbol
    {
        get;
        set;
    }

    public bool Solid
    {
        get;
        set;
    }
} 
```

现在，我怎样才能使用`SpriteCollection`with `Tile`s 并且仍然能够使用`Tile`独占属性`Solid`？

一个（可能是愚蠢的）解决方案可能是这样的：

```
Tile t = (Tile) myCollection[i];
if (t.Solid) { ... } 
```

有没有更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:14:27.553

您提出的将返回值转换为`SpriteCollection`to`Tile`的建议就是这样做的方法。如果您需要使用提供的集合类并且无法更改它，那么您没有更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:19:34.060

如果您想在迭代时避免强制转换，您可以覆盖 GetEnumerator 方法。

```
public class TileList: SpriteList {

    public new IEnumerator<Tile> GetEnumerator()
    {
        foreach (var tile in GetBase())
        {
            if (tile is Tile)
            {
                yield return tile as Tile;
            }
        }
    }

    protected SpriteList GetBase()
    {
        return (SpriteList )this;
    }
} 
```

（这当然会强制转换，但它会将强制转换封装在枚举器中。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:12:50.533

> 现在，我怎样才能将 SpriteCollection 与 Tiles 一起使用，并且仍然能够使用像 Solid 这样的 Tile 专有属性？

你可以通过某种形式的演员来做到这一点。您的方法有效，尽管我个人会使用：

```
Tile t = myCollection[i] as Tile;
if (t != null)
{
    if (t.Solid) { ... }
} 
```

这使您可以`Tile`安全地将实例以及其他精灵添加到集合中。

如果您使用泛型类，例如`List<Sprite>`. 这将允许您使用任何子`Sprite`类，而不仅仅是`Tile`. 为了在不进行强制转换的情况下获得类型安全的集合，您必须使用`List<Tile>`，这将限制您在集合中仅使用图块，而不是其他精灵。

# android - OpenglES 2.0 PNG alpha纹理重叠

> ID：11748176
> 
> 赞同：3
> 
> 时间：2012-07-31T20:11:00.230
> 
> 标签：android, opengl-es, textures, alpha, overlap

我正在尝试在屏幕上绘制多个具有 alpha 通道的六边形。图像是这样的：

![http://img834.imageshack.us/img834/571/hexagon.png](../Images/87506317d6164e6c99343a6216ffa7cd.png)

所以，我将纹理加载到程序中，这没关系。当它运行时，alpha 通道与背景颜色混合，这没关系，但是当两个六边形相互重叠时，重叠的部分就变成了背景的颜色！图片下方：

![http://img259.imageshack.us/img259/213/20120731163847.png](../Images/78c6077df2b6ee69d6fd48ffc1306190.png)

当然，这不是我所期望的效果。我希望它们重叠而不会将这个背景绘制在另一个纹理上。这是我的绘图代码：

```
 GLES20.glUseProgram(Program);

    hVertex  = GLES20.glGetAttribLocation(Program,"vPosition");
    hColor   = GLES20.glGetUniformLocation(Program, "vColor");
    uTexture = GLES20.glGetUniformLocation(Program, "u_Texture");
    hTexture = GLES20.glGetAttribLocation(Program, "a_TexCoordinate");
    hMatrix  = GLES20.glGetUniformLocation(Program, "uMVPMatrix");

    GLES20.glVertexAttribPointer(hVertex, 3, GLES20.GL_FLOAT, false, 0, bVertex);
    GLES20.glEnableVertexAttribArray(hVertex);
    GLES20.glUniform4fv(hColor, 1, Color, 0);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, hTexture);
    GLES20.glUniform1i(uTexture, 0);
    GLES20.glVertexAttribPointer(hTexture, 2, GLES20.GL_FLOAT, false, 0, bTexture);
    GLES20.glEnableVertexAttribArray(hTexture);

    GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE_MINUS_SRC_ALPHA);
    GLES20.glEnable(GLES20.GL_BLEND);

    x=-1;y=0;z=0;
    for (int i=0;i<10;i++) {
        Matrix.setIdentityM(ModelMatrix, 0);
        Matrix.translateM(ModelMatrix, 0, x, y, z);
        x+=0.6f;
        Matrix.multiplyMM(ModelMatrix, 0, ModelMatrix, 0, ProjectionMatrix, 0);
        GLES20.glUniformMatrix4fv(hMatrix, 1, false, ModelMatrix, 0);
        GLES20.glDrawElements(GLES20.GL_TRIANGLES, DrawOrder.length, GLES20.GL_UNSIGNED_SHORT, bDrawOrder);
    }

    GLES20.glDisable(GLES20.GL_BLEND);
    GLES20.glDisableVertexAttribArray(hVertex);
} 
```

我的片段着色器：

```
public final String fragmentShaderCode =
        "precision mediump float;" +
        "uniform vec4 vColor;" +
        "uniform sampler2D u_Texture;" +
        "varying vec2 v_TexCoordinate;" +
        "void main() {" +
        "  gl_FragColor = vColor * texture2D(u_Texture, v_TexCoordinate);" +
        "}"; 
```

和我的渲染器代码：

```
 super(context);
    setEGLContextClientVersion(2);
    getHolder().setFormat(PixelFormat.TRANSLUCENT);
    setEGLConfigChooser(8, 8, 8, 8, 8, 8);
    renderer = new GLRenderer(context);
    setRenderer(renderer); 
```

我已经尝试在 glBlendFunc 上使用不同的功能，但似乎没有任何效果。有谁知道问题出在哪里？我真的迷路了..如果需要更多代码，请询问！

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:58:39.580

我的猜测是你需要在绘制这些时禁用深度测试。由于它们都出现在相同的深度，当你绘制最左边的环时，它会写入四边形中每个像素的深度缓冲区，甚至是透明的像素。

然后，当您向右绘制下一个四边形时，重叠的像素不会被绘制，因为它们未通过深度测试，因此您只会得到一个与第一个四边形相交的空白区域。

# powershell - 努力提取正则表达式组匹配

> ID：11748182
> 
> 赞同：1
> 
> 时间：2012-07-31T20:11:22.713
> 
> 标签：powershell

我为自己设定了一个仿照[LINQPad 挑战](http://www.linqpad.net/Challenge.aspx)的“PowerShell 挑战”，并且很早就经常绊倒。

我正在尝试编写一个简单的脚本来从 Visual Studio 解决方案中的项目文件中提取 TargetFrameworkVersion 元素，以确认项目始终使用单一版本的框架。元素匹配以下 XY={2.0,3.0,4.0,4.5}

```
<TargetFrameworkVersion>vX.Y</TargetFrameworkVersion> 
```

我做到了这一点：

```
Get-ChildItem -Recurse -Filter *.csproj | Select-String -Pattern "<TargetFrameworkVersion>(?<version>v[2-4].[05])</TargetFrameworkVersion" | ForEach {$_.Matches} 
```

在很大程度上要感谢ryant的[这个回答，但在如何获取“版本”小组赛方面却步履蹒跚。](https://stackoverflow.com/a/7363134/609290)到目前为止，结果似乎是正确的：

```
Groups   : {<TargetFrameworkVersion>v4.0</TargetFrameworkVersion, v4.0}
Success  : True
Captures : {<TargetFrameworkVersion>v4.0</TargetFrameworkVersion}
Index    : 4
Length   : 52
Value    : <TargetFrameworkVersion>v4.0</TargetFrameworkVersion 
```

但我试图抓住“版本”（或接近它）失败了：

```
$_.Matches["version"]
$_.Matches.Groups
$_.Matches | Select-Object Groups 
```

我的问题是**如何获取“版本”匹配组？**

我尝试了我认为更简单的变体，并且按预期工作：

```
"<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>" -match "<TargetFrameworkVersion>(?<version>v[2-4].[05])</TargetFrameworkVersion>"
$Matches["version"] 
```

谢谢！

更新：

我接受了 EBGreen 的建议（谢谢！）并开始使用 XML/XPath。在 stej 的[帮助下](https://stackoverflow.com/a/2493554/609290)，我成功了：

```
$ns = @(defaultNamespace = "http://schemas.microsoft.com/developer/msbuild/2003" }
Get-ChildItem -Recurse -Filter *.csproj | Select-Xml -xpath '//defaultNamespace:PropertyGroup/defaultNamespace:TargetFrameworkVersion' -namespace $ns | Select-Object -expand Node 
```

**在使用非 XML 文件时**，我仍然想了解我在 RegEx 代码中做错了什么。****

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:39:14.873

.NET 正则表达式对象模型使用集合的集合。将您的最终 Foreach 修改为：

```
... | Foreach {$_.Matches | Foreach {$_.Groups["version"].Value}} 
```

顺便说一句，我同意 EBGreen，您想为此使用 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:16:16.590

同意 EBGreen 和 Keith 关于使用 XML

```
$xml = get-content "myproj.vcxproj"
(([xml]$xml).Project.PropertyGroup | ? {$_.Label -eq 'Globals'}).TargetFrameworkVersion 
```**

# python - 响应子进程提示的python脚本

> ID：11748190
> 
> 赞同：-2
> 
> 时间：2012-07-31T20:11:47.187
> 
> 标签：python, macos, subprocess, popen

我已经查看并尝试了许多不同形式的打开子流程并在流程打开后对出现的提示编写响应。调用“chpass”进程并相应地回答提示的最基本方法是什么，这是在 Mac OS X 服务器上。

每种打开进程的方式都会导致脚本不回答提示。

我尝试了以下变化：

```
pc = Popen(['chpass',name],stdin=PIPE)
pc.communicate(oldpassword)
pc.write(oldpassword)
pc.stdin.write(oldpassword) 
```

可能我根本不知道如何正确使用它，也许有一个非常基本的教程，其中有一个运行诸如 chpass bash 命令之类的进程并能够向其写入命令的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:13:27.087

你需要的是`pexpect`模块。

使用示例：

```
 child = pexpect.spawn('scp foo myname@host.example.com:.')
 child.expect ('Password:')
 child.sendline (mypassword) 
```

当然，`scp`您必须写下您运行的命令的名称。

# html - 是否可以使滚动条位置：绝对？

> ID：11748191
> 
> 赞同：3
> 
> 时间：2012-07-31T20:11:52.617
> 
> 标签：html, css

如果您已经创建了一个动态页面，您可能会注意到，如果您从不需要滚动条的页面高度开始，然后动态添加内容，则会出现滚动条。当它执行此操作时，它会将我的所有内容“推”到滚动条宽度的左侧，并且页面上的所有内容似乎都有一点跳跃。

是否可以使滚动条的行为就好像它是绝对位置一样，这样它就不会将我的内容全部向左推，而是覆盖在内容上。我不喜欢内容全部“跳”到左边的方式；它看起来很讨厌。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-02T12:20:35.183

您可以使用它`overflow: overlay`来避免您的内容被推送，它所做的不是占用您的容器空间，而是将滚动条定位到您的内容顶部

```
 .overlay {
      width: 100px;
      height: 100px;
      overflow: overlay;
    }

    .auto {
      width: 100px;
      height: 100px;
      overflow: auto;  
    }

<h2>scrollbar on content</h2>
<div class="overlay">
  <div class="scrollbox-content">Hover me! Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere velit, repellat voluptas ipsa impedit fugiat voluptatibus. Facilis deleniti, nihil voluptate perspiciatis iure adipisci magni, nisi suscipit aliquam, quam, et excepturi! Lorem
    ipsum dolor sit amet, consectetur adipisicing elit. Facere velit, repellat voluptas ipsa impedit fugiat voluptatibus. Facilis deleniti, nihil voluptate perspiciatis iure adipisci magni, nisi suscipit aliquam, quam, et excepturi!</div>
</div>

<h2>scrolbar sharing space with content</h2>
<div class="auto">
  <div >Hover me! Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere velit, repellat voluptas ipsa impedit fugiat voluptatibus. Facilis deleniti, nihil voluptate perspiciatis iure adipisci magni, nisi suscipit aliquam, quam, et excepturi! Lorem
    ipsum dolor sit amet, consectetur adipisicing elit. Facere velit, repellat voluptas ipsa impedit fugiat voluptatibus. Facilis deleniti, nihil voluptate perspiciatis iure adipisci magni, nisi suscipit aliquam, quam, et excepturi!</div>
</div> 
```

具有覆盖 css 的 div 放置在溢出的 div 的顶部，但是具有自动溢出的 div 会推送数据。将其用于带有文本的容器并不是一个理想的解决方案，但我选择了文本，因此区别会很明显

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:17:55.593

你可以，但它不会是完美的。[从这篇](https://stackoverflow.com/questions/2578046/scrollbar-appear-disappear-event-in-jquery)文章中复制代码：

```
// Used like $('#my-id').hasScrollbar();

jQuery.fn.hasScrollbar = function() {
var scrollHeight = this.get(0).scrollHeight;

//safari's scrollHeight includes padding
if ($.browser.safari)
    scrollHeight -= parseInt(this.css('padding-top')) + parseInt(this.css('padding-bottom'));

if (this.height() < scrollHeight)
    return true;
else
    return false;
} 
```

您可以查询以查看滚动条是否存在。但是，在此之前，您将拥有一个全局变量，它是滚动条出现之前视口的宽度：

```
var viewportWidth = $(window).width(); 
```

运行上述函数后，您可以将其`viewportWidth`与带有滚动条的窗口的新视口宽度以及差`margin-right`的`body`负数进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:13:37.583

你所要求的无法完成。

但是，您可以强制它始终出现：

```
#id {
    overflow: scroll;
} 
```

但这太丑陋了。

# ruby-on-rails-3.1 - 尽管参数已设置，但在请求时不检索信息

> ID：11748192
> 
> 赞同：0
> 
> 时间：2012-07-31T20:11:55.410
> 
> 标签：ruby-on-rails-3.1

我正在尝试为餐厅页面添加评论部分，我使用 hidden_​​fiedd 将 传递`restauran_id`给`review#new`页面，但是当我提交评论时，它没有分配`restaurant_id`给评论并且它导致问题。

在`create`行动中`reviews_controller`我有：`@review = Review.new`。

```
Parameters: {"review"=>{"score"=>"", "email"=>"", "restaurant_id"=>"471746462", 
"first_name"=>"", "content"=>"", "last_name"=>""}, 
"utf8"=>"✓", "commit"=>"Post Review",
"authenticity_token"=>"JzCoTOWj7k2huy9GTRknz+hU4Ej/Gg+dHEHvoz2vtcA="} 
```

但是当我尝试从参数中获取餐厅时，它显示为零。

```
@restaurant = Restaurant.find_by_id(@review.restaurant_id) 
```

或者

```
@restaurant = Restaurant.find(params[:restaurant_id]) 
```

询问：

```
SELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" IS NULL LIMIT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:17:07.600

尝试：

```
@restaurant = Restaurant.find(params[review][:restaurant_id]) 
```

代替 ：

```
@restaurant = Restaurant.find(params[:restaurant_id]) 
```

如果您检查 params 哈希，您将看到它`restaurant_id`是一个嵌套参数`review`。

# c++ - C++ 从远程控制台应用程序检索内容

> ID：11748197
> 
> 赞同：0
> 
> 时间：2012-07-31T20:12:05.700
> 
> 标签：c++, console, hook, capture

**简介：** 我是一名管理员，目前在《狙击精英V2》游戏的专用服务器上工作。SEV2 的专用服务器在控制台应用程序的 Windows 下运行。我们也可以使用 wineHQ 在 Linux 下运行这个应用程序。一切都很好，除了控制台在新窗口中启动，所以没有控制台输入/输出（链接：http: [//img802.imageshack.us/img802/650/sev22.png](http://img802.imageshack.us/img802/650/sev22.png)）。此外，我们可以读取（使用 HEX 编辑器）“该程序不能在 DOS 模式下运行”。我的目标是恢复 DOS 兼容性。

我的想法是创建另一个用**C++**（使用 CodeBlocks）编写的控制台应用程序。这个“钩子”应该检索专用服务器“窗口”的内容（文本）并将其显示出来，当然也可以向专用服务器控制台输入命令。像这样，我们将能够在 Windows 和 Linux 上使用输入/输出。我花时间画了一个小架构：http: [//img195.imageshack.us/img195/3017/29585679.png](http://img195.imageshack.us/img195/3017/29585679.png)

我的问题是：*如何做到这一点？我应该使用哪些功能？*

在这一点上，我被困住了。我尝试了以下方法：

FUNC " `AttachConsole`" 失败。

以下*伪代码*也失败了：

```
mainWindow = FindWindow( TEXT("ConsoleWindowClass"), NULL) );

console = FindWindowEx( mainWindow, NULL, TEXT("ConsoleWindowClass"), NULL );

SendMessage(
  console,
  WM_GETTEXT,
  sizeof(buffer) / sizeof(TCHAR),
  (LPARAM)buffer); 
```

我正在使用一个名为“ `WinSpy++`”的工具来帮助我，但该工具本身无法检索/输入数据到*Sniper Elite V2 专用服务器*。

欢迎任何想法/示例/反思:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:27:43.157

> “此程序无法在 DOS 模式下运行”

你犯了一个错误。不要混淆术语“DOS 模式”和“控制台”。Windows 控制台不是 DOS 模式。控制台是本机终端，您可以在其中运行为控制台子系统编写的任何 32/64 位 Windows 应用程序。“DOS模式”是Windows之前的操作系统，例如DOS、TR-DOS、FreeDOS等。

至于问题，一个控制台应用程序不能同时与两个控制台一起使用。

**更新**

似乎服务器是为 GUI 子系统构建的，并使用 AllocConsole 创建控制台。

1.  使用“CreateProcess”运行服务器
2.  稍等片刻，新的控制台窗口出现。
3.  调用“FreeConsole”和“AttachConsole(ServerPID)”

**老的**

所以，如果你想从属于console_2的进程中读取console_1，你必须

1.  开始第三个过程，例如`DETACHED_PROCESS`
2.  致电`FreeConsole`（必填）和`AttachConsole(RootPidFromConsole_1)`
3.  在第三个进程和 console_2 的进程之间进行通信（管道、共享内存……）

这适用于 Windows。

# iphone - 更改边界或框架时 UIImageView 不调整大小？

> ID：11748198
> 
> 赞同：0
> 
> 时间：2012-07-31T20:12:07.240
> 
> 标签：iphone, ios, uiimageview, resize, scaling

所以我有一个自定义视图（它是一个位于键盘顶部的自定义文本视图）；但是它可以调整大小，所以我希望背景图像（其中包含 UIImage 的 UIImageView）随它缩放。下面的代码什么都不做：

```
//size of entire custom view
CGRect bFrame = self.keyboard.frame;
bFrame.origin.y += heightDifference;
bFrame.size.height += heightDifference;

//lets set frame and bounds for the uiimageview
self.keyboard.background.frame = bFrame;
self.keyboard.background.bounds = bFrame;

//I thought the lines above would work, but they didn't, trying to reset the image and change its content mode as a hack.. .still no beans.
self.keyboard.background.image = [UIImage imageNamed:@"keyboard_backgroundv1_5.png"];
self.keyboard.background.contentMode = UIViewContentModeScaleToFill; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:28:53.520

这个功能可以帮助你

```
CGSize targetSize = CGSizeMake(self.keyboard.frame.size.width, self.keyboard.frame.size.height);

self.keyboard.background.image = [self imageByScalingProportionallyToSize:targetSize ImageForConvert:[UIImage imageNamed:@"keyboard_backgroundv1_5.png"]];

-(UIImage *)imageByScalingProportionallyToSize:(CGSize)targetSize ImageForConvert:(UIImage *)sourceImage
{
    UIImage *newImage = nil;

    CGSize imageSize = sourceImage.size;
    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;

    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;

    CGFloat scaleFactor = 0.0;
    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;

    CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

    if (CGSizeEqualToSize(imageSize, targetSize) == NO) 
    {

        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor < heightFactor) 
            scaleFactor = widthFactor;
        else
            scaleFactor = heightFactor;

        scaledWidth  = width * scaleFactor*1;
        scaledHeight = height * scaleFactor;

        // center the image

        if (widthFactor < heightFactor)
        {
            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5; 
        } else if (widthFactor > heightFactor) {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
    }

    UIGraphicsBeginImageContext(targetSize);

    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.origin = thumbnailPoint;
    thumbnailRect.size.width  = scaledWidth;
    thumbnailRect.size.height = scaledHeight;

    [sourceImage drawInRect:thumbnailRect];

    newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage ;
} 
```

# iphone - 如何防止 UIKeyboard 被解雇？

> ID：11748200
> 
> 赞同：0
> 
> 时间：2012-07-31T20:12:10.273
> 
> 标签：iphone, objective-c, ios, uitextfield, uikeyboard

我的键盘上有一个附件视图，它使用下一个和上一个按钮在 UITextField 之间跳转。当按下下一个或上一个按钮时，会调用一个 IBAction，它会找到要切换到的文本字段，然后执行

```
[nextTextField becomeFirstResponder]; 
```

通常这可以正常工作，但有时键盘会部分掉下来然后又回来。我确定这是因为成为第一响应者会关闭键盘，然后再次将其召唤回来，有时这种情况发生得足够慢，以至于键盘在被回调之前已经在视觉上开始关闭。

那么我怎样才能阻止键盘试图关闭呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:37:20.257

仅当您明确要求将其关闭时（当您在同一视图中时），键盘才应关闭。只要确保没有任何后续调用： [textField resignFirstResponder];

另一种选择是遵循 UITextFieldDelegate 协议并实现这些方法：

```
-(void)textViewDidBeginEditing:(UITextView *)textView
-(void)textViewDidEndEditing:(UITextView *)textView 
```

后者是你不想打电话给你的键盘辞职者的地方

# python - 在类初始化期间传递参数

> ID：11748205
> 
> 赞同：2
> 
> 时间：2012-07-31T20:12:27.290
> 
> 标签：python

我对以下代码中发生的事情摸不着头脑。

```
class foo(object):
    def __init__(self,*args):
        print type(args)
        print args

j_dict = {'rmaNumber':1111, 'caseNo':2222} 
print type(j_dict)
p = foo(j_dict) 
```

它产生：

```
<type 'dict'>
<type 'tuple'>
({'rmaNumber': 1111, 'caseNo': 2222},) 
```

在我看来，这段代码将字典转换为元组！谁能解释一下

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T20:15:56.693

实际上是因为`args`是`tuple`一个可变长度的参数列表。`args[0]`仍然是你的`dict`- 没有发生转换。

有关和（args 的关键字版本）的更多信息，请参阅[本教程。](http://basicpython.com/understanding-arguments-args-and-kwargs-in-python/)`args``kwargs`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T20:26:27.937

使用 时`*args`，所有位置参数都“压缩”或“打包”在一个元组中。

我使用`**kwargs`的是，所有关键字参数都打包到字典中。

（实际上名称`args`或`kwargs`无关紧要，重要的是星号）**:-)**

例如：

```
>>> def hello(* args):
...     print "Type of args (gonna be tuple): %s, args: %s" % (type(args), args)
... 
>>> hello("foo", "bar", "baz")
Type of args (gonna be tuple): <type 'tuple'>, args: ('foo', 'bar', 'baz') 
```

现在，如果您不“打包”这些参数，就不会发生这种情况。

```
>>> def hello(arg1, arg2, arg3):
...     print "Type of arg1: %s, arg1: %s" % (type(arg1), arg1)
...     print "Type of arg2: %s, arg2: %s" % (type(arg2), arg2)
...     print "Type of arg3: %s, arg3: %s" % (type(arg3), arg3)
... 
>>> hello("foo", "bar", "baz")
Type of arg1: <type 'str'>, arg1: foo
Type of arg2: <type 'str'>, arg2: bar
Type of arg3: <type 'str'>, arg3: baz 
```

也可以参考这个问题[Python method/function arguments started with asterisk and dual asterisk](https://stackoverflow.com/questions/4306574/python-method-function-arguments-starting-with-asterisk-and-dual-asterisk)

# jquery - 使用 jQuery 在前 2 个 td 中获取插入的文本

> ID：11748207
> 
> 赞同：1
> 
> 时间：2012-07-31T20:12:34.033
> 
> 标签：jquery, fetch, html-table

我在这样的表中有多行[http://jsfiddle.net/mm6gF/1/](http://jsfiddle.net/mm6gF/1/)。
我想`td`在消息中显示 2 以前的内容。如何使用 jQuery 获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:18:30.703

```
$('.delete').click(function() {
    var name = $(this).closest('tr').find('td').first().text();
    var pw = $(this).closest('td').prev().text();
    answer = confirm ('Are you sure to remove this item?\n' + name + ' : ' + pw);
    if (answer)
    {
        alert('Removed');
    }
})​; 
```

[http://jsfiddle.net/mm6gF/2/](http://jsfiddle.net/mm6gF/2/)

# c# - 查找带双引号的字符串

> ID：11748208
> 
> 赞同：1
> 
> 时间：2012-07-31T20:12:34.593
> 
> 标签：c#, string, indexof

我希望这行代码能够工作-

```
int start = s.IndexOf(""_type": "Person""name": ""); 
```

但很明显，双引号扰乱了搜索......关于如何让它工作的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:17:21.927

你可以采取两种方法来解决这个问题。

第一种是使用[字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)并用另一个双引号转义双引号：

```
string s = @"This is a ""quoted"" string.";
s.IndexOf(@"a ""quoted"" string"); 
```

另一种是用反斜杠转义双引号：

```
string s = "This is a \"quoted\" string.";
s.IndexOf("a \"quoted\" string"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:17:06.767

如果要在字符串中使用双引号，一种方法是使用反斜杠对其进行转义。`\`

```
string myString = "This is a string \" with a double quote"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:17:02.440

所以你想要做的是转义字符串？试试这个：

```
 int start = s.IndexOf(@"this ""word"" is escaped"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:18:29.533

我假设您想在整个字符串上运行 IndexOf()，包括里面的引号？您所要做的就是使用两种类型的引号：' ' 和 " "。只要您使用一个指定主字符串，另一个指定子字符串，它应该可以工作，即：`s.IndexOf(' "_type": "Person""name": " ');`

# jquery - 使用jquery从div中提取部分内部文本

> ID：11748210
> 
> 赞同：2
> 
> 时间：2012-07-31T20:12:37.910
> 
> 标签：jquery, html

我如何提取div的文本部分而忽略内部html标签的文本

这是div

```
<div class="MessageBox">I want to see only this message<span....>Click Here to collapse</span></div> 
```

这是javascript函数中的jquery

```
var message=  $(".MessageBox").text(); 
```

现在我收到消息=“我只想看到这条消息点击这里折叠”

我想要消息 =“我只想看到这条消息”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:15:08.937

您可以使用该`clone()`方法克隆主元素，然后删除该克隆的子元素以丢弃您不想要的部分：

```
var clone = $('.MessageBox').clone();
clone.children().remove();
var message = clone.text(); 
```

当然，您可以跳过克隆部分。但是你实际上会从页面中删除元素，我不确定你是否想要这样做。克隆主要元素允许您操作它的副本，而不是用户实际看到的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:18:51.643

您可以过滤仅文本（排除元素）的节点类型的选择器，并像这样获取文本：

```
var text = $('.MessageBox').contents().filter(function() {
              return this.nodeType == 3;
           }).text(); 
```

[小提琴](http://jsfiddle.net/9YSu6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:18:33.017

尝试：

```
$('.MessageBox')
        .clone()    //clones the element
        .children() //selects all the children
        .remove()   //removes all the children
        .end()      //again goes back to selected element
        .text();    //gets the text of element 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/T6NGD/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:20:24.763

当然，你可以这样做：

```
div = $('.MessageBox').clone();
inner = div.children();
inner.remove();
alert(​div.text()​​​​​​​); 
```

# google-maps - 带有地图的 Google Fusion Tables - 将表格字段链接到地图信息窗口

> ID：11748211
> 
> 赞同：0
> 
> 时间：2012-07-31T20:12:40.603
> 
> 标签：google-maps, google-fusion-tables

我几乎是使用 Google Fusion Tables/maps 的新手。我们有一个包含公司名称和地址的商业目录。我可以获取每个位置的地理编码地图标记，以与表“设施名称”列并排显示。如何对设施名称进行编码，以便用户可以单击公司/设施名称并跳转到地图中该设施的特定地图标记信息框？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:33:33.593

一旦用户单击公司名称，您就可以手动创建一个新的[InfoWindow 对象。](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)然后设置它的位置和内容，最后放到地图上：

```
 var map = new google.maps.Map(document.getElementById('map-canvas');
 var infoWindow = new google.maps.InfoWindow();
 var coordinates = new google.maps.LatLng(37.5, -122.1);
 infoWindow.setPosition(coordinates);
 infoWindow.setContent('Company/Facility XY');
 infoWindow.open(map); 
```

Google提供了一个[InfoWindow 示例](https://developers.google.com/fusiontables/docs/samples/open_infowindow)，它甚至使用地理编码和空间查询来从数据库中获取最近的命中。

# ruby - 获取Ruby字符串中特定单词之后的单词？

> ID：11748219
> 
> 赞同：4
> 
> 时间：2012-07-31T20:13:10.750
> 
> 标签：ruby, regex, string

如何在 Ruby 字符串中的特定单词之后获取单词？

例如：

```
From:Ysxrb<abc@gmail.com>\nTo: <xyzn@gmail.com>Subject: xyzabc\nDate: Tue, 19 Jun 2012   03:26:56 -0700\nMessage-ID: <9D.A1.02635.ABB40EF4@ecout1> 
```

我只想得到：

```
Ysxrb<abc@gmail.com

xyzabc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:41:47.957

我认为您的问题/要求可能需要一些改进。

您说：“如何在 ruby​​ 字符串中获取特定单词之后的单词？” 您的示例文本是这样的：“发件人：Ysxrb\n收件人：主题：xyzabc\n日期：2012 年 6 月 19 日星期二 03:26:56 -0700\n消息 ID：<9D.A1.02635.ABB40EF4@ecout1>”

然后你最后说你真正想要从这些字符串中得到的是以下单词：

“'Ysxrb' 和 'xyzabc'”。

你会一直在解析电子邮件文本，这看起来是这样吗？如果是这样，那么您可以采取一些更具体的方法。例如，在此示例中，您可以执行以下操作：

```
eml = "From:Ysxrb\nTo: Subject: xyzabc\nDate: Tue, 19 Jun 2012 03:26:56 -0700\nMessage-ID: <9D.A1.02635.ABB40EF4@ecout1>"
tokens = eml.split(/[\s\:]/) 
```

这将产生：

```
["From", "Ysxrb", "To", "", "Subject", "", "xyzabc", "Date", "", "Tue,", "19", "Jun", "2012",     "03", "26", "56", "-0700", "Message-ID", "", "<9D.A1.02635.ABB40EF4@ecout1>"] 
```

此时，如果“To”和“Subject”后面的单词是您所追求的，您可以简单地获取每个元素之后的第一个非空白数组元素，如下所示：

```
tokens[tokens.find_index("From") + 1]  => "Ysxrb"
tokens[tokens.find_index("Subject") + 2]  => "xyzabc"  # + 2 is needed because of the newline. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:08:45.620

你可以使用正则表达式，在 irb 控制台上试试这个：

```
string = "From:Ysxrb<abc@gmail.com>\nTo: <xyzn@gmail.com>Subject:"
/From:(.+)\n/.match string
$1 
```

**$1**保存我们用正则表达式中的括号捕获的反向引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:20:55.150

您可以尝试使用正则表达式，这是一个示例：

```
>> s = "From:Ysxrb\nTo: Subject: xyzabc\nDate: Tue, 19 Jun 2012 03:26:56 -0700\nMessage-ID: <9D.A1.02635.ABB40EF4@ecout1>"
=> "From:Ysxrb\nTo: Subject: xyzabc\nDate: Tue, 19 Jun 2012 03:26:56 -0700\nMessage-ID: <9D.A1.02635.ABB40EF4@ecout1>"
>> m, w1, w2 = s.match(/^From:(\w*)\W+.*Subject: (\w*)/).to_a
=> ["From:Ysxrb\nTo: Subject: xyzabc", "Ysxrb", "xyzabc"]
>> w1
=> "Ysxrb"
>> w2
=> "xyzabc" 
```

要找到适合您要求的好的正则表达式，您可以使用[rubular，一个 Ruby 正则表达式编辑器](http://rubular.com/r/TWjOnfoSQr "rubular，一个 Ruby 正则表达式编辑器")

# ios - 如何在 CALayer.contents 中添加 Stretchable UIImage？

> ID：11748224
> 
> 赞同：21
> 
> 时间：2012-07-31T20:13:19.157
> 
> 标签：ios, ios5, uiimage, calayer, quartz-core

我有一个 CALayer，我想向它添加一个可拉伸的图像。如果我这样做：

```
 _layer.contents = (id)[[UIImage imageNamed:@"grayTrim.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0, 15.0, 0.0, 15.0)].CGImage; 
```

它不起作用，因为图层的默认 contentGravity 是 kCAGravityResize。

我已经读到这可以使用 contentsCenter 来完成，但我似乎无法弄清楚我将如何使用它来实现我的 CALayer 中的拉伸图像。

欢迎任何想法！

霍拉蒂乌

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-13T04:23:44.043

这个问题的答案就是这个。假设您有一个可拉伸的图像，它仅在宽度上拉伸并且高度固定（为简单起见）。

图片为 31px 宽度（15px 固定大小 - 不拉伸 - 1px 将被拉伸）

假设您的图层是 CALayer 子类，您的 init 方法应如下所示：

```
 - (id)init
{
    self = [super init];
    if (self) {
        UIImage *stretchableImage = (id)[UIImage imageNamed:@"stretchableImage.png"];
        self.contents = (id)stretchableImage.CGImage;

        self.contentsScale = [UIScreen mainScreen].scale; //<-needed for the retina display, otherwise our image will not be scaled properly

        self.contentsCenter = CGRectMake(15.0/stretchableImage.size.width,0.0/stretchableImage.size.height,1.0/stretchableImage.size.width,0.0/stretchableImage.size.height);
    }
    return self;
} 
```

根据文档，contentsCenter 矩形的值必须介于 0-1 之间。

> 默认为单位矩形 (0.0,0.0) (1.0,1.0) 导致整个图像被缩放。如果矩形延伸到单位矩形之外，则结果未定义。

就是这个。希望其他人会发现这很有用，并且可以节省一些开发时间。

# jquery - 为移动设备改造旧的 XHTML 网站？

> ID：11748232
> 
> 赞同：2
> 
> 时间：2012-07-31T20:13:28.340
> 
> 标签：jquery, css, mobile, modernizr, xhtml-transitional

我有一个需要快速移动升级的旧网站。我对此进行了研究，并找到了很多关于在开始一个新项目时如何做到这一点的好答案。我很想知道是否有人有这样做的经验，如果有的话，什么方法最适合这种工作？我尝试了 Modernizer，但无法让它在任何媒体查询上返回 true (Modernizer.mq)

这是我尝试过的代码：

```
Modernizr.load([
 {
test : Modernizr.mq('screen and max-device-width: 480px'),
yep : 'css/mobile.css',
    nope : 'css/styles.css'
 ]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:55:16.353

The valid media query is `only screen and (max-device-width: 480px)`.

The *only* is used for a bug I cannot recall now, but it doesn't break anything in another browser, so that's okay.

You have to wrap the max-width specification between brackets.

However, you shouldn't rely on Javascript to load your css files. You can include them with

```
<link rel="stylesheet" type="text/css" href="mobile.css" media="only screen and (max-device-width: 480px)"
<link rel="stylesheet" type="text/css" href="screen.css" media="only screen and (min-device-width: 481px)" 
```

You might need a fallback for non-media-query supporting browsers.

# .net - WPF说数据项不为空时为空

> ID：11748233
> 
> 赞同：1
> 
> 时间：2012-07-31T20:13:29.913
> 
> 标签：.net, wpf, xaml, data-binding, mvvm

我有一个用于 WPF 和 MVVM 的 ViewModel 类：

```
public class ViewModel {

    /* Other members here... */

    public ReadOnlyObservableCollection<BackplaneViewModel> Backplanes {
        get { return _Backplanes; }
    }

    public BackplaneViewModel CurrentBackplane {
        get { 
            var cb = _CurrentBackplane ?? (_CurrentBackplane = Backplanes.First()); 
            return cb;
        }
        set { 
            if (_CurrentBackplane == value) return;
            _CurrentBackplane = value; 
            RaisePropertyChanged("CurrentBackplane");
        }
    }
} 
```

集合在`_Backplanes`构造函数中创建和填充，并且永远不会更改。

我有一个控件，它使用 this 的一个实例`ViewModel`作为它的`DataContext`. 用户可以选择`CurrentBackplane`带有 a 的`ComboBox`：

```
<ComboBox ItemsSource="{Binding Backplanes}"
          SelectedItem="{Binding CurrentBackplane}"
          DisplayMemberPath="BackplaneIndex" /> 
```

`CurrentBackplane`也可以在代码中更改。

`get`我在of上放了一个断点`CurrentBackplane`。`cb`变量不是**null**。但是，在`WPF`请求它的值之后，我立即在**输出**窗口中得到以下信息：

```
System.Windows.Data Information: 40 : BindingExpression path error: 'BackplaneIndex' property not found for 'object' because data item is null.  This could happen because the data provider has not produced any data yet. BindingExpression:Path=BackplaneIndex; DataItem=null; target element is 'ComboBox' (Name=''); target property is 'NoTarget' (type 'Object')
System.Windows.Data Information: 19 : BindingExpression cannot retrieve value due to missing information. BindingExpression:Path=BackplaneIndex; DataItem=null; target element is 'ComboBox' (Name=''); target property is 'NoTarget' (type 'Object')
System.Windows.Data Information: 20 : BindingExpression cannot retrieve value from null data item. This could happen when binding is detached or when binding to a Nullable type that has no value. BindingExpression:Path=BackplaneIndex; DataItem=null; target element is 'ComboBox' (Name=''); target property is 'NoTarget' (type 'Object')
System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=BackplaneIndex; DataItem=null; target element is 'ComboBox' (Name=''); target property is 'NoTarget' (type 'Object') 
```

为什么`WPF`告诉我数据项为空？

我不确定我做错了什么。该程序实际上运行良好，但我正在尝试追踪我认为可能与此问题有关的内存泄漏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T05:03:13.757

我不确定这是否是答案，但请尝试一下。在您的应用程序集中：

```
System.Diagnostics.PresentationTraceSources.DataBindingSource.Switch.Level = System.Diagnostics.SourceLevels.Critical; 
```

这可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:29:07.703

在将构造函数中的集合值设置为立即成为第一个值并将 getter 代码更改为仅返回 _CurrentBackplane 后，您是否尝试过设置 _CurrentBackplane？

```
_CurrentBackplane = Backplanes.First(); 
```

和

```
public BackplaneViewModel CurrentBackplane {  
    get {   
        return _CurrentBackplane;  
    }  
    set { _CurrentBackplane = value; }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:35:17.193

Can you check if the DataContext has actually been set to your ViewModel instance before the logging is written to the output window? You can do this by hooking up an event handler to the DataContextChanged event.

I am seeing a similar problem with my code, unfortunately I haven't worked out how to prevent it but I shall keep you posted if I do.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T06:47:20.733

除了 Joshs 的回答，你应该在你的 setter 中提出 propertychanged

```
set { _CurrentBackplane = value; OnPropertyChanged("CurrentBackplane "); } 
```

你应该为你的 SelectedItem 设置 Mode 为 TwoWay

```
SelectedItem="{Binding CurrentBackplane, Mode=TwoWay}" 
```

顺便说一句，您只会得到绑定信息而不是绑定错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-22T00:53:12.697

对我来说，解决方案是在重置属性后重新检查它`DataContext`，然后重置绑定：

```
var resolvedSource = bindingExpression.ResolvedSource;
if (resolvedSource == null)
{
  textBox.DataContextChanged += dataContextChanged;

  static void dataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
  {
    var frameworkElement = (FrameworkElement)sender;
    var be = frameworkElement.GetBindingExpression(TextBox.TextProperty);
    var newBe = BindingOperations.SetBinding(
      (DependencyObject)sender, TextBox.TextProperty, be.ParentBinding);
    Debug.Assert(newBe is BindingExpression);
    Debug.Assert(newBe.DataItem != null);

    //here newBe.DataItem should not be null
    addValidationRules((BindingExpression)newBe);
    frameworkElement.DataContextChanged -= dataContextChanged;
  }
  return;
}
addValidationRules(bindingExpression); 
```

# python - 检查 JSON（对象属性是否存在）并将其打印为 unicode 解码

> ID：11748234
> 
> 赞同：17
> 
> 时间：2012-07-31T20:13:30.887
> 
> 标签：python, json, unicode, simplejson

[我从Instagram API](http://instagram.com/developer/endpoints/users/)获取以下数据，我正在尝试使用以下代码获取`property`文本`caption`：

```
data = simplejson.load(info) # info is retrieved using the urllib2 
    for post in data['data']: 
        if post['caption'] is not "null":
            try:
                post['caption']['text']
            except NameError:
                post['caption']['text'] = 0
            if post['caption']['text'] is not 0:
                print post['caption']['text'] 
```

但是我在打印 unicode 字符串时不断收到`TypeError: 'NoneType' object has no attribute '__getitem__'`错误 +`UnicodeEncodeError: 'charmap' codec can't encode characters in position 0-5: cha racter maps to <undefined>`错误

这是检索并存储在其中的 JSON 数据`info`

```
{
   "pagination":{
      "next_url":"https:\/\/api.instagram.com\/v1\/users\/self\/feed?access_token=184046392.f59def8.c5726b469ad2462f85c7cea5f72083c0&count=3&max_id=247821697921944007_6064449",
      "next_max_id":"247821697921944007_6064449"
   },
   "meta":{
      "code":200
   },
   "data":[
      {
         "attribution":null,
         "tags":[
            "usausausa",
            "olympics"
         ],
         "type":"image",
         "location":{
            "latitude":37.785929,
            "name":"Aquatech Swim School",
            "longitude":-122.278718,
            "id":16343815
         },
         "comments":{
            "count":0,
            "data":[

            ]
         },
         "filter":"Valencia",
         "created_time":"1343765260",
         "link":"http:\/\/instagr.am\/p\/NwhEktJvEp\/",
         "likes":{
            "count":0,
            "data":[

            ]
         },
         "images":{
            "low_resolution":{
               "url":"http:\/\/distilleryimage1.s3.amazonaws.com\/61d9cbeedb4b11e1b8e822000a1e8b8e_6.jpg",
               "width":306,
               "height":306
            },
            "thumbnail":{
               "url":"http:\/\/distilleryimage1.s3.amazonaws.com\/61d9cbeedb4b11e1b8e822000a1e8b8e_5.jpg",
               "width":150,
               "height":150
            },
            "standard_resolution":{
               "url":"http:\/\/distilleryimage1.s3.amazonaws.com\/61d9cbeedb4b11e1b8e822000a1e8b8e_7.jpg",
               "width":612,
               "height":612
            }
         },
         "caption":{
            "created_time":"1343765325",
            "text":"Part of my job to watch swimming. #olympics #USAUSAUSA",
            "from":{
               "username":"kissinkatkelly",
               "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_4672491_75sq_1341713095.jpg",
               "id":"4672491",
               "full_name":"kissinkatkelly"
            },
            "id":"247843973390332239"
         },
         "user_has_liked":false,
         "id":"247843429330383145_4672491",
         "user":{
            "username":"kissinkatkelly",
            "website":"",
            "bio":"I sing the body electric\r\n\r\nBay Area, CA",
            "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_4672491_75sq_1341713095.jpg",
            "full_name":"kissinkatkelly",
            "id":"4672491"
         }
      },
      {
         "attribution":null,
         "tags":[

         ],
         "type":"image",
         "location":{
            "latitude":36.020832061,
            "longitude":-121.548835754
         },
         "comments":{
            "count":4,
            "data":[
               {
                  "created_time":"1343763343",
                  "text":"I wanna cut your mustache off. \ue313\ue313\ue313\ue004",
                  "from":{
                     "username":"glorias_noodles",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_24432017_75sq_1343633079.jpg",
                     "id":"24432017",
                     "full_name":"\ue340MeGusta Gloria\ue340"
                  },
                  "id":"247827343962686703"
               },
               {
                  "created_time":"1343763844",
                  "text":"Ahaha^",
                  "from":{
                     "username":"chloe_carter",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_44766575_75sq_1343509145.jpg",
                     "id":"44766575",
                     "full_name":"Chloe Carter"
                  },
                  "id":"247831551235474746"
               },
               {
                  "created_time":"1343763958",
                  "text":"Amazingg thoo",
                  "from":{
                     "username":"saulyp",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_18051263_75sq_1335648741.jpg",
                     "id":"18051263",
                     "full_name":"Saul Perez"
                  },
                  "id":"247832506790200642"
               },
               {
                  "created_time":"1343764298",
                  "text":"@popesaintvictor where is that? :o",
                  "from":{
                     "username":"youknow_jameson",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_194001394_75sq_1343613135.jpg",
                     "id":"194001394",
                     "full_name":"Jameson Medina"
                  },
                  "id":"247835358103225704"
               }
            ]
         },
         "filter":"Normal",
         "created_time":"1343763202",
         "link":"http:\/\/instagr.am\/p\/NwdJRpBkfX\/",
         "likes":{
            "count":611,
            "data":[
               {
                  "username":"jakyvedder",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_18148021_75sq_1336938690.jpg",
                  "id":"18148021",
                  "full_name":"Janycken"
               },
               {
                  "username":"nadjasinbruker",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_174576513_75sq_1343582260.jpg",
                  "id":"174576513",
                  "full_name":"Nadja"
               },
               {
                  "username":"vivi11",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_1193390_75sq_1338169730.jpg",
                  "id":"1193390",
                  "full_name":"Viviana Rodriguez"
               },
               {
                  "username":"me_4_eva",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_181498114_75sq_1343506811.jpg",
                  "id":"181498114",
                  "full_name":"Kelly"
               },
               {
                  "username":"roxczajkowski",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_9367244_75sq_1343696914.jpg",
                  "id":"9367244",
                  "full_name":"Czajkowski \u041a\u043e\u0440\u0448\u0443\u043d\u043e\u0432\u0430"
               },
               {
                  "username":"arsi1989",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_201586134_75sq_1343761866.jpg",
                  "id":"201586134",
                  "full_name":"Arsalan MemOn"
               },
               {
                  "username":"puppyluva",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_201579504_75sq_1343760137.jpg",
                  "id":"201579504",
                  "full_name":"puppyluva"
               },
               {
                  "username":"paulinamurr",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_49364097_75sq_1343428499.jpg",
                  "id":"49364097",
                  "full_name":"Paulina Murray"
               },
               {
                  "username":"_mcquadeface_",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_20679753_75sq_1327617901.jpg",
                  "id":"20679753",
                  "full_name":"Emily McQuade"
               }
            ]
         },
         "images":{
            "low_resolution":{
               "url":"http:\/\/distilleryimage11.s3.amazonaws.com\/96cd5b90db4611e1827612313814176c_6.jpg",
               "width":306,
               "height":306
            },
            "thumbnail":{
               "url":"http:\/\/distilleryimage11.s3.amazonaws.com\/96cd5b90db4611e1827612313814176c_5.jpg",
               "width":150,
               "height":150
            },
            "standard_resolution":{
               "url":"http:\/\/distilleryimage11.s3.amazonaws.com\/96cd5b90db4611e1827612313814176c_7.jpg",
               "width":612,
               "height":612
            }
         },
         "caption":null,
         "user_has_liked":false,
         "id":"247826160271378391_605400",
         "user":{
            "username":"popesaintvictor",
            "website":"http:\/\/popesaintvictor.com",
            "bio":"artist, friend, and brand designer for blood:water mission in nashville, tennessee. \r\n\r\nhusband to @ohsoamy\r\n\r\nbe inspired. be awesome.\r\n",
            "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_605400_75sq_1342893414.jpg",
            "full_name":"pope saint victor",
            "id":"605400"
         }
      },
      {
         "attribution":null,
         "tags":[

         ],
         "type":"image",
         "location":{
            "latitude":40.738834381,
            "longitude":-73.994163513
         },
         "comments":{
            "count":6,
            "data":[
               {
                  "created_time":"1343762733",
                  "text":"Nice :)",
                  "from":{
                     "username":"belieberpernille99",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_186196238_75sq_1341347304.jpg",
                     "id":"186196238",
                     "full_name":"official belieber"
                  },
                  "id":"247822232418879860"
               },
               {
                  "created_time":"1343762748",
                  "text":"Those pants \ud83d\ude0d",
                  "from":{
                     "username":"morganmarzulli",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_29155556_75sq_1337653621.jpg",
                     "id":"29155556",
                     "full_name":"morganmarzulli"
                  },
                  "id":"247822351461615990"
               },
               {
                  "created_time":"1343762777",
                  "text":"That outfit is to die for. I love her pants! They're so fun. \ud83d\udc4d",
                  "from":{
                     "username":"ninavnegron",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_18421926_75sq_1343356820.jpg",
                     "id":"18421926",
                     "full_name":"Nina V"
                  },
                  "id":"247822600452278654"
               },
               {
                  "created_time":"1343762782",
                  "text":"YEAH THEIR COOL",
                  "from":{
                     "username":"belieberpernille99",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_186196238_75sq_1341347304.jpg",
                     "id":"186196238",
                     "full_name":"official belieber"
                  },
                  "id":"247822639375419775"
               },
               {
                  "created_time":"1343762782",
                  "text":"Another day another shoot! Look out for me and my chicest staff on @racked!",
                  "from":{
                     "username":"rebeccaminkoff",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_6064449_75sq_1332274636.jpg",
                     "id":"6064449",
                     "full_name":"Rebecca Minkoff"
                  },
                  "id":"247822641497737600"
               },
               {
                  "created_time":"1343764430",
                  "text":"Hot mama! Miss you!",
                  "from":{
                     "username":"ashleekoston",
                     "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_12925089_75sq_1340081366.jpg",
                     "id":"12925089",
                     "full_name":"ashleekoston"
                  },
                  "id":"247836463642020446"
               }
            ]
         },
         "filter":"Walden",
         "created_time":"1343762670",
         "link":"http:\/\/instagr.am\/p\/NwcIVwRYnH\/",
         "likes":{
            "count":528,
            "data":[
               {
                  "username":"claireyoung48",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_40091175_75sq_1338778945.jpg",
                  "id":"40091175",
                  "full_name":"claireyoung48"
               },
               {
                  "username":"l_christine_k",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_14871166_75sq_1341962995.jpg",
                  "id":"14871166",
                  "full_name":"Lauren Kawano"
               },
               {
                  "username":"grcdaly",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_41426567_75sq_1335023058.jpg",
                  "id":"41426567",
                  "full_name":"\u24bc\u24c7\u24b6\u24b8\u24ba \u24b9\u24b6\u24c1\u24e8"
               },
               {
                  "username":"vanessaalcalaa",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_18115905_75sq_1342828120.jpg",
                  "id":"18115905",
                  "full_name":"Vanessa Alcala"
               },
               {
                  "username":"makennalenover",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_6464394_75sq_1343268613.jpg",
                  "id":"6464394",
                  "full_name":"Makenna Lenover"
               },
               {
                  "username":"heyitsmaryanne",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_623979_75sq_1340838647.jpg",
                  "id":"623979",
                  "full_name":"Maryanne L"
               },
               {
                  "username":"sarabeen",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/anonymousUser.jpg",
                  "id":"6463387",
                  "full_name":"sarabeen"
               },
               {
                  "username":"boldincrimson",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_191122242_75sq_1341889110.jpg",
                  "id":"191122242",
                  "full_name":"Pilar Chapa"
               },
               {
                  "username":"elizzabethhope",
                  "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_6761399_75sq_1342553102.jpg",
                  "id":"6761399",
                  "full_name":"Lizz\u270c"
               }
            ]
         },
         "images":{
            "low_resolution":{
               "url":"http:\/\/distilleryimage7.s3.amazonaws.com\/59bc708edb4511e1b7ea22000a1cbb16_6.jpg",
               "width":306,
               "height":306
            },
            "thumbnail":{
               "url":"http:\/\/distilleryimage7.s3.amazonaws.com\/59bc708edb4511e1b7ea22000a1cbb16_5.jpg",
               "width":150,
               "height":150
            },
            "standard_resolution":{
               "url":"http:\/\/distilleryimage7.s3.amazonaws.com\/59bc708edb4511e1b7ea22000a1cbb16_7.jpg",
               "width":612,
               "height":612
            }
         },
         "caption":null,
         "user_has_liked":false,
         "id":"247821697921944007_6064449",
         "user":{
            "username":"rebeccaminkoff",
            "website":"http:\/\/www.rebeccaminkoff.com",
            "bio":"The Downtown Romantic. My life, my work, my world.",
            "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_6064449_75sq_1332274636.jpg",
            "full_name":"Rebecca Minkoff",
            "id":"6064449"
         }
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-31T20:39:49.393

您不需要对帖子标题是否存在“文本”进行复杂的测试。此代码适用于您发布的 JSON 字符串：

```
for post in data['data']:
    if post.get('caption'):
        print post['caption'].get('text', 0) 
```

此外，如果 Instagram 向您发送空 JSON，您可能会更具防御性并`data.get('data', [])`在开始循环时参考。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-31T20:33:54.637

基本上，当 json 加载和反序列化您的对象时，`null`JSON 中的内容将变为`None`python 中的内容。

所以你的行：

`if post['caption'] is not 'null':`

应该变成：

`if post['caption']:`

# c - time_t 的大小及其最大值

> ID：11748247
> 
> 赞同：12
> 
> 时间：2012-07-31T20:14:05.850
> 
> 标签：c

```
#include <stdio.h>
#include <time.h>

int main()
{
     printf("Size of time_t is %lu bytes.\n", sizeof(time_t));
     time_t biggest = 0x7fffffffffffffff;   // line 1
     printf("time_t's wrap around will be a second after %s.\n", asctime(gmtime(&biggest)) );

     return 0;
} 
```

在 time.h 中，这是 time_t 的定义吗？

```
typedef  __darwin_time_t   time_t 
```

如何解释它？由于我没有任何想法，所以我使用 sizeof 函数找到了 time_t = 8 个字节。

为什么第 1 行给出错误呢？我收到此错误

```
Segmentation fault: 11 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:24:30.197

您的呼叫`gmtime()`可能正在返回`NULL`（在我的 Mac OS X 系统上确实如此）。当您将此值传递给 时`asctime()`，您会得到一个异常（因为它需要一个非`NULL`指针）。

并非所有`time_t`值都可以在 a 中表示`struct tm`，这就是在这种情况下`gmtime()`返回的原因。`NULL`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-12-31T22:09:04.043

尽管 time_t 的大小为 8，但在 64 位平台上，存在硬编码到运行时中的实现定义的限制，不能超过。当超出这些限制时，gmtime 将返回 NULL，并设置 errno 以指示错误的性质。您的代码无法检查 gmtime 返回的 NULL，因此 asctime 在尝试取消引用该空指针时失败。这是您在使用惯用 C 并且不检查可能失败的函数的返回值时所冒的危险。

Windows 10 上的 Microsoft C gmtime 在传递 32535291600 时返回 NULL，并将 errno 设置为 EINVAL。尽管有人可能认为理论上的最大限制应该是 LLONG_MAX。Microsoft 明确将限制设置为 _MAX__TIME64_T + _MAX_LOCAL_TIME。

来自 Microsoft Visual Studio 2010 CRT 源中的 ctime.h：

```
#define _MAX__TIME64_T 0x793406fffi64 /* number of seconds from 00:00:00, 01/01/1970 UTC to 23:59:59\. 12/31/3000 UTC */ 
```

Apple 的 gmtime 函数在传递 67768036191676800 时返回 NULL 并且 errno 设置为 EOVERFLOW。Apple 实现在 asctime() 返回一年中超过 4 位的字符串的所有时间都表现出未定义的行为，因为 C 标准要求该函数不再返回超过 26 个字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-22T08:51:13.120

我查看了 Linux 头文件，发现了以下内容：

```
/usr/include/time.h:
    typedef __time_t time_t;

/usr/include/bits/types.h:
    __STD_TYPE __TIME_T_TYPE __time_t

/usr/include/bits/typesizes.h
    #define __TIME_T_TYPE       __SLONGWORD_TYPE

/usr/include/bits/types.h:
    #define __SLONGWORD_TYPE    long int 
```

所以 的大小`time_t`为`long int`。在 64 位机器上，您可能会得到 8 个字节。然后我发现在我的 32 位 FreeBSD 上，它看起来像这样：

```
/usr/include/machine/_types.h:
    typedef __int32_t   __time_t; 
```

所以大小是32位。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T20:22:46.393

的基础类型`time_t`可以是任何东西。这在很大程度上取决于您的系统。请参考类似的问题：[time_t 是什么原始数据类型？](https://stackoverflow.com/questions/2792551/what-primitive-data-type-is-time-t).

线程中有一个链接到[sys/types.h](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/types.h.html)的描述，其中声明

> time_t 和clock_t 应为整数或实浮点类型。

一个好的答案的另一个链接：[https ://stackoverflow.com/a/471287/276274](https://stackoverflow.com/a/471287/276274)

# html - 最小高度在任何浏览器中都不起作用

> ID：11748248
> 
> 赞同：3
> 
> 时间：2012-07-31T20:14:07.663
> 
> 标签：html, css

我有一个主包装器`<div>`（id `#main`），我想在将文本副本添加到内容时增长`<div>`，但由于某种原因，主 div 不会增长以容纳其中的其他`<div>`元素，更不用说添加到内容 div 的任何内容.

[**jsFiddle**](http://jsfiddle.net/Kkj22/)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:27:33.063

您可以在这里尝试一些事情：将父 div 浮动到左侧。如果这不起作用，则使用`overflow: hidden;`父 div 中的属性。`clear: both;`在其容器中添加一个子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:38:21.577

如果这不起作用，请尝试`#main{height:auto}`. 您可能需要将相同的属性添加到 Content DIV。

# c - 带指针的 C 问题

> ID：11748249
> 
> 赞同：0
> 
> 时间：2012-07-31T16:18:09.767
> 
> 标签：c, pointers

我有一个程序问题，这是代码。

```
int main()
{
int *p,*q;
p=(int*)1000;
printf("%d ",p);
q=(int*)2000;
printf("%d",q);
printf("%d",(p-q));
return 0;
} 
```

但答案来了

```
1000 
2000 
-250 
```

我无法理解发生了什么`p-q`以及为什么答案是这样的`-250`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T16:33:12.100

正确但可能无用的答案：`p - q`等于`(1000 - 2000) / (sizeof int)`. 对于大多数 C 编译，`sizeof int`是 4。

可能更有用的答案：类型转换的效果`(int*) 1000`是未定义的。*该代码在地址 1000 处*创建一个指向 int 的指针。该地址可能无效。要创建指向值为 1000 的 int 的指针，请编写以下代码：

```
int i = 1000;
int *p = &i; 
```

现在`p`指向`i`, 而`*p`, 指向的值`p`是 1000。

这是一些正确的代码，可以说明您的意思：

```
int main() {
  int i = 1000;
  int j = 2000;

  int *p = &i;
  int *q = &j;

  printf("i = %d *p = %d\n", i, *p);
  printf("j = %d *q = %d\n", j, *q);
  printf("*p - *q = %d\n", *p - *q); 
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T16:37:14.160

当两个指针相减时，只要它们指向同一个数组，结果就是分隔它们的元素个数。

在您的平台上，一个 int 是 4 个字节。地址 2000 和地址 1000 之间有 -250 个元素。

由于 p 和 q 不都指向同一个数组，因此结果是未定义的。您可以获得任何结果，包括您期望的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:20:59.047

这个程序中有这么多未定义的行为，打印的值真的很无关紧要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T02:07:11.697

`p`是一个指针变量，它只能存储`int`变量的地址。但是您存储`1000`为地址，这是无效的。然后你将存储`2000`到变量`q`中。

现在你正在做指针算术`p-q`。Always pointer arithmatic 将根据地址类型的大小给出输出。哪个会像`(p - q)/sizeof(type)`.

考虑如果`p`和`q`是`char *`可变的，那么`p-q`会给你输出为`-1000`

在您的情况下`p`，并且`q`是`int *`可变的，那么`p-q`将为您提供输出，就`250`好像大小`int`为 4 字节一样。在大小为 2 字节的编译器上执行此操作`int`，您将得到`-500`.

# silverlight - 获取在 Silverlight for Windows Phone 7 中触发上下文菜单的 ListBoxItem

> ID：11748253
> 
> 赞同：0
> 
> 时间：2012-07-31T20:14:13.803
> 
> 标签：silverlight, windows-phone-7

我有一个 ListBox，它有一个 ContextMenu。我为列表框定义了一个 ItemTemplate，并为“OnTap”事件设置了一个事件处理程序。当它触发时，我会对此进行操作。我使用 ContextMenu 赋予删除/编辑项目的能力。

我的问题如下：如果我通过一个项目上的“长按”触发上下文菜单，它将不会在列表框中被选中，因此我无法访问它。我想知道，哪个项目是“长胶带”。有什么好的做法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:14:46.523

答案在这里：[http ://forums.create.msdn.com/forums/t/85263.aspx](http://forums.create.msdn.com/forums/t/85263.aspx)

本质上，使用 Silverlight 工具包 GestureListener 来捕获长时间保持，然后在事件处理程序中，您可以查看发送方的 DataContext 以获取正确的项目。

# javascript - JavaScript/RegExp 替换字符串的一部分

> ID：11748256
> 
> 赞同：1
> 
> 时间：2012-07-31T20:14:25.210
> 
> 标签：javascript, regex, string, replace

我有一个类似的字符串：

```
foo title:2012-01-01 bar 
```

我需要在哪里获取“标题：2012-01-01”并将日期部分“2012-01-01”替换为特殊格式。我只是不擅长 RegExp，目前有：

```
'foo from:2012-01-01 bar'.replace(/from:([a-z0-9-]+)/i, function() {
    console.log(arguments);
    return 'replaced';
}) 
```

然后返回

```
foo replaced bar 
```

这是一个开始，但并不完全正确。我需要不替换“来自：”，只替换“2012-01-01”。尝试使用 (?:from:) 但这并没有阻止它替换 'from:'。另外，我需要考虑到'from：'和'2012-01-01'之间可能有一个空格，所以它也需要匹配这个：

```
foo title: 2012-01-01 bar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:57:56.563

以下应该做你需要的；自己测试过：

```
'foo from:2012-01-01 bar'.replace(/(\w+:\s?)([a-z0-9-]+)/i, function(match, $1) {
    console.log(arguments);
    return $1 + 'replaced';
}); 
```

[**演示**](http://jsfiddle.net/Daedalus/zD68Q/)

它将匹配`title: etc`和`from:etc`。The`$1`是第一个匹配的组，`(\w+:\s?)`the`\w`匹配任何单词字符，而`\s?`匹配至少一个空格或不匹配空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:36:55.327

如果格式始终`from:...`存在，则根本不需要捕获“来自”文本：

```
'foo from:2012-01-01 bar'.replace(/from:\s*([a-z0-9-]+)/i, function() {
    console.log(arguments);
    return 'from: replaced';
}); 
```

但是，如果要保留间距，可以执行以下操作：

```
'foo from:2012-01-01 bar'.replace(/from:(\s*)([a-z0-9-]+)/i, function(match, $1) {
    console.log(arguments);
    return 'from:' + $1 + 'replaced';
}); 
```

# java - Java：为对象数组分配内存的有效方法

> ID：11748258
> 
> 赞同：4
> 
> 时间：2012-07-31T20:14:35.323
> 
> 标签：java

在下面的代码中，我试图避免为类的实例分配内存的最后三行。关于如何将内存分配部分带入类定义中的任何建议？`pInfo[0].sValue="string";`所以我想做的是能够立即执行`AClass [] pInfo = new AClass[10];`

```
 class AClass {
     private String sName="";
     private String sValue="";
  }

    AClass [] pInfo = new AClass[10];

   // how to avoid the code below or bring them into class definition?  

    pInfo[0] = new AClass();
    pInfo[1] = new AClass();
      ... 
    pInfo[9] = new AClass(); 
```

**编辑**：我所说的效率是代码量+代码可读性

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:17:50.933

```
AClass[] pInfo = {new AClass(),new AClass(), etc.}; 
```

或者

```
AClass[] pInfo = new AClass[10];

for(int i = 0; i < pInfo.length; i++)  
{  
    pInfo[i] = new AClass();  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:19:43.950

你可以尝试这样的事情：

```
class AClass {
     public String sName="";
     public String sValue="";
}

class AClassArray {
     public AClass[] pInfo;

     public AClassArray() {
        pInfo = new AClass[10];
        for(int i = 0; i < pInfo.length; i++)  
           pInfo[i] = new AClass();  
     }
} 
```

采用：

```
AClassArray aClassArray = new AclassArray();
aClassArray.pInfo[i].sXXXX; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:20:41.023

没有办法避免这种情况，您需要为数组的每个元素显式分配一个值。

[JLS §10.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.3)规定，数组在创建时为其元素提供初始值。

[JLS §4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)指出引用类型的初始值为`null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:23:06.620

```
class AClass {
   private String sName="";
   private String sValue="";

   public static final AClass[] getArrayOfObjs(int size){
    if(size <= 0)
       return null; //You can also create your custom exception to be thrown here
    AClass[] array = new AClass[size];

    for(int i = 0; i < size; i++)  
    {  
       array[i] = new AClass();  
    }  
    return array;
  }
} 
```

然后实例化为

```
AClass [] pInfo = AClass.getArrayOfObjs(10); 
```

# javascript - 如果有超过 x 个元素，则将其划分并在另一个 div 中附加超出的内容

> ID：11748260
> 
> 赞同：0
> 
> 时间：2012-07-31T20:14:44.257
> 
> 标签：javascript, jquery

```
 $(document).ready(function(){
  var unique_price = $(".price_value").get()
    var number_price = unique_price.length;
    if (number_price >=7 ){
        $(".price_list").each(function(index) {
        $(".price_value_left").append($(".price_value:eq(0)"),$(".price_value:eq(1)"),$(".price_value:eq(2)"),$(".price_value:eq(3)"),$(".price_value:eq(4)"));
        $(".price_value_right").append($(".price_value:eq(5)"),$(".price_value:eq(6)"),$(".price_value:eq(7)"),$(".price_value:eq(8)"),$(".price_value:eq(9)")); 
        });                     
    } else if (number_price >9){
        $(".price_list").each(function(index) {
        $(".price_value_left").append($(".price_value:eq(0)"),$(".price_value:eq(1)"),$(".price_value:eq(2)"),$(".price_value:eq(3)"),$(".price_value:eq(4)"),$(".price_value:eq(5)"),$(".price_value:eq(6)"));
        $(".price_value_right").append($(".price_value:eq(7)"),$(".price_value:eq(8)"),$(".price_value:eq(9)"),$(".price_value:eq(10)"),$(".price_value:eq(11)"),$(".price_value:eq(12)")); 
        });     
    }
    else {

            $(".price_value_left").append($(".price_value:eq(0)"),$(".price_value:eq(1)"),$(".price_value:eq(2)"),$(".price_value:eq(3)"),$(".price_value:eq(4)"),$(".price_value:eq(5)"),$(".price_value:eq(6)"));
    } 
```

});

我有一些菜单，里面有一些项目（'li'）。我做了这个代码。如果 div 中有等于或多于 7 个元素，我会获取其他元素并放入另一个元素。在应该解析中具有放大功能的浮动，但我不能这样做，因为我需要维护垂直顺序。

我创造了“超过 9 种元素”，让它们保持更平衡——一种风格。

但我认为这段代码非常丑陋，并且不能动态接受。

有没有更好的方法来解决这个问题并保持平衡设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:19:46.080

我不确定平衡，但您可以使用[`.slice()` *^([docs])*](http://api.jquery.com/slice/)使用拆分选定元素：

```
$('#left').append($elements.slice(0,7));
$('#right').append($elements.slice(7)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:28:44.407

```
jQuery(function($){
    var unique_price = $('.price_value');
    if( unique_price.length > 6 ) {
        var half = ceil(unique_price.length / 2); // In case we have an odd number, we want more elements in the left "column", so we round to next higher number.
        $('.price_list .price_value_left').append($('.price_value:lt(' + (half + 1) + ')');
        $('.price_list .price_value_right').append($('.price_value:gt(' + half + ')');
    }
    else {
        $('.price_list .price_value_left').append(unique_price);
    }
}); 
```

您基本上想要的是*大于*( `:gt()`) 和*小于*( `:lt()`) 选择器。不幸的是，没有`:lte`选择器，这就是我把它放在`(half + 1)`那里的原因。我想没有必要解释他们做了什么。

# android - Android：返回应用程序后操作栏消失

> ID：11748262
> 
> 赞同：1
> 
> 时间：2012-07-31T20:14:46.540
> 
> 标签：android, android-actionbar, onresume

我有一个`android:minSdkVersion`设置为“4”的应用程序。

当我在我的 HTC one X (4.0.3) 上运行这个应用程序时，我有一个操作栏，一切都很好，但是当我打开手机并返回应用程序时，操作栏消失了。

是否有清单命令或其他东西可以在可能的情况下始终显示操作栏？

由于 minSdkVersion，这在我的应用程序中是不允许的。

```
 ActionBar actionBar = getActionBar();
    actionBar.show(); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:35:44.500

您可以为此使用[Android 兼容性库](http://developer.android.com/tools/extras/support-library.html)；它将为您的应用提供旧版本 Android 上的操作栏，然后您可以使用`getSupportActionBar()`. 它还为您提供了一个可以扩展的 Activity 基类；调用`ActionBarActivity`它会为您处理这种逻辑。

或者，您可以查看[ActionBar Sherlock](http://actionbarsherlock.com/)，它（据我所知）提供了支持库功能的超集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:16:29.283

调用`actionBar.show()`你的`Activity.onResume()`方法。每次您的应用暂停时，它都会调用您的 ActionBar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:35:18.383

只需将其放在您的活动的 onCreate 方法中：

```
 Actionbar actionbar;
    actionbar = getSupportActionBar(); 
```

这应该在每次启动应用程序时加载操作栏

# mysql - 如何在 MYSQL 中使用选择子查询

> ID：11748264
> 
> 赞同：1
> 
> 时间：2012-07-31T20:14:55.930
> 
> 标签：mysql, subquery

我有两个数据库，我试图在它们之间传输数据。

我现在正在努力从一个订单到另一个订单，但我遇到了一些我无法弄清楚正确方法的事情。

这是迄今为止的查询......

```
INSERT INTO `NEWTEST`.`Order_LineDetails`

( OrderLineItem_ID, Customer_ID, Order_ID )

SELECT

OrderDetailID,

(    
SELECT o.CustomerID
FROM `OLDTEST`.`Order_Details` od
JOIN `OLDTEST`.`Orders` o ON  o.OrderID = od.OrderID
),

OrderID

FROM `OLDTEST`.`Order_Details` 
```

这将返回“#1242 - 子查询返回超过 1 行”的错误。

我要去的结果是得到......

```
OLDTEST.Order_Details           -> NEWTEST.Order_LineDetails
OLDTEST.Order.CustomerID        -> NEWTEST.Customer_ID
OLDTEST.Order_Details.OrderID   -> NEWTEST.Order_ID 
```

我错过了什么？

：：：：：： 编辑 ：：：：：：：

现在这是正确的并且工作正常。

```
SELECT

  od.OrderDetailID,
  o.CustomerID,
  od.OrderID

FROM `OrderProcessing`.`Order_Details` od

JOIN `OrderProcessing`.`Orders` o ON o.OrderID = od.OrderID

LIMIT 100 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:19:25.933

当您像以前一样在`SELECT`子句中使用子查询时，它必须返回单行，因此会出现错误。

实际上，您似乎不需要这里的子查询：

```
INSERT INTO `NEWTEST`.`Order_LineDetails`
SELECT
    od.OrderDetailID,
    o.CustomerID,
    od.OrderID
FROM `OLDTEST`.`Order_Details` od
JOIN `OLDTEST`.`Orders` o ON  o.OrderID = od.OrderID 
```

（在运行之前，注释掉该`INSERT`行以确保它给出了您期望的结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:17:45.070

MySQL 子查询只能包含一个结果（显然你的返回更多）。您可以添加限制来解决此问题：

```
SELECT o.CustomerID
FROM `OLDTEST`.`Order_Details` od
JOIN `OLDTEST`.`Orders` o ON  o.OrderID = od.OrderID LIMIT 1 
```

# javascript - 复制到剪贴板链接？关闭

> ID：11748267
> 
> 赞同：0
> 
> 时间：2012-07-31T20:15:21.707
> 
> 标签：javascript, html, css

**更新**

由于浏览器禁止它，我将离开它。这没什么大不了的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:24:28.010

抱歉，没有通用的仅限浏览器的解决方案。浏览器安全模型明确禁止访问本地客户端的剪贴板（尽管某些浏览器，如 Netscape，有办法绕过）。

使用非浏览器代码（如 flash 或类似方法）是跨浏览器实现的唯一方法。

# ios - 将 DTCoreText 与 RubyMotion 一起使用

> ID：11748268
> 
> 赞同：1
> 
> 时间：2012-07-31T20:15:21.567
> 
> 标签：ios, rubymotion

我目前正在开发我的第一个主要 RubyMotion 应用程序。我有很多 html 文本要显示，并且想摆脱使用 UIWebView ——因为它有点像 hack，而且如果没有很多箍，很难正确调整大小。所以，我的选择之一是 DTCoreText，它似乎是这批最常用和最稳定的控制。

我最初尝试使用 CocoaPod 版本，但由于某种原因，它导致另一个 pod 的 MKNetworkKit 出现问题。我搞砸了一点，但看到 MKNetworkKit 中报告了很多关于构建过程的问题，所以我最好不要管它。

相反，我选择了供应商选项。我 git 将 DTCoreText 存储库克隆到我的供应商目录中，并将其添加到我的项目中。虽然它通过编译库并制作我的 libDTCoreText.a 文件让我更接近，但在实际运行它之后我仍然卡住了。

我的 Rake 文件包括这个（其余的都很通用）：

```
app.vendor_project('vendor/DTCoreText',
    :xcode,
    :target => 'Static Library',
    :products => ['libDTCoreText.a'])
app.libs << '/usr/lib/libxml2.2.dylib' #For DTCoreText 
```

就像我说的，libDTCoreText.a 文件被编译并复制到我项目中的正确位置。

我的应用程序在代码中有这个。它是尽可能基本的——我只是想看到它起作用。

```
@source = DTAttributedTextView.alloc.initWithFrame(CGRectZero)
@source.attributedString = NSAttributedString.alloc.initWithHTMLData(post.source.dataUsingEncoding(NSString.defaultCStringEncoding), options:{}, documentAttributes:nil)
@source.frame = [[self.frame.size.width / 2 - size.width / 2, 600], [250, 250]] 
```

应用程序可以编译，但在运行时当我们点击上面的代码时，它会崩溃：

```
Objective-C stub for message `initWithHTMLData:options:documentAttributes:' 
type `@@:@@^@' not precompiled. Make sure you properly link with the framework 
or library that defines this message.

*** simulator session ended with error: Error Domain=DTiPhoneSimulatorErrorDomain
Code=1 "The simulated application quit." UserInfo=0x10019d470
{NSLocalizedDescription=The simulated application quit., DTiPhoneSimulatorUnderlyingErrorCodeKey=-1} 
```

有没有人有任何想法我可以开始寻找？我对 XCode 构建过程还不太了解，所以我可能遗漏了一些东西。但它似乎应该工作。它对我说它可以正确地看到标题（并且可以编译），但它不知道实际的库在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:22:15.753

好吧，我在 DTCoreText 方面有相关经验，但在 RubyMotion 方面没有经验。DTCoreText 使用类别，因此具有特殊的负载要求。在我的 Xcode 项目中，在“其他链接器标志”中，我有这个：-force_load $(BUILT_PRODUCTS_DIR)/libDTCoreText.a

该行可确保正确加载库。如果你不这样做，当你尝试使用它时会崩溃。

一年来我一直很高兴使用 DTCoreText，恕我直言，它是比使用 UIWebViews 更好的属性文本解决方案。

# google-maps-api-3 - kmlLayer中的谷歌地图自定义标记

> ID：11748269
> 
> 赞同：0
> 
> 时间：2012-07-31T20:15:26.513
> 
> 标签：google-maps-api-3

我在 kmlLayer 中加载谷歌地图自定义标记时遇到问题。自定义标记最近变得非常小。 [http://apdrc.soest.hawaii.edu/gg/rainSD2.php](http://apdrc.soest.hawaii.edu/gg/rainSD2.php) 它以前工作过。有谁知道这方面的问题？那是谷歌地图API服务器的问题吗？谷歌地图 API 是否会更改自定义标记大小的设置？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:43:33.723

谷歌宣布计划在 7 月中旬[对 KML 渲染进行更改。](https://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/edde6cb4c6affb7d?hl=en#)如果这包括对比例标签的支持，我不会感到惊讶。你的图标不是标准尺寸的吗？他们应该被缩放吗？

查看您的 KML，您正在缩放您的图标：

```
<scale>0.25</scale> 
```

如果将其应用于 32x32 的图标，它们最终会变成 8x8，并且点已经是空间的一小部分。

如果将比例更改为 1.0，我认为它会按预期显示（一旦谷歌服务器上的缓存更新）。

# cuda - CUDA Visual Profiler 不生成时间线

> ID：11748272
> 
> 赞同：2
> 
> 时间：2012-07-31T20:15:46.830
> 
> 标签：cuda

我正在尝试确定我的 GPU 代码中出现减速的位置。我已经验证了代码本身可以正确运行（它不会抛出任何错误、输出正确、干净地完成等）。当我尝试在 Visual Profiler 中分析代码时，它似乎运行正常，将正确的中间输出转储到标准输出。正在使用 GPU（我已经检查了 cuda-gdb 并`printf()`从我的内核中转储 s）。完成所有代码后，Visual Profiler 会报告 viper 已终止可执行文件。但是，不会生成时间线。相反，主窗口显示了 0、10、20、25 微秒，它们全部“折叠”在彼此之上。当我告诉 Visual Profiler 运行所有分析选项时，它会顺利运行 24 次，但仍然没有生成时间线。

我在带有 GeForce 460 的 Ubuntu x86_64 上使用 CUDA 4.2，驱动程序版本 295.41。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:51:47.117

当视觉分析器无法生成时间线时，通常是因为它无法找到分析所需的组件。该组件是一个位于 /usr/local/cuda/lib64 中的共享库，名为 libcuinj.so。那条路径在你的 LD_LIBRARY_PATH 上吗？您如何启动 Visual Profiler？/usr/local/cuda/bin/nvvp 中的脚本应该为您正确设置路径。

4.2版本的visual profiler在找不到这个共享库的时候，并没有很好的报错。即将发布的 5.0 版本的可视化分析器在这方面有更好的错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:56:30.963

我不知道在 Linux 下是否也一样，但在 Windows 下的 Nsight 中，有两种基本类型的 profiling 可以运行。“应用程序跟踪”和“配置文件”。只有在应用程序跟踪下，您才能获得时间表。应用程序跟踪记录进行 CUDA 和内核调用时的时间戳。Profile 设置提供了分析内核的选项。它从 GPU 读取硬件计数器并生成与一个或多个内核相关的性能信息（并且没有时间线）。

# python - 如何根据索引页面上的信息抓取网页

> ID：11748274
> 
> 赞同：1
> 
> 时间：2012-07-31T20:15:52.997
> 
> 标签：python, web-scraping, scrapy

我正在尝试编写一个蜘蛛来根据索引页面上的数据或信息来爬取某些页面。然后将结果存储在数据库中。

例如，假设我想抓取 stackoverflow.com/questions/tagged/scrapy 我会浏览索引页面，如果问题不在我的数据库中，那么我会将答案计数存储在数据库中，然后按照问题的链接并抓取该页面。

如果问题已经在数据库中，但答案的数量大于数据库中的答案数量：再次抓取该页面。

如果问题已经在数据库中并且答案计数器相同：跳过此问题。

目前，我可以在索引页面上获取所有链接和答案计数（在此示例中）。但我不知道如何让蜘蛛根据答案计数跟随问题页面的链接。

有没有办法用一个蜘蛛而不是两个蜘蛛来做到这一点，一个蜘蛛获取索引页面上的所有链接，将数据与数据库进行比较，导出一个 json 或 csv 文件，然后将其传递给另一个蜘蛛抓取问题页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:36:11.120

这就是[CrawlSpider](http://scrapy.readthedocs.org/en/latest/topics/spiders.html?highlight=crawlspider#crawlspider)和 Rules 所做的（请务必查看示例）。您可以首先从索引站点获取信息（尽管您计算答案的方法存在某种缺陷：如果用户删除了帖子并添加了新帖子怎么办）并决定每个子页面，如果您想获取其信息或不是。

简单地说：在索引页面上使用蜘蛛并遵循它的问题。给出问题时，请检查您是要获取信息还是[放弃/忽略该问题](http://scrapy.readthedocs.org/en/latest/topics/exceptions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:49:37.400

只需使用 BaseSpider。这样，您可以使所有逻辑取决于您正在抓取的内容。我个人更喜欢 BaseSpider，因为它可以让你更好地控制抓取过程。

蜘蛛应该看起来像这样（这更像是一个伪代码）：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.spider import BaseSpider
from scrapy.http import Request
from myproject.items import MyItem

class StackOverflow(BaseSpider):
    name = 'stackoverflow.com'
    allowed_domains = ['stackoverflow.com']
    start_urls = ['http://stackoverflow.com/questions']

    def parse(self, response):
        hxs = HtmlXPathSelector(response)

        for question in hxs.select('//question-xpath'):
            question_url = question.select('./question-url')
            answer_count = question.select('./answer-count-xpath')
            # you'll have to write the xpaths and db logic yourself
            if get_db_answer_count(question_url) != answer_count[0]:
                yield Request(question_url, callback = self.parse_question)

    def parse_question(self, response):
        insert_question_and_answers_into_db
        pass 
```

# haskell - Haskell中不同的二叉树定义：哪个赢？

> ID：11748276
> 
> 赞同：4
> 
> 时间：2012-07-31T20:16:02.033
> 
> 标签：haskell, binary-tree

我习惯了以下`Tree`定义：

```
data Tree a = Empty | Node a (Tree a) (Tree a) 
```

直到我在某个地方遇到这个：

```
data Tree a = Empty | Leaf a | Node a (Tree a) (Tree a) 
```

这让我对 Haskell 习语感到好奇。

既然`Leaf a`是 just `Node a Empty Empty`，这个构造函数应该存在吗？我们也可以删除`Empty`，使用一个独特的构造函数，比如

```
Tree (Maybe (a, (Tree a), (Tree a))) 
```

或类似的东西。

我写的第二个定义是“最扩展”的一个，第一个定义介于它和最后一个之间。什么是实际和理论上最好的？换句话说，性能和数据类型的设计呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:29:18.433

如果您想要惯用的 Haskell，请使用第一个定义，因为这样您就可以使用较少的构造函数进行模式匹配。

如果您有带有很多叶子的巨大二叉树，如果您想为`Tree a`每个叶子节省大约 16 个字节（额外指针）的内存（很大程度上取决于您使用的平台/编译器有多少内存） ，请使用第二个定义保存）。

您提出的第三种选择在技术上是有效的表示（假设您的意思是`Tree (Maybe (a, Tree a, Tree a))`，但使用起来非常乏味。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T21:54:26.960

dflemstr 的答案是正确的，但我想我会添加两个评论（不能通过对原始答案的评论来容纳）。

首先，按照第二个定义可以节省内存的相同逻辑，可以为这个定义一个类似的论点：

```
data Tree a = Empty 
            | Leaf a 
            | LeftOnly a (Tree a) 
            | RightOnly a (Tree a) 
            | Branch a (Tree a) (Tree a) 
```

这是否真的重要取决于您的应用程序。

第二个也是更重要的一点是，如果您避免直接使用数据构造函数，您可以从这些实现选择中抽象出来。例如，`foldTree`可以为这些类型中的任何一种编写等效函数。对于较短的类型，您可以这样做：

```
data Tree a = Empty | Node a (Tree a) (Tree a)

foldTree :: (a -> b -> b -> b) -> b -> Tree a -> b
foldTree f z Empty = z
foldTree f z (Node v l r) = f v (subfold l) (subfold r)
    where subfold = foldTree f z 
```

对于更长的，你可以这样写：

```
data Tree a = Empty | Leaf a | Node a (Tree a) (Tree a)

foldTree :: (a -> b -> b -> b) -> b -> Tree a -> b
foldTree f z Empty = z
foldTree f z (Leaf v) = f v z z
foldTree f z (Node v l r) = f v (subfold l) (subfold r)
    where subfold = foldTree f z 
```

对于您`Maybe`的基于 - 的替代方案或我的五构造函数替代方案也可以这样做。此外，这种技术可以应用于您需要的树上的任何其他通用函数。（事实上​​，很多这样的函数都可以用 来写`foldTree`，所以大部分都超出了上面的定义。）

# ruby-on-rails-3 - Rails 将类和计算类分配给 HTML 元素

> ID：11748279
> 
> 赞同：0
> 
> 时间：2012-07-31T20:16:27.940
> 
> 标签：ruby-on-rails-3, loops

这让我发疯，我不明白为什么这么简单的事情在 Rails 中很难做到。

好的，所以我正在循环使用索引并尝试为单个 div 分配多个类，一个是不变的，但另一个由循环计算，即，`class="item item_1" ... class="item item_2"..`依此类推。到目前为止，这就是我所拥有的代码：

```
<% @variable.each_with_index do |item, index| %>
    <div class=<%="item item_#{index}"%>>
           ....
     </div>
<% end %> 
```

但这会产生...

```
<div class="item" item_0="">
....
</div>
<div class="item" item_1="">
....
</div> 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:40:52.307

`<div class=<%="item item_#{index}"%>>`编译为`<div class=item item_1>`，因此您的浏览器认为该类是`item`并且那`item_1`是一个属性。

您只需要围绕该 ERB 引用一些引号，以便将其全部放入课程中：

```
<div class='<%="item item_#{index}"%>'> 
```

应该做的伎俩。

# c# - C# C++ 互操作委托

> ID：11748285
> 
> 赞同：5
> 
> 时间：2012-07-31T20:16:44.743
> 
> 标签：c#, c++, delegates, interop, structure

我想以我没有受过正式的 C++ 培训的事实作为开头，所以如果您有建议，请以超级菜鸟可以实施的方式提供。
先感谢您。
我想做的是从 C# 调用一个 C++ 函数，传入一个结构和一个委托。
我的代码有效，但如果我访问委托中的值，我会收到此错误：
![委托错误图像](../Images/bb73fdf24052b28b04d8f395634487f9.png)
这是我的 c# 代码：

```
public delegate void CallBackMethodDelegate(MP4CreateClipProcessingData data);

[DllImport("libmp4v2.dll", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.StdCall)]
[return: MarshalAs(UnmanagedType.LPStr)]
public extern static string MP4CreateClip(ref MP4CreateClipProcessingData data, CallBackMethodDelegate del); 
```

这是我的 C++ 代码：

```
struct MP4CreateClipProcessingData
{
    bool err;
    char* sourcePath;
    char* targetPath;
    char* error;
    uint32_t startTime;
    uint32_t duration;
};

extern "C" __declspec(dllexport) void MP4CreateClip(MP4CreateClipProcessingData data, void (_stdcall *func)(MP4CreateClipProcessingData))
{
    func(data);
} 
```

这是在我的 C# 代码中调用函数的地方：

```
var data = new NativeMethods.MP4CreateClipProcessingData(file, Path.Combine(targetPath, Path.GetFileName(file).ToString()));
NativeMethods.CallBackMethodDelegate retDel = new NativeMethods.CallBackMethodDelegate(NativeMethods.returnCall);
NativeMethods.MP4CreateClip(ref data, retDel); 
```

# javascript - 如何通过javascript中数组中的字符拆分数组？

> ID：11748289
> 
> 赞同：2
> 
> 时间：2012-07-31T20:16:55.010
> 
> 标签：javascript

我有一个字符数组：

```
var separators = ['a', 'b', 'c']; 
```

我想用这个数组中的任何字符分割一个字符串。例如，

```
var str = 'adbasscdabda'; 
```

应该成为

```
var splitUpArray = ['d', 'ss', 'd', 'd']; 
```

我如何实现这一目标？我曾尝试一次将字符串拆分为一个字符，然后将子数组连接在一起，但这似乎很笨拙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:35:15.250

对于此示例，您可以使用`.match`方法：

```
var str = 'adbasscdabda';

str.match(/[^abc]+/g); // ["d", "ss", "d", "d"] 
```

更通用的解决方案：

```
var separators = ['a', 'b', 'c'];
var re = RegExp('[^' + separators.join('') + ']+', 'g');
var str = 'adbasscdabda';

str.match(re); // ["d", "ss", "d", "d"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:23:10.067

您可以执行一个循环以将第一个数组中的所有字符替换为一个集合字符，然后`.split()`使用该单个字符执行一个。这可能更容易维护。

```
var separators = ['a', 'b', 'c']; 
var str = 'adbasscdabda'; 
for (var l = separators.length, i=0; i<l; i++) {
     str.replace(separators[i], '|');
}
var splitUpArray = str.split('|'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:23:10.400

试试这个。

```
 // Array.prototype.filter must be defined.

var splitStrByChars = function( str, chars ){
    return str.split( new RegExp( "[" + chars.join('') + "]" ) ).filter(function(a){
        return a ? a : null;
    });
};

var str = "adbasscdabda";
var separators = ['a', 'b', 'c'];

console.log( splitStrByChars( str, separators ).join( ', ' ) == "d, ss, d, d" ); 
```

# javascript - 没有 JS 的弹出提示

> ID：11748293
> 
> 赞同：0
> 
> 时间：2012-07-31T20:17:02.533
> 
> 标签：javascript, html

我正在一个网站上工作，那里有一些身份验证会触发如下图所示的弹出窗口。我已经使用 firebug 删除了所有的 JS 和 CSS，它仍然会触发弹出窗口。有没有人使用过这样的弹出窗口，它是如何生成的，所以我可以阻止它。

我不能给出该网站的链接，所以我知道人们很难在没有代码的情况下回答，但我希望有人已经实现了类似这个弹出窗口的东西，并且可以让我朝着正确的方向前进。

我现在觉得它是一个幽灵弹出窗口:)

![图片](../Images/94cdff682699703a586dab71393b6be1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:20:03.773

这是 HTML5 的验证。如果您将属性指定`type`为`email`，则符合 HTML5 的浏览器会将输入验证为电子邮件地址。

`novalidate`您可以通过在`form`标签中包含属性来关闭它们，如下所示：

```
<form id="beh" novalidate> 
```

参考：[https ://www.w3.org/TR/html5/sec-forms.html#element-attrdef-form-novalidate](https://www.w3.org/TR/html5/sec-forms.html#element-attrdef-form-novalidate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:19:01.490

如果它在没有任何 js/css 的情况下执行此操作，则它正在使用 HTML5 的输入验证。

# android - 有安卓 ORM 框架吗？

> ID：11748296
> 
> 赞同：0
> 
> 时间：2012-07-31T20:17:05.507
> 
> 标签：android, orm

有没有类似 Android 的 ORM 框架？

我需要这个来做这样的事情：

我创建了一些类，然后将它们保存在列表中。在此之后，我想自动保存这些类并将其加载到 sqlite 数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:19:10.360

ORMLite 似乎是这个领域的领导者，你可以在这里查看它们：http: [//ormlite.com/](http://ormlite.com/)

它比 Hibernate 更轻量级，但在 Android 平台上运行良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T20:19:57.963

你试过谷歌搜索“Android ORM”吗？

第三个结果将为您指出[任何用于 Android 开发的好的 ORM 工具？](https://stackoverflow.com/questions/371538/any-good-orm-tools-for-android-development)

# html - 响应式排版

> ID：11748304
> 
> 赞同：4
> 
> 时间：2012-07-31T20:17:21.950
> 
> 标签：html, css, responsive-design

我已经阅读了有关响应式排版的不同文章，但没有找到可以采用的良好做法。如果我必须为这些分辨率优化我的 web 应用程序，并为图形源中的每个人设置一个字体大小：

320x480 -> 12 像素

480x800 -> 20 像素

540x960 -> 26 像素

720x1280 -> 26 像素

在我阅读之后，我把这个放在 css 文件中：

```
html { font-size: 100%; -webkit-text-size-adjust: 100%; 
                          -ms-text-size-adjust: 100%; } 
```

然后使用 Ethan Marcotte 的公式，我计算了我的第一个字体大小：

```
body{font-size: 0.75em;/*12px/16px */} 
```

然后通过媒体查询，我增加了 html 属性的字体大小：

```
/* ===== == = === 30em (480px) === = == ===== */
@media only screen and (min-width : 30em) {
   body{font-size: 125%;}/*20px*/
}
/* ===== == = === 37.5em (600px) === = == ===== */
@media only screen and (min-width: 37.5em) {
    body{font-size: 163%;}/*26px*/
} 
```

这是使我的字体适应不同分辨率的好习惯吗？你有很好的实际例子，我在哪里可以找到这些信息？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:41:59.897

Structurally, that is how I would do it. Not sure I would use percentages though in your mq's, I would probably continue on with em's. Here is a great px to em calculator: [http://pxtoem.com/](http://pxtoem.com/)

# jquery-mobile - 带有方向的jQuery Mobile changePage

> ID：11748305
> 
> 赞同：4
> 
> 时间：2012-07-31T20:17:24.807
> 
> 标签：jquery-mobile

是否可以同时指定 changePage 方向的类型和该 changePage 的方向？就像是：`$.mobile.changePage("mySpecialPlace.html", {transition: "slideup"}, {direction: reverse});`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T20:49:31.253

文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)

您很接近，但请查看我上面链接到的文档，它会向您显示您可以为该`.changePage()`方法指定的所有选项的确切结构。

```
$.mobile.changePage("mySpecialPlace.html", {
    transition : "slideup",
    reverse    : true        //notice options are passed via the same object
}); 
```

# c# - 从 Asp.NET 将行复制到 SQL Server 中的另一行

> ID：11748309
> 
> 赞同：0
> 
> 时间：2012-07-31T20:17:39.393
> 
> 标签：c#, asp.net

假设有一个表只包含`ID, Name, Company`和`RealID`。

我想将一行复制到另一行。例如：

```
ID          Name           Company         RealID 
```

* * *

```
1          Marry           Company A        null
2          Jane            Company B        null
3          Watson          Company C        null
4          Marry           Company A         1
5          Watson          Company C         3 
```

我将通过 c# 编程语言从 asp.net 执行此操作。

我的问题是：

在c#中我应该在下面做吗？

```
Class: UserProfile {ID, Name, Company, RealID} 
```

代码端：

```
UserProfile userProfile = new UserProfile();
//I have userProfile.ID, userProfile.Name, userProfile.Company and userProfile.RealID
SqlConnection conn = new SqlConnection(sqlConnection);
SqlCommand cmd = new SqlCommand("Select * From UserProfile", conn);
conn.Open();
SqlDataReader dr = cmd.ExecuteReader();
DataTable dt = new DataTable();
dt.Load(dr);

//and with a loop, assignment to UserProfile members such as UserProfile.ID = dr[0][i]... 
```

然后SQL查询将是

```
INSERT (Name, Company, RealID) 
VALUES (UserProfile.Name, UserProfile.Company, UserProfile.RealID) 
```

我搜索了这个主题并找到了这个： [Copying values from another row](https://stackoverflow.com/questions/10383879/copying-values-from-another-row)

但我认为我的情况不同。

或者有什么方法可以缩短这个过程？

不久：

我想从 asp.net 将 sql 中的一行复制到另一行。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:22:14.027

看起来您几乎拥有所有代码，那么为什么需要快捷方式？我不知道捷径，如果数据像你的例子一样微不足道，谁在乎！把它读出来然后写出来...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:05:41.100

如果这只是一行的副本并且 Id 是自动递增的，也许您只能将其作为 SQL 来执行？

```
INSERT INTO UserProfile (Name, Company, RealID) SELECT Name, Company, RealID FROM UserProfile WHERE ID = X 
```

如果有选择更改的值，您也可以替换：

```
INSERT INTO UserProfile (Name, Company, RealID) SELECT 'New Name', Company, RealID FROM UserProfile WHERE ID = X 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:50:13.107

我不确定我是否正确理解了这个问题，但是如果您想将一个表中的行逐行复制到另一个表中，您可以使用 INSERT INTO，

# iphone - OAuth登录后获取用户信息

> ID：11748310
> 
> 赞同：0
> 
> 时间：2012-07-31T20:17:40.277
> 
> 标签：iphone, objective-c, ios, twitter, twitter-oauth

我想获取用户的信息。在 OAuth 之后我发送这个请求：

```
 NSURL *url = [NSURL URLWithString:@"https://api.twitter.com/1/account/verify_credentials.json"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"Public Timeline: %@", JSON);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"error = %@", error);
    NSLog(@"json = %@", JSON);}];
[operation start]; 
```

但是出现错误：`{"error":"Could not authenticate you.","request":"\/1\/account\/verify_credentials.json"}`为什么我登录后也无法访问信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:32:01.147

您尚未将 OAuth 令牌附加到请求中。您只是发送带有该 URL 字符串的请求。

你可以看看[AFOAuth2Client](https://github.com/AFNetworking/AFOAuth2Client)，它为 AFNetworking 提供了一个简洁的扩展，用于在 Twitter 上进行授权请求。

或者，您可以使用内置的 iOS 5+ Twitter API，[我为另一篇 SO 帖子写了一个答案](https://stackoverflow.com/questions/11600621/iphone-twitter-api-get-users-followers-following/11601077#11601077)，向您展示了如何做到这一点 - 它非常简单:)

如果您需要从头开始实现 OAuth，请参阅：[https ://github.com/bengottlieb/Twitter-OAuth-iPhone/](https://github.com/bengottlieb/Twitter-OAuth-iPhone/)

祝你好运！

# zend-framework - Zend_Http_Client 加载内容到 iframe

> ID：11748315
> 
> 赞同：0
> 
> 时间：2012-07-31T20:17:58.667
> 
> 标签：zend-framework, iframe, zend-http-client

如果我发出 Zend_Http_Client 请求并将响应从它加载到 iframe 并且如果我从将 iframe 设置为目标的表单中执行它，是否相同？我将 iframe src 设置为我的控制器/动作，其中我有 Zend_Http_Client

> $response = $client->request(Zend_Http_Client::POST); 回声 $response->getBody();

如果我使用表单设置目标 iframe 是否有区别？

我希望在我启动页面时已经加载，而不是在我按下按钮提交时加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:22:39.847

不太确定问题是什么，但与 iframe 中的 Zend Form 没有任何区别。iframe 是他们自己的网页，其行为也是如此。从 Zend_Http_Client 请求的响应中填充 HTML 不会产生任何负面影响；对于浏览器来说，它只是 HTML，不管它来自哪里。

# tcl - Tcl/Tk：调整大小时帧行为异常。

> ID：11748316
> 
> 赞同：1
> 
> 时间：2012-07-31T20:18:13.063
> 
> 标签：tcl, tk

我对 Tcl/Tk 相对较新，但在过去几周内一直在相当成功地使用它，不间断。在大多数情况下，它似乎相当简单。但是，我最近遇到了一个障碍，这可能很简单，但我似乎无法弄清楚。

我已将相当复杂的代码减少到几行来演示问题。

我的简单示例生成两个标签框，每个标签框都有一个简单的标签小部件。当我调整（即展开）主窗口的大小时，我希望“左”框架仅在 y 方向上调整大小，并且我希望“中间”框架在 x 和 y 方向上调整大小。这些部分工作正常。

但是，我还希望框架在调整大小时保持“粘在一起”。也就是说，当它们都调整大小时，我希望“中间”框架与“左”框架保持一致。相反，我看到两者之间的差距正在扩大。

同样，这是来自更复杂程序的简化代码。我试图避免在同一个程序中混合 grid 和 pack 命令，并且在原始更复杂的程序中，使用 grid 变得非常笨拙。因此，首选使用“pack”的解决方案。但适当的解释将是一个好的开始。

我的小例子：

```
 #!/usr/bin/wish

 ## Set up two main frames
 set frameLeft [labelframe .frameLeft]
 set frameMiddle [labelframe .frameMiddle]

 pack $frameLeft -fill y -expand 1
 pack $frameMiddle  -fill both -expand 1 
 pack $frameLeft $frameMiddle -side left -anchor nw

 ## Instead of the previous 3 lines, I also tried:
 #pack $frameLeft -fill y -expand 1 -side left -anchor nw
 #pack $frameMiddle  -fill both -expand 1 -side left -anchor nw

 ## Set up component in LEFT frame
 set frameOne [labelframe $frameLeft.frameOne]
 set labelOne [label $frameOne.labelOne -text "Label One:"]

 pack $labelOne -anchor nw
 pack $frameOne -anchor nw

 ## Set up component in MIDDLE frame
 set frameTwo [labelframe $frameMiddle.frameTwo]
 set labelTwo [label $frameTwo.labelTwo -text "Label Two:"]

 pack $labelTwo -side left
 pack $frameTwo -anchor nw 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:27:38.760

首先，在调试复杂的布局以在框架上添加花哨的颜色时，它通常会有所帮助。当然，您不会将它们留在生产环境中，但它确实使理解您正在使用的几何管理器的行为变得更加简单。

当我尝试您的代码时，我看到两个小部件在水平方向上都分配了相同数量的空间；然后`.frameLeft`小部件会粘在该空间的左侧，而`.frameMiddle`小部件正在填充它已分配的空间。所以问题不在于小部件*在*其“空间包”中的行为，而在于空间的分配。

现在，有了`pack`，额外空间的分配由`-expand`选项控制；额外的空间在启用了扩展的数据包之间共享。这意味着要获得您想要的布局，您不应该简单*地*设置`-expand 1`为`.frameLeft`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:26:50.553

我知道您更喜欢“打包”答案，但网格通常更容易处理，因为“粘性”选项以更易于处理的语义处理填充和扩展。我有点惊讶你遇到了麻烦。不幸的是，我被锁定在“网格”中——思考。那么以下“网格”解决方案是否可以满足您的需求？

```
#!/usr/bin/env wish

## Set up two main frames
set frameLeft [labelframe .frameLeft]
set frameMiddle [labelframe .frameMiddle]

grid $frameLeft -row 0 -column 0 -sticky nse
grid $frameMiddle -row 0 -column 1 -sticky nsew
grid columnconfigure . {0 1} -weight 1
grid rowconfigure . 0 -weight 1

## Set up component in LEFT frame
set frameOne [labelframe $frameLeft.frameOne]
set labelOne [label $frameOne.labelOne -text "Label One:"]

grid $frameOne -sticky nw
grid $labelOne -sticky nw

## Set up component in MIDDLE frame
set frameTwo [labelframe $frameMiddle.frameTwo]
set labelTwo [label $frameTwo.labelTwo -text "Label Two:"]

grid $frameTwo -sticky nw
grid $labelTwo -sticky nw 
```

# drupal - Drupal 7 Views PHP 模块回显分类术语

> ID：11748317
> 
> 赞同：0
> 
> 时间：2012-07-31T20:18:18.760
> 
> 标签：drupal, drupal-views

我正在使用带有以下代码的 Views PHP 模块：

```
<?php
  echo $row->title;
  echo $row->field_home_away_or_neutral;
  echo $row->field_team;
  echo $row->field_opponent;
  echo $row->field_goals_scored;
  echo $row->field_goals_conceded;
?> 
```

这会正确打印标题，但所有其他变量每行返回相同的数字，例如 17 17 17 17 17 然后 15 15 15 15 15

这些字段是分类术语和整数。

如何打印实际值，例如 $row->field_home_away_or_neutral 将是“Home”、“Away”还是“Neutral”？

可用变量：

$view：视图对象。

$handler：处理程序对象。

$static：可用于存储每行可重用数据的变量。

$row：包含从数据库中检索到的记录（例如$data->nid）。

$row->title: 内容: 标题

$row->field_home_away_or_neutral：字段：主场、客场或中立

$row->field_team：字段：团队

$row->field_opponent：字段：对手

$row->field_goals_scored：字段：进球数

$row->field_goals_conceded: 场：失球数

$row->路径：内容：路径

$row->php：全局：PHP

$data：包含从数据库中检索到的记录（例如$data->nid）。

$value：该字段的值。

谢谢，

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:20:09.783

原来这是 Views PHP 中的一个错误（参见[http://drupal.org/node/1140896](http://drupal.org/node/1140896)）

您可以使用以下方法获取值：

```
$data->field_field_home_away_or_neutral[0]['rendered']['#markup']; 
```

... 其中 _field_home... 是您要定位的字段。

使用开发模块和

```
dsm($data); 
```

建立价值的正确“路径”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:24:33.583

尝试以下方法来获取术语名称：

```
// In your case the $tid is $row->field_home_away_or_neutral;
$term = taxonomy_term_load($tid);
echo $term->name; 
```

让我们知道它是否适合您！

# spring - 升级到 ActiveMQ 5.6.0 后无法识别 Spring JNDI 数据源

> ID：11748318
> 
> 赞同：1
> 
> 时间：2012-07-31T20:18:24.717
> 
> 标签：spring, activemq, jndi

我在 AMQ 5.6.0 中测试了一个 ActiveMQ 5.5.0（保险丝版本）应用程序，并注意到我们的 Spring JNDI 配置的 Oracle 数据源没有被发现。

我在应用程序中唯一更改的是 AMQ/Spring 的 pom.xml 版本（以匹配 5.6 版本）。否则，我将使用相同的应用程序代码和配置（activemq.xml、jndi.xml 等），但我的 Spring JDBC DAO (v3.0.5) 无法找到它们。

否则日志中没有错误，只是这个 Spring Application Context 初始化错误......

```
javax.naming.NameNotFoundException; remaining name 'jdbc/myDataSource' 
```

这是相关的 Spring jndi 配置（conf/jndi.xml，包含在 conf/activemq.xml 中）...

```
<bean id="jndi" class="org.apache.xbean.spring.jndi.SpringInitialContextFactory" 
    factory-method="makeInitialContext" scope="singleton">
    <property name="entries" ref="jndiEntries" />
</bean>
<util:map id="jndiEntries">
    <entry key="jdbc/myDataSource">
    <bean id="myDBCPDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
        ... 
```

然后我的应用程序像这样引用它......

```
<bean id="myDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>jdbc/myDataSource</value>
    </property>
</bean>

<bean id="messageDAO" class="com.mycompany.MessageDAOImpl">
    <property name="dataSource" ref="myDataSource" />
</bean> 
```

也就是说，我在没有使用 JNDI 的情况下进行了测试（而只是在我的应用程序中对数据源进行了硬编码）并且一切都按预期工作。所以这应该排除除了数据源的 Spring JNDI 注册/查找等之外的所有内容。

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:42:47.540

我发现了问题，我在 /conf 目录下添加了一个 jndi.properties 文件，其中包含以下内容，现在它工作正常（在 AMQ 5.5 下不需要这个......奇怪）......

```
java.naming.factory.initial = org.apache.xbean.spring.jndi.SpringInitialContextFactory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:13:19.970

ActiveMQ 依赖于 xbean-spring，您将其用作 JNDI 提供者。由于升级到 ActiveMQ 5.6.0，传递 Xbean 依赖关系可能发生了变化。

# wpf - 从控件中获取 ContentPresenter/ItemsPresenter

> ID：11748323
> 
> 赞同：0
> 
> 时间：2012-07-31T20:18:37.037
> 
> 标签：wpf, visualtreehelper

如果确实存在，我需要一种从控件访问 ContentPresenter/ItemsPresenter 的方法。

我不知道如何使用 VisualTreeHelper 轻松做到这一点。

我需要递归搜索所有孩子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:12:53.833

是的，您需要通过 Visual 树进行递归...。FindVisualChild 可以为您执行此操作...如果您向控件提供实例。

ContentPresenter myContentPresenter = FindVisualChild(dependencyobject);

一些链接：

*   [http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx)

*   [http://blogs.msdn.com/b/wpfsdk/archive/2007/04/16/how-do-i-programmatically-interact-with-template-generated-elements-part-ii.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2007/04/16/how-do-i-programmatically-interact-with-template-generated-elements-part-ii.aspx)

*   [http://social.msdn.microsoft.com/Forums/br/wpf/thread/3c77deb8-2778-49a3-bcc2-21b1ac595183](http://social.msdn.microsoft.com/Forums/br/wpf/thread/3c77deb8-2778-49a3-bcc2-21b1ac595183)

# php - 消息：未定义的变量：数据 - CodeIgniter

> ID：11748324
> 
> 赞同：1
> 
> 时间：2012-07-31T20:18:38.283
> 
> 标签：php, codeigniter

大家好，我有这段代码，但我不确定我做错了什么，据我所知，数据正在被定义，这些是我得到的错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: data

Filename: models/site_model.php

Line Number: 14
A PHP Error was encountered

Severity: Warning

Message: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/BLOCK/system/core/Exceptions.php:185)

Filename: core/Common.php

Line Number: 442
A Database Error Occurred

You must use the "set" method to update an entry.

Filename: /Applications/XAMPP/xamppfiles/htdocs/BLOCK/models/site_model.php

Line Number: 14 
```

控制器：

```
<?php
class Site extends CI_Controller {

function index(){

    $this->load->view('option_view');
}

function create(){

    $data = array(
        'subject' => $this->input->post('subject'),
        'body' => $this->input->post('body')
    );

    $this->Site_model->add_record($data);
    $this->index();

}

}

?> 
```

模型：

```
<?php

class Site_model extends CI_Model {

function get_records()

{
    $query = $this->db->get('items');
    return $query->result();
}

function add_record()
{
    $this->db->insert('items', $data);
    $return;
}

function update_record()
{
    $this->db->where('id', 1);
    $this->db->update('items', $data);

}

function delete_record()
{
    $this->db->where('id', $this->url->segment(3));
    $this->db->delete('items');

}

}

?> 
```

和观点：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>option_view</title>
<style type="text/css" media="screen">
label {display:block;}
</style>
</head>

<body>
<h2>Create</h2>
<?php echo form_open('site/create'); ?>

<p>
    </label for="subject">Subject</label>
    <input type="text" name="subject" id="subject">
</p>

<p>
    </label for="body">Body</label>
    <input type="text" name="body" id="body">
</p>
<p>
<input type="submit" value="Submit">    
</p>
<?php echo form_close();?>
 </body>
 </html> 
```

大家怎么看？

非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:22:40.487

你永远不会传递`$data`给你的方法。这是一个范围问题。

```
function add_record()
{
    $this->db->insert('items', $data);
    $return;
} 
```

在这种情况下，`add_record()`不知道是什么`$data`（并将其视为`null`尚未定义。

[变量范围](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:22:28.030

您的模型中的方法不需要参数。例如：

改变：

```
function add_record() 
```

至：

```
function add_record($data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:23:03.070

在这些方法中：

```
function add_record()
{
    $this->db->insert('items', $data);
    $return;
}

function update_record()
{
    $this->db->where('id', 1);
    $this->db->update('items', $data);

} 
```

您尚未将数据传递给方法，因此 $data 未定义。

# javascript - AJAX 安全问题，防止人们通过链接代表另一个用户执行操作

> ID：11748326
> 
> 赞同：1
> 
> 时间：2012-07-31T20:18:52.183
> 
> 标签：javascript, ajax, security, csrf

假设用户想要删除帖子并且您想要异步执行此操作，您可能会执行类似...

```
$.post('https://mysite.com/execs/remove.php?&post_id=' + post); 
```

或者您不会，因为您不希望有人能够仅复制该链接和用户的帖子 ID 并欺骗他们删除它。所以我这样做...

```
$.post('https://mysite.com/remove.php?post_id=' + post + '&visit_session=' + visit_session); 
```

我插入了他们的秘密访问会话 ID，该 ID 在脚本前面通过 ajax 调用，每次登录时都会更改。因此，除非用户可以猜出他们的随机 ID，否则链接将失败并且用户将是安全的......

然后我想知道是什么阻止了某人创建网页来窃取该用户的访问会话 ID？一个恶意的人不能基本上只是将我的 ajax 请求复制并粘贴到他们自己的站点中并做这样的事情......

```
$.ajax({
type: 'GET',
  url: 'https://mysite.com/visit_session.php',
  dataType: 'json',
   success: function(data) {
    window.location = "https://mysite.com/remove.php?post_id=POSTID&visit_session=' + data.visit_session";
}
}); 
```

因此，如果用户建立了一个包含该小脚本的站点，然后将其链接到他们想要欺骗删除他们的帖子的用户，它不会这样做吗？（假设用户当前登录到我的网站）。

假设我在这里的想法是正确的，我能做些什么来防止这种情况发生？

编辑：而不是轮询我的javascript文件中的访问会话变量，我知道我可以做类似的事情......

```
<script>
visit_session = "<?php echo $_SESSION['visit'] ?>";
</script>
<script src="https://mysite.com/javascript/main.js"></script> 
```

这将防止恶意用户代表另一个用户轮询它。但是，我宁愿避免将其添加到每个页面，如果可能的话，只需将其全部保存在 main.js 文件中。因此，如果有人有任何建议或提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:30:16.337

不，这是不可能的。[XMLHttpRequest](http://www.w3.org/TR/XMLHttpRequest/)禁止访问跨域请求的响应，除非服务器根据[Cross-Origin Resource Sharing](http://www.w3.org/TR/cors/)明确允许。

`data`因此，除非服务器明确允许不同的来源这样做，否则在不同来源运行的这段代码将无法读取。`Access-Control-Allow-Origin: *`如果服务器响应允许任何来源共享响应，则后者将是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:24:39.040

有两个选项，第一个需要使用[会话](http://php.net/manual/en/features.sessions.php)（最好使用 HTTPS cookie）将用户与登录相关联。这是 PHP 中最知名的技术，因此查找有关如何操作的文档应该不难。但是，因为它依赖于客户端状态，所以它不是 RESTful。

如果您确实需要它是 RESTful 的，那么另一个选项是使用[HTTP digest authentication](http://www.php.net/manual/en/features.http-auth.php)。这不需要任何特定的客户端状态，因此它符合 REST，但它确实需要客户端在每个请求中发送正确的摘要。

# ubuntu - 升级到最新的 sqldeveloper 时出现问题

> ID：11748333
> 
> 赞同：0
> 
> 时间：2012-07-31T20:19:13.307
> 
> 标签：ubuntu, oracle-sqldeveloper

`(Version 1.5.5)`我的Ubuntu 10.04.4 LTS 上安装了一个 3 岁的 sqldeveloper 。但是，当我尝试升级时，出现此错误：

```
$ sudo apt-get install sqldeveloper
Reading package lists... Done
Building dependency tree       
Reading state information... Done
sqldeveloper is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 14 not upgraded. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:28:43.220

`sqldeveloper`您拥有该版本的发行版中可用的最新版本。您需要升级分配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:53:46.160

我发现这些步骤很有帮助，他们解决了我的问题：

[http://www.howtogeek.com/howto/ubuntu/install-an-rpm-package-on-ubuntu-linux/](http://www.howtogeek.com/howto/ubuntu/install-an-rpm-package-on-ubuntu-linux/)

# android - 列表视图中的自定义添加图像更改其在列表视图项目上的位置添加

> ID：11748335
> 
> 赞同：1
> 
> 时间：2012-07-31T20:19:16.340
> 
> 标签：android

我正在为一个网站创建一个聊天应用程序。只要有人访问该网站，就会向网站管理员发送带有他们姓名的通知，告知该人已到达您的网站。

现在在应用程序中有两个活动，一个用于客户端和管理员聊天，另一个用于到达站点的客户端列表，当客户端到达时，它会不断更新。如果管理员单击客户端列表活动中的名称，则会放置一个绿点在他的名字前面表示您当前正在与此人聊天的管理员。多个点将放置在该客户列表的不同区域，因为管理员将单击它们。帮助管理员记住他一直在与谁交谈。

问题是，如果我运行应用程序并且第一个客户到达客户列表。我点击他的名字，我被带到聊天页面（很好）。我回去，我看到它前面放了一个绿点。但是在客户列表活动中，当第三个人到达并且客户列表添加了他（记住我只点击了第一个，即点出现在客户列表的第一项前面的 0 位置）时，我的绿点从位置 0 向下移动自动定位到 1。

我不知道为什么会这样。

下面是如何将 Ip 作为通知发送到 clientlist 活动的。

```
Intent i=new Intent("android.intent.action.GET_IP").putExtra("ClientIp", ip);
this.sendBroadcast(i); 
```

这是我在客户端列表活动中接收它并将其转发给我的`lazyadapter`班级以将其添加到列表视图中的方式。

```
mReceiver=new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

    if(!ParseXML.ConfirmIpExistance(adapter.iplist, intent.getExtras().getString("ClientIp")))
    {
        adapter.InsertIntoExistingClients(intent.getExtras().getString("ClientIp"));
    }
  }
}; 
```

这是要在客户端列表视图中插入的 LazyAdapter 函数。

```
public void InsertIntoExistingClients(String ip)    //runs when you are on the clientlistactivity to insert only one item.
{       
    this.iplist.add(ip);
    this.notifyDataSetChanged();
} 
```

当管理员在客户端列表活动中单击客户端名称时，他的列表视图位置将被发送到下一个活动。在下一个活动（聊天页面）中，检查其他管理员是否已经在与该客户端交谈，如果是，`OnActivityResult`则调用上一个带有代码的活动告诉它不要插入图像，因为这个管理员没有与他点击的那个客户交谈。但是如果没有其他管理员在说话，这意味着。他可以说话。所以代码和列表视图位置（从用户单击客户端名称时的先前活动）被发回，`OnActivityResult`并将图像放在列表视图中其名称的前面。

这是怎么回事。OnListViewItemClick：

```
 lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapter, View view, int position,long id) {

                try {

                    selectedPeople.add(position);

                    TextView tv=(TextView)view.findViewById(R.id.clientip);

                    Intent i=new Intent(getApplicationContext(),ChatPageActivity.class);
                    i.putExtra("AdminEmail",ClientListActivity.AdminEmail);
                    i.putExtra("ClientIp",tv.getText().toString());
                    i.putExtra("ChildAt", position);

                    startActivityForResult(i, 200);
                }
                catch(Exception e)
                {
                    Log.e("erora",e.getMessage());
                }
            }
        }); 
```

以下是我接受答案的方式`onAcvitityResult`：

```
 @Override
protected void onActivityResult(int requestCode,int resultCode,Intent data)
{
    try {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode!= 23)
    {
        ImageView imageView=(ImageView)lv.getChildAt(data.getExtras().getInt("ChildAt")).findViewById(R.id.onlineImg);
        imageView.setImageResource(R.drawable.online);
    }

}catch(Exception e)
{
    Log.e("ClientList_onActivityResult",e.getMessage());
}

} 
```

仅当客户端已经在与其他管理员而不是该管理员交谈时，才会发送结果代码 23。最后的问题是我如何才能停止这种情况，即绿点在列表视图中自动将其位置从 0 更改为 1 .

# tfs - tfspreview 上的 tf.exe

> ID：11748338
> 
> 赞同：6
> 
> 时间：2012-07-31T20:19:27.797
> 
> 标签：tfs, msbuild, tfsbuild, msbuildcommunitytasks, msbuildextensionpack

我需要在 tfspreview 中获取 ChangeSetId 以进行持续集成。我只需要这个单一的号码。我尝试了所有我能找到的可能的 MSBuild 任务，但总是有另一个小问题阻止了我。

因为`MSBuild.ExtensionPack.Tfs.TeamBuild`我得到：

```
Could not load file or assembly 'Microsoft.TeamFoundation.Client, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 
```

并且`TfsClient -task`在 community-pack 中（正在生成以下 exec: `tf.exe history . /StopAfter:1 /noprompt /format:detailed /recursive`）我得到：

```
The specified task executable could not be run. The system cannot find the file specified 
```

我的问题是；是否可以`TF.exe`在 tfspreview 服务器上执行？或者我可以让`Microsoft.TeamFoundation.Client`构建服务器上的程序集执行这两个任务之一吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T21:19:44.373

好吧，我在这里告诉您，无需编写您自己的自定义任务、使用 API 等，这是可能的...... StackOverflow 上有很多文章，但那些有解决方案的文章似乎不适用于 TFS 2010 . 我花了一整天的时间把头撞在墙上 :D

1.  您需要安装 MSBuild 社区任务。确保从此处获取最新版本：[https](https://github.com/loresoft/msbuildtasks) ://github.com/loresoft/msbuildtasks 。最新版本似乎已针对 TFS 2010 程序集进行了更新和重建。

2.  您将使用 MSBuild.Community.Tasks.Tfs.TfsClient 任务。您收到有关无法运行可执行文件的错误的原因是因为这是一个 MSBuild ToolTask​​，您需要将可执行文件的路径作为属性 (ToolPath) 传递给任务。

3.  TfsClient 任务只是 tf.exe 的包装，并且该任务缺少许多可能的功能，用于以 MSbuild-y 方式处理开关。（并且此任务的文档不存在 - 我不得不查看代码）幸运的是，我发现您可以输入所有命令行开关作为命令本身的一部分。

4.  所以你的最终电话看起来像这样......

    ```
    <MSBuild.Community.Tasks.Tfs.TfsClient ToolPath="$(PathToTfTool)"
                                       Command="history /collection:$(TfsProjectCollectionUrl) /stopafter:1 /version:T /format:detailed $(VersionControlPathForBuildWorkspace)"
                                       Recursive="true"
                                       > 
    ```

    ```
    <Message Text="TFS ChangeSetNumber: $(ChangesetNumber)" /> 
    ```

在 22 次悲惨的失败构建或没有数据的构建之后，我终于得到了...... TFS ChangeSetNumber：41

雅虎！

从 Martin Woodward 得到命令： [http](http://www.woodwardweb.com/vsts/determining_the.html) ://www.woodwardweb.com/vsts/determining_the.html 确保您使用 /DETAILED 开关，否则它不会返回更改集。我必须查看任务的代码并弄清楚它是如何解析 tf.exe 的输出来解决这个问题的。

TfsClient 的代码供参考： [https ://github.com/loresoft/msbuildtasks/blob/master/Source/MSBuild.Community.Tasks/Tfs/TfsClient.cs](https://github.com/loresoft/msbuildtasks/blob/master/Source/MSBuild.Community.Tasks/Tfs/TfsClient.cs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T08:23:50.000

这是对我有用的代码行……经过几个小时和几次尝试。不同之处在于我在

在哪里：

*   ToolPath ="C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE" - 取决于您使用的是 32 位还是 64 位。

*   $/WorkspacePath 我的工作空间的路径名，你可以使用 tf workspace 命令查看

    ```
    <MSBuild.Community.Tasks.Tfs.TfsClient ToolPath="C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE"
                                   Command="history /s:http://tfsserver01:8080/tfs/collectionname /stopafter:1 /version:T /format:detailed $/WorkspacePath"
                                   Recursive="true" >
      <Output TaskParameter="Changeset" PropertyName="ChangesetNumber"/>
    </MSBuild.Community.Tasks.Tfs.TfsClient>
    <Message Text="TFS ChangeSetNumber: $(ChangesetNumber)" /> 
    ```

但是感谢这个线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:06:29.913

MSBUILD 工作流程到底是什么样的？您是将此参数传递给 MSBUILD 还是某些自定义组件在 MSBUILD 运行时获取此信息？

我遇到了[InformationNodeConverters](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.build.client.informationnodeconverters.aspx)类，它具有 GetAssociatedChangesets 方法，该方法[接受](http://msdn.microsoft.com/en-us/library/cc339559.aspx)IBuildDetail[并](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.build.client.ibuilddetail.aspx)返回[IChangesetSummary](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.build.client.ichangesetsummary.aspx)列表。这还要求您在执行 MSBUILD 任务之前已经关联了您的变更集。今晚我需要检查我的 TFSPreview 实例，看看我是否可以编辑构建模板，但我怀疑你应该能够使用这样的东西。

# sql - 动态 SQL 函数

> ID：11748343
> 
> 赞同：-1
> 
> 时间：2012-07-31T20:19:41.917
> 
> 标签：sql, dynamic, pdo

我正在寻找构建一个函数，该函数将动态生成 SQL 并使用 PDO 和准备好的语句执行它，而无需对列名/where 子句进行硬编码。where 子句“卡路里”和“颜色”下面的示例是硬编码的，如果情况需要，我希望能够添加其他标准以及更少或没有 where 子句的功能。

```
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < ? AND colour = ?');
$sth->execute(array($calories, $colour)); 
```

这是一个插入函数，它允许您动态传递我创建的值。

```
public function insert($table,$columnValueArray){ 
     $columns = implode(",",array_keys($columnValueArray)); 
     $sql = "INSERT INTO ".$table." (?) VALUES (?)"; 
     $sth = $conn->prepare($sql); 

     foreach($columnValueArray as $singleArray){ 
         $values = implode(",",$singleArray); 
         $sth->execute(array($columns),$values); 
     } 
} 
```

我想要一个与此类似的函数来创建一个更新函数，问题是更新函数需要一个 where 子句，它可以为数组中的每一行更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T21:46:19.420

实际上，我前段时间对这个问题做出了类似的回答：

[PDO多过滤sql查询](https://stackoverflow.com/questions/11747756/pdo-multi-filter-sql-query/11747911#11747911)

它将`WHERE`根据`$_POST`数组中的命名参数绑定动态构建基本子句，因此它不能与`?`参数一起使用，但老实说，我不确定为什么你要依赖数组的顺序来阻止 SQL 注入和其他此类攻击，因为在 PHP 中不能始终保证数组的顺序。

# android - 使用 HttpResponse 调用 url

> ID：11748359
> 
> 赞同：0
> 
> 时间：2012-07-31T20:20:35.520
> 
> 标签：android, url, httpresponse

我正在制作一个调用 url 的应用程序。拨打电话的方式如下：

```
 //…
    public String doInBackground(String... urls){
                String url = urls[0];

                try {
                    Log.i("base","Parsing");    
                    // defaultHttpClient
                    DefaultHttpClient httpClient = new DefaultHttpClient();
                    HttpPost httpPost = new HttpPost(url);

                    HttpResponse httpResponse = httpClient.execute(httpPost);
                    HttpEntity httpEntity = httpResponse.getEntity();
                    xml = EntityUtils.toString(httpEntity);

                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                return xml;
            }

    //...

new callingUrl().execute("http://www.myurl.com/directory/myxml.xml"); 
```

我有兴趣知道是否通过日志或其他方式，任何人都可以看到我调用的 URL

如果是这样，还有什么要隐藏的吗？

非常感谢您提前

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:46:21.340

除非您使用 SSL，否则任何聪明的用户都可以通过外部方式查看您的 http 流量时看到它。除此之外，除非您自己记录或抛出异常以打印 URL，否则我认为不应通过日志访问它。而且，从 Android 4.1 开始，[应用程序无法读取日志](https://stackoverflow.com/questions/11461650/read-logs-permission-on-jelly-bean-api-16)。

我还质疑您为什么要隐藏 URL。如果你是一个好人，通过默默无闻的安全性很少能奏效。如果你为了邪恶的目的而隐藏它，你就是邪恶的。:)

# javascript - 将 Node.js 的 REPL 返回值从下划线 _ 更改为其他值？

> ID：11748360
> 
> 赞同：2
> 
> 时间：2012-07-31T20:20:37.913
> 
> 标签：javascript, node.js, underscore.js, read-eval-print-loop

相关问题：[在 Node.js 中使用 Underscore 模块](https://stackoverflow.com/questions/5691901/using-the-underscore-module-with-node-js)

有没有办法更改变量 Node.js 的[REPL](http://nodejs.org/api/repl.html#repl_repl_features)将最后一个返回值设置为？如果您可以将其从更改`_`为`__`或`$_`，则可以将下划线模块全球化，这样您就不必在每个文件中将其设置为变量：[https ://gist.github.com/3220108](https://gist.github.com/3220108)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-03T23:39:33.503

我想出了一种使用本机 Node`repl`模块的方法。而不是仅仅`node`在命令行运行，把它放在类似的地方`console.js`，然后运行`node console.js`：

```
var repl = require('repl')
var vm = require('vm');

var _;

var server = repl.start({
  eval: function (cmd, context, filename, callback) {
    try {
      var match = cmd.match(/^\((.*)\n\)$/);
      var code = match ? match[1] : cmd;
      context._ = _;
      var result = vm.runInThisContext(code, filename);
    } catch (error) {
      console.log(error.stack);
    } finally {
      _ = context._;
      callback(null, result);
    }
  }
}).on('exit', function () {
  process.exit(0);
}); 
```

这是一个要点：[https ://gist.github.com/jasoncrawford/6818650](https://gist.github.com/jasoncrawford/6818650)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T02:28:28.947

`_`除非您想编辑源代码，否则我认为您无法更改。node.js REPL 似乎在[`lib/repl.js`](https://github.com/joyent/node/blob/v0.8.4-release/lib/repl.js); 如果你在图书馆里闲逛一下，你会看到[这样](https://github.com/joyent/node/blob/v0.8.4-release/lib/repl.js#L231)的事情：

```
self.context._ = self.context[cmd] = lib;
self.outputStream.write(self.writer(lib) + '\n'); 
```

[像](https://github.com/joyent/node/blob/v0.8.4-release/lib/repl.js#L308)这样：

```
self.context._ = ret;
self.outputStream.write(self.writer(ret) + '\n'); 
```

该`self.context`对象是 REPL 的全局上下文或命名空间（类似于`window`在浏览器中），因此`self.context._ = ret;`相当于`_ = ret`从 REPL 的提示符中说。

所以`_`是硬连线的，除非你想破解 node.js 库，否则你无能为力。

# c++ - 如何禁用 LLVM 中的优化

> ID：11748362
> 
> 赞同：8
> 
> 时间：2012-07-31T20:20:42.000
> 
> 标签：c++, c, llvm, clang

我正在`clang`使用 -O4 优化编译代码。但是，我想禁用函数的内联。我有自己的 LLVM 通行证，可以将一些代码注入到生成的代码中。通过后，我想启用函数的内联。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:28:28.163

您可以使用 opt ，它[表示](http://llvm.org/docs/CommandGuide/opt.html)它可以按任何顺序运行通行证。

```
clang -c main.cpp -O0 -emit-llvm | opt -load yourplugin -yourpass -inline 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T09:48:33.663

如果您正在破解 clang，您可以更改文件中的通行证顺序`clang/lib/CodeGen/BackendUtil.cpp`。您应该在方法内联之前插入您的通行证`CreatePasses()`。

# mysql - MySQL 集群数据/SQL 节点在 ndbd 下连接但不在 mysqld 下

> ID：11748363
> 
> 赞同：3
> 
> 时间：2012-07-31T20:20:44.397
> 
> 标签：mysql, cluster-computing, connect

在 MySQL 集群中，我有三台主机，一台带有管理器节点，另外两台都是数据节点和 sql 节点。可以连接到管理器，但是只能作为 [ndbd] 而不是 [mysqld]... 这意味着管理器将它们视为数据节点而不是 sql 节点。除了“未连接”部分之外，一切看起来都应该如此，并且我没有收到任何错误消息。所以我的问题是为什么管理器节点只将每台机器识别为数据节点而不是 mysql 节点？

下面你可以看到 ndb_mgm 集群配置，后面跟着 config.ini 的内容：

```
    集群配置
    ---------------------
    [ndbd(NDB)] 2 个节点
    id=2 @10.0.40.105 (mysql-5.5.25 ndb-7.2.7, Nodegroup: 0, Master)
    id=3 @10.0.40.100（mysql-5.5.25 ndb-7.2.7，节点组：0）

    [ndb_mgmd(MGM)] 1 个节点
    id=1 @10.0.40.119 (mysql-5.5.25 ndb-7.2.7)

    [mysqld(API)] 2 个节点
    id=4（未连接，接受来自任何主机的连接）
    id=5（未连接，接受来自任何主机的连接）

```

配置.ini：

```
    [ndbd 默认]
    # 影响所有数据节点上 ndbd 进程的选项：
    NoOfReplicas=2 #副本数

    [tcp 默认]
    # TCP/IP 选项：

    [ndb_mgmd]
    # 管理进程选项：
    hostname=10.0.40.119 #MGM节点的主机名或IP地址
    datadir=/var/lib/mysql-cluster # MGM 节点日志文件目录
    节点 ID=1

    [ndbd]
    # 数据节点 1 的选项：
                                    #（每个数据节点一个 [ndbd] 部分）
    hostname=10.0.40.105 #主机名或IP地址
    datadir=/usr/local/mysql/data # 这个数据节点的数据文件的目录
    节点 ID=2

    [ndbd]
    # 数据节点 2 的选项：
    hostname=10.0.40.100 #主机名或IP地址
    datadir=/usr/local/mysql/data # 这个数据节点的数据文件的目录
    节点 ID=3

    #one [mysqld] 每个存储节点
    [mysqld]
    [mysqld]

```

/etc/my.cnf：

```
[mysqld]
ndbcluster
ndb-connectstring=10.0.40.119

[mysql_cluster]
ndb-connectstring=10.0.40.119

```

我对启动mysqld有些困惑。我启动每个节点的过程如下：

ndb_mgmd：

```
ndb_mgmd --initial --skip-config-cache -f /var/lib/mysql-cluster/config.ini

ndb_mgm

```

ndbd/mysqld：

```
ndbd——初始

/etc/init.d/mysql.server 启动

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:09:16.827

您尚未`my.cnf`为您显示文件，`mysqlds`但我的猜测是您在其`[mysqld]`部分中缺少以下两行之一：

```
ndbcluster

ndb-connectstring=10.0.40.119:1186 
```

好的 - 所以你已经在`my.cnf`文件中定义了这些参数。

接下来要检查 - 您是否使用`mysqld`MySQL Cluster 附带的（即不是“常规” `mysqld`- 不支持）？

尝试从选项开始`mysqld`，`--verbose`看看是否有更多线索。查看集群日志（应该在**/var/lib/mysql-cluster文件夹中的****10.0.40.119**上。查看由.**`mysqld`**

# css - Chrome：同一个版本，同一个页面的不同CSS样式

> ID：11748371
> 
> 赞同：2
> 
> 时间：2012-07-31T20:22:01.957
> 
> 标签：css

我有一个奇怪的问题。我和我的客户都有相同版本的 Chrome 浏览器：20.0.1132.57 m。问题是，我从我的客户那里得到了关于某些页面上糟糕的 css 布局的反馈（一切都被破坏了，所有 css 样式都没有应用）。问题是，当我进入该页面时，一切都很好。什么可能导致该问题？我不知道从哪里开始挖掘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:43:19.793

**`CTRL`使用+ （强制刷新）**缓存删除**和刷新站点`R`应该可以解决您客户端的问题。**

# javascript - 无法让 SimpleHTTPRequestHandler 响应 AJAX

> ID：11748372
> 
> 赞同：9
> 
> 时间：2012-07-31T20:22:05.823
> 
> 标签：javascript, jquery, python, ajax, simplehttpserver

我最近尝试根据[这个](https://stackoverflow.com/questions/336866/how-to-implement-a-minimal-server-for-ajax-in-python)实现 SimpleHTTPRequestHandler 来接受 AJAX 请求。

尽管就从客户端接收请求而言，一切似乎都正常工作，但我无法将任何内容发送回客户端，当我尝试 self.wfile.write("foo") 时，我在客户端中得到响应；但是，来自 XmlObject 的响应文本是完全空白的！？！

如果有人能对此有所了解，那就太好了！

**编辑：**我认为我的 AJAX 调用结构正确，因为我从 Python 得到响应（我已经在调试模式下检查过）；但是，当我取回一个对象时，我没有收到任何回复 responseText 的消息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T01:49:07.283

确保您的响应具有内容类型的**send_header() 。**我已经看到 AJAX 请求在没有这个的情况下会感到困惑。您还可以尝试将 POST 切换为 GET 进行调试，并确保浏览器可以看到内容。

如果您将查询或浏览器指向**127.0.0.1/test** ，这是一个返回 XML 的简单 HTTP 示例：

```
import SimpleHTTPServer, SocketServer
import urlparse

PORT = 80

class MyHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
   def do_GET(self):

       # Parse query data & params to find out what was passed
       parsedParams = urlparse.urlparse(self.path)
       queryParsed = urlparse.parse_qs(parsedParams.query)

       # request is either for a file to be served up or our test
       if parsedParams.path == "/test":
          self.processMyRequest(queryParsed)
       else:
          # Default to serve up a local file 
          SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self);

   def processMyRequest(self, query):

       self.send_response(200)
       self.send_header('Content-Type', 'application/xml')
       self.end_headers()

       self.wfile.write("<?xml version='1.0'?>");
       self.wfile.write("<sample>Some XML</sample>");
       self.wfile.close();

Handler = MyHandler

httpd = SocketServer.TCPServer(("", PORT), Handler)

print "serving at port", PORT
httpd.serve_forever() 
```

# php - 函数中的变量未传递给php

> ID：11748375
> 
> 赞同：0
> 
> 时间：2012-07-31T20:22:23.170
> 
> 标签：php, javascript, html

我在将变量从我的 javascript 函数传递到我的 php 页面时遇到了一些麻烦。open_boosters 从我想传递给 site3.php 的数组中返回一个随机变量。我知道 PHP 代码首先被执行，但是如何在用户不必点击任何东西的情况下传递这些变量？

**> Main.html**

```
<p id="generatenumbers"></p>
<script>
var open_boosters = function()
     {
        var i, j;
        var array=[];

        for(i=0; i < 13; i++)
        {
            (array[i] = Math.floor(Math.random()*14)+16);

                for(j=0;j<i;j++)
                {
                    while(array[i]==array[j])
                    {
                        (array[i]= Math.floor(Math.random()*14)+16);
                    }
                }
                return array[i]; 
        }
     }

window.addEventListener('DOMContentLoaded', function () 
    {
    var randnumb = open_boosters();

    document.getElementById("generatenumbers").innerHTML=open_boosters();
    document.getElementById("randImg").src = "site3.php?rndNum"+randnumb;
    }, false);
</script> 
```

> **站点3.php**

```
<?php
$mysqli=mysqli_connect('localhost','root','','draftdb');
if (!$mysqli)
die("Can't connect to MySQL: ".mysqli_connect_error());

$stmt = $mysqli->prepare("SELECT display.PICTURE_ID 
FROM cards  
INNER JOIN display ON cards.DISPLAY_ID = display.DISPLAY_ID 
WHERE display.DISPLAY_ID=? AND cards.CARD_TYPE ='rare'" );

$displayid = isset($_GET['randnumb'])?  $_GET['randnumb'] : false;  

//echo "Number: ".$displayid." ";
$stmt->bind_param("i", $displayid);
$stmt->execute();
$stmt->bind_result($image);
$stmt->fetch();
//header("Content-Type: image/jpeg");
echo $image; 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:38:37.773

我可以通过评论中建议的更改来完成这项工作：

*   做`open_boosters()`一个函数
*   `=`在 URL 中添加缺失
*   `randnumb`对两个`getElementById`集合函数使用相同的变量

```
<p id="generatenumbers"></p>
<img src="" id="randImg" />

<script>
function open_boosters() 
{
    var i, j;
    var array=[];

    for(i=0; i < 13; i++)
    {
        (array[i] = Math.floor(Math.random()*14)+16);
        for(j=0;j<i;j++)
        {
            while(array[i]==array[j])
            {
                (array[i]= Math.floor(Math.random()*14)+16);
            }
        }
        return array[i]; 
    }
}

window.addEventListener('DOMContentLoaded', function () 
{
    var randnumb = open_boosters();

    document.getElementById("generatenumbers").innerHTML=randnumb;
    document.getElementById("randImg").src = "site3.php?rndNum="+randnumb;
}, false);

</script> 
```

然后随机数可用于 site3.php 脚本作为`$_GET['rndNum']`(not `$_GET['randnumb']`)。

# ruby-on-rails - Rails：Capybara、复选框和 ID

> ID：11748379
> 
> 赞同：1
> 
> 时间：2012-07-31T20:22:37.213
> 
> 标签：ruby-on-rails, ruby, capybara

我正在构建一个要向其发送电子邮件的用户列表，其编码为（haml，尽管这不是重点）

```
 - @users.each do  |user|
    .field<
      = check_box_tag "user_ids[#{user.id}]",user.id
      %nbsp
      = user.name 
```

代码工作正常（尽管它可能会被重构）。但是，我在编写 Capybara 测试时遇到问题，因为对象 ID 会随着时间而变化。例如，我有以下黄瓜测试：

```
.....
Given user "User one" exists
And "User two" esists
......
When I check "user_ids_152"
And I check "user_ids_153"
..... 
```

我得到 Capybara::ElementNotFound: cannot check field, no checkbox with id, name, or label 'user_ids_152' found

因为用户 ID 现在是 272。我在 SO 上搜索并找不到合适的解决方案。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:10:40.267

我不确定您的要求，但是为您的复选框添加 HTML 标签可以更轻松地通过 Capybara 进行一致检查：

```
%label{ :for => "user_ids_#{user.id}"}
  = check_box_tag "user_ids[#{user.id}]",user.id, :id => "user_ids_#{user.id}"
  = user.name 
```

然后你可以这样做：

```
When I check "User one" 
```

我应该补充一点，你编写格式良好、符合标准的 HTML 越多，从长远来看，你就越容易使用像 Capybara 这样的东西。如果您使用 Rails 视图助手，它们可以很好地帮助您，但请注意您在它们之外生成的任何 HTML。

我喜欢防弹网页设计作为入门：

[http://www.simplebits.com/publications/bulletproof/](http://www.simplebits.com/publications/bulletproof/)

# ios - iOS - 使用 3G 随机“无法连接到主机”

> ID：11748382
> 
> 赞同：8
> 
> 时间：2012-07-31T20:22:40.163
> 
> 标签：ios, nsurlconnection, 3g

我正在开发一个 iOS 应用程序，它作为业务服务器的瘦客户端。有很多请求发送到服务器，下载了很多数据。

我不使用任何花哨的请求框架，只是`NSURLConnection`与委托异步。

该应用程序通常适用于 wifi 和 3G**但**

一些用户在使用 3G（在美国）时报告随机断开连接。所有请求都正常，但有时请求会因“无法连接到主机”（-1004）错误而失败。

这对用户体验影响很大。

一些事实：

1.  在wifi上不会发生
2.  用户报告说使用 3G 时其他应用程序不会发生这种情况。
3.  这不是超时问题，启动连接后 0.3-1.0 秒出现错误。
4.  我们无法使用 traceroute 重现该问题。
5.  使用`SCNetworkReachability`主机似乎是可以访问的（我知道这个 API 的局限性）。

**问题 问题**的原因可能是什么？3G 和 wifi 的连接属性有哪些不同？我该如何调试它？

目前我看到的唯一解决方案是如果前一个请求失败，则尝试再次发送请求。但是，我想先找到问题的原因。

**编辑**问题可能是由我们的路由器之一引起的。IT 人员仍在检查问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:25:06.220

所有错误代码都可以在 Apple 文档中找到

[CFNetwork 错误代码参考](https://developer.apple.com/library/mac/#documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html)

代码**-1004**仅描述为

> *kCFURLErrorCannotConnectToHost*
> 
> 连接失败，因为无法与主机建立连接。在 OS X v10.6 及更高版本中可用。在 CFNetworkErrors.h 中声明。

这基本上意味着用户有一个连接（他未处于飞行模式，数据流量已打开，他的手机已在网络中注册，您有一个有效的 URL 等）但被主动**阻止连接到服务器**。如您所描述的，如果服务器没有响应，那么在较长的等待时间后，您可能会遇到类似超时错误的情况。这种错误可能是由阻止到服务器的流量引起的，例如，如果用户位于防火墙或代理后面，就会发生这种错误。

该问题实际上可能是由提供商引起的，特别是如果您对某些用户没有问题，而对其他用户没有任何问题。

正如其他一些海报所说，您可以尝试向您的用户询问他们的服务提供商，以及有关他们位置的更多详细信息，或者当他们遇到错误时他们在做什么（比如坐在车里或在乡下受到不好的接待）

如果您找不到任何模式，并且如果错误确实只是随机发生并且仅针对某些用户，而且只是有时，我只会认为这是另一个不可避免的问题，可能是由于**手机永远无法保证一直保持连接**，并且某些手机提供商可能并不总是提供应交付的所有包裹的 100% ......那么您需要做的只是处理错误。

***通过简单地重试而不向用户显示错误来消除错误，至少要等到足够的重试次数之后。***

最后要考虑的一件事：

如果您从您的应用程序发送大量请求以及大量数据，请确保您不会通过发送大量未完成的请求来“过度消耗”。这可能会导致正在路上的服务器或某些代理服务器拒绝您的请求，因为它正忙于回答您的其他请求。被拒绝的请求可能会导致这样的错误。确保发送合理数量的请求，以便用户的设备有时间“呼吸”。

让你的重试方案成为一个聪明的方案，你可以在更短的时间内重试多次，如果它一直失败，则增加下一次重试的时间跨度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T14:00:59.367

I'd revisit the assumption that it's only affecting your application. There's lots of ways users might only *see* problems with your application even if the problem is with their Internet connection. For instance, perhaps the other applications retry transparently - users would simply see slower update speeds. Or perhaps dropped connections simply don't matter to the other applications.

Have you asked the affected users which provider they are using? If all of them use the same mobile network, that would indicate it's a problem with the network rather than your application.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T14:06:25.027

在我看来，造成这种情况的原因仅仅是蜂窝数据和互联网访问的性质。您可能知道，当您使用蜂窝连接时，有时 - 特别是在您移动时，连接会在改变广播塔时切换网络。

您提到您正在下载大量数据并且间隔很短，我认为这会使您的应用程序更容易出现此问题，并且我不会接受其他应用程序不会发生这种情况的一秒钟 - 这是关于定时。

# r - 在ggplot2中的X轴上格式化日期

> ID：11748384
> 
> 赞同：68
> 
> 时间：2012-07-31T20:22:43.913
> 
> 标签：r, ggplot2

我很难让 x 轴看起来适合我的图表。

这是我的数据（通过生成`dput()`）：

```
df <- structure(list(Month = structure(1:12, .Label = c("2011-07-31", "2011-08-31", "2011-09-30", "2011-10-31", "2011-11-30", "2011-12-31", "2012-01-31", "2012-02-29", "2012-03-31", "2012-04-30", "2012-05-31", "2012-06-30"), class = "factor"), AvgVisits = c(6.98655104580674,7.66045407330464, 7.69761337479304, 7.54387561322994, 7.24483848458728, 6.32001400498928, 6.66794871794872, 7.207780853854, 7.60281201431308, 6.70113837397123, 6.57634103019538, 6.75321935568936)), .Names = c("Month","AvgVisits"), row.names = c(NA, -12L), class = "data.frame") 
```

这是我要绘制的图表：

```
ggplot(df, aes(x = Month, y = AvgVisits)) + 
  geom_bar() +
  theme_bw() +
  labs(x = "Month", y = "Average Visits per User") 
```

该图表工作正常 - 但是，如果我想调整日期的格式，我相信我应该添加这个： `scale_x_date(labels = date_format("%m-%Y"))`

我正在努力使日期标签为“MMM-YYYY”

```
ggplot(df, aes(x = Month, y = AvgVisits)) + 
  geom_bar() +
  theme_bw() +
  labs(x = "Month", y = "Average Visits per User") +
  scale_x_date(labels = date_format("%m-%Y")) 
```

当我绘制它时，我继续收到此错误：

`stat_bin: binwidth defaulted to range/30\. Use 'binwidth = x' to adjust this.`

`geom_line`尽管对and的格式进行了数小时的研究`geom_bar`，但我无法修复它。谁能解释我做错了什么？

编辑：作为后续想法：您可以使用日期作为一个因素，还是应该`as.Date`在日期列上使用？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2017-03-21T14:28:13.863

将月份显示为 2017 年 2 月 2017 年 2 月等：

```
scale_x_date(date_breaks = "1 month", date_labels =  "%b %Y") 
```

如果日期占用太多空间，请调整日期：

```
theme(axis.text.x=element_text(angle=60, hjust=1)) 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-07-31T20:51:59.933

> 你可以使用日期作为一个因素吗？

是的，但您可能不应该这样做。

> ...还是应该`as.Date`在日期列上使用？

是的。

这导致我们这样做：

```
library(scales)
df$Month <- as.Date(df$Month)
ggplot(df, aes(x = Month, y = AvgVisits)) + 
  geom_bar(stat = "identity") +
  theme_bw() +
  labs(x = "Month", y = "Average Visits per User") +
  scale_x_date(labels = date_format("%m-%Y")) 
```

![在此处输入图像描述](../Images/31dd0360cd7e0ee92a37a2409c509a78.png)

我已添加`stat = "identity"`到您的`geom_bar`电话中。

此外，有关 binwidth 的消息不是错误。错误实际上会在其中显示“错误”，同样，警告中始终会显示“警告”。否则，它只是一个消息。

# objective-c - 您如何在目标 c 中使用两个正确的语句来执行 if 语句

> ID：11748386
> 
> 赞同：3
> 
> 时间：2012-07-31T20:22:50.753
> 
> 标签：objective-c

> **可能重复：**
> [如何进行 AND 或 OR 表达式？](https://stackoverflow.com/questions/6118338/how-do-i-make-and-or-or-expressions)

我知道在Java中它是&&。在 Objective-C 中它是什么。要么是错误的，要么我的其他代码不起作用，因为它没有做布尔运算。这么快是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:23:35.933

“AND”语句的语法是：（语句 && 语句）

“OR”语句的语法是：（语句 || 语句）

听起来您的其他代码可能是问题所在。

您还可以将这些语句组合成类似的东西

```
((true || false) && (true || false))

//in this example it simplifies to  
(true) && (false)

(false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:30:16.527

```
if (condition1 && condition2) {
    // code executes only if both conditions are true
}

if (condition3 || condition4) {
    // code executes if either condition is true
} 
```

# qt - 等待 QMutex/QSemphore/QWaitCondition 和一个 QT 信号

> ID：11748387
> 
> 赞同：1
> 
> 时间：2012-07-31T20:23:00.777
> 
> 标签：qt, signals, producer-consumer

我正在尝试使用线程在 QT 中实现生产者/消费者模式。阅读[Qt](http://qt-project.org/doc/qt-4.8/threads.html)和 google 中的线程支持页面让我想到了一个问题：如果主应用程序想要结束线程的存在，我该如何等待 QMutex/QSemphore/QWaitCondition 和退出信号。

换句话说：

*   等待一份工作 -> 做这份工作
*   等待退出信号 -> 退出线程

我可以通过 QT 中的一个事件循环来实现这一目标吗？或者这不是这个案子的方法吗？

# jquery - 通过jquery添加动画

> ID：11748393
> 
> 赞同：1
> 
> 时间：2012-07-31T20:23:03.123
> 
> 标签：jquery

我有以下 Jquery 代码在特定的后面插入一个 html`<TR>`

```
$("#imgDiminui_" + Id).closest("tr").after(row); 
```

工作正常，但我想为此添加一个动画。

我尝试以下

```
$("#imgDiminui_" + Id).closest("tr").after(row).animate({
                      height: "18px",
                      opacity: 0.25
                  , 500); 
```

工作正常，

但是当我尝试

```
$("#imgDiminui_" + Id).closest("tr").after(row).slideDown(1000); 
```

没啥事儿。有人可以帮我把`slideDown effect`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:25:50.357

尝试

```
$("#imgDiminui_" + Id).closest("tr").after(row).hide().slideDown(1000); 
```

# c++ - 访问引用变量会终止程序

> ID：11748399
> 
> 赞同：0
> 
> 时间：2012-07-31T20:23:24.153
> 
> 标签：c++, oop, qt, pass-by-reference

当我引用引用变量 src_ 的属性时，我的程序终止。代码的主要思想是 MainWindow 类调用 SettingsWindow 类来显示一些设置。还有两个额外的类负责保存的设置，它们是 ConfigSource 和 ConfigUpdater。src_ 被定义为 ConfigUpdater 中的一个引用变量。这是代码：

在主窗口内：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    ConfigSource cfg;

        settings = new SettingsWindow(cfg,this);

        settings->print_config(cfg.config());
... 
```

SettingsWindow 标题和来源：

```
#ifndef SETTINGSWINDOW_H
#define SETTINGSWINDOW_H

#include <QMainWindow>
#include <QModelIndex>

#include <QSignalMapper>
#include <QRadioButton>
#include <QSpinBox>
#include <QTimer>

#include "cameracommands.h"

struct Config
{
    /* General Options */
    QString general_key_lock;
    QString general_back_light;
};

class ConfigSource 
{
    public:

    ConfigSource() {
        qDebug() << "inside configSource :))";
        config_.general_aperture_control   = "Reset";
        config_.general_automatic_exposure = "Full Auto";

    }

    Config config() const {return config_;}

    void setConfig(const Config& cfg) {config_ = cfg;}

//        Config config_;
    private:
    Config config_;
};

class ConfigUpdater : public QObject
{
    Q_OBJECT
public:
    ConfigUpdater(ConfigSource& src) : src_(src) {}

public slots:

    void apply () {src_.setConfig(tempConfig_);}
    void cancel() {tempConfig_ = src_.config();}

public:

    void updateGeneralBackLight(QString s)             {tempConfig_.general_back_light         = s; qDebug() << "BackLight updated :)";}
    void updateGeneralKeyLock(QString s)               {tempConfig_.general_key_lock           = s; qDebug() << "KeyLock updated :)";}

    Config tempConfig_;
    ConfigSource& src_;
};

//----------------------------

namespace Ui {
    class SettingsWindow;
}

class SettingsWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit SettingsWindow(ConfigSource &src, QWidget *parent = 0);

    ~SettingsWindow();

    void print_config(Config cfg);

signals:
    void clicked(const QString &text);
    void sendToPLC(QByteArray );

public slots:
    void updateGeneralBackLight();
    void updateGeneralKeyLock();

private:

    void set_mappings();

    Ui::SettingsWindow *ui;
    ConfigUpdater      *config_updater;
};

#endif // SETTINGSWINDOW_H 
```

设置源文件

```
SettingsWindow::SettingsWindow(ConfigSource &src, QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::SettingsWindow)
{
    /* initializations */
    ui->setupUi(this);
    config_updater = new ConfigUpdater(src); 
```

这部分很关键，当我尝试从应用和取消插槽访问 src_ 时，程序终止，例如：

```
void SettingsWindow::on_pushButton_3_clicked() //apply
{
    qDebug() << "Apply Button";

    print_config(config_updater->src_.config());
    config_updater->apply();
    print_config(config_updater->src_.config());
}

void SettingsWindow::print_config(Config config)
{
    qDebug() << config.general_key_lock;
    qDebug() << config.general_back_light;
}

void SettingsWindow::on_sendToMainButton_clicked() /* cancel */
{
   print_config(config_updater->tempConfig_);

   config_updater->cancel();

   print_config(config_updater->tempConfig_);

   print_config(config_updater->src_.config_);
} 
```

不过，打印 _tempconfig 变量可以正常工作！为了简单起见，我从头文件中删除了一些按钮槽。

如果你告诉我如何解决这个错误，我会很感激 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:30:05.607

`ConfigSource cfg;`对于 的构造函数是本地的`MainWindow`。

当负责调用发生崩溃的槽的信号时，`MainWindow`构造函数早已执行完毕（即使`MainWindow`实例还在），所以引用不再有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:29:58.447

该`ConfigSource`对象在构造函数中被创建为局部变量`MainWindow`，因此它在该构造函数的末尾被销毁，并且所有其他引用都变得无效。

您可以将其声明为成员`MainWindow`以增加其生命周期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:55:57.330

您遇到的问题与您之前提出此问题时遇到的问题基本相同。

早期的 ConfigSource 是 SettingsWindow 构造函数的本地，所以它被过早地销毁了。现在 ConfigSource 对 MainWindow 构造函数来说是本地的，所以当 MainWindow 构造函数退出时它会被销毁，但这还为时过早！ConfigSource 对象必须至少与 SettingWindow 对象一样长。一种方法是将 ConfigSource 对象放在 SettingsWindow 对象中，但我似乎记得您不想这样做。另一种方法是在 main 中声明 ConfigSource 对象（因此它与程序一样长）并通过对 SettingWindow 构造函数的引用将其传递下来。

只有您知道代码的结构，您只需要掌握对象的寿命，并记住 ConfigSource 对象的寿命必须至少与 SettingWindow 对象一样长。你真的需要把这个想法直接放在你的脑海里，否则你会经常遇到这些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:32:33.733

其他两个答案很好地解释了这一点（`ConfigSource cfg;`对于您的 MainWindow 的构造函数来说是本地的，因此在构造函数完成后内存会被回收）。

修复使用堆分配（通过 operator `new`）

# model-view-controller - 是否可以在spine.js 模型中使用多个@configure？

> ID：11748400
> 
> 赞同：0
> 
> 时间：2012-07-31T20:23:29.280
> 
> 标签：model-view-controller, spine.js

我想知道是否可以调用多个@configure 调用或有条件地在spine.js 模型中调用。如果有两种不同的形式可以从使用相同的模型中受益，这将允许模型被重用。在 spin.js 中是否有其他方法可以实现这一点？

预先感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:25:06.393

深入到`spine`库中，您可以看到`configure()`它将推翻之前的任何配置。它设置`className`和`attributes`清除存储在模型中的当前记录。

我认为无论如何你都不会想要这个。它会简单地定义另一个模型，这听起来像是你想做的事情。模型不应该即时更改。

如果您尝试使用表单在模型上设置不同的字段，您可以简单地使用包含所有字段的配置并将表单应用到模型上。

```
class ExampleModel extends Spine.Model
  @configure "ModelName", "field1", "field2" 
```

像这样的简单形式

```
<form>
  <input type="text" name="field1"/>
</form> 
```

现在您可以从此表单中获取值并将其存储在您的模型中。

```
modelInstance = ExampleModel.fromForm($('form')) 
```

这只会将`field1`属性存储在您的新模型实例上。

关于用例的更多细节会很好。

这可能会有所帮助：[表单文档](http://spinejs.com/docs/forms)

# c# - 如何在 ASP.NET MVC 中保持控制器很小？

> ID：11748403
> 
> 赞同：10
> 
> 时间：2012-07-31T20:23:40.600
> 
> 标签：c#, asp.net-mvc-3, controller, refactoring

我有一个设计精良的架构，其中控制器转到访问与数据库通信的存储库的服务。

因此，控制器中的逻辑保持在最低限度，但我仍然有非常微妙的代码片段可以执行一些任务，例如

*   验证模型
*   安排动作方法参数
*   使用这些参数调用一些服务，如果模型*现在*无效，可能会验证结果并返回视图
*   最后从服务的结果中产生一个模型，并返回它。

根据服务返回的“状态”，一些较长的案例会做不同的事情。

这里有几个例子：

```
[HttpPost]
[AjaxOnly]
[Authorize]
public JsonResult Preview(string input)
{
    LinkResult parsed = linkService.ParseUserInput(input);
    if (parsed.Result == LinkParseResult.Used)
    {
        long? postId = parsed.Link.PostId;
        if (postId.HasValue)
        {
            Post post = postService.GetById(postId.Value, false);
            return Json(new
            {
                faulted = "used",
                link = DetailsRoute(post),
                id = postId
            });
        }
        else
        {
            return Json(new { faulted = "invalid" });
        }
    }
    else if (parsed.Result == LinkParseResult.Invalid)
    {
        return Json(new { faulted = "invalid" });
    }
    else
    {
        Link link = parsed.Link;
        if (link.Description != null && link.Description.Length > 200)
        {
            link.Description = link.Description.Substring(0, 200);
        }
        return AjaxView(link);
    }
} 
```

和（`Post`来自域，`PostModel`是视图模型）

```
private PostModel PostModelConverter(Post post)
{
    Link link = post.Link;
    if (link == null)
    {
        throw new ArgumentException("post.Link can't be null");
    }
    if (link.Type == LinkType.Html)
    {
        return new PostedLinkModel
        {
            Description = link.Description,
            PictureUrl = link.Picture,
            PostId = post.Id,
            PostSlug = postService.GetTitleSlug(post),
            Timestamp = post.Created,
            Title = link.Title,
            UserMessage = post.UserMessage,
            UserDisplayName = post.User.DisplayName
        };
    }
    else if (link.Type == LinkType.Image)
    {
        return new PostedImageModel
        {
            PictureUrl = link.Picture,
            PostId = post.Id,
            PostSlug = postService.GetTitleSlug(post),
            Timestamp = post.Created,
            UserMessage = post.UserMessage,
            UserDisplayName = post.User.DisplayName
        };
    }
    return null;
} 
```

这就提出了一个问题，即视图模型是否真的应该作为规则出现在 Web 项目中，或者它们实际上可能是域或其他项目的一部分。

我不确定我可以对预览操作做很多事情，除了可能使用接收链接并截断描述的 PreviewModel 之外，但这会节省两行。

模型转换器可能应该在其他地方，但我不知道应该在哪里。

想到的另一点是我是否应该使用`partial`关键字拆分此控制器（将其用于自动生成的类以外的其他东西是一种不好的做法吗？），或者根据请求的操作添加使用不同控制器的路由或正在使用什么http方法，通常的处理方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:43:37.747

这已经被问过好几次了：控制器中的业务逻辑我应该
[在](https://stackoverflow.com/questions/235233/asp-net-mvc-should-business-logic-exist-in-controllers)
[哪里将控制器业务逻辑放在 MVC3](https://stackoverflow.com/questions/6341724/where-should-i-put-my-controller-business-logic-in-mvc3)
[保持控制器精简](https://stackoverflow.com/questions/3813065/asp-net-mvc-keeping-a-controller-thin-too-many-action-methods)

以及其他地方的文章：
[ASP MVC 最佳实践 - Skinny Controllers](http://www.arrangeactassert.com/asp-net-mvc-controller-best-practices-%E2%80%93-skinny-controllers/)
[Keep Controllers Thin](http://www.lazycoder.com/weblog/2009/03/16/aspnet-mvc-tip-keep-your-controllers-and-actions-thin/)

社区似乎达成了很好的共识，即这种逻辑属于控制器之外。一般在模型（或 ViewModel）中，但在业务层的*某个地方。*

最后一点，`partials`不鼓励使用非自动生成的代码。如果拆分事物有意义，请这样做。想想你拆分它的原因是什么。这将是一个个案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:42:51.030

```
private PostModel PostModelConverter(Post post)
{
    Link link = post.Link;
    if (link == null)
    {
        throw new ArgumentException("post.Link can't be null");
    }
    if (link.Type == LinkType.Html)
    {
        var model = AutoMapper.Map<PostedLinkModel>(post);
        model.PostSlug = postService.GetTitleSlug(post);
        return model;
    }
    else if (link.Type == LinkType.Image)
    {
        var model = AutoMapper.Map<PostedImageModel>(post);
        model.PostSlug = postService.GetTitleSlug(post);
        return model;
    }
    return null;
} 
```

[http://www.viddler.com/v/b568679c](http://www.viddler.com/v/b568679c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:25:11.980

**控制器将不包含任何域逻辑**

控制器应仅负责：

> 验证输入
> 
> 调用模型来准备视图
> 
> 返回视图或重定向到另一个操作

如果您正在做任何其他事情，那么您是在错误的地方做的，而是您在 Controller 中所做的模型责任。

**如果您遵循此规则，您的操作方法将不会超过 20 - 25 行代码。Ian Cooper 有一篇很棒的帖子[Skinny Controller Fat Model](http://codebetter.com/blogs/ian_cooper/archive/2008/12/03/the-fat-controller.aspx)，请阅读。**

# python - Python GTK + webkit - 在 gtk.main() 之后插入 JavaScript

> ID：11748404
> 
> 赞同：2
> 
> 时间：2012-07-31T20:23:43.530
> 
> 标签：python, webkit, gtk

我在终端中尝试过，一切正常，但如果我在脚本中运行它，我无法在 gtk.main() 之后插入 JavaScript

```
import gtk
import webkit

w = gtk.Window()
b = webkit.WebView()
w.add(b)
b.open('http://example.com')
w.show_all()

gtk.main() # this I don`t run inside terminal

#and after showing window I want to insert some JavaScript code

js = 'alert("a");'
b.execute_script(js) 
```

如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T09:14:08.380

嗯，这个问题实际上在 GUI 编程中非常经典，所以它是解决方案。直接动作（例如按下按钮）和间接动作（webkit 浏览器完成加载页面）总是需要启动位于不同进程或不同线程上的动作（函数）。

在这种情况下，您可以使用object`"load-finished"`给出的事件。`webkit``b`

网页完成加载后，相关函数将启动执行您的 JS 代码。这是代码的样子：

```
def load_finished(webview, frame):
    js = 'alert("a");'
    b.execute_script(js)

b = webkit.WebView()
b.connect("load-finished", load_finished) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:18:37.870

gtk.main() 将阻塞，直到它收到调用 gtk.main_quit() 或其他类似的退出调用。恐怕您必须使用回调或在调用 gtk.main() 之前执行所有 javascript 插入。

令您惊讶的是，在您在终端中按 Ctrl+C 之前，您设法运行 gtk.main() 而不阻塞。

# c#-4.0 - 编辑项目模板

> ID：11748407
> 
> 赞同：0
> 
> 时间：2012-07-31T20:23:49.010
> 
> 标签：c#-4.0, linq-to-sql

我正在尝试从 editItemTemplate 中的 textBox 获取文本，但似乎没有任何效果。我曾尝试在我的 RowUpdating 中使用 FindControl，但仍然没有运气。我在 c# 中工作。关于如何让它发挥作用的任何好的散步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:01:57.910

您需要根据gridview的行索引找到这样的控件。

```
 protected void gvMemberClassificationDetail_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    HiddenField  hdMemberCode = this.gvMemberClassificationDetail.Rows[e.RowIndex].FindControl("hidID") as System.Web.UI.WebControls.HiddenField;
    DropDownList status = this.gvMemberClassificationDetail.Rows[e.RowIndex].FindControl("ddlClassificationStatus") as System.Web.UI.WebControls.DropDownList;
    TextBox Comments = this.gvMemberClassificationDetail.Rows[e.RowIndex].FindControl("txtRemarks") as System.Web.UI.WebControls.TextBox;
    ObjectDataSource4.UpdateParameters["memberCode"].DefaultValue = hdMemberCode.Value;
    ObjectDataSource4.UpdateParameters["status"].DefaultValue = status.SelectedValue;
    ObjectDataSource4.UpdateParameters["comments"].DefaultValue = Comments.Text;
} 
```

# javascript - addListener 不能使用多个标记

> ID：11748408
> 
> 赞同：0
> 
> 时间：2012-07-31T20:23:55.183
> 
> 标签：javascript, ajax, google-maps, google-maps-markers

我正在尝试将 addListeners 分配给有多个标记但不起作用的单个标记。发生的事情是所有的窗口都同时打开，即使我没有点击。当我点击时，什么也没有发生。怎么了？

这是我的代码：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDUE08r9kD1p5QsqOzmI6_EcoUNCJntf5I&sensor=false"></script>
<script type="text/javascript">

    //start the map. code from google maps tutorial.
    function initialize() { 
        var mapOptions = {
          center: new google.maps.LatLng(37.7750, -122.4183),
          zoom: 11,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        //return a map for later use
        return new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions); 
    }

    function request() {
        $.ajax ({
            type: "GET",
            dataType: "json",
            url: "stations.php",
            data: {
                route: $("#route").val()
            },
            success: function(data) {
                var routePathCoords = [];
                var pathColor = data.color; 

                $.each(data.stations, function(i,j) {
                    routePathCoords.push(new google.maps.LatLng(data.lat[i], data.longit[i]));

                });

                //create new map
                var map = initialize();

                //generating the polyline
                var routePath = new google.maps.Polyline({ 
                    path: routePathCoords,
                    strokeColor: pathColor,
                    strokeOpacity: 1.0,
                    strokeWeight: 5
                });

                routePath.setMap(map);

                //creating each marker, display on screen
                $.each(routePathCoords, function(i,c) {
                    var marker = new google.maps.Marker({
                        //obtaining from coordinates array
                        position: c, 
                        map: map,
                        //obtaining from stations array
                        title: data.stations[i] 
                    });

                    var name = marker.title;
                    //listen for click, then activate window
                    google.maps.event.addListener(marker, 'click', stnWindow(name, marker, map));

                });

            },
            error:function (xhr, ajaxOptions, thrownError){
                    console.log(ajaxOptions);
                    alert(xhr.status);
                    alert(thrownError);
                }    
        });
        return false;
    }

    function stnWindow(name, marker, map) {

        $.ajax({
            type: "GET",
            dataType: "json",
            url: "window.php",
            data: {
                name: name
            },
            success: function(data) {
                //initializing variables for window+content
                var station = data.fullname;
                var infoWindow = new google.maps.InfoWindow;
                //adding station title
                var content = "<h1>" + station + "</h1>";
                //get names and times, put into var content
                $.each(data.destns, function(i,n) {
                    content = content + "<h2> Destination: </h2>" + n;
                    content = content + "<h3> Arrival: </h3>" + data.arrivals[i] + "minutes" ;

                });
                infoWindow.setContent(content);
                infoWindow.open(map, marker);
            }
        })
    }
</script>

<script type="text/javascript">

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:35:52.207

您正在执行该`stnWindow`功能而不是分配它。

您可以通过返回仅包含 ajax 调用的函数来解决它，如下所示：

```
function stnWindow (name, marker, map) {
  return function () {
    $.ajax() //...
  }
} 
```

在触发点击之前，这不会触发返回的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:41:41.767

```
Try to replace :   
 google.maps.event.addListener(marker, 'click', stnWindow(name, marker, map));  
by :  
 google.maps.event.addListener(marker, 'click', function(){  
  $.ajax({  
        type: "GET",  
        dataType: "json",  
        url: "window.php",  
        data: {  
            name: name  
        },  
        success: function(data) {  
            //initializing variables for window+content  
            var station = data.fullname;  
            ....
            infoWindow.open(map, marker);
        }  
    })  
}); 
```

# c# - 反序列化 XML 不会导致任何序列元素的数据

> ID：11748410
> 
> 赞同：0
> 
> 时间：2012-07-31T20:24:12.753
> 
> 标签：c#, deserialization, xml-deserialization

我将尽力使这篇文章简短而简洁。如果我需要进行一些编辑以添加代码，我会提前道歉。

**问题**

我有一个能够正确序列化为 XML 的类。该类将 XML 发送到返回 XML 响应的 Web 服务。然后将 XML 响应反序列化为对象以进行额外处理。我能够正确反序列化我的对象，*前提是返回的 XML 不是序列*

**我试过的**

我创建了我的类，看起来像：

```
[other class declarations here to support XML response]

public class OrderInfoListResponse
{
    public List<OrderInfo> OrderInfo { get; set; }

    public OrderInfoListResponse()
    {
        OrderInfo = new List<OrderInfo>();
    }
} 
```

反序列化器看起来像：

```
using (Stream respStream = response.GetResponseStream())
{
    XmlSerializer serializer = new XmlSerializer(typeof(OrderListResponse));
    orderResp = serializer.Deserialize(respStream) as OrderListResponse;
} 
```

如果我传入看起来像这样的数据：

```
 <ResponseBody>
    <PageInfo>
       <TotalCount>51</TotalCount>
       <TotalPageCount>6</TotalPageCount>
       <PageSize>10</PageSize>
       <PageIndex>1</PageIndex>
 </PageInfo>
 <RequestID>4546ASDDAS54</RequestID>
 <OrderInfoList>
        <OrderInfo>
            <SellerID>XXXX</SellerID>
            <OrderNumber>111111111</OrderNumber>
            <InvoiceNumber>222222</InvoiceNumber>
            ....
        </OrderInfo>
 <OrderInfoList> 
```

我能够毫无问题地获得 PageInfo 数据和 RequestID，但我的结果对象显示

```
OrderInfoList
    OrderInfo count = 0 
```

如果我将响应显示为字符串，我会得到 51 个响应。

**问题**

为什么我无法反序列化为 OrderInfo？

**我试过的**

我尝试了以下代码，但我的计数仍然是 0：

```
using (Stream respStream = response.GetResponseStream())
{
    StreamReader readerOK = new StreamReader(respStream);
    string resp = @readerOK.ReadToEnd();
    var myEncoder = new ASCIIEncoding();
    var bytes = myEncoder.GetBytes(resp);
    var memoryStream = new MemoryStream(bytes);
    var xmlSerializer = new XmlSerializer(typeof(OrderListResponse));
    orderResp = xmlSerializer.Deserialize(memoryStream) as OrderListResponse;
 } 
```

在 myEncoder 上设置断点显示字符串 resp 包含完整的 XML 响应，在 orderResp 显示所有字段都设置后设置断点，列表对象除外。

我已经通过在方法开始时将它设置为 null 来实例化我的 orderResp 对象。我还实例化了该类中包含的对象的每个实例，但都没有结果。

如果我从类中删除所有集合（列表、数组等），我可以反序列化 XML 文件中的第一个响应，后续响应不会反序列化并被跳过。

还有其他想法吗？任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:04:10.983

问题是如何创建类。

原来的类看起来像：

公共类 OrderListResponseBody {

```
 public PageInfo PageInfo { get; set; }  
    public string RequestID { get; set; }  
    public string RequestDate { get; set; } 
    public List<OrderInfoListResponse> OrderInfoList { get; set; }  
} 
```

新类如下所示：

```
public class OrderListResponseBody
{

    public PageInfo PageInfo { get; set; }  
    public string RequestID { get; set; }  
    public string RequestDate { get; set; } 
    public List<OrderInfo> OrderInfoList { get; set; }  <!-- notice the change
} 
```

# php - 为什么用括号包裹返回值？

> ID：11748415
> 
> 赞同：1
> 
> 时间：2012-07-31T20:24:30.073
> 
> 标签：php, return-value, parentheses

我正在阅读[Pro PHP Programming](https://rads.stackoverflow.com/amzn/click/com/1430235608)并且在示例中作者在返回值周围使用括号

这有什么区别：

```
function foo($x) {
   return (bar::baz($x));
} 
```

还有这个：

```
function foo($x) {
   return bar::baz($x);
} 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:39:04.883

正如其他人所提到的，它们在功能上是相同的......几乎。如[文档中所述](http://php.net/manual/en/function.return.php)：

> 注意：当通过引用返回时，你不应该在你的返回变量周围使用括号，因为这不起作用。您只能通过引用返回变量，而不是语句的结果。如果你使用 return ($a); 那么你返回的不是变量，而是表达式 ($a) 的结果（当然是 $a 的值）。

PHP 手册还指出了避免括号的（小）性能优势**编辑...请参阅下面的基准编辑**：

> 注意：请注意，由于 return 是一种语言结构而不是函数，因此不需要在其参数周围加上括号。将它们排除在外是很常见的，实际上您应该这样做，因为在这种情况下 PHP 要做的工作较少。

为了安全起见，可能值得避免使用括号。

## 基准测试/编辑

我决定对 php.net 的注释进行测试，看看 PHP 在没有括号中的返回值的情况下需要做多少“更少的工作”。答案：**即使按照微优化标准，也不值得担心**。我将此测试（v5.3）设置为通过两个相同的函数循环 100,000 次：

```
function test1(){
    //do something
    $a=1;
    return $a;
}

function test2(){
    //do something
    $a=1;
    return ($a);
}

$array = array();

for($j=0;$j<100;$j++){
    $array[$j] = array();
    $time = microtime(true);

    $val = 0; //set a dummy variable
    for($i=0;$i<100000;$i++){
        $val = test1();
    }

    $array[$j][0] = microtime(true)-$time;

    unset($i);
    unset($val);
    unset($time);

    $time = microtime(true);

    $val = 0; //set a dummy variable
    for($i=0;$i<100000;$i++){
        $val = test2();
    }

    $array[$j][1] = microtime(true)-$time;
    unset($i);
unset($val);
unset($time);
}

$without_p = 0;
$with_p = 0;
foreach($array as $values){
    $without_p +=$values[0];
    $with_p +=$values[1];

    echo $values[0].' vs '.$values[1]."\n"; 
}
echo "---------------\nAverages: \n".($without_p/count($array))." vs ".($with_p/count($array)); 
```

结果如下：

```
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.03200101852417
0.02800178527832 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.03200101852417
0.028002023696899 vs 0.028002023696899
0.03200101852417 vs 0.02800178527832
0.032002210617065 vs 0.028000831604004
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.028000831604004 vs 0.032002210617065
0.02800178527832 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.028000831604004
0.032002210617065 vs 0.028002023696899
0.032001972198486 vs 0.028000831604004
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.028000831604004 vs 0.032002210617065
0.028002023696899 vs 0.032000780105591
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.028002023696899 vs 0.032001972198486
0.032001972198486 vs 0.03200101852417
0.032001972198486 vs 0.032001972198486
0.028002023696899 vs 0.03200101852417
0.032001972198486 vs 0.032001972198486
0.028002023696899 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.02800178527832 vs 0.032002210617065
0.028000831604004 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.03200101852417 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.028002023696899 vs 0.032001972198486
0.028000831604004 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.028000831604004
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.03200101852417 vs 0.028002023696899
0.028002023696899 vs 0.03200101852417
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.028002023696899 vs 0.032001972198486
0.028000831604004 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.032001972198486 vs 0.032001972198486
0.028001070022583 vs 0.028002023696899
0.032001972198486 vs 0.032001972198486
0.028001070022583 vs 0.028002023696899
0.032001972198486 vs 0.028000831604004
0.032002210617065 vs 0.028002023696899
0.032000780105591 vs 0.028002023696899
0.028002023696899 vs 0.03200101852417
0.028002023696899 vs 0.028002023696899
0.03200101852417 vs 0.028002023696899
0.032001972198486 vs 0.028002023696899
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.032000780105591
0.028002023696899 vs 0.028002023696899
0.03200101852417 vs 0.028002023696899
0.028002023696899 vs 0.03200101852417
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.028002023696899
0.032001972198486 vs 0.028000831604004
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.032001972198486
0.028002023696899 vs 0.028001070022583
0.032001972198486 vs 0.032001972198486
0.032001972198486 vs 0.032001972198486
0.032001972198486 vs 0.03200101852417
0.032001972198486 vs 0.028002023696899
0.032001972198486 vs 0.028001070022583
0.028002023696899 vs 0.032001972198486
0.028001070022583 vs 0.028002023696899
--------------- Averages: 
0.030041754245758 vs 0.029521646499634 
```

因此（通过运行此测试 100 次消除外部影响后）100,000 次循环后的总影响几乎为 0.0005 秒。这里的基本结论是，这里的性能损失（至少在处理时间方面）非常小......甚至在 100,000 次循环之后，版本括号*有时*比使用推荐的裸返回更快。

当然，这仍然值得避免，因为您最终会尝试通过引用返回，并且会花费数小时试图找到错误的根源，但性能确实不是一个有效的论据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T20:27:32.453

似乎只是作者使用的编码风格约定。他大概认为它更清晰，更容易阅读，也更容易让新手理解。但它实际上对返回的值没有任何影响。

# image - Gecko (Firefox) 和 Trident (IE) 与 Webkit（Chrome 和 Safari）中颜色不正确的图像渲染疯狂

> ID：11748421
> 
> 赞同：0
> 
> 时间：2012-07-31T20:24:48.937
> 
> 标签：image, firefox, google-chrome, rendering, gecko

我设计了一个网站，使左侧的图像无缝融入右侧的背景颜色，没有透明度（颜色在图像的最右侧边框与背景简单匹配）。图像的方式是，制作具有透明度的切口非常困难，因此该解决方案往往效果很好（请参阅示例以了解原因）。

图片的最右边是`#d0d9e0`根据Photoshop CS5的十六进制颜色，我已经适当地编写了CSS

```
body {
    background-color:#d0d9e0;
    background-image:url('image.jpg');
    background-size:auto 100%;
    background-repeat:no-repeat;
} 
```

在 Webkit 浏览器（Chrome、Safari）中，图像与背景完美融合，效果非常好。在 Gecko 浏览器 (Firefox) 和 Trident 浏览器 (IE) 中，图像或背景中的颜色渲染不正确，看起来很业余。

为了说明这个独特的问题，您可以在此处查看实时测试示例：http: [//ezrahub.com/missmaryland/](http://ezrahub.com/missmaryland/)

尝试在不同的浏览器中查看我的挫败感来自哪里。除了使用图像透明度之外，还有什么方法可以解决这个问题（你可以在这里看到它为什么令人沮丧）？我知道 Gecko 与 Webkit 渲染图像的方式不同，但我想不出直接颜色不准确的借口。啊啊啊啊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:32:20.427

不同之处在于不同的浏览器如何处理颜色管理的内容。文件中包含的 Photoshop ICC 配置文件在不同浏览器中的解释不同（或被忽略）。

我的猜测是您使用“文件”>“另存为”来保存位图，如果您使用“文件”>“为 Web 和设备保存”，您将获得预期的结果。

# google-chrome - 禁用在 kiosk 模式计算机上运行的浏览器中打印 PDF 的可能性

> ID：11748424
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:27:25.413
> 
> 标签：google-chrome, firefox, pdf

我正在开发一个将在网络浏览器（Firefox 或 Chrome）中使用的应用程序。此应用程序的一部分将显示 PDF。然而，对于标准的 PDF 查看器，有一些我不希望用户拥有的功能（例如打印、保存到磁盘等）。我发现[了这个](https://github.com/mozilla/pdf.js)很棒的项目，关于一个用于 mozilla 的可定制 pdf 查看器。这允许我限制用户的可能性。现在我想知道是否有可能在谷歌浏览器中实现同样的效果。到目前为止，我还没有找到任何关于自定义 Chrome 的标准 PDF 查看器的信息。有没有人知道这样做的方法，或者知道像我为 Mozilla 找到的那种可定制的查看器？谢谢你。

**更新：**

浏览器将以**信息亭模式**运行，因此用户将无法访问除查看网页之外的任何功能（没有地址栏、没有菜单、什么都没有）。此外，不会出现键盘，因为该应用程序将在触摸屏上使用。

**更新 2：**

首先，为什么这个问题从程序员转移到stackoverflow？当我在这里问这种类型的“开放”问题时，它们会立即关闭。感谢您的反对。我想，对于人们来说，用 3 行代码无法回答的问题太难了。

第二，关于PDF的打印：我看到有人提到打印PDF文件的方法。用户将没有这些选项可用，因为：

*   在系统的最终设置中将没有可用的打印机。
*   不会有键盘或鼠标，只有（有限的）触摸界面。
*   该网页将无法从除指定位置之外的任何地方访问。
*   用户将无法访问底层操作系统。

禁用打印功能并不难，但我不希望用户**认为**他可以打印。如果打印图标保留在 PDF 查看器上，用户单击它而没有任何反应，这将导致沮丧和恼怒。通过仅显示实际工作的按钮，将带来更好的应用程序使用体验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:40:44.423

PDF 的 URL 足以在浏览器内部或外部打印和保存文件。完全阻止用户拥有这些选项的唯一方法是在您自己的查看器中呈现 PDF，例如 Flash 应用程序（例如 Scribd）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T15:30:33.727

您可以实施[FlexPaper](http://flexpaper.devaldi.com/default.jsp)。通过命令行或其他方式自定义 UI 控件并[转换您的 PDF文件。](http://flexpaper.devaldi.com/docs_converting.jsp)大部分信息都在[FlexPaper 文档中](http://flexpaper.devaldi.com/docs.htm)

有一些参数可以禁用功能并删除按钮。

例如

```
{
 PrintToolsVisible : false,
 PrintEnabled : true
} 
```

似乎该站点缺少一些信息，因为根据[此线程](https://groups.google.com/forum/?hl=en_US#!searchin/flexpaper/buttons/flexpaper/PiMqV1EYC2g/SmSccpSz3zgJ)，它[在他们的 wiki 中](http://code.google.com/p/flexpaper/wiki/Parameters)，但随后被移至[他们的](http://flexpaper.devaldi.com/docs_parameters.jsp)网站，也许有些信息被遗忘了，但它们显然在源代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:45:13.907

由于您说该应用程序将以信息亭模式运行，因此您正在寻找实施此保护的错误位置。PDF 保护可以用特定的软件来破坏。

信息亭可以在“只读”模式下运行，在这种模式下，人们无法将文件保存到其中（或者最多，文件在重新启动后将无法生存）。

至于打印，如果用户无法访问底层操作系统，只需禁用操作系统的打印功能（在 Linux 系统中，您将删除 CUPS；在 Windows 中，禁用 spooler 服务就足够了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-05T23:39:32.997

可以保护网页上显示的 PDF 免受所有复制和检索方法的影响。但是您需要对 PDF 进行加密，并且用户需要安装 CopySafe PDF Reader 才能查看它。

或者，您可以使用 PDF.JS 之类的东西来呈现 PDF，而无需 Adob​​e Reader。但是需要修改pdf.js，去掉工具栏中的保存和打印按钮；并且您需要一个适当设计的网络浏览器，通过不暴露其资源位置、缓存和页面源来保护网络媒体。ASPS Web 浏览器就是为此而设计的，通过使用一个使用 ASPS 过滤器来传递页面的网站，从服务器发送到浏览器的数据是最安全的。与 SSL 文件资源一起使用是安全的，不受数据包嗅探器的影响。

另一种选择是使用 ASPS Protected Hosting，它从您的网站提供镜像内容。网页可以镜像，您网站上托管的媒体（包括 PDF）可以通过 ASPS 服务器传送，并以最安全的方式显示在 ASPS 浏览器中。

# android - 将波前文件绘制到 android opengl gles20

> ID：11748430
> 
> 赞同：0
> 
> 时间：2012-07-31T20:25:22.190
> 
> 标签：android, opengl-es-2.0, wavefront

这是我的问题。我试图从资产中读取波前 obj 文件，显然它可以正确读取，但是当我尝试将对象绘制到 8 个三角形的 glsurfaceview 2 上时，没有绘制，我不知道为什么。

这是 obj 文件（一个八面体）：

```
# Blender v2.63 (sub 0) OBJ File: ''
# www.blender.org
mtllib octahedron.mtl
o Mesh_Object001.001
v 0.000000 -1.000000 -0.000000
v 1.000000 0.000000 0.000000
v 0.000000 -0.000000 1.000000
v -1.000000 0.000000 0.000000
v 0.000000 1.000000 0.000000
v 0.000000 0.000000 -1.000000
usemtl 
s off
f 1 2 3
f 4 1 3
f 5 4 3
f 2 5 3
f 2 1 6
f 1 4 6
f 4 5 6
f 5 2 6 
```

这是读取文件的代码：

```
public WaveFrontObj(InputStream file) throws IOException, WaveFrontObjExeption {
    color = new float[] { 1f, 0f, 0f, 1.0f };

    Log.i(MyApp_Tag, "WaveFrontObj: Starting to read file");

    BufferedReader br = new BufferedReader(new InputStreamReader(file));

    ArrayList<Float> vertexinfoarraylist = new ArrayList<Float>();
    ArrayList<Short> indexinfoarraylist = new ArrayList<Short>();

    while (br.ready()) {
        // Some string fixes
        String line = br.readLine().trim();

        while (line.contains("  ")) {
            line = line.replace("  ", " ");
        }
        // End string fixes

        // Comments lines should be avoided.
        if (line.startsWith("#"))
            continue;

        // Wavefront file body
        if (line.startsWith("v")) {
            String[] point_value = line.split(" ");

            Log.i(MyApp_Tag, "Vertex array lentth: " + point_value.length
                    + " at line " + line);

            for (int i = 1; i < point_value.length; i++) {
                try {
                    vertexinfoarraylist.add(Float
                            .parseFloat(point_value[i]));
                } catch (Exception ex) {
                    throw new WaveFrontObjExeption("Unrecognized string \""
                            + point_value[i] + "\" ant line \"" + line
                            + "\"");
                }
            }
        } else if (line.startsWith("f")) {
            String[] face_value = line.split(" ");

            Log.i(MyApp_Tag, "Index array length: " + face_value.length
                    + " at line " + line);

            for (int i = 1; i < face_value.length; i++) {
                try {
                    indexinfoarraylist.add(Short.parseShort(face_value[i]));
                } catch (Exception ex) {
                    throw new WaveFrontObjExeption("Unrecognized string \""
                            + face_value[i] + "\" ant line \"" + line
                            + "\"");
                }
            }
        } else {
            // avoid this lines for now
            // the end result should be a exception for
            // Unrecognized command.
            continue;
        }
    }

    if (!(vertexinfoarraylist.size() > 0 && indexinfoarraylist.size() > 0)) {
        throw new WaveFrontObjExeption("Object has no vertex or index inf.");
    } else {

        float[] vertexarrary = new float[vertexinfoarraylist.size()];
        short[] indexarrary = new short[indexinfoarraylist.size()];

        for (int i = 0; i < vertexinfoarraylist.size(); i++) {
            vertexarrary[i] = ((Float) vertexinfoarraylist.get(i));
            Log.i(MyApp_Tag, "Vertex Info #" + (i + 1) + ": "
                    + vertexinfoarraylist.get(i));
        }

        for (int i = 0; i < indexinfoarraylist.size(); i++) {
            indexarrary[i] = ((Short) indexinfoarraylist.get(i));
            Log.i(MyApp_Tag, "Index Info #" + (i + 1) + ": "
                    + indexinfoarraylist.get(i));
        }

        vertexCount = vertexinfoarraylist.size();
        vertexBuffer = ByteBuffer
                .allocateDirect(
                        BYTES_PER_FLOAT * COORDS_PER_VERTEX * vertexCount)
                .order(ByteOrder.nativeOrder()).asFloatBuffer();
        vertexBuffer.put(vertexarrary).position(0);

        indexCount = vertexinfoarraylist.size();
        indexBuffer = ByteBuffer
                .allocateDirect(
                        BYTES_PER_SHORT * COORDS_PER_VERTEX * indexCount)
                .order(ByteOrder.nativeOrder()).asShortBuffer();
        indexBuffer.put(indexarrary).position(0);

        int vertexShader = GameRenderer.loadShader(GLES20.GL_VERTEX_SHADER,
                vertexShaderCode);
        int fragmentShader = GameRenderer.loadShader(
                GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

        // create empty OpenGL ES  Program
        mProgram = GLES20.glCreateProgram(); 

        // add the vertex shader to the opengl program
        GLES20.glAttachShader(mProgram, vertexShader); 

        // add the fragment shader to the opengl program
        GLES20.glAttachShader(mProgram, fragmentShader); 

        // creates an executable OpenGL ES program
        GLES20.glLinkProgram(mProgram); 
    }
} 
```

这是将对象绘制到 opengl GLES20 中的代码：

```
public void draw(float[] mvpMatrix) {
    // Add program to OpenGL ES environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's vPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

    // Enable a handle to the triangle vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // Prepare the vertex coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle,
            COORDS_PER_VERTEX,
            GLES20.GL_FLOAT,
            false,
            0,  // No space between vertex
            vertexBuffer);

    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // get handle to fragment shader's vColor member
    mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

    // Set color for drawing the triangle
    GLES20.glUniform4fv(mColorHandle, 1, color, 0);

    // get handle to shape's transformation matrix
    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);

    // Draw the object
    GLES20.glDrawElements(GLES20.GL_TRIANGLE_FAN, indexBuffer.capacity(), GLES20.GL_UNSIGNED_SHORT, indexBuffer);
    //GLES20.glDrawElements(GLES20.GL_TRIANGLE_STRIP, indexBuffer.capacity(), GLES20.GL_UNSIGNED_SHORT, indexBuffer);
    //GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, vertexCount);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:55:47.400

此内容包含在楼上的评论中：

另一个注意事项是该格式将 indecies 指定为从 1 开始，但在您的代码中它们可能是从 0 开始的，因此在解析人脸时应该减去一个。

# c# - 根据比例格式化十进制值

> ID：11748431
> 
> 赞同：2
> 
> 时间：2012-07-31T20:25:23.163
> 
> 标签：c#, linq

我需要执行以下操作：

在我的网站上，我展示了带有营养信息的产品。“总脂肪”是小数（在 SQL Server 中为 18,1）。

我的客户的愿望是，每当值像“1.0”、“2.0”等时，它必须只显示数字“1”或“2”。

如果值为“1.2”或“2.4”等，则不会发生任何事情，它应该按原样显示。

有没有办法在没有各种字符串操作的情况下做到这一点？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:35:12.237

```
decimalNumber.ToString("0.#"); 
```

例子：

```
decimal num1 = 7.3M;
decimal num2 = 7.0M;

Console.WriteLine(num1.ToString("0.#")); //prints 7.3
Console.WriteLine(num2.ToString("0.#")); //prints 7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:33:38.523

```
String.Format("{0:#.#}", 1.0m); // outputs 1
String.Format("{0:#.#}", 1.5m); // outputs 1.5 
```

# android - Android NDK NativeActivity 访问 GestureDetector

> ID：11748434
> 
> 赞同：2
> 
> 时间：2012-07-31T20:25:39.460
> 
> 标签：android, android-ndk, detection, gesture

NativeActivity 是否可以访问 GestureDetector 并将事件绑定到它？

我在想这可能不得不通过 JNI，很痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:42:28.060

是的，您必须使用 JNIEnv 来访问 GestureDetector - 它是 Java 类。

所有 C API 都列在`STABLE-APIS.html`文件`docs`夹下的文件中。

# asp.net - asp.net 类引用错误

> ID：11748435
> 
> 赞同：0
> 
> 时间：2012-07-31T20:25:43.613
> 
> 标签：asp.net, vb.net, class

我正在用 ASP.Net 编写一个 Web 应用程序。

在网页的顶部，我有：

```
 <%@ Page Language="VB" AutoEventWireup="false" CodeFile="software-mgr.aspx.vb" Inherits="ftp_access_software_mgr" EnableViewState="True" EnableSessionState="True" %>
<% 
    Dim ssMgr As SoftwareFTPStorage = New SoftwareFTPStorage
    Dim ssDBMgr As SoftwareStoreDBTools = New SoftwareStoreDBTools
    Dim username As String
    username = getUserName()

    If Not IsPostBack Then buildDBList()

%> 
```

在 .aspx.vb 页面上，我有：

```
Imports SoftwareFTPStorage
Imports SoftwareStoreDBTools
Imports System
Imports System.Security
Imports System.Data.SqlClient
Imports System.Data.SqlClient.SqlConnection
Imports System.Data.SqlClient.SqlCommand

Partial Class ftp_access_software_mgr
    Inherits System.Web.UI.Page

    Dim ssDBTools As SoftwareStoreDBTools = New SoftwareStoreDBTools
    Dim ssMgrTools As SoftwareFTPStorage = New SoftwareFTPStorage

    Protected Sub Add_Click(sender As Object, e As System.EventArgs) Handles AddButton.Click
        ...Class Code
    End Sub

    Protected Sub RemButton_Click(sender As Object, e As System.EventArgs) Handles RemButton.Click
        ...Class Code
    End Sub

    Protected Sub buildDBList()
        ...Class Code
    End Sub

    Protected Function getUserName() As String
        ...Class Code
    End Function

End Class 
```

我不知道我做了什么，但在*服务器上的*某个时刻我开始收到错误：

```
 Compilation Error 
    Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: BC30002: Type 'SoftwareStoreDBTools' is not defined.

Source Error:

Line 10:     Inherits System.Web.UI.Page
Line 11: 
Line 12:     Dim ssDBTools As SoftwareStoreDBTools = New SoftwareStoreDBTools
Line 13:     Dim ssMgrTools As SoftwareFTPStorage = New SoftwareFTPStorage
Line 14: 
```

当我在本地调试时，它工作得很好......好吧，排序：仍在解决一些“状态”问题，但至少我没有得到错误页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:34:23.287

检查这个，让我知道它是怎么回事：

[http://forums.asp.net/t/1566777.aspx/1?class+in+App_code+not+defined+](http://forums.asp.net/t/1566777.aspx/1?class+in+App_code+not+defined+)

[http://p2p.wrox.com/asp-net-2-0-professional/64463-classes-app_code-not-defined.html](http://p2p.wrox.com/asp-net-2-0-professional/64463-classes-app_code-not-defined.html)

# ant - 将 PaxExam 与 Bndtools 一起使用

> ID：11748444
> 
> 赞同：2
> 
> 时间：2012-07-31T20:26:22.040
> 
> 标签：ant, hudson, osgi, pax-exam, bndtools

有没有人尝试过使用 Bndtools 运行 PaxExam Junit 测试并可以给我一些建议？我自己试过了，但是没有 Maven，下载所有依赖项很痛苦。

到目前为止我所做的：

1.  从 Central Maven 下载 PaxExam 依赖项（还有更简单的方法吗？）
2.  在 cnf/bnd.bnd 中创建包含所有依赖项的属性
3.  将属性添加到我要编写测试的 buildpath
4.  执行测试失败，因为缺少更多依赖项，所以回到 1。：D

我想使用 PaxExam，因为它们只生成测试报告，但它们并不是真正的“Junit 测试”，因此更容易将 Ant Junit 任务用作 Bndtools 的集成测试。

后期场景：

1.  与 Hudson 和 Ant 建立项目
2.  Hudson 还应该执行 Junit Ant Task，其中失败的测试也应该停止构建过程

上面的场景已经可以在没有运行 OSGi 环境的情况下使用普通的 Junit4 测试，但现在我想做集成测试。

有人能帮我吗？

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:52:32.730

即使您不使用 Maven 来构建项目，您仍然可以使用它来下载 maven-artifacts 及其传递依赖项。为此，您首先必须[安装 Maven](http://www.sonatype.com/books/mvnref-book/reference/installation.html)。然后，您创建一个空目录，并在该目录中创建一个名为`pom.xml`. 对于 Pax Exam，这应该如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>test</groupId>
    <artifactId>test</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>pom</packaging>
    <properties>
        <exam.version>2.5.0</exam.version>
        <url.version>1.4.2</url.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-container-native</artifactId>
            <version>${exam.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-junit4</artifactId>
            <version>${exam.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-link-mvn</artifactId>
            <version>${exam.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.ops4j.pax.url</groupId>
            <artifactId>pax-url-aether</artifactId>
            <version>${url.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.felix</groupId>
            <artifactId>org.apache.felix.framework</artifactId>
            <version>3.2.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-core</artifactId>
            <version>0.9.29</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>0.9.29</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

我从[Pax Exam 文档](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam+Maven+Dependencies)中获取了依赖项列表。然后，您打开命令行，导航到您创建的目录`pom.xml`，然后执行以下命令：

```
mvn dependencies:copy-dependencies 
```

（这假设您已经安装了 Maven，因此该命令`mvn`可从命令行使用）。现在 maven 将获取您在 中指定的依赖项的所有传递依赖项`pom.xml`，并默认将它们存储在其中`target/dependency`。

# jython - 如何从 jython WSGI Web 应用程序创建战争文件

> ID：11748446
> 
> 赞同：1
> 
> 时间：2012-07-31T20:26:23.657
> 
> 标签：jython, war, wsgi, keystone

我想将使用 jython 2.5.2 运行的 WSGI ( [keystone](http://late.am/post/2011/11/27/keystone-a-simple-python-web-framework) ) Web 应用程序部署为 java servlet 应用程序服务器（特别是 glassfish）的 war 文件。

如何从我的 keystone Web 应用程序（或任何 WSGI 应用程序）创建一个 war 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:31:00.843

After some more searching I found this.

[http://opensource.xhaus.com/projects/modjy/wiki/ModjyWarPackaging](http://opensource.xhaus.com/projects/modjy/wiki/ModjyWarPackaging)

That showed how to create a war file from any WSGI app (which keystone is).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:52:15.847

创建一个空的django项目，从中创建一个war文件并检查war文件的内容，这样也有帮助。

1.  安装 jython
2.  安装安装工具
3.  jython (jython install dir)/bin/easy_install django # 当前版本 1.4.1
4.  jython (jython 安装目录)/bin/easy_install django_jython
5.  jython (jython 安装目录)/bin/django_admin.py startproject emptyProj
6.  cd emptyProj
7.  编辑 emptyProj/emptyProj/settings.py 并将 ADMIN_MEDIA_PREFIX=STATIC_URL 放在文件末尾并将“doj”添加到 INSTALLED_APPS 元组中。
8.  jython manage.py startapp emptyApp
9.  jython manage.py 战争
10.  mkdir tmp
11.  mv emptyProj.war tmp
12.  光盘时间
13.  解压emptyProj.war
14.  手动检查war文件结构

# ruby - 如何在我的空间父类的超类拥有的命名空间中使用方法？

> ID：11748450
> 
> 赞同：0
> 
> 时间：2012-07-31T20:26:31.690
> 
> 标签：ruby

我有一个`Book < LibraryItem`

和 a `Book::Page`，定义为

```
class Book
  class Page 
```

在模型/书/page.rb

`LibraryItem`有一个方法叫做`can_edit?`

但是我`Book::Page.new.can_edit?`没有返回任何方法错误...

如何`LibraryItem`在我的命名空间中包含实例方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:00:20.180

如果您在 irb 控制台上运行此代码，Ruby 默认访问父方法：

```
class LibraryItem
  def can_edit?
    true
  end
end

class Book < LibraryItem
  class Page
  end
end 
```

您可以轻松访问 can_edit？方法，只是做：

```
book = Book.new
book.can_edit? 
```

但是从 Page 类你不能访问 LibraryItem 方法，因为它不在继承链上

提示：命名空间使用模块而不是嵌套类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:37:08.710

根本问题是 ruby​​ 不支持多重继承。[像这样](https://stackoverflow.com/questions/4828956/techniques-to-overcome-the-single-inheritance-issue)的问题和[这样](https://stackoverflow.com/questions/1095159/multiple-inheritance-type-class-inheritance-in-ruby)的问题表明您应该考虑将功能拉出到可以任意包含在类定义中的模块中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:36:30.130

这将返回错误，因为`Page`没有`can_edit?`方法。A`Book`有一个`Page`类，但`Page`不是`Library`item 的子类（只是`Book`）。所以`can_edit?`对 有效`Book`但对无效`Page`。

尝试

```
p Book::Page.superclass 
```

你会得到`Object`

# c# - 在文本框的开头插入文本

> ID：11748451
> 
> 赞同：4
> 
> 时间：2012-07-31T20:26:41.613
> 
> 标签：c#, textbox, insert

单击按钮时，我需要插入一些文本作为文本框的第一个字符。

这是我尝试过的：

```
private void btnInsert_Click(object sender, EventArgs e)
{
    txtMainView.Text.Insert(0, "TEST");
} 
```

当我单击按钮时，无法插入文本。任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T20:28:00.310

```
txtMainView.Text = txtMainView.Text.Insert(0, "TEST"); 
```

字符串在 .NET Framework 中是不可变的，因此每个操作都会创建一个新实例，显然不会更改原始字符串本身！

有关`String`课程的更多详细信息，请参阅 MSDN page [Strings (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/ms228362%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:32:18.400

## c# 6+ 的更新

```
txtMainView.Text = $"TEST{txtMainView.Text}"; 
```

## 原来的

你也可以和

```
txtMainView.Text = "TEST" + txtMainView.Text; 
```

作为备选。

# c# - 序列化 .NET 2.0 中的私有后备数据成员？

> ID：11748455
> 
> 赞同：4
> 
> 时间：2012-07-31T20:26:51.223
> 
> 标签：c#, xml, serialization, .net-2.0, private-members

我正在编写一个小的 xml 配置文件，该文件将从特定位置保存和加载（因此不使用`user.config`）。我的应用程序是 .NET 2.0 并且不能移动到更新的版本（所以没有`DataContractSerializer`） 我需要实现“保存密码”选项，以便在用户使用应用程序时预先填写密码字段。

目前这是我的做法

```
public class UserSettings
{
    //Snip many other properties...

    public bool SavePassword { get; set; }

    [XmlIgnore]
    public string Password
    {
        get
        {
            string retVal = string.Empty;
            if (ProtectedPassword != null)
            {
                try
                {
                    retVal = Encoding.UTF8.GetString(ProtectedData.Unprotect(ProtectedPassword, _md5.ComputeHash(Encoding.UTF8.GetBytes(this.Username.ToUpper())), DataProtectionScope.LocalMachine));
                }
                catch
                {
                    retVal = string.Empty;
                }
            }
            return retVal;
        }
        set
        {
            ProtectedPassword = ProtectedData.Protect(Encoding.UTF8.GetBytes(value), _md5.ComputeHash(Encoding.UTF8.GetBytes(this.Username.ToUpper())), DataProtectionScope.LocalMachine);
        }
    }

    public byte[] ProtectedPassword;

    private readonly MD5 _md5 = MD5.Create();

    public void Save()
    {
        var xOver = new XmlAttributeOverrides();

        //If Save password is false do not store the encrypted password
        if (this.SavePassword == false)
        {
            var xAttrs = new XmlAttributes();
            xAttrs.XmlIgnore = true;
            xOver.Add(typeof(UserSettings), "ProtectedPassword", xAttrs);
        }

        XmlSerializer xSer = new XmlSerializer(typeof(UserSettings), xOver);
        Directory.CreateDirectory(Path.GetDirectoryName(savePath));
        using(var fs = new FileStream(savePath, FileMode.Create))
        {
            xSer.Serialize(fs, this);
        }

    } 
```

我想`ProtectedPassword`不公开，但是如果我将其设置为公开以外的任何内容，`xSer.Serialize(fs, this)`则不包括该属性。我需要做什么才能使其正常工作？

我知道还有很多其他类似的问题，但是它们都没有 .NET 2.0 的要求，并且使用的解决方案对于受限于 2.0 的人来说是不可用的。除了编写习俗或接受公开`XMLSerarlizer`的事实之外，还有其他选择吗？`ProtectedPassword`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:45:14.433

据我所知，在 .NET 2.0 中完成此操作的唯一方法是编写[`IXmlSerializable`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable%28v=vs.80%29.aspx).

也就是说，如果配置文件不需要是人类可读/可编辑的，我建议使用[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter%28v=vs.80%29.aspx)来执行二进制序列化，这将捕获私有成员。

# jquery - 在多个分辨率上动态自动居中块 UI

> ID：11748456
> 
> 赞同：0
> 
> 时间：2012-07-31T20:26:51.613
> 
> 标签：jquery

我正在尝试在多个分辨率（从 800x600 到 1280x1024）上自动将 Block UI（http://www.malsup.com/jquery/block/）居中在死点（垂直和水平）但没有运气.

到目前为止，我已经对此进行了修补：

```
css: {
            padding:    0,
            margin:     0,
            top:        'auto',
            left:       '40%',
            width:      '30%',
            color:      '#000',
            border:     '3px solid #aaa',
            backgroundColor:'#fff',
            cursor:     'wait'
        }, 
```

但是我无法获得宽度为 500px 的窗口（例如[http://jsfiddle.net/styson/qt9EZ/](http://jsfiddle.net/styson/qt9EZ/)）以坐在死角。

有什么建议么？

# jquery - 在一组字段失去焦点时触发主干事件

> ID：11748460
> 
> 赞同：1
> 
> 时间：2012-07-31T20:27:31.990
> 
> 标签：jquery, backbone.js

当有人在两个`input`字段之一之外单击时尝试触发主干事件。这会正确触发外部点击，但我希望它不会在您点击 OTHER 字段时触发。

```
var ItemView = Backbone.View.extend({

  events: {
    'blur input': 'blurInputs'
  },

  blurInputs: function(){
    if ( $('input.description').is(":focus") || $('input.amount').is(":focus") ){
      // do nothing
    } else {
      // do something
    }
  }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:17:36.160

问题可能是因为在另一个输入框获得焦点之前触发了模糊事件。

一个可能的技巧是在检查输入框是否有焦点之前等待几毫秒

```
blurInputs: function() {
  setTimeout(function() {
    if (this.$('input.description').is(':focus') || this.$('input.amount').is(':focus')) {
      // do nothing
    } else {
      // do something
    }
  }, 50);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-14T18:53:11.147

这是基于保罗的回答，但它适用于我的用例

```
 onBlur: function(e) {
    var self = this;
    setTimeout(function() {
      if(self.$el.find('input:focus').length == 0) {
        console.log("BLUR");
      }
    }, 500);
  }, 
```

# vb.net - VB.Net 将字节数组转换为 SQLBinary

> ID：11748463
> 
> 赞同：0
> 
> 时间：2012-07-31T20:27:46.463
> 
> 标签：vb.net

我搜索和搜索并没有找到这个问题的明确答案。

如何将数组字节转换为 SQLBinary。

我试过收窄/加宽运算符，但似乎没有任何效果......

```
Public Shared Widening Operator CType(ByVal p1 As Byte()) As SQLBinary

End Operator 
```

这会引发错误：错误 8 此转换运算符的参数类型或返回类型必须是包含类型“reportManager”。报告管理器.ascx.vb 12 37

那么我该如何解决这个问题并创建一个可以正确转换它的函数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:11:37.413

只需将字节数组传递给构造函数：

```
 Dim objSqlBinary As New System.Data.SqlTypes.SqlBinary(myByteArray) 
```

扩展 CType 运算符要求您在其中定义它们的类是返回类型或被转换的类型。我假设您在reportManager.ascx.vb 文件中定义了该运算符，这就是它寻找reportManager 的原因。

# javascript - jQuery从屏幕外动画水平div而不滚动

> ID：11748464
> 
> 赞同：3
> 
> 时间：2012-07-31T20:27:50.133
> 
> 标签：javascript, jquery, css, html, scrollbar

我正在尝试为 div 设置动画，以便在页面加载时它似乎移动到屏幕上。到目前为止，动画是无缝的。我遇到的问题是，由于 div 在技术上开始超出文档的视觉边界，（100% 或 1200px）大多数浏览器似乎以水平滚动条开始页面，当 div 移动到中心时它会缩小，并且是真的很让人分心。如果窗口比平常小，我不想完全删除滚动条，但我也不希望它不断实现。

我尝试将动画 div 放置在同一 z-index 上的容器 div 中，但是虽然它识别容器内的位置，但它仍然延伸到屏幕之外。如果有解决方案，通过 jquery、javascript 或 css（试图避免 UI 库）我会非常感激。

jQuery：

```
$(document).ready(function(){
$(".move").animate({marginLeft:"100px"},700);   
}); 
```

CSS：

```
.move {
margin-top:70px;
margin-left:100%;
height:300px;
width:400px;
z-index:301;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:56:10.903

将溢出设置为隐藏。如有必要，您甚至可以在身体上执行此操作

# javascript - Phonegap 应用程序数据库版本在更新后保留

> ID：11748469
> 
> 赞同：1
> 
> 时间：2012-07-31T20:28:00.660
> 
> 标签：javascript, jquery-mobile, cordova

因此，如果我有一个带有该行的 Phonegap 应用程序，`var db = window.openDatabase("phr", "0.1", "Cognovant PHR", 25000000);`然后`db.changeVersion('0.1', '0.2');`我将如何让代码将 openDatabase 调用中的“0.1”动态更新为“0.2”，以防止应用程序每次用户都必须经历更新过程加载应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:07:33.163

我设法弄清楚了。因此，以供将来参考使用该行：

```
var db = window.openDatabase("phr", "", "Cognovant PHR", 25000000); 
```

将在不知道版本的情况下打开当前数据库。然后你可以这样做：

```
if (db.version != "2") // or whatever version you want to update to
{
    // code to update database
    db.changeVersion(db.version, "2"); //again or whatever version you choose
} 
```

# css - 在已编译的 SASS css 文件中处理合并冲突的最有效方法是什么？

> ID：11748470
> 
> 赞同：3
> 
> 时间：2012-07-31T20:28:05.467
> 
> 标签：css, git, merge, sass

我正在与几个使用 SASS、Drupal 和 Git 的开发人员一起开发一个项目。我们目前将编译后的 CSS 文件保存在版本控制中。问题是，每次开发人员拉取时，他们都会在编译的 CSS 文件上遇到合并冲突。

由于该文件是通过编译 SASS 文件创建的，因此我们如何解决该文件中的冲突并不重要，但我们每次都必须这样做。

我们无法在 dev/test/live 环境中设置任何类型的自动编译，因此我们必须将编译后的文件保存在版本控制中以便部署。

是否有任何类型的提交挂钩（或其他）选项也可以使用他们的或您的（没关系）解决冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:34:33.143

我建议永远不要将已编译的文件（无论它们是 css、C 还是其他）提交到 VCS。每个人都应该能够自己编译它们，并且使用 git 你可以设置一个[`post-checkout`-hook](http://schacon.github.com/git/githooks.html#_post_checkout)

更新：刚读

> 我们无法在 dev/test/live 环境中设置任何类型的自动编译，因此我们必须将编译后的文件保存在版本控制中以便部署。

因此我建议设置一个部署策略，包括编译 sass 文件。

# android - 自定义阵列适配器问题

> ID：11748476
> 
> 赞同：1
> 
> 时间：2012-07-31T20:28:24.860
> 
> 标签：android

我正在使用 android 的一个小型聊天室，现在当我设置自定义时，`ListView`我收到以下错误，有什么想法吗？

```
public class roomActivity extends Activity
{
    ListView mainListView;
    ProgressDialog progressDialog;
    String[] jsonUsernameArray, jsonMessageArray;
    UpdateTask mTask = null;

    @Override
    public void onCreate(Bundle activityCycle)
    {
        super.onCreate(activityCycle);
        setContentView(R.layout.room_layout);
        mainListView = (ListView)findViewById(R.id.roomListView);
        progressDialog = new ProgressDialog(this);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressDialog.setMessage("Fetech the data...");
        progressDialog.setCancelable(false);
        progressDialog.show();
        mTask = new UpdateTask();
        mTask.execute();
    }

    public class UpdateTask extends AsyncTask<Void, Void, JSONObject> 
    {
        JSONArray _roomData = null;
        protected void onPostExecute(JSONObject jsonResult)
        {
            try 
            {
                _roomData = jsonResult.getJSONArray("roomInfo");
                for (int cnt = 0; cnt < _roomData.length(); cnt++)
                {
                    JSONObject c = _roomData.getJSONObject(cnt);
                    jsonUsernameArray[cnt] = c.getString("name");
                    jsonMessageArray[cnt] = c.getString("message");
                }
            } 
            catch (JSONException e) 
            {
                e.printStackTrace();
            }
            mainListView.setAdapter(new customAdapter());
            progressDialog.dismiss();
        }

        @Override
        protected JSONObject doInBackground(Void... backgroundProcess)
        {
            UserFunctions userFunction = new UserFunctions();
            return userFunction.sendMessageToROOM("50", "Reza", "Salam dadash :-)", "89988");    
        }   
    }

    public class customAdapter extends BaseAdapter
    {

        public int getCount() 
        {
            return jsonMessageArray.length;
        }

        public Object getItem(int itemData) 
        {
            return null;
        }

        public long getItemId(int itemPosition) 
        {
            return itemPosition;
        }

        public View getView(int _position, View mainView, ViewGroup mainViewGroup) 
        {
            LayoutInflater maniInFlater = getLayoutInflater();
            View _row = null;
            TextView _usernameText, _messageText;
            if (_position % 2 == 0)
            {
                _row = maniInFlater.inflate(R.layout.conversion_layout_odd, mainViewGroup, false);
                _usernameText = (TextView)_row.findViewById(R.id.txtUsername);
                _messageText = (TextView)_row.findViewById(R.id.txtMessage);
                _usernameText.setText(jsonUsernameArray[_position]);
                _messageText.setText(jsonMessageArray[_position]);  
            }
            else
            {
                //do sth...
            }
            return _row;
        }   

    }
} 
```

Logcat 错误：

```
08-01 00:53:04.065: E/AndroidRuntime(17114): FATAL EXCEPTION: main
08-01 00:53:04.065: E/AndroidRuntime(17114): java.lang.NullPointerException
08-01 00:53:04.065: E/AndroidRuntime(17114):    at com.merlingames.thermotalk.roomActivity$UpdateTask.onPostExecute(roomActivity.java:52)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at com.merlingames.thermotalk.roomActivity$UpdateTask.onPostExecute(roomActivity.java:1)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at android.os.AsyncTask.finish(AsyncTask.java:602)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at android.os.Looper.loop(Looper.java:137)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at android.app.ActivityThread.main(ActivityThread.java:4575)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at java.lang.reflect.Method.invoke(Method.java:511)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
08-01 00:53:04.065: E/AndroidRuntime(17114):    at dalvik.system.NativeStart.main(Native Method) 
```

***编辑：***

```
08-01 01:26:07.260: E/AndroidRuntime(18381):    at android.app.ActivityThread.main(ActivityThread.java:4575)
08-01 01:27:36.327: W/dalvikvm(18870): threadid=1: thread exiting with uncaught exception (group=0x40a561f8)
08-01 01:27:36.327: E/AndroidRuntime(18870): FATAL EXCEPTION: main
08-01 01:27:36.327: E/AndroidRuntime(18870): java.lang.NullPointerException
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.AbsListView.obtainView(AbsListView.java:2024)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.ListView.onMeasure(ListView.java:1155)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.View.measure(View.java:12723)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.RelativeLayout.measureChild(RelativeLayout.java:579)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:392)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.View.measure(View.java:12723)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.View.measure(View.java:12723)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.View.measure(View.java:12723)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.View.measure(View.java:12723)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.os.Looper.loop(Looper.java:137)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at android.app.ActivityThread.main(ActivityThread.java:4575)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at java.lang.reflect.Method.invoke(Method.java:511)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
08-01 01:27:36.327: E/AndroidRuntime(18870):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:52:50.887

您应该添加这一行来初始化您的数组：

```
_roomData = jsonResult.getJSONArray("roomInfo"); 

//Add this line
jsonUsernameArray = new String[_roomData.length()]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:56:55.673

您的数组 jsonUsernameArray 永远不会被初始化。了解如何正确使用数组：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

# jquery - 我的移动网站上的 jquery 需要 JQuery mobile 吗？

> ID：11748483
> 
> 赞同：2
> 
> 时间：2012-07-31T20:28:51.977
> 
> 标签：jquery, jquery-mobile

我的移动网站上有 2 个 jquery 函数。一个是 jquery 占位符函数，另一个是 Jquery UI 小部件。我是否需要包含 JQuery 移动库才能使功能在所有启用 javascript 的移动设备上正常运行？还是没有必要？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:45:11.007

那没有必要。

jQuery Mobile 是一个用于简化创建跨浏览器/跨设备移动优先网站的框架。它主要为您提供一些不错的 UI 小部件并编译许多插件来做一些技巧性的事情，例如 AJAX 导航（允许伪页面之间的转换）和 url 重写。

要运行 jQuery 插件，您只需包含正确版本的 jQuery Core，除非您包含 jQuery Mobile 插件。

# google-maps - 在 Google 地图中创建世界等值线

> ID：11748484
> 
> 赞同：3
> 
> 时间：2012-07-31T20:29:04.693
> 
> 标签：google-maps, google-maps-api-3, data-visualization

我正在尝试在 Google Maps 中创建一个等值线地图，以可视化一些国际国家级统计数据。它将是现有 Google 地图应用程序的附加组件。

我四处搜寻，发现了这些潜在的解决方案：

*   **[Cartographer.js](http://cartographer.visualmotive.com/)**能够直接在 Google 地图上叠加基于矢量的等值线地图。但是，它仅支持美国各州。
*   **[Fusion Tables](https://www.google.com/fusiontables)**也可用于创建等值线叠加（[示例](https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col1+from+1YHQBsKPsnytQt6n2zy_ks5r8RFBjPqnODxvFlL8&h=false&lat=17.62365070527682&lng=-20.834000000000035&z=3&t=1&l=col1)）。但是，这增加了复杂性，因为数据是在我的数据库之外维护的。我还必须获取和维护国家边界数据。
*   **[人口统计层](https://developers.google.com/maps/documentation/business/demographics)**本来是完美的，但它仅适用于商业客户。另外，它仅限于美国地理。

*所以我的问题是......*在 Google Maps JavaScript v3 中有没有更好的方法来做到这一点？

PS我刚遇到**[jVectorMap](http://jvectormap.com/)**。它看起来很有希望（[示例](http://jvectormap.com/examples/world-gdp/)），除了它只是一个独立的地图。如果我能以某种方式将 jVectorMap 功能与 Google Maps 界面结合起来，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:29:06.573

正如 jVectorMap 的作者所说，将其功能与 Google Maps 结合起来会非常痛苦。我认为这里最好的解决方案是在 GM 中手动创建彩色多边形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T06:21:35.880

您最好使用以下插件之一：

[http://leafletjs.com/](http://leafletjs.com/) 或 [http://polymaps.org/](http://polymaps.org/)

# python - parse_qsl 错误 Django

> ID：11748488
> 
> 赞同：2
> 
> 时间：2012-07-31T20:29:25.863
> 
> 标签：python, django

在文件中：django/http/ **init** .py 行：341

```
for key, value in parse_qsl((query_string or ''), True): # keep_blank_values=True 
```

query_string = 'rtp_last_name=Mart%EDnez&x_first_name=Cu%F1al%F3'

但是当 parse_qsl 被执行时，结果是

[('rtp_last_name', 'Mart\xednez'), ('x_first_name', 'Cu\xf1al\xf3')]

因此，当我将这些值放在 django.form 上时，单词是 Martnez 和 Cu'al。

原始值是 Martínes 和 Cuñaló，但是 parse_qsl 将**%ED**转换为**\xed**，但正确的转换是**%ED**到**í**

有什么提示吗？

PD：当 authorize.net 通过 POST 回答交易时会发生这种情况。

# jquery - Jquery 可排序删除 Z-index

> ID：11748489
> 
> 赞同：0
> 
> 时间：2012-07-31T20:29:32.643
> 
> 标签：jquery, draggable, jquery-ui-draggable

我在使用 jquery UI 可排序时遇到了一些问题。

**问题1** 一旦一个项目被放置到位并且你想重新拖动它，可拖动的项目就在其他 div 后面。

**问题2** 我无法拖动到原始位置，这可能与问题1有关。

[您可以在http://jsfiddle.net/dXzrV/](http://jsfiddle.net/dXzrV/)上找到我的代码

提前致谢！病房

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:28:53.337

发现了我的问题。它与 .widget .widget-header 上的 position:relative

# android - 在多个 Activity 中使用 IgnitionLocation 时出现 IllegalArgumentException

> ID：11748490
> 
> 赞同：0
> 
> 时间：2012-07-31T20:29:39.553
> 
> 标签：android

当我在多个活动中使用[点火位置时，在 MyActivity() 中调用 super.onPause() 时，我在 onPause() 中得到以下异常。](https://github.com/kaeppler/ignition/tree/master/ignition-location)

```
E/AndroidRuntime(28968): FATAL EXCEPTION: main
E/AndroidRuntime(28968): java.lang.RuntimeException: Unable to pause activity {com.mypackage.myapp/com.mypackage.myapp.MyActivity}: java.lang.IllegalArgumentException: Receiver not registered: com.github.ignition.location.IgnitedLocationManager$2@419a91f8
E/AndroidRuntime(28968):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2838)
E/AndroidRuntime(28968):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2794)
E/AndroidRuntime(28968):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2772)
E/AndroidRuntime(28968):    at android.app.ActivityThread.access$800(ActivityThread.java:130)
E/AndroidRuntime(28968):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1212)
E/AndroidRuntime(28968):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(28968):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(28968):    at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(28968):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(28968):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(28968):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(28968):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(28968):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(28968): Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.github.ignition.location.IgnitedLocationManager$2@419a91f8
E/AndroidRuntime(28968):    at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:654)
E/AndroidRuntime(28968):    at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1134)
E/AndroidRuntime(28968):    at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:378)
E/AndroidRuntime(28968):    at com.github.ignition.location.IgnitedLocationManager.disableLocationUpdates(IgnitedLocationManager.aj:414)
E/AndroidRuntime(28968):    at com.github.ignition.location.IgnitedLocationManager.ajc$before$com_github_ignition_location_IgnitedLocationManager$3$36e174d9(IgnitedLocationManager.aj:240)
E/AndroidRuntime(28968):    at com.mypackage.myapp.MyActivity.onPause(MyActivity.java:79)
E/AndroidRuntime(28968):    at android.app.Activity.performPause(Activity.java:5106)
E/AndroidRuntime(28968):    at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1225)
E/AndroidRuntime(28968):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2825)
E/AndroidRuntime(28968):    ... 12 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:31:38.180

我忘记在 MyActivity 之前实例化的另一个 Activity 中调用 super.onPause()。这种混乱的点火位置并导致这个无用的异常

# jquery - jQuery 不断将元素移出我的表格

> ID：11748494
> 
> 赞同：0
> 
> 时间：2012-07-31T20:29:58.850
> 
> 标签：jquery, html

请与我裸露，因为我的 jQuery 仍然*非常*有限。

我正在为我的用户管理面板开发动态搜索功能，以便我可以快速查找付款。

为了显示它，我有这个代码：

```
 <table>
        <tr>
            <td><strong>Username</strong></td>
            <td><strong>E-mail</strong></td>
            <td><strong>Paid</strong></td>
            <td><strong>Trans ID</strong></td>
            <td><strong>Remaining</strong></td>
            <td><strong>Other</strong></td>
        </tr>
<span class="searchResults"></span>
    </table> 
```

我用来将结果添加到跨度中的代码是这样的：

```
$('#search').keyup(function(){ 
    $(window).keydown(function(event){
        if(event.keyCode == 13) {
            event.preventDefault();
            return false;
        }
    });
   var search = $('#search').serialize();
   $.post('search.php', search, function(result){ 
        $('.searchResults').html(result);
   });
}); 
```

触发后，它会很好地发布到 search.php，但结果显示方式出乎我的意料。

它将结果完全放在表格*上方。*我不知道为什么或如何修复它，谷歌搜索它并不是很成功。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:33:04.780

无效的 HTML，表中的所有内容都必须在 TR > td

```
 <table>
        <tr>
            <td><strong>Username</strong></td>
            <td><strong>E-mail</strong></td>
            <td><strong>Paid</strong></td>
            <td><strong>Trans ID</strong></td>
            <td><strong>Remaining</strong></td>
            <td><strong>Other</strong></td>
        </tr>
       <tr><td> <span class="searchResults"></span> </td></tr>
    </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:49:16.463

您需要做的是将类添加到表中，然后将结果附加到表中：

```
<table class='searchResults'>
    <tr>
        <td><strong>Username</strong></td>
        <td><strong>E-mail</strong></td>
        <td><strong>Paid</strong></td>
        <td><strong>Trans ID</strong></td>
        <td><strong>Remaining</strong></td>
        <td><strong>Other</strong></td>
    </tr>
</table> 
```

你的脚本将是：

```
$('#search').keyup(function(){ 
$(window).keydown(function(event){
    if(event.keyCode == 13) {
        event.preventDefault();
        return false;
    }
});

var search = $('#search').serialize();
   $.post('search.php', search, function(result){ 
        $('.searchResults').append(result);
   });
}); 
```

如果每次搜索时都应清除搜索，则应将标题行放入变量/模板中，然后使用

```
$('.searchResults').html(template + result); 
```

# python - 如何在 Django 教程 3 中正确解耦 URLConf？

> ID：11748497
> 
> 赞同：0
> 
> 时间：2012-07-31T20:30:13.860
> 
> 标签：python, django, django-views, urlconf

我正在关注 Django 教程，并已完成教程 3 中的[解耦 URLConfs](https://docs.djangoproject.com/en/dev/intro/tutorial03/#decoupling-the-urlconfs)。在此步骤之前，一切正常。现在，当我执行删除模板中的硬编码 URL 的最后一步时，它正在发生变化

```
<li><a href="/polls/{{ poll.id }}/">{{ poll.question }}</a></li> 
```

到

```
<li><a href="{% url 'polls.views.detail' poll.id %}">{{ poll.question }}</a></li> 
```

我收到此错误：

```
NoReverseMatch at /polls/

Reverse for ''polls.views.detail'' with arguments '(1,)' and keyword arguments '{}' not found.

Request Method:     GET
Request URL:    http://localhost:8000/polls/
Django Version:     1.4
Exception Type:     NoReverseMatch
Exception Value:    

Reverse for ''polls.views.detail'' with arguments '(1,)' and keyword arguments '{}' not found.

Exception Location:     e:\Django\development\tools\PortablePython\PortablePython2.7.3.1\App\lib\site-packages\django\template\defaulttags.py in render, line 424
Python Executable:  e:\Django\development\tools\PortablePython\PortablePython2.7.3.1\App\python.exe 
```

我的`views.py`样子是这样的：

```
from django.shortcuts import render_to_response, get_object_or_404
from polls.models import Poll

def index(request):
    latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
    return render_to_response('polls/index.html', {'latest_poll_list': latest_poll_list})

def detail(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('polls/detail.html', {'poll': p})

def results(request, poll_id):
    return HttpResponse("You're looking at the results of poll %s." % poll_id)

def vote(request, poll_id):
    return HttpResponse("You're voting on poll %s." % poll_id) 
```

我的项目`urls.py`如下所示：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

`polls/urls.py`看起来像这样：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('polls.views',
    url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$', 'detail'),
    url(r'^(?P<poll_id>\d+)/results/$', 'results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),
) 
```

显然我错过了一些东西，但我现在已经完成了第 3 部分几次，无法弄清楚我错过了什么。我需要纠正什么才能正确解耦这些 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:36:43.657

这是一个版本问题。当您使用 1.4 版时，您不知何故找到了 Django 开发版本的链接。自发布以来发生的变化之一是模板中的 URL 名称过去不需要引号，但现在它们需要引号。这就是错误消息的 URL 名称包含在两组引号内的原因。

您应该使用[此版本的教程](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#decoupling-the-urlconfs)来匹配您拥有的 Django 版本。（您可以安装开发版本，但不建议这样做 - 坚持发布。）

# wpf - WPF/XAML - 将控制命令绑定到父窗口的视图模型？

> ID：11748501
> 
> 赞同：1
> 
> 时间：2012-07-31T20:30:22.923
> 
> 标签：wpf, xaml

我有一个应用程序，我有一个程序集。

在应用程序中，我有一个窗口，在程序集中我有一个用户控件。

窗口中有一个用户控件的实例。

用户控件和窗口都由单独的视图模型支持。

在用户控件中，有一个按钮。该按钮应根据用户控件的视图模型的状态启用/禁用。单击按钮时，需要根据用户控件的视图模型中的信息进行处理，但需要由窗口的视图模型完成。（需要做的事情的某些方面是并且应该在用户控制范围之外。）

这里有一个转折点——这个用户控件不会专门用于这个窗口，它可能会用在另一个窗口中，或者用在第三个窗口中使用的控件中。不允许用户控件知道包含它的窗口或控件的类型，或者在单击其按钮时正在处理该进程。

那么该怎么办？

在程序集中定义一个命令，并将用户控件的按钮绑定到它，将用户控件的视图模型作为命令参数传递？那么，如何将命令绑定到窗口的视图模型？

或者我应该在用户控件的视图模型中定义命令，然后引发一个事件来告诉父窗口需要采取适当的行动？

我不清楚哪个更干净。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:35:34.390

如果您总是知道父母的财产将以相同的名称公开，那么您可以做这样的事情，这对我有用很多次：

```
Command={Binding Parent.DataContext.SomeCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}} 
```

这将获取用户控件，然后转到父级并获取该数据上下文并将其绑定到该命令。当用户控件将被许多公开相同命令的窗口/控件包围时，此方法有效（您可以在此处实现接口）。

然后，您可以将用户控件的视图模型传递给命令（同样，实现一些接口），如下所示：

```
CommandParaemter={Binding } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:34:57.573

您可以使用 Messenger 结构在 ViewModel 之间进行通信。

[MVVMLight 包含一个](http://mvvmlight.codeplex.com/SourceControl/changeset/view/4be0aa663f97#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Messaging/Messenger.cs)你可以使用或者你可以自己编写的。

在这样做之前，请确保您确实正确地分离了职责，否则您最终会得到意大利面条消息代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:59:06.097

你的视图模型应该有层次结构，就像你的控件一样。主窗口有一个子用户控件。主视图模型应该能够与用户控制视图模型连接（并在需要时分配它）。这是我的做法：

```
public class MainVM:NotificationObject
{
  // Make this a Notify Property
  public UserVM userVM { get{return _userVM;}; set {_userVM = value; RaisePropertyChanged("userVM");}

  public MainVM
{
  userVM = new UserVM();
  userVM.ExecuteCmd = new DelegateCommand (yourAction);

}

}

public class UserVM:NotificationObject
{

public DelegateCommand ExecuteCmd {get{return _executeCmd;} set{_executeCmd = value; RaisePropertyChanged("ExecuteCmd");
}

} 
```

XAML：

```
<local:urUserCtrl DataContext={Binding userVM}/> 
```

这当然是伪代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:12:56.647

听起来像是策略模式的一个案例。[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

为可以分配给 UserControl 的视图模型（或用于初始化它）的策略对象定义一个接口。该接口定义了使策略对象能够从 UserControl 视图模型中检索处理所需的数据所需的任何属性/方法/事件，以及将处理结果返回给 UserControl 视图模型的方法。

然后创建该策略对象的具体实现，该对象与 Window 的视图模型协作以执行所需的任何任务。在这种情况下，Window 的视图模型甚至可能实现策略接口本身。

然后可以使用策略对象的其他具体实现来初始化其他场景中的其他 UserControl 实例，这些实现执行相同的所需任务，但可能以非常不同的方式。

# java - Java中的简单计算问题

> ID：11748502
> 
> 赞同：1
> 
> 时间：2012-07-31T20:30:23.983
> 
> 标签：java, for-loop

这个 for 循环应该对树形图中包含的所有值求和。这可行，但在内循环之后，上下的值用于计算精度。似乎这永远不会执行。

我究竟做错了什么？

```
 // for each row
        for (Entry<String, TreeMap<String, Integer>> table_row : table.entrySet()) {

            // write the label
            String row = table_row.getKey() + ",";

            int up = 0;
            int down = 0;
            float accu = 0;
                    // for each treemap in the row
            for (Entry<String, Integer> collumn : table_row.getValue().entrySet()) {
                row += collumn.getValue() + ",";
                down += collumn.getValue();//this works
                if (collumn.getKey() == table_row.getKey()) {
                    up = collumn.getValue();
                    }
            }

    --------->  accu = (up / down) * 100; //this is not executed?? 
            System.out.println("t: " + up + " n: " + down + " a: " +  accu);
            row = row + Float.toString(accu) + " %";
            writer.println(row);//this works too but output is always 0%
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:32:51.423

您可能不希望 == 在您的 if 比较中，而是 equals()... 除非您期望它们是字符串的同一个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T20:32:55.093

我假设您在问为什么`accu`总是`0`与您的评论一样。
`accu = (up / down) * 100;`
字面`100`量是 a`int`以及`up`和`down`。所以结果可能四舍五入`0`

只是投到，`float`这样你就不会失去精度。
`accu = ((float)up / down) * 100;`
这将起作用，因为强制转换将在除法之前，并且因为如果一个操作数如果`float`另一个也被转换为`float`即使`int`eger

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:35:27.197

整数除法！

您的`down`值大于您的值`up`并向下舍入为零，因此每次分配`accu`时，您实际上都是在执行此操作`accu = (0) * 100`

如果您正在寻找精度，您应该制作上下浮动而不是整数，或者在除法之前进行强制转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:37:58.970

您遇到的问题是 up 和 down 都是`int`s。当您将一个 int 除以一个 int 时，结果是一个任何小数都被截断的 int。看起来你想要一个百分比，所以你应该这样做：

```
accu = ((float) up / down) * 100; 
```

# c++ - 试图构建 muParser: 错误: 'std::basic_ostream 的显式实例化但没有可用的定义

> ID：11748504
> 
> 赞同：5
> 
> 时间：2012-07-31T20:30:36.090
> 
> 标签：c++, macos, qt, gcc, qt-creator

我试图在 mac 上构建 muParser，直到我将 XCode 升级到更新 gcc 的 4.4 之前它一直有效。现在我得到以下代码行，生成我不明白的错误：

```
mu::console() << _T(" \"") << val.GetAsString() << _T("\" ");

../muparser/src/muParserBase.cpp:1823:   instantiated from here
../muparser/src/muParserBase.cpp:1823: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available
../muparser/src/muParserBase.cpp: In instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]':
../muparser/src/muParserBase.cpp:1823:   instantiated from here
../muparser/src/muParserBase.cpp:1823: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available
../muparser/src/muParserBase.cpp: In instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]':
../muparser/src/muParserBase.cpp:1823:   instantiated from here
../muparser/src/muParserBase.cpp:1823: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available
../muparser/src/muParserBase.cpp: In instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]':
../muparser/src/muParserBase.cpp:1823:   instantiated from here
../muparser/src/muParserBase.cpp:1823: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available 
```

`mu::console()`定义为：

```
inline std::ostream& console()
{
  return std::cout;
} 
```

`_T`是`#define _T(x) x`

和`GetAsString`

```
 const TString& GetAsString() const
  {
    return m_strTok;
  } 
```

`TString`是一个`std::string`

导致问题的是对 GetAsString 的调用。知道如何解决吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T20:10:06.027

将这两行添加到您的 .pro 文件中，错误就会消失：

```
QMAKE_CFLAGS_X86_64 += -mmacosx-version-min=10.7
QMAKE_CXXFLAGS_X86_64 = $$QMAKE_CFLAGS_X86_64 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:58:52.007

当我升级到 XCode 4.4.x 时，命令行工具被删除了。在 XCode 中，我转到 XCode > Preferences，选择下载选项卡，然后重新下载“命令行工具”，然后事情又开始工作了。也许这也能解决你的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:13:19.880

看起来您正在链接错误的标准库或包含错误的 C++ 包含。您需要确保您的包含路径 c++ 标头与您链接的标准库相匹配。

如果您发布构建文件，我可以帮助查看是否存在不匹配。

# java - Ant：没有这样的文件或目录

> ID：11748505
> 
> 赞同：2
> 
> 时间：2012-07-31T20:30:45.043
> 
> 标签：java, linux, ant, exec

我需要编写 ant 脚本来在 linux 中执行一个文件，但在执行文件之前我需要执行 setup 文件。

在腻子中，我曾经使用过类似“../setup”然后是“./executeme”的东西

以同样的方式，我编写了蚂蚁脚本

```
 <exec dir="${dir}" executable="/bin/sh">
        <arg value=". ./setup"/>
        <arg value="./executeme"/>
    </exec> 
```

但它给出的错误是“/bin/sh: ../setup: No such file or directory”。

也有人可以解释一下执行“./setup”和“../setup”之间的区别吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T06:26:20.017

您可以通过创建单行脚本并将其传递给`sh`using来运行您在交互式会话中使用的命令序列，`-c`如下所示：

```
<exec dir="${dir}" executable="/bin/sh">
    <arg value="-c"/>
    <arg value=". ./setup; ./executeme"/>
</exec> 
```

您需要将这两个命令作为 one 传递`arg`，否则它们的处理方式不同：第一个成为“脚本”，下一个成为该脚本的第一个参数。或者，如果你喜欢，上面相当于运行

```
sh -c ". ./setup; ./executeme" 
```

而使用单独`arg`的元素，您正在运行

```
sh -c ". ./setup" ./executeme 
```

这可能不会失败，除非`setup`它的参数列表做了一些事情，但它不会运行`executeme`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:32:53.717

```
value="./setup" 
```

没有`.`一开始。

# javascript - 点击删除下划线（函数（）

> ID：11748506
> 
> 赞同：-4
> 
> 时间：2012-07-31T20:30:48.447
> 
> 标签：javascript, jquery, css

我有 Jquery 功能

```
 $(".Next").click(function () {
            $.mobile.changePage("#" + $("#Answer").val());
        }); 
```

但是Next按钮在文本下方有下划线链接，如何摆脱下划线链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:32:04.440

使用 CSS：

```
.Next{
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:38:59.030

我需要更多信息才能确定。但我猜 .Next 是与锚标记关联的类。如果是这种情况，那么我猜您只需要向锚点添加一些 CSS。例如在 css 文件中 .Next { text-decoration:none } 。有关锚的 css 标记的更多信息，请参见：[http](http://www.w3schools.com/css/css_pseudo_classes.asp) ://www.w3schools.com/css/css_pseudo_classes.asp 。

再一次让我给你一个可靠的答案，你需要向我展示实际的标记。但如果它是一个锚标记，您可能还想将代码修改为以下内容：

```
$(".Next").click(function (e) {
            e.preventDefault(); // prevents the default action of the anchor tag
            $.mobile.changePage("#" + $("#Answer").val());
        }); 
```

# xpages - 在 Notes 客户端中无法为预览找到请求的资源

> ID：11748508
> 
> 赞同：0
> 
> 时间：2012-07-31T20:30:50.847
> 
> 标签：xpages

如果 II 有一个空白的 xPage。使用浏览器预览时它工作正常，但是当我尝试在客户端中预览时，我得到无法找到请求的资源。

任何 xPage 都会出现这种情况。

有什么想法有什么问题吗？

这是我在日志中遇到的错误。它实际上并没有比浏览器告诉我的更多。

CLFAD0256E: Dispatcher Servlet 问题 - 找不到模块：pncpghd38.pncbank.com!!test/test2.nsf com.ibm.designer.runtime.domino.adapter.util.PageNotFoundException：找不到模块：pncpghd38.pncbank.com！ !test/test2.nsf at com.ibm.domino.xsp.module.nsf.NSFService.doService(Unknown Source) at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(Unknown Source) at com.ibm .designer.runtime.domino.adapter.LCDEnvironment.service(Unknown Source) at com.ibm.domino.xsp.bridge.websrv.servlets.DispatcherServlet.service(Unknown Source) at org.eclipse.equinox.http.registry.internal .ServletManager$ServletWrapper.service(Unknown Source) at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(Unknown Source) at org.eclipse.equinox.http.servlet.internal.ProxyServlet。com.ibm.pvc.webhttpservice.BridgeServlet 的 javax.servlet.http.HttpServlet.service(Unknown Source) 的 org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(Unknown Source) 的 processAlias(Unknown Source)。 com.ibm.pvc.internal.webcontainer.VirtualHost.handleRequest（未知源）的服务（未知源）com.ibm.ws.webcontainer.WebContainer.handleRequest（未知源）com.ibm.wsspi.webcontainer.WebContainer。 com.ibm.ws.webcontainer.http.HttpConnection.handleRequest(Unknown Source) 的 handleRequest(Unknown Source)，com.ibm.ws.http.HttpConnection.readAndHandleRequest(Unknown Source) 的 com.ibm.ws.http.HttpConnection。在 com.ibm.ws.util.ThreadPool$Worker.run（未知来源）处运行（未知来源）com.ibm.pvc.webhttpservice.BridgeServlet.service(Unknown Source) at javax.servlet.http.HttpServlet.service(Unknown Source) at com.ibm.pvc.internal.webcontainer.VirtualHost.handleRequest( Unknown Source) at com.ibm.ws.webcontainer.WebContainer.handleRequest(Unknown Source) at com.ibm.wsspi.webcontainer.WebContainer.handleRequest(Unknown Source) at com.ibm.ws.webcontainer.http.HttpConnection.handleRequest( Unknown Source) at com.ibm.ws.http.HttpConnection.readAndHandleRequest(Unknown Source) at com.ibm.ws.http.HttpConnection.run(Unknown Source) at com.ibm.ws.util.ThreadPool$Worker.run(来源不明）com.ibm.pvc.webhttpservice.BridgeServlet.service(Unknown Source) at javax.servlet.http.HttpServlet.service(Unknown Source) at com.ibm.pvc.internal.webcontainer.VirtualHost.handleRequest( Unknown Source) at com.ibm.ws.webcontainer.WebContainer.handleRequest(Unknown Source) at com.ibm.wsspi.webcontainer.WebContainer.handleRequest(Unknown Source) at com.ibm.ws.webcontainer.http.HttpConnection.handleRequest( Unknown Source) at com.ibm.ws.http.HttpConnection.readAndHandleRequest(Unknown Source) at com.ibm.ws.http.HttpConnection.run(Unknown Source) at com.ibm.ws.util.ThreadPool$Worker.run(来源不明）com.ibm.ws.webcontainer.WebContainer.handleRequest(Unknown Source) 上的 handleRequest(Unknown Source)，com.ibm.ws.webcontainer.http.HttpConnection 上的 com.ibm.wsspi.webcontainer.WebContainer.handleRequest(Unknown Source)。 com.ibm.ws.http.HttpConnection.readAndHandleRequest(Unknown Source) 上的 handleRequest(Unknown Source)，com.ibm.ws.util.ThreadPool$Worker 上的 com.ibm.ws.http.HttpConnection.run(Unknown Source)。运行（未知来源）com.ibm.ws.webcontainer.WebContainer.handleRequest(Unknown Source) 上的 handleRequest(Unknown Source)，com.ibm.ws.webcontainer.http.HttpConnection 上的 com.ibm.wsspi.webcontainer.WebContainer.handleRequest(Unknown Source)。 com.ibm.ws.http.HttpConnection.readAndHandleRequest(Unknown Source) 上的 handleRequest(Unknown Source)，com.ibm.ws.util.ThreadPool$Worker 上的 com.ibm.ws.http.HttpConnection.run(Unknown Source)。运行（未知来源）ThreadPool$Worker.run（未知来源）ThreadPool$Worker.run（未知来源）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:36:15.967

安装路径（程序文件内的数据）、访问权限、安装失败。有1000个理由。日志说什么？

# javascript - 在 D2L 主题中按角色发布内容

> ID：11748512
> 
> 赞同：1
> 
> 时间：2012-07-31T20:31:16.463
> 
> 标签：javascript, desire2learn

我正在尝试在 D2L 的 LMS 中按角色发布内容。这可能使用Javascript吗？类似于“如果 {RoleName}=Student，则显示这个，否则显示那个”......？我意识到我可以在主题级别按角色限制/发布内容，但我试图在主题内这样做，因此不能使用发布条件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:19:56.483

执行此操作的一种迂回方法是解析 QueryString 以获取 OU，然后发出 Valence 请求以找出课程中的用户角色。对于看起来非常简单的用例，将所有部分连接起来需要大量工作。这是我为我制作的工具使用的策略，这些工具可以嵌入到 D2L 页面中。

如果替换字符串正常工作，那么您可以使用它们和 JavaScript 的组合。但由于在大多数情况下替换发生在保存时间而不是渲染时间，因此它们实际上不适用于您的场景。

[Desire2Learn 替换内容中的字符串](https://stackoverflow.com/questions/15772647/desire2learn-replace-strings-in-content)

另一种选择是创建您自己的自定义小部件并将其放在课程主页上。由于替换字符串在小部件中正常工作，您可以读取 {rolename} 替换字符串的值并将其存储在 cookie 中。然后，在您的页面中，您将读取 cookie 的值来创建条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:12:37.023

您可以直接通过内容工具界面控制该功能，而无需添加 JavaScript。如果您无权访问内容中的内容，请与您的站点管理员联系。

# ruby-on-rails-3 - Rails 3 - 拯救 Mysql2::Error: 表不存在

> ID：11748514
> 
> 赞同：2
> 
> 时间：2012-07-31T20:31:25.310
> 
> 标签：ruby-on-rails-3, exception-handling

我有一个迭代，我在其中`set_table_name`需要一些模型。这个想法是，在每次迭代中，模型都会改变它的表。有时，表不存在，在这种情况下，会发生这种错误：

```
Mysql2::Error: Table 'db_name.table_name_xyz' doesn't exist 
```

我希望迭代继续运行而不是因为错误而中止。我已经用and包裹了这`set_table_name`行代码，但似乎没有引发异常，因为脚本在错误时立即中止（它不执行代码）。这是代码：`begin``rescue``rescue`

```
((start_year)..(start_actual_year)).each do |year|
      begin
        Data.set_table_name("Secciones#{year}#{year + 1}")
      rescue Exception => e
        next
      end
end 
```

我可以挽救这种错误吗？我应该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:10:49.580

你确定你正确地捕捉到了异常吗？如果需要，这里有[更多信息。](http://rubylearning.com/satishtalim/ruby_exceptions.html)

```
begin
  # Your code here.
rescue Exception => e
  # Output the exception that it is catching.
  puts e.message
ensure
  # The ensure block is used to close a db connection if needed.
end 
```

# javascript - 使用 jquery 调整表布局/结构

> ID：11748515
> 
> 赞同：0
> 
> 时间：2012-07-31T20:31:25.387
> 
> 标签：javascript, jquery, html

如何使用 jquery 执行以下操作？

我有一个三行和一个标题行的表。像这样的东西：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>
<%@ Import Namespace="MyModel.Model" %>
<div>
<table id="MyTable">
        <tr>
            <th>
                Select1
            </th>
            <th>
                Select2
            </th>
            <th>
                Text1
            </th>            
        </tr>

        <tr>
            <td>
                <select name="Select1"></select>
            </td>
            <td>
                <select name="Select2"></select>
            </td>
            <td>
                <input name="Input1"/>
            </td>            
        </tr>    
</table>
</div> 
```

我想克隆这个表的最后一行，删除除标题行之外的所有行，附加克隆的行（最后一行）并隐藏它（克隆的行）。

我知道如何分别执行这些操作。

```
$("#MyTable tr:last").clone()
$("#MyTable tr>td").remove()
$("#MyTable tr:last").appendTo('#MyTable tr:first')
$("#MyTable tr:last").hide() 
```

在删除所有行（但标题）后，我正在努力追加克隆行。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:36:32.487

您需要保留对克隆行的引用：

```
var $lastrow = $("#MyTable tr:last").clone();

// removes actual tr's, but not the headers
$("#MyTable tr > td").parent().remove();

$lastrow
    .appendTo('#MyTable')
    .hide(); 
```

# sql - SQL Server 创建有序的#Temp 表

> ID：11748517
> 
> 赞同：1
> 
> 时间：2012-07-31T20:31:29.897
> 
> 标签：sql, sql-server, tsql

我尝试创建有序的#Temp 表：

```
WITH Ordered AS (
SELECT ROW_NUMBER() OVER (ORDER BY [Quality] DESC) AS RowNumber, ImageID, Quality, Border, IsBest
  FROM [CatalogImages].[dbo].[Images] ORDER BY Quality)

SELECT *
  INTO #Temp
  FROM Ordered ;

 SELECT * FROM #Temp ; 
```

但我得到错误：

> 消息 1033，级别 15，状态 1，第 82 行
> ORDER BY 子句在视图、内联函数、派生表、子查询和公用表表达式中无效，除非还指定了 TOP 或 FOR XML。

如何创建有序临时表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:41:15.733

错误是因为您试图在公用表表达式中执行 Order By，这是不允许的。

仅从您发布的内容来看，您的 CTE 似乎不是必需的。你可以这样做：

```
SELECT ROW_NUMBER() OVER (ORDER BY [Quality] DESC) AS RowNumber, ImageID, Quality, Border, IsBest 
INTO #Temp 
ORDER BY Quality; 

SELECT * 
FROM #Temp 
ORDER BY Quality; 
```

（这也不意味着需要临时表......）

# c# - 为什么实体框架会这样做？

> ID：11748518
> 
> 赞同：1
> 
> 时间：2012-07-31T20:31:33.203
> 
> 标签：c#, entity-framework

假设我有一个`Car`界面。每个`Car`都有一组零件作为`ICollection<Part>`。除了类引用之外，该`Part`实体还有一个 ID 和一个可选的外键引用。`CarId``Public Car Car{ get; set;}`

所以这是有趣的部分。假设我有一个按`Part ID`. 我`Part`通过访问存储库来提供表格 a 。`form.Part = repos.Retrieve(PartID)`. 现在表单具有对零件的引用（以及零件通过零件所属的车辆）。我通过使用创建表单`context.Forms.Add(form);`

*数据库创建了一个**DUPLICATE**车辆和零件，具有自己的单独 ID，而不是引用已经存在的 ID。*

有人可以解释为什么会这样吗？

* * *

编辑

想要它们的人的类示例：

```
public class Form
{
    public int ID { get; set;}

    public Part Part { get; set;}      // Reference to Part
    public int? PartId { get; set; }   // Foreign Key to Part ID
}

public class Car : Vehicle
{
    public int ID { get; set;}

    public virtual ICollection<Part> Parts { get; set;} //Each car has parts
}

public class Part
{
    public int ID { get; set;}

    public Car Car { get; set;}      // Reference to Car
    public int? CarId { get; set; }   // Foreign Key to Car
} 
```

将导致此故障的代码。假设 Part 和 Car 已经存在于数据库中：

```
form Form = new form();
form.Part = partRepository.Retrieve(5); //gets part with id = 5
context.formRepository.Add(form); // new part created, duplicate of part #5 but with the next available id. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:40:00.573

在这些存储库中的某个地方，您有一个`DbContext`用于与数据库通信，对吗？

问题是您正在`Parts`通过两个不同的存储库处理同一个实体 (the )。当您将表单添加到表单存储库时，它可能会使用它。该存储库无法知道这些部分已经存在于数据库中并且是从数据库加载的，因为它们来自另一个存储库/DbContext。

You should really redesign your system so that those repositories either share a common DbContext when used together, or you should make just one repository instead of two.

(Personally I've never understood why people are always creating repositories on top of entity framework. The DbContext *is* an implementation of the repository pattern itself).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:39:46.763

请尝试使用 Data Annotation Key Attribute 标记您的 Id.s，这会将它们标记为主键以避免重复

```
public class Form
{
    [Key]
    public int ID { get; set;}

    public Part Part { get; set;}      // Reference to Part
    public int? PartId { get; set; }   // Foreign Key to Part ID
}

public class Car : Vehicle
{
    [Key]
    public int ID { get; set;}

    public virtual ICollection<Part> Parts { get; set;} //Each car has parts
}

public class Part
{
    [Key]
    public int ID { get; set;}

    public Car Car { get; set;}      // Reference to Car
    public int? CarId { get; set; }   // Foreign Key to Car
} 
```

# javascript - 如何确保按顺序加载coffeescript？

> ID：11748523
> 
> 赞同：0
> 
> 时间：2012-07-31T20:31:57.933
> 
> 标签：javascript, jquery, coffeescript

我在同一个文件夹中有两个咖啡脚本文件 A 和 B。我希望 A 执行到某个点，然后运行 ​​B，然后继续执行。换句话说，我想要这个：

```
//in A
$("#content").html(@currentView.el)
require ['B']

//in B
if document.location.href.indexOf("showdiv") > 0
    $("#content").trigger('click') 
```

但是，如果我将所有内容都放入 A，它可以正常工作：

```
//in A
$("#content").html(@currentView.el)

if document.location.href.indexOf("showdiv") > 0
    $("#content").trigger('click') 
```

我怎样才能让第一个片段工作？require 关键字是否使编译的 javascript 并行加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:05:41.440

在浏览器中，您可以通过在 html 文件中拉取代码的方式来控制加载顺序。这是我的一个项目中的一个示例（在`index.html`结束`body`标记之前）：

```
 <script src="vendor/jquery-1.7.2.min.js"></script>
  <script src="vendor/bs/js/bootstrap.min.js"></script>
  <script src="vendor/underscore-min.js"></script>
  <script src="vendor/backbone-min.js"></script>
  <script src="vendor/pouch.alpha.js"></script>
  <script src="vendor/backbone-pouchdb.js"></script>
  <script src="vendor/backbone-couchdb.js"></script>

  <script src="js/main.js"></script> 
```

最后一个是开始的，类似于 C 中的“main”函数，如果这对你有意义的话。在其中，有这个构造（当然编译为 js）：

```
$(document).ready ->
  # Initialization code goes here 
```

初始化代码将包含原始帖子中的所有代码（减去浏览器中不存在的 require 调用），或者调用包含它的函数。您需要以上述方式延迟脚本执行的原因是延迟执行，直到所有代码都正确加载。

还有其他方法可以做到这一点，您可能会感到困惑的是 Javascript AMD（异步模块定义）的概念，您可以在其中一个库中阅读更多关于它的信息（RequireJS - [http://requirejs.org](http://requirejs.org)）。但我的建议是在尝试让 AMD（使用工具）运行之前掌握上面描述的基础知识。

# google-earth - 如何在 Google Earth API 中获取当前显示图像的日期

> ID：11748525
> 
> 赞同：1
> 
> 时间：2012-07-31T20:32:00.817
> 
> 标签：google-earth

Google 地球 API 演示之一展示了如何显示历史图像、隐藏和显示时间线栏以及设置显示的当前日期。该演示可在[http://code.google.com/apis/ajax/playground/?exp=earth#time_and_historical_imagery_ui 获得](http://code.google.com/apis/ajax/playground/?exp=earth#time_and_historical_imagery_ui)

但是，如果当前日期设置为没有图像的时间，则使用最接近的可用图像。例如，如果日期设置为 2005 年，但只有 2003 年和 2009 年的图像，则将使用 2003 年的图像。

如何通过 API 查明所显示图像的实际日期是什么？它不需要是一个确切的日期，但知道年份很重要，知道月份会很棒。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:44:51.920

您会注意到，在时间滑块的 UI 中，对于每个有当前视图的历史图像的可用日期，都有很少的刻度线。

当您更改相机或视角时，可能会出现不同的图像。例如，当您放大时，可能会出现更多或更少的图像。

要以编程方式获取与这些标记关联的日期列表，您可以调用：

```
ge.getTime().getControl().getAvailableImageDates() 
```

这将返回一个 KmlTimeStamps 的 KmlObjectList，您可以对其进行迭代。

# ruby-on-rails - 为什么 bundle install 不使用 Gemfile 中的 bundler 版本，尽管它可用？

> ID：11748528
> 
> 赞同：0
> 
> 时间：2012-07-31T20:32:04.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, bundler

当我做一个

```
bundle install --path vendor/bundle 
```

在我的应用程序上，我收到以下错误。

```
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    bundler (= 1.0.18) java

  Current Bundler version:
    bundler (1.1.5)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

我的宝石清单显示我有提到的宝石

```
*** LOCAL GEMS ***

bundler (1.1.5, 1.0.22, 1.0.18) 
```

我的 gem 文件看起来像这样

```
gem "rake", "0.9.2"
gem "activerecord-jdbc-adapter", "1.2.0"
gem "activerecord-jdbcmysql-adapter", "1.2.0"
gem "acts_as_tree", "0.1.1"
gem "bundler", "1.0.18", :require => "bundler"
gem "database_cleaner", "0.6.7"
gem "jdbc-mysql", "5.1.13"
gem "jruby-jars", "1.6.2"
gem "jruby-rack", "1.1.3"
gem "jruby-openssl", "0.7.4"
gem "net-scp", "1.0.4"
gem "net-ssh", "2.2.1"
gem 'uuidtools', "2.1.1"
gem 'nokogiri', "1.5.0" 
```

我该如何解决？我使用 jruby-1.6.3 和 rails 3.0.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:11:24.593

您是否尝试过 - 从 gemfile 中删除捆绑器 - 将其设置为捆绑器版本以用于捆绑它 - 反之亦然：使用捆绑器版本来捆绑您在 gem 文件中需要的

但正如安东尼所说，你有理由将它包含在 Gemfile 中吗？

# javascript - 文本区域的 Internet Explorer 占位符

> ID：11748531
> 
> 赞同：0
> 
> 时间：2012-07-31T20:32:20.710
> 
> 标签：javascript, jquery, html

我的应用程序需要文本字段和 textarea 字段的占位符。我知道 Internet Explorer 不支持占位符。我环顾四周，发现了一些仅适用于文本字段的后备代码。我怎样才能让它也适用于 textarea。

代码：

```
jQuery(function() {
    jQuery.support.placeholder = false;
    test = document.createElement('input');
    if('placeholder' in test) jQuery.support.placeholder = true;
});

$(function() {
    if(!$.support.placeholder) { 
        var active = document.activeElement;
        $('input[type=text], textarea').focus(function () {
            if ($(this).attr('placeholder') != '' && $(this).val() == $(this).attr('placeholder')) {
                $(this).val('').removeClass('hasPlaceholder');
            }
        }).blur(function () {
            if ($(this).attr('placeholder') != '' && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
                $(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');
            }
        });
        $('input[type="text"], textarea').blur();
        $(active).focus();
        $('form').submit(function () {
            $(this).find('.hasPlaceholder').each(function() { $(this).val(''); });
        });
    }
}); 
```

HTML：

```
 <li>
                    <input type="text" placeholder="To:" id="to" autocapitalize="off" autocorrect="off" autocomplete="off" />
                </li>
                <li>
                    <textarea placeholder="Message:" id="body" rows="10" cols="30" autocapitalize="off" autocorrect="off" autocomplete="off"></textarea>
                </li> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:36:20.927

更改`$(':text')`为`$('input[type="text"], textarea')`

或者，这个现有的 jQuery 插件：

[https://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)

适用于文本区域和多种类型的输入字段，包括密码字段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T12:16:31.020

```
<script type="text/javascript">
 $(function() {
    if(!$.support.placeholder) { 
        var active = document.activeElement;
        $('input[type="text"], textarea').focus(function () {
            if ($(this).attr('placeholder') != '' && $(this).val() == $(this).attr('placeholder')) {
                $(this).val('').removeClass('hasPlaceholder');
            }
        }).blur(function () {
            if ($(this).attr('placeholder') != '' && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
                $(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');
            }
        });
        $('input[type="text"], textarea').blur();
        $(active).focus();
        $('form').submit(function () {
            $(this).find('.hasPlaceholder').each(function() { $(this).val(''); });
        });
    }
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:34:07.293

它正在使用[文本选择器](http://api.jquery.com/text-selector/)，将其更改为也使用 textarea。

```
$(':text') 
```

应该

```
$(':text, textarea') 
```

或为了[更好的性能](http://api.jquery.com/text-selector/#notes-0)使用

```
$('input[type=text], textarea') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:35:26.310

看起来您需要替换`:text`为`:text,textarea`.

# java - 在 JFreeChart 中更改注释的颜色和线宽

> ID：11748533
> 
> 赞同：1
> 
> 时间：2012-07-31T20:32:31.973
> 
> 标签：java, jfreechart

我正在向我的绘图添加注释，但我不知道如何更改它的颜色或线宽（笔画）。我已经尽我所能阅读了文档，但我没有想法。任何人都可以帮忙吗？

```
Shape shape = new Ellipse2D.Double(circleXValue - radius, circleYValue - radius, radius + radius, radius + radius);
XYShapeAnnotation annotation = new XYShapeAnnotation(shape);
// ??
plot.addAnnotation(annotation); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:08:17.553

[您可以使用此处](https://stackoverflow.com/a/6620017/230513)和[此处](https://stackoverflow.com/a/8056418/230513)找到相关示例。[`XYShapeAnnotation`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/XYShapeAnnotation.html#XYShapeAnnotation%28java.awt.Shape,%20java.awt.Stroke,%20java.awt.Paint%29)

![图 1](../Images/a08995843d892ea56b73eb558250fa14.png)

![图 2](../Images/6dcc9f6fad118512cec5ff1554f9b05c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T23:01:55.787

您正在使用此[构造函数](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/XYShapeAnnotation.html#XYShapeAnnotation%28java.awt.Shape%29)：

```
public XYShapeAnnotation(java.awt.Shape shape) 
```

您可能希望使用指定附加参数的[这些构造函数之一：](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/XYShapeAnnotation.html#XYShapeAnnotation%28java.awt.Shape,%20java.awt.Stroke,%20java.awt.Paint%29)

```
public XYShapeAnnotation(
    java.awt.Shape shape,
    java.awt.Stroke stroke,
    java.awt.Paint outlinePaint)

public XYShapeAnnotation(
    java.awt.Shape shape,
    java.awt.Stroke stroke,
    java.awt.Paint outlinePaint,
    java.awt.Paint fillPaint) 
```

# java - Hibernate实体关系的问题

> ID：11748535
> 
> 赞同：2
> 
> 时间：2012-07-31T20:32:33.420
> 
> 标签：java, hibernate, composite-key

我对 Hibernate 的关系有疑问：

我有两个实体 --> *Solicitud*和*DetalleAccesorio*，关系是：

我有一个带有许多*DetalleAccesorio的**Solicitud*，我需要用*DetalleAccesorio保存**Solicitud*，两者都是数据库上的不同表。这是 Solicitud 的重要*代码*：

 *`@Id @GeneratedValue( strategy=GenerationType.IDENTITY ) @Column( name="num_solicitud" ) private Long numSolicitud;`

```
 @OneToMany( fetch=FetchType.LAZY, mappedBy="codDetalle", cascade={ CascadeType.ALL } )
 private List<DetalleAccesorio> listaAccesorios;     ` 
```

我需要在 DetlleAccesorio 上保存相同的 Solicitud 主键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:16:45.350

基本上，您必须在子实体（DetalleAccesorio）中设置关系，例如：

```
@ManyToOne
Solicitud codDetalle 
```

看看这个[线程](https://stackoverflow.com/questions/814474/jpa-not-saving-foreign-key-to-onetomany-relation)和这个[文档](http://www.objectdb.com/api/java/jpa/OneToMany)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:17:52.650

`mappedBy="codDetalle"`从关系中删除。通过创建双向关系映射。在双向关系中，mappedby（onetomany）的一方不再控制关系。这就是hibernate不承认这里有关系的原因。如果您想要双向而不是按需要实现它。意味着双方都需要注释和重要部分-您必须以两种方式维护java中的引用！ [看看这个。](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html#collections-bidirectional)

正如您在双向中看到的那样（我认为您不需要，所以删除映射的，它将被解决）您需要在代码中维护 2 个方向：

> 仅对关联的反向端所做的更改不会保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:34:59.110

这是来自实体 DetlleAccesorio 的代码

```
@Id
@Column( name="cod_detalle" )
private Long codDetalle;

@Column( name="cod_accesorio" )
private Integer codAccesorio; 
```

并且 id "codDetalle" 必须与 Solicitud 的 id 相同才能保存它 (numSolicitud)...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:35:05.503

事实上，它有一个非常简单的解决方案

*如果你愿意访问`Solicitud`from `DetalleAccesorio`：*
在`DetalleAccesorio`课堂上你必须有这个：

```
@ManyToOne(fetch=fetchType.EAGER)
Solicitud codDetalle 
```

这是可选的。

（这不是可选的）在`Solicitud` 试试这个：

```
@OneToMany(fetch=FetchType.LAZY)
@JoinTable(name = "Solicitud_DetalleAccesorio_MAPPING", joinColumns = @JoinColumn(name = "DetalleAccessorio_ID"), inverseJoinColumns = @JoinColumn(name = "Solicitu_ID"))
List<ManagerDetails> managerDetails; 
```*

# oracle - 如何防止用户选择其他模式的表？

> ID：11748538
> 
> 赞同：0
> 
> 时间：2012-07-31T20:32:42.677
> 
> 标签：oracle, oracle10g, oracle-xe

我创建了一个新的数据库用户。我发现该帐户可以选择其他模式表的数据。那么如何限制新帐户仅操作其拥有的表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:25:50.670

你不能。您可以`REVOKE`在某些情况下使用，但要记住关于 REVOKE 的最重要的事情是它只能撤销显式`GRANT`编辑的权限。每个数据库都具有不绑定到任何特定模式并授予 PUBLIC 的 GLOBAL 权限。只要这些权限（权限）有效，所有 ROLES 都会继承这些权限。

您可以撤销某些`PRIVILEGES`诸如`SELECT, DELETE, INSERT`等，但您必须在每个模式的对象级别上执行此操作。这意味着，如果将新表添加到这些模式中的任何一个，则默认情况下用户将有权访问它，除非该`PRIVILEGES`用户的新表上的`REVOKED`.

根据 Oracle 文档，以下是 REVOKE 的先决条件-

**先决条件**

1.  要撤消系统特权，您必须已通过 ADMIN OPTION 授予该特权。

2.  要撤消角色，您必须已被授予具有 ADMIN OPTION 的角色。如果您具有 GRANT ANY ROLE 系统权限，则可以撤销任何角色。

3.  要撤销对象特权，您必须事先已将对象特权授予用户和角色，或者您必须具有 GRANT ANY OBJECT PRIVILEGE 系统特权。在后一种情况下，您可以撤销由对象所有者或代表所有者授予的任何对象特权——即，由具有 GRANT ANY OBJECT PRIVILEGE 的用户授予。但是，您不能撤销通过 WITH GRANT OPTION 授予方式授予的对象权限。

# c# - 在 C# 中对数据求和的最有效方法

> ID：11748540
> 
> 赞同：2
> 
> 时间：2012-07-31T20:32:46.997
> 
> 标签：c#, asp.net, sql, oracle

我正在尝试创建一个友好的报告，按一天中的时间汇总学生人数。我最初是从 Campusname 的循环开始，然后是 time，然后是 day 和 hi，但它效率极低且速度很慢。我决定采用另一种方法，在一次选择中选择我需要的所有数据并使用 c# 组织它。

[原始数据视图](http://i.imgur.com/NveAr.png)

我的问题是我不确定是否将其放入数组、列表、字典或数据表中来汇总注册并按如下所示进行组织（模型，未计算）。任何指导将不胜感激。

[友好的看法](http://i.imgur.com/2xzCS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:37:39.553

好吧，如果您只需要向用户显示一些数据（而不是对其进行编辑），您可能需要创建一个报告。

否则，如果您只需要总和，则可以在 an`IEnumerable`和调用中获取所有数据`.Sum()`。正如 colinsmith 所指出的，您可以并行使用 Linq。

但是有一件事是确定的……如果你有很多数据，你不想做很多查询。您可以在 SQL 中使用`sum`查询（如果数据存储在数据库中），也可以从您获取的集合中求和。

您不想循环获取数据。在内存中处理数据比多次查询数据库然后处理它要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:50:47.933

通常我会建议您在数据库中执行此操作，即使用 group by 等进行选择，我在弄清楚您的第一张图片与第二张图片在日期方面的关系时遇到了一些麻烦，所以我无法提供例子。

当然，您也可以在 C# 中使用 LINQ to 对象来执行此操作，但我会首先尝试在数据库中解决它，这样您在性能和带宽方面会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:07:34.573

就像是

```
select campusname, ssrmeet_begin_time, count(ssrmeet_monday), count(ssrmeet_tue_day) ..
from the_table
group by campusname, ssrmeet_begin_time
order by campusname, ssrmeet_begin_time
/ 
```

应该接近你想要的。计数只计算值，而不是 NULL。它也比首先将所有数据获取到客户端快数千倍。让数据库为你做分析，它已经有了所有的数据。

顺便说一句：而不是那些图片，给一些 ddl 和插入带有数据的语句来处理更聪明。这将邀请更多的人来帮助回答这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:52:25.553

我不太确定你到底在追求什么。但据我了解，我建议您创建一个类来代表您的注册

```
public class Enrollment
{
  public string CampusName { set;get;}
  public DateTime DateEnrolled { set;get;}
} 
```

并从数据库中获取所有注册详细信息到此类的集合

```
List<Enrollment> enrollments=db.GetEnrollments(); 
```

现在你可以对这个 Collection 做很多操作来得到你想要的数据

例如：如果您想在星期五进行所有注册

```
var fridaysEnrollMent = enrollments.
           Where(x => x.DateEnrolled.DayOfWeek == DayOfWeek.Friday).ToList(); 
```

如果您想要在`AA`校园内发生的入学人数

```
var fridayCount = fridaysEnrollMent .Where(d => d.CampusName == "AA").Count(); 
```

# script# - 如何在脚本中获取鼠标位置#

> ID：11748541
> 
> 赞同：1
> 
> 时间：2012-07-31T20:32:47.417
> 
> 标签：script#

如何获取鼠标相对于元素的 x/y 位置 - 在这种情况下为画布元素 - 使用 Script#，最好不使用 onmousemove 事件？

我似乎无法在这些数据中找到任何东西，而且我通常使用 Javascript 执行此操作的方式 - window.event.clientx - 似乎没有被复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:05:59.007

您通常不想引用 Window.Event ...您通常使用传入事件处理程序的事件对象作为参数。

虽然 Event 对象已被映射（https://github.com/nikhilk/scriptsharp/blob/master/src/Libraries/Web/Html/ElementEvent.cs）但现在 ClientX 和 ClientY 不是......大概是因为大多数人只是在使用 jQuery 的事件包装器/抽象。也就是说，最好用这些缺少的属性来完成事件对象。如果您愿意，您可以分叉和更新，并提交拉取请求或提交问题，很快就会修复。

一个丑陋的解决方法（如果你真的不能分叉/构建等）是使用 Type.GetField 并对“clientX”进行后期绑定访问。

# sql-server-2008-r2 - 如何使用插件将数据从 Sql Server 2008 R2 数据库传输到 CRM 2011 内部数据库？

> ID：11748546
> 
> 赞同：0
> 
> 时间：2012-07-31T20:32:58.557
> 
> 标签：sql-server-2008-r2, dynamics-crm-2011

设想：
`X_source = N/A.
Y_source = SQL server 2008 R2.
Z_source = CRM 2011 database.`

我有一个 Y_source，每天都会`X_source`以特定时间间隔更新信息。完成后`Z_source`必须连接到 Y_source 并上传该信息。我无法控制 X 和 Y 源，但我知道`Y_source`它将与`Z_source`.

问题：
由于我知道有超过 200,000 条记录，`Y_source`我不能只调用所有记录并将它们上传到`Z_source`. 我必须找到一种方法，可以分批或逐个迭代它们。我的想法是使用 T-SQL 游标，但这似乎是错误的方法。

资料来源：
我拥有 Y 和 Z 的地址和凭据。我也可以控制`Z_source`.

编辑好吧，让我清除一些我认为可能很重要的事情。：

1.  `Z_source`确实是一个独立于 CRM 2011 的数据库，但它是它的来源。

2.  更新过程也`Z_source`可以是 CRM 2011 的外部过程。这意味着只要数据库更新，CRM 是否触发更新都没有关系。

3.  要处理的记录数量将远远超过 200,000 条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:24:19.653

我不知道你是否习惯了 SSIS，但我认为它真的可以帮助你！

这里有两篇关于它的好帖子：http: [//gotcrm.blogspot.be/2012/07/crm-2011-data-import-export-using-cozy.html](http://gotcrm.blogspot.be/2012/07/crm-2011-data-import-export-using-cozy.html)和[http://a33ik.blogspot.be/2012/02 /integrating-crm-2011-using-sql.html](http://a33ik.blogspot.be/2012/02/integrating-crm-2011-using-sql.html)

问候，

凯文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:34:49.147

我想出的解决方案是创建一个 C# 控制台应用程序以连接到`Y_source`检索数据，然后使用 CRM 2011 SDK 使用以下快速启动应用程序：Sdk/samplecode/cs/quickstart 并将其修改为插入`Z_source`. 此应用程序将在更新后 6 小时通过 Windows 任务运行，`Y_source`所以是的，我不需要为此提供精确的触发器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:29:02.330

一些东西：

1.  CRM 2011 中的插件类似于 SQL 触发器。CRM 事件，例如`Create`、`Delete`、`Update`、`Merge`等，*会触发*您在插件中编写的代码的执行。这似乎不适合您的情况，因为您希望独立于 CRM 操作分批进行操作。

2.  CRM 2011 中的任何内容都不是在基于集合的批次中完成的。一切都是一次完成一个数据库行。（为了证明这一点，请分析您认为应该在一个集合中完成的任何 CRM 事件并查看生成的 SQL。）然而，仅仅因为 CRM 2011 不能使用基于集合的操作并不意味着您必须收集所有SQL Server 中的源数据一次一行。

所以我推荐以下内容：

*   编写一个快速应用程序，一次从 SQL Server 中提取所有数据。调用`.ToList()`结果以将结果集放入内存。
*   循环遍历行列表，并为每个行在 CRM 2011 中执行适当的操作（`Create`、`Update`、`Delete`等）。
    *   对于每一行，在 CRM 记录中包含该行的唯一标识符，以便您将来知道在与 同步时是删除还是更新记录`Y-Source`。
*   安排您的应用程序在`Y-Source`更新时运行。

根据您的需要，该应用程序可以成为在 SQL Server 中计划或触发的 CLR 存储过程、在服务器上按计划运行的控制台应用程序，或任何其他可以完成上述任务的东西。最近的问题[通过外部工具安排工作流程](https://stackoverflow.com/questions/11723350/schedule-workflows-via-external-tool "通过外部工具安排工作流程")也说明了这一点。

# grails - 找不到 ID 为空 grails 的员工

> ID：11748551
> 
> 赞同：1
> 
> 时间：2012-07-31T20:33:27.087
> 
> 标签：grails, groovy

有人可以帮我解决我的情况。我有以下代码。

```
class Employee {

    Integer empId
    String firstName
    String lastName

    static constraints = {
        empId()
        firstName()
        lastName()
    }

    static mapping = {
        id generator:'assigned', name:'empId'
        version false
    }
} 
```

该代码允许我通过“创建”保存员工，但给出以下错误消息

“未找到 ID 为空的员工”，并且在列表中，所有员工都已列出，但单击任何 Emp Id 都会出现相同的错误。请帮忙。这让我发疯了。

洛基

* * *

感谢您的回复。就像我提到的那样，我可以将 empId 保存在数据库中，但仍然会收到该消息并查看分配了 id (empId) 的列表。链接指向员工/节目，末尾没有数字。但是 employee/show/22(empId) 工作正常。employee/edit/22 也可以，但更新不起作用。

我没有使用任何分配的序列。只是一些随机整数。也许更好的例子是使用 SSN 而不是 empId。

再一次感谢你。

* * *

你是一个很好的帮助伙伴。感谢您的时间和耐心。我没有写任何特殊的更新或保存（我太新了，不能深入挖掘）。只需使用 grails 来生成所有内容。但是，我确实找到了解决方法。我更改了域类以添加变量 id (Long) 并添加 empId setter 方法以将 empId 值分配给 id。做到了。这是我的代码。

class Employee { Long id Long empId String firstName String lastName

```
static constraints = {
    empId()
    firstName()
    lastName()
}

static mapping = {
    id generator:'assigned', name:'empId', column: 'emp_id'
    version false
}

public void setEmpId(Long empId){
    this.empId = empId
    this.id = empId
} 
```

}

如果您有更好的方法，请随时提出建议。

问候

洛基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:42:00.153

如果您使用的是“分配”序列，那么您必须在保存之前自己分配对象 ID。否则，您的对象将使用 null 或“默认 0”id 保存。如果你想让 GORM 为你分配一个 id，你需要使用另一种类型的生成器，比如“sequence”生成器。就像：

```
id name: 'customId', generator: 'sequence', params: [sequence:'some_sequence'] 
```

更多关于 id 生成器的信息在[这里](http://grails.org/doc/latest/ref/Database%20Mapping/id.html)。

# python - Python etree xml 写入问题

> ID：11748552
> 
> 赞同：1
> 
> 时间：2012-07-31T20:33:33.327
> 
> 标签：python, xml, elementtree

我正在尝试将多个文件写入一个目录，每个文件之间的更改很少（例如增量 id 编号）当我尝试运行我的程序时，它在写入大约 5 个文件后失败。但是当我再次尝试并重新选择源文件时，它可以工作。这是我的代码：

```
if not os.path.isdir(self.fDirectory + "/AutoGen" + strftime("%Y-%m-%d %H:%M:%S",           gmtime())):
        os.mkdir(self.fDirectory + "/AutoGen" + strftime("%Y-%m-%d_%H.%M.%S", gmtime()))

    anum = 0
    for x in range(len(self.csvdata)-1):
        for y in range(len(self.csvdata[x+1])):
            self.myRoot.find(self.csvdata[0][y]).text = self.csvdata[x][y]
        anum+=1
        myTree.write(self.fDirectory + "/AutoGen" + strftime("%Y-%m-%d_%H.%M.%S", gmtime()) + "/" + self.filename + "_" + str(anum) + ".xml") 
```

这是我得到的错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
File "C:\Python32\lib\tkinter\__init__.py", line 1399, in __call__
return self.func(*args)
File "C:\Users\CNash\Documents\XML Generator\XMLGen.py", line 148, in doIt
myTree.write(self.fDirectory + "/AutoGen" + strftime("%Y-%m-%d_%H.%M.%S", gmtime()) + "/" + self.filename + "_" + str(anum) + ".xml")
File "C:\Python32\lib\xml\etree\ElementTree.py", line 836, in write
file = open(file_or_filename, "wb")
 IOError: [Errno 2] No such file or directory: 'C:/Users/CNash/Documents/XML Generator/AutoGen2012-07-31_20.23.52/EXuTest_DOCD00140_6.xml' 
```

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:48:55.113

一方面，使用[`os.path.join`](http://docs.python.org/library/os.path.html#os.path.join)，它会让你的生活更轻松。

在我看来，第一个和最后一个调用`strftime`发生在不同的时间（你在第一个调用中省略了下划线）。脚本找不到目录，因为它不存在。我敢打赌，一个在几秒钟前命名的人可能，*甚至是可疑*的，确实如此。

尝试将您的第一个`if`-statement替换为

```
dirname = os.path.join(self.fDirectory,strftime("AutoGen%Y-%m-%d_%H.%M.%S",gmtime()))

if not os.path.isdir(dirname):
    os.mkdir(dirname) 
```

最后一行：

```
myTree.write(os.path.join(dirname, self.filename + "_" + str(anum) + ".xml")) 
```

# php - LDAP PHP Centos

> ID：11748556
> 
> 赞同：0
> 
> 时间：2012-07-31T20:33:50.067
> 
> 标签：php, ldap, centos

使用 PHP LDAP 时发生奇怪的事情

我的用户名和密码将正确验证，但如果我只是输入没有密码的用户名，它也会返回 true。如果我用错误的密码输入我的用户名，它将正确失败。以下是我的代码得到的响应。

```
//Code Wrong Password
$login = ldap_bind( $ds, "Username", "WrongPass" ); 
var_dump($login);

//Response
Warning: ldap_bind(): Unable to bind to server: Invalid credentials in /var/www/sksinternal/httpdocs/LoginCredentials.php on line 36 bool(false) 

//Code correct Password
$login = ldap_bind( $ds, "Username", "CorrectPass" ); 
var_dump($login);

//Response
bool(true)

//Code No Password
$login = ldap_bind( $ds, "Username", "" ); 
var_dump($login);

//Response
bool(true) 
```

Centos 5 连接到 Windows 2008 服务器（Active Directory）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:36:06.067

简单的 BIND 共有三种类型：

*   匿名的
*   未经身份验证
*   认证

使用具有零长度密码的名称是`unauthenticated`BIND。LDAP 标准文档声明该名称将用于“跟踪目的”并且不能用于身份验证，因此没有进行身份验证。

现代、专业品质的服务器可以选择拒绝未经身份验证的简单 BIND 请求，因为不进行身份验证。您的服务器可能并非如此。

# lua - 在 Lua 中解压 LZW

> ID：11748563
> 
> 赞同：1
> 
> 时间：2012-07-31T20:34:02.563
> 
> 标签：lua, compression

> **可能的重复：**
> [Lua 中的 LZW 压缩](https://stackoverflow.com/questions/11744573/lzw-compression-in-lua)

我真的很想得到任何人关于如何在 Lua 中进行 LZW 解压的帮助。我一直在寻找互联网，我真正找到的都是关于压缩的文章。帮助？

谢谢！！

# c++ - 在 C++ 中读取 COM 端口，出现错误

> ID：11748570
> 
> 赞同：3
> 
> 时间：2012-07-31T20:34:41.830
> 
> 标签：c++, serial-port

第一次海报长期读者。

我一直在玩从蓝牙 GPS 单元读取数据。我可以使用 hyperterm 连接到它并查看数据

**以下日志来自超词**

```
$GPRMC,195307.109,A,5208.2241,N,00027.7689,W,000.0,345.8,310712,,,A*7E
$GPVTG,345.8,T,,M,000.0,N,000.0,K,A*07
$GPGGA,195308.109,5208.2242,N,00027.7688,W,1,04,2.1,58.9,M,47.3,M,,0000*7E
$GPGSA,A,3,19,03,11,22,,,,,,,,,5.5,2.1,5.0*3F
$GPRMC,195308.109,A,5208.2242,N,00027.7688,W,000.0,345.8,310712,,,A*73
$GPVTG,345.8,T,,M,000.0,N,000.0,K,A*07
$GPGGA,195309.109,5208.2243,N,00027.7688,W,1,04,2.1,58.9,M,47.3,M,,0000*7E 
```

**结束日志**

**以下日志来自我的 C++ 程序**

```
$GPGSV,3,3,12,14,20,105,16,28,18,323,,08,07,288,,16,01,178,*7A

$GPRMC,195,3,2ÿþÿÿÿL.š945.109,A,5208.2386,N,00027.7592,W,000.0,169.5,8,323,,08,07,288,,16,01,178,*7A

$GPRMC,195,3,2ÿþÿÿÿL.š310712,,,A*70

$GPVTG,169.5,T,,M,000.0,N,000.0,K,A*06

8,07,288,,16,01,178,*7A

$GPRMC,195,3,2ÿþÿÿÿL.š310712,,,A*70

$GPVTG,169.5,T,,M,000.0,N,000.0,K,A*06

8,07,288,,16,01,178,*7A

$GPRMC,195,3,2ÿþÿÿÿL.š$GPGGA,195946.109,5208.2386,N,00027.7592,W,1.0,K,A*06

8,07,288,,16,01,178,*7A 
```

**结束日志**

**问题** 我在换行时留下了换行符，C++ 输出有额外的换行符，不知道为什么？C++ 日志也有一些时髦的字符......？

**编码**

```
 for (int n=0;n<100;n++) {
        char INBUFFER[100];
        cv::waitKey(1000);
        bStatus = ReadFile(comport,   // Handle
                &INBUFFER,            // Incoming data
                100,                  // Number of bytes to read
                &bytes_read,          // Number of bytes read
                NULL);

        cout << "bStatus " << bStatus << endl;
        if (bStatus != 0)
        {
            // error processing code goes here
        }
        LogFile << INBUFFER;
    } 
```

我正在使用设置...

```
 comSettings.BaudRate = 2400;
    comSettings.StopBits = ONESTOPBIT;
    comSettings.ByteSize = 8;
    comSettings.Parity   = NOPARITY;
    comSettings.fParity  = FALSE; 
```

...据我所知，这与 hyperterm 使用的设置相同。关于我做错了什么的任何提示？

干杯！

**更新** 因此，在更新为使用 bytes_read 并在 NMEA 数据末尾考虑额外的 LF 之后，我现在拥有...

```
 if (bytes_read!=0) {
        for (int i=0; i < bytes_read; i++) {
            LogFile << INBUFFER[i];
        }
    } 
```

这似乎有固定的东西！

```
$GPGGA,215057.026,5208.2189,N,00027.7349,W,1,04,6.8,244.6,M,47.3,M,,0000*41
$GPGSA,A,3,32,11,01,19,,,,,,,,,9.7,6.8,7.0*3D
$GPRMC,215057.026,A,5208.2189,N,00027.7349,W,002.0,208.7,310712,,,A*74
$GPVTG,208.7,T,,M,002.0,N,003.8,K,A*09
$GPGGA,215058.026,5208.2166,N,00027.7333,W,1,04,6.8,243.1,M,47.3,M,,0000*42 
```

谢谢大家，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:48:18.373

你有一个`bytes_read`var，但你什么都不做？`INBUFFER`在我看来，无论实际加载了多少/几个字节，您都将整个文件转储到文件中？

# linux - 列出编译对象使用的指令集 - 用于 ARM 和 X86

> ID：11748571
> 
> 赞同：0
> 
> 时间：2012-07-31T20:34:42.533
> 
> 标签：linux, disassembly

这个问题适用于 ARM 和 X86 体系结构以及可执行文件和对象，我想要一份已编译代码使用的指令集列表：这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:46:39.560

如果您在 Linux 系统上，因此正在处理[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)文件，该`file`命令应该报告指令集是什么。

### 编辑

看来您真正想要的是一个汇编列表（我建议您编辑问题以明确这一点），可以使用`objdump -d obj.o`. 其他选项可用，请`man objdump`查看详细信息。

或者，如果您自己构建目标代码，您可以指示您的编译器输出汇编程序（例如`gcc -S src.c`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:07:05.393

以下代码片段只是我对您的问题的快速而肮脏的解决方案（仅适用于英特尔助记符）。

```
objdump --no-show-raw-insn -M intel -d /usr/bin/objdump | awk '{if ($2 !~ ":" && $2 != "data32" && $2 != "file" && $2 != "of" && length($2) > 0) {print $2}}' | sort -u 
```

# actionscript-3 - 动作脚本...下一步是什么

> ID：11748573
> 
> 赞同：1
> 
> 时间：2012-07-31T20:34:52.033
> 
> 标签：actionscript-3

我对我作为程序员的未来有一个困境，我已经做了 4 年的 Actionscript 开发人员并且想继续前进，唯一的问题是我不知道在哪里。

也许你们中的一些人（前 AS3 开发人员）已经完成了这种转换并提出了一些好的建议。

谢谢！

PS 如果这有点离题，我会知道，但我真的认为这是一个很好的提问地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T21:04:36.053

我是一名拥有 10 年以上 flash/actionscript 经验的开发人员。我仍然喜欢它并不重要，客户希望一切都可以在他们的 iOS 设备上运行，这就是我们今天生活的世界。

HTML/CSS/JS 是前进的道路，可以调试。我会推迟不完全支持的 html5 功能（如 canvas、svg），并学习使用 div、css、sprite sheet 和 js/jquery 做所有事情。

推荐工具：

*   [jQuery](http://jquery.com/)（根据需要添加插件）
*   [greensock 的 tweenMax](http://www.greensock.com/v12/)现在可用于 js 并且比 jQuery 的动画更快/更好。
*   精灵表 -[学习制作](http://www.bit-101.com/blog/?p=2939)和[使用它们](http://www.spritely.net/)

将 div 视为保存资产的影片剪辑。使用 greensock 来制作动画，就像在 AS3 中一样。

至于调试，用chrome，学会用console。console.log("test") == trace("test")。控制台还将指出 javascript 错误以及它们所在的行。

此外，如果您正在制作将从 Flash 导出的适用于 Android 和/或 iOS 的移动应用程序，Flash 并没有死，它仍然很有用。我认为新版本的 flash 也有一些 sprite sheet 导出选项，或者至少我记得在某处读过它。

您必须记住，通过这种类型的工作，您今天所做的事情将在两年后有所不同。它总是在移动，不要被一种工具卡住。

另请查看[labs.adobe.com](http://labs.adobe.com/)并下载[Adob​​e Edge](http://labs.adobe.com/technologies/edge/)。Edge 将成为 Adob​​e 的 HTML5 版本的 flash。如果你需要一个工具来为你打破僵局，它目前是有限的，但很有希望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:45:54.380

关于 Flash/ActionScript 的未来，请阅读[Adob​​e 的 Flash 运行时路线图](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)。

> **Flash 播放器“下一个”**
> 
> 虽然 Adob​​e 正在开发 2012 年的版本，包括 11.2 和随后的 2012 版本，但我们也在对 Flash 运行时的代码库进行现代化改造，以确保 Flash 运行时在未来 5 到 10 年内满足开发人员的需求。此作品在本文档中称为 Flash Player 和 ActionScript “Next”。
> 
> 这项工作包括但不限于以下内容：
> 
> *   重构和现代化当前核心 Flash 运行时代码库
> *   在 ActionScript 虚拟机上工作
> *   对 ActionScript 语言的更新
> 
> 这项工作的主要目标是提供核心 Flash 运行时和 ActionScript 虚拟机的现代实现，以显着提高脚本执行性能并为 Flash 在未来十年的发展奠定基础。
> 
> 目前，这项工作产生的初始 Flash 运行时版本计划在 2013 年发布。
> 
> Adobe 计划在 2013 年发布的版本中添加对 Adob​​e AIR 中硬件加速 StageVideo 的支持。
> 
> **动作脚本“下一步”**
> 
> 近年来，ActionScript 的应用程序和内容范围发生了显着变化，而 ActionScript 3 语言自 2006 年推出以来几乎没有变化。Adobe 认为是时候修改该语言，以谨慎地引导其进一步发展，使其具有更强的表现力以及生产力和性能提升。
> 
> 从语言设计的角度来看，Adobe 使用以下假设作为下一代 ActionScript 开发的指南：
> 
> *   对稳健性、模块化和可维护性等长期生产力优势的需求不断增加，以补充脚本语言的短期生产力优势特征，例如开发速度
> *   对高性能的需求增加
> *   对硬件利用率的需求增加
> 
> 首先，Adobe 计划在短期内显着提高性能，目标是在长期内持续提高性能。当我们处理如何发展 ActionScript 时，性能是主要目标。其次，Adobe 旨在通过简化语言、改进工具支持和加强错误预防来提高开发人员的工作效率。最后，由于减少了不必要的复杂性，我们将能够更快地在 Flash 运行时内进行创新。
> 
> 以下是为下一代 ActionScript 语言和虚拟机探索的一些项目：
> 
> *   默认为严格的静态类型，可选的动态类型：大多数程序的大多数部分都有望从静态类型中受益。但是，ActionScript 3 倾向于在绝对严格的静态类型更可取的地方很容易陷入动态类型。这将得到纠正。动态类型在需要时仍然可用，但它不再是 ActionScript 的默认设置，需要显式启用。
> *   类型推断：类型声明仅在某些战略位置是必需的。在其他任何地方，编译器都会自动推断出合适的类型声明并将整个程序视为静态类型，即使程序员不必声明任何类型。因此，可以很好地近似非类型化编程的便利性，同时提供类型化编程的性能优势。
> *   面向硬件的数字类型：例如，int、uint、float、float4、byte、short、long 等（具体的类型集仍在讨论中）。目前在 ActionScript 3 中，整数值可以溢出为浮点值。这将被更改，以便数字运算永远不会改变数字的基础表示。我们预计这一添加将大大降低实现复杂性并提高运行时性能。
> 
> 这些只是我们关注的几个领域。随着我们对语言和虚拟机将如何变化的思考不断发展和巩固，我们将更新此文档。

# html - 默认输入元素大小

> ID：11748575
> 
> 赞同：18
> 
> 时间：2012-07-31T20:34:58.290
> 
> 标签：html, css, input, textbox

输入元素默认为 size="20" 如果它没有内联定义或者一个 CSS 样式规则归于它。

你如何使默认值的实际大小？对于其他元素：

```
<div style="display: inline; width: auto;">
    The box will only fit the width of it's content
</div> 
```

width: auto 就是你所需要的。我无法设置定义的宽度，因为该值可能更长。例如：

```
<input id="short" type="text" value="1000" />
<input id="long" type="text" value=" Areally long name is in this input field." /> 
```

我希望 #short 的大小为 1000（基本上 size="4" + 填充），但 #long 的大小可以根据需要而定。这些输入是以编程方式输入的，所以我不能简单地在我想要的短课程上放一个短课程，在我想要长的课程上放一个长课程。如果可以的话，我真的很喜欢它：

```
input { width: auto; } 
```

无论如何要这样做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T12:40:45.670

> 输入元素默认为 size="20"

此“默认大小”取决于浏览器、版本和您的操作系统。在内联样式中不可能做到这一点。

最好的解决方案是设置宽度和填充，使其加起来为 100%

```
input {
  width: 98%;
  padding: 1%;
} 
```

然后将其设置为绝对左右 0

```
<fieldset>
    <input type="text" />
</fieldset> 
```

最后添加这个CSS

```
<style type="text/css">
    fieldset {
      position: relative;
    }

    input {
        position: absolute;
        left: 0;
        right: 0;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-02T10:13:24.530

> *“你如何使默认值的实际大小？（...）我真的很喜欢它，如果我可以输入：输入{宽度：自动;}无论如何要这样做？”*

在**Input HTML Element**中，`width`由其`size`属性控制。这是我用来模拟的一种快速方法`{ width: auto; }`，它是浏览器依赖性证明：

角度：

```
<input type="text" [size]="element.value.length + 1" #element> 
```

纯香草 JavaScript：

```
<input type="text" oninput="this.size = this.value.length + 1"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-18T18:43:54.397

假设您在表单中的每一行都有每个输入，您可以将 size 属性设置为所需的大小，但还可以添加一个 css：

```
input[type="text"] {
  max-width: 100%;
} 
```

这可确保该字段不会溢出表单。这种方法可以直观地提示短字段需要多少数据（因为它们的大小合适），同时对长字段设置上限。

# perforce - p4 列出被搁置的打开文件

> ID：11748579
> 
> 赞同：0
> 
> 时间：2012-07-31T20:35:15.920
> 
> 标签：perforce

我不想要更改列表；我想要被搁置的实际文件。所以结果应该看起来像的结果，`p4 opened`但过滤后只显示被搁置的文件。

任何人都知道如何在几个命令中做到这一点？（最好是一个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:04:42.523

我找不到将其降低到低于此值的方法，但也许这将有助于作为一个起点：

```
for cl in `p4 -ztag changes -u your.name -s shelved | \
    grep -oP '(?<=^\.{3} change )\d+'`
do
    p4 describe -Ss $cl | grep -E '^\.{3}'
done | sort | uniq 
```

这会`p4 describe -S`在您搁置的每个更改列表上执行一次，但会尝试仅显示文件。它可能有点脆弱。它应该看起来像：

```
... //depot/yourfile.txt#4 edit
... //depot/otherfile.txt#5 edit 
```

# java - UnsupportedClassVersionError java

> ID：11748585
> 
> 赞同：0
> 
> 时间：2012-07-31T20:35:28.587
> 
> 标签：java, eclipse, unsupported-class-version

> **可能重复：**
> [线程“主”java.lang.UnsupportedClassVersionError 中的异常：a（不支持 d major.minor 版本 51.0）](https://stackoverflow.com/questions/7237536/exception-in-thread-main-java-lang-unsupportedclassversionerror-a-unsupporte)

我之前一直在使用带有 jre 1.7.x 和 jdk 1.7.x 的 Eclipse，我不得不降级到 1.6x。

我降级的方法是从我的计算机上卸载所有相关的 1.7 并重新安装 1.6。

现在，当我尝试调试时，我得到了

```
`java.lang.UnsupportedClassVersionError: MyClass: Unsupported major.minor version 51.0` 
```

查了一下之前编译的JRE和JDK的版本，都是1.6。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:36:24.670

```
java.lang.UnsupportedClassVersionError: `Unsupported major.minor version 51.0` 
```

您的运行时版本与编译时版本不同。

确保`JAVA_HOME`变量等，以确保编译和运行时都指向相同的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:38:27.913

看看这里[如何修复 java.lang.UnsupportedClassVersionError: Unsupported major.minor version](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)

您使用 1.7 编译代码并使用 1.6 进行调试

# php - PHP数组覆盖自身

> ID：11748591
> 
> 赞同：0
> 
> 时间：2012-07-31T20:35:44.563
> 
> 标签：php, arrays, post

每次我传递后数组数据时，它都会在每次传递新选择时覆盖自己。我希望它添加到以前的选择中并继续增长。

我正在努力解决这个问题，是因为传递的数组没有足够的维度或正确的键吗？

```
echo '<input type="checkbox" id ="menu" name="'.$did.'['.$result2['cid'].']'.'['.$result2['id'].']" value="'.$result2['id'].'">'.ucwords($result2['name']).'<br />';
if($array){    
    foreach ($array as $key => $value){        
        if(is_array($value)){
            foreach ($value as $key => $value){
                $query = mysql_query("SELECT title FROM menuCategory WHERE cid = $key");
                $result = mysql_result($query,0);                      
                echo '<h1>'.ucwords($result).'</h1>';             
                foreach ($value as $key => $value){
                    echo '<input type="hidden" name="'.$key.'" value ="'.$value.'">';  
                    $query = mysql_query("SELECT cid, id, name FROM menuBread WHERE id = $value");
                    $result = mysql_fetch_assoc($query);
                    echo ucwords($name = $result['name']).'<br />';
                }                   
            } 
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:36:44.780

您对覆盖变量的内部和外部循环使用**相同的变量名....**`foreach`

更改其中一个地方的名称，您应该会很好。

# c++-cli - C++-CLI dll 可以在本机应用程序中使用吗？

> ID：11748592
> 
> 赞同：0
> 
> 时间：2012-07-31T20:35:47.317
> 
> 标签：c++-cli

我正在用本机代码 (C++) 编写一个 dll，供其他本机 C++ 应用程序使用。

dll 的任务之一是执行 XML 文件操作。据我所知，C++ 对处理 XML 文件的支持很差，例如搜索、写入、读取。

所以，我在想我是否可以在 clr:mixed 模式下编译我的 dll 代码并使用 .NET XML 程序集来做与 XML 相关的事情。但是，我仍然希望我的 dll 被本机 C++ 应用程序使用，而不会增加任何麻烦。

这种方法会奏效吗？对此有何警告？顺便说一句，除了 XMLlite 之外，还有其他用于 C++ 的 XML 库吗？

# java - Java - 自定义哈希表

> ID：11748605
> 
> 赞同：2
> 
> 时间：2012-07-31T20:36:22.160
> 
> 标签：java

我想为具有多个值的键创建自定义哈希表。为此，我想做的是：

> 1) 创建一个大小为 Integer_MAX 的 Linked Lists/Array-list 数组。
> 
> 2）将值（int's）插入到编号为键编号的链接列表/数组列表中。

现在，我面临两个问题：

> 1）如何定义链接列表/数组列表的数组。
> 
> 2）有什么方法可以让它们变得原始？

任何帮助或任何使它变得更好的想法都会对我有所帮助。

谢谢。

编辑：我知道哈希表概念与具有多个值的键无关。但是，我想让它变成那样。

我想制作一个自定义哈希映射和原语（不是对象，因为它需要像番石榴这样的巨大空间）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:41:36.307

我强烈建议使用guava[项目](https://code.google.com/p/guava-libraries/)中的[Multimap 。](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Multimap.html)您可以使用[ArrayListMultiMap](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/ArrayListMultimap.html)并获得您正在寻找的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:41:03.497

使用番石榴多图[http://tomjefferys.blogspot.com/2011/09/multimaps-google-guava.html](http://tomjefferys.blogspot.com/2011/09/multimaps-google-guava.html)和[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect /Multimaps.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimaps.html)

对于原语，请使用此[http://labs.carrotsearch.com/hppc.html](http://labs.carrotsearch.com/hppc.html)或[http://fastutil.di.unimi.it/](http://fastutil.di.unimi.it/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T20:44:08.610

1) 像任何数组一样定义一个 LinkedLists 数组：

```
LinkedList[] l = new LinkedList[10]; 
```

虽然，你可能应该做一个列表数组来代替：

```
List[] l = new List[10]; 
```

2) 数组不是原语。LinkedLists 也不是。此外，LinkedLists 只能保存引用，不能保存原始类型。如果您必须在自定义 hashmap 类中存储原语，则只需要使用数组，而不是 LinkedList 或 ArrayList。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T20:38:58.977

如果您需要的是多值映射，请使用 Collections

[http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T21:52:33.107

你*真的*检查过 Guava + Trove Multimap 的实现吗？像这个：

```
final int listCapacity = 10; // Intege.MAX_VALUE isn't an option
final ListMultimap<Integer, Integer> multimap =
    Multimaps.newListMultimap(
        TDecorators.wrap(
            new TIntObjectHashMap<Collection<Integer>>()), //Map<int, Collection>
        new Supplier<List<Integer>>() {
          @Override
          public List<Integer> get() {
            return TDecorators.wrap(new TIntArrayList(listCapacity)); //List<int>
          }
        }); 
```

你会完全成熟`ListMultimap<Integer, Integer>`，所以你可以这样做：

```
multimap.putAll(1, Ints.asList(1, 11, 111, 1, 1111));
multimap.putAll(2, Ints.asList(2, 22, 222, 2, 2222));
multimap.put(3, 333);

System.out.println("multimap: " + multimap);
System.out.println("get(2): " + multimap.get(2));
System.out.println("get(3): " + multimap.get(3));
System.out.println("get(4): " + multimap.get(4)); 
```

输出：

```
multimap: {3=[333], 2=[2, 22, 222, 2, 2222], 1=[1, 11, 111, 1, 1111]}
get(2): [2, 22, 222, 2, 2222]
get(3): [333]
get(4): [] 
```

并且每个列表都是 的实例`TIntArrayList`，每个地图都是`TIntObjectHashMap`，它们**非常**节省内存和优化（顺便说一句，您应该尝试使用 Map 的参数）。我认为您无法构建同时可用的更优化的实现。

唯一的缺点是自动装箱成本，但它不会消耗那么多内存，更可能是时间。

# php - Redbeanphp - 从外键索引中获取数据

> ID：11748607
> 
> 赞同：2
> 
> 时间：2012-07-31T20:36:25.607
> 
> 标签：php, redbean

抱歉标题含糊不清，如果有人想编辑它以更多地反映我发布的内容，请这样做。这是情况。我有 3 张桌子：

支持：

> 编号 | 联系方式 | 标题 | 问题 | ETC

支持登录：

> 编号 | 联系方式 | 登录 | 通过 | ETC

接触：

> 编号 | 名字 | 姓氏 | 电子邮件 | ETC

我正在加载支持 bean，并且正在访问联系信息：

```
$support=R::load('support',1);
echo $support->contact->first_name; 
```

我想类似地回显 supportlogin 信息：

```
echo $support->contact->ownSupportlogin->login; 
```

这有可能吗，我这样做是否正确？我尝试了以下方法但没有成功：

```
echo $support->contact->supportlogin->login;
echo $support->contact->ownSupportlogin->login;
echo $support->contact->ownSupportlogin[0]->login; 
```

**编辑：更多信息** 我做了`print_r($support->contact)`并获得了数据：

```
RedBean_OODBBean Object
(
    [null:RedBean_OODBBean:private] => 
    [properties:RedBean_OODBBean:private] => Array
        (
            [id] => 109
            [phone] => 1234580970
            [first_name] => Tim
            [last_name] => Withers
        )

    [__info:RedBean_OODBBean:private] => Array
        (
            [type] => contact
            [sys.id] => id
            [tainted] => 
        )

    [beanHelper:RedBean_OODBBean:private] => RedBean_BeanHelperFacade Object
        (
        )

    [fetchType:RedBean_OODBBean:private] => 
) 
```

然后我做到了`print_r($support->contact->ownSupportlogin)`，这出现了：

```
Array
(
    [13] => RedBean_OODBBean Object
        (
            [null:RedBean_OODBBean:private] => 
            [properties:RedBean_OODBBean:private] => Array
                (
                    [id] => 13
                    [link] => fecd4ef67e8c789efa1792f9ee0efff4
                    [login] => 
                    [password] => 
                    [receiveemails] => 1
                    [contact_id] => 109
                    [role] => 1
                )

            [__info:RedBean_OODBBean:private] => Array
                (
                    [type] => supportlogin
                    [sys.id] => id
                    [tainted] => 
                )

            [beanHelper:RedBean_OODBBean:private] => RedBean_BeanHelperFacade Object
                (
                )

            [fetchType:RedBean_OODBBean:private] => 
        )

) 
```

我可以使用: 访问它`echo $support->contact->ownSupportlogin[13]->login;`，但是动态执行它似乎是一个问题....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:51:06.207

想通了，如果其他人有类似的问题，会留下来：

这仅在您拥有 1:1 关系时才有效。Redbean 将 填充`ownSupportlogin`为与联系人相关的所有 supportlogin 行的数组。如果一个表可以有许多子表，那么您将需要遍历该数组并提取所需的数据。如果是 1:1 的关系，那么您可以使用 PHP`reset()`访问数组中第一个元素的数据：

```
echo reset($support->contact->ownSupporlogin)->login; 
```

# android - ViewPager 从片段 A 更新片段 B 中的 listView

> ID：11748612
> 
> 赞同：0
> 
> 时间：2012-07-31T20:36:57.743
> 
> 标签：android, android-listview, android-fragments, android-viewpager

我有一个带有两个片段的 ViewPager。在第一个上，有按钮（它是一个菜单），它们代表不同的类别。在第二个上，它是一个显示数据的列表视图。当用户单击其中一个菜单项时，我正在寻找一种方法来更改要在 listView 上显示的数据。例如：用户点击菜单项 1（fragment 1），fragment 2 上的 listView 必须更新相应的数据。

我从[Google Android 开发人员那里阅读了有关片段](http://developer.android.com/guide/components/fragments.html)的文档，但我无法解决，我没有找到解决问题的方法。

也许我错过了什么？

编辑：我试图通过使用 listItems.clear() 清除数据列表（ArrayList> listItems）来清除我的 ListView。没找到adapter.clear()怎么做，貌似Adapter类中不存在这个方法。

总结一下：我在包含 ListView (Fragment2) 的片段中创建了一个更新方法。我通过主要活动中的回调方法调用它，这部分似乎工作（我用调试模式检查了它）。在我的片段 2 的更新方法中，我使用 listItems.clear() 清除数据，然后执行片段的 OnActivityCreated()。在其中，我的线程调用下载数据，然后在 OnPostExecute 中创建 ListView。

这是我的代码示例（片段2）：

```
// After data are ready
lvListe = (ListView) getView().findViewById(R.id.lvListe);
lvListe.setSelected(true);
lvListe.setScrollingCacheEnabled(false);

adapter = new LazyAdapter(getActivity(),
getActivity().getBaseContext(), listItems,
     R.layout.affichageitem, new String[] { "image", "title",
                    "subtitle" }, new int[] { R.id.img_title,
                    R.id.titre_main, R.id.soustitre_main });

lvListe.setAdapter(adapter);
lvListe.setClickable(true);

lvListe.setOnItemClickListener(onItemClickListener);

// Update method :

public void update(String requete, String type)
{
    this.type = type;
    this.requete = requete;

    listItems.clear();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:26:52.000

我可能会这样做的方式是在`Activity`托管中创建一个回调方法，`ViewPager`并在第二个中创建一个方法`Fragment`来更新数据。

然后你会这样称呼它：

```
class Fragment1...
{
    ...
    callBackUpdate(data);
}

class Activity...
{
    ...
    public void callBackUpdate(String data)
    {
        Fragment2.update(data);
    }
}

class Fragment2...
{
    ...
    public void update(String data)
    {
        //do whatever
    }
} 
```

开发者页面展示了如何为`Activity`.

编辑：实际上这就是开发人员页面所说的这样做。他们为回调创建接口`OnArticleSelectedListener`。

**编辑：**我假设您正在将此库用于 LazyLoader：[https ://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

如果是这样，那么您可以自己添加清除数据的方法。为此，请在 ListAdapter 中添加这样的方法：

```
public void clear()
{
    data = new String[](); //depends on what data is, if it's a List then just call                             data.clear() for example
    imageLoader=new ImageLoader(activity.getApplicationContext()); //clear the images
    notifyDataSetChanged(); //notify the adapter that the data has changed
} 
```

这可能不完全符合您目前的想法，但您应该明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:43:18.443

[尝试在http://developer.android.com/reference/android/app/FragmentTransaction.html](http://developer.android.com/reference/android/app/FragmentTransaction.html)使用称为 FragmentTransaction 管理器的东西

还有 FragmentManager [http://developer.android.com/reference/android/app/FragmentManager.html](http://developer.android.com/reference/android/app/FragmentManager.html)

查看 stackoverflow 上与 FragmentManager 和 FragmentTransaction 相关的一些问题来解决这个问题。您需要做的就是将片段替换为由特定 xml 膨胀的新片段

# php - PHP cURL - 处理信用卡交易时的安全性

> ID：11748613
> 
> 赞同：2
> 
> 时间：2012-07-31T20:36:58.413
> 
> 标签：php, security, curl

我正在使用一个信用卡处理器脚本——由处理器提供——它接收各种信用卡数据和商家帐户数据，获取一个 cURL，并解析返回的 XML 以获取交易状态。

**代码：**

```
define("CURL_PROCESSING_URL", "https://ideposit.vbprograms.net/servlet/pg");

$params =   "Merchant_User_Name=" . "vitale" .
            "&Merchant_Password=" . "test" .
            "&Tracking_Number=" . "00001" .
            "&Credit_Card_Number=" . "4012888888881" .
            "&Credit_Card_Exp_Date=" . "1205" .
            "&Charge_Amount=" . "12.00" .
            "&AVS_Street=" . "8320" .
            "&AVS_Zip_Code=" . "85284" .
            "&CV_Security_Code=" . "999" .
            "&Credit_Card_Type=" . "MC_CARD_VISA" .
            "&CardHolder_Name=" . "test Card Holder";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, CURL_PROCESSING_URL);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $params);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$returned = curl_exec($ch);
curl_close($ch);

$p = xml_parser_create();
xml_parse_into_struct($p, $returned, $vals, $index);
xml_parser_free($p); 
```

**问题：**

1) SSL_VERIFYPEER 设置为 false 是否更容易欺骗服务器和拦截交易数据？

2) cURL URL 和相关的 POST 值是存储在服务器日志中还是以纯文本形式传输？

3) 是否有更安全的方式或一组选项来执行此交易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:42:37.170

我认为在生产环境中，您可能希望使用默认值 CURLOPT_SSL_VERIFYPEER = true。这将验证 SSL 证书是否有效。对于测试或开发环境，处理器可能会为您提供一个沙箱以供您使用，该沙箱可能具有自签名证书或过期证书或类似证书，您可能会认为这是错误的。

您正在使用 SSL，因此数据不会以纯文本形式发送。在不知道你有什么样的错误日志的情况下，很难说它是否会存储在服务器日志中。

假设您始终使用 SSL 并且您没有记录敏感数据，那么 cURL 完全适合您尝试做的事情。

# java - 将变量的值从一种方法传递到另一种方法

> ID：11748614
> 
> 赞同：0
> 
> 时间：2012-07-31T20:37:05.993
> 
> 标签：java, variables, methods

这看起来很简单，但我不知道为什么我会遇到这样的困难......所以在 getURL 中，我返回字符串“total”。我正在尝试返回方法 handleRequest 中已有的 SAME 值“total”。建议？提前致谢！

```
public class Multiply implements Controller {

    static int product;
    private static String total;

    public static String getURL(HttpServletRequest req) {

        String scheme = req.getScheme();            // http
        String serverName = req.getServerName();    // hostname.com
        int serverPort = req.getServerPort();       // 80
        String contextPath = req.getContextPath();  // /mywebapp
        String servletPath = req.getServletPath();  // /servlet/MyServlet
        String pathInfo = req.getPathInfo();        // /a/b;c=123
        String queryString = req.getQueryString();  // d=789

        String[] item = queryString.split("&");
        product = 1;
        for (int i = 0; i < item.length; i++) {
            String[] s = item[i].split("=");

            String name = s[0];
            String value = s[1];
            int numValue = Integer.parseInt(value);
            product = product * numValue;

        }
        total = "" + product;
        return total;

    }

    public ModelAndView handleRequest(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        String Mess = total;

        ModelAndView modelAndView = new ModelAndView("hello");
        modelAndView.addObject("message", Mess);

        return modelAndView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:46:58.213

`total`是类的成员变量`Multiply`。从任何一种方法访问它都应该没有问题。请记住，它是未初始化的。所以除非你`getURL`之前打电话，`handleRequest`否则`total`不会被分配给任何人`String`，并且会给你一个错误。

另外，我会在几个领域观察你的资本化情况。

编辑：为了澄清起见，从技术上讲，您并没有将值从一种方法传递给另一种方法。您正在访问两个方法之间的共享成员变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:51:09.993

您的实施存在许多问题。首先，通过声明`total`静态，这个类的所有实例将具有相同的值`total`。如果您正在使用创建控制器并重用它的框架，这可能会导致问题，因为该类的所有实例都将引用和更新相同的成员字段。

你想要的是让你的`getURL`方法返回 total 的值，然后从你的`handleRequest`. `getURL`可以是静态的，因为它不依赖于非静态成员字段。你真的应该重命名`getURL`为`getTotal`or`getTotalFromURL`因为那是你正在做的事情。你要求`getURL`做的实际上是一个[副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)，应该避免作为一种做法。

```
public class Multiply implements Controller {

    public static String getURLTotal(HttpServletRequest req) {
        String scheme = req.getScheme();            // http
        String serverName = req.getServerName();    // hostname.com
        int serverPort = req.getServerPort();       // 80
        String contextPath = req.getContextPath();  // /mywebapp
        String servletPath = req.getServletPath();  // /servlet/MyServlet
        String pathInfo = req.getPathInfo();        // /a/b;c=123
        String queryString = req.getQueryString();  // d=789

        String[] item = queryString.split("&");
        int product = 1;
        for (int i = 0; i < item.length; i++) {
            String[] s = item[i].split("=");

            String name = s[0];
            String value = s[1];
            int numValue = Integer.parseInt(value);
            product = product * numValue;

        }
        return Integer.toString(product);
    }

    public ModelAndView handleRequest(HttpServletRequest request,
                                      HttpServletResponse response)
                 throws ServletException, IOException 
    {
        String Mess = Multiply.getURLTotal(request);

        ModelAndView modelAndView = new ModelAndView("hello");
        modelAndView.addObject("message", Mess);

        return modelAndView;
    }
} 
```

# android - state_activated 预蜂窝

> ID：11748615
> 
> 赞同：8
> 
> 时间：2012-07-31T20:37:08.173
> 
> 标签：android, android-layout

你如何使用

```
<item android:drawable="@drawable/ic_launcher" android:state_activated="true"/> 
```

对于也应该在 <11 设备上运行的应用程序中的列表视图项目？

由于`activated_state` 在 HC 之前不可用，我只能想到两个肮脏的解决方法：

1.  在您的`Activity`.
2.  在我的自定义中维护激活的元素`ListAdapter`

但任何一个都令人满意。（`getListView().setChoiceMode(...)`不会有效果，...）

还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T13:56:32.757

你看过这个教程吗？

[http://mobile.tutsplus.com/tutorials/android/android-compatibility-list-indicators-on-honeycomb/](http://mobile.tutsplus.com/tutorials/android/android-compatibility-list-indicators-on-honeycomb/)

# facebook - 应用程序取消授权：是否有任何触发事件可以让我在不重新加载页面的情况下更新 fbsr cookie？

> ID：11748621
> 
> 赞同：0
> 
> 时间：2012-07-31T20:37:45.733
> 
> 标签：facebook, facebook-javascript-sdk

我在这里的第一篇文章！:)

情况：

*   用户授权该应用程序并在使用它时，在下一个选项卡中，他正在从设置页面中删除应用程序（应用程序取消授权）。

为什么：

*   我想通过现有的 fbsr cookie 授权每个函数调用，其中它的存在是用户登录状态的证明。

其他解决方案：

1.  我可以使用每个 Canvas POST 中传递的签名请求来做到这一点，但我不想混合它:)
2.  在每次通话之前，我可以通过 FB.getLoginStatus() 方法刷新登录状态
3.  ...检查来自 sr 的每个 user_id 与数据库条目（无论如何都必须做），没关系，但不直接；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:55:07.907

`me/permissions`每次要验证用户时都检查一下...

```
FB.api('/me/permissions', function(response) {
    var ra = response['data'][0];
    pPublishStream = (ra['publish_stream'] == 1);
    pCreateEvent = (ra['create_event'] == 1);

    if (pPublishStream && pCreateEvent) {
        // yay!!!
    }
}); 
```

**编辑：**回想起来，我上面的回答解决了你提到的问题，但**也**抓住了用户删除应用程序的个人权限的情况。所以也许这不是你想要的。

# jquery - 悬停时获取当前锚href

> ID：11748622
> 
> 赞同：0
> 
> 时间：2012-07-31T20:37:48.797
> 
> 标签：jquery, hover, anchor, this

我有一个链接列表，我在悬停时为其制作了一个“弹出”div。这些链接都指向一个查询，例如`?page=link1`. 我试图在查询后获取值，因此`link1`并将其放入 div 的 html 中。现在有了 .match ，什么都不会发生。如果我只使用 .attr('href') 那么我会得到一个“未定义”的响应。

有人可以告诉我我做错了什么吗？

[这是一个小提琴](http://jsfiddle.net/9X7ee/2/)

这是我现在拥有的代码。任何能让我朝着正确方向前进的帮助都会很棒。我知道我很接近，我只是对 jquery 还没有很好的理解。

**jQuery**

```
$(document).ready(function() {
    var moveLeft = 20;
    var moveDown = 10;
    $('#pops').hover(function(a) {
        var file = $(this).attr("href").match(/page=([0-9]+)/)[1];
        $('#pop-up').html('file name is ' + file);
        $('#pop-up').show();
        return false
        a.preventDefault();
    });
    $('#pops').mousemove(function(b) {
        $("#pop-up").css('top', b.pageY + moveDown).css('left', b.pageX + moveLeft);
        return false
        b.preventDefault();
    });
});​ 
```

**HTML**

**更新：**我的链接描述不正确。查询实际上包含数字、字母和小数。

```
<div id="pops">
 <a href="content.asp?page=ns2.6">link 1</a><br>
 <a href="content.asp?page=ns3.8">link 2</a><br>
 <a href="content.asp?page=jp1.0">link 3</a><br>
 <a href="content.asp?page=jp2.1">link 4</a><br>
</div>
<div id="pop-up"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:44:25.010

您的选择器和正则表达式错误，您需要选择一个`<a>`来获取它`href`，而您忘记了`link`正则表达式中的。

```
 $('#pops a').hover(function(a) {
            var file = $(this).attr("href").match(/page=(link[0-9]+)/)[1]; 
```

[小提琴](http://jsfiddle.net/mowglisanu/9X7ee/7/)

此正则表达式匹配给定的所有样本`/page=([a-z]{2}\d\.\d)/`

[http://jsfiddle.net/mowglisanu/9X7ee/8/](http://jsfiddle.net/mowglisanu/9X7ee/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:45:57.163

您的悬停功能应该是：

```
$('#pops a').hover(function(e) {
    var file = $(this).attr("href").match(/page=(.*)/)[1];
    $('#pop-up').html('file name is ' + file);
    $('#pop-up').show();
    return false
    a.preventDefault();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/fSRVy/3/)**

请注意，选择器错误（应该是`$('#pops a')`）并且正则表达式也不正确（应该是`/page=(.*)/`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:44:43.930

如果您要使用“this”，那么您需要定位“a”元素：

```
$('#pops').hover(function(a) { 
```

应该 ：

```
$('#pops a').hover(function(a) { 
```

您可以通过使用 JavaScript 拆分方法并选择数组的第二个值来获取文件名，如下所示：

```
var fileName = file.split("=")[1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T20:54:49.797

好的，您的代码存在一些问题：

1 - 您希望悬停与锚本身相关联，而不是与它们的容器相关联。IE `$('#pops a').hover(function(a) { ... });`

当您使用 $(this).attr("href")...`this`时，会引用 #pops 容器，但您希望它引用实际的锚点。

2 - 你匹配了错误的正则表达式。

以下代码在您的小提琴中进行了测试。

希望能帮助到你。

```
$(document).ready(function() {
        var moveLeft = 20;
        var moveDown = 10;

        $('#pops a').hover(function(a) {
        var file = $(this).attr("href").match(/link\d/i);

        $('#pop-up').html('file name is ' + file);
        $('#pop-up').show();

        return false
        a.preventDefault();
        });

        $('#pops').mousemove(function(b) {
        $("#pop-up").css('top', b.pageY + moveDown).css('left', b.pageX + moveLeft);

        return false
        b.preventDefault();
        });    
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T20:42:03.490

我认为正则表达式应该是`/page=link([0-9]+)/`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T20:51:24.847

如果在 href attr 中仅出现页面中的数字，则只需

```
var file = $(this).attr("href").match(/([0-9]+)/); 
```

# mysql - 如何确定mysql索引是否完全适合内存

> ID：11748629
> 
> 赞同：30
> 
> 时间：2012-07-31T20:38:35.223
> 
> 标签：mysql, sql, indexing

有没有办法确定 mysql 索引是否完全适合可用内存？如果是这样，我将如何：

*   确定mysql索引的大小
*   确定应用程序的可用内存
*   确定索引是否完全适合内存

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-31T20:48:07.240

取决于存储引擎

# MyISAM（缓存来自 .MYI 文件的索引页面）

```
SELECT FLOOR(SUM(index_length)/POWER(1024,2)) IndexSizesMB
FROM information_schema.tables WHERE engine='MyISAM' AND
table_schema NOT IN ('information_schema','performance_schema','mysql'); 
```

从 中减去`key_buffer_size`。如果答案 > 0，那么是

# InnoDB（缓存数据和索引页面）

```
SELECT FLOOR(SUM(data_length+index_length)/POWER(1024,2)) InnoDBSizeMB
FROM information_schema.tables WHERE engine='InnoDB'; 
```

从 中减去`innodb_buffer_pool_size`。如果答案 > 0，那么是

[**我在DBA StackExchange**](https://dba.stackexchange.com/a/2194/877)上写过这个[](https://dba.stackexchange.com/a/2194/877)

 **在专用数据库服务器上，确保`InnoDBSizeMB+IndexSizesMB`不超过 RAM 的 75%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:44:19.847

要查找 MySQL 可用的内存，请查看`my.cnf`，可能位于：`/etc/mysql/my.cnf`

```
key_buffer_size = 264M 
```

要查找表的索引大小：`SHOW TABLE status FROM [DBNAME]`**

# asp.net - 如何加速 DNN 站点

> ID：11748631
> 
> 赞同：-1
> 
> 时间：2012-07-31T20:38:57.663
> 
> 标签：asp.net, performance, dotnetnuke

谁能告诉我如何加速我的 DNN 站点？我已经更改了 siteSetting Option 中的设置并缓存了该站点。但我的网站仍然很慢。谁能帮我...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:26:18.777

普拉迪普，

[这里](http://mitchelsellers.com/blogs/2008/04/15/dotnetnuke-performance-settings-explained!.aspx)提到了性能的许多方面。以及主机设置 > 性能级别的缓存设置。如果你使用的是 text/html 模块，你也应该在模块设置中使用缓存。该博客文章中详细解释了许多其他需要考虑的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:28:40.367

您是否使用任何自定义模块？我最近部署了一个外网 dnn 站点，登录和主页非常慢，所有其他页面都很快。

原来主页上的第 3 方模块是罪魁祸首。

# java - 如何将hashmap从一个传递到另一个为jqgrid准备json数据的jsp

> ID：11748637
> 
> 赞同：0
> 
> 时间：2012-07-31T20:39:04.697
> 
> 标签：java, jquery, jqgrid

我想将 hashmap 对象传递给另一个 jsp 为我准备 json 数据来创建网格。

在 jsp 中，我从 dao java 文件中获取哈希图，但我需要将这些哈希图内容显示为网格。所以为了做到这一点，我想把它传递给另一个jsp，它从hashmap中准备json数据。但我没有找到任何解决方案将哈希图传递给该 jsp 文件。我必须将这些哈希图作为网格中的帖子值传递。jsp文件数据

```
 Hashmap groupMap1= GroupMap.getGroupMapModel();
    Hashmap groupMap2 = GroupMap.getGroupMappingNames(); 
```

这是创建网格的代码

```
 jQuery("#list").jqGrid({
                altRows:false
                ,autowidth:true
                ,url:'<%=request.getContextPath()%>/jsp/common/prepareGridData.jsp'
                ,datatype: "json"
                ,height: "100%"
                ,colNames:<%=colNames%>
                ,colModel:<%=colModel.toString()%>
                ,paging: true
                ,rowNum:25
                ,rowList:[25,50,75,100]
                ,loadonce:true
                ,caption: "Group Listing"
                ,pager:"#gridBottom"
                ,multiboxonly:false
                ,multiselect:false
                ,scrollrows:false
                ,shrinkToFit: false
                ,viewrecords:true
                ,postData:{groupMap1:"<%=groupMap1%>",groupMap2:"<%=groupMap2%>"}
            }).navGrid('#page',{edit:false,add:false,del:false});
        } 
```

我们无法通过 request.getParameter 获取任何对象。那么prepareGrdData.jsp文件如何访问这些值来获取json数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:42:55.900

一种方法可以将它们设置为属性，例如`request.setAttribute(key, value);`

和

```
request.getAttribute(key); 
```

# asp.net - VB.NET 表达式预期

> ID：11748641
> 
> 赞同：1
> 
> 时间：2012-07-31T20:39:29.997
> 
> 标签：asp.net

当我执行以下操作时，我会收到一条消息，说 Expression Expected

```
 If (Not (String.IsNullOrEmpty(e.Item.DataItem("DueDate")) && String.IsNullOrEmpty(e.Item.DataItem("ActualDate"))) ) Then

     End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:42:56.973

如果这是 VB.NET，则 AND 运算符是**AndAlso**

`AndAlso`它的兄弟`OrElse`更好，因为：

*   避免执行部分逻辑表达式以避免出现问题。
*   通过不执行比所需更多的复合表达式来优化代码

所以你的代码应该是

```
If (Not (String.IsNullOrEmpty(e.Item.DataItem("DueDate")) AndAlso String.IsNullOrEmpty(e.Item.DataItem("ActualDate"))) ) Then 

    .... 
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:43:10.907

而不是 && 使用 AndAlso

# ruby-on-rails - Rails - image.png 未预编译

> ID：11748642
> 
> 赞同：2
> 
> 时间：2012-07-31T20:39:31.537
> 
> 标签：ruby-on-rails, image, asset-pipeline, precompiled

我正在尝试在 Amazon 的 EC2 服务器上部署一个 Web 应用程序，并且我在服务器上安装了代码。一切看起来都在工作，但是当我转到主页时，我收到一条 500 错误消息，并且该`production.log`文件给了我以下错误：

```
ActionView::Template::Error (image.png isn't precompiled) 
```

*   我试过跑步`rake assets:precompile`，

*   我已将线路更改`config/environments/production.rb`为`config.assets.compile = true`

*   我检查了编译`image.png`是否在`public/assets/manifest.yml`

但我仍然得到同样的错误。

我正在运行 Rails 3.2.6 和 Ruby 1.8.7。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:54:43.647

跑步`rake assets:precompile RAILS_ENV=production`应该可以解决它。如果您不提供任何`RAILS_ENV`，Rails 假定它是`development`

我相信这是因为资产管道中的每个环境都有不同的行为。因此，作为一般规则，在生产中，始终使用 RAILS_ENV='production' 运行 rake 任务，并且您应该保持安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T10:54:57.443

我正在使用 Redhat 的 Openshift，当部署在服务器上时，它会自动 RAKE 到生产环境。我也有同样的问题，但只在生产服务器上。

执行更改：

config/environments/production.rb 到 config.assets.compile = true

工作了一个款待。此文件中还有另一个参数可以更改：

config.assets.precompile += %w[ *.png *.jpeg *.jpg *.gif ]

当部署在服务器上时，您可以手动执行：

耙 RAILS_ENV=生产

或者，如果您使用像 Openshift 这样自动部署的服务器，将考虑 production.rb 文件中的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:45:37.897

在`config/application.rb`添加一行：

```
config.assets.precompile += ['image.png'] 
```

虽然，如果它在`public/assets/images`你不应该。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:49:29.713

已解决 - 需要运行`rake assets:precompile RAILS_ENV='production`而不是`rake assets:precompile`...

# objective-c - 在 box2d 中的小对象上创建 Touchjoints/Mousejoints

> ID：11748643
> 
> 赞同：0
> 
> 时间：2012-07-31T20:39:44.823
> 
> 标签：objective-c, ios, cocos2d-iphone, box2d

我正在使用 Cocos2d iPhone 和 Box2D 来创建一个基本的物理引擎。

有时用户需要在一个小的 box2D 对象周围拖动。

在小物体上创建触摸关节有点偶然，游戏引擎将其视为对空白空间的点击，就像实际创建适当的触摸关节一样频繁。在实践中，这意味着用户不断地用手指在屏幕上捣碎，但徒劳地试图移动一个顽固的物体。我希望游戏能够轻松选择小物体，而不会出现这种“命中注定”的效果。

![这张（真棒）图片以卡通格式显示了我正在谈论的内容。 这也是对生命意义的松散过敏。](../Images/58d8a072af67e6ab8a9be60d7b3c9ea9.png)

我可以创建带有较大传感器的小物体，但这并不理想，因为超过一定尺寸（直径约 40 像素）的物体不需要这种额外的复杂层；小物体只是按比例缩小的大物体。

在移动小物体时，我可以使用哪些策略来让用户体验更好？

这是 ccTouchBegan 中的 AABB 代码：

```
b2Vec2 locationWorld = b2Vec2(touchLocation.x/PTM_RATIO, touchLocation.y/PTM_RATIO);

    b2AABB aabb;
    b2Vec2 delta = b2Vec2(1.0/PTM_RATIO, 1.0/PTM_RATIO); 
    //Changing the 1.0 here to a larger value doesn't make any noticeable difference.
    aabb.lowerBound = locationWorld - delta;
    aabb.upperBound = locationWorld + delta;
    SimpleQueryCallback callback(locationWorld);
    world->QueryAABB(&callback, aabb);

    if(callback.fixtureFound){
      //dragging code, updating sprite location etc.
    } 
```

SimpleQueryCallback 代码：

```
 class SimpleQueryCallback : public b2QueryCallback
    {
    public:
    b2Vec2 pointToTest;
    b2Fixture * fixtureFound;

    SimpleQueryCallback(const b2Vec2& point) {
        pointToTest = point;
        fixtureFound = NULL;
    }

    bool ReportFixture(b2Fixture* fixture) {
        b2Body* body = fixture->GetBody();
        if (body->GetType() == b2_dynamicBody) {
            if (fixture->TestPoint(pointToTest)) {
                fixtureFound = fixture;
                return false;
            }
        }        
        return true;
    }        
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:41:19.797

触摸的最小碰撞框怎么样？直径小于 40px 的对象使用 40px 直径，所有较大的对象使用其实际直径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:52:52.823

我最终做的 - 感谢 iforce2d，将 SimileQueryCallback 中的 ReportFixture 更改为：

```
bool ReportFixture(b2Fixture* fixture) {
    b2Body* body = fixture->GetBody();
    if (body->GetType() == b2_dynamicBody) {

        //if (fixture->TestPoint(pointToTest)) {
        fixtureFound = fixture;

        return true;
        //}
    }        
    return true;
} 
```

并将增量增加到 10.0/PTM_RATIO。

# spring - Spring bean没有被注入Jboss

> ID：11748646
> 
> 赞同：0
> 
> 时间：2012-07-31T20:39:50.003
> 
> 标签：spring

我正在使用 JbossRestEasy，因此我在 web.xml 中使用了 resteasy 上下文加载器侦听器来加载 spring bean

```
<listener>
   <listener-class>org.jboss.resteasy.plugins.spring.SpringContextLoaderListener
   </listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/classes/applicationContext.xml</param-value>
</context-param> 
```

在spring配置文件中

```
<bean id="myBean" class="com.sample.MyBean">
    <property name="name" value="XYZ"/>
</bean>

public class Mybean{

    private String name;

    public void setName(String name) {
        this.name = name;
    }

    public void printName(){
        System.out.println("Name is -->" +name);
    }
} 
```

如果我在我的测试用例中专门加载 bean，一切正常。但是如果我将它部署在 jboss 中，bean 就不会被注入。但是，我可以看到在服务器启动时正在加载 sprin 配置

```
12:43:40,626 INFO  [STDOUT] 12:43:40,626 INFO  [XmlBeanDefinitionReader] Loading XML bean definitions from ServletContext resource [/WEB-INF/classes/applicationContext.xml]
12:43:40,829 INFO  [STDOUT] 12:43:40,829 INFO  [DefaultListableBeanFactory] Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory 
```

它非常简单明了，但不知道我的配置有问题。我正在使用 Spring 的 3.0.5.RELEASE 版本。

# ios - 上传二进制文件后提交应用内购买

> ID：11748650
> 
> 赞同：1
> 
> 时间：2012-07-31T20:40:02.500
> 
> 标签：ios, download, in-app-purchase, app-store-connect, submission

我正在制作一款游戏，它有几个可作为应用内购买（非消耗品）的关卡。

我越来越接近提交时间，我真的有一个我需要达到的最后期限，所以我遇到了这个问题：

提交应用程序以供审核后，我可以将应用程序内购买提交到 iTunes Connect 吗？我知道我之前可以将它们添加到 iTunes Connect，但并非所有关卡都已准备好，因此如果他们尝试从我的服务器下载它们，他们实际上不会获得关卡并且可能会被拒绝。

有什么办法可以在提交后将它们添加到 iTunes Connect，当每个都完成后，内容将在服务器上实时显示？

本质上，应用程序将在关卡完成前一两个星期完成，我不想等到关卡完成后再提交到应用商店。

我在这里看到的一个大问题是我不想在没有所有应用内购买的情况下发布游戏。

我正在考虑制作一个通用的“令牌”，用户可以下载并兑换它以获得一个级别，但我宁愿远离它，以防我想为它们设置不同的价格。

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:49:10.910

对于那些偶然发现这一点的人，我想出了答案。只要在第一个捆绑包中提交了一个应用内购买，您就可以一路添加其他的，即使它正在等待审核。

# c++ - 引用 NULL

> ID：11748652
> 
> 赞同：1
> 
> 时间：2012-07-31T20:40:27.640
> 
> 标签：c++

> **可能重复：**
> [引用不能为 NULL 还是可以为 NULL？](https://stackoverflow.com/questions/2165078/a-reference-can-not-be-null-or-it-can-be-null)

下面的程序如何编译成功？

```
int main()
{
   int *ptr = NULL;
   int &ref = *ptr;
   return 0;
} 
```

[在ideone](http://ideone.com/a5jG7)上看到它。

我们可以定义对 NULL 的引用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:47:48.653

您给出的代码将编译，因为编译器不会在编译时检查指针的值。但是，取消引用 NULL 指针是未定义的行为。

这是我过去遇到过一次并刻在记忆中的问题。我的进一步想法可以在这里找到：[https ://stackoverflow.com/a/57656/5987](https://stackoverflow.com/a/57656/5987)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T20:47:56.370

取自[C++ 常见问题解答](http://www.parashift.com/c++-faq-lite/refs-not-null.html)：

> C++ 标准定义的 C++ 语言说它是非法的；这使它成为非法的。C++ 标准不需要对这个特定错误进行诊断，这意味着您的特定编译器没有义务注意到 p 为 NULL 或给出错误消息，但它仍然是非法的。C++ 语言也不需要编译器生成会在运行时崩溃的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:47:54.177

您取消引用空指针。您的编译器没有义务抱怨这种格式错误的程序。但是，这并不意味着在运行此程序时不会发生任何不好的事情。

从 C++03 8.3.2/4 开始：

> 注意：特别是，在定义良好的程序中不能存在空引用，因为创建此类引用的唯一方法是将其绑定到通过取消引用空指针获得的“对象”，这会导致未定义的行为。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-31T20:45:27.863

不，ptr 是一个有地址的指针。您将该指针设置为空。所以该指针的值为空。但是指针本身有一个地址。引用被设置为指针的地址 - 而不是它的值。

现在引用 NULL 本身 - 这将失败。例如：

```
int &ref = &NULL; // fail 
```

# android - 打开 gles 2 着色器性能

> ID：11748655
> 
> 赞同：1
> 
> 时间：2012-07-31T20:40:37.927
> 
> 标签：android, opengl-es

我在 android 中制作游戏，但颜色太亮了，我无法更改精灵，所以我决定实现一个着色器：

```
const char* fETCShader = "\
uniform mediump sampler2D sTexture 
uniform mediump sampler2D sTexture_alpha 
\
varying mediump vec4 vColor 
varying mediump vec2 vTexCoord 
uniform lowp mat4 cCorrection 
\
void main()\
{\
    lowp vec4 color = vec4(texture2D(sTexture, vTexCoord).rgb, texture2D(sTexture_alpha, vTexCoord).r) * vColor 
    gl_FragColor = cCorrection * color 
}" 
```

但 fps 急剧下降（如 20 ）

有谁知道是否存在更便宜的操作来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:44:49.330

而不是分别使用 3 和 1 通道的 2 个纹理，只需制作一个 4 通道 RGBA 纹理，这样您只需进行 1 次纹理提取。

手机上的片段着色器很快成为瓶颈。始终尽量减少片段着色器必须做的工作量。

您的着色器将如下所示：

```
const char* fETCShader = "\
uniform mediump sampler2D sTexture 
uniform mediump sampler2D sTexture_alpha 
\
varying mediump vec4 vColor 
varying mediump vec2 vTexCoord 
uniform lowp mat4 cCorrection 
\
void main()\
{\
    gl_FragColor = cCorrection * texture2D(sTexture, vTexCoord) * vColor; 
}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:46:05.907

你能不能只改变一次精灵，当它们第一次加载时，然后使用你以前使用的任何机制？如果做不到这一点，至少将两种纹理合二为一。

# java - MySQL、Java 和时区

> ID：11748658
> 
> 赞同：1
> 
> 时间：2012-07-31T20:40:55.180
> 
> 标签：java, mysql, sql, timezone

我`some_field`在 MySQL 数据库中有一个日期时间类型字段。我可以使用 查询数据`recordSet.getTimestamp("somefield")`，它返回一个`java.sql.Timestamp`对象。但是，返回的值存储 UTC 时间。现在如果知道时区是“美国/芝加哥”，我该如何转换时间。我必须照顾 DST。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:44:44.793

我认为您可能需要忽略 - 的亚毫秒精度，`Timestamp`这可能是合理的，就好像您要转换到特定时区一样，这表明它是一个“人类”日期。反正：

```
TimeZone zone = TimeZone.getTimeZone("America/Chicago");
Calendar calendar = Calendar.getInstance(zone); // Also locale?
calendar.setTime(timestamp); 
```

现在您可以向日历询问您想要的任何值 - 日期、一天中的小时等。

或者，您可能要考虑使用[Joda Time](http://joda-time.sf.net)，这是一个更好的日期/时间 API：

```
DateTimeZone zone = DateTimeZone.forID("America/Chicago");
DateTime dateTime = new DateTime(timestamp.getTime(), zone); 
```

# jquery - ZendX JQuery DatePicker viewHelper

> ID：11748660
> 
> 赞同：0
> 
> 时间：2012-07-31T20:41:08.450
> 
> 标签：jquery, zend-framework, datepicker, zend-form-element, zendx

我使用元素 DatePicker 构建了一个表单

```
$datefile= new ZendX_JQuery_Form_Element_DatePicker('df'); 
```

当我尝试使用在视图中呈现此字段时

```
<?= $this->form->df->renderViewHelper(); ?> 
```

就像我渲染正常 Zend_Form_Element_Text('xx')

```
 <?= $this->form->xx->renderViewHelper(); ?> 
```

我收到此错误：

```
An error occurred
Application error
Exception information:

Message: Decorator by name ViewHelper does not exist 
```

我不只是使用

```
echo $this->form 
```

我使用自己的 FORM 布局..

想不通...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:11:36.620

你可以用这个

```
<?= $this->form->df->renderUiWidgetElement(); ?> 
```

# c++ - 所有继承自同一个类的对象的映射，调用对象方法而不是父对象；C++

> ID：11748661
> 
> 赞同：2
> 
> 时间：2012-07-31T20:41:09.680
> 
> 标签：c++, inheritance, virtual-functions

我有一个`Component`类，它是父类，例如一个`Sprite`类。`Sprite`动画也有各种各样的孩子，但这不是这个问题的重点。我还有一个组件管理器，它拥有一个`map<string, Component>`. 我将创建的每个组件都存储在此地图中。目前有 12 种类型的组件，但会增加。

我的`Component`班级有`virtual void draw()`和`update()`功能，`Sprite`在这种情况下也是如此。但是，当我遍历组件映射时，它只调用`Component` `draw()`and `update()`。

我还没有真正找到真正对我有用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:51:13.857

您正在体验[*对象切片*](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)——由于您`map`仅*按值*`Component`存储对象，因此这些对象不包含子类提供的任何信息。一般来说，子类型多态只通过指针类型起作用，而不是值类型。因此，您需要通过指针存储实例，最好是：*`Component``std::map<std::string, std::unique_ptr<Component>>`*

 *```
components["example"] = std::unique_ptr<Component>(new Example()); 
```

如果您使用的是非 C++11 编译器，请使用`std::map<std::string, Component*>`：

```
components["example"] = new Example(); 
```

并确保在清理期间您`delete`的`Component`对象，例如，在您的组件管理器的析构函数中。C++03：

```
for (std::map<std::string, Component*>::const_iterator i = components.begin();
    i != components.end(); ++i)
    delete i->second; 
```

C++11：

```
for (const auto& i : components)
    delete i.second; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:52:31.917

您的问题很常见，称为*slicing*。地图不包含原始对象，它包含对象的*副本*。副本不是您尝试插入地图的类型，它是您为地图声明的基本类型。

解决这个问题的唯一方法是存储指针而不是对象本身。通常这是使用智能指针，例如`shared_ptr`自动清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:44:42.180

对我来说听起来像是切片，尝试在地图中存储指向组件的指针。*

# python - Python 中 isinstance() 的否定形式

> ID：11748671
> 
> 赞同：35
> 
> 时间：2012-07-31T20:41:49.883
> 
> 标签：python, negate, negation, isinstance

我将如何使用 Python 的 isinstance() 的否定形式？

通常否定会起作用

```
x != 1

if x not in y

if not a 
```

我只是没有看到 isinstance() 的示例，所以我想知道是否有正确的方法来使用 isinstance() 的否定。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-31T20:43:42.817

只需使用`not`. `isinstance`只返回 a `bool`，你可以`not`喜欢任何其他的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-31T20:43:37.153

这看起来很奇怪，但是：

```
if not isinstance(...):
   ... 
```

该`isinstance`函数返回一个布尔值。这意味着您可以否定它（或进行任何其他逻辑操作，如`or`or `and`）。

例子：

```
>>> a="str"
>>> isinstance(a, str)
True
>>> not isinstance(a, str)
False 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T20:43:44.263

只需使用`not`，例如，

```
if not isinstance(someVariable, str):
     .... 
```

[您只是在否定isinstance](http://docs.python.org/library/functions.html#isinstance)返回的“真值”（即布尔值） 。

# ms-access-2007 - MS-Access，使用输入掩码但字符有限

> ID：11748681
> 
> 赞同：1
> 
> 时间：2012-07-31T20:42:27.243
> 
> 标签：ms-access-2007

我已经查过了，并没有真正找到答案，但是可以说有一个只接受有限字符的输入掩码吗？

例子

~ ~ ~ ~

在上面的四个插槽中，我希望插槽 1 仅是 1 （我知道我可以设置）插槽 2 只接受 AS & 1-9 ，插槽 3 接受 ac 并且第四个插槽可以是任何东西。

所以像 1AC9 这样的答案是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:52:06.997

您可以将输入掩码与验证规则结合使用：

```
Like "1[A-S1-9][a-c]?" 
```

这不会在插槽 2 中强制使用大写字母，但输入掩码将：

```
 \1>A<L&;0 
```

# c++ - 伸缩构造器

> ID：11748682
> 
> 赞同：7
> 
> 时间：2012-07-31T20:42:31.687
> 
> 标签：c++, design-patterns

来自 Effective Java 2ed Item 2：

> 伸缩构造函数模式，在该模式中，您提供一个仅具有必需参数的构造函数，另一个具有单个可选参数，第三个具有两个可选参数，依此类推，最终形成具有所有可选参数的构造函数

我可以在 C++ 中做同样的事情吗？我尝试过这样的事情：

```
MyClass::MyClass(QWidget *parent)
{   
    MyClass(NULL, NULL, NULL, parent);
}

MyClass::MyClass(QString title, QWidget *parent) 
{

    MyClass(title, NULL, NULL, parent);
}

MyClass::MyClass(QString title, QString rightButton, QWidget *parent)
{

    MyClass(title, NULL, rightButton, parent);
}

MyClass::MyClass(QString titleLabel, QString leftButtonLabel, QString rightButtonLabel, QWidget *parent)
: QWidget(parent)
{
      // construct the object
} 
```

但它不起作用。有什么提示吗？

我真的是 C++ 领域的新手，所以.. 抱歉 newbee 问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T20:46:06.463

这在 c++11 中称为委托构造函数，其完成方式如下：

```
MyClass::MyClass(QWidget *parent)
    : MyClass(NULL, NULL, NULL, parent)
{   
} 
```

而您的版本会产生一个立即销毁的临时版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T20:45:28.590

最简单的方法是为构造函数参数提供默认值。

如果这不起作用，您通常会创建一个`Init`由每个构造函数调用的方法，这样代码就不会重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:45:11.137

```
MyClass::MyClass(QWidget *parent)
{   
    MyClass(NULL, NULL, NULL, parent);
} 
```

应该

```
MyClass::MyClass(QWidget *parent) :
    MyClass(NULL, NULL, NULL, parent)
{   
} 
```

等等

# android - 如何合并 GridView 的元素

> ID：11748683
> 
> 赞同：0
> 
> 时间：2012-07-31T20:42:31.847
> 
> 标签：android, performance, gridview, tablelayout

我正在实现一个活动，用户可以在 GridView 上看到不同大小和比例的图像。我不想修改这个图像的比例。

是否可以使用 GridViews 或者我最好的选择是构建一个 TableLayout 并将每个图像添加到一个 TableRow 中？

* * *

示例：如果它加载 3x4 图像，我希望它缩放以满足某些宽度和高度约束，并且它们合并必要的 GridView 元素以保持 3x4 比例。

我的目标是达到这样的目标：[https ://www.dropbox.com/s/6jmt2x5ly1k2p92/grid.png](https://www.dropbox.com/s/6jmt2x5ly1k2p92/grid.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:50:31.153

看来您可以作为自定义网格视图，我还没有测试过我自己的，而且评论太低了。因此，在此[链接](http://android-vogue.blogspot.ca/2011/06/custom-gridview-in-android-with.html)上，您会在底部找到使用 gridview 的图像，注意最后一项大于其余项，并且左中项也未按比例缩放。

# objective-c - 在所有先前的队列项目完成之前阻止块运行

> ID：11748686
> 
> 赞同：0
> 
> 时间：2012-07-31T20:42:40.883
> 
> 标签：objective-c, grand-central-dispatch

是否可以在当前队列的末尾添加一个块，并确保在队列中所有现有项目之后调用该块？

下面的代码似乎不起作用：

```
- (void)someTaskWillBeDoneOnThisThreadLater {
    // The current scope is a delegate method of a library I'm using, 
    // and unfortunately the required task gets executed after this delegate 
    // method is called.

    // wait for current queue to be done with everything, including the current scope
    dispatch_async(dispatch_get_current_queue(), ^{
        // After everything is done, then call the main thread
        dispatch_async(dispatch_get_main_queue(), ^{
            // Perform some task on main thread
        });
    });
} 
```

**编辑：**

下面的代码解决了这个问题，但我真的不想依赖 1 秒的延迟。我宁愿找到更好的解决方案。

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{

                    dispatch_async(dispatch_get_main_queue(), ^{
                        sleep(1);
                        // Perform something on main thread
                    });
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:08:16.430

我认为问题是您需要私人队列才能完成这项工作。这段代码：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{
    NSLog(@"FIRST");
    dispatch_async(dispatch_get_current_queue(), ^{
        NSLog(@"LAST");
        dispatch_async(dispatch_get_main_queue(), ^{
            // ...
        });
    });
    sleep(2);
    NSLog(@"SECOND");           
}); 
```

给出：

```
2012-07-31 22:57:20.005 Objective-C App[22526:1703] FIRST
2012-07-31 22:57:20.009 Objective-C App[22526:2003] LAST
2012-07-31 22:57:22.010 Objective-C App[22526:1703] SECOND 
```

这不是你想要的。甚至`dispatch_barrier_async`帮不上忙。但是当您使用私有队列时：

```
dispatch_queue_t queue = dispatch_queue_create("test", 0);
dispatch_async(queue, ^{
    NSLog(@"FIRST");
    dispatch_async(queue, ^{
        NSLog(@"LAST");
        dispatch_async(dispatch_get_main_queue(), ^{
            // ...
        });
    });
    sleep(2);
    NSLog(@"SECOND");           
}); 
```

会给你你想要的结果：

```
2012-07-31 23:04:41.882 Objective-C App[22564:1703] FIRST
2012-07-31 23:04:43.887 Objective-C App[22564:1703] SECOND
2012-07-31 23:04:43.889 Objective-C App[22564:1703] LAST 
```

如您所见，最后将打印“LAST”，它将等待 2 秒，直到队列中的块完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:59:59.177

从`dispatch_barrier_async`文档中：

> ...当屏障块到达私有并发队列的前面时，它不会立即执行。相反，队列一直等到其当前正在执行的块完成执行。此时，屏障块自行执行。在屏障块完成之前，在屏障块之后提交的任何块都不会执行。

因此，在您的代码中替换`dispatch_async`by`dispatch_barrier_async`应该可以满足您的需求。

**编辑：**

这仅适用于私有（并发）队列，另请参阅@Johnnywho 的答案和以下评论。

我忽略了文档的那一部分，抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:01:11.590

虽然不清楚实际问题是否如您所描述的那样，但 GCD 中有一个工具，从 OS X 10.7 或 iOS 4.3 开始可以实现这一点：[`dispatch_barrier_async()`](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW57).

使用此函数将 Block 提交到队列会导致该 Block 等待执行，直到所有先前的 Block 都完成；同样，所有后续块等待屏障完成。

请注意，这仅与*并发*队列相关，因为串行队列的本质是在所有先前提交的块都完成之前，它不会开始执行任何块。

# google-app-engine - Google App Engine Datastore 中最有效的一对多关系？

> ID：11748695
> 
> 赞同：16
> 
> 时间：2012-07-31T20:43:25.970
> 
> 标签：google-app-engine, nosql, google-cloud-datastore, one-to-many, app-engine-ndb

对不起，如果这个问题太简单了；我才上九年级。

我正在尝试了解 NoSQL 数据库设计。我想设计一个谷歌数据存储模型，最大限度地减少读/写次数。

这是一个玩具示例，用于一对多关系中的博客文章和评论。哪个更有效 - 将所有评论存储在 StructuredProperty 中或在 Comment 模型中使用 KeyProperty？

同样，目标是尽量减少对数据存储的读/写次数。您可以做出以下假设：

*   评论将不会独立于其各自的博客文章而被检索。（我怀疑这使得 StructuredProperty 最可取。）
*   评论需要按日期、评级、作者等进行排序。（无法索引数据存储中的子属性，所以这可能会影响性能？）
*   博客文章和评论都可以在创建后进行编辑（甚至删除）。

使用结构化属性：

```
from google.appengine.ext import ndb

class Comment(ndb.Model):
    various properties...

class BlogPost(ndb.Model):
    comments = ndb.StructuredProperty(Comment, repeated=True)
    various other properties... 
```

使用 KeyProperty：

```
from google.appengine.ext import ndb

class BlogPost(ndb.Model):
    various properties...

class Comment(ndb.Model):
    blogPost = ndb.KeyProperty(kind=BlogPost)
    various other properties... 
```

随意提出与有效表示一对多关系有关的任何其他注意事项，以最大限度地减少对数据存储的读/写次数。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T21:53:37.003

我可能是错的，但据我了解，StructuredProperty 只是实体内的一个属性，但具有子属性。

这意味着阅读 BlogPost 及其所有评论只需阅读一次。因此，当您渲染页面时，您只需要一个读取整个页面的操作。

写入也会更便宜。您需要一个读取操作来获取 BlogPost，只要您不更新任何索引属性，它就只是一个写入操作。

从数据存储中读取实体后，您可以自行处理评论排序。

您必须将评论更新/编辑与事务同步，以确保一条评论不会覆盖另一条评论，因为它们都在修改同一个实体。如果每个人同时评论和编辑同一篇博文，您可能会遇到无法解决的问题。

但是，在优化成本时，您将遇到最大实体大小为 1MB 的墙。这将限制您可以在每篇博文中存储的评论数量。

使用 KeyProperty 会贵很多。

您需要阅读一次才能获得博客文章，外加 1 次查询以及每条评论的 1 次小型阅读操作。

每条评论都是一个新实体，因此至少有 4 个写操作。您可能希望索引排序顺序，因此最终会花费更多的写入操作。

从好的方面来说，每篇博文都有无限的评论，您不必担心同步新评论。您可能需要担心编辑评论的同步，但如果您将编辑限制为创建者，那应该不是问题。您也不必自己进行排序。

这是成本与功​​能的权衡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-24T10:45:48.827

关于什么：

```
from google.appengine.ext import ndb

class Comment(ndb.Model):
    various properties...

class BlogPost(ndb.Model):
    comments = ndb.KeyProperty(Comment, repeated=True)
    various other properties... 
```

这样，您可以在每篇博文中存储多达 5000 条评论（重复属性的最大数量），而与每篇博文的大小无关。您不需要查询来获取博客以获取评论，您只需执行`ndb.get_multi(blog_post.comments)`. 而对于这个操作，可以尝试依赖ndb的memcache。当然，这是否是一个好的假设取决于您的用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-01T21:38:22.453

使用重复的 StructuredProperty 时请注意此警告：

> 如果您有超过 100-1000 个值，请不要使用重复的属性。（1000 可能已经在推动它了。）它们不是为这种用途而设计的。

请参阅 Guido 在[GAE ndb 设计、性能和重复属性使用中](https://stackoverflow.com/a/15418435/2943925)的回答。

因此，虽然您可能无法使用 StructuredProperty 达到 1 MB 实体限制，但您可以轻松达到建议的最大值 100-1000。

# sql - SQL 查询：如何列出同一行上的连接值

> ID：11748697
> 
> 赞同：2
> 
> 时间：2012-07-31T20:43:31.407
> 
> 标签：sql

我有一个工作列表表和一个相关表，其中包含工作列表 ID 和“字段标题”->“字段值”格式的每个字段值。

因此，为了获得我的工作清单，我已经在我的 SQL 查询中加入了表，但正因为如此，我在多行上得到了结果。让我来说明一下。

查询类似于：

```
SELECT list.id, list.activation_date, list_field.value 
  FROM listings AS list
 INNER JOIN listings_fields AS list_field ON list.id = list_field.id
 WHERE list.activation_date > SOME VALUE
   AND list_field.field_id IN ('Title', 'Category')
 ORDER BY list.activation_date DESC, list_field.field_id DESC 
```

结果如下所示：

```
51325   2012-07-31  Job Title 1
51325   2012-07-31  Category 1, Category 2
51324   2012-07-31  Job Title 2
51324   2012-07-31  Category 3
51323   2012-07-31  Job Title 3
51323   2012-07-31  Category 1, Category 3 
```

我已经得到了我需要的所有数据，它的排序与标题第一和类别第二一致，但我想不出如何在一行中获得所有结果。这一定是一个众所周知的技巧的通病，很抱歉我还不知道。

还在学习。如果有人可以提供帮助，我将不胜感激。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:06:36.880

就像是

```
SELECT list.id, list.activation_date, list_fieldJ.value,list_fieldC.value
 FROM listings AS list
 INNER JOIN listings_fields AS list_fieldJ ON list.id = list_fieldJ.id 
    and List_fieldj = 'Title'
 INNER JOIN listings_fields AS list_fieldC ON list.id = list_fieldC.id 
    and List_fieldC = 'Category'

 WHERE list.activation_date > SOME VALUE
 ORDER BY list.activation_date DESC 
```

基本上加入一次标题，然后再加入类别。不用说，如果您要退出的值类型过多，那将是一件痛苦的事。以上假设工作将始终具有标题和类别。可选的，你需要一个外部连接。

# asp.net-mvc-3 - 使用默认项目模板的基本 MVC 路由查询

> ID：11748699
> 
> 赞同：0
> 
> 时间：2012-07-31T20:43:35.807
> 
> 标签：asp.net-mvc-3

我正在使用基本项目模板以及我拥有的几个示例来学习 MVC 3。事情进展顺利，但现在我正在尝试实现我的控制器，但遇到了几个问题。

到目前为止，我已经修改了 _Layout.cshtml 文件以定义一个带有指定路由的新链接：

```
 <header>
        <div id="title">
            <h1>My MVC Application</h1>
        </div>
        <div id="logindisplay">
            @Html.Partial("_LogOnPartial")
        </div>
        <nav>
            <ul id="menu">
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                <li>@Html.RouteLink("Contracts", "Contract")</li>
                <li>@Html.ActionLink("About", "About", "Home")</li>
            </ul>
        </nav>
    </header> 
```

我的 global.asax.cs 文件如下：

```
 routes.MapRoute(
            "Contract",
            "Contract",
            new { controller = "Contract", action = "List", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

这工作正常，因为它从我的合同控制器返回预期的操作视图。

但是我想修改它以接受 id 到 List 操作中。我知道我需要更改 List 方法以接受参数，那里没有问题，但是路由问题以及如何将此参数从 _Layout.cshtml 文件中的 RouteLink 传递到 List 方法。我已经尝试了一些东西，但这一点真的让我很难过。

*我打算从我通过 AccountController 登录的用户传递一个 id，但是我会问另一个问题以保持这个更简洁。*

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:30:11.877

您实际上并不需要您的 Contract 路由，因为您的 Default 路由将适用于与模式 controller/action/（此处为可选 id 参数）对应的任何控制器和操作。看到模板中的注释实际上说`Parameter defaults`. 这意味着，如果没有传入 Controller、Action 或 id，它将默认为这些值。这就是为什么您可以只浏览到网站的根目录，而 Home 控制器的 Index 操作是默认调用。

使用路由时，您需要记住路由参数名称需要与您的操作中的参数名称匹配。例如，您的默认路由当前允许您这样做：

```
[HttpGet]
public ActionResult MyAction(int id) {

} 
```

但是，如果您将默认路由更改为：

```
routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{myIDParameter}", // URL with parameters
        new { controller = "Home", action = "Index", myIDParameter = UrlParameter.Optional } // Parameter defaults
    ); 
```

..您的索引操作将不再正确绑定整数参数..您必须将操作更改为：

```
[HttpGet]
public ActionResult MyAction(int myIDParameter) {

} 
```

在回答您的问题时，使用 ActionLink 可能更有意义，就像您已经拥有的其他两个一样：

```
@Html.ActionLink("Contracts", "Contract", "ActionMethodHere", new { id = UserIdHere }, null) 
```

不过，这假设您删除了您的 Contract 路由并仅使用默认路由。

# javascript - JavaScript 将参数传递给按钮 onclick 函数

> ID：11748704
> 
> 赞同：0
> 
> 时间：2012-07-31T20:43:45.720
> 
> 标签：javascript, html, function, button

我正在尝试通过循环创建一堆按钮，并将循环迭代器用作每个按钮 onclick 函数的参数。

我的代码：

```
var testFnc = function(i) { alert("Arg: " + i); }

mainDiv.append(create_button(name, "buttonCSS", testFnc(i))); 
```

然而，这些功能会在页面加载和按钮放置时自动调用（即我立即看到警报）。

我确信这有一些共同的设计模式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:48:10.137

一种方法是，对于每个按钮，调用一个“[自执行](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)”函数来创建一个单独的函数。

```
mainDiv.append(create_button(name, "buttonCSS", (function(i) {

    // For the function below, i comes from
    // this function's scope, not the outside scope.

    return function() {
        testFnc(i);
    };

})(i) )); 
```

这将允许您更改`i`函数外部的值并使现有按钮不受影响。

（如果您要创建很多按钮（可能有数千个），最好更改`create_button`函数以将属性添加到按钮元素本身并让您的函数进行检查。或者如果您的代码不需要在 Internet Explorer 中工作8 或以下，您可以使用[`bind()`函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)代替上面的代码。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:48:32.443

注意：有关此问题的非常详细的解释，请参阅我[之前对相同问题的回答](https://stackoverflow.com/questions/6129145/pass-extra-parameter-to-jquery-getjson-success-callback-function/6129271#6129271)。

1.  通过使用括号，您正在*调用*testFnc 并将其返回值传递给`create_button`函数，因此它当然会立即发出警报。相反，您需要传入一个实际的函数对象而不调用它。通过包装`testFnc`一个匿名函数 ala来做到这一点`function() { testFunc(i); }`。你能看到 this 如何返回一个稍后而不是立即运行的函数吗？
2.  这本身仍然不起作用，因为`i`参与了围绕它的*闭包* ，因此当点击事件运行时，它使用i 的*最新值*（它在循环结束时的值），而不是在绑定的时间。为了解决这个问题，围绕一个不同的变量创建一个新的闭包——只定位在你的回调的直接范围内，而不是更高的——这将被赋予*value*`i`以便 click 事件具有绑定时的值，而不是绑定函数的执行时间。

    以下是如何执行此操作：

    ```
    for (i = 0; i < len; i++) {
       mainDiv.append(
          create_button(name, "buttonCSS", (function(val) {
             return function() {
                testFnc(val);
             };
          }(i)))
       );
    } 
    ```

    我敢肯定这看起来有点令人困惑，但关键是将被调用的函数（返回的函数）包装在另一个函数中会创建一个新的范围，其中包含一个`val`未在任何外部函数中使用的变量。这使得闭包仅覆盖直接值，将其与 分离`i`，这就是你想要的。这里有更深入的[解释](https://stackoverflow.com/questions/6129145/pass-extra-parameter-to-jquery-getjson-success-callback-function/6129271#6129271)。

请注意，此页面上的另一个答案会重复使用`i`，这可能会造成混淆。`i`这会起作用，但是在被引用的内部函数内部并不清楚！我认为通过使用不同的变量名来避免任何混淆是更好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:50:03.120

你在使用 jQuery 吗？您可以引用按钮的类

```
<button class='my-custom-class' data-index='0'>This button</button> 
```

并在`document.ready`：

```
$(document).ready(function () {   
  buildButtons();

  $('.my-custom-class').on('click', function () { 
    var index = $(this).attr('data-index');
    alert('Arg: ' + index);
  });
}); 
```

我建议使用自定义`data-*`属性，因为您可以使用`attr`jQuery 中的属性来访问自定义属性。这是您可以实现它的一种方式。

# ruby - 具有复合唯一键的 Ruby 嵌套哈希

> ID：11748705
> 
> 赞同：0
> 
> 时间：2012-07-31T20:43:48.153
> 
> 标签：ruby, csv, hash, nested, composite-key

给定一个逗号分隔的 CSV 文件，格式如下：

```
Day,User,Requests,Page Views,Browse Time,Total Bytes,Bytes Received,Bytes Sent
"Jul 25, 2012","abc123",3,0,0,13855,3287,10568
"Jul 25, 2012","abc230",1,0,0,1192,331,861
"Jul 25, 2012",,7,0,0,10990,2288,8702
"Jul 24, 2012","123456",3,0,0,3530,770,2760
"Jul 24, 2012","abc123",19,1,30,85879,67791,18088 
```

我想将整个数据集（30 天内 1000 个用户 = 30,000 条记录）放入一个散列中，这样键 1 可能是重复键，键 2 可能是重复键，但键 1 和 2 将是唯一的。

使用上面第 1 行的示例：

> report_hash = "2012 年 7 月 25 日" => "abc123" => {"PageRequest" => 3, "PageViews" => 0, "BrowseTime" => 0, "TotalBytes" => 13855, "BytesReceived" => 3287 , "字节发送" => 10568}

```
def hashing(file)
  #read the CSV file into an Array
  report_arr = CSV.read(file)
  #drop the header row
  report_arr.drop(1)
  #Create an empty hash to save the data to
  report_hash = {}
  #for each row in the array,
  #if the first element in the array is not a key in the hash, make one
  report_arr.each{|row|
    if report_hash[row[0]].nil?
      report_hash[row[0]] = Hash.new
    #If the key exists, does the 2nd key exist?  if not, make one
    elsif report_hash[row[0]][row[1]].nil?
      report_hash[row[0]][row[1]] = Hash.new
    end
    #throw all the other data into the 2-key hash
    report_hash[row[0]][row[1]] = {"PageRequest" => row[2].to_i, "PageViews" => row[3].to_i, "BrowseTime" => row[4].to_i, "TotalBytes" => row[5].to_i, "BytesReceived" => row[6].to_i, "BytesSent" => row[7].to_i}
  }
  return report_hash
end 
```

我花了几个小时学习散列和相关内容以达到这一点，但感觉有一种更有效的方法可以做到这一点。关于创建嵌套哈希的正确/更有效方法的任何建议，其中前两个键是数组的前两个元素，以便它们创建“复合”唯一键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:52:54.840

您可以将数组`[day, user]`用作哈希键。

```
report_hash = {
  ["Jul 25, 2012","abc123"] =>
    {
      "PageRequest" => 3,
      "PageViews" => 0,
      "BrowseTime" => 0,
      "TotalBytes" => 13855,
      "BytesReceived" => 3287,
      "BytesSent" => 10568
    }
} 
```

您只需确保日期和用户始终显示相同。如果您的日期（例如）有时以不同的格式出现，您必须在使用它来读取或写入哈希之前对其进行规范化。

类似的方法是将 day + user 转换为字符串，在它们之间使用一些分隔符。但是您必须更加小心，分隔符不会出现在当天或用户中。

编辑：

还要确保不要修改散列键。使用数组作为键使得这很容易犯错误。如果您真的想要，您可以使用 修改副本`dup`，如下所示：

```
new_key = report_hash.keys.first.dup
new_key[1] = 'another_user' 
```

# xml - 根据 If 语句在字段中插入一个字符

> ID：11748706
> 
> 赞同：1
> 
> 时间：2012-07-31T20:43:48.190
> 
> 标签：xml, xslt

我对 XSLT 不是很熟悉。

基本上，我的原始 XML 中有一组项目，如下所示：

**样本输入文件**

```
<Items>
    <Items>Item1</Items>
    <Items>item2</Items>
    <Items>Item3</Items>
</Items> 
```

**来自样本输入的预期输出文档**

```
<Items>
    <Items>
        <Item1>Y</Item1>Item1</Items>
    <Items>
        <Item1 />item2</Items>
    <Items>
        <Item1 />Item3</Items>
</Items> 
```

如何使用 XSLT 检查每一个`Items`并在修改后的 XML 的字段中插入一个`Y`符号，或者如果找不到此类项目，则将该字段留空？

我现在有类似的东西，但我不确定这是否是正确的做法

```
 <xsl:if test="Items='Item1'">
        <Item1>Y</Item1>
      </xsl:if>
      <xsl:if test="Items!='Item1'">
        <Item1></Item1>
      </xsl:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:07:17.663

**您不需要使用任何显式的条件 XSLT 指令——模板和模板模式是您的朋友**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Items[not(*)]/text()[. = 'Item1']">Y</xsl:template>

 <xsl:template match="Items[not(*)]/text()" priority="0"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Items>
    <Items>Item1</Items>
    <Items>item2</Items>
    <Items>Item3</Items>
</Items> 
```

**产生了想要的正确结果**：

```
<Items>
   <Items>Y</Items>
   <Items/>
   <Items/>
</Items> 
```

**说明**：

1.  **[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制选择执行的每个节点。

2.  有两个覆盖模板——一个用于 的文本节点子节点`Items`，其值为“Item1”（“替换”），第二个——用于任何其他文本节点子节点`Items`——“删除”它，因为它的主体为空.

3.  “删除”模板将其`priority`属性设置为低（为零），以便明确解决与“替换”模板的任何优先级冲突。

# c# - 从 .NET MVC 打印 PDF

> ID：11748722
> 
> 赞同：1
> 
> 时间：2012-07-31T20:44:46.820
> 
> 标签：c#, asp.net-mvc, pdf, printing

我有一个由我的页面生成的 5-80 页 PDF。我有一个字节数组中的这个 PDF，如果需要，我可以临时保存到文件中。

我宁愿不让用户下载然后打印 PDF。有没有一种相当简单的方法可以让用户打印这个文件？最好的情况是我可以以某种方式直接从`byte[]`or打印`MemoryStream`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:48:53.277

你应该简单地`return File(stream, fileName, "application/pdf")`从一个 MVC 动作。

浏览器将使用适当的插件呈现 PDF，并且（通常）会提供一个打印按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:59:11.010

您可以使用该[`Controller.File`](http://msdn.microsoft.com/en-us/library/dd470835.aspx)方法返回文件

```
public ActionResult GetFile()
{    
   byte[] bytes = GetYourByteArrayForPDF();
   return File(bytes, "application/pdf","somefriendlyname.pdf");    
} 
```

假设`GetYourByteArrayForPDF`您的方法返回 PDF 文件的字节数组。

这会将文件内容直接提供给用户可以打印/保存的浏览器。

从 Web 应用程序中，您不能简单地调用打印命令并在客户端计算机中打印某些内容。除非您有一些 activex 控件（仅 IE 支持）/browser 插件，否则用户必须手动执行此操作。

# php - 如何在 PHP 中使用 Salesforce 出站消息？

> ID：11748730
> 
> 赞同：-1
> 
> 时间：2012-07-31T20:45:11.030
> 
> 标签：php, soap, salesforce

当我在 Salesforce 中更改字段值时，我需要能够将出站消息发送到我的 PHP / MySQL 站点，以便我可以解析 xml 并在我的数据库中进行一些更改。

如何在 PHP 中收听该出站消息？我必须设置什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T09:25:22.463

首先，您需要一个 PHP SOAP 侦听器，我有一个[捕获 Salesforce 出站消息和一个 PHP SOAP 侦听器，](http://amigotechnotes.wordpress.com/2013/11/17/capture-salesforce-outbound-message-with-a-php-soap-listener/)非常详细地解释了它。

然后，您使用[SimpleXMLElement::children](http://php.net/manual/en/simplexmlelement.children.php)解析带有命名空间的消息，这在我的[Parse XML with namespace by SimpleXML in PHP 中进行了](http://amigotechnotes.wordpress.com/2013/11/16/parse-xml-with-namespace-by-simplexml-in-php/)解释。

希望它有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:19:50.047

当您在 Salesforce 中创建出站消息时，它将提供生成 wsdl 的链接。该 wsdl 将代表您的 PHP 服务需要提供的合同。您可以使用许多 wsdl2Php 工具来生成客户端代码。

从那里您只需要向您的站点公开一个公共端点并更新出站消息端点以指向您的服务。

# sql-update - 更新sql语句不起作用

> ID：11748739
> 
> 赞同：0
> 
> 时间：2012-07-31T20:45:44.790
> 
> 标签：sql-update

我有这个代码

earthid 是主键，这是我用来确保更新确切行的方法。

```
int row=jTable1.getSelectedRow();
String sql="UPDATE TB_EARTHORIENTATIONPARAMETER SET  year="+year1+",        month="+month1+",  day="+day1+",  mjd="+mjd1+",ut1utcdelta="+Ut1utc+" WHERE (earthid="+row1+")"; 
```

然而，当我执行这个语句时，什么也没有发生......数据库没有用新值更新我无法弄清楚我的 sql 更新语句有什么问题

好的，这是我的更新按钮后面的更多代码。

```
jTable1.getModel().addTableModelListener(jTable1);
    DefaultTableModel model=(DefaultTableModel)jTable1.getModel();

    int row=jTable1.getSelectedRow();
    int row1=row+1;
    int column=0;
    String years="";
    String months="";
    String days="";
    String mjds="";
    String ut1utc="";
    int year1;
    int month1;
    int day1;
    double mjd1;
           double Ut1utc;

    while(column!=7)
    {

        Object year=model.getValueAt(row, column);
        years=year.toString();
        year1=Integer.parseInt(years);

        column++;
        Object Month=model.getValueAt(row, column);
        months=Month.toString();
        month1=Integer.parseInt(months);
        column++;
        Object Day=model.getValueAt(row, column);
        days=Day.toString();
        day1=Integer.parseInt(days);
        column++;
        Object MJD=model.getValueAt(row, column);
        mjds=MJD.toString();
        mjd1=Double.parseDouble(mjds);
        column++;
        Object UT1UTCDELTA=model.getValueAt(row,column);
        ut1utc=UT1UTCDELTA.toString();
        Ut1utc=Double.parseDouble(ut1utc);
        column++;

    try
    {
     DBConnectionclass cm=new DBConnectionclass(); 
     String sql="UPDATE TB_EARTHORIENTATIONPARAMETER SET  year="+year1+",  month="+month1+",  day="+day1+",  mjd="+mjd1+",ut1utcdelta="+Ut1utc+" WHERE (earthorientationparameterid="+row1+")";
     Connection con1=null;
     Statement stmt=null;
     con1=cm.getConnection();    //get a connection object
     stmt=con1.createStatement();
     stmt.executeUpdate(sql);

     //create an instance of the database connection class to create a connection object to beused to conect to database

     //create a statement to process sql query

    }
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(this, e.getMessage());
    }
    // TOD

    } 
```

它不是编写代码的最佳方式，但它与 mysql 一起工作得很好。我需要选择更新吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:49:36.447

您是否尝试过在 SQL 查询中使用单引号？.我已经编辑了你的查询试一试

```
String sql="UPDATE TB_EARTHORIENTATIONPARAMETER SET  year='+year1+',        month='+month1+',  day='+day1+',  mjd='+mjd1+',ut1utcdelta='+Ut1utc+' WHERE (earthid='+row1+')"; 
```

你也有任何例外吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:50:17.007

尝试在你的价值观周围加上单引号。

```
String sql="UPDATE TB_EARTHORIENTATIONPARAMETER SET  year='"+year1+"', month='"+month1+"', day='"+day1+"', mjd='"+mjd1+"',ut1utcdelta='"+Ut1utc+"' WHERE (earthid='"+row1+"')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:03:47.067

嘿伙计们，我解决了这个问题。这完全是我的错。当我从数据库中选择并返回一个记录集时，我没有明确指定它将返回的顺序。因此我的记录集出现故障，因此它正在执行更新，但我没有按顺序进行，因为我的更新显式更新了通过地球方向参数sid。它与更新无关，而是与我的网格显示数据的顺序有关，这就是我看不到更新的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:51:32.137

字符串中的日期参数应该有单引号。我假设 earthid 是一个 int 而不是 GUID，或者也需要单引号。您是否尝试过参数化查询？您可以发布更大的代码示例吗？

# java - EJB 中的嵌套事务行为

> ID：11748749
> 
> 赞同：2
> 
> 时间：2012-07-31T20:46:22.550
> 
> 标签：java, transactions, ejb, weblogic, message-driven-bean

今天我在 EJB 中发现了一些意想不到的行为。我有默认事务属性 ( `REQUIRED`) 的 MDB 和事务属性设置为 的 SLSB `REQUIRES_NEW`。我的 MDB 调用 SLSB 并捕获 SLSB 可以抛出的任何异常。当 SLSB 中发生了一些非常糟糕的事情并且`RuntimeException`抛出了一些子类时。然后为 SLSB 创建的新事务被标记为回滚。从我的角度来看，这是正确的行为。然后 MDB 捕获此异常并执行一些操作（例如，将消息写入日志），而无需重新抛出。但是 MDB 事务不知何故也被标记为回滚，这对我来说似乎很奇怪。这种行为正确吗？

更准确地说，我可以编写一些类似于实际代码的代码，它们会产生这种行为：

```
@MessageDriven
public class A{

@EJB
private B b;

@Overried
public void onMessage(Message msg){
...
try{
b.process(msg);
} catch (Throwable t){
logger.error("Something gone wrong",t);
}
...
} 
```

SLSB 看起来像这样：

```
@EJB
@Stateless
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public class B{
public void process(Message msg){
...
}
} 
```

有问题的任务流程如下所示：

1.  消息驱动 bean`onMessage(Message)`被调用。
2.  消息驱动 bean 成功执行一些动作然后调用`B.process(Message)`方法。
3.  `B`发生了一些不好的事情`RuntimeException`并被抛出。
4.  `RuntimeException``EJBException`被消息驱动bean包裹并成功捕获。
5.  消息驱动的 bean`onMessage(Message)`方法已完全执行，***但它的事务被标记为回滚***。

任何人都可以解释这种行为吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:15:51.147

正如@gkuzmin 所说。

EJB 3.1 规范中第 13.3.7.1 节的相关部分：

如果 bean 类具有超类，则适用以下附加规则。

*   在超类 S 上指定的事务属性适用于 S 定义的业务方法。如果在 S 上未指定类级事务属性，则等效于在 S 上指定 TransactionAttribute(REQUIRED)。

*   可以在由类 S 定义的业务方法 M 上指定事务属性，以便为方法 M 覆盖在类 S 上显式或隐式指定的事务属性值。

*   **如果类 S 的方法 M 覆盖由 S 的超类定义的业务方法，则 M 的事务属性由应用于类 S**的上述规则确定。

注意粗体部分。正如您所料，它不是 S 超类的业务方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:17:55.770

找到了解决此问题的方法。实际上`TransactionAttribute`注释被放置在`B`bean的抽象超类上并且被忽略了。WebLogic 服务器中的 EJB 运行时环境忽略来自`B`超类的注释并使用默认`REQUIRED`属性。如果您遇到同样的问题，我建议您阅读 EJB 3.1 规范中的第**13.3.7.1**节（您可以[在此处](http://download.oracle.com/otndocs/jcp/ejb-3.1-fr-eval-oth-JSpec/)下载）。

# android - Android Gallery View，未聚焦项目中的按钮进入选定状态

> ID：11748756
> 
> 赞同：1
> 
> 时间：2012-07-31T20:47:19.527
> 
> 标签：android, android-gallery, android-gui

我有一个画廊视图，其中我使用自定义适配器插入了 LinearLayouts。这工作正常。但是当我在画廊中的项目之间滚动（在画廊中滑动）时，未聚焦项目上的按钮处于单击状态。对焦时它会恢复正常状态。

请指导我如何解决它。谢谢！

# javascript - 如何在flowplayer中获得时间？

> ID：11748757
> 
> 赞同：1
> 
> 时间：2012-07-31T20:47:44.170
> 
> 标签：javascript, jquery, flowplayer

我想知道如何在flowplayer中获取当前播放时间？

这行代码即使在播放过程中也会返回异常： playertime = $f().getTime();

我包括调用 getTime() 的 Javascript

**Javascript：享受.js**

```
setInterval(function() {
    var playertime = 0;
    var duration = 0;
    try {
        duration = $f().getClip().duration;
        // alert(duration); /* This works fine*/
        playertime = $f().getTime(); /* This throws an exception outside try-catch. Uncaught exception: Error in Actionscript. Use a try/catch block to find error.*/
        if (isNaN(playertime)) {
            // no clip running
            playertime = 0;
        }
    } catch (err) {
        playertime = 0;
    }
    $.ajax({
        url : "/enjoy_ajax/",
        type : "POST",
        data : {
            code : $('#code').val(),
            playback : playertime
        }
    }).done(function() {
        $(this).addClass("done");
    });
}, 1000 * 60 * 0.05); // where X is your every X minutes 
```

这是包含**enjoy.js的 HTML**

**HTML**

```
{% extends "movies/template.html" %}
{% load aws-tags %}
{% block title %}{{ movie.title }}{% endblock %}
{% block js %}
<script src="https://s3.amazonaws.com/MY_AMAZON_S3_BUCKET/flowplayer/flowplayer-3.2.10.min.js"></script>
<script src="https://s3.amazonaws.com/MY_AMAZON_S3_BUCKET/flowplayer/flowplayer.ipad-3.2.9.min.js"></script>
{% endblock %}
{% block content %}

<div id="title">
    Enjoy The Show!
</div>
<div id="movie_player">

    <a id="player" href="{{signed_url}}"> </a>

    <script type="text/javascript">
        $(document).ready(function() {
            if(navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i)) {

                $f("player", {
                    src : "https://s3.amazonaws.com/MY_AMAZON_S3_BUCKET/flowplayer/flowplayer.commercial-3.2.11.swf",
                    wmode : 'opaque'
                }, {
                    key : '{{player_key}}',
                    clip : {
                        // preserve aspect ratios
                        scaling : 'fit'
                    }
                }).ipad({
                    simulateiDevice : true,
                    controls : true
                });
            } else {
                $f("player", {
                    src : "https://s3.amazonaws.com/MY_AMAZON_S3_BUCKET/flowplayer/flowplayer.commercial-3.2.11.swf",
                    wmode : 'opaque'
                }, {
                    key : '{{player_key}}',
                    clip : {
                        provider : 'rtmp',
                        autoPlay : true,
                        urlResolvers : 'brselect',
                        // preserve aspect ratios
                        scaling : 'fit',
                        bitrates : [

                        // use the 800 kbps item by default, the SD item, marked with sd: true
                        {
                            url : "mp4:{{movie.mp4_file_lo|aws_sign_cf_stream}}",
                            bitrate : 320,
                            sd : true,
                            isDefault : false
                        },

                        // this is the HD item, marked with hd: true
                        {
                            url : "mp4:{{movie.mp4_file_hi|aws_sign_cf_stream}}",
                            bitrate : 1066,
                            hd : true,
                            isDefault : true
                        }]
                    },
                    plugins : {
                        brselect : {
                            url : "https://s3.amazonaws.com/MY_AMAZON_S3_BUCKET/flowplayer/flowplayer.bitrateselect-3.2.10.swf",

                            // comment this out in production
                            onStreamSwitch : function(newItem) {
                                $f().getPlugin('content').setHtml("Switched to: " + newItem.streamName);
                            },
                            hdButton : {
                                // custom labels for the HD splash
                                splash : false,
                                place : 'controls'
                            }
                        },
                        rtmp : {
                            url : 'https://s3.amazonaws.com/MY_AMAZON_S3_BUCKET/flowplayer/flowplayer.rtmp-3.2.10.swf',
                            netConnectionUrl : 'rtmpe://{{cloudfront_domain}}/cfx/st'
                        }
                    }
                }).ipad();
            }
        });

    </script>

</div>
<hr id="green_hr" />
<div id="movie_poster">
    <img src="{{ movie.poster_url }}" alt ="" />
</div>
<div id="movie_title">
    {{ movie.title }}
</div>
<div id="movie_description">
    {{ movie.description }}
</div>
<input type="hidden" id="code" name="code" value="{{code}}" />
<script type="text/javascript" src="{{STATIC_URL}}javascript/enjoy.js"></script>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T11:00:45.057

```
 var playerapi = flowplayer($(".flowplayer"));
     alert(playerapi.ready ? playerapi.video.time : 0); 
```

用这个

在这里，alert(playerapi.ready ? playerapi.video.time : 0) 这个节目是当前时间。

# jquery - slideDown 效果问题

> ID：11748763
> 
> 赞同：0
> 
> 时间：2012-07-31T20:47:56.343
> 
> 标签：jquery

这个 Jquery 工作正常

```
$(row).hide().insertAfter($("#imgDiminui_" + Id).closest("tr")).fadeIn("slow"); 
```

这不起作用

```
$(row).hide().insertAfter($("#imgDiminui_" + Id).closest("tr")).slideDown("slow"); 
```

为什么`slideDown`效果不起作用？

# mysql - 如何编写查询以从总计中滚动减法以创建衰减曲线

> ID：11748771
> 
> 赞同：0
> 
> 时间：2012-07-31T20:48:13.343
> 
> 标签：mysql

我想从数据集的总计中减去每个有序行的值。总数为 2,014,217，这是数据集中所有视图的总和。这是下面的数据集以及我正在寻找的内容：

```
viewing           | views  | total  
------------------------------------
a0100             | 236303 | 1777914
a0100|a0101       |   9260 | 1768654
a0100|a0101|a0102 |  26670 | 1741984 
```

总数将是总计减去 236,303，即 1,777,914，然后下一个总数是 1,777,914 减去 9,260，即 1,768,654，依此类推。

有人可以帮忙吗？

谢谢，
本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:07:45.090

您可以使用变量来跟踪前一行的值。

试试这个解决方案：

```
SELECT     @vw:=CONCAT(@vw, '|', a.viewing) AS viewing
           a.views,
           CASE @total 
               WHEN 0 THEN @total:=b.viewsum - a.views
               ELSE        @total:=@total - a.views
           END AS total
FROM       tbl a
CROSS JOIN (SELECT SUM(views) AS viewsum FROM tbl) b
CROSS JOIN (SELECT @vw:='') vw_init
CROSS JOIN (SELECT @total:=0) total_init 
```

# java - 使用 GAE 的简单测验网站？

> ID：11748776
> 
> 赞同：1
> 
> 时间：2012-07-31T20:48:35.893
> 
> 标签：java, google-app-engine

我是否有任何可用的免费/开源项目，它在谷歌应用引擎平台上创建一个简单的测验？

我要求而不是自己编写代码的原因是，我需要在一周内进行这个测验以进行考试，并且想学习并与其他人一起填写测验...

非常感谢你的回答！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:59:04.973

这似乎是您正在寻找的内容：[http ://code.google.com/p/quizlink/](http://code.google.com/p/quizlink/)

# python - 是否有可能在 python 中类似于 perl 的左值或 lisp 的 setf？

> ID：11748780
> 
> 赞同：2
> 
> 时间：2012-07-31T20:48:54.060
> 
> 标签：python, perl, lisp, lvalue

在 lisp 中，您可以说：

```
(setf (aref a 1) 5) 
```

在 perl 中你可以说：

```
substr( $string, $start, $stop ) =~ s/a/b/g 
```

在python中可能有这样的事情吗？我的意思是可以将函数结果用作左值（作为赋值操作的目标）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:09:38.023

不可以。在编译器级别明确禁止分配给函数调用的结果：

```
>>> foo() = 3
  File "<stdin>", line 1
SyntaxError: can't assign to function call 
```

然而，Python 语法中有两种特殊情况：

```
# Slice assignment
a = [1,2,3,4]
a[0:2] = 98, 99  # (a will become [98, 99, 3, 4])

# Tuple assignment
(x, y, z) = (10, 20, 30) 
```

另请注意，在 Python 中存在语句/函数对偶性，并且赋值或扩充赋值 ( `+=`, `*=`...) 不仅是普通运算符，而且是**语句**并具有特殊规则。

此外，在 Python 中没有“指针”的一般概念......传递给函数一个存储位置的唯一方法是传递一个“setter”闭包，因为要找到一个可分配的位置，您需要使用显式名称，索引，或者如果该位置是对象实例成员，则您需要使用实例字典）。

```
# Pass the function foo where to store the result
foo( lambda value : setattr(myObject, "member", value) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:57:44.843

不，一般来说没有任何方法可以做到这一点。*切片符号*在有限的情况下很接近，因为您可以执行以下操作：

```
>>> a = [1, 2, 3]
>>> a[1:2] = [5, 6]
>>> a
[1, 5, 6, 3] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T20:56:32.353

简而言之，没有。

但是，如果您定义`__setitem__`，则可以分配给下标，例如

```
foo['subscript'] = 7 
```

您可以从函数返回`foo`（如果需要，还可以返回下标）。

```
container, subscript = whatevs()
container[subscript] = 7 
```

或者，在一行中：

```
operator.setitem(*(whatevs()+(7,))) 
```

见[`operator`](http://docs.python.org/library/operator.html#operator.setitem)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T22:34:33.130

一般来说，不（不要停止阅读！！！！）。请注意以下事项：

```
class test:
    test = 4

test().test = 5
# we can no longer refer to the created object.
x = test().test = 6
x # 6 
```

然而，做一些搜索我发现[了这个](https://stackoverflow.com/questions/5036700/how-can-you-dynamically-create-variables-in-python-via-to-a-while-loop)（这看起来像不好的做法，但可用）：

```
globals()["varname"] = 5
varname # 5 
```

因此，将您的 Perl 与我的 Python 混合，我们得到：

```
globals()[substr( $string, $start, $stop )]  = something
substr( $string, $start, $stop ) # something

# Note: wouldn't work because the function returns a string. 
# I just don't know what the function returns. 
# so exec("print " +substr( $string, $start, $stop ) I guess

# similarly, and possibly a little better practice
locals()["somethingdif"] = somethingelse
somethingdif # somethingelse 
```

为了减轻大规模的否决，我应该提到你可以完全搞砸你的程序。但你可能知道这一点。`"somevar" not in locals()`只需通过检查或确保在使用此方法时不会覆盖现有变量`"somevar" not in globals()`。

# objective-c - Objective C 有哪些有用的工具

> ID：11748781
> 
> 赞同：1
> 
> 时间：2012-07-31T20:48:53.973
> 
> 标签：objective-c, ios

我对 Objective C 相当陌生，但对 Java 有一些经验。在 Java 中，JUnit 和 JDocs 等工具非常有用。这些工具在 Objective C 中是否有相似之处，或者是否有对 Objective C 更有用的工具？目前我正在使用 X-Code 和 iOS 模拟器。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:03:44.413

从我的头顶上...

最有用的是 developer.apple.com 中的所有资源。他们有文档、示例、参考资料等。

此外，使用 Instruments 应用程序来帮助调试、分析和监控您的应用程序。其中的各种“仪器”非常有用。

对于单元测试，您可以在创建应用程序时将它们作为标准包含（只需选中相应的框）。OCUnit 包括在内。您也可以尝试使用 Google Toolbox、GHUnit、CATCH 和 OCMock 来补充这一点。

如果我想到别的，我会告诉你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:10:22.000

您可以在此处找到有关单元测试的信息。 [https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/00-About_Unit_Testing/about.html](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/00-About_Unit_Testing/about.html)

对于验收测试，Square 的 KIF（保持功能）是一个不错的选择。KIF 可以模拟按钮点击和文本输入。 [https://github.com/square/KIF/](https://github.com/square/KIF/)

Instruments 是调试内存问题的非常有用的工具。泄漏和分配工具非常有用。您可以在分配工具中查看谁在保留和释放特定对象，这对于找出保留周期很有用。如果您在 ARC 之前使用代码，“僵尸”工具也是无价的。

XCode 中的静态分析器可以快速指出一些潜在的问题。XCode--> 产品--> 分析

除了 Apple 优秀的文档，您还可以观看 WWDC 视频。 [https://developer.apple.com/videos/](https://developer.apple.com/videos/)

# matlab - 有没有办法提示选择多个文件并将这些文件（和路径）分配给变量？

> ID：11748783
> 
> 赞同：2
> 
> 时间：2012-07-31T20:48:58.480
> 
> 标签：matlab, variables, user-interface, getfiles

有没有办法提示选择多个文件并将这些文件（和路径）分配给变量？例如，打开一个对话框，让您在基本目录中启动，然后允许您将选择的文件分配给不同的变量？目前我有硬编码的路径和文件，但这最终不允许任何变化。我使用的另一种方法是使用 24 个 uigetfile 实例，但这既乏味又耗时，因此我改回使用硬编码文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:18:25.977

重读[uitgetfile 文档](http://www.mathworks.nl/help/techdoc/ref/uigetfile.html)，有一个选项允许多选文件：

> `[FileName,PathName,FilterIndex] = uigetfile(...,'MultiSelect',selectmode)`以多选模式打开对话框。`selectmode`are`'on'`和的有效值`'off'`（默认值，仅允许单选）。如果`'MultiSelect'`是`'on'`并且您在对话框中选择了多个文件，则`FileName`是字符串元胞数组。每个数组元素都包含选定文件的名称。元胞数组中的文件名按您的平台使用的顺序排序。因为多个选择总是在同一个文件夹中，`PathName`所以总是一个标识单个文件夹的字符串。

# c++ - C++/CLI (.NET) 相当于 Native C++ 向网络写入结构

> ID：11748788
> 
> 赞同：0
> 
> 时间：2012-07-31T20:49:10.933
> 
> 标签：c++, performance, data-structures, network-programming, c++-cli

我最近继承了一个混合 C++ 和 C++/CLI (.NET) 的程序。它通过网络连接到其他组件，并连接到某些特殊硬件的驱动程序 DLL。但是，我试图找出通过网络发送数据的最佳方式，因为使用的方式似乎不是最佳的。

数据存储在 C++ 定义的结构中，例如：

```
 struct myCppStructure {
        unsigned int field1;
        unsigned int field2;
        unsigned int dataArray[512];
    }; 
```

从 C++/CLI 访问结构本身时，程序运行良好。问题是要通过网络发送它，当前代码会执行以下操作：

```
 struct myCppStructure* data;
    IntPtr dataPtr(data);
    // myNetworkSocket is a NetworkStream cast as a System::IO::Stream^
    System::IO::BinaryWriter^ myBinWriter = gcnew BinaryWriter(myNetworkSocket);
    __int64 length = sizeof(struct myCppStructure) / sizeof(__int64);
    unsigned __int64* ptr = static_cast<__int64*>(dataPtr.toPointer());
    for (unsigned int i = 0; i < (length / sizeof(unsigned __int64)); i++)
        myBinWriter->Write((*ptr)++); 
```

在普通的 C++ 中，它通常是这样的调用：

```
 myBinWriter->Write(ptr,length); 
```

但我在 C++/CLI 中找不到任何等价的东西。System::IO::BinaryWriter 只有基本类型和其中一些的一些 array<>^ 版本。没有比这更有效的了吗？

PS 这些记录每秒生成很多次；所以做额外的复制（例如编组）是不可能的。

注意：最初的问题是关于 C# 的。我没有意识到我所认为的 C# 实际上是 .NET 下的“托管 C++”（又名 C++/CLI）。以上内容已经过编辑，以将“C#”引用替换为“C++/CLI”引用——我将其用于任何版本的托管 C++，尽管我特别使用的是 .NET 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:00:01.513

您要做的是找出 C++ 结构是如何打包的，并使用正确的[StructLayout](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)属性定义一个结构。

要定义固定长度的 int[]，您可以在其中定义一个[固定大小的缓冲区](http://msdn.microsoft.com/en-us/library/zycewsya%28v=vs.80%29.aspx)。请注意，要使用它，您必须将您的项目标记为 /unsafe。

现在您已准备好使用两个步骤将该结构转换为 byte[]

1.  使用[GCHandle.Alloc](http://msdn.microsoft.com/en-us/library/a95009h1.aspx)将结构数组固定在内存中- 这很快，不应该成为性能瓶颈。
2.  现在使用带有源 IntPtr = [*handle*](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.addrofpinnedobject.aspx) [.AddrOfPinnedObject的](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.addrofpinnedobject.aspx)[Marshal.Copy](http://msdn.microsoft.com/en-us/library/ms146631)（别担心，这和 memcpy 一样快）。[](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.addrofpinnedobject.aspx)

 *现在处理 GCHandle，您就可以使用Serg Rogovtsev 提到的[“Write”重载来写入字节了。](http://msdn.microsoft.com/en-us/library/bx149a0k.aspx)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:04:02.020

您的结构由“基本类型”和“它们的数组”组成。为什么你不能使用顺序写它们`BinaryWriter`？就像是

```
binWriter.Write(data.field1);
binWriter.Write(data.field2);
for(var i = 0; i < 512; i++)
    binWriter.Write(data.dataArray[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:42:24.480

在 C# 中，您可以执行以下操作。首先定义结构。

```
[StructLayout ( LayoutKind.Sequential )]
internal unsafe struct hisCppStruct
{
    public uint field1;
    public uint field2;
    public fixed uint dataArray [ 512 ];
} 
```

然后使用二进制编写器编写它，如下所示。

```
hisCppStruct @struct = new hisCppStruct ();
@struct.field1 = 1;
@struct.field2 = 2;
@struct.dataArray [ 0 ] = 3;
@struct.dataArray [ 511 ] = 4;

using ( BinaryWriter bw = new BinaryWriter ( File.OpenWrite ( @"C:\temp\test.bin") ) )
{
    int structSize = Marshal.SizeOf ( @struct );
    int limit = structSize / sizeof ( uint );

    uint* uintPtr = (uint*) &@struct;

    for ( int i = 0 ; i < limit ; i++ )
        bw.Write ( uintPtr [ i ] );
} 
```

我很确定你可以在托管 C++ 中做同样的事情。*

# symfony - Symfony2 Doctrine2 postPersist on Associations

> ID：11748790
> 
> 赞同：4
> 
> 时间：2012-07-31T20:49:25.757
> 
> 标签：symfony, doctrine-orm

有没有办法在 symfony2 中为关联字段接收 Doctrine 生命周期事件？ [http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/events.html#lifecycle-events](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/events.html#lifecycle-events)

例如：

```
Entity\User.php
..

 /**
 * @ORM\ManyToMany(targetEntity="Group", inversedBy="users", cascade={"persist"})
 * @ORM\JoinTable(name="users_groups",
 *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id", onDelete="CASCADE")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id", onDelete="CASCADE")}
 * )
 */
protected $groups; 
```

[因此，当我为用户实体http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)创建事件侦听器时

将 Entity\Group 添加到 Entity\User 时会调用 Listener。

***注意：我能找到获得此功能的唯一方法是创建一个 Entity\UserGroup 并监视该 postPersist 而不是用户 PostPersist。***

这是监听实体关联的唯一方法吗？

**更新答案！关联字段的更新期间确实会调用关联的所有者，但它不在事件参数的 getEntityChangeSet 中。您必须从实体管理器中的工作单元获取 getScheduledCollectionUpdates。例如：**

```
EventListener\PostEventListener
..

public function postUpdate(LifecycleEventArgs $args)
{
  $this->handlePostEvents($args);
}

public function postPersist(LifecycleEventArgs $args)
{
  $this->handlePostEvents($args);
}

public function handlePostEvents(LifecycleEventArgs $args){
  $entity = $args->getEntity();
  $em = $args->getEntityManager();

  if ($entity instanceof User) {
    $uow = $em->getUnitOfWork();
    foreach ($uow->getScheduledCollectionUpdates() AS $col) {
      if ($col->first() instanceof Group) {
        // ADD CODE HERE
      }
    }
  }
} 
```

# visual-studio-2010 - Microsoft UITesting 自动化引擎信息

> ID：11748796
> 
> 赞同：3
> 
> 时间：2012-07-31T20:50:01.900
> 
> 标签：visual-studio-2010, silverlight, coded-ui-tests

我正在使用 Microsoft.VisualStudio.TestTools.UITesting 为 Silverlight Web 应用程序手动编写自动化测试代码。我遇到了一个不一致的失败问题，我需要了解 Visual Studio 在运行测试时在做什么。

**在哪里可以找到有关 Visual Studio 中测试框架/引擎的详细技术信息？** 或者更具体地说，当我运行测试时，我正在寻找有关“幕后”发生的事情的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:26:17.237

由于您没有指定要查找的任何特定信息，因此我会将您链接到几个“门户”页面，在搜索 Coded UI 信息时我往往会很幸运。

第一个在这里：http: [//blogs.msdn.com/b/mathew_aniyan/archive/2009/12/10/content-index-for-coded-ui-test.aspx](http://blogs.msdn.com/b/mathew_aniyan/archive/2009/12/10/content-index-for-coded-ui-test.aspx)，它也有一些博客的链接专门从事编码 UI 测试框架的 Microsoft 员工。

第二个有点小，但链接更有条理： http: [//msdn.microsoft.com/en-us/library/dd286726](http://msdn.microsoft.com/en-us/library/dd286726(VS.100).aspx) (VS.100).aspx 。

我希望你能在其中找到一些有用的东西。

# wpf - Azure 辅助角色中的 WPF 图像操作

> ID：11748800
> 
> 赞同：0
> 
> 时间：2012-07-31T20:50:27.647
> 
> 标签：wpf, image-processing, azure

我在 Azure Worker Role 中使用 WPF 将多个图像合成为一个图像并保存到磁盘。模拟器中的一切都运行良好，但是当我部署到 Azure 时，我希望看到缩放/调整大小图像的区域完全是黑色的。

我将代码打包到控制台应用程序中，并使用远程桌面将其复制到托管辅助角色的同一实例中。该应用程序运行良好。这告诉我，能够运行我的代码所需的一切都存在于一个普通的天蓝色实例上。

在可能干扰 WPF 图像处理的辅助角色的上下文中运行有什么不同？

**更新** 这仅影响 3D 转换。在伪代码中，我正在做这样的事情：

*   创建网格，应用纹理并将它们添加到`ModelVisual3D`
*   创建一个`Viewport3DVisual`，设置一个正交相机并添加`ModelVisual3D`
*   将视口渲染为`RenderTargetBitmap`
*   用于在“场景画布”上`DrawingContext.DrawImage()`绘制`RenderTargetBitmap`

当不需要 3D 时，图像也会被缩放和添加`DrawingContext.DrawImage()`。这工作正常。所以这个问题在某种程度上与创建或使用`RenderTargetBitmap`3D 场景有关。

**更新** 事实证明，当 WPF 不与桌面交互时，它不会呈现 3D 内容。模拟器在我的个人用户上下文下运行，而在 Azure 中它作为系统帐户运行。通过创建作为本地系统登录的 Windows 服务并执行相同的步骤，可以在本地复制该问题。解决这个问题可能是一个很大的挑战。我们可能不得不使用虚拟机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:31:50.117

Even though it works fine in the emulator, could you try changing the ApartmentState for your WPF code to STA (read about WPF & STA here: [https://stackoverflow.com/a/1293433/384546](https://stackoverflow.com/a/1293433/384546))?

```
public class WorkerRole : RoleEntryPoint
{
    public override void Run()
    {
        Thread thread = new Thread(new ThreadStart(MyWPFCode));
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();

        while (true)
        {
            Thread.Sleep(10000);
        }
    }

    private void MyWPFCode()
    {
        // WPF code goes here.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:53:17.017

[您的工作人员角色是否在完全信任下运行](http://msdn.microsoft.com/en-us/library/windowsazure/dd573353.aspx)？

# plone - 最先进的 Plone 事后调试

> ID：11748802
> 
> 赞同：2
> 
> 时间：2012-07-31T20:50:32.510
> 
> 标签：plone, pdb

在 Plone 中的某些异常上调用 pdb / ipdb 的推荐方法是什么？

最常见的用例是

*   在异常行为上临时打开 pdb

*   确保仅针对某些异常调用 pdb (UnicodeDecodeError ...)

这种调试有哪些附加组件、WSGI 解决方案等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:13:24.560

我大约一年没有做过任何 Plone 开发，但[Products.PDBDebugMode](http://pypi.python.org/pypi/Products.PDBDebugMode/)曾经是*有史以来最伟大的事情*。在前台模式下运行时，如果发生未处理的异常，它将进入 PDB。

# c# - 如何将文本从文本框反映到数据网格

> ID：11748803
> 
> 赞同：1
> 
> 时间：2012-07-31T20:50:31.477
> 
> 标签：c#, winforms, visual-studio-2010, reflection, datagrid

如何编写将文本框中的文本反映到数据网格的程序？例如：您在文本框 (textBoxURL.Text) 中写了一些东西，它会自动将文本反映到数据网格 (row.URL)。

这是我的一段代码：

```
DsVersions.ASSEMBLY2Row row = dsVersions.ASSEMBLY2.NewASSEMBLY2Row();
row.URL = textBoxURL.Text; 
```

如果有任何问题（不清楚，不够详细，更多代码，令人困惑）请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:18:34.987

```
private void textBoxURL_TextChanged(object sender, EventArgs e)
    {
        try
        {
            foreach (DsVersions.ASSEMBLY2Row row in dsVersions.ASSEMBLY2.Rows)
            {
                row.URL = textBoxURL.Text;
            }
        }
        catch
        {

        }
    } 
```

试一试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:22:09.747

可能有点简单，但我会把它扔在那里。

在文本框的`keypress`or`keydown`事件上，将数据网格（我猜是单元格）中的值更改为`textbox.text`.

# video - 如何使用ffmpeg将视频放置在较大的静态背景图像顶部的特定位置？

> ID：11748808
> 
> 赞同：5
> 
> 时间：2012-07-31T20:51:02.257
> 
> 标签：video, ffmpeg, h.264, video-processing

我已经安装了当前版本，`ffmpeg`以便访问该`-filter_complex`选项，希望能够将视频用作比视频更大的静态背景图像的叠加层。

最初，我只是试图在静态背景图像上叠加视频以使用以下命令（不起作用）：

`ffmpeg -loop 1 -i background.png -i overlay.mov -filter_complex overlay -shortest -y output.mov`

唯一具有由没有视频覆盖的文件组成的`output.mov`单帧。`background.png`

我怎样才能做到这一点，并在背景上为视频添加一个特定的坐标位置？

**奖励**：使用单个命令，是否也可以将覆盖视频的大小调整为更大的尺寸，同时将其放置在 bg 图像的顶部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T23:48:58.647

该命令对我来说很好（使用`0.11.1.git-56ae592 built on Jul 19 2012`or `N-42914-gf5a5b43 built on Jul 26 2012`）；问题出在其他地方。你用的是什么版本的FFmpeg？（有许多版本的当前版本。）输出中是否有任何消息表明某些东西不起作用？

要回答您的其他问题：

*   [您可以将覆盖过滤器](http://ffmpeg.org/ffmpeg.html#overlay-1)的坐标设置 为`x=100`, `y=50`（从左上角开始），如下所示：

    ```
    ... -filter_complex overlay=100:50 ... 
    ```

*   可以使用[缩放过滤器](http://ffmpeg.org/ffmpeg.html#scale)调整~~背景~~叠加层的大小：

     ~~~~```
    ... -filter_complex "[0] scale=1280:960 [bg]; [bg][1] overlay" ... 
    ```~~  ~~```
    ... -filter_complex "[1] scale=1280:960 [over]; [0][over] overlay" ... 
    ```~~~~ 
~~~~*   作为附录，您不需`-filter_complex`要这样做，例如：

    ```
    ffmpeg -i over.mov -vf "movie=background.png [bg]; [bg][in] overlay" out.mp4 
    ```

    也应该工作。我说“应该”是因为该命令实际上与我测试过的 FFmpeg 版本存在段错误，但是命令语法可以处理您想要在没有`-filter_complex`.~~~~

# windows - Windows批处理脚本将行从txt文件移动到新文件

> ID：11748813
> 
> 赞同：0
> 
> 时间：2012-07-31T20:51:17.360
> 
> 标签：windows, parsing, batch-file

我有很多文本文件，其中包含一些 html 代码。例如：

```
Some random text....
..
...
....
<tag1>some more random text</tag1>
....
...
.. 
```

我需要运行一个脚本来遍历每个文本文件并将标签之间的每一行*移动*到同一文件夹中的新文本文件中，然后将它们从原始文件中删除。

所以最终结果是一个文件没有`<tag1>`，另一个文件只有`<tag1>`.

我希望我说得够清楚。这是可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:21:16.513

***IF***（这是一个大的、加粗的、斜体的、大写的***IF***）你可以保证每个`<tag1>...</tag>`标签出现在一行上，同一行上没有其他内容，并且没有标签属性使事情复杂化，那么答案很简单.

***编辑***- 修复了一些错误，现在它实际上可以工作了:-)

```
@echo off
for %%F in (*.txt) do (
  echo processing %%F
  findstr /rc:"^ *<tag1>.*</tag1> *$" "%%F" >"%%~nF.tag1%%~xF"
  findstr /rvc:"^ *<tag1>.*</tag1> *$" "%%F" >"%%~nF.new%%~xF"
  >nul move /y "%%~nF.new%%~xF" "%%F"
) 
```

该解决方案可以扩展为相当容易地处理标签属性。

但我严重怀疑你的问题真的那么简单。有效的 HTML 内容可以有一个标签跨越多行，并且一行可以有很多标签。

通常，Windows 原生批处理在文本处理方面非常糟糕，对于 HTML 或 XML 更糟糕。我强烈建议使用具有强大文本处理功能的第三方工具，例如适用于 Windows 的 gnu sed。或者更好的是，获得一个专门用于处理 HTML 的工具。

# ios - MKOverlays 结合图像瓦片和 KML

> ID：11748819
> 
> 赞同：2
> 
> 时间：2012-07-31T20:51:53.263
> 
> 标签：ios, kml, mkoverlay

我正在尝试在平铺图像（下面的代码）顶部显示带有 kml 叠加层的平铺图像，并且收到以下错误：

> 'NSInvalidArgumentException'，原因：'-[MKPolyline tilesInMapRect:zoomScale:]：无法识别的选择器发送到实例

是否有人对我是否正确接近多个叠加层或为什么会出现此错误有任何建议？

提前致谢！

```
(void)viewDidLoad
{
    [super viewDidLoad];
    // Initialize the map overlay with tiles in the app's bundle.
    NSString *tileDirectory = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Tiles"];

    MapOverlay *overlay1 = [[MapOverlay alloc] initWithDirectory:tileDirectory];

    // Locate the path to the route.kml file in the application's bundle
    // and parse it with the KMLParser.

    NSString *path = [[NSBundle mainBundle] pathForResource:@"route" ofType:@"kml"];
    NSURL *url = [NSURL fileURLWithPath:path];
    kmlParser = [[KMLParser alloc] initWithURL:url];
    [kmlParser parseKML];

    // Add all of the MKOverlay objects parsed from the KML file to the map.
    NSArray *overlay2 = [kmlParser overlays];

    [map addOverlay:overlay1];
    [map addOverlays:overlay2];

    // Set the starting location.
    CLLocationCoordinate2D startingLocation;
    startingLocation.latitude = 0.00;
    startingLocation.longitude =-0.00;

    map.region = MKCoordinateRegionMakeWithDistance(startingLocation, 4600, 4600);
    [map setCenterCoordinate:startingLocation];       
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay1
{
    MapOverlayView *view = [[MapOverlayView alloc] initWithOverlay:overlay1];
    view.overlayAlpha = 1.0;
    return view;
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay2:(id <MKOverlay>)overlay2
{
    return [kmlParser viewForOverlay:overlay2];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:23:03.283

至少`viewForOverlay`委托方法没有正确实现。

您已经编写了两种方法：`mapView:viewForOverlay:`和`mapView:viewForOverlay2:`.

但是地图视图只会始终调用`mapView:viewForOverlay:`，因为这是`MKMapViewDelegate`协议定义的方法名称。

该`mapView:viewForOverlay2:`方法将被忽略并且不会被地图视图调用。

所以发生的情况是，当`overlay2`叠加数组添加到地图时，它会调用为叠加`mapView:viewForOverlay:`创建 a 的方法`MapOverlayView`（而不是从 获取叠加视图`kmlParser`）。这可能会导致问题（可能`MapOverlayView`只处理`MapOverlay`-type 覆盖）。

所有覆盖都应在该`mapView:viewForOverlay:`方法中处理。
要处理多种类型的覆盖，请检查`overlay`类并相应地处理：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    if ([overlay isKindOfClass:[MapOverlay class]])
    {
        MapOverlayView *view = [[MapOverlayView alloc] initWithOverlay:overlay];
        view.overlayAlpha = 1.0;
        return view;
    }

    //if not a MapOverlay, get from kmlParser...
    return [kmlParser viewForOverlay:overlay];
} 
```

删除`mapView:viewForOverlay2:`方法。

# html - 控制浏览器中的“将链接另存为”选项

> ID：11748821
> 
> 赞同：0
> 
> 时间：2012-07-31T20:52:03.437
> 
> 标签：html

我有一个页面中包含 MP3 文件的网站。有一个使用 HTML5 构建的 MP3 播放器。我的用户可以毫无问题地播放歌曲，但他们也可以使用浏览器中的“将链接另存为”选项下载 MP3 文件。（右键单击 MP3 的“链接另存为”）。

直到现在，当我遇到此页面时，我认为不可能隐藏“将链接另存为”：http: [//www.codebasehero.com/files/music-player-1.0.1/demo/](http://www.codebasehero.com/files/music-player-1.0.1/demo/)

这个页面有一个类似我的播放器（没有闪光灯）。如果我右键单击 MP3 链接，则不会出现“将链接另存为”选项。有谁知道他们如何设法隐藏“将链接另存为”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:58:16.070

很简单：您提到的网站上的“链接”根本不是链接，它们是`<span>`元素。可能有一些 JavaScript 可以让他们在点击时播放歌曲。如果您检查他们的“购买”链接，这些是实际链接，浏览器将在右键单击时显示“另存为”选项。

# silverlight - 如何使用 MVVM 构建图形密集型 Silverlight 应用程序？

> ID：11748831
> 
> 赞同：0
> 
> 时间：2012-07-31T20:52:52.623
> 
> 标签：silverlight, mvvm, mvvm-light, wcf-ria-services

我想使用 WCF Ria 服务和 MVVM 设计模式创建一个 Silverlight 应用程序。

该应用程序的主页将包含一个“外壳”和大量（10 或 100 多个）不同外观（形状/大小/属性）的对象，它们相互链接（形成一种图形）。

这些项目需要鼠标可拖动，并且它们的当前位置/状态需要保存到后端数据库。

我觉得实现这一点的最好方法是为每个显示的项目显示一个小的 ViewModel 和 View，将所有重要的属性放入 ViewModel，然后以某种方式在主“shell”中显示所有这些 View。

但是，我不知道这究竟是如何实现的。我考虑过使用 MVVM Light，但没有找到任何可以显示类似内容的示例。

任何人都可以指出一些关于如何做到这一点的例子或想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:30:30.677

*“当你只有一把锤子时，一切看起来都像钉子”* :)

MVVM 并非旨在像您描述的那样管理图形密集型情况。它是以灵活的方式将高级概念拼接在一起的粘合剂。使用 MVVM，您将增加*会*影响性能的开销（例如，绑定在幕后使用反射）。涉及的对象越多，影响就越大。

我可以建议的最佳起点是想象您需要从 3rd 方控件（例如自定义控件/容器）中获得什么，如果实际不存在，则将其构建为第三方自定义控件。

在实践中，您会发现自定义控件很少基于 MVVM，出于性能原因，不仅仅是因为“他们通常不需要它”。它们很可能会为外部接口公开*MVVM 兼容*属性，但不会为低级内部提供。

MVVM 是一种相对高级的技术。不要觉得你必须在所有事情上都实施​​它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:56:09.140

在 MVVM 之后执行以下操作：

1.  模型 - 创建模型对象，该对象将负责获取和持久化屏幕上形状的坐标；
2.  视图模型 - 一种视图模型，它将启动获取和持久化模型对象；
3.  查看 - 就您而言，这是您完成大部分工作的地方。使用 Canvas 面板创建基于 ItemsControl 的自定义控件。自定义控件应传递 ItemsSource 中模型对象的集合，允许拖放容器并在用户将容器放置在某个位置时调用视图模型命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:03:22.800

看看 Telerik 控件，特别是 radTileView，这似乎具有您正在寻找的功能。他们还有一个持久性框架，应该允许您将图块的位置保存回您的数据库。

# perl - 模块和主脚本中使用的命令行选项

> ID：11748835
> 
> 赞同：3
> 
> 时间：2012-07-31T20:53:20.467
> 
> 标签：perl, perl-module, getopt-long

我有一个`misc`由几个脚本使用的模块。每个脚本都接受两个标准选项 (`-help`和`-verbose`) 以及一堆自己的选项。

所以，现在每个脚本都有

```
my ($verbose,$quiet) = (1,0);
my $help = undef;
...
GetOptions("verbose|v+" => \$verbose, "quiet|q+" => \$quiet, "help|h" => \$help,
           ....)
  or die "GetOptions: error (see above)\n";
if (defined $help) { usage(); exit; }
$verbose -= $quiet; 
```

这已经很无聊了。

现在，我希望`misc`函数也能意识到 的值`$verbose`，所以我必须将`$verbose`et al 移到`misc`并`$misc::verbose`在脚本中使用：

杂项：

```
our $verbose = 1;
my $quiet = 0;
our $help = undef;
our %common_options = ("verbose|v+" => \$verbose, "quiet|q+" => \$quiet, "help|h" => \$help);
sub set_verbose () { $verbose -= $quiet; } 
```

脚本：

```
GetOptions(\%misc::common_options,"verbose|v","quiet|q","help|h",
           "count=i" => \$count, "start=i" => \$start, "mincoverage=i" => \$mincoverage,
           "output=s" => \$output, "input=s" => \$input, "targets=s" => \$targets)
  or die "GetOptions: error (see above)\n";
if (defined $misc::help) { usage(); exit; }
misc::set_verbose(); 
```

这看起来并没有好多少（而且似乎无论如何都不起作用，至少`-help`被忽略了）。

那么，人们使用什么来在模块和脚本之间共享命令行选项呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:15:30.447

就个人而言，我做得更简单：

*   使用哈希存储命令行选项

    ```
     GetOptions(\%args, "xxx1","xxx2"); 
    ```

*   将该哈希按原样传递给任何类的构造函数或模块设置器

    ```
     my $object = Class1->new(%args, %constructor_args);
      Module2::set_args(\%args); # 
    ```

*   模块中的参数设置器将是：

    ```
     # Module2
      our %args;
      sub set_args { %args = %{ shift }; } 
    ```

这可确保：

*   我永远不必担心将参数从一个范围移动到另一个范围并且必须修改一些调用。他们都通过了大约 100% 需要的地方

*   整洁而不混乱的代码。由于我们是广播，我们不需要担心订阅者的个人需求。

*   模式很容易复制到您拥有的所有类。

事实上，如果你想更加狡猾，你甚至可以`Module2::set_args(\%args);`用一个智能代码替换几个类的调用：

1.  读入已加载模块的列表

2.  检查哪些模块`set_args()`通过以下方式实现调用`UNIVERSAL::can()`

3.  调用支持模块的 `set_args()`调用

后者使代码更加简洁，`set_args()`因为每个非类模块的 N 次调用都被一个`set_all_modules_args()`调用替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:48:11.660

有一个负责获取标准选项的模块。

使用这个模块，每个人都可以访问 verbose() 调用。

```
package StandardOptions;

use base qw(Exporter);
our @EXPORT = qw(verbose);

use Getopt::Long;

Getopt::Long::Configure(qw(pass_through));

my $helpNeeded;
my $verbose
GetOptions ("help" => \$helpNeeded, "verbose" => $verbose);

if ($helpNeeded) {
    #provide help
    exit(0);
}

sub verbose {
   return $verbose;
}

1; 
```

# c# - 父子关系导致无限循环

> ID：11748836
> 
> 赞同：0
> 
> 时间：2012-07-31T20:53:29.877
> 
> 标签：c#, recursion, parent-child

我正在尝试将 System.Web.SiteMapNode 转换为我自己的 SiteMapNode 类（见下文）：

```
public class SiteMapNode {
    public virtual SiteMapNode Parent { get; set; }
    public virtual string Title { get; set; }
    public virtual IList<SiteMapNode> Children { get; set; }

    public SiteMapNode(System.Web.SiteMapNode node) {
        Parent = node.ParentNode != null ? new SiteMapNode(node.ParentNode) : null;
        Title = node.Title;
        Children = node.ChildNodes.Cast<System.Web.SiteMapNode>().Select(n => new SiteMapNode(n)).ToList();
    }
} 
```

现在我希望我能说：

```
var node = new MyApp.SiteMapNode(System.Web.CurrentNode); 
```

但现在的问题是构造函数设置了 Children，然后为每个孩子创建了我的 SiteMapNode 类的实例。现在这将设置设置子级的父级...您现在可能会看到问题，这会导致无限循环。

我不太明白如何解决这个问题。我会很感激任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:04:08.917

您可以制作一个节点列表，您将在其中存储所有节点。

首先，您创建没有关系引用的所有节点并填充列表，然后，您为每个节点调用填充子/父方法，您将在其中查找所需的节点以在节点中引用它。

该列表对于搜索也很有用。

# c# - 将 C# 代码转换为 Ruby 代码

> ID：11748837
> 
> 赞同：1
> 
> 时间：2012-07-31T20:53:32.633
> 
> 标签：c#, asp.net, .net

我正在尝试将我的系统连接到银行支付系统。问题是，如果这不是一场彻底的灾难，他们的文档大多是不正确的。

在 3D 安全系统的文档中，银行要求我填写一个 html 表单并将其提交到他们的系统。表单应包含一些数据和数据的 SHA1 哈希值和数据。我试了很多次，但是银行系统一直返回“Hash not correct”的错误。

在检查了他们的示例 C# 代码后，我发现了他们用来获取哈希结果的函数。问题是函数正在对数据做一些其他的事情，而不仅仅是散列它们。更大的问题是我无法找出这段代码对散列的字符串做了什么。

```
public static string CreateHash(string notHashedStr)
    {
        SHA1 sha1 = new SHA1CryptoServiceProvider();
        byte[] notHashedBytes = System.Text.Encoding.ASCII.GetBytes(notHashedStr);
        byte[] hashedByte = sha1.ComputeHash(notHashedBytes);
        string hashedStr = System.Convert.ToBase64String(hashedByte);

        return hashedStr;
    } 
```

我几乎没有 .Net 框架的经验，而且我在 Mac 上，所以我无法轻松测试代码，而且 MSDN 绝对不适合我（我大部分时间都是 Ruby 开发人员，而且我知道足够多的 C）。如果有人能解释这些函数对要散列的字符串的作用，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:57:59.497

这很简单。

1.  从中获取 ASCII 编码字节`notHashedStr`。
2.  从该字节创建一个 SHA1 哈希
3.  将该哈希转换为 Base64 编码字符串。
4.  返回那个 Base64-SHA1-ASCII-String。

我从来没有做过任何红宝石，但它必须看起来有点像这样。

```
require 'digest/sha1'
returnValue = Digest::SHA1.base64digest 'notHashedStr' 
```

# javascript - Javascript中这两种写函数的风格有什么区别

> ID：11748842
> 
> 赞同：1
> 
> 时间：2012-07-31T20:53:45.000
> 
> 标签：javascript

我正在努力找出以下两个版本的 Javascript 功能之间有什么更好的地方

```
var FirstName = function(){
    var value = 0;

    this.getValue = function(){
        return value;
    }
} 
```

和

```
var FirstName = function(){
    var value = 0;

    return {
        getValue: function(){
            return value;
        }
    }
} 
```

我确实知道后者形成了一个闭包，但我不明白，从使用的角度来看，第二种风格的闭包比第一种风格有什么优势？

编辑：根据 Felix 的评论，这两个函数都形成了闭包。所以在语义上这两个函数之间没有区别（据我所知）。那么哪个是首选方式？有什么指导方针吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:07:17.200

在这种情况下，第二种方式似乎有点多余。但我确信在某些情况下使用第二种方式可能更有益。我个人选择第一个只是因为它通常使代码更清晰、更不容易混淆。这只是一个偏好的事情。无论您喜欢哪个，并且与您正在处理的其余代码一致。一致性是最重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:07:24.280

第一种方法不返回任何内容，只是将函数创建为全局变量，而第二种方法将内部函数作为对象的成员返回。

通过*返回*内部函数，您可以在整个代码中设置和维护函数的不同状态，而对于第一个，它会在您每次运行时覆盖该方法。似乎后者更灵活..

你可以乱用我做的这个[演示。](http://jsfiddle.net/jksuK/)

# iphone - 在 appdelegate 中呈现多个 modalview

> ID：11748845
> 
> 赞同：6
> 
> 时间：2012-07-31T20:53:57.143
> 
> 标签：iphone, modalviewcontroller, uiapplicationdelegate

我想在应用程序在“应用程序：（UIApplication *）应用程序didReceiveRemoteNotification：（NSDictionary *）userInfo”中收到的每个推送消息之后呈现一个modalviewcontroller

我这样呈现视图控制器：

```
ReleaseViewController *viewController = [[ReleaseViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
[self.window.rootViewController presentModalViewController:navController animated:YES]; 
```

因此，当另一个推送消息到达并且旧的 ModalViewController 仍然可见时，我想在旧的 modalviewController 上展示一个新的 modalviewcontroller。但它不起作用。什么也没发生，控制台只是说（我认为这是 iOS 6 Beta 的调试消息）：

```
Warning: Attempt to present <UINavigationController: 0x1dde6c30> on <UINavigationController: 0x1dd73c00> whose view is not in the window hierarchy! 
```

我究竟做错了什么？

PS：我不想关闭旧的 ViewController，我希望它们堆叠起来。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T21:04:32.913

您可以获取视图控制器的顶部，然后从该顶部视图控制器呈现一个新模式

```
- (UIViewController *)topViewController:(UIViewController *)rootViewController
{
    if (rootViewController.presentedViewController == nil) {
        return rootViewController;
    }

    if ([rootViewController.presentedViewController isMemberOfClass:[UINavigationController class]]) {
        UINavigationController *navigationController = (UINavigationController *)rootViewController.presentedViewController;
        UIViewController *lastViewController = [[navigationController viewControllers] lastObject];
        return [self topViewController:lastViewController];
    }

    UIViewController *presentedViewController = (UIViewController *)rootViewController.presentedViewController;
    return [self topViewController:presentedViewController];
} 
```

您可以使用 rootViewController 调用此方法是窗口的 rootViewController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T19:20:30.917

Full Decent 很接近，但有一些错误导致您在某些情况下返回错误的视图控制器。这是一个更正的版本。

```
private func topViewController(rootViewController: UIViewController) -> UIViewController {
    var rootViewController = UIApplication.sharedApplication().keyWindow!.rootViewController!
    repeat {
        guard let presentedViewController = rootViewController.presentedViewController else {
            return rootViewController
        }

        if let navigationController = rootViewController.presentedViewController as? UINavigationController {
            rootViewController = navigationController.topViewController ?? navigationController

        } else {
            rootViewController = presentedViewController
        }
    } while true
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T09:24:58.710

这里和上面一样，但是是用 Swift 编写的

```
private func topViewController() -> UIViewController {
    var rootViewController = UIApplication.sharedApplication().keyWindow!.rootViewController!
    repeat {
        if rootViewController.presentingViewController == nil {
            return rootViewController
        }
        if let navigationController = rootViewController.presentedViewController as? UINavigationController {
            rootViewController = navigationController.viewControllers.last!
        }
        rootViewController = rootViewController.presentedViewController!
    } while true
} 
```

# c++ - OpenGL错误仅在没有调试的情况下运行，这怎么可能？

> ID：11748847
> 
> 赞同：0
> 
> 时间：2012-07-31T20:54:06.567
> 
> 标签：c++, visual-studio-2010, opengl

在编写一个小型 OpenGL 应用程序时，我遇到了一个奇怪的错误。当我在 Visual Studio 中使用 F5（带调试）运行应用程序时，它运行良好。如果我使用 Ctrl + F5（不带调试）运行它，它会以 0 FPS 运行。在这两种情况下，我都使用 Visual Studio 中的“发布”版本。

这怎么可能？**两种运行程序的方式有什么不同，应该怎样修改程序的运行方式？** 这是一个疯狂的错误，以某种方式连接到 AntTweakBar 并绘制大量对象 + nVidia OpenGL 驱动程序。

这是程序的源代码（它非常小）：

```
#include "cinder/app/AppBasic.h"
#include "cinder/gl/gl.h"
#include "cinder/params/Params.h"
#include "cinder/Rand.h"
#include "cinder/Camera.h"

using namespace ci;
using namespace ci::app;
using namespace std;

class params_slowApp : public AppBasic
{
    public:
        void setup();
        void update();
        void draw();
        void prepareSettings( Settings *settings );

        CameraPersp mCam;
        params::InterfaceGl mParams;
};

void params_slowApp::prepareSettings( Settings *settings )
{
    settings->setWindowSize( 1280, 720 );
    settings->setFrameRate( 300 );
}

void params_slowApp::setup()
{
    gl::enableVerticalSync( false );
    gl::enableAlphaBlending();

    mCam.setPerspective( 45.0f, getWindowAspectRatio(), 5.0f, 300000.0f );
    mCam.lookAt( Vec3f::zero(), -Vec3f::zAxis(), Vec3f::yAxis() );

    mParams = params::InterfaceGl( "controls", Vec2i( 200, 300 ) );
    mParams.addText( "text" );
}

void params_slowApp::update()
{
}

void params_slowApp::draw()
{
    gl::clear( Color( 0, 0, 0 ), true );

    gl::pushMatrices();
    gl::setMatrices( mCam );

    gl::enableDepthRead();
    gl::enableDepthWrite();

    for( int i = 0; i < 10000; i++ )
    {
        glColor4f( randFloat(), 0.2, 0.3, 0.4 );

        {
            gl::pushModelView();
            gl::translate( randFloat(-100,100), randFloat(-100,100), randFloat(-10,-100) );
            gl::drawCube( Vec3f::zero(), Vec3f::one() );
            gl::popModelView();
        }
    }

    gl::disableDepthWrite();
    gl::disableDepthRead();

    gl::popMatrices();

    params::InterfaceGl::draw();
}

CINDER_APP_BASIC( params_slowApp, RendererGl ) 
```

我正在使用[Cinder](http://libcinder.org/)框架，如果我执行以下任何操作，程序将以全速 (100 FPS) 运行，而不是 0 FPS：

*   从 AntTweakBar 中删除 .addText`mParams.addText( "text" );`
*   删除 AntTweakBar 绘制例程`params::InterfaceGl::draw();`
*   去除颜色的变化`glColor4f( randFloat(), 0.2, 0.3, 0.4 );`
*   去除内部推挽矩阵和平移
*   在 Intel GPU 而不是 nVidia GPU 上运行

我正在尝试解决这个问题，但这个错误对我来说似乎很奇怪。你能推荐我一种诊断它的方法吗？我无法控制 AntTweakBar，而且它非常复杂，所以我不知道里面是什么让它触发了这个 bug。只有当我在 AntTweakBar 面板上绘制了一些东西时才会发生这种情况。[我已经](http://forum.libcinder.org/topic/parameters-interface-kills-performance-0-fps#23286000001338523)在 Cinder 的论坛上报告了它，但我相信它与 Cinder 无关。是否有任何工具可以诊断为什么 OpenGL 驱动程序决定变为 0 FPS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:49:06.477

确保`ShowWindow`在任何 OpenGL 操作之前调用。

# security - MD5 哈希反转

> ID：11748848
> 
> 赞同：1
> 
> 时间：2012-07-31T20:54:08.767
> 
> 标签：security, md5

我知道不可能将 MD5 哈希值反转回其原始值。但是如何生成一组随机字符，这些字符在散列时会给出完全相同的值呢？那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:01:49.463

查找与给定 MD5 哈希匹配的消息可以通过三种方式进行：

1.  你猜原来的消息。对于密码和其他低熵消息，这通常相对容易。这就是为什么我们在这种情况下使用使用键拉伸。对于足够复杂的消息，这变得不可行。
2.  您猜测大约 2^127 次，并得到一条适合该哈希的新消息。目前这是不可行的。
3.  您利用通过加密分析获得的特定散列函数的原像攻击。对于 MD5 [，有一个，其工作因数为 2^123](http://en.wikipedia.org/wiki/MD5#Preimage_vulnerability)，但这仍然不可行。

目前对MD5的原像抗性没有有效的攻击。

有针对 MD5 的有效碰撞攻击，但它们只允许攻击者构造具有相同哈希的两条不同消息。但它不允许他为给定的哈希构造消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T20:56:24.997

是的，可能会发生碰撞（因为您从较大的空间映射到较小的空间，这是您可以假设最终会发生的事情）。其实`MD5`在这方面已经算是“破”了。
来自[维基](http://en.wikipedia.org/wiki/MD5)：

> 然而，已经证明 MD5**不是**抗碰撞；[3] 因此，MD5 不适用于依赖此属性的 SSL 证书或数字签名等应用程序。1996 年，发现 MD5 的设计存在缺陷，虽然这不是一个明显的致命弱点，但密码学家开始推荐使用其他算法，例如 SHA-1，后来发现它也很容易受到攻击。2004 年，在 MD5 中发现了更严重的缺陷，使得进一步将该算法用于安全目的值得怀疑——具体来说，一组研究人员描述了如何创建一对共享相同 MD5 校验和的文件。[4][5] 2005 年、2006 年和 2007 年在破解 MD5 方面取得了进一步进展。 [6] 2008 年 12 月，一组研究人员使用这种技术来伪造 SSL 证书的有效性，[7][8] 而 US-CERT 现在表示 MD5“

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T20:58:00.517

从某种意义上说，这是可能的。如果你有比散列本身长的字符串，那么你就会有冲突，所以这样的字符串就会*存在*。

但是，找到这样的字符串相当于反转散列，因为您会找到一个散列到特定散列的值，因此它不会比任何其他方式反转散列更可行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T20:58:10.290

专门针对 MD5？是的。

几年前，发表了一篇关于 MD5 散列漏洞利用的文章，该漏洞允许轻松生成数据，这些数据在散列时会给出所需的 MD5 散列（嗯，他们实际发现的是一种算法，可以找到具有相同散列的数据集，但你知道如何反过来使用它）。[您可以在此处](http://www.mscs.dal.ca/~selinger/md5collision/)阅读该原理的概述。没有为 SHA-2 找到类似的算法，尽管将来可能会改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T20:58:29.887

是的，你所说的叫做碰撞。任何散列机制中的冲突是当两个不同的明文在通过散列算法运行后创建相同的散列时。

# java - 如何在jar中配置maven:assembly根路径

> ID：11748849
> 
> 赞同：27
> 
> 时间：2012-07-31T20:54:23.837
> 
> 标签：java, maven, jar, maven-assembly-plugin

这是 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springframework.webflow</groupId>
    <artifactId>spring-js-resources-thin</artifactId>
    <version>2.2.1.RELEASE</version>
    <name>Spring js lib</name>
    <description>Spring javascript library without dojo</description>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.2.1</version>
                <configuration>
                    <descriptors>
                        <descriptor>src/main/assembly/assembly.xml</descriptor>
                    </descriptors>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是`assembly.xml`

```
<assembly>
    <id>js-jar</id>
    <formats>
        <format>jar</format>
    </formats>
    <fileSets>
        <fileSet>
            <directory>src/main/resources/</directory>  
            <outputDirectory>/</outputDirectory>
            <includes>
                <include>META-INF/**/*</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

问题是，每次我打开生成的jar文件（spring-js-resources-thin-2.2.1.RELEASE-js-jar.jar），根文件夹总是命名为`artifactid-version`（spring-js-resources-thin-2.2 .1.RELEASE），然后是 META-INF。

我想知道无论如何我可以使用文件名构建 jar 文件`artifactid-version.jar`，但是没有`artifactid-version`类路径中的 jar 文件，就像 maven 存储库中的每个 jar 一样。我认为应该有一个选项或方法来命名`<outputDirectory>`.

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-01T06:44:44.200

您必须告诉 maven-assembly-plugin 不要在存档中包含基本目录，这可以通过以下方式实现：

```
<assembly>
    <id>js-jar</id>
    <formats>
        <format>jar</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>src/main/resources/</directory>  
            <outputDirectory>.</outputDirectory>
            <includes>
                <include>META-INF/**/*</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

并且关于使用 maven-jar-plugin 的建议非常好，因为看起来有点误用了 maven-assembly-plugin。

在最新版本的 maven-assembly-plugin 中，您应该`.`作为根文件夹。如果你使用`/`你会得到一个警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-23T18:15:02.447

像这样将元素添加到程序集中。

```
<assembly>
    <id>js-jar</id>
    <formats>
        <format>jar</format>
    </formats>

    <baseDirectory>myBaseDir</baseDirectory>

    <fileSets>
        <fileSet>
            <directory>src/main/resources/</directory>  
            <outputDirectory>/</outputDirectory>
            <includes>
                <include>META-INF/**/*</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

如果您关闭，`<includeBaseDirectory>`那么您的存档将没有任何根。所以这取决于你想要什么。例如，我更喜欢我的 zip 文件有一个基本目录，这样如果您在解压缩之前忘记创建目录并 cd 进入其中，它就不会意外污染您所在的目录。也方便很多。

# vb.net - 通过继承实现

> ID：11748850
> 
> 赞同：0
> 
> 时间：2012-07-31T20:54:24.710
> 
> 标签：vb.net

我在实现一个接口时遇到问题，vb.net 没有通过继承来获取它，不确定它是否可能，但我相信应该有一种方法

```
Public Interface ITest

    Sub SomeMethod()

End Interface

Public Class Test
    Inherits OtherClass
    Implements ITest

End Class

Public Class OtherClass

    Sub SomeMethod()

    End Sub

End Class 
```

类“OtherClass”在另一个程序集上，该 ITest 接口不存在，我不能在那里。但是，使用 c#，您不必在每个方法上都使用 Implements 关键字，c# 会查看名称和签名。

所以基本上，我得到了“缺少成员的实现”，我所期望的是能够很好地编译，因为我继承了一个在接口上定义了相同方法的类。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:02:58.060

为了`OtherClass`实现`ITest`接口，它**需要**对该接口的引用`ITest`。

引用它后，您的 OtherClass 将如下所示：

```
Public Class OtherClass
  Implements ITest

  Sub SomeMethod() Implements ITest.SomeMethod

  End Sub

End Class 
```

# c# - 使用 c# await 后部分代码无法访问

> ID：11748852
> 
> 赞同：-1
> 
> 时间：2012-07-31T20:54:35.300
> 
> 标签：c#, asp.net-mvc-3, asynchronous, async-await

我正在为一个网站编写视频转换工具。

接下来是逻辑

*   用户上传文件
*   系统为用户转换（当然用户在转换时不应该等待）

我有一个代码：

```
public async void AddVideo(HotelVideosViewModel model)
        {
            var sourceFile = FileHandler.SaveFile(model.VideoFile);
            var fullFilePath = HttpContext.Current.Server.MapPath(sourceFile);

            await Task.Factory.StartNew(() => video.Convert(fullFilePath));

            model.FileLocation = sourceFile;
            model.IsConverted = true;
            this.Add<HotelVideos>(Mapper.Map<HotelVideosViewModel, HotelVideos>(model));
        } 
```

这开始编码：

```
await Task.Factory.StartNew(() => video.Convert(fullFilePath)); 
```

但是这之后的代码永远不会执行......有人有解决方案吗？

PS：在 video.Conver(...) 下有类似：

```
public bool Convert(string fileLocation)
{
// do staff
} 
```

**- - 更新 - -**

刚刚得到了有趣的东西。如果我要交换`video.Convert(fullFilePath)`到 Thread.Sleep(2000) 一切都开始工作。所以问题出在我认为的第二种方法中。

所以我正在添加下一个文件代码（现在草稿）：

```
using Softpae.Media;

    /// <summary>
    /// TODO: Update summary.
    /// </summary>
    public class VideoConvertManager
    {
        private readonly Job2Convert jobConverter = new Job2Convert();

        private readonly MediaServer mediaServer = new MediaServer();

        public bool Convert(string fileLocation)
        {
            this.jobConverter.pszSrcFile = fileLocation;
            this.jobConverter.pszDstFile = fileLocation + ".mp4";
            this.jobConverter.pszDstFormat = "mp4";
            this.jobConverter.pszAudioCodec = null;
            this.jobConverter.pszVideoCodec = "h264";

            if (this.mediaServer.ConvertFile(this.jobConverter))
            {
                FileHandler.DeleteFile(fileLocation);
                return true;
            };

            FileHandler.DeleteFile(fileLocation);
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:36:36.547

在完成 ASP.NET 请求之前，您需要进行`AddVideo`return及其结果。`Task``await`

**更新：**不要`Wait`在异步上调用或其他阻塞方法`Task`！[这会导致死锁。](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)

你可能会发现[我的`async`介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助。

PS`async`不会改变 HTTP 的工作方式。每个请求仍然只有一个响应。如果您希望您的最终用户（例如，浏览器）不阻塞，那么您必须实现某种队列系统，浏览器可以在其中启动视频转换作业并收到其结果的通知（例如，使用 SignalR）。`async`不会神奇地实现这一点——它只能在单个请求/响应对的上下文中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:05:24.600

添加 ConfigureAwait(false) 将防止继续在请求线程上被强制

# android - 使用 OpenCV 进行模板匹配

> ID：11748855
> 
> 赞同：2
> 
> 时间：2012-07-31T20:54:50.703
> 
> 标签：android, opencv, template-matching

我试图在我的 Android 手机摄像头中抓取一张图像，使用该图像中的 ROI 定义一个模板，然后在抓取连续图像时，进行模板匹配以找到模板的新位置。

问题是模板匹配似乎没有运行：`maxVal`值一直在 0.99 左右，而`maxLoc`正是模板的原始位置（`X`下面的`Y`）。

我究竟做错了什么？

这是抓取帧时的代码：

```
protected Bitmap processFrame(VideoCapture capture) {  
    capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);  
    Imgproc.cvtColor(mRgba, mGray, Imgproc.COLOR_BGRA2GRAY);  
    Mat corrMap = new Mat();  
    Imgproc.matchTemplate(mGray, template, corrMap, Imgproc.TM_CCOEFF_NORMED);  
    MinMaxLocResult locRes = Core.minMaxLoc(corrMap);  
    double maxVal = locRes.maxVal;  
    Point maxLoc = locRes.maxLoc;  
    Scalar c = new Scalar(255, 0, 0, 255);  
    Core.putText(mRgba, Double.toString(maxVal), new Point(100,100), 3, 1, c, 2);  
    Core.putText(mRgba, Double.toString(maxLoc.x), new Point(100,130), 3, 1, c, 2);  
    Core.putText(mRgba, Double.toString(maxLoc.y), new Point(100,160), 3, 1, c, 2);  
} 
```

这是生成模板的代码：

```
X = 100;  
Y = 100;  
H = 150;  
W = 200;  
template = mGray.submat(Y-H/2, Y+H/2, X-W/2, X+W/2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:27:32.207

我可能离这里很远，但我相信 submat 方法返回一个指向 mGray 的子矩阵的指针。因此，由于 mRgba 始终被复制到 mGray，因此您的模板会随着帧的变化而变化，但 mGray 永远不会重新分配。在这种情况下，解决方案是制作 mGray 子矩阵的副本。在 C++ 中，这将类似于：

```
mGray.submat(Y-H/2, Y+H/2, X-W/2, X+W/2).copyTo(template); 
```

# c# - 锐化 bundle sharpen.core 的激活器 sharpen.core.Sharpen 无效

> ID：11748857
> 
> 赞同：2
> 
> 时间：2012-07-31T20:55:00.237
> 
> 标签：c#, java, sharpen-tool

我正在尝试运行 Sharpen 将一些 Java 代码转换为 c#。以下是我正在遵循的说明、环境和问题陈述的详细信息。

指令如下：

*   [http://www.pauldb.me/post/14916717048/a-guide-to-sharpen-a-great-tool-for-converting-java](http://www.pauldb.me/post/14916717048/a-guide-to-sharpen-a-great-tool-for-converting-java)
*   [http://community.versant.com/documentation/reference/db4o-7.12/net2/reference/index_Left.html#CSHID=sharpen%2Fhow_to_setup_sharpen.htm|StartTopic=Content%2Fsharpen%2Fhow_to_setup_sharpen.htm|SkinName=RedVersant](http://community.versant.com/documentation/reference/db4o-7.12/net2/reference/index_Left.html#CSHID=sharpen%2Fhow_to_setup_sharpen.htm|StartTopic=Content%2Fsharpen%2Fhow_to_setup_sharpen.htm|SkinName=RedVersant)

环境：

*   日食 4.2.0
*   JDK 1.7 (jdk1.7.0_03)

问题：

我能够在 Eclipse 中设置项目并运行构建文件来转换代码。在执行构建文件的目标“锐化文档”时，它会在 eclipse 配置日志中出错并显示以下消息。

任何帮助都感激不尽。提前致谢。

```
!ENTRY org.eclipse.osgi 2 0 2012-07-31 13:23:04.507 
```

！信息
!STACK 0 org.osgi.framework.BundleException: 用于 bundle sharpen.core 的激活器 sharpen.core.Sharpen 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:172) 处无效.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679) 在 org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381) 在 org.eclipse.osgi .framework.internal.core.AbstractBundle.start(AbstractBundle.java:300) 在 org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440) 在 org.eclipse.osgi.internal.loader.BundleLoader .setLazyTrigger(BundleLoader.java:263) 在 org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:236) 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle .java:1212) at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174) at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905) at org .eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243) 在 org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55) 在 org.eclipse.equinox.internal.app .EclipseAppHandle.run(EclipseAppHandle.java:191) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start (EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter。在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke ( NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org.eclipse.equinox.launcher.Main.invokeFramework (Main.java:629) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438) 在 org.eclipse。 equinox.launcher.Main.main(Main.java:1414) at org.eclipse.core.launcher.Main.main(Main.java:34) 原因：java.lang.ClassNotFoundException:sharpen.core.Sharpen at org. eclipse.osgi.internal.loader.BundleLoader。findClassInternal(BundleLoader.java:501) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) 在 org.eclipse.osgi.internal.loader.BundleLoader.loadClass (BundleLoader.java:340) 在 org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229) 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java :165) ... 25 更多根异常：java.lang.ClassNotFoundException:sharpen.core.Sharpen at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501) at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412) 在 org.eclipse.osgi.internal.baseadaptor。 DefaultClassLoader.loadClass(DefaultClassLoader.java:107) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340) at org.eclipse .osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229) 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:165) 在 org.eclipse.osgi.framework .internal.core.BundleContextImpl.start(BundleContextImpl.java:679) 在 org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381) 在 org.eclipse.osgi.framework.internal.core .AbstractBundle.start(AbstractBundle.java:300) at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440) at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java: 263) 在 org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:236) 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212) 在 org .eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174) 在 org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905) 在 org.eclipse.core.internal .registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243) 在 org.eclipse.core.internal.registry.ConfigurationElementHandle。createExecutableExtension(ConfigurationElementHandle.java:55) 在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java: 110) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353) 在 org.eclipse. .core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl .invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org.eclipse.equinox。launcher.Main.invokeFramework(Main.java:629) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438)在 org.eclipse.equinox.launcher.Main.main(Main.java:1414) 在 org.eclipse.core.launcher.Main.main(Main.java:34)

!ENTRY org.eclipse.osgi 4 0 2012-07-31 13:23:04.737 !MESSAGE 应用程序错误!STACK 1 org.eclipse.core.runtime.CoreException：插件sharpen.core 无法加载类sharpen.core .SharpenApplication。在 org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:176) 在 org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194) .core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905) 在 org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243) 在 org.eclipse.core.internal.registry.ConfigurationElementHandle org.eclipse.equinox.internal.app 上的 .createExecutableExtension(ConfigurationElementHandle.java:55)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:26:19.793

对于记录：

安装 Java 6 后问题得到解决。感谢 Anders 指出这一点。

# sql - Windows Server 2003 ENT SP2 使用什么版本的 JET？

> ID：11748858
> 
> 赞同：1
> 
> 时间：2012-07-31T20:55:02.213
> 
> 标签：sql, ms-access, foreign-keys, jet

通常，当您在[Wikipedia](http://en.wikipedia.org/wiki/Microsoft_Jet_Database_Engine)上查看软件时，您可以找到有关产品版本号以及版本之间差异的信息。

在 JET Wikipedia 页面中，我找到了相应的 MS Access 版本，并希望找到相应的 JET 引擎版本号……但它不存在，而是有破折号！

![在上面的 Wikipedia 链接中，缺少 MS Access 2003 的 JET 版本号，它只是一个破折号......](../Images/3b1cf851743ff2a380321ba065aabbc4.png)

稍微扫描一下文章的文字，我发现：

> “从 Windows 2000 到 Windows 7 的每个版本的 Windows 中都包含 Jet……Access 2003 依靠操作系统的 Jet 引擎组件来进行数据存储和查询处理。” -[维基百科、Microsoft Jet 数据库](http://en.wikipedia.org/wiki/Microsoft_Jet_Database_Engine#History)

在这一点上，我不确定 Windows 2000-7 的版本是否也包括 Windows Server 版本。

如果它确实包含它们，那么 MS Access 将在 Windows Server 2003 Enterprise Edition SP2 上使用哪个版本的 JET？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:57:25.243

```
Msjet40.dll Jet 4.0 release level
version 
4.0.2927.4  Service Pack 3 (SP3)
4.0.3714.7  Service Pack 4 (SP4)
4.0.4431.1 or 
4.0.4431.3  Service Pack 5 (SP5)
4.0.6218.0  Service Pack 6 (SP6)
4.0.6807.0  Service Pack 6 (SP6) shipped only with Windows Server 2003
4.0.7328.0  Service Pack 7 (SP7)
4.0.8015.0  Service Pack 8 (SP8)
4.0.8618.0  Windows XP SP2 and Security Bulletin MS04-014
4.0.9025.0  Windows Server 2003 SP1 and Update Rollup 1 for Windows 2000 SP4
4.0.9505.0  Windows Server 2003 SP2
4.0.9511.0  Windows XP SP3 and Security Bulletin MS08-028
4.0.9635.0  Windows Vista
4.0.9704.0  Windows Vista   SP1 and Windows Server 2008 
```

[如何确定 Jet 4.0 的当前版本级别](http://support.microsoft.com/kb/239114)

# c# - ASP.NET 自定义验证器未触发

> ID：11748863
> 
> 赞同：0
> 
> 时间：2012-07-31T20:55:30.950
> 
> 标签：c#, asp.net, validation

这是交易：我构建了一个自定义验证器，只有在文本框中有输入时才会触发。当它触发时，它应该测试框中的文本是否为整数，如果不是，它将拒绝它。不过，它不会触发，我正试图找出原因。

我将这个 void 放在部分 c# 类的主体中：

```
 protected void intValidate_Validate(object sender, ServerValidateEventArgs arg)
    {
        int num;
        bool isNum = int.TryParse(arg.ToString(), out num);

        if(arg.Value.Length>0){
            if (isNum)
             {
                arg.IsValid = true;
             }
             else
             {
                arg.IsValid = false;
             }
        }
        else{
            arg.IsValid=true;
        }
    } 
```

验证器的代码如下：

```
 <div class="adult">
            <label>Adults ($10)</label>
            <asp:TextBox runat="server" ID="wAdultLunch" class="adultLunch" MaxLength="2" />
            <asp:CustomValidator ID="intValidate" ControlToValidate="wAdultLunch" ErrorMessage="Invalid number" OnServerValidate="intValidate_Validate" Display="Static" runat="server" EnableClientScript="False" ValidateEmptyText="True"></asp:CustomValidator>
 </div> 
```

洞察力将不胜感激！

**编辑：我附上了下面的回发代码**

```
<asp:Button ID="wSubmit" runat="server" Text="Submit" OnClientClick="return validateForm();" causesvalidation="true"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:29:20.303

我不知道它是否相关，但我遇到了自定义验证器未触发的问题。我让它验证一个下拉列表，它的默认值是一个空字符串。我不得不设置

```
ValidateEmptyString="true" 
```

然后它开始工作得很好。

您还可以调用 Validate() 函数并从自定义验证器控件中读取 IsValid 属性。但是，页面的验证功能应该可以正常工作，并且不需要这样的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:24:52.073

您正在对错误的事情进行解析。 `arg.ToString()`会给你字符串`"System.Web.UI.WebControls.ServerValidateEventArgs"`，当你真正想要的时候`arg.Value`（这已经是一个字符串）

所以，而不是...

```
bool isNum = int.TryParse(arg.ToString(), out num); 
```

将其更改为（注意`.Value`）...

```
bool isNum = int.TryParse(arg.Value, out num); 
```

尽管它比实际需要的复杂得多。整个事情可以像这样更全面地重写......

```
protected void intValidate_Validate(object sender, ServerValidateEventArgs arg)
{
    int num;
    arg.IsValid = int.TryParse(are.Value, out num);
} 
```

这是因为如果转换成功， [TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)将返回 true，否则返回 false。

最后的想法是，所有这些都可以使用`<asp:RequiredFieldValidator ...>`,`<asp:CompareValidator Operator="DataTypeCheck" Type="Integer" ...>`和`<asp:RangeValidator ...>`验证器控件来实现。

* * *

**更新**

正如 OP 指出的那样，当文本框为空时，他不希望出现错误，所以试试这个......

```
protected void intValidate_Validate(object sender, ServerValidateEventArgs arg)
{
    if (args.Value.Length > 0)
    {
        int num;
        arg.IsValid = int.TryParse(are.Value, out num);
    }
    else
    {
        arg.IsValid = true;
    }
} 
```

@HansKesting 已经指出......只有在所有客户端验证都通过时才会调用它。一旦客户端验证失败，将表单提交回服务器也会被取消。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:00:29.710

我想如果验证通过，你有一个服务器端事件要执行。例如：按钮单击事件。如果您检查 Page.IsValid 则如果验证通过则它将为假，那么 Page.IsValid 将为真。您需要使用 Page.IsValid 来检查验证是否通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:45:55.843

在前端尝试将 CausesValidation 属性设置为 true，如下所示。看看是否有帮助。

```
<asp:Button ID="btnSubmit" Text="Submit" CausesValidation="true" runat="server" /> 
```

# c# - 在运行时编译一个 C# 数组并在代码中使用它？

> ID：11748867
> 
> 赞同：4
> 
> 时间：2012-07-31T20:55:45.307
> 
> 标签：c#, compiler-construction, compilation, runtime

[我知道 C# 代码可以在运行时使用 C# 编译](https://stackoverflow.com/a/596097/753341?sfb=2&h=KAQFluLNQAQEI6gNp07s4t44D7iFo_fI-sZuc664WyDq_8A&enc=AZNWv2vDdGagMQwrHXw6jc2U3DRVpXlyO8PHVaM718HZ3Pyvw-N7_IdNU7CtGB0-SBz50Sobla7SEdmWvOWCzh93)。但是，由于我几分钟前才读到它，所以我对此非常不自信。我通过例子学得更好。所以告诉我。如果我想编译类似的东西：

```
// MapScript.CS
String[] LevelMap = {
"WWWWWWWWWWWWWWWWWWW",
"WGGGGGGGGGGGGGGGGGW",
"WGGGGGGGGGGGGGGGGGW",
"WWWWWWWWWWWWWWWWWWW" }; 
```

并在我的代码中使用这个数组，我该怎么做？

在伪代码中，我想做这样的事情：

```
Open("MapScript.CS");
String[] levelMap = CompileArray("levelMap");
// use the array 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:00:03.627

LINQ 表达式树可能是这样做的最友好的方式：也许是这样的：

*   [http://msdn.microsoft.com/en-us/library/system.linq.expressions.newarrayexpression.aspx](http://msdn.microsoft.com/en-us/library/system.linq.expressions.newarrayexpression.aspx)
*   [http://msdn.microsoft.com/en-us/library/bb357903.aspx](http://msdn.microsoft.com/en-us/library/bb357903.aspx)

您还可以使用 OpCodes ( [OpCodes.Newarr](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.newarr.aspx) ) 生成 IL。如果您对基于堆栈的编程感到满意，这很容易（否则，可能会很有挑战性）。

最后，您可以使用 CodeDom（类似于您的伪代码），但是——虽然是最强大的工具——它对于快速动态方法不太理想。由于您与编译器密切合作，因此它需要文件系统权限和手动参考解析。

来自 MSDN 的示例

```
var ca1 = new CodeArrayCreateExpression("System.Int32", 10);                        
var cv1 = new CodeVariableDeclarationStatement("System.Int32[]", "x", ca1); 
```

[Source - 使用代码 DOM 创建数组](http://msdn.microsoft.com/en-us/library/system.codedom.codearraycreateexpression.aspx)

如果您想要一个字符串的直接原始编译，您可以省略语句的面向对象处理，而只构建一个大字符串。就像是：

```
var csc = new CSharpCodeProvider( new Dictionary<string, string>() { { "CompilerVersion", "v4.0" } } );
var cp = new CompilerParameters() {
    GenerateExecutable = false,
    OutputAssembly = outputAssemblyName,
    GenerateInMemory = true
};

cp.ReferencedAssemblies.Add( "mscorlib.dll" );
cp.ReferencedAssemblies.Add( "System.dll" );
cp.ReferencedAssemblies.Add( "System.Core.dll" );

StringBuilder sb = new StringBuilder();

// The string can contain any valid c# code, but remember to resolve your references

sb.Append( "namespace Foo{" );
sb.Append( "using System;" );
sb.Append( "public static class MyClass{");

// your specific scenario
sb.Append( @"public static readonly string[] LevelMap = {
    ""WWWWWWWWWWWWWWWWWWW"",
    ""WGGGGGGGGGGGGGGGGGW"",
    ""WGGGGGGGGGGGGGGGGGW"",
    ""WWWWWWWWWWWWWWWWWWW"" };" );

sb.Append( "}}" );

// "results" will usually contain very detailed error messages
var results = csc.CompileAssemblyFromSource( cp, sb.ToString() ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T21:02:33.107

您似乎想要编译 C# 代码，以便将文本 (C#) 文件中的字符串列表加载到字符串数组变量中。

您不需要 ac# 编译器即可将文本文件中的字符串列表加载到内存中的数组中。只需在文本文件中每行放置一个字符串，然后在代码中逐行读取文件，将每一行添加到`List<String>`. 完成后，`list.ToArray()`将生成您的字符串数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:00:51.793

您可以创建一个`CompiledLevel`继承自**ILevel**的类，该类提出一个静态属性*Level*类型`String[]`。

然后，在编译之前，创建一个`CompiledLevel.cs`从填充了*LevelMap* (wwwggg...) 内容的类模板构建的假文件（有点连接）。

一编译，就编译类调用*Level*属性。

创建一个服务/工厂/任何让它花哨的东西:)

# ruby-on-rails - ActiveModel::MassAssignmentSecurity

> ID：11748870
> 
> 赞同：0
> 
> 时间：2012-07-31T20:56:00.220
> 
> 标签：ruby-on-rails, ruby, controller

当我尝试运行我的应用程序以保存登录名和密码详细信息时，我得到一个 ActiveModel::MassAssignmentSecurity::Error。收到以下错误

无法批量分配受保护的属性：名称、密码、password_confirmation、salt app/controllers/users_controller.rb:43:in `new' app/controllers/users_controller.rb:43:in`create'

这是控制文件中的代码

```
class UsersController < ApplicationController
  # GET /users
  # GET /users.json
  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  # GET /users/1
  # GET /users/1.json
  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/new
  # GET /users/new.json
  def new
    @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/1/edit
  def edit
    @user = User.find(params[:id])
  end

  # POST /users
  # POST /users.json
  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /users/1
  # PUT /users/1.json
  def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, notice: 'User was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /users/1
  # DELETE /users/1.json
  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_to do |format|
      format.html { redirect_to users_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:01:41.127

[在Stack Overflow](https://stackoverflow.com/a/10623274/1530410)中回答并感谢[Damien Mathieu](https://stackoverflow.com/users/122080/damien-mathieu)

在您的模型中，您需要添加`tag_attributes`到`attr_accessible`调用中。

例如 ：

```
class User < ActiveRecord::Base
  attr_accessible :tags_attributes
end 
```

如果您已经调用过一次，则可以将此字段添加为方法的参数，或者进行第二次调用。这两个选项是等效的。

直到几个月后，必须指定所有可访问的参数才成为默认设置。本指南已更新以反映默认值的更改。但是新版本还没有部署，所以没有具体说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:02:09.820

我认为您忘记在模型中添加 attr_accessible 参数。查看[Rails API](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html "很棒的信息！")了解有关 attr_accessbile 及其保护内容的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:27:41.273

就像 waldyr.ar 说的，你也可以使用 attr_protected

# multithreading - 多核服务器上的mongodb map reduce

> ID：11748872
> 
> 赞同：4
> 
> 时间：2012-07-31T20:56:13.940
> 
> 标签：multithreading, mongodb, parallel-processing, mapreduce, nodes

我有一个带有数千条记录的 mongodb，其中包含很长的向量。我正在使用某种算法寻找输入向量与我的 MDB 数据集之间的相关性。

伪代码：

```
function find_best_correlation(input_vector)
    max_correlation = 0
    return_vector = []
    foreach reference_vector in dataset:
        if calculateCorrelation(input_vector,reference_vector) > max_correlation then:
            return_vector = reference_vector
    return return_vector 
```

这是 map-reduce 模式的一个非常好的候选者，因为我不关心计算的运行顺序。

问题是我的数据库在一个节点上。我想同时运行多个映射（我有一台 8 核机器）

据我了解，MongoDb 每个节点只使用一个执行线程——实际上我是串行运行我的数据集。这个对吗？

如果是这样，我可以配置每次 map-reduce 运行的进程/线程数吗？如果我管理并行运行 map-reduce 的多个线程，然后汇总结果，我会显着提高性能（有没有人尝试过）？如果没有 - 我可以在同一个节点上对我的数据库进行多次复制并“欺骗”mongoDb 以在 2 个复制上运行吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T22:08:54.703

MongoDB 中的 Map reduce 使用 Spidermonkey，一种单线程 Javascript 引擎，因此无法配置多个进程（也没有“技巧”）。有一个使用多线程 JS 引擎的 JIRA 票证，您可以在此处关注： [https ://jira.mongodb.org/browse/SERVER-2407](https://jira.mongodb.org/browse/SERVER-2407)

如果可能，我会考虑研究新的聚合框架（在 MongoDB 版本 2.2 中可用），它是用 C++ 而不是 Javascript 编写的，并且可能会提供性能改进： [http ://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

# facebook - 如何按赞对 FB 分享进行排序

> ID：11748874
> 
> 赞同：0
> 
> 时间：2012-07-31T20:56:29.670
> 
> 标签：facebook, sorting, share

是否可以通过每个共享的链接对 fb 共享进行排序，例如状态更新？

我将发送一个示例：

假设我在我的时间线（或粉丝专页时间线）中更新了一些内容，可能有 100 人分享这个，我想知道，有更多喜欢的分享...

是否可以获取页面共享详细信息，如下所示： [http ://www.facebook.com/shares/view?id=449680915063964](http://www.facebook.com/shares/view?id=449680915063964)

但是 FBQuery 不分析这个..

等待中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:01:25.273

不幸的是，无法通过 Facebook Open Graph api 获取此类信息

# java - 向 Scoreloop 提交较小的结果

> ID：11748880
> 
> 赞同：1
> 
> 时间：2012-07-31T20:57:02.557
> 
> 标签：java, android, scoreloop

在一个 Android 应用程序中，我将 Scoreloop 包含在一个全球排行榜中。我有3种模式。其中2个正确（如果达到更高的结果，将提交分数）。但是第三种模式应该以另一种方式工作。如果结果小于/小于服务器上的分数，则应提交。我真的无法让它工作......遗憾的是，当我在 Scoreloop 论坛上发布这个问题时，我还没有收到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:12:05.393

我面临同样的问题。我试图向排行榜提交较低的分数，因为我的玩家在排行榜上的排名是双向动态的。

但是，Scoreloop 似乎不想承认比之前提交的分数更低的分数。

```
Example: 
    Update A : 0    Coins - Scoreloop shows  0   Coins - DESIRED
    Update B : 8000 Coins - Scoreloop shows 8000 Coins - DESIRED 
    Update C : 4500 Coins - Scoreloop shows 8000 Coins - UNDESIRED 
```

我不记得在 Scoreloop 文档中阅读过这种行为。还是在某处提到过，我错过了？

# node.js - Nodejitsu + HTTPS

> ID：11748881
> 
> 赞同：1
> 
> 时间：2012-07-31T20:57:22.493
> 
> 标签：node.js, ssl, https, websocket, nodejitsu

当我访问[https://myapp.nodejitsu.com](https://myapp.nodejitsu.com)时，我神奇地启用了 ssl。但是我的应用程序的 websocket 传输现在似乎被破坏了。我需要做什么才能通过这个 https 启用 websockets，还有什么可能被破坏？他们在做什么来启用 SSL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:20:34.523

Nodejitsu 使用[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)将 https 代理到 http 到您的应用程序。代理支持 http 和 https 模式下的 websocket。因此，只要您的应用程序可以通过 http 与 websocket 通信，就可以了。

我建议向我们发送电子邮件至 support@nodejitsu.com 并提供详细信息。

——乔什

# jquery - 获取当前已点击的表单内按钮的类

> ID：11748882
> 
> 赞同：0
> 
> 时间：2012-07-31T20:57:22.977
> 
> 标签：jquery

好的，我想在表单中获取当前单击按钮的类，我尝试了这个，所以我有这个代码，但不幸的是，它不起作用，而是弹出一个带有“未定义”文本的警报框。应该是，会弹出一个带有当前单击按钮的类的警报框。

```
$('#aholder form').submit(function(){
    var button = $(this).find("button").attr("class");
    alert(button);
    return false;
}); 
```

希望有人可以提供帮助，哦，我有几个表单，我在每个表单上都有一个独特的类的每个按钮，我想获取表单内部的当前单击按钮的类，所以这里是 html 的东西寻找..

```
<div id="aholder">
    <form id="gs" action="processor.php" method="POST">
        <input type="text" name="input" value="input1" />
        <button class="globalsettings">Global Settings</button>
    </form>
    <form id="pp" action="processor.php" method="POST">
        <input type="text" name="input" value="input2" />
        <button class="Postapage">Post a page</button>
    </form>
    <form id="logoff" action="processor.php" method="POST">
        <input type="text" name="input" value="input3" />
        <button class="Logout">Logout</button>
    </form>
</div> 
```

PS：我对任何想法、建议、建议和任何可以添加的内容都持开放态度。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:15:03.667

示例代码似乎也对我有用，但如果你不想要按钮类，为什么不将事件绑定到按钮：

```
$('button','#aholder form').on('click', function(e){
    var button = $(e.target).attr("class");
    alert(button);
    return false;
});​ 
```

# windows - 如何使这种 rails 方法 - windows 兼容？

> ID：11748885
> 
> 赞同：0
> 
> 时间：2012-07-31T20:57:31.970
> 
> 标签：windows, ruby-on-rails-3, unix, gem

我已经获取了名为 socialstream 的 gem 的最新代码库，但我注意到 Windows 机器上的文件上传存在问题。问题似乎与下面的代码有关...

```
# Monkey patches to Ruby on Rails
#
# Use unix file util to prove the content type sent by the browser
class ActionDispatch::Http::UploadedFile
  def initialize_with_magic(*args, &block)
    initialize_without_magic(*args, &block)

    if (unix_file = `which file`.chomp).present? && File.exists?(unix_file)
      `#{ unix_file } -v 2>&1` =~ /^file-(.*)$/
      version = $1

      @content_type =
        if version >= "4.24"
          `#{ unix_file } -b --mime-type #{ @tempfile.path }`.chomp
        else
          `#{ unix_file } -bi #{ @tempfile.path }`.chomp =~ /(\w*\/[\w+-\.]*)/
          $1
        end
    end
  end

  alias_method_chain :initialize, :magic
end 
```

错误如下

> NoMethodError (undefined method `chomp' for nil:NilClass): social_stream-base (0.22.0) lib/rails/social_stream.rb:8:in`initialize_with_magic' actionpack (3.2.5) lib/action_dispatch/http/upload.rb:39:in `new' actionpack (3.2.5) lib/action_dispatch/http/upload.rb:39:in`normalize_parameters' actionpack (3.2.5) lib/action_dispatch/http/parameters.rb:73:in `block in normalize_parameters' actionpack (3.2.5) lib/action_dispatch/http/parameters.rb:73:in`each' actionpack ( 3.2.5) lib/action_dispatch/http/parameters.rb:73:in `normalize_parameters' actionpack (3.2.5) lib/action_dispatch/http/upload.rb:41:in`normalize_parameters' actionpack (3.2.5) lib/action_dispatch/http/parameters.rb:73:in `block in normalize_parameters' actionpack (3.2.5) lib/action_dispatch/http/parameters.rb:73:in`each' actionpack (3.2.5) lib/action_dispatch/ http/parameters.rb:73:in `normalize_parameters' actionpack (3.2.5) lib/action_dispatch/http/upload.rb:41:in`normalize_parameters'

有没有办法让这个在 Windows 上工作，或者通过使用 gem，我可以在 Windows 上安装的东西，或者重写文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:17:00.690

删除或注释掉该行：

```
alias_method_chain :initialize, :magic 
```

这将阻止它挂接到 ActionDispatch::HTTP::UploadFile#initialize

这也意味着您不会获得“证明”内容类型的好处，但我不知道这对您的应用程序是否真的有必要。

# jquery - 为幻灯片添加绝对定位的标题-jQuery 插件？

> ID：11748888
> 
> 赞同：0
> 
> 时间：2012-07-31T20:57:48.140
> 
> 标签：jquery, css, slideshow

我正在帮助一家公司将一些 Flash 幻灯片和地图转移到适用于所有平台的 jQuery 演示文稿中。

以前的开发人员使用 jqBanner 插件在节目底部的半透明层上提供字幕，并因这种违规行为而被解雇。最初的 Flash 将这些标题放置在**不同的位置**，具体取决于照片。

我的问题是是否有一个 jQuery 插件支持在**多个位置**定位标题，或者哪个是修改的良好起点？重申一下 - 我希望找到的是一个幻灯片，它可以轻松地分别指定每个标题的位置，并与幻灯片的变化同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:11:52.823

给图像/内容的容器一个“相对”的位置，并且在向该容器附加/添加停留并给它一个绝对位置时，您可以将它定位在任何地方，但初始约束将基于父元素的定位

```
<div style="position:realitive" id="main_wrap">
   <img src="img.jpg">
   <div style="position:absolute;top:10px;left:50px;z-index:10;">Text</div>
</div> 
```

举个简单的例子...当然，因为您使用幻灯片放映样式，所以我会用无序列表替换图像，其中列表中的每个子项都包含您想要的图像，然后我会旋转类似于此方法的图像我以前帮助过某人[http://jsfiddle.net/BsREB/](http://jsfiddle.net/BsREB/)

然后使用 jQuery、javascript 等，您可以根据需要动态更改停留文本和位置。

# java - 关于 Spring 框架实现的建议

> ID：11748889
> 
> 赞同：1
> 
> 时间：2012-07-31T20:57:50.653
> 
> 标签：java, spring, servlets

我有一个运行 SQL Server /IIS 的 Windows 服务器，并且我们计划为下一个应用程序创建一个 Java Web 应用程序。我发现 Spring Framework / Hibernate 组合是一个引人注目的选项，但我可以看到，只有在我的开发阶段，它才会消耗大量内存和处理器，并且我遇到了很多 PerGem 异常，当然我已经调整了 Java Opts Pergem Space 等的增加，但我可以看到，在我的开发环境（NetBeans / Maven）中它变得非常慢，等待 Tomcat 识别 XML，重新部署应用程序，它比经典的 servlet MVC 方法更慢，

我的问题是：¿在具有适度硬件/内存配置的服务器中，已经运行的服务是 Spring / Hibernate 组合发挥良好还是更好我选择其他适度的方式（JSF 或 Servlets JSP？¿意见，经验？，现在有没有预算购买新服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:09:12.577

Spring MVC 与 JSF 在内存消耗上不应该有很大的不同。用 spring-jdbc 替换 hibernate 可能会让你安全一点，但是如何使用普通的 Spring/Hibernate 应用程序退出 PermGem 似乎很奇怪。你用的是哪个版本的tomcat？你只是重新部署/热插拔，还是有时也重新启动？Tomcat 长期以来一直存在热插拔的内存问题。

# jquery - 仅在动画完成后激活按钮上的事件

> ID：11748896
> 
> 赞同：0
> 
> 时间：2012-07-31T20:58:05.753
> 
> 标签：jquery, animation

我创建了一个按钮，当它被点击时，它会移动一些图像，但是当我**快速点击**按钮时，jQuery 会在图像的移动上创建一个**错误**。所以我想**禁用按钮**，直到 .animate() 函数没有完成。我尝试编写此代码但不正确。

```
var next = $('.next');

function nextAction(e){
    e.preventDefault();
    next.off('click');
    if(pellicle.css('left').replace(/[^-\d\.]/g, '') <= -(stepTotalWidth - screenWidth)){
        pellicle.animate({
            left:'0'
        },1000, function(){next.on('click', nextAction);});
    }
    else {
        pellicle.animate({
            left:'-=' + screenWidth
        },1000);
    }
}

next.on('click', nextAction); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:12:59.893

您可以随心所欲地附加和分离事件，我没有得到什么问题，除了在动画运行时“关闭”事件时点击期间有问题。

为此，您可以附加另一个阻止默认的事件，第二个将运行动画

```
function nextAction(e){
    next.off('click.gallery'); //detach by namespace
    next.off('click', nextAction); //detach by link on function

    //Your code and again attach animation click
}

next.on('click', function(e){ 
  e.preventDefault(); 
});

next.on('click.gallery', nextAction); 
/* .gallery is not necessary if you will detach events 
by the link on the function that attached to that */ 
```

第二件事是`pellicle.css('left')`在这种情况下总是返回 ***px 比正则表达式快一点，在这种情况下`parseInt(pellicle.css('left'), 10) || 0`它总是会给你一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:22:00.063

Flops的完美解决方案，这里有完整的代码

```
//next button
function nextAction(e){
    next.off('click', nextAction); //detach by link on function
    e.preventDefault();
    if(parseInt(pellicle.css('left')) <= -(stepTotalWidth - screenWidth)){
        pellicle.animate({
            left:'0'
        },1000, function(e){next.on('click', nextAction);});
    }
    else {
        pellicle.animate({
            left:'-=' + screenWidth
        },1000, function(e){next.on('click', nextAction);});
    }
}
next.on('click', nextAction); 
```

# c# - 如何更改另一个程序窗口的按钮文本

> ID：11748901
> 
> 赞同：2
> 
> 时间：2012-07-31T20:58:19.430
> 
> 标签：c#, winforms

我的任务是更改窗口中按钮的文本。我没有**也无法**访问源代码，因为它归我们付费订阅的公司所有。

如何在没有源代码的情况下更改按钮文本？我正在尝试使用 pInvoke 并遇到问题。窗口标题会根据您与谁一起工作而变化：

“订单输入表 - LASTNAME, FIRSTNAME”

所以窗口标题可能对我在 win32 调用中不可用

`FindWindow(string lpClassName, string lpWindowName);`

我知道这两个参数都是可选的。我正在使用 Spy++，但我不确定用于`lpClassName`. 我看到列出的类名是`#32770 (Dialog)`. 我试了一下，得到的回报是 0。

`IntPtr windowHandle = FindWindow("#32770 (Dialog)", null);`

如何从另一个进程更改按钮文本？

**更新**

根据 MSDN，我应该能够通过[SetWindowText](http://msdn.microsoft.com/en-us/library/ms633520%28v=vs.85%29)实现这一点。

> 更改指定窗口标题栏的文本（如果有的话）。如果指定的窗口是控件，则更改控件的文本。但是，SetWindowText 不能更改另一个应用程序中控件的文本。

我不能使用 SetWindowText 做我想做的事。是否可以使用其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:18:56.723

```
 [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);

    [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    static extern int GetWindowTextLength(IntPtr hWnd);

    [DllImport("user32", SetLastError = true)]
    public static extern int EnumWindows(CallBack x, int y);

    [DllImport("user32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool EnumChildWindows(IntPtr hwndParent, CallBack lpEnumFunc, IntPtr lParam);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern IntPtr SendMessage(HandleRef hWnd, uint Msg, IntPtr wParam, string lParam);

    public const uint WM_SETTEXT = 0x000C;

    public delegate bool CallBack(int hwnd, int lParam);

    public static void Main()
    {
        CallBack windowsCallback = new CallBack(IterateWindows);
        EnumWindows(windowsCallback, 0);        
    }

    public static bool IterateChildren(int hwnd, int lParam)
    {
        string newButtonText = "Some text";
        bool continueIteratingChildren = true;
        //Console.WriteLine("Child handle: " + hwnd);

        int length = GetWindowTextLength((IntPtr)hwnd);
        StringBuilder sb = new StringBuilder(length + 1);
        GetWindowText((IntPtr)hwnd, sb, sb.Capacity);
        //Console.WriteLine(sb);

        if (sb.ToString().StartsWith("My Button Text "))
        {
            HandleRef hrefHWndTarget = new HandleRef(null, (IntPtr)hwnd);
            SendMessage(hrefHWndTarget, WM_SETTEXT, IntPtr.Zero, newButtonText);
            continueIteratingChildren = false;
        }
        return continueIteratingChildren;
    }

    public static bool IterateWindows(int hwnd, int lParam)
    {
        bool continueIteratingWindows = true;
        int windowTextLength = GetWindowTextLength((IntPtr)hwnd);
        StringBuilder sb = new StringBuilder(windowTextLength + 1);
        GetWindowText((IntPtr)hwnd, sb, sb.Capacity);

        if (sb.ToString().StartsWith("My Window Caption"))
        {
            //Console.Write("Window handle is ");
            //Console.WriteLine(hwnd);
            //Console.WriteLine(sb);
            //Console.WriteLine(Marshal.GetLastWin32Error());
            var childrenCallback = new CallBack(IterateChildren);
            EnumChildWindows((IntPtr)hwnd, childrenCallback, IntPtr.Zero);
            continueIteratingWindows = false;
        }
        return continueIteratingWindows;
    } 
```

# html - 垂直对齐内联元素中的文本

> ID：11748903
> 
> 赞同：9
> 
> 时间：2012-07-31T20:58:26.653
> 
> 标签：html, css

# 问题

所以我正在创建一个包含标签`div`的简单导航菜单。`a`目前它看起来像这样：

![在此处输入图像描述](../Images/0f35f42cc9e037d1a82af0b8dd52a6db.png)

以下是我的 HTML 和 CSS：

HTML

```
<div id="tabcontent-container">
    <div class="tabcontent-menu">
        <a href="#">WLAN Jumpstart</a>
        <a href="#">Mobility</a>
        <a href="#">Guest Access Jumpstart</a>
    </div>
</div> 
```

CSS

```
#tabcontent-container { padding: 15px 0px; position: relative; text-align: center; border-radius: 25px; -webkit-border-radius: 25px; }
.tabcontent-menu {}
.tabcontent-menu a { text-decoration: none; color: white; font-size: 30px; border-right: 1px solid white; line-height: 33px; padding: 0 22px; display: inline-block; width: 200px; height: 70px; vertical-align: top; }
.tabcontent-menu a:last-child { border:none; }
.tabcontent-menu a:hover { color:#000; } 
```

[Jsfiddle.net](http://jsfiddle.net/H9VHs/)上的工作示例

# 问题

我想知道是否有更简单的方法可以将中间的“移动”`a`标签与中间对齐。其他两个链接看起来不错，因为它们是双线。我故意把它们做成双线是有原因的，现在只需要中间的一个到中间对齐一些。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:05:55.263

您可以使用`vertical-align: middle`垂直调整位置。由于这仅适用于表格单元格，因此设置`display: table-cell`为`.tabcontent-menu a`

[http://jsfiddle.net/H9VHs/8/](http://jsfiddle.net/H9VHs/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T21:02:55.693

我通常通过改变`line-height`.

```
.tabcontent-menu a.midline {
 line-height: 64px;   
} 
```

在这里看到它：http: [//jsfiddle.net/PZVnq/](http://jsfiddle.net/PZVnq/)

**文档/进一步阅读**

*   `line-height`MDN 上的CSS - [https://developer.mozilla.org/en/CSS/line-height](https://developer.mozilla.org/en/CSS/line-height)
*   Lauri Raittilan 关于使用 CSS 进行垂直居中 - [http://www.student.oulu.fi/~laurirai/www/css/middle/](http://www.student.oulu.fi/~laurirai/www/css/middle/)
*   vanseodesign.com 上的 CSS 垂直居中 - [http://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

# java - Hadoop：Reduce 没有产生所需的输出，它与映射输出相同

> ID：11748906
> 
> 赞同：3
> 
> 时间：2012-07-31T20:58:46.033
> 
> 标签：java, hadoop, mapreduce

这是我的`Map`

```
 public static class MapClass extends Mapper<LongWritable, Text, Text, Text> {

        public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException{
            String[] fields = value.toString().split(",", -20);
            String country = fields[4];
            String numClaims = fields[8];
            if (numClaims.length() > 0 && !numClaims.startsWith("\"")) {
                context.write(new Text(country), new Text(numClaims + ",1"));
            }
        }
    } 
```

这是我的`Reduce`

```
public void reduce(Text key, Iterator<Text> values, Context context) throws IOException, InterruptedException {
            double sum = 0.0;
            int count = 0;

            while (values.hasNext()) {
                String[] fields = values.next().toString().split(",");
                sum += Double.parseDouble(fields[0]);
                count += Integer.parseInt(fields[1]);
            }

            context.write(new Text(key), new DoubleWritable(sum/count));
        } 
```

这是它的配置方式

```
Job job = new Job(getConf());

            job.setJarByClass(AverageByAttributeUsingCombiner.class);
            job.setJobName("AverageByAttributeUsingCombiner");

            job.setOutputKeyClass(Text.class);
            job.setOutputValueClass(Text.class);

            job.setMapperClass(MapClass.class);
    //        job.setCombinerClass(Combinber.class);
            job.setReducerClass(Reduce.class);

            job.setInputFormatClass(TextInputFormat.class);
            job.setOutputFormatClass(TextOutputFormat.class);

            FileInputFormat.setInputPaths(job, new Path(args[0]));
            FileOutputFormat.setOutputPath(job, new Path(args[1]));

    //        job.setNumReduceTasks(0); // to not run the reducer
            boolean success = job.waitForCompletion(true);
            return success ? 0 : 1; 
```

输入的形式

```
 "PATENT","GYEAR","GDATE","APPYEAR","COUNTRY","POSTATE","ASSIGNEE","ASSCODE","CLAIMS","NCLASS","CAT","SUBCAT","CMADE","CRECEIVE","RATIOCIT","GENERAL","ORIGINAL","FWDAPLAG","BCKGTLAG","SELFCTUB","SELFCTLB","SECDUPBD│                                                                                                                                                                                                                
    ","SECDLWBD"                                                                                                                                                                                                         │                                                                                                                                                                                                                
    3070801,1963,1096,,"BE","",,1,,269,6,69,,1,,0,,,,,,,                                                                                                                                                                 │                                                                                                                                                                                                                
    3070802,1963,1096,,"US","TX",,1,,2,6,63,,0,,,,,,,,,                                                                                                                                                                  │                                                                                                                                                                                                                
    3070803,1963,1096,,"US","IL",,1,,2,6,63,,9,,0.3704,,,,,,,                                                                                                                                                            │                                                                                                                                                                                                                
    3070804,1963,1096,,"US","OH",,1,,2,6,63,,3,,0.6667,,,,,,, 
```

整个输出`map reduce`看起来像

“AR” 5,1 │<br> “AR” 9,1 │<br> “AR” 2,1 │<br> “AR” 15,1 │<br> “AR” 13,1 │<br> “AR” 1,1 │<br> “AR” 34,1 │<br> “AR” 12,1 │<br> “AR” 8,1 │<br> “AR” 7,1 │<br> “AR” 23,1 │<br> “AR” 3,1 │<br> “AR” 4,1 │<br>“AR”4,1

如何调试和解决此问题？我正在学习hadoop

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:33:44.687

如前所述，问题在于您没有覆盖默认抽象 Reducer 类的默认 reduce 方法。

更具体地说，到目前为止，（一个/一个）问题是您的 reduce 方法签名是：

```
 public void reduce(Text key, **Iterator**<Text> values, Context context) 
             throws IOException, InterruptedException 
```

相反，它应该是：

```
 public void reduce(Text key, **Iterable**<Text> values, Context context) 
             throws IOException, InterruptedException 
```

旧的 API 版本是正确的，你实现了 Reducer 接口`reduce()`方法并且它可以工作。

对这种情况的一个很好的验证是使用`@Override`，因为它强制签名不匹配的编译时检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:27:41.010

*   我目前正在使用`hadoop-core-1.0.3.jar`并尝试`Map Reduce`使用新 API 编写，不知道为什么它不起作用
*   这个程序是[Hadoop in Action 代码](http://manning.com/lam/HadoopinAction_source_code.zip)的一部分，我正在通过这本书学习 hadoop。
*   当我用 运行相同的`map reduce`程序时`old API syntax`，它工作得非常好。
*   代码看起来像（连同包含的组合器，我首先在组合器之前对其进行了测试）

> ```
> import org.apache.hadoop.conf.Configuration;
> import org.apache.hadoop.conf.Configured;
> import org.apache.hadoop.fs.Path;
> import org.apache.hadoop.io.DoubleWritable;
> import org.apache.hadoop.io.LongWritable;
> import org.apache.hadoop.io.Text;
> import org.apache.hadoop.mapred.*;
> import org.apache.hadoop.util.Tool;
> import org.apache.hadoop.util.ToolRunner;
> 
> import java.io.IOException;
> import java.util.Iterator;
> 
> public class AveragingWithCombiner extends Configured implements Tool {
> 
>     public static class MapClass extends MapReduceBase
>             implements Mapper<LongWritable, Text, Text, Text> {
> 
>         static enum ClaimsCounters { MISSING, QUOTED };
> 
>         public void map(LongWritable key, Text value,
>                         OutputCollector<Text, Text> output,
>                         Reporter reporter) throws IOException {
> 
>             String fields[] = value.toString().split(",", -20);
>             String country = fields[4];
>             String numClaims = fields[8];
> 
>             if (numClaims.length() > 0 && !numClaims.startsWith("\"")) {
>                 output.collect(new Text(country), new Text(numClaims + ",1"));
>             }
>         }
>     }
> 
>     public static class Combine extends MapReduceBase
>             implements Reducer<Text, Text, Text, Text> {
> 
>         public void reduce(Text key, Iterator<Text> values,
>                            OutputCollector<Text, Text> output,
>                            Reporter reporter) throws IOException {
> 
>             double sum = 0;
>             int count = 0;
>             while (values.hasNext()) {
>                 String fields[] = values.next().toString().split(",");
>                 sum += Double.parseDouble(fields[0]);
>                 count += Integer.parseInt(fields[1]);
>             }
>             output.collect(key, new Text(sum + "," + count));
>         }
>     }
> 
>     public static class Reduce extends MapReduceBase
>             implements Reducer<Text, Text, Text, DoubleWritable> {
> 
>         public void reduce(Text key, Iterator<Text> values,
>                            OutputCollector<Text, DoubleWritable> output,
>                            Reporter reporter) throws IOException {
> 
>             double sum = 0;
>             int count = 0;
>             while (values.hasNext()) {
>                 String fields[] = values.next().toString().split(",");
>                 sum += Double.parseDouble(fields[0]);
>                 count += Integer.parseInt(fields[1]);
>             }
>             output.collect(key, new DoubleWritable(sum/count));
>         }
>     }
> 
>     public int run(String[] args) throws Exception {
>         // Configuration processed by ToolRunner
>         Configuration conf = getConf();
> 
>         // Create a JobConf using the processed conf
>         JobConf job = new JobConf(conf, AveragingWithCombiner.class);
> 
>         // Process custom command-line options
>         Path in = new Path(args[0]);
>         Path out = new Path(args[1]);
>         FileInputFormat.setInputPaths(job, in);
>         FileOutputFormat.setOutputPath(job, out);
> 
>         // Specify various job-specific parameters
>         job.setJobName("AveragingWithCombiner");
>         job.setMapperClass(MapClass.class);
>         job.setCombinerClass(Combine.class);
>         job.setReducerClass(Reduce.class);
> 
>         job.setInputFormat(TextInputFormat.class);
>         job.setOutputFormat(TextOutputFormat.class);
>         job.setOutputKeyClass(Text.class);
>         job.setOutputValueClass(Text.class);
> 
>         // Submit the job, then poll for progress until the job is complete
>         JobClient.runJob(job);
> 
>         return 0;
>     }
> 
>     public static void main(String[] args) throws Exception {
>         // Let ToolRunner handle generic command-line options
>         int res = ToolRunner.run(new Configuration(), new AveragingWithCombiner(), args);
> 
>         System.exit(res);
>     }
> } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:05:59.470

你的减速器没有“捕捉”。可能存在类型不匹配或类似的情况，因此您的`reduce`函数与它所继承的抽象接口不匹配......所以它没有被覆盖。默认情况下，`reduce`将使用`IdentityReducer`，它什么都不做（这是您正在经历的）。

为确保您实际上是覆盖，请添加`@override`：

```
@override
public void reduce(Text key, Iterator<Text> values, Context context) 
```

这将引发错误，因为函数签名不匹配。这希望能帮助您诊断问题。

# jquery - drupal 7形式的js变量

> ID：11748907
> 
> 赞同：1
> 
> 时间：2012-07-31T20:58:47.170
> 
> 标签：jquery, drupal-7, drupal-forms

我有一个 jquery 滑块，它将用户的值收集到 js 变量中，我可以将这些值存储如下

```
<script type="text/javascript">
     var amount=$('#slider_v').slider('value');

 </script> 
```

现在我想要的是，如果用户单击一个按钮，他们应该被定向到一个用户/注册（drupal 的个人资料表单），该用户/注册将有一个名为金额的附加字段。上一页中的值将自动预填充该文本字段

任何帮助，我是新手，对不起

# networking - DNS 名称可能看起来像 IP 地址吗？

> ID：11748908
> 
> 赞同：1
> 
> 时间：2012-07-31T20:58:55.420
> 
> 标签：networking, dns, ip, ip-address, domain-name

我的问题源于这个过程：假设一个应用程序有一个主机或地址字段，并希望连接到该地址的某些服务。许多应用程序会查看该地址并猜测它是 IP 地址还是主机名。这个应用程序可以使用像 inet_pton() 这样的函数来做这个检查。如果该地址确实看起来像一个 IP 地址，则应用程序不会执行 DNS 查找并直接使用该 IP 地址。

现在，我并不是说这是一个好主意，但如果有人定义了一个看起来像 1.2.3.4 的 dns 名称怎么办。这看起来像一个 ip 地址，所以上面的应用程序将使用它作为和 ip 地址，而不是作为 DNS 名称。

从观察来看，似乎大多数应用程序的行为都如第一段所述。出于几个原因，这对我来说似乎是有益的。是否有任何文档表明不应使用看起来像 IP 地址的 DNS 名称。或者任何说明即使有人将 DNS 名称定义为看起来像 IP 地址的任何文档，也可以不尊重它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:13:49.253

其他人已经回答了，但我会补充和巩固。

相关的 RFC：

*   [https://www.rfc-editor.org/rfc/rfc952](https://www.rfc-editor.org/rfc/rfc952)（原创）
*   [https://www.rfc-editor.org/rfc/rfc1123](https://www.rfc-editor.org/rfc/rfc1123)（已修订）
*   [https://www.rfc-editor.org/rfc/rfc2606](https://www.rfc-editor.org/rfc/rfc2606)（额外）

最初，主机名不能以数字开头，以消除主机名和 IP 地址之间的歧义。在修订版中，这已更改，主机名可以以数字开头。因此，像 127.0.0.1.com 这样的域名是合法的。TLD 不能以数字开头（TLD 代表顶级域，其中 .com、.net、.org、国家代码等是其成员）。名称必须至少包含一个字符，必须以字母数字字符开头和结尾，并且最多可以有 64 个字符（尽管标准支持更长的主机名，但系统不需要支持超过 64 个字符的名称）。

此外，如最终 RFC 中所述，某些 SLD 和 TLD 是保留的，无法注册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T21:07:04.360

要查看的相关规范是[RFC 1123 的第 2.1 节](https://www.rfc-editor.org/rfc/rfc1123#section-2)：

> 如果可以在没有此类标识分隔符的情况下输入点分十进制数字，则必须进行完整的语法检查，因为现在允许主机域名的一部分以数字开头并且可以合法地完全是数字（参见第 6.1 节）。 2.4)。但是，有效的主机名永远不能采用点分十进制形式#.#.#.#，因为至少最高级别的组件标签将是字母。

# c# - ReadAsAsync - 抛出异常类型是接口或抽象类，不能被实例化

> ID：11748912
> 
> 赞同：2
> 
> 时间：2012-07-31T20:59:10.997
> 
> 标签：c#, asp.net-web-api

我有以下代码尝试从 Web api 服务获取 Appication 对象。我得到以下异常：

> InnerException = {“无法创建BusinessEntities.WEB.IApplicationField 类型的实例。类型是接口或抽象类，无法实例化。路径'_applicationFormsList[0]._listApplicationPage[0]._listField[0]._applicationFieldID'，行1，位置 194。"}。

我不明白为什么将 FieldList 更改为 Interface 会导致反序列化对象出现问题。任何指针都非常感谢。

```
Task<HttpResponseMessage> task = HttpClientDI.GetAsync(someUri);
HttpResponseMessage response = task.Result;

HttpClientHelper.CheckResponseStatusCode(response);

try
{
    Application application = response.Content.ReadAsAsync<ApplicationPage>().Result;
    return application;
}
catch (Exception ex)
{
    throw new ServiceMustReturnApplicationException(response);
}

[Serializable]
public class ApplicationPage
{
    #region Properties
    public int PageOrder { get; set; }
    public string Title { get; set; }
    public string HtmlPage { get; set; }
    public int FormTypeLookupID { get; set; }

    List<IApplicationField> _listField = new List<IApplicationField>(); 
    public List<IApplicationField> FieldList
    {
        get { return _listField; }
        set { _listField = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:08:11.623

您需要为您尝试反序列化的类的所有接口指定具体类，以便在反序列化过程中为这些接口创建实例。

通过这样做，可以通过为 json.net 创建自定义转换器来获得：

```
public class ApplicationFieldConverter : CustomCreationConverter<IApplicationField>
{
    public override IApplicationField Create(Type objectType)
    {
        return new FakeApplicationField();
    }
} 
```

你的代码应该是：

```
string jsonContent= response.Content.ReadAsStringAsync().Result;
Application application = JsonConvert.DeserializeObject<Application>(jsonContent,
                                 new ApplicationFieldConverter()); 
```

**注意：**在 ASP.NET Web API RC 中没有找到该方法`Content.ReadAsAsync<...>()`，您使用的是 beta 版本吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:25:34.017

序列化程序无法反序列化任何包含接口的对象图，因为它不知道在重新水合对象图时要实例化哪个具体类。

# file - 我可以恢复从未提交的已删除文件吗？

> ID：11748914
> 
> 赞同：3
> 
> 时间：2012-07-31T20:59:22.723
> 
> 标签：file, svn, delete-file, recover

我向存储库添加了一个目录，但没有提交更改。然后我删除了它，没有意识到它会删除整个目录。需要明确的是，这正是我所做的：

```
svn add directory/
svn remove directory/ --force 
```

有什么方法可以恢复文件还是我是 SOL？

PS到底谁决定SVN应该有两个不同的命令`delete`并且`remove`做完全相同的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:02:20.023

无法通过 svn 恢复未提交到 svn 的文件。

# ruby - 是否可以在 RPG Maker XP 中更新 Ruby 版本

> ID：11748915
> 
> 赞同：3
> 
> 时间：2012-07-31T20:59:28.880
> 
> 标签：ruby, unicode, game-engine

这与 unicode 支持有关。当前的RPG Maker ruby​​ 版本是1.8，问题是，使用英文RPG Maker，无法在游戏的消息窗口中显示非标准字符，例如汉字（日文字符）。文本已正确存储在变量中，但在显示在游戏消息中以显示文本时会出现混乱。它在控制台上正确显示。结果是文本显示为空白或以随机框的形式显示。我已确保我的系统区域设置为日语

然后我玩了一个用RPG Maker制作的日本游戏，它运行良好，我可以看到那些汉字。但后来我尝试使用我的英文 RPG Maker XP 编辑它们，保存它们，再次播放，游戏运行没有错误，但文本全部消失（不可见）。我对此进行了多次实验，包括更改字体、文本存储位置的 unicode、正在使用的 .dll、RTP 版本，它们都不能作为解决方案。

简而言之，为了正确显示日文文本，我必须使用 Japanese RPG Maker XP。我已经拥有一个英文 RPG Maker，我想用日语发布我的游戏。而这个 unicode 问题让我陷入了死胡同，如果我的 RPG Maker 无法显示日文字符，那也没有意义。

为什么 ？我们有一个完全相同的软件来创建游戏，只是语言不同，但为什么我看不到文字？我有英文 RPG Maker VX（比 XP 更新的版本，内置更新版本的 ruby​​），它没有这样的问题。但我不想使用 VX 或 VX Ace。

这个本地化问题只是我问的原因之一：有没有可能的方法来更新 RPG Maker 中使用的仅提供部分 unicode 支持的 ruby​​？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-06T20:15:14.910

如果使用的字体不支持汉字字符，字符将不会出现在游戏中。***英文中的默认字体不适用于汉字！***. 将字体设置为支持字符的字体（我使用脚本设置字体），您或任何玩游戏的人都不必更改其本地。字体必须安装在您的系统和游戏的字体文件夹中才能正常工作。

# cocoa - 使用 NSTreeView 进行视图交换

> ID：11748916
> 
> 赞同：1
> 
> 时间：2012-07-31T20:59:32.180
> 
> 标签：cocoa, nsview, nsarraycontroller

我有一个我自己编的自定义 NSView。基本上，对于我选择的树视图中的每个项目，我都想将视图与另一个项目交换。

我的问题是，我应该为此使用 NSArrayController 之类的东西吗？如果是这样，您如何连接自定义 NSView 以使用 NSArrayController*并*根据 NSTreeView 中的选择在视图之间交换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:18:19.010

您可以使用 an`NSArrayController`来执行此操作，但是您必须考虑以下几点：

每个都`NSView`应该由 控制`NSViewController`，因此您最好在其中存储一些标识符，`NSArrayController`您可以从中扣除控制器类和关联的 NIB。获得`NSViewController`类名后，您可以实例化它并使用该方法加载随附的视图`initWithNibName:`。

引入“电流控制器”的概念可能是一个好主意。这样，您在任何时候都只会在内存中拥有一个控制器（具有关联的视图和模型对象图）。根据树视图中的选择交换控制器后，旧控制器及其所有关联对象将从内存中释放。

例子：

*   存储在您的`NSArrayController`：`@"Customers"`
*   控制器类：`@"CustomersViewController"`
*   相关NIB：`@"CustomersView"`

通过存储`@"Customers"`在您的数组中，您可以扣除正确的控制器类名称和关联的 NIB：

```
NSString *aControllerName = [anIdentifier stringByAppendingString: @"ViewController"];
NSString *aNibName = [anIdentifier stringByAppendingString: @"View"];   
Class aControllerClass = NSClassFromString(aControllerName);
[self setCurrentController: [[aControllerClass alloc] initWithNibName: aNibName bundle: [NSBundle mainBundle]]]; 
```

在上面的代码`anIdentifier`中将保存该值`@"Customers"`，并且可能源自您的`NSArrayController`. `self`在上面的例子中是指你的顶级控制器（它的类取决于你的设计）。

视图的实际交换可以如下完成：

```
[[self currentController] view] removeFromSuperView];
... do swapping ...
[[self view] addSubview:[[self currentController] view]]; 
```

如果您将标识符与填充树视图的数据源一起存储，则您可能不需要单独`NSArrayController`的标识符，因为您可以直接从树视图中的选定对象中获取标识符。

# javascript - angularJS：如何断开模型和视图之间的链接

> ID：11748917
> 
> 赞同：8
> 
> 时间：2012-07-31T20:59:32.030
> 
> 标签：javascript, angularjs

我想知道是否有可能在运行时断开模型和视图之间的链接。
在以下示例中，所有内容都链接在一起（通过*文本*模型）。当我单击按钮时，我想让 Angular 不再更新最后一个输入（例如启动一些 jquery 效果......）。

```
<html ng-app>
  <head>
    <script src="angular-1.0.1.js"></script>
  </head>
  <body>
    <input ng-model="text"/><br/>
    <input ng-model="text"/><br/>
    <input ng-model="text"/><input type="button" value="<- break!" ng-click="???"/><br/>
  </body>
</html> 
```

我的真实案例在这里：http: [//jsfiddle.net/5JZPH/10/](http://jsfiddle.net/5JZPH/10/)
在 jsfiddle 示例中，我希望当我按下“+”按钮时，旧值（这些正在消失的值）不再改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:18:14.967

您可以淡出 jQuery 克隆的 html 元素：http: [//jsfiddle.net/5JZPH/29/](http://jsfiddle.net/5JZPH/29/)

HTML：

```
<div ng-app="test">
    <input type="button" value=" + " ng-click="index = index + 1"/>
    <input ng-model="index" smooth="index" style="display:block"/>
    [{{index}}]
</div> 
```

JavaScript：

```
angular.module('test', [])
.directive('smooth', function() {
    return {
        transclude: 'element',
        priority: 750,
        terminal: true,
        compile: function(element, attr, linker) {
            return function(scope, iterStartElement, attr) {

                var prevClone = null;

                scope.$watch(attr.smooth, function() {

                    var newScope = scope;

                    linker(newScope, function(clone) {

                        if ( prevClone ) {

                            newPrevClone = prevClone.clone();
                            prevClone.after(newPrevClone);
                            prevClone.remove();
                            newPrevClone.fadeOut(2000, function() { $(this).remove() });
                        }

                        iterStartElement.after(clone);

                        prevClone = clone;
                    });
                });
            }
        }
    };
}) 
```

# pyinotify - pyinotify 单个文件和相关错误

> ID：11748924
> 
> 赞同：1
> 
> 时间：2012-07-31T21:00:01.797
> 
> 标签：pyinotify

我知道 pyinotify 可用于监视特定目录中所有文件的事件（递归）。如何仅监视单个文件的事件（例如创建事件）？基本上，我需要让我的 python 代码在检测到具有特定扩展名（比如 *.txt）的文件被创建后立即执行一些操作。

我曾尝试在网上查找此内容，但无法找到任何有用的文档来指导如何使用 pyinotify 显式监控单个文件的事件，而不是目录中的所有文件/子目录。

例如，我正在尝试查看文件 /tmp/test.txt 的“IN_CREATE”事件，但是当我运行我的 pyinotify 脚本时，出现以下错误：

[Pyinotify 错误] add_watch: 无法观看 /tmp/test.txt (WD=-1)

网上的一篇文章指出这可能是由于 max_user_watches 的限制，所以我尝试增加该限制（fs.inotify.max_user_watches）但没有运气。

关于为什么我会收到此错误消息或任何人已经知道有关此错误的详细信息的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:18:46.337

/tmp/test.txt 已经存在？

如果没有，那么您需要监视递归 /tmp 和 ExcludeFilter 输出

# xmpp - 语音聊天选项

> ID：11748926
> 
> 赞同：4
> 
> 时间：2012-07-31T21:00:16.827
> 
> 标签：xmpp, chat, voice, openfire

我正在尝试在我的网站上实现语音聊天。我目前正在使用 XMPP / Openfire 进行 IM 聊天，并希望加入一个“聊天室”选项，最多（25 到 50 或更多，如果可能的话）人们可以加入并相互进行语音聊天。我正在查看 Openfire 的 RedFire 选项，但每个房间最多有 12 个用户。不需要视频。

有谁知道任何可以满足我要求的 openfire 插件和/或其他解决方案？打开任何选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:13:24.920

得到 Openfire 论坛成员的回复，请参阅此处了解更多信息：http: [//community.igniterealtime.org/message/224079#224079](http://community.igniterealtime.org/message/224079#224079)

# python - Python 3：对实例属性的调用何时解析为实例方法？

> ID：11748930
> 
> 赞同：4
> 
> 时间：2012-07-31T21:00:34.873
> 
> 标签：python, python-3.x, instance-methods

```
class C:
  def func(self, a):
    print(a)

c = C()
print(c.__dict__) # {}
c.func = c.func
# c.func is now an instance attribute, which hides instance method
print(c.__dict__) # {'func' : (bound method C.f of (__main.C object at ...))}
# how come it still works as if it's an instance method:
c.func(1) # prints 1

# with a regular function assigned to c.func, this won't happen:
def newfunc(self, a):
  print(a)
c.func = newfunc
c.func(1) # TypeError 
```

调用`c.func(1)`神奇地将实例添加`c`为第一个参数的条件是什么？我认为只有在`func`类中定义为实例方法时才会发生这种情况。但它似乎*有时*`func`只是一个实例属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:19:06.567

与实例的绑定发生在您*访问* `c.func`时，而不是在您调用它时。当您这样做`c.func = c.func`时，右侧的属性访问由类处理`C`并评估为绑定方法。重新分配它以`c.func`将其分配给实例，但它已经是一个绑定方法，所以这不会改变行为。

在您的 newfunc 示例中，您只是定义了一个函数并对其进行了分配，因此它从未被制成实例方法。由于您将其直接分配给实例，因此该类没有机会拦截访问并将其包装在实例方法中。

您可以在任何您喜欢的地方分配绑定方法，并且它仍然绑定到您获取它的实例。请参阅以下示例：

```
>>> class C(object):
...     def __init__(self, name):
...         self.name = name
...     def func(self, a):
...         print("Called {0} with {1}".format(self.name, a))
>>> one = C("one")
>>> two = C("two")
>>> one.func(1)
Called one with 1
>>> two.func(1)
Called two with 1
>>> one.func2 = two.func
>>> one.func2(1)
Called two with 1 
```

请注意，一旦我分配`one.func2 = two.func`，调用`one.func2`将调用绑定到的实例方法`two`，而不是`one`。这是因为当我访问 时`two.func`，我得到了一个绑定到该实例的方法。我以后将它分配到哪里都没有关系。它仍然绑定到访问它的实例。

如果您直接访问未绑定的方法并尝试将其分配到别处，则会收到 TypeError，因为该方法从未绑定：

```
>>> one.func3 = C.func
>>> one.func3(1)
Traceback (most recent call last):
  File "<pyshell#16>", line 1, in <module>
    one.func3(1)
TypeError: unbound method func() must be called with C instance as first argument (got int instance instead) 
```

另请注意，如果您将方法添加到*类*，它会在实例上调用时起作用，即使该实例是在您将方法添加到类之前创建的。保持与`one`以前相同的对象，我可以这样做：

```
>>> def newFunc(self, a):
...     print("Newfunc of {0} called with {1}".format(self.name, a))
>>> C.newFunc = newFunc
>>> one.newFunc(1)
Newfunc of one called with 1 
```

为了简洁地回答您的问题，`c.func`必须绑定`c`if`c`是具有方法的类的实例`func`，并且`c`本身没有实例属性`func`。（如果`c`确实有同名的实例属性，则会覆盖类一，因此该类不会进行包装以将方法绑定到实例。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:24:41.760

`c.func(1)`当方法绑定到对象时，将神奇地添加实例`c`作为第一个参数。`c.func``c`

作为类属性的函数会自动绑定到该类的实例。因此，紧随其后`c = C()`,`c.func`的不同之处`C.func`在于它接受的参数少了一个，并`c`神奇地成为了第一个参数。这就是为什么`c.func = c.func`不改变任何东西，并且一切正常的原因。

如果要使用新的实例方法修补类的实例，则需要将函数绑定到实例。这里有几个选项：

*   使用`types.MethodType`：

    ```
    import types
    c.func = types.MethodType(newfunc, c) 
    ```

*   使用`functools.partial`：

    ```
    import functools
    c.func = functools.partial(newfunc, c) 
    ```

请注意，第二种方法模仿了行为，但略有不同，因为`type(c.func)`will`<type 'functools.partial'>`代替`<type 'instancemethod'>`，所以第一种方法可能更可取。

# mysql - VB.NET MySQL 连接（数据库不是本地的）

> ID：11748931
> 
> 赞同：2
> 
> 时间：2012-07-31T21:00:36.643
> 
> 标签：mysql, database, vb.net

我正在尝试通过 VB.NET 连接到 MySQL 服务器，但我的程序一直`con.Open()`在线冻结。

```
Imports System.Data.SqlClient
Imports System.Data

....

    Dim con As New SqlConnection
    Dim cmd As New SqlCommand

    Try
        con.ConnectionString = "Server=000.000.000.000;Database=db_name;Uid=db_user;Pwd=db_pw;"
        con.Open()

        cmd.Connection = con
        cmd.CommandText = "SELECT * FROM courses"
        Dim lrd As SqlDataReader = cmd.ExecuteReader()

        While lrd.Read()
            MessageBox.Show(lrd.ToString)
        End While
    Catch ex As Exception
        MessageBox.Show("Error while connecting to SQL Server: " & ex.Message)
    Finally
        con.Close()
    End Try 
```

连接字符串中的内容是我在这些地方所拥有的形式，在本示例中使用这些词作为实际值占位符。除了包含实际值之外，它们完全相同。因此，如果有表格错误（即缺少撇号），请告诉我。对于`Server`，我应该输入服务器的 IP 地址还是其他什么？此外，在阅读循环中，我不确定如何显示 SQL 查询的所有内容。我有正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:21:41.793

您正在为 SQL Server 使用 ADO.NET 而不是您应该使用的 ADO.NET 客户端，它可以与 MySQL 一起使用，例如[MySQL 连接器](http://dev.mysql.com/doc/refman/5.1/en/connector-net.html)

您需要安装[它](http://dev.mysql.com/downloads/connector/net/)，并根据 MySQL 连接器的工作方式将代码中的 SqlClient、SqlCommand、SqlConnection 更改为 MySqlClient、MySqlCommand、MySqlConnection。

要显示第一列值：

```
 While lrd.Read()
            MessageBox.Show(lrd.GetValue(0))
  End While 
```

# jquery - jquery droppable 需要更少的重叠

> ID：11748932
> 
> 赞同：3
> 
> 时间：2012-07-31T21:00:47.857
> 
> 标签：jquery, jquery-ui, drag-and-drop, draggable, droppable

我正在使用 jquery 设置一个可拖动的界面来执行我的拖放操作。我有一个高大的物体（400 像素 x 50 像素），我想将它放入一个小锚（100 像素 x 100 像素）中。似乎为了触发“drop”和“over”事件，至少一半的拖动容器必须在可放置容器的边界内，这在这种情况下不会发生，因为拖动容器要大得多. 有没有办法减轻这种限制，以便触发这些事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:03:20.273

我相信您正在寻找`tolerance`选项：http: [//jqueryui.com/demos/droppable/#option-tolerance](http://jqueryui.com/demos/droppable/#option-tolerance)

```
$( ".selector" ).droppable({ tolerance: "touch" }); 
```

您可能还喜欢以下`pointer`值：

```
$( ".selector" ).droppable({ tolerance: "pointer" }); 
```

**更新**

如果你想限制某些 droppables 只在特定的 drop-zone 中放置，那么你可以设置`scope`选项：

```
$( ".selector-1" ).droppable({ scope: "tasks" });
$( ".selector-2" ).draggable({ scope: "tasks" }); 
```

与上面相同的文档链接也将提供有关此选项的更多信息。

# python - Python - 比较文件

> ID：11748934
> 
> 赞同：3
> 
> 时间：2012-07-31T21:00:57.240
> 
> 标签：python, file, comparison

我需要使用 a`get()`通过将对象与 FILE 请求进行比较来选择对象：

我的模型：

```
class Work (models.Model):
    file = models.FileField(storage=OverwriteStorage(), upload_to=path)

class Group(models.Model):
    members = models.ManyToManyField(User, related_name='group_list', null=True, blank=True) 
```

我试过了：`var = mygroup.work_list.get(file=request.FILES['file'])`

使用**相同的文件**：`Work matching query does not exist`

## 编辑 ：

我实际上更喜欢比较文件的名称，但这也不起作用：

```
var = mygroup.work_list.get(file__name=request.FILES['file'].name) 
```

## 编辑2：

似乎我无法提出有关文件信息的请求，我已经尝试过大小`Join on field 'file' not permitted. Did you misspell 'size' for the lookup type?`​​我有相同的消息名称......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:42:30.727

如何生成和存储文件的 md5 哈希并与此密钥进行比较？*只是一个想法*

编辑：如何评论原帖？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:38:42.433

我已经找到 ：`var = mygroup.work_list.get(file=path+'/'+request.FILES['file'].name)`

# c# - Viewbox 使 WindowsFormsHost 在 WPF 中消失

> ID：11748935
> 
> 赞同：3
> 
> 时间：2012-07-31T21:01:00.140
> 
> 标签：c#, wpf, viewbox, windowsformshost

我有一个 WPF 项目，通过将视频控件放在 ViewBox 中来保持视频比例。视频控件是包装在 WindowsFormsHost 中的 WinForms 对象。我还添加了一个 gridSplitter 来调整 ViewBox 的大小。一切都很好，直到我注意到一个奇怪的错误。当我使用 gridSplitter 控件将 ViewBox 最小化到接近于零时，再次展开后视频比率会被搞砸。而当我使用 gridSplitter 将 ViewBox 一直收缩到 0 时，WindowsFormHost 会在展开后完全消失（它仍然存在，但 ActualWidth 和 ActualHeight 现在为 0）。

删除 ViewBox 控件，只使用 WindowsFormsHost 工作正常，但我需要 ViewBox 来控制纵横比。如果我找不到解决方案，我将不得不自己控制比率作为解决方法。

我想我一定是做错了什么，所以我写了一个快速测试程序来重现这个问题。我将在下面发布一个完整程序的链接（它在 C#、VS2008 中）。

在测试程序中，我创建了一个带有两列的网格，并带有一个允许您调整它们大小的 gridsplitter。然后我在左侧控件中放置一个 ViewBox 并在其中放置一个 WindowsFormsHost。然后我在 WindowsFormsHost 中托管一个红色的 _winFormsButton。

该按钮可以很好地缩放，直到您完全收缩左列然后再次展开它。按钮不见了。如何防止这种情况发生，以便在收缩和扩展左栏后按钮继续缩放？谢谢。

XAML：

```
<Window x:Class="DisappearingHost.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <Grid>        
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.5*" />
            <ColumnDefinition Width="0.5*" />
        </Grid.ColumnDefinitions>
        <GridSplitter Grid.Column="1" HorizontalAlignment="Left" Name="gridSplitter1" Width="10" VerticalContentAlignment="Center" />        
        <Viewbox>
            <WindowsFormsHost Name="windowsFormsHost1" VerticalAlignment="Center" HorizontalAlignment="Center" />
        </Viewbox>
    </Grid>
</Window> 
```

代码背后：

```
public partial class Window1 : Window
    {
        System.Windows.Forms.Button _winFormsButton = new System.Windows.Forms.Button();

        public Window1()
        {
            InitializeComponent();

            _winFormsButton.Text = "I disappear!";
            _winFormsButton.Size = new System.Drawing.Size(50, 50);
            _winFormsButton.BackColor = System.Drawing.Color.Red;

            windowsFormsHost1.Child = _winFormsButton;
        }
    } 
```

示例代码输出： ![图片](../Images/51af7faa6322b017d5c8fec902373575.png)

测试项目代码链接（VS2008）： [code](http://www.filedropper.com/disappearinghost)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:33:30.997

将您的网格拆分器放在第 0 列中，这样您就不会遇到 WPF 布局冲突。这是修改后的代码（注意 Grid Splitter 列、水平对齐和视图框边距）：

```
<GridSplitter Grid.Column="0" HorizontalAlignment="Right" Name="gridSplitter1" Width="10" VerticalContentAlignment="Center" />
        <Viewbox Margin="10">
            <WindowsFormsHost Name="windowsFormsHost1" VerticalAlignment="Center" HorizontalAlignment="Center" />
        </Viewbox> 
```

您可以将 ViewBox 边距设置在右侧以使其看起来更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:02:48.277

我最终摆脱了 Viewbox，并自己控制了 WidowsFormHost 尺寸。

# spring - 自定义 Apache Camel 数据格式的 Spring 配置

> ID：11748936
> 
> 赞同：3
> 
> 时间：2012-07-31T21:01:06.540
> 
> 标签：spring, apache-camel, dataformat

我正在使用 Apache Camel 2.9.2 和 Spring 3.0.6.RELEASE。我正在尝试使用自定义 DataFormat 来编组和解组 Camel 消息。我想使用 Spring 将我的自定义 DataFormat 配置到我的一条路线中。

Apache Camel 的文档指出，为了将我的自定义数据格式连接到 Spring 中的路由，我只需将我的自定义 DataFormat 声明为 bean 并在我的 Spring 路由中引用它，如下所示：

```
<marshal>
    <custom ref="myCustomDataFormat"/>
</marshal> 
```

[http://camel.apache.org/custom-dataformat.html](http://camel.apache.org/custom-dataformat.html)

所以我有以下设置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context-3.0.xsd
">

<bean id="myCustomDataFormat" class="com.test.CustomDataFormat"/>
<!-- Camel Context -->
<camelContext xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="file:C:/test?initialDelay=4000&amp;delay=1000"/>
        <marshal>
            <custom ref="myCustomDataFormat"/>
        </marshal>
        <to uri="file:C:/test2"/>
    </route>
</camelContext>
</beans> 
```

但是当我尝试启动 Camel 时，我收到以下令人讨厌的错误：

org.springframework.beans.ConversionNotSupportedException：无法将“com.test.CustomDataFormat”类型的值转换为所需的“org.apache.camel.model.DataFormatDefinition”类型；嵌套异常是 java.lang.IllegalStateException：无法将类型 [com.test.CustomDataFormat] 的值转换为所需类型 [org.apache.camel.model.DataFormatDefinition]：找不到匹配的编辑器或转换策略

我的数据格式定义如下：

```
package com.test;

import java.io.InputStream;
import java.io.OutputStream;

import org.apache.camel.Exchange;
import org.apache.camel.spi.DataFormat;

public class CustomDataFormat implements DataFormat {

/* (non-Javadoc)
 * @see org.apache.camel.spi.DataFormat#marshal(org.apache.camel.Exchange, java.lang.Object, java.io.OutputStream)
 */
@Override
public void marshal(Exchange exchange, Object graph, OutputStream stream)
        throws Exception {
    System.out.println("Marshal");
    byte[] bytes = exchange.getContext().getTypeConverter().mandatoryConvertTo(byte[].class, graph);
    stream.write(bytes);

}

/* (non-Javadoc)
 * @see org.apache.camel.spi.DataFormat#unmarshal(org.apache.camel.Exchange, java.io.InputStream)
 */
@Override
public Object unmarshal(Exchange exchange, InputStream stream)
        throws Exception {
    System.out.println("Unmarshal");
    byte[] bytes = exchange.getContext().getTypeConverter().mandatoryConvertTo(byte[].class, stream);
    return bytes;
}
} 
```

我知道我的 CustomDataFormat 实现是正确的，因为我在 Java 中创建了以下测试路线并且它完美地工作

```
package com.test;

import org.apache.camel.spring.SpringRouteBuilder;

public class TestFormatRoute extends SpringRouteBuilder {

/* (non-Javadoc)
 * @see org.apache.camel.builder.RouteBuilder#configure()
 */
@Override
public void configure() throws Exception {
    from("file:C:/test?initialDelay=4000&delay=1000").unmarshal(new CustomDataFormat()).to("file:C:/test2");
}

} 
```

我错过了什么？

谢谢

**更新**

在收到此错误后让 Camel 完全启动后，我难以置信地发现我的自定义数据格式实际上在我创建的路线中确实有效。我不确定哪个进程试图解析我的自定义数据格式并失败，但它显然与解析数据格式以放入我的路由的进程不同。

这解决了数据格式的功能要求，但没有解释为什么我会收到此错误。

我还确认不是我的数据格式的名称 (CustomDataFormat) 导致了问题。将我的 DataFormat 重命名为唯一名称 (MerlinDataFormat) 并不能修复错误。

我仍然想知道为什么我会收到这个错误，因为我的控制台和日志文件中的大块难看的红色错误并不完全吸引人。

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:56:04.563

结果证明这是一个非常简单的解决方案（我承认应该很容易看到）。实际上有两种方法可以解决这个问题，一种只使用 spring，另一种需要额外的 java 类。

**解决方案 1**

创建一个新的扩展类，`DataFormatDefinition`它与您的 custom 具有相同的属性`DataFormat`。覆盖该`configureDataFormat()`方法以设置底层的所有属性`DataFormat`。添加构造函数以将底层设置`DataFormat`为`CustomDataFormat`. 现在您应该能够`DataFormatDefinition`在 spring 中创建一个实例并在编组或`unmarshaling`.

**解决方案 2（快速和肮脏）**

在 spring 中，创建一个新`DataFormatDefinition`bean 并将其`dataFormat`属性设置为对`DataFormat`spring bean 的引用。现在您应该能够在或`DataFormatDefinition`时引用您的 bean 。`marshaling``unmarshaling`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:45:49.890

不太确定您的示例有什么问题，看起来还不错。您可以发布数据格式的代码吗？您是否正确实施 org.apache.camel.spi.DataFormat ？

我刚刚用 Camel 2.9.2 设置了这个例子，它就像一个魅力。自定义数据格式来自 Camel 文档/源代码。

```
<bean id="mySweetDf" class="com.example.MySweetDf"/>
<camelContext id="camel" xmlns="http://camel.apache.org/schema/spring">
<route>
        <from uri="file:C:/temp/test?initialDelay=4000&amp;delay=1000"/>
        <marshal>
            <custom ref="mySweetDf"/>
        </marshal>
        <convertBodyTo type="java.lang.String"/>
        <to uri="file:C:/temp/test2"/>
    </route>
</camelContext> 
```

数据格式java文件：

```
package com.example;
import java.io.InputStream;
import java.io.OutputStream;
import org.apache.camel.Exchange;
import org.apache.camel.spi.DataFormat;

public class MySweetDf implements DataFormat {

  public void marshal(Exchange exchange, Object graph, OutputStream stream) throws Exception {
    byte[] bytes = exchange.getContext().getTypeConverter().mandatoryConvertTo(byte[].class, graph);
    String body = reverseBytes(bytes);
    stream.write(body.getBytes());
}

  public Object unmarshal(Exchange exchange, InputStream stream) throws Exception {
    byte[] bytes = exchange.getContext().getTypeConverter().mandatoryConvertTo(byte[].class, stream);
    String body = reverseBytes(bytes);
    return body;
}

  private String reverseBytes(byte[] data) {
    StringBuilder sb = new StringBuilder(data.length);
    for (int i = data.length - 1; i >= 0; i--) {
        char ch = (char) data[i];
        sb.append(ch);
    }
    return sb.toString();
}
} 
```

**更新**

刚刚试过你的代码。似乎也可以。通过 mvn archetype 168 创建了一个新的 camel 2.9.2 项目：remote -> org.apache.camel.archetypes:camel-archetype-spring（创建一个新的 Camel 项目并添加了 Spring DSL 支持。）。这仅包括 camel-core 和 camel-spring 依赖项，仅此而已。

然后用你的xml替换camel-context.xml，并在java目录中添加你的数据格式代码。使用“mvn camel:run”运行复制了文件并在日志中打印了“marshal”。

```
[pache.camel.spring.Main.main()] SpringCamelContext             INFO  Route: route1 started and consuming from: Endpoint[file://C:/test?delay=1000&initialDelay=4000]
[pache.camel.spring.Main.main()] SpringCamelContext             INFO  Total 1 routes, of which 1 is started.
[pache.camel.spring.Main.main()] SpringCamelContext             INFO  Apache Camel 2.9.2 (CamelContext: camel-1) started in 0.808 seconds
Marshal 
```

您确定所有依赖项都设置正确，而不是某些 .jar 文件将数据格式弄乱了吗？

**更新2**

好的，我想我知道它是什么：

[http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/model/dataformat/CustomDataFormat.html](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/model/dataformat/CustomDataFormat.html) Camel 已经有一个类命名为您的数据格式。您应该尝试将其重命名为其他名称。CustomDataFormat 扩展了您的错误中提到的 org.apache.camel.model.DataFormatDefinition。Java 应该处理这个问题，因为它是两个不同的命名空间，但是在您的项目设置中可能存在一些导致此冲突的问题。尝试重命名数据格式，看看是否能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:14:12.367

我也面临与骆驼 2.10.0 相同的问题。如果您为 ref 提供 org.apache.camel.model.DataFormatDefinition 类型的实例，一切正常！我可以看到两个用于 xmljson 转换的类 --> XmlJsonDataFormat 实现了 DataFormat 和 DataFormatDefinition。

我解决了我也面临的同样问题。实现了一个扩展 DataFormatDefintion 的类 - 在它的 configureDataFormat 方法中为扩展 DataFormat 的类设置可注入属性（在您的情况下，这是 CustomDataFormat）。我使用XmlJson转换作为模板来解决。

# c# - 如果您压缩包含随机数的文件，它会变得更大

> ID：11748939
> 
> 赞同：1
> 
> 时间：2012-07-31T21:01:14.680
> 
> 标签：c#, .net, random, compression

![在此处输入图像描述](../Images/ef8b87cb8956c7532a42dda9a19ecd83.png)

```
var file = new FileStream("random.txt", FileMode.Create);
var random = new Random();
for (int i = 0; i < 100000000; i++)
{
     var bytesToWrite = BitConverter.GetBytes(random.Next(int.MaxValue));
     file.Write(bytesToWrite, 0, bytesToWrite.Length);
}
file.Close(); 
```

当您简单地向文本文件添加一些随机数然后压缩它会变大，否则它将保持与文本文件相同的大小

任何人都知道这是**如何**或**为什么**发生的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:04:10.710

文本文件倾向于很好地压缩，因为它们一遍又一遍地使用相同的数据。向文件添加一些随机数会使文件不那么规则，因此大多数压缩算法将难以压缩文件。

阅读压缩算法以更好地理解这一点。[https://en.wikipedia.org/wiki/File_compression](https://en.wikipedia.org/wiki/File_compression)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T21:06:49.443

压缩算法不保证它会变小。

原因很简单，它可以生成的唯一值不够小。
例子：

如果你有一个 10 位的世界，你可以生成 2^10 个值。假设您可以全部压缩它们。但是，如果您删除一点，则只能保留 2^9 个值。所以有很多原始值永远无法正确压缩，并解压缩回原始值。

所以大多数压缩算法都考虑到普通数据不是随机的，是重复的，或者背后有一些基本规则。
就像文本只使用了一定数量的字符，所以你可以很好地压缩它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:45:58.713

我发现了一篇有趣的文章：

[http://matt.might.net/articles/why-infinite-or-guaranteed-file-compression-is-impossible/](http://matt.might.net/articles/why-infinite-or-guaranteed-file-compression-is-impossible/)

我还记得前段时间阅读了一项基于压缩算法声明授予的专利，该声明保证输出永远不会大于输入……我找不到同一篇文章，但我找到了这篇文章这更具挑战性：

[http://gailly.net/05533051.html](http://gailly.net/05533051.html)

享受阅读

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T21:13:05.460

好吧，您生成的是随机二进制文件。当然 WinRar 压缩它有困难。

如果您将文件另存为 txt 文件，其中数字为文本，您将看到有压缩空间。

```
 var file = File.CreateText("random.txt");
    var random = new Random();
    for (int i = 0; i < 1000000; i++)
    {
        file.Write(random.Next());
    }
    file.Close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T21:07:45.733

如果字节顺序是真正随机的，那么您将不会注意到大小的任何变化。甚至在某些情况下，rar 文件可能比它包含的文件大（我假设是因为 rar 容器中的头文件的一些开销）。

看看这里：[http ://en.wikipedia.org/wiki/Data_compression](http://en.wikipedia.org/wiki/Data_compression)

# outlook - Windows、Outlook 或 Exchange 是否有用于读取 iCal 格式的 API？

> ID：11748940
> 
> 赞同：2
> 
> 时间：2012-07-31T21:01:16.093
> 
> 标签：outlook, exchange-server, icalendar

我正在尝试将 iCal 导入支持添加到需要支持 Windows XP、Vista 和 7 的现有调度应用程序中。编写 iCal 格式很容易，但阅读它是另一回事，主要是尝试将时间转换为复杂的当地时间时区/TZID/RRULE 语法。理想情况下，Windows 会为此提供本机 API，但我还没有找到。

我知道 Outlook 2007+ 有一个可以工作的[OpenSharedItem](http://msdn.microsoft.com/en-US/library/microsoft.office.interop.outlook._namespace.openshareditem.aspx)函数。我不想要求用户安装 Outlook，因为我的应用程序与 Outlook“竞争”。我曾考虑编写一个 Web 服务，在我的 Web 服务器上使用 Outlook 来执行此操作，但我知道使用服务中的 Outlook OLE/COM 对象存在问题，因此这也可能不是一个选项。我确实拥有大约 300 个 Exchange Server 许可证，是否有任何带有 Exchange 的 API 可能会更好地工作？我确实注意到，当我从 GoToMeeting.com 通过电子邮件发送 iCal 文件时，他们说它们是使用“Microsoft CDO for Microsoft Exchange”创建的，所以我感觉他们正在做这样的事情来避免自己编写格式。

我的应用程序是用 C++ 编写的，主要使用本机 Win32 API，但我不介意为此创建一个 .NET DLL，甚至要求用户能够访问 Internet，以便我可以将文件发布到我的 Web 服务器并让它返回转换后的格式化我的应用程序可以轻松使用。我的网络服务器虽然在 Windows 上运行，所以任何基于 Unix 的东西都可能很困难。除此之外，我对选择持开放态度。

更新：我确实找到了[CDOEX](http://msdn.microsoft.com/en-us/library/exchange/ms877946%28v=exchg.65%29.aspx)，但由于我以前从未使用过它，谁能告诉我从哪里开始以及它是否真的可以满足我的需求？我在文档中并没有看到太多关于 iCal 的内容，而且我需要在我的开发 PC 上安装 Exchange（对此并不疯狂）才能开始使用这个 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:34:15.927

您可以尝试使用[Redemption](http://www.dimastr.com/redemption/home.htm) - 它允许使用[RDOAppointmentItem](http://www.dimastr.com/redemption/RDOAppointmenItem.htm) .Import(..., olICal) 显式导入 iCal 文件。

# facebook - facebook oauth，没有基本权限的图片

> ID：11748941
> 
> 赞同：22
> 
> 时间：2012-07-31T21:01:26.460
> 
> 标签：facebook, oauth

我正在使用 oauth 将 facebook 用户登录到我的应用程序。我正在使用我的 FB 帐户和基本权限范围进行测试。Facebook 文档说我应该能够获得具有基本权限的“图片”，但是当我使用 API 访问它时，我的帐户没有“图片”属性。名字，姓氏等都在那里。

这是因为我的帐户无法公开查看吗？为什么会发生这种情况？我肯定附有个人资料图片。

这是我的脸书链接： http: [//www.facebook.com/josh.nankin](http://www.facebook.com/josh.nankin)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T14:09:51.793

最好的方法是保留基本权限并在单独的步骤中触发对图像的请求。用这种方式询问graph api：

```
https://graph.facebook.com/[fb_user_id]?fields=picture.type(small) 
```

大图：

```
https://graph.facebook.com/[fb_user_id]?fields=picture.type(large) 
```

您将收到如下 JSON 响应：

```
{
   "id": "100001XXXXXXXXX",
   "picture": {
      "data": {
         "url": "http://profile.ak.fbcdn.net/hprofile-XXXX/41524_1000018XXX51507_XXXX3_q.jpg",
         "is_silhouette": false
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-05T11:55:37.573

正如 Josh Nankin 所指出的，您可以直接从 facebook 返回的基本标准 OAuth 信息中获取个人资料照片 URL，但需要澄清一下。

您仍然可以使用返回的用户 ID 来请求照片，例如：

[https://graph.facebook.com/914431778578699/picture?type=large](https://graph.facebook.com/914431778578699/picture?type=large)

是相同的

[https://graph.facebook.com/dark.eye.1/picture?type=large](https://graph.facebook.com/dark.eye.1/picture?type=large)

这样，只需发出一个请求，因为您可以在将照片 URL 存储在数据库中时对其进行插值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T21:23:33.463

所以，仍然不确定为什么当你点击 API 上的 /me 路径时，graph api 没有返回图片属性，但是一旦你从 /me 获得用户名，你就可以很容易地在以下位置获取图片：

[https://graph.facebook.com/USERNAME/picture](https://graph.facebook.com/USERNAME/picture)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-01T09:18:04.390

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-26T13:28:54.697

实际上，您不需要允许公共访问来获取个人资料图片，因为您可以获得 USER_ID。通过 USER_ID，您可以轻松导航到个人资料图片。

```
function checkLoginState() {
    FB.getLoginStatus(function(response) {
        statusChangeCallback(response);
        console.log('Welcome!  Fetching your information.... ');
        var url = '/me?fields=id,name';
        FB.api(url, function(response) {
             var linkpp = 'https://graph.facebook.com/' + response.id + '/picture?type=large';
             document.getElementById("id_of_link_tag").href = linkpp;
        });
    });
} 
```

您可以将变量 linkpp 中的类型更改为*type* *=small*以返回低分辨率图像。

```
var linkpp = 'https://graph.facebook.com/' + response.id + '/picture?type=small'; 
```

# matlab - 如何在 ubuntu 64bit 上为 matlab 构建 FLANN

> ID：11748946
> 
> 赞同：2
> 
> 时间：2012-07-31T21:01:51.973
> 
> 标签：matlab, compilation

我在我的 linux 机器上从源代码构建 FLANN 时遇到了很多问题。我设法构建了 matlab 绑定并最终得到了一些 .m 文件。但是，matlab 文件夹下的一个这样的文件是我需要的 .m 文件的 .cpp 文件版本。因此，我无法运行 FLANN 演示代码。这是否意味着在编译过程中出现了问题？

我没有从“make”收到任何错误消息。但是，我确实收到了一些 lib 缺失错误，包括来自“cmake”的 CUDA lib 和 intel TBB。不确定这些是否重要。

这就是我所做的一切：

```
$ cd flann-x.y.z-src
$ mkdir build
$ cd build
$ cmake ..
$ make 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:05:42.160

CUDA 和 TBB 是可选的，它们不存在并不重要。

`.m`文件实际上是纯 Matlab 源，而不是任何编译的。除了一些`.m`文件之外，您最终应该在目录中添加一个`nearest_neighbors.mexa64`（或其他`mex`扩展名，具体取决于您的平台）`build/matlab/`。

这不会是`.m`和`.cpp`文件相同的目录——那是源目录。你可能应该跑去`make install`收集东西`/usr/local`，或者如果你这样做的话`cmake .. -DCMAKE_INSTALL_PREFIX=/wherever`。`.m`然后`.mexa64`，您将在. *_*`.cpp``/usr/local/share/flann/matlab/`

# phpmyadmin - wamp phpmyadmin scripts/setup.php 未找到，但存在

> ID：11748947
> 
> 赞同：1
> 
> 时间：2012-07-31T21:01:59.807
> 
> 标签：phpmyadmin, wamp, wampserver

我在我的 Windows 7 机器上安装了 wampserver 2.2 并且它运行了。到目前为止，一切都很好。

接下来的事情是开始`localhost/phpmyadmin/`工作，它现在正在做（添加`localhost`到`hosts`文件中）。但是然后...我在文件夹中有一些 php 文件，`www`当我将它们作为 运行时`localhost/whatevername.php`，它们都运行良好。

但是，如果我想转到`localhost/phpmyadmin/scripts/setup.php`，那么我的浏览器会说找不到该文件。我错过了什么？（这一定是愚蠢的......）

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:50:13.480

跳过这`setup.php`部分...

即，改用这个 -`localhost/phpmyadmin/setup/`

这解决了我的问题。祝朋友好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:45:54.527

我正在上一门课程，他们说该文件存在..但是当我搜索该文件时，它根本不存在。..这解释了为什么它不会运行。

# ios - 核心数据：为什么需要 NSFetchedResultsControllerDelegate？

> ID：11748951
> 
> 赞同：2
> 
> 时间：2012-07-31T21:02:20.123
> 
> 标签：ios, core-data

据我了解，NSFetchedResultsController 负责将数据从托管对象上下文同步到表视图控制器。代表在这里的作用是什么？我阅读了苹果文档并没有得到它。请简明扼要地阐述问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:19:31.003

好吧，简短的回答是，当对 NSFetchedResultsController (NSFRC) 中的托管对象执行操作时，委托方法允许您适当地更新表视图。

例如，如果您删除 NSFRC 结果中的对象，则它可以通过删除相应的行来更新表。

所以...

*   告诉`controllerWillChangeContent:`你的表格视图你要改变它是个好主意（所以你应该调用`beginUpdates:`它）

*   `controller:didChangeObject:atIndexPath:forChangeType`当托管对象更改（添加、删除、移动等）时调用。酌情更新表视图（例如，`deleteRowsAtIndexPaths:withRowAnimation:`如果托管对象被删除，则调用）

*   `controller:didChangeSection:atIndex:forChangeType`与上述类似，但适用于表格视图部分。

*   `controllerDidChangeContent`更改完成时调用。在此方法中完成还调用`endUpdates:`您的表格视图

希望这会有所帮助。

# html - 将浮动 div 拉伸到灵活容器高度的高度。div 有背景图片

> ID：11748953
> 
> 赞同：2
> 
> 时间：2012-07-31T21:02:20.750
> 
> 标签：html, css, background-image

我已经寻找答案并找到了一些，但它们看起来仅适用于具有背景颜色的 div，而不适用于带角的背景图像等。我的示例位于（已删除）

我希望菜单和“页面”在 100% 的时间里是相同的高度。无论哪个更大，即如果页面有更多内容，菜单必须拉伸，反之亦然。

如您所见，背景图像的阴影等是绝对位于相应 div 内的 div，然后 z-indexed 低于容器...

我会以错误的方式解决这个问题吗？洞察力将非常有帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:19:56.010

将 div 的高度属性设置为其父级的 100%，这将是文档的主体或包含 div。然后只需设置顶部和底部的边距。

```
#menuDiv {
    height: 100%;
    margin: 100px 0 25px 0;
} 
```

内容 div 也是如此。div 的大小属性不会因背景图像而改变。尽管最好将两个 div 放在包含 div 中，同时将两个子项（菜单和内容）设置为其父项的 100%，然后在包含 div 上设置一个等于菜单高度的最小高度。如果你不这样做并且内容 div 更小，它看起来会很丑。

# rodbc - R RODBC - sqlSave 小数精度问题

> ID：11748954
> 
> 赞同：2
> 
> 时间：2012-07-31T21:02:25.857
> 
> 标签：rodbc

我正在使用 RODBC 使用从 R 到 Oracle 的 sqlSave。我正在保存带小数位的数字并获得额外的小数位。例如：

来自 R 的 195.45 显示为

甲骨文中的 192.45000000000002

# css - IE8 不加载样式表

> ID：11748956
> 
> 赞同：1
> 
> 时间：2012-07-31T21:02:28.770
> 
> 标签：css, internet-explorer-8

嗨，我似乎在 IE8 加载样式表时遇到问题，在 IE9 中一切正常，但是当我在 IEteste 上尝试时，它似乎没有加载样式表。这是该网站的链接：

[网站链接](http://www.nistoralexandru.comule.com/articles.html)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:08:25.557

您有一个用于分析目的的脚本标记放置在 HTML 标记之外。理想情况下，它需要在 BODY 标签内。这会引发 HTML 验证错误。这可能是它的原因。

**编辑：**

正如有人提到的，您可能需要一些额外的 JavaScript 才能让 IE < 9 使用 HTML5 元素（标签）。低于 9 的 IE 无法理解这些标签中的许多标签，因此对它们应用样式将无济于事。它只是默默地失败了。

检查此页面以获取有关此的代码和信息： [http ://code.google.com/p/html5shim/](http://code.google.com/p/html5shim/)

应用 CSS 后，您可能还需要对这些元素`display: block`中的许多元素进行样式设置，默认情况下这些元素是内联的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:43:18.073

您似乎没有为旧浏览器包含 html5 javascript shiv：

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

我还将在 /body 标记内移动该尾随脚本。

# php - preg_replace 的格式以去除电话号码中的前导“1”和不需要的字符？

> ID：11748959
> 
> 赞同：3
> 
> 时间：2012-07-31T21:02:38.630
> 
> 标签：php, mysql

在我的 PHP 代码中，我可以通过使用从电话号码中删除连字符和括号

```
preg_replace('/\D+/', "", $cell); 
```

或者

```
preg_replace('/[ )(.-]/', "", $cell); 
```

两个问题：

(1) 以上哪种格式最适合删除所有不需要的字符（、-、.等，以及字母字符。

(2) 如果用户输入，我还需要删除前导“1”（美国的国家代码）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:22:02.683

有很多方法可以删除非数字，但我建议使用对您最有意义的任何方法，也就是说，当您几个月后再次查看代码时，哪种方法看起来最直观且易于理解。

您的`\D`作品很好，但添加也将取代您正在寻找`^1`的领先地位。`1`

```
preg_replace('/^1|\D/', "", $cell); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T21:08:15.920

1.  我会采用白名单方法：删除所有不是数字的内容，而不是删除列表a中的所有内容，

    ```
    /[^0-9]/ 
    ```

    你的第一个表达式`\D`应该做同样的事情。有什么问题吗？如果它有效，请保留它，因为使用第二种（黑名单）方法，您肯定会错过字符。要么，要么你的名单必须变得相当大。

2.  不是一个真正的答案，但绝对值得一提：国家代码要么是`+X`，要么`00X`（`+`实际上只是 的快捷方式`00`），因此删除前导`1`可能会导致非常丑陋的不良行为。必须说，我不确切知道那里的工作原理，但是在德国，*本地电话号码可以（理论上）以**任何*数字开头（当然除外`0`）。这表示您应该注意在删除不需要的字符 (1) 之前`+`替换前导。`00`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:20:55.703

`$cell=preg_replace("/[^0-9]/","", $cell);
$cell=preg_replace("/^1/","", $cell);`

会做

# c# - 我应该使用什么样的数据结构？

> ID：11748963
> 
> 赞同：-5
> 
> 时间：2012-07-31T21:02:51.760
> 
> 标签：c#, .net, oop, data-structures

对数组`<string, unsigned long>`

*   数组具有恒定数量的元素（`8`）。

*   字段`string`填充（不为空，PRIMARY KEY），并且永远不会更改其值。

*   默认`unsigned long`填充的字段，然后在运行时更改其值。`null`

*   会有很多这样的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:24:59.420

胡乱猜测...

```
public class MyData
{
    private Dictionary<string, ulong> _prop1=new Dictionary<string, ulong>(8);

    public Dictionary<string, ulong> Prop1
    {
        get { return _prop1; }
        set { _prop1 = value; }
    }

    public string CityName { get; set; }

    public ulong? Population { get; set; }
} 
```

对于很多这样的：

```
var alotofobject s= new List<MyData>(); 
```

编辑：

好的，现在我知道你需要什么了：

```
var cities=new Dictionary<string,ulong>(8);
cities.Add("City1",0);
cities.Add("City2",0);
cities.Add("City3",0);
cities.Add("City4",0);
cities.Add("City5",0);
cities.Add("City6",0);
cities.Add("City7",0);
cities.Add("City8",0); 
```

如果要设置或获取城市的人口，只需使用：

```
cities["City1"]=293238;

var populationOfCity1=cities["City1"]; 
```

作为建议，请购买一本 C# 初学者书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:15:34.043

你的问题不清楚，而是自相矛盾。如果你想要很多对象（如果你的意思是很多对）那么你可以使用一个集合`SortedList`。如果您只有 8 个这样的对，那么您可以使用另一个集合`Dictionary`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:26:54.910

你为什么不让你的生活变得简单，定义一个符合你标准的类，然后列出它们呢？

```
public class MyClass
{
   public string Name { get; set; }
   public long Number { get; set; } 
}

List<MyClass> myList = new List<MyClass>(); 
```

并从那里继续添加您需要的内容。

# java - 在 Guice 中使用通配符绑定泛型

> ID：11748966
> 
> 赞同：2
> 
> 时间：2012-07-31T21:02:59.027
> 
> 标签：java, guice

我正在尝试将 a 绑定`Class<? extends SuperClass>`到`SubClass.class`，但我找不到任何合适的东西。

实际上我的绑定需要在 a 中`Set<Class<? extends SuperClass>>`，所以我已经测试了普通绑定和多重绑定，但是我不能让它们中的任何一个正常工作。我想我正确地遵循了这个问题：[Using Guice, how can I injection a bounded-wildcard class?](https://stackoverflow.com/questions/8734826/using-guice-how-can-i-inject-a-bounded-wildcard-class) 但我不太确定，因为我的测试没有通过。

```
import static java.util.Collections.*;
import static org.junit.Assert.*;
import java.util.Set;
import org.junit.Test;
import com.google.inject.*;
import com.google.inject.multibindings.Multibinder;

public class GuiceWildcardTest {

    @Test public void binderShouldBindClassWithWildcard() {
        Guice.createInjector(new AbstractModule() {
            @Override protected void configure() {
                bind(new TypeLiteral<Class<? extends SuperClass>>() {}).toInstance(SubClass.class);
                ClassHolder holder = new ClassHolder();
                requestInjection(holder);
                assertEquals(SubClass.class, holder.type);
            }
        });
    }

    @Test public void multibinderShouldBindSetOfClassesWithWildcard() {
        Guice.createInjector(new AbstractModule() {
            @Override protected void configure() {
                Multibinder.newSetBinder(binder(), new TypeLiteral<Class<? extends SuperClass>>() {}).addBinding().toInstance(SubClass.class);
                SetHolder holder = new SetHolder();
                requestInjection(holder);
                assertEquals(singleton(SubClass.class), holder.types);
            }
        });
    }

    static class SuperClass {}

    static class SubClass extends SuperClass {}

    static class ClassHolder {
        @Inject Class<? extends SuperClass> type;
    }

    static class SetHolder {
        @Inject Set<Class<? extends SuperClass>> types;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:13:42.850

我的问题是我没有等待注射器完成。`requestInjection()`诀窍，但*在*创建之后，所以`Injector`不是在调用之后立即`requestInjection()`.

此代码有效：

```
import static java.util.Collections.*;
import static org.junit.Assert.*;

import java.util.Set;

import org.junit.Test;

import com.google.inject.AbstractModule;
import com.google.inject.Guice;
import com.google.inject.Inject;
import com.google.inject.TypeLiteral;
import com.google.inject.multibindings.Multibinder;

public class GuiceWildcardTest {

    @Test public void binderShouldBindClassWithWildcard() {
        final ClassHolder holder = new ClassHolder();
        Guice.createInjector(new AbstractModule() {
            @Override protected void configure() {
                bind(new TypeLiteral<Class<? extends SuperClass>>() {}).toInstance(SubClass.class);
                requestInjection(holder);
            }
        });
        assertEquals(SubClass.class, holder.type);
    }

    @Test public void multibinderShouldBindSetOfClassesWithWildcard() {
        final SetHolder holder = new SetHolder();
        Guice.createInjector(new AbstractModule() {
            @Override protected void configure() {
                Multibinder.newSetBinder(binder(), new TypeLiteral<Class<? extends SuperClass>>() {}).addBinding().toInstance(SubClass.class);
                requestInjection(holder);
            }
        });
        assertEquals(singleton(SubClass.class), holder.types);
    }

    static class SuperClass {}

    static class SubClass extends SuperClass {}

    static class ClassHolder {
        @Inject Class<? extends SuperClass> type;
    }

    static class SetHolder {
        @Inject Set<Class<? extends SuperClass>> types;
    }
} 
```

# gcc - 如何将 -m elf_i386 传递给 gcc？

> ID：11748970
> 
> 赞同：6
> 
> 时间：2012-07-31T21:03:26.683
> 
> 标签：gcc, ld

我是这样写的：

```
 gcc -m elf_i386 
```

它说：

```
gcc: error: elf_i386: No such file or directory 
```

基本上我正在尝试在 64 位系统上编译一个 32 位程序，但是错误：

```
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: 
skipping incompatible /usr/lib/libSDL.so when searching for -lSDL 
```

我检查了使用 -m32 构建的项目，我可以看到所有 *.o 文件都是 ELF 32 位 LSB，而 /usr/lib/libSDL.so 也是 ELF 32 位 LSB ......所以我可能需要将 -m elf_i386 传递给 ld 对吗？但我不直接使用 ld 我只是使用 gcc 来编译它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T15:50:47.430

```
gcc -m32 
```

可能是你想要的。正如 Alan Curry 在评论中提到的那样，elf_i386 由 gcc 传递给 ld（如果需要）。

“跳过不兼容的库”警告只是一个警告，如果它没有出现“找不到库”，那么您可以假设它链接到正确的二进制文件（因为 -m32 选项）。

# python - Django：Disabled Dropdown 不会将信息发送回 POST

> ID：11748971
> 
> 赞同：13
> 
> 时间：2012-07-31T21:03:27.833
> 
> 标签：python, django

我在模型表单中有一个下拉菜单，用户应该无法更改所选值。我发现 a`disabled`确实可以满足我的需要。然而，这有一个奇怪的地方：

第一次打开表单 (GET) 时，该值被选中，用户无法更改该值。这很棒：

![在此处输入图像描述](../Images/a6b1e9e4cb04dea54f28faaec2f68056.png)

但是一旦出现验证错误`unrelated field`并且 POST 将用户发送回相同的表单，之前的信息就会丢失。禁用的外键下拉列表不再包含任何值并且非常烦人。

![在此处输入图像描述](../Images/7c613e085e9dccbc0566c9a589578489.png)

我做了一些研究，在 stackoverflow 上发现了一些东西，似乎当禁用外键下拉小部件时，根本没有发回任何数据。[正如此处的第三个答案](https://stackoverflow.com/a/1424453/92153)所解释的那样，可以覆盖验证以不为下拉字段引发任何错误。但是，如果任何其他不相关的字段引发错误，则数据将丢失，因为禁用的下拉菜单从未首先将任何数据发送到 POST。

这是一个棘手的情况。

有没有办法将视图中的数据传递给 request.POST ？或者你有什么建议？我可以使用 a`readonly`而不是，`disabled`这会起作用，但是用户可以更改下拉列表，这也很烦人。

有任何想法吗？非常感谢

**编辑：**

小修正：数据没有完全丢失。相反，选择被错误地设置为初始虚拟值。

```
 <select id="id_form-0-deal_type" name="form-0-deal_type" disabled="disabled">
      <option selected="selected" value="">---------</option>
      <option value="1">deal 1</option>
      <option value="2">deal 2</option>
    </select> 
```

**更新：**

Francis 的解决方案看起来很有希望。所以我尝试了他的第二个建议，并在 html 中添加了一个隐藏的输入字段，并将正确的值传递给 POST。

现在的问题是如何进行。我试图像这样在表单集的表单查询字典中添加缺少的条目（为了设置正确的下拉值）

```
formset.forms[0].data['form-0-deal_type'] = formset.forms[0].data['form-0-hiddenfield'] 
```

但它说`This QueryDict instance is immutable`

唯一的另一种方法是通过具有常规表单集的[首字母](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-initial-data-with-a-formset)来设置它。不幸的是，我正在使用模型表单集，它[不支持](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#providing-initial-values)现有表单的首字母。

如果没有其他解决方案，我开始将我的模型表单集重构为常规表单集。仍然开放的想法...

**最终更新+解决方案：**

无需将 modelformset 重构为常规 fomset。事实上，我非常不鼓励这样做，因为它本身会带来其他问题。modelformsets 为您处理一切并填补缺失的部分。

实际问题是 QueryDict 是不可变的，但这可以通过复制它们轻松解决：

```
formset = deal_formset(request.POST, queryset=formset_query)        
if formset.is_valid():
  pass
else:
  new_post = request.POST.copy()
  deal_types = dict()
  for k,v in new_post.items():
     if k.startswith('hidden'):
        deal_types[k[7:]]= v
  for k,v in deal_types.iteritems():
     new_post[k] = v
  formset = deal_formset(new_post, queryset=formset_query) 
```

这加上弗朗西斯的解决方案：

```
{{ formset.management_form }}
  {% for fs in formset %}  
     {{ fs.id }} 
     <input type="hidden" name="hidden-{{ fs.prefix }}-deal_type" value="{{fs.deal_type.value}}" />
   {{fs.deal_type}}
{% endfor %}
{% endif %} 
```

只是创造奇迹......享受:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T21:27:14.570

它不是 django 的东西，它是 HTML 的东西。禁用的表单元素不会由表单发送。

> [元素] 无法接收用户输入，也不会与表单一起提交其值。

[http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1) & [http://www.w3schools.com/tags/att_input_disabled.asp](http://www.w3schools.com/tags/att_input_disabled.asp)

`readonly`如果它在文本/文本区域 [http://www.w3schools.com/tags/att_input_readonly.asp](http://www.w3schools.com/tags/att_input_readonly.asp)上，您可以使用

您可以做的其他事情是显示值纯文本，并将其作为隐藏字段提交....

```
{{ form.field_name.label_tag }}
{{ form.field_name.value }}
<input type="hidden" name="field_name" value="{{form.field_name.value}}" /> 
```

它不是很优雅，但它可以让你到达那里。

您还可以更进一步，编写一些 JS 来查找禁用的元素并在之后添加带有该元素名称和值的输入。

一些示例 JQuery：

```
//Untested, but you get the gist
$(':disabled').each(
    function()
    {
        $(this).after('<input type="hidden" name="' + $(this).attr('name') + '" value="' + $(this).val() + '" />');
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:03:17.953

好吧，您可以在模板中设置具有隐藏属性的元素，使用视图中的表单集来构建表单：

```
{{form.field.as_hidden}} 
```

在视图内部，如果问题是数据丢失，您始终可以为适合您模型结构的字段设置初始值，因为它是外键。当然，您必须在提交之前验证表单，如果表单无效，您可以在必须始终填写的字段上使用初始值呈现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:27:38.907

我认为这是一个 HTML 问题，而不是 Django，禁用的表单字段不会将它们的值发回，所以你失去了价值。

如果验证失败，是否可以将值重新绑定到字段？你可以尝试类似的东西

```
if form.is_valid(): # All validation rules pass
    #save form, redirect, etc.
else:
    form.disabled_field = my_value
return render(request, 'contact.html', {'form': form,}) 
```

显然，您需要用模型中的正确数据替换字段名称和值。

# excel - 使用不同的 Excel 文件绘制图形

> ID：11748972
> 
> 赞同：1
> 
> 时间：2012-07-31T21:03:37.583
> 
> 标签：excel, qt, matlab, java

我有一些数据存储在不同的**Microsoft Excel 工作表 (.xlsx)**中。
现在我想通过使用这些数据（在不同的 .xlsx 文件中）来绘制图表。
我怎样才能做到这一点 ？
表示我应该使用哪种**语言**或**平台**或与此相关的任何其他帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T11:58:13.443

如果您熟悉 java，则可以使用 Java API 创建图形。您可以使用 Apache POI 或 jfreechart 或 openxmlformats（apache 提供的 api）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:14:20.910

[`xlsread`](http://www.mathworks.com/help/techdoc/ref/xlsread.html)Matlab 具有从 Excel 文件中解析数据的内置函数。根据文件的组织方式，编写一些代码来读取它们应该很容易，连接数据矩阵并绘制它们也很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:20:09.157

如果您使用 saveAs 将它们保存为 CSV 文件，您可以非常轻松地将它们读入 Java 并使用 String.split(",") 拆分值。如果您想将它们保存为 .xlsx 文件，[JExcelApi](http://jexcelapi.sourceforge.net/)可能会有所帮助，尽管我个人从未使用过它。至于绘图，我推荐[Javaplot/gnuplot](http://gnujavaplot.sourceforge.net/JavaPlot/About.html)、[Jzy3D](http://www.jzy3d.org/)或[JMathPlot](http://code.google.com/p/jmathplot/) ，具体取决于您要绘制的内容。它们是免费的并且相对容易使用。

# php - 按月分组的不同记录计数总计

> ID：11748976
> 
> 赞同：0
> 
> 时间：2012-07-31T21:03:43.790
> 
> 标签：php, sql, sql-server

我有一个用户表，我需要在其中运行报告并显示给定年份每个月用户进入系统的次数。我创建了一个表，其中第一列返回不同的用户。接下来，在右侧，我想显示每个月用户输入了多少次。我目前拥有的代码只计算每个月的总数，并将每个月的总数放入所有用户。在下面的案例中，它为每个用户列出了 5 月的 7 个、6 月的 13 个和 7 月的 12 个。但我希望它显示如下，它按月分解。

```
Users    May    June    July  
User1     1       2       3     
User2     1       1       2  
User3     5       10      7   

<?php
$sql = "SELECT record,count(*) as TotalCount,

(select DISTINCT count(*) from Table1 WHERE datereceived BETWEEN '2012-05-01' AND '2012-05-31') as May,
(select DISTINCT count(*) from Table1 WHERE datereceived BETWEEN '2012-06-01' AND '2012-06-30') as June,
(select DISTINCT count(*) from Table1 WHERE datereceived BETWEEN '2012-07-01' AND '2012-07-31') as July
FROM Table1 GROUP BY record";
$params = array();
$options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET );
$stmt = sqlsrv_query( $conn, $sql ,  $params, $options );
if( $stmt === false)
{
echo "Error in query preparation/execution.\n";
die( print_r( sqlsrv_errors(), true));
}
while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC)) { 
?>  

<tr id="styling">
    <td class="style"><?php echo $row['record']; ?></td>
    <td class="style"><?php echo $row['May']; ?></td>
    <td class="style"><?php echo $row['June']; ?></td>
    <td class="style"><?php echo $row['July']; ?></td>
</tr>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:19:55.047

嗨，你可以试试这个

按名字从用户组中选择不同的fitstname，datename（month，datereceived），count（*），datename（month，datereceived）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:15:49.287

我认为最好按您的日期字段分组，而不是您现在如何使用它。

```
select DISTINCT count(*) from Table1 GROUP BY EXTRACT(MONTH FROM datereceived) 
```

但我看不到您使用哪个字段来识别用户。您也可以尝试在该领域进行分组。

# html -   显示为“？” HTML上的问号

> ID：11748978
> 
> 赞同：2
> 
> 时间：2012-07-31T21:03:53.040
> 
> 标签：html, jsp, xslt, character-encoding

我对 XSLT 有疑问...

```
<xsl:text>&#160;</xsl:text> 
```

然后在生成之后，由于某种原因，生成的 JSP 文件会产生一个“？” 反而。怎么了？

我最近的系统更改：
我更改了 Java5 -> Java6
Weblogic -> Weblogic12
Eclipse Ganymede -> Oracle Pack Eclipse

编辑 1：， `<xsl:output method="xml"/>`编码=UTF-8

原始 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:include href="common.xsl"/>

    <xsl:output method="xml"/>

    ...

    <xsl:template name="makeLink">
        <xsl:variable name="fieldtype" select="name()"/>

        <xsl:variable name="currentNode"><xsl:value-of select="generate-id()"/></xsl:variable>

        <xsl:variable name="appendSpace">
            <xsl:for-each select="ancestor::ButtonList[position() = 1]/descendant::Button">
                <xsl:if test="generate-id() = $currentNode and position() &gt; 1">true</xsl:if>
            </xsl:for-each>
        </xsl:variable>

<a href="{$url}">
            <xsl:attribute name="id">btn_<xsl:value-of select="Action"/></xsl:attribute>
            <xsl:call-template name="populateAttributes">
                <xsl:with-param name="fieldtype">
                    <xsl:value-of select="$fieldtype"/>
                </xsl:with-param>
            </xsl:call-template>

            <xsl:copy-of select="@class"/>
            <xsl:copy-of select="@style"/>

            <xsl:text>&lt;span&gt;&lt;span&gt;</xsl:text><xsl:value-of select="$buffer"/><xsl:text>&lt;/span&gt;&lt;/span&gt;</xsl:text>
</a>
        <xsl:if test="not(@omitWhiteSpace)">
            <xsl:text>&#160;</xsl:text>
        </xsl:if>
        <xsl:if test="ReadOnly and ReadOnly != 'someReadOnlyMethod'
            and ReadOnly != 'someReadyOnlyMethod'
            and ReadOnly != ''">
            <xsl:text>&lt;/c:if&gt;</xsl:text>
        </xsl:if>
</xsl:template>
.... 
```

转换后（在 XSLT 之后）和生成的 JSP 页面：

```
<%@ page contentType = "text/html;charset=GBK"%>
<%@ page isELIgnored = "false"%>
<%@ page language="java" 
import=" my.controller.*, my.core.config.*, my.core.datastructure.*, my.core.error.*, my.core.util.*,
my.service.Constants, my.service.modulesvr.ModuleBean, myW.sn.*, java.util.Locale, java.util.Map"%>
<%@ taglib uri="http://www.mycompany.com/my/tags/htmltag-10" prefix="html"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%MySn mySession = (MySn) session.getValue("MySn"); QuickSearchController mb = (mySession == null) ? null : (QuickSearchController)
mySession.getModuleBean(); String sessionToken = mySession.getSessionToken(); String htmlCharSet = mySession.getEncoding();
MyUsr user = mySession.getMyUsr(); String[] result; Object o;%>

.........

<a href="#" id="btn_NEWPROP" onclick="submitForm('/xxx/xxx/NEWPROP','theForm');    return (false);" class="actionBtn"><span><span>NEW PROP</span></span></a> </c:if> 
```

编辑2：如果我使用`<xsl:text>&amp;#160;</xsl:text>`而不是`<xsl:text>&#160;</xsl:text>`......问题似乎已经消失了。在 JSP 中，它将显示为  ，而在浏览器中，它被视为一个不间断的空格，这是预期的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:07:16.730

如果您的编码错误，通常会发生这种情况。你用什么编码写你的输出？你是如何提供页面的？可能您正在以 UTF-8 进行序列化，但尝试以 ISO-8859-1（或 Windows-1252）显示，反之亦然。

检查某处的默认编码是否已更改。

仅仅因为你说`<xsl:output method="xml" encoding="UTF-8"/>`并不意味着程序会尊重它。XSLT 是否嵌入在一段 Java 中？Java 是否控制流/读取器/写入器？

如果您可以保存文件的一部分并将其转储为 HEX，您应该很快就能找到。如果您看到`0xC2 0xA0`，那么您的文件确实是 UTF-8。但是，如果您只是`0xA0`单独看到，那么您处于 ISO-8859-1 或它的密切关系之一。

It's also possible that the page is being rendered properly, but the page is being served up with the wrong encoding. Can you look at the headers returned, perhaps by using Firebug in Firefox or in Chrome "Web Developer->Information->View Response Headers" or by using the IE debug tools.

# c - 在活动中睡觉

> ID：11748979
> 
> 赞同：2
> 
> 时间：2012-07-31T21:03:56.427
> 
> 标签：c, windows, multithreading

我有一个多线程程序，我在一个线程（线程 A）中无条件地休眠无限时间。当另一个线程（线程 B）中发生事件时，它通过信号唤醒线程 A。现在我知道有多种方法可以做到这一点。当我的程序在 Windows 环境中运行时，我在 Thread-A 中使用 WaitForSingleObject，在 Thread-B 中使用 SetEvent。它工作没有任何问题。我还可以使用基于文件描述符的模型进行轮询、选择。有不止一种方法可以做到这一点。但是，我正在尝试找到最有效的方法。每当 Thread-B 发出信号时，我想尽快唤醒 Thread-A。你认为什么是最好的选择。我可以探索基于驱动程序的选项。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:41:46.940

如前所述，触发`SetEvent`线程 B`WaitForSingleObject`中的一个和线程 A 中的一个很快。但是必须考虑一些条件：

*   单核/处理器：正如 Martin 所说，等待线程将抢占信号线程。使用这样的方案，您应该注意信号线程 (B) 在`SetEvent`. 这可以通过一个`sleep(0)`例子来完成。

*   多核/处理器：人们可能认为将两个线程放在不同的核/处理器上会有好处，但这并不是一个好主意。如果两个线程都在同一个核心/处理器上，调用`SetEvent`和返回之间的时间跨度`WaitForSingleObject`会更短。

*   在一个内核上处理两个线程 ( [SetThreadAffinityMask](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686247%28v=vs.85%29.aspx) ) 还允许通过它们的优先级设置 ( [SetThreadPriority](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686277%28v=vs.85%29.aspx) ) 来处理它们的行为。您可以以更高的优先级运行等待线程，或者您必须确保信号线程在设置事件后确实没有做任何事情。

*   您必须处理其他一些同步问题：下一个事件何时发生？线程 A 会完成它的任务吗？最有效的第二个事件可以用来解决这个问题：当线程 A 完成时，它设置一个事件以指示允许线程 B 再次设置它的事件。线程 B 将有效地先设置事件然后等待反馈事件，它满足立即进入空闲状态的要求。

*   如果您想允许线程 B 设置事件，即使线程 A 尚未完成且尚未处于等待状态，您应该考虑使用信号量而不是事件。这样，来自线程 B 的“调用/事件”的数量得以保留，线程 A 中的等待函数可以跟进，因为它返回的信号量已被释放的次数。信号量对象与事件一样快。

**概括：**

*   通过`SetThreadAffinityMask`.

*   通过另一个事件扩展`SetEvent`/`WaitForSingleObject`以建立`Handshake`.

*   根据处理的细节，您还可以考虑[信号量对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685129%28v=vs.85%29.aspx)。

# php - 如何从 include() 文件中创建相对于不同 PHP 文档的链接？

> ID：11748987
> 
> 赞同：2
> 
> 时间：2012-07-31T21:04:26.357
> 
> 标签：php, include, relative-path

我正在设置我的网站以使用该`include()`语句来标准化页眉、页脚和导航等内容，例如

`include('header.php);`

但是，当我对两个不同目录中的页面使用相同的头文件时，`header.php`break 中包含的相对链接，例如：

头文件.php
`<a href="images/dog.jpg">`

index.php
`include('header.php);`
变成
`<a href="images/dog.jpg">`

这是有效的，因为这是从 index.php 文件到 dog.jpg 的正确路径。

动物/canine.php
`include('header.php);`
变成
`<a href="images/dog.jpg">`

这不起作用，因为animals/images/dog.jpg 不存在。

所以，我的问题是，当包含 header.php 时，我可以在 header.php 文件中更改哪些内容，以便将 dog.jpg 的 url 调整为在 index.php 和 animal/canine.php 中工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T21:07:17.897

更改包含以使用绝对路径：

```
<a href="/images/dog.jpg"> 
```

这样，它们将基于您网站的根目录，并始终指向正确的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:10:18.973

创建一个名为的新变量`$root_path`，并将相对于您所在页面的 Web 目录的根路径放入其中。确保在包含 header.php 之前声明它

这样`mysite.com/junk/index.php`您的图像资产就在`../images/`

```
<?php
$root_path = '../'
include('header.php'); 
```

输出资产 url 时，放在`$root_path`它前面。

# eclipse - jpa/eclipselink 获取数据错误

> ID：11748988
> 
> 赞同：2
> 
> 时间：2012-07-31T21:04:28.260
> 
> 标签：eclipse, jpa

我想从 sql server 数据库中获取数据，所以我使用 jdbc 驱动程序和 eclipselink orm 框架。我有一些问题。这是我的例子，

```
public static void main(String[] args)
{
        EntityManager entityManager =  
                Persistence.createEntityManagerFactory("HRPSPU").createEntityManager();

        List<Personnel> personnelList = entityManager.createQuery("Select p FROM Personnel p",Personnel.class).getResultList();

        for (Personnel personnel : personnelList)
        {
                System.out.println(personnel.getName());
        }
    } 
```

和错误，

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/E:/tutorial/glassfish3/glassfish/modules/bean-validator.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/E:/tutorial/glassfish3/glassfish/modules/weld-osgi-bundle.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
Tem 31, 2012 11:44:51 PM org.hibernate.validator.util.Version <clinit>
INFO: Hibernate Validator 4.2.0.Final
[EL Info]: 2012-07-31 23:44:51.929--ServerSession(451764492)--EclipseLink, version: Eclipse Persistence Services - 2.4.0.v20120608-r11652
[EL Info]: connection: 2012-07-31 23:44:52.951--ServerSession(451764492)--file:/E:/tutorial/workspace/HRPS/build/classes/_HRPSPU login successful
[EL Warning]: 2012-07-31 23:44:53.927--UnitOfWork(1400947054)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DatabaseException
**Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'Personnel'.**
Error Code: 208
Call: SELECT IdentificationNumber, Age, Name, Surname FROM Personnel
Query: ReadAllQuery(referenceClass=Personnel sql="SELECT IdentificationNumber, Age, Name, Surname FROM Personnel")
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'Personnel'.
Error Code: 208
Call: SELECT IdentificationNumber, Age, Name, Surname FROM Personnel
Query: ReadAllQuery(referenceClass=Personnel sql="SELECT IdentificationNumber, Age, Name, Surname FROM Personnel")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:646)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:537)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1800)
    at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:566)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:648)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2681)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2634)
    at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:420)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1149)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:852)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1108)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1196)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2875)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1549)
    at org.eclipse.persistence.internal.jpa.QueryImpl.executeReadQuery(QueryImpl.java:231)
    at org.eclipse.persistence.internal.jpa.QueryImpl.getResultList(QueryImpl.java:411)
    at entity.Main.main(Main.java:18)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'Personnel'.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:285)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:938)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:609)
    ... 22 more 
```

这是我的persistance.xml，我连接了integratedsecurity=true，所以我没有用户名和密码......

```
 <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
        <persistence-unit name="HRPSPU" transaction-type="RESOURCE_LOCAL">
             <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
            <class>entity.Personnel</class>
         <properties>
          <property name="javax.persistence.jdbc.url" value="jdbc:sqlserver://localhost:1433;databaseName=Arge;integratedSecurity=true;"/>
          <property name="javax.persistence.jdbc.driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
          <property name="javax.persistence.jdbc.password" value=""/>
          <property name="javax.persistence.jdbc.user" value=""/>
         </properties>
        </persistence-unit>
    </persistence> 
```

我使用 Eclipse Juno IDE 和 Glassfish 应用服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:39:40.320

我解决了我的问题。它会导致如果您在数据库上创建自己的模式，则会在 Table 注释上导入实体类。例如：

```
 @Table(name="Example",schema="Example",catalog="Example") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:06:51.047

现在的情况是，数据库中没有这样的表；Eclipse 链接看到映射并发出 SQL，在 DB 中失败。也许你没有连接到正确的模式，或者你需要一个`@Table`注释`Personnel`，如果它在 SQL 服务器中以其他方式调用，即：

```
@Entity
@Table(name="...")
public class Personnel{   } 
```

显示您的实体和表定义会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:31:07.037

我有一个数据库和架构。我的表在这个架构里面。我连接到本地主机。

包装实体；

```
import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the Personnel database table.
 * 
 */
@Entity
@Table(name="Personnel")
public class Personnel implements Serializable {
    private static final long serialVersionUID = 1L;

    @Column(name="Age")
    private short age;

    @Column(name="IdentificationNumber")
    @GeneratedValue
    @Id
    private long identificationNumber;

    @Column(name="Name")
    private String name;

    @Column(name="Surname")
    private String surname;

    public Personnel() {
    }

    public short getAge() {
        return this.age;
    }

    public void setAge(short age) {
        this.age = age;
    }

    public long getIdentificationNumber() {
        return this.identificationNumber;
    }

    public void setIdentificationNumber(long identificationNumber) {
        this.identificationNumber = identificationNumber;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSurname() {
        return this.surname;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    }
} 
```

# r - 如何使用 predict() 函数存储预测值

> ID：11748992
> 
> 赞同：0
> 
> 时间：2012-07-31T21:04:52.547
> 
> 标签：r

我有一个包含 2 年观察数据点的时间序列，并且正在使用 Holt-Winters 创建预测模型。然后我使用 R predict 函数推断未来 24 个月。

当前的预测对象是一个时间序列，如下所示：

```
 Jan  Feb  Mar June ...
2012  xxx  yyy  zzz xxy
2013  xyx  yxy  zyz zxz 
```

但是，当我访问诸如 myPrediction[1] 之类的 TS 对象时，我只返回值 xxx。

我正在尝试存储预测对象的 DATE 和 VALUE。最终，我希望创建一个 data.frame 或一些可以直接导出到 MySQL 表的对象，其中显示：

```
Projection Date  Value
2012-01-01        xxx
2012-02-01        yyy
2012-03-01        zzz
...
...
2013-01-01        xyx 
```

有什么简单的方法可以创建两列来显示我返回的预测函数的日期 + 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:11:07.423

时间序列对象有点奇怪。它们是向量，将它们的开始和结束时间存储为分数年和属性中的间隔数，而不是作为列或行名访问。您可以构建一个包含两列的数据框：

```
 tsobj <- ts(1:24,  frequency = 12, start = c(2012, 1))
 tsattr <- tsp(tsobj)
 data.frame(Dates =seq(tsattr[1], tsattr[2], by= 1/tsattr[3] ),
            Value = tsobj )
          Dates Value
1  2012.000     1
2  2012.083     2
3  2012.167     3
4  2012.250     4
5  2012.333     5
 snip
#------a character valued column ----------
data.frame(Dates =paste( rep( c(2012,2013), each= 12 ),seq(1:12 ), sep="-"), 
            Value = tsobj)
     Dates Value
1   2012-1     1
2   2012-2     2
3   2012-3     3
4   2012-4     4
5   2012-5     5
snip
#------Date-classed column -----
 data.frame(Dates =as.Date(paste( rep( c(trunc(tsattr[1]), trunc(tsattr[2]) ), 
                            each= 12 ),
                            seq(1:12 ),
                            1,
                            sep="-")), 
             Value = tsobj)
#----
        Dates Value
1  2012-01-01     1
2  2012-02-01     2
3  2012-03-01     3
4  2012-04-01     4
5  2012-05-01     5
6  2012-06-01     6 
```

# ruby-on-rails - 使用Passenger部署Rails“您要查找的页面不存在”

> ID：11748993
> 
> 赞同：2
> 
> 时间：2012-07-31T21:04:56.327
> 
> 标签：ruby-on-rails, ruby, passenger

我正在尝试使用Passenger 部署Rails 应用程序。我遵循了本指南：[http](http://wiki.ocssolutions.com/Deploying_a_Rails_Application_With_Passenger) ://wiki.ocssolutions.com/Deploying_a_Rails_Application_With_Passenger并安装了我所有的 gem，但是当我转到我的应用程序应该所在的位置时，我看到了

```
The page you were looking for doesn't exist.
You may have mistyped the address or the page may have moved. 
```

我意识到这不是很多信息，但我现在不知道该怎么做。我从哪里开始解决这个问题？

编辑：这是在日志中

```
Started GET "/rideboard" for 173.64.211.61 at 2012-07-31 18:31:26 -0400

ActionController::RoutingError (No route matches [GET] "/rideboard"):
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
passenger (3.0.7) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
passenger (3.0.7) lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
passenger (3.0.7) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
passenger (3.0.7) lib/phusion_passenger/rack/application_spawner.rb:205:in `start_request_handler'
passenger (3.0.7) lib/phusion_passenger/rack/application_spawner.rb:170:in `block in handle_spawn_application'
passenger (3.0.7) lib/phusion_passenger/utils.rb:479:in `safe_fork'
passenger (3.0.7) lib/phusion_passenger/rack/application_spawner.rb:165:in `handle_spawn_application'
passenger (3.0.7) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
passenger (3.0.7) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
passenger (3.0.7) lib/phusion_passenger/abstract_server.rb:180:in `start'
passenger (3.0.7) lib/phusion_passenger/rack/application_spawner.rb:128:in `start'
passenger (3.0.7) lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
passenger (3.0.7) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
passenger (3.0.7) lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
passenger (3.0.7) lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
<internal:prelude>:10:in `synchronize'
passenger (3.0.7) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
passenger (3.0.7) lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
passenger (3.0.7) lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
passenger (3.0.7) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
passenger (3.0.7) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
passenger (3.0.7) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
passenger (3.0.7) helper-scripts/passenger-spawn-server:99:in `<main>' 
```

一个可能的问题是，在开发中我使用的是 Ruby 1.9.3，而在生产中，服务器使用的是 1.9.2。这可能是造成的吗？

这是我的 routes.rb 文件：

```
Rideboard::Application.routes.draw do
  resources :requests

  get "info/about"

  resources :rides

  get "home/index"

  root :to => "rides#index"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:59:15.470

实际上，您`routes.rb`匹配请求的路径中没有路由`/rideboard`。但是，您似乎已将您的应用程序本地部署到该子路径，因此`http://your.host/rideboard`实际上请求您的应用程序的根路径。

您可以尝试在服务器上请求应用程序的实际根路径，即`http://your.server/`. 它可能应该显示您的应用程序的主页。如果你真的想在 下部署它`/rideboard`，你必须调整你的部署设置。对于乘客，您必须`RackBaseURI`在遵循[乘客文档的](http://modrails.com/documentation/Users%20guide%20Apache.html#deploying_rack_to_sub_uri)同时使用。

# c++ - 需要 API 将日志消息发送到服务器

> ID：11748995
> 
> 赞同：0
> 
> 时间：2012-07-31T21:04:58.253
> 
> 标签：c++, c, logging, network-programming

C/C++ 中是否有 API 可以可靠地发送日志消息？如果跨平台更好

类似于客户端的东西：SEND_LOG(192.168.1.12,"file opens");

服务器端字符串 s=RECEIVE();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:28:56.283

阿帕奇 log4cxx

[http://logging.apache.org/log4cxx/](http://logging.apache.org/log4cxx/)

# jquery - 使用超大 API/变量切换图像上的 css 类

> ID：11748998
> 
> 赞同：0
> 
> 时间：2012-07-31T21:05:15.163
> 
> 标签：jquery, api, supersized, variables

我正在使用 Supersized jQuery 插件为我的背景设置动画，并且我使用他们的 API 在单击图像/链接时更改幻灯片（我使用过：

```
$('.navone').click(function(){
api.goTo(1);
}); 
```

现在我需要活动图像/链接在幻灯片处于活动状态时具有背景图像，到目前为止我有这个：

```
jQuery(function($){
if(vars.current_slide = 1){
$('.navone').toggleClass('active');
});
}); 
```

这似乎没有任何作用，我对 javascript 和 jQuery 还是很陌生，任何建议都会很棒。

编辑：

我放了

```
if (vars.current_slide == 1){
(‘#navone’).addClass(‘.active’);
} else {
(‘#navone’).removeClass(‘.active’);
} 
```

在 supersized.shutter.js 的 afterAnimation : function(){ 部分中，但它似乎根本没有做任何事情。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:08:57.837

```
$(document).ready(function(){ //waits until the document is ready
    $('.navone').click(function(){ //bind a function to the element with class navone
        $('.active').removeClass('active'); //remove all active class
        $(this).addClass('active'); //add class active to the navone link
        api.goTo(1); //make the supersized go to the the slide 1
    });
}); 
```

我不能 100% 确定这个 api 的 .goto 函数，但如果它在第一行工作，它现在就可以工作了。:)

supersized 似乎创建了一个自动导航，但您不必在函数中指定它，尝试使用它，并检查它是否有效，然后您可以重新设置 div 的样式：

```
<div id="controls-wrapper" class="load-item">
    <div id="controls">
        <ul id="slide-list"></ul>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:17:25.303

将该语句更改为“switch”语句，并将该类添加为最初在实际链接上启动。

```
afterAnimation : function(){
        $('#navone,#navtwo,#navthree,#navfour,#navfive,#navsix,#navseven').removeClass('active');
        switch(vars.current_slide) {
            case 0 : $('#navone').addClass('active'); break;
            case 1 : $('#navtwo').addClass('active'); break;
            case 2 : $('#navthree').addClass('active'); break;
            case 3 : $('#navfour').addClass('active'); break;
            case 4 : $('#navfive').addClass('active'); break;
            case 5 : $('#navsix').addClass('active'); break;
            case 6 : $('#navseven').addClass('active'); break;
        }
} 
```