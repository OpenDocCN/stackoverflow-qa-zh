# StackOverflow 问答 10318000-10318999

# php - 20 公里/英里绕纬度，长

> ID：10318002
> 
> 赞同：1
> 
> 时间：2012-04-25T14:39:25.133
> 
> 标签：php, mysql, math, map

我在我的数据库中保存了不同的供应商，并保存了他们自己的纬度和纵向位置。

然后我使用谷歌地图在地图上精确定位它们，但是您还有一个搜索功能，您可以在其中输入您想要的任何地址，“周围”为 5/10/20 公里/英里。

因此，例如，当我搜索伦敦和周围 10 公里时，我希望所有来自伦敦的供应商都返回该点周围的纬度和经度 + 10 公里。

现在我的功能略有不同（显然没有半径选项）

```
private function findServicesNearLocation($filter = array(), $lat, $lng) {
    // set radius
    $difference = 0.07;

    // build filter
    $latitude_from = floatval($lat) - $difference;
    $latitude_to = floatval($lat) + $difference;
    $longitude_from = floatval($lng) - $difference;
    $longitude_to = floatval($lng) + $difference;

    $filter[] = "a.gps_latitude >= {$latitude_from}";
    $filter[] = "a.gps_latitude <= {$latitude_to}";
    $filter[] = "a.gps_longitude >= {$longitude_from}";
    $filter[] = "a.gps_longitude <= {$longitude_to}";

    // return services
    return $this->vendors->getVendors(implode(' AND ', $filter));
} 
```

我将如何更改上述功能以做出适当的估计并从特定的“周围 10 公里”的纬度和经度中选择所有供应商。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:54:03.920

看起来您正在搜索矩形，而不是半径。

为此，您可以使用**MySQL Spatial Extension**并在此处阅读有关实施的更多信息：[Geo-Distance-Search-with-MySQL](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)

但是为了您的信息，**mongoDB**可以通过一个简单的“SELECT”来做到这一点。给他一个位置和一个范围，它就完成了。更多信息：[MongoDB地理空间索引](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:56:02.250

我认为这是您所要求的答案。纬度和经度相距大约 111 公里，因此您可以将其计算到您的数学中。我希望这是你要问的。

```
private function findServicesNearLocation($filter = array(), $lat, $lng, $distanceKilometers=0) {
    // set radius
    $difference = 0.07;
    $distance=$distanceKilometers!=0?ceil($distanceKilometers/111):0;
    // build filter
    $latitude_from = floatval($lat) - $difference - $distance;
    $latitude_to = floatval($lat) + $difference + $distance;
    $longitude_from = floatval($lng) - $difference - $distance;
    $longitude_to = floatval($lng) + $difference + $distance;

    $filter[] = "a.gps_latitude >= {$latitude_from}";
    $filter[] = "a.gps_latitude <= {$latitude_to}";
    $filter[] = "a.gps_longitude >= {$longitude_from}";
    $filter[] = "a.gps_longitude <= {$longitude_to}";

    // return services
    return $this->vendors->getVendors(implode(' AND ', $filter));
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-07-08T11:37:20.467

```
SELECT Latitude, Longitude, 111.045* DEGREES(ACOS(COS(RADIANS(latpoint)) * COS(RADIANS(Latitude)) * COS(RADIANS(longpoint) - RADIANS(Longitude)) + SIN(RADIANS(latpoint)) * SIN(RADIANS(Latitude)))) AS distance_in_km FROM table JOIN ( SELECT 42.81 AS latpoint, -70.81 AS longpoint ) AS p ON 1=1 ORDER BY distance_in_km LIMIT 15 
```

# javascript - ajax淡入淡出效果，不用jQuery

> ID：10318005
> 
> 赞同：0
> 
> 时间：2012-04-25T14:39:31.667
> 
> 标签：javascript, ajax

我正在寻找一种在 ajax 中显示简单淡入或淡出效果的方法，并使用颜色或背景颜色使其漂亮，但没有 jQuery，因为 jQuery 不适合小型网页，而且对于连接不良的网页来说太重了！

我需要一个函数，当 OnReadyStat 变为 4 或 xmlhttp.status 等于 200 时可以使用，然后以简单的效果显示结果。

我认为 Microsoft DXImageTransform 可以帮助我，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:43:47.187

[http://duckduckgo.com/?q=css+javascript+opacity+fade](http://duckduckgo.com/?q=css+javascript+opacity+fade)

[http://www.switchonthecode.com/tutorials/javascript-tutorial-simple-fade-animation](http://www.switchonthecode.com/tutorials/javascript-tutorial-simple-fade-animation)

[http://www.itnewb.com/tutorial/Cross-Browser-CSS-Opacity-and-the-JavaScript-Fade-Fading-Effect](http://www.itnewb.com/tutorial/Cross-Browser-CSS-Opacity-and-the-JavaScript-Fade-Fading-Effect)

确保您获得正确的所有浏览器前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:48:18.703

jQuery 非常适合任何网页！！我建议你使用 jQuery。您从哪里听说它不适合网页或连接不良的沉重。使用 jQuery。

# regex - 重写 .htaccess 到子目录

> ID：10318008
> 
> 赞同：2
> 
> 时间：2012-04-25T14:39:39.567
> 
> 标签：regex, apache, .htaccess, mod-rewrite

如何重写 URL，所以当我输入

```
http://mydomain.com/index.php 
```

是相同的

```
http://mydomain.com/subdomain/index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:30:14.507

如果您只想处理，`index.php`那么以下将起作用：

```
RewriteEngine On
RewriteRule ^(index\.php|)$ subdomain/$1 [L] 
```

但是，如果您想重定向每个请求`subdomain folder`，那么以下将起作用：

```
RewriteEngine On
RewriteRule ^(?!subdomain/).*$ subdomain%{REQUEST_URI} [L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:52:32.160

尝试这样的事情：

```
RewriteEngine On
RewriteRule ^$ /subdomain [L] 
```

[https://stackoverflow.com/a/1328357/956397](https://stackoverflow.com/a/1328357/956397)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:52:49.637

对于所有文件

```
Options +FollowSymlinks 
RewriteEngine on
RewriteRule ^(.+)$ /subdomain/$1 [NC] 
```

# c# - C#.Net 无法从 JPG 图像中读取一些 EXIF 数据

> ID：10318009
> 
> 赞同：0
> 
> 时间：2012-04-25T14:39:40.373
> 
> 标签：c#, android, .net, vb.net, c#-4.0

我在 C#.Net 中编写了一个简单的模块，它读取图像属性（即 EXIF 数据）并做同样的事情，我在下面的代码中使用了：

```
Image ImgObject = new Bitmap("jpg image file path");

PropertyItem[] ImgObject = theImage.PropertyItems; 
```

JPG 图像的集合是从不同的 Android 设备捕获的（并明确添加了 EXIF 数据的用户评论标签） - 现在 C#.Net 无法读取“用户评论”属性。我已经尝试/检查过使用其他一些基于 Web 的解决方案，每次都会读取“用户评论”字段。

对此的任何指示都会有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:48:26.887

[Exif 元数据](http://www.media.mit.edu/pia/Research/deepview/exif.html)非常灵活，有时甚至用于隐写术。为了获得用户评论，您似乎必须直接使用字节，读取字节之前的所有内容，指示图像的开始，然后手动解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-03T13:18:42.260

要从 JPEG 等图像文件中读取元数据，请尝试我的[MetadataExtractor](https://github.com/drewnoakes/metadata-extractor-dotnet)库。它支持多种图像和视频格式，以及多种类型的嵌入数据，例如 Exif、IPTC、XMP 等。

API 非常简单。您可以使用一行代码访问文件的元数据。

# c# - 关于 GC 不需要解释

> ID：10318013
> 
> 赞同：-1
> 
> 时间：2012-04-25T14:39:51.053
> 
> 标签：c#, .net, garbage-collection

我有下面描述的课程。GC 是否从类“C”中的对象“a”中收集 field1 和 field2？

```
public abstract class A
{
//some methods and properties
}

public class B : A
{
 public int field1 { get; set; }
 public int field2 { get; set; }
}

public class C
{
 public A a { get; set; }
 private System.Windows.Forms.Timer timer;
 public C()
 {
    a = (A)typeof(B).GetConstructor(bla, bla, bla).Invoke(bla, bla);
    ((B)a).field1 = 25;
    timer = new System.Windows.Forms.Timer();
    timer.Enabled = true;
    timer.Interval = 10000;
    timer.OnTick += (o, e) => { Console.WriteLine(((B)a).field1); }; 
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:41:57.397

只要`a`在范围内，`field1`就会`field2`一直在范围内。只要`Timer`继续运行和引用`a`，或者对您的实例的引用`C`存在，`a`就会保持在范围内。

我认为您要问的是它们是否会丢失，因为我们仅静态知道 of 的实例是`A`的实例`A`，而不是 的实例`B`。答案是否定的，信息仍在范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:42:25.383

由于`field1`和`field2`都是值类型，因此它们在堆栈/堆上没有自己的位置，它们位于`B`. 这意味着当该类被垃圾收集时，作为清理单个实例的一部分，field1 和 field2 将“消失”。

相反，只要“B”的实例仍然存在，`field`并且`field2`会存在，因为没有办法在不删除`B`拥有它们的整个实例的情况下对它们进行垃圾收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:42:54.253

垃圾收集器只删除不被任何可达对象中的字段引用的对象；这就是“垃圾”的定义。只要您的对象被任何可能找到它们的代码使用，它们就不会消失；只有在没有此类代码运行时才会删除它们。

# postgresql - Javascript encodeURI 像 postgresql 中的函数？

> ID：10318014
> 
> 赞同：7
> 
> 时间：2012-04-25T14:39:53.663
> 
> 标签：postgresql, stored-procedures, urlencode, plpgsql

PostgreSQL/plpgsql 中是否有与 javascripts encodeURI 相同的函数/存储过程？

这是什么意思？Javascript 有一个方便的内置函数来编码任何类型的 url：

encodeURI(url) -> 返回编码后的 url

例如： `encodeURI('http://hu.wikipedia.org/wiki/São_Paulo')`-> 返回一个字符串，它是`"http://hu.wikipedia.org/wiki/S%C3%A3o_Paulo"`

我在找一模一样的。

我不想分别编码每个参数。我不想要一个像 javascript encodeURIComponent 这样不一样的函数。上面的示例产生了不同的输出

```
encodeURIComponent('http://hu.wikipedia.org/wiki/São_Paulo') 
```

->`"http%3A%2F%2Fhu.wikipedia.org%2Fwiki%2FS%C3%A3o_Paulo"`

它对整个字符串进行编码，而不仅仅是路径部分。所以这不是我要找的。我需要一个 plpgsql 函数，它会产生与 javascript 函数 encodeURI 等效的输出。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T18:58:43.527

慢且低效，考虑做`C`这个函数的版本：

```
CREATE OR REPLACE FUNCTION urlencode(in_str text, OUT _result text)
    STRICT IMMUTABLE AS $urlencode$
DECLARE
    _i      int4;
    _temp   varchar;
    _ascii  int4;
BEGIN
    _result = '';
    FOR _i IN 1 .. length(in_str) LOOP
        _temp := substr(in_str, _i, 1);
        IF _temp ~ '[0-9a-zA-Z:/@._?#-]+' THEN
            _result := _result || _temp;
        ELSE
            _ascii := ascii(_temp);
            IF _ascii > x'07ff'::int4 THEN
                RAISE EXCEPTION 'Won''t deal with 3 (or more) byte sequences.';
            END IF;
            IF _ascii <= x'07f'::int4 THEN
                _temp := '%'||to_hex(_ascii);
            ELSE
                _temp := '%'||to_hex((_ascii & x'03f'::int4)+x'80'::int4);
                _ascii := _ascii >> 6;
                _temp := '%'||to_hex((_ascii & x'01f'::int4)+x'c0'::int4)
                            ||_temp;
            END IF;
            _result := _result || upper(_temp);
        END IF;
    END LOOP;
    RETURN ;
END;
$urlencode$ LANGUAGE plpgsql; 
```

结果：

```
# select urlencode('http://hu.wikipedia.org/wiki/São_Paulo');
-[ RECORD 1 ]------------------------------------------
urlencode | http://hu.wikipedia.org/wiki/S%C3%A3o_Paulo 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T14:21:51.320

我写了 PostgreSQL 扩展[url_encode](https://github.com/okbob/url_encode)来解决这个问题。

```
postgres=# select url_encode('http://hu.wikipedia.org/wiki/São_Paulo');
                      url_encode                       
───────────────────────────────────────────────────────
http%3A%2F%2Fhu.wikipedia.org%2Fwiki%2FS%C3%A3o_Paulo 
```

或者

```
postgres=# select uri_encode('http://hu.wikipedia.org/wiki/São_Paulo');
               uri_encode                  
---------------------------------------------
http://hu.wikipedia.org/wiki/S%C3%A3o_Paulo 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-24T22:35:15.107

使用 PL/V8...作弊？

```
create function encode_uri(text) returns text language plv8 strict immutable as $$
  return encodeURI($1);
$$; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-23T11:10:09.673

今天我遇到了“不会处理 3 个（或更多）字节序列”。对于韩语字符，而我一直在使用@vyegorov 的答案很长一段时间，超过一年，需要更改它只是转储带有“％”前缀的 bytea 十六进制字符串。

```
CREATE OR REPLACE FUNCTION urlencode(in_str text, OUT _result text)
    STRICT IMMUTABLE AS $urlencode$
DECLARE
    _i      int4;
    _temp   varchar;
    _hex    varchar;
    _ascii  int4;
BEGIN
    _result = '';
    FOR _i IN 1 .. length(in_str) LOOP
        _temp := substr(in_str, _i, 1);
        IF _temp ~ '[0-9a-zA-Z:/@._?#-]+' THEN
            _result := _result || _temp;
        ELSE
            _hex := encode(_temp::bytea, 'hex');
            _temp := '';
            WHILE LENGTH(_hex) > 0 LOOP
                _temp := _temp || '%' || SUBSTRING(_hex, 1, 2);
                _hex := SUBSTRING(_hex, 3, 999);
            END LOOP;
            _result := _result || upper(_temp);
        END IF;
    END LOOP;
    RETURN ;
END;
$urlencode$ LANGUAGE plpgsql; 
```

例子，

```
SELECT urlencode('a') UNION ALL  --> "a"
SELECT urlencode('À') UNION ALL  --> "%C3%80"
SELECT urlencode('Ā') UNION ALL  --> "%C4%80"
SELECT urlencode('ə') UNION ALL  --> "%C9%99"
SELECT urlencode('α') UNION ALL  --> "%CE%B1"
SELECT urlencode('가') UNION ALL --> "%EA%B0%80"
SELECT urlencode('上') UNION ALL --> "%E4%B8%8A"
SELECT urlencode('い')           --> "%E3%81%84" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-01T19:28:14.863

在 tsohr 和 Nick 的答案中使用 ::bytea 是错误的。做一个 SELECT '\'::bytea 看看为什么。

在这两种情况下 convert_to(x, 'utf-8') 都会给出想要的结果。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-17T10:14:23.527

这是一个非常古老的线程，但令人惊讶的是，以前发布的解决方案似乎都没有符合相关的[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)。所以这里有两个 PostgreSQL 函数**encode_uri**（如果你想编码一个完整的 URI）和**encode_uri_component**（如果你只想编码 URI 的一个组件，例如查询参数的键或值），它们结合了[Nick 的错误解决方案](https://stackoverflow.com/a/40121147/5529515)，[ElDiabolo 的注释](https://stackoverflow.com/a/56841388/5529515)，以及[Kev 从相关线程中的部分解决方案](https://stackoverflow.com/a/341240/5529515) 到单个工作 SQL-only 解决方案。

它是如何工作的：首先，将字符串分解为单个字符，然后对每个多字节字符和每个不允许的字符进行十六进制编码。

**编码 URI 组件：**

```
create or replace function encode_uri_component(text) returns text as $$
    select string_agg(
        case
            when bytes > 1 or c !~ '[0-9a-zA-Z_.!~*''()-]+' then 
                regexp_replace(encode(convert_to(c, 'utf-8')::bytea, 'hex'), '(..)', E'%\\1', 'g')
            else 
                c
        end,
        ''
    )
    from (
        select c, octet_length(c) bytes
        from regexp_split_to_table($1, '') c
    ) q;
$$ language sql immutable strict; 
```

**编码完整的 URI：**

```
create or replace function encode_uri(text) returns text as $$
    select string_agg(
        case
            when bytes > 1 or c !~ '[0-9a-zA-Z_.!~*''();,/?:@&=+$#-]+' then 
                regexp_replace(encode(convert_to(c, 'utf-8')::bytea, 'hex'), '(..)', E'%\\1', 'g')
            else 
                c
        end,
        ''
    )
    from (
        select c, octet_length(c) bytes
        from regexp_split_to_table($1, '') c
    ) q;
$$ language sql immutable strict; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-24T19:55:50.117

PLPython3 提供了一种简单的方法。

如果您还没有 plpython3，请安装它。命令行的示例包安装：

```
apt-get install postgresql-plpython3-9.5 
```

创建语言（如果您还没有为其他功能完成它）：

```
CREATE LANGUAGE plpython3u; 
```

之后的简单功能：

```
CREATE OR REPLACE FUNCTION encode_uri(input_string text)
  RETURNS text
AS $$
  import urllib.parse
  return urllib.parse.quote_plus(input_string, safe='~@#$&()*!+=:;,.?/\\''')
$$ LANGUAGE plpython3u immutable strict; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-19T02:36:17.890

这是支持多字节字符（包括 3 字节和 4 字节表情符号）的“纯 SQL”（不需要 plv8、plpython 甚至 plpgsql）实现：

```
create or replace function urlencode(text) returns text as $$
  select
    string_agg(
      case
        when ol>1 or ch !~ '[0-9a-zA-Z:/@._?#-]+' 
          then regexp_replace(upper(substring(ch::bytea::text, 3)), '(..)', E'%\\1', 'g')
        else ch
      end,
      ''
    )
  from (
    select ch, octet_length(ch) as ol
    from regexp_split_to_table($1, '') as ch
  ) as s;
$$ language sql immutable strict; 
```

（来源：[https](https://github.com/NikolayS/postgrest-google-translate/pull/8) ://github.com/NikolayS/postgrest-google-translate/pull/8 ）

# c# - 从代码隐藏访问 GroupStyle 的 DataTemplate 控件

> ID：10318017
> 
> 赞同：0
> 
> 时间：2012-04-25T14:40:13.837
> 
> 标签：c#, .net, wpf

我有一个定义了 GroupStyle 的 ItemsControl，以便根据特定规则对我的项目进行分组。

我正在尝试从我的代码隐藏中访问 GroupStyle 的 DataTemplate 中的项目。这样的事情可能吗？

这是 GroupStyle 的定义；我想访问 StackPanel 或其中的各种标签：

```
<ItemsControl ItemsSource="{Binding Conversations}" ItemTemplate="{DynamicResource ConversationTemplate}" Margin="15,1,15,1" x:Name="MainItemsControl">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <Grid Margin="10, 20, -250, 8">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <StackPanel x:Name="GroupStackPanel" Orientation="Horizontal" Grid.Row="0" Loaded="OnConversationGroupCreated" Tag="{Binding Name}">
                            <Label x:Name="VolumeLabel" Style="{DynamicResource HighlightedMetadataStyle}" Content="{Binding Name.Volume}" Panel.ZIndex="3"/>
                            <Label x:Name="ActLabel" Style="{DynamicResource HighlightedMetadataStyle}" Margin="-16,0,0,0" Content="{Binding Name.Act}" Panel.ZIndex="2"/>
                            <Label x:Name="ChapterLabel" Style="{DynamicResource HighlightedMetadataStyle}" Margin="-16,0,0,0" Content="{Binding Name.Chapter}" Panel.ZIndex="1"/>
                        </StackPanel>
                        <Rectangle Height="1" Fill="#FFDDDDDD" Grid.Row="1" Margin="0,8,0,0"/>
                        <Rectangle Height="1" Fill="#FFEAEAEA" Grid.Row="1" Margin="0,9,0,0"/>
                    </Grid>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
        </GroupStyle>
    </ItemsControl.GroupStyle>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:55:27.463

获取模板，`MainItemsControl.GroupStyle.HeaderTemplate` 然后使用在模板`VisualTreeHelper`中找到正确的控件

# xcode - Xcode 4.3.2 不会在调试器中显示完整的调用者堆栈，只显示当前函数？

> ID：10318018
> 
> 赞同：9
> 
> 时间：2012-04-25T14:40:14.037
> 
> 标签：xcode, macos, debugging

Xcode 4.3.2 不会在调试器中显示 Mac OS X 应用程序的调用程序堆栈。在下图中是我所指的问题，堆栈仅包含当前函数：

![单栈显示](../Images/e5235591780949f27b9bb8820fbc5f48.png)

堆栈的输出应该包括调用者函数（取自没有显示相同调试问题的 iOS）：

![全栈显示](../Images/a77da473b8f0db337ff7e3b0531d22ce.png)

我拥有所有最新设置，“验证构建设置”运行时没有警告。我几乎使用默认值，因为它们用于新项目，这里它们用于我的调试方案：

*   架构 = 32 位英特尔
*   SDKROOT = macOS
*   调试信息 = DWARF
*   部署目标 = 10.5
*   在复制期间去除调试符号 = NO
*   LD_RUNPATH_SEARCH_PATHS = @loader_path/../Frameworks
*   ALWAYS_SEARCH_USER_PATHS = 否
*   优化级别 = 无
*   默认隐藏的符号 = NO
*   垃圾收集 = 必需
*   GCC_PRECOMPILE_PREFIX_HEADER = 是
*   GCC_PREFIX_HEADER = MyHeader_Prefix.h
*   WARNING_CFLAGS = -Wmost -Wno-four-char-constants -Wno-unknown-pragmas
*   IBC_WARNINGS = 否
*   IBC_Strip_nibs = 否

在“编辑方案”下使用不同的调试器，GDB over LLDB 有同样的问题。将编译器切换到 LLVM 也没有效果。

清除派生数据和清理项目没有帮助。从 /var/folders/ 中删除预编译信息也被证明是不成功的。

这是一个复杂的问题，我只是想知道是否有人有类似的经历并能够解决它。因为它已经工作了多年，直到最近才停止工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T15:19:45.257

您可以调整调用堆栈显示的详细程度。

查看调试导航器的底部 :)

![Xcode 4.3.2 调试导航器](../Images/0b0218bcad426f90bbb52a34aa7f88d6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-25T22:25:14.340

这是一篇旧帖子，但我在 Xcode 7.2.1 上遇到了同样的问题。事实证明，我在窗格底部的过滤器搜索栏中有一些旧文本。一旦我清除了它，它就会按预期工作。

至少我一路上学到了一些 lldb 命令。

# java - 是什么导致了这个 NoClassDefFoundError 错误？

> ID：10318019
> 
> 赞同：1
> 
> 时间：2012-04-25T14:40:18.583
> 
> 标签：java, ant, jar

我在我的一个程序中收到了这个 NoClassDefFoundError：

```
10:26:56,893 ERROR [STDERR] Exception in thread "Timer-4" 
10:26:56,893 ERROR [STDERR] java.lang.NoClassDefFoundError: Could not initialize class
    com.something.plugin.gameserver.common.MetricsRegistrar
10:26:56,893 ERROR [STDERR] at com.something.plugin.gameserver.main.GameServerPlugin.init(GameServerPlugin.java:48) 
```

我知道这是一个类路径问题，但奇怪的是发生错误的 GameServerPlugin 类和它寻找的 MetricsRegistrar 类在同一个 jar 中。所以一个不能在类路径中，另一个不正确？

我检查了 Jar 文件，它有问题的类文件，所以也不是问题。

jar 的 INDEX.LIST 也有一个 MetricsRegistrar 类的包的条目。我还应该检查什么？

为了完整起见，我正在使用 Ant 构建并在 JBoss 中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:52:39.220

这是一个插件问题：您需要在插件配置文件中添加类和导入。Java Web 应用程序具有 web.xml 配置文件，运行它的容器在应用程序首次启动时读取它，
另一方面，对于插件，插件配置文件（即 ProjectName.plugin.xml）文件被加载并读取通过使用此插件的应用程序引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:03:32.433

你在 MetricsRegistrar 的类初始化期间做些什么吗？喜欢里面的代码

```
static { 
 ... 
} 
```

由于这个问题，[这里有人也有 NoClassDefError 。](https://stackoverflow.com/questions/7325579/java-lang-noclassdeffounderror-could-not-initialize-class-xxx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:08:35.513

通常，这意味着在异常中命名的类或它所依赖的其他类的静态初始化期间抛出（并且未捕获）未经检查的异常。

如果这是第一次尝试加载类，那么触发问题的异常应该是异常的“原因”链`NoClassDefFoundError`。

# listview - 更改列表视图的选择阈值距离

> ID：10318020
> 
> 赞同：0
> 
> 时间：2012-04-25T14:40:18.570
> 
> 标签：listview, windows-8, windows-runtime, windows-store-apps, winrt-xaml

似乎无论 listviewitem 有多高，选择阈值距离都是相同的。当 listviewitem 较小时，选择阈值距离似乎太大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:08:17.830

它是不可配置的。

似乎最好在整个系统中保持一致。即使你可以破解它来修改行为——你也会破坏操作系统和不同应用程序之间交互的一致性。

# regex - 用于 Mac 地址的 Grep 正则表达式

> ID：10318021
> 
> 赞同：2
> 
> 时间：2012-04-25T14:40:19.450
> 
> 标签：regex, linux, bash, grep

我需要正则表达式的帮助来从大文件中提取 mac 地址。

这是文件的格式：

```
Wed Apr 25 10:15:32 EDT 2012 Client: 00aa11bb22cc mac
Wed Apr 25 10:15:34 EDT 2012 Client: aa11bb22cc33 pc 
```

这是我目前没有运气的尝试：

```
grep -io '[0-9a-f]{12}' file.txt > macs.txt 
```

有任何想法吗？我只想将 mac 地址部分提取到名为`macs.txt`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:42:45.850

尝试：

```
grep -io '[0-9a-f]\{12\}' file.txt > macs.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-19T13:34:38.940

```
((([0-9a-fA-F]{2})[ :-]){5}[0-9a-fA-F]{2})|(([0-9a-fA-F]){6}[
:-]([0-9a-fA-F]){6})|([0-9a-fA-F]{12}) 
```

我根据我知道的 MAC 地址的以下表达式对其进行了测试。取决于系统、固件和应用程序的语法。

```
F3 D3 A4 C1 99 E2
F3:D3:A4:C1:99:E2
F3-D3-A4-C1-99-E2
f3 d3 a4 c1 99 e2
f3:d3:a4:c1:99:e2
f3-d3-a4-c1-99-e2
f3d3a4 c199e2
f3d3a4:c199e2
f3d3a4-c199e2
f3d3a4c199e2
F3D3A4C199E2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:43:13.250

一种使用方式`sed`：

```
sed -e 's/^.*\([a-fA-F0-9]\{12\}\).*$/\1/' file.txt > macs.txt 
```

结果：

```
00aa11bb22cc
aa11bb22cc33 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:02:09.280

egrep 会工作：

```
egrep -io '[0-9a-f]{12}' file.txt > macs.txt 
```

grep 有 2 个选项来处理正则表达式，

```
grep -e 
```

和

```
grep -E 
```

其中一个等于 egrep，我想现在你知道是哪个了。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-07T14:28:46.240

此命令行将从常规文件中提取所有 MAC 地址。它适用于 macOS。

它从常规文件中提取其上的任何 MAC 地址。在示例中，常规文件`file.txt`具有混合信息，包括 MAC 地址。以下命令将提取它们并将它们保存在`macs.txt`文件中。

`grep -o -E '([[:xdigit:]]{1,2}:){5}[[:xdigit:]]{1,2}' file.txt > macs.txt`

# c++ - SDL_ttf 没有正确运行

> ID：10318025
> 
> 赞同：0
> 
> 时间：2012-04-25T14:40:49.497
> 
> 标签：c++, sdl, sdl-ttf

我正在使用 SDL_ttf 但在 mingw32 中，我下载所有内容并尝试以下程序

```
#include <SDL.h>
#include "SDL_ttf.h"
#include <iostream>

using namespace std;

const int window_width = 600;
const int window_height = 600;

TTF_Font *font;
SDL_Surface *screen;

void init(void)
{
  SDL_putenv("SDL_VIDEO_CENTERED=center");
  if (TTF_Init() == -1)
  {
    cerr << "Unable to initialize SDL_tff: " << TTF_GetError() << endl;
    exit(1);
  }
  font = TTF_OpenFont("arial.ttf", 12);

  if (SDL_Init(SDL_INIT_EVERYTHING) < 0)   exit(2);
  if ( (screen = SDL_SetVideoMode(window_width, window_height, 8, SDL_HWSURFACE |     SDL_DOUBLEBUF)) == NULL)   exit(3);
 }

void drawText(SDL_Surface *screen, int x, int y, string text)
{
  SDL_Color foregroundColor = { 255, 255, 255 };
  SDL_Color backgroundColor = { 0, 0, 255 };
  SDL_Surface *resulting_text;
  SDL_Rect rect = { x, y, 0, 0 };
  resulting_text = TTF_RenderText_Solid(font, text.c_str(), foregroundColor);
  cout << SDL_GetError();
  SDL_BlitSurface(resulting_text, NULL, screen, &rect);
  SDL_FreeSurface(resulting_text); 
}

void run()
{
  SDL_Event event;
  bool running = true;
  while (running) 
  {
    SDL_LockSurface(screen);
    char s[256];
    drawText(screen, 20, 20, "text ................");
    SDL_UpdateRect(screen, 0, 0, window_width, window_height);
    SDL_UnlockSurface(screen);
    while (SDL_PollEvent(&event)) 
    {
      if (event.type == SDL_KEYDOWN)
      {
    SDLKey _key = event.key.keysym.sym;
        if ((_key == 27) || (_key == 'q') || (_key == 'Q')) 
    {
      running = false;
    }
      }
    }
  }
} 
```

int main(int argc, char* argv[]) { init(); 跑（）; }

好的，所以我在这里发布所有代码。我还将字体文件复制到当前文件夹，但它无效，也没有显示任何错误或警告。我使用以下命令在 mingw32 中编译它

```
g++ SDLTestFont.cpp -o TF.exe -I"d:\SDL\include" -lmingw32 -lSDLmain 
```

lSDL SDL_ttf.lib -mwindows -O3 -w -static

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:37:14.047

看起来您的字体指针没有被初始化，并且您正在将垃圾传递给rend_text。我会检查字体文件是否真的在您的项目文件夹中，并确保拼写正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T04:17:59.697

我今天遇到了与 SDL_ttf 类似的问题。你确定你的项目目录中有 SDL_ttf 的所有 DLL 文件吗？SDL_ttf 附带的 DLL 文件。

# jquery - 使用 Video.js 暂停 jQuery 循环

> ID：10318026
> 
> 赞同：2
> 
> 时间：2012-04-25T14:40:58.523
> 
> 标签：jquery, slider, html5-video

我有一个 jquery 循环滑块，我需要在播放视频*或*到达显示视频的幻灯片时暂停。（这些选项中的任何一个都可以，但我不知道如何暂停具有特定类或 ID 的幻灯片。）我正在使用[video.js](http://videojs.com/)来显示视频。

发生的事情是当我按下播放时视频开始播放，但是当我将鼠标从视频上移开时，它会自动转到下一张幻灯片。如果我点击寻呼机缩略图，它会保持暂停状态，但如果幻灯片正常进行并且我按下播放键，它会遵循循环“超时”设置的规则。

我正在寻找的是一种在播放视频时暂停幻灯片的方法 - 通过在视频开始播放时调用事件，或者在到达视频幻灯片时完全暂停幻灯片。

我脑子里有这个：

```
<script>
    jQuery(document).ready(function($) {    
        $(".project_slides").cycle({
        fx:'fade',
            timeout: 5000,
            prev : '#prev',
            next : '#next',
            pager : '#pager',
            pause: 1,
            pagerAnchorBuilder: function(idx, slide) {
                return '#pager li:eq(' + (idx) + ') a';
            }
        });

        $('#pager a').click(function() { 
            $('.project_slides').cycle('pause'); 
        });

        function pauseitall() {
            $('.project_slides').cycle('pause');
        }   
    });

</script> 
```

在体内：

```
<div class="project_slides">
    <div class="slide">
        <img src="/media/{{ Slide.media }}" alt="{{ Slide.caption }}" />
    </div>

    <div class="slide">
        <video id="video_11" 
            class="video-js vjs-default-skin" 
            controls width="512" 
            height="406" 
            poster="/media/images/video-poster.png" 
            preload="auto" loop>
            <source type="video/mp4" src="/media/{{ Slide.media }}">
        </video>

        <script>
            $(function() {
                _V_("video_11").ready(function() {
                var myPlayer = this;
                addEvent(myPlayer.video, "play", function () {
                    pauseitall()}, false);
                    myPlayer.play();
                });
            });
        </script>
    </div>
</div> 
```

显然，pauseitall() 函数没有被正确调用，但我一直在努力解决这个问题（在这么多的迭代中），我最终只想在这里发布它，看看是否有人知道解决方案。

供参考，使用 jQuery 1.7.2、jquery cycle 2.9999.5 和 Video.js 3.2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:43:35.070

尝试这个：

```
myPlayer.addEvent("play", pauseitall); 
```

[这是文档](http://videojs.com/docs/api/#Events)指定如何绑定到事件的方式

# c++ - gcc 中的签名：ness 优化“错误”

> ID：10318030
> 
> 赞同：2
> 
> 时间：2012-04-25T14:41:16.723
> 
> 标签：c++, linux, gcc, compiler-construction, warnings

我的代码有一个警告，我不知道如何避免它。这是一个代码片段

```
#include <arpa/inet.h>
int main(void) {
        uint16_t portnbr=0;
        uint16_t n_portnbr = htons(portnbr);
        return n_portnbr;
} 
```

编译器：

```
/usr/bin/g++ -Wconversion -Wall  -O2 a.cpp 
```

输出：

```
a.cpp:4: warning: conversion to 'short unsigned int' from 'int' may alter its value 
```

是否可以避免警告？*没有修改 CFLAGS 的选项*。

我的编译器是 gcc 版本 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:59:20.777

这似乎是 glibc 中的一个错误。请参阅此[错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=44924)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:58:33.797

为了提高效率`htons`，宏和亲戚经常被宏重载。尝试类似的东西

```
uint16_t n_portnbr = (htons)(portnbr); 
```

看看这是否解决了你的问题，这个语法确保触发函数而不是宏。

如果是这种情况，那真的很遗憾他们弄错了。然后，您应该尝试仅针对该版本关闭该宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:56:15.023

可能只是缺少原型，这就是警告听起来的样子。

尝试手动声明该`htons()`函数，看看是否有帮助。如果是这样，您需要调查您的标题。

声明的[Linux 手册页](http://linux.die.net/man/3/htons)`htons()`：

> POSIX.1-2001。
> 
> 一些系统需要包含 <netinet/in.h> 而不是 <arpa/inet.h>。

**更新**：正如评论中所指出的，这是 C++，所以它不应该“遭受”函数的隐式声明。奇怪的。我建议阅读预处理代码，也许`htons()`是一个由于某种原因表现得很奇怪的宏。

# apache - 从工作重写规则中排除 admin.php

> ID：10318033
> 
> 赞同：0
> 
> 时间：2012-04-25T14:41:26.023
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我的 .htaccess 文件中有一个有效的重写规则，它应该从以 / 结尾的页面重定向到没有它们的页面。

因此，例如 **http://mysite.com/gallery/**将重定向到 **http://mysite.com/gallery**

重写规则如下所示：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(.+)/$
RewriteRule ^(.+)/$  /$1 [R=301,L] 
```

并且工作 99%。我遇到的唯一问题是我需要排除这个

**http://mysite.com/admin.php/whatever_may_follow**

我不是这些规则的专家，希望有人能指点我如何从规则中排除 admin.php。

提前致谢！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:44:14.743

```
RewriteCond %{REQUEST_FILENAME} !admin.php$ 
```

# javascript - 使用jquery在div内加载页面

> ID：10318036
> 
> 赞同：2
> 
> 时间：2012-04-25T14:41:36.130
> 
> 标签：javascript, jquery, dynamic, html

我正在创建一个 javascript 方法，它使用 jquery 在 div 容器中加载页面内容并且它可以正常工作，但是当我单击 div 本身内部的任何按钮时，它会重定向到新页面？

这就是方法：

```
<script type="text/javascript">
            $('a').click(function() {
                var page = $(this).attr('href');
                $("#content").fadeOut('slow', function(){
                    $("#content").load(page, function () {
                        $(this).fadeIn('slow');
                    });
                });
                return false;
            });
        </script> 
```

任何人都可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:43:07.343

您只绑定页面加载中存在的元素，而不是之后使用单击创建的元素，如果您使用它，它应该可以工作

```
$('a').live('click', function(){}); 
```

基本上 live 将绑定到所有标签，即使是新创建的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:44:54.830

您应该改用 iframe。当您使用类似 div 的页面时，您只是在其上加载内容，而不是加载页面。

# jenkins - 如何在 Subversion 的多模块 Maven 构建中触发单个模块的 Jenkins 构建？

> ID：10318037
> 
> 赞同：12
> 
> 时间：2012-04-25T14:41:41.160
> 
> 标签：jenkins

我在我的 Jenkins 中设置了一个大型 Maven 多模块构建。它是为增量构建而设置的。

触发时，它会解析所有 POM 并找出需要构建的内容。

它当前设置为触发 SCM 更改。

我想进行此构建，以便可以执行以下操作：

*   还是手动启动吧。当我这样做时，它的增量构建行为将像今天一样起作用。
*   **从 Subversion 提交挂钩触发构建**。我想知道，如果我通过[出色的说明](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+post-commit+hook)来设置提交挂钩的麻烦，它不会导致构建花费不必要的长度来轮询 SCM 或执行其他因事实而变得不必要的工作提交钩子告诉它发生了什么变化。

我提到第二点是因为从我查看文档来看，这似乎只是简单地戳了一般构建并让它做它的事情。（我可能错了。）我宁愿让它告诉 Jenkins 到底发生了什么变化，让 Jenkins 只“知道”那些更改的存储库路径映射到哪些模块，这样 Jenkins 就不必进行轮询或额外的 pom.xml解析以弄清楚。

我已经准备好让经历过这场战争的人告诉我，看，只要设置 Subversion 提交钩子就可以了，但我问这个问题以防万一更好的食谱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:36:09.000

在使用 Maven 3 构建时[，Jenkins 中显然不存在](https://issues.jenkins-ci.org/browse/JENKINS-11964)此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:35:23.783

您是否尝试过*增量构建 - 仅*在项目配置的*构建*部分中构建更改的模块选项？在这种情况下，存储库将通知 Jenkins 提交的更改，SCM 插件将签出文件，Maven 插件将**尝试**猜测哪些模块需要重建。它在我的环境中的大多数情况下都有效，尽管它不是 100% 的证明。

# encoding - XSD 中字符串数据类型的 maxLength 限制应该基于编码前数据还是编码后数据？

> ID：10318038
> 
> 赞同：3
> 
> 时间：2012-04-25T14:41:45.457
> 
> 标签：encoding, xsd, maxlength

如果我的数据库中字符串的最长值为

```
"ABC<DEF" 
```

XSD 中此字符串数据类型的 maxLength 限制应该是 7（编码前）还是应该是 10（编码后），即

```
"ABC&lt;DEF" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:46:43.523

简短的回答：预编码。

在 XML 中编码字符不会影响字符串的“真实”长度值。

快速测试：

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="root">
        <xsd:simpleType>
            <xsd:restriction base="xsd:string">
                <xsd:maxLength value="2"/>
            </xsd:restriction>
        </xsd:simpleType>
    </xsd:element>
</xsd:schema> 
```

有效的 XML :)

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">&amp;1</root> 
```

# java - Maven-Jetty-插件。热重新部署.war

> ID：10318043
> 
> 赞同：0
> 
> 时间：2012-04-25T14:42:03.403
> 
> 标签：java, maven, maven-jetty-plugin

我将*maven-jetty-plugin*添加到我的`pom.xml`, 并执行 target `jetty:run-war`。一切正常。但是当我想热重新部署项目时，在对源代码进行一些更改后，我需要`package`在我的项目上重复目标（我认为因为我将项目部署为 .war，而不是未组装的 webapp）。
但是当我运行`package`目标时，我得到一个错误：`Could not copy webapp sources... [C:\..\workspace\PROJECT_NAME\target\PROJECT_NAME-0.0.1-SNAPSHOT`] - 这是因为执行目标时必须由 Maven 删除的文件`package`被启动的 Jetty 服务器损坏（忙）。

如何解决这个问题呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:44:48.673

你为什么不想以`maven jetty:run`. 并且只需将编译后的文件复制到目录中（或者让 IDE 为您完成）。您还可以在不重新部署应用程序的情况下更改静态资源

# jquery - 如何让动画在不被打断的情况下完成？

> ID：10318044
> 
> 赞同：1
> 
> 时间：2012-04-25T14:42:08.653
> 
> 标签：jquery

我在使用 jQuery 和 switchclass 函数时遇到问题。我正在使用 serialscroll 功能来导航我的网站并为此绑定了箭头键。我已经绑定了向下箭头键以通过在类之间制作动画来选择/取消选择元素。但是我遇到的问题是，如果用户在按下向下箭头后快速向左或向右按​​下，它不允许动画完成并卡住。

```
function    mainselect()
        {

        setTimeout(function()
            {

            $(".selectstyle" ).switchClass( "selectstyle", "select", 200);
            $(".select" ).switchClass( "select", "selectstyle", 200);
            $(".maincontentshrink" ).switchClass( "maincontentshrink", "maincontent", 200);
            $(".maincontent" ).switchClass( "maincontent", "maincontentshrink", 200);
            return false;
            },
            250);

        }
$(document).keydown(function(e)                     //keyboard bind 
    {
    if( e.keyCode == 39 )                       //right (->)
        {   
        setTimeout(function()
            {
    //      $(".maincontent" ).switchClass( "maincontent", "maincontent", 200 );
            $(".maincontentshrink" ).switchClass( "maincontentshrink", "maincontent", 200 );
            $(".selectstyle" ).switchClass( "selectstyle", "select", 200 );
            $pane.trigger('next');
            return false;
            },
            200);
        }
    });

$(document).keydown(function(e)
    {   
    if( e.keyCode == 37 )                       //left (<-)
        {   
        setTimeout(function()
            {
    //      $(".maincontent" ).switchClass( "maincontent", "maincontent", 200 );
            $(".maincontentshrink" ).switchClass( "maincontentshrink", "maincontent", 200 );
            $(".selectstyle" ).switchClass( "selectstyle", "select", 200 );
            $pane.trigger('prev');
            },
            200);
    }
    }); 

$(document).keydown(function(e)
    {   
    if( e.keyCode == 40 )                       //down (\/) 
        {
        mainselect()

        }
    }); 
```

有没有办法禁用其他功能或取消绑定/绑定按键，直到动画完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:46:09.330

您可以使用队列。

[请参阅jquery 文档](http://api.jquery.com/queue/)中的示例

例子很清楚。

# forms - Symfony2：奇怪的形式行为

> ID：10318045
> 
> 赞同：0
> 
> 时间：2012-04-25T14:42:12.030
> 
> 标签：forms, symfony, reset, forgot-password, change-password

我已经为 symfony2 用户重置密码编写了重置操作。这是代码：

```
/**
 * @Route("/reset-password/{confirmationToken}", name="user_resetting_confirm")
 * @ParamConverter("confirmationToken", class="MyProjectBundle:User")
 * @param \My\Project\Entity\User $user
 * @Template()
 */
public function resetAction(Request $request, $confirmationToken)
{
    $form = $this->createFormBuilder()
            ->add('password', 'repeated', array(
                    'type' => 'password',
                    'first_name' => 'New Password',
                    'second_name' => 'Confirm New Password',
                    'invalid_message' => 'Passwords don\'t match',
                    'error_bubbling' => true,
                ))
    ->getForm();

    if ('POST' == $request->getMethod()) {
        $form->bindRequest($request);
        $data = $form->getData();

        $user = $this->container->get('fos_user.user_manager')->findUserByConfirmationToken($confirmationToken);

        if (null === $user) {
            throw new NotFoundHttpException(sprintf('The user with "confirmation token" does not exist for value "%s"', $confirmationToken));
        }

        if (!$user->isPasswordRequestNonExpired($this->container->getParameter('fos_user.resetting.token_ttl'))) {
            return new RedirectResponse($this->container->get('router')->generate('fos_user_resetting_request'));
        }

        if ($form->isValid()) {
            $newPassword = $data['password'];

            $factory = $this->get('security.encoder_factory');
            $encoder = $factory->getEncoder($user);
            $password = $encoder->encodePassword($newPassword, $user->getSalt());
            $user->setPassword($password);
            $em = $this->get('doctrine')->getEntityManager();
            $em->persist($user);
            $em->flush();
            $this->authenticateUser($user);
            return new RedirectResponse($this->getRedirectionUrl($user));
        }
    }

    return $this->render('MyProjectBundle:Resetting:password_reset.html.twig',array('form' => $form->createView()));

} 
```

出于某种原因，如果我在两个字段中输入错误的密码然后提交，我会得到一个没有 html 代码的空白页面。这里有什么做错了吗？

# wordpress - buddypress：我如何使组描述摘录更短？

> ID：10318050
> 
> 赞同：0
> 
> 时间：2012-04-25T14:42:20.983
> 
> 标签：wordpress, buddypress

我在 buddypress 中设置了一个主题，我想在那里为我的小组设置一个预告片部分。它工作正常，但我在缩短组描述时遇到了问题......

我这样使用它：

```
<p><a href="<?php bp_group_permalink() ?>"><?php bp_group_name() ?></a></p>
<p><?php bp_group_description_excerpt() ?></p> 
```

如果有一个很长的组描述它会使我的布局崩溃......是否有可能（如在 wordpress 中）使摘录更短（使用函数或其他东西）？最多20个字母或类似的东西......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:28:48.953

将以下代码放入 functions.php 并将长度更改为您想要的任何数字。

```
// limit group description length 
function my_excerpt_group_description( $description ) {

$length = 55;
$description = substr($description,0,$length);
return $description;
}
add_filter( 'bp_get_group_description', 'my_excerpt_group_description'); 
```

# jsf - JSF+Primefaces p:ajax on p:selectOneMenu 未触发

> ID：10318061
> 
> 赞同：2
> 
> 时间：2012-04-25T14:42:57.490
> 
> 标签：jsf, primefaces

我有一个下拉列表，其中包含一个帐号和两个日期字段。如果我更改下拉列表的值，我想重置日期字段。我还有一个搜索按钮，可以使用这些字段（帐户编号、从日期到日期）进行查询。

```
<fieldset>
    <p:selectOneMenu id="account_search" value="#{accountHistoryBean.account}" converter="accountConverter">
        <f:attribute name="itemsList" value="#{accountHistoryBean.userAccounts}"/>
        <f:selectItems value="#{accountHistoryBean.userAccounts}" var="account" itemLabel="#{account.number}" itemValue="#{account}"/> 
        <p:ajax update="start_date_search, end_date_search" event="change" actionListener="#{accountHistoryBean.resetDates}" process="account_search"/> 
    </p:selectOneMenu>
<fieldset>

<fieldset>
    <p:calendar value="#{accountHistoryBean.fromDate}" id="start_date_search" pattern="dd/MM/yyyy"/>
</fieldset>

<fieldset>
    <p:calendar value="#{accountHistoryBean.toDate}" id="end_date_search" pattern="dd/MM/yyyy"/>
</fieldset>

<fieldset>
    <p:commandLink styleClass="regular_button" action="#{accountHistoryBean.search}" update=":search :accountHistoryList :accountHistoryList:accountHistTable" >
        <span>#{msj.search}</span>
     </p:commandLink>
 </fieldset> 
```

如果我执行以下操作：

1.  更改“从日期”和“到日期”字段
2.  更改帐户字段（带有 ajax 的下拉菜单）。

然后将日期重置为其默认值。

但是，如果我执行以下操作：

1.  将“from Date”和“to Date”字段更改为 DATEX AND DATEY
2.  按搜索
3.  将“从日期”和“到日期”字段更改为 DATEX2 和 DATEY2
4.  更改帐户字段（带有 ajax 的下拉菜单）。

然后它将 Date 字段更改为 DATEX 和 DATAY（不是默认值）。

Bean中的方法如下：

```
public void resetDates()
{
    Calendar calendar = GregorianCalendar.getInstance();
    //By default set toDate as 3/3
    calendar.set(Calendar.MONTH, 2);
    calendar.set(Calendar.DAY_OF_MONTH, 3);
    toDate = calendar.getTime();
    //By default fromDate is one month earlier
    calendar.setTime(toDate);
    calendar.add(Calendar.MONTH, -1);
    fromDate = calendar.getTime();
}

public String search(){
    //Just update the filters
    lazyDataEntityModel.setUpdateData(true);
    return null;
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T17:11:47.013

我变了

```
<p:ajax update="start_date_search, end_date_search" 
        event="change" 
        actionListener="#{accountHistoryBean.resetDates}"
        process="account_search"/> 
```

为了

```
<p:ajax update="start_date_search, end_date_search" 
        event="change"
        listener="#{accountHistoryBean.resetDates}" 
        process="account_search"/> 
```

它奏效了。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:15:03.967

正确答案是关于转换器。检查 h:selectOneMenu 中的 value 属性！未正确映射。如果您仍然有疑问，请设置 immediate="true"，因此没有转换器或验证器会完成他们的工作。这就是我所做的，并且工作了...... 4 - 6 小时后......：|

谢谢你关于转换器的想法，这是为我提供正确答案的提示。

# c# - 在课堂上使用 oledb

> ID：10318062
> 
> 赞同：0
> 
> 时间：2012-04-25T14:43:07.037
> 
> 标签：c#, sql, class, oledb

我有下面的代码，我收到了这个错误：

```
Troubleshooting Exceptions: System.Data.OleDb.OleDbException "syntax error" 
```

我不知道我做错了什么。它假设从表中提取信息。我在整个项目上都使用了相同的方法，只是在这方面，它让我很麻烦......

```
 class Codons
{
    private bool start, end;
    private string codon1, codon3, triplet1, triplet2, triplet3;
    private string triplet4, triplet5, triplet6, fullName;
    private OleDbConnection dataconnection;

    public Codons(string letter)
    {
        this.start = false;
        this.end = false;
        this.dataconnection = new OleDbConnection();
            this.dataconnection.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Projects_2012\\Project_Noam\\Access\\myProject.accdb";
            this.dataconnection.Open();

            string sql = "SELECT  tblCodons.codonsCodon3, " +
            "tblCodons.codonsTriplet1, tblCodons.codonsTriplet2, tblCodons.codonsTriplet3, " +
            "tblCodons.codonsTriplet4, tblCodons.codonsTriplet5, tblCodons.codonsTriplet6, " +
            "tblCodons.codonsFullName, tblCodons.codonsStart, tblCodons.codonsEnd"
            + " FROM tblCodons"
            + " WHERE tblCodons.codonsCodon1="+letter;

            OleDbCommand mycomm = new OleDbCommand(sql, dataconnection);
            OleDbDataReader dataReader = mycomm.ExecuteReader();
            dataReader.Read();
            this.codon1 = letter;
            this.codon3 = dataReader.GetString(0);
            this.triplet1 = dataReader.GetString(1);

            if (dataReader.IsDBNull(2))
                this.triplet2 = "     ";
            else
                this.triplet2 = dataReader.GetString(2);

            if (dataReader.IsDBNull(3))
                this.triplet3 = "     ";
            else
                this.triplet3 = dataReader.GetString(3);

            if (dataReader.IsDBNull(4))
                this.triplet4 = "     ";
            else
                this.triplet4 = dataReader.GetString(4);

            if (dataReader.IsDBNull(5))
                this.triplet5 = "     ";
            else
                this.triplet5 = dataReader.GetString(5);

            if (dataReader.IsDBNull(6))
                this.triplet6 = "     ";
            else
                this.triplet6 = dataReader.GetString(6);

            this.fullName = dataReader.GetString(7);
            this.start = dataReader.GetBoolean(8);
            this.end = dataReader.GetBoolean(9);
            dataReader.Close();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:51:18.330

这里：

```
+ " WHERE tblCodons.codonsCodon1="+letter 
```

您正在创建一个如下所示的 SQL 子句。

```
...WHERE tblCodons.codonsCodon1=A 
```

这是无效的 SQL。SQL 中的字符串文字必须被引用属性，即

```
...WHERE tblCodons.codonsCodon1='A' 
```

为此，您可以手动添加单引号**并**确保正确转义字符串字母中的所有单引号（除非您想处理[SQL 注入](http://xkcd.com/327/)）...

...**或者**（更好）您使用[参数化查询](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)：

```
+ " WHERE tblCodons.codonsCodon1 = ?"; 

OleDbCommand mycomm = new OleDbCommand(sql, dataconnection); 
mycomm.Parameters.AddWithValue("codonsCodon1", letter); 
```

此外，您应该检查返回值`dataReader.Read()`而不是仅仅调用它：

```
if (!dataReader.Read()) {
     // replace this with more useful error reporting, maybe throwing an exception
     MessageBox.Show("No codon for this letter found.");
     return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:45:11.340

由于您将 SQL 查询构建为字符串，我猜您在`letter`. 一旦将该值附加到查询中，就会导致您看到的语法错误。

我会看看这篇关于[Parameterized Queries (OleDb)](http://weblogs.asp.net/cibrax/archive/2006/09/28/Parameterized-Queries-_2800_Oracle_2C00_-SQLServer_2C00_-OleDb_2900_.aspx)的帖子。这是将参数传递给查询的正确方法，可以在您的应用程序中避免这种情况（以及其他明显的 SQL 注入攻击）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:51:44.777

可能是您输入了`letter`不带引号的值。然后它将 的内容`letter`视为一个函数。由于找不到该函数，因此会引发语法错误异常。

尝试`letter`用引号（“字母”）关闭

# javascript - 是否有一个 jQuery 函数来“快捷”一个 if/else 开关？

> ID：10318071
> 
> 赞同：0
> 
> 时间：2012-04-25T14:43:37.603
> 
> 标签：javascript, jquery

在 jQuery 代码中间写 if/else 语句感觉不对：

```
if ($("#test").length) {
  // do smth
}
else {
  // do smth else
} 
```

有没有类似的东西：

```
$("#test").test(function(){
  // do smth
}, 
function(){
  // do smth else
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T14:47:56.650

> 有没有类似的东西：

有，现在！

```
(function($) {
    $.fn.test = function(a, b) {
        (this.length ? a : b).apply(this);
        return this;
    };
})(jQuery); 
```

[在http://jsfiddle.net/alnitak/n2CLZ/](http://jsfiddle.net/alnitak/n2CLZ/)工作演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:46:10.750

据我所知没有...但是您可以在短条件下使用三元运算符

例子：

```
var foo = $("#test").length ? "bar" : "baz"; 
```

编辑：使用函数时

```
$("#test").length ? (function() { console.log("#test available"); })() : (function() { console.log("#test not available"); })(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:48:34.093

根本不需要您使用的示例，因为如果没有选择任何元素，则调用的方法不会执行任何操作。

我想不出在 jQuery 链的中间而不是在诸如过滤器方法或每个方法之类的东西内部有一个 if 语句是有意义的情况。

**更新**

我从可用性的角度来看这个。比较这两种情况：

```
if ( $(".div").length ) {
    console.log("We found divs");
} else {
    console.log("We did not find div");
} 
```

对比

```
$(".div").test(function(){
    console.log("We found divs");
},function(){
    console.log("We did not find divs");
});​ 
```

也许jQuery方法对你来说更容易阅读，对我来说差不多。对我来说杀死它的部分是 jQuery 方法只能检查长度，除非您在插件中添加布尔参数和更多逻辑，而使用 if 语句您只需更改条件。

如果插件接受条件，它最终会`this.each`检查每个元素的条件，但是你传入的条件必须是一个返回给定元素`true`的函数。`false`有点像已经存在的`.filter`方法。

**更新**

为了完整起见，这里将接受条件函数的插件与 using 进行比较`$.fn.each`。[http://jsfiddle.net/fdYSx/2/](http://jsfiddle.net/fdYSx/2/)

我不认为它更具可读性或更易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:51:16.757

注意事项：

if/else 语句是：

```
if(condition)
{
  //something
} else {
  //something
} 
```

而开关是：

```
switch(someVal) {
  case 'valEqualsThis':
    //do something
    break;
} 
```

if else 的简短版本是单行语法：

```
if(someCondition)
  //dosomething
else
  //dosomethingelse 
```

一个更短的版本是三元运算符

```
someoutput = (someCondition) ? doTrue : doFalse 
```

Jquery 还没有真正涉足尝试进一步简化这些已经很短的检查条件的方法，但是由于 jquery 像任何其他 javascript 一样可扩展，如果您需要 jquery 本机函数，只需将一个写入`$`命名空间

# c# - 映射使用 Automapper

> ID：10318077
> 
> 赞同：1
> 
> 时间：2012-04-25T14:43:56.260
> 
> 标签：c#, entity-framework, automapper, anonymous-types

如何使用 AutoMapper 将匿名列表映射到 T 列表？

例如：

```
class Test{
  public string a1{get;set]}
  public string a2{get;set;}
}

//....Entity Framework 4.3.1
var t=from z in db select {z.a1,z.a2};

var tmp=AutoMapper.Mapper.DynamicMap<List<Test>>(t); 
```

但 tmp 总是为空

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:00:13.203

您需要先调用 t.ToList() 来执行查询

```
var tmp=AutoMapper.Mapper.DynamicMap<List<Test>>(t.ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:36:14.727

你怎么改

```
var t=from z in db select new Test
                          {
                             a1 = z.a1,
                             a2 = z.a2
                           } 
```

**编辑** 以允许映射到动态类型，您可以参考[现有帖子](https://stackoverflow.com/questions/7778216/automapper-or-similar-allow-mapping-of-dynamic-types)

# emacs - 如何在 Clojure 代码上执行相当于 eval-last-sexp 的操作

> ID：10318079
> 
> 赞同：2
> 
> 时间：2012-04-25T14:44:06.033
> 
> 标签：emacs, clojure, synchronization, read-eval-print-loop

**编辑**由于我尚未完全理解的原因，我的 Cx Ce 被绑定到*eval-last-sexp*而不是 (?) *slime-eval-last-expression*。现在我可以从*.clj缓冲区中**Cx Ce*并且我至少可以直接看到我的函数何时（不）正确，但是，这显然不会使我只是*slime-eval-last-expression 的函数*“可用” REPL。

 **我已经设置了我的 Emacs 来进行一些 Clojure 编程，但我不知道我的设置是否正确。

我有两个缓冲区：一个用于*.clj*文件，一个用于 REPL。我正在使用*clojure-jack-in*来启动 REPL。

显然我需要总是编译*.clj*（这*也*总是迫使我用提示保存文件）然后我需要切换到 REPL 并在 REPL 中发出一个*（使用'myname.space）*才能尝试，比如说我写的一个新函数。

对于看似非常简单的事情，要按下很多键。

现在，当然，我可以编写一个 Emacs 宏来完成整个*保存/确认/切换到 REPL/问题（使用 'myname.space）* shebang 但我想知道我的设置是否正确？

我想我的问题是：我连接的 REPL 是否应该始终与包含我正在处理的*.clj的缓冲区“同步”？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:06:03.723

如果你用 Emacs 编辑 clojure，你应该使用 Slime。见[https://github.com/technomancy/swank-clojure](https://github.com/technomancy/swank-clojure)

然后，当您使用 Mx clojure-jack-in 在 emacs 中启动和连接 REPL 时，您只需执行 Cx Ce 来编译和加载当前的 sexp，或者执行 Cx Ck 来编译和加载当前的缓冲区。

换句话说，您的 repl 不会“自动”与您刚刚在某些 clojure 代码缓冲区中键入的任何内容同步，但是有更快、更简单的方法可以将代码从缓冲区发送到正在运行的 clojure 程序。**

# c# - 如何从后面的 aspx 代码访问我的公共方法到公共类？

> ID：10318083
> 
> 赞同：0
> 
> 时间：2012-04-25T14:44:09.973
> 
> 标签：c#, asp.net

我在我的 aspx 代码后面有一个名为 PhotoDatabinding 的公共方法，它的作用是将数据库绑定到列表视图控件。

```
public void PhotoDatabinding()
{

lnqPhotoDataContext dbCon = new lnqPhotoDataContext();
var res = from p in dbCon.Photos orderby p.PhotoID descending select new {          p.PhotoID, p.FileName };

    lvSubAlbumDB.DataSource = res;
    lvSubAlbumDB.DataBind();

 } 
```

现在，在我的名为 Process 的公共类中，我有一个名为 UpdateSave 的方法。我的问题是如何访问 PhotoBinding 方法，使其看起来像这样

```
public class Process
{
public UpdateSave()
{
    ....some code
    PhotoDatabinding();

}

} 
```

感谢并感谢您的所有帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:07:48.570

要清除流：

您需要创建一个仅用于从数据库获取数据或更新数据的类

```
public class PhotoAccess
{

  public class PhotoInfo
  {
    public int PhotoID {get; set;}
    public string FileName {get; set;}
  }

  public IEnumerable<PhotoInfo> GetPhotos()
  {
   using ( var dbCon = new lnqPhotoDataContext())
   {
      var res = from p in dbCon.Photos 
            orderby p.PhotoID descending 
            select new PhotoInfo 
                       {
                          p.PhotoID, 
                          p.FileName 
                       };
      return res.AsEnumerable();
    }
  }
  public bool UpdateSave(...)
  {
      ... code to do update or save, use here only classes for working with the DB
  }
} 
```

然后在页面后面的代码中

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!Page.IsPostBack)
   {
       var dataAccess = new PhotoAccess();
       var items = dataAccess.GetPhotos();

       lvSubAlbumDB.DataSource = items;
       lvSubAlbumDB.DataBind();
   }
}
protected void btSave_OnClick(object sender, EventArgs e)
{
    var dataAccess = new PhotoAccess();
    dataAccess.UpdateSave(...pass here the parameters or an object which is going to be inserted);

    var items = dataAccess.GetPhotos();

    lvSubAlbumDB.DataSource = items;
    lvSubAlbumDB.DataBind();
} 
```

您还可以将绑定代码重构为 Page 类的另一个方法

```
private void BindAlbum()
{
   var dataAccess = new PhotoAccess();
   var items = dataAccess.GetPhotos();    

   lvSubAlbumDB.DataSource = items;
   lvSubAlbumDB.DataBind();
} 
```

页面加载将是：

```
 protected void Page_Load(object sender, EventArgs e)
    {
       if (!Page.IsPostBack)
       {
           BindAlbum();
       }
    } 
```

和更新处理程序

```
 protected void btSave_OnClick(object sender, EventArgs e)
    {
        var dataAccess = new PhotoAccess();
        dataAccess.UpdateSave(...pass here the parameters or an object which is going to be inserted);

        BindAlbum();
    } 
```

# gwt - 是否有必要使用 JSNI 在 GWT 应用程序中实现自定义工具提示（或者弹出窗口就足够了）？

> ID：10318087
> 
> 赞同：1
> 
> 时间：2012-04-25T14:44:21.710
> 
> 标签：gwt, popup, tooltip

当我的鼠标悬停一部电影时，我希望有一个像这个网站这样的弹出窗口：[http ://www.allmovie.com/](http://www.allmovie.com/)

这个小弹出窗口将包含一个谷歌地图......你能给我一个很好的解决方案吗？我不知道使用 JSNI 是否会减慢应用程序的速度，或者只是使用简单的 gwt-popup 最容易做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:35:09.650

JSNI 不会减慢你的应用程序。

对于这样的丰富工具提示，已经存在小部件工具包。例如，参见：[http](http://www.sencha.com/examples/#tooltips) ://www.sencha.com/examples/#tooltips 。

# sencha-touch - Sencha Touch，如何从视图中更改选项卡面板活动项

> ID：10318102
> 
> 赞同：3
> 
> 时间：2012-04-25T14:45:14.337
> 
> 标签：sencha-touch

今天我试图通过视图内的按钮在选项卡面板上设置活动项目，并考虑共享代码，所以它已经是一个已解决的问题。你可以在下面看到我的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T16:28:45.463

（更改为社区 wiki 答案以适应 SO Q & A 格式）

OP写道：

> 您所需要的只是为标签面板分配一个 id，如下面的代码：

```
Ext.define("appName.view.Main", { extend: 'Ext.tab.Panel', id: 'mainTabPanel', 
```

> 然后使用以下代码检索此选项卡面板并设置活动项

```
Ext.getCmp('mainTabPanel').setActiveItem(1); 
```

> 希望这会对某人有所帮助

@Dawesi 写道：

> 只是为了其他人看这个，你可以传递索引、面板 ID 或面板对象本身来设置活动项目

@Proto Bassi 写道：

> 而不是`Ext.getCmp()`你应该使用`Ext.Viewport.down()`，因为一旦找到匹配项，它就会停止。`getCmp`将查看所有项目，这可能需要更长时间。你应该使用`itemId`而不是`id`.

# javascript - 如何在我的代码中刷新套接字

> ID：10318105
> 
> 赞同：0
> 
> 时间：2012-04-25T14:45:39.220
> 
> 标签：javascript, sockets, firefox-addon, firefox-addon-sdk

我正在通过从 FF 附加组件到 Java 服务器的套接字写入。我写了几个请求，服务器似乎一个接一个地处理它们。相反，来自服务器的响应是同时处理的。

我已经尝试在服务器中刷新输出流，但它什么也没做。我不明白发生了什么事。

我很感激任何帮助，谢谢。

EDIT1：可能是附加组件（客户端）没有刷新输入流，这可能吗？我在java服务器中使用out.println，所以'\n'必须刷新它的输出流并且网络库使用write.flush()，但是我没有看到任何其他的输入刷新。

EDIT2：这是我的代码：

```
exports.main = function() {
    try  {
        // At first, we need a nsISocketTransportService
        var transportService =  
            Cc["@mozilla.org/network/socket-transport-service;1"]
            .getService(Ci.nsISocketTransportService);  

        // Try to connect to localhost:2222
        var transport = transportService.createTransport(null, 0, "localhost", 6666, null);  

        var stream = transport.openInputStream(Ci.nsITransport.OPEN_UNBUFFERED,null,null); 
        var instream = Cc["@mozilla.org/scriptableinputstream;1"]
            .createInstance(Ci.nsIScriptableInputStream); 

        // Initialize
        instream.init(stream);
        var outstream = transport.openOutputStream(0, 0, 0);

        var dataListener = { 
            onStartRequest: function(request, context){},

            onStopRequest: function(request, context, status){
                instream.close();
                outstream.close();
            }, 

            onDataAvailable: function(request, context, inputStream, offset, count) { 
                var data = instream.read(count); 
                console.log(data);             
            }, 
        };

        var pump = Cc["@mozilla.org/network/input-stream-pump;1"]
                .createInstance(Ci.nsIInputStreamPump); 
        pump.init(stream, -1, -1, 0, 0, false); 
        pump.asyncRead(dataListener, null); 

        // Write data
        console.log("hi1");
        var outputData = "hi1\n";
        outstream.write(outputData, outputData.length);

        // Write data
        console.log("hi2");
        var outputData = "hi2\n";
        outstream.write(outputData, outputData.length);

    } catch (e){ 
        console.log("Error" + e.result + ": " + e.message); 
        return e; 
    } return null;
}; 
```

所以，当我运行它时，我得到：

```
Client > hi1
Client > hi2
Server > bye1
Server > bye2 
```

它应该是：

```
Client > hi1
Server > bye1
Client > hi2
Server > bye2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:39:38.753

TCP 是一种流协议，因此您会收到一个字节流。如果你想要数据包，你必须通过 TCP 实现自己的协议才能将它们分开。这个话题在互联网上被广泛报道。

**编辑**

这是套接字编程中的一个常见陷阱。大多数人一开始并不理解 TCP 套接字是流，而不是消息队列。

我的意思是，在套接字一端的“发送”调用**不一定对应**于另一端的“接收”。底层可以决定对发送的字节进行分组或拆分。

所以你可以有这样的东西：

*   客户端发送“ABCD”
*   客户端发送“EFGH”
*   服务器收到“AB”
*   服务器收到“CDEF”
*   服务器收到“GH”

**这是一个流，而不是消息队列**。将其视为您正在读取的无限文件。

所以，如果你想从文件中读取字符串，你需要一些方法来分离它们。它可以是分隔符，或者您可以在字符串前面加上字符串的长度，或者其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:06:57.500

您正在同步写入输出流，这意味着在您执行此操作时没有其他 JavaScript 代码可以运行。所以在你写的时候从服务器接收任何东西是不可能的，传入的数据只是被放入一个缓冲区。

另一个问题是您正在发送下一个字符串而不等待服务器的响应。通常，您将能够在服务器响应到达之前将它们都发送出去。您可能只想在收到对前一个字符串的响应时才发送下一个字符串。

您可能想要使用这样的发送功能：

```
Components.utils.import("resource://gre/modules/NetUtil.jsm");

var toSend = ["hi1\n", "hi2\n"];

function sendNextString(outstream)
{
  if (!toSend.length)
    return;  // Nothing left to send

  var outputData = toSend.shift();
  console.log(outputData);
  var instream = Components.classes["@mozilla.org/io/string-input-stream;1"]
                           .createInstance(Components.interfaces.nsIStringInputStream);
  instream.setData(outputData, outputData.length);

  NetUtil.asyncCopy(instream, outstream);
} 
```

你会在之后和之后调用你`sendNextString(outstream)`的代码。`pump.asyncRead()``onDataAvailable`

PS：据我所知，刷新流*不是*这里的问题-您使用的是非缓冲流。

# android - 通知未开始活动

> ID：10318109
> 
> 赞同：0
> 
> 时间：2012-04-25T14:46:02.733
> 
> 标签：android, notifications, android-pendingintent

我有一个警报服务，它是一个用于设置警报的意图服务和一个启动通知的 onAlarmReceiver 广播接收器。在我的通知中，我为我的应用程序的主页设置了一个意图。当人们升级我的应用程序时，通知仍然可以正常工作，但有时并不总是将他们重定向到上次打开的最后一页。似乎未决意图根本没有开始。这是否意味着存在导致应用程序加载先前状态的异常？还是应用被杀？显然它会回到以前的状态。我什至将未决意图的活动更改为其他内容，但仍然存在这样的问题......我如何才能看到设备中发生了什么？这就是我所说的通知广播：

```
AlarmManager mgrAlarm= (AlarmManager)ctxt.getSystemService(Context.ALARM_SERVICE);
Intent intentAlarm = new Intent(ctxt, OnAlarmReceiver.class);
sender = PendingIntent.getBroadcast(ctxt, ++alarmCounter, intentAlarm, 0);
mgrAlarm.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

这是我的 onAlarmReceiver

```
Intent welcomeIntent = new Intent(context, WelcomeActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, welcomeIntent,   Intent.FLAG_ACTIVITY_NEW_TASK); 
```

显现：

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="14" />     
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>  
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />    
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

<application
    android:name="pvApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" android:debuggable="false">
    <activity  
        android:name=".WelcomeActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".unistall"></activity>
    <activity android:name=".Preferences" android:label="@string/set_preferences" ></activity>
    <activity android:name=".Questionnaire" ></activity>
    <activity android:name=".AfterSubmission"></activity>
    <activity android:name=".UserDemographics"></activity>
    <activity android:name=".Instructions"></activity>
    <activity android:name=".unistall"></activity>
    <activity android:name=".PersonalityTest"></activity>   
    <activity android:name=".finalQuestions"></activity>                
    <receiver android:name=".OnBootReceiver"  android:enabled="true">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
    <receiver android:name=".OnAlarmReceiver" android:enabled="true"  ></receiver>        
    <receiver android:name=".OnNetworkReceiver" >
        <intent-filter>
             <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
             <action android:name="android.net.wifi.WIFI_STATE_CHANGED"/>
        </intent-filter>            
    </receiver> 
    <service android:name=".updaterService"    />
    <service android:name=".alarmService"   />
<receiver android:name=".onAppReplaced">
  <intent-filter>
    <action android:name="android.intent.action.PACKAGE_REPLACED" />
    <data android:scheme="package"/>           
  </intent-filter>
</receiver>

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:27:48.487

`FLAG_ACTIVITY_NEW_TASK`继续`Intent`，而不是`PendingIntent`包装。

# sql - 按日期和时间范围加入

> ID：10318114
> 
> 赞同：0
> 
> 时间：2012-04-25T14:46:14.030
> 
> 标签：sql

我有两张桌子：

1.  发票
2.  成本

我想找到与发票记录关联的成本记录来创建利润报告。

例如，从发票表中订购 1004，我想从该文件中获取日期和时间，并根据该日期和时间（等于或小于那时）找到成本。

订单 1004 的 04/15 时间为 171543，它将链接日期为 04/15 和时间 171523 的成本表记录。

有关我希望如何查看输出的详细信息，请参见下图。

提前致谢

**发票文件**

```
Order1    Item1  Sales1     Date1   Time1
1001      | A1001   | 10.00     |04/15  |151025
1002      | A1001   | 12.00     |04/15  |151112
1003      | A1001   | 11.00     |04/15  |171235
1004      | A1001   | 14.00     |04/15  |171543
1005      | A1001   | 13.50     |04/15  |171855 
```

* * *

**成本文件**

```
Item2   Cost2   Date2    Time2 
A1001   | 3.50  |04/14  |171255
A1001   | 4.20  |04/15  |151233
A1001   | 2.50  |04/15  |171523
A1001   | 4.00  |04/15  |171623 
```

* * *

**输出布局 - 边距报告**

```
Order   |Item    |Sales     |Cost   |Margin
1001    |A1001   |10.00     |3.50   | 6.50
1002    |A1001   |12.00     |3.50   | 8.50 
1003    |A1001   |11.00     |2.50   | 8.50 
1004    |A1001   |14.00     |2.50   | 11.50 
1005    |A1001   |13.50     |4.00   | 9.50 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:06:25.857

这应该工作

```
select yourFields
  from invoice
       inner join cost on cost.item2 = invoice.item1
                      and cost.date2 = invoice.date1
                      and cost.time2 = (select max(cost_inner.time2)
                                          from cost as cost_inner
                                         where cost_inner.item2 = invoice.item1
                                           and cost_inner.date2 = invoice.date1
                                           and cost_inner.time2 <= invoice.time1) 
```

有一种方法可以避免使用更复杂的查询进行内部连接，您可以在[此处查看](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column)

# android - Android付费应用，出版商免费下载？

> ID：10318117
> 
> 赞同：2
> 
> 时间：2012-04-25T14:46:21.047
> 
> 标签：android, google-play, publishing

有什么方法可以在 Android Market (Google Play) 上发布付费应用程序，然后指定一个可以免费下载的 gmail 地址？我想从市场上下载我自己的应用程序到我的设备上，但不必为此付费。

（使用 android 的许可服务，您有类似的东西，您可以为某些访问市场的地址指定例外。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T12:17:53.303

将应用程序的最终版本加载到您的设备并进行验证。

# c# - UltraChart 数据绑定问题

> ID：10318120
> 
> 赞同：0
> 
> 时间：2012-04-25T14:46:36.770
> 
> 标签：c#, dataset, infragistics, netadvantage

好的，所以我目前有一个带有 5 个表的手工数据集数据库，所有的关系链接并在完成任何操作时进行更新，一切正常，但我也有一个 infragistice 净优势超图表，它绑定到我的一个名为 Products 的表，目前该图显示了表中每一行的 5 个条形图，一个用于 id 一个用于销售数量，3 个用于各种外键，它这样做是因为它只是从表中选择了整数类型的列，但是我只想要显示每行的 Quantity sold 条，并使用 ID 作为图例中的键。

例如 ID 1 = 蓝色条，ID 2 = 红色条，然后在图表上仅显示已售数量，其颜色会发生变化以反映其所在的 ID。有人知道怎么做吗？

如果它有助于将 id 存储在第 0 列中，并且出售的数量存储在第 5 列中，则第 1 2 3 和 4 列我不想考虑图表。

我已经尝试了一个小时，但我不知道该怎么做！任何帮助表示赞赏

编辑：请注意，我尝试将其绑定到第 5 列，这不起作用图表仅显示为白色背景上的大红色 X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:31:58.230

您可以包含/排除特定列：

```
myChart.Data.IncludeColumn(1, false); 
```

或者，如果您有可用的 DataTable

```
myChart.Data.IncludeColumn(myDataTable.Columns["ColName1"], false); 
```

# c# - 如何从另一个类访问 notifyIcon

> ID：10318132
> 
> 赞同：0
> 
> 时间：2012-04-25T14:47:10.010
> 
> 标签：c#, winforms

**我的主**`notifyIcon`表单上有一个，并且想从另一个类设置气球提示。现在我收到以下错误：.**`The name 'TaskbarIcon' does not exist in the current context`**

 **现在这是有道理的，因为它不在范围内，但我仍将如何访问它？我需要一个接口吗？根据[https://stackoverflow.com/a/5647064/659731](https://stackoverflow.com/a/5647064/659731)我确实需要一个（但它是一个文本框）并且您可以传递一个字符串，而使用 baloontip 我需要传递更多参数：`ShowBalloonTip(2000, "Nu:", result[0] + " - " + result[1], ToolTipIcon.Info);`

它被声明为`public System.Windows.Forms.NotifyIcon TaskbarIcon;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:05:29.337

你需要一个对你的`Main`表单的引用，它需要传递给你的类（可能在构造函数中）：

```
public class MyClass
{
    private Form Main { get; set; }

    public MyClass(Form main, ...)
    {
        Main = main;
    }
} 
```

然后你会从你的班级中调用该项目：

```
private method DoSomething(...)
{
    Main.TaskbarIcon.ShowBalloonTip(...);
} 
```

但是，正如您所[提到](https://stackoverflow.com/questions/5646954/how-to-access-winform-textbox-control-from-another-class/5647064#5647064)的，最好在您的类和实际对象之间放置一些东西。

**编辑：** 您还可以传递一个委托来调用，它将为您进行更改，或者您可以传递对该项目的引用（同样，不推荐）。但是，请确保您在同一线程上执行所有这些操作。

**Edit2：** 在链接的基础上，您的界面可能如下所示：

```
interface IYourForm
{
    void ShowBalloonTip(int timeout, string tipTitle, string tipText, ToolTipIcon tipIcon);
} 
```

然后，您的表单将实现该接口：

```
class YourForm : Form, IYourForm 
```

和方法：

```
public void ShowBalloonTip(int timeout, string tipTitle, string tipText, ToolTipIcon tipIcon)
{
    TaskbarIcon.ShowBalloonTip(timeout, tipTitle, tipText, tipIcon);
} 
```

然后，这会将您的 DoSomething 方法更改为如下所示：

```
private method DoSomething(int timeout, string tipTitle, string tipText, ToolTipIcon tipIcon)
{
    Main.ShowBalloonTip(timeout, tipTitle, tipText, tipIcon);
} 
```

再次**确保这一切都在同一个线程上**。否则，这需要以不同的方式处理。**

# javascript - JavaScript重定向它不在服务器上工作，但在本地主机上？

> ID：10318133
> 
> 赞同：0
> 
> 时间：2012-04-25T14:47:15.220
> 
> 标签：javascript, html

所以，我建立了一个小网站：[http](http://rolandgroza.com/projects/tcsg/) ://rolandgroza.com/projects/tcsg/ ，但是在将文件移动到服务器之前似乎有一个我没有遇到的问题。我通常在部署到服务器之前先在 localhost 上进行测试，所以我只是在完成之后才看到问题。

您可以在源代码中看到我的 JavaScript 脚本，但我也将它放在这里：

```
$(document).ready(function() {

var header  =   $('body').find('header');
var footer  =   $('body').find('footer');
var badge   =   $('body').find('.badge-wrapper');

var logo_red = $(header).find('.logo a');

var navigation = {
    home:       $('body').find('.home'),
    about:      $('body').find('.about'),
    services:   $('body').find('.services'),
    contact:    $('body').find('.contact')
}

var container = {
    home:       $('body').find('.content-home-wrapper'),
    about:      $('body').find('.content-about-wrapper'),
    services:   $('body').find('.content-services-wrapper'),
    contact:    $('body').find('.content-contact-wrapper')
}

var home = {
    form:       $(container.home).find('.form-wrapper'),
    galleries:  $(container.home).find('.galleries-wrapper')
}

var about = {
    notepad:    $(container.about).find('.notepad-wrapper')
}

var services = {
    minimum:    $(container.services).find('.minimum-package'),
    medium:     $(container.services).find('.medium-package'),
    featured:   $(container.services).find('.featured-package')
}

var contact = {
    notepad:    $(container.contact).find('.notepad-wrapper')
}

var position = function (obj) {
    return {
        'top': (($(window).height() - $(obj).outerHeight()) / 2) + 'px',
        'left': (($(window).width() - $(obj).outerWidth()) / 2) + 'px'
    }
}

var current_page = function() {
    var path = window.location.pathname;
    var current_page = path.substring(path.lastIndexOf('/') + 1);
    return current_page;
}

var curr_pag = current_page();

switch (curr_pag) {
    case 'index.php':
        $(navigation.home).addClass('selected');
        break;
    case 'about.php':
        $(navigation.about).addClass('selected');
        break;
    case 'services.php':
        $(navigation.services).addClass('selected');            
        break;
    case 'contact.php':
        $(navigation.contact).addClass('selected');
        break;
    default:
        break;
}

$(logo_red).on('click', function() {
    var page = current_page();
    switch (page) {
        case 'index.php':
            $(home.form).removeClass('animated flipInX');
            $(home.galleries).removeClass('animated flipInX');
            $(home.form).addClass('animated fadeOutLeftBig');
            $(home.galleries).addClass('animated fadeOutRightBig');
            setTimeout(function(){
                window.location.href = 'index.php';
            }, 2000);
            break;
        case 'about.php':
            $(about.notepad).removeClass('animated flipInX');
            $(about.notepad).addClass('animated flipOutX');
            setTimeout(function(){
                window.location.href = 'index.php';
            }, 2000);
            break;
        case 'services.php':
            $(services.minimum).removeClass('animated flipInY');
            $(services.medium).removeClass('animated flipInY');
            $(services.featured).removeClass('animated flipInY');
            $(services.minimum).addClass('animated fadeOutLeftBig');
            $(services.medium).addClass('animated fadeOutDownBig');
            $(services.featured).addClass('animated fadeOutRightBig');
            setTimeout(function(){
                window.location.href = 'index.php';
            }, 2000);
            break;
        case 'contact.php':
            $(contact.notepad).removeClass('animated flipInX');
            $(contact.notepad).addClass('animated flipOutX');
            setTimeout(function(){
                window.location.href = 'index.php';
            }, 2000);
            break;
        default:
            break;
    }
    e.preventDefault();
})

for(var key in navigation) {
   var object = navigation[key];
   $(object).on('click', function(e){
        var link = $(this).attr('href');
        $(this).addClass('animated hinge');
        var page = current_page();
        switch (page) {
            case 'index.php':
                $(home.form).removeClass('animated flipInX');
                $(home.galleries).removeClass('animated flipInX');
                $(home.form).addClass('animated fadeOutLeftBig');
                $(home.galleries).addClass('animated fadeOutRightBig');
                setTimeout(function(){
                    window.location.href = link;
                }, 2000);
                break;
            case 'about.php':
                $(about.notepad).removeClass('animated flipInX');
                $(about.notepad).addClass('animated flipOutX');
                setTimeout(function(){
                    window.location.href = link;
                }, 2000);
                break;
            case 'services.php':
                $(services.minimum).removeClass('animated flipInY');
                $(services.medium).removeClass('animated flipInY');
                $(services.featured).removeClass('animated flipInY');
                $(services.minimum).addClass('animated fadeOutLeftBig');
                $(services.medium).addClass('animated fadeOutDownBig');
                $(services.featured).addClass('animated fadeOutRightBig');
                setTimeout(function(){
                    window.location.href = link;
                }, 2000);
                break;
            case 'contact.php':
                $(contact.notepad).removeClass('animated flipInX');
                $(contact.notepad).addClass('animated flipOutX');
                setTimeout(function(){
                    window.location.href = link;
                }, 2000);
                break;
            default:
                break;
        }
        e.preventDefault();
    })
}

$(badge).hover(
    function(){
        $(this).addClass('animated swing');
    },
    function(){
        $(this).removeClass('animated swing');
    }
);

setTimeout(function(){
    $(header).addClass('animated fadeInDown');
    $(footer).addClass('animated fadeInUp');
    $(badge).addClass('animated swing');
}, 1000);

setTimeout(function(){
    $(home.form).addClass('animated flipInX');
    setTimeout(function(){
        $(home.galleries).addClass('animated flipInX');
    }, 500);
}, 2000);

setTimeout(function(){
    $(about.notepad).addClass('animated flipInX');
}, 2000);

setTimeout(function(){
    $(services.minimum).addClass('animated flipInY');
    setTimeout(function(){
        $(services.medium).addClass('animated flipInY');
        setTimeout(function(){
            $(services.featured).addClass('animated flipInY');
        }, 500);
    }, 500);
}, 2000);

setTimeout(function(){
    $(contact.notepad).addClass('animated flipInX');
}, 2000);

for(var key in container) {
   var object = container[key];
   var css = position(object);
   $(object).css(css);
}

$('select').dropkick();

}); 
```

问题是，当单击其中一个菜单链接时，应该会发生一些动画，然后重定向到您单击的链接，使用`window.location.href`，但它几乎不起作用。

我不知道是什么问题，所以我希望有人可以，因为在 XAMPP localhost 上工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:06:16.963

问题在于您询问当前页面，并且在您的主页上，当 index.php 不在 url 中时，您丢失了一些东西并且您的 switch case 不起作用。在导航中为您的开关功能添加一个没有页面或页面 == '' 的情况，这样它就会知道该怎么做。希望有帮助！

# jquery - jQuery 模态确认 Onload 打开

> ID：10318135
> 
> 赞同：1
> 
> 时间：2012-04-25T14:47:18.083
> 
> 标签：jquery, html

我想知道是否有人可以帮助我。

我对 jQuery 有点陌生，所以请多多包涵。从之前的帖子中获得了一些指导，我已将模态确认对话框添加到图库页面，如下面的脚本所示。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
  <title>Gallery</title> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <link href="Libraries/fancybox/jquery.fancybox-1.3.1.css" rel="stylesheet" type="text/css" /> 
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/base/jquery-ui.css" type="text/css" media="all" />
  <link href="Styles/style.css" rel="stylesheet" type="text/css" /> 
  <!--[if IE]>   
  <link href="Styles/ie.css" rel="stylesheet" type="text/css" /> 
  <![endif]-->
  <script src="Libraries/jquery/jquery-1.4.3.min.js" type="text/javascript"></script> 
  <script src="Libraries/fancybox/jquery.fancybox-1.3.1.pack.js" type="text/javascript"></script> 
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>         
  <script type="text/javascript"> 

  $(function() { $('a.fancybox').fancybox(); }); 

  </script> 
  <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-right: 110px;
}
.style4 {font-size: 12px}
-->
  </style>
  <script type="text/javascript"> 
    $(function showdialog() {
        // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:160,
            modal: false,
            buttons: {
                "Delete image": function() {
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    </script>

</head>
<body style="font-family: Calibri; color:  #505050; font-size: 9px; border-bottom-width: thin; margin-top: 5px; margin-left: -476px; margin-right: 1px; margin-bottom: -10px;">
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div>
  <form id="gallery" name="gallery" class="page" action="index.php" method="post">  
  <div id="container"> 
    <div id="center"> 
      <div class="aB"> 
        <div class="aB-B"> 
          <?php if ('Uploaded files' != $current['title']) :?>
          <?php endif;?>
          <input name="deleteimage" type="button" value="Delete Selected Image" onclick="showdialog()" />
          <div class="demo"> 
            <div class="inner"> 
              <div class="container"> 
                <div class="gallery"> 
                  <ul class="gallery-image-list"> 
                  <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) : 
                          $xmlFile = $descriptions->documentElement->childNodes->item($i); 
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8'); 
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8'); 
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source')); 
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail')); 
                  ?>
                    <li class="item"> 
                      <a class="fancybox" target="_blank" rel="original" href="<?php echo $source; ?>"><img class="preview" 
                        alt="<?php echo $name; ?>"  src="<?php echo $thumbnail; ?>" /></a><?php echo "<input type='radio' name='del' value='{$name}' />"?></li>
                        <p><span class="style4"><b>Image Name:</b> <?php echo htmlentities($xmlFile->getAttribute('originalname'));?> <br />
                          <b>Image Description:</b> <?php echo htmlentities($xmlFile->getAttribute('description'));?> </span><br />  
                          <?php endfor; ?>
                          </li>
                        </p>
                  </ul>
                </div> 
              </div> 
            </div> 

    </div> 
    <div id="dialog-confirm" title="Delete This Image?">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>This image will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>
    </div> 
        <div class="aB-a">        </div> 
      </div> 
    </div> 
  </div> 
  </form> 
</body> 
</html> 
```

我遇到的问题是对话框在页面加载时打开，而我希望它只出现在单击按钮时。我已经在单击按钮时打开了对话框，但无论如何我都找不到在页面加载时停止打开它的方法。

我浏览了 jQuery 文档，没有任何东西可以让您选择更改此设置。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了？

非常感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:54:04.910

`$`从你的函数声明中删除。您不需要使用 jQuery 来定义常规函数。

```
$(function showdialog() { ... }); 
```

应该

```
function showdialog() { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:57:34.467

将类“隐藏”添加到 css 和 div 对话框（像这样）：

```
.hide{
  display: none !important; 
 }

 <div id="dialog-confirm" class="hide" title="Delete This Image?"> 
```

# c - gdb 没有在正确的行上设置断点

> ID：10318137
> 
> 赞同：1
> 
> 时间：2012-04-25T14:47:25.960
> 
> 标签：c, debugging, gdb

我目前正在处理 Qt/zlib 中的一个错误，我正在尝试检查一个变量是否在它崩溃的行之前已经损坏，所以我习惯于`break 1245`在前一行设置中断，然而：

```
(gdb) info break
Num     Type           Disp Enb Address    What
6       breakpoint     keep y   0x02cb0e1e in inflateEnd at inflate.c:1245
breakpoint already hit 6 times
(gdb) c
Continuing.
[Thread 0xb103db70 (LWP 26146) exited]
[Thread 0xb5a74b70 (LWP 26143) exited]

Breakpoint 6, inflateEnd (strm=0x86ccdc0) at inflate.c:1246
1246        if (state->window != Z_NULL) ZFREE(strm, state->window); 
```

这是 SEGFAULTing 所在的行，而不是我设置的断点。gdb 中的错误或一些古怪的行为？

编辑：添加我正在处理的区域列表：

```
(gdb) list
1241    {
1242        struct inflate_state FAR *state;
1243        if (strm == Z_NULL || strm->state == Z_NULL || strm->zfree ==         (free_func)0)
1244            return Z_STREAM_ERROR;
1245        state = (struct inflate_state FAR *)strm->state;
1246        if (state->window != Z_NULL) ZFREE(strm, state->window);
1247        ZFREE(strm, strm->state);
1248        strm->state = Z_NULL;
1249        Tracev((stderr, "inflate: end\n"));
1250        return Z_OK;
(gdb) 
```

编辑：从评论中获取建议并使用来自 ubuntu（apt-get 源）的源包重新构建它，并使用 CFLAGS 和 SFLAGS 强制为 -O0 进行构建，但是它现在不会在 gdb 中为段错误返回任何行号，所以我认为我在某个地方出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:36:26.870

> 这是 SEGFAULTing 所在的行，而不是我设置的断点

This is expected when debugging optimized code (which `inflate.c` likely is). The compiler moves instructions around, making code execution "jump around" when you step through it.

# entity-framework - EF 4.3 反向代码优先：急切加载的相关实体为空

> ID：10318141
> 
> 赞同：1
> 
> 时间：2012-04-25T14:47:45.277
> 
> 标签：entity-framework

我正在尝试使用导航属性访问一些相关实体。我已经关闭了延迟加载，并且正在使用`Include()`可`using System.Data.Entity`用于 Eager Load 相关实体的方法。但是，当视图加载时，我的相关实体为空。

我相信关系已经正确配置我错过了什么？

**调用方法**

```
public IQueryable<JobRecord> GetAll()
{
    return _dataContext.Set<JobRecord>()
       .Include(t => t.CompanyInfo);
} 
```

**语境**

```
public class Application_Context : DbContext, IDataContext
{
public Gyroview_Context():base("Application_Entities")
{ 
    Database.SetInitializer<Application_Context>(null);
    Configuration.LazyLoadingEnabled = false;
}

    public DbSet<CompanyInfo> CompanyInfoes { get; set; }
public DbSet<JobRecord> JobRecords { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Configurations.Add(new CompanyInfoMap());
            modelBuilder.Configurations.Add(new JobRecordMap());

    modelBuilder.Entity<JobRecord>()
            .HasOptional(r => r.CompanyInfo)
            .WithMany(c => c.JobRecords)
            .HasForeignKey(r => r.CompanyID);
}

public IDbSet<TEntity> Set<TEntity>() where TEntity : class
{
    return base.Set<TEntity>();
}
} 
```

**工作记录**

```
public class JobRecord
{
public JobRecord()
{
        this.CompanyInfo = new CompanyInfo();
}

    public Nullable<int> CompanyID { get; set; }
public int Jobid { get; set; }

public virtual CompanyInfo CompanyInfo { get; set; }
} 
```

**工作记录图**

```
public class JobRecordMap : EntityTypeConfiguration<JobRecord>
{
    public JobRecordMap()
    {
    // Primary Key
    this.HasKey(t => t.Jobid);

    // Table & Column Mappings
    this.ToTable("JobRecord");
    this.Property(t => t.CompanyID).HasColumnName("CompanyID");
    this.Property(t => t.Jobid).HasColumnName("Jobid");

    // Relationships    

        this.HasOptional(t => t.CompanyInfo)
    .WithMany(t => t.JobRecords)
            .HasForeignKey(d => d.CompanyID);
}
} 
```

**公司信息**

```
public class CompanyInfo
{
    public CompanyInfo()
    {
        this.JobRecords = new List<JobRecord>();    
    }

    public int CompanyID { get; set; }
    public string CompanyName { get; set; }
    public string Address { get; set; }

    public virtual ICollection<JobRecord> JobRecords { get; set; } 
} 
```

**公司信息图**

```
public class CompanyInfoMap : EntityTypeConfiguration<RigViewCompanyInfo>
{
    public CompanyInfoMap()
    {
    // Primary Key
    this.HasKey(t => t.CompanyID);

    // Properties
    this.Property(t => t.CompanyName)
    .HasMaxLength(255);

    this.Property(t => t.Address)
    .HasMaxLength(255);

    // Table & Column Mappings
    this.Property(t => t.CompanyID).HasColumnName("CompanyID");
    this.ToTable("CompanyInfo");
    this.Property(t => t.CompanyName).HasColumnName("CompanyName");
    this.Property(t => t.Address).HasColumnName("Address");

}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:46:44.853

好的，我在`Database First`使用 Code First 创建的相同 POCO 创建解决方案后发现了这一点`Reverse Engineer Power Tool`。

由于导航属性（相关实体）在构造函数中被新建，相关实体变为空；这是覆盖实体并使其为空。

我不确定为什么要`Reverse Engineer Power Tool`使用构造函数创建 POCO，因为我不需要这样做`Database First`，但是构造函数可以一起删除。

我之前无法捕捉到这一点，因为 razor 视图在为空的相关实体上引发了空引用异常。

HTH其他人遇到同样的问题。

# python - 修改了颜色条刻度中的科学记数法

> ID：10318143
> 
> 赞同：1
> 
> 时间：2012-04-25T14:47:52.113
> 
> 标签：python, matplotlib

我想在我的颜色栏中放置两个刻度。matplotlib。

我的问题是颜色栏上的数字格式。我想而不是`1.99e+00`拥有`1.9e0`. 如果数字被四舍五入会更好（例如`2.0e0`）

该数字`0`应保持为`0`。

这是代码：

```
from scipy import *
import matplotlib.pylab as plt
import numpy as np

def main():
# Creating the grid of coordinates x,y 
x,y = ogrid[-1.:1.:.01, -1.:1.:.01]

z = 3*y*(3*x**2-y**2)/4 + .5*cos(6*pi * sqrt(x**2 +y**2) + arctan2(x,y))

fig = plt.figure()

ax = fig.add_subplot(111)
result = ax.imshow(z, 
                   origin='lower', 
                   extent=[0,2,0,400],              
           interpolation='nearest',
           aspect='auto'
          )
cbar = fig.colorbar( result , ticks=[ 0 , z.max() ])
    cbar.ax.set_yticklabels([ 0 ,  '{0:.2e}'.format( z.max()) ]) 
    cbar.outline.remove()

plt.show()

if __name__ == '__main__':
    main() 
```

![在此处输入图像描述](../Images/cbd720a0a93f43873df4906f63f1a059.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:34:12.340

您使用的格式可以简单地修改为小数点后一位而不是两位，这会自动包括四舍五入。如果您将它们作为文本修改进行，那么您想要的其他更改也很容易。

```
def format_yticklabel(number):
    return '{0:.1e}'.format(number).replace('+0', '').replace('-0', '-')

>>> format_yticklabel(1.99)
'2.0e0' 
```

# web-services - 域未加载 www

> ID：10318144
> 
> 赞同：0
> 
> 时间：2012-04-25T14:47:53.783
> 
> 标签：web-services, dns

我的网络服务器有问题，我刚刚添加了一个域，如果我键入没有“www”的 URL，一切正常。但只要我输入 www。它提供了一个查找域搜索页面。

因此，如果我访问 mysite.com 站点，它运行得很好，但如果我使用 www.mysite.com，它就像域不存在一样......

有谁知道为什么会发生这种情况或如何解决它？

感谢您的帮助，我真的不知道要在这篇文章中添加什么其他信息，所以如果需要，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:52:19.327

最好在 webmasters.stackexchange.com 上问这个问题。但是 www.mysite.com 没有在 DNS 中注册，或者您的网络服务器不知道如何响应对它的请求。使用 dnsbench.com 之类的服务来检查 DNS 设置，如果没问题，您需要识别您的网络服务器以获得进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:52:39.643

您的域名提供商是什么？我曾经在 Godaddy 遇到过同样的问题，但如果您只是设置名称服务器，请等待整整 24 小时。没有 www 的站点可能会在 www 之前运行。

# asp.net-mvc-3 - asp.net mvc - 如何验证复选框？

> ID：10318151
> 
> 赞同：1
> 
> 时间：2012-04-25T14:48:21.797
> 
> 标签：asp.net-mvc-3, validation, annotations

我发现模型注释对于 MVC 中的验证非常有用，但似乎无法让它用于复选框。我正在使用带有剃须刀和 c# 的 MVC 3。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:50:48.377

上次我听到这个问题时，客户想验证问题是否已被回答。这对于复选框是不可能的，只能通过使用一对单选按钮来表示是和否，并将两者都默认为未选中。然后提交时，如果两个按钮都未选中，则验证失败。

# javascript - jQuery UI：将拖放元素的 id 传递给函数

> ID：10318152
> 
> 赞同：1
> 
> 时间：2012-04-25T14:48:23.503
> 
> 标签：javascript, jquery, jquery-ui

我有一个名为 saveSmilies 的函数，它接受两个参数：拖动的元素 id 和放置的元素 id。

我正在尝试这样做：

```
$('.draggable').draggable({
                    revert: true,
                    drop: function() {
                        $dropped = $(this);
                    },
                    stop: function() {
                        quiz1.saveSmilies($(this).attr('id'), $dropped);
                    }
                }); 
```

但它不起作用......我这样做完全错了吗？或者只是某个地方的错字？

所以基本上如果我拖动一个 id 为“box1”的元素并将其放在一个 id 为“box2”的元素上，那么它将执行以下操作：`quiz1.saveSmilies('box1','box2');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:54:40.847

这应该有效：

```
drop: function(ev, ui) {
    var draggedID = ui.draggable.attr("id");
    var droppedID = $(this).attr("id");
} 
```

# php - 用户按下后退按钮时不重绘页面（在 PHP 中使用 $_GET 变量）

> ID：10318154
> 
> 赞同：0
> 
> 时间：2012-04-25T14:48:26.660
> 
> 标签：php, caching, button, dynamic, back

我有一个动态网站，其中包含使用 PHP 绘制的页面。

使用 $_GET 变量，我从用户那里获取命令，基于 $_GET 命令执行 PHP，并绘制页面。

但是，当用户按下后退按钮时，我希望他们看到之前为他们动态绘制的页面，而不是重新执行代码。

我已经看到这样做了，但不知道该怎么做。

例如假设以下代码：

```
if ($_GET['cmd'] == "time") {
   echo "The current Unix timestamp is: " . time;
} 
```

单击 url: somepage.php?cmd=time 可以正确执行代码，但使用后退按钮时会重新执行代码。有没有一种方法使用缓存或其他我不知道的方法，可以让用户看到绘制页面时的时间，而不是重新执行？

==================================================== ======================================== 为了尝试更具体一点，页面和我正在谈论的代码执行多个功能并根据给出的命令更改 MySQL 数据，然后绘制页面。

我想知道在使用后退按钮时是否有办法不重新执行，而只显示第一次动态绘制的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:53:54.263

我不确定这是否是您正在寻找的，但它可能会有所帮助。而不是使用 php get，你可以使用 ajax 然后实现这个： http: [//www.nerdswithlives.com/2010/03/yui-ajax-browser-history-back-button.html](http://www.nerdswithlives.com/2010/03/yui-ajax-browser-history-back-button.html)

您还可以在每次执行特定的 get 命令时存储某种类型的变量，然后检查该变量以确定在页面加载时要重绘哪些内容。

**编辑**

从更多地考虑你的问题，我相信答案在于使用 PHP 会话，并将数据存储在客户端机器上。当用户单击“返回”时，他/她将进入缓存页面......所以缓存不是您的答案。您需要以特定的方式重新绘制它，但是因为您使用的是 GET，所以浏览器不会缓存它……至少有后退按钮功能。你的答案是在这个动态内容存在的每个页面上开始一个会话，存储一个变量`$_SESSION['sessionVar'] = 1;`或其他什么。然后根据在该页面上绘制的内容动态更改变量。然后，当用户单击“返回”时，您可以检查该变量是什么并再次获取数据。摆脱为此使用缓存的心态——您需要重新绘制用户之前看到的任何数据。在这种情况下，会话将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:04:21.083

你可以看看使用`$_SESSION`

```
if ($_GET['cmd'] == "time") {
   $_SESSION['time'] = isset($_SESSION['time']) ? $_SESSION['time'] : time;
   echo "The current Unix timestamp is: " . $_SESSION['time'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:09:14.367

您应该使用 HTTP 缓存标头。有以下三种策略：

*   过期时间
*   电子标签
*   上次修改时间

第一个设置页面过期的日期/时间。这可以通过发送标头来实现：

```
header('Expires: Thu, 28 Apr 2012 16:00:00 GMT'); 
```

这种方法的主要问题是你不能使这个缓存失效。这意味着，如果您*想*重绘所有内容以更新页面上的某些内容，则必须等待缓存过期。

ETag 有更好的控制，但更难实现：

```
$etag = md5($pageId);
if (isset($_SERVER['HTTP_IF_NONE_MATCH']) 
    && false !== stripos($_SERVER['HTTP_IF_NONE_MATCH'], $etag)) {
    header('HTTP/1.1 304 Not Modified');
    die;
} else {
    header('ETag: '.$etag);
    //draw the page
} 
```

当浏览器第一次点击页面时，页面被绘制并提供`ETag`标题。下次浏览器点击页面时，它会发送一个`If-None-Match`带有之前 ETag 值的 HTTP 请求头。服务器必须将此标头与当前的ETag进行比较，如果它们相同，则服务器只需要发送一个空的正文和一个`304 Not Modified`状态。ETag 可以是任何以独特方式标识页面内容和版本的东西。

Last Modification 的工作方式类似于 ETag，但它使用日期而不是服务器生成的标签。还必须考虑以后和以前的日期来进行日期比较。

[HTTP 规范的第 13 节](https://www.rfc-editor.org/rfc/rfc2616#section-13)涵盖了所有这些机制及其陷阱。这是一个艰难的阅读，但它是值得的。

# erlang - 如何在 Erlang 中创建 1000 个随机数的列表？

> ID：10318156
> 
> 赞同：14
> 
> 时间：2012-04-25T14:48:28.017
> 
> 标签：erlang, erlang-shell

我确信有一个功能。我只想列出 1000 个数字，每个数字都应该是随机的。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-25T15:03:14.800

要生成一个包含 1 到 10 之间随机数的 1000 元素列表：

```
[rand:uniform(10) || _ <- lists:seq(1, 1000)]. 
```

将 10 和 1000 更改为适当的数字。如果您从`rand:uniform`调用中省略 10，您将得到一个介于 0.0 和 1.0 之间的随机浮点数。

**在低于 18.0 的 Erlang 版本上：**改用`random`模块。*警告！*您需要`random:seed/3`在每个进程使用它之前运行它，以避免获得相同的伪随机数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-25T16:26:59.173

确保适当播种。

```
 > F = fun() -> io:format("~p~n", [[random:uniform(10) || _ <- lists:seq(1, 10)]]) end.
 > spawn(F).
 [1,5,8,10,6,4,6,10,7,5] 
 > spawn(F).
 [1,5,8,10,6,4,6,10,7,5] 
```

你的直觉是结果会有所不同。Erlang 中的随机种子是特定于进程的。默认种子是固定的。这就是为什么即使示例中有两个进程也会得到相同结果的原因。

```
 > G = fun() -> {A1,A2,A3} = now(), 
              random:seed(A1, A2, A3), 
              io:format("~p~n", [[random:uniform(10) || _ <- lists:seq(1, 10)]]) 
       end.
 > spawn(G).
 [3,1,10,7,9,4,9,2,8,3]
 > spawn(G).
 [9,1,4,7,8,8,8,3,5,6] 
```

请注意，如果 的返回值`now()`在两个不同的进程中相同，您最终会遇到与上述相同的问题。这就是为什么有些人喜欢使用 a`gen_server`来包装随机数生成的原因。或者，您可以使用更好的种子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T17:26:58.320

> 我会更乐意获得一个我可以在那里阅读的网站。谢谢。

你应该看看[Learn You Some Erlang](http://learnyousomeerlang.com/)，它将指导你学习这门语言。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-06T22:15:57.793

来自加密模块的伪随机数生成器效果更好`crypto:rand_uniform(From, To)`。
要生成一个包含 1 到 10 之间随机数的 1000 元素列表：

```
crypto:start(),
[crypto:rand_uniform(1, 10) || _ <- lists:seq(1, 1000)]. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-25T12:04:54.373

来自 Erlang Central wiki：

[http://erlangcentral.org/wiki/index.php?title=Random_Numbers](http://erlangcentral.org/wiki/index.php?title=Random_Numbers)

其中 N = 项目数，StartVal = 最小值，Lim = 最大值

```
generate_random_int_list(N,StartVal,Lim) ->
    lists:map(fun (_) -> random:uniform(Lim-StartVal) + StartVal end, lists:seq(1,N)). 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-24T16:53:27.323

您首先需要正确播种。

```
_ = rand:seed(exs1024s),
[rand:uniform(100) || _ <- lists:seq(1, 1000)]. 
```

# jquery - 使用 twitter 引导程序折叠的子导航栏

> ID：10318163
> 
> 赞同：2
> 
> 时间：2012-04-25T14:48:58.360
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用 twitter 引导程序，并且我的导航栏可以正常使用折叠功能。

**这是我的html代码：**

```
<div class="subnav">
    <ul class="nav nav-pills">
      <li class="dropdown">
        <a href="#" data-toggle="dropdown" class="dropdown-toggle">Buttons <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li class=""><a href="#buttonGroups">Button groups</a></li>
          <li class=""><a href="#buttonDropdowns">Button dropdowns</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" data-toggle="dropdown" class="dropdown-toggle">Navigation <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li class=""><a href="#navs">Nav, tabs, pills</a></li>
          <li class=""><a href="#navbar">Navbar</a></li>
          <li class=""><a href="#breadcrumbs">Breadcrumbs</a></li>
          <li class=""><a href="#pagination">Pagination</a></li>
        </ul>
      </li>
      <li class=""><a href="#labels">Labels</a></li>
      <li class=""><a href="#badges">Badges</a></li>
      <li class=""><a href="#typography">Typography</a></li>
      <li class=""><a href="#thumbnails">Thumbnails</a></li>
      <li class=""><a href="#alerts">Alerts</a></li>
      <li><a href="#progress">Progress bars</a></li>
      <li><a href="#misc">Miscellaneous</a></li>
    </ul>
  </div> 
```

这是我的**bootstrap_and_overrides.css.scss**

```
$iconSpritePath: asset-url('glyphicons-halflings.png', image);
$iconWhiteSpritePath: asset-url('glyphicons-halflings-white.png', image);
@import "bootstrap";
body { padding-top: 40px;
       .navbar .brand {padding: 10px 20px; }
       background: url("background.png") repeat scroll 0 0 #EEEEEE;

.subnav {
    background-color: #EEEEEE;
    background-repeat: repeat-x;
    border: 1px solid #E5E5E5;
    border-radius: 4px 4px 4px 4px;
    height: 36px;

            .nav > li > a {
                        border-left: 1px solid #F5F5F5;
                        border-radius: 0 0 0 0;
                        border-right: 1px solid #E5E5E5;
                        margin: 0;
                        padding-bottom: 11px;
                        padding-top: 11px;
                        }
    }

    .subnav-fixed {
    /*important part*/
    left: 0;
    position: fixed;
    right: 0;
    top: 40px;
    z-index: 1020;
    /*design stuff*/
    border-color: #D5D5D5;
    border-radius: 0 0 0 0;
    border-width: 0 0 1px;
    box-shadow: 0 1px 0 #FFFFFF inset, 0 1px 5px rgba(0, 0, 0, 0.1);
    background-color: #FFFFFF;
    }
}
@import "bootstrap-responsive"; 
```

**这是我的js代码：**

```
$(document).scroll(function(){
    // If has not activated (has no attribute "data-top"
    if (!$('.subnav').attr('data-top')) {
        // If already fixed, then do nothing
        if ($('.subnav').hasClass('subnav-fixed')) return;
        // Remember top position
        var offset = $('.subnav').offset()
        $('.subnav').attr('data-top', offset.top);
    }

    if ($('.subnav').attr('data-top') - $('.subnav').outerHeight() <= $(this).scrollTop())
        $('.subnav').addClass('subnav-fixed');
    else
        $('.subnav').removeClass('subnav-fixed');
}); 
```

另外，我正在使用子导航栏，我的问题是我的子导航栏没有折叠。

**twitter bootstrap 中正确的子导航栏版本：**

![精细的 subnav 推特引导程序](../Images/6c2f6916e4dc8fc915984a0001f1c999.png)

**我的坏版本不能正常工作：/**

![糟糕的 subnav 推特引导程序](../Images/4ddb2c5d16139ab912a1dc55e20af1fe.png)

**我该如何解决这个问题？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:48:08.800

如果你有这个问题，你可以用这个来解决这个问题：

在您的**javascript 文件中**，您必须添加此 jquery 代码：

```
//subnav config
 $(function(){

    var $win = $(window);
    var $nav = $('.subnav');
    var navTop = $('.subnav').length && $('.subnav').offset().top - 38;
    var isFixed = 0;

    processScroll();

    $win.on('scroll', processScroll);

    function processScroll() {
        console.log('test');
        var i, scrollTop = $win.scrollTop();
        if (scrollTop >= navTop && !isFixed) {
            isFixed = 1;
            $nav.addClass('subnav-fixed');
        } else if (scrollTop <= navTop && isFixed) {
            isFixed = 0;
            $nav.removeClass('subnav-fixed');
        }
    };
}) 
```

在您的 css 文件或文件**bootstrap_and_overrides.css.scss**中，您可以添加以下代码：

```
/* Add additional stylesheets below
-------------------------------------------------- */

/* Subnav */
.subnav {
  width: 100%;
  height: 36px;
  background-color: #eeeeee; /* Old browsers */
  background-repeat: repeat-x; /* Repeat the gradient */
  background-image: -moz-linear-gradient(top, #f5f5f5 0%, #eeeeee 100%); /* FF3.6+ */
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f5f5f5), color-stop(100%,#eeeeee)); /* Chrome,Safari4+ */
  background-image: -webkit-linear-gradient(top, #f5f5f5 0%,#eeeeee 100%); /* Chrome 10+,Safari 5.1+ */
  background-image: -ms-linear-gradient(top, #f5f5f5 0%,#eeeeee 100%); /* IE10+ */
  background-image: -o-linear-gradient(top, #f5f5f5 0%,#eeeeee 100%); /* Opera 11.10+ */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f5f5f5', endColorstr='#eeeeee',GradientType=0 ); /* IE6-9 */
  background-image: linear-gradient(top, #f5f5f5 0%,#eeeeee 100%); /* W3C */
  border: 1px solid #e5e5e5;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}
.subnav .nav {
  margin-bottom: 0;
}
.subnav .nav > li > a {
  margin: 0;
  padding-top:    11px;
  padding-bottom: 11px;

  border-right: 1px solid #e5e5e5;
  -webkit-border-radius: 0;
     -moz-border-radius: 0;
          border-radius: 0;
}
.subnav .nav > .active > a,
.subnav .nav > .active > a:hover {
  padding-left: 13px;
  color: #777;
  background-color: #e9e9e9;
  border-right-color: #ddd;
  border-left: 0;
  -webkit-box-shadow: inset 0 3px 5px rgba(0,0,0,.05);
     -moz-box-shadow: inset 0 3px 5px rgba(0,0,0,.05);
          box-shadow: inset 0 3px 5px rgba(0,0,0,.05);
}
.subnav .nav > .active > a .caret,
.subnav .nav > .active > a:hover .caret {
  border-top-color: #777;
}
.subnav .nav > li:first-child > a,
.subnav .nav > li:first-child > a:hover {
  border-left: 0;
  padding-left: 12px;
  -webkit-border-radius: 4px 0 0 4px;
     -moz-border-radius: 4px 0 0 4px;
          border-radius: 4px 0 0 4px;
}
.subnav .nav > li:last-child > a {
  border-right: 0;
}
.subnav .dropdown-menu {
  -webkit-border-radius: 0 0 4px 4px;
     -moz-border-radius: 0 0 4px 4px;
          border-radius: 0 0 4px 4px;
}

/* Fixed subnav on scroll, but only for 980px and up (sorry IE!) */
@media (min-width: 980px) {
  .subnav-fixed {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    z-index: 1020; /* 10 less than .navbar-fixed to prevent any overlap */
    border-color: #d5d5d5;
    border-width: 0 0 1px; /* drop the border on the fixed edges */
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
    -webkit-box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);
       -moz-box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);
            box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);
    filter: progid:DXImageTransform.Microsoft.gradient(enabled=false); /* IE6-9 */
  }
  .subnav-fixed .nav {
    width: 100%;
    margin: 0 auto;
    padding: 0 1px;
    background-color: #FFFFFF;
  }
  .subnav .nav > li:first-child > a,
  .subnav .nav > li:first-child > a:hover {
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
  }
}

@media (max-width: 768px) {

  /* Subnav */
  .subnav {
    position: static;
    top: auto;
    z-index: auto;
    width: auto;
    height: auto;
    background: #fff; /* whole background property since we use a background-image for gradient */
    -webkit-box-shadow: none;
       -moz-box-shadow: none;
            box-shadow: none;
  }
  .subnav .nav > li {
    float: none;
  }
  .subnav .nav > li > a {
    border: 0;
  }
  .subnav .nav > li + li > a {
    border-top: 1px solid #e5e5e5;
  }
  .subnav .nav > li:first-child > a,
  .subnav .nav > li:first-child > a:hover {
      -webkit-border-radius: 4px 4px 0 0;
         -moz-border-radius: 4px 4px 0 0;
              border-radius: 4px 4px 0 0;
  }

} 
```

如果此代码对您有效，请接受答案并对此回复给予积极的反馈。我希望有所帮助。

非常感谢你。

# c# - C# 表单应用程序：如何避免从 InitializeComponent() 中“手动”删除不需要的事件？

> ID：10318164
> 
> 赞同：2
> 
> 时间：2012-04-25T14:49:01.850
> 
> 标签：c#, winforms

这是一个简单的场景：

我通过双击其字段（在事件部分）将事件添加到表单上的控件。但是，然后我认为这是不必要的，并删除了自动生成的方法。我将运行该程序，它给出一个错误，告诉我该事件仍然存在，`InitializeComponent()`我必须从那里删除它。

那么，有没有办法避免“手动”删除事件？反正有没有完全删除它而不留下任何痕迹（特别是在`InitializeComponent()`）？

**更新：**另外，出现了另一个问题：

当我从代码中删除方法时，事件字段中的方法名称将消失。那么，如果`InitializeComponent()`链接到这些事件，为什么不使用空事件字段进行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:17:52.747

最好的方法是通过设计器中的属性网格。您可以单击重置按钮或仅删除文本，它将删除 InitializeComponent() 方法中的事件挂钩。如果你的方法在你的代码后面是空的，它也会在那里删除它：

![在此处输入图像描述](../Images/52137a105c1c4243947a6bd0163db8b7.png)

如果方法主体包含代码，以防万一它在设计器中意外地重置，或者如果您的方法是从代码的其他部分引用的，那么您必须手动删除它是有道理的。Visual Studio 会谨慎行事。

如果您先删除方法主体，那么它没有删除对它的引用的原因可能部分与剪切和粘贴代码有关。如果您想将该方法移动到代码中的不同位置，则剪切它的行为将切断对它的引用。粘贴后，您会想知道为什么不再调用您的事件。同样，错误是谨慎的一面，因为开发人员追踪无关代码并不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:53:24.163

您应该再次使用事件网格并右键单击您插入的事件。
选择重置菜单选项。这将删除 InitializeComponent 中分配的事件处理程序和代码设计器中**emtpy**事件的代码。

请注意，如果您在活动中添加代码，Visual Studio 不会删除新代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-10T21:42:23.927

这与 C# 2017 有关。所以希望它可以帮助其他人。

我是 C# 的新手（或者至少重新编写它）并且遇到了同样的问题。

我注释掉了我错误地进行的事件。然后在错误列表中，您会在那里发现一个错误，因为该事件丢失了。双击它。它将带您进入“连接”事件的设计器代码。在那里，找到不需要的事件并将其注释掉/删除。小心！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T14:52:35.307

在设计器中，您转到相关控件的事件选项卡，选择具有不需要的处理程序的事件；并删除处理程序的名称。然后再次保存表格。

我认为这不会删除方法本身（可能除非它是空的或刚刚添加）。

**更新**

我敢说它几乎总是*不*删除该方法的原因是因为它可以用作另一个控件事件的处理程序。毕竟，在 UI 中，您只要求删除*一个*事件的处理程序；并非每个处理程序都绑定到该方法。然后是后端代码是否脏（即未保存）的问题 - 在这种情况下检查方法是否为空是不可靠的。是的，所有这些都可以解决，但是必须手动删除该方法并不*完全是*一个困难:) 至少这样 VS 不会最终删除您真正想要保留的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T14:52:43.107

选择控件时查看属性窗口。单击小闪光灯，您将看到列出的事件以及您的事件（单击或其他），您的事件将在其后面具有分配的方法的名称。只需删除该方法。

这会删除该方法，前提是它为空且未使用，这是非常合理的。毕竟，您可能已经在该事件处理程序中投入了大量工作。（注意：刚刚再次尝试，显然它并不总是删除空方法，即使它在几分钟前删除了。很奇怪。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T14:56:04.207

返回表单并按 CTRL+Z。

# c# - 为什么在多次更新 Excel 单元格时会出现 OleDbException？

> ID：10318173
> 
> 赞同：3
> 
> 时间：2012-04-25T14:50:09.160
> 
> 标签：c#, excel, exception, oledb

我正在使用以下代码更新 Excel 文件中的单元格。

```
public bool WriteChange(string Filename, string SheetName, string Cell, string Value)
{
    if(!System.IO.File.Exists(Filename))
    {
        throw new System.IO.FileNotFoundException("File \"" + Filename + "\" could not be found");
    }
    bool result = false;
    string ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Filename + ";Mode=ReadWrite;Extended Properties=\"Excel 8.0;HDR=NO;\"";
    string SQL = "UPDATE [" + SheetName + Cell + ":" + Cell + "] SET F1='" + Value + "'";

    using(OleDbConnection Connection = new OleDbConnection(ConnectionString))
    {
        Connection.Open();
        using(OleDbCommand cmd = new OleDbCommand(SQL,Connection))
        {
            int value = cmd.ExecuteNonQuery();
            if(value > 0)
            {
                result = true;
            }
        }
    }
    return result;
} 
```

效果很好，除非我尝试多次更新同一个单元格。使用此功能更新单元格后，将无法**再次**使用此功能更新它。如果我再次尝试更新单元格；即使在重新启动应用程序后，我也会得到一个`OleDbException: System Resource Exceeded`.

我知道，如果您要创建一堆到电子表格的连接（例如在循环中），您通常会收到此异常，但每次应用程序运行时我只连接一次。典型的工作流程是。

*   开始申请。
*   打电话`WriteChange`。
*   退出应用程序。

为什么我会收到此错误，而当我尝试再次连接时连接应该早已失效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:22:29.910

使用以下连接字符串，因为 Microsoft.Jet.OLEDB.4.0 有此错误。

```
string ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + @Filename + ";Extended Properties=\"Excel 12.0;HDR=No;\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:30:26.240

我认为错误可能已经发生，因为您没有关闭 OleDbconnection 连接。完成更新查询后关闭 Dbconnection -- `int value = cmd.ExecuteNonQuery();

# templates - 页面模板和用户组 - Liferay

> ID：10318174
> 
> 赞同：1
> 
> 时间：2012-04-25T14:50:19.867
> 
> 标签：templates, liferay, liferay-6, usergroups

我有麻烦了。

按照**LF 6.0-Administrator-Guide**，我们可以在用户组和页面模板部分中阅读从多个用户组组成页面，第 86 页：

*如果不同用户组的两个或多个页面具有相同的名称，则在将它们复制到用户的个人页面集时，它们将合并为一个页面。*

例如，这意味着：

*如果管理员在学生组中创建具有相同名称的页面模板（例如，您是学生）并在其中放入一个 portlet，则该页面将与教师组中的您是学生页面合并，并生成页面将包含为两个用户组配置的 portlet。*

好的，我的问题是：我应该做些什么来让它工作吗？我按照管理指南的步骤，我只能看到我的用户有 2 个同名页面，而不是两个页面合并的页面。

有什么想法吗？你知道这是否是liferay 6.1的错误吗？或者如果是因为我使用 liferay 6.1 而不是 6.0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:25:04.593

据我所知，在 Liferay 6.1 中，您只能为站点创建页面，而不能像 Liferay 6.0 中那样为组织和用户组创建页面。

如需更多信息，您可以阅读 Liferay 6.1 管理员指南中关于[**管理用户、用户组、组织、站点、团队和角色**](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/managing-users-user-groups-organizations-sites-teams-and-roles)的部分，您可以阅读此处的**站点**和**用户组**部分，我想这会解释您的问题。

# python - python tkinter：文本小部件的未解决功能

> ID：10318175
> 
> 赞同：1
> 
> 时间：2012-04-25T14:50:24.257
> 
> 标签：python, text, widget, tkinter

任何人都可以解释为什么有一些函数没有解决，比如文本小部件的 insert() 和 pack() ，并且`text = Text(root)`行中有错误？我已经导入了 Tkinter 并将 PYTHONPATH 设置为 libs，但我仍然无法正常运行程序。先感谢您

```
from Tkinter import *
import tkFileDialog
from nltk import *
import sentiment_analysis

root = Tk()
root.title('Semantic Orientation of the Text')

frame = Frame(root)
frame.pack()

text = Text(root)// error
text.tag_config("big", font=('Verdana', 14, 'normal'))
text.tag_config("color", font=('Times New Roman', 24))
text.tag_config("groove", relief=GROOVE, borderwidth=4)
text.pack(expand=YES, fill=BOTH)  #pack() is unresolved

scroll = Tk.Scrollbar(text)
scroll.pack(side=RIGHT, fill=Y)

def onButtonText():

    filename = tkFileDialog.askopenfilename(initialdir='C:/nltk_data/sentiment_analysis')
    text.insert(END, open(filename).read()) #insert() in unresolved 
```

按钮的事件处理程序还有其他功能，但它们有相同的错误 - 文本小部件的 insert() 未解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:40:51.900

我的猜测是，既然你在做`import *`，你正在导入两个版本的 Text，所以你没有得到你认为的对象。

真的没有什么好的理由去做`import *`。如果您执行以下操作，您的代码将更容易维护：

```
import Tkinter as tk
...
root = tk.Tk()
text = tk.Text(root, ...) 
```

# c# - 如何从 asp.net sql 成员资格提供程序中的 id 获取角色？

> ID：10318176
> 
> 赞同：2
> 
> 时间：2012-04-25T14:50:30.673
> 
> 标签：c#, asp.net, sql-server

[MembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)有方法

```
public abstract MembershipUser GetUser(
    Object providerUserKey,
    bool userIsOnline
) 
```

通过用户的唯一标识符查找用户。如果您想拥有自己的数据库并将您的某些对象与某些成员相关联，这将非常有用。

你可以对[RoleProvider](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx)做同样的事情吗？似乎没有任何方法可以将角色映射到其唯一标识符，反之亦然。

附带说明一下，将您自己的表添加到 asp.net sql 数据库是一个好主意，或者最好为您自己的对象创建一个单独的数据库，并在 asp.net sql 成员表中添加外键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:11:27.107

API 中无法从 ID 返回角色 - 您可以通过以下方式获取所有角色

```
Roles.GetAllRoles(); 
```

或者您可以通过以下方式获取用户的所有角色

```
Roles.GetRolesForUser(userName); 
```

但不是一个角色。

我猜这是因为角色本身可能没有那么有用（至少就微软而言）。

当然，角色只是数据库中的一个表，因此您可以使用一些直接的 SQL 轻松地自己添加此功能 - 只需要多做一些工作。

就附加数据而言 - 我通常在同一个数据库中创建自己的表，如您上面建议的那样使用外键。尽管如果您还没有听说过 Profile Provider (http://msdn.microsoft.com/en-us/library/0580x1f5.aspx)，您可能也想了解一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:19:37.967

没有“asp.net sql 数据库”之类的东西。如果您没有指定一个，asp.net 会为您创建一个默认数据库。没有理由将此默认数据库与常规数据库分开使用。这就是为什么它有一个连接字符串。

会员资格的全部意义在于它很灵活，可以随心所欲地使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:14:40.853

在登录页面上，该`Page.User`变量仍设置为匿名。如果您想在登录前验证角色，您可以构建自己的`GenerpicPrincial`：

```
var principal = new GenericPrincipal(
    new GenericIdentity(username), 
    Roles.GetRolesForUser(username)); 
```

# java - jrebel 排除文件 (messages.properties)

> ID：10318180
> 
> 赞同：0
> 
> 时间：2012-04-25T14:51:04.560
> 
> 标签：java, jrebel

首先，对不起我的英语不好

我想在 jrebel 中设置排除文件，例如 jrebel ( Java jRebel ) 中的所有属性文件 ( *.properties )

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:15:01.163

您可以在 rebel.xml 配置中使用类似 ant 的包含/排除指令：

[有关详细信息，请参阅文档](http://manuals.zeroturnaround.com/jrebel-reference-manual/app.html#app-include)

# jquery - 为什么关闭并重新打开 jquery 对话框后 Tinymce 无法启动？

> ID：10318185
> 
> 赞同：0
> 
> 时间：2012-04-25T14:51:31.500
> 
> 标签：jquery, jquery-ui, tinymce, jquery-dialog

我有一个带有tinymce的jquery UI对话框，第一次打开对话框时tinymce工作正常，但是一旦我关闭对话框并重新打开它，我就会看到tinymce编辑器，但我不能在里面输入任何东西，就好像它一样被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:12:28.107

问题在这里看起来很清楚。关闭 jQuery 对话框时，您没有正确关闭 tinymce 实例。

要关闭编辑器实例，请使用：

```
tinymce.execCommand('mceRemoveControl',true,'editor_id'); 
```

**更新：**您应该使用 document.ready - 功能不会延迟编辑器初始化太多（如果文档在 1.4 秒后加载 - 您会破坏 1.6 秒并让用户等待）：

```
$(document).ready(function() {

  g = {};

  g.oEditor = new tinymce.Editor (
    "notesComments",
    {
        // General options
        mode : "none",
        theme : "advanced",
        height : 350,
        plugins : "style,layer,table,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull",
        theme_advanced_buttons2 : "formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons3 : "undo,redo,|,sub,sup,|,charmap,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen|,nonbreaking,pagebreak,hr",
        theme_advanced_buttons4 :   "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote",
        theme_advanced_buttons5 :   "link,unlink,image,cleanup,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons6 : "tablecontrols,|,removeformat,visualaid",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : false
    });

  g.oEditor.render();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:08:31.460

我通过延迟功能解决了这个问题：

```
setTimeout(function() {

g = {};

g.oEditor = new tinymce.Editor (
    "notesComments",
    {
        // General options
        mode : "none",
        theme : "advanced",
        height : 350,
        plugins : "style,layer,table,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull",
        theme_advanced_buttons2 : "formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons3 : "undo,redo,|,sub,sup,|,charmap,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen|,nonbreaking,pagebreak,hr",
        theme_advanced_buttons4 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote",
        theme_advanced_buttons5 : "link,unlink,image,cleanup,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons6 : "tablecontrols,|,removeformat,visualaid",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : false
    });

g.oEditor.render();

}, 3000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T03:07:26.370

这个就像一个魅力：

```
if(tinyMCE.execCommand('mceRemoveEditor', false, 'editorId')) {
  // re-init..
} 
```

我从[这个线程得到这个](http://archive.tinymce.com/forum/viewtopic.php?id=34937)

# arrays - Perl：基于特定列对具有多列的二维数组进行排序

> ID：10318186
> 
> 赞同：5
> 
> 时间：2012-04-25T14:51:36.580
> 
> 标签：arrays, perl, perl-data-structures

伪代码：

```
my @unsortedArray = { ["Harry", 10], ["Tim", 8], ["Joe", 3]};
my @sortedArray = ????? 
```

最终的 sortedArray 应该基于 col-2（整数）进行排序，注意与“人名”（col-1）的一对一关系。最终结果应如下所示：

```
sortedArray should be { ["Joe", 3], ["Tim", 8], ["Harry", 10] }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T15:20:17.080

您可以给 一个谓词`sort`，即：一个函数，该函数被评估以比较列表的元素。

```
my @unsorted = ( ["Harry", 10], ["Tim", 8], ["Joe", 3] );

my @sorted = sort { $a->[1] <=> $b->[1] } @unsorted; 
```

在谓词（大括号中的表达式）中，`$a`和`$b`是被比较的外部列表的元素。

`sort`只关心一维列表，所以不会弄乱外部列表元素的内部结构。这样名字和号码之间的关系就被毫不费力地保留了下来。

有关详细信息，请参阅`perldoc -f sort`和`perldoc perlop`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T16:09:25.757

一个更有效的解决方案，尤其是对于更大的数组，可能是使用`List::UtilsBy::nsort_by`：

```
use List::UtilsBy qw( nsort_by );

my @unsorted = ( ["Harry", 10], ["Tim", 8], ["Joe", 3] );

my @sorted = nsort_by { $_->[1] } @unsorted; 
```

虽然在小情况下不太可能注意到开销，但对于更复杂的函数，`O(n log n)`键提取成本会变得更高，并且最好只提取每个值的“排序键”一次，这就是这样`nsort_by`做的。

# java - JPA，多对多关系，删除所有以前的关系并进入新的关系

> ID：10318188
> 
> 赞同：7
> 
> 时间：2012-04-25T14:51:41.193
> 
> 标签：java, jakarta-ee, jpa, ejb-3.0, jpa-2.0

在这里，我正在尝试 JPA 中的多对多关系，我创建了表“tblcourse”和“tblStudent”，学生可以注册许多课程，

```
create table tblcourse(
    id integer primary key,
    name varchar(100),
    duration integer
);

create table tblcourseStudent(
    studentid integer references tblstudent(studentId),
    courseId integer references tblcourse(id),
    constraint pk_composit_cs primary key(studentid,courseId)
)

Create table tblStudent(
    studentId integer primary key,
    ……..
    ….
); 
```

上述关系的JPA表示如下，这是StudentEntity.java的代码，

```
@Entity
@Table(name="TBLSTUDENT")
public class StudentEntity implements Serializable{

private static final long serialVersionUID = 100034222342L;

@Id
@Column(name="STUDENTID")
private Integer studentId;

@Column(name="STUDENTNAME")
private String studentName;

@Column(name="CONTACTNO")
private String contactNumber;

@Embedded
private StudentAddress address;

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="DEPTID")
private DeptEntity deptEntity;

@ManyToMany(fetch=FetchType.LAZY)
@JoinTable(name="tblcourseStudent",
            joinColumns=@JoinColumn(name="studentid"),
            inverseJoinColumns=@JoinColumn(name="courseId"))
    private List<CourseEntity> courseList;  
....
.....
.....
} 
```

这是 CourseEntity.java 的代码，

```
@Entity
@Table(name="TBLCOURSE")
public class CourseEntity implements Serializable{

        public CourseEntity(){

        }

    public CourseEntity(Integer courseId,String courseName,Integer courseDuration){
        this.courseId = courseId;
        this.courseName = courseName;
        this.courseDuration = courseDuration;
    }

    /**
     * 
     */
    private static final long serialVersionUID = -2192479237310864341L;

    @Id
    @Column(name="ID")
    private Integer courseId;

    @Column(name="NAME")
    private String courseName;

    @Column(name="DURATION")
    private Integer courseDuration;

    @ManyToMany(fetch=FetchType.LAZY)
    @JoinTable(name="tblcourseStudent",
                joinColumns=@JoinColumn(name="courseId"),
                inverseJoinColumns=@JoinColumn(name="studentid"))
    private List<StudentEntity> studentList;
    .........
} 
```

现在，当我尝试通过 StudentEntity.java 插入课程时，后端触发的 SQL 查询是

```
delete 
    from
        tblcourseStudent 
    where
        studentid=?

insert 
    into
        tblcourseStudent
        (studentid, courseId) 
    values
        (?, ?)

insert 
    into
        tblcourseStudent
        (studentid, courseId) 
    values
        (?, ?) 
```

而且，当我尝试通过 CourseEntity.java 插入学生时，触发的 SQL 查询如下，

```
delete 
    from
        tblcourseStudent 
    where
        courseId=?

insert 
    into
        tblcourseStudent
        (courseId, studentid) 
    values
        (?, ?) 
```

在我的两种情况下，记录都被删除，然后新的映射被插入。因此，如果我为学生插入课程，首先将从第三个表中删除该学生的所有先前课程，然后输入新课程，

所以，我的问题是，如果我不想删除旧课程并为学生添加新课程，我该如何实现，即我想保留旧的关系，

天气我必须以编程方式实现这一点，或者我已经更改了注释，等待回复

当我们将单个学生映射到多个课程时，会调用 StudentServiceBean.java 中编写的代码和方法“mapStudentToCourses”

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
public class StudentServiceBean implements StudentService{

@PersistenceContext(unitName="forPractise")
private EntityManager entityMgr;

@Resource
private SessionContext sessionContext;

@EJB
private DeptService deptService;
..........
......
...

@Override
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void mapStudentToCourses(Integer studentId,String courseIdList) throws Exception{
    List<CourseEntity> courseList = null;
    StudentEntity studentEntity  = null;
    TypedQuery<CourseEntity> courseQuery = null;        
    String query = "select c from CourseEntity c where c.courseId in ("+courseIdList+")";
    try{
        courseQuery = entityMgr.createQuery(query,CourseEntity.class);
        courseList =  courseQuery.getResultList();
        studentEntity = entityMgr.find(StudentEntity.class, studentId);
        studentEntity.setCourseList(courseList);
        entityMgr.merge(studentEntity);        
    }catch(Exception e){
        sessionContext.setRollbackOnly();
        throw e;
    }
} 
```

这是一个课程映射到多个学生时的代码，它的 CourseServiceBean.java

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
public class CourseServiceBean implements CourseService{

@PersistenceContext(name="forPractise")
private EntityManager em;

@Resource
private SessionContext sessionCtx;

private Map<Integer, String> durationCode = null;

@EJB
private StudentService studentService;
........
......
...

@Override
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void mapCourseToStudents(Integer courseId,String studentIdList) throws Exception{
    List<StudentEntity> studentEntityList = null;
    TypedQuery<StudentEntity> studentQuery = null;
    String query = "select s from StudentEntity s where s.studentId IN ("+studentIdList+")";
    CourseEntity courseEntity = null;
    try{
        studentQuery = em.createQuery(query, StudentEntity.class);
        studentEntityList = studentQuery.getResultList();
        courseEntity = em.find(CourseEntity.class,courseId);
        courseEntity.setStudentList(studentEntityList);
        em.merge(courseEntity);
    }catch(Exception e){
        sessionCtx.setRollbackOnly();
        throw e;
    }
}
} 
```

这是我的 persistence.xml 文件，

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
    <persistence-unit name="forPractise" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>jdbc/app</jta-data-source>
        <class>com.entity.StudentEntity</class>
        <class>com.entity.DeptEntity</class>
        <class>com.entity.CourseEntity</class>      
        <properties>
            <property name="hibernate.dialect"  value="org.hibernate.dialect.DerbyDialect"  />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />                           
        </properties>
    </persistence-unit>
</persistence> 
```

等待回复....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:48:20.667

我可能错了，但我认为这是正常的，当您进行插入时，Hibernate 首先会从关联表中删除所有记录。

这就是原因：当使用 x 对多关联（基本上，通过集合映射的关联）时，Hibernate 的持久性上下文将根据集合的标识符执行脏检查。

让我们从 CourseServiceBean 类中获取 mapCourseToStudents() 方法：

```
 ...
    studentQuery = em.createQuery(query, StudentEntity.class);
    studentEntityList = studentQuery.getResultList();
    courseEntity = em.find(CourseEntity.class,courseId);
    courseEntity.setStudentList(studentEntityList); // replacing the previous Collection by the one you retrieved by querying the DB !!! 
    em.merge(courseEntity);
    ... 
```

如果你真的想避免 Hibernate 首先执行 delete 语句，你应该向 Collection 添加/删除项目，而不是分配一个新的 Collection 并在映射数据中配置你想要级联的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:01:57.430

将新课程添加到现有列表中：

```
Collection<Student> moreStudents = ...

course = em.find(CourseEntity.class,courseId);
course.getStudentList().addAll(moreStudents); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T10:58:48.110

我没有覆盖整个关系列表，而是将新实体添加到原始列表中。但是，Hibernate 仍然删除了我以前的所有关系。

根据这篇文章： [https ://vladmihalcea.com/the-best-way-to-use-the-manytomany-annotation-with-jpa-and-hibernate/](https://vladmihalcea.com/the-best-way-to-use-the-manytomany-annotation-with-jpa-and-hibernate/)

这似乎是 Hibernate 当前的行为，如果我们不想这样，我们必须首先正确实现我们的实体`hashCode()`和`equals()`方法，并使用 Set 来建模 ManyToMany 关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-09T15:53:41.867

我面临着类似的挑战。我提供了类似的场景，希望它可能对某些人有所帮助。

我正在使用产品和订单来解释问题并使用单向多对多映射

```
@Entity
@Table(name="Product")
public class Product {

    @Id
    @Column(name = "id")
    private Long id;

    @Column(name = "product")
    private String product;

    @ManyToMany(cascade = CascadeType.PERSIST,fetch= FetchType.EAGER)
    @JoinTable(name = "product_order_mapping", joinColumns = { @JoinColumn(name = "product_id") }, inverseJoinColumns = {
            @JoinColumn(name = "order_id") })
    @JsonProperty("orders")
    private Set<Order> orders =new HashSet<Order>();

    //setters and getters

}

@Table(name="Order")
public class Order {

    @Id
    @Column(name = "id")
    private Long id;

    @Column(name = "order")
    private String order;

    //setters and getters
    //equals and hashcode

} 
```

# 实现逻辑

productList 和 OrderFunctions 是一些包含产品列表和订单详细信息的列表

```
for (Product pEntity : productList) {

OrderFunctions = this.getAllLineFunctions(product.getId(), cmEntity.getId())
                        .getBody();
Set<Order> oList = new HashSet<>();

for (OrderFunction orderFn : OrderFunctions) {
Order orderEntity = new Order();
orderEntity.setId(lfs.getOrderFunction_id());
orderEntity.setStageGroup(lfs.getOrderFunctionOrder());
oList.add(sgEntity);
}

orderRepository.saveAll(oList);
pEntity.setOrders(oList);
productRepository.save(pEntity);
}
} 
```

# 为了理解重复映射让我们举个例子

假设产品在公司下，现在公司有多个产品，产品有多个订单

现在让我们举一个在表中存储数据的实际示例

set1--> ID 为 c1 的公司有 ID 为 p1,p2,p3 的产品 p1 有订单 o1,o2,o3 产品 p2 有订单 o1,o2 产品 p3 有订单 o2,o3,o4

set2--> ID 为 c2 的公司有 ID 为 p1 的产品，p3 产品 p1 有订单 o1，o2 产品 p3 有订单 o2

现在当保存 set1 表 product_order_mapping 看起来像

```
product_id  order_id
---------------------
   p1         o1
   p1         o2
   p1         o3
   p2         o1
   p2         o2
   p3         o2
   p3         o3
   p3         o4 
```

但是当在 set1 表 product_order_mapping 之后保存 set2 时会看起来像

```
product_id  order_id
---------------------
   p1         o1
   p1         o2
   p2         o1
   p2         o2
   p3         o2 
```

我们可以看到保存 set2 之前和保存 set2 之后的区别 p1->o3 、 p3->o3 和 p3->o4 丢失了

# 丢失映射的原因

当我们尝试存储 set2 时，我们尝试覆盖重复条目，例如 p1->o1,p1->o2，它们在映射表中已经可用所以在添加这些重复条目之前，所有与 p1 相关的映射都被删除，然后 p1 ->o1,p1->o2 已添加

所以我们丢失了一些以前的条目

# 解决方案

避免从 set2 添加重复条目，例如 p1->o1,p1->o2，因为它们已经存在于映射表中

```
for (Company cEntity : companyList) {
for (Product pEntity : productList) {

OrderFunctions = this.getAllOrderFunctions(cEntity.getId(), pEntity.getId());

Set<Order> oList = new HashSet<>();

for (OrderFunction orderFn : OrderFunctions) {
Order orderEntity = new Order();
orderEntity.setId(lfs.getOrderFunction_id());
orderEntity.setStageGroup(lfs.getOrderFunctionOrder());
oList.add(sgEntity);
}

Set<Order> collectSG = pEntity.getOrders().stream().filter(o->oList.contains(o)).collect(Collectors.toSet());
oList.removeAll(collectSG);
if(oList.size()>0) {
orderRepository.saveAll(oList);

pEntity.setOrders(oList);
productRepository.save(pEntity);
}
}
}
} 
```

# regex - 带有换行符的 sed 和 "

> ID：10318189
> 
> 赞同：0
> 
> 时间：2012-04-25T14:51:42.163
> 
> 标签：regex, sed, newline

我有一堆看起来像这样的文本文件：

```
His doctor attributed this to an allergy .

That hardly convinced him , as he had no history of allergies of any kind .
" Yet , that was to be the least of his problems .
I may have to take steroids for the rest of my life .
"
A topical steroid spray was later added to his repertoire of drugs and 
" he knew it was merely masking the underlying condition .
" 
```

我想改变它，使`. "`它们在一行中。所需的输出应如下所示：

```
His doctor attributed this to an allergy .

That hardly convinced him , as he had no history of allergies of any kind .
" Yet , that was to be the least of his problems .
I may have to take steroids for the rest of my life . "
A topical steroid spray was later added to his repertoire of drugs and 
" he knew it was merely masking the underlying condition . " 
```

我已经尝试过了，但它不起作用：

```
sed -i 's/.\n"\n/. "\n/g' 
```

有人可以帮助我使用正确的 sed 命令来`"`向上移动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:54:52.510

略有不同的`sed`变体：

```
sed -n '1{h};1!{/"$/!H};/"$/{H;g;s/\.[ \n]*"$/\. "/;p;n;x}' input.txt 
```

*   `1 { h }`— 将第一行放入保持缓冲区
*   `1! { /"$/ !H }`— 对于其余的行，如果不孤独，则累积到保持缓冲区中`"`
*   `/"$/ { H; g; s/\.[ \n]*"$/\. "/; p; n; x }`- 否则：

    1.  `H`— 添加到保持缓冲区
    2.  `g`— 将保持缓冲区移动到模式空间
    3.  `s/\.[ \n]*"$/\. "/`— 进行替换
    4.  `p`- 打印出来
    5.  `n`— 阅读下一行
    6.  `x`— 并将其保存在保持缓冲区中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:14:14.317

```
perl -00 -lpe 's/\n"$/"/mg' 
```

produces the desired output.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:53:43.030

这就是我想出的：

```
sed -n '1{h;d};/^"$/{g;s/$/ "/p;n;h;d};x;p;${g;p}' input.txt 
```

* * *

### 输出

```
His doctor attributed this to an allergy .

That hardly convinced him , as he had no history of allergies of any kind .
" Yet , that was to be the least of his problems .
I may have to take steroids for the rest of my life . "
A topical steroid spray was later added to his repertoire of drugs and
" he knew it was merely masking the underlying condition . " 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:07:18.157

这可能对您有用：

```
sed ':a;$!N;s/\.\n"/."/;P;D' /tmp/a
His doctor attributed this to an allergy .

That hardly convinced him , as he had no history of allergies of any kind ." Yet , that  was to be the least of his problems .
I may have to take steroids for the rest of my life ."
A topical steroid spray was later added to his repertoire of drugs and 
" he knew it was merely masking the underlying condition ." 
```

# c++ - 读取套接字：EAGAIN：资源暂时不可用

> ID：10318191
> 
> 赞同：6
> 
> 时间：2012-04-25T14:51:49.747
> 
> 标签：c++, sockets

我在 C++ 中创建了一个套接字，我需要它有一定的连接超时。这就是正在发生的事情：

*   创建套接字
*   使其成为 NON_BLOCKING
*   呼叫连接
*   它按预期返回 -1 和 errno EINPROGRESS
*   呼叫选择
*   返回 >0，因此已建立连接
*   再次使套接字阻塞

这部分的代码如下：

```
bool mastControl::prepareSocket(char * address, int port, int * sockfd) {

    struct sockaddr_in serv_addr;
    struct timeval timeout = {0,100000};
    struct timeval connTimeout;
    struct hostent * server = NULL;
    fd_set socketSet;
    socklen_t lon;
    int sockOpt = 0;
    long socketFlags = 0;
    int buffersize = 8;
    int res = 0;
    int connectReturn = 0;
    const int WAIT_TO_RECONN = 15;

    server = gethostbyname(address);
    *sockfd = socket(AF_INET, SOCK_STREAM, 0);

    if (*sockfd < 0) {
        qDebug()<<"Impossible to open socket: "<<strerror(errno);
        return false;
    }

    if (server == NULL) {
        qDebug()<<"No such host: "<<strerror(h_errno);
        return false;
    }

    // Initializating server direction struct:
    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy((char *)server->h_addr,
          (char *)&serv_addr.sin_addr.s_addr,
          server->h_length);
    serv_addr.sin_port = htons(port);

    // Making socked non-blocking in order to set a timeout value for connection:
    if((socketFlags = fcntl(*sockfd, F_GETFL, NULL)) < 0){
        qDebug()<<"Impossible to retrieve sockets descriptor flags "<<strerror(errno);
        return false;
    }
    socketFlags |= O_NONBLOCK;
    if(fcntl(*sockfd, F_SETFL, socketFlags) <0){
        qDebug()<<"Impossible to update sockets descriptor flags: "<<strerror(errno);
        return false;
    }

    connectReturn = connect(*sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr));
    if(connectReturn < 0){
        if(errno == EINPROGRESS){
            do{
                // Establishing a 15 seconds timeout:
                connTimeout.tv_sec = 15;
                connTimeout.tv_usec = 0;
                FD_ZERO(&socketSet);    // Initialising set of sockets as an empty set
                FD_SET(*sockfd, &socketSet);    // Adding socket to set
                connectReturn = select(*sockfd+1, NULL, &socketSet, NULL, &connTimeout);
                if(connectReturn<0 && errno!=EINTR){ // Error in select
                    qDebug()<<"Connection error in select function: "<<strerror(errno);
                    return false;
                }
                else if(connectReturn>0){ // Socket selected for writing
                    lon = sizeof(int);
                    if(getsockopt(*sockfd, SOL_SOCKET, SO_ERROR, (void*)(&sockOpt), &lon) <0){
                        qDebug()<<"Unnable to get socket options: "<<strerror(errno);
                        return false;
                    }
                    // Checking the value returned:
                    if(sockOpt){
                        qDebug()<<"Error in delayed connection: "<<strerror(errno);
                        return false;
                    }
                    break;
                }
                else{ // Timeout
                    qDebug()<<"Connection timeout exceeded: "<<strerror(errno);
                    return false;
                }
            } while (1);
        }
        else{
            qDebug()<<"Connection error: "<<strerror(errno);
            sleep(WAIT_TO_RECONN); // Wait 15 seconds
            return false;
        }
    }

    //Connected

    // Must set the socket as blocking again:
    if((socketFlags = fcntl(*sockfd, F_GETFL, NULL)) < 0){
        qDebug()<<"Impossible to retrieve sockets descriptor flags "<<strerror(errno);
        return false;
    }
    socketFlags &= (~O_NONBLOCK);
    if(fcntl(*sockfd, F_SETFL, socketFlags) <0){
        qDebug()<<"Impossible to update sockets descriptor flags "<<strerror(errno);
        return false;
    }

    if (setsockopt (*sockfd, SOL_SOCKET, SO_RCVTIMEO, (char *)&timeout,
                    sizeof(timeout)) < 0) {
        qDebug()<< "ERR  - setsockopt failed";
        return false;
    }

    if (setsockopt (*sockfd, SOL_SOCKET, SO_SNDTIMEO, (char *)&timeout,
                    sizeof(timeout)) < 0) {
        qDebug()<< "ERR  - setsockopt failed";
        return false;
    }
    if ((res = setsockopt (*sockfd, SOL_SOCKET, SO_SNDBUF, &buffersize,
                           sizeof(buffersize))) == -1) {
        qDebug()<< "ERR  - setsockopt failed (SO_SNDBUF) = " << res;
        return false;
    }
    //Socket Ready

    return true;
} 
```

这行得通。但是然后我有一个循环，我正在调用一个函数来检查是否收到了要读取的新数据包：

```
bool mastControl::findPacket(int sockfd, st_messageMastToPc * messageReceived, bool * connected) {

    int n = 0;
    bool messageFound = false;
    char * buffer = (char *) messageReceived;
    unsigned int pos = 0;

    while ( ((n = read(sockfd, &(buffer[pos]), 1)) > 0) and not messageFound) {

        //qDebug()  << "read output " << n;
        if (n == 1) {
            pos++;

            if ( (pos == 1) && (buffer[0] == 2)) {
                // Some stuff...
            } else if ( (pos == 2) && (buffer[1] == 2) ) {
                // Some stuff...
            } else if (pos >= uiMessageMastToPcSize) {
                messageFound = true;
                //Complete message received
            } else if (pos < 2) {
                // Reseting pos
                pos = 0;
            }
        }
    }

    if (n < 0){
        qDebug()<< "Disconnected. Reason #" << errno << ": " << strerror(errno);
        *connected = false;
    }

    return messageFound;
} 
```

读取函数将 EAGAIN 设为 errno，表示“资源暂时不可用”。然后我假设我已断开连接，并且由于布尔连接现在为假，在循环中我将尝试重新连接再次创建套接字，依此类推。

所以，首先我不知道为什么我会收到这个错误。

其次，我不知道我是否完全断开连接，或者在此错误之后创建新套接字时断开连接的是我。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-25T14:56:33.843

`EAGAIN`并不意味着您已断开连接，而只是表示“现在没有什么可阅读的；稍后再试”。

您可以`O_NONBLOCK`使用[fcntl(2)](http://linux.die.net/man/2/fcntl)[取消](http://linux.die.net/man/2/select)设置（`read`等待直到有可用的东西），或者在调用.`read`

编辑：现在您已经添加了更多代码，我可以看到您正在设置`SO_RCVTIMEO`套接字。这可能会导致阻塞`read`返回`EAGAIN`（因此，如果您不希望发生这种情况，只需不要`SO_RCVTIMEO`理会）。

# javascript - Chrome 的开发工具或 Firebug 中是否存在“设置下一条语句”功能？

> ID：10318197
> 
> 赞同：48
> 
> 时间：2012-04-25T14:52:21.137
> 
> 标签：javascript, debugging, firebug, google-chrome-devtools

IE 的开发工具，更具体地说是它的 JavaScript 调试器，提供了一个“设置下一条语句”命令，使您能够指定接下来应该执行哪条语句。这样，您可以有效地跳过函数的某些部分，甚至（再次有效地）提前从函数返回。

所以，对于这个功能...

```
function test () {
    alert(1);
    alert(2);
    alert(3);
} 
```

如果我们在第一个警报上设置断点，然后调用该函数，我们可以执行第一个警报（F10），然后右键单击第三个警报并选择“设置下一条语句”。现在，如果我们按 F10，将执行第三个警报，因此，实际上，第二个警报被跳过了。

（[这里](http://jsfiddle.net/ZgS2E/show/)在IE中测试：---用F12打开IE的工具，切换到“脚本”选项卡，设置断点，按“开始调试”按钮，必要时刷新页面）

我喜欢这个“设置下一条语句”功能。但是，我在 Chrome 的开发工具或 Firebug 中没有注意到它。这些调试器中是否存在此功能？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-30T18:12:12.883

虽然 Chrome DevTools 没有“设置下一条语句”，但您可以通过在断点处暂停时编辑 JavaScript 来更明确地定义下一条语句。

我为您制作了一个简短的[截屏视频](http://youtu.be/ItMcQyXrWF8)，以展示 Chrome DevTools Live Edit + Breakpoint Debugging。

本质上：在断点处，通过单击“脚本”面板并进行更改来实时编辑您的脚本。点击`cmd`+`s`保存。然后遍历该代码及其新更改。比绕过代码更强大，您还可以添加新功能。

# image - 如何更改球拍中的图像大小

> ID：10318208
> 
> 赞同：4
> 
> 时间：2012-04-25T14:52:52.180
> 
> 标签：image, url, scheme, racket, htdp

我正在使用`racket`并需要背景 `bitmap`图片制作游戏。但是我选择的图像太大了。如何更改尺寸？是）我有的：

```
(bitmap/url "http://www.example.com/") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:03:42.783

导入这个包：

```
(require htdp/image) 
```

并使用该包中定义的[收缩](http://docs.racket-lang.org/teachpack/image.html#%28def._%28%28lib._htdp/image..rkt%29._shrink%29%29)程序。

**编辑 ：**

正如评论中所指出的，[2htdp/image](http://docs.racket-lang.org/teachpack/2htdpimage.html)将是一个更好的选择：

```
(require 2htdp/image) 
```

看一下[缩放](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp/image..rkt%29._scale%29%29)过程。

# jquery - Json 完整运行功能

> ID：10318211
> 
> 赞同：1
> 
> 时间：2012-04-25T14:53:08.113
> 
> 标签：jquery, json, jquery-mobile, cordova

我试图弄清楚如何在这个 json 完全完成并加载后立即运行一个函数。我遇到的问题是我的链接在我的锚点之前加载。因此，看起来一切都已加载，但是当您单击链接时，直到单击后 3-6 秒才加载任何内容，因为它仍在加载链接的锚点。我希望有一种方法可以明确地判断此功能何时运行以及内容何时完全加载。有谁知道我该怎么做？

我查看了 Jquery 的网站，发现了一些可能有效但不确定如何插入的东西：

```
.complete(function() { alert("complete"); }); 
```

这是正确的路径吗？如果是这样，我如何让它与下面的代码一起使用：

```
<script>
        // ---------- AJAX JSON CALL ----------------
        $('.loading-wrapper').append('<div class="loading">Your page is loading…&lt;/div>');

        $.ajax({        
            url: "http://www.lcbcchurch.com/mobileJSON/gatherings",
            dataType: "json",
            success:function(data){
                eventResults(data);
            }

        });

        function eventResults(data) {
            for(var i = 0; i<data.length;i++){
            $("ul#"+data[i]["categories"][0]["category_id"]+"").append("<li><a id='video-"+data[i]["url_title"]+"' class='video-link' href='JavaScript:void(0);' >"+data[i]["title"]+"</a><div id='video-"+data[i]["url_title"]+"' class='video-thumb'>"+data[i]["embed-video"]+"</div></li>"); 
                if($("div.gathering").find("#"+data[i]["categories"][0]["category_id"]+"").length == 0){
                        $("body").prepend("<div id='"+data[i]["categories"][0]["category_id"]+"div' class='event-detail' data-role='page'><div id='back"+data[i]["url_title"]+"' class='back-header' data-role='header'><a href='series.html' data-icon='delete' iconpos='notext' id='close'>Cancel</a><h1></h1></div><img src='"+data[i]["categories"][0]["series-small-image"]+"'/><div class='campus-page'>"+data[i]["categories"][0]["category_description"]+"<ul id='"+data[i]["categories"][0]["category_id"]+"'></ul></div></div>");
                        $(".gathering").append("<a href='#"+data[i]["categories"][0]["category_id"]+"div' class='cat-link' id='"+data[i]["categories"][0]["category_id"]+"' rel='external' onClick='picsHide();'><img src='"+data[i]["categories"][0]["series-small-image"]+"' width='156' height='74'/></a>");
                }
        }
        $('.loading-wrapper').empty();
        $('.inline-scripts').append("<script src='scripts/inline.js'><\/script>");

        if($("div.gathering").find("#"+data[i]["categories"][0]["category_id"]+"").length == 0){

        // Call the pics ready function     
        }
    </script> 
```

*   IOS Phonegap 应用程序
*   jQuery 1.7.1
*   jQuery-Mobile 1.1

# asp.net - VB ASP.Net 导出到 Excel：名称工作表选项卡

> ID：10318212
> 
> 赞同：0
> 
> 时间：2012-04-25T14:53:13.223
> 
> 标签：asp.net, vb.net, export-to-excel

下面是我用来将我的 gridview 数据导出到 Excel 的方法。用户询问我是否可以命名工作表选项卡。有任何想法吗？提前致谢！

```
Private Sub btnExportToExcel_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnExportToExcel.Click        
    Dim form As New HtmlForm
    Dim strAttachment As String
    Dim stw As StringWriter
    Dim htextw As HtmlTextWriter

        stw = New StringWriter
        strAttachment = "attachment; filename=" & strAppName & ".xls"
        HttpContext.Current.Response.ClearContent()
        HttpContext.Current.Response.AddHeader("content-disposition", strAttachment)
        HttpContext.Current.Response.ContentType = "application/vnd.ms-excel"
        htextw = New HtmlTextWriter(stw)
        form.Controls.Add(CType(Session("gridViewControl"), Control))
        Me.Controls.Add(form)
        form.RenderControl(htextw)
        Response.Write("<b>" & txtTitle.Text & "</b><br />")
        Response.Write(stw.ToString())            
        Response.Flush()
        Response.Close()
        HttpContext.Current.ApplicationInstance.CompleteRequest()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:14:17.273

Its not possible because your output is really HTML with an HTML Table - which Excel will happily "parse"/translate into rows and columns (because that's what a table is). You're not really creating a "native" Excel file.

You can have more options (assuming all your clients do have Excel) by using **Excel XML** using native .Net (*LINQ to XML*, don't be scared by that term). I believe Excel XML support goes back to Office 2003 (maybe even Office XP/2002, but I could be wrong).

You can do so in C# or VB.net, but in VB.net it's almost trivial because of VB.Net's **XML literals**. See [**this MSDN video by Beth Massi**](http://msdn.microsoft.com/en-us/vstudio/Video/bb927708) for inspiration (magic starts around 5:00, but the entire video is worth every minute).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:55:07.203

你不能通过 html 来做，但你可以通过 xml (SpreadsheetML) 来做。看看我在此处的答案中发布的示例：
[在 ASP.NET 中生成 Excel 文件](https://stackoverflow.com/questions/150339/generating-an-excel-file-in-asp-net/150368#150368)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:55:56.267

不，没有办法使用这种方法来做到这一点。您必须使用像[Gembox](http://www.gemboxsoftware.com/)这样的专门库来执行此操作。

# android - 使用 Ant 构建时未找到 Adview

> ID：10318217
> 
> 赞同：0
> 
> 时间：2012-04-25T14:53:35.947
> 
> 标签：android, ant, admob, apk, proguard

我正在使用一个`Ant`脚本来生成我的 APK `Proguard`。如果我使用 Eclipse 导出功能手动构建我的 APK，一切正常，但如果我使用我的 Ant 脚本，我会收到一个“找不到调用 'com.google.ads.Adview'”异常抛出到日志中强制关闭。

这是我的 proguard.cfg 文件，我告诉它保留 com.google.ads：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
-libraryjars C:\Workspace\JARs\CWAC-WakefulIntentService-0.4.5.jar;C:\Workspace\JARs\GoogleAdMobAdsSdk-6.0.0.jar;C:\Workspace\JARs\android-support-v4.jar

-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*

-dontwarn **CompatHoneycomb
-dontwarn **CompatHoneycombMR2
-dontwarn **CompatCreatorHoneycombMR2

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.Fragment

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }
-keep public class com.google.ads.** { *; }

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

# This will avoid all the onClick listeners referenced from XML Layouts from being removed
-keepclassmembers class * extends android.app.Activity { 
       public void *(android.view.View); 
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-dontwarn android.support.** 
```

这是我的 build.xml 文件，我在其中构建 APK，然后将其复制到目录中。

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="master" default="build">

   <target name="build">
        <ant dir="../Project" antfile="build.xml" inheritAll="false" inheritRefs="false" target="release" />

        <copy todir="../APKs">
            <fileset dir="../Project/bin" includes="*release.apk" />
        </copy> 
    </target>
</project> 
```

更新：

在对此进行了更多修改之后，我认为这个问题与 Proguard 无关，而是与`Ant`脚本和外部 jar 相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:23:59.290

确保您的项目的 libs 目录中有您的 jar。使用 Eclipse，您可以将它们放在其他文件夹中，然后设置您的构建环境。但是 ant 期望它们在您的 libs 文件夹中。

# iphone - 如何从 GKTurnBasedMatch 中检索 playerGroup 属性？

> ID：10318219
> 
> 赞同：2
> 
> 时间：2012-04-25T14:53:44.247
> 
> 标签：iphone, ios, xcode, mobile, gamekit

我的游戏中有三个不同的级别可供用户选择。我已将玩家选择的关卡保存在 GKMatchRequest 的 playerGroup 属性中。进行比赛后，如何从 GKTurnBasedMatch 中检索 playerGroup，或者是否有不同的方法来跟踪比赛是哪个游戏级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:21:52.340

创建 GKMatchRequest 后，您必须调用 findMatchForRequest。在 findMatchForRequest 的完成处理程序中，您可以将游戏的关卡存储在新匹配的 matchData 属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T13:08:29.933

我使用 GKTurnBasedMatchmakerViewController 来呈现自动匹配/邀请 UI。创建 GKMatchRequest 时，我向 GKTBMVC 添加了一个与 ObjC 相关的 playerGroup 值（打包到一个 NSNumber 中），如下所示：

```
GKMatchRequest *request = [[GKMatchRequest alloc] init];
request.playerGroup = somePlayerGroup;
GKTurnBasedMatchmakerViewController *mmvc = [[GKTurnBasedMatchmakerViewController alloc] initWithMatchRequest:request];
objc_setAssociatedObject(mmvc,
                         &kPlayerGroupKey,
                         [NSNumber numberWithInteger:request.playerGroup],
                         OBJC_ASSOCIATION_RETAIN);

[myViewController presentViewController:mmvc
                               animated:YES
                             completion:nil]; 
```

然后在`turnBasedMatchmakerViewController:didFindMatch:`委托方法中，我读取`playerGroup`值以了解我们需要设置或加入哪种匹配：

```
- (void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)mmvc didFindMatch:(GKTurnBasedMatch *)match
{
     [myViewController dismissViewControllerAnimated:YES
                                          completion:^{
                                              NSNumber *n = objc_getAssociatedObject(mmvc, &kPlayerGroupKey);
                                              NSInteger playerGroup = [n integerValue];
                                              [self switchToMatch:match matchKind:playerGroup];
                                          }];
} 
```

当然，您可以`playerGroup`在`match.matchData`创建新匹配时存储，但有时使用匹配视图控制器传递它更方便。

# php - httpd 服务器未加载发送网页

> ID：10318220
> 
> 赞同：0
> 
> 时间：2012-04-25T14:53:44.350
> 
> 标签：php, apache

我正在运行一个 Linux 服务器亚马逊 EC2 实例。

httpd 服务器很好，我刚刚检查过，不再工作。我不确定发生了什么。它没有给出任何输出。

在问题结束时记​​录...

*   该日志似乎没有任何与请求加载内容错误相关的信息。我正在使用位于此处的日志文件：/etc/httpd/logs/error_log 还有另一个吗？

我有一些虚拟服务器可以重定向正在工作的子域，我暂时删除了它们以防它们与问题有关。

我已经重新启动了几次 httpd 服务器，但仍然没有。

我的 www 目录也有一个 index.php，我在里面放了一个 index.html 以求好运。

任何帮助将不胜感激。

```
[Wed Apr 25 10:50:18 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Wed Apr 25 10:50:18 2012] [info] Init: Seeding PRNG with 256 bytes of entropy
[Wed Apr 25 10:50:18 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Wed Apr 25 10:50:19 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Wed Apr 25 10:50:19 2012] [info] Init: Initializing (virtual) servers for SSL
[Wed Apr 25 10:50:19 2012] [info] mod_ssl/2.2.9 compiled against Server: Apache/2.2.9, Library: OpenSSL/0.9.8b
[Wed Apr 25 10:50:19 2012] [notice] Digest: generating secret for digest authentication ...
[Wed Apr 25 10:50:19 2012] [notice] Digest: done
[Wed Apr 25 10:50:19 2012] [debug] util_ldap.c(1977): LDAP merging Shared Cache conf: shm=0x8009e420 rmm=0x8009e450 for VHOST: domU-12-31-39-0A-1D-16.compute-1.internal
[Wed Apr 25 10:50:19 2012] [info] APR LDAP: Built with OpenLDAP LDAP SDK
[Wed Apr 25 10:50:19 2012] [info] LDAP: SSL support available
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/modules/memcache.so' - /usr/lib/php/modules/memcache.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  Module 'gd' already loaded in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/modules/memcache.so' - /usr/lib/php/modules/memcache.so: cannot open shared object file: No such file or directory in Unknown on line 0
[Wed Apr 25 10:50:19 2012] [info] Init: Seeding PRNG with 256 bytes of entropy
[Wed Apr 25 10:50:19 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Wed Apr 25 10:50:19 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(374): shmcb_init allocated 512000 bytes of shared memory
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(554): entered shmcb_init_memory()
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(576): for 512000 bytes, recommending 4266 indexes
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(619): shmcb_init_memory choices follow
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(621): division_mask = 0x1F
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(623): division_offset = 64
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(625): division_size = 15998
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(627): queue_size = 1604
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(629): index_num = 133
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(631): index_offset = 8
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(633): index_size = 12
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(635): cache_data_offset = 8
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(637): cache_data_size = 14386
[Wed Apr 25 10:50:19 2012] [debug] ssl_scache_shmcb.c(650): leaving shmcb_init_memory()
[Wed Apr 25 10:50:19 2012] [info] Shared memory session cache initialised
[Wed Apr 25 10:50:19 2012] [info] Init: Initializing (virtual) servers for SSL
[Wed Apr 25 10:50:19 2012] [info] mod_ssl/2.2.9 compiled against Server: Apache/2.2.9, Library: OpenSSL/0.9.8b
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14136 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14136 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14137 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14137 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14138 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14138 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14138 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14139 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14139 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14140 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14140 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14141 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14141 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14142 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14142 for (*)
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1854): proxy: grabbed scoreboard slot 0 in child 14143 for worker proxy:reverse
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1873): proxy: worker proxy:reverse already initialized
[Wed Apr 25 10:50:19 2012] [debug] proxy_util.c(1967): proxy: initialized single connection worker 0 in child 14143 for (*)
[Wed Apr 25 10:50:19 2012] [notice] Apache/2.2.9 (Unix) DAV/2 PHP/5.2.6 mod_ssl/2.2.9 OpenSSL/0.9.8b configured -- resuming normal operations
[Wed Apr 25 10:50:19 2012] [info] Server built: Jul 14 2008 15:29:50
[Wed Apr 25 10:50:19 2012] [debug] prefork.c(1001): AcceptMutex: sysvsem (default: sysvsem) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:19:03.593

我觉得自己像个白痴...

几个月前，我将本地防火墙更改为更安全，它阻止了我试图连接的端口（8080）。

不管怎么说，多谢拉。

# php - Wordpress 在标题中显示访问者的 IP

> ID：10318221
> 
> 赞同：0
> 
> 时间：2012-04-25T14:53:45.980
> 
> 标签：php, wordpress

我的问题：有没有办法在 Wordpress 的页面*标题中显示访问者的 IP 地址？*到目前为止，我所做的是：[My IP Lookup](http://nix-pix.co.uk/ip/)。

有没有我可以做的插件或调整？

这是文件：[Header.php](http://nix-pix.co.uk/header.txt)

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:55:22.580

`header.php`在您的主题中编辑您的文件。那就是生成标签的地方。它应该是 wp-content/themes/alyeska-child/header.php 或者如果它不存在 wp-content/themes/alyeska/header.php。

如果您发布生成标题的代码（或您的`header.php`文件，如果您不知道），我们可以告诉您具体添加它的位置。

如果 IP 信息是通过简码生成的，您可以`do_shortcode('[shortcode])`在 PHP 中使用 PHP 直接运行简码。

如果您只想在一页上执行此操作，则必须检测正确的页面并条件化对标题的更改。您需要知道所需页面的页面标识符，但您会使用以下内容：

```
<title>
<?php
    themeblvd_title();
    if (is_page(10)) { //Check if we are on the correct page
        echo '|'; //Just a spacer between the default title and your addtion
        do_shortcode('[shortcode]');
    }
?>
</title> 
```

有关 is_page 的更多信息：http: [//codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:13:10.103

我是主题及其框架的作者。我只是要稍微修改一下 Matthew 给你的代码。对于主题和框架的未来更新，最好避免在[Child 主题](http://www.wpjumpstart.com/tutorial/child-theme-setup/)中实际编辑 header.php ，而是使用框架的钩子系统：

[http://www.wpjumpstart.com/tutorial/primary-framework-action-hooks/](http://www.wpjumpstart.com/tutorial/primary-framework-action-hooks/)

themeblvd_title 是框架的动作之一。它已经连接了一个默认功能，以您现在看到的方式显示标题。您想要做的事情相当简单，因为您实际上并没有修改该默认功能，而只是添加到操作中。

如果动作钩子的概念对你来说完全陌生，一定要看看这篇文章**——www.wpjumpstart.com/tutorial/actions/——**理解这些基本的 WordPress 开发概念真的会扩展你的学习内容能够继续您的自定义。

因此，要完成 Mathew 所说的，您可以从 Child 主题的 functions.php 中执行以下操作：

```
function my_title_addon() {
    if (is_page(10)) { //Check if we are on the correct page
        echo '|'; //Just a spacer between the default title and your addition
        do_shortcode('[shortcode]');
    }
}
add_action( 'themeblvd_title', 'my_title_addon' ); 
```

这里还有一件大事要注意。我注意到在您的网站上，您使用的是 Alyeska 2.0。您应该更新到上周在 ThemeForest 上发布的最新版本 Alyeska 2.1，其中包含框架的 v2.1。内部是一个新的示例子主题，包含稍微修改的结构，如本视频所述 -- **vimeo.com/41331677**

如果您不使用这个新的子主题结构，我发布的上述代码会将您的 IP 短代码添加到themeblvd_title 的*开头*，这不是您想要的。如果您选择保留当前的主题版本和子主题结构，则上述`add_action`内容的优先级需要高于默认的 10，如下所示：

```
function my_title_addon() {
    if (is_page(10)) { //Check if we are on the correct page
        echo '|'; //Just a spacer between the default title and your addition
        do_shortcode('[shortcode]');
    }
}
add_action( 'themeblvd_title', 'my_title_addon', 11 ); // Higher priority so it comes after default title function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:02:04.113

以下是如何使用过滤器挂钩来修改标题。

将此添加到主题 functions.php 文件或您自己的插件之一中：

```
add_filter( 'wp_title', 'add_ip_to_title', 10, 3 );

function add_ip_to_title($title, $sep = '', $location = '') {
    return $title . $sep . "visitor IP info here";
} 
```

[https://codex.wordpress.org/Plugin_API/Filter_Reference/wp_title](https://codex.wordpress.org/Plugin_API/Filter_Reference/wp_title)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:16:42.403

要添加到其他一些答案，要获取他们的 IP 地址，它可能会根据您的服务器环境而有所不同。只需创建一个名为 test.php 的文件并将其放在 Web 可访问的位置：

```
<?php

echo phpinfo();

?> 
```

然后，寻找可以检索用户 IP 地址的地方。如果你的 PHP 在反向代理中运行，不幸的是，正常的地方只有 localhost 的 IP。但是还有很多其他环境变量可以从中获取 IP。以下是要检查的地方：

“Apache 环境”或“HTTP 头信息”或“PHP 变量”部分。

然后，如果您看到真实的 IP 地址（将信息页面上显示的地址与您可能从 whatismyip.com 获得的地址进行比较），那么您可以使用 PHP 的[预定义变量](http://php.net/manual/en/reserved.variables.php)之一在上述 draw010 描述的函数中访问该值。

# javascript - jquery将图像拖入文本并显示该图像的url

> ID：10318236
> 
> 赞同：0
> 
> 时间：2012-04-25T14:54:35.130
> 
> 标签：javascript, jquery, jquery-selectors, drag-and-drop

我有一个文本框、一个 div 和一个图像。

我们有什么办法可以这样做：

1.  当我将该图像拖到 div 中时。（图像不需要移动，就像我们左键单击它，然后将其拖动到任何地方，但它永远不会移动。）
2.  div 显示图像。（将 1 张图片复制到 div 中）
3.  文本显示该图像的 URL。

你对做这件事有什么想法或文章吗？

我一生中从未编写过拖放代码，但我知道**第 2 步**只是为 div 设置 HTML，**第 3 步**只是获取图像 src。但是，在**Step 1**中，我怎么知道**“图像进入 div 并释放鼠标”？**

我知道[jQuery UI](http://www.jqueryui.com)，它不是[jQuery UI](http://www.jqueryui.com)中的可拖动对象，因为可拖动对象使对象移动。*我不想让它动。*您可以尝试单击此*stackoverflow*网站上的任何图像或任何链接。然后你按住鼠标并拖动它。尝试将链接拖到顶部的搜索框中，您将获得该链接。这就是我想要的。不是[jQuery UI](http://www.jqueryui.com)的可拖动来使对象移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:14:55.757

您可以使用 jQuery 中的可拖动功能来完成所有这些工作。我注意到您在评论中提到您不相信这会起作用，因为它实际上会移动图像，但不仅仅是默认选项！看一下克隆助手属性。

这是一个与现有示例一样接近的示例，听起来您已经知道如何处理其余部分（获取 src 属性等）。

[http://jqueryui.com/demos/droppable/#method-option](http://jqueryui.com/demos/droppable/#method-option)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:18:23.957

JQuery`draggable`允许您在使用`Helpers`. 查看此网址并尝试拖动顶部的灰色框。右边的两个使用助手，把原来的留在原地。

[http://www.jqueryui.com/demos/draggable/#visual-feedback](http://www.jqueryui.com/demos/draggable/#visual-feedback)

将其与提供的[链接](http://jqueryui.com/demos/droppable/#method-option) `Artsemis`结合使用就可以了

将图像拖到地址栏中是 Web 浏览器的功能，而不是 JS 或您正在查看的页面。您将需要使用 jquery draggable 或类似的东西。

# objective-c - 如何根据 Clean Code 原则处理按钮点击？

> ID：10318240
> 
> 赞同：0
> 
> 时间：2012-04-25T14:54:51.353
> 
> 标签：objective-c, coding-style

我在 iOS 应用程序中有以下看似简单的代码处理按钮点击：

```
- (IBAction)tapKeypadButton:(UIButton *)sender {
    NSString *buttonLabel = sender.titleLabel.text;

    if ([buttonLabel isEqualToString:@"<"]) {
        [self _tapBackButton];
    } else {
        [self _tapDigitButton:buttonLabel];
    }
} 
```

要完全遵循 Robert C. Martin 的 Clean Code 原则，我是否需要 ButtonTapFactory 或同一行中的其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:34:26.183

您有两种类型的按钮，具有不同的行为（后退按钮和数字按钮）。要使此代码干净，您应该为每种类型设置两个操作。类型不应该由按钮内的文本内容决定，而是通过语义上有意义的方式来决定。（即子类）。此外，动作方法应该只包含对执行实际逻辑的另一个方法的调用。其他一切都是不可测试的。在代码中：

```
- (IBAction) tapBackButton:(id) sender
{
    [self _tapBackButton:sender];
}

- (IBAction) tapDigitButton:(id) sender
{
    [self _tapDigitButton:sender];
} 
```

这样，您可以让单元测试调用您的方法，而不会干扰您的 UI 代码。另请注意，我从对 的调用中删除了标签`_tapDigitButton`。不应从标签中解析数字，而应以语义更稳定的方式传递，例如使用`tag`属性。

# jasper-reports - JasperServer：在查询中使用用户语言环境进行输入控制

> ID：10318243
> 
> 赞同：3
> 
> 时间：2012-04-25T14:54:59.700
> 
> 标签：jasper-reports, jasperserver

我正在寻找一种在 JasperServer 中的输入控件的 sql 查询中使用当前用户区域设置信息的方法。

更多细节：输入查询应该显示它通过我们数据库中的 sql 查询获得的值列表。但是，此值取决于用户区域设置信息。在报告中，我可以使用 $P{REPORT_LOCALE} 来获取用户区域设置。但是，此参数在用于填充输入控件的查询中不起作用。

我感谢每一个提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:01:33.757

我实际上想出了如何做到这一点。

***我的解决方案：***创建一个字符串类型的不可见输入控件并将其分配给报表。定义一个同名的报表参数，并将默认值表达式设置为 $P{REPORT_LOCALE}.getLanguage()。通过这样做，我可以通过 sql 查询中的输入参数使用当前用户的语言代码。

# wordpress - 使用 htaccess 去除 wp-admin 的品牌

> ID：10318245
> 
> 赞同：1
> 
> 时间：2012-04-25T14:55:02.057
> 
> 标签：wordpress, .htaccess

我不喜欢 WordPress 到处都贴着它的品牌，比如`http://example.com/wp-admin`. 我更喜欢像`http://example.com/admin`. .htaccess 规则可以做到这一点吗？从安全和/或可访问性的角度来看，这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:49:07.823

请遵循以下更改：

### .htacess 代码

```
RewriteRule ^secret-folder/(.*) wp-admin/$1?%{QUERY_STRING} [L]
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress-3.3/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress-3.3/index.php [L]
</IfModule>

# END WordPress 
```

### wp-config.php

```
define('WP_ADMIN_DIR', 'secret-folder');
define( 'ADMIN_COOKIE_PATH', SITECOOKIEPATH . WP_ADMIN_DIR); 
```

### 主题/your_theme_name/functions.php

```
add_filter('site_url', 'wpadmin_filter', 10, 3);

function wpadmin_filter( $url, $path, $orig_scheme ) {
    $old = array( "/(wp-admin)/");
    $admin_dir = WP_ADMIN_DIR;
    $new = array($admin_dir);
    return preg_replace( $old, $new, $url, 1);
}

add_action( 'admin_init', 'restrict_wp_admin');

function redirect_wp_admin(){
    $redirect_to = $_SERVER['REQUEST_URI'];
    if(count($_REQUEST)> 0 && array_key_exists('redirect_to', $_REQUEST)){
        $redirect_to = $_REQUEST['redirect_to'];
        $check_wp_admin = stristr($redirect_to, 'wp-admin');
        if($check_wp_admin){
            wp_safe_redirect( '404.php' );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:28:02.057

了解[如何隐藏您正在使用 WordPress 的事实 | 本字](http://benword.com/how-to-hide-that-youre-using-wordpress/)

> • 清理 wp_head 的输出并从 RSS 提要中删除生成器
> 
> • 通过重写静态主题资源（CSS、JS 和图像）隐藏/wp-content/
> 
> • 使用自定义walker 清理导航菜单的输出
> 
> • 根相对 URL

# python - 不平衡括号python

> ID：10318248
> 
> 赞同：2
> 
> 时间：2012-04-25T14:55:14.243
> 
> 标签：python, regex

我有以下代码：

```
def commandType(self):
    import re
    print self.cmds[self.counter]
    if re.match("@",self.cmds[self.counter]):
        return Parser.A_COMMAND

    elif re.match('(',self.cmds[self.counter]):
        return Parser.L_COMMAND

    else:
        return Parser.C_COMMAND 
```

在这条线上：`elif re.match('(',self.cmds[self.counter]):`

我收到一个错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T14:58:15.037

括号[在正则表达式中有特殊含义](http://www.regular-expressions.info/brackets.html)。[你可以逃避括号](https://stackoverflow.com/a/10318284/139010)，但**你真的不需要正则表达式来解决这个问题**：

```
def commandType(self):
    print self.cmds[self.counter]
    if '@' in self.cmds[self.counter]):
        return Parser.A_COMMAND

    elif '(' in self.cmds[self.counter]:
        return Parser.L_COMMAND

    else:
        return Parser.C_COMMAND 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T14:57:23.493

括号`'('`和`')'`用作正则表达式中的分组机制和范围运算符。您必须通过反斜杠转义它们（和任何其他控制符号），例如`'\('`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:57:43.203

正则表达式的语言赋予了特殊的含义`(`（它用于开始一个组）。如果要匹配文字左括号，则需要使用反斜杠对其进行转义：`elif re.match(r'\(', ...`。

（为什么`r'...'`而不仅仅是`'...'`？因为在普通字符串中，反斜杠也用于转义控制字符等，并且您需要`\\`在字符串中写入单个反斜杠。所以您可以改为写`elif re.match('\\(', ...`。最好养成习惯对正则表达式使用`r'...'`字符串——这样更不容易出错。）

# javascript - 我们如何根据 Telerik Gridview 中选择的项目将 HeaderCheckBox 实现为 Checked && UnChecked？

> ID：10318250
> 
> 赞同：0
> 
> 时间：2012-04-25T14:55:24.780
> 
> 标签：javascript, asp.net, radgrid

我有一个 Telerik Gridview，其中的项目与每行的复选框一起显示。我有一个 HeaderCheckbox ，如果我们选择 HeaderCheckbox 来选中，那么所有复选框都被选中，没有任何问题。现在，如果我取消选中任何一项，那么 HeaderCheckbox 必须取消选中，我如何使用 javascript 或 telerik gridview 来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:15:29.600

我不知道你是如何实现这个的，但是`RadGrid`有一个`GridClientSelectColumn`应该为你处理所有这些的。

```
<telerik:RadGrid ID="RadGrid1" runat="server" AllowMultiRowSelection="true" ...>
    <MasterTableView AutoGenerateColumns="false">
        <Columns>
            <telerik:GridClientSelectColumn UniqueName="SelectRow">
                <HeaderStyle Width="27px" HorizontalAlign="Center" />
                <ItemStyle HorizontalAlign="Center" />
            </telerik:GridClientSelectColumn>          
            ...       
        </Columns>
    </MasterTableView>
    <ClientSettings EnableRowHoverStyle="true" EnableAlternatingItems="true">                                                                                    
        <Selecting AllowRowSelect="true" />
    </ClientSettings>
</telerik:RadGrid> 
```

# google-maps - PKaeding 是如何做到的？

> ID：10318251
> 
> 赞同：0
> 
> 时间：2012-04-25T14:55:24.857
> 
> 标签：google-maps, geocoding

我遇到了这个网站，[http](http://gmaps.kaeding.name/) ://gmaps.kaeding.name/ ，它允许您在静态谷歌地图上绘制多个位置。

我的问题是这是如何完成的..？我不是想复制他所做的，只是理解为我试图实现类似的目标。

在博客中它说“您输入任意数量的地址，每行一个。然后脚本通过 geocoder.us 发送这些字符串以获取纬度和经度”

这会是一个 Visual Basic 脚本吗……？还是我完全叫错了树……？

抱歉这么含糊，但不知道从哪里开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:44:41.230

您不需要依赖地理编码本身，因为[Google 静态地图 API](http://goo.gl/WXwq6)允许您为在静态地图上绘制的位置提供地址作为标记。

从文档：

> 每个标记描述符必须包含一组一个或多个位置，定义在地图上放置标记的位置。这些位置可以指定为纬度/经度值或地址。这些位置使用竖线字符 (|) 分隔。

静态地图 API 包含允许您覆盖标记、线和多边形的功能。因此，要实现类似的东西，您只需收集表单字段值，然后将请求提交给 API（通过服务器端或客户端 [AJAX] 代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:00:43.643

该表单发布到服务器上的 cgi-bin/map.cgi，因此任何试图解决该实现的尝试都是纯粹的猜测。在纯客户端 Javascript 中有此功能的实现，如果您关心谷歌它们，例如这个：

[http://www.tomanthony.co.uk/blog/geocoding-uk-postcodes-with-google-map-api/](http://www.tomanthony.co.uk/blog/geocoding-uk-postcodes-with-google-map-api/)

# nginx - 如何使用 nginx 作为反向代理显示 uwsgi 错误

> ID：10318257
> 
> 赞同：0
> 
> 时间：2012-04-25T14:56:06.057
> 
> 标签：nginx, uwsgi

我有nginx作为uwsgi服务的反向代理，设置也很简单，把连接传到后端就行了。而当代码出现问题时，uwsgi会向nginx发送502错误，这使得nginx只显示502错误，为了检查问题，我们必须查看uwsgi日志，这在我们开发时非常不方便。我搜索了无法给我答案的谷歌，所以有没有任何方法可以显示 nginx 的代码异常，而不仅仅是 502 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:19:48.723

使用 --catch-exceptions 但仅在开发中使用它，因为它可以显示合理的数据

# c++ - C++ 模板，使用 std 迭代器的错误

> ID：10318258
> 
> 赞同：1
> 
> 时间：2012-04-25T14:56:07.377
> 
> 标签：c++, templates

当我尝试编译模板类时，出现以下错误：

```
C.cpp: In member function 'void PeriodContainerAdvanced<T>::add()':
C.cpp:133: error: type/value mismatch at argument 1 in template parameter list for 'template<class _T1, class _T2> struct std::pair'
C.cpp:133: error:   expected a type, got 'std::map<int,T,std::less<int>,std::allocator<std::pair<const int, T> > >::iterator'
C.cpp:133: error: invalid type in declaration before ';' token 
```

Ch 文件中的类：（简化）

```
template <class T>
class PeriodContainerAdvanced 
{
[skip]
    void add (); 
[skip]
} 
```

C.cpp（简体）：

```
template <class T>
void PeriodContainerAdvanced<T>::add()
{
[skip]
    std::pair<std::map< time_t, T >::iterator, bool> ret; // line 133 !
[skip]
} 
```

以及尝试定义时其他功能的类似错误

```
std::map< time_t, T >::iterator it, it_start, it_end; // line 153 
```

在这一行编译器说：

```
C.cpp:153: error: expected `;' before 'it'
C.cpp:166: error: 'it_start' was not declared in this scope 
```

如何解决？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T14:57:41.400

这是一个从属名称，您需要将其声明为：

```
std::pair<typename std::map< time_t, T >::iterator, bool> ret; 
```

此外，为了避免以后的链接器错误，您应该将模板实现移动到对使用该模板的所有翻译单元可见的文件中 - 就像您定义模板类的标题一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T14:59:23.287

首先，需要将`add()`实现放在头文件中，或者放在头文件包含的文件中。编译器需要查看代码才能实例化给定的模板`T`。

其次，你引用的错误来源，你需要加一个`typename`告诉编译器你说的是一个类型。`std::map< time_t, T >::iterator`可以解释为一个值。

```
template <class T>
class PeriodContainerAdvanced {
  void add () {
    std::pair<typename std::map< time_t, T >::iterator, bool> ret;
    ....         ^
  }
}; 
```

# macos - CVPixelBufferRef 到 NSImage

> ID：10318260
> 
> 赞同：8
> 
> 时间：2012-04-25T14:56:13.040
> 
> 标签：macos, cocoa, osx-lion, nsimage

如何将 CVPixelBufferRef 转换为 NSImage 或 CGImageRef？我需要能够在核心动画层中显示像素缓冲区的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-11T11:35:49.317

要将缓冲区转换为图像，您需要先将缓冲区转换为`CIImage`，然后可以将其转换为`NSImage`。

```
let ciImage = CIImage(cvImageBuffer: pixelBuffer)

let context = CIContext(options: nil) 
```

从这里您可以同时访问`GCImage`和`NSImage`：

```
let width = CVPixelBufferGetWidth(pixelBuffer)
let height = CVPixelBufferGetHeight(pixelBuffer)

let cgImage = context.createCGImage(ciImage, from: CGRect(x: 0, y: 0, width: width, height: height))

let nsImage = NSImage(cgImage: cgImage, size: CGSize(width: width, height: height)) 
```

# c# - OAuth 标头 WSDL Web 服务

> ID：10318265
> 
> 赞同：1
> 
> 时间：2012-04-25T14:56:28.693
> 
> 标签：c#, spring, oauth, wsdl

我创建了以下内容：Spring、Spring OAuth、Enunciate api with WSDL、C# OAuth 测试和 C# WSDL Web 服务测试。经过大量阅读后，一切都运行良好。

我现在为 /soap/xxxservice 启用了 Spring OAuth，因此当 OAuth 重定向到 HTML 登录页面（缺少授权标头）时，我在 WSDL Web 服务上收到错误。请注意，代码是通过将 WSDL WebSerice 导入 VS2010 自动生成的。

为了解决这个问题，我需要插入一个名为“Authorization”的 HttpWebRequest 标头。

我可以通过手动编码 HttpWebRequest 来实现它，但是没有 pritty 方法或对象......纯请求和 XML 响应...... eeewwww

有没有一种方法可以结合 WSDL 自动生成的代码和自定义 http.header 来支持 OAuth 1.0a？

提前ta

# java - 在地图中使用列表（Java）

> ID：10318266
> 
> 赞同：3
> 
> 时间：2012-04-25T14:56:29.447
> 
> 标签：java, list, map

我正在使用 HashMap，其中我使用 ArrayList 作为值。

像这样：

```
Map<Movie, List<Grades>> gradedMovies = new HashMap(); 
```

我正在尝试创建一种方法，我可以使用该方法遍历值以查看键（电影）是否已经存在。如果是这样，我想在分配给特定键（电影）的列表中添加一个新值（等级）。像这样的东西：

```
public void addGrade(Movie movie, Grade grade) {
// stuff here } 
```

最终，我无法打印在将电影添加到地图后会显示电影及其等级的地图。

这是如何实现的？还是我的整个方法（使用地图）完全错误？

感谢您的任何帮助。（这是作业）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:01:03.943

我认为您走在正确的道路上，只需确保您的电影对象已实现`equals`，`hashCode`因此它可以作为哈希映射的真正键。

如果你想要漂亮的打印，只需实现 toString 方法。

```
public void addGrade(Movie movie, Grade grade) {
    if (!gradedMovies.containsKey(movie)) { 
        gradedMovies.put(movie, new ArrayList()); 
    }
    gradedMovies.get(movie).add(grade);
} 
```

希望这会有所帮助，干杯！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:01:46.153

你可以使用类似的东西：

```
public void addGrade(Movie movie, Grade grade) {
    if (!gradedMovies.containsKey(movie)) {
        gradedMovies.put(movie, new ArrayList<Grade>());
    }
    gradedMovies.get(movie).add(grade);
} 
```

您需要覆盖该方法`equals`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T15:02:03.533

我不知道您为什么要特别寻找索引- a的*重点*`Map`是您可以通过它们的键查找条目。

所以作为一个起点，你的`addGrade`方法的第一行可能看起来像

```
List<grades> grades = gradedMovies.get(movie); 
```

你可以从那里得到它。（记得查看[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#get%28java.lang.Object%29)，看看如果地图还没有包含给定的电影会发生什么......）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T15:03:15.670

> 我可以遍历这些值以查看键（电影）是否已经存在

您不需要遍历地图，只需调用`gradedMovies.containsKey( movieToCheck )`.

请注意，当`Movie`用作键时，您应该提供`equals()`和的合理实现`hashCode()`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T15:07:18.057

你做得很好！但你应该考虑几件事：

在地图上查找值时，您的 Movie 对象必须覆盖**equals**和 hashChode。Java 将始终在比较上使用 equals 方法，主要是在涉及自动比较时（例如验证列表是否包含项目，或者在这种情况下，键值是否等于给定值）。**请记住，equals 定义了 item 的唯一性**，因此您应该根据特定的唯一属性进行比较，例如标识号或（对于这种情况）它的名称。

要打印地图，请手动（**增强的“for”循环**）或使用迭代器（可以通过**.iterator()**方法直接获得）**迭代keySet。**对于每部电影，您以类似的方式打印成绩列表。

 ****我不知道您是否熟悉字符串打印，但是可以将一些特殊的字符组合添加到字符串中以赋予它某种格式。例如：

*   \n 将插入换行符
*   \t 是一个表格

希望这有助于消除一些疑虑。祝你好运！。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T15:30:56.047

查看 Guava 的[Multimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)。这正是它的作用。

```
private Multimap<Movie, Grade> map = ArrayListMultimap.create();

public void addGrade(Movie movie, Grade grade){
   map.put(movie, grade);
} 
```

它将负责为您创建列表。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-25T15:02:14.220

```
public void addGrade(Movie movie, Grade grade) {

boolean found = false;
for(Movie m : gradedMovies.keyset()) {
    // compare the movies
    if(/* match on movies */) {
        gradedMovies.get(m).add(grade);
        found = true;
    }
}
if(!found) {
    gradedMovies.put(movie, new ArrayList().add(grade));
}
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-25T15:02:25.733

```
gradedMovies.containsKey(movie);

    for(Map.Entry<Movie,List<Grades>> entry : gradedMovies.entrySet()){
            Movie key = entry.getKey();
       } 
```****

# android - Android Activity 自动刷新/

> ID：10318270
> 
> 赞同：1
> 
> 时间：2012-04-25T14:56:44.967
> 
> 标签：android, android-activity

我对此很陌生，如果我的问题可能微不足道，我很抱歉，我敢肯定这是基本的东西，但我真的找不到解决方案。

我想在活动中实现自动刷新。我有一个在后台运行的 BT 服务，需要通过 mHandler 确认一些接收到的数据。如果它收到预期的我想更改文本视图的字符串，现在我正在使用一个额外的按钮，但这是最丑陋的方式。所以我需要在活动内部有一个循环，但我应该使用什么？哪个动作监听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:21:15.817

好的，你可以做的是你可以在你的活动中创建一个广播接收器。在你的 oncreate 中写下这段代码。修复它实际上我在家所以你需要修复它我给你的想法。

```
BroadcastReciever broadcast_obj = new BroadcastReciever (
                         @overrieded
                         onRecieve(Intent intent) {
                              String action = intent.getAction();
                              if(action == "my_bt_action") {
                                 //UPDATE YOUR TEXTVIEW AND DO WHATEVER WORK YOU WANT.
                               }
                           });

Now you need to register your broadcast for that just put these line in your oncreate after creating  Broadcast reciever which we have just done.

registerREciever(broadcast_obj, new IntentFilter("my_bt_action");

now you need to send your broadcast when your service will perform your calculation or your task for that it is simple.

Intent intent = new Intent (getApplictionContext,"my_bt_action");
sendBroadcast(intent);

from above code you can easily communicate between your activity and service.

hope it will work. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T15:08:54.230

也许您可以尝试在线程内循环

```
 boolean update = false; // control the state to update textview
    new Thread(new Runnable(){
        void run(){
            while(true){
                if(!update){
                   ...
                   textview.setText("something.");
                   ...
                   update = true;
                }
            }
        }
    }.start(); 
```

# visual-c++ - 检查组件是否存在 VC++ 2008

> ID：10318271
> 
> 赞同：0
> 
> 时间：2012-04-25T14:56:48.000
> 
> 标签：visual-c++, c++-cli

我定义了一个这样的标签：

```
private: System::Windows::Forms::Label^  label2; 
```

我希望创建这个标签，然后在用户按下按钮时显示我面临的问题是当用户再次点击按钮时，标签被再次创建，所以我尝试像这样放置 if 语句：

```
if(this->label2 == NULL){/*create the label*/} 
```

但是 NULL 没有像编译器所说的那样声明，我尝试了（0）但仍然无法正常工作！请给我建议...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:03:07.950

`nullptr`是在 c++/cli 中为托管引用指定 null 的正确方法。它相当于`null`在 C# 中。

# oracle - 如何从 Oracle 11g 中的对象类型列中选择？

> ID：10318272
> 
> 赞同：20
> 
> 时间：2012-04-25T14:56:52.510
> 
> 标签：oracle, object, select, oracle11g

嗨，伙计们，我有以下两个 Oracle 对象：

```
CREATE OR REPLACE TYPE car AS OBJECT( 
name VARCHAR( 80 ) 
) NOT FINAL; 
```

而且，还有另一个对象：

```
CREATE OR REPLACE TYPE truck UNDER car ( 
doors NUMBER,
seats NUMBER 
); 
```

还有下表：

```
CREATE TABLE vehicles (
id NUMBER NOT NULL,
vehicle car,
PRIMARY KEY (id)
); 
```

这是一些数据：

```
INSERT INTO vehicles ( id, vehicle ) VALUES ( 1, truck( 'ford', 4, 4 ) );
INSERT INTO vehicles ( id, vehicle ) VALUES ( 2, truck( 'toyota', 4, 5 ) ); 
```

最后，我的问题是： **如何从车辆表列中仅选择门数和座位数？**

我尝试了以下但它不起作用：

```
SELECT v.vehicle.doors AS doors AS seats FROM vehicles v; 
```

我收到以下错误：

```
ORA-00904: "V"."VEHICLE"."DOORS": invalid identifier 
```

我唯一能得到的没有任何错误的参数是来自汽车对象的参数。

仅供参考，我在 CentOS 6.2 上使用 Oracle 11g

干杯，博扬

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-25T15:38:00.610

您需要使用 TREAT 函数让数据库引擎将 VEHICLE 视为卡车，如下所示：

```
SELECT ID, TREAT(vehicle AS TRUCK).DOORS FROM VEHICLES 
```

分享和享受。

# android - 难以读取 XML 文件

> ID：10318276
> 
> 赞同：1
> 
> 时间：2012-04-25T14:57:04.910
> 
> 标签：android

使用 Eclipse 3.7.2 Android 2.3.3 / API 级别 10

我在读取 XML 文件时遇到问题。我“认为”我可以使用此代码正确处理文件并将其打开以进行输入/输出，因为我想读取信息，为用户显示，然后更新任何更改。

来自 c# 世界，当我阅读文件时，我看到了我不熟悉的行为。在调试透视图中，我的变量具有红色方块值。现在这可能没问题，但我的第一个想法是红色 == 麻烦？但是数据（调试透视图的变量窗口中的数据）似乎没问题，所以我继续。我的 eventType 为零，我输入了 case 语句，但随后我抛出了一个异常。现在我在这里丢球。我不知道如何获取有关 Java 异常的更多信息。例如，在 c# 世界中，我可以获得内部异常。我确信在 Java 中有一种我还没有学过的方法。

以下是步骤： 从第 1 行，我直接跳到第 9 行。`F6`（Eclipse 调试快捷方式“Step over”）将我带到第 4 行，`F6`再次回到第 9 行，`F6`最后一次，我抓住了一个通用异常。

```
 try
  {
      DataFileOut = new FileOutputStream(LiftFile);
      DataFileIn = new FileInputStream(LiftFile);
      InputStreamReader isr = new InputStreamReader(DataFileIn);        

      // auto-detect the encoding from the stream    
      parser.setInput(isr);    
      int eventType = parser.getEventType();    
      Category currentCategory = null;
      boolean done = false;    
      while (eventType != XmlPullParser.END_DOCUMENT && !done)
      {        
          String name = null;
  0       //eventType = 2;
  1       switch (eventType)
          {
  3         case XmlPullParser.START_DOCUMENT:
  4         break;

            case XmlPullParser.START_TAG:
        ....
       }
  9     eventType = parser.next();
   }
} 
```

所以我的想法是我的 FileInputStream 句柄不好，或者我的 XML 文档格式不正确？还有其他想法吗？

```
<?xml version="1.0" encoding="UTF-8"?>
    <ExcersiseInformation>
       <Lifts count="6">
          <Lift>
       <ID>1001001</ID>
       <Name>Hammer Curls</Name>
       <PreviousLift>45</PreviousLift>
       <PreviousReps>8</PreviousReps>
       <SuggestLift>45</SuggestLift>
       <SuggestReps>10</SuggestReps>
       <ActualLift></ActualLift>
       <ActualReps></ActualReps>
          </Lift>
          .....
      </Lifts>
   </ExcersiseInformation> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:41:48.817

您的 xml 似乎格式正确。您是否使用处理程序和解析器类来获取 xml 标记内容？可能是达到它的最佳方法。你可以在互联网或其他帖子上找到一些很好的例子。请看一下我成功使用的相同方法

[http://www.jondev.net/articles/Android_XML_SAX_Parser_Example](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)

# c# - C# 如何在运行时使用 XElement 创建具有 Dynamic Linq 的自定义（动态）类

> ID：10318277
> 
> 赞同：3
> 
> 时间：2012-04-25T14:57:07.133
> 
> 标签：c#, linq, select, dynamic, xelement

您好我正在尝试使用 XElement 和 DynamicLinq 创建一个通用/动态类的列表，然后在 dataGridView1.DataSource 中显示

首先，让我们使用 XElement 类制作 xml。

```
// a List of String that are going to be our dynamic class's properties.
List<string> elements = new List<string>();
elements.Add("Name");
elements.Add("Address");
elements.Add("OtherElements1");
elements.Add("OtherElements2");
elements.Add("OtherElements3");

// XML Root Element
XElement XElement_Root = new XElement("Root");
// Item Element, This is our dynamic class
XElement XElement_Item = new XElement("Item");

// Insert the elements as XElements in the Item XElement
// This is like defining our Properties to our Item Class
foreach (String element in elements)
{
    XElement_Item.Add(new XElement(element));
}

// Add 5 "Item" classes to the List "Root"
for (int cc = 0; cc < 5; cc++ )
{
    foreach (String elementName in elements)
    {
        // Adding a Random 10 length string to each "Item" Element(property)
        XElement_Item.Element(elementName).Value = RandomString(10);
    }
    // Adding the populated "Class"(Item) to the "List<>"(Root)
    XElement_Root.Add(new XElement(XElement_Item));
}

// Preview of the created xml.
String xml = XElement_Root.ToString(); 
```

它应该看起来像这样。

```
 - Root - 
   - Item - 
     - Name - KJHLRGOUDM - /Name - 
     - Address - QEOARCIIHO - /Address - 
     - OtherElements1 - LYHNXEPZCU - /OtherElements1 - 
     - OtherElements2 - MNSHTNYVXY - /OtherElements2 - 
     - OtherElements3 - DETZKZPJCE - /OtherElements3 - 
   - /Item - 
   - Item - 
     - Name - HYCNPMBTON - /Name - 
     - Address - QOSIADMHGE - /Address - 
     - OtherElements1 - ENLIKGEICX - /OtherElements1 - 
     - OtherElements2 - OGXYNOKFRH - /OtherElements2 - 
     - OtherElements3 - LEGJIPMKZH - /OtherElements3 - 
   - /Item - 
  ...
 - /Root - 
```

这一切都很好。但现在我解决了我的问题，我想将此 xml 转换为类“项目”列表以添加到我的 dataGridView1.DataSource；

这有效，但它不是通用/动态的。

```
// Normal Linq  !!! NOT GENERIC / DYNAMIC !!!
var listOfClassItem = 
    from classItem in XElement_Root.Descendants("Item") // "Item" is our class Name 
    select new 
    {
        Name = classItem.Element("Name").Value,
        Address = classItem.Element("Address").Value + " " + 
             classItem.Element("OtherElements1").Value,
        PropertyZ = classItem.Element("OtherElements3").Value
    };

// populate the dataGridView1.DataSource with the New List of Class Item
dataGridView1.DataSource = listOfClassItem.ToList(); 
```

网格然后看起来像这样。对不起，没有图像，工作块everyting :(

```
=============================================================
| Name          | Address                  | PropertyZ     |
=============================================================
| SCTGCITLTN    | NKMGDIYTGP LUCGNJCUNQ    | DYJJJGPZDH    |
| KBMZTYAMTS    | FZXDYVFAJO KVIMMNKSWG    | OLKTODAGLO    |
| APQPXOSANG    | NHQMYCIRWL QBHKZYKPXI    | UERMLHVXVL    |
| UIJZXZIFPY    | DDCESJZHHT PHHERLJUZS    | WHMKNQCMUB    |
| INPBWNBEIM    | QNGXVQKQRO NRXBXIUWRB    | DQAYPIBOPX    |
============================================================= 
```

好的，所以这很好，但不是通用/动态的，然后我尝试的是这个。

```
// Dynamic Linq  now this should be more GENERIC / DYNAMIC
// I want the User to be able to select which fields (properties) they want to show in the DataGrid
String selectQuery = GetSelectedFields(); // private String GetSelectedFields() { return ...}
// selectQuery will then be some thing like.
selectQuery = " new ( Element(\"Name\").Value as Name, " +
    " Element(\"Address\").Value + \" \" + Element(\"OtherElements1\").Value as Address, " +
    " Element(\"OtherElements3\").Value as PropertyZ )";

// Then using Dynamic Linq to get the generic / dynamic class from the selection.
// !!! THIS IS WHERE I'M STUCK !!! this does not work.  :(
var listOfClassItem2 = XElement_Root.Descendants("Item").AsQueryable().Select(selectQuery);

// I Found that this was the easiest way to get the "var" back to a List, to add to the .DataSource
// because the IQueryable above does not have a .ToList();
List<object> ListOfItem = new List<object>();
foreach (var varItem in listOfClassItem2)
{
    ListOfItem.Add(varItem);
}

// populate the dataGridView1.DataSource with the New List of Class Dynamic Item
dataGridView1.DataSource = ListOfItem; 
```

我收到以下错误消息。

```
No applicable method 'Element' exists in type 'XElement' 
```

有人可以帮我吗，

```
XElement_Root.Descendants("Item").AsQueryable().Select(selectQuery); 
```

这样我就可以获得与使用 Normal Linq 时相同的结果。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:10:27.143

我解决了我的问题。不幸的是，使用 XElement 并不是最佳选择。

看完这篇文章，我有了一个新的想法。

[如何在 C# 中创建动态属性？](https://stackoverflow.com/questions/947241/how-do-i-create-dynamic-properties-in-c) ——[保罗·特德斯科回答](https://stackoverflow.com/a/947263/1288)

首先让我们为动态类创建主干

```
// This is the class we are going to add to a List
public class DynamicClass
{
    // property is a class that will create dynamic properties at runtime
    private DynamicProperty _property = new DynamicProperty();

    public DynamicProperty property
    {
        get { return _property; }
        set { _property = value; }
    }
}

public class DynamicProperty
{
    // a Dictionary that hold all the dynamic property values
    private Dictionary<string, object> properties = new Dictionary<string, object>();

    // the property call to get any dynamic property in our Dictionary, or "" if none found.
    public object this[string name]
    {
        get
        {
            if (properties.ContainsKey(name))
            {
                return properties[name];
            }
            return "";
        }
        set
        {
            properties[name] = value;
        }
    }
} 
```

和 nou 的魔法。

```
// create a List of String that are going to be our dynamic class's properties.
List<string> PropertyNames = new List<string>();
PropertyNames.Add("Name");
PropertyNames.Add("Age");
PropertyNames.Add("Phone");
PropertyNames.Add("Address");
PropertyNames.Add("City");

// Make a list of the DynamicClass
List<DynamicClass> DynamicClassList = new List<DynamicClass>();

// Adding 5 DynamicClass classes to the DynamicClassList
for (int cc = 0; cc < 5; cc++ )
{
    // declare a new DynamicClass
    var dynamicClass = new DynamicClass();

    // Give Random values to the New Properties. 
    // (because dynamicClass.property["xxx"] is of type object it could be anything.)
    // I'm just going to use random strings.
    foreach (String PropertyName in PropertyNames)
    {
        dynamicClass.property[PropertyName] = RandomString(5 + cc); // private string RandomString(int size)
    }

    // It could also have looked something like this. 

    // dynamicClass.property["Name"] = "Peter";
    // dynamicClass.property["Age"] = 25;
    // ....

    // Add the populated class to the list.
    DynamicClassList.Add(dynamicClass);
}

// Again I want the User to be able to select which fields (properties) they want to show in the DataGrid.
String selectQuery = GetSelectedFields(); // private string GetSelectedFields() { return ... }
// selectQuery will then be something like.
selectQuery = "new (property[\"Name\"] as Name, " +
    " property[\"Age\"] as Age, " +
    " property[\"Phone\"] as Phone, " +
    " property[\"Address\"] + \" \" + property[\"City\"] as Address)";

// Make a new DynamicClass that only contains the fields the user wants to see.
var newDynamicClasses = DynamicClassList.AsQueryable().Select(selectQuery);

// I Found that this was the easiest way to get the "var" back to a List, to add to the .DataSource
// because the IQueryable above does not have a .ToList();
List<object> newDynamicClassList = new List<object>();
foreach (var varDynamicClass in newDynamicClasses)
{
    newDynamicClassList.Add(varDynamicClass);
}

// populate the dataGridView1.DataSource with the New List of DynamicClass
dataGridView1.DataSource = newDynamicClassList; 
```

那就是它。

再次感谢 Paolo，我希望这对其他人有所帮助。

# c#-4.0 - 将单个视图模型分配给嵌套视图？

> ID：10318278
> 
> 赞同：0
> 
> 时间：2012-04-25T14:57:13.347
> 
> 标签：c#-4.0, mvvm-light, datacontext, wpf-4.0

我有一个 MainView，它在我的 WPF 应用程序中有一个关联的 MainViewModel，通过它的构造函数分配。

> 应用程序 >*启动 uri* > MainWindow.xaml

```
 public MainWindow()
    {
        InitializeComponent();

        var viewModel = new MainViewModel();

        DataContext = viewModel;
    } 
```

我的 MainView 包含多达四个嵌套视图或子视图，它们根据在 MainView 上单击的按钮隐藏和显示。因此，我们通过绑定来切换可见性属性，该绑定通过分配给 MainView 上每个按钮的命令绑定进行更新。

每个嵌套视图都没有关联的 ViewModel，在子视图上找到的所有绑定都在 MainViewModel 中找到它们的信息。因此，绑定系统结束爬上应用程序的 UI 树以找出父“MainView”具有关联的 ViewModel。

所以总的来说有'ONE'-> ViewModel。这似乎工作正常，但正如预期的那样，这个虚拟机已经变得很大并且需要重构。它包含在上下文中不应包含的信息。但这是一个证明概念的应用。所以我决定保持简单并确保它是可行的。

**问题：**

当我尝试使用空视图模型分配空视图时，我注意到输出窗口中的绑定错误以及预期的奇怪和损坏的行为。这没有任何意义......有没有更清晰和简洁的方法让 WPF 知道如何处理它在嵌套视图控件中找到的任何绑定？我认为如果每个视图的构造函数都为自己分配了一个对应的 VM，如上所示，那么它应该可以正常工作，因为这在逻辑上是有意义的。不幸的是，当指定打开和隐藏其他视图的相应视图具有关联的 ViewModel 时，MainView 上的所有按钮都停止工作。在某些按钮上它可以工作，而在其他按钮上它没有？这真的很奇怪吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:12:35.657

正如我在上面的回答中提到的，问题是 WPF 绑定系统在运行时难以解决绑定问题。主视图具有通过主视图构造器实例化和分配的关联视图模型，并且对于 MainView 也包含的所有嵌套视图重复此模式。

默认情况下，我倾向于使用隐含的绑定语法，这意味着在不明确指定源的情况下，绑定系统将尝试解析您在绑定中提供的名称。所以这一切都是隐含的，没有明确设置！

将每个嵌套视图升级为拥有自己的视图模型会使绑定的自动发现/解析变得有点疯狂，我没有明确告诉绑定系统在哪里可以找到我正在寻找的属性，因此输出窗口绑定错误。

这会导致意外行为，因为输出窗口告诉它正在尝试解析嵌套视图中的绑定表达式 --> 视图模型。实际上，它正在查看的虚拟机是空的！

很明显，当您没有在绑定语法中显式设置源属性时，绑定系统是好的。它很聪明，可以自己找到东西。就我而言，它需要一些额外的帮助，因为它不确定在哪里可以找到东西。

**解决方案：**

1.  在 MainView 构造函数中删除 MainViewModel 的构造函数声明。
2.  将 ViewModels 命名空间的 xmlns 范围限定到 MainView.xaml
3.  在 MainView .xaml 中创建一个窗口资源
4.  给资源一个密钥。
5.  升级 MainView xaml 文件中的所有绑定以包含源属性。
6.  为源属性提供一个静态资源绑定，该绑定指向您在步骤 4 中设置的 ViewModel 键值。
7.  仅对引用与 MainView 关联的 ViewModel 的绑定执行第 6 步。
8.  所有嵌套视图都应单独放置，它们应在自己的 xaml 文件中处理自己的绑定。MainView 只是将它们实例化并将它们放置到 UI 上。对我来说就是这种情况，我没有更多关于我的嵌套视图的绑定。MainView.xaml 文件中的所有绑定都引用 MainViewModel.cs 中的数据。在查看您的问题时，这会更容易。

出于某种原因，编辑器很笨拙，所以我选择省略任何示例代码，但上述步骤的描述性足以遵循我所采取的步骤。以上是对我有用的。

***总结这个问题的另一种方法***

*   大多数书籍都教授较短的绑定语法
*   当多个数据上下文可用时会发生什么？
*   绑定系统应该如何知道如何解决您的速记绑定表达式。

# java - JSF 2 - 动态菜单项并不总是触发

> ID：10318282
> 
> 赞同：0
> 
> 时间：2012-04-25T14:57:23.407
> 
> 标签：java, jsf-2

我有一个使用 JSF 1.2 的工作网站，它使用动态菜单项。我决定升级到 JSF 2.0，但由于某种原因，我的动态菜单项在我处于导航 bean 未处理的另一个操作的页面上后停止工作。这个 bean 所做的只是控制菜单项的流程。我需要做些什么来保持这些菜单项正常工作吗？我确实必须让我的导航 bean 使用 @ViewScoped，否则即使单击菜单项我也会看到这个问题。我也确实在导航 bean 上实现了 Serializable。

# hadoop - Hadoop分布式缓存

> ID：10318286
> 
> 赞同：0
> 
> 时间：2012-04-25T14:57:33.180
> 
> 标签：hadoop, mapreduce, distributed-cache

我已经阅读了来自 Apache 和 Yahoo 的 DistributedCache 教程。我仍然对一件事感到困惑。假设我有一个要复制到所有数据节点的文件。所以，我 `DistributedCache.addCacheFile(new URI(hdfsPath),job)`在工作驱动程序中使用以使文件可用。然后，我`DistributedCache.getLocalCacheFiles(job)`在我的 Mapper 中调用。

现在，我想根据这个文件的内容在数据节点上创建一个数组，这样每次 map() 运行时，它就可以访问数组的元素。我可以这样做吗？我很困惑，因为如果我读取缓存文件并在 Mapper 类中创建数组，它似乎会为 Mapper 的每个新输入创建数组，而不是每个 Mapper 一次。这部分实际上是如何工作的（即，我应该在哪里/何时创建数组）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:38:07.957

这里混杂了几个概念。Datanode 与 DistributedCache 没有直接关系。它是 MapReduce 层的概念。
希望在映射器之间重用缓存文件中的相同派生与 MR 范例的功能性质有些矛盾。映射器在逻辑上应该是独立的。
您想要的是一种优化，如果映射器的缓存文件的预处理相对昂贵，那么这种优化是有意义的。
您可以在某种程度上通过将预处理数据保存在某个静态变量中来做到这一点，懒惰评估它，并将 hadoop 设置为重用虚拟任务之间的机器。这不是“MR”精神解决方案，但应该有效。
更好的解决方案是将缓存文件预处理到表单中，这样映射器的消耗会很便宜。
让我们假设所有想法都是一种优化 - 否则为每个映射读取和处理文件就可以了。
可以说，如果为每个映射器准备文件比映射处理本身便宜得多，或者比映射器运行开销便宜得多 - 我们很好。
我所说的形式是指文件的格式，它可以非常有效地转换为我们需要的内存结构。例如 - 如果我们需要在数据中进行一些搜索 - 我们可以存储已经排序的数据。它可以节省我们每次排序的时间，通常比从磁盘顺序读取要贵得多
如果在您的情况下它是一些适度数量的属性（比如说数千），我可以假设它们的读取和初始化与单映射器

# javascript - 在javascript中接收只有一个元素的表单数组时出现问题

> ID：10318291
> 
> 赞同：2
> 
> 时间：2012-04-25T14:57:43.257
> 
> 标签：javascript, html, arrays, forms

我收到一个 html 表单。这在数组中有 2 个或更多元素时工作正常，但是当只收到一个元素时，我得到错误 users[t] is null in fireBug?

```
var users = form.elements["uname[]"];

for(t in users) {
  dataString += "User: "+users[t].value+"\n"
} 
```

这解决了它：

```
if( typeof users.value === 'string' ) {
   users = [ users ];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-15T00:59:12.750

*我知道这是一个老问题，但我在寻找其他东西时偶然发现了它。无论如何，我想我会为其他偶然发现这个问题的人提供另一个答案。*

[您可以使用Array.prototype.concat()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)，而不是检查类型以查看它是否为数组，然后选择性地将值封装在新数组中。

它的语法是

```
var new_array = old_array.concat(value1[, value2[, ...[, valueN]]]) 
```

其中任何值都可以是数组或单个值。

在您的特定情况下，您可以从一个空数组开始并连接您的表单输入，无论您获得单个值还是数组，这都将起作用：

```
var users = [].concat(form.elements["uname[]"]); 
```

或者

```
users = [].concat(users); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:00:22.607

您可以检查变量是否为字符串并将其转换为数组：

```
if( typeof users === 'string' ) {
    users = [ users ];
} 
```

对于迭代数组 for-in 应该避免，该语句旨在枚举对象属性。您可以尝试使用更好的循环，例如：

```
var userCount = users.length;
for (var i = 0; i < userCount; i++) {
      dataString += "User: "+users[i].value+"\n"
} 
```

您也可以根据长度进行测试。如果对象是单一的，它将返回`undefined`长度。

```
var userCount = users.length; //Get user count
if ( userCount == undefined ) { //Returned undefined if not an array.
    users = [ users ]; //Convert to array
} 
```

# matlab - 如何在 Matlab 中以更好的方式显示序列号？

> ID：10318292
> 
> 赞同：3
> 
> 时间：2012-04-25T14:58:04.833
> 
> 标签：matlab, number-formatting

例如，我有一个数组：

```
a=[1:5 8:10]; 
```

如果我使用以下方式显示它：

```
disp(['a = ' num2str(a)]); 
```

结果会是这样的

> a = 1 2 3 4 5 8 9 10

它比我需要的太长了。如何让 Matlab 以与我定义的方式相同或接近的方式显示？

更具体地说，如果我以“非正式”方式定义变量，例如：

```
a=[1:3 4:6 8:10] 
```

（通常应该是 1:6 而不是 1:3 4:6）

我只希望 Matlab 以任何一种方式显示：

```
1:3 4:6 8:10    or    1:6 8:10 
```

我也不关心它是否显示变量名或方括号。

搜索但没有发现任何有用的东西。考虑手动解析它，但听起来不是一个聪明的方法。

任何建议都会很有帮助，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:29:00.533

这样做的唯一方法是创建您自己的函数以您想要的格式显示数组。例如，如果您想以压缩方式显示数组中*单调递增*的部分，您可以使用如下函数：

```
function display_array(array)
    str = cellfun(@(n) {num2str(n)}, num2cell(array));
    index = (diff(array) == 1) & ([1 diff(array, 2)] == 0);
    str(index) = {':'};
    str = regexprep(sprintf(' %s', str{:}), '( :)+\s*', ':');
    disp([inputname(1) ' = [' str(2:end) ']']);
end 
```

你会像这样使用它：

```
>> a = [1:5 7 9:11]  %# Define a sample array

a =

     1     2     3     4     5     7     9    10    11     %# Default display

>> display_array(a)
a = [1:5 7 9:11]     %# Condensed display
>> b = [1 2 3 4 4 4 3 2 1];  %# Another sample array
>> display_array(b)
b = [1:4 4 4 3 2 1]  %# Note only the monotonically increasing part is replaced 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:37:55.237

为此，我使用Matlab 文件交换中的[vec2str](http://www.mathworks.com/matlabcentral/fileexchange/26453)。例如：

```
str = vec2str([1 3 5 5 9 8 7 6 5]) 
ans = 
    [1:2:5,5,9:-1:5] 

>> eval(str) 
ans = 
     1 3 5 5 9 8 7 6 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:09:31.900

不可能的。Matlab 很快就抛弃了你的定义。“对象”`a`根本不知道该定义。

# python - Django 用户在现场激活应用程序

> ID：10318293
> 
> 赞同：1
> 
> 时间：2012-04-25T14:58:04.850
> 
> 标签：python, django

实现可以根据用户偏好添加或删除的功能的最佳方法是什么？我想做的是为所有注册用户提供一套标准的应用程序/功能，并允许用户从提供的应用程序列表中添加他们想要的任何额外应用程序。如问题所述，这是 django 特定的问题。但是，有关如何以任何其他语言实现此目的的任何信息都将非常有帮助。我确信那里有很多信息，因为它与在 facebook 上添加应用程序非常相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:22:15.037

不要混淆 django 应用程序（用于将项目拆分为具有类似目的的部分）和更像程序/小部件的 facebook 应用程序。

您是在尝试创建一个允许开发人员创建应用程序的平台，还是将创建所有应用程序？

Django 有一个内置的权限模型，可以与内置的 django 身份验证一起使用。 [https://docs.djangoproject.com/en/dev/topics/auth/#methods](https://docs.djangoproject.com/en/dev/topics/auth/#methods)，您可以为每个应用程序创建一个新权限。将该权限分配给允许与您的应用交互的用户。并在允许用户使用应用程序之前检查权限。还有一些应用程序允许对象级权限。

# javascript - JQuery 附加的 JS DOM 等效项

> ID：10318294
> 
> 赞同：23
> 
> 时间：2012-04-25T14:58:08.667
> 
> 标签：javascript, jquery, dom

JQuery 的标准 DOM 等效项是什么

`element.append("<ul><li><a href='url'></li></ul>")`?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-25T15:00:48.153

我认为你必须扩展 innerHTML 属性才能做到这一点

```
element[0].innerHTML += "<ul><li><a href='url'></a></li></ul>"; 
```

一些解释：

*   [0] 需要，因为`element`它是一个集合
*   += 扩展 innerHTML 并且不覆盖
*   需要关闭`</a>`，因为某些浏览器只允许将有效的 html 设置为 innerHTML

提示：正如@dontdownvoteme 提到的，这当然只会针对集合的第一个节点`element`。但是由于 jQuery 的性质，该集合可以包含更多条目

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-02-15T15:13:22.370

在纯 JavaScript 中复制 JQuery 附加方法的正确和最简单的方法是使用“insertAdjacentHTML”

```
 var this_div = document.getElementById('your_element_id');
    this_div.insertAdjacentHTML('beforeend','<b>Any Content</b>'); 
```

更多信息 - [MDN insertAdjacentHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-25T15:02:06.773

使用 DOM 操作，而不是 HTML：

```
let element = document.getElementById('element');

let list = element.appendChild(document.createElement('ul'));
let item = list.appendChild(document.createElement('li'));
let link = item.appendChild(document.createElement('a'));

link.href = 'https://example.com/';
link.textContent = 'Hello, world';
```

```
<div id="element"></div>
```

这具有不重新创建现有内容的节点的重要优势，例如，这将删除附加到它们的任何事件侦听器。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-25T15:01:10.353

来自 jQuery 源代码：

```
append: function() {
    return this.domManip(arguments, true, function( elem ) {
        if ( this.nodeType === 1 ) {
            this.appendChild( elem ); //<====
        }
    });
}, 
```

请注意，为了使其正常工作，您需要从字符串构造 DOM 元素，这是使用 jQuery`domManip`函数完成的。

jQuery 1.7.2[源代码](http://code.jquery.com/jquery-1.7.2.js)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T14:59:53.677

```
element.innerHTML += "<ul><li><a href='url'></li></ul>"; 
```

# php - 狮身人面像搜索在我的 wamp 环境中不起作用？

> ID：10318299
> 
> 赞同：0
> 
> 时间：2012-04-25T14:58:31.783
> 
> 标签：php, mysql, search, error-handling, sphinx

您好我尝试在我的 WAMP 环境中配置 sphinx 搜索。

这是我的 sphinx.conf 文件

```
#
# Minimal Sphinx configuration sample (clean, simple, functional)
#

source combinedobject
{
    type            = mysql

    sql_host        = localhost
    sql_user        = root
    sql_pass        = root
    sql_db          = digi_inter
    sql_port        = 3306  # optional, default is 3306

    sql_query       = \
        SELECT file_id, file_idas int_attr, object_type_id, searchtext from image_gallery ;

    sql_attr_uint           = int_attr
    sql_attr_uint           = object_type_id
    sql_field_string        = searchtext

    sql_query_info      = SELECT * FROM image_gallery WHERE file_id=$id
}

index combinedobject
{
    source          = combinedobject
    path            = D:\PHP_Projects\DigiInternational\sphinx\data\combinedobject
    docinfo         = extern
    charset_type    = sbcs
}

indexer
{
    mem_limit       = 32M
}

searchd
{
    listen          = 9312
    log             = D:\PHP_Projects\DigiInternational\sphinx\log\searchd.log
    query_log       = D:\PHP_Projects\DigiInternational\sphinx\log\query.log
    pid_file        = D:\PHP_Projects\DigiInternational\sphinx\log\searchd.pid
    max_matches     = 1000
    compat_sphinxql_magics  = 1
} 
```

我在 api 文件夹中创建了这种 php 文件

```
<?php
$searchName = "food";
require_once('sphinxapi.php');
//Sphinx
$s = new SphinxClient();
$s->setServer("localhost", 8080);
$s->setMatchMode(SPH_MATCH_EXTENDED2);
$result = $s->query("@searchtext $searchName");
print_r($result);

?> 
```

通过命令提示符 searchtext 正在显示结果。但是对于 file_id 和 object_type_id 它没有显示任何结果。

使用 php 没有显示任何内容。我的狮身人面像版本是 sphinx-0.9.8-win32。任何机构都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:31:02.570

啊! 所以服务器正在监听端口 9312

```
listen          = 9312 
```

那你为什么要尝试连接到8080？

```
$s->setServer("localhost", 8080); 
```

# javascript - Jquery 插件菜单 - 绑定或实时

> ID：10318301
> 
> 赞同：0
> 
> 时间：2012-04-25T14:58:33.873
> 
> 标签：javascript, jquery

我正在学习如何做我自己的 Jquery 插件，我从一些基本的东西开始。

你可以在这里看到我的小提琴：http: [//jsfiddle.net/denislexic/8YBM6/8/](http://jsfiddle.net/denislexic/8YBM6/8/)

**这需要被绑定**，即某些时候元素会被 AJAX 加载，所以插件仍然需要工作。（在小提琴中我添加了一个复制内容的按钮，所以我可以测试它，但没有运气......）

我通常只是活着或继续。我正在努力学习和理解。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:56:00.877

这是一个更新的小提琴：http: [//jsfiddle.net/aR8RQ/1/](http://jsfiddle.net/aR8RQ/1/)

我所做的更改包括：

我正在为“头像”元素使用事件委托。以前，事件是使用 .each() 绑定的，它只会在插件的初始调用中绑定事件。

我正在使用 .data() 来存储菜单的状态（无论是打开还是关闭），并在文档上添加了一些事件绑定来处理关闭菜单。

我添加了评论，希望对您有所帮助！我认为这可以满足您最初要求的一切（例如：如果您单击除此之外的任何内容，则隐藏菜单）。您仍然可以做一些工作（例如，当您“复制”时，您可以更优雅地处理菜单的“关闭”方法！）

希望这会有所帮助！:)

# ios - 在ipad（ios）上格式化日期后出现未知字符

> ID：10318302
> 
> 赞同：1
> 
> 时间：2012-04-25T14:58:34.710
> 
> 标签：ios, ipad, core-plot, nsdateformatter

我正在使用 core-plot 绘制条形图。我在 x 轴上显示了日期。我使用了以下代码：

```
NSDateFormatter * formatter=[[NSDateFormatter alloc]init];
[formatter setDateFormat:@"dd MMM yy"];

double tickLocation=0.5;
NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[valuesArray count]];
for ( HistoryIndividualValueBean * value in valuesArray)
{
    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:[formatter stringFromDate:value.submittedTime] textStyle:x.labelTextStyle];
    newLabel.tickLocation = [[NSNumber numberWithDouble:tickLocation++] decimalValue];
    newLabel.offset       = x.labelOffset + x.majorTickLength;
    newLabel.rotation     = M_PI_2;
    [customLabels addObject:newLabel];
    [newLabel release];
}

[formatter release];

x.axisLabels = [NSSet setWithArray:customLabels]; 
```

这在 iPhone 上运行良好。但是在 ipad 上，它会在日期中显示奇怪的字符（我在上面已经格式化了）。请参考这张图片：

![在此处输入图像描述](../Images/8f7da585173b29b73ab73b0613f9d630.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:11:05.700

# sql-server - first_value' 不是可识别的内置函数名

> ID：10318306
> 
> 赞同：1
> 
> 时间：2012-04-25T14:58:52.533
> 
> 标签：sql-server

您好我正在尝试我的查询作为贝洛。请查看两个不同版本的查询及其错误消息。

```
SELECT first_value(col1) AS 'inv',col2 
FROM dbo.table  
--first_value' is not a recognized built-in function name.  

SELECT dbo.first_value(col1) AS 'inv',col2 
FROM dbo.table  
--Cannot find either column "dbo" or the user-defined function or aggregate "dbo.first", or the name is ambiguous.

SELECT first_value(col1) AS 'inv',col2 
FROM dbo.table 
GROUP BY col2  
--'first' is not a recognized built-in function name.

SELECT dbo.first_value(col1) AS 'inv',col2 
FROM dbo.table 
GROUP BY col2  
--Cannot find either column "dbo" or the user-defined function or aggregate "dbo.first", or the name is ambiguous. 
```

请任何帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-25T15:06:42.423

如果您尝试从表中提取顶部/第一条记录，则需要指定将行定义为第一/顶行的条件

```
SELECT top 1  col1 AS inv,col2  
FROM dbo.table 
ORDER BY col1 --or whatever criteria you need here 
```

据我所知，first_value 似乎是一个 MS SQL Server 2012 函数，它还需要一个排序子句 - [http://msdn.microsoft.com/en-us/library/hh213018.aspx](http://msdn.microsoft.com/en-us/library/hh213018.aspx)

# c# - 避免更新对象属性的冗余

> ID：10318308
> 
> 赞同：1
> 
> 时间：2012-04-25T14:59:14.920
> 
> 标签：c#

当我实例化一个新实体时，它看起来像这样：

```
var myEntity = new MyEntity() 
{
    Field1 = "myValue",
    Field2 = "myOtherValue",
    ...
} 
```

这避免了不得不写`myEntity.Field1`很多次。

但是当我必须更新多个属性时，我不知道有什么办法可以避免代码的重复。所以目前，我确实喜欢这样：

```
myEntity.Field1 = "myNewValue";
myEntity.Field2 = "myOtherNewValue";
... 
```

C# 是否允许更简洁的方式更新多个属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:02:05.190

查看[带有关键字等效的 C#](http://omaralzabir.com/c__with_keyword_equivalent/)。这有点草率，但它是最接近[VB.NET 的 With 语句](http://msdn.microsoft.com/en-us/library/wc500chb%28v=vs.80%29.aspx)。

另请查看此博客文章：[C# 中“With”语句的简单等价物](http://anaykamat.com/2009/08/09/simple-equivalent-of-with-statement-in-c-sharp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:17:54.893

继续上面@daryal 的评论，您可以创建一个所有参数都是可选的更新方法：

```
public void UpdateEntity(string Field1 = null, string Field2 = null, string Field3 = null) 
{
  this.Field1 = Field1 ?? this.Field1;
  this.Field2 = Field2 ?? this.Field2;
  this.Field3 = Field3 ?? this.Field3;
} 
```

然后使用命名参数调用它：

```
e.UpdateEntity(Field1: "foo", Field3: "fiz"); 
```

这不是最干净的解决方案，而是另一种选择。如果我一直在做这样的事情，我可能会选择@Brian 分享的“C# with keyword equivalent”。

**注意：**此解决方案需要 C# 4。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:01:54.907

没有。VB.NET 有[With 语句](http://msdn.microsoft.com/en-us/library/wc500chb%28v=vs.80%29.aspx)，但在 C# 中没有等价物。

# perl - 关于“未定义子例程”的 Perl 模块错误

> ID：10318313
> 
> 赞同：6
> 
> 时间：2012-04-25T14:59:26.237
> 
> 标签：perl, module, cygwin

我正在尝试使用一个名为[Math::Counting](http://search.cpan.org/perldoc/Math%3a%3aCounting)的模块：

```
#!/usr/bin/perl 

use strict;
use warnings;
use Math::Counting;

my $f = factorial(3);
print "$f\n"; 
```

但是，当我运行它时，出现以下错误

```
$ perl UsingModules.pl
Undefined subroutine &main::factorial called at UsingModules.pl line 8. 
```

似乎该功能`factorial`没有被导出，但为什么呢？

当我使用以下

```
my $f = Math::Counting::factorial(3); 
```

而不是上面的，它工作得很好，但我很好奇为什么不能导出这个函数。

我`perl`在 Cygwin 上使用 v5.10.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T15:13:22.530

[Math::Counting](http://search.cpan.org/perldoc/Math%3a%3aCounting)看起来有点傻（我的意思是*学生*模式与*工程*模式？）模块提供的*真正的*`bfact`阶乘函数是对`Math::BigInt::bfac`. 所以，只需使用[Math::BigInt](http://search.cpan.org/perldoc/Math%3a%3aBigInt)。

```
#!/usr/bin/env perl

use strict; use warnings;
use Math::BigInt();

print Math::BigInt->bfac('300'), "\n"; 
```

输出：

```
30605751221644063603537046129726862938858880417357699941677674125947653317671686
74655152914224775733499391478887017263688642639077590031542268429279069745598412
25476930271954604008012215776252176854255965356903506788725264321896264299365204
57644883038890975394348962543605322598077652127082243763944912012867867536830571
22936819436499564604981664502277165001851765464693401122260347297240663332585835
06870150169794168850353752137554910289126407157154830282284937952636580145235233
15693648223343679925459409527682060806223281238738388081704960000000000000000000
000000000000000000000000000000000000000000000000000000000
```

*不*，[我没有验证结果](http://www.wolframalpha.com/input/?i=300!)。

正如其他人所指出的，`Math::Counting`有：

```
our @ISA = qw(Exporter);
our @EXPORT = qw(
    factorial permutation combination
    bfact     bperm       bcomb
); 
```

但没有`require` [Exporter](http://perldoc.perl.org/Exporter.html)。

其实这个模块没有必要*继承*Exporter。一个简单的：

```
use Exporter 'import'; 
```

就够了。此外，默认情况下确实不需要污染该模块用户的命名空间，因此它应该具有：

```
our @EXPORT = ();
our @EXPORT_OK = qw(
    factorial permutation combination
    bfact     bperm       bcomb
); 
```

否则，定义的意义`%EXPORT_TAGS`何在？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-25T15:29:03.820

模块中存在错误。[Math::Counting](http://search.cpan.org/perldoc/Math%3a%3aCounting) `ISA` [Exporter](http://search.cpan.org/perldoc/Exporter)，但`Math::Counting`不加载`Exporter`。

解决方法：您可以[要求](http://perldoc.perl.org/functions/require.html)或手动[使用。](http://perldoc.perl.org/functions/use.html) `Exporter`

更好：向模块作者提交错误，提供测试用例。

### 评论：

*哦，很有趣。模块作者确实测试了他的功能，但是`Test::More`拉入了`Exporter`，这意味着模块源代码中的这个遗漏没有被注意到。*

### 更新：

[Math::Counting](http://search.cpan.org/perldoc/Math%3a%3aCounting) 0.0904 已经发布，解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T15:26:33.110

似乎[Math::Counting](http://search.cpan.org/perldoc/Math%3a%3aCounting)丢失了`require Exporter;`，因此没有一个函数被导出到您的命名空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T15:45:33.300

在收到一个好心人向 CPAN 提交了关于我忘记的 require 语句的错误报告后，我修复了模块导出，包括关于“污染命名空间”的评论。

`Math::BigInt->bfac()`另外，我在文档中添加了一条注释，它是用于现实世界应用程序的“瘦包装器” 。当我完成它时，我找不到用于排列或组合的简单计算。现在有很多...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T15:05:21.633

似乎 Math::Counting 模块在您使用调用时没有导出阶乘方法`use Math::Counting`。

CPAN 页面执行以下操作

```
use Math::Counting ':student'; 
```

然后将阶乘方法导出到您的命名空间中，您可以使用它而无需添加整个包名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T15:58:13.283

查看 Math::Counting 的源代码，看看它是什么版本。您可以通过执行以下操作找到源的位置：

```
prompt> perldoc -l Math::Counting 
```

通过查看模块的`$VERSION`变量，您还可以在大约 90% 的时间内找到模块的版本：

```
use Math::Dumper;
print "The version of Math::Dumper is $Math::Dumper::VERSION\n"; 
```

我刚刚下载了 0.0902 版本，以下程序运行良好：

```
#! /usr/bin/env perl
#
use strict;
use warnings;
use feature qw(say);

use Math::Counting;

say $Math::Counting::VERSION;
say factorial(6); 
```

我注意到在这个版本中，他有：

```
our @ISA = qw(Exporter);
our @EXPORT = qw(
    factorial permutation combination
    bfact     bperm       bcomb
); 
```

所以，看起来作者在这个特定版本中自动导出了他们所有的子例程。作者还定义了两组导出标签`:student`，和`big`。

它可能在早期版本中，他没有`@EXPORT`定义，但使用`@EXPORT_OK`（这是最好的），你必须这样做：

```
use Match::Counting qw(:student); 
```

或者

```
use Math::Counting qw(factorial); 
```

# macos - 如何将 NSColorPicker 添加到应用程序的主窗口？

> ID：10318314
> 
> 赞同：2
> 
> 时间：2012-04-25T14:59:27.780
> 
> 标签：macos, cocoa

我正在构建一个应用程序来根据用户选择的颜色生成一组颜色。

Mac OS X 上的默认颜色选择是打开一个包含多个 NSColorPicker 的 NSColorPanel。但是，由于颜色选择过程是用户与应用程序的主要交互，因此最好避免额外的点击和面板弹出，而采用更直接的方式。

那么，有没有办法将 NSColorPicker 对象添加到窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T11:09:54.490

我知道这是一个较老的问题，但请查看`NSColorWell`. [从文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DrawColor/Tasks/ChoosingColors.html)：

```
NSColorWell is an NSControl for selecting and displaying a single color value. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:45:21.273

有趣的问题。

我强烈怀疑它（但很想被证明是错误的）。NSColorPickers 不是 NSControls（也不是 NSCells），所以没有干净的包装器可以插入到窗口中。

即使您要实例化一个 NSColorPanel 并获取对其 contentView 的引用并将其（以及所有定义颜色选择控件的内容）复制到您自己的窗口......也没有明显的方法来获取颜色值。NSColorPickers 是插件，所以你不能预见 colorPicker 的控件。

我能看到的唯一其他方法（这是一个延伸）是直接手动加载[NSColorPickers 插件](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DrawColor/Tasks/AddingColorPickers.html#//apple_ref/doc/uid/20000793-BAJBFGED)。我不知道这会有多成功。

提交错误报告并请求该功能？

# google-maps - 如何隐藏或显示 Google 地图图层？

> ID：10318316
> 
> 赞同：5
> 
> 时间：2012-04-25T14:59:48.037
> 
> 标签：google-maps, google-maps-api-3, weather, weather-api, google-weather-api

我准备了一个简化的测试用例和一个屏幕截图。

我想我错过了一点点，只有几行代码。

我的 JavaScript Google Map 中有 2 个叠加层（[天气和云](https://developers.google.com/maps/documentation/javascript/layers#WeatherLayer)），并且希望在单击相应的复选框时隐藏或显示它们：

![在此处输入图像描述](../Images/93262da08bc72a5e77af3b8f6e84c400.png)

这是测试用例，只需将其粘贴到 .html 文件中即可运行：

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
    h1,p { 
        text-align: center; 
    }

    #map { 
        width: 700px; 
        height: 400px; 
        margin-left: auto; 
        margin-right: auto; 
        background-color: #CCCCFF; 
    }
</style>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&language=de&libraries=weather"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">

$(function() {
    findCity('Berlin');

    $('#weather_box,#clouds_box').click(function(){
        alert('How to hide/show layers? Checked: ' + $(this).is(':checked'));
    });
});

function createMap(center) {
    var opts = {
        zoom: 6,
        center: center,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    return new google.maps.Map(document.getElementById('map'), opts);
}

function findCity(city) {
    var gc = new google.maps.Geocoder();
    gc.geocode({address: city}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var pos = results[0].geometry.location;
            var map = createMap(pos);
            var marker = new google.maps.Marker({
                map: map, 
                title: city,
                position: pos,
                animation: google.maps.Animation.DROP
            });
            var weatherLayer = new google.maps.weather.WeatherLayer({
                temperatureUnits: google.maps.weather.TemperatureUnit.CELSIUS
            });
            weatherLayer.setMap(map);
            //var cloudLayer = new google.maps.weather.CloudLayer();
            //cloudLayer.setMap(map);
        }
    });
}
</script>
</head>
<body>
<h1>Berlin</h1>
<p>Show:
<label><input type="checkbox" id="weather_box" checked>weather</label>
<label><input type="checkbox" id="clouds_box">clouds</label>
</p>
<div id="map"></div>
</body>
</html> 
```

**更新：**谢谢，这里是每个人的工作版本

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
    h1,p { 
        text-align: center; 
    }

    #map { 
        width: 700px; 
        height: 400px; 
        margin-left: auto; 
        margin-right: auto; 
        background-color: #CCCCFF; 
    }
</style>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&language=de&libraries=weather"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">

var map;
var WeatherLayer;
var CloudsLayer;

$(function() {
    findCity('Berlin');

});

function createMap(center) {
    var opts = {
        zoom: 6,
        center: center,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    return new google.maps.Map(document.getElementById('map'), opts);
}

function findCity(city) {
    var gc = new google.maps.Geocoder();
    gc.geocode({address: city}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var pos = results[0].geometry.location;
            map = createMap(pos);
            var marker = new google.maps.Marker({
                map: map, 
                title: city,
                position: pos,
                animation: google.maps.Animation.DROP
            });
            weatherLayer = new google.maps.weather.WeatherLayer({
                temperatureUnits: google.maps.weather.TemperatureUnit.CELSIUS
            });
            weatherLayer.setMap(map);
            cloudsLayer = new google.maps.weather.CloudLayer();
            //cloudsLayer.setMap(map);

            $('#weather_box').click(function(){
                weatherLayer.setMap($(this).is(':checked') ? map : null);
            });

            $('#clouds_box').click(function(){
                cloudsLayer.setMap($(this).is(':checked') ? map : null);
            });

            $('#weather_box,#clouds_box').removeAttr('disabled');
        }
    });
}
</script>
</head>
<body>
<h1>Berlin</h1>
<p>Show:
<label><input type="checkbox" id="weather_box" disabled="true" checked>weather</label>
<label><input type="checkbox" id="clouds_box" disabled="true">clouds</label>
</p>
<div id="map"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T15:21:40.803

您可以使用以下方法隐藏/显示图层`setMap`：

```
if ($(this).is(':checked'))
    weatherLayer.setMap(map); // show
else
    weatherLayer.setMap(null); // hide 
```

请参阅工作示例： http: [//jsfiddle.net/EeVUr/2/](http://jsfiddle.net/EeVUr/2/)（删除了第二个复选框，因为您现在只有一层。但是您可以轻松创建两个不同的层并切换它们。）

# jquery - 使用鼠标单击而不是鼠标悬停在 JQuery Smooth Div Scroll 上移动图像

> ID：10318329
> 
> 赞同：0
> 
> 时间：2012-04-25T15:00:32.400
> 
> 标签：jquery, smooth-scrolling

很棒的插件！我试图找出一种方法让滑块中的图像仅在鼠标单击时移动，而不是在鼠标悬停时移动。有没有办法做到这一点？

谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:04:43.043

我可以告诉你的是你需要编辑`jquery.smoothDivScroll-1.2.js`尝试搜索`.bind("mouseover"`并更改`mouseover`为`click`

# css - 如何将样式表添加到 JSDOM

> ID：10318330
> 
> 赞同：12
> 
> 时间：2012-04-25T15:00:41.770
> 
> 标签：css, node.js, jsdom

我目前正在开发一个项目，该项目需要我通过 JSDOM 将计算样式发送到浏览器。我目前正在寻找一种将一些基本 CSS 注入 JSDOM 的方法，以便它可以计算正确的内联样式（是的，我知道这很糟糕）。

根据我的发现，我可以使用 JSDOM Level 2，但是从那里我找不到任何关于如何注入样式的文档。

这就是我到目前为止所拥有的；

```
 var document = jsdom.jsdom('<!DOCTYPE html><html><head></head><body id="abody" ></body></html>', jsdom.level(2, 'style'), {
        features : {
            FetchExternalResources : ['script', 'css'],
            QuerySelector : true
        }
    }); 
```

我一直在将 css 插入到 head 标签中，但无济于事。而且我知道我也可能做错了上面的代码。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T16:46:15.017

好吧，这听起来有点愚蠢，但这就是我所做的：

```
 var path = require('path');
    var fs = require('fs');
    var mainCss = fs.readFileSync(path.normalize(__dirname + "web_main.css"), 'utf8');
    var document = jsdom.jsdom('<!DOCTYPE html><html><meta http-equiv="content-type" content="text/html; charset=utf-8"><head></head><body id="abody" ></body></html>', jsdom.level(3, 'index'), {
        features : {
            FetchExternalResources : ['script', 'css'],
            QuerySelector : true
        }
    });     
    var window = document.createWindow();
    var head = document.getElementsByTagName('head')[0];
    style = document.createElement("style");
    style.type = 'text/css';
    style.innerHTML = mainCss;
    head.appendChild(style); 
```

所以基本上我所做的只是将级别移动到 3 索引，而不是直接将它放在起始 html 中，而是在之后附加它。

它非常简单，我希望它可以帮助其他人。

# jquery - 使用 jQuery 的复选框过滤器

> ID：10318332
> 
> 赞同：0
> 
> 时间：2012-04-25T15:00:46.667
> 
> 标签：jquery, filter, checkbox

我正在尝试使以下代码工作，但是我的 jQuery 技能太基础了，我找不到问题

此代码旨在根据复选框数组过滤列表

该代码很可能没有错误

问题肯定来自一些愚蠢的事情，比如没有正确声明、没有在正确的条件下进行测试或没有调用所需的脚本

太感谢了！

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("#options input.type_check").click(function() {
        if($(this).is(':checked')) {
            $("#events li."+$(this).attr('id')).removeClass('type_hidden');
            if(!$("#events li."+$(this).attr('id')).hasClass('start_hidden')) {
                $("#events li).not(".type_hidden, .start_hidden").slideDown();
            }
        } else {
            $("#events li."+$(this).attr('id')).addClass('type_hidden');
            $("#events li."+$(this).attr('id')).slideUp();
        }
        return false;
    });

    $("#options input.start_check").click(function() {
        if($(this).is(':checked')) {
            $("#events li."+$(this).attr('id')).removeClass('start_hidden');
            if(!$("#events li."+$(this).attr('id')).hasClass('type_hidden')) {
                $("#events li).not(".type_hidden, .start_hidden").slideDown();    
            }
        } else {
            $("#events li."+$(this).attr('id')).addClass('start_hidden');
            $("#events li."+$(this).attr('id')).slideUp();
        }
        return false;
    });
});
</script>
</head>
<body>
<p>Types:</p>
<div><input name="type[]" type="checkbox" id="type_0" value="0" class="type_check" checked="checked" /><label for="type_0">Type 0</label></div>
<div><input name="type[]" type="checkbox" id="type_1" value="1" class="type_check" checked="checked" /><label for="type_1">Type 1</label></div>
<div><input name="type[]" type="checkbox" id="type_2" value="2" class="type_check" checked="checked" /><label for="type_2">Type 2</label></div>
<div><input name="type[]" type="checkbox" id="type_3" value="3" class="type_check" checked="checked" /><label for="type_3">Type 3</label></div>
<div><input name="type[]" type="checkbox" id="type_4" value="4" class="type_check" checked="checked" /><label for="type_4">Type 4</label></div>

<p>Starts:</p>
<div><input name="start[]" type="checkbox" id="start_072009" value="072009" class="start_check" checked="checked" /><label for="type_072009">July 2009</label></div>
<div><input name="start[]" type="checkbox" id="start_082009" value="082009" class="start_check" checked="checked" /><label for="type_082009">August 2009</label></div>
<div><input name="start[]" type="checkbox" id="start_092009" value="092009" class="start_check" checked="checked" /><label for="type_092009">September 2009</label></div>
<div><input name="start[]" type="checkbox" id="start_102009" value="102009" class="start_check" checked="checked" /><label for="type_102009">October 2009</label></div>

<p>Events</p>
<ul id="events">
    <li id="a1768" class="type_0 start_072009">Event 1</li>
    <li id="a2190" class="type_1 start_072009">Event 2</li>
    <li id="a2191" class="type_2 start_072009">Event 3</li>
    <li id="a1864" class="type_2 start_082009">Event 4</li>
    <li id="a1679" class="type_3 start_082009">Event 5</li>
    <li id="a2042" class="type_0 start_092009">Event 6</li>
    <li id="a1717" class="type_4 start_092009">Event 7</li>
    <li id="a1917" class="type_4 start_092009">Event 8</li>
    <li id="a1767" class="type_4 start_092009">Event 9</li>
    <li id="a1866" class="type_2 start_102009">Event 10</li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T00:58:51.017

你需要一些东西来过滤结果取决于复选框
检查它
[ht​​tp://jsfiddle.net/ag263ms9/](http://jsfiddle.net/ag263ms9/)

**HTML**

```
<div class="tags">
  <label><input id="ss" type="checkbox" rel="arts" /> Arts </label><label>
  <input id="aa" type="checkbox" rel="computers" /> Computers </label><label>
  <input type="checkbox" rel="health" /> Health </label><label>
  <input type="checkbox" rel="video-games" /> Video Games </label>
</div>
<p></p>
<p></p>
<hr />
<div id="sso">
  Click to uncheck #Computers</div>
<p></p>
<p></p>
<hr />
<ul class="results">
  <li class="arts computers">Result 1 </li>
  <li class="video-games">Result 2 </li>
  <li class="computers health video-games">Result 3 </li>
  <li class="arts video-games">Result 4 </li>
</ul> 
```

**jQuery**

```
 $(document).ready(function () {

    $(':checkbox').click(function () {
        if ($(':checkbox:checked').length > 3) {
            alert('you can not check more than 3 checkboxes');
            $(this).prop('checked', false);
        }
    });
}) $('div.tags').delegate('input[type=checkbox]', 'change', function () {
    var $lis = $('.results > li'),
    $checked = $('input:checked');

    if ($checked.length) {
        var selector = $checked.map(function () {
                return '.' + $(this).attr('rel');
            }).get().join('');
        var $results = $lis.hide().filter(selector);

        if ($results.length > 0) {
            $('.no-results-found').remove();
            $results.show();
        } else {
            $('.results').append('<li class="no-results-found">No results found.</li>');
        }
    } else {
        $lis.show();
    }

    //click to uncheck

    $('#sso').on('click', function (ev) {
        $("#aa").prop("checked", false);
        var $results = $lis.show().filter(selector);
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:46:25.040

在您的代码中，您有这一行

```
 $("#events li).not(".t......... 
```

更改：

```
 $("#events li").not(".t 
```

# c# - 无法在泛型方法中将类型更改为可为空

> ID：10318334
> 
> 赞同：5
> 
> 时间：2012-04-25T15:01:00.103
> 
> 标签：c#, generics, .net-3.5, casting, nullable

我正在创建一个通用转换器

这是通用转换器的示例代码

```
bool TryReaderParse<TType>(object data, out TType value)
{
    value = default(TType);
    Type returnType = typeof(TType);
    object tmpValue = null;

    if (returnType == typeof(DateTime))
    {
        tmpValue = StringToDatetime(data.ToString());
    }
    else if (returnType == typeof(DateTime?)) // THIS IF FIRES
    {
        tmpValue = StringToNullableDatetime(data.ToString());
    }

    value = (TType)Convert.ChangeType(tmpValue, returnType);  // THROWS
}

public DateTime? StringToNullableDatetime(string date)
{
    DateTime? datetime = null;
    if (!string.IsNullOrEmpty(date))
    {
        datetime = DateTime.Parse(date, new CultureInfo(Resources.CurrentCulture));
    }

    return datetime;
} 
```

这就是我使用它的方式：

```
void foo()
{
    DateTime? date = null;
    TryReaderParse<DateTime?>("25/12/2012", out date);
} 
```

抛出的异常表示它无法从 转换`DateTime`为`Nullable<DateTime>`。既然该方法创建并返回一个可为空的类型，那么为什么转换会失败呢？

最后，在这个特定的示例中，我想要一个可为空的 DateTime。

**编辑**问题是`StringToNullableDatetime`方法返回 a`Datetime?`并且强制转换说不能从`Datetime`

由于该`StringToNullableDatetime`方法返回一个可以为空的日期时间，怎么可能`Convert.ChangeType`看不到传递的参数是可以为空的呢？

附言。我读过[这样](https://stackoverflow.com/questions/785358/nullable-type-is-not-a-nullable-type)一个相反的答案（从可为空的转换）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-25T15:23:48.950

> 抛出的异常表示它无法从 转换`DateTime`为`Nullable<DateTime>`。既然该方法创建并返回一个可为空的类型，那么为什么转换会失败呢？

好问题。这失败了，因为*没有装箱的 nullable 之类的东西*。当您将 a 转换为`DateTime?`时`object`，您将获得一个空引用（如果 a`DateTime?`为 null），或者您获得装箱*值*a `DateTime`。你永远不会得到一个盒装的可空结构；哪有这回事。

因此，您最终会在该框中获得 null 或有效的 DateTime。然后，您告诉 Convert 将其转换为可为空的 DateTime，而 Convert 不知道该怎么做。

**我的建议是你完全放弃这条攻击线**；这段代码是对泛型的滥用。任何时候你对泛型的特定类型进行切换，你的代码就不再是*泛型*的，你可能做错了。如果你想为日期时间做一个“尝试”风格的方法，那么只需写下：

```
DateTime? TryReadDateTime(object data)
{
    ... return null if the object cannot be read as a datetime ...
} 
```

为您打算阅读的*每种*类型编写这样的方法。用户更愿意写：

```
DateTime? d = TryReadDateTime(data);
if (d != null) ... 
```

比

```
DateTime d;
bool b = TryRead<DateTime>(data, out d);
if (b) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:05:31.660

从[文档](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)中，如果出现以下情况，此行将出错：

> value 为 null，conversionType 为值类型

`Nullable<T>`是一个结构，因此是一个值类型，因此如果您的值为 null，则不能使用此方法调用。您已经单独处理日期，那么为什么还要`ChangeType`在这些情况下使用呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:20:20.497

可空值、泛型和装箱交互的方式很奇怪。您最好定义两种方法：

```
bool TryReaderParse(object data, out TType value);
bool TryReaderParse(object data, out TType? value) where TType : struct;

```

在第二种方法中，您的代码可以简单地生成 a`TType`并将其分配给`TType?`没有困难。

# xslt - 识别 XSLT 中的第一个循环运行

> ID：10318338
> 
> 赞同：27
> 
> 时间：2012-04-25T15:01:12.813
> 
> 标签：xslt, functional-programming, foreach

我对 XSLT 很陌生，可能从错误的角度看待我的问题——来自 C++ 和 Java 等语言。我希望有人可以帮助我。

我想在 XSLT 中进行循环调用 (xsl:for-each) 并在第一次运行循环时做一些特定的事情。在其他语言中，我会为此使用状态变量，但变量不能改变它们在 XSLT 中的值，正如我所学到的，那么我该如何解决这个问题呢？这就是我想要做的。if 子句中的大写部分当然是假的，代表我的问题。

```
<xsl:for-each select="browser/value">
 <xsl:if test="FIRST TIME IN LOOP">
  do something once
 </xsl:if>

 <xsl:value-of select="current()" />
</xsl:for-each> 
```

非常感谢！亨里克

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-25T15:31:49.227

我认为最简单的方法是检查当前节点的位置。它也比检查树中是否存在前面的*值*元素更快（如果`xsl:sort`添加到循环中仍然可以工作）：

```
<xsl:for-each select="browser/value">
  <xsl:if test="position()=1">
    do something here
  </xsl:if>
  <xsl:value-of select="blah"/>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T17:42:40.707

尽量避免想到“时间”。没有第一次，因为 XSLT 执行没有及时排序。但是输入序列中有第一项，您可以通过测试 position()=1 来判断何时处理序列中的第一项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T15:03:25.887

这就是你现在的做法——你需要停止将思维作为一个过程，而开始以递归方式进行思维。

（修改的）

```
 <xsl:for-each select="browser/value">
      <xsl:if test="not(preceding::value[parent::browser])">
                first post!
      </xsl:if>
      <xsl:value-of select="blah"/>
  </xsl:for-each> 
```

即，如果它是第一个，那么在它之前就什么都没有。但是，可能还有其他方法可以在循环之外执行此操作

# ios - 使用带有 NSURLConnection 的块时需要 @synchronize 对变量的访问吗？

> ID：10318342
> 
> 赞同：1
> 
> 时间：2012-04-25T15:01:26.700
> 
> 标签：ios, nsurlconnection

我有一个高级类，它通过使用其他类来建立多个连接（顺序地，而不是并行地），而其他类又使用一个 NSURLConnection。

其中一个辅助类下载一组项目，它通过委托协议作为 NSArray 传递给高级类。高级类有自己的 NSArray 并将下载的项目添加到它的数组中。

我在继承层次结构中有几个类，每个类负责下载或上传不同的内容，所有这些都由为每个类实现协议的高级类控制。但是我认为在这个继承层次结构中有几个类可能有点过头了，我正在考虑让事情变得更简单，并且想知道是否可以减少它而不是有几个对象，并通过高级类为它们提供行为来获得不同要在内容下载时执行的块。

例如，高级类将提供代码来解析和创建作为块下载的 NSArray。

在草图伪形式中：

```
@interface highLevelClass : NSObject
@property (strong, nonatomic) NSArray *theArray;
@property (strong, nonatomic) downloadingClass *theDownloader;
- (void) doDownload;
@end

@interface downloadingClass : NSObject
@property (strong, nonatomic) NSURLConnection *connection;
- (void) downloadArrayWithBlock:(void(^)()) theBlock;
@end

- (void) doDownload {
    [theDownloader: downloadArrayWithBlock:^ {
       [self.theArray appendObject: someObject]; 
     }
}

downloading class would execute the block in its implementation of NSURLConnectionDelegate:connectionFinishedLoading. 
```

首先我假设 highlevelClass 的 theArray 需要使用 __block 来声明？

但我的主要问题是：我是否需要做任何事情，如果需要做什么以及如何保护 theArray 免受可能的同时访问？

highLevelClass 可能会从 theArray 中删除一个项目以响应计时器事件或用户操作。我的代码没有使用任何线程，因此其中的所有内容都可以是非原子的，并且不需要防止同时更新。但是，我相信 NSURLConnection 在内部会产生一个新线程，因此如果 theArray 在传递给 downLoading 类的块内，是否有危险的可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:48:04.743

如果您自己不产生任何线程，则无需对锁采取任何预防措施。虽然 NSURLConnection 确实会产生自己的线程来执行异步下载，但它也会注意在开始下载的线程上发送其所有委托消息。在您的情况下，由于您在主线程上开始所有下载，您知道您的所有委托消息也将在主线程上收到。

而且，至于说明`__block`符，您只需要如果块将更改*指向*该数组的指针，而不是它指向的数组。

# android - 在 onLocationChanged 期间删除 itemizedOverlay

> ID：10318343
> 
> 赞同：0
> 
> 时间：2012-04-25T15:01:34.687
> 
> 标签：android, itemizedoverlay

我想要实现的是在地图上显示两种标记。

1) 显示从数据库中提取的事件的红色标记（完成 - itemizedOverlay）

2）橙色标记，将在地图上动态显示用户的位置（itemizedOverlay2）。

我正在使用 ItemizedOverlay 来拥有 2 个不同的图层（一个用于事件，一个用于用户位置），但是显示用户位置的动态标记存在问题。

**问题：**

发生的情况是 LocationListener 成功获取纬度/经度并在地图上放置一个点，但前一个点仍然存在。所以我有一系列标记显示用户的位置。

我已经实现了几种我在互联网上搜索的方法，但在调用 onLocationChanged 期间都没有发生。

```
class myLocationListener implements LocationListener{
        OverlayItem overlayItem;

        @Override
        public void onLocationChanged(Location location) {

            if (location != null){

                mapOverlays.remove(itemizedOverlay2);
                mapView.invalidate();

                lat = location.getLatitude();
                longi = location.getLongitude();
                GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (longi * 1E6));
                mControl.animateTo(point);

                overlayItem = new OverlayItem(point, "My Location", "This is probably where you are");
                itemizedOverlay2.addOverlay(overlayItem);
                mapOverlays.add(itemizedOverlay2);

            }

        } 
```

我知道您可能需要更多我的代码，但让我们留在这个街区，看看是否有人看到我哪里出错了。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:30:27.513

您还没有发布 itemizedOverlay2 所属类的代码，但我猜它扩展了 ItemizedOverlay。由于它有一个 addOverlay() 方法，我也猜测它有一个 .clear() 方法。

如果是这样，您应该在添加新位置之前调用 clear()

```
itemizedOverlay2.clear();
itemizedOverlay2.addOverlay(overlayItem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:32:38.327

使用内置类`MyLocationOverlay`：

```
position = new MyLocationOverlay(this, mapView);
position.enableMyLocation();
mapOverlays.add(position); 
```

# python - Removing/replacing multi-line code sections with python

> ID：10318351
> 
> 赞同：2
> 
> 时间：2012-04-25T15:01:55.793
> 
> 标签：python

I'm trying to remove multiple lines containing an obsoleted code fragment from various file with the help of python. I looked for some examples but could not really find what I was looking for. What I basically need is something that does in principle the following (contains non-python syntax):

```
def cleanCode(filepath):
"""Clean out the obsolete or superflous 'bar()' code."""
with open(filepath, 'r') as foo_file:
    string = foo_file[index_of("bar("):]
    depth = 0
    for char in string:
        if char == "(": depth += 1
        if char == ")": depth -= 1
        if depth == 0: last_index = current_char_position
with open(filepath,'w') as foo_file:
    mo_file.write(string) 
```

The thing is that the construct I'm parsing for and want to replace *could* contain other nested statements that also need to be removed as part of the `bar(...)` removal.

Here is what a sample, to be cleaned, code snippet would look like:

```
annotation (
  foo1(k=3),
  bar(
    x=0.29,
    y=0,
    bar1(
    x=3, y=4),
    width=0.71,
    height=0.85),
  foo2(System(...)) 
```

I would think that someone might have solved something similar before :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:02:38.320

try this :

```
clo=0
def remov(bar):
   global clo
   open_tag=strs.find('(',bar) # search for a '(' open tag
   close_tag=strs.find(')',bar)# search for a ')' close tag
   if open_tag > close_tag:
      clo=strs.find(')',close_tag+1)
   elif open_tag < close_tag and open_tag!=-1:
      remov(close_tag)

f=open('small.in')
strs="".join(f.readlines())
bar=strs.find('bar(')
remov(bar+4)
new_strs=strs[0:bar]+strs[clo+2:]
print(new_strs)
f.close() 
```

output:

```
annotation (
  foo1(k=3),
  foo2(System(...)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:11:21.767

Pyparsing has some built-ins for matching nested parenthetical text - in your case, you aren't really trying to extract the content of the parens, you just want the text between the outermost '(' and ')'.

```
from pyparsing import White, Keyword, nestedExpr, lineEnd, Suppress

insource = """
annotation (
  foo1(k=3),
  bar(
    x=0.29,
    y=0,
    bar1(
    x=3, y=4),
    width=0.71,
    height=0.85),
  foo2(System(...))
"""

barRef = White(' \t') + Keyword('bar') + nestedExpr() + ',' + lineEnd

out = Suppress(barRef).transformString(insource)
print out 
```

Prints

```
annotation (
  foo1(k=3),
  foo2(System(...)) 
```

EDIT: parse action to not strip bar() calls ending with '85':

```
barRef = White(' \t') + Keyword('bar') + nestedExpr()('barargs') + ','
def skipEndingIn85(tokens):
    if tokens.barargs[0][-1].endswith('85'):
        raise ParseException('ends with 85, skipping...')
barRef.setParseAction(skipEndingIn85) 
```

# sql - 如何将不在表中的行包含到结果集中？

> ID：10318361
> 
> 赞同：0
> 
> 时间：2012-04-25T15:02:18.640
> 
> 标签：sql, sorting, oracle11g

甲骨文 11g。WASHINGTON DC 不在我的 STATES 表中，我无权添加它，但它需要在结果集中。我还希望 DC 在排序顺序中首先出现。

```
STATES
STATE_ID  STATE_DESC
----------------------
 FL       FLORIDA
 HI       HAWAII
 WY       WYOMING
-----------------------------------------

select 'DC' state_id, 'WASHINGTON DC' state_desc from dual
union
select state_id, state_desc from states
order by 
case  state_id
when 'DC' then 'AAAA'
else state_desc
------------------------- 
```

上面的查询产生以下错误消息：

```
 ORA-01785: ORDER BY item must be the number of a SELECT-list expression 
```

## 期望的结果

```
 STATE_ID  STATE_DESC
 DC        WASHINGTON DC
 FL        FLORIDA
 HI        HAWAII
 WY        WYOMING 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:11:45.663

你似乎只需要一个外部`SELECT`来应用它`ORDER BY`。就像是

```
SQL> ed
Wrote file afiedt.buf

  1  with states as (
  2    select 'FL' state_id, 'Florida' state_desc from dual union all
  3    select 'HI', 'Hawaii' from dual union all
  4    select 'WY', 'Wyoming' from dual
  5  )
  6  select state_id, state_desc
  7    from (select 'DC' state_id, 'Washington D.C.' state_desc
  8            from dual
  9          union all
 10          select state_id, state_desc
 11            from states)
 12   order by (case when state_id = 'DC'
 13                  then 'AAA'
 14                  else state_desc
 15*             end)
SQL> /

ST STATE_DESC
-- ---------------
DC Washington D.C.
FL Florida
HI Hawaii
WY Wyoming 
```

虽然它可能无关紧要，因为您的`STATES`表可能只有 50 行左右，但是执行 a`UNION ALL`而不是 a`UNION`通常会更有效，因为它不需要 Oracle 检查和消除重复行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:49:26.117

我没有 Oracle 来检查优化器，但是我倾向于采用这样的方法

```
SELECT  State_ID, State_Desc
FROM    (   SELECT 1 AS SortOrder, State_ID, State_Desc
            FROM States
            UNION ALL
            SELECT 0, 'DC', 'WASHINGTON DC' 
            FROM Dual
        ) 
ORDER BY SortOrder, State_ID 
```

更改排序顺序，而不是使用 case 语句。在 SQL-Server-2008 中使用`SortOrder`列肯定更有效。

# c++ - X 的错误处理程序抛出异常是否安全？

> ID：10318363
> 
> 赞同：2
> 
> 时间：2012-04-25T15:02:23.853
> 
> 标签：c++, x11, xlib

做这样的事情安全吗？

```
int foo(Display*, XErrorEvent*) {
  throw 0;
}
XSetErrorHandler(foo); 
```

我不会遇到任何麻烦吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:16:35.010

X11 错误处理程序是由用户提供并由 Xlib 调用的回调。从错误处理程序抛出的任何异常都将通过 Xlib 代码传播到调用 Xlib 的用户代码（通常是 XNextEvent 或朋友）。

```
 foo() <C++>
                 |
       [error is detected by Xlib] <C>
                 |
          [some more Xlib code] <C>
                 |
            [some Xlib code] <C>
                 |
             XNextEvent()  <C>                 
                 |
               main() <C++> 
```

由于 Xlib 不是用 C++ 编写的，因此 C++ 运行时不一定知道如何进行 Xlib 代码的堆栈展开。即使幸运地成功地正确展开，在调用错误处理程序之前由 Xlib 分配的内存等资源也可能会丢失。C 中没有自动析构函数！

# jsp - 在jsp中使用另存为对话框下载文件...如何提示用户保存，查看取消对话框而不是直接打开图像

> ID：10318365
> 
> 赞同：2
> 
> 时间：2012-04-25T15:02:26.470
> 
> 标签：jsp, jakarta-ee, spring-mvc, file-upload, file-io

我有一个jsp，我在其中提供了一个用于下载任何文档的链接。

每当用户单击链接时，它都会直接打开文档。

我想显示一个对话框（通常出现在许多网站上），它会要求用户保存、取消和查看文档。

谁能帮帮我..??

我在我的控制器类中使用以下代码。

```
InputStream is = new FileInputStream(new File(**File Path**);

              IOUtils.copy(is, response.getOutputStream());
              response.flushBuffer(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:27:57.230

我得到了解决方案。

我添加了响应内容类型并且它正在工作。

response.setHeader("Content-Disposition", "attachment;filename=abc.jpg");

感谢所有试图帮助我解决这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:15:57.863

浏览器采取的行动取决于几件事；服务器为文件发送的 MIME 类型，以及浏览器如何配置为处理该特定 MIME 类型。您可以在服务器端设置 MIME 类型：

```
response.setContentType( "application/octet-stream" ); 
```

该 MIME 类型通常应该显示一个保存对话框，但用户可能会配置他们的浏览器以不同方式处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:52:47.093

正如尼克威尔逊所说，您还必须检查浏览器如何处理八位字节流......

# objective-c - 从具有属性的 NSObject 转换为 NSDictionary 的 Obj-C 简单方法？

> ID：10318366
> 
> 赞同：15
> 
> 时间：2012-04-25T15:02:31.477
> 
> 标签：objective-c, ios, nsdictionary

我遇到了一些我最终想通的东西，但认为可能有一种更有效的方法来完成它。

我有一个对象（一个采用 MKAnnotation 协议的 NSObject），它具有许多属性（标题、副标题、纬度、经度、信息等）。我需要能够将此对象传递给另一个对象，该对象希望使用 objectForKey 方法从中提取信息，作为 NSDictionary（因为这是从另一个视图控制器获得的）。

我最终做的是创建一个新的 NSMutableDictionary 并在其上使用 setObject: forKey 来传输每条重要信息，然后我只是传递了新创建的字典。

有没有**更简单**的方法来做到这一点？

以下是相关代码：

```
// sender contains a custom map annotation that has extra properties...

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
    if ([[segue identifier] isEqualToString:@"showDetailFromMap"]) 
{
    DetailViewController *dest =[segue destinationViewController];

    //make a dictionary from annotaion to pass info
    NSMutableDictionary *myValues =[[NSMutableDictionary alloc] init];
    //fill with the relevant info
    [myValues setObject:[sender title] forKey:@"title"] ;
    [myValues setObject:[sender subtitle] forKey:@"subtitle"];
    [myValues setObject:[sender info] forKey:@"info"];
    [myValues setObject:[sender pic] forKey:@"pic"];
    [myValues setObject:[sender latitude] forKey:@"latitude"];
    [myValues setObject:[sender longitude] forKey:@"longitude"];
    //pass values
    dest.curLoc = myValues;
    }
} 
```

提前感谢您的集体智慧。

* * *

# 这是我想出的，感谢下面的人...

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
if ([[segue identifier] isEqualToString:@"showDetailFromMap"]) 
{
    DetailViewController *dest =[segue destinationViewController];
    NSArray *myKeys = [NSArray arrayWithObjects:
@"title",@"subtitle",@"info",@"pic",@"latitude",@"longitude", nil];

    //make a dictionary from annotaion to pass info
    NSDictionary *myValues =[sender dictionaryWithValuesForKeys:myKeys];

    //pass values
    dest.curLoc = myValues;
} 
```

## }

# 还有一个更简单的修复，如下所示......

使用 valueForKey 而不是对象作为键来检索信息。

* * *

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-25T15:19:29.637

确定的事！使用 objc-runtime 和 KVC！

```
#import <objc/runtime.h>

@interface NSDictionary(dictionaryWithObject)

+(NSDictionary *) dictionaryWithPropertiesOfObject:(id) obj;

@end
@implementation NSDictionary(dictionaryWithObject)

+(NSDictionary *) dictionaryWithPropertiesOfObject:(id)obj
{
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];

    unsigned count;
    objc_property_t *properties = class_copyPropertyList([obj class], &count);

    for (int i = 0; i < count; i++) {
        NSString *key = [NSString stringWithUTF8String:property_getName(properties[i])];
        [dict setObject:[obj valueForKey:key] forKey:key];
    }

    free(properties);

    return [NSDictionary dictionaryWithDictionary:dict];
}

@end 
```

你会这样使用：

```
MyObj *obj = [MyObj new];    
NSDictionary *dict = [NSDictionary dictionaryWithPropertiesOfObject:obj];
NSLog(@"%@", dict); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-15T06:41:39.867

这是一篇旧文章，Richard J. Ross III 的回答确实很有帮助，但在自定义对象的情况下（自定义类中有另一个自定义对象）。但是，有时属性是其他对象等等，这使得序列化有点复杂。

```
Details * details = [[Details alloc] init];
details.tomato = @"Tomato 1";
details.potato = @"Potato 1";
details.mangoCount = [NSNumber numberWithInt:12];

Person * person = [[Person alloc]init];
person.name = @"HS";
person.age = @"126 Years";
person.gender = @"?";
person.details = details; 
```

为了将这些类型的对象（多个自定义对象）转换为字典，我不得不稍微修改一下 Richard J. Ross III's Answer。

```
+(NSDictionary *) dictionaryWithPropertiesOfObject:(id)obj
{
  NSMutableDictionary *dict = [NSMutableDictionary dictionary];

  unsigned count;
  objc_property_t *properties = class_copyPropertyList([obj class], &count);

  for (int i = 0; i < count; i++) {
      NSString *key = [NSString stringWithUTF8String:property_getName(properties[i])];
      Class classObject = NSClassFromString([key capitalizedString]);
      if (classObject) {
        id subObj = [self dictionaryWithPropertiesOfObject:[obj valueForKey:key]];
        [dict setObject:subObj forKey:key];
      }
      else
      {
        id value = [obj valueForKey:key];
        if(value) [dict setObject:value forKey:key];
      }
   }

   free(properties);

   return [NSDictionary dictionaryWithDictionary:dict];
} 
```

我希望它会帮助某人。完全归功于 Richard J. Ross III。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-25T15:08:04.413

如果属性与用于访问字典的键具有相同的名称，那么您可以只使用 KVC 而`valueForKey:`不是`objectForKey`.

例如给定这本字典

```
NSDictionary *annotation = [[NSDictionary alloc] initWithObjectsAndKeys:
                             @"A title", @"title", nil]; 
```

和这个对象

```
@interface MyAnnotation : NSObject

@property (nonatomic, copy) NSString *title;

@end 
```

`MyAnnotation`如果我有字典的实例或者我可以调用也没关系

```
[annotation valueForKey:@"title"]; 
```

* * *

显然，这也适用于其他方式，例如

```
[annotation setValue:@"A title" forKey:@"title"]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-07T18:53:51.570

为了完成 Richard J. Ross 的方法，这个方法与自定义对象的 NSArray 一起工作。

```
+(NSDictionary *) dictionaryWithPropertiesOfObject:(id)obj
{
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];

    unsigned count;
    objc_property_t *properties = class_copyPropertyList([obj class], &count);

    for (int i = 0; i < count; i++) {
        NSString *key = [NSString stringWithUTF8String:property_getName(properties[i])];
        Class classObject = NSClassFromString([key capitalizedString]);

        id object = [obj valueForKey:key];

        if (classObject) {
            id subObj = [self dictionaryWithPropertiesOfObject:object];
            [dict setObject:subObj forKey:key];
        }
        else if([object isKindOfClass:[NSArray class]])
        {
            NSMutableArray *subObj = [NSMutableArray array];
            for (id o in object) {
                [subObj addObject:[self dictionaryWithPropertiesOfObject:o] ];
            }
            [dict setObject:subObj forKey:key];
        }
        else
        {
            if(object) [dict setObject:object forKey:key];
        }
    }

    free(properties);
    return [NSDictionary dictionaryWithDictionary:dict];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-01T13:05:24.487

有这么多的解决方案，但没有什么对我有用，因为我有一个复杂的嵌套对象结构。这个解决方案从 Richard 和 Damien 那里得到了一些东西，但即兴发挥了 Damien 的解决方案与将键命名为类名有关。

这是标题

```
@interface NSDictionary (PropertiesOfObject)
+(NSDictionary *) dictionaryWithPropertiesOfObject:(id)obj;
@end 
```

这是.m文件

```
@implementation NSDictionary (PropertiesOfObject)

static NSDateFormatter *reverseFormatter;

+ (NSDateFormatter *)getReverseDateFormatter {
if (!reverseFormatter) {
    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
    reverseFormatter = [[NSDateFormatter alloc] init];
    [reverseFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"];
    [reverseFormatter setLocale:locale];
}
return reverseFormatter;
}

 + (NSDictionary *)dictionaryWithPropertiesOfObject:(id)obj {
NSMutableDictionary *dict = [NSMutableDictionary dictionary];

unsigned count;
objc_property_t *properties = class_copyPropertyList([obj class], &count);

for (int i = 0; i < count; i++) {
    NSString *key = [NSString stringWithUTF8String:property_getName(properties[i])];
    id object = [obj valueForKey:key];

    if (object) {
        if ([object isKindOfClass:[NSArray class]]) {
            NSMutableArray *subObj = [NSMutableArray array];
            for (id o in object) {
                [subObj addObject:[self dictionaryWithPropertiesOfObject:o]];
            }
            dict[key] = subObj;
        }
        else if ([object isKindOfClass:[NSString class]]) {
            dict[key] = object;
        } else if ([object isKindOfClass:[NSDate class]]) {
            dict[key] = [[NSDictionary getReverseDateFormatter] stringFromDate:(NSDate *) object];
        } else if ([object isKindOfClass:[NSNumber class]]) {
            dict[key] = object;
        } else if ([[object class] isSubclassOfClass:[NSObject class]]) {
            dict[key] = [self dictionaryWithPropertiesOfObject:object];
        }
    }

}
return dict;
}

@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-22T13:03:18.840

您还可以使用`NSObject+APObjectMapping`GitHub 上提供的类别：[https ://github.com/aperechnev/APObjectMapping](https://github.com/aperechnev/APObjectMapping)

这很容易。只需描述您班级中的映射规则：

```
#import <Foundation/Foundation.h>
#import "NSObject+APObjectMapping.h"

@interface MyCustomClass : NSObject
@property (nonatomic, strong) NSNumber * someNumber;
@property (nonatomic, strong) NSString * someString;
@end

@implementation MyCustomClass
+ (NSMutableDictionary *)objectMapping {
  NSMutableDictionary * mapping = [super objectMapping];
  if (mapping) {
    NSDictionary * objectMapping = @{ @"someNumber": @"some_number",
                                      @"someString": @"some_string" };
  }
  return mapping
}
@end 
```

然后您可以轻松地将您的对象映射到字典：

```
MyCustomClass * myObj = [[MyCustomClass alloc] init];
myObj.someNumber = @1;
myObj.someString = @"some string";
NSDictionary * myDict = [myObj mapToDictionary]; 
```

你也可以从字典中解析你的对象：

```
NSDictionary * myDict = @{ @"some_number": @123,
                           @"some_string": @"some string" };
MyCustomClass * myObj = [[MyCustomClass alloc] initWithDictionary:myDict]; 
```

# c# - 如何在 mkv 中加密视频？

> ID：10318368
> 
> 赞同：1
> 
> 时间：2012-04-25T15:02:34.033
> 
> 标签：c#, encryption, mkv

因此，我们将获得要发送到多个客户端站点的 mkv 文件。我们需要在传输之前加密这些文件的内容，但是客户端可以开始播放这些文件，并在运行中解密它们。我们知道我们可以简单地加密文件本身，但是客户端必须在播放之前对其进行解密，从而使未加密的文件处于打开状态以供窃取。一直在谷歌搜索加密 mkv，但还没有出现任何东西。这可能吗？实现这一点的库（Windows 加密端、Linux 播放端）将是理想的，但跨平台应用程序在紧要关头就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:56:48.767

Matroska 肯定支持流层加密（与 Adam 所说的相反）：

请参阅： http: [//matroska.org/technical/specs/notes.html#Encryption](http://matroska.org/technical/specs/notes.html#Encryption)

但是，您需要自己进行加密。jbtule 建议的方式很可能会起作用。你能向我们汇报吗？我正在研究自己加密一些 MKV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:15:04.007

这是不可能的; 作为容器格式，Matroska (MKV) 格式不支持 DRM。您需要使用 ASF 之类的东西，这是 WMV 或 QuickTime 最常使用的容器格式。

如何为 DRM 进行开发的主题过于广泛，无法在此涵盖。您需要选择要使用的 DRM 系统并对其进行许可。这是不平凡的。

你可以从[这里](http://en.wikipedia.org/wiki/Digital_Rights_Management#DRM_and_film)开始。请注意，与大多数 DRM 方案一样，**唯一会给您带来不便的人是您的付费客户**。如果有人想要您的内容，他们会得到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:57:23.783

没有标准的 DRM。但是您可以使用标准加密，您不想加密整个文件，只需要使用流密码加密容器内的视频流，因此您可以在解析器级别挂钩您使用的任何开源 MKV 库然后解密在将流传递给编解码器之前的流块。您需要选择一个快速的标准流密码，并且可以让您跳到流中的后面位置（例如[Salsa20](http://en.wikipedia.org/wiki/Salsa20)）

# windows - 带有 x64 的 IDropTarget

> ID：10318369
> 
> 赞同：0
> 
> 时间：2012-04-25T15:02:44.607
> 
> 标签：windows, visual-studio-2010, com, ole

我基于[来自 catch22.net 的放置目标类示例](http://www.catch22.net/tuts/drop-target)实现了文件放置。在 32 位上一切正常 - 但在我的 x64 位版本中没有任何作用。

```
HRESULT __stdcall CDropTarget::QueryInterface (REFIID iid, void ** ppvObject) 
```

调用时不调用

```
pDropTarget = new CDropTarget(hwnd);

CoLockObjectExternal(myDropTarget, TRUE, FALSE); 
```

就像在 32 位版本中一样。该问题出现在 XP 和 Windows 7 上。我使用的是 VS 2010。

有什么问题？

# javascript - 选择具有指定值的所有对象

> ID：10318373
> 
> 赞同：0
> 
> 时间：2012-04-25T15:02:51.130
> 
> 标签：javascript, jquery, object

使用 jQuery 或纯 javascript 工作

如果我有一个像这样的对象数组：

```
 [
    {"company":"acme", "Employees":10, "location":"Cork"}, 
    {"company":"foo", "Employees":50, "location":"Limerick"},
    {"company":"bar", "Employees":10, "location":"Dublin"}
    {"company":"zanzo", "Employees":23, "location":"Dublin"}
    ] 
```

有没有方便的方法来查询这些数据？

例如，获取所有员工超过 20 人的公司，或获取所有位于都柏林的公司

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:05:31.007

您可以使用该[`.grep()`](http://api.jquery.com/jQuery.grep/)功能。例如：

```
var companiesWithOver20Employees = $.grep(companies, function(company, index) {
    return company.Employees > 10;
}); 
```

或者：

```
var companiesInDublin = $.grep(companies, function(company, index) {
    return company.location == 'Dublin';
}); 
```

# visual-studio-2010 - Visual Studio 中应用程序的运行时间

> ID：10318376
> 
> 赞同：2
> 
> 时间：2012-04-25T15:03:03.953
> 
> 标签：visual-studio-2010, c#-4.0

我正在用 c# 解决一些算法问题并将它们作为控制台应用程序运行。

为了检查应用程序的效率，我想看看它们的运行时间是多少。

目前我正在打印程序开始和结束时的时间并计算时间差，但是有没有办法减少[观察者的影响](http://en.wikipedia.org/wiki/Observer_effect_%28information_technology%29)？
一些我不知道的内置工具/插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:05:02.457

您应该使用`Stopwatch`专门为此而设计的类。

为避免测量 JIT 时间，您还应该在测量任何内容之前至少运行每个算法一次，以便 JIT 有时间运行。

在测量算法时，您应该将每个算法运行数百次并取平均运行时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T20:23:40.390

使用[秒表类](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.110%29.aspx)。以下面的方法为例。

```
using System.Diagnostics;

    public void yourAlgorithm()
        {

            Stopwatch timePerParse = Stopwatch.StartNew();
            /** -- TODO --**/

            timePerParse.Stop();
            Console.WriteLine(timePerParse.ElapsedMilliseconds);

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:11:42.223

The most important source of delay due to observer's effect is printing itself. Another potential delayer is debug message text formatting. So I suggest the following:

*   If you can anticipate the number of loops and number of stages per loop, create an array to store timing information. If not, use a dynamic list.
*   During execution, store time and aditional information in that array or list.
*   If possible, don't store messages along with time but codes, for example 1=Stage 1, 2=Stage 2, etc.
*   At the end of the execution, dump all the information to screen or file, and format messages as needed.

# jquery - Jquery .removeClass 在 setTimeout 内不起作用

> ID：10318378
> 
> 赞同：0
> 
> 时间：2012-04-25T15:03:09.607
> 
> 标签：jquery, navigation, hover, settimeout, removeclass

所以我有一个出现在悬停时的下拉导航，我试图在那里延迟以提高可用性。最初我使用的 hoverIntent 除了在 IE8 及以下版本之外，它在任何地方都能很好地工作。

因此，我尝试使用普通的旧 Javascript 进行延迟，但 setTimeout 函数不会调用我的 jQuery。

var J = jQuery.noConflict();

```
 J(".navigation li").hover(function(){J(this).addClass("hover");},function(){setTimeout("J(this).removeClass('hover');",500);}); 
```

当我这样设置时：

```
 function off(){J(this).removeClass("hover"); alert("hello");}

J(".navigation li").hover(function(){J(this).addClass("hover");},function(){setTimeout("off()",500);}); 
```

警报完美运行，但 .removeClass 函数却不行。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T15:11:56.893

`this`inside`setTimeout`不是 li 元素；我建议您使用接收函数的 setTimeout 重载，并在设置变量`this`以保留引用之前：

```
J(".navigation li").hover(function(){
   J(this).addClass("hover");
},
function(){
  var self = this;
  setTimeout(function() {
         J(self).removeClass('hover');
  },500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:11:56.917

你的`off`功能：

```
function off() {
    J(this).removeClass("hover");
    alert("hello")
} 
```

在大多数`this`（`setTimeout()`所有？）设置`this`为`window`.

您需要一个额外的闭包来包装原始文件`this`并将其传递给该计时器函数：

```
J(".navigation li").hover(
    function() {
        J(this).addClass("hover");
    },
    function() {
        var that = this;
        setTimeout(function() {
            off.apply(that);
        }, 500);
    }
); 
```

注意：不要使用字符串参数`setTimeout()`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:18:39.543

问题在于它`this`指的是超时回调范围内的不同内容。

最简单的解决方案是使用[jQuery.proxy([function],[scope])提供旧范围](http://api.jquery.com/jQuery.proxy/)

```
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script>
            var f = function(){
                console.log(this.id);
            };

            $(function() {
                $("div").click(function () {
                    setTimeout($.proxy(f,this), 1000);
                });
            });
        </script>
    </head>
    <body>
        <div id="a">a</div>
        <div id="b">b</div>
    </body>
</html> 
```

# php - 如何用 php 填充逗号分隔的字符串？

> ID：10318386
> 
> 赞同：1
> 
> 时间：2012-04-25T15:03:31.960
> 
> 标签：php

我有一个具有以下值的变量：
`1,2,11,17,2`
我需要将其转换为：
`SER1, SER2, SER11, SER17, SER2`
换句话说，我需要在每个数字的左侧填充单词`SER`
How to done this with PHP?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:07:50.650

您可以使用正则表达式将每个数字替换为数字前的 SER：`preg_replace('/(\d+)/', 'SER$1', '1,2,11,17,2');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:06:36.577

您可以使用[array_map](http://us.php.net/manual/en/function.array-map.php)遍历数组并添加字符串。

例子：

```
$array = array(1,2,11,17,2);

$new_array = array_map(function($value) {
    return 'STR' . $value;
}, $array);

var_dump($new_array); 
```

**编辑：**忽略，我以为您正在使用数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:07:24.217

对第一个“SER”使用连接，然后使用替换功能。

```
$StringVar="SER".$StringVar
$StringVar=str_replace(" ,",", SER",$StringVar) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:10:53.757

在 array_walk 的示例中，您会看到以下代码：

```
<?php
$fruits = array("d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple");

function test_alter(&$item1, $key, $prefix)
{
    $item1 = "$prefix: $item1";
}

function test_print($item2, $key)
{
    echo "$key. $item2<br />\n";
}

echo "Before ...:\n";
array_walk($fruits, 'test_print');

array_walk($fruits, 'test_alter', 'fruit');
echo "... and after:\n";

array_walk($fruits, 'test_print');
?> 
```

上面的示例将输出：

```
Before ...:
d. lemon
a. orange
b. banana
c. apple
... and after:
d. fruit: lemon
a. fruit: orange
b. fruit: banana
c. fruit: apple 
```

# json - 优化 JaxRS/Jackson 以排除空值、空列表、数组

> ID：10318388
> 
> 赞同：6
> 
> 时间：2012-04-25T15:03:34.157
> 
> 标签：json, jackson, jax-rs

我们正在使用 JaxRS & Jackson 向我们的客户发送数据。由于客户端是 Javascript，如果该属性没有有效值（JaxRS 默认会这样做），我们实际上不需要发送空值或空数组。有没有解决的办法？

一个例子。JaxRS 发送这个：

`{"prop1":[],"prop2":null,"prop3":"foo"}`

我们本可以逃脱的

`{"prop3":"foo"}`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T21:18:59.520

有多种方法可以实现这一点，具体取决于；注释`@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)`是一种方式。或者，由于您还想删除空列表、数组，请将 NON_NULL 更改为 NON_EMPTY。

也可以将其配置为默认行为；在杰克逊 1.9 中：

```
mapper.setSerializationConfig(mapper.getSerializationConfig().withSerializationInclusion(
  JsonSerialize.Inclusion.NON_EMPTY)); 
```

在 Jackson 2.0 中，更简单一些：

```
mapper.setSerializationInclusion(JsonSerialize.Inclusion.NON_EMPTY); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T18:34:50.117

首先，从 JSON 中删除属性可能会导致客户端出现错误或代码不清晰 - 客户端必须在使用给定属性之前检查它是否存在，如果该属性丢失，则会报告 JavaScript 错误。无聊的东西。

由于 HTTP 通信是 gzip 压缩的，因此删除属性的潜在收益似乎并不显着（显然我可能是错的 - 我不知道您的应用程序）。GET 请求可以被有效地缓存，因此还有一个理由避免这种优化。

您可以根据需要自定义将 Java 对象序列化为 JSON。请参阅此问题[如何将 JAXB 对象列表的序列化自定义为 JSON？](https://stackoverflow.com/questions/2199453/how-can-i-customize-serialization-of-a-list-of-jaxb-objects-to-json)进一步解释如何做到这一点。

# ruby - ActiveModel::MassAssignmentSecurity 错误 - 与 formtastic 中的 time_select 有关？

> ID：10318393
> 
> 赞同：0
> 
> 时间：2012-04-25T15:03:56.263
> 
> 标签：ruby, ruby-on-rails-3, activeadmin, formtastic

我正在使用以下代码使用 activeadmin 和 formtastic 创建一些时间选择和日期选择对象。结果生成两个时间选择和一个日期选择对象，因为对应的数据字段类型是时间和日期。问题是当我提交表单时出现 ActiveModel::MassAssignmentSecurity 错误

```
<%= f.inputs :class=>'inputs', :for=>Schedule.new do |fu| %>
  <%= fu.input :eta, :label=>"ETA", :ignore_date=>true %>
  <%= fu.input :etd, :label=>"ETD", :ignore_date=>true %>
  <%= fu.input :date, :ignore_time=>true %>
<% end %> 
```

发布时 etd 和 eta 字段作为数组发布 - 有没有办法干净地获取它们的实际值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:23:23.773

如果没有看到有问题的模型，我无法确定您的问题是什么，但我最好的猜测是您遇到了`accepts_nested_attributes_for`and的问题`attr_accessible`。

在父窗体表示的模型上，您将需要：

```
has_one :schedule    #assuming it's has_one, could be something else...
accepts_nested_attributes_for :schedule
attr_accessible :schedule_details 
```

请注意，关联名称中`attr_accessible`附加了`_details`. 如果您只有关联名称，Rails 将抛出异常。

这看起来可能是问题吗？

# uiwebview - iOS 5.1 UIWebView 在加载 PDF 文件后导致 iOS 模拟器崩溃

> ID：10318395
> 
> 赞同：0
> 
> 时间：2012-04-25T15:04:03.003
> 
> 标签：uiwebview, ios-simulator, ios5.1

我正在开发一个具有两个视图控制器的通用应用程序，一个主视图控制器（一个 UITableViewController）和一个详细视图控制器（带有一个 UIWebView）。当用户在表中选择一个项目（每个项目是一个具有 URL 属性的对象）时，应用程序会在 DetailViewController 中设置 detailItem 属性。我自定义了 setDetailItem 以检测何时设置 detailItem 并在 DetailViewController 的 Web 视图中打开相关 URL。

用户选择另一个项目，Web 视图加载另一个相关 URL。

它适用于包含以 HTML 文件为目标的 URL 的项目。当 URL 以 PDF 文件为目标时，Web 视图会正常加载它，但当用户选择另一个项目时，应用程序会崩溃。

在 iPhone 模拟器上，如果用户通过按导航栏中的后退按钮返回 MasterViewController，它会崩溃。在 iPad 模拟器上，我使用的是 UISplitViewController，当用户在 MasterViewController 的表视图中选择任何其他项目时它会崩溃。

即使将 Xcode 设置为显示所有异常，它也不会显示任何输出。仅在 main.m 中崩溃。

奇怪的是，如果我在设备上部署应用程序并使用它，它工作正常，但如果我在设备上运行从 Xcode 调试它也会崩溃。

关于如何修复它的任何想法，或者它只是模拟器中的一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:53:42.867

在 UIWebview 中显示 PDF 时，我们遇到了同样的问题：模拟器崩溃，但它在设备上运行良好。所以看起来它真的可能是模拟器中的一个错误。

顺便说一句：我们正在使用 ARC：你也是吗？

# php - mysql查询以显示不同结果的计数

> ID：10318398
> 
> 赞同：0
> 
> 时间：2012-04-25T15:04:12.090
> 
> 标签：php, mysql

我有三个表，我想组合三个结果的输出并在这里显示结果是我的表结构和查询

table_campaign - ID 是自动递增的

```
id         banner                views_left     packages

1          A1                       555                5
2          A1                       527                5
3          B1                       580                98
4          C1                       293                69 
```

table_packages-Id 是自动递增的

```
id      name    special     
1       India       IND
2       Aus         Australia 
3       Pak         Pakistan 
```

tablepage（table_campaign 中的 uri 和横幅相同）

```
 id     uri     views   
 1      A1       54
 2      B1       94
 3      C1       38 
```

我想检查 table_campaign 中所有类似类型横幅的总和，并将检查 tablepage，如果 table_campaign 中的总视图小于 tablepage 视图，那么它将显示结果。

我尝试了三个独立的查询。您能否指导如何编写，以便如果 tablepage 中的视图小于 table_campaign 的 views_left 列的组合视图，它将显示结果或不显示任何结果。我想从满足此标准的几个中显示随机结果

```
$res23 = sql_query("SELECT sum(views_left) as num from table_campaign where banner!='{$client['uri']}'  " );
    $row23 = sql_fetch_array($res23);
    $stats['views_left'] = $row23['num'];

$res = sql_query("SELECT * from `table_packages` where special='{$client['location']}'");
$row = sql_fetch_array($res);
$packages=$row['id'];
{

$res2 = sql_query("SELECT * from `table_campaign` banner  where packages='{$packages}' order by  views_left   desc limit 4");{
while($row = sql_fetch_array($res2)) {
$banner1= $row['banner'];
$views_left = $row['views_left'];
$output4 .= '<table width="100%"><tr><td style="text-align:left;"><a href="'.$banner1.'">'.$banner1.'</a></td><td style="text-align:right;">'.$views_left.'  '.$stats['views_left'].'</td></tr></table>
';}

ass(array('title'=>t('abc'), 'content' => '<div class="toolbar">'.'<div style="border:0px solid #B2BCA7;margin-bottom:20px;"><div style="padding: 7px; position: relative;">'.$output4.'</div>'));
} 
```

我只是想展示这个内容

table_campaign 的总和，从所有行减去 tablepage 视图的视图总和

我的 tablepage uri 列和 table_campaign 横幅列是相同的。但是在 tablepage 中，uri 列是唯一的，它只能出现一次，但在 table_campaign 横幅列中可以出现多次，所以我想从 table_campaign 添加所有行的 views_left 并与 tablepage 进行比较视图列。如果该特定 uri 的视图列大于 views_left 列的总和，它将显示输出，如我所示。我想我现在很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:52:12.220

这是我的写法：

```
SELECT sum(table_campaign.views_left) - tablepage.views  FROM table_campaign,tablepage where tablepage.uri=table_campaign.banner group by table_campaign.banner; 
```

# jquery - jQuery 选项卡在 IE6-7 中不起作用

> ID：10318399
> 
> 赞同：1
> 
> 时间：2012-04-25T15:04:13.703
> 
> 标签：jquery, tabs

我正在使用一些 jQuery 在此页面上制作标签：http: [//johandahl.com/wp/malmocityfastigheter/ekonomi/](http://johandahl.com/wp/malmocityfastigheter/ekonomi/)

但是，他们不在 Internet Explorer 6-7 中工作。选项卡区域不会隐藏，只是相互堆叠。任何想法这里可能有什么问题？

这是我的 jQuery 代码的样子：

```
/* TABS */
jQuery(document).ready(function($){

$('ul.tabs').each(function(){
// For each set of tabs, we want to keep track of
// which tab is active and it's associated content
var $active, $content, $links = $(this).find('a');

// Use the first link as the initial active tab
$active = $links.first().addClass('active');
$content = $($active.attr('href'));

// Hide the remaining content
$links.not(':first').each(function () {
$($(this).attr('href')).hide();
});

// Bind the click event handler
$(this).on('click', 'a', function(e){
// Make the old tab inactive.
$active.removeClass('active');
$content.hide();

// Update the variables with the new link and content
$active = $(this);
$content = $($(this).attr('href'));

// Make the tab active.
$active.addClass('active');
$content.show();

// Prevent the anchor's default click action
e.preventDefault();
});
});
}); 
```

这是一个 html 示例：

```
 <ul class='tabs'>
                <li><a href='#beskrivning'>Om adressen</a></li>             
                <li><a href='#aktuellt'>Aktuell information</a></li>
            </ul>

        <div class="entry-about">           
            <div id='beskrivning'>

            </div>

            <div id='aktuellt'>

            </div>

        </div> 
```

例如，比较 IE 和 Chrome 可以看出，在 Chrome 中，“display: block;”和 display: none; 的内联样式 " 已正确添加到我的选项卡式区域。但在 IE 开发人员工具中，没有添加此类样式 - 但我的 jQuery 中也没有错误。想法？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:03:40.523

好的，我设法找到了问题所在。如果有人好奇，那是与modernizr.js 的某种冲突。如果没有modernizr，我的页面似乎可以正常呈现，所以我正在删除它。

# sql - Redgate SQL 数据生成器 -> 审查 sqlgen 项目 -> “与映射数据相同”是什么意思？

> ID：10318402
> 
> 赞同：0
> 
> 时间：2012-04-25T15:04:25.607
> 
> 标签：sql, redgate, sqltools

我正在审查同事的 sqlgen 工作，但我无法弄清楚这在表生成设置中意味着什么。

通过以下方式指定行数：“与映射数据相同”

我的同事在每张桌子上都选择了这个，我只需要知道这是什么意思，我已经查看了文档并且无法找到它的定义。

我目前在第 2 版。可能不是最好的问题，但我需要一个答案，他离开了很长一段时间，我们的数据无法使用这个工具正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:17:36.250

“与映射数据相同”选项仅在您使用现有表或视图作为数据源时可用 - 它只是意味着生成器将插入源表或视图中的所有行。其他选项是：

*   数值 - 一组行数
*   表的比例 - 源表/视图的比例
*   生成时间 - 工具可以在设定的时间内生成尽可能多的数据

在网站上使用现有的表/视图作为数据源还有更多内容[，](http://www.red-gate.com/supportcenter/Content/SQL_Data_Generator/help/2.0/SDG_Mapping_SQL_tables_or_views)但它没有太多有用的东西。

# git - 通过 GitHub Web 应用程序直接将新文件上传到 Git 存储库

> ID：10318403
> 
> 赞同：30
> 
> 时间：2012-04-25T15:04:28.917
> 
> 标签：git, github

可以通过 Web 界面直接编辑存储在 GitHub 上的存储库中的文件。我们大多数人永远不会这样做，但它有它的用途。

![GitHub 上的编辑按钮](../Images/1fce715da944aebdae132593d0c169bc.png)

我教入门级课程。我想使用 Git 和 GitHub 来分发和收集作业（GitHub 提供免费的教育私人帐户）。但是，我不能要求完全新生的学生学习 Git，至少在最初的几周内不会。在最初的几周里，我想说

> “你可以通过点击 github.com 上的这一系列按钮来上传你的作业”

然后最终教他们如何使用命令行。

理想情况下，我希望他们能够上传新文件，而不仅仅是编辑现有文件。我找不到办法做到这一点。我如何将 GitHub Web 界面用于类似目的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-19T07:50:38.207

自 2016 年 2 月起，您可以从 GitHub Web 界面添加/创建/**上传新文件。**

请参阅“[将文件上传到您的存储库](https://github.com/blog/2105-upload-files-to-your-repositories)”：

> 您可以单击文件树顶部工具栏中的“上传文件”按钮。

[![https://cloud.githubusercontent.com/assets/1369864/12961550/b9a688ea-d006-11e5-96d3-ac91097192a5.png](../Images/3d1977c9dfb7a23ced4243e19cade97f.png)](https://i.stack.imgur.com/77bCF.png)

> 或者，您可以将文件从桌面拖放到文件树上。

[![https://cloud.githubusercontent.com/assets/1369864/12961164/a888b59e-d004-11e5-80a6-e9f32f17c4d5.gif](../Images/a3b8b92cf137d15fcf47a118d190e891.png)](https://i.stack.imgur.com/Ws6pd.gif)

这取代了[2012 answer](https://stackoverflow.com/a/13736450/6309)中描述的文件创建，并添加了上传功能（用于一个或多个文件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T03:24:44.230

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T15:33:57.573

我认为使用[gist.github.com](http://gist.github.com)是最简单的选择。每个 gist 都是一个 Git 存储库，可以从 Web 浏览器或 shell 访问，有一个评论按钮，虽然 gist 通常是单个文件，但它们可以包含多个文件。

gists 的缺点显然是神秘的 URL，并且除非您使用[单独的工具，否则您必须将文件内容复制粘贴到浏览器中](http://defunkt.io/gist/)，否则您必须将文件内容复制粘贴到浏览器中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T20:51:34.520

如果您只需要让他们编辑相同的文件（假设通过 Web 界面），您可以创建一个包含空文件或基本文件的骨架存储库，然后让学生分叉它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-29T12:10:15.163

如果您开始一个没有 README 文件的新项目，它将不会显示。

您至少需要一个文件。如前面的答案所示，您可以拖动文件或使用查找器或文件资源管理器选择它。

# bash - if else 和 awk ... 我的命令需要更正

> ID：10318408
> 
> 赞同：2
> 
> 时间：2012-04-25T15:04:53.030
> 
> 标签：bash, awk

我有两个文件 file1 是一个查询文件，而 file2 是一种字典，每一列都有。我想检查 file1 的元素是否存在于 file2 中，它应该给出 1 else 0 作为输出。

这就是我正在做的事情：

```
#!/bin/bash
for i in `cat file1 `
   do
     cat file2 | awk '{ if ($1=="'$i'") print 1 ; else 0 }'>>output
   done 
```

请提出改进​​命令的建议

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:26:05.847

看起来您的整个脚本简化为：

```
fgrep -f file1 file2 > output 
```

我应该补充一点，如果您没有可用的 fgrep，`grep -F`通常是相同的。

`fgrep`（或者，通常，`grep -F`）通常是用 Aho-Corisack 字符串匹配算法实现的，所以它通常比`grep`重复使用要快很多。要记住的一件事（这里并不*完全*清楚，但似乎很可能）是`f`in`fgrep`代表`fixed`- 它可以快速匹配许多替代固定字符串中的任何一个，但它根本*不*匹配REs -每个字符串都按字面意思简单匹配。

如果你需要 RE 匹配，你仍然可以使用`-f`grep 的选项，所以你会得到：

```
grep -f file1 file2 > output 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:18:59.113

单程：

内容`file1`：

```
monday
tuesday
wednesday
thursday
friday
saturday
sunday 
```

内容`file2`：

```
tuesday
saturday 
```

执行下一条`awk`命令：

```
awk 'FNR == NR { f2[ $1 ] = 1; next } FNR < NR { print (($1 in f2) ? 1 : 0) >"output" }' file2 file1 
```

内容`output`：

```
0
1
0
0
0
1
0 
```

# c# - XNA 4 2D Tiled Sprite - 奇怪的线条

> ID：10318418
> 
> 赞同：0
> 
> 时间：2012-04-25T15:05:18.300
> 
> 标签：c#, .net, xna, xna-4.0

我有一张 512x512 的图像，需要平铺作为背景。

我通过`SamplerState.LinearWrap`在图像上设置和设置更大的源矩形来做到这一点。

```
spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.NonPremultiplied, SamplerState.LinearWrap, DepthStencilState.Default, RasterizerState.CullNone);
spriteBatch.Draw(texture, bounds, bounds, Color.White);
spriteBatch.End(); 
```

`bounds`是`new Rectangle(0, 0, 1024, 768)`

现在它看起来像这样：

![游戏背景](../Images/92727fbfca6d4bff81a3db6ba1cd7dfd.png)

这些线是平铺图像的位置。原始 png 的边缘没有任何线条（我放大并在 Photoshop 中检查了它）。

这是怎么回事？ [这是 DropBox 上的示例项目](http://dl.dropbox.com/u/3702398/TestXnaTile.zip)。

我尝试使用非二次幂纹理，但它在`SamplerState`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:19:29.733

似乎是图像中的图形工件。

我将图像的一部分复制并粘贴到边缘，它按预期工作，您的代码正在工作。尝试使用不同的图像进行确认。

# c# - 在不丢失全局样式的情况下绑定列标题可见性

> ID：10318421
> 
> 赞同：0
> 
> 时间：2012-04-25T15:05:24.577
> 
> 标签：c#, wpf, listview, styles

我想将 wpf listview 的列标题可见性绑定到依赖属性，而不会丢失我使用的全局样式（表达式暗）。

我定义了一种风格：

```
<Style x:Key="myHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
   <Setter Property="Visibility" Value="{Binding ColumnHeaderVisibility}" />
</Style> 
```

然后我像这样应用它：

```
<GridView ColumnHeaderContainerStyle="{StaticResource myHeaderStyle}"> 
```

我正在使用表达黑暗主题。它是通过 MergedDictionaries 导入的，并且可以在运行时更改。

当列标题不可见时，一切都很好。但是当它可见时，它会以默认窗口样式显示，因为设置 ColumnHeaderContainerStyle 会覆盖表达式暗样式。

无法在原始样式上使用“BasedOn”，因为由于需要在运行时更改样式，所有资源都是动态的。BasedOn 仅适用于静态资源，不允许在运行时更改。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:29:21.997

不确定这是否可行，但您可以尝试将样式基于默认样式。

```
<Style x:Key="myHeaderStyle" TargetType="{x:Type GridViewColumnHeader}"  BasedOn="{StaticResource {x:Type GridViewColumnHeader}}">
   <Setter Property="Visibility" Value="{Binding ColumnHeaderVisibility}" />
</Style> 
```

# cakephp - 带有#hash的cakephp分页链接

> ID：10318427
> 
> 赞同：0
> 
> 时间：2012-04-25T15:05:31.723
> 
> 标签：cakephp, view, hash, pagination

我有一个带有分页助手的 cakephp 视图。我希望分页链接以这样的 #hash 结尾 'http://localhost:8888/uk/brand/sort:name/direction:desc#dist' 我找不到在 cakephp 2.0 中添加此选项的选项api。

```
<?php echo $this->Paginator->sort('name');?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:12:25.200

在第三个参数中，您可以指定一个 url 键，它与分页 url 合并。路由器接受一个`#`密钥，所以你可以尝试这样的事情：

```
echo $this->Paginator->sort('name', 'Name', array(
  'url'=> array(
    '#' => 'dist'
  )
)); 
```

# c# - ASP.NET MVC3 通用控制器

> ID：10318428
> 
> 赞同：0
> 
> 时间：2012-04-25T15:05:36.217
> 
> 标签：c#, asp.net-mvc-3, generics, controller

我今天写了一些代码，有点味道。

```
public class SomeController : GenericController<SomeViewModel, SomeModel> 
```

这是一个受限于特定模型和视图模型的通用控制器；现在闻起来的事实是，我正在定义模型和视图模型之间的关系，我不介意控制器知道视图模型，这很好。我希望这样做是让控制器以某种方式询问视图模型，因为这就是我认为耦合的地方。我能想到的唯一方法是在控制器工厂。这可以检查提供的 ViewModel 并使用在运行时定义的模型创建控制器的实例。

所以上面会变成

```
public class SomeController : GenericController<SomeViewModel, TModel> where TModel : Model 
```

并且只能在运行时输入。关于如何做到这一点的任何想法？反射？仿制药？属性？或者这只是一个非常糟糕的主意？

## ============编辑===========

使用泛型的原因是整个控制器中有很多共享代码，控制器使用实习生使用存储库的服务。服务和存储库取决于域对象的类型。通用控制器中的方法`public ViewResultBase Add(TViewModel viewModel)`使用通用映射器，它将 ViewModel 转换为模型并将其传递给服务 -> 存储库。

## ============编辑===========

这是基类中的一个片段，显示了一些使用通用参数的共享代码

```
 [HttpGet]
    public virtual PartialViewResult List(int id)
    {

        var model = BuildListDetails(id);

        return PartialView(model);
    }

    [Dependency]
    public IService<TDomainObject> Service { get; set; }

    protected IEnumerable<TViewModel> BuildListDetails(int id)
    {

        var nodes = Service.GetData(UserState.Current.User.UserID, id);
        if (nodes == null) return null;

        return nodes.Select(n => ModelMapperFactory<TDomainObject, TViewModel>.Instance.Create(n)).AsEnumerable();
    } 
```

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:34:51.713

达林是对的（一如既往）。控制器可以使用不同的模型和不同的视图以及不同的视图模型。将控制器键入到一个特定的视图模型和模型是没有意义的，除非您知道您将始终只使用一个视图模型和一个模型。

视图模型和模型之间存在关联。此关联在控制器中处理。这是它的目的之一。不要花太多精力尝试通用化控制器，它们通常只包含与其使用相关的非常具体的代码，并且几乎没有可重用的选项。当您确实需要更多选项时，请考虑使用仅抽象可重用部分的方面或基类（有些人在基类中进行身份验证逻辑，我不同意……但这是一种选择……其他人添加自己的自定义IPrincipal 或其他类型的通用特性。在大多数情况下，这不需要使用泛型）。

# reporting-services - 以 SSAS 作为数据源和参数的 SSRS

> ID：10318430
> 
> 赞同：1
> 
> 时间：2012-04-25T15:05:45.843
> 
> 标签：reporting-services

谁能告诉我如何在这里使用 SSRS 参数？我使用 SSAS 作为数据源，报告显示一切正常，除了我想根据参数值过滤结果。

```
SELECT NON EMPTY { [Measures].[Count of ID], [Measures].[Average of Amount] } ON COLUMNS, NON EMPTY { (STRTOMEMBER(@Region,CONSTRAINED) * [Query].[State].[State].ALLMEMBERS ) } DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME ON ROWS FROM [Model] CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING, FONT_NAME, FONT_SIZE, FONT_FLAGS 
```

参数是报告中的@Region。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T16:38:00.290

最简单的方法是在设置 DataSet 时，使用 QueryDesigner 从 SSAS 中提取您想要的内容。当您指定维度过滤器时，最右侧是标题“参数”下的复选框。选中此项，它将自动为您生成 SSRS 参数。

这将创建一个期望如下值的参数，这实际上是一个维度过滤器：

```
\[DimensionName\].\[AttributeName\].&\[Value\] 
```

如果您需要通过 MDX 手动执行此操作，请查看您的 MDX 表达式，在我看来（在我非常有限的 MDX 经验中 - 仍在学习）您正在尝试在 ROWS 中指定参数（过滤器），而不是在 FROM 子句中应用它。

我希望它可能更像这样？：

```
SELECT 
NON EMPTY { [Measures].[Count of ID], [Measures].[Average of Amount] } ON COLUMNS
,NON EMPTY { ([DimensionName].[AttributeName].ALLMEMBERS * [Query].[State].[State].ALLMEMBERS ) } DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME ON ROWS 
FROM 
(SELECT (STRTOSET(@Region,CONSTRAINED) ON COLUMNS FROM [Model])
WHERE ( IIF( STRTOSET(@Region, CONSTRAINED).Count = 1, STRTOSET(@Region, CONSTRAINED), [DimensionName].[AttributeName].currentmember ) ) CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING, FONT_NAME, FONT_SIZE, FONT_FLAGS 
```

**将DimensionName**和**AttributeName**替换为多维数据集定义中的实际值。这假设您的`@Region`参数与我上面指定的格式相同。如果没有，您可以在将报表参数分配给 DataSet 时替换 DataSet 属性中的其余语法。

Apologies if this doesn't work, I'm working off a limited knowledge of MDX at the moment, but I figured a partial answer is better than none at all, right?

# vba - Excel宏一次将一行连接到文件末尾

> ID：10318431
> 
> 赞同：2
> 
> 时间：2012-04-25T15:05:54.437
> 
> 标签：vba, excel, concatenation

我需要一个 Excel 宏来连接每行的七列数据，直到到达数据的末尾。例如，如果我有这样的公式：

```
=A1&B1&C1&D1&E1&F1&G1 
```

如何编写宏，以便它以这样的顺序递增到文件末尾的每一行？

```
=A1&B1&C1&D1&E1&F1&G1
=A2&B2&C2&D2&E2&F2&G2
=A3&B3&C3&D3&E3&F3&G3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T16:48:24.643

有这么多答案，我和 assylias 强调的重点已经浪费了:)

但是，如果您仍然想要 VBA 答案。使用此方法。这比或**快得多**。`Looping``Autofill`

```
Option Explicit

Sub Sample()
    Dim LastRow As Long
    Dim Ws As Worksheet

    Set Ws = Sheets("Sheet1")

    LastRow = Ws.Range("A" & Ws.Rows.Count).End(xlUp).Row

    '~~> If your range doesn't have a header
    Ws.Range("H1:H" & LastRow).Formula = "=A1&B1&C1&D1&E1&F1&G1"

    '~~> If it does then
    Ws.Range("H2:H" & LastRow).Formula = "=A2&B2&C2&D2&E2&F2&G2"
End Sub 
```

如果您有 1000 行，那么您可能需要在运行代码之前关闭`Screenupdating`并更改`Calculation`为手动，然后在代码末尾重置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:30:18.083

我认为最简单的方法就是按照 assylias 的说法填写，但如果你想使用 VBA：

```
Selection.AutoFill Destination:=Range("Your Fill Range"), Type:=xlFillDefault 
```

应该复制到其他行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T16:23:34.943

我同意 100% 的评论和其他答案，为什么你需要 VBA 来做到这一点，但只是为了回答你原来的问题，这就是我将如何完成它：

```
Sub FillAllWithFormula()
Dim i As Variant
Dim wsht As Worksheet

    'If you are using this for a specific Worksheet use the following
    Set wsht = ThisWorkbook.Worksheets(yourWorksheetName)

    'or if you are always using this for the active sheet use the following
    Set wsht = ActiveSheet

    For i = 1 To wsht.Rows.Count
        'Replace "X" with the column letter you want your formula to appear in
        wsht.Range("X" & i).Formula = "=A" & i & "&B" & i & "&C" & i & "&D" & i & "&E" & i & "&F" & i & "&G" & i
    Next

    Set wsht = Nothing

End Sub 
```

# java - 关于带有java小程序的图

> ID：10318432
> 
> 赞同：0
> 
> 时间：2012-04-25T15:05:55.653
> 
> 标签：java

我想写一个程序，用java在窗口中显示一个图形，程序可以编译和运行而没有错误，但是在窗口中看不到图形。代码有什么问题？多谢。

```
import java.awt.*;
import java.applet.*;
import java.io.File;
import java.net.URL;
import java.awt.image.*;
import java.awt.image.ImageObserver;
public class MyApp extends Applet implements ImageObserver
{
Image img;

String imgPath="C:\\2000.JPEG";
int xpoint=50,ypoint=50;
public void init()
{
    setBackground(Color.blue);
    setForeground(Color.green);
    imgPath="C:\\2000_CannotViewImage.gif";
    }
public void paint(Graphics g)
{
    URL imgURL=getDocumentBase();
    img=getImage(imgURL,imgPath);
    g.drawImage(img, xpoint, ypoint, this);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:14:34.763

Try

```
import java.applet.Applet;
import java.awt.Graphics;

public class MyImage extends Applet{
    private java.awt.Image image1;
    public void init(){
        image1=getImage(getDocumentBase(),"android.png");
    }
    public void paint(Graphics g){
        g.drawImage(image1,0,0,this);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:11:12.273

我不太了解 Swing 或 AWT，所以我对这部分无能为力。

如果不签署小程序，您将无法访问本地硬盘。这是一个棘手的过程。为避免将图像放入 JAR 中并使用 getResourceAsStream() 来获取它。

将 paint() 中的所有内容包装在 try-catch 中，如果发生异常则打印出异常。

# jquery - jQuery 选择器错误 element in IE 6 & 7? Or did I miss something Found a really weird problem with jQuery in IE7 today where it isn't finding selectors properly inside an element. Here's the HTML code:<param name="allowfullscreen" value="true"> <param name="movie" value="http://vimeo.com/"> <param name="allowscriptaccess" value="always"> <param name="movie" value="http://vimeo.com/moogaloop.swf"> <param name="wmode" value="opaque"> and the relevant javascript: console.log(jQuery("#firstVideo param").length); console.log(jQuery("#firstVideoWrap param").length); console.log(jQuery("#secondVideo param").length); console.log(jQuery("#secondVideoWrap param").length); It is giving the output: 5 2 5 3 Here it is in JSFiddle: http://jsfiddle.net/uGpUy/2/ It seems that IE isn't counting the number of param's on an object and instead is counting all param's on the entire page. While when I use the wrapping div it counts them correctly. Also If I do: jQuery("#secondVideo > param").length It works correctly. Is this a jQuery bug or something I've done wrong in my code? EDIT: I've submitted a jQuery bug ticket for this: http://bugs.jquery.com/ticket/11646, will see how that progresses. I don't know Swing or AWT well so I can't help much with that part. You won't be able to access the local hard disk without signing the applet. That's a tricky process. To avoid going through that put the image in the JAR and use getResourceAsStream() to get to it. Wrap everything in paint() in a try-catch and print out the exception if one occurs. jqueryjquery-selectorsinternet-explorer-7internet-explorer-6 4 2 回答 2 This answer is useful 1 它看起来是与标签相关的错误。如果你用标签替换你的标签，它就像你想要的那样工作： 2 2 3 3 我确实通过.children()在选择器上使用它来工作： console.log(jQuery("#firstVideo").children("param").length); console.log(jQuery("#firstVideoWrap param").length); console.log(jQuery("#secondVideo").children("param").length); console.log(jQuery("#secondVideoWrap param").length); 输出： 2 2 3 3 另一个注意事项： 该错误似乎在该.find()方法中，因为当我尝试使用它而不是.children()它返回时： 5 2 5 3 于 2012-04-25T15:37:14.873 回答 This answer is useful 0 更重要的是，在 IE8 中，所有四个长度都是 0。使用jQuery("#secondVideo > param")也会产生 0...不知道为什么会发生。 于 2012-04-25T15:16:57.483 回答 Related 2 asp.net-mvc - WebApi 控制器在 Entity Framework 5 和 MVC 4 项目中返回值 2 javascript - 命名空间的自动加载 i18next 1 assembly - 如何在 asm(x87) 中查看并放入数组 4 html - 如何在 CSS/HTML 中获得粘性页脚？ 2 c1-cms - 从 Composite C1 中删除全局内容语言声明 3 php - 为 HTML 编码 mySQL 文本？ 1 java - 扫描仪给出相同的值 2x 而不是 1 2 php - 使用 CakePHP 构建带有子域的 Web 应用程序 3 opengl - OpenGL 颜色插值 1 ruby-on-rails - 带有lazy_chart ruby gem的Highcharts面积图 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10318435
> 
> 赞同：1
> 
> 时间：
> 
> 标签：jquery, jquery-selectors, internet-explorer-7, internet-explorer-6

Found a really weird problem with jQuery in IE7 today where it isn't finding selectors properly inside an element. Here's the HTML code:

```
<DIV id=firstVideoWrap>
    <OBJECT style="FLOAT: left" id=firstVideo width=300 height=300>
        <PARAM NAME="allowfullscreen" VALUE="true" />
        <PARAM NAME="movie" VALUE="http://vimeo.com/">
    </OBJECT>
</DIV>
<DIV id=secondVideoWrap>
    <OBJECT style="FLOAT: left" id=secondVideo width=300 height=300>
        <PARAM NAME="allowscriptaccess" VALUE="always" />
        <PARAM NAME="movie" VALUE=http://vimeo.com/moogaloop.swf />
        <PARAM NAME="wmode" VALUE="opaque" />
    </OBJECT>
</DIV> 
```

and the relevant javascript:

```
console.log(jQuery("#firstVideo param").length);
console.log(jQuery("#firstVideoWrap param").length);
console.log(jQuery("#secondVideo param").length);
console.log(jQuery("#secondVideoWrap param").length); 
```

It is giving the output:

```
5
2
5
3 
```

Here it is in JSFiddle: [http://jsfiddle.net/uGpUy/2/](http://jsfiddle.net/uGpUy/2/)

It seems that IE isn't counting the number of param's on an object and instead is counting all param's on the entire page. While when I use the wrapping div it counts them correctly.

Also If I do:

```
jQuery("#secondVideo > param").length 
```

It works correctly.

Is this a jQuery bug or something I've done wrong in my code?

EDIT: I've submitted a jQuery bug ticket for this: [http://bugs.jquery.com/ticket/11646](http://bugs.jquery.com/ticket/11646), will see how that progresses.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:37:14.873

它看起来是与`<OBJECT />`标签相关的错误。如果你用`<OBJECT />`标签替换你的`<DIV />`标签，[它就像你想要的那样工作](http://jsfiddle.net/uGpUy/8/)：

```
2
2
3
3 
```

* * *

[我确实](http://jsfiddle.net/uGpUy/7/)通过[`.children()`](http://api.jquery.com/children/)在`<OBJECT />`选择器上使用它来工作：

```
console.log(jQuery("#firstVideo").children("param").length);
console.log(jQuery("#firstVideoWrap param").length);
console.log(jQuery("#secondVideo").children("param").length);
console.log(jQuery("#secondVideoWrap param").length); 
```

**输出：**

```
2
2
3
3 
```

* * *

**另一个注意事项：**

该错误似乎在该[`.find()`](http://api.jquery.com/find/)方法中，因为[当我尝试使用它](http://jsfiddle.net/uGpUy/10/)而不是[`.children()`](http://api.jquery.com/children/)它返回时：

```
5
2
5
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:16:57.483

更重要的是，在 IE8 中，所有四个长度都是 0。使用`jQuery("#secondVideo > param")`也会产生 0...不知道为什么会发生。

# android - PhoneGap AlertDialog 列表

> ID：10318442
> 
> 赞同：2
> 
> 时间：2012-04-25T15:06:32.597
> 
> 标签：android, list, cordova, android-alertdialog

刚刚开始使用 PhoneGap 并寻找一种方法来创建此处显示的那种对话框：http: [//developer.android.com/guide/topics/ui/dialogs.html#AddingAList](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList) 但只找到了 notification.alert 和 notification.confirm - 但必须有某种方法来创建列表对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:50:07.380

只需在您的 html 中使用 <select/> 框。当您单击它时，将显示的对话框类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:01:44.887

我为此创建了一个 Phonegap Android 插件。使用 Phonegap Android 插件时，您需要执行以下操作：

1.  在 /src 文件夹中添加 Java 文件
2.  为您的 Phonegap 插件设置更新您的 /res/xml/config.xml
3.  在您的 HTML/Javascript 中使用 cordova.exec() 调用您的插件

如果您需要额外的指南，请检查[Phonegap 插件开发。](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

你可以在 github 下载我的[AlertDialog List](https://github.com/kidino/phonegap-alertdialoglist-plugin)插件。

假设您在 HTML/Javascript 中正确设置了 Phonegap Android Eclipse 以及插件，您可以调用这样的东西。

```
<script>
var fruitlist = [
        "The Fruit List Title", // this is the title 
        "Orange", 
        "Apple", 
        "Watermelon", 
        "Papaya", 
        "Banana", 
        "Pear" 
    ];

function showlist(thelist) {
    cordova.exec(
        function(listitem) {
            alert( "You selected "+ thelist[listitem] );
        }, 
        function(error) {
            alert("Error Occured");
        }, "AlertList", "alertlist", thelist );
}
</script>

<a href="javascript:showlist(fruitlist)">Pick your fruit</a> 
```

我想我还应该提醒您，您需要`cordova`在 HTML/Javascript 中正确加载。我们通过监听 deviceready 事件来做到这一点。否则，cordova.exec 将无法工作。这就像 jQuery 中的 $(document).ready。

```
document.addEventListener("deviceready", your_function, false); 
```

**AlertDialog 列表 Phonegap Android 插件**

[https://github.com/kidino/phonegap-alertdialoglist-plugin](https://github.com/kidino/phonegap-alertdialoglist-plugin)

# c# - 非静态字段、方法或属性需要对象引用

> ID：10318445
> 
> 赞同：6
> 
> 时间：2012-04-25T15:06:43.987
> 
> 标签：c#, wpf, linq

嗯，我似乎有问题，在我的主窗口上，我正在尝试这样做：

```
 public static readonly DependencyProperty StudentIDProperty = DependencyProperty.Register("StudentID", typeof(String), typeof(LoginWindow), new PropertyMetadata(OnStudentIDChanged));

    public string StudentID
    {
        get { return (string)GetValue(StudentIDProperty); }
        set { SetValue(StudentIDProperty, value); }
    }

    static void OnStudentIDChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        (d as LoginWindow).OnStudentIDChanged(e); // 
    } 
```

在我的另一个窗口上，我有这个：

```
MainWindow.StudentID = (String)((Button)sender).Tag; 
```

但我得到了错误：

```
An object reference is required for the non-static field, method, or property 'WpfApplication4.MainWindow.StudentID.get' 
```

有谁知道我该如何解决这个问题？它适用于我的用户控件，但不适用于其他窗口？

我的主窗口实际上被命名为 MainWindow，所以我可能对此感到困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T15:11:39.977

You need to set StudentID on an instance of your MainWindow class. Try

```
((MainWindow)Application.Current.MainWindow).StudentID = (String)((Button)sender).Tag; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:10:17.577

因为`MainWindow`是您的类的名称，而不是 MainWindow 的实例。你需要类似的东西：

```
MainWindow mw = new MainWindow();
mw.StudentID = (String)((Button)sender).Tag; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-14T15:58:34.070

我试图`TextBox`在`MainWindow`from a中更新 a`UserControl`并得到错误

```
Error 1: An object reference is required for the non-static field, method, or property 

'WpfApplication1.MainWindow.textBox1' 
```

我通过编写以下内容解决了此错误：

```
//MainWindow.textBox1.Text = ""; //Error 1

((MainWindow)Application.Current.MainWindow).textBox1.Text = "";//This is OK! 
```

这是由 Rytis I 建议的

# jquery - 减少“明显”页面加载时间——如何在“后台”加载资产？

> ID：10318447
> 
> 赞同：0
> 
> 时间：2012-04-25T15:06:50.130
> 
> 标签：jquery, image, optimization, load

我有一个网站有几个大的 jpg 用作背景图片

[http://bitstream.ca/beta3/](http://bitstream.ca/beta3/)

页面加载时会出现几秒钟的延迟，然后才会正确显示任何内容。

任何人都可以推荐一些方法，无论是使用 jQuery 还是其他方法，在初始页面加载后智能地加载额外的资产？

即，伪逻辑将是
1 - 加载初始页面显示的最小资产
2 - 在 #1 完成后，加载页面功能所需的任何其他资产
3 - 在 #2 完成后让 DOM 知道我们准备好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:41:47.300

yes, there are a couple optimizations you can do.

firstly, [sprite](http://paulstamatiou.com/how-to-optimize-your-site-with-image-sprites) and [optimize](http://inobscuro.com/tutorials/optimizing-images-for-web-35/) your images in order to make them as small and easy to load in one request as possible.

in terms of dynamic loading, there are a number of plugins you can use to lazy load images and other content which you don't need right away. check out:

*   [Yepnope](http://yepnopejs.com/)
*   [Jquery deferreds](http://api.jquery.com/jQuery.when/) (which allows you to write your own little plugin pretty easily)
*   [Lazy Load](http://www.appelsiini.net/projects/lazyload)

# ajax - 带有 ssl 重定向和 ajax 帖子的 django 给出 301 错误

> ID：10318449
> 
> 赞同：1
> 
> 时间：2012-04-25T15:06:53.893
> 
> 标签：ajax, django, ssl

我正在使用[这个 django 片段 [1]](http://djangosnippets.org/snippets/85/)重定向到我的 https 网站。我知道它不适用于 POST 请求，所以我没有`{'SSL': True }`在我的`urls.py`. 但是，我总是收到 301 错误（在我的访问日志中），尽管视图执行了它被要求执行的操作。

该视图由 ajax 请求“调用”并返回一个 json 对象。

```
def confirm(request, username):
    if username == request.user.username:
        user = get_object_or_404(User, username=username)
        if request.method == 'POST':
            response_dict = {
                'status': True,
                'added_total': count,
                'username': username,
                'message': message
            }
            return HttpResponse(simplejson.dumps(response_dict), mimetype='application/javascript')
        else:
            return HttpResponseRedirect('/fx/%s?page=%s' % (username, '1'))
    else:
        raise Http404(u'Not a valid user') 
```

我也尝试添加`{'SSL': True}`参数，但仍然收到 301 错误。

对于 ajax 发布请求，我也使用这个片段：

```
$.ajaxSetup({
    beforeSend:function (xhr, settings) {
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != "") {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
            // Only send the token to relative URLs i.e. locally.
            xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
        }
    }
}); 
```

我究竟做错了什么？

编辑：这是我的行动`urls.py` `url(r'^confirm/(\w+)/$', confirm),`

[1] [http://djangosnippets.org/snippets/85/](http://djangosnippets.org/snippets/85/)

# backbone.js - RequireJS 在视图初始化之前加载脚本

> ID：10318451
> 
> 赞同：0
> 
> 时间：2012-04-25T15:06:59.897
> 
> 标签：backbone.js, requirejs

我有一个 Backbone 视图作为 requirejs 模块。问题是 requirejs在视图初始化之前加载[http://localhost/remote/script/here.js 。](http://localhost/remote/script/here.js)是因为脚本不在 requirejs 模块中吗？

```
define([
    'jquery',
    'undescore',
    'backbone',
    'http://localhost/remote/script/here'   
], function($, _, Backbone, Luajs){
    var View = Backbone.View.extend({
        initialize : function(options) {
        },
        render : function() {
            this.$el.html('<p>my view</p>')
            return this;
        }
    });

    return View;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:30:06.633

您作为第一个参数的数组`define` *是*您的视图的依赖关系。所以是的，它在`View`. 另请注意，除非您使用修改版本的主干和下划线，否则它们不符合 AMD 标准。您需要用插件包装它们才能正确加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T14:48:16.857

您尝试在加载模块后定义视图 Backbone。您可以在 RequireJS 的 define() 方法中执行此操作。此函数的数组包含定义模块依赖关系的参数。

# sql - SQL 查询有时有效

> ID：10318454
> 
> 赞同：0
> 
> 时间：2012-04-25T15:07:13.190
> 
> 标签：sql

我有这个查询，它似乎大部分时间都在工作，但是当我知道它应该返回一些东西时，我仍然得到 NULL，

我从 开始`select`，然后这个

```
(select sum(total) from orders
        where customer = 9
        and iscredit = 1
        and isdeleted = false and not id = 1560) 
```

这种代码和平让我获得了客户 9 的订单总数，而不是当前订单，就像以前的订单总数一样……还请注意 iscredit = 1 表示这些是信用订单。

接下来我要添加这个查询

```
(select sum(total) from orders
        where customer = 9
        and iscredit = 0
        and isdeleted = false and not id = 1560) 
```

做同样的事情，但 iscredit 是 0 所以订单不是学分。

接下来我想减去此查询已支付的费用

```
- (select ifnull(sum(p.amount), 0) from payment p
        inner join orders o
        on p.order = o.id
        where o.customer = 9) as previous 
```

所以所有这些都是我的查询的样子......

```
select 
(
    select sum(total) 
    from orders
    where customer = 9 and iscredit = 1 and isdeleted = false and not id = 1560
) 
+ 
(
    select sum(total) 
    from orders
    where customer = 9 and iscredit = 0 and isdeleted = false and not id = 1560
) 
- 
(
    select ifnull(sum(p.amount), 0) 
    from payment p
        inner join orders o
            on p.order = o.id
    where o.customer = 9
) as previous 
```

有没有更好的方法来写这个？

任何提示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:11:33.687

Something like this will lump the first two totals together.

```
(select sum(total)
from orders
where customer = 0
and (iscredit = 1 or iscredit = 0)
and isdeleted = false
and not id = 1560) 
```

This will return null for no matching rows, so you might want to add:

```
(select ifnull(sum(total), 0)
from orders
where customer = 0
and (iscredit = 1 or iscredit = 0)
and isdeleted = false
and not id = 1560) 
```

This is probably the source of your problems.

# version-control - VCS：仅推送源代码目录

> ID：10318457
> 
> 赞同：1
> 
> 时间：2012-04-25T15:07:20.940
> 
> 标签：version-control, mercurial

我从事Java项目。如何只推送没有临时文件、构建文件和项目文件的源目录？我使用 Mercurial。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:02:54.923

Mercurial 只会推送**history**，这意味着只有您要求它跟踪 (with `hg add`) 并随后提交 (with `hg commit`) 的内容才会被推送。

所以就像吉姆说的，你应该设置[`.hgignore`](http://www.selenic.com/mercurial/hgignore.5.html)文件。在将文件添加到项目之前执行此操作，并仔细检查`hg status`仅列出您要添加的文件。然后运行`hg add`将它们全部添加。

如果您已经将临时文件和构建工件置于版本控制之下，那么您可以使用`hg forget`来停止跟踪它们。你仍然会在历史中携带它们，所以如果我们谈论的是几十兆字节，那么你可能想要重新创建存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:47:43.150

创建一个[.hgignore](http://www.selenic.com/mercurial/hgignore.5.html)文件。

# php - 讨厌 reCAPTCHA - CakePHP Captcha 替代品？

> ID：10318458
> 
> 赞同：2
> 
> 时间：2012-04-25T15:07:21.543
> 
> 标签：php, cakephp, captcha, recaptcha

我想将验证码添加到我的网站，我目前安装了 reCAPTCHA，但我讨厌它。他们让一些图像很难进入，我知道这会惹恼我的客户，他们最终会离开。

我只是在寻找一个可以与 CakePHP 一起使用的简单验证码；任何人都可以推荐任何可与 CakePHP 一起使用的 reCAPTCHA 替代品吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:13:48.693

CakePHP 只是一个在 PHP 上运行的框架。任何适用于 PHP 的 CAPTCHA 都适用于 CakePHP。 谷[歌](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=php%20captcha) [显示](http://www.phpcaptcha.org/) [有](http://www.abeautifulsite.net/blog/2011/01/a-simple-php-captcha-script/)[很多](http://code.google.com/p/cool-php-captcha/) [。](http://www.ejeliot.com/pages/php-captcha)[_](http://www.webappers.com/2009/09/29/open-source-php-captcha-for-your-forms/)

想想您是如何将 reCAPTCHA 集成到您的站点中的…… reCAPTCHA 没有特定于 CakePHP 的插件（至少我不知道），因此您可以以相同的方式集成任何其他 PHP CAPTCHA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:23:24.087

你检查[了安全图像](http://www.phpcaptcha.org/)吗？它适用于您自己的服务器，您可以调整许多规格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:15:31.907

在垃圾邮件保护方面，Akismet 是我的最爱。它非常有效。更多关于 akismet 的信息可以在这里找到[http://akismet.com/](http://akismet.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:54:39.520

我使用简单的数学验证码和被动验证码：http: [//www.dereuromark.de/2010/08/09/how-to-implement-captchas-properly/](http://www.dereuromark.de/2010/08/09/how-to-implement-captchas-properly/)

数学验证码也适用于残障人士，但非常基础。被动验证码对前端用户是隐藏的和不可见的，但对机器人等提供基本保护。

您可以自己轻松编写一些验证码功能。请记住不要以破坏多个选项卡的方式使用会话（非常糟糕的编码，但经常看到）。

# java - 在 playframework 2.0 中，如何在模板中使用会话对象？

> ID：10318462
> 
> 赞同：4
> 
> 时间：2012-04-25T15:07:28.010
> 
> 标签：java, playframework, playframework-2.0

在 playframework 1.x 中，会话只是模板中的一个隐式对象，但它似乎在 playframework 2.0 中消失了。有没有办法让我在模板中使用会话对象？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T19:02:50.407

如果我没记错的话，您应该能够像这样获得存储在会话中的值：

```
@session.get("mySessionVar") 
```

# odbc - unixodbc 驱动程序管理器在安装时无法打开指定的库

> ID：10318463
> 
> 赞同：8
> 
> 时间：2012-04-25T15:07:29.837
> 
> 标签：odbc, archlinux, unixodbc, openedge, progress-db

我正在使用 ArchLinux，我正在尝试安装 OpenEdge 进度驱动程序，以便我可以通过 PHP 访问它。我已经安装了 unixodbc 包和驱动程序，但是当我通过 isql 或 PHP 测试连接时，我得到了同样的错误......

```
# isql -3 SUBS2A
[01000][unixODBC][Driver Manager]Can't open lib '/usr/dlc/odbc/lib/pgoe1023.so' : file not found
[ISQL]ERROR: Could not SQLConnect 
```

搞砸的是“/usr/dlc/odbc/lib/pgoe1023.so”目前存在，我什至从“/usr/dlc”符号链接它。

以下是我的 .ini 文件...

odbc.ini

```
[SUBS2A]
Description = ODBC Driver for Progress
Driver = /usr/dlc/odbc/lib/pgoe1023.so
FileUsage = 1 
```

odbcinst.ini（我删除了一些凭据，因为它无关紧要）

```
[ODBC-test]
Description = SUBS2A
Driver = SUBS2A
Server = 192.168.1.2
Port = 4000
APILevel=1
ConnectFunctions=YYN
CPTimeout=60
DriverODBCVer=03.60
FileUsage=0
SQLLevel=0
UsageCount=1
ArraySize=50
DefaultLongDataBuffLen=2048
DefaultIsolationLevel= READ COMMITTED
StaticCursorLongColBuffLen=4096 
```

*编辑*添加更多信息...

它们似乎都是 32 位的，但我不知道我在做什么。

```
[root@Crux etc]# file /usr/bin/isql
/usr/bin/isql: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.27, BuildID[sha1]=0xd1bc16c119                          bb5cad6fea9e2a9abc1d06794a2775, stripped
[root@Crux etc]# file /usr/dlc/odbc/lib/pgoe1023.so
/usr/dlc/odbc/lib/pgoe1023.so: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, not stripped 
```

看来它确实缺少一些依赖项......

```
[root@Crux lib]# ldd pgoe1023.so
        linux-gate.so.1 =>  (0xb77c2000)
        libpthread.so.0 => /lib/libpthread.so.0 (0xb7499000)
        librt.so.1 => /lib/librt.so.1 (0xb7490000)
        libpgicu23.so => not found
        libdl.so.2 => /lib/libdl.so.2 (0xb748b000)
        libstdc++-libc6.2-2.so.3 => not found
        libm.so.6 => /lib/libm.so.6 (0xb745e000)
        libc.so.6 => /lib/libc.so.6 (0xb72bc000)
        /lib/ld-linux.so.2 (0xb77c3000) 
```

*更新*

我将“libpgicu23.so”复制到/usr/lib，它解决了这个问题，但我仍然需要“libstdc++-libc6.2-2.so.3”，但是当我从互联网上抓取一个时，它说“加载时出错共享库：/usr/lib/libstdc++-libc6.2-2.so.3：ELF 文件操作系统 ABI 无效”

实际上，我什至创建了从“libstdc++-libc6.2-2.so.3”到“libstdc++.so”的符号链接，但即使它通过 ldd 解决了问题，当我查询 isql..

> isql：符号查找错误：/usr/dlc/odbc/lib/pgoe1023.so：未定义符号：__builtin_vec_new

我从来没有在 *nix 机器上安装 odbc，但我们在 windows 机器上做了同样的事情，它工作得很好。任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T15:52:11.637

检查 unixODBC 和您的驱动程序是否具有相同的体系结构，即运行：

```
which isql
file xxx (whatever came back from above)
file /usr/dlc/odbc/lib/pgoe1023.so 
```

它们都应该是 32 位或 64 位。64 位 unixODBC 不能使用 32 位驱动程序，反之亦然。

你不应该需要那个符号链接。

在 /usr/dlc/odbc/lib/pgoe1023.so 上运行 ldd 以确保找到所有依赖项。

检查 /usr/dlc/odbc/lib/pgoe1023.so 是否可执行。

顺便说一句，我认为你的标签是错误的，因为你的 odbc.ini 文件内容应该是 odbcinst.ini ，反之亦然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:27:44.590

要检查的一件事是驱动程序链接的 unixODBC 库的次要版本号。从 unixODBC 2.3.1 开始，我将次要库编号更改为 2，以反映 64 位平台上 SQLLEN 大小的变化。但是，如果驱动程序库与早期版本链接，它将寻找 libodbc.so.1，而当前来源提供 libodbc.so.2。简单的解决方案是提供从 *.so.1 到 *.so.2 的符号链接。libodbcinst.so 也是如此，所以也要检查一下。

# php - 尝试替换 PHP 中的高度和宽度值

> ID：10318466
> 
> 赞同：3
> 
> 时间：2012-04-25T15:07:33.360
> 
> 标签：php, regex, preg-replace

尝试用 PHP 替换字符串（$content）中的 height="" 和 width="" 值，我尝试 preg replace 无济于事，并建议我做错了什么？

示例内容为：

```
$content = '<iframe width="560" height="315" src="http://www.youtube.com/embed/c0sL6_DNAy0" frameborder="0" allowfullscreen></iframe>'; 
```

下面的代码：

```
if($type === 'video'){

        $s = $content;
        preg_match_all('~(?|"([^"]+)"|(\S+))~', $s, $matches);

        foreach($matches[1] as $match){

            $newVal = $this->_parseIt($match);
    preg_replace($match, $newVal, $s);

        }

    } 
```

在这里我只是参加比赛并搜索我的高度和宽度

```
function _parseIt($match)
{
    $height = "height";
    $width = "width";

    if(substr($match, 0, 5) === $height){

        $pieces = explode("=", $match);
        $pieces[1] = "\"175\"";

        $new = implode("=", $pieces);
        return $new;

    } 

    if(substr($match, 0, 5) === $width){

        $pieces = explode("=", $match);
        $pieces[1] = "\"285\"";

        $new = implode("=", $pieces);
        return $new;

    }

    $new = $match;
    return $new;

} 
```

可能有更短的方法可以做到这一点，但是，我真的在 6 个月前才开始编程。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T15:24:43.683

您可以使用`preg_replace`. 它可以采用要匹配的正则表达式数组和替换数组。你想匹配`width="\d+"`和`height="\d+"`。（如果您正在解析任意 html，您需要扩展正则表达式以匹配可选的空格、单引号等）

```
$newWidth = 285;
$newHeight = 175;

$content = preg_replace(
   array('/width="\d+"/i', '/height="\d+"/i'),
   array(sprintf('width="%d"', $newWidth), sprintf('height="%d"', $newHeight)),
   $content); 
```

# javafx - 如何将舞台大小调整与组件大小调整绑定？

> ID：10318467
> 
> 赞同：18
> 
> 时间：2012-04-25T15:07:45.233
> 
> 标签：javafx, javafx-2, fxml

我有一个带有 FXML 的 JavaFX 2.0 应用程序。我希望在调整带有应用程序的窗口大小时调整组件（文本字段、组合框、布局等）的大小。所以...

*   正如在[JavaFX 的 Oracle 文档](https://docs.oracle.com/javase/8/javafx/properties-binding-tutorial/binding.htm)中所写的那样，要使用形状制作类似的东西，形状有一些特殊属性：

> 使用 JavaFX 构建 GUI 应用程序时，您会注意到 API 中的某些类已经实现了属性。例如，`javafx.scene.shape.Rectangle`该类包含`arcHeight`、`arcWidth`、`height`、`width`、`x`和的属性`y`。对于这些属性中的每一个，都会有与前面描述的约定相匹配的相应方法。例如，`getArcHeight()`、`setArcHeight(double)`、`arcHeightProperty()`，它们共同指示（对开发人员和工具）给定的属性存在。*

*   要将侦听器添加到舞台，我必须执行以下操作：

    ```
     stage.resizableProperty().addListener(new ChangeListener<Boolean>(){
        @Override
        public void changed(ObservableValue<? extends Boolean> arg0, Boolean arg1, Boolean arg2){
            throw new UnsupportedOperationException("Not supported yet.");
        }

    }); 
    ```

所以有两个问题：

*   为了进行一些绑定，我必须在控制器类中获得我的阶段。那么 - 我怎样才能在控制器类中获得一个阶段？
*   看起来 UI 控件没有任何宽度\高度属性，可以绑定到某些东西。或者也许我还没有找到它们。

那么，我该如何解决我的问题呢？

***升级版****。关于 Scene Builder 给 Sergey Grinev：*当我在我的组件上使用*Ctrl+K*时（告诉它占据其父组件的整个区域） - 一切正常。

但是如果我想告诉我的组件占据**50%**的区域呢？例如，我有一个带有两个 VBox 的选项卡。标签的宽度是**100px**。**每个Vbox**的宽度为50 像素。VBox1 有**x1=0**和**x2=50**，而 VBox2 有**x1=50**和**x2=100**。然后我使用 JavaFX 应用程序调整窗口大小。现在我有标签的 Width = **200px**。但是我的 VBoxes 宽度仍然是 = **50px**： VBox1 有**x1=0**和**x2=50**，而 VBox2 有**x1=150**和**x2=200**。我需要它们是 VBox1 **x1=0**和**x2=100**和 VBox2 **x1=100**和**x2=200**。其中 x1 和 x2 值是 VBoxes 角的坐标。

在这种情况下，Scene Builder 如何帮助我？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T19:34:35.613

关于构建可调整大小的 gui 的一些建议 =>

*   确保您的应用程序的根是 Pane 子类，而不是 Group。
*   松开按钮的最大尺寸（例如 button.setMaxSize(Double.MAX_VALUE, Double.MAX_VALUE)）。
*   大多数时候布局窗格可以为您处理大小调整，您不需要绑定和侦听器 => 即仅在您真正需要时才绑定。
*   UI 控件和布局窗格是 Regions => 所有 Regions 都有只读的 height 和 width 属性，你可以监听和绑定。
*   您不能直接将控件的高度和宽度属性绑定到另一个值。而是使用 minWidth/Height、prefWidth/Height、maxWidth/Height 属性。
*   场景具有高度和宽度属性，您可以根据需要绑定到该属性。如果你这样做，当舞台调整大小时，场景将被调整大小，然后你的绑定组件将被调整大小。如果场景的根是布局窗格而不是组，则通常不需要此绑定。
*   如果您没有在场景上设置高度和宽度，对于独立应用程序，场景（和舞台）的大小将调整为适合场景根节点的首选大小（通常是您想要的）。
*   如果一切都失败了，您可以开始覆盖 Parent 的 layoutchildren 方法。

这是一个可调整大小的 JavaFX UI[示例](https://gist.github.com/2030464)，它实现了上述一些原则。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T08:33:04.007

另一个简单的选择是使用 JavaFX Scene Builder（最近作为公共测试版提供：[http](http://www.oracle.com/technetwork/java/javafx/tools/index.html) ://www.oracle.com/technetwork/java/javafx/tools/index.html ）

它允许通过拖放创建 UI 并将 UI 元素锚定到边框（通过[锚定工具](http://docs.oracle.com/javafx/scenebuilder/1/user_guide/jsbpub-user_guide.htm#BABBCDAB)），因此它们可以随窗口边框移动/调整大小。

更新：

要实现自动调整百分比布局，您可以`GridPane`使用`ColumnConstraint`：

```
public void start(Stage stage) {

    VBox box1 = new VBox(1);
    VBox box2 = new VBox(1);

    //random content
    RectangleBuilder builder = RectangleBuilder.create().width(20).height(20);
    box1.getChildren().addAll(builder.build(), builder.build(), builder.build());
    builder.fill(Color.RED);
    box2.getChildren().addAll(builder.build(), builder.build(), builder.build());

    //half by half screen
    GridPane grid = new GridPane();
    grid.addRow(0, box1, box2);

    ColumnConstraints halfConstraint = ColumnConstraintsBuilder.create().percentWidth(50).build();
    grid.getColumnConstraints().addAll(halfConstraint, halfConstraint);

    stage.setScene(new Scene(grid, 300, 250));
    stage.show();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T16:03:58.183

建议：

1.  如果您只有一个主要阶段，则在应用程序启动时将其存储在静态字段/变量中并在所有控制器类中访问它。
2.  您可以将所有控件/组件放入自动管理其子布局的布局/窗格中。对于不同的布局，请查看 api 文档。之后，将舞台场景的宽度和高度属性相应地绑定到此布局的属性。有关绑定的更多信息，请[参阅 Using JavaFX Properties and Binding](http://docs.oracle.com/javafx/2.0/binding/jfxpub-binding.htm)。[单向绑定](https://stackoverflow.com/a/10152992/682495)
    示例

# mysql - MySQL更新未执行操作

> ID：10318476
> 
> 赞同：1
> 
> 时间：2012-04-25T15:08:10.490
> 
> 标签：mysql, sql, database, sql-update

我正在尝试运行以下查询，

`UPDATE candidate_assets SET show = 1 WHERE show = 0;`

将所有设置为 0 的行（显示）更改为等于 1，显示列只是基本的 INT 列，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:10:17.070

[`SHOW`](http://dev.mysql.com/doc/refman/5.0/en/show.html)是 MySQL 中的关键字。尝试通过用反引号包围它们来转义对您的列的引用```：

```
UPDATE candidate_assets SET `show` = 1 WHERE `show` = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:10:21.193

将 qoutes 用于名称在 MySQL 中保留的字段，例如“show”：

```
UPDATE candidate_assets SET `show` = 1 WHERE `show` = 0; 
```

# android - 开始一个新的活动按钮 按下一个按钮

> ID：10318478
> 
> 赞同：1
> 
> 时间：2012-04-25T15:08:20.850
> 
> 标签：android

我希望在按下“createAppointment”按钮时启动一个新活动，但到目前为止，当我单击该按钮时，应用程序崩溃了。

按钮的创建：

```
<Button
    android:id="@+id/crtApp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Create Appointment"
    android:layout_gravity="center"/> 
```

创建应用程序.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/createAppointment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="36sp"
        android:text="Create Appointment"
        android:textSize="34sp" />

    <TextView
        android:id="@+id/titleOfAppointment"
        android:layout_width="318dp"
        android:layout_height="wrap_content"
        android:text="Title"
        android:textSize="24sp" />

    <EditText
        android:id="@+id/titleappointment"
        android:layout_width="295dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="15sp"
        android:layout_marginLeft="10dp"
        android:ems="10" />

    <TextView
        android:id="@+id/timeappointment"
        android:layout_width="318dp"
        android:layout_height="wrap_content"
        android:text="Time"
        android:textSize="24sp" />

    <EditText
        android:id="@+id/timeappointment"
        android:layout_width="295dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="15sp"
        android:layout_marginLeft="10dp"
        android:ems="10" />

    <TextView
        android:id="@+id/detailsappointment"
        android:layout_width="318dp"
        android:layout_height="wrap_content"
        android:text="Details"
        android:textSize="24sp" />
    <EditText
        android:id="@+id/detailsappointment"
        android:layout_width="292dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="65dp"
        android:layout_marginLeft="10dp"
        android:layout_weight="0.07"
         />

     <Button
        android:id="@+id/save_button"
        android:layout_width="105dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="200dp"
        android:layout_weight="0.01" 
        android:text="Save"/>

</LinearLayout> 
```

创建约会.java

```
package com.examples;

import android.app.Activity;
import android.os.Bundle;

public class CreateAppointment extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.createapp);
    }

} 
```

按钮开始新活动的代码

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_calendar_view);
    Button createAppointment = (Button)findViewById(R.id.crtApp);
    createAppointment.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            // TODO Auto-generated method stub
            startActivity(new Intent("android.intent.action.CREATEAPP"));           
        }
    });
} 
```

日志猫

```
04-25 15:17:13.719: W/dalvikvm(460): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-25 15:17:13.779: E/AndroidRuntime(460): FATAL EXCEPTION: main
04-25 15:17:13.779: E/AndroidRuntime(460): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.CREATEAPP }
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.app.Activity.startActivityForResult(Activity.java:2817)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.app.Activity.startActivity(Activity.java:2923)
04-25 15:17:13.779: E/AndroidRuntime(460):  at com.examples.SimpleCalendarViewActivity$1.onClick(SimpleCalendarViewActivity.java:60)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.view.View.performClick(View.java:2408)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.view.View$PerformClick.run(View.java:8816)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.os.Handler.handleCallback(Handler.java:587)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.os.Looper.loop(Looper.java:123)
04-25 15:17:13.779: E/AndroidRuntime(460):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-25 15:17:13.779: E/AndroidRuntime(460):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 15:17:13.779: E/AndroidRuntime(460):  at java.lang.reflect.Method.invoke(Method.java:521)
04-25 15:17:13.779: E/AndroidRuntime(460):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-25 15:17:13.779: E/AndroidRuntime(460):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-25 15:17:13.779: E/AndroidRuntime(460):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:15:37.653

如果我理解得很好，你想在按下按钮时开始一个活动。那么你应该有这样的东西：

```
createAppointment.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View v) {
     Intent intent = new Intent(your_context, CreateAppointment.class);
     startActivity(intent);
     }
 }); 
```

希望能帮助到你！（为了更好地理解发布您的错误日志:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T20:07:21.793

`<Button />`需要有`android:onClick="your method name here"`属性

Java 代码应该是这样的

```
public void methodName(View view)
{
  Intent intent = new Intent(this, ClassName.class);
  startActivity(intent)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:12:33.780

```
startActivity(new Intent(getBaseContext(), CreateAppointment.class)); 
```

并且也像 kailoon 所说，“检查以确保活动在 AndroidManifest.xml 文件中。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:12:48.957

您是否在清单文件中声明了该活动？

除了尝试：

```
Intent i = new Intent();
i.setClassName(pkgname, activity name);
startActivity(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T15:10:51.007

检查以确保活动在 AndroidManifest.xml 文件中。

# spring - Spring接口加载

> ID：10318482
> 
> 赞同：2
> 
> 时间：2012-04-25T15:08:40.177
> 
> 标签：spring

我想知道当声明为`@autowired`实现类的属性而没有将接口注释为`a @component`.

让我再描述一下我的问题：我有一个接口和它的实现类有相同的名称，但它们驻留在不同的包中。我将实现注释为`@Component("myImplementation")`. 但我最终有一个例外，上面写着：

```
conflicts with existing, non-compatible bean definition of same name and class 
```

我正在考虑排除接口`<context:component-scan` ，你怎么看？

PS：我的界面没有`@Component`注释，应用程序在开发环境中运行得很好，我只是在 Proguard 混淆后得到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:29:24.230

用`@Component`而不是用接口来注释你的实现通常是正确的设置方法。Spring 的自动装配将寻找匹配类型的托管 bean，并且您的实现将匹配键入到接口的字段。如果您的界面没有使用`@Component`或任何 Spring 原型注解进行注释，则不应在组件扫描期间将其加载到上下文中。因此，如果接口和实现具有相同的类名，您应该不会有问题。

你确定你试过*不*注释界面吗？您确定在项目的其他地方没有与接口及其实现同名的其他类吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:41:55.803

您的**proguard.conf**应包含：

```
## ... preserve class annontation (Java EE 1.6 DI)
# Spring3
#-keep @org.springframework.stereotype.Service class *
-keep @org.springframework.stereotype.Controller class *
#-keep @org.springframework.stereotype.Component class *
#-keep @org.springframework.stereotype.Repository class * 
```

[proguard论坛](https://sourceforge.net/projects/proguard/forums/forum/182455/topic/5567570/index/page/1)有更详细的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:42:20.347

Well I think moving interfaces in different package would work because you would create object reference of interface and respective implementation beans would be auto wired to those object references. But you should follow naming conventions. There would be problem when differentiating interfaces and implementation classes as names are same. Follow standards like

```
interface SomeInterface {
//....
} 
```

for implementation class of SomeInterface

```
class SomeInterfaceImpl implements SomeInterface {
// implementation....
} 
```

# javascript - 自动选择 添加到 I add "option"s to "select" with javascript or jquery. I would like to select last added and scroll the scrollbar to most bottom. i add text like this function ConsoleOutputAdd(text){ var content = '<option>'+ text +'</option>

> ID：10318483
> 
> 赞同：0
> 
> 时间：2012-04-25T15:08:44.033
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:14:19.870

```
$('#consoleoutput').find('option:last').prop('selected', true ); 
```

[Here's](http://jsfiddle.net/azizpunjani/NJ4Tx/) a fiddle

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:14:28.990

You can select the last item in the list like so:

```
var sel = document.getElementById('consoleoutput');
sel.selectedIndex = sel.options.length - 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:17:23.583

1：为您的选择元素编写一个更改监听器

```
$('#consoleoutput').change(function(){
   // scroll
}) 
```

2：添加此项以选择您添加的选项：

```
$("#consoleoutput").val(text); 
```

# ruby-on-rails-3 - Rails/Formtastic 中的多选

> ID：10318484
> 
> 赞同：1
> 
> 时间：2012-04-25T15:08:49.893
> 
> 标签：ruby-on-rails-3, ruby-on-rails-plugins, ruby-on-rails-3.2

所以我在 Rails 中的 Record 和 Counties 之间有一个多对多的关系，这样当我创建记录时，用户可以选择多个县。问题是有100多个县可供选择。

因此，我正在寻找一种更用户友好的方式来允许选择多个县，而不是 formtastic 的默认设置。

我找到了这个博客，但它引用的插件有点旧，似乎不再可用...... http://diminishing.org/extending-formtastic-with-a-sprinkle-of-jquery

有人用 Rails 3/Formtastic 实现了任何东西来解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:29:23.180

I have just used Select2 in a project with Rails 3 and Formtastic and it works quite well.

Select2 supports multi-value select boxes, so if the select is declared with the multiple attribute then Select2 will automatially pick up on that. Thus, all you need is to do the following:

```
$("#multiple_select").select2(); 
```

More documentation here: [http://ivaynberg.github.io/select2/](http://ivaynberg.github.io/select2/)

# hibernate - Hibernate - 删除对象引用而不删除对象

> ID：10318485
> 
> 赞同：1
> 
> 时间：2012-04-25T15:08:52.493
> 
> 标签：hibernate, jakarta-ee, jpa

我正在使用 hibertnate 和 JPA 创建应用程序。我有 2 个类，即 Person 和 Associate。Person 是不言自明的，因为它包含一个人的详细信息（姓名、姓氏、性别等）。Associate 是一个将 2 个人员对象链接在一起的类（人员 A 与人员 B 对齐），有点像 Facebook 上的“朋友”。很简单，一个人（A 人）持有一个联系人列表，而一个 Associate 对象持有要链接的另一个人（B 人）以及他们之间的关系类型（朋友、家人等）。通过这种方式，A 可以知道他/她与谁有关联（即 A 知道他与 B 有关联）。该结构是打击。

假设发生的是，当一个人从数据库中删除时，他的所有关联也会被删除。那是删除的人以及与其他人的链接。问题是当我在 Person 类中使用级联删除时，它会删除关联以及关联对象中的所有人员对象。即如果人 A 和人 B 关联（在关联对象中）。当人 A 被删除时，关联对象和人 B 一样被删除。期望的结果是只有人 A 和引用人 A 的关联对象被删除，而不是人 B。人 B 对象应作为人保留在数据库中B没有被删除，只是两个人之间的关联。我不知道该怎么做。关于如何达到预期结果的任何想法？或者如果有更好的方法来关联 2 个人对象。

* * *

*   结构：

* * *

**人员类**

@实体

公共类人实现可序列化{

```
 private Long id;
 private String firstName;
 private String lastName;
 private String gender;
 @OneToMany (cascade = {CascadeType.ALL})
 @Cascade({CascadeType.SAVE_UPDATE, CascadeType.DELETE})
 @JoinColumn(name = "person_id")
 private List<Associate> associations;

 //setters
 //getters 
```

}

**关联类** @Entity

公共类 Associate 实现 Serializable {

```
 private Long id;
 @ManyToOne
 private Person associate;
 private String relationshipType;
 @OneToOne (cascade = {CascadeType.ALL})
 @Cascade({CascadeType.SAVE_UPDATE, CascadeType.DELETE})
 private AssociateSettings;

 //setters
 //getters 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:40:59.030

只创建一个实体 - Person - 这是该类的草图：

```
@Entity
public class Person{

 private Long id;
 private String firstName;
 private String lastName;
 private String gender;
 @OneToMany
 private List<Person> associates; 

 //setters
 //getters
} 
```

每个人都可以与其他人的集合相关。不要使用级联删除，因为您可以轻松删除一半的数据库，只删除一个人。

# jquery-mobile - Jquery Mobile 和 Phonegap：无法在选择中选择值

> ID：10318492
> 
> 赞同：1
> 
> 时间：2012-04-25T15:09:12.427
> 
> 标签：jquery-mobile, cordova

我有这个用 jQuery Mobile 制作的漂亮的选择菜单，它在使用桌面浏览器时运行良好。但是我构建了一个 android 项目并单击菜单，它什么也没显示。更奇怪的是，当我更改显示的页面时，会出现选择选项。？？？这正常吗？

```
<fieldset data-role="controlgroup" style="margin-top:0px;"> 
    <select name="select-pays" id="select-pays">
        <option>Pays</option>
        <option value="1">First choice</option>
        <option value="2">Second choice</option>
        <option value="3">Third choice</option>
    </select>
</fieldset> 
```

# visual-studio-2010 - 在 IronPython 中使用 DbLinq

> ID：10318494
> 
> 赞同：1
> 
> 时间：2012-04-25T15:09:21.940
> 
> 标签：visual-studio-2010, linq, ironpython, dblinq

我正在尝试在 IronPython 应用程序中使用[dblinq](http://dblinq.codeplex.com/)，但在开始时遇到了一些问题。尝试使用 clr.AddReference() 导入 dblinq 类时，它似乎看不到 dblinq。

我可以构建但不能访问库

```
import clr
clr.AddReference("DbLinq")
clr.AddReference("System.Data.Linq")
from System.Data.Linq import DataContext

exit = raw_input("press any key to quit") 
```

1：我的 dblinq 源位于名为 Resources 的子文件夹中

`clr.AddReferenceToFileAndPath("Resources/DbLinq.dll")` => 找不到文件

`clr.AddReference("DbLinq")` => 无法添加对 dblinq 的引用

`clr.AddReferenceToFileAndPath("C:/Development/DBLinq2/Dblinq.dll"` => 成功

但仍然无法使用类`from DbLinq import ...`

### 解决方案

```
 import clr

   clr.AddReferenceToFileAndPath("%s\Resources\DbLinq.dll" %os.getcwd())
    clr.AddReference("DbLinq")
    from Npgsql import *
    from DbLinq import Data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:24:19.413

对于像 DbLinq 这样带有依赖关系或拆分为多个 DLL/模块的库，您可以通过编程方式添加它们的位置，以允许运行时找到所有需要的文件。

```
import sys
sys.path.append(r"C:\Temp\DbLinq-0.20.1") 
```

然后，您可以像往常一样引用所有必需的程序集：

```
clr.AddReference("DbLinq") 
```

如果有一个主程序集，您还可以使用 clr.AddReferenceToFileAndPath （带有绝对路径），这会将引用的程序集位置隐式添加到路径中。

```
clr.AddReference(r"C:\Temp\DbLinq-0.20.1\DbLinq.dll") 
```

# django - Django 站点框架和 Heroku

> ID：10318497
> 
> 赞同：4
> 
> 时间：2012-04-25T15:09:37.320
> 
> 标签：django, heroku

只是想问一下这是否是对 django 站点框架和 heroku 的“可接受”使用——以及运行这两个站点是否有任何问题：

站点之间的主要区别将是模板，并且某些对象仅发布到一个或其他（或两个）站点 - 特别是用户应该能够使用他们的单个帐户使用这两个站点。

*   我有我的一个代码库。我的 settings.py 文件中的任何更改都通过使用 heroku 配置变量来处理。

*   我设置了可以共享的数据库（在 EC2 上或使用 Heroku 专用数据库）

*   我 git 将我的代码推送到两个不同的 Heroku 应用程序

嘿 presto - 一个代码库，两个运行的 Django 实例，两个独立的站点。

有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:05:14.860

我在另一个线程中深入回答了这个问题，你可以在这里看到我的答案：[Multiple Django sites with shared codebase and DB](https://stackoverflow.com/questions/11376455/multiple-django-sites-with-shared-codebase-and-db/11803686#11803686)

简短的回答是**NO**，不要使用站点框架，使用 git 分支。

# c# - 在声明为父对象的列表中查找子对象

> ID：10318498
> 
> 赞同：0
> 
> 时间：2012-04-25T15:09:39.617
> 
> 标签：c#, xna-4.0

我正在为 XNA 项目开发屏幕管理器类。我正在跟踪类型列表`GameScreen`以跟踪我的每个游戏状态。我的每个屏幕都继承自`GameScreen`

我将如何在我的列表中找到一个特定的孩子？

例如，假设我们有：

```
List<Fruit> fruits = new List<Fruit>(){Apple, Orange, Banana, Pineapple}; 
```

我想编写一个函数，接收某种类型的水果并从列表中返回该特定水果。我该怎么做呢？

**编辑**

```
public Fruit findFruit(object myFruit)
{
    //use myFruit to find the correct fruit in the list
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:15:14.107

家庭作业？

你可以这样做：

```
public Fruit GetFruit(Type type)
{    
    return fruits.Find(x => x.GetType() == type);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:15:20.777

循环遍历每个元素并比较您想要的类的类型

foreach(Fruit f in fruits) { if(typeof(f) is typeof(Apple) return f; }

# java - 简单的 JMeter 测试不起作用

> ID：10318499
> 
> 赞同：2
> 
> 时间：2012-04-25T15:09:40.647
> 
> 标签：java, testing, jsf-2, automated-tests, jmeter

我们正在尝试在 JSF 应用程序中使用 JMeter 添加一个简单的测试。我们按照以下说明进行操作：

[http://jmeter.apache.org/usermanual/build-adv-web-test-plan.html](http://jmeter.apache.org/usermanual/build-adv-web-test-plan.html)

它有一个带有用户名和密码的简单登录页面以及一个提交按钮。您可以从屏幕截图中看到我们使用了代理。通过屏幕截图中的设置，我们得到 HTTP 500 错误。我不确定我是否以正确的方式提出问题。请询问您是否需要任何澄清。

![在此处输入图像描述](../Images/f851cf032a04a9429f7950cf39beb1ca.png)

![饼干管理器](../Images/e1547452eacd4b072648e51916381773.png)

![在此处输入图像描述](../Images/4c8beb95deef822468732cce6e1df1d5.png)

![在此处输入图像描述](../Images/6e5c5071ac18acfd2dccedf1a9a6e81e.png)

![在此处输入图像描述](../Images/6e8ac9a37fbdb5a3783b1dc8436cab61.png)

![在此处输入图像描述](../Images/7d6f6209eadab6b3638248e1f1b0ce77.png)

![在此处输入图像描述](../Images/eb80206871e218530becc3e9f1d77974.png)

![在此处输入图像描述](../Images/478b5f7435213d8452861bd968734406.png)

错误代码是： ![在此处输入图像描述](../Images/e9cfec0634b14e66918f17d1528604e9.png) ![在此处输入图像描述](../Images/77c1d9bd48805bc3d75d8338aeddee8f.png)

**编辑**：我认为这将是最长的问题。但有时图像胜于文字。无论如何，我们所做的就是发送与我们在萤火虫中看到的数据相当的数据。但仍然收到 500 错误。您可以在附件中看到 Tomcat 日志。

![在此处输入图像描述](../Images/a14e2f1964e4e7fc857ea2a8c4aa3cb3.png) ![在此处输入图像描述](../Images/3027e78709d8dae7740d6db7a5f1d60c.png) ![在此处输入图像描述](../Images/9052955c04b7148b7511d1917b8e2c76.png) ![在此处输入图像描述](../Images/e20e778c1e69332688fbc0637ae47182.png) ![在此处输入图像描述](../Images/c2e32fd4ebcbfdd3ee71fabd77b004e8.png) ![在此处输入图像描述](../Images/185fcf5f7ede3ebd13aaabc9dd203285.png) ![在此处输入图像描述](../Images/f3a91d49d3aed887669659cfd9f87e73.png) ![在此处输入图像描述](../Images/fb24f060156fcb7d785c331a15d14852.png) ![在此处输入图像描述](../Images/b14df9398271bd0fed8a0c45b5ed95ab.png) ![在此处输入图像描述](../Images/ffd0cbd0812d22d95eb5d49f86fdc3eb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T16:27:36.310

HTTP 5xx 代码与服务器或应用程序错误有关。首先搜索日志文件。

您的脚本不需要“用户定义的变量”组件，因为没有真正需要为每个线程/用户评估的变量表达式。

“正则表达式提取器”组件足以提取 JSF ViewState 值。我建议您删除表达式的最后一部分“/>”，并将正则表达式分组 (.+?) 更改为 (\w+?)，因为它将评估为几个匹配项（可能只有 2 个）。更改“匹配号”的值。字段为 1（如果匹配的所有值都相同，则无需使用随机）。

我不明白您为什么同时使用“XPath Extractor”和“Regular Expression Extractor”组件来提取相同的值。在以 html 开头时，我更喜欢使用最后一个。XPath 在处理格式良好的 xml 字符串/文件时效果更好。

要从头开始捕获脚本，我建议您在 Workbench 中添加“HTTP 代理服务器”，对其进行配置、启动、配置浏览器以使用此代理并使用浏览器浏览这些页面。这样，您将捕获您选择的浏览器使用的所有请求和请求标头。在此之后，删除不必要的请求并将查询参数（如 javax.faces.ViewState）更改为相应的变量。

考虑在 HTTP 采样器中使用提取器（Pos-Processors），然后再使用参数值中的变量。例如：如果 /EBS 请求首先出现并且 /EBS/login.xhtml 请求有一个 javax.faces.ViewState 参数，那么 /EBS 响应可能会包含一个带有 javax.faces.ViewState 值的隐藏输入。

这是我使用的 JSF 应用程序测试脚本的常见组成。提供有关 HTTP 500 错误原因的更多信息应该阐明找到更好解决方案的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T16:14:45.633

在 jsfViewState 的正则表达式提取器上，添加`(?s)`到正则表达式的开头。所以你有了：

```
(?s)<input type="hidden" name="javax\.faces\.ViewState" id="javax\.faces\.ViewState" value="(.+?)" /> 
```

这允许`(.+?)`跨越换行符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T16:10:08.447

Your regular expression extractor is in the wrong place. You cannot extract a value from the response to a request and then send it with the same request. The only way to achieve this is to use a time machine, but these don't exist yet and even if they did, it probably wouldn't work.

Typically you get a viewstate in the response to a GET and then you later need it in the POST of the same page. So, put the regular expression extractor as a *child* of the GET call where the login.xhtml page is first called (as a GET). If your recording does not include this GET call then either add it manually or examine the responses of previous calls before your login POST to find it, eg. maybe the GET homepage.xhtml (or similar) will include it.

# c++ - QT 和 C++：不能在 main() 函数之外调用函数

> ID：10318500
> 
> 赞同：1
> 
> 时间：2012-04-25T15:09:41.147
> 
> 标签：c++, qt, class, function

我想知道如何从**SocketTest**类调用函数**Do_Download()而不是****main()**函数。第一个**cTest.Do_Download()**确实有效，但是当我调用**test()**函数时，**csTest.Do_Download()**不起作用。

 ******所以看起来我只能从**main()**函数内部**访问 SocketTest**，而不能从任何其他函数。

 **有人知道如何解决这个问题吗？谢谢！

主.cpp：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    SocketTest cTest;
        cTest.Do_Download();

    return a.exec();
}

void test()
{
    qDebug() << "test main functie";

    SocketTest csTest;
        csTest.Do_Download();
} 
```

套接字测试.h：

```
#ifndef SOCKETTEST_H
#define SOCKETTEST_H

#include <QObject>
#include <QTcpSocket>
#include <QDebug>
#include <QHttp>
#include <QFile>
#include <QString>

class SocketTest : public QObject
{
    Q_OBJECT
public:
    explicit SocketTest(QObject *parent = 0);

   void Do_Download();
signals:

public slots:

    void stateChanged ( int state );
    void responseHeaderReceived ( const QHttpResponseHeader & resp );
    void requestFinished ( int id, bool error );

private:
    QTcpSocket *socket;
    QHttp *http;
    QHttp *http2;

};

#endif // SOCKETTEST_H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:03:15.307

如果您的`DoDownload`函数正在异步执行任何操作（可能是在处理 Qt 网络类时），那么`SocketTest`您正在创建的`test()`函数在它可以对任何返回值起作用之前就被销毁了。

它起作用是`main()`因为事件循环开始并且`SocketTest`实例挂起。********

# java - 将图像渲染成标签

> ID：10318502
> 
> 赞同：1
> 
> 时间：2012-04-25T15:09:47.293
> 
> 标签：java, swing, jlabel

我有一个标签。我想将图像渲染到其中。但是下面的代码可以做任何事情。

```
 CardLayout cl = (CardLayout) (mainPanel.getLayout());
        cl.show(mainPanel, "newPersonaCard");
        BufferedImage myPicture = ImageIO.read(new    File("C:\\Desktop\\Documents\\Pictures\\always.jpg"));
        ImageIcon icon = new ImageIcon(myPicture);
        icon.getImage().flush(); 
```

我正在使用 netbean 设计器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:29:12.317

你是对的，在某些情况下，重新绘制有问题`Icon`，`JLabel`那么你必须打电话，

```
myIcon.getImage().flush();
myLabel.setIcon(myIcon); 
```

其余的方法都`Icon`正确`JLabel`地实现了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:14:17.907

```
.
.
File file = fileChooser.getSelectedFile();

JLabel label = new JLabel();
ImageIcon icon = new ImageIcon(file.getAbsolutePath());
label.setIcon(icon);
//add label to panel 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:16:58.143

```
fileChooser.showDialog(saveBtn2, null);
File file = fileChooser.getSelectedFile();
System.out.println("The path to file "+file.getAbsolutePath());          
ImageIcon icon = new ImageIcon(file.getAbsolutePath());
pictureLbl.setIcon(icon); 
```

# android - 从当前播放的音频中访问元数据。（内置或外部应用程序）

> ID：10318503
> 
> 赞同：2
> 
> 时间：2012-04-25T15:09:47.680
> 
> 标签：android, media-player, metadata

我正在尝试开发一个应用程序/小部件，我需要为此显示音轨的当前播放信息（元数据）。

如果我自己也在编写 MediaPlayer，这将是微不足道的，因为我可以简单地访问 MediaStore 并显示信息，但是，我不希望在这方面与过多的现有应用程序竞争。我希望能够从内置音频播放器或其他应用程序（如 SongBird 或 PowerAMP）中提取此信息。

我应该能够使用 PowerAMP 使用他们的 [API][1] 来做到这一点，但是我真的想要一个适用于股票 android 播放器和其他播放器的解决方案。

我希望能够从 AudioManager 中获取信息，但这似乎只允许我查询当前状态（音乐正在播放等）并且我可以设置播放音乐的意图等......但无法访问来自其他人的应用程序的元数据。

所以我的想法是这不容易做到。我的想法是，我可以从顶部的信息栏中访问此信息，因为正在播放的信息打印在那里。虽然这可能是一个丑陋的黑客......

有那么一刻，我对 4.0 的 RemoteControlClient.MetadataEditor 感到兴奋，但后来我发现它是为了将该信息写入可以发送到物理遥控器的流，而不是允许您创建软件遥控器。该死！

有没有人有任何想法？

[1]： http: [//forum.powerampapp.com/index.php?](http://forum.powerampapp.com/index.php?/topic/1034-updated-for-20-poweramp-api-lib-and-sample-applications/) /topic/1034-updated-for-20- poweramp -api-lib-and-sample-applications/ 功率放大器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T18:38:27.860

我已经写了一个指南来实现这个。

基本上，您需要访问 android.jar 库的隐藏类。然后你必须扩展 IRemoteControlDisplay$Stub 类，并实现它的方法。之后，您使用隐藏方法注册您的 RemoteControlDisplay - AudioManager#registerRemoteControlDisplay。在一个答案中解释的太多了，所以请阅读我的 XDA-Developers 指南。这是链接： http: [//forum.xda-developers.com/showpost.php?p=44513199](http://forum.xda-developers.com/showpost.php?p=44513199)

此外，我目前正在开发一个库，它将简化实现远程媒体控制的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:05:51.053

> 有那么一刻，我对 4.0 的 RemoteControlClient.MetadataEditor 感到兴奋，但后来我发现它是为了将该信息写入可以发送到物理遥控器的流，而不是允许您创建软件遥控器。该死！

在 Android 4.0 上肯定有一种访问远程控制客户端元数据的方法，因为在播放媒体时锁定屏幕能够访问它。

我根本不是开发人员，但我试图在 AOKP 源代码中进行一些探索，这是我对其工作原理的有限理解。至少在 AOKP（可能还有 AOSP）中，锁屏似乎使用 core/java/com/android/internal/widget/TransportControlView.java 在锁屏上绘制音乐控制小部件，而后者又使用媒体/java/android/media/IRemoteControlDisplay.aidl 用于数据检索。至少，在 TransportControlView.java 中查看一下是否可以弄清楚锁屏小部件是如何工作的可能很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:17:30.837

> 我应该能够使用 PowerAMP 使用他们的 [API][1] 来做到这一点，但是我真的想要一个适用于股票 android 播放器和其他播放器的解决方案。

AOSP 音乐应用程序或 Google Play 音乐应用程序 AFAIK 没有记录和支持的 API。它们当然不在 Android SDK 中。

我不知道媒体播放器的 Android 生态系统标准会公开此信息，更不用说支持此类标准的应用程序名册了。欢迎您与此类应用程序的开发人员合作，并鼓励他们创建和采用标准。

> 我的想法是，我可以从顶部的信息栏中访问此信息，因为正在播放的信息打印在那里。

`Notifications`出于明显的隐私和安全原因，不可能监视其他应用程序。

# sql-server - sql双多列键

> ID：10318505
> 
> 赞同：2
> 
> 时间：2012-04-25T15:09:52.680
> 
> 标签：sql-server, sql-server-2005

它是一个 Sql 查询。

我想知道重复数据。

样本：

```
Table 1
Col1, col2, col3, col4
1, A, AA, AAA
2, A, BB, AAA
3, A, BB, AAA
4, B, AA, AAA
5, B, AA, BBB
6, B, AA, CCC
7, B, BB, AAA
8, B, CC, AAA 
```

结果应该是：

```
2, A, BB, AAA
3, A, BB, AAA 
```

或者

```
A, BB, AAA 
```

所以我可以找到我的双打在哪里。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:11:38.727

您可以按列分组并检查每个组是否有超过 1 条记录：

```
select
    col2, col3, col4
from
    MyTable
group by
    col2, col3, col4
having
    count(*) > 1 
```

演示：[http ://www.sqlfiddle.com/#!3/5c3a7/2](http://www.sqlfiddle.com/#!3/5c3a7/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:25:55.310

你也可以这样做：

**测试数据**

```
DECLARE @T TABLE(Col1 int, col2 VARCHAR(100), col3 VARCHAR(100), 
                 col4 VARCHAR(100))

INSERT INTO @T
VALUES
    (1, 'A', 'AA', 'AAA'),
    (2, 'A', 'BB', 'AAA'),
    (3, 'A', 'BB', 'AAA'),
    (4, 'B', 'AA', 'AAA'),
    (5, 'B', 'AA', 'BBB'),
    (6, 'B', 'AA', 'CCC'),
    (7, 'B', 'BB', 'AAA'),
    (8, 'B', 'CC', 'AAA') 
```

**查询1**

```
;WITH CTE
AS
(   
    SELECT
        COUNT(Col1) OVER(PARTITION BY col2,col3,col4) AS Counts,
        T.*
    FROM
        @T AS T
)
SELECT
    *
FROM
    CTE
WHERE
    Counts>1 
```

**结果**

```
2   2   A   BB  AAA
2   3   A   BB  AAA 
```

**查询2**

```
;WITH CTE
AS
(   
    SELECT
        ROW_NUMBER() OVER(PARTITION BY col2,col3,col4 ORDER BY col1) AS RowNbr,
        T.*
    FROM
        @T AS T
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.RowNbr>1 
```

**结果**

```
2   3   A   BB  AAA 
```

# objective-c - 从多个线程使用 runModalForWindow 有多危险？

> ID：10318509
> 
> 赞同：0
> 
> 时间：2012-04-25T15:10:15.527
> 
> 标签：objective-c, multithreading, macos, cocoa, modal-dialog

我有一个内存损坏错误（我怀疑），这导致特定 UI 操作后程序崩溃。这是一个 Cocoa Objective-C 应用程序，不使用 GC。

经过几个小时的调试，我找到了崩溃的可能原因：

```
DiscSelectPopup *popupSelect = [[DiscSelectPopup alloc] initWithDataList:dataList count:count];     
NSInteger result = [NSApp runModalForWindow:popupSelect.window]; 
```

上述弹出例程是从辅助线程执行的。每次用户单击按钮时都会创建并启动该线程。因此，我们可以同时显示多个模态弹出窗口。

`MallocStackLogging=1`当我使用and在调试模式下运行程序时`MallocStackLoggingNoCompact=1`，它会在调用时打印一条 malloc 错误日志消息`runModalForWindow:`（但并非总是如此）。

```
malloc: *** error for object 0xbc65840: double free
.....
malloc: *** error for object 0xbc547e0: pointer being freed was not allocated 
```

`runModalForWindow:`从辅助线程使用真的很糟糕吗？
这可能是坠机的原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:49:09.213

> `runModalForWindow`从辅助线程使用真的很糟糕吗？

是的。UI 的东西需要在主线程上发生。

`runModalForWindow:`除非您特别想阻止应用程序中的所有其他窗口（基本上冻结您的应用程序，除了该窗口），否则您也不应该使用。只是显示窗口。如果您想阻止特定窗口（或者您的应用程序是单窗口），请将其作为工作表开始。

编辑：再看这个问题，这引起了我的注意：

> 上述弹出例程是从辅助线程执行的。

不要那样做。要显示一个窗口，只需显示它。从主线程上的按钮接收操作消息，然后在辅助线程上只执行实际工作（如果有的话）。

请注意，显示该窗口不会阻止任何其他窗口或您正在执行的任何其他操作，除非您特意这样做（即使用`runModalForWindow:`）。如果您以正常方式显示窗口，您的所有窗口将继续正常工作。您在主线程上安排的任何计时器和观察者以及类似的东西也继续工作。您不需要为此创建线程或做任何其他特别的事情；默认情况下，这一切都正常。

*如果*你最终要做的工作可能需要很长时间，*那么*你应该把*它*放在辅助线程上，只有在需要时才去做。您还应该研究将其构造为操作对象或块是否比作为原始线程更容易或更好。它可能会。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-26T13:25:17.417

使用 valgrind memcheck，我得出结论，辅助线程`runModalForWindow:`调用与内存损坏问题没有直接关系。

是的，从非主线程操作 UI 组件是一种糟糕的编码，但仅靠这种行为不会使程序崩溃。

问题中的 malloc 错误消息是由于错误地双释放弹出窗口对象。

顺便说一句，内存损坏的真正原因是不匹配的 malloc/free 调用（释放未分配的内存指针）。

# eclipse - M2_REPO 和 m2eclipse

> ID：10318513
> 
> 赞同：0
> 
> 时间：2012-04-25T15:10:31.833
> 
> 标签：eclipse, maven, m2eclipse

我花了很多时间搜索，想知道为什么要让它工作这么难？！浏览有关此的不同问题并没有让我得到答案。

我有一个多项目多模块应用程序，即我导入两个项目，每个项目都有几个模块。现在无法找到/推断生成的源，

**eclipse 将它们显示为缺少的类型**。 **我可以从命令行构建，但 Eclipse 找不到类文件。**

我已经在 Window->Preferences->Maven 中设置了 M2_REPO ...我还指出了 Eclipse 中的外部 Maven 安装。

有什么问题？我确实得到 **“生命周期配置未涵盖插件执行：org.apache.maven.plugin”**

对于某些 POM，但我不确定这是否与问题有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:37:12.320

有关为 Eclipse 添加自定义构建生命周期映射的信息，请参阅[m2e wiki 。](http://wiki.eclipse.org/M2E_plugin_execution_not_covered#execute_plugin_goal)

# email - 使用 PHP 发送无限制电子邮件的最佳做法是什么

> ID：10318516
> 
> 赞同：1
> 
> 时间：2012-04-25T15:10:38.213
> 
> 标签：email, postfix-mta

我们有一个网站，基本上每天都会向用户发送 10K 封电子邮件通知。我尝试使用 Google Apps，但很快就达到了每日限额，然后我在 godaddy 上创建了多个帐户并购买 smtp 中继（每天 250 个）以向我们的用户提供电子邮件通知。

*   在不被标记为垃圾邮件和小预算的情况下提供它的最佳做法是什么？

*   也许我需要安装 postfix 和 dovecot？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:53:30.077

我应该说，从单个服务器发送这么多电子邮件会很快将其列入黑名单。也许您应该研究一些知名的 SMTP 服务，例如[Sendgrid](http://sendgrid.com)、[Mailjet](http://mailjet.com)或[Postmarkapp](http://postmarkapp.com) 。它们不是免费的，但通常很便宜，具体取决于数量。

如果您的电子邮件发送需求是真实的（即不是垃圾邮件），这些平台可以很好地确保您的电子邮件不被标记为垃圾邮件。但是，如果您发送垃圾邮件，无论如何您都会被列入黑名单，所以只需租用一个僵尸网络，这就是他们的目的；）

# python - 在 Python 中的命名游标上多次调用 excute()

> ID：10318523
> 
> 赞同：0
> 
> 时间：2012-04-25T15:10:53.647
> 
> 标签：python, postgresql

我正在编写一个 Python 脚本，它将文件从一个目录复制到另一个目录，并将该文件名复制到一个文档存档 PostgreSQL 表中。我收到的错误如下：

Camt' 在命名游标上多次调用 excute()

下面是我的代码：

```
 cursor = conn.cursor('cur', cursor_factory=psycopg2.extras.DictCursor)
    cursor.execute('SELECT * FROM doc_archive.table LIMIT 4821')
      row_count = 0
    for row in cursor:
        row_count += 1
        print "row: %s    %s\r" % (row_count, row),
        pathForListFiles = srcDir
    files = os.listdir(pathForListFiles)
    for file in files:
        print file
        try:
            # Perform an insert with the docid
            cursor.execute("INSERT INTO doc_archive.field_photo_vw VALUES) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:35:35.273

这是实际的代码吗？您在第二次执行中获得了无与伦比的报价。

遍历结果时，我通常使用

```
for var in range(int(cursor.rowcount)):
    row = cursor.fetchone() 
```

没有麻烦。

```
for var in cursor: 
```

对我来说似乎是错误的。

```
results = cur.fetchall()
for var in enumerate(results): 
```

那里基本上是一样的。但是如果您在迭代第一组结果时必须执行另一次执行，则允许您关闭光标。通常我只是在这些情况下声明另一个游标。

无论哪种情况，您当前的代码似乎都没有获取执行结果。如果您需要处理该数据，这一点很重要。

# javascript - 防止在 iPad HTML5 广告上滑动滚动

> ID：10318525
> 
> 赞同：1
> 
> 时间：2012-04-25T15:10:54.470
> 
> 标签：javascript, jquery, ipad, html, scroll

我正在为 iPad 上的杂志制作广告，该杂志的时间线很长，需要由水平滚动条控制。滚动条必须是自定义的，而我能找到的适用于 iPad 的最佳自定义滚动插件是 fleXcroll。

我的问题是我试图禁用用户滑动滚动时间轴的能力。它需要由滚动条专门控制（因为用户的滑动应该将他们带到杂志的下一页。）

过去两天我一直在研究这个问题，目前我能解决的最接近的方法是控制 div 的触摸事件。当我在 div 上将 event.preventDefault() 用于 touchstart 和 touchmove 时，它​​可以部分工作。如果屏幕没有移动，滑动不会移动时间线。但是，在使用滚动条之后，如果时间线仍在移动（iPad 在滑动物体时有一种缓动，因此移动的东西在停止之前会变慢），您可以抓住时间线并通过滑动来移动它。此外，如果您用手指慢慢让滚动条停止移动，直到它停止，您就可以再次滑动时间线。

因此，问题在于阻止用户在 iPad 的杂志广告中将某个 div 滑动到一侧。滚动只能由滚动条控制。

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:21:20.183

您可以注册 JS 来观察滑动事件，然后只是“忽略”它们并防止它们进一步向上传播。这样的事情可能会有所帮助：

```
(function($) {
    $.fn.touchwipe = function(settings) {
       var config = {
           min_move_x: 20,
           wipeLeft: function() { alert("left"); },
           wipeRight: function() { alert("right"); },
           preventDefaultEvents: true
    };

    if (settings) {
       $.extend(config, settings);
    }

    this.each(function() {
       var startX;
       var isMoving = false;

       function cancelTouch() {
         this.removeEventListener('touchmove', onTouchMove);
         startX = null;
         isMoving = false;
       }

       function onTouchMove(e) {
         if(config.preventDefaultEvents) {
          e.preventDefault();
         }
         if(isMoving) {
            var x = e.touches[0].pageX;
            var dx = startX - x;
            if(Math.abs(dx) >= config.min_move_x) {
              cancelTouch();
            if(dx > 0) {
               config.wipeLeft();
            }
            else {
               config.wipeRight();
            }
       }
     }
   }

   function onTouchStart(e)
   {
     if (e.touches.length == 1) {
       startX = e.touches[0].pageX;
       isMoving = true;
       this.addEventListener('touchmove', onTouchMove, false);
     }
   }
 this.addEventListener('touchstart', onTouchStart, false);
 });

 return this;
  };

})(jQuery); 
```

# php - SoapClient LibXMLError：加载外部实体失败，SOAP-ERROR：解析 WSDL：无法加载

> ID：10318526
> 
> 赞同：2
> 
> 时间：2012-04-25T15:10:55.020
> 
> 标签：php, xml, web-services, soap, wsdl

我正在尝试使用以下 PHP 代码建立 SOAP 连接，但它在 SoapClient 构造点失败：

```
// Need to declare these settings here because our php.ini has alternate
// settings due to global purposes for other PHP scripts
ini_set("soap.wsdl_cache_enabled", "0");
ini_set("soap.wsdl_cache", "0");
ini_set("display_errors","On");
ini_set("track_errors","On");

// FedEx web services URL, note the HTTPS
$path_to_wsdl = 'https://wsbeta.fedex.com/web-services';

$soap_args = array(
    'exceptions'=>true,
    'cache_wsdl'=>WSDL_CACHE_NONE,
    'trace'=>1)
;

try {
    $client = new SoapClient($path_to_wsdl,$soap_args);
} catch (SoapFault $e) {
    var_dump(libxml_get_last_error());
    echo "<BR><BR>";
    var_dump($e);
} 
```

这输出：

```
object(LibXMLError)#1 (6) {
    ["level"]=> int(1)
    ["code"]=> int(1549)
    ["column"]=> int(0)
    ["message"]=> string(71) "failed to load external entity "https://wsbeta.fedex.com/web-services" "
    ["file"]=> string(0) ""
    ["line"]=> int(0)
}

object(SoapFault)#2 (9) {
    ["message":protected]=> string(158) "SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://wsbeta.fedex.com/web-services' : failed to load external entity "https://wsbeta.fedex.com/web-services" "
    ["string":"Exception":private]=> string(0) ""
    ["code":protected]=> int(0)
    ["file":protected]=> string(53) "/mnt/array/bell-enterprise/bell/fedex_shipservice.php"
    ["line":protected]=> int(34)
    ["trace":"Exception":private]=> array(1) {
        [0]=> array(6) {
            ["file"]=> string(53) "/mnt/array/bell-enterprise/bell/fedex_shipservice.php"
            ["line"]=> int(34)
            ["function"]=> string(10) "SoapClient"
            ["class"]=> string(10) "SoapClient"
            ["type"]=> string(2) "->"
            ["args"]=> array(2) {
                [0]=> string(37) "https://wsbeta.fedex.com/web-services"
                [1]=> array(4) {
                    ["exceptions"]=> bool(true)
                    ["soap_version"]=> int(1)
                    ["cache_wsdl"]=> int(0)
                    ["trace"]=> int(1)
                }
            }
        }
    }
    ["previous":"Exception":private]=> NULL
    ["faultstring"]=> string(158) "SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://wsbeta.fedex.com/web-services' : failed to load external entity "https://wsbeta.fedex.com/web-services" "
    ["faultcode"]=> string(4) "WSDL"
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-06T21:59:20.713

经过 6 个小时的头痛之后，唯一的解决方案是下载 WSDL 文件。

[https://wsbeta.fedex.com/web-services](https://wsbeta.fedex.com/web-services) 和 [https://ws.fedex.com/web-services](https://ws.fedex.com/web-services)

它总是会抛出错误 500，因为这不是 wsdl。

从*Technical Resources -> FedEx WebServices For Shipping -> GetStarted 下载 wsdls*（单击“Rate Services”，然后单击“Download WSDL or XML”），在您的脚本中，您需要加载本地存储的 WSDL，一切正常像一个魅力。

```
$this->_soapClient = new SoapClient("RateService_v13.wsdl", array('exceptions'=>true, 'trace' => true)); 
```

玩得开心！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:14:29.910

该 url 不是 WSDL 的路径，而是 SOAP 请求应该去的 url。*从来没有和这些人一起工作过，但我想你可以在某处*获得一个 wsdl 文件并将其存储在本地，你可以将该 wsdl 中的端点更改为 wsbeta 端点。我找不到 wsdl，fedex 网站不允许我在没有注册的情况下进一步了解他们的开发技术资源，所以我将保留它：你*wsdl*在其他地方，你拥有的 url 只是位置一项特定的服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:16:51.680

您需要一个本地证书文件才能在 HTTPS 上访问 WSDL：

```
$client = new SoapClient($wsdl, array('local_cert' => $pathToLocalCert)); 
```

将此选项附加到您的当前`$soap_args`，此代码应按预期工作。`passphrase`如果您需要证书，也可以使用一个选项。

# javascript - 如果值为数组，则Javascript自动选择多个

> ID：10318527
> 
> 赞同：0
> 
> 时间：2012-04-25T15:10:56.227
> 
> 标签：javascript, jquery, html-select

我有一个 javascript 脚本，允许我从下拉菜单中选择数据，我将如何修改我的脚本以能够从数组中选择而不是从单个值中选择？

```
<script type='text/javascript'>
$(window).load(function(){
    $("select[value]").each(function() {
        $(this).val(this.getAttribute("value"));
    });
}); 
</script> 
```

在 HTML 代码中，我通常只是将值作为数据库中的数据，它会自动选择它。但是通过多选，我在数据库中将其作为

```
option1,option2,option3 
```

然后我把它变成一个数组

```
Array
(
    [0] => option1
    [1] => option2
    [2] => option3
) 
```

那么我将如何告诉我的脚本选择数组中的每个值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:25:53.587

您可以将值设置为您的数组：

```
$('#mySelect').val(myArray) 
```

# wcf - .net 2 客户端使用的 WCF 和 DataContract

> ID：10318541
> 
> 赞同：1
> 
> 时间：2012-04-25T15:11:48.597
> 
> 标签：wcf, service, datacontract

我开发了一个 WCF 服务（框架 4.0），它应该通过 BasicHttpBinding 与客户端进行通信。
我将我的（数据）合同保存在一个单独的程序集中，因为我希望它们被多个客户重用。
如果我在 .net 4 客户端中将我的 WCF 服务作为服务（服务引用）引用并设置“在引用的程序集中重用类型”，那么一切都会按预期工作。问题是我必须使用 .net 2 客户端使用相同的 WCF 服务。在这种情况下，生成的代理与我的共享程序集数据合同不同，我似乎无法重用它或将其转换为生成的代理。
有没有办法解决这个问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:29:00.700

嗯，.NET 2.0 根本没有 WCF API，因为它直到 3.0 才添加。所以忘记分享图书馆，因为没有什么可以真正分享的。.NET 2.0 应用程序必须使用旧的 WSE（Web 服务扩展）API。[MSDN 上提供了有关 WSE 的文档](http://msdn.microsoft.com/en-us/library/aa139619.aspx)，您可以在此处[下载 WSE API 的最新版本 3.0 SP3](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=14089)。

让 WSE 通过 basicHttpBinding 与 WCF 对话应该没有问题。如果您开始使用 WS-* 东西，事情只会变得复杂，即便如此，WSE 也支持很多。由于它是一个已弃用的 API，因此很难找到帮助。

# jakarta-ee - AsyncResult 可以被认为是可序列化的 FutureTask 吗？

> ID：10318543
> 
> 赞同：2
> 
> 时间：2012-04-25T15:11:56.757
> 
> 标签：jakarta-ee, java-ee-6

我不明白 AsyncResult 类的想法。从[教程](http://docs.oracle.com/javaee/6/tutorial/doc/)中我了解到它就像 FutureTask 类一样工作（但 AsyncResult 是可序列化的，因此可以发送到本地或远程客户端）。但是，[文档](http://docs.oracle.com/javaee/6/api/javax/ejb/AsyncResult.html)说不应调用此类的方法，因此我只能创建并返回此类的实例：

```
@Asynchronous
public Future<String> processPayment(Order order) throws PaymentException {
  ...
  String status = ...;
  return new AsyncResult<String>(status);
} 
```

那么客户端会得到什么样的对象呢？

我可以写吗

```
@Asynchronous
public  AsyncResult<String> processPayment... 
```

?.

`cancel(false)`调用 AsyncResult 的/Future 的方法后，容器会做些什么来取消异步任务吗？

**编辑：** 我在这个[线程](https://stackoverflow.com/questions/6149919/is-it-safe-to-start-a-new-thread-in-a-jsf-managed-bean/6158773#comment13349158_6158773)中找到了答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:07:01.587

您可以在 AsyncResult 类文档中找到基本原理：

> 请注意，此对象不会传递给客户端。只是为了方便将结果值提供给容器。因此，应用程序不应调用其实例方法。

使用在您的第一个代码段中定义的（正确）签名，客户端将收到一个简单的 Future，如下所示：

```
@Singleton
public class AsyncClient{
   @Inject PaymentProcessor proc;
   public String invokePaymentProcessor(Order order){
         Future<String> result=proc.processPayment(order);
         // should not block.... the container instantiates a Future and 
         // returns it immediately
         return result.get(); // gets the string (blocks until received)
   }

} 
```

当然，如果容器尚未开始方法调用（即异步调用仍在进程队列中），`cancel(false)`则应取消调用（将其从队列中删除），否则应指定`cancel(true)`并检查`SessionContext.wasCancelled`最终处理循环`PaymentProcessor.processPayment`

# twitter-bootstrap - 在 TwitterBootstrap 中摆脱 Gutter

> ID：10318546
> 
> 赞同：11
> 
> 时间：2012-04-25T15:11:57.353
> 
> 标签：twitter-bootstrap

也许我疯了，但没有办法摆脱 twitter 引导程序上的 20px 排水沟吗？例如，我使用了使用 alpha 和 omega 的框架，这些框架覆盖了排水沟，给它一个边距：0px；我目前在 twitter bootstrap 文档中没有看到类似的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T15:26:43.290

使用引导程序，您不需要一个类来删除排水沟，它会被`.row`您`span`自动放置 div 的类删除，因此所有内容都很好地位于网格内。

```
.row {
    margin-left: -20px;
} 
```

一点澄清。

其他框架，例如 960.gs 网格，使用`.alpha`and`.omega`来删除网格左侧或右侧的多余边距，以便它们可以将网格元素很好地放置在一行中。使用引导程序不再是这种情况，因为网格有多余的边距被 div 删除，这是让您的div 很好地位于网格内所`.row`必需的。`.span`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:16:03.553

**更新：**

在文档中也看不到任何内容，但这里有一个修复：

如果要移除容器左右两端的排水沟，则必须为 .alpha 和 .omega 添加一个类。

```
.alpha { margin-left: 0; }
.omega { margin-right: 0; } 
```

如果要更改所有排水沟：

在 variables.less 文件中，您可以更改 Gutter 宽度：

```
// GRID
// --------------------------------------------------

// Default 940px grid
// -------------------------

@gridGutterWidth: 20px; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T06:57:29.843

只需从此处下载框架的自定义版本

[http://twitter.github.com/bootstrap/customize.html#variables](http://twitter.github.com/bootstrap/customize.html#variables)

并使 gridGutter = 0px

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-15T07:42:13.123

有同样的问题，这很好地解决了我的问题：

```
.row.no-gutter {
  margin-left: 0;
  margin-right: 0;
}
.row.no-gutter [class*='col-']:not(:first-child),
.row.no-gutter [class*='col-']:not(:last-child) {
  padding-right: 0;
  padding-left: 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-29T02:18:52.053

我知道这是一个老话题……但我敢肯定这对人们来说仍然是一个问题。我发现这个非常有用的 CSS 为我解决了这个问题。享受！

```
/* remove spacing between middle columns */
.row.no-gutter [class*='col-']:not(:first-child):not(:last-child) {
  padding-right:0;
  padding-left:0;
}
/* remove right padding from first column */
.row.no-gutter [class*='col-']:first-child {
  padding-right:0;
}
/* remove left padding from first column */
.row.no-gutter [class*='col-']:last-child {
  padding-left:0;
}

/* only for column content visible */
.col-lg-1>div {background-color:#ddd;} 
```

[CSS 源 - http://bootply.com/109530](http://www.bootply.com/109530)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:08:27.470

最好在 960.gs 框架中添加类似于 alpha 和 omega 的自定义样式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-15T06:29:12.457

```
body {
  margin-right: -15px;
  overflow-x: hidden;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-27T01:18:30.677

您可以将内容放入容器流体 div：

```
<div class='container-fluid'>
...
</div> 
```

然后修改（在 bootstrap.css 中）或覆盖 container-fluid 类：

```
.container-fluid {
    padding-left: 0px;
    margin-left: -20px;
  } 
```

boostrap-responsive.css 具有相同的类，因此您可以为移动屏幕和桌面屏幕设置不同的边距。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-22T17:16:29.580

尝试将此添加到您的自定义 css：

```
.row-nogutter {
    margin-right: 0;
    margin-left: 0;
 } 
```

并使用你的行`<div class='row row-nogutter'>`

如果这仍然不起作用，请尝试添加`!important`，但我不推荐它。

# objective-c - 二维数组实例变量的 Objective-c 语法

> ID：10318547
> 
> 赞同：1
> 
> 时间：2012-04-25T15:12:03.887
> 
> 标签：objective-c, arrays, memory-management, syntax, instance-variables

通常我这样对待 Objective-c 中的实例变量：

```
@interface MyClass : NSObject
@property (nonatomic, retain) NSMutableArray *mutableArray;
@end

@implementation MyClass
@synthesize mutableArray;

- (id) init {
    if((self = [super init])) {
        self.mutableArray = [NSMutableArray array];
    }
    return self;
}

- (void) dealloc {
    [mutableArray release];
    [super dealloc];
}

@end 
```

我对上面的语法感觉很舒服。但是，对于 2D 数组实例变量（如`NSUInteger 2dArray[10][10]`.

**在接口声明、合成 getter/setter 和内存管理方面，二维数组实例变量的适当 Objective-c 语法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:19:14.597

这不是Objective C 语法。它是纯 C 语法。你不需要专门说你想要一个 objc 对象的二维数组。只需声明/定义可变数组并向其中添加其他数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:25:09.003

你不需要**为**你的数组分配内存；在类中定义它们非常好，并且它们将始终以相同的大小存在。因此，您无需担心内存管理，您的 getter/setter 应该手动定义，具体取决于您想要做什么。例如，这些 getter/setter 方法允许获取/设置单个值：

```
@interface MyClass : NSObject
{
    NSUInteger _twoDeeArray[10][10];
}

- (void)setTwoDeeArrayX:(NSUInteger)x y:(NSUInteger)y value:(NSUInteger)value;
- (NSUInteger)twoDeeArrayX:(NSUInteger)x y:(NSUInteger)y;

@end

@implementation MyClass

- (void)setTwoDeeArrayX:(NSUInteger)x y:(NSUInteger)y value:(NSUInteger)value
{
    _twoDeeArray[x][y] = value;
}

- (NSUInteger)twoDeeArrayX:(NSUInteger)x y:(NSUInteger)y
{
    return _twoDeeArray[x][y];
}

@end 
```

您可能应该对 x 和 y 进行范围检查，但您明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:27:54.370

对于二维数组，您可以：

1.  使用 C 数组（就像你在帖子中提到的那样）
2.  将 NSMutableArray 添加到 NSMutableArray
3.  创建一个类来实现您的二维数组版本

如果您只想在数组中使用原始类型，那么这三个都很好。

对于 Objective-C 对象，您也可以使用带有`id`类型的 C 数组，但您必须自己管理内存分配/释放。2 和 3 是更好的方法。

供参考：

*   [使用 NSMutableArray 的二维数组](https://stackoverflow.com/questions/724772/2d-arrays-in-objective-c)
*   [在 Objective-C 中创建一个二维数组](https://stackoverflow.com/questions/4362740/creating-a-two-dimensional-array-in-objective-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:58:50.037

在 iOS 6 中，您可以使用下标来定义使用方括号语法的矩阵类，`matrix[row][col]`您可以在其中存储对象并且它们被矩阵正确保留，这与使用 C 数组不同

首先创建一个 Row 对象，定义如下

```
- (id)initWithElementNumber:(NSUInteger)num {
    if (self = [super init]) {
        _row = [NSMutableArray arrayWithCapacity:num];
        for (int j = 0; j < num; j++)
            [_row addObject:[NSNull null]];
    }
    return self;
}

- (id)objectAtIndexedSubscript:(NSUInteger)idx {
    return self.row[idx];
}

- (void)setObject:(id)object atIndexedSubscript:(NSUInteger)idx {
    self.row[idx] = object;
}

@end 
```

然后是一个使用之前定义的 Row 类的 Matrix 类：

```
@implementation UKMatrix

- (id)initWithRows:(NSUInteger)numRows columsn:(NSUInteger)numCol {
    if (self = [super init])
    {
        _numCol = numCol;
        _numRows = numRows;
        _rows = [NSMutableArray arrayWithCapacity:numRows];
        for (int j = 0; j < numRows; j++)
            [_rows addObject:[[UKRow alloc] initWithElementNumber:numCol]];
    }
    return self;
}

- (id)objectAtIndexedSubscript:(NSUInteger)idx {
    return self.rows[idx];
}

- (NSString *)description {
    NSString *matrixDesc = @"";
    for (int j = 0; j < self.numRows; j++) {
        matrixDesc = [matrixDesc stringByAppendingString:@"\n"];
        for (int k = 0; k < self.numCol; k++)
            matrixDesc = [matrixDesc stringByAppendingFormat:@" %@ ",self[j][k]];
    }
    return matrixDesc;
}

@end 
```

那么您可以使用具有以下语法的 Matrix

```
UKMatrix *matrix = [[UKMatrix alloc] initWithRows:4 columsn:2];
matrix[1][1] = @2;
NSLog(@"%@", matrix); 
```

# sql-server - 需要减少查询时间

> ID：10318548
> 
> 赞同：0
> 
> 时间：2012-04-25T15:12:03.997
> 
> 标签：sql-server, sql-server-2008, tsql, query-optimization

我的问题是下面的查询需要 38 秒才能完成，我需要尽可能减少这个时间。当我查看执行计划时：Dim_Customers 索引扫描上的 %54 成本支出。任何建议将不胜感激。谢谢

```
DECLARE @SalesPersonCode NVARCHAR(4)
DECLARE @StartDate       DATETIME
DECLARE @EndDate         DATETIME

SET @SalesPersonCode = 'AC';
SET @StartDate       = '03/01/2012';
SET @endDate         = '03/31/2012';

SELECT AA_FactSalesOrderDetails.Salesperson
             , Dim_SalesOrganisation.[Salesperson name]
             , AA_FactSalesOrderDetails.[Order Date]
             , Dim_Customers.[Customer number]
             , Dim_Customers.[Customer name]
             , Dim_Customers.[Area/state]
             , Dim_Customers.country
             , Dim_Customers.[Customer stop] AS [Customer Block]
             , AA_FactSalesOrderDetails.[Customer order stop] AS [Co Stop]
             , AA_FactSalesOrderDetails.[First delivery date Header]
             , AA_FactSalesOrderDetails.[Last delivery date Header]
             , Dim_Customers.[User-defined field 6 - customer]
             , Dim_Customers.[Customer group name]
             , AA_FactSalesOrderDetails.[Contact Method]
             , AA_FactSalesOrderDetails.[Customer order number]
             , AA_FactSalesOrderDetails.[Price Level]
             , AA_FactSalesOrderDetails.[Item number]
             , Dim_Items.[Product group description]  AS [Item name]
             , AA_FactSalesOrderDetails.[Ordered quantity - basic U/M] AS [Quantity Ordered]
             , AA_FactSalesOrderDetails.[Ordered quantity - basic U/M] * AA_FactSalesOrderDetails.[Net price] AS [Order Line Total ]

FROM AA_FactSalesOrderDetails 
     LEFT JOIN
     Dim_SalesOrganisation
     ON
     AA_FactSalesOrderDetails.Salesperson = Dim_SalesOrganisation.Salesperson
     LEFT JOIN
     Dim_Customers
     ON
     AA_FactSalesOrderDetails.Dim_Customers_dKey = Dim_Customers.Dim_Customers_dKey
     LEFT JOIN
     Dim_Items
     ON
     AA_FactSalesOrderDetails.[Item number] = Dim_Items.[Item number]
     LEFT JOIN
     Dim_CustomerOrderTypes
     ON
     AA_FactSalesOrderDetails.[Customer order type] = Dim_CustomerOrderTypes.[Customer order type]

WHERE AA_FactSalesOrderDetails.[Order Date] 
      BETWEEN
      dbo.fnc_M3_sql_datetime_to_M3_date(@StartDate)    /* !!!Procedural Approach!!! */
      AND
      dbo.fnc_M3_sql_datetime_to_M3_date(@EndDate)      /* !!!Procedural Approach!!! */
      AND
      AA_FactSalesOrderDetails.Salesperson = @SalesPersonCode 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:35:12.167

由于 fnc_M3_sql_datetime_to_M3_date 采用在整个查询执行过程中保持不变的值，因此将这两个调用（一个带有 startDate 和一个带有 endDate 的调用）移到查询的顶部，并将返回的值分配给声明的变量。然后引用那些声明的变量下面而不是在 where 子句中调用函数。这可能会有所帮助。函数有时会抑制良好查询计划的制定。

这个稍微讲一下 [为什么SQL Server标量值函数变慢了？](https://stackoverflow.com/questions/800017/why-do-sql-server-scalar-valued-functions-get-slower) 这也是 [http://strictlysql.blogspot.com/2010/06/scalar-functions-on-where-clause.html](http://strictlysql.blogspot.com/2010/06/scalar-functions-on-where-clause.html)

```
declare @m3StartDate Numeric(8,0)
Set @m3StartDate = fnc_M3_sql_datetime_to_M3_date(@StartDate)
declare @m3EndDate Numeric(8,0)
Set @m3EndDate = fnc_M3_sql_datetime_to_M3_date(@EndDate)
...
WHERE AA_FactSalesOrderDetails.[Order Date] 
      BETWEEN @m3StartDate AND @m3EndDate
      AND
      AA_FactSalesOrderDetails.Salesperson = @SalesPersonCode 
```

两个@m3-- vars 的类型应该与AA_FactSalesOrderDetails.[Order Date] 完全相同。

我还将检查 Dim_Customers 上获取扫描而不是查找的键的定义，并确保 Dim_Customers 的索引方式对您有所帮助（如果还没有的话）。 [http://blog.sqlauthority.com/2009/08/24/sql-server-index-seek-vs-index-scan-diffefence-and-usage-a-simple-note/](http://blog.sqlauthority.com/2009/08/24/sql-server-index-seek-vs-index-scan-diffefence-and-usage-a-simple-note/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:23:54.783

我愿意赌这个版本的运行速度超过 35 秒。

现在，可能还有其他可能的优化（例如创建或改进索引，如果没有看到计划我们就无法知道），但我认为我已经清理了您查询中应该有助于提高性能的几个问题。

**编辑**一些编辑，因为显然用户正在针对 2000 运行，即使问题被标记为 2008 ......

```
-- make sure you don't have an implicit conversion between varchar and nvarchar
DECLARE
  @SalesPersonCode NVARCHAR(4),
  @StartDate DATETIME,
  @EndDate DATETIME;

SELECT
  @SalesPersonCode = N'AC', -- nvarchar needs N prefix!
-- get rid of the function call, I am guessing it just removes time
-- in which case, use the DATE data type instead.
  @StartDate       = '20120301',
  @EndDate         = '20120331';

-- since a salesperson can only have one code, and you are only pulling the name into the 
-- SELECT list (it will be the same for every row), use a constant and eliminate the join.

DECLARE @SalesPersonName NVARCHAR(255);

SELECT @SalesPersonName = SalesPerson_Name 
  FROM dbo.Dim_SalesOrganisation
  WHERE SalesPerson = @SalesPersonCode;

-- I've added table aliases which make the query MUCH, MUCH easier to read

SELECT f.Salesperson
     , Salesperson_name = @SalesPersonName
     , f.[Order Date]
     , c.[Customer number]
     , c.[Customer name]
     , c.[Area/state]
     , c.country
     , c.[Customer stop] AS [Customer Block]
     , f.[Customer order stop] AS [Co Stop]
     , f.[First delivery date Header]
     , f.[Last delivery date Header]
     , c.[User-defined field 6 - customer]
     , c.[Customer group name]
     , f.[Contact Method]
     , f.[Customer order number]
     , f.[Price Level]
     , f.[Item number]
     , i.[Product group description]  AS [Item name]
     , f.[Ordered quantity - basic U/M] AS [Quantity Ordered]
     , f.[Ordered quantity - basic U/M] * f.[Net price] AS [Order Line Total ]

    -- I've also added schema prefix. See below *
FROM 
     dbo.AA_FactSalesOrderDetails AS f
-- I've removed the join to Dim_SalesOrganisation as per above
     LEFT OUTER JOIN dbo.Dim_Customers AS c
       ON f.c_dKey = c.Dim_Customers_dKey
     LEFT OUTER JOIN dbo.Dim_Items AS i
       ON f.[Item number] = i.[Item number]
     -- I've removed the join to Dim_CustomerOrderTypes since it is never used
WHERE 
    -- in case [Order Date] is DATETIME and includes time information. See below **
    f.[Order Date] >= @StartDate 
    AND f.[Order Date] < DATEADD(DAY, 1, @EndDate)
    -- still need to restrict it to the stated salesperson
    AND f.SalesPerson = @SalesPersonCode; 
```

`*` [要改掉的坏习惯：避免使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)

`**` [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:11:29.163

尽管@hatchet 避免在`WHERE`子句中使用函数是正确的，但我想在这种情况下这不是问题，因为它是在标量值上使用的（只能通过实际的查询计划来确定）。

当然，您可以删除对 table 的引用`Dim_CustomerOrderTypes`，即不过滤也不返回任何数据。我相信这个查询应该使用以下索引来提高性能：

```
-- to seek on [Salesperson] and scan on [Order Date]
CREATE CLUSTERED INDEX IDXC ON AA_FactSalesOrderDetails([Salesperson], [Order Date]);

-- to seek on key
CREATE CLUSTERED INDEX IDXC ON Dim_Customers([Dim_Customers_dKey]);

-- to seek only this index instead of reading from table
CREATE INDEX IDX0 ON Dim_SalesOrganisation([Salesperson], [Salesperson name]);

-- to seek only this index instead of reading from table
CREATE INDEX IDX0 ON Dim_Items ([Item number], [Product group description]) 
```

我希望这些建议对你有所帮助。

# asp.net-mvc - RavenDB 和 IDocumentStoreListener

> ID：10318550
> 
> 赞同：0
> 
> 时间：2012-04-25T15:12:27.260
> 
> 标签：asp.net-mvc, listener, ravendb

我正在尝试通过 IDocumentStoreListener 向简单模型添加自动增量。我发现有关此功能实现的文档相当稀少（任何指针将不胜感激）。我一直在尝试关注[这篇博](http://ben.onfabrik.com/posts/using-a-ravendb-listener-to-update-entities)文，但它似乎已经过时了。当我尝试实施

```
store = new EmbeddableDocumentStore
{
    RunInMemory = true
}
.RegisterListener(new AuditableEntityListener(() => "Test User"))
.Initialize(); 
```

我收到一个构建错误，指出“**无法将 lambda 表达式转换为 Raven.Client.IDocumentStore 类型，因为它不是委托类型**”。

我设法通过使用此代码来构建它

```
store = new EmbeddableDocumentStore
    {
        RunInMemory = true
    }
    .RegisterListener(new AuditableEntityListener(store ))
    .Initialize(); 
```

监听器的代码如下

```
public class PublicIdStoreListener : IDocumentStoreListener
    {

        HiLoKeyGenerator generator;
        IDocumentStore store;
        public PublicIdStoreListener(IDocumentStore store)
        {
            this.store = store;
            generator = new HiLoKeyGenerator(store, "verifications", 1024);
        } 

        public void AfterStore(string key, object entityInstance, RavenJObject metadata)
        {
            throw new NotImplementedException();
        }

        public bool BeforeStore(string key, object entityInstance, RavenJObject metadata)
        {
            var verification = entityInstance as VerifyAccountModel;
            if (verification.PublicId == "0")
            {
                verification.PublicId = generator.GenerateDocumentKey(store.Conventions, entityInstance);
            }
            return false;
        }
    } 
```

但是，当我运行应用程序时，它会在存储任何文档时命中 PublicIdStoreListener，而不仅仅是 VerifyAccountModel，这会导致应用程序抛出异常。

我想知道是否有人可以指出我正确的方向，因为我对实际应该如何实施感到困惑。提前致谢。

**编辑** 我将文档监听器更新为以下

```
public bool BeforeStore(string key, object entityInstance, RavenJObject metadata)
        {

            if (entityInstance.GetType() == new VerifyAccountModel().GetType())
            {
                var verification = entityInstance as VerifyAccountModel;
                if (verification.PublicId == "0")
                {
                    verification.PublicId = generator.GenerateDocumentKey(store.Conventions, entityInstance);
                }
            }
            return true;
        } 
```

**更新** 我发现我无法通过 RegisterListener 在实例化的同一行中附加商店。必须事后完成，否则传入时store仍然为null。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:27:55.937

我不确定是否有办法将侦听器注册为仅针对某些类型触发，但您当然可以将代码构造为仅处理`VerifyAccountModel`实体。

```
var verification = entityInstance as VerifyAccountModel;
if (verification == null) 
    return false; // We can't do anything, just let it pass through 
```

另外，**我的理解是，你应该在进行更改时返回 true，如果没有进行更改，则返回 false**。这决定了实体是否需要重新序列化。如果这是正确的，整个事情可能会被重组如下。

```
var verification = entityInstance as VerifyAccountModel;
if (verification != null && verification.PublicId == "0")
{
    verification.PublicId = generator.GenerateDocumentKey(store.Conventions, entityInstance);
    return true; // change made, re-serialize
}

return false; // no change made 
```

# php - gdata Zend PHP Google Docs 支持的文件类型

> ID：10318554
> 
> 赞同：1
> 
> 时间：2012-04-25T15:12:47.623
> 
> 标签：php, zend-framework, google-docs, zend-gdata

我在 10 个月前听说 Google 支持Google Docs 中**的所有类型的文件**。

此视频中的证明：http: //youtu.be/Sp8fotnTwj8?t= [4m20s](http://youtu.be/Sp8fotnTwj8?t=4m20s)

但我正在使用 zend gdata 函数：

```
function uploadFile($fileLocation, $title=null, $mimeType=null,
                           $uri=null) 
```

[http://framework.zend.com/apidoc/1.10/_Gdata_Docs.html#Zend_Gdata_Docs::uploadFile](http://framework.zend.com/apidoc/1.10/_Gdata_Docs.html#Zend_Gdata_Docs::uploadFile) ()

而且这个函数只接受这个常量中描述的**某种文件**

```
private static $SUPPORTED_FILETYPES = array(
      'TXT'=>'text/plain',
      'CSV'=>'text/csv',
      'TSV'=>'text/tab-separated-values',
      'TAB'=>'text/tab-separated-values',
      'HTML'=>'text/html',
      'HTM'=>'text/html',
      'DOC'=>'application/msword',
      'ODS'=>'application/vnd.oasis.opendocument.spreadsheet',
      'ODT'=>'application/vnd.oasis.opendocument.text',
      'RTF'=>'application/rtf',
      'SXW'=>'application/vnd.sun.xml.writer',
      'XLS'=>'application/vnd.ms-excel',
      'XLSX'=>'application/vnd.ms-excel',
      'PPT'=>'application/vnd.ms-powerpoint',
      'PPS'=>'application/vnd.ms-powerpoint'); 
```

[http://framework.zend.com/apidoc/1.10/_Gdata_Docs.html#Zend_Gdata_Docs::%24SUPPORTED_FILETYPES](http://framework.zend.com/apidoc/1.10/_Gdata_Docs.html#Zend_Gdata_Docs::%24SUPPORTED_FILETYPES)

所以这里有点矛盾。我的问题是：我是否仅限于那些类型的文件，还是尚未更新的 gdata 框架？

如果是，我该如何找到解决方法？

（顺便说一句，如果 Zend 没有在 10 个月内进行此更新，我会为他们感到难过，这是一个主要的并且很容易实现）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:50:13.623

Documents List API 支持任何类型的文件，它是过时的 PHP 库。您可以轻松地对其进行修补并将其他文件类型添加到 $SUPPORTED_FILETYPES 或让它忽略对支持的文件类型的检查。

# nhibernate - 集合中的某些大小，包括带有 HQL 的第二个过滤器？

> ID：10318559
> 
> 赞同：0
> 
> 时间：2012-04-25T15:13:16.707
> 
> 标签：nhibernate, hql

我在以下场景中苦苦挣扎：假设我有两个实体`Classroom`和`Member`，用多对多映射。教室有集合`Members`，包含实体`Member`。我想得到有一定数量的成员的教室。这将导致类似：

`FROM Classroom cr WHERE cr.Members.size < 10`

现在我有一个`Type`课堂。我想先过滤类型，然后过滤大小。这不起作用：

`FROM Classroom cr WHERE cr.Members.size < 10 AND cr.Members.Type = 1`

结果是：`illegal attempt to dereference collection`

我怎么能写这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:44:44.657

我想你需要加入

```
from Classroom as cr left join cr.Members as m
where cr.Members.size < 10 and m.Type = 1 
```

# r - 构造 randomForest 分类的公式，然后使用 predict

> ID：10318560
> 
> 赞同：1
> 
> 时间：2012-04-25T15:13:17.640
> 
> 标签：r

我有以下代码：

```
RFmodel = randomForest(as.factor(trainset[,55]) ~ . , trainset, ntree = ntree.array[i], mtry = mtry.array[j], maxnodes = maxnodes.array[k])
RFyhat = predict(RFmodel , testset[,-55])
RFyhat = as.numeric(levels(RFyhat)[RFyhat])
Testerr.randomforest[i,j,k] = sum(RFyhat != testset[,55])/length(testset[,55]) 
```

此代码在第二行引发错误，即它说：

eval 中的错误（expr、envir、enclos）：找不到对象“V55”

然而，奇怪的是，当我做两件事之一时，错误消失了，1）将第一行中的 trainset[,55] 更改为 trainset$V55，2）将 testset[,-55] 更改为 testset。但是，错误率略有不同（我想是因为在后者中，我使用 testset[,55] 作为自变量，但这只是我的猜测）。谁能向我解释使用 trainset[,55] 和 trainset$V55 之间的区别是什么，以及在这种情况下的正确用法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:24:37.443

这是因为您误用了 R 的公式界面。公式：

```
as.factor(trainset[,55]) ~ . 
```

在数据集中进行评估`trainset`将包括左侧作为响应，将训练集中的*所有变量*作为预测变量。那是因为您没有在左侧给出变量的名称，所以 the`.`被解释为一切“其他”，但在这种情况下，一切“其他”就是一切，因为 R 找不到名为“as”的东西。因子（训练集 [,55]）” 在`trainset`.

您可能想做更多类似的事情：

```
trainset$V55 <- as.factor(trainset$V55)
RFmodel = randomForest(V55 ~ . , trainset, ...) 
```

此错误的一个后果是您将`V55`响应和预测都包括在内。令我惊讶的是，您并没有简单地获得 0% 的错误率，当您在此示例中执行等效操作时会发生这种情况：

```
rf <- randomForest(as.factor(iris[,5]) ~ ., data=iris) 
```

它`Species`用作响应，但也将其作为预测器。您可以通过查看生成的随机森林对象的`$call`或属性来验证这一点。`$terms`

# android - Android adb 不允许我输入命令

> ID：10318564
> 
> 赞同：7
> 
> 时间：2012-04-25T15:13:32.243
> 
> 标签：android, adb

我正在尝试处理一些 SQLiteDB 问题，并希望使用 ABD 工具来访问我的模拟器数据库。当我单击平台工具文件中的 adb 文件时，它会打开，但很快会在窗口上抛出一堆文本，然后关闭。它是如此之快，我什至无法分辨它在做什么。我尝试以管理员身份运行它并没有改变。如果这与它有任何关系，我正在使用 Vista。

关于如何让它停止关闭以便输入命令的任何建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T15:19:40.857

您启动命令外壳（`WindowsKey`+ `R`，`cmd`在出现的窗口中输入并按 Enter。），然后从那里使用它。`adb shell`可能是您需要的命令。

`C:\> cd \Path\to\platform-tools`
`C:\Path\to\platform-tools\> adb shell`

如果您将路径添加到您的环境中`PATH`，则不需要在`cd`那里。[[这](http://www.question-defense.com/2009/06/22/modify-a-users-path-in-windows-vista-vista-path-environment-variable)] 应该是如何做到这一点的一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:23:14.343

如 zapl 所述，您需要启动命令提示符，将 adb 目录添加到路径，然后运行 ​​adb 命令。您也可以使用 DDMS 来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T22:56:25.807

在答案中，不清楚您是否必须先运行 Windows cmd.exe 终端程序。确保您位于正确的目录中，然后从该 cmd 程序中启动 ADB。

为确保 windows 可以找到 adb.exe（“位于正确的目录中），您可以使用“cd”命令手动导航到 adb.exe（通常是平台工具）的位置，或者更新您的路径语句，以便 windows无论您的 cmd.exe 提示指向何处，都可以找到它。

# c# - C#/JQuery webservice 调用给出 500 错误

> ID：10318565
> 
> 赞同：0
> 
> 时间：2012-04-25T15:13:36.460
> 
> 标签：c#, jquery, asmx

这让我很困惑——我不知道问题出在哪里！

此调用始终返回 500 错误：

询问：

```
$('body').on('click', '.day', function () {
    // a suspect day has been clicked
    if (confirm('Re-index documents received on this day?')) {
        // re-index
        var day = $(this).find('.day_number').text();
        var year = parseInt($('#hidYear').val());
        var month = parseInt($('#hidMonth').val());
        $.ajax({
            type: "POST",
            url: "ajax.asmx/ReIndexDay",
            data: JSON.stringify( { Month: month, Year: year, Day: day } ),
            contentType: "application/xml; charset=utf-8",
            dataType: "xml",
            success: function (data) {
                var calendarHTML = $(data).find(':first').text();
                // update hidden fields and calendar
                $('#hidYear').val(year);
                $('#hidMonth').val(month);
                $('#divContent').html(calendarHTML);
            },
            error: function (msg) {
                alert("Failed: " + msg.status + ": " + msg.statusText);
            }
        });
    }
}); 
```

C＃

```
[WebMethod(Description = "Re-index the day and return HTML of a calendar table for the month")]
[ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
public string ReIndexDay(int Day, int Month, int Year)
{
    Diagnostic.ReIndex(Day, Month, Year);
    return GetIndexCalendarHTML(Month, Year);
} 
```

我现在被卡住了，所以所有建议都表示赞赏！

[编辑]

我从浏览器中得到了这个——不确定它是否准确，因为它可能不会复制同样的东西：

System.InvalidOperationException：请求格式无效：application/xml；字符集=UTF-8。在 System.Web.Services.Protocols.HttpServerProtocol.ReadParameters() 在 System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest()

[/编辑]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:41:12.140

In addition to setting the content type to:

```
contentType: 'application/json; charset=utf-8', 
```

instead of XML like you had (as @Zachary said (and I said in a comment :)). You also need to actually send back XML.

Saying:

```
[ScriptMethod(ResponseFormat = ResponseFormat.Xml)] 
```

Doesn't actually encode your string as XML, all it does is set the Content-type header to:

```
Content-Type: text/xml; charset=utf-8\. 
```

*You* actually have to return the XML. It's a bit misleading.

*Edit*: Actually, let me ammend that. It *does* XML *except* when you send a string. You can have it wrap your string in XML by doing this:

[ScriptMethod(ResponseFormat = ResponseFormat.Xml, XmlSerializeString=true)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:29:31.907

您发送 JSON，但您将内容类型设置为 XML。尝试将其更改为此。

```
 contentType: 'application/json; charset=utf-8', 
```

# ios - 内存磁盘空间不足 + startVideoCapture 方法返回 true

> ID：10318566
> 
> 赞同：3
> 
> 时间：2012-04-25T15:13:39.207
> 
> 标签：ios, uiimagepickercontroller

我有一个关于 iOS 设备磁盘空间的问题。

我有一个没有磁盘空间的 iPod touch 设备，当我尝试通过相机应用程序拍摄视频时，它会抛出一条警告消息，提示“没有足够的存储空间”。

但是在我的应用程序中，如果我尝试使用 startVideoCapture 方法进行`UIImagePickerController`视频录制，则不会发生视频录制。当我执行 startVideoCapture 方法时，应用程序会打印一条控制台消息“/var/mobile/Media/PhotoData/takingvideo 活动指示器已清除”。

我不确定这是什么意思。当我通过 stopVideoCapture 停止视频录制时`UIImagePickerController`，它会打印一条控制台消息“ `UIImagePickerController`：忽略停止视频捕获的请求；相机当前未捕获视频。”

我不确定为什么没有发生视频捕获或没有磁盘空间时 startVideoCapture 没有返回 NO。我正在 iPod touch 第 4 代设备中尝试此操作，其 OS 版本为 5.1。任何人都有可能是什么问题？

谢谢，纳文

# c++ - reinterpret_cast 并与 CV_MAT_ELEM 一起使用

> ID：10318568
> 
> 赞同：1
> 
> 时间：2012-04-25T15:13:50.260
> 
> 标签：c++, opencv

我想将 8 位输入彩色图像（Inputfile 是 a.bmp 文件）的所有数据放入一个新的 16 位 Mat Array 中。

我这样做是因为我需要总结几个图像补丁，然后为每个像素建立平均值。

```
Mat img = imread(Inputfile);   //there now should be values between 0 and 255 
```

例如，处理蓝色值如下

```
uchar* ptr = img.data + img.step*row;
cout << ptr[n*col] << endl; 
```

只显示单个字母，没有值。

```
cout << static_cast<short>(ptr[n*col]) << endl; 
```

类型转换为更短或更大会产生正确的值。但是转换为 unsigned char （我认为这是正确的数据类型）与没有任何类型转换的情况相同。

据我所知，Short 有 2 个字节，但是颜色 .bmp 每个通道应该只有 1 个字节的颜色信息。因为我需要在最坏的情况下总结 81 个（较小的 128=7 位）像素值，所以我认为作为目标值的 short 会很棒。

有关简单访问 8 位值并在 16 位数组中使用它们的正确方法的任何帮助都会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:29:50.217

转换工作正常，但如果您将 unsigned char 发送到输出流中，它将被解释为字符并打印为字符。

另请注意，OpenCV 已经具有将矩阵转换为不同数据类型的功能。您甚至可以将图像读入首选数据类型的矩阵：

```
cv::Mat3s img = cv::imread(...); 
```

并且**忽略使用数据指针**。阅读 OpenCV 文档，了解如何以干净的方式访问单个像素或行（迭代器、运算符（）、运算符 []...）。

# python - Django-registration：如何包含自定义后端？

> ID：10318572
> 
> 赞同：2
> 
> 时间：2012-04-25T15:13:57.513
> 
> 标签：python, django, django-registration

我创建了一个自定义后端以在 html 中包含激活电子邮件，而无需编辑 django-registration 代码

（参考[django+ 使用 django-registration 以 html 格式发送电子邮件](https://stackoverflow.com/questions/1325983/django-send-email-in-html-with-django-registration)，最后一个答案）

这是存储在 中的后端，例如存储在中的`core/registration/backends/htmldefault/__init__.py`DefaultBackend`registration/backends/__init__.py`

```
from registration.forms import RegistrationForm
from core.models import HtmlRegistrationProfile

class HtmlDefaultBackend(object):
   #etc same as DefaultBackend but using HtmlRegistrationProfile instead of RegistrationProfile 
```

这是我的 urls.py

```
urlpatterns = patterns('',
    #...
    url(r'^accounts/register/$', register, {'backend': 'core.registration.backends.htmldefault.HtmlDefaultBackend','form_class': UserRegistrationForm}, name='registration_register'),
    url(r'^accounts/', include('registration.urls')),
    #...
) 
```

但我明白了

```
ImproperlyConfigured at /accounts/register/

Error loading registration backend core.registration.backends.htmldefault: "No module named registration.backends.htmldefault" 
```

被扔`/registration/backends/__init__.py in get_backend, line 27`

我要问的是..是否可以在注册包之外有一个自定义的 django-registration 后端？或者它必须像简单和默认后端一样位于 /registration/backends/ 下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:44:07.697

有可能的。

1.  检查您的所有文件夹（核心、注册、后端、htmldefault）是否都有`__init__.py`（可以为空）。

2.  核心文件夹在项目目录中？

# devexpress - 将多个 XtraGrid 控件导出到单个 Excel 文件

> ID：10318573
> 
> 赞同：1
> 
> 时间：2012-04-25T15:14:08.530
> 
> 标签：devexpress, export-to-excel, excel-interop, xtragrid

我有几个 XtraGrid 控件，每个控件都包含不同的信息，我得到了一些关于如何按照以下方向将 XtraGrid 导出到 Excel 文件的[信息 http://www.devexpress.com/Support/Center/p /Q362120.aspx](http://www.devexpress.com/Support/Center/p/Q362120.aspx)

现在有没有办法将每个 XtraGrid 控件导出到单个 Excel 文件，以便将每个 XtraGrid 信息导出到不同的 Excel 表。

我尝试将导出路径方向设置为同一个 Excel 文件，但是当第一个导出过程完成后，第二个导出过程只是覆盖了 excel 文件，依此类推。

我尝试使用这个方向[XtraGrid - Export To Excel](https://stackoverflow.com/questions/5075563/xtragrid-export-to-excel)中描述的方法，但我想知道是否有另一种方法不使用互操作 excel 库，因为我在使用这个库时遇到了一些问题（我的意思是在使用这个库时你创建一个 Excel 进程，但在你创建它之后你不能杀死它，即使你已经使用了应该这样做的方法）。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T20:04:03.227

我只是想提供一个更完整的答案，因为我花了一段时间才使用 D.. 的答案找到一个解决方案。

是的 - 看起来我正在尝试打印一些东西，但我只是导出到 Excel，我保证。

```
using DevExpress.XtraPrinting;
using DevExpress.XtraPrintingLinks;
using DevExpress.XtraGrid;

class whatever
{
    GridControl grid1;
    GridControl grid2;
    //.....

    public void exportToExcel()
    {
        using (var saveDialog = new SaveFileDialog())
        {
            saveDialog.Filter = "Excel (.xlsx)|*.xlsx";
            if (saveDialog.ShowDialog() == DialogResult.OK)
            {
                var printingSystem = new PrintingSystemBase();
                var compositeLink = new CompositeLinkBase();
                compositeLink.PrintingSystemBase = printingSystem;

                var link1 = new PrintableComponentLinkBase();
                link1.Component = grid1;
                var link2 = new PrintableComponentLinkBase();
                link2.Component = grid2;

                compositeLink.Links.Add(link1);
                compositeLink.Links.Add(link2);

                var options = new XlsxExportOptions();
                options.ExportMode = XlsxExportMode.SingleFilePageByPage;

                compositeLink.CreatePageForEachLink();
                compositeLink.ExportToXlsx(saveDialog.FileName, options);
            }
        }
    }
} 
```

希望它可以节省一些时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T16:13:08.390

为此，您需要向每个gridControl 添加一个printableComponentLink，然后创建一个compositeLink，您可以将每个printableComponent 链接添加到该compositeLink。

这个链接可以证明 DevExpress[知识库文章](http://www.devexpress.com/Support/Center/p/A2730.aspx)可能很有用，因为它有一个例子。

然后，您将使用该`compositeLink.ExportToXlsx`方法。如果您使用等于属性创建`XlsxExportOptions`并将其`XlsxExportOptions.ExportMode`传递`SingleFilePageByPage`给该`CompositeLink.ExportToXlsx`方法，则每个页面都将导出到单独的工作表中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-19T18:38:22.450

在上面的代码中，`compositeLink.ExportToXlsx`对我来说失败了——没有这样的方法。当然我使用的是旧版本的 V10.2.5。我建议使用 DEVXPRESS 站点的此链接，该链接使用`ShowPreviewDialog`允许以多种不同格式导出的方法。该链接还显示了如何对输出进行一些自定义。 [https://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraPrintingLinksCompositeLinktopic](https://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraPrintingLinksCompositeLinktopic)

# jquery - jQuery search as you type with ajax

> ID：10318575
> 
> 赞同：27
> 
> 时间：2012-04-25T15:14:14.150
> 
> 标签：jquery

i'm trying to create a search where you input text into a textfield and onkeyup it will fire a function off that will send the value of the field to a page and return the results to the div container. The problem i'm having is that when someone is typing, there is a horrible lag going on. I think what's going on is that it's trying to search each letter typed in and does each request. How do i make it so that if i type into the box, wait 1/2 a second (500), if nothing is typed in, then do the ajax search,but if in that time frame another letter comes up, don't even bother with the ajax request. I've been busting my head on this and can't figure it out. All help is appreciated!

```
// fired off on keyup
function findMember(s) {
    if(s.length>=3)
        $('#searchResults').load('/search.asp?s='+s);
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-25T15:19:38.173

这将做的是清除每次按下的超时，所以如果 1/2 秒还没有过去，函数将不会被执行，然后再次设置一个 500 毫秒的计时器。就是这样，不需要加载一个大库..

```
let timeoutID = null;

function findMember(str) {
  console.log('search: ' + str)
}

$('#target').keyup(function(e) {
  clearTimeout(timeoutID);
  const value = e.target.value
  timeoutID = setTimeout(() => findMember(value), 500)
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="search" id="target" placeholder="Type something" />
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T15:18:11.867

jquery ui 自动完成具有此功能。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

如果你不想使用 jquery ui，那么看看他们的源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-26T13:26:05.703

```
function myFunction(inputText) {
                debugger;
                var inputText = document.myForm.textBox.value;

                var words = new Array();
                var suggestions = "Always", "azulejo", "to", "change", "an", "azo", "compound", "third"];
                if (inputText != "") {
                    for (var i = 0; i < suggestions.length; ++i) {
                        var j = -1;
                        var correct = 1;
                        while (correct == 1 && ++j < inputText.length) {
                            if (suggestions[i].toUpperCase().charAt(j) != inputText.toUpperCase().charAt(j)) correct = 0;
                        }
                        if (correct == 1) words[words.length] = suggestions[i];
                        document.getElementById("span1").innerHTML = words;

                    }
                }

                else {
                    document.getElementById("span1").innerHTML = "";

                }

<p id="demo"></p>
    <form name="myForm">
         <input type="text" name="textBox" onkeyup="myFunction()"/>
         <span id="span1"></span>
    </form> 
```

# clearcase - 如何从流中构建变更集 - RTC 源代码控制

> ID：10318579
> 
> 赞同：1
> 
> 时间：2012-04-25T15:14:18.017
> 
> 标签：clearcase, rtc

下图中的工作区流向一个流。

![在此处输入图像描述](../Images/d3d1f2da15262401d36ca9498784162e.png)

我添加了一个从这个工作区构建的构建定义。如果我将更改集从不同的工作区传递到图中的流，是否应该在执行构建时构建这些更改集？在构建变更集之前，是否需要先将其从流中接受到工作区中？

目前，当我执行构建时，更改集（已从不同的工作区传递到流）没有被传递到图中的工作区，因此没有被构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:47:32.780

> 如果我将更改集从不同的工作区传递到图表中的流，是否应该在执行构建时构建这些更改集？
> 在构建变更集之前，是否需要先将其从流中接受到工作区中？

这取决于您的构建定义是如何配置的：
正如[这个线程提到的](https://jazz.net/forums/viewtopic.php?t=17121&sid=6bdc58b55f5a722b6f8c9aa27c5e906c)：

> 如果您使用的构建定义选择了“ ”作为预构建参与者，您将在“ ”选项卡的`Jazz Source Control`底部看到“ ”。**应选中****“ ”复选框，以便您自动接受更改。**`Jazz Source Control``Accept Options section`
> **`Accept latest changes before loading`**

但是使用基于 BuildForge 的构建定义，如“ [Rational Team Concert 3.0 和 Build Forge：一个集成场景](https://jazz.net/library/article/640/)”中所述：

> [...] 一旦选择了服务器，作为第一步，Build Forge 项目将加载一个适配器 ( `JazzJBE.xml`) 以促进 Build Forge 和 RTC 之间的集成。
> 此适配器运行 Jazz Build Engine，它是 buildtoolkit 的一部分，以根据 RTC 构建定义传递的属性接受和获取源代码
> （更典型的 RTC 持续集成场景是让 Jazz Build Engine 在构建服务器的背景，监听请求。使用 JazzJBE 适配器，Jazz Build Engine 按需启动）。

# computer-vision - 用霍夫变换检测三次曲线

> ID：10318584
> 
> 赞同：2
> 
> 时间：2012-04-25T15:14:31.867
> 
> 标签：computer-vision, hough-transform

我有一张带有曲线的图片，可以通过以下等式定义：

```
y = ax^3 + bx^2 + cx + d 
```

很明显如何使用正常的霍夫变换来检测曲线。但是，我想通过使用梯度方向来减少参数空间（我已经从边缘检测中得到了它）。我不确定如何使用梯度方向来减少参数空间。

我的一个想法是找到导数 dy/dx = 3ax^2 + 2bx + c 。现在我只有三个参数，因此我的任务更容易。这是正确的吗？如果我使用它，我如何获得 d 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:43:01.493

在运行 Hough for dy/dx = 3x^2 + 2ax + b 你有

c = f(x,y) = y - x^3 + ax^2 + bx 其中 a 和 b 是已知的。

为什么不再传一遍，这次只找c？无论如何，二维累加器，然后 1 dim 优于 3 维累加器。

# odata - 使用 OData 预加载

> ID：10318609
> 
> 赞同：1
> 
> 时间：2012-04-25T15:16:06.847
> 
> 标签：odata, eager-loading, netflix

我目前正在使用 Netflix OData api 开发一个小型原型。我想总是热切地加载实体。换句话说，我不想专门“扩展”属性。相反，我只想在获取该实体时加载给定实体的所有属性。我不是在这里寻求设计或建筑方面的建议。我知道这样做的含义。有没有办法在上下文级别打开预先加载？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:44:32.490

正如上面 Mark 所指出的，WCF 数据服务的任何内置功能目前都无法做到这一点。您可以使用一些代码将 $expand 注入客户端的 URL 中，这样看起来您不必显式地执行此操作。

一些通用解决方案的问题是：

*   开启它会传输大量数据，即使应用程序可能不需要它。
*   这应该是多少级？只有一个，两个，或者很多。它不能是无限的，因为实体图中可能存在循环。

您还可以修改客户端类以在访问时延迟加载属性。有一个 API DataServiceContext.LoadProperty，所​​以只需在正确的位置调用它。

# xaml - Windows 8 底部应用栏

> ID：10318612
> 
> 赞同：11
> 
> 时间：2012-04-25T15:16:13.823
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml, application-bar

我一直在尝试`App bar`在`WinRT metro app`( `C#`/ `XAML`) 中实现，但不知道从哪里开始。我尝试使用该`<ApplicationBar/>`标签，但出现`Type not found`错误。

网上没有帮助，有人可以用答案更新这篇文章，以便它也可以作为其他程序员的参考吗？

只有一个`JavaScript`样本没有太大帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T15:41:42.177

这应该有效：

```
<AppBar
    VerticalAlignment="Bottom">
    <Button
        AutomationProperties.Name="Play"
        Style="{StaticResource PlayAppBarButtonStyle}"
        Command="{Binding PlayCommand}" />
</AppBar> 
```

– 你可以把它放在页面的布局根网格中。

*编辑

注意：根据文档 - 你应该把它放在[Page.BottomAppBar](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.appbar.aspx)属性中，尽管至少在 Windows 8 Consumer Preview 中 - 它在任何 Grid 中使用时都可以正常工作，如果你的 UI 没有与 Page 控件紧密耦合，这很方便。

*编辑 2，[来自 MSFT 的回复](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1044f2fb-bc55-4391-ac82-02c5d5e75970/)：

推荐的方法是使用 Page.BottomAppBar/TopAppBar 属性。

*   如果在未使用这些属性的情况下添加 AppBars，Consumer Preview 中存在已知的命中测试问题
*   如果在未使用这些属性的情况下添加 AppBar，则它们不会使用正确的动画
*   如果 AppBars 作为任意元素的子元素添加，则多个控件更容易尝试创建/修改 AppBars，从而导致不一致的用户体验

*编辑 3

[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)中的 CustomAppBar可以在任何地方使用，基于垂直/水平对齐的动画，可以在其上覆盖其他内容，并且还具有允许阻止其打开的 CanOpen 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T18:05:15.873

```
<Page.TopAppBar>
    <AppBar>
        <TextBlock x:Name="TextBlock1" Text="Sample Text" Margin="0,0,0,0" Height="Auto" VerticalAlignment="Center" HorizontalAlignment="Left"/>
    </AppBar>
</Page.TopAppBar> 
```

# sql - SQL 时间戳到毫秒

> ID：10318615
> 
> 赞同：0
> 
> 时间：2012-04-25T15:16:37.530
> 
> 标签：sql, vb.net, highcharts, highstock

如何使用日期时间戳将 SQL 时间转换为毫秒。我正在使用 VB.Net 做一个 highstock 图表

这是我到目前为止的选择代码

```
 Dim mydatalist As New List(Of XyData)
    Dim sqlReader As SqlDataReader
    Dim strConn As New     SqlConnection(ConfigurationManager.ConnectionStrings("myCipConnection").ConnectionString)
    Dim strSql As String = "SELECT TOP 1000 DATEDIFF(second,{d '1970-01-  01'},dtmStamp)AS dtmStamp  ,dblReturnTemp  FROM tblCIPEventData  "
    Dim sqlCmd As New SqlCommand(strSql, strConn)
    strConn.Open()
    sqlReader = sqlCmd.ExecuteReader 
```

***我有一个 SQL 选择***

```
Dim strSql As String = "SELECT TOP 1 dtmStamp ,dblReturnTemp   FROM tblCIPEventData" 
```

结果看起来像

```
2009-10-22 11:29:31.513 
```

***如何将其转换为毫秒***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:19:05.710

[http://support.microsoft.com/kb/186265](http://support.microsoft.com/kb/186265)

> 您可以使用 SQL Server DATEPART() 函数来获取返回到 Visual Basic 应用程序的 SQL Server 日期时间字段的毫秒数。

例子：

```
SELECT Pubdate, DATEPART(Ms, Pubdate) FROM Titles 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:35:41.647

对于我们使用 DATETIME 形式的时间戳进行的工作，我们执行了以下操作，因为我们不关心一天中的时间：

```
CONVERT(BIGINT, DATEDIFF(s, '19700101', left(a.mdate, 11)))*1000 
```

给出的`left(a.mdate, 11)`数据如 = Apr 25 2012（可读格式）

a.mdate = 2012-04-25 11:01:18.030

这是在所需的 javascript 时间内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T17:07:24.170

要确定日期的毫秒数，您首先必须将其与其他日期时间进行比较。通过减去两个 DateTime 对象，您将得到一个 TimeSpan 对象。然后可以将该 TimeSpan 对象转换为毫秒。这一切都可以通过一行简单的代码来完成：

```
Dim milliseconds As Double
milliseconds = (end - start).TotalMilliseconds 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T15:56:40.527

如果你想做 SQL，你可以[使用 Robert Harvey 的回答](https://stackoverflow.com/a/10318652/119477)

如果你想在 VB.NET 中使用它并且你有以下

```
Dim strSql As String = "SELECT TOP 1 dtmStamp ,dblReturnTemp   FROM tblCIPEventData" 
```

结果将是[System.DateTime](http://msdn.microsoft.com/en-us/library/03ybds8y.aspx)

回答这个问题*如何将其转换为毫秒？*我们可以利用[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

```
Dim dtmStamp as DateTime
dtmStamp = sqlReader.GetDateTime(0)

Dim ts As New TimeSpan(dtmStamp.Ticks)
Dim milliseconds as Long  
milliseconds = TotalMilliseconds 
```

这将为您提供自 1/1/0001 12:00 AM 以来的毫秒数

如果您希望时代为 01/01/1970，您只需执行

```
Dim epoch as DateTime  = new DateTime(1970,1,1)
Dim ts As New TimeSpan((dtmStamp - epoch).Ticks) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-23T23:34:55.753

这为我完成了工作：

```
me.labelDisplay.Text = CDate(query.dateColumn).ToString("yyyy-MM-dd HH:mm:ss.fff") 
```

输出：

```
2017-03-23 16:35:08.237 
```

如果您想获得毫秒部分，请使用：

```
Dim ms as Integer = CDate(query.dateColumn).Milliseconds() 
```

# matlab - 绘制自然对数并获取图像的伽玛

> ID：10318626
> 
> 赞同：0
> 
> 时间：2012-04-25T15:17:10.557
> 
> 标签：matlab

链接[b.jpg](http://i.stack.imgur.com/TWzIH.jpg)

```
i=imread('b.jpg');
i1=rgb2gray(i);
i2=im2double(i);
j=log(1+i2); 
```

1.

现在这是为了获取图像的直方图。

```
 imhist(j); 
```

说错误：

```
??? Error using ==> iptcheckinput
Function IMHIST expected its first input, I or X, to be two-dimensional.

Error in ==> imhist>parse_inputs at 270
iptcheckinput(a, {'double','uint8','logical','uint16','int16','single'}, ...

Error in ==> imhist at 57
[a, n, isScaled, top, map] = parse_inputs(varargin{:}); 
```

==================================================== ============================

2.如何绘制功能图？

```
 plot(j,i2);

??? Error using ==> plot
Data may not have more than 2 dimensions 
```

==================================================== ============================= 3.如何获得伽玛`j`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:30:33.007

我想，你一开始就犯了一个错误

```
i=imread('b.jpg');
i1=rgb2gray(i);
i2=im2double(i); % POSSIBLE MISTAKE
i2=im2double(i1);
j=log(1+i2); 
```

更正后，（1）`imhist(j)`和（2）`plot(j,i2);`都可以正常工作。对于伽玛校正，您可以参考以下任一：[Link-A](http://www.mathworks.in/help/toolbox/images/ref/imadjust.html)、[Link-B](http://www.graphics.cornell.edu/~westin/gamma/gamma.html)。

# php - 捕获生产环境中的所有应用程序异常和 PHP 错误

> ID：10318628
> 
> 赞同：1
> 
> 时间：2012-04-25T15:17:15.753
> 
> 标签：php, model-view-controller, error-handling

如何在生产环境中捕获所有应用程序异常和 PHP 错误？

我正在使用自定义 MVC 框架，并且我有一个 MVC 框架启动的入口点。所以我已经用一个通用的方法包装了这个入口点：

```
 try{
    //start point of mvc framework that load main class 
    //that manage request, response, route etc
 }catch(Exception $e) {
    //return response 404 to client if something goes wrong
 } 
```

这够了吗？PHP错误怎么办？

这是一个生产环境，所以我不让用户看到错误，但我想记录所有的调试。是否有一个开源 PHP 类可以以一种优雅的方式记录错误，我可以从中获得灵感？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:00:21.740

不，异常处理程序是不够的。您还应该将 php 通知/错误/警告转换为异常，以便您也可以捕获它们，我在这里有一个示例：http: [//codehackit.blogspot.com/2012/01/php-errorswarningsnotices-to-exceptions.html](http://codehackit.blogspot.com/2012/01/php-errorswarningsnotices-to-exceptions.html)不幸的是，大多数内置函数的 PHP 仍然不会抛出异常，但是这几行可以解决这个问题；）

# java - 打印给定序列的字符组合

> ID：10318633
> 
> 赞同：0
> 
> 时间：2012-04-25T15:17:50.603
> 
> 标签：java, recursion, stack-overflow

我正在研究递归代码以打印输入序列的所有可能的输出字符串。为简化起见，我将缩短问题。我有一个`String[]`数组。我想打印所有可能的单词组合，从一次`[0]`只`[N]`考虑一个字符`String`。**示例**：`String[] a = {"abc", "def", "ghi"}`我应该打印`adg, adh, adi, aeg.. etc` 这是我的递归代码：

```
void printLetters(String[] list, int count, String result)
    {
        if(list == null)
            return;
        if(count > list.length-1)
        {
            System.out.println(result);
            return;
        }
        for(int i = 0; i<list[count].length(); i++)
        {
            printLetters(list, count++, result + list[count].charAt(i) + "");
        }
    } 
```

当我得到一个`StackOverflowError`. 有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:20:52.493

问题是您在这里进行后增量：

```
printLetters(list, count++, result + list[count].charAt(i) + ""); 
```

所以递归调用首先发生，然后是增量，这实际上意味着你继续调用具有相同值的方法`count`。改用这个：

```
printLetters(list, count + 1, result + list[count].charAt(i) + ""); 
```

你确定要增加`count`吗？因为当递归调用返回时，您还将拥有`count + 1`“父方法”，我认为这不是您需要的。

# c# - 通过在 C# 中单击获取进程窗口句柄

> ID：10318640
> 
> 赞同：4
> 
> 时间：2012-04-25T15:18:13.030
> 
> 标签：c#, winapi, process, click, hook

目前，我可以使用`System.Diagnostics.Process.GetProcesses()`和执行一个简单的 LINQ 查询来获得一个带有主窗口的正在运行的进程列表。

然后，我可以导入函数`user32.dll`并`SetWindowPos`操作其他进程的窗口参数。

好的，它有效。现在我想通过单击来选择一个进程的窗口，比如说 calc.exe。换句话说，我想获得一个带有钩子的 Process 对象（然后是 MainWindowHandle），当我单击它的窗口时，该钩子会捕获进程名称。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:23:43.347

我不知道这是如何在 C# 中完成的，但你也标记了这个问题 WinAPI，所以我可以在那里提供帮助。在 WinAPI 中，可以这样做：

```
#include <stdio.h>
#include <Windows.h>
#include <Psapi.h>
#pragma comment(lib, "Psapi.lib")

int main(void)
{
  /* Hacky loop for proof of concept */
  while(TRUE) {
    Sleep(100);

    if(GetAsyncKeyState(VK_F12)) {
      break;
    }

    if(GetAsyncKeyState(VK_LBUTTON)) {
      HWND  hwndPt;
      POINT pt;

      if(!GetCursorPos(&pt)) {
        wprintf(L"GetCursorPos failed with %d\n", GetLastError());
        break;
      }

      if((hwndPt = WindowFromPoint(pt)) != NULL) {
        DWORD  dwPID;
        HANDLE hProcess;

        GetWindowThreadProcessId(hwndPt, &dwPID);

        hProcess = OpenProcess(PROCESS_QUERY_LIMITED_INFORMATION, FALSE, dwPID);

        if(hProcess == NULL) {
          wprintf(L"OpenProcess failed with error: %d\n", GetLastError());
        } else {
          wchar_t lpFileName[MAX_PATH];
          DWORD   dwSize = _countof(lpFileName);

          QueryFullProcessImageName(hProcess, 0, lpFileName, &dwSize);
          wprintf(L"%s\n", lpFileName);

          CloseHandle(hProcess);
        }
      }
    }
  }

  return EXIT_SUCCESS;
} 
```

示例结果：

![结果](../Images/81d30cd80aae0e0beb29a9d2bbc2450b.png)

在这种情况下，我只是轮询鼠标点击。更合适的方法是使用某种 windows 钩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:07:15.857

正如 Mike Kwan 所说，虽然这两种方法都有各自的缺点，但你最好写一个钩子，但 bjarneds 已经在这方面做了很好的工作。看看[@DotNET 对象间谍](http://www.codeproject.com/Articles/16481/NET-Object-Spy-and-InvokeRemote)。它是用 C# 编写的，可以满足您的需求等等。

您还应该注意，使用钩子正变得越来越多余。根据您想要做什么，其他类似的 winapis`GetForegroundWindow`可能会更好。

# android - 突出显示可展开列表中的选定项目

> ID：10318642
> 
> 赞同：16
> 
> 时间：2012-04-25T15:18:19.213
> 
> 标签：android, android-layout, android-widget

我有一个布局，其中左侧的片段中有一个可扩展列表，右侧有一个详细信息片段。这一切都很好。

现在我想指出左侧的哪个项目的详细信息显示在右侧，这里我遇到了问题。

在普通的列表视图中，我通过将列表视图的选择模式设置为单一然后使用基于“激活”状态的可绘制状态来实现这一点。当我单击该项目时，背景设置为我选择的颜色并保持这种状态，直到我选择列表中的另一个项目。

我试图将它应用到我的可扩展列表视图中，但它是/是一个令人沮丧的失败。没有错误，但所选项目未保持其颜色状态。我不确定我是否没有为它正确设置选择模式（我已经在布局文件中以及以编程方式尝试过它，它似乎没有任何区别），或者将它指向错误的东西（不知道怎么可能，但是......）

任何帮助/指针表示赞赏（即使它的方向完全不同）。

最新故障：

**可扩展的列表视图代码**

```
private void fillData(String group, String child) {
    ExpandableListView lv;
    mGroupsCursor = mDbHelper.fetchGroup(group);
    getActivity().startManagingCursor(mGroupsCursor);
    mGroupsCursor.moveToFirst();
    lv = (ExpandableListView) getActivity().findViewById(R.id.explist);
    lv.setChoiceMode(ExpandableListView.CHOICE_MODE_SINGLE);        

    mAdapter = new MyExpandableListAdapter(mGroupsCursor, getActivity(),
            R.layout.explistlayout,
            R.layout.explistlayout,
            new String[] { "_id" },
            new int[] { android.R.id.text1 },
            new String[] { child },
            new int[] { android.R.id.text1 });
    lv.setAdapter(mAdapter);
    registerForContextMenu(lv);

    lv.setOnChildClickListener(new ExpandableListView.OnChildClickListener() { 
        @Override 
        public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id)  
        { 
            mRowId  = id;
            EventDisplayFragment eventdisplay = new EventDisplayFragment();
            getFragmentManager().beginTransaction().replace(R.id.rightpane, eventdisplay).commit();
            return true; 
        } 
        }); 
}

public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {

    public MyExpandableListAdapter(Cursor cursor, Context context,
            int groupLayout, int childLayout, String[] groupFrom,
            int[] groupTo, String[] childrenFrom, int[] childrenTo) {
        super(context, cursor, groupLayout, groupFrom, groupTo,
                childLayout, childrenFrom, childrenTo);
    }
    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        Cursor childCursor = mDbHelper.fetchChildren(mGroup, groupCursor
                .getString(groupCursor
                        .getColumnIndex(AttendanceDB.EVENT_ROWID)));
        getActivity().startManagingCursor(childCursor);
        childCursor.moveToFirst();
        return childCursor;
    }
} 
```

**item_selector.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
     android:state_pressed="true" 
     android:drawable="@color/green" />
    <item 
     android:state_selected="true" 
     android:drawable="@color/blue" />
    <item 
     android:state_focused="true" 
     android:drawable="@color/violet" />
    <item 
     android:state_activated="true" 
     android:drawable="@color/blue" />
</selector> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-23T13:33:12.727

在 ExpandableListView 上执行以下操作：

**步骤 1.**将选择模式设置为单一（可以在 xml 中作为**android:choiceMode = "singleChoice" 完成**）

**步骤 2.**使用选择器 xml 作为背景 ( **android:listSelector = "@drawable/selector_list_item"** )

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
   android:exitFadeDuration="@android:integer/config_mediumAnimTime">

   <item android:drawable="@android:color/holo_blue_bright" android:state_pressed="true"/>
   <item android:drawable="@android:color/holo_blue_light" android:state_selected="true"/>
   <item android:drawable="@android:color/holo_blue_dark" android:state_activated="true"/>

</selector> 
```

**步骤 3.**在 onChildClick() 回调中调用 expandableListView.setItemChecked( index **,true) 。**

**index**是子项的基于 0 的索引，计算如下

**组 1** [索引 = 0]

*   儿童项目 1
*   子项目 2
*   子项 3 [索引 = 3]

**第 2 组** [索引 = 4]

*   儿童项目 1
*   子项目 2
*   子项 3 [索引 = 7]

**第 3 组**[索引 = 8]

*   儿童项目 1
*   子项目 2
*   子项 3 [索引 = 11]

如果我们也有列表标题，它们也会考虑索引值。

这是一个工作示例：

```
@Override
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
    ...

    int index = parent.getFlatListPosition(ExpandableListView.getPackedPositionForChild(groupPosition, childPosition));
    parent.setItemChecked(index, true);

    return true;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-23T13:40:36.370

花费 3-4 小时后，它变得如此简单，无需创建额外的 XML 文件，只需检查组项是否已扩展，如果是，则选择颜色，并在 else 语句中使它们保持原样....

```
@Override
//in this method you must set the text to see the parent/group on the list
public View getGroupView(final int i, boolean b, View view, ViewGroup viewGroup) {

    if (view == null) {
        view = inflater.inflate(R.layout.list_item_parent, viewGroup,false);
    }

    if(b){
        view.setBackgroundResource(R.color.waterblue);
    }else{
        view.setBackgroundColor(color.transparent);
    }

    //return the entire view
    return view;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-22T15:09:03.653

我终于想出了如何使这项工作（对我来说）。这似乎有点骇人听闻，但这是我唯一设法为此工作的事情。

基本上，我创建了一个二维数组来保存子节点的选定状态，在适配器构造函数中对其进行初始化，然后在我的`getChildView`方法（以防当前选定的子节点滚动出视图）和我的`onChildClick`方法（以更改当前选择并关闭旧的）。

```
private selectedStatus[][];  // array to hold selected state
private View oldView;        // view to hold so we can set background back to normal after selection of another view 
```

**构造** *函数初始化数组*

```
 public MyExpandableListAdapter(Cursor cursor, Context context,
            int groupLayout, int childLayout, String[] groupFrom,
            int[] groupTo, String[] childrenFrom, int[] childrenTo) {
        super(context, cursor, groupLayout, groupFrom, groupTo,
                childLayout, childrenFrom, childrenTo);
        selectedStatus = new boolean[cursor.getCount()][];
        for (int i = 0; i < cursor.getCount(); i++) {
            cursor.moveToPosition(i);
            Cursor childCheckCursor = mDbHelper.fetchChildren(mGroup,
                    cursor.getString(cursor
                            .getColumnIndex(AttendanceDB.EVENT_ROWID)));
            getActivity().startManagingCursor(childCheckCursor);
            selectedStatus[i] = new boolean[childCheckCursor.getCount()];
            for (int j = 0; j < childCheckCursor.getCount(); j++) {
                selectedStatus[i][j] = false;
            }
        }

    } 
```

***当孩子滚动出视图时需要***getChildView****

 ***```
 @Override 
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) { 
        final View v = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent); 
        if(selectedStatus[groupPosition][childPosition] == true){
            v.setBackgroundResource(R.color.blue);                          
        } else {
            v.setBackgroundResource(R.color.black);
        }
        return v; 
    } 
```

**onChildClick** *更改所选项目*

```
 lv.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
        @Override
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            mRowId = id;
            EventDisplayFragment eventdisplay = new EventDisplayFragment();
            getFragmentManager().beginTransaction()
                    .replace(R.id.rightpane, eventdisplay).commit();
            if(oldView != null){
                oldView.setBackgroundResource(R.color.black);   // change the background of the old selected item back to default black                 }
            oldView = v;                                        // set oldView to current view so we have a reference to change back on  next selection
            for (int i = 0; i < selectedStatus.length; i++) {
                for (int j = 0; j < checkedStatus[i].length; j++) {
                    if(i == groupPosition && j == childPosition){  // set the current view to true and all others to false
                        selectedStatus[i][j] = true;
                    } else {
                        selectedStatus[i][j] = false;
                    }
                }
            }
            v.setBackgroundResource(R.color.blue);
            return true;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T10:01:55.520

我遇到了同样的问题，我通过添加解决了这个问题

```
v.setSelected(true); 
```

这是我的代码示例：

```
expandableListDetailsLevel.setChoiceMode(ExpandableListView.CHOICE_MODE_SINGLE);
        expandableListDetailsLevel
                .setOnGroupExpandListener(new OnGroupExpandListener() {

                    public void onGroupExpand(int groupPosition) {

                        if(groupPosition!=1){
                            expandableIsThere = false;
                        }

                        for (int i = 0; i < len; i++) {
                            if (i != groupPosition) {
                                expandableListDetailsLevel.collapseGroup(i);
                            }
                        }
                    }
                });

        expandableListDetailsLevel
                .setOnChildClickListener(new OnChildClickListener() {

                    @Override
                    public boolean onChildClick(ExpandableListView parent,
                            View v, int groupPosition, int childPosition,
                            long id) {

                        v.setSelected(true);

                        } 
```

我的项目 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:background="@drawable/selector" >

<TextView
    android:id="@+id/TVChild"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:textColor="#000"
    android:textSize="12dp"/>

</LinearLayout> 
```

`android:drawSelectorOnTop="true"`xml 文件中 ExpandableListView 元素中的属性（不是子项或组），如下所示：

```
<ExpandableListView
                android:id="@+id/expandableViewDetailsBriefing"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:background="#fff"
                android:drawSelectorOnTop="true"
                android:dividerHeight="1px"
                android:childDivider="@color/Gris"
                android:indicatorRight="690dp"
                android:textFilterEnabled="true" >
            </ExpandableListView> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-16T05:57:42.677

下一个解决方案可帮助您为组和孩子制作不同的列表选择器。

首先，您需要禁用 ExpendableListView 的列表选择器：

```
 ...
   <ExpandableListView
            ...
            android:listSelector="@android:color/transparent"
            ...
            />
... 

```

之后，您需要复制一个空的 listSelector。你可以这样做

```
 ...
private Drawable empty;
...

// binding view here. Name of ExpandableListView will be elv
empty = elv.getSelector(); 

```

现在，我们需要知道何时启用或禁用列表选择器。为此，您应该向适配器添加以下更改：

```
 my adapter here {
...
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View view, ViewGroup parent)
    {
       ...
       // after, we've got view of goup
       view.setOnTouchListener(new View.OnTouchListener()
       {
           @Override
           public boolean onTouch(View v, MotionEvent event)
           {
               elv.setSelector(empty);
               return false;
           }
       });
       ...
    }
...
    @Override
    public View getChildView(final int groupPosition, final int childPosition, boolean isLastChild, View convertView, final ViewGroup parent)
    {
       ...
       // after, we've got view of child
       view.setOnTouchListener(new View.OnTouchListener()
       {
           @Override
           public boolean onTouch(View v, MotionEvent event)
           {
               elv.setSelector(R.drawable.my_custom_list_selector);
               return false;
           }
       });
       ...
    }
...
} 

```

就这样。我希望这个解决方案能帮您节省时间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-01T23:55:05.273

您可以保存当前视图并在单击侦听器中更改视图的背景颜色：

```
View currentView;
ExpandableListView elv;

elv.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {
    @Override
    public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {
        if(currentView != null) {
            currentView.setBackgroundColor(Color.parseColor("#FFFFFF"));
        }
        v.setBackgroundColor(Color.parseColor("#EEEEEE"));
        currentDrawerView = view;

        //do something

        return false;
    }
});
elv.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
    @Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        if(currentView != null) {
            currentView.setBackgroundColor(Color.parseColor("#FFFFFF"));
        }
        v.setBackgroundColor(Color.parseColor("#EEEEEE"));
        currentDrawerView = view;

        //do something

        return false;
    }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-02T18:20:03.387

如果您只需要更改子项颜色而不是在`onchildclick`方法中将背景颜色设置为 View v。

```
@Override
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                // TODO Auto-generated method stub
                v.setBackgroundColor(Color.RED);
} 
```

这样做`isChildSelectable`在适配器中设置为 true。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-28T05:48:52.103

当我遇到与作者相同的问题时，这个简单的解决方案对我有所帮助

> 我有一个布局，其中左侧的片段中有一个可扩展列表，右侧有一个详细信息片段。这一切都很好。现在我想指出左侧的哪个项目的详细信息显示在右侧，这里我遇到了问题。

要指示选择了可扩展列表中的哪个项目，请转到 ExpandableListView 属性（在布局中）并为 listSelector 选择颜色。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-30T12:31:21.703

```
expListView.setOnChildClickListener(new OnChildClickListener() {

            @Override
            public boolean onChildClick( ExpandableListView parent, View v,
                                         int groupPosition, int childPosition,
                                         long id) {

                for (int i = 1; i < expListView.getChildCount(); i++) {
                    View child = (View) expListView.getChildAt(i);
                    child.setBackgroundColor(Color.BLACK);
                }

                if(childPosition==0){
                    initWebView("URL");

                }
                if(childPosition==1) {
                    initWebView("URL");

                }
                if(childPosition==2) {

                    initWebView("URL");

                }
                if(childPosition==3) {
                    initWebView("URL");

                }
                if(childPosition==4) {
                    initWebView("URL");

                }
                if(childPosition==5) {
                    initWebView("URL");
                }

                v.setBackgroundColor(Color.GRAY);

                expListView.setVisibility(View.GONE);
                webView.setVisibility(View.VISIBLE);
                return false;
            }
        });
 } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-30T12:59:24.633

```
expListView.setOnChildClickListener(new OnChildClickListener() {

        @Override
        public boolean onChildClick( ExpandableListView parent, View v,
                                     int groupPosition, int childPosition,
                                     long id) {

            for (int i = 1; i < expListView.getChildCount(); i++) {
                View child = (View) expListView.getChildAt(i);
                child.setBackgroundColor(Color.BLACK);
            }

            if(childPosition==0){
                initWebView("URL");

            }
            if(childPosition==1) {
                initWebView("URL");

            }
            if(childPosition==2) {

                initWebView("URL");

            }
            if(childPosition==3) {
                initWebView("URL");

            }
            if(childPosition==4) {
                initWebView("URL");

            }
            if(childPosition==5) {
                initWebView("URL");
            }

            v.setBackgroundColor(Color.GRAY);

            expListView.setVisibility(View.GONE);
            webView.setVisibility(View.VISIBLE);
            return false;
        }
    });
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-12-18T06:37:48.243

只需使用以下

```
 <ExpandableListView
        android:id="@+id/expandable_list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:childDivider="#474043"
         android:groupIndicator="@null"
         android:listSelector = "@drawable/item_selector"
        android:background="#555"
        android:drawSelectorOnTop="true"
        android:textFilterEnabled="true"
        /> 
```

和你的 item_selector.xml 如下

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/selection_color_for_ex_list" android:state_pressed="true"/>
    <item android:drawable="@color/selection_color_for_ex_list" android:state_selected="true"/>
    <item android:drawable="@color/selection_color_for_ex_list" android:state_focused="true"/>

</selector> 
```***

# java - 泄漏此构造函数

> ID：10318644
> 
> 赞同：1
> 
> 时间：2012-04-25T15:18:24.800
> 
> 标签：java, swing

> **可能重复：**
> [“this”引用在构造过程中转义？](https://stackoverflow.com/questions/8445966/this-reference-escaping-during-construction)

我想知道是否在此实例上应用了在构造函数中泄漏 this 的问题，因为我相信构造函数必须调用 setJMenuBar() 方法才能完成其构造，这里是类实现：

```
public class StaffManagerMainWindow extends JFrame implements ActionListener {

    public StaffManagerMainWindow(String title, Image icon) throws HeadlessException {
        ...
        setJMenuBar();
    }

    private void setJMenuBar() {
        ...
        exitItem.addActionListener(this);
        ...
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:23:24.147

我认为构造函数中存在泄漏。您在对象的完全初始化之前传递“this”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:38:35.623

`this`如果您的程序是多线程的，那么构造函数中的泄漏可能是一个问题。您将其提供给 exitItem，它可能会在您的构造函数完成之前从另一个线程调用 actionPerformed()。这**不行**。它可能会非常严重地破坏您的程序，特别是如果您将子类添加到图片中。

改为创建一个 init() 方法和一个工厂方法：

```
public class StaffManager {
    public static StaffManager create() {
        StaffManager staffManager = new StaffManager();
        staffManager.init();
        return staffManager;
    }

    private StaffManager() {
    }

    private void init() {
        // Add listeners here.
    }
} 
```

编辑：因为 Swing 对象总是在事件调度线程上创建的，所以`this`在这种情况下泄漏不会有任何影响。不过，我宁愿不这样做。

# c - 有没有办法让 gcc 或 clang 对显式强制转换发出警告？

> ID：10318646
> 
> 赞同：8
> 
> 时间：2012-04-25T15:18:36.490
> 
> 标签：c, gcc, compiler-construction, clang

我要做的是在我拥有的一些源文件中找到从 double 类型或 float 类型到任何其他类型的所有显式转换。是否有内置的 gcc 方法可以做到这一点？语言是 C。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T22:52:00.093

如果您的 C 代码也可以在 C++ 模式下编译，则可以使用 g++ 的`-Wold-style-cast`警告标志来触发所有此类强制转换的警告。

您可以通过使用其开关确定 Clang 是否有任何将针对特定编码模式触发的警告`-Weverything`（但请注意，这对于几乎任何其他目的都没有用 - clang 具有默认禁用警告，这些警告会触发各种形式的合法代码）。但是，在这种情况下，clang 没有任何在此类强制转换时触发的警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:28:17.937

`-Wconversion`警告可能改变值的隐式转换（`double`是大类型），并`-Wno-sign-conversion`禁用有关有符号和无符号整数之间转换的警告（因此会减少不必要的警告）。否则我没有看到任何标准的替代方案......

在最坏的情况下，您可以直接在源文件中查找这些关键字...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T16:01:46.453

由于强制转换是明确合法的，并且是执行奇怪转换的正确方法，gcc 极不可能包含警告它们的选项

相反，根据您的来源有多大，您可能能够逃脱：

```
grep '\(double|float\) ' * 
```

给你所有的 double 或 float 变量。由于 c 不是常规语言，因此将其解析为双精度或浮点变量列表并非易事（使用 shell 工具），但如果您的源代码足够小，则手动执行此操作很容易。

```
grep '([^()]*)[ ()]*\(your list of variable names\)' * 
```

从那里将向您展示您的许多演员表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-02T07:45:24.857

虽然我知道的编译器没有这个选项，但 Gimpel 的 FlexeLint 可以做你想做的事：

```
$ cat tst.c
int main (void)
{
    int i = 0, j = 0;
    float f = 0.0;
    double d = 0.0;

    i = (int) f;
    j = (int) d;
    d = (double) f;
    f = (float) d;
    i = (int)j;
    j = (unsigned) i;
    return (int) j;
}

$ flexelint -w1 +e922 tst.c
FlexeLint for C/C++ (Unix) Vers. 9.00j, Copyright Gimpel Software 1985-2012

--- Module:   tst.c (C)
               _
    i = (int) f;
tst.c  7  Note 922: cast from float to int
               _
    j = (int) d;
tst.c  8  Note 922: cast from double to int
                  _
    d = (double) f;
tst.c  9  Note 922: cast from float to double
                 _
    f = (float) d;
tst.c  10  Note 922: cast from double to float

shell returned 4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T15:43:28.990

好吧，我认为没有这样的选择。毕竟，编译器会发出警告，以警告您可能无意中所做的事情。然而，显式转换基本上是一种告诉编译器“闭嘴，我知道我在做什么”的方法。

# asp.net-mvc - 定位外部脚本

> ID：10318648
> 
> 赞同：1
> 
> 时间：2012-04-25T15:18:53.660
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我认为将脚本的加载放在页面底部是一种很好的做法。因此，我的脚本 (jquery01.5.1.min.js) 位于布局文件的底部。

然而，当我开始使用 Ajax 时，例如在 WebGrid 中，它插入了一个：

```
<script type="text/javascript">if (typeof(jQuery)=='undefined') alert("A jQuery script reference is required in order to enable Ajax support in the \"WebGrid\" helper.");</script> 
```

<TABLE> 标签的某处。这破坏了节目。

有什么办法可以克服这个问题，并且仍然在页面末尾加载脚本？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:22:49.077

您始终可以添加一个快速头文件来获取`jQuery`变量并确保它已初始化。jQuery 应该能够在该代码被命中后返回并加载自身。又名

```
<script type="text/javascript" language="javascript">
    var jQuery = {};
</script> 
```

# installshield - 如何在安装应用程序期间显示帮助文件？

> ID：10318651
> 
> 赞同：0
> 
> 时间：2012-04-25T15:19:02.837
> 
> 标签：installshield

我们的应用程序有各种产品功能的帮助文件，还有一个单独的 pdf 文件，用于帮助安装应用程序本身。在用户实际安装应用程序之前，是否有推荐的方法向用户展示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:41:09.537

通常，这与软件一起分发并在“规划”阶段进行审查。单击 setup.exe 后阅读有点晚。

另一个想法是简化您的安装。

尽管如此，您仍然可以在安装中使用“显示自述文件”按钮从 SUPPORTDIR 或 DISK1 文件夹启动 PDF。但它无法从 INSTALLDIR 文件夹中显示，因为您的产品尚未安装。

# php - 使用 jQuery AJAX 从 MYSQL 检索数据的困难

> ID：10318658
> 
> 赞同：0
> 
> 时间：2012-04-25T15:19:24.923
> 
> 标签：php, mysql, jquery, pear

我正在尝试使用 jQuery ajax api 从 mysql 数据库中检索数据。我正在使用的 SQL 查询工作正常，因为我通过创建用户表单并按照传统`$_POST`方式对其内容进行了测试，以查看它是否从我的数据库中检索到正确的数据。

但是，我现在想从我的 mysql 表中检索数据，而不必使用 jQuery ajax 函数重新加载页面。我是 jQuery 的新手，我以前没有用过很多，如果有人能给我提供一个很好的例子来说明它是如何工作的，我将非常感激。我在网上查看了各种文章和指南，但我无法理解。

这是一个表格：

```
<form id="restaurant_reservation">
    <label for="date">Reservation Date?</label>
    <input type="text" name="date" id="date" value="yyyy-mm-dd" />

    <label for="capacity">Amount of Customers?</label>
    <input type="text" name="capacity" id="capacity" />

    <label for="license">Smoking or Non-Smoking Area?</label>

    <select id="license">
        <option value="0" id="no">Smoking</option>
        <option value="1" id="yes">Non-Smoking</option>
    </select>
</form> 
```

这是php代码：

```
<?php

$user_reservation_date = $_POST['user_date'];
$user_customer_amount = $_POST['customer_amount'];
$user_smoking_non_smoking = $_POST['user_smoking_selection'];

$my_query = "SELECT * FROM restaurant 
             WHERE $user_reservation_date = date_available
             AND $user_customer_amount >= max_seating
             AND $user_smoking_non_smoking = smoking_choice";

$result =& $db->query($my_query);

if (PEAR::isError($result)) {
    die($result->getMessage());
}

echo '<div id="output">';

echo'<table">';
echo '<th>restaurant name</th>';
echo '<th>Max Customer Seating</th>';
echo '<th>Smoking or Non Smoking</th>';
echo '<th>Average price per head</th>';

while($row =& $result->fetchRow()) {
    echo '<tr>';
    echo '<td>'.$row['rest_name'].'</td>'
    echo '<td>'.$row['max_seating'].'</td>'
    echo '<td>'.$row['smoking_choice'].'</td>'
    echo '<td>'.$row['avg_price_per_head'].'</td>'
    echo '</tr>';
}

echo '</table>';
?> 
```

这是我对 jquery 代码的尝试：

```
$(function(){
    $('#date').keyup(function(){
        var user_input= $('#date').val();
    });
});

$(function(){
            $('#date').keyup(function(){

            var user_input1=$('#date').val();

            $.ajax({
                type: 'POST',
                data: ({user_date : user_input1}),
                url: 'search.php',
                success: function(data) {
                     $('#output_div').html(data);
          }
        });
    });
}); 
```

我使用相同的代码，但更改表单中其他两个字段的#values。

我想使用 jQuery ajax 来获取这个表单的输入和选择的值，并将它们存储在我的 php 文档中的一个变量中，这样我就可以在我的 sql 查询中使用用户表单数据来检索适当的餐馆。

我真的很想学习如何做到这一点，我真的很感激任何帮助。非常感谢您的阅读。如果我在正确描述我的问题时含糊不清，我很抱歉。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:31:15.693

您想要的似乎是一个相对简单的 POST 请求，因此您可以使用[`jQuery.post()`](http://api.jquery.com/jQuery.post/)快捷方式功能（它本身只是 的包装器[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)）。您将 PHP 脚本的 URL、一些可选数据（请参阅下一段）和一个可选的回调函数传递给它，该函数在成功响应 AJAX 调用后执行。

要获取表单中选择的值，您可以使用 ID 选择器选择表单 ( `$('#restaurant_reservation')`)，然后调用该[`.serialize()`](http://api.jquery.com/serialize/)函数以从这些值中形成 URL 参数字符串。

整个事情可能看起来像这样：

```
$.post('myphp.php', $('#restaurant_reservation').serialize(), function(data) {
    // do something with the response HTML
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:30:10.050

```
$('#restaurant_reservation').submit(function(event){
    event.preventDefault(); // prevent the default action of form submit 

 // perform an ajax request and send all your data to your script in this case 
// you would replace "yourPhpScript" the actual script name      
$.ajax({
      url: 'yourPhpScript.php',
      type: 'POST', 
      data: $('#restaurant_reservation').serialize(); // serialize your form data into key value pairs 
      success: function(data) {
        console.log( data );  // this is the response from the server and will be logged in your console. 
      }
 }); 
```

然后`yourPhpScript.php`你会得到发布的数据

```
$date = $_POST['date']; 
$capacity = $_POST['capacity'];  // etc also your select needs a name attribute
// Then preform the mysql request and send back json encoded data or html 
so either echo "html here" 
or echo json_encode(array('data'=>'data here') ); 
```

然后您将看到记录到客户端控制台的数据。然后，您可以选择将该数据附加到例如 div 中。这应该足以让你开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:36:50.103

在 JQuery 站点 (http://api.jquery.com/jQuery.post/) 上有这样的示例，但在这里，让您继续。

这是应该从输入控件获取输入的内容，将其发送到您的脚本、jsp、asp、servlet 或其他任何东西，获得响应并将其显示回页面上

jQuery的东西

```
 $(document).ready(function(){
  $("#idOfInputControl").blur(function(){
    txt=$("#idOfInputControl").val();
    $.post("yourPHPorWhateverScript.php",{queryStrParamNameYourScriptLooksFor:txt},function(result){
      $("#idOfControlToHoldTheData").html(result);
    });
  });
}); 
```

HTML

```
...
<form ...>
  <input type="text" id="idOfInputControl" />
  <div id="idOfControlToHoldTheData"></div>
... 
```

在上面的这种情况下，您的脚本、servlet 或任何接收帖子的东西，应该从查询字符串中获取参数“queryStrParamNameYourScriptLooksFor”并用它做一些事情（我猜你想将它添加到 SQL 查询等）然后返回响应中的一些文本或 HTML。

我看到了其他一些答案（在写这篇文章时一直弹出），所以我想你会很好地使用这些东西。

祝你好运

# c# - 正则表达式 - 无法识别的转义序列

> ID：10318665
> 
> 赞同：0
> 
> 时间：2012-04-25T15:19:54.527
> 
> 标签：c#, regex, escaping

来自：[https ://stackoverflow.com/a/959982/101055](https://stackoverflow.com/a/959982/101055)

我正在尝试使用：

```
using System.Text.RegularExpressions;

Dictionary<string, string> parameters = new Dictionary<string, string>();
parameters.Add("goodName1", "asdf");
parameters.Add("goodName2", "qwerty");
string text = "this is my {goodName1} template {goodName2} string";
text = Regex.Replace(text, "\{(.+?)\}", m => parameters[m.Groups[1].Value]); 
```

`\{(.+?)\}`我在、 on`{`和`}`确切地得到 2 个构建错误。

> 错误 > 无法识别的转义序列

这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:21:05.283

尝试：

```
text = Regex.Replace(text, @"\{(.+?)\}", m => parameters[m.Groups[1].Value]); 
```

还有一些细节。

@ 符号定义了一个逐字字符串文字。这基本上是告诉编译器引号中的字符串没有被转义。 [http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)

或者，您可以简单地将反斜杠加倍。例如：

```
text = Regex.Replace(text, "\\{(.+?)\\}", m => parameters[m.Groups[1].Value]); 
```

但是，恕我直言，@ 符号更具可读性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T15:21:09.563

您需要对`\`字符进行双重转义，以便它们是字符串中的`\`文字，而不是用作字符串级转义序列。

```
"\\{(.+?)\\}" 
```

在字符串中， this 的值为`\{(.+?)\}`

或者，您可以使用`@""`文字：

```
@"\{(.+?)\}" 
```

具有相同的值。

* * *

当您需要在字符串中添加换行符时，您可以使用转义序列，`"\n"`. 字符串文字使用`\`转义字符来帮助对标准键盘上不存在或难以放置在字符串中的字符进行编码。正则表达式需要使用相同的`\`字符来转义模式中的特殊字符。这意味着`\`必须对字符进行转义才能用作字符串中的文字值，即`\\`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:21:53.463

您可以添加一个`@`来转义整个字符串，或者您可以放置​​一个双斜杠`\\`来转义每个出现。

[这是一篇关于字符串并将它们从 MSDN 中转义的好文章](http://msdn.microsoft.com/en-us/library/362314fe.aspx)

文章中的一个例子：

```
@"c:\Docs\Source\a.txt"  // rather than "c:\\Docs\\Source\\a.txt" 
```

# javascript - JavaScript .split 函数不适用于所有浏览器

> ID：10318672
> 
> 赞同：1
> 
> 时间：2012-04-25T15:20:21.120
> 
> 标签：javascript

此功能在部分 IE 浏览器中有效，但并非全部有效。IE 8 给我一个错误：

网页错误详情

> 用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；GTB7.3；.NET CLR 1.1.4322；.NET CLR 2.0.50727；.NET CLR 3.0.4506.2152；.NET4.0C； .NET4.0E；MS-RTC LM 8) 时间戳：2012 年 4 月 25 日星期三 15:18:21 UTC

```
Message: Object doesn't support this property or method
Line: 9
Char: 17
Code: 0
URI: file:///G:/1.html 
```

代码：

```
GetLink();

function GetLink() {
   selectedOption = "asdasdasd: asdasdas|asdadasd:asdadsasd|asdasdasd:asdasdad";
   ROOM = selectedOption.split("|")[0].trim().split(":")[1].trim();
   BUILDING = selectedOption.split("|")[1].trim().split(":")[1].trim();
   var ret = "room_chart.jsp?room=" + ROOM + "&building=" + BUILDING;
   return ret;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:24:41.680

`split`方法很好，就是这个`trim`问题。你可以使用[MDN 的这个小 polyfill](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim)：

```
if(!String.prototype.trim) {
  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g,'');
  };
} 
```

`String.prototype.trim`在 IE < 9 中不可用。上面的代码片段只是将`split`方法添加到`String.prototype`它不存在的情况下，并且其行为与您期望的本机实现完全一样。

如果您使用的是 jQuery，则[`$.trim`](http://api.jquery.com/jQuery.trim/)可以使用一种方法。

# javascript - 在不同的文件中运行函数

> ID：10318674
> 
> 赞同：2
> 
> 时间：2012-04-25T15:20:27.487
> 
> 标签：javascript

我有几个 JS 文件；第一个是供下一个使用的库，并且每个其他文件都有一个函数*main()*调用该文件的函数。

lib.js => 库

a.js :: main() => 在 a.js 中调用函数
b.js :: main() => 在 b.js 中调用函数
...
...

因此，我希望为这些文件运行*main*函数（在加载*lib.js*之后）。

加载JS文件后如何运行每个函数*main ？*
它将加载*a.js*并运行*main*，加载*b.js*并运行*main*，...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:34:30.197

**JavaScript 不是 C**或类似的东西。

在哪个文件中定义函数并不重要。该函数将被覆盖。

因此，如果您先加载文件`a.js`，然后加载文件，则`b.js`该`main`函数将是`main`您在其中定义`b.js`的`main`函数和您在其中定义的函数`a.js`将不存在于任何地方。

如果您想保留旧功能，我建议您在每个文件中创建一个对象并在其中定义主要功能。所以像这样。

`a.js`：

```
var a = {};
a.main = function() {
    /* do stuff */
}; 
```

`b.js`：

```
var b = {};
b.main = function() {
    /* do stuff */
}; 
```

所以现在你可以打电话：

```
a.main(); 
```

和

```
b.main(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:31:38.647

如果您需要控制依赖关系（加载顺序），请使用类似`head.js`or的东西`require.js`。

但是，不要通过`main`在所有 JS 文件中重用全局函数名来污染全局命名空间。网上有很多关于如何避免污染全局命名空间以及为什么这是一个好主意的文档。这是一个简单的网络搜索。

此处答案中的更多信息：[如何在 JavaScript 中声明命名空间？](https://stackoverflow.com/questions/881515/javascript-namespace-declaration)

# php - PHP 用户身份验证和安全方法：LDAP-AD 和 SQL Server

> ID：10318675
> 
> 赞同：1
> 
> 时间：2012-04-25T15:20:29.263
> 
> 标签：php, sql, security, authentication, ldap

我遇到了一些关于通过 LDAP Active Directory 服务器将用户身份验证集成到公司网站的问题。该网站主要在内部用于提供对文件/PDF 的安全访问。该网站可在我们的网络之外访问，因为某些客户还需要能够查看/上传文件以进行订单和验证。我们确实有一个 SSL 证书，用于安全访问该站点，用于内部和外部。

此时，该站点使用[PHPPass](http://www.openwall.com/phpass/)进行密码处理，同时将用户信息存储在 MS SQL Server 数据库中。需要访问该站点的用户被添加到该数据库中，并注册了帐户级别并使用 phpass 处理密码方面。这种方法非常安全，适用于当前使用情况（内部员工、外部客户的隔离数据）。然而，它也为整个系统引入了更多的故障点。IE：用户需要记住（或忘记）的额外密码以及管理员的额外帐户管理开销。

在计划简化站点的身份验证时，我的任务是集成用于登录的 Active Directory 用户信息。这对我们公司的员工来说可以正常工作，因为他们已经有一个 AD 帐户。但是，这**不适**用于外部供应商或客户，因为他们没有 AD 帐户（也不应该）进行身份验证。

这让我相信最简单的解决方案是拥有一种“主要”形式的身份验证（针对 AD）和对已经创建的 SQL 用户数据库的后备。在 AD 中返回的用户使用这些凭据，否则在 SQL 数据库中搜索用户（其中​​将包含我们需要的任何非 AD 帐户）。

**问题：**

*   上述验证方法是合乎逻辑且安全的计划吗？*如果没有，我应该怎么做？*
*   如何抵御 LDAP 攻击/暴力破解？
    *   在 PHP/SQL 中，利用参数化/类型转换查询、帐户锁定/超时、通用错误消息、正确的密码散列方法等 - 加起来以保护数据库和强制登录尝试
    *   对于 ldap_bind，用户名和密码通过网络以明文形式发送到 LDAP 服务器？
*   由于此登录是针对整个网络的，我如何确保我的登录/站点不是安全性最薄弱的环节，或者导致访问密码信息过于容易？

*注意：这是在 StackOverflow 上发布的，而不是在 ServerFault 上，因为我的问题是为了安全而对 PHP 网站进行编程。我的问题主要与用户登录时的网站访问、限制和权限问题有关，同时对 AD 或备份数据库进行身份验证。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:49:42.840

他们目前没有 LDAP 帐户并不是制作两层应用程序的理由。这不仅是易受攻击的两倍——因为通过实施您自己的身份验证后端，您还需要实施所有与之相关的用户管理员。只需为外部用户添加帐户，但不允许他们访问您的任何工作站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:16:51.557

如果您查看 Drupal，LDAP 身份验证模块的作用几乎相同：如果它找不到用户（即您的承包商）的 Drupal 帐户，它会转到 LDAP 并尝试在那里进行身份验证。对于 LDAP，它永远不会将密码存储在自己的数据库中。所以是的，你的计划之前已经完成，似乎或多或少被接受了。我曾经制作了一个使用 drupal 登录的 drupal 模块，然后如果 CAS 系统不在线，则使用带有 LDAP 回退的 CAS 系统。

保护 LDAP 服务器免受暴力破解通常是通过域级白名单来完成的。我在一所大学工作，该大学几乎所有事情都使用 LDAP 服务器，有些信息在公共领域，而有些信息是隐藏的，因此它们符合各种联邦法律。某些信息只能通过来自大学网络的请求访问，同时绑定到具有足够权限访问信息的帐户（即电子邮件、未列出的地址等）的服务器。只要您的密码正确并定期更改就可以了。您始终可以将 LDAP 用于仅对某些服务进行身份验证，并使您的网站或 LDAP 服务器（我不知道是否可以这样配置... 但谁知道呢？它可能）跟踪失败的登录尝试次数，并让该人在 5 次失败尝试后等待 5 分钟或其他时间。

在与服务器通信时，您应该使用 ldaps 来避免明文传输。除非您为 MAC 使用 Zend 服务器，否则它工作得很好（它所拥有的特定版本的 PHP 不喜欢 ldaps 并且会挂起服务器）并且会阻止人们嗅探您的流量并使您的网站成为最薄弱的链接。此外，切勿将人们的密码存储在您的网站上，并确保他们在登录页面上时使用的是 https。

# r - 约束满意度概率 (CSP) R

> ID：10318678
> 
> 赞同：1
> 
> 时间：2012-04-25T15:20:43.617
> 
> 标签：r, optimization, genetic-algorithm

我有多个等式和不等式的线性问题。它存在无限的解决方案。我想找到这个系统的多重随机解来改进遗传算法的初始种群。

有谁知道如何用 R 做到这一点？

谢谢你的时间，

查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:59:16.887

一些优化功能允许您指定起点：通过选择随机起点，您应该有不同的解决方案。

您还可以修改问题：在目标函数中，添加到某个随机点的距离。

```
library(Rsolnp)
get_one_point <- function(...) {
  r <- NULL
  while( is.null(r) || r$convergence != 0 ) {
    x <- rnorm(2)
    r <- solnp( 
      rnorm(2), 
      # Minimize the distance to some point
      function(u) sum((u-x)^2),
      # Constraints we want to satisfy
      ineqfun = function(u) c(sum(u^2), u[2] - u[1]^2),
      ineqLB = c(1,0),
      ineqUB = c(2,5)
    )
  }
  r$pars
}  

# Plot the points and the constraints
library(parallel) # Very slow: run the optimizations in parallel
x <- mclapply( 1:10, get_one_point, mc.cores=detectCores() )
x <- do.call(rbind, x)
plot(x, 
  xlim=c(-2,2), ylim=c(0,2), 
  pch=15, cex=1.5, asp=1, las=1,
  xlab="", ylab=""
)
curve(x^2, add=TRUE)
curve(sqrt(1-x^2), add=TRUE)
curve(2*sqrt(1-x^2/4), add=TRUE) 
```

![满足约束的非随机点](../Images/b9299c3106ad15294ca3b40ba82dea94.png)

我只使用`Rsolnp`它是因为它允许我将约束指定为函数：如果你有一个线性问题并使用欧几里得距离，那么问题就会变成二次的并且可以 `solve.QP`从`quadprog`包中解决。

您还可以使用 L^1 范数（即绝对值）：然后可以将问题重新表述为线性问题。

# php - 通过单选按钮删除图像

> ID：10318679
> 
> 赞同：0
> 
> 时间：2012-04-25T15:20:46.960
> 
> 标签：php

我想知道是否有人可以帮助我。

我已经把下面的脚本放在一起，它创建了一个图片库。

```
<?php

  if (isset($_POST['del']))
      $originalname = intval($_POST['del']);

      $file = 'UploadedFiles/' . $_SESSION['username'] . '/' . $_SESSION['locationid'] . '/' '$originalname';
if (!unlink($file))
  {
  echo ("Error deleting $file");
  }
else
  {
  echo ("Deleted $file");
  }
?> 

<?php 

  $galleryPath = 'UploadedFiles/' . $_SESSION['username'] . '/' . $_SESSION['locationid'] . '/';

  $thumbnailsPath = $galleryPath . 'Thumbnails/'; 

  $absGalleryPath = realpath($galleryPath) . DIRECTORY_SEPARATOR; 

  $descriptions = new DOMDocument('1.0'); 
  $descriptions->load($absGalleryPath . 'files.xml'); 
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
  <title>Gallery</title> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <link href="Libraries/fancybox/jquery.fancybox-1.3.1.css" rel="stylesheet" type="text/css" /> 
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/base/jquery-ui.css" type="text/css" media="all" />
  <link href="Styles/style.css" rel="stylesheet" type="text/css" /> 
  <!--[if IE]>   
  <link href="Styles/ie.css" rel="stylesheet" type="text/css" /> 
  <![endif]-->
  <script src="Libraries/jquery/jquery-1.4.3.min.js" type="text/javascript"></script> 
  <script src="Libraries/fancybox/jquery.fancybox-1.3.1.pack.js" type="text/javascript"></script> 
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>         
  <script type="text/javascript"> 

  $(function() { $('a.fancybox').fancybox(); }); 

  </script> 
  <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-right: 110px;
}
.style4 {font-size: 12px}
-->
  </style>
  <script type="text/javascript"> 
    function showdialog() {
        // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:160,
            modal: false,
            buttons: {
                "Delete image": function() {
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    };
    </script>

</head>
<body style="font-family: Calibri; color:  #505050; font-size: 9px; border-bottom-width: thin; margin-top: 5px; margin-left: -476px; margin-right: 1px; margin-bottom: -10px;">
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div>
  <form id="gallery" name="gallery" class="page" action="index.php" method="post">  
  <div id="container"> 
    <div id="center"> 
      <div class="aB"> 
        <div class="aB-B"> 
          <?php if ('Uploaded files' != $current['title']) :?>
          <?php endif;?>
          <input name="deleteimage" type="button" value="Delete Selected Image" onclick="showdialog()" />
          <div class="demo"> 
            <div class="inner"> 
              <div class="container"> 
                <div class="gallery"> 
                  <ul class="gallery-image-list"> 
                  <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) : 
                          $xmlFile = $descriptions->documentElement->childNodes->item($i); 
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8'); 
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8'); 
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source')); 
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail')); 
                  ?>
                    <li class="item"> 
                      <a class="fancybox" target="_blank" rel="original" href="<?php echo $source; ?>"><img class="preview" 
                        alt="<?php echo $name; ?>"  src="<?php echo $thumbnail; ?>" /></a><?php echo "<input type='radio' name='del' value='{$originalname}' />"?></li>
                        <p><span class="style4"><b>Image Name:</b> <?php echo htmlentities($xmlFile->getAttribute('originalname'));?> <br />
                          <b>Image Description:</b> <?php echo htmlentities($xmlFile->getAttribute('description'));?> </span><br />  
                          <?php endfor; ?>
                          </li>
                        </p>
                  </ul>
                </div> 
              </div> 
            </div> 

    </div> 
    <div id="dialog-confirm" title="Delete This Image?">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>This image will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>
    </div> 
        <div class="aB-a">        </div> 
      </div> 
    </div> 
  </div> 
  </form> 
</body> 
</html> 
```

针对每个图像，并出现在我的代码的这一行中： `alt="<?php echo $name; ?>" src="<?php echo $thumbnail; ?>" /></a><?php echo "<input type='radio' name='del' value='{$originalname}' />"?></li>`我添加了一个单选按钮。

在选择单选按钮并单击“删除选定图像”按钮后，我希望在此文件路径中删除图像：

```
$galleryPath = 'UploadedFiles/' . $_SESSION['username'] . '/' . $_SESSION['locationid'] . '/'; 
```

和这里 ：`$thumbnailsPath = $galleryPath . 'Thumbnails/';`

我对 PHP 并不精通，但我做了一些研究，我相信我需要使用“取消链接”命令。所以我想我应该尝试一下最初只使用一个文件路径来编写这个过程。我可以选择一个单选按钮，然后显示正确的`Dialog Confirmation`消息，但不幸的是它不会删除图像，而且我不确定问题出在哪里。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了？

非常感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:26:33.307

如果您知道将正确的图像路径传递给 unlink 命令，则运行 PHP 的用户帐户可能没有文件的写入权限。

您可能希望在 E_WARNING 级别打开错误，然后运行测试脚本以查看是否收到警告。您还应该测试 unlink 的返回值，因为它在失败时返回 FALSE。

# windows - 如何将所有照片从驱动器复制到闪存驱动器

> ID：10318682
> 
> 赞同：1
> 
> 时间：2012-04-25T15:21:07.543
> 
> 标签：windows, batch-file, copy, cmd, photos

我想将硬盘驱动器的所有文件复制到闪存驱动器，如果可能的话使用 CMD。

因此，创建一个带有文件的闪存驱动器，用于备份您的图片，而无需重新创建所有目录。

我努力了：

```
for /r C:\ %x in (*.jpg *.png *.gif) do @copy /y %x 
```

问题在于，一个 BATCH 文件不能运行它，你必须直接在 CMD 中运行它。

我也尝试过 XCOPY 和 ROBOCOPY，但它们会重新创建目录，这对用户来说非常复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:23:32.190

你应该可以在批处理文件中使用它，你只需要像这样加倍你`%`的 's：

```
for /r C:\ **%%x** in (*.jpg *.png *.gif) do @copy /y **"%%x"** 
```

还要注意双引号。如果名称包含空格和/或其他在批处理语法中具有特殊含义的字符，例如 等，则需要它们`+`。`&`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T05:08:19.967

```
@echo off
setLocal Enabledelayedexpansion
for %%d in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do (
    IF EXIST %%d:\nul (
        ECHO %%d
        rem this code will copy all images from whole your pc to a usb labeled as Z or you can change this address(Z:\Private)
        robocopy %%d:\  Z:\private  *.jpg *.jpeg *.gif *.png /S /R:1 /W:1 /NDL /XJD /XD Z:\Private\
    )
)
pause 
```

# c# - C# - 在 Windows 窗体应用程序中获取 SelectedItem 的值

> ID：10318693
> 
> 赞同：3
> 
> 时间：2012-04-25T15:21:56.153
> 
> 标签：c#, combobox, selecteditem

我有一个简单的 Windows 窗体应用程序（带有一个 Access 数据库），它带有一个组合框 (cmbStores)，它以可以想象的最简单的方式填充。

**问题**：我无法获取所选项目的值。

这是我填充此组合框的方式：

```
// Variable declaration
        string strQueryStores = "SELECT StoreNumber FROM tblStoresAndRegion ORDER BY StoreNumber";
        string strConnectionString = UtilityClass.GetConnectionString();
        OleDbConnection connStores;
        OleDbDataReader readerStores = null;

        connStores = new OleDbConnection(strConnectionString);

        try
        {
            connStores.Open();
            OleDbCommand sqlGetStores = new OleDbCommand(strQueryStores, connStores);

            cmbStore.Items.Clear();
            cmbStore.Items.Add("All");
            if (connStores != null)
            {
                readerStores = sqlGetStores.ExecuteReader();

                if (readerStores.HasRows)
                {
                    while (readerStores.Read())
                    {
                        cmbStore.Items.Add (Convert.ToInt32(readerStores["StoreNumber"]));
                    }
                }
            }
            cmbStore.SelectedIndex = 0;

        }

        catch (OleDbException oledblEX)
        {
            MessageBox.Show(oledblEX.Message);
        }

        finally
        {
            if (readerStores != null)
                readerStores.Close();
            if (connStores != null)
                connStores.Close();
        } 
```

这就是我试图获取所选项目的价值的方式。

```
int nStoreNumber = Convert.ToInt32(cmbABSM.SelectedItem); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:27:08.703

尝试使用`SelectedValue`if`ValueMember`为组合框设置，否则默认为该`Text`属性：

```
//If ValueMember is set
int nStoreNumber = Convert.ToInt32(cmbABSM.SelectedValue);

//Otherwise
int nStoreNumber = Convert.ToInt32(cmbABSM.Text); 
```

无论哪种方式，我都建议您确保所选内容的值是有效的`int`.

```
int nStoreNumber;

if (!int.TryParse(cmbABSM.SelectedValue, out nStoreNumber))
{
    //This is not a valid number.  Notify the user.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T21:23:34.573

我知道我有点晚了，但这很好用：

```
int? nStoreNumber = cmbABSM.SelectedValue as int?;
if (nStoreNumber==null)
    return; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T15:27:53.820

做

```
Int32.Parse(box.SelectedItem.ToString()); 
```

为你工作？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T15:33:48.910

您可以使用 SelectedItem.Value 或 SelectedValue，实际区别在于它们在没有选择时返回的内容。

SelectedItem.Value 返回值，如果没有选中项将返回 null。

SelectedValue 也返回值，但如果没有选中项，将返回一个空字符串

进一步阅读：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selecteditem.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selecteditem.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)

# templates - 微小的 mce 模板内容不可编辑

> ID：10318697
> 
> 赞同：1
> 
> 时间：2012-04-25T15:22:32.393
> 
> 标签：templates, tinymce, readonly

我正在使用最新的 tinymce 编辑器并且有一个特定的问题。

我想让所有模板元素（标签）都不可编辑，因此用户只能编辑其中的文本。

任何人都可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:24:44.840

我已经实现了这一点，但我认为我的工作不是一个好的工作..但至少问题得到了解决。无论如何，这是我的解决方案。

tinymce 目前在不可编辑内容中有一个错误，因为当您从可编辑内容开始按住删除按钮时，它也会删除不可编辑内容。

所以我做了什么：

这将是输入字段的形式

```
<div class="nonEditables" style="width:100%;"></div>
<div> "Placeholder" </div>
<div class="nonEditables" style="width:100%;"></div> 
```

在启动时在tinymce上绑定keyup事件

```
ed.onKeyUp.add(function(ed, e) {
    if ($('.nonEditables').length < 2) {
        tinymce.UndoManager.undo();
    }
// DO ANYTHING HERE.. the checking and everything you need. 
}); 
```

这对我有用...并且还要检查占位符是否被删除，否则tinymce会删除div...您将丢失您的输入字段... :) 总是在里面放一个文本..（*一个空格会做， ” ”） ：）

# c - 带有 GTK+ 的 C 语言 GUI，第一步

> ID：10318699
> 
> 赞同：2
> 
> 时间：2012-04-25T15:22:40.700
> 
> 标签：c, user-interface, gtk

这是关于 GUI 的一般问题。我从来没有用 GUI 写过程序，现在我必须为大学做。我发现 C 语言中最好的解决方案编程是 GTK+。

我看到很多例子，但我仍然无法理解一件事。我的程序是一个服务器/客户端应用程序，所以如果有一个小的 GUI，它也必须在后台运行。怎么可能实现？我看到要“启动”我必须使用 gtk_main() 循环的人，并且该循环内的应用程序一直阻塞。我应该使用 fork() 同时执行其他任务吗？

谢谢，对不起，如果这是一个微不足道的问题。

* * *

用意大利语很难解释，用英语更糟糕:)

程序必须连续监听网络（LAN），查看其他用户是否到达并捕获他们的 UDP 消息，同时如果某些条件得到验证，它必须与特定用户通信（例如，如果文件在本地文件夹发生变化，它必须将此文件发送给指定的用户。这可能同时发生在多个用户身上）。我只有一个应用程序必须同时是服务器（发送文件）和客户端（监听网络）。

拥有一个单独的“客户端”来实现 GUI 的想法可能很有趣。

我从来没有开发过 GUI，所以我想写我所有的程序，然后在最后添加 GUI。这是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:13:38.227

您可以通过要求主循环为您运行其他任务来运行它们。如果您使用 GIO 进行 IO，这将自动处理（请参阅[http://developer.gnome.org/gio/stable/](http://developer.gnome.org/gio/stable/)）。但在一般情况下，您将使用 g_idle_add()、g_timeout_add() 等函数，如下所述：http: [//developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html)也许 g_io_add_watch() 在这里：http: [//developer.gnome.org/glib/stable/glib-IO-Channels.html](http://developer.gnome.org/glib/stable/glib-IO-Channels.html)

如果您需要阻塞 IO（类似于 read()/fread() 调用），那么您必须生成一个线程并通过添加一个空闲处理程序让该线程与 GUI 循环通信。如果您是主循环或线程的新手，这很难理解，因此使用 GIO 是一个更好的选择，因为它可以为您做这件事。

您也可以使用 fork() 生成一个进程来执行您的 IO，但是您需要使用 IO 与您的进程进行通信，因此您无法真正避免在 UI 进程中执行 IO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:29:10.200

你能提供一些关于你的程序具体做什么的细节吗？你目前的描述很模糊，很难真正理解你在问什么。

这是基于我对原始问题的解释的一些通用建议。

你说你的程序“是一个服务器/客户端应用程序，所以如果有一个小的 GUI，它也必须在后台运行”。请注意，服务器通常没有集成的 GUI；它们通常被设计为在后台静默且不可见地运行。具有用于配置或检查服务器状态的图形界面并不少见，但它传统上实现为单独的独立应用程序（各种客户端），它仅连接到服务器以检索状态信息并发送配置命令。您不会让 GUI 在服务器运行的整个过程中都在运行，因此您不希望服务器承受额外的开销。

就您的客户端而言，GUI 通常使用回调来实现。创建 UI 小部件时，会为其提供一个指向函数的指针，该函数将在该小部件被单击、修改或以其他方式执行时调用。有时该回调函数会简单地更新另一个 UI 小部件并返回，有时它可能需要生成一个新线程以执行更复杂的操作。同样，这在很大程度上取决于您的 GUI 和应用程序正在尝试做什么。

# php - $_SERVER['REMOTE_ADDR'] 的 IPV6 表示法

> ID：10318702
> 
> 赞同：5
> 
> 时间：2012-04-25T15:22:50.157
> 
> 标签：php, ipv6

我有许多项目的功能依赖于 、 和 提供的`$_SERVER['REMOTE_ADDR]`IP`$_SERVER['HTTP_X_FORWARDED_FOR']`地址`$_SERVER['CLIENT_IP']`。

IPV4 地址很容易匹配，因为我们总是以相同的格式接收它们：4 个不带前导 0 的整数，用点分隔`.`。

而 IPV6 地址可以被压缩。例如：FF01:0:0:0:0:0:0:101 -> FF01::101

我一直在研究这个问题，但没有发现任何相关的东西，所以我想请教您的经验。是否`$_SERVER['REMOTE_ADDR]`使用标准？假设它总是以压缩或未压缩的形式接收是否安全？

或者我应该在尝试测试它们之前压缩所有的 IPV6 字符串？

**笔记：**

理想情况下，我想将 IPV6 地址作为字符串而不是二进制结构来处理，以提高数据库/源代码的可读性并允许更轻松的 IP 范围匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:42:50.657

如果您[`inet_pton()`](http://php.net/manual/en/function.inet-pton.php)先使用，然后将其转换回字符串，则[`inet_ntop()`](http://php.net/manual/en/function.inet-ntop.php)应该具有一致的字符串表示形式。我不会依赖输入来保持一致......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:39:05.610

[CGI 规范](http://www.faqs.org/rfcs/rfc3875.html)清楚地表明任何符合 RFC 的 IPv6 地址都是有效的：

```
4.1.8\.  REMOTE_ADDR

   The REMOTE_ADDR variable MUST be set to the network address of the
   client sending the request to the server.

      REMOTE_ADDR  = hostnumber
      hostnumber   = ipv4-address | ipv6-address
      ipv4-address = 1*3digit "." 1*3digit "." 1*3digit "." 1*3digit
      ipv6-address = hexpart [ ":" ipv4-address ]
      hexpart      = hexseq | ( [ hexseq ] "::" [ hexseq ] )
      hexseq       = 1*4hex *( ":" 1*4hex )

  The format of an IPv6 address is described in RFC 3513 [15]. 
```

一个理智的程序员会验证所有的输入。因此，您应该将任何环境变量视为受污染的输入并验证/转换。客户提供的标头（例如 X-Forward-For 等）应始终受到怀疑。

那么扩展 IPv6 地址呢？

这个问题之前已经[被问过](https://stackoverflow.com/questions/444966/working-with-ipv6-addresses-in-php)，[有几个解决方案](http://www.soucy.org/project/inet6/)，包括[PEAR 一个](http://pear.php.net/manual/en/package.networking.net-ipv6.uncompress.php)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:37:20.713

IPv6 地址的*推荐*格式在[RFC 5952](https://www.rfc-editor.org/rfc/rfc5952)中。

但是，您不能依赖所有地址都采用该格式，并且字符串格式对于范围比较特别糟糕。阅读 RFC 将使您了解合法地表示同一 IPv6 地址的方法有多少。

您确实应该解析地址（使用`inet_pton`其他地方提到的）并在生成的 128 位字段上执行范围比较。

通常情况下，您只会关心 64 个最高有效位，这非常适合`long`大多数架构。

# php - PHP与MSSQL插入NULL错误

> ID：10318714
> 
> 赞同：0
> 
> 时间：2012-04-25T15:23:26.917
> 
> 标签：php, sql, sql-server, database, tsql

我正在尝试将 PHP 与 Microsoft SQL Server 2008 R2 一起使用，这让我想死。我有一个存储过程，可以通过我在 Mac 上的终端中运行的 FreeTDS 完美运行，在 Visual Studio 中完美运行，并通过 FrontPage 服务器上的 ASP.NET 完美运行。然而，它在 Ubuntu Web 服务器上通过 PHP 5.3.2 失败了。在这个过程中，我设置了一些临时表，并从一个巨大的表中插入到它们中，该表总是到处都包含一些空值。我得到的错误是

```
Cannot insert the value NULL into column 'Notes', table 'tempdb.dbo.#termtable1__00000000BE0B'; column does not allow nulls. INSERT fails. 
```

只有十亿多下划线。[有人在此处](https://bugs.php.net/bug.php?id=44049)将此作为错误发布，但并没有引起太多关注。我最好的尝试是在每个临时表的每一列上指定一个 NULL 约束，但这没有帮助。也试过了`SET ANSI_NULLS ON`。就补丁和驱动程序而言，我没有太多访问这些服务器的权限，我也没有太多访问权限的人。我不认为他们会想要做太多的事情来帮助我，但如果有人有一个非常好的想法，我会尽力完成它。哦，而且，应该注意的是，SquirrelSQL 中的相同过程（通过 Microsoft JDBC 驱动程序）给出了奇怪的、半正确的结果。谢谢。

* * *

*编辑：*

我修复了链接，实际上只是完全复制并粘贴了错误的 URL。这是声明临时表的 T-SQL。我尝试`NULL`在每种数据类型之后放置。像这样的有五个。

```
 CREATE TABLE #termtable1
        (SerialNumber varchar(50), SR varchar(50), LeaseTag varchar(50), Component varchar(50), 
        Fund int, Org int, Program varchar(50), FirstName varchar(80), LastName varchar(30), 
        Department varchar(50), Location varchar(50), UserID nvarchar(20), Notes nvarchar(MAX), 
        Manufacturer varchar(50), Model varchar(50), Maintenance bit, OrderNumber varchar(50), 
        ContractNumber varchar(50), ParentTag varchar(50)); 
```

它们通过动态 SQL 插入，这就是为什么我不能使用表变量（范围问题）：

```
DECLARE @sqlstring nvarchar(MAX);
DECLARE @params nvarchar(200) = N'@term1 varchar(100), @term2 varchar(100), @term3 varchar(100), @term4 varchar(100), @term5 varchar(100)';
DECLARE qryCursor CURSOR FOR SELECT * FROM @terms;
OPEN qryCursor;
FETCH NEXT FROM qryCursor INTO @term1, @term2, @term3, @term4, @term5;
DECLARE @termrow int = 1;
WHILE (@@FETCH_STATUS = 0)
BEGIN
    SET @sqlstring = N'INSERT INTO #termtable' + CAST(@termrow AS varchar) + N' SELECT * FROM dbo.NewUserInfo WHERE ';
    DECLARE @i int = 1;
    WHILE (@i <= 5)
    BEGIN
        SET @sqlstring = @sqlstring +
        N'(SerialNumber LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'SR LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'LeaseTag LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Component LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Fund LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Org LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Program LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'FirstName LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'LastName LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Department LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Location LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Notes LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Manufacturer LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Model LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'Maintenance LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'OrderNumber LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'ContractNumber LIKE @term' + CAST(@i AS varchar) + N' OR ' +
         N'ParentTag LIKE @term' + CAST(@i AS varchar) + N') OR ';
        SET @i = @i + 1;
    END
    SET @sqlstring = @sqlstring + N'(0 = 1)';
    EXECUTE sp_executesql @sqlstring, @params, @term1=@term1, @term2=@term2, @term3=@term3, @term4=@term4, @term5=@term5;
    SET @termrow = @termrow + 1;
    FETCH NEXT FROM qryCursor INTO @term1, @term2, @term3, @term4, @term5;
END 
```

PHP 很简单。*只有在NewUserInfo*表`$result = mssql_query("EXEC QuickSearch '" . $search . "';");`中找到 NULL 时才会给出错误。经常出现在“笔记”中。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:17:01.823

好吧，伙计们，我很抱歉。`NULL`在每种数据类型都*起作用*之后。当我第一次尝试时，我一定错过了一对。表声明应该是这样的：

```
CREATE TABLE #termtable1
        (SerialNumber varchar(50) NULL, SR varchar(50) NULL, LeaseTag varchar(50) NULL, Component varchar(50) NULL, 
        Fund int NULL, Org int NULL, Program varchar(50) NULL, FirstName varchar(80) NULL, LastName varchar(30) NULL, 
        Department varchar(50) NULL, Location varchar(50) NULL, UserID varchar(20) NULL, Notes varchar(MAX) NULL, 
        Manufacturer varchar(50) NULL, Model varchar(50) NULL, Maintenance bit NULL, OrderNumber varchar(50) NULL, 
        ContractNumber varchar(50) NULL, ParentTag varchar(50) NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T21:55:11.380

如果您创建临时表将使用 SELECT ... INTO 语句，那么您可以确保它会匹配 NewUserInfo 表的列，即使您迟到对该表进行更改

```
 SET @sqlstring = N'SELECT * FROM dbo.NewUserInfo INTO #termtable' + CAST(@termrow AS varchar) + N' WHERE 1=0'; 
```*

# delphi - DELPHI：使用 ClientDataSet 和 CalcFields 的主从细节

> ID：10318715
> 
> 赞同：2
> 
> 时间：2012-04-25T15:23:29.280
> 
> 标签：delphi, master-detail, tclientdataset

我有一个主/详细 ClientDataSet 如下（这些是在运行时创建/填充的，并填充了从 API 调用返回的数据，没有数据库连接）：

```
Services:
  ID
  Name
  BasePrice
  etc.

AddOns:
  Selected
  ID
  ServiceID
  Name
  Quantity
  UnitCost
  TotalCost
  etc. 
```

我将服务显示为下拉字段，然后使用该服务的可用插件填充网格。'TotalCost' 字段是一个计算字段，显示在网格中它自己的列中。“已选择”字段用于跟踪网格中显示的复选框，以指示客户想要该特定附加组件。

这一切都按预期工作。我现在需要计算服务加上任何附加组件的总成本。我可以使用以下方式检索的服务成本：

```
ClientDataSetServices.FieldByName('BasePrice').Value 
```

但是，我无法从每个选定的附加组件中检索 TotalCost。我以为我可以使用聚合字段，但在我的搜索中我发现使用主/详细信息设置是不可行的。我还尝试简单地遍历详细信息 ClientsDataSet，如下所示：

```
 (within the CalcFields method of the details ClientDataSet)
  // Add parts to parts cost
  grdMain.DataSource.DataSet.First;
  while not grdMain.DataSource.DataSet.Eof do begin

    if (grdMain.DataSource.DataSet.FieldByName('Selected').Value) then begin
      FPartsCost := FPartsCost +      
                    grdMain.DataSource.DataSet.FieldByName('TotalPrice').Value;
    end;

    grdMain.DataSource.DataSet.Next;
  end; 
```

但这会导致无限循环。当我调试这部分代码时，我发现 ...DataSet.First 正在调用 CalcFields（或其他依次调用 CalcFields 的东西）。

How can I iterate over the DataSet of selected add-ons to calculate the total costs dynamically (whenever a selection or quantity changes)?

**- 编辑 -**

我尝试在详细信息表上设置聚合，如下所示：

*   添加了标签聚合'AggregatePrice'
*   设置字段如下：Active - True Name - AggregatePrice' Expression - SUM(TotalPrice) GroupingLevel - 1 IndexName - ServiceId Visible - True

当我运行它时，我收到错误消息“字段'TotalPrice'不是要在聚合中使用的正确类型的计算字段，请使用内部计算”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T21:46:37.083

编辑后，答案似乎很明显：使用 InternalCalc 字段而不是简单的 CalcField！

计算仍然在 OnCalcField 内完成，但您必须检查 TDataset.State 中的 dsInternalCalc。

这是必要的，因为聚合是在 dsInternalCalc 之后但在 dsCalcFields 状态之前计算的。

附带说明一下，InternalCalc 字段可用于索引，但简单的 CalcField 不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:32:21.007

一种方法是使用克隆光标获取详细信息 - 数据集的副本与其源内容保持同步，但可以独立导航。

例如。

```
CopyCDS.CloneCursor(OriginalCDS,False); // check params in help to see options
CopyCDS.First;
while not CopyCDS.EOF do
  begin
  // do stuff to calculate what you need
  CopyCDS.Next;
  end; 
```

请记住，克隆的光标不会有任何计算字段或与原始光标关联的任何事件，因此如果需要，您需要重新设置它们。

# eclipse - Eclipse 和 Google Drive 的问题

> ID：10318717
> 
> 赞同：2
> 
> 时间：2012-04-25T15:23:33.537
> 
> 标签：eclipse, cloud, google-drive-api

今天我尝试将我的开发环境从 Dropbox 切换到 Google Drive。我的完整开发文件夹（30,000 个文件）存储在本地并同步到云端。Dropbox 已经完美运行了将近一年，但 Google Drive 目前便宜得多——所以我尝试用 Google Drive 做同样的事情。

Google 云端硬盘仅显示一种目录的上传错误。所有这些目录都与eclipse有关。

有问题的文件例如：

```
workspace\.metadata\.plugins\org.eclipse.core.resources\.projects\<aproject>\
workspace\.metadata\.plugins\org.eclipse.core.resources\.projects\<anotherproject>\ 
```

我确实查看了属性，但我找不到这些目录有什么特别之处。Eclipse 没有运行。

我能做些什么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:35:09.260

我找到了一个讨论这个问题的论坛。他们认为谷歌在几周内解决了 eclipse 的问题......您可以访问[http://productforums.google.com/forum/#!topic/drive/8DNEH3U6vbE中的此链接](http://productforums.google.com/forum/#!topic/drive/8DNEH3U6vbE)

# java - 如何创建其中包含列表的类，并且列表应包含两种不同类型的对象

> ID：10318718
> 
> 赞同：1
> 
> 时间：2012-04-25T15:23:38.890
> 
> 标签：java

例如：

我有两种类型的对象：

```
public class Image {
...
} 
```

和

```
public class Video {
...
} 
```

我想要一个包含这两个对象的单个列表的类，如下所示：

```
public class Media {

private List<Object> mediaList = new....
....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:24:58.577

创建一个父类，并让 Image 和 Video 成为它的子类。

然后，您可以制作父类型的列表。

```
import java.util.ArrayList;
import java.util.List;

public class Example
{
    public abstract ImageVideo
    {

    }

    public class Image extends ImageVideo
    {

    }

    public class Video extends ImageVideo
    {

    }

    public static class Media
    {
        public static void main( String args[] )
        {
            Image image = new Example().new Image();
            Video video = new Example().new Video();

            List<ImageVideo> mediaList = new ArrayList<ImageVideo>();

            mediaList.add( image );
            mediaList.add( video );
        }
    }
} 
```

此外，以下编译，当您从列表中检索对象时，您只需将它们转换回来。

```
import java.util.ArrayList;
import java.util.List;

public class Example
{
    public class Image
    {

    }

    public class Video
    {

    }

    public static class Media
    {
        public static void main( String args[] )
        {
            Image image = new Example().new Image();
            Video video = new Example().new Video();

            List<Object> mediaList = new ArrayList<Object>();

            mediaList.add( image );
            mediaList.add( video );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:39:12.247

创建一个父类。

```
 public abstract Class MediaFormat{
} 
```

然后是子类

```
 public class Image extends MediaFormat{
...
}

    public class Video extends MediaFormat{
...
} 
```

然后最后

```
 public class Media {
     private List<MediaFormat> mediaList = new List<MediaFormat>();
     ...
} 
```

父类 (MediaFormat) 是抽象的。这样可以确保 MediaFormat 不能被实例化。

# asp.net - 无法将“System.Data.DataView”类型的对象转换为“System.Data.IDataReader”类型

> ID：10318720
> 
> 赞同：1
> 
> 时间：2012-04-25T15:23:45.817
> 
> 标签：asp.net, vb.net, dataview, idatareader

我有一个函数（在 vb.net 上）从 XMLWebService 获取数据：

```
Private Function GetDataSchedule() As DataTable
    Dim xTable As Data.DataTable
    xTable = xMaster.GetSchedule()

    'Bind to DataTable
    Dim DT As New System.Data.DataTable
    DT.Load(xTable.DefaultView) '--> When I set a breakpoint, the error start from here

    Return DT
End Function 
```

然后是调用函数的`GetDataSchedule()`函数：

```
Public Sub ShowDataSchedule()
    Dim DSSchedule As New System.Data.DataSet
    DSSchedule.Tables.Add(GetDataSchedule) 

End Sub 
```

但是当我执行代码时，它会导致收到错误消息： `Unable to cast object of type 'System.Data.DataView' to type 'System.Data.IDataReader'.`

当我只是执行`GetDataSchedule()`函数时，它返回值，但是当我单独调用函数时，它得到了错误。我错过了什么吗？需要你的帮助。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:11:13.203

Try this

```
DSSchedule.Tables.Add(GetDataSchedule().Copy()) 
```

Although, since you might get back a null reference from GetDataSchedule(), it would be better to re factor your code a bit:

```
Dim schedule as Data.DataTable = GetDataSechedule()
If Not IsNothing(schedule) Then
    DSSchedule.Tables.Add(schedule.Copy())
End If 
```

Otherwise, your code will go **boom** if you try to perform a `.Copy()` on a null reference.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:25:37.663

Load 函数只接受 DataReaders 作为参数（例如：SqlDataReader），但您已经有一个数据表。有 DT = xTable 就足够了。

# php - 存储常见计算值的海量数据库与动态计算它

> ID：10318724
> 
> 赞同：0
> 
> 时间：2012-04-25T15:23:49.070
> 
> 标签：php, mysql, performance

我正在为我的雇主构建一个 PHP+MySQL，以查看过去几个月和几年中每个销售人员的统计数据。这个想法是显示每个员工的销售收入。有很多员工（当前和过去的员工）。我想到的统计表是这样的：

```
table_sales_revenue
id
id_sales_guy
Year
year_nbr
jan_nbr
feb_nbr
mar_nbr
etc..
dec_nbr 
```

所以对于销售员约翰

```
id=1
id_sales_guy=1231852
year=2011
year_nbr=12k
avg_day=32.8  (that's year_nbr/365, bcse they work 7/7)
jan_nbr=1k
feb_nbr=1k
etc..
dec_nbr=1k 
```

我存储的是年 nbr 值，它是 month_nbr 的总和，因为这个应用程序的用户会根据 year_nbr 进行很多比较，然后他会通过月份的详细信息来获取更多详细信息。所以我存储它以避免每次都计算它。那好吗？

添加第一个“id”字段（自动增量，PK）以提高性能是否有用？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:27:09.007

这个问题确实是主观的，取决于正在完成的实际计算量。一般来说，如果您要进行大量计算，并且您的数据库确实是，`massive`那么可以 - 存储一些值是很好的。您会对查询的返回时间感到满意。否则，性能收益和损失可能很小。

# codeigniter - 在 Codeigniter 中自动加载多个语言文件的问题

> ID：10318725
> 
> 赞同：1
> 
> 时间：2012-04-25T15:23:51.660
> 
> 标签：codeigniter

我有一个用于我的导航 (nav_lang.php) 的语言文件，我想在整个应用程序中全局使用它。Codeigniter 文档说你可以将它包含在 $autoload['language'] 数组中。

但是，我只想为每个用户加载特定语言的文件。所以English/nav_lang而不是portuegeuse/nav_lang。我已经设置了我的 URL，以便 /en/ 或 /br/ 是第 1 段。

有没有办法避免将代码放在每个控制器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:16:33.310

您可以扩展 CI_Controller 并在那里加载适当的文件。您的所有控制器都将从新的扩展控制器继承，并且不会重复代码。

# .htaccess - htaccess 删除扩展

> ID：10318726
> 
> 赞同：0
> 
> 时间：2012-04-25T15:23:54.353
> 
> 标签：.htaccess

大家好，我正在使用它，我知道 htaccess 正在工作，因为它正在重定向到 notfound.php 但由于某种原因，我无法让它工作以不显示扩展名（php/html）在这里有任何帮助？

```
<Files ~ "^\.(htaccess|htpasswd)$">
deny from all
</Files>
Options Indexes
ErrorDocument 404 notfound.php
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.socialscenes\.co\.uk)(:80)? [NC]
RewriteRule ^(.*) http://socialscenes.co.uk/$1 [R=301,L]
DirectoryIndex index.php       
order deny,allow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:33:41.123

好吧，您需要的不仅仅是支持隐藏`.php`和`.html`扩展。考虑这段代码：

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php or .html extension
# To externally redirect foo.php ot foo.html to foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.(php|html) [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.html
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^ %{REQUEST_URI}.html [L]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

# java - 在 JTextField 中使用自定义插入符号以实现可访问性

> ID：10318728
> 
> 赞同：2
> 
> 时间：2012-04-25T15:24:04.287
> 
> 标签：java, swing, jtextfield, caret

我正在编写一个 Swing 应用程序，我有一个朋友读了很多圣经。这个应用程序有文本或段落搜索。

但我的朋友只能看到*大字体*和*对比色*。我更改了`textField`with的插入符号的颜色`setCaretColor`，用户在其中输入要搜索的文本。

插入符号显示为具有相同字体*高度*的矩形，但**宽度**很小，我认为我的朋友看不到。

有没有办法改变插入符号的宽度以显示更大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:54:50.507

您是否从网上流传的 Oreilly Swing 书中看到了这个例子？看来您可以自定义插入符号很多。

[http://www.java2s.com/Code/Java/Swing-JFC/Fanciercustomcaretclass.htm](http://www.java2s.com/Code/Java/Swing-JFC/Fanciercustomcaretclass.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T16:44:57.270

也许我可以通过三种方式复制`Caret`和选择`JTextComponents`

```
import java.awt.Color;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.DefaultCaret;
import javax.swing.text.DefaultHighlighter;
import javax.swing.text.Highlighter;

public class TextFieldExample extends JFrame {

    private static final long serialVersionUID = 1L;

    public TextFieldExample() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        JPanel panel = new JPanel();
        JTextField tfield = new JTextField(10);
        tfield.setText("default text");
        final JTextField tfield2 = new JTextField(10);
        tfield2.setText("default text");
        tfield2.addFocusListener(new FocusListener() {

            public void focusGained(FocusEvent fe) {
                tfield2.setCaretPosition(tfield2.getDocument().getLength());
            }

            public void focusLost(FocusEvent fe) {
            }
        });
        JTextField tfield3 = new JTextField(10);
        tfield3.setText("default text");
        tfield3.setCaret(new HighlightCaret());
        panel.add(tfield);
        panel.add(tfield2);
        panel.add(tfield3);
        add(panel);
        pack();
        setVisible(true);
    }

    class HighlightCaret extends DefaultCaret {

        private final Highlighter.HighlightPainter unfocusedPainter =
                new DefaultHighlighter.DefaultHighlightPainter(new Color(230, 230, 210));
        private static final long serialVersionUID = 1L;
        private boolean isFocused;

        @Override
        protected Highlighter.HighlightPainter getSelectionPainter() {
            return isFocused ? super.getSelectionPainter() : unfocusedPainter;
        }

        @Override
        public void setSelectionVisible(boolean hasFocus) {
            if (hasFocus != isFocused) {
                isFocused = hasFocus;
                super.setSelectionVisible(false);
                super.setSelectionVisible(true);
            }
        }
    }

    public static void main(String... args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                TextFieldExample textFieldExample = new TextFieldExample();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T16:02:56.983

可能这可以帮助 [http://java-sl.com/tip_overwrite_mode.html](http://java-sl.com/tip_overwrite_mode.html)

# android - 安卓 SDK。在新线程中访问旧变量

> ID：10318730
> 
> 赞同：0
> 
> 时间：2012-04-25T15:24:04.993
> 
> 标签：android, multithreading, android-2.2-froyo, runnable

我已经能够在一个新线程中调用一个 http post 进程，但是通过 post 发送的变量会根据另一个变量 posttype 的值而有所不同，该变量是在该线程运行之前设置的。

确定通过帖子发送哪些值的变量设置为：`public String posttype = "load";`

在新线程运行之前，posttype 设置为“load”或“unload”。根据这些值，确定通过 post 发送的数据。

我使用的新线程函数来自：[http ://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

我使用上面链接中显示的可运行的 SECOND 函数。

在第一个内部，`run()`我通过 http 发送了变量。在第二个中`run()`，我解析返回的变量。

问题是这样的：我无法访问 posttype 的值，并且`else`总是选择新线程函数中的语句，因为该`if`语句无法访问变量 posttype。

如何使变量`posttype`真正成为全局变量或可由新线程使用？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:31:56.257

如果我做对了，您将无法访问该变量，因为它不是最终的。如果是这样，您可以获取与 posttype 相同类型的最终变量，为其分配该值并在第二次运行中使用它。为了更清楚，请检查我对这个问题的回答：[内部类中的最终变量问题](https://stackoverflow.com/questions/10236446/final-variable-issue-in-an-inner-class/10236531#comment13154901_10236531)

在这种情况下，侦听器在适用相同逻辑的情况下运行。

# python - Python PIL jpeg 质量

> ID：10318732
> 
> 赞同：11
> 
> 时间：2012-04-25T15:24:18.047
> 
> 标签：python, jpeg, python-imaging-library

我使用 python 以较小的质量保存 jpeg

```
im = Image.open(file)
im.save(cached_file, quality=80, optimize=True, progressive=True) 
```

然而，在某些图像中，新图像的文件大小比原始图像大。这怎么可能发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T15:33:07.293

原始图像是否有可能以质量< 80保存？那么，你基本上是在使用更多的空间来保存重建的伪影吗？

# c# - 使用来自其他项目的 DLL 时出错 - ConfigurationManager

> ID：10318733
> 
> 赞同：1
> 
> 时间：2012-04-25T15:24:19.440
> 
> 标签：c#, asp.net

我有 2 个项目，1 个是 REST 服务，另一个是 ASP.net 网站。它们各自独立运行。但我想在我的 ASP.net 项目中重用来自 REST 服务的全局函数。问题是 Global 类是静态的，我们使用 ConfigurationManager.AppSettings["Property"]; 设置变量；

有什么更好的方法来处理这个问题？

编辑：我的一个想法是创建一个通用 XML 文件，这两个项目都可以共享和读取，而不是 web.config 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:27:36.427

好吧，您可以让您的应用程序调用 REST 服务。

其次，如果您担心`AppSettings`，没有理由不能在应用程序的 Web 配置中包含服务使用的相同设置。只要您保持名称相同并包含正确的部分，它们仍然可以使用。

第三，为什么不把你想分享的函数提取到自己的库中呢？

# ant - ant -f build-service 导致与 git repo 的许多差异

> ID：10318734
> 
> 赞同：0
> 
> 时间：2012-04-25T15:24:23.603
> 
> 标签：ant, liferay

`ant -f liferay-plugins-sdk-6.1.0-ce-ga1/portlets/portlet-name/build.xml build-service`
我注意到方法 1：和方法 2在生成 liferay 服务方面存在差异：
`cd "path to portlet"; ant build-service`
我不知道确切的区别，但是当我`git status`在第一种方法之后执行时，git 报告了很多差异。使用第二种方法 git 很好。
我看到的两个区别如下：
1\. 方法 1 中没有 liferay 版权文本
2\. 缩进不同

这种行为有什么原因吗？这对我来说不是一个障碍或其他东西，但是将目录更改为每个 portlet 以构建服务肯定会让我很恼火。或者需要在本地设置 jenkins。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:48:38.017

这是非常神奇的行为，我不能重复。

要使用构建服务，例如 jenkins，请设置 sdk-path 的属性。

构建.xml：

```
<project name="MyJsfTestPortlet-portlet" basedir="." default="deploy">
    <property file="build.${user.name}.properties"/>
    <import file="${project.dir}/portlets/build-common-portlet.xml" />
</porject> 
```

build.myjenkins.properties（在同一个目录中）：

```
project.dir=c:/6.1.GA-1/liferay-portal-6.1.0-ce-ga1-sdk 
```

您可以立即使用此方法从 sdk-dir 移动 portlet。

# ios - obj c uiwebview facebook 评论使应用程序变慢

> ID：10318735
> 
> 赞同：1
> 
> 时间：2012-04-25T15:24:30.670
> 
> 标签：ios, facebook, uiwebview, comments

我在 iOS 的 uiwebview 中使用 facebook 评论社交插件。它工作正常，但在打开几分钟后会降低整个应用程序的帧率。有人经历过吗？有人对此有解决方案吗？

我尝试创建新项目，然后只添加一个带有 facebook 评论的 uiwebview。打开几分钟后，该应用程序也变慢了。

这是 Facebook 评论 [https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

这是我的代码

```
 commentWebView = [[UIWebView alloc] initWithFrame:(CGRect){15, 50, 500, 376}];
        commentWebView.delegate = self;
        commentWebView.backgroundColor = [UIColor clearColor];
        commentWebView.opaque = NO;
        [commentLikeView addSubview:commentWebView];
        NSString* html = [NSString stringWithFormat:@"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"><html><head> <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"> <title>Facebook Comments Test Page</title> <style type=\"text/css\"> .fb-comments, span, .fb-comments iframe[style] {width: %dpx !important;}</style> </head> <body > <div id=\"fb-root\"></div> <script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = \"//connect.facebook.net/en_US/all.js#xfbml=1\";  fjs.parentNode.insertBefore(js, fjs); }(document, \"script\", \"facebook-jssdk\"));</script> <fb:comments href=\"%@\" num_posts=\"10\" width=\"470\"></fb:comments> </body> </html>", (int)commentWebView.frame.size.width, link];
//<div class=\"fb-comments\"  data-href=\"%@\" data-num-posts=\"10\" ></div> 
        [commentWebView loadHTMLString:html baseURL:[NSURL URLWithString:@"http://www.facebook.com"]]; 
```

# google-app-engine - Google Apps Engine 开发服务器错误

> ID：10318741
> 
> 赞同：0
> 
> 时间：2012-04-25T15:25:09.973
> 
> 标签：google-app-engine

我正在运行 Windows 7 64，并且在运行我的项目时收到以下警告。该文件存在，我的路径信息似乎是正确的。这是一个已知的错误？

```
2012-04-25 22:19:51 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--admin_console_server=', '--port=8080', 'C:\\Users\\John\\workspace\\busilinks']"
WARNING  2012-04-25 15:19:53,253 datastore_file_stub.py:518] Could not read datastore data from c:\users\john\appdata\local\temp\dev_appserver.datastore
INFO     2012-04-25 15:19:53,299 dev_appserver_multiprocess.py:647] Running application dev~busilinks on port 8080: http://localhost:8080
INFO     2012-04-25 15:19:53,299 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8080/_ah/admin
WARNING  2012-04-25 15:20:21,331 py_zipimport.py:139] Can't open zipfile C:\Python27\lib\site-packages\setuptools-0.6c12dev_r88846-py2.7.egg: IOError: [Errno 13] file not accessible: 'C:\\Python27\\lib\\site-packages\\setuptools-0.6c12dev_r88846-py2.7.egg'
INFO     2012-04-25 15:20:21,766 datastore_stub_index.py:263] Updating C:\Users\John\workspace\busilinks\index.yaml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:29:28.943

是的，这是一个已知的错误，因为版本 1.6.4 没有保存数据存储文件。[有关问题 7244](http://code.google.com/p/googleappengine/issues/detail?id=7244)的更多信息

# gps - 从 Google 静态地图获取移动站点的路线

> ID：10318742
> 
> 赞同：0
> 
> 时间：2012-04-25T15:25:18.733
> 
> 标签：gps, driving-directions, google-static-maps, mobile-website

我有一个正在建设的移动网站。它上面有一个谷歌静态地图。我希望能够连接到手机的 GPS 并通过手机获取路线。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:07:12.890

这取决于手机的浏览器是否支持[HTML5 Geolocation API](http://dev.w3.org/geo/api/spec-source.html)。如果是这样，您可以使用它来获取地理位置并在 Google 静态地图上绘图。最新的 iPhone 和 Android 设备都支持它。

# javascript - JavaScript - 打开开关，然后关闭

> ID：10318743
> 
> 赞同：3
> 
> 时间：2012-04-25T15:25:21.700
> 
> 标签：javascript, if-statement

我的网站上有一个电灯开关图像。它触发了一个函数（使用 onClick），它使整个包装 div 的不透明度为 0.2，从而产生灯光关闭的效果。

所以点击了开关并且灯“关闭”了，但是我不知道如何重新打开它们。

```
function lightSwitch()
{
    document.getElementById("switchoff").style.opacity = '0.2';
} 
```

我对 JavaScript 很陌生，所以我相信解决方案很简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:27:59.500

```
function lightSwitch()
{
    var el = document.getElementById("switchoff"),
        opacity = el.style.opacity;

    if(opacity == '0.2')
        el.style.opacity = '1';
    else
        el.style.opacity = '0.2';
} 
```

*注意 - 这未经测试，实际值可能不同（“.2”或“0.2”） - 您需要测试“*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:31:33.230

如果我正确理解了您的问题，那么您想在一段时间后将其关闭。

所以你应该使用`setTimeout`这样的东西：

```
function lightSwitch()
{
    document.getElementById("switchoff").style.opacity = '0.2';
    setTimeout(...function to turn it off...,5000); // 5000 mseconds
} 
```

更多信息：[JS 计时](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T15:39:03.743

您可以在 CSS 中为包装器 div 提供一个“on”类和另一个“off”类，然后使用 JQuery 切换类。

```
$(document).ready(function () {

        $(".switchClass").click(function () {
            $(this).toggleClass("off");
            return false;
        });
     }); 
```

CSS：

```
div.switchClass{
//Insert your own look and feel
}

div.off.switchClass{
//Same style as div.switchClass except change the opacity
opacity: 0.2;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T15:33:36.570

更好的方法是创建一个名为“lightsOut”的 CSS 类，并将其添加/删除到您的`switchoff`元素中。

```
function toggleClass( element, className ) {
    element.classList.toggle( className );
} 
```

注意，[`classList`](https://developer.mozilla.org/en/DOM/element.classList)没有在 Internet Explorer 中实现，因此您需要为此参考[Eli Grey 的 polyfill](https://raw.github.com/eligrey/classList.js/master/classList.js)。为了使用这个函数，你需要传递一个元素和一个类名。因此，要再次使用具有 id 的元素`switchOff`，我们可以执行以下操作：

```
toggleClass( document.getElementById("switchOff"), 'lightsOut' ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T15:29:33.590

像这样的东西应该工作。

```
 function lightSwitch() {     

  var lightSwitch = document.getElementById("switchoff");

  if(lightSwitch.style.opacity != "0.2") //If the div is not 'off'
  {
     lightSwitch.style.opacity = '0.2'; //switch it 'off'
  }
  else
  {
     lightSwitch.style.opacity = '1.0'; // else switch it back 'on'      
  }
} 
```

# java - Tomcat进程阻止其他进程重新绑定到端口重启

> ID：10318744
> 
> 赞同：0
> 
> 时间：2012-04-25T15:25:25.177
> 
> 标签：java, servlets, network-programming

这有点复杂，可能属于其他一些 StackExchange 站点。

我们有一个 Tomcat Web 应用程序和一个“审计”应用程序。审计应用程序在自己的进程中运行，并侦听端口 60000 的 HTTP 请求。在正常情况下，Tomcat 通过 HTTP 将审计数据发送到审计进程。两个进程都在同一台主机上运行。

系统是CentOS 5.7，Tomcat是6.0.33版本。审计应用程序是一个 Flume Agent。

有时，我们的审计应用程序需要重新启动。当它这样做时，它通常会成功。

但是对于我们来说有些过于频繁了，当审计应用程序重新启动时，它会在端口 60000 上出现 BindException 失败。我们可以停止审计应用程序，确保它真的死了，然后重新启动它，但它总是失败。解决此问题的唯一方法是重新启动 Tomcat 服务器 - 不知何故，它阻止了审计应用程序侦听端口 60000。

当我们在审计应用程序关闭时执行“lsof”并在端口 60000 上查找数据时，我们得到：

```
java      13178    tomcat   47u     IPv6     34165085         TCP <hostname>:60000-><hostname>:60000 (ESTABLISHED) 
```

我们无法真正理解这个只写入 localhost:60000 的 Tomcat 进程是如何偶尔阻止其他应用程序监听 60000 端口的。

Web 应用程序正在使用 Java 中内置的默认 HTTP 连接缓存（如果可能相关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:44:26.207

我猜这与端口 60000 在“临时端口” [1](http://en.wikipedia.org/wiki/Ephemeral_port)范围内有关。也许您的 Tomcat Webapp 有时会以某种方式获取端口 60000，从而阻止另一个应用程序绑定到该端口。也许尝试为您的审计服务器使用不在临时范围内的端口？

# html - HTML CSS：将 3 个 div 和其中的元素对齐到底部

> ID：10318755
> 
> 赞同：2
> 
> 时间：2012-04-25T15:26:05.013
> 
> 标签：html, css

我目前在一个 HTML5 标题标签中排列了 3 个 div（左侧 - 一个搜索框，中心 - 一个徽标区域和右侧的 div - 用于社交媒体图标）。

这似乎很好，但是，我很难将这些 div 中的左右元素定位到底部，并且左右 div 都会受到徽标区域大小的影响。例如，如果我的徽标是 x 高度，那么随着徽标大小高度的增加，它会将左右 div 进一步向下推。

我写了一个简单的例子来说明我在说什么.. [http://jsfiddle.net/9patj/](http://jsfiddle.net/9patj/)

如果有人可以提供帮助，那将是非常棒的，也许在引导我了解它是如何实现的过程中获得奖励将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:43:06.707

您可以尝试在标题中进行相对/绝对定位。

对于 CSS，您可以尝试：

```
header { 
    margin: 0px 29px 29px 29px; 
    background: #CCC; 
    width:960px; 
    height: 160px;
    vertical-align: bottom; 
    display: table-cell; 
    position: relative; 
}

#search { 
    float:left; 
    width:215px; 
    background-color:red; 
    position: absolute; 
    bottom: 0px; 
    left: 0px; 
}

#social { 
    float:right; 
    width:215px; 
    background-color:yellow; 
    position: absolute; 
    bottom: 0px; 
    right: 0px; 
}

#logo { 
    float:center;  
    text-align:center; 
    position: absolute; 
    bottom: 0px; 
    left: 50%; 
} 
```

通过在标题上设置相对定位，您可以将其每个子元素设置为绝对定位。这将允许您将每个子元素放置在标题的底部。

重要的部分是**位置**CSS 标签和**left**、**right**和**bottom**标签。见[http://jsfiddle.net/9patj/10/](http://jsfiddle.net/9patj/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:46:11.557

像这样？

[http://jsfiddle.net/9patj/9/](http://jsfiddle.net/9patj/9/)

您必须添加职位。

# facebook - 创建后如何通过 feedID 访问个人 Facebook 提要

> ID：10318757
> 
> 赞同：0
> 
> 时间：2012-04-25T15:26:10.160
> 
> 标签：facebook, facebook-graph-api, restfb

我使用 facebook Graph API 从我自己的网站为 facebook 创建一个提要。它已成功创建并返回提要的 ID。

我的问题是，是否可以在 facebook 中创建指向此单个提要的链接，以便我网站上的用户可以直接单击并打开该提要？

我知道对于 twitter 和foursquare，这是可能的，因为我已经做到了。

谢谢你，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:32:09.097

我不确定是否有这样做的“图形方式”，但是您可以在给定用户 ID/用户名和帖子 ID（您拥有的）的情况下构建这样的 url：

> [http://www.facebook.com/USERNAME_OR_ID/posts/POST_ID](http://www.facebook.com/USERNAME_OR_ID/posts/POST_ID)

该网址应该将用户带到帖子。

* * *

# 编辑

[我收回它，这是使用FQL 流表](http://developers.facebook.com/docs/reference/fql/stream/)的“图形方式” ：

```
SELECT post_id, permalink
FROM stream
WHERE post_id = "USERID_POSTID" 
```

我不确定为什么 post_id 是由用户 id + '_' + post id 组成的，但这就是它的样子。你可以看到这样的用户帖子：

```
SELECT post_id, permalink
FROM stream
WHERE source_id = me() 
```

（[试试看](http://developers.facebook.com/tools/explorer?method=GET&path=fql?q%3DSELECT%20post_id,%20permalink%20FROM%20stream%20WHERE%20source_id%3Dme%28%29)）

# c# - 二进制上传 WCF 损坏的 .mov 文件

> ID：10318760
> 
> 赞同：2
> 
> 时间：2012-04-25T15:26:17.610
> 
> 标签：c#, .net, wcf-data-services, fiddler

我正在尝试从我的 Fiddle 调试器将视频文件 .mov 上传到远程 Web 服务以测试该服务，但存储在磁盘上的文件损坏了？有什么建议么？

请求标头

```
Content-Type: multipart/form-data; boundary=-------------------------acebdf13572468
User-Agent: Fiddler
Host: localhost:2487
Content-Length: 2113228 
```

请求正文

```
---------------------------acebdf13572468
Content-Disposition: form-data; name="IMG_0888.MOV"; filename="IMG_0888.MOV"
Content-Type: video/quicktime

<@INCLUDE *C:\Users\Amrit\Desktop\IMG_0888.MOV*@>
---------------------------acebdf13572468-- 
```

C# 代码

```
 FileStream fs = null;
            string UniqueId = this.GenerateUID();
            _fileDirectory = System.IO.Path.Combine(Constants._VideosDirectory,author_id);
            if (!Directory.Exists(_fileDirectory))
            {
                Directory.CreateDirectory(_fileDirectory);
            }
            string file = Path.Combine(_fileDirectory, "test.mov");
  //        string filePath = Path.Combine(uploadFolder, request.FileName);

            try
            {
                using (FileStream targetStream = new FileStream(file, FileMode.Create,
                                 FileAccess.Write, FileShare.None))
                {
                    //read from the input stream in 65000 byte chunks

                    const int bufferLen = 65000;
                    byte[] buffer = new byte[bufferLen];
                    int count = 0;
                    while ((count = request.Read(buffer, 0, bufferLen)) > 0)
                    {
                        // save to output stream
                        targetStream.Write(buffer, 0, count);
                    }
                    targetStream.Close();
                    return "done";
                    //sourceStream.Close();
                }
            }

            catch (Exception)
            {
                return "fail";
            }
            finally
            {

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:33:50.777

正如 Andras 指出的那样，您可能会将整个请求保存到磁盘而不仅仅是内容，但更有可能的是您将 unicode 字节顺序标记 (BOM) 保存到文件的开头（这是由某些人自动完成的.NET 流）。

您应该做的第一件事是检查保存文件的长度与原始文件的长度，新文件的长度可能会长约 3 个字节，这表明已添加 BOM。

要确认，请在十六进制编辑器中打开这两个文件并查看内容的外观，然后将其与您的源文件进行比较。比较两个十六进制文件时，您应该只查看前几个字符和最后几个字符（如果最后一个字符不同，则意味着您的流未完成并且您的文件被截断，如果第一个字符不同，则意味着您有一个 BOM随附的）。

您可能需要使用的是，`File.WriteBytes`而不是`FileStream`this 会阻止 BOM 被包含在内。

# iphone - Xcode：为什么我的计时器在每个滴答声上计数 2 秒？

> ID：10318761
> 
> 赞同：2
> 
> 时间：2012-04-25T15:26:23.307
> 
> 标签：iphone, ios, xcode, nstimer, countdown

嗨，我有一个计时器，应该在 iphone 应用程序中从 12:00 分钟到 0:00 计数！但是当它开始时，它是这样计数的；11:58 11:56 11:54 11:52

它在每个滴答声上计算 2 秒。

这是开始按钮代码中的代码：

```
tid.text=[NSString stringWithFormat:@"%d:%.2d",minuter,sekunder];
timer= [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(tidklick) userInfo:nil repeats:YES]; 
```

这是方法 tidklick：

```
-(void) tidklick
{

tiden -= 1;
sekunder = tiden % 60;
minuter= (tiden - sekunder) / 60;
tid.text=[NSString stringWithFormat:@"%d:%.2d",minuter,sekunder];

} 
```

这是开头的代码..

```
 int tiden=720;
 int sekunder;
 int minuter; 
```

这出现在我放入方法的 NSLog 中......

```
2012-04-26 06:41:38.562 Matte [288:f803] tiden: 719
sekunder: 59
 2012-04-26 06:41:38.607 Matte [288:f803] tiden: 718
 sekunder: 58
 2012-04-26 06:41:39.562 Matte[288:f803] tiden: 717
 sekunder: 57
 2012-04-26 06:41:39.607 Matte[288:f803] tiden: 716
  sekunder: 56
 2012-04-26 06:41:40.562 Matte [288:f803] tiden: 715
 sekunder: 55
 2012-04-26 06:41:40.607 Matte [288:f803] tiden: 714
 sekunder: 54 
```

我试图用新名称和新方法制作一个新计时器，但它仍然计为 2.. 这可能与我在屏幕上有很多按钮和东西的事实有关吗？一些内存错误？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:27:30.223

你的逻辑看起来不错。你确定你没有创建两次计时器吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T18:13:45.210

您的代码没有问题，请先尝试登录

那么你就会知道它是每 2 秒计数一次还是每 2 秒刷新一次 UI

```
-(void) tidklick
{

tiden -= 1;
sekunder = tiden % 60;
// add log here
NSLog(@"tiden: %d\n sekunder: %d",tiden,sekunder);

minuter= (tiden - sekunder) / 60;
tid.text=[NSString stringWithFormat:@"%d:%.2d",minuter,sekunder];

} 
```

您可以尝试在后台线程中运行计时器

```
[self performSelectorInBackground:@selector(schedule) withObject:nil];

- (void) schedule {
NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
NSRunLoop* runLoop = [NSRunLoop currentRunLoop];

timer = [[NSTimer scheduledTimerWithTimeInterval:1.0f
                                              target:self
                                    selector:@selector(run:)
                                    userInfo:nil
                                     repeats:YES]
     retain];

[runLoop run];
[pool release];
}

-(void) run:(id) sender{

// you should handle the thread-safe 
tiden -= 1;
sekunder = tiden % 60;
// add log here
NSLog(@"tiden: %d\n sekunder: %d",tiden,sekunder);
minuter= (tiden - sekunder) / 60;
NSString *test =[NSString stringWithFormat:@"%d:%.2d",minuter,sekunder];

[label performSelectorOnMainThread:@selector(setText:) withObject:test waitUntilDone:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:44:39.623

有时从 xcode 运行会使事情变得非常慢。如前所述，逻辑看起来不错。您可以尝试在手机上运行它，但不能从 xcode 运行。这也可能适用于模拟器。不过不确定。

# c++ - Bada，静态指针崩溃

> ID：10318764
> 
> 赞同：0
> 
> 时间：2012-04-25T15:26:28.440
> 
> 标签：c++, pointers, static, bada

我在 Bada 中遇到了一些静态指针和变量的问题。首先，我尝试创建单例类并做了这样的事情： 标题：

```
 static Session *getInstanceOf();
private:
    static Session *instance; 
```

资源：

```
Session* Session::getInstanceOf(){
    if (instance==NULL){
        instance=new Session();}
    return instance;
} 
```

但是应用程序崩溃了，没有任何错误消息。然后我尝试创建静态类字段并通过以下方式返回它：

```
ArrayList* User::GetUniv()
{
    return &Universities;
} 
```

但它有同样的结果。你知道为什么会这样吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:34:10.663

你可以这样做

```
ArrayList* User::GetUniv()
{
    static Universities;
    return &Universities;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:30:17.257

你`Session::instance`在你的实现文件中初始化吗？像这样：

```
Session* Session::instance = NULL; 
```

**编辑：**还要考虑[`static`初始化顺序 fiasco](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.14)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:32:59.170

这有点危险：

```
if (instance==NULL){
    instance=new Session();} 
```

因为您的实例似乎没有被初始化为 NULL。未初始化时，指针可能具有垃圾值。

# java - JSON对象排序

> ID：10318765
> 
> 赞同：0
> 
> 时间：2012-04-25T15:26:29.640
> 
> 标签：java, json

我有以下 JSON 对象，需要按字母顺序对对象进行排序。

```
JSON j = {"Peter" : {"list" : ["/classroom/Sam" , "/classroom/Tom" , "/classroom/Arc" , "/classroom/Jerry"], "type" : Response"}} 
```

最终目的是比较实际和预期的 json 对象。值相同，但值的顺序不同。因此需要在比较之前对实际对象和预期对象进行排序。

我需要排序`["/classroom/Sam" , "/classroom/Tom" , "/classroom/Arc" , "/classroom/Jerry"]`

# python - 使用 psycopg 插入两个连续的单引号

> ID：10318772
> 
> 赞同：0
> 
> 时间：2012-04-25T15:27:04.603
> 
> 标签：python, psycopg2

这似乎微不足道，但我无法在任何地方找到正确的答案。我需要使用 psycopg 在字段中插入两个单引号。意思是，要存储在列内的值是：`''`

无论我尝试什么，它要么最终被转义`\'\'`（当`''''`按照 Postgres 文档尝试作为输入时），要么出现错误。

任何建议，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:19:41.907

如果您确定要插入文字“''”，您甚至不需要绑定变量，只需编写正确的 SQL（请记住，文字单引号被“引用”为其中两个，即“' '”）。一个例子更容易理解：

```
curs.execute("INSERT INTO foo VALUES ('''''')") 
```

否则，您可以将两个引号分配给一个变量并让 psycopg 进行引用：

```
curs.execute("INSERT INTO foo VALUES (%s)", ("''",)) 
```

根据 cursor.execute 的要求，注意构成元组的额外括号和逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:49:44.370

参考[psycopg2 文档](http://packages.python.org/psycopg2/usage.html#query-parameters)

```
cursor.execute("INSERT INTO foo VALUES (%s)", ("''",)) 
```

# c# - OnStudentIDChanged 没有定义

> ID：10318775
> 
> 赞同：0
> 
> 时间：2012-04-25T15:27:08.547
> 
> 标签：c#, wpf, dependency-properties

在我的主窗口（错误的 MainWindow）中，我有一个在触发后获取值的方法，这适用于我的用户控件，但由于某种原因，当我在 MainWindow 上尝试此操作时，没有 OnStudentIDChanged 的​​定义。

```
 public static readonly DependencyProperty StudentIDProperty = DependencyProperty.Register("StudentID", typeof(String), typeof(LoginWindow), new PropertyMetadata(OnStudentIDChanged));

    public string StudentID
    {
        get { return (string)GetValue(StudentIDProperty); }
        set { SetValue(StudentIDProperty, value); }
    }

    static void OnStudentIDChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        (d as LoginWindow).OnStudentIDChanged(e); // OnStudentIDChanged no definition?
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:33:39.423

也许您的意图是投射`d`to`MainWindow`而不是`LoginWindow`?

```
static void OnStudentIDChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    (d as MainWindow).OnStudentIDChanged(e); 
} 
```

但这仍然是错误的，因为它是无限递归（从您之前的帖子中猜测）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:41:53.850

我在这里做了一些假设，但我猜它`static void OnStudentIDChanged`位于 MainWindow 中，对吗？

问题是您不能使用该类型的实例调用该类型的静态方法。例如

```
public class MyClass
{
   public static void SomeMethod();
}

var instance = new MyClass();
(instance as MyClass).SomeMethod() //THIS WILL NOT WORK 
```

同样，这是假设我正确理解了您的情况。

**d**在下一行中总是一个**LoginWindow**吗？

```
(d as LoginWindow).OnStudentIDChanged(e); 
```

# javascript - Webview - 通过 JS 接口启动服务。错误的上下文？

> ID：10318782
> 
> 赞同：2
> 
> 时间：2012-04-25T15:27:29.433
> 
> 标签：javascript, android, service, webview, android-context

这是我在这里的第一个问题，但我经常阅读这些很棒的建议。我的问题是 - 我在 WebView 中有一个包含所有本地文件的 HTML 应用程序。它工作正常。当我尝试通过 JS 接口调用服务时，就会出现问题。我的 JS 界面工作正常，并且可以使用 Toast 成功，但是当我尝试 startService(intent) 时应用程序崩溃。相同的 startService 在主 java 文件中工作正常。我认为问题在于上下文，但我不确定。显示的错误是：

```
04-25 21:09:55.923: W/dalvikvm(1516): threadid=9: thread exiting with uncaught exception (group=0x40015560)
04-25 21:10:20.033: E/AndroidRuntime(1516): FATAL EXCEPTION: WebViewCoreThread
04-25 21:10:20.033: E/AndroidRuntime(1516): java.lang.NullPointerException
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.content.ContextWrapper.startService(ContextWrapper.java:336)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at com.tour.giants.JavaScriptInterface.playMedia(JavaScriptInterface.java:40)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.webkit.WebViewCore.nativeTouchUp(Native Method)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.webkit.WebViewCore.nativeTouchUp(Native Method)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.webkit.WebViewCore.access$3300(WebViewCore.java:54)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1159)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.os.Looper.loop(Looper.java:123)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:630)
04-25 21:10:20.033: E/AndroidRuntime(1516):     at java.lang.Thread.run(Thread.java:1019)
04-25 21:10:20.103: I/Process(1516): Sending signal. PID: 1516 SIG: 9 
```

这是有问题的代码：

```
public class JavaScriptInterface extends Activity{
    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    public void playMedia(String mediaUrl) {

            //THIS WORKS!
        Toast.makeText(mContext, mediaUrl, Toast.LENGTH_SHORT).show();
        Intent intent = new Intent(mContext, MyService.class);

        // If this is AUDIO, play the audio in the background
        if(mediaUrl.endsWith(".mp3")){
            intent.putExtra("music_url", mediaUrl);
                    //THIS CRASHES!
            startService(intent);
        } 
    }
} 
```

最后，我通过使用几乎相同的代码拦截了一个链接，成功地从 WebView 启动了这项服务。

```
// Create Webview client to override browser rendering url and disable address bar
private class GWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // HTML5 Audio and Video give very mixed results.  Let Android handle media player

        Intent intent = new Intent(getBaseContext(), MyService.class);

        // If this is AUDIO, play the audio in the background
        else if(url.endsWith(".mp3")){   
            intent.putExtra("music_url", url);
            startService(intent);
        } 
        // This isn't a video or audio file - load normally
        else {
            view.loadUrl(url);
        }

        return true;
    }

} 
```

我尝试过使用不同的上下文，例如`getBaseContext()`等等`getApplicationContext()`......

# java - 拍照“onActivityResult”的问题

> ID：10318784
> 
> 赞同：3
> 
> 时间：2012-04-25T15:27:32.937
> 
> 标签：java, android

我的相机有问题，在很多情况下拍摄照片并将其带到 ImageView 时，会出错。

```
java.lang.RuntimeException: Unable to resume activity {co.com.xxxx.xxxx/xxxx.xxxx.screens.formularioScreen}:
 java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent
 { act=inline-data (has extras) }} to activity {xxxx.xxxx,screens/xxxx.xxxx.screens.formularioScreen}:
 java.lang.NullPointerException 
```

我的拍照代码如下：

```
 Button oButton = new Button(this);
    oButton.setText("take Photo");
    oButton.setOnClickListener(new OnClickListener() {              
        public void onClick(View v) {

            oImageActual = oView; //variable final = ImageView
            Intent intent =  new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent, TAKE_PICTURE);
        }                       
    });

//layout = container
layout.addView(oButton); 
```

我有 onActivityResult 方法

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == TAKE_PICTURE) {          
        if (data != null) {             
            if (data.hasExtra("data")) {
                oImageActual.setImageBitmap((Bitmap) data.getParcelableExtra("data"));
            }               
        }
    }
} 
```

如果我错过了一些尝试/捕捉或其他东西，但错误经常发生。

有任何想法吗？

* * *

错误仍然出现，有时它不会出现，而其他时候则如此。
尝试放置它 oneilse14 说，

```
oImageActual.setImageBitmap((Bitmap) data.getExtras().get("data")); 
```

但错误保持不变。任何人都知道为什么会发生这种情况或如何防止它？

* * *

一键启动相机

```
oButton.setText("Take photo");
oButton.setOnClickListener(new OnClickListener() {              
    public void onClick(View v) {       
        oImageActual = oView; //oImageActual ImageView is a final variable = new ImageVew(this);
        Intent intent =  new Intent(MediaStore.ACTION_IMAGE_CAPTURE);                           
        startActivityForResult(intent, TAKE_PICTURE);
    }                       
});
LinAyout.addView(oButton); 
```

这就是 onActivityResult。

```
/**
 * Al terminar la actividad de la camara, se ejecuta este metodo para continuar
 */
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);      
    if (requestCode == TAKE_PICTURE && (resultCode == Activity.RESULT_OK)) {            
        if (data != null) {         
            if (data.hasExtra("data")) {                
                oImageActual.setImageBitmap((Bitmap) data.getParcelableExtra("data"));
            }   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:58:38.663

调用`startActivityForResult(intent, TAKE_PICTURE);`您的 Activity 后进入后台。当您的设备需要更多资源用于 CameraActivity 时，您的非活动活动可能会被终止。因此，如果您的活动在进入后台之前有一些已初始化的变量，那么您应该准备好在活动返回前台后它们不会被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:19:45.270

不要调用 getParcelableExtra()，而是尝试使用

```
oImageActual.setImageBitmap((Bitmap) data.getExtras().get("data")); 
```

# android - 用于存储图像和文本并通过 ListView 显示的 Android 应用程序

> ID：10318788
> 
> 赞同：0
> 
> 时间：2012-04-25T15:27:39.943
> 
> 标签：android, image, sqlite, listview, android-listview

我正在制作一个需要在 ListView 中显示带有文本的图像的 Android 应用程序。我想知道使用 SQLite 数据库或手机存储的最佳方式是什么？不过，我更愿意使用 SQLite。我也很感激任何人可能有的任何例子，我环顾四周，由于我的要求非常具体，我没有发现任何非常相关的东西。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:30:49.283

这取决于这些图像是从哪里加载的，它们是由用户从图库中选择的吗？如果是这样，对我有用的只是将图像的路径存储在 SQLite 中，然后使用本文所述的 AsyncDrawables：

[http://developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

动态加载它们而不必担心内存不足。

# c# - 应如何配置声纳以使用 StyleCop 4.7

> ID：10318789
> 
> 赞同：0
> 
> 时间：2012-04-25T15:27:44.373
> 
> 标签：c#, sonarqube, stylecop, static-code-analysis

我正在尝试让声纳与 StyleCop 4.7 一起使用，但遇到了一些问题。

1) 当我在 Sonar 设置中设置 StyleCop 的位置时，Sonar 无法运行，因此我的 CI 构建失败。Sonar 似乎无法找到作为 StyleCop 4.7 的一部分编译的程序集

2) 我看不到获取 4.7 版本中可用但 4.4 中不可用的规则的方法。意思是，我想启用 4.7 版中可用的规则，但不显示为在声纳的质量配置文件中启用和优先级的选项。

我正在尝试对 C# 项目运行声纳分析，并且它使用默认版本的 c# 插件成功运行。我正在运行 Sonar 的 2.13.1 版本。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:17:38.667

对于您的第一个问题，如果您不提供日志文件的摘录，我将无法为您提供更多帮助。您还可以在调试模式 ('-X') 下运行分析，以便找到为 StyleCop 启动的确切命令，并尝试手动重新启动它以获取有关失败的更多信息。

对于第二个问题，在我们更新 StyleCop 插件之前，您可以使用[我们放在 Wiki 上的指南](http://docs.codehaus.org/display/SONAR/C-Sharp+custom+checks)在 Sonar 中添加缺失的规则。

# c# - 我可以选择检索作为 protobuf-net 或 NHibernate 中的对象的字段吗？

> ID：10318802
> 
> 赞同：2
> 
> 时间：2012-04-25T15:28:33.933
> 
> 标签：c#, fluent-nhibernate, client-server, protobuf-net

我通过以下方式有一个客户端服务器应用程序。

![在此处输入图像描述](../Images/9fe215f060ae2dbc1f0c04a08cdab555.png)

在域中，一些类有孩子的集合。有些孩子参考他们的父母。

的问题是，当向服务器请求子对象时，所有其他子对象都会随响应返回。在许多情况下，从子级访问父级对象是非常有帮助的，我宁愿不必为父级单独请求，因为这会导致更多的往返行程。

通常 Nhibernates 延迟加载会处理这个问题，但是与 protobuf-net（或任何其他序列化）的交互意味着所有字段都可以访问以进行序列化。客户端无法直接访问数据库。

是否可以限制 protobuf-net 或 Nhibernate 中的对象引用深度，以便我可以在对服务器的请求中包含一个标志，表示不要加载超过 2 个对象的深度。

例如订单 - 订单项目 - 交货信息。

一个订单请求的限制将意味着不加载交付信息。限制为 0 意味着不加载订单项。

或者，是否可以选择性地停止加载引用（限制为 0 或无限制），这更具限制性，但可能更可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:54:47.420

protobuf-net 支持 ShouldSerialize* 模式（与多个 BCL 实现相同，包括 IDE/PropertyGrid 和 XmlSerializer）。

如果你有：

```
[ProtoMember(1)]
public int Whatever { get; set; } 
```

和一个对应的：

```
public bool ShouldSerializeWhatever() {
    ...
} 
```

然后，仅当 ShouldSerializeWhatever 返回 true 时才会序列化任何内容。这种模式完全基于名称。该方法可以是公共的或非公共的（但 XmlSerializer 只接受公共方法，因此如果您使用多个序列化程序，请保持它是公共的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:37:24.540

好吧，首先，这与 protobuf-net 没有任何关系，因为它只是序列化器，只是序列化你给它的东西，所以你只需要给它 2 层深度。

这一切都将在您的逻辑中完成。我假设您正在做的是序列化从休眠状态中出来的实际对象。您可能想要做的是[引入](http://martinfowler.com/eaaCatalog/dataTransferObject.html)将用作服务响应的 DTO，并将数据从您的对象复制到 DTO，从而只允许您深入 2 级。

将数据复制到 DTO 可能很乏味，并且有像[AutoMapper](https://github.com/AutoMapper/AutoMapper)这样的项目旨在让您的生活在这方面更简单，但我不确定您对映射的控制程度，您只能指定 2 个级别的深度，所以可能需要手动映射。

# spring-mvc - 如何在控制器中分解模型？

> ID：10318803
> 
> 赞同：3
> 
> 时间：2012-04-25T15:28:42.710
> 
> 标签：spring-mvc, model, controller, autowired, factorization

使用 Spring MVC，有没有办法分解`org.springframework.ui.Model`，以便不必在任何控制器的方法参数中指定它？

换句话说，我目前正在这样做：

```
public abstract class AbstractController {

    @Autowired
    protected MultipartHttpServletRequest request;

}

@Controller
public class SigninController extends AbstractController {

    @RequestMapping(value = "/signin", method = RequestMethod.GET)
    public String signin(@ModelAttribute User user, Model model) {
        // do stuff with user (parameter)
        // do stuff with model (parameter) <--
        // do stuff with request (attribute)
        return "/signin/index";
    }

} 
```

我想这样做：

```
public abstract class AbstractController {

    @Autowired
    protected MultipartHttpServletRequest request;

    @Autowired
    protected Model model;

}

@Controller
public class SigninController extends AbstractController {

    @RequestMapping(value = "/signin", method = RequestMethod.GET)
    public String signin(@ModelAttribute User user) {
        // do stuff with user (parameter)
        // do stuff with model (attribute) <--
        // do stuff with request (attribute)
        return "/signin/index";
    }

} 
```

但是在调用 URL 时，会抛出异常：

```
...Could not autowire field: protected org.springframework.ui.Model...
...No matching bean of type [org.springframework.ui.Model] found for dependency... 
```

我在使用时遇到了同样的错误`org.springframework.ui.ModelMap`。

有什么天才的解决方法吗？

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:55:46.340

我终于找到了解决方案。我不确定这款游戏是否值得，但它有效:)

首先，将这些内容添加到您的`AbstractController`:

```
public abstract class AbstractController {

    @Autowired
    protected MultipartHttpServletRequest request;

    protected ModelMap model;

    public void setModel(ModelMap model) {
        this.model = model;
    }

    public ModelMap getModel() {
        return model;
    }

} 
```

然后，创建一个`org.springframework.web.servlet.HandlerInterceptor`像这样实现的拦截器：

```
public class UserContextInterceptor implements HandlerInterceptor {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws ServletException {
        if (handler instanceof AbstractController) {
            AbstractController controller = (AbstractController) handler;
            controller.setModel(new ModelMap());
        }
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) {
        if (handler instanceof AbstractController && modelAndView != null) {
            AbstractController controller = (AbstractController) handler;
            modelAndView.addAllObjects(controller.getModel());
        }
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
    }

} 
```

最后，将这些行添加到您的`applicationContext.xml`：

```
<mvc:interceptors>
    <bean class="path.to.my.just.created.UserContextInterceptor" />
</mvc:interceptors> 
```

当然，让你的控制器实现你的`AbstractController`.

这里是！您不再需要在控制器方法参数中指定 your`request`或 your`model`了:) 虽然我并不真正相信这个技巧的有用性，但是是的。如果它能让疯狂的开发者更快乐:)

不过，仍然对*更简单*的解决方案持开放态度。

# regex - 将正则表达式从 BBdit 转换为 php

> ID：10318805
> 
> 赞同：0
> 
> 时间：2012-04-25T15:28:47.973
> 
> 标签：regex

我正在使用 bbedit 来“测试”使用正则表达式从网页中提取一些数据。

这在 bbedit 中效果很好，但是我想使用 cUrl 下载页面本身，然后使用 php 来执行匹配/提取，而不是 bbedit。

不幸的是，虽然我不太了解 php 库。哪一个更容易学习/使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:32:39.507

我建议你看一下[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)它而不是正则表达式，它对于从 HTML 页面中提取信息非常有用......

而且对于cURL，[文档也很不错](http://www.php.net/manual/en/curl.examples-basic.php)

# c# - 使用 WordPress WP_Query 使用 C# 进行自定义查询

> ID：10318806
> 
> 赞同：0
> 
> 时间：2012-04-25T15:28:51.433
> 
> 标签：c#, php, api, wordpress

有什么方法可以利用 wp_query api 对 Wordpress 进行自定义查询。我们主要是一个 .NET 公司，但网络营销团队使用 wordpress。我们想利用 API Wordpress 来获取帖子并将它们放置在我们的 Intranet 中。我已经能够成功地利用 XML-RPC 标准 API，但它并没有得到我们需要的一切，而且非常有限。

我在 C# 上找到了很多带有 ONE 函数和 Phalanger 的 php 脚本，但我需要的是能够

1.) 在不更改文件的情况下访问已经存在的 query.php 文件 2.) 在每个函数的基础上通过 C# 访问文件中的函数，因为该文件中有许多函数。我找到了很多关于如何使用 GET 和 POST 访问函数的代码，但这似乎只有在被访问的文件中有一个函数时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:07:42.100

如果您只想将 WP 内容转储到您的 Intranet，我只需获取 SQL 并用它做您想做的事情，如果没有，并且您想持续访问 WP 帖子/页面数据，我会建议一个 REST api。

您可以使用这个插件，只需使用 CURL 请求查询整个数据集，这将返回一些 JSON，您可以随心所欲地做任何事情。

[http://wordpress.org/extend/plugins/json-api/](http://wordpress.org/extend/plugins/json-api/)

# c# - 具有动态列的列表视图

> ID：10318807
> 
> 赞同：0
> 
> 时间：2012-04-25T15:28:54.247
> 
> 标签：c#, asp.net, listview, dynamic

我需要一个适应数据源并动态创建文本框控件的列表视图。

背景：我上传了一个 excel 文件，将其转换为数据表，显示上传的值，允许通过文本框进行编辑，最后将其插入数据库。

数据源将始终是数据表，但列数会因 Excel 文件而异。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:35:02.227

这对于常规列表视图控件是不可能的。好吧，至少我不知道这种可能性。恐怕您需要自己创建一个满足您要求的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:38:41.727

您可以尝试使用 DataGrid。

在 Windows 窗体中：

```
dataGrid.DataSource = yourDataTable; 
```

在 WPF 中：

```
dataGrid.ItemsSource = yourDataTable.AsEnumerable(); 
```

# java - 如何在 Java 的抽象类中强制实现嵌套抽象类？

> ID：10318808
> 
> 赞同：1
> 
> 时间：2012-04-25T15:28:55.273
> 
> 标签：java, class, nested, abstract

我是 Java 新手，但习惯于 OOP 编程。有没有一种方法可以强制实现嵌套到另一个抽象类中的抽象类，如下面的代码：

```
public abstract class A
{

    public abstract class B extends C
    {
        @Override
        public abstract void foo();

    }

} 
```

我希望 B 在 A 的每个子类中实现。有可能吗？

谢谢您的帮助，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:39:10.303

如果我正确阅读了您的问题，您希望 A 的每个子类都包含 B 的子类，那么没有直接的方法可以做到这一点。但是，您可以执行以下操作：

```
public abstract class A
{

  public abstract class B extends C
  {
      @Override
      public abstract void foo();
   }

   protected abstract B getBInstance();
} 
```

因为这会强制 A 的子类返回 B 的实例，所以它们必须能够访问 B 的某个子类。

但是，您应该真正问自己为什么 A 应该关心其实现 B 的子类，除非 A 以某种需要上述方式的方式使用 B。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:31:05.470

是的，创建`B`一个接口，如[*抽象类实现接口时*](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:38:50.097

这是不可能的。A 类应该只提供 A 的实例具有的行为（通过抽象或实现的方法）。它不应该说明 A 是如何实现的。

甚至不清楚这将如何有用，因为您无法调用已实现的类 B，因此需要将其命名为其他名称，这意味着可以忽略它的存在。

# heroku - 我如何知道我在 Heroku 上使用了多少个工人测功机？

> ID：10318815
> 
> 赞同：3
> 
> 时间：2012-04-25T15:29:29.450
> 
> 标签：heroku, worker, hirefire

我正在使用 HireFireApp 在 Heroku 上自动缩放我的网络和工作人员测功机。但是，当我导航到我的应用程序上的 Resque 应用程序时，它说

“46 名工人中的 0 名正在工作”

这是否意味着我正在使用 46 个工人测功机？？？

更新：

运行 heroku ps 显示：

```
web.1     up for 21m       bundle exec thin start -p $PORT       
worker.1  starting for 1s  bundle exec rake resque:work QUEUE.. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:38:44.757

从您的 heroku 应用程序的命令行查看输出

`heroku ps`

这将向您显示您正在运行多少工人。

# php - 如何通过 URL 从 Flex HttpService 向 PHP 发送参数

> ID：10318819
> 
> 赞同：1
> 
> 时间：2012-04-25T15:29:48.967
> 
> 标签：php, apache-flex, flex4, flash-builder, httpservice

如果这已经得到回答/非常基本/问题措辞不正确，请原谅我，我对此很陌生并且正在苦苦挣扎。

基本上我有生成 XML 的后端 PHP，然后闪存生成器继承数据。我遇到困难的地方是了解 Flash 构建器如何通过 HttpService 向 PHP 发送参数，例如

这是它目前的解释：

```
http://..../file.php?action=getitems 
```

我希望 flash builder 发送的是

```
&class=fruit (<- the class would be dependant on what is selected from the drop down in the application) 
```

整体创建这个字符串

```
http://..../file.php?action=getitems&class=fruit 
```

如果这是胡说八道，谢谢并道歉。我正在使用 Flash Builder 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:03:09.667

总的来说，我会使用 push 方法而不是传递变量，从而减少从中间被黑客入侵的机会。

我的 http 调用的 AS3 代码：

```
 public function someRequest() : void
    {
        var service : HTTPService = new HTTPService();
        service.url = "http://localhost/getData.php";
        service.useProxy = false;
        service.method = "POST";
        service.contentType = "application/xml";    // Pass XML data.
        service.request = "<ID>somevalue</ID>";     // The XML data.
        service.resultFormat = "xml";               // Recieve XML data.
        service.addEventListener(ResultEvent.RESULT, createFields);
        service.addEventListener(FaultEvent.FAULT, handleFault);
        service.send();
    }

    private function createFields(event : ResultEvent) : void
    {
        var result : String = event.result.toString();
        returnData = XML(result);
    }

    private function handleFault(event : FaultEvent) : void
    {
        var faultstring : String = event.fault.faultString;
        Alert.show(faultstring);
    } 
```

正如您在中间看到的，有一个用于输入变量的 XML 空间。我使用这种方法从 PHP 到 AS3 来回传递数据。

PHP 是：

```
<?php

define("DATABASE_SERVER", "localhost");
define("DATABASE_USERNAME", "root");
define("DATABASE_PASSWORD", "**");
define("DATABASE_NAME", "dbName");

//connect to the database.
$mysql = mysql_connect(DATABASE_SERVER, DATABASE_USERNAME, DATABASE_PASSWORD);

mysql_select_db(DATABASE_NAME);

$Query  = "SELECT * from data WHERE employeeID = '" . ($_POST['ID']) . "'";
$Result = mysql_query($Query);

$Return = "<data>";

while ($User = mysql_fetch_object($Result))
{
    $Return .= "<user><userid>" . $User->userid . "</userid><username>" . $User->username . "</username><emailaddress>" . $User->emailaddress . "</emailaddress></user>";
}
$Return .= "</data>";
mysql_free_result($Result);
print ($Return)
?> 
```

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:30:46.237

这实际上在 Flex 中相当简单......

```
var service : HTTPService = new HTTPService();
service.url = "http://localhost/getData.php";
service.method = "POST";

var parameters:Object = new Object();
parameters["action"] = "getitems";
parameters["class"] = "fruit";

service.send(parameters); 
```

... 完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:53:48.923

我通常通过 [POST] 而不是 [GET] 来处理这个

在您的动作脚本功能中：

```
private function sendRequest():void {
var obj:Object = new Object();
obj.action="getitems";
obj.class="fruit";

myService.send(obj); 
```

你的 httpService

```
<s:HTTPService id='myService' url='urlToYourPHP' method='POST' result='yourResultHandler' fault='yourFaultHandler' resultFormat='XML'/> 
```

正如 powelljf3 所说，POST 比 GET 更安全，尽管它仍然可以访问。

# xcode - 移动 XCode 位置会破坏通过 MonoDevelop 进行的 Monotouch 编译

> ID：10318825
> 
> 赞同：2
> 
> 时间：2012-04-25T15:30:12.797
> 
> 标签：xcode, xamarin.ios, monodevelop

[与 App Store](https://stackoverflow.com/questions/9326683/monotouch-and-xcode-4-3-from-the-app-store)中的 MonoTouch 和 Xcode 4.3 中描述的问题类似。我将 XCode 移动到不同的位置并得到：

```
The Apple iPhone SDK is not installed. 
```

我试图通过“MonoDevelop -> Preferences -> SDK Locations -> Apple SDK”将 MonoDevelop 指向新位置，当我浏览到 XCode.app 时 GUI 显示成功，新路径没有保存，我继续收到错误。

我还尝试将其移回“/Applications/”，但同样，该设置并未采用 MonoDevelop，尽管 GUI 显示它已成功在默认位置找到 Apple SDK。

请注意，我目前正在运行 MonoDevelop 版本 2.8.8.4。

有什么建议么？[我应该按照 App Store 的 MonoTouch 和 Xcode 4.3 中的](https://stackoverflow.com/questions/9326683/monotouch-and-xcode-4-3-from-the-app-store)建议降级到 2.8.6.5 Beta吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:10:11.263

为了其他遇到相同问题的用户的利益而回答。@poupou 上面的建议（对我原来的问题的评论）对我有用。只需*“确保在更改其 SDK 位置后重新启动 MonoDevelop。”*

# android - Android List + Adapter 仅显示第一个条目

> ID：10318826
> 
> 赞同：2
> 
> 时间：2012-04-25T15:30:13.727
> 
> 标签：android, android-layout, android-listview, android-arrayadapter

所以我制作了一个自定义 ArrayAdapter 来填充我的列表，它只是覆盖了 getView(int position, View v, ViewGroup parent)。

如果我这样使用它：

```
public class MyActivity extends ListActivity {
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(adapter);
  }
} 
```

一切正常，我的列表正确显示所有条目。

现在，如果我尝试在 XML 布局中的 <ListView/> 上使用相同的适配器类，如下所示：

```
ListView lv = (ListView) v.findViewById(R.id.list);
MyAdapter a = new MyAdapter (lv.getContext(), R.layout.list_item, entries);
lv.setAdapter(a); 
```

它仅显示列表的第一个条目。

我已经尝试使用 adapter.add(entry.get(i)); 手动添加项目；并调用 adapter.notifyDataSetChanged(); 之后没有帮助。

e：这是 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:padding="1dp">

    <TextView
        android:id="@+id/bc_path"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceSmall"/>

    <TextView
        android:id="@+id/bc_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:background="@drawable/title_gradient"/>

    <TextView
        android:id="@+id/bc_genre"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:background="@drawable/location_gradient"
        android:textColor="#ffffff"/>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="0.4"
        android:layout_marginTop="3dp"
        android:layout_marginBottom="3dp">
        <ImageButton 
            android:id="@+id/bc_homepage"
            android:src="@drawable/homepage"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight=".1"
            android:padding="0dp"
            android:onClick="loadWebsite"
            android:background="@drawable/black_button"
            android:layout_margin="2dp"
            />
        <ImageButton 
            android:id="@+id/bc_facebook"
            android:src="@drawable/facebook"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight=".1"
            android:padding="0dp"
            android:onClick="loadWebsite"
            android:background="@drawable/black_button"
            android:layout_margin="2dp"
            />
        <ImageButton 
            android:id="@+id/bc_myspace"
            android:src="@drawable/myspace"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight=".1"
            android:padding="0dp"
            android:onClick="loadWebsite"
            android:background="@drawable/black_button"
            android:layout_margin="2dp"
            />
        <ImageButton 
            android:id="@+id/bc_fav"
            android:src="@drawable/d_attends"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight=".1"
            android:padding="0dp"
            android:onClick="favBand"
            android:background="@drawable/black_button"
            android:layout_margin="2dp"
            />
    </LinearLayout>

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T15:31:00.253

I think you should not use ListView inside your scrollView as ListView inbuilt provides scrolling feature. In the above code , your ListView is coming at the bottom due to vertically adding all views inside Linear Layout so as root is ScrollView, List view's auto scroll view option is not able to show you all entries. Just give a thought for this and try adding ListView outside ScrollView.

# c# - 仅在数据库中插入时是否必须使用断开连接的方法？

> ID：10318835
> 
> 赞同：0
> 
> 时间：2012-04-25T15:30:37.347
> 
> 标签：c#, asp.net, ms-access

我们需要在 ASP.NET 中创建一个带有数据库 (accdb) 的小型网站。该数据库只会在运行时添加记录（收集调查数据）。我们的老师更喜欢对任何数据库使用 DataSets（断开连接的方法），但对于这样一个小网站来说，这太过分了。这就是为什么我想知道，是否有任何理由不使用连接方法（DataReader）？仅插入时会发生任何并发错误吗？

换句话说：连接或断开连接的方法是什么时候只插入到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:47:38.457

技术答案是“否”，因为断开连接的方法对插入操作没有意义。

# xsd - 如何将xsd的库（多个xsd）转换为ecore（EMF）

> ID：10318840
> 
> 赞同：0
> 
> 时间：2012-04-25T15:30:49.820
> 
> 标签：xsd, eclipse-emf, eclipse-emf-ecore

如何将xsd的库（多个xsd）转换为ecore（EMF）

在 XML Schema 导入期间，当我浏览模型 URI 的文件系统时，Eclipse 让我选择一次选择一个 xsd，如果我有多个 XSD 怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:30:09.640

在 Juno 中，浏览工作区时，您可以在 EMF 项目向导中选择多个 xsd。因此，如果文件系统浏览器中的行为不同，则应首先在工作区中创建一个包含 xsd 的项目。

# jquery-mobile - jQuery移动选择下拉菜单，删除所选项目

> ID：10318846
> 
> 赞同：0
> 
> 时间：2012-04-25T15:31:08.627
> 
> 标签：jquery-mobile, drop-down-menu, cordova

我有选择下拉菜单（非本地），我可能只有一个选项。当下拉列表相互依赖时会出现问题，因为当我从下拉列表中选择一个时，以后无法将其删除。

我想要的是类似于使用（同样非本机）多选下拉菜单时所获得的功能。我尝试在下拉菜单旁边放置一个按钮，但没有成功。

任何有类似问题经验的人？

谢谢！

编辑：

```
<div data-role="fieldcontain" style="display: none;" id="subSubSubDiv">
    <select name="sub_sub_category" id="sub_sub_sub_category" data-native-menu="false" tabindex="-1">
    </select>
</div> 
```

# c# - StreamWriter 错误字符

> ID：10318850
> 
> 赞同：2
> 
> 时间：2012-04-25T15:31:20.850
> 
> 标签：c#

有一个问题，即 streamwriter 在我正在生成的 csv 中生成错误字符。字符**ï»¿**仅出现在文件的开头：

```
ï»¿5,"GEN",555555555,,"Evan","Smith",,,,,,,,,,,,,,,,,,,,,,,,,"email@someplace.com"
5,"GEN",555555555,,"Dorathy","Smith",,,,,,,,,,,,,,,,,,,,,,,,,"email@someplace.com"
5,"GEN",555555555,,"Marvin","Smith",,,,,,,,,,,,,,,,,,,,,,,,,"email@someplace.com"
.... 
```

在我看来像一个编码问题。我尝试了不同的编码以及一个正则表达式来清理字符串，但运气不佳。这是预览代码（虽然它并不复杂）。它也作为 Web 进程运行。

```
string fileName = includeEmail == false ? "attachment; filename=stuacct_batch.txt" : "attachment; filename=rentals.csv";
Context.Response.Clear();
Context.Response.AddHeader("content-disposition", fileName);
Context.Response.ContentType = includeEmail == false ? "text/plain" : "text/csv";

using (StreamWriter sw = new StreamWriter(Response.OutputStream, Encoding.UTF8))
{   
    string line = "";
    foreach (Student s in students)
    {
        // ... some logic above that that's misc. to this problem 
        line = "5,\"GEN\"," + s.StudentNumber + ",,\"" + s.FirstName + "\",\"" + s.LastName + "\",,,,,,,,,,,,,,,,,,,,,,,,,\"" + s.Email + "\"";
        sw.WriteLine(line);
    }
}

Context.Response.End();
Context.Response.Flush();
Context.ApplicationInstance.CompleteRequest(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T15:42:49.533

您已指定要对流使用 UTF-8 编码，并且这些初始字节是有效的 UTF-8 字节顺序标记 (BOM)。问题显然是您的查看器/编辑器没有正确解码 UTF-8 流。如果只有 BOM 是问题，并且您想创建没有 BOM 的流，您可以创建自己的[`UTF8Encoding`](http://msdn.microsoft.com/en-us/library/s064f8w2.aspx)类实例：

```
var encoding = new UTF8Encoding(encoderShouldEmitUTF8Identifier: false);
using (StreamWriter sw = new StreamWriter(Response.OutputStream, encoding)) ... 
```

如果您真的想使用 ASCII 数据，您应该使用该编码：

```
using (StreamWriter sw = new StreamWriter(Response.OutputStream, Encoding.ASCII)) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:32:58.883

这些可能是指定文件是 unicode 而不是 ansi 的字符。

您是否在文本编辑器中将文件作为 ANSI 文件打开？如果是这样，这就是你看到角色的原因。尝试以 unicode 格式打开它，或者将您的编码设置为非 unicode。

# django - 如何将 Django-MPTT 与多棵树一起使用？

> ID：10318852
> 
> 赞同：0
> 
> 时间：2012-04-25T15:31:32.697
> 
> 标签：django, binary-tree, django-mptt

我打算将 Django MPTT 与多租户架构一起使用，因此会有很多站点主页，并且我不希望`page`每次用户更改其页面位置时都必须重建整个表的 mptt 字段`About Us`。我宁愿只重建那个用户的网站。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:44:20.583

只需为每棵树使用不同的`tree_id`值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-02T00:06:30.607

我试过了，我将第二棵树加载到同一张表中。一方面，Django MPTT 将新的 tree_id 赋予新的树枝。所以这样看来，它似乎奏效了。另一方面，现在节点的名称不会使用来自 Django MPTT 站点的模板显示。（我附上一个屏幕截图。）当表格中只有一棵树时，模板工作得很好。我没有更改任何代码等，我只是在表中放了第二棵树，然后就可以了！清单上没有名字。[![在此处输入图像描述](../Images/26cb68904554b5f7c66d284d7cddff73.png)](https://i.stack.imgur.com/LLj7h.png)

树的结构看起来是一样的。当我访问另一棵树时，我也没有得到名字，我可以访问它，除了没有名字。

这是模型定义：

```
class EbayCategory(MPTTModel):
    iCategoryID     = models.PositiveIntegerField( 'ebay category number',
                        db_index=True )
    name            = models.CharField(
                        'ebay category description', max_length = 50 )
    iLevel          = models.PositiveSmallIntegerField(
                        'ebay level (top is 1, lower levels are bigger numbers)' )
    iParentID       = models.PositiveIntegerField( 'ebay parent category' )
    bLeafCategory   = models.BooleanField( 'leaf category?' )
    iTreeVersion    = models.PositiveSmallIntegerField( 
                        'category tree version' )
    iMarket         = models.ForeignKey( Market, verbose_name = 'ebay market' )
    iSupercededBy   = models.PositiveIntegerField(
                        'superceded by this ebay category', null = True )
    parent          = TreeForeignKey( 'self',
                        null=True, blank=True, related_name='children',
                        db_index=True)

    def __str__(self):
        return self.name

    class Meta():
        verbose_name_plural = 'ebay categories'
        db_table        = 'ebay_categories'
        unique_together = ('iCategoryID', 'iMarket',)

    class MPTTMeta:
        order_insertion_by = ['name'] 
```

除了 parent 之外的所有列都来自 ebay API。

此时，我没有已被取代的类别，因此 iSupercededBy 列对于所有行都是空的。我还没有经历过 ebay 目录列表更新，所以每个市场的所有行都是相同的 ebay 树版本（当前版本）。

该视图按市场和 ebay 树版本选择（两个值都来自市场表）：

```
def show_ebay_categories(request, sMarket):
    iMarket = Market.objects.get( cMarket = sMarket.upper() )
    context = { 'nodes':EbayCategory.objects.filter(
        iMarket = iMarket, iTreeVersion = iMarket.iCategoryVer ) }
    return render(request, 'ebaycategories/ebay_categories.html', context) 
```

对添加第二棵树之前的数据库副本运行相同的代码，名称会显示出来。

[![ebay 类别——今天，在添加第二棵树之前使用数据库副本](../Images/0a6b29e71e38014dd900dda5da278395.png)](https://i.stack.imgur.com/dWd2q.png)

似乎添加第二棵树以重建无法修复的方式损坏了表。我删除了第二棵树。还是没有名字。我重建了树：

[如何重建我的 django-mptt 树？](https://stackoverflow.com/questions/5541432/how-do-i-rebuild-my-django-mptt-tree)

还是没有名字。我截断了表格，然后重新上传了第一棵树（ebay USA 类别）。还是没有名字。我再次重建了这棵树。还是没有名字。

工作原理：在导入数据时向每个类别列表（树）添加一个根节点。（从ebay下载的数据不包括根节点，）

[![具有根节点的 ebay 类别](../Images/740097e6b475c21ec64e4a211e3d3f93.png)](https://i.stack.imgur.com/eA1A2.png)

请注意列表顶部的“EBAY-US 版本 117 Root”。

我在将第二棵树导入同一个表之后生成了列表。所以是的，它可以工作。

# subdomain - 对子域的图像使用相对/绝对路径

> ID：10318855
> 
> 赞同：0
> 
> 时间：2012-04-25T15:31:38.557
> 
> 标签：subdomain

这是一个新手问题，我知道，但我找不到明确的答案。

我的网络根目录如下所示：

/index.html

/img

我设置了子域 img.my-domain.com，它指向 /img 文件夹

现在，在我的 index.html 中，我调用位于子域中的图像，即文件夹 img

我可以使用相对路径和绝对路径来做到这一点，两者都在工作：

src="/img/image.jpg"

src="http://img.my-domain.com/image.jpg"

我的问题是：有什么区别吗？在并行下载概念的背景下，浏览器是否会在这两种情况下将图像视为来自子域？

我有很多图像，并希望从 2 个子域为它们提供服务。但是我在本地开发，当网站上线时，我必须将图像链接从相对更改为绝对，以防需要绝对路径。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:31:28.260

不，没有，但相对路径是常见的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:31:31.460

## src="/img/image.jpg"

将为 www.my-domain.com 发送 cookie。不会显示为单独的域。

## src="http://img.my-domain.com/image.jpg"

会有单独的cookies。许多网站这样做是为了提高性能。

您应该真正使用相关协议，因此如果您需要 SSL，您将不会收到警告。`src="//img.my-domain.com/image.jpg"`

# c# - Console.Read 被忽略

> ID：10318857
> 
> 赞同：10
> 
> 时间：2012-04-25T15:31:44.367
> 
> 标签：c#

我是 C# 语言的新手，并且刚刚开始学习它以便在 XNA Game Studio for X-box 上使用它。

我对 Java 和 C++ 有一些小经验，所以我不是一个完全的菜鸟。这正是为什么这个问题让我如此沮丧的原因。

我创建了一个简单的代码，旨在添加用户输入的两个数字。非常简单的东西，但对于我感觉的任何新语言来说都是一个很好的第一步。

我已经声明了我的变量，并试图使用 Console.Read() 从用户那里获取要添加的数字。到目前为止，代码输出了我想要的消息，然后停止并读取用户的单个输入。在那之后，它就乱了。控制台输出下一条消息，读取一些随机数（无输入），然后将它们加在一起并立即输出。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Add
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Please enter the first number to add: ");
            int firstNumber = Console.Read();

            Console.WriteLine("Please enter the second number to add: ");
            int secondNumber = Console.Read();

            int Sum = firstNumber + secondNumber;
            Console.WriteLine("The total of the two numbers is: " + Sum);

        }
    }
} 
```

样品运行：

请输入要添加的第一个数字：

2

请输入要添加的第二个数字：

这两个数字的总和是：63

* * *

请输入要添加的第一个数字：

3

请输入要添加的第二个数字：

这两个数字的总和是：64

* * *

就这样继续下去，就好像 secondNumber 是 61。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T15:34:31.583

这是因为它正在从控制台读取下一个字符，然后将其转换`int`为 ASCII 值，而不是数值。所以输入 2 将被解释为字符 '2'，ascii 代码为 50。试试这个：

```
int firstNumber = Int32.Parse(Console.ReadLine()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T15:35:00.717

`Console.Read`读取单个*字符*。因此，当您输入“2”并按 Enter 时，您将提供 (1) 字符“2”，其 ASCII 值为 50，然后提供 (2) 回车字符，其 ASCII 值为 13。这些是... 63。:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T15:41:02.473

除了 Gareth 所说的之外，也许 MSDN 信息会向您*解释为什么*它不等待您在第二个 Console.Read() 方法上的输入：

[Console.Read()](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)

> 当您键入输入字符时，Read 方法会阻止其返回；当您按下 Enter 键时，它会终止。按 Enter 会在您的输入中附加一个依赖于平台的行终止序列（例如，Windows 会附加一个回车换行序列）。**对 Read 方法的后续调用一次检索一个字符。检索到最后一个字符后，Read 再次阻止其返回并重复循环。**

因此，在您的第一次 Read() 中，它很高兴允许您输入任何您想要的内容*，直到您按 Enter*

然后，它到达第二个 Console.Read() 并说：“嘿，我已经有了第一个 Console.Read() 中的那些字符要通过。恰好第二个是空格（回车）”并将该空白 ASCII 值分配给 secondNumber。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T15:39:02.660

问题是[Console.Read()](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)读取第一个 Return 按键并将其发送到第二个 Console.Read() 调用。您的代码应该改用[ReadLine()](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)并且看起来像这样：

```
Console.WriteLine("Please enter the first number to add: ");
int firstNumber = Convert.ToInt32(Console.ReadLine());

Console.WriteLine("Please enter the second number to add: ");
int secondNumber = Convert.ToInt32(Console.ReadLine()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T15:43:46.270

Console.Read 从输入块中读取单个字符。如果您输入一个数字，然后按回车键，它将读取回车键，或您输入的第一个数字的下一个数字。

您可能希望改用 Console.ReadLine。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T15:34:21.437

我想你想要[Console.ReadLine()](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T15:34:29.497

你应该试试 Console.ReadLine();

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-25T15:35:19.587

您可能不希望 ReadLine 读取，因为 Read 需要流中的下一个字符，但 ReadLine 将等待用户按 Enter。

如果您的用户第一次键入 34，这将导致错误，因为 firstNumber 等于 3 而不是 34。

# facebook - 无法同时在 Facebook 页面上发布操作和分享

> ID：10318859
> 
> 赞同：2
> 
> 时间：2012-04-25T15:31:50.837
> 
> 标签：facebook, json, facebook-opengraph

几天前，我们推出了 Facebook 时间线集成。除了用户的反馈，我还有一个问题。这真是太神奇了，但这是我发现的：

当我几乎与“在 Facebook 页面上共享”（使用相同的 URL 共享）同时执行“publish_action”时，我看到我的“在 Facebook 页面上共享”不起作用，并且出现以下错误：

```
 Facebook responded with HTTP status code 400 and response body: 
 {"error":{"message":"(#1500) The url you supplied invalid","type":"OAuthException","code":1500}} 
```

当在“publish_action”（之后，我的意思是 30 秒）之后进行“在 Facebook 页面上分享”时，它就像一个魅力。

该 URL 确实有效（只是因为“publish_action”运行良好）

你对此有什么想法吗？

***5月3日更新***

我在 facebook 上创建了一个错误：[https](https://developers.facebook.com/bugs/284272281663170) ://developers.facebook.com/bugs/284272281663170 待续...

# mysql - Rails 3：测量数据库性能（MongoDB 和 MySQL）

> ID：10318861
> 
> 赞同：0
> 
> 时间：2012-04-25T15:31:57.723
> 
> 标签：mysql, ruby, ruby-on-rails-3, mongodb

我设置了我的 Rails 应用程序两次。一种是使用 MongoDB（Mongoid 作为映射器），另一种是使用 MySQL 和 ActiveRecord。然后我写了一个 rake 任务，将一些测试数据插入两个数据库（100.000 个条目）。我用 ruby​​ Benchmark 模块测量了每个数据库需要多长时间。我对 100 和 10.000 个条目进行了一些测试，其中 mongodb 总是比 mysql 快（大约 1/3）。奇怪的是，在 mongodb 中插入 100.000 个条目所需的时间大约是 mysql 的 3 倍。我不知道为什么 mongodb 有这种行为？！我唯一知道的是cpu时间远低于总时间。mongodb 是否有可能在插入数据时开始某种垃圾收集？一开始它很快，但是随着mongodb插入的数据越来越多，它变得越来越慢......

为了以某种方式获得两个数据库的读取性能，我考虑测量数据库获取搜索查询并响应结果的时间。由于我需要一些精确的测量，我不想包括 Rails 处理我从控制器到数据库的查询的时间。

如何直接在数据库中而不是在 Rails 控制器中进行测量？有什么可以帮助我的宝石/工具吗？

提前致谢！

编辑：根据我目前的情况更新我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:13:53.443

如果您的基本目标是在 DB 级别测量数据库性能时间，我建议您熟悉 MongoDB 中的[benchRun](http://www.mongodb.org/display/DOCS/JS+Benchmarking+Harness)方法。

要执行您想做的事情，您可以从链接页面上的示例开始，这里有一个带有解释的变体：

```
// skipped dropping the table and reinitializing as I'm assuming you have your test dataset
// your database is called test and collection is foo in this code
ops = [
// this sets up an array of operations benchRun will run
   { 
      // possible operations include find (added in 2.1), findOne, update, insert, delete, etc.
      op : "find" ,   
      // your db.collection
      ns : "test.foo" ,  
      // different operations have different query options - this matches based on _id
      // using a random value between 0 and 100 each time
      query : { _id : { "#RAND_INT" : [ 0 , 100 ] } }
   }
]

for ( x = 1; x<=128; x*=2){
    // actual call to benchRun, each time using different number of threads
    res = benchRun( { parallel : x ,   // number of threads to run in parallel
                      seconds : 5 ,    // duration of run; can be fractional seconds
                      ops : ops        // array of operations to run (see above)
                    } )
    // res is a json object returned, easiest way to see everything in it:
    printjson( res )
    print( "threads: " + x + "\t queries/sec: " + res.query )
} 
```

如果你把它放在一个名为 testing.js 的文件中，你可以像这样从 mongo shell 运行它：

```
> load("testing.js")
{
    "note" : "values per second",
    "errCount" : NumberLong(0),
    "trapped" : "error: not implemented",
    "queryLatencyAverageMs" : 69.3567923734754,
    "insert" : 0,
    "query" : 12839.4,
    "update" : 0,
    "delete" : 0,
    "getmore" : 0,
    "command" : 128.4
}
threads: 1   queries/sec: 12839.4 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:09:57.767

我找到了 MongoDB 在插入许多文档时变慢的原因。

> 在使用 MRI 时，不建议对超过 10,000 个文档使用多对多关系，因为在调用 #build 或 #create 时垃圾收集器会占用超过 90% 的运行时间。这是由于在这些操作中发生的大数组附加。 [http://mongoid.org/performance.html](http://mongoid.org/performance.html)

现在我想知道如何衡量每个数据库的查询性能。我主要关心的是查询时间和流量/吞吐量的测量。这种测量应该直接在数据库中进行，这样任何东西都不会掺杂结果。

# android - 有时 listView.getChildAt(int index) 返回 NULL (Android)

> ID：10318862
> 
> 赞同：5
> 
> 时间：2012-04-25T15:31:58.120
> 
> 标签：android, view, android-listview

我有一个带有自定义适配器的 listView。当发生某些事情时（点击孩子），我会做一些计算并修改子视图。如果满足某些条件，则应修改与单击的孩子无关的其他孩子。

这有时有效，但有时会失败，并且 DDMS 说视图为空......

让我给你看一下代码：

```
 if(invalidaEste != -1)
        {
            try
            {
                View v = lv_data.getChildAt(invalidaEste);
                if( v== null)
                {
                    Log.e("MY_LOG", "SIZE " + lv_data.getCount());
                    Log.e("MY_LOG", "IS_NULL " + String.valueOf(invalidaEste)); 
                }

                if(invalidaEste >= lv_data.getFirstVisiblePosition() &&
                   invalidaEste <= lv_data.getLastVisiblePosition())
                {
                    RelacionFacturaPago rpf = (RelacionFacturaPago)lv_data.getAdapter().getItem(invalidaEste);
                    TextView tv = (TextView)v.findViewById(R.id.tv_pendiente);
                    tv.setText(Formato.double2Screen(rpf.getPorPagar()));
                }
            }
            catch (Exception e)
            {
                Log.e("MY_LOG", "FAIL");
                Log.e("MY_LOG", String.valueOf(invalidaEste));
            }

        } 
```

**invalidaEste**是我要修改的视图。当**v 为空**时，我记录索引以检查它是否正常。总是小于或等于 listView.getCount()

为什么会这样？

更多数据：代码位于 AnimationListener 侦听器的 onAnimationStart(Animation animation) 内。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T15:37:51.820

Because of view recycling, `listView.getChildAt()` will only return a view for the positions it is displaying, and maybe one more. Maybe if you share more of your code we can help you figure out how to best tackle the problem.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T18:36:27.900

Dmon 和 Azertiti 都是正确的……一旦滚动您的列表，您就会发现自己有麻烦了。如果视图不可见，则它不存在（即已被 Android 回收）。滚动后，您将重新构建视图。

做这样的事情应该有效：

```
View view;

int nFirstPos = lv_data.getFirstVisiblePosition();
int nWantedPos = invalidaEste - nFirstPos;

if ((nWantedPos >= 0) && (nWantedPos <= lv_data.getChildCount())
{
 view = lv_data.getChildAt(nWantedPos);
 if (view == null)
  return;
 // else we have the view we want
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:38:37.007

If that child is not visible on screen it means there is no View for it. I believe this is your not working case.

A good practice is to change the data behind your list adapter and call notifyDataSetChanged() on the adapter. This will inform the list the adapter has changed and paint again the views.

If you really want to manually update the view I guess the only solution is to retain the new values somewhere and wait until the View becomes visible. At that point you have a valid reference and can do the updates.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-15T21:00:13.593

当我需要进入 Listview 的有效位置时，我会使用一行代码对其进行测试。这是用作示例的变量。其中 lv_data 是 ListView，tv 是您的 TextView。

```
if ( lv_data.getChildAt(lv_data.getPositionForView(tv)) != null) {
    int position = lv_data.getPositionForView(tv);
} 
```

# javascript - 如何创建将导航到jquery移动页面之外的页面的链接/按钮

> ID：10318864
> 
> 赞同：1
> 
> 时间：2012-04-25T15:32:00.233
> 
> 标签：javascript, jquery, button, jquery-mobile, hyperlink

我正在尝试创建一个 jQuery 移动链接或按钮，它将完全导航到另一个页面，而不是尝试将其吸收到自己的 DOM 中。

例子：

```
 <a href="http://www.google.com" data-role="button" data-icon="search" data-inline="true" >Search</a> 
```

在我的 jQuery 移动页面中，它执行到页面的转换并应用其渲染。我希望 Google 页面像往常一样显示，而不是同化到属于 jQuery 移动页面的 DOM 空间。

我想保持链接/按钮的外观和感觉，但我希望它的动作完全从页面导航到一个全新的 DOM 空间。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:34:34.650

将 rel="external" 添加到您的 a 标签。这将通知 DOM 您要离开页面并且不使用 AJAX 导航。

像这样：

```
<a href="http://www.google.com" data-role="button" data-icon="search" data-inline="true" rel="external">Search</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:34:26.227

尝试

```
 <a href="http://www.google.com" data-role="button" data-icon="search" data-inline="true" rel="external">Search</a> 
```

# javascript - AJAX 状态 12030

> ID：10318865
> 
> 赞同：2
> 
> 时间：2012-04-25T15:32:03.287
> 
> 标签：javascript, ajax, xmlhttprequest, http-status-codes

我正在使用 POST 方法发送一个 ajax XMLHttpRequest。发送请求时，我得到的 readyState 为 4，状态为 12030。我知道 12030 是 Microsoft 特定的状态代码，表示连接未持续。但是，我似乎无法找到我的代码会导致此错误的位置。如果我在不使用 ajax 请求的情况下导航到该页面，它会正常加载。下面是javascript方法和调用行。

AJAX 方法

```
/*Sends ajax request with post data that updates the content view via ajax on completion
* @param message : message after completion of ajax request
* @param url : url to request
* @param params : post parameters as string
*/
function changeAjaxPost(message, url, params) {
    var ajx;
    if (window.HXMLHttpRequest) {
        UtilLogger.log(HtmlLogger.FINE, "Using XMLHttpRequest");
        ajx = new XMLHttpRequest();
    }
    else {
        UtilLogger.log(HtmlLogger.FINE, "Using ActiveXObject");
        ajx = new ActiveXObject("Microsoft.XMLHTTP");
    }
    ajx.open("POST", url, true);
    ajx.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    ajx.setRequestHeader("Content-Type", "text/html");
    ajx.setRequestHeader("Content-length", params.length);
    ajx.setRequestHeader("Connection", "close");
    ajx.send(params);
    ajx.onreadystatechange = function () {
        document.write(ajx.readyState + ":" + ajx.status);
        if (ajx.readyState == 4 && ajx.status == 200) {
            alert(message);
            updateContent();
        }
        else if (ajx.readyState == 4 && ajx.status == 400) {
            alert("Page Error. Please refresh and try again.");
        }
        else if (ajx.readyState == 4 && ajx.status == 500) {
            alert("Server Error. Please refresh and try again.");
        }
    }

} 
```

呼叫线

```
changeAjaxPost("Excerpt Saved", "./AJAX/myadditions_content.aspx", params); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T08:30:05.920

[http://danweber.blogspot.com/2007/04/ie6-and-error-code-12030.html](http://danweber.blogspot.com/2007/04/ie6-and-error-code-12030.html)

IE6 和错误代码 12030 如果您正在运行 Internet Explorer 6 并使用 Ajax，您可能会收到一些 XMLHttpRequests 以代码 12030 终止。Microsoft 的知识库[http://support.microsoft.com/kb/193625](http://support.microsoft.com/kb/193625)显示此代码是

12030 ERROR_INTERNET_CONNECTION_ABORTED 与服务器的连接已终止。谷歌搜索没有帮助。遇到这种情况的人似乎不知道网络套接字是如何工作的，所以我必须自己弄清楚。

当客户端认为连接保持打开，而服务器认为它已关闭时，就会发生这种情况。服务器已经发送了一个 FIN，而客户端已经用一个 ACK​​ 来响应它。在 Windows 客户端运行“netstat”显示连接处于 CLOSE_WAIT 状态，所以 IE6 确实*应该*在尝试之前意识到这一点。这完全是客户的错。如果您等待大约 60 秒，Windows 操作系统堆栈将停用连接。

如果你需要支持 IE6，你有一些解决方案，不同程度的丑陋：

如果浏览器是 ie，则在错误代码 12030 的情况下重试 ajax 请求，在每个 ajax 请求之前向服务器发送一个空请求捆绑您的 ajax 请求，使它们之间的时间为（（大于 server_timeout）和（小于server_timeout + 一分钟）IE7，fwiw，一旦意识到它有一个传出连接要建立，就会在 CLOSE_WAIT 套接字上发出一个 RST。那个，并且套接字无论如何只会保持在 CLOSE_WAIT 状态大约 5 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:09:17.747

有时，使用

```
setRequestHeader("Connection","close"); 
```

可能会导致某些浏览器出现问题。

删除它可以解决问题。

归功于@MikeRobinson

# perl - 在perl中将变量传递给mongodb查询

> ID：10318867
> 
> 赞同：1
> 
> 时间：2012-04-25T15:32:14.423
> 
> 标签：perl, mongodb

我想从文本文件中查询昵称列表。

```
#!/usr/bin/perl    
use strict;
use warnings;
use MongoDB;

# Open file
print "--> Read file\n";
open( INPUT, "<userlist.txt" ) or die "Could not open the file: $!\n";
print "--> Read INPUT OK\n";
open( OUTPUT, ">>outfile.txt" ) or die "Could not open the file: $!\n";
print "--> Read OUTPUT OK\n";

# MongoDB parameter
my $mongoHost = localhost;
my $mongoPort = 12345;

my $conn = MongoDB::Connection->new( "host" => "$mongoHost", "port" => $mongoPort );    # Open connection
my $db = $conn->mylist;                                                                 # Connect to database
my $user_stats = $db->user_stats;                                                    # Choose a collection
print "--> Connect to MongoDB\n";

# Read through line
foreach my $line ( <INPUT> ) {
    # Extract content
    chomp( $line );   # Remove newline
    print "$line\n";

    my $statsResult = $user_stats->find( { nickname => '$line' } );
    while ( my $obj = $statsResult->next ) {
        print $obj->{ "nickname" } . ";";
        print $obj->{ "total" } . "\n";
    }
}
close( OUTPUT );
close( INPUT );

print "--> End of Code\n";
exit 0; 
```

似乎无法识别`$line`该行的变量`my $statsResult = $user_stats->find( { msisdn => '$line' } );` 如果我`$line`用类似的字符串替换它就可以了`mynickname`. 以前的打印语句可以正常工作。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:37:36.367

You're using single quotes in your line

```
my $statsResult = $user_stats->find( { nickname => '$line' } ); 
```

Meaning that the database is being searched for the string `$line`, not the contents of the variable. Remove the single quotes and you should be fine.

Also, here's a [nice tutorial](http://www.perlmonks.org/?node_id=401006) on the different forms of quoting in Perl, which explains why single quotes are different from double quotes, what `qq` means, etc.

# r - 如何在R中覆盖水平图？

> ID：10318868
> 
> 赞同：3
> 
> 时间：2012-04-25T15:32:17.503
> 
> 标签：r, graphics, imaging

在 R 中，假设您希望在图像背景上呈现统计数据 - 就像在医学成像中一样

![使用 Mango 制作的示例](../Images/3b53725b04c4b2f23b96f574531b9c85.png)

每一层都是一个不同的矩阵。这是一个无意义的例子：

*   `volcano`灰色
*   `B<- (volcano>160) * rnorm(prod(dim(volcano))`在热的颜色。

你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T18:54:11.197

该`image`功能可以做到这一点，只需设置第二组颜色的透明度并使用`add=TRUE`. 任何缺失的值都将是完全透明的，您可以为其他颜色设置 alpha 级别（当然，您的图形设备必须支持部分透明才能工作）。这是一个简单的例子：

```
A <- t(volcano)[ncol(volcano):1,]
B <- (A>160) * rnorm(prod(dim(A)) )

B[ A < 120 ] <- NA  # show some complete transparency

image(A, col=grey( seq(0,1,length.out=12) ) )  # initial plot
hc <- sub('FF$','77',heat.colors(12)) # convert heat colors to have an alpha
image(B, add=TRUE, col=hc)  # overlay the new plot 
```

# openxml-sdk - 我无法更新特定幻灯片并且收到“Powerpoint 内容错误”

> ID：10318869
> 
> 赞同：1
> 
> 时间：2012-04-25T15:32:29.813
> 
> 标签：openxml-sdk

我有一张带有一张图表的 Excel 表格，它是来源。我的目标是带有 3 张幻灯片的 powerpoint 演示文稿。我需要用 Excel 文件中的图表更新幻灯片 #3。

执行应用程序后，当我尝试打开 pptx 文件时，我收到“Powerpoint 发现内容有问题”。修复后，我注意到幻灯片 #2 中总是出现空白幻灯片，这表明我没有更新正确的幻灯片。

我应该怎么做才能根据幻灯片编号转到幻灯片。（我在 powerpoint 幻灯片和 excel 图表中没有图表标题）以及为什么我收到无效内容错误。

非常感谢您的帮助。谢谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using OpenXmlPkg = DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Presentation;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Spreadsheet;

namespace ExportChart
{
class Program
{
    static void Main(string[] args)
    {
        string SourceFile = "Projected Sales.xlsx";
        string TargetFile = "Projected Sales.pptx";
        string targetppt = "Generatedppt.pptx";

        ChartPart chartPart;
        ChartPart newChartPart;
        SlidePart slidepartbkMark = null;
        string chartPartIdBookMark = null;

        File.Copy(TargetFile, targetppt, true);

        //Powerpoint document 
        using (OpenXmlPkg.PresentationDocument pptPackage = OpenXmlPkg.PresentationDocument.Open(targetppt, true))
        {

            OpenXmlPkg.PresentationPart presentationPart = pptPackage.PresentationPart;

            var secondSlidePart = pptPackage.PresentationPart.SlideParts.Skip(1).Take(1);
            foreach (var slidepart in pptPackage.PresentationPart.SlideParts)
            {

            slidepartbkMark = slidepart;

                if (slidepart.GetPartsCountOfType<ChartPart>() != 0)
                {
                    chartPart = slidepart.ChartParts.First();
                    chartPartIdBookMark = slidepart.GetIdOfPart(chartPart);
                    slidepart.DeletePart(chartPart);
                    slidepart.Slide.Save();
                }

                //return;
            }

            newChartPart = slidepartbkMark.AddNewPart<ChartPart>(chartPartIdBookMark);

            ChartPart saveXlsChart = null;
            using (SpreadsheetDocument xlsDocument = SpreadsheetDocument.Open(SourceFile.ToString(), true))
            {
                WorkbookPart xlsbookpart = xlsDocument.WorkbookPart;

                foreach (var worksheetPart in xlsDocument.WorkbookPart.WorksheetParts)
                {
                    if (worksheetPart.DrawingsPart != null)
                        if (worksheetPart.DrawingsPart.ChartParts.Any())
                        {
                            saveXlsChart = worksheetPart.DrawingsPart.ChartParts.First();
                        }
                }

                newChartPart.FeedData(saveXlsChart.GetStream());
                slidepartbkMark.Slide.Save();
                xlsDocument.Close();
                pptPackage.Close();
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:46:09.027

如果有人正在寻找如何识别带有幻灯片编号的幻灯片，您需要执行以下操作

```
//Get the relationship id 
SlideIdList s = documentPart.Presentation.SlideIdList;
SlideId nslideid = (SlideId)s.ElementAt(slideno-1); //slide no is the number of the slide
string slidRelId = nslideid.RelationshipId; 
```

接下来使用循环遍历每张幻灯片。在 foreach 循环中添加以下代码以查看幻灯片是否具有特定的关系 id

```
//  get the relationshipid of the current slide 
    string thisSlideno = documentPart.GetIdOfPart(slidePart);
    if (thisSlideno == slidRelId)
    {
        //do your actions
    } 
```

我希望这是有帮助的

# cordova - ShareKit 不会显示我所有的共享者

> ID：10318871
> 
> 赞同：0
> 
> 时间：2012-04-25T15:32:34.447
> 
> 标签：cordova, sharekit, phonegap-plugins

我正在开发一个使用[ShareKit 2.0](https://github.com/ShareKit/ShareKit)的 PhoneGap（又名 Cordova）项目。[按照此处](https://github.com/ShareKit/ShareKit/wiki/FAQ)文档的指示，我删除了几个不需要的“共享者”并禁用了“更多”按钮。当我构建项目时，它没有显示剩余的共享者，而是删除了我删除的那些，显示了原始列表的较短版本。

我怎样才能告诉它显示我想要的共享者？

现在我看到：

*   电子邮件
*   推特

就是这样！我怎样才能得到这个：

*   短信
*   推特
*   Facebook

这些服务的相应文件夹保留在原处，它们的条目在 SHKSharers.plist 中的顺序正确（上面有操作，下面有服务）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:37:00.507

ShareKit 配置器中有收藏共享者部分。为每种共享类型填写所需的共享者。例子：

```
- (NSArray*)defaultFavoriteURLSharers {
    return [NSArray arrayWithObjects:@"SHKTwitter", @"SHKFacebook", @"SHKTextMessage", nil];
} 
```

编辑：好问题，谢谢。我已经改进了 ShareKit 的常见问题解答以使其清楚。

# ios5 - 在 iPhone iOS 5 上读/写 plist

> ID：10318874
> 
> 赞同：0
> 
> 时间：2012-04-25T15:32:41.997
> 
> 标签：ios5, plist

我正在研究 iPhone 开发并面临读取/写入 plist 文件的问题。我遵循了 iPhone 开发书中的示例，但在运行时不断收到错误消息。

错误消息说：2012-04-26 00:21:09.759 FileHandling[5915:207] -[__NSCFDictionary addObject:]: unrecognized selector sent to instance 0x685ac40

这是示例代码（对我来说似乎很好......不过）：

```
NSString *plistFileName = [[self documentPath] stringByAppendingPathComponent: @"Apps.plist"];
NSLog(@"Where is the file? => %@", plistFileName);

if ([[NSFileManager defaultManager] fileExistsAtPath:plistFileName]) {
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:plistFileName];

    for (NSString *category in dict) {
        NSLog(@"%@", category);
        NSLog(@"=========");

        NSArray *titles = [dict valueForKey:category];

        for (NSString *title in titles) {
            NSLog(@"%@", title);
        }
    }
} else {
    NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"Apps" ofType: @"plist"];       
    NSLog(@"%@", plistPath);
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile: plistPath];
    NSLog(@"Let's take a look : %@", dict); 
    NSMutableDictionary *copyOfDict = [dict mutableCopy];
    NSLog(@"Let's look at the mutable dictationary : %@", copyOfDict);
    NSArray *categoriesArray = [[copyOfDict allKeys] sortedArrayUsingSelector: @selector(compare:)];

    for (NSString *cateogry in categoriesArray) {
        NSArray *titles = [dict valueForKey: cateogry];
        NSMutableArray *mutableTitles = [titles mutableCopy];

        [mutableTitles addObject: @"New App Title"];

        [copyOfDict setObject: mutableTitles forKey:cateogry];
    }

    NSString *fileName = [[self documentPath] stringByAppendingPathComponent: @"Apps.plist"];
    [copyOfDict writeToFile: fileName atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:24:03.840

根据错误消息，问题出现在对`addObject:`on的调用中`__NSCFDictionary`。这意味着，在运行时，字典接收到添加对象的消息。

然而，在这个代码片段中，`addObject:`显然是被发送到一个`NSMutableArray`. 这可能意味着`titles`您`dict`在最后一个 for 循环中检索的每个对象都不是数组，而是实际上是另一个字典，您的代码只是将其称为数组。

确实，您的代码确实格式正确，因此请检查源 plist 的格式是否正确；在纯文本编辑器中打开它。此外，您使用了*大量*的日志记录，因此请以这种方式确认：在输出中，字典（包括根条目）由 表示`{curly = braces}`，其中数组由 表示`(round parentheses)`。

# iphone - 在 GameConfig.h 中存储 CCLabelTTF 颜色

> ID：10318875
> 
> 赞同：0
> 
> 时间：2012-04-25T15:32:48.017
> 
> 标签：iphone, ios, cocos2d-iphone, label

如何在 GameConfig.h 中存储 CCLabelTTF 颜色，例如：

```
#define kGameLabelColor ccc3(79,71,59); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:42:26.510

Define it in GameConfig.h, without the `;` in the end:

```
#define kGameLabelColor ccc3(79,71,59) 
```

To use it:

```
#import "GameConfig.h"

...

[label setColor:kGameLabelColor]; 
```

If you want to change the color of all your labels in the whole app by default, I think you may consider modifying `initWithString` method in CCLabelTTF.m, adding `color_ = ccc3(79,71,59);`.

# html - 将标签放在文本字段的顶部

> ID：10318882
> 
> 赞同：1
> 
> 时间：2012-04-25T15:33:11.623
> 
> 标签：html, css, uitextfield, label

我的html：

```
<input type="text" value="" id="email1" class="inputfield_ui" />
<label>Email address 1</label> 
```

我的输入字段 css：

```
width:95%;
z-index:3; 
```

我的标签 css：

```
position:absolute;
display:block;
top:8px;
left:11px;
color:#CCCCCC;
z-index:1; 
```

当我尝试单击标签输入内容时，它不允许我这样做...相反会显示一个默认光标，我将不得不单击文本字段的其他空间旁边来写一些东西...

z-indexes 是正确的，不是吗？

**编辑：解决方案**

html:

```
<input type="text" value="" id="email1" class="input" />
<label>Email address 1</label>
<span class="input_bg"></span> 
```

CSS：

```
input{
   background:transparent;
   z-index:1;
}
label{
   z-index:2;
}
.input_bg{
   /*input css with background*/
   z-index:3;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:39:36.520

我假设这是为了文本框水印？

如果是这种情况，那么我将使用 CSS 来隐藏标签（不要出于可访问性目的将其删除）：

```
label
{
  display:none;
} 
```

然后使用 javascript 工具显示带水印的文本。有很多很好的 jQuery 解决方案：

[http://code.google.com/p/jquery-watermark/](http://code.google.com/p/jquery-watermark/)

然后是应用以下内容的情况：

```
$("#email1").watermark("Email address 1"); 
```

* * *

但是，这可以改进，因此您不必通过执行以下操作将其应用于每个元素：

```
$(".watermark").watermark($(this).attr("title")); 
```

或者，如果您`input`的所有 s 都有关联`label`的 s，您可以像这样应用它们：

```
$(".watermark").watermark($("label[for='" + $(this).attr("id") + "']").html()); 
```

这样，如果用户没有启用 javascript，仍然`title`可以依赖，如果他们没有 CSS，则将显示标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:01:23.873

html:

```
<input type="text" value="" id="email1" class="input" />
<label>Email address 1</label>
<span class="input_bg"></span> 
```

CSS：

```
input{
   background:transparent;
   z-index:1;
}
label{
   z-index:2;
}
.input_bg{
   /*input css with background*/
   z-index:3;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:36:34.993

z-index 在没有定位的情况下不起作用。尝试添加`position:relative;`到输入输入 CSS。

# php - 在数组中使用 simplexml 对象

> ID：10318883
> 
> 赞同：0
> 
> 时间：2012-04-25T15:33:13.423
> 
> 标签：php, simplexml

我有以下代码用于获取 XML 并制作数组，以便可以通过 API 进行更新：

```
$data1 = file_get_contents('neworderexample.xml');
$xml = new SimpleXMLElement($data1,LIBXML_NOCDATA);

foreach($xml -> Product as $ord){
$sku = $ord -> StockNumber;
$title = $ord -> Title;
$retail_price = $ord -> RRP;
$price = $ord -> SellPrice;
$description = $ord -> Description;
$inventory_level = $ord -> StockLevel;
$weight = $ord -> Weight;
$width = $ord -> Width;
$prodheight = $ord -> Height;
$depth = $ord -> Depth;

$fields = array(
"sku" => $sku,
"name" => $title,
"retail_price" => $retail_price,
"price" => $price,
"description " => $description,
"inventory_level " => $inventory_level,
"type" => "physical",
"availability" => "available",
"weight" => $weight,
"width" => $width,
"prodheight" => $prodheight,
"depth" => $depth,
"categories" => "1"
);

print_r ($fields); 
```

当我回显任何变量时，我只得到值，但是当我打印数组时，我得到以下内容：

```
[inventory_level ] => SimpleXMLElement Object ( [0] => 9 ) 
[type] => physical 
[availability] => available 
[weight] => SimpleXMLElement Object ( [@attributes] => Array ( [unit] => g ) [0] => 0.0 ) 
[width] => SimpleXMLElement Object ( [@attributes] => Array ( [unit] => (mm) ) [0] => 0 ) 
[prodheight] => SimpleXMLElement Object ( [@attributes] => Array ( [unit] => (mm) ) [0] => 0 ) 
[depth] => SimpleXMLElement Object ( [@attributes] => Array ( [unit] => (mm) ) [0] => 0 ) 
[categories] => 1 ) 
```

如何仅获取数组中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:35:45.233

转换为字符串，例如使用：

```
"sku" => (string) $sku,
         ^ ^ ^ ^ 
```

（这更像是一个评论而不是一个答案，它将与重复的问题一起被删除）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:50:36.350

问题出现在 SimpleXMLElement 创建对象的事实中。尝试将这些特定元素转换为整数/浮点数/字符串。

前任。

```
$fields = array(
"sku" => intval($sku),
"name" => $title,
"retail_price" => $retail_price,
"price" => $price,
"description " => $description,
"inventory_level " => $inventory_level,
"type" => "physical",
"availability" => "available",
"weight" => floatval($weight[0]).$weight['unit'],
"width" => intval($width[0]).$width['unit'],
"prodheight" => intval($prodheight[0]).$prodheight['unit'],
"depth" => intval($depth[0]).$depth['unit'],
"categories" => "1"
); 
```

尝试它可能会起作用。我不太确定自己没有进行任何测试。

# python - 使用 sklearn 找出错误率

> ID：10318884
> 
> 赞同：2
> 
> 时间：2012-04-25T15:33:21.083
> 
> 标签：python, machine-learning, svm, scikits, scikit-learn

我想在 python 中使用 svm 分类器找出错误率，我采取的方法是：

```
 1-svm.predict(test_samples).mean() 
```

但是，这种方法行不通。sklearn 的 score 函数也给出了平均准确率......但是，我不能使用它，因为我想完成交叉验证，然后找到错误率。请在 sklearn 中建议一个合适的函数来找出错误率。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T22:56:29.800

假设您在向量中有真实标签`y_test`：

```
from sklearn.metrics import zero_one_score

y_pred = svm.predict(test_samples)
accuracy = zero_one_score(y_test, y_pred)
error_rate = 1 - accuracy 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T03:58:08.087

如果您想交叉验证分数，请使用`sklearn.cross_validation.cross_val_score`实用程序函数并将模块中您喜欢的评分函数传递给它`sklearn.metrics`：

[http://scikit-learn.org/dev/modules/cross_validation.html](http://scikit-learn.org/dev/modules/cross_validation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-27T01:07:26.673

在此处使用`sklearn.metrics.accuracy_score` [Doc](http://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html#sklearn.metrics.accuracy_score)。

```
from sklearn.metrics import accuracy_score
#create vectors for actual labels and predicted labels...
my_accuracy = accuracy_score(actual_labels, predicted_labels, normalize=False) / float(actual_labels.size) 
```

# javascript - 在 JavaScript 中命名匿名函数有何不同？

> ID：10318890
> 
> 赞同：10
> 
> 时间：2012-04-25T15:33:45.547
> 
> 标签：javascript

我正在分析来自 John Resig 网站的以下两个 url，但我不明白给匿名函数命名是如何产生影响的。

我的理解是，给匿名函数的名称只能在函数定义内部使用，而不能在函数定义之外使用，但在以下链接中，它产生了巨大的不同

*   [http://ejohn.org/apps/learn/#13](http://ejohn.org/apps/learn/#13)
*   [http://ejohn.org/apps/learn/#14](http://ejohn.org/apps/learn/#14)

任何解释或参考都会有很大帮助。

我仍然对 #14 中的以下几行感到困惑

```
var samurai = { yell: ninja.yell }; 
var ninja = {};
assert( samurai.yell(4) == "hiyaaaa", "The method correctly calls itself." ); 
```

当 ninja 现在指向一个空白对象时，Samurai.yell 方法如何仍然能够指向 ninja.yell。

#13 和 #14 之间的唯一区别是为 #14 中的函数表达式提供名称。

ninja.yell 是否被复制到大喊而不被引用，或者这些 NAMED 函数表达式在某些场景中具有全局范围？

> 同样的事情发生在 #13 和 #14 中，唯一的区别是函数在 #14 中命名而在 #13 中未命名加上 ninja = {} 在 #14 中和 ninja = null 在 #13 中。是否有任何关于命名函数表达式的隐藏概念我错过了这使得 #14 可行而 #13 不可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T15:43:20.287

在内部示例中，您可以跳过 #13 中对 ninja 对象的额外访问

匿名闭包（`ninja`虽然我们已经在那个上下文中，但需要访问对象）：

```
var ninja = { 
  yell: function(n){ 
    return n > 0 ? ninja.yell(n-1) + "a" : "hiy"; 
  } 
}; 
```

命名闭包可以直接调用：

```
var ninja = { 
  yell: function yell(n){ 
    return n > 0 ? yell(n-1) + "a" : "hiy"; 
  } 
}; 
```

另一个优点是命名闭包启用堆栈跟踪：

所以假设你这样做：

```
(function fooBar() { console.log(brazl); })();
// will create an error with "fooBar" in the stack trace instead of "anonymous function" 
```

编辑：虽然它有时看起来像开销，但它有助于在开发过程中进行调试，例如 YUICompressor 和 Closure Compiler 可以在本质上不需要这些名称时去除它们

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T15:46:40.323

不想与 Kolink 好斗，但他说这不是一个好例子有点过分了。#14 与（在您共享的链接中）有关的是命名函数表达式（与函数声明不同的动物）。不管函数引用在哪里传递，如果你命名你的函数表达式，它总是有一种方法来调用它自己，从它自己内部。这个名字，你给你的函数表达式，是一个只有它知道的名字；它不存在于任何外部范围内。

有关函数表达式与函数声明的进一步讨论，请参见MDN 上的[此处](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope#Function_constructor_vs._function_declaration_vs._function_expression)和[此处。](https://developer.mozilla.org/en/JavaScript/Reference/Operators/function)底部的第二个链接有一个关于命名函数表达式的标题。它**确实**有用；有关一次性递归函数的示例，请参阅[我的 Gist](https://gist.github.com/2141298)，它不会向本地或全局变量范围添加任何内容（例如，对于一次性 DOM 遍历很有用）。

此外，Tobias（在他的回答中）指出了命名函数表达式的其他良好用途，即在调试中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T15:39:19.243

在第一种情况下，该`yell`方法试图访问`ninja.yell`，而不管是哪个对象调用它。而在第二个中，它尝试调用`yell`which exists 因为该函数已命名。

这不是一个很好的例子。一个很好的例子是使用`this.yell`而不是`ninja.yell`，从而`yell`从当前对象中获取方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:51:11.163

The site [http://kangax.github.com/nfe/](http://kangax.github.com/nfe/) is a great reference. Yes, as far as it is a function expression the name will only be available inside (e.g. for recursive calls, as in the demonstration) and also helps for debugging (e.g. in stack traces), because it sets the `name` property of the function.

# ssis - SSIS：OnPostExecute OnError 问题

> ID：10318891
> 
> 赞同：3
> 
> 时间：2012-04-25T15:33:45.540
> 
> 标签：ssis, onerror

我有一个 SSIS 包，我在其中设置了 OnError 和 OnPostExecute 事件处理程序。Package 是一个简单的循环容器，处理程序 OnPostExecute 工作正常。

但是 OnError 实际上并没有工作。我在 Loop 内的任务中添加了一些错误代码，只是为了测试 OnError 处理程序并且它没有激活。OnPostExecute 处理程序确实在循环内的非常进程之后工作。

另一方面，我尝试自己执行 OnError 任务，它确实有效。因此，发生错误时不会激活它。

一些信息。我已将循环内的每个任务的 Propagate 系统变量设置为 FALSE，因为我不希望程序包停止。（也许这与它有关） OnError 处理程序处于**包**级别。

当进程发现错误时，关于 OnError 没有被执行的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:22:22.683

检查“DisableEventHandlers”属性。确保在它未触发的任何任务上将其设置为 false。

# java - (Java) Java 找不到我的图像文件

> ID：10318894
> 
> 赞同：1
> 
> 时间：2012-04-25T15:33:54.943
> 
> 标签：java, directory

我是 Java 新手。

我的问题是我的 Java 程序找不到我试图用作 JButton 的图像文件。（目前这段代码什么都不做，因为我只是先得到一个理想的外观）。 **这是我的主要课程**

代码：

```
package mainClasses;
/*
 * Frame Info and all that shit,
 * mainFrame is the actual frame itself
 * it will refer to MainC.java a lot Main class = Main Class
 */
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.io.File;

import resources.ResourcesManager; 

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

@SuppressWarnings({ "unused", "serial" })
public class mainFrame extends JFrame {

ResourcesManager rManager = new ResourcesManager();

public mainFrame() {
    JButton playButton = new JButton(rManager.pButton);
    JButton infoButton = new JButton();
    JButton exitButton = new JButton();

    int x = 310, y = 300;
    setSize(x, y);
    setVisible(true);
    setLayout(null);
    setTitle("Kingdom Raider");
    setDefaultCloseOperation(EXIT_ON_CLOSE);

    /*Buttons and Properties*/
                        /*X,  Y,  X, Y*/
     playButton.setBounds(10, 10, 70, 40);
    /* Add if problem cannot be sorted */ // playButton.setText("Play");

    add(playButton);

     infoButton.setBounds(90, 10, 110, 40);
     infoButton.setText("Information");
    add(infoButton);

     exitButton.setBounds(210, 10, 70, 40);
     exitButton.setText("Exit");
    add(exitButton);

    //This is for checking if the file is here.
    File imageCheck = new File("/JavaGame/src/resources/playButton.png");

    if(imageCheck.exists())
    {
        System.out.println("File found!");
    }
    else 
    {
        System.out.println("File not found!");
    }

    repaint();

}

public void Painting (Graphics g) {

}
} 
```

**这是我的 RESOURCESMANAGER.JAVA**

```
package resources;

import java.awt.Image;

import javax.swing.ImageIcon;
import javax.swing.JLabel;

public class ResourcesManager {

/*Here, your going to want to declare anything
 * needed.
 */

public ImageIcon KRLogo = new ImageIcon("/JavaGame/src/resources/kingdomraiderlogo.png");
public ImageIcon pButton = new ImageIcon("/JavaGame/src/resources/playButton.png");

public void settings() { //Set the stuff settings, locations e.t.c.
    //BLAH

}

} 
```

所以基本上 Button 需要来自 ResourcesManager 的 pButton

实际上是 playButton.png，它位于资源包中，与 ResourcesManager.java 相同的文件夹

请帮助我解决我的目录问题。

编辑：抱歉忘记了，没有错误，只是出现了一个空白按钮，没有我的图像。

至于我的目录，它看起来像

```
src

mainClasses (package)
   mainFrame.java
   runClass.java
resources (package)
   kingdomraiderlogo.png
   playButton.png (image wanted at the momment.)
   ResourcesManager.java 
```

我会+1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:54:30.370

像这样做：

```
public ImageIcon KRLogo = new ImageIcon(Toolkit.getDefaultToolkit().getImage(
(ResourcesManager.class.getResource("/resources/kingdomraiderlogo.png"))));

public ImageIcon pButton = new ImageIcon(Toolkit.getDefaultToolkit().getImage(
(ResourcesManager.class.getResource("/resources/playButton.png")))); 
```

编辑：

在 Java 中，您有两种访问文件的方式。一种方法是通过使用正斜杠的路径，通常在`getResource()`类的方法中使用`Class`。第一个斜杠指的是项目的 src 文件夹。

例如，第二种方式是`pathname`在类的构造函数中使用 and `File`。在 Windows 上，这会使用双反斜杠，因为必须转义反斜杠。问题是平台独立性，通过`File.Separator`在路径名字符串中使用很容易恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:39:41.940

您将路径定义为绝对路径（前导 /）。那应该是相对路径还是您的根驱动器上真的有一个 JavaGame/src/resources/... 文件夹？

# dotcover - 如何使用 dotCover 过滤器排除类构造函数？

> ID：10318903
> 
> 赞同：2
> 
> 时间：2012-04-25T15:34:14.460
> 
> 标签：dotcover

dotCover 的“编辑覆盖过滤器”对话框中的“功能掩码”字段应该包含什么内容？我试过“Foo”和“Foo*”但没有效果。

例子：

```
public class Foo
{
  public Foo(int x, int y)
  {
     // how can I exclude this code from the code coverage calculation?
  }

  ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:21:24.930

首先，值得一提的是，dotCover 分析已编译的程序集，而不是源代码，以生成其覆盖率报告。任何 C# 构造函数（无论其在 C# 中的名称如何）都被编译成一个名为的方法`.ctor`（或者`.cctor`如果构造函数是静态的）。这就是为什么 dotCover 永远不会看到`Foo(int, int)`您的示例中调用的方法。

如果要过滤掉`Foo`类的构造函数，需要在“Edit Coverage Filter”对话框中输入以下内容：

*   模块掩码：*YourNamespace*
*   类掩码：*YourNamespace*。`Foo`
*   功能掩码：`.ctor`

希望这可以帮助。

# java - 异构任务和同质任务

> ID：10318905
> 
> 赞同：2
> 
> 时间：2012-04-25T15:34:23.813
> 
> 标签：java, multithreading, task

这两者的定义是什么，“异构任务”和“同质任务”有什么区别？当我阅读*Java Concurrency In Practice*一书时，这两个短语跳了出来。在我看来，这就是任务的大小和任务的处理时间。但我不是很明白。我用谷歌搜索了它，但找不到准确的答案。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:39:23.327

*   **同质任务**：以类似方式处理并花费大致相同时间的一组任务。示例：将 square 函数应用于数组的每个元素。模式：数据并行。
*   **异构任务**：一组没有明确逻辑关系并且可以在不同时间内执行的任务。示例：在下载网页的同时估计 pi。模式：任务并行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:38:57.450

它可能指的是这样的事情：

*   异构任务是*根本不同的任务*。例如，“获取最新天气”与“获取最新消息”。这有时被称为*基于任务的并行性*。
*   同质任务是执行相同任务但可能具有不同输入的任务。例如，“我有 20 个股票代码 - 获取每个代码的股票价格”。这有时称为*基于数据的并行性*。

（请注意，基于任务/数据的并行性的含义似乎因上下文而异。希望上述内容至少在某些情况下是正确的；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:40:35.967

我认为他们在这本书的上下文中的意思是，如果你有 20 个任务，其中 19 个需要 10 毫秒才能完成，而另一个需要 1 秒才能完成。按顺序或同时运行它们不会有很大的不同：它需要或多或少的 1 秒。

如果您有 20 个任务都需要 10 毫秒才能完成并且是独立的，那么您可以通过同时运行它们而不是顺序运行它们来显着减少执行时间。

# ruby-on-rails - Rails 在表单错误时丢失嵌套属性子项

> ID：10318915
> 
> 赞同：2
> 
> 时间：2012-04-25T15:34:55.800
> 
> 标签：ruby-on-rails, forms, nested-attributes

我有一个必须存在的 has_one 关系：

```
has_one :child, :dependent => :destroy
validates_presence_of :child 
```

在我的控制器中，我在 new 上构建了孩子：

```
@parent.build_child 
```

当表单提交错误时，渲染最终会丢失构建的子项。这会导致我的 fields_for 为空白，从而阻止用户输入所需的子字段。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:36:00.743

弄清楚了：

```
before_filter :build_child, :only => [:new, :edit] 
```

应该是：

```
before_filter :build_child, :only => [:new, :edit, :create, :update] 
```

# chef-infra - 如何从 Chef 数据包中访问当前值？

> ID：10318919
> 
> 赞同：8
> 
> 时间：2012-04-25T15:35:02.743
> 
> 标签：chef-infra

我有一台由 Chef 管理的服务器。我需要从不是由 Chef 运行的脚本访问一些存在于食谱数据包中的值。

/* *Chef REST API 允许访问 Chef 服务器所看到的数据包值。这不是我想要的。*每次`chef-client`运行可能会引入许多协调更改，包括数据包中的更改。如果服务器上的数据已经更改但`chef-client`尚未在本地运行，则本地设置和服务器端数据包可能不同步。*/

我看到两个解决方案：

*   解析/导入数据包文件，`/var/cache/chef/cookbooks/<book-name>`因为它或多或少是普通的 Ruby。
*   在配方中，将数据包中的相关数据转储到可从我的脚本访问的纯文件中。

有更好的选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T12:03:19.960

将节点哈希或数据包中的数据转储到单独的文件中是在 Chef 服务器和节点上运行的脚本之间进行通信的好方法。如果您的脚本可以解析 JSON，那么这真的很容易：

```
file "/etc/script.json" do
  owner "root"
  group "root"
  mode 0644
  content node[:whatever].to_json
 end 
```

使用 Chef REST 接口听起来有点矫枉过正，在 /var/cache/chef 中摸索是不礼貌的。（-：

# awk - 为什么 (g)awk 反转这些输出行？

> ID：10318922
> 
> 赞同：4
> 
> 时间：2012-04-25T15:35:16.610
> 
> 标签：awk, race-condition, gawk

所以，我看到这个输出，我有点惊讶：

```
$ echo "a,b,c,d,e,f,g" | cut -d, -f-4
a,b,c,d
$ echo "a,b,c,d,e,f,g" | cut -d, -f6-
f,g
echo "a,b,c,d,e,f,g" | awk '{ print $0 | "cut -d, -f-4"; print $0 | "cut -d, -f6-"; }'
f,g
a,b,c,d 
```

（作为旁注，我意识到这是在 中做的一件完全愚蠢的事情`awk`，但这是我看到它发生的唯一命令！）。

据我了解，这应该将记录按顺序传递到两个命令中。但由于某种原因，输出出现反转。如果我这样做

```
$ echo "a,b,c,d,e,f,g" | awk '{ print $0 | "echo hello"; print $0 | "echo goodbye"; }'
hello
goodbye 
```

然后一切都按我预期的顺序进行。我认为这一定是某种竞争条件，但我很惊讶`awk`没有等待管道中的子命令完成。这是使用的已知问题`awk`还是特殊的问题`gawk`？有没有办法避免这样的陷阱？

**编辑：**

我也尝试过使用`mawk`...相同（反转）的结果，并且似乎两者都一致发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T16:08:59.620

为了确保完成一个外部命令，您必须[关闭](http://www.gnu.org/software/gawk/manual/html_node/Close-Files-And-Pipes.html#Close-Files-And-Pipes)该命令。

```
$ echo "a,b,c,d,e,f,g" | awk 'BEGIN {cmd1 = "cut -d, -f-4"; cmd2 = "cut -d, -f6-"} { print $0 | cmd1; close(cmd1); print $0 | cmd2; close(cmd2)}'
a,b,c,d
f,g 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T16:09:52.117

我对此感到惊讶，但很明显 awk 并行运行命令。试试这个：

```
# time echo "a,b,c,d,e,f,g" | awk '{ print $0 | "sleep 2"; print $0 | "sleep 2"; }'

real    0m2.250s
user    0m0.030s
sys     0m0.060s 
```

# zend-framework - Zend_Translate 和翻译问题

> ID：10318927
> 
> 赞同：0
> 
> 时间：2012-04-25T15:35:31.787
> 
> 标签：zend-framework, zend-translate

我想知道如何翻译以下内容？

```
(french) Vous avez oublié votre <a href="/auth/password-recovery">mot de passe</a> ?
(english) Forgot your <a href="/auth/password-recovery">password</a> ?
(dutch) <a href="/auth/password-recovery">Paswoord</a> vergeten ? 
```

您可能会注意到，问题是在荷兰语版本中，句子以密码开头，而在法语和英语版本中，它以主语/动词开头。

我通常这样做：

```
<?php echo $this->translate('Vous avez oublié votre'); ?>
<a href="/auth/password-recovery"><?php echo $this->translate('mot de passe'); ?></a> ? 
```

不幸的是，这在这里行不通，因为正如前面在荷兰语版本中所说，该句子以密码开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:04:42.110

您必须使用嵌入式参数（%1\$s）： http: [//framework.zend.com/manual/en/zend.translate.using.html](http://framework.zend.com/manual/en/zend.translate.using.html)

# video - dvblast 和 gstreamer

> ID：10318928
> 
> 赞同：0
> 
> 时间：2012-04-25T15:35:32.653
> 
> 标签：video, video-streaming, gstreamer, dvb

我正在尝试将流式视频从 dvblast (dvb-s) 播放到我的 pandaboard 并遇到问题。有人可以给我任何指示吗？

这是我的输出：

```
gst-launch-0.10 -vm udpsrc port=1234 multicast-group=239.255.0.1 caps="application/x-rtp,media=(string)video,clock-rate=(int)90000,payload=(int)96" ! .recv_rtp_sink_0 gstrtpbin latency=800 ! rtpmp2tdepay ! tsdemux ! ffdec_h264 ! xvimagesink 

Setting pipeline to PAUSED ... ERROR: Pipeline doesn't want to pause. 
Got message #9 from element "xvimagesink0" (error): GstMessageError, gerror=(GError)NULL, debug=(string)"xvimagesink.c(1428):\ gst_xvimagesink_get_xv_support\ ():\ /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0:\012No\ port\ available"; ERROR: from element /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0: Could not initialise Xv output Additional debug info: xvimagesink.c(1428): gst_xvimagesink_get_xv_support (): /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0: No port available Setting pipeline to NULL ... Freeing pipeline ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:13:34.390

似乎您在熊猫板上的 X 服务器设置不正确。在熊猫上，你能运行一个像下面这样的简单管道吗？

```
gst-launch videotestsrc ! xvimagesink 
```

您可能想尝试“autovideosink”而不是“xvimagesink”，它可以在已安装的视频输出中选择“最佳”视频输出。

# xcode - 在 Xcode 4.3 中使用 SDL

> ID：10318932
> 
> 赞同：1
> 
> 时间：2012-04-25T15:35:42.310
> 
> 标签：xcode, sdl, xcode4.3

我决定学习 c++ 并尝试使用 SDL 框架制作游戏。问题是我不知道如何将 SDL 与 Xcode 4.3 一起使用，因为我不能像在其他指南中看到的那样像模板一样使用它。如果有人可以帮助我让 SDL 与 Xcode 4.3 一起工作，那就太好了。

编辑：我尝试在[http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/之后将 SDL 添加到 Xcode 项目](http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/)

当我尝试编译时，出现此错误：

![在此处输入图像描述](../Images/30abc44792c5db5bf678c6c43eb9111f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:10:46.977

以下文章应该对您有所帮助：

[在 Xcode 4 中使用 SDL](http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:37:45.077

我花了很长时间才让 SDL 和 Xcode 运行起来。所以，别在意。:-)

我在这里为 Xcode 4.5 和 Mac OS X 10.7 和 10.8上传[了一个简单的 SDL 模板（也可以使用 OpenGL 3.2 Core Profile）。](http://www.michaeldorner.de/wp-content/uploads/2012/12/SDL_Template.zip)分步说明：

1.  下载[SDL](http://www.libsdl.org/release/SDL-1.2.15.dmg)（目前版本 1.2.15）
2.  打开下载的 .dmg 文件
3.  复制`SDL.framework`到`/Library/Frameworks/`
4.  完毕。您可以使用 Xcode 模板（您应该看到一个红色区域）： ![在此处输入图像描述](../Images/97527a7aa2727acdbaa1b88573dadf50.png)

更多细节和我[博客](http://www.michaeldorner.de/?p=2644)上的图片（仅限德语​​，抱歉）。

# python - 如何匹配所有连续不包含两位数字的单词？

> ID：10318936
> 
> 赞同：2
> 
> 时间：2012-04-25T15:36:09.423
> 
> 标签：python, regex

我有值列表，每个值都包含“pt”+ 2 位数字部分。但如果在那之后有“_digitdigit” - 这个值应该被排除在外。

应该匹配：`data_pt01_pr, data_pt02_1_pr, data_pt02_2`

不应该匹配： `data_pt01_01_pr, data_pt22_22, data_pt01_00_ABCD_1_bk_vi`

我在想像 [^\d{2}] 这样的东西可以解决问题，但它并没有像我预期的那样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:40:52.643

使用否定的前瞻断言`(?!...)`：

```
pattern = r'pt\d\d(?!_\d\d)' 
```

*仅当*后面没有下划线和两位数字时，此模式才匹配`pt`后跟两位数字。

 *```
>>> p = re.compile(pattern)
>>> bool(p.search("data_pt01_pr"))
True
>>> bool(p.search("data_pt02_2"))
True
>>> bool(p.search("data_pt01_01_pr"))
False
>>> bool(p.search("data_pt22_22"))
False 
```*

# android - NetlinkListener 和 NetlinkEvent 错误消息

> ID：10318938
> 
> 赞同：4
> 
> 时间：2012-04-25T15:36:12.473
> 
> 标签：android, sockets, android-logcat, motorola, netlink

我的应用程序在运行时不会中断。但是，总是会出现以下错误消息

> NetlinkListener：忽略非内核 netlink 多播消息 NetlinkEvent：NetlinkEvent::FindParam()：未找到参数“UDEV_LOG”

我正在开发的应用程序使用套接字从特定 IP 源（具有特定启用的端口号）接收包。我设置了一组日志输出（我什至尝试了“System.out.println”调用）来验证数据流，一切似乎都很好。

谁能告诉我这些错误消息与什么完全相关？

我用于测试的设备是带有最新 OTA 更新 (Android 2.3.6) 的 Motorola Atrix 4G (MB860)。由于兼容性问题，我们所做的所有开发都必须使用 API 8（或更早版本）来完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T13:18:20.420

有同样的问题，它是 2.3.6 上的一个错误，在摩托罗拉和 Android 上报告。

[链接到 Android 错误报告。](https://code.google.com/p/android/issues/detail?id=32339&q=3g&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

在错误报告中，我添加了我手机的信息以及我在论坛上进行的搜索。如果有人有同样的问题，请添加星号和/或评论，让他们知道问题存在，并且与一个国家/地区/手机提供商无关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T03:35:22.390

Atrix 上似乎有别的东西。我有一个 Atrix，查看 LogCat 时会出现很多错误，所以它不是您的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T05:18:16.120

在我植根我的 Atrix 手机后，我注意到了这个问题。Logcat 不断输出它:(

# symfony - 在 Symfony2 中使用 KnpPaginatorBundle 对多对一关系进行排序

> ID：10318940
> 
> 赞同：4
> 
> 时间：2012-04-25T15:36:18.030
> 
> 标签：symfony, doctrine-orm, bundle, jquery-ui-sortable, many-to-one

我在 Symfony2 项目中使用 KnpPaginatorBundle。我有 2 个具有多对一关系的实体。

```
/**
 * @ORM\Entity
 * @ORM\Table(name="foo")
 */
class foo {
   ...

   /**
     * @ORM\ManyToOne(targetEntity="abc\DemoBundle\Entity\Bar")
     * @ORM\JoinColumn(name="bar_id", referencedColumnName="id")
     */
    protected $bar;

    ...
}

/**
 * @ORM\Entity
 * @ORM\Table(name="bar")
 */
class Bar {
   ...

    /**
     * @ORM\Column(type="string", length=50, nullable=true)
     */
    protected $name;

    ...
} 
```

现在我想用 KnpPaginatorBundle 排序

```
<{{  entities.sortable('bar', 'i.bar')|raw }} 
```

我收到以下错误消息

```
There is no such field [bar] in the given Query component, aliased by [i] 
```

有没有办法使用 bar.name 使 foo 中的 bar 可排序？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:35:19.280

您必须在提供给 KnpPaginatorBundle 的查询中加入表

```
SELECT i
FROM abc\DemoBundle\Entity\Bar i
JOIN i.bar b 
```

现在您可以使用以下内容进行排序：

```
<{{  entities.sortable('bar', 'b.name')|raw }}> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:10:26.290

我相信 sortable 需要一个标签和一个列。所以你可能正在寻找

```
<{{ entities.sortable('Name', 'i.name')|raw }} 
```

# java - 应用程序已意外停止，请重试 Android

> ID：10318944
> 
> 赞同：-2
> 
> 时间：2012-04-25T15:36:46.547
> 
> 标签：java, javascript, android, android-emulator

> **可能重复：**
> [应用程序意外停止：mrsnakey](https://stackoverflow.com/questions/10312250/the-application-has-stopped-unexpectedly-mrsnakey)

大家好，我对编程很陌生，最近借了 Mario Zechner 的《Beginning Android Games》一书。他教我如何创建一个名为 mr nom 的游戏。我遵循每一条指令，并将 mr nom 重命名为 mrsnakey。

我的logcat错误如下：

```
 04-25 08:37:16.422: I/Process(856): Sending signal. PID: 856 SIG: 9
04-25 08:39:58.712: W/dalvikvm(863): Unable to resolve superclass of Lcom/zardtechnologies/mrsnakey/MrSnakey; (15)
04-25 08:39:58.752: W/dalvikvm(863): Link of class 'Lcom/zardtechnologies/mrsnakey/MrSnakey;' failed
04-25 08:39:58.752: D/AndroidRuntime(863): Shutting down VM
04-25 08:39:58.752: W/dalvikvm(863): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-25 08:39:58.792: E/AndroidRuntime(863): FATAL EXCEPTION: main
04-25 08:39:58.792: E/AndroidRuntime(863): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.zardtechnologies.mrsnakey/com.zardtechnologies.mrsnakey.MrSnakey}: java.lang.ClassNotFoundException: com.zardtechnologies.mrsnakey.MrSnakey in loader dalvik.system.PathClassLoader[/data/app/com.zardtechnologies.mrsnakey-2.apk]
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.os.Looper.loop(Looper.java:123)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-25 08:39:58.792: E/AndroidRuntime(863):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 08:39:58.792: E/AndroidRuntime(863):  at java.lang.reflect.Method.invoke(Method.java:521)
04-25 08:39:58.792: E/AndroidRuntime(863):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-25 08:39:58.792: E/AndroidRuntime(863):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-25 08:39:58.792: E/AndroidRuntime(863):  at dalvik.system.NativeStart.main(Native Method)
04-25 08:39:58.792: E/AndroidRuntime(863): Caused by: java.lang.ClassNotFoundException: com.zardtechnologies.mrsnakey.MrSnakey in loader dalvik.system.PathClassLoader[/data/app/com.zardtechnologies.mrsnakey-2.apk]
04-25 08:39:58.792: E/AndroidRuntime(863):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-25 08:39:58.792: E/AndroidRuntime(863):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-25 08:39:58.792: E/AndroidRuntime(863):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-25 08:39:58.792: E/AndroidRuntime(863):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
04-25 08:39:58.792: E/AndroidRuntime(863):  ... 11 more 
```

我的清单在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zardtechnologies.mrsnakey"
    android:versionCode="1"
    android:versionName="1.0" >

    <application
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="Mr.Snakey" >
        <activity
            android:name=".MrSnakey"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="Mr.Snakey"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="12" />

</manifest> 
```

我的活动在这里：

```
package com.zardtechnologies.mrsnakey;

import com.zardapps.framework.Screen;
import com.zardtechnologies.androidgames.framework.impl.AndroidGame;

public class MrSnakey extends AndroidGame {

    public Screen getStartScreen() {
        return new LoadingScreen(this);
    }

} 
```

**我的安卓游戏文件**

```
package com.zardtechnologies.androidgames.framework.impl;

import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.view.Window;
import android.view.WindowManager;

import com.zardapps.framework.Audio;
import com.zardapps.framework.FileIO;
import com.zardapps.framework.Game;
import com.zardapps.framework.Graphics;
import com.zardapps.framework.Input;
import com.zardapps.framework.Screen;

public abstract class AndroidGame extends Activity implements Game {
    AndroidFastRenderView renderView;
    Graphics graphics;
    Audio audio;
    Input input;
    FileIO fileIO;
    Screen screen;
    WakeLock wakeLock;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        boolean isLandscape = getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;
        int frameBufferWidth = isLandscape ? 480 : 320;
        int frameBufferHeight = isLandscape ? 320 : 480;
        Bitmap frameBuffer = Bitmap.createBitmap(frameBufferWidth,
                frameBufferHeight, Config.RGB_565);

        float scaleX = (float) frameBufferWidth
                / getWindowManager().getDefaultDisplay().getWidth();
        float scaleY = (float) frameBufferHeight
                / getWindowManager().getDefaultDisplay().getHeight();

        renderView = new AndroidFastRenderView(this, frameBuffer);
        graphics = new AndroidGraphics(getAssets(), frameBuffer);
        fileIO = new AndroidFileIO(getAssets());
        audio = new AndroidAudio(this);
        input = new AndroidInput(this, renderView, scaleX, scaleY);
        screen = getStartScreen();
        setContentView(renderView);

        PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK,
                "GLGAME");

    }

    public void onResume() {
        super.onResume();
        wakeLock.acquire();
        screen.resume();
        renderView.resume();
    }

    public void onPause() {
        super.onPause();
        wakeLock.release();
        renderView.pause();
        screen.pause();

        if (isFinishing())
            screen.dispose();
    }

    public Input getInput() {
        return input;
    }

    public FileIO getFileIO() {
        return fileIO;
    }

    public Graphics getGraphics() {
        return graphics;
    }

    public Audio getAudio() {
        return audio;
    }

    public void setScreen(Screen screen) {
        if (screen == null)
            throw new IllegalArgumentException("Screen must not be null");
        this.screen.pause();
        this.screen.dispose();
        screen.resume();
        screen.update(0);
        this.screen = screen;
    }

    public Screen getCurrentScreen() {
        return screen;
    }
} 
```

哦，另一条笔记我在网上搜索了很多人说要调试。我调试了它，我得到了这个：

```
Mr.Snakey [Android Application] 
    DalvikVM[localhost:8631]    
        Thread [<1> main] (Suspended (exception RuntimeException))  
            ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2585  
            ActivityThread.handleLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2679   
            ActivityThread.access$2300(ActivityThread, ActivityThread$ActivityRecord, Intent) line: 125 
            ActivityThread$H.handleMessage(Message) line: 2033  
            ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
            Looper.loop() line: 123 
            ActivityThread.main(String[]) line: 4627    
            Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
            Method.invoke(Object, Object...) line: 521  
            ZygoteInit$MethodAndArgsCaller.run() line: 868  
            ZygoteInit.main(String[]) line: 626 
            NativeStart.main(String[]) line: not available [native method]  
        Thread [<6> Binder Thread #2] (Running) 
        Thread [<5> Binder Thread #1] (Running) 
```

关于如何阅读这篇文章的任何提示？只要

```
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  

                ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
```

只有这些给了我一个框，上面写着“附加来源”

谢谢阅读！感谢提供的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:43:59.007

```
Unable to resolve superclass of Lcom/zardtechnologies/mrsnakey/MrSnakey; (15) 
```

这是您的应用程序失败的关键。

我建议将 AndroidGame 和 Game 这两个类移动到与 MrSnakey (com.zardtechnologies.mrsnakey) 相同的包中并尝试。在加载 MrSnakey 时，Dalvik 无法链接您的超类。

# xml - 通过 ExtJs 4 的 ASP.Net MVC4 Web API - 有时返回 XML 有时返回 JSON

> ID：10318945
> 
> 赞同：1
> 
> 时间：2012-04-25T15:36:48.187
> 
> 标签：xml, json, extjs, asp.net-mvc-4

有人可以解释为什么在以下场景中“ONEController”返回 XML 而“TWOController”在从 ExtJs 以相同方式请求时返回 JSON？

MVC Web API 代码：

```
public class ONEController : ApiController
{
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }
}
public class TWOController : ApiController
{
    public thing<string> Get()
    {
        return new thing<string>(new string[] { "value1", "value2" });
    }
}
[System.Runtime.Serialization.DataContract]
public class thing<T>
{
    public thing(IEnumerable<T> stuff)
    {
        Id = 42;
        data = stuff;
    }
    [System.Runtime.Serialization.DataMember]
    public int Id { get; set; }
    [System.Runtime.Serialization.DataMember]
    public IEnumerable<T> data { get; set; }
} 
```

ExtJs 控制器：

```
Ext.define('EPSS.controller.Things', {
extend: 'Ext.app.Controller',

views: [
    'Thing.Index'
],
stores: [
    'ONEs',
    'TWOs'
],

init: function () {
    console.log('controller init');
    this.control({
        'container > ThingIndex': {
            render: this.onPanelRendered
        }
    });
},

onPanelRendered: function () {
    console.log('index rendered');
    this.getONEsStore().load();
    this.getTWOsStore().load();
}
}); 
```

模型和商店看起来像这样（非常简单）：

```
Ext.define('EPSS.store.ONEs', {
extend: 'Ext.data.Store',
model: 'EPSS.model.ONE'
});
Ext.define('EPSS.model.ONE', {
extend: 'Ext.data.Model',

fields: [
    'Id',
    'Details'
],
idProperty: 'Id',

proxy: {
    type: 'rest',
    url: '/api/ONE',
    reader: {
        type: 'json'
    }
}
}); 
```

我还不需要对这个示例数据做任何事情......我只是设置了一个简单的 ExtJs 索引视图，从 Home Index.cshtml 调用 ExtJs 应用程序，控制器在渲染时触发存储。在 firebug 控制台中，“TWO”将呈现一些不错的 JSON，而“ONE”将响应 XML 和未捕获的异常：“无法解析服务器返回的 JSON...”

# r - 具有 R 中因子的索引向量

> ID：10318947
> 
> 赞同：1
> 
> 时间：2012-04-25T15:36:56.507
> 
> 标签：r

我有一个因子 RFyhat，我希望将其转换为数字向量。我已经发现了

```
as.numeric(levels(RFyhat))[RFyhat] 
```

根据需要工作，我已经玩过这个结构：

```
c(1,2,20,4,5,6,7)[RFyhat] 
```

也可以按预期工作（`RFyhat`有 7 个级别）。

所以我理解这种构造的行为，但我想知道是否有人可以解释这种语法是如何工作的，或者它是否只是“语法糖”。更具体地说，是否`[RFyhat]`充当索引向量？如果是这样，因子在用作索引时通常如何表现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:47:30.203

是的，我相信因子在用于索引时会转换为整数，而不是字符或其他任何东西。

看这个例子

```
> fac <- factor(letters[c(1,1,2,1,3,3,2,1)])
> vec <- c(b=1, a=2, c=3)
> vec[fac]
b b a b c c a b 
1 1 2 1 3 3 2 1 
```

所以 element 1 of`fac`已经返回 element 1 of `vec`，而不管名称的不同顺序。

个人比较喜欢`as.integer(as.character(RFyhat))`。`as.numeric(levels(RFyhat))[...]`

# c# - 如何将对象绑定到 ComboBox，但在更改时更新不同的对象？

> ID：10318948
> 
> 赞同：0
> 
> 时间：2012-04-25T15:37:03.407
> 
> 标签：c#, wpf, xaml, binding, combobox

我有一个`Zone`对象包含

```
public int Block {get;set;} 
```

我还有一个配置对象，其中包含最小值和最大值`Block`，分别为 0 和 2。

我需要显示一个包含有效值范围的 ComboBox，但我需要将所选值绑定到`Block`.

对我来说最好的方法是什么？

我一直在尝试以下方法：

```
var blocks = new Dictionary<string, int>();
for (int i = _currentZone.Constraints.Block.Min; i <= _currentZone.Constraints.Block.Max; i++)
{
    blocks.Add("Block " + i, i);
}

var blocksCombo = new ComboBoxControl(blocks, GetCurrentBlockValue()); 
```

将 ComboBoxControl 定义为

```
public ComboBoxControl(Dictionary<string, int> comboItems, int? selectedValue)
{
    InitializeComponent();

    cboItems.ItemsSource = comboItems;
    cboItems.SelectedValue = selectedValue;
} 
```

和 XAML 定义为

```
<Grid>

    <ComboBox x:Name="cboItems" 
              SelectionChanged="combo_SelectionChanged" 
              Height="25" 
              SelectedValuePath="Value">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Path=Key}"/>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox>

</Grid> 
```

`combo_SelectionChanged`触发事件时，我手动更新`Block`值，这并不理想。

我想要的是能够使用字典中的项目设置组合框，但是当我更改所选项目时，值绑定到不同的对象 - `Block`. 这可能吗？

如果是这样，我该如何实施？如果没有，有没有比我目前正在做的更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:39:48.277

我相信这就像改变你的xaml一样简单......

```
<ComboBox x:Name="cboItems" 
          SelectionChanged="combo_SelectionChanged" 
          Height="25" 
          SelectedValuePath="Value"
          SelectedItem="{Binding Block}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=Key}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

假设数据上下文设置正确，您可能需要在某个时候将组合框的数据上下文设置为您的 Zone 对象，也许将它与构造函数一起传递......

```
var blocksCombo = new ComboBoxControl(blocks, GetCurrentBlockValue(), this);

public ComboBoxControl(Dictionary<string, int> comboItems, int? selectedValue, Zone zone)
{
    InitializeComponent();

    cboItems.ItemsSource = comboItems;
    cboItems.SelectedValue = selectedValue;
    cboItems.DataContext = zone;
} 
```

编辑：

另外我认为 Henk 是对的，您可能希望将字典更改为 Block 的 ObservableCollection。（实际上刚刚实现的块只是一个 int，这可能会用作字典）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:10:16.937

我希望我理解正确。您有组合框并想绑定到一个特定区域？

```
<ComboBox ItemsSource="{Binding ValidValuesList}" ItemStringFormat="Block {0}" SelectedItem="{Binding MyZone.Block}"/> 
```

这绑定到

```
public List<int> ValidValuesList
{
    get { return new List<int> { 0, 1, 2 }; }
} 
```

并

```
public Zone MyZone { get; set; } 
```

在您的用户控件 DataContext 中。

# jquery - 在 rails 中使用 Twitter Bootstrap jquery modal 链接到另一个页面

> ID：10318949
> 
> 赞同：3
> 
> 时间：2012-04-25T15:37:03.933
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap

我只是想让这个模式出现并显示另一个页面的内容，但我无法让它工作，因为我是 Jquery 的新手。有没有办法修改下面的代码，以便在模式弹出窗口中显示“/contact/”的内容？

```
----------
# this content is on http://myurl.com/contact/
 <div style="display: none;" id="myModal" class="modal hide fade">
 <p>this is my email app here...</p>
</div>
----------
# this is the button on a 'show' page where i want someone to push to bring up the contents of the above page in the modal.
<a data-toggle="modal" href="#myModal" class="btn btn-primary btn-large">Launch Email</a> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T20:51:20.253

好的，所以这里的技巧是“其他页面”可能是 Rails 控制器操作的结果，该操作通常会在单独的 URL 上呈现页面，对吧？然而，bootstrap 假定当您单击该链接时，它的 HTML 已经存在于当前页面上。

那么如何处理呢？您需要通过 AJAX 发出控制器请求（`link_to ... :remote => true`这是一个很好的起点）并更改控制器以将其内容添加到当前页面某处的 div 中。完成后，您上面的代码或类似的代码（或 Bootstrap 页面上记录的代码）将执行您想要的操作。

编辑：添加特定示例，在我的情况下，在引导模式中打开编辑用户页面（使用 Devise gem 进行身份验证）：

`app/views/devise/registrations/_edit.html.erb:`

```
<div class="modal hide fade in" id="user-edit">
  <div class="modal-header">
    <button class="close" data-dismiss="modal">x</button>
    <h2>Edit User</h2>
  </div>

  <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:method => :put}) do |f| %>
    <div class="modal-body">
      <%= devise_error_messages! %>

      <div>
        <%= f.label :name %><br/>
        <%= f.text_field :name %>
      </div>

      <div>
         <%= f.label :email %><br/>
        <%= f.email_field :email %>
      </div>

      <div>
        <%= f.label :password %> <i>(leave blank if you don't want to change it)</i><br/>
        <%= f.password_field :password, :autocomplete => "off" %>
      </div>

      <div>
        <%= f.label :password_confirmation %><br/>
        <%= f.password_field :password_confirmation %>
      </div>

      <div>
        <%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br/>
        <%= f.password_field :current_password %>
      </div>
    </div>

    <div class="modal-footer">
      <%= f.button "Update", :class => "btn btn-primary", :data => { :dismiss => "modal"} %>
      <a href="#" class="btn" data-dismiss="modal">Close</a>
    </div>
  <% end %>
</div> 
```

`app/views/devise/registrations/edit.js.erb:`

```
$("#main").before("<%= escape_javascript(render "edit", :formats => [:html]) %>");
$("#user-edit").modal(); 
```

并且，从任何页面调用它的链接（我现在在导航中有它：

```
<li><%= link_to "Edit Account", edit_user_registration_path, :remote => true %></li> 
```

# json.net - json.net SelectToken 嵌入“.”

> ID：10318951
> 
> 赞同：8
> 
> 时间：2012-04-25T15:37:08.330
> 
> 标签：json.net

我有看起来像这样的json：

```
myjson = {"queries":{"F.SP": 27}} 
```

所以与

```
queryResults = JObject.Parse(jsonString) 
```

我可以

```
firstToken = queryResults.SelectToken("queries") 
```

并取回 LinqJToken

```
{"F.SP": 27} 
```

但是我被卡住了，因为当我尝试

```
subToken = firstToken.SelectToken("F.SP") 
```

我什么都没有。我猜这是因为 JSON.net 正在寻找带有子标记“SP”的标记“F”。

我也尝试了以下各项，但无济于事

```
myToken = queryResults.SelectToken("queries.F.SP")     
myToken = queryResults.SelectToken("queries[0].F.SP") 
```

（queryResults.SelectToken("queries[0]") 什么都不返回，fwiw）

有任何想法吗？

编辑：我已经验证了嵌入的“。” 是问题；如果我将原始 json 更改为

```
{"queries":{"FSP": 27}} 
```

我可以

```
queryResults.SelectToken("queries").SelectToken("FSP") 
```

没问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-29T10:44:39.657

如果您在 JSON 字段中有这样的名称：

```
{"queries":{"F.SP": 27}} 
```

您可以使用 SelectToken 转义：

```
queryResults.SelectToken("queries").SelectToken("['F.SP']") 
```

或者

```
queryResults.SelectToken("queries.['F.SP']") 
```

以下是更多转义示例：http: [//www.newtonsoft.com/json/help/html/QueryJsonSelectTokenEscaped.htm](http://www.newtonsoft.com/json/help/html/QueryJsonSelectTokenEscaped.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-07T05:18:05.100

这不会返回令牌本身，但会返回值（这可能是您正在寻找的东西）......

```
queryResults.SelectToken("queries").Value<int>("F.SP"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T02:05:18.100

与其尝试使用 SelectToken，不如使用索引搜索？

```
subToken = queryResults["F.SP"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T12:15:29.657

```
JObject obj = JObject.Parse(jsonstring);
var fsp = obj["queries"].First().First(); 
```

不是最优雅的，但它得到了价值。

# node.js - node.io ：工作完成后，再做一次

> ID：10318952
> 
> 赞同：2
> 
> 时间：2012-04-25T15:37:09.033
> 
> 标签：node.js, web-scraping, node.io

我正在用[node.io构建一个](http://node.io/)**刮板**。

我要**抓取**的页面每分钟都有新内容。我想每分钟一次又一次地运行我的工作。（好吧，我可以用 bash 脚本来做到这一点，但我想留在 javascript 中）这是一项基本工作：

```
var nodeio = require('node.io'), options = {timeout: 10};

exports.job = new nodeio.Job(options, {
    input: ['hello', 'foobar', 'weather'],
    run: function (keyword) {
        this.getHtml('http://www.google.com/search?q=' + encodeURIComponent(keyword), function (err, $) {
            var results = $('#resultStats').text.toLowerCase();
            this.emit(keyword + ' has ' + results);
        });
    }
}); 
```

我怎么能那样做？我是 node.js 的初学者，我在工作中尝试了 setInterval （：没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:12:42.993

试试这个（使用“node `<myfile.js`>”而不是“node.io `<myfile.js`>”运行）：

```
var nodeio = require('node.io'), options = {timeout: 10};
var job = {
    input: ['hello', 'foobar', 'weather'],
    run: function (keyword) {
        this.getHtml('http://www.google.com/search?q=' + encodeURIComponent(keyword), function (err, $) {
        var results = 'test';//$('#resultStats').text.toLowerCase();
        this.emit(keyword + ' has ' + results);
      });
    }
};

setInterval(function(){
    nodeio.start(new nodeio.Job(options, job), options, function(){});
}, 5000); 
```

您遇到的问题是 node.io 中的以下代码块，当您在运行作业时不提供回调时退出节点：

```
//Default behaviour is to exit once the job is complete
callback = callback || function (err) {
    if (err) {
        utils.status.error(err);
    }
    process.exit();
}; 
```

# java - android 窗口软输入模式

> ID：10318956
> 
> 赞同：0
> 
> 时间：2012-04-25T15:37:16.710
> 
> 标签：java, android, input, keyboard

在我的应用程序中，我需要使用 EditText。但我有一个问题。在某些固件（例如冰淇淋三明治）上，当用户单击 edittext 时，键盘会将整个屏幕向上推！我想关掉它。

我尝试添加 android:windowSoftInputMode="adjustResize"。没有改变。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:02:15.777

尝试

```
 android:windowSoftInputMode="adjustPan" 
```

对你来说完美的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:02:49.660

将此添加到您的 AndroidManifest.xml

```
android:windowSoftInputMode="stateHidden" 
```

非常适合我。你试试这个。

# mysql - 这个 sql 查询是否有效（多对多关系）

> ID：10318961
> 
> 赞同：0
> 
> 时间：2012-04-25T15:37:33.037
> 
> 标签：mysql, sql, many-to-many

我只是在徘徊以下查询是否有效。我有一张名为教授的表，其中包含教授。表主题包含主题。多对多关系是通过professor_subject 表实现的，其中包含professor_id 和subject_id 字段。

现在我需要看看哪个教授在教哪个科目。我写了这个 SQL 查询：

```
SELECT concat(professor.name, " ", professor.surname) as "Professor", 
       subject.name as "Subject" 
FROM professor_subject, subject, professor 
WHERE subject.id = subject_id 
    and professor.id = professor_id; 
```

这个查询有效吗？我的意思是，它会永远做我想做的事吗？我有点怀疑，因为我没有使用 JOIN 关键字。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:40:29.160

不，这里没有任何东西可以将教授与学科相关联。您正在使用没有条件的交叉连接（不确定 where 子句中的 subject_id 和professor_id 是表值还是查询参数）。你需要类似的东西：

```
select concat(professor.name, " ", professor.surname) as "Professor",
       subject.name as "Subject"
from professor
inner join professor_subject
    on professor.id = professor_subject.professor_id
inner join subject
    on professor_subject.subject_id = subject.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:47:55.230

假设 subject_id 和professor_id 在professor_subject 中，你没问题。在所有 SQL 版本（例如 Oracle pre-9i）中都可以使用 JOIN 关键字之前，这就是连接的完成方式。

# jquery - jQuery Previous and Forward issue

> ID：10318963
> 
> 赞同：0
> 
> 时间：2012-04-25T15:37:45.310
> 
> 标签：jquery

I am beginner in jQuery.

I have three boxes. Every box has its own Prev/Next navigation. When I click on any box, text move, which is fine. But when I click on Prev/Next navigation (except first one) it doesn’t move. Please guide me how can I fix that?

Please check the example to understand my requirement in a better way.

[http://jsfiddle.net/awaises/nWqGf/1/](http://jsfiddle.net/awaises/nWqGf/1/)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:41:02.630

您多次使用相同的 ID。您应该为这些按钮使用一个类，并使用另一个属性将其与正确的框相关联。

我已经修改了你的 jsFiddle，现在它可以工作了：http: [//jsfiddle.net/nWqGf/11/](http://jsfiddle.net/nWqGf/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:42:19.217

ID should be unique, You cannot have duplicate ID's. I modified your markup and then updated the script like below,

[**DEMO**](http://jsfiddle.net/skram/nWqGf/6/)

**JS:**

```
$(".gallery-prev").click(function(){
    $(this).parent().find(".scroll").data("scrollable").prev();
    });

$(".gallery-next").click(function(){
     $(this).parent().find(".scroll").data("scrollable").next();
    });
}); 
```

**HTML:** (Changed all ID to class)

```
<a href="#" class="gallery-prev">Prev</a>
<a href="#" class="gallery-next">Next</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:57:32.057

小提琴：http: [//jsfiddle.net/iambriansreed/vGnuS/](http://jsfiddle.net/iambriansreed/vGnuS/)

JavaScript（只有一行）：

```
$(".scroll").scrollable({ circular: true });​ 
```

HTML：

```
<script src="http://cdn.jquerytools.org/1.2.6/jquery.tools.min.js"></script>
<div class="gallery">
    <a href="#" class="prev">Prev</a>
    <a href="#" class="next">Next</a>
    <br />
    <div class="scroll">
        <div class="pics">
            <div>box 1</div>
            <div>box 2</div>
            <div>box 3</div>
            <div>box 4</div>
            <div>box 5</div>
        </div>
    </div>
</div>

<div class="gallery">
    <a href="#" class="prev">Prev</a>
    <a href="#" class="next">Next</a>
    <br />    
    <div class="scroll">
        <div class="pics">
            <div>box 6</div>
            <div>box 7</div>
            <div>box 8</div>
            <div>box 9</div>
            <div>box 10</div>
        </div>
    </div>
</div>

<div class="gallery">
    <a href="#" class="prev">Prev</a>
    <a href="#" class="next">Next</a>
    <br />

    <div class="scroll">
        <div class="pics">
            <div>box 11</div>
            <div>box 12</div>
            <div>box 13</div>
            <div>box 14</div>
            <div>box 15</div>
        </div>
    </div>
</div>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:43:41.970

您已将相同的 Id 分配给多个元素，这是一个主要问题。相反，你应该做的是：

[http://jsfiddle.net/nWqGf/9/](http://jsfiddle.net/nWqGf/9/)

# c# - Passing data between different views

> ID：10318971
> 
> 赞同：0
> 
> 时间：2012-04-25T15:38:12.777
> 
> 标签：c#, wpf, mvvm, routed-events, routedevent

I am writing a WPF application in C# according to the MVVM model. I have a MainWindow which consists of several views: MenuView, ContentView1, ContentView2, . . . and so on.

The MenuView, ContentView1, ContentView2 . . ., are all **cousins** (not bothers) in the XAML tree.

The MenuView consists of few buttons. Each button has a unique ID. The Content Views (all of them) should receive the menu ID of a selected (clicked) button. i.e. when a button in the MenuView is clicked I want to pass its ID to ContentsViews1, ContentsViews2 and so on.

I am not sure what is the best way to pass data between the views.

I thought to attach an event handler to all menu buttons which reside in the MenuView. The handler is implemented in MainWindow class (which is the root view). This handler will raise a RoutedEvent (with tunnel option) to all children views.

Is there a better way to do it? Is it the best way considering performance issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:09:00.150

您可以简单地`MenuViewModel`公开一个其他（感兴趣的）ViewModel 将订阅的事件。然后每个 View 可以绑定相应的事件并做它需要做的事情。

这就留下了一个问题，即每个感兴趣的 ViewModel 将如何检测到它的存在`MenuViewModel`以便它可以订阅其事件，但是如果没有更多关于您的应用程序和您选择的 MVVM 框架的知识，就无法真正回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:44:28.180

这种方法让我想起了我久违的 java 经验，你传递了某种动作字符串！？给听众。

您将所有按钮绑定到一个处理程序？根据 ID，您想在子视图中执行操作吗？

如果是，您应该将所有按钮绑定到它自己的 ICommand 并在处理程序委托中执行操作。

# gwt - GWT CellTable getVisibleRange() 不是我除了

> ID：10318989
> 
> 赞同：2
> 
> 时间：2012-04-25T15:39:05.700
> 
> 标签：gwt, pagination, gwt-celltable

GWT2.4，带有SimplePager的CellTable，每页显示5个项目（行），假设我总共有8个项目，在第一页我可以看到[1-5]，当我按下next时，它会显示[4-8] （ getVisibleRange() 是 [4-8]），我希望它显示 [6-8]，有什么办法可以实现吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:29:25.600

尝试设置

```
setRangeLimited(false) 
```

使用 SimplePager

或者你也可以覆盖

```
@Override
public void setPageStart(int index) {
  if (getDisplay() != null) {
    Range range = getDisplay().getVisibleRange();
    int pageSize = range.getLength();

    // Removed the min to show fixed ranges
    //if (isRangeLimited && display.isRowCountExact()) {
    //  index = Math.min(index, display.getRowCount() - pageSize);
    //}

    index = Math.max(0, index);
    if (index != range.getStart()) {
      getDisplay().setVisibleRange(index, pageSize);
    }
  } 
```

# php - PHP-cURL --> 遵循 ruby 重定向

> ID：10318994
> 
> 赞同：0
> 
> 时间：2012-04-25T15:39:17.807
> 
> 标签：php, ruby-on-rails, ruby, curl, redmine

我正在尝试从我的网站（redmine）上的页面中提取 wiki 文档。我成功检索到登录页面的重定向，发送帖子用户名和密码字段，但随后我到达一个带有来自 redmine 的 ruby​​ 重定向的页面，我无法更进一步。redmine的“response.rb”文件中的ruby代码是：

```
def redirect(url, status)
  self.status = status
  self.location = url.gsub(/[\r\n]/, '')
  self.body = "<html><body>You are being <a href=\"#{CGI.escapeHTML(url)}\">redirected</a>.</body></html>"
end 
```

我对 ruby​​ 的了解不足以修改 redmine 的代码，那么有没有办法在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:20:18.047

`curl_setopt($curlHandle, CURLOPT_FOLLOWLOCATION, true);`

会告诉 cURL 遵循任何正确配置的重定向（任何发送 Location: 标头的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:55:44.440

找到了替代解决方案！

如果其他人对 redmine 或任何其他重定向有此问题：

1.  首先使用 cURL 登录
2.  将会话保存到 cookie
3.  使用 cURL 获取需要身份验证的安全页面。

    ```
    <?php
        $tempFilename = tempnam("/tmp", "COOKIE");

        // Login
        $curlHandle = curl_init("http://bob.com/login");

        curl_setopt($curlHandle, CURLOPT_COOKIEJAR, $tempFilename);
        curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, true);

        $dataArray = array(
             "username" => "bob",
             "password" => "password"
        );

        curl_setopt($curlHandle, CURLOPT_POSTFIELDS, $dataArray);

        $output = curl_exec($curlHandle);

        // Getting the wiki
        $curlHandle = curl_init("http://bob.com/wiki");

        curl_setopt($curlHandle, CURLOPT_COOKIEFILE, $tempFilename);
        curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, true);

        $output = curl_exec($curlHandle);
        echo $output;
    ?> 
    ```

# android - 在运行时添加图像时仪表板中的错误

> ID：10318996
> 
> 赞同：0
> 
> 时间：2012-04-25T15:39:20.257
> 
> 标签：android, sqlite, dashboard

我有一个注册表单。我正在检查性别；如果性别是男性，则应将男性图像（ieRdrawable.male）添加到仪表板。如果性别是女性，则应将女性图像添加到仪表板中。如何做那？这是我的活动

```
 public class KidRegistration extends Activity
   {
         Intent it2;
ImageView imageView;
private static KidDbHelper kdbhelper;
EditText Editkid,Editkidfname,Editkidlname,Editkidphone,Editkidemail;
RadioGroup rgroup;
RadioButton radio1,radiob2;
Button submit,reset,view;;
TextView addTextView;
int kidmalephotopath, kidfemalephotopath;
public final Pattern EMAIL_ADDRESS_PATTERN = Pattern.compile(
          "[a-zA-Z0-9\\+\\.\\_\\%\\-\\+]{1,256}" +
          "\\@" +
          "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}" +
          "(" +
          "\\." +
          "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,25}" +
          ")+"
      );
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.kid_registration);
    View title=getWindow().findViewById(android.R.id.title);
    View titlebar=(View) title.getParent();
    titlebar.setBackgroundColor(Color.DKGRAY);

    Editkid=(EditText) findViewById(R.id.kid);
    Editkidfname=(EditText) findViewById(R.id.kidfname);
    Editkidlname=(EditText) findViewById(R.id.kidlname);
    Editkidphone=(EditText) findViewById(R.id.kidphone);
    Editkidemail=(EditText) findViewById(R.id.kidemail);
    rgroup=(RadioGroup) findViewById(R.id.rgroup);
    radio1=(RadioButton) findViewById(R.id.radio1);
    radiob2=(RadioButton) findViewById(R.id.radio2);
    submit=(Button) findViewById(R.id.kidsubmit);
    reset=(Button) findViewById(R.id.kidreset);

    kidmalephotopath=getResources().getIdentifier("kidmale", "drawable", getPackageName());
    kidfemalephotopath=getResources().getIdentifier("kidfemale", "drawable", getPackageName());

    it2=getIntent();

    submit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) 
        {
            // TODO Auto-generated method stub
            //Validating each entry
               if((Editkid.getText().toString().contains("a-z,A-Z"))||(Editkid.getText().length()==0))
                {
                    Editkid.setError("Please enter the valid number only");

                }
                else if((Editkidfname.getText().toString().contains("0-9"))|| Editkidfname.getText().toString().length()==0)
                {
                    Editkidfname.setError("Please Enter Valid First Name");

                }
                else if((Editkidlname.getText().toString().contains("0-9"))|| Editkidlname.getText().toString().length()==0)
                {
                    Editkidlname.setError("Please Enter valid Last Name");

                }
                else if(!(radio1.isChecked()||radiob2.isChecked()))
                {
                    mt("Select gender");

                }
                else if((Editkidphone.getText().toString().contains("a-z,A-Z"))||(Editkidphone.getText().toString().length()<6)||(Editkidphone.getText().toString().equalsIgnoreCase("")))
                {
                    Editkidphone.setError("Please Enter Valid Phone No");

                }
                else if(!(checkEmail(Editkidemail.getText().toString())))
                {
                    Editkidemail.setError("Please Enter valid email Id");

                }
                else
                {
                    long flag = 0;
                    int id = 1;
                    KidDbHelper kdbhelper=new KidDbHelper(getApplicationContext());
                    SQLiteDatabase db=kdbhelper.getWritableDatabase();
                    Cursor cursor = db.query("kiddetails", new String[]{"count(*) k_id"}, null, null, null, null, null);
                    while(cursor.moveToNext())
                    {
                        int idFromDatabase = cursor.getInt(cursor.getColumnIndex("k_id"));
                        if(idFromDatabase != 0)
                        {
                            id = 1 + idFromDatabase;
                        }
                    }
                    ContentValues values = new ContentValues();
                    values.put("k_id", Integer.parseInt(Editkid.getText().toString()));
                    values.put("firstname", Editkidfname.getText().toString().trim());
                    values.put("lastname", Editkidlname.getText().toString().trim());
                    if(radio1.isChecked())
                    {
                        values.put("gender","M");  

                    }
                    else
                    {
                        values.put("gender", "F");

                    }
                    values.put("phone", Long.parseLong(Editkidphone.getText().toString()));
                    values.put("email", Editkidemail.getText().toString());
                    //values.put("kidphotopath", photopath);
                    flag = db.insert("kiddetails", null, values);
                    if(flag != -1)
                    {
                        Toast toast = Toast.makeText(getApplicationContext(), "You have successful inserted this record into database! Your Entered ID is  "+flag, Toast.LENGTH_LONG); 
                        toast.show();   
                        db.close();
                        Intent mydash=new Intent(getApplicationContext(),DashBoard.class);
                        startActivity(mydash);
                        return;
                    }
                    else
                    {
                        Toast toast = Toast.makeText(getApplicationContext(), "An error occured when insert this record into database! Please try different kid ID", Toast.LENGTH_LONG); 
                        toast.show();
                        db.close();
                        return;
                    }
                }               
        }//OnClick()
    });//Listner

}//onCreate()

void mt( String text ) 
{
    Toast.makeText( this, text, Toast.LENGTH_SHORT).show();
}

public void kidreset(View v) 
{
   Editkid.setText("");
   Editkidfname.setText("");
   Editkidlname.setText("");
   rgroup.clearCheck();
   Editkidphone.setText("");
   Editkidemail.setText("");       
}

private boolean checkEmail(String email) 
{
    return EMAIL_ADDRESS_PATTERN.matcher(email).matches();
}

 }//Class 
```

这是我的 ImageAdapter 类

```
 public class ImageAdapter extends BaseAdapter 
    {
              private Context mContext;
     public ImageAdapter(Context c) 
      {
           mContext = c;

       }
public int getCount() 
{
    return mThumbIds.length;
}
public Object getItem(int position) 
{
    return null;
}
public long getItemId(int position) 
{
    return 0;
}
// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) 
{
    ImageView imageView = new ImageView(mContext);
    if (convertView == null) 
    {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } 
    else 
    {
        imageView = (ImageView) convertView;
    }
    imageView.setImageResource(mThumbIds[position]);
    return imageView;    
}   
// references to our images
private Integer[] mThumbIds = {R.drawable.add};
 } 
```

# php - 如何在不使用 INDEX 的情况下更新 mysql 数据库中的特定行

> ID：10318998
> 
> 赞同：0
> 
> 时间：2012-04-25T15:39:24.340
> 
> 标签：php, mysql

如何在不使用列或主键的情况下引用表中的特定行？我只是想更新让我们说表中的第三行，但我不想在该列上使用带有索引的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:42:24.497

Add `LIMIT 2,1` to limit row number 3\. Change the `2` to affect whatever row you want, but it's probably better to also add `ORDER BY` on a key.